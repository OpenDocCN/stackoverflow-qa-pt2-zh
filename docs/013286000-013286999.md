# StackOverflow 问答 13286000-13286999

# c# - 禁用gridview中的最后一行

> ID：13286000
> 
> 赞同：0
> 
> 时间：2012-11-08T09:20:34.750
> 
> 标签：c#, asp.net, gridview

我有一个gridview，我想禁用它的最后5行我该怎么做？？下面的代码不起作用

```
 protected void gview_RowDataBound(object sender, GridViewRowEventArgs e)
  {
     if (e.Row.RowType == DataControlRowType.DataRow)
    {
          e.Row.Enabled = e.Row.RowIndex <= 5; //for disabling last 4 rows 
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:25:46.373

```
protected void gview_RowDataBound(object sender, GridViewRowEventArgs e)
{
    GridView grid = sender as GridView;
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Enabled = grid.Rows.Count - e.Row.RowIndex > 4;
    }
} 
```

**编辑：**假设你`DataSource`是`DataTable`，你可以做这样的事情：

```
protected void gview_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Enabled = dataTable.Rows.Count - e.Row.RowIndex > 4;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:54:00.477

我假设您将数据集作为 datascurce 绑定到 gridview，因此在 RowDataBound 绑定中添加以下代码：

```
public static int count=0;
protected void grdview1_RowDataBound()
 {
   for(int i=0;i< ds.table[0].rows.count;i++) 
    {
      count++;
      if(count>(ds.table[0].rows.count-5))
      {
          e.Row.Enabled = false;
      }  
   }
} 
```

# java - 找出另一个数组列表中不存在的数组列表的元素

> ID：13286008
> 
> 赞同：66
> 
> 时间：2012-11-08T09:20:45.750
> 
> 标签：java, arrays, list, collections, arraylist

我必须找到一种最佳方法来找出第二个数组列表中未显示的元素。认为

```
Arraylist a,b, 

Arraylist a={1,2,3,4,5};
Arraylist b={2,3,4}; 
```

所以基本上我想要的是找出**数组列表 b**中不存在的**a**元素。

 **那么最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-11-08T09:24:51.903

```
List<Integer> c = new ArrayList<>(a);
c.removeAll(b); 
```

还可以考虑使用 Sets 而不是 Lists。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-08T09:54:03.007

您可以使用[Apache Commons Collections](https://commons.apache.org/proper/commons-collections/)，它有一个明确用于此目的的方法：

```
public static void main(String[] args) {
    List<Integer> a = Arrays.asList(new Integer[] { 1, 2, 3, 4, 5 });
    List<Integer> b = Arrays.asList(new Integer[] { 2, 3, 4 });
    Collection<Integer> aMinusB = CollectionUtils.subtract(a, b);
    System.out.println(aMinusB);
} 
```

打印结果为：*[1, 5]*。

Apache Commons 库经过充分测试，通常用于扩展标准 Java 功能。这个特殊的方法接受`Iterable`作为参数，所以你可以使用任何`Collection`你想要的。您还可以混合不同的集合类型：

```
public static void main(String[] args) {
    List<Integer> a = Arrays.asList(new Integer[] { 1, 2, 3, 4, 5 });
    Set<Integer> b = new HashSet<Integer>(Arrays.asList(new Integer[] { 2, 3, 4 }));
    Collection<Integer> aMinusB = CollectionUtils.subtract(a, b);
    System.out.println(aMinusB);
} 
```

打印的结果是一样的，*[1, 5]*。

[在这里](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/CollectionUtils.html#subtract-java.lang.Iterable-java.lang.Iterable-)查看 Javadoc 。

* * *

为了完整起见，Google 的[Guava](https://github.com/google/guava)库[没有此功能](https://github.com/google/guava/wiki/ApacheCommonCollectionsEquivalents)：

> `Collection *subtract*(Collection, Collection)`
> 没有等效项——创建一个包含 a 的 ArrayList，然后为 b 中的每个元素调用 remove。

但是，它实现了一个名为[`Sets.difference()`](https://guava-libraries.googlecode.com/svn/tags/release04/javadoc/com/google/common/collect/Sets.html#difference%28java.util.Set,%20java.util.Set%29)method 的方法，如果您更喜欢 Guava 并使用集合，则可以使用该方法：

```
public static void main(String[] args) {
    Set<Integer> a = new HashSet<Integer>(Arrays.asList(new Integer[] { 1, 2, 3, 4, 5 }));
    Set<Integer> b = new HashSet<Integer>(Arrays.asList(new Integer[] { 2, 3, 4 }));
    Set<Integer> aMinusB = Sets.difference(a, b);
    System.out.println(aMinusB);
} 
```

结果是`a`其中不存在的所有元素`b`（即*[1, 5]*再次）。当然，顺序是不确定的，因为它是在集合上操作的。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-01-10T21:00:46.387

这是使用 java 8 的另一种方法-

```
a.stream().filter(b::contains).collect(Collectors.toList()); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-08T09:23:52.213

你可以试试`removeAll`：

```
List<Integer> notPresent = new ArrayList<Integer>(a);
notPresent.removeAll(b); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-08-30T09:29:35.330

采用`org.apache.commons.collections4.ListUtils`

**给定**

```
List<Integer> a = Arrays.asList(new Integer[]{  1,2,3,4,5});
List<Integer> b = Arrays.asList(new Integer[]{0,1,2,3}); 
```

**行动**

```
List<Integer> c = ListUtils.removeAll(b, a) 
```

**结果在列表 c**

```
4, 5 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-08T09:24:08.873

请尝试这样

```
for (Object o : a) {  
  if (!b.contains(o)) {  
    // this is not present
  }  
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-08T09:24:35.710

遍历一个列表，然后使用[contains](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html#contains%28java.lang.Object%29)检查其他列表中的每个元素是否。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-08T09:25:37.210

像这样的东西。如果您认为其中可能存在重复，`a`您可以尝试另一种类型`Collection`，例如`Set`for `notPresent`。

```
 List<Integer> notPresent = new ArrayList<Integer>();

    for (Integer n : a){
     if (!b.contains(n)){
       notPresent.add(n);
     }
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-08T09:35:41.190

试试这个：

```
 public static void main(String[] args) {
        List<Integer> a = new ArrayList<Integer>();
        List<Integer> b = new ArrayList<Integer>();
        List<Integer> exclusion = new ArrayList<Integer>();

        a.add(1);
        a.add(2);
        a.add(3);
        a.add(4);

        b.add(1);
        b.add(2);
        b.add(3);
        b.add(5);

        for (Integer x : a) {
            if (!b.contains(x)) {
                exclusion.add(x);
            }
        }

        for (Integer x : exclusion) {
            System.out.println(x);
        }

    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-08T09:27:42.647

试试这个...

使用`contains()`List的方法。

```
ArrayList<Integer> aList = new ArrayList<Integer>();

for (Integer i : a){

      if (!(b.contains(i))){

             aList.add(i);

       }

     else{
             continue;

      }

 } 
```**

# video - 任何人都可以帮助理解 AVFrame.linesize[] 吗？

> ID：13286022
> 
> 赞同：26
> 
> 时间：2012-11-08T09:21:19.627
> 
> 标签：video, ffmpeg, libavcodec, stride

我试图找出每个单元格的`AVFrame.linesize[]`含义，但我没有找到。

据我了解`linesize[0]`是宽度，`linesize[1]`是高度。

1.  如果我是对的，其他单元格是什么意思？
2.  为什么`avcodec_decode_video2(codecCtxDecode, frameDecoded, &frameFinished, &packet);`只有 linesize[0] 具有值而其他单元格始终为 0？

**更新**

我认为 AVFrame.data[i] 和 AVFrame.linesize[i] 是行中特定颜色的数据和行的长度，对吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-09T08:03:36.640

在平面数据的情况下，例如`YUV420`，`linesize[i]`包含`i`第 -th 平面的步幅。

例如，for frame`640x480` `data[0]`包含指向`Y`组件的指针，`data[1]`并`data[2]`包含指向`U`和`V`平面的指针。在这种情况下，`linesize[0] == 640`, `linesize[1] == linesize[2] == 320`（因为`U`and`V`平面小于`Y`平面的一半）

在像素数据 ( `RGB24`) 的情况下，只有一个平面 ( `data[0]`) 和`linesize[0] == width * channels`( `640 * 3`for `RGB24`)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-09T09:22:00.807

查看视频帧格式的描述：

*   [YUV 像素格式](http://www.fourcc.org/yuv.php)
*   [视频媒体类型 - 图像步幅](http://msdn.microsoft.com/en-us/library/windows/desktop/aa473780)

您将看到格式分为两大类：打包和平面，具体取决于组件是分开保存还是交错保存。步幅对它们的含义略有不同，基本上它们是您需要跳过以前进一行的字节数。

# c - “圣诞节 12 天”的逻辑

> ID：13286024
> 
> 赞同：8
> 
> 时间：2012-11-08T09:21:28.987
> 
> 标签：c, obfuscation

这是众所周知的用 C 语言生成“圣诞节 12 天”歌词的混淆代码示例。我试图找出解释文本实际打印方式的代码逻辑。但我无法理解。

```
#include <stdio.h>
main(t,_,a)
char *a;
{
return!0<t?t<3?main(-79,-13,a+main(-87,1-_,main(-86,0,a+1)+a)):
1,t<_?main(t+1,_,a):3,main(-94,-27+t,a)&&t==2?_<13?
main(2,_+1,"%s %d %d\n"):9:16:t<0?t<-72?main(_,t,
"@n'+,#'/*{}w+/w#cdnr/+,{}r/*de}+,/*{*+,/w{%+,/w#q#n+,/#{l+,/n{n+,/+#n+,/#\
;#q#n+,/+k#;*+,/'r :'d*'3,}{w+K w'K:'+}e#';dq#'l \
q#'+d'K#!/+k#;q#'r}eKK#}w'r}eKK{nl]'/#;#q#n'){)#}w'){){nl]'/+#n';d}rw' i;# \
){nl]!/n{n#'; r{#w'r nc{nl]'/#{l,+'K {rw' iK{;[{nl]'/w#q#n'wk nw' \
iwk{KK{nl]!/w{%'l##w#' i; :{nl]'/*{q#'ld;r'}{nlwb!/*de}'c \
;;{nl'-{}rw]'/+,}##'*}#nc,',#nw]'/+kd'+e}+;#'rdq#w! nr'/ ') }+}{rl#'{n' ')#\
}'+}##(!!/")
  :t<-50?_==*a?putchar(31[a]):main(-65,_,a+1):main((*a=='/')+t,_,a+1)
    :0<t?main(2,2,"%s"):*a=='/'||main(0,main(-61,*a,
"!ek;dc i@bK'(q)-[w]*%n+r3#l,{}:\nuwloca-O;m .vpbks,fxntdCeghiry"),a+1);
} 
```

谁能指导我在哪里可以找到此代码段的解释？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T11:11:10.867

要回答您对 RedX 的后续问题，请按照上面链接中的信息（请参阅此处的完整逆向工程代码：[http ://research.microsoft.com/en-us/um/people/tball/papers /xmasgift/final.html](http://research.microsoft.com/en-us/um/people/tball/papers/xmasgift/final.html)），它执行以下操作来解码字符串：

1.  代码中有2个大字符串：

    ```
    "@n'+,#'/*{}w+/w#cdnr/+,{}r/*de}+,/*{*+,/w{%+,/w#q#n+,/#{l+,/n{n+,/+#n+,/#\
    ;#q#n+,/+k#;*+,/'r :'d*'3,}{w+K w'K:'+}e#';dq#'l \
    q#'+d'K#!/+k#;q#'r}eKK#}w'r}eKK{nl]'/#;#q#n'){)#}w'){){nl]'/+#n';d}rw' i;# \
    ){nl]!/n{n#'; r{#w'r nc{nl]'/#{l,+'K {rw' iK{;[{nl]'/w#q#n'wk nw' \
    iwk{KK{nl]!/w{%'l##w#' i; :{nl]'/*{q#'ld;r'}{nlwb!/*de}'c \
    ;;{nl'-{}rw]'/+,}##'*}#nc,',#nw]'/+kd'+e}+;#'rdq#w! nr'/ ') }+}{rl#'{n' ')# \
    }'+}##(!!/"; 
    ```

    和

    ```
    "!ek;dc i@bK'(q)-[w]*%n+r3#l,{}:\nuwloca-O;m .vpbks,fxntdCeghiry"; 
    ```

2.  它使用第二个字符串查找要显示的正确字符（以下是格式化为 2 行的第二个字符串）

    ```
    !ek;dc i@bK'(q)-[w]*%n+r3#l,{}:
    nuwloca-O;m .vpbks,fxntdCeghiry 
    ```

    示例：字符串 1 的第一个字符是`@`. 在第二个字符串上查找，第一行的“@”与“O”对齐。继续同样的逻辑，你会得到`@n'+,#`= `On the`。简而言之，它将当前位置偏移了 31 ( `printf("%c"), s[index]+31`)

3.  主代码传递字符串 1 中的字符，然后使用上述算法将其翻译成英文可读的字符串。如果您遵循逆向工程链接，那么在所有经文中都有一些不变的字符串，例如：“在圣诞节我的真爱发送给我的“......”。在上面的编码字符串中，这些字符串由“/”字符分隔。

# android - 如何在 Android 上“运行”微观策略报告？

> ID：13286025
> 
> 赞同：0
> 
> 时间：2012-11-08T09:21:30.703
> 
> 标签：android, microstrategy

本周初，我试用了一款新软件，Microstrategy 9。我创建了一些文档、报告和提示。现在我想在我的手机中运行这些文件。我需要做什么才能将这些文件从 Microstrategy 传递到我的手机？是否有任何模拟器可以在 Windows 上运行此报告？

谢谢。

问候，吉尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-12T11:47:22.357

对于 MSTR 免费套件（您可能正在使用），您最多有 10 个许可用户。

您可以使用 MSTR PDF：MicroStrategy Mobile 设计和管理指南，其中包含您需要的所有信息。或谷歌：配置微策略移动服务器

基本上你需要从 app store\google play 下载 Microstrategy 移动应用程序，然后（假设你安装了移动组件去strat->所有程序->microstrategy 工具->移动管理员）你配置 MSTR 移动服务器配置一个设备（在您的情况下是 Android 手机），然后您只需向您的邮件发送一个 url，您按下移动电子邮件中的 url，它会自动定义您的 MSTR 移动应用程序中的所有内容以查看您的项目 - 它就在那里

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T08:09:36.433

您可以使用 Microstrategy Mobile 应用程序。从 android market 下载并安装应用程序。然后您将需要 Microstrategy Mobile 服务器的许可证。如果您有，您必须将您的应用程序配置为 pint 到您的 Mobile Server 。移动服务器将指向负责处理和运行您的报告的智能服务器。

要远程配置应用程序，您必须转到 MobileAdmin Page 。您将获得适用于 Ipad、iphone 和 Android 的选项。选择 Android 做所有需要的配置，最后你会得到一个 URL。在您的手机上发送此 URL 并在任何浏览器中打开它。它将自动配置您的 MSTR APP。然后您可以直接从应用程序运行您的报告....但请记住，您只能在 上查看报告并与之交互，您无法修改任何内容。对于修改使用桌面或 WEB。

谢谢 ！

如果您也需要分步程序，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:18:51.933

很有可能。

见下文：

*   [Android 上的微观策略](https://play.google.com/store/apps/details?id=com.microstrategy.android.webapp)

*   [更多信息](http://www.microstrategy.com/mobile/platform/)

# android - 无法从 URL 获取位图

> ID：13286026
> 
> 赞同：0
> 
> 时间：2012-11-08T09:21:34.730
> 
> 标签：android

我正在尝试从 URL 获取位图，但我不知道该怎么做。这是我正在使用的网址：

```
String imgurl = "http://api.twitter.com/1/users/profile_image/859486608"; 
```

这是我的方法

```
public  Bitmap loadBitmap(String imgPath) {
    String imgUrlStr = imgPath;
    Bitmap bitmap = null;
    try {
        bitmap = BitmapFactory.decodeStream((InputStream)new URL(imgUrlStr).getContent());
    }
    catch (MalformedURLException e) {
        e.printStackTrace();
    }
    catch (IOException e) {
        e.printStackTrace();
    }
    return bitmap;
} 
```

这是日志输出：

```
11-08 14:41:23.471: WARN/System.err(2682): java.io.IOException: Stream is closed
11-08 14:41:23.481: WARN/System.err(2682):     at java.io.BufferedInputStream.read(BufferedInputStream.java:316)
11-08 14:41:23.481: WARN/System.err(2682):     at java.io.FilterInputStream.read(FilterInputStream.java:130)
11-08 14:41:23.481: WARN/System.err(2682):     at com.ideal.self.Exa_LoadImageUrlActivity.loadImageFromUrl(Exa_LoadImageUrlActivity.java:73)
11-08 14:41:23.481: WARN/System.err(2682):     at com.ideal.self.Exa_LoadImageUrlActivity.onCreate(Exa_LoadImageUrlActivity.java:35)
11-08 14:41:23.481: WARN/System.err(2682):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-08 14:41:23.481: WARN/System.err(2682):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-08 14:41:23.491: WARN/System.err(2682):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-08 14:41:23.491: WARN/System.err(2682):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-08 14:41:23.491: WARN/System.err(2682):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-08 14:41:23.491: WARN/System.err(2682):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-08 14:41:23.491: WARN/System.err(2682):     at android.os.Looper.loop(Looper.java:123)
11-08 14:41:23.491: WARN/System.err(2682):     at android.app.ActivityThread.main(ActivityThread.java:4627)
11-08 14:41:23.491: WARN/System.err(2682):     at java.lang.reflect.Method.invokeNative(Native Method)
11-08 14:41:23.491: WARN/System.err(2682):     at java.lang.reflect.Method.invoke(Method.java:521)
11-08 14:41:23.491: WARN/System.err(2682):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-08 14:41:23.501: WARN/System.err(2682):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-08 14:41:23.501: WARN/System.err(2682):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:31:15.077

最好使用异步任务从[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)加载图像……试试这个方法：

```
ImageDownloader().execute(your image URL);

private class ImageDownloader extends AsyncTask<String, Integer, Bitmap>
{
    protected void onPreExecute()
    {
    }

    @Override
    protected Bitmap doInBackground(String... params)
    {
        try
        {
            URL url = new URL(params[0]);
            HttpURLConnection httpCon = (HttpURLConnection)url.openConnection();
            if(httpCon.getResponseCode() != 200)throw new Exception("Failed to connect");
            InputStream is = httpCon.getInputStream();
            return BitmapFactory.decodeStream(is);
        }catch(Exception e){
            Log.e("Image","Failed to load image",e);
        }
        return null;
    }

    protected void onPostExecute(Bitmap img){
        ImageView iv = (ImageView)findViewById(R.id.img);
        if(iv!=null && img!=null)
        {
            iv.setImageBitmap(img);
        }
    }
} 
```

我希望这个能帮上忙 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:12:55.900

只需从*[ImageLoader.java](http://code.google.com/p/libs-for-android/source/browse/src/com/google/android/imageloader/ImageLoader.java?r=971428d0302819a77c3cc728a261f2fc0654f2f0)*中获取一个 ImageLoader 类（*libs-for-android* - Android 平台的库集合）。

如下进行构造函数调用。

```
imageLoader = new ImageLoader(YourActivityName.this); 
```

并使用以下代码显示图像。

```
imageView.setTag(ImageURL);
imageLoader.DisplayImage(ImageURL, ActivityName.this, imageView); 
```

# wpf - 折叠其他列子项时调整WPF网格列的大小？

> ID：13286029
> 
> 赞同：2
> 
> 时间：2012-11-08T09:21:41.957
> 
> 标签：wpf, wpf-controls

我在一个控件中有两个控件`Grid`，并且需要在`Grid`另一个控件获得后使一个控件填充所有空间`Collapseded`，我不知道我`Container`可以使用什么，我也尝试过`StackPanel`，`DockPanel`但我找不到一个好的解决方案。这是我的代码：

```
<Grid>
 <Grid.ColumnDefinitions>
    <ColumnDefinition Width="auto"/>
     <ColumnDefinition Width="auto"/>
 </Grid.ColumnDefinitions>
 <TextBox Grid.Column="0" Visibility="{Binding Istxt1Visible}"/>
 <TextBox Grid.Column="1" Visibility="{Binding Istxt2Visible}"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T09:28:01.637

使用转换器怎么样？如

在窗口资源中

```
<Window.Resources>
    <local:VisibilityToColumnLengthConverter x:Key="visConv" />
</Window.Resources> 
```

......

```
<Grid >
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="{Binding ElementName=tb1, Path=Visibility, Converter={StaticResource visConv}}"/>
            <ColumnDefinition Width="{Binding ElementName=tb2, Path=Visibility, Converter={StaticResource visConv}}"/>
        </Grid.ColumnDefinitions>
        <TextBox Grid.Column="0" Visibility="collapsed" Name="tb1" />
        <TextBox Grid.Column="1" Visibility="Visible"   Name="tb2" />
    </Grid> 
```

最后转换器的代码是

```
[ValueConversion(typeof(System.Windows.Visibility), typeof(System.Windows.GridLength))]
public class VisibilityToColumnLengthConverter : IValueConverter
{
    public object  Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        System.Windows.Visibility vis = (System.Windows.Visibility)value;

        if (vis == System.Windows.Visibility.Visible)
            return new System.Windows.GridLength(1, System.Windows.GridUnitType.Star);
        else
            return new System.Windows.GridLength(1, System.Windows.GridUnitType.Auto);
    }

    public object  ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# c# - 在具有 x,y,z 坐标的点上应用 Sobel 算子进行分段

> ID：13286030
> 
> 赞同：1
> 
> 时间：2012-11-08T09:21:44.530
> 
> 标签：c#, 3d

使用 C# how to perform Edge detection using 3D sobel edge operator 使用三个 3×3×3 掩码强调边缘细节，一个检测 x 梯度，第二个检测 y 梯度，第三个检测 z 梯度。

# android - 如何从 xml 代码创建箭头

> ID：13286032
> 
> 赞同：0
> 
> 时间：2012-11-08T09:21:56.947
> 
> 标签：android, drawable, android-xml

在我的项目中，我需要创建可绘制文件夹中所需的框架、线条和所有形状。我可以从drawable中绘制一个矩形和框架。但是当我需要从可绘制文件夹中创建箭头时，问题就来了。

请帮助我绘制向上箭头和向下箭头，如可绘制文件夹中的图像所示。

![向上箭头](../Images/5a93ec2e6951b08ab063304238af34d4.png) ![向下箭头](../Images/d9a412775eafc65786e6ce4d461700d1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:56:18.390

您目前无法使用 android 的内置工具绘制复杂的形状。[ShapeDrawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)列出了您现在拥有的所有可能性。

为什么不直接在 png（ldpi、mdpi、hdpi）中创建不同大小的箭头并使用它们？这是推荐的方式。

如果你想做自定义的事情，你要么应该研究 SVG，要么[自己画](https://stackoverflow.com/questions/6713757/how-do-i-draw-an-arrowhead-in-android).

# jquery - jquery ajax中的磅字符（#）

> ID：13286035
> 
> 赞同：1
> 
> 时间：2012-11-08T09:22:05.530
> 
> 标签：jquery, ajax

在下面的代码中；它得到一个“div”的内容，包括 html 代码，并保存在 ajsave.php。但是当 div html 内容包含“#”字符时，数据在“#”之后被缩短，如下所示：

```
$.ajax({ 
    type: "GET", 
    url: "ajsave.php", 
    data: "usr="+id+"&divcontent="+cont, 
    success: function(msg){
        $("#result").html(msg); 
}}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:28:51.533

在 URL 中，该`#`字符用于指定锚点 - 您要将页面移动到的页面的一部分 - 因此会被您的 Web 服务器忽略。为了解决这个问题，您需要在客户端（在您的 JavaScript 代码中）使用该[`encodeURIComponent()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)函数对其进行转义，然后在服务器上对其进行转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:26:14.617

这是因为 # 用于定义页面中的锚点，因此将其删除...我建议您使用 POST 而不是 GET，它将纠正您的问题并防止更多问题。如果您仍想在 GET 中使用它，请执行以下操作：

```
cont = cont.replace("#","%22"); 
```

# jquery - 用jquery改变div

> ID：13286036
> 
> 赞同：1
> 
> 时间：2012-11-08T09:22:06.723
> 
> 标签：jquery

我在 Jquery 中有这段代码并且工作正常，但唯一的问题是不要更改页面上的 de div

```
 $("a[rel^='meGusta']").click(function(){
            var usuario= $(this).data('usuario');
            var idea= $(this).data('idea');
            // llamada ajax
            $.ajax({
                url: '{{path('votarIdea')}}',
                data: {user: usuario, idea: idea},
                type: 'POST',
                dataType: 'html',
                success: function(){
                    var str= $(this).text().trim();
                    if (str == 'Me gusta'){
                        $(this).text("No me gusta");
                    }else{
                        $(this).text("Me gusta");
                    }

                    $('.popularityPopularidad').load('cambioVoto.html.twig');
                }
                //error: noCambio()
            }); 
```

votarIdea 函数返回：`<span> Popularidad:</span> {{ total }}`

所以我必须改变这个div：首先

```
<div class="popularityPopularidad">
    <span> Popularidad:</span> {{ votaciones[idea.getId()] }}
</div> 
```

第二个

```
 <a href="#" rel="meGusta{{num}}" data-usuario="{{ usuario }}" data-idea= "{{idea.getId()}}">
        {% if (opc)%}
            No me gusta
        {% else%}
            Me gusta
        {% endif %}
        </a> 
```

萤火虫抛出这个错误

```
TypeError: context.createDocumentFragment is not a function
error source line:
[Parar en este error]   

fragment = context.createDocumentFragment(); 
```

但不要这样做。任何的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T23:33:33.683

我自己也遇到了类似的问题，因为我在其他任何地方都找不到解决方案……就是这样！（请想象一下令人印象深刻的鼓声）

## 怎么了

错误消息不是很有表现力，如果不是误导的话。这就是它应该说的：

> jQuery 函数接收到的对象不是有效的 jQuery 对象（但应该是）

*现在，*要做到这一点实际上并不容易，因为 jQuery 在几乎所有情况下都回退到一个“空”对象。但是，类似于以下的表达式应该可以可靠地让您找到错误：

```
$({}).text("asb");
$({}).append("<p></p>"); 
```

奇怪的是，这些不会引发错误：

```
$({}).text(); // returns ""
$({}).html(); // returns undefined 
```

我没有对此进行更深入的研究，但我认为可以肯定地说，如果上下文不是有效的 jQuery 对象，则任何尝试*操作DOM 都会引发此错误。*

本题的具体问题是，在*ajax成功函数*中，`this`不是html元素，而是[ajax事件对象](http://docs.jquery.com/Ajax_Events)。所以表达式`$(this)` *没有返回一个有效的 jQuery 对象*，随后调用`$(this).text()`（或实际上任何东西）都会导致这个错误。

您可以使用以下行轻松重现错误

```
$.get("VALID URL", function(){ $(this).append("foo"); }, "text"); 
```

## 解决方案

所以你要做的就是把`click()`函数的上下文保存在一个像这样的upvalue中：

```
$("a[rel^='meGusta']").click(function(){
    var usuario= $(this).data('usuario');
    var idea= $(this).data('idea');
    var self = this; // <-- NEW LINE

    // llamada ajax
    $.ajax({
        url: "{{path('votarIdea')}}", // <-- Syntax error (see below)
        data: {user: usuario, idea: idea},
        type: 'POST',
        dataType: 'html',
        success: function(){
            var str= $(self).text().trim(); // <-- CHANGED LINE
            if (str == 'Me gusta'){
                $(self).text("No me gusta"); // <-- CHANGED LINE
            }else{
                $(self).text("Me gusta"); // <-- CHANGED LINE
            }

            $('.popularityPopularidad').load('cambioVoto.html.twig');
        }
        //error: noCambio()
    });
}); 
```

**如何找到真正导致错误的行（使用 Firebug）**

由于 QA 似乎不知道如何找到正确的代码行，所以这里有一个简短的指南：

*   重复导致错误的操作（或在页面加载时重新加载）
*   右键单击错误并在上下文菜单中选择*break on this error*
*   重复导致错误的操作
*   在脚本视图中（Firebug 应该会自动打开它），单击![跳出 (Shift+F11)](../Images/ffff2f518e6690644c866acc6e6c930b.png)（跳出）按钮，直到脚本视图跳转到**不在**的行`jquery-*.js`

**“语法错误”**

在原始代码中有一个“语法错误”。但是，twig 可能在实际执行 javascript 之前将其替换为不包含单引号的不同代码，因此在浏览器中打开站点时不会出现语法错误。但是，编写语法正确的代码仍然是一个好主意。

# php - PHP：将扫描字符转换为十六进制 unicode

> ID：13286040
> 
> 赞同：2
> 
> 时间：2012-11-08T09:22:13.453
> 
> 标签：php, unicode, json, non-unicode

我正在使用 Fabrik 在**Joomla**站点上工作，问题是 Fabrik 使用 json_encode() 序列化一些数据，但没有考虑到 åäö 等的可能性。现在，当进行数据库搜索时，它会尝试使用 åäö 查找内容，但没有找到任何内容，因为

> 一切都是 \u00e4 和 \u00f6

等等。

我不太愿意深入研究 Fabrik 的代码并在某处插入一个标志，并担心在更新 Fabrik 时会意外覆盖它。所以我想，反正我对 Fabrik 很失望，我可以在自定义模板中完全围绕它进行编写。简单的。

问题是我找不到像 htmlentities() 这样的方法或函数，我可以将这些东西提供给它以使其匹配。我可以用字符替换它们，但这不是一个好的解决方案。

释义：**我想把Mörkö这个词变成-> M\u00f6rk\u00f6。如何？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:28:54.707

也许还有另一种方法，但可以例外：

```
$encoded = substr(json_encode('Mörkö'), 1, -1); 
```

* * *

`json_encode('Mörkö')`=> "M\u00f6rk\u00f6"

`substr()`=> M\u00f6rk\u00f6

# android - 将矩阵图像放在图像视图的中心

> ID：13286041
> 
> 赞同：0
> 
> 时间：2012-11-08T09:22:13.980
> 
> 标签：android, imageview, zooming

**> 我正在缩放图像以进行缩放，之后我想将缩放后的图像放在图像视图的中心。我怎样才能做到这一点？？**

```
 imageview.setScaleType(ScaleType.MATRIX);
    savedMatrix.set(matrix);
    matrix.set(savedMatrix);
    matrix.setScale(.3f, .3f,screen_width/2,screen_height/2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:32:34.797

尝试

```
matrix.postTranslate((screen_width-image_width)/2, (screen_height-image_height)/2); 
```

顺便说一句，你为什么这样做：

```
savedMatrix.set(matrix);
matrix.set(savedMatrix); 
```

一旦你将矩阵深度复制到 savedMatrix 中，它们是相同的，所以不需要做其他方式。

# c# - 奇怪的错误：System.IO.FileNotFoundException：无法加载文件或程序集

> ID：13286044
> 
> 赞同：0
> 
> 时间：2012-11-08T09:22:19.593
> 
> 标签：c#, .net, vb.net, winforms

我有2个项目，

我有一个空白表单（新项目）的第一个项目 C# 项目。我正在将此表单编译为 dll，以便可以引用该表单。

VB 项目是一个 ExcelDNA 项目，它由一个自定义任务窗格和一个打开表单的按钮组成，任务窗格工作正常。但是，单击按钮时出现以下错误：

```
System.IO.FileNotFoundException: Could not load file or assembly 
```

我可以通过在 VB 项目中创建一个 UserControl，然后通过 Button 访问它来实现它，但是我已经用 C# 编写了表单并且不想将其转换为 VB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:29:01.000

无需将项目转换为 VB.NET。此错误是因为 .net 运行时找不到程序集（包含您的第一个表单的 dll 或 exe）。在 Visual Studio 中，打开`Solution Explorer`窗口并展开`References`节点。右键单击对第一个程序集的引用，然后单击`Properties`。在属性窗口中更改`Copy Local`为`True`.

这样，Visual Studio 会将程序集复制到项目的输出文件夹（“bin\Debug”或“bin\Release”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:39:43.430

所以这个问题的答案是确保你的表单 Dll 被复制到你的 Excel 加载项所在的目录中。

# eclipse - 纸莎草时间档案

> ID：13286045
> 
> 赞同：2
> 
> 时间：2012-11-08T09:22:20.240
> 
> 标签：eclipse, eclipse-plugin, uml, papyrus

我是 MARTE 的新手，我阅读了 OMG 推广的与时间建模子配置文件相关的规范。

根据您的经验，我们如何为模型建立时间档案？

# python - 在蜘蛛的每个页面（url，请求）上获取页面（嵌套）级别的scrapy

> ID：13286049
> 
> 赞同：0
> 
> 时间：2012-11-08T09:22:31.563
> 
> 标签：python, scrapy, web-crawler

主题。我想在蜘蛛的每个页面（url，请求）上获取页面（嵌套）级别，有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:25:59.540

一段时间后，我们找到了解决方案 - response.meta['depth']

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:34:51.423

一些[关于深度的详细统计数据](http://doc.scrapy.org/en/latest/topics/settings.html#depth-stats-verbose)对你有用吗？

# c# - 将下拉列表转换为文本

> ID：13286050
> 
> 赞同：0
> 
> 时间：2012-11-08T09:22:32.047
> 
> 标签：c#, javascript, asp.net, drop-down-menu

我为输入日期设计了一个下拉列表。现在我必须将其转换为文本格式（就像您输入文本字段的方式 - mm-dd-yyyy），以便可以在 xml 文件中显示它。

关于如何去做的任何建议？

我的前端代码如下所示。这只是其中的一部分。我还有 3 个这样的实体：

```
 <td>
      LICENSE FROM *
  </td>
  <td>
      &nbsp;<asp:DropDownList ID="drpmm0" runat="server" CssClass="drp1">
      </asp:DropDownList>
      &nbsp;<asp:DropDownList ID="drpdte0" runat="server" CssClass="drp1">
      </asp:DropDownList>
      &nbsp;<asp:DropDownList ID="drpyyyy0" runat="server" CssClass="drp1">
      </asp:DropDownList>
      &nbsp;(mm-dd-yyyy)
      <asp:RequiredFieldValidator ID="reqmm0" runat="server" ControlToValidate="drpmm0" Display="Dynamic"ErrorMessage="Select Month"></asp:RequiredFieldValidator>
      <asp:RequiredFieldValidator ID="reqdte0" runat="server" ControlToValidate="drpdte0" ErrorMessage="Select Date"></asp:RequiredFieldValidator>
      <asp:RequiredFieldValidator ID="reqyyyy0" runat="server" ControlToValidate="drpyyyy0" ErrorMessage="Select Year"></asp:RequiredFieldValidator>
</td>
</tr> 
```

我只需要一些后端指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:27:24.567

你为什么不使用`DateTimePicker`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:27:59.060

进入字符串：

```
string myDate = String.Format("{0}-{1}-{2}", drmm0.SelectedValue, drpdte0.SelectedValue, drpyyy0); 
```

要进入日期时间：

```
DateTime myDate = new DateTime(Convert.ToInt32(drpyyyy0.SelectedValue)), Convert.ToInt32(drpmm0.SelectedValue),Convert.ToInt32(drpdte0.SelectedValue))); 
```

格式化日期时间：

```
string myDate = String.Format("{0:MM-dd-yyyy}", myDate); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:28:40.667

```
string strdt= drpdte0.SelectedValue+"/"+drpmm0.SelectedValue+"/"+drpyyyy0.SelectedValue;
string formatedDate = strdt.ToString("dd-MM-yyyy"); 
```

# windows-runtime - 从命令行使用 vstest.console.exe 运行 WinRT 单元测试时出现开发人员许可错误

> ID：13286053
> 
> 赞同：2
> 
> 时间：2012-11-08T09:22:38.750
> 
> 标签：windows-runtime, mstest

当我尝试从命令行执行 WinRT MSTests 时出现以下错误：

```
EXEC : error : Could not start test run for unit tests for Windows Store app: No valid developer license found for running unit tests for Windows Store apps. Please install/renew your developer license.. 
```

这曾经有效，但突然开始失败。奇怪的是，它们在 Visual Studio 中执行得很好。

我正在使用以下 MSBuild 任务。

```
<Target Name="UnitTest" DependsOnTargets="Compile" >
       <ItemGroup>
        <TestAppx Include="$(SolutionDir)\**\*x86*\**\*Tests*.appx" />
       </ItemGroup>

    <Message Importance="high" Text="Running tests for %(TestAppx.Identity)" />

    <Exec Command='"$(VSINSTALLDIR)\Common7\IDE\CommonExtensions\Microsoft\TestWindow\vstest.console.exe" %(TestAppx.Identity) /InIsolation /platform:x86 /Logger:trx /UseVsixExtensions:true'
          WorkingDirectory="$(SolutionDir)"/>
</Target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:22:38.750

仍然不确定为什么 VisualStudio 和 vstest 不同步，但我找到了解决方案。

*   以管理员身份打开 PowerShell
*   执行：注销-WindowsDeveloperLicense
*   在 Visual Studio 中打开解决方案
*   提示您重新创建开发者许可证时登录您的真实帐户

来源：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh974578.aspx#getting_a_developer_license_at_a_command_prompt](http://msdn.microsoft.com/en-us/library/windows/apps/hh974578.aspx#getting_a_developer_license_at_a_command_prompt)

# wcf - 托管 WCF 服务

> ID：13286063
> 
> 赞同：0
> 
> 时间：2012-11-08T09:23:13.390
> 
> 标签：wcf

我正在关注[这个](http://msdn.microsoft.com/en-us/library/ms733069%28v=vs.85%29.aspx)链接来创建我的 wcf 服务并通过窗口服务托管它工作正常但是当我将我的命名空间从“Microsoft.ServiceModel.Samples”更改为“EE.ServiceProcess.ABC”并在 app.config 中进行相应的更改时，我窗口服务无法正常启动我的 App.config

```
 <?xml version="1.0" encoding="utf-8" ?>
    <configuration>
      <system.serviceModel>
        <services>
          <service name="EE.ServiceProcess.ABC.CalculatorService"
                   behaviorConfiguration="CalculatorServiceBehavior">
            <host>
              <baseAddresses>
                <add baseAddress="http://localhost:8000/EEServiceProcessABCservice/service"/>
              </baseAddresses>
            </host>
            <!-- this endpoint is exposed at the base address provided by host: http://localhost:8000/EEServiceProcessABCservice/service  -->
            <endpoint address=""
                      binding="wsHttpBinding"
                      contract=" EE.ServiceProcess.ABC.ICalculator" />
            <!-- the mex endpoint is explosed at http://localhost:8000/EEServiceProcessABCservice/service/mex -->
            <endpoint address="mex"
                      binding="mexHttpBinding"
                      contract="IMetadataExchange" />
          </service>
        </services>
        <behaviors>
          <serviceBehaviors>
            <behavior name="CalculatorServiceBehavior">
              <serviceMetadata httpGetEnabled="true"/>
              <serviceDebug includeExceptionDetailInFaults="False"/>
            </behavior>
          </serviceBehaviors>
        </behaviors>
      </system.serviceModel>
   </configuration> 
```

有人可以建议我哪里出错了吗？

# blackberry - 尝试在黑莓中将字节转换为位图时出现非法参数异常

> ID：13286073
> 
> 赞同：0
> 
> 时间：2012-11-08T09:23:55.323
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

这是我从 twitter api 获取个人资料图像字节的代码，

```
new Thread() {

    public void run() {
        byte dbata[] = getBitmap(profle_pic_str);
        if (dbata != null) {
            EncodedImage bitmap_img = EncodedImage.createEncodedImage(dbata, 0, -1);
            Bitmap image =bitmap_img.getBitmap();
            final Bitmap profle_pic_bmp = image;
            final Bitmap scld_bmp = new Bitmap(90, 100);
            Application.getApplication().invokeLater(new Runnable() {
                public void run() {
                    if (profle_pic_bmp != null) {
                        profle_pic_bmp.scaleInto(scld_bmp, Bitmap.FILTER_LANCZOS);
                        phot_profle.setBitmap(scld_bmp);
                    } else {
                        Dialog.alert("null");
                    }
                }
            });
        // } else {
            // Dialog.alert("bytes are null");
        }
    }
}.start(); 
```

这里我有方法 getBitmap(profile_pic_str); 它返回图像的字节数组，

```
public byte[] getBitmap(String url) {
    Bitmap bitmap = null;
    String strg = HttpConnector.getConnectionString();
    byte b[] = null;
    try {
        b = getXML(url + strg);
    } catch (IOException ie) {
        ie.printStackTrace();
    }
    return b;
} 
```

我使用的网址是这个

[http://api.twitter.com/1/users/profile_image?screen_name=screen_nameof_user&size=bigger](http://api.twitter.com/1/users/profile_image?screen_name=screen_nameof_user&size=bigger)

```
public byte[] getXML(String url) throws IOException {
    ContentConnection connection = 
        (ContentConnection) javax.microedition.io.Connector.open(url);
    java.io.DataInputStream iStrm = connection.openDataInputStream();
    java.io.ByteArrayOutputStream bStrm = null;
    byte xmlData[] = null;
    try {
        // ContentConnection includes a length method
        int length = (int) connection.getLength();
        if (length != -1) {
            xmlData = new byte[length];
            // Read the png into an array
            // iStrm.read(imageData);
            iStrm.readFully(xmlData);
        } else // Length not available...
        {
            bStrm = new java.io.ByteArrayOutputStream();
            int ch;
            while ((ch = iStrm.read()) != -1) bStrm.write(ch);
            xmlData = bStrm.toByteArray();
            bStrm.close();
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        // Clean up
        if (iStrm != null) iStrm.close();
        if (connection != null) connection.close();
        if (bStrm != null) bStrm.close();
    }
    return xmlData;
} 
```

当我试图将字节数组转换为 EncodedImage

```
EncodedImage  bitmap_img = EncodedImage.createEncodedImage(dbata, 0, -1); 
```

在这行代码中，我得到了非法参数异常。

相同的代码适用于 Facebook 个人资料图片。我不知道为什么当我为 twitter 做这个代码时会出错。请朋友们帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:35:49.287

试试这个 -

```
EncodedImage _encoded_img = EncodedImage.createEncodedImage(dbata, 0, dbata.length); 
```

在你的代码上，

```
EncodedImage bitmap_img = EncodedImage.createEncodedImage(dbata, 0,-1); 
```

-1 是数组的长度。它不是静态的。将 -1 更改为 dbata.length。

# python - Django CreateView：将 ForeignKey 附加到 CustomForm 数据

> ID：13286075
> 
> 赞同：3
> 
> 时间：2012-11-08T09:24:09.733
> 
> 标签：python, django, foreign-keys, form-data, create-view

我有一个 CreateView 如下：

```
class ResumeCreateView(CreateView):
    model = Resume

    def form_valid(self, request, form):
        candidate = Candidate.objects.get(user=self.request.user)
        self.object = form.save(commit=False)
        self.object.candidate = candidate
        self.object.save()
        f = self.request.FILES.get('file')
        data = [{
            'title': self.request['title'],
            'name': f.name,
        }]  
        response = JSONResponse(data, {}, response_mimetype(self.request))
        response['Content-Disposition'] = 'inline; filename=files.json'
        return response 
```

在这里，我试图将`candidate`实例附加到`Resume`模型候选字段，该字段是`ForeignKey`模型的一个`Candidate`。

但我总是收到验证错误`{'candidate' : 'This field is required'}`

*   我使用的是自定义表单而不是模型表单，因为它使用 twitter 引导标识符。

我错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T09:48:03.497

您必须将`modelForm`with定义`candidate`为排除字段，然后在`form_valid()`方法中设置它。

```
class ResumeForm(forms.ModelForm):
    class Meta:
        model = Resume
        exclude = ('candidate',)

class ResumeCreateView(CreateView):
    form_class = ResumeForm
    model = Resume

    def form_valid(self, form):
        form.instance.candidate = Candidate.objects.get(user=self.request.user)
        .... 
```

更详细的参考：[Models and request.user](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-editing/#models-and-request-user)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-18T03:34:52.043

我没有足够的业力来发表评论，但我只想指出这对我的问题有效，我唯一的变化（关于 Rohan 的回答）是我不需要创建表单。

`class ChoiceCreateView(generic.CreateView): model = Choice template_name = 'polls/choice.html' fields = ['choice_text']`

相反，我指定了我想在视图中显示的字段，而不是在表单中排除它们。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:05:49.513

我以前遇到过这个确切的问题。为了快速解决，请使用隐藏输入在表单中包含候选人，如下所示：

```
<input type="hidden" name="candidate" id="id_candidate" value="{{ request.user.id }}"> 
```

不过，在未来，请考虑使用[django-crispy-forms](https://github.com/maraujop/django-crispy-forms)而不是手动编写表单。

# php - 如何在包含的 PHP 文件中注释变量？

> ID：13286077
> 
> 赞同：2
> 
> 时间：2012-11-08T09:24:12.907
> 
> 标签：php, netbeans, annotations

在我的控制器中，我有这样的代码：

```
public function showStudent($id)
{
    $student = new Student();
    $student->loadFromId($id);

    /* call the view */
    include '/path/to/student/view.php';
} 
```

在 view.php 文件中，我希望我的代码编辑器（当然是 netbeans）知道 $student 是 Student 类的一个实例，因此它可以建议和检查方法和属性等。我可以通过注释帮助编辑器了解这一点， 像

```
<?php
/**
* @magic Student $student
*/
?>
<html>
....
<p>Good day, <?= $student->name; ?></p>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:31:58.260

```
/* @var $student Student */
$student->name; 
```

* * *

网豆，当然？你应该看看[Sublime Text](http://www.sublimetext.com/)。

# c++ - 使用 InvalideRect() 更改 GDI 形状

> ID：13286078
> 
> 赞同：0
> 
> 时间：2012-11-08T09:24:14.260
> 
> 标签：c++, winapi, gdi

我昨天问了我的问题，但没有得到正确的答案。现在我问得更清楚了。使用 win api 我创建了一个窗口和一个按钮。在按钮的前面有一个用绿色绘制的圆圈。按下按钮后，圆圈应变为红色。

（我正在使用 C++ 和 mingw 编译器。）

这是我的代码

```
LRESULT CALLBACK WinProc(HWND hWnd,UINT msg,WPARAM wParam,LPARAM lParam)
{
 PAINTSTRUCT ps;
 HDC hDC;
 HBRUSH brusha;
 brusha=CreateSolidBrush(RGB(0,255,0));

 switch(msg)
{
    case WM_CREATE:
    {

        b=CreateWindowEx(WS_EX_CLIENTEDGE,
            "BUTTON",
            "red",
            WS_CHILD|WS_VISIBLE|
            BS_DEFPUSHBUTTON,
            350,
            100,
            100,
            40,
            hWnd,
            (HMENU)BUTTON,
            GetModuleHandle(NULL),
            NULL);
    }
    break;

    case WM_PAINT:
    {

    hDC=BeginPaint(hWnd,&ps);
    SelectObject(hDC,brusha);
    Ellipse(hDC, 20, 20, 100, 100);
    EndPaint(hWnd, &ps);

    }

    case WM_COMMAND:
      switch(LOWORD(wParam))
        {
            case BUTTON:
            {
            brusha=CreatSolideBrush(RGB(255,0,0));
            InvalidateRect( hWnd,0,false);

            }
        }
  break;

      case WM_DESTROY:
    {
        PostQuitMessage(0);
        return 0;
    }
    break;
}

return DefWindowProc(hWnd,msg,wParam,lParam);

  } 
```

这编译没有错误。但是单击按钮时没有任何反应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:38:11.777

问题是你总是用绿色画笔画画。看你的代码

```
HBRUSH brusha;
brusha=CreateSolidBrush(RGB(0,255,0));

switch(msg)
{
    ...
    case WM_PAINT:
    {
    hDC=BeginPaint(hWnd,&ps);
    SelectObject(hDC,brusha);
    ... 
```

在这段代码`brusha`中，当你进入`WM_PAINT`.

您似乎认为，仅仅因为您将红色笔刷分配给部分中的`brusha`变量，`WM_COMMAND`就会以某种方式记住下一次绘画，但事实并非如此。请记住，在 C++ 中，每次进入函数时都会重新创建变量，并在每次退出函数时销毁。所以你编写代码的方式是行不通的。

可能最简单的方法是制作`hbrusha`变量`static`。每次进入和退出函数时都*不会*创建和销毁静态变量。像这样的东西

```
LRESULT CALLBACK WinProc(HWND hWnd,UINT msg,WPARAM wParam,LPARAM lParam)
{
    static HBRUSH brusha;

    switch(msg)
    {
    case WM_CREATE:
        brusha=CreateSolidBrush(RGB(0,255,0)); // set the brush green on create

        ...

        break;

    case WM_COMMAND:
        switch(LOWORD(wParam))
        {
        case BUTTON:
            brusha=CreatSolideBrush(RGB(255,0,0));
            InvalidateRect( hWnd,0,false);
        }
        break;

        ...

    }

    ...
} 
```

# ios - 关于设备和应用之间的应用内购买

> ID：13286079
> 
> 赞同：3
> 
> 时间：2012-11-08T09:24:14.933
> 
> 标签：ios, in-app-purchase

我想分享一个关于应用内购买的问题

我有一些地图应用程序，我正在尝试添加应用内购买以让用户购买不同的地图图层以在应用程序中显示。我想让用户在同一个应用程序中购买应用程序内购买以获取新的地图图层，并且我想显示他们在我们的另一个应用程序中购买的其他图层。我想显示用户在不同设备上购买的所有 IAP。

我想要这样做的方式是使用服务器产品模型，当用户购买 IAP 时，应用程序将向我们的服务器发送一些信息。当我们想要获取用户购买的 IAP 以显示该用户拥有的所有 IAP 时，我向我们的服务器请求信息以了解该用户在我们的其他应用程序中是否有其他购买，如果是，我们将显示另一个额外的地图中的图层。

我遇到的问题是似乎无法获取用户帐户，因为它是私人数据，我们需要获取此信息出于某些原因：

*   检测同一用户是否连接到另一台设备，因为我们可以显示用户在某个设备上购买的所有 IAP
*   检测使用应用程序的用户是否在我们的另一个应用程序中购买了另一个 IAP，让他也看到这个应用程序中的地图图层

我知道 Apple 让您获得标识符“identifierForVendor”，让您知道同一设备是否正在使用我们的应用程序。但我的问题是我不知道如何检测用户是否在另一台设备上安装了我们的应用程序，我如何检测用户是否购买了一些 IAP 以与我们的服务器通信并显示用户在此应用程序或其他设备中购买的 IAP应用程序。

有没有办法获得一些用户标识符来进行这种通信？欢迎任何帮助:)感谢您的时间

# list - 返回列表数字的阶乘

> ID：13286084
> 
> 赞同：-3
> 
> 时间：2012-11-08T09:24:29.140
> 
> 标签：list, recursion, lisp

我正在尝试实现一个函数，该函数在调用时返回列表中的数字阶乘。例如 (fact '(2 4 3)) => (2 24 6) 但我的不工作。我很确定逻辑对于我的实现是正确的，只是我找不到我的语法错误。因此，如果您可以查看并提供一些反馈，那将是很棒的代码：

```
(defun fact (list)
    (cond ((null list) 0)
        ((zerop (first list) 1))
        (* first list(fact (rest list)))    
        )) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:33:22.547

您似乎想要做的是将阶乘函数应用于列表的每个成员并将结果收集在列表中。

为此，您需要一个阶乘函数和`mapcar`.

# c - 对 AT 命令的响应结束

> ID：13286086
> 
> 赞同：3
> 
> 时间：2012-11-08T09:24:33.917
> 
> 标签：c, string, embedded, gsm, at-command

如何确定发送到 GSM 模块的 AT 命令的结尾是什么？

由于发现何时收到整个响应，我需要一些字符或字符串来表示每种情况下 AT 命令的结束。

我猜它有一些带有“\r\n”序列的东西，但是，这个序列可能在 AT 命令响应的开头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:09:10.990

就像你想象的那样`\r\n`。
这定义了一行的结尾。

只有处理完整的生产线才有意义。

有些命令只响应 ，有些命令响应`OK\r\n`一些数据。
因此，您应该首先构建一个解析器，它可以检测完整的行，以便可以使用处理响应的函数来处理它们。

有时您甚至可以获得您不要求`net login`的响应，例如更改事件或 sim status `#QSS: 2\r\n`。

所以你需要知道你期望什么答案，然后等到你得到这个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-12T14:24:16.180

这是我在 Python 中使用的。有用。可能还有其他更好的解决方案。

```
ser = serial.Serial(com, baudrate, timeout=5)
while True:
# a simple AT return result parser
    new_char = ser.read(1)
    byte_flow += new_char

    if len(byte_flow) >=4 and byte_flow[-4:] == b'\r\nOK':
        break
    elif len(byte_flow) >= 7 and byte_flow[-7:] == b'\r\nERROR':
        break
byte_flow += ser.read(2)  # the final '\r\n' 
```

`elif`如果有任何其他模式，您可以添加更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T09:55:47.310

[参考原始的 Hayes 命令集 Wikipedia 说明](http://en.wikipedia.org/wiki/Hayes_command_set#Syntactical_definitions)：

> `<CR>`回车符，是命令行和结果代码终止符，其值在 0 到 255 之间的十进制 ASCII 中，在参数 S3 中指定。默认值为 13。

所以应该可以设置任何字符来指示响应的结束（以及发送到调制解调器的任何命令的结束）。

* * *

无论如何`<CR>`，许多调制解调器的响应不仅将 s 作为最后一个字符返回。

因此，写入不同的字符值`S3`是否只会更改调制解调器响应结束时发送的最后一个字符，或者这是否会将`<CR>`调制解调器响应期间发送的任何字符更改为存储在`S3`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:42:19.037

响应格式是特定于命令的。虽然有某些相似之处（“OK\r\n”），但最终您需要对每个相似之处进行显式处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T09:43:07.297

取决于模式和命令即

```
<CR> or <CR><LF> 
```

[http://www.3gpp.org/ftp/Specs/html-info/27007.htm](http://www.3gpp.org/ftp/Specs/html-info/27007.htm)

# java - 如何使用带有 Hibernate 的 JPA 从表中选择最后插入的 5 条记录

> ID：13286088
> 
> 赞同：1
> 
> 时间：2012-11-08T09:24:33.290
> 
> 标签：java, hibernate, jpa, hql

如何使用`JPA`with从表中选择最后插入的 5 条记录`Hibernate`？

```
public List<Sample> getAgencyChangeLastFiveRecords(){
    return (ArrayList<Sample>) createQuery(
        "select * from ( select * from sample order by id desc) where rownum<=5 order by rownum desc"
    );
} 
```

这是行不通的。相应的`HQL`查询是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:10:41.897

也许你可以试试下面

```
 String hql="from Sample order by id desc"
 Query.setMaxResults(5) 
```

# air - 更改代码签名证书

> ID：13286093
> 
> 赞同：-1
> 
> 时间：2012-11-08T09:24:50.303
> 
> 标签：air, flash-builder, code-signing

我需要更改我的应用程序的代码签名证书。我可以使用正确的证书构建新版本，但用户需要手动完全卸载旧版本才能安装新版本。

Flash Builder 中是否有任何方法可以使用这两个证书对其进行签名，以便证书也可以更新，并且可以像往常一样构建和安装更多版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:55:44.067

如果您的应用最初是使用 Air 1.5.2 或更高版本签名的，您可以使用称为“迁移证书”的过程，该过程允许您创建可信证书链。本质上，您使用新证书进行签名并使用旧证书进行迁移，一切都应该很好。

不幸的是，如果您的应用是使用 Air 1.5.1 或更低版本创建的，则此功能不可用。

您将在原始证书到期后的 6 个月内进行迁移签名 - 更多信息请点击此处：

[http://help.adobe.com/en_US/AIR/1.5/devappsflex/WS13ACB483-1711-43c0-9049-0A7251630A7D.html](http://help.adobe.com/en_US/AIR/1.5/devappsflex/WS13ACB483-1711-43c0-9049-0A7251630A7D.html)

# c++ - 三个相互关联的对象 C++

> ID：13286095
> 
> 赞同：0
> 
> 时间：2012-11-08T09:25:07.110
> 
> 标签：c++, oop, design-patterns, include, forward-declaration

我有三个类，Actor 类、Cell 类和 Behavior 类。类 Actor 实例化 Behavior 的子类（在 Behavior 头文件中定义）。行为使用方法来分析指向 Actors 的指针向量和指向 Cells 的指针向量。Cell 具有分析指向 Cell 的指针向量的方法，并且它们包含指向 Actor 的指针向量。哦，是的，在 Actor 头文件中，所有类都以某种方式使用了枚举的 Heading 数据类型。（通过在包含 Actor 的每个文件中声明外部枚举 Heading 数据类型来合并）。

我有大部分代码，但是当我得到与包含和递归包含相关的大量错误列表时遇到了一个症结，并且一直在努力研究几个小时。我可以使用一些帮助来找出排列这些对象以使它们一起工作的最佳方法。

因此，重新迭代：

```
Actor:    Behavior
Behavior: vector of pointers to Cells, vector of pointers to Actors
Cells:    vector of pinters to Cells, vector of pointers to Actors
Heading:  Enumerated, declared extern in all classes, currently stored in Actor. 
```

关于如何在哪里包含哪些头文件的任何建议？我已经尝试了许多不同的前向声明、包含等的排列。老实说，我现在不知道该去哪里。

谢谢！

编辑：更新了我的类和头文件。

```
Actor: Move, Heading
Move:  Behavior Heading
Behavior: Cell, Actor  Heading
Cell: Cell, Actor  Heading
Heading:   Used by all. 
```

就目前而言，以下是包括的内容：

```
Behavior.h:  Forward declarations of Cell and Actor
Behavior.cpp:  Includes Behavior.h, Cell.h, Actor.h
Cell.h:   Forward Declaration of Actor
Cell.cpp:   includes Cell.h, Heading.h, Actor.h
Actor.h:   Includes Behavior.h, Heading.h.
Actor.cpp:   includes actor.h
Move.h: Includes Behavior.h, Heading.h
Move.cpp: Includes move.h, Heading.h, Cell.h, Actor.h
Heading: Includes nothing, declares nothing. 
```

我看到的几乎唯一与包含相关的错误是 Actor.h 文件中 Move 的一个实例具有不完整的类型。

编辑 #2：在 actor.cpp 中添加了 Behavior 和 Move 的包含，并将它们从 actor.h 中删除，并将我的实例化转变为创建指针，它对我咳嗽​​和咆哮，但它成功构建。谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:28:13.267

只要唯一的依赖是指针，只需使用前向 decl。使用该规则，仅包含让 actor.h 包含 behavior.h 和 heading.h

behavior.h -> 声明单元和演员
Cells.h -> 声明演员

行为和单元 cpp 必须包含前向声明类的头文件。

behavior.cpp -> 包含 Cells.h 和 Actors.h
Cells.cpp -> 包含 actor.h

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:28:32.897

为了减轻复杂性，将标题移动到它自己的标题。当然，通过包含防护来保护它。然后，使用`Actor`and `Behavior`in`Cells`等的前向声明。

# exception - Mule ESB CXF 异常处理

> ID：13286097
> 
> 赞同：1
> 
> 时间：2012-11-08T09:25:09.283
> 
> 标签：exception, cxf, mule, fuseesb, jbossfuse

我在 http 出站流中使用 jaxws-client 在 mule 通信中使用以下 XML（POJO 是出站 Jaxws 客户端的输出）。

确保在 maven 中使用 wsdl2java 插件生成 WS 代码，生成的代码具有来自 WS 的异常类，该类是：

com.nsn.ossbss.charge_once.wsdl.entity.tis.wsdl._1.TisException

当我们在 WS 引发此异常后得到 SOAPFault 时，肯定 http 响应为 500

```
com.nsn.ossbss.charge_once.wsdl.entity.tis.wsdl._1.TisException

INFO  2012-11-08 11:08:08,008 [[cxf].TCP_C_L.receiver.02] org.mule.transport.http.HttpClientMessageDispatcher: Received a redirect, but followRedirects=false. Response code: 500 Server Error
ERROR 2012-11-08 11:08:13,008 [[cxf].TCP_C_L.receiver.02] org.mule.exception.CatchMessagingExceptionStrategy: 
********************************************************************************
Message               : error. Failed to route event via endpoint: org.mule.module.cxf.CxfOutboundMessageProcessor. Message payload is of type: PostMethod
Code                  : MULE_ERROR--2
--------------------------------------------------------------------------------
Exception stack is:
1\. error (com.nsn.ossbss.charge_once.wsdl.entity.tis.wsdl._1.TisException)
  sun.reflect.NativeConstructorAccessorImpl:-2 (null)
2\. error. Failed to route event via endpoint: org.mule.module.cxf.CxfOutboundMessageProcessor. Message payload is of type: PostMethod (org.mule.api.transport.DispatchException)
  org.mule.module.cxf.CxfOutboundMessageProcessor:148 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/transport/DispatchException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
com.nsn.ossbss.charge_once.wsdl.entity.tis.wsdl._1.TisException: error
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
********************************************************************************

INFO  2012-11-08 11:08:13,009 [[cxf].TCP_C_L.receiver.02] org.mule.api.processor.LoggerMessageProcessor: org.apache.commons.httpclient.methods.PostMethod@d02649
INFO  2012-11-08 11:08:13,010 [[cxf].TCP_C_L.receiver.02] org.mule.api.processor.LoggerMessageProcessor: org.apache.commons.httpclient.methods.PostMethod@d02649 
```

使用以下命令处理异常时出现上述错误：

```
<catch-exception-strategy>
            <logger message="#[payload]" level="INFO" doc:name="Logger" />
            <transformer ref="ByteArrayToString" />
            <append-string-transformer message="&#xD;&#xA;" />
            <logger message="#[payload]" level="INFO" doc:name="Logger" />
        </catch-exception-strategy> 
```

当然，我需要处理与 apache camel 相同的异常，我需要指定 mule 异常，并且 mule 不应在控制台中引发上述异常，因为它将由 XML 配置处理。

来自 jaxWs-client 出站的传入消息的类型是

org.apache.commons.httpclient.methods.PostMethod@d02649

我怎样才能让 Mule ESB 理解 WS 异常，我试过这个

它也没有用。

你能给些建议么 。

在 Fuse ESB 中，我这样做了：

```
<onException>
<exception>com.nsn.ossbss.charge_once.wsdl.entity.tis.wsdl._1.TisException</exception>  
            <handled>
                <constant>true</constant>
            </handled>
            <to uri="log:test" />
            <setBody>

                <simple>${exception.getFaultInfo}</simple>

            </setBody>
            <to uri="log:exception" />
            <convertBodyTo      type="com.nsn.ossbss.charge_once.wsdl.entity.tis.xsd._1.FaultMessage" />
            <marshal ref="decExc" />
            <convertBodyTo type="String" />
            <bean ref="nulladd" />
        </onException> 
```

我怎样才能在 Mule ESB 中做同样的事情。

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns:file="http://www.mulesoft.org/schema/mule/file"
    xmlns:mulexml="http://www.mulesoft.org/schema/mule/xml" xmlns:tcp="http://www.mulesoft.org/schema/mule/tcp"
    xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:http="http://www.mulesoft.org/schema/mule/http"
    xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf" xmlns:tracking="http://www.mulesoft.org/schema/mule/ee/tracking"
    xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
    xmlns:spring="http://www.springframework.org/schema/beans" xmlns:core="http://www.mulesoft.org/schema/mule/core"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="EE-3.3.0"
    xmlns:script="http://www.mulesoft.org/schema/mule/scripting"
    xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd 
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.mulesoft.org/schema/mule/xml http://www.mulesoft.org/schema/mule/xml/current/mule-xml.xsd 
http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/3.2/mule-scripting.xsd
http://www.mulesoft.org/schema/mule/tcp http://www.mulesoft.org/schema/mule/tcp/current/mule-tcp.xsd 
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/ee/tracking http://www.mulesoft.org/schema/mule/ee/tracking/current/mule-tracking-ee.xsd ">
    <spring:beans>
        <spring:bean name="samlCallbackHandler"
            class="com.mulesoft.mule.example.security.SAMLCallbackHandler" id="samlCallbackHandler" />
    </spring:beans>

    <sub-flow name="Jaxws" doc:name="Jaxws">
        <cxf:jaxws-client operation="ExecuteCommand"
            serviceClass="com.nsn.ossbss.charge_once.wsdl.entity.tis.wsdl._1.TisInterface"
            doc:name="UsernameToken SOAP client">
            <!-- <cxf:ws-security> <cxf:ws-config> <cxf:property key="action" value="UsernameToken 
                Timestamp" /> <cxf:property key="user" value="joe" /> <cxf:property key="passwordCallbackClass" 
                value="com.mulesoft.mule.example.security.PasswordCallback" /> <cxf:property 
                key="mustUnderstand" value="false" /> </cxf:ws-config> </cxf:ws-security> -->
        </cxf:jaxws-client>
    </sub-flow>

    <sub-flow name="usernameToken1" doc:name="usernameToken1">
        <!-- <cxf:jaxws-client operation="ExecuteCommand" serviceClass="com.nsn.ossbss.charge_once.wsdl.entity.tis.wsdl._1.TisInterface" 
            doc:name="UsernameToken SOAP client"> <cxf:ws-security> <cxf:ws-config> <cxf:property 
            key="action" value="UsernameToken Timestamp" /> <cxf:property key="user" 
            value="joe" /> <cxf:property key="passwordCallbackClass" value="com.mulesoft.mule.example.security.PasswordCallback" 
            /> <cxf:property key="mustUnderstand" value="false" /> </cxf:ws-config> </cxf:ws-security> 
            </cxf:jaxws-client> -->
        <http:outbound-endpoint exchange-pattern="request-response"
            host="localhost" port="8899" path="cxf/services"
            doc:name="Invoke NSNusernameToken Web Service">
            <cxf:jaxws-client operation="ExecuteCommand"
                serviceClass="com.nsn.ossbss.charge_once.wsdl.entity.tis.wsdl._1.TisInterface"
                doc:name="UsernameToken SOAP client">
                <cxf:ws-security>
                    <cxf:ws-config>
                        <cxf:property key="action" value="UsernameToken Timestamp" />
                        <cxf:property key="user" value="joe" />
                        <cxf:property key="passwordCallbackClass"
                            value="com.mulesoft.mule.example.security.PasswordCallback" />
                        <cxf:property key="mustUnderstand" value="false" />
                    </cxf:ws-config>
                </cxf:ws-security>
                <cxf:inInterceptors />
                <cxf:outInterceptors />

            </cxf:jaxws-client>

        </http:outbound-endpoint>

        <logger message="#[payload]" level="INFO" doc:name="Logger" />

        <mulexml:jaxb-object-to-xml-transformer
            jaxbContext-ref="xmltoobj" />
        <object-to-string-transformer />
        <append-string-transformer message="&#xD;&#xA;" />

        <logger message="#[payload]" level="INFO" doc:name="Logger" />

    </sub-flow>
    <object-to-string-transformer name="ObjectToString" />
    <byte-array-to-string-transformer
        name="ByteArrayToString" />

    <tcp:connector name="TCP_C_L" validateConnections="false"
        receiveBufferSize="102400" sendBufferSize="102400" doc:name="TCP">
        <tcp:xml-protocol />
    </tcp:connector>

    <mulexml:jaxb-context name="myJaxbContext"
        packageNames="com.nsn.ossbss.charge_once.wsdl.entity.tis.xsd._1" />

    <mulexml:jaxb-context name="xmltoobj"
        packageNames="com.nsn.ossbss.charge_once.wsdl.entity.tis.xsd._1" />

    <flow name="NSNServiceClient" doc:name="NSN IN Unified Client Service">
        <tcp:inbound-endpoint host="localhost" port="51000"
            connector-ref="TCP_C_L" />
        <transformer ref="ByteArrayToString" />

        <logger message="#[payload]" level="INFO" doc:name="Logger" />
        <mulexml:jaxb-xml-to-object-transformer
            jaxbContext-ref="myJaxbContext" />

        <flow-ref name="usernameToken1" doc:name="usernameToken1" />

        <logger message="#[payload]" level="INFO" doc:name="Logger" />

        <!-- <default-exception-strategy> <choice> 
        <when evaluator="groovy" expression='payload.getException().getClass().getName().equals("com.nsn.ossbss.charge_once.wsdl.entity.tis.wsdl._1.TisException")'> 
            <logger message="#[payload]" level="INFO" doc:name="Logger" /> <object-to-string-transformer/> 
            <append-string-transformer message="&#xD;&#xA;" /> <vm:outbound-endpoint 
            path="error.notification"/> </when> </choice> </default-exception-strategy> -->

        <catch-exception-strategy>

            <logger message="#[payload]" level="INFO" doc:name="Logger" />

            <transformer ref="ByteArrayToString" />

            <append-string-transformer message="&#xD;&#xA;" />
            <logger message="#[payload]" level="INFO" doc:name="Logger" />

        </catch-exception-strategy>

        <!-- <auto-transformer returnClass="com.nsn.ossbss.charge_once.wsdl.entity.tis.wsdl._1.TisException"/> -->

        <!-- <custom-exception-strategy class="com.nsn.ossbss.charge_once.wsdl.entity.tis.wsdl._1.TisException"> 
            <logger message="#[payload]" level="INFO" doc:name="Logger" /> </custom-exception-strategy> -->

    </flow>

    <flow name="SecurityClients" doc:name="SecurityClients">
        <http:inbound-endpoint exchange-pattern="request-response"
            host="localhost" port="63080" path="client" doc:name="HTTP Inbound Endpoint" />
        <set-payload
            value="#[message.inboundProperties['http.query.params']['name']]"
            doc:name="Set payload with 'name' query param" />
        <set-variable variableName="clientType"
            value="#[message.inboundProperties['http.query.params']['clientType']]"
            doc:name="Set clientType" />
        <choice doc:name="Choice">
            <when expression="#[clientType == 'unsecure']">
                <processor-chain>
                    <flow-ref name="unsecure" doc:name="Invoke unsecure sub-flow" />
                </processor-chain>
            </when>
            <!--<when expression="#[clientType == 'usernameToken']"> <processor-chain> 
                <flow-ref name="usernameToken1" doc:name="usernameToken1" /> </processor-chain> 
                </when> -->
            <when expression="#[clientType == 'usernameTokenSigned']">
                <processor-chain>
                    <flow-ref name="usernameTokenSigned" doc:name="Invoke usernameToken Signed sub-flow" />
                </processor-chain>
            </when>
            <when expression="#[clientType == 'usernameTokenEncrypted']">
                <processor-chain>
                    <flow-ref name="usernameTokenEncrypted" doc:name="Invoke usernameToken Encrypted sub-flow" />
                </processor-chain>
            </when>
            <when expression="#[clientType == 'samlToken']">
                <processor-chain>
                    <flow-ref name="samlToken" doc:name="Invoke samlToken sub-flow" />
                </processor-chain>
            </when>
            <when expression="#[clientType == 'samlTokenSigned']">
                <processor-chain>
                    <flow-ref name="samlTokenSigned" doc:name="Invoke samlToken Signed sub-flow" />
                </processor-chain>
            </when>
            <otherwise>
                <processor-chain>
                    <set-payload value="Client type is not supported"
                        doc:name="Client type is not supported" />
                </processor-chain>
            </otherwise>
        </choice>
        <set-property propertyName="Content-Type" value="text/plain"
            doc:name="Set response Content-Type" />
        <catch-exception-strategy doc:name="Catch Exception Strategy">
            <set-payload value="There has been an Error processing the request"
                doc:name="Set Payload" />
            <set-property propertyName="Content-Type" value="text/plain"
                doc:name="Set response Content-Type" />
        </catch-exception-strategy>

    </flow>
    <sub-flow name="unsecure" doc:name="unsecure">
        <cxf:jaxws-client operation="greet"
            serviceClass="com.mulesoft.mule.example.security.Greeter" doc:name="Unsecure SOAP client"
            doc:description="Unsecure SOAP client" />
        <http:outbound-endpoint exchange-pattern="request-response"
            host="localhost" port="63081" path="services/unsecure" doc:name="Invoke unsecure Web Service" />
    </sub-flow>
    <!-- <sub-flow name="usernameToken" doc:name="usernameToken"> <cxf:jaxws-client 
        operation="greet" serviceClass="com.mulesoft.mule.example.security.Greeter" 
        doc:name="UsernameToken SOAP client"> <cxf:ws-security> <cxf:ws-config> <cxf:property 
        key="action" value="UsernameToken Timestamp"/> <cxf:property key="user" value="joe"/> 
        <cxf:property key="passwordCallbackClass" value="com.mulesoft.mule.example.security.PasswordCallback"/> 
        </cxf:ws-config> </cxf:ws-security> </cxf:jaxws-client> <http:outbound-endpoint 
        exchange-pattern="request-response" host="localhost" port="63081" path="services/username" 
        doc:name="Invoke usernameToken Web Service"/> </sub-flow> -->
    <sub-flow name="usernameTokenSigned" doc:name="usernameTokenSigned">
        <cxf:jaxws-client operation="greet"
            serviceClass="com.mulesoft.mule.example.security.Greeter" doc:name="UsernameToken Signed SOAP client">
            <cxf:ws-security>
                <cxf:ws-config>
                    <cxf:property key="action" value="UsernameToken Signature Timestamp" />
                    <cxf:property key="signaturePropFile" value="wssecurity.properties" />
                    <cxf:property key="user" value="joe" />
                    <cxf:property key="passwordCallbackClass"
                        value="com.mulesoft.mule.example.security.PasswordCallback" />
                </cxf:ws-config>
            </cxf:ws-security>
        </cxf:jaxws-client>
        <http:outbound-endpoint exchange-pattern="request-response"
            host="localhost" port="63081" path="services/signed"
            doc:name="Invoke usernameToken Signed Web Service" />
    </sub-flow>
    <sub-flow name="usernameTokenEncrypted" doc:name="usernameTokenEncrypted">
        <cxf:jaxws-client operation="greet"
            serviceClass="com.mulesoft.mule.example.security.Greeter" doc:name="UsernameToken Encrypted SOAP client">
            <cxf:ws-security>
                <cxf:ws-config>
                    <cxf:property key="action" value="UsernameToken Timestamp Encrypt" />
                    <cxf:property key="encryptionPropFile" value="wssecurity.properties" />
                    <cxf:property key="user" value="joe" />
                    <cxf:property key="encryptionUser" value="joe" />
                    <cxf:property key="passwordCallbackClass"
                        value="com.mulesoft.mule.example.security.PasswordCallback" />
                </cxf:ws-config>
            </cxf:ws-security>
        </cxf:jaxws-client>
        <http:outbound-endpoint exchange-pattern="request-response"
            host="localhost" port="63081" path="services/encrypted"
            doc:name="Invoke usernameToken Encrypted Web Service" />
    </sub-flow>
    <sub-flow name="samlToken" doc:name="samlToken">
        <cxf:jaxws-client operation="greet"
            serviceClass="com.mulesoft.mule.example.security.Greeter" doc:name="SAMLToken SOAP client">
            <cxf:ws-security>
                <cxf:ws-config>
                    <cxf:property key="action" value="SAMLTokenUnsigned Timestamp" />
                    <cxf:property key="samlPropFile" value="saml.properties" />
                    <cxf:property key="samlCallbackClass"
                        value="com.mulesoft.mule.example.security.SAMLCallbackHandler" />
                </cxf:ws-config>
            </cxf:ws-security>
        </cxf:jaxws-client>
        <http:outbound-endpoint exchange-pattern="request-response"
            host="localhost" port="63081" path="services/saml" doc:name="Invoke SAMLToken Web Service" />
    </sub-flow>
    <sub-flow name="samlTokenSigned" doc:name="samlTokenSigned">
        <cxf:jaxws-client operation="greet"
            serviceClass="com.mulesoft.mule.example.security.Greeter" doc:name="SAMLToken Signed SOAP client">
            <cxf:ws-security>
                <cxf:ws-config>
                    <cxf:property key="action" value="SAMLTokenSigned" />
                    <cxf:property key="samlPropFile" value="saml.properties" />
                    <cxf:property key="signatureKeyIdentifier" value="DirectReference" />
                    <cxf:property key="user" value="joe" />
                    <cxf:property key="passwordCallbackClass"
                        value="com.mulesoft.mule.example.security.PasswordCallback" />
                    <cxf:property key="samlCallbackClass"
                        value="com.mulesoft.mule.example.security.SAMLCallbackHandler" />
                </cxf:ws-config>
            </cxf:ws-security>
        </cxf:jaxws-client>
        <http:outbound-endpoint exchange-pattern="request-response"
            host="localhost" port="63081" path="services/signedsaml"
            doc:name="Invoke SAMLToken Signed Web Service" />
    </sub-flow>

</mule> 
```

第一个子流 usernameToken1 正在调用我在 apache camel 上部署的 Web 服务，我刚刚在上面的问题中提到了已引发的异常类。

请让我知道您的反馈，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:23:24.223

您遇到的问题是，当 Payload 到达异常策略块时，消息已经被 jaxws-client 使用，您无法再获取它。

您可以做的是将 jaxws 客户端置于出站端点之外（就在之前）。在出站端点之后，您将获得 Soap 消息。您只需检查 http 状态即可检查它是否是异常。如果状态为错误，您可以将消息转换为字符串并将其存储在变量中。一旦消息在返回的途中到达客户端，它将解释 Soap 消息并抛出将由异常策略块处理的异常。在异常中，您可以读取存储 Soap Fault 的变量并使用它做任何您想做的事情。

我知道这是一个非常麻烦的解决方案，但这是我唯一能想到的。正如我之前所说的，问题是 HTTP 从服务接收到一个流，然后该流由 jaxws 客户端在解组和抛出异常之前使用。保留 Soap Fault 的唯一方法是 Mule 每次都对输入进行序列化，这可能非常昂贵。

HTH，伊娃

# rtc - 将许可证永久分配给用户？

> ID：13286098
> 
> 赞同：1
> 
> 时间：2012-11-08T09:25:09.860
> 
> 标签：rtc, jazz, rational-team-concert

我们有一个程序可以在 RTC 和另一个程序之间同步缺陷。为此，我们在 RTC 中有一个服务用户来创建/修改工作项。但这需要贡献者许可证，并且只有其中的几个。

那么有没有办法确保该服务用户永久获得许可证？

对于用户来说这不是问题，如果没有足够的 contrib 许可证，他们会使用开发者许可证，但我们宁愿不给这个服务用户更昂贵的开发者许可证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:53:17.823

在用户视图中（对于您的服务用户），您应该在“ **`overview`**”选项卡中看到一个名为“**客户端访问许可证**”（或“ `CAL`”）的部分。

在这里，您可以选择要为该用户分配[的许可证类型。](https://jazz.net/library/article/548)

![用户编辑器 CAL](../Images/6af365a39349ab8dff50197a93dfc2ae.png)

[“客户端访问许可证管理概述](https://jazz.net/help-dev/clm/index.jsp?topic=/com.ibm.jazz.repository.web.admin.doc/topics/c_license_mgmt_over.html)”中的更多详细信息。

这会将您的用户链接到一种*类型*的许可证（不是一个许可证实例，因为我们正在谈论*浮动*许可证）。

# tomcat - Nginx+Tomcat - 504 超时

> ID：13286100
> 
> 赞同：-1
> 
> 时间：2012-11-08T09:25:15.510
> 
> 标签：tomcat, nginx, timeout

我们在 nginx 上收到了很多请求，其中一些没有到达 tomcat 我们刚刚在 Nginx 上收到错误 504 超时，但在 Tomcat 上什么也没有

我们的配置 Nginx 将流量路由到安装了 tomcat 7 的虚拟服务器（Windows Server）

我们无法弄清楚问题出在哪里，我想如果是 tomcat 的问题，我们至少应该在 tomcat 日志上看到来自 nginx 的请求

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:49:55.540

该`504 Gateway Timeout`错误可能是由网络问题引起的，即 - 连接根本无法到达您的 Tomcat 服务器，例如由于某种原因被您的防火墙丢弃。在这种情况下，即使假设它正确记录了它能够记录的所有内容，Tomcat 日志中也没有任何内容是正常的。

此外，在某些系统上可能无法获取有关在侦听队列中被客户端关闭的连接的信息，但不确定 Windows。在任何情况下，我都不希望 Tomcat 默认记录此类连接。

在它的错误日志中，nginx 将尝试提供有关超时发生点的更多信息。如果 Tomcat 日志中没有任何内容，我会期待类似的`... while connecting to upstream ...`内容，这通常表示网络问题或侦听队列溢出，如上所述。

# iphone - iOS 中的 CGFloat 值

> ID：13286101
> 
> 赞同：-4
> 
> 时间：2012-11-08T09:25:29.053
> 
> 标签：iphone, ios, ipad, uiimage, cgfloat

我是iOS新手，

![](../Images/aafe5949ea8b01370ac92820ade62a17.png) 当我输入这个值时，我想要这个图像的 CGFloat 值，

```
static const CGFloat colors [] = { 
    0.3, 0.2, 1.0, 0.8, 
    0.3, 0.3, 1.0, 1.0
}; 
```

我得到了这样的输出， ![](../Images/eb737b515629d192d0b81938c100afe3.png) 我做了很多研究但没有成功，任何人都可以帮助我为我的第一张图片找到 CGFloat 值..

**任何帮助都会得到帮助。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:54:28.053

如果您想要 RGB 值，请使用`DigitalColor Meter`or `Pixie`，并指向视图。您将获得 RGB 值。

您可以`DigitalColor Meter`从 Spotlight 开始。

编辑：

首先，您需要获取 RGB 值。现在在您的数组中，将每个值除以 255.0 的 RGB 值

最后一个值是 alpha 值，它从 0.1 到 1.0 不等，取决于您希望视图的透明程度。

因此，如果您的 RGB 值为 139、162、200。您将提供给数组的值是

`139.0/255.0, 162.0/255.0, 200.0/255.0, 1.0`.

# objective-c - 点击时如何获得图层？

> ID：13286105
> 
> 赞同：0
> 
> 时间：2012-11-08T09:25:39.763
> 
> 标签：objective-c, ios5, core-animation, xcode4.3, calayer

我的视图中有多个 CA 层，我想获得一个特定的层来执行一些任务..比如用动画删除。我使用 hitTest 方法得到的只是那个位置的 CGPoint。现在我被困在这一点上，我怎样才能获得被点击的图层的位置，所以我可以对其执行某些操作。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:31:27.683

我已经为 UIView 做了这个，但是尝试对 CALayer 做同样的事情。

```
 for(CALayer *layer in [self.view subviews]){
    if([layer class]==NSClassFromString(@"CALayer")){
        if([layer hitTest: location]){
            NSLog(@"you have clicked the layer in the point location");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:29:39.527

调用 CALayer::hitTest

/* 返回包含点 'p' 的层的最远后代。* 兄弟姐妹按从上到下的顺序搜索。'p' 被定义为 * 在接收器最近的祖先的坐标空间中 * 不是 CATransformLayer （变换层没有可以指定点的 2D * 坐标空间）。*/

*   (CALayer *)hitTest:(CGPoint)p;

* * *

例如在托管 UIView 中：

```
touchesEnded:(NSSet*)ts {
   UITouch *touch = ts.anyObject;
   CALayer *hit = [self.layer hitTest:touch.location]; 
} 
```

# xaml - 如何在silverlight4中的列表框中调用命令

> ID：13286115
> 
> 赞同：2
> 
> 时间：2012-11-08T09:26:00.707
> 
> 标签：xaml, data-binding, silverlight-4.0

我正在使用列表框，它包含按钮，我想使用命令处理按钮单击事件。但我的命令从不调用。

这是正确的方法吗？

```
 <pmControls:pmListBox Grid.Row="1" Margin="3" ItemsSource="{Binding Countries}" SelectedItem="{Binding SelectedCountry}" >
                <pmControls:pmListBox.ItemTemplate >
                    <DataTemplate >
                        <Button Command="{Binding GetAllStatesCommand}"   CommandParameter="{Binding}" Margin="3" Width="100" Height="50" Content="{Binding Title}">                                                                                                                                
                        </Button>

                    </DataTemplate>
                </pmControls:pmListBox.ItemTemplate>
  </pmControls:pmListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:54:19.597

`DataContext`一个列表项的`DataContext`与周围控件的不同。要将该命令绑定到`DataContext`该控件的，您有两个选项：

您可以为控件提供名称和对其的引用：

```
<pmControls:pmListBox x:Name="myCoolListBox" [...]>
    <pmControls:pmListBox.ItemTemplate>
        <DataTemplate>
            <Button Command="{Binding DataContext.GetAllStatesCommand, ElementName=myCoolListBox}" CommandParameter="{Binding}" [...] />                                           
        </DataTemplate>
    </pmControls:pmListBox.ItemTemplate>
</pmControls:pmListBox> 
```

或者你创建类持有你的`DataContext`......

```
public class DataContextBinder : DependencyObject
{
    public static readonly DependencyProperty ContextProperty = DependencyProperty.Register("Context", typeof(object), typeof(DataContextBinder), new PropertyMetadata(null));
    public object Context
    {
        get { return GetValue(ContextProperty); }
        set { SetValue(ContextProperty, value); }
    }
} 
```

...并在您的资源部分创建一个实例`ListBox`：

```
<pmControls:pmListBox x:Name="myCoolListBox" [...]>
    <pmControls:pmListBox.Resources>
        <local:DataContextBinder x:Key="dataContextBinder" Context="{Binding}" />
    </pmControls:pmListBox.Resources>
    <pmControls:pmListBox.ItemTemplate>
        <DataTemplate>
            <Button Command="{Binding Context.GetAllStatesCommand, Source={StaticResource dataContextBinder}" CommandParameter="{Binding}" [...] />                                           
        </DataTemplate>
    </pmControls:pmListBox.ItemTemplate>
</pmControls:pmListBox> 
```

# javascript - 为什么 JavaScript 接受具有重复属性的对象？

> ID：13286122
> 
> 赞同：15
> 
> 时间：2012-11-08T09:26:44.060
> 
> 标签：javascript

我期待 JavaScript 将具有重复属性的对象视为无效而拒绝，但在某些情况下它会接受它们。

`{"a":4,"a":5}`导致`SyntaxError`至少在 Firefox 和 Chrome 中，由于属性`a`被定义了两次，这似乎很明显。

然而`({"a":4,"a":5})`，评估得很好，并`{"a":5}`在 Firefox 和 Chrome 中产生了一个对象。

为什么接受带括号的表达式？

**总结回答：**第一个例子根本不是一个对象的构造，而是一个标记语句块。对象中的重复属性完全有效，在这种情况下最后一个定义获胜。

非常感谢你的回答！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T09:41:50.933

在 ECMAScript 3 中，在对象字面量中声明重复属性是完全合法的；你得到的`SyntaxError`可能来自于你使用对象文字作为语句的事实，由于与块语句（）混淆，这是不可能的`{ doSomething(); }`。

如果您希望将此报告为错误，您可能需要切换到 ECMAScript 5 的严格模式：[https](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode) ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T09:43:20.463

如果您将其分配给变量，则您所说的没有问题，但是，如果您不这样做，则会收到您提到的错误。从语法的角度来看，这一切都不同。

当您将任何结构包装在括号中时，您会导致该语法被评估为表达式，其结果存储为临时变量。我在 Firefox 中不这样做时得到的错误是**unexpected label**或**invalid label**，因此似乎没有赋值或括号，此对象构造不被视为对象构造 - 相反，它被视为具有多个标签语句的块非法定义：

```
{
  a: function(){
    alert('a');
  },
  b: function(){
    alert('b');
  }
} 
```

上面的内容作为一个对象应该是完全可以接受的，但是如果您在没有将其分配给某种形式的变量或使用括号对其进行评估的情况下对其进行评估，则会出现类似的错误。简单地说，属性名称的重复不会导致错误:)

基本上想象你的第一个例子，但像这样：

```
function (){
  "a": 4,
  "b": 5
} 
```

这些浏览器大致就是这样对待它的，现在这显然是非法的 javascript 语法......而以前并不那么明显。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T10:46:44.173

在第一个表示法（无括号）中，javascript 语法是模棱两可的。来自[ecmascript 规范](http://www.ecma-international.org/ecma-262/5.1/#sec-12.4)：

> *ExpressionStatement*不能以左大括号开头，因为这可能会使它与*Block*模棱两可。

一个*[块](http://www.ecma-international.org/ecma-262/5.1/#sec-12.1)*基本上是对里面的所有语句求值，相当于求值`"a":4,"a":5`哪个是无效的JS，实际上返回相同的SyntaxError`Unexpected token :`

将该代码包装在括号中（或者，更确切地说，*[分组运算符](http://www.ecma-international.org/ecma-262/5.1/#sec-11.1.6)*）消除了这种歧义，因为赋值表达式不能跟在块语句后面：

```
var test = {"a":"a","a":"b"}; //test.a === "b" 
```

此外，任何不能与块语句一起使用的运算符或表达式都可以消除这种歧义。几乎没有想到一个实际场景，也许如果您想将对象文字作为条件运算符的一部分返回？

```
//this *could* come out of a JS minifier:
return x ? (foo(),{"a":"b"}) : (bar(), {"b":"a"}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:43:02.347

这不是错误，您只是用另一个覆盖值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T09:45:00.767

我猜测（虽然不确定）这是一个错误，因为 Firefox 和 Chrome 的 JS 解析器处理语句和表达式的方式不同。所以因为它第二次被括号括起来，所以它被认为是一个表达式。由于它在表达式中寻找较少的信息，它可以忽略错误的值。你会看到，如果你这样做...

```
var a = {'a': 5, 'a': 4};
console.log(a); 
```

它工作正常！还要注意它在语句的右侧，暗示它是一个表达式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T09:35:30.377

为什么不应该被接受？您只是在覆盖这些值。我认为这是一个功能，而不是一个错误。它在各种浏览器上对我来说都很好：http: [//jsbin.com/oculon/1/edit](http://jsbin.com/oculon/1/edit) 这就像写作

```
var a;

a = 4;
a = 5;

alert(a); 
```

# c# - log4net 日志中的页眉和页脚增加了两倍

> ID：13286124
> 
> 赞同：3
> 
> 时间：2012-11-08T09:26:47.963
> 
> 标签：c#, .net, log4net, log4net-appender

以下是 app.config 中的 log4net 部分

```
 <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,     log4net" />
   </configSections>      
   <log4net debug="true">
     <appender name="LogFileAppender" type="log4net.Appender.FileAppender">
      <file type="log4net.Util.PatternString" value="${TMP}\SRG\Logs\Log_%env{USERNAME}_%date{yyyyMMdd}.log" />
      <appendToFile value="true" />
      <bufferSize value="20" />
      <LockingModel type="log4net.Appender.FileAppender+MinimalLock"/>
      <layout type="log4net.Layout.PatternLayout">
      <header type="log4net.Util.PatternString" value="[Log Starts]%newline" />        
      <footer type="log4net.Util.PatternString" value="[Log Ends]%newline" />        
      <conversionPattern value="%date [%username] - %message%newline" />
      </layout>
     </appender>  

     <logger name="SRGApplicationDebugLog">
      <level value="DEBUG" />
      <appender-ref ref="LogFileAppender" />
     </logger>
   </log4net> 
```

**问题 1：每当我的应用程序启动时，我都会额外获得两次**页眉和页脚，但我需要避免它。

> [日志开始]
> [日志结束]
> [日志开始]
> [日志结束]
> [日志开始]
> 2012-11-08 12:25:03,376 [用户名] - 应用程序启动
> [日志结束]

问题 2：我没有得到**两个空页眉页脚对**来自哪里。

1.  我正在创建如下记录器：

```
_debugLogger = LogManager.GetLogger("SRGApplicationDebugLog");    
XmlConfigurator.Configure(); 
```

1.  要使用记录器：

```
_debugLogger.DebugFormat(logMessage); 
```

1.  我在 AssemblyInfo.cs 中为 log4net 明确添加了这一行

```
[assembly: XmlConfigurator(Watch = true)] 
```

问题：想解决粗体字的问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T17:51:02.727

你不需要

```
 XmlConfigurator.Configure(); 
```

如果你有

```
[assembly: XmlConfigurator(Watch = true)] 
```

两者都将导致两个页眉和两个页脚。

至于为什么你有三套，也许你叫 `XmlConfigurator.Configure()`了两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:28:12.220

> 将 XmlConfigurator.Configure() 放在多个位置可能会导致超过一个页眉和页脚对。
> 
> XmlConfigurator.Configure() 应仅在解决方案中的一处定义。更好的>方法是将它放在AssemblyInfo.cs中。

# android - 某些 Android 设备上的 Joda 时间错误？

> ID：13286127
> 
> 赞同：3
> 
> 时间：2012-11-08T09:27:03.573
> 
> 标签：android, jodatime

我在 Android 应用程序中使用 joda-time 1.6.2，我收到了一些崩溃报告

```
java.lang.IllegalArgumentException: Invalid format: "8:00 AM" is malformed at "AM" 
```

触发的代码如下：

```
DateTimeFormatter formatter = DateTimeFormat.forPattern("hh:mm a");
LocalTime lt = formatter.parseDateTime(value).toLocalTime(); 
```

我无法在我的手机上重现这个崩溃，所以它只发生在某些 Android 设备上，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-10T15:03:58.287

在 Android 5 发布后，我也遇到了同样的问题。只有运行此版本的设备才会崩溃。

> 这可能是本地化问题。看来您的默认本地不知道“AM”字符串，而是其他东西。

[有关详细信息和我的解决方案，请参阅我的帖子](https://stackoverflow.com/questions/28286732/jodatime-issues-on-android-5-0/28292342?noredirect=1#comment45195301_28292342)

# iphone - ios 在通信类中没有可用的interetConnetion 时显示警报

> ID：13286129
> 
> 赞同：2
> 
> 时间：2012-11-08T09:27:12.587
> 
> 标签：iphone, objective-c, ios, uialertview

我有一个 ViewController（ViewController.m，它通过 web 服务加载数据。这些方法包含在 GetHTTP.m 中。

在 GetHTTP.m 中，我已包含在`Reachable.h`Internet 连接断开时收到通知。

```
[[NSNotificationCenter defaultCenter] addObserver:self 
       selector:@selector(checkNetworkStatus:) 
       name:kReachabilityChangedNotification object:nil]; 
```

但是如何从我的 GetHTTP::checkNetworkStatus 方法中发出警报，因为所有视图都在我的 ViewController.m 类中？

可能我可以在 ViewController 类中使用一个方法作为我的选择器的目标，但是我从多个 ViewController 调用 GetHTTP，因此每次从另一个 ViewClass 调用选择器目标时都必须更改它。

也许我错过了一个简单的 MVC 规则？

提前致谢。基督教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:36:40.600

使用此代码发出警报消息

```
-(void) checkNetworkStatus:(NSNotification *)notice
{
    recheabilityBool=FALSE;
    nonrecheabilityBool=FALSE;
    // called after network status changes
    NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
    switch (internetStatus)
    {
        case NotReachable:
        {
            nonrecheabilityBool=TRUE;

            NSLog(@"The internet is down.");
            [self checkAndCreateDatabase];
            [self readLikeDislikeFromSyncDB];

            UIAlertView *myAlert = [[UIAlertView alloc] initWithTitle:@"No Internet Connection" message:@"Please connect to the internet to experience all the features of this app." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];  
            [myAlert show];  
            NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
            Con=0;
            [prefs setInteger:Con forKey:@"conKey"];
            UINavigationController *navCon = [[UINavigationController alloc] initWithRootViewController:self.libraryViewController];
            [navCon setNavigationBarHidden:YES];
            [[self window] setRootViewController:navCon];

            break;
        }
        case ReachableViaWiFi:
        {

            recheabilityBool=TRUE;
            NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
            Con=404;
            [prefs setInteger:Con forKey:@"conKey"];
            [self performSelectorOnMainThread:@selector(storeLikeFromCTB) withObject:nil waitUntilDone:YES];
            // [self deleteAllRecordsDB];

            //  [self performSelector:@selector(storeDisLikeFromCTB) withObject:nil afterDelay:0];
            //[self performSelector:@selector(GetApps) onThread:[self myThread] withObject:nil waitUntilDone:YES];
            //[self performSelector:@selector(GetApps) withObject:nil afterDelay:0];
            [self performSelectorOnMainThread:@selector(updateToCTB) withObject:nil waitUntilDone:YES];

            [self performSelectorOnMainThread:@selector(GetApps) withObject:nil waitUntilDone:YES];            
            //[self performSelector:@selector(gotoHome) withObject:nil afterDelay:0];

            NSLog(@"The internet is working via WIFI.");

            break;
        }
        case ReachableViaWWAN:
        {
            NSLog(@"The internet is working via WWAN.");

            break;
        }
    }

    NetworkStatus hostStatus = [hostReachable currentReachabilityStatus];
    switch (hostStatus)
    {
        case NotReachable:
        {
            if( nonrecheabilityBool==FALSE)
            {
                [self checkAndCreateDatabase];
                [self readLikeDislikeFromSyncDB];           
                NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
                Con=0;
                [prefs setInteger:Con forKey:@"conKey"];
                UINavigationController *navCon = [[UINavigationController alloc] initWithRootViewController:self.libraryViewController];
                [navCon setNavigationBarHidden:YES];
                [[self window] setRootViewController:navCon];

                NSLog(@"A gateway to the host server is down.");
            }          
            break;

        }
        case ReachableViaWiFi:
        {
            if(recheabilityBool==FALSE)
            {

                recheabilityBool=TRUE;

                NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
                Con=404;
                [prefs setInteger:Con forKey:@"conKey"];
                [self performSelectorOnMainThread:@selector(storeLikeFromCTB) withObject:nil waitUntilDone:YES];
                //  [self performSelector:@selector(storeDisLikeFromCTB) withObject:nil afterDelay:0];
                //[self performSelector:@selector(GetApps) onThread:[self myThread] withObject:nil waitUntilDone:YES];
                //[self performSelector:@selector(GetApps) withObject:nil afterDelay:0];
                [self performSelectorOnMainThread:@selector(updateToCTB) withObject:nil waitUntilDone:YES];

                [self performSelectorOnMainThread:@selector(GetApps) withObject:nil waitUntilDone:YES];            
                //[self performSelector:@selector(gotoHome) withObject:nil afterDelay:0];

                NSLog(@"The internet is working via WIFI.");
                break;
            }

            NSLog(@"A gateway to the host server is working via WIFI.");

            break;
        }
        case ReachableViaWWAN:
        {
            NSLog(@"A gateway to the host server is working via WWAN.");
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:33:05.720

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkForReachability) name:kReachabilityChangedNotification object:nil];

    -(void)checkForReachability{
    Reachability *reachability = [Reachability reachabilityForInternetConnection];

    [reachability startNotifier];

    NetworkStatus remoteHostStatus = [reachability currentReachabilityStatus];

    if(remoteHostStatus == NotReachable) {
        //Do something
    }
     else if (remoteHostStatus == ReachableViaWiFi) {
    // Do something
     }

    else{

    // Else do something else
    }
} 
```

# android - 我的应用程序从 480*800 移植到 480*854，systemUI 错误

> ID：13286141
> 
> 赞同：-3
> 
> 时间：2012-11-08T09:28:00.980
> 
> 标签：android

我有一个运行良好的手机应用程序。现在我把它搬到了一个新的地方，然后出了点问题。

我的应用从 480*800 移植到 480*854，systemUI 说错误，状态栏什么都看不到。

不知道问题出在哪里？

```
Caused by: android.view.InflateException: Binary XML file line #26: Error inflating class android.view.View

java.lang.RuntimeException: Unable to create service com.android.systemui.statusbar.StatusBarService: android.view.InflateException: Binary XML file line #26: Error inflating class android.view.View

11-08 10:43:32.879: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.879: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.879: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.879: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.879: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.879: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.879: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.879: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.879: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.879: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.879: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.879: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:32.928: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.069: E/AwesomePlayer(35): AwesomePlayer::setDataSourcel out haveAuido = 1, havevideo = 0 
11-08 10:43:33.129: E/AwesomePlayer(35): AwesomePlayer::setDataSourcel out haveAuido = 1, havevideo = 0 
11-08 10:43:33.159: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.159: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.159: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.159: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.159: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.159: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.159: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.159: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.159: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.159: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.159: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.159: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:33.189: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:34.599: E/dalvikvm(230): [DVM] mmap return base = 45bf6000
11-08 10:43:35.948: E/TwelveKeyDialer(230): twelvekeydialer : one. view

11-08 10:43:35.958: E/TwelveKeyDialer(230): twelvekeydialer : after view
11-08 10:43:36.299: E/dalvikvm(160): [DVM] mmap return base = 47728000
11-08 10:43:36.429: E/Zygote(34): writeInt++369
11-08 10:43:36.429: E/Zygote(34): writeInt--369
11-08 10:43:36.439: E/ZygoteProcess(72): readInt++
11-08 10:43:36.439: E/ZygoteProcess(72): readInt--: 369
11-08 10:43:36.659: E/PhoneStatesMgrService(160): handleMessage no item to handle
11-08 10:43:37.149: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.149: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.149: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.149: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.149: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.149: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.149: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.149: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.149: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.149: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.149: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.149: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.209: E/Zygote(34): writeInt++381
11-08 10:43:37.219: E/ZygoteProcess(72): readInt++
11-08 10:43:37.219: E/Zygote(34): writeInt--381
11-08 10:43:37.219: E/ZygoteProcess(72): readInt--: 381
11-08 10:43:37.259: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.259: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.259: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.259: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.259: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.259: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.259: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.259: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.259: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.259: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.259: E/AudioPolicyManagerBase(35): unknown stream type
11-08 10:43:37.2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:02:02.483

我认为您的布局文件有问题。对于 480x854，您可以为布局创建单独的文件夹，如 layout-hdpi-854x480

# c# - 特定属性的通用排序方法

> ID：13286143
> 
> 赞同：1
> 
> 时间：2012-11-08T09:28:16.470
> 
> 标签：c#

我是通用编程的新手，有一个问题：

我正在尝试按应定义为参数的特定属性对列表进行排序。请查看代码以更好地理解我想要的内容：

```
public static IEnumerable<T> SortEmployeesFor<T>(
    IEnumerable<T> list,
    property1,
    property2, 
    OrderOptions options)
{
    switch (options)
    {
        case OrderOptions.1:
            return list.OrderBy(x => property1).ThenBy(x => property2);

        case OrderOptions.2:
            return list.OrderBy(x => property2).ThenBy(x => x.property1);

        ...
    }

    return list;
} 
```

有什么选项可以执行此操作吗？

* * *

PS这是我的第一篇文章，如果我做错了，请理解并告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:47:16.683

尝试将排序属性作为从 T 中提取键的 Funcs 传递。

所以：

```
public static IEnumerable<T> SortEmployeesFor<T>(
  IEnumerable<T> list,
  Func<T, TProp1> order1,
  Func<T, TProp2> order2, 
  OrderOptions options)
{
    switch (options)
    {
    case OrderOptions.1:
        return list.OrderBy(order1).ThenBy(order2);

    case OrderOptions.2:
        return list.OrderBy(order2).ThenBy(order1);

    ...
    }

    return list;
} 
```

用法：

```
SortEmployeesFor<MyType>(
  list, 
  new Func<MyType, typeOfProp1>(x => x.property1), 
  new Func<MyType, typeOfProp2>(x => x.property2), 
  OrderOptions.1); 
```

不知道这是否在语法上完全正确，但它应该为您指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:48:56.457

```
public static IEnumerable<T> SortEmployeesFor<T>(IEnumerable<T> list, Func<T, IComparable> property1, Func<T, IComparable> property2, OrderOption option)
{
  switch (options)
  {
    case OrderOptions.1:
      return list.OrderBy(property1).ThenBy(property2);

    case OrderOptions.2:
      return list.OrderBy(property2).ThenBy(property1);
  }

  return list;
} 
```

然后使用类似这样的方式调用它

`list = SortEmployeesFor(list, x => x.Id, y => y.Name, OrderOptions.1);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:42:53.813

你可以用linq做到这一点。

```
public static IEnumerable<T> SortEmployeesFor<T>(IEnumerable<T> list, OrderOptions options)
{
    switch (options)
    {
        case OrderOptions.1:
            list = from t in list
                     orderby t.property1, t.property2
                     select t;
        case OrderOptions.2:
            list = from t in list
                     orderby t.property2, t.property1
                     select t;        
        .
        .
        .
    }
    return list;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:56:25.923

当您在 MSDN 上查找它时，您会注意到[`OrderBy`](http://msdn.microsoft.com/en-us/library/bb534966.aspx)，并将`ThenBy`a`Func<TSource, TKey>`作为键选择器参数。

所以你可以写一些像这样的通用扩展。

```
public static IEnumerable<T> SortWithOptions<T, TKey1, TKey2>(
    this IEnumerable<T> source,
    Func<T, TKey1> selector1,
    Func<T, TKey2> selector2,
    OrderOptions options)
{
    switch (options)
    {
        case OrderOptions.One:
             return source.OrderBy(selector1).ThenBy(selector2);

        case OrderOptions.Two:
             return source.OrderBy(selector2).ThenBy(selector1);
    }
} 
```

然后，如果你想为员工编写一个非通用的实现，你可以编写，

```
public static IEnumerable<Employee> SortEmployees(
    IEnumerable<Employee> unsorted,
    OrderOptions options)
{
    return unsorted.SortWithOptions(
        e => e.Cost,
        e => e.Ability,
        options);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T09:31:45.077

尝试这个，

```
list.OrderBy("SomeProperty DESC, SomeOtherProperty ASC");

list.OrderBy("SomeProperty");
list.OrderBy("SomeProperty DESC");
list.OrderBy("SomeProperty DESC, SomeOtherProperty");
list.OrderBy("SomeSubObject.SomeProperty ASC, SomeOtherProperty DESC"); 
```

看[这里](http://aonnull.blogspot.com/2010/08/dynamic-sql-like-linq-orderby-extension.html)

# c# - 扩展 Task 类时必须在非泛型静态类中定义扩展方法

> ID：13286144
> 
> 赞同：0
> 
> 时间：2012-11-08T09:28:22.703
> 
> 标签：c#, extension-methods

我正在尝试扩展 Task 类，但根据我扩展它的方式，我得到了两个不同的错误：第一个：

```
public class ExtTask : Task
{
    public static void DoSomenthing(this Task task)
    {
        //some code
    }
} 
```

扩展方法必须在非泛型静态类中定义

所以我添加了静态：

```
public static class ExtTask : Task
{
    public static void DoSomenthing(this Task task)
    {
        //some code
    }
} 
```

收到错误：

> 静态类“DownloadFile.ExtTask”不能派生自“System.Threading.Tasks.Task”类型。静态类必须派生自对象。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T09:29:18.490

如果您尝试添加扩展方法，则不需要从任务派生，将其更改为

```
public static class ExtTask
{
    public static void DoSomenthing(this Task task)
    {
        //some code
    }
} 
```

# javascript - 黑莓浏览器 Javascript 时间 DST 问题

> ID：13286149
> 
> 赞同：7
> 
> 时间：2012-11-08T09:28:33.927
> 
> 标签：javascript, blackberry, web, timezone

我们的目标是 Blackberry OS 6 和 7 设备，并且遇到了 Javascript 和夏令时问题。我们看到的不同设备/操作系统版本的行为是：

*   将 DST 设置保持到月底（因此今年欧洲在 11 月 1 日而不是 10 月 28 日切换）
*   全年使用相同的 DST 设置/时区偏移（因此，在 10 月 28 日之后，时区将是 CET（+100），而在 28 日之前，它将是 CEST（+200），**全年**）

对于不同的设备/版本更具体：

*   9800 - 6.0.0.246：对所有日期使用相同的偏移量
*   9780 - 6.0.0.285：对所有日期使用相同的偏移量
*   9780 - 6.0.0.668：月底切换
*   9700 - 6.0.0.668：月底切换
*   9360 - 7.0.0.530：月底切换

有人知道这些问题和/或解决方法吗？

我发现了这个黑莓问题，它解释了“所有日期的相同偏移量”问题，我认为他们以错误的方式修复了它：http: [//supportforums.blackberry.com/t5/Web-and-WebWorks-Development/ Javscript-GMT-Offfset-not-working-in-BB6-0-Devices-Non-Torch/td-p/815883](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Javscript-GMT-Offfset-not-working-in-BB6-0-Devices-Non-Torch/td-p/815883)

我们还开发了一个测试页面，它通过执行一些简单的 document.write(new Date(timestamp)) 语句来揭示问题，可在此处获得：http: [//bit.ly/QhJOIC](http://bit.ly/QhJOIC)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:42:01.917

如果该网页仅供在线使用，则一种选择：然后您可以向服务器进行 ajax 回调以获取该用户的适当偏移量。然后，这将使用您选择的库来提供时区和 DST 信息。只需将用户位置信息返回到服务器。

# java - Kinect + 处理 + JFrame java.lang.OutOfMemoryError

> ID：13286151
> 
> 赞同：0
> 
> 时间：2012-11-08T09:28:43.270
> 
> 标签：java, jframe, kinect, processing, out-of-memory

我对使用 Java、Kinect (OpenNI) 和 Processing 的实际项目有疑问。
如果我只使用 Processing 和 Java 一切正常，没有什么是绊脚石，我也没有例外。
但是，如果我将处理 Applet 放入 JFrame 中（以解决 Applet 处理方式的一些问题），我会遇到以下问题：

*   每隔 3 秒，kinect 图像就会很快挂起（看起来 Java 正在使用垃圾收集器清除内存中的任何内容）
*   20 秒后应用程序停止，我收到以下错误：

    ```
    Exception in thread "Animation Thread" java.lang.OutOfMemoryError: Java heap space
    at java.awt.image.DataBufferInt.<init>(Unknown Source)
    at java.awt.image.Raster.createPackedRaster(Unknown Source)
    at java.awt.image.DirectColorModel.createCompatibleWritableRaster(Unknown Source)
    at java.awt.image.BufferedImage.<init>(Unknown Source) 
    ```

* * *

这是我关于可视化的相关代码：

```
public boolean drawGrayscaleImage(){    

    //init PApplet and build JFrame
    GrayscalePApplet grayscalePApplet = new  GrayscalePApplet ();
    grayscalePApplet.init();        
    this.grayscaleJFrame = this.initFrame(grayscalePApplet);

    //Set Uplink for PApplet and begin drawing
    grayscalePApplet.setGraphicP(this);     

    return false;
} 
```

* * *

这里是处理 PApplet 类的绘图函数

```
public void draw(){

    if(graphicP != null){
        //creat the relevant image Buffers for java and Processing
        BufferedImage image = new BufferedImage(imageWidth, imageHeight, BufferedImage.TYPE_BYTE_GRAY);           
        PImage pimage = new PImage(image.getWidth(),image.getHeight(),PConstants.ARGB);

        //fill up the databuffer using a converted Kinect Grayscale Image
        DataBufferByte dataBuffer = new DataBufferByte(graphicP.getImage(ImageType.GRAYSCALE), this.imageWidth * this.imageHeight);
        Raster raster = Raster.createPackedRaster(dataBuffer,imageWidth, imageHeight, 8, null);
        image.setData(raster);

        //draw image to Processing
        image.getRGB(0, 0, pimage.width, pimage.height, pimage.pixels, 0, pimage.width);
        pimage.updatePixels();
        image(pimage, 0, 0);

        // null everything to get Garbagecollection to work (?)
        image = null;
        pimage = null;
        dataBuffer = null;
    }
} 
```

如何防止 OutOfMemory 异常？
什么可能导致该异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:14:09.993

由于我看不到完整的代码，我无法做出准确的假设，但我的猜测是问题出在这里：

```
BufferedImage image = new BufferedImage(imageWidth, imageHeight, BufferedImage.TYPE_BYTE_GRAY);           
        PImage pimage = new PImage(image.getWidth(),image.getHeight(),PConstants.ARGB);

        //fill up the databuffer using a converted Kinect Grayscale Image
        DataBufferByte dataBuffer = new DataBufferByte(graphicP.getImage(ImageType.GRAYSCALE), this.imageWidth * this.imageHeight);
        Raster raster = Raster.createPackedRaster(dataBuffer,imageWidth, imageHeight, 8, null);
        image.setData(raster); 
```

我不确定您使用的是什么 Kinect API（OpenNI/libfreenect），但无论如何，您可能不应该每帧多次创建新图像（就像您在 中所做的那样`draw()`）。图像会很快填满内存，您不需要始终使用多个图像，您只需要不断更新的两个图像。例如，您初始化图像一次，`setup()`然后更新这些图像的像素`draw()`

此外，如果您使用的是 Processing，我建议您查看 Kinect 处理包装库，例如用于[OpenNI](http://code.google.com/p/simple-openni)的 SimpleOpenNI 或用于 libfreenect 的[dLibs](https://github.com/diwi/dLibs) (Win)/ [OpenKinect](http://www.shiffman.net/p5/kinect/)。使用以下任何一种显示深度图像要简单得多：

使用 SimpleOpenNI：

```
import SimpleOpenNI.*;

SimpleOpenNI  ni;

void setup(){
  ni = new SimpleOpenNI(this);
  ni.enableDepth()
  size(ni.depthWidth(), ni.depthHeight()); 
}

void draw(){
  ni.update();
  image(context.depthImage(),0,0);
} 
```

使用 dLibs freenect：

```
import dLibs.freenect.toolbox.*;
import dLibs.freenect.constants.*;
import dLibs.freenect.interfaces.*;
import dLibs.freenect.*;

Kinect kinect;                     // main kinect-object
KinectFrameDepth kinectDepth;     // depth frame
PImage depthFrame;

void setup(){
  size(640,480);
  kinect = new Kinect(0);
  kinectDepth = new KinectFrameDepth(DEPTH_FORMAT._11BIT_);// create a depth instance
  kinectDepth.connect(kinect);  //connect the created depth instance to the main kinect
  depthFrame = createImage(DEPTH_FORMAT._11BIT_.getWidth(), DEPTH_FORMAT._11BIT_.getHeight(), RGB);
}
void draw(){
  assignPixels(depthFrame, kinectDepth);
  image(depthFrame, 0, 0);
}
void assignPixels(PImage img, Pixelable kinectDev){
  img.loadPixels();
  img.pixels = kinectDev.getPixels();  // assign pixels of the kinect device to the image
  img.updatePixels();
}
void dispose(){
  Kinect.shutDown(); 
  super.dispose();
} 
```

使用 OpenKinect P5：

```
import org.openkinect.*;
import org.openkinect.processing.*;

Kinect kinect;

void setup() {
  size(640,480);
  kinect = new Kinect(this);
  kinect.start();
  kinect.enableDepth(true);
}

void draw() {
  background(0);
  image(kinect.getDepthImage(),0,0);
}

void stop() {
  kinect.quit();
  super.stop();
} 
```

这取决于您需要什么操作系统和什么功能来为您选择正确的处理包装器。

![简单的openni](../Images/ccedc67093740102091c1ad643e35bf7.png) SimpleOpenNI 示例

![diwi dlibs](../Images/daeb8686d09b3384a85ab5512ec57a40.png) dLibs_freenect

![OpenKinect P5](../Images/879c3aa9f2ddd52e85bbedac5985ba2a.png) OpenKinect P5

# linux - linux下如何使用nasm运行外部程序

> ID：13286153
> 
> 赞同：1
> 
> 时间：2012-11-08T09:28:49.763
> 
> 标签：linux, assembly, nasm

我想知道如何在linux下通过nasm编写的代码来执行程序。为了澄清，我想通过我的汇编代码运行 gzip 并让它压缩和/或解压缩任意文件。我将不胜感激任何帮助和/或指示。谢谢。

# ios - 无法在 IOS5 模拟器中编辑 UITextField

> ID：13286164
> 
> 赞同：0
> 
> 时间：2012-11-08T09:29:12.617
> 
> 标签：ios, ios5, uitextfield, xcode4.2

我选中了“控件”部分中的“启用”复选框，并在“属性检查器”的“视图”部分中启用了“启用用户交互”复选框。但是当我运行模拟器并尝试在 UITextField 中单击时，键盘不会出现，也没有迹象表明它被选中。我正在使用 xcode 4.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:49:11.810

给 UITextField 一个背景颜色，这样您就可以确定它是您期望的位置，并且您实际上是在该字段内点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:59:31.437

你的方法在这里有效。为确保您可以尝试添加

```
@property (nonatomic, retain) IBOutlet UITextField *textField; 
```

并将其与您的文本框连接起来。

# c++ - C++ 虚函数基本返回类型建议

> ID：13286171
> 
> 赞同：2
> 
> 时间：2012-11-08T09:29:40.603
> 
> 标签：c++, oop, polymorphism, virtual, return-type

我需要一个基类，它为我提供原始类型的数据指针。我在其中添加了一个功能。我派生了类的类型。我使用 void * 来支持所有原始类型作为返回类型，但这就像旧的 C 时代一样。这对 OOP 不利。是否有人建议在 OOP 中以适当的方式进行操作？

```
#include <iostream>

class base {
public:
    virtual void *getPtr() = 0;
    virtual ~base() {};
};

class derivedAType : public base {
protected:
    int _i;
public:
    derivedAType(int i): _i(0) { _i = i; };
    virtual ~derivedAType() {}

    virtual void *getPtr() {
        return static_cast<void *>(&_i);
    }
};

class derivedBType : public base {
protected:
    short _s;
public:
    derivedBType(short s): _s(0) { _s = s; };
    virtual ~derivedBType() {}

    virtual void *getPtr() {
        return static_cast<void *>(&_s);
    }
};

int main()
{
    base *b1 = new derivedAType(1203912);
    base *b2 = new derivedBType(25273);

    std::cout   << "b1 : "   << *(static_cast<int *>(b1->getPtr()))
                << "\nb2 : " << *(static_cast<short *>(b2->getPtr()))
                << std::endl;

    delete b2;
    delete b1;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:31:19.937

使基类成为模板类，数据类型为模板变量

```
template<typename DataType>  
class base {
virtual DataType* getPtr() = 0;
//...
}; 
```

和

```
class derivedAType : public base<int> 
```

但这会将基类更改为模板类，这意味着您不能将它们存储在一起，`base<int>`这与`base<short>`

如果这是不可接受的，其他选项只是比您的代码更干净一点，但基本相同，请参阅[此问题](https://stackoverflow.com/questions/4665117/c-virtual-function-return-type)。基本上派生类返回类型可以反映它们的真实类型，我认为它应该自动转换为`void*`，所以你不必*手动*转换指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:01:19.397

不确定你的问题。但也许双重回调会有所帮助：

```
class Callback {
public:
  virtual void do_int( int i ) const = 0;
  virtual void do_short( short s ) const = 0;
  /* ... */
}

class base {
public:
    virtual void do_stuff(const Callback & c); /* will need a more telling name */
    virtual ~base() {};
};

class derivedAType : public base {
protected:
    int _i;
public:
    derivedAType(int i): _i(0) { _i = i; };
    virtual ~derivedAType() {}

    virtual void do_stuff(const Callback & c) {
        c.do_int( _i );
    }
};

class derivedBType : public base {
protected:
    short _s;
public:
    derivedBType(short s): _s(0) { _s = s; };
    virtual ~derivedBType() {}

    virtual void do_stuff( const Callback & c) {
        c.do_short( _s );
    }
};

class print_callback : public Callback {
public:
  virtual void do_int( int i ) const { std::cout << i; }
  virtual void do_short( short s )  const { std::cout << s; }
}

int main() {
  base *b1 = new derivedAType(1203912);
  base *b2 = new derivedBType(25273);

  std::cout   << "b1 : ";
  b1->do_stuff(print_callback());
  std::cout << "\nb2 : ";
  b2->do_stuff(print_callback());
  std::cout << std::endl;

  delete b2;
  delete b1;

  return 0;
} 
```

当然，您可以通过仅存储创建的打印回调并使用它两次来简化此操作。

# c# - 在 GridView 中对项目进行分组

> ID：13286173
> 
> 赞同：0
> 
> 时间：2012-11-08T09:30:06.833
> 
> 标签：c#, gridview, grouping

我不太确定我将如何进行编码，但 GridView 应该是这样的：

![在此处输入图像描述](../Images/0fa50f2132312ebd2cd0fbd55b605285.png)

项目将根据各自的“产品”进行分组

任何有关 GridView 结构的帮助将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:55:54.993

[您可以使用ListView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.aspx)控件来实现此目的。它比 GridView 更可定制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:32:26.250

您可以将 group by 子句添加到查询中，从中获取 gridview 中的项目。这应该得到几乎你想要的输出。除了空白产品行。

# java - 将 Json 数组转换为 Java 数组

> ID：13286176
> 
> 赞同：1
> 
> 时间：2012-11-08T09:30:14.177
> 
> 标签：java, json

我正在尝试将此 JSON 字符串转换为数组：

```
{"result":"success","source":"chat","tag":null,"success":{"message":"%message%","time":%time%,"player":"%player%"}} 
```

我想像这样输出它：

```
<%player%> %message% 
```

我对java很陌生，我来自PHP，你可以按照以下方式做一些事情：

```
$result = json_decode($jsonfile, true);
echo "<".$result['success']['player']."> ".$result['success']['message'];

Output: <%player%> %message% 
```

在java中有没有简单的方法来做到这一点？

我搜索了一些类似的主题，但我并没有真正理解它们。有人可以像我 5 岁那样向我解释这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:32:26.607

为什么要重新发明轮子，使用[GSON](http://code.google.com/p/google-gson/) - 一个 Java 库，可用于将 Java 对象转换为其 JSON 表示，反之亦然

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:42:52.953

[JSON-lib](http://json-lib.sourceforge.net/)是 Java 中的一个很好的 JSON 库。

```
String jsonString = "{message:'%message%',player:'%player%'}";
JSONObject obj = JSONObject.fromObject(jsonString);    
System.out.println("<" + obj.get("message") + ">" + obj.get("player") ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:36:31.307

你也可以使用 xStream 来做这件事，它有一个非常简单的 API。只需谷歌即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:42:37.560

**您始终可以使用以下库，例如：**

**-** `Jackson`

**-** `GSON`

**好的，这是不使用任何库的正确方法：**

**例如：**

`JSONArray jarr = api.giveJsonArr();`

**// giveJsonArr() 方法是一个自定义的方法来给Json Array。**

```
for (int i = 0; i < jarr.length(); i++) {

   JSONObject jobj = jarr.getJSONObject(i);   // Taking each Json Object

   String mainText = new String();            // fields to hold extracted data
   String provText = new String();
   String couText = new String();
   String fDatu = new String();

   try {
     mainText = jobj.getString("Overview");   // Getting the value of fields
     System.out.println(mainText);
    } catch (Exception ex) {

    }

    try {

    JSONObject jProv = jobj.getJSONObject("Provider");
    provText = jProv.getString("Name");
    System.out.println(provText);
    } catch (Exception ex) {

    }

    try {
        JSONObject jCou = jobj.getJSONObject("Counterparty");
        couText = jCou.getString("Value");
        System.out.println(couText);
    } catch (Exception ex) {

    }

    try {
                String cloText = jobj.getString("ClosingDate");
        fDatu = giveMeDate(cloText);
        System.out.println(fDatu);
        } catch (Exception ex) {

        }

   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T09:46:14.643

如您所见，您有很多选择。这是来自 json.org 的一个简单的方法，您可以在其中找到许多其他选择。他们自己提供的很简单。这是您的示例：

```
 String json = "{\"result\":\"success\",\"source\":\"chat\",\"tag\":null,\"success\":{\"message\":\"%message%\",\"time\":%time%,\"player\":\"%player%\"}}";
    JSONObject obj = new JSONObject(json);
    JSONObject success = obj.getJSONObject("success");
    System.out.println("<" + success.get("player") + "> "
                       + success.get("message")); 
```

# javascript - 解析 xml 后我得到未定义的结果

> ID：13286177
> 
> 赞同：0
> 
> 时间：2012-11-08T09:30:14.593
> 
> 标签：javascript, jquery, xml, ajax

> **可能重复：**
> [一直说未定义结果属性。为什么？](https://stackoverflow.com/questions/13285770/keeps-saying-result-property-is-not-defined-why)

我正在解析 xml，我想要的是在解析后返回 xml。问题是在我的`getResult()`函数`result`中有一个值`undefined`。为什么以及如何使它工作？

这是我的代码

```
var result  = '';

var Xml = {
to      : null,
from    : null,
url     : null,

init: function (fromaddress, toaddress, link) {
    from    = fromaddress;
    to      = toaddress;
    url     = link;

    this.requestXml();
    return this;
},

requestXml: function () {
    $.ajax({
        type: "GET",
        url: url,
        dataType: "xml",
        success: this.parseXml
    });
},

parseXml: function (xml) {
    console.log('xml: ' + $(xml));
    result = $(xml);
},

getResult: function () {
    console.log('Result: ' + Xml.result); //<--- Here result has undefined value
    return result;
}
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:36:44.913

Xml.result 永远不会被设置。也许我遗漏了一些东西，但是您需要在 parseXml 中执行此操作才能设置其结果字段：

```
this.result = $(xml); 
```

在 getResult 中，您的 console.log 调用不应显示未定义。你甚至可以让它返回`this.result`。

另一件事，在您的初始化程序中，您应该使用“this”关键字设置每个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:25:34.487

这是我解决问题的方法

```
var Xml = function () {
var to, from, url, result,

    init = function (fromaddress, toaddress, link, callback) {
        from    = fromaddress;
        to      = toaddress;
        url     = link;

        requestXml(callback);
    },

    requestXml = function (callback) {
        $.ajax({
            type: "GET",
            url: url,
            dataType: "xml",
            success: callback
        });
    },

    getResult = function () {
        return result;
    };

 return {
    init        : init,
    getResult   : getResult
 };
}; 
```

# c++ - 使用 winapi 或 mfc 从 .NET 应用程序列表控件中获取项目名称

> ID：13286178
> 
> 赞同：5
> 
> 时间：2012-11-08T09:30:17.750
> 
> 标签：c++, winapi, mfc

所以基本上我有这个以列表形式输出数据的软件。感谢这里的评论，我们了解到它很可能是用 .NET 编写的。

我想扫描列表，这样我就可以对数据做一些算法。

使用 Spy++，我发现保存此列表的标题为“Panel2”，我可以使用 EnumChildWindows 获取此列表的句柄（其类为“WindowsForms10.Window.8.app”）。

但是我不知道如何进入列表本身，所以我可以阅读它的项目。我已经在“Panel2”句柄上尝试了 EnumChildWindows 并输出了所有这些窗口的标题，但它们都是空的。

panel2 可以是实际列表吗？如果是这样，我可以将其转换为 (CListCtrl*) 吗？

Axilles 在评论中提到它可能是用 .NET 编写的，是否可以使用[http://reflector.red-gate.com/download.aspx?TreatAsUpdate=1](http://reflector.red-gate.com/download.aspx?TreatAsUpdate=1)之类的东西来获取列表的 controlID / 句柄？

```
 CWnd* mainWindow;
    CWnd* panel;
    CListCtrl* list;

BOOL CALLBACK findWindow( HWND hwnd,LPARAM lParam)
{
    char text[8];
    GetWindowText(hwnd,text,8);

    if(strcmp(text,"Fetcher") == 0)
    {
        mainWindow= CWnd::FromHandle(hwnd);

        return false;
    }

    return true;
}

BOOL CALLBACK findPanel(HWND hwnd,LPARAM lParam)
{

    char text[7];
    GetWindowText(hwnd,text,7);

    if(strcmp(text,"Panel2") == 0)
    {
        panel = CWnd::FromHandle(hwnd);

        return false;
    }

    return true;
}

void CAnalyzeDlg::OnBnClickedButton1()
{
    mainWindow = 0;

    while(mainWindow == 0)
    {
    ::EnumWindows(findWindow,0);
    }

    mainWindow ->ActivateTopParent();

    while(panel == 0) ::EnumChildWindows(mainWindow ->m_hWnd,findPanel,0);

    CWnd* pointTest = NULL;

    CString text = "";

    int xx = 337;
    int yy = 95;

    while(yy < 1024 && (pointTest == NULL || strcmp(text,"") == 0 || strcmp(text,"Panel2") == 0))
    {
        pointTest = mainWindow->ChildWindowFromPoint(CPoint(xx,yy));
        yy++;
        if(pointTest != 0)
            pointTest->GetWindowTextA(text);
    }

    if(strcmp(text,"") != 0)
        MessageBox(0,text,0); // This never shows

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T18:48:21.073

Spy++ 是一个出色的工具，但它不支持 .Net。我建议在应用程序上尝试 UISpy.exe 以查看它能够找到比 Spy++ 更多的元素。UISpy.exe 可以在[http://msdn.microsoft.com/en-us/library/ms727247.aspx](http://msdn.microsoft.com/en-us/library/ms727247.aspx)找到，还有 ManagedSpy.exe [http://msdn.microsoft.com/en-us/magazine/ cc163617.aspx](http://msdn.microsoft.com/en-us/magazine/cc163617.aspx)

您可以通过将调试器附加到应用程序来确定应用程序是否是 .Net 应用程序（Visual Studio 或 WinDBG；如果您还没有 Visual Studio，我建议您使用免费版本的 VC++，因为我没有确保 C# 版本具有本机调试支持）。另一种选择是使用 Windows 平台 SDK 中的depends.exe，甚至只是[http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)中的 ProcessExplorer.exe来查看哪些 DLL 加载到进程中（即.Net 应用程序将加载核心 .Net DLL）。

如果该列表实际上是一个 Windows Presentation Forms (WPF) 列表，您可能必须利用 .Net UIAutomation 类来访问列表的内容。UIAutomation 记录在这里：http: [//msdn.microsoft.com/en-us/library/ms747327.aspx](http://msdn.microsoft.com/en-us/library/ms747327.aspx)

**编辑：**根据 MSDN 文档，UISpy.exe 现在已过时：

> 注意 Accessible Explorer 和 UI Spy 工具已过时且不再可用。开发人员应改为使用 Inspect 或 AccScope。

# google-maps-api-3 - RouteBoxer 不工作

> ID：13286181
> 
> 赞同：0
> 
> 时间：2012-11-08T09:30:23.293
> 
> 标签：google-maps-api-3

使用单击功能创建多段线。我正在使用 RouteBoxer 实用程序沿这条折线创建一组框。我已经用一个警告框测试了 drawBoxes 函数，它正在工作，但这些框没有出现。我想我错过了一些东西。有小费吗？

```
(function() {
    window.onload = function() {

        var places = [];
        var path;
        var string = "";
        var para = document.getElementById("para");
        var map = null;
        var boxpolys = null;
        var directions = null;
        var routeBoxer = null;
        var distance = null;

        //create reference to div tag in HTML file
        var mapDiv = document.getElementById('map');

        // option properties of map

        var options = {

                center: new google.maps.LatLng(-20.2796, 57.5074),
                zoom : 16,
                mapTypeId: google.maps.MapTypeId.ROADMAP

        };

        // create map object
        var map = new google.maps.Map(mapDiv, options);

        // create MVC array to populate on click event
        var route = new google.maps.MVCArray();

        var polyline = new google.maps.Polyline({
            path: route,
            strokeColor: '#ff0000',
            strokeOpacity: 0.6,
            strokeWeight: 5
        });

        polyline.setMap(map);

        // create click event,attach to map and populate route array

        google.maps.event.addListener(map,'click', function(e) {

            // create reference to polyline object
             path = polyline.getPath();

             // add the position clicked on map to MVC array
            path.push(e.latLng);

        });

        $('#compute').click(function() {

                routeBoxer = new RouteBoxer();
                distance = parseFloat((0.1) * 1.609344);
                var boxes = routeBoxer.box(polyline,distance);
                drawBoxes(boxes);

        });     

    };

})();

 // Draw the array of boxes as polylines on the map
    function drawBoxes(boxes) {
        alert('working in function');

      boxpolys = new Array(boxes.length);
      for (var i = 0; i < boxes.length; i++) {

        boxpolys[i] = new google.maps.Rectangle({
          bounds: boxes[i],
          fillOpacity: 0,
          strokeOpacity: 1.0,
          strokeColor: '#000000',
          strokeWeight: 3,
          map: map
        });
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:55:14.193

你的`var map`需要是全局的，否则从内部是不可见的`function drawBoxes()`。

将声明移到函数外。

```
var map;

(function() {
    window.onload = function() {

        var places = [];
        var path;
        var string = "";
        var para = document.getElementById("para");

        var boxpolys = null;
        var directions = null;
        var routeBoxer = null;
        var distance = null;

        //create reference to div tag in HTML file
        var mapDiv = document.getElementById('map');

        // option properties of map

        var options = {

                center: new google.maps.LatLng(-20.2796, 57.5074),
                zoom : 16,
                mapTypeId: google.maps.MapTypeId.ROADMAP

        };

        // create map object -
        //============== no 'var' keyword here ======================
        map = new google.maps.Map(mapDiv, options);

        ... etc ... 
```

# c++ - 在 C++ 中按值或按引用传输参数？

> ID：13286182
> 
> 赞同：0
> 
> 时间：2012-11-08T09:30:37.910
> 
> 标签：c++, parameters, pass-by-value, pass-by-const-reference

> **可能重复：**
> [按引用传递比按值传递更昂贵](https://stackoverflow.com/questions/2108084/pass-by-reference-more-expensive-than-pass-by-value)

我想知道哪个更好，在 C++ 中按值或按引用发送参数。我听说有些情况下按值发送比按引用发送更快。这些是哪些案例？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:38:02.210

显而易见的情况是，当参数的大小等于或小于指针*并且复制起来很简单时*——那么您将按值传递。然而，这是一个古老的讨论，需要很长的答案才能正确回答给定的架构。还有许多极端情况（例如 RVO）。

这个问题比速度更重要——语义应该是你的首要任务。

另请参阅：[在 C++ 中通过值传递还是通过常量引用传递更好？](https://stackoverflow.com/questions/270408/is-it-better-in-c-to-pass-by-value-or-pass-by-constant-reference/270435#270435)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:27:31.067

作为一般规则，您应该通过值传递 POD 类型，通过 const 引用传递复杂类型。

也就是说，按值传递复杂类型的好地方是无论如何都需要函数内部的对象副本。在这种情况下，您有两个选择：

*   将参数作为 const 引用传递并在函数内创建本地副本

*   按值传递参数（编译器创建本地副本）。

第二种选择通常更有效。例如，请参阅[copy&swap idiom](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)。

# php - Zend 框架添加路由

> ID：13286183
> 
> 赞同：0
> 
> 时间：2012-11-08T09:30:41.350
> 
> 标签：php, zend-framework

我需要将路由添加到 Zend 框架应用程序。

我想显示数据库中目录 = 控制器名称的所有帖子

```
domain.com/action 
domian.com/drama
domain.com/thriller 
```

我怎样才能做到这一点 ？我浏览了 ZF Routes 文档。但发现没有解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T02:47:25.750

这可以使用 bootstrap.php 文件中的 addRoute() 方法来完成

```
// Retrieve the front controller from the bootstrap registry
$FrontController = $this->getResource('FrontController');
$router = $FrontController->getRouter();

$router->addRoute('genre', 
                  new Zend_Controller_Router_Route(
        ':genre',array( 'controller' => 'index' , 'action' => 'index'  )) ); 
```

在控制器中获取流派

```
echo $this->getRequest()->getParam('genre') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:12:20.483

为了能够做到这一点，您必须在您的 application.ini 中添加类似的内容

```
resources.router.routes.category.type = "Zend_Controller_Router_Route"
resources.router.routes.category.route = ":category"
resources.router.routes.category.defaults.module = "default"
resources.router.routes.category.defaults.controller = "index"
resources.router.routes.category.defaults.action = "index" 
```

这样，所有与有效控制器不匹配的内容都将被定向为索引控制器索引操作中的类别参数。请记住处理无效的类别名称并触发 404。

另外，这里有一篇关于[application.ini 中技巧和技巧的好文章](http://www.iostream.eu/zend-framework-application-ini-cheat-sheet/)

# tcl - 命名空间内的 TclOO 类：调用命名空间过程会出错

> ID：13286190
> 
> 赞同：3
> 
> 时间：2012-11-08T09:31:03.377
> 
> 标签：tcl

我正在对来自 Tcl8.6 和 Rivet 的 TclOO 进行一些试验，但我遇到了麻烦，因为我无法做我想做的事。

使用文件中的以下代码可以简单地重现该问题`.rvt`：

```
<?

proc dumbproc {} {
    puts "this is dumbproc ([namespace current])"
}

oo::class create foo {
    method bar {} {
        puts "this is bar ([namespace current])"
        dumbproc
    }
}

set obj [foo new]

dumbproc

$obj bar 
```

如果我只是看一下代码，它似乎应该按预期工作，但实际上并没有，因为 Rivet 包的微妙行为和选择的特定配置。

在此示例中，我使用了一个`.rvt`文件，其代码在`::request`命名空间内执行，因此该`dumbproc`过程的完全限定名称是`::request::dumbproc`. 当在方法内部调用名称解析算法时`bar`，它先搜索`dumbproc`inside `::oo::Obj12`，然后搜索 in `::oo`，最后搜索 in `::`，但没有找到并给出以下错误。

```
this is dumbproc (::request) this is bar (::oo::Obj16)

invalid command name "dumbproc"
    while executing
"dumbproc"
    (class "::request::foo" method "bar" line 3)
    invoked from within
"$obj bar"
    (in namespace eval "::request" script line 21)
    invoked from within
"namespace eval request {
puts -nonewline ""

    proc dumbproc {} {
        puts "this is dumbproc ([namespace current])"
    }

    oo::class create..." 
```

所以，Tcl做它所做的事情是*正确的，那就是一个**特性*。但是这种行为是*不可预测*的，因为当你编写一些类代码时，你必须知道它将被使用的上下文。

事实上，如果我放弃启动`<?`Rivet 魔法，将代码放在`test.tcl`文件中并在交互式会话中使用它，我会得到同样的错误：

```
$ tclsh
% namespace eval ::myns {source test.tcl}
this is dumbproc (::myns)
this is bar (::oo::Obj12)
invalid command name "dumbproc" 
```

我试图通过将当前命名空间添加到类创建代码来解决这个问题

```
::oo::class create [namespace current]::foo { ... } 
```

然后，我还尝试`obj`在命名空间内创建对象

```
::oo::class create [namespace current]::foo { ... }
namespace eval [namespace current] {set obj [[namespace current]::foo new]} 
```

然后，我切换到`create`类的方法，为对象提供一个包含命名空间的限定名称

```
foo create [namespace current]::obj
obj bar 
```

但一切都没有成功。每次试验都表明，无论我怎么做，TclOO 类中的方法总是在其对象唯一命名空间内执行。我错了吗？

有没有办法得到我想要的？TclOO 是否不打算以这种方式工作，在这种情况下为什么呢？真正让我惊讶的是这种依赖于上下文的行为，我不确定这是不是正确的事情，但也许我完全错了，并且有一些合理的案例，我错过了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T11:24:27.853

每个 TclOO 对象的内部实际上是它*自己的*命名空间。您可以在您的方法中使用`self namespace`or来获取命名空间的名称，或者从任何地方获取命名空间。默认情况下放置在命名空间中的唯一命令是（用于调用私有方法），并且其他命名空间中的某些命令通过标准 Tcl机制可用（这是您获取和可用的方式）。`namespace current``info object namespace $theobj``my``namespace path``self``next`

解决此问题的最简单方法可能是将其添加到`foo`类的构造函数中：

```
namespace path [list {*}[namespace path] ::request] 
```

在您的特定情况下，您必须实际添加一个构造函数......

```
constructor {} {
    namespace path [list {*}[namespace path] ::request]
    # If you had a non-trivial constructor in a superclass, you'd need to call
    # [next] too.
} 
```

从长远来看，要求一种机制来添加名称空间列表可能是合理的，这些名称空间用于为类的对象设置默认值。如果您愿意，请提交[功能请求](https://sourceforge.net/tracker/?func=add&group_id=10894&atid=360894)……</p>

* * *

[编辑]：如果您只是在将父命名空间添加到当前对象的命令解析路径之后，您可以通过添加更多魔法来做到这一点：

```
oo::class create foo {
    self {
        method create args {
            set ns [uplevel 1 {namespace current}]
            next {*}[linsert $args 1 $ns]
        }
        method new args {
            set ns [uplevel 1 {namespace current}]
            next {*}[linsert $args 0 $ns]
        }
    }
    constructor {creatorNS args} {
        namespace path [list {*}[namespace path] $creatorNS]
    }
    method bar {} {
        puts "this is bar ([namespace current])"
        dumbproc
    }
} 
```

然后，这将自动将当前命名空间置于实例路径上。如果您在许多类中这样做，您可能希望创建一个包含大部分机器的元类，但上述技术（在类对象本身上`self` *声明*一些方法`foo`）适用于简单的情况。

# c++ - libxml - 获取属性

> ID：13286191
> 
> 赞同：0
> 
> 时间：2012-11-08T09:31:04.080
> 
> 标签：c++, xml, libxml2

我正在使用 LibXML。我使用 xml 文件：

```
<all>
<material name1= "AS4C" name2="IPS06"/>
    <associated name1="IMA_1" name2="IPS05"/>
    <associated name1="IMA_2" name2="IPS05"/>
    <associated name1="IMA_3" name2="IPS05"/>
    <associated name1="AS4C" name2="IPS05"/>
    <associated name1="AS3C" name2="IPS05"/>
<material />

<material name1="IMA_1" name2="IPS06"/>
    <associated name1="IMA_1" name2="IPS05"/>
    <associated name1="AS4C" name2="IPS05"/>
    <associated name1="HTA_M" name2="IPS05"/>
    <associated name1="IMA_M21E" name2="IPS05"/>
<material />
</all> 
```

我正在尝试检查例如**关联的 name1="IMA_3" name2="IPS05"/ 是否**存在于**材料 name1= "AS4C" name2="IPS06"/**中。但是结果是空的（xmlXPathNodeSetIsEmpty(result->nodesetval) 我认为路径不正确。

```
string s_mat1 = "AS4C";
string s_spec1 = "IPS06";
string s_mat2 = "IMA_3";
string s_spec2 = "IPS05";
sPath <<  "/all/material[@name1=\"" << s_mat1 << "\"][@name2=\"" << s_spec1 << "\"]/associated[@name1=\"" << s_mat2 << "\"][@name2=\"" << s_spec2 << "\"]";
result = xmlXPathEvalExpression((xmlChar *) sPath.str().c_str(), ctxt);
if(xmlXPathNodeSetIsEmpty(result->nodesetval)){
    cout << "empty" << endl;
}
if (result->type == XPATH_NODESET) {

        xmlNodePtr matNode = result->nodesetval->nodeTab[0];
        xmlChar *matNode2 = xmlNodeGetContent(matNode);

        struct _xmlAttr* matAttr = matNode->properties;

        while (matAttr) {
            cout << "matAttr :" << string((char *)matAttr->name) << endl;
            if (string((char *)matAttr->name)=="name1" && matAttr->children){
                string name1= string((char *)matAttr->children->content);
                cout << "___ name1==" << name1<< endl;

                xmlChar* value = xmlNodeListGetString(matNode->doc, matAttr->children, 1);
                cout << "value ==" << string((char *)value)  << endl;

            }
            else if (string((char *)matAttr->name)=="name2"){
                string name2= string((char *)matAttr->children->content);
                cout << "___ name2==" << name2<< endl;
            }
            matAttr = matAttr->next;
        }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:57:12.743

不确定是否不是另一个错字（但会更不寻常），但您的 xml 数据不适合您的查询。我猜你的 xml 文件不是你真正想要的，而是应该是：

```
<material name1= "AS4C" name2="IPS06">
    <associated name1="IMA_1" name2="IPS05"/>
    <associated name1="IMA_2" name2="IPS05"/>
    <associated name1="IMA_3" name2="IPS05"/>
    <associated name1="AS4C" name2="IPS05"/>
    <associated name1="AS3C" name2="IPS05"/>
</material>

<material name1="IMA_1" name2="IPS06">
    <associated name1="IMA_1" name2="IPS05"/>
    <associated name1="AS4C" name2="IPS05"/>
    <associated name1="HTA_M" name2="IPS05"/>
    <associated name1="IMA_M21E" name2="IPS05"/>
</material>
</all>; 
```

请注意，在您的示例中，`material`and`associated`节点是兄弟姐妹，但现在`associated`是`material`.

# android - 从应用程序安装程序 (OS) 打开 Android 应用程序

> ID：13286192
> 
> 赞同：1
> 
> 时间：2012-11-08T09:31:10.710
> 
> 标签：android, android-install-apk

我的应用程序中有一个小问题，这只是第一次发生。当我直接从包安装程序应用程序打开应用程序时，该应用程序显示一个对话框，其中包含一条带有取消和打开按钮的消息“运行应用程序”，然后当我尝试从最近的应用程序列表中打开同一个应用程序时，状态不会保存。

我在下面通过重现步骤来解释上述场景。

1.  从链接下载应用程序。
2.  单击 apk 文件以安装应用程序。
3.  安装后，应用程序安装程序将显示一个对话框以打开应用程序。
4.  单击打开按钮运行应用程序。
5.  导航到某个活动并通过单击主页按钮将其最小化。
6.  尝试从最近的应用程序列表或应用程序菜单中打开相同的应用程序。
7.  在这两种情况下，用户都会再次导航到启动画面，并且不会维护应用程序的状态。

它运行良好，并且从下一次开始以预期的方式保存状态。

许多官方应用程序都存在同样的问题，但很少有应用程序以预期的方式工作。

谁能告诉我解决此问题的解决方案。

# objective-c - 我怎样才能在一个线程中调用很多方法？

> ID：13286197
> 
> 赞同：2
> 
> 时间：2012-11-08T09:31:26.763
> 
> 标签：objective-c, ios, multithreading, grand-central-dispatch

我有一个连接方法。我想在线程中使用它，因为它需要很长时间。但是这种方法会触发其他许多方法，所以我会收到类似上面的错误消息。

* **_WebThreadLockFromAnyThread(bool), 0x94316f0：从主线程或web线程以外的线程获取web lock。不应从辅助线程调用 UIKit。***

我的代码是：

```
 __weak LoginViewController *weakSelf = self;
    dispatch_queue_t connectionQueue = dispatch_queue_create("connection Queue", NULL);
    dispatch_async(connectionQueue, ^{
        [weakSelf connect];
        dispatch_async(dispatch_get_main_queue(), ^{
            [spinner stopAnimating];
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:38:07.517

`UIAlertView`像,这样的UIKit 组件`UIActivityIndicator`不能在主线程以外的线程中使用。如果要显示警报/活动，则必须仅在主线程中显示/关闭或启动/停止。

我认为您正在调用`[spinner stopAnimating];`一个不是主线程的线程。如果是这样，那么在主线程中执行此操作。

```
[self performSelector:@selector(stopAnimation) onThread:[NSThread mainThread] withObject:nil waitUntilDone:NO]; 
```

# coq - Coq 中的相互递归函数和终止检查器

> ID：13286198
> 
> 赞同：4
> 
> 时间：2012-11-08T09:31:27.483
> 
> 标签：coq, totality

**编辑**

```
Require Import Bool List ZArith.
  Variable A: Type.
    Inductive error :=
    | Todo.
    Inductive result (A : Type) : Type :=
        Ok : A -> result A | Ko : error -> result A.
    Variable bool_of_result : result A -> bool.
    Variable rules : Type.
    Variable boolean : Type.
    Variable positiveInteger : Type.
    Variable OK: result unit.
    Definition dps := rules.
    Inductive dpProof := 
      | DpProof_depGraphProc : list 
       (dps * boolean * option (list positiveInteger) * option dpProof) -> dpProof.
    Fixpoint dpProof' (R D: rules) (p: dpProof) {struct p}:=
    match p with
      | DpProof_depGraphProc cs => dpGraphProc R D cs
     end   
   with dpGraphProc (R D: rules ) cs {struct cs} :=
    match cs with
    | nil => Ko unit Todo
    | (_, _, _, op) :: cs' => 
      match op with
       | None => Ko unit Todo
       | Some p2 => dpProof' R D p2
      end
 end. 
```

我收到一条错误消息：递归调用 dpProof 的主要参数等于

```
"p2" instead of "cs'".
Recursive definition is:
"fun (R D : rules)
   (cs : list
           (dps * boolean * option (list positiveInteger) *
            option dpProof)) =>
 match cs with
 | nil => Ko unit Todo
 | (_, _, _, Some p2) :: _ => dpProof' R D p2
 | (_, _, _, None) :: _ => OK
 end". 
```

如果我不使用相互递归并使用嵌套固定点，它将结合并通过终止检查器。这是成功组合的代码。

```
Fixpoint dpProof' (R D: rules) (p: dpProof) {struct p}:=
      match p with
      | DpProof_depGraphProc cs =>
        match cs with
          | nil => Ko _ Todo
          | (_, _, _, op) :: cs' => 
            match op with
              | None => Ko unit Todo
              | Some p2 => dpProof' R D p2
            end
        end end. 
```

我想更深入地了解它无法通过终止检查的原因？是因为他们无法猜测参数递减吗？有什么方法可以使用相互递归来表达我的功能`dpGraphProc`？

另外我如何编写`dpGraphProc`检查整个列表的函数？这里的说法不知怎么用`cs'`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T12:13:31.307

相互递归将与单个归纳数据类型一起使用，或者与在单个归纳定义中一起定义的不同归纳数据类型一起使用。在您的情况下，您使用的是在 dpProof 之前已经定义的多态数据类型 prod（对的类型）、列表和选项。

嵌套固定点方法没有限制。

# silverlight - 在silverlight mvvm中将表单子窗口导航到用户控件/父窗口

> ID：13286200
> 
> 赞同：0
> 
> 时间：2012-11-08T09:31:43.763
> 
> 标签：silverlight, mvvm

在我的项目中，我有一个疑问.. 如何从子窗口导航到父窗口？我不需要传输数据。Childwindow--> Button[点击]

如果我单击子窗口中的按钮，它将导航到子窗口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:47:21.783

如果您有一个**复杂的应用程序，您很可能需要在应用程序的多个模块之间传输信息，并且需要使用****MVVM**保持松散耦合，我建议您查看**Prism 框架**。

我推荐在[http://www.pluralsight.com/](http://www.pluralsight.com/)上有完整的 Prism 课程。

我还建议在 [http://www.microsoft.com/en-us/download/details.aspx?id=28950上下载棱镜](http://www.microsoft.com/en-us/download/details.aspx?id=28950)

尝试一下，看看如何在不同的视图和模块之间传输信息。

# java - JSF 欢迎文件未正确重定向

> ID：13286202
> 
> 赞同：0
> 
> 时间：2012-11-08T09:31:49.107
> 
> 标签：java, jsf-2

我无法正确设置我的应用程序欢迎文件以正确重定向到我的 home.xhtml 我试图在 SO 中搜索，但我似乎无法让它工作..对不起..

在我的 web.xml 中，我有这些

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

我的 index.jsp 有这个

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:jsp="http://java.sun.com/JSP/Page"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
<head>
<title>My App</title>
</head>
<body>
    <c:redirect url="/faces/pages/home.xhtml"></c:redirect>
</body>
</html> 
```

当我访问我的应用程序时：

```
http://localhost:8080/myApp 
```

我什么也没得到，也没有重定向。

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:50:46.173

您在 JSP 中使用 Facelets XML 命名空间语法。这行不通。使用 JSP`@taglib`语法。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html>
<html>
<head>
<title>My App</title>
</head>
<body>
    <c:redirect url="/faces/pages/home.xhtml"></c:redirect>
</body>
</html> 
```

如果您已经通过右键单击浏览检索到的 HTML 输出并在 webbrowser 中*查看源代码*，那么您应该已经注意到 JSTL XML 命名空间和标记根本没有被解析，并且在 HTML 输出中看起来很普通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:35:35.497

有时列表中也需要有一个 index.jsf。

# android - 在 Android 中单击加载微调器外部时隐藏加载微调器

> ID：13286204
> 
> 赞同：7
> 
> 时间：2012-11-08T09:31:56.437
> 
> 标签：android, spinner

我正在使用带有一组项目的加载微调器动画。如果您单击它的外部，那么它应该会消失。有人知道怎么做这个吗？

![微调器](../Images/de22ddd2e4a0c1db187dc90ebe63bad7.png)

我试过这个。它正在与`EditText`. 但这不起作用`Spinner`

```
@Override
public boolean dispatchTouchEvent(MotionEvent event) {
    View view = getCurrentFocus();
    boolean ret = super.dispatchTouchEvent(event);

    if (view instanceof EditText||view instanceof Spinner) {
        View w = getCurrentFocus();
        int scrcoords[] = new int[2];
        w.getLocationOnScreen(scrcoords);
        float x = event.getRawX() + w.getLeft() - scrcoords[0];
        float y = event.getRawY() + w.getTop() - scrcoords[1];

        if (event.getAction() == MotionEvent.ACTION_UP 
 && (x < w.getLeft() || x >= w.getRight() 
 || y < w.getTop() || y > w.getBottom()) ) { 
            InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(getWindow().getCurrentFocus().getWindowToken(), 0);
        }
    }
 return ret;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:17:08.807

我个人所做的是创建一个自定义来做同样的事情`AlertDialog`。`setSingleChoiceItems()`然后我用`setCanceledOnTouchOutside()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:11:28.897

有`Dialog` [链接的解决方案](https://stackoverflow.com/questions/8384067/how-to-dismiss-the-dialog-with-click-on-outside-of-the-dialog/8384124#8384124)

那么为什么不尝试创建一个看起来像微调器的自定义对话框（[简单示例）？](http://www.mkyong.com/android/android-custom-dialog-example/)使用单选按钮为您的对话框创建一个布局文件。

当用户单击单选按钮时，`dialog.dismiss()`接下来调用并执行必要的代码

# google-analytics - 报告中未显示事件跟踪

> ID：13286208
> 
> 赞同：0
> 
> 时间：2012-11-08T09:32:04.940
> 
> 标签：google-analytics

我正在设置一个 Javascript 计时器，以仅使用以下事件跟踪代码来获取一页的现场时间：

```
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

当我检查“网络”选项卡时，有到 GA 的传出 ping，但在 GA 中，没有报告。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:39:10.760

网页中的 Google Analytics（分析）代码通常由两部分组成：

1.  `ga.js`从 google-analytics.com加载分析代码的代码
2.  用于设置分析帐户并指定要跟踪的内容的代码。

您显示的代码只是加载的第一部分`ga.js`。你错过了告诉谷歌分析做什么/跟踪的代码——比如

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXX-X']);
_gaq.push(['_trackPageview']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:54:37.713

事实证明，在事件跟踪开启之前，我只需要等待一段时间。显然，对于 GA，时间变化很大。

# xslt - Xslt 表达式 [.=

> ID：13286212
> 
> 赞同：1
> 
> 时间：2012-11-08T09:32:33.950
> 
> 标签：xslt

我这里有一个小的 XSLT 代码，但我不理解其中一个表达式，而且我的一个附加值也不起作用。

这是我所拥有的：

```
 <xsl:choose>
     <xsl:when test="contentclass[. = 'STS_ListItem_DocumentLibrary'] and {imageurl/@imageurldescription} = 'Web Page'">
        <div class="srch-Icon" id="{concat($currentId,'_Icon')}">
            <img align="absmiddle" src="/_layouts/images/itdl.png" border="0" alt="Document Library" />
        </div>
     </xsl:when>
     <xsl:otherwise>
         <div class="srch-Icon" id="{concat($currentId,'_Icon')}">
          <img align="absmiddle" src="{imageurl}" border="0" alt="{imageurl/@imageurldescription}" />
        </div>   
      </xsl:otherwise> 
```

基本上如你所见，这个表达式是什么意思 => "[.="？

其次，这确实有效，有人知道为什么吗？

```
{imageurl/@imageurldescription} = 'Web Page' 
```

为什么问题会存在？该值存在 100%，因为默认调用它有效（否则我确实在那里获得价值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:46:53.313

`{ }`围绕普通元素的属性中的表达式将使 XSLT 引擎对其进行评估，而不是将其视为文本。在控制元素 ( `<xsl:...`) 上的大多数属性中，不需要大括号，如果包含它们会出现语法错误。

该部分的意思是：只要其内容为，就`contentclass[. = 'STS_ListItem_DocumentLibrary']`匹配所有子元素。它相当于：`contentclass``"STS_ListItem_DocumentLibrary"``contentclass = 'STS_ListItem_DocumentLibrary'`

**阅读更多：**

*   [XSLT 1.0：属性值模板](http://www.w3.org/TR/xslt#attribute-value-templates)

# asp.net - asp.net中如何调用页面中的用户控件方法

> ID：13286217
> 
> 赞同：1
> 
> 时间：2012-11-08T09:32:55.447
> 
> 标签：asp.net

我在 Usercontrol.ascx 中有以下方法

```
public void Flasmessage()
{
    popupmessage2.Visible = true;
    string strScript = "HideCtrl('" + popupmessage2.ClientID + "','15000')";

    Page.ClientScript.RegisterStartupScript(
      this.GetType(),
      Guid.NewGuid().ToString(),
      strScript,
      true);
} 
```

我需要从另一个 Page 和另一个 Usercontrol.ascx 调用以下方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:38:24.313

您需要在页面上获取对 UserControl 实例的引用，然后调用该方法，如下所示：

```
void Page_Load() {

    // do this if your control does not exist in your *.aspx file and needs to be manually added:
    MyUserControl control = (MyUserControl)LoadControl("MyUserControl.ascx");
    this.Controls.Add( control );

    // do this if your control already exists in your page as a named control
    MyUserControl control = (MyUserControl)FindControl("myUserControl");

    // do this in both cases, or if your UserControl exists as a field in your *.aspx-generated page class.
    control.MyMethod();

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T09:47:30.907

在 UserControl 中公开该方法，例如：

```
public int Calculate()
{

} 
```

然后在页面中调用它如下

```
int total = MyControl.Calculate(); 
```

# lotus-notes - 在 Lotusscript 中模拟文档锁定

> ID：13286220
> 
> 赞同：-1
> 
> 时间：2012-11-08T09:33:17.140
> 
> 标签：lotus-notes, lotus-domino, lotusscript, agents, background-agents

在我的 Lotus Notes 应用程序中，当用户单击一个操作时，该操作将调用一个运行在服务器上的代理，该代理将处理当前文档。调用的代理有时不会运行（我认为这是因为服务器的并发代理限制）。这就是为什么每 5 分钟会有一个维护代理运行到已处理的文档，而这些文档未被调用的代理处理。问题是，有时，这两个代理同时处理一个文档，产生不可接受的结果。

有没有一种方法可以模拟文档锁定，使得文档一次只能由一个代理处理？我不喜欢使用本机文档锁定，因为可能会出现业务规则问题。我尝试在其中一个代理处理文档时标记文档，然后在完成后清除标志。但是这里的问题是代理仍然有机会同时获取文档引用（可能是由于保存文档的延迟）。

请帮我。谢谢！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:50:32.250

是的，这并不难。创建一个锁定数据库，您可以在其中锁定文档。它们实际上只需要包含被锁定文档的 UNID。

当您的代理开始处理文档时，请检查是否存在锁定文档。如果没有，请创建一个。如果有，请暂时等待或跳过该文档。文档处理完成后，删除锁定文档。

这是微不足道的。当我们还在使用 Notes/Domino 5 时，我什至编写了一个简单的类来处理我的一个应用程序中的文档锁定。下面的代码引用了另一个脚本库中的一些函数和变量，但你明白了。我相信您可以轻松地修改代码以适合您。

```
Option Public
Option Declare
Use "Functions.Globals"

Class DocumentLock
    Private lockdb As NotesDatabase
    Private lockview As NotesView
    Private lockdoc As NotesDocument
    Private lockservername As String
    Private lockdbname As String
    Private lnpdoc As NotesDocument ' Document to lock/unlock

    Public Sub New(doc As NotesDocument)
        me.lockservername = globals.GetValue("LockServer")
        me.lockdbname = AppHomeDir + globals.GetValue("LockDBname")
        If me.lockdb Is Nothing Then
            Set me.lockdb = New NotesDatabase(me.lockservername, me.lockdbname)
        End If
        Set me.lockview = me.lockdb.GetView("LockedDocs")
        Call me.lockview.Refresh()
        Set me.lnpdoc = doc
    End Sub

    Public Sub LockMe()
        Set me.lockdoc = New NotesDocument(me.lockdb)       
        me.lockdoc.Form="Locked"
        me.lockdoc.LockUNID=me.lnpdoc.UniversalID
        me.lockdoc.LockUser= globalcurrentusername 
        me.lockdoc.LockTime=Str(Now())
        me.lockdoc.ClaimNumber = me.lnpdoc.GetItemValue("ClaimNumber")(0)
        me.lockdoc.DocumentForm = me.lnpdoc.GetItemValue("Form")(0)
        Call me.lockdoc.Save(True,True)
    End Sub

    Public Sub UnlockMe()
        Call me.lockview.Refresh()
        Set me.lockdoc = me.lockview.GetDocumentByKey(me.lnpdoc.UniversalID)
        If Not me.lockdoc Is Nothing Then
            Call me.lockdoc.Remove(True)
            Call me.lockview.Refresh()
        End If
    End Sub

    Public Function IsLocked(flagShowInfo As Boolean) As Boolean
        Call lockview.Refresh()
        Set me.lockdoc = me.lockview.GetDocumentByKey(me.lnpdoc.UniversalID)
        If me.lockdoc Is Nothing Then
            me.IsLocked = False
        Else
            me.IsLocked = True
            If flagShowInfo = True Then
                MsgBox "Document locked " & locktext & "." & Chr$(13) & "Please wait a while and try again.."
            End If
        End If
    End Function

    Public Function LockText() As String
        LockText = "by " & LockUserName() & " at " & me.lockdoc.LockTime(0) 
    End Function

    Public Function LockUserName() As String
        Dim lockedby As String
        lockedby = me.lockdoc.LockUser(0)
        If lockedby = globalcurrentusername Then
            LockUserName = "you"
        Else
            LockUserName = lockedby
        End If
    End Function

End Class 
```

# session - 两页之间的 ASP II7 会话为空

> ID：13286222
> 
> 赞同：1
> 
> 时间：2012-11-08T09:33:23.003
> 
> 标签：session, iis, asp-classic, string

我在两页之间有会话空。

一.asp

```
<%
 session("one") ="x"
 response.write session("one") ' this prints out x
 %> 
```

如果我在 one.asp 之后调用 two.asp

二.asp

```
<%
 response.write session("one") ' this prints out nothing
 %> 
```

什么都没有打印出来。这不是缓存问题。实际上，只有当我使用我在 IIS 绑定中设置的新主机名调用页面时才会发生这种情况（我在 windows server 2008 上使用 IIS7）

```
http://newhostname/one.asp and http://newhostname/two.asp 
```

如果我使用我的机器名称

```
http://mymachine/one.asp and http://mymachine/two.asp 
```

一切正常，页面 two.asp 按预期打印出 x

你知道问题可能是什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:29:54.573

打开 IIS 管理器并导航到要管理的级别。有关打开 IIS 管理器的信息，请参阅打开 IIS 管理器 (IIS 7)。有关导航到 UI 中的位置的信息，请参阅 IIS 管理器中的导航 (IIS 7)。

在功能视图中，双击 ASP。在 ASP 页面上的服务下，展开会话属性。

从启用会话状态下拉列表中选择 True。

在“操作”窗格中，单击应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:40:33.297

`two.asp`如果页面在被拉取之前已经闲置了很长时间，那么会话可能已经过期。

如果浏览器已关闭，则会话标识已更改，从而导致会话关闭。

如果这两个页面位于不同的域（包括子域）上，则它们没有相同的会话标识，这会导致会话永远不存在`two.asp`

# gnuplot - gnuplot x 轴值格式

> ID：13286225
> 
> 赞同：2
> 
> 时间：2012-11-08T09:33:33.780
> 
> 标签：gnuplot

我正在尝试使用 gnuplot 创建一个绘图，其中 x 轴上的字节为 range `[4:4194304]`。然而，在 X 上显示字节不是很方便，如果有字节 [1,512)、千字节 [1K,512K)、兆字节 [1M,512M) 等，它看起来会更易读。

我还没有在文档中找到明确的方法来做到这一点。我应该在输入数据文件中显式生成它吗？

最好的问候，亚历克斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T13:24:06.317

如果您可以使用以 10 为底的标签上的数字（例如 1k = 1000，而不是 1k = 1024），这将变得容易得多：

```
set xtics format '%s%c'
#set logscale x 2
set xrange [1:1000**2]
plot log(x) 
```

否则，除了显式设置抽动之外，没有其他好方法：

```
set xtics ( "512" 512, "1k" 1024, "1M" 1048576, "1G" 1073741824 )
set logscale x 2
plot log(x) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T11:38:14.653

您可以使用 进行简单的缩放`using`，例如：

```
plot ... using ($1 / 1024**2):2 
```

# android - 三星 Galaxy S3 上的 TTS 问题

> ID：13286227
> 
> 赞同：7
> 
> 时间：2012-11-08T09:33:38.657
> 
> 标签：android, text-to-speech, samsung-mobile

我正在开发一个使用 TTS 的 android 应用程序。我创建了一个启动画面，我在其中检查是否安装了 TTS 引擎，如果没有安装，它会转到 Google Play 下载它。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
...
    Intent checkIntent = new Intent();
    checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
    startActivityForResult(checkIntent, MY_DATA_CHECK_CODE);
...
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
...
    if (requestCode == PersonalTextToSpeech.MY_DATA_CHECK_CODE)
    {
        if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS)
        {
            mTts = new TextToSpeech(context, this);
        } else
        {
            Intent installIntent = new Intent();
            installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
            context.startActivity(installIntent);
        }
    }
} 
```

它在具有 2.2 和 2.3.x 操作系统的三星设备上运行良好。如果需要，它会转到 Google Play，但现在我尝试使用三星 Galaxy S3（4.1.1），它默认安装了 2 个 TTS（三星和谷歌），所以我得到一个对话框，要求选择一个。

![选择语音合成](../Images/90cb576afdaa9b63b1dc4ea6f16cb957.png)

如果用户选择三星，它工作得很好，但如果用户选择谷歌，它会转到设置 --> 语言和输入 --> 文本到语音输出 --> 谷歌文本到语音引擎 --> 设置 - -> 安装语音数据，我得到了这个： ![已安装 TTS 语言](../Images/66d34fbb739fea616267c241bb077c4e.png)

所以，我有3个问题/问题：

1.  有什么方法可以在不询问的情况下以编程方式强制使用三星 TTS？

2.  我的设备来自西班牙，但如果我将语言更改为英语，这个在我的谷歌 TTS 语言列表中不可用，我找不到添加它的方法（见截图 #2）。

3.  如果我将语言更改为西班牙语，则该语言应该安装在我的设备中（请参见屏幕截图 #2），但由于某种原因，TTS`resultCode`是`LANG_NOT_SUPPORTED (-2)`.

事实上，在我写这篇文章的时候，我刚刚发现了一些奇怪的东西。

如果您选择三星 TTS，它将“工作”（`resultCode`= `CHECK_VOICE_DATA_PASS (1)`），但“声音”会根据您的设置而改变（查看屏幕截图 #3）： ![语音合成设置](../Images/253efadb3137b6d53f6b2ceec481fd60.png)

如果您选择三星，它将根据您在设置 --> 语言和输入 --> 文本到语音输出中选择的内容使用三星 TTS 或 Google TTS。

因此，即使您选择三星 TTS，您也可以使用 Google TTS，但如果您直接选择 Google TTS（请参见屏幕截图 #1），它将失败。

有人可以解释我做错了什么吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-26T07:39:24.053

我也陷入了这个问题，我只是通过替换我的 onActivityResult 中的代码来解决它。我没有检查 TTS 数据，而是检查了可用的声音。

```
 if (availableLanguages.isEmpty()) {
                // no language data available, prompt for install
                Intent installIntent = new Intent();
                installIntent
                        .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installIntent);
            } else {
                // some language data is available, create TTS instance
                myTTS = new TextToSpeech(this, this);
            } 
```

# javascript - 将 JavaScript 函数作为参数传递

> ID：13286233
> 
> 赞同：792
> 
> 时间：2012-11-08T09:34:04.623
> 
> 标签：javascript, function, parameters

如何在没有在“父”函数中执行或使用函数的情况下将函数作为参数传递`eval()`？（因为我读过它是不安全的。）

我有这个：

```
addContact(entityId, refreshContactList()); 
```

它可以工作，但问题是`refreshContactList`在调用函数时触发，而不是在函数中使用它时触发。

`eval()`根据我的阅读，我可以使用它来解决它，但这不是最佳做法。如何在 JavaScript 中将函数作为参数传递？

* * *

## 回答 #1

> 赞同：1100
> 
> 时间：2012-11-08T09:34:56.050

您只需要删除括号：

```
addContact(entityId, refreshContactList); 
```

这然后传递函数而不首先执行它。

这是一个例子：

```
function addContact(id, refreshCallback) {
    refreshCallback();
    // You can also pass arguments if you need to
    // refreshCallback(id);
}

function refreshContactList() {
    alert('Hello World');
}

addContact(1, refreshContactList); 
```

* * *

## 回答 #2

> 赞同：458
> 
> 时间：2014-06-06T23:11:49.890

如果要传递函数，只需按名称引用它，不带括号：

```
function foo(x) {
    alert(x);
}
function bar(func) {
    func("Hello World!");
}

//alerts "Hello World!"
bar(foo); 
```

但有时您可能希望传递一个*包含参数*的函数，但在调用回调之前不要调用它。为此，在调用它时，只需将其包装在一个匿名函数中，如下所示：

```
function foo(x) {
   alert(x);
}
function bar(func) {
   func();
}

//alerts "Hello World!" (from within bar AFTER being passed)
bar(function(){ foo("Hello World!") }); 
```

如果您愿意，也可以使用[apply](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply)函数并使用第三个参数，即参数数组，如下所示：

```
function eat(food1, food2)
{
    alert("I like to eat " + food1 + " and " + food2 );
}
function myFunc(callback, args)
{
    //do stuff
    //...
    //execute callback when finished
    callback.apply(this, args);
}

//alerts "I like to eat pickles and peanut butter"
myFunc(eat, ["pickles", "peanut butter"]); 
```

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2012-11-08T09:38:12.870

示例 1：

```
funct("z", function (x) { return x; });

function funct(a, foo){
    foo(a) // this will return a
} 
```

示例 2：

```
function foodemo(value){
    return 'hello '+value;
}

function funct(a, foo){
    alert(foo(a));
}

//call funct    
funct('world!',foodemo); //=> 'hello world!' 
```

[看这个](https://stackoverflow.com/questions/5752030/passing-a-function-as-an-argument-in-a-javascript-function)

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2012-11-08T09:37:19.533

要将函数作为参数传递，只需删除括号！

```
function ToBeCalled(){
  alert("I was called");
}

function iNeedParameter( paramFunc) {
   //it is a good idea to check if the parameter is actually not null
   //and that it is a function
   if (paramFunc && (typeof paramFunc == "function")) {
      paramFunc();   
   }
}

//this calls iNeedParameter and sends the other function to it
iNeedParameter(ToBeCalled); 
```

这背后的想法是函数与变量非常相似。而不是写

```
function ToBeCalled() { /* something */ } 
```

你不妨写

```
var ToBeCalledVariable = function () { /* something */ } 
```

两者之间存在细微差别，但无论如何 - 它们都是定义函数的有效方法。现在，如果您定义一个函数并将其显式分配给一个变量，这似乎很合乎逻辑，您可以将其作为参数传递给另一个函数，并且不需要括号：

```
anotherFunction(ToBeCalledVariable); 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-11-08T09:39:35.473

JavaScript 程序员中有一句话：“Eval is Evil”，所以要不惜一切代价避免它！

除了史蒂夫芬顿的回答，你也可以直接传递函数。

```
function addContact(entity, refreshFn) {
    refreshFn();
}

function callAddContact() {
    addContact("entity", function() { DoThis(); });
} 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-04-15T09:31:35.223

因为这个问题，我把所有的头发都剪掉了。我不能让上面的例子工作，所以我结束了：

```
function foo(blabla){
    var func = new Function(blabla);
    func();
}
// to call it, I just pass the js function I wanted as a string in the new one...
foo("alert('test')"); 
```

这就像一种魅力......至少对于我需要的东西。希望它可以帮助一些人。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-09-26T17:44:14.013

`.apply()`我建议将参数放在一个数组中，然后使用函数将它们拆分。所以现在我们可以轻松地传递一个带有很多参数的函数并以简单的方式执行它。

```
function addContact(parameters, refreshCallback) {
    refreshCallback.apply(this, parameters);
}

function refreshContactList(int, int, string) {
    alert(int + int);
    console.log(string);
}

addContact([1,2,"str"], refreshContactList); //parameters should be putted in an array 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-01-23T11:29:16.577

你也可以`eval()`用来做同样的事情。

```
//A function to call
function needToBeCalled(p1, p2)
{
    alert(p1+"="+p2);
}

//A function where needToBeCalled passed as an argument with necessary params
//Here params is comma separated string
function callAnotherFunction(aFunction, params)
{
    eval(aFunction + "("+params+")");
}

//A function Call
callAnotherFunction("needToBeCalled", "10,20"); 
```

就是这样。我也在寻找这个解决方案并尝试了其他答案中提供的解决方案，但最终从上面的例子中得到了它。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-01-15T16:14:27.963

这是另一种方法：

```
function a(first,second)    
{        
return (second)(first);           
}     

a('Hello',function(e){alert(e+ ' world!');}); //=> Hello world 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-10-14T09:45:03.833

其实好像有点复杂，其实不然。

get方法作为参数：

```
 function JS_method(_callBack) { 

           _callBack("called");  

        } 
```

您可以作为参数方法给出：

```
 JS_method(function (d) {
           //Finally this will work.
           alert(d)
    }); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-03-23T20:54:26.370

其他答案很好地描述了正在发生的事情，但一个重要的“陷阱”是确保您通过的任何内容确实是对函数的引用。

例如，如果你通过一个字符串而不是一个函数，你会得到一个错误：

```
function function1(my_function_parameter){
    my_function_parameter();   
}

function function2(){
 alert('Hello world');   
}

function1(function2); //This will work

function1("function2"); //This breaks! 
```

见[JsFiddle](https://jsfiddle.net/valgaze/asz3hgbL/)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-02-20T23:50:39.190

有时您需要处理事件处理程序，因此也需要将事件作为参数传递，大多数现代库（如 react、angular）可能需要这个。

我需要通过对 reactjs 的一些自定义验证来覆盖 OnSubmit 函数（来自第三方库的函数），并且我通过了函数和事件，如下所示

起初

```
 <button className="img-submit" type="button"  onClick=
 {onSubmit}>Upload Image</button> 
```

MADE A NEW FUNCTION`upload`并调用传递`onSubmit`和事件作为参数

```
<button className="img-submit" type="button"  onClick={this.upload.bind(this,event,onSubmit)}>Upload Image</button>

upload(event,fn){
  //custom codes are done here
  fn(event);
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-06-28T09:46:42.610

通过使用 ES6：

```
 const invoke = (callback) => {
  callback()
}

invoke(()=>{
  console.log("Hello World");
}) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-11-22T19:19:12.170

如果您可以将整个函数作为字符串传递，则此代码可能会对您有所帮助。

```
convertToFunc( "runThis('Micheal')" )

function convertToFunc( str) {    
  new Function( str )()
 } 
function runThis( name ){
    console.log("Hello", name) // prints Hello Micheal
 }
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2013-05-08T16:18:11.387

您也可以使用 JSON 来存储和发送 JS 函数。

检查以下内容：

```
var myJSON = 
{
    "myFunc1" : function (){
        alert("a");
    }, 
    "myFunc2" : function (functionParameter){
        functionParameter();
    }
}

function main(){
    myJSON.myFunc2(myJSON.myFunc1);
} 
```

这将打印'a'。

下面和上面的效果一样：

```
var myFunc1 = function (){
    alert('a');
}

var myFunc2 = function (functionParameter){
    functionParameter();
}

function main(){
    myFunc2(myFunc1);
} 
```

这也与以下具有相同的效果：

```
function myFunc1(){
    alert('a');
}

function myFunc2 (functionParameter){
    functionParameter();
}

function main(){
    myFunc2(myFunc1);
} 
```

以及使用 Class 作为对象原型的对象范例：

```
function Class(){
    this.myFunc1 =  function(msg){
        alert(msg);
    }

    this.myFunc2 = function(callBackParameter){
        callBackParameter('message');
    }
}

function main(){    
    var myClass = new Class();  
    myClass.myFunc2(myClass.myFunc1);
} 
```

# coded-ui-tests - 如何从现有记录中生成第二个 UImap 中的代码

> ID：13286234
> 
> 赞同：2
> 
> 时间：2012-11-08T09:34:04.693
> 
> 标签：coded-ui-tests

我是 codedUI 的新手，一开始我正在阅读很多关于什么应该是最佳实践的内容。我已经读过，如果您使用的是复杂的应用程序，建议您使用多个 UImap。虽然目前我看不到任何好处，但我已经用两个 UImaps 创建了一个小项目。

在第一个初始设置中（使用初始 UImap 和 CodedUITest1），我可以选择是使用测试构建器还是现有的操作记录来生成代码。我所做的一切都会“进入”初始 UImap。当我创建新的 UI 时，测试生成器会启动，我可以记录一些操作，当我保存它时，它会添加到新创建的 UImap 中，在我的案例中称为 AdvanceSettings。但我无法从现有录音中生成代码。这是为什么？我想根据带有记录的手动测试用例创建自动化测试用例。

下面是我的代码。我对两个 UImap 都使用 CodedUITest1 类。我应该为每个 UImap 使用新类吗？

如果您对代码有一些评论，请写一些。

照我看来。如果您有复杂的应用程序，则使用多个 UImap，以便您可以更轻松地更改某些内容。每个 GUI 元素都有一个 UImap，因此如果该 GUI 上的某些内容发生变化，您只需编辑该 UImap。但是，如果您有一个 UImap 并且使用正确的命名，您也可以轻松替换或重新录制某些方法。所以我错过了具有多个 UImap 的大图。

```
using System;
using System.Collections.Generic;
using System.Text.RegularExpressions;
using System.Windows.Input;
using System.Windows.Forms;
using System.Drawing;
using Microsoft.VisualStudio.TestTools.UITesting;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Microsoft.VisualStudio.TestTools.UITest.Extension;
using Keyboard = Microsoft.VisualStudio.TestTools.UITesting.Keyboard;
using EAEP.AdvanceSettingsClasses;

namespace EAEP
{
    /// <summary>
    /// Summary description for CodedUITest1
    /// </summary>
    [CodedUITest]
    public class CodedUITest1
    {
        public CodedUITest1()
        {
        }

        [TestInitialize]
        public void InitializationForTest()
        {

            this.UIMap.AppLaunch();

        }

        [TestMethod]
        public void MainGUIMethod()
        {
            // To generate code for this test, select "Generate Code for Coded UI Test" from the shortcut menu and select one of the menu items.
            // For more information on generated code, see http://go.microsoft.com/fwlink/?LinkId=179463

            this.UIMap.AssertMethod1();
            this.UIMap.RestoreDefaults();
            this.UIMap.AssertMethod1();

            }

        [TestMethod]
        public void AdvanceSettignsWindowMethod()
        {

            AdvanceSettings advanceSettings = new AdvanceSettings();

            advanceSettings.MoreSettingsReopenedAfterCancel();
            this.UIMap.AssertVerificationAfterCancel();
            advanceSettings.MoreSettingsReopenedAfterOK();
            this.UIMap.AssertVerificationAfterOK();

        }

        #region Additional test attributes

        // You can use the following additional attributes as you write your tests:

        ////Use TestInitialize to run code before running each test 
        //[TestInitialize()]
        //public void MyTestInitialize()
        //{        
        //    // To generate code for this test, select "Generate Code for Coded UI Test" from the shortcut menu and select one of the menu items.
        //    // For more information on generated code, see http://go.microsoft.com/fwlink/?LinkId=179463
        //}

        ////Use TestCleanup to run code after each test has run
        //[TestCleanup()]
        //public void MyTestCleanup()
        //{        
        //    // To generate code for this test, select "Generate Code for Coded UI Test" from the shortcut menu and select one of the menu items.
        //    // For more information on generated code, see http://go.microsoft.com/fwlink/?LinkId=179463
        //}

        #endregion

        public TestContext TestContext
        {
            get
            {
                return testContextInstance;
            }
            set
            {
                testContextInstance = value;
            }
        }
        private TestContext testContextInstance;

        public UIMap UIMap
        {
            get
            {
                if ((this.map == null))
                {
                    this.map = new UIMap();
                }

                return this.map;
            }
        }

        private UIMap map;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:26:53.680

1.  拥有多个 UIMap 可以加快测试执行速度。此外，这使版本、断言、属性和设置变得更加容易。

2.  要为第二个 UIMap 创建测试，您只需右键单击它并按“使用编码的 UI 测试生成器编辑”

关于`But I can not generate code from existing recording. Why is that?`我不知道 - 你是什么意思`can not`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:51:15.827

您不能使用来自现有录制功能的多个 UI 地图。此功能始终在名为 UIMap 的地图中生成代码。我在一篇关于将 specflow 与 Coded Ui 测试集成的博客文章中解释了一些关于这些限制的内容

[http://rburnham.wordpress.com/2011/05/30/record-your-coded-ui-test-methods/](http://rburnham.wordpress.com/2011/05/30/record-your-coded-ui-test-methods/)

如果您想使用 Multiple UIMaps 以获得更好的可维护性，您必须使用此方法

1.  通过右键单击 UIMap 并选择 Coded UI Test Builder 分别记录每个操作。
2.  通过创建一个空白的编码 UI 测试手动将测试连接到操作，更新它引用的 UIMap，然后在测试方法中调用所需的操作来执行测试。

它是一个限制，使 MTM 集成的优点变得毫无意义。

# yii - 如何在 yii 中安装引导扩展

> ID：13286239
> 
> 赞同：2
> 
> 时间：2012-11-08T09:34:44.493
> 
> 标签：yii

我是 yii 的新手，一直在尝试将 bootstrap 和 giiplus 扩展添加到 yii。但是在将提取的文件添加到扩展文件夹并在 main.php 中进行更改后，我什至在显示主页时似乎都无法出错。我跟着这个教程..

[http://www.cniska.net/yii-bootstrap/setup.html](http://www.cniska.net/yii-bootstrap/setup.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-15T12:36:30.590

[从这里](http://www.yiiframework.com/extension/bootstrap/)下载扩展。

粘贴您在 extensions/bootstrap 下下载的所有引导扩展文件夹

# 配置/main.php

在数组开始之前添加 `Yii::setPathOfAlias('bootstrap', dirname(__FILE__).'/../extensions/bootstrap');`

在返回数组下添加

```
'主题'=>'引导程序'，
    '模块'=>数组（
        'gii'=>数组（
            'generatorPaths'=>数组（
                'bootstrap.gii',
            ),                      
        ),
    ),
```

在组件下添加

```
 'bootstrap'=>array(
        'class'=>'bootstrap.components.Bootstrap',
         ), 
```

# 扩展/boostrap/components/Bootstrap.php

在课堂上粘贴代码

```
public function init() {
    $this->registerAllCss();
    $this->registerJs();
    parent::init();
} 
```

# 受保护/视图/布局/main.php

将行粘贴到 head 标签下

```
<?php echo Yii::app()->bootstrap->init();?> 
```

# 按照此链接获取文档

[http://www.cniska.net/yii-bootstrap/](http://www.cniska.net/yii-bootstrap/)

# php - javascript window.open 在 IE 中不起作用

> ID：13286247
> 
> 赞同：4
> 
> 时间：2012-11-08T09:35:32.843
> 
> 标签：php, javascript, jquery, cakephp-2.0

我希望链接在新窗口中打开，但是当我在 IE 中单击 write_review 时，它会在新选项卡中打开。我检查了导致问题的参数中的空格。但这没有问题。

我检查了 URL：- [IE 弹出窗口阻止程序阻止了 JavaScript window.open](https://stackoverflow.com/questions/888964/javascript-window-open-is-blocked-by-ie-popup-blocker)

但它不适合我..

这是我在另一个浏览器中的工作代码。

```
 // Opening pop-up window for the write review
    jQuery('a#write_review').click(function() {
        var w = 1000;
        var h = 650;
        var left = (screen.width/2)-(w/2);
        var top = (screen.height/2)-(h/2);
        var planid=$(this).parent().parent().find('input[name="data[PlanIdsel]"]').val();
        var providerid=$(this).parent().parent().find('input[name="data[ProviderIdsel]"]').val();
        var rep=$(this).parent().parent().find('input[name="data[Repsel]"]').val();
        var url = "<?php echo $this->webroot ?>"+"enrollments/write_rating/"+planid+"?Rep="+rep+"&providerId="+providerid;
        window.open(url, 'subWind', 'status, scrollbars, resizable, dependent, width='+w+', height='+h+', left='+left+', top='+top);
    }); 
```

请指导或纠正我..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T09:49:01.857

检查[这个](https://stackoverflow.com/questions/459024/how-do-you-get-window-open-to-work-in-internet-explorer-7)你如何让 window.open 在 Internet Explorer 7 中工作？

这是在 IE6 中所做的安全更改的一部分。现在您只能从用户发起的事件中调用“window.open”。例如，您的代码将在元素的 onclick 事件中运行。“window.open” MSDN 页面说明了这一点

[关联](http://www.codingforums.com/showthread.php?t=51361)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T10:08:56.740

```
$(document).ready(function(){
  $("a#ID of your link").click(function(){
    var w = 1000;
    var h = 650;
    var left = (screen.width/2)-(w/2);
    var top = (screen.height/2)-(h/2);
    var url = "your url";
    window.open(url, 'subWind', 'status, scrollbars, resizable, dependent, width='+w+', height='+h+', left='+left+', top='+top);
  });
}); 
```

这应该有效。

# asp.net - 位置 Page.Header.Header.Controls.Add

> ID：13286252
> 
> 赞同：0
> 
> 时间：2012-11-08T09:35:57.467
> 
> 标签：asp.net, controls, master-pages

我如何定位我拥有的 Page.Header.Header.Controls.Add 的集合。所以，我希望它们出现在 head 标签之后。后面的代码将更多的控件加载到头部，所以目前所有控件的顺序是非常符合逻辑的。Css、javascript 和 meta 随机定位在 head 标签之间。

例子：

```
 Dim ogtitle As New HtmlMeta
    ogtitle.Name = "og:title"
    ogtitle.Content = sMetaTitle
    Page.Header.Controls.Add(ogtitle) 
```

我想确保它就在头/标题标签之后（可以说是位置 1）：

```
 <head runat="server">
   <title></title>
   <meta property="og:title" content="The Rock" /> 
```

是否有可以添加到 Page.Header.Header.Controls.Add 的属性来定位它？

提前致谢！

马切利诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:46:40.133

尝试使用“AddAt”。例如：

```
Page.Header.Controls.AddAt(2, ogtitle) 
```

我希望这会有所帮助。

卡尔

# api - 在 GE 中设计挤压线

> ID：13286258
> 
> 赞同：0
> 
> 时间：2012-11-08T09:36:17.533
> 
> 标签：api, google-maps, google-earth, google-earth-plugin

问题是我需要更改拉伸线边框的默认颜色和不透明度。这是来自 GE API的[图像。](https://developers.google.com/earth/documentation/images/linestring_example.gif)

所以，我需要自定义线下的灰色“墙”。如何重新设计？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:08:09.843

基本上，您需要为您的功能添加[LineStyle](https://developers.google.com/kml/documentation/kmlreference#linestyle)样式并指定颜色。

多边形颜色指定填充颜色（在多边形区域内），线条颜色指定线条、环和多边形的线条边界。

可以在此处找到 GE API 的示例。 [http://earth-api-samples.googlecode.com/svn/trunk/examples/linestring-style.html](http://earth-api-samples.googlecode.com/svn/trunk/examples/linestring-style.html)

要指定不透明度，您需要在*aabbggrr*格式的代码颜色中设置 alpha 值（FF=完全不透明度），如以下代码片段所示：

```
var lineStyle = placemark.getStyleSelector().getLineStyle();
lineStyle.setWidth(lineStyle.getWidth() + 2);
lineStyle.getColor().set('6600ffff');  // aabbggrr format 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:55:25.790

所以，基本上挤压线的“边框”是一个多边形对象，应该分别设置样式。

下面是来自 GE API 的示例，其中增加了一行和一个新方法***getPolyStyle()***，它为“墙”添加了自定义样式：

```
// Create the placemark
var lineStringPlacemark = ge.createPlacemark('');

// Create the LineString; set it to extend down to the ground
// and set the altitude mode
var lineString = ge.createLineString('');
lineStringPlacemark.setGeometry(lineString);
lineString.setExtrude(true);
lineString.setAltitudeMode(ge.ALTITUDE_RELATIVE_TO_GROUND);

// Add LineString points
lineString.getCoordinates().pushLatLngAlt(48.754, -121.835, 700);
lineString.getCoordinates().pushLatLngAlt(48.764, -121.828, 700);
lineString.getCoordinates().pushLatLngAlt(48.776, -121.818, 700);
lineString.getCoordinates().pushLatLngAlt(48.787, -121.794, 700);
lineString.getCoordinates().pushLatLngAlt(48.781, -121.778, 700);
lineString.getCoordinates().pushLatLngAlt(48.771, -121.766, 700);
lineString.getCoordinates().pushLatLngAlt(48.757, -121.768, 700);
lineString.getCoordinates().pushLatLngAlt(48.747, -121.773, 700);

// Create a style and set width and color of line
lineStringPlacemark.setStyleSelector(ge.createStyle(''));
var lineStyle = lineStringPlacemark.getStyleSelector().getLineStyle();

/*** STYLING THE POLYGON ('WALL') UNDER THE LINE ***/
lineStringPlacemark.getStyleSelector().getPolyStyle().getColor().set('9900ffff');
/***************************************************/

lineStyle.setWidth(5);
lineStyle.getColor().set('9900ffff');  // aabbggrr format

// Add the feature to Earth
ge.getFeatures().appendChild(lineStringPlacemark); 
```

# mysql - MySQL：如何从具有重复行的表中获取最小值？

> ID：13286261
> 
> 赞同：0
> 
> 时间：2012-11-08T09:36:24.767
> 
> 标签：mysql

我有以下结构的表。此表中的内容是重复的。我想以最低价格显示记录。

```
GROUP  IDX  NAME       PRICE

141003  6   0285-00    499.88000
141003  2   028500     519.13000
141003  1   0285-00    424.12000
141005  2   02851      559.13000
141005  1   0285-1     434.12000 
```

**结果表**

```
141003  1   0285-00    424.12000
141005  1   0285-1     434.12000 
```

我尝试了这个但返回的结果是：

```
141003  6   0285-00    499.88000 
```

询问：

```
select group, idx, name, price
                FROM table
                GROUP BY group
                ORDER BY price; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:42:47.963

如果您想知道每个组中的最低价格，请使用以下查询：

```
select `group`, `idx`, `name`, MIN(price) AS min_price
                FROM `table`
                GROUP BY `group`; 
```

['MIN' 函数的文档](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_min)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:41:17.177

```
SELECT group, idx, name, price
    FROM table
    WHERE group = 141003
    ORDER BY price ASC
    LIMIT 1; 
```

会做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:08:05.067

首先 group 是 MySQL 中的保留字。您应该在它周围使用 ` 或重命名表格。像这样：

```
select `group`, idx, name, price from test_2 where `group` = 141003 order by price desc limit 1; 
```

如果组处于具有一个值的 where 条件，为什么要进行分组？您想要所有组中最便宜的商品吗？

# mysql - 在solr中逐行索引表

> ID：13286272
> 
> 赞同：0
> 
> 时间：2012-11-08T09:36:57.093
> 
> 标签：mysql, solr, lucene, dih

我对**Solr**有点陌生，我正在尝试在 solr 中索引大约 100 万条推文，以便之后能够搜索它们

**我在MYSQL**数据库中有这些推文我知道如何在 Solr 中索引单独的文件，但实际上我不能将推文分成 1M 文件

所以我问是否有办法在solr中逐行索引sql表

我已经尝试过：

*   在 Solr 中索引单独的 xml 文件
*   我知道它可以从[DataImportHandler](http://wiki.apache.org/solr/DataImportHandler)处理，但对教程有点困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:43:21.123

您走在正确的轨道上，使用数据导入处理程序 (DIH) 是一个不错的起点。您是否在 DataImportHandler wiki 页面上看到了指向[DIH 快速入门的链接。](http://wiki.apache.org/solr/DIHQuickStart)对于您给定的用例，这应该非常接近您的需要。

为了运行 /example/example-DIH 文件夹中 solr 附带的 DIH 示例，您需要使用 Readme.txt 文件摘录中列出的最后一个示例启动 Solr：

> 默认情况下，start.jar 使用默认的 solr 主目录“./solr/”在 Jetty 中启动 Solr -- 要运行其他示例配置，您可以在启动 jetty 时指定 solr.solr.home 系统属性...
> 
> java -Dsolr.solr.home=多核-jar start.jar
> 
> java -Dsolr.solr.home=example-DIH -jar start.jar

# c# - Windows 8 商店应用程序 c# 动画边距

> ID：13286274
> 
> 赞同：5
> 
> 时间：2012-11-08T09:36:59.297
> 
> 标签：c#, windows-store-apps

我正在创建一个 Windows 商店应用程序，它需要一些动画

有没有人有一个动画用户控件的边距的工作示例？

我需要使用重新定位吗？（doubleanimation 不支持 ucChat.margin 或 ucChat.margin.top）

```
DoubleAnimation da = new DoubleAnimation();
                da.Duration = new Duration(TimeSpan.FromMilliseconds(1500));
                da.From = 0;
                da.To = -400;

                Storyboard st = new Storyboard();
                Storyboard.SetTarget(da, ucChat);
                Storyboard.SetTargetProperty(da, "ucChat.Margin.Top");
                st.Children.Add(da);

                st.Begin(); 
```

似乎在 wpf 中您可以使用 ThicknessAnimation，Windows 商店应用程序中是否有等价物？

# c# - c#访问.exe并将参数传递给被调用的应用程序而不显示最后一个

> ID：13286278
> 
> 赞同：-2
> 
> 时间：2012-11-08T09:37:16.120
> 
> 标签：c#, visual-studio-2010, parameters, exe

拥有带有输入参数和按钮的 app1.exe。如何创建 c# 代码来访问 app1.exe 传递参数以进行输入和按下按钮？感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:33:41.613

1.  您可以使用进程启动 app1.exe，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)。

2.  在 app1.exe 中“单击按钮”的唯一方法是向必须在 app1.exe 中处理的应用程序发送信号/消息。看看[这个网站](http://bytes.com/topic/c-sharp/answers/626029-cross-process-signalling-best-way-doing)的一些想法。

# r - 从历史记录中隐藏函数定义以便于调试

> ID：13286281
> 
> 赞同：-1
> 
> 时间：2012-11-08T09:37:19.877
> 
> 标签：r, debugging, ide, rstudio

假设我们正在调试一个函数`foo()`，并且我们想一次又一次地修改它并使用一些参数运行它`foo(bar="Hello", baz="How are you?")`——以确保问题得到解决。

修改`foo()`主体后，我们运行函数定义的行——以修改函数——现在，我们必须在历史记录中搜索包含的行`foo(bar="Hello", baz="How are you?")`以查看修改后的`foo()`工作是否正常。搜索历史也可以通过继续按“向上”键直到到达函数定义之前，也就是我们最后一次运行的时候来代替`foo(bar="Hello", baz="How are you?")`。

另一种可能性是保留`foo(bar="Hello", baz="How are you?")`在剪贴板中，每次修改`foo()`正文时，我们只需`foo(bar="Hello", baz="How are you?")`从剪贴板粘贴并运行它。

但是，如果我们同时修改多个具有长体的函数，那么所有这些解决方案都非常困难。我教过的最好的方法是从历史中隐藏函数定义——当我们使用原生 R 环境或像 RStudio 这样的 IDE 时。有没有可能做到这一点？有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T09:54:19.303

您可以`source()`从文件中定义函数，而不是从 IDE/编辑器“复制粘贴”（或以其他方式运行）函数代码块。如果您这样做（默认情况下无论如何），采购将不会显示在 R 控制台中。`source()`大多数合理的编辑器都有一个键盘快捷键，可以通过“粘贴”将函数缓冲区/文件/窗口源/加载到 R中`C`-例如`c` `C`，在 Emacs+ESS 上。`l`

您可以使用像 Emacs 这样的明智编辑器和 ESS，它不会将代码缓冲区发送的代码交错到 R 缓冲区中，因此您不必从函数定义中重新返回，只需返回历史记录即可。

至少在 Linux 上，您可以使用通用`Ctrl`+`r`然后开始输入您想要的函数调用的前几个字符，这将对您正在输入的内容进行反向搜索，然后`Enter`运行该命令/行。

# mysql - MySQL Workbench 5.2 CE 无法启动

> ID：13286284
> 
> 赞同：1
> 
> 时间：2012-11-08T09:37:28.703
> 
> 标签：mysql, mysql-workbench

MySQL Workbench 5.2 CE 启动后显示初始屏幕并关闭。操作系统 - Windows 7。我认为它发生在保存新的连接配置文件后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:03:27.173

仅帮助删除所有文件夹和文件

```
C:\Users\..user..\AppData\Roaming\MySQL\Workbench 
```

# function - lua中的转发函数参数arg

> ID：13286285
> 
> 赞同：0
> 
> 时间：2012-11-08T09:37:29.957
> 
> 标签：function, parameters, lua, arguments

我想重写一个函数来检查它的参数值，但是调用它并正常传递原始参数。这可能吗？我正在使用 www.coronalabs.com 的 Corona SDK

我目前不起作用的代码是：

```
-- getting a refrence to the original function so i can replace it with my overriding function
local newcircle = display.newCircle

-- my override
display.newCircle = function(...)
-- attempt to pass the parameters to this function on to the real function
local t = {...}
newcircle(unpack(t))
end

-- calling the overridden function as if it were normal
display.newCircle( display.newGroup(), "image.png" ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:57:05.287

在您的新`display.newCircle`实现中，您使用的是未定义的`t`表和已弃用的`arg`自动表。

尝试这个 ：

```
-- my override
display.newCircle = function(...)
    local t = {...} -- you need to collect arguments to a table
    -- dumb use of override
    print(t[1])
    -- attempt to pass the parameters to this function on to the real function
    newcircle(unpack(t))
end 
```

# javascript - 文本区域中的行高（IE7）

> ID：13286286
> 
> 赞同：0
> 
> 时间：2012-11-08T09:37:32.733
> 
> 标签：javascript, jquery, html, css, internet-explorer

我有一个文本区域（固定大小），它被一些文本填充，然后调整大小以适应（字体更改）。
下面的代码在 Chrome、Firefox 等中运行良好，但在 IE 中运行良好（版本 7/8/9，它也必须这样做）。
在非 IE 中，文本会调整大小并很好地适合文本区域，但在 IE 中，文本区域的每一行之间存在巨大差距。
我试过设置 line-height 但它似乎不起作用。我读过它与[字体的高度有关](https://stackoverflow.com/questions/7681282/using-a-different-font-causes-line-height-spacing-issues-in-ie6-and-ie7)，这意味着将每一行包装在一个跨度中并设置一个负的上边距。
任何想法都非常感谢。

代码示例；

html

```
<span id="inner-text">
        <textarea readonly="readonly" 
            cols="10" 
            rows="5" 
            class="messagetext" 
            style="width:400px; border:none;height:100px;overflow-y:hidden; resize:none;color: #D31245;"
            >1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</textarea>
</span><span id="temp" style="visibility:hidden"></span> 
```

JS

```
$(function() {
    var while_counter = 1;
    var txt = $('textarea.messagetext');
    var font_size = txt.css('font-size').replace(/\D/g,'');
    var scHeight = txt.get(0).scrollHeight;
    var txtHeight = txt.height();
    while ( scHeight > (txtHeight+10) ) {
        font_size = (font_size - 1);
        txtHeight = (txtHeight + 15);
        while_counter = while_counter + 1;
    }

    var lines = txt.val().split('\n');
    var total_lines = lines.length;
    var span_width = $('#inner-text').width() - 5;
    var temp_span = $('#temp');
    // now calculate line wraps
    $.each(lines, function(){
        // temp write to hidden span
        temp_span.html(String(this));
        // check width
        if (temp_span.width() > 400) {
            total_lines = total_lines + 1;
        }
    });
    txt.css('font-size', font_size+'px');
    txt.height( (total_lines * font_size) + (total_lines * 1.14) + 10);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:08:29.247

将以下代码复制到一个 html 文件中并在 IE 中检查

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.min.js"
    type="text/javascript"></script>
<script  type="text/javascript">
$(document).ready(function() {
alert('hi');
var while_counter = 1;
var txt = $('textarea.messagetext');
var font_size = txt.css('font-size').replace(/\D/g,'');
var scHeight = txt.get(0).scrollHeight;
var txtHeight = $(txt).height();
while ( scHeight > (txtHeight+10) ) {
    font_size = (font_size - 1);
    txtHeight = (txtHeight + 15);
    while_counter = while_counter + 1;
}

var lines = txt.val().split('\n');
var total_lines = lines.length;
var span_width = $('#inner-text').width() - 5;
var temp_span = $('#temp');
// now calculate line wraps
$.each(lines, function(){
    // temp write to hidden span
    temp_span.html(String(this));
    // check width
    if (temp_span.width() > 400) {
        total_lines = total_lines + 1;
    }
});
$(txt).css('font-size', font_size+'px');
$(txt).innerHeight( (total_lines * font_size) + (total_lines * 1.14) + 10);
});
</script>
</head>
<body>
<span id="inner-text">
    <textarea readonly="readonly" 
        cols="10" 
        rows="5" 
        class="messagetext" 
        style="width:400px; border:none;height:100px;overflow:hidden;resize:none;color: #D31245;"
        >1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</textarea>
</span><span id="temp" style="visibility:hidden"></span>
</body>
</html> 
```

# nsis - 解析 url 重定向上的文件名

> ID：13286288
> 
> 赞同：0
> 
> 时间：2012-11-08T09:37:41.670
> 
> 标签：nsis, wininet

我使用`wininet`（使用名为 的 nsis 插件`inetc`）下载文件。

我想用 url 中使用的相同文件名保存文件，例如`http://some.domain.com/myfile.doc`应该保存为`myfile.doc`. 问题是当我有一个带有重定向的网址时。例如，我可以获得 `http://some.domain.com/`哪些重定向到`http://some.domain.com/myfile.doc`，并且我想将其保存为`myfile.doc`.

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:06:20.710

INetC 并没有真正设计为支持这一点，但我想您可以`INetC::head`循环调用并解析返回的标头，直到它不再是重定向...

**编辑：**

由于 INetC 仅设计用于处理由调用者命名的文件，因此它仅依赖于高级 WinInet 默认处理。

虽然可以修改 INetC 或创建新插件，但让服务器完成工作可能会减少工作量。它可以返回 INetC::head 可以下载的 content-disposition 标头或像 server.com/?getname 这样的特殊 URL，它只返回名称，因此您首先使用 INetC::get 获取名称，然后执行真正的 INetC::获取正确的目标文件名...

# jackrabbit - 通过 RMI 和 Jackrabbit 存储库工作需要哪些 jar？

> ID：13286290
> 
> 赞同：0
> 
> 时间：2012-11-08T09:37:53.097
> 
> 标签：jackrabbit

需要哪些 jars 才能通过 RMI 与 Jackrabbit 存储库一起工作？

当通过 JcrUtils.getRepository("http://$SERVER_ADDRESS:$PORT/$CONTEXT") 使用 RMI 时，类路径中需要哪些 jar 才能使用所有 JCR 和 Jackrabbit 功能？

是否应该包括所有 Jackrabbit 罐子，还是我们可以将它们限制在某些“接口”中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:40:17.827

经过调查，我发现 [http://mvnrepository.com/artifact/org.apache.jackrabbit/jackrabbit-jcr-rmi/2.4.3](http://mvnrepository.com/artifact/org.apache.jackrabbit/jackrabbit-jcr-rmi/2.4.3)

具体来说，我必须将这个罐子列表添加到 Eclipce 项目中：

*   jcr-2.0.jar
*   jackrabbit-jcr-commons-2.4.3.jar
*   jackrabbit-jcr-rmi-2.4.3.jar
*   logback-classic-1.0.0.jar
*   jackrabbit-api-2.4.3.jar
*   jackrabbit-core-2.4.3.jar
*   slf4j-api-1.6.4.jar
*   logback-core-1.0.0.jar

# c++ - 未解决的外部'__fastcall Dbtables::TQuery::TQuery(Classes::TComponent*)

> ID：13286291
> 
> 赞同：1
> 
> 时间：2012-11-08T09:37:55.523
> 
> 标签：c++, c++builder

我正在使用 BDS 2006 并将在控制台应用程序中使用 TQuery。我禁用了“使用动态库”和“使用运行时包”选项，因为我想将应用程序导出到另一台电脑。如果我编译源代码，我会得到一个链接器错误：“未解析的外部 '__fastcall Dbtables::TQuery::TQuery(Classes::TComponent*) referenced ...”

在我的代码下方。我需要另一个头文件吗？如果需要，是哪个头文件？

谢谢

```
#include <vcl.h>
#include <DBTables.hpp>
#pragma hdrstop
TQuery *Query1;
int main(int argc, char* argv[])
{
   Query1 = new TQuery(NULL);
   //do some operation with Query1
   system ("pause");
   delete Query1;
   return 0;
} 
```

# objective-c - LSCopyApplicationURLsForURL 总是返回 null

> ID：13286292
> 
> 赞同：2
> 
> 时间：2012-11-08T09:37:56.883
> 
> 标签：objective-c, temporary-files

当我尝试为我的临时文件（在此代码中为“toString”）记录系统上的所有可用编辑器时，它总是返回 null，尽管我的系统上安装了许多应用程序。

```
NSArray *appUrls = (NSArray*)LSCopyApplicationURLsForURL((CFURLRef)[NSURL URLWithString:toString], kLSRolesViewer | kLSRolesEditor); 
```

toString 包含以下文件路径： `/var/folders/pl/tcc5k3fd6tj2__9dprg9dm1m0000gp/T/tempFile`

这里应该是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:29:28.627

```
[NSURL URLWithString:toString] 
```

需要一个完整的 URL 字符串，包括方案，例如“file://var/folders/...”。

采用

```
[NSURL fileURLWithPath:toString] 
```

而是获取具有指定路径的文件 URL。

另一个问题可能是您的文件名没有任何文件扩展名（例如“.txt”），因为 Launch Services 使用扩展名（或文件类型/创建者）来查找合适的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-13T09:24:53.180

我为此苦苦挣扎，我想获得所有可以打开确定的路径/文件扩展名的捆绑包。

如果您有文件扩展名，则可以通过以下方式获取所有可以编辑它的捆绑包：

```
//All Bundle Ids
NSString *pathExtension = @"docx";
CFArrayRef utisRef = UTTypeCreateAllIdentifiersForTag(kUTTagClassFilenameExtension,(__bridge  CFStringRef) pathExtension,nil);
NSLog( @"UTI: utisRef %@", utisRef);
NSArray *utis = CFBridgingRelease(utisRef);
NSMutableSet *mutableSet = [[NSMutableSet alloc] init];
for (NSString *uti in utis) {
    CFArrayRef bundleIDsRef = LSCopyAllRoleHandlersForContentType((__bridge  CFStringRef) uti,kLSRolesEditor);
    [mutableSet addObjectsFromArray:CFBridgingRelease(bundleIDsRef)];
}
NSLog( @"bundleIDs: %@", mutableSet); 
```

如果您有文件路径并且想要获取所有可以编辑它的应用程序位置，您可以使用以下命令：

```
//Location of apps
NSString *str = @"/Users/ricardoanjos/Library/Developer/Xcode/DerivedData/EgnyteDrive-hforbniifiojczefbnwanzxakvlr/Build/Products/Debug/1.pdf";
NSURL* url = [[NSURL alloc] initFileURLWithPath:str];
CFURLRef urlRef = (__bridge CFURLRef)url;
CFArrayRef appUrlsRef = LSCopyApplicationURLsForURL(urlRef, kLSRolesEditor);
NSArray *appUrls = CFBridgingRelease(appUrlsRef);
NSLog(@"appUrls: %@", appUrls); 
```

我希望它会有所帮助。

# android - 使用 GraphView 库时只有整数值

> ID：13286295
> 
> 赞同：1
> 
> 时间：2012-11-08T09:38:04.543
> 
> 标签：android, android-graphview

我使用令人敬畏的 GraphView 库在我的 Android 应用程序中创建图表。但我有一个问题。我只想要整数值而不是双精度值。我尝试自定义标签格式化程序，但它不起作用......我想我做错了什么，但我不知道是什么......有人可以给我一个探索的方法吗？（或者可能是解决方案！！！）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:24:57.033

使用自定义标签格式化程序并将值转换为整数。

尝试这样的事情：

```
GraphView graphView = new LineGraphView(this, "example") {
   @Override
   protected String formatLabel(double value, boolean isValueX) {
      // return as Integer
      return ""+((int) value);
   }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-28T00:43:18.943

那么现在 formatLabel 已被弃用，因此直接覆盖它不再正确。

在较新版本的 GraphView 中，正确的方法是使用自定义标签格式化程序：

```
graphView.setCustomLabelFormatter(new CustomLabelFormatter() {
    @Override
    public String formatLabel(double value, boolean isValueX) {
        // return as Integer
        return ""+((int) value);
    }
}); 
```

# objective-c - UIMapView 中的自定义图钉

> ID：13286296
> 
> 赞同：0
> 
> 时间：2012-11-08T09:38:07.100
> 
> 标签：objective-c, xcode, mkmapview, mkannotationview

我正在尝试将标准引脚替换为自定义引脚。在 iOS 6 中，以下代码可以正常工作并完美替换它！

```
static NSString* AnnotationIdentifier = @"AnnotationIdentifierDealer";
MKPinAnnotationView* pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier] autorelease];
pinView.animatesDrop=YES;
pinView.canShowCallout=YES;

UIImageView *newPin = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"newpin.png"]];
pinView.image = newPin.image; 
```

上面的代码在 iOS5 中不起作用（它显示了原始引脚）....我可以在原始引脚上添加图像，不幸的是这不起作用，因为自定义引脚的形状不同。我可以使用以下代码将它添加到 ios 5 中的引脚上

```
UIImageView *newPin = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"newpin.png"]];
[pinView addSubView:newPin]; 
```

我怎样才能更换原来的销。它应该在 iOS5+6 上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:46:52.537

您可以尝试使用 MKAnnotationView 而不是 MKPinAnnotationView，如此处所述：[https ://stackoverflow.com/a/9815650/186212](https://stackoverflow.com/a/9815650/186212)

# python - 无法使用 rauth 库访问 LinkedIn 连接

> ID：13286300
> 
> 赞同：2
> 
> 时间：2012-11-08T09:38:19.067
> 
> 标签：python, api, oauth, linkedin, rauth

我正在尝试[这个 Github 示例](https://github.com/litl/rauth/blob/master/examples/linkedin-web.py)。

我收到一个`403, Access to connections denied`错误并返回`KeyError: '_total'.`

r_network 选项存在。有没有人遇到过这个问题？

此外，如果您查看[此 Python 文档页面](http://docs.python-requests.org/en/latest/user/quickstart/#oauth-authentication)，“请求”库正在初始化 resource_owner_key、resource_owner_secret 和应用程序密钥。不确定这些是如何从“rauth”库传递的，想知道这是否导致了这个 403 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:58:02.947

这可能是您在 Linkedin 中设置的权限问题。关键错误是由于收到的响应是错误响应并且在字典中不包含“_total”键。

您可以尝试致电“http://api.linkedin.com/v1/people/~”，因为这应该会提供您的个人资料详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T04:38:11.257

Rauth 维护者在这里。

链接的示例已过时，不应使用。相反，尝试将 rauth 更新到 0.5.3 并尝试[此示例](https://github.com/litl/rauth/blob/master/examples/linkedin-updates-cli.py)。

如果问题仍然存在，我认为@Ifthikhan 猜测这是权限问题可能是正确的。为了检查，您可以重新编写示例脚本以仅打印响应。这是一个差异：

```
diff --git a/examples/linkedin-updates-cli.py b/examples/linkedin-updates-cli.py
index 0df692a..d78d20c 100644
--- a/examples/linkedin-updates-cli.py
+++ b/examples/linkedin-updates-cli.py
@@ -25,16 +25,4 @@ r = session.get('people/~/network/updates',
                params={'type': 'SHAR', 'format': 'json'},
                header_auth=True)

-updates = r.json()
-
-for i, update in enumerate(updates['values'], 1):
-    if 'currentShare' not in update['updateContent']['person']:
-        print '{0}. {1}'.format(i, update['updateKey'])
-        continue
-    current_share = update['updateContent']['person']['currentShare']
-    person = current_share['author']['firstName'].encode('utf-8') + ' '
-    person += current_share['author']['lastName'].encode('utf-8')
-    comment = current_share.get('comment', '').encode('utf-8')
-    if not comment:
-        comment = current_share['content']['description'].encode('utf-8')
-    print '{0}. {1} - {2}'.format(i, person, comment)
+print r.json() 
```

让我知道您在那之后是否仍然遇到困难。

# python - Jenkins：复制视图并将作业添加到视图

> ID：13286301
> 
> 赞同：0
> 
> 时间：2012-11-08T09:38:22.253
> 
> 标签：python, svn, jenkins, jenkins-plugins

我试图弄清楚如何区分用户之间的詹金斯构建。我的主要用例是一个用户想要在他的 SVN 分支上构建和运行我们的测试作业。

由于我有很多用户，我希望这些作业具有某种“标签”来识别用户和分支，并防止作业之间发生冲突，因为如果它们具有相同的名称，它们将使用相同的工作区目录，这将删除其他用户工作。

我能找到的唯一方法是以编程方式复制作业并更改它们的属性（例如名称和分支）。

因此，如果您想保持我的工作井井有条，我希望能够在视图中组织用户工作，并且我正在使用嵌套视图插件，但所有 Jenkins API 只显示创建一个简单视图，我想使用嵌套视图看法。所以我想的是复制一个“模板视图”并改变它的属性。

有没有办法通过 REST API 或 python（首选）来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:54:39.873

我建议使用[Build User Vars Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Build+User+Vars+Plugin)以透明地提供用户特定的变量以供以后使用。这个插件提供了几个变量：

![在此处输入图像描述](../Images/7629ab674cbfd3f83a51b28c835e66cd.png)

[模板项目插件](https://wiki.jenkins-ci.org/display/JENKINS/Template+Project+Plugin)可用于定义与实际构建过程有关的所有必需配置的作业。有了它，您可以按照 %UserName-JobName% 模式创建多个“包装器”作业，因此拥有不同的视图将是一项非常容易的任务，配置为仅显示特定用户的作业。包装器作业应该只执行上层模板作业（使用上层构建器）。

![在此处输入图像描述](../Images/433d9756f980ac227eba9b29cab08414.png)

另请考虑[Hudson Personal View Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Hudson+Personal+View)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:39:53.710

创建一个以 SVN 路径作为参数的参数化构建。在 SVN 配置中，将 URL 设置为 $。为了防止工作空间被清除，请将项目配置为在每次运行后归档构建。如果您希望您的用户能够同时运行构建，Jenkins 将创建多个工作区并将它们分开。您可以使用[Build Name Setter 插件](https://wiki.jenkins-ci.org/display/JENKINS/Build+Name+Setter+Plugin)使用 SVN 路径或其他参数标记每个构建。

# java - Android-Spinners-强制关闭错误

> ID：13286303
> 
> 赞同：0
> 
> 时间：2012-11-08T09:38:29.013
> 
> 标签：java, android, android-emulator, spinner, forceclose

---- 我确实在 setcontentview 下移动了微调器和 textview 变量，但是微调器是不公开的，所以我可以在 void onitemselected 中使用它们我应该怎么做？？？

好的，所以我想使用微调器从它们那里获取我的值，并将其与随机生成的值进行比较，如果它们正确，则在 textview 中将它们显示为绿色，如果不是红色，我只为一个微调器做了这个 IF 语句只是为了测试它但它强制关闭。

主页.java

```
package com.example.decrypter;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;

public class MainPage extends Activity implements OnItemSelectedListener {
    double random1;
    int check1,check2,check3,check4,check5;

    EditText textbox;
    int guess;
    String s;
    Spinner spinner1 = (Spinner) findViewById(R.id.spinner01);
    Spinner spinner2 = (Spinner) findViewById(R.id.spinner02);
    Spinner spinner3 = (Spinner) findViewById(R.id.spinner03);
    Spinner spinner4 = (Spinner) findViewById(R.id.spinner04);
    Spinner spinner5 = (Spinner) findViewById(R.id.spinner05);
    TextView display1 = (TextView) findViewById(R.id.txtdisplay1);
    TextView display2 = (TextView) findViewById(R.id.txtdisplay2);
    TextView display3 = (TextView) findViewById(R.id.txtdisplay3);
    TextView display4 = (TextView) findViewById(R.id.txtdisplay4);
    TextView display5 = (TextView) findViewById(R.id.txtdisplay5);

    Integer[] numbers = {1,2,3,4,5,6,7,8,9};

    Button btnrandom = (Button) findViewById(R.id.btnrandom);
    Button btn1 = (Button) findViewById(R.id.btn1);
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        ArrayAdapter <Integer> adapter1 = new ArrayAdapter <Integer>(this,       android.R.layout.simple_spinner_item, numbers);

        setContentView(R.layout.activity_main_page);
        spinner1.setAdapter(adapter1);
        spinner1.setOnItemSelectedListener(this);
        spinner2.setAdapter(adapter1);
        spinner2.setOnItemSelectedListener(this);
        spinner3.setAdapter(adapter1);
        spinner3.setOnItemSelectedListener(this);
        spinner4.setAdapter(adapter1);
        spinner4.setOnItemSelectedListener(this);
        spinner5.setAdapter(adapter1);
        spinner5.setOnItemSelectedListener(this);

        btnrandom.setOnClickListener( new View.OnClickListener() 
        { 

           public void onClick(View v) {
            // TODO Auto-generated method stub
            random1 = Math.floor(Math.random()*10); 
            //display.setText("random:" + random1);     
            /*check1 = Integer.parseInt(spinner1.getSelectedItem().toString())     ; 
            */
        }
       });

        btn1.setOnClickListener( new View.OnClickListener() 
        { 

           public void onClick(View v) {
            // TODO Auto-generated method stub

            if(check1==random1){
                display1.setTextColor(Color.GREEN);
                display1.setText(s);
            }
            else{
                display1.setTextColor(Color.RED);
                display1.setText(s);
            }   
        }
       });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main_page, menu);
        return true;

    }

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        // TODO Auto-generated method stub

        check1 = Integer.parseInt(spinner1.getSelectedItem().toString());
        check2 = Integer.parseInt(spinner2.getSelectedItem().toString()) ;
        check3 = Integer.parseInt(spinner3.getSelectedItem().toString()) ;
        check4 = Integer.parseInt(spinner4.getSelectedItem().toString()) ;
        check5 = Integer.parseInt(spinner5.getSelectedItem().toString()) ;

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
} 
```

AndroidManifest

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.decrypter"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainPage"
        android:label="@string/title_activity_main_page" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:44:24.727

仅供参考，您无需将 Layout 设置为您的活动类即可找到视图。所以把那些写在`findViewsById()`后面`setContentView()`。

例如：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_page);     //set layout 

     Spinner spinner1 = (Spinner) findViewById(R.id.spinner01);
     Spinner spinner2 = (Spinner) findViewById(R.id.spinner02);
     .....
     .....
     .....
} 
```

还有一件事，如果您想在整个班级中访问这些所有视图，请为这些声明 Class 级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:44:58.190

在此代码行之后将以下代码写入 onCreate() 方法`setContentView(R.layout.activity_main_page);`，它将解决您的问题。

```
Spinner spinner1 = (Spinner) findViewById(R.id.spinner01);
Spinner spinner2 = (Spinner) findViewById(R.id.spinner02);
Spinner spinner3 = (Spinner) findViewById(R.id.spinner03);
Spinner spinner4 = (Spinner) findViewById(R.id.spinner04);
Spinner spinner5 = (Spinner) findViewById(R.id.spinner05);

TextView display1 = (TextView) findViewById(R.id.txtdisplay1);
TextView display2 = (TextView) findViewById(R.id.txtdisplay2);
TextView display3 = (TextView) findViewById(R.id.txtdisplay3);
TextView display4 = (TextView) findViewById(R.id.txtdisplay4);
TextView display5 = (TextView) findViewById(R.id.txtdisplay5);

Button btnrandom = (Button) findViewById(R.id.btnrandom);
Button btn1 = (Button) findViewById(R.id.btn1); 
```

# liferay - 以编程方式将图像添加到 Liferay 图像库

> ID：13286306
> 
> 赞同：1
> 
> 时间：2012-11-08T09:39:08.697
> 
> 标签：liferay

我创建了一个将图像文件上传到图像库的 Liferay portlet。我已经能够通过 IGImageLocalServiceUtil 以编程方式从我的 Liferay 服务器添加和检索图像，但我似乎无法在控制面板下的图像库 portlet 中看到图像。我怀疑这与权限问题有关。你能帮我找出我的代码有什么问题吗？谢谢。

```
long userId = themeDisplay.getUserId();
long groupId = themeDisplay.getLayout().getGroupId();
String newFilename = "test";
long folderId = 0;
String[] permissions = { "VIEW" };

serviceContext.setCommunityPermissions( permissions );
serviceContext.setGuestPermissions( permissions );

igImage = IGImageLocalServiceUtil.addImage( userId, groupId, folderId, newFilename, "", sourceFile, "image/png" ,serviceContext);
IGImageLocalServiceUtil.addImageResources(igImage, serviceContext.getCommunityPermissions(), serviceContext.getGuestPermissions()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:30:07.960

我现在明白了。我在我的问题中没有提到的是这个 portlet 位于控制面板中。因此，每当我通过 themeDisplay.getLayout().getGroupId() 而不是站点自己的 groupId 获取 groupId 时，图像与控制面板而不是站点相关联。

然后我应该使用 themeDisplay.getDoAsGroupId() 而不是 themeDisplay.getLayout().getGroupId() 。

# android - 如何获得活跃的音乐播放器——android

> ID：13286308
> 
> 赞同：0
> 
> 时间：2012-11-08T09:39:15.787
> 
> 标签：android

感谢之前的回复，

是否可以在服务（后台）音乐播放器中获取活动和运行的包名称。我可以获取音乐动作（metachage 或 playstateChange），但是当我使用 intent.getPackagename 时，我得到了 null。谁能指导我如何获取音乐播放器的包名。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:23:26.217

> 提供文件 URL 并在浏览器中打开它是没有意义的，因为这个 URL 会在一段时间后过期。

不，只要 Android 中没有任何魔法可以表示“音乐播放器”不同于其他任何东西。

# php - PHP如何让卷曲请求等待一段时间

> ID：13286311
> 
> 赞同：0
> 
> 时间：2012-11-08T09:39:26.473
> 
> 标签：php, curl

如何发出在发出请求后空闲的 curl 请求？

我想让条件像用户访问任何网站然后闲置一段时间一样，我想在 PHP 中实现这一点。

例如，www.siteblalala.com，那么我希望 php 在该站点上使用 curl 空闲，我该如何做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:41:31.380

使用[睡眠](http://php.net/manual/en/function.sleep.php)功能：

```
sleep(2); //wait for 2 seconds 
```

描述：

> 将程序执行延迟给定的秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:41:28.547

试试睡眠功能

```
// sleep for 10 seconds
sleep(10); 
```

# asp.net - 我应该如何处理所有这些 RAM？

> ID：13286312
> 
> 赞同：2
> 
> 时间：2012-11-08T09:39:29.280
> 
> 标签：asp.net, performance, visual-studio-2010, ram

当权者决定将内存升级授予我们的开发团队。我们现在都可以控制拥有**32GB** RAM 的 Mac Pro。我会更喜欢 SSD 而不是那个 RAM 的一半，我正在努力想办法充分利用这一切。迄今为止，我已经安装了 x64 版本的 Windows 7，并为临时文件、浏览器缓存等以及我正在开发的各种应用程序的代码文件设置了 4GB RAM 驱动器。

尽管如此，即使在使用大型多项目解决方案的繁重调试会话中，我似乎总是有剩余的大量空闲内存，我想知道是否还有其他事情可以做大部分可用的 RAM。我能想到的唯一另一件事是在我的工作站上运行一个虚拟 Windows 服务器以进行“正确”（即在我们的生产环境的镜像中）本地部署/测试等，但任何可以将 4 -6GB 可以很好地用于任何开发人员或用户友好的方式将是非常受欢迎的。

我使用 ASP.Net 和 SQL Server 并使用 VS2010/12，因此特别欢迎针对此设置的任何“技巧”。看到所有这些 RAM 并没有让 VS2010 更容易出现无响应的情况，我感到很难过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:47:46.413

一些想法：

*   使用 RAMdisk，并把你的开发。环境在那个...这将创造奇迹！比最快的 SSD 快得多……但要小心，这是不稳定的！您可以拥有 16GB 甚至 24GB RAMdisk，并且仍然有足够的空间来玩。项目切换从未如此快速，更不用说所有基于磁盘的活动了。
*   您可以运行多个虚拟机。就像您使用数据库进行开发一样，您可以拥有本地副本，而不必依赖共享资源。这可能有很多好处，尽管它也有一些缺点（复制其他开发人员的更改等）
*   结合以上！获取一个 RAMdisk 来运行您的 VM 和 VS！这涉及到开始工作时的大量复制，但那是每天一次……我认为喝咖啡休息时间，阅读电子邮件就足够了。好处：快...比什么都快 - 一旦开始。

# .net - 如何让 Access 2010 数据库与 .NET 2 一起使用

> ID：13286315
> 
> 赞同：2
> 
> 时间：2012-11-08T09:39:34.683
> 
> 标签：.net, database, ms-access

我有一个用 VS 2012 开发的 ASP.NET 应用程序，它使用 Access 2010 accdb 数据库。使用 .NET 4 目标框架，这可以正常工作，但我的目标需要是 .NET 2。当我使用它构建时，我可以使用 OleDb 命令从数据库读取和写入，但是当我到达一个带有 AccessDataSource 的页面时，我得到：

> OleDbException (0x80004005)：无法识别的数据库格式“C:\Users\Paul\Google Drive\Documents\Visual Studio Projects\BoxOffice\BoxOffice\BoxOffice.accdb”。

如果我使用框架 3 或 3.5，也会发生同样的事情。我的目标 CPU 是 AnyCPU（我也尝试过 X86）。

我的连接字符串是：

> connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source="C:\Users\Paul\Google Drive\Documents\Visual Studio Projects\BoxOffice\BoxOffice\BoxOffice.accdb""

我一直在寻找解决方案，但在这些“无法识别的数据库格式”错误中，与数据库或连接字符串的问题有关，而且我可以读写它，这里的情况似乎并非如此。

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-02T20:30:13.447

以下两个补丁之一应该可以解决此问题：

[http://www.microsoft.com/download/en/details.aspx?id=13255](http://www.microsoft.com/download/en/details.aspx?id=13255)

[http://www.microsoft.com/download/en/confirmation.aspx?id=23734](http://www.microsoft.com/download/en/confirmation.aspx?id=23734)

问候

# bash - 我可以根据星期几使用 Bash IF ELSE 语句吗

> ID：13286316
> 
> 赞同：2
> 
> 时间：2012-11-08T09:39:35.527
> 
> 标签：bash, date, if-statement

我正在编写一个脚本，我有 4 个单独的 Curl 命令，我需要根据每个月的星期运行这些命令

即如果第 1 周运行 curl 1 如果第 2 周运行 curl 2

ETC

只有 4 个，它们只需要在本月的前 4 周运行，第 5 周无关紧要。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:59:49.350

用于`date`获取月份中的某一天，然后对其进行处理。

```
day=$(date +%-d)
if [[ $day -le 7 ]]
then
   action1
elif [[ $day -le 14 ]]
then
   action2
elif [[ $day -le 21 ]] 
then
   action3
elif [[ $day -le 28 ]]
then
   action4
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T10:32:05.590

有很多解决方案，这里有一个更深奥的：

为每周的操作创建一个函数，week1..week5，加上一个用于称为 weeki 的无效周。

```
actions=(weeki week1 week2 week3 week4 week5)    # an array of function names
day=$(date +%-d)                                  # get the day of the month
index=$(( (day/7) + 1 ))                         # get the week number

eval ${actions[$index]}                          # execute the function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:11:44.030

`week1`...`week5`是在不同周内具有不同操作的函数。

从 获取天数`date`，不填充零（填充零被解释为八进制）。`date +%-d`为您提供月份中的某一天，而无需填充零。

```
day=$(date +%-d)
let "week=(day-1)/7+1"
case $week in
1) week1;;
2) week2;;
3) week3;;
4) week4;;
5) week5;;
esac 
```

你也可以使用 if ... elif

```
if [[ $week -eq 1 ]]
then
   week1
elif [[ $week -eq 2 ]]
then
   week2
elif [[ $week -eq 3 ]]
then
   week3
elif [[ $week -eq 4 ]]
then
   week4
elif [[ $week -eq 5 ]]
then
   week5
fi 
```

# office365 - 如何使用 SharePoint Online 和 C# 进行身份验证？

> ID：13286317
> 
> 赞同：1
> 
> 时间：2012-11-08T09:39:37.703
> 
> 标签：office365, sharepoint-2013

我正在使用 Office 365 开发人员预览环境。我在 SharePoint Online 中有一个团队网站，其中包含一个列表。我使用 Microsoft 帐户登录团队网站。

**尝试从另一个 WebApplication 访问列表项时，如何验证自己？**我创建了自动托管的应用程序，但我无法弄清楚凭据。链接到一些文章或示例，如何读取/写入列表项将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:53:45.833

我有一个类似的问题。我创建了一个部署到 SP 2013 开发人员 Office 365 开发人员站点的 SP 2013 自动托管应用程序。我尝试获取列表数据并在“GetResponse()”上获得 403。

```
HttpWebRequest request = (HttpWebRequest) HttpWebRequest.Create(sharepointUrl + oDataUrl);
request.Accept = "application/atom+xml";
request.Credentials = CredentialCache.DefaultCredentials;
HttpWebResponse response = (HttpWebResponse) request.GetResponse(); 
```

# android - 访问 Android Play API 以进行订阅

> ID：13286321
> 
> 赞同：3
> 
> 时间：2012-11-08T09:40:02.437
> 
> 标签：android, api, google-play, in-app-subscription

我试图获取有关通过我们的 Android 应用程序购买的订阅的信息，但通过此链接继续获得此响应

```
https://www.googleapis.com/androidpublisher/v1/applications/[package]/subscriptions/[product id]/purchases/[subscription id]?access_token=[access token] 
```

我已经在 API 控制台中激活了 API 并创建了一个 Web 应用程序客户端 ID

![来自 api 控制台的客户端 ID](../Images/cb4f75f821138aef5a1b8b7f2ef5b822.png)

然后我允许并从此链接复制给定的“代码”参数

```
https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/androidpublisher&response_type=code&access_type=offline&approval_prompt=force&redirect_uri=http://localhost&client_id=[client id] 
```

并通过 php 从我们的服务器获取刷新令牌和访问令牌（并在此存储刷新令牌以供以后使用）

获取刷新令牌 $url = " [https://accounts.google.com/o/oauth2/token](https://accounts.google.com/o/oauth2/token) ";

```
$post_fields = array(
    "grant_type" => "authorization_code",
    "code" => urldecode($code),
    "client_id" => $client_id,
    "client_secret" => $client_secret,
    "redirect_uri" => urldecode($redirect_uri)); 
```

获取访问令牌

```
$url = "https://accounts.google.com/o/oauth2/token";

$post_fields = $fields = array(
    "grant_type" => "refresh_token",
    "client_id" => $client_id,
    "client_secret" => $client_secret,
    "refresh_token" => $refresh_token);
$content = get_content($url, $post_fields); 
```

两个调用都作为 POST 请求完成

```
function get_content($url, $post_fields) {
  $ch = curl_init($url);
  curl_setopt($ch, CURLOPT_POST, 1);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $post_fields);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
  curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
  curl_setopt($ch, CURLOPT_TIMEOUT, 10);
  curl_setopt($ch, CURLOPT_MAXREDIRS, 5);
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
  $result = curl_exec($ch);
  curl_close($ch); 
  return $result;
} 
```

我的问题是为什么我仍然收到来自 Google 的回复

```
{
 "error": {
  "errors": [
   {
    "domain": "androidpublisher",
    "reason": "developerDoesNotOwnApplication",
    "message": "This developer account does not own the application."
   }
  ],
  "code": 401,
  "message": "This developer account does not own the application."
 } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T13:44:39.100

我们遇到了同样的问题。据我所知，我可以说当您从不拥有应用程序（不是所有者）的帐户生成 refresh_token 时会出现此问题。因此，您必须从所有者帐户中执行此操作，并且它会起作用。

# javascript - Backbone.js - 在元素上触发单击和双击事件

> ID：13286323
> 
> 赞同：10
> 
> 时间：2012-11-08T09:40:36.033
> 
> 标签：javascript, backbone.js, backbone-events

在我的主干视图中，我定义了这样的事件：

```
events : {
  'click .elm' : 'select',
  'dblclick .elm' : 'toggle'

},

select: function(e){
    e.preventDefault();
    console.log('single clicked');
}

toggle : function(e){
    e.preventDefault();
    console.log('double clicked');
} 
```

我已将单击事件侦听器和双击事件侦听器绑定到同一个元素`.elm`。当我双击这个元素时，我得到这个输出：

`single clicked` `single clicked` `double clicked`

试过了`preventDefault()`，`stopImmediatePropagation()`并没有解决问题。

那么，如何防止双击时触发单击事件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T17:33:07.020

[jQuery 文档](http://api.jquery.com/dblclick/)特别建议您不要这样做：

> 不建议将处理程序绑定到同一元素的 the`click`和`dblclick`events。触发的事件顺序因浏览器而异，有的在一个`click`之前接收两个事件，`dblclick`而另一些则只接收一个。双击灵敏度（被检测为双击的两次单击之间的最长时间）可能因操作系统和浏览器而异，并且通常是用户可配置的。

您所看到的正是预期的（当然取决于浏览器）。解决问题的唯一方法是设置一个计时器并手动区分单击和双击；然后你将不得不调整计时器值并检查各种浏览器和操作系统，直到你得到一些在大多数地方都可以工作的东西。

我强烈建议您使用带有单击操作的单独控件。双击是非常不友好的时期，我们只是因为我们习惯了它才忍受它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T11:14:46.207

这不是 Backbone 本身的问题。这是关于如何处理同一个按钮上的单击和双击事件。

看

1.  [检测到双击事件时需要取消单击/鼠标事件](https://stackoverflow.com/questions/1067464/need-to-cancel-click-mouseup-events-when-double-click-event-detected/1067484#1067484)

2.  [带有jQuery的Javascript：单击并双击相同的元素，不同的效果，一个禁用另一个](https://stackoverflow.com/questions/5471291/javascript-with-jquery-click-and-double-click-on-same-element-different-effect)

更新：但如果你不必处理它会更好。请参阅下面[的 mu is too short 的答案](https://stackoverflow.com/a/13294501/817277)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:55:12.523

尝试`return false;`在选择和切换的末尾添加。

# python - Mac OS X：_tkinter.TclError：没有显示名称，也没有 $DISPLAY 环境变量

> ID：13286324
> 
> 赞同：3
> 
> 时间：2012-11-08T09:40:36.580
> 
> 标签：python, macos, macports

正如我所说，我已经从 Macports 安装了 Python 3.3。

现在，当我对 Idle 进行聚光灯搜索时

```
Idle -- Python 3.3 
```

出现。但是，当我尝试单击它时，什么也没有发生。没有显示错误或任何东西 - 它没有启动。

你认为可能有什么问题？

这让人想起这个问题：[Python 3.0 - Idle wont open。它只是在码头反弹](https://stackoverflow.com/questions/8366401/python-3-0-idle-wont-open-it-just-bounces-in-the-dock)

不同之处在于我没有收到错误消息并且正在使用 3.3

* * *

更新：

现在我尝试使用 macports select 将 Py3.3 设置为我的主要版本。然后我尝试从控制台打开 IDLE 并收到以下错误消息：

```
 Traceback (most recent call last):
  File "/opt/local/bin/idle", line 5, in <module>
    main()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/idlelib/PyShell.py", line 1421, in main
    root = Tk(className="Idle")
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/tkinter/__init__.py", line 1756, in __init__
    self.tk = _tkinter.create(screenName, baseName, className, interactive, wantobjects, useTk, sync, use)
_tkinter.TclError: no display name and no $DISPLAY environment variable 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:47:46.923

使用 macports，安装`py33-tkinter`

`sudo port install py33-tkinter`

编辑：确保您也安装了 X11 或 Xquartz。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T19:54:14.247

我的 OS X Lion 10.7.5 上的 python32 端口也有同样的问题，只需安装 py32-tkinter 端口即可解决。我检查并已经安装了 X11。谢谢。

# iphone - UITabBarController 问题

> ID：13286325
> 
> 赞同：0
> 
> 时间：2012-11-08T09:40:37.047
> 
> 标签：iphone, objective-c, ios

我想创建类似下面的东西。RootView 没有 TabBar，从第二个视图看应该有 TabBar。

![在此处输入图像描述](../Images/7629eb5f8aa16327013cde8c62018c5b.png)

我目前所做的是，我正在`UINavigationController`用作控制器 calass

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    UIViewController *rootController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

    navigationController = [[UINavigationController alloc] initWithRootViewController:rootController];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [self.window addSubview:navigationController.view];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

但是如何使用`UITabBar`SecondViewController 中的 tabBarController？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:51:50.150

创建第二个视图的对象，然后使用 tabbarcontroller 推送您的视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:32:29.737

对于 appdelegate 中的示例编写 loadnewview 方法。使用 buttonPressed 方法进行按钮操作或第一个视图控制器的任何对象操作，如下所示从第二个视图控制器显示选项卡栏。我取了两个标签作为示例，所以我将容量写为 2。您最多可以取 5。

```
-(IBAction)buttonPressed:(id)sender
{    
    HomeViewController *homeVC=[[HomeViewController alloc]initWithNibName:@"HomeViewController" bundle:nil];

    [self.navigationController pushViewController:homeVC animated:YES];        
    [appDelegate loadnewview];
}    

-(void)loadnewview
{    
    if(!self.tabBarController)
        self.tabBarController = [[UITabBarController alloc] init];

    self.tabBarController.delegate=self;    
    NSMutableArray *localcontrollerarray = [[NSMutableArray alloc] initWithCapacity:2];        
    UIViewController *viewController1 = [[HomeViewController alloc] initWithNibName:@"HomeViewController" bundle:nil];        
    UINavigationController *navi1 = [[UINavigationController alloc] initWithRootViewController:viewController1];        
    [localcontrollerarray addObject:navi1];        
    UIViewController *viewController2 = [[ScanViewController alloc] initWithNibName:@"ScanViewController" bundle:nil];    
    UINavigationController *navi2 = [[UINavigationController alloc] initWithRootViewController:viewController2];        
    [localcontrollerarray addObject:navi2];        
    self.tabBarController.viewControllers = localcontrollerarray;    
    [self.window addSubview:self.tabBarController.view];    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:51:03.147

您需要推送您的 Tabbar 控制器的对象。初始化标签栏控制器的对象并将所有其他控制器对象添加到标签栏控制器的视图控制器数组中。

按钮操作：-

1> 初始化标签栏控制器，假设你将它的对象命名为objTab；

2> objTab.viewcontrollers = [NSArray arrayWithObjects:..] ---> 作为标签栏控制器一部分的所有视图控制器的对象。因此，需要首先创建所有对象。

3> self.navigationcontroller pushViewController: objTAb

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:45:54.450

从 Storyboard 将您的 SecondViewController 嵌入 TabBar。选择您的控制器并转到编辑器 -> 嵌入 -> TabBar 控制器！我来自我的手机..对不起，如果我有任何拼写错误！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T09:56:04.570

在应用程序方法中使用这种类型的方法`AppDelegate.m`和属性合成`UITabBarController`并存储视图控制器数组，`didFinishLaunchingWithOptions`只需将 navigationViewController 分配为 RootViewController，如下所示。

```
RootViewController *masterViewController = [[[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil] autorelease];
    self.navigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease]; 
```

之后，当您想将 TabBar 添加到当时的任何视图时，请像这样调用此波纹管方法..

```
[appDelegate addTabBarControllerInwindow];

-(void)addTabBarControllerInwindow 
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.window cache:YES];

    [self.navigationController.view removeFromSuperview];
    [self.window addSubview:[tabBarController view]];//tabBarController.view
    [UIView commitAnimations];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T10:12:46.927

像这样的东西应该可以解决问题（不使用ARC）：

```
//vc1, vc2, vc3 = your view controllers
NSArray *viewControllersArray = [NSArray arrayWithObjects:vc1,vc2,vc3, nil];    
UITabBarController *tabBarController = [[UITabBarController alloc] init];
[tabBarController setViewControllers:viewControllersArray];
[self.navigationController pushViewController:tabBarController animated:YES];
[tabBarController release]; 
```

您要做的是创建 UITabBarController 并将其沿导航堆栈推送。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-08T09:49:53.367

使用选项卡栏控制器和要隐藏选项卡栏使用代码的视图控制器的 ViewDidLoad 方法创建一个应用程序：

```
 [self.tabBarController.tabBar setHidden:YES]; 
```

并且不要忘记使用相同的代码来取消隐藏选项卡栏，替换 NO 而不是 YES 用于您想要显示选项卡栏的视图控制器。

# javascript - jQuery 选择器不在 chrome 控制台中

> ID：13286326
> 
> 赞同：12
> 
> 时间：2012-11-08T09:40:39.763
> 
> 标签：javascript, google-chrome, jquery-selectors, google-chrome-devtools

直到 Chrome 22.0，当我输入我的 javascript 代码时

```
console.debug($('.page')); 
```

它曾经返回到我的 Google Chrome 控制台：

```
<div class="page"></div> 
```

这是*活的*DOM 对象。我可以通过将其悬停在我的页面上轻松找到该对象。昨天我已经将我的 Chrome 浏览器更新到 23.0 版，现在相同的 js 代码返回类似

```
[<div>, selector: ".page", context: #document] 
```

这是原始的js对象。我可以扩展它并读取它的属性，但是在页面上看不到*活*的DOM 对象。

我尝试替换 `console.debug`或 `console.log`添加 `$('.page').get()`到 jQuery 选择器，但没有成功。

当我 `console.debug($('.page'));`直接写入 Chrome 控制台时，它看起来就像在 Chrome 22.0 中一样有趣。仅在从 js 代码调试时才会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:03:18.797

从理论上讲，这可以从 DOM 数组中去除 jQuery 属性：

```
console.log(Array.prototype.slice.call($('.page'))); 
```

但是，当整理 DOM 节点数组时，开发工具栏将不再允许您从数组中浏览 DOM 节点（本机属性除外）。我知道解决这个问题的唯一方法是单独记录每个节点：

```
Array.prototype.slice.call($('.page')).forEach(function(elem) {
    console.log(elem);
}); 
```

或者简单地说：

```
$('.page').each(function(i, elem) {
    console.log(elem);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:52:52.127

有时要调试，我也会测试“.html()”或 innerHtml 来调试一些即时 html 代码，但“大卫”方式也是我所做的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T05:08:50.233

这似乎在版本 23.0.1271.91 中得到修复。

# python - ：不支持的 URL 方案''：在 Scrapy 中没有可用于该方案的处理程序

> ID：13286341
> 
> 赞同：0
> 
> 时间：2012-11-08T09:41:30.983
> 
> 标签：python, web-crawler, scrapy

我在scrapy框架中遇到了这个错误。这是我在 spiders 目录下的 dmoz.py：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector

from dirbot.items import Website

class DmozSpider(BaseSpider):
    name = "dmoz"
    allowed_domains = ["dmoz.org"]
    f = open("links.csv")
    start_urls = [url.strip() for url in f.readlines()]
    f.close()
    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//ul/li')
        items = []

        for site in sites:
            item = Website()
            item['name'] = site.select('a/text()').extract()
            item['url'] = site.select('a/@href').extract()
            item['description'] = site.select('text()').extract()
            items.append(item)

        return items 
```

运行此代码时出现此错误：

```
<GET %22http://www.astate.edu/%22>: Unsupported URL scheme '': no handler available for that scheme in Scrapy 
```

这是我的 links.csv 内容：

```
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/
http://www.atsu.edu/ 
```

links.csv 中有 80 个 URL。如何解决此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T09:45:15.777

[`%22`是`"`urlencoded](https://duckduckgo.com/?q=urldecode%20%2522&t=canonical)。您的 CSV 文件可能包含如下行：

```
"http://example.com/" 
```

1.  使用[`csv`模块](http://docs.python.org/2/library/csv.html?highlight=csv#csv)读取文件，或者
2.  剥离`"`s。

**编辑：**根据要求：

```
'"http://example.com/"'.strip('"') 
```

**编辑2：**

```
import csv
from StringIO import StringIO

c = '"foo"\n"bar"\n"baz"\n'      # Since csv.reader needs a file-like-object,
reader = csv.reader(StringIO(c)) # wrap c into a StringIO.
for line in reader:
    print line[0] 
```

**最后编辑：**

```
import csv

with open("links.csv") as f:
    r = csv.reader(f)
    start_urls = [l[0] for l in r] 
```

# android - android中的Web服务调用错误

> ID：13286343
> 
> 赞同：0
> 
> 时间：2012-11-08T09:41:39.483
> 
> 标签：android, wcf, web-services

我正在尝试在 Android 中使用 ksoap2 调用基于 .net 的 WCF 服务。进行 httptransport 调用时出现以下错误。

这是我的代码：

```
public class MainActivity extends Activity {
EditText t1,t2;
Button b1;
TextView result;

private static final String NAMESPACE="http://tempuri.org/";
private static final String METHOD_NAME="AddEmployee";
private static final String URL="http://10.32.4.24/Android/AndroidBus.svc";
private static final String SOAP_ACTION="http://tempuri.org/IAndroidBus/AddEmployee";
SoapObject request=new SoapObject(NAMESPACE,METHOD_NAME);
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        t1=(EditText)findViewById(R.id.editText1);
        t2=(EditText)findViewById(R.id.editText2);
        result=(TextView)findViewById(R.id.textView1);
        b1=(Button)findViewById(R.id.button1);
        b1.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View arg0) {
            PropertyInfo pi=new PropertyInfo();
            pi.setValue("abc");
            pi.setName("value1");
            //pi.type=PropertyInfo.STRING_CLASS;
            SoapObject Request=new SoapObject(NAMESPACE,METHOD_NAME);

            Request.addProperty(pi);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);
            envelope.dotNet=true;
            envelope.setOutputSoapObject(Request);

             new servicecall(envelope).execute();

            }

        });
    }

    public class servicecall extends AsyncTask<String,Void,String>
    {
        String res;
        SoapSerializationEnvelope envelope;
        public servicecall(SoapSerializationEnvelope envelope)
        {
            this.envelope=envelope;
        }

        @Override
        protected String doInBackground(String... arg0) {
            HttpTransportSE ht=new HttpTransportSE(URL);
            ht.debug=true;  
            try
            {
                Log.d("WEBSERVICE","Calling");
               ht.call(SOAP_ACTION,envelope);
              SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
              String dump=ht.responseDump.toString();
              System.out.println("dumppp"+dump);
               Log.d("Tag","Response"+response);
               res=response.toString();

            }
            catch(Exception e)
            {
                e.printStackTrace();

            }

            return res;
        }

        protected void onPostExecute(String res) {
            super.onPostExecute(res);
            result.setText("completed");

    }
    } 
```

这是我得到的错误：

```
11-08 15:00:24.421: W/System.err(767): java.lang.NullPointerException
11-08 15:00:24.451: W/System.err(767):  at org.ksoap2.transport.ServiceConnectionSE.getResponseProperties(ServiceConnectionSE.java:85)
11-08 15:00:24.473: W/System.err(767):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:187)
11-08 15:00:24.483: W/System.err(767):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
11-08 15:00:24.504: W/System.err(767):  at com.example.androidservice.MainActivity$servicecall.doInBackground(MainActivity.java:81)
11-08 15:00:24.522: W/System.err(767):  at com.example.androidservice.MainActivity$servicecall.doInBackground(MainActivity.java:1)
11-08 15:00:24.533: W/System.err(767):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
11-08 15:00:24.541: W/System.err(767):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-08 15:00:24.661: W/System.err(767):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-08 15:00:24.671: W/System.err(767):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
11-08 15:00:24.685: W/System.err(767):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-08 15:00:24.711: W/System.err(767):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-08 15:00:24.722: W/System.err(767):  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:22:35.613

确保您收到的响应不为空。

```
 SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
    if(null==response){ 
        return;
    }
    else{
        //continue processing
    } 
```

[工作 KSOAP 代码](https://stackoverflow.com/questions/11763092/trying-to-build-a-correct-soap-request/13088110#13088110)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T03:57:52.920

请阅读这篇文章，它解释了你必须做的所有事情。您可以重新启动代码。有用。[http://insightforfuture.blogspot.com/2012/02/accessing-apache-axis2-web-service_24.html](http://insightforfuture.blogspot.com/2012/02/accessing-apache-axis2-web-service_24.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:56:13.160

只需在按钮单击时调用后台服务并更改 doInBackground 方法中的代码，如下所示

```
 SoapObject request = new SoapObject(NAMESPACE, methode);
        // Add the input required by web service

        request.addProperty("abc", value1);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;

        envelope.setOutputSoapObject(request);

        HttpTransportSE httpTransport = new HttpTransportSE(URL);

        httpTransport.call(Action, envelope);

        Object response = envelope.getResponse();

        Log.v("Responce", "Responce:::" + response.toString());

        result = response.toString(); 
```

# c# - Directory.GetFiles 有多个过滤器，收集一个字符串数组

> ID：13286344
> 
> 赞同：2
> 
> 时间：2012-11-08T09:41:46.640
> 
> 标签：c#, asp.net

我想将新项目添加到字符串数组，或者我可以保留在列表中。有人可以展示如何做到这一点吗？

```
 string sourceDir = "C:\\Users\\ozkan\\Desktop\\foto\\"
 string[] picList;        
 string pattern = "*.jpg|*.png|*.gif";
 string[] filters = pattern.Split('|');

 foreach (string filter in filters)
 { 
    // I want to collect all files url in picList
    // Directory.GetFiles returns string array
    picList = Directory.GetFiles(sourceDir, filter);           
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T09:47:16.943

尝试 ：

```
 string sourceDir = "C:\\Users\\ozkan\\Desktop\\foto\\"
 string[] picList;        
 string pattern = "*.jpg|*.png|*.gif";
 string[] filters = pattern.Split('|');
 picList =  filters .SelectMany(f=> Directory.GetFiles(sourceDir , f)).ToArray(); 
```

# .net - TPL - 按顺序运行一系列 .net 4.5 休息查询

> ID：13286348
> 
> 赞同：0
> 
> 时间：2012-11-08T09:42:02.970
> 
> 标签：.net, c#-4.0, task-parallel-library

我是一个 TPL 新手。不确定这个库是否是要走的路，但我想按顺序运行一组异步任务，但不阻塞 UI，而是按顺序运行并按启动顺序回调 - 有点像运行它们同步。因此，只有在任务完成并有 HttpResponseMessage 时才会有效地回调。然后才开始下一个任务。

所以行为将是

运行长时间运行的任务 1，当它完成回调时，我们可以对 UI 做一些事情，然后运行下一个长时间运行的任务，当它完成回调时，我们可以更新 UI。运行一个较短的任务，当它完成回调以便我们可以更新 UI

我已经看到了一些使用调度程序的示例，但无论如何这是我的代码

```
private void RunSequentially()
{
        var lcts = new LimitedConcurrencyLevelTaskScheduler(1);
        var factory = new TaskFactory(lcts);
        string username = "user";
        string password = "password";
        var handler = new HttpClientHandler
            {
               Credentials = new NetworkCredential(username, password), PreAuthenticate = true 
            };
        var client = new HttpClient(handler);

        List<Tuple<string,string,string>> taskTuples = new List<Tuple<string, string, string>>();
        taskTuples.Add(new Tuple<string, string, string>("POST", "http://longrunning", XDocument.Load(@"./somefile.xml").ToString()));
        taskTuples.Add(new Tuple<string, string, string>("GET", "http://getItem", null));

        factory.StartNew(
            () =>
                {
                    foreach(var tuple in taskTuples)
                    {
                        ProcessSequentially(tuple,ProcessCallback, client);
                    }
                });
    } 
```

和 ProcessSequentially 方法

```
private async void ProcessSequentially(Tuple<string, string, string> tuple, Action<string> callback, HttpClient client)
    {
        HttpResponseMessage message = null;
        if (tuple.Item1 == "POST")
        {
            message = await
                client.PostAsync(
                    tuple.Item2,
                    new StringContent(tuple.Item3));
        }
        else
        {
            message = await
                client.GetAsync(
                    tuple.Item2);
        }

        callback(message.ReasonPhrase);

    } 
```

现在假设 post 任务将是长时间运行的任务 - 我需要先启动长时间运行的任务并首先回调，然后在第一个回调后启动短时间运行的 GET，而不必通过 WaitAll 阻塞 UI等有没有办法做到这一点，也许作为 TPL 或 TPL 数据流中的一个事务，因为在我运行这个的那一刻，POST 确实首先开始，但是因为 get 是一个快速操作，它首先完成并首先返回，我想它们像同步操作一样按顺序发生...

因此，为了更改代码 - 这会是更好的方法吗？

```
foreach (var tuple in taskTuples)
        {
            factory.StartNew(
            () =>
            {
                this.ProcessSequentially(tuple,client);
            }).ContinueWith(this.FinishSequentialTask);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:59:35.203

您需要*顺序*的*异步*代码。`await`非常适合这个：

```
private async Task RunSequentially()
{
  string username = "user";
  string password = "password";
  var handler = new HttpClientHandler
  {
    Credentials = new NetworkCredential(username, password), PreAuthenticate = true 
  };
  var client = new HttpClient(handler);

  List<Tuple<string,string,string>> taskTuples = new List<Tuple<string, string, string>>();
  taskTuples.Add(new Tuple<string, string, string>("POST", "http://longrunning", XDocument.Load(@"./somefile.xml").ToString()));
  taskTuples.Add(new Tuple<string, string, string>("GET", "http://getItem", null));
  foreach (var tuple in taskTuples)
  {
    await Process(tuple, ProcessCallback, client);
  }
}

private async Task Process(Tuple<string, string, string> tuple, Action<string> callback, HttpClient client)
{
  HttpResponseMessage message = null;
  if (tuple.Item1 == "POST")
  {
    message = await
        client.PostAsync(
            tuple.Item2,
            new StringContent(tuple.Item3));
  }
  else
  {
    message = await
        client.GetAsync(
            tuple.Item2);
  }

  callback(message.ReasonPhrase);
}

private void ProcessCallback(string reason); 
```

这种简单的方法将`ProcessCallback`在 UI 线程上同步执行。如果你需要做`ProcessCallback`异步，你可以这样做：

```
private async Task Process(Tuple<string, string, string> tuple, Func<string, Task> callback, HttpClient client)
{
  HttpResponseMessage message = null;
  if (tuple.Item1 == "POST")
  {
    message = await
        client.PostAsync(
            tuple.Item2,
            new StringContent(tuple.Item3));
  }
  else
  {
    message = await
        client.GetAsync(
            tuple.Item2);
  }

  await callback(message.ReasonPhrase);
}

private async Task ProcessCallback(string reason); 
```

PS 我留下了你`Tuple`的 s 以尽量减少代码更改，但我建议你用自定义类型替换它们；它使代码更清晰。

# android - Phonegap上的Android Webview

> ID：13286350
> 
> 赞同：1
> 
> 时间：2012-11-08T09:42:10.730
> 
> 标签：android, html, cordova, iframe, android-webview

我们正在开发一个带有内置浏览器的 Android 应用程序；与此同时，我们想制作一个有效的 HTML5 模型，向我们的合作伙伴展示该应用程序的工作原理。唯一的问题是我用作内置浏览器的 iframe 无法加载各种网站，例如 Facebook、google 等，因为它们的安全策略；我可以用 Phonegap 我的 HTML5 应用程序并拥有一个本机控制器而不是可以打开任何网页的 iframe 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:35:09.897

Phonegap 允许您加载外部网页。您需要将 config.xml 中的 URL 列入白名单。您可以使用 Java 或 Javascript 加载外部网页。

使用 Java 你会做类似的事情

```
public class ProductFeedback extends DroidGap {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // load with on activity creation with Java
    super.loadUrl("www.facebook.com");

    // or load local page where javascript loads the external page
    super.loadUrl("file:///android_asset/www/index.html");
} 
```

... 使用 javascript

```
window.onload() = function() {
    window.location.href = "http://www.facebook.com";
} 
```

# c# - EF - 无法删除对象

> ID：13286351
> 
> 赞同：0
> 
> 时间：2012-11-08T09:42:12.057
> 
> 标签：c#, entity-framework

为什么这段代码不起作用？它插入一个对象但不删除它

```
public int Toggle(RequestArchive RequestArchiveObj)
{
   var ra = DataContext.RequestArchives.Where(rec => rec.UserId == RequestArchiveObj.UserId && rec.RequestId == RequestArchiveObj.RequestId);

   if(ra.Count() > 0)
   {
        foreach (var item in ra)
        {                    
            DataContext.DeleteObject(item);
        }
   }
   else
   {
        DataContext.AddToRequestArchives(RequestArchiveObj);
   }

   DataContext.SaveChanges();
   return RequestArchiveObj.Id;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:09:15.503

您的代码存在潜在危险问题，您的问题可能与此有关：

如果您在不执行查询对象（由 返回的对象`DataContext.RequestArchives.Where()`）中循环，那么您将对循环中的每个项目都进行一次到数据库的往返。这称为[**N+1 选择问题**](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)。

您可以使用以下方法缓解这种情况`ToList()`：

```
var ra = DataContext.RequestArchives
                    .Where(rec => 
                           rec.UserId == RequestArchiveObj.UserId && 
                           rec.RequestId == RequestArchiveObj.RequestId)
                    .ToList(); // this executes the query
// ...
foreach (var item in ra) // without ToList() this will query every item by itself
{                    
    DataContext.DeleteObject(item); // and this might collide with the query
} 
```

我不确定这一点，但可能会出现删除问题，因为您尝试删除对象，同时仍通过`foreach`循环查询它们。如果是这种情况，一旦`ToList()`按照上面的建议使用，它应该可以工作。

# c# - 是否可以自动化网站输入

> ID：13286354
> 
> 赞同：1
> 
> 时间：2012-11-08T09:42:23.553
> 
> 标签：c#, html-parsing

我的一位同事向我提出了一个关于编写用于下载网上商店图像的程序的问题。

我有一个带有文章编号的 Excel 列表。为了找到合适的产品，这个数字必须被插入到网上商店的 findbox 中。怎么可能写程序找到这个产品，然后返回页面源进行解析。

亲切的问候， Luuk Krijnen

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:47:49.440

回顾[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)课堂。

您还会发现[Fiddler](http://www.fiddler2.com/)可用于跟踪浏览器发送到服务器的内容（因此您可以在代码中重现该内容）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:22:44.183

看一下搜索站点的 url...例如在 Stackoverflow 它看起来像这样：

```
http://meta.stackoverflow.com/search?q=testsearch 
```

或者看看ebay：

```
http://www.ebay.de/itm/330813122179 
```

所以你可以添加搜索文本/文章编号。

[获取网页来源](http://www.daniweb.com/software-development/csharp/threads/194151/getting-source-of-webpage)

```
string getPageSource(string URL)
{
    System.Net.WebClient webClient = new System.Net.WebClient();
    string strSource = webClient.DownloadString(URL);
    webClient.Dispose();
    return strSource;
} 
```

提示：将 excel 列表另存为 CSV

# c# - 标准库中有类型 T 吗？列表 其中 T：类，新（）

> ID：13286356
> 
> 赞同：0
> 
> 时间：2012-11-08T09:42:29.190
> 
> 标签：c#, .net

我正在测试一种需要`IList<T> where T: class, new()`. 为简洁起见，我想使用 .NET 标准库中的类型对其进行测试。但是，我想不出任何符合条件的！除了`List<List<T>>`- 我宁愿不使用它，因为操作集合会使测试难以阅读。

你能想出符合条件的类型吗？我不想添加任何新的参考。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T09:44:36.217

`List<object>` 或者怎么样`object[]`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T09:52:15.937

有许多类可以使用，尽管最适合您的是在您的测试类中创建一个小型私有类。

最简单的方法是使用`object`-s：

```
var v1 = new object();
var v2 = new object(); 
```

如果您想要更容易识别的东西，您可以使用`System.Version`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T09:48:58.407

万一你错过了这意味着什么，你可以提供任何包含 T 的 IList 实现。 T 必须是一个[class](http://msdn.microsoft.com/en-us/library/d5x73970%28v=vs.80%29.aspx)，并且必须有一个无[参数的构造函数](http://msdn.microsoft.com/en-us/library/sd2w2ew5%28v=vs.80%29.aspx)，因此它可以是许多类中的任何一个，`object`（正如 Marc 指出的那样, 这是迄今为止最简单的) 或 a`System.Windows.Forms.Button`或 a `SqlConnection`。

只需创建一个新`List<object>`的`List<Button>`或 a`List<SqlConnection>`以使用这些示例中的任何一个。

# android - 通过共享意图 android 共享到 facebook、twitter

> ID：13286358
> 
> 赞同：9
> 
> 时间：2012-11-08T09:42:35.563
> 
> 标签：android, facebook, twitter, share

我目前正在尝试将文本分享到 gmail、facebook 和 twitter。我正在使用共享意图方法进行共享。下面是我用来分享的代码

```
Intent sharingIntent = new Intent(Intent.ACTION_SEND);
       sharingIntent.setType("plain/text");
       sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, "My text");
       startActivity(Intent.createChooser(sharingIntent,"Share using")); 
```

上面的代码只显示了 gmail 和 skype 等共享选项。为什么即使我的设备中安装了 facebook 和 twitter 应用程序，列表中也没有显示 facebook 和 twitter 选项？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-11-25T14:38:07.953

我不知道是否有人还在读这篇文章，但如果人们还在寻找我找到了一个更简单的答案：

```
List<Intent> targetedShareIntents = new ArrayList<Intent>();

Intent facebookIntent = getShareIntent("facebook", "subject", "text");
if(facebookIntent != null)
    targetedShareIntents.add(facebookIntent);

Intent twitterIntent = getShareIntent("twitter", "subject", "text");
    if(twitterIntent != null)
        targetedShareIntents.add(twitterIntent);

Intent gmailIntent = getShareIntent("gmail", "subject", "text");
    if(gmailIntent != null)
        targetedShareIntents.add(gmailIntent);

Intent chooser = Intent.createChooser(targetedShareIntents.remove(0), "Delen");

chooser.putExtra(Intent.EXTRA_INITIAL_INTENTS, targetedShareIntents.toArray(new Parcelable[]{}));

startActivity(chooser); 
```

以及 getShareIntent 方法（此方法搜索 mime 类型 text/plain，您可以使用其他 mime 类型搜索这些类型或使用 /*/ 搜索所有类型：

```
private Intent getShareIntent(String type, String subject, String text) 
{
    boolean found = false;
    Intent share = new Intent(android.content.Intent.ACTION_SEND);
    share.setType("text/plain");

    // gets the list of intents that can be loaded.
    List<ResolveInfo> resInfo = getActivity().getPackageManager().queryIntentActivities(share, 0);
    System.out.println("resinfo: " + resInfo);
    if (!resInfo.isEmpty()){
        for (ResolveInfo info : resInfo) {
            if (info.activityInfo.packageName.toLowerCase().contains(type) || 
                    info.activityInfo.name.toLowerCase().contains(type) ) {
                share.putExtra(Intent.EXTRA_SUBJECT,  subject);
                share.putExtra(Intent.EXTRA_TEXT,     text);
                share.setPackage(info.activityInfo.packageName);
                found = true;
                break;
            }
        }
        if (!found)
            return null;

        return share;
    }
    return null;
} 
```

* * *

如果你不想使用这种方法，你可以像这样创建 Intent：

```
Intent normalIntent = new Intent(Intent.ACTION_SEND);
normalIntent.setType("text/plain");
normalIntent.setPackage("com.katana.facebook"); // I just know the package of Facebook, the rest you will have to search for or use my method.
normalIntent.putExtra(Intent.EXTRA_TEXT, "The text you want to share to Facebook"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-08T10:21:58.657

与 Facebook 共享的问题是它只接受 EXTRA_TEXT 中的 url。然后，本机 FB 应用程序将从该 url 获取文本和图像来撰写帖子。这不是“错误”，而是他们给予官方应用程序的预期行为：-/

考虑到 Twitter 只接受文本/纯文本，没有任何标记，最多 144 个字符。

我制作了自己的“分享”对话框来拦截所有不同的行为，并为每个目标意图提供他们接受的内容：HTML、纯文本、FB URL 和 Twitter 短文本。

代码如下：

```
public class ShareHelper implements AdapterView.OnItemClickListener {
            private static final String TAG = ShareHelper.class.getSimpleName();

            private Activity mContext;
            private Dialog mDialog;
            private LayoutInflater mInflater;
            private GridView mGrid;

   private ShareIntentAdapter mAdapter;
        private int mMaxColumns;

        private List<ResolveInfo> plainTextActivities;
        private Set<String> htmlActivitiesPackages;

        private String subject;
        private String textbody;
        private CharSequence htmlbody;
        private String twitterBody;
        private String facebookBody;

        public ShareHelper(Activity context, String subject, String textbody, CharSequence htmlbody, String twitterBody, String facebookBody) {
            this.mContext = context;

            this.subject = subject;
            this.textbody = textbody;
            this.htmlbody = htmlbody;
            this.twitterBody = twitterBody;
            this.facebookBody = facebookBody;
        }

        @SuppressLint("NewApi")
        public void share() {

            this.mInflater = LayoutInflater.from(mContext);

            final Intent sendIntent = new Intent(android.content.Intent.ACTION_SEND);

            sendIntent.setType(HTTP.PLAIN_TEXT_TYPE);
            plainTextActivities = mContext.getPackageManager().queryIntentActivities(sendIntent, 0);

            if (plainTextActivities.size() > 0) { 
                htmlActivitiesPackages = new HashSet<String>();
                sendIntent.setType("text/html");
                final List<ResolveInfo> htmlActivities = mContext.getPackageManager().queryIntentActivities(sendIntent, 0);
                for (ResolveInfo resolveInfo : htmlActivities) {
                    htmlActivitiesPackages.add(resolveInfo.activityInfo.packageName);
                }

                mAdapter = new ShareIntentAdapter();

                final View chooserView = mInflater.inflate(R.layout.dialog_share_us_chooser, null);
                mGrid = (GridView) chooserView.findViewById(R.id.resolver_grid);
                mGrid.setAdapter(mAdapter);
                mGrid.setOnItemClickListener(this);

                mMaxColumns = mContext.getResources().getInteger(R.integer.maxResolverActivityColumns);
                mGrid.setNumColumns(Math.min(plainTextActivities.size(), mMaxColumns));

                AlertDialog.Builder builder;
                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
                    builder = new AlertDialog.Builder(mContext, AlertDialog.THEME_DEVICE_DEFAULT_LIGHT);
                } else {
                    builder = new AlertDialog.Builder(mContext);
                }
                builder.setTitle(R.string.text_share_us_title);
                builder.setView(chooserView);

                mDialog = builder.create();
                mDialog.show();
            } else {
                Toast.makeText(mContext, "No social apps installed to share ChurchLink!", Toast.LENGTH_LONG).show();
            }
        }

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            ResolveInfo info = (ResolveInfo) mAdapter.getItem(position);

            Intent intent = new Intent(android.content.Intent.ACTION_SEND);
            intent.setClassName(info.activityInfo.packageName, info.activityInfo.name);
            intent.setType("text/plain");
            intent.putExtra(Intent.EXTRA_TITLE, subject);
            intent.putExtra(Intent.EXTRA_SUBJECT, subject);

            if (info.activityInfo.packageName.contains("facebook")) {
                intent.putExtra(Intent.EXTRA_TEXT, facebookBody);

            } else if (info.activityInfo.packageName.contains("twitter")) {
                intent.putExtra(Intent.EXTRA_TEXT, twitterBody);

            } else if (htmlActivitiesPackages.contains(info.activityInfo.packageName)) {
                intent.putExtra(Intent.EXTRA_TEXT, htmlbody);

            } else {
                intent.putExtra(Intent.EXTRA_TEXT, textbody);
            }
            Log.d(TAG, info.activityInfo.packageName);
            ((Activity) mContext).startActivity(intent);

            mDialog.dismiss();
        }

        public class ShareIntentAdapter extends BaseAdapter {

            public ShareIntentAdapter() {
                super();
            }

            @Override
            public int getCount() {
                return plainTextActivities != null? plainTextActivities.size() : 0;
            }

            @Override
            public ResolveInfo getItem(int position) {
                return plainTextActivities.get(position);
            }

            @Override
            public long getItemId(int position) {
                return position;
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View view;
                if (convertView == null) {
                    view = mInflater.inflate(R.layout.griditem_share_us, parent, false);
                } else {
                    view = convertView;
                }
                bindView(view, plainTextActivities.get(position));
                return view;
            }

            private final void bindView(View view, ResolveInfo info) {
                TextView text = (TextView)view.findViewById(android.R.id.text1);
                ImageView icon = (ImageView)view.findViewById(android.R.id.icon);

                text.setText(info.activityInfo.applicationInfo.loadLabel(mContext.getPackageManager()).toString());
                icon.setImageDrawable(info.activityInfo.applicationInfo.loadIcon(mContext.getPackageManager()));
            }
        }
    } 
```

似乎有些人也想要布局文件。他们是这样的：

dialog_share_us_chooser.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/resolver_grid"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:clipToPadding="false"
    android:columnWidth="128dp"
    android:numColumns="4"
    android:padding="16dp"
    android:scrollbarStyle="outsideOverlay" /> 
```

griditem_share_us.xml（来自自己的 AOSP 项目）：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
/* //device/apps/common/res/any/layout/resolve_list_item.xml
**
** Copyright 2006, The Android Open Source Project
**
** Licensed under the Apache License, Version 2.0 (the "License");
** you may not use this file except in compliance with the License.
** You may obtain a copy of the License at
**
**     http://www.apache.org/licenses/LICENSE-2.0
**
** Unless required by applicable law or agreed to in writing, software
** distributed under the License is distributed on an "AS IS" BASIS,
** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
** See the License for the specific language governing permissions and
** limitations under the License.
*/
-->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:gravity="center"
              android:orientation="vertical"
              android:layout_height="wrap_content"
              android:layout_width="match_parent"
              android:padding="16dp">
<!--               android:background="@android:drawable/activity_picker_bg" -->

    <!-- Activity icon when presenting dialog
         Size will be filled in by ResolverActivity -->
    <ImageView android:id="@android:id/icon"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:scaleType="fitCenter" />

    <!-- Activity name -->
    <TextView android:id="@android:id/text1"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:gravity="center"
              android:minLines="2"
              android:maxLines="2"
              android:paddingLeft="4dip"
              android:paddingRight="4dip" />
<!--               android:textAppearance="android:attr/textAppearanceSmall" -->
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T09:52:02.800

如果将上面的行更改为：

`sharingIntent.setType("text/plain");`, 这个问题能解决吗？

我认为是`text/plain`，不是`plain/text`。

来自 Android 开发者的[参考：](http://developer.android.com/reference/android/webkit/MimeTypeMap.html#hasMimeType%28java.lang.String%29)

> mimeType MIME 类型（即文本/纯文本）

# android - Android Activity 未找到广播接收器

> ID：13286361
> 
> 赞同：1
> 
> 时间：2012-11-08T09:42:47.220
> 
> 标签：android, exception, broadcastreceiver

您好我正在尝试根据 SQL 数据库的输入设置通知。当我尝试保存输入的数据时，我收到错误 AlarmReciever Activity Not Found；

我最初在清单中有这个

```
<receiver  android:process=":remote" android:name="AlarmReciever"></receiver> 
```

当我在清单中添加以下内容时，我得到一个类似的错误，无法找到显式类。任何建议将不胜感激。

```
<activity
            android:name=".AlamReciever"
            android:label="@string/title_activity_user_menu" >

        </activity> 
```

Addcourse 课程片段

```
public void onClick (View addModuleButton) 
            {

                String moduleCode = sqlModuleCode.getText().toString();
                String moduleName = sqlModuleName.getText().toString();

                String moduleType = spinnerModuleType.getSelectedItem().toString();
                String moduleDay = spinnerModuleDay.getSelectedItem().toString();

                String moduleStartHour = timePickerStart.getCurrentHour().toString();
                String moduleStartMinute = timePickerStart.getCurrentMinute().toString();

                String moduleEndHour = timePickerEnd.getCurrentHour().toString();
                String moduleEndMinute = timePickerEnd.getCurrentMinute().toString();

                String moduleLocation = sqlModuleLocation.getText().toString();
                String moduleComments = sqlModuleComments.getText().toString();

                MODULEDATABASE = new database(AddCourse.this);
                MODULEDATABASE.openToWrite();
                MODULEDATABASE.createEntry(moduleCode , moduleName, moduleType, moduleDay, moduleStartHour, 
                        moduleStartMinute, moduleEndHour, moduleEndMinute, moduleLocation, moduleComments);

                int Hour = Integer.parseInt(moduleStartHour);
                int Minute = Integer.parseInt(moduleStartMinute);

                Calendar cal = Calendar.getInstance();

                int currentDay = cal.get(Calendar.DAY_OF_WEEK);
                int setDay = 0;
                if(moduleDay=="Sunday")
                {
                    setDay = 1;
                }
                else if(moduleDay=="Monday")
                {
                    setDay = 2;
                }
                else if(moduleDay=="Tuesday")
                {
                    setDay = 3;
                }
                else if(moduleDay=="Wednesday")
                {
                    setDay = 4;
                }
                else if(moduleDay=="Thursday")
                {
                    setDay = 5;
                }
                else if(moduleDay=="Friday")
                {
                    setDay = 6;
                }
                else if(moduleDay=="Saturday")
                {
                    setDay = 7;
                }

                   cal.set(Calendar.DAY_OF_WEEK,4);
                   cal.set(Calendar.HOUR_OF_DAY,Hour);
                   cal.set(Calendar.MINUTE, Minute);
                   Intent intent = new Intent(AddCourse.this, AlarmReciever.class);
                   intent.putExtra("alarm_message",moduleName+ "is about to begin");
                   PendingIntent sender = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

                   // Get the AlarmManager service
                   AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
                   am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender);
                   long weekly = AlarmManager.INTERVAL_DAY * 7;
                am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),weekly,sender);
                startActivity(intent); 
```

报警接收器类

```
public class AlarmReciever extends BroadcastReceiver {

 @Override

     public void onReceive(Context context, Intent intent) {     
         NotificationCompat.Builder nb = new NotificationCompat.Builder(context);
         nb.setContentTitle("title");
         nb.setContentText("message");
         nb.setSmallIcon(R.drawable.ic_launcher);

         NotificationManager nm = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
         final Intent notificationIntent = new Intent(context, AddCourse.class);
         notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);

         final PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
         nb.setContentIntent(contentIntent);
         Notification notification = nb.getNotification();
         nm.notify(0, notification);
      }

} 
```

目录日志

```
11-07 12:51:41.195: E/AndroidRuntime(3927): Uncaught handler: thread main exiting due to uncaught exception
11-07 12:51:41.216: E/AndroidRuntime(3927): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.mycoursetimetable/com.example.mycoursetimetable.AlarmReciever}; have you declared this activity in your AndroidManifest.xml?
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1404)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.app.Activity.startActivityForResult(Activity.java:2749)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.app.Activity.startActivity(Activity.java:2855)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at com.example.mycoursetimetable.AddCourse.onClick(AddCourse.java:169)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.view.View.performClick(View.java:2364)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.view.View.onTouchEvent(View.java:4179)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.widget.TextView.onTouchEvent(TextView.java:6541)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.view.View.dispatchTouchEvent(View.java:3709)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.os.Looper.loop(Looper.java:123)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at android.app.ActivityThread.main(ActivityThread.java:4363)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at java.lang.reflect.Method.invokeNative(Native Method)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at java.lang.reflect.Method.invoke(Method.java:521)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
11-07 12:51:41.216: E/AndroidRuntime(3927):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:46:43.107

如果您使用广播接收器，则应将其声明为接收器，而不是活动，并且通常应具有与之关联的操作。像这样的东西：

```
<receiver android:name=".myReceiverName" android:exported="true">
<intent-filter>
    <action android:name="android.intent.action.some_action"/>
    <data android:scheme="package" android:path="com.blah.mypackage">
</intent-filter> 
```

详细解释见官方指南：

[https://developer.android.com/guide/topics/manifest/receiver-element.html](https://developer.android.com/guide/topics/manifest/receiver-element.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:46:44.347

您正在注册 `Activity`并且`BroadcastReceiver`在文件中的同一个包中使用相同的名称，`AndroidManifest.xml`因此使用 Activity 名称而不是 BroadcastReceiver 类来注册 Activity

```
 <activity
            android:name=".Your_Activity_Name"
            android:label="@string/title_activity_user_menu" >
        </activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:49:15.353

试试这个，并保持接收者的名称与活动不同。

```
<activity
        android:name="com.example.mycoursetimetable.AlarmReciever"
        android:label="@string/title_activity_user_menu" >

    </activity> 
```

# git - 将 git repo 下的目录移动到单独的 repo

> ID：13286363
> 
> 赞同：1
> 
> 时间：2012-11-08T09:42:48.067
> 
> 标签：git, repository

我有一个 git 存储库，现在我想将其中一个子目录（具有完整的历史记录）移动到一个单独的存储库中。

我知道这不是 git 的正确用例，但是在 git 中可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:52:59.243

考虑使用`git subtree`.

现在内置在 msysgit v1.8.0 中。

自 v1.7.11 起包含在 git 中。

# android - 如何在android中更新联系人的星标值？

> ID：13286364
> 
> 赞同：1
> 
> 时间：2012-11-08T09:42:49.573
> 
> 标签：android

在 android 中，我想从应用程序中收藏现有的联系人。我正在`getContentResolver.update()`为此使用方法。没有抛出异常，但是当我检查联系人时，他们没有更新。我尝试了所有提到的解决方案，但不知何故它不起作用。请有人可以给我一个确切的解决方案。

# javascript - 使用 Javascript 读取/写入 Google 电子表格单元格提要

> ID：13286368
> 
> 赞同：4
> 
> 时间：2012-11-08T09:42:54.157
> 
> 标签：javascript, jquery, google-api, google-sheets, google-data-api

我尝试通过 javascript 使用 http 请求在 google 电子表格中读取和写入单元格。“读”操作有效，但“写”操作失败。请帮忙指出我应该在我的“写”操作代码中修改哪一部分。

我遵循的编写示例来自这里[https://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)，但它不起作用。

我的读取操作（这是有效的）：

```
http_request.onreadystatechange = function() {
    process_cellrw(http_request);
};
http_request.open('GET',"https://spreadsheets.google.com/feeds/cells/0Aqed....RHdGc/od6/private/full/R1C1", true);
http_request.setRequestHeader('Authorization','Bearer ' + strAccessToken);
http_request.send(null); 
```

我的写操作（这不起作用）：

```
var testxml =  ['&lt;entry xmlns="http://www.w3.org/2005/Atom" <br>
    xmlns:gs="http://schemas.google.com/spreadsheets/2006"&gt;',<br>
    '&lt;id>https://spreadsheets.google.com/feeds/cells/0Aqed....RHdGc/od6/private/full/R1C1&lt;/id&gt;',<br>
    '&lt;link rel="edit" type="application/atom+xml"<br> href="https://spreadsheets.google.com/feeds/cells/0Aqed....RHdGc/od6/private/full/R1C2/9zlgi"/&gt;',<br>
    '&lt;gs:cell row="1" col="1" inputValue="xxxx"/&gt;',<br>
    '&lt;/entry&gt;'].join('');<br>

http_request.onreadystatechange = function() {
    process_cellrw();
};

http_request.open('PUT',"https://spreadsheets.google.com/feeds/cells/0Aqed....RHdGc/od6/private/full/R1C2/9zlgi");
http_request.setRequestHeader('Authorization','Bearer ' + strAccessToken);
http_request.setRequestHeader('GData-Version','3.0');
http_request.setRequestHeader('Content-Type', 'application/atom+xml');
http_request.setRequestHeader('If-Match','*');
http_request.setRequestHeader('Content-Length', testxml.length.toString());
http_request.send(testxml); 
```

写操作总是`http_request.status = 0` 在回调函数中接收`process_cellrw()`。

我的环境是 Windows 7 + Chrome 浏览器。我还在 Android + Webkit 上测试过，仍然失败。

我还测试了按列表提要添加一行，也通过接收失败`http_request.status = 0`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:02:42.523

我知道这不能回答您的问题，但我会打开 Chrome 的“开发者工具”，转到“网络”并检查来自谷歌的 API 调用响应。它可能包含解释失败原因的标题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:28:39.203

我找到了根本原因：docs.googole.com 和电子表格.google.com 不支持跨域 XMLHttpRequest POST/PUT

XMLHttpRequest POST/PUT 将首先向另一个域上的资源发送一个 HTTP OPTIONS 请求标头，以确定实际请求是否可以安全发送。但是 docs.googole.com 和 preadsheets.google.com 始终会针对此请求回复“404 Not Found”。这就是为什么我总是`http_request.status = 0`在回调函数中收到`process_cellrw()`。

一种解决方案是使用另一个允许跨域 HTTP 请求的 CGI，例如 PHP。[另一种解决方案是在Google Apps Script](https://script.google.com/)`UrlFetchApp`中使用发送`HTTP PUT`请求的功能来实现写入操作，然后我们可以使用来触发这个 Apps Script。`XMLHttpRequest GET`

# actionscript-3 - Flex 3：颜色选择器自定义

> ID：13286375
> 
> 赞同：0
> 
> 时间：2012-11-08T09:43:08.000
> 
> 标签：actionscript-3, apache-flex, flex3, color-picker

我在 Flex 3.6 项目中使用 ColorPicker 控件，我想像这样自定义它：

![在此处输入图像描述](../Images/81ddcfdc116deead604c8f129445e491.png)

基本上从 ColorPicker 选择器按钮中移除边框，并将选择器和色板托盘之间的间隙大小减小到零。

这有可能吗？

我已经搜索了 ColorPicker 的所有属性和样式，但没有成功......

非常感谢！

提供

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T21:47:36.593

您可以使用 mx_internal 命名空间来自定义这样的组件。将以下内容添加到您的导入中：

```
import mx.core.mx_internal;
use namespace mx_internal; 
```

现在您可以访问以前无法访问的组件部分。例如，我需要在右侧空白处的 ColorPicker 的 SwatchPanel 中添加一个“首选项”按钮。

我创建了一个扩展 ColorPicker 的自定义组件，并为 DropdownEvent.OPEN 添加了一个 EventListener。在事件处理程序方法中，我得到了这样的 SwatchPanel：

```
var swatchPanel:SwatchPanel = this.mx_internal::dropdown; 
```

然后我使用 swatchPanel.addChildAt(...) 添加我的首选项按钮。简单的！

您应该能够通过覆盖 createChildren 方法并弄乱它的 children 或 mx_internal 属性来做类似的事情。

# cuda - 启动多个内核 cuda

> ID：13286376
> 
> 赞同：0
> 
> 时间：2012-11-08T09:43:12.943
> 
> 标签：cuda

我想在 cuda 中启动多个内核函数，所以我声明了两组单独的网格、块名称和每组的值是不同的。例如：

```
 dim3 gridDim_1(val_1,1);
    dim3 blockDim_1(val_2,val_3);

    dim3 gridDim_2(val_4,1);
    dim3 blockDim_2(val_5,val_6);

    for(i=0;i<somenum;i++)
   {
     kernel_1<<<gridDim_1,blockDim_1>>>(agr1,arg2);
     kernel_2<<<gridDim_2,blockDim_2>>>(agr3,arg4);
   } 
```

但是编译器抛出错误说错误：gridDim_1 是未知的，并且对于块和网格的其他声明类似。那么我如何启动这两个具有不同名称的网格和块的内核呢？我需要在这里提到网格中的块数和块中的线程数以某种方式取决于用户输入。感谢您的帮助。

实际上主要代码真的很大，我也时不时地改变以消除错误。我只在我认为问题所在的地方发布其中的一部分：

```
int k,sim_step;
int counter_top,counter_bottom;
............
...................

for(k=0;k<=sim_step;k++)
{  

    dim3 gridDim(1,1);
    dim3 blockDim(counter_top,1,1); 

    agent_movement_top<<<gridDim,blockDim>>>(args..)  ;

    dim3 gridDim(1,1);
    dim3 blockDim(counter_bottom,1,1);  

    agent_movement_bot<<<gridDim,blockDim>>>(args...);

} 
```

我得到的当前错误是：错误 LNK2001：未解析的外部符号 _gridDim 错误 LNK2001：未解析的外部符号 _blockDim

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:11:09.630

您定义了两次相同的变量。例如，您可以通过附加块（`{`...`}`对）限制每个定义的范围来消除该错误：

```
int k,sim_step;
int counter_top,counter_bottom;
............
...................

for(k=0;k<=sim_step;k++)
{  
    {
        dim3 gridDim(1,1);
        dim3 blockDim(counter_top,1,1); 

        agent_movement_top<<<gridDim,blockDim>>>(args..)  ;
    }
    {
        dim3 gridDim(1,1);
        dim3 blockDim(counter_bottom,1,1);  

        agent_movement_bot<<<gridDim,blockDim>>>(args...);
    }
} 
```

# cleditor - 如何从word文档复制的文本中删除格式

> ID：13286380
> 
> 赞同：-5
> 
> 时间：2012-11-08T09:43:17.710
> 
> 标签：cleditor

当我从 word 文档中复制文本时，当我将该文本粘贴到网页上的 cleditor 时，应用的格式也会被复制，这是我们的 rails 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:50:17.530

[cleditor google groups 似乎有答案：](https://groups.google.com/forum/?fromgroups=#!searchin/cleditor/remove%2420formatting/cleditor/WvU-RIMorp4/UNtHA8PBIAQJ)

> 下面是我对 updateTextArea 使用的扩展，其中包括过滤 Microsoft Word if / endif 垃圾并将标签标准化为 xhtml / html5 友好标签的组合：br|b|del|ins|i|li|ol|p|ul

```
(function($) {
 $.cleditor.defaultOptions.docType = "<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>";
 $.cleditor.defaultOptions.docCSSFile = AkmeWindowUtil.CONTEXT_PATH+"/embed/cleditor/jquery.cleditor.iframe.css";

 $.cleditor.defaultOptions.updateTextArea = function(html) { //if (document.forms[0].debugArea) document.forms[0].debugArea.value = html;
  // Normalize to xhtml/html5 common standards and only keep allowed tags.
  var ary = html.split("<");
  var end = -1;
  for (var i=0; i<ary.length; i++) {
   if (ary[i].lastIndexOf("!--[if ", 7) === 0) { // handle Microsoft <!--[if ... <![endif]-->
    ary[i] = "";
    var found = false;
    for (i++; i<ary.length; i++) {
     if (ary[i].lastIndexOf("![endif]-->", 11) === 0) {found = true;}
     ary[i] = "";
     if (found) break;
    }
    if (i>=ary.length) break;
   }
   end = ary[i].indexOf(">");
   if (end == -1) continue;
   ary[i] = ary[i].substring(0,end).toLowerCase()+ary[i].substring(end);
   var search = ["strong>","em>","strike>","u>","br>"];
   var replace = ["b>","i>","del>","ins>","br/>"];
   for (var j=0; j<search.length; j++) {
    var pos = ary[i].lastIndexOf(search[j], search[j].length+1);
    if (pos == 0 || (pos == 1 && ary[i].charAt(0) == '/')) {
     ary[i] = (pos == 1 ? "/" : "")+ replace[j] +ary[i].substring(search[j].length+pos);
    }
   }
   var spellcheckerRE = /^\/?span[^\/>]*\/?>/m;
   var cleanupRE = /^(\/?)(br|b|del|ins|i|li|ol|p|ul)[^a-zA-Z\/>]*[^\/>]*(\/?)>/m;
   if (spellcheckerRE.test(ary[i])) {
    ary[i] = ary[i].replace(spellcheckerRE, "");
   } else if (cleanupRE.test(ary[i])) {
    ary[i] = ary[i].replace(cleanupRE, "<$1$2$3>");
    ary[i] = ary[i].replace(/^<p>/, "");
    ary[i] = ary[i].replace(/^<\/?p\/?>/, "<br/>");
   } else {
    ary[i] = end+1 < ary[i].length ? ary[i].substring(end+1) : "";
   }
   ary[i] = ary[i].replace(/&nbsp;/gm, "");
   ary[i] = ary[i].replace(/\n\n/gm, "\n");
  }
  html = ary.join("");
  // Trim leading whitespace.
  var trimRE = /^(\s+|&nbsp;|<br\/?>|<p>(&nbsp;)*<\/p>)+/m;
  if (trimRE.test(html)) {
   html = html.replace(trimRE, "");
  }
  // Test if there is any actual non-whitespace text content.
  var body = document.getElementsByTagName("body")[0];
  var div = document.createElement("div");
  div.style.display = "none";
  body.appendChild(div);
  div.innerHTML = html;
  var text = div.innerText || div.textContent;
  body.removeChild(div);
  var trimRE = /\S/m;
  if (!trimRE.test(text)) html = "";
  return html;
 };
})(jQuery); 
```

# c# - NHibernate 无法将数据库状态与会话同步

> ID：13286382
> 
> 赞同：5
> 
> 时间：2012-11-08T09:43:24.160
> 
> 标签：c#, nhibernate, concurrency, optimistic-locking

我正在检查 NHibernate 的日志文件，发现随机错误，如下所示：

```
NHibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [MaltaIndependent.Modules._AutoGen.MemberImpl#353796206]
   at NHibernate.Persister.Entity.AbstractEntityPersister.Update(Object id, Object[] fields, Object[] oldFields, Object rowId, Boolean[] includeProperty, Int32 j, Object oldVersion, Object obj, SqlCommandInfo sql, ISessionImplementor session) in c:\Repository\Work\CodeBase\C#\+OpenSource\nHibernate\nhibernate-core-master-v3.3.1\src\NHibernate\Persister\Entity\AbstractEntityPersister.cs:line 2821
   at NHibernate.Persister.Entity.AbstractEntityPersister.UpdateOrInsert(Object id, Object[] fields, Object[] oldFields, Object rowId, Boolean[] includeProperty, Int32 j, Object oldVersion, Object obj, SqlCommandInfo sql, ISessionImplementor session) in c:\Repository\Work\CodeBase\C#\+OpenSource\nHibernate\nhibernate-core-master-v3.3.1\src\NHibernate\Persister\Entity\AbstractEntityPersister.cs:line 2702
   at NHibernate.Persister.Entity.AbstractEntityPersister.Update(Object id, Object[] fields, Int32[] dirtyFields, Boolean hasDirtyCollection, Object[] oldFields, Object oldVersion, Object obj, Object rowId, ISessionImplementor session) in c:\Repository\Work\CodeBase\C#\+OpenSource\nHibernate\nhibernate-core-master-v3.3.1\src\NHibernate\Persister\Entity\AbstractEntityPersister.cs:line 3007
   at NHibernate.Action.EntityUpdateAction.Execute() in c:\Repository\Work\CodeBase\C#\+OpenSource\nHibernate\nhibernate-core-master-v3.3.1\src\NHibernate\Action\EntityUpdateAction.cs:line 79
   at NHibernate.Engine.ActionQueue.Execute(IExecutable executable) in c:\Repository\Work\CodeBase\C#\+OpenSource\nHibernate\nhibernate-core-master-v3.3.1\src\NHibernate\Engine\ActionQueue.cs:line 136
   at NHibernate.Engine.ActionQueue.ExecuteActions(IList list) in c:\Repository\Work\CodeBase\C#\+OpenSource\nHibernate\nhibernate-core-master-v3.3.1\src\NHibernate\Engine\ActionQueue.cs:line 125
   at NHibernate.Engine.ActionQueue.ExecuteActions() in c:\Repository\Work\CodeBase\C#\+OpenSource\nHibernate\nhibernate-core-master-v3.3.1\src\NHibernate\Engine\ActionQueue.cs:line 171
   at NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session) in c:\Repository\Work\CodeBase\C#\+OpenSource\nHibernate\nhibernate-core-master-v3.3.1\src\NHibernate\Event\Default\AbstractFlushingEventListener.cs:line 241 
```

关于这个问题，我知道这是由于乐观并发而发生的，并且“预计”会发生。我的主要问题是堆栈跟踪 - 它没有说明它发生在“哪里”，它开始了这一行`NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecution`。我尝试下载 NHibernate 源代码并查看，但对于为什么没有显示完整的堆栈跟踪没有多大意义。我还有其他类似错误的堆栈跟踪，这些错误使我陷入`Transaction.Commit()`困境。有什么想法可以找到实际上引发错误的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:08:38.310

我遇到了同样的问题，结果发现我在映射字段（不是引用或 hasmany）上设置了 LazyLoad。

NH 应该告诉你哪个对象导致了错误

希望你能尽快解决这个问题

# php - 替换php中的引号

> ID：13286387
> 
> 赞同：0
> 
> 时间：2012-11-08T09:43:41.283
> 
> 标签：php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:01:58.817

希望这可以帮助。

```
<?php

    //left double quote 
         $temp = str_replace("&ldquo;","\"",$temp);
         $temp = str_replace("&#8220;","\"",$temp);

        //right double quote 
         $temp = str_replace("&#8221;","\"",$temp);
         $temp = str_replace("&rdquo;","\"",$temp);
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:51:00.967

```
 $temp=str_replace('“',' ',$temp);
    $temp=str_replace('"',' ',$temp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:47:38.103

这工作正常。经过测试

```
$temp = "I want to replace “ and ” characters with the caharacter";
$temp=str_replace("”",'"',$temp);
$temp=str_replace("“",'"',$temp);
echo $temp; 
```

**输出**

```
I want to replace " and " characters with the caharacter 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:56:44.877

查看源代码文件和 HTTP 连接的编码。如果这不匹配，则替换可能会失败。

我建议确保两者都是 UTF-8。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-08T09:51:10.933

试试这个方法。。

```
$temp=str_replace('”','"',$temp);
$temp=str_replace('“','"',$temp); 
```

如果不工作使用这个

```
$temp=str_replace('&ldquo;','"',$temp);
$temp=str_replace('&rdquo;','"',$temp); 
```

# asp.net - How to keep focus on the Window opend using "window.Open" after the Page Load of the Parent Page?

> ID：13286388
> 
> 赞同：2
> 
> 时间：2012-11-08T09:43:45.937
> 
> 标签：asp.net

I am working on an application. I have opened a Window using

```
 window.open() 
```

Now after opening this window, the parent Page is getting Refreshed(Means Page Load is Happening).

Now , How can I set the Focus on the Child Window after the Page load of the Parent Page. Please Help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:19:28.403

获取您正在打开的窗口的句柄，并在重新加载父页面后使用该句柄将焦点设置为它。

```
var popup = window.open(); //open the child window
location.reload(); // reload the parent page
popup.focus();  //set focus on the child window 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:48:52.030

将焦点设置在新窗口上。

尝试使用

`window.focus()`

# qa - TestLink 未登录

> ID：13286390
> 
> 赞同：-1
> 
> 时间：2012-11-08T09:43:49.940
> 
> 标签：qa

TestLink 不允许我登录。当我输入我的登录详细信息并单击登录时，页面只会刷新并且不会加载。问题是什么？

![在此处输入图像描述](../Images/232041a1f451e9ad68a935c325214064.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:59:25.137

您能否更具体地说明您无法登录的原因。

*   使用 Testlink 默认凭据 admin/admin 登录。
*   检查数据库中的用户表以检查您尝试创建的用户是否退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-22T07:46:14.050

我最近在 TestLink-1.9.10 上看到了同样的问题。这是安装几年后的事（它安装在 Windows 上）。原来 C:\ 已满。清理空间后，我没有看到这个问题。

# c# - 是否可以使用 c# 以编程方式将附件或文档添加到谷歌事件条目？如果可能，怎么做？

> ID：13286400
> 
> 赞同：1
> 
> 时间：2012-11-08T09:44:34.960
> 
> 标签：c#, api

> **可能重复：**
> [如何使用 Google API 版本 2 在 Google Apps 日历中添加“附件”？](http://facebook.stackoverflow.com/questions/3094324/how-to-add-attachment-in-google-apps-calendar-using-google-api-version-2)

我遵循以下 Google 事件参考。

[http://www.codeproject.com/Articles/64474/How-to-Read-the-Google-Calendar-in-C](http://www.codeproject.com/Articles/64474/How-to-Read-the-Google-Calendar-in-C)

一切正常。但是当我将它发送给参与者时，我想在事件条目中添加一个额外的选项“附件”。我怎样才能做到这一点。

如果有任何替代 API 或解决方案，请帮助我。

# regex - 使用正则表达式匹配 或 在字符串中

> ID：13286402
> 
> 赞同：5
> 
> 时间：2012-11-08T09:44:46.467
> 
> 标签：regex

有人可以帮我找到一个正则表达式，如果它包含以下 html 中断标签之一，它会检查一个字符串吗？

```
<br>, <br/>, <br >, <br /> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-08T09:47:40.740

1.  阅读[教程](http://www.regular-expressions.info/tutorial.html)。
2.  如果您在 HTML 上做的不止这些，[请不要使用正则表达式](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)！
3.  `<br\s*/?>`并且您应该不区分大小写（取决于您使用的语言或工具）。如果您想严格地只允许您发布的四个版本（而不是多个空格），那么您正在寻找 cadrian 的版本：`<br ?/?>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T09:47:41.437

试试这个：`"<br ?/?>"`

# php - 如何从命令行运行我的 php 文件

> ID：13286403
> 
> 赞同：2
> 
> 时间：2012-11-08T09:44:56.357
> 
> 标签：php, windows, command-line

我希望我的代码在命令行 (cmd) 中运行，然后将结果输出到文本文件。然后文本文件应包含“hello world”。

我试过了

```
C:\wamp\bin\php\php5.3.13\php.exe -f "C:\wamp\www\hello.php" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:54:27.953

答案比较简单，

添加`> answer.txt`到命令中，它将保存在 answer.txt 中

所以它会是

```
cd "C:\wamp\bin\php\php5.3.13"
php.exe -f "C:\wamp\www\hello.php" > answer.txt 
```

说`>`必须重定向所有输出

欲了解更多信息，请参阅

[http://technet.microsoft.com/en-us/library/bb490982.aspx](http://technet.microsoft.com/en-us/library/bb490982.aspx)

**编辑**

如果您还想提供输入，您可以这样做

```
cd "C:\wamp\bin\php\php5.3.13"
php.exe -f "C:\wamp\www\hello.php" < input.ini > answer.txt 
```

# java - Java中的泛型方法

> ID：13286406
> 
> 赞同：3
> 
> 时间：2012-11-08T09:45:03.533
> 
> 标签：java, generics, methods

我的问题是：是否可以制作一种可以使用两种不同类型的通用方法？例如整数和字符串。

这没有实际用途，但我只想知道它是否可能。如果是，如何？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:50:13.557

您不需要为此使用泛型。您可以重载方法。例如

```
public void method(Integer i){}

public void method(String s){} 
```

如果您使用整数调用方法，那么它将调用第一个方法。如果你用字符串调用它，它将调用第二种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:48:38.643

大概你的意思是两种不同类型的参数？

您可以对 String 参数使用一种方法，而另一种方法则将整数传递给 String 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T09:49:35.073

示例类型不是好的类型，因为它们是最终类型。这意味着您不能使用它们来限制泛型参数，因为没有任何东西可以从它们继承。

因此，对于那种类型，答案是否定的。

但是我们可以用 Java 做的是：

您可以创建一个接受 Object 类型的方法。

```
 public <T> void doStaff(T obj) {

 } 
```

您可以创建一个仅限于 CharSequence 的方法，因为 String 是最终的

```
 public <T extends CharSequence> void doStaff(T str){ 

 } 
```

您可以创建一个仅限于一个接口的方法

```
public <T extends CharSequence & Comparable<T>> void doStaf(T interf) {

} 
```

但即使有如此多的可能性，我们也无法创建对两种不相关类型有效的泛型参数。这是没有意义的。泛型类型的主要任务是提供类型安全。通常，当我们使用它们时，我们应该使用接口而不是类来操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:54:25.900

如果您希望您的方法接受整数和字符串，请尝试以下方法：

```
 public class Test {
public static void main(String[] a)  {
    method(new String(),new Integer("2"));
}
public static <T extends String, U extends Integer> void  method(T t, U u){

}
} 
```

编辑：

如果您希望您的方法采用单个参数，该参数采用 String 或 Integer

尝试这个 ：

```
public static <T extends Comparable<T>> void  method(T t){

} 
```

# javascript - JsHint 警告：正则表达式文字可能与 '/=' 混淆

> ID：13286409
> 
> 赞同：1
> 
> 时间：2012-11-08T09:45:20.867
> 
> 标签：javascript, jshint

我的 Javascript 代码中有这一行：

```
var regex = /===Hello===\n/; 
```

JsHint 在这一行给了我一个警告：

```
A regular expression literal can be confused with '/='` 
```

...但我不知道这个正则表达式有什么问题？我怎样才能避免这个警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:52:30.277

问题是它`/=`可以被解释为除法和赋值，而不是正则表达式文字的开始。

[`RegExp`您可以改用构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)来避免警告：

```
var regex = new RegExp("===Hello===\n"); 
```

似乎没有[任何选项](http://www.jshint.com/docs/)可以设置来告诉 JSHint（或 JSLint）忽略`/=`，因此您的选择是解决它或忽略警告。

# java - 在 Java 中创建复杂的概率

> ID：13286410
> 
> 赞同：2
> 
> 时间：2012-11-08T09:45:24.670
> 
> 标签：java, probability

我正在尝试在 java 中创建棒球模拟游戏。我正在使用“间距”的实例作为我系统的迭代。在此范围内，我对结果有几种不同的可能性。击中，未命中（罢工），界外球（无效）。我从另一个类中创建了一组播放器，这些播放器读取了我设计的播放器的特定属性。我目前试图利用的唯一属性是击球手的力量和他们的一致性。我正在使用随机数来生成某个值，并根据该值所在的位置确定它是球还是罢工。“球”逻辑简单且有效；但是，我只收到击球手的球数。我' 我坚持如何实现关于击球的击球（错过挥杆）或击球概率的逻辑。我用于播放器的构造函数如下

```
Player a = new Player(false, false, true, 10, 20, 0.75, true, null); 
```

你可以忽略false和true和null，只注意第一个数字（10）表示速度的数字，不相关。第二个数字（20）表示功率。第三个表示击球手的一致性。

如果这可能令人困惑或过于初级，我深表歉意，我只编程了一个多月。所有帮助将不胜感激。目前对我来说唯一的打印看起来有点像

```
Press 'p' to initiate pitches
p
Ball count is: (0,0)
Ball count is: (0,0)
Ball count is: (0,0)
Ball count is: (0,0)
Ball! 
Ball count is: (1,0)
Ball count is: (1,0)
Ball! 
Ball count is: (2,0)
Ball count is: (2,0)
Ball count is: (2,0)
Ball! 
Ball count is: (3,0) 
```

我不明白为什么程序只识别球而不将打印的内容描述为空，我认为它是界外球（但它没有打印我的声明）

请帮忙，非常感谢！

```
import java.util.Scanner;
public class Game {

public static void main(String[] args) {
System.out.println("Press 'p' to initiate pitches");
Scanner kb = new Scanner(System.in);
String s = kb.nextLine();
if(s.equalsIgnoreCase("p"))
{
    int ball = 0;
        int strike = 0;
    //10 instances of pitches
    for(int i = 0; i < 10; i++)
    {
    double number = Math.random();
    if(number > 0.5)
    {
        ball++;
        if(ball == 4)
        {
        System.out.println("Ball four, take your base");
        break;
        }
        System.out.print("Ball!");
    }
    else if(strike() == true)
    {
       {
            if(isMiss() == true)
        {
            System.out.print(" Strike!");
            strike++;
        }
        else if(isFoul() == true)
        {
            System.out.println("Foul ball!");
        }
        }
        if(strike == 3)
        {
        System.out.print(" Player struck out!");
        break;
        }
            }
    else
    {
        if(isHit() == true)
        {
        System.out.println("The ball was hit!");
        System.out.println(isHit());
        break;
        }
    }
    System.out.println(" Ball count is: " + "(" + ball + "," + strike + ")");
    }
}
}

public static boolean strike()
{
if(isMiss() == true)
{
        return true;
}
else if(isFoul() == true)
{
        return false;
}
else if(isHit() == true)
{
        return true;
}
return false;
}

public static boolean isHit()
{
double probability = Math.random();
Player a = new Player(false, false, true, 10, 20, 0.75, true, null);
if(a.power > 5)
{
    if(a.consistency > 0.5)
    {
            if(probability > 3 && probability < 6)
            {
                return false;
            }
            if(probability > 6 && probability < 9)
            {
                return false;
            }
            if(probability > 9 && probability < 12)
            {
                return true;
            }
            return true;
        }
        System.out.println("The ball was hit!");
    }
    return false;
}

public static boolean isMiss()
{
    double probability = Math.random();
    Player a = new Player(false, false, true, 10, 20, 0.75, true, null);
    if(a.power > 5)
    {
        if(a.consistency > 0.5)
        {
            if(probability > 3 && probability < 6)
            {
                return true;
            }
            if(probability > 6 && probability < 9)
            {
                return false;
            }
            if(probability > 9 && probability < 12)
            {
                return false;
            }
            return false;
        }
    }
    return false;
}

public static boolean isFoul()
{
    double probability = Math.random();
    Player a = new Player(false, false, true, 10, 20, 0.75, true, null);
    if(a.power > 5)
    {
        if(a.consistency > 0.5)
        {
            if(probability > 3 && probability < 6)
            {
                return false;
            }
            if(probability > 6 && probability < 9)
            {
                return true;
            }
            if(probability > 9 && probability < 12)
            {
                return false;
            }
        }

    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:51:19.527

对于罢工：

```
if (Math.random() > consistency) { /* strike! */ } 
```

你可能想要一个恒定的犯规机会（比如如果他们击球，他们有 10% 的犯规机会：

```
else if (Math.random() < 0.1) { ... } 
```

功率也一样，但可能乘以 0.3（因为本垒打很少见）：

```
if (Math.random() < power * 0.3) { ... } 
```

请注意，要使它们起作用，您的一致性和功率变量必须是小数。

例如，50% 的一致性为 0.5。20% 的一致性为 0.2。同样，1 是最大功率，0 是非常弱的。0.5 介于两者之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:53:21.900

我建议您使用调试器单步执行您的代码，因为有很多部分对我来说没有意义，而且我无法使用 Player 类为您运行您的代码（而且我无法弥补它，因为它没有感觉 ;）

没有意义的代码部分是

```
double probability = Math.random(); 
```

所以概率是 [0, 1) 之间的数字

```
if(probability > 3 && probability < 6) // always false.
if(probability > 6 && probability < 9) // always false
if(probability > 9 && probability < 12) // always false.

// prints the ball was hit but returns `false` to isHit
System.out.println("The ball was hit!");
}
return false; 
```

# iphone - 如何在 iPhone 的不同类别中停止 AVAudioPlayer？

> ID：13286412
> 
> 赞同：0
> 
> 时间：2012-11-08T09:45:36.180
> 
> 标签：iphone, ios, avaudioplayer

目前我正在使用文本到语音应用程序，使用 FliteTTS 来开发它并且它​​工作正常。

```
Class FliteTTS 

 -(void)speakText
    {
        [audiplayer Play];
    }

    -(void)stopTalking
    {
        [audioPlayer stop];
        [audioPlayer release];
    }

Class B

 -(void)TouchToPlay
    {
        [self runFlite:ScriptDetails.text]; // Play audioplyer in FliteTTS
    }

   -(void)StopPlaying
   {
         FliteTTS *flit = [[FliteTTS alloc]init];
         [flit stopTalking];
   } 
```

然后我试图将音频播放器从 B 类停止到 FliteTTS 类，但它没有停止，如何停止这个？请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:09:17.697

这里：

```
-(void)StopPlaying{
     FliteTTS *flit = [[FliteTTS alloc]init];
     [flit stopTalking]; } 
```

您正在创建 FliteTTS 类的新实例，这不是正在播放音频的实例，因此不会使其停止，您可以尝试将 FliteTTS 类设置为单例，以便在整个项目中返回一个实例，这将使您可以从任何您想要的类中播放/停止或执行任何其他控制操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:20:15.437

`audiplayer`每次创建 class 的新实例时都会初始化该对象`FliteTTS`，因此您必须设置为`audiplayer`静态并使用单例来提供对`audiplayer`实例的访问。

# php - 如何在 php 中使用 Autoscout24 API（汽车搜索门户）？

> ID：13286414
> 
> 赞同：0
> 
> 时间：2012-11-08T09:45:45.067
> 
> 标签：php, api

如何在 php 中使用 Autoscout24 API（汽车搜索门户）？我阅读了该网站上的文档。我实际上配置了配置文件并连接到 API 服务器。

但我无法使用 html 模板获取和显示过滤条件，如模型、制作等。任何人都有在 php 中使用这个 API 的好例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T14:41:41.243

可从该站点获得 PHP SDK：http: [//www.developergarden.com/en/apis/docu-support/](http://www.developergarden.com/en/apis/docu-support/)

不知道效果如何，我只是偶然发现的。

# wcf-data-services - 如何使 WCF Dataservice 停止跟踪实体更改？

> ID：13286416
> 
> 赞同：9
> 
> 时间：2012-11-08T09:45:49.770
> 
> 标签：wcf-data-services, odata, tridion, tridion-content-delivery

我有`DataServiceContext`一个通过代理调用 OData Webservice () 的 Web 应用程序。问题是代码，即使每次调用 OData webservice，它总是在内容管理系统 (SDL Tridion) 中更改内容后返回旧数据。

```
string getPageContentForUrl(string url)
{
    var page = cdService
                   .Pages
                   .Expand("PageContent")
                   .Where(x => x.Url == url)
                   .FirstOrDefault();

    if (page == null || page.PageContent == null)
    {
        return string.Empty;
    }
    else
    {
        return page.PageContent.Content;
    }

} 
```

我们必须重置应用程序池才能看到最新的数据更改。

因此，在进行更多调试时，我注意到

```
var context = (System.Data.Services.Client.DataServiceContext)cdService;
context.Entities[0].State = Unchanged 
```

`.Detach()`所以我尝试通过在从返回值之前显式调用来修复它，`getPageContentForUrl`比如，

```
cdService.Detach(page);
cdService.Detach(page.PageContent); 
```

我的问题是，我可以在更“全局”的级别上执行上述操作吗，也许 Web 服务总是假设状态为“已更改”，因为我不想手动编写代码`Detach()`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T10:57:07.057

我认为答案确实在于 - 正如您所怀疑的 - 在您正在使用的代理中，或者更确切地说在 DataServiceContext 中。这是微软不得不说的：

> 默认情况下，客户端仅将响应提要中的条目具体化为尚未被 DataServiceContext 跟踪的实体的对象。这意味着对已在缓存中的对象所做的更改不会被覆盖。此行为是通过为查询和加载操作指定 MergeOption 值来控制的。

对我来说，这听起来与您所描述的行为完全一样。幸运的是，可以通过在 DataServiceContext 上设置 MergeOption 属性来关闭缓存。

请参阅[http://msdn.microsoft.com/en-us/library/gg602811.aspx](http://msdn.microsoft.com/en-us/library/gg602811.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T18:51:29.077

正如 Quirijn 已经评论的那样，Tridion Content Delivery OData 服务似乎在您的设置中返回缓存的结果。分离和重新连接客户端是一种蛮力解决方法。

Tridion 内容交付对象缓存将（正确配置时）在内容管理系统的发布操作更新项目时自动从其缓存中删除项目。由于您的设置中没有发生这种情况，因此您的对象缓存似乎没有正确配置。

最简单的步骤是找到 cd_webservice Web 应用程序的 cd_storage_conf.xml 文件并关闭对象缓存（正如 Quirijn 已经说过的）：

```
<ObjectCache Enable="false" /> 
```

现在像以前一样回收应用程序池并再次测试。如果现在 OData 调用总是返回更新的内容，那么您的问题确实是由错误配置的对象缓存引起的。

不幸的是，在这个阶段，您所要做的就是关闭对象缓存，这肯定会减少您的 Web 服务可以处理的负载。下一步应该是修复对象缓存的配置问题。

为此，我建议联系 SDL 专业服务或 SDL 的合作伙伴之一。虽然配置对象缓存并不太难，但是以问答的形式解释起来有点太复杂了。

# javascript - 合并对象和数组：Javascript、JQuery

> ID：13286418
> 
> 赞同：3
> 
> 时间：2012-11-08T09:45:57.477
> 
> 标签：javascript, jquery, extend

**说明性示例：**

```
d1 = {
  "ean_code": ["OA13233394CN08", "8903327046534", "8903327014779"],
  "balance_qty": [5, 10, 15]
} 
```

和

```
d2 = {
  "ean_code": ["OA13233394CN11", "OA13233394CN08", "8903327014779", "OA13233394CN09"],
  "scanned_qty": [30, 5, 20, 10, - 1],
} 
```

输出：

```
d3 = {
  "ean_code": ["OA13233394CN08", "8903327046534", "8903327014779", "OA13233394CN11", "OA13233394CN09"],
  "scanned_qty": [5, 0, 20, 30, 10],
  "balance_qty": [5, 10, 15, 0, 0]
} 
```

**解释**。`d3['scanned_qty'][1]`默认值为`0`，因为 is 的值`d3['ean_code'][1]`属于`d1['ean_code']`数组且`d1`对象没有`scanned_qty`键。

执行此操作的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:56:32.383

假设您将 o1 和 o2 分别作为对象 1 和 2。

```
var key,
    result = {}
    i,
    largestLength = 0,
    copyIntoResult = function (obj, key) {
        for (i = 0; i < obj[key].length; i += 1) {
            if (result[key].indexOf(obj[key][i]) === -1) {
                result[key].push(obj[key][i]);
            }
        }
    };

for (key in o1) {
    if (o1.hasOwnProperty(key) && o2.hasOwnProperty(key)) {
        result[key] = [];
        copyIntoResult(o1, key);
        copyIntoResult(o2, key);
        if (result[key].length > largestLength) {
            largestLength = result[key].length;
        }
    } else if (o1.hasOwnProperty(key)) {
        result[key] = [].concat(o1[key]);
        if (o1[key].length > largestLength) {
            largestLength = o1[key].length;
        }
    }
}
for (key in o2) {
    if (o2.hasOwnProperty(key) && !result[key]) {
        result[key] = [].concat(o2[key]);
        if (o2[key].length > largestLength) {
            largestLength = o2[key].length;
        }
    }
}

// result now has the merged result

for (key in result) {
    if (result[key].length < largestLength) {
        for (i = 0; i < (largestLength - result[key].length); i += 1) {
            result[key].push('');
        }
    }
} 
```

编辑：对您的问题进行编辑后，您可以通过将数组与合并结果的最大数组长度相等来使所有数组的长度相同。但是，默认的“空白”条目取决于您（在这种情况下，我只使用了一个空字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:14:28.157

您只需要针对您的特定案例的定制解决方案。

*   合并 2 个没有子对象的对象（不需要递归）
*   最终对象的数组字段长度必须相同
*   最终对象的数组字段必须保持索引一致性
*   最终对象的数组字段必须使用 '0' 作为默认值

* * *

[http://jsfiddle.net/8X5yB/4/](http://jsfiddle.net/8X5yB/4/)

```
function customMerge(a, b, uniqueKey) {
    var result = {};
    var temp = {};
    var fields = {};
    // object 1
    for(var x=0; x<a[uniqueKey].length; x++) {
        id = a[uniqueKey][x];
        if(temp[id] == null) temp[id] = {};
        for(k in a) {
            if(k != uniqueKey) {
                fields[k] = '';
                temp[id][k] = (a[k].length > x ? a[k][x] : 0);
            }
        }
    }
    // object 2
    for(var x=0; x<b[uniqueKey].length; x++) {
        id = b[uniqueKey][x];
        if(temp[id] == null) temp[id] = {};
        for(k in b) {
            if(k != uniqueKey) {
                fields[k] = '';
                temp[id][k] = (b[k].length > x ? b[k][x] : 0);
            }
        }
    }
    // create result
    result[uniqueKey] = [];
    for(f in fields) result[f] = [];
    for(k in temp) {
        result[uniqueKey].push(k);
        for(f in fields) {
            result[f].push(temp[k][f] != null ? temp[k][f] : 0);
        }
    }
    return result;
}
...
var obj = customMerge(d1, d2, "ean_code"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:58:44.273

```
function merge(a,b) {
    var c = {};
    for(key in a.keys()) {
        c[key] = a[key].slice(0);
    }
    for(key in b.keys()) {
        if(typeof c[key] == 'undefined') {
            c[key] = b[key].slice(0);
        } else {
            var adds = b[key].filter(function(item){ 
                return (a[key].indexOf(item) == -1);
            });
            c[key].concat(adds);
        }
    }
    return c;
} 
```

*   [从 v1.8.5 开始的 .keys() 方法，旧浏览器的片段](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)。
*   [从 v1.6 开始过滤，旧浏览器的片段](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)。
*   [从 v1.2 开始连接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)。

# jquery - ipad 的有效电子邮件正则表达式

> ID：13286419
> 
> 赞同：0
> 
> 时间：2012-11-08T09:45:58.880
> 
> 标签：jquery, asp.net-mvc, ipad

您好我正在使用以下正则表达式来验证电子邮件地址

```
@"^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$" 
```

这适用于 PC 上的所有浏览器。但它在 Safari 上的 ipad 上出现问题。它甚至在 ipad 中将有效的电子邮件 ID 显示为无效的电子邮件 ID。所以请告诉我在 PC 和 ipad 上的浏览​​器上哪个是有效电子邮件的最佳正则表达式。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:21:03.790

你这样试试

```
NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex]; 
```

`emailTest`将返回真或假.....

# jquery - 更新 $(this) 但其中的跨度

> ID：13286420
> 
> 赞同：0
> 
> 时间：2012-11-08T09:45:59.737
> 
> 标签：jquery, text

我正在尝试`<span>`根据您是否单击来更新锚点内的内容。如果单击它并且幻灯片已打开，则为“向上导航”，如果未处于活动状态，则为“向下导航”。

如果需要更改整个锚点，我可以使用此功能，但我只需要更改跨度即可。另外，我可以为它编写一个单独的脚本，但我认为最好将它包含在已经存在的 jQuery 中。

有任何想法吗？

我有这个 HTML：

```
<li class="page_item page-item-29 parent"><a href="#">Clinical/Laboratory<span class="ss-icon navigation-drop-icon">navigatedown</span></a></li> 
```

这是我的 jQuery：

```
$(".sub-navigation li.parent > a").click(function(e) {
   e.preventDefault()
   $(this).text($(this).text() == 'navigateup' ? 'navigatedown' : 'navigateup');
   $(this).closest('.parent').find("> .children").slideToggle(400);
}); 
```

谢谢，R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:49:25.147

如果我理解你是正确的，你可以提供 span 作为文本的选择器，然后`this`用作在其中查看的上下文，如下所示：

```
 $("span", this).text($("span", this).text() == 'navigateup' ? 'navigatedown' : 'navigateup'); 
```

jQuery 函数允许您传递第二个参数，这是使用选择器时要查看的上下文。在这种情况下，跨度选择器将仅匹配单击元素内的跨度元素。

根据[文档](http://api.jquery.com/jQuery/)，上下文可以是：

> 用作上下文的 DOM 元素、文档或 jQuery

我认为 jQuery 使用`.find()`幕后的方法，所以在你的情况下，上面的例子只是一个简写`$(this).find("span")`

# oracle - 使用物化视图修复错误并减少代码

> ID：13286421
> 
> 赞同：2
> 
> 时间：2012-11-08T09:46:00.427
> 
> 标签：oracle, plsql, oracle-apex

我正在处理的应用程序有一个遗留问题，其中在 oracle 11g dB 中创建了 2 个表 ADULT 和 CHILD。这导致了许多相关的表都具有 ADULT 和 CHILD 的字段，没有应用 FK。在不良开发将关系映射到错误字段的情况下，就会出现错误。

我们的技术架构师计划将 ADULT 和 CHILD 表合并到一个新的 ADULT_CHILD 表中，并创建物化视图来代替这些表。该计划还创建一个新的 id 值并替换所有关联表中的 Id 值，因此即使 plsql/apex 代码映射到错误的字段，数据映射仍然是正确的。

该解决方案背后的原因是它不需要我们更改任何其他代码。

我的观点是这是一个软糖，但我更像是一个 Java/.NET OO。

我可以用什么论据来说服架构师这是错误的，而不是真正的解决方案。我担心我们正在创建一个更复杂的解决方案，性能将是一个问题。

感谢您的任何指点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:50:58.533

虽然它可能是一个需要的解决方案，但它也可能会产生新的问题。如果您确实需要始终使用最新的 MV，则需要提交刷新，这反过来又会使所有更新按顺序进行。这意味着所有写入它的进程都会排队等待更新表的进程提交。不是，表，不是行。

因此，谨慎的做法是使用实​​际负载测试该方法。为什么一定要变成单表？他们不能保持分开，添加一个FK吗？如果您需要对更新进行更多控制，请重命名它们并使用而不是触发器放置视图。

# c# - 使用 NHibernate 生成的 sql 与只读数据库同步

> ID：13286429
> 
> 赞同：2
> 
> 时间：2012-11-08T09:46:28.760
> 
> 标签：c#, nhibernate, database-replication

我正在尝试在我的应用程序中利用同步机制，我需要在整个应用程序中提供只读数据库，因为我的数据不经常更新（出于性能和可伸缩性优化的原因）。我想我可以通过在源发布者数据库上执行由 NH 生成的 sql 插入和更新到只读数据库（订阅者）来做到这一点。

我的应用程序与数据库无关，因此我不会关注每个 RDBMS 的复制功能。

问题是：这是一种可靠的方法吗？在这种情况下，最好的锁定机制是什么？

# netbeans - netbeans manifest.mf 是只读的，因为它在里面

> ID：13286430
> 
> 赞同：0
> 
> 时间：2012-11-08T09:46:29.503
> 
> 标签：netbeans, jar, manifest, netbeans-platform, netbeans-plugins

我想更改文件 Meta-inf/Manifest.mf 的包含。我试试这个：

```
 org.openide.filesystems.FileObject projectDirectory = project.getProjectDirectory();

 FileObject modulesFileObject = projectDirectory.getFileObject("build/cluster/modules/");

 properties.store(propertiesFile.getOutputStream(), null); 
```

但我得到了这个例外：

```
manifest.mf is read-only because it is inside. 
```

Jar 文件不是只读的。那你能帮我吗？

PS：我使用 NetBeans Platform RCP 7.11，java 1.7_07

改进翻译

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:05:11.520

问题是，JarSystem 是只读的。

吉尔卡

# c# - 获取当前值反射c#

> ID：13286431
> 
> 赞同：1
> 
> 时间：2012-11-08T09:46:31.860
> 
> 标签：c#, .net, reflection, connection-string

我使用以下代码将当前字段值的当前值更改为

```
FieldInfo connectionStringField = GetType().BaseType.GetField("_sqlConnectionString", BindingFlags.Instance | BindingFlags.NonPublic);  

connectionStringField.SetValue(this, connectionString); 
```

但我的查询是获取connectionstringfied的当前值...

我尝试了以下代码

```
getvalue(obj ss); 
```

等待您的宝贵回复

它向我抛出空值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:48:51.997

如果`connectionStringField`找到了该字段（即它在基本类型中并且称为“_sqlConnectionString”，那么它应该是：

```
string connectionString = (string)connectionStringField.GetValue(this); 
```

?

但是，使用反射与非公共领域对话是……不寻常的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:18:29.277

```
public static string GetPropertyValue<T>(this T obj, string parameterName)
    {
        PropertyInfo[] property = null;
        Type typ = obj.GetType();
        if (listPropertyInfo.ContainsKey(typ.Name))
        {
            property = listPropertyInfo[typ.Name];
        }
        else
        {
            property = typ.GetProperties();
            listPropertyInfo.TryAdd(typ.Name, property);
        }
        return property.First(p => p.Name == parameterName).GetValue(obj, null).ToString();
    } 
```

listPropertyInfo 是避免反射性能问题的缓存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:08:14.770

```
public static void SetPropertyValue<T>(this T obj, string parameterName, object value)
    {
        PropertyInfo[] property = null;
        Type typ = obj.GetType();
        if (listPropertyInfo.ContainsKey(typ.Name))
        {
            property = listPropertyInfo[typ.Name];
        }
        else
        {
            property = typ.GetProperties();
            listPropertyInfo.TryAdd(typ.Name, property);
        }
        if (value == DBNull.Value)
        {
            value = null;
        }
        property.First(p => p.Name == parameterName).SetValue(obj,value, null);
    } 
```

我对二传手使用了相同的技巧

# javascript - Facebook : 使用应用程序向朋友展示面孔

> ID：13286434
> 
> 赞同：-1
> 
> 时间：2012-11-08T09:46:41.157
> 
> 标签：javascript, jquery, facebook, facebook-graph-api

我正在尝试集成 Facebook 登录插件，该插件显示使用同一应用程序的朋友的个人资料图片。为此，我尝试了以下代码，

```
 <html>
   <head>
    <title>My Facebook Login Page</title>
   </head>
   <body>
    <div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '***', // App ID
          channelUrl : 'http://www.***.in/', // Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
       });     
      };
      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "js/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));
     </script>
    <div class="fb-login-button" data-show-faces="true" data-width="500" data-max-rows="1"></div> </div>
   </body>
</html> 
```

这段代码工作正常。登录时，它会显示使用同一应用程序的朋友的个人资料图片。单击每张照片（朋友的个人资料图片）时，它会分别导航到他们的 Facebook 页面。但我的要求是，在单击照片时，它应该重定向到不同的 url。是否可以？

请帮帮我，

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:50:47.267

> 单击每张照片（朋友的个人资料图片）时，它会分别导航到他们的 Facebook 页面。但我的要求是，在单击照片时，它应该重定向到不同的 url。是否可以？

不，这不对。

与大多数其他社交插件一样，登录按钮会在从 facebook.com 加载的 iframe 中呈现，并且同源策略会阻止您通过 JavaScript 与来自不同域的内容进行交互。

# sql - 在 teradata 中计算给定时间段内特定工作日的销售额

> ID：13286440
> 
> 赞同：1
> 
> 时间：2012-11-08T09:46:48.383
> 
> 标签：sql, teradata

我有一张包含交易、日期及其各自销售价值的表格。我需要计算日期 x 和 y 之间所有星期六的所有不同交易的销售额总和。Teradata 没有 datename、datepart 函数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:59:59.130

我不是 Teradata 专家，我什至不知道，但我发现了一些东西。这当然不是一个解决方案，它只是一个建议，因为您对您的数据库架构一无所知。

Teradata 中的源[日期和时间（通过 V2R4.1）](http://www.teradataforum.com/l030515a.htm)：

> 在 SQL 中计算给定日期的星期几并不容易。如果您需要工作日，我建议您在视图 sys_calendar.calendar 中查找它（或加入它），因此：

```
select day_of_week
   from sys_calendar.calendar
   where calendar_date = date '2003-05-01';

day_of_week
-----------
          5  [i.e. Thursday] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:35:45.410

内部连接是否为 `inner join sys_calendar.calendar as cal on cal.calendar_date=my_table.date where cal.day_of_week=7`

# java - Android - 返回时的空列表视图

> ID：13286441
> 
> 赞同：0
> 
> 时间：2012-11-08T09:46:48.350
> 
> 标签：java, android, android-listview, simplecursoradapter, textwatcher

我正在通过 ContentProvider 和 SimpleCursorAdapter 加载 ListView。我添加了一个 TextWatcher 来过滤结果。这很好用，但是在我单击 ListItem 以加载另一个片段后，当我回击时，我得到一个空的 ListView。任何想法为什么会发生这种情况？

```
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ProgressDialog;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.AsyncTask;
import android.os.Bundle;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.app.LoaderManager.LoaderCallbacks;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.SimpleCursorAdapter;
import android.text.Editable;
import android.text.Html;
import android.text.TextWatcher;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.EditText;
import android.widget.FilterQueryProvider;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockListFragment;
import com.brndwgn.RequestHelper.GetResponse;
import com.brndwgn.database.BlogContentProvider;
import com.brndwgn.database.BlogTable;
import com.handmark.pulltorefresh.library.PullToRefreshBase;
import com.handmark.pulltorefresh.library.PullToRefreshBase.OnRefreshListener;
import com.handmark.pulltorefresh.library.PullToRefreshListView;

public class NewsFragment extends SherlockListFragment implements LoaderCallbacks<Cursor> {

    public boolean isNetworkAvailable() {

        ConnectivityManager connectivityManager = (ConnectivityManager) parent.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();

        return activeNetworkInfo != null;

    }   

    private SimpleCursorAdapter adapter;

    private boolean dataRetrieved;

    private SlidingArea parent;

    PullToRefreshListView pullToRefreshView;

    EditText searchBox;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        parent = (SlidingArea) getActivity();

        setHasOptionsMenu(true);    

        parent.getSupportActionBar().setCustomView(R.layout.actionbar_news_list);
        parent.getSupportActionBar().setDisplayShowCustomEnabled(true);
        parent.getSupportActionBar().setDisplayShowTitleEnabled(false);
        parent.getSupportActionBar().setDisplayHomeAsUpEnabled(true);

        final ImageView searchButton = (ImageView) parent.findViewById(R.id.image_search_list);

        searchButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                searchBox.setVisibility(View.VISIBLE);            }

        });

        final ImageView refreshButton = (ImageView) parent.findViewById(R.id.image_refresh_list);

        refreshButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                getData(getString(R.string.json_get_posts_url), true);
                refreshButton.setImageResource(R.drawable.menu_refresh_dark);
                fillData();
            }

        });
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View V = inflater.inflate(R.layout.fragment_news, null);
        pullToRefreshView = (PullToRefreshListView) V.findViewById(R.id.pull_to_refresh_listview);
        searchBox = (EditText)V.findViewById(R.id.edittext_search);

        return V;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);

        pullToRefreshView.setOnRefreshListener(new OnRefreshListener<ListView>() {

            @Override
            public void onRefresh(PullToRefreshBase<ListView> refreshView) {
                // Do work to refresh the list here.
                getData(getString(R.string.json_get_posts_url), false);
            }

        });

    }

    @Override
    public void onResume() {
        super.onResume();

        fillData();

        parent.getSupportActionBar().setCustomView(R.layout.actionbar_news_list);
        parent.getSupportActionBar().setDisplayShowCustomEnabled(true);
        parent.getSupportActionBar().setDisplayHomeAsUpEnabled(true);

        final ImageView searchButton = (ImageView) parent.findViewById(R.id.image_search_list);

        searchButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                searchBox.setVisibility(View.VISIBLE);            
            }

        });

        final ImageView refreshButton = (ImageView) parent.findViewById(R.id.image_refresh_list);

        refreshButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                getData(getString(R.string.json_get_posts_url), true);
                refreshButton.setImageResource(R.drawable.menu_refresh_dark);
                fillData();
            }

        }); 

        adapter.setFilterQueryProvider(new FilterQueryProvider() {

            public Cursor runQuery(CharSequence constraint) {

                String[] projection = new String[] { BlogTable.TITLE_PLAIN, BlogTable.DATE_MODIFIED, BlogTable.EXCERPT, BlogTable.ID };  
                return parent.getContentResolver().query(BlogContentProvider.CONTENT_URI, projection, BlogTable.TITLE_PLAIN  + " LIKE '%"+constraint+"%'", null, BlogTable.DATE_MODIFIED + " DESC");

          }

        }); 

        searchBox.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                // When user changed the Text

                adapter.getFilter().filter(cs);
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub

            }
        });
    }

    //Constant used as key for ID being passed in the bundle between fragments 
    public static final String NEWS_ID = "newsID";

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {

        Bundle detailBundle = new Bundle();
        detailBundle.putLong(NEWS_ID, id);

        FragmentTransaction ft = parent.getSupportFragmentManager().beginTransaction();

        //Instance must be created here to setArguments rather then in the replace() method
        NewsDetailFragment newsDetailFragment = new NewsDetailFragment();
        newsDetailFragment.setArguments(detailBundle);

        ft.replace(R.id.content_frame, newsDetailFragment);
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
        ft.addToBackStack(null);
        ft.commit();

    }    

    private void getData(String url, boolean showProgressDialog) {
        new Request(showProgressDialog).execute(new String[] {url});    
    }

    public class Request extends AsyncTask<String, Void, String> {

        ProgressDialog dialog;

        /* This is the only file that needs to be edited */

        private GetResponse response = null;

        private boolean showProgressDialog = true;

        public Request(boolean showProgressDialog)
        {
            super();
            this.showProgressDialog = showProgressDialog;
            response = new GetResponse();
        }   

        @Override
        protected void onPreExecute() {

            if (showProgressDialog) {
                dialog = new ProgressDialog(parent);
                dialog.setMessage("Loading stuff to read...");
                dialog.setIndeterminate(true);
                dialog.setCancelable(false);
                dialog.show();
            }
        }

        //This method must return the type specified in the constructor
        @Override
        protected String doInBackground(String... url) {
            response.setUrl(url[0]);

            String res = response.execute();

            // When it returns the "res" it will call onPostExecute
            return res;
        }

        @Override
        protected void onPostExecute(String result) {

            // Here we have response from server
            if ( isNetworkAvailable() ){

                try {

                    JSONObject json = new JSONObject(result);
                    JSONArray arr = json.getJSONArray("posts");

                    for (int i = arr.length() - 1; i >= 0; --i) {
                        JSONObject row = arr.getJSONObject(i);

                        if (row.getString("type").equals("post")) {

                            if (row.getString("status").equals("publish")) {

                                ContentValues values = new ContentValues();
                                values.put(BlogTable.POST_ID, row.getString("id"));
                                values.put(BlogTable.URL, row.getString(BlogTable.URL));
                                values.put(BlogTable.TITLE, row.getString(BlogTable.TITLE));
                                values.put(BlogTable.TITLE_PLAIN, Html.fromHtml(row.getString(BlogTable.TITLE_PLAIN)).toString());
                                values.put(BlogTable.CONTENT, row.getString(BlogTable.CONTENT));
                                values.put(BlogTable.EXCERPT, Html.fromHtml(row.getString(BlogTable.EXCERPT)).toString());
                                values.put(BlogTable.DATE, row.getString(BlogTable.DATE));
                                values.put(BlogTable.DATE_MODIFIED, row.getString(BlogTable.DATE_MODIFIED));

                                //getAuthorID
                                JSONObject objAuthor = row.getJSONObject("author");
                                values.put(BlogTable.AUTHOR_ID, objAuthor.getInt("id"));

                                //Check to insert new author

                                //getThumbnail
                                byte[] image = AppHelper.getBlobFromURL(row.getString(BlogTable.THUMBNAIL));
                                if (image != null) {

                                    values.put(BlogTable.DATE_MODIFIED, image);

                                }

                                //isFavourite
                                values.put(BlogTable.IS_FAVOURITE, 0);

                                // when this is called here it is referring to the activity
                                parent.getContentResolver().insert(BlogContentProvider.CONTENT_URI, values);    

                                dataRetrieved = true;

                            }
                            else {

                                String currentID = row.getString("id");

                                // Delete unpublished fields
                                parent.getContentResolver().delete(BlogContentProvider.CONTENT_URI, "_id = " + currentID, null);

                            }
                        }
                    }
                } catch (JSONException e) {

                    e.printStackTrace();

                }
            }
            else {

                Toast toast = Toast.makeText( parent , "Oops! There is no connection to the Internet", Toast.LENGTH_SHORT);
                toast.show();

            }           

            // Call onRefreshComplete when the list has been refreshed.
            pullToRefreshView.onRefreshComplete();
            super.onPostExecute(result);

            ImageView refreshButton = (ImageView) parent.findViewById(R.id.image_refresh_list);
            refreshButton.setImageResource(R.drawable.menu_refresh);

            if (showProgressDialog) {
                dialog.dismiss();   
            }
        }

    }

    @Override
    public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {

        String[] projection = new String[] { BlogTable.TITLE_PLAIN, BlogTable.DATE_MODIFIED, BlogTable.EXCERPT, BlogTable.ID };

        CursorLoader loader = new CursorLoader(parent, BlogContentProvider.CONTENT_URI, projection, null, null, BlogTable.DATE_MODIFIED + " DESC");

        return loader;
    }

    private void fillData(){

        //_id is expected from this method that is why we used it earlier
        String[] from = new String[] { BlogTable.TITLE_PLAIN, BlogTable.DATE_MODIFIED, BlogTable.EXCERPT};
        int[] to = new int[] { R.id.text_news_title, R.id.text_news_date, R.id.text_news_excerpt};

        //initialize loader to call this class with a callback
        getLoaderManager().initLoader(0, null, this);

        //We create adapter to fill list with data, but we don't provide any data as it will be done by loader
        adapter = new SimpleCursorAdapter(parent, R.layout.news_list_view, null, from, to, 0);

        setListAdapter(adapter);
    }

    public void onLoadFinished(Loader<Cursor> arg0, Cursor data) {
        adapter.swapCursor(data);

    }

    public void onLoaderReset(Loader<Cursor> arg0) {
        adapter.swapCursor(null);       
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T20:32:06.907

## 适配器看到的内容：

您观察到空 ListView 的原因是因为*返回的 Cursor 的位置**仍然**指向最后一个元素*。当您`swap()`将光标指向适配器时，适配器会尝试使用`while(Cursor.moveToNext())`循环进行迭代。因为该循环总是评估 FALSE，所以您的 ListView 会给您一种空光标的错觉。

打印`Cursor.getCount()`和`Cursor.getPosition()`in的值`onLoadFinished()`。如果我是正确的，这两个值应该相等。这种索引冲突造成了上述错觉。

## 为什么适配器会看到这个：

加载程序将尽可能重用光标。如果你为一组没有变化的数据请求加载器，加载器是聪明的，通过 onLoadFinished 返回游标而不做*任何*额外的工作，甚至不将游标的位置设置为 -1。

**ANS**手动调用`Cursor.moveToPosition(-1)`以`onLoadFinished()`解决此问题。

# javascript - datepicker beforeShowDay 返回 3 个月

> ID：13286443
> 
> 赞同：1
> 
> 时间：2012-11-08T09:46:59.333
> 
> 标签：javascript, jquery, datepicker

我需要在 jquery datepicker 日历中禁用某天，所以在 beforeShowDay 函数中我写了这个：

```
beforeShowDay: function(date){
            if(parseInt(calMonth) != parseInt(date.getMonth())){
                calMonth = date.getMonth();
                alert(calMonth + ' - ' + date.getMonth());
            }
            return {0: true};
        } 
```

其中 calMonth 包含当前月份数。现在，如果我运行它，我会收到 3 个按顺序显示的警报：9-9、10-10 和 11-11。为什么我有 3 条消息，而它不应该显示任何内容（因为当我打开 datepicker 时，它默认显示当前月份的日历，所以 if(parseInt(calMonth) != parseInt(date.getMonth())) 应该返回false. 我还设置了 numberOfMonths: 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-16T13:33:18.427

有同样的问题，我是这样解决的：

```
$("#datepicker").datepicker({ showWeek: true, showOtherMonths : false,
    //I'm using onChangeMonthYear to always keep my datepicker month updated
    onChangeMonthYear: function(year, month, inst){
        $(this).datepicker( "setDate", month + '/1/' + year );
    },
    beforeShowDay: function(date) {
        //Now I can get only the days of the current selected month, and do whatever I want...
        if(date.getMonth()==$(this).datepicker('getDate').getMonth()) 
            console.log(date.getDate()+' - '+date.getMonth()+' - '+$(this).datepicker('getDate').getMonth());

        //keep returning as usual to the datepicker
        return [true, ''];
    } 
}); 
```

希望它有帮助=)

# vba - 在德语 Excel 中解析美国数字格式

> ID：13286444
> 
> 赞同：4
> 
> 时间：2012-11-08T09:47:03.317
> 
> 标签：vba, excel, localization, numbers

我正在创建一个帮助人们自动处理数据的 Excel 文件。在这张表中，有一些数字必须被解析（并转换为其他单位，等等。简单的计算）。

这些**数字采用美国格式**，这意味着它们看起来像：

```
0,000,000.00 
```

**在德国**，数字显示如下：

```
0.000.000,00 
```

在 VBA 中，我实际上不知道正在使用哪个**本地化版本的 Excel**（德语或英语）。

**问题：** 是否有一种简单的方法可以**将美国格式数字解析为数据类型 Double**而不管用户使用的 Excel 本地化如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T10:45:49.773

一些笔记。我没有更改语言环境来测试。

```
'http://msdn.microsoft.com/en-us/library/office/bb177675(v=office.12).aspx
Debug.Print Application.International(xlCountryCode) 'Excel locale
Debug.Print Application.International(xlCountrySetting) 'Windows locale
sDecimal = Application.International(xlDecimalSeparator)
sThousand = Application.International(xlThousandsSeparator)

sNumber = "1,000,000.00"

If sThousand <> "," Then
    If sDecimal <> "." Then
        sNumber = Replace(sNumber, ",", "")
        sNumber = Replace(sNumber, ".", sDecimal)
    End If
End If

Debug.Print sNumber 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:39:31.067

一个可能的解决方案可能是：
`cells(y, x) = Val(Replace(cells(y, x).Text, ",", ""))`

Val 总是使用 . 作为小数点（例如 CDbl 使用文化设置，在德语 Excel 中测试）。

# javascript - 处理注销的更好方法

> ID：13286445
> 
> 赞同：0
> 
> 时间：2012-11-08T09:47:06.960
> 
> 标签：javascript, jquery

我有一个自定义注销页面。当用户单击注销时，将到达此页面（并且注销状态保存在数据库中）。没有登录机制。如果用户尝试在新窗口中查看，则允许他查看该页面，并且注销状态将更改为已登录。

注销后，当用户单击后退按钮（从注销页面）时，它不应允许用户查看上一页。

类似地：当用户访问一个页面时，时间被存储。当他空闲 20 分钟并尝试操作时，他将被重定向到会话超时。他应该无法在单击后退按钮时查看上一页。

目前在每个页面中，我正在检查数据库状态并在状态已注销时再次重定向到已注销页面。但它会导致页面首先加载，然后在 javascript 中进行验证，然后重定向。有没有更好的方法来处理这个？

注意：我根据[清除浏览器历史记录中的评论将其发布为新问题](https://stackoverflow.com/questions/5288703/clear-browser-history)

```
 $.ajax(
        {
            type: "POST",
            url: "LogOut.aspx/GetActiveIndicatorStatus",
            data: '{"empID": "' + empID + '"}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: navigateBasedOnStatus

        }
        );

//Helper Function
function navigateBasedOnStatus(result) {

    if (result.hasOwnProperty("d")) {
        result = result.d
    }

    //alert($.trim(result));

    if ($.trim(result) == "LoggedOUT") {

        window.location.href("LogOut.aspx");
    }
    else 
    {
        contentHolderDiv.css("display", "block");
    }

} 
```

参考：

1.  [清除浏览器历史记录](https://stackoverflow.com/questions/5288703/clear-browser-history)
2.  [在 <a> 上动态添加 href](https://stackoverflow.com/questions/13287155/dynamically-add-href-on-a/13287980#13287980)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:52:23.657

场景 1：不使用 Ajax：

如果您在用户可能再也看不到的页面上，

```
window.location.replace("LogOut.aspx/GetActiveIndicatorStatus?empID="+empID) 
```

将用您返回的任何内容替换您所在的页面。

场景2：替换结果：

```
if ($.trim(result) == "LoggedOUT") {

    window.location.replace("LogOut.aspx");
}
else 
{
    contentHolderDiv.css("display", "block");
} 
```

# ios - searchResultsTableView 不等于 tableview？

> ID：13286452
> 
> 赞同：0
> 
> 时间：2012-11-08T09:47:22.980
> 
> 标签：ios, uitableview, uisearchdisplaycontroller, uisearchresultscontroller

我有 UIview 包含带有搜索显示控制器的 tableview

搜索后显示同一张表，我的期望是：

# TableView numberOfRowsInSection# 所以我调试了它。它显示搜索视图，但不会触发 if 语句

```
- (NSInteger)tableView:(UITableView *)theTableView numberOfRowsInSection:(NSInteger)section
{
    if (tableView == aSearchDisplayController.searchResultsTableView)
        {
            return [self.searchResults count];
        }
        else
        {
            return [collection count];
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:29:15.910

委托函数中的第一个参数被调用`theTableView`而不是`tableView`，所以你应该比较

```
if (theTableView == aSearchDisplayController.searchResultsTableView)
    ... 
```

# ios - iTunesconnect 中的 iPad 下载百分比

> ID：13286458
> 
> 赞同：0
> 
> 时间：2012-11-08T09:47:43.313
> 
> 标签：ios, app-store-connect

我在 Appstore 里有一些游戏。它们是通用应用程序。我想知道有多少百分比的下载来自 ipad。我在itunesconnect 中找不到该信息。

我怎样才能得到这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:51:22.557

我认为获取此类信息的唯一方法是包含[Flurry Analytics](http://www.flurry.com)之类的统计数据。

# java - 更改 WAS 7 上特定 Web 应用程序的 System.out.println 输出目标

> ID：13286459
> 
> 赞同：1
> 
> 时间：2012-11-08T09:47:44.797
> 
> 标签：java, logging, log4j, websphere-7

我在 IBM Websphere 7 上部署了非常大的 Java Web 应用程序，所有异常捕获块都使用 System.out.println 来记录异常，在 WAS 配置文件上部署的所有应用程序的 System.out.println 的所有输出都打印在WAS SystemOut.log 文件。

我需要将 WAS 上的每个应用程序记录到不同的日志文件，而不是 SystemOut.log。

Log4j 没有与应用程序集成，启用它需要很长时间。

是否有任何技术可以更改 WAS 上每个应用程序的 System.out.println 的输出目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:49:16.567

> 所有异常捕获块都使用 System.out.println 来记录异常

不要这样做！使用日志框架。

> Log4j 没有与应用程序集成，启用它需要很长时间。

好吧，然后找到构建如此糟糕的应用程序的人并让他实施必要的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:16:33.360

在这个回答的线程中，解决方案取决于覆盖 System 类的 out 对象以使用 log4j appender，我认为这是一个好主意

[StdOutErrLog](https://stackoverflow.com/questions/1200175/log4j-redirect-stdout-to-dailyrollingfileappender)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:57:25.170

正如对您的问题的评论所指出的那样，您可以在全球范围内更改 System.out 和 System.err 的位置，但是如果您想在每个应用程序的基础上执行此操作，我能想到的唯一解决方案是使用AOP 框架（例如 AspectJ）拦截相关类中的所有 println 调用，并将它们定向到特定于相关类的记录器。

# java - DefaultHttpClient 的单例实例超时

> ID：13286464
> 
> 赞同：2
> 
> 时间：2012-11-08T09:48:02.950
> 
> 标签：java, apache-httpclient-4.x

我正在使用一个*单例*实例来`DefaultHttpClient`以`PoolingClientConnectionManager`多线程方式执行相当数量（每秒多个）的 HTTP 操作。我的代码基本上是：

```
final HttpParams httpClientParams = new BasicHttpParams();
httpClientParams.setParameter("http.protocol.version", HttpVersion.HTTP_1_1);
HttpConnectionParams.setConnectionTimeout(httpClientParams, 700);
HttpConnectionParams.setSoTimeout(httpClientParams, 700);
DefaultHttpClient client = new DefaultHttpClient(poolingClientConnectionManager, httpClientParams); 
```

`client`然后，我将从多个线程并行访问该对象。

我的问题是，超时没有得到尊重，而且我的 HTTP 请求花费的时间比指定的 700 毫秒长得多。

*   像上面那样在客户端上设置超时是否安全？
*   `DefaultHttpClient`对*许多*并行请求使用单例实例是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:47:59.930

*   像上面那样在客户端上设置超时是否安全？

是的，它是安全的。但是，HttpClient 级别的参数表示所有请求继承的*默认设置。*不应该在运行时干预这些设置。通常最好使用请求级别参数来配置单个请求。

*   对许多并行请求使用 DefaultHttpClient 的单例实例是否安全？

不仅安全，而且强烈建议。通过共享相同的 HttpClient 实例，可以通过重新使用共享的持久连接池更有效地执行单个请求。

还请确保您对超时行为的期望是正确的。超时值表示两个*连续*i/o 操作之间的最大不活动时间，而不是最大总请求执行时间。

# php - wordpress wp_http 类 - 数据量大 - 错误

> ID：13286467
> 
> 赞同：0
> 
> 时间：2012-11-08T09:48:12.247
> 
> 标签：php, wordpress

我的 wordpress 插件使用 wordpress 的 WP_HTTP 类作为后请求发送数据。

```
 $myreq = new WP_Http;   
  $myres = $myreq->request("url", array('method' => "POST", 'body' => $mydata, 'timeout' => 'some value') ); 
```

上面的代码在数据量小时工作正常。当数据量大时，它会抛出错误。我怎么知道错误是否只是因为程序的大尺寸？还有什么补救措施？我是否必须要求用户更改他的设置，以便可以将所需的数据量作为发布数据发送？或者有什么可以在插件中完成以允许发布更多数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:56:08.297

您可以使用[此问题](https://stackoverflow.com/questions/277224/how-do-i-catch-a-php-fatal-error)中指定的机制来捕获错误。一旦你发现错误，你可以通知用户。

或者，您也可以使用以下语句来增加 PHP 脚本可用的内存量（前提是服务器有足够的内存）

```
ini_set('memory_limit','32M'); 
```

# java - 用于运行 sql 脚本的 java API

> ID：13286477
> 
> 赞同：0
> 
> 时间：2012-11-08T09:49:08.033
> 
> 标签：java, sql, jdbc

哪些 java API 可用于运行 sql 脚本。我如何在脚本中读取某些数据，例如在下面的脚本中访问数据库的进程计数。

```
DECLARE @DatabaseName nvarchar(50)
DECLARE @SPId int
DECLARE @SQL nvarchar(100)

 SET @DatabaseName = N<dbname>

DECLARE my_cursor CURSOR FAST_FORWARD FOR
SELECT SPId FROM MASTER..SysProcesses
WHERE DBId = DB_ID(@DatabaseName) AND SPId <> @@SPId

OPEN my_cursor

FETCH NEXT FROM my_cursor INTO @SPId

WHILE @@FETCH_STATUS = 0
BEGIN
 SET @SQL = 'KILL ' + CAST(@SPId as nvarchar(10))
 print @SQL
EXEC sp_executeSQL @SQL

 FETCH NEXT FROM my_cursor INTO @SPId
END

CLOSE my_cursor
DEALLOCATE my_cursor 

GO

DROP DATABASE <dbname>
GO 
```

# c# - 如何在 C# 中绘制二维等高线图？

> ID：13286485
> 
> 赞同：3
> 
> 时间：2012-11-08T09:49:51.823
> 
> 标签：c#, winforms, math, matrix, gdi

我主要对能够将 Point3D[] 转换为可绘制 gdi 线的算法感兴趣？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T06:12:15.833

感谢@Anders Gustafsson，我能够构建一些东西：

```
public partial class FunctionGraph : UserControl
{
    private Rectangle _area = new Rectangle(-10, -10, 20, 20);

    private Func<float, float, float> _func;

    public FunctionGraph()
    {
        SetStyle(
            ControlStyles.UserPaint | ControlStyles.AllPaintingInWmPaint | ControlStyles.DoubleBuffer |
            ControlStyles.OptimizedDoubleBuffer |
            ControlStyles.ResizeRedraw, true);

        this.Padding.All=20;
        InitializeComponent();
    }

    public Rectangle Area
    {
        get { return _area; }
        set
        {
            _area = value;

            Invalidate();
        }
    }

    public Func<float, float, float> Function
    {
        get { return _func; }
        set
        {
            _func = value;
            Invalidate();
        }
    }

    public PointF GraphToClient(PointF p)
    {
        var xreal = this.ClientRectangle.Width - this.Padding.All * 2;
        var yreal = this.ClientRectangle.Height - this.Padding.All * 2;
         int n = (this.ClientRectangle.Width-this.Padding.All*2)/5;

            int m = (this.ClientRectangle.Height - this.Padding.All *2) / 5;

        return new PointF
                    {
                        X = this.Padding.All+p.X/ (xreal / (n * 5)),
                        Y = this.Padding.All + p.Y / (yreal / (m * 5))
                    };

    }

    protected override void OnPaint(PaintEventArgs e)
    {
        var graphics = e.Graphics;

        if (_func != null && !DesignMode&& Enabled)
        {

            float min = Single.MaxValue;

            float max = Single.MinValue;

            int n = (this.ClientRectangle.Width-this.Padding.All*2)/5;

            int m = (this.ClientRectangle.Height - this.Padding.All *2) / 5;

            var pts = new Point3F[n,m];

            for (int i = 0; i < n; i++)
            {
                for (int j = 0; j < m; j++)
                {

                    var xreal = this.ClientRectangle.Width - this.Padding.All * 2;
                    var yreal = this.ClientRectangle.Height - this.Padding.All * 2;

                    var pt=new Point3F(this.Padding.All+i * 5,this.Padding.All+ j * 5, _func((i * 5) * (xreal / (n * 5)), (j * 5) * (yreal / (m * 5))));

                    if (i == n-1)
                        pt.X = this.ClientRectangle.Width - this.Padding.All;
                    if(j==m-1)
                        pt.Y = this.ClientRectangle.Height - this.Padding.All;

                    pts[i, j] = pt;
                    if (pts[i, j].Z > max)
                        max = pts[i, j].Z;
                    if (pts[i, j].Z < min)
                        min = pts[i, j].Z;

                }

            }

            DrawContour(graphics, pts, min, max, 10);
            DrawColor(graphics, pts, min, max);

            var rect = this.ClientRectangle;

            rect.Inflate(-this.Padding.All+1,-this.Padding.All+1);

            ControlPaint.DrawBorder(graphics, rect, SystemColors.ControlDarkDark, ButtonBorderStyle.Dashed);

            int stepx = (this.ClientRectangle.Width - 2*this.Padding.All)/_area.Width;
            int stepy = (this.ClientRectangle.Height - 2 * this.Padding.All) / _area.Height;

            for (int i = _area.X; i < _area.Width; i++)
            {
              graphics.DrawString(i.ToString("0.0"),this.Font,Brushes.Black,this.Padding.All+(i-_area.X)*stepx,this.ClientRectangle.Height-this.Padding.All*0.75f);

            }
            using (var format = new StringFormat(StringFormatFlags.DirectionRightToLeft){Alignment = StringAlignment.Far})
            {
               // graphics.TranslateTransform(this.ClientRectangle.Width,0);
               // graphics.RotateTransform(90);

                for (int i = _area.Y; i < _area.Height; i++)
                {
                    graphics.DrawString(i.ToString("0.0"), this.Font, Brushes.Black, this.Padding.All*0.25f-this.Font.Size*0.5f
                        , this.ClientRectangle.Height-this.Padding.All- (i-_area.Y) * stepy,format);
                }
                graphics.ResetTransform();
            }
        }

        ControlPaint.DrawBorder(graphics, ClientRectangle, SystemColors.ActiveBorder, ButtonBorderStyle.Solid);
        base.OnPaint(e);
    }

    private struct Point3F
    {
        public float X { get; set; }
        public float Y { get; set; }
        public float Z { get; set; }

        public Point3F(float x,float y,float z) : this()
        {
            this.X = x;
            this.Y = y;
            this.Z = z;
        }

    }

    private static void DrawContour(Graphics g, Point3F[,] pts, float zmin, float zmax, int ncount)
    {
        using (var aPen = new Pen(Color.DimGray) {Width = 0.25f})
        {
            var pta = new PointF[2];

            var zlevels = new float[ncount];
            for (int i = 0; i < ncount; i++)
            {
                zlevels[i] = zmin + i*(zmax - zmin)/(ncount - 1);
            }
            int i0, i1, i2, j0, j1, j2;
            float zratio = 1; // Draw contour on the XY plane:
            for (int i = 0; i < pts.GetLength(0) - 1; i++)
            {
                for (int j = 0; j < pts.GetLength(1) - 1; j++)
                {
                    for (int k = 0; k < ncount; k++)
                    {
                        // Left triangle:
                        i0 = i;
                        j0 = j;
                        i1 = i;
                        j1 = j + 1;
                        i2 = i + 1;
                        j2 = j + 1;
                        if ((zlevels[k] >= pts[i0, j0].Z && zlevels[k] < pts[i1, j1].Z ||
                             zlevels[k] < pts[i0, j0].Z && zlevels[k] >= pts[i1, j1].Z) &&
                            (zlevels[k] >= pts[i1, j1].Z && zlevels[k] < pts[i2, j2].Z ||
                             zlevels[k] < pts[i1, j1].Z && zlevels[k] >= pts[i2, j2].Z))
                        {
                            zratio = (zlevels[k] - pts[i0, j0].Z)/(pts[i1, j1].Z - pts[i0, j0].Z);
                            pta[0] =
                                new PointF(pts[i0, j0].X, (1 - zratio)*pts[i0, j0].Y + zratio*pts[i1, j1].Y);
                            zratio = (zlevels[k] - pts[i1, j1].Z)/(pts[i2, j2].Z - pts[i1, j1].Z);
                            pta[1] =
                                new PointF((1 - zratio)*pts[i1, j1].X + zratio*pts[i2, j2].X, pts[i1, j1].Y);
                            g.DrawLine(aPen, pta[0], pta[1]);
                        }
                        else if ((zlevels[k] >= pts[i0, j0].Z && zlevels[k] < pts[i2, j2].Z ||
                                  zlevels[k] < pts[i0, j0].Z && zlevels[k] >= pts[i2, j2].Z) &&
                                 (zlevels[k] >= pts[i1, j1].Z && zlevels[k] < pts[i2, j2].Z ||
                                  zlevels[k] < pts[i1, j1].Z && zlevels[k] >= pts[i2, j2].Z))
                        {
                            zratio = (zlevels[k] - pts[i0, j0].Z)/(pts[i2, j2].Z - pts[i0, j0].Z);
                            pta[0] =
                                new PointF((1 - zratio)*pts[i0, j0].X + zratio*pts[i2, j2].X,
                                           (1 - zratio)*pts[i0, j0].Y + zratio*pts[i2, j2].Y);
                            zratio = (zlevels[k] - pts[i1, j1].Z)/(pts[i2, j2].Z - pts[i1, j1].Z);
                            pta[1] =
                                new PointF((1 - zratio)*pts[i1, j1].X + zratio*pts[i2, j2].X, pts[i1, j1].Y);
                            g.DrawLine(aPen, pta[0], pta[1]);
                        }
                        else if ((zlevels[k] >= pts[i0, j0].Z && zlevels[k] < pts[i1, j1].Z ||
                                  zlevels[k] < pts[i0, j0].Z && zlevels[k] >= pts[i1, j1].Z) &&
                                 (zlevels[k] >= pts[i0, j0].Z && zlevels[k] < pts[i2, j2].Z ||
                                  zlevels[k] < pts[i0, j0].Z && zlevels[k] >= pts[i2, j2].Z))
                        {
                            zratio = (zlevels[k] - pts[i0, j0].Z)/(pts[i1, j1].Z - pts[i0, j0].Z);
                            pta[0] =
                                new PointF(pts[i0, j0].X, (1 - zratio)*pts[i0, j0].Y + zratio*pts[i1, j1].Y)
                                ;
                            zratio = (zlevels[k] - pts[i0, j0].Z)/(pts[i2, j2].Z - pts[i0, j0].Z);
                            pta[1] =
                                new PointF(pts[i0, j0].X*(1 - zratio) + pts[i2, j2].X*zratio,
                                           pts[i0, j0].Y*(1 - zratio) + pts[i2, j2].Y*zratio);
                            g.DrawLine(aPen, pta[0], pta[1]);
                        } // right triangle:
                        i0 = i;
                        j0 = j;
                        i1 = i + 1;
                        j1 = j;
                        i2 = i + 1;
                        j2 = j + 1;
                        if ((zlevels[k] >= pts[i0, j0].Z && zlevels[k] < pts[i1, j1].Z ||
                             zlevels[k] < pts[i0, j0].Z && zlevels[k] >= pts[i1, j1].Z) &&
                            (zlevels[k] >= pts[i1, j1].Z && zlevels[k] < pts[i2, j2].Z ||
                             zlevels[k] < pts[i1, j1].Z && zlevels[k] >= pts[i2, j2].Z))
                        {
                            zratio = (zlevels[k] - pts[i0, j0].Z)/(pts[i1, j1].Z - pts[i0, j0].Z);
                            pta[0] =
                                new PointF(pts[i0, j0].X*(1 - zratio) + pts[i1, j1].X*zratio, pts[i0, j0].Y);
                            zratio = (zlevels[k] - pts[i1, j1].Z)/(pts[i2, j2].Z - pts[i1, j1].Z);
                            pta[1] =
                                new PointF(pts[i1, j1].X, pts[i1, j1].Y*(1 - zratio) + pts[i2, j2].Y*zratio);
                            g.DrawLine(aPen, pta[0], pta[1]);
                        }
                        else if ((zlevels[k] >= pts[i0, j0].Z && zlevels[k] < pts[i2, j2].Z ||
                                  zlevels[k] < pts[i0, j0].Z && zlevels[k] >= pts[i2, j2].Z) &&
                                 (zlevels[k] >= pts[i1, j1].Z && zlevels[k] < pts[i2, j2].Z ||
                                  zlevels[k] < pts[i1, j1].Z && zlevels[k] >= pts[i2, j2].Z))
                        {
                            zratio = (zlevels[k] - pts[i0, j0].Z)/(pts[i2, j2].Z - pts[i0, j0].Z);
                            pta[0] =
                                new PointF(pts[i0, j0].X*(1 - zratio) + pts[i2, j2].X*zratio,
                                           pts[i0, j0].Y*(1 - zratio) + pts[i2, j2].Y*zratio);
                            zratio = (zlevels[k] - pts[i1, j1].Z)/(pts[i2, j2].Z - pts[i1, j1].Z);
                            pta[1] =
                                new PointF(pts[i1, j1].X, pts[i1, j1].Y*(1 - zratio) + pts[i2, j2].Y*zratio);
                            g.DrawLine(aPen, pta[0], pta[1]);
                        }
                        else if ((zlevels[k] >= pts[i0, j0].Z && zlevels[k] < pts[i1, j1].Z ||
                                  zlevels[k] < pts[i0, j0].Z && zlevels[k] >= pts[i1, j1].Z) &&
                                 (zlevels[k] >= pts[i0, j0].Z && zlevels[k] < pts[i2, j2].Z ||
                                  zlevels[k] < pts[i0, j0].Z && zlevels[k] >= pts[i2, j2].Z))
                        {
                            zratio = (zlevels[k] - pts[i0, j0].Z)/(pts[i1, j1].Z - pts[i0, j0].Z);
                            pta[0] =
                                new PointF(pts[i0, j0].X*(1 - zratio) + pts[i1, j1].X*zratio, pts[i0, j0].Y);
                            zratio = (zlevels[k] - pts[i0, j0].Z)/(pts[i2, j2].Z - pts[i0, j0].Z);
                            pta[1] =
                                new PointF(pts[i0, j0].X*(1 - zratio) + pts[i2, j2].X*zratio,
                                           pts[i0, j0].Y*(1 - zratio) + pts[i2, j2].Y*zratio);
                            g.DrawLine(aPen, pta[0], pta[1]);
                        }
                    }
                }
            }
        }
    }

    private static Color GetColor(float value, float maxValue, float minValue)
    {
        // Convert into a value between 0 and 1023.
        int int_value = (int) (1023*(value - maxValue)/(minValue - maxValue));

        // Map different color bands.
        if (int_value < 256)
        {
            // Red to yellow. (255, 0, 0) to (255, 255, 0).
            return Color.FromArgb(255, int_value, 0);
        }
        else if (int_value < 512)
        {
            // Yellow to green. (255, 255, 0) to (0, 255, 0).
            int_value -= 256;
            return Color.FromArgb(255 - int_value, 255, 0);
        }
        else if (int_value < 768)
        {
            // Green to aqua. (0, 255, 0) to (0, 255, 255).
            int_value -= 512;
            return Color.FromArgb(0, 255, int_value);
        }
        else
        {
            // Aqua to blue. (0, 255, 255) to (0, 0, 255).
            int_value -= 768;
            return Color.FromArgb(0, 255 - int_value, 255);
        }
    }

    private static void DrawColor(Graphics g, Point3F[,] pts, float zmin, float zmax)
    {          
        var pta = new PointF[4];

        for (int i = 0; i < pts.GetLength(0) - 1; i++)
        {
            for (int j = 0; j < pts.GetLength(1) - 1; j++)
            {
                pta[0] = new PointF(pts[i, j].X, pts[i, j].Y);
                pta[1] = new PointF(pts[i, j + 1].X, pts[i, j + 1].Y);
                pta[2] = new PointF(pts[i + 1, j + 1].X, pts[i + 1, j + 1].Y);
                pta[3] = new PointF(pts[i + 1, j].X, pts[i + 1, j].Y);
                using (var aBrush = new SolidBrush(Color.FromArgb(200, GetColor(pts[i, j].Z, zmin, zmax))))
                {
                    g.FillPolygon(aBrush, pta);
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:59:10.470

OpenTK 库包含 3D 函数。这是一个 .NET 的开源库；[您可以在http://www.opentk.com/doc/math](http://www.opentk.com/doc/math)找到更多信息。

如果您对交互式图形或游戏感兴趣，请查看[http://msdn.microsoft.com/en-us/centrum-xna.aspx](http://msdn.microsoft.com/en-us/centrum-xna.aspx)上的 XNA 库（可用于编写 Xbox 360 和 PC 游戏） 。

祝你好运！

# ios - 在 Core Bluetooth 中断开连接后如何重新连接到设备

> ID：13286487
> 
> 赞同：7
> 
> 时间：2012-11-08T09:49:54.587
> 
> 标签：ios, bluetooth, core-bluetooth

在Core Bluetooth中，连接到设备后，我关闭设备，设备断开连接。但是当我再次打开设备时，没有`didDiscoverPeripheral`再次调用。如何重新连接到设备？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T09:55:12.630

当您断开设备时，`cancelPeripheralConnection`将`didDisconnectPeripheral`调用委托方法。然而，从 iOS 6.0 开始，设备保持连接状态大约 40-50 秒（或更长时间），因此`didDiscoverPeripheral`在该时间范围内不会调用 no。如果您想再次“发现”它，只需调用该`retrieveConnectedPeripherals`方法，您将在`didRetrieveConnectedPeripherals`.

但是，最好的解决方案是保存设备的 UUID 并使用该`retrievePeripherals`方法重新连接。这将调用`didRetrievePeripherals`，您可以重新连接`connectPeripheral`。这是重新连接到设备的最快方式，在这种情况下不需要扫描。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T15:33:52.960

当您使用 进行扫描时`scanForPeripheralsWithServices`，它通常只会针对特定设备地址通知您一次。您可以通过指定选项将其更改为报告重复项`CBCentralManagerScanOptionAllowDuplicatesKey`。或者，您可以让您的应用程序检测到其他设备使用超时断开连接，然后重新开始扫描。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T22:05:35.570

在 CoreBluetooth 中，所有管理都由应用层完成。在你的情况下，我会做的是监听断开事件而不是在同一事件中，重新连接外围设备。连接方法是一种便宜的方法，并确保您在设备回到范围内时重新连接到您的设备。

请注意，如果您明确断开设备连接，您会收到相同的断开连接事件，但您无需调用重新连接方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-25T14:13:10.407

@Andras 给了我正确的道路，但自 iOS7 以来他的答案不再完整。

重新连接到以前的设备的最佳方法是使用该`retrievePeripherals(withIdentifiers:)`方法。

该方法不调用delegate，而是直接返回给你一个`Peripheral`s列表，对应`UUID`传入的参数列表。

```
if let peripheral = self.centralManager.retrievePeripherals(withIdentifiers: [uuid]).first {
    self.peripheral = peripheral // <-- super important
    self.centralManager.connect(peripheral, options: nil)
} 
```

请检查上面代码的“超级重要”行：该方法`connect(_:option:)`不保留外设，如果您不自己做，连接将永远失败，没有任何回调，因为外设对象将被破坏。

# c# - 什么是 .Net 类型相当于 Paradox 数据库中的时间

> ID：13286488
> 
> 赞同：2
> 
> 时间：2012-11-08T09:49:55.273
> 
> 标签：c#, .net, paradox

我正在通过二进制读取访问 Paradox 文件。

但我有一个问题。我不知道我应该从 Paradox 数据库中的时间进行什么转换：

*   时间跨度
*   约会时间
*   或者我应该转换为字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:51:58.713

`DateTime`遗嘱总是有日期部分。

这`TimeSpan`很可能是您需要的。它可以保持小时，分钟......没有日期。

**编辑**：对不正确评论的反应

*建议的时间到日期时间的映射只是不正确的抽象。然后，您的 C# 属性包含一个错误的日期 01/01/0001（不是预期的），并且大多数情况下在您访问此类属性时都会被处理。*

*而`TimeSpan`, 可以准确地显示我们想要的：从午夜开始的时间。因此，如果我们从 DB 类型映射时间，这将为我们提供开箱即用的功能：可以作为时间加载，可以作为时间存储。*

# algorithm - T-SQL 优化经纬度地理搜索

> ID：13286496
> 
> 赞同：0
> 
> 时间：2012-11-08T09:50:21.477
> 
> 标签：algorithm, tsql, optimization, geolocation, geocoding

我存储在我的一张表中的是以下格式的地理点：

> 经度纬度邮政编码

这个想法是使用表中的信息通过给定的经度和纬度获取最接近的可用邮政编码。

我的算法工作如下：

1.  初始化 UserLongitude 和 UserLatitude
2.  初始化 StepVariable 为 1.0
3.  从我的表中获取所有记录

    ```
    longitude>UserLongitude-StepVariable 
    and
    longitude<UserLongitude+StepVariable 
    and
    latitude>Userlatitude-StepVariable   
    and
    latitude<Userlatitude+StepVariable 
    ```

4.  如果没有找到记录，将 StepVariable 增加 1.0 并执行步骤 3

正如我所[读到](http://www.zodiacal.com/tools/lat_table.php)的，当我们移动到两极时，1.0 的经度值会变小。因此，当经度和纬度的 1.0 值不同时，我的算法将以不正确的方式扩展搜索区域。

有没有一种棘手的方法可以将我的可搜索区域扩展为 Square，因为现在，在某些地方我有矩形，我相信这会使我的搜索速度变慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:08:11.303

我建议使用`Geography`and`Geometry`数据类型及其相关函数（例如`STDistance`：）

请参阅[http://msdn.microsoft.com/en-us/library/bb933917(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/bb933917(v=sql.100).aspx)

如果你不能这样做，那么[Haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)对于计算距离很有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:45:42.643

为了计算特定地理点的经纬度长度是多少米，我使用以下算法：

```
-- Geograpic Point Cordinates
DECLARE @LATTIDUDE REAL=45
DECLARE @LONGITUDE REAL=45
DECLARE @Distance REAL=10

-- Constants
DECLARE @ConvertionConstant AS FLOAT=2*PI()/360
DECLARE @MetersPerDegree AS FLOAT

DECLARE @LattidueInRadians AS FLOAT=@ConvertionConstant*@LATTIDUDE

DECLARE @LongitudeParameter1 AS FLOAT=111412.84
DECLARE @LongitudeParameter2 AS FLOAT=-93.5 
DECLARE @LongitudeParameter3 AS FLOAT=0.118

SET @MetersPerDegree=(@LongitudeParameter1*COS(@LattidueInRadians))+(@LongitudeParameter2*(COS(3*@LattidueInRadians)))+(@LongitudeParameter3*COS(5*@LattidueInRadians))
DECLARE @LongitudeRangeTemp AS FLOAT=@Distance/(@MetersPerDegree/1000)

-- Results for longitude
SELECT @LongitudeRangeTemp AS DegreesForGivenKM
SELECT @MetersPerDegree    AS MetersPerDegreeOfLongitude

-- Constants
DECLARE @LatitudeParameter1 AS FLOAT=111132.92
DECLARE @LatitudeParameter2 AS FLOAT=-559.82
DECLARE @LatitudeParameter3 AS FLOAT=1.175
DECLARE @LatitudeParameter4 AS FLOAT=-0.0023

-- Results for longitude
SET @MetersPerDegree=(@LatitudeParameter1+(@LatitudeParameter2*COS(2*@LattidueInRadians))+(@LatitudeParameter3*COS(4*@LattidueInRadians))+(@LatitudeParameter4*COS(6*@LattidueInRadians)))
DECLARE @LatitudeRangeTemp AS FLOAT=@Distance/(@MetersPerDegree/1000)
SELECT @LatitudeRangeTemp AS  DegreesForGivenKM
SELECT @MetersPerDegree   AS  MetersPerDegreeOfLatitude 
```

为公里添加了一个附加参数 - 代码将计算多少度等于给定的公里。

您可以自由地在函数中实现代码。

# java - 导入什么以将 RolesAllowed 与球衣一起使用

> ID：13286504
> 
> 赞同：0
> 
> 时间：2012-11-08T09:51:01.603
> 
> 标签：java, http, rest, authorization, jersey

我正在使用 jersey 构建一个宁静的网络服务。出于授权目的，我实现了一个实现 ContainerRequestFilter 的类 AuthorizationFilter。我在我的 web.xml 中应用这个过滤器，如下所示：

```
 <init-param>
         <param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
         <param-value>filters.AuthorizationFilter</param-value>
    </init-param> 
```

我的 AuthorizationFilter 根据身份验证的结果设置每个请求的 SecurityContext。

```
request.setSecurityContext(new Authorizer(webuser)); 
```

我的授权人如下所示：

```
public class Authorizer implements SecurityContext {

    private WebUser webuser;
    private Principal principal;

    public Authorizer(final WebUser webuser) {
        this.webuser = webuser;
        this.principal = new Principal() {

            @Override
            public String getName() {
                return webuser.getUsername();
            }
        };
    }

    @Override
    public String getAuthenticationScheme() {
        return SecurityContext.FORM_AUTH;
    }

    @Override
    public Principal getUserPrincipal() {
        return principal;
    }

    @Override
    public boolean isSecure() {
        return true;
    }

    @Override
    public boolean isUserInRole(String role) {
        return role.equals(webuser.getRole());
    }

} 
```

现在我想为我的端点方法注释允许的角色：

```
 @GET
    @Produces(MediaType.APPLICATION_JSON)
    @Path("{id}")
    @RolesAllowed({"EMPLOYEE"})
    @Override
    public Response Retreive(@PathParam("id") int id) {
        return super.Retreive(id);
    } 
```

但它说“RolesAllowed 无法解析为一种类型”。所以我的问题是一个。如何解决这个问题和 b。我做对了吗？

在此先感谢克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:48:48.707

关于您问题的第一部分：您可能缺少对 Java EE API 的依赖项，其中`RolesAllowed`定义了注释（请参阅[JavaDoc](http://docs.oracle.com/javaee/6/api/javax/annotation/security/RolesAllowed.html)）

如果您使用 Maven 构建您的项目，请尝试将依赖项添加`javax:javaee-web-api:6.0`到您的 pom.xml。

# spring - 从 jsp 中检索值而不使用 pojo 变量

> ID：13286505
> 
> 赞同：0
> 
> 时间：2012-11-08T09:51:01.297
> 
> 标签：spring, jsp, spring-mvc

`request.getParamenter(xxxx)`我们可以通过使用 commandName 或使用隐藏字段在控制器的 jsp 页面中获取提交表单的值。

有没有其他方法可以从控制器中的 jsp 形式获取值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:12:01.687

Spring 提供了几种将请求中的参数数据绑定到 Java 中的实际对象的方法。大多数数据绑定是使用带注释的方法或通过在方法中注释参数来指定的。

**让我们考虑以下形式：**

```
<form>
  <input name="firstName"/>
  <input name="lastName"/>
  <input name="age"/>
</form> 
```

在 Spring 控制器中，可以通过多种方式获取请求参数。

**@RequestParam** [文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-requestparam)

```
@RequestMapping("/someurl)
public String processForm(@RequestParam("firstName") String  firstName, 
   @RequestParam("lastName") String  lastName, 
       @RequestParam("age") String  int,) {
 .....
} 
```

如果我们的请求参数在一个类中建模，`Person.java`我们可以使用另一种技术，`@ModelAttribute`.

**人.java**

```
public class Person(){
   String firstName;
   String lastName;
   int age;

   //Constructors and Accessors implied.
} 
```

**@ModelAttribute** [文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-methods)

```
@RequestMapping(value="/someUrl")
public String processSubmit(@ModelAttribute Person person) {
   //person parameter will be bound to request parameters using field/param name matching.
} 
```

这是 Spring 用于提供数据绑定的两种最常用的方法。阅读[Spring MVC 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-methods)中的其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:04:05.987

```
public String myMethod(@RequestParam("myParamOne") String myParamOne) {
 //do stuff 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:05:22.047

您可以通过注解直接将字段映射到控制器方法，`@RequestParam`也可以使用`@ModelAttribute`.

```
public ModelAndView method(@RequestParam(required = true, value = "id") Long id) {
}

public ModelAndView method(@ModelAttribute("pojo") POJO pojo, BindingResult results) {
} 
```

# java - 构建模式以从字符串中提取数据

> ID：13286507
> 
> 赞同：2
> 
> 时间：2012-11-08T09:51:02.697
> 
> 标签：java, regex, pattern-matching

我有以下形式的字符串：

```
"abc" 1 2 1 13 
"efgh" 2 5 
```

基本上，引号中的字符串后跟由空格字符分隔的数字。我需要从行中提取字符串和数字。

因此，例如，对于第一行，我想要

*   `abc`存储在一个`String`变量中（即没有引号）和
*   `int`要存储的数组`[1,2,1,13]`。

我试图创建一个可以做到这一点的模式，但我有点困惑。

```
Pattern P = Pattern.compile("\A\".+\"(\s\d+)+"); 
```

现在不知道如何进行。我意识到用这种模式我会提取整条线？也许多种模式会有所帮助？

```
Pattern P1 = Pattern.compile("\A\".+\"");
Pattern P2 = Pattern.compile("(\s\d+)+"); 
```

同样，不太确定如何使字符串和整数脱离行列。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:58:06.747

我宁愿只在空间上拆分字符串，而不是构建复杂的正则表达式，并将其与`Pattern`类一起使用`Matcher`。

像这样的东西： -

```
String str = "\"abc\" 1 2 1 13 ";
String[] arrr = str.split("\\s");
System.out.println(Arrays.toString(arrr)); 
```

**输出： -**

```
["abc", 1, 2, 1, 13] 
```

更清楚地表明您的意图，即您想要做什么。

然后，您可以从字符串数组中获取`string`和部分。`integer`您需要`Integer.parseInt()`对整数元素执行 a 。

* * *

如果您的字符串中可能包含空格，那么在这种情况下，您将需要一个`Regex`. 更好的一个将是`@m.buettner's` [答案](https://stackoverflow.com/a/13286675/1679863)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:00:12.577

使用捕获组一次性获取两个部分，然后在空格处拆分数字。

```
Pattern pattern = Pattern.compile("\"([^\"]*)\"\\s*([\\d\\s]*)");

Matcher m = pattern .matcher(input);
while (m.find()) {
    String str = m.group(1);
    String[] numbers = m.group(2).split("\\s");
    // process both of them       
} 
```

正则表达式中的每组括号稍后将对应一个`group`（从左到右计算左括号，从 开始`1`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:04:09.763

请试试这个，它也会将 String 和 int 分开

```
 String s = "\"abc\" 1 2 1 13 ";

        s = s.replace("\"", "");
        String sarray[] = s.split(" ");

        int i[] = new int[10];
        String si[] = new String[10];
        int siflag = 0;
        int iflag = 0;
        for (String st : sarray) {
            try {
                int ii = Integer.parseInt(st)
                i[iflag++] = ii;
            } catch (NumberFormatException e) {
                si[siflag++] = st;
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T10:13:41.727

```
StringTokenizer st = new StringTokenizer(str,"\" ");
String token = null;
String strComponent = null;
int num[] = new int[10]; // can change length dynamically by using ArrayList
int i = 0;
int numTemp = -1;
while(st.hasMoreTokens()){
    token = st.nextToken();

    try{
        numTemp  = Integer.parseInt(token);
        num[i++] = numTemp ;
    }catch(NumberFormatException nfe){
        strComponent = token.toString();
    } 
```

# android - Android java.lang.OutOfMemoryError：位图大小超出VM预算

> ID：13286508
> 
> 赞同：1
> 
> 时间：2012-11-08T09:51:03.613
> 
> 标签：android, image, android-emulator

> **可能重复：**
> [java.lang.OutOfMemoryError：位图大小超出 VM 预算](https://stackoverflow.com/questions/4611822/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget)

很长时间以来我一直收到此`java.lang.OutOfMemoryError: bitmap size exceeds VM budget`错误。我在应用程序中使用了许多图像（png）。所有图像的总大小将以 Kb 为单位。我浏览了与该主题相关的各种帖子，但它们与设备有关。我在`emulator`而不是任何设备上遇到了这个问题，它在我测试过的所有设备上都可以正常工作。可以为这个问题做些什么。

```
11-08 12:18:53.259: E/AndroidRuntime(1626): FATAL EXCEPTION: main
11-08 12:18:53.259: E/AndroidRuntime(1626): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.curious.solutions.finalautoistdiary/com.curious.solutions.finalautoistdiary.ServiceAdd}: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.os.Looper.loop(Looper.java:130)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.app.ActivityThread.main(ActivityThread.java:3683)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at java.lang.reflect.Method.invokeNative(Native Method)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at java.lang.reflect.Method.invoke(Method.java:507)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at dalvik.system.NativeStart.main(Native Method)
11-08 12:18:53.259: E/AndroidRuntime(1626): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.view.LayoutInflater.parseInclude(LayoutInflater.java:684)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:619)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.app.Activity.setContentView(Activity.java:1657)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at com.curious.solutions.finalautoistdiary.ServiceAdd.onCreate(ServiceAdd.java:77)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
11-08 12:18:53.259: E/AndroidRuntime(1626):     ... 11 more
11-08 12:18:53.259: E/AndroidRuntime(1626): Caused by: java.lang.reflect.InvocationTargetException
11-08 12:18:53.259: E/AndroidRuntime(1626):     at java.lang.reflect.Constructor.constructNative(Native Method)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
11-08 12:18:53.259: E/AndroidRuntime(1626):     ... 23 more
11-08 12:18:53.259: E/AndroidRuntime(1626): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.view.View.<init>(View.java:1951)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.view.View.<init>(View.java:1899)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.view.ViewGroup.<init>(ViewGroup.java:286)
11-08 12:18:53.259: E/AndroidRuntime(1626):     at android.widget.RelativeLayout.<init>(RelativeLayout.java:173)
11-08 12:18:53.259: E/AndroidRuntime(1626):     ... 26 more 
```

# database - 归一化为 BCNF

> ID：13286510
> 
> 赞同：2
> 
> 时间：2012-11-08T09:51:13.980
> 
> 标签：database, relational-database, relation

我的关系如下：

```
R = (X,Y,C,D) 
```

和功能依赖：

```
FD = {XY -> CD, YC -> D, D -> X} 
```

我发现候选键是 XY、YC、YD。

在这种情况下，我有 3 个候选键......那么当我将关系分解为 BCNF 时如何使用它们？我从来没有用一个以上的键分解关系......

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T18:07:27.470

@KeyM

**1.找出违反BCNF的FD**

在这种情况下，它的 D->X

**2.分解成两个关系R1,R2**

R1(D,X) R2(D,休息)

**3.重复1,2直到所有的关系都在BCNF**

使用这个我们的解决方案是 R1(Y,C,D) , R2(D,X)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:18:29.580

关系 1：（Y，C，D） 关系 2：（D，X）

# jquery - Jquery UI 工具提示。设置超时并设置悬停事件。鼠标悬停时冻结工具提示

> ID：13286514
> 
> 赞同：11
> 
> 时间：2012-11-08T09:51:27.673
> 
> 标签：jquery, jquery-ui, tooltip

我用谷歌搜索了大约 2 天，不知道如何为[http://api.jqueryui.com/tooltip/](http://api.jqueryui.com/tooltip/)设置超时？？？

也许我应该使用 jquery hoverIntent ？

这是我的代码

```
$('*[class*="help_"]').tooltip({
    open: function(e,o){
        $(o.tooltip).mouseover(function(e){
            $('*[class*="help_"]').tooltip('open');
        });
        $(o.tooltip).mouseout(function(e){
        });         
    },
    close: function(e,o) {}
}); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-22T00:21:51.663

我还寻找了一个类似的解决方案，正常显示工具提示，但是当鼠标悬停在工具提示上时它应该保留（工具提示的内容是一些按钮）。

我不希望整个框架（qtip）做到这一点，我已经在我的网站上使用 jqUI。

所以我这样做了：

```
$( document ).tooltip({
  show: null, // show immediately 
  items: '.btn-box-share',
  hide: {
    effect: "", // fadeOut
  },
  open: function( event, ui ) {
    ui.tooltip.animate({ top: ui.tooltip.position().top + 10 }, "fast" );
  },
  close: function( event, ui ) {
    ui.tooltip.hover(
        function () {
            $(this).stop(true).fadeTo(400, 1); 
            //.fadeIn("slow"); // doesn't work because of stop()
        },
        function () {
            $(this).fadeOut("400", function(){ $(this).remove(); })
        }
    );
  }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-01T11:24:32.563

我有一个很好的解决方案，灵感来自[jQuery 论坛主题](http://forum.jquery.com/topic/prevent-tooltip-close-on-focusout#14737000003633832)：

```
var mouseLeaveTimer;
$('.selector').tooltip(
    open: function(){
        // make sure all other tooltips are closed when opening a new one
        $('.selector').not(this).tooltip('close');
    }
}).on('mouseleave', function(e){
    var that = this;

    // close the tooltip later (maybe ...)
    mouseLeaveTimer = setTimeout(function(){
        $(that).tooltip('close');
    }, 100);

    // prevent tooltip widget to close the tooltip now
    e.stopImmediatePropagation(); 
});

$(document).on('mouseenter', '.ui-tooltip', function(e){
    // cancel tooltip closing on hover
    clearTimeout(mouseLeaveTimer);
});

$(document).on('mouseleave', '.ui-tooltip', function(){
    // make sure tooltip is closed when the mouse is gone
    $('.selector').tooltip('close');
}); 
```

[更新：Amit为上述解决方案[添加了要点并进行了修复。]](https://gist.github.com/amithegde/9420197)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-27T23:04:05.017

我喜欢这样设置超时：

```
 $(document).tooltip({
     open: function(event, ui) {
         ui.tooltip.delay(5000).fadeTo(2000, 0);
     }
 }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T09:57:37.857

试过这个？

```
$( ".selector" ).tooltip({ show: { duration: 800 } }); 
```

链接：[http ://api.jqueryui.com/tooltip/#option-show](http://api.jqueryui.com/tooltip/#option-show)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-27T19:44:58.383

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
    <title> dynamic jquery ui tooltip </title>

  <link rel="stylesheet" 
  href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
  <style>
            #listing {
                margin-left: 50px ;
            }
            .ui-tooltip {
                background: #AAABBB ;
                -webkit-box-shadow: 0 0 10px #aaa;
                box-shadow: 0 0 10px #aaa;
            }
            body .ui-tooltip {
                border-width: 4px;
            }
    </style>
</head>
<body>
<div id="listing">
<div class="item-heading" id="item-1" > link-1 </div>
</br>
</br>
<div class="item-heading" id="item-2"> link-2</div>
</div>
    <script>

    // courtesy of: http://stackoverflow.com/a/15014759/65706
    // and : http://stackoverflow.com/a/23487435/65706
    $(document).tooltip({
        items: ".item-heading"
        // set static content to the tooltip
        // , content: '<p> <a href="http://www.google.com"> go to google </a>'
        // or
        // set a dynamic content based on the selected element id
        , content: function() {
                //attribute title would do it as well for non html5
                //also any custom attribute name would do it for html5
                var el_id= $(this).attr('id');
                var id=el_id.split('-')[1];
                var d_link = "http://www.somesite.com/page.php?id=" + id ;
                d_link = "<p><a href=\"" + d_link + "\"> go to link " + 
                id + " </a></p>" ;
                return d_link ;
        }
        , open: function( event, ui ) {
                ui.tooltip.animate({ top: ui.tooltip.position().top + 4 }, "fast" );
            }
        , close: function( event, ui ) {
                ui.tooltip.hover(
                    function () {
                     $(this).stop(true).fadeTo(400, 1);
                        //.fadeIn("slow"); // doesn't work because of stop()
                    },
                    function () {
                        $(this).fadeOut("400", function(){ $(this).remove(); })
                    }
                );
        }
});
    </script>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-04T20:02:13.350

@naveen 回复的变体。这有一个持续时间，但使用[jQuery UI 缓](http://api.jqueryui.com/easings/)动直到持续时间的一半（在这种情况下为 800 毫秒为 400 毫秒）才显示。如果用户不保持鼠标悬停，则此功能类似于悬停意图，因为工具提示将永远不可用。解决问题的简单、优雅的方法。

```
$( ".selector" ).tooltip({ show: { easing: "easeInExpo", duration: 800 } }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-12T10:47:09.127

此版本确保工具提示保持可见的时间足够长，以便用户将鼠标移到工具提示上并保持可见直到鼠标移出。方便用户从工具提示中选择一些文本。部分代码来自 Antonimo。

```
$(document).on("click", ".tooltip", function() {
    $(this).tooltip(
        { 
            items: ".tooltip", 
            content: function(){
                return $(this).data('description');
            }, 
            close: function( event, ui ) {
                var me = this;
                ui.tooltip.hover(
                    function () {
                        $(this).stop(true).fadeTo(400, 1); 
                    },
                    function () {
                        $(this).fadeOut("400", function(){
                            $(this).remove();
                        });
                    }
                );
                ui.tooltip.on("remove", function(){
                    $(me).tooltip("destroy");
                });
          },
        }
    );
    $(this).tooltip("open");
}); 
```

HTML

```
<a href="#" class="tooltip" data-description="That&apos;s what this widget is">Test</a> 
```

示例：http: [//jsfiddle.net/A44EB/123/](http://jsfiddle.net/A44EB/123/)

# php - Symfony：我应该将业务逻辑放在模型的什么位置？

> ID：13286515
> 
> 赞同：1
> 
> 时间：2012-11-08T09:51:28.233
> 
> 标签：php, doctrine, symfony-1.4

假设我有这个模型

*   用户类.php
*   userTable.class.php

我想创建一种方法来更新用户

行动

```
class userActions extends sfActions {

public function executeUpdateUser(sfWebRequest $request) {
     $user_id = $request->getParameter('id');
     // here i want to call function to update the user 
     // updateUser($id);
} 
```

我应该把这个功能放在哪里`updateUser($id)`？

ON `user.class.php`--> 然后这样称呼它`User::updateUser($id);`

OR ON `userTable.class.php`--> 然后这样称呼它`Doctrine_Core::getTable('User')->updateUser($id);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:00:13.967

我会这样做：

```
$user = Doctrine_Core::getTable('User')->find($user_id);
$user->updateWithData($data); // ::update() is already an existing method
$user->save(); 
```

或者

```
$user = Doctrine_Core::getTable('User')->find($user_id);
$user->updateWithDataAndSave($data); 
```

# java - 动态生成变量名

> ID：13286516
> 
> 赞同：0
> 
> 时间：2012-11-08T09:51:40.477
> 
> 标签：java, php, c++, c, perl

我只是想知道当前编程语言中是否有任何方法可以动态生成像数组这样的变量名。

```
for(i=1;i<10;i++)
{
    int a <concatenation operator> i = <some logic on variable i>;
    printf("the value generated in the logic is %d",a <concatenation operator> i);
} 
```

我知道有一个类似的数组概念，但我只想知道这是否存在于任何编程语言中。

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:52:52.177

eval 也许，但我不会使用它。

为了补充 Jon Skeet 的评论，做这种事情可能是可能的，但出于多种原因是不明智的。

# iphone - 刷新 Iphone Core Plot 中的散点图

> ID：13286517
> 
> 赞同：3
> 
> 时间：2012-11-08T09:51:47.863
> 
> 标签：iphone, objective-c, xcode, core-plot

我已经搜索了这个问题，但没有找到任何对我有帮助的答案。我试过 [graph reloadData] 但没有帮助我。我正在使用此[链接](http://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part-2)为我的项目制作散点图

但我只制作了 1 个散点图而不是 3 个。我在设置中有 3 个选项 1）今天 2）月 3）今天它显示今天的图表仅在一个月内显示 1 个图，在一年中显示 30 个图和 365 个图。但在我的情况下，它只是第一次工作，但是当我回去并将选项从今天更改为一年时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:12:42.067

对不起大家。这不是关于刷新图表。我有一个日期数组，它是静态的。所以它在今天或月份选择日期时更改一次。然后当我再次选择选项时，该静态数组的先前值不是新的。

# python - IDL和Python中样条插值的区别

> ID：13286525
> 
> 赞同：1
> 
> 时间：2012-11-08T09:52:09.807
> 
> 标签：python, interpolation, spline, idl-programming-language

我写了 IDL 代码：

```
zz= [  0,  5, 10, 15, 30, 50, 90, 100,  500]
uz= [ 20, 20, 20, 30, 60, 90, 30, -200, -200]*(-1.)
zp= findgen(120)*500+500
up= spline((zz-10.),uz,(zp/1000.0))
print, up 
```

IDL 给了我从**-20 到 500的***up*数组值

 **.和我在 Python 中做的一样

```
import numpy as npy
zz = npy.array([  0,  5, 10, 15, 30, 50, 90, 100,  500])
uz = npy.array([ 20, 20, 20, 30, 60, 90, 30, -200, -200])*(-1.)
zp = npy.arange(0,120)*500+500
from scipy.interpolate import interp1d
cubic_interp_u = interp1d(zz-10., uz, kind='cubic')
up = cubic_interp_u(zp/1000)
print up 
```

它给了我*大约***-20 到 -160**的值。任何的想法？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:21:24.420

其实我看不出有什么问题。我在`UnivariateSpline`这里使用而不是`interp1d`and `cubic_interp_u`，但据我所知，基础例程基本相同：

```
import numpy as npy
import pyplot as pl
from scipy.interpolate import UnivariateSpline
zz = npy.array([  0,  5, 10, 15, 30, 50, 90, 100,  500])
uz = npy.array([ 20, 20, 20, 30, 60, 90, 30, -200, -200])*(-1.)
zp = npy.arange(0,120)*500+500
pl.plot(zz, uz, 'ro')
pl.plot(zp/100, UnivariateSpline(zz, uz, s=1, k=3)(zp/100), 'k-.')
pl.plot(zp/1000, UnivariateSpline(zz, uz, s=1, k=3)(zp/1000), 'b-') 
```

我看到的唯一问题是您通过使用`zp/1000`. 使用`zp/100`，我得到了该范围之外的所有值`-160, -20`，与蓝线 ( ) 相比，您还可以在图中从点划线看到这些值`zp/1000`：

![在此处输入图像描述](../Images/1ea6e81d6764a4f35f66e219840ba01a.png)

看起来 scipy 做得很好。

顺便说一句，如果您想（样条）拟合这些离群值，您可能需要考虑在 log-log 空间中工作，或者粗略地规范化您的数据（log-log space 之类的）。如果值处于同一数量级，则大多数拟合问题效果最佳。**

# c - C多线程openssl ssl3_connect核心

> ID：13286526
> 
> 赞同：2
> 
> 时间：2012-11-08T09:52:15.313
> 
> 标签：c, multithreading, openssl, core

我在使用带 openssl 的 Multithread 时遇到问题。

环境： Linux centOS232 2.6.32-279.el6.x86_64 #1 SMP Fri Jun 22 12:19:21 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

错误是段错误！和 clent 出口。

核心堆栈：

> 0 asn1_d2i_ex_primitive (pval=0x640280, in=0x7ffff6ffe140, inlen=9, it=0x7ffff77f0840, tag=-1, aclass=0, opt=0 '\000', ctx=0x7ffff6ffebd0) at tasn_dec.c:770
> 
> 1 0x00007ffff75413f2 in ASN1_item_ex_d2i (pval=0x640280, in=0x7ffff6ffe140, len=9, it=0x7ffff77f0840, tag=-1, aclass=, opt=0 '\000', ctx=0x7ffff6ffebd0) at tasn_dec.c:233
> 
> 2 0x00007ffff7541ba9 in asn1_template_noexp_d2i (val=0x640280, in=0x7ffff6ffe290, len=9, tt=0x7ffff77f6a40, opt=, ctx=0x7ffff6ffebd0) at tasn_dec.c:746
> 
> 3 0x00007ffff7541eac in asn1_template_ex_d2i (val=0x640280, in=0x7ffff6ffe290, inlen=, tt=0x7ffff77f6a40, opt=, ctx=0x7ffff6ffebd0) at tasn_dec.c:607
> 
> 4 0x00007ffff75415ca in ASN1_item_ex_d2i (pval=0x7ffff6ffe328, in=0x7ffff6ffe330, len=9, it=0x7ffff77f01e0, tag=, aclass=, opt=0 '\000', ctx=0x7ffff6ffebd0) at tasn_dec.c:448
> 
> 5 0x00007ffff7541c8f in asn1_template_noexp_d2i (val=0x7ffff6ffe518, in=0x7ffff6ffe520, len=11, tt=0x7ffff77f6aa0, opt=, ctx=0x7ffff6ffebd0) at tasn_dec.c:706
> 
> 6 0x00007ffff7541eac in asn1_template_ex_d2i (val=0x7ffff6ffe518, in=0x7ffff6ffe520, inlen=, tt=0x7ffff77f6aa0, opt=, ctx=0x7ffff6ffebd0) at tasn_dec.c:607
> 
> 7 0x00007ffff75414c5 in ASN1_item_ex_d2i (pval=0x7ffff6ffe518, in=0x7ffff6ffe520, len=98, it=0x7ffff77f0220, tag=-1, aclass=, opt=0 '\000', ctx=0x7ffff6ffebd0) at tasn_dec.c:
> 
> 8 0x00007ffff7541c8f in asn1_template_noexp_d2i (val=0x7ffff6ffe6e0, in=0x7ffff6ffe6e8, len=98, tt=0x7ffff77f6ae0, opt=, ctx=0x7ffff6ffebd0) at tasn_dec.c:706
> 
> 9 0x00007ffff7541eac in asn1_template_ex_d2i (val=0x7ffff6ffe6e0, in=0x7ffff6ffe6e8, inlen=, tt=0x7ffff77f6ae0, opt=, ctx=0x7ffff6ffebd0) at tasn_dec.c:607
> 
> 10 0x00007ffff75414c5 in ASN1_item_ex_d2i (pval=0x7ffff6ffe6e0, in=0x7ffff6ffe6e8, len=410, it=0x7ffff77f0260, tag=-1, aclass=, opt=0 '\000', ctx=0x7ffff6ffebd10) 在 tasn_dec.
> 
> 11 0x00007ffff753a705 in x509_name_ex_d2i (val=0x63d6f8, in=0x7ffff6ffe830, len=, it=, tag=, aclass=, opt=0 '\000', ctx=0x7ffff6ffebd0) 在 x_name.c:186
> 
> 12 0x00007ffff7541083 in ASN1_item_ex_d2i (pval=0x63d6f8, in=0x7ffff6ffe830, len=410, it=0x7ffff77f6a00, tag=-1, aclass=, opt=0 '\000', ctx=0x7ffff6ffebd0) at tasn_dec.c:
> 
> 13 0x00007ffff7541ba9 in asn1_template_noexp_d2i (val=0x63d6f8, in=0x7ffff6ffe980, len=410, tt=0x7ffff77f6b98, opt=, ctx=0x7ffff6ffebd0) at tasn_dec.c:746
> 
> 14 0x00007ffff7541eac in asn1_template_ex_d2i (val=0x63d6f8, in=0x7ffff6ffe980, inlen=, tt=0x7ffff77f6b98, opt=, ctx=0x7ffff6ffebd0) at tasn_dec.c:607
> 
> 15 0x00007ffff75415ca in ASN1_item_ex_d2i (pval=0x63d620, in=0x7ffff6ffea20, len=410, it=0x7ffff77f02e0, tag=, aclass=, opt=0 '\000', ctx=0x7ffff6ffebd0) at tasn_dec.c:448
> 
> 16 0x00007ffff7541ba9 in asn1_template_noexp_d2i (val=0x63d620, in=0x7ffff6ffeb70, len=587, tt=0x7ffff77f6cc0, opt=, ctx=0x7ffff6ffebd0) at tasn_dec.c:746
> 
> 17 0x00007ffff7541eac in asn1_template_ex_d2i (val=0x63d620, in=0x7ffff6ffeb70, inlen=, tt=0x7ffff77f6cc0, opt=, ctx=0x7ffff6ffebd0) at tasn_dec.c:607
> 
> 18 0x00007ffff75415ca in ASN1_item_ex_d2i (pval=0x7ffff6ffebf8, in=0x7ffff6ffec20, len=587, it=0x7ffff77f0320, tag=, aclass=, opt=0 '\000', ctx=0x7ffff6ffebd0) at tasn_dec.c8:4
> 
> 19 0x00007ffff7542024 in ASN1_item_d2i (pval=0x7ffff6ffebf8, in=, len=, it=) at tasn_dec.c:136
> 
> 20 0x00007ffff7830c3c 在 ssl3_get_server_certificate (s=0x62a870) 在 s3_clnt.c:1125
> 
> 21 0x00007ffff7832332 in ssl3_connect (s=0x62a870) at s3_clnt.c:334
> 
> 22 0x00007ffff783a3bc 在 ssl23_get_server_hello (s=0x62a870) 在 s23_clnt.c:743
> 
> 23 ssl23_connect (s=0x62a870) 在 s23_clnt.c:226
> 
> 24 0x00007ffff7ab85fa in ZCY_SSL_create (ssl=0x626940, ssl_ctx=, bio_ctx=0x626948) at ssl_cliapi.c:267
> 
> 25 0x00007ffff701bf12 在 Cli_Login (gid=0x7ffff6fff7a0, err=0x7ffff6fff390) at capi.c:1146
> 
> 26 0x00007ffff7a89568 在登录 (gid=0x7ffff6fff7a0, err=0x7ffff6fff390) 在 tmcapi.c:137
> 
> 27 0x00000000004022cb 在 ssl_get_send.c:337 的 send_msg (argv=0x605ed0)
> 
> 28 0x0000003efd407851 in start_thread () from /lib64/libpthread.so.0
> 
> 29 0x0000003efd0e811d 来自 /lib64/libc.so.6 的克隆 ()

线程支持：

我已经在 ssl 代码中设置了回调，例如 "crypto/threads/mttest.c" 中的示例。

问题：但是在另一台机器上的代码相同2[Linux ph-suse 2.6.27.19-5-default #1 SMP 2009-02-28 04:40:21 +0100 x86_64 x86_64 x86_64 GNU/Linux]是成功的。我使用了'ldd' 检查机器 2 中的库是否不同，但它们是相同的。

道歉，我是英语泳池。

谁能帮我？谢谢你！

# android - 启动 NFC 功能时，我的应用程序不断崩溃

> ID：13286530
> 
> 赞同：0
> 
> 时间：2012-11-08T09:52:34.490
> 
> 标签：android, mobile, nfc

我正在开发一个应用程序，该应用程序将从标签中获取输入并将值插入特定变量（仍在处理中）。但是，当我在手机附近放置一个预设的 NFC 标签时，应用程序会从标签中获取信息。相反，它会启动应用程序，然后立即崩溃。

`公共类NFCAdding扩展活动{

```
private static final String TAG = "MealPlan";
private EditText foodName, protValue, carbValue, fatValue, energyValue;
private Button addBreak, addLunch, addDinner;
NfcAdapter mNfcAdapter;

private boolean mResumed = false;

PendingIntent mNfcPendingIntent;
IntentFilter[] mNdefExchangeFilters;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.nfc_add);

    foodName = (EditText)findViewById(R.id.nfc_food_name);
    protValue = (EditText)findViewById(R.id.nfc_prot_value);
    carbValue = (EditText)findViewById(R.id.nfc_carb_value);
    fatValue = (EditText)findViewById(R.id.nfc_fat_value);
    energyValue = (EditText)findViewById(R.id.nfc_energy_value);
    addBreak = (Button)findViewById(R.id.nfc_add_breakfast);
    addLunch = (Button)findViewById(R.id.nfc_add_lunch);
    addDinner = (Button)findViewById(R.id.nfc_add_dinner);

    mNfcPendingIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);

    // Intent filters for reading a note from a tag or exchanging over p2p.
    IntentFilter ndefDetected = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
    try {
        ndefDetected.addDataType("text/plain");
    } catch (MalformedMimeTypeException e) { }
    mNdefExchangeFilters = new IntentFilter[] { ndefDetected };

    addBreak.setOnClickListener(new Button.OnClickListener(){
         public void onClick(View v) {
             Intent intent = new Intent();
     intent.setClass(getApplicationContext(), AddItem.class);
     startActivity(intent);
     finish();                                               
     } 
```

});

```
 addLunch.setOnClickListener(new Button.OnClickListener(){
     public void onClick(View v) {
            Intent intent = new Intent();
    intent.setClass(getApplicationContext(), LunchAdd.class);
    startActivity(intent);
    finish();                                               
    } 
```

});

```
 addDinner.setOnClickListener(new Button.OnClickListener(){
     public void onClick(View v) {
            Intent intent = new Intent();
    intent.setClass(getApplicationContext(), DinnerAdd.class);
    startActivity(intent);
    finish();                                               
    } 
```

});

```
}

 @Override
    protected void onResume() {
        super.onResume();
        mResumed = true;
        // Sticky notes received from Android
        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {
            NdefMessage[] messages = getNdefMessages(getIntent());
            byte[] payload = messages[0].getRecords()[0].getPayload();
            setNoteBody(new String(payload));
            setIntent(new Intent()); // Consume this intent.
        }
        enableNdefExchangeMode();
    }

 private void setNoteBody(String body) {
        Editable text = foodName.getText();
        text.clear();
        text.append(body);
    }

 private void enableNdefExchangeMode() {
        mNfcAdapter.enableForegroundDispatch(this, mNfcPendingIntent, mNdefExchangeFilters, null);
    }

    private void disableNdefExchangeMode() {
        mNfcAdapter.disableForegroundDispatch(this);
    }

NdefMessage[] getNdefMessages(Intent intent) {
    // Parse the intent
    NdefMessage[] msgs = null;
    String action = intent.getAction();
    if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(action)
            || NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)) {
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
        if (rawMsgs != null) {
            msgs = new NdefMessage[rawMsgs.length];
            for (int i = 0; i < rawMsgs.length; i++) {
                msgs[i] = (NdefMessage) rawMsgs[i];
            }
        } else {
            // Unknown tag type
            byte[] empty = new byte[] {};
            NdefRecord record = new NdefRecord(NdefRecord.TNF_UNKNOWN, empty, empty, empty);
            NdefMessage msg = new NdefMessage(new NdefRecord[] {
                record
            });
            msgs = new NdefMessage[] {
                msg
            };
        }
    } else {
        Log.d(TAG, "Unknown intent.");
        finish();
    }
    return msgs;
} 
```

}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:20:42.807

根据您的日志，以下之一不是 EditText，而是 TextView：

```
foodName = (EditText)findViewById(R.id.nfc_food_name);
protValue = (EditText)findViewById(R.id.nfc_prot_value);
carbValue = (EditText)findViewById(R.id.nfc_carb_value);
fatValue = (EditText)findViewById(R.id.nfc_fat_value);
energyValue = (EditText)findViewById(R.id.nfc_energy_value); 
```

检查带有 ids 的元素`nfc_food_name, nfc_prot_value, nfc_carb_value, nfc_fat_value and nfc_energy_value`。看起来其中一个或多个是 TextView 而不是 EditText..

# r - 使用ggplot绘图时如何抑制警告

> ID：13286531
> 
> 赞同：61
> 
> 时间：2012-11-08T09:52:41.537
> 
> 标签：r, ggplot2

将缺失值传递给 ggplot 时，它非常友好，并警告我们它们存在。这在交互式会话中是可以接受的，但是在编写报告时，输出不会被警告弄得一团糟，尤其是在警告很多的情况下。下面的示例缺少一个标签，这会产生警告。

```
library(ggplot2)
library(reshape2)
mydf <- data.frame(
  species = sample(c("A", "B"), 100, replace = TRUE), 
  lvl = factor(sample(1:3, 100, replace = TRUE))
)
labs <- melt(with(mydf, table(species, lvl)))
names(labs) <- c("species", "lvl", "value")
labs[3, "value"] <- NA
ggplot(mydf, aes(x = species)) + 
   stat_bin() + 
   geom_text(data = labs, aes(x = species, y = value, label = value, vjust = -0.5)) +
   facet_wrap(~ lvl) 
```

![在此处输入图像描述](../Images/f8d32d2211153e010fdfd603d69b1821.png)

如果我们环绕`suppressWarnings`最后一个表达式，我们会得到有多少警告的摘要。为了争论，假设这是不可接受的（但确实非常诚实和正确）。打印 ggplot2 对象时如何（完全）抑制警告？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-08T09:57:24.677

您需要`suppressWarnings()`围绕`print()`调用，而不是创建`ggplot()`对象：

```
R> suppressWarnings(print(
+ ggplot(mydf, aes(x = species)) + 
+    stat_bin() + 
+    geom_text(data = labs, aes(x = species, y = value, 
+                               label = value, vjust = -0.5)) +
+    facet_wrap(~ lvl)))
R> 
```

将最终绘图分配给对象然后`print()`.

```
plt <- ggplot(mydf, aes(x = species)) + 
   stat_bin() + 
   geom_text(data = labs, aes(x = species, y = value,
                              label = value, vjust = -0.5)) +
   facet_wrap(~ lvl)

R> suppressWarnings(print(plt))
R> 
```

该行为的原因是警告仅在实际绘制绘图时生成，而不是在创建表示绘图的对象时生成。R 将在交互使用期间自动打印，所以虽然

```
R> suppressWarnings(plt)
Warning message:
Removed 1 rows containing missing values (geom_text). 
```

不起作用，因为实际上，您正在调用`print(suppressWarnings(plt))`，而

```
R> suppressWarnings(print(plt))
R> 
```

确实有效，因为可以捕获呼叫`suppressWarnings()`引起的警告。`print()`

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-11-08T12:52:22.920

更有针对性的逐个情节方法是添加`na.rm=TRUE`到您的情节调用中。例如：

```
 ggplot(mydf, aes(x = species)) + 
      stat_bin() + 
      geom_text(data = labs, aes(x = species, y = value, 
                                 label = value, vjust = -0.5), na.rm=TRUE) +
      facet_wrap(~ lvl) 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-11-08T09:58:07.357

在您的问题中，您提到了报告编写，因此设置全局警告级别可能会更好：

```
options(warn=-1) 
```

默认为：

```
options(warn=0) 
```

# html - 如何删除选择框的背景

> ID：13286534
> 
> 赞同：3
> 
> 时间：2012-11-08T09:53:01.427
> 
> 标签：html, css

我必须删除选择框的背景，我使用过这样的代码

```
<select style="background:none;border:none">
<option>A</option>
<option>B</option>
<option>C</option>
<option>D</option>
</select> 
```

但是在输出箭头出现了。我怎样才能隐藏那个箭头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:54:28.647

添加`-webkit-appearance:none`

```
<select style="background:none;border:none; -webkit-appearance:none"> 
```

或添加 div 并给出最大宽度。

```
<div style="width:80px; overflow:hidden">
<select style="background:none;border:none; width:97px">
<option>A</option>
<option>B</option>
<option>C</option>
<option>D</option>
</select>
</div> 
```

**[更新了演示](http://tinkerbin.com/eUpP5caB)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:58:14.780

使选择宽度超过 100% 并应用溢出：隐藏

```
select {
    overflow:hidden;
    width: 120%;
} 
```

看到这个链接，第二个答案似乎更像你所追求的！

[如何从 Firefox 中的选择元素中删除箭头](https://stackoverflow.com/questions/5912791/how-to-remove-the-arrow-from-a-select-tag-in-firefox)

# css - 最大化-最小化窗口时CSS表单在屏幕上的位置

> ID：13286540
> 
> 赞同：0
> 
> 时间：2012-11-08T09:53:22.377
> 
> 标签：css, forms

请帮助CSS！我正在使用 CSS 使我的注册表单看起来不错，但后来我发现当我最大化或最小化资源管理器的窗口（我的页面与资源管理器窗口的中心对齐）。因此，即当我的窗口大小最大化时，我的背景图像发生了变化，但表单仍保持在第一个位置。任何想法如何解决这一问题？我的 HTML 代码是：

```
<div "class="homepageTable">
<form action="#" method="post">
  <input type="text" size="25" name="first_name" placeholder="first name"><br/>
  <input type="text" size="25" name="last_name" placeholder="last name"><br/>
  <input type="text" size="25" name="email" placeholder="email"><br/>
  <input type="text" size="25" name="retype_email" placeholder="re-type email"><br/>
  <input type="text" size="25" name="password" placeholder="password"><br/>
  <input type="text" size="25" name="retype_password2" placeholder="re-type password"><br/>
  <input type="submit" name="submit" value="sing up!">
</form>
</div> 
```

当窗口最小化或最大化时，为了让这个表单与其他页面元素一起移动，CSS应该是什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:58:18.647

> 为了让这个表单与其他页面元素一起移动，css应该是什么的任何想法

不，除非你向我们展示其他元素。但这里是如何使表格居中：

```
.homepageTable{margin: 0 auto;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:58:48.260

我们看不到您的完整代码，因此我们只能猜测您页面的其余部分是什么样的。

您可能需要以相同的方式对齐背景和表单：将背景图像居中对齐，或将其所在的任何元素对齐到中心，如果可能的话。

或者，将背景放置在与表单相同的容器元素中，对齐，并在窗口更改时让它们一起移动。

# tomcat - 监控 Tomcat Webapp

> ID：13286541
> 
> 赞同：1
> 
> 时间：2012-11-08T09:53:25.393
> 
> 标签：tomcat, amazon-ec2, amazon-web-services

我有一个在 Amazon EC2 上运行的 Tomcat webapp。我预计将来会大量使用 webapp，因此正在尝试了解如何监控 webapp 并确保它运行良好。

Amazon EC2 显示每个 EC2 实例的以下*Cloudwatch 指标*

1.  平均 CPU 利用率
2.  平均磁盘读取
3.  Sum Disk Read Ops (Count)
4.  平均磁盘写入
5.  Sum Disk Writes Ops (Count)
6.  最大网络插件
7.  最大网络输出
8.  总和状态（任何）
9.  求和状态实例 10.求和状态系统

我还找到了一个库[Metrics](https://github.com/codahale/metrics)，可用于监控 JVM，但我无法理解我应该监控什么以及为什么要监控的完整想法？

**我的问题**

当服务器上的用户负载突然增加时，我应该监控什么以及为什么要确保我的 Tomcat Webapp 正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:53:18.247

您在*Cloudwatch Metrics*中描述的是**硬件**监控。

监控Tomcat就是我们所说的**软件**监控。这涉及（但不限于）：

*   用户会话数
*   线程数
*   各种内存统计信息（heap used/max、permgen used/max、old gen、eden size 等）
*   垃圾收集（区域之间的促销、频率、完全停止世界事件等）
*   正常运行时间
*   您特定于应用程序的监视器（例如，如果您需要访问数据库，则能够进行简单的选择，例如`SELECT * FROM DUAL`成本可以忽略不计）

为什么所有这些事情？它们中的每一个都有助于更好地了解您的应用程序瓶颈和可能的中断或响应缓慢的时间。这些指标中的每一个都可以解释为什么您的应用突然停止响应或响应时间激增。

我还建议您查看[JMX](http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html)，它是用于监控的标准接口。您可能希望通过 JMX 公开所有这些监视器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:01:07.040

我会推荐[VisualVM](http://visualvm.java.net/)。这是一种使用 Web 前端测量运行 Tomcat 的 JVM 的方法（您可以通过这种方式分析多个 Tomcat 实例）。以及查看哪些课程承受的压力最大的能力。

当然，正如您所提到的，您仍然可以获得 Amazon 为您的实例提供的所有分析。

您应该寻找的是任何使用量特别大并试图优化这些过程的类。VisualVM 将为您提供有关此的统计信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:51:34.517

我们使用[Nagios](http://www.nagios.org/) + [JMXProxy](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Using_the_JMX_Proxy_Servlet)来检测 JVM 本身以及 Tomcat 公开的大量信息。

[您可以在 Tomcat 的监控常见问题解答](http://wiki.apache.org/tomcat/FAQ/Monitoring)中阅读有关要监控的内容的一些建议。

如果您阅读文档和常见问题解答，您会发现令人惊奇的内容。

# android - 在 onActivityForResult 中没有得到正确的结果代码

> ID：13286544
> 
> 赞同：2
> 
> 时间：2012-11-08T09:53:42.493
> 
> 标签：android, android-intent

在我的应用程序中有一个共享功能，我们使用带有 ACTION_SEND 的 Intent.createChooser() 来执行 startActivityForResult。当我们选择 gmail 应用程序进行共享时，将启动撰写活动，如果我们按下返回或发送邮件，我们会从该屏幕获得相同的响应代码。因此，我的应用程序无法识别用户是发送了邮件还是刚刚从那里回来。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:14:58.677

您无法确定用户是否实际使用 发送电子邮件`StartActivityForResult`，只能确定用户转到电子邮件应用程序然后从它返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:16:50.593

处理 ACTION_SEND 的应用程序必须实现一个 resultCode 才能返回

在您的情况下，我认为电子邮件客户端不会实现 resultCode 作为回报

只需在调试中检查 resultCode 即可确定

# asp.net - 如何处理这个会话条件？

> ID：13286549
> 
> 赞同：0
> 
> 时间：2012-11-08T09:53:51.150
> 
> 标签：asp.net

登录后，用户被重定向到默认页面。我在页面加载上应用断点。断点工作。单击注销超链接时，它将重定向到会话清除页面。注销后，当我输入页面名称时，它将重定向到登录页面。我也在每个页面和母版页中检查会话。当我放置默认页面时，它重定向到默认页面。我看不到断点的执行。为什么会发生这种情况？

# java - Mac OS JDialog 不会暂停执行，即使是模态的

> ID：13286553
> 
> 赞同：3
> 
> 时间：2012-11-08T09:54:04.193
> 
> 标签：java, swing, user-interface, jframe, jdialog

!!!!!我发现了大问题，我正在覆盖已经预定义的 isModal 方法，因此它不会等待用户输入！现在打自己的脸:)!!!!!!

我在学校做一个关于 GUI 的项目。目前的主要话题是4层架构师的东西，这里我们应该使用一个JDialog来输入一个人的信息，从而在程序的JFrame中更新一个JList。

我的问题是，当我使用我的添加人员按钮时，JDialog 设置为可见和模式，因此它应该等待更新 JFrame 上的 JList，在用户按下 JDialog 上的添加按钮之后。

但是，但是，它不起作用，我和我的很多老师谈过它，他们无法弄清楚为什么它不起作用。

额外的信息是我在 Mac 上编程，但如果程序在 Windows 机器上运行，它就可以工作。

我尝试在网上搜索特定问题，但在 mac 上找不到与 JDialog java 问题相关的任何内容。

你们有谁有过这种经历吗？

框架：

```
package gui;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.ListSelectionModel;
import javax.swing.event.ListSelectionEvent;

import model.Person;
import service.Service;

public class MainFrame extends JFrame {

private JList<Person> jlList;
private JScrollPane jsrPane;
private JButton addButton, updateButton;
private Controller controller;
private MyDialog myDialog;

public MainFrame(){
    controller = new Controller();

    this.setTitle("Marks lille MainFrame.");
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setSize(800, 600);
    this.setLocation(300, 200);
    this.setLayout(null);

    jlList = new JList<>();
    jlList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

    jsrPane = new JScrollPane(jlList);
    jsrPane.setBounds(10, 10, 400, 500);
    this.add(jsrPane);

    addButton = new JButton("Add Person");
    addButton.setBounds(420, 110, 100, 25);
    addButton.addActionListener(controller);
    this.add(addButton);

    updateButton = new JButton("Update");
    updateButton.setBounds(420, 150, 100, 25);
    updateButton.addActionListener(controller);
    this.add(updateButton);
}

private class Controller implements ActionListener{
    public void actionPerformed(ActionEvent ae){
        if(ae.getSource().equals(addButton)){
            myDialog = new MyDialog("Add Person");
            myDialog.setVisible(true);
            System.out.println("Test");
            if(myDialog.isModal()){
                jlList.setListData(Service.getPersons().toArray(new Person[0]));
            }
            System.out.println("Test");
        }else if(ae.getSource().equals(updateButton)){
            Person ps = jlList.getSelectedValue();
            myDialog = new MyDialog("Update Person");
            myDialog.setVisible(true);
            if(myDialog.isModal()){
                Service.removePerson(ps);
                jlList.setListData(Service.getPersons().toArray(new Person[0]));
            }
        }
    }
}
} 
```

对话框：

```
package gui;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;

import service.Service;

public class MyDialog extends JDialog {

private JButton okButton, cancelButton;
private JLabel lblName, lblTitle;
private JTextField txfName, txfTitle;
private JCheckBox ckbRetire;
private Controller controller;
private boolean modalResult;

public MyDialog(String title){
    controller = new Controller();

    this.setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);
    this.setTitle(title);
    setModalityType(JDialog.DEFAULT_MODALITY_TYPE);
    this.setLayout(null);
    this.setSize(300, 300);
    this.setLocation(300, 200);

    okButton = new JButton("Add");
    okButton.setBounds(100, 250, 80, 25);
    okButton.addActionListener(controller);
    this.add(okButton);

    cancelButton = new JButton("Cancel");
    cancelButton.setBounds(180, 250, 80, 25);
    cancelButton.addActionListener(controller);
    this.add(cancelButton);

    lblName = new JLabel("Name:");
    lblName.setBounds(10, 10, 100, 25);
    this.add(lblName);

    txfName = new JTextField();
    txfName.setBounds(5, 35, 200, 25);
    this.add(txfName);

    lblTitle = new JLabel("Title:");
    lblTitle.setBounds(10, 70, 100, 25);
    this.add(lblTitle);

    txfTitle = new JTextField();
    txfTitle.setBounds(5, 95, 200, 25);
    this.add(txfTitle);

    ckbRetire = new JCheckBox("retired");
    ckbRetire.setBounds(10, 150, 100, 25);
    this.add(ckbRetire);
}

private class Controller implements ActionListener{
    public void actionPerformed(ActionEvent ae){
        if(ae.getSource().equals(okButton)){
            String name = txfName.getText().trim();
            String title = txfTitle.getText().trim();
            boolean retired = ckbRetire.isSelected();

            Service.createPerson(name, title, retired);
            modalResult = true;
            MyDialog.this.setVisible(false);

        }else if(ae.getSource().equals(cancelButton)){
            modalResult = false;
            MyDialog.this.setVisible(false);
        }
    }
}

public boolean isModal(){
    return modalResult;
}

} 
```

主要方法：

```
package gui;

public class MainFrameApp {

/**
 * @param args
 */
public static void main(String[] args) {
    MainFrame frame = new MainFrame();

    frame.setVisible(true);

}

} 
```

如果您需要 Service、Dao 和 Model 类，请告诉我。

编辑#1：在 Java build 1.7.0_09-b05 上运行

编辑#2：尝试将超级设置为 JDialog，并将 JFrame 设置为超级。尝试了 setModal，即使它已经过时了。在调用JDialog时尝试设置模态，仍然没有成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:10:30.590

我发现了一个大问题，我正在覆盖已经预定义的 isModal 方法，因此它不会等待用户输入！现在打自己的脸:)

# ios - iOS 上的 processing.org，本机

> ID：13286555
> 
> 赞同：1
> 
> 时间：2012-11-08T09:54:08.777
> 
> 标签：ios, cocos2d-iphone, processing, ogre3d, irrlicht

由于我测试的动画在 iPhone 的 webview 上的[processingjs](http://processingjs.org/)非常慢，我正在寻找与 iOS 的[http://wiki.processing.org/w/Android](http://wiki.processing.org/w/Android)等效的东西，也就是说，通过 OpenGL 进行硬件加速——也许是像 cocos2d-x 这样的游戏库，但我找不到能理解 Processing.org 脚本的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:09:28.247

我在 iphone 中使用[http://procoding.audiocommander.de](http://procoding.audiocommander.de)获得了不错的处理性能，你试过了吗？我也找到了这个 [http://www.luckybite.com/iprocessing/](http://www.luckybite.com/iprocessing/) ，但是没有很好的文档记录并且似乎很长时间没有更新，所以我没有尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:38:07.537

我建议看看[Davide Della Casa 的 P5Nitro](https://github.com/davidedc/P5Nitro)项目。我已经看到了在 P5 Nitro 和 iProcessing 上运行的基于弹簧的示例，并且 P5Nitro 版本更加流畅。

另外，我认为您应该尝试[OpenFrameworks](http://www.openframeworks.cc/download/)，这是一个受处理（已经支持的熟悉功能的负载）启发的 c++ 项目，它也可以针对 iOS。

总之，尝试 P5Nitro 并查看它是否可以为您完成工作，如果没有，请查看 openFrameworks 并尝试移植/更改您的处理代码。有一个很好的处理用户可用的小[指南。](http://www.openframeworks.cc/tutorials/firstSteps/002_openFrameworks_for_processing_users.html)

# php - PHP Oauth API 通过 Hotmail 帐户登录

> ID：13286563
> 
> 赞同：2
> 
> 时间：2012-11-08T09:54:29.700
> 
> 标签：php, mysql, login, hotmail

像 facebook、twitter、yahoo 帐户一样，我们如何通过 MSN/Hotmail 帐户登录而不是注册一个新帐户？获取用户名并代表此名称保存数据，使用`php/mysql`？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T07:11:36.897

您可以使用以下网址下载用 PHP/Mysql 编写的代码：

[http://www.phpclasses.org/browse/file/42421.html](http://www.phpclasses.org/browse/file/42421.html)

# ipad - YouTube 嵌入 iPad：通过 Javascript API 启动时永远缓冲

> ID：13286569
> 
> 赞同：9
> 
> 时间：2012-11-08T09:54:48.770
> 
> 标签：ipad, youtube, youtube-api

我在让 YouTube 嵌入工作时遇到一些问题。

我正在使用 YouTube API 加载视频。在加载的视频之上，我有一个自定义控件`<div>`（透明），只有一个播放按钮（一个`<img>`）。这样做是为了将默认的 YouTube 播放器隐藏在一个播放按钮后面，该按钮与网站上的其余设计一起使用。

覆盖整个加载的`<div>`iFrame，因此播放器本身不可点击 - 我使用点击事件`<div>`来启动视频：

```
// Inside onYouTubePlayerAPIReady():
var player = new YT.Player(playerId, {
  height: height,
  width: '100%',
  videoId: videoId,
  playerVars: {
    html5: '1',
    controls: '0',
    rel: '0',
    showinfo: '0',
    modestbranding: '1',
    theme: 'light',
    color: 'white',
    wmode: 'transparent',
    suggestedQuality: "large"
  }
});

$(".youtube-player-controls").bind("click", function(e){
  if (!player || !player.getPlayerState) return false;
  if (player.getPlayerState() == YT.PlayerState.PLAYING) player.pauseVideo();
  else player.playVideo();
  return false;
}); 
```

在 iPhone 上运行良好，但在 iPad（似乎也是 Android）上，视频切换到视频的第一帧，但随后停在缓冲状态（通过 检查`player.getPlayerState()`）。

我尝试开始播放`player.loadVideoById()`也不起作用的视频（同样的错误）。

如果我删除了覆盖控件`<div>`，从而允许用户实际点击视频，它就可以正常工作。

关于如何使用 Javascript API 播放视频的任何建议？

**编辑：**

我稍微更改了嵌入代码，即添加了[Force HTML5 youtube video](https://stackoverflow.com/questions/5845484/force-html5-youtube-video)`html5=1`中所述的代码。这将嵌入式 iFrame 的内容更改为使用 HTML5 播放器，但并没有解决问题。

我试着看看它是否可以按照[http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html)中的描述工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:02:32.043

Apple 不允许通过 iOS 上的脚本加载标签（以防止在移动网络上使用不必要的带宽）。多个版本的 Android 显示相同的行为。

您必须先让用户通过单击视频本身来启动视频 - 之后您将能够像在桌面设备上一样通过 API 控制视频。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-20T00:13:23.460

目前我们只是在发送 player.playVideo(); 之前进行检查。功能。这并不理想，但在我们从 Google 获得更好的 API 级别修复之前它会起作用。

在嵌入脚本的顶部，您设置您的 var：

```
var isiPad = navigator.userAgent.match(/iPad/i) != null; 
```

然后在您使用的点击功能中：

```
if (!isiPad) {
player.playVideo();
} 
```

# oracle - 如何从不同的表和视图中删除/插入

> ID：13286570
> 
> 赞同：2
> 
> 时间：2012-11-08T09:54:53.560
> 
> 标签：oracle, plsql, oracle10g, execute-immediate

我有一个棘手的问题。在 Oracle 10 中有成对的视图和表，这样的事情会一遍又一遍地完成：

```
proc_log('DELETE 1');
DELETE FROM table_1;
proc_log('INSERT 1');
INSERT INTO table_1 SELECT * FROM view_1;
proc_log('FINISH 1'); 
```

与视图/表 2 和 3 以及 4 和 5... 和 36 相同。

我想做这样的事情：

```
PROCEDURE proc_import(p_table VARCHAR2) IS
BEGIN
    proc_log('DELETE ' || p_table);
    EXECUTE IMMEDIATE 'DELETE FROM table_' || p_table;
    proc_log('INSERT ' || p_table);
    EXECUTE IMMEDIATE 'INSERT INTO table_' || p_table || ' SELECT * FROM view_' || p_table;
    proc_log('FINISH || p_table);
    COMMIT;
END; 
```

然后为所有 36 对调用该函数。

毫不奇怪，这些东西比硬编码的要慢 50%。

我的问题：有没有人知道如何让它更快。或者更好的是，我怎样才能让这些东西与众不同但同样优雅？

* * *

**编辑**

整个东西是这样构建的：

> ```
> CREATE OR REPLACE PACKAGE PKG_IMPORT IS
>   PROCEDURE proc_log IS BEGIN [funky not important stuff] END;
>       
>   PROCEDURE proc_import IS
>   BEGIN
>       proc_import_table('1', TRUE);
>       proc_import_table('2');
>       proc_import_table('3');
>       proc_import_table('4', TRUE);
>       proc_import_table('5');
>       ...
>       proc_import_table('36');
>   END;
> 
>   PROCEDURE proc_import(p_table VARCHAR2, p_whole BOOLEAN DEFAULT FALSE) IS
>   BEGIN
>     proc_log('DELETE ' || p_table);
>     IF p_whole THEN
>       EXECUTE IMMEDIATE 'DELETE FROM table_' || p_table;
>     ELSE
>       EXECUTE IMMEDIATE 'DELETE FROM table_' || p_table || ' WHERE business_logic_applies';
>     END IF;
>     proc_log('INSERT ' || p_table);
>     EXECUTE IMMEDIATE 'INSERT INTO table_' || p_table || ' SELECT * FROM view_' || p_table;
>     proc_log('FINISH || p_table);
>     COMMIT;
>   END;
>  END PKG_IMPORT; 
> ```

过程 proc_import 由作业每晚调用一次。所有 proc_import_table 调用都是硬编码的原因是某些表需要额外的导入信息。

恐怕我不能在这里复制/粘贴原始代码，因为我不知道我是否可以这样做。希望这可以帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:38:40.607

首先，如果您对要删除的行没有任何条件，则可以截断表。

```
TRUNCATE TABLE table_1; 
```

`TRUNCATE`是一个 ddl 操作，它不会物理删除行，它只是操纵高水位线，使操作非常快。**但也要记住**，它不能回滚，因为它是 DDL。

另一方面，您可以执行直接路径插入，而不是常规插入。试试这个：

```
INSERT /*+ append */ into table_1 select * from view_1; 
```

这将导致Oracle将数据直接写入高水位线之上，从而使操作更快。如果您的*桌子*是`PARALLEL`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:47:29.327

原始代码将执行得更快，因为 Oracle 能够预编译查询，而使用“立即执行”则无法做到这一点。

您的新代码可能看起来更简洁，但实际上更难阅读。至少，与其传递表格编号，不如提供完整的表格名称，否则任何其他查看您的代码的人都必须弄清楚这些数字的含义。

也就是说，我想我更愿意看到 36 个删除语句和 36 个插入语句 - 远不那么神秘，而且更整洁。如果它有助于更​​短的 proc，你可以将所有这些语句放入它们自己的 proc 中。

# c# - 来自 HRESULT 的异常：查询 Windows 更新时出现 0x80240007

> ID：13286577
> 
> 赞同：1
> 
> 时间：2012-11-08T09:55:23.160
> 
> 标签：c#, windows, windows-update

我在尝试获取已安装的 Windows 更新时收到错误“HRESULT 异常：0x80240007”。我的代码在 Windows 7 中运行良好，但在 Windows XP 中无法运行。我在行中收到错误`var history = updateSearcher.QueryHistory(0, count);`

这是我的代码片段：

```
 var updateSession = new UpdateSession();
        var updateSearcher = updateSession.CreateUpdateSearcher();
        var count = updateSearcher.GetTotalHistoryCount();
        var history = updateSearcher.QueryHistory(0, count); 
```

我需要对代码进行哪些更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T10:08:28.030

0x80240007 是 wuerror.h 中定义的错误代码 WU_E_INVALIDINDEX：

```
// MessageId: WU_E_INVALIDINDEX
//
// MessageText:
//
// The index to a collection was invalid.
//
#define WU_E_INVALIDINDEX                _HRESULT_TYPEDEF_(0x80240007L) 
```

调用`UpdateSession.CreateUpdateSearcher.QueryHistory`归结为[IUpdateSearcher::QueryHistory](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386532%28v=vs.85%29.aspx)及其文档说：

> 备注
> 如果 startIndex 参数小于 0（零）或 Count 参数小于或等于 0（零），则此方法返回 WU_E_INVALIDINDEX。

`count`很可能不小于 0 但也许`==0`

你需要类似的东西

```
var count = updateSearcher.GetTotalHistoryCount();
var history = count > 0 ? updateSearcher.QueryHistory(0, count) : null; 
```

（或更复杂的案件处理......）

# vb.net - vb.net 更新数据

> ID：13286579
> 
> 赞同：0
> 
> 时间：2012-11-08T09:55:37.287
> 
> 标签：vb.net

我创建了一个连接到数据库的程序

问题就像我将名称“San Fransio”更改为“Steve”当我转到下一页并返回我刚刚编辑的页面时，它没有更新，名称仍然显示“San Fransio”但是当我关闭时它并重新运行程序，它只更新为“史蒂夫”。
有什么方法可以在不关闭数据的情况下更新和刷新数据？
我需要添加一些刷新数据代码或什么？

```
Public Class Form2  
    Dim cnn As New OleDb.OleDbConnection  
    Dim sql As String = "SELECT * FROM sr"  
    Dim ds As New DataSet  
    Dim da As OleDb.OleDbDataAdapter  
    Dim i As Integer  
    Dim len As Integer  
    Dim ind As Integer = 0  
    Dim arrNumbers() As String  
    Dim no As Integer  

    Private Sub btnSrch_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSrch.Click
        Dim sql1 = InputBox("Service Number :", "Search", " ")
        Dim no As Integer
        Dim found As Boolean = False

        For no = 0 To len - 1
            If ds.Tables("db").Rows(no).Item(0).ToString.ToLower = sql1.ToString.ToLower Then
                i = (no)
                nav()
                found = True

            End If

        Next
        If (found = False) Then
            MsgBox("Search Not Found")
        End If
    End Sub

    Private Sub Form2_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        cnn = New OleDb.OleDbConnection
        cnn.ConnectionString = "Provider=Microsoft.Jet.Oledb.4.0; Data Source=C:\Users\Lim\Documents\db.mdb"
        da = New OleDb.OleDbDataAdapter(sql, cnn)
        da.Fill(ds, "db")
        len = da.Fill(ds, "db")

        i = len - 1
        nav()

    End Sub
    Private Sub nav()
        txtsr.Text = ds.Tables("db").Rows(i).Item(0)
        txtname.Text = ds.Tables("db").Rows(i).Item(1)
        txttel.Text = ds.Tables("db").Rows(i).Item(2)
        txtdate.Text = ds.Tables("db").Rows(i).Item(3)
        txtprob.Text = ds.Tables("db").Rows(i).Item(4)
        txtmodel.Text = ds.Tables("db").Rows(i).Item(5)
        txtacc.Text = ds.Tables("db").Rows(i).Item(6)
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        If (i = 0) Then
            MsgBox("This is the first page")
        Else
            i = i - 1
            nav()

        End If
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        If (i = len - 1) Then
            MsgBox("This is the last page")
        Else
            i = i + 1
            nav()
        End If
    End Sub

    Private Sub btn2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn2.Click
        Dim cnn As New OleDb.OleDbConnection
        Dim cmd As New OleDb.OleDbCommand
        cnn.ConnectionString = "Provider=Microsoft.Jet.Oledb.4.0; Data Source=C:\Users\Lim\Documents\db.mdb"
        cnn.Open()

        Dim sqlstr = "UPDATE sr set cname='" & txtname.Text & "',tel='" & txttel.Text & "',cdate='" & txtdate.Text & "',prob='" & txtprob.Text & "',model='" & txtacc.Text & "'WHERE SR=" & txtsr.Text & ""

        cmd = New OleDb.OleDbCommand(sqlstr, cnn)
        cmd.ExecuteNonQuery()

        cnn.Close()

    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:56:58.797

上面的代码有很多问题。

*   打开连接时不会关闭连接
*   您不为更新查询使用参数
*   您不使用 OleDbDataAdapter.UpdateCommand 更新您的表

关闭连接

```
 Using cnn = New OleDb.OleDbConnection
       .....
    End Using 
```

使用参数

```
 Dim sqlstr = "UPDATE sr set cname=?,tel=?,cdate=?,prob=?,model=? WHERE SR=?"
 da.UpdateCommand = new OleDbCommand(sqlstr, cnn)
 da.UpdateCommand.AddWithValue("@cName", txtname.Text)
 da.UpdateCommand.AddWithValue("@tel", txttel.Text)

 ' and so on but remember to follow exactly the order in which they are expected 
```

# android - 错误：资源不是公开的。（在“主题”处，值为“@android:style/Theme.ExpandedMenu”）

> ID：13286582
> 
> 赞同：2
> 
> 时间：2012-11-08T09:55:50.407
> 
> 标签：android

当我尝试应用`ExpandedMenu`主题时，它显示此错误

```
error: Error: Resource is not public. (at 'theme' with value '@android:style/Theme.ExpandedMenu'). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:14:24.200

您不能使用系统未明确定义为公共的所有主题（或任何其他资源）。检查它是否公开的一种方法是尝试在 Eclipse 编辑器中自动完成其名称。如果它没有显示它是私人的。

一种解决方法是将其所有属性复制到您自己的定义中并使用它而不是系统私有属性。有时这是不可能的，因为它对其他私有定义有太多依赖。

# ruby-on-rails - 为什么yaml文件上传不起作用？我认为权限问题

> ID：13286583
> 
> 赞同：0
> 
> 时间：2012-11-08T09:55:52.177
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, file-upload, yaml

我想在 config 目录中加载用户选择的 yaml 文件。我有一个看法：

```
<h1>File Upload</h1>
<p>Upload your Yaml Configuration File</p>

<p style="color: green"><%= flash[:notice] %></p>

<%= form_for :uploadFile, :html => { :multipart => true } do |f| %>

  <label for="upload_file">Select File:</label>
  <%= f.file_field :upload %>
  <%= f.submit "Upload", :disable_with => 'Uploading...' %>
<% end %> 
```

我有一个控制器：

```
class UploadController < ApplicationController
def uploadFile
    uploaded_io = params[:uploadFile][:upload]
    File.open(Rails.root.join('public', uploaded_io.original_filename), 'w') do |file|
        file.write(uploaded_io.read)
    end

    flash.now[:notice]="File has been uploaded successfully"

end
end 
```

当用户选择文件并按“上传”时，没有任何反应，并且文件不在配置文件夹中。我能做些什么？也许我应该使用“import yaml”并以某种方式加载它，如何？

日志这样说：

```
Started POST "/upload/uploadfile" for 127.0.0.1 at 2012-11-08 10:51:46 +0100
Processing by UploadController#uploadfile as HTML
  Parameters: {"utf8"=>"âœ“",  "authenticity_token"=>"5FKgZJG4gKPCHXe8OqhFVZL0bu2X9zLR3sxd4ELBulA=", "uploadFile"=>{"upload"=>#<ActionDispatch::Http::UploadedFile:0x3b03ad8 @original_filename="newCases.yml", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"uploadFile[upload]\"; filename=\"newCases.yml\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<File:C:/Users/Simo/AppData/Local/Temp/RackMultipart20121108-2664-tb7lxr>>}, "commit"=>"Upload"}
  [1m[35mSetting Load (0.0ms)[0m  SELECT "settings".* FROM "settings" WHERE "settings"."id" = ? LIMIT 1  [["id", 1]]
  Rendered upload/uploadfile.html.erb within layouts/upload (0.0ms)
Completed 200 OK in 0ms (Views: 0.0ms | ActiveRecord: 0.0ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:10:40.383

```
File.open(Rails.root.join('config', uploaded_io.original_filename), 'wb+') do |file|
    file.write(uploaded_io.read)
end 
```

试试这个

# delphi - 如何比较定义/实现顺序完全不同的两个大型 Delphi 单元？

> ID：13286585
> 
> 赞同：2
> 
> 时间：2012-11-08T09:55:58.103
> 
> 标签：delphi, comparison, compare

我有两个从同一个 WSDL 导入生成的 Delphi 单元，一个由 XE2 生成，一个由 XE3 生成。我想检查是否有任何显着差异，但是两个文件中定义/实现的顺序都不同。没办法我将能够编辑这些 25000+ 行文件以匹配....

有谁知道我如何进行比较？很可能这些文件是完全相同的，但我对任何微小的差异都很感兴趣......

XE2 文件的示例部分：

```
FreeBusyResponseType = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[GblCplx] }
GetUserAvailabilityResponseType = class;      { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
SetUserOofSettingsResponse2 = class;          { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
FieldURIOrConstantType = class;               { "http://schemas.microsoft.com/exchange/services/2006/types"[GblCplx] }
MessageXml           = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Cplx] }
BaseRequestType      = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[GblCplx] }
GetFolderType        = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
BaseMoveCopyItemType = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[GblCplx] }
CopyItemType         = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
MoveItemType         = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
CreateAttachmentType = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
BaseMoveCopyFolderType = class;               { "http://schemas.microsoft.com/exchange/services/2006/messages"[GblCplx] }
MoveFolderType       = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
CopyFolderType       = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
GetItemType          = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
SetUserOofSettingsRequest2 = class;           { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
GetUserOofSettingsRequest2 = class;           { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
BaseDelegateType     = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[GblCplx] }
GetRoomListsType     = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
GetRoomsType         = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }

[snip]

implementation
  uses SysUtils;

destructor FreeBusyResponseType.Destroy;
begin
  SysUtils.FreeAndNil(FResponseMessage);
  SysUtils.FreeAndNil(FFreeBusyView);
  inherited Destroy;
end;

procedure FreeBusyResponseType.SetResponseMessage(Index: Integer; const AResponseMessageType: ResponseMessageType);
begin
  FResponseMessage := AResponseMessageType;
  FResponseMessage_Specified := True;
end; 
```

XE3 文件的示例部分：

```
GetUserAvailabilityResponseType = class;      { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
FreeBusyResponseType = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[GblCplx] }
FieldURIOrConstantType = class;               { "http://schemas.microsoft.com/exchange/services/2006/types"[GblCplx] }
SetUserOofSettingsResponse2 = class;          { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
MessageXml           = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Cplx] }
BaseRequestType      = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[GblCplx] }
BaseMoveCopyFolderType = class;               { "http://schemas.microsoft.com/exchange/services/2006/messages"[GblCplx] }
MoveFolderType       = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
CopyFolderType       = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
CreateAttachmentType = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
GetItemType          = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
BaseMoveCopyItemType = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[GblCplx] }
MoveItemType         = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
CopyItemType         = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
GetRoomsType         = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
SetUserOofSettingsRequest2 = class;           { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
BaseDelegateType     = class;                 { "http://schemas.microsoft.com/exchange/services/2006/messages"[GblCplx] }
DeleteUserConfigurationType = class;          { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
CreateUserConfigurationType = class;          { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }
UpdateUserConfigurationType = class;          { "http://schemas.microsoft.com/exchange/services/2006/messages"[Lit][GblCplx] }

[snip]

implementation
  uses SysUtils;

constructor GetUserAvailabilityResponseType.Create;
begin
  inherited Create;
  FSerializationOptions := [xoLiteralParam];
end;

destructor GetUserAvailabilityResponseType.Destroy;
var
  I: Integer;
begin
  for I := 0 to System.Length(FFreeBusyResponseArray)-1 do
    SysUtils.FreeAndNil(FFreeBusyResponseArray[I]);
  System.SetLength(FFreeBusyResponseArray, 0);
  SysUtils.FreeAndNil(FSuggestionsResponse);
  inherited Destroy;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:04:13.277

[ModelMaker](http://www.modelmakertools.com/)在类/方法实现级别上有一个比较工具。它不受源文件中它们的顺序的影响。

# asp.net - 密码字段在实时系统上更改为文本

> ID：13286588
> 
> 赞同：1
> 
> 时间：2012-11-08T09:56:07.740
> 
> 标签：asp.net, passwords

这个问题很简单——我们有一个“更改密码”屏幕，在它上面，密码字段在发布时被转换为文本，所以当你输入它时，它显示的是普通文本，而不是你通常会看到的点得到。当我调试它时，问题不会发生在我的本地机器上，它只会在它被部署到外部服务器时发生。其他人也尝试过，发现同样的事情。我们不知道为什么会发生这种情况，而且我在网上找不到任何解决方案。

例如，其中一个文本框是在标记中定义的（我去掉了开头的 < 以阻止它在这里尝试将其用作 HTML）：

```
<asp:TextBox ID="uxCurrentPW" type="password" runat="server" CssClass="fullWidthTextBox spaced" autocomplete="off" /> 
```

没有服务器端或 javascript 代码影响它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:59:24.140

> 为密码输入设置 TextBox Web 服务器控件： 将 TextBox 控件的 TextMode 属性设置为 Password。

以下：

```
<asp:TextBox ID="uxCurrentPW" TextMode="Password" runat="server" CssClass="fullWidthTextBox spaced" autocomplete="off" /> 
```

（**[参考](http://msdn.microsoft.com/en-us/library/zsfss7t0%28v=vs.80%29.aspx)**）

# android - 删除元素时Android LinkedList滞后

> ID：13286591
> 
> 赞同：0
> 
> 时间：2012-11-08T09:56:24.680
> 
> 标签：android, arrays, list, lag

我真的需要这个帮助。我正在玩一款游戏，遇到了一个问题，每次从我的对象列表中删除一个元素时它都会滞后。我已经搜索了解决方案，并发现了使用迭代器来减少滞后，但它仍然滞后。我同时使用了 ArrayList 和 LinkedList，但它们都得到了相同的结果。

这是我用于列表的代码示例：

初始化：

```
private LinkedList<Background> bg = new LinkedList<Background>(); 
```

使成为：

```
for (Iterator<Background> iterator = bg.iterator(); iterator.hasNext();) {
            Background back = iterator.next();
            if (back.getX()-(-width-1) > 0) {
                if ((back.getX() < width) || (back.getX()+width > 0)) {
                    back.draw(canvas);
                } else {
                    iterator.remove();
                }
            }
        } 
```

这是对象类中的绘图函数，其中 back.draw(canvas); 来自：

```
 public void draw(Canvas canvas) {
    // where to draw the sprite
    Rect destRect = new Rect(getX(), getY(), getX() + spriteWidth, getY() + spriteHeight);
    canvas.drawBitmap(bitmap, sourceRect, destRect, null);
    //canvas.drawBitmap(bitmap, 20, 150, null);
    //Paint paint = new Paint();
    //paint.setARGB(50, 0, 255, 0);
    //canvas.drawRect(20 + (currentFrame * destRect.width()), 150, 20 + (currentFrame * destRect.width()) + destRect.width(), 150 + destRect.height(),  paint);
} 
```

也许在处理 FPS 的 MainThread 中必须更改某些内容？或者有没有其他解决方案？我听说过集合，但似乎找不到任何好的例子来尝试一下。

需要指出的是，我使用的是 Canvas，而不是 OpenGL。还有一点需要指出的是，上述数组中的每个元素都有一个 800x480 的图像大小。我试图降低图像的质量，但这并没有太大的区别。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:11:52.863

它可能与您在绘图中所做的计算量有关。我确信它与您使用的收藏无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:20:51.803

鉴于您发布的代码，我会说 a`LinkedList`和 an`Iterator`删除项目肯定是最快的。但是您还必须考虑到列表的其他用途。

# ocean - 自定义模拟器规则在 Petrel 2012 上消失

> ID：13286599
> 
> 赞同：0
> 
> 时间：2012-11-08T09:56:33.770
> 
> 标签：ocean

我有一个自定义模拟器规则。在 Petrel 2011 上一切正常，但在 Petrel 2012 上发生以下情况。

如果我在没有项目的情况下打开 Petrel，则该规则会列在 Make Development Strategy 过程中的添加规则下。

如果我随后打开一个包含旧版本自定义规则（在不再存在的不同程序集中定义）的项目，则该规则不会列在“制定开发策略”过程中的“添加规则”下。打开项目确实会报告有关缺少旧程序集的异常。

为什么会发生这种情况，有人有想法吗？

尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:42:54.947

问题是打开现有项目时没有选择我们的新自定义模拟器，因此没有列出规则。

由于此问题不会影响 Petrel 2011，因此 Petrel 2011 似乎显示所有规则，而 Petrel 2012 过滤器仅显示所选模拟器的有效规则。

# iphone - 应用程序启动后显示特定的视图控制器

> ID：13286603
> 
> 赞同：0
> 
> 时间：2012-11-08T09:56:51.337
> 
> 标签：iphone, objective-c, ios, cocoa, uistoryboard

我想向您展示一个视图控制器，该视图控制器通过来自作为导航控制器的 rootviewcontroller 的第一个视图的序列连接。我尝试了以下代码。但这对我不起作用：`[_window.rootViewController.navigationController performSegueWithIdentifier:@"showLoginScreen" sender:self];`

我做错了什么：这是我的故事板连接的屏幕截图：

[点击这里](http://imageshack.us/f/820/bildschirmfoto20121108u.png/)

我想在启动后显示 MainViewController。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:08:41.473

您是否尝试过以下方式：

```
MainViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"ShowLoginScreen"];

[self.navigationController pushViewController:controller animated:YES]; 
```

您需要通过情节提要获取对视图控制器的引用。

# c++ - 有没有办法获取“当前函数”的返回类型

> ID：13286605
> 
> 赞同：17
> 
> 时间：2012-11-08T09:56:59.233
> 
> 标签：c++, c++11, type-inference

我想编写一个模板，该模板将在其中实例化它的函数的返回类型作为参数。

例如，假设我有一个`Result`模板类：

```
template<type T>
class Result {
    T _result_value;
    T& operator=( T that );
    ~Result( );
} 
```

这门课会有几个专业。在析构函数中我想记录返回类型，在`operator=`赋值中我想检查并断言错误值。

理想情况下，我希望能够有这样的定义：

```
#define RESULT Result< /* decltype magic for type of current function */ > 
```

所以我可以使用它：

```
HFILE MyOpenFile( ... ) {
    RESULT result;
} 
```

...这将被推断为`Result<HFILE>`. 这是一个简化的例子：写`RESULT`代替`Result<HFILE>`不是什么大不了的事，但还有其他场景，当前函数的返回类型不容易获得。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T10:41:22.430

不，C++ 中没有任何内容涉及“当前函数”。最接近的是`__func__`，但那是一个字符串文字。因此，没有什么可以传递给`decltype`.

不是你需要它，使用`auto`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T10:40:46.147

从函数内部是不可能的，因为内存中没有专门的对象来表示它，可以引用它来推断类型。可以通过`decltype(*this)`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T10:42:26.830

我能想到的最便携的方法是使用`decltype`：

```
#define RESULT(func, ...) Result<decltype(func(__VA_ARGS__))>

int main(int argc, char **argv) {
    RESULT(main, argc, argv) result; // same as `Result<int> result;`
} 
```

但这会迫使您将函数名称和它需要的每个参数传递给`RESULT`宏。我不认为这是可以避免的，因为没有可移植的（通常甚至不是特定于编译器的）方法来获取当前函数和/或传递的参数的标识符。由于过多的歧义，争论变得很重要。

这是一个 SSCCE：http: [//ideone.com/cPTjjF](http://ideone.com/cPTjjF)

# networking - TCP序列号的标准

> ID：13286606
> 
> 赞同：0
> 
> 时间：2012-11-08T09:57:01.623
> 
> 标签：networking, numbers, sequence

为什么 TCP 中的序列号使用数据包大小。为什么它不能是数据包号。如果以 100 字节发送 seq 号为 10 的数据包，则下一个数据包的 seq 号将为 111。为什么不能像 10 ,11,12 等 除了数据包丢失之外的任何特定原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:49:00.480

它是一个字节数，因为它基本上是一个字节流协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:16:47.317

这比简单的算术和按顺序选择数字要复杂得多。通常出于安全原因，ISN（初始序列号）是使用高级伪随机机制生成的。

还有像 SYN cookie 这样的机制，例如在 ISN 中编码 TCP 会话参数。因此，除了使用“随机”数之外，还有很多不同的算法可以选择合适的序列号。

更重要的是，每个操作系统都有自己的生成 ISN 的方法。如上所述，所有这些都是出于安全原因，不允许潜在的攻击者猜测 TCP 数据包的序列号。

# excel - 锁定/解锁单元格 VBA

> ID：13286613
> 
> 赞同：1
> 
> 时间：2012-11-08T09:57:14.253
> 
> 标签：excel, vba, locking

我一直在寻找一种代码来锁定一张表中的所有单元格，但是我发现了这个代码：

```
Worksheets("SW").Range("D2").Locked = False
Worksheets("SW").Protect UserInterfaceOnly:=True 
```

在我保存它并再次关闭/打开文件之前，它确实工作得很好，然后运行了我拥有的任何宏。

我想这是因为在那张工作表中我有不同的宏，而且我还有在单元格更改时运行的宏：

```
Private Sub Worksheet_Change(ByVal Target As Range) 
```

你知道如何让它工作吗？

还有一件事，这本工作簿将被共享，所以我不知道这会影响宏。

对不起，也许我太模棱两可了。

是的，我想阻止其他人更改单元格的值。

我希望只有一个单元格可以更改，以便所有其他单元格都随着宏而更改。

再次感谢你的帮助

PS：是的 Ahmad Al-Mutawa，我希望即使在项目被保存、关闭和打开之后也无法更改工作表。

如果您需要更多信息，请告诉我，我会尝试更具体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:34:11.983

除了您尝试实现的锁定解锁代码之外，您的文件是否有任何宏执行其他操作？

如果是这样，我建议你在 vba 中有一个代码。否则，您可以简单地锁定工作表，以防止用户在没有代码的情况下更改某些内容或任何时间。

你认为这对你来说可能比 [code][1] 更好吗？

[ [http://office.microsoft.com/en-us/excel-help/lock-or-unlock-specific-areas-of-a-protected-worksheet-HA010096837.aspx](http://office.microsoft.com/en-us/excel-help/lock-or-unlock-specific-areas-of-a-protected-worksheet-HA010096837.aspx) ][1]

出于好奇：您是否有不知道在哪里以及如何触发此代码段的问题？

**编辑后的代码：-** 您的评论不清楚，但我相信您想使用宏。假设您要保护/锁定或取消保护/解锁 Sheet1，请尝试以下操作。:-

在此工作簿的工作簿打开事件中添加此代码：-

```
Private Sub Workbook_Open()
  Dim shtSheet As Worksheet
  Dim strPassword As String

    strPassword = "stack"
    Set shtSheet = Worksheets("Sheet1")
    shtSheet.Protect Password:=strPassword, UserInterfaceOnly:=True
End Sub 
```

接下来在您的模块中添加以下内容。并在您完成运行宏后调用它。

```
 Sub ProtectSheet()
  Dim shtSheet As Worksheet
  Dim strPassword As String

     strPassword = "stack"
     Set shtSheet = Worksheets("Sheet1")
     shtSheet.Protect strPassword
 End Sub 
```

# php - GET/POST 在 php 中转换为 UTF-8

> ID：13286614
> 
> 赞同：2
> 
> 时间：2012-11-08T09:57:13.443
> 
> 标签：php, post, utf-8, character-encoding, get

我正在阅读很多关于 UTF-8 和编码的内容，但我迷路了，

我只是想在 php 中解析一个带有`GET`/的字符串`POST`，如果它包含 UTF-8 来转换它的其他内容（在我的场合是希腊语）

所以我的错误代码是：

```
$title = $_GET['title'];
//and sometimes I use this:
$info = htmlspecialchars(trim($_GET['info']));

echo $title, $info; 
```

它与给定的一些希腊字符相呼应`Î»ÎµÎ¾Î· Î»Î­Î¾Î·1`（当然这是错误的）。

谢谢

**更新：** 只是想用我的解决方案更新，以防有人读到这个。问题只是缺少一行：

```
mysql_set_charset('utf8', $con); 
```

当然`$con`处理`mysql_connect`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:24:17.690

您需要*知道*字符串的编码是什么。将任何东西从未知编码转换为 UTF-8 根本是不可能的。您需要通过元信息传达某个字符串是如何编码并适当处理的。如何做到这一点取决于你到底想做什么。最好在任何时候都不要进行编码转换，而是将所有内容从前到后保持在 UTF-8 中。

我建议你调查一下：

*   [每个程序员绝对，肯定需要了解编码和字符集以使用文本](http://kunststube.net/encoding/)
*   [在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)

# excel - Excel 在“.xls”中发现了不可读的内容。同时导出水晶报表到excel

> ID：13286615
> 
> 赞同：2
> 
> 时间：2012-11-08T09:57:17.160
> 
> 标签：excel, crystal-reports, export

我正在将数据从 Crystal 报告导出到 PDF，它工作正常并显示所有记录，但是当我将其导出到 Excel 文件中时导出成功并且当我在 Excel 中打开它时给出错误消息 **- 文件错误：数据可能已经丢失的**

当我单击“确定”按钮“在 Excel 文件中，标题对列不可见”

这里水晶报表中的标题来自数据库。

任何帮助将不胜感激。

拉杰什

# sql - 来自 CDbCriteria 的 Yii SQL 查询

> ID：13286619
> 
> 赞同：3
> 
> 时间：2012-11-08T09:57:23.083
> 
> 标签：sql, activerecord, yii

我有一个具有复杂关系的模型，它使用 CDbCriteria 过滤要在 CGridView 中查看的数据。我需要能够将过滤后的结果也导出为 CSV 文件。为此，使用 ActiveRecords 太耗费资源（20000 多条记录），因此使用 CDbCommand 获得相同的结果并导出它们会快得多。

问题是，我找不到一种方法来获取 ActiveRecords 从 CDbCriteria 构建的原始 sql 查询。有谁知道一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T16:51:29.010

关于构建查询的[Yii 文档](http://www.yiiframework.com/doc/guide/1.1/en/database.query-builder)非常好。

# sql - 如果不回滚，ROLLBACK TRANSACTION 是否意味着提交

> ID：13286621
> 
> 赞同：1
> 
> 时间：2012-11-08T09:57:28.743
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我的`SQL-Server`学习曲线是从前到后的，几年后我正在努力`TRANSACTION`有效地使用代码。

如果`COMMIT TRANSACTION`没有明确说明，那么`ROLLBACK TRANSACTION`如果前面的代码中没有发生错误，那么事务是否会被提交？问题与如下结构有关：

```
USE MyDataBase;
GO
     BEGIN TRANSACTION;
        --complex query X here  
     ROLLBACK TRANSACTION; PRINT N'Rolled back the transaction.';
GO 
```

...我认为在您不希望在*前面*`ROLLBACK TRANSACTION`的脚本中发生错误时对数据库进行更改的情况下使用- 在上面这将是。如果我想在上面明确说明，那么它应该放在哪里？*`X``COMMIT TRANSACTION`*

 *为了让自己更加困惑，我有以下内容 - 为什么它会回滚两次？创建 ? 时是否发生错误`ROLLBACK`？

```
USE WHAnalysis;
GO
    BEGIN TRANSACTION;

        IF @@TRANCOUNT = 1
            SELECT @@TRANCOUNT
            --do a complex query here

    ROLLBACK TRANSACTION; PRINT N'Rolled back the transaction.';
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:02:33.103

不会。事务在提交之前将保持打开和未提交状态，这可能最终会导致数据库阻塞。

如果事务是嵌套的，回滚将回滚到外部事务的开头，而不是内部事务 - 请参阅[http://msdn.microsoft.com/en-us/library/ms181299.aspx](http://msdn.microsoft.com/en-us/library/ms181299.aspx)

我会考虑一个类似的结构

```
 begin try
      begin tran
      -- do query
      commit tran
 end try
 begin catch
      if @@trancount>0 
      begin
          rollback
      end
      -- handle error here
 end catch 
```*

# iphone - 无法从字符串中获取日期\

> ID：13286629
> 
> 赞同：1
> 
> 时间：2012-11-08T09:57:56.907
> 
> 标签：iphone, ios

我只是使用下面的代码将字符串转换为日期。代码运行完美，但有时它不会返回日期。任何想法 ？？

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy/MM/dd HH:mm:ss"];
NSDate *myDate  = [[NSDate alloc] init];
myDate = [dateFormatter dateFromString:strTime]; 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:00:32.420

当您想将字符串转换为日期时，只需使用您的字符串格式的波纹管方法

```
-(NSDate *)convertStringToDate:(NSString *) date {
     NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
    NSDate *nowDate = [[[NSDate alloc] init] autorelease];
    [formatter setDateFormat:@"yyyy/MM/dd HH:mm:ss"]; // use formate of date which you got in string date..
    // NSLog(@"date============================>>>>>>>>>>>>>>> : %@", date);
     date = [date stringByReplacingOccurrencesOfString:@"+0000" withString:@""];
    nowDate = [formatter dateFromString:date];
    return nowDate;
} 
```

# c++ - 在 iOS 项目中添加 C++ 库将无法正确编译

> ID：13286630
> 
> 赞同：0
> 
> 时间：2012-11-08T09:57:57.387
> 
> 标签：c++, ios, xcode

在我的 iOS 项目中，我需要使用包含一些头文件 (.h) 文件和 .a 库文件的 C++ 库（我没有任何实际的源代码）。

在我的 Obj-c 代码中，我导入了我需要的 .h 标头，但是 Xcode 似乎并不理解它必须将标头解释为 c++，实际上它返回了一个无穷无尽的问题列表，包括包含“未找到”错误喜欢这些：

```
#include <string>
#include <vector> 
```

和其他 c++ 语言特定的语法。不幸的是，将 .h 扩展名更改为 .hpp 并不能解决问题，而且在 Xcode 文件检查器中将文件类型设置为“C++ Header”也不能解决问题。

有什么建议吗？我需要在某处设置任何标志以手动指示在库文件上使用 g++ 吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:03:18.780

您只能在 Objective-C++ 文件中导入 C++ 头文件，将 objc 文件扩展名更改为`.mm`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T11:12:08.353

将您的 ObjectiveC 文件扩展名从 .m 更改为 .mm 清理项目然后就可以了

快乐编码

# java - java变量未初始化

> ID：13286631
> 
> 赞同：-3
> 
> 时间：2012-11-08T09:58:04.253
> 
> 标签：java

嗨，我对以下程序有疑问，因为它给了我一个错误说，`variable gradePoints might not have been initialized`我在这里缺少什么..？另外我该如何改进代码，以便它接受字母 a+ 作为 A+ 并且任何其他输入都会引发错误？谢谢！！

```
 import java.lang.*;
import java.io.*;
import java.util.*;
import java.util.Scanner;

  public class Program
 {
 static final Map<String, Double> gradeToPointMap =
        new LinkedHashMap<String, Double>() {{
            put("A+", 4.0);
            put("A", 4.0);
            put("A-", 3.7);
            put("B+", 3.3);
            put("B", 3.0);
            put("B-", 2.7);
            put("C+", 2.3);
            put("C", 2.0);
            put("C-", 1.7);
            put("F", 0.0);
        }};

public static void main(String[] args) {
    Scanner keyboard = new Scanner(System.in);

    System.out.println("Enter A Letter Grade: ");
    String letterGrade = keyboard.next();

    getGradePoint(letterGrade);

}
     public double getGradePoint(String letterGrade)
     {
         Double gradePoints = gradeToPointMap.get(letterGrade.toUpperCase());
    if (gradePoints == null)
        System.out.println("Unknown letter grade " + letterGrade);
    else
        System.out.println("Your grade point(GPA) is " + gradePoints);
     }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:59:15.777

`gradePoints`在开头初始化，如：

`double gradePoints = 0.0;`

或将此添加到您的最后一个`else`块

`gradePoints = 0.0;`

也`letterGrade.equals("A+")`用于比较值，因为`==`运算符将比较引用而不是字符串内容。

更新：

问题是当用户输入错误信息时，您的信息`gradePoints`不会被初始化，因为它在其他`if-else`块中被初始化。所以当你最后尝试使用时`println`，编译器会抱怨`variable gradePoints might not have been initialized`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:00:26.617

成员变量（类变量）在对象创建期间被隐式初始化为默认值。这不会发生在方法的局部变量上，因为对象不知道/看到局部变量。因此，如果要使用局部变量，则必须显式初始化它。

声明局部变量时，分配一个默认值。

```
double gradePoints; 
```

一定是：

```
double gradePoints = 0.0; 
```

* * *

在进行字符串比较（按值）时，必须使用`String.equals()`or`String.equalsIgnoreCase()`方法。`==`用于对象比较而不是值比较。

例如：`if( letterGrade == "F")`必须写为`if( letterGrade.equals("F"))`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:00:58.227

为了你的兴趣，我会这样写。

```
static final Map<String, Double> gradeToPointMap =
        new LinkedHashMap<String, Double>() {{
            put("A+", 4.0);
            put("A", 4.0);
            put("A-", 3.67);
            put("B+", 3.33);
            put("B", 3.0);
            put("B-", 2.67);
            put("C+", 2.33);
            put("C", 2.0);
            put("F", 0.0);
        }};

public static void main(String... args) {
    Scanner keyboard = new Scanner(System.in);

    System.out.println("Enter a letter grade as one of " + gradeToPointMap.keySet());
    String letterGrade = keyboard.next();

    Double gradePoints = gradeToPointMap.get(letterGrade.toUpperCase());
    if (gradePoints == null)
        System.out.println("Unknown letter grade " + letterGrade);
    else
        System.out.println("Your grade point(GPA) is " + gradePoints);
} 
```

* * *

> 它给了我一个错误，说变量gradePoints 可能没有被初始化，我在这里缺少什么..？

```
{
    System.out.println("Error, you did not enter the correct information");
    // gradePoints is not set to anything here
} 
```

> 另外我该如何改进代码，以便它接受字母 a+ 作为 A+ 并且任何其他输入都会引发错误？

不要使用`==`for String 而不是你想使用`.equals()`

除了你想要的情况`.equalsIgnoreCase`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:59:36.860

改变

```
double gradePoints; 
```

到

```
double gradePoints = 0.0; 
```

对于接受 a+、A+ 等，请使用以下命令：

```
if (letterGrade.equalsIgnoreCase("A+") { ... } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T10:00:03.763

启动gradePoints

```
double gradePoints = 0.0 ; 
```

也使用等于检查字符串

```
if( letterGrade.equals("A+"))
  {
      gradePoints = 4.0;
  } 
```

为他人做同样的事情。

要检查有效的字符串，请喜欢

```
 String grades = "A+A-B+B-C+C-D"

  letterGrade = keyboard.next();

   if(grades .indexOf(letterGrade )){
      // process your logic
   }else{
      System.out.println("Enter valid grade ");
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T10:00:22.263

您应该为此变量或 else 块设置一个默认值。因为当

```
 else
  {
    System.out.println("Error, you did not enter the correct information");
  } 
```

发生时，您的变量尚未初始化，然后您使用它。

顺便说一句：使用`String.equals()`而不是`string1 == string2`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T08:12:25.200

@divya88nair：你不应该仅仅因为有人在拼盘中给你一个解决方案（完整代码）就接受答案，而是去寻找答案，它增加了你的知识并引导你找到解决方案。

关于你的问题，

```
1) Method variable have to be initialised before use.
2) You may not intialise instance variable because instance variable are intialsed to their default value when you create a object.
3) == is used for refrence comparison in case of objects.
4) equals is used to check if two objects are meaningfully equal and equalsIgnoreCase is used to check same ignoring the case. 
```

@Peter Lawrey：我没有反对你，但我认为程序员应该知道一些基本的事情，这些都是非常基本的。

“为什么投反对票？这是一个完全合理的初学者问题？”，是的，提出这样的问题是合理的，但不要盲目地接受答案，尝试了解需要做什么并尝试自己编写代码，你可能不会编写一些 SO 专家可能给您的高效代码，但如果您自己尝试并继续改进它，您将到达那里，这只是基于我个人经验的建议。

# jquery - jquery grid 在asp.net中编辑

> ID：13286634
> 
> 赞同：0
> 
> 时间：2012-11-08T09:58:10.817
> 
> 标签：jquery, asp.net, jqgrid

我想更改我的gridview，因为客户认为gridview 修改数据太麻烦，他们不想点击“编辑”和“保存”..所以我选择jqueryGrid。任何人都可以给我一个例子吗？

# javascript - 如何使用 jquery 或 javascript 从 json 中的列表中获取信息？

> ID：13286638
> 
> 赞同：0
> 
> 时间：2012-11-08T09:58:18.947
> 
> 标签：javascript, jquery

我有以下 C# 类：

```
public class JsonBackup
{
    public int Added { set; get; }
    public int DEVCount { set; get; }
    public int DS1Count { set; get; }
    public IList<ViewEvent> Events { get; set; }
} 
```

这用于返回这样的 Json 字符串：

```
return Json(new JsonBackup
            {
                Added = added,
                DEVCount = devCount,
                DS1Count = ds1Count,
                Events = t.Events
            }); 
```

我有以下 javascript 调用：

```
$.ajax({
        url: $(this).attr('data-href'),
        dataType: 'json',
        type: 'POST'
    })
        .done(function (data) {
            backupDone(data, ajaxElapsed);
        }) 
```

我知道我可以获取 data.Added 等属性，但我如何才能获取事件列表中的事件信息？

这是具有事件数据的 C# 类的示例：

```
public class ViewEvent {
    public long Elapsed { get; private set; }
    public ET EventType { get; private set; }
    public string Description { get; private set; }
    public string Message { get; private set; }
    public int Quantity { get; private set; }
} 
```

我真正需要的是一些 JQuery 或 javascript 方法来从 Ajax 调用返回的内容中获取以下信息，并将其添加到 ul 元素中，id="stats"

```
<li>@viewEvent.Description : @viewEvent.Elapsed ms</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:37:45.613

您在 done 函数中需要的代码如下所示：

```
$.each(data.Events, function (i, item) {
    $('ul#stats').append('<li>' + item.Description + ' : ' + item.Elapsed + ' ms</li>');
}); 
```

# c++ - 动态 C++ 与其他语言 - 无法在不知道类型的情况下调用对象上的方法

> ID：13286639
> 
> 赞同：2
> 
> 时间：2012-11-08T09:58:28.540
> 
> 标签：c++, objective-c, qt

我不太明白我的一个朋友说的：

> 在 C++ 中，您不能在不知道对象类型的情况下调用对象的方法。它不是动态的。在 Objective C 中，您可以通过执行类似 [object message] 的操作，在 Qt 中，您可以通过使用信号和插槽来实现。在 C++11 中你也可以这样做

我的问题是：它正确吗？

如果可以，请用简单的英语解释一下，如果我不知道对象的类型，为什么我不能在 C++（不是 C++11）中调用对象的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T10:09:40.960

是的，它是正确的（大部分情况下。）C++ 中的对象方法或多或少像普通函数调用一样实现（除了虚函数调用，它类似于函数指针调用。）C++11 并没有让这变得更容易，尽管你可以获取函数指针并将它们存储在 中`std::function`，然后将其传递给*不*知道可以使用它的类型的东西。这可能是您朋友所指的，并且类似于 Qt 信号/插槽。

为了知道函数调用是否为虚函数，以及虚函数在 vtable 中的位置，必须知道类的*类型*。

在 Qt 中，您只能使用`QObject`. 您可以使用`Q_INVOKE`宏来告诉`moc`该函数应该可以通过元调用系统访问。然后，您可以使用`QMetaObject::invokeMethod`它来调用它，只知道基类是`QObject`（请注意，您当然仍然需要知道`QObject`类型。）Qt 在内部只是创建可用于通过名称调用方法的元代码（当它们标有`Q_SLOT`or `Q_INVOKABLE`， or 在一个`slots`部分中。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:27:55.523

真相介于两者之间。严格来说，我会说这种说法是错误的。

基本上，C++ 是强类型的，因此变量具有用于整个程序执行的定义类型。在动态语言中，变量的类型可能会在程序执行期间发生变化。

但是，使用虚函数和指针，您可以在 C++ 中调用对象的方法，而无需知道其确切类型。在这种情况下，您将拥有一种基础语言和几个派生类。当使用指向基类的指针调用方法时，您还可以将指向派生类的指针存储在变量中，因此您不知道将调用哪个类的确切方法。

在动态语言中，当您调用未为该对象定义的对象上的方法时，有一个委托机制将（尝试）将消息转发给理解该消息的对象。这是一种通用的运行时机制，在 C++ 中不存在。

现在 Qt 通常像 C++ 一样是强类型的。动态做事的唯一方法是通过基/派生类和虚拟函数的相同机制。

并且非常尖锐：在不知道对象类型的情况下调用方法实际上可以看作是不知道该方法的作用。即使在动态类型语言中，您通常也至少知道对象的可能类型。这样，我会声称没有应用程序可以在不知道对象类型的情况下调用方法。注意：我并不是说动态类型是无用的（一点也不，我对 Objective C、Ruby、Javascript... 很满意）——但我并不是说你什么都不知道关于动态语言中对象的类型。

# ios - 为什么自动布局中的 CGAffineTransformRotate 会改变动画视图？

> ID：13286640
> 
> 赞同：5
> 
> 时间：2012-11-08T09:58:33.103
> 
> 标签：ios, uiviewanimation

我想使用以下代码旋转 imageView：

```
[UIView animateWithDuration:.25 animations:^{
    self.imageView.transform = CGAffineTransformRotate(self.plusView.transform, M_PI_4);
}]; 
```

连线的事情是：如果我在没有自动布局的情况下运行这段代码，一切都很好。但是当使用自动布局时，图像视图在旋转之前会移动一个小像素，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-25T06:50:48.673

在 Xcode 5 中使用自动布局时，需要添加一个约束来固定 imageView 在其容器中的水平中心和垂直中心。如果您使用情节提要，这可以通过约束选项轻松完成。如果您不希望 imageView 自动调整大小，您还需要使用约束来修复宽度和高度。

![在 Storyboard 中使用约束固定视图的中心](../Images/54ade5f29444d168fdca99db4d3ea657.png)

![使用 Storyboard 中的约束修复视图的大小](../Images/b05187acdcf6a63b939d9c156924f341.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T01:04:32.093

我没有对 chazzwozzer 的回答发表评论的声誉（我的帐户因最近对 Facebook 登录的更改而被重置）。这个答案对我很有用..通过将正在转换的控件放入具有不同约束的 UIView 中。然后，正在转换的控件在该视图中设置为水平和垂直中心。

仅供参考 .. 转换的转变在后来的 iOS 8 上没有发生 .. 仅在 iOS 7.1 上。

# c# - 如何在 Windows 8 应用程序中获取 html 源代码

> ID：13286641
> 
> 赞同：1
> 
> 时间：2012-11-08T09:58:36.107
> 
> 标签：c#, windows-8

在 Windows 8 中，我尝试从 URL 获取 html 源代码：

```
private void loadingDatafromWeb(string URL)
{
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(URL);
    request.BeginGetResponse(new AsyncCallback(ReadCallbackLoadingData),request);
} 
```

和：

```
private void ReadCallbackLoadingData(IAsyncResult asynchronousResult)
{
    string myPageSource;
    HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
    HttpWebResponse response =   (HttpWebResponse)request.EndGetResponse(asynchronousResult);
    using (StreamReader myWebSource = new StreamReader(response.GetResponseStream()))
    {
        myPageSource = myWebSource.ReadToEnd();
    } 
```

我想在函数 loadingDatafromWeb 中获取字符串 myPageSource，但我做不到。请告诉我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:14:13.460

您可以使用新的 .Net 4.5 功能并使用`await`关键字调用：

```
private void loadingDatafromWeb(string URL)
{
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(URL);
    string html = await ReadData(new Uri(request));
} 
```

你的辅助方法是：

```
private async Task<string> ReadData(Uri uri)
{
     string result;

     // Get your response synchronously (do not forget to enscope WebResponse
     // and other Streams inside 'usings').

     return result;
} 
```

# c# - .Where() 和 .All() 的代码

> ID：13286643
> 
> 赞同：1
> 
> 时间：2012-11-08T09:58:39.803
> 
> 标签：c#

我正在搜索某个对象中的 .Where()、.All 或至少一个其他“特殊”方法的代码。我想学习如何写这样的，因为我发现它们很有用。

还有一个问题 - 为什么有些对象包含这些方法而其他对象不包含，例如，我如何在我的类中继承它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:04:22.650

Jon在**Reimplementing** [LINQ to Objects](http://msmvps.com/blogs/jon_skeet/archive/2010/09/03/reimplementing-linq-to-objects-part-1-introduction.aspx)中详细介绍了这一点；“哪里”是[第 2 部分](http://msmvps.com/blogs/jon_skeet/archive/2010/09/03/reimplementing-linq-to-objects-part-2-quot-where-quot.aspx)；“全部”是[第 10 部分](http://msmvps.com/blogs/jon_skeet/archive/2010/12/28/reimplementing-linq-to-objects-part-10-any-and-all.aspx)

对于“为什么有些对象包含这些方法而其他对象不包含这些方法，例如，我如何在我的类中继承它们？” - 标准 LINQ 操作被定义为`IEnumerable<T>`和（单独）上的扩展方法`IQueryable<T>`。如果您愿意，您可以在自己的类型上编写自己的扩展方法 - 或者只是常规的实例方法。

一个非常基本的实现`Where`是通过一个迭代器块；`Any`只是一种常规方法：

```
public static class SomeUtilityClass {
    public static IEnumerable<T> Where<T>(
        this IEnumerable<T> source, Func<T,bool> predicate)
    {
        foreach(var item in source)
        {
            if(predicate(item)) yield return item;
        }
    }
    public static bool All<T>(
        this IEnumerable<T> source, Func<T,bool> predicate)
    {
        foreach(var item in source)
        {
            if(!predicate(item)) return false;
        }
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:01:52.230

您可能想编写一个 LINQ 提供程序；这是一种实现 LINQ 功能的类，例如 Where()、Select() 等。

但是你为什么需要它？如果您使用 LINQ to Objects，基本上您构建的任何集合都支持 LINQ。

无论哪种方式，要了解有关构建 LINQ 提供程序的更多信息，请查看[http://msdn.microsoft.com/en-us/library/bb546158.aspx](http://msdn.microsoft.com/en-us/library/bb546158.aspx)上的演练文章。

这是另一个有趣的链接，就在 Stack Overflow 上：[Implementing your own LINQ & IEnumerable<T>](https://stackoverflow.com/questions/1230056/implementing-your-own-linq-ienumerablet)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:59:51.410

另一种方法是下载 ILSpy 工具并打开一个实现这些扩展的 DLL。

例如，只需在 ILSpy 中打开 System.Linq 即可显示许多标准实现。

# java - Java 日期处理

> ID：13286650
> 
> 赞同：-3
> 
> 时间：2012-11-08T09:59:08.227
> 
> 标签：java, date

> **可能重复：**
> [Java中两个日期之间的天数差异？](https://stackoverflow.com/questions/3299972/difference-in-days-between-two-dates-in-java)

我想计算两天之间的天数并将所有这些日期存储在日期数组中。我怎样才能做到这一点。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:05:15.213

我建议您使用`Calendar`带有 A 的对象`Date`并开始添加一天，直到您到达`Date`B。每次添加一天时，都将修改后的日期存储在一个数组中。

也请看这里：[Java 中两个日期之间的天数差异？](https://stackoverflow.com/questions/3299972/difference-in-days-between-two-dates-in-java)

PS：如果您想要更完整的答案，您应该向我们展示一些代码和一些努力。

# background - 带背景封面的 div

> ID：13286652
> 
> 赞同：0
> 
> 时间：2012-11-08T09:59:10.117
> 
> 标签：background, css

我需要一个半整页背景图像 div（如 twitter 主页）。实际上我正在尝试：

```
`background: url(images/bg.png) no-repeat center center fixed; 
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;` 
```

但我需要标题空间，比如 150-200 像素的高度。我该如何解决？我不希望这个 div 在标题后面，我希望它从它上面下来。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:04:18.467

看看移动背景图像是否对您有帮助！ [如何用 css 移动背景图像](https://stackoverflow.com/questions/1175557/how-to-shift-a-background-image-with-css)

否则，我会在标题之后有一个 div，并将背景图像放在那里。所以你的 HTML 代码看起来像这样......

```
<h1>Hi, this is a header!</h1>
<div class="backgroundPlz"></div> 
```

# android - Android：无法执行 HTTP 请求：没有对等证书

> ID：13286655
> 
> 赞同：2
> 
> 时间：2012-11-08T09:59:19.847
> 
> 标签：android, amazon-s3, download, kindle-fire

我开发了一个 android 应用程序，其中图像和音频是从 Amazon S3 存储桶下载的。在所有设备（sony xperia sola、HTC Salasa、Micromax funbook、samsung tab 2）和安卓模拟器中，它都能完美下载。

但是当我尝试在kindle fire中下载图像和音频时。它给了我错误

```
04-01 03:58:01.148: W/System.err(15854): com.amazonaws.AmazonClientException: Unable to execute HTTP request: No peer certificate
04-01 03:58:01.148: W/System.err(15854):    at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:332)
04-01 03:58:01.148: W/System.err(15854):    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:167)
04-01 03:58:01.148: W/System.err(15854):    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:2781)
04-01 03:58:01.148: W/System.err(15854):    at com.amazonaws.services.s3.AmazonS3Client.getObject(AmazonS3Client.java:872)
04-01 03:58:01.148: W/System.err(15854):    at org.Infoware.famouspeople.DownloadThread.run(DownloadThread.java:122)
04-01 03:58:01.148: W/System.err(15854): Caused by: javax.net.ssl.SSLPeerUnverifiedException: No peer certificate
04-01 03:58:01.148: W/System.err(15854):    at org.apache.harmony.xnet.provider.jsse.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:258)
04-01 03:58:01.148: W/System.err(15854):    at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:93)
04-01 03:58:01.148: W/System.err(15854):    at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:381)
04-01 03:58:01.148: W/System.err(15854):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:164)
04-01 03:58:01.148: W/System.err(15854):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-01 03:58:01.148: W/System.err(15854):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-01 03:58:01.148: W/System.err(15854):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
04-01 03:58:01.148: W/System.err(15854):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-01 03:58:01.148: W/System.err(15854):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-01 03:58:01.148: W/System.err(15854):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-01 03:58:01.148: W/System.err(15854):    at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:285)
04-01 03:58:01.148: W/System.err(15854):    ... 4 more 
```

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T12:38:33.273

我也有这个问题。原来这是由 wifi 路由器上的透明 HTTP(S) 代理重定向到 wifi 登录页面引起的。可能值得检查一下。例如，如果您对 wifi 网络的授权超时，错误可能会出现间歇性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T12:31:01.487

对我来说，我只是将 android 版本更改为 4.1 并解决问题。请在您的代码中尝试可能会对您有所帮助。

# scala - 如何禁用 SBT 中特定依赖项的日志记录？

> ID：13286656
> 
> 赞同：8
> 
> 时间：2012-11-08T09:59:20.943
> 
> 标签：scala, sbt, slf4j, logback, slick

我有以下 build.sbt 文件：

```
version := "0.1"

scalaVersion := "2.10.0-RC1"

scalacOptions := Seq("-unchecked", "-deprecation", "-encoding", "utf8")

resolvers ++= Seq(
  "sonatype releases" at "https://oss.sonatype.org/content/repositories/releases/",
  "sonatype snapshots" at "https://oss.sonatype.org/content/repositories/snapshots/",
  "typesafe repo" at "http://repo.typesafe.com/typesafe/releases/",
  "spray repo" at "http://repo.spray.io/"
)

libraryDependencies ++= Seq(
  "io.spray"           %   "spray-can"         % "1.1-M4.2"
  ,"io.spray"          %   "spray-routing"     % "1.1-M4.2"
  ,"io.spray"          %   "spray-testkit"     % "1.1-M4.2"
  ,"io.spray"          %%  "spray-json"        % "1.2.2"     cross CrossVersion.full
  ,"com.typesafe.akka" %%  "akka-actor"        % "2.1.0-RC1" cross CrossVersion.full
  ,"org.specs2"        %%  "specs2" % "1.12.2" % "test"      cross CrossVersion.full
  ,"com.typesafe"      %   "slick_2.10.0-RC1"  % "0.11.2"
  ,"com.h2database"    %   "h2"                % "1.3.166"
  ,"org.xerial"        %   "sqlite-jdbc"       % "3.6.20"
  ,"org.slf4j"         %   "slf4j-api"         % "1.6.4"
  ,"ch.qos.logback"    %   "logback-classic"   % "1.0.7"
  ,"org.specs2"        %   "specs2_2.10.0-RC1" % "1.12.2"    % "test"
  ,"junit"             %   "junit"             % "4.8.1"     % "test"
) 
```

如何为我自己的（当前）项目启用调试级别报告，但为另一个项目禁用它。在这种情况下，我不想看到 Slick 库的调试输出，但仍想查看我自己项目的调试日志。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T10:45:54.003

在您的 logback.xml 中添加如下条目：

```
<logger name="com.typesafe.slick" level="INFO"/> 
```

这意味着，当命名空间的任何类获取记录器时，`com.typesafe.slick`它将`INFO`设置为日志级别。

编辑：这是[文档](http://logback.qos.ch/manual/configuration.html)的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-22T11:58:08.950

要查看您依赖的记录器的名称，您可以在`logback.xml`. 因此，如果您有以下情况：

```
<configuration>
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss} [%thread] %-5level %logger{1000} - %msg%n</pattern>
        </encoder>
    </appender>

    <root level="info">
        <appender-ref ref="STDOUT" />
    </root>
</configuration> 
```

您将收到类似日志消息的信息：

> 12:53:09 [AmexReporting-akka.stream.default-blocking-io-dispatcher-6] INFO **net.schmizz.sshj .connection.channel.direct.SessionChannel** - 将请求`sftp`子系统

然后您可以在 appender 和根级别配置之间添加一个记录器：

```
<configuration>
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss} [%thread] %-5level %logger{1000} - %msg%n</pattern>
        </encoder>
    </appender>

    <logger name="net.schmizz.sshj" level="OFF"/>

    <root level="info">
        <appender-ref ref="STDOUT" />
    </root>
</configuration> 
```

记录器名称是您可以在日志输出中看到的一部分或完整包名称，具体取决于您希望日志设置的粒度。

# clearcase - 在 CCRC 中注释（“责备”）？

> ID：13286657
> 
> 赞同：2
> 
> 时间：2012-11-08T09:59:22.843
> 
> 标签：clearcase, clearcase-remote-client

在基本的 ClearCase 中有一个名为“Annotate”的“SVN blame”风格的命令，它显示了谁在版本化元素中编写了每一行。

有没有办法使用远程客户端（CCRC）进行注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:09:02.147

仅通过命令行，对于完整的 ClearCase：

请参阅：（[`cleartool annotate`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_annotate.htm)或者您有[其他商业替代品](https://stackoverflow.com/questions/13169735/clearcase-scm-adapter-support-for-annotate)，包括[Tamir](https://stackoverflow.com/users/138479/tamir-gefen)的一个[Visual Annotate](http://www.gomidjets.com/annotate.php)，它有一个支持 CCRC 的测试版）

但`cleartool`不适用于 CCRC。
不过，CCRC 有一个 CLI（命令行界面）。

[该线程](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=250992)提到：

> CCRC Gui 和命令行都应该支持该**`annotate`**命令（至少命令行等效于完整的 ClearCase。Full
> CC 从来没有用于注释的 gui，但这是另一个问题）。

# jdbc - 如何使用 cas 将票务详细信息存储到数据库中

> ID：13286660
> 
> 赞同：0
> 
> 时间：2012-11-08T09:59:29.443
> 
> 标签：jdbc, ldap, single-sign-on, cas

**我使用cas** Authentication创建了一个简单的应用程序。我的登录身份验证工作正常，每次成功登录后也会生成相应的票证。但我的要求是将票证的详细信息存储到数据库中。

任何帮助都是感激的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:12:46.177

如果您还没有查看文档：[https ://wiki.jasig.org/display/CASUM/JpaTicketRegistry](https://wiki.jasig.org/display/CASUM/JpaTicketRegistry)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T08:50:36.677

你说的是服务票吗？您想在数据库中存储哪些详细信息？服务票证是 CAS 的一个安全元素，它的生命周期很短：使用一次并迅速销毁......

# sql - 如果条件不匹配，select 语句会返回什么？

> ID：13286661
> 
> 赞同：3
> 
> 时间：2012-11-08T09:59:31.520
> 
> 标签：sql, sql-server, select

例如，如果我有以下声明：

```
declare @uid int;
set @uid = (select id from tablename where condition) 
```

在这种情况下，如果 select 没有返回任何结果，那么它的值`@uid`是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:05:10.050

**在这种情况下它将返回 NULL**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T10:09:10.353

**简而言之，它将为空**

我制作了简单的临时表来测试这个

```
declare @temp table 
 (
   id int identity(1,1) not null  ,
   alpha nvarchar(50)
 )

 insert into @temp select 'z' 
```

声明一个变量`nvarchar type`并在此条件不满足的情况下获取值，则为 null，如果您通过 print 语句看到，则应该没有任何内容将被打印

```
declare @test nvarchar(50)

 select @test=alpha from @temp where id=70

 insert into @temp  select @test 
 select * from @temp

 print @test 
```

**我只是再次插入它以确认有空**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:12:56.557

做一个检查，像这样：

```
declare @uid int;
set @uid = (select id from tablename where condition)
If @uid IS NULL
  print 'uid is null or not exist' 
```

或者，您可以设置默认值以防返回 null

```
 If @uid IS NULL
      set @uid = 0 
```

# linux - linux/Ubuntu 中任何相当于 Microsoft“JouleMeter”的工具/软件

> ID：13286662
> 
> 赞同：2
> 
> 时间：2012-11-08T09:59:36.120
> 
> 标签：linux, linux-kernel, power-management

“JouleMeter”是 Microsoft 的一款工具，用于测量 Windows 机器上不同进程的功耗。

请告诉我linux上是否有任何类似的工具可以获取linux机器上不同进程和应用程序的能源消耗信息。我也在寻找一个开源解决方案。

# objective-c - 空白的第一个 UITableView 部分标题

> ID：13286667
> 
> 赞同：1
> 
> 时间：2012-11-08T09:59:49.460
> 
> 标签：objective-c, ios, uitableview

我的 UITableView 中有 2 个部分。我希望我的第一个标题不存在，没有空间，什么都没有。第一个单元格触及屏幕顶部。我想要我的第二部分的自定义部分标题。

如果我不使用，我可以这样做，`- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`但是当我使用此方法时，第一部分会出现一个空白标题视图。我究竟做错了什么？

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    if (!section == 0){
        UIView *header = [[UIView alloc]initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 30.0f)];
        UILabel *label = [[UILabel alloc]initWithFrame:[header frame]];
        [label setText:@"Test Header"];
        [header addSubview:label];

        return header;
    }
    else{
        // This apparently causes a header to appear in section 0\. 
        // Without this entire method it works fine- but it means I can't customize
        // the header.
        return nil;
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T10:05:05.627

寻找

`- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section`

的方法`UITableView`。

你可以`return 0;`为第一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:06:34.503

用这个，

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    if (section == 0){       
        return 0;
    }
    //...
} 
```

# gcc - 用greenhills编译gcc代码

> ID：13286674
> 
> 赞同：0
> 
> 时间：2012-11-08T10:00:10.573
> 
> 标签：gcc, powerpc, greenhills

我是这个领域的新人。我正在和其他人一起做一个项目，但我遇到了一个我不知道该怎么做的问题。

我和另一个人有不同的编译器，我有一个用于飞思卡尔 MPC 的绿山，另一个有一个飞思卡尔 MPC 兼容的 gcc。我需要将所有软件与 greenhills 编译器集成。我们的目标之一是所有最终软件都必须由 greenhills 编译。

为此，将 gcc 代码集成到 greenhills 是否容易？有没有人喜欢这个作品？连我的老板都不知道是否可行。

实际上我什至不知道我应该先做什么，因为我也没有使用 gcc 和 greenhills 的经验。如果有参考手册或类似的东西，请告诉我。:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T19:16:38.917

Green Hills 编译器确实有一套*非常*广泛的手册。这些是硬拷贝（或至少习惯于），或者您可以通过 MULTI 访问数字版本（以类似于 Microsoft CHM 的格式）；只需单击菜单栏中的“帮助”。

您当然应该从打开`-gnu`、`-gcc`或`--g++`选项开始。这告诉编译器前端接受一堆 GNUism。这可能足以满足您的目的。

Green Hills 根本不支持某些 GNU 功能，例如嵌套函数，因此如果您的部分代码使用它们，您将不得不重写这些部分。我也会避开语句表达式并使用标签的地址，即使在 GCC 上也可能会做错事！

但基本上，你的问题的答案是“阅读手册并按照它告诉你的去做”。我相信甚至还有一个完全致力于将 GNU 代码移植到 Green Hills 的附录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-23T11:01:48.080

我们目前正在与 GHS 在一个项目中合作，所以我能感觉到你的痛苦。您是否在此期间（4 年前）完成了这项任务？

您的问题“将 gcc 代码集成到绿山”不够具体，抱歉。这是否意味着您的源代码中有部分特别使用 GCC 类型的程序集或特性？我们在谈论多少行代码，它是什么架构？

PowerPC 的另一个故事是 VLE 指令集。您目前正在使用哪个 PowerPC GCC，因为可用的不多（NXP、Mentor、...）？我们目前面临着类似的问题，在 GHS 和 GCC 之间进行移植，但只是分析了表面，由于合规性原因从未做过。

我还建议与 GHS 支持人员取得联系，他们是专业人士，如果他们看到您从 GCC 转出，肯定会提供帮助。

# android - 从 SurfaceView 导航到代码中的其他视图

> ID：13286686
> 
> 赞同：0
> 
> 时间：2012-11-08T10:00:54.777
> 
> 标签：android

我经历过 iOS 开发，但对 Android 开发很陌生，在这里问一些新手问题......

我正在制作一个应用程序，它可以对 png 和动画进行大量自定义绘制，并且根本没有标准的 UI 元素，我选择走 SurfaceView 之路。我也处理我的 SurfaceView 代码中触摸的所有检测。

但是，我究竟如何在 SurfaceView 代码中处理视图之间的导航？例如，我如何导航到名为 QuizActivity 的活动？在“正常”视图/活动中，我这样做：

```
Intent intent = new Intent(getBaseContext(), QuizActivity.class);
startActivity(intent); 
```

但是我无法从 SurfaceView 中访问 getBaseContext 和 startActivity，即使这样做会导致同时加载多个视图？

底线：如何在 SurfaceView 中的代码中手动实现此导航？

谢谢索伦_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:16:50.587

从您的表面视图只需调用：

```
 Intent intent = new Intent(getContext(), QuizActivity.class);
    getContext().startActivity(intent) 
```

每个视图都有对它们正在运行的上下文的引用，并且上下文总是可以启动新的活动、服务、获取资源等。

**编辑**

在您的表面视图中，您包括以下内容：

```
 private SurfaceCallbacks listener;

    public interface SurfaceCallbacks{
       public void onTouch(/* any data you want to pass to the activity*/);
    }

    public void registerSurfaceCallbacksListener(SurfaceCallbacks l){
       listener = l;
    }

    // and then whenever the surface being touched and you want to call something outside of the surface you do:

    if(listener!=null)
       listener.onTouch(/* pass the parameters you declared on the interface */); 
```

并在保持表面的活动上执行以下操作：

```
 public ActivityThatHoldsSurface extends Activity implements SurfaceCallbacks{

       // that comes form the surface
       @Override
       onTouch(/* your parameters */){
          // do the navigation stuff
       }

       // and immediately after you inflate or instantiate your surface you do:
       mySurface.registerSurfaceCallbacksListener(ActivityThatHoldsSurface.this);

    } 
```

是否有意义？？？

# php - PHP 函数 pdf_open

> ID：13286689
> 
> 赞同：0
> 
> 时间：2012-11-08T10:01:02.873
> 
> 标签：php, pdf

我将 php 的源代码从 Debian 服务器复制到 Windows 环境（使用 wamp）。有几个`pdf_open`函数调用没有在任何地方声明，甚至没有在包含的库中。我想让这段代码在我的环境中工作，但谷歌搜索没有给我任何答案。也许这是一个 PHP 版本问题，因为 Debian 运行 PHP 4 而我在本地有 PHP 5.3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:27:31.797

这是一个 php 本机函数，但已[弃用](http://www.php.net/manual/en/intro.pdf.php)，请改用。`pdf_new()``pdf_open_file()`

# c# - 在控制台应用程序项目中向 Nop Commerce 客户发送邮件

> ID：13286692
> 
> 赞同：0
> 
> 时间：2012-11-08T10:01:09.097
> 
> 标签：c#, oop, e-commerce, nopcommerce

我是 Nop Commerce Project 2.30 的初学者。我尝试向我的 Nop Commerce 发送邮件

特定间隔（每 12 小时）中的客户端（在数据库中）。

我在界面中创建新方法（用于创建客户列表列表）

**Nop.Services.Customers.ICustomerService**并实现这个功能，类是

**Nop.Services.Customers.CustomerService**。但是我无法创建此方法的问题

作为**静态**方法。请看图片

![在此处输入图像描述](../Images/f122ae342415e3773055743cbd3598e2.png)

因为**CustomerService**类不包含默认值

构造函数。这是 CustomerService 类中唯一的一个构造函数。

请看下文。

```
 public CustomerService(ICacheManager cacheManager,
            IRepository<Customer> customerRepository,
            IRepository<CustomerRole> customerRoleRepository,
            IRepository<CustomerAttribute> customerAttributeRepository,
            IEncryptionService encryptionService, 
            INewsLetterSubscriptionService newsLetterSubscriptionService,
            RewardPointsSettings rewardPointsSettings, 
            CustomerSettings customerSettings,
            IEventPublisher eventPublisher)
        {
            _cacheManager = cacheManager;
            _customerRepository = customerRepository;
            _customerRoleRepository = customerRoleRepository;
            _customerAttributeRepository = customerAttributeRepository;
            _encryptionService = encryptionService;
            _newsLetterSubscriptionService = newsLetterSubscriptionService;
            _rewardPointsSettings = rewardPointsSettings;
            _customerSettings = customerSettings;
            _eventPublisher = eventPublisher;
        } 
```

我不知道如何在外部程序中调用这个参数化构造函数。所以我尝试

使我的功能是静态的。在 nop 中创建静态方法的任何想法。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:43:33.317

我为此任务使用了 WebClient 函数。我在我的 MVC 应用程序中创建了一个用于发送电子邮件的操作。通过 webclient 从我的控制台应用程序中以特定间隔调用此操作。

请参阅此链接了解更多信息。

[http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/d60415d9-f1e7-4981-b600-be056f2f7bcd](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/d60415d9-f1e7-4981-b600-be056f2f7bcd)

[http://forums.asp.net/t/1858253.aspx/1?Call+a+MVC3+Controller+Action+in+a+Console+Application+](http://forums.asp.net/t/1858253.aspx/1?Call%20a%20MVC3%20Controller%20Action%20in%20a%20Console%20Application%20)

# basic-authentication - Cherrypy：auth_basic 和 basic_auth 有什么区别

> ID：13286694
> 
> 赞同：1
> 
> 时间：2012-11-08T10:01:12.937
> 
> 标签：basic-authentication, cherrypy

查看cherrypy的测试我可以看到test_auth_basic.py具有以下配置：

```
'tools.auth_basic.on': True,
'tools.auth_basic.realm': 'wonderland',
'tools.auth_basic.checkpassword': checkpasshash 
```

但文件 test_httpauth.py 显示：

```
'tools.basic_auth.on': True,
'tools.basic_auth.realm': 'localhost',
'tools.basic_auth.users': fetch_password,
'tools.basic_auth.encrypt': sha_password_encrypter}} 
```

这些工具有什么区别？两者都实现基本身份验证吗？如果是这样，为什么不推荐使用两种不同的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:36:26.897

我不小心碰到了这个回答我问题的[链接。](https://bitbucket.org/cherrypy/cherrypy/wiki/WhatsNewIn32)basic_auth 已被弃用，取而代之的是 auth_basic。

# php - 使用通配符子域的简单 URL 重写

> ID：13286695
> 
> 赞同：2
> 
> 时间：2012-11-08T10:01:16.413
> 
> 标签：php, mod-rewrite, url-rewriting

我想为每个用户设置唯一的子域地址，例如 http://*.mywebsite.com，其中 * 可以是任何用户名，例如 xyz、abc、john、deo 等。

我希望每当有人打开像[http://aswt.mywebsite.com](http://aswt.mywebsite.com)这样的网址时，它就会被重定向到[http://www.mywebsite.com/panels/users/index.php?subdomain=aswt](http://www.mywebsite.com/panels/users/index.php?subdomain=aswt)。

请帮助我实现它，因为我是 url 重写的新手。我确实尝试过在谷歌和堆栈溢出上进行搜索，但没有发现任何与我相似或易于使用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:13:14.943

AFAIK，你不能用 mod_rewrite 做到这一点： RewriteRule 不考虑 HTTP_HOST 。RewriteCond 可以，但在这里还不够。

你必须用 PHP 来做：

```
if (preg_match('#^(.*)\.mywebsite\.com$#', $_SERVER['HTTP_HOST'], $matches))
{
  header('Location: /panels/users/index.php?subdomain='.$matches[1];
  exit;
} 
```

应该做...

无论如何，对于 url 重写（尤其是复杂的），PHP 导致的问题通常比 mod_rewrite 少得多，而且功能更强大。

# r - 绘制密度“列表”

> ID：13286699
> 
> 赞同：4
> 
> 时间：2012-11-08T10:01:35.553
> 
> 标签：r

我有一个由 10 列和 50 行组成的 data.frame。我使用 apply 函数逐列计算密度函数。现在我想绘制我一次计算的密度。

换句话说，而不是绘图...

```
plot(den[[1]]) 
plot(den[[2]]
plot(den[[3]] 
```

...我想一次绘制所有的密度。

我想我必须使用该`lapply`函数，并且可能我必须编写一个特定的函数来执行此操作。谁能帮我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T10:08:25.697

也许这会有所帮助

```
set.seed(001)
DF <- data.frame(matrix(rnorm(400, 100, 12), ncol=4)) # some data
den<-apply(DF, 2, density) # estimating density

par(mfrow=c(2,2))
sapply(den, plot) # plot each density
par(mfrow=c(1,1)) 
```

这使...

![在此处输入图像描述](../Images/fd9089599ff5885badaaee225855e639.png)

给出一些名字：

```
par(mfrow=c(2,2))
for(i in 1:length(den)){
  plot(den[[i]], 
       main=paste('density ', i))
}
par(mfrow=c(1,1)) 
```

![在此处输入图像描述](../Images/bdf8a89af5bab4560c8bf4413bf366ee.png)

如果您只是不希望一个输出中的所有图，您可能想`par(mfrow=c(2,2))`省略并运行`sapply(den, plot)`

**编辑：回答你的第二个问题（在评论中）**

```
plot(den[[1]], ylim=c(0,.04), 
     main='Densities altogether') # plot the first density
for(i in 2:length(den)){          # Add the lines to the existing plot
  lines(den[[i]], col=i)          
} 
```

![在此处输入图像描述](../Images/dcfb04fbf6eabe07a5990dda4c4d99e2.png)

`legend`这里使用函数添加图例很有用

```
legend('topright', paste('density ', 1:4), col=1:4, lty=1, cex=.65) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:58:48.223

我认为该`lattice`软件包可能很方便：

以下来自 Jilber 的示例：

```
set.seed(001)
DF <- data.frame(matrix(rnorm(400, 100, 12), ncol=4)) # some data
DF <- stack(DF) # to long form

library(lattice)
densityplot(~values|ind, DF, as.table=TRUE)
# or
densityplot(~values, groups=ind, DF) 
```

结果是：

![不同的密度](../Images/2fe68b375cf9f24e7663f4d46cb298b3.png)

和

![组合密度](../Images/52941411b4047a3b0ad7f017918ea4e8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T05:37:51.337

`latticeExtra`有很方便的功能，`marginalplot`

```
marginal.plot(DF,layout=c(2,2)) 
```

![在此处输入图像描述](../Images/43331d13b50fff54a1683b5bdfcf91db.png)

# ios - 动态修改 CAKeyframeAnimation 的持续时间

> ID：13286702
> 
> 赞同：0
> 
> 时间：2012-11-08T10:01:45.937
> 
> 标签：ios, core-animation, cakeyframeanimation

在我的代码中，我创建了一个具有无限重复计数的 CAKeyframeanimation，将其添加到特定的 CALayer。我想在制作动画时修改动画的持续时间（= 速度），而无需重新启动动画。所以当我点击一个按钮时，我会得到一个可以为动画设置的持续时间。我必须删除动画，创建另一个动画，然后让它从我停止的地方开始。问题是我似乎无法从那一点重新启动它，而不让它从那一点开始循环。如果它是一个旋转，它不会有问题，但我使用翻译。

* * *

所以，我有 3 个点，A，然后是 B，然后是 C，在一条直线上。我的翻译从 A 到 C，经过 B，并无限重复。当我更改持续时间时，在 B 点，我只能重新创建从 B 到 C 的平移动画（这不好），或者，我可以使用新的持续时间重新创建从 A 到 C 的动画，但它从 A 点重新开始（这也不好）。你知道我怎么能做我想做的事吗？谢谢

# iphone - 为什么在 ipad 中显示数百条记录时，我的 uitableview 会被拉伸

> ID：13286705
> 
> 赞同：0
> 
> 时间：2012-11-08T10:01:54.323
> 
> 标签：iphone, ios, web-services, ipad, uitableview

这是我用来显示我的 tableview 自定义单元格的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *CellIdentifier = @"CustomCell";

CustomeCellHome *cell = (CustomeCellHome *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomeCellHome" owner:self options:nil];
    for (id currentObject in topLevelObjects){
        if ([currentObject isKindOfClass:[UITableViewCell class]]){
            cell =  (CustomeCellHome *) currentObject;
            break;
        }
    }
}

    NSString *strImgUrl = [[[[myarray valueForKey:@"mykey1"]objectAtIndex:indexPath.row] valueForKey:@"url"] objectAtIndex:0];
    [[AsyncImageLoader sharedLoader] cancelLoadingImagesForTarget:cell.imgView];
    cell.imgView.imageURL = [NSURL URLWithString:strImgUrl];

    cell.lbl1.text = [[myarray valueForKey:@"mykey2"]objectAtIndex:indexPath.row];
    cell.lbl2.text = [[myarray valueForKey:@"mykey3"]objectAtIndex:indexPath.row];

    cell.lbl3.text = [[myarray valueForKey:@"mykey3"]objectAtIndex:indexPath.row];
    cell.lbl4.text = [[myarray valueForKey:@"mykey4"]objectAtIndex:indexPath.row];

    cell.lbl5.text = [[myarray valueForKey:@"mykey5"]objectAtIndex:indexPath.row];
    cell.lbl6.text = [[myarray valueForKey:@"mykey6"]objectAtIndex:indexPath.row];
} 
```

CustomeCellHome 是 UITableViewCell 的子类，我正在使用 Nib 来显示它。CustomeCellHome 拥有所有的 IBOutlet 并连接到 Nib。所有 IBOutlet 都是属性和综合，我已经在 dealloc 方法中发布了它。

我一次在 tableview 中显示 50 条记录。如果用户想查看更多记录，他可以通过单击下一个按钮来查看，也可以通过单击上一个按钮查看上一个记录。

当用户按下下一个按钮时，我正在调用 Web 服务并从服务器获取下一个 50 条记录。我将之前的 50 条记录保存在数组中，并将这些新记录添加到该数组中。但是在“myarray”中，我一次只保留 50 条以显示在 tableview 中（意味着我一次只显示 50 条记录）。

当我到达查看 850 到 900 或接近该记录时，我的表格视图被拉伸并且它会在一段时间后停止并显示。

同样在查看 1450 到 1500 或接近该记录后，我收到内存警告并且我的应用程序崩溃了。我没有得到这个。为什么会这样？

我用内存工具检查了我没有任何内存泄漏。我是否使用错误来显示自定义单元格或我的 Web 服务调用会导致更多内存？

请任何人都可以指导我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:14:39.237

It sounds like you are consuming too much memory. You don't need to leak memory to have your app shot by the watchdog.

I would profile the memory consumption of your app as you load more and more data. You'll probably want to respond to a `memoryWarning` message and delete all of your objects except for the current set. You could (de)serialize the objects to disc to preserve user's bandwidth.

You don't show the lifespan of your objects, but assuming they are fetched/stored in your `UI(Table)ViewController` you'll want to implement code in `- (void)didReceiveMemoryWarning` or `- (void)viewDidUnload` (iOS5 vs. iOS6) to clear out the older data.

SideNote: is `myarray` actually a dictionary? It's good practice to give your variables descriptive names to make your code easier to understand (for others, and yourself in 2 months when you need to fix a bug).

# c++ - Malloc vs new——不同的填充

> ID：13286706
> 
> 赞同：111
> 
> 时间：2012-11-08T10:01:56.607
> 
> 标签：c++, malloc, new-operator, padding

我正在为我们的项目审查其他人的 C++ 代码，该项目使用 MPI 进行高性能计算（10^5 - 10^6 核）。该代码旨在允许（可能）不同架构上的不同机器之间进行通信。他写了一条评论，内容大致如下：

> 我们通常使用`new`and `delete`，但在这里我使用`malloc`and `free`。这是必要的，因为某些编译器在`new`使用时会以不同的方式填充数据，从而导致在不同平台之间传输数据时出错。这不会发生在`malloc`.

这不符合我从标准`new`与`malloc`问题中了解到的任何内容。

[new/delete 和 malloc/free 有什么区别？](https://stackoverflow.com/questions/240212/what-is-the-difference-between-new-delete-and-malloc-free#240308)暗示编译器可以不同方式计算对象大小的想法（但为什么这与使用不同`sizeof`？）。

[malloc &placement new vs. new](https://stackoverflow.com/questions/8959635/malloc-placement-new-vs-new)是一个相当流行的问题，但只讨论在不`new`使用构造函数的地方使用构造函数`malloc`，这与此无关。

[malloc 是如何理解对齐的？](https://stackoverflow.com/questions/8752546/how-does-malloc-understand-alignment)说内存可以保证与我之前的想法正确`new`对齐`malloc`。

我的猜测是他在过去的某个时候误诊了自己的错误并推断出`new`并`malloc`给出了不同数量的填充，我认为这可能不是真的。但我无法通过谷歌或之前的任何问题找到答案。

帮助我，StackOverflow，你是我唯一的希望！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-08T11:39:24.560

IIRC 有一个挑剔的点。`malloc`保证返回与任何标准类型对齐的地址。`::operator new(n)`仅保证返回与*不大于 n*的任何标准类型对齐的地址，如果`T`不是字符类型`new T[n]`，则只需要返回与 对齐的地址`T`。

但这仅在您使用特定于实现的技巧时才相关，例如使用指针的底部几位来存储标志，或者依靠地址进行比严格需要的更多对齐。

它不会影响对象内的填充，无论您如何分配它占用的内存，它都必须具有完全相同的布局。所以很难看出这种差异如何导致数据传输错误。

是否有任何迹象表明该评论的作者对堆栈或全局对象中的对象有什么看法，无论他认为它们是“像 malloc 一样填充”还是“像 new 一样填充”？这可能会为这个想法的来源提供线索。

也许他很困惑，但也许他所说的代码不仅仅是`malloc(sizeof(Foo) * n)`vs之间的直接区别`new Foo[n]`。也许它更像是：

```
malloc((sizeof(int) + sizeof(char)) * n); 
```

对比

```
struct Foo { int a; char b; }
new Foo[n]; 
```

也就是说，也许他是在*说*“我使用 malloc”，但*意思是*“我手动将数据打包到未对齐的位置而不是使用结构”。实际上`malloc`不需要手动打包结构，但没有意识到这是一个较小程度的混乱。有必要定义通过线路发送的数据布局。*使用结构*时，不同的实现会以不同的方式填充数据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T10:36:33.720

您的同事可能已经想到了`new[]/delete[]`' 魔法 cookie（这是实现在删除数组时使用的信息）。`new[]`但是，如果使用从返回的地址开始的分配（与分配器的相反），这将不是问题。

*包装*似乎更有可能。ABI 的变化可能（例如）导致在结构末尾添加不同数量的尾随字节（这受对齐影响，也考虑数组）。使用 malloc，可以指定结构的位置，因此更容易移植到外部 ABI。通常通过指定传输结构的对齐和封装来防止这些变化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T10:44:08.733

对象的布局不能取决于它是使用`malloc`还是分配的`new`。它们都返回相同类型的指针，当您将此指针传递给其他函数时，它们将不知道对象是如何分配的。`sizeof *ptr`仅取决于 的声明`ptr`，而不是它的分配方式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-08T10:06:53.827

我想你是对的。填充由编译器完成，而不是`new`or `malloc`。即使您声明了一个数组或结构而没有使用`new`或`malloc`根本没有使用填充注意事项。无论如何，虽然我可以看到在平台之间移植代码时如何不同的实现`new`并`malloc`可能导致问题，但我完全看不到它们如何导致平台之间的数据传输问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T18:37:09.137

这是我对这东西来自哪里的疯狂猜测。正如您所提到的，问题在于通过 MPI 传输数据。

就个人而言，对于我想通过 MPI 发送/接收的复杂数据结构，我总是实现序列化/反序列化方法，将整个内容打包/解包到字符数组中/从字符数组中解包。现在，由于填充，我们知道结构的大小可能大于其成员的大小，因此还需要计算数据结构的未填充大小，以便我们知道正在发送/接收的字节数。

例如，如果您想`std::vector<Foo> A`使用上述技术通过 MPI 发送/接收，则假设结果字符数组的大小通常是错误的`A.size()*sizeof(Foo)`。换句话说，每个实现序列化/反序列化方法的类也应该实现一个报告数组大小的方法（或者更好地将数组存储在容器中）。这*可能*成为错误背后的原因。但是，一种或另一种方式与此线程中指出的`new`vs无关。`malloc`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T00:05:18.190

当我想使用 MS Visual 编译器控制我的普通旧数据结构的布局时，我使用`#pragma pack(1)`. 我想大多数编译器都支持这样的预编译器指令，例如[gcc](http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html)。

这具有将结构的所有字段一个接一个对齐的结果，没有空格。

如果另一端的平台也这样做（即使用填充 1 编译其数据交换结构），那么双方检索到的数据正好吻合。因此，我从来不用在 C++ 中使用 malloc。

在最坏的情况下，我会考虑重载 new 运算符，以便它执行一些棘手的事情，而不是直接在 C++ 中使用 malloc。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-14T08:11:08.797

**在 c++ 中：** `new`关键字用于为某些数据结构分配一些特定的内存字节。例如，您已经定义了一些类或结构，并且想要为其对象分配内存。

```
myclass *my = new myclass(); 
```

或者

```
int *i = new int(2); 
```

但在所有情况下，您都需要定义的数据类型（类、结构、联合、int、char 等），并且只分配其对象/变量所需的内存字节。（即；该数据类型的倍数）。

但是在 malloc() 方法的情况下，您可以分配任何字节的内存，并且您不需要始终指定数据类型。在这里，您可以在 malloc() 的几种可能性中观察到它：

```
void *v = malloc(23); 
```

或者

```
void *x = malloc(sizeof(int) * 23); 
```

或者

```
char *c = (char*)malloc(sizeof(char)*35); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-12-23T12:28:20.430

malloc 是一种函数类型，new 是 c++ 中的一种数据类型，如果我们使用 malloc，则必须使用类型转换，否则编译器会给您错误，如果我们使用新数据类型分配内存，则不需要进行类型转换

# debian - debian 限制命令输出中的 init.d 脚本

> ID：13286707
> 
> 赞同：0
> 
> 时间：2012-11-08T10:01:57.153
> 
> 标签：debian, init.d

我为 tomcat 编写了一个监控脚本，它检查 tomcat/bin/bootstrap.jar 是否正在运行。

```
ps ax -o cmd|grep tomcat/bin/bootstrap.jar |grep -v grep | awk {'print $1'} 
```

此命令在终端中运行时工作正常，但 from`init.d ps ax -o cmd`仅提供部分输出。

```
"/usr/bin/java -Djava.util.logging.config.file=/home/webserver/tomcat/" 
```

实际上应该是

```
"/usr/bin/java -Djava.util.logging.config.file=/home/webserver/tomcat/conf/logging.properties -Dsun.net.inetaddr.ttl=30 -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xmx650m -Djava.endorsed.dirs=/home/webserver/tomcat/endorsed -classpath /home/webserver/tomcat/bin/bootstrap.jar -Dcatalina.base=/home/webserver/tomcat -Dcatalina.home=/home/webserver/tomcat -Djava.io.tmpdir=/home/webserver/tomcat/temp org.apache.catalina.startup.Bootstrap start" 
```

init.d 脚本是否限制命令输出长度？我怎样才能让它工作？

操作系统：Debian（在 RedHat 机器上运行良好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:39:11.173

尝试使用该`-ww`选项来指定无限宽度的输出。-w 选项提供宽输出，-ww 选项指定无限宽度。

# ruby-on-rails - Rspec 测试用例失败失败/错误：fake_login SystemExit：退出

> ID：13286712
> 
> 赞同：0
> 
> 时间：2012-11-08T10:02:14.813
> 
> 标签：ruby-on-rails, ruby, rspec, cucumber, capybara

我正在开发一个项目并为测试用例编码，一切都很好，但是当我运行整个测试用例时

**bundle exec rspec 接受** .: 接受是我有 specs.rb 文件的文件夹

许多测试用例失败并给出错误

**错误：失败/错误：fake_login SystemExit：退出**

任何线索或帮助，因为我认为这不是测试用例错误。

# magento - 将职责分离到 Magento

> ID：13286713
> 
> 赞同：2
> 
> 时间：2012-11-08T10:02:18.817
> 
> 标签：magento

是否可以在 magento 中进行职责分离（SOD）？例如，一个用户只能搜索产品并将其放入购物车，而另一个用户只能批准订单并继续付款流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:52:54.117

一种“内置”方法是让第一批用户搜索和订购，但将订单置于待审核状态。对于第二个用户，可以创建一个仅限于批准订单的后端用户。但是，您的客户将可以访问您的部分后端。

在自己的模块中，您可以在前端提供此批准。

# c# - 检查 INSERT 上的 SQL 引用约束，但不检查 DELETE

> ID：13286714
> 
> 赞同：0
> 
> 时间：2012-11-08T10:02:20.487
> 
> 标签：c#, sql, entity-framework

我的数据库中有一个 Logs 表，用于存储用户操作的记录。有一个 UserID 列，它是用户表的外键，用于在添加日志时检查 UserID 是否存在。但是，尝试删除用户会导致约束失败，因为它会在 Logs 表中留下一个不再存在于 Users 表中的 UserID。从日志中删除有问题的行不是一种选择，因为关键是要有持久的记录（这样我们基本上可以找出谁破坏了什么），所以删除该用户的所有操作反而违背了目的。

是否有一种简单的方法可以在插入新日志时检查约束（以确保用户当时存在）但在删除用户时不检查？我通过 LINQ 访问数据库，所以我的查询是在 C# 中，而不是 SQL，所以任何需要它的东西都出来了，但是我可以通过 MS SQL Server Management Studio 访问数据库，所以我可以用它做我喜欢的事情.

编辑稍作澄清：知道谁采取了行动的价值不仅在于问责制；它有助于确定问题是用户特定的、组织特定的还是系统范围的，这可以大大缩小可能原因的范围。一旦用户被删除，仍然值得保留他们的操作，并且出于各种原因了解该用户执行了哪些操作仍然很有用 - 例如，当追踪由一个用户执行某种特定组合的事情引起的问题时（例如. 两个动作分开很好，但当一个紧跟着另一个时会导致错误）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:11:09.253

如果你真的想保留日志，你永远不应该完全删除用户。

与其删除用户记录，不如更改其状态以指示它已被删除，这样您的数据库仍然具有引用完整性。

或者，打开级联删除，这样当您删除用户时，所有日志都会同时被删除，这是维护参照完整性的另一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:19:16.623

您可以使您的日志表主键（复合键）独立于用户 ID。更改索引 Logs 表的方式可以解决此问题。还要确保没有级联删除。

坦率地说，如果一个用户被永远删除，知道谁破坏了什么有什么用？除非你打算永远困扰那个人，或者永远不要让那个用户参与你的库存......；）

否则，如果该用户从系统中删除，您可以限制该用户的日志的搜索能力，如果这对您来说是一个有效的选项。

但是，保留一个至少包含 UserID 和 Name 的简单表根本不是一个坏主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:49:27.113

如果你想知道谁打破了什么？对于已删除的记录，然后您可以在用户表中创建一个“Isactive”列作为位数据类型。在用户删除时，您可以将位值更改为“0”，而不是删除记录。用户创建时将该字段设置为 1。是场景的唯一选项。

希望这可以帮助

# c++ - C++/CX 中 ^ 变量的含义

> ID：13286715
> 
> 赞同：7
> 
> 时间：2012-11-08T10:02:21.903
> 
> 标签：c++, windows-runtime, c++-cx

在多年缺席支持 C# 之后，我刚刚回到 C++ 为 Windows 8/RT 的游戏相关项目。

在使用生成的 Game Project Skeleton 时，我偶然发现了如下所示的方法签名。谁能告诉我 ^ 应该做什么？

```
Concurrency::task<Platform::Array<byte>^> ReadDataAsync(Platform::String^ filename) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T16:48:58.713

在 C++/CX 中，a`T^`是`T`对象的句柄。它实际上是一个智能指针，拥有对指向对象的引用，编译器提供了一些额外的额外功能。

您可以在[“戴帽子的类型”一文中找到有关帽子的所有信息。](http://blogs.msdn.com/b/vcblog/archive/2012/09/17/cxxcxpart02typesthatwearhats.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T10:41:35.750

显然它被称为对象句柄操作符。

> 对象句柄运算符 ^ 被称为“帽子”，基本上是 C++ 智能指针。当最后一个帽子超出范围或明确设置为 nullptr 时，它指向的内存会自动销毁。

根据：[https](https://msdn.microsoft.com/en-us/library/hh699870.aspx) ://msdn.microsoft.com/en-us/library/hh699870.aspx 。（来自该页面的“内存管理”部分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T10:18:09.340

`^`符号是对象的句柄。

例如 `String^ s;`，声明一个“字符串”对象的句柄。

[http://en.wikipedia.org/wiki/C%2B%2B/CLI#Handles](http://en.wikipedia.org/wiki/C%2B%2B/CLI#Handles)

# php - FOSRestBundle 的 REST 服务

> ID：13286716
> 
> 赞同：0
> 
> 时间：2012-11-08T10:02:23.843
> 
> 标签：php, symfony, fosrestbundle

我正在将 FOSRestBundle 用于 REST 服务。它的工作正常。如何为实体设置 NewAction、UpdateAction、EditAction 和 DeleteAction 的服务..？我没有从 github 的文档中得到任何想法。请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:49:55.153

我认为这不是任何剩余的生成器。但是您可以阅读以下链接：

[FOSRestBundle，似乎无法弄清楚如何使 JSON 和 HTML 一起工作](https://stackoverflow.com/questions/12013213/fosrestbundle-cant-seem-to-figure-out-how-to-make-json-and-html-work-all-toget)

[http://blog.dsyph3r.com/2011/10/connect-rest-with-symfony2.html](http://blog.dsyph3r.com/2011/10/connect-rest-with-symfony2.html)

# php - 如何在 postgresql 查询中使用 php 变量

> ID：13286725
> 
> 赞同：1
> 
> 时间：2012-11-08T10:02:46.207
> 
> 标签：php, sql, postgresql

我有两个 php 变量，一个整数和另一个 json，我将它们转换为字符串变量，然后将它们插入到 postgresql 数据库中。

将整数转换为字符串变量：

```
$string1 = (string)$integer; 
```

将 json 从 facebook api 转换为字符串变量：

```
$string2 = json_encode($json); 
```

现在，我必须将这两个字符串变量插入到 postgres 数据库中：

```
$query = "INSERT INTO interests VALUES(". $string1 ." ," . $string2 .")"; 
pg_query($con, $query) or die("Cannot execute query: $query\n"); 
```

这是行不通的。我已经尝试了很多解决方案，但仍然无法正常工作。

我将函数更改为插入数据库

```
function push_interests(){
$id = $facebook->getUser();
$int = $facebook->api('/me/interests');     
$host = "hostname"; 
$user = "user"; 
$pass = "password"; 
$db = "database"; 

$con = pg_connect("host=$host dbname=$db user=$user password=$pass")
    or die ("Could not connect to server\n"); 

$id = (string)$id;
$int = json_encode($int);

$sql = "INSERT INTO interests VALUES($1,$2)"; 
pg_prepare($con,'my_insert', $sql) or die ("Cannot prepare statement1\n") ;
pg_execute($con,'my_insert', array($id,$int)) or die ("Cannot execute statement1\n");

pg_close($con); 

} 
```

输出是：无法执行语句 1 我创建了如下数据库：

```
$query = "DROP TABLE IF EXISTS interests"; 
pg_query($con, $query) or die("Cannot execute query: $query\n");

$query = "CREATE TABLE interests(id VARCHAR(25) PRIMARY KEY, interests VARCHAR(500))";  
pg_query($con, $query) or die("Cannot execute query: $query\n"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:09:53.130

因为字符串需要用简单的引号括起来。我强烈建议您使用准备好的语句来忽略此类问题并确保正确的变量转义以防止您的应用程序通过 SQL 注入被黑客入侵。

```
$sql = "INSERT INTO interests VALUES ($1, $2)";
$result = pg_prepare($con, 'my_insert', $sql);
$result = pg_execute($con, 'my_insert', array($string1, $string2)); 
```

见[http://php.net/manual/en/function.pg-prepare.php](http://php.net/manual/en/function.pg-prepare.php)

编辑：这是我测试过的实际代码：

```
<?php

$con = pg_connect('')
    or die ("Could not connect to server\n"); 

$id = (string) 5;
$int = json_encode(array('pika' => 'chu', 'plop' => array(1, 2, 3)));

$query = "CREATE TABLE interests(id VARCHAR(25) PRIMARY KEY, interests VARCHAR(500))";
pg_query($query) or die('creating table failed.');

$sql = "INSERT INTO interests (id, interests) VALUES ($1, $2)";
pg_prepare('my_query', $sql);
pg_execute('my_query', array($id, $int)) or die("Error while inserting."); 
```

# iis - SGML::Parser::OpenSP - 打开 Jade Nightmare

> ID：13286729
> 
> 赞同：9
> 
> 时间：2012-11-08T10:03:05.880
> 
> 标签：iis, w3c, w3c-validation

我正在尝试安装 W3C 验证器（本地副本）并且我已经设法安装 Perl 及其所有模块，除了`SGML::Parser::OpenSP`

我遇到的问题是显然我需要 OpenSP 或 OpenJade，并且我已经下载了这两者的源代码，但我无法编译它。

我在用着

> 视窗 7 x64
> 
> IIS 7.5
> 
> 活动 Perl 5.16.1
> 
> 通过 CPAN 安装模块

**我在寻求什么帮助？**

我如何/在哪里可以获得 OpenSP 或 OpenJade 的工作编译，或者在没有它的情况下安装 SGML？

（编辑）

我使用的指南：http: [//validator.w3.org/docs/install_win.html](http://validator.w3.org/docs/install_win.html)

你的帮助会比你想象的更感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-10T22:12:02.973

二进制文件似乎在这里可用：

[http://sourceforge.net/projects/openjade/files/latest/download?source=files](http://sourceforge.net/projects/openjade/files/latest/download?source=files)

OpenSP-1.5.2-wn32.zip 包中有一个onsgmls.exe。

# java - 函数将从哪里继承，为什么？

> ID：13286730
> 
> 赞同：-1
> 
> 时间：2012-11-08T10:03:12.870
> 
> 标签：java, inheritance

假设我们有一个类实现接口扩展抽象类，在接口和抽象类中具有相同的抽象功能。然后类继承哪个函数接口或抽象类以及为什么。

喜欢：

```
public class A extends B implements I
{
    public void set()
    {
         // Some code here
    }
} 
```

界面：

```
public interface I {
    public void set();
} 
```

抽象类：

```
 public abstract class B
 {
      public abstract void set();    
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:07:55.923

两个都。只要函数签名匹配，编译器就会接受这种“双重”继承。请记住，实现接口的方法只是您的类必须验证可编译的“合同”。实现接口只意味着“我的具体类必须有一个方法 set()”。扩展抽象类 B 意味着“我的具体类从其超类继承方法 set()，并且由于它被定义为抽象，因此需要实现它”。当这两个命题都匹配时（根据您的示例），一切都很好。

如果接口和抽象类之间的函数签名存在差异，那么您的具体类必须实现这两个版本。

顺便说一句，稍微偏离主题，尽量避免使用抽象类。如果抽象类只有抽象方法，那么它应该是一个接口。如果它的某些方法中有一些代码，那么您可能应该考虑重构它以使用组合而不是继承。继承是邪恶的；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:12:13.577

知道从哪个方法继承并不重要，因为方法`Interface`和`Abstract`类中的方法都`abstract`意味着没有给出实现。

因此，您必须确保在具体类中您必须`implement`在接口中定义但未在抽象类中实现的所有方法。并实现其超类中定义的所有抽象方法（即使它们未在接口中定义）（来自 Guillaume）

# linux - 查找、舍入和开始

> ID：13286740
> 
> 赞同：3
> 
> 时间：2012-11-08T10:03:48.933
> 
> 标签：linux, unix, gnu-coreutils

假设创建一个文件如下：

```
$ touch -d "00:00:00 today" stamp 
```

为什么下面的命令找不到呢？

```
$ find -type f -daystart -mtime 0 
```

以下命令确实找到了这个文件

```
$ find -type f -daystart -mtime -1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:08:11.763

它看起来像一个错误。如果你添加一个非零时间的文件，比如说

> $ touch -d "00:00:00.01 today" 戳

它可以按您的预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-07T22:39:57.830

从我自己的实验来看，Joakim 是对的——至少对于 mmin 而言。从明天开始，daystart 似乎是相对的。

```
ls -l stamp*
-rw-r--r-- 1 me me 0 Jun  7 00:01 stamp
-rw-r--r-- 1 me me 0 Jun  7 16:38 stamp2
-rw-r--r-- 1 me me 0 Jun  7 16:55 stamp3 
```

注意 stamp3 在 16:55 的位置

60*16 + 55 = 1015

1440（一天）- 1015 = 425

```
find . -type f -daystart -mmin -425
./stamp3 
```

让我们也赶上stamp2

1440 - 60*16 - 38 = 442

```
find . -type f -daystart -mmin -442
./stamp2
./stamp3 
```

现在，如果我想从一段时间内捕获文件，我可以执行以下操作：

```
find . -type f -daystart -mmin -1439 -mmin +425
./stamp2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:34:45.187

看起来（至少在我的机器上）`find -daystart`实际上搜索相对于明天的开始。

当我运行时，我找到了该文件`find -daystart -mtime 1`以及`find -daystart -mmin -1441` (60*24=1440) 但不是`find -daystart -mmin -1440`. 我实际上也可以使用与 1441 的完全匹配来找到它，`find -daystart -mmin 1441`

# r - 如果 rbind.fill 总是返回 null，我如何将我的列表变成数据框？

> ID：13286741
> 
> 赞同：2
> 
> 时间：2012-11-08T07:12:56.053
> 
> 标签：r, dataframe

我有这个清单：

```
myList<-list(c("Developmental Biology", " Neuroscience", " Cell Biology"
), c("Developmental Biology", " Neuroscience", " Cell Biology"
), c("Developmental Biology", " Neuroscience", " Genomics & Genetics"
), c("Developmental Biology", " Neuroscience", " Cell Biology"
), c("Developmental Biology", " Neuroscience", " Cell Biology"
), c("Developmental Biology", " Genomics & Genetics")) 
```

我想要这个数据框：

```
 [,1]                    [,2]                   [,3]                   
[1,] "Developmental Biology" " Neuroscience"        " Cell Biology"        
[2,] "Developmental Biology" " Neuroscience"        " Cell Biology"        
[3,] "Developmental Biology" " Neuroscience"        " Genomics & Genetics" 
[4,] "Developmental Biology" " Neuroscience"        " Cell Biology"        
[5,] "Developmental Biology" " Neuroscience"        " Cell Biology"        
[6,] "Developmental Biology" " Genomics & Genetics" "NA" 
```

我原以为 rbind.fill 将是要走的路，但`do.call(rbind.fill,myList)`返回`NULL`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:53:33.950

该函数`rbind.fill`只能合并数据帧。但是列表中的元素`myList`是字符向量。在使用之前需要将它们转换为数据帧`rbind.fill`。

这可以解决问题：

```
library(plyr)
rbind.fill(lapply(myList, function(x) as.data.frame(t(as.matrix(x)))))

#                      V1                   V2                   V3
# 1 Developmental Biology         Neuroscience         Cell Biology
# 2 Developmental Biology         Neuroscience         Cell Biology
# 3 Developmental Biology         Neuroscience  Genomics & Genetics
# 4 Developmental Biology         Neuroscience         Cell Biology
# 5 Developmental Biology         Neuroscience         Cell Biology
# 6 Developmental Biology  Genomics & Genetics                 <NA> 
```

# java - 测量 Spring RestTemplate HTTP 请求时间

> ID：13286743
> 
> 赞同：10
> 
> 时间：2012-11-08T10:04:00.777
> 
> 标签：java, performance, web-services, spring, http

我想测量一个`RestTemplate.getForObject`调用的 HTTP GET 请求的时间，而不需要解析响应所需的时间。所以只是远程HTTP调用需要的时间。我已经尝试设置 a`ClientHttpRequestInterceptor`但我认为这不是正确的方法，因为时间似乎是错误的：

```
public class PerfRequestSyncInterceptor implements ClientHttpRequestInterceptor {
private Logger log = Logger.getLogger(this.getClass());

@Override
  public ClientHttpResponse intercept(HttpRequest request, byte[] body,
        ClientHttpRequestExecution execution) throws IOException {

    long start = System.nanoTime();
    ClientHttpResponse resp = execution.execute(request, body);

    log.debug("remote request time: "
            + ((System.nanoTime() - start) * Math.pow(10, -9)));
    return resp;
  }
} 
```

称呼：

```
RestTemplate rest = new RestTemplate();
List<ClientHttpRequestInterceptor> interceptors = new ArrayList<ClientHttpRequestInterceptor>();
interceptors.add(new PerfRequestSyncInterceptor());
rest.setInterceptors(interceptors);

Response inob = rest.getForObject(xmlURL, Response.class); 
```

如何测量 RestTemplate HTTP 请求的时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:12:46.450

您可以使用 AOP 和 Spring 内置的 PerformanceMonitorInterceptor。您需要正确定义要拦截哪些类的哪些方法，然后才能测量。你可以像这样配置它：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans      
        http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
        http://www.springframework.org/schema/aop   
        http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">
    <bean id="springMonitoredService"
        class="com.myorg.service.springmon.MyServiceSpringImpl"/>

    <bean id="springMonitoringAspectInterceptor"        
class="org.springframework.aop.interceptor.PerformanceMonitorInterceptor">
        <property name="loggerName"     
                value="com.myorg.SPRING_MONITOR"/>      
    </bean>

    <aop:config>
            <aop:pointcut id="springMonitoringPointcut"
                   expression="execution(* java.net.HttpURLConnection.connect(..))"/>

                <aop:advisor pointcut-ref="springMonitoringPointcut" 
            advice-ref="springMonitoringAspectInterceptor"/>      
    </aop:config>

</beans> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-20T16:18:32.803

您可以使用秒表来做到这一点。

```
public class PerfRequestSyncInterceptor implements ClientHttpRequestInterceptor {

    private final static Logger LOG = LoggerFactory.getLogger(PerfRequestSyncInterceptor.class);

    @Override
    public ClientHttpResponse intercept(HttpRequest hr, byte[] bytes, ClientHttpRequestExecution chre) throws IOException {
        StopWatch stopwatch = StopWatch.createStarted();
        ClientHttpResponse response = chre.execute(hr, bytes);
        stopwatch.stop();

        LOG.info("method=" + hr.getMethod() + ", uri="+hr.getURI() + ", response_time=" + stopwatch.elapsed(TimeUnit.MILLISECONDS) + ", response_code=" + response.getStatusCode().value());

        return response;
    }
} 
```

在实例化restTemplate的类中

```
private final List<ClientHttpRequestInterceptor> requestInterceptors = new ArrayList<>();
requestInterceptors.add(new PerfRequestSyncInterceptor());
this.restTemplate.setInterceptors(requestInterceptors); 
```

为 maven 添加 Stopwatch 依赖项：

```
<dependency>
  <groupId>com.google.guava</groupId>
  <artifactId>guava</artifactId>
  <version>r05</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-19T00:07:09.513

> 我想测量 RestTemplate.getForObject 调用的 HTTP GET 请求的时间，而不需要解析响应所需的时间

我有同样的要求。我想知道服务器响应时间来衡量服务器在没有任何 RestTemplate 响应处理的情况下响应需要多长时间。我用地图添加了两个拦截器，`HttpClientBuilder`这样我就可以测量低级请求和响应之间的时间。

```
HttpClientBuilder httpClientBuilder = HttpClientBuilder.create();

// Attach interceptors
ResponseTimeInterceptor interceptor = new ResponseTimeInterceptor();
httpClientBuilder.addInterceptorFirst( (HttpRequestInterceptor) interceptor );
httpClientBuilder.addInterceptorFirst( (HttpResponseInterceptor) interceptor );

// Use client with RestTemplate or on its own
HttpClient client = httpClientBuilder.build(); 
```

这是最小的双重任务拦截器：

```
public class ResponseTimeInterceptor implements HttpRequestInterceptor, HttpResponseInterceptor {
    private final Map<HttpContext, Long> requestMap = new MaxSizeHashMap<>( 50 );

    @Override
    public void process( HttpRequest httpRequest, HttpContext httpContext ) throws HttpException, IOException {
        requestMap.put( httpContext, System.currentTimeMillis() );
    }

    @Override
    public void process( HttpResponse httpResponse, HttpContext httpContext ) throws HttpException, IOException {
        long startTime = requestMap.getOrDefault( httpContext, 0L );
        long diff = System.currentTimeMillis() - startTime;
        System.out.println( "Response time: " + diff + "ms" );
    }
} 
```

响应拦截器返回后，响应数据继续进入 RestTemplate 响应处理程序。

注意：`MaxSizeHashMap`取自[https://stackoverflow.com/a/5601377](https://stackoverflow.com/a/5601377)。

# html - css：避免图像悬停第一次闪烁

> ID：13286745
> 
> 赞同：70
> 
> 时间：2012-11-08T10:04:05.577
> 
> 标签：html, css, image, hover

我有一个锚点，当悬停在一个`class-btn`包含`background-image`.

悬停时，它有

```
a.class-btn:hover
{
    background-image('path/to/image-hovered.jpg');
} 
```

当页面第一次加载并且您第一次悬停此按钮时，它会闪烁（下载悬停的图像大约需要半秒钟）。如何在没有 JavaScript 的情况下避免闪烁（只允许简单的 css 和 html）？

我试图在 Stack Overflow 上搜索类似的问题，但没有运气。

刚刚添加：

*   我应该“预加载”悬停的图像吗？如何？
*   我应该使用 z-index 还是 opacity？

它发生在所有浏览器上，因此该解决方案应该适用于所有浏览器。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2015-07-06T08:11:26.460

这是我用过几次的简单有效的css图像预加载技术。您可以通过放置内容来加载多个图像： url() url() url()... 等。

```
body:after {
 display: none;
 content: url('path/to/image-hovered.jpg') url('path/to/another-image-hovered.jpg');
} 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-11-08T10:06:33.533

避免这种情况的最简单方法是使用图像精灵。要获得良好的概述，请查看[这篇 CSS 技巧文章](http://css-tricks.com/css-sprites/)。

这样，您不仅可以解决您看到的闪烁问题，还可以减少 HTTP 请求的数量。您的 CSS 将类似于：

```
a.class-btn { background: url('path/to/image.jpg') 0 0 no-repeat; }
a.class-btn:hover { background-position: 0 -40px; } 
```

具体情况取决于您的图像。您还可以使用在线[精灵生成器](http://draeton.github.com/stitches/)来简化该过程。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-03-20T12:30:48.750

我使用的一个简单技巧是将原始背景图像加倍，确保将悬停的图像放在首位

```
.next {
  background: url(../images/next-hover.png) center center no-repeat;
  background: url(../images/next.png) center center no-repeat;
    &:hover{
      background: url(../images/next-hover.png) center center no-repeat;
    }
 } 
```

没有性能影响，非常简单

或者，如果您还没有使用 SCSS：

```
.next {
  background: url(../images/next-hover.png) center center no-repeat;
  background: url(../images/next.png) center center no-repeat;        
 }
 .next:hover{
  background: url(../images/next-hover.png) center center no-repeat;
 } 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-09-24T08:34:13.133

如果你这样做：

```
#the-button {
background-image: url('images/img.gif');
}
#the-button:before {
  content: url('images/animated-img.gif');
  width:0;
  height:0;
  visibility:hidden;
}

#the-button:hover {
  background-image: url('images/animated-img.gif');
} 
```

这真的很有帮助！

看这里：

[http://particle-in-a-box.com/blog-post/pre-load-hover-images-css-only](http://particle-in-a-box.com/blog-post/pre-load-hover-images-css-only)

PS - 不是我的工作，而是我找到的解决方案:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-26T07:55:00.310

@Kristian 在正文后应用隐藏的“内容：url()”的方法似乎在 Firefox 48.0 (OS X) 中不起作用。

但是，更改“显示：无；” 类似于：

```
body:after {
 position: absolute; overflow: hidden; left: -50000px;
 content: url(/path/to/picture-1.jpg) url(/path/to/picture-2.jpg);
} 
```

...为我做了诀窍。也许 Firefox 不会加载隐藏图像，或者它可能与渲染有关（？）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-08T10:07:54.050

您可以预加载图像

```
function preloadImages(srcs, imgs, callback) {
var img;
var remaining = srcs.length;
for (var i = 0; i < srcs.length; i++) {
    img = new Image();
    img.onload = function() {
        --remaining;
        if (remaining <= 0) {
            callback();
        }
    };
    img.src = srcs[i];
    imgs.push(img);
}
}
// then to call it, you would use this
var imageSrcs = ["src1", "src2", "src3", "src4"];
var images = [];
preloadImages(imageSrcs, images, myFunction); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-04-29T11:36:00.037

这是一个非 CSS 解决方案：如果悬停图像位于一个目录中并且具有通用命名约定，例如包含子字符串 '-on.'，则可以选择文件名并将其作为 HTML系列：

```
<img src='...' style='display: none' /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-11T14:53:12.303

“将原始背景图像加倍”技巧对我不起作用，所以我使用了另一个 css 技巧：

```
.next {
    background: url(../images/next.png) center center no-repeat;        
}
.next:hover {
    background: url(../images/next-hover.png) center center no-repeat;
}
.next:after {
    content: url(../images/next-hover.png);
    display: none;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-08T10:07:48.687

如果它们的尺寸相同，一种可能性是直接在彼此的顶部绘制两个图像，`:hover`顶部图像的 CSS 类具有`display: none;`

这样，两个图像都将被预加载，但悬停将使第二个可见。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-24T21:12:30.417

我遇到过同样的问题。在尝试了与 css 相关的所有内容后，我无法解决问题。最终解决问题的是模拟有人悬停该元素。css是正常的。

CSS

```
#elemName{
 /* ... */
} 
#elemName:hover{
 /* change bg image */
} 
```

JS

```
var element = document.getElementById('elemName');
var event = new MouseEvent('mouseover', {
  'view': window,
  'bubbles': true,
  'cancelable': true
});
element.dispatchEvent(event); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-22T15:56:24.070

这种技术对我来说效果很好，不仅可以确保预加载悬停图像，而且还可以准备好等待显示。（大多数其他解决方案依赖于在悬停时切换背景图像，这似乎需要浏览器一点时间来弄清楚，无论图像预加载多少。）

使用两个图像在容器上创建 :before 和 :after 伪元素，但隐藏您希望在悬停时看到的那个。然后，在悬停时，切换可见性。

只要它们共享相同的大小和定位规则，您应该会看到一个整齐的交换。

```
.image-container {
    &:before { display: block; background-image: url(uncovered.png); }
    &:after { display: none; background-image: url(uncovered.png); }
}
.image-container:hover {
    &:before { display: none; }
    &:after { display: block; }
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-11-08T10:09:04.447

只需更改背景图像的大小，而不是它的来源！所以...

```
a.class-btn {
    background-image: url('path/to/image-hovered.jpg');
    background-size: 0;
}
a.class-btn:hover {
    background-size: auto;
} 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2013-08-17T05:26:33.743

最好的方法是将图像插入网页并将显示设置为无。

# matlab - 无法在 MATLAB 中求解以下方程

> ID：13286747
> 
> 赞同：-5
> 
> 时间：2012-11-08T10:04:08.703
> 
> 标签：matlab, linear-equation

下面是我在matlab中写的一段代码，这里我要进行如下简单的数学运算[A][X]=[B]，其中[X]是未知的。在我的情况下，我的 k 长度约为 1600000。所以我想要的只是获取数组中每个元素的 g1、g2 和 g3 的值。我试过以下

```
k31 = omega3./(d)      
k32 = omega3_2./(d)    
A   = [2,1,5;-2,-1,-5];    
X   = [g1;g2;g3];

for ii = 1:length(k31)    
    B = [k31(ii); k32(ii)];    
    X = pinv(A).*B;    
end

display(g1,g2,g3) 
```

我正在使用伪逆，所以基本上我可以为每个 X 找到一个解决方案，并且我在那里进行了一些编辑......并且 x 是未知的，在数学上它可以完成，但我无法对其进行编码

另外我如何用 x 和 y 绘制 g1 g2 g3 的值，如下 scatter(x(1:end-1), y(1:end-1), 5, g1); scatter(x(1:end-1), y(1:end-1), 5, g2) 和 scatter(x(1:end-1), y(1:end-1), 5, g3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:21:56.747

我必须在这里做一些假设，所以请耐心等待。

我怀疑你想这样做：

```
k31 = omega3./(d)      
k32 = omega3_2./(d)    
A   = [2,1,5;-2,-1,-5];    

X = cell(length(k31),1);
for ii = 1:length(k31)            
    X{ii} = A\[k31(ii); k32(ii)];    
end 
```

它使用反斜杠运算符而不是`inv`or `pinv`。键入`help slash`以获取更多信息。

反斜杠运算符通常比`inv`or更快、更准确`pinv`。它也更加灵活——你的情况是不确定的（你比能够显式求解的方程少 1 个），在这种情况下，反斜杠运算符将为你找到一个最小二乘解。

请注意我如何将所有结果保存在[cell-array](http://www.mathworks.nl/help/matlab/cell-arrays.html) `X`中。这意味着第*n*^个解决方案将可以通过

```
X{n}    % == [g1(n) g2(n) g3(n)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:46:02.190

在我看来，你最好从奇异值分解中创建一个伪逆。Moore-Penrose 伪逆会起作用，但我认为它有时会给出一些奇怪的结果。最小二乘可能不稳定，特别是因为您的示例矩阵的秩不满。

还; 不要为每次迭代计算逆！

这是一个示例，其中处理了 A 的秩不足：

```
A   = [2,1,5;-2,-1,-5];

% pseudo inverse of A
[m,n]   = size(A);
% get SVD
[U,S,V] = svd(A);
% check rank
r       = rank(S);
SR      = S(1:r,1:r);
% make complete if rank is not full
SRc     = [SR^-1 zeros(r,m-r);zeros(n-r,r) zeros(n-r,m-r)];
% create inverse
A_inv   = V*SRc*U.';

X=[];    
for i = 1:1600
    % this actually takes most of the time
    k31 = rand(1000, 1);
    k32 = rand(1000, 1);
    B   = [k31';k32'];
    % X is overwritten on every loop...
    X   = [X A_inv*B];
end

N_xy = 1000;
x    = rand(N_xy,1);
y    = rand(N_xy,1);
g1   = X(1,1:N_xy);

figure(1), clf
scatter(x,y,5,g1) 
```

我没有绘制所有 1600000 点，因为那不是你想要的

# matlab - 两个卷积滤波器的组合

> ID：13286752
> 
> 赞同：4
> 
> 时间：2012-11-08T10:04:18.517
> 
> 标签：matlab, convolution

一个滤波器矩阵相当于使用带有参数“full”的 imfilter 在图像上应用 [1 1 1] 两次？它仍然是一个 1x3 矩阵吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T10:21:02.290

卷积是关联的，这意味着`(f*g)*h = f*(g*h)`. 所以而不是

```
r = conv(conv(x, [1,1,1]), [1,1,1]) 
```

您可以预先计算两个过滤器的卷积，然后将其仅应用于每个图像一次：

```
tmp_filter = conv([1,1,1], [1,1,1]);
...
r1 = conv(x1, tmp_filter)
r2 = conv(x2, tmp_filter) 
```

其中新过滤器是`[1 2 3 2 1]`，但是与原始过滤器的大小不同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T10:07:36.987

该`full`参数告诉`filter`函数返回与过滤后的图像大小相同的图像。您可以多次应用相同的过滤器，但如果您`full`每次都使用，大小不应改变。

# xpages - 具有 Kerberos 身份验证和 XPages 的 Lotus Domino 服务器

> ID：13286756
> 
> 赞同：1
> 
> 时间：2012-11-08T10:04:25.237
> 
> 标签：xpages, lotus-domino, ltpa

真的很奇怪的身份验证问题正在发生 - 希望有人能提供帮助！

Domino Web 服务器日志数据库显示了特定用户对我所管理的应用程序中的页面所做的所有请求。该应用程序是基于 XPages 的，用户经常在她正在编辑的文档上按保存（每隔几分钟）。保存会进行完整更新。

LTPA 令牌的有效期为 30 分钟 - 但是我假设每次用户执行完全更新时，都会更新 30 分钟的令牌？

但是，在查看日志时，09:05 的文档保存按名称显示远程用户，09:07 的另一个保存仍然按名称显示用户。09:11 的下一次保存显示了远程用户的 IP 地址，当您更详细地查看日志条目时，服务器已回复 401 UNAUTHORIZED（客户端无权访问数据）。这当然会导致用户的浏览器丢失他们当时打开的工作。

每个日志条目上的 Cookie 显示：

LtpaToken=AAECAzUwOUI2RjRCNTA5Qjc2NTNDTj1Bbm5lIExhdm91ZS9PVT1VSy9PPVJVSyvsCs5c4tITD9elgI0BCN5CnZ0O；会话 ID=DBDFDKDGTI

相同的 LTPA 令牌和会话 ID 用于保存文档工作的条目以及失败的条目。

不出所料，他们随后通过关闭网页并在出现错误后返回到它来刷新会话，并且他们获得了新的 LTPA 令牌和会话 ID。

我提到的 30 分钟的 LTPA 令牌有效期设置是由我们的管理员在 NAB 的“服务器\Internet 站点”视图中的服务器 Web SSO 配置文档中定义的。这是令牌到期（分钟）设置。我是否完全误解了这个设置 - 每次用户完全提交到服务器时是否应该更新超时？还是这里发生了其他事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:25:33.170

我不认为令牌被更新。无论用户是否处于活动状态，它都会超时。

您可以将过期超时增加到合理的高值，然后添加较低的最小超时以确保会话不会过早超时。

这是一个示例，其中过期设置非常高，超时设置为 2 小时： ![在此处输入图像描述](../Images/867f867a180d93b8dd88df6afb89ef91.png)

# dynamic - 如何在 OpenERP 中使域动态化

> ID：13286757
> 
> 赞同：3
> 
> 时间：2012-11-08T10:04:29.387
> 
> 标签：dynamic, openerp

我想在.py 的视图或字段定义中给出一个动态域方程。

像

```
<field name="product_id" domain="[('name','in',get_names)]"/> 
```

product_id 是一个 many2one 字段。

get_names 是在运行时创建列表的函数。

它显示错误 - “名称'get_names'未定义”

有任何想法吗。

我也尝试过以下方法。

```
'product_id': fields.many2one('mymodule.relation.model','Title',selection=get_names) 
```

这将显示 mymodule.relation.model 中的所有条目。它唯一要做的就是验证用户选择/提交的值是否属于“get_names”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:14:19.447

继承 fields_view_get() 函数并管理域条件。请检查这些帖子

1.  [如何在 OpenERP 上创建动态视图](https://stackoverflow.com/questions/6569828/how-to-create-a-dynamic-view-on-openerp/6731739#6731739)
2.  [如何根据其他字段值更改 OpenERP 选择字段中的选项？](https://stackoverflow.com/questions/8325315/how-can-i-change-the-choices-in-an-openerp-selection-field-based-on-other-field/10362861#10362861)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T09:00:03.260

1-您可以像这样使用函数字段：

```
def _get_domain(self, cr, uid, ids, field_name, arg, context=None):
    record_id = ids[0] 
    # do some computations....
    return {record_id: YOUR DOMAIN} 
```

和功能领域：

```
'domain_field': fields.function(_get_domain, type='char', size=255, method=True, string="Domain"), 
```

并使用 xml 中的字段名称（域属性）：

```
<field name="product_id" domain="domain_field" /> 
```

2-您可以使用“fields_view_get”：

```
def fields_view_get(self, cr, uid, view_id=None, view_type='form', context=None, toolbar=False, submenu=False):
    res = super(taskmng_task, self).fields_view_get(cr, uid, view_id=view_id, view_type=view_type, context=context, toolbar=toolbar, submenu=submenu)
    doc = etree.XML(res['arch'])
    for node in doc.xpath("//field[@name='project_id']"):
        # do some computations....
        node.set('domain', YOUR DOMAIN)
    res['arch'] = etree.tostring(doc)
    return res 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:46:28.507

您不能在域表达式中使用函数或方法，只能使用对象字段。它不是等效的，但最接近的是创建一个函数字段以在域表达式中使用。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-08T10:48:40.330

由于不知道您的确切要求。但可能是这两个中的任何一个都可以帮助您

[http://ruchir-shukla.blogspot.in/2010/11/domains-value-depending-on-condition.html](http://ruchir-shukla.blogspot.in/2010/11/domains-value-depending-on-condition.html)

或查看 Account Invoice 产品 onchange 。您可以从 onchange 中返回域。

# php - Eclipse PDT 将项目名称添加到虚拟主机路径

> ID：13286758
> 
> 赞同：3
> 
> 时间：2012-11-08T10:04:43.307
> 
> 标签：php, eclipse, apache, xampp, xdebug

有人可以帮我吗。我在运行文件（例如 index.php）时遇到问题。每次我想在测试服务器 (XAMPP) 上运行文件时，Eclipse (PDT) 都会在服务器名称（例如 ）之后添加项目名称（例如 testproject `http://testproject.dev`）。因为我已经设置了一个虚拟主机设置来自动使用服务器上的特定路径（例如`http://testproject.dev`链接到`http://localhost/testproject`），所以这会产生问题。Eclipse 添加项目名称，然后 URL 变为`http://testproject.dev/testproject/index.php`.

这是我的配置：

XAMPP httpd.conf (c:\xampp\conf\httpd.conf)

```
# Virtual hosts
Include "conf/extra/httpd-vhosts.conf" 
```

httpd-vhosts.conf (c:\xampp\conf\extra\httpd-vhosts.conf)

```
NameVirtualHost 127.0.0.1

<VirtualHost 127.0.0.1>
DocumentRoot "C:/xampp/htdocs/testproject"
ServerName testproject.dev
</VirtualHost> 
```

Windows 7 Windows 虚拟主机文件 (C:\Windows\System32\drivers\etc\hosts)

```
127.0.0.1 testproject.dev 
```

Eclipse -> 首选项 -> PHP 服务器

*   选项卡“服务器”：名称：“Development_Server_Testproject” URL：`http://testproject.dev`

*   选项卡“路径映射”：服务器上的`http://testproject.dev`路径 工作空间中的路径

/测试项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T23:43:53.020

我对 Lamp 开发服务器也有同样的问题。
这看起来很荒谬，但我认为你的问题是关于 Eclipse 中没有显示所有信息的窗口的大小。

尝试这个：

*   在“路径映射”选项卡中删除您添加的行
*   转到 Eclipse 中的“调试配置”。在左侧，展开“PHP Web 配置”链接。
*   选择要用于项目的调试配置，如果尚未完成，请创建一个。
*   在下拉菜单中选择正确的 php 服务器。
*   在页面下有一个名为“自动生成”的 url 复选框。您必须取消选中它。
*   在复选框下有一个文本框来指定 url。如果您没有看到它，请调整“调试配置”窗口的大小！我花了很多时间寻找正确的选项，我发现问题只是窗口大小不足以显示它们！
*   现在，在文本框的第一部分，您将拥有[http://testproject.dev](http://testproject.dev)，在文本框的第二部分，您将拥有 /testproject/index.php。清除文本框。
*   你完成了！调试和享受。

希望这有帮助

Marco - Reteidee

# shelveset - 获取特定搁置集的代码审查状态

> ID：13286761
> 
> 赞同：1
> 
> 时间：2012-11-08T10:05:01.877
> 
> 标签：shelveset

我正在研究构建定义，我需要为特定搁置集提取代码审查状态。当我触发具有特定搁置集的新构建时，我需要检查该特定搁置集的代码审查状态是否已完成。请给我任何代码示例。

# java - 二进制除法java实现

> ID：13286763
> 
> 赞同：1
> 
> 时间：2012-11-08T10:05:03.937
> 
> 标签：java, binary, division

这可能是一个奇怪的问题，但我还没有发现任何二进制除法 java 实现浏览互联网。我会将它用于 CRC16 编码，因此转换为十进制不是解决方案。我理解纸上的方法，但我是初学者，因为它非常重要，我不想弄错。我唯一发现的是 code.google.com 上使用二进制除法的 CRC.java，但即使我只使用除法部分（删除其他部分），我也没有得到理想的值。

任何人都可以向我展示它的java实现吗？我会非常感激！提前致谢

我发现的代码：

公共类 CRC { 私有字符串数据，除数；

```
public CRC(String d, String di) {
    this.data = d;
    this.divisor = di;
}
public String getRemainder(String data, String divisor) {
    int x = 1, z = divisor.length(), j = 0, i;
    String data2 = "", strOfZeros = "";
    int y = divisor.length() - 1;
    /* This is to get correct amount of zero's onto the end of the data */
    while (y > 0) {
        data += "0";
        y--;
    }
    // Main part of method, this is the long division of Binary numbers.
    needToExit: for (i = x, j = 1; i < z && z <= data.length(); i++, j++) {
        if (z == data.length() && data2.charAt(0) == '1') {
            strOfZeros = "";
            for (i = 1; i < divisor.length(); i++) {    
                if (data2.charAt(i) == divisor.charAt(i))
                    strOfZeros += '0';
                else
                    strOfZeros += '1';
            }
            data2 = strOfZeros;
            break needToExit;
        }

        if (data.charAt(i) == divisor.charAt(j))
            data2 += "0";
        else
            data2 += "1";

        if (i == divisor.length() - 1) {
            data2 += data.charAt(z);
            x++;
            z++;
            // i = x;
            j = 0;

            // when first bit is a 0
            while (data2.charAt(0) != '1' && i == divisor.length() - 1) {
                for (i = 1; i < divisor.length(); i++) {
                    if (data2.charAt(i) == '0')
                        strOfZeros += "0";
                    else
                        strOfZeros += "1";
                }
                strOfZeros += data.charAt(z);
                data2 = strOfZeros;
                strOfZeros = "";
                x++;
                z++;
                i = x;
            }
        }

    }
    return data2;
}
public String getDataPlusCRC(String data){
    String str = data.concat(getRemainder(this.data, this.divisor));
    return str;
} 
```

}

`getRemainder()`当我尝试除以数字时，该方法给了我一个糟糕的结果。而这部分不是必需的，因为它需要CRC。

```
while (y > 0) {
            data += "0";
            y--;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:12:14.530

BigInteger 可以做以 2 为底的除法；

```
 BigInteger divisor = new BigInteger("10", 2);
    BigInteger dividend = new BigInteger("100", 2);
    BigInteger result = dividend.divide(divisor);

    System.out.println(result.toString(2)); 
```

# iphone - 如何在 iphone 中检测来自麦克风而不是语音的打击？

> ID：13286768
> 
> 赞同：5
> 
> 时间：2012-11-08T10:05:17.037
> 
> 标签：iphone, objective-c, ipad

我正在使用此代码来检测打击。

但我不能得到打击。我有声音了。

```
 NSURL *url = [NSURL fileURLWithPath:@"/dev/null"];
NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:

                          [NSNumber numberWithFloat: 44100.0],                 AVSampleRateKey,
                          [NSNumber numberWithInt: kAudioFormatAppleLossless], AVFormatIDKey,
                          [NSNumber numberWithInt: 1],                         AVNumberOfChannelsKey,
                          [NSNumber numberWithInt: AVAudioQualityMax],         AVEncoderAudioQualityKey,
                          nil];

NSError *error;

recorder = [[AVAudioRecorder alloc] initWithURL:url settings:settings error:&error];

if (recorder) {
    [recorder prepareToRecord];
    recorder.meteringEnabled = YES;
    [recorder record];

    levelTimer = [NSTimer scheduledTimerWithTimeInterval: 0.3 target: self selector: @selector(levelTimerCallback:) userInfo: nil repeats: YES];
} else
    NSLog(@"error %@",[error description]); 
```

但得到的声音不吹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:15:45.493

You kind of have to play with the low pass results. Try this:

```
- (void)levelTimerCallback:(NSTimer *)timer {
    [recorder updateMeters];

    const double ALPHA = 0.05;
    double peakPowerForChannel = pow(10, (0.05 * [recorder peakPowerForChannel:0]));
    lowPassResults = ALPHA * peakPowerForChannel + (1.0 - ALPHA) * lowPassResults;  
    //NSLog(@"%f", lowPassResults);
    if (lowPassResults > 0.55)
        NSLog(@"Mic blow detected");
} 
```

# jsf-2 - 在 Mojarra TextRenderer 中修剪提交的值

> ID：13286772
> 
> 赞同：0
> 
> 时间：2012-11-08T10:05:33.380
> 
> 标签：jsf-2, facelets, renderer

我们有很多 XHTML 页面，每个页面都有一些`<h:inputText>`,`<h:inputSecret>`等.. 输入组件。

我正在尝试找到一种通用方法来在提交表单之前修剪所有这些值。

我实现了一个`TrimInputTextRenderer`类，

XHTML 页面：

```
<h:inputText value="#{userBean.emailAddress}" trim="true">
       <f:validator validatorId="emailAddressValidator"/>
</h:inputText> 
```

`TrimInputTextRenderer.java`：

```
package com.vyan.web.component;

import java.io.IOException;
import java.util.List;

import javax.faces.component.UIComponent;
import javax.faces.component.UIInput;
import javax.faces.component.UIOutput;
import javax.faces.context.FacesContext;
import javax.faces.render.FacesRenderer;

import com.sun.faces.renderkit.html_basic.TextRenderer;

@FacesRenderer(componentFamily="javax.faces.Input", rendererType="javax.faces.Text")
public class TrimInputTextRenderer extends TextRenderer {

    private void encodeBeginForChildren(FacesContext context, UIComponent component) {
            if (component instanceof UIInput) {
                component = (UIInput)component;
                String componentValue = ((UIOutput)component).getValue().toString();
                componentValue = (componentValue!=null)?componentValue.trim():componentValue;
                ((UIInput)component).setValue(componentValue);
            }

            // Encoding recursively all childrens.
            if (component.isRendered() && component.getChildCount() > 0)
                encodeBeginForChildrens(context, component.getChildren());

    }

    private void encodeBeginForChildrens(FacesContext context, List<UIComponent> children) {
        for (UIComponent comp : children) {
            if (comp instanceof UIInput) {
                comp = (UIInput) comp;
                ((UIInput) comp).setValue(((UIInput) comp).getValue()
                        .toString().trim());
            }

                    // Encoding recursively all childrens.
            if (comp.isRendered() && comp.getChildCount() > 0)
                encodeBeginForChildrens(context, comp.getChildren());
        }

    }

    @Override
    public void encodeBegin(FacesContext context, UIComponent component) throws IOException {
        String trimValue = (String) component.getAttributes().get("trim");
        if (trimValue!= null && Boolean.valueOf(trimValue)) {
            //super.write(string);
            encodeBeginForChildren(context, component);
        } 
        super.encodeBegin(context, component);
    }

} 
```

`faces-config.xml`：

```
<render-kit>
        <renderer>
            <component-family>javax.faces.Input</component-family>
            <renderer-type>javax.faces.Text</renderer-type>
            <renderer-class>com.vyan.web.component.TrimInputTextRenderer</renderer-class>
        </renderer>
    </render-kit> 
```

问题是，一切正常，自定义渲染器修剪值。但是我们需要验证器和托管 bean 中的组件值。`TrimInputTextRenderer#encodeBegin()`那些在方法方法调用之前被执行。所以在验证器和托管 bean 中，我们得到了未修剪的值。有没有办法在验证阶段之前执行它，还是我需要在某个地方实现这个逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:41:54.797

这个逻辑需要在`decode()`方法中实现，或者更简单，在`setSubmittedValue()`.

```
@Override
public void setSubmittedValue(UIComponent component, Object value) {
    if (value instanceof String) {
        value = ((String) value).trim();
    }

    super.setSubmittedValue(component, value);
} 
```

顺便说一下，这个特定于 Mojarra 的渲染器扩展的更简单且不依赖于实现的替代方案是`@FacesConverter(forClass=String)`.

# c# - 自定义 app.config 部分 C#

> ID：13286775
> 
> 赞同：1
> 
> 时间：2012-11-08T10:05:51.017
> 
> 标签：c#, wpf, configuration, settings

我对使用 app.config 有点迷失......我一直在使用 .ini 文件，但现在我想改变......这就是我的 .ini 的样子

```
[Clients]
1 = Client1
2 = Client 2
[Client1]
Employees = 4
1 = Employee1
2 = Employee2
3 = Employee3
4 = Employee4
[Client2]
Employees = 3
1 = Employee1
2 = Employee2
3 = Employee3 
```

然后我使用了一些 for 循环，首先我搜索 [Clients]，在那个 For client 中，我搜索它有多少员工，然后，对于每个员工我做的事情......

我怎样才能把这个.ini转换成这样的东西

```
<Clients>
 <name = "client1">
  <Employees>
    <name = "employee1" />
    <name = "employee2" />
    <name = "employee3" />
    <name = "employee4" />
  </Employees>
 <name = "client2">
  <Employees>
    <name = "employee1" />
    <name = "employee2" />
    <name = "employee3" />
  </Employees>
</Clients> 
```

然后使用该 app.config 执行循环操作

谢谢指教。

**更新** 我已经尝试过这个 linq to xml 代码

```
XDocument doc = new XDocument(
         new XDeclaration("1.0", "utf-8", "yes"),
         new XComment("Configuración Checkcenter"),
         new XElement("Entidad",
             new XAttribute("nombre",cmbEntidad.Text),
             new XElement("Servicios",
                 new XElement("nombre", cmbServicio.Text))));

    doc.Save("settings.xml"); 
```

它有效，返回给我：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!--My Settings-->
<Client name="Client1">
  <Employees>
    <name>Employee1</name>
  </Employees>
</Entidad> 
```

但它总是在员工中替换我的名字......如果它不存在，我该如何处理它来添加新项目？我的意思是，如果新项目不存在，则为客户添加新项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:09:19.853

为什么要使用 app.config？App.config 顾名思义应该用于存储配置设置。

最好的办法是使用 Xml 文档。这将使您的数据与配置设置分开。从 XML 文件读取后，您可以使用 Linq to XML 查询这些数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:34:33.733

正如其他人所说，这样的数据应该在易于使用的存储（即 DB、XML）上，但是，如果您必须为此使用 app.config 文件。您必须查看 System.Configuration.Configuration 部分。

[MSDN 链接](http://msdn.microsoft.com/en-us/library/2tw134k3%28v=vs.100%29.aspx)

专注于 ConfigurationSection、ConfigurationElement 和 ConfigurationElementCollection 类。

# apache - 我可以将服务器端重定向到子文件夹并保留原始链接的 url 参数吗？

> ID：13286778
> 
> 赞同：1
> 
> 时间：2012-11-08T10:05:55.587
> 
> 标签：apache, .htaccess, url, redirect, mod-alias

我需要将链接从外部页面重定向到应用程序到子文件夹中。

我的“旧”链接是这样的：

```
 https://www.somepage.com/index.cfm?id=abc 
```

我现在必须更改为：

```
 https://www.somepage.com/mem/index.cfm?id=abc 
```

虽然我通知所有用户更新他们的链接，但我确信我将不得不追一些一段时间，所以我的想法是尝试设置一个重定向服务器端。我不确定如何在重定向上保留 url 参数。这样的事情可能吗？

感谢您的一些见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:11:47.640

使用`QSA`(Query String Appended) 保留查询字符串。尝试 ：

```
RewriteEngine On
RewriteRule /index.cfm$ /mem/index.cfm [QSA,L] 
```

# .htaccess - .htaccess 将动态域重定向到文件夹

> ID：13286781
> 
> 赞同：0
> 
> 时间：2012-11-08T10:06:03.823
> 
> 标签：.htaccess, xampp, virtualhost

对于本地开发，我设置了我的路由器以将所有对 *.lan 的请求重定向到我的本地 xampp 服务器。现在我必须为我想使用的每个域设置虚拟主机。这可行，但我不想为每个项目设置一个新的虚拟主机（指向相应的文件夹）并重新启动 apache。

是否可以创建一个 .htaccess 文件来“捕获”一个域，并将其重写到文件夹中，这样我就可以使用域作为文件夹名称？例如：

example1.lan 加载位于 /example1/ 的网站

example2.lan 加载位于 /example2/ 的网站

这个步骤（[Apache - Domain for localhost to access folder as http://folder.local](https://stackoverflow.com/questions/12532263/apache-domain-for-localhost-to-access-folders-as-http-folder-local)）几乎做同样的事情，但有一个重定向。我不想要重定向，我想要重写。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:16:51.250

尝试将这些规则添加到文档根目录中的 htaccess 文件（example1 和 example2 目录所在的目录）：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(.*)\.lan$
RewriteCond %{REQUEST_URI} !^/%1/
RewriteRule ^(.*)$ /%1/$1 [L] 
```

# php - 如何在 PHP 中以随机顺序从现有的 mysql 数据库创建两个新列表，其中相同位置的元素不相等？

> ID：13286782
> 
> 赞同：1
> 
> 时间：2012-11-08T10:06:03.243
> 
> 标签：php, mysql, database, random

好的。让我们更清楚一点。

我想做的是以下几点：

我有一张这样的桌子...

```
    +---------+--------------------+------------------ --------+
    | 编号 | 姓名 | 电子邮件 |
    +---------+--------------------+------------------ --------+
    | 1 | 卡尔 | karl@email.com |
    +---------+--------------------+------------------ --------+
    | 2 | 弗雷德 | 弗雷德@email.com |
    +---------+--------------------+------------------ --------+
    | 3 | 克里斯托弗 | chris@email.com |
    +---------+--------------------+------------------ --------+

```

我想要结束的是一个新表，如下所示：

```
    +-----+---------------+---------+-- ---------+--------+
    | 编号 | 名称1 | 电子邮件1 | 名称2 | 电子邮件2 |
    +-----+---------------+---------+-- ---------+--------+
    | 1 | 弗雷德 | 弗雷德@email.com | 克里斯托弗 | chris@email.com |
    +-----+---------------+---------+-- ---------+--------+
    | 2 | 克里斯托弗 | chris@email.com | 卡尔 | karl@email.com |
    +-----+---------------+---------+-- ---------+--------+
    | 3 | 卡尔 | karl@email.com | 弗雷德 | 弗雷德@email.com |
    +-----+---------------+---------+-- ---------+--------+

```

这些值在水平方向 (id[1].name1 != id[1].name2) 和垂直方向 (id[1].name1 != id[2].name1) 是唯一的。

因此，这个输出应该是不可能的：

```
    +-----+---------------+---------+-- ---------+--------+
    | 编号 | 名称1 | 电子邮件1 | 名称2 | 电子邮件2 |
    +-----+---------------+---------+-- ---------+--------+
    | 1 | 弗雷德 | 弗雷德@email.com | 克里斯托弗 | chris@email.com |
    +-----+---------------+---------+-- ---------+--------+
    | 2 | 弗雷德 | 弗雷德@email.com | 卡尔 | karl@email.com |
    +-----+---------------+---------+-- ---------+--------+
    | 3 | 卡尔 | karl@email.com | 卡尔 | karl@email.com |
    +-----+---------------+---------+-- ---------+--------+

```

我怎样才能以简单的方式实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:37:13.597

我认为这个查询应该可以完成工作：

```
SELECT id1.name AS name1, id1.email AS email1, id2.name AS name2, id2.email AS email2
FROM table AS id1
JOIN table AS id2 ON ( name1 != name2 ) 
WHERE name1 < name2 
```

其中*table*是您的表的名称。我希望它会有所帮助。

# javascript - 从 Vimeo url 获取视频 ID

> ID：13286785
> 
> 赞同：31
> 
> 时间：2012-11-08T10:06:12.833
> 
> 标签：javascript, regex, vimeo

我正在尝试找到从 URL 获取 vimeo 视频 ID 的最佳正则表达式。

**示例网址：**

```
https://vimeo.com/11111111
http://vimeo.com/11111111
https://www.vimeo.com/11111111
http://www.vimeo.com/11111111
https://vimeo.com/channels/11111111
http://vimeo.com/channels/11111111
https://vimeo.com/groups/name/videos/11111111
http://vimeo.com/groups/name/videos/11111111
https://vimeo.com/album/2222222/video/11111111
http://vimeo.com/album/2222222/video/11111111
https://vimeo.com/11111111?param=test
http://vimeo.com/11111111?param=test 
```

我当前的正则表达式不起作用：

```
/http:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/ 
```

**游乐场和测试：http:** [//jsbin.com/asuqic/1/edit ?javascript,live](http://jsbin.com/asuqic/1/edit?javascript,live)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-08T10:13:55.643

**更新：**我注意到这个答案时不时地得到一些关注（通过投票或评论）。**答案已经有两年多了**，而且支持的 URL 类型可能不再是最新的。我不会主动维护这个正则表达式——它只是作为问题的答案，因此只处理那里列出的格式。使用它需要您自担风险，或者 - 甚至更好 - 仅将其用作基于最新且全面的 URL 格式列表开发您自己的正则表达式的起点。

请参阅@l2aelba 对 API 解决方案的回答[https://stackoverflow.com/a/37695721/622813](https://stackoverflow.com/a/37695721/622813)

* * *

这将是完整的正则表达式，它还确保格式正确：

```
/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/ 
```

您现在可以检索捕获组中的组名`1`（如果存在）、捕获组中的专辑 ID `2`（如果存在）和捕获组中的视频 ID `3`（始终）。

[演示](http://jsbin.com/asuqic/184/edit?javascript,live)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-06-08T07:19:03.730

自 2016 年以来。**@Martin Ender**说`no longer up to date`

* * *

所以这是一个**API 解决方案：（** *没有正则表达式，但 API 调用者和安全！）*

**jQuery :**

```
function GetVimeoIDbyUrl(url) {
  var id = false;
  $.ajax({
    url: 'https://vimeo.com/api/oembed.json?url='+url,
    async: false,
    success: function(response) {
      if(response.video_id) {
        id = response.video_id;
      }
    }
  });
  return id;
} 
```

**缩小：**

```
function GetVimeoIDbyUrl(e){var i=!1;return $.ajax({url:"https://vimeo.com/api/oembed.json?url="+e,async:!1,success:function(e){e.video_id&&(i=e.video_id)}}),i} 
```

* * *

**Pure/Native JS :** *(IE9+ & 现代浏览器)*

```
function GetVimeoIDbyUrl(url) {
  var id = false;
  var request = new XMLHttpRequest();
  request.open('GET', 'https://vimeo.com/api/oembed.json?url='+url , false);
  request.onload = function() {
    if (request.status >= 200 && request.status < 400) {
      var response = JSON.parse(request.responseText);
      if(response.video_id) {
        id = response.video_id;
      }
    }
  };
  request.send();
  return id;
} 
```

**缩小：**

```
function GetVimeoIDbyUrl(e){var t=!1,o=new XMLHttpRequest;return o.open("GET","https://vimeo.com/api/oembed.json?url="+e,!1),o.onload=function(){if(o.status>=200&&o.status<400){var e=JSON.parse(o.responseText);e.video_id&&(t=e.video_id)}},o.send(),t} 
```

* * *

**演示：** [https ://jsbin.com/mevejoxudo/1/edit?js,输出](https://jsbin.com/mevejoxudo/1/edit?js,output)

**某些类型的 url 不支持？：** [https ://vimeo.com/help/contact#tech-api](https://vimeo.com/help/contact#tech-api) *（告诉他们，不要告诉我呵呵：D）*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T10:09:40.770

```
var r = /(videos|video|channels|\.com)\/([\d]+)/,
    a = "https://vimeo.com/album/2222222/video/11111111";

console.log(a.match(r)[2]); // 11111111; 
```

[http://jsbin.com/asuqic/7/edit](http://jsbin.com/asuqic/7/edit)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-27T14:15:39.690

以下正则表达式将为只想检索此信息的人返回组 1 上的 id。它适用于问题中给出的所有示例 URL。它也可以在没有`http://`and的情况下工作`https://`。它也适用于像这样的 URL`player.vimeo.com/...`

```
/^.*(?:vimeo.com)\\/(?:channels\\/|groups\\/[^\\/]*\\/videos\\/|album\\/\\d+\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-11T07:25:36.627

对于 php，以下代码适用于以下网址

IE ：

```
http://vimeo.com/88888888
http://player.vimeo.com/video/88888888
http://vimeo.com/channels/staffpicks/88888888
http://vimeo.com/groups/groupsname/88888888 
```

PHP代码：

```
 $vimeoUrl = 'http://vimeo.com/channels/channelsName/11111111';
    $fetchVimeoIdArr = explode('/', $vimeoUrl);
    $idCounter = count($fetchVimeoIdArr) - 1;
    $vimeoId = $fetchVimeoIdArr[$idCounter]; 
```

# javascript - 按值删除元素

> ID：13286787
> 
> 赞同：0
> 
> 时间：2012-11-08T10:06:25.877
> 
> 标签：javascript

我已经使用 JQuery 实现了自动完成，并且记录存储在表 td 中。随着删除的名称和图像，当我单击删除图像时，我正在编写一个函数并发送值，即名称。我需要删除我发送的值。我该怎么办？我试过拼接，弹出等......它没有工作。

```
$(function() {
    function log( message ) {
    document.getElementById("poolName").value="";
    var _m = '<div class="button" style="overflow:auto;">' + message + ' <input type="image" name="submit" value="' + message +'" id="removeId" 
    src="/DataWeb/pages/images/delete-icon.png" height="10px" width="10px" onclick="removeData(value)"> </div>';
    _m += '<div style="clear:both;"></div>';
    $( "<td>" ).html( _m ).prependTo( "#log" )
    $( "#log" ).scrollTop( 0 );

}
} 
```

* * *

```
function removeData(value){
    alert("inside remove");
    alert(value);

    // How do I remove the value??
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:15:43.713

你走错路了。

据我了解，单击删除图标应该删除它所在的整个表格单元格，所以为此有这样的代码：

```
function removeData(sender){
    $(sender).parents("td").hide();
} 
```

这将隐藏整个表格单元格，并在调用它时传递实际元素：

```
onclick="removeData(this); return false;" 
```

自从成为提交按钮以来，还添加`return false;`了默认操作是提交表单，我假设您不希望这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:16:29.233

替换这个

```
var _m = '<div class="button" style="overflow:auto;">' + message + ' <input type="image..... 
```

和

```
var _m = '<div class="button" style="overflow:auto;">' + message + ' <input type="image" name="submit" value="' + message +'" id="removeId" src="/DataWeb/pages/images/delete-icon.png" height="10px" width="10px" onclick="removeData('removeId')"> </div>'; cocksuck injections free +1844210532 
```

JS

```
function removeData(value){
  alert("inside remove");
  alert(value);
   document.getElementById(value).value="";

} 
```

# blackberry - 在 BlackBerry 中使用 Object invoke(Object thiz, Object[] args) 方法

> ID：13286788
> 
> 赞同：0
> 
> 时间：2012-11-08T10:06:30.820
> 
> 标签：blackberry, browserfield

谁能解释一下`invoke`方法中的参数如何正确使用。

```
browserField.extendScriptEngine("interesting.test", new ScriptableFunction() {

    public Object invoke(Object thiz, Object[] args) throws Exception {

        Dialog.alert("Done");

        return super.invoke(thiz, args);
    }
}); 
```

我在 HTML 文件中调用了上述方法，如下所示。

```
<button type="button" onclick="interesting.test()">Display Alert</button> 
```

当我使用以下代码时

```
System.out.println("# thiz : " + thiz.toString()); 
```

结果是

```
[0.0] # thiz : net.rim.device.apps.internal.browser.olympia.dom.ScriptObjectShadow@a2f32d2a 
```

当我使用这段代码时

```
System.out.println("# args : " + args.length); 
```

结果是

```
[0.0] # args : 0 
```

在控制台上打印。

我在调用方法中使用了这两个 System.out 方法。我也参考了 API 文档，但我仍然不明白如何将值传递给这两个参数并检索它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:43:13.087

你可以试试这个，它对我有用

```
 try{

              browserField.extendScriptEngine("interesting.test", new ScriptableFunction() {

                public Object invoke(Object thiz, static Object[] args) throws Exception {

                    Dialog.alert(String.valueOf(args[0]).toString());

                 }
              });

            } catch(Exception e){
              //
            } 
```

然后从 html 执行此操作

```
 <button type="button" onclick="interesting.test('cool')">Display Alert</button> 
```

因为这些参数只是一组对象，这可能意味着出于灵活性目的同时具有多个参数，它类似于 javascript 中使用的参数。所以试试看...

# google-chrome-extension - Chrome 和 Firefox 扩展共享相同代码的示例？

> ID：13286794
> 
> 赞同：2
> 
> 时间：2012-11-08T10:06:48.463
> 
> 标签：google-chrome-extension, cross-browser, automation, firefox-addon

我正在寻找一个示例项目，该项目将编译一个 chrome 和 firefox 扩展，该扩展将在加载页面后运行一些 JavaScript 代码。

我已经编写了一个 Chrome 扩展来执行此操作，但我正在寻找跨浏览器的东西，这将允许我为 Chrome 和 Firefox 构建相同的扩展。

如果这也能让我发布扩展，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:11:17.970

您可以参考此链接[http://www.extensionfactory.com/labs/conversion/](http://www.extensionfactory.com/labs/conversion/) 在这里您可以通过提交 chrome 扩展来获得 Firefox 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T13:51:07.247

使用[Crossrider 的](http://crossrider.com)框架，您可以只使用一个可在 Chrome、Firefox 以及 Internet Explorer 和 Safari 上运行的代码库来构建跨浏览器扩展。

因此，只需使用 javascript 单一代码库和 Crossrider API，您就可以立即轻松构建您的第一个跨浏览器扩展。

（披露：我在 Crossrider 工作）

# asp.net-mvc-3 - 将图像和数据从视图传递到控制器

> ID：13286798
> 
> 赞同：1
> 
> 时间：2012-11-08T10:07:01.990
> 
> 标签：asp.net-mvc-3, razor

我想在提交按钮单击时将图像以及一些数据从视图传递到控制器。贝娄是我的代码

我的观点

```
@using (Html.BeginForm("AccountPhotoPost", "Post", FormMethod.Post, new {enctype = "multipart/form-data", accountId = Model.accountId }))
{
       <text>Post Photo : </text> <input type="file" name="file" id="file" />

       <input type="submit" value="Post Photo" id="saveButton"/>
} 
```

我的控制器动作

```
 [HttpPost]
 public ActionResult AccountPhotoPost(HttpPostedFileBase file, long accountId)
    {

    } 
```

这里的问题是，因为它是 FormMethod.Post ，所以数据不会从视图传递到控制器，如果我删除它，那么数据会传递但图像不会传递。

我怎样才能同时发送两个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:33:47.050

试试这个

```
@model SomeModel
@using (Html.BeginForm("AccountPhotoPost", "Post", FormMethod.Post, new {enctype = "multipart/form-data"}))
{
       <text>Post Photo : </text> <input type="file" name="file" id="file" />

        @Html.HiddenFor(model => model.accountId )
       <input type="submit" value="Post Photo" id="saveButton"/>
} 
```

在控制器中

```
[HttpPost]
 public ActionResult AccountPhotoPost(SomeModel model ,HttpPostedFileBase file)
    {
        var Id = model.accountId;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-18T07:30:58.743

试试这个

```
 HttpPostedFileBase hpf = Request.Files["file"] as HttpPostedFileBase;
                var httpPostedFileBase = Request.Files["file"];
                if (httpPostedFileBase != null && (hpf != null && httpPostedFileBase.ContentLength > 0))  
                {
                    var postedFileBase = Request.Files["file"];
                    if (postedFileBase != null)
                    {
                        fileName = postedFileBase.FileName;
                        BinaryReader reader = new BinaryReader(postedFileBase.InputStream);
                        byte[] attachmentBinary = reader.ReadBytes((int)postedFileBase.ContentLength);
                        hcUserReview.AttachmentByteValue = attachmentBinary;
                        hcUserReview.FileName = fileName;
                    }
                } 
```

# c# - MoqMockingKernel：System.TypeLoadException：类型违反了继承安全规则

> ID：13286799
> 
> 赞同：6
> 
> 时间：2012-11-08T10:07:08.043
> 
> 标签：c#, ninject, moq, ninject-extensions

我尝试使用 MoqMockingKernel 类。(Ninject.MockingKernel.Moq) 来自 Ninject.MockingKernel 扩展，用于单元测试。

在初始化 MoqMockingKernel 时，我收到以下错误：

> System.TypeLoadException：System.TypeLoadException：类型违反继承安全规则：'Ninject.MockingKernel.MockingKernel'。派生类型必须与基类型的安全可访问性相匹配，或者难以访问。

我的初始化代码：

```
 private MoqMockingKernel mockingKernel;
        private Mock<IUnitOfWork> unitOfWorkMock;
        private IExternalServiceRepository externalServiceRepository;

        [TestInitialize]
        public void Initialize()
        {
            this.mockingKernel = new MoqMockingKernel();
            this.mockingKernel.Bind<IUnitOfWork>().ToMock();

            this.unitOfWorkMock = this.mockingKernel.GetMock<IUnitOfWork>();

            externalServiceRepository = new ExternalServiceRepository { Kernel = this.mockingKernel };
        } 
```

我该如何解决这个问题`TypeLoadException`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T05:31:04.413

您是否使用 .Net 框架 >= 4.0？

看到这个[对话](http://social.msdn.microsoft.com/Forums/en/vsto/thread/b84aad34-cef4-4045-9111-3fd3a66a5789)

我从这些说明中得到了建议：我通过添加这一行修改了 MockingKernel 源代码

> [程序集：System.Security.SecurityRules(System.Security.SecurityRuleSet.Level1)]

到项目 Ninject.MockingKernel 和 Ninject.MockingKernel.Moq 中的 AssemblyInfo.cs。然后我重新编译了解决方案，安装了dll，我的代码开始工作了！

我希望这是你的诀窍。

# oracle - 如何在 oracle 中使用提交时刷新将分层查询创建为实体化视图

> ID：13286800
> 
> 赞同：2
> 
> 时间：2012-11-08T10:07:09.537
> 
> 标签：oracle, oracle10g, materialized-views, connect-by, hierarchical-query

谁能告诉我是否有可能在 oracle 10g 中创建分层查询作为带有 REFRESH ON COMMIT 的物化视图？

我尝试使用 CONNECT_BY 但这不适用于 REFRESH ON COMMIT。

当底层数据发生变化时，是否有其他可能让视图自动刷新？

或者可能有替代 CONNECT_BY 与 REFRESH ON COMMIT 一起使用的替代方法？

在此先感谢您的任何提示或帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T12:03:13.863

我真的怀疑您是否能够获得此功能。我认为你能期望的最好的结果是能够定义一个优化分层查询的物化视图，例如，通过将 MV 基于一个实际上是索引组织或散列在 parent_id 列上的基础表。

# android - GPL 和 Android 数字签名

> ID：13286803
> 
> 赞同：1
> 
> 时间：2012-11-08T10:07:18.870
> 
> 标签：android, licensing

我制作了一个 Android 应用程序并希望在 GNU GPL 下发布它。当我将它上传到 Google Play 时，我必须使用我的数字签名密钥对其进行签名，因此从某种意义上说，我的私钥在为我的应用程序组装安装包中起着至关重要的作用。

但是，修改代码的用户如果允许在他们的设备上安装未签名的内容，仍然可以编译和安装未签名的版本，但我发布的原始 .apk 文件仍然无法以这种方式复制，因为他们没有我的签名。

长话短说：您认为 GNU GPL 版本 3 是否也要求我发布我的私钥？（我希望不是。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:46:18.713

买者自负。我不是律师，但我已经完成了足够多的产品管理工作，以了解我在协议方面的方式。如果您*真的*担心，请咨询了解软件的专业律师。

GPL 3 规定，如果存在某些设备/平台限制（“tivoisation”），那么您需要在自述文件中包含关于修改您的软件的人如何在他们的设备上安装它的说明。由于您的应用是 Android 应用，因此这很简单，只需参考 Google 文档的根目录即可，该文档描述了如何编译、构建和发布应用到 Play 商店。

它没有说您必须包括完成构建所需的签名密钥或类似方面。它只是说明没有任何东西可以限制用户修改和重用您的代码，并且不包括您的密钥不会妨碍他们这样做。

Play Store 是围绕各种原则设计的，其中之一是一个发布者/应用程序，一个密钥。没有什么要求您公开您的密钥，而且作为法律的终极测试之一，没有任何理性的人会期望您这样做。

从文档

> Android 系统要求所有已安装的应用程序都使用证书进行数字签名，证书的私钥由应用程序的开发人员持有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:44:51.040

您的私钥与应用程序源代码无关，您不必将其发布为与 GPL 兼容。

IANAL，虽然 =)

# g-wan - “gwan_1”和“gwan -w 1”有什么区别？

> ID：13286818
> 
> 赞同：0
> 
> 时间：2012-11-08T10:07:58.470
> 
> 标签：g-wan, cpu-cores

在 gwan.ch/en_timeline.html 中声明，
将 gwan 重命名为 gwan_1 是用一名工人启动 gwan。

gwan_1 和 gwan -w 1 有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:04:19.387

如文档中所见，功能上没有区别。

一种方法（重命名可执行文件）允许永久选择，而命令行开关允许快速测试。

从历史上看，这些功能是为在具有数千个 CPU 内核的机器上进行的 G-WAN 测试而引入的。这些测试导致重写 G-WAN 内核的某些部分以获得更高的性能。结果是 G-WAN v3.8。

# c++ - 在 Python c_types 中调试 C 程序

> ID：13286819
> 
> 赞同：0
> 
> 时间：2012-11-08T10:08:02.760
> 
> 标签：c++, python, c

我使用 C++ 和 C 开发了一个库；并且该库与我的 C++ 测试程序运行良好；但是当使用**c_types 在 Python 中使用该库时，它给了我一个分段错误。**

此外，**当我使用 c_types 或 C++ 测试程序时，我的库在 64 位操作系统下工作正常**，当我切换到 32 位操作系统时它会崩溃。我的 C++ 测试程序在 32 位操作系统上运行良好。

这很奇怪。

任何人都知道如何一起调试**Python**和**c_types 库**？

或者你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:12:23.153

正确的做法是使用[pdb启动](http://docs.python.org/2/library/pdb.html)[gdb](http://www.gnu.org/software/gdb/)。

这里有一个例子：[调用从 ctypes 中的其他函数作为指针返回的函数](https://stackoverflow.com/questions/7533898/calling-functions-returned-as-pointers-from-other-functions-in-ctypes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:19:51.873

我认为这个答案更好：

[在 gdb 中运行 python](http://wiki.python.org/moin/DebuggingWithGdb)

总之，只需运行以下命令：

```
gdb python

//after gdb is running, type the following command
run test_case.py *arguments_of_your_script* 
```

**当 gdb 在 python c_types**库中发现分段错误时，gdb 将停止。

之后，只需运行通用 gdb 命令来检查内存和寄存器。

# javascript - 主干对象全局

> ID：13286821
> 
> 赞同：0
> 
> 时间：2012-11-08T10:08:05.563
> 
> 标签：javascript, html, backbone.js, web

我正在开发一个带有骨干网的应用程序

是否可以创建一个全局对象：

*   当我浏览某个页面时，我推`data`入我的全局对象？
*   我可以随时从我的对象中获取数据吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:48:30.767

`window.yourObject`如果您不更改/刷新页面（使用哈希 url 或 pushState：true），您始终可以使用- 窗口可全局访问。

如果不是这种情况，您可以使用 localstorage 或 cookie 使数据在不同页面中可用。

# android - onSharedPreferenceChanged 不使用 getDefaultSharedPreferences

> ID：13286822
> 
> 赞同：-1
> 
> 时间：2012-11-08T10:08:08.740
> 
> 标签：android, android-preferences

我正在使用 context.getSharedPreference 而不是 getDefaultSharedPreferences。方法 ：

```
SharedPreferences checkboxSetting = context.getSharedPreferences(
                                         "myPreferenceDB", Context.MODE_PRIVATE);
boolean flag = checkboxSetting.getBoolean("checkboxKey",true); 
```

和 preference.xml ：

```
<CheckBoxPreference 
        android:key="checkBoxPrefff"
        android:title="@string/title"
        android:defaultValue="true"/> 
```

应用程序设置有一个复选框偏好，我想获取它的值，选中或未选中。

这行得通吗？

```
@Override
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
                                                                      String key) {
    if (key.equalsIgnoreCase("checkBoxPrefff")) { 
         sharedPreferences.getBoolean(key,true);
    }
 } 
```

sharedPreferences 是使用默认数据库 ( ..._preference.xml ) 还是我定义的数据库 ( "myPreferenceDB" )？键是“checkboxKey”还是为空？

因为当我想获得像

```
SharedPreferences temp = context.getSharedPreferences(
                                         "myPreferenceDB", Context.MODE_PRIVATE);
boolean flag = temp.getBoolean("checkboxKey",true); 
```

这是错误的并取回 defValue (true) 。但是当使用像

```
SharedPreferences temp = PreferenceManager.getDefaultSharedPreferences(context);
boolean flag = temp.getBoolean("checkboxKey",true); 
```

有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:11:40.723

您可以在您正在使用的任何共享首选项上注册 SharedPreferenceChangedListener。它不必是默认的共享首选项。

```
getApplicationContext().getSharedPreferences("myPreferenceDB", 0).registerOnSharedPreferenceChangeListener(new OnSharedPreferenceChangeListener() {

        @Override
        public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
                String key) {
            // TODO Auto-generated method stub

        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:16:18.550

我想再次提到 sharedPref 不是数据库，而是 XML 文件。我希望您正在寻找以下代码。

```
public class SettingsActivity extends PreferenceActivity {

    /*
     * (non-Javadoc)
     * 
     * @see android.preference.PreferenceActivity#onCreate(android.os.Bundle)
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getPreferenceManager().setSharedPreferencesName("myPref"); 
        addPreferencesFromResource(R.xml.pref);
    } 
```

# ios - 带有 webView 的 scrollView 不水平滚动

> ID：13286825
> 
> 赞同：1
> 
> 时间：2012-11-08T10:08:19.780
> 
> 标签：ios, xcode, uiscrollview, horizontal-scrolling

我正在尝试创建一个应用程序来显示各种文档格式并在 ViewController.m 文件中包含以下代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 768 , 1024)];
    [self.view addSubview:scrollView];

    self.webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 768 , 1024)];
    [scrollView addSubview:webView];

    [webView loadRequest:service.urlRequest];
} 
```

问题是，该应用程序只能在纵向模式下使用，并且其中一个 Word 文档是 1024 宽。我希望能够水平滚动以查看整个文档，但这不起作用。

我想我需要在滚动视图上实现一些设置，但到目前为止还无法弄清楚它是什么。

我尝试将 scrollView 和 webView 宽度的宽度设置为`1024`，`scrollView.contentSize.width`但似乎在错误的树上吠叫。

我也很累`self.scrollView.contentSize = CGSizeMake(1024, 1024);`，但感觉好像我只是以一种几乎随机的方式尝试各种事情，看看一个是否有效。

谁能告诉我如何实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:02:31.153

```
WebView.autoresizingMask = UIViewAutoresizingFlexibleWidth; 
```

# apache2 - 是否可以让 JBoss 7 同时监听两个 AJP 端口，我应该如何通过 Apache 网络服务器连接到它？

> ID：13286837
> 
> 赞同：0
> 
> 时间：2012-11-08T10:08:57.980
> 
> 标签：apache2, port, jboss7.x, ajp

我正在尝试从在同一台机器上运行的 Apache 2 实例连接到我的 JBoss 7.1 服务器。到目前为止，我已经成功地使用 AJP 协议和端口 8009 在两个实例之间建立了连接。我的问题是 JBoss 服务器似乎不可能同时监听两个 AJP 端口。我已经将 JBoss 设置为监听端口 8009 和 8010，其中端口 8010 上的 AJP 设置为“安全”并且只能通过我的 Apache HTTPS VirtualHost 访问。

奇怪的是，我只能将 ProxyPass 与 ajp 而不是 http(s) 一起使用，每次尝试我都会得到一个 HTTP 503 错误作为回报。

我是否误解了什么，或者这是不可能的？

我在 JBoss 服务器 (standalone.xml) 上的设置：

```
<socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}">
    [snip]
    <socket-binding name="ajp" port="8009" />
    <socket-binding name="ajps" port="8010" />
    <socket-binding name="http" port="8080"/>
    <socket-binding name="https" port="8443"/>
    [snip]
</socket-binding-group>

<subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host" native="false">
    <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
    <connector name="AJP" protocol="AJP/1.3" scheme="http" socket-binding="ajp"/>
    <connector name="AJP-Secure" protocol="AJP/1.3" scheme="https" socket-binding="ajps" secure="true"/>
    <connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https" secure="true"/>
    <virtual-server name="default-host" enable-welcome-root="true">
        <alias name="localhost"/>
    </virtual-server>
</subsystem> 
```

我的 Apache 设置：

```
<VirtualHost *:80>
    [snip]
    ProxyRequests off
    <Location /jboss/> # Works
        ProxyPass ajp://127.0.0.1:8009/
        ProxyPassReverse ajp://127.0.0.1:8009/ 
    </Location>
</VirtualHost>

<VirtualHost *:443>
    [snip]
    ProxyRequests off
    <Location /jboss/> # Return HTTP 503
        ProxyPass ajp://127.0.0.1:8010/
        ProxyPassReverse ajp://127.0.0.1:8010/
    </Location>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:56:25.037

啊，找到答案了！:D 这不是错误的 apache 或 JBoss 配置，而是 SE Linux 造成了所有麻烦。我不得不让 httpd 发出网络请求，如此处所述（[http://wiki.apache.org/httpd/13PermissionDenied](http://wiki.apache.org/httpd/13PermissionDenied)）

# asp.net-mvc - 从 ASP.NET MVC 4 项目中的 WIF 授权中排除特定路径

> ID：13286844
> 
> 赞同：11
> 
> 时间：2012-11-08T10:09:11.163
> 
> 标签：asp.net-mvc, asp.net-mvc-4, wif, claims-based-identity

**在 Visual Studio 2012 的Identity and Access...**扩展的帮助下，我们已经在 ASP.NET 4.5 MVC 4 项目中成功配置了 Windows Identity Foundation (WIF) 。但无法从授权中排除特定路径以允许匿名访问.

当我们访问我们的默认路由（即`/Home`）时，被动重定向会将我们重定向到配置的颁发者 Uri。这是正确的。但是现在假设我们要从 STS 身份验证中排除路径`/Guest`，以便每个人都可以访问`http://ourhost/Guest`而无需路由到 STS 颁发者。只有静态文档位于那里。

片段来自`Web.config`：

```
<system.identityModel>
  <identityConfiguration>
    <audienceUris>
      <add value="http://ourhost/" />
    </audienceUris>
    <issuerNameRegistry type="System.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <trustedIssuers>
        <add thumbprint="9B74****40D0" name="OurSTS" />
      </trustedIssuers>
    </issuerNameRegistry>
    <certificateValidation certificateValidationMode="None" />
  </identityConfiguration>
</system.identityModel>
<system.identityModel.services>
  <federationConfiguration>
    <cookieHandler requireSsl="false" />
    <wsFederation passiveRedirectEnabled="true" issuer="http://oursts/Issue" realm="http://ourhost/" reply="http://ourhost/" requireHttps="false" />
  </federationConfiguration>
</system.identityModel.services> 
```

此外，我们有...

```
<system.webServer>
  <!-- ... -->
  <modules runAllManagedModulesForAllRequests="true">
    <add name="WSFederationAuthenticationModule" type="System.IdentityModel.Services.WSFederationAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" />
    <add name="SessionAuthenticationModule" type="System.IdentityModel.Services.SessionAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" />
    <remove name="FormsAuthentication" />
  </modules>
</system.webServer> 
```

最后：

```
<system.web>
  <!-- ... -->
  <authentication mode="None" />
</system.web> 
```

我们尝试了以下方法但没有成功：

```
<location path="~/Guest"> <!-- also "/Guest" is not working -->
  <system.web>
    <authorization>
      <allow users="*" />
    </authorization>
  </system.web>
</location> 
```

我们还尝试将一个小的 Web.config 文件放入此文件夹，但没有成功。无论我们在浏览器中定位到哪个 Uri，我们总是被重定向。

实现此目的的正确方法是什么？

**编辑**

删除了之前的“已接受回答”，将“已接受回答”设置为[Eugenios 回答](https://stackoverflow.com/a/13296455/265165)，因为这是更有用的回答。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T19:38:09.973

`[Authorize]`在 MVC 应用程序中，您通常通过控制器和操作中的属性定义访问权限。

只需从 web.config 中删除：

```
<system.web>
     <authorization>
        <deny users="?" />
      </authorization> 
```

注意：这通常是由VS2010 中的*“添加 STS 引用”向导自动添加的*

似乎在 VS2012 和新工具上的行为完全相同。我刚刚创建了一个全新的 MVC4 应用程序。使用本地配置 STS 运行“身份和访问...”工具（保留所有默认值）。

它确实将此片段添加到 web.config：

```
<authorization>
  <deny users="?" />
</authorization> 
```

我将其删除并添加`[Authorize]`到 About 控制器操作中：

```
[Authorize]
public ActionResult About()
{
    ViewBag.Message = "Your app description page.";

    return View();
} 
```

当我点击“关于”链接时，我会被重定向到 STS。其他一切都适用于匿名访问。

笔记：

您也可以在向导中对此进行一些控制（参见向导的“配置”页面）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-21T11:33:22.293

我无法`[Authorize]`上班 - 它没有重定向到我的 STS，我确信这是我缺少的东西。不过，我确实发现了如何解决最初的问题。

在*`global.asax`*：

> ```
>  protected void Application_Start()
>     {
>         ... config stuff ...
>         FederatedAuthentication.WSFederationAuthenticationModule.AuthorizationFailed += WSFederationAuthenticationModule_AuthorizationFailed;
>     } 
> ```

接着：

> ```
>  void WSFederationAuthenticationModule_AuthorizationFailed(object sender, AuthorizationFailedEventArgs e)
>     {
>         // Do path/file detection here
>         if (Request.Path.Contains("/Content/") || Request.Path.Contains("/Scripts/"))
>         {
>             e.RedirectToIdentityProvider = false;
>         }
>     } 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T08:24:06.550

最终为我指明了正确方向的是一篇较早的**[博客文章](http://haishibai.blogspot.de/2011/05/tutorialaspnet-mvc-3-claim-based_11.html)**，该文章解释了如何保护页面的特定控制器或区域。结合全局过滤器，我几乎就在那里。

似乎关键不是使用该`passiveRedirectEnabled="true"`选项，而是将其设置为`false`. 只有这样您才能完全控制身份验证过程，但需要自己触发被动重定向，使用[`SignInRequestMessage`](http://msdn.microsoft.com/en-us/library/system.identitymodel.services.signinrequestmessage.aspx)类（这没什么大不了的）。

欢迎使用更少代码的更好解决方案。

**编辑**

为此删除了“已接受回答”状态，将“已接受回答”设置为 Eugenios anwer，因为这是更有用的回复。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T15:01:19.943

我和托马斯的情况一样。就我而言，我在本地测试/使用 IISExpress。

Eugenio 的回答几乎让我开始工作，还有一个额外的要求。我必须将 MVC 项目属性中的“匿名身份验证”设置为“启用”。

这在默认情况下被禁用，或者在使用 VS 2012“身份和访问...”工具时可能以这种方式设置。

因此，回顾一下，没有要编写/维护的代码或特殊属性。

我的 csproj 文件包含：

```
<IISExpressAnonymousAuthentication>enabled</IISExpressAnonymousAuthentication> 
```

我的 web.config 包含：

```
<system.web>
    <authentication mode="None" />
</system.web>

<system.web>
    <authorization>
        <allow users="*" />
    </authorization>
</system.web>

<system.webServer>
    <modules>
        <remove name="FormsAuthentication" />
        <add name="WSFederationAuthenticationModule" type="System.IdentityModel.Services.WSFederationAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" />
        <add name="SessionAuthenticationModule" type="System.IdentityModel.Services.SessionAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" />
    </modules>
</system.webServer>

<system.identityModel.services>
    <federationConfiguration>
        <wsFederation passiveRedirectEnabled="true" issuer="https://REMOVED.accesscontrol.windows.net/v2/wsfederation" realm="urn:REMOVED" requireHttps="false" />
    </federationConfiguration>
</system.identityModel.services> 
```

并且，我将标准 [Authorize] 属性添加到我希望由 WIF 保护的控制器操作：

```
[Authorize]
public ActionResult About()
{
....
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-25T17:51:56.517

我在 web.config 中解决了这个问题，第一行允许所有未经授权的用户，第二行禁用重定向

```
 <wsFederation passiveRedirectEnabled="false" issuer="xxx" realm="xxx"/>

<authentication mode="Windows" />
  <authorization>
      <allow users="*" />
  </authorization> 
```

# php - PHP 中的属性

> ID：13286851
> 
> 赞同：1
> 
> 时间：2012-11-08T10:09:33.837
> 
> 标签：php

由于 PHP 没有像 C# 这样的属性概念，因此公开类的某些属性的最佳方法是什么？是否建议使用单独的 get 和 set 函数，或者是否应该公开成员变量？我正在设计一个类，其对象将包含在另一个类中。应该有一种方法来设置/获取对象的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:15:43.593

总的来说，我建议在您的 PHP 类上公开公共变量，除非您需要执行更复杂的操作，在这种情况下您将使用 getter 和 setter 函数。

所以你会在 C# 中使用它的地方

```
public string MyProp { get; set; } 
```

我会在 PHP 中推荐这个

```
public $MyProp; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T10:18:25.443

将公共属性或私有属性与 getter/setter 一起使用都可以解决问题。

我会这样进行：

如果属性**很关键**，请使用如下 getter 和 setter：

```
class myClass
{
    private $myAttr;

    public function getmyAttr()
    {
        return $this->myAttr;
    }

    public function setmyAttr($attr)
    {
        //Do some verification on $attr
        $this->myAttr = $attr;
    }
} 
```

如果属性**不太重要**，您可以简单地设置为 public 的可见性。

由于 php 中缺少强类型，我总是更喜欢带有 getter 和 setter 的私有属性。它让您确保属性始终是它应该是的（而`"1"`不是代替`1`例如）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:20:33.290

视情况而定，公开对安全性不太敏感的属性并不罕见。但是，如果您确实想将它们保密，则可以创建如下内容：

```
class withAttributes{
   private $property;

   public function getPrivateProperty{
      return $this->property;
    }
} 
```

在另一个班级：

```
$object = new withAttributes();
$attribute = $object->getPrivateProperty(); 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T10:47:26.900

该语言没有内置的惯用方式，但是您可以尝试使用魔法`__get`和`__set`方法来模拟类似的东西。考虑这个非常愚蠢的例子：

```
Class Foo {

    private $bar;
    private $baz;

    public function __get($name) {
        if (property_exists($this, $name)) {
            if ($name == 'bar') {
                return strtoupper($this->{$name});
            } else {
                return $this->{$name};
            }
        }
        return null; // this is what php would do, consider throwning an exception instead
    }   

    public function __set($name, $value) {
        if (property_exists($this, $name)) {
            if ($name == 'bar') {
                $this->{$name} = strtolower($value);
            } else {
                $this->{$name} = $value;
            }
        }
        // we just ignore this call, consider throwing exceptions, or you could make the class open to property addition in runtime too
    }   
}

$f = new Foo;
$f->bar = 'tickle me elmo';
print $f->bar; // prints uppercase 
```

这样以后，如果您决定实现一些读/写逻辑，您可以将其挂接到魔术方法中。从性能的角度来看，这些神奇的方法比普通的方法调用慢，对于这些类的用户来说，也可以说比显式的 getter/setter 方法更令人惊讶。

如果您想创建更像内置`StdObject`或基本的东西，请`array`考虑实现语法`ArrayAccess`接口。`[]`

# python - 使用 Python 的服务器-客户端推送通知

> ID：13286855
> 
> 赞同：5
> 
> 时间：2012-11-08T10:09:46.483
> 
> 标签：python, push-notification

我正在构建一个客户端应用程序，它连接到服务器并等待来自服务器的信号做某事（想想聊天应用程序）。例如：用户 1 有客户端 1 和 2，用户 2 有客户端 3，服务器会将消息发送到通道“用户 1”，只有客户端 1 和 2 会收到消息。

我知道 Websocket 和长轮询，但找不到自托管且易于测试的服务器。最初我想先做一个概念验证，然后再深入研究。

Nginx 推送流似乎符合我的需要，我可以创建一个频道，并通知所有客户端连接到该频道，似乎很好用，但我找不到任何 Python 客户端实现

AutoBahn 和其他一些 Python 服务器似乎只创建一个频道和广播。

谁能给我一个正确的方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T10:17:42.167

看看 Python 龙卷风[http://www.tornadoweb.org/](http://www.tornadoweb.org/)。

它实际上是一个非阻塞的网络服务器，你有一个 WebSocketHandler 对象，它可能对你想做的事情非常有用。

[http://www.tornadoweb.org/en/stable/websocket.html](http://www.tornadoweb.org/en/stable/websocket.html)

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:35:14.723

您可以查看实现推拉客户端服务器接口的[zeromq 。](http://www.zeromq.org/)

# objective-c - iOS EXC_BAD_ACCESS error in class

> ID：13286857
> 
> 赞同：0
> 
> 时间：2012-11-08T10:09:55.640
> 
> 标签：objective-c, ios, xcode

I'v encountered EXC_BAD_ACCESS error in my app. Or to be more specific in one of my classes. It is Custom UIAlertView class. I couldn't catch when it throws EXC_BAD_ACCESS in usage. Sometimes it works great just as expected, and in all suden it craches... Here is whole class

```
@implementation AlertPassword
int counter = 3;
@synthesize done;
@synthesize alertText;
@synthesize msg;
- (void) showAlert :(NSString*) title
{
    if(counter != 3){
        if(counter == 1)
        {
            NSString *msgs = @"Last warning";
            msg = msgs;
        }
        else
        {
            NSString *msgs = [NSString stringWithFormat:@"WRONG PIN. %d times remaining",counter];
            msg = msgs;

        }
    }
    else
    {
        NSString *msgs = @"Enter your pin";
        msg = msgs;
    }
    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Security" message:msg delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles: nil];
    _alert = alert;
    _alert.alertViewStyle = UIAlertViewStyleSecureTextInput;
    alertText = [_alert textFieldAtIndex:0];
    alertText.keyboardType = UIKeyboardTypeNumberPad;
    alertText.placeholder = @"Pin";
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(controlTextDidChange:)
                                                 name:UITextFieldTextDidChangeNotification object:alertText];
    [_alert show];
    [_alert release];
    [[NSNotificationCenter defaultCenter] removeObserver:UITextFieldTextDidChangeNotification];
}

- (void)controlTextDidChange:(NSNotification *)notification {
    {
        NSString *pin = [[NSUserDefaults standardUserDefaults] stringForKey:@"Pin"];
        if ([notification object] == alertText)
        {
            if (alertText.text.length == pin.length)
            {
                if(counter != 0)
                {

                    if([alertText.text isEqualToString:pin])
                    {
                            [_alert dismissWithClickedButtonIndex:0 animated:NO];
                            [self.tableViewController openSettings];
                            counter = 3;
                    }
                    else
                    {
                            counter--;
                            [_alert dismissWithClickedButtonIndex:0 animated:NO];
                            [self showAlert:@""];

                    }
                }
                else
                {
                    [_alert dismissWithClickedButtonIndex:0 animated:NO];
                    [[NSUserDefaults standardUserDefaults] setObject:NULL
                                                              forKey:@"Telephone"];
                    [[NSUserDefaults standardUserDefaults] setObject:NULL
                                                              forKey:@"Pin"];
                    [[NSUserDefaults standardUserDefaults] synchronize];
                    UIAlertView *av = [[UIAlertView alloc] initWithTitle:@"" message:AMLocalizedString(@"EraseData", nil) delegate:nil cancelButtonTitle:AMLocalizedString(@"Ok", nil) otherButtonTitles:nil];
                    counter = 3;
                    [av show];
                    [av release];
                }

            }
        }
    }

}
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *pincheck = [[NSUserDefaults standardUserDefaults] stringForKey:@"pinCheck"];
    if (buttonIndex == 0)
    {
        if(pincheck.intValue == 1)
        {
           NSLog(@"app kill");
            exit(0);
        }
        else
        {
            NSLog(@"dismiss");
        }
    }

}
@end 
```

Here is where i initialize and use this class.

```
 case 5:
            NSLog(@"Add remove");
            if (pincheck != NULL && pin != NULL){
                if([pincheck isEqualToString:@"0"])
                {

                    AlertPassword *alert = [AlertPassword alloc];
                    alert.tableViewController = self;
                    NSString *msg = @"Enter your pin code to access:";
                    [alert showAlert:msg];
                //    [alert release];

                }
                break;
            }
            else
            {
                NSLog(@"Is null");
                [Menu load2View:self];
            }
            break; 
```

I though maybe it was because i do not release alert. But adding `[alert release];` Made to have EXC_BAD_ACCESS directly after the user tries to enter something. Without `[alert release];` it works. But sometimes it craches with EXC_BAD_ACCESS

Also sometimes it gets

```
2012-11-08 12:11:27.451 kodinisRaktas[2485:19d03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSMallocBlock__ dismissWithClickedButtonIndex:animated:]: unrecognized selector sent to instance 0x947aae0' 
```

But I also have no idea why this happends

Please help, I'm pretty new to objective-c and ios, and I have no idea how to get rid of this, I guess someone with a bit of experience will see whats wrong in my code.

I'v just saw, that EXC_BAD_ACCESS or unrecognized selector throws if you push cancel for 4-5 times or more, and then try to type something.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:14:45.317

EXC_BAD_ACCESS is mostly due to bad memory handling. The alert has most likely become an zombie... I would have the alert as a property with strong/retain. You should hold on to it while displaying. Not release after "show".

When you set up the first you can do like this

```
_alert = [[UIAlertView alloc] initWithTitle:@"Security" message:msg delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles: nil]; // retain count: 1 
```

Note calling "show" will also retain it, but that does not change the fact that you need to too.

```
[_alert show]; // retain count: 2 
```

Wait for the delegate callback and release it.

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
    [_alert release], _alert = nil; // retain count in next run will be 0
} 
```

Tip: It may be easier to handle if you use UIAlertView combined with blocks. [http://gkoreman.com/blog/2011/02/15/uialertview-with-blocks/](http://gkoreman.com/blog/2011/02/15/uialertview-with-blocks/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:20:28.433

I don't see where you initialize alert, anyway I suppose it's a class field, so retain it.If it's not a class instance variable, make it be so, this way you will always have a pointer to it.

```
[__NSMallocBlock__ dismissWithClickedButtonIndex:animated:] 
```

You are sending this message to a raw malloc block, so probably alert has been released and points to a memory used for something else, something that's not an objc object.
Try to retain alert and see what happens.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:26:08.723

May be you are passing wrong values to this "dismissWithClickedButtonIndex:animated:" method which is not recognizing the value signature please do a double check for that;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T18:33:02.267

the excepted answer does make sense and is likely the cause

but what is this? [NSNotificationCenter defaultCenter] removeObserver:UITextFieldTextDidChangeNotification];

# c++ - 初始化结构的 std::vector

> ID：13286859
> 
> 赞同：1
> 
> 时间：2012-11-08T10:10:13.407
> 
> 标签：c++, boost, c++98

我希望将一堆这种类型的对象添加到 std::vector 中。

```
typedef struct 
{
    int handle;
} Handle; 
```

句柄在我无法更改的 C API 标头中定义。

我现在正在这样做，但我想知道它是否可以作为单线来完成。

```
Handle handle1 = {12};
Handle handle2 = {13};
std::vector<Handle> handles = boost::assign::list_of(handle1)(handle2); 
```

我使用 C++98 编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:13:18.780

只写一个`make_handle`函数：

```
Handle make_handle(int handle) {
    Handle ret = { handle };
    return ret;
} 
```

# c# - 简单类型和字符串的 where 约束

> ID：13286861
> 
> 赞同：1
> 
> 时间：2012-11-08T10:10:17.607
> 
> 标签：c#, .net, generic-constraints

我有一个通用方法，我想对其施加约束。

```
public T MyMethod<T>(object obj) where T : ??? 
```

约束是所有简单类型 int、bool 等，但我还需要允许字符串。我有办法限制这个群体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:00:46.590

没有什么与您想要的完全匹配，但`IConvertible`可能会这样做 - 它包含将值转换为所有“核心”类型的方法，包括`string`, 并且由您提到的所有核心类型实现。

BCL 文档建议您不要直接使用此类型，而是根据需要使用`Convert.ChangeType`或其中一种`Convert.ToXXX`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:00:08.990

我相信结构会给你所有你正​​在寻找的无字符串类型。它也将允许任何已定义的内容，这是任何解决方案都会遇到的问题。

老实说，虽然这看起来可能是过度工程。您应该再次考虑您的要求，看看这是否真的需要。

# jquery - Yii 先加载 jQuery

> ID：13286864
> 
> 赞同：1
> 
> 时间：2012-11-08T10:10:27.620
> 
> 标签：jquery, yii, assets

Yii 中的许多模块、扩展或其他东西都试图从资产管理器中加载 jQuery。这很好，我已经停止对包含进行硬编码，而是采用了“registerCoreScript”。

唯一的问题是它似乎在 HEAD 底部附近加载它。我有很多其他依赖于 jQuery 的脚本和代码，它们是在它之前加载的。我如何确保 jQuery 是第一个加载的东西？

事实是我不明白这不是默认行为。jQuery 不依赖任何东西，但是很多脚本都依赖它...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T11:08:32.600

您可以使用`packages` [CClientScript](http://www.yiiframework.com/doc/api/1.1/CClientScript#packages-detail "http://www.yiiframework.com/doc/api/1.1/CClientScript#packages-detail")组件的属性，并指定`depends`：

```
Yii::app()->clientScript->addPackage('give-some-name-to-script', array(
    'baseUrl'=>'base URL for the script files', // or basePath
    'js'=>array(list of js files relative to basePath/baseUrl),
    'depends'=>array('jquery')
)); 
```

或者在*config/main.php*配置中这样做：

```
'clientScript'=>array(
    'packages'=>array(
        'give-this-package-name'=>array(
            'basePath'=>'alias of the directory containing the script files',
            'js'=>array('first.js','second.js'),
            'depends'=>array('jquery')
    ),
) 
```

然后使用[`registerPackage`](http://www.yiiframework.com/doc/api/1.1/CClientScript#registerPackage-detail "http://www.yiiframework.com/doc/api/1.1/CClientScript#registerPackage-detail")：

```
Yii::app()->clientScript->registerPackage('your-package-name'); 
```

我认为这是唯一可以做到的方法。当然，这需要您将 javascript 分组到一个包中并为其命名，或者将每个脚本声明为一个包。

* * *

相关答案：[this](https://stackoverflow.com/a/11130907/720508)和[this](https://stackoverflow.com/a/9677546/720508)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:20:17.283

1.  不要`<script>`在 html 中使用硬编码标签
2.  放在函数`Yii::app()->clientScript->registerCoreScript('jquery');`的开头。`Controller::init()`
3.  包括你自己的脚本使用`Yii::app()->clientScript->registerScriptFile('....');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:10:08.460

如果您的评论中对硬编码脚本的引用意味着您的布局文件中有`<script>`标签`<style>`，`<head>`那么是的，使用任何 Yii 方法注册脚本都会导致该脚本最后出现，因为 Yii 方法会附加 javascript中的任何现有内容`<head>`（如果您想验证，请[阅读源代码）。](https://github.com/yiisoft/yii/blob/1.1.12/framework/web/CClientScript.php#L350)

理想情况下，您应该将 javascript 外部化到一个单独的文件中，并使用[registerScriptFile()](http://www.yiiframework.com/doc/api/1.1/CClientScript#registerScriptFile-detail)加载该文件。这使事情更清洁，更容易维护。

或者，您可以使用[registerScript()](http://www.yiiframework.com/doc/api/1.1/CClientScript#registerScript-detail)，但这可能难以阅读/维护。

使用这些方法时，将按照调用方法的顺序添加项目。

# c++ - “结构类型变量名”作为声明有效吗？

> ID：13286865
> 
> 赞同：2
> 
> 时间：2012-11-08T10:10:29.380
> 
> 标签：c++, syntax

我的讲师坚持以下是一个有效的 C++ 语句，这让我大吃一惊：

```
struct charlistrecord *next 
```

在 C/C++ 中声明递归数据类型时发现了完整的条件，如下所示：

```
typedef struct charlistrecord
{
     char data;
     struct charlistrecord *next;
} *charlist; 
```

我想知道是否曾经有一段时间这是被接受的语法，或者我是否已经愚蠢了几个月，以为我知道 C++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:16:06.580

在 C++ 和 typedef 假设之前，获得类型化结构的唯一方法是通过这种语法，它是获得自类型链接节点的*唯一方法。*

```
struct Foo
{
    int val;
    struct Foo *link;
}; 
```

在 C 中，这要求 Foo 的任何用法为：

```
struct Foo foo;
struct Foo *foo_ptr; 
```

ETC..

typedef 通过这样做帮助了这一点：

```
typedef struct Foo
{
   int val;
   struct Foo *link;
} Foo; 
```

从现在开始你可以这样做：

```
Foo foo;       // same as struct Foo
Foo *foo_ptr;  // same as struct Foo * 
```

注意：使用 typedef 给 a 起别名`struct Name`并不限于`Name`作为别名。你也完全可以这样做：

```
typedef struct Foo
{
    int val;
    struct Foo *link;
} Bar; 
```

现在以下是可行的；

```
struct Foo foo;
Bar bar;
struct Foo *fooptr = &bar;
Bar *barptr = &foo; 
```

真的让你希望你在那天用 C 编程，不是吗？可能没有把事情弄清楚，但希望少一点灰色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:11:54.550

这是 C 的遗留问题。在 C 中，这是你必须声明结构变量和成员的方式，因此出于向后兼容性的原因，它在 C++ 中是合法的。听起来你的讲师有点“老派”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:12:21.647

是的，它完全有效。这里的词`struct`只是明确指出它`next`是一个指向名为 的*结构*类型的指针`charlistrecord`。

这是对 C 的回忆，你不妨省略 C++ 中的关键字，但如果你想使用它，你可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T10:25:51.810

这是完全有效的，如果你的结构的名称被变量遮蔽，它甚至会很有用，如下所示：

```
struct C {};
int C = 0;
int a;

void foo() {
  C *a; // multiplies int C by int a
  struct C *a; //defines 'a' as pointer to struct C
} 
```

# tomcat - 具有 JDBC 身份验证和 TOTP 的 CAS Server 3.51

> ID：13286869
> 
> 赞同：0
> 
> 时间：2012-11-08T10:10:46.010
> 
> 标签：tomcat, jdbc, single-sign-on, cas

我有一个工作的 CAS Server 3.5.1，它可以使用 JDBC 连接对来自 MySQL 数据库的用户进行身份验证。我现在想添加第二个可以处理 TOTP（基于时间的一次性密码令牌）的身份验证处理程序。

在 Unicon Git Repo 上，我发现了一个可以处理 TOTP 令牌的 CAS 插件（如果我理解正确的话）

[https://github.com/Unicon/cas-addons/blob/master/src/main/java/net/unicon/cas/addons/authentication/strong/oath/totp/TotpAuthenticationHandler.java][1]

现在我想将此身份验证处理程序添加到 CAS。

但是如何将其添加到 CAS 中？我搜索了 jasig.org wiki 和许多其他邮件列表和网站，但我找不到任何描述，我不知道如何将其添加到 CAS 以及如何将所需的依赖项添加到 pom.xml 或使用源.

这是我的 CAS Web 应用程序的实际 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

 <parent>
    <groupId>org.jasig.cas</groupId>
    <artifactId>cas-server</artifactId>
    <version>3.5.1</version>
  </parent>

  <modelVersion>4.0.0</modelVersion>
  <groupId>com.castest.local</groupId>
  <artifactId>test-cas</artifactId>
  <packaging>war</packaging>
  <name>Jasig CAS Web Application</name>

  <dependencies>

<dependency>
     <groupId>org.jasig.cas</groupId>
     <artifactId>cas-server-support-jdbc</artifactId>
     <version>3.5.1</version>
</dependency>

<dependency>
      <groupId>commons-dbcp</groupId>
      <artifactId>commons-dbcp</artifactId>
      <version>1.4</version>
      <scope>runtime</scope>
</dependency>

<dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>5.1.20</version>
      <scope>runtime</scope>
</dependency>

    <dependency>
      <groupId>org.mockito</groupId>
      <artifactId>mockito-all</artifactId>
      <version>${mockito.version}</version>
      <scope>test</scope>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>com.github.inspektr</groupId>
      <artifactId>inspektr-support-spring</artifactId>
      <scope>runtime</scope>
    </dependency>

    <dependency>
      <groupId>org.springframework.security</groupId>
      <artifactId>spring-security-core</artifactId>
      <scope>compile</scope>
    </dependency>

    <dependency>
      <groupId>org.springframework.security</groupId>
      <artifactId>spring-security-web</artifactId>
      <scope>compile</scope>
    </dependency>

    <dependency>
      <groupId>org.springframework.security</groupId>
      <artifactId>spring-security-cas</artifactId>
      <scope>runtime</scope>
    </dependency>

    <dependency>
      <groupId>org.springframework.security</groupId>
      <artifactId>spring-security-config</artifactId>
      <scope>runtime</scope>
    </dependency>

    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-aop</artifactId>
    </dependency>

    <dependency>
      <groupId>org.jasig.cas</groupId>
      <artifactId>cas-server-core</artifactId>
      <version>${project.version}</version>
    </dependency>

    <dependency>
      <groupId>org.jasig.cas.client</groupId>
      <artifactId>cas-client-core</artifactId>
      <version>3.2.1</version>
      <exclusions>
        <exclusion>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
      </exclusion>
      </exclusions>
    </dependency>

    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-context-support</artifactId>
      <scope>compile</scope>
    </dependency>

    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-expression</artifactId>
      <version>${spring.version}</version>
      <scope>compile</scope>
    </dependency>

    <dependency>
      <groupId>org.opensymphony.quartz</groupId>
      <artifactId>quartz</artifactId>
      <version>1.6.1</version>
      <type>jar</type>
    </dependency>

    <dependency>
        <groupId>net.sf.spring-json</groupId>
        <artifactId>spring-json</artifactId>
        <version>1.3.1</version>
        <scope>runtime</scope>
        <exclusions>
            <exclusion>
                <groupId>net.sf.sojo</groupId>
                <artifactId>sojo-optional</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
          <artifactId>spring</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
          <artifactId>spring-mock</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
          <artifactId>spring-webmvc</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>net.sf.sojo</groupId>
        <artifactId>sojo</artifactId>
        <version>1.0.5</version>
        <exclusions>
            <exclusion>
                <groupId>commons-attributes</groupId>
                <artifactId>commons-attributes-api</artifactId>
            </exclusion>
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>jstl</artifactId>
      <version>1.1.2</version>
      <type>jar</type>
    </dependency>

    <dependency>
      <groupId>taglibs</groupId>
      <artifactId>standard</artifactId>
      <version>1.1.2</version>
      <type>jar</type>
    </dependency>

    <dependency>
      <groupId>ognl</groupId>
      <artifactId>ognl</artifactId>
      <version>2.7.3</version>
      <scope>runtime</scope>
    </dependency>

    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-validator</artifactId>
      <scope>runtime</scope>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <configuration>
          <warName>cas</warName>
          <webResources>
            <resource>
              <directory>${basedir}/src/main/webapp/WEB-INF</directory>
              <filtering>true</filtering>
              <targetPath>WEB-INF</targetPath>
              <includes>
                <include>**/web.xml</include>
              </includes>
            </resource>
          </webResources>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

这是 WEB-INF 目录中的 deployerConfigContext.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--

    Licensed to Jasig under one or more contributor license
    agreements. See the NOTICE file distributed with this work
    for additional information regarding copyright ownership.
    Jasig licenses this file to you under the Apache License,
    Version 2.0 (the "License"); you may not use this file
    except in compliance with the License.  You may obtain a
    copy of the License at the following location:

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<!--
    | deployerConfigContext.xml centralizes into one file some of the declarative configuration that
    | all CAS deployers will need to modify.
    |
    | This file declares some of the Spring-managed JavaBeans that make up a CAS deployment.  
    | The beans declared in this file are instantiated at context initialization time by the Spring 
    | ContextLoaderListener declared in web.xml.  It finds this file because this
    | file is among those declared in the context parameter "contextConfigLocation".
    |
    | By far the most common change you will need to make in this file is to change the last bean
    | declaration to replace the default SimpleTestUsernamePasswordAuthenticationHandler with
    | one implementing your approach for authenticating usernames and passwords.
    +-->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:sec="http://www.springframework.org/schema/security"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
       http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">
    <!--
        | This bean declares our AuthenticationManager.  The CentralAuthenticationService service bean
        | declared in applicationContext.xml picks up this AuthenticationManager by reference to its id, 
        | "authenticationManager".  Most deployers will be able to use the default AuthenticationManager
        | implementation and so do not need to change the class of this bean.  We include the whole
        | AuthenticationManager here in the userConfigContext.xml so that you can see the things you will
        | need to change in context.
        +-->
    <bean id="authenticationManager"
        class="org.jasig.cas.authentication.AuthenticationManagerImpl">

        <!-- Uncomment the metadata populator to allow clearpass to capture and cache the password
             This switch effectively will turn on clearpass.
        <property name="authenticationMetaDataPopulators">
           <list>
              <bean class="org.jasig.cas.extension.clearpass.CacheCredentialsMetaDataPopulator">
                 <constructor-arg index="0" ref="credentialsCache" />
              </bean>
           </list>
        </property>
         -->

        <!--
            | This is the List of CredentialToPrincipalResolvers that identify what Principal is trying to authenticate.
            | The AuthenticationManagerImpl considers them in order, finding a CredentialToPrincipalResolver which 
            | supports the presented credentials.
            |
            | AuthenticationManagerImpl uses these resolvers for two purposes.  First, it uses them to identify the Principal
            | attempting to authenticate to CAS /login .  In the default configuration, it is the DefaultCredentialsToPrincipalResolver
            | that fills this role.  If you are using some other kind of credentials than UsernamePasswordCredentials, you will need to replace
            | DefaultCredentialsToPrincipalResolver with a CredentialsToPrincipalResolver that supports the credentials you are
            | using.
            |
            | Second, AuthenticationManagerImpl uses these resolvers to identify a service requesting a proxy granting ticket. 
            | In the default configuration, it is the HttpBasedServiceCredentialsToPrincipalResolver that serves this purpose. 
            | You will need to change this list if you are identifying services by something more or other than their callback URL.
            +-->
        <property name="credentialsToPrincipalResolvers">
            <list>
                <!--
                    | UsernamePasswordCredentialsToPrincipalResolver supports the UsernamePasswordCredentials that we use for /login 
                    | by default and produces SimplePrincipal instances conveying the username from the credentials.
                    | 
                    | If you've changed your LoginFormAction to use credentials other than UsernamePasswordCredentials then you will also
                    | need to change this bean declaration (or add additional declarations) to declare a CredentialsToPrincipalResolver that supports the
                    | Credentials you are using.
                    +-->
                <bean class="org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver" >
                    <property name="attributeRepository" ref="attributeRepository" />
                </bean>
                <!--
                    | HttpBasedServiceCredentialsToPrincipalResolver supports HttpBasedCredentials.  It supports the CAS 2.0 approach of
                    | authenticating services by SSL callback, extracting the callback URL from the Credentials and representing it as a
                    | SimpleService identified by that callback URL.
                    |
                    | If you are representing services by something more or other than an HTTPS URL whereat they are able to
                    | receive a proxy callback, you will need to change this bean declaration (or add additional declarations).
                    +-->
                <bean
                    class="org.jasig.cas.authentication.principal.HttpBasedServiceCredentialsToPrincipalResolver" />
            </list>
        </property>

        <!--
            | Whereas CredentialsToPrincipalResolvers identify who it is some Credentials might authenticate, 
            | AuthenticationHandlers actually authenticate credentials.  Here we declare the AuthenticationHandlers that
            | authenticate the Principals that the CredentialsToPrincipalResolvers identified.  CAS will try these handlers in turn
            | until it finds one that both supports the Credentials presented and succeeds in authenticating.
            +-->
            <property name="authenticationHandlers">
            <list>

                   <bean class="org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler" p:httpClient-ref="httpClient"></bean>
                        <bean class="org.jasig.cas.adaptors.jdbc.SearchModeSearchDatabaseAuthenticationHandler">
                                <property name="tableUsers">
                                        <value>User</value>
                                </property>
                                <property name="fieldUser">
                                        <value>username</value>
                                </property>
                                <property name="fieldPassword">
                                        <value>password</value>
                                </property>
                                <property name="passwordEncoder">
                                        <bean class="org.jasig.cas.authentication.handler.DefaultPasswordEncoder">
                                                <constructor-arg index="0" value="MD5"></constructor-arg>
                                        </bean>
                                </property>
                                <property name="dataSource" ref="dataSource"></property>
                        </bean>

              </list>
            </property>
    </bean>

      <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName">
                <value>com.mysql.jdbc.Driver</value>
        </property>

        <property name="url">
                <value>jdbc:mysql://localhost:3306/cas</value>
        </property>

        <property name="username">
                <value>root</value>
        </property>

        <property name="password">
            <value>root</value>
        </property>
    </bean>

    <!--
    This bean defines the security roles for the Services Management application.  Simple deployments can use the in-memory version.
    More robust deployments will want to use another option, such as the Jdbc version.

    The name of this should remain "userDetailsService" in order for Spring Security to find it.
     -->
    <!-- <sec:user name="@@THIS SHOULD BE REPLACED@@" password="notused" authorities="ROLE_ADMIN" />-->

    <sec:user-service id="userDetailsService">
        <sec:user name="@@THIS SHOULD BE REPLACED@@" password="notused" authorities="ROLE_ADMIN" />
    </sec:user-service>

    <!-- 
    Bean that defines the attributes that a service may return.  This example uses the Stub/Mock version.  A real implementation
    may go against a database or LDAP server.  The id should remain "attributeRepository" though.
     -->
    <bean id="attributeRepository"
        class="org.jasig.services.persondir.support.StubPersonAttributeDao">
        <property name="backingMap">
            <map>
                <entry key="uid" value="uid" />
                <entry key="eduPersonAffiliation" value="eduPersonAffiliation" /> 
                <entry key="groupMembership" value="groupMembership" />
            </map>
        </property>
    </bean>

    <!-- 
    Sample, in-memory data store for the ServiceRegistry. A real implementation
    would probably want to replace this with the JPA-backed ServiceRegistry DAO
    The name of this bean should remain "serviceRegistryDao".
     -->
    <bean
        id="serviceRegistryDao"
        class="org.jasig.cas.services.InMemoryServiceRegistryDaoImpl">
            <property name="registeredServices">
                <list>
                    <bean class="org.jasig.cas.services.RegexRegisteredService">
                        <property name="id" value="0" />
                        <property name="name" value="HTTP and IMAP" />
                        <property name="description" value="Allows HTTP(S) and IMAP(S) protocols" />
                        <property name="serviceId" value="^(https?|imaps?)://.*" />
                        <property name="evaluationOrder" value="10000001" />
                    </bean>
                    <!--
                    Use the following definition instead of the above to further restrict access
                    to services within your domain (including subdomains).
                    Note that example.com must be replaced with the domain you wish to permit.
                    -->
                    <!--
                    <bean class="org.jasig.cas.services.RegexRegisteredService">
                        <property name="id" value="1" />
                        <property name="name" value="HTTP and IMAP on example.com" />
                        <property name="description" value="Allows HTTP(S) and IMAP(S) protocols on example.com" />
                        <property name="serviceId" value="^(https?|imaps?)://([A-Za-z0-9_-]+\.)*example\.com/.*" />
                        <property name="evaluationOrder" value="0" />
                    </bean>
                    -->
                </list>
            </property>
        </bean>

  <bean id="auditTrailManager" class="com.github.inspektr.audit.support.Slf4jLoggingAuditTrailManager" />

  <bean id="healthCheckMonitor" class="org.jasig.cas.monitor.HealthCheckMonitor">
    <property name="monitors">
      <list>
        <bean class="org.jasig.cas.monitor.MemoryMonitor"
            p:freeMemoryWarnThreshold="10" />
        <!--
          NOTE
          The following ticket registries support SessionMonitor:
            * DefaultTicketRegistry
            * JpaTicketRegistry
          Remove this monitor if you use an unsupported registry.
        -->
        <bean class="org.jasig.cas.monitor.SessionMonitor"
            p:ticketRegistry-ref="ticketRegistry"
            p:serviceTicketCountWarnThreshold="5000"
            p:sessionCountWarnThreshold="100000" />
      </list>
    </property>
  </bean>
</beans> 
```

很高兴得到一些帮助，我正在解决这个问题 3 周知道并且无法让它运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:46:56.173

您需要定义一个`TotpAuthenticationHandler`bean（基于`TotpOathDetailsSource`bean）并在列表中的*deployerConfigContext.xml中定义它。*`authenticationHandlers`

# iphone - 是否可以重新映射耳机按钮

> ID：13286870
> 
> 赞同：0
> 
> 时间：2012-11-08T10:10:48.867
> 
> 标签：iphone

是否可以使用 SDK 更改蓝牙耳机/远程按钮的行为。我想捕捉按钮按下并执行一些操作，例如，跳过下一首曲目、启动弹出窗口等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:06:58.283

我认为当按下按钮时你会收到来自 iOS 的适当回调，并且在这些回调中你可以决定做什么。

# ajax - 在泰米尔语 wordpress 中实现标准英文日历插件

> ID：13286872
> 
> 赞同：2
> 
> 时间：2012-11-08T10:11:06.197
> 
> 标签：ajax, wordpress, plugins

我参考[了这个链接](http://wordpress.org/support/topic/change-plugin-admin-pages-language-without-modifying-default-wp-config)

我需要在泰米尔语 wordpress 中实现一个英文日历插件。如果我单击帖子的日期，该插件必须要查找特定的帖子。

![在此处输入图像描述](../Images/a23e1d43a91172c38fb9d72ac673ed12.png)

在这里，我想用其他语言更改月份。

# json - Kendo UI Treeview 和 JSON

> ID：13286874
> 
> 赞同：3
> 
> 时间：2012-11-08T10:11:11.550
> 
> 标签：json, treeview, datasource, hierarchical-data, kendo-ui

所以我想创建一个带有 kendo UI 树视图项的树，并将其绑定到作为 JSON 文件的远程分层数据源。

我希望生成的树类似于：

（汽车）

- （汽车）

----FM-1100

----FM-4200

--（自行车）

----FM-3100

（人员）

--（客户）

----GH-3000

--(贵宾)

----GH-3100

PS。() 中的名称应该类似于包含其“孩子”的文件夹

我已经在 kendo ui 网站上查看了有关上述所有内容的文档，但我对每次展开树中的项目时树视图用来加载更深阶段的整个回调函数有点困惑。

让我们以剑道文档中的示例为例：

```
var homogeneous = new kendo.data.HierarchicalDataSource({
transport: {
    read: {
        url: "http://demos.kendoui.com/service/Employees",
        dataType: "json"
    }
},
schema: {
    model: {
        id: "EmployeeId",
        hasChildren: "HasEmployees"
    }
}
});

$("#treeview").kendoTreeView({dataSource: homogeneous}); 
```

JSON 样本数据：

```
 {
"employees": [
{"EmployeeId":2,"FullName":"Andrew Fuller","HasEmployees":true,"ReportsTo":null},
{"EmployeeId":3,"FullName":"Carl Jenkins","HasEmployees":true,"ReportsTo":null},
{"EmployeeId":4,"FullName":"Aston Miller","HasEmployees":false,"ReportsTo":2},
{"EmployeeId":5,"FullName":"Damon Sherbands","HasEmployees":false,"ReportsTo":2},
{"EmployeeId":6,"FullName":"Dariel Hanks","HasEmployees":true,"ReportsTo":null},
{"EmployeeId":7,"FullName":"Jason Jackson","HasEmployees":false,"ReportsTo":3},
{"EmployeeId":8,"FullName":"Reylen Scribbs","HasEmployees":false,"ReportsTo":6}
]
} 
```

因此，我必须在“http://demos.kendoui.c​​om/service/Employees”上设置一个休息服务器，该服务器接受来自提供“EmployeeId”的树的 GET，然后在文件中进行搜索并返回那些“ReportTo”收到“EmployeeId”...?? 树想要显示初始节点时会发生什么？

就像是：

```
@Path("/Employees")
@GET
@Produces(MediaType.TEXT_HTML)
public String returnEmployees(@QueryParam("EmployeeId") int accID) {
    //search the employees.json
    return "<head></head><body><pre>" + searchResultsString + "</pre></body>";
} 
```

如何有效地搜索 JSON 文件并以字符串形式返回所有结果？或者，如果所有这些都是错误的，有人可以帮助我理解所有 GET 和回调的东西吗？也许它确实与我听说过的 jsonp 有关？这里有点迷失......

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:21:20.757

您是否能够创建具有以下结构的 JSON 文件（类似于您建议的 XML 格式）？

```
[
    {
        "id"   :100,
        "text" :"tree",
        "items":[
            {
                "id"   :1,
                "text" :"Vehicle",
                "items":[
                    {
                        "id"   :2,
                        "text" :"Cars",
                        "items":[
                            {
                                "id"  :3,
                                "text":"FM-1100"
                            },
                            {
                                "id"  :4,
                                "text":"FM-4200"
                            }
                        ]
                    },
                    {
                        "id"   :5,
                        "text" :"Bikes",
                        "items":[
                            {
                                "id"  :6,
                                "text":"FM-3100"
                            }
                        ]
                    }
                ]
            },
            {
                "id"   :7,
                "text" :"Personnel",
                "items":[
                    {
                        "id"   :8,
                        "text" :"Personnel",
                        "items":[
                            {
                                "id"   :9,
                                "text" :"Clients",
                                "items":[
                                    {
                                        "id"  :10,
                                        "text":"GH-3000"
                                    }
                                ]
                            },
                            {
                                "id"   :11,
                                "text" :"VIPs",
                                "items":[
                                    {
                                        "id"  :12,
                                        "text":"GH-3100"
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    }
] 
```

其中每个元素都有一个`id`将`text`显示在树中的 a 和一个`items`包含树的每个子元素的数组。

如果是这样，您的代码应该是：

```
$.getJSON("/testTree.json", function (data) {
    $("#treeview").kendoTreeView({
        dataSource: data
    });
}) 
```

`/testTree.json`JSON 文件的 URL在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T12:06:07.083

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-28T11:20:26.870

嗨：您应该在架构中添加数据属性：

```
schema: {
    model: {
        id: "EmployeeId",
        hasChildren: "HasEmployees",
        data: "employees"
    }
} 
```

# javascript - 堆叠的 jQuery UI 手风琴没有调整大小

> ID：13286875
> 
> 赞同：0
> 
> 时间：2012-11-08T10:11:17.947
> 
> 标签：javascript, css, asp.net-mvc-3, jquery-ui, accordion

温柔点我是这个网络开发游戏的新手。我只是在努力学习。

代码：

```
<h4>Monday</h4>
<div id="first_accordian"> 
    <h5>First Section</h5>
    <div>
        Some stuff. 
    </div>
    <h5>Second Section</h5>
    <div>
        Some stuff. 
    </div>
</div>

<h4>Tuesday</h4>
<div id="second_accordian"> 
    <h5>First Section</h5>
    <div>
        Some stuff. 
    </div> 
</div>

<script type="text/javascript">
    $(document).ready(function() {
    $("[id$=_accordian]").accordion({ collapsible: true, active: false });
    });
</script> 
```

显然，这只是我在 ASP.NET MVC3 应用程序中的部分视图的简化。但我使用的是 jQuery UI 和手风琴小部件，因此您需要参考它们才能使上面的代码正常工作。

问题：

我有一个问题，当我展开一个手风琴元素时，它会覆盖它下面的任何 HTML。我想要的行为是我有一组堆叠的手风琴，当在任何手风琴中选择任何元素时，它们都会向上或向下移动。

有谁知道我如何用堆叠的手风琴做到这一点？或者横向思考。有什么方法可以将不是手风琴元素的静态标题添加到手风琴（在上面显示为每个手风琴上方的标题；星期一，星期二）？

是否有我应该绑定的东西的大小调整事件？我不知道从哪里开始，欢迎任何指点！

编辑：刚刚将我自己的代码复制到一个文件中以进行检查和实验......它完全按照我的需要工作。但它不在我的应用程序中。所以我猜这一定是由于我的代码之外发生的其他事情。

所以......新问题：什么可以阻止调整大小和创建这个覆盖问题？

# c++ - boost::range_iterator 和 boost::iterator_range 混淆

> ID：13286876
> 
> 赞同：11
> 
> 时间：2012-11-08T10:11:19.023
> 
> 标签：c++, boost, boost-range

我一直在浏览`boost::range`图书馆并注意到`boost::range_iterator`和`boost::iterator_range`。我在这里对这些术语感到困惑。谁能解释一下两者之间的区别以及何时使用什么？此外，如果您能指出我使用 boost range 库的示例示例来了解更多关于它的信息，那将是很好的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T13:43:22.710

> 谁能解释一下两者之间的区别以及何时使用什么？

range_iterator 用于通过以下方式获取范围迭代器的类型：

```
range_iterator< SomeRange >::type 
```

它类似于[std::iterator_traits](http://www.sgi.com/tech/stl/iterator_traits.html)。例如，您可以从迭代器中获取值类型：

```
std::iterator_traits<int*>::value_type 
```

iterator_range 是范围和迭代器之间的桥梁。例如 - 你有一对迭代器，你想将它们传递给只接受范围的算法。在这种情况下，您可以使用[iterator_range](http://www.boost.org/doc/libs/1_52_0/libs/range/doc/html/range/reference/utilities/iterator_range.html)将迭代器包装到范围内。或者更好 - make_iterator_range - 这将有助于推断类型（就像 std::make_pair 所做的那样）：

```
make_iterator_range(iterator1,iterator2) 
```

返回范围。

考虑以下示例：

[现场演示](http://coliru.stacked-crooked.com/a/305357b11d471261)

```
#include <boost/range/iterator_range.hpp>
#include <boost/range/algorithm.hpp>
#include <boost/range/iterator.hpp>
#include <typeinfo>
#include <iostream>
#include <ostream>

using namespace boost;
using namespace std;

struct print
{
    template<typename T>
    void operator()(const T &t) const
    {
        cout << t << " ";
    }
};

int main()
{
    typedef int Array[20];
    cout << typeid( range_iterator<Array>::type ).name() << endl;

    Array arr={11,22,33,44,55,66,77,88};
    boost::for_each( make_iterator_range(arr,arr+5) ,print());
} 
```

> 此外，如果您能指出我使用 boost range 库来了解更多关于它的示例示例，那将是很好的，除了文档

如需快速总结 - 请查看[此幻灯片](https://github.com/boostcon/cppnow_presentations_2012/blob/master/tue/boost_range.pdf?raw=true)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T13:44:33.990

通常，您不会`boost::range_iterator`直接使用，因为它是一个模板元函数，它接受给定的范围（不管范围的类型），并返回它的 begin()/end() 方法的类型。

`boost::iterator_range`用于从一对预先存在的迭代器中创建一个新范围。这将更有可能使用，通常在获取仍然基于迭代器的代码并使用它转换为范围时。

# iis - 我无法通过 IIS7.5 运行经典的 asp 应用程序

> ID：13286877
> 
> 赞同：1
> 
> 时间：2012-11-08T10:11:21.080
> 
> 标签：iis, asp-classic

当我尝试在 iis7.5 上运行经典的 asp 应用程序时，我收到错误“您请求的页面类型未提供，因为它已被明确禁止。扩展名 '.asp' 可能不正确。请查看 URL并确保拼写正确。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:23:44.117

在 IIS 7 和 7.5 中默认不启用经典 ASP。它很容易启用，请参阅[http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8/classic-asp-not-installed -by-default-on-iis](http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8/classic-asp-not-installed-by-default-on-iis)

# asp.net - ASP.NET Membership ChangePassword，UpdateUser 丢失更新异常

> ID：13286878
> 
> 赞同：0
> 
> 时间：2012-11-08T10:11:22.257
> 
> 标签：asp.net, c#-4.0, asp.net-membership, change-password

我发现我认为 MembershipProvider 的一个非常烦人的问题......我希望其他人已经遇到过这个问题并优雅地解决了它。

我创建了一种在更改密码时计算密码强度的方法，以便我可以将其存储以用于管理目的（审核、强制重置等）因为我不想存储纯文本密码，所以这个值需要是在密码更改期间计算。

更糟糕的是，我正在对现有代码库进行这种改进，尝试不触及特定项目，尽可能地支持较小的配置更改。调用我的会员提供程序的代码按以下顺序调用：

获取用户更改密码更新用户

不幸的是，在 ChangePassword 之后调用 UpdateUser 会导致丢失更新异常。对我来说，这似乎是提供者结构中的一个根本缺陷。ChangePassword 是验证密码所必需的，但 UpdateUser 无法知道进行了哪些更改。

有没有其他人遇到过这个问题？

注意：我知道我可以将更改密码工作流程分开并完全避免 UpdateUser。我试图不这样做，因为它需要我完全替换现有代码块，这些代码块可能会在现有代码库的未来版本中更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:30:02.213

我通过派生一个新的 MembershipUser 并在那里覆盖 ChangePassword 解决了这个问题，它在其基本调用中调用了 ChangePassword。

我调用了基本方法，如果结果为真，则将我的密码“元数据”构建到那里的对象中。当更新方法被调用后，正确的数据出现在对象上。

如果有人找到更好的解决方案，我会暂时保留这个问题。

# python - GAE Python2.7客户端通过证书认证

> ID：13286879
> 
> 赞同：2
> 
> 时间：2012-11-08T10:11:22.987
> 
> 标签：python, google-app-engine, authentication, ssl

我正在 GAE 上编写一个应用程序，它将一个 RESTlike API 暴露给固定数量的远程服务器，这些服务器可能正在使用任何操作系统/软件。目前我正在思考如何轻松地识别和验证这些远程服务器。
由于明显的安全问题，我试图避免自己编写太多的程序。

如果我使用的是 Apache 或 nginx，我会使用 SSL 客户端证书并让客户端选择他们想要联系 API、curl、webapp 的任何内容。
据我了解，目前 GAE 不提供以这种方式检查客户端证书的功能。

在 Py2.7 的 GAE 中还有其他方法可以做到这一点吗？
如果这是*不可能*的或非常麻烦的，谁能指出我在这种情况下识别和验证远程服务器的另一种好方法？

我只能发布我检查的两个链接
[https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-python/c5PHMrAMAcI](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-python/c5PHMrAMAcI)
[https://sites.google.com/site/oauthgoog/](https://sites.google.com/site/oauthgoog/authenticate-google-app-engine-app)在过去的几天里，[authenticate-google-app-engine-app](https://sites.google.com/site/oauthgoog/authenticate-google-app-engine-app)
加上*更多。*我发现了一些与我相似的问题，但至少对我来说没有一个令人满意的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:29:10.400

我建议查看目前处于受信任测试阶段的[Google Cloud Endpoints 。](http://endpoints-trusted-tester.appspot.com)我在这个[答案](https://stackoverflow.com/a/11680605/498860)中更详细地讨论了它，但你会得到的主要内容是：

*   定义 API 的简单方法
*   自动支持 OAuth 2

我们主要针对在其应用程序后端构建 API 的开发人员，但其他“同一方”（例如，您是 API 开发人员和消费者）使用应该同样有效。

# r - 匹配不同数据帧上的多列并获得其他列作为结果

> ID：13286881
> 
> 赞同：13
> 
> 时间：2012-11-08T10:11:24.723
> 
> 标签：r, dataframe, matching, multiple-columns

我有两个大数据框，一个 ( `df1`) 有这个结构

```
 chr    init
1  12  25289552
2   3 180418785
3   3 180434779 
```

另一个（`df2`）有这个

```
 V1    V2     V3
10  1     69094 medium
11  1     69094 medium
12  12 25289552 high
13  1     69095 medium
14  3 180418785 medium
15  3 180434779 low 
```

我要做的是添加 to 的列`V3`，`df2`以`df1`获取突变的信息

```
 chr    init  Mut
1  12  25289552 high
2   3 180418785 medium
3   3 180434779 low 
```

我正在尝试将两者都加载到 R 中，然后使用 match 进行 for 循环，但它不起作用。你知道有什么特别的方法可以做到这一点吗？我也愿意使用 awk 或类似的东西

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T10:40:20.957

采用`merge`

```
df1 <- read.table(text='  chr    init
1  12  25289552
2   3 180418785
3   3 180434779', header=TRUE)

df2 <- read.table(text='    V1    V2     V3
10  1     69094 medium
11  1     69094 medium
12  12 25289552 high
13  1     69095 medium
14  3 180418785 medium
15  3 180434779 low', header=TRUE)

merge(df1, df2, by.x='init', by.y='V2') # this works!
       init chr V1     V3
1  25289552  12 12   high
2 180418785   3  3 medium
3 180434779   3  3    low 
```

以您显示的方式获得所需的输出

```
output <- merge(df1, df2, by.x='init', by.y='V2')[, c(2,1,4)]
colnames(output)[3] <- 'Mut' 
output
  chr      init    Mut
1  12  25289552   high
2   3 180418785 medium
3   3 180434779    low 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T10:40:34.873

```
df1 <- read.table(textConnection("   chr    init
 1  12  25289552
 2   3 180418785
 3   3 180434779"), header=T)

df2 <- read.table(textConnection("    V1    V2     V3
 10  1     69094 medium
 11  1     69094 medium
 12  12 25289552 high
 13  1     69095 medium
 14  3 180418785 medium
 15  3 180434779 low"), header=T)

# You have to select the values of df2$V3 such as their corresponding V2 
# are equal to the values of df1$init
df1$Mut <- df2$V3[ df2$V2 %in% df1$init]

df1
  chr      init    Mut
1  12  25289552   high
2   3 180418785 medium
3   3 180434779    low 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:38:52.483

做

```
df3 <- merge( df1, df2, by.x = "init", by.y = "V2" )
df3 <- df3[-3]
colnames( df3 )[3] <- "Mut" 
```

给你你想要的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-12T18:05:52.340

@user976991 评论对我有用。

相同的想法，但需要在两列上匹配。

我的域上下文是具有多个条目（可能是价格条目）的产品数据库。想要删除旧的 update_nums，只保留最新的 product_id。

```
raw_data <- data.table( product_id = sample(10:13, 20, TRUE), update_num = sample(1:3, 20, TRUE), stuff = rep(1, 20, sep = ''))
max_update_nums <- raw_data[ , max(update_num), by = product_id]
distinct(merge(dt, max_update_nums, by.x = c("product_id", "update_num"), by.y = c("product_id", "V1"))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-16T20:52:17.540

当我最近遇到问题时，我最终在数据集中创建了一个新列，并将其用作单个列来加入。

```
#create new column for join
df1$id <- paste0("chr" , "init")
df2$id <- paste0("V1","V2") 
# join and select outputs
df3 <-  dplyr::left_join(x = df1, y = df2, by = "id")%>%
 dplyr::select(chr, init, V3) 
```

它对我有用。

# c# - 列出排列（未知数）

> ID：13286882
> 
> 赞同：3
> 
> 时间：2012-11-08T10:11:29.727
> 
> 标签：c#

> **可能重复：**
> [List<List<int>> 的组合](https://stackoverflow.com/questions/545703/combination-of-listlistint)

我有多个列表，可以是 2 个或 3 个最多 10 个列表，其中包含多个值。现在我需要做的是获得所有这些的组合。

例如，如果我有 3 个具有以下值的列表：

*   清单 1：3、5、7
*   清单 2：3、5、6
*   清单 3：2、9

我会得到这些组合

*   3,3,2
*   3,3,9
*   3,5,2等..

现在的问题是我不能轻易做到这一点，因为我不知道我有多少个列表，因此确定我需要多少个循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:41:14.947

您可能可以使这变得容易得多，但这就是我刚才的想法：

```
List<List<int>> lists = new List<List<int>>();
lists.Add(new List<int>(new int[] { 3, 5, 7 }));
lists.Add(new List<int>(new int[] { 3, 5, 6 }));
lists.Add(new List<int>(new int[] { 2, 9 }));

int listCount = lists.Count;
List<int> indexes = new List<int>();
for (int i = 0; i < listCount; i++)
    indexes.Add(0);

while (true)
{
    // construct values
    int[] values = new int[listCount];
    for (int i = 0; i < listCount; i++)
        values[i] = lists[i][indexes[i]];

    Console.WriteLine(string.Join(" ", values));

    // increment indexes
    int incrementIndex = listCount - 1;
    while (incrementIndex >= 0 && ++indexes[incrementIndex] >= lists[incrementIndex].Count)
    {
        indexes[incrementIndex] = 0;
        incrementIndex--;
    }

    // break condition
    if (incrementIndex < 0)
        break;
} 
```

如果我没有完全错，这应该是列表`O(Nm)`的数量和排列的数量（所有列表长度的乘积）。`m``N``m`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:21:00.370

你可以制作一个`List<List<yourValueType> mainlist`你所有的清单。然后用一个简单的

```
int numberOfIterations = 1;
foreach(var item in mainlist)
{
    numberOfIterations *= item.Count;
} 
```

这将获得您总共必须执行的迭代次数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:53:09.267

非递归解决方案，适用于任何`IEnumerable`s（不仅仅是列表）而不固化它们：

```
public static IEnumerable<IEnumerable<T>> Permutations<T>(
    this IEnumerable<IEnumerable<T>> source)
{
    // Check source non-null, non-empty?

    var enumerables = source.ToArray();
    Stack<IEnumerator<T>> fe = new Stack<IEnumerator<T>>();
    fe.Push(enumerables[0].GetEnumerator());

    while (fe.Count > 0)
    {
        if (fe.Peek().MoveNext())
        {
            if (fe.Count == enumerables.Length)
                yield return new Stack<T>(fe.Select(e => e.Current));
            else
                fe.Push(enumerables[fe.Count].GetEnumerator());
        }
        else
        {
            fe.Pop().Dispose();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:24:59.910

作为替代方案，遵循 rawlings 的一般想法，以下应该有效

```
public static IEnumerable<IEnumerable<T>> Permutations<T> (this IEnumerable<IEnumerable<T>> underlying)
{
    var enumerators = new Queue<IEnumerator<T>>(underlying.Select(u => u.GetEnumerator())
                                                          .Where(enumerator => enumerator.MoveNext());
    Boolean streaming = enumerators.Any();
    if(streaming)
    {
        IEnumerable<T> result;

        IEnumerator<T> finalEnumerator = enumerators.Dequeue();
        Func<Boolean,Boolean> finalAction = b => b ? b : finalEnumerator.MoveNext();

        Func<Boolean,Boolean> interimAction = 
         enumerators.Reverse()
                    .Select(enumerator => new Func<Boolean,Boolean>(b => b ? b : (enumerator.MoveNext() ? true : enumerator.ResetMove())))
                    .Aggregate((f1,f2) => (b => f1(f2(b)));
        enumerators.Enqueue(finalEnumerator);

        Func<Boolean,Boolean> permutationAction = 
                              interimAction == null ? 
                              finalAction :
                              b => finalAction(interimAction(b));

        while(streaming)
        {
              result = new Queue<T>(enumerators.Select(enumerator => enumerator.Current))
              streaming = permutationAction(true);
              yield return result;
        }
}

private static Boolean ResetMove<T>(this IEnumerator<T> underlying)
{
     underlying.Reset();
     underlying.MoveNext();
     return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T10:27:29.613

不是很有效但很容易理解的方法可能是递归地解决这个任务。考虑一种计算**N**个列表的排列的方法。**如果您有这样的方法，那么您可以通过将N**个列表的所有排列与最后一个列表中的每个数字相结合来轻松计算**N+1 个列表的排列。****您还应该处理0**列表排列的极端情况。然后实现似乎很简单：

 ****```
IEnumerable<IEnumerable<T>> GetAllPermutations<T>(IEnumerable<IEnumerable<T>> inputLists)
{
    if (!inputLists.Any()) return new [] { Enumerable.Empty<T>() };
    else
    {
        foreach (var perm in GetAllPermutations(inputLists.Skip(1)))
            foreach (var x in inputLists.First())
                yield return new[]{x}.Concat(perm);
    }
} 
```****

# java - Java中不允许异常的函数

> ID：13286888
> 
> 赞同：1
> 
> 时间：2012-11-08T10:11:45.103
> 
> 标签：java, function, exception

在 C++ 中，我可以声明一个不能进一步抛出异常的函数，如下所示

```
int myfunction (int param) throw(); // no exceptions allowed 
```

我可以在 Java 编程语言中有这样的声明吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T10:13:43.570

不，任何方法总是可以抛出未经检查的异常（`RuntimeException`和`Error`）。

您只需要在方法声明中列出检查的异常（`Exception`不派生自的子类）。`RuntimeException`

还有一个丑陋的旁注：虽然编译器*确实*检查没有抛出未声明的已检查异常，但您*可以*使用一些丑陋的技巧来解决这个问题（有时称为[偷偷摸摸的 throw](http://www.jayway.com/2010/01/29/sneaky-throw/)，Project Lombok[明确支持它](http://projectlombok.org/features/SneakyThrows.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:14:09.677

不，不是那种意义上的。您可以声明一个函数不引发异常（只需不包含 throws 关键字），但您根本无法阻止函数引发任何异常。想象一下，您将在该函数中除以零 - 程序的行为将是未定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:16:52.630

有一种方法可以确保不会将异常抛出到上一层。只需将所有代码放在 try catch 语句中，这样即使方法中发生任何异常，它也会始终被捕获。

但是，请记住，它只会确保异常不会传播到上一个（调用）层。它肯定不会确保异常不会发生在方法体中

# c - malloc() 在 Xcode 中导致 EXC_BAD_ACCESS 错误

> ID：13286892
> 
> 赞同：3
> 
> 时间：2012-11-08T10:11:52.843
> 
> 标签：c, xcode, malloc

我正在尝试为我的大学课程实现链接列表数据结构，但在执行代码时，以下行会产生 EXC_BAD_ACCESS(code=1, address=0x8) 错误。

```
temp->next = (ptrtonode) malloc(sizeof(struct node)); 
```

以下是完整的代码。

```
#include <stdio.h>
#include <stdlib.h>
typedef struct node *ptrtonode;
typedef ptrtonode header;

struct node
{
    int data;
    ptrtonode next;
};

ptrtonode create(int n)
{
    int i;
    header temphead = NULL;
    ptrtonode temp = temphead;
    for(i=0;i<n;i++)
    {
        temp->next = (ptrtonode) malloc(sizeof(struct node));
        printf("Enter data for node %d: ", i+1);
        scanf("%d", &temp->next->data);
        temp = temp->next;
    }
    temp->next = NULL;
    return temphead;
}

int main(int argc, const char * argv[])
{
    header head;
    int n;
    printf("How many nodes do you wish to create?");
    scanf("%d", &n);
    head = create(n);
} 
```

任何帮助，将不胜感激。谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:14:29.000

在函数`for`内部的循环的第一次迭代中，它被取消引用，导致失败（不导致失败）。您将需要稍微重构代码以防止取消引用指针。`create()``temp``NULL``malloc()``NULL`

其他要点：

*   `malloc()`不需要转换返回值。
*   检查结果`scanf()`以确保`n`分配了一个有效的整数（并确认`int`是正数）：

    ```
    /* scanf() returns the number of assignments made,
       which in this case should be 1\. */
    if (1 == scanf("%d", &n) && n > 0)
    {
        /* 'n' assigned a sensible value. */
    } 
    ```

# c# - 使用 mvvm 根据我的数据源创建动态网格

> ID：13286894
> 
> 赞同：0
> 
> 时间：2012-11-08T10:11:59.463
> 
> 标签：c#, wpf, mvvm

你知道这是否可行，如果可以，该怎么做？

我有一组数据将在运行时在我的视图模型中创建。现在，我想在网格中将这些数据呈现给用户，该网格会根据我的数据源中数据项的数量自动创建列和行。创建窗口时，它不应该再次生成它 - 让它保持静态，因为我认为这是最简单的。

我的数据源是一个包含文件路径、文件名和图像的类。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:29:02.057

对的，这是可能的。您可以使用 Microsoft [DataGrid](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.aspx)。它有很多有用的功能（自动列生成、虚拟化、列排序和重新排序......）

或者，您可以使用简单的 ItemsControl 并将其 ItemsPanel 设置为 Grid，然后实现自定义逻辑以在 ItemsSource 更改时生成行/列。

# java - 无法初始化类 org.springframework.aop.framework.DefaultAopProxyFactory

> ID：13286900
> 
> 赞同：1
> 
> 时间：2012-11-08T10:12:16.863
> 
> 标签：java, spring, hibernate, spring-mvc

我正在 Spring 3 MVC 和 Hibernate 注释中开发应用程序。在运行应用程序时，我遇到了异常。我已经添加了所有必需的 jar，如 aopallicance、asm、cgilib、spring-aop、spring-asm、spring-aspects 等，但我仍然收到此异常，请帮助，谢谢

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.aop.config.internalAutoProxyCreator': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.aop.framework.autoproxy.InfrastructureAdvisorAutoProxyCreator]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: Could not initialize class org.springframework.aop.framework.DefaultAopProxyFactory
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:965)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196)
    org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:710)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:410)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:467)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:483)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:358)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:325)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:37:52.943

你不提

```
org.aspectj:aspectjrt
org.aspectj:aspectjweaver 
```

这些可能也是必要的。不过，请向我们展示您的 POM 或 build.xml！

干杯，

# c++ - 具有 c++ 代码生成和 doxygen 支持的免费 UML 工具

> ID：13286904
> 
> 赞同：7
> 
> 时间：2012-11-08T10:12:26.270
> 
> 标签：c++, uml, doxygen

我知道代码生成和 doxygen 支持等功能通常被认为是商业的，但我想知道是否有任何免费的 UML 工具支持支持 doxygen 文档的 c++ 代码生成？

生成带有文档的模型并且不必重复/编辑它以启用 doxygen 支持将非常有用。

编辑：忘了提到我正在Linux（Ubuntu）下开发

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T14:34:58.380

免费且非常简单易用，带有 UML + [dia2code的](http://dia2code.sourceforge.net/)[dia](http://sourceforge.net/projects/dia-installer/) （矢量图编辑器） 适用于“ada|c|cpp|csharp|idl|java|php|php5|python|ruby|shp|sql”

首先，您绘制 UML 类图，保存它，然后在 .dia 文件上使用 dia2code。

因为我也尝试过 umbrello (userbase.kde.org/Umbrello)，它具有更多功能，例如导入代码、包/命名空间......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T10:18:05.317

[StarUML](http://staruml.sourceforge.net/en/) [应该可以](http://staruml.sourceforge.net/docs/user-guide%28en%29/ch08.html)做到。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T13:54:02.390

试试[BOUML](http://www.bouml.fr/index.html)，它是一个优秀的多平台 UML 工具箱

# mysql - MySQL在插入之前触发语法错误？

> ID：13286905
> 
> 赞同：1
> 
> 时间：2012-11-08T10:12:27.870
> 
> 标签：mysql

我正在尝试创建一个简单的 Before Insert MySQL 触发器，以检查表中是否存在任何重复项。但是我在带有`(*)`. 怎么了 ？

```
 delimiter ;

(*)    CREATE TRIGGER `BookLanguages_BeforeInsertTrigger`
       BEFORE INSERT ON `BookLanguages`
       FOR EACH ROW
       BEGIN
            IF (exists(select * from Languages bl where bl.BookID = new.BookID and bl.LanguageID = new.LanguageID)) THEN
               SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'An error occurred';
            END IF;
(*)    END; 
```

我正在使用社区服务器 v5.5.21

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:14:15.770

使用不同的分隔符，例如：

```
DELIMITER // 
```

...然后`//`在您的`END //`线路中使用。

原因是您的倒数第二行中的分号将所有内容发送回服务器，因此服务器看不到您的 final`END;`并在没有看到最后一行的情况下创建触发器。在它看来，这是一个语法错误。

该上下文中的命令的目的`DELIMITER`是区分触发器中每个语句的结尾（用于服务器）和触发器的结尾（用于客户端将其发送到服务器）。虽然它们不同，但您仍然可以在触发器主体中使用分号，而不会让客户认为您已经终止了语句。

# cocoa - 使用 Doxygen 记录自动生成的代码 (NSManageObjects)

> ID：13286909
> 
> 赞同：2
> 
> 时间：2012-11-08T10:12:51.563
> 
> 标签：cocoa, documentation, doxygen, nsmanagedobject

我即将记录一个使用 Doxygen 使用 NSManageObjects 的库。由于 NSManageObjects 是从数据模型中自动生成的，如果我更改模型中的某些内容，则将再次生成包含修改后的 managedobject 的文件。

我不想每次对模型进行更改时都重写文档。

你知道有什么方法可以做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:21:05.397

我发现了如何实现它。Doxygen 允许您记录来自其他文件的类。无需在 .h 中执行此操作。

Doxygen 解析 .h 文件并为该类创建文档框架。然后，您可以从任何其他自定义文件添加文档。

问题是您必须手动指定一些标签才能将 .doc 文件中的信息与 .h 文件中声明的类链接。

请参阅： [其他地方的 Doxygen 文档](http://www.doxygen.nl/manual/docblocks.html#Documentation%20at%20other%20places)

这：[没有记录的属性](https://stackoverflow.com/questions/13395930/documenting-a-class-in-doxygen-in-a-doc-file-property-not-working)

应该足以了解我是如何做到的。

# c# - WebRequest 和协议无关的 URL

> ID：13286910
> 
> 赞同：2
> 
> 时间：2012-11-08T10:12:53.657
> 
> 标签：c#, asp.net, httpwebrequest

在 Web 应用程序中，我必须首先检查图像是否存在，然后显示该图像或虚拟图像。

我使用以下代码，它适用于以下 URL：

*   “ **http://www.somedomain.com/niceimage.png** ”
*   “ **https://www.somedomain.com/niceimage.png** ”。

```
public virtual bool WebResourceExists(string url)
{
    WebHeaderCollection headers = null;
    WebResponse response = null;
    try
    {
        WebRequest request = WebRequest.Create(url);
        request.Method = "HEAD";
        response = request.GetResponse();
        headers = response.Headers;
        bool result = int.Parse(headers["Content-Length"]) > 0;
        return result;
    }
    catch (System.Net.WebException)
    {
        return false;
    }
    catch (Exception e)
    {
        _log.Error(e);
        return false;
    }
    finally
    {
        if (response != null)
        {
            response.Close();
        }
    }
} 
```

在某些地方，该方法是使用与协议无关的 url 调用的，例如`"//www.somedomain.com/niceimage.png"`.

此类 url 会引发异常：

> `System.InvalidCastException: Unable to cast object of type 'System.Net.FileWebRequest' to type 'System.Net.HttpWebRequest'`

有没有办法使用与协议无关的 url，而不是仅仅`"http:"`在 url 前面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:38:26.413

与协议无关的 URL 由浏览器使用当前协议解析，用于避免从 HTTPS 页面发出 HTTP 请求。

在服务器上执行的代码实际上并没有“当前协议”的概念。虽然 ASP.NET 可以确定当前请求是通过 HTTP 还是 HTTPS 发出的，但这些`WebRequest`类并不限于 ASP.NET 应用程序，因此它们不能依赖于此。

您将需要指定协议。使用 HTTP 还是 HTTPS 取决于您是否担心第三方窃听您的服务器与“www.somedomain.com”之间的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:53:25.543

两步过程怎么样，检查http版本，如果不存在检查https。我已经快速编写了一个基本示例，说明它是如何工作的，但无法正确测试和检查它，因此可能需要一些整理/重构！

```
public virtual bool WebResourceExists(string url)
{
    WebHeaderCollection headers = null;
    WebResponse response = null;
    try
    {
        if (url.StartsWith(@"//") {
           url = "http:";
        }
        WebRequest request = WebRequest.Create(url);
        request.Method = "HEAD";
        response = request.GetResponse();
        headers = response.Headers;
        bool result = int.Parse(headers["Content-Length"]) > 0;
        return result;
    }
    catch (System.Net.WebException)
    {
        if (url.StartsWith(@"http://") {
           url = url.Replace("http://","https://");
        } else {
           return false;
        }
        try {
            WebRequest request = WebRequest.Create(url);
            request.Method = "HEAD";
            response = request.GetResponse();
           headers = response.Headers;
           bool result = int.Parse(headers["Content-Length"]) > 0;
           return result;
       }
       catch (System.Net.WebException)
       {
            return false;
       }
    }
    catch (Exception e)
    {
        _log.Error(e);
        return false;
    }
    finally
    {
        if (response != null)
        {
            response.Close();
        }
    }
} 
```

# google-maps - 谷歌地图 setMap 不是一个函数

> ID：13286913
> 
> 赞同：7
> 
> 时间：2012-11-08T10:12:57.633
> 
> 标签：google-maps

我正在处理我的谷歌地图页面在 Firebug 中显示错误的问题。当我在经销商地图中搜索时，将触发 clearLocations() 函数。但是这个错误出现了：“ **markers[i].setMap is not a function** ”

有谁知道如何解决这个问题？我在几个论坛和群组中进行了搜索，但我使用的是 google.maps.Marker 数组，所以我找不到我的问题。

提前致谢！

代码（**clearLocations()**）：

```
function clearLocations() {
infoWindow.close();
for (var i = 0; i < markers.length; i++) {
    markers[i].setMap(null);
}
markers.length = 0;
dealers.innerHTML = ""; 
```

}

代码（**负载（）**）：

```
function load() {

map = new google.maps.Map(document.getElementById("map_canvas"), {
    //center: new google.maps.LatLng(51.30174, 10.60824),
    zoom: 10,
    mapTypeId: 'roadmap',
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU}
});
infoWindow = new google.maps.InfoWindow();
dealers = document.getElementById("dealers");

infoWindow = new google.maps.InfoWindow();
var bounds = new google.maps.LatLngBounds();

for (i = 0; i < markers.length; i++) {  
    marker = new google.maps.Marker({
        position: new google.maps.LatLng(markers[i][1], markers[i][2]),
        map: map
    });

    var pos = new google.maps.LatLng(markers[i][1], markers[i][2]);
    bounds.extend(pos);

    google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
        infowindow.setContent(markers[i][0]);
        infowindow.open(map, marker);
    }
})(marker, i));
}
map.fitBounds(bounds); 
```

}

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T10:24:43.953

那么，如果我理解正确的话，Markers 数组是一个 LatLongs 数组吗？或者它是 google.maps.Marker 类型的数组？如果是前者，那么它将没有任何可用的地图功能，因为它不是谷歌地图标记。

一个选项可能是制作一个您放置在地图上的标记数组，如下所示。

```
var marker = new google.maps.Marker({
          position: new google.maps.LatLng(markers[i][1], markers[i][2]),
          map: map
         });
mapMarkers[i] = marker; 
```

然后打电话

```
mapMarkers[i].setMap(null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T00:20:07.280

你可以试试这个 - 只是

```
 console.log('=>'+markers.length);
    for (var i = 0; i < markers.length; i++) {
      console.log('===>'+markers[i]);
      markers[i] = null;
    }
   markers = [];
   console.log('==>'+markers.length); 
```

# c# - C# applicationSettings：如何更新 app.config？

> ID：13286916
> 
> 赞同：5
> 
> 时间：2012-11-08T10:13:03.843
> 
> 标签：c#, app-config

我正在使用 .NET 4.0，我想使用该`app.config`文件来存储相同的参数设置。我执行以下操作。我使用`Settings`项目属性中的选项卡来创建我的参数。

这会在`app.config`文件中添加如下信息：

```
<MyApp.Properties.Settings>
      <setting name="param1" serializeAs="String">
        <value>True</value>
      </setting>
<MyApp.Properties.Settings> 
```

在我的视图模型中（在我的代码中），我可以通过以下方式访问信息：

```
bool myBool = MyApp.Properties.Default.param1; 
```

当我尝试更改配置文件中的值时，我尝试这样做：

```
Properties.Settings.Default.param1 = false; 
```

但这会导致错误，即`param1`只读。

那么如何从我的代码中更新我的配置文件呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T18:48:11.547

这是我为“applicationSettings”部分更新或添加条目到 app.config 的功能。可能有更好的方法，但这对我有用。如果有人可以提出更好的方法，请分享，我们将一直在寻找更好的方法。

```
 static string APPNODE = System.Reflection.Assembly.GetExecutingAssembly().GetName().Name + ".Properties.Settings";
    static DateTime now = DateTime.Now;
    Utilities.UpdateConfig(APPNODE, "lastQueryTime", now.ToString());

    static public void UpdateConfig(string section, string key, string value)
    {
        Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

        ClientSettingsSection applicationSettingsSection = (ClientSettingsSection)config.SectionGroups["applicationSettings"].Sections[section];
        SettingElement element = applicationSettingsSection.Settings.Get(key);

        if (null != element)
        {
            applicationSettingsSection.Settings.Remove(element);
            element.Value.ValueXml.InnerXml = value;
            applicationSettingsSection.Settings.Add(element);
        }
        else
        {
            element = new SettingElement(key, SettingsSerializeAs.String);
            element.Value = new SettingValueElement();
            System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
            element.Value.ValueXml = doc.CreateElement("value");

            element.Value.ValueXml.InnerXml = value;
            applicationSettingsSection.Settings.Add(element);
        }

        config.Save(ConfigurationSaveMode.Modified);
        ConfigurationManager.RefreshSection("applicationSettings");            
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T09:51:01.950

Well, I read the link of Hari Gillala, in which one user suggested to edit directly the app.config file, that is a xml file.

So in project properties-->settings I create the parameters that I need. Then, to load a parameter in code I do the following:

```
_myViewModelProperty = MyApp.Properties.Settings.Default.MyParam1; 
```

In this way, I can read easily the information of the config parameter. Is typed, so in disign time I can see if the asign is correct or not.

To update de config file, I edit the app.config file with the xml libraries of .NET.

```
 System.Xml.XmlDocument xml = new System.Xml.XmlDocument();
    xml.Load(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile);
    System.Xml.XmlNode node;
    node = xml.SelectSingleNode("configuration/applicationSettings/MyApp.Properties.Settings/setting[@name='myparam1']");
    node.ChildNodes[0].InnerText = myNewValue;
    xml.Save(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile); 
```

In this way, I create a xml document (xml variable) and load the information of the app.config file. Then, I search for the node that I want to update, update its information (InnerText property) and finally I save the changes.

In this way, I can update the app.config. It is what I want, because in a portable application, only one user will use it, and I want that the configuration is applied in any computer in which I run the application.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T10:19:18.857

您应该使用`Properties.Settings`来执行此操作。您可以查看此[文档](http://msdn.microsoft.com/en-us/library/bb397755%28v=vs.100%29.aspx)以获取更多信息。

```
//modify
Properties.Settings.Default.param1 = false;
//save the setting
Properties.Settings.Default.Save(); 
```

请注意，如果您的设置具有用户范围，它们必须是可写的，那么属性将保存在其他地方，而不是在您的本地配置文件中。有关详细信息，请参见[此处](https://stackoverflow.com/questions/481025/where-property-setting-value-stored-in-c-sharp-windows-application)。

**在评论和进一步搜索讨论后编辑：**

我的建议是切换到*AppSettings*以达到预期的效果。那是因为，经过一些搜索，我发现 appsettings 更改了 Application Data 文件夹中的 .config 文件（在我的机器上运行一些测试确认了这一点）。

看看[这个问题](https://stackoverflow.com/questions/546229/how-to-change-in-runtime-application-settings)的答案中的评论。

我不确定是否有一些解决方法，但是如果您希望您的应用程序具有可移植的 app.config 文件，我认为唯一的方法是切换到*AppSettings*，我确信可以保存找到的 app.config 更改在程序文件夹中。

**编辑2：可能的解决方案**

我找到了一种可能的解决方案来使您的应用程序可移植！您可以更改 Settings 使用的 Provider 以保存应用程序的设置，从而创建自定义 Provider。

[这个问题](https://stackoverflow.com/questions/1382617/how-to-make-designer-generated-net-application-settings-portable/2579399#2579399)的答案提供了一个代码链接，以使 applicationsettings 可移植。我想你试试看

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T10:16:59.623

将您的设置标记为用户设置。

详细文章： http: [//www.codeproject.com/Articles/25829/User-Settings-Applied](http://www.codeproject.com/Articles/25829/User-Settings-Applied)

# android - 如何在 ContentProvider 中缓存位图？

> ID：13286918
> 
> 赞同：6
> 
> 时间：2012-11-08T10:13:05.463
> 
> 标签：android

你如何理解这个注释

> **注意**：如果更频繁地访问缓存图像，例如在图像库应用程序中，ContentProvider 可能是存储缓存图像的更合适的位置。

在这篇培训文章中[https://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](https://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)？由于我无法获取`Bitmap`或`File`来自`Cursor`，如何通过 ContentProvider 缓存位图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T23:43:56.817

您实际上**可以**使用 ContentProvider 读取和写入文件。

要在您自己的 ContentProvider 中支持这一点，您必须在*getStreamTypes()*方法中包含您支持的 File MIME 类型。[在此处查看 Android ContentProvider 教程](https://developer.android.com/guide/topics/providers/content-provider-creating.html#FileMIMETypes)的 MIME 类型部分以获取更多信息。

您还需要实现*[openFile(Uri uri, String mode) 方法](https://developer.android.com/reference/android/content/ContentProvider.html#openFile%28android.net.Uri,%20java.lang.String%29)*，在该方法中，您将根据提供给 ContentResolver 的 Uri 实际选择文件目录和名称。这是该方法的示例实现：

```
 @Override
  public ParcelFileDescriptor openFile(Uri uri, String mode) throws FileNotFoundException {
      File root = getContext().getFilesDir();
      File path = new File(root, uri.getEncodedPath());
      path.mkdirs();
      File file = new File(path, "file_"+uri.getLastPathSegment());

      int imode = 0;
      if (mode.contains("w")) {
        imode |= ParcelFileDescriptor.MODE_WRITE_ONLY;
        if (!file.exists()) {
          try {
            file.createNewFile();
          } catch (IOException e) {
            e.printStackTrace();
          }
        }
      }
      if (mode.contains("r"))
        imode |= ParcelFileDescriptor.MODE_READ_ONLY;
      if (mode.contains("+"))
        imode |= ParcelFileDescriptor.MODE_APPEND;

      return ParcelFileDescriptor.open(file, imode);
  } 
```

您可以在此处使用您喜欢的任何逻辑来选择您的文件目录。此代码仅使用应用程序文件目录，但出于位图缓存的目的，这可能应该使用临时缓存目录。

最后，访问 ContentProvider 文件数据的代码应如下所示：

```
ContentResolver cr = getContext().getContentResolver();
InputStream inputStream = cr.openInputStream(uri); 
```

或者，您可以使用*ContentResolver.openOutputStream(uri)*将文件数据写入 ContentProvider。

位图缓存教程需要进行相当多的修改才能使用 ContentProvider 作为磁盘缓存，但我确实相信这就是该注释所指的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:15:53.823

我强烈建议使用该`https://github.com/nostra13/Android-Universal-Image-Loader`库来下载和缓存图像

您可以将库作为 JAR 文件下载，该文件可以轻松包含到任何 Android 项目中

来自官方页面的功能：

->多线程图像加载

-> 可以广泛调整 ImageLoader 的配置（线程池大小、HTTP 选项、内存和磁盘缓存、显示图像选项等）

->在内存和/或设备的文件系统（或 SD 卡）中缓存图像的可能性

->“听”加载过程的可能性

-> 可以使用单独的选项自定义每个显示图像调用小部件支持

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:39:24.250

提到的段落强调，与其在请求时查找和处理所有数据，不如实现一个单独的内容模型（或使用内置的），它默默地索引数据并保存预览（图像的缩略图，或前 2 行文本文件等）在磁盘上。这实现了：

1.  使用较少的 RAM，因为预处理的数据已在磁盘上准备好。例如，一个真的很长`List view`不需要`Drawable`在内存中一次加载所有预览。它可能只是在滚动时从内容模型/提供者小批量请求缓存数据到内存缓存。

2.  节省 CPU。内存中的缓存是易失性的，需要再次重新创建，而磁盘缓存使我们免于这种额外的处理。

# r - R中的多元概率密度函数

> ID：13286922
> 
> 赞同：-1
> 
> 时间：2012-11-08T10:13:21.983
> 
> 标签：r, function, if-statement

我想用 R 创建一个多元概率密度函数，将其绘制为透视图。f(x,y) 对于 [0,1]*[0,1] 是 x+y，否则为 0。我试过这个：

```
x <- seq(-0.5,1.5,length=50)*seq(0.5,1.5,length=50)
y <- x

f <- function(x,y){
  if (0<=x<=1 && 0<=y<=1){
    x+y
  } else {
    0
  }
}
f(x,y) 
```

但是该功能不起作用，我不知道如何修复它。有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:28:13.383

首先你的`if`说法是错误的。这将修复 if 语句，但仍会给出错误。

```
x <- seq(-0.5,1.5,length=50)*seq(0.5,1.5,length=50)
y <- x

f <- function(x,y){
  if (0<=x & x<=1 & 0<=y & y<=1){
    x+y
  } else {
    0
  }
}

f(x,y) 

f1 <- function(x,y){
  cond <- 0<=x &x<=1 & 0<=y&y<=1
  ifelse(cond, x+y, 0)
}

f1(x,y)
[1] 0
Warning message:
In if (0 <= x & x <= 1 & 0 <= y & y <= 1) { :
  the condition has length > 1 and only the first element will be used 
```

您需要对函数进行矢量化以便为其提供矢量参数。一种方法是使用函数`ifelse`，它是`if`和`else`

```
f1 <- function(x,y){
  cond <- 0<=x & x<=1 & 0<=y & y<=1
  ifelse(cond, x+y, 0)
}

f1(x,y)
 [1] 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000
 [9] 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.04685548 0.11224490 0.18096626
[17] 0.25301958 0.32840483 0.40712203 0.48917118 0.57455227 0.66326531 0.75531029 0.85068721
[25] 0.94939608 1.05143690 1.15680966 1.26551437 1.37755102 1.49291962 1.61162016 1.73365264
[33] 1.85901708 1.98771345 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000
[41] 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000
[49] 0.00000000 0.00000000 
```

# jquery - 为什么这个 Jquery If 和 Or 语句不起作用？

> ID：13286923
> 
> 赞同：0
> 
> 时间：2012-11-08T10:13:26.397
> 
> 标签：jquery, if-statement

我有这个在两个不同页面上工作的 if 语句，但是这两个页面都有一个名称不同的字段，所以我必须在我的 If 语句中使用 OR，但它不起作用。这是我的代码...

```
if ($("#searchValue").val().length > 100 || $("#txtSearch").val().length > 100) {
} 
```

为什么我调试，它说“未捕获的类型错误：无法读取未定义的属性'长度'”。
这是因为页面上不存在其中一个属性 ID 还是什么？我该如何解决这个问题？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:14:44.870

`val``undefined`当 jQuery 集合为空时返回。

你可以这样做 ：

```
 var s1 = $("#searchValue").val();
    var s2 = $("#txtSearch").val();
    if ((s1 && s1.length>100) || (s2 && s2.length>100)) { 
```

如果您确定拥有两个字段中的一个，则另一种解决方案：

```
 if ($("#searchValue, #txtSearch").val().length>100) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:16:27.320

将其更改为

```
if (($("#searchValue").val()!=null && $("#searchValue").val().length > 100) || ($("#txtSearch").val()!=null && $("#txtSearch").val().length > 100)) {
} 
```

代替

```
if ($("#searchValue").val().length > 100 || $("#txtSearch").val().length > 100) {
} 
```

# c# - 登录方法中的 User.Identity.IsAuthenticated 能否返回 true？

> ID：13286924
> 
> 赞同：1
> 
> 时间：2012-11-08T10:13:36.693
> 
> 标签：c#, asp.net-mvc, forms-authentication

我的 MVC 项目中有以下登录方法

```
 public ActionResult Login(LoginModel model, string returnUrl)
    {

        if (ModelState.IsValid)
        {

            if (_authenticationRepository.Login(model.UserName, model.Password))
            {                    
                var authenticationTicket = new FormsAuthenticationTicket(1, model.UserName, DateTime.Now,
                                                                         DateTime.Now.AddMinutes(20),
                                                                         model.RememberMe, "", "/");

                var cookie = new HttpCookie(FormsAuthentication.FormsCookieName,
                                                FormsAuthentication.Encrypt(authenticationTicket));
                Response.Cookies.Add(cookie);
                UserContext.CreateUserContext();
                return RedirectToLocal(returnUrl);
            }
        } 
```

UserContext.cs 这将用户/权限存储到会话中。

```
 public static void CreateUserContext()
    {
        BuildUserContext(HttpContext.Current.User);
    }

    private static void BuildUserContext(IPrincipal principalUser)
    {
        if (!principalUser.Identity.IsAuthenticated) return;

        var user = _userAccountsRepository.GetUserByUserName(principalUser.Identity.Name);

        if (user == null) return;

        var userContext = new UserContext { IsAuthenticated = true };

        var siteUser = Mapper.Map(user);

        userContext.SiteUser = siteUser;

        HttpContext.Current.Session["UserContext"] = userContext;
    } 
```

我知道 IsAuthenticated 只有在重定向后才会变为真。所以在我的 login() 方法中，是否可以确保 principalUser.Identity.IsAuthenticated 将返回 true？

或者如果不是登录方法，还有哪里是创建用户上下文的好地方？

我想要实现的是：

1.  用户登录
2.  如果登录成功，请查询 db 以获取他的角色/权限并将它们保存到会话中，这样我每次检查用户是否有权访问某个操作时都不必重新查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:23:20.500

您可以执行以下操作：

当用户第一次登录时，获取用户的角色/权限详细信息，将其序列化并存储在会话中。因此，由于此会话在内存中，因此每次您要检查用户是否有权执行操作时，请从内存中反序列化此会话，而不是转到数据库。

# ivr - 如何使用 在 vxml 中标记以说出名称？

> ID：13286925
> 
> 赞同：0
> 
> 时间：2012-11-08T10:13:37.490
> 
> 标签：ivr, vxml, voicexml

我正在尝试开发一个 vxml 应用程序来播放带有名称的欢迎提示。例如“您好 Karthikeyan 先生 .. 欢迎来到 stackoverflow 帮助热线 ...” 我希望系统在不破坏用户体验的情况下说出名称。. < say-as > 的解释为/格式属性是否有任何可能的值Nuance 平台中的标签？就像是 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:31:33.827

没有say-as 或interpret-as 属性可以帮助正确的名称。要为专有名称微调文本转语音 (TTS) 引擎，您需要使用将要配音的名称和正确的发音来更新 TTS 字典。Nuance 销售一些可以用大量常用名称更新其 TTS 词典的软件包。

# vb.net - 使用 itextsharp 在 pdf 中包含 CSS 文件

> ID：13286927
> 
> 赞同：0
> 
> 时间：2012-11-08T10:13:41.343
> 
> 标签：vb.net, itextsharp

我正在使用 iTextSharp 制作一个 pdf 文件。

但是，在源 HTML 中链接的外部 CSS 不会显示在 PDF 中。

如何包含外部 css 文件以便 iTextSharp 正确呈现？

```
Dim doc As Document = New Document 
PdfWriter.GetInstance(doc, New FileStream(Request.PhysicalApplicationPath + _ 
                                          "\ListingDetails.pdf", FileMode.Create)) 

Dim content As String = File.ReadAllText(Server.MapPath("~/PDFPage.aspx")) 

doc.Open() 

Dim parsedHtmlElements = HTMLWorker.ParseToList(New StringReader(content), Nothing) 

For Each htmlElement As Object In parsedHtmlElements 
   doc.Add(TryCast(htmlElement, IElement)) 
Next 

doc.Close() 
```

# c - fork() 是否为子进程创建父进程创建的所有变量和对象的重复实例？

> ID：13286931
> 
> 赞同：3
> 
> 时间：2012-11-08T10:13:57.880
> 
> 标签：c, multithreading, fork

假设我有一个主进程正在运行，并且在它的执行过程中它已经初始化了一些指针并创建了一些预定义结构的实例。

现在，如果我分叉这个主进程，是否为指针分配了单独的内存？并且是先前存在的变量的重复实例，为这个新进程创建的数据结构？

作为我的要求的一个例子，考虑 -

```
struct CKT
{
  ...
}

main()
{
   ...Some computations with the structure and other pointers.....
   pid_t pid = fork();
   if(pid == 0) //child
   {
       ..some more computations with the structure...but I need a 
       ..separate instance of it with all the pointers in it as well..
   }
   else if(pid > 0) // parent
   {
       ..working with the original instance of the structure..
   }
   // merging the child process with the parent...
   // after reading the data of the child processes structure's data... 
   // and considering a few cases...
} 
```

谁能解释我如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:17:08.220

是的。但是，它可能不会立即复制旧进程的内存空间。操作系统将尽可能使用写时复制，在任一进程中第一次修改每个内存页面时复制每个内存页面。

COW 使一种常见的使用`fork`（不久之后是`exec`在孩子中）有效。子进程实际上从不使用从父进程继承的大部分内存空间。

新进程中的副本将具有与旧进程中完全相同的数字地址，因此旧进程中的所有指针在新进程中仍然有效并指向新进程的对象。这是虚拟内存的一部分，它允许不同的进程使用相同的指针值来引用不同的物理内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T10:45:42.450

指针和内存内容都将为 fork 子项复制。

对于使用 fork 创建的子进程，所有类型的数据指针、内存、变量都将在单独的内存中重复。并且您不能直接更改指针，也不能直接更改来自进程子进程的内存内容。

但是您可以使用内存共享从子进程更改父进程的变量

请参阅此链接以了解如何操作：[如何在进程 fork() 之间共享内存？](https://stackoverflow.com/questions/13274786/how-to-modify-a-global-variable-in-child-fork)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T10:17:33.923

是的，理论上，`fork`系统调用将复制父堆栈等。实际上，在这种情况下，有一种通用方法，名为**copy-on-write**。

它仅在子进程试图修改此内存空间时复制给定父内存页。它允许降低`fork`系统调用的成本。

不复制的一件事是孩子的返回值`fork`：0，父亲的孩子的PID。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T10:56:56.187

是的，您的分叉进程接收所有私有映射内存的**副本**（默认内存映射通过`malloc`, `calloc`, 堆栈帧, 全局变量）

您的孩子会收到所有打开文件描述符的**共享副本。**意味着这些文件描述符将保持有效并打开，直到父和子**都关闭它们。**对这些文件描述符的搜索也是共享的。如果您希望将文件描述符设为子私有，那么您将不得不这样`fdreopen`做。否则，**非常**建议在 fork 后立即关闭子项中不需要的所有文件描述符。

您的孩子将收到**相同的共享** `MAP_SHARED`内存映射。这些将继续访问父子之间共享的相同物理内存。`shm*`这适用于通过调用系列和`mmap`with获取的所有共享内存`MAP_SHARED`。

您的孩子将**不会**收到任何标有`MADV_DONTFORK`flag via的映射`madvise`。这些将在孩子身上变得无效。这不是默认行为，除非明确使用，否则您不必担心它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T16:17:38.690

通过使用共享内存段，您可能会得到您正在寻找的结果。使用`mmap`系统调用创建一个共享内存段，并将所有共享结构放在该段中。由于您不能`malloc`在此段上使用（它由系统调用作为指向整个段的指针返回），您必须手动复制结构，并自己进行共享内存使用跟踪。

也许您可以先在本地分配数据，然后评估它们使用了多少内存，并以正确的大小进行共享内存分配。也可以将共享段重新分配到更大的大小，在这种情况下，您将不得不以某种方式从一端向另一端发出重新分配信号（也许通过使用共享映射指向的第一个整数来存储该值？）。

手册页：

*   [地图](http://pubs.opengroup.org/onlinepubs/7908799/xsh/mmap.html)
*   [蒙图](http://pubs.opengroup.org/onlinepubs/7908799/xsh/munmap.html)

# java - 如何（组织）Android UI（HTML、CSS）和原生代码（Java）之间的交互？

> ID：13286933
> 
> 赞同：0
> 
> 时间：2012-11-08T10:14:04.747
> 
> 标签：java, android, html, css, native-code

下午好。

我赶紧补充一下，我是为 Android 开发的新手。我正在编写一个地理定位服务（应用程序）。

提供 Google 的用户的标准元素不适合我。在许多互联网上曾经遇到过信息说您可以使用 CSS 和 html 为 Android 编写用户界面。

在阅读了有关该主题的大量信息后，我意识到大多数开发人员倾向于使用框架（PhoneGap..）。但这种方法不适合我，原因有两个：

1.  javascript - 它无处不在，我不知道
2.  缺乏足够的（可理解的）文档或框架指南。

正是出于这些原因，我想知道是否可以使用 html 和 CSS 编写用户界面，以及 Java 中的所有功能而不使用框架。

作为回退接口和本机代码之间的通信，即使有 javascript 的帮助，但不使用框架。

PS我的英语不好-我希望您已经理解我的问题的重点。我希望能得到你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:21:16.017

通常，Android 应用程序使用特定于 Android 的 XML 定义 UI，并且代码使用 Java，或者，如果确实需要，使用 C/C++。

可能您可以在您的 Android 应用程序中使用[WebView](http://developer.android.com/reference/android/webkit/WebView.html)，它将显示您`assets`目录中的 html 页面。

这样的 html 页面中可以包含 javascript，这将在您的代码中调用一些钩子。[我相信在The Busy Coder's Guide to Advanced Android Development](http://commonsware.com/AdvAndroid/) Chapter 1一书中对此进行了描述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:22:03.447

是的你可以。您的 html+css 都将位于 webview 中，并且有一些元素（如 webview 客户端）可以与 webview 内部的内容进行通信。

但我想给你一个警告：每个基于 Web 的应用程序都比适当的本地应用程序更慢，界面更差。此外，在不使用框架的情况下，您仍然必须了解大部分原生内容。

# javascript - IE 输入单选值总是返回 'on' 而不是设置的值

> ID：13286935
> 
> 赞同：0
> 
> 时间：2012-11-08T10:14:09.147
> 
> 标签：javascript, forms, internet-explorer

我正在动态创建一个表单并附加元素：

```
var input = document.createElement('input');
input.name = extension_id + '[]';
input.value = value.id;
input.className = 'changeable';
input.type = 'radio';
input.checked = true;
wrapper_div.appendChild(input); 
```

作为生成的 HTML 的示例（来自 Chrome）：

```
<input name="2[]" class="changeable" type="radio" value="5"> 
```

在 Chrome 和 Firefox 中，javascript：

```
document.getElementsByName("2[]")[0].value 
```

按预期返回“5”，但在 IE（我的测试中为 IE9）中返回“on”。

IE 忽略设置的值，而是返回检查状态是否有某些原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:17:18.403

基本上，这不是忽略值的问题，因为 IE 将元素视为对象 - 一个单选按钮，并将其初始化。

如果您打开调试器并单步执行代码，您可以看到确实设置了值 5。当您到达设置输入类型的行时，即`input.type='radio'`您可以看到该值从 5 变为“on”。将其视为 IE 在知道输入确实是单选按钮时调用单选按钮的构造函数。

修复？

在这种情况下很容易，只需更改语句的顺序即可。是的！就那么简单。设置类型，*然后*设置值。

这在 IE9 和 Chrome 中运行良好。

```
{
    var extension_id = 2;
    var input = document.createElement('input');
    input.name = extension_id + '[]';
    input.type = 'radio';
    input.checked = true;
    input.value = 5;
    input.className = 'changeable';
    document.body.appendChild(input);

    alert(input.value);
} 
```

哦，在我忘记之前——你可以用 F12 在 IE 中打开调试器。- 有很多关于如何使用它的视频。:)

# internet-explorer - @font-face 字体在不同浏览器中的模糊效果

> ID：13286938
> 
> 赞同：0
> 
> 时间：2012-11-08T10:14:21.293
> 
> 标签：internet-explorer, firefox, fonts, cross-browser, font-face

我使用以下 CSS 代码来加载我的字体。这是在外部 CSS 样式表中：

```
@font-face {
    font-family: 'light';
    src: url('../_fnt/light/gothamrnd-light.eot');
    src: url('../_fnt/light/gothamrnd-light.eot?#iefix') format('embedded-opentype'),
             url('../_fnt/light/gothamrnd-light.woff') format('woff'),
             url('../_fnt/light/gothamrnd-light.ttf') format('truetype'),
             url('../_fnt/light/gothamrnd-light.svg#../_fnt/light/gothamrnd-light') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

一切都应该很好并且完全可见。我刚刚听说一位朋友从 Windows 7 使用了 firefox 15，他得到了一些模糊的图像。我已经看到任何来自 Windows 的浏览器都会遇到这个问题。当然，IE 也根本不起作用……（跨浏览器不是最好的……）

模糊效果，firefox 15.0.1： ![在此处输入图像描述](../Images/aa3185349652f2354751a2e64b4eadba.png)

这是它应该看起来的字体（已从 Chrome 23 检查）： ![在此处输入图像描述](../Images/99dbf6ca15f99f9bf0d2f9cf80378b32.png)

如果您想测试，该网站的网址是[http://escuderodesign.com/ 。](http://escuderodesign.com/)这是我的投资组合，我真的很想至少用 Firefox 来解决这个问题。

我认为@font-face 就足够了。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:35:15.740

这是一个字体渲染问题，如果你打开轻量版的 Gotham Rounded，你可以看到即使是字体浏览器也显示它的大小为 12。

所以我认为你有两个基本的选择：

1.  使用常规版本的字体，它在浏览器中也能正常显示。
2.  使用 cufon 渲染器。

无论如何，对于我来说，Firefox 16.0.2 和 Chrome 22.0.1 中的字体同样存在缺陷，所以我会说这是字体问题。实际上，在渲染方面，IE 对我来说是最好的——当然不是布局。

祝你好运！

# asp.net-mvc - 将 DbContext 与自定义资源提供程序一起使用时注入不同的范围

> ID：13286945
> 
> 赞同：1
> 
> 时间：2012-11-08T10:14:42.950
> 
> 标签：asp.net-mvc, entity-framework, dependency-injection, structuremap, resourceproviderfactory

在一个应用程序中，我有以下组件（除其他外）：

*   `MyDbContext`：实体框架数据访问
*   `DBResourceProviderFactory`：`ResourceProviderFactory`提供自定义的自定义`IResourceProvider`（称为`DBResourceProvider`...）
*   其他服务
*   结构图

自定义资源提供程序正在使用 db 查找资源，注入方式与[此 SO 答案](https://stackoverflow.com/a/10633095/63733)`MyDbContext`中的描述类似。

`MyDbContext`也用于各种其他服务，并且由于它是一个 Web 应用程序，因此我使用 StructureMaps方法`HttpContextScoped`将生命周期限制为`MyDbContext`请求的生命周期（请参阅[另一个 SO 问题及其关于此主题的答案](https://stackoverflow.com/q/6390608/63733)）：

```
x.For<MyDbContext>().HttpContextScoped(); 
```

但是，似乎 an 的生命周期`IResourceProvider`并不限于单个 http 请求。因此，`DBResourceProvider`一直挂在一个`MyDbContext`将在第一次请求后处理的引用上。

**如何处理这种*生命周期不匹配*- 让 StructureMap在将 HttpContext 范围内的实例返回给所有其他服务时返回`MyDbContext`瞬态？`IDbResourceProvider`**

我需要两种不同的实现吗？标记界面？还是首先使用实体​​框架查找本地化资源（性能等）是个坏主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:52:10.673

If you have a service that has (or needs to have) a long lifetime than (one of) its dependencies, the general solution is to use a factory to get those dependencies.

In your situation the solution might be simple. When your `DBResourceProvider` is defined in your [composition root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx) of your MVC application, it would simply succeed to use the `DependencyResolver.Current.GetService` method to get the `MyDbContext`.

When the `DBResourceProvider` service isn't part of the composition root (for instance because it contains business logic that you need to test), you could either extract that logic into its own class, to allow the service to be in the composition root, or you can inject a (singleton) factory (for instance `IDbContextFactory` or `Func<MyDbContext>`) that allows you to get the proper instance to be resolved.

# testing - 如何测试我的解决方案（比赛）？

> ID：13286952
> 
> 赞同：2
> 
> 时间：2012-11-08T10:15:00.343
> 
> 标签：testing

我为比赛制作了一个代码，我得到了“WA”，但我确信我的代码是正确的。所以在我抱怨管理员之前，我怎么能确定我的代码实际上是正确的，而不是问题测试数据不正确？这是[问题](http://www.iarcs.org.in/inoi/2012/zco2012/zco2012-2a.php)，这是我在 c++ 中的[解决方案](http://pastebin.com/fZuVPAYf)，所以任何人都可以建议测试自己的解决方案的方法，或者任何人都可以在我的解决方案产生错误答案的情况下提供测试输入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:51:19.630

哦，上帝，您应该正确检查，我发现另一个输入输出错误（我告诉过您通常测试输入是正确的，而我们通常是错误的：D）。
对于输入 "1 2 1 3 4 2" 你的代码输出 "1 4 2" 这肯定是错误的，它应该是 "2 4 2" 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:27:14.073

您可以在问题说明中使用几个示例来测试您的代码：

> 例如，(([]))[[[()]]] 的交替深度为 2，匹配对 () 之间的最大符号数为 6，匹配对 [] 之间的最大符号数为8.

和

> **样本输入**
> 14
> 1 1 3 4 2 2 3 3 3 1 2 4 4 4
> **样本输出**
> 2 6 8

您也可以自己发明一些，计算符号的深度和最大数量并将其用作输入。

此外，问题中说

> 此任务的时间限制为 1 秒。内存限制为 32MB。

您确定您的代码在其中一个非常大的输入上花费的时间不超过一秒钟，`N`并且接近`10^5`？

如果测试未通过，**则问题很可能出在您的代码**中，而不是在自动检查器中。

# c# - 检查对象是否等于泛型

> ID：13286957
> 
> 赞同：0
> 
> 时间：2012-11-08T10:15:23.637
> 
> 标签：c#, .net, typeof, gettype, generic-type-argument

我有一种方法可以进行一些类型转换。如果类型等于传递的泛型类型，我不想经历整个过程。这是一个片段。

```
 public static T ConvertTo<T>(this object @this)
    {
        if (typeof(T) == @this.GetType())
            return (T)@this;
    } 
```

我正在检查对象 @this 是否已经是 T 类型，似乎可以工作，但这是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:23:30.103

您可以使用`IsInstaceOfType`方法和`is`检查类型。

```
public static T ConvertTo<T>(this object @this)
{
    if (@this is T)
       return (T)@this;
    else
       return default(T);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:21:56.703

这也可能有效

```
public static T ConvertTo<T>(this object @this)
{
    return (T)System.Convert.ChangeType(@this, typeof(T));
} 
```

# authentication - 在 LOB 案例中使用 Windows 8 商店应用程序登录

> ID：13286958
> 
> 赞同：1
> 
> 时间：2012-11-08T10:15:25.490
> 
> 标签：authentication, windows-8, windows-runtime, restful-authentication, windows-store-apps

鉴于我有一个现有的用户存储作为数据库，并且不允许在业务场景中使用 google、facebook、twitter 等登录。对后端服务器进行身份验证的最佳做法是什么？

作为后端，我计划通过 web api 服务 Json。由于 Web api 实现了 oauth2，Windows 商店应用程序也实现了。有没有一种简单的方法来利用 oauth2 协议，例如 asp.net 成员资格（或不同的用户存储）。我知道这是一个完全不同的概念，但我一直在寻找一种在基础设施中使用构建的解决方案......无需拥有或安装身份服务器。既然Windows Store App不是浏览器，那么token来回跳舞是如何和后端一起工作的...

所以这些只是我的想法……在 LOB 案例中，Windows 8 商店应用程序的身份验证会是怎样的故事？

任何指针，链接，想法将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:51:09.443

您可以使用[WebAuthenticationBroker](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.authentication.web.webauthenticationbroker)类来呈现 Web 视图（浏览器视图）并在客户端执行 oauth 所需的所有操作。一个重要提示：您必须在主/UI 线程中调用此代理的身份验证方法！链接中甚至还有一个 Facebook 示例。对于服务器/后端：我不熟悉基于 asp.net 的后端，我们使用 Ruby on Rails 和 oauth gem。

# javascript - 当我使用 struts 2 jquery 提交按钮 onClick 事件时，Javascript 验证不起作用

> ID：13286959
> 
> 赞同：1
> 
> 时间：2012-11-08T10:15:24.323
> 
> 标签：javascript, struts2, struts2-jquery

我正在使用 struts2-jquery-plugin-3.2.1 。我正在使用它的提交按钮，我在 onclick 事件上调用 javascript 验证，但我的表单正在提交，即使验证未完成。这里是代码：

```
<sj:submit
value="Add"
targets="idRightMainDiv"
button="true"
buttonIcon="ui-icon-gear"
formIds="addExerDetailsForm"
onclick="return SetsRepsFormValidate()"   //calling javascript validation 
tabindex="7"/>

function SetsRepsFormValidate() {
    var summary = "";
    summary += isSets();
    summary += isReps();

    if (summary != "") {
    dhtmlx.alert(summary);
    return false;
    }

    else {
    return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:03:45.830

我在这个链接中得到了解决方案：

将此代码放在头部 -

```
 <sj:head jqueryui="true"/>
   <script type="text/javascript">
     $.subscribe('before', function(event,data) {
     var fData = event.originalEvent.formData;
     alert('About to submit: \n\n' + fData[0].value + ' to target '+event.originalEvent.options.target+' with timeout '+event.originalEvent.options.timeout );
    var form = event.originalEvent.form[0];
     if (form.echo.value.length < 2) {
      alert('Please enter a value with min 2 characters');
      // Cancel Submit comes with 1.8.0
      event.originalEvent.options.submit = false;
      }
   });
  $.subscribe('complete', function(event,data) {
     alert('status: ' + event.originalEvent.status + '\n\nresponseText: \n' + event.originalEvent.request.responseText + 
   '\n\nThe output div should have already been updated with the responseText.');
  });
  $.subscribe('errorState', function(event,data) {
    alert('status: ' + event.originalEvent.status + '\n\nrequest status: ' +event.originalEvent.request.status);
  });
 </script> 
```

并写了struts 2 jquery提交按钮的事件——

```
 <div class="type-button">
                     <sj:submit  targets="result" 
                                    value="AJAX Submit" 
                                    timeout="2500" 
                                    indicator="indicator" 
                                    onBeforeTopics="before" 
                                    onCompleteTopics="complete" 
                                    onErrorTopics="errorState"  
                                    effect="highlight" 
                                    effectOptions="{ color : '#222222' }" 
                                    effectDuration="3000"/>
             </div>` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:23:32.323

你真的应该为表单的事件添加验证，`onsubmit`因为表单也可以通过按回车键来提交。

只有当用户单击按钮时，您当前的验证才会触发。

# android - Android：如何在Android上使用OpenGL ES处理相机预览帧？

> ID：13286960
> 
> 赞同：1
> 
> 时间：2012-11-08T10:15:27.940
> 
> 标签：android, opengl-es, camera, gpu

我是 OpenGL ES 的新手。我需要利用 GPU 的力量来处理来自相机预览的帧。所以我想唯一的办法就是将相机预览发送到OpenGL的纹理内存。然后我需要使用OpenGL对图像进行白化，去除阴影，缩放等。然后将其发送回相机预览。

有人可以给我一些关于如何做到这一点的提示吗？任何参考资料都会有所帮助。我在网上找不到任何东西。

谢谢，查尔斯

# javascript - 如何关闭 filepicker.io 小部件？

> ID：13286961
> 
> 赞同：4
> 
> 时间：2012-11-08T10:15:37.733
> 
> 标签：javascript, filepicker.io

使用 filepicker.io 时，API 中有一个函数可以正确关闭小部件，还是我们需要触发对`x`链接或背景的点击？

我们想要检测用户何时按下`ESC`或`TAB`按键并在发生这种情况时关闭小部件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:27:50.047

没有 api 调用来关闭模式。随意触发 x 上的点击事件。

# javascript - 推特计数总是返回 0？

> ID：13286962
> 
> 赞同：0
> 
> 时间：2012-11-08T10:15:42.837
> 
> 标签：javascript, jquery, asp.net, twitter

我正在制作自定义 Twitter 按钮和计数器。计数器总是返回 0。

这是代码：

```
<a href="https://twitter.com/intent/user?screen_name=Aoraxous" target="_blank"
  data-url="http://www.twitter.com/aoraxous"
  data-via="AORAXOUS"
  data-text=""
  data-count="horizontal">Tweet                           
</a> 
```

jQuery：

```
jQuery.getJSON(
    'ht' + 'tp://urls.api.twitter.com/1/urls/count.json?url=https://twitter.com/intent/user?screen_name=Aoraxous/&callback=?',
    function (data) {

        alert(data.count);
    }
); 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:56:17.903

它返回零计数，因为不允许您从 urls.api.twitter.com 请求——它不是公共 API。请参阅此线程[计数似乎不适用于其他 URL 缩短服务](https://dev.twitter.com/discussions/6680)和[是 http://urls.api.twitter.com/1/urls/count.json? 获取 URL 的推文计数的有效方法？](https://dev.twitter.com/discussions/5653)

# c++ - 使 Control-C 表现得像未捕获的异常

> ID：13286969
> 
> 赞同：2
> 
> 时间：2012-11-08T10:16:04.710
> 
> 标签：c++

有没有办法让 Control-C 表现得像抛出异常一样。即基本上程序退出，但在路上所有的析构函数都被调用了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:31:21.170

好吧，您需要一个信号处理程序来捕获 SIGINT（SIGTERM，HUP 为什么不也是如此？）。您不想将线程用于这样简单的事情，因此请使用标准的“自管道技巧”：将一个字节（信号值）写入信号处理程序中套接字对的一端，以及您的主循环（有总是在某处有一个选择循环）将异步读回该值。就是在那个时候你扔掉，逃跑，按照普通的退出程序，做任何你喜欢的事情。一切都被解开和破坏，就像您在主应用程序循环中因任何其他原因退出一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:45:20.103

这通常是不可能或很难做到的。我相信在某些系统上，例如 GNU/Linux，如果您`-fnon-call-exceptions -fasynchronous-unwind-tables`向 GCC 提供标志（未经测试），您可以这样做。

除了上述之外，您基本上有两种选择：

1.  您可以在信号处理程序中设置某种标志，您将在其他地方检查以查看 SIGINT 是否已交付。这对 *NIX 和 Windows 平台都很有用。

2.  在 *NIX 上，如果您已经在应用程序中使用线程，您可以在单独的线程中使用例如[sigwait()](http://manpages.ubuntu.com/manpages/precise/en/man3/sigwait.3posix.html)作为同步事件来处理 SIGINT，并强制整个应用程序有序终止。

我建议使用第二个选项，因为它也可以用作解决 Windows 上问题的一般方法。Windows 将线程注入到执行用户提供的 Ctrl-C 或 Ctrl-Break 句柄的应用程序中。如果您使用第二个选项，恕我直言，您的应用程序将更便携。

# login - 为 Win 8 应用程序创建登录页面

> ID：13286979
> 
> 赞同：0
> 
> 时间：2012-11-08T10:16:30.887
> 
> 标签：login, windows-8, contentcontrol

我正在尝试为我的应用程序创建一个登录页面，就像 Windows 登录帐户一样。但这不是帐户登录。一旦用户设置了密码，每次用户重新打开应用程序时，它都会要求输入密码。

从这个[站点](http://www.c-sharpcorner.com/UploadFile/99bb20/create-login-screen-in-metro-style-application/)，我得到了如何创建登录页面。但是我面临的问题是，一旦我将网格放入其中，`ContentControl`它就不会扩展。

我必须指定名为 mainbackground 的网格的高度和宽度。我不想硬编码这些值，因为随着分辨率的变化，高度和宽度可能会有所不同。

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush  }">        
    <Grid.RowDefinitions>           
        <RowDefinition/>          
    </Grid.RowDefinitions>

    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions> 

    <ContentControl x:Name="parent" Grid.Row="0" Grid.RowSpan="1">
          <Grid x:Name="MainBackground" Height="768" Width="1366">
              <!-- rest of the xaml declaration-->
          </Grid>
    </ContentControl>

    <ContentControl  x:Name="container"  Height="450" Margin="0,194,0,124">
          <Popup x:Name="logincontrol1" IsOpen="False" >
    </ContentControl>
</Grid> 
```

几个问题，这是创建登录页面的正确方法吗？

为什么无需我指定高度和宽度，网格就不会扩展到 who 屏幕？

内容控制的实际用途是什么？网上没有找到详细的解释。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:50:00.153

建议不要编写自己的登录页面，而是使用 CredentialPicker 控件。

在您的情况下，您没有将选择器挂钩到任何东西，这是一个有效的场景。像这样设置选择器选项...

```
CredentialPickerOptions opts = new CredentialPickerOptions {
    AuthenticationProtocol = AuthenticationProtocol.Basic,
    Caption = "My App Login",
    Message = "Log in here",
    TargetName = "MyApp"
    };
var res = await CredentialPicker.PickAsync(opts); 
```

然后您可以访问您自己的逻辑的`CredentialUserName`和`CredentialPassword`值。

# php - 如何在drupal 7中获取某个父级以下的所有菜单项？

> ID：13286983
> 
> 赞同：7
> 
> 时间：2012-11-08T10:16:40.000
> 
> 标签：php, drupal, module, drupal-7, drupal-modules

我目前正在开发一个模块，该模块通过 url 路径查找父菜单项，然后通过查找顶部父项来显示该相关菜单的当前树结构，最重要的是仅在该菜单中显示该菜单项和子菜单。

一个简单的解决方案是通过所有项目或以所有项目作为键的数组进行 foreach 循环。

```
path = '/system/menu/submenu';
parent = 'system';
output = parent + parent submenus. 
```

“自定义菜单”中的所有菜单项：

```
- System
   - Menu wrapper
     - SubMenu 1A
     - SubMenu 2A
     - SubMenu 3A    
- Main
  - SubMenu 1B
  - SubMenu 2B
  - SubChildMenu 3B 
```

PHP 代码应该返回这个：

```
- System
   - Menu wrapper
     - SubMenu 1A
     - SubMenu 2A
     - SubMenu 3A 
```

我的代码（目前不工作）：

```
 $menu = menu_tree('my-custom-menu');
 return = theme('my_custom_menu', array('system' => $menu_tree)); 
```

注意：这里只需要php代码和php代码，其他模块不支持，只能手动选择。内容通过块显示。

> “对于导航，Drupal 将通过 **menu_navigation_links调用****menu_tree_page_data** ，它只会返回单级链接。您可以按照此函数直到 menu_main_menu，然后在它之前使用 template_preprocess_page（这就是它最终在 page.tpl.php 中作为变量的方式)
> 
>  **但是，如果您将菜单作为**块**插入，menu_tree_page_data会由**menu_tree**调用（它会立即调用**menu_tree_output**，然后对数组进行一些额外的工作以进行最终标记。）在两者都运行之后，您可以将整个菜单树作为数组使用然后我运行了一些自定义 PHP 代码来循环遍历数组并将其呈现为 HTML 列表。”**

 **人们以前曾问过这个问题，但我已经尝试过他们的解决方案，但没有成功的可能原因是这些问题适用于 drupal 6。我目前正在使用 drupal 7。

非常感谢您的帮助，谢谢...

相关问题：

* * *

[将菜单树限制在第一级](https://stackoverflow.com/questions/5218861/restrict-menu-tree-to-first-level)

[如何在drupal中获取某个父级下方的所有菜单项？](https://stackoverflow.com/questions/2716787/how-to-get-all-the-menu-items-below-a-certain-parent-in-drupal)

[https://drupal.stackexchange.com/questions/28654/how-to-display-submenus-separate-from-their-menu-tree-in-drupal-7](https://drupal.stackexchange.com/questions/28654/how-to-display-submenus-separate-from-their-menu-tree-in-drupal-7)

[https://drupal.stackexchange.com/questions/30112/displaying-a-menus-child-links](https://drupal.stackexchange.com/questions/30112/displaying-a-menus-child-links)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:30:22.327

您需要的第一件事是您当前所在页面的 mlid：

```
$q = variable_get('site_frontpage', 'node') == $_GET["q"] ? '<front>' : $_GET["q"];
$current_menu_item = db_select('menu_links' , 'ml')
  ->condition('ml.link_path' , $q)
  ->fields('ml', array('mlid', 'plid'))
  ->execute()
  ->fetchAll(); 
```

现在如果这个菜单项的 plid 为 0，那么我们知道它是一个顶级菜单项，如果它不是 0，那么我们需要获取父级。所以我们想要得到的树的顶部mlid是：

```
$top_level_mlid = $current_menu_item->plid == 0 ? $current_menu_item->mlid : $current_menu_item->plid; 
```

然后你需要加载你的完整菜单：

```
$full_menu_items = menu_tree_all_data('main-menu'); 
```

现在遍历所有菜单项并获得我们想要的位：

```
foreach($full_menu_items as $menu_item) {
    if($menu_item['link']['mlid'] == $top_level_mlid) {
        $links = $menu_item['below'];
        break;
    }
} 
```

$links 现在包含您所追求的菜单特定部分的所有链接。

并将该数组作为页面上的菜单输出：

```
echo theme('links__system_secondary_menu', array(
    'links' => $links, 
    'attributes' => array(
        'id' => 'secondary-menu', 
        'class' => array('links', 'clearfix')), 
        'heading' => array(
            'text' => t('Secondary menu'), 
            'level' => 'h2', 
            'class' => array('element-invisible')
        )
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T02:38:59.140

这样的事情怎么样？

```
function your_module_menu_link__your_menu($variables){

    $element = $variables['element'];
    $sub_menu = '';

    if ($element['#below']) {

        $sub_menu = drupal_render($element['#below']);

    }

    $ouput = "";

    if($element['#original_link']['plid'] > 0 || $element['#below']){
        $link = l($element['#title'], $element['#href'], $element['#localized_options']);
        $ouput = '<li' . drupal_attributes($element['#attributes']) . '>' . $link . $sub_menu . "</li>\n";
    }

    return $ouput;

} 
```**

# php - PHP循环遍历数组以从数据库中获取每个键的值（第三范式）

> ID：13286991
> 
> 赞同：1
> 
> 时间：2012-11-08T10:17:02.410
> 
> 标签：php, mysql, arrays

我正在构建一个系统，主要用于巩固学习，但将在实践中使用。

我将尝试口头解释我关注的 ER 图的部分：

每个学员可以有许多uniformID

每个 Uniform ID 都是 table uniform 中的一个新条目，因此`cadets`(table) 可能如下所示：

```
id | name    | ... | uniformID

1  | Example | ... | 1,2,3 
```

`uniform`桌子：

```
id | notes             | cadet

1  | Need new blahh    | 1

2  | Some stuff needed | 1

3  | Whatever you like | 1 
```

再三考虑，看起来我不需要数据库中的第三列。

我正在尝试遍历uniformID中的每个ID，代码：

```
<?php
$cadet = $_GET['id']; // set  from URL

$query = mysql_query("SELECT `uniformID` FROM `cadets` 
  WHERE id = '$cadet' LIMIT 1") 
  or die(mysql_error()); // get uniform needed as string

// store it
while ($row = mysql_fetch_array($query)) {
  $uniformArray = $row['uniformID']; 
}
echo $uniformArray . "  ";
$exploded = explode(",", $uniformArray); // convert into an array

// for each key in the array perform a new query
foreach ($exploded as $key => $value) {
  $query(count($exploded));
  $query[$key] = mysql_query("SELECT * FROM `uniform` WHERE `id` = '$value'");
} 
```

?>

正如我所说，这主要是出于合并目的，但我遇到了一个错误，sql 说：

> 致命错误：函数名称必须是第 82 行 C:\wamp\www\intranet\uniform.php 中的字符串

第 82 行是：

```
$query[$key] = mysql_query("SELECT * FROM `uniform` WHERE `id` = '$value'"); 
```

我不确定它会起作用，所以我尝试了它，现在我被卡住了！

**编辑：**

感谢所有为此做出贡献的人！这是现在的工作代码：

```
foreach ($exploded as $key => $value) {
              //$query(count($exploded));
              $query = mysql_query("SELECT * FROM `uniform` WHERE `id` = '$value'");
              while ($row = mysql_fetch_array($query)) {
                echo "<tr>
                  <td>" . $row['id'] . "</td>
                  <td>" . $row['note'] . "</td>
                </tr>";
              }
            } 
```

添加了 while 并通过将其嵌套在 foreach 中进行了迭代

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:58:45.923

除了你的桌子

```
cadets(id, ...)
uniforms(id, ...) 
```

`cadets`使用描述实体和实体之间关系的叉积表`uniforms`

```
cadets_x_uniforms(cadet_id, uniform_id) 
```

对于每个关系（在这种情况下，学员 x 具有统一的 y）将具有相应 id 的记录放入叉积表中。

...嗯，我想在这种情况下，一个工作示例会做得更好...

```
<?php
$pdo = new PDO('mysql:host=localhost;dbname=test;charset=utf8', 'localonly', 'localonly');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
setup($pdo);

// fetch the uniforms of a specific cadet
$stmt = $pdo->prepare('
    SELECT
        c.name,u.id,u.labelid
    FROM
        so_cadets as c
    LEFT JOIN
        so_cadet_uniform as cxu
    ON
        c.id=cxu.cadet_id
    LEFT JOIN
        so_uniforms as u
    ON
        cxu.uniform_id=u.id
    WHERE
        c.name=?
');
$stmt->execute( array('cadetB') );
$stmt->setFetchMode(PDO::FETCH_ASSOC);
echo "uniforms of cadetB\n";
foreach( $stmt as $row ){
    echo join(', ', $row), "\n";
}

// fetch cadets without uniforms
$query = '
    SELECT
        c.name
    FROM
        so_cadets as c
    WHERE
        NOT EXISTS(SELECT uniform_id FROM so_cadet_uniform as cxu WHERE c.id=cxu.cadet_id)
';
echo "cadets without uniforms\n";
foreach( $pdo->query($query, PDO::FETCH_ASSOC) as $row ){
    echo join(', ', $row), "\n";
}   

function setup($pdo) {
    $pdo->exec('
        CREATE TEMPORARY TABLE so_cadets (
            id int auto_increment,
            name varchar(32),
            primary key(id)
        )
    ');

    $pdo->exec('
        CREATE TEMPORARY TABLE so_uniforms (
            id int auto_increment,
            labelid varchar(32),
            primary key(id),
            unique key(labelid)
        )
    ');

    $pdo->exec('
        CREATE TEMPORARY TABLE so_cadet_uniform (
            cadet_id int,
            uniform_id int,
            primary key(cadet_id,uniform_id)
        )
    ');

    $stmt = $pdo->prepare('INSERT INTO so_cadets (name) VALUES (?)');
    foreach( range('A','F') as $c ) {
        $stmt->execute( array('cadet'.$c));
    }

    $stmt = $pdo->prepare('INSERT INTO so_uniforms (labelid) VALUES (?)');
    foreach( range('K','Z') as $c ) {
        $stmt->execute( array('label'.$c));
    }

    $stmt = $pdo->prepare('INSERT INTO so_cadet_uniform (cadet_id,uniform_id) VALUES (?,?)');
    $cadetHasUniforms = array(
        1=>array(1,2,3), // <- cadetA
        2=>array(7,9), // <- cadetB
        3=>array(8,5,4), // <- cadetC
        // 4=>array() <- cadetD, no entry, no uniforms
        5=>array(10,13,15) // <- cadetE
        // <- cadetE, no entry, no uniforms
    );
    foreach( $cadetHasUniforms as $cadetId=>$uniformIds ) {
        foreach( $uniformIds as $uid ) {
            $stmt->execute(array($cadetId, $uid));
        }
    }

} 
```

印刷

```
uniforms of cadetB
cadetB, 7, labelQ
cadetB, 9, labelS
cadets without uniforms
cadetD
cadetF 
```

# ios - 我可以使用我的 phonegap/cordova IOS 应用程序部署 Cocoa http 服务器吗

> ID：13286992
> 
> 赞同：1
> 
> 时间：2012-11-08T10:17:07.040
> 
> 标签：ios, cordova, video-streaming, cocoahttpserver

我有一个使用 phonegap/cordova 2.1.0 构建的 IOS 应用程序，我想使用与该应用程序一起运行的 cocoahttpserver，以便可以将本地存储的加密视频从 cocoahttpserver 流式传输到应用程序。

这可能看起来有点矫枉过正，如果是这样，请告诉我，但我这样做的原因是我可以流式传输使用 Apple 的 mediafilesegmenter 准备的加密分段视频，这些视频本地存储在设备上。

我已经尝试通过使用视频标签调用 .m3u8 文件来播放加密视频，但这仅适用于 http 而不是本地文件系统。

您能否指出正确的方向，以使用我的应用程序部署 cocoahttpserver。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:00:25.643

我现在已经成功地将 phonegap/cordova 和 cocoahttpserver 集成到一个 ios App 中。这些是步骤：

1) 将 cocoahttpserver 项目放在 phonegap 项目中，例如在 Externals/cocoahttpserver 中，并将整个项目保留在那里，以便以后可以在需要时从主存储库轻松更新它。

2) 在 Xcode 中打开 phonegap 项目并通过单击 phonegap 项目目标将 Externals 目录添加到标题搜索路径，并在“Header Search Paths”中添加“Externals”作为递归路径

3) 在 phonegap 应用程序的目标构建阶段，在“编译源”中添加来自 cocoahttpserver 的所有需要​​的 .m 文件。这些是 Core、Vendor 和 Samples/iPhoneHTTPServer 中的所有文件。**不要**添加 iPhoneHTTPServerAppDelegate.m 或 iPhoneHTTPServerViewController.m

4) 通过查看 iPhoneHTTPServerAppDelegate.m 和 phonegap AppDelegate.m 尝试将两者合并在一起，以便在 phonegap 的 AppDelegate.m 中实例化服务器不要实例化 iPhoneHTTPServerViewController.m，因为您不需要这个空白看法。我还必须在 phonegap 构建阶段中包含标准库 libxml2.dlyb 和 Security.framework

5) 在您的 AppDelegate.m 中，您可以将服务器 Web 路径设置为您喜欢的任何目录。确保在构建时复制此目录

希望这可以帮助某人:)

# objective-c - 按字典键的值对包含 NSMutableDictionary 的 NSMutableArray 进行排序

> ID：13286997
> 
> 赞同：1
> 
> 时间：2012-11-08T10:17:23.350
> 
> 标签：objective-c, ios, nsmutablearray, nsdictionary, nssortdescriptor

我有一个`NSMutableArray`包含 70 个对象的对象，它们是`NSMutableDictionary`，在每个字典中我有 2 个值：“距离”和“索引路径”。我想`NSMutableArray`从小到大排序。距离以 KM 为单位，使用我在此处粘贴的代码后数组如下所示：

```
NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"distance" ascending:YES];
[branchDistance sortedArrayUsingDescriptors:[NSArray arrayWithObjects:descriptor,nil]]; 
```

这是此方法的结果：

```
(lldb) po [branchDistance objectAtIndex:0]
(id) $1 = 0x0d6ac240 {
    "<NSIndexPath 0xd6cf180> 1 indexes [0]" = indexPath;
    "8.078547" = distance;
}
(lldb) po [branchDistance objectAtIndex:1]
(id) $2 = 0x0d6a64a0 {
    "<NSIndexPath 0xd6cf3b0> 1 indexes [1]" = indexPath;
    "45.044069" = distance;
}
(lldb) po [bran(lldb) po [branchDistance objectAtIndex:2]
(id) $4 = 0x0d6cf550 {
    "<NSIndexPath 0xd69b3f0> 1 indexes [2]" = indexPath;
    "9.992081" = distance;
}
(lldb) po [branchDistance objectAtIndex:3]
(id) $5 = 0x0d6cf750 {
    "283.356727" = distance;
    "<NSIndexPath 0xd6cf480> 1 indexes [3]" = indexPath;
} 
```

我想`NSMutableArray`使用`NSMutableDictionary`. 我尝试了一些来自网络和 stackoverflow 的代码，但找不到适合我的东西。

请帮我！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T10:36:53.703

我假设距离值使用`NSNumber`对象存储在字典中：

```
NSArray *sortedArray = [branchDistance sortedArrayUsingComparator:^(id obj1, id obj2) {
    NSNumber *distance1 = [(NSDictionary *)obj1 objectForKey:@"distance"];
    NSNumber *distance2 = [(NSDictionary *)obj2 objectForKey:@"distance"];
    return [distance1 compare:distance2];
}]; 
```

# javascript - JQuery .html 方法字符编码

> ID：13286999
> 
> 赞同：4
> 
> 时间：2012-11-08T10:17:29.170
> 
> 标签：javascript, jquery, ajax, encoding

我有一个类似的问题：[jQuery AJAX Character Encoding](https://stackoverflow.com/questions/553463/jquery-ajax-character-encoding-problem)但那里提到的任何解决方案都对我有用。

我制作了三个简单的文件来显示问题：

**PHP 文件：**

```
//prueba.php
echo "nº one two € áéíóú"; 
```

**JavaScript 文件（我使用 JQuery）**

```
//Javascript file
    function prueba() {
        $.ajax({
            type: "GET",
            contentType: "application/x-www-form-urlencoded;charset=ISO-8859-1",
            url: "prueba.php",
        }).done(function( data ) {
            $("#prueba").text(data); 
            //$("#prueba").html(data); //It does the same encoding error 
        });
    } 
```

** HTML 文件：**

```
<html>
    <head>
        <title>E-COMMERCE</title>
        <meta content="text/html; charset=iso-8859-1" http-equiv=Content-Type>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <script src="javascript/jquery.js" type="text/javascript"></script>
        <script src="javascript/javascript.js" type="text/javascript"></script>
    </head>

    <body>
        <a href="javascript:prueba()">Prueba</a>
        <div id="prueba"></div>
    </body>

</html> 
```

当您单击链接 Prueba 时，它会显示：

```
Prueba
n� uno dos � ����� 
```

当前网站运行良好，但它不使用 ajax，并且它位于我正在执行此操作的同一服务器中，所以我如何告诉 jquery 返回 ISO-8859-1 而不是它返回的任何内容？我知道理想的做法是始终使用 utf-8，但更改为 utf-8 会给我们带来一些我们现在无法承受的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:27:38.783

要使浏览器使用正确的编码，您必须在 php 页面中添加 HTTP 标头：

```
header("Content-Type: text/plain; charset=ISO-8859-1"); 
```

或者您可以将编码放在 html 的元标记中：

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:29:04.303

在您的 php 文件中，您需要对输出进行[UTF-8 编码](http://php.net/manual/en/function.utf8-encode.php)：

```
echo utf8_encode("nº one two € áéíóú"); 
```

然后在您的 html 文件中，您将需要设置字符集：

```
<html>
<head>
    <meta charset="utf-8"/>
    ... 
```

为了获得良好的实践，还要指定文​​档类型：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    ... 
```

`<!DOCTYPE html>`是合法的[HTML5 文档](http://ejohn.org/blog/html5-doctype/)类型。

* * *

正如[Pranav Kapoor](https://stackoverflow.com/a/13287153/887539)指出的那样，您可能还需要指定 PHP 文件字符集：

```
header("Content-Type: text/plain; charset=UTF-8"); 
```

* * *

我可以看到您已将您的字符集指定为：`ISO-8859-1`. 我总是和你一起工作`UTF-8`你可以在这里阅读更多关于它的信息：[UTF-8 和 ISO-8859-1 有什么区别？](https://stackoverflow.com/questions/7048745/difference-between-utf-8-and-iso-8859-1)

但是`contentType`从你的ajax调用中删除