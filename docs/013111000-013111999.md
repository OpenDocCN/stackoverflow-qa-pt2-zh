# StackOverflow 问答 13111000-13111999

# multithreading - 在 S4 类中创建并行集群

> ID：13111003
> 
> 赞同：1
> 
> 时间：2012-10-28T17:03:22.157
> 
> 标签：multithreading, r, class, parallel-processing, s4

> **可能重复：**
> [S4 类：每个插槽多个类型](https://stackoverflow.com/questions/13002200/s4-classes-multiple-types-per-slot)

我正在尝试制作我的第一个 R 包。我计划创建一个 S4 类“测试”，其中包含数据和一些处理数据的方法。就我而言，可以通过多线程来改进数据的处理。我已经测试过`parLapply()`了，它提高了性能。

问题是我不想打电话：

```
cl <- makeCluster(N)
parLapply(cl, x, FUN, ...)
stopCluster(cl) 
```

在我想要并行的每种方法中。这是因为它不优雅，而且我认为是线程成本团队的重复创建（和破坏）。

因此，我正在考虑（只是）`cluster`在我的班级“测试”中有一个对象。然后我可以，例如，制作一个“测试”对象“o”并调用一个“测试”方法`setNumbrOfThreads(o) <- 4`。

但是，我在实施方面遇到了麻烦。由于`?makeCluster()`声明返回值为'''类'c（“SOCKcluster”，“cluster”）'''的对象，我尝试过：

```
setClass("test",
    representation(
        data = "list",
        nThreads = "numeric",
        cluster = c("SOCKcluster", "cluster") #This seems incorrect
    ),
    prototype(
        data = NULL,
        nThreads = 1,
        cluster = makeCluster(1) # "cluster = NULL" does not help
    )
) 
```

R 抱怨说`element 3 of the representation was not a single character string` 。所以我尝试了没有更多的成功：`cluster = "cluster"`或`cluster = "SOCKcluster"`（代表）。

我的问题是：

**如何使用类 c("SOCKcluster", "cluster") 的成员对象创建 S4 类？**

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:04:29.670

Brandon 询问将不同类型的对象（“apple”、“orange”）放入一个插槽中；你问的是在 S4 对象中使用 S3 类。符号`c("SOCKcluster", "cluster")`是 S3 的说法，`SOCKcluster`包含`cluster`作为父类。这是[Example of Using an S3 Class in a S4 Object](https://stackoverflow.com/questions/9067492/example-of-using-an-s3-class-in-a-s4-object)的副本，**而不是**[S4 Classes: Multiple types per slot](https://stackoverflow.com/questions/13002200/s4-classes-multiple-types-per-slot)的副本，并且有所不同——您有一个（短）S3 类层次结构，而不仅仅是一个 S3 类。但是，解决方案是本着相同的精神，

```
setOldClass(c("SOCKcluster", "cluster"))
A = setClass("A", representation(cluster="SOCKcluster")) 
```

进而

```
> library(parallel)
> a = A(cluster=makePSOCKcluster(2))
> a
An object of class "A"
Slot "cluster":
socket cluster with 2 nodes on host 'localhost' 
```

尝试将 MPI 集群（需要`snow`和`Rmpi`）放入您的课程失败

```
> a = A(cluster=makeCluster(2, "MPI"))
    2 slaves are spawned successfully. 0 failed.
Error in validObject(.Object) : 
  invalid class "A" object: 1: invalid object for slot "cluster" in class "A": got class "spawnedMPIcluster", should be or extend class "SOCKcluster"
invalid class "A" object: 2: invalid object for slot "cluster" in class "A": got class "MPIcluster", should be or extend class "SOCKcluster"
invalid class "A" object: 3: invalid object for slot "cluster" in class "A": got class "cluster", should be or extend class "SOCKcluster" 
```

创建一个支持的类`cluster`需要阅读`?setOldClass`.

# java - 需要使用 Java RMI 制作发布者-订阅者

> ID：13111004
> 
> 赞同：0
> 
> 时间：2012-10-28T17:03:31.813
> 
> 标签：java, rmi, publish-subscribe

有没有人实现 Java RMI 的发布订阅？甚至是我可以遵循的教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:07:12.043

这通常使用[Java JMS 主题](http://www.informit.com/articles/article.aspx?p=26137&seqNum=5)完成，而不是 RMI。RMI 是必需的还是糟糕的技术选择？

# ruby - 如何在 ruby 中过滤多个条件的列表？

> ID：13111006
> 
> 赞同：1
> 
> 时间：2012-10-28T17:03:39.180
> 
> 标签：ruby, filter, conditional-statements

我想创建一个过滤器类，其中我有三种方法：`name`、`genre`和`year`。我想过滤一个电影列表，其中每个对象都有 a`name`和`title`a`year`多个条件。

我不知道该怎么做。例如：

```
Filter.name("Batman") & Filter.genre("Drama") | !Filter.year(2001) 
```

我试图将过滤器字段保留在列表中`[name => batman, genre=>drama]`，依此类推，但运算符（尤其是`or`( `|`)）正在困扰我。

我接受任何想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T17:07:30.763

试试这个：

让 ary 包含对象列表

```
ary.select{|obj| obj.name == 'batman' && obj.genre == 'drama' || obj.year != 2001} 
```

我假设您在列表中有对象，请注意 && 和 || 操作员优先级

或者你期待这个？

```
class Filter
  def self.search_by(ary, name, genre, year)
    ary.select{|obj| obj.name == name && obj.genre == genre || obj.year != year}
  end
end

ary = all_films # assume function returns all films
Filter.search_by(ary, 'batman', 'drama', 2001) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-28T19:23:13.857

您想要的功能自然适合 Array 继承的 Enumerable 的选择。

因为您正在谈论一个列表，AKA，数组，所以很自然地适合使用 select 来确定您的电影是否符合您的标准，而不是将它们传递给方法。

单独的 Filter 类也不适合 Ruby 方式。考虑为您的电影列表子类化 Array，并添加一个将您的条件作为参数的过滤器方法。

以下是我编写该功能的方式，但以我认为更像 Ruby 的方式进行：

```
require 'pp'

class Movies < Array

  def initialize(*movies)
    super(movies)
  end

  def filter(criteria={})
    self.select{ |m| 
      criteria.all?{ |c, v| 
        m.send(c, v) 
      }
    }
  end
end

class Movie

  def initialize(attributes={})
    @movie = attributes
  end

  def name(t)
    case t
    when Regexp
      @movie[:name][t]
    when String
      @movie[:name] == t
    end
  end

  def genre(g)
    @movie[:genre] == g
  end

  def year(y)
    @movie[:year] == y
  end

end

movies = Movies.new(
  Movie.new(name: 'Batman', genre: 'Drama', year: 2001),
  Movie.new(name: 'The Shawshank Redemption', genre: 'Drama', year: 1994),
  Movie.new(name: 'Raiders of the Lost Ark', genre: 'Action', year: 1981)
)

pp movies.filter(year: 1981)
pp movies.filter(genre: 'Drama', year: 2001)
pp movies.filter(name: /redemption/i) 
```

我对 Movie 类使用了哈希，因为它更快。这也是一种更肮脏的方式，但它确实有效。

这是运行代码的输出：

```
[#<Movie:0x007ff7b191ffb8
  @movie={:name=>"Raiders of the Lost Ark", :genre=>"Action", :year=>1981}>]
[#<Movie:0x007ff7b1920260
  @movie={:name=>"Batman", :genre=>"Drama", :year=>2001}>]
[#<Movie:0x007ff7b19200d0
  @movie={:name=>"The Shawshank Redemption", :genre=>"Drama", :year=>1994}>] 
```

过滤电影的实际流程适合我们通常编写 Ruby 代码的方式。它可以做得更好，但这是一个开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T17:10:31.870

`|`是二元或运算符

`||`是逻辑或运算符。如果两个操作数中的任何一个不为零，则条件为真。

所以你需要采取后者，

像这样：

```
Filter.name("Batman") && Filter.genre("Drama") || !Filter.year(2001) 
```

有关详细信息，请参阅[http://www.tutorialspoint.com/ruby/ruby_operators.htm](http://www.tutorialspoint.com/ruby/ruby_operators.htm)。

# java - Java-将完成的线程对象分配给新线程

> ID：13111007
> 
> 赞同：0
> 
> 时间：2012-10-28T17:03:53.353
> 
> 标签：java, multithreading, threadpool

好吧，标题的措辞有点奇怪，但我真的不知道如何表达它。基本上，根据我对 Java 和线程的理解，你创建一个线程，它运行，它死亡。但是，线程 OBJECT 仍然存在。我想知道这样的事情是否有效

```
int numWorkers = Integer.parseInt(args[0]);
int threadPoolSize = Integer.parseInt(args[1]);
ExecutorService tpes = Executors.newFixedThreadPool(threadPoolSize);
WorkerThread[] workers = new WorkerThread[numWorkers];
while(some condition)    
    for (int i = 0; i < numWorkers; i++) {
        workers[i] = new WorkerThread(i, *some changing parameters*);
        tpes.execute(workers[i]);
    } 
```

基本上这种情况是我们有一些我们不知道什么时候会满足的条件。假设我正在使用 8 个线程。我创建了所有 8 个线程，他们做他们的事情并返回。我把他们的结果放在一起，意识到我还没有完成。但是，例如，worker[0] 已经存在。我使用新的 WorkerThread() 调用创建了它。但它现在已经死了，因为它已经完成了运行。如果我再次打电话，workers[0] = new WorkerThread(0, *new parameter* )...是否允许？我需要更多线程，我已经有一个（现在）死线程数组......我可以将它们指向其他东西吗？GC 是否正确收集了旧线程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T17:05:44.607

首先要做的事情是：您不会将**线程**提交给执行器服务。您提交**任务**，这些任务只是实现的对象`run`。Executor Service 完全控制线程池。

您可以轻松地多次安排相同`Runnable`的时间，每次您都会收到另一个`FutureTask`对象，告诉您它是否已完成并允许您取消它。这些`FutureTask`对象不可重复使用，但这没问题。

# c# - 为什么在 ZedGraph 中 Y 轴非常小？

> ID：13111010
> 
> 赞同：3
> 
> 时间：2012-10-28T17:04:13.860
> 
> 标签：c#

我有这个 ZedGraph 控制代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using ZedGraph;
using Extracting_Frames;

namespace Lightnings_Extractor
{
    public partial class Histogram_Graphs : Form
    {

        public long[] histogram;

        public Histogram_Graphs()
        {
            InitializeComponent();

            histogram = Form1.GetHistogramValue;
            this.DoubleBuffered = true;
            CreateGraph_GradientByZBars(zedGraphControl1);

        }

        private void Histogram_Graphs_Load(object sender, EventArgs e)
        {

        }

        private void CreateGraph_GradientByZBars(ZedGraphControl z1)
        {
            GraphPane myPane = z1.GraphPane;
            myPane.Title.Text = "Demonstration of Multi-Colored Bars with a Single BarItem";
            myPane.XAxis.Title.Text = "Bar Number";
            myPane.YAxis.Title.Text = "Value";

            PointPairList list = new PointPairList();
            Random rand = new Random();

            for (int i = 0; i < histogram.Length; i++)
            {
                double x = (double)i + 1;
                //double y = (double)i + 1;//rand.NextDouble() * 1000;
                double z = i / 4.0;
                list.Add(x, histogram[i], z);
            }

            BarItem myCurve = myPane.AddBar("Multi-Colored Bars", list, Color.Blue);
            Color[] colors = { Color.Red, Color.Yellow, Color.Green, Color.Blue, Color.Purple };
            myCurve.Bar.Fill = new Fill(colors);
            myCurve.Bar.Fill.Type = FillType.GradientByZ;

            myCurve.Bar.Fill.RangeMin = 0;
            myCurve.Bar.Fill.RangeMax = 4;

            myPane.Chart.Fill = new Fill(Color.White, Color.FromArgb(220, 220, 255), 45);
            myPane.Fill = new Fill(Color.White, Color.FromArgb(255, 255, 225), 45);
            // Tell ZedGraph to calculate the axis ranges
            z1.AxisChange();
        } 
    }
} 
```

问题出在循环中：

```
for (int i = 0; i < histogram.Length; i++)
                {
                    double x = (double)i + 1;
                    //double y = (double)i + 1;//rand.NextDouble() * 1000;
                    double z = i / 4.0;
                    list.Add(x, histogram[i], z);
                } 
```

在 Y 之前是随机的。现在我想使用直方图列表中的值。因此，例如在 index[0] 中有一个数字：34118 然后在 index [1](https://i.stack.imgur.com/L54q5.jpg) 1521 index[2] 522 List 中有 256 个索引。

当我看到图表时，发现吟游诗人的身高非常非常短。

在图表的开头，我看到一条线非常高，但接下来的所有线都很短。在 Y 轴上，我看到边数从 0 到 40，在 x 轴上，我看到从 0 到 300 的数字。

在 Y 轴上，我应该看到直方图中从 0 到最大值的数字，而在 X 轴上，我应该看到从 0 到 256 的数字。

这里大乱。

我应该如何解决？

谢谢。

![在此处输入图像描述](../Images/b51555fd80cd768a7d060cb6ffe26b53.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:50:44.100

您的代码中没有错误。您的图表准确地绘制了`histogram[]`数组中的值。

您提到您的数组包含以下值：

```
histogram[0] = 34118
histogram[1] = 1521
histogram[2] = 522
... 
```

如果您检查屏幕截图，则图表是正确的。绘制的第一个条非常高，其他剩余值（符合您的预期）接近 1x10^3 波段。您的`histogram[]`数组很可能正在使用错误的数据或 index 处的错误数据进行初始化`[0]`。

我只能`histogram[0]`从您的代码和数据的这一侧提供关于 at 值的重要性的推测，但也许您正在接收一个数组，其中包含 index 中所有剩余数据的总和`[0]`。

作为对预期的快速检查，如果您将循环更改为从 index 开始`[1]`而不是`[0]`，您将看到您使用的绘图控件对于预期接近 1x10^3 波段的所有其他值都将正确执行，并且您应该检查填充`histogram`数组的数据源，以查看第一个数据点是否相关或已设置为错误值。

```
for (int i = 1; i < histogram.Length; i++)
{
    double x = (double)i + 1;
    //double y = (double)i + 1;//rand.NextDouble() * 1000;
    double z = i / 4.0;
    list.Add(x, histogram[i], z);
} 
```

# opencart - vqmod opencart - dom 无法加载错误

> ID：13111013
> 
> 赞同：1
> 
> 时间：2012-10-28T17:04:19.857
> 
> 标签：opencart

我正在使用 Opencart 版本 1.5.2.1。以及 2.1.7 版的 vqmod。

问题是我得到了这个，dom无法加载文件错误，ze-oc2ps-credits.xml

代码是

```
<!-- Created using vQmod XML Generator by UKSB - http://www.opencart-extensions.co.uk //-->
<modification>
    <id><![CDATA[@tik Facebook Like Box]]></id>
    <version><![CDATA[1]]></version>
    <vqmver><![CDATA[2.1.6]]></vqmver>
    <author><![CDATA[OC2PS]]></author>
    </file>
        <file name="catalog/language/english/common/footer.php">
        <operation>
            <search position="replace" offset="1" error="skip"><![CDATA[$_['text_newsletter']   = 'Newsletter';]]></search>
            <add><![CDATA[$_['text_newsletter']   = 'Newsletter';
$_['text_powered']      = 'Powered By <a href="http://www.opencart.com">OpenCart</a><br /> %s &copy; %s and <a href="http://www.csillamvilag.com">OC2PS</a>';]]></add>
        </operation>
    </file>
</modification> 
```

我想知道是否有人可以帮助我找到问题？

谢谢

阿吉什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:50:34.590

该文件对于mod的运行并不是完全必要的，但问题在于 `</file>`作者的附加问题。

```
 <!-- Created using vQmod XML Generator by UKSB - http://www.opencart-extensions.co.uk //-->
<modification>
    <id><![CDATA[@tik Facebook Like Box]]></id>
    <version><![CDATA[1]]></version>
    <vqmver><![CDATA[2.1.6]]></vqmver>
    <author><![CDATA[OC2PS]]></author>
    </file>   <<<<<<<<<<< This extra </file> is the problem bit. <<<<<<<<<<<<< 
```

DOM 无法加载错误通常是由于缺少或额外的标签（例如`<operation>`或`<file>`标签）引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T10:32:35.620

我面临着类似的问题。我已授予该文件的权限。但它仍然说无法加载。经过一番研究，我发现它具有管理员权限，并且没有其他人的读取权限，可以通过以下方式授予：

sudo chmod a+r 文件名

如果你想给整个目录，那么

sudo chmod -R a+r 目录/

这解决了我的错误..

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:44:04.363

这个 xml 文件除了增加作者的功劳之外没有任何作用。

我知道，因为我是他（扩展名和此文件的作者）。

要从您的商店中删除链接，只需将文件的扩展名从 xml 更改为 xml_（或完全删除该文件。

这个文件与我所有的 OpenCart 免费扩展一起打包。早些时候，我曾经在扩展的功能文件中包含信用，但认为如果人们不想要它，这种方式更容易禁用它。（显然，如果您保留链接，我更喜欢……这就是我开发免费扩展的动力）

我在所有扩展的文档中都提到了链接，但有时人们会跳过箍，试图弄清楚这个神秘的链接是如何出现在他们的网站上的。带来不便敬请谅解。但实际上，是时候开始阅读文档了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T17:19:05.243

我已经看到这种情况发生了几次，通常获得 xml 的“新”副本并上传就足够了。我还建议升级到最新的[vQmod](http://vqmod.com)版本，它具有许多功能和改进的性能

# javascript - 带有厚框的 Javascript

> ID：13111019
> 
> 赞同：0
> 
> 时间：2012-10-28T17:04:37.287
> 
> 标签：javascript, jquery, html

我正在使用无法更改的厚盒。

厚盒的工作原理是“我放入href的内容出现在一层中”

例如

`<a href="login.html">click</a>` 当我单击链接 login.html 时，会在图层中打开。

问题陈述 ：

如果我点击它，我想要什么登录层打开。
但是，当我在新选项卡上打开链接时，我想要而不是 login.html 打开它应该打开 action.php

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:09:37.990

当页面位于 iframe 中时，您可以重定向页面 - 或相反：

```
if( parent.document.URL != document.URL ){
    window.location="login.html";
} 
```

当页面位于 iframe (parent.document.URL != document.URL) 中时，它将被重定向到 login.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:52:44.557

我有同样的问题和解决方案是

在href上使用“action.php”并在OnClick事件上使用thickbox的tb_show进行图层打开:-)

# c# - .NET XmlSerializer（反）序列化来自不同命名空间的派生类型，使用架构编译器 xsd.exe 和错误的命名空间绑定

> ID：13111023
> 
> 赞同：3
> 
> 时间：2012-10-28T17:05:19.190
> 
> 标签：c#, .net, xml, xml-serialization, xsd

我正在尝试使用[XML 模式定义工具](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.80%29.aspx)从以下模式生成 CS 代码：

a.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xs:complexType name="Bar">
        <xs:sequence>
            <xs:element name="v" type="xs:double"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="Base"/>
    <xs:element name="root" type="Base" />
</xs:schema> 
```

B.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ns1="v2" targetNamespace="v2" elementFormDefault="qualified">
    <xs:import schemaLocation="A.xsd"/>
    <xs:complexType name="Derived">
        <xs:complexContent>
            <xs:extension base="Base">
                <xs:sequence>
                    <xs:element name="b" type="Bar"/>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
</xs:schema> 
```

我像这样执行 xsd.exe 架构编译器：

xsd.exe A.xsd B.xsd /c

并得到一个 B_A.cs 文件（很多代码，随意重新生成自己）。

有两种意想不到的行为。

序列化：如果您序列化 Derived 类型的 Bar 的实例：

```
 XmlSerializer serializer = new XmlSerializer(typeof(Base));
    Derived d = new Derived();
    d.b = new Bar();
    d.b.v = 12.123;
    serializer.Serialize(Console.Out, d); 
```

你得到这个：

```
<?xml version="1.0" encoding="ibm850"?>
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:q1="v2" xsi:type="q1:Derived">
  <q1:b>
    <q1:v>12.123</q1:v>
  </q1:b>
</root> 
```

由于 b 中的 v 元素是以 q1 为前缀的命名空间，因此它不适用于 B.xsd。去掉前缀，它验证了，因为（我相信）是正确的。

同样，反过来。以这个实例文档为例，它验证：

```
<?xml version="1.0" encoding="utf-8"?>
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:q1="v2" xsi:schemaLocation="v2 B.xsd" xsi:type="q1:Derived">
  <q1:b>
    <v>12.123</v>
  </q1:b>
</root> 
```

尝试使用生成的代码对其进行反序列化，如下所示：

```
 XmlSerializer serializer = new XmlSerializer(typeof(Base));
    Bar p = (Bar)serializer.Deserialize(new FileStream(@"..\..\test.xml", FileMode.Open));
    Console.Out.WriteLine(p.v); 
```

你得到 0.0 输出，因为 v 是默认初始化的。将 q1: 前缀添加到实例文档的 v 元素中，它可以工作，但无效。

有人会同意这是 XML Schema 定义工具的错吗？我不相信它会生成正确的序列化代码，但很难责怪这些工具。如果我们将带有 Namespace="" 的 XmlElement 属性添加到 v，它可以工作，但现在我正在修改生成的代码，这是不可取的（我正在工作的项目生成代码作为构建的一部分 - 我们不是应该改变它）。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:32:49.757

好吧，我有一些我认为可以使用的东西 - 我将在单独的 cs 模块中将 XmlRootAttribute(Namespace="") 添加到 Bar 部分类。

# python - 使用理由创建python行与列表

> ID：13111025
> 
> 赞同：0
> 
> 时间：2012-10-28T17:05:23.280
> 
> 标签：python, input, iteration

假设我必须获取用户输入的行数和列数，同时询问他们希望他们的列如何合理。说这个例子，他们希望它是正确的。我该怎么办？

```
numofrows = rawinput('# rows:')
numofcolumns = rawinput('# columns:')
for x in range(numberofcolumns):
    justify = rawinput('Do you want left, center, or right?') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:39:49.070

您似乎在询问如何为单独的列请求对齐设置，这些列的数量是`numofcolumns`多少。到目前为止，对您的程序最简单的更改是更正`rawinput`，`raw_input`并在最后一个提示中添加一个列号，并将结果保存在一个列表中：

```
nrows = int(raw_input('# rows: '))
ncolumns = int(raw_input('# columns: '))
justify = []
for x in range(ncolumns):
    j = raw_input('Select left, center, or right justification in column '+str(x+1)+' by L,C,R: ')
    justify.append(j.upper())
print justify 
```

例如，有`ncolumns = 4`四个问题，如

```
Select left, center, or right justification in column 1 by L,C,R: 
```

将出现，如果用户依次以大写或小写字母 L、R、C 和 L 响应，则打印语句将打印`['L', 'R', 'C', 'L']`.

当然，这样的界面使用起来很笨拙；一方面，如果用户在输入了十几个其他规格后，发现第 4 列的规格有错误，则必须从头开始。另一方面，该程序很难从脚本中使用。下面显示的示例代码没有解决后一个问题，但确实使用户可以轻松地以任何顺序进行列对齐设置。此代码显示一条消息，`Select column justification settings, then click Go`并放置一个标记为 L、C、R 的单选按钮网格。用户对对齐设置感到满意并单击 Go 后，程序会打印一个类似 [1, 1, 1, 0, 2] 的列表，表示 C、C、C、L、R 选择，如下图所示。 ![单选按钮网格](../Images/732d3da49c0f7adc942282cdd8e324fb.png) 这个演示程序不输入`nrows`或`ncolumns`，而是设置`ncolumns=5`。

```
#!/usr/bin/env python
# Set up a simple horizontal menu with some editable radio buttons
import gtk
def bcallback(w, i, j):         # Radio button callback
    settings[i] = j
# create set of radio buttons
ncolumns = 5
W = gtk.Window()
W.connect('destroy', gtk.main_quit)
W.set_title('Column-justification settings')
box = gtk.HBox()
W.add(box)

for i in range(ncolumns):
    col = gtk.VBox()
    b = gtk.RadioButton(None, 'L')
    rb = [b, gtk.RadioButton(b, 'C'), gtk.RadioButton(b, 'R')]
    for j,b in enumerate(rb):
        col.pack_start(b)
        b.connect('toggled', bcallback, i, j)
    box.pack_start(col)

b = gtk.Button(None, 'Go')
b.connect('button-press-event', gtk.main_quit)
box.pack_start(b)
W.show_all()       # Make menu available for showing
settings = [0 for i in range(ncolumns)]
print 'Select column justification settings, then click Go'
gtk.main()
print settings 
```

# wordpress - Wordpress 缩略图大小

> ID：13111026
> 
> 赞同：0
> 
> 时间：2012-10-28T17:05:32.357
> 
> 标签：wordpress, post, size, overriding

我在 ivanschneider.de 网站上遇到了关于帖子缩略图的问题。

我想要 650 x 0 像素的大缩略图。所以我将这段代码添加到 k2-loop.php 中：

```
 <div class="entry-content">
        <?php if ( function_exists('has_post_thumbnail') and has_post_thumbnail() ): ?>
            <a href="<?php the_permalink(); ?>">
            <?php the_post_thumbnail( array( 650, 0 ), array( 'class' => 'alignleft' ) ); ?></a>
        <?php endif; ?>

    </div><!-- .entry-content --> 
```

现在这正在工作。每当我转到 Wordpress 的仪表板并将新图像设置为文章缩略图时，它都会生成 650 x 0 图像并正确显示。

但后来我使用了另一个名为相关帖子缩略图的插件，它显示了一些缩略图/指向其他相关帖子的链接。因为我没有设置小缩略图，所以它以小而不成比例的方式显示那些 650 像素的大图像的缩略图，看起来很难看。

所以，我去了媒体库的选项并将缩略图大小设置为 150 x 150 像素，以便为这样的插件提供一些缩略图。我想，它会创建它们并让我的帖子缩略图平静下来。

现在我的问题：看起来，它覆盖了我在上面输入到 k2-loop.php 的代码。换句话说，当我想创建一个新帖子并将图像设置为帖子缩略图时，获取小的 150 x 150 大小而不是我在 k2-loop.php 中设置的 650 x 0 大小。

如何防止媒体库缩略图设置覆盖我的 k2-loop.php 代码？

提前非常感谢。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T16:34:18.897

我解决了这个问题

```
<?php the_post_thumbnail( medium ); ?></a>" 
```

而不是 650 x 0 的数组。

# c++ - libcurl 如何更改编码 url 行为

> ID：13111027
> 
> 赞同：0
> 
> 时间：2012-10-28T17:05:39.847
> 
> 标签：c++, c, http, curl, libcurl

问题：当我发出包含重定向的请求时，最后一个重定向返回 404，因为 Location 标头中的 URL 包含一个`'#'`字符。`libcurl`将其编码为`%23`并且请求返回 404（服务器的规则？），而其他一些请求重定向到包含`'#'`工作正常的 URL。例如 Opera 浏览器也可以`404`使用`%23`和`200`. `'#'`有谁知道我怎样才能改变这种行为并且`libcurl`不对 URL 进行编码？因此，此时我不想手动转到重定向 URL……无论是否使用代理，都会注意到这种行为。

```
Additional info
-------------------------------------
libcurl 7.27.0
Ubuntu 12.04
CURLOPT_FOLLOWLOCATION = true
CURLOPT_MAXREDIRS = -1
HTTP 1.1
CURLOPT_POSTREDIR = default 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:57:45.683

不知道能不能直接在libcurl中控制这个。但即使你不能，也不是所有的希望都消失了。您的代码可以劫持 curl_easy_escape 以获得您想要的行为。这是一个 hack，但我猜你可以将它作为最后的手段。

这是一个`double sin(double)`从数学库中劫持函数的简单示例。首先是使用的主文件`sin`：

sin_test.c:

```
#include <math.h>
#include <stdlib.h>
#include <stdio.h>

int main(int argc, char ** argv)
{
    double x = atof(argv[1]);
    printf("sin(%f) = %f\n", x, sin(x));
    return 0;
} 
```

编译这个文件：`gcc -o sin_test sin_test.c -lm`，并检查它是否有效

```
./sin_test 1
sin(1.000000) = 0.841471 
```

我们现在将其视为给定的，并尝试在不更改其源代码的情况下覆盖其行为。为此，我们定义了一个共享库`sin_override.so`，如下所示。使用以下内容创建文件`sin_override.c`：

```
#include <math.h>
#include <stdlib.h>
#define __USE_GNU
#include <dlfcn.h>

double sin(double x)
{
    double (*real_sin)(double) = NULL;
    if(!real_sin) real_sin = dlsym(RTLD_NEXT,"sin");
    return real_sin(x)/10;
} 
```

并使用`gcc -fPIC -shared -o sin_override.so sin_override.c -ldl 编译它。现在告诉系统在程序本身之前加载这个共享库：

```
LD_PRELOAD=/full/path/to/sin_override.so ./sin_test 1
sin(1.000000) = 0.084147 
```

答案现在比以前小 10 倍，确认我们已经覆盖了默认罪。

在您的情况下，您将覆盖 curl_easy_escape，首先调用真正的 curl_easy_escape，然后运行生成的字符串，将 %23 替换为 #，然后返回修改后的字符串。我还没有为 libcurl 测试过这个，但是这样的东西应该可以工作，虽然它有点麻烦。

# python - 索引其对象元素属性的 Python 列表类

> ID：13111028
> 
> 赞同：0
> 
> 时间：2012-10-28T17:05:41.717
> 
> 标签：python, list, indexing

我正在寻找在 python 中创建列表的最佳方法，该列表为放入列表中的对象的所有属性创建散列索引（dicts）。

```
>>> foo = IndexingList([{ 'id': 1, 'name': 'cat' }, { 'id': 2, 'name': 'dog' }])
>>> foo[0]
{'id': 1, 'name': 'cat'}

>>> foo.findall('id', 2)
[{'id': 2, 'name': 'dog'}]

>>> foo += {'id': 3, 'name': 'dog'}
>>> foo.findall('name', 'dog')
[{'id': 2, 'name': 'dog'}, {'id': 3, 'name': 'dog'}] 
```

我想 IndexingList 的数据结构将如下所示：

```
{
    'items': [
        { 'id': 1, 'name': 'cat' }, 
        { 'id': 2, 'name': 'dog' }
    ],
    'indexes': {
        'id': {
            1: [{ 'id': 1, 'name': 'cat' }],
            2: [{ 'id': 2, 'name': 'dog' }]
        },
        'name': {
            'cat': [{ 'id': 1, 'name': 'cat' }],
            'dog': [
                { 'id': 2, 'name': 'dog' },
                { 'id': 3, 'name': 'dog' }
            ]
        }
    }
} 
```

其中“索引”节点中的对象指的是“项目”中的相同对象。

我认为本身是对象的属性值可以通过使用 str(property) 来获得唯一的索引键来获得一些东西来粘贴在“索引”中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:26:13.423

使用 some s 实际上很容易做到这一点[`collections.defaultdict()`](http://docs.python.org/3/library/collections.html#collections.defaultdict)- 尽管如果您经常使用它，您可能会考虑使用实际的数据库。

```
from collections import defaultdict
from functools import partial

class IndexingList:
    def __init__(self, items):
        self.items = []
        self.indices = defaultdict(partial(defaultdict, list))
        self.extend(items)

    def append(self, item):
        try:
            for index, value in item.items():
                self.indices[index][value].append(item)
        except AttributeError as e:
            raise ValueError("All children of an IndexingList must be "
                             "dict-like. '{0}' is not.".format(item)) from e
        self.items.append(item)

    def extend(self, iterable):
        for item in iterable:
            self.append(item)

    def __iadd__(self, other):
        self.extend(other)
        return self

    def __getitem__(self, item):
        return self.items[item]

    def __setitem__(self, item, value):
        self.items[item] = value

    def __delitem__(self, item):
        del self.items[item]
        for index, value in item.items():
            self.indices[index][value].remove(item)

    def find_all(self, index, value):
        return self.indices[index][value]

    def __repr__(self):
        return repr(self.items) 
```

像这样使用：

```
>>> foo = IndexingList([{ 'id': 1, 'name': 'cat' }, { 'id': 2, 'name': 'dog' }])
>>> foo[0]
{'id': 1, 'name': 'cat'}
>>> foo.find_all("id", 2)
[{'id': 2, 'name': 'dog'}]
>>> foo += [{'id': 3, 'name': 'dog'}]
>>> foo.find_all('name', 'dog')
[{'id': 2, 'name': 'dog'}, {'id': 3, 'name': 'dog'}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-01T18:04:12.807

I must say that Lattyware provides a really nice solution. I'll still provide my own quick and dirty approach, as when when indexing on unique items it's a simple one liner. Instead of building a nice wrapper container I sometimes create an index on a certain column:

```
my_list = [('aap', 123), ('noot', 234), ('mies', 345), ('mies', 456)] 
```

Provided the key in that column is unique and we don't add any new elements to the list nor modify the value we indexed on we may use:

```
def mk_unique_index(data, col):
  g = ((elem[col], elem) for elem in data)
  return dict(g) 
```

So we can use it like:

```
>>> idx = mk_unique_index(my_list, 1)
>>> idx[123]
('aap', 123) 
```

However, if we wish to index on the 0th column we must use a defaultdict

```
from collections import defaultdict
def mk_index(data, col):
  d = defaultdict(list)
  for elem in data:
    d[elem[col]].append(elem)
  return d 
```

Usage:

```
>>> idx = mk_index(my_list, 0)
>>> idx['mies']
[('mies', 345), ('mies', 456)] 
```

If instead of tuples you're using dictionaries or even named tuples (provided all elements have the field you're indexing on) you could just provide the field name for the column Obviously one might also choose to use a temporary [sqlite](https://docs.python.org/2/library/sqlite3.html) database in memory.

# function - 从模板 Prestashop 中的控制器触发功能

> ID：13111032
> 
> 赞同：2
> 
> 时间：2012-10-28T17:05:46.290
> 
> 标签：function, templates, controller, prestashop

我如何从模板中触发控制器中的特定功能。假设我有一个搜索模块，在用户单击按钮搜索后，我想执行一些操作（如果有任何错误，请让我注意）。

1.  处理表格（我知道我可以做 throw Tools::getValue('name_of_variable')）

2.  我需要评估和进行数据库搜索的表格。如果不在自定义函数中，我应该将代码放在哪里。但是如何确保这个函数会被触发。在自定义 php 文件中这很容易，因为除了主代码之外没有其他代码，每次我调用该文件时都会重复调用它。但在这里，我只想调用确切的一个函数。

或者我需要包含哪些文件才能使用 DB 和 smarty 界面，我可以这样做抛出原始 PHP 代码。

请帮助我，因为我已经坚持了大约两个星期。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T07:36:50.480

搜索有一个特定的钩子，称为“actionSearch”。

*   创建一个模块
*   在 install() 方法中，调用 $this->registerHook('actionSearch');
*   在函数 hookActionSearch() 中，实现你的代码
*   如果你想给 smarty 赋值，使用全局作用域和 Context::getContext()->smarty->assign()
*   如果你想在 Smarty 中使用这些变量，那么这取决于你想在哪里显示东西......

例如，模块 StatsSearch 实现了这个钩子。

# c - C11 是否允许在函数中的任何位置声明变量？

> ID：13111033
> 
> 赞同：4
> 
> 时间：2012-10-28T17:05:50.613
> 
> 标签：c, c11, variable-declaration

C11 标准（注意我不是指 C++11）是否允许您在函数的任何位置声明变量？

以下代码在 ANSI C (C89, C90) 中无效：

```
int main()
{
  printf("Hello world!");
  int a = 5; /* Error: all variables should be declared at the beginning of the function. */
  return 0;
} 
```

它是 C11 中的有效源代码吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T17:08:49.933

是的。这在 C99 中已经有效（请参阅[此处](http://en.wikipedia.org/wiki/C99#Design)的第二个项目符号）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-28T17:10:58.190

或多或少。C99 引入了在块的一部分和循环的第一部分声明变量的能力`for`，C2011 继续了这一点。

```
void c99_or_later(int n, int *x)
{
    for (int i = 0; i < n; i++)  // C99 or later
    {
         printf("x[%d] = %d\n", i, x[i]);
         int t = x[i];           // C99 or later
         x[0] = x[i];
         x[i] = t;
    }
} 
```

您可能还注意到 C++ 样式的尾部注释也仅在 C99 或更高版本中有效。

如果您必须处理不符合 C99 的 C 编译器（例如 MSVC），那么您不能使用这些（方便的）符号。GCC 为您提供了一个有用的警告标志：`-Wdeclaration-after-statement`.

请注意，您不能将声明紧跟在标签之后（C11 [§6.8.1 Labeled statements](http://port70.net/%7Ensz/c/c11/n1570.html#6.8.1)）；您不能标记声明或跳转到声明。另见[§6.8.2 复合语句](http://port70.net/%7Ensz/c/c11/n1570.html#6.8.2)、[§6.7 声明](http://port70.net/%7Ensz/c/c11/n1570.html#6.7)和[§6.9 外部定义](http://port70.net/%7Ensz/c/c11/n1570.html#6.9)。但是，您可以标记一个空语句，因此这不是主要问题：

```
label: ;
    int a = 5; 
```

# c# - SlimDX 丢失设备：试试 Catch 性能？

> ID：13111037
> 
> 赞同：2
> 
> 时间：2012-10-28T17:06:09.050
> 
> 标签：c#, performance, try-catch, direct3d, slimdx

我正在使用 SlimDX 和 Direct3D9 类来创建 C# 游戏引擎。

一年前我开始使用它，我记得我成功并安全地设法捕获丢失的设备并重置它们（在 Windows 7 上）。现在（在 Windows 8 上）我再次开始处理它，但看起来我无论如何都不会捕获丢失的设备，尤其是在 Ctrl+Alt+Del 的情况下。

这是之前的工作代码：“IsDeviceLost”方法在 Ctrl+Alt+Del 时错误地返回 false，因此设备即将出现，但它崩溃到 Direct3D9Exception：“D3DERR_DEVICELOST”：

```
 public void Update(float time)
    {
        if (!IsDeviceLost(true))
        {
            _device.Present();
        }
    }

    private bool IsDeviceLost(bool resetIfNeeded)
    {
        bool deviceLost = false;

        // Check if DeviceLost is detected
        Result result = _device.TestCooperativeLevel();
        if (result == ResultCode.DeviceLost)
        {
            Log.Write(LogType.Warning, "Direct3D9Manager: Device lost and cannot be reset yet.");
            // Device has been lost and cannot be reset yet
            deviceLost = true;
        }
        else if (result == ResultCode.DeviceNotReset)
        {
            Log.Write(LogType.Information, "Direct3D9Manager: ResultCode.DeviceNotReset");
            // Device is available again but has not yet been reset
            if (resetIfNeeded)
            {
                // Reset device and check if it can work again
                _device.Reset(_presentParams);
                deviceLost = IsDeviceLost(false);
                if (deviceLost)
                {
                    // Reset failed, device still lost
                }
                else
                {
                    // Reset successful, device restored
                    // TODO: Reload textures and render states which are lost after a reset
                }
            }
            else
            {
                deviceLost = true;
            }
        }

        return deviceLost;
    } 
```

所以我在网上研究了这个问题，发现了几个代码，将更新代码放入 try-catch 块的 try 部分，但我不确定这是否是解决这个问题的正确方法。

*   对于每帧调用的游戏引擎中的 Update 方法，try-catch 不是很慢吗？
*   难道没有更好的方法来捕捉丢失的设备，而不是使用 try-catch 吗？

# localization - 在运行时更改应用程序本地化

> ID：13111039
> 
> 赞同：1
> 
> 时间：2012-10-28T17:06:20.517
> 
> 标签：localization, windows-8, microsoft-metro, windows-runtime

在 Windows Phone 7 中，只需通过以下设置即可轻松更改应用程序区域设置：

```
Thread.CurrentThread.CurrentUICulture = new CultureInfo("de-DE"); 
```

然后应用程序从文件 AppResources.de-DE.resx 加载资源，无论目标手机上的默认应用程序文化或当前文化是什么。

问题是：**在 WinRT - Windows 8 应用程序中是否可能出现这种情况？**如果是，如何？这里的基本问题是没有 Thread 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:27:00.750

采用

```
Windows.Globalization.ApplicationLanguages.PrimaryLanguageOverride = "de-DE"; 
```

# algorithm - 两个伪代码之间的区别？

> ID：13111040
> 
> 赞同：0
> 
> 时间：2012-10-28T17:06:40.177
> 
> 标签：algorithm, pseudocode

```
PrefixAverages1(X)
Input: X, a 1-D numerical array of size n
1) Let A = an empty 1-D numerical array of size n
2) For i = 0 to n-1
3)    Let s = X[0]
4)    For j = 1 to i
5)       Let s = s + X[j]
6)    End For
7)   Let A[i] = s /(i+1)
8) End For
Output: An n-element array A of numbers such that A[i]
    is the average of elements X[0],X[1], … ,X[i]

PrefixAverages2(X)
Input: X, a 1-D numerical array of size n
1) Let A = an empty 1-D numerical array of size n
2) Let s = 0
3) For i = 0 to n-1
4)    Let s = s + X[i]
5)    Let A[i] = s / (i+1)
6) End For
Output: An n-element array A of numbers such that A[i]
    is the average of elements X[0],X[1], … ,X[i] 
```

所以这是我到目前为止所知道的：

第一个算法使用第二个嵌套的 for 循环。第二种效率更高。首先，S 等于数组的第一个元素。在第二个中，S 等于 0。

我还缺少什么？任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:16:45.927

在这两种算法中，在每次迭代结束时，S 等于从 0 到 的所有元素的总和`i`。

在第二个算法中，直到第一次迭代，还没有看到任何元素，因此总和为 0。

首先，计算的循环`S`从 1 开始计数。由于它从不查看`X[0]`，因此必须将其添加到其他地方才能使总和正确。所以`S`一开始就已经包括`X[0]`. （即使对于空列表也是安全的，因为在空列表中我们永远不会计算总和。）

如果您更改了第一个算法的求和循环，使其从 0 开始计数，那么将从 0`S`开始。我认为它不是那样做的，因为作者是微优化的，并且没有看到初始化的意义到 0，然后`X[0]`当他已经知道它在那里时立即添加它。

# javascript - 预定义参数

> ID：13111046
> 
> 赞同：6
> 
> 时间：2012-10-28T17:07:31.107
> 
> 标签：javascript

我希望能够在 JavaScript 中做到这一点：

```
function myFunction(one, two = 1) {
     // code
}

myFunction("foo", "2");

myFunction("bar"); 
```

我试过这个，但它不起作用。我不知道如何调用这种类型的参数，有人能指出我正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:08:59.953

```
function foo(a, b)
 {
   a = typeof a !== 'undefined' ? a : 42;
   b = typeof b !== 'undefined' ? b : 'default_b';
   //...
 } 
```

[可能与为 JavaScript 函数设置默认参数值](https://stackoverflow.com/questions/894860/set-a-default-parameter-value-for-a-javascript-function)重复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T17:08:45.587

```
function myFunction(one, two) {
     two = two || 1
} 
```

更准确地说，例如，当两个为零时，它可能不起作用，请检查 null 或未定义，例如

```
if (typeof two === "undefined") two = 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T17:09:17.147

用这个 ：

```
function myFunction(one, two) {
   if (typeof two == 'undefined') two = 1;
   ...
} 
```

注意不要犯常见的错误

```
two = two || 1; 
```

因为这不允许您提供`""`或`0`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T17:08:38.613

尝试：

```
if ( typeof two === "undefined" ) two = 2; 
```

或者

```
two = typeof two !== "undefined" ? two : 2; 
```

未定义的参数将具有 value `undefined`，这是一个“虚假”值。我们可以测试这种虚假性，并相应地更改值。

# c# - 在 ASP.NET 中的玩家之间共享一个竞技场

> ID：13111049
> 
> 赞同：1
> 
> 时间：2012-10-28T17:08:32.943
> 
> 标签：c#, asp.net, shared-memory

引导我到这里的问题是概念性的。我想为游戏创建一个竞技场。这个竞技场将是一种网络服务，因为我必须出于两个目的公开它：

*   在有人可以与计算机对战的演示网站上。在演示网站上，创建人工智能的人可以看到他们派对的动画。

*   在人工智能请求一起玩的 API 上。

事实上，我必须为那些人工智能组织一次编程比赛。我的问题是我有点受阻，因为我有一大堆技术，有些我掌握了，有些我只是听说过，有些我就是不明白。

我的问题是，当 2、3 或 4 个 AI 一起玩时，我不知道如何处理回合。

我的第一个想法是关于套接字。

IA 打开一个带有我网站的特殊 URL 的套接字，并在套接字内交换数据（轮到你了，这是我的命中，哦，天哪，这是一个糟糕的命中再试一次……）。我不知道这是否是正确的做法，以及我是否可以像这样在所有 IA 之间共享竞技场。

我想过一个简单的 http 交换，就像我们可以用旧的 javascript API 做的那样，但是随着请求每次关闭，它都会带来一些困难。

我使用 ASP.NET 在 C# 中执行此 Web 服务/网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:15:58.807

如果您不需要实时（轮流）。

您还可以为每个竞技场设置一个密钥/ID，并且客户端可以定期轮询网络服务以获取游戏状态（*轮到您了，这是我的命中，哦，天哪，这是一个糟糕的命中再试一次......*）

对于 Web 部件，您可以使用 JSON 和 Ajax 与服务器进行高效通信。但始终是客户端询问服务器。

--

我不知道套接字（使用 HTML5）会是什么，或者当您有很多同时用户时使用桌面客户​​端的套接字。

# google-maps - 仅在存在某些缩放级别时触发功能

> ID：13111053
> 
> 赞同：-1
> 
> 时间：2012-10-28T17:08:57.263
> 
> 标签：google-maps, google-maps-api-3

在我的谷歌地图上达到某些缩放级别后，我试图启动几个功能。下面可能并不接近正确，但我希望它能给每个人一个想法。我很确定你会使用 zoom_changed 动作监听器，但在那之后我就一无所知了。

```
google.maps.event.addListener(map, 'zoom_changed', function() {
    map.Zoom(zoomLoad, 4);
});

function zoomLoad() {
    getFishing();
    getLaunches();
} 
```

任何为我指明正确方向的帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:39:03.410

1.  在地图上使用 zoom_changed 事件
2.  触发时，获取当前缩放级别（[map.getZoom()](https://developers.google.com/maps/documentation/javascript/reference#Map)）
3.  根据当前缩放级别执行您想要执行的任何操作

[该文档](https://developers.google.com/maps/documentation/javascript/events)对此进行了一些讨论并[提供了一个示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/event-properties)

* * *

> *HondaKillrsx：*我让它适用于我的代码，如下所示：

```
google.maps.event.addListener(map, 'zoom_changed', function() {
var zoomLevel = map.getZoom();

if (zoomLevel > 7) {
  getLaunches();
  getFishing();
}
else {
  clearLaunches();
  clearFishing();
} 
```

# actionscript-3 - Starling 和 AS3 物理引擎 - 如何组织动画

> ID：13111057
> 
> 赞同：0
> 
> 时间：2012-10-28T17:09:04.793
> 
> 标签：actionscript-3, box2d, physics, starling-framework

在我的游戏中，一个物体（身体）移动每一帧，我使用 Box2D 或 Nape 都没关系。

```
 //for example
var body:Body = createNewBall();
addChild( body.graphic );
    addEventListener( Event.ENTER_FRAME, loop);

    private function loop():void {
    space.step(1/30, 10, 10);
    } 
```

但是 Starling 使用杂耍演员的动画。也许它会以某种方式影响性能。

```
var body:Body = createNewBall();
addChild( body.graphic );
var tween:Tween = new Tween(body.graphic, 2);
tween.animate("x", glX);
tween.animate("y", glY);
Starling.juggler.add(tween); 
```

但是在enter_frame动画的情况下如何使用杂耍者呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T00:38:55.033

使用物理引擎时，通常不会通过定期`Tween`添加到八哥杂耍中来为对象设置动画，而是根据引擎在每一步中计算的位置来更新图形对象的位置。您将需要使用一个，`ENTER_FRAME`这样您就可以使引擎每一步都前进。使用您发布的代码，您可以执行以下操作：

```
 //for example
  var body:Body = createNewBall();
  addChild( body.graphic );

  //callback to update graphic position
  body.graphicUpdate = updateBallGraphics;

  addEventListener( Event.ENTER_FRAME, loop);

  private function loop():void
  {
    space.step(1/30, 10, 10);
  }

  private function updateBallGraphics(b:Body):void
  {
    b.graphic.x = b.position.x;
    b.graphic.y = b.position.y;
  } 
```

gotoandlearn.com 上有一个[关于使用 Starling 和 Nape 的精彩教程](http://www.gotoandlearn.com/play.php?id=157)，涵盖了这一点，以及您需要开始的所有基础知识。希望这可以帮助！

# time-series - 将时间序列数据读入 Octave 数据结构并对其进行迭代

> ID：13111058
> 
> 赞同：0
> 
> 时间：2012-10-28T17:09:09.547
> 
> 标签：time-series, octave

我想使用 Octave 实现机器学习算法。我是 Octave 的新手，虽然我已经阅读了一些在线教程，但我仍然不清楚如何执行以下操作：

1.  将 CSV 文件读入合适的 Octave 结构。数据将是从 Google/Yahoo 获得的市场数据并保存为 CSV 文件。它将具有以下列（字段）：日期、开盘价、最高价、最低价、收盘价、成交量

2.  迭代上面步骤 1 中填充的数据结构。我记得在一本在线 Octave 手册中，它提到结构数组比数组结构慢，但没有提供如何创建数组结构的示例。

3.  能够选择指定时间的数据子集，例如日期字段 >="01-Jan-2001" && <="01-Jan-2012"。提取的数据应与上述步骤 2 中的数据类型相同（即可迭代数据类型）。

任何人都可以提供一些显示如何做到这一点的片段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:10:08.570

对于您的问题 #1，已经有很多教程。不幸的是，读取 CSV 文件[并不像应有的那么容易](http://abandonmatlab.wordpress.com/2012/08/07/matlab-cant-read-plain-text-data-out-of-a-wet-paper-bag/)，显然有很多事情需要考虑。

对于您的问题 #3，请参阅Octave[食谱上的食谱。](http://wiki.octave.org/Cookbook#Retrieve_a_field_value_from_all_entries_in_a_struct_array)在讨论部分，我写了一些关于将它与逻辑索引一起使用的讨论，这似乎适合您的问题。

# php - Count Userid In Last 5 Results

> ID：13111063
> 
> 赞同：0
> 
> 时间：2012-10-28T17:09:39.563
> 
> 标签：php

I need to know if the last 5 entry's in a table were placed by the same userid (in the code below the user id is `frozen_by`.

Here's what I have

```
//count if the last 5 freezes was placed by the same user

$strFind="SELECT COUNT(*) AS `total` FROM `contest_frozen` WHERE `contest_id`=\"$pid\" AND `frozen_by`=\"$curmemid\" ORDER BY `id` DESC LIMIT 5";
$result=mysql_query($strFind) or die(mysql_error());
$row=mysql_fetch_array($result);
$freeze_total=$row['total'];

if($freeze_total>=5){
//do this
}

if($freeze_total<5){
//do this
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:15:49.913

You could use a query like this: It returns the number of different users in the last 5 rows. It also returns the highest userid, so if `UserCount == 1` and `MaxUser == $curmemid` then you know that that user places the last five records.

```
SELECT
  count(distinct frozen_by) as UserCount,
  max(frozen_by) as MaxUser
FROM 
  contest_frozen
WHERE 
  contest_id = $pid 
ORDER BY 
  `id` DESC 
LIMIT 5 
```

If you need explicit counts, you can do that too. Query below returns the number of records by the given user and the number of records by other users. If ThisUserCount == 5 then all 5 records are from that user.

```
SELECT
  sum(case when frozen_by = $curmemid then 1 else 0 end) as ThisUserCount,
  sum(case when frozen_by = $curmemid then 0 else 1 end) as OtherUserCount

FROM 
  contest_frozen
WHERE 
  contest_id = $pid 
ORDER BY 
  `id` DESC 
LIMIT 5 
```

# windows-8 - 绑定 itemDataSource 以选择 html 元素？

> ID：13111064
> 
> 赞同：0
> 
> 时间：2012-10-28T17:09:42.570
> 
> 标签：windows-8, winjs

是否可以将 List-Binding 绑定到 HTML Select () 元素以将绑定的内容显示为元素？

我现在正在使用它，这似乎不起作用：

```
<select data-win-options="{itemDataSource: ...)}"></select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:25:25.560

有一种没有声明性绑定的编程方式：

JavaScript 部分：

```
// Load data
var options = [
    { optionValue: 1, optionText: 'One', selected: false },
    { optionValue: 2, optionText: 'Two', selected: true },
    { optionValue: 3, optionText: 'Three', selected: false }
];

// Fill select box
options.forEach(function (value, i) {
    var newOption = document.createElement("option");
    newOption.text = value.optionText;
    newOption.value = value.optionValue;
    if (value.selected) {
        newOption.selected = true;
    }
    myBox.add(newOption);
}); 
```

HTML部分：

```
<select id="myBox"></select> 
```

否则，您可以使用带有模板的 WinJS.UI.ListView：http: [//msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx)

# java - 在 Java 中使用 for-each 循环时，对象变量是否会创建对象的实例？

> ID：13111065
> 
> 赞同：0
> 
> 时间：2012-10-28T17:09:43.743
> 
> 标签：java

我正在使用以下代码向`StockRecord`我的`stockRecords`收藏添加一个新的。StockRecord 扩展了 Stock。

```
for (Stock s : stock) {
     stockRecords.add(new StockRecord(s.get_storeID(),
     s.get_sku(), s.get_itemCount()));
} 
```

我在 和 的构造函数中有一个 println`Stock`语句`StockRecord`。当我运行此代码时，我得到以下输出：

```
Stock()
StockRecord()
Stock()
StockRecord()
Stock()
StockRecord()
Stock()
StockRecord() 
```

在 for-each 循环中使用变量`s`实际上会创建一个实例`Stock`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:16:12.090

它不是。For 循环使用 java 迭代器。在循环的每次迭代中，`Iterator.hasNext`并在由 .`Iterator.next`返回的对象上调用`stock.iterator()`。`java.util`集合不会创建新对象，但如果您有自定义集合，它可能会。

另一种可能性是您在对 getter 的调用或在`StockRecord`构造函数本身的主体中创建对象。在那些地方寻找“新”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T17:37:04.440

每当实例化一个新对象时，它的父构造函数都会在其自己的构造函数之前被调用（依此类推直到`Object`）。由于`StockRecord`extends `Stock`，当你调用`new StockRecord`某个`Stock`构造函数时，会在指定`StockRecord`构造函数之前调用。这就是为什么您会看到这些打印语句并按顺序排列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T17:13:58.473

`Stock`您`s`在每次迭代中引用的实例已经存在。`StockRecord`但是，您每次都创建一个新实例（这可能反过来创建其他类的其他实例）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T17:13:20.997

`Stock s`从集合/数组对象中获取引用`stock`。它不会创建任何对象。

# cordova - 在单独的 html 文件中使用 Phonegap 的 console.log

> ID：13111068
> 
> 赞同：0
> 
> 时间：2012-10-28T17:10:09.807
> 
> 标签：cordova

我正在努力使用 console.log 打印到 Xcode 控制台。

它在 index.html 中工作得非常好，但它在其他 html 文件中不起作用。

我也许可以通过使用单个 html 文件来解决这个问题，但想知道是否有办法在使用单独的 html 文件时解决这个问题？（我正在使用 Phonegap 2.1.0、Jquery Mobile 1.2.0 和 Xcode 4.3.3）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:11:04.800

`phonegap.js`捕获`console.log`调用并调用本机调试语句以在 Xcode 中显示。确保您也在其他 html 文件中包含 phonegap.js。如果您正在使用 jquery mobile 的 ajax 加载来加载其他页面，则可能存在其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:42:48.293

我最终通过将我的代码移动到 index.html 文件来解决这个问题。可悲的是，它只是在单独的 html 文件中不起作用。

# c - 我尝试在linux上用c语言学习管道

> ID：13111073
> 
> 赞同：-4
> 
> 时间：2012-10-28T17:10:44.897
> 
> 标签：c, linux, pipeline

我尝试在 linux 上用 c 语言学习管道。我写跟随程序。这个程序有错误吗？

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>

int main (void)
{
    int fd[2], nbytes;
    pid_t childpid;
    char string[]= "Hello, World!\n";
    char readbuffer[80];

    pipe(fd);

    if((childpid = fork()) == -1)
    {
        perror("fork");
        exit(0);    
    } 

    if(childpid == 0)
    {
        // child process closes up input side of pipe.
        close(fd[0]);

        // send "string" through the output side of pipe.
        write(fd[1], string, strlen(string));
        exit(0);
    }

    else
    {
        // parent process closes up output side of pipe.
        close(fd[0]);

        // Read in a string from pipe.
        nbytes = read(fd[0], readbuffer, sizeof(readbuffer));
        printf("Received string = %s\n", readbuffer);
    }

    return 0;
} 
```

有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:41:59.390

这两个代码段之一是不正确的，仅基于注释：

```
if (childpid == 0)
{
    // child process closes up input side of pipe.
    close(fd[0]); 
```

和：

```
else
{
    // parent process closes up output side of pipe.
    close(fd[0]); 
```

您实际上需要关闭`fd[1]`父级（写作端）。令人惊讶的是，您的`read`调用是正确的，但是是从您刚刚在原始文件中关闭的文件描述符中读取的。

请注意，您应该只打印您阅读的内容（并且只有在您成功阅读的情况下）：

```
if (nbytes > 0)
    printf("Received string: <<%.*s>>\n", nbytes, readbuffer);
else if (nbytes == 0)
    printf("Received no data\n");
else
    printf("Received error (%d: %s)\n", errno, strerror(errno)); 
```

（请注意，您需要`<errno.h>`和`<string.h>`最后一行才能正确编译。）

和标记在那里很简单`<<`，`>>`因此您可以看到尾随空格等。如果您愿意，可以省略它们。

# javascript - 在 javascript 数组中搜索项目的最佳方法

> ID：13111074
> 
> 赞同：0
> 
> 时间：2012-10-28T17:10:48.193
> 
> 标签：javascript, jquery

我在javascript中有一个对象数组。这些对象包含一些属性，看起来像这样：

```
 { "Name" : "blabla", "Id": "1" } 
```

现在我有一个函数，它接受一个参数，该参数将是对象的 Name 属性值。该函数看起来像这样：

```
 function CheckForExistance(array, name){
       var exist = false;

       $.each(array, function(index, value){
          if(value.Name == name)
          {
             exist = true;
             return false;
          }
       });
       return exist;
     } 
```

我想知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T17:25:49.857

您可以使用`$.grep()`将数组向下过滤以匹配，并返回`.length`.

```
 function CheckForExistance(array, name){
     return $.grep(array, function(obj) {
         return obj.Name == name;
     }).length > 0;
 } 
```

或者本机方法在 IMO 上更好一些，但你需要一个用于旧浏览器的 shim。

```
function CheckForExistance(array, name){
    return array.some(function(obj) {
        return obj.Name == name;
    });
} 
```

这个使用`Array.prototype.some`, 并且一旦给出真实的返回值就会退出，然后返回`true`。如果没有找到真实的返回，那么它会返回`false`。

* * *

FWIW，您还可以通过提供动态属性名称来使您的函数更加健壮。

```
function CheckForExistance(array, prop, val){
    return array.some(function(obj) {
        return obj[prop] == val;
    });
} 
```

然后用它来检查任何属性值。

```
var found = CheckForExistance(myArray, "Name", "blabla"); 
```

* * *

或者另一种方法是创建一个函数工厂来创建与迭代器一起使用的函数。

```
function havePropValue(prop, value) {
    return function(obj) {
        return obj[prop] == value;
    };
} 
```

然后我们可以直接使用`.some()`而不需要该`CheckForExistance`功能。

```
var found = myArray.some(havePropValue("Name", "blabla")); 
```

或与`$.grep`.

```
var found = $.grep(myArray, havePropValue("Name", "blabla")).length > 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T17:28:43.103

如果它是一个简单的数组对象，为什么不直接遍历它，而不是让它复杂化，为什么`$.each`在纯 JavaScript 更简单时使用它

```
 function CheckForExistance(array, name) {
   for(var i=0;i<array.length;i++){
     if(array[i].Name==name) return true;
   }
   return false;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T17:33:00.137

您还可以使用本机 Array.fiter 方法来确定名称为 x 的对象是否存在。Filter 返回一个新数组，其中包含与回调函数匹配的所有元素（返回 true）。 [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

如果新数组的长度大于 0，则至少有一个匹配元素。

```
function checkForExistance(arrayOfItems, name) {
    return arrayOfItems.filter(function (item) {
        return item.Name === name;
    }).length > 0;

}

var arr = [{
    "Name": "blabla",
    "Id": "1"
}, {
    "Name": "foo",
    "Id": "2"
}]

console.log(checkForExistance(arr, "foo")); 
```

[http://jsfiddle.net/Uawrb/1/](http://jsfiddle.net/Uawrb/1/)

这在 IE<9 中不起作用，但如果你希望它也能在那里工作，你可以查看 jQuery 的 $.grep 实现，它应该可以跨浏览器工作:)

```
function checkForExistance(arrayOfItems, name) {
    return $.grep(arrayOfItems, function (item) {
        return item.Name === name;
    }).length > 0;

}

var arr = [{
    "Name": "blabla",
    "Id": "1"
}, {
    "Name": "foo",
    "Id": "2"
}]

console.log(checkForExistance(arr, "foo"));​ 
```

[http://jsfiddle.net/5vqqq/1/](http://jsfiddle.net/5vqqq/1/)

​</p>

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-28T17:18:32.280

这应该有效：

```
function CheckForExistance(array, name){
           var exist = false;
           $.each(array, function(index, value){
              if (value == name) {
                   exist = true;
              }
           });
           return exist;
         } 
```

value.Name 不是字符串。当通过数组循环时，您会得到一个索引和一个值。

例如： array { 1: "foo", 2:"bar" } 给你 index: 1, value: "foo" index: 2, value: "bar"

value 是您要与变量“名称”进行比较的值。

2：使“存在”为真后，您返回了假。那永远不会“返回真实”。使“存在”为真后，您应该返回存在。

我想我的代码就是你要找的。

# firefox - Firefox 移动版 (android) 和方向更改

> ID：13111075
> 
> 赞同：3
> 
> 时间：2012-10-28T17:10:49.770
> 
> 标签：firefox, mobile, android-orientation, orientation-changes

该事件在适用于 android 的 firefox mobile 中不起作用。

毕竟，我如何检测方向变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T17:53:42.937

Firefox for Android 不支持orientationchange 事件，但您可以使用媒体查询侦听器获得相同的结果。

```
var mqOrientation = window.matchMedia("(orientation: portrait)");

// The Listener will fire whenever this either matches or ceases to match
mqOrientation.addListener(function() { self.handleViewportChange(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T08:37:10.407

这就像 ff for android 的魅力

```
$( window ).resize(function() {
  alert($( window ).height());
}); 
```

# java - Java中的优先队列

> ID：13111079
> 
> 赞同：0
> 
> 时间：2012-10-28T17:11:21.767
> 
> 标签：java, data-structures, priority-queue, classcastexception

当我尝试在我的 Java 类中向 PriorityQueue 添加多个元素时，会引发以下异常：

java.lang.ClassCastException

添加以下消息“事件不能转换为 java.lang.Comparable

当我尝试将两个 Event 对象添加到优先级队列时，我得到了这个表达式。这是我初始化优先级队列等的方法。也许我的构造有错误，因为这是我第一次使用它：

```
//the instance field
private PriorityQueue<Event> queue;

//Then in the constructor
queue = new PriorityQueue<Event>(); 
```

我只是在 main 方法中对其进行测试，但这是我收到上述错误的时候：

```
public static void main(String[] args) {
    SimEngine engine = new SimEngine();
    Event event1 = new Event();
    Event event2 = new Event();

    engine.getQueue().offer(event1);
    engine.getQueue().offer(event2);

    System.out.println("Queue size" + engine.queue.size());

} 
```

注意：在尝试添加到队列时，我尝试同时调用 add 和 offer。我犯了同样的错误。

以上所有代码都在我的 SimEngine 类中。我知道队列需要知道如何对这些元素进行排序，但我认为如果您不指定任何优先级，那么它会自然地对它们进行排序吗？有人可以告诉我我在这里做错了什么谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T17:13:00.203

`Event`需要[实现`Comparable<Event>`接口](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)。这意味着您需要编写`compareTo(Event)`方法。没有实现的对象没有“自然”排序`Comparable`。

另一种选择是在[`Comparator<Event>`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)构造队列时将实现传递给队列，以告诉队列如何比较`Event`实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T17:13:09.467

PriorityQueue 是一个排序的集合。因此，您添加到其中的元素必须彼此具有可比性。

它们要么必须实现 Comparable （并且队列使用该`compareTo`方法隐含的自然顺序对它们进行排序），要么您必须在创建 Queue 本身时提供 Comparator （并且队列将使用此比较器来比较对象并对其进行排序）。

如果您不执行任何这些操作，则队列无法确定第一个元素是否具有比第二个更大的优先级。

# http - X-Forwarded-Proto HTTP 标头的完整规范是什么？

> ID：13111080
> 
> 赞同：40
> 
> 时间：2012-10-28T17:11:37.143
> 
> 标签：http, http-headers

什么是`X-Forwarded-Proto`HTTP 标头值的完整规范？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-28T17:15:31.047

没有“完整规范”——它是事实上的标准。标`X-`头名称前面的^*通常将其表示为实验性/非标准/供应商特定。一旦它成为 HTTP 的标准部分，它就会丢失前缀。

IETF 有一些关于标准化的工作，但据我所知，它还处于草稿阶段。查看[https://datatracker.ietf.org/doc/html/draft-ietf-appsawg-http-forwarded-10](https://datatracker.ietf.org/doc/html/draft-ietf-appsawg-http-forwarded-10)了解截至撰写本文时的最新草案。但是请注意，它可以在充实时随时更改，并且不要在生产中依赖它。

**更新：**

[RFC 7239](https://www.rfc-editor.org/rfc/rfc7239)现在定义了`Forwarded:`标头，旨在替换`X-Forwarded-*`. 如果您关心标准，我建议您改用它。

* * *

^(*这曾经是官方的事情，但现在不再是。 [RFC 6648](http://www.ietf.org/rfc/rfc6648.txt)不推荐使用`X-`前缀约定。不幸的是，该约定是如此广为人知（并且弃用如此低调），以至于 IETF 以外的大多数人可能会忽略该建议。)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-10-05T19:33:33.670

最后是[RFC 7239 -](https://www.rfc-editor.org/rfc/rfc7239.html)从 2014 年 6 月开始的转发 HTTP 扩展。标头在第 5.4 节中定义。

一些例子：

```
Forwarded: proto=https
Forwarded: for=1.2.3.4;proto=http 
```

我只是希望这不会花费太多时间来被广泛采用。由于缺乏标准而导致标题多样性的示例（来自[此处](https://stackoverflow.com/q/16042647/253049)）：

*   `X-Forwarded-Proto: https`（事实上​​的标准）
*   `X-Forwarded-Protocol: https`
*   `X-Forwarded-Ssl: on`
*   `X-Url-Scheme: https`
*   `Front-End-Https: on`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T15:53:19.507

我不知道“完整规范”。

IETF APPSArea 工作组最近决定定义一个*新*的标头字段“Forwarded”，它应该替换您提到的“X-Forwarded-*”标头字段。

有关详细信息，请参阅[https://datatracker.ietf.org/doc/html/draft-ietf-appsawg-http-forwarded](https://datatracker.ietf.org/doc/html/draft-ietf-appsawg-http-forwarded)。

# javascript - chrome 扩展 - 将 div 附加到 body 不能与 facebook 按钮一起使用

> ID：13111082
> 
> 赞同：2
> 
> 时间：2012-10-28T17:11:54.283
> 
> 标签：javascript, google-chrome, dom, google-chrome-extension

我正在创建一个 chrome 扩展，到目前为止我已经成功了。作为最后一个功能，当用户单击我的扩展程序面板中的“关于”部分时，我正在尝试将一个 div（显示关于我的个人网站的小型、无刺激性的广告）附加到当前打开的选项卡/页面的正文。我也让它工作了。

但问题是，如果该页面包含 facebook like 或 twitter follow 小部件，则此 div 不会附加到主页的主体标签。相反，它会附加到上述小部件的 iframe 中的 body 标签上。

当我检查此类页面的 dom 结构时，这些小部件会在 iframe 中创建自己的 html>body 结构。这就是造成这个问题的原因。

我尝试将此 div 附加到第一个 body 元素，如下所示：

```
var mainbody = document.getElementsByTagName('body');
mainbody[0].appendChild(adDiv);  --> adDiv = new element I created above this code with its own properties 
```

通过上面的第二条语句，我期望它附加到第一个标签而不是内部标签。

不幸的是，这也不起作用。我可以看到它连接到 facebook/twitter 小部件而不是 main 。我在做什么有什么问题吗？

* * *

**编辑**

从@stan 的评论中，我能够使用 facebook/twitter 小部件（即带有 iframe 的页面）解决问题。现在我的代码如下所示：

```
document.body.appendChild(adDiv); 
```

——谢谢斯坦。

但现在我面临另一个问题。在某些网站（如[http://www.glassdoor.com/index.htm](http://www.glassdoor.com/index.htm)）页面中没有出现 div。实际发生的是，div 正在连接到身体，但同时它也被移除。只能在 html 检查器（在这种情况下为 chrome 的检查器）的帮助下才能看到。

div(adDiv) 在标记中附加到正文并消失。**仿佛无法将自己束缚在身体**上。结果：页面中没有出现任何内容。

知道为什么会这样吗？它只发生在像上面所说的那样的少数网站上。

* * *

**背景.js**

```
chrome.browserAction.onClicked.addListener(function(tab){
    chrome.tabs.sendMessage(tab.id,{clicked:1});
}); 
```

**内容.js**

```
chrome.extension.onMessage.addListener(function(request,sender,sendResponse){
    if(request.clicked==1){
        /* Create adDiv and apply style to it using JS */
        document.body.appendChild(adDiv);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:37:34.207

对于问题的第一部分，您可能应该尝试`document.body.appendChild`. [结果证明效果很好。]

对于问题的第二部分，我用您的代码做了一个测试扩展（只是添加了一些东西来定义 div），它在[http://www.glassdoor.com/index.htm](http://www.glassdoor.com/index.htm)上完美运行，即单击操作按钮后，我在页面底部看到了 div。请确保您的浏览器中没有任何其他扩展 - 禁用所有其他扩展。这是我定义 div 的方式（这也可能很重要）：

```
var adDiv = document.createElement('div'); 
adDiv.id = "idadv"; 
adDiv.style.width = "200px"; 
adDiv.style.height = "100px"; 
adDiv.style.display = "block"; 
adDiv.style.backgroundColor = "blue"; 
```

正如您所说，问题偶尔出现（我也无法重现它），我想很难拦截它。作为一种解决方法，您可以尝试查看 DOM 并在 div 似乎每次丢失时重新创建它，如下所示：

```
setInterval(createDivIfDoesNotExist, 1000); 
```

此外，您可能应该考虑为您的自我广告设置另一个位置，例如只显示一个通过清单绑定到浏览器操作的弹出窗口，并且不要通过 browserAction 的事件侦听器更改外部页面。

# objective-c - 在 xcode 4.2 vs 4.5 中，具有只读 nsarray 属性和 nsmutable 数组不是具有相同名称和 _ 的只读

> ID：13111088
> 
> 赞同：-1
> 
> 时间：2012-10-28T17:13:07.207
> 
> 标签：objective-c, ios

我正在关注 Ray Wenderlich 网站上的教程，我试图理解这段代码，它具有 nsarray 只读和 nsmutableble 数组，名称相同但可写。还有什么是使用 _(underscore)property 与设置属性和使用 self.x 的原因 这是代码：这是来自网站

对接会服务器.h

```
@interface MatchmakingServer : NSObject <GKSessionDelegate>

@property (nonatomic, assign) int maxClients;
@property (nonatomic, strong, readonly) NSArray *connectedClients;
@property (nonatomic, strong, readonly) GKSession *session;

- (void)startAcceptingConnectionsForSessionID:(NSString *)sessionID;

@end 
```

婚介服务器.m

```
#import "MatchmakingServer.h"

@implementation MatchmakingServer
{
    NSMutableArray *_connectedClients;
}

@synthesize maxClients = _maxClients;
@synthesize session = _session;

- (void)startAcceptingConnectionsForSessionID:(NSString *)sessionID
{
    _connectedClients = [NSMutableArray arrayWithCapacity:self.maxClients];

    _session = [[GKSession alloc] initWithSessionID:sessionID displayName:nil sessionMode:GKSessionModeServer];
    _session.delegate = self;
    _session.available = YES;
} 
```

我正在做这样的事情

婚介服务器.h

```
@interface zvMatchMakingServer : NSObject <GKSessionDelegate>

@property (nonatomic, assign) int maxClients;
@property (nonatomic, strong, readonly) NSArray *connectedClients;
@property (nonatomic, strong, readonly) GKSession *session;

- (void)startAcceptingConnectionsForSessionID:(NSString *)sessionID;

@end 
```

婚介服务器.m

```
@interface zvMatchMakingServer()

@property (nonatomic,strong) NSMutableArray *connectedClients;
@property (nonatomic, strong) GKSession *session;

@end

@implementation zvMatchMakingServer

-(NSArray *)connectedClients
{
    return self.connectedClients;
}

-(void)startAcceptingConnectionsForSessionID:(NSString *)sessionID
{
    self.connectedClients = [[NSMutableArray alloc]initWithCapacity:self.maxClients];
    self.session = [[GKSession alloc]initWithSessionID:sessionID displayName:nil sessionMode:GKSessionModeServer];

} 
```

我在做什么基本上是一样的，否则它不会工作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:39:45.500

我将尝试解释 Ray 的代码中发生了什么：

他声明了一个属性：

```
@property (nonatomic, strong, readonly) NSArray *connectedClients; 
```

（我认为这是 iOS 6 之前的版本，因为在 iOS 6 中，Apple 改变了属性生成 iVar 的方式。）

此属性使编译器自动生成 iVar `NSArray *connectedClients`。代码中未使用此 iVar。`_connectedClients`相反，他声明了一个名为type的新（私有）iVar `NSMutableArray`。请注意，他不会合成该属性的访问器。他自己编写访问器，而不是返回由属性 (connectedClients) 生成的 iVar，而是返回他自己的 iVar (_connectedClients)：

```
- (NSArray *)connectedClients
{
    return _connectedClients;
} 
```

因为`NSMutableArray`是一个子类，`NSArray`所以这样做没有问题。

您正在做的是试图将财产重新声明`@property (nonatomic,strong) NSMutableArray *connectedClients;`为私有财产，这是不允许的。仔细将您的代码与 Ray 的代码进行比较，然后您会发现不同之处。

至于下划线：

这只是许多人用来命名他们的 iVar 的惯例。它没有语义意义。事实上，Apple 将“自动生成”iVar 的名称更改为也使用下划线。

iOS 6 之前的一个属性

```
@property (...) SomeClass *name; 
```

生成了一个名为`name`. 在 iOS 6 中，相同的属性会生成一个名为`_name`. 同样在 iOS 6 中，您不再需要添加该`@synthesize`行。

使用下划线为 iVar 的名称添加前缀很方便，因为如果您想覆盖自动生成的访问器，自动补全建议这样做：

```
- (void)setName:(SomeClass *)name 
```

如果您的 iVar 也被命名`name`，则参数`name`将在访问器实现中隐藏 iVar，因此您必须更改参数的名称。如果您通过使用`@synthesize name = _name`参数重命名您的 iVar`name`不再隐藏它，您可以使用自动完成生成的访问器代码。

```
- (void)setName:(SomeClass *)name
{
    //maybe release the old value and retain the new one if you're not using ARC and weather it's a retained property or not. 
   _name = name;
} 
```

# perl - 使用 Perl 反转字符串中的数字

> ID：13111089
> 
> 赞同：1
> 
> 时间：2012-10-28T17:13:08.423
> 
> 标签：perl, reverse

我有一串数字。比如说：“234615”。现在我应该翻转第一个最低数字和第二个最低数字之间的数字。

从上面的字符串中，第一个最低数字是“1”，第二个最低数字是“2”。第一个最低位和第二个最低位之间的数字是“346”。现在，这个“346”应该写成“643”。

希望我清楚地说明了问题。

这是我尝试过的代码，

```
my $a = "234615";
my @g = split("", $a);
@g = sort(@g);
my $first  = $g[0];
my $second = $g[1];
print "$first \t $second\n\n";

for(my $i = 0; $i < $#g; $i++) {

    if ($g[$i] == $first) {

    }

    if ($g[$i] == $second) {

    }
} 
```

我上面的代码可以找到第一个最低位和第二个最低位。但我不确定相反的部分。

有人可以帮助我吗？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:41:03.900

另一种方式：

```
my $a = "234615";
my @g=split("",$a);
@g=sort(@g);
my $first=$g[0]; my $second=$g[1];

my @ar = split(/($first|$second)/,$a);

$ar[2] = reverse($ar[2]);

print join("",@ar)."\n\n"; 
```

也返回 264315

在我更新后编辑：

```
use Data::Dumper;

my $a = "234615";
my @g=split("",$a);
@g=sort(@g);
my $first=$g[0]; my $second=$g[1];

my @ar = split(/($first|$second)/,$a);
my @result;
push(@result,
    $ar[0],
    $ar[1].$ar[2].$ar[3],
    $ar[4]);
$result[1] = reverse($result[1]);

print join("",@result)."\n\n"; 
```

返回 164325

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T18:14:30.853

如果我正确理解了您的问题，您可以执行以下操作：

```
perl -lwe '$_ = 234615; 
           @a = /\pN/g; 
           my ($n1,$n2) = (sort @a)[0,1]; 
           s/$n2.*?$n1/reverse $&/e; 
           print;' 
```

产生输出`164325`。这个 oneliner 的完整代码是：

```
use strict;
use warnings;

$_ = shift;                           # first arg is the number
my @digits = /\pN/g;                  # extract digits
my($n1, $n2) = (sort @digits)[0, 1];  # take the two lowest
s/$n2.*?$n1/reverse $&/e;            # reverse digits using /e
print; 
```

如您所见，它取决于`$n1`并`$n2`以指定的顺序出现，例如 2 ... 1。这当然可以颠倒过来，但是是硬编码的。如果您需要它灵活，例如 1 ... 2 OR 2 ... 1，它会变得更加复杂。

你可以这样做：

```
if (/$n2.*?$n1/ {                # if $n2 appears first
    s/$n2.*?$n1/reverse $&/e;
else {                          
    s/$n1.*?$n2/reverse $&/e;
} 
```

使用正则表达式而不是拆分来提取数字的好处是您不会冒险在输入中包含任何非数字。反向过程是通过匹配整个字符串`23461`并反转它来完成的，使用替换（选项）`reverse()`内的评估内的函数。`/e`排序是默认排序，在处理单个数字时会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T17:35:48.157

只要字符串中的数字永远不会出现多次，下面的程序就会满足您的需求。如果任何一个最低值多次出现，那么您需要定义它们中的哪一个分隔必须反转的子字符串。

它首先将排序的数字列表放入`@sorted`，就像您自己的程序一样。然后它获取这些数字中的前两位，使用`map`with`index`将它们转换为字符串中的一对偏移量，对它们进行排序，使第一个是最早的，然后进行替换。

那里是为了`for`避免需要调用`substr`两次。它为所需的子字符串加上别名，`$_`并就地反转它。

```
use strict;
use warnings;

my $str = '234615';

my @sorted = sort split //, $str;
my @indices = sort { $a <=> $b } map { index $str, $_ } @sorted[0,1];

for (substr $str, $indices[0] + 1, $indices[1] - $indices[0] - 1) {
  $_ = reverse $_;
}

print $str; 
```

**输出**

```
264315 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-13T10:43:47.093

```
 print "Enter the String to be reversed : ";
  $name = <STDIN>;
  chomp $name;
  @array = split(undef,$name);
  $len = length($name);
  for($i=$len; $i>=0;  $i--)
     {
        print "@array[$i]";
      } 
```

# c - GCC的递归和`static`关键字

> ID：13111091
> 
> 赞同：2
> 
> 时间：2012-10-28T17:13:20.647
> 
> 标签：c, gcc, recursion, static

我最近阅读了几个声明的递归函数`static`。

在函数声明前添加是否`static`有助于 GCC 优化尾递归函数？这是获得优化的必要条件吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T17:25:24.190

我看不出为什么一个函数`static`应该帮助编译器特别优化递归调用。

立即，听起来您所看到的递归函数更有可能只是编译单元的内部。递归函数*通常*需要比想要向程序的其余部分公开的更丰富的接口——例如，可能有仅由递归调用使用的额外参数，或者一般调用的返回值可能需要调整以适应想要呈现给其余代码的抽象。因此，通常编写一个包装函数来设置额外参数的默认值，并且通常将递归函数的接口调整为在外部有意义的好东西。

现在既然递归函数只被它自己和包装函数调用，那么声明它是很自然的`static`——不是因为递归本身，而是为了防止它污染全局命名空间。编译器也有可能对静态函数使用更有效的调用约定（适用于该特定函数体），因为它知道所有调用位置，并且不必遵循允许单独编译的代码调用它的 ABI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T17:24:50.597

不，`static`与任何递归优化无关。当一个函数被声明`static`时，它会获得内部链接，因此除了同一个翻译单元中的其他函数之外，它不能被调用/使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T17:33:12.697

静态（即内部链接）对函数的一种影响是它告诉编译器*直接调用*给定函数的所有可能用例都本地化在当前翻译单元中。这可能确实对某些优化有影响。例如，如果编译器决定在翻译单元中内联对给定函数的所有调用（并且从未获取过该函数的地址），它会立即知道该函数不需要独立的主体。或者，再举一个例子，如果函数总是`1`作为参数调用，那么从技术上讲，这个参数可以完全消除。等等。

使用外部链接函数也可以进行此类优化，但需要有关整个程序的全局知识（这就是它们通常被称为*全局优化*的原因）。借助内部链接功能，所有这些可能性都在一个翻译单元内开放。

但是，对于尾递归消除等优化，这无关紧要。

# blackberry - 在 BlackBerry 中播放 m4v 和 m4a

> ID：13111095
> 
> 赞同：0
> 
> 时间：2012-10-28T17:13:52.213
> 
> 标签：blackberry, java-me

我使用以下代码在 BlackBerry 上播放 .m4a 和 .m4a 歌曲。但是当尝试播放 .m4v 歌曲时，它会给出一条错误消息，例如“格式不支持”。

```
public VideoPlaybackDemoScreen() {

    Class cl = null;

    try {
        cl = Class.forName("mypackage.VideoPlaybackDemoScreen");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
    if (cl != null) {
        try {
            InputStream is = getClass().getResourceAsStream(
                    "/mzm.yzzwpvvt..640x348.h264lc.u.p.m4v");
            final Player player = javax.microedition.media.Manager
                    .createPlayer(is, "video/m4v");
            player.realize();

            VideoControl videoControl = (VideoControl) player
                    .getControl("VideoControl");
            Field videoField = (Field) videoControl.initDisplayMode(
                    VideoControl.USE_GUI_PRIMITIVE,
                    "net.rim.device.api.ui.Field");
            videoControl.setDisplaySize(480, 256);
            videoControl.setVisible(true);

            add(new LabelField("Top", 0));
            add(videoField);
            add(new LabelField("Bottom", 0));
            final int i = 30;

            final VolumeControl volume = (VolumeControl) player
                    .getControl("VolumeControl");
            ButtonField volumeIncrease = new ButtonField("Volume Increase") {
                protected boolean navigationClick(int status, int time) {
                    VolumeControl volC = (VolumeControl) player
                            .getControl("VolumeControl");
                    int volume = volC.getLevel() + 10;
                    volC.setLevel(volume);
                    Dialog.alert(String.valueOf(volume));
                    return true;
                }
            };
            ButtonField volumeDecrease = new ButtonField("Volume Decrese") {
                protected boolean navigationClick(int status, int time) {
                    VolumeControl volC = (VolumeControl) player
                            .getControl("VolumeControl");
                    int volume = volC.getLevel() - 10;
                    volC.setLevel(volume);
                    return true;
                }
            };
            add(volumeIncrease);
            add(volumeDecrease);
            player.start();

        } catch (IOException e) {
            Dialog.alert(e.getMessage());
        } catch (MediaException e) {
            Dialog.alert(e.getMessage());
        }

    }
} 
```

# mysql - 选择多行并按 ID 分组

> ID：13111098
> 
> 赞同：0
> 
> 时间：2012-10-28T17:14:13.470
> 
> 标签：mysql

我从事一个项目已经有一段时间了。现在我已经到了一个地步，我想不出一个 MySQL 查询会返回我按其父级分组的所有行。这是我拥有的表结构：

```
+----+-----------+------+
| id | parent_id | name |
+----+-----------+------+ 
```

parent_id 值有 8 个（1-8），每个 parent_id 有 20 个 id 值（共 160 个）。我检索所有类别并按 parent_id 分组的方式是这样的：

```
$categories = array();

for ($i = 1; $i <= 8; $i++) {
    $query = $this->db->query("
        SELECT id, name
        FROM categories
        WHERE parent_id = {$i}
        ORDER BY name
    ");
    $categories[$i] = $query->result();
}

return $categories; 
```

有没有办法组合一个 MySQL 查询来为我做这件事？

这不起作用：

```
SELECT id, name
FROM categories
GROUP BY parent_id
ORDER BY name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:03:01.400

我认为您需要的是根据 parent_id 对结果集进行排序。如果您必须列出每个父母的每个 ID，则不需要 group by。

```
SELECT id, name
FROM categories
ORDER BY parent_id 
```

# android - Android：NotSerializableException BasicNameValuePair

> ID：13111100
> 
> 赞同：0
> 
> 时间：2012-10-28T17:14:32.053
> 
> 标签：android, serialization

我有以下问题：下面的保存过程引发异常“java.io.NotSerializableException：org.apache.http.message.BasicNameValuePair”：

```
fos = getBaseContext().openFileOutput("merkzettel", Context.MODE_PRIVATE);
ObjectOutputStream os = new ObjectOutputStream(fos);
os.writeObject(merkList);
os.close(); 
```

"merkList" 是一个`ArrayList<Product>`，其中 product 是一个类，如：

```
public class MerkFinProduct implements Serializable {
   LinkedList<BasicNameValuePair> test;
   String Id;   
   String name;
   Date date;
   String urlPic;
   String response;
       //...
} 
```

根据指向 BasicNameValuePair 的[链接，](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/message/BasicNameValuePair.html) BasicNameValuePair 实现了 Serializable-Interface。所以我真的不知道，这里有什么问题......

也许你们中的某个人可以帮助我？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:26:15.133

我相信您使用的是 Android 版本的[BasicNameValuePair](http://developer.android.com/reference/org/apache/http/message/BasicNameValuePair.html)并且它不是可序列化的

# overloading - 选择最具体的方法 - 棘手的方法重载？

> ID：13111102
> 
> 赞同：0
> 
> 时间：2012-10-28T17:14:52.653
> 
> 标签：overloading

我已经浏览了这个[链接](https://stackoverflow.com/questions/9361639/java-method-overloading-and-choosing-the-most-specific-type)；但我对以下示例代码感到困惑：-

```
public class NullTest {

   public static void method(Object obj){
     System.out.println("method with param type - Object");
   }

   public static void method(String str){
     System.out.println("method with param type - String");
   }

   public static void method(StringBuffer strBuf){
     System.out.println("method with param type - StringBuffer");
   }

   public static void main(String [] args){
     method(null); //... compile-time error!
   }
} 
```

我得到的错误是：-

```
ankit@stream:/home/Data/JAVA/practice$ javac trickyMethodOverloading.java 
trickyMethodOverloading.java:16: error: reference to method is ambiguous, both method method(String) in trickyMethodOverloading and method method(StringBuffer) in trickyMethodOverloading match
     method(null); //... compile-time error! 
```

任何建议，请

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:31:49.687

您的所有方法都具有相同的名称。Java 现在可以区分它们的唯一方法是通过它们接收的参数，因此它知道使用哪个参数。但是， using`null`不会缩小任何范围，因此您的编译器无法完成编译，因为它不知道要使用哪一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:19:14.973

在这种方法重载的情况下，在运行时选择最具体的方法，或者换句话说，属于继承树层次结构中最深的类的方法，只要使用的类属于继承树中的同一分支，所以可以毫不含糊地找到一类。（根据我自己的理解，而不是来自 java 文档 :)）

但是，在您的示例中，您有 2 个分别带有 String 和 StringBuffer 的重载方法，它们不属于继承树中的同一分支。这就是编译器抱怨的原因。![继承中的不同分支](../Images/6305f2f52a120f15ef830c9e61ca1193.png) ![继承树中的相同分支](../Images/e4b0b8e0793bd71bb9d5cd812eb5f053.png)

如果您有一个层次结构，例如 3 个类 A、B、C，其中 B 扩展 A 和 C 扩展 B，则这种示例有效。在这种情况下，如果您有

```
public class NullTest{

   public static void method(A a){
     System.out.println("method with param type - A");
   }

   public static void method(B b){
     System.out.println("method with param type - B");
   }

   public static void method(C c){
     System.out.println("method with param type - C");
   }

   public static void main(String [] args){
     method(null);// compiles successfully and will print- "method with param type - C"
   }
} 
```

这是因为 A、B 和 C 在继承树中属于同一层次结构。因此编译器只是尝试深入到最深层次，它可以找到一个没有歧义的类（在这种情况下为 C）。此外，如果您从代码中删除 String 或 StringBuffer，它会起作用。

# python - for 循环中的名称格式

> ID：13111103
> 
> 赞同：-1
> 
> 时间：2012-10-28T17:14:56.387
> 
> 标签：python, pypy

我正在尝试改进我现有的代码，**有没有办法在不使用字典或列表或元组的情况下影响多个不同的变量？** 我正在尝试写类似的东西：

```
number1 = 1
number2 = 2
number3 = 3

for i in (1,2,3):
    number{i} += 1 
```

然后有 number1 = 2 number2 = 3 和 number3 = 4

我正在考虑格式化字符串，但它不起作用，谢谢阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:19:24.637

这里更好的方法是使用字典：

```
In [26]: numbers={'number1': 1,
   ....:          'number2' : 2,
   ....:           'number3' : 3}

In [27]: for i in (1,2,3):
   ....:         numbers['number'+str(i)]+=1
   ....: 

In [28]: numbers['number1']
Out[28]: 2

In [29]: numbers['number2']
Out[29]: 3

In [30]: numbers['number3']
Out[30]: 4 
```

否则你也可以`globals()`：

```
In [31]: number1 = 1

In [32]: number2 = 2

In [33]: number3 = 3

In [34]: for i in (1,2,3):
   ....:     globals()['number'+str(i)]+=1
   ....:     
   ....:     

In [35]: number1
Out[35]: 2

In [36]: number2
Out[36]: 3

In [37]: number3
Out[37]: 4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T17:49:39.110

您可以使用返回的字典通过其名称的字符串表示形式访问变量，[`globals()`](http://docs.python.org/2/library/functions.html#globals)或者[`locals()`](http://docs.python.org/2/library/functions.html#locals)根据需要使用返回的字典 - 尽管您可能会发现，如果修改`locals()`字典，事情的行为不会像您预期的那样，如文档中所述并由代码片段演示在这个答案的底部。您还可以通过字符串标签分别使用 来修改实例、类或模块变量`setattr(self, 'some_variable_name', value)`，`setattr(ClassName, 'some_variable_name', value)`或者`setattr(ModuleName, 'some_variable_name', value)`其中 self、ClassName 和 ModuleName 分别是对类实例、类和模块的引用。`exec`最后，您总是可以通过执行包含在字符串中的代码来实现您想要的。例如：

```
for i in range(5):
    temp = i
    exec('var%d = temp' % i)
print var0, var1, var2, var3, var4 
```

将打印`0 1 2 3 4`。

*但是你到底为什么想做这些事情呢？*如果您需要将任意字符串映射到值，则可以创建并使用字典。如果像在您的示例中那样，您不是在处理任意字符串，而是在处理仅在名称末尾有一个整数索引不同的变量序列，那么请*使用列表*，因为*这就是列表的用途。*

以我在第一段中描述的任何方式做事都是令人困惑和毫无意义的，我从未见过在实际代码中这样做过。

我想再次强调这里的重要一点，正如 Ashwini Chaudhary 已经指出的那样，*没有理由*以这种方式通过字符串引用变量，因为如果您需要将字符串映射到值，您可以简单地使用dictionary - 如果你使用`globals()`or ，这正是你间接做的事情`locals()`，因为这些函数每个都返回字典。

* * *

无论如何，作为附言，我提到如果您修改 locals() 字典，事情就不太正常了，这并不意味着按照文档中的说明进行修改，这说明

*   `Note The contents of this dictionary should not be modified; changes may not affect the values of local and free variables used by the interpreter.`

好吧，这里有一个关于这一点的说明，它可能会阻止任何人尝试这种方法：

```
var1 = 'asdf'
def test1():
    var1 = 'ghjkl'
    print globals()['var2']
    print locals()['var2']

test1()

def test2():
    globals()['var2'] = 'qwerty'
    locals()['var2'] = 'uiop'
    print var2

test2() 
```

如果你运行上面的代码会打印什么？令我惊讶的是，它是：

```
asdf
ghjkl
qwerty 
```

第一个测试的行为与我预期的一样——全局查找找到函数外部分配的值，本地查找查找本地分配的值。第二个测试是令人惊讶的 - 即使我们已经在全局变量中分配了一个值，在本地变量中分配了一个值，但通过名称在本地引用变量会找到我们放在*全局*字典中的值，而不是本地字典中的值。

# ruby - OAuth 消费者停止工作，我从哪里开始调试？

> ID：13111107
> 
> 赞同：0
> 
> 时间：2012-10-28T17:15:47.103
> 
> 标签：ruby, twitter, oauth, sinatra

我有一个使用 Twitter OAuth 进行身份验证的小型 Sinatra 应用程序。从 10 月 8 日到今天的某个时间，它停止了工作。

症状：我被重定向到 Twitter，我登录，我被重定向回我的应用程序，但**我的应用程序无法识别我已登录。**

我可以排除我自己的代码（一个月内没有碰过它）和平台（Heroku 是托管的，所有请求看起来都很好）。

代码的相关部分是这样的（基于Alex Lang 的[这段代码](https://github.com/langalex/imonaplane/blob/749cf00ad7b8e77d3b8f3d1c8569ea508bc498ae/app.rb#L103)）：

```
get '/session_auth' do
  if params[:oauth_verifier]
    access_token = twitter_client.authorize(
      session[:request_token], session[:request_token_secret], oauth_verifier: params[:oauth_verifier])
    if twitter_client.authorized?
      user = db.load(User.to_id(twitter_client.info['screen_name'])) || User.new(login: twitter_client.info['screen_name'], twitter_access_token: access_token.token,
        twitter_secret_token: access_token.secret)
      db.save! user
      session[:user_id] = user.id
    end
  end
  redirect '/'
end 
```

你如何或从哪里开始调试这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:15:47.103

简短的回答：**我从我的应用程序到 Twitter 的工具链。**

Twitter 将 OAuth 验证器参数发送回用于`authorize`调用的我的回调操作。如果 twitter 客户端在此之后获得授权，则应用程序会`user_id`在会话中设置 。

和调用来自`authorize`twitter_oauth [gem](https://rubygems.org/gems/twitter_oauth)。更新版本于 10 月 12 日发布，修复了该方法的 API 调用（参见[Github 上的提交](https://github.com/moomerman/twitter_oauth/commit/1928917622443eacbafe461b05faed3ec0a24861)）。大奖！`authorized?``authorized?`

所以我所要做的就是：

```
bundle update twitter_oauth 
```

一切都重新开始了。我唯一还没有弄清楚的是为什么 twitter_oauth 以前可以工作。我怀疑 Twitter 已经弃用了他们的部分 API URL，但我想确定一下。

# jquery - 为什么 cboxElement 的高度大于调用它的图像/按钮？

> ID：13111114
> 
> 赞同：0
> 
> 时间：2012-10-28T17:15:59.203
> 
> 标签：jquery, colorbox

我有一个由 Susy 构建的 9 个图像的 3x3 矩阵。我只是想知道为什么垂直排水沟的行为不像我建议的那样。然后我意识到包含 cboxElement [https://dl.dropbox.com/u/8578/cbox.png](https://dl.dropbox.com/u/8578/cbox.png)

大于包含的图像： [https ://dl.dropbox.com/u/8578/img.png](https://dl.dropbox.com/u/8578/img.png)

但老实说，我不知道为什么 cboxElement 被拉伸得比图像扩展得大？！cbox 的配置如下所示：

```
 $(".ajax1, .ajax2, .ajax3, .ajax4, .ajax5, .ajax6, .ajax7, .ajax8, .ajax9").colorbox({
        rel:"nofollow",
        transition:"none", 
        opacity:"0",  
        fixed:"true", 
        width:"65%", 
        height:"97%",
        onComplete: function() {$('.flexslider').flexslider({
            animation: "slide",
            animationLoop: true,
            controlNav: false,
            directionNav: true,
            slideshow: false
        });}        
     }); 
```

无序列表中一个 li 的 html 看起来是这样的：

```
 <li><a class="ajax1" href="projekt1.html"><img title="Projekte1" src="img/projekteblur.jpg" alt="Projekte1" /><img title="Projekte1" src="img/projekte.jpg" alt="Projekte1" /><span class="spiceup">Zum Projekt</span></a></li> 
```

应用的 CSS 看起来是这样的：

```
 /* The following CSS is consistent between example themes and should not be altered. */
#colorbox, #cboxOverlay, #cboxWrapper{
    position:absolute;
    top:0;
    left:0;
    z-index:300;
    overflow:hidden;
    }
 #cboxOverlay{
    position:fixed;
    width:100%;
    height:100%;}
  #cboxMiddleLeft, #cboxBottomLeft{
    clear:left;}
  #cboxContent{
    position:relative;}
  #cboxLoadedContent{
    overflow:auto;}
  #cboxLoadingOverlay, #cboxLoadingGraphic{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;}
  #cboxPrevious, #cboxNext, #cboxClose, #cboxSlideshow{
    cursor:pointer;}
  #colorbox, #cboxContent, #cboxLoadedContent{
    box-sizing:content-box;}

/*  User Style:   */

#colorbox{
    @include border-radius(5px, 5px);
    @include box-shadow(black 2px 2px 10px);
    background:rgba(55, 60, 74, 0.95);
    }
 #cboxContent{
    margin:30px;
    overflow:visible;
    }
  #cboxError{
        padding:50px;
        border:1px solid #ccc;}
  #cboxLoadedContent{
        padding:0 5px 0 10px;
        }
    #cboxLoadingGraphic{
        background:url('../img/loading.gif') no-repeat center center;}
    #cboxLoadingOverlay{
        background:rgba(55, 60, 74, 0.95);}

   #cboxClose{
    text-indent:-9999px;
    width:44px;
    height:24px;
    position:absolute; 
    top:-26px;
    right:-20px; 
    background:url('../img/close.png') no-repeat 0 0;} 
```

有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:38:20.357

您可以从此等式中删除颜色框，因为它在这里没有影响。这只是 CSS 琐事，默认情况下会发生在所有图像元素上，因为它们是内联元素。如果您将图像元素更改为`display:block`或给它一个浮点数，该空间将消失。

至于有空格的原因，这篇文章解释的很好： [删除图片下方的空白](https://stackoverflow.com/questions/7774814/remove-white-space-below-image)

# iphone - 如何获取 UIImagePickerControllerReferenceURL 相机

> ID：13111119
> 
> 赞同：3
> 
> 时间：2012-10-28T17:16:16.177
> 
> 标签：iphone, objective-c, camera, uiimagepickercontroller, save

我正在从 iPhone 相机保存图像并管理委托方法：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

在这里我需要知道：

```
[info objectForKey:UIImagePickerControllerReferenceURL] 
```

但如果我只是拍了一张照片，它总是为零，如果与零不同，从相机胶卷中加载一张照片。这是为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T20:39:31.590

如果您捕获视频，媒体将保存在设备的存储中，您可以访问其 URL。如果您捕获图像，媒体将保存到设备的内存中，您可以访问其原始数据。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    NSLog(@"%@", info);

    // An image
    if([info[UIImagePickerControllerMediaType] isEqualToString:@"public.image"])
        UIImage *image=info[UIImagePickerControllerOriginalImage];

    // A video
    else
        NSURL *url=info[UIImagePickerControllerMediaURL]];
} 
```

编辑：您问为什么图像的 URL 为零。如您所见，捕获的图像永远不会保存在设备的存储中。将图片保存在内存中的一个优点是您可以在将其存储在设备上或通过网络发送之前对其进行处理。

# android - Try-Catch 语句问题

> ID：13111120
> 
> 赞同：-5
> 
> 时间：2012-10-28T17:16:26.630
> 
> 标签：android, try-catch

所以我在下面的屏幕截图中有这部分代码导致类型 IOExceptions。

[http://southwestdesign.org.uk/Code.jpg](http://southwestdesign.org.uk/Code.jpg)

我被告知我需要将它包装在一个 try-catch 块中，用 try catch 包装每个单独的块可以消除错误，但在 Android 上强制关闭。有人可以指出我正确的方向吗？

```
@Override
    public void onStart() {
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet("http://1.php");
        HttpResponse response = client.execute(request);
        BufferedReader rd = new BufferedReader
        (new InputStreamReader(response.getEntity().getContent()));
        TextView textView = (TextView) findViewById(R.id.TextView1);
        String line = "";
        while ((line = rd.readLine()) != null) {
            textView.append(line);
        }
    } 
```

多谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T17:21:24.607

您似乎在 UI 线程上执行网络 IO，这是一个坏主意。因此，从 Android 2.3 开始，系统“捕获”了这一点并终止了该进程。

你应该把

```
 HttpResponse response = client.execute(request); 
```

进入后台线程，例如使用`AsyncTask`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:19:55.467

```
try {

   //do something here
   //call method

}catch (IOException ioe){

// do something else
// log ioe

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T17:21:16.303

它应该是这样的：

```
@Override
    public void onStart() {

   try {
    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet("http://1.php");
    HttpResponse response = client.execute(request);
    BufferedReader rd = new BufferedReader
    (new InputStreamReader(response.getEntity().getContent()));
    TextView textView = (TextView) findViewById(R.id.TextView1);
    String line = "";
    while ((line = rd.readLine()) != null) {
        textView.append(line);
    }

    }catch (IOException ex){
    }
} 
```

更优选用于`AsyncTask`在单独的线程上完成此操作。

# java - 使用 BigInteger 计算 C(n,r) 的 StackOverflowError

> ID：13111122
> 
> 赞同：3
> 
> 时间：2012-10-28T17:17:14.747
> 
> 标签：java, stack-overflow

我实现了递归算法来计算 N 选择 r。C(n,r) = C(n-1,r-1) + C(n-1,r)。我想计算 C(100000, 50000)，它抛出了 stackoverflow。感谢任何帮助。

错误：

> java 解决方案 1 1 1 10000 5000 线程“main”中的异常 java.lang.StackOverflowError at java.lang.System.arraycopy(Native Method) at java.util.Arrays.copyOfRange(Arrays.java:3210) at java.lang.String .(String.java:215) 在 java.lang.StringBuilder.toString(StringBuilder.java:430) 在 Solution.findNcr(Solution.java:31) 在 Solution.findNcr(Solution.java:35)

代码：

```
private static HashMap<String,BigInteger> hm =
    new HashMap<String,BigInteger>(10000000,0.9f); 
private static BigInteger findNcr(int n, int r) {
    BigInteger topLVal = BigInteger.valueOf(0);
    BigInteger topRVal = BigInteger.valueOf(0);
    int parentN = 0, parentR = 0;

    if( r >= n-r)  //ncr = nc(n-r)
       r = n-r;

    if (r == 0 || r == n)
        return BigInteger.valueOf(1L);
    else if (r == 1 || r == n-1)
        return BigInteger.valueOf(n);
    else if (hm.containsKey(""+n+""+r)) { //line 31
        return hm.get(""+n+""+r);
    } else{
        parentN = n-1; parentR = r-1;
        topLVal = findNcr(parentN, parentR);
        topRVal = findNcr(parentN, r);
        hm.put(""+parentN+""+parentR,topLVal);
        hm.put(""+parentN+""+r, topRVal);
        return topLVal.add(topRVal);      //line 35
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:23:14.790

好吧，你所做的就是你得到的。您进行的每个递归调用都会将调用者状态保存在堆栈中，并且由于您正在计算 C(100000, 50000) 这将进行数百万次递归调用，因此最终会耗尽所有堆栈空间。你可能想研究一个更好的算法，就像我在这里提到的[写一个更快的组合算法](https://stackoverflow.com/questions/8650327/write-a-faster-combinatorics-algorithm/8651998#8651998)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:33:56.647

您可以尝试增加堆栈大小。

对您的 JVM 使用 -Xss。

我想 1 GB 应该可以为您解决问题。您可以计算它以获得更准确的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T19:36:21.533

这个简单的实现对于 100000 运行长达 10 秒 | 50000。

（对于实际使用，当 r < n - r 时，您应该添加一些检查和不同的方法。（只是循环会有不同的边界......不是根本性的变化）

```
private static BigInteger ncr(int n, int r) {
    BigInteger top = BigInteger.ONE;
    BigInteger bot = BigInteger.ONE;

    for(int i = n; i > r; --i){
        top = top.multiply(BigInteger.valueOf(i));
    }

    for(int i = r; i > 1; --i){
        bot = bot.multiply(BigInteger.valueOf(i));
    }

    return top.divide(bot);
} 
```

# xna - 在 Windows 8 下编译时出现 XNA SpriteFont 问题

> ID：13111124
> 
> 赞同：1
> 
> 时间：2012-10-28T17:18:02.030
> 
> 标签：xna, windows-8, visual-c#-express-2010, spritefont

我最近升级到了 Windows 8，并安装了 Visual C# 2010 Express 和 XNA Game Studio 4（就像我在 Windows 7 上安装的一样）。

在编译我的项目时，我遇到了 spritefonts 的问题。基本上它们变得更加模糊，而且根本不是最优的。这是它的外观截图（左边是在Win7上编译的游戏，右边是在Win8上编译的）。

[http://imgur.com/Buym3](http://imgur.com/Buym3)

如果我手动将 Content 文件夹中的 Win8 编译 (.xnb) spritefonts 替换为 Win7 的 spritefonts，问题就解决了。但是，我不想在每次运行游戏时都花费大量时间手动替换内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T21:41:20.480

当我升级到 Windows 8 时遇到了同样的问题，我发现一个简单的解决方法是将我的 spritefonts 转换为字体纹理。有关 Shawn Hargreaves 博客的更多信息：http: [//blogs.msdn.com/b/shawnhar/archive/2007/04/26/bitmap-fonts-in-xna.aspx](http://blogs.msdn.com/b/shawnhar/archive/2007/04/26/bitmap-fonts-in-xna.aspx)

# ruby-on-rails - heroku db：工具带推送错误

> ID：13111127
> 
> 赞同：0
> 
> 时间：2012-10-28T17:18:17.557
> 
> 标签：ruby-on-rails, postgresql, heroku, sqlite, taps

有没有办法用 ruby​​ 1.9.3 下载 Heroku 工具带？现在它会自动从主页安装 1.9.2 - [https://toolbelt.heroku.com/](https://toolbelt.heroku.com/)。

不能做 db:push 到 Heroku，因为这个。

* * *

**更新**

我在这里找到了它 - [http://assets.heroku.com/heroku-toolbelt/heroku-toolbelt-2.25.1.exe](http://assets.heroku.com/heroku-toolbelt/heroku-toolbelt-2.25.1.exe)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:24:27.390

见[https://github.com/heroku/toolbelt/issues/26](https://github.com/heroku/toolbelt/issues/26)

如果将 ruby​​1.9.3 路径放在可以验证的 heroku 路径之前，则可以使用 ruby​​ 1.9.3`heroku version`

基本上，由于与其他版本的兼容性问题，heroku 希望与 ruby​​ 1.9.2 一起使用，因此它安装了自己的版本。

还要检查您使用的是工具带而不是 gem 的 heroku 版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:12:21.470

我的问题出现了，因为当前的工具带会自动在 C:/Pogram 文件中安装 ruby​​ 1.9.2，尽管在我的本地机器上我通过[http://railsinstaller.org/在 C:/ 中有 ruby​​ 1.9.3](http://railsinstaller.org/)

**这使我的道路**有点混乱。

**我不得不从路径**中取出 toolbet 的红宝石，这解决了我开始这个问题的问题。

但是`heroku db:push`使用 Ruby 1.9.3。让我进入`time zone displacement'error`. 这是另一个问题，在这里更详细地讨论：

[将数据推送到 Heroku 时出错：时区位移超出范围](https://stackoverflow.com/questions/8151571/error-when-pushing-data-to-heroku-time-zone-displacement-out-of-range)

解决办法是在本地完全切换到1.9.2。但是由于我使用的是 Windows 7，这也造成了一些麻烦，因为我发现的大多数解决方案都是针对 OSX

But finally I managed to get it to work by switching to R 1.9.2 locally using [https://github.com/vertiginous/pik](https://github.com/vertiginous/pik)

# c++ - Qt QSqlQuery准备和bindValue不起作用

> ID：13111130
> 
> 赞同：4
> 
> 时间：2012-10-28T17:18:37.007
> 
> 标签：c++, qt, prepare

我对 prepare 和 bindValue 有疑问 :(

```
db.open();
QSqlQuery q;
    q.prepare("SELECT id_malade,nom,prenom FROM Malade WHERE nom LIKE %:p% OR prenom = %:f% ;");
    q.bindValue(":p",ui->lineEdit->text());
    q.bindValue(":f",ui->lineEdit->text());
    qDebug() << q.boundValue(0) << " " << q.boundValue(1);
    qDebug() << q.executedQuery().toStdString().c_str(); db.close(); 
```

输出是：

```
QVariant(QString, "zit")   QVariant(QString, "zit") 
SELECT id_malade,nom,prenom FROM Malade WHERE nom LIKE %?% OR prenom = %?% ; 
```

我试图改变 :p 和 :f 与 ? 并在 bindValue 中使用 int 位置，但没有运气。查询成功执行，因此我无法获取确切的错误。我在我的程序中经常使用 prepare 和 bindValue 并且它工作正常问题只在这个类上：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:28:04.537

代替

`[...] nom LIKE %:p% OR prenom = %:f%`

您的准备声明应为

`[...] nom LIKE '%'||:p||'%' OR prenom = '%'||:f||'%'`

# css - 为什么和其他元素之间有一个讨厌的小空间？

> ID：13111136
> 
> 赞同：8
> 
> 时间：2012-10-28T17:19:07.303
> 
> 标签：css, html, image, margin, removing-whitespace

如果 a`<div>`或任何其他元素跟在`<img>`a 之后，那么它们之间会出现一个 ~3px 的空格——即使`margins`是零。

```
<img src="example-fractal-art.png">
<div>What is with that gap?<div> 
```

[这是一些 CSS](http://jsfiddle.net/Baumr/5z6u9/)的样子。

![在此处输入图像描述](../Images/c47c6991615f5fa13e6db9e5f4e11a21.png)

现在很容易投入`display: block`CSS 并[解决问题](http://jsfiddle.net/Baumr/5z6u9/1/)。但为什么会在那里？没有计算的边距、填充、边框或类似的东西。

**浏览器在做什么？**甚至有人称它为[“魔法”](https://stackoverflow.com/a/3947188/1779823)。

*PS 或者，在某些情况下，可以通过[删除](https://stackoverflow.com/a/4617429/1779823)HTML 代码中的空格来解决此问题。（但这在这种情况下[不起作用](http://jsfiddle.net/Baumr/5z6u9/5/)，为什么？）*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-28T17:23:45.547

是 HTML 中的`img`“替换元素”，因此，它是否被视为字符。现在在没有任何样式的情况下，图像与行上其他字符的基线对齐。

所以换句话说，图像下方有下降的空间。

![在此处输入图像描述](../Images/ff89e42394921a27dbd478c3c3710730.png)

正如您所注意到的，将其更改为块会删除此功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T17:22:54.107

默认情况下，图像与文本的基线对齐。因此，如果您将文本放在图像旁边，图像将与 的底部对齐`x`，但在该基线和文本行底部之间有一点空间（显然是 3px）。

你有它：

[http://jsfiddle.net/xDCEX/](http://jsfiddle.net/xDCEX/)

`vertical-align: bottom`如果您不想使图像成为块，则可以使用它来解决它。这样，图像仍然是文本的一部分，但不是基线，而是与文本边界框的底部对齐。

[http://jsfiddle.net/xDCEX/1/](http://jsfiddle.net/xDCEX/1/)

当然，将其更改为 a`display: block`也可以，但它有其他副作用。如果现在一切正常，那么更改`vertical-align`是最简单的方法。

# sharepoint-2010 - Sharepoint 2010 每个域用户登录显示系统帐户而不是域\用户

> ID：13111138
> 
> 赞同：2
> 
> 时间：2012-10-28T17:19:10.207
> 
> 标签：sharepoint-2010

在我的 SharePoint Foundation 从“无法连接到配置数据库”中恢复之后。我发现我的 Sharepoint 网站集有一些例外。

当我尝试使用域用户帐户登录时，我发现右上角显示状态为“系统帐户”而不是域\用户名。该帐户还具有系统帐户权限。然后我检查了域中的每台计算机，每个用户都有这个问题。

但是当我从主页进入图书馆设置时，我发现该帐户具有正确的名称，但是当我转到其他页面时，该页面再次显示系统帐户。

我真的对这个问题没有任何想法。谁能给我一些建议来解决这个问题？

# fortran - Fortran 中的内联读取是什么意思？

> ID：13111144
> 
> 赞同：1
> 
> 时间：2012-10-28T17:20:01.917
> 
> 标签：fortran

我在一段代码中发现了这个奇怪的语句：

```
read(10, *) ((matrix(i, j), i=1, n), j=m, 1, -1) 
```

我想知道这种内联递归阅读是如何工作的。是什么意思 `((matrix(i, j), i=1, n), j=m, 1, -1)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T17:27:56.617

这不是*内联递归读取*（不确定您从哪里得到这个术语），这是嵌套*隐含 do 循环*的示例，请参见[此处](http://www.cs.mtu.edu/~shene/COURSES/cs201/NOTES/chap08/io.html)，例如，隐含 do 循环的语法以及其中的许多示例在行动。基本上，隐含的 do 循环是一种在单行上编写 do 循环的方法。使用嵌套的隐含 do 循环，您可以在一行上编写多个 do 循环。

在您的情况下，您所拥有的等同于（如果OP应该注意任何差异，请在此处纠正我）之类的东西（请注意，我已经从外部循环向内解开了隐含的do循环）：

```
integer, parameter :: n=<some-value>
integer, parameter :: m=<some-value>
<some-type>, dimension(n,m) :: matrix

integer :: i, j

do j = m,1,-1
  do i = 1,n
      read(10,*) matrix(i,j)
  end do
end do 
```

# c# - CryptoServiceProvider 哈希输出与在线哈希生成器不匹配？

> ID：13111145
> 
> 赞同：1
> 
> 时间：2012-10-28T17:20:17.363
> 
> 标签：c#, .net

我是一名学生，我是编程新手。这是我尝试编写的第一个 C# 程序。该程序应该读取带有明文的文本文件，然后输出带有 MD5 和 SHA-1 哈希的文本文件。据我所知，该程序可以运行，但是我的程序创建的哈希与在线哈希生成器生成的哈希不匹配。据我所知，如果输入单词相同，哈希应该匹配。我的代码有什么明显的错误会导致这种情况吗？

```
using System;
using System.Text;
using System.IO;
using System.Security.Cryptography;

namespace CreateHash
{
class Program
{
    const string INPUTFILE = "C:\\ClearTextPasswords.txt";
    const string OUTPUTFILEMD5 = "C:\\EncryptedMD5Passwords.txt";
    const string OUTPUTFILESHA1 = "C:\\EncryptedSHA1Passwords.txt";

    static void Main(string[] args)
    {
        string input;
        int counter = 0;

        DeleteWriteFile();

        StreamReader readFile = new StreamReader(INPUTFILE);

        while ((input = readFile.ReadLine()) != null)
        {
            if(AppendFile(input))
                counter++;
        }

        readFile.Close();

        Console.WriteLine("\nSuccessfully wrote {0} encrypted password(s) to: \n{1} and\n{2} files.\n\nPress any key to exit...", counter.ToString(), OUTPUTFILEMD5, OUTPUTFILESHA1);
        Console.ReadKey();
    }

    static void DeleteWriteFile()
    {
        //Example of try/catch block
        try
        {
            System.IO.File.Delete(OUTPUTFILEMD5);
        }
        catch (Exception ex)
        {
            Console.WriteLine("There was an error deleting the MD5 Output file: " + ex.Message);
        }

        try
        {
            System.IO.File.Delete(OUTPUTFILESHA1);
        }
        catch (Exception ex)
        {
            Console.WriteLine("There was an error deleting the MD5 Output file: " + ex.Message);
        }
    }

    static bool AppendFile(string str)
    {
        int x = 0;
        int y = 0;
        bool result = false;

        StreamWriter writeFile1;
        StreamWriter writeFile2;

        HashToolkit hashToolkit = new HashToolkit();

        //Example of try/catch/finally block
        try
        {
            writeFile1 = new StreamWriter(OUTPUTFILEMD5, true);
            writeFile1.WriteLine(hashToolkit.GetMd5(str));
            writeFile1.Close();
            x = 1;
        }
        catch (Exception ex)
        {
            Console.WriteLine("There was an error writing to the MD5 Output file: " + ex.Message);
        }
        finally
        {
            writeFile1 = null;
        }

        try
        {
            writeFile2 = new StreamWriter(OUTPUTFILESHA1, true);
            writeFile2.WriteLine(hashToolkit.GetSha1(str));
            writeFile2.Close();
            y = 1;
        }
        catch (Exception ex)
        {
            Console.WriteLine("There was an error writing to the SHA1 Output file: " + ex.Message);
        }
        finally
        {
            writeFile2 = null;
        }

        if (x * y != 0)
            result = true;

        return result;
    }
}

public class HashToolkit
{
    public HashToolkit()
    {
    }

    public string GetMd5(string str)
    {
        MD5CryptoServiceProvider md5 = new MD5CryptoServiceProvider();
        string input = string.Empty;

        byte[] hashedData = md5.ComputeHash(Encoding.Unicode.GetBytes(str));

        foreach (byte b in hashedData)
        {
            input += String.Format("{0,2:X2}", b);
        }
        return input;
    }

    public string GetSha1(string str)
    {
        SHA1 sha = new SHA1CryptoServiceProvider();
        string input = string.Empty;

        byte[] hashedData = sha.ComputeHash(Encoding.Unicode.GetBytes(str));

        foreach (byte b in hashedData)
        {
            input += String.Format("{0,2:X2}", b);
        }
        return input;
    }
}
} 
```

任何帮助将非常感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:41:49.860

那是因为你不能散列字符串，你只能散列字节。因此，您需要先转换为字节。你正在为此使用 UTF16。在线工具可能使用 UTF8 或一些 ASCII 样式的编码。找出它使用并使用它。

# ios - 如何在 iPhone/iPad 上播放系统声音？

> ID：13111148
> 
> 赞同：1
> 
> 时间：2012-10-28T17:20:35.850
> 
> 标签：ios, objective-c, audio, playback, system-sounds

播放（其中一个）系统声音的代码是什么？

不是我自己的声音文件，也不是包含（在我的应用程序中）的声音文件。系统声音（如 Basso、Blow、Bottle、Frog 等 - .aiff 声音）。

[我在链接](https://stackoverflow.com/questions/10949138/sound-picker-list-of-system-sounds)中找到了他们的名字，但现在我想玩他们。

像[片段播放系统声音](http://iosdeveloperzone.com/2011/05/23/snippet-playing-a-system-sound/)这样的代码片段不起作用（我认为），因为我不想在我的应用程序中包含声音，因为它们已经在设备上！我只想使用可用的。但是他们的`NSURL`位置在哪里（如果是这样的话）？

或者如果方式就像振动的“声音”（即`AudioServicesPlaySystemSound(kSystemSoundID_Vibrate)`）“他们”的论据是什么？

（而且......[这个链接](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html)不是很有帮助）。这里没有惊喜。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:46:14.147

尝试这个：

```
AudioServicesPlaySystemSound(1003); 
```

有关更多音频代码，请查看此链接：[AudioServices](http://iphonedevwiki.net/index.php/AudioServices)

# c# - 检查用户名是否在c#的数据表中

> ID：13111150
> 
> 赞同：-3
> 
> 时间：2012-10-28T17:20:49.893
> 
> 标签：c#, sql, .net, winforms, datatable

我正在开发 VS2010 c#。

我有一个包含用户名和密码的数据表：

```
____________
andy | 1234
joni | 5678
lara | 4567 
```

如何形成一个函数来查看用户在文本框中输入的内容并查看它是否在数据库中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:33:59.000

您可以编写一个`SQL Function`并执行以下操作：

```
CREATE FUNCTION [dbo].[CheckUserExists] (@User NVARCHAR(50))
RETURNS BIT
AS 
BEGIN
DECLARE @RetVal INT

SELECT @RetVal = COUNT(User.UserId)
FROM
    Users
WHERE
    Users.Username = @User

IF @RetVal > 0 
BEGIN
   RETURN 1
END
    RETURN 0
END 
```

然后在您的 C# 程序中，您可以使用`ADO.NET`并执行以下操作：

```
private bool UserExists(string username) {
     SqlCommand cmd  = new SqlCommand("CheckUserExists", conn);

 cmd.CommandType = CommandType.StoredProcedure;

 cmd.Parameters.Add(new SqlParameter("@User", username));

     SqlDataReader reader = cmd.ExecuteReader(); // execute the function

     // return the response from the reader (1 if it is true, 0 for false)
} 
```

然后，您可以通过执行以下操作调用该函数：

```
 var userExists = UserExists("YourUser"); 
```

[http://www.csharp-station.com/Tutorials/AdoDotNet/Lesson07.aspx](http://www.csharp-station.com/Tutorials/AdoDotNet/Lesson07.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:06:11.060

您可以在数据表上执行一个 select 语句，该语句将返回一个 DataRows 数组。

```
DataRow[] foundRows = DataTable.Select("username = andy");
if(foundRows.Length > 0)
{
Console.WriteLine("Username exists");
} 
```

# tsql - T-SQL 计算百分比

> ID：13111153
> 
> 赞同：0
> 
> 时间：2012-10-28T17:21:04.713
> 
> 标签：tsql, sql-server-2000

我有一个带有客户（健身俱乐部）的 SQL Server (2000) 数据库。

客户每年加入。我希望能够计算续订会员的客户百分比（随着时间的推移和过去一年）。活动状态字段指示他们是否仍然是成员。
JoinDate 不会改变。当会员续订时，有一个 ActiveDate 和一个 DueDate（当客户到期续订时），DueDate 比激活日期提前 1 年。我要做的是尝试了解续订客户的百分比，如果可能或总体上按过去几年细分。有任何想法吗。谢谢。客户表中的字段包含：

```
 CustomerID    JOIN Date    Cancel Date   ActiveStatus ActiveDate   DueDate

     12345        10/01/2011   NULL          Yes         10/01/2012  10/01/2013

     12346        1/1/2010     12/31/2011    No          1/1/2010     1/1/2011 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:08:30.947

好的，如果 ActiveDate 在 Join_Date 之后，我们知道客户续订了会员资格。要获得续订会员资格的客户百分比，我们需要获得：

ActiveDate > JOIN_Date 的客户数量（续订会员的客户）

更新会员的客户数量乘以 100

这个结果除以所有客户的总数

```
select 
(select COUNT(*)  from Customer where ActiveDate > JOIN_Date) * 100 / COUNT(*)
from Customer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:36:26.083

您可以像这样计算每个客户的续订次数..

```
select
    *,
    datediff(yyyy, joindate, 
         case activestatus when 'yes' then  getdate() else CancelDate end
    )
from yourtable 
```

# github - 列出 wiki `Home` 页面上的所有 wiki 页面

> ID：13111160
> 
> 赞同：25
> 
> 时间：2012-10-28T17:21:49.360
> 
> 标签：github

我正在寻找一种方法来列出 wiki`Home`页面上的所有页面，而不是标准的欢迎信息。这是我想要的一个例子： [https ://github.com/yahoo/oozie/wiki](https://github.com/yahoo/oozie/wiki)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-28T19:18:24.620

知道了！诀窍是删除`Home`页面，但不可能直接从 github 执行。

这是一个解决方法：转到`wiki`/`Git Access`并使用提供的链接克隆 wiki 存储库。在克隆的 repo 中，只需删除代表`Home`页面的文件（在我的情况下是`Home.md`）。将更改推回。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-07T00:42:54.720

至少截至 2014 年 7 月，这些建议都不再有效。它们一开始似乎可以工作，你会得到一个充满链接的页面作为你的主页，但只是暂时的。无论您如何删除或重命名主页，它都会在您下次编辑 wiki 时再次自动创建。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-15T13:11:40.413

我只是去了`Home`页面（类似于[https://github.com/user/repo/wiki](https://github.com/user/repo/wiki)`Edit page` ），然后单击`Delete page`.

*还有一件重要的事情*：如果您删除`Home`了页面并希望将其取回 - 只需创建一个带有名称的新页面`Home`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-10T23:16:26.430

可以使用以下命令删除主页`git`：

```
git clone https://github.com/ORG/REPO.wiki.git
cd REPO.wiki
rm Home.md
git add .
git commit -m "remove wiki homepage"
git push 
```

**更新**：GitHub 自动添加了一个`Initial Home page`重置​​创建的提交`Home.md`。所以我的替代方案是自己生成主页：

*   `git push`
*   创建一个`Home.rb`包含以下内容的文件：

    ```
    #!/usr/bin/env ruby
    File.write('Home.md', Dir['*.md'].reject { |f| f == "Home.md" }.map { |f|
      "- [#{f.gsub('.md', '').gsub(/-+/, ' ')}](#{f.gsub('.md', '')})"
    }.join("\n")) 
    ```

*   `ruby Home.rb`

*   `git add .`
*   `git commit -m "generated home page"`
*   `git push`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-15T13:32:05.000

我刚刚想出了如何做到这一点：转到主页>单击编辑页面>删除标题和内容>单击保存。完成后，您将看到类似[https://github.com/host-gator/t/wiki的内容](https://github.com/host-gator/t/wiki)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-20T21:22:04.883

对此进行更新。调用页面时该`delete page`选项不可用`Home`。但是，如果您将其修改为类似的其他内容`home_old`，则可以再次对其进行编辑，并且您可以访问该`Delete Page`选项。然后，您将拥有没有冗余页面的自动索引`Home`页面。

# ajax - 通过 AJAX 作为 POST 传递 JSON 编码的数组

> ID：13111161
> 
> 赞同：1
> 
> 时间：2012-10-28T17:21:51.733
> 
> 标签：ajax, json

**我想要什么**：我想通过*AJAX POST*方法将*PHP 数组*传递给*PHP*后端文件。

 ***我在做什么：** 我正在使用[json_encode()对数组进行编码，并使用 javascript](http://php.net/manual/es/function.json-encode.php "json_encode()") [encodeURIElement()](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp "encodeURIComponent()")函数将其作为*POST*元素传递。

**我得到了什么：** 我得到一个 JSON“*数组结构*”，其中我的字符串的每个单词都成为具有 NULL 值的数组的键，这显然对我不起作用。

**我** 的想法：我认为[encodeURIElement()](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp "编码URIComponent()")不能很好地处理大字符串，但是我怎么能通过*AJAX POST*发送数据而不会出现字符问题？

*请注意*：我已经使用了 RTFM 方法。

**一些代码：**

```
function printJS($action,$position){
global $allPhrases;
/* Tmp function to print the AJAX function which makes a POST, because it is gonna appear lot of times */
return 'onClick="syncronPost(\'/php/backend-checkPh.php\',\'idCont=' . $_POST['idCont'] . '&jsonPh=\'' . $allPhJSON . '\'&act=' . $action . '&pos=' . $position . '\',\'AJXeditArt\'); return false;"';
} 
```*

# php - preg_replace 的 PHP 正则表达式删除一个特定的文本

> ID：13111162
> 
> 赞同：0
> 
> 时间：2012-10-28T17:22:04.897
> 
> 标签：php, regex, arrays

我正在尝试从我的 JS 函数数组中删除一个 JS 函数，但我无法为它找出正确的 regExp。

这是我要删除的文本（函数）：

```
window.addEvent('domready', function() {

  SqueezeBox.initialize({});
  SqueezeBox.assign($$('a.modal'), {
    parse: 'rel'
  });
}); 
```

我写了这段代码来删除它：

```
<?php if (isset($this->functions['text/javascript'])) {
      $this->functions['text/javascript'] = preg_replace('%window\.addEvent\(\'domready\',\s*function\\(\\)\s*\\{SqueezeBox\\.initialize\\(\\{\\}\\);\s*SqueezeBox\\.assign\\(\\$\\$\\(\'a\\.modal\'\\), \\{parse: \'rel\'\\}\\);\\}\\);\s*%', '', $this->functions['text/javascript']);
      if(empty($this->functions['text/javascript'])) {
          unset($this->functions['text/javascript']);
      }
  } ?> 
```

我的正则表达式不太好，所以我迷路了，不知道在哪里寻找模式中的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:19:09.633

最后我成功了。感谢大家的帮助！

这是对我有用的最终代码。

```
<?php 
  if (isset($this->functions['text/javascript'])) {
      $this->functions['text/javascript'] = preg_replace('%window\.addEvent\(\'domready\',\s*function\(\)\s*{\s*SqueezeBox.initialize\(\{\}\)\;\s*SqueezeBox.assign\(\$\$\(\'a.modal\'\)\,\s*{\s*parse:\s*\'rel\'\s*}\);\s*}\);\s*%', '', $this->functions['text/javascript']);
      if(empty($this->functions['text/javascript'])) {
          unset($this->functions['text/javascript']);
      }
  } 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:26:43.380

正则表达式不适合解决这类问题。我建议从 php 中输出某种标志变量并将其用作 js 中的条件，如下所示：

```
window.addEvent('domready', function() {
if(flag){
  SqueezeBox.initialize({});
  SqueezeBox.assign($$('a.modal'), {
    parse: 'rel'
  });
}
}); 
```

然后，您可以根据您的逻辑输出`var flag=true`或在您的 php 中。`var flag = false`

# java - 多标记错误

> ID：13111168
> 
> 赞同：1
> 
> 时间：2012-10-28T17:23:12.260
> 
> 标签：java, eclipse

我在下面的代码中不断收到多个标记错误，在 readData 函数中也是如此。

```
public static void writeData(OutputStream os) throws IOException
{
        DataOutputStream out = new DataOutputStream(new BufferedOutputStream(os));
        for (int x = 0; x < 10; x++)
        {
            int random = (int)(Math.random() % 100) + 1;
            out.writeChars("Random value = " + random);
        }
        out.flush();
        out.close();
} 
```

多个标记意味着存在不止一个错误......但我无法解决问题......

# php - 我是否需要运行 POP3/IMAP 服务器才能使用 PHPMailer？

> ID：13111169
> 
> 赞同：0
> 
> 时间：2012-10-28T17:23:13.590
> 
> 标签：php, imap, pop3, dovecot

我们已经为我们的电子邮件部署了 Google Apps，所以不要使用 POP/IMAP。

但是，我们网站的一些脚本（WordPress、OpenCart）使用 PHP 邮件功能来发送电子邮件。

我是否需要继续运行像 Dovecot 这样的 POP3/IMAP 服务器，或者我可以安全地关闭它吗？

关于这一点，我可以安全地关闭 POP3/IMAP 端口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:24:55.410

POP/IMAP 用于**检索**电子邮件。对于发送，这是 PHPMailer 所做的，你需要一个 SMTP 服务器，例如 postfix、sendmail、exim。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:24:34.930

不，您只需要 MTA，因此 SMTP 只是必需的协议。

IMAP/POP3 用于从您现有的邮箱接收邮件。

# http - 如何模拟对网页的控制台查询？

> ID：13111177
> 
> 赞同：0
> 
> 时间：2012-10-28T17:24:15.120
> 
> 标签：http

我想通过终端从这个网页获取数据，页面是[http://dondevoto.apps.cl/](http://dondevoto.apps.cl/)。现在我想模拟控制台查询并将数据保存在文本中。我很有趣得到这个城市。

任何想法 ？。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:29:39.017

您应该能够使用对以下内容的简单获取请求直接访问数据：

[http://hackshackers.cl/fono/servel.php?callback=?&rut=insert_here](http://hackshackers.cl/fono/servel.php?callback=?&rut=insert_here)

将 [insert_here] 替换为常规。看来它将返回 JSON。您可以使用 Wget 或 Curl 来保存结果。

注意：我从[http://dondevoto.apps.cl/js/app.js](http://dondevoto.apps.cl/js/app.js)中提取了这个，它显示了网站的实际工作方式。

# java - Java：向图形对象添加 ActionListener

> ID：13111179
> 
> 赞同：1
> 
> 时间：2012-10-28T17:24:23.783
> 
> 标签：java, swing, jbutton, actionlistener

我有一大堆按钮，有没有办法将actionListeners添加到所有按钮而不用`button.addActionListeners(this)`全部？它使代码看起来很乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:31:21.967

如果所有按钮都在一个容器上，您可以`ActionListener`像这样注册一个：

```
for (Component c: container.getComponents()) {
   if (c instanceof JButton) {
      ((JButton)c).addActionListener(this);
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T17:27:47.630

如果您想要所有按钮的通用行为，您需要使它们扩展您定义通用代码的抽象类。`MyButtonClass`因此，使用自己的添加侦听器方法定义您自己的抽象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-28T17:28:41.753

不，那里没有。但是如果所有按钮共享同一个动作监听器（这很奇怪），也许它们应该存储在一个数组或集合中。然后你可以这样做：

```
for (JButton button : allButtons) {
    button.addActionListener(this);
} 
```

# php - 不需要的方法称为

> ID：13111184
> 
> 赞同：-3
> 
> 时间：2012-10-28T17:24:44.510
> 
> 标签：php, oop, polymorphism, virtual-functions

让我们看一个基本类：

```
class A
{
   public function renderSomethingRecursive()
   {
      //this function can call itself
      self::renderSomethingRecursive(); // ERROR!!!!
   }

   abstract public function addSomething (value);
}

class B extends A
{
   public function renderSomethingRecursive()
   {
      throw new Exception ('This time this method must not be called!');
   }

   public function addSomething (value)
   {
      //something, something, something....
      parent::renderSomethingRecursive();
   }
}

$obj = new B();
$obj->addSomething(....); 
```

当我这样做时，`B::renderSomethingRecursive()`仍然会被调用，这是我不想要的......在`A:renderSomethingRecursive()`方法上，在`self::renderSomethingRecursive(); // ERROR!!!!`线路调用`B::renderSomethingRecursive();` **而不是** `A::renderSomethingRecursive();`，这是合理的，因为`$this`现在`B`而不是`A`......但是我不知道如何躲避它。

顺便说一句，我知道`B::renderSomethingRecursive()`方法应该被删除，但我想保留它作为一个通知，它不能被意外调用。我想将其设为“私有”以使其不可用，但正如我们所知，这是不可能的:)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:32:38.593

`B`如果您不想调用它，为什么要定义该方法。只是不要定义它，PHP 只能调用 1 种方法。这样，您不必使用`parent::theMethod`，您可以轻松地使用它来调用它`this->theMethod();`

```
Abstract class A
{
   public function renderSomethingRecursive()
   {
      $this->renderSomethingRecursive(); // no need for self::, that's for static calls
   }

   abstract public function addSomething (value);
}

class B extends A
{
   public function addSomething (value)
   {
      $this->renderSomethingRecursive();//calls the abstract method as though it were defined in class B
   }
} 
```

就是这样，真的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T17:35:28.643

为什么不进行重构以支持组合而不是继承？如果您开始将“添加某些内容”和“递归某些内容”拆分为单独的关注点，您会发现自己拥有更小、更易于理解的类，它们可以很好地协同工作。

由于您不希望调用者`B`能够调用`renderSomethingRecursive()`然后从类中完全删除该函数。也打破了继承，`B`不需要继承自`A`. 我们仍然希望`B`能够“添加东西”，所以它会保留一个名为`addSomething()`. 由于我们不想`addSomething`在两个类中复制主体，我们可以将`B`其委托给调用`A`时的实例`B::addSomething`。

```
abstract class A
{
   public function renderSomethingRecursive()
   {
      // this function can call itself
      self::renderSomethingRecursive();
   }

   abstract function addSomething ($value) {

}

class AA extends A
{
   public function addSomething($value)
   {
      // something, something, something....
      self::renderSomethingRecursive();
   }
}

class B
{
   private $a;
   public function __construct(A $a)
   {
      $this->a = $a;
   }

   public function addSomething ($value) {
      $this->a->addSomething($value);
   }
}

$obj = new B(new AA());
$obj->addSomething(....); 
```

这已经变得更好了，但是我们可以在完成之前摆脱这个重复`addSomething`。渲染和管理列表实际上是两个不同的问题，所以让我们把它分开。首先，我们将`addSomething`进入`B`. 然后我们意识到`renderSomethingRecursive`可能也需要访问 $data，我们可以添加一些参数，以便它可以再次访问该数据。`A`不再需要抽象，但`B`如果仍有不同的`addSomething`. 你应该留下这样的东西......

```
class A
{
   public function renderSomethingRecursive($data)
   {
      // this function can call itself
      self::renderSomethingRecursive($data);
   }     
}

class B
{
   private $a;
   private $data;
   public function __construct(A $a)
   {
      $this->a = $a;
   }

   public function addSomething ($value) {
      // something, something, something....
      // append to $this->data probably
      $this->a->renderSomethingRecursive($this->data);
   }
}

$obj = new B(new AA());
$obj->addSomething(....); 
```

# python - 更改捕获组中的文本

> ID：13111186
> 
> 赞同：-1
> 
> 时间：2012-10-28T17:24:51.407
> 
> 标签：python, regex, django

使用我正在使用的代码`(r' ', ' '),`更改`a a a a(r' a', a' a'),`它应该何时更改为`(r' a', ' '),`. 有什么更自然的方法来做到这一点？我该怎么做`re.sub`？

当前代码，请参见[此处](http://pastebin.com/cQvJ81BF)

```
for key, value in newgroupdict.items():
    try:
        newstr = newstr.replace(re.search(e, line).group(key), value)
    except:
        pass 
```

例子：

```
Expression: \s*(?:url)?\(r?["|'](?P<pattern>[^'"]+)["|'],\s*["|']?direct_to_template["|']?,\s*{["|']template["|']:\s*["|'](?P<template>[^'"]+)["|']}\),
String:     (r'^$', direct_to_template, {'template': 'home.html'}),
Dictionary: {u'pattern': u'^$abc', u'type': u'direct to template', u'template': u'home.html'}
Output:     (r'^$abc', direct_to_template, {'template': 'home.html'}),

Expression: \s*(?:url)?\(r?["|'](?P<pattern>[^'"]+)["|'],\s*["|']?(?P<view>[^'"]+)["|']?\),
String:     (r'^urls/', 'urls.views.urls'),
Dictionary: {u'pattern': u'^new_urls_pattern/', u'type': u'view', u'view': u'urls.views.urls'}
Output:     (r'^new_urls_patterns/', 'urls.views.urls'),

================= Incorrect Output ========================

Expression: \s*(?:url)?\(r?["|'](?P<pattern>[^'"]+)["|'],\s*["|']?(?P<view>[^'"]+)["|']?\),
String:     (r'^urls/', 'urls'),
Dictionary: {u'pattern': u'^new_urls_pattern/', u'type': u'view', u'view': u'urlsxyz'}
Incorrect Output:     (r'^urlsxyz/', 'urlsxyz'),
Correct Output:     (r'^urls/', 'urlsxyz'), 
```

![djangogui 的屏幕截图](../Images/92a8a9f9bc1aa098d2f73dcc126b5921.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:54:31.997

使用正则表达式有很多方法可以实现这一点，这里有一个：

```
In [23]: re.sub(r"'([^']+)'", r"'\1a'", "(r' ', ' '),", 1)
Out[23]: "(r' a', ' ')," 
```

我不是一个好老师，正则表达式很难理解，我还是会试着把它分解给你：

*   使用[re.sub](http://docs.python.org/2/library/re.html#re.sub)，使用的参数：
    *   第一个参数是正则表达式，
    *   其次是*替换*正则表达式，
    *   第三个是主题，你想要工作的字符串，
    *   finnaly 是应用替换的次数，
*   使用第一个正则表达式：
    1.  `'`将匹配`'`您的字符串主题中的 a，
    2.  `(`打开组`\1`，在此之间找到的任何内容`)`都将在组中`\1`，
    3.  `[^']`匹配**除`'`**,之外的任何字符
    4.  `+`表示前面的字符类 ( `[^']`) 可以重复，
    5.  `'`将匹配`'`
*   替换正则表达式说：
    *   投入`'`以补偿`'`1\. 中的替换，
    *   将匹配的任何内容放入 group `\1`，从 2\. 到 4\. 的所有内容，所有非`'`字符，
    *   `'`用来补偿模式正则表达式中的最后一个`'`，

随意尝试它，删除 count 参数和类似的东西。但是你**必须在某个时候学习正则表达式，所以你应该把它看作是阅读**[神圣手册](http://docs.python.org/2/library/re.html#regular-expression-syntax)的好机会。了解正则表达式将使您成为更好的程序员，并让您拥有对文本数据的控制权。

# sql-server - 按窗口或周期将列表分发到桶中进行处理

> ID：13111191
> 
> 赞同：0
> 
> 时间：2012-10-28T17:25:59.893
> 
> 标签：sql-server, math

在 SQL Server 中，我有一个 id 的源列表，我想以特定的方式重新排序以进行处理。我的原始表有一个 ID 列表，如 10,10,10,10,10,20,20,20,20,30,40,40,50,50,60 以及与每个 ID 相关联的唯一键。它们可以按任何顺序排列。我想按窗口或循环将它们分发到存储桶中，以免它们发生冲突。我熟悉聚合函数，我在数学上遇到了麻烦，无法将其分发。我可以使用循环来完成，但出于性能原因，如果可能的话，我想在单个查询中完成。

我有一个查询来获取计数和优先级，例如

```
Count   Id  Priority
5       10  1
4       20  2
2       40  3
2       50  4
1       30  5
1       60  6 
```

桶的数量是任意的，尽管是提前决定的。如果是 3，我希望在第一个周期中 id 为 10、20、40，然后在第二个周期中为 10、20、50。如果桶是 4，那么第一个是 10,20,40,50，第二个是 10,20,40,50。

我表达问题的另一种方式是我想通过计数从新表中获取第一个 x，减少计数，然后获取下一个 x，直到用尽。

接受了建议的解决方案并重新编写了它，但如果可能的话，我仍在寻找一个单一的 sql 查询解决方案。

我已经稍微更新了建议的循环，应该更优化一些还没有根据我的实际工作量更新它

```
declare @bucket int, @b int, @maxrows int  
declare @buckets table (fstrEntityHash varchar(100), bucket int)
declare @count table (flngCount int, fstrEntityHash varchar(100))
declare @bucketTemp table (fstrEntityHash varchar(100), bucket int)

select @bucket = 3, @maxrows = 20

insert into @count
select  COUNT(1) as flngCount, 
    fstrEntityHash
from tblTest
group by fstrEntityHash
order by COUNT(1) desc

set @b = 1
while (1 = 1)
begin
insert into @bucketTemp
select top (@bucket) fstrEntityHash, @b
from @count
where   flngCount > 0
order by flngCount desc;

if @@rowcount = 0
   break

 update C
 set    C.flngCount -= 1
 from   @count C, @bucketTemp I
 where  C.fstrEntityHash = I.fstrEntityHash

insert into @buckets
select  * 
from        @bucketTemp

if (select count(1) from @buckets) >= @maxrows
   break

 select @b = @b + 1
 delete from @bucketTemp

end

select * from @buckets 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:59:34.427

好吧，我不知道 CTE 是否可行，因为有一些限制（不能`top`在递归部分使用，也不能在递归部分使用聚合）。
所以目前我得到了这个半周期：

**更新**：

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/a9ce3/42)

我稍微改变了一个查询，所以它不会一直计算在整个表中。我还从表中删除`@counts`所有不必要的记录并计算我可以获得记录的最低优先级。

```
declare @bucket int, @b int, @Priority int
declare @buckets table (Id int, bucket int)
declare @bucketsTemp table (Id int primary key, [Count] int, Priority int)
declare @counts table (Id int primary key, [Count] int, Priority int)

select @bucket = 3, @b = 1
select @Priority = min(Priority) from temp

while (1 = 1)
begin
   insert into @bucketsTemp (Id, [Count], Priority)
   select top (@bucket)
       t.Id,
       isnull(c.[Count], t.[Count]) - 1 as [Count],
       t.Priority
   from temp as t
       left outer join @counts as c on c.Id = t.Id
   where t.Priority >= @Priority and isnull(c.[Count], t.[Count]) > 0
   order by t.Priority

   if @@rowcount = 0
       break

   insert into @buckets
   select b.Id, @b
   from @bucketsTemp as b

   update @counts set
       c.[Count] = b.[Count]
   from @counts as c
       inner join @bucketsTemp as b on b.Id = c.Id

   insert into @counts
   select b.Id, b.[Count], b.Priority
   from @bucketsTemp as b
   where b.Id not in (select c.Id from @counts as c)

   delete @counts
   from @counts as c
   where
       c.[Count] = 0 and
       not exists (select * from @counts as t where t.Priority < c.Priority and t.[Count] <> 0)

   delete from @bucketsTemp

   select @Priority = min(Priority) from @counts
   select @b = @b + 1
end

select * from @buckets 
```

* * *

第一次尝试是

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/a9ce3/23)

```
declare @bucket int, @b int   
declare @buckets table (Id int, bucket int)

select @bucket = 3, @b = 1

while (1 = 1)
begin
  insert into @buckets
  select top (@bucket)
     t.Id,
     @b
  from <your table> as t
     left outer join 
     (
         select t.Id, count(*) as [Count]
         from @buckets as t
         group by t.Id
     ) as B on B.Id = t.Id
  where t.[Count] - isnull(B.[Count], 0) > 0
  order by t.Priority asc

  if @@rowcount = 0
     break

  select @b = @b + 1
end

select * from @buckets 
```

# arm - 为 arm 交叉编译 Pantheios

> ID：13111199
> 
> 赞同：1
> 
> 时间：2012-10-28T17:26:19.737
> 
> 标签：arm, pantheios

我试图将 pantheios 交叉编译到 arm 但没有运气。我使用来自代码源的 arm 编译器。

我尝试在 pantheios 文件夹中为 gcc46 更改生成文件中的 CC 等。但它说：“#error _STLSOFT_SIZEOF_SHORT 未定义”我该如何解决这个问题？

我究竟做错了什么？。有谁知道如何为arm交叉编译pantheois？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:46:53.873

我还没有将 pantheios 移植到 ARM，但我有将它移植到 PowerPC 的经验。

**与pantheios**本身无关，需要更新pantheios所基于的 stlsoft 库**。**主要思想是修复文件 stlsoft/internal/cccap/gcc.h 中的编译器平台歧视

所需的步骤是将平台信息添加到上述文件的**“整数大小”**部分。

从您的 gcc 交叉编译器中调查所需的信息，如下所示

> 触摸文件.cpp
> 
> arm-crosscompiler-g++ -E -dM file.cpp > arm-gcc-def.txt

查看 arm-gcc-def.txt 的平台定义（如下所示）：

```
#define __ARM__
#define __SIZEOF_SHORT__ 2 
```

并根据您的发现修复 stlsoft/internal/cccap/gcc.h

之后，您将能够为 ARM 架构交叉编译 Pantheios。

这里是sourceforge 上[PowerPC](http://sourceforge.net/tracker/?func=detail&aid=2503588&group_id=238860&atid=1107746)的示例补丁。

# .htaccess - 如何将 301 website.pl/page 重定向到 website.pl/page/？

> ID：13111200
> 
> 赞同：1
> 
> 时间：2012-10-28T17:26:22.780
> 
> 标签：.htaccess, http-status-code-301, http-redirect

是否可以从 website.pl/page 重定向到 website.pl/page/ ？我的 .htaccess 文件是 [我的 htaccess 文件](http://paweljanicki.pl/htaccess.txt)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:28:21.800

您的 .htaccess 中有正确的行，但您只需将 [L] 标志更改为 [L,R=301]

```
RewriteCond %{REQUEST_FILENAME} !-f   #checks if current URI leads to real file
RewriteCond %{REQUEST_URI} !(.*)/$    #checks if URI ends by slash, if not goes next
RewriteRule ^(.*)$ http://paweljanicki.pl/$1/ [L]    #this line changes a URI 
```

您需要更改为：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://paweljanicki.pl/$1/ [L,R=301]  #or skip 301 code [L,R]
#R=302 by default, but you can set any valid HTTP response status code 300-399 
```

关键是 [L] 标志不输出重定向到浏览器，但 Apache 将在阴影中处理*website.pl/page* URI，并带有结束斜杠（如*website.pl/page/*）。

Apache Docs for [RewriteRule Flags的更多信息](http://httpd.apache.org/docs/current/rewrite/flags.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:15:18.550

默认情况下，mod_dir 通过`DirectorySlash`指令（默认设置为“开”）为您执行此操作。这意味着如果 apache 认为您的请求是针对目录并且缺少尾部斜杠，mod_dir 将 301 将请求重定向到尾部斜杠。

但是，对于 CMS 或其他东西中的虚拟目录，apache 不会意识到 mod_dir 需要处理尾部斜杠。因此，您可以尝试在不指向现有文件或目录或现有目录的所有内容上附加斜杠，然后*关闭 mod_dir*。

在文档根目录的 htaccess 文件中，添加这些规则（在您可能已经拥有的任何类型的路由规则之上：

```
DirectorySlash Off

RewriteEngine On

# if request is for a directory
RewriteCond %{REQUEST_FILENAME} -d
# and is missing the trailing slash
RewriteRule ^(.*[^/])$ /$1/ [L,R=301]

# if request isn't for an existing directory or a file
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
# and no trailing slash
RewriteRule ^(.*[^/])$ /$1/ [L,R=301] 
```

# ruby - `（反引号）是意外标记

> ID：13111201
> 
> 赞同：3
> 
> 时间：2012-10-28T17:26:35.297
> 
> 标签：ruby, bash

我正在执行一些我在[这篇博客文章](http://mentalized.net/journal/2010/03/08/5_ways_to_run_commands_from_ruby/)中学到的命令行执行，例如文件`system`或`IO.popen`文件，并且出现错误。

为什么会出现反引号，这是什么意思，我该如何继续？请解释。

```
 system('./err.rb')
-bash: syntax error near unexpected token `'./err.rb'' 
```

同样，当我运行时`IO.popen`：

```
output = IO.popen('./err.rb')
-bash: syntax error near unexpected token `(' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T17:34:49.170

那不是您要输入内容的 ruby​​，而是您的 shell bash。假设您已正确安装了 ruby​​，请键入`irb`以获取 ruby​​ 提示，您应该能够从那里继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T18:40:51.430

无论是在 Ruby 还是 bash 中，``...'`元表达式都是在错误消息等地方使用，以引用代码中有问题的部分。例如，在您的错误消息中：`unexpected token `('`，有问题的部分是`(`。反引号本身与错误无关。

# java - 精度损失

> ID：13111212
> 
> 赞同：1
> 
> 时间：2012-10-28T17:27:30.223
> 
> 标签：java, precision

我尝试运行以下代码：

```
double f = 4.35; 
int n = (int) (100 * f); 
```

`n`将`434`。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:35:10.497

4.35 不能精确地表示为浮点数，因为 0.35 不是 2 的（负）幂。因此，以某种方式存在一些舍入。乘以 100 时可能还会进行舍入。如果结果数字略小于 435，则转换为 int 将占用它的底数，即 434。

如果您想四舍五入到 NEAREST 整数，您可以将 0.5 添加到结果中，然后转换为 int。这是对数字进行四舍五入的最通用方法，尽管 Java 有一个内置的舍入实现。

```
double f = 4.35; 
int n = (int) (100 * f + 0.5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:29:08.407

你需要看这个。我让大学一年级的学生看它做作业。[http://vimeo.com/7403673](http://vimeo.com/7403673) - Jon Skeet 和小马托尼。

Jon Skeet 在伦敦 Stack Overflow DevDays 活动上的演讲：stackoverflow.carsonified.com

在 6:50 左右，他谈到了 Java 中的数学以及开发人员在数学方面面临的一些常见问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T17:30:28.020

试试这个：

```
double f = 4.35; 
int n = (int) Math.round(100 * f); 
```

正如预期的那样，现在`n`将具有 as value 。`435`在处理以 2 为底的十进制值时，由于舍入错误而发生此类问题，请查看此参考以了解更多信息：[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T17:34:48.327

这是因为浮点数在内部以基数 2 而非基数 10 表示。

这在这里会有所帮助（必须导入`Math`）：

```
double f = 4.35; 
long n = Math.round(100 * f); 
```

# python - 将 html 源代码保存到

> ID：13111217
> 
> 赞同：0
> 
> 时间：2012-10-28T17:28:19.967
> 
> 标签：python, mysql

我正在尝试将网站源保存到我的 MySQL 数据库中。使用 urllib 成功检索源。接下来保存数据。与数据库的连接很好，问题在于源的保存，因为当我从插入语句中删除源时，一切都很好。

```
 # get the webpage source
    f = urllib.urlopen(row_urls['url'])
    source_fetched = f.read()
    f.close()

    # Save the webpage source
    scrapy_url_id = row_urls['id']
    url = row_urls['url']
    created = datetime.datetime.now()
    source = unicode(source_fetched,'utf-8')

    cur_webpage_save = con.cursor(mdb.cursors.DictCursor)
    cur_webpage_save.execute("""INSERT INTO webpage(scrapy_url_id,url,created,source) VALUES('%s', '%s', '%s', '%s');""" %(scrapy_url_id, url, created, source)) 
```

我猜它与需要转义的字符有关，我尝试了这个，但它产生了同样的错误：

```
 cur_webpage_save.execute(mdb.escape_string("""INSERT INTO webpage(scrapy_url_id,url,created,source) VALUES('%s', '%s', '%s', '%s');""" %(scrapy_url_id, url, created, source))) 
```

下面你会看到错误。我究竟做错了什么...

```
Traceback (most recent call last):
File "clean.py", line 55, in <module>
cur_webpage_save.execute(mdb.escape_string("""INSERT INTO webpage(scrapy_url_id,url,created,source) VALUES('%s', '%s', '%s', '%s');""" %(scrapy_url_id, url, created, source)))
File "/usr/lib/python2.7/dist-packages/MySQLdb/cursors.py", line 174, in execute
self.errorhandler(self, exc, value)
File "/usr/lib/python2.7/dist-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler
raise errorclass, errorvalue
_mysql_exceptions.ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\\'4\\', \\'http://example.com/test.html?id=108185\\', \\'2012-10-28' at line 1") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:30:25.557

不要使用字符串格式将数据放入数据库，而是使用 SQL 参数：

```
cur_webpage_save.execute("""INSERT INTO webpage(scrapy_url_id,url,created,source) VALUES(%s, %s, %s, %s);""", (scrapy_url_id, url, created, source)) 
```

对于 MySQLdb，语法*几乎*相同，只需删除单引号即可。

每个`%s`都被数据库适配器*正确引用的字符串值替换。*这也可以防止 SQL 注入攻击。

# iphone - SwipeGesture 帮助？只有 LeftSwipe 有效，但 RightSwipe 无效

> ID：13111218
> 
> 赞同：0
> 
> 时间：2012-10-28T17:28:39.353
> 
> 标签：iphone, ios, ipad, swipe, gesture

会发生什么；当我向左滑动时，textView 会更改帧大小，这是我想要它做的，但是当我向右滑动时，textView 并没有变回我想要的方式，实际上它根本没有改变！
有什么帮助吗？

```
// Add swipeGestures
    UISwipeGestureRecognizer *SwipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeReconised:)];
    [SwipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
    [self.view addGestureRecognizer:SwipeLeft];

    UISwipeGestureRecognizer *SwipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeReconised:)];
    [SwipeRight setDirection:UISwipeGestureRecognizerDirectionRight];
    [self.view addGestureRecognizer:SwipeRight];
}
- (void)swipeReconised:(UISwipeGestureRecognizer *)Swipe {
if (Swipe.direction == UISwipeGestureRecognizerDirectionLeft) {
    CGRect frame = [TextView frame];
    frame.size.width = 750;//Some value
    frame.size.height = 655;//some value
    frame.origin.x = 275;
    frame.origin.y = 44;
    [TextView setFrame:frame];
if (Swipe.direction == UISwipeGestureRecognizerDirectionRight) {
    CGRect frame = [TextView frame];
    frame.size.width = 240;//Some value
    frame.size.height = 655;//some value
    frame.origin.x = 784;
    frame.origin.y = 44;
    [TextView setFrame:frame];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:38:06.657

打开 prase of`if (Swipe.direction == UISwipeGestureRecognizerDirectionLeft)`应该在此之前关闭，`if (Swipe.direction == UISwipeGestureRecognizerDirectionRight)`只有它被调用

```
- (void)swipeReconised:(UISwipeGestureRecognizer *)Swipe {
if (Swipe.direction == UISwipeGestureRecognizerDirectionLeft) {
    CGRect frame = [TextView frame];
    frame.size.width = 750;//Some value
    frame.size.height = 655;//some value
    frame.origin.x = 275;
    frame.origin.y = 44;
    [TextView setFrame:frame];
}
if (Swipe.direction == UISwipeGestureRecognizerDirectionRight) {
    CGRect frame = [TextView frame];
    frame.size.width = 240;//Some value
    frame.size.height = 655;//some value
    frame.origin.x = 784;
    frame.origin.y = 44;
    [TextView setFrame:frame];
    }
} 
```

# python - 打开时找不到 Windows 7 Python 3.2 文件

> ID：13111222
> 
> 赞同：0
> 
> 时间：2012-10-28T17:28:46.180
> 
> 标签：python, windows, file-io, python-3.x

我有以下 Python 3.2 脚本：

```
f = open('C:/foo/bar/baz/text.txt') 
```

这会导致找不到文件异常：

```
ileNotFoundError: [Errno 2] No such file or directory: 'C:/foo/bar/baz/text.txt' 
```

但是，采用相同的路径并将其粘贴到 Windows 资源管理器中会很好地打开文件。我在 Windows 7 上的环境中缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:35:05.447

在 Windows 中，您应该尝试以下操作：

```
f = open(r'C:\foo\bar\baz\text.txt') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:32:52.483

您应该在路径中使用双反斜杠而不是斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T17:47:06.530

`icacls`在命令行上 运行后我意识到了这个问题：

找到的文件`icacls`实际上是`text.txt.txt`. 奇怪的是windows仍然能够找到它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-28T17:43:25.680

确保`C:\foo\bar\baz\text.txt`存在

# opencv - 计算机视觉 - 基于提取的人脸关键点检测人脸角度

> ID：13111224
> 
> 赞同：0
> 
> 时间：2012-10-28T17:29:03.763
> 
> 标签：opencv, computer-vision, face-detection

我有一个提取面部基本关键点的应用程序。这包括眼角、嘴角、鼻子和面部边界。

有没有我可以应用的构建应用程序或算法，以便我可以检测面部角度（它向左多少或向右多少）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:51:05.893

您必须在 3D 系统中检测人脸平面。这将涉及找到面部平面相对于相机的外部参数（方向和姿势）。根据面部平面与图像传感器平面的关系，您可以确定它的左右方向。

stackoverflow 中有很多关于外部参数的帖子。快速搜索将帮助您找到外部参数。

PS：在找到外部参数之前，您必须校准相机

# c - 从jpeg图像文件中获取宽度和高度

> ID：13111228
> 
> 赞同：3
> 
> 时间：2012-10-28T17:29:32.017
> 
> 标签：c, height, width, jpeg

我将此函数写入给定的文件名（一个 jpeg 文件）应以像素、w 和 h 为单位打印其大小。根据我正在阅读的教程，

> //0xFFC0 是包含文件大小的“帧开始”标记 //0xFFC0 块的结构非常简单 [0xFFC0][ushort length][uchar precision][ushort x][ushort y]

所以，我写了这个`struct`

```
#pragma pack(1)
struct imagesize {
  unsigned short len; /* 2-bytes */
  unsigned char c;    /* 1-byte */
  unsigned short x;   /* 2-bytes */
  unsigned short y;   /* 2-bytes */
}; //sizeof(struct imagesize) == 7
#pragma pack() 
```

进而：

```
#define SOF 0xC0 /* start of frame */

    void jpeg_test(const char *filename)
    {
      FILE *fh;
      unsigned char buf[4];
      unsigned char b;

      fh = fopen(filename, "rb");
      if(fh == NULL) 
        fprintf(stderr, "cannot open '%s' file\n", filename);

      while(!feof(fh)) {
        b = fgetc(fh);

        if(b == SOF) {

          struct imagesize img;
    #if 1
          ungetc(b, fh);
          fread(&img, 1, sizeof(struct imagesize), fh);
    #else
          fread(buf, 1, sizeof(buf), fh);
          int w = (buf[0] << 8) + buf[1];
          int h = (buf[2] << 8) + buf[3];
          img.x = w;
          img.y = h;
    #endif

          printf("%dx%d\n",
             img.x,
             img.y);

          break;
        }
      }

      fclose(fh);
    } 
```

但我得到`520x537`的不是`700x537`，而是真正的大小。

有人可以指出并解释我错在哪里吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T19:28:22.097

JPEG 文件由多个部分组成。每个部分以 开头`0xff`，后跟 1 字节的部分标识符，然后是该部分中的数据字节数（以 2 个字节为单位），然后是数据字节。数据字节序列内的序列`0xffc0`，或任何其他`0xff--`两字节序列，没有意义，也不标记一个节的开始。

作为一个例外，第一部分不包含任何数据或长度。

您必须依次读取每个节头，解析长度，然后在开始读取下一节之前跳过相应的字节数。您不能只搜索`0xffc0`，更不用说`0xc0`，而不考虑节结构。

[来源](http://www.faqs.org/faqs/jpeg-faq/part1/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T03:33:35.610

有几个问题需要考虑，具体取决于您希望程序有多“通用”。首先，我推荐使用[libjpeg](http://en.wikipedia.org/wiki/Libjpeg)。一个好的 JPEG 解析器可能有点血腥，这个库为你做了很多繁重的工作。

接下来，为了澄清*nm 的*声明，您不能保证第一个 0xFFCO 对是感兴趣的 SOF。我发现现代数码相机喜欢在 JPEG 标头中加载许多 APP0 和 APP1 块，这可能意味着您在顺序读取期间遇到的第一个 SOF 标记实际上可能是图像缩略图。此缩略图通常以 JPEG 格式存储（据我观察，无论如何），因此配备了自己的 SOF 标记。一些相机和/或图像编辑软件可以包含大于缩略图（但小于实际图像）的图像预览。此预览图像通常是 JPEG 格式，并且有自己的 SOF 标记。图像 SOF 标记是最后一个并不罕见。

大多数（全部？）现代数码相机也在 EXIF 标签中编码图像属性。根据您的应用程序要求，这可能是获取图像大小的最直接、最明确的方法。[EXIF 标准文档](http://www.exif.org/Exif2-2.PDF)将告诉您编写 EXIF 解析器所需的所有知识。（[libExif](http://libexif.sourceforge.net/)可用，但它不适合我的应用程序。）无论如何，如果您使用自己的 EXIF 或依赖库，有一些很好的工具可以检查 EXIF 数据。[jhead](http://www.sentex.net/~mwandel/jhead/)是非常好的工具，我也很幸运使用[ExifTool](http://en.wikipedia.org/wiki/ExifTool)。

最后，注意字节序。SOF 和其他标准 JPEG 标记是大端的，但 EXIF 标记可能会有所不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T18:39:49.290

正如您所提到的，规范指出标记是 0xFFC0。但似乎你只用代码寻找一个字节`if (b==SOF)`

如果您使用十六进制编辑器打开文件，然后搜索 0xFFC0，您会找到标记。现在只要文件中的第一个 0xC0 是标记，您的代码就可以工作。如果不是，你会得到各种未定义的行为。

我倾向于先阅读整个文件。是jpg吧，能有多大？（认为​​这在嵌入式系统上很重要）然后只需逐步查找我的标记的第一个字符。找到后，我会使用 memcmp 来查看下一个 3 字节是否计算了信号的其余部分。

# c - 错误 C2143：语法错误：缺少“；” 前 '）'

> ID：13111230
> 
> 赞同：1
> 
> 时间：2012-10-28T17:29:37.647
> 
> 标签：c

```
//Program Written By: Andre Chitsaz-zadeh
//Program Written On: 10/7/12
//Program calculates book cost for multiple book orders. 
//Program written using multiple functions.

#include <stdio.h>
#define SIZE 5

void inputData();
void processingData(int costs[]);
int costs[5];

int main ()
{
    inputData();
    processingData(costs);
}

void inputData()
{
    int i = 0;
    printf( "\nPlease enter five products costs.\n" );
    while(i < 5)
    {
       scanf("%d", &costs[i]);
       i = i + 1;
    }
    printf("stuff");
    for (i = 0, i < 5, i++)
        printf("%d\n", costs[i]);
}

void processingData(int costs[])
{
     int i;
     for (i = 0; i < 4; ++i)
     {
          int j, min, temp;
          min = i;
          for (j = i+1; j < 5; ++j)
          {
               if (costs[j] < costs[min])
                    min = j;
          }

          temp = costs[i];
          costs[i] = costs[min];
          costs[min] = temp;
     }
} 
```

它在撒谎……我没有遗漏任何分号。我已经在程序的这一点上停留了一段时间，我似乎错过了一些愚蠢的东西。我得到这个错误的唯一一次是我缺少分号并且我已经彻底检查了我的程序多次......谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-28T17:31:01.603

编译器不会撒谎。

在您的`inputData`功能中：

```
for (i = 0, i < 5, i++) 
```

应该：

```
for (i = 0; i < 5; i++) 
```

奇怪的是，你的`processingData`函数中有 for 循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:31:42.933

尝试更改 for 循环

```
void inputData()

{
    int i = 0;
    printf( "\nPlease enter five products costs.\n" );
    while(i < 5)
    {
    scanf("%d", &costs[i]);
    i = i + 1;

    }
    printf("stuff");
    for (i = 0, i < 5, i++)
        printf("%d\n", costs[i]);

    return;
} 
```

使用以下 for 循环

```
for (i = 0; i < 5; i++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T17:32:32.780

问题在这里：

```
for (i = 0, i < 5, i++) 
```

它应该是

```
for (i = 0; i < 5; i++) 
```

# objective-c - 在 iOS 应用中从 Facebook 获取和显示图像

> ID：13111233
> 
> 赞同：5
> 
> 时间：2012-10-28T17:30:01.310
> 
> 标签：objective-c, ios, image, ipad, facebook-graph-api

我正在`iOS`为`iPad`. 我已经实现`Instagram` `API`了，所以我可以从用户那里获取和使用照片。我可以用**Facebook**做同样的事情吗？有没有办法访问用户的图片？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T01:49:39.723

Graph API 是您想要开始查看您正在寻找的数据的地方。对于用户照片，请查看：用户创建的相册 - [h](https://developers.facebook.com/docs/reference/api/photo/) ​​ttps://developers.facebook.com/docs/reference/api/user/ 关于照片的信息 - [https://developers.facebook.com/docs/reference/api](https://developers.facebook.com/docs/reference/api/user/) [/照片/](https://developers.facebook.com/docs/reference/api/photo/)

我建议使用 Graph API 资源管理器尝试不同的查询： [https](https://developers.facebook.com/tools/explorer) ://developers.facebook.com/tools/explorer 首先确保您请求 user_photos 权限在查询中输入我/相册会为您提供登录用户的相册列表. 单击结果中的专辑 ID 可查看该专辑的信息。输入 /photos 以查看该相册的照片。

一旦您知道您想要什么，您就可以查看构建在 Graph API 和其他 API 之上的 iOS SDK，以进行身份​​验证，并针对您感兴趣的内容抓取照片。

有关发出请求的 iOS SDK 信息，请参阅： [https ://developers.facebook.com/docs/reference/ios/3.1/class/FBRequestConnection#startWithGraphPath%3AcompletionHandler%3A](https://developers.facebook.com/docs/reference/ios/3.1/class/FBRequestConnection#startWithGraphPath%3AcompletionHandler%3A)

因此，如果您想查看一张专辑的照片，给定一个专辑 ID，您可以使用如下请求代码：

```
[FBRequestConnection startWithGraphPath:@"<album_id>/photos" 
    completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
       if (!error) {
           NSLog("Results: %@", result);
       }
    }
]; 
```

确保您首先请求了 user_photos 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-14T08:17:28.380

```
- (IBAction)btnFBTap:(id)sender {
    [FBSDKProfile enableUpdatesOnAccessTokenChange:YES];
    if ([FBSDKAccessToken currentAccessToken]) {
        [self FBLogin];
    } else  {

        FBSDKLoginManager *login = [[FBSDKLoginManager alloc] init];
        [login
         logInWithReadPermissions: @[@"public_profile", @"user_photos"]
         fromViewController:self
         handler:^(FBSDKLoginManagerLoginResult *result, NSError *error) {
             if (error) {
                 // Process error
             } else if (result.isCancelled) {
                 // Handle cancellations
             } else {
                 [self FBLogin];
                 // If you ask for multiple permissions at once, you
                 // should check if specific permissions missing
             }
         }];
    }
}

- (void)FBLogin {

    [[[FBSDKGraphRequest alloc] initWithGraphPath:@"me"
                                       parameters:@{@"fields":@"id"}]
     startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection, id result, NSError *error) {
         [[MDManager sharedInstance].loadingView hide];
         if (!error) {
             NSLog(@"fetched user:%@", result);

             // For more complex open graph stories, use `FBSDKShareAPI`
             // with `FBSDKShareOpenGraphContent`
             /* make the API call */
             FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                                           initWithGraphPath:[NSString stringWithFormat:@"/%@/photos", result[@"id"]]
                                           parameters:@{@"type":@"uploaded",
                                                        @"fields":@"link,height,width"}
                                           HTTPMethod:@"GET"];
             [request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                                   id result,
                                                   NSError *error) {
                 NSLog(@"%@",result); // Return uploaded photos

             }];
         }
     }];
} 
```

# graph - 如何检测图中的“最小”循环

> ID：13111236
> 
> 赞同：1
> 
> 时间：2012-10-28T17:30:30.427
> 
> 标签：graph

我有一个关于图表的问题。

我有一个街道网络（以纽约曼哈顿为例，但它可以是任何街道网络）表示为图形（其中路口表示为节点，街道是节点之间的链接）。

现在的问题是我必须以某种方式获得“城市街区”（例如曼哈顿的街区），即定义城市街区的弧线集。我想到了循环检测算法，但这显然不会只给我真正的块，还有我并不真正需要的所有其他循环。当然，我可以很容易地将它们过滤掉，但这不是真正的解决方案。

你有什么（简单的）想法我可以从图表中得到“真正的”城市街区吗？

提前致谢！

# c++ - try 块中的一个语句中的异常是否会导致控制流绕过 try 块中的任何剩余语句？

> ID：13111238
> 
> 赞同：2
> 
> 时间：2012-10-28T17:30:38.597
> 
> 标签：c++, exception, try-catch

我有一些看起来像这样的 C++ 代码：

```
void Student::addCourse(Course cVal, string gr) throw(...) {
    try {
        GradedCourse c(cVal, gr);  // If an exception is thrown here...
        coursesTaken.insert(c);    // will this statement be executed?
    } catch(...) {
        throw;
    }
} 
```

如果构造函数发现包含课程成绩的 是无效的，构造`GradedCourse`函数可能会抛出异常。`gr`如果发生这种异常，是否会`try`执行块内的任何进一步语句？我可以确定这样的异常不会导致不尝试插入`GradedCourse`（`coursesTaken`这是一个 STL 集）吗？我搜索了 Stack Overflow 和 Google，但都没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:32:39.770

不。

如果`GradedCourse c(cVal, gr);`抛出异常，`try`则不会执行块内的任何其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:47:32.060

现在我明白你想问什么，但你的标题和问题本身都在问相互矛盾的事情。:)

如果在 try 块内抛出异常，执行将立即跳转到处理该异常的 catch 块，绕过所有其他语句。

[这是有关异常的文档。](http://www.cplusplus.com/doc/tutorial/exceptions/)它没有直接解决您的问题，但它确实涵盖了其他重要的事情，例如异常嵌套或链接异常处理程序。

# java - Java url-query html 特殊字符 (google)

> ID：13111241
> 
> 赞同：0
> 
> 时间：2012-10-28T17:31:01.433
> 
> 标签：java, url, translation, google-translate

我的 Java 应用程序有问题。我有一个大文本，有时包括“ *a* ”、“ *br* ”和“ *p* ”html 标记。

文本需要通过谷歌翻译进行翻译。我**被迫**（！）进行翻译查询：

```
http://translate.google.com/m?hl=en&sl=auto&tl=" + tl + "&ie=UTF-8&prev=_m&q="+URLEncoder.encode(text); 
```

现在我的问题是这些讨厌的标签。首先，我将所有链接替换为其文本类比：

```
text.replaceAll("<a (.*) href=\"(.*)\">(.*)</a>", "$2"); 
```

我的问题是：当我将此文本传递给 GT 时，它只是删除了所有链接，所以我没有返回文本链接，只有文本的其余部分。

如果我尝试使用**NON** -replaced 链接传递文本 - 如果链接 href 很长（如我的链接，因为它们很长）它只是将其完全裁剪掉，例如，

> a href="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASDADSADSADSADASAAAAAAAAAAAADSADSADASDASDSA" 将转换为纯“a”（后面的所有内容均为空白）

我该怎么办？如何使其正常工作，以免打扰我在文本中的链接？

提前致谢！

PS我没有其他选择使用任何其他API，只能查询！

# haskell - 从 Gen (Maybe Int) 转换为 Maybe Int

> ID：13111244
> 
> 赞同：2
> 
> 时间：2012-10-28T17:31:22.043
> 
> 标签：haskell, quickcheck

我想将 a 转换`Gen (Maybe Int)`为`Maybe Int`. 我有一个生成 1 到 9 之间的随机 Just Int 的函数。我想使用单元函数，但我无法更改其类型签名中的任何内容。有什么建议么？

```
 cell :: Gen (Maybe Int)
 cell = frequency
         [(9, return Nothing),
         (1, do n <- choose (1,9)  
                return (Just n))] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:18:34.793

这里有一些方法可以做到这一点

```
> sample' cell
[Nothing,Just 5,Nothing,Nothing,Just 7,Nothing,Nothing,Nothing,Nothing,Just 6,Nothing] 
```

它将生成一个随机`cell`s 列表。如果您只想获取一个元素，则可以调用 head 。

您可以`unGen`用作

```
main = do
    s <- newStdGen 
    print $ unGen cell s 100 -- 100 is arbitrary 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T17:49:59.247

您可以使用该[`unGen :: Gen a -> StdGen -> Int -> a`](http://hackage.haskell.org/packages/archive/QuickCheck/latest/doc/html/Test-QuickCheck-Gen.html#v%3aunGen)功能。它需要一个标准的随机数生成器（寻找[`System.Random`](http://hackage.haskell.org/packages/archive/random/latest/doc/html/System-Random.html#g:2)获得一个的方法）和一个大小参数（我认为在这种情况下会被忽略）。

# c# - 从类库中设置焦点

> ID：13111246
> 
> 赞同：2
> 
> 时间：2012-10-28T17:31:37.707
> 
> 标签：c#

在我的 C# (3.5) 解决方案中，我有 2 个项目 - 一个类库和 WinForm 项目。

所有业务逻辑都在类库中。在从 WinForm 添加/更新数据时，如果类库发现任何错误，它将引发错误并设置焦点以关联 WinForm 中的控件。

是否可以？

谢谢，SK保罗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:40:30.467

所有 UI 逻辑都应保留在您的 WinForm 项目中。您必须将控制权传递给类库以从库中设置焦点，这主要是一个糟糕的设计。反而：

```
namespace ClassLibrary
{
    public class Utility
    {
        public static string ReadData()
        {
            return "abc";
        }
    }
}

namespace Win_App
{
    public partial class Form1 : Form
    {
       private void button2_Click(object sender, EventArgs e)
       {
            if (ClassLibrary.Utility.ReadData() == null)
            {
                MessageBox.Show("error, redo");
                button2.Focus(); //you should handle this here.
                return;
            }
        }
    }
} 
```

这里的基本思想是在发生错误时发出适当的返回值。例如，对象的 null 值，或 bool 值的 false。你应该在 UI 项目中检查它，并在那里处理它。因此，在您的情况下，设置焦点应该来自 WinForm 项目。

# sql - SQL 模式匹配

> ID：13111249
> 
> 赞同：5
> 
> 时间：2012-10-28T17:31:51.827
> 
> 标签：sql, oracle, matching

我有一个与 SQL 有关的问题。

我想匹配两个字段的相似性并返回它的相似度百分比。

例如，如果我有一个名为 doc 的字段，其中包含以下内容

```
This is my first assignment in SQL 
```

在另一个领域我有类似的东西

```
My first assignment in SQL 
```

我想知道如何检查两者之间的相似性并返回多少百分比。

我做了一些研究并想要第二个意见，而且我从未要求过源代码。我已经使用 Levenshtein 距离算法查看了 Soundex()、Difference()、模糊字符串匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T18:20:31.177

你没有说你使用的是什么版本的Oracle。本示例基于 11g 版本。您可以使用[utl_match](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_match.htm#CBHBICDE)`edit_distance`包的功能来确定需要更改多少个字符才能将一个字符串转换为另一个字符串。[最大](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions069.htm#i77473)函数返回传入参数列表中的最大值。这是一个例子：

```
-- sample of data 
with t1(col1, col2) as(
  select 'This is my first assignment in SQL', 'My first assignment in SQL ' from dual
)
-- the query
select trunc(((greatest(length(col1), length(col2)) -  
              (utl_match.edit_distance(col2, col1))) * 100) / 
             greatest(length(col1), length(col2)), 2) as "%"
  from t1 
```

结果：

```
 %
----------
     70.58 
```

**附录**

正如@jonearles 正确指出的那样，使用包`edit_distance_similarity`的功能要简单得多`utl_match`。

```
 with t1(col1, col2) as(
     select 'This is my first assignment in SQL', 'My first assignment in SQL ' from dual
  )
  select utl_match.edit_distance_similarity(col1, col2) as "%"
    from t1
   ; 
```

结果：

```
 %
----------
        71 
```

# winforms - windows窗体中标签、文本框等的抗锯齿或平滑字体

> ID：13111250
> 
> 赞同：1
> 
> 时间：2012-10-28T17:32:01.903
> 
> 标签：winforms, c#-4.0

> **可能重复：**
> [如何在 Windows 窗体应用程序中对 Visual Studio 中的字体进行抗锯齿处理？](https://stackoverflow.com/questions/13110677/how-to-anti-alias-the-fonts-in-visual-studio-in-windows-forms-application)

如何使我的字体看起来像[这张图片中的上部字体](http://www.freeimagehosting.net/uploads/a8e533c7b6.png)一样平滑？我不是在谈论 cleartype（它已启用），但文本看起来不像在网站上那样流畅和清晰

# vba - VBA IE 自动化，在我导航到网站中的其他页面之前触发 VBA 中的某些操作

> ID：13111253
> 
> 赞同：1
> 
> 时间：2012-10-28T17:32:33.510
> 
> 标签：vba, excel, webautomation

我需要一个 VBA 代码，当网页框架即将导航到其他页面时，它可以在 VBA 中执行一些操作。例如，当我单击某个链接时，按钮导航到其他页面我想先截取页面的屏幕截图框架导航到其他。我做了类似的事情，但它正在拍摄空白页面的屏幕截图，并且它仅在页面导航和对象更改时工作一次。请帮我解决这个问题，我从 2 周以来一直在寻找这个，帮帮我。

```
Sub pageLoad()
Set ie2 = GetIE("https://xyz.com")
Dim LinkFound As Boolean
Dim linkCollection
Dim IEfr0 As Object
i = 0
Dim Link As MSHTML.HTMLAnchorElement
'HTMLInputElement
Set wordapp = CreateObject("word.Application")
wordapp.Visible = True
Set wrdDoc = wordapp.Documents.Add

Set IEfr0 = ie2.document.frames(0).document
Set linkCollection = IEfr0.getElementsByTagName("a")
Do While ie2.Visible = True
For Each Link In linkCollection
If ie2.document.frames(2).document.readyState = "interactive"  Then
sai1
End If

If IEfr0.readyState = 1 Then
sai1
End If
Next
Loop
End Sub
Sub sai1()
Application.SendKeys "{PRTSC}"
wordapp.Selection.Paste
Do While ie2.Busy
Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:15:53.580

这是一个可能的解决方案。仅向您展示如何创建对象并指定[BeforeNavigate2](http://msdn.microsoft.com/en-us/library/aa768326%28v=vs.85%29.aspx)事件。这需要您引用 Microsoft Internet 控件并创建 IE 对象（这不适用于后期绑定）。此代码必须在对象模块（工作表或工作簿）中，因为您不能在标准模块中使用 WithEvents。

```
Option Explicit
Dim WithEvents ie As InternetExplorer

Sub Example()
    Set ie = New InternetExplorer
    ie.Visible = True
    ie.Navigate "Your URL Here..."
    Do Until ie.ReadyState = READYSTATE_COMPLETE: DoEvents: Loop
End Sub

Private Sub ie_BeforeNavigate2(ByVal pDisp As Object, URL As Variant, Flags As Variant, TargetFrameName As Variant, PostData As Variant, Headers As Variant, Cancel As Boolean)
'Place code to run before navigating here.
End Sub 
```

您可能会看到的一个问题是，对于某些网站，BeforeNavigate2 事件实际上会触发多次，因为加载时会额外调用资源。

# list - 在 C++ 中通过 ref 发送对象列表

> ID：13111256
> 
> 赞同：0
> 
> 时间：2012-10-28T17:32:40.827
> 
> 标签：list, visual-c++, pointers

我尝试在 C++ 中通过 ref 发送列表，我的代码是：我想将它添加到 listOfLectures 对象，但它不起作用

```
 void Subject::getSubjectList(list<Subject>& listOfLectures)
    list<Subject*>::iterator it;
    for(it=nodeSons.begin(); it != nodeSons.end(); ++it) 
         listOfLectures.insert(it); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:44:13.000

尝试：

```
list<Subject*>::iterator it; 
for(it=nodeSons.begin(); it != nodeSons.end(); ++it)
     listOfLectures.insert(**it); 
```

我假设 nodeSons 是一个指向主题的指针列表。这意味着您必须取消引用迭代器两次。

# fullcalendar - 可以使用 FullCalendar 从 Google 日历返回所有事件吗？

> ID：13111258
> 
> 赞同：1
> 
> 时间：2012-10-28T17:32:50.517
> 
> 标签：fullcalendar

FullCalendar 的 clientEvents 方法仅返回日历当前页面上显示的事件。有没有办法从 Google 日历 中获取包含*所有*事件的数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:25:07.443

行。很可能有一种“更好”的方法可以做到这一点，但我将分享一个我想出的解决方法，它似乎可以完成工作。

在 fullcalendar.js 文件中有一个名为 fetchEvents 的函数。该函数的前两行设置变量 rangeStart 和 rangeEnd。只需使用定义所需范围的日期对象重置这些变量。

# java - Java：全局更新对象引用

> ID：13111265
> 
> 赞同：2
> 
> 时间：2012-10-28T17:33:27.127
> 
> 标签：java, object, pointers, reference

我想全局更新对对象的引用（与[更新对象时更新对象的所有引用（对引用的引用）](https://stackoverflow.com/questions/8882406/update-all-references-to-an-object-when-the-object-is-updatedreference-to-a-ref)几乎相同的问题）。

我有以下代码结构：

```
class Triangle {
    Vertex pos[];
    //...
}

ArrayList<Vertex> vertices;

ArrayList<Triangle> triangles;

// Load triangles from file. After all triangles are loaded,
// fill the vertices list with all vertices of all triangles. 
```

正如您在代码示例中看到的那样，加载了第一个三角形。我的一些附加算法只需要所有顶点的列表。因此，为了提高性能，所有三角形的所有顶点都插入到顶点列表中，并且算法只获取列表。

所以可以说我有三角形`T1(a,b,c)`，`T2(d,e,f)`和`T3(e,g,h)`。顶点包含 then `[a,b,c,d,e,f,g,h]`。

在一种算法中，我需要用另一个顶点替换一个顶点。例如`e`被删除并替换为`a`.

通常，您将使用以下代码执行此操作以获取更新的Triangles`T1(a,b,c)`和：`T2(d,a,f)``T3(a,g,h)`

```
for (Triangle t : triangles) {
    for (int i=0; i<3; i++) {
        if (t.pos[i] == e)
            t.pos[i] = a;
    }
} 
```

是否有另一种方法可以有效地更新所有指向`e`的引用，以便引用的新目标是`a`. 例如，不要使用循环并遍历所有三角形（效率不高），这样的调用会很有用：

```
Java.updateReferences(e,a); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:45:45.463

在我看来，顶点类应该只是可变的，你应该改变它的坐标：

```
e.setCoordinates(a.getCoordinates()); 
```

这样，所有对 e 的引用都会自动获取新坐标。如果这不是一个选项，也许您应该将 Vertex 对象包装成一个`MutableVertex`对象，并使三角形对象和顶点列表包含`MutableVertex`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:39:48.963

您可以有一个“智能”列表实现，它可以即时查找顶点。例如，它可能有

> int size() { return triangles.size() * 3; }
> 
> 顶点 get(int i) {return triangles.get( i / 3 ).getVertex(i % 3); }

或类似的东西。考虑扩展 java.util.AbstractList。

# objective-c - 移出视图时无法将文本对象放回 xib

> ID：13111271
> 
> 赞同：0
> 
> 时间：2012-10-28T17:34:17.053
> 
> 标签：objective-c, ios, xcode, xib

这可能听起来很基本，但我只使用了带有故事板的 xcode，我将一个文本框从 xib 上移开，现在我想把它放回视图上，它被左上角的 ax 框包围，不会再继续观点，我在这里缺少什么基本步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T22:19:45.260

听起来您正试图在 iOS 环境中放置一个 OSX 对象。确保您选择了正确的库。

# expressionengine - ExpressionEngine 模板中的高内存使用率

> ID：13111275
> 
> 赞同：5
> 
> 时间：2012-10-28T17:34:49.610
> 
> 标签：expressionengine

我在安装 ExpressionEngine v2.5.3 时遇到了问题，我认为内存使用率很高。这是最近的 EE1 - EE2 升级，如果有影响的话。

此项目的空模板使用 10MB 内存。我在另一个 v2.5.3 项目上进行了测试，那里有一个空页面使用 2MB 内存。我在普通模板上看到 30+MB 的使用量，并且浏览器经常失去与服务器的连接。

是否是插件导致内存使用量增加？向后跟踪的最佳方法是什么？

此次升级后，安装肯定会正常运行。

* * *

模板调试

```
(0.000011 / 9.01MB) - Begin Template Processing -
(0.000172 / 9.01MB) URI: test
(0.000185 / 9.01MB) Path.php Template: /
(0.000199 / 9.01MB) Retrieving Template
(0.000210 / 9.01MB) Parsing Template URI
(0.002112 / 9.02MB) Template Group Found: test
(0.002166 / 9.02MB) Retrieving Template from Database: test/index
(0.003599 / 9.02MB) Template Found
(0.003690 / 9.02MB) Template Type: webpage
(0.003711 / 9.02MB) Parsing Site Variables
(0.003767 / 9.02MB) Snippets (Keys): structure:is:page|structure:is:listing|structure:is:listing:parent|structure:page:entry_id|structure:page:template_id|structure:page:title|structure:page:slug|structure:page:uri|structure:page:url|structure:page:channel|structure:page:channel_short_name|structure:parent:entry_id|structure:parent:title|structure:parent:slug|structure:parent:uri|structure:parent:url|structure:parent:child_ids|structure:parent:channel|structure:parent:channel_short_name|structure:top:entry_id|structure:top:title|structure:top:slug|structure:top:uri|structure:top:url|structure:child_listing:channel_id|structure:child_listing:short_name|structure:freebie:entry_id|structure:child_ids|structure:sibling_ids|structure_1|structure_2|structure_3|structure_4|structure_5|structure_6|structure_7|structure_8|structure_9|structure_10|structure_last_segment|site_id|site_label|site_short_name|last_segment
(0.003784 / 9.02MB) Snippets (Values): FALSE||||||||||||||||||||||test|/test/|/test/||||||test||||||||||test|1|Ranch|default_site|test
(0.003926 / 9.02MB) Parse Date Format String Constants
(0.003943 / 9.02MB) Parse Current Time Variables
(0.003968 / 9.02MB) Parsing Segment, Embed, and Global Vars Conditionals
(0.007698 / 9.11MB) - Beginning Tag Processing -
(0.007719 / 9.11MB) - End Tag Processing -
(0.008645 / 9.12MB) Calling Extension Class/Method: Structure_ext/template_post_parse
(0.008789 / 9.11MB) - End Template Processing -
(0.008803 / 9.11MB) Parse Global Variables
(0.009574 / 9.11MB) Template Parsing Finished
Memory Usage: 10,163,144 bytes 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T18:44:04.963

不同版本的 php，以及不同的 php 实现方式，例如：mod_php 与 fastcgi，以及 php 本身启用的不同功能会导致不同级别的内存使用。

要测试只执行 php 而不是在 EE 的模板引擎中执行的内存使用情况，请尝试以下代码。

```
<?php
    function echo_memory_usage() {
        $mem_usage = memory_get_usage(true);

        if ($mem_usage < 1024)
            echo $mem_usage." bytes";
        elseif ($mem_usage < 1048576)
            echo round($mem_usage/1024,2)." kilobytes";
        else
            echo round($mem_usage/1048576,2)." megabytes";

        echo "<br/>";
    }
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T17:59:48.317

您可以使用 Graphite 插件快速查明瓶颈：

[https://github.com/joelbradbury/Graphite.ee_addon](https://github.com/joelbradbury/Graphite.ee_addon)

我发现 Graphite 本身确实可以减慢您的页面速度，但是如果您可以加载它，那就太棒了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-28T18:48:00.023

从一个空模板开始，打开模板调试，是一个好的开始，它消除了任何标签导致高内存使用的机会。

您的 2Mb 使用安装和当前 10Mb 使用安装之间是否有任何不同的设置或附加设置？由于消除了模板标签，您可能希望查看可能会增加开销的附加组件，特别是扩展。随意发布您在此处安装的附加组件。

此外，禁用跟踪并将模板另存为文件可能会为您节省一些内存。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T16:12:58.713

我的问题的答案似乎是~9MB 是 EE 安装上空白模板的正常起始级别。

以 2MB 开始的模板位于启用了 APC 字节码缓存的 EngineHosting VPS/VSC 帐户上，因此存在数量差异。

# regex - 匹配不以字符串开头的字符串

> ID：13111276
> 
> 赞同：0
> 
> 时间：2012-10-28T17:35:04.633
> 
> 标签：regex, apache2

我正在尝试使用`regex`仅匹配不以其他字符串开头的字符串。据我所知以及 Stack Overflow 上的其他[一些](https://stackoverflow.com/questions/2116328/regexp-matching-string-not-starting-with-my)[问题](https://stackoverflow.com/questions/899422/regular-expression-for-a-string-that-does-not-start-with-a-sequence)，我应该使用否定的前瞻性断言。但由于某种原因，它似乎不起作用。考虑以下三个字符串：

```
/match.jpg
match.png
excludedpath/no-match.gif 
```

我希望我的正则表达式模式只匹配前两个字符串，因为最后一个字符串以`excludepath/`. 我尝试过的是以下内容：

```
(?!excludedpath\/)(.*)\.(gif|jpg|png)$ 
```

我想在 Apache 的重写规则中使用这个正则表达式模式。基本上我想简单地加载所有图像（带有这三个扩展名），除非它们的格式为`http://example.com/excludedpath/some-image.jpg`：

```
RewriteCond %{REQUEST_FILENAME} (?!excludedpath\/)(.*)\.(gif|jpg|png)$
RewriteRule ^(.*)$ $1 [L]

RewriteCond "/my/path/to/application/%{REQUEST_URI}" !-f
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

任何人都可以告诉我为什么它仍然匹配所有三个字符串：[这个链接](http://rubular.com/r/V0bY4bAJCq)以及如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:38:02.990

这是因为您不需要先行查看字符串的开头。只需添加另一个锚点：

```
^(?!excludedpath\/)(.*)\.(gif|jpg|png)$ 
```

否则，引擎当然会在第一个字符处匹配失败（因为前瞻启动），但它会很乐意尝试从第二个字符匹配。当然`xcludedpath...`也不会引发负面的前瞻性。

由于您的 rubular 示例的最后一个字符串以斜杠开头，因此如果您想排除这两个变体，您可以在前瞻中添加一个可选的斜杠：

```
^(?!\/?excludedpath\/)(.*)\.(gif|jpg|png)$ 
```

# javascript - Google Chart API：更改悬停图例的颜色

> ID：13111281
> 
> 赞同：3
> 
> 时间：2012-10-28T17:35:25.643
> 
> 标签：javascript, css, svg, google-api, google-visualization

所以我有一个[ColumnChart](https://developers.google.com/chart/interactive/docs/gallery/columnchart)并且其中一个内置功能是您可以将鼠标悬停在图表图例中的一个项目（所谓的类别）上，并且您可以在图表中的相应列周围获得一些高亮边框。

现在我的图表中有许多列和类别，并且很难看到突出显示的系列/类别，因为默认行为仅在列周围显示 1px 灰色边框。我的列只有几个像素宽度，我仍然需要区分 10 个不同的类别（=颜色）。所以只选择非常浅的颜色（边界容易发现的地方）是没有选择的。我发现没有办法改变：

1.  高亮边框的样式（主要是颜色）**或**
2.  在图例中选择相应类别时的列颜色（填充颜色）。

是否有一些属性可以传递给`draw()`我的图表调用以更改突出显示？我是否必须手动覆盖某些事件/方法？

高度赞赏帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T14:15:41.803

过去我使用了一些 CSS hack 来更改生成的 SVG 的一些属性（路径、矩形等），您可以使用高级选择器，也许您可​​以实现您想要的。我创建了一个非常快速且错误的示例，但也许它会为您指明正确的方向。

例如：

```
div.google_chart svg g g g g rect { 
            stroke-width:0px; fill:red; 
            } 
```

希望能帮助到你。

# asp.net-mvc-3 - 如何发布列表然后在我的控制器中访问它？

> ID：13111284
> 
> 赞同：0
> 
> 时间：2012-10-28T17:35:31.650
> 
> 标签：asp.net-mvc-3

我像这样在我的模型中创建了一个列表属性

```
public virtual List<String> listOfDays { get; set; } 
```

然后我将其转换并存储在列表中，如下所示：

```
for (int i = 0; i < 30 i++)
{
            var enrollment = new Enrollment();
            enrollment.StudentID = id;
            enrollment.listOfDays = searchString.ToList(); 
            db.Enrollments.Add(enrollment);
            db.SaveChanges();
} 
```

我在这里放了一个断点`enrollment.listOfDays = searchString.ToList();`……一切都很好。我看到转换已执行，我可以看到 listOfDays 中的值。

所以我想我会在我的数据库中找到一个名为 listOfDays 的列，因为我首先编写代码但该属性不存在。

然后我想我会尝试像这样访问它......

```
var classdays = from e in db.Enrollments where e.StudentID == id select e.listOfDays;

var days = classdays.ToList(); 
//here I get an error message about this not being supported in Linq. 
```

问题：

*   为什么您认为该属性不在数据库中？
*   如何将此数组发布到我的模型，然后在控制器中访问它？

谢谢你的帮助。

感谢德克尔：[http ://forums.asp.net/members/Decker%20Dong%20-%20MSFT.aspx](http://forums.asp.net/members/Decker%20Dong%20-%20MSFT.aspx)

以下是它的工作原理：

在这里使用表单集合...

在 [HttpPost]…</p>

私人无效更新（FormCollection formCollection，int id）

for (int sc = 0; sc < theSelectedCourses.Count(); sc++) { var registration = new Enrollment(); 注册.CourseID = Convert.ToInt32(theSelectedCourses[sc]); 注册.StudentID = id; 注册.listOfDays = formCollection["searchString"] ;//将此绑定为字符串，而不是列表或数组。

然后在 [HttpGet]…</p>

私人无效PopulateAssignedenrolledData（学生学生，int id）{

var dayList = from e in db.Enrollments where e.StudentID == id select e;

var days = dayList.ToList(); if (days.Count > 0) { string dl = days.FirstOrDefault().listOfDays; string[] listofdays = dl.Split(','); ViewBag.classDay = listofdays.ToList(); }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:29:15.413

感谢德克尔： [http ://forums.asp.net/members/Decker%20Dong%20-%20MSFT.aspx](http://forums.asp.net/members/Decker%20Dong%20-%20MSFT.aspx)

以下是它的工作原理：

在这里使用表单集合...

在 [HttpPost]…</p>

私人无效更新（FormCollection formCollection，int id）

for (int sc = 0; sc < theSelectedCourses.Count(); sc++) { var registration = new Enrollment(); 注册.CourseID = Convert.ToInt32(theSelectedCourses[sc]); 注册.StudentID = id; 注册.listOfDays = formCollection["searchString"] ;//将此绑定为字符串，而不是列表或数组。

然后在 [HttpGet]…</p>

私人无效PopulateAssignedenrolledData（学生学生，int id）{

var dayList = from e in db.Enrollments where e.StudentID == id select e;

var days = dayList.ToList(); if (days.Count > 0) { string dl = days.FirstOrDefault().listOfDays; string[] listofdays = dl.Split(','); ViewBag.classDay = listofdays.ToList(); }

# php - PHP 选择框...选择后需要帮助（yii）

> ID：13111288
> 
> 赞同：0
> 
> 时间：2012-10-28T17:35:59.000
> 
> 标签：php, select, menu, yii

我正在使用在 YII 框架上运行的脚本......我有这个选择框，允许用户根据他们的国家查看内容。但是现在，当用户选择他们的国家时，在选择之后，它只显示国家名称......而我想要的是，在用户选择他们的国家之后......它仍然必须显示选择框，但是有列表顶部的选定国家/地区。我已经尝试了很多东西，但我对此还是很陌生。

```
<?php if ( $_country == '' ) { ?>
<select onchange="changeCountry(this)" name="country" id="country">
<?php if ( count ($c) != 0 ) { ?>
<?php if ( $_country == NULL ) ?>
<?php foreach ($c as $id => $val) { ?>
<option<?php if ($id == $countryId) {?> selected="selected"<?php } ?> value="<?php echo mbCoreFunctions::to_seo_ad_name ($val, $id) ?>"><?php echo $val; ?></option>
<?php } ?>
<?php } ?>
</select>
<?php } else { ?>
<span class="countryName"><?php echo $countryName; ?></span>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:06:03.433

我没有尝试，但以下应该可以

```
<select onchange="changeCountry(this)" name="country" id="country">
    <?php foreach ($c as $id => $val) { ?>
    <option<?php if ($id == $countryId) {?> selected="selected"<?php } ?> value="<?php echo mbCoreFunctions::to_seo_ad_name ($val, $id) ?>"><?php echo $val; ?></option>
    <?php } ?>
</select> 
```

# objective-c - 隐藏 UITableView 标题部分

> ID：13111289
> 
> 赞同：-1
> 
> 时间：2012-10-28T17:36:00.590
> 
> 标签：objective-c, ios

我正在使用以下代码来隐藏视图以及根据 viewWillAppear 中的条件由视图占用的空间：

```
- (void)viewWillAppear:(BOOL)animated {

    Data* data = [Data shared];

    if (data.something == 0) {

        CGRect frame = self.tableView.tableHeaderView.frame;
        frame.size.height = 0;
        self.tableView.tableHeaderView.frame = frame;

        self.tableView.tableHeaderView.hidden = YES;

    } else {

        CGRect frame = self.tableView.tableHeaderView.frame;
        frame.size.height = 44;
        self.tableView.tableHeaderView.frame = frame;

        self.tableView.tableHeaderView.hidden = NO;

    }

} 
```

上面的代码有效，但我很确定这不是正确的方法。我试图将 tableHeaderView 设置为 nil，但是一旦调用代码，headerView 就会消失，直到 UITableView 被销毁（我想我可以使用 IBOutlet 来修复它到 tableHeader，但听起来也不对。

UPDATE1：再试一次，但代码不起作用：

```
- (CGFloat)tableView:(UITableView*)tableView heightForHeaderInSection:(NSInteger)section {
   self.tableView.tableHeaderView.hidden = YES;
   return 0; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T01:51:49.853

数据源方法实际上与与表视图的属性`tableView:heightForHeaderInSection:`关联的视图无关。`tableViewHeader`这里有两种不同类型的标题，*一种*位于 tableView 顶部的标题，可以在其中放置搜索栏之类的东西，而*多个*标题可以在表格视图中的每个部分出现一个。

据我所知，`tableViewHeader`视图通常在 nib 文件中配置，并且我不知道表视图调用任何允许对其进行任何配置的数据源方法，因此您必须手动进行。坦率地说，如果您的代码有效，那将是一个很好的方法。隐藏它会使表格视图仍然像它在那里一样......完全删除它会使它无法取回，因为它被释放了。

（但是，正如您所说，您可以使用指向标题视图的 IBOutlet，只要您将其设置为强引用，然后您可以稍后以某种方式将其重新插入表中。......嗯，虽然如何您将视图添加到表格视图的滚动视图中，并正确定位它，可能只是烦人。）

我唯一的建议是将帧高度设置为零，这样你就可以获得一个很好的过渡效果，比如[animateWithDuration](https://developer.apple.com/library/ios/documentation/uikit/reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/clm/UIView/animateWithDuration%3aanimations%3acompletion%3a)。但是，是的，我会说你已经找到了最好的方法。

编辑：

代码，你说？我认为这是一个挑战:)

```
- (void)setTableViewHeaderHidden:(BOOL)hide
{

    // Don't want to muck things up if we are mid an animation.
    if (self.isAnimatingHeader) {
        return;
    }

    // This is our IBOutlet property, I am just saving a bit of typing.
    UIView *theHeader = self.theHeaderView;

    if (hide) {

        // Save the original height into the tag, should only be done once.
        if (!theHeader.tag) {
            theHeader.tag = theHeader.frame.size.height;
        }

        // Transform and hide
        if (theHeader.frame.size.height > 0) {

            self.isAnimatingHeader = YES;

            // New frame...
            CGRect frame = theHeader.frame;
            frame.size.height = 0;

            // Figure out some offsets here so we prevent jumping...
            CGPoint originalOffset = self.tableView.contentOffset;

            CGPoint animOffset = originalOffset;
            animOffset.y += MAX(0, theHeader.tag - animOffset.y);

            CGPoint newOffset = originalOffset;
            newOffset.y = MAX(0, newOffset.y - theHeader.tag);

            // Perform the animation
            [UIView animateWithDuration:0.35
                                  delay:0.0
                                options: UIViewAnimationCurveEaseOut
                             animations:^{
                                 theHeader.frame = frame;
                                 self.tableView.contentOffset = animOffset;
                             }
                             completion:^(BOOL finished){
                                 if (finished) {

                                     // Hide the header
                                     self.tableView.tableHeaderView = nil;
                                     theHeader.hidden = YES;

                                     // Shift the content offset so we don't get a jump
                                     self.tableView.contentOffset = newOffset;

                                     // Done animating.
                                     self.isAnimatingHeader = NO;

                                 }
                             }
             ];

        }

    } else {

        // Show and transform
        if (theHeader.frame.size.height < theHeader.tag) {

            self.isAnimatingHeader = YES;

            // Set the frame to the original before we transform, so that the tableview corrects the cell positions when we re-add it.
            CGRect originalFrame = theHeader.frame;
            originalFrame.size.height = theHeader.tag;
            theHeader.frame = originalFrame;

            // Show before we transform so that you can see it happen
            self.tableView.tableHeaderView = theHeader;
            theHeader.hidden = NO;

            // Figure out some offsets so we don't get the table jumping...
            CGPoint originalOffset = self.tableView.contentOffset;

            CGPoint startOffset = originalOffset;
            startOffset.y += theHeader.tag;
            self.tableView.contentOffset = startOffset; // Correct for the view insertion right off the bat

            // Now, I don't know if you want the top header to animate in or not. If you think about it, you only *need* to animate the header *out* because the user might be looking at it. I figure only animate it in if the user is already scrolled to the top, but hey, this is open to customization and personal preference.

            if (self.animateInTopHeader && originalOffset.y == 0) {

                CGPoint animOffset = originalOffset;

                // Perform the animation
                [UIView animateWithDuration:0.35
                                      delay:0.0
                                    options: UIViewAnimationCurveEaseIn
                                 animations:^{
                                     self.tableView.contentOffset = animOffset;

                                 }
                                 completion:^(BOOL finished){
                                     // Done animating.
                                     self.isAnimatingHeader = NO;
                                 }
                 ];

            } else {
                self.isAnimatingHeader = NO;
            }

        }

    }
} 
```

在 Xcode 附带的表格视图模板中构建了它。只是为了把它放在一起，我使用了一个`UILongPressGestureRecognizer`指向这个方法的选择器出口：

```
- (IBAction)longPress:(UIGestureRecognizer *)sender
{
    if (sender.state != UIGestureRecognizerStateBegan) {
        return;
    }
    if (self.hidingHeader) {
        self.hidingHeader = NO;
        [self setTableViewHeaderHidden:NO];
    } else {
        self.hidingHeader = YES;
        [self setTableViewHeaderHidden:YES];
    }

} 
```

而且，我将这些添加到我的标题中：

```
@property (strong, nonatomic) IBOutlet UIView *theHeaderView;
@property (nonatomic)         BOOL                       hidingHeader;
@property (nonatomic)         BOOL                       isAnimatingHeader;
@property (nonatomic)         BOOL                       animateInTopHeader;

- (IBAction)longPress:(id)sender; 
```

无论如何，它工作得很好。我确实发现，您肯定必须取消表格视图对标题视图的引用，否则它不会消失，并且表格视图将根据标题框架的高度移动单元格的位置被分配回其标题属性。此外，您必须通过 IBOutlet 保持对标题的强引用，否则当您取消表视图对标题的引用时，它会被丢弃。

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T18:59:03.377

代替，

```
if (1 == 1) {
    CGRect frame = self.viewHeader.frame;
    frame.size.height = 0;
    self.viewHeader.frame = frame;

    self.viewHeader.hidden = YES;
} 
```

将其用作，

```
if (1 == 1) {
    self.viewHeader.hidden = YES;
} 
```

如果您不再想要视图而不仅仅是隐藏，请使用`[self.viewHeader removeFromSuperview];` And 如果您想在删除后添加它`[self.view addSubview:self.viewHeader];`所有这些取决于您的要求。

**更新：**

例如：-

```
if (data.something == 0) {
   //set frame1 as frame without tableHeaderView
   self.tableView.frame = frame1;
   self.tableView.tableHeaderView.hidden = YES;
} else {
   //set frame2 as frame with tableHeaderView
   self.tableView.frame = frame2;
   self.tableView.tableHeaderView.hidden = NO;
} 
```

或者，

```
if (data.something == 0) {
   //set frame1 as frame without tableHeaderView
   self.tableView.frame = frame1;
   self.tableView.tableHeaderView = nil;
} else {
   //set frame2 as frame with tableHeaderView
   self.tableView.frame = frame2;
   self.tableView.tableHeaderView = self.headerView; //assuming that self.headerview is the tableHeaderView created while creating the tableview
} 
```

**Update2：**这是一个非常简单的动画块版本。

```
if (data.something == 0) {

    [UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationCurveEaseOut
                     animations:^{
                         //set frame1 as frame without tableHeaderView
                         self.tableView.frame = frame1;
                         self.tableView.tableHeaderView.hidden = YES; // or self.tableView.tableHeaderView = nil;

                     }
                     completion:^(BOOL finished){
                         //if required keep self.tableView.frame = frame1;
                     }
     ];

} else {
    [UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationCurveEaseIn
                     animations:^{
                         //set frame2 as frame with tableHeaderView
                         self.tableView.frame = frame2;
                         self.tableView.tableHeaderView.hidden = NO;// or self.tableView.tableHeaderView = self.headerView;
                     }
                     completion:^(BOOL finished){
                         //if required keep self.tableView.frame = frame2;
                     }];
} 
```

# qt - 使用 Qt 和 OpenGL 显示三角形

> ID：13111291
> 
> 赞同：2
> 
> 时间：2012-10-28T17:36:18.437
> 
> 标签：qt, opengl

我试图用 OpenGL 和 Qt 显示一个三角形，但只得到一个黑色窗口。我究竟做错了什么？

glwidget.h:

```
#pragma once
#include <QGLWidget>

class GLWidget : public QGLWidget {
public:
    GLWidget(QWidget *parent = 0);
   ~GLWidget();
   QSize sizeHint() const {  return QSize(400, 400); }

protected:
    void initializeGL();
    void paintGL();
    void resizeGL(int width, int height);
}; 
```

glwidget.cpp:

```
#include "glwidget.h"

GLWidget::GLWidget(QWidget *parent) : QGLWidget(parent) {}

GLWidget::~GLWidget(){ }

void GLWidget::initializeGL() { }

void GLWidget::paintGL()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();
    glTranslatef(-1.5f,0.0f,-6.0f);

    glBegin(GL_TRIANGLES);
     glVertex3f( 0.0f, 1.0f, 0.0f);
     glVertex3f(-1.0f,-1.0f, 0.0f);
     glVertex3f( 1.0f,-1.0f, 0.0f);
    glEnd(); 
}

void GLWidget::resizeGL(int w, int h)
{
    QGLWidget::resize(w,h);
} 
```

主.cpp：

```
#include <QApplication>
#include "glwidget.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    GLWidget glWidget;
    glWidget.show();
    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T17:44:52.497

您必须在paintGL 成员函数的开头设置视口和投影。把它放在你的paintGL的开头：

```
QSize viewport_size = size();
glViewport(0, 0, viewport_size.width(), viewport_size.height());

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glFrustum(-1, 1, -1, 1, 5, 7); // near and far match your triangle Z distance

glMatrixMode(GL_MODELVIEW); 
```

此外，如果窗口是双缓冲的，则必须在绘制后交换缓冲区。无论设置

```
setAutoBufferSwap(true); 
```

在构造函数中，在paintGL返回后进行交换，或者添加

```
swapBuffers(); 
```

在paintGL结束时。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-15T07:22:08.017

三角形是变形的形式

```
glTranslatef(-0.5f,0.0f, 0.0f);

glColor3f(1.0f, 0.0f, 0.0f);
glBegin(GL_TRIANGLES);
 glVertex3f( 0.0f, 0.2f, 0.0f);
 glVertex3f(-0.2f,-0.2f, 0.0f);
 glVertex3f( 0.2f,-0.2f, 0.0f);
glEnd(); 
```

# php - php的简单电话号码正则表达式

> ID：13111295
> 
> 赞同：0
> 
> 时间：2012-10-28T17:36:44.037
> 
> 标签：php, regex, preg-match

我一直在寻找一个简单的电话号码正则表达式，它只匹配这种格式：(XXX) XXX-XXXX <---需要括号和后面的空格

对于我的一生，我无法弄清楚为什么这行不通（这是我自己尝试制作并且已经修改了几个小时的一个）：

```
^[\(0-9\){3} [0-9]{3}-[0-9]{4}$ 
```

我在网上到处寻找具有特定格式匹配的正则表达式，但无济于事。请帮忙？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T17:38:47.330

以下正则表达式有效

```
^\(\d{3}\) \d{3}-\d{4}$

^ = start of line
\( = matches parenthesis open
\d = digit (0-9)
\) = matches parenthesis close 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:39:13.180

这是一个工作的

```
/^\(\d{3}\) \d{3}-\d{4}\s$/ 
```

你的问题：

要匹配数字，只需使用`\d`or `[0-9]`（需要方括号，您在第一次出现时就忘记了它们）匹配括号使用`\(`and `\)`。它们必须被转义，否则它们将被解释为匹配并且您的正则表达式将无法编译

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T17:40:51.803

您遇到的问题是：

1.  您需要使用反斜杠转义特殊字符（如括号），如下所示：`\(`
2.  开头有一个未闭合的方括号。

否则，你很好！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T17:40:35.437

`[]`定义字符类。例如“在这个单个字符位置，以下任何一个都可以匹配”。您的括号未对齐：

```
^[\(0-9\){3} [0-9]{3}-[0-9]{4}$
 ^---no matching closer 
```

例如

```
^[0-9]{3} [0-9]{3}-[0-9]{4}$ 
```

会更接近你想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-06T01:23:06.407

```
/(\(\d{3}+\)+ \d{3}+\-\d{4}+)/ (000) 000-0000

/(\d{3}+\-\d{3}+\-\d{4}+)/ 000-000-0000 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-09T00:52:46.703

已编辑`^\(?\d{3}\)?\s?\-?\d{3}\s?\-?\d{4}$`

在 PHP 适用于以下

(999) 999 9999

(999) 999-9999

(999) 999-9999

999 999 9999

999 999-9999

999-999-9999

# jsf - p:selectOneMenu 中的转换器

> ID：13111298
> 
> 赞同：1
> 
> 时间：2012-10-28T17:36:57.360
> 
> 标签：jsf, primefaces, converter, selectonemenu

我的转换器有问题 - 它停止工作并且什么也没发生。我有实体类“组”：

```
@Entity
@Table(name="users_group")
public class Group implements Serializable {

    private int id;
    private String name;
    private boolean active = true;
    private String code;
    private List<User> users = new ArrayList<User>();

    // getters, setters

    @Override
    public String toString() {
        return "Group.id="+getId();
    }

    @Override
    public boolean equals(Object obj){
        System.out.println("OBJ :"+obj);
        if(obj == null )return false;
        if(obj instanceof String){
            if(obj.toString().equals(this.toString())){
                return true;
            }
        }
        if(obj instanceof Group){
            Group objGroup = (Group) obj;
            if(objGroup.getId() == this.getId()){
                System.out.println("EUREKA! Found");
                return true;
            }

        }
        return false;
    }
} 
```

这是我的 jsf 视图代码：

```
<p:selectOneMenu id="group" value="#{priviligeMB.groupPrivilige.group}"  converter="#{groupConverter}" >  
                                <f:selectItems value="#{priviligeMB.groups}"  
                                    var="group" itemLabel="#{group.name}" itemValue="#{group}" />  
                    </p:selectOneMenu > 
```

当然还有 GroupConverter 类：

```
@Component("groupConverter")
public class GroupConverter implements Converter {

    @Autowired
    GroupService groupService;

    @Override
    public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2) {
        // arg2 is "Group.id=x" where x is just an id, for example "Group.id=2"
        try {
            System.out.println("getasObj: "+arg2);
            return groupService.getGroupById(Integer.parseInt(arg2.split("=")[1]));
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    @Override
    public String getAsString(FacesContext arg0, UIComponent arg1, Object arg2) {
       // arg2 is object with toString() method that prints: "Group.id=x"
        System.out.println("getAsString: "+arg2);
        return arg2.toString();
    }
} 
```

这是我的日志：

```
> getAsString: Group.id=1 
> getAsString: Group.id=2 
> Hibernate: SELECT locale.code from messages_locale locale left join users_user u sers on
> users.locale_id = locale.id where users.username =? 
> getasObj: Group.id=1 
> Hibernate: select group0_.id as id0_0_, group0_.active as
> active0_0_, group0_.co de as code0_0_, group0_.name as name0_0_ from
> users_group group0_ where group0_. id=? 
> OBJ :Group.id=1 EUREKA! Found
> OBJ :Group.id=1 EUREKA! Found 
> OBJ :Group.id=2 
```

之后……什么都没有发生！没有错误，没有操作，没有页面重新加载，没有消息......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T10:47:04.687

我遇到了类似的问题，终于解决了。

在这种情况下，您需要确保“ **getAsObject** ”返回的对象可以匹配 中的对象之一`"#{priviligeMB.groups}"`，这里“**匹配**”表示相同的对象。

# android - ACE如何修改TimeChart X轴上的缩放按钮行为

> ID：13111306
> 
> 赞同：2
> 
> 时间：2012-10-28T17:37:54.990
> 
> 标签：android, zooming, achartengine

我正在使用来自 achartengine 优秀库的 ChartFactory.getTimeChartView 方法。`renderer.setXAxisMin(OneWeekBefore);`我只显示最后一周的记录，允许用户使用属性向左平移以查看以前的记录。

我有 2 个问题：

a) 如何在 TimeChart 中允许 X 轴缩放？
尽管在 X 轴和 Y 轴上都启用了缩放，但我无法在 X 轴上进行缩放。我可能会以不适当的方式使用缩放和平移限制，但找不到什么/为什么。

b）如何改变缩放按钮的行为？
我想以 1:1 的比例更改缩放按钮的行为。按下此按钮，将显示整个图表，而不是仅显示上周。

这是缩放属性设置的一段代码：

```
 // ZOOM
    double[] panlimits = new double[] { XfirstRecord , maxdate, 0.0, Ymax * 1.2 };
    renderer.setZoomEnabled(enabledXzoom, YenabledYzoom);
    renderer.setZoomButtonsVisible(showZoomButtons);
    renderer.setZoomRate(ZoomRate);
    renderer.setPanLimits(panlimits);
    renderer.setZoomLimits(panlimits);

    renderer.setXAxisMin(OneWeekBefore); 
```

**检查丹的答案后的工作更新**如下，它适用于我：

```
 // ZOOM
        double[] panlimits = new double[] { XfirstRecord, now, 0.0, Ymax * 1.2 };
        renderer.setZoomEnabled(XenabledZoom, YenabledZoom);
        renderer.setZoomButtonsVisible(showZoomButtons);
        renderer.setZoomRate(ZoomRate);
        renderer.setPanLimits(panlimits);
        renderer.setZoomLimits(panlimits);

        // SHOW ONLY last WEEK even after Zoom reset
        renderer.setXAxisMin(OneWeekBefore);
        renderer.setInitialRange(new double[] {OneWeekBefore, now, 0.0, Ymax * 1.2}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:27:46.610

对于第一个问题，平移和缩放限制应该类似于：

```
// please note that I am using the Java naming of variables
new double[] { oneWeekBefore, today, 0, yMax * 1.2 }; 
```

捏缩放有效吗？

对于第二个问题，使用：

```
renderer.setInitialRange(new double[] {oneWeekBefore, today, 0, yMax * 1.2}); 
```

# java - 简单的 Java Threaded TCP Server 线程

> ID：13111308
> 
> 赞同：0
> 
> 时间：2012-10-28T17:38:39.353
> 
> 标签：java, multithreading, networking, loops, tcp

```
/*main method*/

Server server = new Server(tcpPort);
new Thread(server).start();

try {

  Thread.sleep(1000*60); /* 60 seconds*/
} catch (InterruptedException e) {
  e.printStackTrace();
}

server.stop;
... 
```

这是我写的代码。启动一个服务器线程，并运行 60 秒。如何将其更改为无限运行，当用户通过 BufferedReader 或其他方式输入 Enter 时结束。

我试过了

```
while(!input.equals("")) { /* just pseudocoded here...*/
Thread.sleep(10);   
} 
```

但这将使我的服务器停止正常工作。我的客户甚至不再连接到它。我是否犯了设计错误，或者这是一个容易解决的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:06:28.813

试试我写的这个基本的聊天服务器。该服务器只是保持循环运行并将客户端发送的消息广播到与该服务器关联的所有其他客户端。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.ArrayList;

public class Server {

    // ///----------------------------------------Instance Variable Fields
    ServerSocket ss = null;
    Socket incoming = null;

    // ///----------------------------------------Instance Variable Fields

    // ///---------------------------------------- static Variable Fields
    public static ArrayList<Socket> socList = new ArrayList<Socket>();

    // ///---------------------------------------- static Variable Fields

    public void go() {

        try {

            ss = new ServerSocket(25005);

            while (true) {

                incoming = ss.accept();
                socList.add(incoming);
                System.out.println("Incoming: " + incoming);
                new Thread(new ClientHandleKaro(incoming)).start();

            }

        } catch (IOException e) {

            e.printStackTrace();
        } finally {

            try {
                ss.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }

    class ClientHandleKaro implements Runnable {

        InputStream is = null;
        OutputStream os = null;
        InputStreamReader isr = null;
        BufferedReader br = null;
        PrintWriter pw = null;
        boolean isDone = false;

        Socket sInThread = null;

        public ClientHandleKaro(Socket sxxx) {

            this.sInThread = sxxx;

        }

        @Override
        public void run() {

            if (sInThread.isConnected()) {

                System.out.println("Welcamu Clienta");
                System.out.println(socList);
            }

            try {
                is = sInThread.getInputStream();
                System.out.println("IS: " + is);
                isr = new InputStreamReader(is);
                br = new BufferedReader(isr);

                os = sInThread.getOutputStream();
                pw = new PrintWriter(os, true);

                String s = new String();

                while ((!isDone) && (s = br.readLine()) != null) {

                    String[] asx = s.split("-");
                    System.out.println("On Console: " + s);

                    // pw.println(s);

                    Thread tx = new Thread(new ReplyKaroToClient(s,
                            this.sInThread));
                    tx.start();

                    if (asx[1].trim().equalsIgnoreCase("BYE")) {

                        System.out.println("I am inside Bye");
                        isDone = true;

                    }
                }
            } catch (IOException e) {

                System.out.println("Thanks for Chatting.....");
            } finally {

                try {
                    Thread tiku = new Thread(new ByeByeKarDo(sInThread));
                    tiku.start();
                    try {
                        tiku.join();
                    } catch (InterruptedException e) {

                        e.printStackTrace();
                    }

                    System.out.println("Accha to hum Chalte hain !!!");
                    System.out.println(socList);

                    br.close();
                    pw.close();
                    sInThread.close();

                } catch (IOException e) {

                }
            }

        }

    }

    class ReplyKaroToClient implements Runnable {

        public String mString;
        public Socket mSocket;

        public ReplyKaroToClient(String s, Socket sIn) {

            this.mString = s;
            this.mSocket = sIn;
        }

        @Override
        public void run() {

            for (Socket sRaW : socList) {

                if (mSocket.equals(sRaW)) {
                    System.out.println("Mai same hun");
                    continue;

                } else {
                    try {
                        new PrintWriter(sRaW.getOutputStream(), true)
                                .println(mString);
                    } catch (IOException e) {

                        System.out.println("Its in Catch");

                    }
                }
            }

        }

    }

    class ByeByeKarDo implements Runnable {

        Socket inCom;

        public ByeByeKarDo(Socket si) {

            this.inCom = si;
        }

        @Override
        public void run() {

            try {
                new PrintWriter(inCom.getOutputStream(), true)
                        .println("You have Logged Out of Server... Thanks for ur Visit");
            } catch (IOException e) {

                e.printStackTrace();
            }

        }

    }

    public static void main(String[] args) {

        new Server().go();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:56:39.443

Start with this SO thread: [How to create a basic Java Server?](https://stackoverflow.com/questions/2187626/how-to-create-a-basic-java-server) . It will give you an example how to write a very simple server.

Key thing to note there is the `serverSocket.accept()` . It will block - in other words it will WAIT forever for a client to connect, or it will fail in the case of some error. Once a client is connected, you will get a clientSocket that you can use to read what client wrote, and also write to it.

It is really a good starting point for understanding Java network programming. However, I recommend you read more about this topic. Something like this: [http://beej.us/guide/bgnet/](http://beej.us/guide/bgnet/)

# matlab - Matlab GUI 中的日历切换 (DateChooserPanel)

> ID：13111315
> 
> 赞同：1
> 
> 时间：2012-10-28T17:39:20.730
> 
> 标签：matlab, user-interface, calendar, switching

我有一个关于 Matlab GUI 的问题。我会尽力解释我到底需要什么帮助。我正在使用 GUIDE 构建 GUI，并且有一个包含 ~10 个名称的列表框。当我点击每个名字（个人）时，会出现一个日历，我可以在其中选择多个日期。每个人都有自己的日历，当您第一次单击他们的名字时会出现该日历。每个日历都是在 GUI 上的同一位置（坐标）创建的。选择列表框后，日历变得可见（创建），起初只有列表框在 GUI 上可见。

我想做的事情是能够根据我在列表框中单击的人名在每个日历之间切换。例如，单击“martin”显示他的日历，单击“joe”将他的日历放在前面等。所以基本上，我有大约 10 个日历我想在它们之间切换（而选定的日期不会随着每次切换而重置） .

我正在使用在 Matlab 中实现的 Jide 的 DateChooserPanel，因为它非常易于使用并且非常适合我的需求。以下代码生成一个日历并设置选择多个日期的能力并且完美运行：

```
com.mathworks.mwswing.MJUtilities.initJIDE;

jPanel = com.jidesoft.combobox.DateChooserPanel;
[hPanel,hContainer] = javacomponent(jPanel,[219,66,200,200],gcf);
jModel = hPanel.getSelectionModel;
jModel.setSelectionMode(jModel.MULTIPLE_INTERVAL_SELECTION); 
```

我可以用这条线得到选择的日期：

```
hPanel.getSelectionModel.getSelectedDates 
```

现在我被卡住了，因为我不知道如何在这些日历之间切换。我试图让他们掌握并以某种方式将那个人的日历放在其他人面前，但我找不到办法。

任何建议/帮助表示赞赏！

# cocoa - 以编程方式在表格视图中添加子视图不响应鼠标按下事件

> ID：13111317
> 
> 赞同：0
> 
> 时间：2012-10-28T17:39:39.903
> 
> 标签：cocoa, nstableview, nsview, mousedown

我有 3 个子类：一个 Block 类、一个 Row 类和一个 Table 类。都是 NSView 的子类。
我有一个用 IB 添加的表格，它以编程方式显示 8 行，每行显示 8 个块。我覆盖了 Block 中的 mouseDown: 方法以将背景颜色更改为红色，但它不起作用。不过，如果我使用 IB 直接在表格顶部添加一个块，它确实可以工作，所以我不明白为什么它在第一种情况下不起作用。

下面是 Block 和 Row 的实现代码（Table 的实现与 Row 的实现方式相同）：

```
//block.m

- (void)drawRect:(NSRect)dirtyRect
{
    [color set];
    [NSBezierPath fillRect:dirtyRect];
}

-(void)mouseDown:(NSEvent *)theEvent
{
    color = [NSColor redColor];
    checked = YES;
    [self setNeedsDisplay:YES];
}

//row.m

- (void)drawRect:(NSRect)dirtyRect
{

    [[NSColor blueColor] set];
    [NSBezierPath fillRect:dirtyRect];
    int x;
    for(x=0; x<8; x++){
    int margin = x*2;
    NSRect rect = NSMakeRect(0, 50*x+margin, 50, 50);
    Block *block = [[Block alloc] initWithFrame:rect];
    [self addSubview:block];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:58:14.580

您是否知道 NSTableView 将使用 NSCell 对象进行绘图，而不是 NSView？如果没有，请调查 NSCell - 使用它在 NSTable 中进行自定义绘图是可行的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:52:48.167

我理解了这个问题......因为 mouseDown 实现会导致块重绘，所以即使是它的超级视图，它也会调用 Table 的 drawRect: 方法，导致它在旧块之上绘制新块，所以它似乎永远不会改变颜色。所以我为表创建了一个名为 isFirstAppearance 的属性，最初设置为 YES，如果是，则表绘制行并将自身设置为 NO。

# actionscript-3 - AS3 做 3 个随机停止，它们从不相互相等

> ID：13111320
> 
> 赞同：0
> 
> 时间：2012-10-28T17:40:00.200
> 
> 标签：actionscript-3

我有 3 个movieclips，每个都有 7 个帧和播放不同图像的标签，我想随机停止每个，但永远不要让它们等于同一帧。我在想array.push 一旦它被调用，但我不知道该怎么做。所以到目前为止我有这个：

```
function startGame(event:MouseEvent)
{
    addChild(level6_mc);
    addChild(inGameNav_mc);
    level6_mc.gotoAndPlay(2);
    var timer = setTimeout(startAgain, 1000);
    startAgain();
}

// level 6
function startAgain()
{
    var randomNumber:Number= Math.floor(Math.random()*7);
    var door1 = level6_mc.door1_mc;
    var door2 = level6_mc.door2_mc;
    var door3 = level6_mc.door3_mc;
    door1.gotoAndStop(randomNumber);
    door2.gotoAndStop(randomNumber);
    door3.gotoAndStop(randomNumber);
} 
```

必须有一个简单的方法，我就是想不通。我一直在网上寻找解决方案，但每种方法都非常复杂。谁能帮我找到一个简单的解决方案，如果你告诉我使用数组，你可以举个例子。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:01:03.633

我会选择这样的方法：

```
function startGame(event:MouseEvent){
    addChild(level6_mc);
    addChild(inGameNav_mc);
    level6_mc.gotoAndPlay(2);
    var timer= setTimeout(startAgain, 1000);
    startAgain();
}

function startAgain(){
    var randomFrames:Array = getRandomFrames(3);
    var door1 = level6_mc.door1_mc;
    var door2 = level6_mc.door2_mc;
    var door3 = level6_mc.door3_mc;
    door1.gotoAndStop(randomFrames[0]);
    door2.gotoAndStop(randomFrames[1]);
    door3.gotoAndStop(randomFrames[2]);
}

/*
   Given input of 3, the return should be an array of integers randomly 
   chosen from the array defined by `frames`.  An example would be `[5,2,7]`
*/
function getRandomFrames(var $frameCount:Number):Array {
    var frames:Array = [1, 2, 3, 4, 5, 6, 7]
    var randomFrames:Array = new Array(Math.min($frameCount, frames.length));

    var pos:Number = 0;
    for (var i:int = 0; i < randomFrames.length; i++)
    {
        pos = int(Math.random() * frames.length);
        randomFrames[i] = frames.splice(pos, 1)[0];
    }
    return randomFrames
} 
```

我这台机器上没有Flash，所以无法测试。但是这个想法是你有一个帧号数组，1-7，你随机选择其中的 3 个作为你的停止帧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:08:17.767

由于它的帧数很少，您可以将帧拼接到数组中：

```
function startGame(event:MouseEvent){
        addChild(level6_mc);
        addChild(inGameNav_mc);
        level6_mc.gotoAndPlay(2);
        var timer= setTimeout(startAgain, 1000);
        startAgain();
    }

    //level 6
    function startAgain(){
            var door1 = level6_mc.door1_mc;
            var door2 = level6_mc.door2_mc;
            var door3 = level6_mc.door3_mc;
            var stopsAt:Array = [1,2,3,4,5,6];
            door1.gotoAndStop(stopsAt.splice(Math.random()*stopsAt.length, 1)[0]);
            door2.gotoAndStop(stopsAt.splice(Math.random()*stopsAt.length, 1)[0]);
            door3.gotoAndStop(stopsAt.splice(Math.random()*stopsAt.length, 1)[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:20:54.383

```
var prevNum:int = 0;

function startGame(event:MouseEvent)
{
addChild(level6_mc);
addChild(inGameNav_mc);
level6_mc.gotoAndPlay(2);
var timer = setTimeout(startAgain, 1000);
startAgain();
} 
```

// 6级

```
function startAgain()
{
var randomNumber:int= getRandomNumber(7,prevNum);
prevNum = randomNumber;
var door1 = level6_mc.door1_mc;
var door2 = level6_mc.door2_mc;
var door3 = level6_mc.door3_mc;
door1.gotoAndStop(randomNumber);
door2.gotoAndStop(randomNumber);
door3.gotoAndStop(randomNumber);
}

function getRandomNumber(length:int,previousNumber:int):int
{ 
    var currentNumber:int;
    do{

  currentNumber = Math.floor(1+Math.random()*length);

}while(currentNumber==previousNumber);

return currentNumber;
} 
```

# split - 在 Dart 中从左到右、从右到左比较字符串

> ID：13111321
> 
> 赞同：0
> 
> 时间：2012-10-28T17:40:09.490
> 
> 标签：split, compare, dart

我正在尝试检查字符串是否是回文。

例子：

雷达=雷达=真

iwant = tnawi = FALSE

任何示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:59:42.077

听起来你想检查一个单词是否是回文。有两种方法可以做到这一点。您可以检查单词是否与自身相反，或者您可以检查字符与它们应该匹配的位置。

Dart 的 String 还没有 reverse() 方法，所以第二种方法目前可能是最简单的：

```
bool isPanlindrome(String word) {
  for (int i = 0; i < word.length ~/ 2; i++) {
    if (word[i] != word[word.length - i - 1]) return false;
  }
  return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:31:49.613

正如大卫所说（但不是在 Dart 中？），你可以写：

```
bool isPanlindrome(String s) {
  return s == reverse(s);
}
String reverse(String s) {
  // null or empty
  if (s == null|| s.length == 0)
    return s;
  List<int> charCodes = new List<int>();
  for (int i = s.length-1; i>= 0; i-- )
    charCodes.addLast(s.charCodeAt(i)) ;
  return new String.fromCharCodes(charCodes);
} 
```

参见最近关于[reverse()的帖子](https://stackoverflow.com/questions/12982759/google-dart-dart-strrev-function/13002807#13002807)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:36:26.190

```
String reverse(String s) {
  var chars = s.splitChars();
  var len   = s.length - 1;
  var i     = 0;

  while (i < len) {
    var tmp = chars[i];
    chars[i] = chars[len];
    chars[len] = tmp;
    i++;
    len--;
  }

  return Strings.concatAll(chars);
}

void main() {
  var s = "dog";
  print(s);
  print(reverse(s));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-17T11:13:47.713

只需将 dart 函数用作

```
bool isPanlindrome(String input){
  return input == input.split('').reversed.join();
} 
```

# java - 在哪里验证字符串参数

> ID：13111323
> 
> 赞同：1
> 
> 时间：2012-10-28T17:40:21.790
> 
> 标签：java, string, validation, class

我有一个必须具有字符串 ID 属性的学生类，该属性必须经过验证。我不确定是在学生班级还是在我正在实施学生班级的班级中验证它。这有意义吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T17:46:29.267

假设 ID 是最终的且不可变的，那么一种方法是让 Student 构造函数抛出异常，可能`new IllegalArgumentException("Invalid student ID");`

您可以在 Student 类中另外提供静态方法，该方法验证字符串是否有效，以防您需要在不创建 Student 对象的情况下检查它。

但我认为，确定 ID 是否有效的逻辑应该在 Student 类中。

如果有（或将来可能有）不同类型的学生 ID，您也可以考虑抽象工厂模式，但这听起来有点矫枉过正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:47:56.657

如果学生内部已经有任何业务，请在内部使用验证，否则使用第二个

```
Class Student
{
 public boolean  validate ()
  {
   //some logic to validation
  }
} 
```

模型或控制器或动作内部

```
 public boolean  validate ()
  {
   //some logic to validation
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T17:55:02.357

One of the approach is to use validation object. For instance see the Validation approach uses in the Spring Framework. You create an object which implements the interface `Validator` with two methods: one to detect if the Validator can validate the instance to validate, and another one which validate it.

```
public class StudentValidator implements Validator<Student> {

  public boolean supports(Student student) {
   // ...
  }

  public void validate(Object target, Errors errors) {
   // ...
  }
} 
```

This approach leads to separation of the code of the object and the way to validate it, offering more flexibility when combining validator:

*   you can combine several Validator even if the class hierarchy is not respected (POJO principle).
*   when you need to validate field with data from other system (for instance a database), this approach avoid to mix database / persistence code in the POJO domain class.

Please see [the documentation of Spring about Validation](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#validation).

# ruby-on-rails - 使用 RSpec 测试密码长度验证

> ID：13111328
> 
> 赞同：9
> 
> 时间：2012-10-28T17:41:29.450
> 
> 标签：ruby-on-rails, validation, rspec, tdd

我正在编写一些单元测试以确保用户模型的密码长度不能小于 8 个字符。

我从一个用户模型开始：

```
class User < ActiveRecord::Base
  ...
  validates :password, :length =>{
    :minimum => 90,
    :too_short => "password is too short, must be at least %{count} characters"
  }, :on => :create

end 
```

还有一个 user_spec.rb 测试：

```
describe User do
  subject { FactoryGirl.build :user }

 its(:password) { should have_at_least(8).items }
end 
```

但是我意识到这实际上并没有测试我的验证，它只是测试我的工厂的密码 >= 8 个字符。

除了测试有效之外，有没有很好的方法来做到这一点？0-7个字符密码的方法？

我的理论是，如果我只测试 7 个字符并且有人不小心硬编码了 4 个字符的密码是可以的，这将通过验证，但并不是真正的预期。可能还有一些其他代码取决于密码超过 8 个字符（不太可能，但在其他情况下可能是真的），因此允许密码为 4 是不正确的。

在这种情况下，更改模型中密码验证的人不会知道他们做错了什么。

我只是想知道如何使用 TDD 很好地测试这种情况。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-28T22:07:54.797

使用[thinkbot](https://github.com/thoughtbot/shoulda-matchers/blob/v1.2.0/lib/shoulda/matchers/active_model/ensure_length_of_matcher.rb)的[shoulda](https://github.com/thoughtbot/shoulda-matchers) matchers 中的 ensure_length_of 匹配器，您可以这样做：

```
describe User do
  it { should validate_length_of(:password).is_at_least(8)
                                         .with_message(/password is too short/) }
end 
```

另请参阅：[如何使用 RSpec 在 Rails 中测试：包含验证](https://stackoverflow.com/questions/7415660/how-can-i-test-inclusion-validation-in-rails-3-using-rspec)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T18:30:24.473

我不知道这是否回答了您的问题，但我认为您可以通过以下方式安全：

```
class User < ActiveRecord::Base
  validates :password, :length => {:minimum => 8 }
end

describe User do
  it "validates password length" do
    FactoryGirl.build(:user, password: "1234567").should_not be_valid
    FactoryGirl.build(:user, password: "12345678").should be_valid
  end
end 
```

原因是，为了让这个测试通过 4 个字符的密码，有人必须设置一个验证规则，说 4 个字符可以，7 个不可以，但 8 个可以。不是偶然发生的事情。

# java - camel jetty-activemq 是否为每条消息创建新的 activemq 连接

> ID：13111329
> 
> 赞同：1
> 
> 时间：2012-10-28T17:41:33.947
> 
> 标签：java, jetty, activemq, apache-camel

我已经定义了如下骆驼码头-activemq 路线：

from("jetty:http://0.0.0.0:8087/url1").to("activemq:queue:queue1)

骆驼是否创建一个activemq连接，然后将该连接用于jetty接收到的所有消息，或者为每条消息创建一个activemq连接。

我计划为 activemq 使用池连接，因为我的消息每秒流入量非常高，我需要了解骆驼行为来定义最大连接池大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:54:16.420

发送消息时，ActiveMQ 组件以及 JMS 组件基于 Spring Framework 中的 JMSTemplate。

正如您所担心的，它会为每条消息创建并关闭一个连接+会话+生产者，这并不是最佳性能。

按照[activemq 组件文档](http://camel.apache.org/activemq#ActiveMQ-Usingconnectionpooling)中的建议，您应该使用池进行设置。然后你将重用连接/会话/生产者。

如果您打算仅将其用于此路由，您实际上可以只使用该池中的一个连接。

ActiveMQ 对JMSTemplate[的技巧和窍门做了一个总结。](http://activemq.apache.org/jmstemplate-gotchas.html)值得一读。

更新：关于与并发相关的连接数：

简而言之，连接是与代理的网络连接（“套接字”），在许多线程之间共享。您的每个线程仍将拥有自己的（池化）会话，该会话使用共享连接并同时运行。如果您有多个 ActiveMQ 代理并希望在它们之间进行负载平衡（假设 ActiveMQ 是瓶颈而不是您的应用程序），多连接仍然可能是一种增强功能。

```
failover:(ssl://host1:61616,ssl://host2:61616) 
```

也可能是，在实践中，通过使用一组有限的连接而不是一个连接，性能可能会在一定程度上有所提高，但您可能必须针对您的特定环境进行测试。

# performance - 在 Vim 中突出显示单词/行的性能

> ID：13111330
> 
> 赞同：2
> 
> 时间：2012-10-28T17:41:51.457
> 
> 标签：performance, vim, highlighting

我在 VimL 中有一组小函数，根据特定条件突出显示一行（或一个单词）。

您应该考虑函数的工作方式类似于拼写 ( `:set spell`)，在满足条件时加下划线。

然而，我发现，当突出显示的行数超过 75 条左右时，移动时会出现明显的滞后。无论是从一侧到另一侧，还是向上或向下。

我有一些默认情况下启用的便利`AutoCommands`，（例如，回显为什么突出显示该行）但即使所有这些都被禁用，只要我调用突出显示所有内容的函数，我就可以看出存在巨大的滞后.

这就是我用来突出一个词的方法：

```
call matchadd('MyCheck', '^\%'. line . 'l\_.\{-}\zs\k\+\k\@!\%>' . column . 'c') 
```

这就是我用来突出整行的

```
call matchadd('MyCheck', '\%' . line . 'l\n\@!') 
```

我用作确定滞后的参考的 75 数字只是一个参考，这对我来说是一个甜蜜点，但只是为了证明除此之外的大多数事情都会变得越来越糟糕。

我也使用`SpellBad`突出显示`MyCheck`，但严重怀疑这会导致任何问题。

我可以做些不同的事情来避免滞后吗？是`matchadd`最好的选择吗？

编辑：为了确保我的任何函数或代码都没有做奇怪的事情，我打开了一个 500 行的文件并这样做了：

```
highlight link MyCheck SpellBad                                                      
for line in range(line('$'))
    call matchadd('MyCheck', '\%' . line . 'l\n\@!')
endfor 
```

这基本上突出了文件中的每一行。一切显然都变得异常缓慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:04:29.307

取消设置 cursorline 对性能有很大的（积极的）影响。

我做到了`:set nocursorline`，现在我的动作（不管突出显示）和以前一样敏捷。

# cassandra - 使用 Zookeeper + Play + Cassandra DB（通过 Kundera）

> ID：13111332
> 
> 赞同：0
> 
> 时间：2012-10-28T17:42:01.947
> 
> 标签：cassandra, playframework-2.0, apache-zookeeper, kundera

有没有人尝试使用 Play framework(2.0.4) 应用程序通过 kundera 连接到 cassandra db？我想在 cassandra DB 之上实现 Zookeeper。有没有人尝试过组合它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:27:15.100

我想通过 Kundera 与游戏框架集成是可能的。我想在 cassandra 上实现 zookeeper 也是可能的。您是否为此研究过笼式 API？

-维维克

# jquery-mobile - jQuery Mobile - Google Maps API 海拔图

> ID：13111335
> 
> 赞同：0
> 
> 时间：2012-10-28T17:42:12.127
> 
> 标签：jquery-mobile, google-maps-api-3, height, width, elevation

我在 Google Maps API 旁边使用 jQuery mobile。我正在为一条路线创建一个谷歌海拔图表，但我很难让它全屏显示 - 在为海拔图表元素分配宽度、高度 100% 后，它在左上角以 32px x 32px 呈现。

我的谷歌地图一开始也有类似的问题，并通过添加解决了这个问题 -

```
$('#home').live('pagecreate',function(event) {
        $("#btnSubmit").click( function (e) {
            initialize();
            $.mobile.changePage("#map-page");
        });
    }); 
```

我是否需要做类似的事情才能正确渲染高程图？我不知道该怎么做。

# ruby-on-rails-3 - 我的 Gemfile 中的捆绑程序组没有被磨练

> ID：13111336
> 
> 赞同：0
> 
> 时间：2012-10-28T17:42:14.553
> 
> 标签：ruby-on-rails-3, gem, bundler

我有

```
group :production, :staging do
  gem "therubyracer"
end 
```

在我的`Gemfile`. 如果我运行：

```
bundle install --without production staging test 
```

therubyracer 已添加到我的`Gemfile.lock`. 请问为什么会这样？我希望它被忽略？

为了完整起见，如果我删除该行：

```
 gem "therubyracer" 
```

并运行上面的 bundle 命令，然后将 therubyracer gem 从我的`Gemfile.lock`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:29:23.593

我认为它*应该*是 in `Gemfile.lock`，因为`bundle`仍然需要计算和记录所有的依赖关系等等。但是，运行`bundle install --without <group>`实际上不会*安装*gem - 你可以检查（尽管如果你没有`gem list -i therubyracer`运行它可能已经安装了）。`bundle install``--without ...`

# iphone - 无法在 IOS 5 上使用 Json 解析数据

> ID：13111337
> 
> 赞同：0
> 
> 时间：2012-10-28T17:42:23.317
> 
> 标签：iphone, ios, json

我尝试在 ios 5 上使用 json 获取一些数据。但我失败了......有人可以帮助我并告诉我为什么它没有成功。这是我的实现代码

定义 ：

```
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) //1
#define kLatestKivaLoansURL [NSURL URLWithString:@"http://jaksport.com/jarray.php"] //2 
```

然后在 viewdidload ：

```
NSData* data = [NSData dataWithContentsOfURL:
                        kLatestKivaLoansURL];
        [self performSelectorOnMainThread:@selector(fetchedData:)
                               withObject:data waitUntilDone:YES]; 
```

这是功能：

```
- (void)fetchedData:(NSData *)responseData {
    //parse out the json data
    NSError* error;
    NSDictionary* json = [NSJSONSerialization
                          JSONObjectWithData:responseData //1
                                     options:kNilOptions
                                       error:&error];

    NSArray* key = [json objectForKey:@"price"]; //2

    NSLog(@"value: %@", key); //3

  } 
```

这是json文件：

```
{
    "prices":
        {
        "price":[
            {
                "id":1,
                "name":"Rosie Gradas",
                "beer":4.5,
                "cider":4.5,
                "guinness":4
            },
            {
                "id":2,
                "name":"Wicked Wolf",
                "beer":5,
                "cider":4.5,
                "guinness":4
            },
            {
                "id":3,
                "name":"Cafe Posh",
                "beer":6,
                "cider":5.5,
                "guinness":5.5
            },
            {
                "id":4,
                "name":"My House",
                "beer":16,
                "cider":15.5,
                "guinness":15.5
            }
        ]
    }
} 
```

nslog 总是打印出空值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:13:39.160

错误在于您如何访问 JSON 中的对象：

```
{
  "prices":
    {
    "price":[
        {
            "id":1,
            "name":"Rosie Gradas",
            "beer":4.5,
            "cider":4.5,
            "guinness":4
        }
} 
```

给定一个这样的 JSON 来访问价格数组，您可以使用这样的语法

```
NSArray *price = [[json objectForKey:@"prices"]objecForkey:@"price"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:46:58.573

检查 Web 浏览器中的 URL，您的 URL 不是正确的 JSON。

JSON验证链接：[JSON验证](http://www.jsonlint.org/)

# php - 如何知道 PHP 中的调用方法类型？

> ID：13111348
> 
> 赞同：0
> 
> 时间：2012-10-28T17:43:34.417
> 
> 标签：php

> **可能重复：**
> [如何判断我是静态的还是对象？](https://stackoverflow.com/questions/1647735/how-to-tell-whether-im-static-or-an-object)
> [如何判断一个函数是否在 PHP 中被静态调用？](https://stackoverflow.com/questions/3824143/how-can-i-tell-if-a-function-is-being-called-statically-in-php)

我的意思是如果您以这种方式`class::method()`或以这种方式 调用该方法，`$class->method()`我怎么知道在同一方法中哪种方式被称为方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:45:50.827

调用方法时不应`static`与方法混合`non-static`，但可以检查方法内部是否存在`$this`。

```
$staticcalled = isset($this); 
```

# c# - WPF列表框空项目模板未显示

> ID：13111358
> 
> 赞同：1
> 
> 时间：2012-10-28T17:46:22.730
> 
> 标签：c#, wpf, listbox

我试图在 WPF 列表框控件中列出一些数据。这是我第一次在 WPF 中使用 DataTemplate。一切正常，除了没有数据时没有显示“没有要显示的项目”。下面是我的代码。

```
 <ListBox Name="itemsCtrl" Background="#FFE5E5E5" BorderBrush="{x:Null}" SelectionChanged="itemsCtrl_SelectionChanged" Style="{StaticResource ListStyle}">

        <ListBox.Resources>
            <!-- Set SelectedItem Background here -->
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#C2C2C2"/>
            <Style TargetType="{x:Type ListBoxItem}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsMouseOver,
                                    RelativeSource={RelativeSource
                                      Self}}"
                        Value="True">
                        <Setter Property="Background"
                         Value="#C2C2C2" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style TargetType="ListBox" x:Key="ListStyle" BasedOn="{StaticResource {x:Type ListBox}}">
                <Style.Triggers>
                    <DataTrigger 
    Binding="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=Items.Count}" 
    Value="0"
    >
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate>
                                    <TextBlock>No items to display</TextBlock>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ListBox.Resources>

        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Cursor="Hand" Name="hoverDataTemplate" Orientation="Horizontal" Width="370" VerticalAlignment="Top" Height="40" HorizontalAlignment="Left" >
                    <Label VerticalContentAlignment="Center" HorizontalAlignment="Left" Padding="15,5,5,5" Width="330"  Content="{Binding Path=EVENT_TITLE}" FontSize="12"/>
                    <Image Height="28" Source="/pr;component/Images/black_next.png" Stretch="Fill" Width="28" />

                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

我正在绑定数据源，如下所示。

```
 itemsCtrl.ItemsSource = dao.SelectDataTable(cmd).DefaultView; 
```

当我将 ListBox 的样式属性设置为 ListStyle 时，它​​会引发错误

```
'Provide value on 'System.Windows.StaticResourceExtension' threw an exception.' Line number '292' and line position '22'. 
```

谁能指出如何使它正确？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T18:11:43.743

我使用了下面的代码，它工作正常我的 xaml 代码

```
<ListBox Grid.ColumnSpan="2" Grid.Row="1" Height="32" HorizontalAlignment="Left" Margin="160,2,0,0" Name="listBox1" VerticalAlignment="Top" Width="120" Style="{StaticResource Dhaval}"/> 
```

样式看起来像

```
<Style x:Key="Dhaval" TargetType="{x:Type ListBox}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=Items.Count}" Value="0">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <TextBlock>No items to display</TextBlock>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </DataTrigger>
     </Style.Triggers>
</Style> 
```

# node.js - MongoDB外键查询

> ID：13111367
> 
> 赞同：3
> 
> 时间：2012-10-28T17:48:00.617
> 
> 标签：node.js, mongodb, schema-design

我有两个收藏：

用户：

*   { id:"aaaaaa" 年龄:19 , 性别:"f" }
*   { id:"bbbbbb" 年龄:30 , 性别:"m" }

评论：

*   { id:777777 , user_id:"aaaaaa" , text:"一些评论数据" }
*   { id:888888 , user_id:"aaaaaa" , text:"一些评论数据" }
*   { id:999999 , user_id:"bbbbbb" , text:"一些评论数据" }

我想找到所有评论在哪里`sex=f`和`age>18`

（我不想嵌套，因为评论集合会很大）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:14:33.830

您应该将用户数据包含在每个评论中（也称为非规范化）：

```
{ id:777777 , user: { id:"aaaaaa", age:19 , sex:"f" } , text:"some review data" }
{ id:888888 , user: { id:"aaaaaa", age:19 , sex:"f" } , text:"some other review data" }
{ id:999999 , user: { id:"bbbbbb", age:20 , sex:"m" } , text:"mome review data" } 
```

在这里，阅读[有关 MongoDB 数据建模的链接](http://www.mongodb.org/display/DOCS/MongoDB+Data+Modeling+and+Rails)：

> 关于非规范化的说明
> 
> 关系纯粹主义者可能已经感到不安，就好像我们违反了一些普遍规律一样。但请记住，MongoDB 集合并不等同于关系表；每个都有一个独特的设计目标。规范化表提供了一个原子的、隔离的数据块。然而，一个文档更接近地代表了一个整体的对象。在社交新闻网站的情况下，可以说用户名是发布的故事所固有的。
> 
> 用户名的更新呢？确实，这样的更新会很昂贵。幸运的是，在这种情况下，它们将很少见。在非规范化中实现的读取节省肯定会超过偶尔更新的成本。唉，这不是硬性规定：最终，开发人员必须评估他们的应用程序以获得适当的规范化水平。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:52:01.147

除非您使用搜索属性对 REVIEWS 集合进行反规范化，否则 MongoDB 不支持在单个查询中查询另一个集合。[看到这个帖子。](https://stackoverflow.com/questions/6043582/join-operation-with-mongodb-mapreduce)

# java - 如何用显示毫秒的计时器制作秒表？

> ID：13111369
> 
> 赞同：1
> 
> 时间：2012-10-28T17:48:42.320
> 
> 标签：java, android, stopwatch, milliseconds, chronometer

嗨，我正在尝试制作记分牌，但我不知道如何让它显示毫秒。在我的 xml 中显示“.000”的文本视图，在我的主要 java 类中我有

```
 public class MainActivity extends Activity {
   timeEx = (TextView) findViewById(R.id.timeEx);
ending= 000;

View.OnClickListener mStartListener = new OnClickListener() {
public void onClick(View v) {

    if (running == true){

    }else{

    MyChronometer.setBase(SystemClock.elapsedRealtime() + timeWhenStopped);
    MyChronometer.start();
    running = true;
     TimeEnd();

   }

    }
}

private void TimeEnd() {
    // TODO Auto-generated method stub
    while(running == true){

        ending ++;
        timeEx.setText("."+ ending );
        if (ending == 999)
            ending = ending - 999;

    }
} 
```

}; }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:51:58.937

`elapsedRealtime()`已经以毫秒为单位（特别是“[系统启动后的毫秒数，包括深度睡眠](http://developer.android.com/reference/android/os/SystemClock.html)”）。

如果您想将经过的时间显示为带小数点的秒（例如，`TextView`应该显示“2.198”），请将计算出的时间差除以 1000。如果您只想要毫秒部分（例如，`TextView`应该显示“198”） ，然后使用模运算符得到除以 1000 的余数。

# android - 屏幕旋转未调用 AlertDialog onDismiss

> ID：13111374
> 
> 赞同：0
> 
> 时间：2012-10-28T17:49:13.507
> 
> 标签：android, screen, android-alertdialog, screen-rotation

我有一个 AlerDialog 并想做一些清理工作（例如释放 MediaPlayer）。所以我添加了一个解雇监听器。

```
m_dialog.setOnCancelListener(new OnCancelListener()
{
    public void onCancel(DialogInterface arg0)
    {
        stop();
    }
});
m_dialog.setOnDismissListener(new OnDismissListener()
{
    public void onDismiss(DialogInterface dialog)
    {
        stop();
    }
}); 
```

当按下后退按钮时，这工作正常。但是当屏幕旋转时，对话框隐藏但未重建并且之前未调用 onDimiss。

任何想法，这是 Android 2.3 中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:46:25.023

这是快速修复：

```
protected void onDestroy() {
    if(m_dialog.isShowing())
        m_dialog.dismiss();
    super.onDestroy();
} 
```

请了解，如果您使用`Activity#showDialog()`. （我猜你改用`m_dialog.show()`了，所以我的建议是使用`showDialog()`或升级到 Fragments。）

# vb.net - 字符串表的确切资源类型名称

> ID：13111376
> 
> 赞同：0
> 
> 时间：2012-10-28T17:49:26.987
> 
> 标签：vb.net, embedded-resource, string-table

字符串表资源类型（如 BITMAP 等）的确切名称是什么？我正在使用 Visual Basic。

我已经搜索过，但找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:04:11.140

这不是它真正的工作方式。您放入字符串表中的每个字符串都将成为一个属性。资源模块。您可以在代码中使用 My.Resources.Foo 访问它们以获取名为“Foo”的字符串。

您可以通过将解决方案资源管理器窗口置于大师模式来查看所有这些。单击解决方案资源管理器窗口顶部工具栏中的显示所有文件图标。您现在将看到项目中的所有内容，包括自动生成的文件。打开 My Project 节点、Resources.resx 节点并双击 Resources.Designer.vb 节点。您将看到从您输入的资源自动生成的代码。不要编辑文件。

# wpf - UserControl 中经过验证的文本框

> ID：13111380
> 
> 赞同：1
> 
> 时间：2012-10-28T17:49:46.473
> 
> 标签：wpf, validation, user-controls, textbox, adornerdecorator

我创建了一个 UserControl - 一个`TextBox`工作得很好的 Labeled，除了验证模板。当出现错误时，验证控制模板会显示出来，但它会填满包括标签在内的整个空间。我只希望它和`TextBox`. 如何解决这个问题？

这是xml：

```
<UserControl x:Class="Infrastructure.CustomControls.LabelTextBox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="LTB">

    <Grid HorizontalAlignment="{Binding}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <TextBlock x:Name="tbl" 
                   FontFamily="{Binding}" 
                   FontSize="{Binding}" 
                   Text="{Binding ElementName=LTB, Path=LabelText}" 
                   Height="{Binding ElementName=LTB, Path=LabelHeight}" 
                   Width="{Binding ElementName=LTB, Path=LabelWidth}" 
                   VerticalAlignment="Center"/>
        <TextBox x:Name="tbx" 
                 Grid.Column="1" 
                 FontFamily="{Binding}" 
                 FontSize="{Binding}" 
                 IsReadOnly="{Binding ElementName=LTB, Path=IsReadOnly}" 
                 MaxLength="{Binding ElementName=LTB, Path=TextMaxLength}" 
                 Text="{Binding ElementName=LTB, Path=Text}" 
                 Height="{Binding ElementName=LTB, Path=TextHeight}"
                 Width="{Binding ElementName=LTB, Path=TextWidth}" 
                 VerticalAlignment="Center">
            <Validation.ErrorTemplate>
                <ControlTemplate>
                    <DockPanel LastChildFill="True" 
                               ToolTip="{Binding ElementName=aep, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                        <TextBlock DockPanel.Dock="Right" 
                                   Foreground="Red" 
                                   FontSize="14pt" Text="*" 
                                   Margin="-15,0,0,0" 
                                   FontWeight="Bold"/>
                        <Border BorderBrush="Red" BorderThickness="1">
                            <AdornedElementPlaceholder Name="aep"/>
                        </Border>
                    </DockPanel>
                </ControlTemplate>
            </Validation.ErrorTemplate>
        </TextBox>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:51:57.747

发生这种情况的原因是您`IDataErrorInfo`在视图中实现，而不是在 UserControl 中实现。这会导致整个用户控件出现*默认*的WPF 红色边框。

要让您定义的错误模板出现，您需要`IDataErrorInfo`在您的用户控件中实现并添加`ValidatesOnDataErrors=True`到您的绑定表达式。

如果您想将`IDataErrorInfo`逻辑保留在视图中而不是 UserControl 中（这很合理），则需要为视图中的用户控件定义验证模板：

```
<Window>
    <local:UserControl>
        <Validation.ErrorTemplate>
            <ControlTemplate>
                ...
            </ControlTemplate>
        </Validation.ErrorTemplate>
    </local:UserControl>
</Window> 
```

要让它只显示文本框的边框，您可以使用一个转换器来处理边框的宽度，该转换器将整个用户控件的宽度作为参数并返回文本框的宽度；可能是这样的：

```
<Border BorderBrush="Red" BorderThickness="1" Width="{Binding ElementName=ph, Path=ActualWidth, Converter={StaticResource myConverter}}">
    <AdornedElementPlaceholder Name="ph" />
</Border> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:14:33.880

感谢您的回复，它帮助我找出问题所在。为此，我认为它是有用的。

我所做的是以编程方式查询 UserControl 验证中的错误`TextBoxChangedEvent`并手动设置验证错误（[http://wpftutorial.net/ValidationErrorByCode.html](http://wpftutorial.net/ValidationErrorByCode.html)）`TextBox`。

# php - 'ModSecurity: Error reading request body' 当从 IE 发送 AJAX 请求时

> ID：13111381
> 
> 赞同：1
> 
> 时间：2012-10-28T17:49:47.487
> 
> 标签：php, ajax, apache, internet-explorer

我正在使用 jquery 发送一个 ajax 请求，如下所示：

```
 $.ajax({
            url: "lastMessageIndex.php",
            type: "POST",
            data: {room: $("#room").val()}
        }).done(function(data){
            lastMessageIndex = data;
        }); 
```

我已经在我的开发环境中对此进行了测试，它可以工作，我从服务器获得了预期的响应，脚本继续运行，webapp 正常工作。但是当我将它上传到我的远程服务器时，它没有，并且在 apache2 error.log 文件中我看到了错误：

`[Sun Oct 28 10:42:46 2012] [error] [client 44.46.23.50] ModSecurity: Error reading request body: Connection reset by peer [hostname "www.mysite.com"] [uri "/ie/IEGetMessages.php"] [unique_id "UI1ujNBx6w4AACW5MkkAAAAF"]`

这可能不是问题的实际原因。如果我想得到来自 ajax 的响应，我不介意日志上有错误。它应该是一个数字，例如“4”，我得到的是一个长字符串：“警告：mysql_fetch_array()：提供的参数不是 /home/tom/mysite.com/lastMessageIndex.php 中的有效 MySQL 结果资源11号线"

* * *

好的，当我编辑这个时，我解决了我的问题。实际上这很愚蠢，在我的开发环境中，mySQL 数据库名称在 prod 上有一个大写字母。env 都是小写的。

抱歉造成不必要的混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:57:46.987

The solution is simple. You don't see that error on your development server because you have not installed Mod_Security on it. Install it, take over the same configuration as from the remove-system and you should see that error on your development system, too.

# c++ - 调用一个类并返回数据？

> ID：13111382
> 
> 赞同：-4
> 
> 时间：2012-10-28T17:49:51.253
> 
> 标签：c++

我有点新手，所以这里的一些帮助将不胜感激。我有一个名为 Device 的类，它获取设备屏幕大小：

```
int Device::GetDisplay()
{
 DisplayInfo display;
 int displayArray [2];
 displayArray[0] = display.pixelSize().width();
 displayHeight[1] = display.pixelSize().height();

 return displayArray;
} 
```

它返回一个数组，有没有更好的方法来返回数据？

还有一种更好的方法来调用这个类，它目前通过以下方式调用：

```
Device *device = new Device();
device.GetDisplay(); 
```

我可以在不使用设备的情况下调用它吗`*device = new Device();`

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:52:31.637

> Could I call it without using Device *device = new Device();

Yes, you can instantiate it on [automatic storage](http://en.wikipedia.org/wiki/Automatic_variable):

```
Device device; 
```

You should only use dynamic allocation if you really need it. It isn't clear from your example that you need it at all.

As for the rest of the question, there are too many errors to make ant sense out of it. But you could return a simple class holding the two pieces of information you want:

```
struct DisplayDimensions
{
  int height;
  int width;
};

DisplayDimensions Device::GetDisplay()
{
 DisplayInfo display;
 DisplayDimensions d;
 d.width = display.pixelSize().width();
 d.height = display.pixelSize().height();

 return d;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:52:15.340

Your return value(`int`) does not match the value that returned from the function(`int[2]`), you should either use `std::array` or `std::pair` or something like that.

Since your function never use `this` you can make it `static` then you can call it without an instance of the class using `Device::GetDisplay()`.

You should first mark your function as `static`:

```
static std::pair<int, int> GetDisplay() {
    DisplayInfo display;
    return std::make_pair(display.pixelSize().width(), display.pixelSize().height());
} 
```

Then you can use `Display::GetDisplay()`

# objective-c - 根据子视图的大小更改 UITableViewCell 的大小

> ID：13111385
> 
> 赞同：1
> 
> 时间：2012-10-28T17:50:16.267
> 
> 标签：objective-c, cocoa-touch, uitableview

如何`UITableViewCell`根据其中的内容量缩放 s？在我的单元格中，我使用了三个代表论坛的标签。这些标签被命名为“别名”、“日期”和“评论”。第三个标签，评论，可以是任意数量的行。因此，我需要我的单元格变成动态大小，具体取决于“评论”标签中的文本数量。这是我的代码：

```
- (BOOL)textFieldShouldReturn:(UITextField *)pTextField
{
[self setLoadingState:YES];
[pTextField resignFirstResponder];

NSUserDefaults *userStorage = [NSUserDefaults standardUserDefaults];

NSString *alias = [self urlEncode:[userStorage objectForKey:@"alias"]];
NSString *email = [self urlEncode:[userStorage objectForKey:@"email"]];
NSString *who = [self getUniqueDeviceId];
NSString *comment = [self urlEncode:[pTextField text]];

comment = [comment stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
who = [who stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

if([self isBlank:comment])
{
    [self setLoadingState:NO];
    pTextField.text = @"";
    return NO;
}
if([self isBlank:alias])
{
    [self showMessagePopup:NSLocalizedString(@"MessageMustChooseAlias", nil)];
    return NO;
}

[self.forumThreadDataProvider startSendPost:self.taskId : self.forumThreadId : alias : who : email : comment];

pTextField.text = @"";

return YES;
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [self.items count];
}

- (UITableViewCell *)tableView:(UITableView *)pTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"ForumthreadCell";
UITableViewCell *cell = [pTableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

Feedback *item = [self.items objectAtIndex:indexPath.row];

UILabel *aliasLabel = (UILabel *)[cell viewWithTag:1];
UILabel *commentLabel = (UILabel *)[cell viewWithTag:2];
UILabel *dateLabel = (UILabel *)[cell viewWithTag:3];

[aliasLabel setText:item.alias];
[commentLabel setText:item.comment];
[dateLabel setText:[self.dateFormatter stringFromDate:[NSDate dateWithTimeIntervalSince1970:(double)item.time]]];

commentLabel.numberOfLines = 0;
[commentLabel sizeToFit];

return cell;
} 
```

我已经尝试过使用以下代码示例，但它失败了：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];

if (cell) {        
UILabel *commentLabel = (UILabel *)[cell viewWithTag:2];
return commentLabel.frame.size.height;
}  
else
return 30;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:12:04.280

查看本教程以[了解如何设置动态设置单元格高度](http://www.raddonline.com/blogs/geek-journal/iphone-sdk-resizing-a-uitableviewcell-to-hold-variable-amounts-of-text/)，

基本上你需要使用这样的方法来计算 Laebl 的高度，

```
- (CGFloat)RAD_textHeightForSystemFontOfSize:(CGFloat)size {
    //Calculate the expected size based on the font and linebreak mode of the label
    CGFloat maxWidth = [UIScreen mainScreen].bounds.size.width - 50;
    CGFloat maxHeight = 9999;
    CGSize maximumLabelSize = CGSizeMake(maxWidth,maxHeight);

    CGSize expectedLabelSize = [self sizeWithFont:[UIFont systemFontOfSize:size] constrainedToSize:maximumLabelSize lineBreakMode:UILineBreakModeWordWrap]; 

    return expectedLabelSize.height;
} 
```

然后你需要实现该`heightForRowAtIndexPath`方法，

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath  {  
    NSString *label = [self.aNote length] == 0 ? kDefaultNoteLabel : self.aNote;
    CGFloat height = [label RAD_textHeightForSystemFontOfSize:kTextViewFontSize] + 20.0;
    return height;
} 
```

# mysql - 间歇性无效 MySQLSyntaxErrorException：“字段列表”中的未知列“xxx.yyy”-Tomcat

> ID：13111387
> 
> 赞同：0
> 
> 时间：2012-10-28T17:50:19.880
> 
> 标签：mysql, tomcat, jdbc

包含未知列错误的问题有几百个，但看了几十个，没有一个与我的问题相同。它们实际上都是 select 语句中的错误，但在我的情况下，select 语句 a) 有时在servelt 中工作，b) 在 PHP 中始终有效，c) 在 Squirrel SQL 客户端中始终有效。

我有一个遗留系统，无法控制查询。多年来，这些查询在 PHP mysql 中运行良好。此错误是间歇性的。

例如，昨晚所有报告都正常工作。今天早上，我再次尝试了该服务，但由于 Tomcat 服务器（Linux Centos、Java 1.6、Tomcat 6）的 MySQLSyntaxErrorException，一些查询失败了。我将战争文件的副本复制到 Tomcat 的 webapp 目录中，以使 Tomcat 重新加载 servlet，并且查询再次正常工作。MySQL 服务器在不同的主机上，在 Centos 5 上是 5.0.17。

更多细节：昨天它似乎发生在 Tomcat 空闲一段时间 - 当我在几个小时后回到应用程序时，非常复杂的查询有一段时间遇到了这个错误。该应用程序有很多不太复杂的查询有效 - 我运行了几次然后突然复杂的查询开始工作。昨天发生了三四次。但作为一个反例，复杂的查询今天早上第一次工作。它也发生在 Tomcat 5.5 中。

mysql 服务器日志中没有消息；尽管我确实增加了最大数据包长度，但我目前无法打开警告。

此外，此查询与 mysql-connector-java-5.1.22-bin.jar 一致失败，但是当我降级到 mysql-connector-java-5.1.15-bin.jar 时，工作间歇性地正常启动。将查询复制到 Windows 上的 Squirrel SQL 客户端会导致它正常工作。

servlet 正在使用 Apache POI 来使用此查询的结果来制作电子表格。

这种软件组合是否存在已知问题？

****新的信息 ******

 **这与查询的长度无关。这是一个简短的示例，其中包含更改名称以保护无辜者的语句、堆栈跟踪和表定义；请注意，servlet 有时会成功，并且查询在粘贴到 Squirrel SQL 时工作正常。客户端或服务器端都没有其他消息或警告。还有一些类似的查询在 100% 的时间内始终有效。

询问

```
SELECT SQL_CALC_FOUND_ROWS aa_bbb_cccc.id, aa_bbb_cccc.user_id, aa_bbb_cccc.user, aa_bbb_cccc.state, aa_bbb_cccc.time_stamp, aa_bbb_cccc.c20, aa_bbb_cccc.c12, aa_bbb_cccc.c21, aa_bbb_cccc.c22, aa_bbb_cccc.c23, aa_bbb_cccc.c13, aa_bbb_cccc.c15, aa_bbb_cccc.c14, aa_bbb_cccc.c16, aa_bbb_cccc.c13b, aa_bbb_cccc.c13c FROM aa_bbb_cccc WHERE 1=1 
```

堆栈跟踪

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'aa_bbb_cccc.c21' in 'field list'
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
        at com.mysql.jdbc.Util.getInstance(Util.java:386)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1053)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2728)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2678)
        at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1612)
        ... 
```

表定义

```
CREATE TABLE `aa_bbb_cccc` (
  `id` int(11) NOT NULL auto_increment,
  `user_id` int(11) NOT NULL,
  `user` varchar(255) NOT NULL,
  `state` varchar(255) NOT NULL,
  `time_stamp` timestamp NOT NULL default CURRENT_TIMESTAMP,
  `c20` varchar(255) default NULL,
  `c12` varchar(255) default NULL,
  `c13` varchar(255) default NULL,
  `c15` varchar(255) default NULL,
  `c14` varchar(255) default NULL,
  `c16` varchar(255) default NULL,
  `c13b` varchar(255) default NULL,
  `xx_yy` int(11) default NULL,
  `c13c` text,
  `key2` int(11) NOT NULL default '0',
  `c21` varchar(255) default NULL,
  `c22` varchar(255) default NULL,
  `c23` varchar(255) default NULL,
  PRIMARY KEY  (`id`,`key2`),
  KEY `user_id` (`user_id`),
  KEY `user` (`user`),
  KEY `state` (`state`),
  KEY `time_stamp` (`time_stamp`),
  KEY `id` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:34:29.840

我敢打赌你正在丢失数据包。查看您的服务器日志或网络设备，看看数据包是否被丢弃或有问题。**

# java - Log4j 不记录信息级别

> ID：13111388
> 
> 赞同：1
> 
> 时间：2012-10-28T17:50:24.630
> 
> 标签：java, logging, log4j

对于部署在 WebSphere Portal 中的应用程序，我有以下 log4j.properties 文件：

```
log4j.rootLogger=DEBUG, InfoAppender, DebugAppender

log4j.appender.InfoAppender=org.apache.log4j.RollingFileAppender
log4j.appender.InfoAppender.Threshold=INFO
log4j.appender.InfoAppender.File=C:/info.log
log4j.appender.InfoAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.InfoAppender.layout.ConversionPattern=%d %p [%c] - %m%n

log4j.appender.DebugAppender=org.apache.log4j.RollingFileAppender
log4j.appender.DebugAppender.Threshold=DEBUG
log4j.appender.DebugAppender.File=C:/debug.log
log4j.appender.DebugAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.DebugAppender.layout.ConversionPattern=%d %p [%c] - %m%n 
```

当我编码时，我在类级别定义记录器：

```
private static Logger logger = Logger.getLogger(IWannaLogThis.class); 
```

我用这个记录 INFO 消息：

```
logger.info(theObjectToLog); 
```

当我部署我的应用程序时，该`debug.log`文件会获取我记录的所有内容，`logger.debug()`但会忽略我编写的所有内容`logger.info()`。另一方面，`info.log`文件保持为空。

最奇怪的是，在类路径`debug.log`中`info.log`出现了一些由一些 JARS（如 Hibernate Validator）发出的 INFO 和 DEBUG 消息，但只是忽略了我尝试登录代码的所有内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:56:12.710

这很可能是与类加载相关的问题。WebSphere Portal 在内部使用 Log4J，所以我猜您最终会使用 WebSphere Portal 提供的 Log4J JAR 文件以及它自己的 Log4J 属性。

您可以通过将以下内容添加到服务器实例的 JVM 参数来验证这一点：

`-Dlog4j.debug=true`

然后检查`SystemOut.log`文件。Log4J 会吐出大量关于它读取的配置文件的跟踪信息。

避免这种情况的最佳方法是执行以下操作：

1.  将 Log4J JAR 文件与您的应用程序捆绑在一起。
2.  将共享库与服务器关联。在该共享库中，放置您的 Log4J 配置文件。

作为第 2 步的替代方法，您可以将 Log4J 配置文件与应用程序本身捆绑在一起，但这会带来其自身的缺点（例如，每当您执行 Log4J 配置更改时，都必须重新打包您的应用程序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:39:42.747

另一个常见问题是类路径中的 JAR 也使用 log4j 并且还设置了自己的附加程序。因此，根据他们使用的设置以及您的类所在的包，这可能会导致您描述的问题。

所以：

*   确保您的包名称是唯一的，并且没有被任何第三方库使用。
*   检查类路径中所有库的 log4j 设置。它们不应包含覆盖您的常规设置。
*   确保您的记录器使用您的 log4j.properties（您可以确定您在文件中所做的更改是否会按预期影响您的记录器）。
*   如果可以，请确保您的 log4j 内容最后加载，以防任何第三方库重置配置。他们不应该，但谁能阻止他们。

通常，它应该是其中之一。如果它不起作用，请发布更明确的示例。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:26:25.503

我过去所做的是为我要记录的类设置特定的日志。听起来您可以尝试将您的根记录器设置为 INFO 并查看是否可以获取您想要的消息。这是我的 log4j 属性文件的一点点。我为每个类设置了一个记录器，并将其分配给我的“数据”附加程序，它定义了日志布局。在记录器中，我指定要记录的特定类并单独设置它们的日志级别。任何未在 Loggers 中定义的日志类都使用 rootCategory 的默认日志级别。

```
log4j.rootCategory=INFO, rollingFile, stdout

#GetData Loggers
log4j.logger.com.myapp.data=INFO, data
log4j.logger.com.myapp.data.SybaseConnection=DEBUG, data
log4j.logger.com.myapp.data.GetData=ERROR, data

# data appender
log4j.appender.data=org.apache.log4j.RollingFileAppender
log4j.appender.data.layout=org.apache.log4j.PatternLayout
log4j.appender.data.File=c\:\\Program Files\\MyApp\\logs\\MyApp-data.log
log4j.appender.data.Append=true
log4j.appender.data.layout.ConversionPattern=[%d{ISO8601}]%5p%6.6r[%t]%x - %C.%M(%F:%L) - %m%n 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T09:34:21.913

您的根记录器在调试模式下打开日志属性，

在属性文件的第一行中使用 INFO 而不是 DEbug。

# sql - 如何获得每个工具的第一位女性，oracle 数据库

> ID：13111390
> 
> 赞同：0
> 
> 时间：2012-10-28T17:50:28.000
> 
> 标签：sql, oracle, top-n

> **可能重复：**
> [Oracle SQL - 如何检索列的最高 5 个值](https://stackoverflow.com/questions/2306744/oracle-sql-how-to-retrieve-highest-5-values-of-a-column)

我正在编写 oracle 查询，但遇到以下问题

表是这样的：

```
**Tool**       **Name**       **Gender**
Facebook   Alice        F
Facebook   Alex         M
Facebook   Loong        M
Facebook   Jimmy        M
Twitter    James        M
Twitter    Jessica      F
Twitter    Sam          M
Twitter    Kathrine     F
Google     Rosa         F
Google     Lily         F
Google     Bob          M 
```

我想得到的是每个工具中的第一个女性结果应该是这样的：

```
Facebook   Alice
Twitter    Jessica
Google     Rosa 
```

我试图通过使用查询而不是函数或过程来获得这个感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T17:52:07.910

```
select  *
from    (
        select  row_number() over (partition by tool order by name) as rn
        ,       Name
        ,       Tool
        from    YourTable
        where   Gender = 'F'
        ) SubQueryAlias
where   rn = 1 -- Only first per tool 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!4/e72ae/12/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:22:58.887

这是另一种选择。

```
select min(name), tool
from yourTable
where gender = 'F'
group by tool 
```

我想讨论一下哪个更好或哪个做什么，对我来说这是我第一次看到`row_number()`。请注意，这个按字母顺序返回女性，您的也是通过在窗口中排序来完成的，有什么区别？

# objective-c - SoundCloud API iOS，不共享 - 只听

> ID：13111391
> 
> 赞同：4
> 
> 时间：2012-10-28T17:50:34.117
> 
> 标签：objective-c, ios, xcode, soundcloud

我有一个网站，可以在其中使用 SoundCloud 制作播放列表。现在我想为 iPhone 制作一个应用程序，这样用户也可以在那里听歌曲。

[http://developers.soundcloud.com/docs/api/ios-quickstart](http://developers.soundcloud.com/docs/api/ios-quickstart) 在链接的示例中，用户必须登录才能收听和分享，但我希望我的用户只收听。有没有办法让他们不必登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:24:27.857

创建一个以 JSON 格式输出播放列表的页面，然后在 xcode 中创建一个类，为曲目词典下载 JSON 并使用 AVPlayer（或 AVQueuePlayer，如果您正在播放整个列表）播放下载的内容。

下面是一些抽象代码：

```
playlistDownloader.m
- (void)downloadPlaylist{
dispatch_queue_t concurrentQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

dispatch_sync(concurrentQueue, ^{
    NSURL *url = [NSURL URLWithString:@"http://www.yourwebsite.com/playlist.json?id=1"];
    NSData *data = [NSData dataWithContentsOfURL:url];
    NSError *error;

    id trackData = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingAllowFragments error:&error];

    if (!error) {
        tempTrackArray = trackData;
    } else {
        NSLog(@"Playlist wasn't able to download");
    }
});
} 
```

tempTrackArray 将是在类中声明的属性。

然后在你的播放器中，你会做这样的事情：

```
audioPlayer.m
- (void)instanciateAudioPlayer
{
NSDictionary *trackDictionary = [playListDownloader.tempTrackArray objectAtIndex:0];
NSString *urlString = [trackDictionary objectForKey:@"stream_url"];

AVAsset *asset = [AVAsset assetWithURL:streamURL];
AVPlayerItem *playerItem = [AVPlayerItem playerItemWithAsset:asset];

[avPlayer initWithPlayerItem:playerItem];
} 
```

这是一些非常粗略的代码，但它是您尝试做的事情的一般要点。应该让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-03T07:02:17.313

尝试 soundcloud quickstart 我意识到您的流 url 需要以 https 而不是 http 开头。您还需要将您的客户端 ID 从您的声音云应用程序添加到流 url：

```
NSDictionary *trackDictionary = [playListDownloader.tempTrackArray objectAtIndex:0];

NSString *streamURL = [trackDictionary objectForKey:@"stream_url"]; 
streamURL = [streamURL stringByReplacingOccurrencesOfString:@"http" withString:@"https"];

NSString *urlString = [NSString stringWithFormat:@"%@?client_id=%@", streamURL, @"a8e117d3fa2121067e0b29105b0543ef"]; 
```

从那里你只需设置 AVPlayer：

```
self._avPlayer = [AVPlayer playerWithURL:[NSURL URLWithString:urlString]];
[self setupLayer:clayer];
[self._avPlayer play]; 
```

一切都应该正常工作。希望能帮助到你

# sqlite - SQLite - 制作真正的只读数据库

> ID：13111392
> 
> 赞同：3
> 
> 时间：2012-10-28T17:50:40.387
> 
> 标签：sqlite

我想打开并读取一个只读的 SQLite .db 文件。我保证在此期间没有其他人会碰它（也许，除了只读）。

作为回报，我从 SQLite3 需要的是它永远不会向磁盘写入任何内容（特别是 -[这里](http://www.sqlite.org/tempfiles.html)没有描述），并且不对文件使用任何文件系统锁。

那是过分的要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:28:28.873

如果您在某些 Unix 下运行，您可以使用[`unix-none`VFS](http://www.sqlite.org/vfs.html)禁用所有锁定。

在 Windows 中，SQLite 总是使用锁。如果您真的想避免锁定，您可以编写自己的 VFS，或者使用[`xSetSystemCall`](http://www.sqlite.org/c3ref/vfs.html).

如果 SQLite 需要一个临时文件，你不能阻止它创建一个。但是，您可以将其配置为[在内存中而不是在磁盘上创建它们](http://www.sqlite.org/tempfiles.html#tempstore)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:16:44.260

VFS 没有可以注入的 Lock 方法。因此，没有直接的方法来注入虚拟 LockFile 和 LockFileEx 方法。

这些方法在 sqlite3_io_methods (winIoMethod) 中被引用，并且在不更改 SQLite 源代码的情况下似乎不容易在运行时修改。

那么，如果我理解正确的话，VFS 不是正确的方向吗？或者是吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-28T17:53:11.833

May be use a read-only user? I don't know if such role exists in SQL Lite.

# php - 使用服务帐户访问 Google 日历活动：{ "error" : "access_denied" }。没有谷歌应用

> ID：13111396
> 
> 赞同：3
> 
> 时间：2012-10-28T17:50:55.893
> 
> 标签：php, google-api, google-calendar-api

我想使用服务帐户访问谷歌日历。这是我的代码： `<NUMBER>`被 Google API 控制台上的正确值替换。

```
<?php

require_once 'googleapi/Google_Client.php';
require_once 'googleapi/contrib/Google_CalendarService.php';

const CLIENT_ID = '<NUMBER>.apps.googleusercontent.com';
const SERVICE_ACCOUNT_NAME  = '<NUMBER>@developer.gserviceaccount.com';
const MY_EMAIL  = '<MY NAME>@gmail.com';
const KEY_FILE = 'privatekey.p12';

$client = new Google_Client();
$client->setClientId(CLIENT_ID);
$client->setApplicationName("<APP NAME>");

$key = file_get_contents(KEY_FILE);
$client->setAssertionCredentials(new Google_AssertionCredentials(
    SERVICE_ACCOUNT_NAME,
    array('https://www.googleapis.com/auth/calendar'),
    $key,
    'notasecret',
    'http://oauth.net/grant_type/jwt/1.0/bearer',
    MY_EMAIL)
);

$cal = new Google_CalendarService($client);
$calList = $cal->calendarList->listCalendarList();

print "<h1>Calendar List</h1><pre>" . print_r($calList, true) . "</pre>"; 
```

当我执行我的代码时，我收到：

> 致命错误：未捕获的异常“Google_AuthException”与消息“刷新 OAuth2 令牌时出错，消息：'{“error”：“access_denied”}'' 在 /home/www/65683f67e3f0d94b14bba3c945014cda/web/intranet/googleapi/auth/Google_OAuth2.php :279 堆栈跟踪：#0 /home/www/65683f67e3f0d94b14bba3c945014cda/web/intranet/googleapi/auth/Google_OAuth2.php(256): Google_OAuth2->refreshTokenRequest(Array) #1 /home/www/65683f67e3f0d94b14bba3c945014cda/webtranet/ /auth/Google_OAuth2.php(209): Google_OAuth2->refreshTokenWithAssertion() #2 /home/www/65683f67e3f0d94b14bba3c945014cda/web/intranet/googleapi/service/Google_ServiceResource.php(166): Google_OAuth2->签名（对象（Google_HttpRequest））＃3 /home/www/65683f67e3f0d94b14bba3c945014cda/web/intranet/googleapi/contrib/Google_CalendarService.php（154）：Google_ServiceResource->__call（'list'，数组）＃4 /home/www/65683f67e3f0d94b14bba3c945014c /web/intranet/testService.php(32): Google_CalendarListServiceResource->listCalendarList() #5 {main} 在/home/www/65683f67e3f0d94b14bba3c945014cda/web/intranet/googleapi/auth/Google_OAuth2.php 279 行

如果我更改我的代码：

```
$client->setAssertionCredentials(new Google_AssertionCredentials(
SERVICE_ACCOUNT_NAME,
array('https://www.googleapis.com/auth/calendar'),
$key)); 
```

我收到：

> (403) 访问未配置

这里出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:16:27.583

我有解决办法。首先好的代码是最后一个：

```
$client->setAssertionCredentials(new Google_AssertionCredentials(
      SERVICE_ACCOUNT_NAME,
      array('https://www.googleapis.com/auth/calendar'),
      $key)); 
```

问题不在于代码，而在于我的 google 帐户，我在 Google API Console 中提到了一个 Referer。擦除字段后，代码工作。

仅供参考，如果您想访问共享日历，请不要忘记与您的 XXXXXX@developer.gserviceaccount.com（您的 SERVICE_ACCOUNT_NAME）共享您的日历。

有关更多信息，请参阅：

> [https://groups.google.com/forum/?fromgroups=#!topic/google-ajax-search-api/kaKYuUstwB0/discussion](https://groups.google.com/forum/?fromgroups=#!topic/google-ajax-search-api/kaKYuUstwB0/discussion)

# iphone - UITableView 滚动指示器不会隐藏在顶部或底部

> ID：13111397
> 
> 赞同：3
> 
> 时间：2012-10-28T17:51:00.660
> 
> 标签：iphone, objective-c, ios

我对 UITableView 有疑问。之后它不会隐藏滚动指示器：

1) 快速滚动

2）然后击中桌子的顶部或底部。

这是一个屏幕截图。

![不断显示滚动条的屏幕截图](../Images/bd19aa805e275dde83ace48debd1d211.png)

如何确保滚动指示器按预期正确隐藏？

请注意，弹跳已关闭。我也不想仅仅隐藏滚动指示器，我只是希望它在滚动停止在顶部或底部时按预期消失。

编辑：这个问题似乎是由将视图控制器设置设置`automaticallyAdjustsScrollViewInsets`为`false`. 似乎需要设置以下 3 件事来重现该问题：

1）表格视图反弹需要关闭

2）视图控制器设置`automaticallyAdjustsScrollViewInsets`为`false`（这是为了解决滚动指示器看起来完全不正确的另一个问题）

3) UIViewController 本身的视图不应该是表视图，表视图必须是子视图。

看起来`viewDidLoad`像这样：

```
self.view_table = [[UITableView alloc] initWithFrame:self.view.frame];
self.view_table.bounces = false;
self.automaticallyAdjustsScrollViewInsets = false; 
```

此外，表格视图的内容需要大于其框架的高度。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T17:57:53.913

UITableView inherits from UIScrollView, so you'll need to use UIScrollView's properties:

```
Property: showsVerticalScrollIndicator
A Boolean value that controls whether the vertical scroll indicator is visible. 
```

Take a look at [the documentation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-02T13:32:38.817

尝试这个 ：

```
-(void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset{
    if (!scrollView.bounces) {
        targetContentOffset->y = -1;//Scrollbar does not move here, because bounces is disabled, but scrollbar can hidden.
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T17:52:57.103

Do the Follwoing steps.

1.  Go to XIB
2.  select the Respective table
3.  Go to Properties and Disable the Horizontal and Vertical Scrollers.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-30T02:52:00.323

根据范亚楠的回答，我有一个答案。

在`UITableViewDelegate`： **Objective-C**：

```
-(void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset{
    if (!scrollView.bounces) {
        if(targetContentOffset->y <= 1)
        {
            targetContentOffset->y = 0.01;
        }
        else if(targetContentOffset->y >= scrollView.contentSize.height - scrollView.height)
        {
            targetContentOffset->y = scrollView.contentSize.height - scrollView.height - 0.01;
        }
    }
} 
```

**斯威夫特 4：**

```
func scrollViewWillEndDragging(_ scrollView: UIScrollView, withVelocity velocity: CGPoint, targetContentOffset: UnsafeMutablePointer<CGPoint>) {
    guard !scrollView.bounces else {
        return
    }

    if(targetContentOffset.pointee.y <= 1)
    {
        targetContentOffset.pointee.y = 0.01;
    }
    else if(targetContentOffset.pointee.y >= scrollView.contentSize.height - scrollView.height)
    {
        targetContentOffset.pointee.y = scrollView.contentSize.height - scrollView.height - 0.01;
    }
} 
```

如果表格视图滚动到顶部或底部，则此代码会使其非常接近但不完全停止。这允许滚动指示器消失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-12T03:40:04.803

在 viewwillLoad() 中使 tableView.showsVerticalScrollIndicator = false

在 tableView 的滚动动作视图中禁用滚动指示器

# java - 处理按钮事件

> ID：13111399
> 
> 赞同：0
> 
> 时间：2012-10-28T17:51:25.623
> 
> 标签：java, events, processing

我正在尝试实现某种弹出窗口来显示给定国家/地区作者的信息，我设法做到了这一点。我加载了我的交互式地图，当我左键单击国家时，我确实收到了一条弹出消息。但是，一旦我释放按钮，弹出窗口就会消失。

我想弹出一个被吸引到那里的弹出窗口，直到我右键单击它应该消失。

所以我在实现它时遇到问题，以便在 mouseReleased() 方法中显示的弹出窗口保持绘制状态。

```
// Import libaries
import org.gicentre.geomap.io.*;
import org.gicentre.geomap.*;

// Instance new GeoMap
GeoMap geoMap;
PImage bgImage;

void setup()
{
  size(1280, 768);

  // Load background pattern img and implement AA for shapes
  bgImage = loadImage("bg.jpg");
  smooth();

  // New GeoMap instance
  geoMap = new GeoMap(this);

  // Load map shape
  geoMap.readFile("world");
}

void draw()
{
  // Fill ocean with bg image
  background(bgImage);

  // Change stroke color
  stroke(255, 255, 255);

  // Fill the continents color and draw the map
  fill(26, 117, 181);
  geoMap.draw();

  // Get country id by mouse location
  int countryID = geoMap.getID(mouseX, mouseY);

  // Offgrid: -1
  if (countryID != -1)
  {
    // Listen for mouse event and trigger action
    mouseReleased(countryID);
    // Color the select country
    fill(14, 96, 166);
    geoMap.draw(countryID);
  }
}

void mouseReleased(int countryID)
{
  // Act on left clicks
  if(mouseButton == LEFT)
  {
    println(getCountryName(countryID, 3));

    noStroke();
    fill(255, 192);
    rect(0, 0, width, 20);

    if (countryID != -1)
    {
      String name = getCountryName(countryID, 3);
      fill(0);
      textAlign(LEFT, CENTER);
      text(name, 0, 0, width, 20);
    }

  }
}

// Returns country name by id
String getCountryName(int id, int offset)
{
  // Get country name for query
  // getString(int id, int offset), int id: country id, int offset: 
  // Example USA
  // offset 0 = Country Code -> 257
  // offset 1 = Country Short Tag -> US
  // offset 2 = Country Short Name -> USA
  // offset 3 = Official Name -> United States
  String name = geoMap.getAttributes().getString(id, offset);

  return name;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:22:24.993

有一个名为 mouseReleased 的内置函数，它在处理中不带任何参数。你是故意超载吗？无论如何，这有点令人困惑。我会做这样的事情：

（伪代码）

```
void setup() {
 // stuff
 }

    void draw()
{

if (id != -1)
  drawPopup(id);

}

void mouseReleased() //default method called when mouse is released
 {
 if (mouseButton == LEFT)
 id = geoMap.getID(mouseX, mouseY);
}

void drawPopup(int id){
 println(getCountryName(countryID, 3));

noStroke();
fill(255, 192);
rect(0, 0, width, 20);

if (countryID != -1)
{
  String name = getCountryName(id, 3);
  fill(0);
  textAlign(LEFT, CENTER);
  text(name, 0, 0, width, 20);
} 
```

这样在第一个之后总会有一个弹出窗口，或者您需要在适当的条件下将 id 重置为 -1 或添加 mdgeorge 建议的布尔值。但通常最好不要在鼠标函数中绘制东西。事情变得更容易控制。编辑：我应该指出还有内置的[void mousePressed() 和 void mouseClicked()](http://processing.org/reference/)以及更多检查参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:08:06.300

问题是您的绘图功能不断重复，但您仅在按下 lmb 时绘图。一旦它被释放，下一次对 draw 的调用就会覆盖你的弹出窗口。

解决这个问题的一种方法是存储一个变量（比如“shouldDraw”）来告诉你是否绘制。当按下 lmb 时，您将其设置为 true，当按下 rmb 时，您将其设置为 false。然后，您将检查 shouldDraw，而不是检查 LEFT。

我不熟悉您正在使用的框架，但可能有一个 onClick 方法或类似方法，这将是一个比 draw 更合适的地方来更改您的 shouldDraw 变量。

如果您单击然后移动鼠标，这将使标签发生变化。如果您希望保留相同的文本，则可以改为存储一个 String 并在没有可绘制的内容时将其设置为 null。

# javascript - 如何将动态 gutterWidth 添加到 jQuery Masonry？

> ID：13111400
> 
> 赞同：1
> 
> 时间：2012-10-28T17:51:28.640
> 
> 标签：javascript, jquery, twitter-bootstrap, jquery-masonry

我想让 gutterWidth 选项与 columnWidth 一样动态，因为我希望它与我正在开发的 Wordpress 网站的 Twitter Bootstrap 响应式布局一起使用。布局使用 20px 或 30px 的装订线宽度，具体取决于窗口宽度。我使用以下内容增强了 _getColumns 函数：

```
_getColumns:function(){
var a=this.options.isFitWidth?this.element.parent():this.element,b=a.width();

/* begin hack: read gutterWidth from int or function */

this.options.gutterWidth=(typeof this.options.gutterWidth=="function")?
this.options.gutterWidth(b):this.options.gutterWidth;

/* end hack */ 
```

这是我的初始化函数：

```
$(function(){
init_masonry();
});
function init_masonry() {
var $posts = $('#posts');
$posts.imagesLoaded(function() {
    $posts.masonry({
        itemSelector : 'article.post',
        isAnimated: true,
        isResizable: true,
        gutterWidth: function(containerWidth) {
            var window_width = $(window).width();
            var gutter = (window_width < 1200) ? 20 : 30;
            return gutter;
        },
        columnWidth: function(containerWidth) {
            var window_width = $(window).width();
            var gutter = (window_width <= 1200) ? 20 : 30; 
            var box_width = (containerWidth - (3 * gutter)) / 4;
            return box_width;
        }
    });
});
} 
```

它似乎适用于页面的第一次加载。在我的 13 英寸笔记本电脑（窗口宽度 >= 1200）上，它与 30 像素的装订线正确配合。通过调整屏幕大小，该功能似乎没有更新到 20 像素。

有人知道如何解决吗？

在此先感谢，莫里茨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:39:05.840

我创建了一个拉取请求，以添加将函数传递给 gutterWidth 选项的可能性，就像 columnWidth 一样。

[https://github.com/desandro/masonry/pull/295](https://github.com/desandro/masonry/pull/295)

也许你可以试试这个并在问题中发布一些反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:18:16.017

在 window.resize 中添加一个 masonry("reload")。

# java - Eclipse - Scala IDE and Java SDK

> ID：13111402
> 
> 赞同：1
> 
> 时间：2012-10-28T17:51:31.513
> 
> 标签：java, eclipse, scala, ide, eclipse-plugin

So I have Eclipse Indigo running Java and then I wanted to add Scala, which at first was fine.

Now I have gone back into it today and the tab for Scala has gone, along with the option of creating a new Scala project in File - other.

I have uninstalled and reinstalled the Scala IDE along with the Scala worksheet addin and still it has not returned.

I also have the sbt.exe set up and do have the path environment variable set up.

Anyone have any ideas?

# php - 有没有办法在 IE 中上传之前预览选定的图像？

> ID：13111405
> 
> 赞同：0
> 
> 时间：2012-10-28T17:51:57.370
> 
> 标签：php, jquery, ajax

问题是 IE 不支持 javascripts Filereader。我考虑过通过 ajax 将文件发送到服务器，然后服务器会回显文件内容。可以这样做吗？我对动态 Web 开发几乎没有经验

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:54:20.173

不是没有 File API，所以简短的回答是否定的。

更长的答案是，这将需要访问客户端计算机上超出 JavaScript 范围的文件，或者在传输之前访问内存中的数据。后者在 HTML5 File API 中提供，但由于功能和安全限制，两者在早期版本中是不可逾越的界限。

向后兼容的选项是在服务器上提供一个暂存区域（可能只是在内存中），以便在初始上传之后但在持久化之前预览文件。

# python - Eval safety in python, string pulled from JSON

> ID：13111410
> 
> 赞同：2
> 
> 时间：2012-10-28T17:52:13.570
> 
> 标签：python, security, networking, eval, twisted

I'm wracking my brain trying to find a way to exploit this setup. My concept is this: my twisted server receives messages (via `LineReceiver`). The messages are base64 JSON, which SHOULD contain a single dictionary. The dictionary has a `"INSTRUCTION"` key which indicates what sort of client action the server should be processing.

At this portion of the program, `line` is a base64 string received over the network.

```
def Decode(line):
    return json.loads(base64.b64decode(line)) 
```

And the interpretation (inside a twisted `Protocol` object)

```
def lineReceived(self, line):
    instruction = Decode(line)  #dict
    if instruction and "INSTRUCTION" in instruction:
        if instruction["INSTRUCTION"] in ("register", "join", "create", 
         "list", "passturn", "impmove", "warpmove","laserattack",
         "torpattack", "mine", "data", "status"):
            cmdstring = instruction["INSTRUCTION"] + "(self)"
            eval(cmdstring) 
```

Why I think it's safe:

*   eval will only run if I get a plain string as the value.
*   JSON can't pack complex objecst, only python basics. An attacker shouldn't have `__str__` access to what I receive, right?
*   I'm using eval to provide a less readable but much more compact replacement for a dozen `if instruction["INSTRUCTION"] == "functionA": functionA(self)` lines. I'm just running eval to choose a function from a specific list.

Is this safe? Is this considered acceptable style or form? Is this block of code robust enough for a multiplayer game, since the client cannot be trusted? (Validation that the instruction follows the game rules is later, here I want to protect my server from destructive tinkering.)

Is there a better way to do what I'm attempting (remote execution of a function, I suppose) that is more standard / safe?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T17:56:03.040

You'd be better of using `getattr()`:

```
if instruction and "INSTRUCTION" in instruction:
    instr_callable = getattr(self, 'do_' + instruction['INSTRUCTION'], None)
    if instr_callable is not None:
        instr_callable() 
```

where `do_` is prefixed to the instruction name to ensure that only allowed methods are called through this method.

If your instruction functions live in the global namespace, use `globals()` instead, and use it as a mapping:

```
if instruction and "INSTRUCTION" in instruction:
    instr_callable = globals().get('do_' + instruction['INSTRUCTION'], None)
    if instr_callable is not None:
        instr_callable(self) 
```

However, you'd then be better of putting those callables in an explicit mapping:

```
instr_callables = dict(
    register=register,
    join=join,
    ...
)

if instruction and "INSTRUCTION" in instruction:
    instr_callable = instr_callables.get(instruction['INSTRUCTION'], None)
    if instr_callable is not None:
        instr_callable(self) 
```

`eval()` is rarely, if ever, needed to look up arbitrary objects in python namespaces.

# bash - bash 从两个来源完成，文件夹和数组中的键

> ID：13111413
> 
> 赞同：1
> 
> 时间：2012-10-28T17:52:52.023
> 
> 标签：bash

我正在尝试定义一个 bash 函数，`mycd`. 此函数使用关联数组`mycdar`。如果键存在于数组中，该函数会将目录更改为键的对应值。如果密钥不存在，它将更改为命令行中提供的目录。

我想做的是从关联数组的键或当前目录中存在的文件夹中完成此功能。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:02:58.470

首先是命令：

```
mycd() { [ "${mycdar[$1]}" ] && cd "${mycdar[$1]}" || cd "$1"; } 
```

二、补全命令

```
_mycd() {
    local cur;
    _cd ;
    _get_comp_words_by_ref cur;
    COMPREPLY=($(
        printf "%s\n" "${!mycdar[@]}" |
            grep ^$cur)
        ${COMPREPLY[@]});
    } 
```

一个数组：

```
declare -A mycdar
mycdar['docs']=/usr/share/doc
mycdar['home']=$HOME
mycdar['logs']=/var/log
mycdar['proc']=/proc
mycdar['root']=/
mycdar['tmp']=/tmp 
```

最后绑定：

```
complete -F _mycd -o nospace mycd 
```

或允许标准*路径构建*行为：

```
complete -F _mycd -o nospace -o plusdirs mycd 
```

*`mycdar`*但这对我们的路径数组不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T23:53:52.520

事实证明，有一个选项可以完全按照所要求的完成功能：

```
complete -o plusdirs -o nospace -F _mycd mycd 
```

在这种情况下`_mycd`，只需从关联数组的键中返回匹配的元素。

# php - 如何根据单元格单击事件检索 mysql 数据。

> ID：13111418
> 
> 赞同：-2
> 
> 时间：2012-10-28T17:53:44.490
> 
> 标签：php, html

我有一个包含用户名的表。当我点击一个用户时，我需要从 mysql 数据库中检索他们的信息，这些信息将被填充到相关的文本框中。我完全不知道如何去做这件事？有人可以帮忙吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:56:08.863

您可以使用 jquery 以 ajaxed 方式实现此目的。在 test.php 中编写你的 php mysql 代码。

下面的代码是一个 javascript 代码，用于从不同的页面获取数据，您可以在其中处理和获取有关任何特定用户的信息。阅读有关 ajax 的信息。

```
$.ajax({
  url: 'ajax/test.php',
      data: 'id=<?php echo $id?>',
      type: 'POST',
      success: function(data) {
         //you can get data as an array and parse it to get fields and you can put them whever you want.
                 $('.result').html(data);
         alert('Load was performed.');
      }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:11:36.360

这是将解决您的问题的jquery代码。在 javascript 函数中编写此代码。该按钮的 onclick 事件应调用此函数。在 yourpage.php 中编写所有数据库编码。

```
url = "yourpage.php";

    $.get
    (
        url,
        {
            'act'       :'getdata'
        },
        function(responseText)
        {           
            strData = responseText;

            $('#div_id').html(strData);

        },
        "html"
    ); 
```

将所有 html 代码放在 DIV 中，并在 jquery 代码中调用 div。它会起作用的。

# java - 使用 Java 7 API 逐字节读取文件

> ID：13111419
> 
> 赞同：1
> 
> 时间：2012-10-28T17:53:57.407
> 
> 标签：java, file, input, io, java-7

我有一个 2 GB 的文件，我想用 Java 读取（实际上是四个 2 GB 的文件）。因此，Java 7 中有一个新功能可以让我一次读取所有字节。

```
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.nio.file.StandardOpenOption;

public class reconstructor {

    public static void main(String[] args) throws IOException {

        Path p = Paths.get("test.txt");     
        for (int i = 0; i < 1; i++) {
            byte[] b = Files.readAllBytes(p);
            Files.write(p, b, StandardOpenOption.APPEND);
        }

    }

} 
```

这是一个愚蠢的程序，它将读取一个预先输入了一个字节的文件，并不断地读取该文件并将读取的内容附加到同一个文件中。现在显然，RAM 不足以一次读取一个 2gb 文件，更不用说其中四个了，所以我想知道是否有任何快速方法，而不使用外部库（除非这是唯一的方法）来读取四个一个字节一个字节地文件，这样 RAM 就不会过载（否则我最终会出现 Java 堆错误）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T17:57:41.063

逐字节读取是另一种极端的解决方案，效率非常低。您应该简单地使用 BufferedInputStream，并逐块读取字节。

阅读[有关字节流的 Java IO 教程](http://docs.oracle.com/javase/tutorial/essential/io/bytestreams.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:04:44.570

尝试内存映射 I/O，本教程的最后一个示例：[http ://www.polarsparc.com/pdf/MemoryMappedIOinJava.pdf](http://www.polarsparc.com/pdf/MemoryMappedIOinJava.pdf)

# java - Android SQLite 获取数据库

> ID：13111420
> 
> 赞同：-1
> 
> 时间：2012-10-28T17:54:02.930
> 
> 标签：java, android, sqlite

在开始时一切正常，但是在我通过命令删除数据库之后：

```
this.deleteDatabase("databasename"); 
```

然后我的命令：

```
databasehelper.getWritableDatabase(); 
```

开始抛出异常

```
10-28 23:39:29.190: D/AndroidRuntime(15363): Shutting down VM
10-28 23:39:29.190: W/dalvikvm(15363): threadid=1: thread exiting with uncaught exception (group=0x40b5b300)
10-28 23:39:29.190: E/AndroidRuntime(15363): FATAL EXCEPTION: main
10-28 23:39:29.190: E/AndroidRuntime(15363): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.package/com.package.MainActivity}: java.lang.ArrayIndexOutOfBoundsException: length=50; index=50
10-28 23:39:29.190: E/AndroidRuntime(15363):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at android.os.Looper.loop(Looper.java:137)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at android.app.ActivityThread.main(ActivityThread.java:4745)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at java.lang.reflect.Method.invokeNative(Native Method)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at java.lang.reflect.Method.invoke(Method.java:511)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at dalvik.system.NativeStart.main(Native Method)
10-28 23:39:29.190: E/AndroidRuntime(15363): Caused by: java.lang.ArrayIndexOutOfBoundsException: length=50; index=50
10-28 23:39:29.190: E/AndroidRuntime(15363):    at com.package.DBHelper.onCreate(DBHelper.java:41)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:252)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at com.package.MainActivity.onCreate(MainActivity.java:28)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at android.app.Activity.performCreate(Activity.java:5008)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-28 23:39:29.190: E/AndroidRuntime(15363):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-28 23:39:29.190: E/AndroidRuntime(15363):    ... 11 more 
```

我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:23:17.237

您应该学习如何阅读堆栈跟踪，因为它们是现代语言的无价值特性。您`Activity`无法启动，因为您尝试访问`50`具有 50 个元素的数组中索引处的元素，因此允许索引介于 0 和 49 之间：

```
java.lang.ArrayIndexOutOfBoundsException: length=50; index=50 
```

这位于第 41 行的`onCreate()`方法中`com.package.DBHelper`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:58:10.173

您可能需要先重新创建数据库吗？

# design-patterns - Haskell showing multiple result

> ID：13111421
> 
> 赞同：-1
> 
> 时间：2012-10-28T17:54:03.033
> 
> 标签：design-patterns, haskell, matching

i need to take in an infinite list then when i do `take 40 counter list` will return a list of q1,q2,q3,q4 values in bracket or any form.

example of my code is

```
counter clock =
    let (q1,q2,w1,q3,w2,q4) = (flip clock clock, flip q1 q1, and_gate q1 q2, flip w1 w1, and_gate w1 q3, flip w2 w2) in (**q1,q2,q3,q4 - no sure about this part**) 
```

how can i achieve this? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:36:30.367

我想你正在寻找[`zip4`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v%3azip4)：

```
counter clock =
    let q1 = flip clock clock
        q2 = flip q1 q1
        w1 = and_gate q1 q2
        q3 = flip w1 w1
        w2 = and_gate w1 q3
        q4 = flip w2 w2
    in zip4 q1 q2 q3 q4 
```

# java - Having the SWT Browser render its output to an Image

> ID：13111424
> 
> 赞同：2
> 
> 时间：2012-10-28T17:54:45.223
> 
> 标签：java, image, browser, swt, render

I'm working on a Java/Eclipse SWT application that displays and edits map data captured by a special device in a stacked fashion, i.e. there are different layers of "geospatial features" that can be shown/hidden or modified. It was found to be helpful to have an aerial imagery layer which could be easily retrieved e.g. from google maps.

I thought of using the SWT Browser Widget to retrieve and render this satellite view, which actually works like a charm. The Problem is that I need to have a **hidden Browser Widget which would work in the background and return me a swt.graphics.Image etc. of the rendered content** or even better directly use a given GC for drawing.

I also thought about simpler solutions but there are two restrictions:

1.  I can't just use static maps from Google because the map tile I need would have to be larger than they allow and the partial reloading that they provide (e.g. when moving the map view port) would also be very handy.
2.  I can't simply feed my data into Google Maps for several reasons.

So in general: How do I have a (hidden) instance of a Browser Widget render its output to an Image/GC instead of the screen. Is there something else except from the Browser Widget which could do the job?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:12:29.967

我认为您可以使用该`org.eclipse.swt.widgets.Control.print(GC)` [方法](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html#print%28org.eclipse.swt.graphics.GC%29)将控件打印到图像上。我还没有尝试过浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T03:53:25.370

这是开始使用`SWT Browser`控件的示例

```
 public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setText("Browser Test");
    shell.setSize(500, 500);
    shell.setLayout(new GridLayout(1,false));

    final Browser browser = new Browser(shell, SWT.NONE);

    browser.setUrl("https://maps.google.com/maps?hl=en&tab=wl");
    //browser.setVisible(false);
    browser.setLayoutData(new GridData(GridData.FILL_BOTH));

    Button b = new Button(shell, SWT.NONE);
    b.setText("Show");
    b.addListener(SWT.Selection, new Listener() {

        @Override
        public void handleEvent(Event event) {

            Image img = new Image(display, 500, 500);
            GC gc = new GC(img);
            browser.print(gc);
            gc.dispose();

            showImage(img);

        }
    });

    shell.open();
    while (!shell.isDisposed()) {
      if (!display.readAndDispatch())
        display.sleep();
    }
    display.dispose();
  }

private static class ImageDialog extends Dialog
{

    private Image img;

    protected ImageDialog(Shell parentShell,Image img) {
        super(parentShell);
        this.img = img;
    }
    @Override
    protected Control createDialogArea(Composite parent) {

        Composite comp =  (Composite) super.createDialogArea(parent);

        Label lbl = new Label(comp,SWT.NONE);

        lbl.setImage(img);

        return comp;
    }

    @Override
    protected void okPressed() {
        img.dispose();
        super.okPressed();
    }

}
protected static void showImage(Image img) {

    ImageDialog dialog = new ImageDialog(Display.getDefault().getActiveShell(), img);
    dialog.open();

} 
```

我们可以想到的另一种方法

[用户将 div 捕获为图像并保存到计算机](https://stackoverflow.com/questions/8025806/user-capture-div-as-image-and-save-to-computer)

执行 java script into`SWT Browser` `Browser.execute(java script)`以将 div 捕获到图像中。

# moles - Using Moles for TDD with HttpWebRequest

> ID：13111428
> 
> 赞同：3
> 
> 时间：2012-10-28T17:55:31.807
> 
> 标签：moles

I am using VS2010 with SP1 (also have VS2012 installed on the same machine). Moles 1.0 The project is using .NET 4 I added moles assembly to system.dll and get the following error on compile

Error 46 The type or namespace name 'IReadOnlyList' does not exist in the namespace 'System.Collections.Generic' (are you missing an assembly reference?) [C:\Test\obj\Debug\Moles\s\m.g.csproj] C:\Test\m.g.cs Test

IReadOnlyList .NET 4.5 as far as I know.

Anyone else got this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T22:16:05.293

**Updated Solution** I was able to get Pex to run in VS 2010 with .Net Framework 4.5 installed. Maybe others have explained that this is the solution but my issue (being new to Moles and Pex) is that many of the explanations were vague. Thanks to the author of these posts because they got me headed in the right direction:

[http://feherzsolt.wordpress.com/2013/02/13/moles-and-net-4-5/](http://feherzsolt.wordpress.com/2013/02/13/moles-and-net-4-5/)

[http://www.daedtech.com/using-moles-with-the-system-assembly](http://www.daedtech.com/using-moles-with-the-system-assembly)

So the solution is to create a new .moles file (System.moles) in the test project at the same level that Pex created the yourAssemblyUnderTest.moles file and add the following to the file.

```
<Moles xmlns="http://schemas.microsoft.com/moles/2010/">
    <Assembly Name="System" ReflectionOnly="true" />
</Moles> 
```

You may have to clean (or manually delete the obj folder contents) and rebuild but this solution worked for me. I also noticed that the first build would report build errors, but the errors would go away on subsequent builds.

**Alternative Solution** I know this isn't *THE* solution but it is a (poor) workaround that allows Pex to run...plus this was too long for a comment. If anyone knows how to get PEX to run on a machine with the 4.5 .Net Framework PLEASE respond.

This was my scenario. I have a machine with the .Net Framework 4.5 and I have Visual Studio 2010 and 2012 installed. I installed Pex (en_visual_studio_2010_pex_0.94.51023.0_power_tools_x64_598803.exe) and could run Pex in a VS 2010 project that was targeting .Net Framework 4.0\. I could run Pex and it identified issues...but once I promoted issues to Unit Tests the unit test project wouldn't compile because of the following build error

```
The type or namespace name 'IReadOnlyList' does not exist in the namespace 'System.Collections.Generic' (are you missing an assembly reference?) 
```

After much searching, and reading that Pex or Moles was replacing 4.5 .Net Framework assemblies with 4.0 versions I decided to uninstall 4.5, install 4.0, and give it a try. Running on 4.0 works just fine and I didn't need to define Mole type filters to get it to work. Then I tried tried to upgrade to the 4.5 Framework again...but sadly I end up right back where I started with the IReadOnlyList namespace issue.

# visual-studio-2010 - error LNK2019: unresolved external symbol - only .h files

> ID：13111436
> 
> 赞同：2
> 
> 时间：2012-10-28T17:56:58.283
> 
> 标签：visual-studio-2010, visual-c++, linker-errors, lnk2019

Argh... I've been struggling lately to make Visual Studio 2010 (VC++) include a bunch of 3rd party libraries I wanna use in my project. That's the issue: The linker seems not to be able to determine every symbol that is generated in my code which come from the 3rd party libraries definitions. I've included the header files path on my include directories and also the sources path on my source directory, but it is still not working. I've googled it for a while and in most of cases, the issues is cause by a missing reference of the .lib file on linker's additional dependencies, however the library don't come with them.

Here's a piece of sample code:

```
#include "stdafx.h"
#include <fuzzylite\FuzzyEngine.h>

int _tmain(int argc, _TCHAR* argv[])
{
    fl::FuzzyEngine eng;
    return 0;
} 
```

So that's the output VS shows

```
Fuzzycolors.obj : error LNK2019: unresolved external symbol "public: virtual __thiscall fl::FuzzyEngine::~FuzzyEngine(void)" (??1FuzzyEngine@fl@@UAE@XZ) referenced in function _wmain
Fuzzycolors.obj : error LNK2019: unresolved external symbol "public: __thiscall fl::FuzzyEngine::FuzzyEngine(void)" (??0FuzzyEngine@fl@@QAE@XZ) referenced in function _wmain 
```

So i wonder if is there a way to build my sources with the .h and .cpp files of my 3rd party library. Thank you.

Caio

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:25:22.713

[在http://www.fuzzylite.com](http://www.fuzzylite.com)查看新版本的fuzzylite-2.0 。那个问题已经解决了。

Windows 需要添加`__declspec(dllexport)`到以前版本中不存在的类。今天，每个类都以 开头，缺少的定义`class FL_EXPORT Engine`在哪里。`FL_EXPORT`

# javascript - Ajax HTTP 请求 url 不正确

> ID：13111443
> 
> 赞同：1
> 
> 时间：2012-10-28T17:57:54.510
> 
> 标签：javascript, ajax, symfony-1.4

以下javascript代码：

```
<script type="text/javascript" charset="utf-8">      
    function goForLogin() {
        var xmlhttp;
        xmlhttp=new XMLHttpRequest();
        xmlhttp.open("POST","/account/login",true);
        xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        xmlhttp.send("email=test%40test.com&password=1");
            }
</script> 
```

我在模块 test/index 中运行此代码 - 我必须！

当我使用 tampadata 记录请求时，网址是`http://dev.server.com/test/account/login`. 我怎样才能摆脱`test`网址中的？两次不同的模块。这是不正确的！

当我在 xmlhttp.open... "dev.server.com/account/login/" 中执行时，输出将是：`http://dev.server.com/test/dev.server.com/account/login/`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:08:48.610

尝试指定一个完整的 url 作为您的 POST 请求目标：

```
http://dev.server.com/account/login 
```

# javascript - 在元素上动态添加和删除样式的最佳方法

> ID：13111445
> 
> 赞同：2
> 
> 时间：2012-10-28T17:57:59.670
> 
> 标签：javascript, jquery, css

我在一些元素上使用`mouseenter`和`mouseleave`事件来改变它们的外观。我可以使用以下两种策略之一来做到这一点：

1.  `$(this).css('someProperty','someValue')`添加然后`$(this).removeAttr('style')`删除
2.  `$(this).addClass('someClass')`添加然后`$(this).removeClass('someClass')`删除

最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T18:00:00.993

绝对是选项 2。样式应该在样式表中定义。

还有[`toggleClass`](http://api.jquery.com/toggleClass/)，如果它存在则删除该类，但如果它丢失则添加它。

* * *

**注意：** `toggleClass`还允许您传入一个布尔值作为第二个参数，告诉它是添加还是删除它（不管它当前是否应用了该类），所以：

```
$(this).toggleClass('active', true); 
```

完全等同于：

```
$(this).addClass('active'); 
```

当您的代码中已经有布尔值时，这非常方便。所以代替这个：

```
if (isUserActive()) {
    $(this).addClass('active');
} else {
    $(this).addClass('active');
} 
```

你可以这样做：

```
$(this).toggleClass('active', isUserActive()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:01:47.593

选项 2 如果您必须在 JavaScript 中执行此操作，但对于现代浏览器，您可以使用`:hover`伪类完全在 CSS 中实现您所追求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:00:11.180

我强烈推荐`addClass()`/ `removeClass()`，因为您可以使用最少的 jQuery 添加、删除和更改整个属性。

尽管该`css()`方法需要您，或者更确切地说是脚本，需要跟踪应该更改的内容以反映美学变化以传达程序化交互，但将其与`attr()`方法耦合并删除`style`属性将删除*所有*样式，甚至是您想要的样式要保留的元素，这需要您重新分配这些属性。

因此，基本上，选项 2 是有效的，而选项 1 会产生不必要的工作。

当然，总是有[`toggleClass()`](http://api.jquery.com/toggleClass/)，这可以提高效率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T18:00:33.723

除非您需要动态生成任何 CSS 属性值，否则最好将样式与 javascript 分开。所以使用类而不是直接的 css 样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T18:01:07.810

`.addClass`并且`.removeClass`是最好的方法，因为您可以使用 CSS 更改样式...所以一段时间后您可以轻松地重新设计您的网站。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-28T18:02:23.740

第二个是最好的，因为通常样式对于不同的元素是通用的，它是通用的，并且与逐个添加属性相比，添加删除更好。

```
$(this).addClass('someClass') to add and then $(this).removeClass('someClass') to remove 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-28T18:06:25.283

如果您在多个元素中调用此函数，我建议您使用第二个。如果您稍后需要再次更改外观，那么您只需在 css 类中进行编辑，而不是在所有元素中进行编辑

# iis-6 - IIS 进程回收和会话变量

> ID：13111451
> 
> 赞同：0
> 
> 时间：2012-10-28T17:58:10.327
> 
> 标签：iis-6

在装有 Windows XP（有十个工作站）的客户端 PC 上而不是在服务器（Windows Server 2003）上设置 Web 应用程序是不是一个坏主意。

我有一个 ASP.NET 应用程序，它存在内存泄漏并使用会话变量。我相信会话变量可能会在 IIS 进程回收时引起问题。在服务器上而不是在工作站上安装 IIS 有什么好处吗？

我在自言自语是要在这里问这个问题还是在服务器保险库上问这个问题。当我的问题引用会话变量时，我决定在这里问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:49:40.933

如果问题与会话变量或内存泄漏有关，那么在哪里运行它实际上并不重要，因为问题出在代码中，而不是在平台中。

在 Windows Server 2003 (IIS 6) 上而不是在 Windows XP (IIS 5.1) 上运行这样的有问题的应用程序的唯一可能的好处是，您可以为 IIS 6 下的应用程序池安排回收，并且可能能够放置一个频带-通过经常回收和更改代码以在进程外存储会话来帮助解决问题。

底线 - 修复代码并在有意义的地方运行应用程序。

# java - 在控制台应用程序中注入 EJB3 / CDI / JSF bean 用于测试/实验目的

> ID：13111452
> 
> 赞同：0
> 
> 时间：2012-10-28T17:58:14.023
> 
> 标签：java, jsf, ejb, cdi

有没有办法注入 EJB3 / CDI / JSF bean（如果最后一个类别有意义）并使用相应的注释而不必使用 Java EE 容器？即在一个普通的旧**静态无效主**类型控制台应用程序中？

原因可能是出于实验/测试/行为解密目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:04:14.983

EJB3、CID 和 JSF 在 Java EE 容器上运行：[GlassFish](http://glassfish.java.net/)、[JBoss](http://www.jboss.org/as7)、[IBM WebSphere Application Server](http://www-01.ibm.com/software/webservers/appserv/was/)等。请注意，[Tomcat](http://tomcat.apache.org/)不是 Java EE 容器，它是 Servlet/JSP 容器。

另一方面，控制台项目运行在 Java SE 容器上，这是一个简单的 JRE 安装。如果您尝试下载[Java Platform, Enterprise Edition 6 SDK](http://www.oracle.com/technetwork/java/javaee/downloads/java-ee-sdk-6u3-web-downloads-439820.html)，您会注意到它是一个 GlassFish 发行版。

如果您想/需要使用这些技术进行概念验证，您应该创建一个简单的 Web 项目并将其部署在任何 Java EE 容器上。IMO 我会推荐 JBoss AS 7，因为它在部署时是轻量级的（注意：如果我错了，人们可以纠正我）。

# c++ - 矢量元素是否需要可移动？

> ID：13111454
> 
> 赞同：6
> 
> 时间：2012-10-28T17:58:20.843
> 
> 标签：c++, c++11, stdvector

我注意到 std::vector 对其 elememt 类型 T 的要求从 C++03 更改为 C++0x。T 现在不再需要是可复制构造的，但移动可构造性就足够了。

即使我们没有潜在的重新分配，T 是否也需要它？

```
vector<boost::scoped_ptr<int>> x(numberElements); 
```

我认为这里没有必要搬家。规范是怎么说的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:25:40.840

根据 23.3.6.2 [vector.cons] 第 4 段，您使用的构造函数需要`DefaultInsertable`. 由于构造函数不是需求表的构造函数之一，`CopyInsertable`因此也不应该有任何额外的要求。根据 23.2.1 [container.requirements.general] 第 13 段，`DefaultInsertable`意味着以下表达式是格式良好的：

```
allocator_traits<A>::construct(m, p); 
```

看来，这意味着答案取决于使用的分配器`A`。我不太想分析 20.6.7.2 [allocator.uses.construction] 的深层含义。让我们让讲师逃脱：确定这一段的含义留作练习！

# c# - 用于创建可折叠代码块的 Visual Studio express 关键字

> ID：13111455
> 
> 赞同：0
> 
> 时间：2012-10-28T17:58:30.517
> 
> 标签：c#, .net, visual-studio-2010, visual-studio

我记得有一个可以输入的单词，以便可以折叠代码部分。然而我已经忘记了。它以前如何？

（它适用于快递版）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T18:01:02.070

我认为你在谈论`#region`指令。像这样使用它们：

```
#region Properties

public int SomeProperty { get; set; }

#endregion 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:01:05.100

```
#region NameOfRegion

the code

#endregion 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T00:55:45.990

[www.sambeauvois.be/blog/wp-content/uploads/2010/04/VS2010CsharpKeyBinding2.png](http://www.sambeauvois.be/blog/wp-content/uploads/2010/04/VS2010CsharpKeyBinding2.png)

第一个热键与打开和折叠相关。

# ios - 确定状态栏方向

> ID：13111457
> 
> 赞同：1
> 
> 时间：2012-10-28T17:58:39.357
> 
> 标签：ios

我想检测状态栏在我当前视图上的位置，以确定要执行哪个 segue。我知道这样做的首选方法是确定设备方向，但这种方法对我来说有两个问题：

1.）如果设备与垂直或水平方向的角度不够远，则没有检测到设备方向并且不会发生segue

2.）在某些情况下，我将“锁定”显示方向，这样即使物理设备方向是横向的，屏幕也会被锁定为纵向，我将要执行我创建的纵向序列。

问题是“ [UIApplication sharedApplication].statusBarOrientation = ”没有返回状态栏的实际方向。有没有一种简单的方法可以检测到这一点？否则我将不得不编写一堆乱七八糟的代码来跟踪这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:15:53.567

你有没有试过：`[[UIDevice currentDevice] orientation]`？

笔记：

根据您的应用程序的设计，可能需要调用`[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]`. 如果你这样做，一定要`[[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications]`在某个时候打电话。

如果这还不足以满足您的目的，我想您必须手动检查加速度计。查看：[处理运动事件](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MotionEvents/MotionEvents.html)以了解有关如何完成的更多信息。

# ruby-on-rails - rspec错误'未定义的方法'有效吗？在我的 user_spec 模型中 - ruby on rails 教程

> ID：13111461
> 
> 赞同：1
> 
> 时间：2012-10-28T17:58:51.433
> 
> 标签：ruby-on-rails, rspec

运行 rspec 时出现以下错误：

```
bundle exec rspec spec/models/user_spec.rb 
```

> 失败：
> 
> 1) 用户名​​过长失败/错误：it { should_not be_vaild } NoMethodError: undefined method `vaild?' for #<User:0x007f8eebf0d6c0> # ./spec/models/user_spec.rb:39:in`block (3 levels) in '
> 
> 在 0.22196 秒内完成 6 个示例，1 个失败
> 
> 失败的例子：
> 
> rspec ./spec/models/user_spec.rb:39 # 用户名过长

我的 user.rb 文件

```
# == Schema Information
#
# Table name: users
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  email      :string(255)
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

class User < ActiveRecord::Base
  attr_accessible :name, :email,

 validates :name, presence: true, length: { maximum: 50 }
 validates :email, presence: true

end 
```

我的 user_spec.rb

```
# == Schema Information
#
# Table name: users
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  email      :string(255)
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

require 'spec_helper'

describe User do

    before do
        @user = User.new(name: "Example User", email: "user@example.com")
end

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }

  it { should be_valid }

  describe "when name is not present" do
    before { @user.name = " " }
    it { should_not be_valid }
  end

  describe "when email is not present" do
    before { @user.email = " " }
    it { should_not be_valid }
    end

  describe "when name is too long" do
    before { @user.name = "a" * 51 }
    it { should_not be_vaild }
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:06:44.293

我打错字了，拼错有效

> 有效的

不是

> 有效

# bash - 如何检索lib目录？

> ID：13111474
> 
> 赞同：0
> 
> 时间：2012-10-28T18:00:11.687
> 
> 标签：bash

如何使用 bash 检索 lib 目录？例如：`/usr/lib`或`/usr/lib64`？

*编辑*

我正在打包一个 RPM，它将一些文件复制到`%{_libdir}`. 所以我想知道 lib 目录的路径……我可以使用`if [ -f "path-to-my-file" ]; then ...`，但我想知道是否有命令行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:19:50.447

ldd - 打印共享库依赖项

```
$ ldd /bin/ls
    linux-vdso.so.1 =>  (0x00007fffbeecc000)
    libselinux.so.1 => /lib/libselinux.so.1 (0x00007fa9aa630000)
    librt.so.1 => /lib/librt.so.1 (0x00007fa9aa428000)
    libacl.so.1 => /lib/libacl.so.1 (0x00007fa9aa220000)
    libc.so.6 => /lib/libc.so.6 (0x00007fa9a9ebe000)
    libdl.so.2 => /lib/libdl.so.2 (0x00007fa9a9cba000)
    /lib64/ld-linux-x86-64.so.2 (0x00007fa9aa868000)
    libpthread.so.0 => /lib/libpthread.so.0 (0x00007fa9a9a9d000)
    libattr.so.1 => /lib/libattr.so.1 (0x00007fa9a9899000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:04:34.660

```
cat /etc/ld.so.conf /etc/ld.so.conf.d/* 
```

默认情况下，将显示链接器在哪里查找库。

# git - 选择哪个分支进行变基

> ID：13111475
> 
> 赞同：0
> 
> 时间：2012-10-28T18:00:21.310
> 
> 标签：git, version-control, rebase

我有两个简单的分支，分别名为 master 和 admin。历史如下所示。

![历史](../Images/7294ce26c98c3cd1b18e9bd059fe3e52.png)

我只是想在没有合并提交的情况下将管理分支的更新带到 master。然后我有两个选择。我需要遵循以下哪一项？

1.结帐到管理员和`git rebase master`快进合并管理员到主

2.结帐到掌握和`git rebase admin`

## 编辑：

我也发现了一些其他发现（这可能是选择解决方案的原因）

1.  使用选项 1，它将保持主提交的 SHA1 IDS，而无需更改和更改管理员的 SHA IDS
2.  使用选项2，它将与上述相反

所以我认为这是我们需要选择选项 1 的主要原因，因为我们不应该更改 master 的提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:02:42.723

您想做选项 1。这将应用所有新的在`admin`当前状态之上的`master`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:15:51.573

无论哪种方式都可以，但是如果您与其他人一起工作，主分支通常也是其他人正在反对的。所以从 admin 分支，rebase 到 master：

```
git rebase master 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:15:19.153

两种情况的结果历史（最旧的提交）：

1.  结帐到 admin 和 git rebase master 和快进合并 admin 到 master

    ```
    added index file
    updated index
    admin added
    admin updated 
    ```

2.  结帐到 master 和 git rebase admin

    ```
    added index file
    admin added
    admin updated
    updated index 
    ```

所以，我认为你想使用选项 1

# c++ - c ++参考参数未更新

> ID：13111477
> 
> 赞同：3
> 
> 时间：2012-10-28T18:00:54.583
> 
> 标签：c++

我正在尝试编写一个简单的函数来从字符串中的表达式中提取下一个数字，我的问题是函数退出后引用参数 ioIsValidExpression 没有被更新。看起来我实际上引用了正确的变量（而不是临时变量），因为 test3 的地址（在调用 getNextNumber(...) 之前调用它）和 ioIsValidExpression（它在函数内部的名称）是相同的。

我希望这在某处会是一个令人尴尬的错误，但我试图解决这个问题却无济于事。我在注释行中包含了我的 int main 和 int getNextNumber，我在其中从函数返回了一个值。

```
int getNextNumber(std::string& iExpression, int& ioLoopShift, bool& ioIsValidExpression)
{
    //spaces are ignored, a minus is a unary minus (so must be seated next to a number (no spaces between '-' and number))
    int length = iExpression.size(); //evaluate only once
    bool unaryMinusFound = false;
    bool numberFound = false;

    int oSubExpression = 0;
    for(int i =0; i < length; i++)
    {
        if((int)iExpression[i] == 32)
        {
            if(!numberFound)
            {
                if(!unaryMinusFound)
                {
                    continue;
                }
                else
                {
                    ioIsValidExpression = false;
                    td::cout << "address of ioIsValidExpression: " << &ioIsValidExpression << ", value: " << ioIsValidExpression << "\n";
                    return 0;
                }
            }
            else
            {
                return unaryMinusFound? -1 * oSubExpression: oSubExpression;
            }
        }
        if((int)iExpression[i] == 45 && !unaryMinusFound)
        {
            unaryMinusFound = true;
            continue;
        }
        if((int)iExpression[i] >= 48 && (int)iExpression[i] <= 57)
        {
            numberFound = true;
            oSubExpression = (int)(iExpression[i]-48) + 10*oSubExpression;
            ioLoopShift++;
            continue;
        }
        else
        {
            //garbage characters
            ioIsValidExpression = false;
            return 0;
        }
    }
    return unaryMinusFound? -1 * oSubExpression: oSubExpression;
} 
```

主要内容：

```
int main(int argc, char* argv[])
{
    std::string test = " - 45 & ";
    int test2 = 0;
    bool test3 = true;
    std::cout << getNextNumber(test,test2,test3) << ", address of test3: " << &test3 << ", value: " << test3 << "\n";

    return 0;
} 
```

运行程序的输出：

```
address of ioIsValidExpression: 0xbf86e58f, value: 0
0, address of test3: 0xbf86e58f, value: 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T18:15:21.463

未指定评估函数参数（以及您的输出语句是函数链）的顺序。在输出整个内容之前，考虑在将函数的结果保存在变量中时它如何正确工作：[测试](http://liveworkspace.org/code/90bd701efffce38d3244ac5fc873afde)

```
int temp = getNextNumber(test, test2, test3);
std::cout << temp << ", address of test3: " << &test3 << ", value: " << test3 << "\n"; 
```

输出：

> ioIsValidExpression 的地址：0xbfaa85cf，值：0
> 0，test3 的地址：0xbfaa85cf，值：0

# objective-c - 如何在没有结束标签的情况下解析 XML 数据 Objective-C

> ID：13111485
> 
> 赞同：1
> 
> 时间：2012-10-28T18:01:25.473
> 
> 标签：objective-c, ios, xml, cocoa-touch, nsxmlparser

> **可能重复：**
> [使用 NSXMLParser 解析 HTML](https://stackoverflow.com/questions/8866376/using-an-nsxmlparser-to-parse-html)

我正在尝试解析以下 XML 数据，但结构混乱并且没有结束标记。这不是我制作的 XML 文件，而是我试图从网络服务器解析的文件。

```
 <FORM ACTION="/prod/bwckgens.p_proc_term_date" METHOD="POST" onSubmit="return checkSubmit()">
<INPUT TYPE="hidden" NAME="p_calling_proc" VALUE="bwckschd.p_disp_dyn_sched">
<TABLE  CLASS="dataentrytable" summary="This layout table is used for term selection."width="100%"><CAPTION class="captiontext">Search by Term: </CAPTION>
<TR>
<TD CLASS="dedefault"><LABEL for=term_input_id><SPAN class="fieldlabeltextinvisible">Term</SPAN></LABEL>
<SELECT NAME="p_term" SIZE="1"  ID="term_input_id">
<OPTION VALUE="">None
<OPTION VALUE="201320">Spring 2013
<OPTION VALUE="201315">STAR/BGR: New Admits Fall 2012 (View only)
<OPTION VALUE="201310">Fall 2012 (View only)
<OPTION VALUE="201230">Summer 2012 (View only)
<OPTION VALUE="201220">Spring 2012 (View only)
<OPTION VALUE="201210">Fall 2011 (View only)
<OPTION VALUE="201130">Summer 2011 (View only)
<OPTION VALUE="201120">Spring 2011 (View only)
<OPTION VALUE="201110">Fall 2010 (View only)
<OPTION VALUE="201030">Summer 2010 (View only)
<OPTION VALUE="201020">Spring 2010 (View only)
<OPTION VALUE="201010">Fall 2009 (View only)
<OPTION VALUE="200930">Summer 2009 (View only)
<OPTION VALUE="200920">Spring 2009 (View only)
<OPTION VALUE="200910">Fall 2008 (View only)
<OPTION VALUE="200830">Summer 2008 (View only)
<OPTION VALUE="200820">Spring 2008 (View only)
</SELECT>
</TD>
</TR>
</TABLE>
<BR>
<BR>
<INPUT TYPE="submit" VALUE="Submit">
<INPUT TYPE="reset" VALUE="Reset">
</FORM> 
```

HTML 文件还有很多内容，但我只包括相关的内容。我想得到`OPTION VALUE="these numbers"`括号后面的所有数字和术语。例如 2013 年春季。

`NSXMLParser`由于没有结束标签，我如何使用来获取这些值。我尝试打印出解析器遇到的所有元素

```
NSLog(@"Current start element: %@\n", elementName);
NSLog(@"Current attr:%@\n", attributeDict.description); 
```

但我没有看到`OPTION`或`VALUE`任何地方。这是`NSLog`语句的结果：

```
2012-10-28 13:58:47.638 Purdue Course Finder[32890:c07] Current start element: HTML
2012-10-28 13:58:47.638 Purdue Course Finder[32890:c07] Current attr:{
    lang = en;
}
2012-10-28 13:58:47.639 Purdue Course Finder[32890:c07] Current start element: HEAD
2012-10-28 13:58:47.639 Purdue Course Finder[32890:c07] Current attr:{
}
2012-10-28 13:58:47.639 Purdue Course Finder[32890:c07] Current start element: META
2012-10-28 13:58:47.640 Purdue Course Finder[32890:c07] Current attr:{
    content = "text/html; charset=UTF-8";
    "http-equiv" = "Content-Type";
}
2012-10-28 13:58:47.640 Purdue Course Finder[32890:c07] Current start element: META
2012-10-28 13:58:47.640 Purdue Course Finder[32890:c07] Current attr:{
    CONTENT = "no-cache";
    "HTTP-EQUIV" = Pragma;
    NAME = "Cache-Control";
}
2012-10-28 13:58:47.641 Purdue Course Finder[32890:c07] Current start element: META
2012-10-28 13:58:47.641 Purdue Course Finder[32890:c07] Current attr:{
    CONTENT = "no-cache";
    "HTTP-EQUIV" = "Cache-Control";
    NAME = "Cache-Control";
}
2012-10-28 13:58:47.641 Purdue Course Finder[32890:c07] Current start element: LINK
2012-10-28 13:58:47.642 Purdue Course Finder[32890:c07] Current attr:{
    HREF = "/css/web_defaultapp.css";
    REL = stylesheet;
    TYPE = "text/css";
}
2012-10-28 13:58:47.642 Purdue Course Finder[32890:c07] Current start element: LINK
2012-10-28 13:58:47.642 Purdue Course Finder[32890:c07] Current attr:{
    HREF = "/css/web_defaultprint.css";
    REL = stylesheet;
    TYPE = "text/css";
    media = print;
}
2012-10-28 13:58:47.643 Purdue Course Finder[32890:c07] Current start element: TITLE
2012-10-28 13:58:47.643 Purdue Course Finder[32890:c07] Current attr:{
}
2012-10-28 13:58:47.643 Purdue Course Finder[32890:c07] Current end element: TITLE
2012-10-28 13:58:47.644 Purdue Course Finder[32890:c07] Current start element: META
2012-10-28 13:58:47.644 Purdue Course Finder[32890:c07] Current attr:{
    CONTENT = "text/javascript";
    "HTTP-EQUIV" = "Content-Script-Type";
    NAME = "Default_Script_Language";
}
2012-10-28 13:58:47.644 Purdue Course Finder[32890:c07] Current start element: SCRIPT
2012-10-28 13:58:47.645 Purdue Course Finder[32890:c07] Current attr:{
    LANGUAGE = JavaScript;
    TYPE = "text/javascript";
}
2012-10-28 13:58:47.645 Purdue Course Finder[32890:c07] Current end element: SCRIPT
2012-10-28 13:58:47.645 Purdue Course Finder[32890:c07] Current start element: SCRIPT
2012-10-28 13:58:47.646 Purdue Course Finder[32890:c07] Current attr:{
    LANGUAGE = JavaScript;
    TYPE = "text/javascript";
}
2012-10-28 13:58:47.646 Purdue Course Finder[32890:c07] Current end element: SCRIPT 
```

我什至尝试在该`- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string`方法中到处打印。它在任何地方都找不到这些标签。我想知道是否有人可以帮助我解析这个构造不佳的 XML 文件。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:03:35.330

对于特定的混乱文件，我个人使用“手动”解析，使用子字符串、索引和正则表达式。

您还可以尝试在解析文件之前“修复”文件，例如`</option>`在每个`<option>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:22:14.503

在我看来，您甚至没有获得您感兴趣的主要数据块，可能是因为 HEAD 格式也错误（尽管我不确定，因为文档的那部分不包括在内在问题中）。

我建议在收到文档后对文档进行细微的调整，直到正确处理为止。您不必修复所有错误，只需修复那些阻止您获取选项数据的错误。一旦您知道所需的修复程序，请在收到文件并正常处理后进行一些自动替换/正则表达式。

# c# - 我想在我右键单击网格视图时启用网格视图删除。如何在 Web 应用程序中实现？

> ID：13111490
> 
> 赞同：0
> 
> 时间：2012-10-28T18:02:06.143
> 
> 标签：c#, asp.net

我有gridview，它填充了数据。想在鼠标右键单击事件上启用删除按钮。怎么可能？请帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:27:14.630

尝试这个

```
this.GridView.MouseDown += new System.Windows.Forms.MouseEventHandler(this.GridView_MouseDown);

private void GridView_MouseDown(object sender, MouseEventArgs e)
{
    if(e.Button == MouseButtons.Right)
    {
       //code to enable a button
    }
} 
```

# python - 从直方图曲线中选择最佳值范围

> ID：13111504
> 
> 赞同：7
> 
> 时间：2012-10-28T18:04:41.383
> 
> 标签：python, image-processing, opencv, computer-vision, histogram

**设想 ：**

我正在尝试跟踪两个不同颜色的对象。一开始，提示用户将第一个彩色对象（例如，可能是红色）保持在相机前面的特定位置（在屏幕上用矩形标记）并按任意键，然后我的程序会占用帧的那部分(ROI) 并分析其中的颜色，以找到要跟踪的颜色。同样对于第二个对象也是如此。然后像往常一样，`cv.inRange`在 HSV 颜色平面中使用函数并跟踪对象。

**做了什么：**

我将要跟踪的对象的 ROI 转换为 HSV 并检查色调直方图。我有两个案例如下：

![在此处输入图像描述](../Images/42248a6a250c96633693cb4713baa052.png) ![在此处输入图像描述](../Images/08c8f6d95c8cd69c69473f56dcfdb659.png)

（这里只有一个主要的中心峰。但在某些情况下，我得到两个这样的峰，一个是更大的峰，周围有一些像素簇，第二个峰比第一个小，但大小很大，周围也有小簇.我现在没有它的示例图像。但它几乎看起来像下面（在油漆中创建））

![在此处输入图像描述](../Images/0d65dcd5bab5c08a345856eb5dbbc2c4.png)

**问题 ：**

`How can I get best range of hue values from these histograms?`

我的意思是最佳范围，可能是 ROI 中大约 80-90% 的像素位于该范围内。

还是有比这更好的方法来跟踪不同颜色的物体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:08:00.510

如果我理解正确，您在这里唯一需要做的就是在图中找到最大值，其中最大值不一定是最高峰，而是密度最大的区域。

这是一个非常简单但不太科学但快速的 O(n) 方法。通过低通滤波器运行直方图。例如移动平均线。平均长度可以假设为 20。在这种情况下，新修改直方图的第 10 个值将是：

```
mh10 = (h1 + h2 + ... + h20) / 20 
```

其中 h1, h2... 是直方图中的值。下一个值：

```
mh11 = (h2 + h3 + ... + h21) / 20 
```

使用先前计算的 mh10 可以更容易地计算它，方法是删除它的第一个组件并在末尾添加一个新组件：

```
mh11 = mh10 - h1/20 + h21/20 
```

您唯一的问题是如何处理直方图边缘的数字。您可以将移动平均线的长度缩小到可用的长度，或者您可以在已有的之前和之后添加值。但无论哪种方式，您都无法在边缘处理峰值。

最后，当你有这个修改过的直方图时，就得到最大值。这是可行的，因为现在直方图中的每个值不仅包含他自己，还包含邻居。

一种更复杂的方法是加权平均值，例如使用高斯曲线。但这不再是线性的。这将是 O(k*n)，其中 k 是平均值的长度，也是高斯的长度。

# unicode - 在 Corona SDK 中如何反转 unicode 字符串？

> ID：13111508
> 
> 赞同：1
> 
> 时间：2012-10-28T18:04:55.833
> 
> 标签：unicode, lua, coronasdk

我知道 Lua 并不完全支持 unicode，但是应该有一个解决方法来解决这个问题？string.reverse 不适用于 unicode，因此以下示例将不起作用

```
 print(string.reverse("أحمد")) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T19:46:59.450

Corona SDK 似乎使用 UTF-8 作为编码。

如果要反转字符串中的所有 Unicode*代码点*，而不是所有字节，可以使用该代码：

```
function utf8reverse(str)
  return str:gsub("([\194-\244][\128-\191]+)", string.reverse):reverse()
end

print(utf8reverse("أحمد")) 
```

诀窍如下：多字节 Unicode 代码点始终以字节**11xx xxxx**开头，后跟一个或多个字节**10xx xxxx**。第一步是反转每个多字节代码点上的所有字节，然后反转所有字节。

注意：当一个 Unicode 字符由多个代码点组成时，这个简单的技巧将不起作用。完整的支持需要一个大型的 Unicode 数据库来处理。

# login - CAS SSO 服务器中的代码过期

> ID：13111509
> 
> 赞同：0
> 
> 时间：2012-10-28T18:04:58.170
> 
> 标签：login, oauth, single-sign-on, cas

我部署了支持 OAuth 协议的 CAS 服务器

我已将此代码添加到我的 deployerConfigContext.xml

```
<bean class="org.jasig.cas.services.RegisteredServiceImpl">
    <property name="id" value="1"/>
    <property name="name" value="the_key"/>
    <property name="description" value="the_secret"/>
    <property name="theme" value="my great webapp for OAuth"/>
    <property name="serviceId" value="http://localhost:8080/cas/login"/>
    <property name="evaluationOrder" value="10000001"/>
    <property name="allowedAttributes">
        <list>
            <!-- facebook -->
            <value>the_key</value>
            <value>the_secret</value>
        </list>
    </property>
</bean> 
```

和

```
<bean id="ticketRegistry" class="org.jasig.cas.ticket.registry.DefaultTicketRegistry">
    <constructor-arg index="0" value="1000"/>
    <constructor-arg index="1" value="1"/>
    <constructor-arg index="2" value="16"/>
</bean> 
```

定义我的 ticketRegistry 所以我的 OAuth 客户端密码密钥是 the_secret 和 the_key

但是当我加载这个 URL`http://localhost:8080/cas/oauth2.0/accessToken?client_secret=the_secret&grant_type=refresh_token&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fcas%2Flogin&code=0&client_id=the_key`来测试我的 OAuth 协议时，我遇到了这个异常

`<Code Expired 0>`

为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:29:27.450

您需要定义两个 CAS 服务：

1.  一种用于 OAuth 服务器支持的内部机制（使用 CASservice.serviceId = `http://localhost:8080/cas/oauth2.0/callbackAuthorize`）
2.  一个用于您要授权的每个客户端 OAuth 应用程序（使用 oauthclient.key = CASservice.name，oauthclient.secret = CASservice.description，oauthclient.redirect_uri 应以 CASservice.serviceId 开头）。

文档：[https](https://wiki.jasig.org/display/CASUM/OAuth+server+support) ://wiki.jasig.org/display/CASUM/OAuth+server+support ，第 3 部分...

# sencha-touch-2 - 如何在应用程序加载期间捕获“未捕获的类型错误：无法读取未定义的属性‘isModel’？

> ID：13111510
> 
> 赞同：3
> 
> 时间：2012-10-28T18:05:04.470
> 
> 标签：sencha-touch-2

我正在使用本地存储的 Chrome 上开发 ST2。有时，存储架构似乎已损坏。发生这种情况时，我的应用程序在加载过程中失败，并显示“未捕获的 typeError：无法读取未定义的属性 'isModel'”。让我的应用程序运行的唯一方法是在控制台中执行 localstorage.clear()。

我假设这是一个 ST2 错误，因为损坏的发生似乎与我的代码或我在应用程序中所做的事情无关。

我的主要问题是如何捕获异常，以便应用程序可以恢复，或者提醒用户发生了什么？现在，该应用程序根本无法加载。我尝试将 Ext.application() 包装在 app.js 中，但执行正确。未达到我的启动功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T12:30:36.810

您的应用程序一定发生了一些奇怪的事情。可能您同时找到了原因并认识到失败位在您的应用程序中。无论如何，如果您遇到这样的事情，那么最好的选择可能是捕获错误事件并在那里进行错误处理。IE

```
window.addEventListener("error", function(errorEvent) {

    //
    // Add your error handling here
    //
    // if returns true, the error is suppressed and not thrown
    return false;
 }); 
```

# java - 使用位数组和位掩码进行时间范围检查

> ID：13111511
> 
> 赞同：3
> 
> 时间：2012-10-28T18:05:08.970
> 
> 标签：java, arrays, algorithm, mask, bit

我有一个 Java 集合`<String username, ArrayList loginTimes>`。例如，一个条目可能看起来像`["smith", [2012-10-2 08:04:23, 2012-10-4 06:34:21]]`. 时间有一秒的分辨率。我希望为在间隔超过 24 小时但间隔不到 7 天的时间内至少登录两次的所有用户输出用户名列表。

有一种简单的 O(n^2) 方法可以做到这一点，对于给定的用户，您将每个登录时间与其他每个登录时间进行比较，并检查它们是否符合所需条件。还有一些 O(nlogn) 的方法，比如将 loginTimes 存储为二叉搜索树，对于每个登录时间（N 个），通过树（log N）查看是否有另一个登录时间符合要求。

我的理解是，还有一个解决方案（O（n）或更好？），您可以从登录时间创建一个位数组（BitSet），并使用某种掩码来检查所需的条件（至少两次登录次相隔 24 小时，但相隔不到 7 天）。有人知道如何实现吗？还是其他可能的有效（O（n）或更好）解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:52:44.420

您可以在 O(M * NlogN) 中执行此操作，其中 M 是编号。用户数（集合的大小）和 N 的平均登录时间长度（它是一个数组）：

对于集合中的每个用户，请执行以下操作：
1- 对列表 loginTimes 进行排序。这是一个 O(NlogN) 任务
2- 扫描列表并搜索您的约束是否适用。这可以在 O(N) 时间内完成。

因此，对于每个用户，总成本为 O(N) + O(NlogN) => O(2N*logN) => O(NlogN)

# java - 升级到 Java 7 后 Javadoc 格式损坏

> ID：13111512
> 
> 赞同：5
> 
> 时间：2012-10-28T18:05:14.700
> 
> 标签：java, javadoc, java-7

自从将我的项目升级到 Java 7 后，生成的文档现在已经破坏了格式。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T18:05:14.700

Java 7 更改了 Javadoc 使用的 CSS 样式表，因为文档现在对各种页面元素具有不同的格式。

您可以从 Oracle 下载正确的样式表：

[http://docs.oracle.com/javase/7/docs/api/stylesheet.css](http://docs.oracle.com/javase/7/docs/api/stylesheet.css)

# html - 基础 CSS：了解 960gs 基础网格

> ID：13111516
> 
> 赞同：2
> 
> 时间：2012-10-28T18:05:31.383
> 
> 标签：html, css, 960.gs

所以，我以为我知道我的基本 CSS，但现在我的大脑正在扭曲。我想在我的网站上实现960网格系统，但是在做之前，我想完全了解代码的原理。

我有两个问题。首先，CSS 调整列的宽度。左边有父类“.container”，右边有两个类，其中“列”类是“一”和“二”类的后代选择器。这是否是说“列”类包含在“一个”和“容器”中时是 40px 宽？简单地说：我不是很了解这三个要素之间的关系。

```
.container .one.column          { width: 40px;  }
.container .two.columns         { width: 100px; } 
```

第二个问题：调用HTML代码中的类时，似乎是用代码完成的

```
<div class=one column>Content</div> 
```

对？但是没有标记为“一列”的类，只有后代选择器“列”到“一”。我没有得到什么？提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:12:29.170

在 HTML 中，您可以将多个类应用于单个元素。但是上面的语法是不正确的；该值必须用引号括起来：

```
<div class="one column">Content</div> 
```

如果没有引号，您最终会得到两个属性：`class=one`and `column`，这是不同的（和无效的 HTML）。

HTML 没有选择器的概念，因此它们之间的空间不是后代选择器，属性值本身也不是选择器。相反，空格只是一个分隔符，用于将它们区分为两个单独的类。

因此，为了回答这两个问题，选择器`.one.column`适用于同时具有这两个类的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:12:46.127

`class`属性没有任何类型的 CSS 处理，例如后代选择器。属性的值`class`是要应用于元素的以空格分隔的类列表。所以这个`div`：

```
<div class="one column"></div> 
```

有两个类`one`和`column`.

然后，CSS 选择器`.one.column`适用于同时具有类`one`和`column`.

# objective-c - 如何确保在正确的时间调用 Dispatch Notify

> ID：13111517
> 
> 赞同：1
> 
> 时间：2012-10-28T18:05:43.023
> 
> 标签：objective-c, multithreading, grand-central-dispatch

我有一个场景，我必须遍历一个帐号列表，去获取这些账户的详细信息，然后将聚合信息传递给 completionBlock。为了促进这一点，我正在使用 dispatch_group_* 方法。不幸的是，即使我已明确调用，在组完成*之前*仍会调用完成块

`dispatch_group_wait(_imfDispatchGroup, DISPATCH_TIME_FOREVER);`

控制台日志示例（原始）：

> 2012-10-28 13:58:46.722 ThreadingHell[81909:303] 在 loginResponse 中
> 
> 2012-10-28 13:58:46.724 ThreadingHell[81909:303] 在 obj 的帐户循环内：account1
> 
> 2012-10-28 13:58:46.724 ThreadingHell[81909:303] 在 obj 的帐户循环内：account2
> 
> 2012-10-28 13:58:46.724 ThreadingHell[81909:1b03] 内部细节：L0i6kRVzGG 细节
> 
> 2012-10-28 13:58:46.724 ThreadingHell[81909:1a03] 内部细节：SE0QjhO8Hh 细节
> 
> 2012-10-28 13:58:46.724 ThreadingHell[81909:303] 在 obj 的帐户循环内：account3
> 
> 2012-10-28 13:58:46.725 ThreadingHell[81909:1a03] 内部完成 __66-[ModelManager getAccountDetailsForAccountNumber:completionBlock:]_block_invoke_015
> 
> 2012-10-28 13:58:46.725 ThreadingHell[81909:1803] 内部细节：9SsGYOX3u5 细节
> 
> 2012-10-28 13:58:46.725 ThreadingHell[81909:1a03] 账户详情
> 
> 2012-10-28 13:58:46.725 ThreadingHell[81909:303] 在 obj 的帐户循环内：account4
> 
> 2012-10-28 13:58:46.725 ThreadingHell[81909:1b03] 内部完成 __66-[ModelManager getAccountDetailsForAccountNumber:completionBlock:]_block_invoke_015
> 
> 2012-10-28 13:58:46.726 ThreadingHell[81909:1803] 内部完成 __66-[ModelManager getAccountDetailsForAccountNumber:completionBlock:]_block_invoke_015
> 
> 2012-10-28 13:58:46.726 ThreadingHell[81909:303] 在 obj 的帐户循环内：acount5
> 
> 2012-10-28 13:58:46.726 ThreadingHell[81909:1a03] 成功帐户循环
> 
> 2012-10-28 13:58:46.726 ThreadingHell[81909:1b03] 详细信息已找到帐户
> 
> 2012-10-28 13:58:46.726 ThreadingHell[81909:2303] 内部细节：wSXis5bIVs 细节
> 
> 2012-10-28 13:58:46.728 ThreadingHell[81909:1803] 账户详情
> 
> 2012-10-28 13:58:46.728 ThreadingHell[81909:2403] 内部细节：SrIfbzBLr7 细节
> 
> 2012-10-28 13:58:46.728 ThreadingHell[81909:1a03] accountDetails 的当前实例：（“L0i6kRVzGG 详细信息”）
> 
> 2012-10-28 13:58:46.728 ThreadingHell[81909:1803] 成功帐户循环
> 
> 2012-10-28 13:58:46.728 ThreadingHell[81909:1b03] 成功帐户循环
> 
> 2012-10-28 13:58:46.729 ThreadingHell[81909:2403] 内部完成 __66-[ModelManager getAccountDetailsForAccountNumber:completionBlock:]_block_invoke_015
> 
> 2012-10-28 13:58:46.729 线程地狱[81909:303] !!!!!!!!!!!! 即将调用完成块。这应该是最后
> 
> 2012-10-28 13:58:46.729 ThreadingHell[81909:2303] 内部完成 __66-[ModelManager getAccountDetailsForAccountNumber:completionBlock:]_block_invoke_015
> 
> 2012-10-28 13:58:46.730 ThreadingHell[81909:1803] accountDetails 的当前实例：（“L0i6kRVzGG 详细信息”，“9SsGYOX3u5 详细信息”）
> 
> 2012-10-28 13:58:46.730 ThreadingHell[81909:1b03] accountDetails 的当前实例：（“L0i6kRVzGG 详细信息”、“9SsGYOX3u5 详细信息”、“SE0QjhO8Hh 详细信息”）
> 
> 2012-10-28 13:58:46.731 ThreadingHell[81909:2403] 账户详情
> 
> 2012-10-28 13:58:46.731 ThreadingHell[81909:2303] 账户详情
> 
> 2012-10-28 13:58:46.732 ThreadingHell[81909:2403] 成功帐户循环
> 
> 2012-10-28 13:58:46.731 ThreadingHell [81909:303] obj: { }
> 
> 2012-10-28 13:58:46.732 ThreadingHell[81909:2303] 成功帐户循环
> 
> 2012-10-28 13:58:46.732 ThreadingHell [81909:303] 错误：（空）
> 
> 2012-10-28 13:58:46.732 ThreadingHell[81909:2403] accountDetails 的当前实例：（“L0i6kRVzGG 详细信息”、“9SsGYOX3u5 详细信息”、“SE0QjhO8Hh 详细信息”、“wSXis5bIVs 详细信息”）

// 来自最新提交的更新日志 [https://github.com/kwylez/ThreadingHell/tree/80cc29fab142b4dc1f386df747c5142b28e2dd84]

> 1b03] accountDetails的当前实例：（“CP3ioYdvXp详细信息”，“6k635XoJOV详细信息”，“2TjGF1fdaZ详细信息”，“0YiuX9gHsu详细信息”，“9RcyOfjRa5详细信息”）2012-10-28 16:32:39.008 ThreadingHell[83171:303]！ ！！！！！！！！！即将调用完成块。这应该是最后 2012-10-28 16:32:39.009 ThreadingHell[83171:303] obj: { } 2012-10-28 16:32:39.009 ThreadingHell[83171:303] 错误：（空）

我错过了什么“操作顺序”？

这是 github 上示例项目的链接（代码太多，无法放在这里）：

[https://github.com/kwylez/ThreadingHell](https://github.com/kwylez/ThreadingHell)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:56:32.600

*（我还没有下载你的项目，在我的手机上接听，道歉......）*

请改用 NSOperationQueue。将每个操作添加为完成操作的依赖项。

这是一个更清洁、更像可可的 API。您不必进行太多更改，因为您可以使用 NSBlockOperation 并传入您当前用于 GCD 的相同块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:45:08.963

最新的代码[提交](https://github.com/kwylez/ThreadingHell/tree/36aedfdfcbf6fbd7e1446088fcfaf743110c4442)

解决了我发表的最后一条评论的问题，因此我的问题得到了回答……使用 dispatch_group 方法。

在该`getAccountDetailsForAccountNumber:completionBlock`方法中，我删除了对方法的调用`dispatch_group_notify`并移动了“完成”块登录`dispatch_group_async`。这解决了这个问题，因为完成块现在是队列任务的一部分，并且`getAccountListMetaInformation:`必须“服从”`dispatch_group_wait`命令，而不是在通知之后接收并发通知之前。

# java - PreparedStatement 查询没有返回数据

> ID：13111518
> 
> 赞同：0
> 
> 时间：2012-10-28T18:06:00.317
> 
> 标签：java, prepared-statement

我正在尝试使用 SELECT 进行选择`PreparedStatement`，但没有得到任何结果，尽管存在数据。如果我`Statement`改用，我会得到想要的结果，所以不知道为什么我没有得到任何`PreparedStatement`.
有任何想法吗？

这是我的代码：

```
String species = "Snail";
PreparedStatement preparedStatement = con.prepareStatement("Select * from lifeforms where species=?",PreparedStatement.RETURN_GENERATED_KEYS);
preparedStatement.setString(1, species);
preparedStatement.execute();
ResultSet resultSet = preparedStatement.getGeneratedKeys(); 
```

另外 - 我试过了

```
resultSet = preparedStatement.execute(); 
```

但这不会编译，说我必须改变`resultSet`以期望一个布尔值。

对此的任何见解将不胜感激。

抱歉，如果这是显而易见的事情，但我已经阅读了文档，直到我几乎失去知觉，而且我只是在学习 java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:30:15.313

啊，所以我终于找到了这个问题的答案——以防其他人被困在同一件事上。

该`execute()`方法没有返回值，尽管编译器建议它期望一个布尔返回值。也许它只是返回 true 或 false 表示成功与否？

该`executeUpdate()`方法返回更新/插入或删除的记录数的 int 值。

要获取查询语句的结果集（例如 Select * from someTable），请使用该 `ResultSet rs = preparedStatement.executeQuery()`方法。这会将实际查询结果返回到 ResultSet 变量中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T08:21:16.150

该`execute()`函数返回一个布尔值，因此如果要执行必须使用的选择语句，您将无法将其放入结果集的对象中`executeQuery()`。

# jquery - jQuery slideToggle 函数

> ID：13111519
> 
> 赞同：0
> 
> 时间：2012-10-28T18:06:01.953
> 
> 标签：jquery, slidetoggle

我正在尝试使用 slideToggle 显示/隐藏一个 div，但同时更改另一个 div 的内容。

到目前为止，我有：

```
 $('#show-advanced').click(function(){
            $("#advanced").slideToggle("fast","linear",function() {
              $('#show-advanced').html('Advanced Options &#9652;');
            }, function() {
              $('#show-advanced').html('Advanced Options &#9662;');
            });
        }); 
```

它更改了第一次单击的内容，但在第二次切换时它不会将其更改回来。

任何帮助将不胜感激。

编辑：

固定使用：

```
 $("#show-advanced").toggle(function() {
                $('#advanced').slideDown("fast");  
                $('#show-advanced').html('Advanced Options &#9652;');
            }, function() {
                $('#advanced').slideUp("fast"); 
                $('#show-advanced').html('Advanced Options &#9662;');
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:18:10.997

在我看来，您需要`.toggle`and的组合`.slideToggle`：

```
$('#show-advanced').toggle(function() {
    $("#advanced").slideToggle("fast","linear",function() {
        $('#show-advanced').html('Advanced Options &#9652;');
    });
), function() {
    $("#advanced").slideToggle("fast","linear",function() {
        $('#show-advanced').html('Advanced Options &#9662;');
    });
}); 
```

`.toggle`每次单击时将这两个函数绑定到`#show-advanced`它们并在它们之间交替。

# javascript - $ Javascript函数

> ID：13111520
> 
> 赞同：-1
> 
> 时间：2012-10-28T18:06:07.250
> 
> 标签：javascript, jquery

> **可能重复：**
> [有人可以解释 Javascript 中的美元符号吗？](https://stackoverflow.com/questions/846585/can-someone-explain-the-dollar-sign-in-javascript)

为什么某些javascript函数在函数声明之前有一个$？例如，这是用于 JQuery 滑块的 javascript。源代码可以在这里找到[http://jqueryui.com/slider/#rangemin](http://jqueryui.com/slider/#rangemin)

```
<script>
$(function() {
    $( "#slider-range-min" ).slider({
        range: "min",
        value: 37,
        min: 1,
        max: 700,
        slide: function( event, ui ) {
            $( "#amount" ).val( "$" + ui.value );
        }
    });
    $( "#amount" ).val( "$" + $( "#slider-range-min" ).slider( "value" ) );
});
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T18:07:14.647

这`$`不是 JavaScript 的东西，它只是 jQuery 使用的快捷方式。`$`在 JavaScript 中是一个有效的标识符名称，而且它很短，所以它在库中很流行（jQuery、Prototype，可能还有其他一些人使用它）。`$`只是符号的别名`jQuery`。

您在此处引用的代码是调用`$`函数并传入函数引用（在这种情况下，对于内联定义的函数）。当您将函数引用传递给`$`(or `jQuery`) 时，您是在要求 jQuery 库在 DOM 准备好时运行该函数。这是`$(document).ready(...)`. [文档中的](http://api.jquery.com/jQuery/#jQuery3)详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T18:08:18.067

它们指的是由添加的一些文件加载​​的库。$ 可能指 jQuery 或 Prototype 等，但现在最常见的是 jQuery

您在这里指的 $ 是 jQuery

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T18:07:24.760

这些是 jQuery 函数。`$`只是 jQuery 函数的别名。您需要 jQuery 库才能使用该代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T18:11:52.553

`$`是 JavaScript 中的常规字符。因此，它可以用作变量：

```
var $ = 5; 
```

但是这个角色已经被某些框架专门用来做你在那个网站上看到的事情。它是一个对象，将使用多种方法来解决由常见的错误功能/非跨浏览器代码质量引起的头痛。 `window.$`已被定义为一个函数，这就是为什么您看到调用运算符被应用于它的原因：

```
$( .. ) 
```

在调用运算符中，传递了一个函数表达式。

```
$( function() {} ); 
```

正如`$`jQuery 中定义的那样，函数表达式中的任何内容都将在浏览器加载时立即执行。此语法的常见变体如下：

```
$(document).ready(function() {

}); 
```

这意味着大致相同的事情。

# c - 输出重定向时 SIGINT 丢失；如何检测程序中的终止？

> ID：13111522
> 
> 赞同：2
> 
> 时间：2012-10-28T18:06:11.170
> 
> 标签：c, linux, sigint

我编写了检测 SIGINT 的控制台程序，因此当用户按下 Ctrl+C 时，程序会执行一些操作并终止。

但是当我用管道将这个程序重定向到任何其他程序时，例如： `./my_program | tee xxx` SIGINT 永远不会出现在我的处理程序中。尽管这个程序终止。处理 SIGTERM 没有任何效果。SIGTERM 也不会出现在 Ctrl+C 之后。

如何在所有情况下检测到该程序被 Ctrl+c 中止？

* * *

我的 SIGINT 和 SIGPIPE 测试用例：

```
 #include <csignal>
#include <cstdio>

bool break_request=false;
bool term_request=false;

extern "C" void break_handler(int)
{
    break_request=true;
    printf("Ctrl+C detected\n");
}

extern "C" void term_handler(int)
{
    term_request=true;
    printf("pipe detected\n");
}

int main()
{
    signal(SIGINT,break_handler);
    signal(SIGPIPE,term_handler);

    while(true)
    {
        if(break_request)
        {
            printf("break request handled\n");
            break;
        }

        if(term_request)
        {
            printf("pipe request handled\n");
            break;
        }
    }

    printf("terminating\n");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T20:06:43.777

Your `printf` output is going down the pipe. Use `fprintf(stderr, "...")` instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:11:10.573

如果您的程序在管道中使用，它会`SIGPIPE`在另一端没有阅读器的情况下写入。

只需安装一个`SIGPIPE`处理程序。

# java - 在java中实现patricia trie

> ID：13111532
> 
> 赞同：2
> 
> 时间：2012-10-28T18:07:40.573
> 
> 标签：java, c++, trie, radix

我正在尝试用 java 重写一个 c++ patricia trie。C++ 代码来自[这里](http://www.codeproject.com/Articles/9497/Patricia-Trie-Template-Class)

[完整的源代码](http://pastebin.com/uUa063i6)

我有点卡住了。

所以这是我的理解：

```
#define ZEROTAB_SIZE 256
head->key = (char*)calloc(ZEROTAB_SIZE, 1); 
```

我们为密钥创建了一个 256 位的数组，因此我们可以有一个最大长度为 32 个字符的字符串，每个字符用 8 位表示。我可以用java中的char数组来实现它吗？

```
template <class T>
int PatriciaTrie<T>::bit_get(PatriciaTrieKey bit_stream, int n) {
  if (n < 0) return 2; // "pseudo-bit" with a value of 2.
  int k = (n & 0x7);
  return ( (*(bit_stream + (n >> 3))) >> k) & 0x1;
} 
```

k 获取 n 的最后 7 位，我们移动到字符串的 n/8 字符（不完全是 n/8，因为向右移动会将任何低于 8 的内容删除为零）然后我们移动 bit_stream[n> 的值>3] 由 k 然后我们得到最后一位。如果我在 java 中使用数组，我可以将其重写为

```
return (bit_stream[n>>3] >> k) & 0x1; 
```

?

```
template <class T>
int PatriciaTrie<T>::bit_first_different(PatriciaTrieKey k1, PatriciaTrieKey k2) {
    if (!k1 || !k2)
        return 0; // First bit is different!
    int n = 0;
    int d = 0;
    while ( (k1[n] == k2[n]) &&
            (k1[n] != 0) &&
            (k2[n] != 0) )
        n++;
    while (bit_get(&k1[n], d) == bit_get(&k2[n], d))
        d++;
    return ((n << 3) + d);
} 
```

现在这是令人困惑的地方，直到第二个while循环的第一部分看起来足够清晰，循环并检查有多少位相等且非零，但是我不确定第二个循环在做什么，我们获取地址两个键中的第一个位是否相等，如果它们相等，我们再次检查直到我们发现不相等的位？

主要是我不确定这里如何使用密钥的地址，但我也可能对 bit_get 类中的位移感到困惑。

我想对我的 java 类的 c++ 和 java 中的 trie 进行比较，并且我希望使实现尽可能相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:51:19.587

我对这个数据结构不熟悉，但是你对这段代码的理解存在一些问题。

首先，`calloc`分配 256 个字节，而不是位。 `new byte[256]`在java中可以比较。

其次，`n & 0x7`得到 3 位`n`，而不是 7 位。更清晰的编写方法是`n/8`and`n%8`而不是`n>>3`and `n & 7`，但是如果您的编译器很愚蠢，则按位运算可能会稍微快一些。

你是对的那`(bit_stream[n>>3]>>k) & 1`是一样的。

现在，第一个循环`bit_first_different`循环的是字节，而不是位。检查 0 是为了防止超出键的末端。一旦该循环终止，`n`指的是第一个不同的字节。然后第二个循环寻找不同的位。

请注意，如果两个键不同，则第二个循环可能会在键的末尾运行，从而可能导致分段错误。

现在， & 正在获取地址，`k1[n]`因为`bit_get`函数需要一个指向字符的指针……这会传入`n`位流的第 th 个元素。循环之后，`d`是 的第一个不同位的偏移量`k[n]`。

最后，代码将`n`（哪个字节？）与`d`（那个字节中的哪个位？）结合起来给出位。我再次主张`8*n+d`清晰，但这是一个品味问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:43:39.460

> 我可以用java中的char数组来实现它吗？

我的 java 有点生疏，但我相信`char`它是用 java 签名的，这意味着它`>>`不会像你期望的那样做。那是因为移动有符号数不会移动符号位，所以你真正想要的是`>>>`运算符或只使用`byte`无符号的类型。我有一种感觉，这是各种错误，所以请仔细检查。

> 返回 (bit_stream[n>>3] >> k) & 0x1;

在 C 或 C++ 中，`*(array + k)`这只是另一种编写方式，`array[k]`因此您的翻译看起来正确。至于解释，`bit_stream[n>>3]`本质上是获取所需位所在的字节。`>> k`将所需位移动到最低有效位位置。最后，我们通过用 屏蔽掉所有我们不感兴趣的位`& 0x1`。根据该位是否设置，这给我们留下了 0 或 1 的值。

最后一个函数所做的是比较 2 个位字符串并返回 2 个字符串首先不同的位位置。第一个循环本质上是第二个循环的优化版本，它不是逐位比较，而是检查整个字节。

换句话说，它首先遍历每个字节并找到前 2 个不同的字节。然后它获取这 2 个不同的字节并遍历它们，直到找到不同的前 2 位。请注意，`bit_get`在这种情况下，函数永远不会收到大于 7 的 n，因为我们知道字节中的某处存在差异。然后根据两个循环的结果构造最终位位置，如下所示`(number_of_equal_bytes * 8) + number_of_equal_bits)`：

# java - Java / Android：LinkedList 竞争条件

> ID：13111533
> 
> 赞同：1
> 
> 时间：2012-10-28T18:07:48.540
> 
> 标签：java, android, linked-list, synchronized

我`LinkedList`在一个 android 应用程序中使用 a ，在那里我遇到了竞争条件。1 个线程将数据添加到其中，`LinkedList`而另一个线程在检索到它们时将其删除。我遇到了从未处理过我新添加的对象的情况。

我在谷歌上搜索了 Java 同步对象，但要么我想得太简单，要么我错过了一些东西。从我读到的“对象同步”是两者中比较困难的，所以我想知道是否只包含一段代码`sychronized(object) { };`就足够了？

所以我有：

```
public void function addMove(Object move) {
  synchronized(list) {
    list.add(move);
  };
};

public void function second() {
   synchronized(list) {
   // iterate through the list
   list.clear;
  };
}; 
```

这真的是我所需要的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:19:58.620

**-**在您的情况下，如果您的列表与对象正确耦合并且除了这种唯一方法之外没有其他方法可以访问它，那么我认为这就足够了。

**-**此外，还可以使用以下方法：

```
public class Test{

 private LinkedList<Object> list = new LinkedList<Object>();

 public void function addMove(Object move) {
  synchronized(this) {
    list.add(move);
  }
}

public void function second() {
   synchronized(this) {
   list.clear;
  }
 }

} 
```

**////////////////////////////编辑部分//////////// /////////**

**-** `Synchronization`用于**保护数据的关键状态，**并**应用于**`method`或`atomic statements`访问要`field`保护其数据的数据。

**-** `Every object`拥有**一个且只有一个锁**，将由 a 获得`thread`以访问有权访问其的方法`synchronized` **或**原子**语句**`instance variables`。

**-**类似地，`every Class`只有**一个锁**，由线程获取，以访问可以访问其的方法`synchronized` **或**原子**语句**`static variable`。

**-**现在，当一个`thread`对象获得对一个对象的锁的访问权，然后它就获得了对其同步方法或原子语句的访问权，**如果那时另一个线程试图访问同一个对象锁**，那么该**线程将被拒绝**访问并且它移动到`blocked state`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:13:28.657

如果列表被正确封装到您的对象中（即没有其他对象可以访问列表），并且如果这些是访问列表的唯一方法，那么是的，这就是您所需要的。

关键是对列表的每次访问都必须在同步块中完成。并且每个同步块必须在同一个对象上同步（`list`在您的代码示例中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:20:40.307

是的，这是您可以控制对象的线程访问的方式。您所要做的就是查看您的方法的时机。仅当列表中添加了数据时才应调用 clear 命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T05:07:01.463

我不知道Android是否支持Java 5，但是java.util.concurrent包含很多优秀的类来支持队列，比如ConcurrentLinkedQueue。

# jquery - jquery .click-event 没有像预期的那样使用计数器变量

> ID：13111538
> 
> 赞同：-1
> 
> 时间：2012-10-28T18:08:13.153
> 
> 标签：jquery, variables, for-loop, click, counter

我有类似初学者的问题，因为 javascript 以一种意想不到的方式使用了变量 'i'：

```
for(var i=0; i<3;i++){
    $("a[href=#markers"+i+"]").click(function() {
        console.info(this);
        console.info("click: "+i);
    });
} 
```

这是我的控制台：

```
<a href="#markers0">
click: 3
<a href="#markers1">
click: 3
<a href="#markers1">
click: 3 
```

但我想要这个：

```
<a href="#markers0">
click: 0
<a href="#markers1">
click: 1
<a href="#markers1">
click: 2 
```

有人可以帮助解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:19:52.820

循环将继续增加`i`变量，而与您单击的任何内容无关。

为什么不只针对所有具有以 开头的 href 的元素，`#markers`然后从 href 中获取数字，如下所示：

```
$('a[href^="#markers"]').on('click', function() {
     var i = $(this).attr('href').replace('#markers','');
     console.log("click: "+i);
});​ 
```

[**小提琴**](http://jsfiddle.net/cUVUq/1/)

或者，如果出于某种奇怪的原因您需要循环，您始终可以将变量存储在 data() 中：

```
for(var i=0; i<3;i++){
    $("a[href=#markers"+i+"]").data('i',i).click(function() {
        console.info(this);
        console.info("click: "+$(this).data('i'));
    });
}​ 
```

[**小提琴**](http://jsfiddle.net/cUVUq/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:35:38.997

这可以在闭包的帮助下解决。在您的情况下，**单击事件**只是被分配了**变量 i** ..但是当您单击链接时， i 的值设置为 3，因为它们都指向相同的内存地点..

使用闭包解决了这里的问题，因为函数是针对 i.. 的当前值执行的。试试这个

```
for(var i=0; i<3;i++){
  (function(num){
       return  $("a[href=#markers"+num+"]").click(function() {
                  console.info(this);
                  console.info("click: "+num);
               });
   })(i)
} 
```

[检查小提琴](http://jsfiddle.net/sushanth009/cUVUq/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-21T00:43:34.170

无需为每个链接创建单独的点击处理程序，或单独选择每个链接。
此外，其他答案仅适用于一组预定义的链接（0..2）。
我的版本使用单个选择器、单个处理程序，并适用于任意数量的链接。
即使它们之间有孔。

```
// all of the #markers* href elements
var links = $("a[href^=#markers]");

// common click handler
links.click(function () {
    // get the number from the href
    var num = parseInt($(this).attr("href").substr(8), 10);    
    console.log("click", num);
}); 
```

[在这里](http://jsfiddle.net/8z6CA/2/)演示小提琴。

# openssl - 我可以通过 ENV 变量或配置管理 OpenSSL 1.0+ 的 TLS 版本协商吗？想要强制 TLSv1

> ID：13111540
> 
> 赞同：2
> 
> 时间：2012-10-28T18:08:22.687
> 
> 标签：openssl, shopify

我可以通过设置 ENV 变量或`openssl.cnf`配置文件来强制使用 OpenSSL 的任何程序使用 SSLv3 或 TLSv1 吗？我发现我的 OpenSSL 1.0.1c 版本一开始就开始协商 TLSv1.2，这让我无法连接到特定的 API（即 Shopify API）。它失败了`SSL protocol error`。

这个问题对于任何与我的 OpenSSL 1.0.1c 链接的软件都很常见，版本 <1.0 运行良好，在我的情况下 OSX 捆绑了 0.9.8r。还发现 Ubuntu 的 1.0.1c 还可以……那是压倒性的。

一个测试：

```
curl https://ApiKey:Passwd@shop.myshopify.com/admin/customers.json 
```

恰好在 1 分钟后失败。与`Unknown SSL protocol error`.

```
curl -1 https://ApiKey:Passwd@shop.myshopify.com/admin/customers.json 
```

通过立即OK。

因此，默认协商无法正常工作。我需要强制使用 SSLv3 或 TLSv1（不是 TLSv1.1+），但我不会重写每个库或实用程序。

我将使用 Python，目前我可以只使用 PyCURL 并强制使用 SSLv3 或 TLSv1 进行通信。由于 SSL 默认协商问题，我无法使用原始 ShopifyAPI 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:21:59.910

看起来连接需要使用 --sslv3 才能正常工作，有关更多详细信息，请参阅其他 SO 帖子[我可以使用 api 更改 shopify 博客上的日期吗？](https://stackoverflow.com/questions/12221455/can-i-change-a-date-on-shopify-blog-using-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T08:07:30.603

据我所知，你不能。您必须将选项传递给 curl 调用或制作一个实用程序来为您完成。

# c# - xml 节点（按元素）

> ID：13111542
> 
> 赞同：0
> 
> 时间：2012-10-28T18:08:29.350
> 
> 标签：c#, xml

下面是我需要通过 C# 提取数据的 xml 文件的示例。这是我第一次阅读 xml 文件和 xml 的初学者。任何人都有我如何查找/加载 Export_B 的字段顺序值的示例？

```
<?xml version="1.0" encoding="utf-8"?>
<Config>
    <OutFolderCSV>c:\Output\2012\upload_Files</OutFolderCSV>
    <OutFolderImage>c:\Output\2012\NM_Scorecard_Images</OutFolderImage>
    <PathOutLogFile>c:\Output\2012\Log\Matches.log</PathOutLogFile>
    <FieldSeparator>,</FieldSeparator>
    <ExportFile>
    <Name>Export_A</Name>
    <FieldOrder>matchID</FieldOrder>
    <FieldOrder>contactID</FieldOrder>
        <FieldOrder>stageID13</FieldOrder>
        <FieldOrder>stringScore1a</FieldOrder>
        <FieldOrder>xScore1a</FieldOrder>
    <FieldOrder>stageID14</FieldOrder>
        <FieldOrder>stringScore1b</FieldOrder>
        <FieldOrder>xScore1b</FieldOrder>
    <FieldOrder>stageID15</FieldOrder>
        <FieldOrder>stringScore1c</FieldOrder>
        <FieldOrder>xScore1c</FieldOrder>
    </ExportFile>
    <ExportFile>
    <Name>Export_B</Name>
    <FieldOrder>matchID</FieldOrder>
    <FieldOrder>contactID</FieldOrder>
        <FieldOrder>stageID16</FieldOrder>
        <FieldOrder>stringScore1a</FieldOrder>
        <FieldOrder>xScore1a</FieldOrder>
    <FieldOrder>stageID17</FieldOrder>
        <FieldOrder>stringScore1b</FieldOrder>
        <FieldOrder>xScore1b</FieldOrder>
    <FieldOrder>stageID18</FieldOrder>
        <FieldOrder>stringScore1c</FieldOrder>
        <FieldOrder>xScore</FieldOrder>
   </ExportFile>
</Config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:27:48.623

使用 LINQ to XML：

```
var doc = XDocument.Load(@"c:\path\to\file.xml");
var fieldOrders =
    from exportFile in doc.Descendants("ExportFile")
    where (string)exportFile.Element("Name") == "Export_B"
    from fieldOrder in exportFile.Elements("FieldOrder")
    select (string)fieldOrder; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-28T18:11:44.283

我写了一篇文章 [http://www.codeproject.com/Articles/33769/Basics-of-LINQ-Lamda-Expressions](http://www.codeproject.com/Articles/33769/Basics-of-LINQ-Lamda-Expressions#xlinq)

在 XML 上使用 XDocument 对象。

您可以使用轻松解析 XML

```
XDocument.Load(filepath) 
```

请阅读 Xlinq 部分以解析对象。

编辑 ：

您可以使用以下代码更改 Export_B 的值：

```
var document = XDocument.Load(filepath)
var exportFiles = document.Descandants("ExportFile");
List<XElement> list = new List<XElement>();
foreach(var element in exportFiles)
{
     list.Add(element);

// Now you can do element.Element("Name") to get the name. Put a breakpoint on this, you can get the reference of all underlying objects.
    } 
```

# python - Python - 画一棵树 HW

> ID：13111544
> 
> 赞同：1
> 
> 时间：2012-10-28T18:08:35.240
> 
> 标签：python

我需要从 * 制作一棵树，高度需要是用户插入的数字，另外 2 个 * 用于额外的行，以及它的 1/3。

此外，最后一行之前必须没有空格。我制作了整个代码，但是最后一行和最长的一行出现在前面有一个空格..

我错在哪里？

```
print "Enter tree height:"
height=input()
i=1
space=height-1
while i<=2*height:

    print space*" ",i*"*"
    i=i+2
    space=space-1

trunk=height/3
j=0

while j<trunk:
    print (height-1)*" ","*"
    j=j+1 
```

输出：

```
Enter tree height: 3
  *
 ***
*****
  *
Enter tree height: 8
       *
      ***
     *****
    *******
   *********
  ***********
 *************
***************
       *
       * 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:28:41.510

尝试改变：

```
print space*" ",i*"*" 
```

经过：

```
print (space)*" " + i*"*" 
```

当你这样做时：

```
print ' ','3' 
```

输出不同于

```
print ' '+'3' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:52:43.113

这是我所做的：

```
#!/usr/bin/env python3
import math
import random

class Tree(object):
    def __init__(self, height=24, width=80, branches=5):
        self.height = height
        self.width = width
        self.branches = branches

    def draw(self):
        tree = [[" " for i in range(self.width)] for j in range(self.height)]

        # These are arbitrary trunk dimensions, you can change them
        trunk = {}
        trunk["width"] = math.floor(self.width / 12)
        trunk["height"] = math.floor(self.height * (2 / 3))

        # Center the trunk. (0, 0) is the top-left corner of the screen.
        trunk["x"] = int(math.floor(self.width / 2) - math.floor(trunk["width"] / 2))
        trunk["y"] = int(self.height - trunk["height"])

        for i in range(trunk["height"]):
            for j in range(trunk["width"]):
                tree[i + trunk["y"]][j + trunk["x"]] = "#"

        # Add branches
        for i in range(self.branches):
            # Choose a position on the side of the trunk
            branch = {}
            if random.randint(0, 1):
                side = -1
                branch["x"] = trunk["x"] - 1
            else:
                side = 1
                branch["x"] = trunk["x"] + trunk["width"]

            branch["y"] = random.randint(1, math.floor(trunk["height"] / 2)) + (self.height - trunk["height"]) - 1

            tree[branch["y"]][branch["x"]] = "#"

            # Just sort of squiggle around for a while
            branch["length"] = math.floor(self.width / 2)
            for i in range(branch["length"]):
                direction_determiner = random.randint(0, 10)
                direction = {}
                if direction_determiner < 8:
                    direction["x"] = side
                    direction["y"] = 0
                else:
                    direction["x"] = 0
                    direction["y"] = -1

                branch["x"] += direction["x"]
                branch["y"] += direction["y"]

                if not (0 <= branch["x"] < self.width) or not (0 <= branch["y"] < self.height):
                    break

                tree[branch["y"]][branch["x"]] = "#"

                # Add a leaf sometimes
                if branch["y"] < self.height - 2 and random.randint(0, 1):
                    tree[branch["y"] + 1][branch["x"]] = "."
                    tree[branch["y"] + 2][branch["x"]] = "."

        # Draw the tree
        for i in range(self.height):
            for j in range(self.width):
                print(tree[i][j], end="")
            print("")

if __name__ == "__main__":
    tree_drawer = Tree()
    tree_drawer.draw() 
```

它并不完美，但它可以输出如下内容：

```
~/tmp $ ./tree.py 
       ##      ###                                              #########       
        .#####  .########                                 ######....  ...       
        ... ..#### ..   #                              ####  .  ....  ...       
        ... .. . .##### ######                         ....  .                  
             . . .    .# . . .###                     #....            ####     
      ######     .    .# . . . ..                    #..              ##...     
      ..  ..#          ##########                   ##.           ####.....     
      ..  ...##          . .   ..##                #. .          ## . ..        
           .. .#         . .   ....# ######        ..         ####  .           
            . ..######           ..# ##############.         #....              
               ..   ..###         .########    ...############....              
               ..   .. .#####     .########    ###.. . ...  . .                 
                     . .. . ######.#.###### ###. ..  . ...  .                   
                        . . .. .   #.########... .                              
                            .. .   ########  ..                                 
                                    #######                                     
                                     ######                                     
                                     ######                                     
                                     ######                                     
                                     ######                                     
                                     ######                                     
                                     ######                                     
                                     ######                                     
                                     ###### 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:32:05.800

我会为此使用字符串格式：

```
print "Enter tree height:"
height=input()
max_width=((height-1)*2)+1

for i in range(1,max_width+1,2):
    print "{0:^{1:}}".format("*"*i,max_width)  # ^ to indent the code in center
                                               # as per  max_width

trunk=height/3

for i in range(trunk):
    print "{0:^{1:}}".format("*",max_width) 
```

**输出：**

```
monty@monty-Aspire-5050:~$ python so27.py
Enter tree height:
3
  *  
 *** 
*****
  *  
monty@monty-Aspire-5050:~$ python so27.py
Enter tree height:
8
       *       
      ***      
     *****     
    *******    
   *********   
  ***********  
 ************* 
***************
       *       
       * 
```

# c# - .Net 中的 ODBC 驱动程序

> ID：13111547
> 
> 赞同：3
> 
> 时间：2012-10-28T18:09:07.797
> 
> 标签：c#, .net, database, odbc

正在研究为特定数据源编写 ODBC 驱动程序。因为我最熟悉.Net，所以很好奇是否可以在.Net中完成部分（或大部分）编码......大概是使用一个可以通过互操作调用它的shim dll。如果这是可能的，那么我很好奇是否存在一些已经这样做的源代码，并且可能为我的项目提供一个好的起点？

# javascript - 随机属性纯 CSS

> ID：13111549
> 
> 赞同：2
> 
> 时间：2012-10-28T18:09:17.150
> 
> 标签：javascript, html, css

我只是想知道，是否可以仅使用 CSS 随机生成属性，或者需要一些 javascript。

我想要达到的效果是让彩色 div 随机定位在页面上。

[http://jsfiddle.net/pphheerroonn/F95Ju/2/embedded/result/](http://jsfiddle.net/pphheerroonn/F95Ju/2/embedded/result/)

```
HTML:
<div class="box wsbg1"></div>
<div class="box wsbg2"></div>
<div class="box wsbg3"></div>
<div class="box wsbg4"></div>

CSS:
body {
    height: 600px; background-color: #66ccff;}
.box {
    height: 200px; width: 200px; 
    -webkit-transform: rotate(-5deg);
    -moz-transform: rotate(-5deg);
    -webkit-box-shadow: 15px 15px 20px rgba(0, 0, 0, 0.3);
    -moz-box-shadow: 15px 15px 20px rgba(0, 0, 0, 0.3);
}
.wsbg1 {background-color: #ec0689;}
.wsbg2 {background-color: #ffde00;}
.wsbg3 {background-color: #09aeee;}
.wsbg4 {background-color: #5eb345;}
​ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T18:13:25.313

不，CSS 是确定性的。要么使用 javascript 创建随机性，要么每次使用 PHP 提供一个随机生成的 css 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T19:54:23.000

您可以使用 CSS 预处理器（例如 LESS 或 SASS）来做到这一点，以下是相同的相关答案：

[可以在 SASS / Compass 中创建随机数吗？](https://stackoverflow.com/questions/8626829/possible-to-create-random-numbers-in-sass-compass)

# c - 在Arduino上将字节转换为int时数据丢失

> ID：13111550
> 
> 赞同：3
> 
> 时间：2012-10-28T18:09:21.057
> 
> 标签：c, types, arduino, bit-manipulation

我有一个 3 字节数组，通过串行端口缓冲传入的字节。一旦它已满，我想使用字节来调用一个以字节和 int 作为参数的函数。理论上这应该不是问题，但由于某种原因，字节没有被正确地转换为 int。这是我的代码：

```
// for serialEvent()
uint8_t buffer[3] = {0, 0, 0};
uint8_t index = 0;

void serialEvent() {
  while (Serial.available()) {
    if (index > 2) {
      // buffer is full so process it
      uint16_t argument = (uint16_t)buffer[1];
      argument <<= 8;
      argument |= buffer[2];

      processSerial(buffer[0], argument);

      index = 0;
    }

    buffer[index] = Serial.read();

    index++;
  }
}

void processSerial(uint8_t action, uint16_t argument) { ... } 
```

问题似乎出在第一位向左移动以为第二位腾出空间的行中。我已经尝试再次通过串行端口输出变量，并且在位移操作之后，它是 0。

当我尝试用乘以 256（理论上具有相同的结果）替换位移操作时，也会发生同样的事情。

令人恼火的是，当我像这样分配一个静态值时，一切正常：

```
uint16_t argument = 0x00CD;
argument <<= 8; 
```

这是类型转换问题吗？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:29:14.557

还没有找到为什么会发生这种情况的解决方案，但是使用 word() 函数正是我想要的：

```
uint16_t argument = word(buffer[1], buffer[2]);
processSerial(buffer[0], argument); 
```

令人讨厌的是，它被定义为：

```
unsigned int makeWord(unsigned char h, unsigned char l) { return (h << 8) | l; } 
```

# jquery - 在 jquery 移动 UI 中进行幻灯片转换时无法执行 java 脚本

> ID：13111551
> 
> 赞同：0
> 
> 时间：2012-10-28T18:09:33.180
> 
> 标签：jquery, jquery-mobile

我有两个基于 jquery 移动 ui 的 html 文件，文件“1.html”和“2.html”

我正在做从 1.html 到 2.html 的简单幻灯片转换

我在 2.html 文件中发出一些 http post 请求，在转换之后，它没有在 2.html 中执行任何 js 代码。

1.html

```
<!DOCTYPE html>
<!--
Design by mRova Solutions
http://www.mrova.com
Released for free under a Creative Commons Attribution 2.5 License
-->
<html>
    <head>
        <title>O9 ShopAlot</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0;" />
        <meta name="apple-mobile-web-app-capable" content="yes" />

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
        <link rel="stylesheet" href="css1/style.css" />
        <link rel="stylesheet" href="css1/photoswipe.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
        <script type="text/javascript" src="js1/klass.min.js"></script>
        <script type="text/javascript" src="js1/code.photoswipe.jquery-3.0.4.min.js"></script>
        <script type="text/javascript" src="js1/custom.js"></script>
        <script type="text/javascript">

        function openBrands(id)
        {
            //open next page by slide effect
            //window.open("brand.html");
            alert(id);

              $.ajax({
                    type:       "get",
                    url:        "InterestJ",
                    data:       "id=" + id,
                    success:    function(data) {
                        alert(id+" Data Session Attribute Set");

                        /*
                        data=JSON.parse(data);
                        //alert($("#listID").innerHTML);
                        //alert(document.getElementById("listID").innerHTML);
                        var setHTML = '';
                        for( i in data)
                        {
                            if(i>0&&i!=data.length-1)
                            {
                                //ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-hover-a ui-btn-up-a
                                setHTML+='<li data-theme="a" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-hover-a ui-btn-up-a"><div class="ui-btn-inner ui-li ui-corner-top" aria-hidden="true"><div class="ui-btn-text">                       <a id="'+data[i].id+'"  href="brand.html" data-transition="slide" class="ui-link-inherit" onclick="openBrands(this.id)"; >'+data[i].interest+'</a>                  </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow"></span></div></li>'
                            }
                            else if(i!=data.length-1){
                                setHTML+='<li data-theme="a" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-corner-top ui-btn-up-a"><div class="ui-btn-inner ui-li ui-corner-top" aria-hidden="true"><div class="ui-btn-text">                        <a id="'+data[i].id+'" href="brand.html" data-transition="slide" class="ui-link-inherit" onclick="openBrands(this.id)">'+data[i].interest+'</a>                     </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow"></span></div></li>'; 
                            }else                               
                            setHTML+='<li data-theme="a" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-corner-bottom ui-btn-up-a"><div class="ui-btn-inner ui-li ui-corner-top" aria-hidden="true"><div class="ui-btn-text">                         <a id="'+data[i].id+'" href="brand.html" data-transition="slide" class="ui-link-inherit" onclick="openBrands(this.id)">'+data[i].interest+'</a>                     </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow"></span></div></li>';

                            //alert(data[i].id);
                            //alert(data[i].interest);

                        }
                        document.getElementById("listID").innerHTML=setHTML;
                     */ 
                    }
                });
        }

        function loadInterest(){
                $.ajax({
                    type:       "post",
                    url:        "InterestJ",
                    //data:       "term=" + term,
                    success:    function(data) {
                        data=JSON.parse(data);
                        //alert($("#listID").innerHTML);
                        //alert(document.getElementById("listID").innerHTML);
                        var setHTML = '';
                        for( i in data)
                        {
                            if(i>0&&i!=data.length-1)
                            {
                                //ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-hover-a ui-btn-up-a
                                setHTML+='<li data-theme="a" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-hover-a ui-btn-up-a"><div class="ui-btn-inner ui-li ui-corner-top" aria-hidden="true"><div class="ui-btn-text">                       <a id="'+data[i].id+'"  href="brandMobile.html" data-transition="slide" class="ui-link-inherit" onclick="openBrands(this.id)"; >'+data[i].interest+'</a>                    </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow"></span></div></li>'
                            }
                            else if(i!=data.length-1){
                                setHTML+='<li data-theme="a" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-corner-top ui-btn-up-a"><div class="ui-btn-inner ui-li ui-corner-top" aria-hidden="true"><div class="ui-btn-text">                        <a id="'+data[i].id+'" href="brandMobile.html" data-transition="slide" class="ui-link-inherit" onclick="openBrands(this.id)">'+data[i].interest+'</a>                   </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow"></span></div></li>'; 
                            }
                            else                                
                            setHTML+='<li data-theme="a" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-corner-bottom ui-btn-up-a"><div class="ui-btn-inner ui-li ui-corner-top" aria-hidden="true"><div class="ui-btn-text">                         <a id="'+data[i].id+'" href="brandMobile.html" data-transition="slide" class="ui-link-inherit" onclick="openBrands(this.id)">'+data[i].interest+'</a>                   </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow"></span></div></li>';

                            //alert(data[i].id);
                            //alert(data[i].interest);
                            }
                        document.getElementById("listID").innerHTML=setHTML;                        
                    }
                });
            }
        </script>
    </head>
    <body onload="loadInterest()">
        <div data-role="page" >
            <div data-role="header" id="header">
                <h1>Mobile Template</h1>
            </div><!-- /header -->
            <div data-role="content">
                <ul data-role="listview" data-inset="true" data-theme="a" id="listID">

                </ul>
                <p class="copyright">Copyright &copy; mobi. Designed by <a href="http://mrova.com" class="ui-link">mRova</a></p>
            </div><!-- /content -->
              <div data-role="footer" data-theme="a">
            <div class="ui-bar">
             <a href="share-dialog.html"  data-role="button" data-icon="star" data-theme="a" data-rel="dialog">Share</a> 
             <a href="contact.html" data-role="button" data-icon="plus" data-theme="a">Contact</a>
             <a href="" data-role="button" data-icon="arrow-u" data-theme="a" style="float:right;" class="returnTopAction">Return top</a>    

           </div>
          </div>
       </div>
    </body>
</html> 
```

2.html

```
<!DOCTYPE html>
<!--
Design by mRova Solutions
http://www.mrova.com
Released for free under a Creative Commons Attribution 2.5 License
-->
<html>
    <head>
        <title>O9 ShopAlot</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0;" />
        <meta name="apple-mobile-web-app-capable" content="yes" />

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
        <link rel="stylesheet" href="css1/style.css" />
        <link rel="stylesheet" href="css1/photoswipe.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
        <script type="text/javascript" src="js1/klass.min.js"></script>
        <script type="text/javascript" src="js1/code.photoswipe.jquery-3.0.4.min.js"></script>
        <script type="text/javascript" src="js1/custom.js"></script>
        <script type="text/javascript"><!--

           function loadBrand(){
                $.ajax({
                    type:       "post",
                    url:        "BrandJ",
                    //data:       "term=" + term,
                    success:    function(data) {
                        //data=JSON.parse(data);
                        //alert($("#listID").innerHTML);
                        //alert(document.getElementById("listID").innerHTML);
                        alert(data+" session object get");
                        //var setHTML = '';
                    /*  for( i in data)
                        {
                            if(i>0&&i!=data.length-1)
                            {
                                //ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-hover-a ui-btn-up-a
                                setHTML+='<li data-theme="a" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-hover-a ui-btn-up-a"><div class="ui-btn-inner ui-li ui-corner-top" aria-hidden="true"><div class="ui-btn-text">                       <a id="'+data[i].id+'"  href="brand.html" data-transition="slide" class="ui-link-inherit" >'+data[i].interest+'</a>                     </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow"></span></div></li>'
                            }
                            else if(i!=data.length-1){
                                setHTML+='<li data-theme="a" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-corner-top ui-btn-up-a"><div class="ui-btn-inner ui-li ui-corner-top" aria-hidden="true"><div class="ui-btn-text">                        <a id="'+data[i].id+'" href="brand.html" data-transition="slide" class="ui-link-inherit" >'+data[i].interest+'</a>                  </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow"></span></div></li>'; 
                            }else                               
                            setHTML+='<li data-theme="a" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-corner-bottom ui-btn-up-a"><div class="ui-btn-inner ui-li ui-corner-top" aria-hidden="true"><div class="ui-btn-text">                         <a id="'+data[i].id+'" href="brand.html" data-transition="slide" class="ui-link-inherit" >'+data[i].interest+'</a>                  </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow"></span></div></li>';

                            //alert(data[i].id);
                            //alert(data[i].interest);

                        } */
                        //document.getElementById("listID").innerHTML=setHTML;

                    }
                });
            }
        --></script>
         <script>
         $('page').live('branMobile.html',function(event, ui){
              alert('This page was just shown: '+ ui.nextPage);
            });
          </script>
    </head>
    <body onload=loadBrand();>
        <div data-role="page" >
            <div data-role="header" id="header">
                <h1>Mobile Template</h1>
            </div><!-- /header -->
            <div data-role="content">
                <ul data-role="listview" data-inset="true" data-theme="a" id="listID">

                </ul>
                <p class="copyright">Copyright &copy; mobi. Designed by <a href="http://mrova.com" class="ui-link">mRova</a></p>
            </div><!-- /content -->
              <div data-role="footer" data-theme="a">
            <div class="ui-bar">
             <a href="share-dialog.html"  data-role="button" data-icon="star" data-theme="a" data-rel="dialog">Share</a> 
             <a href="contact.html" data-role="button" data-icon="plus" data-theme="a">Contact</a>
             <a href="" data-role="button" data-icon="arrow-u" data-theme="a" style="float:right;" class="returnTopAction">Return top</a>    

           </div>
          </div>
       </div>

    </body>
</html> 
```

对不起，太长了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:17:39.733

当您导航到 JQM 中的新页面时，只会加载新页面的正文，而忽略标题。这意味着 2.html 标头中的任何 javascript 都将被忽略。为了实现您的目标，您需要 1）在 1.html 中插入所有 js 代码，包括 loadBrand 函数和 2）将您的调用绑定到 pageinit 事件而不是 onload（有关更多详细信息，请参阅[JQuery 移动文档](http://jquerymobile.com/demos/1.0/docs/api/events.html)）

# c - 通过字符驱动程序 mmap() 将非连续共享内存映射为连续的进程

> ID：13111552
> 
> 赞同：0
> 
> 时间：2012-10-28T18:09:44.497
> 
> 标签：c, memory, module, linux-kernel

作为一个全新的内核模块编程，我应该为进程的共享内存分配扩展字符驱动模块，它能够将不连续的内存映射到进程的虚拟地址空间中的连续内存，并且应该能够重新调整它的大小。

通过调整大小，我的意思是内核模块在调整大小时应该小心，动态添加/删除页面，并且应该由使用共享内存的进程连续访问新分配的区域。

每次有 re-size 请求时我都需要做 remap_pfn_range 吗？

如果有人能指出我可能的方法，我将非常感激......

# actionscript-3 - ZIP 嵌入引发错误

> ID：13111569
> 
> 赞同：1
> 
> 时间：2012-10-28T18:11:43.507
> 
> 标签：actionscript-3, air, adobe, embedding, flash-builder

我想将一个 ZIP 文件嵌入到我的 AS3/Air-application（使用 Flash Builder）中并通过 FZip 打开它。对于嵌入，我使用以下代码：

```
[Embed(source='../bin/art/resources.zip', mimeType="application/octet-stream")]
public static const rsClass:Class; 
```

当我尝试保存项目时，程序崩溃并引发错误：

“正在构建工作区”遇到了问题。在“正在构建工作区”期间，发生了内部错误。（这只是一个糟糕的翻译，不是原创） Java 堆空间

我点击确定，出现内部错误：

出现错误“磁盘空间太低”。查看“运行 Eclipse”处的自述文件，您会发现信息 [...] 建议结束工作台。要结束工作台吗？是/否

在这篇文章的早期版本中，我说过，程序没有启动。那不是真的。只有保存会导致此错误。由于保存错误，启动了早期版本的程序，但没有错误。当我尝试从 zip 中制作一个 bytearray 时，它会导致错误（未找到初始内容），但我认为 zip 不会加载，所以这并不罕见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:57:47.443

您不应该嵌入此 ZIP 而是加载它，您可以将任何文件/文件夹添加到 AIR 包中。

去做吧：

*   在 Flash IDE 中，转到“AIR for Android Settings”或“AIR for iOS Settings”，在对话框底部有“Included files:”字段，然后添加所需的文件夹或文件，
*   对于 FlashDevelop，*bin*文件夹中的内容将被打包在空气中，如此[处所述](http://www.flashdevelop.org/community/viewtopic.php?f=13&t=7774)
*   在 Flex 中，它将是*src*文件夹，在导出向导中，您可以选择要包含的文件，如下所述[。](http://www.charlesclements.net/blog/?p=154)

**编辑**也你应该考虑非常大的文件遵循的想法：

不要包含大文件（或仅包含基本元素）并下载大文件并保存在用户设备上，例如 sdcard 上，然后从那里加载。

最好的祝福

# ruby-on-rails - 需要定制设计注册流程

> ID：13111580
> 
> 赞同：0
> 
> 时间：2012-10-28T18:12:45.830
> 
> 标签：ruby-on-rails, authentication, devise

我的注册是这样的：

1.  用户参加测验，该测验以表单形式提交并存储在会话中
2.  用户使用 Facebook 或经典用户名/密码注册网站
3.  成功注册后，测验结果将与用户保持一致

我想在第 1 步中从一个单独的控制器操作开始我的注册，将结果保存到会话中，然后在第 3 步中为设计创建一个注册后回调以保存结果。

实现这一点的最佳方法是什么？会话是否会在步骤 #2 中被覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:18:34.723

你的做法是正确的。

您应该将测验结果存储在特定的会话哈希中，例如`session[:quiz]`当用户使用设计注册成功登录时不会被覆盖。

然后您可以覆盖设计注册控制器并将测验结果与其他信息一起添加到用户中

```
class Users::RegistrationsController < Devise::RegistrationsController

  def create
    super
    #find user and set the quiz to persist
  end

end 
```

# python - 打印语句在 if/elif/else 块中不起作用

> ID：13111583
> 
> 赞同：0
> 
> 时间：2012-10-28T18:12:58.420
> 
> 标签：python

我有一个项目，我正在尝试重做。它适用于交互式 Python 编程的课程。提交的截止日期已经过去了，所以我在这里并没有违反荣誉代码，只是想了解为什么我现在为同一个项目编写的代码不起作用。

游戏是猜数字。if 块中的任何打印语句都没有打印出来，我当然认为它们应该是，所以我犯了一个错误，我一生都无法弄清楚它是什么。我在评估阶段检查了其他几个学生的项目，但仍然看不出我的代码不正确的原因。

游戏在这里在浏览器中执行[Game In Browser here](http://www.codeskulptor.org/#user3-3bIj15RoOx-3.py)

这是我正在使用的代码：

```
# Sanderson, Steven
# template for "Guess the number" mini-project
# input will come from buttons and an input field
# all output for the game will be printed in the console

import simplegui
import random
import math

# initialize global variables used in your code
secret = 0         # The secret number
guesses = 0        # The amount of guesses you will have left
guess_count = 0    # How many guesses you made
range_limit = 100  # The number range of the game

def init():
    # Here I reference the global variables because they
    # are now inside of a function being referenced locally
    global range_limit
    global secret

    # This following line limits the amount of guesses
    # the player can have based upon the given 
    # range_limit of the game
    guesses = int(math.ceil(math.log(range_limit,2)))

    # This following line of code generates a secret
    # number for the specified range of the game,
    # it has been initialized to a range of 100 to 
    # start the game
    secret = random.randrange(0, range_limit)

    # Converts range_limit to a string to print to console
    print "Play Guess The Number. The range is 0 to", + range_limit
    print "You have " +str(guesses) + " guesses for this game"
    print ""

# define event handlers for control panel

def range100():
    # button that changes range to range [0,100) and restarts
    global range_limit
    global secret
    global guesses
    range_limit = 100
    init()

def range1000():
    # button that changes range to range [0,1000) and restarts
    global range_limit, secret, guesses
    range_limit = 1000
    init()

def input_guess(guess):
    # main game logic goes here
    int_guess = int(guess)
    global guess_count
    global guesses
    global secret
    guesses += -1
    guess_count = guess_count + 1

    if int_guess == secret:
        print "You Win and did it in " +str(guess_count) + " guesses"
        print ""
        init()
    elif int_guess > secret:
        print "You guessed " +str(guess) + " guess lower"
        print "You have " +str(guesses) + " guesses left"
        print ""
    elif int_guess < secret:
        print "You guessed " +str(guess) + " guess higher"
        print "You have " +str(guesses) + " guesses left"
        print ""
    if guesses == 0:
        print "You ran out of guesses, the secret was " +str(secret)
        print ""
        init()

# create frame
frame = simplegui.create_frame("Guess The Number!", 200, 200)

# register event handlers for control elements
frame.add_button("Range [0, 100)", range100, 125)
frame.add_button("Range [0, 1000)", range1000, 125)
frame.add_input("Enter your guess here and press enter", input_guess, 125)

# start frame
frame.start()
init()

# I know my code is not the best, constructive criticisim in order to help me
# be a better coder is appreciated :) 
```

这是我刚刚运行的示例输出。我打印了`secret`, `guess_count`and`guesses`并按此顺序。

```
71
0
0
You guessed 25 guess higher
You have -1 guesses left

71
1
-1
You guessed 25 guess higher
You have -2 guesses left

71
2
-2
You guessed 25 guess higher
You have -3 guesses left 
```

按下按钮时，看起来 init() 也不起作用，因为计数没有被重置，挠头。![init() 也可能无法正常工作](../Images/fe481a447f826eff680410643f288985.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T18:32:25.167

如果添加行

```
print repr(guess), type(guess), repr(secret), type(secret)
print guess == secret, guess > secret, guess < secret 
```

就在`if`树枝之前，您会看到（类似于）：

```
'23' <class 'str'> 4 <class 'int'>
False False False 
```

您正在将字符串与整数进行比较，在 Python 3 中给出，`TypeError: unorderable types: str() < int()`但在 Python 2 中将默默返回意外行为（基于类的名称，如果内存可用，但由于我们不应该这样做，我从来没有管理记住细节。）具体来说：

```
>>> "47" < 200
False
>>> "47" < 47
False
>>> "47" < 2
False
>>> 100 < "23"
True
>>> 100 < "1"
True
>>> 100 < "-23"
True 
```

将用户输入转换为整数，然后您可以开始处理下一个问题:^)

```
You guessed 5
5 <class 'int'> 35 <class 'int'>
False False True
You guessed 5 guess higher
You have -1 left 
```

# c# - 我将如何从 Azure RoleEntryPoint 报告它是否正在运行

> ID：13111585
> 
> 赞同：1
> 
> 时间：2012-10-28T18:13:12.227
> 
> 标签：c#, azure, distributed-computing

我在我的 SQL 数据层中创建了一个我想知道的工作角色，如果它正在运行。

我在被调用时注册了角色`onStart`，我正在考虑在`onStop`方法中取消注册它。我可以指望`onStop`被叫吗？或者我应该让它每 10 分钟报告一次它的活动，并让另一个应用程序检查它的活动，如果没有，将设备设置为离线？

人们将如何解决分布式程序的这个问题？

是否可以获得工作人员/网络角色的特定实例的唯一指南。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:26:56.783

心跳是执行此操作的正确方法。你不能保证`OnStop`会被调用，因为硬件可能会突然发生故障。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:45:31.377

不，你不能指望`OnStop()`被召唤。如果您的实例运行的节点崩溃`OnStop()`，则不会被调用。如果异常传播到外部`Run()`或`OnStart()`您的实例`OnStop()`没有被调用。这些是我现在能想到的最重要的案例，也许还有更多。底线是你不能指望`OnStop()`被召唤。

您应该使用存储在某些持久性存储中的心跳 - 例如 SQL Azure 或 Azure 队列或其他任何东西。当您想要进行“清理”或“重新处理”时，您只需选择在相当长的一段时间内没有心跳的东西。例如，活着的实体会每分钟发出一次心跳，然后你可以认为任何五分钟或更长时间没有心跳的东西都死了。

# backbone.js - 骨干协会不适用于 fetch

> ID：13111588
> 
> 赞同：0
> 
> 时间：2012-10-28T18:13:27.020
> 
> 标签：backbone.js, nested, associations

我正在使用来自 github-Backbone 关联 [https://github.com/dhruvaray/backbone-associations](https://github.com/dhruvaray/backbone-associations)的 Backbone-Associations 来 让嵌套模型与 backnone 一起使用。

在模型上调用 fetch() 时出现错误。来自服务器的响应 json 与模型定义完全匹配。我无法弄清楚我错过了什么......

版本：

主干：0.9.2

骨干协会：0.2.0

**TypeError: this.attributes[relationKey].off 不是函数 this.attributes[relationKey].off("all");**

```
//this is the code i am using..

var ProductVariation = Backbone.AssociatedModel.extend({
    defaults: {
        ImageUrl:'',
        Desc:''
    }
});

var Product = Backbone.AssociatedModel.extend({
    relations: [{
        type: Backbone.Many,
        key: 'ProductVariations',
        relatedModel: ProductVariation
    }],
    url: '/GetProductById',
    defaults: {
        CategoryId: 0,
        ProductVariations: [],
        Summary: ''
    }
}); 
```

我错过了什么吗？任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:20:50.073

哎呀是我的错...

实际上，我使用的是旧版本的 BackboneJS，但认为我使用的是最新版本。集合中没有`off`和`on`方法，而是分别使用`bind`和`unbind`。

用新的替换旧的是解决方法。

# list - Prolog：检查两个列表是否具有相同的元素

> ID：13111591
> 
> 赞同：3
> 
> 时间：2012-10-28T18:13:39.577
> 
> 标签：list, prolog, non-termination, failure-slice

我是 Prolog 的新手，在检查两个列表是否具有完全相同的元素时遇到问题。元素可能有不同的顺序。我有这个代码：

```
myremove(X, [X|T], T).   
myremove(X, [H|T], [H|R]) :-
   myremove(X, T, R).

 same_elements([], []).
 same_elements([H1|T1], L2) :-      
    myremove(H1, L2, Nl2),  
    same_elements(T1, Nl2). 
```

它的工作原理是

```
?- same_elements([b,c,a], X). 
```

返回第一个结果后导致内存不足错误。因此，我尝试通过检查列表的长度是否相等并检查 H1 是否是 L2 的成员来缩小结果集：

```
mylength([], 0).
mylength([_|T], R) :-
   mylength(T, Nr),
   R is Nr+1.

mymember(X, [X|_]).
mymember(X, [_|T]) :-
   mymember(X, T).

same_elements([], []).
same_elements([H1|T1], L2) :- 
   mylength([H1|T1], X),
   mylength(L2, Y),
   Y = X,
   mymember(H1, L2),
   myremove(H1, L2, Nl2),
   same_elements(T1, Nl2). 
```

现在两者

```
?- same_elements([b,c,a], X).
?- same_elements(X, [b,c,a]). 
```

返回所有结果，但最后它们只是挂起。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T19:15:46.640

简短的回答：是的。

但是，在进入这个之前，还有一个更有趣的问题：你是如何发现这些问题的？你一定很幸运能找到它们！我试过了：

```
?-same_elements([a,b,c,d,e,f,g],Xs)。
Xs = [a, b, c, d, e, f, g] ;
Xs = [a, b, c, d, e, g, f] ;
Xs = [a, b, c, d, f, e, g] ;
Xs = [a, b, c, d, g, e, f] ;
...

```

...并且只是被所产生的解决方案所淹没。不，我没有耐心看完所有答案。但是有一种更简单的方法来测试具体查询：只需删除答案，只关注查询是否停止。为此，我添加了目标`false`：

```
?- same_elements([a,b,c,d,e,f,g],Xs), false。

```

现在，我们将永远看不到任何解决方案。但是我们可能会观察到查询的终止。唉，这个查询现在可能循环了。至少我们不再费力地解决不相关的解决方案。

为了进一步缩小未终止的原因，我们将`false`在您的计划中添加目标。修改后的程序称为**故障片**。通过这种方式，我们试图缩小负责不终止的部分。如果我们成功地添加了`false`目标，使得程序仍然不会终止，我们将有一个很好的线索来解决这个问题。例如：

```
相同元素（[]，[]）。
相同元素（[H1|T1]，L2）：-
  mylength([H1|T1], X), false, 
  mylength(L2, Y), 
  Y = X, 
  mymember(H1, L2), 
  myremove(H1, L2, Nl2), 
  same_elements(T1, Nl2)。

```

所以这几乎就是你的程序，除了它有一个目标`false`。背后的目标`false`被划掉，以表明它们是无关紧要的。

现在，查询终止：

```
?- same_elements([a,b,c,d,e,f,g],Xs), false。
错误的。

```

所以，我们已经删除了太多。下次尝试：

```
相同元素（[]，[]）。
相同元素（[H1|T1]，L2）：-
  我的长度（[H1|T1]，X），
  mylength(L2, Y), false, 
  Y = X, 
  mymember(H1, L2), 
  myremove(H1, L2, Nl2), 
  same_elements(T1, Nl2)。

```

现在，查询不会终止！

这意味着：不要查看程序的其余部分。无论那里写什么，都无法撤消这个循环！

所以我们现在可以思考可见部分：它既不会终止

```
?- same_elements([a,b,c,d,e,f,g],Xs). 
```

也不为

```
?- same_elements(Xs,[a,b,c,d,e,f,g]). 
```

罪魁祸首只是程序的这个非常小的部分。

您的想法是确保两个列表的长度相同。

不要使用长度谓词，而是定义一个新的：

```
list_same_length([], [])。
list_same_length([_|Xs], [_|Ys]) :-
    list_same_length(Xs, Ys)。

```

这现在终止于“双向”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-08T01:02:53.397

尝试这个：

```
same(X, X).
same([A| B], [C| D]):-
    A=C,
    same(B,D). 
```

如果它们相同，它将返回 true。否则为假。

# java - 我想在不挂起程序的情况下运行一个函数

> ID：13111594
> 
> 赞同：1
> 
> 时间：2012-10-28T18:14:04.460
> 
> 标签：java, android, multithreading

当我跑步时

```
msgcheck.setOnClickListener(new View.OnClickListener() {            
        @Override
        public void onClick(View v) {

            if(msgcheck.isChecked()){
                //hedearMsg

                final Dialog dialog = new Dialog(this);
                dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
                dialog.setContentView(R.layout.custommsg);
                dialog.setCancelable(true);
                dialog.show();

                Thread t = new Thread() {
                  public void run() {
                     // Do something on another thread
                      PopulatePeopleList();

                  }
                };
                t.run();

        }
    }); 
```

我的程序挂了几秒钟，然后显示对话框
我想在不挂起的情况下运行这个对话框，并且 PopulatePeopleListfunc 工作有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:20:03.443

线程以 开头`start`，而不是`run`：

```
Thread t = new Thread() {
    public void run() {
        // Do something on another thread
        PopulatePeopleList();
    }
};
t.start(); 
```

`run`只会`run`在主线程上按顺序调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:23:49.630

第三种选择是使用 a `Runnable`，它可以在线程内或其他地方构造：

```
new Thread(new Runnable()
{
    @Override
    public void run()
    {
        PopulatePeopleList();
    }

}).start(); 
```

# c# - 如何绘制图表控件？

> ID：13111603
> 
> 赞同：0
> 
> 时间：2012-10-28T18:15:21.307
> 
> 标签：c#

是否有任何控件可以绘制这样的东西？![树形图，我认为他们将其命名为 SVN 树，我不确定](../Images/4890a2c9264cb58c21e0bb672e1c0c15.png)

有些细胞只有一个父母，有些则有不止一个。有些人有一个或多个孩子。但是没有一群孩子有一群父亲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:05:43.827

我会请您考虑采用 WPF，因为这种工作在 WinForms 中会很混乱。您可以查看在 WPF 中实现的[FamilyShow](http://familyshow.codeplex.com/)，其中源可用。老实说，这是我在 .NET 上看到的最好看的 GUI。此外，它编译！:)

# apache-flex - AIR SQLite 数据库

> ID：13111604
> 
> 赞同：0
> 
> 时间：2012-10-28T18:15:42.693
> 
> 标签：apache-flex, sqlite, air, flex4

我有一个 AIR 应用程序，我想使用 SQLite 而不是 XML 文件来填充数据库。我见过人们在应用程序首次启动时即时创建数据库并导入数据。但人们也在使用现有的数据库。您使用什么方法来预填充数据库？是否有输入基本初始数据（约 200 条记录和 2 个表）的工具，或者我应该在首次安装应用程序时手动创建数据库和内容。

**更多上下文**
这是一个使用 Flex 4.6 的移动 AIR 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:37:46.970

有许多工具可以管理 SQLite 数据库，例如[Lita](http://www.dehats.com/drupal/?q=node/58)，它是一个开源 AIR 应用程序。

如果不需要将数据库恢复到其原始内容，那么它可以简单地与您填充的内容一起打包在应用程序中。

如果需要将数据库恢复到其原始填充数据，您可以保留原始数据库的副本并将其暂存到正在使用的活动数据库，从而替换数据库。

根据您的应用程序与数据库模型的数据和奇偶性，通过在首次启动时执行的代码中的编程实现来填充您的数据库并不是不合理的。在您的应用程序的初始启动中以及可能主要在您必须生成和维护以创建数据库的代码中都有开销。

通常，如果我有一个带有该模型序列化的默认模型，我只会遵循这种模式。就像，如果我已经从我的模型中构建了一个偏好样式数据的提交，以保存在数据库中。

# r - 在 Eclipse/statET 中查看命令

> ID：13111608
> 
> 赞同：2
> 
> 时间：2012-10-28T18:16:35.250
> 
> 标签：r, statet

R 有一个有用的命令（“查看”），它可以让人们在弹出窗口中看到像电子表格一样的表格。我在运行 statET 时在 Eclipse 控制台中使用了这个命令，电子表格弹出了几毫秒然后消失了。

具体来说，我有一个名为“mat”的矩阵，我输入了

```
View(mat) 
```

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:17:41.227

在 Eclipse 的 Object Browser 窗口中，您应该看到内存中的 R 对象列表（在 .GlobalEnv 下），以及您已加载的包（如 reshape2 或 plyr）。

如果您右键单击 .GlobalEnv 列表中的 R 对象，您将看到在数据查看器中打开的选项。单击此选项可在编辑器窗口中以电子表格格式打开数据，这对于快速查看小型数据集或较大数据集的子集非常有用。

# javascript - 如何从子域提供的脚本创建 Web Worker？

> ID：13111609
> 
> 赞同：4
> 
> 时间：2012-10-28T18:16:44.800
> 
> 标签：javascript, web-worker

我有一个网站，`example.com`我正在为所有外部资源提供服务`cdn.example.com`。所以在我的 HTML 页面中，`example.com`我有类似的内容：

```
<script type="text/javascript" src="http://cdn.example.com/script.js"></script> 
```

在我的脚本中，我想创建一个 Web Worker，所以我这样做：

```
worker = new Worker("http://cdn.example.com/script.js"); 
```

但这在 Firefox 16 上失败并`Failed to load script: http://cdn.example.com/script.js (nsresult = 0x805303f4)`出现错误。它适用于 Safari 6 和 Chrome 22。

看来问题是因为[起源不同](http://www.whatwg.org/specs/web-apps/current-work/multipage/workers.html#worker)。脚本的有效来源是`example.com`并且`cdn.example.com`不匹配。这似乎是一个错误，因为不是 CORS 没有设置`document.domain`有帮助（或者至少我无法通过玩它来使其工作）。有什么办法让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:47:37.400

最后，我为网站`example.com`提供了一个简单的 JavaScript 代码，其中包括真正的网络工作代码：

```
importScripts('http://cdn.example.com/script.js'); 
```

然后通过指向它来创建网络工作者。

# objective-c - 如何通过生成的实例名称访问对象？

> ID：13111611
> 
> 赞同：0
> 
> 时间：2012-10-28T18:17:00.507
> 
> 标签：objective-c

我有一个带有多个视图的 xib 文件。他们`IBOutlet`的 s 被命名为`view1`, `view2`, `view3`, 等等，我想循环访问它们。在Objective-C中可以做到这一点吗？

我知道在 ActionScript 中，您可以像这样生成对象的名称： `["view"+num]`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:48:46.453

将它们放在 IBOutletCollection 中。这是一个数组，您可以在界面生成器中填充它并遍历它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T18:32:57.870

与其命名它们，不如为它们分配标签 (0...10)，然后您可以使用 .将它们从父视图中拉出`viewWithTag:`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T18:22:06.647

使用键值编码。如果假设我有 view1 .. view 10，那么我会这样使用它；

```
for(int i=0 i< 10; i++){
  UIView *eachView = [self valueForKey:[NSString stringWithFormat:@"view%d", i]];
} 
```

我希望这个对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T02:11:56.237

实现此目的的另一种方法是使用[`NSDictionaryOfVariableBindings`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Miscellaneous/AppKit_Functions/Reference/reference.html#//apple_ref/c/macro/NSDictionaryOfVariableBindings).

```
NSArray *views = [NSDictionaryOfVariableBindings(view1, view2, view3) allObjects];
for (UIView *item in views)
    do something with item; 
```

# javascript - 在 for 循环中调用 Ajax

> ID：13111612
> 
> 赞同：1
> 
> 时间：2012-10-28T18:17:01.537
> 
> 标签：javascript, ajax, loops, for-loop, call

```
for (var i = 0; i < 5; i++) {
    with (x = new XMLHttpRequest()) open("GET","d.php?id=" + i), send(null), onreadystatechange = function() {
       if (x.readyState == 4 && x.status == 200) alert(i);
    }
} 
```

现在我希望每次何时`readyState = 4`，它都应该提醒调用哪个 URL 的正确值`i`。目前，它只警报一次，输出警报是`5`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T18:31:28.167

如果要使用`with`to retain `i`，则需要将其添加到也引用该`xhr`对象的对象中：

```
for(var i=0;i<5;i++){
    with({i:i, xhr:new XMLHttpRequest()}) {
        xhr.open("GET","d.php?id=" + i);
        xhr.send(null);
        xhr.onreadystatechange=function(){
            if (xhr.readyState == 4 && xhr.status == 200)
                alert(i);
        }
    }
} 
```

或者您需要在外部创建 xhr`with`并添加`i`到其中。

```
var xhr;
for(var i=0;i<5;i++){ 
    (xhr = new XMLHttpRequest()).i = i;
    with(xhr) {
        open("GET","d.php?id=" + i);
        send(null);
        onreadystatechange=function(){
            if (readyState == 4 && status == 200)
                alert(i);
        }
    }
} 
```

* * *

但是，如果您想要一个合适的、面向未来的解决方案，请将处理程序置于一个变量范围内，以提供处理程序所需的变量。

```
function doRequest(i, xhr) {
    xhr.open("GET","d.php?id=" + i);
    xhr.send(null);
    xhr.onreadystatechange=function(){
        if (xhr.readyState == 4 && xhr.status == 200)
            alert(i);
    }
} 
```

并这样称呼它：

```
for(var i=0;i<5;i++){
    doRequest(i, new XMLHttpRequest());
} 
```

* * *

或者，如果您坚持像某些人那样内联函数，您可以这样做：

```
for(var i=0;i<5;i++){
    (function (i, xhr) {
        xhr.open("GET","d.php?id=" + i);
        xhr.send(null);
        xhr.onreadystatechange=function(){
            if (xhr.readyState == 4 && xhr.status == 200)
                alert(i);
        }
    }(i, new XMLHttpRequest());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:20:16.167

这是因为闭包捕获了`i`变量本身，而不仅仅是当前值。我个人会做类似的事情：

```
for(var i = 0; i < 5; i ++) (function(i) {
        [..] alert(i) [..]
})(i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T18:34:07.890

只需更新 James 代码以满足您的需求

```
for (var i = 0; i < 5; i++) {
    with (x = new XMLHttpRequest()) open("GET","d.php?id=" + i), send(null), onreadystatechange = (function(i, x) {
        return function () {
        if (x.readyState == 4 && x.status == 200) alert(i);
       }
    })(i, x)
} 
```

希望这可以帮助

**为x**更新了它，这应该工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T19:00:33.343

这就是我爱它的方式

```
var x = new Array();
for (var i = 0; i < 5; i++) {
    with (x[i] = new XMLHttpRequest()) open("GET","d.php?id=" + i), send(null), onreadystatechange = (function(i) {
        return function () {
        if (x[i].readyState == 4 && x[i].status == 404) alert(i);
       }
    })(i)
} 
```

但我对使用闭包解决我的问题更感兴趣，我如何使用闭包来解决我的问题。

# java - 如何从数组中的单个或一系列值中查找元素编号

> ID：13111613
> 
> 赞同：0
> 
> 时间：2012-10-28T18:17:04.503
> 
> 标签：java, arrays

这是我即将到来的大学实习的代码：

```
import java.util.Random;

public class Practical4_Assessed 
{

public static void main(String[] args) 
{

    Random numberGenerator = new Random ();
    int[] arrayOfGenerator = new int[100];
    int[] countOfArray     = new int[10];
    int count;

    for (int countOfGenerator = 0; countOfGenerator < 100; countOfGenerator++)
    {
        count = numberGenerator.nextInt(10);
        countOfArray[count]++;
        arrayOfGenerator[countOfGenerator] = count + 1;
    }

    int countOfNumbersOnLine = 0;
    for (int countOfOutput = 0; countOfOutput < 100; countOfOutput++)
    {
        if (countOfNumbersOnLine == 10)
        {
            System.out.println("");
            countOfNumbersOnLine = 0;
            countOfOutput--;
        }
        else
        {
            if (arrayOfGenerator[countOfOutput] == 10)
            {
                System.out.print(arrayOfGenerator[countOfOutput] + "  ");
                countOfNumbersOnLine++;
            }
            else
            {
                System.out.print(arrayOfGenerator[countOfOutput] + "   ");
                countOfNumbersOnLine++;
            }
        }
    }

    System.out.println("");
    System.out.println("");

    String occurrencesReport = "";
    String graph = "";

    for (int countOfNumbers = 0; countOfNumbers < countOfArray.length; countOfNumbers++)
    {
        occurrencesReport += "The number " + (countOfNumbers + 1) + 
            " occurs " + countOfArray[countOfNumbers] + " times.";

        if (countOfNumbers != 9)
            graph += (countOfNumbers + 1) + "   ";
        else
            graph += (countOfNumbers + 1) + "  ";

        for (int a = 0; a < countOfArray[countOfNumbers]; a++)
        {
            graph += "*";
        }
        occurrencesReport += "\n";
        graph += "\n";
    }

    System.out.println(occurrencesReport);
    System.out.println(graph);

    int max = 0;
    int test = 0;
    for (int counter = 0; counter < countOfArray.length; counter++)
    {
        if (countOfArray[counter] >= max)
        {
            max = countOfArray[counter];
            test = counter + 1;
        }
    }

    System.out.println("The number that appears the most is " + test + ".");

}
} 
```

该程序创建一个数组，该数组将存储 100 个整数（所有整数都在 1 到 10 之间），这些整数由随机数生成器生成，然后每行打印出该数组的 10 个数字。然后它扫描这些整数，计算每个数字出现的频率，并将结果存储在第二个数组中。在此之后，它会输出一个星号水平条形图，显示每个数字出现的频率，然后最终输出出现频率最高的数字。

我以为我已经完全完成了代码，但我刚刚意识到如果多个数字出现相同的次数，我的代码的最后一部分将无法处理这个问题，例如如果数字 3 和 5 都出现 12有时，代码只能产生其中之一。

有没有人有办法解决这个问题？

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:24:48.133

我假设这不是一些家庭作业，所以我为您提供了另一种方法。

**-**使用`Collection`like`ArrayList`而不是`Array`.

**-**使用方法`Collections.frequency(Object o)`来了解该**值出现**的次数`Collection`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:36:52.437

而不是仅仅做

```
System.out.println("The number that appears the most is " + test + "."); 
```

再次循环`countOfArray`，为每个与 具有相同值的元素执行打印`max`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:37:12.163

有几种方法可以解决这个问题，从快速到复杂。最简单的方法是像这样暴力破解它：

```
int max = 0;
//int test = 0;
for (int counter = 0; counter < countOfArray.length; counter++)
{
    if (countOfArray[counter] >= max)
    {
        max = countOfArray[counter];
        //test = counter + 1;
    }
}

System.out.print("The number that appears the most is");
boolean first = true;
for(int i = 0; i < countOfArray.length; i++)
{
    if(countOfArray[i] == max)
    {
        if(first)
            first = false;
        else
            System.out.print(",");
        System.out.print(" " + (i+1) );
    }
}
System.out.println("."); 
```

这是输出：

```
6   2   6   5   6   8   9   3   5   8   
9   8   10  10  4   5   8   9   8   5   
1   7   8   5   6   7   10  4   5   4   
2   7   9   2   3   3   1   2   10  3   
5   2   10  1   1   6   3   3   8   10  
2   6   10  2   5   1   4   10  8   7   
7   8   7   3   7   8   3   4   5   5   
7   8   9   8   6   6   8   1   10  3   
2   5   4   6   9   9   10  10  1   10  
9   4   10  9   7   3   4   3   2   4   

The number 1 occurs 7 times.
The number 2 occurs 9 times.
The number 3 occurs 11 times.
The number 4 occurs 9 times.
The number 5 occurs 11 times.
The number 6 occurs 9 times.
The number 7 occurs 9 times.
The number 8 occurs 13 times.
The number 9 occurs 9 times.
The number 10 occurs 13 times.

1   *******
2   *********
3   ***********
4   *********
5   ***********
6   *********
7   *********
8   *************
9   *********
10  *************

The number that appears the most is 8, 10. 
```

有很多更干净的方法可以解决它，但希望这会给你一个不错的开始！

# facebook - 如何使用 Facebook 图形 API 接受新请求

> ID：13111614
> 
> 赞同：1
> 
> 时间：2012-10-28T18:17:05.300
> 
> 标签：facebook, facebook-graph-api

如何使用 Facebook 图形 API 接受新请求？如果可以不使用图形 API，那么它也对我有用。我在 facebook 中搜索了很多关于接受或拒绝新请求的信息，但没有找到有用的东西。

请给我一些关于这个问题的见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:19:50.573

接受请求只能通过 Facebook 提供的界面而不是编程方式。

虽然您可以通过 Graph API 删除请求，但它与接受/拒绝请求不同。

请记住，请求机制是一种通信渠道，而不是在应用程序级别使用的另一个 API。

# firefox - 自动关闭 FireFox 时关闭插件窗口

> ID：13111615
> 
> 赞同：0
> 
> 时间：2012-10-28T18:17:06.780
> 
> 标签：firefox, firefox-addon, xul

我开发了一个 Firefox 插件，它位于 FireFox 的底部（就像 firebug）。单击它的高级搜索按钮时，将打开一个弹出窗口，但是当用户关闭 FireFox 时，该弹出窗口保持打开状态。如何更改它，以便在关闭 Firefox 时它也会自动关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:46:33.990

它只需要被赋予`depended`特征。

# c++ - Qt 事件中的中断

> ID：13111617
> 
> 赞同：1
> 
> 时间：2012-10-28T18:17:17.967
> 
> 标签：c++, qt, directx-11

我正在使用 Qt、Directx 11 和 C++。当我的小部件打开时，我使用 system->Run() 启动引擎。只要将变量 done 设置为 false，此函数就会对每一帧调用一个名为 Frame() 的函数。

在我的 Qt 类中调用关闭事件时，我想关闭引擎。所以我创建了一个名为 isDone() 的函数，它将变量 done 设置为 false，然后我释放了使用 System->Shutdown() 创建的所有变量。但问题是程序崩溃是因为调用关闭事件时，只要关闭事件结束，System->Run() 函数就会被中断，但我希望 Run() 函数在调用之后执行执行 System->Shutdown() 函数之前的函数 isDone()。

是否有可能在关闭事件中进行中断，以便执行队列中的其他事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:04:11.937

> 是否有可能在关闭事件中进行中断，以便执行队列中的其他事情？

您可以循环调用 qApp->processEvent，并等待一些标志。

# animation - Windows Phone 模拟器不显示任何动画/动作

> ID：13111619
> 
> 赞同：0
> 
> 时间：2012-10-28T18:17:45.877
> 
> 标签：animation, windows-phone-7.1, emulation, expression-blend

我在 Blend4 中准备了最简单的应用程序，我将文本框放在添加的故事板 keyframe1 中，移动了文本框并添加了另一个关键帧。动画在 Blend4 中工作，我在情节提要上按下播放，文本框移动。我运行模拟器，它没有。我什至运行了我老师的应用程序，它也没有动画（它应该）。

我应该怎么做才能让它运行？

![在此处输入图像描述](../Images/47e805396fc5a5c87ea0c0471431ce81.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:25:15.477

你如何从代码开始动画？
FE翻转动画：

XAML

```
 <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="VisualStateGroup">
            <VisualState x:Name="ShowBack" >
                <Storyboard >
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationX)" Storyboard.TargetName="FrontCover">
                        <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                        <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                    </DoubleAnimationUsingKeyFrames>
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationY)" Storyboard.TargetName="FrontCover">
                        <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                        <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="90"/>
                    </DoubleAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="BackCover">
                        <DiscreteObjectKeyFrame KeyTime="0:0:0.5">
                            <DiscreteObjectKeyFrame.Value>
                                <Visibility>Visible</Visibility>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationY)" Storyboard.TargetName="BackCover">
                        <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="90"/>
                        <EasingDoubleKeyFrame KeyTime="0:0:1" Value="0"/>
                    </DoubleAnimationUsingKeyFrames>
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationZ)" Storyboard.TargetName="FrontCover">
                        <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                        <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
                    </DoubleAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>

            <VisualState x:Name="ShowFront" >
                <Storyboard >
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationX)" Storyboard.TargetName="BackCover">
                        <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                        <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
                    </DoubleAnimationUsingKeyFrames>
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationY)" Storyboard.TargetName="BackCover">
                        <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                        <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="90"/>
                    </DoubleAnimationUsingKeyFrames>

                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="FrontCover">
                        <DiscreteObjectKeyFrame KeyTime="0:0:0.5">
                            <DiscreteObjectKeyFrame.Value>
                                <Visibility>Visible</Visibility>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationY)" Storyboard.TargetName="FrontCover">
                        <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="90"/>
                        <EasingDoubleKeyFrame KeyTime="0:0:1" Value="0"/>
                    </DoubleAnimationUsingKeyFrames>
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationZ)" Storyboard.TargetName="BackCover">
                        <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                        <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
                    </DoubleAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>

        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>

<Image x:Name="FrontCover"   Source="{Binding TitleInfo.front_cover.Image}"    HorizontalAlignment="Left" VerticalAlignment="Top" Stretch="None" Margin="5">
                            <Image.RenderTransform>
                                <CompositeTransform/>
                            </Image.RenderTransform>
                            <Image.Projection>
                                <PlaneProjection/>
                            </Image.Projection>
                                                               </Image>
                            <Image x:Name="BackCover"  Source="{Binding TitleInfo.back_cover.Image}"   HorizontalAlignment="Left" VerticalAlignment="Top" Stretch="None" Margin="5" Visibility="Collapsed"  >
                            <Image.RenderTransform>
                                <CompositeTransform/>
                            </Image.RenderTransform>
                            <Image.Projection>
                                <PlaneProjection/>
                            </Image.Projection>

                            </Image> 
```

启动动画的 CS 代码：

VisualStateManager.GoToState(this, "ShowBack", true);

# ruby-on-rails - 试图通过电子邮件查找用户并获得“Called id for nil”

> ID：13111621
> 
> 赞同：1
> 
> 时间：2012-10-28T18:18:03.927
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

嗨，我正在执行重置密码操作。但是单击按钮后，我收到此错误：

> 为 nil 调用 id，它会错误地为 4 - 如果你真的想要 nil 的 id，请使用 object_id

这是我的密码重置控制器

```
 class PasswordResetsController < ApplicationController

    layout "sessions"

  def new
  end

  def create
    user = User.find_by_email(params[:email])
    user.send_password_reset if user
    redirect_to root_url, :notice => "#{user.id}Las instrucciones para reestrablecer la contrasena fueron enviadas."
  end

end 
```

这是我的用户模型

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX }, uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true

    def send_password_reset
        self.password_reset_token = SecureRandom.urlsafe_base64
        self.password_reset_at = Time.zone.now
        save!
    end

  private

    def create_remember_token
        self.remember_token = SecureRandom.urlsafe_base64
    end

end 
```

这是视图：

```
<% provide(:title, "Reiniciar Password") %>

<div class="row">
    <div class="span4">
        &nbsp
    </div>
    <div class="span4" id="login-box">  
        <div id="login-controls">
            <%= link_to(image_tag("logo.png"), root_path) %>
            <br>
            <br>

            <%= form_for(:password_resets, url: password_resets_path) do |f| %>
                <%= f.text_field :email, :placeholder => "Correo Electronico", :tabindex => 1, :style => "height:25px;" %>
                <%= f.button "<i class=\"icon-lock icon-white\"></i> Reiniciar Password".html_safe, :tabindex => 2,  class: "btn btn-warning", :style => "width:220px;margin-bottom:5px;" %>
            <% end %>
      </div>
    </div>
    <div class="span4">
    </div>
</div> 
```

我不明白为什么找不到用户；我尝试在 Rails 控制台上做同样的事情，我可以通过电子邮件找到用户，但我可以生成 password_reset_token。

请感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T18:20:11.603

使用参数[:password_resets][:email]

请做`User.all`看看。检查您调用 password_reset_token 方法的用户记录

这意味着您的数据库中没有使用此电子邮件的用户。

采用，

```
user = User.find_by_email!(params[:email]) 
```

带有 bang (!) 的方法将触发异常。`find_by_email`如果未找到电子邮件，则返回 nil 对象

# objective-c - 如何将数据从 uitableview 传递到情节提要中的详细视图

> ID：13111622
> 
> 赞同：3
> 
> 时间：2012-10-28T18:18:05.220
> 
> 标签：objective-c, ios, uistoryboard

我正在使用故事板在 iOS 5 中创建我的第一个应用程序。我`tableviewcontroller`在导航控制器中嵌入了一个，当您单击有关该单元`tableviewcontroller`格主题的一些详细信息中的单元格时，应将 URL 传递给详细信息视图。我使用 a`PList`来填充表格视图。我未能将详细信息传递给详细信息视图...

这是我的代码（4个类）：

```
//  NormalDataCell.m
#import "NormalDataCell.h"

@implementation NormalDataCell

@synthesize image = _image;
@synthesize nameLabel = _nameLabel;
@synthesize category = _category;
@synthesize webSiteURL = _webSiteURL;

@end 
```

* * *

```
//  normalData.m
#import "NormalData.h"

@implementation NormalData

@synthesize name = _name;
@synthesize image = _image;
@synthesize webSiteURL = _webSiteURL;
@synthesize category = _category;

- (id)initWithItem:(NSDictionary *)item {

    self = [super init];
    if (self) {
        _name = [item objectForKey:@"name"];
        _image = [UIImage imageNamed:[item objectForKey:@"image"]];
        _webSiteURL = [item objectForKey:@"webSiteURL"];
        _category = [item objectForKey:@"category"];
    }
    return self;
}

@end

@implementation NormalCategory
@synthesize category = _category;
@synthesize normalList = _normalList;

- (id)initWithArray:(NSMutableArray *)normalList {

    self = [super init];
    if (self) {
        NSMutableArray *list = [[NSMutableArray alloc]init];
        for (NSDictionary *item in normalList) {
            NormalData *data = [[NormalData alloc]initWithItem:item];
            [list addObject:data];
        }

        NormalData *data = [list objectAtIndex:0];
        _category = data.category;
        _normalList = list;
    }
    return self;
}

@end 
```

* * *

```
//  normalViewController.m

#import "NormalViewController.h"

#import "NormalData.h"

#import "NormalDataCell.h"

#import "NormalDetailView.h"

@interface NormalViewController ()

{

    @private

    NSMutableArray *_cellContentList;

}

@end

@implementation NormalViewController

@synthesize tableView; // Add this line of code

@synthesize roleArray;

- (void)viewDidLoad

{

    [super viewDidLoad];

    NSURL *url = [NSURL URLWithString:@"http://vfttx.web.fc2.com/normal.plist"];

    NSMutableArray *array = [NSMutableArray arrayWithContentsOfURL:url];

    _cellContentList = [[NSMutableArray alloc]init];

        for (NSMutableArray *item in array)

    {

        NormalCategory *category = [[NormalCategory alloc]initWithArray:item];

        [_cellContentList addObject:category];

    }

   }

//How do I pass the name & webSiteURL to DetailView?
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"TableToWebSegue"]) {

    NSIndexPath *path = [self.tableView indexPathForSelectedRow];
    NSString *cellName = [[_cellContentList objectAtIndex:path.row] objectForKey:@"name"];

    [segue.destinationViewController setDetailItem2:cellName];

        NSString *urlPath = [[_cellContentList objectAtIndex:path.row] objectForKey:@"webSiteURL"];

        [segue.destinationViewController setWebSiteURL:urlPath];

}
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView

{

    return [_cellContentList count];

}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    NormalCategory *category = [_cellContentList objectAtIndex:section];

    return [category category];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

{

    NormalCategory *category = [_cellContentList objectAtIndex:section];

    return [category.normalList count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

    static NSString *CellIdentifier = @"normalDataCell";

    NormalDataCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    if (cell == nil) {

        cell = [[NormalDataCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }

    NormalCategory *category = [_cellContentList objectAtIndex:[indexPath section]];

    NormalData *data = [category.normalList objectAtIndex:[indexPath row]];

    [cell.nameLabel setText:data.name];

    [cell.image setImage:data.image];

    cell.webSiteURL = data.webSiteURL;

    return cell;

}

@end 
```

* * *

```
//  NormalDetailView.m
#import "NormalDetailView.h"

@interface NormalDetailView ()

@end

@implementation NormalDetailView

@synthesize webSiteURL;
@synthesize webView;
@synthesize name = _name;
@synthesize detailItem2;
@synthesize testNameLabel;

- (void)viewDidLoad
{
    [super viewDidLoad];

    testNameLabel.text = detailItem2;

//If the URL is right, it will work.
    NSString *strUrl = webSiteURL;
    strUrl = [strUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSURL *url = [NSURL URLWithString:strUrl];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [webView loadRequest:request];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:25:42.270

大概你正在使用 segues 在不同的视图之间移动。

在包含您的表格视图的视图控制器上实现`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`，它将在用户点击单元格后被调用。它包含对 segue 对象的引用，您可以使用它来查找`sourceViewController`和`destinationViewController`，您可以使用它们来设置目标中的数据。

# web-services - 如何在 Eclipse 中使用 JAX-WS 实现 WS-Security

> ID：13111624
> 
> 赞同：0
> 
> 时间：2012-10-28T18:18:18.337
> 
> 标签：web-services, jakarta-ee, soap, jax-ws, ws-security

谁能给我一个关于使用 Eclipse 工具使用 JAX-WS 设置 WS-Security SOAP 的基本教程。我发现了很多 tut，但他们通过 xml 文件设置了安全性。这真的让我很困惑，因为我在 Eclipse 中使用 JAX-WS，所以没有这样的 xml 文件可以修改。

谢谢

# python - 使用 python-twitter 库，如何设置时区？

> ID：13111625
> 
> 赞同：2
> 
> 时间：2012-10-28T18:18:19.917
> 
> 标签：python, twitter, timezone, python-twitter

我正在尝试列出带有时间戳的推文。我有这个...

```
#!/usr/bin/python
import twitter
api = twitter.Api()
statuses = api.GetUserTimeline('ttytter')
for s in statuses:
  print s.created_at + " " + s.text 
```

哪个打印出来...

`Sat Oct 20 04:56:47 +0000 2012 @uriel1998 W/r/t DMs, they appear just fine in 2.0.4 and 2.1 beta here, near as I can tell.`

这几乎是我所追求的，但就时间而言，这似乎是在错误的时区。[https://twitter.com/ttytter/status/259518502069760000](https://twitter.com/ttytter/status/259518502069760000)

有没有办法可以在 python-twitter 库中更改它？我正在查看 [GetTimeZone() 和 SetTimeZone()](http://static.unto.net/python-twitter/0.6/doc/twitter.html)，但我无法弄清楚它们是如何工作的。

还研究了[如何在 python 中将日期时间对象移动 12 小时，](https://stackoverflow.com/questions/3660210/how-to-shift-a-datetime-object-by-12-hours-in-python)但不确定我是否需要去那里。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:42:44.390

[python-twitter](http://pypi.python.org/pypi/python-twitter)将状态时间戳作为字符串和自纪元以来的秒数返回。后者是转换为时区感知[`datetime`](http://docs.python.org/2/library/datetime.html#datetime-objects)实例的最简单方法（请参阅此[答案](https://stackoverflow.com/questions/12691081/from-a-timezone-and-a-utc-time-get-the-difference-in-seconds-vs-local-time-at-t)）。

不幸的是，用户的`time_zone`属性不是 tz 使用的标准[tz 数据库](http://en.wikipedia.org/wiki/Tz_database)格式[`pytz`](http://pypi.python.org/pypi/pytz/)，因此有必要使用`utc_offset`user 属性（我们仍然使用该`time_zone`属性来命名[`tzinfo`](http://docs.python.org/3/library/datetime.html#tzinfo-objects)带有 UTC 偏移量的 created ）。该[`python-dateutil`](http://labix.org/python-dateutil)包提供了一种方便的类型`tzoffset`，允许[`tzinfo`](http://docs.python.org/3/library/datetime.html#tzinfo-objects)从 UTC 偏移量创建实例，然后我们可以使用它来将[`datetime`](http://docs.python.org/2/library/datetime.html#datetime-objects)UTC 转换为本地时区：

```
import pytz
import twitter

from datetime import  datetime
from dateutil.tz import tzoffset

USERNAME = 'ttytter'

api = twitter.Api()

# get a 'tzinfo' instance with the UTC offset for the user's local time
user = api.GetUser(USERNAME)
localtime_tz = tzoffset(user.time_zone, user.utc_offset)

statuses = api.GetUserTimeline(USERNAME)
for s in statuses[:1]:
    # get UTC timestamp from seconds since epoch
    utc_dt = datetime.utcfromtimestamp(s.created_at_in_seconds).replace(tzinfo=pytz.utc)
    print('utc: {}'.format(utc_dt))
    # convert to local time in the user's timezone
    localtime_dt = utc_dt.astimezone(localtime_tz)
    print('localtime [{}]: {}'.format(localtime_dt.tzname(), localtime_dt)) 
```

它给出了第一个状态的输出：

```
utc: 2012-10-20 04:56:47+00:00
localtime [Pacific Time (US & Canada)]: 2012-10-19 20:56:47-08:00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T02:20:01.213

结合 Pedro Romano 和 JF Sebastian 的建议，我有这个......

```
import pytz
import twitter

from datetime import  datetime

USERNAME = 'ttytter'

api = twitter.Api()

user = api.GetUser(USERNAME)
pst_tz = pytz.timezone('America/Los_Angeles')

statuses = api.GetUserTimeline(USERNAME)
for s in statuses[:1]:
    # get UTC timestamp from seconds since epoch
    utc_dt = datetime.utcfromtimestamp(s.created_at_in_seconds).replace(tzinfo=pytz.utc)
    # convert to given timezone
    pst_dt = pst_tz.normalize(utc_dt.astimezone(st_tz))
    print(pst_dt.strftime('%Y-%m-%d %H:%M:%S ')) + s.text 
```

输出：`2012-10-19 21:56:47 @uriel1998 W/r/t DMs, they appear just fine in 2.0.4 and 2.1 beta here, near as I can tell.`这是正确的时区，也考虑了 DST。

谢谢！

# java - 传递列表 到 Java Spring 中的 MYSQL 存储过程？

> ID：13111628
> 
> 赞同：1
> 
> 时间：2012-10-28T18:18:42.973
> 
> 标签：java, mysql, spring, stored-procedures, spring-mvc

是否可以在 Spring 中使用 SimpleJdbcCall 调用它并将 List 作为变量传递？

MYSQL

```
DELIMITER //
CREATE PROCEDURE example(IN list ?)
    BEGIN
        SELECT * FROM exampleTable WHERE exampleColumn IN (list)
    END // 
```

爪哇

```
SimpleJdbcCall jdbcCall = new SimpleJdbcCall(source).withProcedureName("example");
SqlParameterSource in = new MapSqlParameterSource().
                              addValue(?, ?);
Map<String, Object> out = jdbcCall.execute(in); 
```

# bash - 将mplayer的输出写入fifo并读取

> ID：13111633
> 
> 赞同：3
> 
> 时间：2012-10-28T18:19:43.023
> 
> 标签：bash, shell, pipe

我正在尝试在 bash 中编写简单的通知应用程序。我想从 mplayer 读取输出，解析它并通过 notify-send 显示。

我可以使用以下方法从 mplayer 获得所需的信息：

```
mplayer <url> | grep ICY 
```

然后使用 sed 解析。

我创建命名管道，告诉 mplayer 编写它，然后我正在读取它。不幸的是，它不起作用。这是我的脚本：

```
$fifo=~/.rp/fifo
mkfifo $fifo

mplayer <url> 2>/dev/null | grep ICY 1> $fifo &

while read line < $fifo; do
    echo $line
done

wait 
```

程序一直在等待来自 $fifo 的输入。我在其他终端尝试了以下操作，而该脚本正在运行：

1.  跑

    ```
    echo "Test" > .rp/fifo 
    ```

    带有运行脚本的终端显示“测试”

2.  跑

    ```
    echo "ICY" | grep ICY > .rp/fifo 
    ```

    也有效。

3.  跑

    ```
    mplayer <url> | grep ICY > .rp/fifo 
    ```

    它**不起作用**。

是我上面说的mplayer的组合| grep 工作正常。grep > $fifo 工作正常。我不明白为什么mplayer | grep > $fifo 不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T18:35:19.783

我怀疑您可能正在体验 C 库的流的完全缓冲模式。您没有说您正在运行 GNU 用户空间，但如果您是，您可以考虑`stdbuf(1)`修改缓冲机制。

您可以尝试`grep`以 的孩子的身份首先运行`stdbuf(1)`，如下所示：

```
mplayer <url> | stdbuf -o L grep ICY > .rp/fifo 
```

如果这不起作用，moar is bettar！

```
stdbuf -o 0 mplayer <url> | stdbuf -o L grep ICY > .rp/fifo 
```

如果这仍然不起作用，那么可能`mplayer`不是写入标准输出，而是直接写入`/dev/tty`. 在这种情况下，您需要阅读`expect(1)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T00:27:15.403

您可以使用以下方法进行无缓冲 grep：

```
$ mplayer ...  2>&1 | grep --line-buffered "ICY" 
```

或更好：

```
$ mplayer ...  2>&1 | sed -une 's/^.*ICY[^:]*: //p' 
```

甚至，为什么不呢（sed 非常适合 grep 和格式化），这将 grep`ICY`行，甚至拆分包含`-`在 30 个字符长度的第一个字段中的行，由`:`第二个字段分隔：

```
$ mplayer ...  2>&1 |
    sed -une "
        /ICY/{
            s/^.*ICY[^:]*:.*'\([^']*\)';/\1/;
            s/^\(.*\) - /\1                              - /;
            s/^\(.\{30\}\) *- /\1: /;
            p;
    }" 
```

可以给出类似的东西：

```
Artist name                  : Song title
Other artist                 : Other song
Unsplited line
Artist                       : Title 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-11T08:31:32.013

我使用 FIFO 文件以从属模式启动 mplayer。

```
mkfifo /tmp/mpfifo

mplayer -slave -input file=/tmp/mpfifo video.mp4 
```

我可以从另一个终端控制视频播放器。

```
echo "pause" >> /tmp/mpfifo
echo "volume 50" > /tmp/mpfifo 
```

我想获得价值（例如播放视频的当前位置）。所以我尝试了：

```
echo "get_time_pos" > /tmp/mpfifo 
```

但是没有返回值。我搜索了几个小时，但没有成功。然后我想将 mplayer 输出重定向到一个文件：

```
mplayer -slave -input file=/tmp/mpfifo video.mp4 > /tmp/mpout.txt 
```

之后，当执行以下命令时：

```
echo "get_time_pos" > /tmp/mpfifo
echo "get_property length" > /tmp/mpfifo 
```

/tmp/mpout.txt 中的输出如下：

```
.......
.......
ANS_TIME_POSITION=113.6
ANS_length=2534.602031 
```

如果每条命令的结果都能返回到命令行就好了。即使它可能需要一些工作，但可以解析输出文件。

# javascript - 覆盖对象方法/函数

> ID：13111644
> 
> 赞同：0
> 
> 时间：2012-10-28T18:20:30.823
> 
> 标签：javascript, jquery

我有`original.js`文件，但我想更改其中的一些内容。我不能修改`original.js`，但我可以添加另一个`better.js`文件，这样我就可以覆盖一些功能`original.js`

`original.js`包含：

```
MyHandler = {
   data:{},
   var1:false;
   handlers:{},

   init:function(handlers){
       function1();
       function2();
   }
   function1:function()
   {
    // function1 code that needs to be replaced
   };
}

$(document).ready(function ()
{
///...some code
      MyHandler.init();
} 
```

我想`function1()`用新内容重写。我应该在`better.js`文件中放什么？

PS我知道`better.js` **应该遵循** `original.js`。

我试图将下面的代码放入`better.js`，但它不起作用（似乎没有任何`function1`工作）

```
MyHandler = {
   function1:function()
   {
    // new code
   };
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:23:09.303

这样做：

```
if (!MyHandler) { MyHandler = {};}
MyHandler.function1 = function() { ... }; 
```

或者你可以使用 jQuery $.extend api 方法。

# twilio - 用于在不同呼叫计划之间进行选择的 twilio api

> ID：13111647
> 
> 赞同：1
> 
> 时间：2012-10-28T18:20:52.043
> 
> 标签：twilio

我需要在不同的计划之间进行选择，例如“对于无限制呼叫按 1，100 分钟按 2”需要通过 Twilio API 完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:12:56.737

首先，我建议查看 Twilio 文档，该文档可在以下位置找到： [https ://www.twilio.com/docs](https://www.twilio.com/docs)

其次，他们提供了各种示例应用程序，可以在这里找到： [https ://www.twilio.com/docs/howto](https://www.twilio.com/docs/howto)

不过，您实际上不会通过他们的 API 执行此操作 - 您将使用 TWIML（Twilio 标记语言）。为了让你开始......（我将用 PHP 和 TWIML 编写这个）

创建一个名为 index.php 的页面并添加以下内容

```
<?xml version="1.0" encoding="UTF-8"?>
<Response>
    <Gather action="gather.php" method="GET">
        <Say>
            For unlimited calling press 1, for 100 minutes press 2
        </Say>
    </Gather>
    <Say>We didn't receive any input. Goodbye!</Say>
</Response> 
```

创建另一个名为gather.php 的页面。在此页面上，您将拥有：

```
<?php

$response = $_REQUEST['Digits'];

if($response == 1){
    $message = 'You pressed 1 for unlimited calling.';
}elseif($response == 2){
    $message = 'You pressed 2 for 100 minutes';
}

echo "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n";
echo "<Response><Say>You entered " . $response . "</Say></Response>";
?> 
```

显然，在gather.php 页面上，您需要编写适当的代码来处理调用方选择的内容。

# jquery - 如何使用 js-minifier

> ID：13111649
> 
> 赞同：0
> 
> 时间：2012-10-28T18:21:35.970
> 
> 标签：jquery, jquery-plugins, minify

[我试图用这个 minifier](http://www.jsmini.com/)缩小这个小插件，但结果是错误的。（* ab 和 c 未定义，等等*）

有没有人看到有什么问题，或者是否有一些在线工具也可以检查它是否有效？

谢谢，理查德

**编辑****插件现在没有错误**

```
(function($) {

$.fn.bar = function(options) {
    var opts = $.extend({}, $.fn.bar.defaults, options);
    return this.each(function() {
        $this = $(this);
        var o = $.meta ? $.extend({}, opts, $this.data()) : opts;

        $this.click(function(e){
            if(!$('.jbar').length){
                var _remove_cross = "";
                timeout = setTimeout(function(){$.fn.bar.removebar();},o.time);
                var _message_span = $(document.createElement('span')).addClass('jbar-content').html(o.message);
                _message_span.css({"color" : o.color});
                var _wrap_bar;
                _wrap_bar   = (o.position == 'bottom') ? 
                 $(document.createElement('div')).addClass('jbar jbar-bottom'):
                 $(document.createElement('div')).addClass('jbar jbar-top') ;

                _wrap_bar.css({"background-color"   : o.background_color});
                if(o.removebutton){
                    _remove_cross = $(document.createElement('a')).addClass('jbar-cross');
                    _remove_cross.click(function(e){$.fn.bar.removebar();});
                }
                else{               
                    _wrap_bar.css({"cursor" : "pointer"});
                    _wrap_bar.click(function(e){$.fn.bar.removebar();});
                }   
                _wrap_bar.append(_message_span).append(_remove_cross).hide().insertBefore($('.content')).fadeIn('fast');
            }else{
                $('.jbar').find('.jbar-content').html(o.message);
            }
        });

        if(o.auto)$this.trigger('click');

    });
};
var timeout;
$.fn.bar.removebar  = function(txt) {
    if($('.jbar').length){
        clearTimeout(timeout);
        $('.jbar').fadeOut('fast',function(){
            $(this).remove();
        });
    }   
};
$.fn.bar.defaults = {
    background_color    : '#FFFFFF',
    color               : '#191919',
    position            : 'top',
    removebutton        : false,
    time                : 8000,
    auto:true
};
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:29:00.740

你可以使用在线版的[UglifyJS](http://marijnhaverbeke.nl/uglifyjs)或者使用[GitHub 上](https://github.com/mishoo/UglifyJS/)的源代码，这样你就可以自己使用了。

缩小版，

```
(function(e){e.fn.bar=function(n){var r=e.extend({},e.fn.bar.defaults,n);return this.each(function(){$this=e(this);var n=e.meta?e.extend({},r,$this.data()):r;$this.click(function(r){if(!e(".jbar").length){var i="";t=setTimeout(function(){e.fn.bar.removebar()},n.time);var s=e(document.createElement("span")).addClass("jbar-content").html(n.message);s.css({color:n.color});var u;u=n.position=="bottom"?e(document.createElement("div")).addClass("jbar jbar-bottom"):e(document.createElement("div")).addClass("jbar jbar-top"),u.css({"background-color":n.background_color}),n.removebutton?(i=e(document.createElement("a")).addClass("jbar-cross"),i.click(function(t){e.fn.bar.removebar()})):(u.css({cursor:"pointer"}),u.click(function(t){e.fn.bar.removebar()})),u.append(s).append(i).hide().insertBefore(e(".content")).fadeIn("fast")}else e(".jbar").find(".jbar-content").html(n.message)}),n.auto&&$this.trigger("click")})};var t;e.fn.bar.removebar=function(n){e(".jbar").length&&(clearTimeout(t),e(".jbar").fadeOut("fast",function(){e(this).remove()}))},e.fn.bar.defaults={background_color:"#FFFFFF",color:"#191919",position:"top",removebutton:!1,time:8e3,auto:!0}})(jQuery) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T20:42:24.523

下次给[www.blimptontech.com](http://www.blimptontech.com)一个镜头来满足您的 JS 缩小需求。很棒的工具，使用 UglifyJS。甚至可以将文件合并为一个，同时在此过程中将其缩小。

# android - Android 相机应用程序崩溃

> ID：13111650
> 
> 赞同：1
> 
> 时间：2012-10-28T18:21:42.753
> 
> 标签：android, camera, android-camera

我正在尝试将这个 YouTube 相机教程[http://www.youtube.com/watch?v=OMP6LHKEZOA](http://www.youtube.com/watch?v=OMP6LHKEZOA)的代码与这里的一些代码[http://developer.android.com/training/basics/data-storage /files.html](http://developer.android.com/training/basics/data-storage/files.html)将图像保存到 sd 卡。以下代码在成功将图像保存到文件后崩溃。如何让它不崩溃并返回主布局？

```
package com.example.test2;
import java.io.File;
import java.text.SimpleDateFormat;
import java.util.Date;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class MainActivity extends Activity {
    ImageView iv;
    private Uri fileUri;

    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    iv=(ImageView)findViewById(R.id.imageView);
    Button btn = (Button)findViewById(R.id.takePhoto);
    btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE); // create a file to save the image
            intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name
            startActivityForResult(intent, 0);

        }
    });   
}
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if(requestCode ==0)
    {
        Bitmap theImage = (Bitmap) data.getExtras().get("data");
        iv.setImageBitmap(theImage);
    }
}

//Uri fileUri = null;

public static final int MEDIA_TYPE_IMAGE = 1;

/** Create a file Uri for saving an image or video */
private static Uri getOutputMediaFileUri(int type){
      return Uri.fromFile(getOutputMediaFile(type));
}

/** Create a File for saving an image or video */
private static File getOutputMediaFile(int type){
    // To be safe, you should check that the SDCard is mounted
    // using Environment.getExternalStorageState() before doing this.

    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
              Environment.DIRECTORY_PICTURES), "MyCameraApp");
    // This location works best if you want the created images to be shared
    // between applications and persist after your app has been uninstalled.

    // Create the storage directory if it does not exist
    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    File mediaFile;
    if (type == MEDIA_TYPE_IMAGE){
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "IMG_"+ timeStamp + ".jpg");
    } else {
        return null;
    }

    return mediaFile;
}
} 
```

# .net - 在 .NET 中旋转图像和容器控件

> ID：13111654
> 
> 赞同：3
> 
> 时间：2012-10-28T18:22:00.727
> 
> 标签：.net, winforms, image, rotation

我正在寻找一个 .NET Winform 组件，其功能类似于 MS Power Point 中的图片框，您可以轻松地从文件中插入图像，并且使用鼠标可以轻松地旋转或调整图像和容器控件的大小。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:10:40.520

这个问题已经被问过很多次了。请参阅[如何在 WinForms](https://stackoverflow.com/questions/2163829/how-do-i-rotate-a-picture-in-c-sharp)或[旋转图像数学 (C#)](https://stackoverflow.com/questions/472428/rotate-image-math-c) 或[codeproject](http://www.codeproject.com/Articles/58815/C-Image-PictureBox-Rotations)中旋转图片。您基本上应该使用[PictureBox](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.aspx&ei=-YKNUPHeCojNrQfcloCQBw&usg=AFQjCNFX4i2m6hV3rt2h4DYvy1cpSfj7tQ&sig2=0DTMW6G-K6Fifmr049hoEw)作为容器控件，因为控件用于此类操作。

# java - 将 ResultSet 添加到 Jtable 中（两个类之间）

> ID：13111662
> 
> 赞同：1
> 
> 时间：2012-10-28T18:23:21.867
> 
> 标签：java, swing, nullpointerexception, jtable

我的应用程序抛出 NullPointerException。我在 MySQL 数据库和我的第二类之间创建了连接。

我不能在第二堂课中通过方法调用 DefaultTableModel。我怎么解决这个问题？

```
public class MySQL extends javax.swing.JFrame {
    private DefaultTableModel modelTabeli;

    public MySQL(){
        initComponents();
        BazaDana bd = new BazaDana();

        try{
            modelTabeli = bd.map();
            jTable1.setModel(modelTabeli);
        }
        catch(Exception e){
            System.out.println(e.toString());
        }
    }

    public static void main(String args[]) throws Exception{
        BazaDana bd = new BazaDana();
        bd.readDataBase();
    }
} 
```

二等舱

```
import java.sql.*;
import javax.swing.table.DefaultTableModel;

public class BazaDana{    
    public DefaultTableModel map() throws SQLException
    {
        defaultTableModel = new DefaultTableModel();
        int numberOfColumns = resultSetMetaData.getColumnCount();
        while (resultSet.next())
        {
            Object [] rowData = new Object[numberOfColumns];
            for (int i = 0; i < rowData.length; ++i)
            {
                rowData[i] = resultSet.getObject(i+1);
            }
            defaultTableModel.addRow(rowData);
        }
        return defaultTableModel;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T22:33:17.980

好的，如果您的目标是将 GUI 类与查询数据库的类分开，我可以给您一个替代解决方案。不要返回 DefaultTableModel，只通过一些集合从 ResultSet 中返回值，如下所示：

创建 MySql GUI 类：

```
import java.awt.EventQueue;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

public class MySql extends JFrame{
    JTable table = new JTable();
    DefaultTableModel model = new DefaultTableModel(new Object[][]{},new String[]{"First column","Second column"});

    public MySql(){
        table.setModel(model);
        add(new JScrollPane(table));

        //Populate table
        BazaDana bd = new BazaDana();
        List<Value> values = bd.selectAll();
        for(Value v : values){
            model.addRow(new Object[]{v.getFirstValue(),v.getSecondValue()});
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable(){
            public void run() {
                MySql ms = new MySql();
                ms.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                ms.pack();
                ms.setVisible(true);
            }});
    }
} 
```

然后创建 Java bean 类：

```
public class Value {
    private int id;
    private String firstValue;
    private String secondValue;

    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getFirstValue() {
        return firstValue;
    }
    public void setFirstValue(String firstValue) {
        this.firstValue = firstValue;
    }
    public String getSecondValue() {
        return secondValue;
    }
    public void setSecondValue(String secondValue) {
        this.secondValue = secondValue;
    }   
} 
```

最后是查询数据库的 BazaDana 类：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.List;

public class BazaDana {

    public List<Value> selectAll(){
        Connection conn = null;
        Statement st = null;
        ResultSet rs = null;
        //Create list of values
        List<Value> values = new ArrayList<Value>();

        try{
            Class.forName("com.mysql.Driver");
            conn =     DriverManager.getConnection("jdbc:mysql://localhost:3306/nameofdb","user","pass");
            st = conn.createStatement();
            rs = st.executeQuery("SELECT * FROM mytable");

            while(rs.next()){
                Value v = new Value();
                v.setFirstValue(rs.getString("first_column"));
                v.setSecondValue(rs.getString("second_column"));
                values.add(v);
            }
        }
        catch(Exception e){
            e.printStackTrace();
        }
        finally{
            try {
                rs.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
            try {
                st.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }

            try {
                conn.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }

        }
        return values;
    }
} 
```

# c++ - 绘制三角形，无法设置正常

> ID：13111666
> 
> 赞同：0
> 
> 时间：2012-10-28T18:23:44.020
> 
> 标签：c++, opengl

我是一名经验丰富的 C++ 程序员，正在学习 OpenGL。其中，我正在阅读 Richard Wright 的*OpenGL Super Bible*。那里的支持库是hacker-head C，松散地翻译成C++。作为一个纯粹主义者，我已将大部分支持代码翻译成 C++。我在 QT 而不是 Glut 工作。我已经得到了第 2 章中的示例和第 3 章中的“Primitives”示例，但无法让“GeoTest”示例正常工作。这是问题的简化示例：

```
void geotest::paintGL() {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glEnable(GL_CULL_FACE);
    model_view_matrix.push(view_frame);
        float red[] = { 1.0f, 0.0f, 0.0f, 1.0f };
        shader.use(
            transform_pipeline.get_model_view_matrix(),
            transform_pipeline.get_projection_matrix(),
            red);
        glBegin(GL_TRIANGLES);
            glVertex3f(-1.2f, -1.2f, 0.0f);
            glVertex3f( 1.2f, -1.2f, 0.0f);
            glVertex3f( 1.2f,  1.2f, 0.0f);
        glEnd();
    model_view_matrix.pop();
} 
```

这`shader`是我对这本书的改编`GLT_SHADER_DEFAULT_LIGHT`。我已经削减了图纸以隔离问题。当我运行此代码时，我得到一个看似空白的窗口。我没有显示的代码支持旋转图像，当我围绕 x 或 y 轴旋转 180 度时，我看到三角形的另一边，但它是黑色而不是红色。所以看起来表面法线最初指向远离观察者，所以它被剔除。

我已经尝试在and调用之间我可以想象的任何地方添加 1 到 3 个调用`glNormal3f(0.0f, 0.0f, -1.0f)`(and ) ，但我看不到任何效果；三角形总是在显示其背面的情况下绘制。`1.0f``glBegin``glEnd`

我错过了一些关于法线的基本知识吗？我很确定着色器没问题（如果我使用书的 GLT_SHADER_FLAT，我会遇到与法线相同的问题，尽管当三角形出现时，它应该是红色的）。

编辑这里是着色器的代码：

```
const char *default_light_vp = "uniform mat4 mvMatrix;"
                               "uniform mat4 pMatrix;"
                               "varying vec4 vFragColor;"
                               "attribute vec4 vVertex;"
                               "attribute vec3 vNormal;"
                               "uniform vec4 vColor;"
                               "void main(void) { "
                               " mat3 mNormalMatrix;"
                               " mNormalMatrix[0] = mvMatrix[0].xyz;"
                               " mNormalMatrix[1] = mvMatrix[1].xyz;"
                               " mNormalMatrix[2] = mvMatrix[2].xyz;"
                               " vec3 vNorm = normalize(mNormalMatrix * vNormal);"
                               " vec3 vLightDir = vec3(0.0, 0.0, 1.0); "
                               " float fDot = max(0.0, dot(vNorm, vLightDir)); "
                               " vFragColor.rgb = vColor.rgb * fDot;"
                               " vFragColor.a = vColor.a;"
                               " mat4 mvpMatrix;"
                               " mvpMatrix = pMatrix * mvMatrix;"
                               " gl_Position = mvpMatrix * vVertex; "
                               "}";

const char *default_light_fp =   
#ifdef OPENGL_ES
                               "precision mediump float;"
#endif
                               "varying vec4 vFragColor; "
                               "void main(void) { "
                               " gl_FragColor = vFragColor; "
                               "}"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:51:41.243

剔除不是基于法线的方向，而是基于缠绕顺序。尝试切换绘制顶点的方向，看看是否会有所不同。要更改缠绕顺序，您可以使用`glFrontFace`with`GL_CW`和`GL_CCW`，它定义了哪个面是前面，哪个面是后面。

# sql - 如何订购号码？

> ID：13111668
> 
> 赞同：1
> 
> 时间：2012-10-28T18:24:18.000
> 
> 标签：sql, sql-server, sql-server-2000

表格1

```
id value
---------    
 1  100
2A  200
 2  300
10  500
 8  200
....

Select * 
from table1 
order by id 
```

显示输出为

```
id value
------------    
 1 100
10 500
2A 200
 2 300
 8 200
.... 
```

如何正确下单？

预期产出

```
id value
----------
 1 100
 2 300
2A 200
 8 200
10 500
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:16:11.480

如果固定最后一个字符可能是字符，那么您可以尝试以下查询

```
 WITH A(ID) 
 AS
 (
 SELECT '1'
 UNION ALL
 SELECT '2C'
 UNION ALL
 SELECT '2A'
 UNION ALL
 SELECT '2'
 UNION ALL
 SELECT '10'
 )
 SELECT * 
 FROM A
 ORDER BY 
 convert(int,
 Case When IsNumeric(ID) = 0 then left(ID,len(id)-1) 
 Else ID END
 ) , Case When IsNumeric(ID) = 0 then RIGHT(ID,1) Else '0' END 
```

如果它是可变的，那么您可以编写一个函数，将 charecter 替换为其 ansi 值或 0 。然后在该列上关闭订单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:33:35.570

```
SELECT
LEFT(ID,1),
RIGHT(ID,1),
* 
FROM table1 
ORDER BY LEFT(ID,1),RIGHT(ID,1) 
```

应该可以解决问题，我什至不确定所选语句中是否需要左右。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:36:20.973

```
Select * 
from table1 
order by cast(replace(lower(id), 'abcdefg', '') as int),
         replace(id, '0123456789',''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T18:42:30.573

```
SELECT * FROM table1 ORDER BY CAST(id as varchar(50)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T12:03:27.223

```
CREATE FUNCTION [dbo].[RemoveNonAlphaCharacters](@Temp varchar(1000))
RETURNS int
AS
BEGIN
  WHILE PatIndex ('%[^0-9]%', @Temp) > 0
  SET @Temp = Stuff( @Temp, PatIndex('%[^0-9]%' , @Temp ), 1, '')
  RETURN @Temp
END

SELECT id, value
FROM dbo.Table1
ORDER BY [dbo].[RemoveNonAlphaCharacters](id) ASC 
```

# c++ - 是/否消息框使用 QMessageBox

> ID：13111669
> 
> 赞同：124
> 
> 时间：2012-10-28T18:24:20.267
> 
> 标签：c++, qt, qmessagebox

如何在 Qt 中显示带有“是/否”按钮的消息框，以及如何检查按下了哪些按钮？

即一个看起来像这样的消息框：

![在此处输入图像描述](../Images/87b44a99ae13fcec88984ae01bf0e3c6.png)

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-10-28T18:35:08.813

你会用[`QMessageBox::question`](http://qt-project.org/doc/qt-5.0/qtwidgets/qmessagebox.html#question)它。

假设小部件插槽中的示例：

```
#include <QApplication>
#include <QMessageBox>
#include <QDebug>

// ...

void MyWidget::someSlot() {
  QMessageBox::StandardButton reply;
  reply = QMessageBox::question(this, "Test", "Quit?",
                                QMessageBox::Yes|QMessageBox::No);
  if (reply == QMessageBox::Yes) {
    qDebug() << "Yes was clicked";
    QApplication::quit();
  } else {
    qDebug() << "Yes was *not* clicked";
  }
} 
```

[应该在 Qt 4 和 5 上工作，需要`QT += widgets`在 Qt 5 和`CONFIG += console`Win32 上查看`qDebug()`输出。]

查看[`StandardButton`](http://qt-project.org/doc/qt-5.0/qtwidgets/qmessagebox.html#StandardButton-enum)枚举以获取您可以使用的按钮列表；该函数返回被点击的按钮。您可以使用额外的参数设置默认按钮（如果您没有或指定， Qt“会*自动选择合适的默认值*`QMessageBox::NoButton`” ）。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-10-28T18:32:09.913

您可以使用 QMessage 对象创建一个消息框，然后添加按钮：

```
QMessageBox msgBox;
msgBox.setWindowTitle("title");
msgBox.setText("Question");
msgBox.setStandardButtons(QMessageBox::Yes);
msgBox.addButton(QMessageBox::No);
msgBox.setDefaultButton(QMessageBox::No);
if(msgBox.exec() == QMessageBox::Yes){
  // do something
}else {
  // do something else
} 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-11-02T19:22:50.580

QT 可以像 Windows 一样简单。等效代码是

```
if (QMessageBox::Yes == QMessageBox(QMessageBox::Information, "title", "Question", QMessageBox::Yes|QMessageBox::No).exec()) 
{

} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-03-14T16:57:03.840

我错过`tr`了答案中的翻译电话。

最简单的解决方案之一，允许以后进行国际化：

```
if (QMessageBox::Yes == QMessageBox::question(this,
                                              tr("title"),
                                              tr("Message/Question")))
{
    // do stuff
} 
```

`Qt`将代码级字符串放在`tr("Your String")`调用中通常是一个好习惯。

（`QMessagebox`如上适用于任何`QWidget`方法）

编辑：

您可以在上下文`QMesssageBox`之外使用`QWidget`，请参阅@TobySpeight 的答案。

如果您甚至不在`QObject`上下文中，请替换`tr`为`qApp->translate("context", "String")`- 您需要`#include <QApplication>`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-03-14T17:44:54.713

`QMessageBox`包括快速提出此类问题的静态方法：

```
#include <QApplication>
#include <QMessageBox>

int main(int argc, char **argv)
{
    QApplication app{argc, argv};
    while (QMessageBox::question(nullptr,
                                 qApp->translate("my_app", "Test"),
                                 qApp->translate("my_app", "Are you sure you want to quit?"),
                                 QMessageBox::Yes|QMessageBox::No)
           != QMessageBox::Yes)
        // ask again
        ;
} 
```

如果您的需求比静态方法提供的更复杂，您应该构造一个新`QMessageBox`对象，并调用其`exec()`方法以在其自己的事件循环中显示它并获取按下的按钮标识符。例如，我们可能希望将“否”作为默认答案：

```
#include <QApplication>
#include <QMessageBox>

int main(int argc, char **argv)
{
    QApplication app{argc, argv};
    auto question = new QMessageBox(QMessageBox::Question,
                                    qApp->translate("my_app", "Test"),
                                    qApp->translate("my_app", "Are you sure you want to quit?"),
                                    QMessageBox::Yes|QMessageBox::No,
                                    nullptr);
    question->setDefaultButton(QMessageBox::No);

    while (question->exec() != QMessageBox::Yes)
        // ask again
        ;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-11-28T11:25:09.483

**QMessageBox 的Python**等效代码，其中包含一个问题以及**是**和**否**按钮。单击“是”按钮时，它将弹出另一个消息框，说明单击“是”，并且“否”按钮也相同。您可以在 if 块之后推送自己的代码。

```
button_reply = QMessageBox.question(self,"Test", "Are you sure want to quit??", QMessageBox.Yes,QMessageBox.No,)

if button_reply == QMessageBox.Yes:
    QMessageBox.information(self, "Test", "Yes Button Was Clicked")
else :
    QMessageBox.information(self, "Test", "No Button Was Clicked") 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-08-23T15:02:22.100

如果你想用 python 制作它，你需要在你的工作台中检查这个代码。也这样写。我们用 python 创建了一个弹出框。

```
msgBox = QMessageBox()
msgBox.setText("The document has been modified.")
msgBox.setInformativeText("Do you want to save your changes?")
msgBox.setStandardButtons(QMessageBox.Save | QMessageBox.Discard | QMessageBox.Cancel)
msgBox.setDefaultButton(QMessageBox.Save)
ret = msgBox.exec_() 
```

# algorithm - 堆排序。怎么可能模拟最坏情况？

> ID：13111672
> 
> 赞同：0
> 
> 时间：2012-10-28T18:24:25.390
> 
> 标签：algorithm, sorting, heap

我对如何编程很清楚，但我不确定定义，例如如何用数学术语写下来。一个普通的堆排序是用 O 表示法中的 N 个元素完成的。所以 O(log(n)) 我刚开始使用堆排序，所以我可能有点偏离这里。但是，当有 N 个元素时，我如何寻找随机元素？然后选择那个随机元素并删除它？我在想，在最坏的情况下，它必须遍历整个树（因为元素可能位于第一位或最后一位，例如最高或最低）。但是我怎么能用数学术语把它写下来呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T22:31:22.627

[Heapsort](http://en.wikipedia.org/wiki/Heapsort)的最坏情况性能是 O(n log n)，引用[alestanis](https://stackoverflow.com/users/1225541/alestanis)的话：

> 最大堆中的最大值：O(1)。最小堆中的最小值：O(1)。O(n) 中的相反情况。

[这](https://stackoverflow.com/a/10806132/645270)是一个 SO-answer 解释如果您自己创建堆，如何在 O(1) 中执行相反的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-21T11:08:45.543

构建最大堆数组最坏情况是 O(n) 并且在最坏情况下最大化堆复杂度是 O(logn) 所以 HeapSort 最坏情况是 O(nlogn)

# emacs - emacs中不同的键盘布局键绑定

> ID：13111674
> 
> 赞同：5
> 
> 时间：2012-10-28T18:24:57.763
> 
> 标签：emacs

我使用了两种键盘布局——一种是我的母语，另一种是英语。问题是当我切换到母语键盘布局并尝试执行键绑定命令时。

有没有一种简单的方法可以告诉 emacs 使用默认的英语布局绑定来处理所有命令（C 键、M 键等）？

我见过这个问题： [Emacs 确定键盘布局](https://stackoverflow.com/questions/7813648/emacs-determining-keyboard-layout) ，其中一个答案模拟所有键到他们相应的英语布局键，但有人提到它会占用加载时间，而且代码很长，不可读，因此可能容易出错我.

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T19:56:29.983

许多布局管理器允许应用程序（甚至窗口）保持自己的布局。使用 Emacs 的英文布局，用您的母语书写，切换输入法 ( `C-\`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T20:56:23.930

如果两种布局使用完全不同的字符，那么你可以简单地让 Emacs 尝试“另一个字符”。例如，如果一个键`b`在美国布局中但`и`在另一种布局中，您可以使用：

```
(define-key function-key-map [?и]       [?b])
(define-key function-key-map [?\C-и]    [?\C-b])
(define-key function-key-map [?\M-и]    [?\M-b])
(define-key function-key-map [?\M-\C-и] [?\M-\C-b]) 
```

OTOH，如果两个布局最终交换了一些字符，Emacs 真的需要知道哪个布局是活动的，以便知道是否重新映射键。我对键盘处理知之甚少，不知道如何让 Emacs 告诉您当前正在使用哪种布局。

# wcf - WCF 应用程序在我的家庭网络中不起作用

> ID：13111675
> 
> 赞同：0
> 
> 时间：2012-10-28T18:25:25.410
> 
> 标签：wcf

我在我的机器上测试这个应用程序时创建了一个小型 wcf 应用程序，然后它正在工作，但是当我在同一网络中我家的另一台电脑上运行 wcf 服务器端时，我收到错误 **期间未满足远程端安全要求身份验证。尝试增加 ProtectionLevel 和/或 ImpersonationLevel。**

我家的两台电脑都在同一个工作组中，他们可以互相访问。我试图找出答案，但人们说这是防火墙问题。所以我在两台电脑上都禁用了防火墙，但仍然遇到问题。这是我的示例代码。请指导我如何在我的家庭网络中的两台电脑上运行这个 wcf 应用程序。谢谢

## 服务端

```
namespace WCFSample
{
[ServiceContract]
public interface IService1
{
    [OperationContract]
    string MyName(string name);
}
}

namespace WCFSample
{
public class Service1 : IService1
{
    public string MyName(string name)
    {
        return string.Format("My Name... {0}", name);
    }

}
}

namespace ConsoleApplication1
{
class Program
{
    static ServiceHost customerHost = null;

    static void Main(string[] args)
    {
        try
        {
            HostCustomerService();

            Console.WriteLine();
            Console.WriteLine("Press any key to stop the services.");
            Console.ReadKey();
        }

            catch (Exception ex)
        {
            Console.WriteLine(ex.Message);    
        }
        finally
        {
            customerHost.Close();
        }

    }

    private static void HostCustomerService()
    {
        customerHost = new ServiceHost(typeof
            (Service1));

        ServiceEndpoint tcpEndpoint = customerHost.AddServiceEndpoint(
            typeof(IService1), new NetTcpBinding(),
            "net.tcp://192.168.1.103:9020/Service1");

        customerHost.Open();

        Console.WriteLine("{0} {1}", tcpEndpoint.Address, tcpEndpoint.Name);
        Console.WriteLine();

    }
   }
  } 
```

## 客户端

```
namespace Client1
{
class Program
{
    static void Main(string[] args)
    {
        IService1 channel = null;

        var endPoint = new EndpointAddress(
             "net.tcp://192.168.1.103:9020/Service1");
       channel  = ChannelFactory<IService1>.CreateChannel(new NetTcpBinding(), endPoint);
       Console.WriteLine("Enter Name");
       string line = Console.ReadLine();
       Console.WriteLine(channel.MyName(line));
       Console.ReadKey();
    }

 }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:33:27.280

我认为默认情况下，NetTcpBinding 需要一个安全通道。

当您创建绑定时（在客户端和服务器上），而不是：

`new NetTcpBinding()`

尝试：

`new NetTcpBinding(SecurityMode.None)`

# python - 在窗口中定位画布 - Tkinter/python

> ID：13111679
> 
> 赞同：2
> 
> 时间：2012-10-28T18:25:47.820
> 
> 标签：python, tkinter

有没有办法在窗口中放置画布并在其周围放置一个框架？我只发现如何在画布内放置对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T02:34:03.743

您可以创建一个框架，然后将您的小部件放入其中：

```
f = tk.Frame(...)
c1 = tk.Canvas(f, ...)
c2 = tk.Canvas(f, ...)
c1.pack(side="left", fill="both", expand=True)
c2.pack(side="right", fill="both", expand=True) 
```

以上将在一个框架内为您提供两个并排的画布。当您调整包含窗口的大小时，它们会增长和缩小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-31T17:31:49.040

您可以使用 place() 函数而不是 pack() 并执行以下操作：

```
canvas.place(relx=0.5, rely=0.5, anchor=CENTER) 
```

这将把它放在中心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-18T00:05:17.587

Like fortyTwo102 mentioned, the `place` function will allow you to specify exactly where the canvas is. I thought I'd provide some more examples:

```
# in the center
canvas.place(relx=0.5, rely=0.5, anchor=CENTER)

# in the bottom right corner
canvas.place(relx=1.0, rely=1.0, anchor=SE)

# in the bottom left corner
canvas.place(relx=0.0, rely=1.0, anchor=SW)

# 30 pixels from the left, 50 from the top
canvas.place(x=30, y=50) 
```

Source (and more helpful info): [https://www.tutorialspoint.com/python/tk_place.htm](https://www.tutorialspoint.com/python/tk_place.htm)

# css - 如何使用边界半径制作外部 div 以切断内部 div

> ID：13111681
> 
> 赞同：0
> 
> 时间：2012-10-28T18:26:20.493
> 
> 标签：css, mobile-webkit, iscroll

这是演示（仅适用于 webkit 浏览器）[演示](http://jsbin.com/erumid/1/edit) 我有一个外部 div，所有四个边缘都有圆角。我里面有一个 ul 列表。该列表使用 iscroll 滚动。问题是没有边界半径的列表的 li 项目正在影响外部 div，圆角。请看演示。看底部，不会有圆角。一旦你向下滚动，顶部就不会有圆角。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:31:15.723

`border-radius`应该打开`#viewport`，但由于 Webkit 中未解决的错误导致子内容出现在父项的圆角上，因此仍然无法工作：http [://code.google.com/p/chromium/issues/detail ?id=71639](http://code.google.com/p/chromium/issues/detail?id=71639)

# php - 如何使用函数填充变量？

> ID：13111684
> 
> 赞同：-1
> 
> 时间：2012-10-28T18:26:32.177
> 
> 标签：php, function

我在页面上有下面的代码，基本上我想做的是`$content`使用函数填充变量`pagecontent`。函数内部的任何内容`pagecontent`都应该添加到`$content`变量中，然后我的主题系统会将`$content`其放入主题中。从下面的答案看来，你们认为我想要在我不想要的实际函数中使用 html 和 php。

下面的这个函数用于页面内容，是我目前试图用来填充 $content 的函数。

```
function pagecontent()
{
        return $pagecontent;
}

<?php

    //starts the pagecontent and anything inside should be inside the variable is what I want
    $content = pagecontent() {
?>

I want anything is this area whether it be PHP or HTML added to $content using pagecontent() function above.

<?php

     }///this ends pagecontent
    echo functional($content, 'Home');

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:36:59.117

由于您显然是初学者，这里有一个非常简化的工作版本来帮助您入门。

```
function pageContent()
{
    $html = '<h1>Added from pageContent function</h1>';
    $html .= '<p>Funky eh?</p>';
    return $html;
}

$content = pageContent();
echo $content; 
```

您发布的其余代码对您的问题是多余的。首先获得最低限度的工作，然后从那里继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:39:22.167

我认为您正在寻找输出缓冲。

```
<?

// Start output buffering
ob_start();

?> Do all your text here

<? echo 'Or even PHP output ?>
And some more, including <b>HTML</b>

<?

// Get the buffered content into your variable
$content = ob_get_contents();

// Clear the buffer.
ob_get_clean();

// Feed $content to whatever template engine.
echo functional($content, 'Home'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T18:41:01.620

方式一：

```
function page_content(){
  ob_start(); ?>

    <h1>Hello World!</h1>

  <?php
  $buffer = ob_get_contents();
  ob_end_clean();
  return $buffer;
}

$content .= page_content(); 
```

方式二：

```
function page_content( & $content ){
  ob_start(); ?>

    <h1>Hello World!</h1>

  <?php
  $buffer = ob_get_contents();
  ob_end_clean();
  $content .= $buffer;
}

$content = '';
page_content( $content ); 
```

方式3：

```
function echo_page_content( $name = 'John Doe' ){
  return <<<END

    <h1>Hello $name!</h1> 
```

结尾; }

```
echo_page_content( ); 
```

# java - 将元素添加到循环单链表

> ID：13111686
> 
> 赞同：2
> 
> 时间：2012-10-28T18:26:46.093
> 
> 标签：java

我正在尝试为我的家庭作业添加一个元素到循环单链表的末尾。但由于某种原因，我遇到了很多问题。

我有一个`_tail`指针，并且`_dummy`. JUnit 测试中的 add 方法说，当检查 add 方法时，它返回 null 而不是 1。（1 是添加到列表中的内容）

这是我的代码

```
 private static class Node<T>{
    Node<T> next;
    T data;
    public Node(T data, Node<T> next){
        this.next = next;
        this.data = data;
    }
}

private Node<T> _tail;
private int _count;
private int _version;
private Node<T> _dummy;  

 public CyclicLinkedList(){
    _dummy = new Node<T>(null, null);
    _dummy.next = _dummy;
    _tail = _dummy;
    _count = 0;
    assert _wellFormed();
} 
```

这是我的添加方法

```
@Override
public boolean add(T x){
    assert _wellFormed();

    Node<T> n = new Node<T>(x, _tail.next);
    _tail.next = n;
    _tail = n;

    ++_version;
    ++_count;

    assert _wellFormed();
    return true;
} 
```

assertWellformed 声明链表是错误循环的。_wellFormed() 方法已经由课堂讲师实施，所以这不是问题。需要一些指点！谢谢。这是测试，看看测试是否循环错误。

```
 // check for cycles:
    Node<T> fast = _tail.next;
    for (Node<T> p = _tail; fast != null && fast.next != null && fast != _tail       && fast.next != _tail; p = p.next) {
        if (p == fast) return _report("list is wrongly cyclic");
        fast = fast.next.next;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:30:36.780

```
_tail.next = n;
    _tail = n; 
```

您应该在 add 方法中该代码的开头再添加一行：-

```
n.next = _tail.next; 
```

因此，您的代码变为： -

```
n.next = _tail.next;
_tail.next = n;
_tail = n; 
```

您需要使新节点指向第一个节点，以使其循环。

因为，`_tail.next`我假设必须指向第一个元素，然后再将新节点添加到`List`，所以在将它添加到列表之前分配`_tail.next`给现在也指向第一个。`n.next``n``node`

因此，在第一行，您的两个节点： -`n`节点和`_tail`节点，都指向第一个节点。现在，将您的`_tail`节点与第一个节点分离，并使其指向该`n`节点。最后，将您的`n`节点设为`_tail`节点。

# r - 将参数添加到 R 中的基本后置命令

> ID：13111688
> 
> 赞同：1
> 
> 时间：2012-10-28T18:27:06.887
> 
> 标签：r, curl, markdown

我遇到了[这项服务](http://documentup.com/#themes)，它可以很好地格式化我的本地降价文件。根据示例，使用示例 curl 命令很容易获得格式良好的响应。

我要做的是利用一些可用的选项，即版本和“名称”参数。我将如何构建 curl 命令？以下是我在 R 中使用的代码示例。

此代码运行良好，但缺少指定的选项：

```
doc.up <- "curl -X POST --data-urlencode content@test-markdown.md  \ http://documentup.com/compiled > index.html"
system(doc.up) 
```

我试图指定名称选项，但没有骰子：

```
doc.up <- "curl -X POST --data-urlencode name@mynamevar content@test-markdown.md  \ http://documentup.com/compiled > index.html"
system(doc.up) 
```

任何帮助将不胜感激！

编辑：根据下面的一些建议，我尝试了几种使用`Rcurl`和`HTTR`. 我在 Rstudio 中使用默认的 Markdown 模板，但为了完整起见，我将其保存为 test-markdown.Rmd 并编译它为 test-markdown.md。

使用 RCurl，我尝试：

```
## attempt 1
f <- paste(readLines('test-markdown.md'),collapse="\n" )
h <- dynCurlReader()
wp <- curlPerform(url="http://documentup.com/compiled", 
            postfields = c(content=f))
## attempt 2
postForm("http://documentup.com/compiled",
         "content" = fileUpload('test-markdown.md')) 
```

使用 httr，我尝试了：

```
## attempt 3
tmp <- POST("http://documentup.com/compiled", body = list(content= upload_file(f)))
content(tmp)

## attempt 4
tmp <- POST("http://documentup.com/compiled", body = list(content= upload_file("test-markdown.md"))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T13:33:02.073

以下代码适用于我：

```
library(httr)

url <- "http://documentup.com/compiled"
contents <- readLines("README.md")

resp <- POST(url, body = list(content = contents, name = "plyr"))
content(resp) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T06:52:22.380

@Btibert3 实际上，您可以使用该`rstudio.markdownToHTML`选项将其绑定到 RStudio。请参阅[http://www.rstudio.com/ide/docs/authoring/markdown_custom_rendering](http://www.rstudio.com/ide/docs/authoring/markdown_custom_rendering)

# git - 在主目录中存储裸 Git 存储库的约定？

> ID：13111691
> 
> 赞同：3
> 
> 时间：2012-10-28T18:27:22.733
> 
> 标签：git, fhs

在我的主目录中，我通常将源代码（无论是解压缩的 tar 球还是 Git/Subversion 工作副本）存储在`$HOME/src`受 FHS 启发的下方。我想将裸 Git 存储库与这些存储库分开。

是否有任何约定将裸 Git 存储库存储在主目录中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:22:39.163

当我无法控制系统并且只能以用户身份访问它时，我曾尝试在某些情况下将我的主目录视为另一个 FHS / 或 /usr 目录。

所以我有`/home/me/var/git/whatever.git`（裸存储库）和`/home/me/src/whatever`（工作存储库），以及用于单用户本地安装软件的 、 和 /`/home/me/bin`等`/home/me/lib`。`/home/me/share`

这对我来说没问题，但它确实需要保持一致性，你要小心组织去哪里，不要让随机程序在他们想要的地方写垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:43:45.907

没有我知道的常设惯例。但是，我发现存储裸存储库`/var/git/`非常有效。您还可以创建系统用户 ( `useradd git -r -d /var/git/`) 以简化存储库访问。这将允许访问存储库的语法，如`git@localhost:repository.git`.

这使您在正常情况下不需要经常访问的裸存储库与您的工作副本分开。如果您愿意，它还允许您通过 ssh 对`git`用户进行简单的远程访问。

**编辑**：我刚刚注意到您指定使用主目录。如果绝对有必要使用主目录，我建议使用`~/.git_bare/`or `~/.GIT_BARE/`。

# iphone - 触摸 - 如何在到达某个 Y 点时停止 UIIMageView 移动

> ID：13111694
> 
> 赞同：1
> 
> 时间：2012-10-28T18:27:36.027
> 
> 标签：iphone, ios

我在屏幕底部有一个图像。

我希望用户向上移动图像，直到它到达某个 Y 点，如下所示：

```
[door setCenter:CGPointMake(160,347)]; 
```

到目前为止，当您向上拖动图像（门）时，它会继续经过我的目标点，但是当您松开它时，它会弹回正确的位置。

如果用户的手指仍在向上滑动，如何在到达某个点时停止图像移动？它会在 if 语句中吗？

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    if (startPoint.y < 347) {
         // something in here ?????
    }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *myTouch = [touches anyObject];
    startPoint = [myTouch locationInView:self.view];
    NSLog(@"position = %f and  %f",startPoint.x,startPoint.y);
    [door setCenter:CGPointMake(160, startPoint.y)];
}  

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    [door setCenter:CGPointMake(160,347)];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:55:31.707

如何在`touchesMoved`方法中设置它。就像是，

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *myTouch = [touches anyObject];
    startPoint = [myTouch locationInView:self.view];
    NSLog(@"position = %f and  %f",startPoint.x,startPoint.y);
    if (startPoint.y < 347) { //or suitable condition to verify your case
        [door setCenter:CGPointMake(160, startPoint.y)]; //then only set the center
    } else 
    { 
       [door setCenter:CGPointMake(160,347); 
    } 
} 
```

# c# - 接受数字、字母和连字符的正则表达式

> ID：13111695
> 
> 赞同：0
> 
> 时间：2012-10-28T18:27:40.293
> 
> 标签：c#, regex, validation, webforms

我想要一个正则表达式，它接受所有数字、字母和特殊字符中的连字符 (‐)。

我正在尝试这种表达方式：`^\d+$/[-]/[a-z]`但它不起作用。我想接受这样的表达：

```
Emp-IN-0000001 
```

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T18:34:59.167

如果它总是这种格式（Emp-IN-0000001），那么使用这个正则表达式：

```
^[a-zA-Z]+-[a-zA-Z][a-zA-Z]-[0-9]+$ 
```

或者，如果您有扩展的正则表达式：

```
^[a-zA-Z]+-[a-zA-Z]{2}-\d+$ 
```

当总是有七位数字时，请使用：

```
^[a-zA-Z]+-[a-zA-Z]{2}-\d{7}$ 
```

你甚至可以说：

```
^Emp-IN-\d{7}$ 
```

如果它恰好是“Emp-IN-”+ 数字。

顺便说一句，这不是 C# 特定的，您可以将这些正则表达式用于任何语言，只要它们完全支持正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T18:36:02.980

如果您坚持要遵循这种格式**Emp-IN-0000001**，那么您可能需要使用这个正则表达式：

```
^[a-zA-Z]+-[a-zA-Z]+-\d+$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T18:29:25.097

我真的不明白你用你的正则表达式尝试了什么，但它实际上就像这样简单：

```
^[a-zA-Z\d-]+$ 
```

或者，如果您想允许空字符串：

```
^[a-zA-Z\d-]*$ 
```

如果在正则表达式中使用不区分大小写的修饰符，则可以省略 the`a-z`或`A-Z`两个变体。

我建议您阅读[这个很棒的教程](http://www.regular-expressions.info/tutorial.html)中的一些正则表达式基础知识。

# java - 学习java，找不到符号

> ID：13111698
> 
> 赞同：9
> 
> 时间：2012-10-28T18:27:59.573
> 
> 标签：java, string, recursion

我正在学习 Java 并坚持一个自测练习，编写一个递归函数，向后打印一个字符串......

我了解编译器错误，但我不确定该怎么做。

我的代码...

```
class Back {
    void Backwards(String s) {
            if (s.length = 0) { 
                    System.out.println();
                    return;
            }
            System.out.print(s.charAt(s.length));
            s = s.substring(0, s.length-1);
            Backwards(s);
    }
}

class RTest {
    public static void main(String args[]) {
            Back b;
            b.Backwards("A STRING");
    } 
```

}

编译器输出...

```
john@fekete:~/javadev$ javac Recur.java 
Recur.java:3: error: cannot find symbol
    if (s.length = 0) { 
         ^
  symbol:   variable length
  location: variable s of type String
Recur.java:7: error: cannot find symbol
    System.out.print(s.charAt(s.length));
                               ^
  symbol:   variable length
  location: variable s of type String
Recur.java:8: error: cannot find symbol
    s = s.substring(0, s.length-1);
                        ^
  symbol:   variable length
  location: variable s of type String
3 errors 
```

完成代码...

```
class Back {
    static void backwards(String s) {
            if (s.length() == 0) {
                    System.out.println();
                    return;
            }
            System.out.print(s.charAt(s.length()-1));
            s = s.substring(0, s.length()-1);
            backwards(s);
    }
}

class RTest {
    public static void main(String args[]) {

            Back.backwards("A STRING");
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T18:29:33.370

像这样写：

```
s.length() == 0 // it's a method, not an attribute 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T19:49:58.923

一些一般的“良好编码”建议：

*   类名应该代表一个“事物”，通常一个类名是一个名词（例如“StringTool”）
*   方法应该代表一个动作，通常方法名是一个动词（例如“reverse”）
*   参数和变量名称应该是有意义的并描述它们所代表的内容。
*   您不应该重新分配方法参数，因为它可能会产生误导。
*   一个方法应该有一个确切的责任（所以不反转和打印一个字符串）。这促进了清晰度和重用性。

我已将这些建议应用于您完成的代码，见下文：

```
public class StringTool {

    public static String reverse(String source) {

        // stop condition of the recursion
        if (source.isEmpty()) {
            return "";
        }

        int lastPosition = source.length() - 1;
        String lastCharacter = source.charAt(lastPosition);
        String restOfSource = source.substring(0, lastPosition);

        // place the last character at the beginning and reverse the rest 
        // of the source recursively
        return lastCharacter + reverse(restOfSource);
    }

    // test method
    public static void main(String args[]) {
        System.out.println(reverse("A STRING"));
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T18:33:06.050

在您的 if 语句中，您将 0 分配给 s.length 而不是检查。这样做：

```
if(s.length()==0)
//rest of your code 
```

另一个故障是`s.charAt(s.length())`。字符串中第 i 个字符的索引是 (i-1)，类似于数组的索引。所以字符串的最后一个字符有 index `(s.length()-1)`。因此，将那行代码替换为`s.charAt(s.length()-1)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T18:34:28.340

这应该更好地反映您要完成的工作：

```
class Back {
    void Backwards(String s) {
            if (s.length() == 0) { 
                    System.out.println();
                    return;
            }
            System.out.print(s.charAt(s.length()));
            s = s.substring(0, s.length()-1);
            Backwards(s);
    }
}

public class RTest {
    public static void main(String args[]) {
            Back b = new Back();
            b.Backwards("RAPE APE");
    }
} 
```

*   长度（）是一个函数
*   比较用途`==`
*   您必须实例化 b 才能使用它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T18:29:41.580

你忘了括号：

```
s.length() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-28T18:30:22.050

`length`是一个[方法](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#length%28%29)，而不是一个属性。你必须这样使用它：

```
s.length(); // note the use of parens 
```

* * *

此外，由于以下情况，修复后您将遇到编译错误：

```
if (s.length = 0) { 
```

它应该是

```
if (s.length == 0) { 
```

* * *

最后，在您的`main`方法中，`b`必须实例化变量，使用

```
Back b = new Back(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-28T18:42:40.340

**-**`String`我们提供了一个名为而不是**字段**的**函数**。`length()`**`length`**

 ****-**如果您使用的是，`Array`那么它将是`length`因为**Array 有一个且只有一个**名为的 Instance 变量`length`。

**例如：**

```
s.length() == 0; 
```**

# c# - 客户端/服务器应用程序 - 丢失字节

> ID：13111699
> 
> 赞同：5
> 
> 时间：2012-10-28T18:28:00.743
> 
> 标签：c#, java, sockets

我用 Java 创建了一个客户端，我只想将一些数据发送到我的 C# 中的服务器。

问题是，如果我在客户端写例如你好，我只收到第一个字母。在字节数组中只有一个元素。

我猜服务器端有一些问题，因为在我的 JAVA 服务器中一切正常，所以 JAVA 中的客户端工作正常。

有人看到有什么问题吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:04:07.790

正如 Damon Gant 所说，TCP 是一种流协议。我建议您创建自己的协议。我不会发送字符串。如果您正在做任何不平凡的事情，这确实是最好的方法。

通常我会在我的协议头中包含一个幻数、校验和、以字节为单位的数据包主体长度和协议版本。幻数可以更轻松地描述流中的数据包（对于调试自定义协议流非常有用。）拥有校验和有助于确保您正确解析事物。校验和对 TCP 的完整性没有多大帮助，因为 TCP 协议已经有校验和。数据包正文长度可帮助您检测何时拥有数据包的所有字节。协议版本可以帮助您了解如何解释数据包主体的字节。

收到数据后，将所有字节放入单独的缓冲区并扫描您的协议头。如果您可以解析您的标头，请检查该数据包的所有字节是否都存在。如果是，则解析数据包。重复这个过程，直到你找到一个不完整的数据包，或者缓冲区是空的。

对于您要发送的每个数据包，我会创建一个类。当您想发送数据包时，创建并序列化正确的类，并为该类的字节添加您的协议标头。

您可以使用 Java 的序列化程序，但如果您有多个客户端连接到单个服务器，您可能不想将 Java 用于服务器。这使事情变得困难，因为现在您需要用另一种语言实现 java 序列化程序。因此，最好手动将数据包转换为字节（繁琐但简单），或者您可以使用反射编写自己的序列化程序。我建议后者用于更大的项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T18:44:11.833

您以错误的方式考虑 TCP，您不会简单地“接收”一次并获得一次“发送”的结果。

TCP 是一种“流”协议，不会自动分成“数据包”。您甚至可以在一次接收中获得 2 次发送的数据。

一种常见的模式是在一条消息前面加上它的长度，这样你就可以调用receive，直到你得到请求的字节数。如果缓冲区中没有数据，要让 Receive 立即返回，[请将您的套接字设置为 non-blocking](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.blocking.aspx)。

[这是关于该主题的另一篇好文章。](http://www.stratus.com/blog/openvos/?p=369)

现在，您提供的代码应该可以以任何一种方式工作，因为本地网络上几乎没有延迟。您是否检查过您的 Java 部件是否缓冲了蒸汽/您可以手动刷新它们吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T18:44:18.680

问题可能出在 java 方面，因为您的侦听器工作正常。我将您的侦听器代码复制粘贴到测试应用程序中。然后我创建了另一个测试应用程序并发送你好词，我完全听了它。

```
public static  void sender()
{
  TcpClient client = new TcpClient();
  IPEndPoint serverEndPoint = new IPEndPoint(IPAddress.Parse("192.168.2.236"), 30000);
  client.Connect(serverEndPoint);
  NetworkStream clientStream = client.GetStream();
  ASCIIEncoding encoder = new ASCIIEncoding();
  byte[] buffer = encoder.GetBytes("Hello Server!");

  clientStream.Write(buffer, 0, buffer.Length);
  clientStream.Flush();
}

Connection accepted from 192.168.2.236:22811
Recieved...
Hello Server! 
```

**顺便说一句，这可能是更好的听众。**

```
public void listener()
    {
  TcpListener tcpListener = new TcpListener(IPAddress.Any, 30000);
  tcpListener.Start();

  TcpClient tcpClient = tcpListener.AcceptTcpClient();
  NetworkStream clientStream = tcpClient.GetStream();

  byte[] message = new byte[4096];
  int bytesRead;

  while (true)
  {
    bytesRead = 0;

    try
    {
      //blocks until a client sends a message
      bytesRead = clientStream.Read(message, 0, 4096);
    }
    catch
    {
      //a socket error has occured
      break;
    }

    if (bytesRead == 0)
    {
      //the client has disconnected from the server
      break;
    }

    //message has successfully been received
    ASCIIEncoding encoder = new ASCIIEncoding();
    Console.Write(encoder.GetString(message, 0, bytesRead));
  }

  tcpClient.Close();
} 
```

# java - 在运行时从 Jar 中检索和排序文件列表

> ID：13111700
> 
> 赞同：1
> 
> 时间：2012-10-28T18:28:18.083
> 
> 标签：java

我对Java（以及stackoverflow）相当陌生，所以我会尽力做到这一点。我正在使用 Eclipse Juno 和 JavaSE 1.7。

我想创建一个数据结构，允许我动态排序和检索运行时需要的文件。这些文件将是根据找到它们的“位置”或它们所属的“类型”来处理的脚本。例如，与从命令行处理命令相关的脚本将是“命令”脚本。

我了解到 Jar 中的“目录”或多或少毫无意义，因此巧妙地使用这些目录被证明是无用的。虽然有一些技巧可以让它发挥作用，但我想要一个更强大的解决方案。

（我看过以下线程问题和答案： [如何列出 JAR 文件中的文件？](https://stackoverflow.com/q/1429172/1613364)和 [列出当前 JAR 文件目录中的文件](https://stackoverflow.com/q/346811/1613364)）

经过一番思考，我决定我需要重新考虑如何检索这些文件，考虑到我对 Java 的了解仍然不足，这就是我不知所措的地方。我发现自己漫无目的地在互联网上跳来跳去寻找答案，这就是我决定应该直接问这个问题的时候。

我的问题是：创建有意义的文件结构的最佳方法是什么，它允许我检索与我想在运行时如何处理它们相关的（脚本）文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:59:30.947

这个问题有很多答案。真正的问题是该计划的目标受众将如何使用这些信息？也就是说，您的目标是可以编写一些代码的开发人员吗？只需要添加一些配置的高级用户？还是没有大量计算机经验的普通民众？

首先，您可以创建自己的注解，并在类路径中找到所有具有注解的类。这将允许开发人员通过向类路径添加一些 jar 来向您的系统添加类。

第二，也许你可以有一个插件目录，并遍历那里的文件以找到定义的扩展？或者也许有一个列出您应该使用的插件的配置文件？

最后，对于一般用户来说，你应该让它变得简单。GUI 是否允许用户按位置指定附加功能？或网站？可能像 Firefox 插件一样？

# ios - 来自粒子设计器的 CCParticleSystemQuad 颜色不正确？

> ID：13111701
> 
> 赞同：1
> 
> 时间：2012-10-28T18:28:22.210
> 
> 标签：ios, colors, cocos2d-iphone, particles, ccparticlesystem

我正在使用最新版本的 Cocos2D 和 Particle Designer，我注意到 Cocos2D 中的颜色与它们在 Particle Designer 模拟器中的外观不同。特别是我试图为我的粒子实现更橙色的颜色，但无论我尝试什么，粒子总是呈黄色。

特别是当我增加起始红色值或粒子动画时，我看到 Cocos2D 中动画的红色没有变化。我还必须注意，我在 Cocos2D 1.x 中没有这个问题，所以一定有什么东西坏了。它可以完成这个拉取请求吗？[https://github.com/cocos2d/cocos2d-iphone/pull/205](https://github.com/cocos2d/cocos2d-iphone/pull/205)

是否有一些特定的源和目标混合功能我应该与 Cocos2D 2.x 一起使用以获得我在 Particle Designer 的模拟器中看到的结果？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:42:59.850

您的粒子系统可能处于加法混合模式（来源：GL_SRC_ALPHA，目的地：GL_ONE）。IIRC，粒子设计器的默认背景为黑色（rgb 0, 0, 0），因此其预览中粒子的可见颜色不会改变。按预期工作；将应用内背景的图像设置为预览背景并尝试混合模式设置。

# android - Android反序列化异常

> ID：13111702
> 
> 赞同：2
> 
> 时间：2012-10-28T18:28:36.820
> 
> 标签：android, serialization, deserialization, illegalargumentexception

好的，我的应用程序版本相同，代码结构没有任何变化。我下载了我的应用程序的当前市场版本，并序列化了一些数据并将其保存到数据库中。我可以在应用程序中重新打开它，没有问题。

问题是，当我构建应用程序的新版本、对其进行签名并升级应用程序时，在尝试反序列化时出现此异常：

```
java.lang.IllegalArgumentException: expected receiver of type java.util.ArrayList, but got org.myApp.h.d 
```

org.MyApp.hd 实际上是 org.MyApp.SingleFrame：

```
public final class SingleFrame implements Serializable
{
    private static final long serialVersionUID = 1L;
    public int Position;
    public int FrameNumber;
    public String TimeStamp;
    public Map<Integer,String> MainDataMap;
    public Map<Integer,String> DataMap;

    public SingleFrame()
    {
    }
} 
```

这是它的父类（被序列化和反序列化的，只是 SingleFrame 的集合）：

```
public class DataLog extends ArrayList<SingleFrame> implements Serializable
{   
    private static final long serialVersionUID = 1L;

    public DataLog ()
    {

    }
} 
```

如果我调试应用程序一切都很好。问题是当我构建一个版本时，保存一些数据，然后构建一个新版本......更新应用程序，然后尝试打开（反序列化）旧保存的数据。

这是我的proguard配置：

```
-keepclassmembers class * implements java.io.Serializable {
    static final long serialVersionUID;
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
} 
```

# c# - TryInvokeMember 和 TryInvoke 之间的区别

> ID：13111716
> 
> 赞同：17
> 
> 时间：2012-10-28T18:30:36.143
> 
> 标签：c#, c#-4.0, dynamic, tryinvokemember

这是`DynamicObject`课程的一部分：

```
public class DynamicObject : IDynamicMetaObjectProvider
{ 
    ...
    public virtual bool TryInvoke(InvokeBinder binder, object[] args, out object result)
    {
      result = (object) null;
      return false;
    }
    ...
    public virtual bool TryInvokeMember(InvokeMemberBinder binder, object[] args, out object result)
    {
      result = (object) null;
      return false;
    }
} 
```

来自 MSDN：：
`TryInvoke`为调用对象
`TryInvokeMember`的操作提供实现：为调用成员的操作提供实现

我想知道这两种方法之间的**真正**区别，因为它们的语法和实现几乎相同。我已经知道 TryInvoke if 用于对象或委托，而 TryInvokeMember 用于方法，但是为什么要使用两个方法呢？一个很好的例子将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-28T19:04:25.180

文档不是很清楚，但[TryInvoke](https://msdn.microsoft.com/en-us/library/dd487395%28v=vs.110%29.aspx)和[TryInvokeMember](https://msdn.microsoft.com/en-us/library/dd487539%28v=vs.110%29.aspx)的示例 显示了差异。 `TryInvoke`在调用对象时调用（将其视为委托）并`TryInvokeMember`在调用对象上的方法时使用。

下面的示例来自 MSDN 示例：

```
dynamic number;
....
// Invoking an object. 
// The TryInvoke method is called.
number(2, "Two");

// Calling a method
// The TryInvokeMember method is called.
number.Clear(); 
```

您显示的实现是相同的，因为它们都是空实现。返回 false 表示尝试调用的方法未实现。

如果有一个非空实现，不同之处在于`TryInvokeMember`它将检查`binder.Name`属性以确定将调用哪个方法，而不会为`TryInvoke`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:35:02.837

还

Console.WriteLine(number); // 将调用一个对象，并调用 TryInvoke 方法

# java - Apache Commons 文件上传与 Ftp

> ID：13111726
> 
> 赞同：2
> 
> 时间：2012-10-28T18:31:13.843
> 
> 标签：java, apache, file-upload, ftp, apache-commons

我试图了解基于 Java 的现有代码库，涉及在 Apache 服务器上使用[Apache File Upload进行文件上传。](http://commons.apache.org/fileupload/)想知道是否有我们不能使用的原因，或者使用某些`Ftp Client`文件来 ftp 文件而不是必须依赖是否有任何不利之处，`Apache File Upload`如果有人能对此有所了解，将不胜感激。

# javascript - 对于检测用于访问我的网站的设备或计算机的脚本，我需要什么？

> ID：13111732
> 
> 赞同：0
> 
> 时间：2012-10-28T18:31:58.447
> 
> 标签：javascript, tracking

我只是想使用 AJAX 机制来跟踪一个人在网页上停留了多长时间，以及登录的注册用户是否同时使用多个设备或计算机访问该页面。

javascript 或 jQuery 有没有办法每隔一段时间将设备或计算机的唯一标识符发送回 Web 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:38:01.760

您可以通过在后端实现一些 API 并读取客户端信息（浏览器信息和操作系统信息）并将其存储在您的服务器中以进行分析...您可以尝试[http://www.google.com/analytics/](http://www.google.com/analytics/)这对用户是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:40:28.063

使用适当的会话信息设置一个 cookie，并在页面的每个 AJAX 请求中读取它。

从 session_id 开始，您的 Web 服务器将知道该会话是为谁启动的，并且就 COMET 而不是轮询而言，持续的长期 AJAX 请求应继续帮助您更新可以为每个设备的用户维护的时间戳，从而计算多长时间他去过那里。

如何在服务器端实现它完全取决于您，明智地使用会话和数据库！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:39:22.900

没有办法在客户端上做到这一点。javascript“导航器”对象可以帮助您检测浏览器和操作系统，但这还不够。更好的方法是在服务器端检测请求 IP，但这也不是涵盖所有情况。

浏览器无法为您提供任何唯一的设备 ID。但是创建一个浏览器插件会有所帮助（因为插件可以检测 MAC 地址）。

# c# - 在 .NET 远程处理中，如何在客户端激活的远程对象上调用方法？

> ID：13111738
> 
> 赞同：0
> 
> 时间：2012-10-28T18:32:39.057
> 
> 标签：c#, .net, remoting

我可以在客户端和服务器之间建立远程通信，但是每次客户端调用客户端激活远程对象上的方法时，我都会收到 System.Net.WebException：

```
{"The underlying connection was closed: An unexpected error occurred on a receive."}

There is a System.IO.IOException INnerException
{"Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host."}

The stack trace is this:

"\r\nServer stack trace: \r\n   
at System.Runtime.Remoting.Channels.Http.HttpClientTransportSink.ProcessResponseException(WebException webException, HttpWebResponse& response)\r\n   
at System.Runtime.Remoting.Channels.Http.HttpClientTransportSink.ProcessMessage(IMessage msg, ITransportHeaders requestHeaders, Stream requestStream, ITransportHeaders& responseHeaders, Stream& responseStream)\r\n   
at System.Runtime.Remoting.Channels.SoapClientFormatterSink.SyncProcessMessage(IMessage msg)\r\n\r\n
Exception rethrown at [0]: \r\n   
at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)\r\n   
at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)\r\n   
at Remoting.Example.DoSomething() ....
at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)\r\n   
at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()\r\n   
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   
at System.Threading.ThreadHelper.ThreadStart()" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:26:00.690

无论如何，当我将服务器和客户端上的通道从 http 更改为 tcp 时，问题就解决了。

# javascript - 删除由 AJAX 添加的 HTML

> ID：13111741
> 
> 赞同：1
> 
> 时间：2012-10-28T18:33:07.163
> 
> 标签：javascript, jquery, ajax

我有一个建立订单的页面。该页面完全使用 ajax 来查找产品并将它们添加到页面中。

现在，如果您添加一个项目并需要删除它，我正在构建功能来做到这一点：

```
$('.orderRemove').click(function() {
    var removeID = $(this).attr("id");
    $("#item-" + removeID).remove();
    calculateTotal();
}); 
```

但是由于 .orderRemove 是由 AJAX 添加的，所以它不起作用。

我如何才能使这个确切的调用工作，删除由 ajax 添加的完整块。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T18:36:32.993

原因是动态添加到 DOM 的 HTML 不会将自身附加到事件处理程序，因此要么在 ajax 成功回调中重新附加事件处理程序，要么尝试[`.delegate`](http://api.jquery.com/delegate/)使用 jQuery 版本低于`1.7`或[`.on`](http://api.jquery.com/on/)使用 jQuery 版本 1.7 或更高

```
$(document).delegate('.orderRemove','click',function() {
    var removeID = $(this).attr("id");
    $("#item-" + removeID).remove();
    calculateTotal();
}); 
```

.on 示例

```
$(document).on('click','.orderRemove',function() {
   var removeID = $(this).attr("id");
   $("#item-" + removeID).remove();
  calculateTotal();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T18:35:45.990

你必须`on`像这样使用

```
$(document).on('click','.orderRemove',function() {
   var removeID = $(this).attr("id");
   $("#item-" + removeID).remove();
  calculateTotal();
}); 
```

# objective-c - 在 Mac OS X 中以编程方式快速查看图像

> ID：13111742
> 
> 赞同：12
> 
> 时间：2012-10-28T18:33:26.717
> 
> 标签：objective-c, xcode, macos, quicklook

我正在 Xcode 中为 Mac OS X 开发一个应用程序，并且我正在尝试实现一个在 Quicklook 模式下打开图像的按钮（例如当您在 Finder 中选择图像并按 <space> 时）。

当您单击聊天期间下载的文件旁边的小圆形“眼睛”图标时，我希望它像 Skype for Mac 一样工作。

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-18T19:50:34.123

在重新审视这个问题之后，我终于找到了一个资源，它引导我朝着解决问题的正确方向前进。

[Apple 的 Quick Look Programming Guide](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/Quicklook_Programming_Guide/Introduction/Introduction.html)似乎非常关注生成器的实现，这不是我感兴趣的。该文档似乎没有一节解释如何从应用程序内部显示 QuickLook 预览。但是，我遇到了一个示例项目 ( [QuickLookDownloader](http://developer.apple.com/library/mac/#samplecode/QuickLookDownloader/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009082-Intro-DontLinkElementID_2) )，它很好地说明了它是如何完成的。

您基本上使用应用程序的共享 QLPreviewPanel 对象。您可以通过调用其 makeKeyAndOrderFront: 方法使 QLPreviewPanel 成为关键窗口。然后，您通过 QLPreviewPanelController 协议的方法接受（并释放）QLPreviewPanel。当 QLPreviewPanel 成为键时，在响应者链上响应它的第一个对象上调用这些方法。您还必须实现 QLPreviewPanelDataSource 和 QLPreviewPanelDelegate 协议并将委托分配给 QLPreviewPanel。

需要采取一些步骤，但 QuickLookDownloader 项目示例很好地说明了这一点。

# .net - 水晶报表在开发系统上工作，但不在生产系统上

> ID：13111745
> 
> 赞同：-1
> 
> 时间：2012-10-28T18:33:32.707
> 
> 标签：.net, vb.net, crystal-reports, crystal-reports-2008

我遇到了 Crystal Reports 和 VB.NET 的问题

问题是我的代码在我的机器上本地运行，但是当我部署它时，它似乎有一些身份验证问题。

在我部署我的项目并且客户端尝试访问它之后，Crystal Reports 现在提示输入我的本地开发 SQL Server 实例的用户名和密码。

[http://s8.postimage.org/65syeiblx/untitledfds.png](http://s8.postimage.org/65syeiblx/untitledfds.png)

关于可能导致此问题的原因以及如何纠正它的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:36:22.947

我的项目遇到了完全相同的问题。您需要做的就是使用数据表。使用查询将数据提取到这些数据表中。不要直接与数据库建立连接

# asp.net-mvc - 使用 ASP.Net MVC 上传 multiplr 文件

> ID：13111749
> 
> 赞同：0
> 
> 时间：2012-10-28T18:33:51.217
> 
> 标签：asp.net-mvc, file-upload

我需要一个打开的对话框来选择许多文件，然后我想处理控制器中的文件。视图应该如何？我使用的是 aspx 而不是剃须刀。

使用此代码，我们可以只选择一个文件，然后在控制器中使用它

```
<div class="editor-field">
    <input type="file" id="img1" name="img1" />
</div> 
```

但是选择多个文件呢？（通过 Shift 或 Ctrl 键）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:48:03.903

MVC3 的文件上传：[https](https://github.com/maxpavlov/jQuery-File-Upload.MVC3) ://github.com/maxpavlov/jQuery-File-Upload.MVC3 。Is 既使用了处理程序，也使用了 MVC3 操作的示例。

# javascript - 在 $.load() 之后提交许多（几乎）相同的表单之一而不刷新页面

> ID：13111750
> 
> 赞同：0
> 
> 时间：2012-10-28T18:33:56.227
> 
> 标签：javascript, jquery, html

我有一个网页，它使用 jquery.load() 来提取填充了从数据库中提取的 php 值的 html 代码。

```
$(function() {
console.log("Starting .load");
$("#stream").append($("#slipp-container").load("includes/databaseslippsAJAXserverside.php .slipp-container"));
}); 
```

我希望能够在不刷新页面的情况下向其中的一个添加评论。

每个单据都包含有关单据的基本信息，以及`databaseslippsAJAXserverside.php`单独加载的用户评论。

问题是对于每个滑动，还有一个“添加评论”框，它只是一个带有提交按钮的文本区域。 `$value["ID"]`是单据的唯一 ID。我以为我可以使用隐藏字段来传递用户名，并且函数调用自身来传递滑动的 ID，但我不知道从那里去哪里。

```
<form id="<?php echo $value["ID"]; ?>">
<textarea rows="4" cols="30"></textarea>
<input type="hidden" value="<?php echo $_SESSION["user"]; ?>" name="formUser">
<input type="submit" value="Add Comment" class="commentbutton" id="CCB<?php echo $value["ID"]; ?>" action="javascript: addComment(<?php echo $value["ID"]; ?>)">
</form> 
```

任何时候一个页面上可能有超过 100 个滑动（Facebook 风格），那么我如何有一个函数将表单数据提交到相关的 php 文件以包含在数据库中，而不刷新页面？

我相当肯定 .load() 基本上会丢弃它加载的所有 javascript，这就是为什么我不能简单地将唯一的 php 生成的 javascript 附加到每个单据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T22:38:19.773

1.  在表单中添加类：

    ```
    <form id="<?php echo $value["ID"]; ?>" class="comments">
    <textarea rows="4" cols="30"></textarea>
    <input type="hidden" value="<?php echo $_SESSION["user"]; ?>" name="formUser">
    <input type="submit" value="Add Comment" class="commentbutton" id="CCB<?php echo $value["ID"]; ?>" action="javascript: addComment(<?php echo $value["ID"]; ?>)">
    </form> 
    ```

2.  在 javascript 中设置处理程序以形成提交：

    ```
    $(function() {
     $('form.comments').submit(function(e) {
        $.post('myformhandler.php',data: $(this).serializeArray(),function(data) {
         /* Add an action here performed on success loading, 
            use data as returned value; */
         });
        return false;
     }
    );
    }); 
    ```

# java - 下载最新的 4.2 eclipse 版本。它坏了吗？

> ID：13111751
> 
> 赞同：0
> 
> 时间：2012-10-28T18:34:04.463
> 
> 标签：java, eclipse, eclipse-rcp, eclipse-juno

我正在寻找专门针对**4.2**的最新 eclipse 构建。
在[此](http://download.eclipse.org/eclipse/downloads/)下载页面中，最新的是最新的，`4.2 Maintenance Build`但是当我通过此链接转到下载区域时，我[看到](https://i.stack.imgur.com/PDKzb.png)了该页面：

![在此处输入图像描述](../Images/a984908eaa1a14e3cda60824e794c296.png)

为什么状态为红色 X？构建是否损坏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:50:38.483

> 定期生成维护版本以将修复合并到现有版本中。它们通常由 Git 存储库的维护分支（即 R3_7_maintenance）中的标记插件和功能项目构建。在开发团队在一个或多个测试修复通过周期后认为某个版本稳定后，维护版本将升级为次要版本或服务版本（即 R3.7 或 R3.7.1）。

维护构建不必是稳定的。去寻找下一个版本的当前和稳定版本的发布版本。集成构建*也应该*是稳定的——但实际上我也看到了一些测试失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:46:30.873

下载链接上方的一行是[对不同类型构建的描述](http://download.eclipse.org/eclipse/downloads/build_types.html)，您应该阅读它以了解维护构建不是您的最佳选择。

# javascript - 用于删除本地存储项的 jQuery 对话框操作不起作用

> ID：13111756
> 
> 赞同：0
> 
> 时间：2012-10-28T18:34:21.907
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

我正在尝试获取它，以便当用户为每个人单击删除记录并点击确认提示时，它实际上会从本地存储中删除单个记录。看来我的明确本地存储一个有效，但不是删除个人一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:56:31.220

我认为您过于复杂的事件处理程序，为什么使用`$(document).delegate('#clearSData', 'click',`而不是 just `#clearData'.click()`？另外，this.key 是什么？我认为`this`是`this`按钮，它与存储无关。在我的示例中一切正常：

[http://jsfiddle.net/oceog/7Lawq/3/](http://jsfiddle.net/oceog/7Lawq/3/)

HTML：

```
<button id="delete">Delete</button>
<button id="add">Add</button>
<div id="out"></div>​
​ 
```

JS：

```
var show = function() {
    var out = $('#out'); //.children().remove();
    console.log(out.children());
    out.children().remove();
    out.html('');
    //debugger;
    for (var i in localStorage) {
        var newline = $('<div>').text(i + ':' + localStorage.getItem(i)).data('i', i);
        out.append(newline);
        newline.click(function() {
            var that = $(this);
            var i = that.data('i')
            $('<div>').simpledialog2({
                mode: 'button',
                headerText: 'Warning',
                headerClose: true,
                buttonPrompt: 'Delete Running Record? Cannot be undone!' + '<div>' + i + ':' + localStorage.getItem(i) + '</div>',
                buttons: {
                    'OK': {
                        click: function() {
                            localStorage.removeItem(i);
                            show();
                        }
                    },
                    'Cancel': {
                        click: function() {
                            cancelDialog2(this);
                        },
                        icon: "delete",
                        theme: "b"
                    }
                }
            });

        });
    }
};

$('#add').click(function() {
    var
    key = (Math.random() * 10000000000 + '').replace(/\..*$/, ''),
        value = (Math.random() * 100000000000 + '').replace(/\..*$/, '');
    localStorage.setItem(key, value);
    show();
});
$('#delete').click(function() {
    for (var i in localStorage) {
        localStorage.removeItem(i);
        show();
        break;
    }
});
$('#dialogb').click(function() {
    $('#dialog').dialog();
});
show();

function cancelDialog2(el) {
    var self = el;
    $('<div>').simpledialog2({
        mode: 'blank',
        headerText: 'Info',
        headerClose: true,
        blankContent: "<ul><li>Running records have not been touched.</li></ul>" +
        // NOTE: the use of rel="close" causes this button to close the dialog.
        "<a rel='close' data-role='button' href='#'>Close</a>"
    })
}​ 
```

CSS：

```
 #out div:hover {
 background-color: red;
 color: blue;    
} 
```

* * *

因此，添加`data('key',key)`到按钮并在对话框按钮单击关闭中使用该数据。

# c++ - 为什么循环是无限的？

> ID：13111763
> 
> 赞同：0
> 
> 时间：2012-10-28T18:35:16.133
> 
> 标签：c++, file, io, stdin, eof

```
char s;
list<char> inp;

while(s=fgetc(stdin),s!=EOF)
{
    inp.push_back(s);
    printf("%c",s);
}
for(list<char>::iterator n=inp.begin();n!=inp.end();n++)
{
    cout<<*n;
} 
```

上面代码中的while循环永远不会被终止？如果从未从标准输入接收到 EOF，则可能会发生这种情况。这怎么可能发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:36:54.460

制作`s`一个`int`. 该[`fgetc()`函数](http://www.cplusplus.com/reference/clibrary/cstdio/fgetc/)返回一个`int`，因为`EOF`它被定义为一个。

```
int s; 
```

将其更改为：

```
while((s=fgetc(stdin)) != EOF)
{
    inp.push_back(s);
    printf("%c",s);
} 
```

此外，除非您使用管道，否则在使用`EOF`时不会自动读取。`stdin`

这样想吧……

程序等待用户输入字符。程序如何知道是否`EOF`已经到达或用户正在考虑接下来要输入什么。用户必须通过键入发送`EOF`到程序`ctrl+D`。

例外情况是当您重定向`stdin`到管道时。例如，如果您将程序编译为`a.out`：

```
cat "myfile" | a.out 
```

# batch-file - 遍历文件夹并合并文件？

> ID：13111768
> 
> 赞同：0
> 
> 时间：2012-10-28T18:35:52.013
> 
> 标签：batch-file

我想遍历一个包含文本文件的文件夹并将它们合并在一起。

当他们合并时，我想删除重复项并对它们进行排序。

我将如何使用批处理脚本完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:21:27.273

只要目标文件名不匹配通配符规范，最简单的方法是这样的：

```
copy /b file?.txt new_file.txt 
```

这`/b`意味着以“二进制”模式复制。否则，默认设置`/a`将停止在 a 处复制任何源文件`Ctrl+Z`，并在文件末尾附加 a `Ctrl+Z`。

如果如以下评论所示，担心一个或多个文件可能无法以 CRLF 正确结束，则另一种解决方案是

```
(for %i in (file?.txt) do type %i)>new_file.txt 
```

如果文件名有空格或其他奇数字符，您可能需要引用它们，如下所示：

```
(for %i in (*.txt) do type "%i")>new_file.txt 
```

但这只是答案的一部分。要删除唯一名称，有几种仅使用批处理文件或使用 powershell 的解决方案，但最简单的方法是使用 GnuWin32 排序实用程序。它可以从[SourceForge](http://gnuwin32.sourceforge.net/packages/coreutils.htm)获得。那么答案就变得简单了：

```
(for %i in (*.txt) do type "%i")|sort -u|>new_file.txt 
```

这样做的附带好处是 GNU 排序是一个非常有用的实用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:16:05.443

补充 lavinio 答案，以遵守 OP 要求“删除重复项并对它们进行排序”，在连接文件后，使用 powershell 排序和获取唯一命令

```
gc allfiles.txt | sort | get-unique > allfiles.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T21:46:53.937

如果某些文件中的最后一行没有被换行符终止，Lavinio 的解决方案将无法正常工作。

这是一个简单的命令（不需要批处理），即使最后一行没有被换行符终止，它也可以安全地连接所有文件。如果从批处理文件中运行，则将百分比加倍。

```
>merged.tmp (for %F in (*.txt) do type "%F") 
```

如果您想对重复行进行排序和删除，那么 PA 有一个 powershell 解决方案。这是一个对重复行进行排序和删除的批处理解决方案。请注意，SORT 在批处理中不区分大小写，因此重复删除也是不区分大小写的。

```
@echo off
setlocal disableDelayedExpansion
>merged.tmp (for %%F in (*.txt) do type "%%F")
sort /rec 8192 merged.tmp /o merged.tmp2
>merged.txt (
  for /f delims^=^ eol^= %%A in (merged.tmp2) do (
    set "newLn=%%A"
    setlocal enableDelayedExpansion
    if /i "!newLn!" neq "!ln!" (
      endlocal
      set "ln=%%A"
      echo %%A
    ) else endlocal
  )
)
del merged.tmp merged.tmp2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T19:14:49.270

将此添加到您的 cmd 文件中：

```
set cpy=
set filter=*.txt
set target=new_file.txt
del newfile.tmp
rem buildup concat
for %%a in (%filter%) do call :concat "%%a"

ren newfile.tmp %target%

rem REMOVE FILES! (carefull please!)
for %%a in (%filter%) do del /Q "%%a"
goto :done

:concat
if EXIST newfile.tmp ( copy newfile.tmp+%1 newfile.tmp ) else ( copy %1 newfile.tmp)
goto :EOF

:done
echo ready 
```

# c# - 依赖注入的问题——如何清理我的实现？

> ID：13111775
> 
> 赞同：3
> 
> 时间：2012-10-28T18:36:25.693
> 
> 标签：c#, .net, unit-testing, dependency-injection, code-cleanup

我正在使用依赖注入来模拟类，以便对依赖于它们的其他类进行单元测试：

```
class Foo : IFoo
{
    // production code
}

class MockFoo : IFoo
{
    // mock so other classes that depend on Foo can be unit tested
}

class Bar
{
    public DoSomething()
    {
        var barValue = 20;
        // use dependency injection to get Foo instance.
        DependencyInjection.Instance.Foo.ExampleMethod(barValue);
    }
} 
```

然而，设置我的依赖注入类变得笨重、复杂和复杂：

```
public class DependencyInjection
{
    public Setup()
    {
        this.Foo = new Foo();
        this.Bar = new Bar("example constructor string");
        this.Bat = new Bat(123,234);
        // for every single class in my application!
    }
} 
```

（为清楚起见进行了简化，但您可以想象具有数十个类及其构造函数的实际实现）。

还有一些其他问题：

*   DependencyInjection 及其每个类实例都是在我的应用程序中传递的**巨大全局变量。**
*   我正在同时初始化我的所有课程。
*   我必须为我为单元测试编写的每个类提供一个接口——我允许单元测试来决定我的程序的设计（如果没有这个约束，我编写的大多数类都是没有接口的具体实现）。

关于如何解决这些问题的建议将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T18:42:58.460

使用 DI 并不意味着您应该突然停止解耦代码。绝不应该使用全局变量来传递您的实现。

当您创建一个需要解决某个部分功能的类时，您应该通过构造函数传递所有“外部”依赖项：

```
class Bar
{
    private readonly IFoo _foo;
    public Bar(IFoo foo)
    {
        _foo = foo;
    }

    public DoSomething()
    {
        _foo.ExampleMethod(20)
    }
} 
```

DI 的最佳实践是在应用程序的开头（[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)）使用它来获取外部实现，然后像没有 DI 一样传递实现。

底线是：你不需要为了测试而**注入** - 只需在你的测试方法中模拟它，你就完成了。仅将 DI 用于您希望可配置的应用程序的重要块（例如，选择具体的数据层）。`IFoo``Bar`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T18:41:06.873

您所做的是[服务定位器](http://en.wikipedia.org/wiki/Service_locator_pattern)（反）模式。它提供隐藏的依赖注入（不清楚你的类需要什么依赖）。您需要的是方法调用注入，这将使您的依赖关系明确且易于模拟：

```
class Bar
{
    public DoSomething(IFoo foo)
    {
        var barValue = 20;
        // use dependency injection to get Foo instance.       
    }
} 
```

另一种类型的依赖注入是构造函数注入（当`IFoo`通过构造函数参数提供依赖时）和属性注入（通过公共属性提供依赖）。

现在从 API 中可以清楚地看出`Bar`需要`IFoo`依赖才能完成它的工作。您可以轻松地模拟此依赖项（使用[Moq](http://code.google.com/p/moq/)的示例）：

```
Mock<IFoo> fooMock = new Mock<IFoo>();
// setup mock
Bar bar = new Bar();
bar.DoSomething(fooMock.Object); 
```

如何`IFoo`在运行时注入实现？您可以使用一些依赖注入框架，例如[Ninject](http://www.ninject.org/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T19:04:47.097

让我试着回答你的要点：

依赖注入是一个概念。你不需要为它创建一个类。我建议为构造函数注入设计你的类。如果您想使用 DI 框架或实现自己的框架，通常的模式是有一个两步 API：注册您的依赖项并在应用程序启动时解决它们（或者更好地由 Groo 在组合根处解释）。

依赖注入通常会在启动时初始化类。但是如果您的对象生命周期不同，您可以定义生命周期或使用工厂。

在进行单元测试时，您不需要为您的类定义一个接口，而只需要为它的依赖项定义一个接口。这是这种方法的最大好处之一。在编写仅依赖于接口的类时，您可以非常轻松地为这些依赖项创建测试替身（模拟、存根等）。也有很多框架可以做到这一点，但是您也可以自由地使用您自己的这些接口的测试实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T18:42:34.233

对于单元测试，我通常会重写构造函数以获取依赖项的实例。这样，我的单元测试就可以创建模拟对象并将其传入。

```
private IFoo foo;

public Bar()
{
    // Production code uses the real thing
    this.foo = new Foo();
}

public Bar(IFoo foo)
{
    // Test code uses a passed-in object, likely a mock
    this.foo = foo;
}

public DoSomething()
{
    foo.DoSomething();
} 
```

# python - Python以DOT格式读取文件并返回城市名称列表

> ID：13111784
> 
> 赞同：2
> 
> 时间：2012-10-28T18:37:03.073
> 
> 标签：python, list, return, loops

**嘿大家，问题是这样的，老实说，这是家庭作业问题，但我只是被卡住了，它永远存在。我的问题是，由于城市在每一行中都有不同的索引位置，我们如何逐行迭代并将城市名称返回到列表中？**（任何可以让我开始的帮助将不胜感激，我并不懒惰，我确实已经为此工作了几个小时）

```
citylist(filename)  reads a file in the DOT format
      and returns a list of city names, one for each line in 
      the file.  The DOT format may have trailing spaces on 
      the city name;  make sure citylist creates a list of 
      city names with trailing spaces removed (easy using
      Python's strip() method).  Two test cases are shown 
      below, for lines at index 3 and 347.

citylist("DOT500.txt")[3]
  'TUCSON'

citylist("DOT500.txt")[347]
  'NORTH VILLE' 
```

以下是 DOT 文件（其中的一部分）

```
1   958164  TOYOTA MOTOR CORPORATION    TOYOTA  LAND CRUISER    1994        19941223    N   0   0   SERVICE BRAKES, HYDRAULIC:ANTILOCK  ARNOLD          CA  JT3DJ81W8R0 19950103    19950103            ABS SYSTEM FAILURE, AT 20MPH.  TT   EVOQ                                                                                                    V   

2   958156  TOYOTA MOTOR CORPORATION    TOYOTA  PASEO   1994    Y   19941226    N   0   0   PARKING BRAKE:CONVENTIONAL  SAN JOSE        CA  JT2EL45U5R0 19950103    19950103        1   PARKED ON FLAT SURFACE EMERGENCY BRAKING ENGAGED VEHICLE ROLLED REARWARD.  TT   EVOQ                                                                                                    V   

3   958124  TOYOTA MOTOR CORPORATION    TOYOTA  COROLLA 1994    Y   19941128    N   0   0   AIR BAGS:FRONTAL    PHOENIX         AZ      19950103    19950103            UPON FRONTAL COLLISION, AIR BAG FAILED TO DEPLOY. VEHICLE CLASSIFIED AS TOTALED. PLEASE DESCRIBE DETAILS.  TT   EVOQ                                                                                                    V   

4   958122  NISSAN NORTH AMERICA, INC.  NISSAN  MAXIMA  1994        19950103    N   0   0   SUSPENSION  TUCSON          AZ  JN1HJ01F4RT 19950103    19950103            THE STRUT WAS BAD THERE IS A NOISE ON THE PASSENGER SIDE DOOR AND THE ENGINE LIGHT MALFUNCTION.  TT EVOQ                                                                                                    V   

5   958122  NISSAN NORTH AMERICA, INC.  NISSAN  MAXIMA  1994        19950103    N   0   0   ENGINE AND ENGINE COOLING:ENGINE    TUCSON          AZ  JN1HJ01F4RT 19950103    19950103            THE STRUT WAS BAD THERE IS A NOISE ON THE PASSENGER SIDE DOOR AND THE ENGINE LIGHT MALFUNCTION.  TT EVOQ                                                                                                    V   

6   958247  NISSAN NORTH AMERICA, INC.  NISSAN  PATHFINDER  1994            N   0   0   SUSPENSION:FRONT    ABINGDON        MD      19950103    19950103            FRONT TIRES SHOW EXCESSIVE WEAR AND STEEL BELTS. NISSAN IS OFFERING TO REPLACE TWO TIRES.  TT   EVOQ                                                                                                    V   

7   958143  FORD MOTOR COMPANY  FORD    MUSTANG 1991        19941119    Y   0   0   SEATS:FRONT ASSEMBLY:POWER ADJUST   PENSICOLA       FL      19950103    19950103            DRIVER SIDE POWER SEAT CAUGHT FIRE.  TT EVOQ                                                                                                    V   

8   958141  DAIMLERCHRYSLER CORPORATION CHRYSLER    NEW YORKER  1989        19950103    N   0   0   POWER TRAIN:AUTOMATIC TRANSMISSION  LEVITTOWN       NY  1C3BC4639KD 19950103    19950103        2   TRANSMISSION NOT SHIFTING OUT OF 2ND GEAR, WENT INTO LIM MODE/TRANSMMION NOT SHIFTING THEN JUMPED OUT OF GEAR. *AK  EVOQ                                                                                                    V   

9   958128  DAIMLERCHRYSLER CORPORATION DODGE   SHADOW  1990    Y   19941224    N   0   0   SERVICE BRAKES, HYDRAULIC:ANTILOCK  WILMINGTON      DE  1B3XT44KXLN 19950103    19950103        1   ABS: EXPERIENCED ANTI-LOCK BRAKE FAILURE/EXTENDED STOPPING DISTANCE, RESULTING IN AN ACCIDENT, IMPACT 12:00 POSITION SPEED, 20 MPH.  TT EVOQ                                                                                                    V   

10  958128  DAIMLERCHRYSLER CORPORATION DODGE   SHADOW  1990    Y   19940412    N   0   0   SUSPENSION:FRONT    WILMINGTON      DE  1B3XT44KXLN 19950103    19950103        1   MISALIGNMENT, CAUSING VEHICLE TO VEER TO THE CENTER.  *AK   EVOQ                                                                                                    V   

11  958128  DAIMLERCHRYSLER CORPORATION DODGE   SHADOW  1990    Y   19941117    N   0   0   ENGINE AND ENGINE COOLING:ENGINE    WILMINGTON      DE  1B3XT44KXLN 19950103    19950103        1   ENGINE MOTOR MOUNTS FAILED, RESULTING IN ENGINE NOISE.  *AK EVOQ                                                                                                    V   

12  958168  GENERAL MOTORS CORP.    CHEVROLET   SUBURBAN    1995    Y   19950101    N   0   0   POWER TRAIN:AUTOMATIC TRANSMISSION:GEAR POSITION INDICATION (PRNDL) SHAFTFBURG      MI      19950103    19950103            VEHICLE ROLLED DOWN HILL WHILE IN PARK, AND INTO A TREE.  TT    EVOQ                                                                                                    V   

13  958169  GENERAL MOTORS CORP.    GEO METRO   1995    Y   19941225    N   1   0   SERVICE BRAKES, HYDRAULIC:FOUNDATION COMPONENTS NORFOLK         VA      19950103    19950103            BRAKES WOULD NOT WORK ON SEVERAL OCCASIONS, LAST INSTANCE RESULTED IN AN ACCIDENT.  TT  EVOQ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T18:54:20.130

在一般情况下，这将非常非常困难。但我们可以看看他们是否让我们变得更容易。我们可以读一行看一下：

```
In [31]: first_line = open("toyota.dot").readline()

In [32]: print repr(first_line)
'    1\t958164\tTOYOTA MOTOR CORPORATION\tTOYOTA\tLAND CRUISER\t1994\t\t19941223\tN\t0\t0\tSERVICE BRAKES, HYDRAULIC:ANTILOCK\tARNOLD      \tCA\tJT3DJ81W8R0\t19950103\t19950103\t\t\tABS SYSTEM FAILURE, AT 20MPH.  TT\tEVOQ\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tV\t\n' 
```

看到所有这些`\t`符号了吗？我们很幸运——这些列由制表符分隔！所以一种方法是使用`.split()`行上的方法将它们分成列：

```
In [33]: first_line.split("\t")
Out[33]: 
['    1',
 '958164',
 'TOYOTA MOTOR CORPORATION',
 'TOYOTA',
 'LAND CRUISER',
 '1994',
[... etc ...]
 '\n'] 
```

然后我们可以提取列：

```
In [34]: first_line.split("\t")[11]
Out[34]: 'SERVICE BRAKES, HYDRAULIC:ANTILOCK'

In [35]: first_line.split("\t")[12]
Out[35]: 'ARNOLD      ' 
```

并摆脱空间。

```
In [36]: first_line.split("\t")[12].strip()
Out[36]: 'ARNOLD' 
```

您可以使用

```
with open("toyota.dot") as data:
    for line in data:
        parts = line.split("\t") 
```

模式来迭代线条，其余的你应该能够拼凑起来。

[旁白：我实际上会使用`csv.reader`with `delimiter="\t"`，但这可能有点超出老师的要求。]

# django - 使用列表作为模型的对象，Django

> ID：13111793
> 
> 赞同：0
> 
> 时间：2012-10-28T18:38:59.760
> 
> 标签：django, django-models

我想知道可以将列表用作模型的对象。

我正在开发一个 django 应用程序，我希望用户能够“喜欢”其他用户，并保留他们喜欢的用户列表，以便我可以在其他页面中呈现它。

那么有没有像“listField”这样的东西？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:11:33.160

绝对是多对多关系是最好的，添加一个`through`模型来记录喜欢的创建时间并能够独立于用户显示它们（如活动流）例如（未测试）确实可能很有用

```
 class MyUser(User):
        ...
        likers = models.ManyToManyField('self', through='Like', 
                                       symmetrical=False, 
                                       related_name='liked_users')
        ...

    class Like(models.Model):
        liker = models.ForeignKey(MyUser, related_name='likes_given')
        liked_user = models.ForeignKey(MyUser, related_name='likes_received')
        ... 
```

您可能会发现这个有用的[http://charlesleifer.com/blog/self-referencing-many-many-through/](http://charlesleifer.com/blog/self-referencing-many-many-through/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:41:21.940

不，您想要的是多对一关系：[https ://docs.djangoproject.com/en/dev/topics/db/models/#many-to-one-relationships](https://docs.djangoproject.com/en/dev/topics/db/models/#many-to-one-relationships)

# javascript - javascript按键获取数组值

> ID：13111795
> 
> 赞同：1
> 
> 时间：2012-10-28T18:39:09.447
> 
> 标签：javascript, arrays, key-value

我有一个数组

```
var hex_to_dec = {
    '0' : 0,
    '1' : 1,
    '2' : 2,
    '3' : 3,
    '4' : 4,
    '5' : 5,
    '6' : 6,
    '7' : 7,
    '8' : 8,
    '9' : 9,
    'A' : 10,
    'B' : 11,
    'c' : 12,
    'D' : 13,
    'E' : 14,
    'F' : 15
}; 
```

和一个函数

```
function get_dec_from_hex(key){//if key=A
    console.log(hex_to_dec["A"]);//works
    return hex_to_dec[key];//doesnt work
} 
```

当键是字母并且它不起作用时，我试图获取值...但是当键是数字时，我可以在不获取“未定义”输出的情况下获取值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T18:45:40.453

您不必自己维护该转换列表，`parseInt`这会让您更轻松。

在您的控制台中尝试此操作：

```
parseInt('1', 16) // 1
parseInt('2', 16) // 2
...
parseInt('A', 16) // 10
parseInt('B', 16) // 11
...
parseInt('F', 16) // 15 
```

* * *

来自[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)

> 解析字符串参数并返回指定基数或基数的整数。
> 
> `var intValue = parseInt(string[, radix]);`
> 
> **细绳**
> 
> 要解析的值。如果 string 不是字符串，则将其转换为 1。忽略字符串中的前导空格。
> 
> **基数**
> 
> 一个整数，表示上述字符串的基数。虽然此参数是可选的，但始终指定它以消除读者混淆并保证可预测的行为。当未指定基数时，不同的实现会产生不同的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T18:43:05.000

首先，`hex_to_dec`不是数组，是对象。而且您的功能工作正常，请尝试：

```
function get_dec_from_hex(key){
    return hex_to_dec[key];
} 

console.log(get_dec_from_hex("D")); 
```

# c++ - 在c ++中将char数组添加到字符串

> ID：13111802
> 
> 赞同：1
> 
> 时间：2012-10-28T18:39:50.803
> 
> 标签：c++, string

```
char site[];

scanf("%s", site);

send(sock,"GET / HTTP/1.1\r\nHost: " + site + "\r\nConnection: close\r\n\r\n", strlen("GET / HTTP/1.1\r\nHost: " + site + "\r\nConnection: close\r\n\r\n"),0); 
```

这给了我错误：表达式必须具有整数或枚举类型。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:05:35.337

如另一个答案中所述，您发布的代码是纯 C。在 C++ 中，您通常偏爱 std::string 到 C 样式的 char 数组，而 std::cin 偏爱 C 样式的 scanf()。一个更 C++ 的方式看起来像这样

```
std::string input;
std::cin >> input;
std::string out = "GET / HTTP/1.1\r\nHost: " + input + "\r\nConnection: close\r\n\r\n";
send(sock, out.c_str(), out.size(), 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:04:38.287

```
char site[]; 
```

此代码不合法​​。您的编译器应该会产生错误，例如：

```
main.cpp:5:10: error: definition of variable with array type needs an explicit size or an initializer
    char site[];
         ^ 
```

因为在 C++ 中，内置数组具有作为其类型一部分的固定大小。如果您想要一个可调整大小的数组，您应该将`std::vector`其用于一般情况和`std::string`字符串。

```
scanf("%s", site); 
```

如果`char site[]`正在工作，您的编译器可能会创建一个大小为零的数组，因此将任何内容读入其中会导致缓冲区溢出。

```
send(sock,"GET / HTTP/1.1\r\nHost: " + site + "\r\nConnection: close\r\n\r\n", strlen("GET / HTTP/1.1\r\nHost: " + site + "\r\nConnection: close\r\n\r\n"),0); 
```

这应该会导致另一个错误，如下所示：

```
main.cpp:10:42: error: invalid operands to binary expression ('const char *' and 'char *')
    send(sock,"GET / HTTP/1.1\r\nHost: " + site + "\r\nConnection: close\r\n\r\n", strlen("GET / HTTP/1.1\r\nHost: " + site + "\r\nConnection: close\r\n\r\n"),0);
              ~~~~~~~~~~~~~~~~~~~~~~~~~~ ^ ~~~~ 
```

在 C++ 中，您不能简单地将数组相加。同样，C++ 中的数组是固定大小的对象。但是，您可以添加`std::strings`在一起，或者您可以添加 a`std::string`和 a `const char *`（因为 std::string`operator+`在自身和 之间定义`const char *`）。

```
std::string site;
site = getURL(); // you'll have to implement this, including both getting the string from the user and validating that the user isn't entering in something tricky that will cause security problems
std::string query = "GET / HTTP/1.1\r\nHost: " + site + "\r\nConnection: close\r\n\r\n";
send(sock, query.c_str(), query.size()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T19:59:27.117

另一种`GET`实现。

```
 char *get_http= new char[256];

    memset(get_http,' ', sizeof(get_http) );
    strcpy(get_http,"GET / HTTP/1.1\r\nHost: ");
    strcat(get_http,url);
    strcat(get_http,"\r\nConnection: close\r\n\r\n");
            .
            .
    send(Socket,get_http, strlen(get_http),0 ); 
```

示例 Winsock 控制台 HTML 浏览器代码：

```
#include <winsock2.h>
#include <windows.h>
#include <iostream>
#include <vector>
#include <string>
#include <algorithm>
#include <cctype>
#include <locale>
#pragma comment(lib,"ws2_32.lib")
using namespace std;

string website_HTML;
locale local;

//***************************
void get_Website(char *url );
//***************************

int main ()
{

    get_Website("www.msn.com" );
    for (size_t i=0; i<website_HTML.length(); ++i) website_HTML[i]= tolower(website_HTML[i],local);

    cout <<website_HTML;

    cout<<"\n\n";

    return 0;
}

//***************************
void get_Website(char *url )
{
    WSADATA wsaData;
    SOCKET Socket;
    SOCKADDR_IN SockAddr;

    int lineCount=0;
    int rowCount=0;

    struct hostent *host;
    char *get_http= new char[256];

        memset(get_http,' ', sizeof(get_http) );
        strcpy(get_http,"GET / HTTP/1.1\r\nHost: ");
        strcat(get_http,url);
        strcat(get_http,"\r\nConnection: close\r\n\r\n");

        if (WSAStartup(MAKEWORD(2,2), &wsaData) != 0) 
        {
            cout << "WSAStartup failed.\n";
            system("pause");
            //return 1;
        }

        Socket=socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);
        host = gethostbyname(url);

        SockAddr.sin_port=htons(80);
        SockAddr.sin_family=AF_INET;
        SockAddr.sin_addr.s_addr = *((unsigned long*)host->h_addr);

        cout << "Connecting to "<< url<<" ...\n";

        if(connect(Socket,(SOCKADDR*)(&SockAddr),sizeof(SockAddr)) != 0)
        {
            cout << "Could not connect";
            system("pause");
            //return 1;
        }

        cout << "Connected.\n";     
        send(Socket,get_http, strlen(get_http),0 );

        char buffer[10000];

        int nDataLength;
            while ((nDataLength = recv(Socket,buffer,10000,0)) > 0)
            {       
                int i = 0;

                while (buffer[i] >= 32 || buffer[i] == '\n' || buffer[i] == '\r') 
                {                    
                    website_HTML+=buffer[i];                     
                    i += 1;
                }               
            }
        closesocket(Socket);
        WSACleanup();

            delete[] get_http;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T18:55:10.447

虽然这是标记C++，但代码是直C。有两个问题：第一，`site`是一个不完整的类型；你需要给它一个大小；其次，在 C 语言中，您不能只将字符串与 '+' 组合在一起。您需要使用`strcat`：

```
char site[128];
char cmd[128];
scanf("%s", site);
strcpy(cmd, "GET / HTTP/1.1\r\nHost: ");
strcat(cmd, site);
strcat(cmd, "\r\nConnection: close\r\n\r\n"); 
```

这不是对风格的认可（也不是 \r\n 的东西），只是一个简单的代码块，它完成了原始代码没有做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T19:01:59.490

改变这个： `"GET / HTTP/1.1\r\nHost: " + site + "\r\nConnection: close\r\n\r\n", strlen("GET / HTTP/1.1\r\nHost: " + site + "\r\nConnection: close\r\n\r\n"`

对此：

`(std::string() +"GET / HTTP/1.1\r\nHost: " + site + "\r\nConnection: close\r\n\r\n", strlen("GET / HTTP/1.1\r\nHost: " + site + "\r\nConnection: close\r\n\r\n").c_str()`

进行绝对最小的更改以使该行代码编译并执行您可能想要的操作。

原始 C 字符串上的 operator+ 不会做任何你想做的事情。从 std::string() 开始，添加原始 C 字符串会创建新的 std::strings。然后我们在最后调用 .c_str() 以返回原始 C 字符串，该字符串至少持续到您调用的函数完成。然后一切都清理干净了。

现在，您的代码还有其他问题。 调用未定义的行为，因为编译器不知道数组应该有`char site[]; scanf("%s", site);`多大。`site`即使你给出了`site`一个大小，比如`char site[100];`，这将是一个等待发生的缓冲区溢出——`scanf`不建议这样使用。

读取字符串时，您需要一个函数来限制您读取的缓冲区的数量，或者根据需要调整缓冲区的大小以适应您正在阅读的内容。

注意我假设代码实际上是 C++，如标记。

# arrays - Perl - 将数组元素句子与变量进行比较

> ID：13111805
> 
> 赞同：5
> 
> 时间：2012-10-28T18:40:12.490
> 
> 标签：arrays, perl, grep

我使用 grep 在temporaryF 文件和arrayWarning 之间返回不匹配的数组

```
my @c =grep!${{map{$_,1}@temporaryF}{$_},@arrayWarning; 
```

@c 里面有很多行，例如：

```
Sun Sep 30 00:05:55 fibre channel DENY forever
Sun Sep 30 00:06:55 fibre channel ROOT cause
Sun Sep 30 00:08:55 fibre channel ROOT cause 
Sun Sep 30 00:10:55 fibre channel ROOT cause  
Sun Sep 30 00:20:55 fibre channel DANN 
Sun Sep 30 00:30:55 fibre channel DANN 
```

如您所见，ROOT 在@c 中出现了 3 次。如何遍历@c 以仅输出最新出现的 ROOT -> Sun Sep 30 00:10:55 光纤通道 ROOT 而不是其他重复的行。

所以它会变成：

```
Sun Sep 30 00:05:55 fibre channel DENY forever  
Sun Sep 30 00:10:55 fibre channel ROOT cause  
Sun Sep 30 00:30:55 fibre channel DANN 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:06:18.173

使用以 ROOT/DENY/DANN 作为键的哈希：

```
my %latest = map { (split(" "))[6] => $_ } @c; 
```

假设`@c`按日期排序，`values %latest`将包含：

```
Sun Sep 30 00:10:55 fibre channel ROOT cause
Sun Sep 30 00:05:55 fibre channel DENY forever
Sun Sep 30 00:30:55 fibre channel DANN 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T20:44:18.227

**注意**：这是@RobEarl 答案的延伸——所以如果你喜欢它，请确保也给他点赞！

这里的要点也是存储行数，以确保可以订购输出。

## 长版

```
#!/usr/bin/perl

use strict;
use warnings;

# store (with count)
my $count  = 0;
my %latest = map {
    my $source = (split /\s+/ => $_)[6];
    $source => {count => $count++, string => $_};
} <DATA>;

# output
print $_->{string} for sort {$a->{count} <=> $b->{count}} values %latest;

__DATA__
Sun Sep 30 00:05:55 fibre channel DENY forever
Sun Sep 30 00:06:55 fibre channel ROOT cause
Sun Sep 30 00:08:55 fibre channel ROOT cause 
Sun Sep 30 00:10:55 fibre channel ROOT cause  
Sun Sep 30 00:20:55 fibre channel DANN 
Sun Sep 30 00:30:55 fibre channel DANN 
```

**输出**：

```
Sun Sep 30 00:05:55 fibre channel DENY forever
Sun Sep 30 00:10:55 fibre channel ROOT cause  
Sun Sep 30 00:30:55 fibre channel DANN 
```

感觉有点像[施瓦茨变换](http://en.wikipedia.org/wiki/Schwartzian_transform)。

## 单线版

这是一个很好的例子，可以通过简单的 oneliner 和 perl 强大的[解释器开关](http://p3rl.org/perlrun)来完成：

```
$ perl -nale '$l{$F[6]}={c=>$c++,s=>$_};END{print$_->{s}for sort{$a->{c}<=>$b->{c}}values%l}'
Sun Sep 30 00:05:55 fibre channel DENY forever
Sun Sep 30 00:06:55 fibre channel ROOT cause
Sun Sep 30 00:08:55 fibre channel ROOT cause 
Sun Sep 30 00:10:55 fibre channel ROOT cause  
Sun Sep 30 00:20:55 fibre channel DANN 
Sun Sep 30 00:30:55 fibre channel DANN 
```

输出：

```
Sun Sep 30 00:05:55 fibre channel DENY forever
Sun Sep 30 00:10:55 fibre channel ROOT cause  
Sun Sep 30 00:30:55 fibre channel DANN 
```

# c# - 如果字符串崩溃，则 C# 自定义错误

> ID：13111810
> 
> 赞同：-1
> 
> 时间：2012-10-28T18:40:56.063
> 
> 标签：c#, mysql, string

所以我在 c# 中有以下字符串，它返回一个 mysql 查询。

```
string id = cmd.ExecuteScalar().ToString(); 
```

问题是如果这个字符串的输入无效，它会使应用程序崩溃。这不应该使应用程序崩溃，而是显示：

```
MessageBox.Show("Your key (" + KeyNr + ") was invalid or not active. \nPlease check if it is the correct key or you need to buy another month.", "Login Error", MessageBoxButtons.OK, MessageBoxIcon.Error); 
```

尝试尝试并没有运气。有人可以帮忙吗？

我的一些尝试：

```
try
{
   string id = cmd.ExecuteScalar().ToString();
}
catch (Exception ex)
{
   MessageBox.Show("Your key (" + KeyNr + ") was invalid or not active. \nPlease check if it is the correct key or you need to buy another month.", "Login Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

和

```
try
{
   string id = cmd.ExecuteScalar().ToString();
}
catch (catch (MySqlException))
{
   MessageBox.Show("Your key (" + KeyNr + ") was invalid or not active. \nPlease check if it is the correct key or you need to buy another month.", "Login Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

一切都给了我：

```
Error   2   The name 'id' does not exist in the current context 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T18:43:26.187

在不为您解决的情况下，您需要`cmd.ExecuteScalar()`在假设它执行并可以转换为字符串之前存储并检查结果。

```
var result = cmd.ExecuteScalar();
if (/* result is valid */){
  id = result.ToString();
} else {
  MessageBox.Show(/* message */);
} 
```

尽可能远离异常检查，因为使用它们会不必要地增加性能，并且（在很多方面）是一种跳过良好老式检查的懒惰方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:42:26.923

试试这段代码：

```
string id = string.Empty;

try
{
   id = cmd.ExecuteScalar().ToString();
}
catch(Exception ex)
{
    MessageBox.Show("Your key (" + KeyNr + ") was invalid or not active. \nPlease check if it is the correct key or you need to buy another month.", "Login Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

您甚至可以将其捕获到更具体的 Exception 而不是 generic `Exception`。

# boost - 如何为 iOS 6 编译 boost 库？

> ID：13111811
> 
> 赞同：1
> 
> 时间：2012-10-28T18:40:58.250
> 
> 标签：boost, osx-lion, xcode4.5

我在我的应用程序中使用 Boost 库。我想为 iOS6 编译 boost 库。

我正在使用 Mac OS X 10.6 X 代码 4.5

请让我知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T03:45:09.390

您可以使用 ofxiOSBoost 静态库和头文件：

（适用于 iOS 6、iOS 7、iOS 8 + ）

libc++ (c++11)、libstdc++ 的版本，还包括构建脚本

[https://github.com/danoli3/ofxiOSBoost](https://github.com/danoli3/ofxiOSBoost)

# unix - 使用 awk 和 sort 按 ID 字段对表进行排序

> ID：13111813
> 
> 赞同：0
> 
> 时间：2012-10-28T18:41:02.723
> 
> 标签：unix, sorting, awk

我正在学习 Unix，我想对这个表进行排序：

```
Name:Alice,ID:2368,Hometown:columbus,bithday:03/11/1988
Name:Ted,ID:2368,Hometown:Portland,bithday:06-11-1992
Name:Mark,ID:2218,Hometown:Palo Alto,bithday:04-23-1984
Name:Xiao,ID:2571,hometown:Carson,bithday:07/06/1975
Name:Rain,ID:0264,hometown:little stone,bithday:11-09-1982
Name:Susan,ID:1261,Hometown:Menlo park,bithday:12-13-1989
Name:Zack,ID:1594,Hometown:columbus,bithday:02-04-1984 
```

并将其格式化如下：

```
Rain,0264,little stone,11-09-1982
Susan,1261,Menlo park,12-13-1989
Zack,1594,columbus,02-04-1984
Mark,2218,Palo Alto,04-23-1984
Alice,2368,columbus,03-11-1988
Ted,2368,Portland,06-11-1992
Xiao,2571,Carson,07-06-1975 
```

我想过滤掉键值对（键：值）中的键，然后使用 awk 和排序按 ID 排序。

我会使用什么命令来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T07:11:35.693

Its as simple as this:

```
awk -F: '{gsub(/,[^:]*:/,",");print $2}' You_file| sort -t, -k 2,2n 
```

tested below:

```
> cat temp
Name:Alice,ID:2368,Hometown:columbus,bithday:03/11/1988
Name:Ted,ID:2368,Hometown:Portland,bithday:06-11-1992
Name:Mark,ID:2218,Hometown:Palo Alto,bithday:04-23-1984
Name:Xiao,ID:2571,hometown:Carson,bithday:07/06/1975
Name:Rain,ID:0264,hometown:little stone,bithday:11-09-1982
Name:Susan,ID:1261,Hometown:Menlo park,bithday:12-13-1989
Name:Zack,ID:1594,Hometown:columbus,bithday:02-04-1984
> 
```

Now the execution:

```
> awk -F: '{gsub(/,[^:]*:/,",");print $2}' temp | sort -t, -k 2,2n
Rain,0264,little stone,11-09-1982
Susan,1261,Menlo park,12-13-1989
Zack,1594,columbus,02-04-1984
Mark,2218,Palo Alto,04-23-1984
Alice,2368,columbus,03/11/1988
Ted,2368,Portland,06-11-1992
Xiao,2571,Carson,07/06/1975 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T21:22:20.387

我花了一段时间才弄清楚，直到我终于看到您的输入数据中的“生日”拼写错误。

您可以全力以赴并将数据解析为实际数据：

```
awk -F, '
  BEGIN {
    fmt="%s,%s,%s,%s\n";
  }

  {
    for (i=1;i<=NF;i++) {           # walk through the fields...
      split($i,a,":");              # split each one at the colon, save to array
      v[tolower(a[1])]=a[2];        # need tolower() as "Hometown" is inconsistent
    }
    split(v["bithday"],b,/[-\/]/);  # regex here handles your inconsistent divider
    v["bithday"]=sprintf("%s-%s-%s",b[3],b[2],b[1]);
    printf(fmt,v["name"],v["id"],v["hometown"],v["bithday"]);
  }
' input.txt | sort -t, -k2 
```

这会遍历每一行，用逗号分解字段，将 key=value 组合存储在一个数组中，调整你的“bithday”格式并打印。（请注意，我为您选择了更合理的日期格式。）

但是做一些简单的模式匹配可能更容易：

```
sed -Ene 's/^[[:alpha:]]+://;s/,[[:alpha:]]+:/,/g;s/([0-9]{2}).([0-9]{2}).([0-9]{4})$/\3-\2-\1/;p' input.txt \
| sort -t, -k2 
```

这会产生相同的结果，但代码更少。如果您需要对输入数据做更多有趣的事情，那么当然可以使用 awk。

哦，我`sed`来自 FreeBSD，所以它使用`-E`选项来获取 ERE。如果您使用的是 Linux 或其他 GNU sed 提供商，您可能可以`-E`将`-r`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T12:16:05.113

使用 grep 查找值，粘贴以重新组合行，当然还有排序：

```
grep -oP '(?<=:).*?(,|$)' filename | paste -d "" - - - - | sort -n -t, -k2 
```

假设值中没有逗号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T20:03:13.033

Must there be awk? If not:

1.  use `Vim` to remove key strings with `:%s/[a-z]*://gi`
2.  Use sort to sort: `sort -t , -k 2 file`

If AWK is a must, then I'd think of [this](http://backreference.org/2010/05/16/sorting-with-awk/), to sort WITHOUT losing keys - but the answer @Aif gave is nice as well.

EDIT: improved thanks to @Aif's regex and due to @Ghoti's comment. Now Vim command for substitution uses regex and key case and text 'matters not' as master Yoda would say.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T14:18:17.707

只需将 FS 和 OFS 设置为您的想法，打印您想要的字段，然后排序：

```
$ awk -F'[:,]' -v OFS=, '{print $2,$4,$6,$8}' file | sort -t, -k2n
Rain,0264,little stone,11-09-1982
Susan,1261,Menlo park,12-13-1989
Zack,1594,columbus,02-04-1984
Mark,2218,Palo Alto,04-23-1984
Alice,2368,columbus,03/11/1988
Ted,2368,Portland,06-11-1992
Xiao,2571,Carson,07/06/1975 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-29T00:32:07.103

这是一种使用方法`GNU awk`：

```
awk 'BEGIN { FS="[,:]"; OFS="," } { for (i=2; i<=NF; i+=2) printf (i!=NF) ? $i OFS : $i ORS | "sort -t, -nk2" }' file.txt 
```

结果：

```
Rain,0264,little stone,11-09-1982
Susan,1261,Menlo park,12-13-1989
Zack,1594,columbus,02-04-1984
Mark,2218,Palo Alto,04-23-1984
Alice,2368,columbus,03/11/1988
Ted,2368,Portland,06-11-1992
Xiao,2571,Carson,07/06/1975 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-28T19:11:02.397

我发现最简单的方法是使用重新格式化输出，并附加一个将使用`awk`的新列，然后再次使用来隐藏该列。`sort``awk`

```
$ cat test.dat
Name:Alice,ID:2368,Hometown:columbus,bithday:03/11/1988
Name:Ted,ID:2368,Hometown:Portland,bithday:06-11-1992
Name:Mark,ID:2218,Hometown:Palo Alto,bithday:04-23-1984
Name:Xiao,ID:2571,hometown:Carson,bithday:07/06/1975
Name:Rain,ID:0264,hometown:little stone,bithday:11-09-1982
Name:Susan,ID:1261,Hometown:Menlo park,bithday:12-13-1989
Name:Zack,ID:1594,Hometown:columbus,bithday:02-04-1984

$ cat test.dat| awk -F, '{ gsub(/[a-zA-Z]+:/, ""); print $2,$0; }' | sort | awk '{ $1=""; print; }'
 Rain,0264,little stone,11-09-1982
 Susan,1261,Menlo park,12-13-1989
 Zack,1594,columbus,02-04-1984
 Mark,2218,Palo Alto,04-23-1984
 Alice,2368,columbus,03/11/1988
 Ted,2368,Portland,06-11-1992
 Xiao,2571,Carson,07/06/1975 
```

是`-F`指定分隔符（此处为`,`）。然后我们要删除列名（即后面的任何字母`:`），最后显示ID列，以及整行重写。然后我们使用`sort`，默认情况下假定排序键是第一列，并且`awk`再次只显示每行的第二部分。

**编辑**：鉴于城市中的空间，awk 存在输出问题。为了简单起见，我只是重新分配了第一个变量（这是您要隐藏的列）并打印整行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-28T21:39:07.740

在您根据需要对其进行格式化后（我知道您有），您可以通过将数据传输到`sort -t, -k2`.

如果您实际上还没有，我认为最简单的方法之一是`sed 's/[[:alnum:]]*://g'`.

所以整个命令将是

```
sed 's/[[:alnum:]]*://g' table.csv | sort -t, -k2 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-08-03T04:12:04.183

猫温度.txt | awk -F",|:" '{打印 $2","$4","$6}' | 排序 -t, -k2n

# c - C中的线程数组

> ID：13111816
> 
> 赞同：0
> 
> 时间：2012-10-28T18:41:20.757
> 
> 标签：c, arrays, multithreading, pthreads

我正在尝试与多个消费者和生产者一起做一个消费者/生产者计划。我只是想做一些简单的事情，比如让生产者向共享数组添加一个随机数并让消费者将其取出。

尽管创建线程时出现错误。我看到了错误及其内容，但不知道如何解决。

我将向您展示生产者功能和主要功能，并将它们分开以便于阅读。

```
#define BUFFER_SIZE 30

struct sharedBuffer{

int resource[BUFFER_SIZE];
int produced, consumed;
int in;
int out;

};

struct sharedBuffer shared;
struct sharedBuffer s_instance = { in:0, out:0, };

void *producer(void *arg){

int item = 0;
int itemCount =0;
//shared.in =0;
  while (1) {
    item = produceItem();           //generate the random number
   // while (shared.produced == BUFFER_SIZE);   //spin if buffer is full

    if(shared.produced == BUFFER_SIZE){
        fprintf (stdout, "Producer added : %d items \n",  shared.produced);
       return NULL;

    }
    /* put new item in buffer */
    shared.resource[shared.in] = item;
    shared.in = (shared.in+1) % BUFFER_SIZE;
    shared.resource[shared.in] = item;
    fprintf (stdout, "Producer added: %d \n",  item);
    shared.produced++;
    //item++;
    itemCount++;
}
} 
```

这里是 main()

```
int main(int argc, char* argv[])
{

int i;
int result;
int num_producers;
int num_consumers;

pthread_attr_t attrs;
pthread_attr_init (&attrs);
//int producerArray[num_producers],consumerArray[num_consumers];
pthread_t producer[num_producers],consumer[num_consumers];

printf("Enter the number of Producers: \n");

scanf("%d", &num_producers);

printf("Enter the number of Consumers: \n");

scanf("%d", &num_consumers);  

for(i=0; i< num_producers; i++)
{
    //producerArray[i]=0;
    //pthread_create(&producer[i],NULL, producer,&producerArray[i]);
    pthread_create(&producer[i],NULL, producer,NULL);
}

for(i=0; i< num_consumers; i++)
{
    //consumerArray[i]=0;
    // pthread_create(&tid[i], NULL, &compute_prime, NULL);
    //pthread_create(&consumer[i],NULL, consumer, &consumerArray[i]);
    pthread_create(&consumer[i], NULL, consumer, NULL);
}

for(i=0;i<num_producers;i++)
{
    pthread_join(producer[i],NULL);
    //printf("\nThe Producer (%d) produced: [%d] Items",i,producerArray[i]);
    sleep(1);
}

return 0;
} 
```

这是我得到的错误。

```
Consumer_producer2.c:125: warning: passing argument 3 of âpthread_createâ from  incompatible pointer type
/usr/include/pthread.h:227: note: expected âvoid * (*)(void *)â but argument is of type âpthread_t *â
Consumer_producer2.c:133: warning: passing argument 3 of âpthread_createâ from incompatible pointer type
/usr/include/pthread.h:227: note: expected âvoid * (*)(void *)â but argument is of type âpthread_t *â 
```

如果我运行它，我会遇到分段错误谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:43:59.457

你已经用你的命名方案打败了自己：你有一个名为的自由函数`producer`和一个名为`producer`. 选择更好的独特名称，您应该能够解决此问题。

# hibernate - 字符串作为主键休眠和postgres

> ID：13111819
> 
> 赞同：1
> 
> 时间：2012-10-28T18:41:51.987
> 
> 标签：hibernate, jpa-2.0

我可以在实体中使用字符串作为主键。我试过了，但它在我的 postgres 数据库中被转换为一个大整数？

# hadoop - HBase 作为 Web 应用程序后端

> ID：13111820
> 
> 赞同：3
> 
> 时间：2012-10-28T18:41:53.350
> 
> 标签：hadoop, hbase

谁能建议将 HBase 作为基于 Web 的应用程序的主要数据源是否是个好主意？我主要关心的是 HBase 对查询的响应时间。是否有可能有亚秒级的响应？

编辑：有关应用程序本身的更多详细信息。

*   数据量：~500GB 文本数据，预计很快达到 1TB
*   使用应用程序的并发用户数：最多 50

该应用程序将用于呈现有关存储在 HBase 中的数据的报告，例如关键字“X”在过去 24 小时内出现的次数。对于来自该应用程序的约 80% 的请求，我将知道确切的密钥，20% 将是扫描（我正在研究与 HBase 模式设计相关的主题以使其快速运行）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T10:58:08.267

您可以将 HBase 用作 Web 应用程序的后端（例如，请参阅此处的 Gap 演示文稿[或](http://www.slideshare.net/cloudera/8-h-base-the-use-case-in-e-bay-cassini)[此处](http://www.slideshare.net/cloudera/1-serving-apparel-catalog-from-h-base-suraj-varma-gap-inc-finalupdated-last-minute) 的 EBay 演示文稿）。

正如您自己指出的那样，关键是要获得正确的架构和密钥设计

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T05:53:02.863

是的，在 Hbase 上构建一个实时响应的 Web 应用程序并非不现实。看看 Opentsdb，它通过 Web 前端公开了存储在 hbase 中的时间序列。尽管 Opentsdb 对存储模式进行了一些优化，并在下面使用了缓存。但在 Hbase 应用程序中访问速度更快的关键在于 RowKey 设计。见[http://hbase.apache.org/book/rowkey.design.html](http://hbase.apache.org/book/rowkey.design.html)

# php - 使用 MySQL DB 的动态多级下拉

> ID：13111821
> 
> 赞同：0
> 
> 时间：2012-10-28T18:41:53.067
> 
> 标签：php, javascript, mysql

我正在尝试使用 PHP 创建一个多级下拉菜单，因为我之前没有 javascript 经验，但我也愿意学习。为了让每个人都容易理解，我以汽车为例。我希望用户选择福特的“品牌”示例，然后第二个下拉列表将填充福特制造的“模型”，最后第三个下拉列表将填充福特汽车的“颜色”。我正在使用一个 MySQL 数据库，我想动态地从中提取所有数据，而不是对其中的值进行硬编码。我可以在第一个下拉列表中填充“品牌”，但是当我选择“品牌”时，第二个下拉菜单不会填充新结果。我是 PHP 和 MySQL 的新手，但学习速度很快。这是我的代码：

INSERT_DROPDOWN.PHP

```
 <?php
$con = mysql_connect("localhost","username","XXXXXXXXXX");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("database", $con);

// Write out BRANDS.
$dquery = "SELECT brand FROM manufacture ORDER BY brand";
// Execute it, or return the error message if there's a problem.
$dresult = mysql_query($dquery) or die(mysql_error());

// Write out MODELS.
$dquery1 = "SELECT 'brand', 'model' FROM models WHERE brand='$dresult' ORDER BY model";
// Execute it, or return the error message if there's a problem.
$dresult1 = mysql_query($dquery1) or die(mysql_error());

// Write out COLORS.
$dquery2 = "SELECT color FROM color ORDER BY color";
// Execute it, or return the error message if there's a problem.
$dresult2 = mysql_query($dquery2) or die(mysql_error());

// if successful insert data into database, displays message "Successful". 
if($dresult){
echo "Successful";
echo "<BR />";
}

else {
echo "ERROR1";
}

// close connection 
mysql_close();
?> 
```

测试.PHP

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <LINK href="CLL.css" rel="stylesheet" type="text/css">
        <title> 
           testing
        </title>
    </head>
    <body>

<?php 
require "insert_dropdown.php";
?>

<p>
  <?php
    //Brand
    $dropdown = "<select name='brand'>";
      while($row = mysql_fetch_assoc($dresult)) 
    {

    $dropdown .= "\r\n<option value='{$row['brand']}'>{$row['brand']}</option>";

    }

    $dropdown .= "\r\n</select>";
    echo $dropdown;

    //Model
        $dropdown1 = "<select name='brand'>";
      while($row1 = mysql_fetch_assoc($dresult1)) 
    {

    $dropdown1 .= "\r\n<option value='{$row1['model']}'>{$row['brand']}</option>";

    }

    $dropdown1 .= "\r\n</select>";
    echo $dropdown1;

    //Color
        $dropdown = "<select name='name'>";
      while($row = mysql_fetch_assoc($dresult2)) 
    {

    $dropdown .= "\r\n<option value='{$row['color']}'>{$row['color']}</option>";

    }

    $dropdown .= "\r\n</select>";
    echo $dropdown;
  ?>
</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:06:41.077

我使用 AJAX 修复了代码

# ruby-on-rails - Ruby on Rails 安装问题（基本？）无法连接到 localhost:3000，并且没有为 GitHub 正确生成 ssh 密钥

> ID：13111822
> 
> 赞同：0
> 
> 时间：2012-10-28T18:41:53.697
> 
> 标签：ruby-on-rails, github

我几乎是一个完全的编程初学者，学习过一本关于 HTML 和 CSS 的书，并在 lynda.com 上观看了编程基础课程。我决定使用 Ruby on Rails 教程书 (http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#sec-up_and_running) 来学习 Ruby on Rails。

按照书中的说明，我已经导航到位于[http://railsinstaller.org/的 Engine Yard RoR 安装程序，下载了 .exe，并按照他们在](http://railsinstaller.org/)[http://railsinstaller.org](http://railsinstaller.org/windows)的分步安装说明进行操作[/视窗](http://railsinstaller.org/windows)

我遇到了几个问题。我第一次按照说明操作时有点混乱，因为我多次打开和关闭命令行，使用 Windows 命令行、BASH 命令行，也许在不同的情况下使用第三个命令行。不出所料，这个过程并不成功。然后我卸载了所有相关程序并决定重新开始。第二次尝试更成功，但我仍然遇到了一些问题，我觉得我需要先把它们整理好，然后再继续。我在下面概述了我的安装尝试的叙述。我相信我在 GitHub 上特别有问题，希望你们中的一个人能够指出我哪里出错了。我已经运行了许多 Google 搜索，但所有在线讨论都太先进了，我无法理解。我'

*   按照 Engine Yard 分步说明中的第 4 步，我输入了“rails s”，然后尝试在浏览器中打开“localhost:3000”，但浏览器无法连接到服务器。当我第一次按照说明进行连接时，我可以连接，尽管稍后我再次尝试连接时（在我的第一次运行期间）我不能。我尝试使用 Firefox 和 Chrome。不能在这里连接是个大问题吗？我可以忽略它吗？

*   在第 5 步中，我被要求“重新启动我的命令行提示符”。这是否意味着输入'rails s'？

*   在第 8 步中，我被要求“编辑可以在 app/views/welcome/index.html.erb 下找到的欢迎 index.html”。但是，没有文件路径“app/views/welcome/index.html.erb”。有'home/index.html.erb'和posts/index.html.erb，在这两个中它是包含欢迎信息的'home'路径，因此我认为它是正确的编辑？无论如何，我编辑它并继续。在这个阶段，我被要求尝试连接到“localhost:3000”，但浏览器再次无法连接。

*   在同一个步骤 8 中，我被要求“通过在 Sublime Text 中右键单击它来删除 /public/index.html 中的文件”。首先，我使用 Notepad++ 并且不想切换，所以也许有人可以解释如何使用 Notepad++ 执行此操作？我只是要删除整个文件，还是简单地清除其内容？此外，我下载的 rails 文件中有几个“公共”文件夹，但其中没有一个“索引”文件夹。

*   按照第 9 步，我设置了一个 GitHub 帐户并在那里创建了一个存储库。现在，我按照说明输入“git init”并返回：

'chcp' 不是内部或外部命令、可运行程序或批处理文件。在 C:/Sites/railsinstaller_demo/.git/ 'chcp' 中初始化的空 Git 存储库未被识别为内部或外部命令、可运行程序或批处理文件。

以上是错误信息吗？

*   然后我输入“git add”。按照步骤 9 中的说明并返回：

'chcp' 不是内部或外部命令、可运行程序或批处理文件。'chcp' 不是内部或外部命令、可运行程序或批处理文件。

以上是错误吗？

*   然后我输入'git commit -m "first commit"'，在我未经训练的眼睛看来，我返回的内容是合法的。

*   然后我输入 'git remote add origin git@github.com:accountname/railsinstaller_demo.git' 并返回：

'chcp' 不是内部或外部命令、可运行程序或批处理文件。'chcp' 不是内部或外部命令、可运行程序或批处理文件。

错误？

*   我接下来输入“publickey”并返回：

公共 ssh 密钥已复制到您的剪贴板

但是，当我进入我的 GitHub 帐户输入密钥时，它不在我的剪贴板上。为什么会这样？我认为这将是未来的一个大问题，并且会阻止我使用 GitHub？Ruby on Rails 教程书要求我在学习时使用 GitHub。

*   最后，我输入“git push origin master”并返回：

'chcp' 不是内部或外部命令、可运行程序或批处理文件。Permission denied (publickey) fatal: 远程端意外挂断 'chcp' 不是内部或外部命令、可运行程序或批处理文件。

我假设上面是一条错误消息，是由于我提到的 ssh 密钥问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:03:38.920

嗯，这会很有趣。

*   如果您无法连接到 localhost:3000，则您的服务器没有正常启动，您将无法访问您的站点。检查您的控制台以查看运行时出现的错误消息`rails s`。

*   重新启动命令提示符意味着关闭并重新打开终端窗口以重置 shell 会话。

*   如果你被要求编辑你没有的文件，那么到目前为止你做错了什么，例如。错过了运行一些命令。第 7 步让您生成了一个欢迎控制器，因此该文件应该确实存在。

*   如果要求您删除文件，则表示删除该文件。Rails 不在乎如何。删除它。

*   `chcp`听起来像是一些没有正确配置的随机 Windows 东西。我不使用 Windows。不能帮你解决这个问题。但是如果你的 git 工作不正常，它不会阻止你学习 Rails，但它会阻止你维护版本控制、将代码推送到外部服务器、部署代码或基本上做任何有用的事情。建议谷歌搜索并解决问题。

# php - 一次 Foreach 两个节点列表 - PHP

> ID：13111823
> 
> 赞同：1
> 
> 时间：2012-10-28T18:42:02.673
> 
> 标签：php, xpath, foreach, domdocument

> **可能重复：**
> [PHP：迭代两个并行数组的最佳方法？](https://stackoverflow.com/questions/10132210/php-best-way-to-iterate-two-parallel-arrays)

我正在使用 PHP DOMDocument 来解析来自足球投注网站的一些 html 数据。

我有一个 Xpath 搜索主队，另一个搜索客队。

当我得到变量中的数据`$teamHome`并且`$teamAway` 我想做这样的事情时：

```
foreach($teamHome as team1)&&($teamAway as team2){
    echo $team1->nodeValue . " vs " . $team2->nodeValue . "\n";
} 
```

有什么办法吗？谢谢

# linq - 获取与模式匹配的第一行的索引

> ID：13111824
> 
> 赞同：1
> 
> 时间：2012-10-28T18:42:05.453
> 
> 标签：linq, datagridview, datagridviewrow

我有一个带有一些列和行的datagridview。其中一列是字符串类型 ( `DataGridViewTextBoxColumn`)。我想遍历它的所有行`DataGridViewTextBoxColumn`以找到与特定字符串匹配的第一个元素的索引（行索引），所以我这样做：

```
int rowIndex = this.dataGridView1.Rows
    .Cast<DataGridViewRow>()
    .ToArray()
    .First(row => row.Cells[this.colDesired.Index].Value == stringToSearch)
    .Index; 
```

但会引发错误。

我想使用 Linq 和 lambdas。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:58:57.133

您的解决方案对我很有效。有几点需要注意：

1.  您不必`ToArray`对 IEnumberable 执行操作`Cast`。
2.  确保`this.colDesired.Index`具有有效值。否则它将引发运行时异常。
3.  默认值为`DatagridViewCell.Value`null，因此您应该获得一个适当的格式化值 ( `DatagridViewCell.FormattedValue`)，具体取决于`FormatType`此处为文本类型的单元格，以处理 null 情况。
4.  `DatagridViewCell.FormattedValue`是一个对象，因此您必须先将其转换为字符串。

做这个：

```
int rowIndex = dataGridView1.Rows.Cast<DataGridViewRow>().First(row => row.Cells[this.colDesired.Index].FormattedValue.ToString() == stringToSearch).Index; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:08:58.683

这应该有效：

```
int rowIndex = this.dataGridView1.Rows.OfType<DataGridViewRow>()
       .First(row => row.Cells[this.colDesired.Index].Value == stringToSearch).Index; 
```

# c++ - C++中指针的行为

> ID：13111826
> 
> 赞同：2
> 
> 时间：2012-10-28T18:42:22.360
> 
> 标签：c++, c, pointers

> **可能重复：**
> [C 中的 char s[] 和 char *s 有什么区别？](https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c)

```
int main()
{
    char *t1 = "Hi hello";
    char t2[] = " strcat";

    printf("%s", strcat(t1, t2));
} 
```

当我运行这个程序时，它给了我分段错误

```
int main()
{
    char t1[] = "Hi hello";
    char *t2 = " strcat";

    printf("%s", strcat(t1, t2));
} 
```

而当我运行下一个程序时，它会正常运行并显示连接的字符串。为什么呢 ？

## 提前致谢 ：）

## 这个问题的总结[已解决]

这个问题非常封闭。只是想添加摘要。我理解的要点是：对于以这种方式声明的变量

```
char *t1 = "hi hello"; 
```

只需确保添加类型限定符 const。因为默认情况下它是只读存储器。无论如何，我们都不能修改数据。例如

```
t1[0] = "L"; 
```

是不允许的。以这种方式声明的变量不受我们的控制，并且在程序的生命周期中将永远存在。我们甚至无法释放那段记忆。

```
char t1[10] = "hi hello"; 
```

这样我们就可以更好地控制内存。我们被允许修改数组。每当范围消失时，分配的内存就会被释放。

```
char t1[] = "hi hello"; char t2[8] = "hi hello"; 
```

两个声明 t1 和 t2 非常相同，按顺序分配了 8 个字符位置。

希望我说得通。如果没有请编辑。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T18:45:05.133

`t1`是指向**只读**字符序列的指针。`strcat`想要*写入*第一个参数指向的数组，这是*未定义的行为*。

（第二个版本也是未定义的行为，因为您超出了数组`t1`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:49:38.387

调用的目标数组`strcat`必须是可修改的内存并且足够大以保存结果。

```
char *t1 = "Hi Hello";   // non-modifiable memory
char t2[16] = " strcat"; // large enough for result, including terminating '\0'
strcat(t2, t1);          // okay 
```

假设我数对了...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:49:42.963

实际上 strcat() 函数将源字符串附加到目标字符串之后。第二个参数应该是源字符串。每当您运行第一个示例时，您都试图在 t2 字符串之后添加 t1 字符串。但是 t2 字符串的大小是固定的，因为它只是一个固定大小的数组（即大小不能增加）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T18:47:35.797

这两个程序都是错误的，但是第二个程序可以改进，您需要在目标数组中为下一个序列提供更多空间：

```
char t1[100] = "Hi hello"; // at least 16 is needed for t1 + t2 - 100 is just example
char *t2 = " strcat"; 
```

您之前的定义：

```
char t1[] = "Hi hello"; 
```

相当于：

```
char t1[9] = "Hi hello"; 
```

或者：

```
char t1[9] = {'H','i',' ','h','e','l','l','o','\0'}; 
```

`9`两个琴弦都没有足够的空间。

# android - ListView 到列表顶部的距离

> ID：13111847
> 
> 赞同：2
> 
> 时间：2012-10-28T18:43:54.733
> 
> 标签：android

我有一个 ListView，我想制作一个随列表滚动的背景。

我看到了[Shelves](http://code.google.com/p/shelves/source/browse/trunk/Shelves/src/org/curiouscreature/android/shelves/view/ShelvesView.java)的代码，它之所以有效，是因为 GridView 中的所有项目都具有相同的高度，这是我无法保证的。我认为我可以使用类似的技术（即覆盖 dispatchDraw），但我需要知道每个项目与 ListView 顶部的距离 - 我如何预先计算这个？ListView 大部分是静态的并且相当小，所以如果我在向列表中添加新项目时必须重新计算是可以的。

所以我的问题是：给定一个 ListView 和一个 List 适配器，我如何计算每个项目与列表顶部的距离？也就是说，项目 0 距离顶部 0 像素，项目 20 可能距离顶部 4032 像素。或者，有没有更好的方法来做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:52:29.293

> 可以通过调用 getLeft() 和 getTop() 方法来检索视图的位置。前者返回代表视图的矩形的左坐标或 X 坐标。后者返回代表视图的矩形的顶部或 Y 坐标。这些方法都返回视图相对于其父视图的位置。例如，当 getLeft() 返回 20 时，这意味着视图位于其直接父级的左边缘右侧 20 像素处。
> 
> 此外，还提供了几种方便的方法来避免不必要的计算，即 getRight() 和 getBottom()。这些方法返回代表视图的矩形的右边缘和下边缘的坐标。例如，调用 getRight() 类似于以下计算：getLeft() + getWidth()（有关宽度的更多信息，请参阅 Size。）

[http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)

使用 getItemAtPosition() 检索视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:54:36.653

在您的适配器中，保留与您的列表大小相同的第二个距离列表。在你的构造函数中初始化它。然后，对于每个 getView() 调用，您可以将视图的高度添加到存储在此新列表的前一个索引处的值。例如，假设你有`List<Integer> distances`. 当你用 调用`getView(...)`时`position = 0`，你设置`distances.add(0 + view.getHeight());`（一旦你的视图被初始化）。对于位置 1，您将使用`distance.add(distances.get(position-1) + view.getHeight);`，依此类推。然后只需有一个方法来获取给定视图索引的距离，该方法返回存储在`distances`.

# c++ - 我无法弄清楚为什么我生成的随机数没有正确存储

> ID：13111848
> 
> 赞同：0
> 
> 时间：2012-10-28T18:43:55.343
> 
> 标签：c++, arrays, random

我正在制作一个程序，为某人输入的一定数量的数字生成一个随机的 x 和 y 点。由于某种原因，我的随机数没有正确存储在数组中。我在生成点的循环中输出数组，最后在 for 循环中输出数组，y 坐标不相同：

```
#include <iostream>
#include <cstdlib>
#include <ctime>

using namespace std;

int main() {

srand((unsigned)time(0)); 

int mounds =0;

//prompt for number of mounds, uncertainty, and number of sites
cout <<"Please enter the number of mounds at the site: ";
cin >> mounds;

//declaration of an array that will hold the x and y for each mound
int moundArray [mounds][1];

    for(int i =0; i < mounds; i++)
    {
        //generate a random x
        moundArray [i][0] = rand()%1331;
        cout <<"You just generated an x of: " << moundArray [i][0] << endl;
        //sleep(1);

        //generate a random y
        moundArray [i][1] = rand()%1743;
        cout <<"You just generated a y of: " << moundArray [i][1] << endl;
        //sleep(1);

    }

    //for loop to display my results
    for(int j =0; j < mounds; j++)
    {

        cout <<"random x: " << moundArray [j][0] << endl;
        cout <<"random y: " << moundArray [j][1] << endl;
    }

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:46:49.933

```
int moundArray [mounds][1]; 
```

mounds 和 1 表示元素的数量，而不是数组中的最后一个索引。

```
cout <<"You just generated a y of: " << moundArray [i][1] << endl; 
```

上面您使用 1 作为第二个字段中的索引，这意味着该数组在该维度中至少有两 (2) 个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T18:47:18.467

我很惊讶你没有在执行时崩溃。这条线应该是你的问题：

```
int moundArray [mounds][1]; 
```

如果第二个索引的大小仅为 [1]，则元素 [0] 是唯一可以访问的有效元素。尝试将其增加到 2。

# objective-c - 在不接触 UIButton 的情况下调用 UIButton 选择器

> ID：13111850
> 
> 赞同：0
> 
> 时间：2012-10-28T18:44:00.433
> 
> 标签：objective-c, ios, uibutton, ibaction

我可能有一个棘手的问题，希望你能理解这一点：

我有一个带有选择器的 UIButton：

```
- (void)ButtonPressed:(id)sender{
    UIButton *button = (UIButton*) sender;
    int tag = -1;

    if (iniciat == 0){
        if(button.tag == START) {
            tag = 0;
            iniciat = 1;
            [self TimeControl];
        }
    }else{
        switch (button.tag) {
            case START: //Start
                break;
            case LEFT://LEFT  
                //Do sth
                break;
            case RIGHT://RIGHT
                //Do sth
                break;
            default:
                break;
        }

    [super viewDidLoad];

    }
} 
```

但是除了 UIButton 的触摸操作之外，我还想在完成某些操作时使用/调用此选择器。我要做的是：

```
-(void) checkNXT{
    if (iniciat) {

        aux1 = [NSString stringWithFormat:@"%@", newString];
        bool pressed=[aux1 isEqualToString:@"30a0a00\n"];
        bool pressed2=[aux1 isEqualToString:@"30d0d00\n"];

        if(pressed == TRUE){ //Esquerre
            [self ButtonPressed:buttonLeft];

        }else if(pressed2 == TRUE){
            [self ButtonPressed:buttonRight];

        }

        aux3 = [NSString stringWithFormat:@"%d",count];
    }
    [super viewDidLoad];
} 
```

但不知何故，它不能正常工作--> 它没有调用函数 ButtonPressed。

谢谢！

# jquery - 为什么我的动态数据加载和刷新不起作用？

> ID：13111853
> 
> 赞同：1
> 
> 时间：2012-10-28T18:44:16.267
> 
> 标签：jquery, jquery-mobile

我想使用 jQuery load 在我的页面上加载外部数据，然后让 jQuery Mobile 再次运行它以通过触发器应用主题等。数据加载正常，但未正确重新皮肤。我只是举了一个小例子来证明这一点，因为我的整个项目太大了。

我有一个.html：

```
<!DOCTYPE html> 
<html>
      <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1"> 
      <title>Test</title>
      <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
      <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
      <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

      <script>    
function replaceData1() {
$("#a-page").load("b.html");
$("#a-page").trigger('create');
}    
    </script>
</head> 
<body> 

<div data-role="page" id="a-page">
            <div data-role="header" data-theme="a">Header A</div><!-- /header -->

            <div data-role="content" id="a-content">
            Content A
            <button onClick="replaceData1()">goto B</button>
            </div><!-- /content -->

            <div data-role="footer">Footer A</div><!-- /footer -->

            </div><!-- /page -->
</body>
</html> 
```

我有 b.html：

```
<div data-role="header" data-theme="d">Header B</div><!-- /header -->

        <div data-role="content" id="b-content">Content B</div><!-- /content -->

        <div data-role="footer">Footer B</div><!-- /footer --> 
```

b.html 不是一个完整的 html 文件，只是内容。我不确定这是否会导致此问题。

然而，当我加载 a.html 并单击按钮时，来自 b.html 的内容已正确加载但主题不正确。即使我稍后执行 trigger('create') ，它也不起作用。我做错什么了？有人可以重写这个，让它按照我的意图工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:45:11.330

试试这个

```
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Test</title>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>

<body>
  <div data-role="page" id="a-page">
    <div data-role="header" data-theme="a">Header A</div><!-- /header -->
    <div data-role="content" id="a-content">Content A <button onClick="$.mobile.changePage('#b-page');">goto B</button></div><!-- /content -->
    <div data-role="footer">Footer A</div><!-- /footer -->
  </div><!-- /page -->

  <div data-role="page" id="b-page">
    <div data-role="header" data-theme="d">Header B</div><!-- /header -->
    <div data-role="content" id="b-content">Content B <button onClick="$.mobile.changePage('#a-page');">goto A</button></div><!-- /content -->
    <div data-role="footer">Footer B</div><!-- /footer -->
  </div><!-- /page -->

</body>
</html> 
```

![截图1](../Images/cdba51ff5f11c3abb1d2394d6e62c0d9.png)

![截图2](../Images/0c55ceac34c22f95c734deff031e1d5c.png)

# macos - 未找到 debugfs 命令

> ID：13111855
> 
> 赞同：6
> 
> 时间：2012-10-28T18:44:19.847
> 
> 标签：macos, unix, command-line, filesystems, terminal

当我尝试在我的 Macbook pro(10.6.8) 上使用 debugfs 时，我得到

```
-bash: debugfs: command not found 
```

然后我试着看看我的路

```
echo $PATH 
```

我明白了

```
/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/git/bin:/usr/texbin:/usr/X11/bin 
```

这似乎几乎是一切。

我的 debugfs 命令在哪里？我怎样才能重新安装它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:41:53.457

Mac OS X 上没有[debugfs(8)](http://linux.die.net/man/8/debugfs) [。Debugfs(8)](http://linux.die.net/man/8/debugfs)是一个用于调试 Linux 文件系统 ext2/ext3 的 Linux 程序。如果您想调试像 HFS+ 这样的 Mac 文件系统，请尝试[fsck(8)](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man8/fsck.8.html)或使用[Disk Utility](http://support.apple.com/kb/HT1782?viewlocale=en_US&locale=en_US)。

如果您真的想在 Mac 上调试 Linux ext2/ext3 文件系统（例如外部 Linux USB 磁盘），您必须先安装 ext2/3。由于您的路径中有 /opt/local/bin，我想您已经安装了[MacPorts](http://www.macports.org)。在这种情况下，您可以只安装包含[debugfs(8)](http://linux.die.net/man/8/debugfs)程序的数据包 ext2fuse。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-09T15:37:38.633

您可以在 OsX 上使用[Homebrew](http://brew.sh)`e2fsprogs`安装，包括。`debugfs`

```
brew install e2fsprogs 
```

你会发现`debugfs`在`/usr/local/opt/e2fsprogs/sbin/debugfs`

# javascript - 将脚本代码添加到 Twitter 的网站

> ID：13111856
> 
> 赞同：0
> 
> 时间：2012-10-28T18:44:52.230
> 
> 标签：javascript, html, twitter, browser-addons

我制作了一个快速的 .js 脚本来静音 Twitter 网站上的某些词——如果它包含任何指定的词，它只会隐藏推文。

我计划分发此脚本，但不必处理不时更新的用户，我打算将脚本上传到我的网站，然后让插件嵌入 Twitter 网站的脚本，将其添加到代码中。

但是我将如何将“注入”脚本的代码添加到 Twitter 网站的标题中呢？

tl;dr：我希望能够将代码添加到 Twitter 的网站以调用 javascript 文件。(http://domain.tld/directory/script.js)

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-28T18:54:57.353

您不能在 twitters 网站上插入您的 js 脚本部分。如果可以，那么它是来自 twitters 网站的安全问题...您所能做的就是...编写浏览器插件并在浏览器打开时运行您的操作推特页面....但当有人在浏览器中打开推特网站时不会自动注入您的脚本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-28T19:20:04.687

您可以创建一个 Chrome 扩展程序。扩展可以将脚本代码注入网站并让它们在网站范围内运行。

[http://developer.chrome.com/extensions/content_scripts.html](http://developer.chrome.com/extensions/content_scripts.html)

# php - 删除里面有文件的目录

> ID：13111861
> 
> 赞同：-4
> 
> 时间：2012-10-28T18:45:36.413
> 
> 标签：php

> **可能重复：**
> [PHP：删除包含文件的目录？](https://stackoverflow.com/questions/3349753/php-delete-directory-with-files-in-it)

如果我在以下路径中有一些文件

```
mysite.com/install 
```

并且我在执行它的路径`die.php`之外创建了名为“”的文件，它应该删除包含所有文件的文件夹。`/install/``mysite.com/die.php``install`

我已将以下代码添加到 die.php

```
<?PHP rmdir('install');?> 
```

但它只会`/install/`在文件夹为空时删除！如果它有文件，它会给出`Directory not empty`错误`mysite.com/install`

所以任何想法如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:52:43.483

如果您正在寻找纯 PHP 解决方案，则必须遍历所有子文件夹（请参阅上面刚刚发布的答案）。要获得仅适用于具有 GNU coreutils（任何主要 Linux 发行版）的平台的更快方法，请使用以下命令：

```
system('rm -rf '.$dir); 
```

忠告：这可能是不安全的（可能通过管道传输命令） - 一定要清理您的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:50:16.060

这应该工作

```
<?php
 function rrmdir($dir) {
   if (is_dir($dir)) {
     $objects = scandir($dir);
     foreach ($objects as $object) {
       if ($object != "." && $object != "..") {
         if (filetype($dir."/".$object) == "dir") rrmdir($dir."/".$object); else unlink($dir."/".$object);
       }
     }
     reset($objects);
     rmdir($dir);
   }
 }
?> 
```

我在 php 网站上找到了它。这似乎是一个普遍的问题。

# php - 电话号码验证 PHP

> ID：13111864
> 
> 赞同：1
> 
> 时间：2012-10-28T18:45:50.413
> 
> 标签：php, validation, preg-match

> **可能重复：**
> [电话号码验证的综合正则表达式](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)
> [PHP：美国电话号码验证](https://stackoverflow.com/questions/11705507/php-validation-of-us-phone-numbers)

我正在尝试使用 preg_match 验证电话号码，但任何时候我输入正确格式的电话号码 (111) 111-1111，它都会返回无效字符错误而不是 true。我认为我的正则表达式没有任何问题（据我所知），所以我猜我的逻辑有问题

```
function validate_phone_number($phoneNumber, $requiredLength = 14)
{

       //Check to make sure the phone number format is valid 
    for ($i = 0; $i < strlen($_POST[$phoneNumber]); $i++){
            if(preg_match('/^\(\d{3}\) \d{3}-\d{4}\$/', $_POST[phoneNumber]{$i}))
            {
                return true;
            }
            else
            {
                return "<h3>" . "The phone number you entered contains invalid characters" . "</h3>";
            }

       //Check to make sure the number is the required length
            if (strlen($_POST[$phoneNumber]) > $requiredLength) {
                return "<h3>" . "The phone number you entered contains too many characters" . "</h3>";
            }
            else if (strlen($_POST[$phoneNumber]) < $requiredLength) {
                return "<h3>" . "The phone number you entered does not contain enough characters" . "</h3>";
            }
        }
        return true;
} 
```

我用来调用函数的内容

```
if (count($_POST) > 0) {
    $error = array();

   $phone = validate_phone_number('phoneNumber');
        if($phone !==true) {
            $error[] = $phone;

        }

        if (count($error) == 0) {

           //Phone number validates

        }

        else { 
          echo "<h2>Error Message:</h2>";

          foreach($error as $msg) {
            echo "<p>" . $msg . "</p>";
          }
        }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:55:51.240

这里有两点错误：

```
for ($i = 0; $i < strlen($_POST[$phoneNumber]); $i++){
        if(preg_match('/^\(\d{3}\) \d{3}-\d{4}\$/', $_POST[phoneNumber]{$i})) 
```

首先，您将`phoneNumber`其用作裸常量。但是在其余代码中，您用作`$phoneNumber`名称参考。改变那个。（更好的是，将 $value 传递给您的函数，而不是 $_POST 的引用键）。

其次，您似乎正在逐字迭代`{$i}`。但是正则表达式应该应用于整个字符串。遏制`for`.

```
function validate_phone_number($phoneNumber, $requiredLength = 14)
{    
    //Check to make sure the phone number format is valid 
    if (preg_match('/^\(\d{3}\) \d{3}-\d{4}\$/', $_POST[$phoneNumber]))
    { 
```

长度检查是完全多余的，因为正则表达式已经断言您的固定格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:01:34.007

我看到的两个主要内容：

您的正则表达式有问题：

```
'/^\(\d{3}\) \d{3}-\d{4}\$/'
                        ^- wrong. leave it out:

'/^\(\d{3}\) \d{3}-\d{4}$/' 
```

当您首先测试正则表达式时，它只会在字符串正好是 14 个字符时匹配。因此，之后不需要检查字符串长度。

您还应该考虑使用该[`filter_var`](http://php.net/filter_var)功能，例如：

```
$options['options'] = array('regexp' => '/^\(\d{3}\) \d{3}-\d{4}$/');
$valid = filter_var($number, FILTER_VALIDATE_REGEXP, $options); 
```

它还有一个[`filter_input`](http://php.net/filter_input)能够对`$_POST`输入进行操作的姊妹函数。可能很方便：

```
$options['options'] = array('regexp' => '/^\(\d{3}\) \d{3}-\d{4}$/');
$valid = filter_input(
    INPUT_POST, 'phoneNumber', FILTER_VALIDATE_REGEXP, $options
); 
```

# php - 无法在 Oracle 过程中绑定变量

> ID：13111865
> 
> 赞同：0
> 
> 时间：2012-10-28T18:45:52.180
> 
> 标签：php, sql, oracle, stored-procedures, oracle11g

这是我正在尝试运行的程序。它插入两个表`table1`和一个关联表`table2`。

```
create or replace procedure Insert_Row (summary IN VARCHAR2
   description IN VARCHAR2, status IN NUMBER, 
   date_submitted IN DATE, last_updated IN DATE,
   owner_id IN NUMBER, reporter_id IN NUMBER,
   foo IN VARCHAR2, bar IN VARCHAR2,
   first_assignee IN NUMBER) 
is
   l_cur_id number;
begin
   insert into table1 
      (summary, description, status, date_submitted, 
       last_updated, owner_id, reporter_id, 
       foo, bar)
    values( :summary, :description, :status, 
            to_date(:date_submitted,'YYYY-MM-DD'), 
            to_date(:last_updated,'YYYY-MM-DD'), :owner_id, 
            :reporter_id, :foo, :bar)
            returning action_id into l_cur_id; 
    insert into table2(action_id, assignee_id) 
    values(l_cur_id,:test);
    commit;
 end;" 
```

没有参数，查询工作正常。即，如果我删除所有`:somethings`值并对值进行硬编码，那么它在我运行时运行时不会出现错误`exec Insert_Row;`

使用参数（带有`:somethings`），有错误：

`show errors procedure Insert_Row;`

```
Errors: check compiler log
2/4            PLS-00103: Encountered the symbol "DESCRIPTION" when expecting one of the following:

   := . ) , @ % default character
The symbol "," was substituted for "DESCRIPTION" to continue.

14/13          PLS-00049: bad bind variable 'SUMMARY'
14/23          PLS-00049: bad bind variable 'DESCRIPTION'
14/37          PLS-00049: bad bind variable 'STATUS'
15/21          PLS-00049: bad bind variable 'DATE_SUBMITTED'
16/21          PLS-00049: bad bind variable 'LAST_UPDATED'
16/50          PLS-00049: bad bind variable 'OWNER_ID'
17/13          PLS-00049: bad bind variable 'REPORTER_ID'
17/27          PLS-00049: bad bind variable 'FOO'
17/33          PLS-00049: bad bind variable 'BAR'
20/21          PLS-00049: bad bind variable 'TEST' 
```

我究竟做错了什么？

**编辑**

@ron tornambe 的解决方案后查询是：

```
create or replace procedure Insert_Row (summary IN VARCHAR2,
   description IN VARCHAR2, status IN NUMBER, 
   date_submitted IN DATE, last_updated IN DATE,
   owner_id IN NUMBER, reporter_id IN NUMBER,
   foo IN VARCHAR2, bar IN VARCHAR2,
   first_assignee IN NUMBER) 
is
   l_cur_id number;
begin
   insert into table1 
      (summary, description, status, date_submitted, 
       last_updated, owner_id, reporter_id, 
       foo, bar)
    values( :summary, :description, :status, 
            to_date(:date_submitted,'YYYY-MM-DD'), 
            to_date(:last_updated,'YYYY-MM-DD'), :owner_id, 
            :reporter_id, :foo, :bar)
            returning action_id into l_cur_id; 
    insert into table2(action_id, assignee_id) 
    values(l_cur_id,:test);
    commit;
 end;" 
```

此修改后的错误是：

```
14/13          PLS-00049: bad bind variable 'SUMMARY'
14/23          PLS-00049: bad bind variable 'DESCRIPTION'
14/37          PLS-00049: bad bind variable 'STATUS'
15/21          PLS-00049: bad bind variable 'DATE_SUBMITTED'
16/21          PLS-00049: bad bind variable 'LAST_UPDATED'
16/50          PLS-00049: bad bind variable 'OWNER_ID'
17/13          PLS-00049: bad bind variable 'REPORTER_ID'
17/27          PLS-00049: bad bind variable 'FOO'
17/33          PLS-00049: bad bind variable 'BAR'
20/21          PLS-00049: bad bind variable 'TEST' 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:09:02.490

试试这个

```
create or replace procedure Insert_Row (summary IN VARCHAR2,
   description IN VARCHAR2, status IN NUMBER, 
   date_submitted IN DATE, last_updated IN DATE,
   owner_id IN NUMBER, reporter_id IN NUMBER,
   foo IN VARCHAR2, bar IN VARCHAR2,
   first_assignee IN NUMBER) 
is
   l_cur_id number;
begin
   insert into table1 
      (summary, description, status, date_submitted, 
       last_updated, owner_id, reporter_id, 
       foo, bar)
    values( summary, description, status, 
            to_date(date_submitted,'YYYY-MM-DD'), 
            to_date(last_updated,'YYYY-MM-DD'), owner_id, 
            reporter_id, foo, bar)
            returning action_id into l_cur_id; 
    insert into table2(action_id, assignee_id) 
    values(l_cur_id,test);
    commit;
 end; 
```

如果传递参数，则不需要冒号，可以直接分配参数名称。另一点是，如果您从客户端或前端调用此过程，最好从您的过程中删除提交并使用来自调用客户端的提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:51:07.000

您只需要在“summary IN VARCHAR2”之后加一个逗号。此外，关键字“IN”是默认值。7

# sql - 过去 4 周的记录按周分组

> ID：13111866
> 
> 赞同：0
> 
> 时间：2012-10-28T18:45:59.310
> 
> 标签：sql, records

如何按周范围分组计数（最近 4 周记录和周范围）？

周范围意味着 22-28、15-21、8-14、1-7

我试过这个

```
SELECT WEEK(PERIOD), SUM(CLICKS)
  FROM TABLE
 WHERE PERIOD >= NOW() - INTERVAL 4 WEEK
 GROUP BY WEEK(PERIOD) 
```

和

```
SELECT WEEKOFYEAR(`date`) AS period,
       SUM(clicks) AS clicks
  FROM `tablename`
 WHERE `date` >= CURDATE() - INTERVAL 4 WEEK
 GROUP BY period 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:22:20.260

如果您的意思是在今天之前的每 7 x 24 天恰好过去 4 周，直到第二天，那么

```
SELECT CASE WHEN PERIOD >= NOW() - INTERVAL 4 WEEK
                    AND PERIOD < NOW() - INTERVAL 3 WEEK THEN '22-28 days ago'
               WHEN PERIOD >= NOW() - INTERVAL 3 WEEK
                    AND PERIOD < NOW() - INTERVAL 2 WEEK THEN '15-21 days ago'
               WHEN PERIOD >= NOW() - INTERVAL 2 WEEK
                    AND PERIOD < NOW() - INTERVAL 1 WEEK THEN '8-14 days ago'
               WHEN PERIOD >= NOW() - INTERVAL 1 WEEK
                    THEN 'up to 7 days ago'
               END WeekPeriod, IFNULL(SUM(CLICKS),0) TotalClicks
  FROM TABLE
 WHERE PERIOD >= NOW() - INTERVAL 4 WEEK
 GROUP BY CASE WHEN PERIOD >= NOW() - INTERVAL 4 WEEK
                    AND PERIOD < NOW() - INTERVAL 3 WEEK THEN '22-28 days ago'
               WHEN PERIOD >= NOW() - INTERVAL 3 WEEK
                    AND PERIOD < NOW() - INTERVAL 2 WEEK THEN '15-21 days ago'
               WHEN PERIOD >= NOW() - INTERVAL 2 WEEK
                    AND PERIOD < NOW() - INTERVAL 1 WEEK THEN '08-14 days ago'
               WHEN PERIOD >= NOW() - INTERVAL 1 WEEK
                    THEN '01 to 7 days ago'
               END
 ORDER BY WeekPeriod 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:02:02.420

```
declare @myTable table 
(
    id bigint identity(1,1) not null primary key clustered 
    , createdDate date not null
    , clicks int not null
)

insert @myTable
      select GETUTCDATE() - 00, 9
union select GETUTCDATE() - 01, 6
union select GETUTCDATE() - 02, 5
union select GETUTCDATE() - 03, 9
union select GETUTCDATE() - 04, 3
union select GETUTCDATE() - 05, 6
union select GETUTCDATE() - 06, 3
union select GETUTCDATE() - 07, 6
union select GETUTCDATE() - 08, 9
union select GETUTCDATE() - 09, 9
union select GETUTCDATE() - 10, 8
union select GETUTCDATE() - 11, 7
union select GETUTCDATE() - 12, 1
union select GETUTCDATE() - 13, 2
union select GETUTCDATE() - 14, 5
union select GETUTCDATE() - 15, 3
union select GETUTCDATE() - 16, 8
union select GETUTCDATE() - 17, 7
union select GETUTCDATE() - 18, 4

select DATEPART(week, createdDate) Period
, SUM(clicks) ClickSum
from @myTable
group by DATEPART(week, createdDate)
order by Period 
```

# mysql - 抽认卡语言项目的数据库模式/逻辑

> ID：13111869
> 
> 赞同：0
> 
> 时间：2012-10-28T18:46:26.497
> 
> 标签：mysql, database, database-schema

我现在正在创建一个应用程序（使用 MYSQL），用于使用简单的抽认卡学习单词/语言。真正让我头疼的是如何构建模式（表）。关于如何让它变得非常简单有很多想法，然后我继续像这样构建它。

![数据库模式](../Images/3ea2e891505d38721f52dded50e7292e.png) [链接到图片](https://i.stack.imgur.com/Yw5Br.png)

我为每种语言都有一个表格，其中有 4 个字段。一个值，例如“狗”、词性（名词）、缩写和拼写。我将所有单个单词收集在一个名为“翻译”（或抽认卡）的表格中，所有单词都放在一起。还有另外 2 张桌子，但我想专注于保存不同的抽认卡。

使用这种模式，我可以制作支持超过 2 种语言的抽认卡，而无需完成所有这些（翻译中的字段可以为空）。问题是，如果添加了新语言，我必须在翻译中创建另一个表和一个新字段。我实际上不知道它是好是坏，但我认为这里有比这个更好的方法。有了这些信息：

有谁知道如何使这个数据库模式更好？

提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T05:30:39.283

你的设置没有问题。

如果是我，我会将您的语言表合并为一个，然后在该表中添加一个字段，该字段将是基于预设值的字段。优点是有人想为您的数据库添加额外的语言，他们不必添加新表并为新表添加编程。相反，人们只需要在查找表中添加一个条目。

英语+法语+他加禄语+德语表到一张表：

vocab{ id value partofspeech 缩写拼写语言 }

语言字段将根据另一个表填充：

语言{语言}

语言表中的值为： 法语 英语 他加禄语 德语

稍后当您决定学习西班牙语时，只需将其添加到列表中即可。

当您学习特定语言时，您只需使用 sql 语句，例如：

其中语言=“法语”

# python-3.x - 提示时 Python 版本为 3.2，脚本中为 2.6

> ID：13111874
> 
> 赞同：0
> 
> 时间：2012-10-28T18:46:58.413
> 
> 标签：python-3.x, python-2.6

Snow Leopard 上的默认 python 版本是 2.6。我决定使用 python 网站上的安装程序升级到 3.2，该安装程序安装了 32 位和 64 位版本的 python（对某些库很有用。）

问题是我写的像 3.2 的 python 脚本解释为 2.6，而我的 python shell 解释为 3.2 我写的可能没有意义。

所以我有一个脚本，上面写着：

```
#!/usr/bin/python
import sys
print(sys.version)#note the python 3 syntax 
```

当我运行它时，我得到了这个：

```
$ ./test.py 
2.6.1 (r261:67515, Jun 24 2010, 21:47:49) 
[GCC 4.2.1 (Apple Inc. build 5646)] 
```

当我在 python 提示符下运行相同的东西时，我得到了这个：

```
$python
Python 3.2.3 (v3.2.3:3d0686d90f55, Apr 10 2012, 11:25:50) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> print(sys.version)
3.2.3 (v3.2.3:3d0686d90f55, Apr 10 2012, 11:25:50) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]
>>> 
```

问题是，我该如何解决这个问题？我认为这是一个安装问题。编辑以使名称更有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:52:41.427

在命令行中，键入`which python`并报告结果。我敢打赌你的路径是出于某种原因找到 Python 3.3，它与`/usr/bin/python`. 如果它们不同，`#!/usr/bin/env python`请在脚本中使用路径环境变量而不是绝对路径来查找 python。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:07:25.170

根据您在说明中所写的内容，在您的 .bash_profile 末尾定义了一个别名：

```
alias python=python3.2 
```

这是罪魁祸首。考虑放弃它，你会有一个更透明和直观的情况。

“which python”（我假设它是 /usr/bin/which）并没有解决您所感知的谜团，因为它不知道别名。它只会在你的路径中找到一个 python 二进制文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:54:56.480

重要的是要了解路径中的优先级（/usr/bin 或 /usr/local/bin），“which python”在终端中显示什么？您需要编辑 .bash_profile 并添加新 python 二进制文件的路径，并更改脚本中的 #!/usr/bin/python 以指向新 python，例如 #!/usr/local/ bin/python - 安装程序放置 Python 3.x 的任何位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T07:33:13.500

我仍然不知道为什么在脚本中运行 python 给了我 2.6 python，即使在提示符下运行 python 给了我 3.2 python。我确实修好了。我找到了 python3 二进制文件，并在我的`/usr/bin`. 然后我做了一个符号链接`/usr/bin/python`到`/Library/Frameworks/Python.framework/Versions/3.2/bin/python3`

我仍然很好奇原来的问题是什么，但现在已经解决了。

# php - 从多个具有相同名称的输入字段中检索数据

> ID：13111877
> 
> 赞同：0
> 
> 时间：2012-10-28T18:47:28.657
> 
> 标签：php, forms, post, input

我有一个表单，您可以动态创建新的输入字段（type=hidden），当发送表单时应该由我的 php 代码检索。但是，由于输入字段的数量可能不同，我给它们取了相同的名称。然而，问题是我不知道如何检索它，或者更准确地说，不知道如何处理检索到的内容。

**从表格：**

```
...
<input type='hidden' name='newListObject' value='0' />
<input type='hidden' name='newListObject' value='1' />
<input type='hidden' name='newListObject' value='2' />
<input type='hidden' name='newListObject' value='3' />
... 
```

**来自 php 代码（listView.php）：**

```
private $m_newListObject = 'newListObject';
...
if (isset($_POST[$this->newListObject])) {
    $listObjects = $_POST[$this->m_newListObject];
} 
```

**来自 php 代码（listModel.php）：**

```
//Below doesn't work because $listObjects isn't an array

foreach ($listObjects as $listObject) {
    $query = "INSERT INTO listElement (listElemName, listId) VALUES(?, ?)";

    $stmt = $this->m_db->Prepare($query);

    $stmt->bind_param('si', $listObject, $listId);

    $ret = $this->m_db->RunInsertQuery($stmt);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:49:47.687

```
<input type='hidden' name='newListObject[]' value='0' />
<input type='hidden' name='newListObject[]' value='1' />
<input type='hidden' name='newListObject[]' value='2' />
<input type='hidden' name='newListObject[]' value='3' /> 
```

并`$_REQUEST['newListObject']`作为`array()`现在使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:50:28.587

如果你调用它们，`name="newListPObject[]"`PHP 会将它们作为一个可以循环的数组接收。

# delphi - 如何使用 Indy10 中的 TIdThreadSafe 类

> ID：13111880
> 
> 赞同：3
> 
> 时间：2012-10-28T18:47:34.577
> 
> 标签：delphi, indy

如果我定义一个新类，我可以使用 Indy 命令 TIdThreadSafe 使类 MyPrivateClass 线程安全吗

```
 MyNewIndyClass = Class(TIdThreadSafe)
         FLocal :  MyPrivateClass 
         create
          ......
          end; 
```

我的 MyPrivateClass 不是线程安全的，因为我在这个类中访问 TList 和 TBitmap 项

如果我将 TCPServer.Onexecute 代码更改为以下样式

```
 ......

     aNewIndyClass  :=  MyNewIndyClass.Create; 

     aNewIndyClass.FLocal.CallFuntionA; 

     aNewIndyClass.FLocal.CallFuntionB; 

      ...... 
```

这种方法的想法：保持 MyPrivateClass 代码不变，只需在单独的类中添加对 Indy Server onexecute 的请求

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T23:12:54.277

You should use Lock() and Unlock() methods of TIdThreadSafe class. For example in TCPServer.OnExecute() call aNewIndyClass's methods like this:

```
 aNewIndyClass  :=  MyNewIndyClass.Create; 

  aNewIndyClass.Lock;   // This will enter TIdThreadSafe internal's Critical Section object
  try
    with aNewIndyClass do  // The code between try/finally will be "atomic"
    begin                  // i.e. no other thread will be able to do anything with your object
      ...
      FLocal.CallFuntionA; 
      FLocal.CallFuntionB; 
      ...
    end;
  finally                 // The use of TRY/FINALLY is MANDATORY when working with critical sections!
    aNewIndyClass.Unlock; // This will leave the CS
  end; 
```

Also it's better to use properties (i.e. getter/setter) for accessing private or protected members of your MyNewIndyClass class.

By the way if you are using Delphi 2009 and newer you can get advantage of Generics. A short example implementation of a generic thread safe class may be:

```
 tThreadSafeObject<T: class> = class
    private
      fObject: T;
      fCriticalSection: tCriticalSection;
    public
      constructor Create(cpObject: T);  // We expect previously created object here. We own it!
                                        // TODO: Implement ownership option?
      destructor Destroy;
      function Lock: T;
      procedure Unlock;
  end;

{ tThreadSafe<T> }

constructor tThreadSafeObject<T>.Create(cpObject: T);
begin
  inherited Create;
  fObject := cpObject;
  fCriticalSection := TCriticalSection.Create;
end;

destructor tThreadSafeObject<T>.Destroy;
begin
  FreeAndNil(fObject);  // In this sample implementation fObject is owned so we free it
  FreeAndNil(fCriticalSection);
  inherited Destroy;
end;

function tThreadSafeObject<T>.Lock: T;
begin
  fCriticalSection.Enter;
  result := fObject;
end;

procedure tThreadSafeObject<T>.Unlock;
begin
  fCriticalSection.Leave;
end; 
```

**Usage:**

```
procedure foo;
var 
  tsObj: tThreadSafeObject<tMyClass>;
begin
 tsObj := tThreadSafeObject<tMyClass>.Create(tMyClass.Create);
 try      // In real World tsObj would be variable, accessed by different threads
   with tsObj.Lock do
   try
     // Do some atomic stuff here
   finally
     tsObj.Unlock;
   end;
 finally
   freeAndNil(tsObj);
 end 
end; 
```

# bash - 脚本 virtualenvwrapper mkvirtualenv

> ID：13111881
> 
> 赞同：6
> 
> 时间：2012-10-28T18:47:38.013
> 
> 标签：bash, virtualenvwrapper

我正在用 python 2.7 编写[游戏](http://github.com/greenmoss/NotOrion)，并且想要编写游戏开发环境的“引导程序”脚本，然后调用[shovel](https://github.com/seomoz/shovel)。如果未检测到 virtualenvwrapper，我将使用[virtualenv 引导解决方案](https://stackoverflow.com/questions/4324558/whats-the-proper-way-to-install-pip-virtualenv-and-distribute-for-python)。但是，如果检测到 virtualenvwrapper **，**我想改用它。

问题是我的引导脚本没有继承 virtualenvwrapper 内联 shell 函数。据我所知，这排除了运行“mkvirtualenv NotOrion”之类的东西。由于设置了环境变量“VIRTUALENVWRAPPER_VIRTUALENV” **（**在我的情况下，来自[macports](http://www.macports.org/ports.php?by=name&substr=virtualenvwrapper) : `/opt/local/bin/virtualenv-2.7`），我尝试直接使用它：

```
#!/usr/bin/env bash

# Name your first "bootstrap" environment:
ENV_NAME=NotOrion
# Options for your first environment:
ENV_OPTS='--no-site-packages --distribute'

unset PYTHONDONTWRITEBYTECODE

function create_virtualenvwrapper_venv {
  echo "installing into virtualenvwrapper directory"
  cd $WORKON_HOME
  $VIRTUALENVWRAPPER_VIRTUALENV $ENV_OPTS $ENV_NAME
  cd -
  #mkvirtualenv $ENV_NAME
  #workon $ENV_NAME
}

function create_standalone_venv {
  # not run/snipped
}

if [ -z "$VIRTUALENVWRAPPER_VIRTUALENV" ]; then
  create_standalone_venv
else
  create_virtualenvwrapper_venv
fi

pip install shovel
shovel help 
```

我的引导脚本完成安装铲子。但是运行 shovel （例如最后一行）会产生警告：

```
/Users/me/.virtualenvs/NotOrion/bin/shovel:25: UserWarning: Module argparse was already imported from /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.pyc, but /Users/me/.virtualenvs/NotOrion/lib/python2.7/site-packages is being added to sys.path
import pkg_resources
# normal shovel output snipped 
```

那么有可能以某种方式从脚本中调用“mkvirtualenv”吗？如果不是，我可以从我的脚本中运行其他具有相同效果但**不**产生警告的东西吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T19:22:59.287

您的脚本应该能够执行以下操作：

```
# 'which' will print absolute path to virtualenvwrapper.sh
source `which virtualenvwrapper.sh` 
```

我将它用于一些部署脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:31:30.270

似乎没有“标准”的方式来做到这一点。所以我手动查看了各种可能的地方。凌乱，但它似乎是唯一的方法：

```
function find_virtualenvwrapper {
   # no consistent way to find 'virtualenvwrapper.sh', so try various methods
   # is it directly available in the path?
   virtualenvwrapper_path=$(which virtualenvwrapper.sh)
   if [ $? -eq 0 ]; then
      return
   fi
   # nope; how about something that looks like it in our path?
   # http://stackoverflow.com/questions/948008/linux-command-to-list-all-available-commands-and-aliases
   virtualenvwrapper_cmd=$(compgen -ac | grep -i 'virtualenvwrapper\.sh' | sort | uniq | head -1)
   if [ -n "$virtualenvwrapper_cmd" ]; then
      virtualenvwrapper_path=$(which $virtualenvwrapper_cmd)
      if [ $? -eq 0 ]; then
         return
      fi
   fi
   # still not; Debubuntu puts it in /etc/bash_completion.d
   virtualenvwrapper_path='/etc/bash_completion.d/virtualenvwrapper'
   if [ -e "$virtualenvwrapper_path" ]; then
      return
   fi
   # any other methods to find virtualenvwrapper can be added here
   echo "unable to find virtualenvwrapper.sh or anything that looks like it"
   exit 1
} 
```

# jquery - jQuery 自动完成 id 增量

> ID：13111886
> 
> 赞同：0
> 
> 时间：2012-10-28T18:48:04.613
> 
> 标签：jquery, autocomplete

我正在尝试自定义以下 Auto Suggest jQuery 插件： [Ajax autocomplete with AJAX](http://www.devbridge.com/projects/autocomplete/jquery/#styling)

我遇到的问题是使用以下方法随机生成 id 的自动完成 div：

```
uid = Math.floor(Math.random() * 0x100000).toString(16); 
```

这样，即使插件的少数实例都用具有唯一 ID 的 div 包装，但这些 id 显然在每次调用 sript 时都会改变。我想要实现的是能够为每个实例生成唯一的 id，但每次都相同，所以我可以使用 CSS 引用它。我尝试了循环，但没有运气。

任何帮助表示赞赏。

整个插件代码可以在这里找到： [插件代码](https://github.com/devbridge/jQuery-Autocomplete/blob/master/src/jquery.autocomplete.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:53:59.727

改用类名怎么样？

或者使用 jquery 访问名称以 Autocomplete 开头的 div：

```
$("div[id^=Autocomplete]").css 
```

或者

```
var acs = $("div[id^=Autocomplete]");
acs.eq(0).css...
acs.eq(1).css... 
```

# node.js - 读取内容长度和内容类型

> ID：13111892
> 
> 赞同：0
> 
> 时间：2012-10-28T18:48:58.017
> 
> 标签：node.js

如何在节点中读取传入的内容长度和内容类型。

我看到了 [http://nodejs.org/docs/v0.6.6/api/all.html#request.connection](http://nodejs.org/docs/v0.6.6/api/all.html#request.connection)

看起来我错过了一些东西。

如何阅读 Content-length 和 content -type 以及任何其他通用标题？像 X-*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:04:10.207

```
req.headers 
```

该字段将填充所有发送的标头。如果要访问 Connection-header，请使用：

```
req.headers.connection 
```

Content-Length 和 Content-Type 是仅在正文存在时发送的标头，因此它们不会与 GET 请求一起发送。

# java - ArrayList of Entites 随机移动

> ID：13111898
> 
> 赞同：0
> 
> 时间：2012-10-28T18:49:55.887
> 
> 标签：java, game-physics

我有一个要随机移动的实体数组列表。不管我做什么，他们都不会动。这是我的女班：

```
public class Female extends Entity {
static int femaleX = 0;
static int femaleY = 0;
double walkSpeed = .1f;
Random rand = new Random();
int random;
int dir;

Player player;

public Female(int posX, int posY) {
    super(posX, posY);

}

public void update() {
    posX += femaleX;
    posY += femaleY;

    moveFemale();

}

public void draw(Graphics2D g2d) {
    g2d.drawImage(getFemaleImg(), posX, posY, null);
    if (Player.showBounds == true) {
        g2d.draw(getBounds());
    }
}

public Image getFemaleImg() {
    ImageIcon ic = new ImageIcon("res/female.png");
    return ic.getImage();
}

public Rectangle getBounds() {
    return new Rectangle(posX, posY, getFemaleImg().getHeight(null),
            getFemaleImg().getWidth(null));
}

public void moveFemale() {
    random = rand.nextInt(3);
    System.out.println(random);

    if (random == 0) {
        dir = 0;
        posX -= (int) walkSpeed;
    }
}
      } 
```

以下是我在主班中更新女班的方法：

```
public void actionPerformed(ActionEvent ae) {
    player.update();

    for(int i = 0; i < females.size(); i++){
        Female tempFemale = females.get(i);
        tempFemale.update();
    }
    repaint();
} 
```

如果我做这样的事情（在女性更新方法中）：

```
public void update() {
    posX += femaleX;
    posY += femaleY;

    posX -= walkSpeed;

} 
```

角色移动没有问题。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:56:30.847

因为`femaleX`和`femaleY`为零。将它们添加到这些变量中`posX`并`posY`不会更改这些变量，但是添加一个像 walkSpeed 这样的非零变量会。

编辑：对于随机性问题，我将不得不在黑暗中进行尝试，因为我看不到您的所有代码，但*也许*您没有调用 moveFemale 方法，这是其中具有随机性的移动方法。更新方法是完全确定的。如果您希望女性随机移动，请调用 moveFemale 方法或在更新方法中添加随机性。

这是面向对象编程中一般规则的一个示例：让两个方法（update 和 moveFemale）看起来做相同或非常相似的事情是很糟糕的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:58:08.070

据我所知，femaleX 和 femaleY 从来都不是非零的。

# python - 创建 wxPython GUI .exe？

> ID：13111899
> 
> 赞同：0
> 
> 时间：2012-10-28T18:50:04.373
> 
> 标签：python, wxpython, exe

我已经尝试了一个多星期来制作一个 wxPython 脚本的 .exe。我还有很多疑问，创建exe的过程还很不清楚。

1.  应该使用哪个实用程序？我听说使用 py2exe、pyinstaller、gui2exe、gui2exe 和一些阴暗的 .bat 文件的组合等。哪个最适合 wxPython 应用程序？
2.  .dll 是怎么回事？他们做什么，我是否需要“捆绑”他们，他们为什么不在用户的计算机上？
3.  您可以将东西捆绑到 .exe 中，还是需要在 .exe 所在的目录中？

这些事情还没有特别清楚，因为我一直试图找出如何将我的程序变成 exe 一段时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:18:40.270

1.  我刚刚尝试过[py2exe](http://www.py2exe.org/)，看起来不错。它可以帮助您将所有需要的东西捆绑到 .exe 中，或者将它们放在 .exe 所在的目录中，无论您喜欢什么
2.  wxpython 是 wxwigets 的 api，其内核代码由 c++ 编写。其中许多被编译为 dll，因此您必须将它们与您的程序捆绑在一起，以便它可以在运行时调用 dll
3.  见 1。

BTW，第一次用英文回答问题，希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:57:49.183

1.  我使用 pyinstaller 因为它非常易于使用并且应用程序运行没有任何问题
2.  包含的 Python 编译器和可能的 win32 api 调用需要一些 Windows DDL
3.  使用 Pyinstaller，您可以使用 -F 标志捆绑所有需要的东西（当然除了配置文件和 dbs）。

# android - 将列表视图片段添加到 viewpager

> ID：13111903
> 
> 赞同：0
> 
> 时间：2012-10-28T18:50:44.573
> 
> 标签：android, listview, android-viewpager, fragment

当前有一个带有三个片段的 ViewPager 作为页面我想向此添加自定义列表视图

我的列表代码片段是：

```
public class bethoven extends Fragment  {
// All static variables
static final String URL = "http://test.com/bethhoven1.xml";
// XML node keys
static final String KEY_SONG = "song"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "artist";
static final String KEY_DURATION = "duration";
static final String KEY_THUMB_URL = "thumb_url";
static final String KEY_URL = "url";

ListView list1;
LazyAdapterbeth adapter;
XMLParser parser1 = new XMLParser();

public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    new getFeed().execute();
}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) 

{
    View thisfragment1 = inflater.inflate(R.layout.fragment_layout, container, false);

    return thisfragment1;
}

private class getFeed extends AsyncTask<Void, Void, Document> {
    @Override
    protected Document doInBackground(Void... params) {

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        return doc;
    }

    protected void onPostExecute(Document doc) {

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    NodeList nl = doc.getElementsByTagName(KEY_SONG);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser1.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser1.getValue(e, KEY_TITLE));
        map.put(KEY_ARTIST, parser1.getValue(e, KEY_ARTIST));
        map.put(KEY_DURATION, parser1.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser1.getValue(e, KEY_THUMB_URL));
        map.put(KEY_URL, parser1.getValue(e, KEY_URL));
        // adding HashList to ArrayList
        songsList.add(map);
    }

    list1=(ListView)getActivity().findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapterbeth(getActivity(), songsList);
    list1.setAdapter(adapter);

    // Click event for single list row
    list1.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

         }
    }); 
} 
```

}}

我的标题适配器鳕鱼是：

```
public class TitleAdapter extends FragmentPagerAdapter{
private String titles[] = new String[]{"View1","View2","View3"};
private Fragment frags[] = new Fragment[titles.length]; 

public TitleAdapter(FragmentManager fm) {
    super(fm);
    frags[0] = new bethoven();
    frags[1] = new FragmentView2();
    frags[2] = new FragmentView3();

}

@Override
public CharSequence getPageTitle (int position){
    Log.v("TitleAdapter - getPageTitle=", titles[position]);
    return titles[position];
}

@Override
public Fragment getItem(int position) {
    Log.v("TitleAdapter - getItem=", String.valueOf(position));
    return frags[position];
}

@Override
public int getCount() {
    return frags.length;
} 
```

但是当我添加 frags[0] = new bethoven(); 出现错误

类型不匹配：无法从 bethoven 转换为 Fragment

我能做些什么来解决这个问题？

我的主要活动是：

```
public class MainActivity extends FragmentActivity {
ViewPager mViewPager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mViewPager = (ViewPager) findViewById(R.id.viewpager);
    PagerTabStrip pagerTabStrip = (PagerTabStrip) findViewById(R.id.pagerTabStrip);
    //pagerTabStrip.setTextColor(color.white);
    //pagerTabStrip.setTabIndicatorColor(color.holo_red_dark);

    TitleAdapter titleAdapter = new TitleAdapter(getSupportFragmentManager());
    mViewPager.setAdapter(titleAdapter);
    mViewPager.setCurrentItem(0);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:22:10.447

由于 frags 是一个 Fragment 类型的数组，因此在将其分配给 frags 数组之前，请尝试将 bethoven 对象转换为 Fragment：

```
frags[0] = (Fragment) new bethoven(); 
```

# android - Android UI 小部件在模拟器上的显示方式与在模拟器中的显示方式不同

> ID：13111904
> 
> 赞同：0
> 
> 时间：2012-10-28T18:50:53.643
> 
> 标签：android, user-interface, widget, emulation

我正在构建新的 Android 应用程序，我对 UI 小部件在模拟器中的外观与它们在我的设备（Samsung S2，OS 4.0.3）中的外观之间的差异有疑问。

当我在模拟器按钮（顺便说一句，和其他 UI 小部件）中运行应用程序时，看起来更加“优雅”.. 按钮（在数字选择器中）是蓝色/灰色的小箭头，但在设备按钮（在数字选择器中）更多“常规”（灰色矩形）（对不起，我无法加载图片..）

我的问题是，如何使我的设备上的 UI 小部件看起来像在模拟器中？

谢谢，杜迪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:53:23.050

我认为情况正好相反——模拟器显示谷歌的默认皮肤，而您的设备显示制造商定制的内容（并刻录到设备的操作系统中）。

因此，您可能会考虑获得“三星皮肤”（如果存在）以使模拟器更接近真实设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:07:01.717

您所说的漂亮 UI 可能是在 Android HC 中引入的 Holo Theme，但一些 OEM 使用定制的 Android 框架，如三星（TouchWiz）或 HTC（HTC Sense）。如果您想在各种 Android 设备中使用相同的主题，您可以使用第三方库。[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)是一个流行的主题，它为旧设备 (2.3=<) 带来了纯 Holo 。如果您在您的应用程序中使用此主题，您将在大多数 Android 版本和大多数设备上拥有 Holo 主题。

# c - 快速排序并非每次都排序

> ID：13111907
> 
> 赞同：0
> 
> 时间：2012-10-28T18:51:24.203
> 
> 标签：c, quicksort

我的快速排序有问题。对于某些值，它有效，但对于其他值则无效。例如，当第一个值小于最后一个值时，它不起作用。我不知道出了什么问题。这是代码：

```
#include <stdio.h>
#include <time.h>

#define lenght_max 1000000
int x;
int tablica[lenght_max];
int q;

int Partition(left, right) {

    int tmp;
    int i;
    int j;

    i = -1;
    j = 0;

    x = tablica[right];
    i = left - 1;

    for(j = left; j < right; j++){
      if(tablica[j] <= x) {
        i++;
        tmp = tablica[i];
        tablica[i] = tablica[j];
        tablica[j] = tmp;
      }
    }

    return i + 1;
}

void Quicksort(left, right) {    
    if(left < right){ 
      q = Partition(left, right);
      Quicksort(left , q - 1);
      Quicksort(q + 1, right);
    }
}

int main(void) {

  int i;
  int temporary;
  int left;
  int right;

  printf("Witaj uzytkowniku. To jest program preferujacy sortowanie szybkie - quicksort.\n");
  printf("Podaj, ile liczb chcialbys posortowac: ");
  scanf("%i", &temporary);

  printf("Podaj liczby do sortowania: \n");

  for(i = 0; i < temporary; i++)
    scanf("%d", &tablica[i]);

    left = 0;
    right = temporary - 1;
    x = temporary / 2;

  Quicksort(left, right);

  printf("\nPROCES:\n");

  for(i = 0; i < temporary; i++)
    printf("%d\n", tablica[i]);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:14:04.787

如果我没有忽略这个问题，在我看来，您似乎忘记将枢轴与第一个元素交换，而不是`Partition`. 修复应该像添加一样简单：

```
 tmp            = tablica[i+1];
    tablica[i+1]   = tablica[right];
    tablica[right] = tmp; 
```

在`return i + 1;`里面声明之前`Partition`。

# java - 如何将实现特定接口的任何类作为参数传递并使用其方法？

> ID：13111908
> 
> 赞同：0
> 
> 时间：2012-10-28T18:51:32.160
> 
> 标签：java, generics, interface, comparator

我创建了自己的“LinkedList”类，它可以接收用泛型指定的对象。

在那个类中，我想要一个**sort(ComparatorObject)**方法，该方法接受一个类实现了 Comparator 的对象。

原因是对于我的测试对象，特别是形状，我想看看我是否可以按用户选择的各种字段对它们进行排序，例如形状的面积、周长、类型等。

现在，我的比较器类之一是这样定义的：

```
public class Comparator_Area implements Comparator<Shape>{

@Override
public int compare(Shape shape1, Shape shape2) {
    int valueToReturn = 0;

    if(shape1.getArea() < shape2.getArea()){
        valueToReturn = -1;
    }
    else if(shape1.getArea() < shape2.getArea()){
        valueToReturn = 1;
    }

    return valueToReturn;
}
} 
```

在我的 LinkedList 类中，我的排序方法是这样定义的（我不知道它是否正确，但这是我在查找如何执行此操作时发现的）：

```
public void sort(Class<? extends Comparator<E>> comparator){

} 
```

自然，我希望能够在 sort 方法中使用这样的东西：

```
comparator.compare(shape1, shape2); 
```

但我不能使用“比较”，我真的不知道我应该如何完成这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:53:52.703

`Comparator`您应该在排序方法中发送一个对象作为参数：

```
public void sort(Comparator<Shape> comparator){

} 
```

这是假设您的 LinkedList 类仅属于`Shape`s。如果你有一个通用的 LinkedList 实现，那么你可以传递一个`Comparator<T>`：

```
public class MyLinkedList<T> {
    //other methods...

    public void sort(Comparator<T> comparator){

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:56:22.843

您将`Class`对象作为参数传递。请尝试以下操作：

```
public void sort(Comparator<T> comparator){

} 
```

`T`你的泛型类型在哪里`LinkedList`？

# authentication - RPC 身份验证错误

> ID：13111910
> 
> 赞同：9
> 
> 时间：2012-10-28T18:51:41.433
> 
> 标签：authentication, rpc

上周我在使用 RPC，并且可以很好地运行我的 RPC 服务器程序。但是，今天我尝试再次启动它，但出现此错误：

> 无法注册服务：RPC：身份验证错误；为什么 = 客户端凭据太弱无法注册（X_PROG、X_VERS、udp）

谁能告诉我这个错误的原因是什么？

rpcinfo 给了我这个：

```
 program version netid     address                service    owner
    100000    4    tcp6      ::.0.111               portmapper superuser
    100000    3    tcp6      ::.0.111               portmapper superuser
    100000    4    udp6      ::.0.111               portmapper superuser
    100000    3    udp6      ::.0.111               portmapper superuser
    100000    4    tcp       0.0.0.0.0.111          portmapper superuser
    100000    3    tcp       0.0.0.0.0.111          portmapper superuser
    100000    2    tcp       0.0.0.0.0.111          portmapper superuser
    100000    4    udp       0.0.0.0.0.111          portmapper superuser
    100000    3    udp       0.0.0.0.0.111          portmapper superuser
    100000    2    udp       0.0.0.0.0.111          portmapper superuser
    100000    4    local     /run/rpcbind.sock      portmapper superuser
    100000    3    local     /run/rpcbind.sock      portmapper superuser 
```

奇怪的是，过去一周我什至没有使用过这台电脑。有没有应该运行的服务？

希望你能帮助我。格兹·斯特凡

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-30T01:29:20.093

此错误与 rpcbind 相关，因此您应该像这样停止服务端口映射：

```
sudo -i service portmap stop 
```

然后

```
sudo -i rpcbind -i -w 
```

最后启动服务端口图：

```
sudo -i service portmap start 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-10T20:24:08.373

我意识到这是一个较旧的线程，但谷歌发现它在前 3 个结果中，人们仍在发现 nfs 服务错误。甚至 Red Hat 的 RHN 修复程序也不起作用。

截至 2013 年 12 月，在 RHEL 6.4 (x64) 上并在 2013 年 11 月进行了修补，唯一的解决方案是更改 tcp_wrapper 配置文件的权限。因为我们对盒子进行了相当严格的保护，所以我们在 /etc/hosts.allow 和 /etc/hosts.deny 上拥有 640 的权限，这两个文件都归 root:root 所有。我们确实尝试给这些文件不同的组所有权在 nfs 启动时没有解决问题。

一旦我们将 perms 放回“开箱即用”(644)，nfs (rquotad) 服务就会按预期启动。或者，如果我们将 hosts.allow/deny 完全移开。

弄清楚这是多么痛苦。如果我早点查看，selinux 日志可能会有所帮助。

现在，如果我们让 selinux 处于强制模式，这可能不是问题。我仍然需要测试这个理论。

祝你好运。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T15:09:10.157

使更改在 Ubuntu12.04 上持久化（假设使用 -i 运行 rpcbind 的安全隐患无关紧要）：

```
echo 'OPTIONS="-w -i"' | sudo tee /etc/default/rpcbind
sudo service portmap restart 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-21T16:58:26.027

**另一个解决方案：CentOS 7.3 版**

除了 rpcbind，我还必须在 /etc/hosts.allow 中允许 mountd：

```
rpcbind : ALL : allow
mountd : ALL : allow 
```

这最终让我不仅可以执行 rpcinfo，还可以执行 showmount 和 mount。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-18T14:45:12.550

在 Debian Squeeze 到 Wheezy 升级中，到目前为止，这里介绍的解决方案都没有对我有用。

在我的情况下，我唯一要做的就是用“rpcbind”替换 /etc/hosts.allow 中所有出现的“portmapper”（或“portmap”，不再确定）。就这些。（否则 ypbind 无法通过 localhost 连接到 rpcbind。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-13T20:30:51.430

我认为值得一提的是，如果您看到以下错误：

```
0-rpc-service: Could not register with portmap 
```

它可能与 hosts.allow 和 hosts.deny 文件集有关，并且在 hosts.allow 文件中缺少对 localhost 的权限。

我在使用 GlusterFS 设置 NFS 时遇到了这种问题。

在我的 /etc/hosts.allow 文件中，我添加了：

```
ALL: 127.0.0.1 : ALLOW 
```

使用 portmap 注册服务的问题消失了，一切正常。

注意：使用 GlusterFS 记得重启 Glusterd 服务

```
/etc/init.d/glusterd restart 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-06T14:12:12.727

如果使用 iptables 并且它阻止 localhost 的 UDP 连接，也会发生这种情况。今天碰到这个。停止 iptables，连接开始工作。

您将需要找出破坏它的规则。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-28T17:29:23.833

I was receiving an error like so on rhel7:

```
ypserv: Cannot register service: RPC: Authentication error; why = Client credential too weak 
```

when starting ypbind. I tried everything including the `'-i'` to `rpcbind` above. In the end as XTaran mentioned modifying `/etc/hosts`. allow adding this line:

```
rpcbind: 127.0.0.1 
```

worked for me.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-06T00:32:23.077

FWIW，这是一个“替代”解决方案。

1.  检查 /etc/hosts.deny 文件。它应该这样说：
2.  rpcbind mountd nfsd statd lockd rquotad : ALL
3.  确保此文件中的最后一行是空白的。
4.  检查 /etc/hosts.allow 文件。它应该这样说：
5.  rpcbind mountd nfsd statd lockd rquotad：127.0.0.1 192.168.1.100
6.  确保此文件中的最后一行是空白的。

“技巧”（对我来说）是文件中的最后一行空白。

# ocaml - OCaml“其他”语法错误

> ID：13111913
> 
> 赞同：2
> 
> 时间：2012-10-28T18:52:14.530
> 
> 标签：ocaml, syntax-error, if-statement

我是第一次学习 OCaml，我遇到了一个非常模糊的“语法错误”的问题。像这样定义函数`generateboxes`时：

```
let rec generateboxes a b = 
    if a = (add1 b) then (force_newline ()); (print_sting "Done!")
    else if [1] = (Array.get finalarray a) then (populatebox
    (numbertoposition a) a); (generateboxes (add1 a) b)
    else (generateboxes (add1 a) b);; 
```

编译器给出错误消息：“语法错误”，它指向第一个`else`. 我的代码输出这样的消息有什么明显的错误吗？（我意识到代码脱离了上下文，但如果它是语法错误，那么它应该没关系）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T19:01:04.607

```
let rec generateboxes a b = 
    if a = add1 b then (force_newline (); print_sting "Done!")
    else if [1] = Array.get finalarray a then
      (populatebox (numbertoposition a) a; generateboxes (add1 a) b)
    else generateboxes (add1 a) b;; 
```

`then`如果一个或一个子句中有多个语句`else`，则需要将它们放在括号内。或者，您可以将`begin ... end`它们放在周围：

```
let rec generateboxes a b = 
    if a = add1 b
    then begin
      force_newline ();
      print_sting "Done!" end
    else if [1] = Array.get finalarray a
    then begin
      populatebox (numbertoposition a) a;
      generateboxes (add1 a) b end
    else generateboxes (add1 a) b;; 
```

（请注意，我还删除了一些不必要的括号以使代码更清晰。）

# wordpress - 向 Galleria 灯箱添加替代文字

> ID：13111914
> 
> 赞同：2
> 
> 时间：2012-10-28T18:52:21.770
> 
> 标签：wordpress, galleria

我在 WordPress 3.0（inFocus 3.0 主题）中使用[Galleria幻灯片。](http://galleria.io)目前，幻灯片中的每张幻灯片都有 2 个标题 - 标题和替代文本。wp 简码是：`[image title="My title" alt="My alt text"]http://www.mywebsite.com/wp-content/uploads/myimage.jpg[/image]`

单击图像会启动一个灯箱，其中显示图像标题（左下）和幻灯片计数（右下）。

如果可能的话，我希望能够显示标题后跟 alt 文本，例如。“我的图片标题：我的替代文字”。我知道我需要定位的 div 容器是`.galleria-lightbox-info`，其中是`.galleria-lightbox-title`. 我想我需要在其中添加另一个名为`.galleria-lightbox-alt`? 我似乎在我的 wordpress 文件夹中的任何地方都找不到与 Galleria 相关的任何文件（php、js、css 等）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-09T17:01:51.013

我知道您在 2012 年发布了此内容，但这是您问题的答案。我必须让这个工作符合 WCAG 的要求。我实际上使用的是 ASP.NET，所以**<%=Name%>**是占位符。只需将其添加到您使用 Galleria 工具的页面。我在结束正文标记之前编写了脚本。最大的收获是 setTimeout，因为您必须给灯箱时间来加载。

```
 Galleria.ready(function () {
        this.bind('image', function (e) {
        // UNCOMMIT FOR TESTING // console.log(this); // the gallery scope                        
        $('.galleria-image').find('img').attr('alt', '<%=Name%>');
        });
        this.bind('thumbnail', function (e) {
        // add alt to thumbnails image
        e.thumbTarget.alt = e.galleriaData.original.alt + " ThumbNail(s)";
        });                                    
        $('.galleria-image').mouseup(function () {
           setTimeout(function () {
          $('div.galleria-lightbox-image').children().children().attr('alt', '<%=Name%>');
          }, 5000);
        });                                   
        $('.galleria-lightbox-prevholder').click(function () {
        $('div.galleria-lightbox-image').children().children().attr('alt', '<%=Name%>');
     });
     $('.galleria-lightbox-nextholder').click(function () {
     $('div.galleria-lightbox-image').children().children().attr('alt', '<%=Name%>');
     });
 }); 
```

# java - 配置 cygwin 以构建 ndk 项目

> ID：13111919
> 
> 赞同：1
> 
> 时间：2012-10-28T18:52:38.853
> 
> 标签：java, android, android-ndk, native-code

我在互联网上搜索了很多，我正在尝试构建我的 ndk 文件，然后将它们包含到我在 Eclipse 上的 Android 项目中。在互联网上搜索后，我知道构建ndk项目需要cygwin。我已经为 cygwin 下载了必要的文件，但是下一步我是空白的。即如何在cygwin终端上构建我的ndk文件然后将它们包含到我的eclipse android项目中的步骤。请帮助我完成这些步骤。将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:57:01.457

如果您使用的是最新的 ndk 版本，则不需要 cygwin。只需运行`ndk-build.cmd`ndk 附带的 windows 命令文件即可。从 ndk 第 8 版开始就是这样。

研究 android-ndk/docs 子目录中的 OVERVIEW.html。android-ndk 中还有一个“samples”子目录，在那里研究 hello-jni 并尝试构建和运行它。还有一本书[“Android NDK Beginner's Guide”](http://wowebook.be/book/android-ndk-beginners-guide/#)在网上查找它基本上涵盖了所有内容

# ios - 使用我的应用程序向 Passbook 添加通行证崩溃

> ID：13111923
> 
> 赞同：1
> 
> 时间：2012-10-28T18:53:07.807
> 
> 标签：ios, objective-c, iphone, passbook

我目前正在开发一个应用程序，现在我正在测试一个简单的实现，以便在用户 iPhone 上通过 Passbook 测试。这是按下 UIButton 时调用的方法：

```
- (IBAction)addTicketToPassbook {
NSArray *passFiles = [[NSFileManager defaultManager]
                      contentsOfDirectoryAtPath:@"/Users/Adam/Developer/Eagan High School/Eagan High School/" error:nil];
NSString *passName = @"";
    NSError* error = nil;

    for (NSString *pass in passFiles) {
        if([pass hasSuffix:@".pkpass"])
            passName = pass;
}

    passName = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:passName];
    NSData *passData = [NSData dataWithContentsOfFile:passName];
    PKPass *pass = [[PKPass alloc] initWithData:passData error:&error];
    if (error != nil) {
        [[[UIAlertView alloc] initWithTitle:@"Passes error" message:[error localizedDescription] delegate:nil cancelButtonTitle:@"Ooops" otherButtonTitles: nil] show];
        return;
    }

    PKAddPassesViewController *addController = [[PKAddPassesViewController alloc] initWithPass:pass];
    addController.delegate = self;
    [self presentViewController:addController animated:YES completion:nil];
} 
```

我一直在使用 NSLog 来记录错误，每次在执行`PKPass *pass = [[PKPass alloc] initWithData:passData error:&error];`. 任何提示将不胜感激。谢谢！

这是崩溃日志：

```
Incident Identifier: CDEB9D43-753F-406A-A258-E4CA8EF0EA61
CrashReporter Key:   a7451fa84770c22b3118e1fdd759c920e445a7c9
Hardware Model:      iPhone4,1
Process:         Eagan High School [5121]
Path:            /var/mobile/Applications/09FB5826-1122-4774-8C1A-F38FD8B6A84B/Eagan High School.app/Eagan High School
Identifier:      Eagan High School
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-10-28 13:03:56.586 -0500
OS Version:      iOS 6.0 (10A403)
Report Version:  104

Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x0000000000000001, 0x000000000000defe
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   CoreFoundation                  0x34f1cd24 CFRetain + 8
1   CoreFoundation                  0x34f9eb08 CFReadStreamCreateWithData + 12
2   Foundation                      0x32a9ba96 -[NSCFInputStream initWithData:] + 14
3   Foundation                      0x32a9c0c6 +[NSInputStream(NSInputStream) inputStreamWithData:] + 38
4   PassKit                         0x38f6bffc -[PKLocalCard initWithData:error:] + 244
5   PassKit                         0x38f6dcd4 -[PKIngestibleCard initWithData:error:] + 56
6   Eagan High School               0x000b5ec0 0xb4000 + 7872
7   UIKit                           0x363990a8 -[UIApplication sendAction:to:from:forEvent:] + 68
8   UIKit                           0x3639905a -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 26
9   UIKit                           0x36399038 -[UIControl sendAction:to:forEvent:] + 40
10  UIKit                           0x363988ee -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 498
11  UIKit                           0x36398de4 -[UIControl touchesEnded:withEvent:] + 484
12  UIKit                           0x362c15f4 -[UIWindow _sendTouchesForEvent:] + 520
13  UIKit                           0x362ae804 -[UIApplication sendEvent:] + 376
14  UIKit                           0x362ae11e _UIApplicationHandleEvent + 6150
15  GraphicsServices                0x354615a0 _PurpleEventCallback + 588
16  GraphicsServices                0x354611ce PurpleEventCallback + 30
17  CoreFoundation                  0x34fb2170 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
18  CoreFoundation                  0x34fb2112 __CFRunLoopDoSource1 + 134
19  CoreFoundation                  0x34fb0f94 __CFRunLoopRun + 1380
20  CoreFoundation                  0x34f23eb8 CFRunLoopRunSpecific + 352
21  CoreFoundation                  0x34f23d44 CFRunLoopRunInMode + 100
22  GraphicsServices                0x354602e6 GSEventRunModal + 70
23  UIKit                           0x363022fc UIApplicationMain + 1116
24  Eagan High School               0x000b5984 0xb4000 + 6532
25  libdyld.dylib                   0x39a0eb1c start + 0

Thread 1:
0   libsystem_kernel.dylib          0x30be1d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x38d65cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x38d65a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x38d658a0 start_wqthread + 4

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x30bd1648 kevent64 + 24
1   libdispatch.dylib               0x33cd4974 _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x33cd4654 _dispatch_mgr_thread$VARIANT$mp + 32

Thread 3:
0   libsystem_kernel.dylib          0x30be1d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x38d65cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x38d65a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x38d658a0 start_wqthread + 4

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x30bd0eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x30bd1048 mach_msg + 36
2   CoreFoundation                  0x34fb2040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x34fb0d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x34f23eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x34f23d44 CFRunLoopRunInMode + 100
6   WebCore                         0x344c7a70 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x38d7030e _pthread_start + 306
8   libsystem_c.dylib               0x38d701d4 thread_start + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x1e079390
    r4: 0x00000000    r5: 0x00000000      r6: 0x00000000      r7: 0x2fd4b658
    r8: 0x1e065440    r9: 0x1e000000     r10: 0x00000000     r11: 0x00000001
    ip: 0x3a6afb80    sp: 0x2fd4b654      lr: 0x34f9eb0d      pc: 0x34f1cd24
  cpsr: 0x60000030

Binary Images:
   0xb4000 -    0xb6fff +Eagan High School armv7  <496f03ab87d530e59db84940383c8c07> /var/mobile/Applications/09FB5826-1122-4774-8C1A-F38FD8B6A84B/Eagan High School.app/Eagan High School
 0x294c000 -  0x294dfff  GeoServices armv7  <200ee83ae0183f27814f9a433da23176> /System/Library/AccessibilityBundles/GeoServices.axbundle/GeoServices
 0x2955000 -  0x2959fff  AccessibilitySettingsLoader armv7  <31a0fd14f9b43911a96880416fd4832f> /System/Library/AccessibilityBundles/AccessibilitySettingsLoader.bundle/AccessibilitySettingsLoader
 0x2960000 -  0x29bbfff  UIKit armv7  <937f649f950237fc86272e0f34adf57d> /System/Library/AccessibilityBundles/UIKit.axbundle/UIKit
 0x2a19000 -  0x2a1dfff  PassKitFramework armv7  <5e1f3ec3b89e3a67b7d95abdc13b2988> /System/Library/AccessibilityBundles/PassKitFramework.axbundle/PassKitFramework
 0x3f81000 -  0x3f82fff  AXExtraExtras armv7  <af2d3f1b110c3865b609169be8672a79> /System/Library/AccessibilityBundles/AXExtraExtras.axbundle/AXExtraExtras
0x2fe94000 - 0x2feb4fff  dyld armv7  <75594988728831d98e1f7c4c7b7ca29d> /usr/lib/dyld
0x30bd0000 - 0x30be6fff  libsystem_kernel.dylib armv7  <f167dacec44b3a86a8eee73400ff7a83> /usr/lib/system/libsystem_kernel.dylib
0x30c86000 - 0x30c9bfff  libresolv.9.dylib armv7  <e79b59a3406f34d9b37f8085955115ce> /usr/lib/libresolv.9.dylib
0x30e4e000 - 0x30f13fff  CFNetwork armv7  <3e973794a4d13428bb974edcb2027139> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x30f58000 - 0x310a1fff  libicucore.A.dylib armv7  <0253932c1b9038a0849ef73c38e076ca> /usr/lib/libicucore.A.dylib
0x310a2000 - 0x310a3fff  CoreSurface armv7  <b3f9d4e8dd803a48b88c58a0663d92a3> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x31343000 - 0x31368fff  OpenCL armv7  <f7706501012430fc94ed99006419fba9> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x313d5000 - 0x313d8fff  MobileInstallation armv7  <e6b6ae9d4f5f3831a40fcc370afc1429> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x31504000 - 0x31578fff  ProofReader armv7  <cc89a352199a393ba0e46af69e670ef9> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x3158e000 - 0x3159bfff  TelephonyUtilities armv7  <0e07c7484ca63c189fd19790eb48bb28> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities
0x3168d000 - 0x31742fff  CoreImage armv7  <ba744c4f6a1c3c0598de9d429022093a> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x31827000 - 0x31873fff  IMFoundation armv7  <b1a5542b977e3ae683f40ee5755d5b32> /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation
0x31877000 - 0x31953fff  WebKit armv7  <73fa195f63bc32c29060ac0fecabdca6> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x31b95000 - 0x31b96fff  libdnsinfo.dylib armv7  <6c912cedc1e938ad914dfce91a529b68> /usr/lib/system/libdnsinfo.dylib
0x31ba2000 - 0x31ba6fff  libGFXShared.dylib armv7  <6a8f59f89218372d9f24c4193a179008> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x32038000 - 0x32044fff  libbsm.0.dylib armv7  <e98708fbfa683df2a91d45dc765071a7> /usr/lib/libbsm.0.dylib
0x3205f000 - 0x3205ffff  Accelerate armv7  <22bee3e96cbc3538bfc50ca5be618cc0> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x320c1000 - 0x320c1fff  vecLib armv7  <66204595f7653ef29e5e26cb8629177a> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x320c6000 - 0x320ccfff  libcommonCrypto.dylib armv7  <690aaa493b5c3f9582499f174adf4964> /usr/lib/system/libcommonCrypto.dylib
0x320cd000 - 0x32118fff  libstdc++.6.dylib armv7  <55a7612b28c43cfcad7089b688591b80> /usr/lib/libstdc++.6.dylib
0x32136000 - 0x32149fff  libc++abi.dylib armv7  <c5a5f03138353747b539e620ef2bb5c0> /usr/lib/libc++abi.dylib
0x32333000 - 0x32395fff  CoreText armv7  <4a0bece315e9316fa1aa1b5923740f55> /System/Library/Frameworks/CoreText.framework/CoreText
0x323a3000 - 0x323a3fff  liblangid.dylib armv7  <a04b639c18593885bd81bfa623a6f07c> /usr/lib/liblangid.dylib
0x323bc000 - 0x323befff  TCC armv7  <f641dd0500fa3f0087d93da665ea84b8> /System/Library/PrivateFrameworks/TCC.framework/TCC
0x323bf000 - 0x323c5fff  MobileKeyBag armv7  <a81d768a49cf37a1a111594d39cea3fe> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x323c6000 - 0x323c6fff  libCVMSPluginSupport.dylib armv7  <1fd63e8305ab3ca190b1ef6ab2555f9d> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x323c7000 - 0x323c9fff  libcompiler_rt.dylib armv7  <7add7c91a2673641b0c5f0433a203da6> /usr/lib/system/libcompiler_rt.dylib
0x323ca000 - 0x323d5fff  AXRuntime armv7  <5aaab62509c73da4a47db8f0c3273a13> /System/Library/PrivateFrameworks/AXRuntime.framework/AXRuntime
0x32406000 - 0x3240bfff  IOMobileFramebuffer armv7  <3a351ca1d4ae3146a787f3e13564294b> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x324de000 - 0x324e0fff  libCoreVMClient.dylib armv7  <e57152bacb36350e8a023e0c1b540a0c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x3263a000 - 0x3263afff  libkeymgr.dylib armv7  <8a2e3a8fdf9335e2867a33e2d1a9baf8> /usr/lib/system/libkeymgr.dylib
0x326cd000 - 0x326defff  SpringBoardServices armv7  <22255260ec6436d19176696422441c40> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x326e1000 - 0x32707fff  libtidy.A.dylib armv7  <134c41c587fb33dca014bd525f68a0c7> /usr/lib/libtidy.A.dylib
0x32789000 - 0x3278cfff  libcache.dylib armv7  <e08b913e17753180b91728a8bd5dda7b> /usr/lib/system/libcache.dylib
0x3278d000 - 0x32794fff  liblockdown.dylib armv7  <257ecb171a363e4298a63f72d7fffea2> /usr/lib/liblockdown.dylib
0x32795000 - 0x32842fff  libxml2.2.dylib armv7  <ef245c0afc113f54b6f30921671edab2> /usr/lib/libxml2.2.dylib
0x328b3000 - 0x329a1fff  GeoServices armv7  <6af26ce81030330b97122ba8c1deaaa2> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x329ef000 - 0x32bb2fff  Foundation armv7  <2e1ac190c4f837e2a1059043dd7b1c63> /System/Library/Frameworks/Foundation.framework/Foundation
0x32bbb000 - 0x32c14fff  libvDSP.dylib armv7  <ad4c53081a263f0d96f63b9a80f2ae91> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x32c15000 - 0x32d2afff  QuartzCore armv7  <d96571a6986c3012b315cb860f4d65ca> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x32e91000 - 0x32e9dfff  GenerationalStorage armv7  <74d50f4c8d243a35ad3ae89d85f2793a> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x32fe9000 - 0x33024fff  AppSupport armv7  <74ed50d2f7d23ce696b029dd817749c0> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x33250000 - 0x3326efff  WebBookmarks armv7  <012ed1a1f54a3d6d836e2836781d4f73> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x332e5000 - 0x333e3fff  libobjc.A.dylib armv7  <5224e803eca737a4b2c6451d136b3d28> /usr/lib/libobjc.A.dylib
0x33c96000 - 0x33ccbfff  libcorecrypto.dylib armv7  <ebd023957d853fa8bd35309592e92dac> /usr/lib/system/libcorecrypto.dylib
0x33ccc000 - 0x33ce9fff  libdispatch.dylib armv7  <4abccf75caf33fa5a0c6037b2e1c5f41> /usr/lib/system/libdispatch.dylib
0x33e2f000 - 0x33e53fff  Bom armv7  <c76b4156e0463ecb922608d44c126d86> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x340a0000 - 0x340a5fff  liblaunch.dylib armv7  <021ff140d6003f3281dfa29b79fa9e6e> /usr/lib/system/liblaunch.dylib
0x340bd000 - 0x34112fff  CoreTelephony armv7  <54708e241c5c3e2297c2fca0d685497d> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x34474000 - 0x34474fff  libsystem_blocks.dylib armv7  <993c9bfe8bf031548b9ddba63cc17015> /usr/lib/system/libsystem_blocks.dylib
0x344bd000 - 0x34decfff  WebCore armv7  <cd34aedf72653d1dbef6b14fdfd0c053> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x34ded000 - 0x34e2bfff  VideoToolbox armv7  <bfc75ceef01e366e8335949abf037d4b> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
0x34e4d000 - 0x34e6dfff  libxslt.1.dylib armv7  <7f6f63b31f333c41952f685fdd54a6cb> /usr/lib/libxslt.1.dylib
0x34f1b000 - 0x3504dfff  CoreFoundation armv7  <e30fc309df7b3c9f8ac57f0f6047d65f> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x35127000 - 0x35214fff  libiconv.2.dylib armv7  <faa5abb937e3306ab87c7f7c38315839> /usr/lib/libiconv.2.dylib
0x3521a000 - 0x35255fff  libCGFreetype.A.dylib armv7  <7a68e65e523030faa9d91478e939bc00> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x352f5000 - 0x35301fff  libMobileGestalt.dylib armv7  <0338ce49444332ec88cfc45c624bb39b> /usr/lib/libMobileGestalt.dylib
0x35348000 - 0x35357fff  StoreKit armv7  <906d82194db23f03b584859ca0a1ed93> /System/Library/Frameworks/StoreKit.framework/StoreKit
0x3545b000 - 0x35466fff  GraphicsServices armv7  <c5879083e8693aba827c78a32abe2391> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x35525000 - 0x356fdfff  ImageIO armv7  <fdfa8aa6307235b29435e5c8f6bc9819> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x35715000 - 0x3576bfff  CoreAudio armv7  <a3a2eb3a29443b42a23aa8ecb1232846> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x35847000 - 0x35853fff  libz.1.dylib armv7  <a3bba3842596315a81aa171a8bbda7b5> /usr/lib/libz.1.dylib
0x35854000 - 0x3586ffff  UIAccessibility armv7  <d15ad1db86f33fcb8472379c220a0597> /System/Library/PrivateFrameworks/UIAccessibility.framework/UIAccessibility
0x358b1000 - 0x358cefff  PersistentConnection armv7  <8e4d21f987d4334e927222c28ff1130b> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x358cf000 - 0x3590efff  SystemConfiguration armv7  <44d84d23d10f344c90b4d9e9611ec976> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x35965000 - 0x35968fff  AggregateDictionary armv7  <20bde7d58a573f2fbd5d6458d4e50ef8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x359b2000 - 0x359c7fff  libmis.dylib armv7  <3afeeea531013420af75315d8d6dd332> /usr/lib/libmis.dylib
0x359ca000 - 0x359cbfff  DataMigration armv7  <25f8874067393208acc083124bc3eb86> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x35a87000 - 0x35a8ffff  ProtocolBuffer armv7  <359ccc7700c93d58adbbd74ecfda80d9> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x35a90000 - 0x35aa8fff  libsystem_info.dylib armv7  <be3d5625aed733ffb2d53400655fe110> /usr/lib/system/libsystem_info.dylib
0x35aaa000 - 0x35aaafff  libSystem.B.dylib armv7  <f2cad3bd15f63f448a9c5be732c65819> /usr/lib/libSystem.B.dylib
0x35c20000 - 0x35c79fff  MobileCoreServices armv7  <d831f1f9285535acac5035a29d84aaaf> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x35d5b000 - 0x35dfbfff  UIFoundation armv7  <795a2f216cc3379c95eb645c633cc527> /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation
0x35dfc000 - 0x35e08fff  AccountSettings armv7  <0b7524e9a8ef36bf9e9f6a5c445478af> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x35e5e000 - 0x35e74fff  libCRFSuite.dylib armv7  <9b3fd56781103f209be2c43e48c1efc9> /usr/lib/libCRFSuite.dylib
0x35eef000 - 0x35f2cfff  libGLImage.dylib armv7  <7db25f3d55b93f31868e37326fba1e57> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x36070000 - 0x36074fff  IOSurface armv7  <1f598a3806073bdaa906c51dccc9429e> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x3608e000 - 0x36094fff  libAccessibility.dylib armv7  <9e8bfe02e370375ea8439ab895528982> /usr/lib/libAccessibility.dylib
0x360a8000 - 0x360abfff  MobileSystemServices armv7  <6edd9c74c5a73c33809152446abe1538> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
0x362ab000 - 0x367fefff  UIKit armv7  <98789fe7c21b3fe0bf5c0bb36648147f> /System/Library/Frameworks/UIKit.framework/UIKit
0x36869000 - 0x3686afff  libremovefile.dylib armv7  <6a0dd04f0710329b9c1722db2235f5c3> /usr/lib/system/libremovefile.dylib
0x3686b000 - 0x3687afff  CoreVideo armv7  <092f3aa965803a1aaea69af2ac5143f5> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x3689a000 - 0x368c8fff  Security armv7  <be87724ccad837479efd45ca9f2c6b2c> /System/Library/Frameworks/Security.framework/Security
0x368ce000 - 0x36a83fff  CoreData armv7  <a42aa4f0f01833c390bc8c6c394dda1c> /System/Library/Frameworks/CoreData.framework/CoreData
0x36a8c000 - 0x36a93fff  MobileIcons armv7  <c7b5eb7ec2283f0b9611448ddccdd352> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x36a94000 - 0x36b6cfff  StoreServices armv7  <9da3466c9cf13402a9f0412065f0ada7> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x36b6d000 - 0x36bc5fff  ManagedConfiguration armv7  <9d006173bfcc3001b45c44b8e78833ed> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x36bf0000 - 0x36bf9fff  libbz2.1.0.dylib armv7  <5258dce78afc3fd7934a5674b92ad785> /usr/lib/libbz2.1.0.dylib
0x36bfa000 - 0x36c44fff  libc++.1.dylib armv7  <a361a382693032b9bdfb2860033b3024> /usr/lib/libc++.1.dylib
0x36c45000 - 0x36c4cfff  libsystem_notify.dylib armv7  <6e39f8511ecc3c3489829714eb6fde12> /usr/lib/system/libsystem_notify.dylib
0x36d34000 - 0x36d3afff  libsystem_dnssd.dylib armv7  <6c1c1aaf9a3537d7ada4b519d14da7ab> /usr/lib/system/libsystem_dnssd.dylib
0x36d6c000 - 0x36ff2fff  AudioToolbox armv7  <6a4804d0e35e362dbad6f047c25227ca> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x36ff3000 - 0x36ff3fff  libunwind.dylib armv7  <85e7546accc23ae1a973da4758512b7f> /usr/lib/system/libunwind.dylib
0x3714f000 - 0x37150fff  libsystem_sandbox.dylib armv7  <46cd200d99323aebbf6d81e5fb16424f> /usr/lib/system/libsystem_sandbox.dylib
0x371c2000 - 0x371d3fff  libvMisc.dylib armv7  <a3d025234d1a3880a0e5f87879633ee0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x37263000 - 0x37264fff  IOAccelerator armv7  <de8af6be681832008d180d7424d55f0d> /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator
0x37265000 - 0x373a3fff  vImage armv7  <a7fd7fcd7041356db2ca297402ab6e8c> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x37881000 - 0x378aefff  MobileAsset armv7  <23e6b8ea85dd3dea84d8c295b4777753> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
0x378ed000 - 0x378f4fff  OpenGLES armv7  <e035b741746c316dba8f1e59a568bf17> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x37e96000 - 0x37e9bfff  CrashReporterSupport armv7  <7bde3532f2953f3894eb725379575926> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x37f2a000 - 0x37f31fff  XPCObjects armv7  <5bc4f7282e9d3945a6c1885217670667> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x37f32000 - 0x37f47fff  DataDetectorsCore armv7  <f15e924939fa39bbb9f57391824f8ce9> /System/Library/PrivateFrameworks/DataDetectorsCore.framework/DataDetectorsCore
0x3815d000 - 0x38174fff  BackBoardServices armv7  <e3eb5191f83339a1abad4c332c1b9d83> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices
0x38317000 - 0x38332fff  libRIP.A.dylib armv7  <6e5f3b4c18e137e0a464fe13095b7dab> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x3835c000 - 0x38375fff  DictionaryServices armv7  <e1f8d258d02c344cb0d17cec31818d3f> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x38380000 - 0x38385fff  CommonUtilities armv7  <cb484bdaf5003e4baa13f83bafff62a9> /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities
0x383fd000 - 0x38810fff  FaceCoreLight armv7  <0cb7a12beb3d32c1abd1834be8328b7c> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x38811000 - 0x38896fff  libsqlite3.dylib armv7  <759ca29f533a33e88a81fddc3364bf19> /usr/lib/libsqlite3.dylib
0x38897000 - 0x388b8fff  AccessibilityUtilities armv7  <f077ed789cf53361b998f2fce70b089c> /System/Library/PrivateFrameworks/AccessibilityUtilities.framework/AccessibilityUtilities
0x388f2000 - 0x3893bfff  IOKit armv7  <c4786e65ac913839b1bb3b85a9c951fa> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x38d49000 - 0x38d5efff  libxpc.dylib armv7  <9fbb123276823c2383fc34b7a55404d7> /usr/lib/system/libxpc.dylib
0x38d5f000 - 0x38de5fff  libsystem_c.dylib armv7  <d45dc8901531343caf9b7e703d3eba50> /usr/lib/system/libsystem_c.dylib
0x38e29000 - 0x38e45fff  libsystem_m.dylib armv7  <7b2a25c750063de480f6a691f716b9d7> /usr/lib/system/libsystem_m.dylib
0x38f53000 - 0x38fa6fff  PassKit armv7  <c0bb9c8aa86430bfbe848843a2443af5> /System/Library/Frameworks/PassKit.framework/PassKit
0x39116000 - 0x3911bfff  libcopyfile.dylib armv7  <15aa2c3c8d523273913d4fc6717d3b7c> /usr/lib/system/libcopyfile.dylib
0x3911c000 - 0x39254fff  CoreGraphics armv7  <903960bfcfe93adb943752851f88491e> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x39391000 - 0x39537fff  JavaScriptCore armv7  <6b14c224c0e0306aa9084679ec6a99d2> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x3953e000 - 0x39596fff  CoreLocation armv7  <3235bde1608331bebc291891405896c6> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x39657000 - 0x3990cfff  libLAPACK.dylib armv7  <dd6f3958c3d536d6be90836682d2ffee> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x3990d000 - 0x3999afff  CorePDF armv7  <61e2baa344333bae9096a10de62543ff> /System/Library/PrivateFrameworks/CorePDF.framework/CorePDF
0x399ba000 - 0x399c3fff  AssetsLibraryServices armv7  <e51cbfefefbc30b6b47d99739123033e> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x399c4000 - 0x399ecfff  PrintKit armv7  <a8ef6136b9773d42ac20f7eb54279039> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x39a0d000 - 0x39a0efff  libdyld.dylib armv7  <3a149b4730663b1ea84e4a0a68ccc689> /usr/lib/system/libdyld.dylib
0x39a8d000 - 0x39a9bfff  libsystem_network.dylib armv7  <d0fb0eda6cb53a4da859d598c59e7522> /usr/lib/system/libsystem_network.dylib
0x39a9c000 - 0x39a9ffff  libmacho.dylib armv7  <2a9fe0b48f473d0f8fe2bf076cd12753> /usr/lib/system/libmacho.dylib
0x39c9c000 - 0x39d7ffff  libBLAS.dylib armv7  <56d8e00447133cd89457deec007327cb> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x39d80000 - 0x39de5fff  CoreMedia armv7  <d227864b757e3a7ea5d7d96dcbb948fe> /System/Library/Frameworks/CoreMedia.framework/CoreMedia 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:16:46.960

我想它可以帮助你

```
 NSString* passFile =[[NSBundle mainBundle] pathForResource:@"pass" ofType:@"pkpass"];

     //3
     NSData *passData = [NSData dataWithContentsOfFile:passFile];

     //4
     NSError* erro = nil;
     PKPass *newPass = [[PKPass alloc] initWithData:passData
                                              error:nil];
     //5
     if (erro!=nil) {
         [[[UIAlertView alloc] initWithTitle:@"Passes error"
                                     message:[error
                                              localizedDescription]
                                    delegate:nil
                           cancelButtonTitle:@"Ooops"
                           otherButtonTitles: nil] show];
         return;
     }

     PKAddPassesViewController *addPassVC = [[PKAddPassesViewController alloc] initWithPass:newPass];
     addPassVC.delegate = self;
     addPassVC.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
     [self presentViewController:addPassVC animated:YES completion:nil]; 
```

# php - 如何在每 3 个数字后用逗号格式化变量？

> ID：13111926
> 
> 赞同：-5
> 
> 时间：2012-10-28T18:53:29.117
> 
> 标签：php, variables, smarty

> **可能重复：**
> [如何用逗号重新](https://stackoverflow.com/questions/1508240/how-to-reformat-a-number-with-commas)
> [格式化数字 用千位分隔符格式化数字 Smarty PHP](https://stackoverflow.com/questions/3193710/formatting-numbers-with-thousands-separator-smarty-php)
> [用分组的千位格式化数字](https://stackoverflow.com/questions/10424120/format-a-number-with-grouped-thousands)

例如以下代码：-

```
{php}echo $youtube->_views;{/php} 
```

返回 2556789，我希望它的格式如下；2,556,789

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:57:23.127

[本主题](http://www.smarty.net/forums/viewtopic.php?t=8986)说明了如何做到这一点：

```
{$myvar|number_format:2:".":","} 
```

# jquery - 当第一个元素是 jquery 选择器时，以最短的方式定位子元素

> ID：13111927
> 
> 赞同：1
> 
> 时间：2012-10-28T18:53:36.153
> 
> 标签：jquery

这是一个非常琐碎的问题。

但我一直在使用 jQuery `.find`- 我想知道是否有另一种方法可以避免总是使用它？

请在下面查看我的 jQuery 和标记...

```
$jquerySelector = $('.parentElement'); 
```

--

```
<div class="parentElement">

     <div class="childElement">

          <div class="babyElement"></div>        

     </div>

     ...

</div> 
```

看，通常我必须这样做才能找到下一个元素......

```
$jquerySelector.find('.childElement > .babyElement') 
```

是否有一些如何编写这个 jquery 选择器的方法......

```
$jquerySelector > .childElement > .babyElement 
```

显然这不起作用，但你可以看到我想要达到的目的。

任何建议都会非常感谢。

# mysql - 通过索引获取列名并在mysql查询中使用

> ID：13111930
> 
> 赞同：2
> 
> 时间：2012-10-28T18:54:02.533
> 
> 标签：mysql, select, indexing, information-schema

我需要这样的查询：

```
SELECT * FROM table WHERE owner_field = 100 
```

但是“owner_field”在几个表中是不同的。我想使用索引来识别字段：

```
SELECT * FROM table WHERE (SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.STATISTICS WHERE TABLE_NAME=table AND INDEX_NAME='owner') = 100 
```

我究竟做错了什么？

**更新：**我想将此条件添加到 INSERT、UPDATE、DELETE 查询以进行安全控制（用户只能使用自己的数据执行任何操作）。

Mysql结构如下：

```
user_id     
post_id        post_author    = user_id
category_id    category_owner = user_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:50:16.830

我想我找到了一个更简单的方法：

```
CREATE VIEW indexed_posts AS 
SELECT * FROM posts, users
WHERE post_author = user_id 
WITH CHECK OPTION; 
```

然后我可以使用查询：

```
SELECT * FROM indexed_posts WHERE user_id = $_SESSION['user_id']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:12:37.863

这是一个糟糕的设计，而且很可能是不可能的。

为什么不使用[`VIEW`](http://dev.mysql.com/doc/refman/5.5/en/create-view.html)?

```
CREATE VIEW table1_ownerfield AS SELECT ownerfield_1 FROM table1;
CREATE VIEW table2_ownerfield AS SELECT ownerfield_2 FROM table2; 
```

然后将它们用作表格：

```
SELECT * FROM table1_ownerfield;
SELECT * FROM table2_ownerfield; 
```

对于您问题的第二部分，请查看 using [triggers](http://dev.mysql.com/doc/refman/5.5/en/triggers.html)。

编辑：

听起来您想要的视图类似于：

```
CREATE VIEW my_posts AS 
    SELECT * FROM posts WHERE post_owner = CURRENT_USER() 
    WITH CHECK OPTION;
CREATE VIEW my_categories AS 
    SELECT * FROM categories WHERE category_owner = CURRENT_USER() 
    WITH CHECK OPTION; 
```

你可能想做这样的事情：

创建表：

```
 CREATE TABLE user_connections (
     user_connection_id INT AUTO_INCREMENT PRIMARY KEY,
     mysql_connection_id INT,
     user_id INT
 ); 
```

然后当用户登录时，使用函数 mysql 连接 ID 填充此表[`CONNECTION_ID()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_connection-id)。

然后您可以创建如下视图：

```
CREATE VIEW my_posts AS 
    SELECT * FROM posts p JOIN user_connections uc 
    WHERE uc.mysql_connection_id = CONNECTION_ID() 
    AND p.post_user_id = uc.user_id 
    WITH CHECK OPTION;
CREATE VIEW my_categories AS 
    SELECT * FROM categories c JOIN user_connections uc 
    WHERE uc.mysql_connection_id = CONNECTION_ID() 
    AND c.category_user_id = uc.user_id 
    WITH CHECK OPTION; 
```

# expressionengine - 无法上传文件；文件上传模态显示CP Home

> ID：13111931
> 
> 赞同：12
> 
> 时间：2012-10-28T18:54:09.820
> 
> 标签：expressionengine

我因以前从未遇到过的文件奇怪的文件上传问题而感到头疼。出于某种原因，我无法通过文件管理器上传图像（无论是在文件管理器本身中，还是如果我使用“文件”字段类型通过自定义字段上传）。奇怪的是，如果我将文件直接添加到任何文件上传目录并同步文件，一切正常。

选择文件并点击“上传文件”（参见 01_choose_file.jpg）后，模式窗口会在 iframe 中显示 CP 主页（参见 02_upload_progress.jpg）。

有没有其他人看过这个？有谁知道我如何开始解决这个问题？

背景资料：

*   我正在运行 EECMS v2.5.2 - Build Date: 20120606 in MAMP（我在本地设置的 15 个站点中只有 2 个不工作）
*   我尝试使用最新版本的 Chrome、Chrome Canary、Safari 和 Firefox (OS X 10.7.5) 上传图像/文件
*   这个问题出现在我开始在本地开发的两个最新站点上，没有其他站点（本地或其他）

我做过的事情：

*   检查 Apache/PHP 错误日志；他们什么都不显示
*   确认文件上传路径和文件上传目录设置正确 - 我可以同步手动移动到各种文件上传目录的文件
*   权限很好；如果我手动将文件添加到上传目录，图像操作和缩略图创建工作正常
*   测试了我在本地开发的各种其他 2.5.2 安装，它们工作正常（这两个新站点上的设置与工作站点相同）
*   仅启用了少数原生加载项
*   “对上传的文件应用 XSS 过滤？” 设置是或否没有区别

非常感谢您的帮助！

我不能发布图片，所以这里是图片的链接：01_choose_file.jpg：[http ://expressionengine.com/?ACT=51&fid=105&aid=16264_Jiof3p0V1gfEEFrpC55G&board_id=5](http://expressionengine.com/?ACT=51&fid=105&aid=16264_Jiof3p0V1gfEEFrpC55G&board_id=5)

02_upload_progress.jpg：[http ://expressionengine.com/?ACT=51&fid=105&aid=16265_mjGH02xK2fIFZJI6kruP&board_id=5](http://expressionengine.com/?ACT=51&fid=105&aid=16265_mjGH02xK2fIFZJI6kruP&board_id=5)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T20:31:07.870

我已经解决了这个问题。我回去确认我禁用了所有第三方加载项，我忘记卸载“Quickee”扩展[http://devot-ee.com/add-ons/quickee](http://devot-ee.com/add-ons/quickee)。就目前而言，这似乎是罪魁祸首。

我已将错误提交给马特（开发人员），它应该很快就会被修补。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T19:09:45.830

ExpressionEngine 文件管理器向以下 URL 发送 AJAX POST 请求：

```
http://YOUR_ADMIN_CP_URL?S=0&D=cp&C=content_files_modal&M=upload_file 
```

您是否尝试过自己加载该 URL？你应该得到这样的页面

![文件上传网址](../Images/da323fc8652c709bb2f422c9eb2e4247.png)

但也许 EE 正试图发布到不同的 URL。您可以通过上传一个大文件来找到它，当它使用**Firebug**上传时，在列表底部的“**网络”选项卡中，您会发现 EE 发布到的 URL**
![萤火虫网络选项卡](../Images/11bbc428cb2339717cbebe9c3e4e176a.png)

# android - android api 10 布局中的图像设置

> ID：13111939
> 
> 赞同：0
> 
> 时间：2012-10-28T18:54:51.737
> 
> 标签：android, image

我在 Android API 14 中为一个应用程序实现了一个图形界面，我在其中将一个图形定位在某个位置。我正在使用以下代码来做到这一点：

```
fig1 = (ImageView) findViewById(R.id.fig1);
FrameLayout.LayoutParams lpsen1 = new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
lpsen1.topMargin = 10;
lpsen1.leftMargin = 10;
fig1.setLayoutParams(lpsen1); 
```

我在 .xml 布局文件中使用 FrameLayout，该图的代码如下：

```
<ImageView android:id="@+id/fig1" 
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:src="@drawable/yellowdot"
    android:adjustViewBounds="true"  
    android:maxWidth="10dp" 
    android:maxHeight="10dp"
    android:scaleType="fitCenter"
    android:layout_marginLeft="3dp" /> 
```

它工作正常，但现在我试图在 android API 10 中实现它，它没有将图形放置在我需要的位置。

有人能告诉我怎么做吗？

提前致谢。

格斯。

# java - 需要 Java 编程帮助的初学者！我不知道如何解决这个问题

> ID：13111942
> 
> 赞同：1
> 
> 时间：2012-10-28T18:55:00.210
> 
> 标签：java, loops

我是 Java 编程的初学者，我不知道如何解决这个问题：

“创建一个投资应用程序，计算如果每年以 7.5% 的复利计算，2,500 美元的投资需要多少年才能达到至少 5,000 美元的价值”

我尝试使用 for 循环和 do-while 循环来尝试解决问题，但它不起作用。请帮忙！

这是我到目前为止尝试一切之后所拥有的：

```
/*Investment.java
 *This program determines how many years it would take for $2500 to turn into $5000 if 
 *compounded at 7.5% annually.
 *Date: October 27th, 2012
 */

/**
 * The following application calculates how many years it will take for $2500 to
 * turn into $5000 if compounded at 7.5% annually.
 */

public class Investment {
    public static void main(String[] args) {
        final int MAX_AMOUNT = 5000;
        int investment = 2500;
        double interest = 0.075;
        double totalValue;

        do {
            totalValue = (investment + (investment * interest));
        } while (totalValue < MAX_AMOUNT);
        System.out.println(totalValue); 
    }   
} 
```

帮助将不胜感激！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:03:26.327

您可以使用基本数学在一行中完成此操作。

如果初始金额 (A) 以利率 (i) 每年计算 c 次，则未来获得值 (V) 的时间 (n)：n = [ln(V) - ln(A)] / [ ln( c+i) - ln(c)]

```
double getYearsToMature(double v, double i, int c, double a)
{
   return (Math.log(v) - Math.log(a))/(Math.log(c+i) - Math.log(c));
} 
```

因为它在问题中说“至少 5000 美元”，所以只需将其四舍五入并转换为 int..

```
int answer = (Integer) Math.round(getYearsToMature(...)); 
```

您还会收到一些关于从 long 转换为 Integer 的精度损失的编译器警告 - 使用 float 而不是 double，或者如果您的数字很小，则忽略警告

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:16:13.240

您可以通过搜索适当的计算公式（而不是使用循环）以更简单的方式解决此问题。在编程时，不仅要正确理解和使用语言结构（如循环和条件），而且要学习最好的“算法”以最佳方式完成它。

来自[http://www.csgnetwork.com/directcalccompinttrainer.html](http://www.csgnetwork.com/directcalccompinttrainer.html)（通过搜索找到的链接之一）：
如果初始投资 A 在 i 的利息每年复利 c 倍，则未来有 FV 的时间段 (n) ：

```
 ln(FV) - ln(A)
n = ------------------
    ln(c + i) - ln(c) 
```

注意：ln 是自然对数函数。

对于年复利，公式变为：

```
 ln(FV) - ln(A)
n = ------------------
    ln(1 + i) - ln(1) 
```

这是使用此公式的代码（它会给你确切的年数，包括一个分数，你可以调整/截断和打印）：

```
import java.lang.Math;

public class Investment {
    public static void main(String[] args) {
        final int MAX_AMOUNT = 5000;
        int investment = 2500;
        double interest = 0.075;
        double years;

        years = (log(MAX_AMOUNT) - log(investment)) / (log(1 + interest) - log(1))
        System.out.println(years); 
    }   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T18:59:31.067

这里的问题是您只是`investment + investment*interest`一遍又一遍地计算值，并将其存储在 totalValue 中。相反，你需要积累。它可能看起来像：

```
totalValue = investment;
do {
    totalValue = (totalValue + totalValue*interest);
}
while (totalValue < MAX_VALUE); 
```

这样，您就可以继续实际添加兴趣并累积它。

此外，正如评论的那样，您正在寻找循环循环的次数，而不仅仅是最后的值。因此，您需要通过每次递增计数器来计算循环重复的次数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T19:03:28.737

要迭代地执行此操作，请注意您需要计算*年*数，而不是投资金额。您的循环不会增加总值，它会重新计算它，就像每次循环的第一年一样。这将改为：

```
public class Investment {
    public static void main(String[] args) {
        final int MAX_AMOUNT = 5000;
        int investment = 2500;
        double interest = 0.075;
        double totalValue;

        int years = 0;
        do {
            totalValue += totalValue * interest;
            years++;
        } while (totalValue < MAX_AMOUNT);
        System.out.println(years);
    }
} 
```

但是，更好的方法是查看 N 年后以每年 I% 的回报率计算总价值的公式，每年复合：

> currentValue = 初始投资 * (1 + I) ^N

然后你可以求解 N，插入 2500`initialInvestment`和 7500 `currentValue`。这通常会为您提供 N 的分数值，然后您需要将其四舍五入以获得达到或超过目标金额所需的年数。您会发现[`Math.log()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#log%28double%29)(or [`Math.log10()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#log10%28double%29)) 函数对此很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T19:00:18.927

就像是：

```
double years = 0;
while(interest < totalvalue) {
    totalValue = investment*interest;
    years++;
} 
```

?

# c++ - 用于数据存储的静态类

> ID：13111944
> 
> 赞同：1
> 
> 时间：2012-10-28T18:55:05.857
> 
> 标签：c++, qt, class, static

我对 C++ 语言很陌生。我将它与 Qt 一起使用来创建跨平台用户界面。用户界面将使用相同的数据显示不同的图形和绘图。所以我想让我的数据存储在一个类（Data_Class）中，可以从所有其他类访问。在数据类中，我使用私有静态变量和公共静态方法（get/set）。

我不清楚的是如何从其他类访问数据类。换句话说，在我将它们写入 Class_A（到 Data_Class）之后，如何在 Class_B（来自 Data_Class）中获取数据值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:01:07.143

假设这是一个面向语法的问题：

```
class Data_Class {
public:
    static int a;
    static int GetA() const { return a; }
} 
```

在`ClassA`：

```
Data_Class::a;
Data_Class::GetA(); 
```

不要忘记添加`Data_Class` [静态成员定义](http://www.learncpp.com/cpp-tutorial/811-static-member-variables/)，例如`dataclass.cpp`：

```
static int Data_Class::a = 0; 
```

否则你会得到一个[`undefined reference`链接器错误](https://stackoverflow.com/questions/272900/c-undefined-reference-to-static-class-member)。

* * *

您也可以考虑使用[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)（*根据评论，单例是个坏主意，如果可能的话应该避免使用*），正如[Aubin 建议](https://stackoverflow.com/a/13111966/1149736)的那样，它将负责添加新的静态成员定义：

```
class Data_Class {
private:
    Data_Class();  // Prevents multiple instances

    int a;
    int b;

public:
    // Will initialize instance if needed
    static Data_Class &GetInstance(){
       static Data_Class instance;
       return instance;
    }

    int GetA() const {return a;}
}; 
```

用法：

```
Data_Class::GetInstance().GetA() 
```

* * *

或者根据 wiki使用更复杂但更灵活的[依赖注入：](http://en.wikipedia.org/wiki/Dependency_injection)

> 依赖注入是一种软件设计模式，它允许在运行时而不是编译时选择组件。例如，这可以用作动态加载插件或选择测试环境中的模拟对象与生产环境中的真实对象的简单方法。该软件设计模式通过了解目的地的需求，自动将相关元素（对象或值等）注入目的地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:57:45.540

鉴于这两个类声明：

```
class A {
   public:
      static int get_data();
};

class B {
   public:
      static void do_something();
}; 
```

您可以像这样从 B 访问 A 的方法：

```
void B::do_something()
{
     int the_data = A::get_data();
     // now do whatever you need to do with that data
}; 
```

# ruby-on-rails - 在 Active Record Reputation System 中获取模型的投票数

> ID：13111950
> 
> 赞同：1
> 
> 时间：2012-10-28T18:56:00.190
> 
> 标签：ruby-on-rails, activerecord

我正在使用带有 Rails 3.1.0 的 Active Record 信誉系统。我有一个模型，用户可以投票赞成或反对。如何确定特定模型实例被投票了多少次？我想说“x of y users up-voted this item”。我怎么得到你？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T00:45:07.797

如果我有一个具有声誉的模型并且我有一个模型实例 model_instance，那么看起来我可以通过以下方式获得总票数：

```
model_instance.evaluations.count 
```

# django - 姜戈。Apache 和 mod_wsgi 的问题

> ID：13111958
> 
> 赞同：0
> 
> 时间：2012-10-28T18:57:02.407
> 
> 标签：django, apache, mod-wsgi

我读过[这个](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/#how-to-use-django-with-apache-and-mod-wsgi)。所以，我安装了 mod_wsgi、virtualenv( `virtualenv ENV`)。（Django 1.4，ubuntu 服务器）

**/etc/apache2/sites-available/mysite**：

```
<VirtualHost *:80>
ServerName www.example.com
ServerAlias example.com
WSGIDaemonProcess example.com python-path=/home/user/cars/cars:/home/user/cars/ENV/lib/python2.7/site-packege
WSGIScriptAlias / /home/user/cars/cars/wsgi.py
<Directory /home/user/cars/cars>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory>
</VirtualHost>
WSGIPythonPath /home/user/cars/ENV/lib/python2.7/site-packeges 
```

我有**内部服务器错误**

在**/var/log/apache2/error.log 中：**

```
mod_wsgi (pid=3012): Exception occurred processing WSGI script '/home/user/cars/cars/wsgi.py'.
Traceback (most recent call last):
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 219, in __call__
self.load_middleware()
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 39, in load_middleware
for middleware_path in settings.MIDDLEWARE_CLASSES:
File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 184, in inner
self._setup()
File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 42, in _setup
self._wrapped = Settings(settings_module)
File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 95, in __init__
raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'cars.settings' (Is it on sys.path?): No module named cars.settings 
```

请帮帮我，我从来没有用 mod_wsgi 配置过 Django。这是我的第一个项目

***更新***：

```
Alias /favicon.ico /home/user/cars/files/static_content/favicon.ico 
AliasMatch ^/([^/]*\.css) /home/user/cars/files/static_content/css/$1 
Alias /static/ /home/user/cars/files/static_content/ 
<Directory /home/user/cars/files/static_content> 
 Order deny,allow
 Allow from all 
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:17:09.643

您缺少 WSGIProcessGroup 指令，因此未使用 WSGIDaemonProcess 及其 python-path 选项。正在使用 WSGIPythonPath 中设置的路径（仅用于嵌入式模式），并且您尚未在其中设置项目的位置。即使对于 WSGIDaemonProcess 的 python 路径，你的路径还是错误的。

尝试：

```
<VirtualHost *:80>
ServerName www.example.com
ServerAlias example.com
WSGIDaemonProcess example.com python-path=/home/user/cars:/home/user/cars/ENV/lib/python2.7/site-packages
WSGIProcessGroup example.com
WSGIScriptAlias / /home/user/cars/cars/wsgi.py
<Directory /home/user/cars/cars>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory>
</VirtualHost> 
```

注意 python-path 的变化和 WSGIProcessGroup 的添加。

# math - 通过转换为十进制来进行二进制数学运算是否“正确”？

> ID：13111961
> 
> 赞同：0
> 
> 时间：2012-10-28T18:57:28.910
> 
> 标签：math

进行二进制或十六进制运算以转换​​为十进制，执行运算，然后转换回原始数字系统是否被认为是正确的？

以上不建议吗？上面的内容是不是很讨厌？

背景是（第一年）编程开放大学课程，指南（没有更好的词来形容他）正在延迟我的询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:00:55.723

是的，它通常是正确的。数字就是数字，无论您如何将它们表示为文本。请注意，二进制、十进制和十六进制都是数字的*文本*表示。

# shell - 在 shell 中提高功率

> ID：13111967
> 
> 赞同：34
> 
> 时间：2012-10-28T18:58:03.240
> 
> 标签：shell, exponential

你如何提高*m*的*n 次方*？我到处寻找这个。我发现写作`m**n`应该有效，但事实并非如此。我正在使用`#!/bin/sh`.

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-28T19:01:31.860

我会试试计算器 bc。有关更多详细信息和示例，请参阅[http://www.basicallytech.com/blog/index.php?/archives/23-command-line-calculations-using-bc.html](http://www.basicallytech.com/blog/index.php?/archives/23-command-line-calculations-using-bc.html)。

例如。

```
$ echo '6^6' | bc 
```

给出 6 的 6 次方。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-02-11T21:15:49.033

使用 $n**$m 确实有效。也许您没有使用正确的语法来评估数学表达式。这是我在 Bash 上获得结果的方法：

```
echo $(($n**$m)) 
```

或者

```
echo $[$n**$m] 
```

这里的方括号并不像 if 语句中的测试评估器，所以你也可以在没有空格的情况下使用它们。我个人更喜欢带圆括号的前一种语法。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-29T11:32:53.857

using`bc`是一个优雅的解决方案。如果您想在 bash 中执行此操作：

```
$ n=7
$ m=5

$ for ((i=1, pow=n; i<m; i++)); do ((pow *= n)); done
$ echo $pow
16807

$ echo "$n^$m" | bc  # just to verify the answer
16807 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-28T19:03:23.560

您可能会使用直流电。这

```
dc -e "2 3 ^ p" 
```

产量

```
8 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-20T19:16:40.930

我的系统管理员没有安装`dc`，所以添加了其他正确答案，我敢打赌你没有想到这一点 -

```
a=2
b=3
python -c "print ($a**$b)"
>> 8 
```

在 bash/shell 中工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-30T10:54:11.727

```
#! /bin/bash
echo "Enter the number to be done"
n=2
read m
let P=( $n**$m )
echo "The answer is $p" 
```

* * *

## 回答

```
Enter the number to be done
3
The answer is 8 
```

# php - number_format() 的问题将数字与逗号相乘（格式化）

> ID：13111969
> 
> 赞同：-1
> 
> 时间：2012-10-28T18:58:11.820
> 
> 标签：php

我遇到了 number_format 的问题。这是我尝试使用它的方式：

当我尝试将它与数量相乘时，它返回 1。例如

```
1,200.00 * 2 
```

它返回 1。我怎样才能让它返回 2,400.00？

我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T19:00:33.857

您不能乘以格式化数字。在格式化最终结果*之前*，您应该进行所有计算。

# javascript - 如何将数组拆分为两个子集并使数组的子值之和尽可能相等

> ID：13111970
> 
> 赞同：6
> 
> 时间：2012-10-28T18:58:13.530
> 
> 标签：javascript, jquery, arrays, algorithm

我这里真的需要一个算法大师！所以问题是我得到了一个这样的数组：

```
[
    [870, 23]
    [970, 78]
    [110, 50]
] 
```

我想把它分开，使它看起来像这样：

```
// first array
[
    [970, 78]
]
// second array
[
    [870, 23]
    [110, 50]
] 
```

所以现在，为什么我也想让它看起来像这样？

因为我想保持子值的总和尽可能相等。所以`970`是关于`870 + 110`和`78`是关于`23 + 50`。所以在这种情况下这很容易，因为如果你只是拆分它们并且只查看第一个子值它已经是正确的但我想检查两者并保持它们尽可能相等，这样它也可以使用一个包含 100 个子数组的数组！所以如果有人能告诉我我可以用什么算法来编程，那就太好了！

秤：

*   数组中约 1000 个元素（子列表）
*   元素是最大 10^9 的整数

我正在寻找一个“足够接近的解决方案” -**它不一定是确切的最佳解决方案。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:42:01.683

首先，正如已经确定的那样 - 问题是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)，具有简化形式的分区问题。

[**减少**](http://en.wikipedia.org/wiki/Polynomial-time_reduction)： [给定一个分区问题](http://en.wikipedia.org/wiki/Partition_problem)
的实例，创建每个大小为 1 的列表。结果就是这个问题。

**从上面得出的结论**：
这个问题是NP-Hard，并且没有已知的多项式解决方案。

**其次**，由于问题的规模，任何指数和伪多项式解决方案都需要很长时间才能工作。

**第三，**它给我们留下了启发式算法和近似算法。

**我建议采用以下方法：**

1.  标准化子列表的比例，因此所有元素都将处于相同的比例（例如，所有元素都将被标准化为范围`[-1,1]`或所有元素都将被标准化为标准[正态分布](http://en.wikipedia.org/wiki/Normal_distribution)）。
2.  创建一个新列表，其中每个元素将是规范化列表中匹配子列表的总和。
3.  使用为子集和/分区问题开发的一些近似或启发式解决方案。

结果不会是最优的，但最优在这里确实无法实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T20:00:27.183

根据我从原始帖子下的讨论中收集到的信息，您不是在寻找单个分裂点，而是希望将所有对分布在两组之间，以使两组中的每一组的总和大致相等。

由于足够接近的解决方案是可以接受的，也许您可​​以尝试基于模拟退火的方法？（见[http://en.wikipedia.org/wiki/Simulated_annealing](http://en.wikipedia.org/wiki/Simulated_annealing)）

简而言之，这个想法是您首先将每对随机分配到左集或右集。接下来，您可以通过以下任一方式生成一个新状态

*   a) 将随机选择的对从左侧移动到右侧集合，
*   b) 将随机选择的对从右侧移到左侧集合，或
*   c) 两者都做。

接下来，确定这个新状态是比当前状态更好还是更差。如果更好，请使用它。如果情况更糟，则仅在被*接受概率函数*接受时才接受，该函数最初允许使用更差的状态，但随着时间的推移（或“温度降低”，在SA 条款）。经过大量的迭代（比如 100.000 次），你应该会得到一个不错的结果。

或者，多次重新运行该算法，因为它可能会陷入局部最优（尽管接受概率函数试图解决这个问题）。

这种方法的优点是易于实现，您可以自行决定希望它继续寻找更好的解决方案多长时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T19:39:17.010

我假设我们只是在数组中间寻找一个位置，将其分成第一部分和第二部分。

似乎线性算法可以做到这一点。JavaScript 中有类似的东西。

```
arrayLength = 2;
tolerance = 10;

// Initialize the two sums.
firstSum = [];
secondSum = [];
for (j = 0; j < arrayLength; j++)
{
   firstSum[j] = 0;
   secondSum[j] = 0;
   for (i = 0; i < arrays.length; i++)
   {
      secondSum += arrays[i][j];
   }
}

// Try splitting at every place in "arrays".
// Try to get the sums as close as possible.
for (i = 0; i < arrays.length; i++)
{
   goodEnough = true;
   for (j = 0; j < arrayLength; j++)
   {
      if (Math.abs(firstSum[j] - secondSum[j]) > tolerance)
         goodEnough = false;
   }

   if (goodEnough)
   {
      alert("split before index " + i);
      break;
   }

   // Update the sums for the new position.
   for (j = 0; j < arrayLength; j++)
   {
      firstSum[j] += arrays[i][j];
      secondSum[j] -= arrays[i][j];
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T06:39:13.697

感谢所有答案，蛮力攻击是个好主意，NP-Hard 也与此有关，但事实证明这是一个多重背包问题，可以使用[此 pdf 文档](http://www.or.deis.unibo.it/kp/Chapter6.pdf)解决。

# entity-framework - EF 5.0 代码优先 EF 跟踪与 DBContext

> ID：13111971
> 
> 赞同：3
> 
> 时间：2012-10-28T18:58:33.830
> 
> 标签：entity-framework, ef-code-first, dbcontext

我有一个使用代码优先方法和 EntityFramework 5.0 的项目，我愿意添加[跟踪](http://code.msdn.microsoft.com/EFProviderWrappers) 但还没有走远，我已经阅读[了这个链接](https://stackoverflow.com/questions/12535079/how-to-configure-ef-tracing-provider-for-ef-code-first)，但我无法使用 DbContext 方法使其工作。原始 EF 跟踪/缓存是使用 ObjectContext 编写的，在阅读了很多页面后，我仍然无法弄清楚如何使其正常工作。在上面提供的链接中，我收到一个错误，找不到 NorthwindContext。

有人可以提供一些关于在哪里以及如何使用 EFTracing 和 DBContext 编译工作解决方案的见解吗？代码示例将是一个巨大的帮助。

谢谢，里卡多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T22:43:09.563

您需要跳过一些箍。我在这里写了一篇博客：http: [//blog.3d-logic.com/2012/03/31/using-tracing-and-caching-provider-wrappers-with-codefirst/](http://blog.3d-logic.com/2012/03/31/using-tracing-and-caching-provider-wrappers-with-codefirst/)。希望它能帮助您解决问题。

**编辑**

EF6 现在包含用于记录/跟踪的内置机制。从更多细节看[特性规范](https://entityframework.codeplex.com/wikipage?title=Interception)和[这篇博](http://blog.oneunicorn.com/2013/05/08/ef6-sql-logging-part-1-simple-logging/)文。

# javascript - JQuery 插件表单 - 如何使用 onchange 事件提交表单

> ID：13111975
> 
> 赞同：0
> 
> 时间：2012-10-28T18:59:19.480
> 
> 标签：javascript, jquery

我是 JQuery 新手 - 我需要使用 JQuery 表单插件进行文件上传，但我想在选择文件后立即提交表单（输入标签的 onchange 事件：myfile，如下所示），

```
<html>
<body>
    <form encType="multipart/form-data" method="post" action="file-echo.php" encoding="multipart/form-data" id='fileUploadForm'>
        **<input name="myfile" type="file">**
        <input value="Upload File to Server" type="submit">
    </form>

    <div class="progress">
        <div style="width: 0%;" class="bar"></div>
        <div class="percent">0%</div>
    </div>

    <div id="status"><br></div>
 </body>
</html> 
```

我从插件网站复制了以下示例 JS 代码，但我想对其进行调整，以便在选择文件时提交表单。请问有什么指点吗？提前致谢。

```
 $(document).ready(function(){
         $('#myfile').change(function(){

         // alert("");
       $('#fileUploadForm').ajaxForm({ 
            beforeSubmit: ShowRequest,
            success: SubmitSuccesful,
            error: AjaxError                               
          });

       });

      function ShowRequest(formData, jqForm, options) {
          var queryString = $.param(formData);
          alert('BeforeSend method: \n\nAbout to submit: \n\n' + queryString);
          return true;
        }

        function AjaxError() {
          alert("An AJAX error occured.");
        }

        function SubmitSuccesful(responseText, statusText) {        
          alert("SuccesMethod:\n\n" + responseText);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:05:56.730

如果它完全有效（因为文件上传对象由于安全问题而变化无常）并且您的意思是按照原始问题中的说明提交表格 - 那么这可能有效：

```
 $(document).ready(function(){
     $('#myfile').change(function(){
       $('#fileUploadForm').submit();
     });
 }); 
```

如果您想对数据进行 Ajax，请尝试添加一些您似乎缺少的括号

```
 $(document).ready(function(){
   $('#myfile').change(function(){

     // alert("");
      $('#fileUploadForm').ajaxForm({ 
        beforeSubmit: ShowRequest,
        success: SubmitSuccesful,
        error: AjaxError                               
      });

   });
}); // close the .ready 
```

# ruby - 在 Rails 视图中渲染 Ruby 语句？

> ID：13111978
> 
> 赞同：0
> 
> 时间：2012-10-28T18:59:48.303
> 
> 标签：ruby, ruby-on-rails-3, views

所以在我的数据库中，我想在数据库表中存储一个 ruby​​/HTML 语句，例如 -p 这个站点是 2000 年拥有的 - #{Time.now.year} 由 Acme Widget Co./p

或者假设我希望人们能够在其他代码片段中包含 - 例如，客户想要在段落中间的显示视图中运行一些神奇的部分，例如 #{render 'my_magical_code'}

在视图中，我将其呈现为 <%= raw(@page.content) %>

但它就像双重渲染，rails 只会放在页面 #{render 'my_magical_code'} 或 #{Time.now.year}

那么我可以/如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:15:05.027

有一些变通方法，但我认为解决您的问题的最合适方法是以更好的方式存储您的信息。使用 year_founded 和 company 行向您的模型添加迁移。然后，您可以在视图中调用这些而不是存储 HTML。例如。

该站点从 <%= @object.year_founded %> 到 <%= Time.now.year %> 归 <%= @object.company %> 所有

# java - AbstractTableModel 中的 JTable 未显示

> ID：13111979
> 
> 赞同：0
> 
> 时间：2012-10-28T19:00:17.163
> 
> 标签：java, swing, jtable, abstracttablemodel

我在eclipse中使用Window Builder插件来制作所有的可视化组件，我添加了一个JTable，起初它是一个简单的JTable，它可以正确显示数据。因为我需要 JTable 的数据是不可编辑的，所以我创建了一个模型来使用方法 isCellEditable。我的代码是这样的。

```
public class MyTableModel extends AbstractTableModel {

        private static final long serialVersionUID = 1L;
        private String[] columnNames;
        private Object[][] data;

        public MyTableModel(Object[][] sentdata, String[] cnames){
            columnNames = cnames;
            data = sentdata;
        }

        @Override
        public int getColumnCount() {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public int getRowCount() {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            // TODO Auto-generated method stub
            return null;
        }

        public boolean isCellEditable (int row, int column){
            return false;
        }

    }//fin del modelo 
```

在类的构造函数中是这个

```
String[] NombresdeColumnas = {"Nombre del Producto", "Cantidad en Inventario", "Precio Unitario"}; 
RegistroInventario inventariodatos = new RegistroInventario();
Object[][] data = inventariodatos.regresarInventario();

MyTableModel model1 = new MyTableModel(data, NombresdeColumnas);

Table_Inventario = new JTable(model1);
Table_Inventario.setGridColor(Color.gray);

JScrollPane scrollPane_1 = new JScrollPane();
scrollPane_1.setViewportView(Table_Inventario); 
```

它没有显示任何东西，但是当我这样做时：

```
Table_Inventario = new JTable(data, NombresdeColumnas); 
```

它工作得很好，我不知道错误是否与 de Window Builder form eclipse 或代码中的问题有关，因为我是新做 JTables。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:02:52.983

你的问题`return 0;`在

```
public int getColumnCount() { 
```

和

```
public int getRowCount() { 
```

改用`DefaultTableModel`，确定是否没有真正重要的问题可`AbstractTableModel`用于`Object[][]`数据或`Vector of Vectors`

make me sence`AbstractTableModel`用于基于`HashMap`或`java.util.List`ei的模型

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T19:13:30.460

您的`AbstractTableModel`不包含任何数据。

您通过`getColumnCount`and`getRowCount`方法的实现表明它包含零行和零列。

即使你调整了这些方法，你也不会使用在构造函数中传递的数据，因为你总是`null`在`getValueAt`方法中返回。

我认为您应该开始阅读表格教程中的[“如何创建`TableModel`”部分](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

# audio - 音频播放和多任务处理

> ID：13111981
> 
> 赞同：0
> 
> 时间：2012-10-28T19:00:28.803
> 
> 标签：audio, multitasking

我一直想知道操作系统如何在其他程序运行时不间断地连续播放音频。

有时当运行密集程序时，我会注意到音乐停止一秒钟，有时可能是几秒钟。

但一般来说，我可以一边玩密集的游戏一边听音乐。操作系统如何设法在（几乎）没有中断的情况下播放它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:03:25.197

它为音频线程提供更高的优先级。

Android SDK 表示普通应用程序无法更改为此（更高）优先级：http: [//developer.android.com/reference/android/os/Process.html#THREAD_PRIORITY_AUDIO](http://developer.android.com/reference/android/os/Process.html#THREAD_PRIORITY_AUDIO)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:19:27.433

音频由硬件播放。包括操作系统在内的软件负责以半固定的时间间隔将称为“缓冲区”的音频块传输到硬件。只要硬件在最后一个块用完之前接收到下一个块，播放就是连续的。

我的演讲幻灯片上有一张这样的图表：

[http://blog.bjornroche.com/2011/11/slides-from-fundamentals-of-audio.html](http://blog.bjornroche.com/2011/11/slides-from-fundamentals-of-audio.html)

# python - python函数调用但不返回值。应该很简单

> ID：13111985
> 
> 赞同：0
> 
> 时间：2012-10-28T19:00:36.453
> 
> 标签：python, function

我有一个功能：

```
def user_login(m):
    m = "user_login function called"
    return m 
```

调用它：

```
user_login(message) 
```

它应该改变一个字符串 m，并返回结果。我知道该函数会被调用，因为如果我没有在其中添加参数，它会引发错误 [user_login() 恰好采用 1 个参数（给定 0）]。但它不返回字符串。我怎样才能找出问题所在？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T19:02:06.727

您不能“更改字符串”-相反，您应该做的是将函数的结果分配给调用范围内的字符串：

```
m = user_login('some message')
print m 
```

# c++ - C++：计算哈希图中相等比较的数量

> ID：13111988
> 
> 赞同：1
> 
> 时间：2012-10-28T19:01:03.793
> 
> 标签：c++, hashmap

我有一个带有用户定义的哈希和相等函数的无序映射。

我想计算将所有元素添加到地图后调用相等比较函数的次数。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:04:04.307

在您的自定义相等函数中计算它们：

```
struct equality_comparer : std::binary_function<MyType, MyType, bool> {
    static int counter_;

    bool operator()( MyType const& lhs, MyType const& rhs ) {
        ++counter_;
        return lhs == rhs;
    }
};
int equality_comparer::counter_ = 0; 
```

然后在插入到地图后完成：`equality_comparer::counter_ = 0`。

正如@PiotrNycz 提到的，你可以使用这个：

```
struct equality_comparer : std::binary_function<MyType, MyType, bool> {
    mutable int counter_;
  //^^^^^^^
    equality_comparer() : counter_(0) {}
    bool operator()( MyType const& lhs, MyType const& rhs ) {
        ++counter_;
        return lhs == rhs;
    }
    void reset_counter() {counter_ = 0;}
}; 
```

然后，您可以`myMap.key_eq().reset_counter()`代替`equality_comparer::counter_ = 0`以前的代码`myMap.key_eq().counter_`来访问计数器值。

# c++ - 在 std::vector 中实现 back()

> ID：13111992
> 
> 赞同：3
> 
> 时间：2012-10-28T19:01:12.370
> 
> 标签：c++, stl

为什么 Vector back() 方法是用迭代器来实现的

```
reference back()
{   // return last element of mutable sequence
    return (*(end() - 1));
} 
```

而不是像...

```
return (*(_Myfirst + size())); 
```

**这个问题的背景：**

我最近一直在优化一些遗留代码（分配器实现），并注意到大量时间都花在`std::vector::back()`. 所以我使用不同的集合（Vector vs List vs Deque）做了一些实验，因为`back()`基本上是检索集合中的最后一个元素，所以我也比较`vector::back()`了`vector[size()-1]`

这是我用来测试的代码：

```
#include <vector>
#include <list>
#include <deque>
#include <algorithm>
#include <boost/timer/timer.hpp>

int RandomNumber () { return (rand()%100); }

void doVector( std::vector<int>& test_vec )
{
    std::cout << "vect back() = " << test_vec.back() << std::endl;
    {
        boost::timer::auto_cpu_timer t;
        for (int i = 0; i < 100000000; i++ )
            test_vec.back();
    }
}

void doVector2( std::vector<int>& test_vec )
{
    std::cout << "vect [size()-1] = " << test_vec[test_vec.size()-1] << std::endl;
    {
        boost::timer::auto_cpu_timer t;
        for (int i = 0; i < 100000000; i++ )
            test_vec[test_vec.size()-1];
    }

}

void doList( std::vector<int>& test_vec )
{
    std::list<int> test_list(test_vec.begin(),test_vec.end());
    std::cout << "list back() = " << test_list.back() << std::endl;

    {
        boost::timer::auto_cpu_timer t;
        for (int i = 0; i < 100000000; i++ )
            test_list.back();
    }

}

void doDeque( std::vector<int>& test_vec )
{
    std::deque<int> test_deq(test_vec.begin(),test_vec.end());
    std::cout << "Deque back() = " << test_deq.back() << std::endl;

    {
        boost::timer::auto_cpu_timer t;
        for (int i = 0; i < 100000000; i++ )
            test_deq.back();
    }

}

int _tmain(int argc, _TCHAR* argv[])
{
    std::vector<int> test_vec(100);
    std::generate(test_vec.begin(), test_vec.end(), RandomNumber );

    doVector(test_vec);
    doVector2(test_vec);
    doList(test_vec);
    doDeque(test_vec);
} 
```

结果是：

**删除了结果，因为我打开了调试/关闭了发布时间的优化，以秒为单位 - 我应该已经看到了**

显然，我会从使用 vect[size() - 1] 中获得显着收益，此外，我还将通过在 front() 上使用 vect[0] 获得更多收益。我意识到我将自己与矢量联系在一起，但在短期内这是我选择的方向（快速获胜）。但是，这让我想到 - 为什么 front() 和 back() 的向量实现在底层使用效率较低的实现？

* * *

vect back() = 41 0.183862s 墙，0.171601s 用户 + 0.000000s 系统 = 0.171601s CPU (93.3%)

vect [size()-1] = 41 0.416969s 墙，0.421203s 用户 + 0.000000s 系统 = 0.421203s CPU (101.0%)

list back() = 41 0.079119s 墙，0.078001s 用户 + 0.000000s 系统 = 0.078001s CPU (98.6%)

Deque back() = 41 0.186574s 墙，0.187201s 用户 + 0.000000s 系统 = 0.187201s CPU (100.3%)

很明显，当我进行分析时，我看到了错误的结果——因为这完全支持了实现的选择。向在此编辑之前查看此内容的人道歉......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T19:09:34.547

C++ 规范定义了语义而不是实现。如果它对`std::vector<T, A>::back()`使用不同于规范建议的实现的实现很重要，那么实现应该做正确的事情！显然，它仍然需要提供正确的语义。

指定它的基本原因可能来自原始实现：迭代器类型`std::vector<T, A>`只是 a `T*`（尽管由于各种原因已经过时，但它仍然是一个有效的实现）。现代`std::vector<T, A>`实现倾向于使用简单的指针包装器。

话虽如此，您看到的开销实际上应该进行优化，因为对于体面的编译器：您使用了哪些优化标志？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:13:22.743

根据您的问题`_Myfirst + size()`，我猜您正在使用`MSVC`具有`iterator`调试功能，您确定您正在使用`release`构建进行测试，因为在`debug`构建`iterator`调试中需要一些额外的时间，但在`release`模式下它们都需要相同的时间（至少在我的机器上使用`MSVC 2010`）

# git - 从另一个不是最新的远程拉取 N 次提交

> ID：13111993
> 
> 赞同：1
> 
> 时间：2012-10-28T19:01:15.930
> 
> 标签：git, version-control, github

以下是演示该问题的详细信息：

1.  人 A 分叉了我的项目

2.  人 A 向他的 fork 提交内容（8 次提交++）

3.  人员 A 忘记拉取上游更改

4.  人 A 向他的分叉提交其他内容（4 次提交）

我想要做的是：仅从他那里提取最后 4 次提交（参见第 4 点）。我听说`git cherry-pick`是这个命令，但我不知道如果有太多冲突需要解决，我该怎么做，我什至不想取消他所做的每一个提交。

我已经尝试过的东西：

1.  把他所有的东西都拉到另一个分支

2.  尝试一些樱桃挑选命令（当然没有人工作，因为有很多冲突等）

3.  git fetch 并尝试cherry-pick（也没有运气）。

考虑到我有：存储了他的远程 URL 和他的东西的分支。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T19:27:48.570

你可以做一个范围樱桃挑选：

```
 git cherry-pick his-remote/branch-name~4..his-remote/branch-name 
```

或使用变基：

```
 git rebase --onto your-branch his-remote/branch-name~4 his-remote/branch-name 
```

无法避免冲突。你需要解决它们。如果您在 Windows 上，Beyond Compare 或 P4Merge 是两个可以帮助解决棘手的冲突的方法。

根据您所做的更改数量，您可能希望重置回共同点，快进合并他的更改并在此基础上重新调整您的更改，因为您更熟悉您在提交中所做的事情和这可能会使解决冲突变得容易得多。

# android - 如何让多个监听器在 Android 中处理相同的 OnTouch 事件？

> ID：13111999
> 
> 赞同：3
> 
> 时间：2012-10-28T19:01:59.897
> 
> 标签：android, android-view, android-event

我有两个实现 OnTouchListener 的不同对象。

其中之一，使用事件数据修改一些内部数据，另一个更新 UI。

问题是，如果我将它们都设置为监听同一个 View，只有其中一个处理 OnTouch 事件，另一个的 OnTouch 函数不会被调用。

我读到如果 OnTouch 函数返回 true，则意味着事件已被处理，但如果我返回 False，它们的行为不正常。

所以，问题是：

如何将两个或多个侦听器对象设置为来自视图的相同 OnTouch 事件，并允许它们全部接收所有这些事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T19:27:51.707

只需让一个侦听器为两个对象调用一个方法：

```
Object uiModifier;
Object internalDataModifier;
//ensure these Objects are initialized

myView.setOnClickListener(new OnTouchListener() {
    @Override
    public boolean onTouchListener(View v, MotionEvent event)
    {
        internalDataModifier.handleTouch(v, event);
        uiModifier.handleTouch(v, event);
        return true;
    }

} 
```

`internalDataModifier`并确保两者`uiModifier`都有`handleTouch(View, MotionEvent)`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:15:25.900

为什么你不能让监听器只指向 UI 活动，然后你可以从那个活动中调用任何更新内部数据的东西？我不认为让 2 个事件侦听器响应同一个事件是一个好主意，即使有可能（我对此表示怀疑）。想象一下，如果有人试图让 2 个 UI 活动响应 1 个事件以及它会导致的冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T15:17:18.667

我的解决方法是只有一个类 extend`SimpleOnGestureListener`和 implement `OnTouchListener`。一个类正在扩展`SimpleOnGestureListener`，而另一个类正在实现`OnTouchListener`，但两者都在处理触摸事件。

然后，我将较小类的所有代码（就代码行而言）移至较大的类，然后在我的实现中调用较大的类并且它起作用了。然后我这样宣布我的班级

```
 public class MyOnlyListener extends SimpleOnGestureListener implements OnTouchListener 
```

作为参考，我使用一个类来[平移缩放图像](http://code.cheesydesign.com/?p=723)（较大的类），而我使用[另一个类滑动](https://stackoverflow.com/a/12938787/1482845)到视图中的下一页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-26T03:07:02.473

在 Kotlin 中，我这样做：

扩展 View，然后覆盖 setOnTouchListener，然后调用 super.setOnTouchListener 并传递一个初始化的监听器对象。

片段：

```
var customOnTouchListener: OnTouchListener? = OnTouchListener { v, event ->
    return@OnTouchListener false
}

override fun setOnTouchListener(l: OnTouchListener?) {
    val bridgeListener = OnTouchListener { v, event ->
        // Listener 2
        customOnTouchListener?.onTouch(v, event)

        // Listener 1
        l?.onTouch(v, event) ?: false
    }

    super.setOnTouchListener(bridgeListener)
} 
```

然后我像这样使用它：

```
customScrollView.setOnTouchListener { v, event -> 
    // Got the event
}
customScrollView.customOnTouchListener = View.OnTouchListener { v, event ->
    // Got the event too
} 
```