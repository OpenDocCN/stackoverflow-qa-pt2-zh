# StackOverflow 问答 13839000-13839999

# asp.net - Asp.net..图像控制和文字控制的问题

> ID：13839000
> 
> 赞同：0
> 
> 时间：2012-12-12T11:42:30.187
> 
> 标签：asp.net

此行..在图像控制`src`属性中..未调用所需的图像页面..

```
ltrlMessage.Text = "<p><table><tr><td width='5%' valign=top><img ID='imgmsg1' runat='server' src = 'DRSS_Msglogo.aspx' /><td Class='labelcss'>" + listAbsWelcomeMessage[0].MBMessage.Trim() + "</td> </tr><tr><td colspan='2'> </td></tr><tr><td colspan='2' Class='labelcss'> " + msg + "</td><td width=2px></td></tr></table></p>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:54:22.973

如果您想在您的页面中调用另一个页面，请使用 iframe 标签而不是 img 标签：

```
<iframe src="DRSS_Msglogo.aspx"></iframe> 
```

代替：

```
<img ID='imgmsg1' src ='DRSS_Msglogo.aspx' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:00:59.690

我认为您的图像源路径将是错误的。请使用以下代码进行测试。

```
ltrlMessage.Text = "<p><table><tr><td width='5%' valign=top><img ID='imgmsg1' runat='server' src = 'http://www.gravatar.com/avatar/128ce87fc5638cbc75f7425664686b5f?s=32&d=identicon&r=PG' /><td Class='labelcss'>" + listAbsWelcomeMessage[0].MBMessage.Trim() + "</td> </tr><tr><td colspan='2'> </td></tr><tr><td colspan='2' Class='labelcss'> " + msg + "</td><td width=2px></td></tr></table></p>"; 
```

# ftp - 被动 ftp 连接

> ID：13839001
> 
> 赞同：-2
> 
> 时间：2012-12-12T11:42:37.040
> 
> 标签：ftp, passive-mode

在单个端口的被动 ftp 中可以建立多少个连接？或者一个端口一次可以连接多少个用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:18:05.600

> Windows server 2008 R2 上的 IIS 7.0 可以建立多少个被动 FTP 连接？

手册指出：

> [FTP 连接](http://www.iis.net/configreference/system.applicationhost/sites/site/ftpserver/connections)：
> 
> `maxConnections`: 可选单位 [原文如此] 属性。[...] 默认值为 4294967295（无限制。）

但是，您将无法达到 40 亿个连接，TCP 连接的最大数量[取决于操作系统](http://msdn.microsoft.com/en-us/library/windows/desktop/ms739169(v=vs.85).aspx)和可用资源。您说您正在使用数据端口 49152-65535，但您不必使用那么大的范围 - 即使您只有一个数据端口，多个客户端也可以同时连接到该端口，以及它们对控制端口 (21)，因为连接是使用双方的 IP 地址以及源的源端口和目标的目标端口来标识的。

但我必须说：如果你不得不问一些系统的限制，你通常做错了。您当前的方法是否遇到任何问题？

# ruby-on-rails - 显示表单对象的标签

> ID：13839003
> 
> 赞同：0
> 
> 时间：2012-12-12T11:42:39.667
> 
> 标签：ruby-on-rails, label, nested-forms, simple-form

在显示问题（q_text）时，我对这个嵌套表单有这个问题，我发现的唯一黑客是使用 text_area，然后它就可以工作了

```
<%= f.fields_for :answered_questions do |a| %>
  <%= a.check_box :answer %>
  <%= a.text_field :q_text %>
<% end %> 
```

这是它的外观： http: [//postimage.org/image/azrbgidht/](http://postimage.org/image/azrbgidht/)

但我不想使用`text_field`- 因为它用于输入但没有像我想要的那样显示文本

如果我将行改为`<%= a.label :q_text %>`我得到这个： http: [//postimage.org/image/l4pz62w29/](http://postimage.org/image/l4pz62w29/)

我怎样才能让表单对象明白标签应该是问题文本（q_text）但不仅仅是`q_text`？

**更新**

我更改了要使用的代码，`simple_form`但现在标签 dosnt 完全显示

```
<%= simple_form_for(@test_session) do |f| %>

  <%= f.fields_for :answered_questions do |ff| %>

    <%= ff.check_box :answer, :label => ff.object.q_text %> 

  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:02:08.020

这就是我修复它的方式，显然我不能同时使用内联标签和表单对象

`<%= f.simple_fields_for :answered_questions do |ff| %>`

`<%= ff.check_box :answer %>`

`<%= ff.label ff.object.q_text %>`

`<% end %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:48:10.493

```
Write as following.

<%= a.label :q_text,"questions text" %> 
```

# ios - l系统文件未找到xcode iOS，在模拟器上工作，设备出错

> ID：13839004
> 
> 赞同：2
> 
> 时间：2012-12-12T11:42:44.650
> 
> 标签：ios, xcode

```
ld: library not found for -lSystem
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我的设备在 5.1，xcode 4.3.1。和 SDK 5.1。我的应用程序在模拟器上运行良好。在设备上运行时出现上述错误。

我试图将 libSystem.dylib 从 Simulator.platform 路径放到 Phone.platfrom 路径中。编译器忽略，因为它不是 arvm7 架构。请建议或提示我缺少什么。

# wpf - 如何将 TabControl 的选定值（标题）绑定到视图模型上的属性

> ID：13839008
> 
> 赞同：0
> 
> 时间：2012-12-12T11:43:08.683
> 
> 标签：wpf, xaml, mvvm, binding, tabcontrol

我有一个 tabcontrol 和一个 tabitems 集合。我想将 selectedvalue 的标题绑定到我的视图模型中的一个属性，这样我就知道何时选择了一个选项卡。

我的思考过程使我尝试了以下方法：

```
<TabControl x:Name="TabControl" SelectedValue.Header="{Binding SelectedTab}"> 
```

这不起作用 - 可能是因为 SelectedValue 不是 HeaderedContentControl 类型（尽管它总是在这种情况下）。

是否可以在 XAML 内联中进行强制转换，以便我可以执行上述操作？

或者任何人都可以提出另一种方法来优雅地有效地实现同样的事情吗？我不想更改 XAML 的代码隐藏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:55:58.257

以下代码对我有用...

**C＃：**

```
public class MyTabItemData     {
     public int Index { get; set; }
     public string Title { get; set; }
} 

public class MyTabControlViewModel {
     public List<MyTabItemData> TabItemsData { 
         get {
             //return list of tab items data.
         } 
     }

     public ICollectionView TabItemsDataView {
          get {
              return CollectionViewSource.GetDefaultView(TabItemsData);
          }
     }

     public MyTabItemData MyCurrentTabItemData {
          get {
              return TabItemsDataView.CurrentItem as MyTabItemData;
          }
     }
} 
```

**XAML：**

```
<TabControl ItemsSource="{Binding TabItemsDataView}" 
            IsSynchronizedWithCurrentItem="True">
     ....
</TabControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:57:11.903

而不是`<TabControl x:Name="TabControl" SelectedValue.Header="{Binding SelectedTab}">` 绑定到 SelectedValue 并使用转换器来获取标题，如下所示：

```
<TabControl x:Name="TabControl" SelectedValue="{Binding Path=SelectedTab, Converter={StaticResource TabItemToHeader}}"> 
```

您的转换器可能看起来像

```
public class TabItemToHeaderConverter:IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return ((TabItem)value).Header
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return null;
    }
} 
```

`Header`is no attached property, so you cant bind to it through `SelectedValue.Header="{}"`.

# android - 更改焦点列表项的颜色

> ID：13839011
> 
> 赞同：0
> 
> 时间：2012-12-12T11:43:16.583
> 
> 标签：android, listview

我面临 **列表视图**的问题，当 **列表视图聚焦时，我想单独更改****列表项**中文本视图的文本颜色， 并且我想在右上角的列表项中显示图像。

以下代码我使用过。

在主类的 Xml 中

```
 <ListView
                    android:id="@+id/listViewMenu"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:cacheColorHint="@null"
                    android:divider="@color/titlebar_divider"
                    android:dividerHeight="1dp"
                    android:listSelector="@android:color/transparent" >
                </ListView> 
```

在适配器 xml

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/imgMenuImages"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="2dp"
        android:contentDescription="@null"
        android:src="@drawable/my_page" />

    <TextView
        android:id="@+id/txtMenuNames"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="10dp"
        android:layout_weight="1"
        android:duplicateParentState="true"
        android:ellipsize="marquee"
        android:gravity="center_vertical"
        android:singleLine="true"
        android:text="@string/mypage"
        android:textColor="@color/menu_textcolor"
        android:textStyle="bold" />

    <ImageView
        android:id="@+id/imgFocusImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@null"
        android:duplicateParentState="true"
        android:focusable="true"
        android:focusableInTouchMode="false"
        android:src="@drawable/arrow"
        android:visibility="gone" />
</LinearLayout> 
```

在适配器 JavaCode 中。

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = mLayoutInflater.inflate(R.layout.menu_list_row, null);

        TextView mTextView = (TextView)vi.findViewById(R.id.txtMenuNames);
        mImageView = (ImageView)vi.findViewById(R.id.imgMenuImages);
        imgFocusImage = (ImageView)vi.findViewById(R.id.imgFocusImage);
        imgFocusImage.setFocusableInTouchMode(false);

        mImageView.setImageResource(mThumbIds[position]);
        mTextView.setText(mIndicators[position]);

        mTextView.setOnFocusChangeListener(new OnFocusChangeListener(){

            public void onFocusChange(View v, boolean hasFocus)
            {
                v.setBackgroundColor(hasFocus ? Color.GRAY : Color.BLACK);
            }
        });

        imgFocusImage.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {

                if(hasFocus)
                    v.setVisibility(View.VISIBLE);
            }
        });

        return vi;
    } 
```

聚焦时，我可以改变`Listitem`in的颜色`ListView`，但是当它被按下时它会起作用。

在 Selector.xml 中

```
<item android:color="#FCBC04" android:state_focused="true"/>
<!-- focused -->
<item android:color="#FCBC04" android:state_focused="true" android:state_pressed="true"/>
<!-- focused and pressed -->
<item android:color="#FCBC04" android:state_pressed="true"/>
<!-- pressed -->
<item android:color="#D8D8D8"/>
<!-- default --> 
```

谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:38:18.743

在 Res 文件夹中添加颜色文件夹并在颜色中添加选择器使用 ca 像这样使用它

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" 
        android:color="@color/bluetxt"></item>
    <item android:color="@color/whiteColor"></item> 
</selector> 
```

这里 blutxt 和 whitecolor 是我自己的自定义颜色，你可以根据自己的要求使用它

# asp.net-mvc-3 - 如果用户闲置了一段时间，则将页面重定向到登录页面

> ID：13839015
> 
> 赞同：0
> 
> 时间：2012-12-12T11:43:24.900
> 
> 标签：asp.net-mvc-3, c#-4.0, dns

当网页打开并且没有进行任何操作时，一段时间后我需要重定向到登录页面，要求用户再次重新登录。我怎么能在 asp.net mvc 3 中做到这一点任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:47:44.400

```
Check the user session variable is null or not,if it is null,then redirect to login page.

if (Session["User"] == null)
{  Response.Redirect("Login.aspx");
} 
```

# scala - Scala 数值问题[T]

> ID：13839022
> 
> 赞同：3
> 
> 时间：2012-12-12T11:43:56.680
> 
> 标签：scala, types

我有一个数值求解函数`Double => Double`（`Numeric[T]`

这并不容易。剩下的问题是：

*   如何进行除法；`Numeric[T]`只有加号、减号等运算符。
*   为什么编译器找不到`implicit evidence$1: Numeric[Double]`函数（请参阅下面的编译器输出）

理想情况下，我想说“`A`两者`B`都是`Double`，但如果我将它们混合在一起，请告诉我”。

这是代码：

```
import scala.annotation.tailrec

class Sweep[A: Numeric, B: Numeric]( fDiff: A => B, initialSeed: A, initialStep: A, bEps: B )
{
  val anum= evidence$1
  val bnum= evidence$2

  assert( anum.signum(initialStep) > 0 )
  assert( bnum.lt( fDiff(initialSeed), fDiff( anum.plus(initialSeed,initialStep) )) )   // check that it's an increasing function

  @tailrec
  private def sweep( seed: A, step: A ): A = {
    val bDiff= fDiff(seed)

    if ( bnum.lt( bnum.abs(bDiff), bEps) ) {  // done
      seed
    } else if ( bnum.signum(bDiff) != anum.signum(step) ) {
      sweep( anum.plus(seed,step), step )   // continue, same step and direction ('bDiff' should go smaller)
    } else {
      val newStep = anum.toDouble(step) / -2.0
      sweep( anum.minus(seed,newStep), newStep )    // reverse, smaller step
    }
  }

  // Make sure we take the initial step in the right direction
  //  
  private lazy val stepSign= -bnum.signum( fDiff(initialSeed) )

  def apply: A = sweep( initialSeed, stepSign * initialStep )
}

object TestX extends App {

  val t= new Sweep( (a: Double) => (a*a)-2, 1.0, 0.5, 1e-3 )()

  println( t, math.sqrt(2.0) )
} 
```

我也尝试过使用较旧的`(implicit anum: Numeric[A])`参数，但无法拥有两个这样的参数（for`A`和`B`）。

这是编译器所说的（Scala 2.9）：

```
fsc -deprecation -d out-make -unchecked src/xxx.scala
src/xxx.scala:25: error: type mismatch;
 found   : newStep.type (with underlying type Double)
 required: A
      sweep( anum.minus(seed,newStep), newStep )    // reverse, smaller step
                             ^
src/xxx.scala:33: error: overloaded method value * with alternatives:
  (x: Double)Double <and>
  (x: Float)Float <and>
  (x: Long)Long <and>
  (x: Int)Int <and>
  (x: Char)Int <and>
  (x: Short)Int <and>
  (x: Byte)Int
 cannot be applied to (A)
  def apply: A = sweep( initialSeed, stepSign * initialStep )
                                              ^
src/xxx.scala:38: error: not enough arguments for constructor Sweep: (implicit evidence$1: Numeric[Double], implicit evidence$2: Numeric[Double])Sweep[Double,Double].
Unspecified value parameters evidence$1, evidence$2.
  val t= new Sweep( (a: Double) => (a*a)-2, 1.0, 0.5, 1e-3 )()
         ^
three errors found 
```

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:33:46.623

您想与`Fractional`而不是`Numeric`. 以下为我编译：

```
import scala.annotation.tailrec
import math.Fractional.Implicits._
import Ordering.Implicits._

class Sweep[A: Fractional, B: Fractional](fDiff: A => B, initialSeed: A, initialStep: A, bEps: B) {
  val aFractional = implicitly[Fractional[A]]

  assert(initialStep.signum > 0)
  assert(fDiff(initialSeed) < fDiff(initialSeed + initialStep))

  @tailrec
  private def sweep(seed: A, step: A): A = {
    val bDiff = fDiff(seed)
    if (bDiff.abs < bEps) {
      seed
    } else if (bDiff.signum != step.signum) {
      sweep(seed + step, step)
    } else {
      val one = aFractional.one
      val newStep = step / aFractional.fromInt(-2)
      sweep(seed - newStep, newStep)
    }
  }

  private lazy val stepSign = aFractional.fromInt(-fDiff(initialSeed).signum)
  def apply: A = sweep(initialSeed, stepSign * initialStep)
}

val sweep = new Sweep((a: Double) => (a*a)-2, 1.0, 0.5, 1e-3)
println(sweep.apply, math.sqrt(2.0)) 
```

请注意，要获得类似`-2.0`in 类型的东西`A`，您需要手动组装它们`Fractional.one`或使用`Fractional.fromInt`.

值得指出的另一件事是使用`math.Fractional.Implicits`and `Ordering.Implicits`，它允许您使用普通的数学语法（+、<、/ 等），而不是调用像`plus`and之类的函数`div`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:58:29.667

如果你想让编译器告诉你什么时候类型参数`A`和`B`不一样，只需使用一个类型参数：

```
class Sweep[A: Numeric]( fDiff: A => A, initialSeed: A, initialStep: A, bEps: A ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:06:20.763

问题似乎是您`Double`在这里使用...

```
val newStep = anum.toDouble(step) / -2.0 
```

...尽管您想`Numeric`在下一行中使用并实际使用它。

对于除法，请查看`Numeric`的子类型`Integral`和`Fractional`。

编译器没有找到隐含的证据，因为你明确地没有传递：

```
new Sweep((a: Double) => (a*a)-2, 1.0, 0.5, 1e-3)() 
```

删除显式空参数列表修复了以下问题：

```
new Sweep((a: Double) => (a*a)-2, 1.0, 0.5, 1e-3) 
```

我不确定不混合`A`and的要求`B`，因为您已经在代码中的多个位置执行此操作。

我不确定这是您想要的，但以下代码有效：

```
import scala.annotation.tailrec

class Sweep[A: Fractional](fDiff: A => A, initialSeed: A, initialStep: A, bEps: A) {
  val num = implicitly[Fractional[A]]

  assert(num.signum(initialStep) > 0)
  assert(num.lt(fDiff(initialSeed), fDiff(num.plus(initialSeed, initialStep)))) // check that it's an increasing function

  @tailrec
  private def sweep(seed: A, step: A): A = {
    val bDiff = fDiff(seed)

    if (num.lt(num.abs(bDiff), bEps)) { // done
      seed
    } else if (num.signum(bDiff) != num.signum(step)) {
      sweeimport scala.annotation.tailrec

class Sweep[A: Fractional](fDiff: A => A, initialSeed: A, initialStep: A, bEps: A) {
  val num = implicitly[Fractional[A]]

  assert(num.signum(initialStep) > 0)
  assert(num.lt(fDiff(initialSeed), fDiff(num.plus(initialSeed, initialStep)))) // check that it's an increasing function

  @tailrec
  private def sweep(seed: A, step: A): A = {
    val bDiff = fDiff(seed)

    if (num.lt(num.abs(bDiff), bEps)) { // done
      seed
    } else if (num.signum(bDiff) != num.signum(step)) {
      sweep(num.plus(seed, step), step) // continue, same step and direction ('bDiff' should go smaller)
    } else {
      val newStep = num.div(step, num.fromInt(-2))
      sweep(num.minus(seed, newStep), newStep) // reverse, smaller step
    }
  }

  // Make sure we take the initial step in the right direction
  private lazy val stepSign = -num.signum(fDiff(initialSeed))

  def apply: A = sweep(initialSeed, num.times(num.fromInt(stepSign), initialStep))
}

object TestX extends App {

  val t = new Sweep((a: Double) => (a * a) - 2, 1.0, 0.5, 1e-3)

  println(t, math.sqrt(2.0))
}

p(num.plus(seed, step), step) // continue, same step and direction ('bDiff' should go smaller)
    } else {
      val newStep = num.div(step, num.fromInt(-2))
      sweep(num.minus(seed, newStep), newStep) // reverse, smaller step
    }
  }

  // Make sure we take the initial step in the right direction
  private lazy val stepSign = -num.signum(fDiff(initialSeed))

  def apply: A = sweep(initialSeed, num.times(num.fromInt(stepSign), initialStep))
}

object TestX extends App {

  val t = new Sweep((a: Double) => (a * a) - 2, 1.0, 0.5, 1e-3)

  println(t, math.sqrt(2.0))
} 
```

# actionscript-3 - 字典使用 tostring 而不是对象？

> ID：13839023
> 
> 赞同：0
> 
> 时间：2012-12-12T11:43:59.733
> 
> 标签：actionscript-3, dictionary, adobe

Adobe[特别说明](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Dictionary.html)了字典：

> 对象的标识用于查找对象，而不是调用 toString() 返回的值

但是，当我跑步时

```
if(myInstance in myDictionary)  { ... } 
```

要查看 myInstance 是否已经作为 myDictionary 中的“键”存在，调用了 myInstance.tostring！

任何人都知道为什么或解决它的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T03:16:32.837

`in`关键字通常与对象属性一起使用，这些属性是字符串。考虑`for each`循环与`for in`循环之间的区别。

我们通常使用`for in`循环来迭代对象的动态属性：

```
private var o:Object = { property1: "value1", property2: "value2" };
for (var propertyName:String in o)
{
    trace(propertyName);
    trace(o[propertyName]);
}

Outputs:
property1
value1
property2
value2 
```

因此，在您的代码片段中，`in`关键字导致调用`toString()`.

测试密钥是否存在的正确方法是测试`null`：

```
if (myDictionary[myInstance])
    trace("key exists and it has a value"); 
```

# javascript - SignalR 客户端的本机 Javascript API

> ID：13839024
> 
> 赞同：0
> 
> 时间：2012-12-12T11:43:59.753
> 
> 标签：javascript, signalr

据我所知，SignalR 的客户端库基于 jQuery，这是一种不好的方法，因为我的应用程序中不需要任何 JavaScript 框架，但我必须包含 jQuery 才能使 SignalR API 工作。

我想知道是否有任何替代方式/库可以通过 JavaScript（没有任何框架）连接到 SignalR？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:51:11.077

正如我在这里读到的：[https](https://github.com/SignalR/SignalR/wiki/Faq) ://github.com/SignalR/SignalR/wiki/Faq SignalR 使用不同的协议/方法来获得尽可能好的用户体验。如果服务器和浏览器支持 WebSocket，它将使用此协议。如果您确定客户的浏览器足够新以支持 WebSockets，那么您可以跳过 JS 框架并直接使用 WebSockets。客户将获得最佳体验，您不需要第三方。

在这里您可以阅读如何通过 JavaScript 使用 websocket 协议：[https](https://developer.mozilla.org/en-US/docs/WebSockets) ://developer.mozilla.org/en-US/docs/WebSockets 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:03:26.360

您可以基于不引用 jQuery 的 SignalR 客户端编写自己的客户端。

# fullcalendar - 全日历碰撞事件

> ID：13839031
> 
> 赞同：1
> 
> 时间：2012-12-12T11:44:13.607
> 
> 标签：fullcalendar

我正在使用`FullCalendar`插件来显示很多事件。似乎有时这些事件会像下图一样相互叠加……有人知道如何预防吗？

[http://imageshack.us/photo/f/707/bugqp.png/](http://imageshack.us/photo/f/707/bugqp.png/)

饲料：

```
events: [
{
    title: 'One event',
    start: new Date(y, m, d, 0, 30),
    end:  new Date(y, m, d, 2, 30),
    allDay: false
},
{
    title: 'One event',
    start: new Date(y, m, d, 0, 30),
    end:  new Date(y, m, d, 2, 30),
    allDay: false
},
{
    title: 'One event',
    start: new Date(y, m, d, 2, 30),
    end:  new Date(y, m, d, 4, 30),
    allDay: false
},
{
    title: 'One event',
    start: new Date(y, m, d, 2, 30),
    end:  new Date(y, m, d, 4, 30),
    allDay: false
},
{
    title: 'One event',
    start: new Date(y, m, d, 2, 30),
    end:  new Date(y, m, d, 4, 30),
    allDay: false
},

{
    title: 'One event',
    start: new Date(y, m, d, 1, 00),
    end:  new Date(y, m, d, 3, 00),
    allDay: false
},

{
    title: 'One event',
    start: new Date(y, m, d, 1, 30),
    end:  new Date(y, m, d, 3, 30),
    allDay: false
},
{
    title: 'One event',
    start: new Date(y, m, d, 2, 50),
    end:  new Date(y, m, d, 4, 50),
    allDay: false
},
{
    title: 'One event',
    start: new Date(y, m, d, 4, 30),
    end:  new Date(y, m, d, 6, 30),
    allDay: false
},
{
    title: 'One event',
    start: new Date(y, m, d, 2, 00),
    end:  new Date(y, m, d, 4, 00),
    allDay: false
},

{
    title: 'One event',
    start: new Date(y, m, d, 2, 50),
    end:  new Date(y, m, d, 4, 50),
    allDay: false
},

{
    title: 'One event',
    start: new Date(y, m, d, 2, 50),
    end:  new Date(y, m, d, 4, 50),
    allDay: false
},      
{
    title: 'One event',
    start: new Date(y, m, d, 4, 00),
    end:  new Date(y, m, d, 6, 00),
    allDay: false
}               
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T19:20:29.937

v1.6.4 中引入了一个 AgendaView[选项](https://github.com/arshaw/fullcalendar/blob/master/changelog.md#v164-2013-09-01)。从[文档](http://arshaw.com/fullcalendar/docs/agenda/slotEventOverlap/)：

### slotEventOverlap 1.6.4

确定议程视图中的定时事件是否应在视觉上重叠。

```
Boolean, default: true 
```

当设置为 true（默认值）时，事件将相互重叠。每个事件最多有一半会被遮挡。

当设置为 false 时，绝对不会有重叠。

# iphone - 在横向隐藏标签栏而不推送到 NavigationController

> ID：13839038
> 
> 赞同：3
> 
> 时间：2012-12-12T11:44:34.073
> 
> 标签：iphone, objective-c, ios5, uitabbarcontroller

我想在横向中显示另一个没有 Tabbar 的视图。所以我创建了一个新视图，只更改`self.view`和

```
self.hidesBottomBarWhenPushed = YES; 
```

但这对我不起作用。希望有人可以帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:56:01.500

`viewWillAppear:`只需在您的视图方法中添加此行即可隐藏`UITabBar`

```
[self.tabBarController.tabBar setHidden:YES]; 
```

并将新视图设置为 RootViewController 只需使用以下代码...

```
YourNewViewController *objView = [[YourNewViewController alloc] initWithNibName:@"YourNewViewController" bundle:nil];
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:objView]; 
[self presentModalViewController:nav animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:56:21.097

如果您不想推送导航控制器，请尝试以下代码：

```
UINavigationController *navAddEvent = [[UINavigationController alloc] initWithRootViewController:yourObg];

        navAddEvent.navigationBar.hidden = TRUE;

        [self presentModalViewController:navAddEvent animated:YES]; 
```

# html - 跨度和 iframe 主体的像素宽度

> ID：13839046
> 
> 赞同：2
> 
> 时间：2012-12-12T11:45:09.940
> 
> 标签：html, css

我需要知道 a 的宽度（`&nbsp;`以像素为单位），以及它是否取决于字体大小。此外，这是否因页面中的不同元素而异？

另外，和`&nbsp;`普通的有区别`吗？`

 `* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:46:57.163

普通空格上的（不间断空格）的目的`&nbsp;`是防止单词之间出现换行符。您可以使用多个`&nbsp;`实体来同时拥有多个空间。如果您只添加一个空格而不使用`&nbsp;`实体，它们将被缩减为一个空格。

如果您使用多个`&nbsp;`s 来填充内容，就像一些初学者 HTML 用户所做的那样，那么这被认为是不正确的。您应该始终使用 CSS 边距和填充来填充内容，以保持语义正确性，并将样式与页面内容分开。

的宽度`&nbsp;`取决于字体大小、字母间距等，与任何其他字符一样，并且如上所述，这可以由用户更改，因此没有可靠的知道方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:32:30.173

尽管 Maccath 的回答是正确的建议，但要直接回答您的问题：是的，您实际上可以通过使用一些 javascript[非常简单地获得宽度：](http://jsfiddle.net/sveinatle/hUFh4/29/)

例如，给定：

```
<span id="nbsp">&nbsp;</span> 
```

可以使用 jQuery 检索宽度：

```
$('#nbsp').width() 
```

jQuery 返回渲染时的宽度`<span>`，因此它考虑了字体大小等。既然您知道如何做，就不要这样做。`

# wurfl - 使用 WURFL 库检测设备宽度和高度

> ID：13839048
> 
> 赞同：0
> 
> 时间：2012-12-12T11:45:10.360
> 
> 标签：wurfl

我正在使用 WURFL 库返回设备宽度和高度。

我将 Safari 与 iPhone 代理一起使用，但结果为空。

我的代码是：

```
$width = $wurfl->getDeviceCapability("resolution_width");
$height = $wurfl->getDeviceCapability("resolution_height"); 
```

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T05:53:08.227

您是否首先使用用户代理字符串查询设备功能`$_SERVER['HTTP_USER_AGENT']`？

```
$wurfl = new TeraWurfl();
$wurfl->getDeviceCapabilitiesFromAgent($_SERVER['HTTP_USER_AGENT']);

$width  = (int) $wurfl->getDeviceCapability('resolution_width');
$height = (int) $wurfl->getDeviceCapability('resolution_height'); 
```

使用`Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3 like Mac OS X; de-de) AppleWebKit/533.17.9 (KHTML, like Gecko) Mobile/8F190`$width 的结果是 320 和 $height 480。

# android - Android ScrollView 子元素位置

> ID：13839070
> 
> 赞同：2
> 
> 时间：2012-12-12T11:46:54.777
> 
> 标签：android, android-layout, scrollview

我有一个 ScrollView，我想滚动到一个子元素（一个相对视图），我知道如何滚动到 X/Y 位置，但是如何知道我的相对视图在 Scroll View 中的位置？或者也许可以直接滚动到这个相对视图？

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
....
        <RelativeLayout
            android:id="@+id/box"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
....
</ScrollView> 
```

我想滚动到@+id/box。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:47:20.903

要滚动到特定元素，我从所有先前的元素中“.getHeight()”，我也添加了 topMargin，然后滚动到这个位置

要获得 topMargin ：

```
MarginLayoutParams vlpBox = (MarginLayoutParams) box1.getLayoutParams();
vlpBox.topMargin 
```

要获得真正的高度（不是 wrap_content）：

```
View.getHeight() 
```

这是一种解决方法，我不知道是否存在更好的解决方案。

# c++ - C++ - 谷歌 protobuf

> ID：13839085
> 
> 赞同：1
> 
> 时间：2012-12-12T11:48:20.593
> 
> 标签：c++, linux, protocol-buffers, opensuse

我已经下载并安装了这个框架：

[http://code.google.com/p/protobuf/](http://code.google.com/p/protobuf/)

我使用 openSuse 作为操作系统。我想创建一个指向以下库的软链接：

```
ln -s <PROTOCOL_BUFFERS_INCLUDE> include_pb
ln -s <PROTOCOL_BUFFERS_LIB> lib_pb 
```

所以基本上我想要 protobuf 包含文件夹和 protobuf 库的位置。

有人用过这个吗？你知道这是在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:09:09.383

包含目录应该是：`/usr/local/include/google/protobuf`...

图书馆应该是`/usr/local/lib/`

但是，这是在 Linux Mint 上，64 位...

`libprotobuf*`在图书馆的常用图书馆位置（`/lib`、`/usr/lib`、`/usr/local/lib`、`/lib64`等...）上搜索...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:48:11.930

它取决于默认为 /usr/local的`configure`脚本选项。`--prefix`查看可以传递给`configure`try的所有可用选项`./configure --help`（从目录内部）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:28:51.920

[您可以在rpm find](http://rpmfind.net/linux/RPM/opensuse/12.2/x86_64/protobuf-devel-2.4.1-4.1.2.x86_64.html)中查看协议缓冲区开发包的完整列表。您要查找的文件位于：

*   包括 dir:`/usr/include/google/protobuf`和
*   图书馆`/usr/lib64/libprotobuf.so`

我不确定你的努力是否会结束。但是如果你只是想用它进行开发，那么让 automake 和 autoconf 有机会为你整理一下（[教程](http://mij.oltrelinux.com/devel/autoconf-automake/)）怎么样？

# sql - 并行查询工作线程陷入死锁

> ID：13839088
> 
> 赞同：5
> 
> 时间：2012-12-12T11:48:35.570
> 
> 标签：sql, sql-server, parallel-processing, deadlock

我运行 SQL Server Trace 来跟踪一些死锁问题，我被这个评论击中了头，这`Parallel query worker thread was involved in a deadlock`是死锁的原因。

![在此处输入图像描述](../Images/9b81164d4588936120757a47c9a6bff4.png)

**Q1：**这是否意味着同一个查询正在自己死锁？查询执行计划显示了一些并行情况。

**Q2：**有哪些可能的方法可以“强制”SQL Server 不使用并行性或至少尽可能避免使用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T20:34:43.933

**Q1：**没有。这只是意味着死锁涉及到 Exchange 操作员。在客户端，您将收到错误“事务（进程 ID n）在 {thread |**通信缓冲区**} 资源上与另一个进程死锁，并已被选为死锁受害者。”

这种死锁总是包括两个或更多进程，并且总是包括一个锁资源。

[这是此场景的重现](http://sqlindian.com/2012/07/06/deadlock-due-to-parallelism/)。在大多数情况下，拥有正确的索引将解决此问题。

当进程自身发生死锁时（在最新版本中非常罕见），它称为查询内并行死锁，您将收到类似“消息 8650，级别 13，状态 1，第 1 行查询内并行导致您的服务器命令（进程 ID n) 死锁。使用查询提示选项 (maxdop 1) 重新运行查询而不使用查询内并行性。有关详细信息，请参阅[此链接](http://blogs.msdn.com/b/bartd/archive/2008/09/24/today-s-annoyingly-unwieldy-term-intra-query-parallel-thread-deadlocks.aspx)。

**Q2：**请参阅 Denis 提供的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T11:51:36.923

查看[了解和使用 SQL Server 中的并行性](http://www.simple-talk.com/sql/learn-sql-server/understanding-and-using-parallelism-in-sql-server/)

您还想看看使用 MAXDOP 作为查询提示

有时您只需要一个索引，请参阅[显示并行性的修复执行计划](http://blogs.lessthandot.com/index.php/DataMgmt/DBProgramming/fix-execution-plan-showing-parallelism)

# java - 将 C++ 校验和函数转换为 Java

> ID：13839091
> 
> 赞同：1
> 
> 时间：2012-12-12T11:48:39.213
> 
> 标签：java, c++, checksum

我正在尝试将此 C++ 校验和转换为 Java，但目前我失败了。我究竟做错了什么？

它应该做什么？它应该为OpenGL中的缓冲区返回一个正校验和

这是C部分。

```
DWORD QuickChecksum(DWORD *data, int size){

if(!data) {
    return 0x0; 
}

DWORD sum;
DWORD tmp;
sum = *data;

for(int i = 1; i < (size/4); i++)
{
    tmp = data[i];
    tmp = (DWORD)(sum >> 29) + tmp;
    tmp = (DWORD)(sum >> 17) + tmp;
    sum = (DWORD)(sum << 3)  ^ tmp;
}

return sum;
} 
```

这是我在 Java 中尝试过的。据我所知，DWORD 是 32 位的，所以我在 long 中使用 int 来获得一个 unsigned int，这应该在 java 中使用 >>> 完成？

我一直在关注这个问题，以至于我对它视而不见。

```
public static long getChecksum(byte[] data, int size) {
    long sum, tmp;
    sum = getInt(new byte[]{data[0], data[1], data[2], data[3]},true) & 0xFF;
    for(int I = 4; I < data.length; I += 4)
    {
        tmp = getInt(new byte[]{data[I],data[I+1],data[I+2],data[I+3]},true) & 0xFF;
        tmp = (sum >>> 29) + tmp;
        tmp = (sum >>> 17) + tmp;
        sum = (sum << 3) ^ tmp;
    }
    return sum & 0xFF;
}

private static int getInt(byte[] bytes, boolean big) {
    ByteBuffer bb = ByteBuffer.wrap(bytes);
    return bb.getInt();
} 
```

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:58:39.607

明显的错误是，在三个地方，您将输入字和最终校验和与`0xff`相加，丢失了高 24 位。据推测，您正在尝试将`long`值减少到 32 位，这需要与`0xffffffffL`. 在执行此操作之前，您还需要将返回值转换为`getInt()`，`long`否则您仍然会得到您试图避免的符号扩展。

我的 Java 有点生疏了，但我很确定`int`只要你使用`>>>`右移（就像你做的那样），坚持使用 就会得到正确的结果。

您还有一个错误，您在没有检查输入是否为空的情况下无条件地读取前四个字节。

您还需要确保输入具有 4 个字节的倍数；通过检查长度，或者将其更改为使用`int[]`而不是`byte[]`像 C 版本那样。当然也不需要`size`参数，因为 Java 数组会随身携带它们的大小。

以下应该给出与 C 版本相同的结果：

```
public static int checksum(int[] data)
{
    if (data.length == 0) {
        return 0;
    }

    int sum = data[0];
    for (int i = 1; i < data.length; ++i) {
        int tmp = data[i];
        tmp = (sum >>> 29) + tmp;
        tmp = (sum >>> 17) + tmp;
        sum = (sum << 3)   ^ tmp;
    }

    return sum;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:00:53.617

在 Java 中，`>>>`执行无符号移位，这意味着它将位值 0 插入移入的新位，将负数变为正数。有符号移位`>>`扩展符号位，负值为 1，因此负数保持负数。

要修复您的代码，至少在您的 & 操作中替换`0xFF`为。`0xFFFFFFFF`另外，我认为您可能必须在每次分配时都这样做`tmp`and `sum`，而不仅仅是在循环之后一次（不是 100% 肯定，必须通过代码查看是否保留了正确的位，甚至没有额外的位潜入没有ANDing，所以安全总比抱歉好）。

我还会在方法中添加第一件事：

```
if (data.length & 3 != 0) 
    throw new IllegalArgumentException("byte buffer size not multiple of 4"); 
```

此外，我要么删除`size`参数，要么实际使用它而不是`data.length`（在检查它是否有效之后），以防数据可能比你想要处理的字节多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:02:56.023

C++ 版本返回 32 位`sum`，但您的 Java 版本返回`& 0xFF`，只剩下 8 位。

1.  您进行无符号移位`>>>`并定义所有其他操作，以便它们在有符号 Java 类型中的结果等于对 C++ 无符号类型的相同操作，但对有符号位的解释除外。所以你实际上可以`int`在这里使用。
2.  如果继续使用`long`，则需要使用`& 0xFFFFFFFF`才能获得 32 位。

# iphone - 单元自动释放和“发送到实例的无法识别的选择器”

> ID：13839093
> 
> 赞同：0
> 
> 时间：2012-12-12T11:48:50.203
> 
> 标签：iphone, ios, uitableview

可能我的代码在以下方法中崩溃，因为 getData() 仅在此方法结束时被调用一次。

此外 didSelectRowAtIndexPath 代码如下：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)newIndexPath
{
    [tableView deselectRowAtIndexPath:newIndexPath animated:YES];

    // Set 
    [[GlobalObject obj] setData:[(CustomCell*)[tableView cellForRowAtIndexPath:newIndexPath] getData]];
} 
```

由于未捕获的异常*“NSInvalidArgumentException”而终止应用程序，原因：“-[CustomCell getData]：**无法识别的选择器已发送到实例***。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{   
    if(indexPath.section == 0)
    {
        ...
        return cell;
    }
    else
    {
        // Create a button table view cell
        CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:@"CustomCell"];
        if (cell == nil) 
        {           
            cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CustomCell"] autorelease];
        }

         [cell setButton:[ ...];

        return cell;
    }
} 
```

如上所示，单元格是自动释放的，这可能是应用程序崩溃的原因。Cell 进入自动释放池，然后将 getData 发送到无法识别的选择器。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:54:44.847

CustomCell 没有名为 getData 的方法。
避免内联，一个接一个地编写语句。这有助于调试。然后，您可以轻松设置断点。

# delphi - 如何在 Delphi 中使用 Indy Client 从服务器读取所有字节？

> ID：13839094
> 
> 赞同：5
> 
> 时间：2012-12-12T11:48:52.783
> 
> 标签：delphi, delphi-xe2, indy, indy10

我正在使用 Indy 客户端来读取服务器发送给我（客户端）的消息。它一口气向我发送了 512 字节的数据。这 512 字节的数据由两种数据类型（Word 和 String）组成。例如，它发送 2 个字节的字，然后再发送 2 个字节的字，然后是 50 个字节的字符串，依此类推。我正在尝试以下代码来解决这个问题：

```
var BufferArray : Array[0..512] of Byte;

 if IdTCPClient1.IOHandler.InputBufferIsEmpty then
 begin
      if IdTCPClient1.IOHandler.CheckForDataOnSource(1000) then
      begin
          Edit1.Text := idtcpclient1.IOHandler.ReadBytes(BufferArray ,512, true);
      end;
 end; 
```

我在 Edit1.Text := idtcpclient1.IOHandler.ReadBytes(BufferArray ,512, true); 线上遇到错误 错误：实际和正式 var 参数的类型必须相同。

我使用的是正确的方法吗？我想在 Edit1.Text 上存储整个 512 个字节，然后对这些数据做任何我想做的事情。请帮助我从服务器获取所有 512 字节。

**更新：交替方法**

我正在使用这种方法来读取单词和字符串值

```
WordArray : array[0..5] of word;

 if IdTCPClient1.IOHandler.InputBufferIsEmpty then
 begin
      if IdTCPClient1.IOHandler.CheckForDataOnSource(1000) then
      begin
        i := 0;
        while i < 6 do //Read all the words
        begin
            //Fill WORD data in array
            WordArray[i] :=  (IdTCPClient1.Socket.ReadWord(True));
        end;
      end;
end; 
```

类似的字符串方法

WordArray[i] := (IdTCPClient1.Socket.ReadString(50));

那工作正常，但我必须在循环中读取所有数据时保持连接打开。如果在连接之间，我会丢失所有内容，并且必须再次从服务器请求整个包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:09:41.213

1：字符串的字符集是什么？它是 1 字节的 windows-1251 吗？还是 2 字节的 Unicode UCS-2 ？或可变长度 UTF-8 或 UTF-16 ？

2：字符串的长度是多少？总是50？

* * *

读取缓冲区：

1.  阅读手册
    1.1 [http://www.indyproject.org/docsite/html/TIdIOHandler_ReadBytes@TIdBytes@Integer@boolean.html](http://www.indyproject.org/docsite/html/TIdIOHandler_ReadBytes@TIdBytes@Integer@boolean.html)
    1.2 [http://www.indyproject.org/docsite/html/TIdIOHandler_ReadSmallInt@Boolean.html](http://www.indyproject.org/docsite/html/TIdIOHandler_ReadSmallInt@Boolean.html) 1.3 [http： //docwiki.embarcadero.com/Libraries/XE2/en/System.SetString](http://docwiki.embarcadero.com/Libraries/XE2/en/System.SetString)
2.  使代码准确地遵循类型和参数描述。
    2.1 阅读标题：这应该会导致类似

    ```
    var  Word1, Word2: word;

    Word1 := IOHandler.ReadSmallInt(false);   
    Word2 := IOHandler.ReadSmallInt(false); 
    ```

3.  读取单字节字符串
    3.1 读取缓冲区
    3.2 将缓冲区转换为字符串

    ```
    var  Word1, Word2: word;  Buffer: TIdBytes;    
    var s: RawByteString;     
     // or AnsiString; or maybe UTF8String; but probably not UnicodeString aka string

    Word1 := IOHandler.ReadSmallInt(false);   
    Word2 := IOHandler.ReadSmallInt(false);

    // You should check that you really received 50 bytes,
    // then do something like that:

    IOHandler.ReadBytes(Buffer, 50, false);    
    Assert(Length(Buffer)=50);    
    SetString (s, pointer(@Buffer[0]), 50); 
    ```

4.  继续阅读其余部分——你只阅读了 512 字节数据包的 50+2+2 = 54 字节——应该还有更多数据。

512 = 54*9+26 - 所以它可能看起来像一个循环 - 并丢弃 26 字节尾部。

```
 var Word1, Word2: word;  Buffer: TIdBytes;    
    var s: RawByteString;     

    for i := 1 to 9 do begin    
      Word1 := IOHandler.ReadSmallInt(false);     
      Word2 := IOHandler.ReadSmallInt(false);  

      IOHandler.ReadBytes(Buffer, 50, false);        
      Assert(Length(Buffer)=50);      
      SetString (s, pointer(@Buffer[0]), 50);    

      SomeOutputCollection.AppendNewElement(Word1, Word2, s);   
    end;   
    IOHandler.ReadBytes(Buffer, 512 - 9*(50+2+2), false); // discard the tail 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T00:58:57.777

除非您准确描述您所拥有的文档中所写的内容，否则很难回答您。到目前为止，我们知道您的 512B 数据包由 6 个单词和 10x50B 字符串组成。因此，请以此为起点，直到您告诉我们更多信息：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
  Buffer: TBytes;
  WordArray: array[0..5] of Word;
  StringArray: array[0..9] of AnsiString;
begin
  if IdTCPClient1.IOHandler.InputBufferIsEmpty then
  begin
    if IdTCPClient1.IOHandler.CheckForDataOnSource(1000) then
      IdTCPClient1.IOHandler.ReadBytes(Buffer, 512, False);

    for I := 0 to High(WordArray) do
    begin
      WordRec(WordArray[I]).Hi := Buffer[I * 2];
      WordRec(WordArray[I]).Lo := Buffer[I * 2 + 1];
    end;
    for I := 0 to High(StringArray) do
      SetString(StringArray[I], PAnsiChar(@Buffer[I * 50 + 12]), 50);

    // here you have the arrays prepared to be processed
  end;
end; 
```

# c# - .NET Winforms 垂直进度条文本

> ID：13839096
> 
> 赞同：2
> 
> 时间：2012-12-12T11:48:54.100
> 
> 标签：c#, .net, winforms, wndproc, createparams

最近，我的 win 表单应用程序需要一个垂直进度条。派生类如下所示。我还需要在进度条上添加文本。由于透明度问题，它上面的标签不起作用。经过一番研究，我发现了一些东西。但问题是，虽然进度条是垂直的，但它上面的文本却是水平的。我也需要垂直的。我怎样才能做到这一点？

谢谢。

```
public class VProgressBar : ProgressBar
{
    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams cp = base.CreateParams;
            cp.Style |= 0x04;

            if (Environment.OSVersion.Platform == PlatformID.Win32NT && Environment.OSVersion.Version.Major >= 6)
            {
                cp.ExStyle |= 0x02000000; // WS_EX_COMPOSITED 
            }

            return cp;
        }
    }

    protected override void WndProc(ref Message m)
    {
        base.WndProc(ref m);
        if (m.Msg == 0x000F)
        {
            using (Graphics graphics = CreateGraphics())
            using (SolidBrush brush = new SolidBrush(ForeColor))
            {
                SizeF textSize = graphics.MeasureString(Text, Font);
                graphics.DrawString(Text, Font, brush, (Width - textSize.Width) / 2, (Height - textSize.Height) / 2);
            }
        }
    }

    [EditorBrowsable(EditorBrowsableState.Always)]
    [Browsable(true)]
    public override string Text
    {
        get
        {
            return base.Text;
        }
        set
        {
            base.Text = value;
            Refresh();
        }
    }

    [EditorBrowsable(EditorBrowsableState.Always)]
    [Browsable(true)]
    public override Font Font
    {
        get
        {
            return base.Font;
        }
        set
        {
            base.Font = value;
            Refresh();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:57:37.273

您需要使用[StringFormat](http://msdn.microsoft.com/en-us/library/system.drawing.stringformat.aspx)使用标志垂直绘制字符串。`WndProc`在您的方法中尝试以下操作：

```
 protected override void WndProc(ref Message m)
    {
        base.WndProc(ref m);
        if (m.Msg == 0x000F)
        {
            using (Graphics graphics = CreateGraphics())
            using (SolidBrush brush = new SolidBrush(ForeColor))
            {
                StringFormat format = new StringFormat(
                       StringFormatFlags.DirectionVertical);

                SizeF textSize = graphics.MeasureString(Text, Font);
                graphics.DrawString(
                     Text, Font, brush, 
                     (Width / 2 - textSize.Height / 2),
                     (Height / 2 - textSize.Width / 2),
                     format);
            }
        }
    } 
```

# c# - WPF MVVM 应用程序服务层中的 ObservableCollection

> ID：13839097
> 
> 赞同：7
> 
> 时间：2012-12-12T11:48:53.993
> 
> 标签：c#, .net, mvvm, observablecollection, service-layer

我在 Internet 上看到的 WPF MVVM 应用程序示例将 VM 视为与服务层交互的层，该服务层要么使用来自外部库的“旧”事件，要么使用 HTTP 或其他方式与 Web 交互。但是如果我自己构建所有的 M、V、VM、服务和其他部分呢？如何正确构建服务层和视图模型层之间的交互？我可以直接放入`ObservableCollection<OrderModel>`服务并从视图的视图模型中返回它，还是它被认为是一种不好的方法并且有更好的选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T12:01:42.237

You can do this - of course you can. The primary reason to do such a thing would be to reduce duplication across multiple WPF applications.

However, a challenge you might have in some scenarios, depending on your service layer/data layer implementation, is long-running services that in turn use database connections. ObservableCollections are enticing from the point of view of having the service layer automatically synchronising changes made by an application to a data store; however it gets complicated when you want to communicate changes that originate from the data itself (i.e. in response to some other process that creates/modifies data).

The service layer can't really replace the instance (i.e. in the case of large-scale changes), since it is no longer the sole owner of the reference - but even if it could, replacing the instance would pretty much break any binding the UI has to the collection.

So you stick to trying to keep the one instance up to date. If your services are bound to a database, then unless you code-up some form of long-running monitoring process within your service, the only simple way to keep an ObservableCollection up to date after it's been dished out would be to hold database connections/contexts (in the case of Linq to Sql or EF) open - because otherwise related objects etc are not going to be able to retrievable (unless you force all objects to be read in one go - which is not scalable).

Okay, so it's possible to write some form of management layer which can manage the connections for you - but in addition to the inevitable polling, or perhaps SQL Server notifications that you might use, I believe the code might get quite complicated.

That said, it really does depend - that particular issue is one to look out for, but it might be that you have an architecture and environment in which such things simply don't matter.

My advice, if you want to try it - go ahead. For me? I've thought about it - and beyond adding INotifyPropertyChanged to some domain models, I stick to the idea that an application has it's own VM. Multiple applications might share the same VM - but that won't be internal to the service layer itself.

A service layer provides access to data and business logic in a typically one-shot way. Classes in the VM pattern are intended to have a much longer lifespan - and trying to code a long-running service layer is notoriously very hard to do - especially if you want it to try and solve all the problems that all future applications might present. Inevitably you will end up coding services or VM types within the service layer for a single application only - in which case it might as well have gone in that App's codebase.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T12:23:57.247

我很想只从“可观察”方面相关的点使用 ObservableCollection，这通常是 VM 向 V 暴露一些东西。在堆栈的更下方（即 M）我很想坚持使用更通用的东西，比如列表和集合（除非你特别需要其他东西）。在任何情况下，VM 都可以轻松地基于任何旧的 IEnumerable 创建 ObservableCollection。

不过，这是一个合理的问题，尤其是 ObservableCollection 在 System.Collections 命名空间中的位置似乎表明 Microsoft 并不特别认为这是一个专门的类（当然也不是 wpf 特定的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:58:39.033

出于多种原因，我不会这样做。它们在此处记录：[可观察集合的常见错误](http://updatecontrols.net/doc/tips/common_mistakes_observablecollection)

作者经历了人们在使用它们时犯的几个错误，包括在服务层中使用它们。

# java - 投资银行业务的摇摆

> ID：13839098
> 
> 赞同：0
> 
> 时间：2012-12-12T11:48:56.067
> 
> 标签：java, swing, banking

为什么在投资银行的视图层中如此主要地使用 Swing？很少有 IB 敢于尝试新技术？有什么优点/原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:53:30.110

从未在投资银行工作过，这纯粹是猜测，但大多数后端系统将被编写为 Java EE 或基于 Spring 的 Java 服务。如果 UI 仅供内部使用，那么在拥有 Java 开发人员可以完成工作的情况下，聘请具有不同技能的 UI 开发人员团队是没有意义的。

# objective-c - IOBluetoothRFCOMMChannel：如何使用 writeSync？

> ID：13839099
> 
> 赞同：0
> 
> 时间：2012-12-12T11:48:55.147
> 
> 标签：objective-c, macos, iobluetooth

我需要将一个从“a”到“o”的值写入蓝牙设备。该设备使用**SPP**，我已经通过`IOBluetoothRFCOMMChannel`. 有类似的功能，`writeSync:lenght:`但我该如何使用它们？正如我所说，我需要将值从“a”发送到“o”

我试过了：

```
[rfcommChannel writeSync:"a" length:1]; 
```

但它不起作用。

苹果有一个示例代码：

```
[rfcommChannel writeSync:"ATZ\n" length:4]; 
```

但我不确定“ATZ”是什么意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:19:18.000

找到了答案：

```
- (void) sendData:(NSString *)string toChannel:(IOBluetoothRFCOMMChannel*)rfcommChannel
{
    int i;
    // Turn the string into data.
    NSData *data = [string dataUsingEncoding:NSASCIIStringEncoding];
    char buffer[ [data length] +4];
    char *bytes = (char *) [data bytes];
    // Add a CRLF to the start
    buffer[0] = 13;
    buffer[1] = 10;
    // Copy the data into the buffer.
    for (i=0;i<[data length];i++)
    {
        buffer[2+i] = bytes[i];
    }
    // Append a CRLF
    buffer[ [data length]+2]  = 13;
    buffer[ [data length]+3]  = 10;
    // Synchronously write the data to the channel.
    [rfcommChannel writeSync:&buffer length:[data length]+4];
} 
```

对于我的具体情况：

```
[self sendData:@"a" toChannel:self.rfcommChannel]; 
```

# node.js - 在 Node.JS 中从自身内部杀死一个子进程

> ID：13839101
> 
> 赞同：5
> 
> 时间：2012-12-12T11:49:01.130
> 
> 标签：node.js, kill-process, child-process

有没有办法杀死让子进程“自杀”？我试过了，`process.exit(1)`但显然它会杀死我正在运行的整个应用程序。我只想杀死子进程（就像我们`process.kill()`从子进程的“父亲”调用时一样）。在子进程中调用`process.kill()`也会杀死整个应用程序。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:53:28.973

`process`始终是对主进程的引用。但是你可以简单地使用这个：

```
var spawn = require( "child_process" ).spawn;

// example child process
var grep = spawn( "grep", [ "ssh"] );

grep.on( "exit", function (code, signal) {
    console.log( "child process terminated due to receipt of signal "+signal);
});

grep.kill( "SIGHUP" ); 
```

我想这取决于您如何使用子进程。但是，如果您没有对子进程的引用，那么您无能为力。

**警告：**杀死子进程几乎不是一个好主意。您应该向子进程发送消息并在该进程中处理它。

# iphone - 为什么选择元素不适用于默认 Magento 1.7 iphone 主题的某些 Android 浏览器/版本？

> ID：13839102
> 
> 赞同：0
> 
> 时间：2012-12-12T11:49:01.730
> 
> 标签：iphone, magento, mobile, select, themes

[我在Magento 1.7 默认 iphone 主题](http://demo.magentocommerce.com/coalesce-functioning-on-impatience-t-shirt.html)上遇到了一个可配置产品的奇怪问题。如果我使用移动设备（Android 2.3.3/默认浏览器）访问此站点，我无法从 select-element 中选择产品选项。不过，它在 Firefox 和 Opera 的相同设备和移动版本上运行良好。

在我同事的移动设备（Android 4，默认浏览器）上，它运行良好。这种行为的原因可能是什么，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T03:37:34.000

当我从页眉和页脚（之前和之后）中删除 data-position="fixed" 时，选择要返回的菜单。然后我回到原来的例子，只做了一个改变，发现它也解决了那里的问题。

# mysql - 使用 if 语句更新表

> ID：13839106
> 
> 赞同：0
> 
> 时间：2012-12-12T11:49:11.143
> 
> 标签：mysql

我正在尝试使用此命令`saving.balance`使用 IF 语句进行更新：

```
UPDATE TABLE saving s, time t
SET s.balance = IF(t.currency_TYPE = ‘RMB’, s.balance + t.balance * t.interest)
WHERE t.ID = 'input'
AND s.User = t.User; 
```

但是，MySQL 给了我`ERROR 1064`，有什么问题以及如何纠正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:53:51.187

您忘记了 IF 函数和其他语法内容中的第三个参数:-)

为什么你让你的脚本不在哪里？像这样：

```
UPDATE saving s
INNER JOIN time t
    ON t.ID = 'input'
    AND t.User = s.User
SET s.balance = s.balance + t.balance * t.interest
WHERE t.currency_TYPE = 'RMB'; 
```

您将仅使用currency_type rmb 更新记录！

或者

```
UPDATE saving s
INNER JOIN time t
    ON t.ID = 'input'
    AND t.User = s.User
SET s.balance = (t.currency_TYPE = 'RMB', s.balance + t.balance * t.interest, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:55:50.403

试试这个：

```
UPDATE saving s
INNER JOIN `time` t ON s.`User` = t.`User`
SET s.balance = CASE 
                  WHEN t.currency_TYPE = 'RMB' THEN s.balance + 
                                                    t.balance * t.interest
                  ELSE s.balance -- Don't forgot this, default is NULL
                END
WHERE t.ID = 'input'; 
```

**或者：**

```
UPDATE saving s
INNER JOIN `time` t ON s.`User` = t.`User`
SET s.balance = s.balance + t.balance * t.interest
WHERE t.ID = 'input'
  AND t.currency_TYPE = 'RMB' ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T11:51:13.137

您需要提及其他部分

```
UPDATE TABLE saving s, time t
SET s.balance = IF(t.currency_TYPE = ‘RMB’, s.balance + t.balance * t.interest , 0)
WHERE t.ID = 'input'
AND s.User = t.User; 
```

# ruby-on-rails - 动作中缺少模板

> ID：13839109
> 
> 赞同：1
> 
> 时间：2012-12-12T11:49:22.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redirect, missing-template

我在 UsersController 中写了一个“跟随”方法

```
def start_following
    @user = current_user
    @user_to_follow = User.find(params[:id])
    unless @user_to_follow == @user
        @follow_link = @user.follow_link.create(:follow_you_id => @user_to_follow.id, :user_id => @user.id)
        @user.save
        flash[:start_following] = "You started following" + @user_to_follow.name 
    else
        flash[:cant_follow] = "You cannot follow yourself"
    end
end 
```

很简单。在视图中，我有

```
<%= link_to 'Follow', follow_user_path(@user) %> 
```

在路线中，

```
resources :users do
 member do
    get 'follow' => "users#start_following", :as => 'follow' 
```

当我点击链接时，它抱怨：`Missing template users/start_following`

那么，如何让它在操作后停留在同一页面上？我想留在的视图页面是 Show view of the user is to be follow。例如：用户/{user_id}。只是重定向不是解决方案吗？我认为添加`redirect_to {somewhere}`会消除错误，但事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:52:38.613

我会重定向到有问题的用户。如果您使用的是标准资源丰富的路线，那么您可以这样做

```
redirect_to(@user_to_follow) 
```

顺便说一句，通常认为让 GET 请求进行更改是不好的做法——人们通常对这些请求使用 put/patch/post/delete 请求。您可能会在用户没有实际点击链接的情况下与浏览器预取链接发生冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T11:54:03.937

尝试：

```
redirect_to :back, :notice => "successfully followed someone..." 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T11:52:59.017

是`redirect_to`的，可以解决您的问题，我怀疑您忘记将其添加到`unless`

代码如下所示：

```
def start_following
    @user = current_user
    @user_to_follow = User.find(params[:id])
    unless @user_to_follow == @user
        @follow_link = @user.follow_link.create(:follow_you_id => @user_to_follow.id, :user_id => @user.id)
        @user.save
        flash[:start_following] = "You started following" + @user_to_follow.name 
    else
        flash[:cant_follow] = "You cannot follow yourself"
    end
    redirect_to @user_to_follow
end 
```

# iphone - iphone 应用程序中在线支付的实施

> ID：13839111
> 
> 赞同：-1
> 
> 时间：2012-12-12T11:49:29.717
> 
> 标签：iphone, ios, xcode

我必须在我的应用程序中实施在线支付方式来销售一些产品，如礼品。我将使用哪种方法？在应用程序购买或贝宝中？贝宝实施的应用程序是否在应用商店接受？请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:32:52.137

如果它们是可以在应用程序之外使用的实际项目。就像一本书或 DVD，而不是在应用程序中使用的东西，你需要使用 paypal 或类似的东西。应用内购买仅用于购买应用内的附加功能或额外内容。另请参阅[Apple 文档](http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/13_ManagingIn-AppPurchases_Robert/ManagingIn-AppPurchases.html)

接受应用内购买以外的其他支付方式的应用，只要购买不为您的应用添加功能或内容即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:34:20.887

要回答你的问题，让我们了解两个基本的事情：

1.  您仅在购买实物商品（如您提到的礼品）时才使用 Paypal 实施。

2.  当您需要在应用程序本身中提供/解锁某些功能时，您可以使用应用内购买。

在您提到的情况下，您需要进行礼品交易，您只有一个选择，即使用在线交易 API，如 Paypal。

关于你的第二个问题，是的，Paypal 集成的应用程序在 App Store 中被接受。App Store 中已经有很多这样的应用程序

# javascript - Ecmascript 6 是否支持可变的 __proto__ 属性？

> ID：13839115
> 
> 赞同：5
> 
> 时间：2012-12-12T11:49:45.637
> 
> 标签：javascript, ecmascript-6

在当前的 Ecmascript 6 草案（2012 年 11 月）中，官方支持该`__proto__`属性（第 B.3.1 节）。这有点令人惊讶，因为在当前的浏览器实现中，该`__proto__`属性已被弃用。

如果当前草案成立，ES6 会完全支持可变原型吗？我能否像目前在 Firefox 中那样为现有对象提供新原型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T14:14:12.990

目前，计划将 mutable`__proto__`放在规范中（而不仅仅是在附件 b 中）。目前的计划是让它成为一个神奇的数据属性，仅存在于 Object.prototype 上并充当访问器（神奇的部分）。此属性也将是可删除的，删除`__proto__`时删除该领域的变异能力。我已经`__proto__`在我的 ES6 虚拟机[http://benvie.github.com/continuum](http://benvie.github.com/continuum)中实现了这个描述。

最初它要被弃用和替换，但没有就替换达成共识。从内置继承的能力是最终目标，并且决定`__proto__`是已经广泛传播（除了即拥有它之外的所有东西）并实现了这个目标，因此阻力最小的路径是接受和编码它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-24T06:21:13.780

根据 Ecmascript 6 发布的文档，[`__proto__`](http://www.ecma-international.org/ecma-262/6.0/index.html#sec-object.prototype.__proto__)仍然存在，但正如[Bergi](https://stackoverflow.com/questions/13839115/does-ecmascript-6-support-a-mutable-proto-property#comment41525657_13841694)和[MattBrowne](https://stackoverflow.com/questions/13839115/does-ecmascript-6-support-a-mutable-proto-property#comment47084024_13841694)在上述解决方案中指出的那样，我们可以[`Object.setPrototypeOf`](http://www.ecma-international.org/ecma-262/6.0/index.html#sec-object.setprototypeof)使用`__proto__`.

> 当使用参数 O 和 proto 调用 setPrototypeOf 函数时，将执行以下步骤：
> 
> *   令 O 为 RequireObjectCoercible(O)。
> *   ReturnIfAbrupt(O)。
> *   如果 Type(proto) 既不是 Object 也不是 Null，则抛出 TypeError 异常。
> *   如果 Type(O) 不是 Object，则返回 O。
> *   让状态为 O.[SetPrototypeOf]。
> *   ReturnIfAbrupt（状态）。
> *   如果 status 为 false，则抛出 TypeError 异常。
> *   返回 O。

# jquery - 为什么我的 if/else...if 语句不起作用？

> ID：13839119
> 
> 赞同：0
> 
> 时间：2012-12-12T11:49:58.710
> 
> 标签：jquery, if-statement

显示一张图片，您可以单击一个按钮。如果按钮类与图片的类匹配（即您是正确的） - 我想打印一条消息。我是。

但是，如果类不匹配，我希望显示一条消息，说明猜测错误。它更容易显示。所以这是我的jQuery：

```
$(document).ready(function(){

$('.left').hide();
$('.right').hide();

$('.happy').click(function(){

    $('.left').show();
    $('.right').show();

    if($(this).hasClass('happy') && $("img").hasClass('happy')){
        $('h2').replaceWith("<h2>You are correct!</h2>");
    }else if(!$('img').hasClass('happy')){
    alert("LOL");
    };
});
}); 
```

我的代码的第一部分，如果按下按钮，则显示 h2 - 有效。但第二部分 - else if( **!** $('img').hasClass('happy')) - 没有。为什么？

我的 HTML：http: [//jsfiddle.net/WEAt6/3/](http://jsfiddle.net/WEAt6/3/)

```
<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="stylesheet.css">
    <title>
       gzzzz
    </title>
</head>

<body>
    <div id="container">
        <div id="answers">
        <div class="sadness">
            <p class="feelings">SADNESS</p>
        </div>
        <div class="anger">
            <p class="feelings">ANGER</p>
        </div>
        <div class="surprise">
            <p class="feelings">SURPRISE</p>
        </div>
        <div class="fear">
            <p class="feelings">FEAR</p>
        </div>
        <div class="disgust">
            <p class="feelings">DISGUST</p>
        </div>
        <div class="contempt">
            <p class="feelings">CONTEMPT</p>
        </div>
        <div class="happy">
            <p class="feelings">HAPPINESS</p>
        </div>

        </div>

        <div class="thegame">
            <div class="pic">
                <img class="left" src="http://upload.wikimedia.org/wikipedia/commons/5/55/Happy_man.jpg"/ >
            </div>
            <div class="pic">
                <img class="happy" src="http://upload.wikimedia.org/wikipedia/commons/5/55/Happy_man.jpg"/ >
            </div>
            <div class="pic">
                <img class="right" src="http://upload.wikimedia.org/wikipedia/commons/5/55/Happy_man.jpg"/ >
            </div>
        </div>

        <div id="score">
            <h2></h2>
            </div>
    </div>
</body>
<script src="jQuery.js"></script>
<script src="stuff.js"></script>
</html>
​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T11:52:08.050

`if`您的陈述的逻辑有**两个**条件。所以它可能`$(this).hasClass('happy')`是假的，但`$("img").hasClass('happy')`（在`else if`）是真的，所以`if`块和`else if`块的代码都不会运行。

一些旁注：

1.  `$("img").hasClass('happy')`会告诉你文档中是否**有任何** `img`类`happy`。~~您没有引用您的 HTML，但似乎值得一提。~~所以，既然你确实有那个班级的形象，那将永远是真的。如果你想检查一个特定的图像，要么给它第二个类并使用`$("img.theOtherClass").hasClass("happy")`，或者你可以按位置来做：`$("img").first().hasClass("happy")`对于第一个，`$("img").eq(1).hasClass('happy')`对于第二个（`eq`基于 0）等等。

2.  `$('h2').replaceWith("<h2>You are correct!</h2>");``h2`用另一个 new替换`h2`。只是改变它的*内容*可能更好：`$('h2').html('You are correct!');`。

3.  上面 #2 中的代码（您的和我的）将更改文档中的**所有** `h2`元素。同样，也许这很好，但似乎值得强调。您可能会考虑`$("#score h2").html("You are correct!");`是否只想使用`id` `"score"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:53:44.297

你为什么用一个`else if`？当然，您正在检查 is 是否有课程。无需进行第二次比较。只需使用`else`

```
if($(this).hasClass('happy') && $("img").hasClass('happy')){
    $('h2').replaceWith("<h2>You are correct!</h2>");
}else {
    alert("LOL");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:04:06.793

错误在日志中，请查看演示： [DEMO](http://jsfiddle.net/WEAt6/5/)

```
$('#answers div').click(function(){

        $('.left').show();
        $('.right').show();

        if($(this).hasClass('happy') && $("img").hasClass('happy')){

            $('h2').replaceWith("<h2>You are correct! Happiness looks the same on everybody.</h2>");
            setTimeout(trolli,2000);
            function trolli(){

             sadgame = $('.thegame').html('<div class="pic"><img class="left" src="http://f1.pepst.com/c/01850B/322662/ssc3/home/062/dard-sms/sad_wom_an.jpg_480_480_0_64000_0_1_0.jpg"/ ></div><div class="pic"><img class="sadness" src="http://f1.pepst.com/c/01850B/322662/ssc3/home/062/dard-sms/sad_wom_an.jpg_480_480_0_64000_0_1_0.jpg"/ ></div><div class="pic"><img class="right" src="http://f1.pepst.com/c/01850B/322662/ssc3/home/062/dard-sms/sad_wom_an.jpg_480_480_0_64000_0_1_0.jpg"/ ></div>');
            $('h2').replaceWith("<h2>What emotion is being shown?</h2>");
            $('.left').hide();
            $('.right').hide();

            }

        }else if(!$(this).hasClass('happy')){
            alert("LOL");
        };
    }); 
```

# python - 如果放在模块中，Python 无法导入名称

> ID：13839120
> 
> 赞同：1
> 
> 时间：2012-12-12T11:50:02.150
> 
> 标签：python, import

> **可能重复：**
> [如何在 Python 中进行相对导入？](https://stackoverflow.com/questions/72852/how-to-do-relative-imports-in-python)

我正在经历一些对我来说似乎很随机的事情。

我有一个非常像这样的文件夹结构：

```
dir A
    __init__.py is empty
    a.py imports stuff and b.py
dir B
    __init__.py is empty
    b.py imports NOTHING 
```

a.py 引发错误（无法导入名称 b）。这只发生在 b 是模块 B 的一部分时。如果我将它移到目录之外，则不会发生导入错误。

任何帮助，将不胜感激。我一定是忽略了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T11:53:30.717

您是否尝试过[相对导入](http://docs.python.org/2/tutorial/modules.html#intra-package-references)

```
from ..B import b 
```

?

* * *

编辑：如果包裹的位置无关紧要，这不适用`B`。

但是你没有描述你到底做了什么。您可能知道与否，有几种导入形式：

```
import module
import package # imports package.__init__ under the name package
import package.module
from package import module
import package
from module import component
from package.module import component 
```

正如你只写

> a.py 进口东西和 b.py

我不知道到底发生了什么：如果你尝试

```
import b 
```

那失败了，因为`b`生活在 package 中`B`。所以你需要一个

```
from B import b
import B.b 
```

您上面的评论提到了名称冲突。两个同名的包和模块中的哪一个具有优先级取决于您所在的目录：`'.'`通常位于 的开头`sys.path`，因此，如果您直接位于`utils`目录下，则可能会有不同的体验。

# python - Python TKInter破坏不起作用

> ID：13839123
> 
> 赞同：1
> 
> 时间：2012-12-12T11:50:09.787
> 
> 标签：python, user-interface, tkinter, destroy

我正在尝试关闭 TKInter 窗口`self.win.destroy`。

`bind`将事件发送到按钮时会引发以下错误：

```
...
Can't invoke "bind" command: application has been destroyed
During handling the above exception, another exception occured:
...
Can't invoke "destroy" command: application has been destroyed 
```

如何将“关闭窗口”命令绑定到按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:29:28.503

做这个：

```
button['command'] = root_window.destroy # give it the function
# when the button is pressed the call () is done 
```

不要这样做：

```
button.bind('<Button-1>', root_window.destroy()) # () makes the call 
```

因为

```
root_window.destroy() 
```

`button.bind`在调用之前销毁窗口。

这也是错误的：但不会破坏根窗口：

```
button.bind('<Button-1>', root_window.destroy) 
```

因为

*   无法用键盘触发按钮
*   `root_window.destroy(event)`被调用但`root.destroy()`只接受一个参数。

这也有效：

```
button.bind('<Button-1>', lambda event: root_window.destroy()) 
```

# javascript - 使用 Jquery 设置表单跟踪

> ID：13839124
> 
> 赞同：0
> 
> 时间：2012-12-12T11:50:13.773
> 
> 标签：javascript, jquery, forms

我需要设置一个自定义脚本来跟踪用户点击表单提交字段。这就是我到目前为止所得到的。当用户在表单字段中向下导航时，计数器变量（基数）总计用户沿着路径到达的距离。我想在用户离开页面时通过发送基本变量来发送结果。我正在考虑在 jQuery 中使用 .unload 函数。但是由于某种原因，卸载没有按照我认为的方式响应。有任何想法吗？

```
var base = 0; //declares a variable of 0\. This should refresh when a new user lands on the form page. 

function checkPath(fieldNo, path) { //this function should check the current base value of the base variable vs the current fieldNo
    if (fieldNo >= path) { //checks to see if base if lower than fieldNo
        base = fieldNo; //if true, base is set to current fieldNo 
        return base;
    } else {
        return base; //if false, simply returns base. 
    }
};

$('#order_customer_fields_forename').focus(function () { //when the form box is selected should run checkPath then alert result. 
    checkPath(1, base);
});
$('#order_customer_fields_surname').focus(function () {
    checkPath(2, base);
});
$('#order_customer_fields_postcode').focus(function () {
    checkPath(3, base);
});
$('#order_customer_fields_address1').focus(function () {
    checkPath(4, base);
});
$('#order_customer_fields_address2').focus(function () {
    checkPath(5, base);
});

$(window).unload(function () {
    alert(base);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:39:06.370

对于您需要的效果，该`unload`事件触发得太晚了。您应该尝试使用`onbeforeunload`香草 Javascript 来使用该事件：

```
window.onbeforeunload = function (e) {
    // Your code here
}; 
```

或 jQuery：

```
$(window).bind('beforeunload', function (e) {
    // Your code here
}); 
```

无论哪种方式，您都应该意识到这不是您要实现的目标的理想解决方案。此事件在浏览器中的实现不均衡。Chrome 在其实施中似乎是最严格的，而 IE 是最宽松的。

您可能想要采取的另一个方向是每当用户完成一个字段时通过 XHR 将数据发送到服务器。

# c# - 我有这个函数我在最后一行得到一个错误：return l; 会是什么呢？

> ID：13839128
> 
> 赞同：0
> 
> 时间：2012-12-12T11:50:29.647
> 
> 标签：c#

```
 public static long[] GetHistogramRGB(Bitmap b)
        {
            long[] myHistogramBlue = new long[256];
            long[] myHistogramGreen = new long[256];
            long[] myHistogramRed = new long[256];
            BitmapData bmData = null;

            try
            {
                //Lock it fixed with 32bpp
                bmData = b.LockBits(new Rectangle(0, 0, b.Width, b.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
                int scanline = bmData.Stride;
                System.IntPtr Scan0 = bmData.Scan0;
                unsafe
                {
                    byte* p = (byte*)(void*)Scan0;
                    int nWidth = b.Width;
                    int nHeight = b.Height;
                    for (int y = 0; y < nHeight; y++)
                    {
                        for (int x = 0; x < nWidth; x++)
                        {
                            long Temp = 0;
                            Temp += p[0];
                            myHistogramBlue[Temp]++;

                            long Temp2 = 0;
                            Temp2 += p[1];
                            myHistogramGreen[Temp2]++;

                            long Temp3 = 0;
                            Temp3 += p[2];
                            myHistogramRed[Temp3]++;

                            //we do not need to use any offset, we always can increment by pixelsize when
                            //locking in 32bppArgb - mode
                            p += 4;
                        }
                    }
                }
                b.UnlockBits(bmData);
            }
            catch
            {
                try
                {
                    b.UnlockBits(bmData);
                }
                catch
                {
                }
            }

            List<long[]> l = new List<long[]>();
            l.Add(myHistogramBlue);
            l.Add(myHistogramGreen);
            l.Add(myHistogramRed);

            return l;

        } 
```

在最后一行返回 l; 我收到错误：

```
Cannot implicitly convert type 'System.Collections.Generic.List<long[]>' to 'long[]' 
```

## 我该如何解决？

我试着这样做：

```
public static long[] GetHistogramRGB(Bitmap b)
        {
            long[] myHistogramBlue = new long[256];
            long[] myHistogramGreen = new long[256];
            long[] myHistogramRed = new long[256];
            BitmapData bmData = null;

            try
            {
                //Lock it fixed with 32bpp
                bmData = b.LockBits(new Rectangle(0, 0, b.Width, b.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
                int scanline = bmData.Stride;
                System.IntPtr Scan0 = bmData.Scan0;
                unsafe
                {
                    byte* p = (byte*)(void*)Scan0;
                    int nWidth = b.Width;
                    int nHeight = b.Height;
                    for (int y = 0; y < nHeight; y++)
                    {
                        for (int x = 0; x < nWidth; x++)
                        {
                            long Temp = 0;
                            Temp += p[0];
                            myHistogramBlue[Temp]++;

                            long Temp2 = 0;
                            Temp2 += p[1];
                            myHistogramGreen[Temp2]++;

                            long Temp3 = 0;
                            Temp3 += p[2];
                            myHistogramRed[Temp3]++;

                            //we do not need to use any offset, we always can increment by pixelsize when
                            //locking in 32bppArgb - mode
                            p += 4;
                        }
                    }
                }
                b.UnlockBits(bmData);
            }
            catch
            {
                try
                {
                    b.UnlockBits(bmData);
                }
                catch
                {
                }
            }

            var l = new Dictionary<string, long[]>();
            l.Add("blue", myHistogramBlue);
            l.Add("green", myHistogramGreen);
            l.Add("red", myHistogramRed);

            return l;

        }

Error 2 Cannot implicitly convert type 'System.Collections.Generic.Dictionary<string,long[]>' to 'long[]' 
```

我现在在另一个类中使用这个函数调用，如下所示：

```
long[] HistogramsValuesRGB = Form1.GetHistogramRGB(original_bmp); 
```

这不会给出任何错误，错误在于返回 l 时 Form1 中的函数本身；

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T11:52:30.593

你`l`是一个数组列表，但你的结构的返回类型是一个数组。

如果需要返回单个数组：

```
List<long> l = new List<long>();
l.AddRange(myHistogramBlue);
l.AddRange(myHistogramGreen);
l.AddRange(myHistogramRed);

return l.ToArray(); 
```

如果需要返回数组*列表*，请将返回类型从 更改`long[]`为`List<long[]>`。虽然在这种情况下，我可能会使用 a`Dictionary<string,long[]>`来存储每个数组的名称：

```
var l = new Dictionary<string,long[]>();
l.Add("blue", myHistogramBlue);
l.Add("green", myHistogramGreen);
l.Add("red", myHistogramRed); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:53:34.640

您的方法应该返回一个 longs ( `long[]`) 数组。

您正在尝试返回 longs ( `List<long[]>`) 数组的列表。

您可以：

A）更改方法签名以返回`List<long[]>`

或者

B) 使用 . 将 long 列表展平为 long 数组`SelectMany()`。IE

```
return l.SelectMany(v => v).ToArray(); 
```

**编辑**

C）@Oded 的建议：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T11:54:59.127

您的返回类型与您的函数类型不同：

```
functiontype:  long[]
return type: List<long[]> 
```

更改其中一个以匹配另一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T11:56:12.683

根据您的订购需求...

```
for(int i = 0; i < myHistogramBlue.Length; i++)
{
l.Add(myHistogramBlue[i]);
l.Add(myHistogramGreen[i]);
l.Add(myHistogramRed[i]);
}

return l.toArray();` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T11:53:41.173

您的返回值是`long[]`并且您返回的是`List<long[]>`

将声明更改为：

```
public static List<long[]> GetHistogramRGB(Bitmap b) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T11:54:36.207

您应该返回`l.ToArray();`代码中的返回类型`long[] , List<long[]>`不兼容。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-12T11:53:19.167

您正在尝试返回

```
List<long[]> 
```

作为

```
long[] 
```

替换您的代码：

```
List<long> l = new List<long>();
l.Add(myHistogramBlue);
l.Add(myHistogramGreen);
l.Add(myHistogramRed);

return l.ToArray(); 
```

# arduino - 如何在 NFC 上使用 Arduino 读取/写入 mifare 标签？

> ID：13839129
> 
> 赞同：1
> 
> 时间：2012-12-12T11:50:31.937
> 
> 标签：arduino, nfc, mifare

我正在开发一个用于从 mifare 标签读取和写入数据的应用程序。我买了一台可以使用 NFC 技术读写 mifare 标签操作的设备。 [NFC Shield](http://www.seeedstudio.com/depot/-p-916.html?cPath=132_134) 我一直在使用 mifare 超轻标签，但在尝试验证特定内存地址时遇到问题。由于这个原因，我无法开始阅读。这是我的 Arduino 代码：

```
//This example reads a MIFARE memory block. It is tested with new MIFARE 1K cards.
//Uses default keys.
//Contributed by Seeed Technology Inc (www.seeedstudio.com)

#include <PN532.h>

#define SCK 52
#define MOSI 51
#define SS 10
#define MISO 50

PN532 nfc(SCK, MISO, MOSI, SS);

void setup(void) {
  Serial.begin(9600);
  Serial.println("Hello!");

  nfc.begin();

  uint32_t versiondata = nfc.getFirmwareVersion();
  if (! versiondata) {
    Serial.print("Didn't find PN53x board");
    while (1); // halt
  }
  // Got ok data, print it out!
  Serial.print("Found chip PN5"); Serial.println((versiondata>>24) & 0xFF, HEX); 
  Serial.print("Firmware ver. "); Serial.print((versiondata>>16) & 0xFF, DEC); 
  Serial.print('.'); Serial.println((versiondata>>8) & 0xFF, DEC);
  Serial.print("Supports "); Serial.println(versiondata & 0xFF, HEX);

  // configure board to read RFID tags and cards
  nfc.SAMConfig();
}

void loop(void) {
  uint32_t id;
  // look for MiFare type cards
  id = nfc.readPassiveTargetID(PN532_MIFARE_ISO14443A);

  if (id != 0) {
    Serial.print("Read card #"); Serial.println(id);

    uint8_t keys[]= {0xFF,0xFF,0xFF,0xFF,0xFF,0xFF};
    if(nfc.authenticateBlock(1, id ,0x08,KEY_A,keys)) { //authenticate block 0x08
      Serial.print("giris tmm #");
      //if authentication successful
      uint8_t block[16];
      //read memory block 0x08
      if(nfc.readMemoryBlock(1,0x08,block)) {
        Serial.print("Read tmm #");
        //if read operation is successful
        for(uint8_t i=0;i<16;i++) {
          //print memory block
          Serial.print(block[i],HEX);
          Serial.print(" ");
        }
        Serial.println();
      }
    }
  }

  delay(500);
} 
```

此阅读代码是为 Arduino Mega 2560 和 seedtudio NFC Shield v1.0 和 mifare 超轻标签制作的。在编写操作过程中也遇到了同样的问题。

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:54:52.877

MIFARE Ultralight 与 MIFARE Classic 1K 不同。MIFARE Ultralight 不支持（或不需要）身份验证。您可以在不使用身份验证的情况下开始阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-22T15:04:15.387

我遇到了同样的问题，并编辑了 Mifare Classic 示例，改为读出 Mifare Ultralight 卡。这是我的代码：[https ://gist.github.com/SamDecrock/bd1ec55f083a71ecee95](https://gist.github.com/SamDecrock/bd1ec55f083a71ecee95)

输出应该是这样的：

```
Looking for PN532...
Found chip PN532
Firmware ver. 1.6
Waiting for an ISO14443A Card ...
Found an ISO14443A card
  UID Length: 7 bytes
  UID Value: 4 13 74 72 83 1E 81 
Page 0   04 13 74 EB    ..t.
Page 1   72 83 1E 81    r...
Page 2   6E 48 00 00    nH..
Page 3   E1 11 06 00    ....
Page 4   00 00 00 00    ....
Page 5   00 00 00 00    ....
Page 6   00 00 00 00    ....
Page 7   00 00 00 00    ....
Page 8   00 00 00 00    ....
Page 9   00 00 00 00    ....
Page 10  00 00 00 00    ....
Page 11  00 00 00 00    ....
Page 12  00 00 00 00    ....
Page 13  00 00 00 00    ....
Page 14  00 00 00 00    ....
Page 15  00 00 00 00    ....

Send a character to run the mem dumper again! 
```

如您所见，第 0 页和第 1 页包含 UID ;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-12T01:05:18.533

With [PN532 library](https://github.com/Seeed-Studio/PN532) and [NDEF library](https://github.com/Don/NDEF), you can read/write mifare classic tags and read mifare ultralight tags.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-29T19:38:34.447

在[维基百科](http://en.wikipedia.org/wiki/MIFARE#MIFARE_Ultralight_and_MIFARE_Ultralight_EV1)中，您可以阅读

> “MIFARE Ultralight 只有 512 位内存（即 64 字节），没有加密安全性。内存以 16 页 4 字节的形式提供。”

所以我认为至少您必须更改删除*authenticateBlock*的代码并开始读取 4 字节长的块。

adafruit.com 上有一份文档，其中解释了[Mifare Classic 和 Mifare Ultralight](http://learn.adafruit.com/adafruit-pn532-rfid-nfc/mifare)的工作原理。关于您从 Mifare Ultralight 读取的字节的含义，有一些提示。

他们在文件中谈到 Mifare Ultralight：

> **访问数据块**
> 
> 为了访问卡，您必须执行以下两个步骤：“连接”到 Mifare Ultralight 卡并检索卡的 7 字节 UID。一旦建立了被动模式连接，就可以直接读取和写入内存。Mifare Ultralight 卡不需要身份验证。
> 
> **读/写长度**
> 
> 出于兼容性原因，对 Mifare Ultralight 卡的“读取”请求将一次检索 16 个字节（4 页）（对应于 Mifare Classic 卡的块大小）。例如，如果您指定要读取第 3 页，实际上将读取并返回第 3、4、5 和 6 页，如果不需要，您可以简单地丢弃最后 12 个字节。如果选择更高的页面，则读取的 16 字节将返回到页面 0。例如，读取页面 14 实际上将返回页面 14、15、0 和 1。
> 
> “写”请求发生在页（4 个字节）中，因此在后续页上覆盖数据没有问题。

**更新！！**

我发现 adafruit 有两个用于 adruino 的 NFC 库（一个使用 I2C，另一个使用 SPI）并且都实现了一个名为：

```
// Mifare Ultralight functions
  uint8_t mifareultralight_ReadPage (uint8_t page, uint8_t * buffer); 
```

图书馆在这里：[learn.adafruit.com/adafruit-pn532-rfid-nfc/arduino-library](http://learn.adafruit.com/adafruit-pn532-rfid-nfc/arduino-library)

我希望它们与您的盾牌兼容。

# android - 如何通过 URL 传递 JSON 对象

> ID：13839130
> 
> 赞同：-4
> 
> 时间：2012-12-12T11:50:36.433
> 
> 标签：android

```
{"value":"CUSTOM","allow":"ALL_FRIENDS","deny":"100000415571929,1340463778"} 
```

我需要将此作为 http 请求发送到此数据，我收到非法字符错误。

如何发送这些特殊字符？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:56:07.660

试试这个`URLEncoder`类，它应该工作

```
String url = "http://example.com/query?q=" + URLEncoder.encode("{\"value\":\"CUSTOM\",\"allow\":\"ALL_FRIENDS\",\"deny\":\"100000415571929,1340463778\"}", "ISO-8859-1"); 
```

希望我没有错过任何 scape 字符：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:58:41.947

以这种方式尝试：

```
HttpPost post = new HttpPost(postURL);

List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("value","CUSTOM"));
params.add(new BasicNameValuePair("allow","ALL_FRIENDS"));
params.add(new BasicNameValuePair("deny","100000415571929,1340463778"));

UrlEncodedFormEntity ent = new UrlEncodedFormEntity(params,HTTP.UTF_8);
post.setEntity(ent); 
```

希望它可以帮助你。

谢谢。

# php - 在 PHP 中打开另存为对话框

> ID：13839142
> 
> 赞同：1
> 
> 时间：2012-12-12T11:51:32.727
> 
> 标签：php

我有一个文件**index2.php**已被表单写入。

这个文件的全部内容，我已经`$final_code`使用输出缓冲区存储在一个变量中。

我现在希望在页面末尾添加一个“下载”按钮，这会弹出一个另存为对话框，允许用户将此文件的源代码（即变量）保存为 .txt - 但我很难过。

**index2.php：**

```
<?php

// Start buffering the output
ob_start();

?>

<!-- INDEX2.PHP HTML ELEMENTS HERE -->

<?php
// Store the contents of the buffer
$final_code = ob_get_contents();

// Print the contents of the buffer
ob_end_flush();
?>

<form action="savefile.php" method="post">

Happy? Save this to file: <input type="submit" name="savefile" value="Save" />

</form> 
```

我不确定这是否需要在这个文件或**savefile.php**中工作，所以后者目前是空白的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T12:10:58.997

我认为您不能在浏览器中强制保存为文件对话框。

为了强制下载 txt 文件，我执行以下操作：

```
header('Pragma: anytextexeptno-cache', true);
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private", false);
header("Content-Type: text/plain");
header("Content-Disposition: attachment; filename=\"example.txt\"");
echo $output; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:07:31.123

您需要使用标头强制下载：

```
 $file = 'somefile.zip';

 if(!file)
 {
     // File doesn't exist, output error
     die('file not found');
 }
 else
 {
     // Set headers
     header("Cache-Control: public");
     header("Content-Description: File Transfer");
     header("Content-Disposition: attachment; filename=$file");
     header("Content-Type: application/zip");
     header("Content-Transfer-Encoding: binary");

     // Read the file from disk
     readfile($file);
 } 
```

示例取自： [http ://www.ryboe.com/tutorials/php-headers-force-download](http://www.ryboe.com/tutorials/php-headers-force-download)

请参阅链接以获取更多说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:03:28.210

您在寻找 PHP 下载脚本（来自浏览器）吗？

# php - 以编程方式下载 php 生成的网页

> ID：13839149
> 
> 赞同：1
> 
> 时间：2012-12-12T11:51:58.763
> 
> 标签：php, dictionary, download

我需要下载在线印地语词典以供离线使用。字典中的每个单词都有一个 php 生成的页面。这些页面的 URL 如下： `http://pustak.org/home.php?mean=X`，其中 X 代表一个数字。

所以字典中的第一个单词可以通过 go to 找到`http://pustak.org/home.php?mean=1`，第二个单词 is`http://pustak.org/home.php?mean=2`以此类推。

如何以编程方式下载所有这些页面并将它们保存为单独的 html 文件？

PS：如果你想知道，我这样做是因为我需要一个印地语字典来在旅行时在我的 iPod Touch 上离线参考（因为 Touch 没有蜂窝数据）。我已经尝试了一大堆印地语词典应用程序，但没有一个能接近这个免费在线词典的质量和定义数量。所以我的计划是将整个内容下载为 html 文件，将它们全部存储在支持全文搜索的 iOS 文件系统应用程序中，并且我有自己的离线字典......

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:04:49.523

方法略有不同，我个人会使用[HTTrack](http://www.httrack.com/)

从主页：

> HTTrack 是一个免费（GPL，自由/自由软件）且易于使用的离线浏览器实用程序。
> 
> 它允许您将万维网站点从 Internet 下载到本地目录，递归地构建所有目录，将 HTML、图像和其他文件从服务器获取到您的计算机。HTTrack 安排原始站点的相对链接结构。只需在浏览器中打开“镜像”网站的一个页面，您就可以从一个链接到另一个链接浏览该站点，就好像您在在线查看它一样。HTTrack 还可以更新现有的镜像站点，并恢复中断的下载。HTTrack 是完全可配置的，并具有集成的帮助系统。

根据该网站，它支持 Windows 2000 / XP / Vista / Seven 和多种 Linux 版本。

我假设您可以将下载的文件导入您提到的这个 iOS 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:04:14.967

你可以试试`file_get_contents`：

```
$max = 100000 //total num of words to get

for($cont=1; $cont<$max; $cont++){
    $sourceCode = file_get_contents('http://pustak.org/home.php?mean=$cont');

    if(!file_put_contents('/path/word'.$cont.'.html',$sourceCode)){
        echo "error with word number".$cont;
        die();
    }
} 
```

# c# - VSTO 应用程序加载项无法加载 - 显示“托管加载项加载程序无法初始化”

> ID：13839150
> 
> 赞同：2
> 
> 时间：2012-12-12T11:52:00.810
> 
> 标签：c#, installation, visual-studio-2012, vsto

我有一个使用 VS2012 和 VSTO 开发的 PowerPoint 2010 应用程序级插件。它也适用于 PowerPoint 2007。我使用 VS2012 提供的（可怕的）InstallShield LE crippleware 为它构建了一个安装程序。我已经能够在各种测试机器上安装它，但是现在我正在尝试将它部署到客户端，他们无法将它安装在某些机器上。

客户站点的一位用户可以安装它，但该用户在 IT 部门工作并在他的机器上拥有管理员权限。但是，当 IT 管理员尝试将其安装在“普通”用户的计算机上时，安装似乎正常，但 PowerPoint 未加载加载项。

“COM 加载项”对话框显示以下消息：

> 加载行为：未加载。托管加载项加载程序未能初始化。

[如果相关，此客户端使用 Office 2007。但请注意，它在 Office 2007 上运行良好，无论是在我的测试硬件上还是对于客户端上的那个用户。]

我能做些什么来找出**原因**吗？作为安装的一部分，我应该做些什么明显的事情？显然正在设置注册表项，因为加载项已在 COM 加载项对话框中列出。而且我*假设*所有必需的文件都已安装，因为安装程序在其他机器上运行良好。

我想这可能是一个与安全相关的问题。我应该注意，我没有在安全方面做任何事情，而且我认为 InstallShield 在这方面没有做任何有用的事情。我不知道是否有必要对我的代码进行数字签名（我没有），或者以某种方式设置一些安全策略（我不知道如何）。我在网上看到了一些关于使用 CasPol (?) 将安全设置应用于加载项的内容，但这适用于旧版本的 VS 和/或 ClickOnce，我不确定我是否需要其中的任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T11:27:22.043

事实证明，VSTO 运行时没有随 Office 2007 安装（它是随 Office 2010 安装的）。可以加载加载项的 IT 用户已经拥有它，因为他安装了包含它的其他东西（我猜）。其他用户没有。

所以，我更新了我的安装程序以包含它，它现在可以工作了。

# struts2 - web.xml中的Struts2配置文件名

> ID：13839153
> 
> 赞同：4
> 
> 时间：2012-12-12T11:52:08.060
> 
> 标签：struts2

[http://struts.apache.org/2.3.1.2/docs/webxml.html](http://struts.apache.org/2.3.1.2/docs/webxml.html)

根据上面的链接，我们可以在 web.xml 中指定配置文件名。所以我`config`在下面的映射中添加了参数。

```
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>
        org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
    </filter-class>
    <init-param>
        <param-name>config</param-name>
        <param-value>struts.xml</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>*.action</url-pattern>
</filter-mapping> 
```

现在我无法启动 Web 应用程序。以下日志打印在控制台上。

`SEVERE: Dispatcher initialization failed`

```
com.opensymphony.xwork2.inject.DependencyException: com.opensymphony.xwork2.inject.ContainerImpl$MissingDependencyException: No mapping found for dependency [type=com.opensymphony.xwork2.ObjectFactory, name='default'] in public void com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.setObjectFactory(com.opensymphony.xwork2.ObjectFactory).
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectorsForMembers(ContainerImpl.java:144)
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectorsForMethods(ContainerImpl.java:113)
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectors(ContainerImpl.java:90)
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectors(ContainerImpl.java:86)
at com.opensymphony.xwork2.inject.ContainerImpl$1.create(ContainerImpl.java:71)
at com.opensymphony.xwork2.inject.ContainerImpl$1.create(ContainerImpl.java:67)
at com.opensymphony.xwork2.inject.util.ReferenceCache$CallableCreate.call(ReferenceCache.java:150)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:284)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at com.opensymphony.xwork2.inject.util.ReferenceCache.internalCreate(ReferenceCache.java:76)
at com.opensymphony.xwork2.inject.util.ReferenceCache.get(ReferenceCache.java:116)
at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:483)
at com.opensymphony.xwork2.inject.ContainerImpl$6.call(ContainerImpl.java:523)
at com.opensymphony.xwork2.inject.ContainerImpl$6.call(ContainerImpl.java:521)
at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:574)
at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:521)
at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:203)
at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:390)
at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:436)
at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:618)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

Caused by: com.opensymphony.xwork2.inject.ContainerImpl$MissingDependencyException: No mapping found for dependency [type=com.opensymphony.xwork2.ObjectFactory, name='default'] in public void com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.setObjectFactory(com.opensymphony.xwork2.ObjectFactory).
at com.opensymphony.xwork2.inject.ContainerImpl.createParameterInjector(ContainerImpl.java:235)
at com.opensymphony.xwork2.inject.ContainerImpl.getParametersInjectors(ContainerImpl.java:225)
at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.<init>(ContainerImpl.java:287)
at com.opensymphony.xwork2.inject.ContainerImpl$3.create(ContainerImpl.java:117)
at com.opensymphony.xwork2.inject.ContainerImpl$3.create(ContainerImpl.java:114)
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectorsForMembers(ContainerImpl.java:141)
... 39 more

Dec 12, 2012 4:32:43 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter struts2
com.opensymphony.xwork2.inject.ContainerImpl$MissingDependencyException: No mapping found for dependency [type=com.opensymphony.xwork2.ObjectFactory, name='default'] in public void com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.setObjectFactory(com.opensymphony.xwork2.ObjectFactory). - Class: com.opensymphony.xwork2.inject.ContainerImpl

File: ContainerImpl.java
Method: addInjectorsForMembers
Line: 144 - com/opensymphony/xwork2/inject/ContainerImpl.java:144:-1
at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:449)
at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:618)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

Caused by: com.opensymphony.xwork2.inject.DependencyException: com.opensymphony.xwork2.inject.ContainerImpl$MissingDependencyException: No mapping found for dependency [type=com.opensymphony.xwork2.ObjectFactory, name='default'] in public void com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.setObjectFactory(com.opensymphony.xwork2.ObjectFactory).
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectorsForMembers(ContainerImpl.java:144)
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectorsForMethods(ContainerImpl.java:113)
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectors(ContainerImpl.java:90)
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectors(ContainerImpl.java:86)
at com.opensymphony.xwork2.inject.ContainerImpl$1.create(ContainerImpl.java:71)
at com.opensymphony.xwork2.inject.ContainerImpl$1.create(ContainerImpl.java:67)
at com.opensymphony.xwork2.inject.util.ReferenceCache$CallableCreate.call(ReferenceCache.java:150)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:284)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at com.opensymphony.xwork2.inject.util.ReferenceCache.internalCreate(ReferenceCache.java:76)
at com.opensymphony.xwork2.inject.util.ReferenceCache.get(ReferenceCache.java:116)
at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:483)
at com.opensymphony.xwork2.inject.ContainerImpl$6.call(ContainerImpl.java:523)
at com.opensymphony.xwork2.inject.ContainerImpl$6.call(ContainerImpl.java:521)
at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:574)
at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:521)
at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:203)
at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:390)
at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:436)
... 20 more

Caused by: com.opensymphony.xwork2.inject.ContainerImpl$MissingDependencyException: No mapping found for dependency [type=com.opensymphony.xwork2.ObjectFactory, name='default'] in public void com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.setObjectFactory(com.opensymphony.xwork2.ObjectFactory).
at com.opensymphony.xwork2.inject.ContainerImpl.createParameterInjector(ContainerImpl.java:235)
at com.opensymphony.xwork2.inject.ContainerImpl.getParametersInjectors(ContainerImpl.java:225)
at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.<init>(ContainerImpl.java:287)
at com.opensymphony.xwork2.inject.ContainerImpl$3.create(ContainerImpl.java:117)
at com.opensymphony.xwork2.inject.ContainerImpl$3.create(ContainerImpl.java:114)
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectorsForMembers(ContainerImpl.java:141)
... 39 more

Dec 12, 2012 4:32:43 PM org.apache.catalina.core.StandardContext start
SEVERE: Error filterStart
Dec 12, 2012 4:32:43 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/theStruts2] startup failed due to previous errors
Dec 12, 2012 4:32:43 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/theStruts2] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@104e104e]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@1fb61fb6]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Dec 12, 2012 4:32:43 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/theStruts2] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@10281028]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@13d013d0]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T12:15:34.940

您需要在内部定义`struts-default.xml`and 。`struts-plugin.xml``<init-param>`

```
<init-param>
    <param-name>config</param-name>
    <param-value>struts-default.xml,struts-plugin.xml,struts.xml</param-value>
</init-param> 
```

没有它，Struts2 无法找到必要的 bean/results/interceptors/etc。在`struts-default.xml`文件中定义。当然，您可以将所有声明从默认文件复制到您的配置文件。

# validation - yii 中文本字段的整数验证

> ID：13839154
> 
> 赞同：2
> 
> 时间：2012-12-12T11:52:08.173
> 
> 标签：validation, yii

我的表单中有一个文本字段，例如

```
$form->textField($model,'test',array('required'=>'true')) 
```

验证适用于必填字段。有什么方法可以验证这样的整数。我试过喜欢

```
$form->textField($model,'test',array('required'=>'true','integer'=>'true')); 
```

但它不起作用。有没有其他方法可以做到

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:59:56.097

在`rules()`功能下的模型中添加如下规则

```
array('test', 'numerical', 'integerOnly'=>true), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T23:07:59.997

这必须在规则中完成。您提供的代码是：

```
$model = "someString";
$form->textField($model,'test',array('required'=>'true')); 
```

此代码本身不会导致该字段是必需的，它所要做的就是在生成的 HTML 中添加一个值为 true 的 required 属性，例如：

```
<input name='someString' required='true'>test</input> 
```

这不会导致验证运行。由于模型中定义的规则，验证将运行，并且不能在视图阶段添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T13:25:04.363

我们也可以这样使用——

```
array('number_value', 'match', 'pattern'=>'/^[0-9]+$/', 'message'=>"{attribute} no. Invalid."), 
```

# jsf - Ajax 从包含文件中的 commandButton 更新 dataTable

> ID：13839156
> 
> 赞同：0
> 
> 时间：2012-12-12T11:52:14.477
> 
> 标签：jsf, jsf-2, primefaces

我有这样的情况：在文件form.xhtml中，我有用于过滤某些表格的表格，我在这里定义了按钮“过滤器”。

在文件 tableOne.xhtml、tableTwo.html、.. 我有 ID 为“filterTable”的 dataTable，我也将 form.xhtml 包含在此页面中。所有带有 dataTables 的页面都包含 form.xhtml 并且它们上的所有 dataTables 都具有相同的 id “filterTable”

我想做的是在使用ajax按下过滤器按钮后更新dataTable [#filterTable]。按钮由 <p:commandButton> 创建。如果表单和数据表定义在同一个文件中，我只需将 update="filterTable" 添加到我的命令 bytton 中。但是如果我将它添加到 form.xhtml 中定义的按钮，我会得到“找不到带有标识符的组件”错误。

是否可以从页面上包含的外部 xhtml 文件动态更新数据表？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:14:00.793

例子：

测试.xhtml：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">
<h:head></h:head>
<h:body>
    <h:form id="dtForm">
        <p:dataTable id="dataTable" />
    </h:form>
    <ui:include src="/include.xhtml" />
</h:body>
</html> 
```

包括.xhtml：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">
<h:head></h:head>
<h:body>
    <h:form>
        <p:commandButton value="button" update=":dtForm" />
    </h:form>
</h:body>
</html> 
```

# ruby-on-rails - Rails：从 number_to_currency 中删除小数

> ID：13839157
> 
> 赞同：19
> 
> 时间：2012-12-12T11:52:16.223
> 
> 标签：ruby-on-rails, ruby

我有一个浮动价格：

```
number_to_currency(m.price, :locale => 'en_us') 
```

我得到：`$39.00`

我怎样才能删除`.00`，我想得到：

```
$39 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-12T11:56:18.013

您可以将精度设置为 0，如[Rails](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_currency) API 文档中所述。

```
number_to_currency(m.price, locale: :en, precision: 0) 
```

请注意，您的价格将四舍五入，从 38.50 美元到 39.49 美元的任何价格都将显示为 39 美元。

*编辑*：交换区域设置`:en_us`为`:en`，可能在更多应用程序中启用。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-12T12:02:12.667

假设您只想在 0 美分的情况下跳过小数，那么如何

```
number_to_currency(m.price, :locale => 'en_us').gsub(/\.00$/, "") 
```

# asp.net - ASP.NET WEB API - 从所有自定义验证属性中收集模型状态错误

> ID：13839159
> 
> 赞同：1
> 
> 时间：2012-12-12T11:52:20.257
> 
> 标签：asp.net

我正在用 ASP.NET Web API 做一个项目。我写了不同的自定义验证属性。现在的问题是，我只从一个首先运行的属性中获取模型状态错误。请帮我结合所有validationAttributes的模型状态错误。

前任。我有一些自定义验证属性，如下所示：

```
public class PhoneNumberFormatAttribute : ValidationAttribute
{
     .......
     return new ValidationResult("Invalid Phone Number);
     .......
} 
```

* * *

```
public class RangeValueAttribute : ValidationAttribute
{
    .........
    return new ValidationResult("Invalid Range");
    ..........
 } 
```

现在我想收集 ModelState 中的所有验证错误。但是现在我只从一个首先运行的自定义验证属性中获得。

非常感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:49:58.400

由于错误是您需要使用的枚举：

```
yield return new ValidationResult("Invalid Phone Number); 
```

这允许它返回，然后在迭代器中执行下一个。

# sql - 需要关于存储过程性能的建议

> ID：13839161
> 
> 赞同：-1
> 
> 时间：2012-12-12T11:52:26.177
> 
> 标签：sql, oracle, stored-procedures, jdbc, stored-functions

我们有一个应用程序需要将数据写入 oracle DBMS 中的特定表。但是在写入表之前，它会对它写入的数据进行某些操作。

我们现在计划将这种“数据操作”从应用程序中移除，并将此责任委托给 ORACLE DBMS 中的存储过程。另一方面，他们的程序将借助不同的内置和明确编写的函数来完成其工作。

现在我担心的是 ORACLE DBMS 中的“过程运行”效率如何。我假设 Oracle 将以内联方式从存储过程中调用不同的函数调用，或者以其他方式调用，但绝对不会将这些调用作为某些子进程的一部分，否则会对该存储的性能产生重大影响-程序。

注意：此过程将全天调用，有数十万行要更新。这使得这个存储过程的性能对于应用程序来说非常重要。

与操作是应用程序的一部分相比，您能否评论存储过程的一般性能。

编辑：操作就像从地图中取出几个值一样简单，将它们整理在一起并在表的特定列中更新它们。

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:55:59.550

PL/SQL 代码将以低于应用程序的延迟访问数据，如果您遵循良好的做法，您不太可能遇到问题。尽可能在 SQL 中做，并使用隐式游标而不是显式游标。

# wordpress - 将社交网络集成到 wordpress 原生评论中

> ID：13839166
> 
> 赞同：4
> 
> 时间：2012-12-12T11:52:48.677
> 
> 标签：wordpress

我一直在为我正在开发的 wordpress 博客寻找“完美”的评论系统。

首先，有***Disqus/intensedebate/etc...：***

**优点：**易于设置，在一定程度上可以自定义（在一定范围内），消除服务器的负载，社交。
**缺点：**与 wordpress 同步有时可能会出现问题，外部错误会破坏您的评论流程，没有 javascript 用户没有后备，大量嵌入式代码。

然后，***Wordpress 原生评论：***

**优点：**与博客深度集成，高度可定制，节省嵌入博客的大量 javascript 垃圾，更容易提供后备选项
**缺点：**不是原生社交，???

对我来说，Wordpress 评论似乎是最好的选择。
唯一的问题是社会融合。

*我的问题是；*
我如何处理用户登录社交网络**后收到的数据？**（我已经知道如何创建登录门并取回所需的信息……）
我想简单地保存他们的；电子邮件，姓名，图片（您从社交网络获得）就像人们在没有社交网络的情况下发表评论时正在做的事情......
问题是我对 wordpress 数据库没有任何经验，我不知道从哪里开始. 通常我最好的选择是使用wordpress codex，但我在那里找不到太多。

附言; 请不要插件！
那里有很棒的插件，但我喜欢自己学习做事。
如果有人可以向我提供一些有用的链接或理论上需要做什么，我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:06:02.927

我一直在寻找相同的“解决方案”，但找不到正确的答案（比如 5 个月前）。我推荐 Nextend 系列插件，Facebook、Twitter 和 Google+。也许你可以看看这个伟大的插件里面的代码。这是 Nextend Facebook Connect [http://wordpress.org/extend/plugins/nextend-facebook-connect/](http://wordpress.org/extend/plugins/nextend-facebook-connect/) 对我来说，这是在 Wordpress 中为评论实现社交连接的“最干净、最不干扰”的方式，因为您可以处理用户如您所愿，评论模板以您想要的方式工作。您可以在此处查看[http://dfine.me/2012/11/500px-lanza-aplicacion-oficial-para-iphone/](http://dfine.me/2012/11/500px-lanza-aplicacion-oficial-para-iphone/)以了解实施情况。一篇或许能帮到你的文章[http://www.tutorialstag.com/create-custom-wordpress-registration-page.html](http://www.tutorialstag.com/create-custom-wordpress-registration-page.html)也许您可以将“社交信息”写入 Wordpress 数据库。

# svn - svn rm 本地文件

> ID：13839172
> 
> 赞同：0
> 
> 时间：2012-12-12T11:53:17.130
> 
> 标签：svn

当我在客户端创建第一个存储库时，我使用了`svn add *` 然后我输入了`svn del *`. 不幸的是，我在本地机器上删除了该文件。我怎样才能恢复这些文件？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-12T11:54:57.630

如果您还没有提交它，您可以从存储库中*签*出。

# c# - 如何在 Winrt 中以编程方式编写 CircularText？

> ID：13839175
> 
> 赞同：0
> 
> 时间：2012-12-12T11:53:18.457
> 
> 标签：c#, windows-8, winrt-xaml

我正在做 winrt 应用程序，我需要以编程方式沿圆圈编写圆形文本，如下图所示！我怎样才能做到这一点？。我正在使用 c#。

![在此处输入图像描述](../Images/a0078ac6ad6855db4ce0e03dec58c614.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:51:00.753

看这篇文章： [http ://social.msdn.microsoft.com/forums/en-US/wpf/thread/81be917b-4c56-4006-8973-2e1d7c390ff5/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/81be917b-4c56-4006-8973-2e1d7c390ff5/)

问候 ;）

# mysql - 基于 UnixTime 的 MySQL 动态分区

> ID：13839177
> 
> 赞同：7
> 
> 时间：2012-12-12T11:53:22.480
> 
> 标签：mysql, dynamic, partitioning, myisam, unix-timestamp

我的数据库设计包括多个 MISAM 表，其中包含在线收集的测量值，

每行记录都包含自动递增的 id、一些数据和一个表示 unixtime 的整数。

我正在设计一种老化机制，并且我有兴趣使用 MySQL 分区来动态地基于 unixtime 对每个这样的表进行分区。

假设我对每个分区将代表单月数据感兴趣，最后一个分区应该代表 2 个月，如果记录到达下一个未表示的月份，则表示 2 个月的分区应重新组织以表示单月，新分区应创建代表 2 个月（1 个取自最后一个分区，1 个用于未来测量），

此外，当创建一个新分区时，我感兴趣的是最旧的分区将被删除。

1.  我应该使用什么类型的分区（我的 unixtime 不是唯一键，我将如何使用 unixtime 进行分区）？
2.  我将如何根据添加到表中的新记录将分区设计为完全动态的？

**更新 12.12.12**

我发现了与我所描述的类似方法的有趣链接[your-magical-range-partitioning-maintenance-query](http://code.openark.org/blog/mysql/your-magical-range-partitioning-maintenance-query)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-04T21:08:01.973

1.  分区不需要仅基于唯一键。但是，如果存在唯一键，那么它应该包含在用于对表进行分区的列中。要在 UNIXTIME 列上对表进行分区，请执行以下操作：

    ```
    ALTER TABLE MyTable
    PARTITION BY RANGE COLUMNS (UNIX_TIMESTAMP(datetime_column))
    (
      PARTITION p01 VALUES LESS THAN (2),
      PARTITION p02 VALUES LESS THAN (3),
      PARTITION p03 VALUES LESS THAN (4),
      PARTITION p04 VALUES LESS THAN (MAXVALUE)); 
    ```

    或者您可以在 MySQL 5.5+ 中立即对 datetime 列进行分区：

    ```
    ALTER TABLE MyTable
    PARTITION BY RANGE COLUMNS (datetime_column)
    (
      PARTITION p01 VALUES LESS THAN ('2013-01-01'),
      PARTITION p02 VALUES LESS THAN ('2013-02-01'),
      PARTITION p03 VALUES LESS THAN ('2013-03-01'),
      PARTITION p04 VALUES LESS THAN (MAXVALUE)); 
    ```

2.  完全自动化的版本（它将每个月都保存在自己的分区中，保存 5 个月的数据）：

    ```
    ALTER TABLE MyTable
    PARTITION BY RANGE COLUMNS (YEAR(datetime_column)*100 + MONTH(datetime_column))
    (
      PARTITION p201301 VALUES LESS THAN (201301),
      PARTITION p201302 VALUES LESS THAN (201302),
      PARTITION p201303 VALUES LESS THAN (201303),
      PARTITION p201304 VALUES LESS THAN (201304),
      PARTITION p201305 VALUES LESS THAN (201305),
      PARTITION p_MAXVALUE VALUES LESS THAN (MAXVALUE));

    DECLARE @Min_Part int
    DECLARE @Last_Part int
    DECLARE @SQL varchar (1000)

    If (select count (distinct MONTH(datetime_column)) from MyTable) > 5 THEN
        BEGIN

        select @Min_Part = (select min(year(datetime_column)*100 + month(datetime_column)) from MyTable),
        @Last_Part = (select max(year(datetime_column)*100 + month(datetime_column)) from MyTable)

        set @SQL = 'Alter table MyTable REORGANIZE PARTITION p_MAXVALUE (into partition p' +TO_CHAR (@Last_Part) + 'values less than (' + TO_CHAR (@Last_Part) + ')' 

        call common_schema.eval (@sql)

        set @SQL = 'Alter table MyTable DROP PARTITION p' + TO_CHAR (@Min_Part) 

        call common_schema.eval (@sql)

    END 
    ```

PS 抱歉，如果 SQL 不完全正确 - 现在无法解析它。

# android - 如何使用android开发在salesforce中上传音频文件？

> ID：13839183
> 
> 赞同：0
> 
> 时间：2012-12-12T11:53:32.800
> 
> 标签：android, api, rest, salesforce

我正在使用**SalesforceMobileSDK-Android**开发一个 android 应用程序。我能够开发一个非常基本的 android 应用程序，在我的应用程序中，我能够从 salesforce 帐户中获取联系人、帐户、潜在客户等详细信息，并对这些数据执行 crud 操作。在我的 android 应用程序中，我有一个名为**uploadFile**的按钮，现在想通过单击该按钮上传音频文件，我找不到任何其他 api 可以帮助我从我的 android 客户端应用程序将其上传到 Salesforce 上。

如果有任何示例 url 或源代码或任何有用的资源，请提供给我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:16:55.747

您必须尝试对文件进行编码并向端点`base64`发送`POST`请求。`/services/data/v26.0/sobjects/attachment/{parent record id}/body`我自己没有做过，但有一些很好的例子：

1.  [http://www.salesforce.com/us/developer/docs/api_rest/Content/dome_sobject_insert_update_blob.htm](http://www.salesforce.com/us/developer/docs/api_rest/Content/dome_sobject_insert_update_blob.htm) - 对 json 消息使用不同的方法。
2.  [http://blogs.developerforce.com/developer-relations/2011/09/using-binary-data-with-rest.html](http://blogs.developerforce.com/developer-relations/2011/09/using-binary-data-with-rest.html) - 如果您可以创建服务器端 REST 服务。
3.  检查 Salesforce 专用 Stack 站点上的资源，例如[https://salesforce.stackexchange.com/questions/1301/image-upload-to-chatter-post](https://salesforce.stackexchange.com/questions/1301/image-upload-to-chatter-post)
4.  最后但同样重要的是 - 检查 Salesforce 社区板，例如[http://boards.developerforce.com/t5/APIs-and-Integration/inserting-an-attachment-via-REST/td-p/322699](http://boards.developerforce.com/t5/APIs-and-Integration/inserting-an-attachment-via-REST/td-p/322699)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:04:43.063

在上传文件时，主要是服务器端你必须关心，客户端你可以有这样的方法（只要明白，它不是一个完整的功能代码）：

```
 FileInputStream fileInputStream = new FileInputStream(new File(selectedPath) );
 // open a URL connection to the Servlet
 URL url = new URL(urlString);
 // Open a HTTP connection to the URL
 conn = (HttpURLConnection) url.openConnection();
 // Allow Inputs
 conn.setDoInput(true);
 // Allow Outputs
 conn.setDoOutput(true);
 // Don't use a cached copy.
 conn.setUseCaches(false);
 // Use a post method.
 conn.setRequestMethod("POST");
 conn.setRequestProperty("Connection", "Keep-Alive");
 conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
 dos = new DataOutputStream( conn.getOutputStream() );
 dos.writeBytes(twoHyphens + boundary + lineEnd);
 dos.writeBytes("Content-Disposition: form-data; name:\"uploadedfile\";filename=\"" + selectedPath + "\"" + lineEnd);
 dos.writeBytes(lineEnd);
 // create a buffer of maximum size
 bytesAvailable = fileInputStream.available();
 bufferSize = Math.min(bytesAvailable, maxBufferSize);
 buffer = new byte[bufferSize];
 // read file and write it into form...
 bytesRead = fileInputStream.read(buffer, 0, bufferSize);
 while (bytesRead > 0)
 {
  dos.write(buffer, 0, bufferSize);
  bytesAvailable = fileInputStream.available();
  bufferSize = Math.min(bytesAvailable, maxBufferSize);
  bytesRead = fileInputStream.read(buffer, 0, bufferSize);
 }
 // send multipart form data necesssary after file data...
 dos.writeBytes(lineEnd);
 dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
 // close streams
 Log.e("Debug","File is written");
 fileInputStream.close();
 dos.flush();
 dos.close(); 
```

# css - 带有 div 的 Twitter 引导结构

> ID：13839188
> 
> 赞同：3
> 
> 时间：2012-12-12T11:53:52.397
> 
> 标签：css, html, twitter-bootstrap, vertical-alignment

我想知道是否可以将该条移到下方，该条用`<p>`标签包裹。

```
<div class="span9 well">
<div class="row-fluid">
    <div class="row-fluid">
        <div class="span2">
            <img src="dummy_image.jpg" class="img-polaroid">
        </div>
        <div class="span7">
            <h2>Title</h2>      
            <p>Texttttttttttttttttt.</p>
            <p >
                <a href="#"><span class="label label-info">Genre</span></a>
                <span class="label label-warning">
                <i class="icon-star"></i>
                ...<!-- stars -->
                </span>     
                <a href="#"><span class="label label-success">Yes</span></a> / <a href="#"><span class="label label-important">No</span></a>
            </p>
        </div>
    </div>
</div> 
```

我要更改的实际块的屏幕截图：

![在此处输入图像描述](../Images/e63759d94f07ca4185ee64529f25114a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:22:43.417

你总是可以这样命名你的`<p>`标签：

```
<p class="bar">
    <a href="#"><span class="label label-info">Genre</span></a>
    <span class="label label-warning">
    <i class="icon-star"></i>
    ...<!-- stars -->
    </span>     
    <a href="#"><span class="label label-success">Yes</span></a> / <a href="#"><span class="label label-important">No</span></a>
</p> 
```

然后`.bar {margin-top: 20px;}`在你的css代码中使用，这不是坏行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:25:57.733

利用`position:absolute`

```
.row-fluid{position:relative; width:450px; background:red; overflow:auto}
.span2{display:inline; float:left}
.span7{display:inline; }
.row-fluid > p{position:absolute; bottom:0; left:170px}​ 
```

**[演示](http://jsfiddle.net/TJcz7/1/)**

# android - 清除数据并重新启动应用程序android

> ID：13839190
> 
> 赞同：0
> 
> 时间：2012-12-12T11:53:58.423
> 
> 标签：android, database, android-activity

我想在我的应用程序中清除数据并重新启动应用程序。为此，我使用了下面的代码。但是，它似乎不起作用。请帮帮我！

```
deleteDatabase(Universal.database_name);
Intent i = getBaseContext().getPackageManager().getLaunchIntentForPackage( getBaseContext().getPackageName() );
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK );
startActivity(i); 
```

编辑：我看不到任何效果，应用程序只是重新启动，数据绝对保留！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:06:19.287

要清除应用数据，您可以使用此方法：

```
 public void clearApplicationData() {
        File cache = currentActivity.getCacheDir();
        File appDir = new File(cache.getParent());
        if (appDir.exists()) {
            String[] children = appDir.list();
            for (String s : children) {
                if (!s.equals("lib")) {
                    deleteDir(new File(appDir, s));
                }
            }
        }
    } 
```

除了重新启动应用程序之外，您还应该使用警报管理器

```
 AlarmManager mgr = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        PendingIntent restartIntent = PendingIntent.getActivity(
                this.getBaseContext(), 0, new Intent(getIntent()),
                getIntent().getFlags());
        mgr.set(AlarmManager.RTC, System.currentTimeMillis() + 1000, restartIntent);
        System.exit(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:08:35.307

** 此活动不显示任何内容；相反，它会重新启动 android 进程 */

```
public class AppRestartActivity extends Activity {
    // Do not forget to add it to AndroidManifest.xml
    // <activity android:name="your.package.name.AppRestartActivity"/>
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        System.exit(0);
    }
    public static void doRestart(Activity anyActivity) {
        anyActivity.startActivity(new Intent(anyActivity.getApplicationContext(), MagicAppRestart.class));
    }
} 
```

# iphone - 核心位置警报

> ID：13839193
> 
> 赞同：-4
> 
> 时间：2012-12-12T11:54:00.890
> 
> 标签：iphone, ios, alert, core-location

我在 O'Reilly 教程中看到了以下警报：

1.  [http://answers.oreilly.com/index.php?app=core&module=attach§ion=attach&attach_rel_module=post&attach_id=125](http://answers.oreilly.com/index.php?app=core&module=attach&section=attach&attach_rel_module=post&attach_id=125)
2.  [http://answers.oreilly.com/uploads/monthly_10_2009/post-48-125435525931_thumb.jpg](http://answers.oreilly.com/uploads/monthly_10_2009/post-48-125435525931_thumb.jpg)

我不明白如何触发这些警报。请问你能通知我吗？使用ios6的应用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:07:26.960

这是访问您当前位置时的警报，当您使用[CLLocationManager访问用户当前位置时，它会自动询问](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)

```
-(void)getLocation
{
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.distanceFilter = kCLLocationAccuracyHundredMeters;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;

    NSLog(@"eee%f",locationManager.location.coordinate.latitude);
    // Start updating location changes.
    [locationManager startUpdatingLocation];
}

- (void)startUpdatingCurrentLocation
{
    //NSLog(@"STARTUPDATELOCATION");
    // if location services are restricted do nothing
    if ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusDenied ||
        [CLLocationManager authorizationStatus] == kCLAuthorizationStatusRestricted )
    {
        return;
    }

    // if locationManager does not currently exist, create it
    if (!locationManager)
    {
        locationManager = [[CLLocationManager alloc] init];
        [locationManager setDelegate:self];
        locationManager.distanceFilter = 10.0f; // we don't need to be any more accurate than 10m

    }

    [locationManager startUpdatingLocation];

    // [self showCurrentLocationSpinner:YES];
} 
```

只需阅读[CLLocationManager 类参考](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:00:47.890

好吧，它非常简单。它被称为一个`UIAlertView`并且非常常见的用于提供通知。它们应该用于通知用户一些事情，而不是太多的交互。

编码明智，这里是一些基本的设置文本：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Alert Body" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil]; 
```

要显示警报：

```
[alert show]; 
```

如果您想要其他按钮标题，则需要将 .h 文件中的 to 设置`delegate`为`self`并符合`UIAlertViewDelegate`. [这是对委托的引用](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)，您基本上想要实现该`clickedButtonAtIndex:`方法并使用索引来找出用户按下了哪个按钮并执行操作。

[不要滥用警报视图。](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW41)

# xml - 如何加快 XML::Twig

> ID：13839195
> 
> 赞同：5
> 
> 时间：2012-12-12T11:54:04.733
> 
> 标签：xml, perl, parsing, large-files, xml-twig

我[`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig)用来解析一个非常大的 XML 文档。我想根据`<change></change>`标签将它分成块。

现在我有：

```
my $xml = XML::Twig->new(twig_handlers => { 'change' => \&parseChange, });
$xml->parsefile($LOGFILE);

sub parseChange {

  my ($xml, $change) = @_;

  my $message = $change->first_child('message');
  my @lines   = $message->children_text('line');

  foreach (@lines) {
    if ($_ =~ /[^a-zA-Z0-9](?i)bug(?-i)[^a-zA-Z0-9]/) {
      print outputData "$_\n";
    }
  }

  outputData->flush();
  $change->purge;
} 
```

现在，`parseChange`当它从 XML 中提取该块时，它正在运行该方法。它进展非常缓慢。我针对从文件中读取 XML`$/=</change>`并编写函数以返回 XML 标记的内容进行了测试，它运行得更快。

是我遗漏了什么还是我使用`XML::Twig`不正确？我是 Perl 的新手。

编辑：这是更改文件的示例更改。该文件由很多这些一个接一个地组成，它们之间不应该有任何东西：

```
<change>
<project>device_common</project>
<commit_hash>523e077fb8fe899680c33539155d935e0624e40a</commit_hash>
<tree_hash>598e7a1bd070f33b1f1f8c926047edde055094cf</tree_hash>      
<parent_hashes>71b1f9be815b72f925e66e866cb7afe9c5cd3239</parent_hashes>      
<author_name>Jean-Baptiste Queru</author_name>      
<author_e-mail>jbq@google.com</author_e-mail>      
<author_date>Fri Apr 22 08:32:04 2011 -0700</author_date>      
<commiter_name>Jean-Baptiste Queru</commiter_name>      
<commiter_email>jbq@google.com</commiter_email>      
<committer_date>Fri Apr 22 08:32:04 2011 -0700</committer_date>      
<subject>chmod the output scripts</subject>      
<message>         
    <line>Change-Id: Iae22c67066ba4160071aa2b30a5a1052b00a9d7f</line>      
</message>      
<target>         
    <line>generate-blob-scripts.sh</line>      
</target>   
</change> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:08:02.443

就目前而言，您的程序正在处理*所有*XML 文档，包括`change`您不感兴趣的元素之外的数据。

如果您将`twig_handlers`构造函数中的参数更改为`twig_roots`，则将仅为感兴趣的元素构建树结构，其余的将被忽略。

```
my $xml = XML::Twig->new(twig_roots => { change => \&parseChange }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:08:45.420

`XML::Twig`包括一种机制，您可以在标签出现时对其进行处理，然后丢弃不再需要的内容以释放内存。

这是从[文档](http://search.cpan.org/~mirod/XML-Twig-3.42/Twig_pm.slow#Processing_an_XML_document_chunk_by_chunk)中获取的示例（其中还有更多有用的信息）：

```
my $t= XML::Twig->new( twig_handlers => 
                          { section => \&section,
                            para   => sub { $_->set_tag( 'p'); }
                          },
                       );
  $t->parsefile( 'doc.xml');

  # the handler is called once a section is completely parsed, ie when 
  # the end tag for section is found, it receives the twig itself and
  # the element (including all its sub-elements) as arguments
  sub section 
    { my( $t, $section)= @_;      # arguments for all twig_handlers
      $section->set_tag( 'div');  # change the tag name.4, my favourite method...
      # let's use the attribute nb as a prefix to the title
      my $title= $section->first_child( 'title'); # find the title
      my $nb= $title->att( 'nb'); # get the attribute
      $title->prefix( "$nb - ");  # easy isn't it?
      $section->flush;            # outputs the section and frees memory
    } 
```

这在处理数千兆字节的文件时可能是必不可少的，因为（同样，根据文档）将整个内容存储在内存中可能会占用文件大小的 10 倍之多。

**编辑：**基于您编辑的问题的一些评论。在不了解文件结构的情况下，不清楚究竟是什么让您放慢了速度，但这里有一些事情可以尝试：

*   如果你写了很多行，刷新输出文件句柄会减慢你的速度。Perl 专门出于性能原因缓存文件写入，而您正在绕过它。
*   与其使用该`(?i)`机制，一个相当高级的功能可能会降低性能，为什么不让整个匹配不区分大小写呢？`/[^a-z0-9]bug[^a-z0-9]/i`是等价的。您也可以使用 来简化它`/\bbug\b/i`，这*几乎*是等效的，唯一的区别是下划线包含在不匹配的类中。
*   还可以进行其他一些简化以删除中间步骤。

这个处理程序代码与你的速度相比如何？

```
sub parseChange
{
    my ($xml, $change) = @_;

    foreach(grep /[^a-z0-9]bug[^a-z0-9]/i, $change->first_child_text('message'))
    {
        print outputData "$_\n";
    }

    $change->purge;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:22:53.800

不是 XML::Twig 答案，但是...

如果您要从 xml 文件中提取内容，您可能需要考虑 XSLT。`<change>`使用 xsltproc 和以下 XSL 样式表，我在大约一分钟内从 1Gb 的 s 中得到了包含错误的更改行。我敢肯定，很多改进都是可能的。

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" >

  <xsl:output method="text"/>
  <xsl:variable name="lowercase" select="'abcdefghijklmnopqrstuvwxyz'" />
  <xsl:variable name="uppercase" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'" />

  <xsl:template match="/">
    <xsl:apply-templates select="changes/change/message/line"/>
  </xsl:template>

  <xsl:template match="line">
    <xsl:variable name="lower" select="translate(.,$uppercase,$lowercase)" />
    <xsl:if test="contains($lower,'bug')">
      <xsl:value-of select="."/>
      <xsl:text>
</xsl:text>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

如果您的 XML 处理可以作为

1.  提取为纯文本
2.  争吵变平的文本
3.  利润

那么 XSLT 可能是该过程中第一步的工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:56:48.513

如果您的 XML 真的很大，请使用[XML::SAX](https://metacpan.org/module/XML%3a%3aSAX)。它不必将整个数据集加载到内存中；相反，它顺序加载文件并为每个标签生成回调事件。我成功地使用 XML::SAX 来解析大小超过 1GB 的 XML。以下是您的数据的 XML::SAX 处理程序示例：

```
#!/usr/bin/env perl
package Change::Extractor;
use 5.010;
use strict;
use warnings qw(all);

use base qw(XML::SAX::Base);

sub new {
    bless { data => '', path => [] }, shift;
}

sub start_element {
    my ($self, $el) = @_;
    $self->{data} = '';
    push @{$self->{path}} => $el->{Name};
}

sub end_element {
    my ($self, $el) = @_;
    if ($self->{path} ~~ [qw[change message line]]) {
        say $self->{data};
    }
    pop @{$self->{path}};
}

sub characters {
    my ($self, $data) = @_;
    $self->{data} .= $data->{Data};
}

1;

package main;
use strict;
use warnings qw(all);

use XML::SAX::PurePerl;

my $handler = Change::Extractor->new;
my $parser = XML::SAX::PurePerl->new(Handler => $handler);

$parser->parse_file(\*DATA);

__DATA__
<?xml version="1.0"?>
<change>
  <project>device_common</project>
  <commit_hash>523e077fb8fe899680c33539155d935e0624e40a</commit_hash>
  <tree_hash>598e7a1bd070f33b1f1f8c926047edde055094cf</tree_hash>
  <parent_hashes>71b1f9be815b72f925e66e866cb7afe9c5cd3239</parent_hashes>
  <author_name>Jean-Baptiste Queru</author_name>
  <author_e-mail>jbq@google.com</author_e-mail>
  <author_date>Fri Apr 22 08:32:04 2011 -0700</author_date>
  <commiter_name>Jean-Baptiste Queru</commiter_name>
  <commiter_email>jbq@google.com</commiter_email>
  <committer_date>Fri Apr 22 08:32:04 2011 -0700</committer_date>
  <subject>chmod the output scripts</subject>
  <message>
    <line>Change-Id: Iae22c67066ba4160071aa2b30a5a1052b00a9d7f</line>
  </message>
  <target>
    <line>generate-blob-scripts.sh</line>
  </target>
</change> 
```

输出

```
Change-Id: Iae22c67066ba4160071aa2b30a5a1052b00a9d7f 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-02T10:19:05.713

我的要花很长时间。

```
 my $twig=XML::Twig->new
  (
twig_handlers =>
   {
    SchoolInfo => \&schoolinfo,
   },
   pretty_print => 'indented',
  );

$twig->parsefile( 'data/SchoolInfos.2018-04-17.xml');

sub schoolinfo {
  my( $twig, $l)= @_;
  my $rec = {
                 name   => $l->field('SchoolName'),
                 refid  => $l->{'att'}->{RefId},
                 phone  => $l->field('SchoolPhoneNumber'),
                };

  for my $node ( $l->findnodes( '//Street' ) )    { $rec->{street} = $node->text; }
  for my $node ( $l->findnodes( '//Town' ) )      { $rec->{city} = $node->text; }
  for my $node ( $l->findnodes( '//PostCode' ) )  { $rec->{postcode} = $node->text; }
  for my $node ( $l->findnodes( '//Latitude' ) )  { $rec->{lat} = $node->text; }
  for my $node ( $l->findnodes( '//Longitude' ) ) { $rec->{lng} = $node->text; }     
} 
```

这是 pretty_print 的机会吗？否则它非常简单。

# iphone - 使用安全框架的加密和解密

> ID：13839200
> 
> 赞同：-2
> 
> 时间：2012-12-12T11:54:18.813
> 
> 标签：iphone, ios, security, encryption, aes

我正在使用以下代码进行文件加密和解密，

```
- (NSData *) AESEncrypt:(NSString *)key withData:(NSData *)fileData {

    // 'key' should be 32 bytes for AES256, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [fileData length];

    //See the doc: For block ciphers, the output size will always be less than or
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesEncrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,keyPtr, kCCKeySizeAES256,
                                          NULL /* initialization vector (optional) */,
                                          [fileData bytes], dataLength, /* input */
                                          buffer, bufferSize, /* output */
                                          &numBytesEncrypted);
    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
    }

    free(buffer); //free the buffer;
    return nil;
} 
```

和解密使用

```
- (NSData *) AESDecrypt:(NSString *)key withData:(NSData *)fileData {

    // 'key' should be 32 bytes for AES256, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    //[key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [fileData length];

    //See the doc: For block ciphers, the output size will always be less than or
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesDecrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,keyPtr, kCCKeySizeAES256,                          NULL /* initialization vector (optional) */,
                                          [fileData bytes], dataLength, /* input */
                                          buffer, bufferSize, /* output */
                                          &numBytesDecrypted);

    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
    }

    free(buffer); //free the buffer;
    return nil;
} 
```

哪个工作正常。但看起来它正在使用 AES256 ，但我想将其更改为 AES128 所以我将第一行从更改`char keyPtr[kCCKeySizeAES256+1];`为 char `keyPtr[kCCKeySizeAES128+1];`。

Fi 我改变了，只有加密有效。解密无法正常工作。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:01:48.780

一个问题是您将密钥与一串字符混淆了。密钥不是字符串，它是二进制数据。您用零填充，但密钥也可能包含零，因此任何终止符都不合适。

如果要从密码创建密钥，请选择字符编码，将密码转换为该编码，并将结果与​​盐和迭代计数一起提供给 PBKDF2 等函数。

# css - 让桌子的 td 占据全宽？

> ID：13839202
> 
> 赞同：0
> 
> 时间：2012-12-12T11:54:27.700
> 
> 标签：css, html-table

我有一张桌子。使用 CSS，我将 table、tbody 和 tr 的宽度设置为 100%，使用 firebug 我可以看到这是有效的。

我可以让 td 占据全部可用宽度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:58:18.660

这取决于您在表格中使用的列数，分配宽度将显示相应 td 对其分配宽度的占用

# web-services - 从外部窗口应用程序编辑 SharePoint2010 列表。

> ID：13839213
> 
> 赞同：2
> 
> 时间：2012-12-12T11:54:55.040
> 
> 标签：web-services, sharepoint-2010, custom-lists

实际上，我正在尝试在 Windows 应用程序的共享点列表中添加项目。当我添加 Web 参考并能够获取 Lists.asmx 列出的所有产品时，一切都很好。当我执行我的程序并尝试调用 listServiceObj.GetListAndview("Customers",""); 它给了我错误 "The request failed with HTTP status 401: Unauthorized" 。请注意，此时我的凭据和服务参考网址是；

```
 SpListService.Lists spListService = new SpListService.Lists();
        spListService.Credentials = System.Net.CredentialCache.DefaultCredentials;

        spListService.Url = "http://localhost/_vti_bin/Lists.asmx";

        XmlNode customerListView = spListService.GetListAndView("Customers", ""); 
```

然后我将上面的代码更改为；

```
 SpListService.Lists spListService = new SpListService.Lists();
        spListService.Credentials = System.Net.CredentialCache.DefaultCredentials;

        spListService.Url = "http://<PC-Name>/sites/Home/_vti_bin/Lists.asmx";

        XmlNode customerListView = spListService.GetListAndView("Customers", ""); 
```

然后我收到以下错误；

“引发了‘Microsoft.SharePoint.SoapServer.SoapServerException’类型的异常。”

我已将登录用户设置为完全控制组。也是管理员组的成员.. 但结果相同.. 另请注意，当尝试访问“http://localhost/”或“http:///”时，它会给我拒绝访问 SP2010 页面。 .. 相反，我必须写“http:///sites/Home/SitePages/Home.aspx”来打开我的团队网站集

我真的坚持这个....会很高兴为我的这个问题提供一些解决方案......在此先感谢 MJay

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:38:57.150

当我实现我的第一个 SharePoint 列表 Web 服务客户端时，我遇到了类似的问题。原因是自动生成的客户端类实际上默认将自己介绍为 Mozilla Web 浏览器！SharePoint 服务器不允许对浏览器进行基本身份验证，因此客户端实际上被重定向到防火墙登录页面。

我建议您从 Lists 类继承另一个类并执行以下操作：

1.  在构造函数中设置另一个用户代理值。
2.  将“preauthenticate”属性设置为 true。这应该强制客户端在第一个请求中发送凭据，而不仅仅是在他们被请求之后。
3.  如有必要，请尝试明确提供凭据。

请参见下面的示例。

```
public class CustomizedLists : Lists
{
    public CustomizedLists() : base()
    {
        this.UserAgent = "Some SharePoint client";

        this.PreAuthenticate = true;

        System.Net.ICredentials creds = new System.Net.NetworkCredential("user", "pwd");
        this.Credentials = creds.GetCredential(uri, "Basic");
    }
} 
```

# php - 我可以根据 SQL Server 数据库表对 SVN 用户进行身份验证吗？

> ID：13839214
> 
> 赞同：1
> 
> 时间：2012-12-12T11:54:56.487
> 
> 标签：php, sql-server, apache, svn

我正在尝试为 Web 应用程序设置一个简单的文档管理系统。

Web 应用程序是用 PHP 编写的，并使用 MSSQL DB。

在 MSSQL DB 中，我有一个标识 Persons 的表“Persons”，一个包含表 Persons 中行的登录名的表“Logins”，另一个名为“SchoolClass”的表包含学校的 SchoolClasses。

使用另一个表“PersonsToSchoolClasses”，我能够确定哪个人在哪个班级。

当我们现在看到这个时，我们可以认识到，表“类”包含组，而“人员”包含我们在 SVN 中需要的用户。
这个类和它们的关联经常会改变。

现在我用svn做实验。我意识到这正是我所需要的。

我尝试使用 stackoverflow.com 上发布的以下问题进行设置： [如何在 svn 存储库中设置权限？](https://stackoverflow.com/questions/9291294/how-to-set-permissions-in-an-svn-repository)

这里描述了我必须手动配置每个组和每个用户。

现在终于我的问题：
是否可以从数据库表中配置组和用户？也许用 SQL ？我不希望有一些文件存储所有用户和组。密码也已经包含在数据库中。我只需要一种方法，让 SVN 获取这些表并使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:53:02.957

> 是否可以从数据库表中配置组和用户

这取决于。

如果您通过 Apache 使用 Subversion `mod_dav_svn`，那么实际上处理身份验证的不是 Subversion，而是 Apache。这意味着您可以使用Apache 支持的*任何*方法来执行身份验证。您链接到的问题完全是关于使用该`svnserve`程序，而不是 Apache。

看起来您可以使用 Apache[`mod_authn_dbd`](http://httpd.apache.org/docs/2.2/mod/mod_authn_dbd.html)来设置身份验证并[`mod_dbd`](http://httpd.apache.org/docs/2.2/mod/mod_dbd.html)设置数据库访问权限。

从文档中，`mod_dbd`可以使用 FreeTDS 库连接到 MS SQL Server。但是，此功能附带了一个很大的[安全警告。](http://httpd.apache.org/docs/2.2/mod/mod_dbd.html#security)简而言之，FreeTDS 不支持带有参数化查询的预处理语句。这意味着除非您*非常*小心，否则用户可能会执行 SQL 注入攻击。

这还有另一个缺点。除非你碰巧已经有这些模块可供你使用，否则你将需要编译它们。目前尚不清楚您使用的是 Linux 还是 Windows，但无论如何它都会成为真正的熊。

还有一个 ODBC 驱动程序，但它在文档中被描述为来自第三方，这意味着您几乎肯定必须编译它。

老实说，我不建议您使用这种方法，除非您已经掌握了这些模块。仅仅写出一个文件并*没有什么可耻的。*`.htpasswd`只记得[使用 Digest authentication](http://httpd.apache.org/docs/2.2/mod/mod_auth_digest.html)。

# sharepoint - PowerShell 3.0 Sharepoint 脚本不工作

> ID：13839217
> 
> 赞同：5
> 
> 时间：2012-12-12T11:55:00.160
> 
> 标签：sharepoint, powershell

今天我的powershell更新到了3.0版。此版本针对并使用 .NET 运行时 4.0。Sharepoint 2010 cmdlet 需要 .NET 3.5，并且不能在 4.0 下运行。任何人都知道如何让脚本工作？

我收到此错误：Remove-SPSite : Microsoft SharePoint 不支持 Microsoft .Net 运行时版本 4.0.30319.296。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T12:46:08.173

尝试使用以下命令启动 powershell：powershell.exe -version 2.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:31:34.950

`powershell.exe -v 2` 也应该可以正常工作

**编辑：**

最好卸载导致此问题的 Windows 更新 [KB2506143](http://www.microsoft.com/en-us/download/details.aspx?id=34595)

检查这篇文章

[不要在 SharePoint 2010 服务器上安装 Windows Management Framework 3.0 (KB2506143)](https://sharepoint.nauplius.net/do-not-install-the-windows-management-framework-3-0-kb2506143-on-sharepoint-2010-servers/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T16:34:08.797

我今天也遇到了一些麻烦，但这对我有用。

```
C:\Windows\System32\WindowsPowerShell\v1.0\PowerShell.exe -version 2.0 -NoExit  " & ' C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\CONFIG\POWERSHELL\Registration\\sharepoint.ps1 ' " 
```

起初我认为我有一个尾随空格使其无法正常工作，但您可以随时检查 `$psversiontable`并确保 CLRVersion 为 2.0.50727.5466

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T13:18:11.720

键入“PowerShell -v 2”（不带引号）。在脚本顶部，然后您在第二次运行时使用 # 对其进行注释，如果脚本环聊这会加载 PowerShell 版本 2，您应该能够将其用于 SharePoint。只需键入“退出”即可返回 PowerShell v3

# parsing - Parse.js 绑定错误

> ID：13839219
> 
> 赞同：0
> 
> 时间：2012-12-12T11:55:00.280
> 
> 标签：parsing, backbone.js, typeerror

我是 Backbone.js 和 Parse 的新手，如果我不够具体，我深表歉意。

我有一个在初始化时抛出 TypeError 的视图，即使我通过删除有问题的行来修复，也只会在代码中抛出另一个完全可以接受的错误。

这是我得到的错误：

```
Uncaught TypeError: Cannot call method 'bind' of undefined views.js:59
Uncaught TypeError: Cannot call method 'bind' of undefined views.js:59 
```

这是视图的 init 函数，第 59 和 60 行：

```
initialize: function() {
    this.model.bind("reset", this.render, this);
    this.model.bind("add", this.appendNewJob, this);
} 
```

如果您需要更多代码，请在评论中告诉我。更新：根据要求，我的 render 和 appendNewJob 函数：

```
render: function(eventName) {
    _.each(this.model.models, function(job){
        this.appendNewJob(job);
    }, this);
    this.delegateEvents();
    return this.el;
},
appendNewJob: function(job){
    this.$el.append(new JobListItemView({
        model: job
    }).render());
} 
```

我的路由器：

```
var AppRouter = Parse.Router.extend({
    initialize: function() {
        $('#header').html(new HeaderView().render());
    },
    routes: {
        "": "list",
        "jobs": "list",
        "settings": "viewSettings"
    },
    list: function() {
        var self = this;
        FB.getLoginStatus(function(response){
            if(response.status === 'connected') {
                // logged in.
                self.before(function() {
                    self.showView('#content', new JobListView());
                });
            } else if(response.status === 'not_authorized') {
                // not authorized.
            } else {
                // not connected.
                $('#app').hide();
                self.before(function() {
                    self.showView('#login', new StartView());
                });
            }
        });
    },
    viewSettings: function() {
        var self = this;
        FB.getLoginStatus(function(response){
            if(response.status === 'connected') {
                // logged in.
                self.before(function() {
                    self.showView('#content', new SettingsView());
                });
            } else if(response.status === 'not_authorized') {
                // not authorized.
            } else {
                // not connected.
                $('#app').hide();
                self.before(function() {
                    self.showView('#login', new StartView());
                });
            }
        });
        $('#filterBar').hide();
    },
    showView: function(selector, view) {
        if(this.currentView) this.currentView.close();
        $(selector).html(view.render());
        this.currentView = view;
        return view;
    },
    before: function(callback) {
        if(this.jobList) {
            if(callback) callback.call(this);
        } else {
            this.jobList = new JobCollection();
            var self= this;
            this.jobList.fetch({
                success: function() {
                    var joblist = new JobListView({
                        model: self.jobList
                    }).render();
                    $('#content').html(joblist);
                    if(callback) callback.call(self);
                }
            });
        }
    }
}); 
```

更新：我还使用 parse js 库代替骨干。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:11:38.343

您正在初始化视图而不传递`model`选项。该错误是一个标准的 javascript 错误，它告诉您第 59 行`this.model`未定义：

```
this.model.bind("reset", this.render, this); 
```

视图不能有`this.model`属性，除非您将模型赋予视图！

所以而不是：

```
new JobListView(); 
```

你需要初始化它

```
new JobListView({model: <insert your model here>}); 
```

# asp.net - 一行内一个列值的多次更新

> ID：13839221
> 
> 赞同：0
> 
> 时间：2012-12-12T11:55:01.957
> 
> 标签：asp.net, datatable

下面的代码允许我在我选择的行中添加 +1，但我的问题是，一旦它被更新，“值”的新值就不会被接受

```
 public void InspireMetrics()
    {
        DataTable table = (DataTable)Session["Metrics"];
        int Desire = Convert.ToInt32(table.Rows[0]["Value"]);
        int Parti = Convert.ToInt32(table.Rows[1]["Value"]);
        int Advo = Convert.ToInt32(table.Rows[2]["Value"]);
        if (SNSIn.Checked)
        {
           table.Rows[0][1] = Desire +1;
           table.Rows[1][1] = Parti +1;
           table.AcceptChanges();
           Databind();
           Chart2.DataSource = table;
        }
        if (TTIn.Checked)
        {
            table.Rows[0][1] = Desire +1;
            table.Rows[2][1] = Advo +1;
            DataBind();
            Chart2.DataSource = table;

        }
        if (MusicIn.Checked)
        {
            table.Rows[0][1] = Desire +1;
            table.Rows[1][1] = Parti +1;
            DataBind();
            Chart2.DataSource = table ;

        }
    } 
```

因此，例如，如果我选择 SNS，它将更新但不会应用新值，因此当我想选择音乐时，它不会向最新值添加一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:01:04.727

You are missing few statements. This is what you need-

```
 if (TTIn.Checked)
        {
            table.Rows[0][1] = Desire +1;
            table.Rows[2][1] = Advo +1;
            table.AcceptChanges(); //missed
            Chart2.DataSource = table; //first datasource and then databind
            Chart2.DataBind();
        } 
```

# itk - ITK 读取图像：无法创建 IO 对象

> ID：13839223
> 
> 赞同：1
> 
> 时间：2012-12-12T11:55:25.320
> 
> 标签：itk

我将 ITK 4.2 与 Qt Creator 一起使用。

尝试阅读几张图像，我总是得到相同的结果：

> itk::ImageFileReaderException (0x1efccb0) 位置：“void itk::ImageFileReader::GenerateOutputInformation() [with TOutputImage = itk::Image; ConvertPixelTraits = itk::DefaultConvertPixelTraits]”
> 
> 文件：/usr/local/include/ITK-4.2/itkImageFileReader.hxx 行：143
> 
> 说明： **无法**为文件 /home/marcos/d2.dcm创建 IO 对象
> 
> 尝试创建以下内容之一：您可能未能设置文件后缀，或将后缀设置为不受支持的类型。

我已经成功地阅读了它

```
vtkGDCMImageReader* reader = vtkGDCMImageReader::New();
reader->SetFileName(fileName);
reader->Update();
vtkImageData* imageData = reader->GetOutput();
cout << "imageData->GetScalarTypeAsString(): " << imageData->GetScalarTypeAsString() << endl; 
```

GetScalarTypeAsString *()*返回**unsigned short**。无论如何，我尝试使用 unsigned long、unsigned int、double、int、short、short、unsigned int、unsigned char ......我得到了同样的结果。

这是代码：

```
typedef itk::Image <unsigned short> ImageType;
typedef itk::ImageFileReader<ImageType> ReaderType;
ReaderType::Pointer reader = ReaderType::New();
try
{
    reader->SetFileName(nombreFichero);
}
catch (itk::ExceptionObject& excep)
{
    cerr << excep << endl;
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:41:54.363

与 vtk 一样，itk 也有基于 gdcm 的特定类来读取 DICOM 系列。看看： [http ://www.itk.org/Doxygen/html/classitk_1_1GDCMImageIO.html](http://www.itk.org/Doxygen/html/classitk_1_1GDCMImageIO.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:15:14.367

即使在使用 Qt 构建时也要确保使用 CMake。如果不使用 CMake，则不会生成注册 ImageIO 工厂对象的特殊代码。看

[http://doc.qt.digia.com/qtcreator-2.4/creator-project-cmake.html](http://doc.qt.digia.com/qtcreator-2.4/creator-project-cmake.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:57:09.700

将图像 IO 设置为 gdcmImageIO 供阅读器使用，然后您可以读取 .dcm 文件。添加 gdcmImageIO 的代码如下：

> typedef itk::ImageFileReader< InputImageType > ReaderType;
> 
> ReaderType::Pointer reader = ReaderType::New(); 阅读器->SetFileName(argv[1]);
> 
> typedef itk::GDCMImageIO ImageIOType;
> 
> ImageIOType::指针 gdcmImageIO = ImageIOType::New();
> 
> 阅读器->SetImageIO(gdcmImageIO);

# c# - 使用 RedirectStandardOutput = True 处理来自 p.WaitForExit() 的大量输出

> ID：13839225
> 
> 赞同：1
> 
> 时间：2012-12-12T11:55:48.737
> 
> 标签：c#, .net, vb.net, process, .net-3.5

正如这里所讨论的，[ProcessStartInfo 挂在“WaitForExit”上？为什么？](https://stackoverflow.com/questions/139593/processstartinfo-hanging-on-waitforexit-why)- 使用大输出调用 p.WaitForExit() 会填充 OutputStream 并导致死锁，因为进程和输出流相互等待。

我的代码例如：

```
Dim p = New Process()
Dim ReturnValue As Boolean = False
p.StartInfo = New ProcessStartInfo(LynxPath, "-dump -nolist -width 1000 " & HtmlBuffer)
p.StartInfo.WorkingDirectory = WorkingRoot
p.StartInfo.UseShellExecute = False
p.StartInfo.RedirectStandardOutput = True
p.StartInfo.RedirectStandardError = True
p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden
p.StartInfo.CreateNoWindow = True
p.Start()
ReturnValue = p.WaitForExit(5000) 
```

当处理来自 LYNX 的大量输出时，除非我使用上述超时，否则线程会挂起，并且当输出缓冲区变满时会修剪输出——这意味着我读取的任何输出都不完整。

上面问题中发布的 c# 解决方案似乎通过利用 `OutputDataReceived`进程类上的事件来解决这个问题。然而，我的问题是将 c# 代码转换为 vb.net 3.5，我通过正常的转换路线运行它并吐出：

```
Using process As New Process()
    process.StartInfo.FileName = filename
    process.StartInfo.Arguments = arguments
    process.StartInfo.UseShellExecute = False
    process.StartInfo.RedirectStandardOutput = True
    process.StartInfo.RedirectStandardError = True

    Dim output As New StringBuilder()
    Dim [error] As New StringBuilder()

    Using outputWaitHandle As New AutoResetEvent(False)
        Using errorWaitHandle As New AutoResetEvent(False)
            process.OutputDataReceived += Function(sender, e) 
            If e.Data Is Nothing Then
                outputWaitHandle.[Set]()
            Else
                output.AppendLine(e.Data)
            End If

End Function
            process.ErrorDataReceived += Function(sender, e) 
            If e.Data Is Nothing Then
                errorWaitHandle.[Set]()
            Else
                [error].AppendLine(e.Data)
            End If

End Function

            process.Start()

            process.BeginOutputReadLine()
            process.BeginErrorReadLine()

                ' Process completed. Check process.ExitCode here.
            If process.WaitForExit(timeout) AndAlso outputWaitHandle.WaitOne(timeout) AndAlso errorWaitHandle.WaitOne(timeout) Then
                ' Timed out.
            Else
            End If
        End Using
    End Using
End Using 
```

然而，Visual Studio 2008 将函数声明标记为无效语法（我认为像这样的内联方法在 4.5 及更高版本中？），如何在 3.5 中使用这个示例 - 无法完全理解它。

**编辑：**刚刚找到这个链接：http: [//msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx) - 现在想弄清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:10:26.807

这就是我们最终想出的，它需要一个 html 字符串，将其写入文件，然后用 lynx 打开它，然后使用事件句柄（处理大量输出）捕获 lynx 输出并填充纯文本字符串：

```
Function ConvertHtmlToPlainText(ByVal HtmlString As String) As String

    ' Define FileBuffer Path
    Dim HtmlBuffer As String = WorkingRoot & "HtmlBuffer.html"

    ' Delete any old buffer files
    Try
        If File.Exists(HtmlBuffer) = True Then
            File.Delete(HtmlBuffer)
        End If
    Catch ex As Exception
        Return "Error: Deleting old buffer file: " & ex.Message
    End Try

    ' Write the HTML to the buffer file
    Try
        File.WriteAllText(WorkingRoot & "HtmlBuffer.html", HtmlString)
    Catch ex As Exception
        Return "Error: Writing new buffer file: " & ex.Message
    End Try

    ' Check the file was written OK
    If File.Exists(HtmlBuffer) = False Then
        Return "Error: HTML Buffer file was not written successfully."
    End If

    If File.Exists(LynxPath) = False Then
        Return "Error: Lynx.exe could not be found in path: " & LynxPath
    End If

    ' Read the buffer file with Lynx and capture plain text output
    Try
        LynxOutput = ""
        LynxOutputLineCount = 0
        Dim LynxProcess As New Process()
        LynxProcess.StartInfo = New ProcessStartInfo(LynxPath, "-dump -nolist -width 1000 " & HtmlBuffer)
        LynxProcess.StartInfo.UseShellExecute = False
        LynxProcess.StartInfo.RedirectStandardOutput = True
        LynxProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden
        LynxProcess.StartInfo.CreateNoWindow = True
        AddHandler LynxProcess.OutputDataReceived, AddressOf LynxOutputHandle
        LynxProcess.StartInfo.RedirectStandardInput = True
        LynxProcess.Start()
        LynxProcess.BeginOutputReadLine()
        LynxProcess.WaitForExit()
        LynxProcess.Close()

        ' Return the rendered Text
        Return TrimEachLine(LynxOutput.Replace(vbLf & vbLf, vbLf))

    Catch ex As Exception
        Return "Error: Error running LYNX to parse the buffer: " & ex.Message
    End Try
End Function

Private Sub LynxOutputHandle(ByVal sendingProcess As Object, ByVal outLine As DataReceivedEventArgs)
    LynxOutputLineCount = LynxOutputLineCount + 1
    LynxOutput = LynxOutput & outLine.Data & vbLf
End Sub 
```

# c# - 在逗号分隔的字符串中查找重复项的更好方法是什么？

> ID：13839227
> 
> 赞同：1
> 
> 时间：2012-12-12T11:55:55.537
> 
> 标签：c#, linq

我有以下两种方法。方法 1 使用 a`HashSet`和 List。第二种方法使用`Sorting of Array`.

哪个更好`processing speed`

1.  什么时候有很多记录？
2.  当有少量记录时？

代码

```
 string entryValue = "A,B, a , b, ";

        if (!String.IsNullOrEmpty(entryValue.Trim()))
        {

            //APPROACH 1
            bool isUnique = true;

            //Hash set is unique set  -- Case sensitivty Ignored
            HashSet<string> uniqueRecipientsSet = new HashSet<string>(entryValue.Trim().Split(',').Select(t => t.Trim()),StringComparer.OrdinalIgnoreCase );

            //List can hold duplicates
            List<string> completeItems = new List<string>(entryValue.Trim().Split(',').Select(t => t.Trim()));

            if (completeItems.Count != uniqueRecipientsSet.Count)
            {
                isUnique = false;
            }

            //APPROACH 2
            bool isUniqueCheck2 = true;
            string[] words = entryValue.Split(',');
            Array.Sort(words);

            for (int i = 1; i < words.Length; i++)
            {
                if (words[i].ToLower().Trim() == words[i - 1].ToLower().Trim())
                {
                    isUniqueCheck2 = false;
                    break;
                }
            }

            bool result1 = isUnique;
            bool result2 = isUniqueCheck2;

        } 
```

参考：

1.  [拆分逗号分隔的字符串以计算重复项](https://stackoverflow.com/questions/2617896/split-comma-separated-string-to-count-duplicates)
2.  [MSDN 博客 - 使用 LINQ 查找重复项](http://blogs.msdn.com/b/ericwhite/archive/2008/08/19/find-duplicates-using-linq.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:59:40.607

哈希集方法是 O(n)；排序方法是 O(n log n)。

但是，一个更快的选择是通过在您第一次看到重复项时立即停止来缩短哈希集方法：

```
HashSet<string> uniqueRecipientsSet
    = new HashSet<string>(StringComparer.OrdinalIgnoreCase);
bool isUnique = true;

foreach(var item in entryValue.Split(',').Select(t => t.Trim()))
{
    if (!uniqueRecipientsSet.Add(item))
    {
        isUnique = false;
        break;
    }
} 
```

您*可以*在 LINQ 中隐藏`foreach`循环：

```
HashSet<string> uniqueRecipientsSet
    = new HashSet<string>(StringComparer.OrdinalIgnoreCase);
bool isUnique = entryValue.Split(',').Select(t => t.Trim())
    .All(i => uniqueRecipientsSet.Add(i)); 
```

这是“带有副作用的 LINQ”，但它*确实*将整个事情减少到两行。

您可以编写自己的`AreAllDistinct`扩展方法来避免副作用：

```
public static bool AreAllDistinct<T>(
    this IEnumerable<T> source, IEqualityComparer<T> comparer)
{
    HashSet<T> checker = new HashSet<T>(comparer);
    foreach (var t in T)
        if (!checker.Add(t))
            return false;
    return true;
}

bool isUnique = entryValue.Split(',').Select(t => t.Trim())
    .AreAllDistinct(StringComparer.OrdinalIgnoreCase); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:58:44.120

您可以简化您的第一种方法：

```
List<string> completeItems = new List<string>(entryValue.Trim().Split(',').Select(t => t.Trim()));
isUnique = completeItems.Count == completeItems.Distinct().Count(); 
```

这将消除多次拆分，并将哈希集隐藏在`Distinct()`. 请注意，该`if`语句也是不必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:02:28.197

你本可以使用[`StopWatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch%28v=vs.80%29.aspx)自己。第一种方法要快一点：

```
1) 00:00:00.0460701  2) 00:00:00.0628364 
```

每次逼近 10000 次重复（只是测量时间的简单方法）

# database - 迁移技术：将整个数据库复制到 v2 或始终在同一数据库版本上更改？

> ID：13839231
> 
> 赞同：0
> 
> 时间：2012-12-12T11:56:02.110
> 
> 标签：database, migration

我知道标题可能令人困惑，但为了解释这个问题，这是我能想到的最好的。

**背景：**

我有一个域，一个域有2个数据库：一个nosql（Mongodb）和一个sql（Postgres）；每个数据库都有自己的模型。例如，如果域名是“myapp”并且版本是“v01”，那么它将在 sql 和 nosql 中都有一个名为“myapp_v01”的数据库。

**迁移 - 复制数据库：**

当我迁移时，我通常会创建一个名为“myapp_v02”的新数据库（注意 2）。然后迁移脚本将克隆表或将从“myapp_v01”获取数据以某种方式对其进行更改并以不同的方式将其保存到“myapp_v02”。我不知道这是否具有很强的可扩展性，或者迁移需要 1 小时会怎样？

**迁移 - 复制表：**

我可以简单地创建一个新的临时表来进行迁移更改（从表“cars”复制到“cars_temp”，然后删除“cars”表并将“cars_temp”的名称更改为“cars”）。

**迁移 - 更改表：**

这有点棘手，因为我们有两个 sql 数据库。在 sql 中，我需要先创建更改模式，然后在需要时以某种方式更新每一行。

**结论：** 我认为第 3 个是最快的，但我真的不知道这里的最佳实践是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:03:04.843

我认为第三种是默认方法。它有几个支持的论点：

1.  你不必触摸你没有改变的东西。它只是保持原样。

2.  您可以轻松地进行分阶段更改，例如在 v1 中添加一列，在版本 1 的生命周期内开始用数据填充它，可能分批，在 v2 中积极使用它，并可能在您确定所有内容时删除 v3 中的旧列新东西运行良好。在其他方法中这样做听起来很麻烦。

3.  对于大型数据库，复制所有数据可能会非常昂贵（更多地考虑时间和 I/O，而不是磁盘空间）

更新回答评论中的附加问题

如果您想将 A 列和 B 列合并到一个新列 C 中，您可以根据问题中的第三种方法有多种选择：

安全的方式： - 停止应用程序，所以没有人可以写入它。

*   创建并填充 C 列

*   可能删除 A 和 B 上的 not null 和类似约束

*   部署并启动仅使用 C 列的新版本应用程序。

*   之后的任何时候删除 A 列和 B 列，可能只在几周后发布下一个版本。

快速方法 - 停止应用程序，因此没有人可以写入它。

*   创建并填充 C 列

*   放下 A 和 B

*   部署并启动仅使用 C 列的新版本应用程序。

由于您的应用程序和未使用的列似乎有问题，这可能是要走的路。

The Way For Legacy Code - 创建列 C（注意：所有应用程序仍在运行）

*   创建使 A、B 和 C 保持同步的触发器（这也可以通过视图和可能的其他供应商特定的 RDBMS 功能来完成）

*   部署并启动仅使用 C 列的新版本应用程序。

*   迁移所有其他应用程序以仅使用 C

*   以后的任何时候删除 A 列和 B 列，可能是几年后。

这适用于您有很多应用程序使用无法一次全部更改的数据库的情况。

我不知道猫鼬的续集......对我来说听起来像是一场童话般的冒险:-)

# google-chrome - 使用 chrome 浏览器登录后端时 Magento 显示错误

> ID：13839236
> 
> 赞同：0
> 
> 时间：2012-12-12T11:56:18.130
> 
> 标签：google-chrome, magento, magento-1.7

我刚刚在我的 LAMP 服务器上安装了 Magento-1.7.0.2。路径是这样的`www/MyProjects/MyStore`。我一步一步安装。最后我有两个选择去存储前端和存储后端。当我点击商店前端时，它只是将我重定向到主页，当我点击商店后端时，它要求我输入用户名和密码。但是当我给出所有的用户名和密码时，它仍然没有登录。当时我使用的是chrome浏览器。但是当我刚刚在我的 Firefox 浏览器中打开该链接时，它只是顺利打开了后端。那么有人可以告诉我在 chrome 浏览器中打开该链接有什么问题吗？任何帮助和建议都将不胜感激。谢谢

**更新**

当我要使用我的用户名和密码登录时，它会显示类似`Invalid User Name or Password.`. 但是这个在 Firefox 中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-26T12:57:38.180

首先转到该文件，然后对这部分进行注释（第 85 到 102 行）。\app\code\core\Mage\Core\Model\Session\Abstract\Varien.php

```
/*
// session cookie params
    $cookieParams = array(
        'lifetime' => $cookie->getLifetime(),
        'path'     => $cookie->getPath(),
        'domain'   => $cookie->getConfigDomain(),
        'secure'   => $cookie->isSecure(),
        'httponly' => $cookie->getHttponly()
    );
  */ 
```

# css - 找出浏览器版本何时偏离标记语言

> ID：13839251
> 
> 赞同：0
> 
> 时间：2012-12-12T11:56:49.740
> 
> 标签：css, internet-explorer, google-chrome, firefox, browser

我有一个网站，其中包含免责声明，该网站最好在 IE7、8 和 9、Firefox 12、13 和 14、Chrome 18、19 和 20 上查看。

这个免责声明是几个月前提出的。

但是，如果启用自动更新，新版本的 Chrome 和 Firefox 会在用户系统上更新。

到目前为止，无论用户使用的是最新版本的 Chrome (CH 23) 和 Firefox (FF 17)，我的网站都支持 CSS 和对齐方式。有一天可能会发布一个特定的浏览器版本，其中他们会在内部更新一些东西，这可能会影响我的 CSS、Ajax 调用等。我特别在意外观。

如何事先了解即将发布的浏览器版本是否会开始正确显示我的网站。而且我不必开始进行任何代码更改。

例如，IE10 发布了，我在开发过程中没有针对这个。我需要检查哪些参数以确保我不必进行任何代码更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:08:18.660

首先，当不同的浏览器在呈现 HTML 的方式上有很大差异时，整个“最佳观看”的事情是对过去的回归，如果你现在开发得当，这基本上是没有意义的。

其次，较新版本的浏览器很少会破坏正常网站的显示功能，我已经看到一些游戏和较新版本的 Chrome 会发生这种情况，但从未见过正常网站。浏览器通常会在显示能力方面向前发展，但绝不会以牺牲以前的版本为代价。您仍然可以使用框架、表格和 HTML 字体标签来构建网站，并且它仍然可以正常显示，老实说，我认为您不必要地担心不太可能发生的事情。

话虽这么说，Chrome 有他们的 Canary 浏览器，这是他们的 Chrome 开发版本，带有最新的玩具和调整，IE 通常会像 IE10 一样在公开之前发布浏览器的预览版本，对 Firefox 或 Safari 并不乐观，但快速谷歌应该可以帮助你。

请记住，为未发布版本的浏览器进行开发是一个非常糟糕的主意。他们可以在发布之前改变你所做的事情。确保您的代码干净且无错误，并且可以在当前浏览器上运行，并且新的浏览器版本有可能打破该代码范围介于苗条和无之间，并且更接近于无端。

# c - Win XP，C程序：查询子进程的int main()

> ID：13839254
> 
> 赞同：0
> 
> 时间：2012-12-12T11:57:12.733
> 
> 标签：c, process

我正在创建一个子进程并向它传递一些参数。

现在，子进程从下一行代码开始执行，但是我是否必须为子进程单独编写另一个 int main()，如下所示，或者它是否只使用已经编写的 int main() 代码父进程？

```
 createProcess(All required arguments);
    if (pid == child_process)
    {
       int main ()
       {
        ......
       }
    } 
```

ENV: WinXP, VS2005 注意：上面的代码只是描述了流程，可能有语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:50:44.613

`CreateProcess`您是否将 Windows与 UNIX混淆了`fork()`？这两个操作系统在创建进程的方式上有所不同。对于 Windows，您必须从头开始执行一个 exe 文件，您不能像在 UNIX 上`CreateProcess`那样继续作为子进程。`fork`您的语句“子进程从下一行代码开始执行”被误认为是 Windows。

请注意，您的代码在 UNIX 上也是非法的，不能有两个称为 main 的函数，也不能在 C 中具有嵌套函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:04:13.730

请再次阅读文档`[CreateProcess()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)`。

该函数采用程序的文件名在新进程中运行。您显示的嵌套函数无效 C。

# c# - 时间：2019-04-10 标签：c#concate to string from large listarray

> ID：13839259
> 
> 赞同：1
> 
> 时间：2012-12-12T11:57:43.007
> 
> 标签：c#, optimization, sql-server-2008-r2, concatenation

我有一个具有以下结构的 listArray：

```
listArray[0] insert_idlist = listArray (value, value, value, ect) 
```

该数组在每个维度中包含大约 2000 个值。

```
var string_list = "'" + string.Join("', '", insert_idlist[0]) + "'";
//var string_list = "'0169624'"; 
```

出于数据库查询的目的，我试图将第一个维度连接成一个字符串，如上所述。但是，在部署时，这会导致程序挂起，并且根据以前对部署环境的经验，我怀疑大量值是原因。

当启用注释行时，代码按预期运行。

任何人都可以提出一种替代的连接方法来提高性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:00:41.340

我认为您可以使用**表值参数**将列表传递给数据库。

这将通过首先没有它来解决您的连接问题。

> 表值参数提供了一种将多行数据从客户端应用程序编组到 SQL Server 的简便方法，而无需多次往返或特殊的服务器端逻辑来处理数据。您可以使用表值参数将数据行封装在客户端应用程序中，并在单个参数化命令中将数据发送到服务器。传入的数据行存储在一个表变量中，然后可以使用 Transact-SQL 对其进行操作。

从阅读MSDN 上的这篇[文章开始。](http://msdn.microsoft.com/en-us/library/bb675163.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:08:09.830

您可以尝试使用 ' [StringBuilder](http://msdn.microsoft.com/en-us/library/h1h0a5sy.aspx) ' 并使用 'capacity' 构造函数参数预先分配足够的空间。这样，在构建目标字符串时，不必一次又一次地将字符串复制到更长的缓冲区。然后，您使用 foreach 语句或类似语句进行连接。

这可能会也可能不会更快，这取决于“string.Join”是如何在内部实现的，这在 .NET 框架的不同版本中可能会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:17:15.607

如果您正在以牺牲可读性为代价来寻求性能提升，那么在循环中使用 StringBuilder 应该比[`String.Join<T>(string, IEnumerable<T>)`](http://msdn.microsoft.com/en-us/library/dd992421)（如果您避免使用 foreach 甚至更多）更快。

看一眼：

[foreach 中的 Stringbuilder 比 for 和 String.Join() 对集合慢吗？](https://stackoverflow.com/questions/5851846/stringbuilder-in-foreach-slower-than-in-for-and-string-join-sucks-on-collectio)

[C# 中的 String.Join 性能问题](https://stackoverflow.com/questions/10032805/string-join-performance-issue-in-c-sharp)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-12T12:01:25.647

Pass as a parameters.

```
using (SqlCommand command = new SqlCommand("SELECT * FROM Dogs1 WHERE Name LIKE @Name", connection))
        {
        //
        // Add new SqlParameter to the command.
        //
        command.Parameters.Add(new SqlParameter("Name", dogName));          
        SqlDataReader reader = command.ExecuteReader();
        while (reader.Read())
        {
            int weight = reader.GetInt32(0);
            string name = reader.GetString(1);
            string breed = reader.GetString(2);
            Console.WriteLine("Weight = {0}, Name = {1}, Breed = {2}", weight,name,breed);
        }
        } 
```

# objective-c - NSTextFinder 以编程方式设置搜索字符串并清除视觉反馈

> ID：13839265
> 
> 赞同：5
> 
> 时间：2012-12-12T11:58:09.373
> 
> 标签：objective-c, macos, cocoa

我有一个`NSTextView`使用查找栏（`[textView setUsesFindBar:YES];`）的。

我有 2 个问题。

1.  如何清除查找操作的视觉反馈？

    当我以编程方式更改 textView 的内容时，就会出现我的问题。对先前内容的搜索操作的视觉反馈在内容更改后仍然存在。显然，这些黄色框不适用于新内容，因此我需要在更改 textView 内容时清除它们。

    注意：我没有实现 NSTextFinderClient 协议，因为我有一个简单的 textView 并且查找栏无需任何其他努力即可工作。

2.  如何将搜索字符串发送到查找栏？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T08:52:29.140

我找到了我的答案，所以对于其他人来说，这是如何做到的。

首先，您需要一个 NSTextFinder 实例，以便您可以控制它。我们在代码中进行了设置。

```
textFinder = [[NSTextFinder alloc] init];
[textFinder setClient:textView];
[textFinder setFindBarContainer:[textView enclosingScrollView]];
[textView setUsesFindBar:YES];
[textView setIncrementalSearchingEnabled:YES]; 
```

***第一个答案***：为了清除视觉反馈，我可以做两件事中的任何一件。我可以取消视觉反馈...

```
[textFinder cancelFindIndicator]; 
```

或者我可以提醒 NSTextFinder 我即将更改我的 textView 内容...

```
[textFinder noteClientStringWillChange]; 
```

***第二个答案***：有一个全球性的NSFindPboard。您可以使用它来设置搜索。

```
// change the NSFindPboard NSPasteboardTypeString
NSPasteboard* pBoard = [NSPasteboard pasteboardWithName:NSFindPboard];
[pBoard declareTypes:[NSArray arrayWithObjects:NSPasteboardTypeString, NSPasteboardTypeTextFinderOptions, nil] owner:nil];
[pBoard setString:@"new search" forType:NSStringPboardType];
NSDictionary* options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSTextFinderCaseInsensitiveKey, [NSNumber numberWithInteger:NSTextFinderMatchingTypeContains], NSTextFinderMatchingTypeKey, nil];
[pBoard setPropertyList:options forType:NSPasteboardTypeTextFinderOptions];

// put the new search string in the find bar
[textFinder cancelFindIndicator];
[textFinder performAction:NSTextFinderActionSetSearchString];
[textFinder performAction:NSTextFinderActionShowFindInterface]; // make sure the find bar is showing 
```

不过有问题。在该代码之后，查找栏中的实际文本字段不会更新。我发现如果我切换第一响应者，那么我可以让它更新......

```
[myWindow makeFirstResponder:outlineView];
[myWindow makeFirstResponder:textView]; 
```

# maven - 用于解压缩文件夹的maven mojo？

> ID：13839266
> 
> 赞同：1
> 
> 时间：2012-12-12T11:58:11.300
> 
> 标签：maven, unzip, mojo

如何编写java程序（mojo）来解压特定位置的文件夹？如果有人帮助我非常感谢，我是 Maven 新手。

```
/**
    * The Zip archiver.
    * @parameter \
    expression="${component.org.codehaus.plexus.archiver.Archiver#zip}"
    */

    private ZipArchiver zipArchiver;

    /**
    * Directory containing the build files.
    * @parameter expression="${project.build.directory}/Test"
    */

    private File buildDirectory;

    /**
    * Base directory of the project.
    * @parameter expression="${basedir}"
    */

    private File baseDirectory; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:48:39.047

您可以像这样使用[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/examples/unpacking-artifacts.html)：

```
<project>
   [...]
   <build>
     <plugins>
       <plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-dependency-plugin</artifactId>
         <version>2.6</version>
         <executions>
           <execution>
             <id>unpack</id>
             <phase>package</phase>
             <goals>
               <goal>unpack</goal>
             </goals>
             <configuration>
               <artifactItems>
                 <artifactItem>
                   <groupId>junit</groupId>
                   <artifactId>junit</artifactId>
                   <version>3.8.1</version>
                   <type>jar</type>
                   <overWrite>false</overWrite>
                   <outputDirectory>${project.build.directory}/alternateLocation</outputDirectory>

                 </artifactItem>
               </artifactItems>
                ...
               <overWriteReleases>false</overWriteReleases>
               <overWriteSnapshots>true</overWriteSnapshots>
             </configuration>
           </execution>
         </executions>
       </plugin>
     </plugins>
   </build>
   [...]
 </project> 
```

或者您可以使用[truezip-maven-plugin](http://mojo.codehaus.org/truezip/truezip-maven-plugin/usage.html)，如下所示：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>truezip-maven-plugin</artifactId>
    <version>1.1</version>
    <executions>
      <execution>
        <id>unpack</id>
        <goals>
          <goal>cp</goal>
        </goals>
        <phase>ThePhaseYouLike</phase>
        <configuration>
          <from>${project.build.directory}/WhatEveryArchive.zip</from>
          <to>${project.build.directory}</to>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:38:50.660

我会使用带有[解压缩任务的](http://ant.apache.org/manual/Tasks/unzip.html)[maven antrun 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)。

例如，如果您希望在测试准备期间发生这种情况：

```
 <build>
    <plugins>
      <plugin>
        <artifactId>maven-antrun-plugin</artifactId>
        <version>1.7</version>
        <executions>
          <execution>
            <!-- a lifecycle phase to run the unzip-->
            <phase> process-test-resources</phase> 
            <configuration>
              <target>

                 <unzip src="${your.source.zip}" dest="${your.dest}"/>

              </target>
            </configuration>
            <goals>
              <goal>run</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T19:34:07.760

你是在正确的方式，只是反过来：

```
 /**
 * The UnZip archiver.
 * 
 * @parameter expression="${component.org.codehaus.plexus.archiver.UnArchiver#zip}"
 */

private ZipUnArchiver unzipArchiver; 
```

:)

# php - 在 php 中为此 json 创建一个数组

> ID：13839270
> 
> 赞同：1
> 
> 时间：2012-12-12T11:58:21.783
> 
> 标签：php, google-maps-api-3

我想为以下 json 代码创建一个数组。

```
{
 "homeMobileCountryCode": 310,
 "homeMobileNetworkCode": 260,
 "radioType": "gsm",
 "carrier": "T-Mobile",
 "cellTowers": [
  {
   "cellId": 39627456,
   "locationAreaCode": 40495,
   "mobileCountryCode": 310,
   "mobileNetworkCode": 260,
   "age": 0,
   "signalStrength": -95
  }
 ],
 "wifiAccessPoints": [
  {
   "macAddress": "01:23:45:67:89:AB",
   "signalStrength": 8,
   "age": 0,
   "signalToNoiseRatio": -65,
   "channel": 8
  },
  {
   "macAddress": "01:23:45:67:89:AC",
   "signalStrength": 4,
   "age": 0
  }
 ]
} 
```

我尝试了以下方法，但它在谷歌地图地理 api 中显示解析错误

```
$a = array("homeMobileCountryCode" => 310,
    "homeMobileNetworkCode" => 260,
    "radioType" => "gsm",
    "carrier" => "T-Mobile");

$jsonVal =  json_encode($a); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:02:37.387

PHP 的 json_encode 没有用双引号包裹整数，这是无效的 json。试试这个：

```
$a = array("homeMobileCountryCode" => "310",
    "homeMobileNetworkCode" => "260",
    "radioType" => "gsm",
    "carrier" => "T-Mobile");

$jsonVal =  json_encode($a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:00:10.723

从 json 到数组：

```
$array = json_decode(/* json text /*); 
```

从数组到 Json

```
$json = json_encode(/* array Object */); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:25:11.803

这里有解释，但您可以跳过以进一步清理最终代码。

```
$cellTower1 = array(  "cellId"=> "39627456",
   "locationAreaCode"=> "40495",
   "mobileCountryCode"=> "310",
   "mobileNetworkCode"=> "260",
   "age"=> "0",
   "signalStrength"=> "-95" );

$cellTower2 = array(  "cellId"=> "2222222",
   "locationAreaCode"=> "22222",
   "mobileCountryCode"=> "222",
   "mobileNetworkCode"=> "222",
   "age"=> "22",
   "signalStrength"=> "-22" ); 
```

然后合并所有手机信号塔

```
 $allCellTowers[] = $cellTower1;

  $allCellTowers[] = $cellTower2; 
//etc... or could be in a loop 
```

现在是 MAC 地址和 wifiAccessPoints。

```
 $macAddress1 = array (
   "macAddress"=> "01:23:45:67:89:AB",
   "signalStrength" => "8",
   "age" => "0",
   "signalToNoiseRatio" => "-65",
   "channel" => "8"
  );

 $macAddress2 = array (
   "macAddress" => "01:23:45:67:89:AC",
   "signalStrength" => "4",
   "age" => "0"
  );

 $macAddress3 = etc... 
```

就像`cellTower1, cellTower2`上面的 macaddresses 1 & 2 可以用循环填充一样。添加它们`wifiAccessPoints`也可以在循环中完成，但它在下面手动完成，以便您理解。

```
 $wifiAccessPoints[] = $macAddress1;

  $wifiAccessPoints[] = $macAddress2; 
```

最后，其他元素都进入结果数组进行编码

```
$myarray = array( "homeMobileCountryCode"=> "310",
                  "homeMobileNetworkCode"=> "260",
                  "radioType"=> "gsm",
                  "carrier"=> "T-Mobile",
                  "cellTowers"=>$allCellTowers, 
                  "wifiAccessPoints" => $wifiAccessPoints
            );
$json = json_encode($myarray); 
```

在干净的代码中

```
$cellTower1 = array(  "cellId"=> "39627456",
   "locationAreaCode"=> "40495",
   "mobileCountryCode"=> "310",
   "mobileNetworkCode"=> "260",
   "age"=> "0",
   "signalStrength"=> "-95" );

$allCellTowers[] = $cellTower1;

 $macAddress1 = array (
   "macAddress"=> "01:23:45:67:89:AB",
   "signalStrength" => "8",
   "age" => "0",
   "signalToNoiseRatio" => "-65",
   "channel" => "8"
  );

 $macAddress2 = array (
   "macAddress" => "01:23:45:67:89:AC",
   "signalStrength" => "4",
   "age" => "0"
  );

 $wifiAccessPoints[] = $macAddress1;

 $wifiAccessPoints[] = $macAddress2;

 $myarray = array( "homeMobileCountryCode"=> "310",
                   "homeMobileNetworkCode"=> "260",
                   "radioType"=> "gsm",
                   "carrier"=> "T-Mobile",
                   "cellTowers"=>$allCellTowers, 
                   "wifiAccessPoints" => $wifiAccessPoints
             );

 //note that you have your first key missing though in your example

 $json = json_encode($myarray); 
```

# android - 在android中视图背景中的一些随机场景中出现深灰色

> ID：13839275
> 
> 赞同：0
> 
> 时间：2012-12-12T11:58:39.183
> 
> 标签：android, colors, background, views

它发生在随机场景中，有时会发生在所有视图中，有时会发生在许多视图中。可能是由于内存或图形问题。请提供任何解决方案....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:11:50.110

我升级三星 Galaxy S3 软件后发生了这种情况。也许问题在于基本的浅色主题具有浅灰色而不是白色作为背景。

我找到的唯一解决方案是手动将白色设置为我的应用程序中所有布局容器的背景。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T07:14:34.203

我在 S3 / S3 Mini 手机上也有同样的效果，要解决这个错误，只需从活动主题中删除“android:colorBackground”。我的问题是，由于某种奇怪的原因，我将 colorBackground 和 windowBackground 一起弄湿了，S3 同时应用了这两个通道，但使用了一些 alpha 通道（我的原始颜色没有 alpha），并且当您使用 alpha 应用 2 种颜色时，颜色会成倍增加。我还做了一个测试，在 Activity 中设置颜色并提供另一种背景颜色，因此只需删除所有颜色 Fragment Root 布局 + Activity 根布局并仅设置 windowBackground 而不是 colorBackground 即可解决我的错误。

# iphone - 如何从 iPhone 相机胶卷中获取相册？

> ID：13839279
> 
> 赞同：0
> 
> 时间：2012-12-12T11:58:45.520
> 
> 标签：iphone, ios

我们可以从 iphone 相机胶卷中获取相册及其图像吗？我想在我的应用程序中显示 iphone 相机胶卷专辑名称

这可以使用 AlAssetLibrary 来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:08:36.200

要打开 iPhone 照片库，请像这样使用：

```
-(IBAction)pickphoto:(id)sender
{
    [self startMediaBrowserFromViewController: self usingDelegate: self];
}

- (BOOL) startMediaBrowserFromViewController: (UIViewController*) controller
                               usingDelegate: (id <UIImagePickerControllerDelegate,
                                               UINavigationControllerDelegate>) delegate{

    if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeSavedPhotosAlbum] == NO)
        || (delegate == nil)
        || (controller == nil))
        return NO;

    UIImagePickerController *mediaUI = [[UIImagePickerController alloc] init];
    mediaUI.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;

    mediaUI.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeMovie,kUTTypeImage, nil];
    mediaUI.allowsEditing = YES;

    mediaUI.delegate = delegate;

    [controller presentModalViewController: mediaUI animated: YES];
    return YES;

}

- (void) imagePickerController: (UIImagePickerController *) picker
 didFinishPickingMediaWithInfo: (NSDictionary *) info
{

    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];
 thumbnail = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
 [self dismissModalViewControllerAnimated:YES];
} 
```

希望它可以帮助你。

# magento - 如何从管理员添加类别和产品以及如何在网站前端显示？

> ID：13839280
> 
> 赞同：0
> 
> 时间：2012-12-12T11:58:45.567
> 
> 标签：magento, magento-1.7

我正在使用 magento 1.7 版，我创建了一些类别和产品![在此处输入图像描述](../Images/7d933595bd060fd5fc0c821da3c98f73.png)

但两者在客户端都不可见，如下图所示。

![在此处输入图像描述](../Images/1c8b72a9b32d0301432f98de1731ff6e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:22:10.760

看一看 @

[创建和分配要存储的根类别](http://www.magentocommerce.com/wiki/3_-_store_setup_and_management/catalog/creating_and_assigning_root_categories)

[Magento 添加新类别和产品 (youtube)](http://www.youtube.com/watch?v=L4VN66Bjsfs)

您还需要清除页面顶部的那些“黄色”警告并清除缓存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:53:25.673

通过管理面板清除您的 var/cache 并重新索引您的数据。

# dart - Web 服务器随文件一起发送数据

> ID：13839281
> 
> 赞同：1
> 
> 时间：2012-12-12T11:58:56.143
> 
> 标签：dart

我想为客户端提供一个 html 页面*以及*一些 json，而无需在客户端处理的往返。这可能吗？这样做的最佳方法是什么？我考虑过在标题中发送它，但它似乎被一些人不赞成。任何例子都非常感谢。伪代码：

```
main(){
  ...
  app.addRequestHandler((req) => req.path == '/user', handler);
}

void handler(req, res) {
  var file = new File(myHtmlFile);
  res.headers.set(...); //add json here?
  res.outputstream...   //or here?
  ...
  stream.pipe(res.outputStream);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:49:51.117

在您的 html 文件中，您可以在作为响应发送之前放置一个要替换的*标签。*

例如，在您的 html 文件中：

```
<!DOCTYPE html>
<html>
<head>
  <title>Test</title>
</head>
<body>
  <input type='hidden' id='datas' value="___JSON_DATAS___"/>
  ...
</body>
</html> 
```

`___JSON_DATAS___`将在您的服务器中替换为：

```
void handler(req, res) {
  var file = new File(myHtmlFile);
  readStreamAsString(file.openInputStream()).then((fileContent) {
    final content = fileContent
        .replaceAll("___JSON_DATAS___", htmlEscape(jsonAsString));
    res.outputStream.writeAsString(content);
    res.outputStream.close();
  });
}

String htmlEscape(String text) {
  return text.replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;")
      .replaceAll('"', "&quot;")
      .replaceAll("'", "&apos;");
}

Future<String> readStreamAsString(InputStream stream) {
  final completer = new Completer();
  final sb = new StringBuffer();
  final sis = new StringInputStream(stream);
  sis
    ..onData = () { sb.add(sis.read()); }
    ..onClosed = () { completer.complete(sb.toString()); }
    ..onError = (e) { completer.completeException(e); };
  return completer.future;
} 
```

然后，在客户端：

```
import 'dart:html';
import 'dart:json';

main(){
  final input = query('#datas') as InputElement;
  final datas = JSON.parse(input.value);
  //...
} 
```

# java - Proper Error Handling in java

> ID：13839285
> 
> 赞同：-1
> 
> 时间：2012-12-12T11:59:14.367
> 
> 标签：java, exception-handling

I need to know how to handle the exceptions in a situation like below. Please assist me,

```
public interface DCommand {

    public Object execute(Class_A car);
}

public class Class_B {

    public void getMessage() throws Exception {       
            throw new Exception("Test error");
    }
}

public class Class_A {

    Class_B cb = null;

    public Class_B getClass_b() {
        cb = new Class_B();
        return cb;
    }

    public Object testAction(DCommand command) {
        Object returnObject = null;
        try {
            return (Boolean) command.execute(this);
        } catch (Exception e) {
            System.out.println("ERROR IN CLASS B" + e.getLocalizedMessage());
        }

        return returnObject;
    }
}

====================== simiulating ============================

public class Test {

    public static void main(String[] args) {
        Class_A c = new Class_A();

        boolean a = (Boolean) c.testAction(new DCommand() {

            @Override
            public Object execute(Class_A car) {
                try {
                    car.getClass_b().getMessage();
                    return true;
                } catch (Exception ex) {
                    System.out.println("Error in the simulator.");
                }
                return false;
            }
        });

    }
} 
```

When I run the above code I need to catch the exception thrown by the Class_B in the Class_A where prints the "ERROR IN CLASS A".

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:05:17.773

问题是您在 B 类的 getMessage 方法中抛出了一种异常。相反，您应该通过扩展来定义自己的异常`java.lang.Exception`。

```
public class ClassBException extends Exception {
   public ClassBException(String msg) {
      super(msg);
   }
} 
```

然后像这样使用 ClassBException 在 Class B 的 getMessage 方法中抛出

```
public class Class_B {
    public void getMessage() throws ClassBException {       
            throw new Exception("Test error");
    }
} 
```

现在，您需要在调用 Class B 的 getMessage 方法的任何地方为 ClassBException 设置一个单独的 catch 块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:07:38.847

将此方法添加到 A 类：

```
public void runGetMessage()
{
   try{
     cb.getMessage();
   }catch(Exception e){
      System.out.println("Error in CLASS A.");
   }
} 
```

并将执行方法更改为：

```
public Object execute(Class_A car) {
    try {
          car.getClass_b();
          car.runGetMessage();
          return true;
    } catch (Exception ex) {
          System.out.println("Error in the simulator.");
    }
    return false;

   } 
```

# python - 高阶函数：自动生成 vs 手动定义

> ID：13839288
> 
> 赞同：3
> 
> 时间：2012-12-12T11:59:18.610
> 
> 标签：python, python-3.x, functional-programming, implicit-conversion, higher-order-functions

我正在尝试稍微延迟评估，因此我更喜欢尽可能长时间地使用函数。

我有`class Function`它定义了函数的组合和逐点算术：

```
from functools import reduce
def compose(*funcs):
    '''
    Compose a group of functions f1, f2, f3, ... into (f1(f2(f3(...))))
    '''
    result = reduce(lambda f, g: lambda *args, **kaargs: f(g(*args, **kaargs)), funcs))
    return Function(result)

class Function:
    ''' 
    >>> f = Function(lambda x : x**2)
    >>> g = Function(lambda x : x + 4)
    >>> h = f/g
    >>> h(6)
    3.6
    >>> (f + 1)(5)
    26
    >>> (2 * f)(3)
    18
    # >> means composition, but in the order opposite to the mathematical composition
    >>> (f >> g)(6) # g(f(6))
    40
    # | means apply function: x | f is the same as f(x)
    >>> 6 | f | g # g(f(6))
    40
    '''

    # implicit type conversion from a non-callable arg to a function that returns arg
    def __init__(self, arg):
        if isinstance(arg, Function):
            # would work without this special case, but I thought long chains
            # of nested functions are best avoided for performance reasons (??)
            self._func = arg._func
        elif callable(arg):
            self._func = arg
        else:
            self._func = lambda *args, **kwargs : arg

    def __call__(self, *args, **kwargs):
        return self._func(*args, **kwargs)

    def __add__(lhs, rhs):
        # implicit type conversions, to allow expressions like f + 1
        lhs = Function(lhs)
        rhs = Function(rhs)

        new_f = lambda *args, **kwargs: lhs(*args, **kwargs) + rhs(*args, **kwargs)
        return Function(new_f)

    # same for __sub__, __mul__, __truediv__, and their reflected versions
    # ...

    # function composition
    # similar to Haskell's ., but with reversed order
    def __rshift__(lhs, rhs):
        return compose(rhs, lhs)
    def __rrshift__(rhs, lhs):
        return compose(rhs, lhs)

    # function application
    # similar to Haskell's $, but with reversed order and left-associative
    def __or__(lhs, rhs):
        return rhs(lhs)
    def __ror__(rhs, lhs):
        return rhs(lhs) 
```

最初，我的所有函数都具有相同的签名：它们将 的实例作为单个参数`class Data`，并返回`float`. 也就是说，我的实现`Function`不依赖于这个签名。

然后我开始添加各种高阶函数。例如，我经常需要创建现有函数的有界版本，所以我写了一个函数`cap_if`：

```
from operator import le
def cap_if(func, rhs):
    '''
    Input arguments:
      func: function that determines if constraint is violated
      rhs: Function(rhs) is the function to use if constraint is violated
    Output:
      function that
        takes as an argument function f, and
        returns a function with the same signature as f
    >>> f = Function(lambda x : x * 2)
    >>> 5 | (f | cap_if(le, 15))
    15
    >>> 10 | (f | cap_if(le, 15))
    20
    >>> 5 | (f | cap_if(le, lambda x : x ** 2))
    25
    >>> 1.5 | (f | cap_if(le, lambda x : x ** 2))
    3.0
    '''
    def transformation(original_f):
        def transformed_f(*args, **kwargs):
            lhs_value = original_f(*args, **kwargs)
            rhs_value = rhs(*args, **kwargs) if callable(rhs) else rhs
            if func(lhs_value, rhs_value):
                return rhs_value
            else:
                return lhs_value
        return Function(transformed_f)
    return Function(transformation) 
```

这就是问题所在。我现在想介绍接受`Data`实例“向量”并返回数字“向量”的函数。乍一看，我本可以保持现有框架不变。毕竟，如果我将向量实现为 ，`numpy.array`那么向量将支持逐点算术，因此函数上的逐点算术将按预期工作，而无需对上面的代码进行任何更改。

但是上面的代码在高阶函数上中断，例如`cap_if`（它应该约束向量中的每个单独元素）。我看到三个选项：

1.  为向量上的函数创建一个新版本`cap_if`，比如说。`vector_cap_if`但是我需要为所有其他高阶函数这样做，这感觉不受欢迎。不过，这种方法的优势在于，我将来可以用函数替换这些函数的实现，例如，`numpy`获得巨大性能提升的函数。

2.  实现将函数类型从“number -> number”“提升”到“<function from Data to number> 到 <function from Data to number>”，以及从“number -> number”到“<function from数据向量到数字> 到 <从数据向量到数字的函数>"。让我们称这些函数`raise_to_data_function`和`raise_to_vector_function`. 然后我可以定义`basic_cap_if`为单个数字的函数（而不是高阶函数）；对于我需要的其他类似的辅助函数，我也这样做。然后我使用`raise_to_data_function(basic_cap_if)`代替`cap_if`和`raise_to_vector_function(basic_cap_if)`代替`cap_if_vector`。这种方法似乎更优雅，因为我只需要实现每个基本功能一次。但它失去了我上面描述的可能的性能提升，

3.  我可以遵循 2 中的方法，但在需要时根据上下文自动应用`raise_to_data_function`函数`raise_to_vector_function`。大概我可以在`__or__`方法（函数应用程序）中实现这一点：如果它检测到一个函数被传递给`simple_cap_if`，它将检查被传递函数的签名，并将适当的`raise_to`函数应用于右侧。（例如，可以通过使具有不同子类的不同签名成员的函数来公开签名`Function`；或者通过在 中指定方法`Function`）。这似乎很 hacky，因为可能会发生很多隐式类型转换；但它确实减少了代码混乱。

我是否错过了更好的方法，和/或一些支持/反对这些方法的论点？

# jquery - Jquery Ui Sortable blocks X-editable

> ID：13839293
> 
> 赞同：0
> 
> 时间：2012-12-12T11:59:40.493
> 
> 标签：jquery, jquery-ui, twitter-bootstrap, jquery-ui-sortable

我正在为我的表使用[sortable](http://api.jqueryui.com/sortable/#entry-examples)插件和[x-editable](http://vitalets.github.com/x-editable/docs.html)。我可以拖放行，并且使用 x-editable 我可以编辑单元格内容。

我的可排序电话：

```
$('.table-schichtplan tbody').sortable({
   cancel : ".table-schichtplan-section,.table-schichtplan-break,.table-schichtplan-shift",
   refreshPositions: true,
   scroll: true,
   containment: 'parent',
   placeholder: 'ui-state-highlight',
}).disableSelection();​ 
```

x-editable（根据小提琴）：

```
$('#username').editable({
   type: 'text',
   url: '/post',    
   pk: 1,    
   title: 'Enter username',
   ajaxOptions: {
       type: 'put'
   }        
}); 
```

所以我点击`#username`并出现编辑弹出窗口。但是我无法用鼠标选择文本，甚至无法用鼠标在输入字段中设置光标位置。只有当我删除它可以工作的可排序部分时。似乎可排序插件阻止了 x-editable 的某些部分。

看到这个小提琴：http: [//jsfiddle.net/xBB5x/49/](http://jsfiddle.net/xBB5x/49/)

我尝试过这样的事情：

```
$('.editable-cell').on('shown', function() {
    $('.table-schichtplan tbody').sortable('disable');
});

$('.editable-cell').on('hidden', function() {  
   $('.table-schichtplan tbody').sortable('enable');
}); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:03:21.413

这是因为您正在应用`disableSelection()`方法。

# java - 如何获取一组像素并将它们组合成一个

> ID：13839294
> 
> 赞同：0
> 
> 时间：2012-12-12T11:59:44.443
> 
> 标签：java, image-processing

我试图创建一个程序来查找彼此相似的图像，并且我找到了一个站点（[http://www.hackerfactor.com/blog/index.php?/archives/432-Looks-Like-It.html](http://www.hackerfactor.com/blog/index.php?/archives/432-Looks-Like-It.html)）给出了创建图像指纹的功能的步骤，第一步是将图像的大小减小到 8 x 8（64 像素）图像，但我不知道如何将一组像素转换为一个像素，例如

```
[(R,G,B)][(R,G,B)][(R,G,B)]
[(R,G,B)][(R,G,B)][(R,G,B)]
[(R,G,B)][(R,G,B)][(R,G,B)] 
```

取这组像素，每个像素都有不同的 R、G 和 B 值，我怎样才能把它们全部取走并将它们变成一组值，例如

```
[(R,G,B)] 
```

我想也许可以将所有 R、G 和 B 值相加，然后对它们进行平均，但这似乎很简单，有人知道该怎么做吗？我正在用java编写这个程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:28:05.597

有许多不同的[插值/重新采样技术](http://en.wikipedia.org/wiki/Image_scaling)可以进行缩小 - 您可以根据期望的结果选择一种。一个简单的，即[最近邻插值](http://en.wikipedia.org/wiki/Nearest-neighbor_interpolation)：但是由于简单，这不会导致非常详细的结果。

如果图片实际上是照片（而不是像素艺术） ，更先进的技术，即[线性插值](http://en.wikipedia.org/wiki/Linear_interpolation)、[双线性插值](http://en.wikipedia.org/wiki/Bilinear_interpolation)或[双三次插值更适合。](http://en.wikipedia.org/wiki/Bicubic_interpolation)但是链接中的缩小图像也没有留下太多细节 - 所以最近的邻居似乎已经足够了（至少开始时）。

```
public int[] resizePixels(int[] pixels,int w1,int h1,int w2,int h2) {
    int[] temp = new int[w2*h2] ;
    double x_ratio = w1/(double)w2 ;
    double y_ratio = h1/(double)h2 ;
    double px, py ; 
    for (int i=0;i<h2;i++) {
        for (int j=0;j<w2;j++) {
            px = Math.floor(j*x_ratio) ;
            py = Math.floor(i*y_ratio) ;
            temp[(i*w2)+j] = pixels[(int)((py*w1)+px)] ;
        }
    }
    return temp ;
} 
```

此 java 函数采用像素值数组（原始大小 - w1 和 h1）并返回最近邻（上/下）缩放的像素数组，尺寸为 w2 x h2。另见：[这里](http://tech-algorithm.com/articles/nearest-neighbor-image-scaling/)。

# jquery - 通过jquery验证客户端上的电话号码

> ID：13839297
> 
> 赞同：0
> 
> 时间：2012-12-12T11:59:51.347
> 
> 标签：jquery, validation, input, numeric

我想验证表单中的输入以及示例 [http://prgassist.blogspot.ru/2011/04/jquery-plugin-autonumeric.html](http://prgassist.blogspot.ru/2011/04/jquery-plugin-autonumeric.html)

我的代码

```
<input id="groupingNumber" />

$(document).ready(function(){

      $('#groupingNumber').autoNumeric({aSep:',', aNeg:'', mDec:0, mNum:10}); 

}); 
```

我的任务是 - 用户只能输入数字而不能输入字母。输入包含特殊格式的数字（例如 - 电话号码）。

但我的例子不起作用

# javascript - IOS 6 缓存除缓存清单之外的所有内容。从未从 Web 服务器请求更新的文件

> ID：13839301
> 
> 赞同：1
> 
> 时间：2012-12-12T11:59:57.063
> 
> 标签：javascript, ios, html, mobile, cache-manifest

我们的 Web 应用程序在 ios 6 应用程序模式下被如此积极地缓存，以至于每次从 Web 服务器请求的唯一文件是缓存清单。我们更改了一堆脚本和 html，但应用程序从不请求新文件。如果 Web 服务器没有任何请求，我该如何解决这个问题？有没有办法可以在缓存清单中解决这个问题？请记住，我们仅使用缓存清单来缓存图像、字体等，而不是 js 本身。任何帮助将不胜感激，我很难过！

编辑1：

缓存清单的内容已更改。我什至每次都在缓存清单中放置一个 guid，以确保它不同。我已经运行 charles 并看到该页面不断请求清单，并有 200 个响应。似乎 ios 6 本机应用程序模式包装器发生了一些非常奇怪的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:11:09.383

您可以在此网站上获得所需的所有信息：http: [//appcachefacts.info/](http://appcachefacts.info/)

如果要刷新缓存文件，则必须更改 appcache.manifest 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:21:45.550

也许这个链接[有帮助：iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results).

iOS6.0 缓存了我认为的几乎所有内容……在我们的应用程序中，是 Ajax Post 被缓存并破坏了应用程序。我希望通过在 Ajax 请求上设置 cache:false 来解决这个问题，但我不太确定。否则，我将向所有 AJAX 请求添加一个随机字符串。

据说，post-chaching 已在 iOS6.1 beta 中得到修复，希望也适用于 web-app 模式。

# c# - 513 错误代码（退出代码）FxCop 使用 C#

> ID：13839303
> 
> 赞同：0
> 
> 时间：2012-12-12T12:00:07.563
> 
> 标签：c#, fxcop, exit-code, error-code, fxcopcmd

我有 VS2010、Windows 7 位、FxCop 10.0

我使用 Process.Start 执行 Fxcopcmd.exe，得到 513 **“exitcode”**（错误代码）值。

以下参考资料中的托德·金说：

> 在这种情况下，退出代码 513 意味着 FxCop 有一个分析错误 (0x01) 和一个程序集引用错误 (0x200)

[http://social.msdn.microsoft.com/Forums/en-US/vstscode/thread/1191af28-d262-4e4f-95d9-73b682c2044c/](http://social.msdn.microsoft.com/Forums/en-US/vstscode/thread/1191af28-d262-4e4f-95d9-73b682c2044c/)

我想如果它像

```
 [Flags]
    public enum FxCopErrorCodes
    {
        NoErrors = 0x0,
        AnalysisError = 0x1,  // -fatalerror
        RuleExceptions = 0x2,
        ProjectLoadError = 0x4,
        AssemblyLoadError = 0x8,
        RuleLibraryLoadError = 0x10,
        ImportReportLoadError = 0x20,
        OutputError = 0x40,
        CommandlineSwitchError = 0x80,
        InitializationError = 0x100,
        AssemblyReferencesError = 0x200,
        BuildBreakingMessage = 0x400,
        UnknownError = 0x1000000,
    } 
```

513 整数值为 0x201（查看[int 为十六进制字符串](https://stackoverflow.com/questions/4690480/int-to-hex-string)，并且[Enum.Parse 无法转换字符串](https://stackoverflow.com/questions/8242875/enum-parse-fails-to-cast-string)）

如何仅使用 exitcode (513 , 0x201) 值以编程方式知道错误（分析错误（0x01）和程序集引用错误（0x200））？

有关 FxCopCmd 和代码分析的错误代码的更多信息：

*   [http://msdn2.microsoft.com/en-us/library/bb164705(VS.80).aspx](http://msdn2.microsoft.com/en-us/library/bb164705(VS.80).aspx)
*   [http://msdn2.microsoft.com/en-us/library/ms245349(VS.80).aspx](http://msdn2.microsoft.com/en-us/library/ms245349(VS.80).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:51:56.160

您可以使用 AND 位运算来测试枚举的特定值：

```
FxCopErrorCodes code = (FxCopErrorCodes)0x201;
if ((code & FxCopErrorCodes.InitializationError) == FxCopErrorCodes.InitializationError)
{
    Console.WriteLine("InitializationError");
} 
```

您可以使用以下内容获取整个值列表：

```
private static IEnumerable<FxCopErrorCodes> GetMatchingValues(FxCopErrorCodes enumValue)
{
    // Special case for 0, as it always match using the bitwise AND operation
    if (enumValue == 0)
    {
        yield return FxCopErrorCodes.NoErrors;
    }

    // Gets list of possible values for the enum
    var values = Enum.GetValues(typeof(FxCopErrorCodes)).Cast<FxCopErrorCodes>();

    // Iterates over values and return those that match
    foreach (var value in values)
    {
        if (value > 0 && (enumValue & value) == value)
        {
            yield return value;
        }
    }
} 
```

# image - 钛 - 图像的裁剪部分

> ID：13839307
> 
> 赞同：0
> 
> 时间：2012-12-12T12:00:26.637
> 
> 标签：image, titanium, titanium-mobile, crop

您将如何在 iOS 和 android 的 appcelerator Titan 中裁剪大图像的一小部分（例如，透明框架中可见的图像视图区域）？imageAs* ***函数将不起作用，因为它们在 android 3.0 以下不受支持。这是我的代码：

```
var win=Ti.UI.createWindow({backgroundColor: 'white'})

var ImageView = Titanium.UI.createImageView({
                     width:200, height:200,
                });
var cropView = Titanium.UI.createView({
                     width: 150,
                     height: 150,
                     borderColor: 'red',
                     borderWidth: 1,
                     zIndex: 1,
               });
var button= Ti.UI.createButton({
                     bottom: 30,
                     width: 60,
                     title: 'OK',
                     zIndex: 1,
                })

win.add(cropView)

Ti.Media.openPhotoGallery({
       PhotoGalleryOptionsType : Ti.Media.MEDIA_TYPE_PHOTO,
       success: function(e){
                ImageView.image=e.media;
                win.add(ImageView)
       }, });
button.addEventListener('click',function(e)
{
     // crop the visible area
}) 
```

我正在使用 iOS 5 和 android 2.2。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:44:55.850

添加`ImageView`到`cropView`（而不是到`win`）、位置和大小`imageView`，以便显示您想要显示的部分（使用负值`left`和`top`），然后调用`cropView.toImage()`. 您可以在新的图像视图中使用生成的 blob，将其保存到文件中，将其作为附件通过电子邮件发送，无论您想要什么。

图像的任何超出其父边界的部分都将被裁剪，只留下您指定的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T06:56:18.860

我做了一些小的改动，现在它都可以正常工作了。干杯！！:)

```
var win = Ti.UI.createWindow({
backgroundColor : 'white'
})
var orignal = Titanium.UI.createImageView({
width : Ti.UI.SIZE,
height : Ti.UI.SIZE,
left:5
});

var ImageView = Titanium.UI.createImageView({
width : 200,
height : 200

});
var cropView = Titanium.UI.createView({
top : 10,
width : 150,
height : 150,
borderColor : 'lime',
borderWidth : 1,
zIndex : 1,
left:150
});

var button = Ti.UI.createButton({
bottom : 30,
width : 60,
title : 'CROP',
zIndex : 1,
});

win.add(button);
Ti.Media.openPhotoGallery({
PhotoGalleryOptionsType : Ti.Media.MEDIA_TYPE_PHOTO,
success : function(e) {
    ImageView.image = e.media;
    orignal.image=e.media;
    cropView.add(ImageView);
    win.add(cropView);
    win.add(orignal);
},
 });

var CropedImageView = Titanium.UI.createImageView({
top : 200,
width : cropView.width,
height : cropView.height,
left:150
});

button.addEventListener('click', function(e) {
cropView.borderColor='transparent';
CropedImageView.image = cropView.toImage();
win.add(CropedImageView);
});

win.open(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-10T12:46:12.467

我在 Oodles Technologies 期间学到了一些。这是我的贡献：

在此示例中，您将看到如何在 iOS Titanium 中裁剪图像。

要裁剪图像首先创建滚动视图，定义它的*maxZoomScale、minZoomScale。*

**maxZoomScale:-** 可滚动区域及其内容的最大缩放因子。

**minZoomScale:-** 可滚动区域及其内容的最小缩放因子

maxZoomSale 和 minZoomScale 我们可以根据需要进行调整。

然后我们必须在滚动视图中添加图像视图，然后我们可以放大和缩小图像，裁剪图像只需点击裁剪按钮。

```
var window = Ti.UI.createWindow({
    backgroundColor : 'white'
});

var scrollView = Ti.UI.createScrollView({
    height : 260,
    width : Ti.UI.FILL,
    maxZoomScale : 4.0,
    minZoomScale : 1.0,
    zoomScale : 1.0,
});

window.add(scrollView);

var imageView = Ti.UI.createImageView({
    height : scrollView.height,
    width : scrollView.width,
    backgroundColor : "transparent",
    anchorPoint : {
        x : 0.5,
        y : 0.5
    },
    image : 'Default-568h@2x.png',
});

scrollView.add(imageView);

var button = Ti.UI.createButton({
    top : 20,
    title : 'Crop Button'
});
window.add(button);

button.addEventListener('click', function(e) {
    button.hide();
    var cropimage = scrollView.toImage();

    var cropImageView = Ti.UI.createImageView({
        top : 20,
        height : 120,
        width : 120,
        image : cropimage
    });

    window.add(cropImageView);
});
window.open(); 
```

# database - 节点：不关闭redis客户端

> ID：13839309
> 
> 赞同：0
> 
> 时间：2012-12-12T12:00:39.273
> 
> 标签：database, node.js, redis, production-environment

我想问这个问题，因为我们的应用程序非常接近**生产阶段**，我们不想弄乱任何数据。

我使用**Redis作为****Node**和**DB**之间的数据层，并且我正在执行涉及向不同表插入多个数据的操作。一个例子;

```
redisClientForStudent.select(1);
redisClientForTeacher.select(2)

redisClientForStudent.get('1', function(err, studentResult) {
  if(err) {
    //ERROR
  }
  else if(studentResult != null) {
    redisClientForTeacher.set('2', '{name:Jane}', function(err) {
      //SOME LOGIC
    });
  }
  else {
    //DATA NOT FOUND
  }
}); 
```

我想指出，上面的代码**不是实际的代码**。我要使用多个客户端的原因是因为当我尝试将多个数据插入多个表时，它会混淆。我将尝试这种方法，但我担心的是如果出现错误，我是否必须关闭每个 redis 客户端？另一个问题是，如果使用多个客户端并不能防止数据混合，那么可以应用哪些额外的预防措施？

# osgi - 将外部 jar 文件添加到 OSGI

> ID：13839315
> 
> 赞同：0
> 
> 时间：2012-12-12T12:00:51.070
> 
> 标签：osgi, knopflerfish

我已经创建了一个 OSGi 包，我想向它添加两个外部 jar 文件`mediasenseplatform.jar`，`tinyos.jar`因此我将这一行添加到我的清单文件中：

```
Bundle-ClassPAth:.,mediasenseplatform.jar,tinyos.jar 
```

但它不起作用，我在我的包 jar 文件中看不到这些文件。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:11:27.957

OSGi 不制作 jar 文件，它是一个用于部署和运行它们的平台。如果您想将这些罐子包含在您的 bunde 中（这只是另一个罐子），那么您必须自己将它们放入其中。

有像 maven 这样的构建工具可以为你做到这一点。

您可能还想看看这个[相关的问题](https://stackoverflow.com/questions/3013583/what-is-the-standard-way-to-bundle-osgi-dependent-libraries/3015072#3015072)。

# javascript - JavaScript：覆盖 Date.prototype.constructor

> ID：13839318
> 
> 赞同：11
> 
> 时间：2012-12-12T12:00:52.863
> 
> 标签：javascript, date, constructor, prototype

我想改变标准 Date 对象的行为。传递给构造函数的年份`0..99`应解释为`fullYear`（不添加`1900`）。但是我的以下功能不起作用

```
var oDateConst = Date.prototype.constructor; // save old contructor

Date.prototype.constructor = function () {
    var d = oDateConst.apply(oDateConst, arguments); // create object with it
    if ( ((arguments.length == 3) || (arguments.length == 6))
        && ((arguments[0] < 100) && (arguments[0] >= 0))) {
        d.setFullYear(arguments[0]);
    }
    return d;
} 
```

为什么它永远不会被调用？你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-12T12:34:55.053

它永远不会被调用的原因是因为您正在更改`constructor`. `Date.prototype`但是，您可能仍在使用代码创建日期`new Date()`。所以它从不使用你的构造函数。你真正想做的是创建你自己的 Date 构造函数：

```
function MyDate() {
    var d = Date.apply(Date, arguments);
    if ((arguments.length == 3 || arguments.length == 6)
        && (arguments[0] < 100 && arguments[0] >= 0)) {
        d.setFullYear(arguments[0]);
    return d;
} 
```

然后您可以像这样创建新日期：

```
var d = MyDate(); 
```

**编辑：**而不是使用`Date.apply`我宁愿使用以下`instantiate`函数，它允许您[将参数应用于构造函数](https://stackoverflow.com/q/1606797/783743)：

```
var bind = Function.bind;
var unbind = bind.bind(bind);

function instantiate(constructor, args) {
    return new (unbind(constructor, null).apply(null, args));
} 
```

这就是我将如何实现新的日期构造函数：

```
function myDate() {
    var date = instantiate(Date, arguments);
    var args = arguments.length;
    var arg = arguments[0];

    if ((args === 3 || args == 6) && arg < 100 && arg >= 0)
        date.setFullYear(arg);
    return date;
} 
```

**编辑：**如果要覆盖本机 Date 构造函数，则必须执行以下操作：

```
Date = function (Date) {
    MyDate.prototype = Date.prototype;

    return MyDate;

    function MyDate() {
        var date = instantiate(Date, arguments);
        var args = arguments.length;
        var arg = arguments[0];

        if ((args === 3 || args == 6) && arg < 100 && arg >= 0)
            date.setFullYear(arg);
        return date;
    }
}(Date); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-15T14:59:13.427

捎带 Aadit M Shah 的本机日期构造函数覆盖 - 这应该是一个回复，但我没有足够的 SO 代表 - 正如@sakthi 提到的那样，这样做你会失去你的本机 Date 方法。这有点糟糕，因为 Date 方法是不可枚举的，所以你必须实现一些 hack 来克隆它们。

首先，除非您必须这样做，否则我建议*不要这样做。*就我而言，我在一个应用程序中使用一堆遗留代码，这些代码使用“md-yyyy”格式构建日期，该格式适用于 chrome 但不适用于 safari。我不能只在应用程序中进行查找/替换，因为有很多实例是从服务层或数据库中提取日期字符串。因此，我决定在“md-yyyy”格式的日期字符串参数存在的情况下覆盖 Date 构造函数。我希望它尽可能微创，否则它可以作为正常的 Date 运行。

这是我的更改 - 它应该允许您通过对构造函数的一些更改来覆盖日期，但其他一切都相同。您需要在调用 instantiate 之前更改 MyDate 构造函数以执行您希望构造函数处理的任何事情。这将在应用系统 Date 构造函数之前发生。

```
var bind = Function.bind;
var unbind = bind.bind(bind);

function instantiate(constructor, args) {
    return new (unbind(constructor, null).apply(null, args));
}

Date = function (Date) {

    // copy date methods - this is a pain in the butt because they're mostly nonenumerable
    // Get all own props, even nonenumerable ones
    var names = Object.getOwnPropertyNames(Date);
    // Loop through them
    for (var i = 0; i < names.length; i++) {
        // Skip props already in the MyDate object
        if (names[i] in MyDate) continue;
        // Get property description from o
        var desc = Object.getOwnPropertyDescriptor(Date, names[i]);
        // Use it to create property on MyDate
        Object.defineProperty(MyDate, names[i], desc);
    }

    return MyDate;

    function MyDate() {
        // we only care about modifying the constructor if a datestring is passed in
        if (arguments.length === 1 && typeof (arguments[0]) === 'string') {
            // if you're adding other date transformations, add them here

            // match dates of format m-d-yyyy and convert them to cross-browser-friendly m/d/yyyy
            var mdyyyyDashRegex = /(\d{1,2})-(\d{1,2})-(\d{4})/g;
            arguments[0] = arguments[0].replace(mdyyyyDashRegex, function (match, p1, p2, p3) {
                return p1 + "/" + p2 + "/" + p3;
            });
        }

        // call the original Date constructor with whatever arguments are passed in here
        var date = instantiate(Date, arguments);

        return date;
    }
}(Date); 
```

参考：

*   （这个帖子）
*   [http://gpf-js.blogspot.com/2016/02/date-override.html](http://gpf-js.blogspot.com/2016/02/date-override.html)
*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties)
*   [在 Javascript 中复制属性](https://stackoverflow.com/questions/7033811/copying-attributes-in-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-17T23:21:58.933

参考 Matthew Albert 的帖子中提到的技术，除了 Dan Hlavenka 发布的那一点之外，还有一个测试场景失败了。请参阅以下代码：

```
typeof Date() == typeof new Date()     //Should be false, but it returns true 
```

在遗留项目中，上述场景可能会破坏少数场景。除了上述内容和 Dan Hlavenka 指出的内容外，我同意这是迄今为止最完整的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-18T04:54:44.580

这是一个非常灵活的解决方案。它处理（我相信）所有不同的情况。

DateStub - 允许存根 Date 函数。
如果你有'新日期（...）。...' 洒在你的代码中，你想测试它，这是给你的。它也适用于“时刻”。

```
/**
 * DateStub - Allows for stubbing out the Date function.  If you have
 *      'new Date(...)....' sprinkled throughout your code,
 *      and you want to test it, this is for you.
 *
 * @param {string} arguments Provide 0 to any number of dates in string format.
 *
 * @return a date object corresponding to the arguments passed in.
 *      If you pass only one date in, this will be used by all 'new Date()' calls.
 *      This also provides support for 'Date.UTC()', 'Date.now()', 'Date.parse()'.
 *      Also, this works with the moments library.
 *
 * Examples:
    {   // Test with 1 argument
        Date = DateStub('1/2/2033');        // Override 'Date'

        expect(new Date().toString())
            .toEqual('Sun Jan 02 2033 00:00:00 GMT-0500 (EST)');
        expect(new Date().toString())
            .toEqual('Sun Jan 02 2033 00:00:00 GMT-0500 (EST)');

        Date = DateStub.JavaScriptDate;     // Reset 'Date'
    }
    {   // Call subsequent arguments, each time 'new Date()' is called
        Date = DateStub('1/2/1111', '1/2/1222'
                        , '1/2/3333', '1/2/4444');  // Override 'Date'

        expect(new Date().toString())
            .toEqual('Mon Jan 02 1111 00:00:00 GMT-0500 (EST)');
        expect(new Date().toString())
            .toEqual('Sun Jan 02 1222 00:00:00 GMT-0500 (EST)');
        expect(new Date().toString())
            .toEqual('Fri Jan 02 3333 00:00:00 GMT-0500 (EST)');
        expect(new Date().toString())
            .toEqual('Sat Jan 02 4444 00:00:00 GMT-0500 (EST)');

        Date = DateStub.JavaScriptDate;     // Reset 'Date'
    }
    {   // Test 'Date.now()'.  You can also use: 'Date.UTC()', 'Date.parse()'
        Date = DateStub('1/2/2033');

        expect(new Date(Date.now()).toString())
                .toEqual('Sun Jan 02 2033 00:00:00 GMT-0500 (EST)');

        Date = DateStub.JavaScriptDate;     // Reset 'Date'
    }
 *
 * For more info:  AAkcasu@gmail.com
 */

const DateStub =
    function () {
        function CustomDate(date) {
            if (!!date) { return new DateStub.JavaScriptDate(date); }
            return getNextDate();
        };
        function getNextDate() {
            return dates[index >= length ? index - 1 : index++];
        };

        if (Date.name === 'Date') {
            DateStub.prototype = Date.prototype;
            DateStub.JavaScriptDate = Date;

            // Add Date.* methods.
            CustomDate.UTC = Date.UTC;
            CustomDate.parse = Date.parse;
            CustomDate.now = getNextDate;
        }

        var dateArguments = (arguments.length === 0)
            ? [(new DateStub.JavaScriptDate()).toString()] : arguments
            , length = dateArguments.length
            , index = 0
            , dates = [];
        for (var i = 0; i < length; i++) {
            dates.push(new DateStub.JavaScriptDate(dateArguments[i]));
        }

        return CustomDate;
    };

module.exports = DateStub;

// If you have a test file, and are using node:
// Add this to the top:  const DateStub = require('./DateStub'); 
```

# hadoop - Need help to start task tracker in Hadoop-1.0.4 having IO Exception.

> ID：13839320
> 
> 赞同：0
> 
> 时间：2012-12-12T12:01:01.173
> 
> 标签：hadoop

```
ERROR org.apache.hadoop.mapred.TaskTracker: Can not start task tracker because java.io.IOException: Failed to set permissions of path: \tmp\hadoop-SYSTEM\mapred\local\taskTracker to 0755
    at org.apache.hadoop.fs.FileUtil.checkReturnValue(FileUtil.java:689)
    at org.apache.hadoop.fs.FileUtil.setPermission(FileUtil.java:670)
    at org.apache.hadoop.fs.RawLocalFileSystem.setPermission(RawLocalFileSystem.java:509)
    at org.apache.hadoop.fs.RawLocalFileSystem.mkdirs(RawLocalFileSystem.java:344)
    at org.apache.hadoop.fs.FilterFileSystem.mkdirs(FilterFileSystem.java:189)
    at org.apache.hadoop.mapred.TaskTracker.initialize(TaskTracker.java:723)
    at org.apache.hadoop.mapred.TaskTracker.<init>(TaskTracker.java:1459)
    at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:3742)
INFO org.apache.hadoop.mapred.TaskTracker: SHUTDOWN_MSG 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:35:23.123

将已用作配置文件中的值的目录的权限更改为 755

# jaxb - integrating Swagger with JAX-RS and JAXB help needed

> ID：13839321
> 
> 赞同：4
> 
> 时间：2012-12-12T12:01:03.170
> 
> 标签：jaxb, jersey, jax-rs, swagger

I'm working on REST Api using JAX-RS and JAXB. I also would like to use Swagger to generate docs for the api. I followed the example here [https://github.com/wordnik/swagger-core/wiki/java-jax-rs](https://github.com/wordnik/swagger-core/wiki/java-jax-rs) . So I have added com.wordnik.swagger.jaxrs.listing to init parameters in web.xml as below:

```
<init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.api.resources;com.api;com.wordnik.swagger.jaxrs.listing;</param-value>
</init-param> 
```

When I tray to access the localhost:9090/rapi/api-docs.json url I get the following error:

```
SEVERE: Mapped exception to response: 500 (Internal Server Error)
javax.ws.rs.WebApplicationException: javax.xml.bind.JAXBException: class com.wordnik.swagger.core.Documentation nor any of its super class is known to this context.
at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:159)
at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1451)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:726)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:206)
at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:324)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:829)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:514)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: javax.xml.bind.JAXBException: class com.wordnik.swagger.core.Documentation nor any of its super class is known to this context.
at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:611)
at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:486)
at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:320)
at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:177)
at com.sun.jersey.json.impl.BaseJSONMarshaller.marshallToJSON(BaseJSONMarshaller.java:103)
at com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider.writeTo(JSONRootElementProvider.java:143)
at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:157) 
```

I fixed it by adding com.wordnik.swagger.core to my custom JAXBContextProvider as below:

```
public JAXBContextProvider() throws JAXBException {
    this.context = new JSONJAXBContext(JSONConfiguration.natural().build(),
            "com.api.model.impl.v1:com.api.resource.framework:com.wordnik.swagger.core");
    } 
```

This caused another error:

```
SEVERE: The provider class, class comapi.JAXBContextProvider, could not be instantiated. Processing will continue but the class will not be utilized
javax.xml.bind.JAXBException: "com.wordnik.swagger.core.Documentation" doesnt contain ObjectFactory.class or jaxb.index 
```

I have been using jaxb.index files to keep the context aware of the classes with JAXB annotations, however there is no jaxb.index file in swagger package which inludes the Documentation class. Has anyone come across similar issue when integrating Swagger with JAXB and JAX-RS?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:35:04.793

原来，除了已经创建的 JSONJAXBContext 之外，我还需要创建 JAXBContext。

我添加了

```
this.swaggerJAXBcontext = JAXBContext.newInstance(com.wordnik.swagger.core.Documentation.class); 
```

构造函数和 getContext(Class type) 方法：

```
if (type.equals(com.wordnik.swagger.core.Documentation.class)){
        return swaggerJAXBcontext;
    } 
```

# c# - 构造函数重载和类参数

> ID：13839327
> 
> 赞同：3
> 
> 时间：2012-12-12T12:01:27.267
> 
> 标签：c#, oop, constructor

有没有更好的方法来做我正在做的事情：

```
class Sample {

int SampleValueX, SampleValueY;
string SampleFacing;    

public Sample(int samplevaluex, string samplefacing)
{
    SampleValueX = startpositionx;
    SampleValueY = 0;
    SampleFacing = samplefacing;
}

public Sample(int samplevaluey, string samplefacing)
{
    SampleValueX = 0;
    SampleValueY = startpositionx;
    SampleFacing = samplefacing;
}
} 
```

这甚至被称为构造函数重载吗？如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T12:04:53.713

您可以使用可选参数

```
class Sample {

  int SampleValueX, SampleValueY;
  string SampleFacing;    

  public Sample(string samplefacing, int samplevaluex = 0, int samplevaluey = 0)
  {
    SampleValueX = samplevaluex;
    SampleValueY = samplevaluey;
    SampleFacing = samplefacing;
  }

} 
```

注意可选参数必须出现在强制参数之后

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T12:03:46.723

这是行不通的，因为您有两个具有相同参数的构造函数，并且在构造函数内部您无法区分一种形式和另一种形式。

使用 Visual Studio 2008 和后续版本，您可以使用[对象初始化器语法初始化对象](http://msdn.microsoft.com/en-us/library/vstudio/bb397680.aspx)

```
 Sample sampleInstance = new Sample
    {
        SampleValueX = 0,
        SampleValueY = 10,
        SampleFacing = "MySample"
    }; 
```

这将消除初始化内部成员的需要。
当然，这要求您的内部属性公开，但情况并非总是如此。

```
class Sample
{
    public int SampleValueX {get;set;};
    public int SampleValueY {get;set;};
    public string SampleFacing {get; set;};

    ...... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T12:06:43.263

在我看来，这种逻辑不会为班级增加价值。如果该类有 3 个参数并且您想从构造函数中设置它们，我将添加一个带有 3 个参数的构造函数，并将构造函数调用所需的参数设置为 0。

对于类用户来说，这种方式会更清楚类参数值是什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T12:07:37.863

我同意可选参数可能是您想要的。一种替代方法可能是：

```
class Sample
{
    int SampleValueX,  SampleValueY;
    string SampleFacing;

    public Sample(XSetting xSetting)
    {
        SampleValueX = xSetting.X;
        SampleValueY = 0;
        SampleFacing = xSetting.SampleFacing;
    }

    public Sample(YSetting ySetting)
    {
        SampleValueX = 0;
        SampleValueY = ySetting.Y;
        SampleFacing = ySetting.SampleFacing;
    }
}

public class XSetting
{
    public int X { get; set; }
    public string SampleFacing { get; set; }
}

public class YSetting
{
    public int Y { get; set; }
    public string SampleFacing { get; set; }
} 
```

正如您的代码示例看起来这可能是矫枉过正。

顺便说一句，您的代码示例不会编译。

# python-2.7 - 如何在 python 端将这八个字节转换为数字（无符号长）？

> ID：13839328
> 
> 赞同：1
> 
> 时间：2012-12-12T12:01:28.693
> 
> 标签：python-2.7

我将 unsigned long 从 c++ 转换为 8 个字节并通过网络发送（0 位置是最不重要的）。如何在 python 端将这八个字节转换为数字（无符号长）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:03:30.910

使用[`struct`模块](http://docs.python.org/2/library/struct.html)：

```
import struct

struct.unpack('Q', data) 
```

仔细研究模块文档；格式`'Q'`表示“unsigned long long”，其标准大小为 8 个字节。您可以添加一个标志来指示字节顺序和对齐行为。假设没有标志本机字节顺序，例如使用`<`或`>`表示小端或大端字节顺序。

# html - footer at bottom width

> ID：13839331
> 
> 赞同：0
> 
> 时间：2012-12-12T12:01:38.913
> 
> 标签：html, css

I have this CSS for placing footer at the bottom

```
footer 
{
    position: fixed;
    bottom: 0;
} 
```

but then the footer is not in full width so I have to add `width: 100%;` to be

```
footer 
{
    position: fixed;
    bottom: 0;
    width: 100%;
} 
```

Why do I have to add width, but when the footer is on normal position it has full width (when I do nothing with CSS)? Why browser is doing that?

EDIT: putting only `display: block;` doesn't fix, `<footer>` is by default block element. Saying that's the default behavior of footer tag doesn't explain why it has full width when you do nothing with css.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:17:56.567

因为那是浏览器的默认行为。

[http://www.w3.org/TR/CSS2/visuren.html#choose-position](http://www.w3.org/TR/CSS2/visuren.html#choose-position)

[http://css-tricks.com/snippets/css/fixed-footer/](http://css-tricks.com/snippets/css/fixed-footer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:15:17.353

浏览器这样做是因为这是**页脚**标签的默认行为。这就是为什么他们声明页脚元素以及新的 HTML5 元素

```
display:block 
```

看到这个 normalize.css [https://github.com/necolas/normalize.css/blob/master/normalize.css](https://github.com/necolas/normalize.css/blob/master/normalize.css)

您必须将元素声明为**display:block**，这样您就不必指定它的宽度。

检查这个.. [http://dabblet.com/gist/4267350](http://dabblet.com/gist/4267350)。您可能会注意到页脚元素已经拉伸到全宽，因为它已经在他们的 CSS中被称为**display:block 。**

# android - 单击EditText时如何打开数字键盘？

> ID：13839333
> 
> 赞同：8
> 
> 时间：2012-12-12T12:01:43.337
> 
> 标签：android, android-ui, android-keypad

我阅读了其他几篇文章并使用 input.setInputType(TYPE_NUMBER_FLAG_DECIMAL); 确实打开了键盘，但不是数字键盘

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T12:05:08.193

将**android:inputType="number"**添加到 xml 中的 edittext 中，当您在 edittext 中单击时，它将自动打开数字键盘。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-16T07:31:29.820

Add `android:inputType="number"`in xml 会在点击 EditText 时自动打开数字键盘，但这将允许您只输入字符数字，如果您想输入其他字符，您可以试试这个：

```
android:inputType="number"
android:digits="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:53:49.890

在你的edittext xml中添加这一行，清理构建并运行它。它应该有效。

```
android:inputType="number" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-16T18:48:03.393

您可以将以下内容添加到 XML 文件中的 EditText 块中：

```
 android:inputType="phone"
        android:digits="1234567890" 
```

**或者**

```
 android:inputType="number" 
```

# f# - 在 f# 中将内容添加到列表中

> ID：13839336
> 
> 赞同：20
> 
> 时间：2012-12-12T12:01:51.530
> 
> 标签：f#

我正在 f# 中做一个名为“2D 形状编辑器”的项目。我之前在 c# 中做过这个项目，所以我已经掌握了如何连接两个形状的所有逻辑。所以我知道我需要一个列表来保存我将添加的所有这些形状。但我根本无法让我的 addToList 方法工作。

我的形状列表：

```
let mutable ShapeList:List<RectangleZ> =  [RectangleZ(100,100)] 
```

我的添加方法：

```
let addToList (listan:List<RectangleZ>) (element:RectangleZ) = let ShapeList =     ShapeList@[element] in ShapeList
//Method to add into the ShapeList

let addToList (listan:List<RectangleZ>) (element:RectangleZ) = element::ShapeList
//Other try on adding into shapeList 
```

应该将矩形添加到 ShapeList 的按钮：

```
btn.Click.Add(fun _ -> new RectangleZ(500, 100) |> addToList ShapeList |>ignore |> saver)
//Button click method that should be adding the RectangleZ(500, 100) to my ShapeList 
```

当然还有我的矩形：

```
type RectangleZ(x:int, y:int)= 
  let mutable thisx = x
  let mutable thisy = y
  let mutable thiswidth = 50
  let mutable thisheight = 20
  let brush = new SolidBrush(Color.Black)
  member obj.x with get () = thisx and set x = thisx <- x
  member obj.y with get () = thisy and set y = thisy <- y
  member obj.width with get () = thiswidth and set width = thiswidth <- width
  member obj.height with get () = thisheight and set height = thisheight <- height
  member obj.thisColor = Color.FromArgb(167, 198, 253)
  member obj.draw(paper:Graphics) = paper.FillRectangle(brush, thisx, thisy, 50, 20)
  member obj.ShapeType = "Rectangle" 
```

由于某种原因，在我的两个 addToList 函数中，该元素都没有被添加到列表中。我的问题是为什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-12T12:19:11.693

F# 中的列表是不可变的。这意味着当您像这样将项目添加到列表时：

```
let newlist = elem :: tail;; 
```

旧列表（尾部）不会更改，而不是创建的新列表。因此，您需要从`addToList`函数中返回新列表，而不是更新可变变量：

```
let addToList (listan:List<RectangleZ>) (element:RectangleZ) = element::listan
ShapeList <- addToList ShapeList newElement 
```

在您的代码`let ShapeList`中是本地的，不会影响全局 ShapeList 变量。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-08-03T04:50:27.763

```
let newList = oldList @ [newElement] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-12T18:28:00.400

您可以`List.append`与`mutable`列表一起使用，下面的示例对我来说效果很好：

```
let mutable season_averages = []
for i in 0 .. n_seasons do
     season_averages  <- [i] |> List.append season_averages
printfn "Seasons Average: %A" season_averages 
```

# python-2.7 - Scrapy cannot handle bad headers properly [ScrapyHTTPPageGetter,client] Unhandled Error

> ID：13839338
> 
> 赞同：2
> 
> 时间：2012-12-12T12:01:53.390
> 
> 标签：python-2.7, screen-scraping, web-scraping, web-crawler, scrapy

Environment:

Scrapy 0.16.2 Twisted-12.2.0 python 2.7 macosx-10.6

Okey here is my problem:

I try to run

```
scrapy shell http://aaa.17domn.com/bt9/file.php/MERH77V.html 
```

Error:

```
[ScrapyHTTPPageGetter,client] Unhandled Error
    Traceback (most recent call last):
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-macosx-10.6-intel.egg/twisted/internet/selectreactor.py", line 150, in _doReadOrWrite
        why = getattr(selectable, method)()

      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-macosx-10.6-intel.egg/twisted/internet/tcp.py", line 202, in doRead
        return self._dataReceived(data)

      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-macosx-10.6-intel.egg/twisted/internet/tcp.py", line 208, in _dataReceived
        rval = self.protocol.dataReceived(data)

      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-macosx-10.6-intel.egg/twisted/protocols/basic.py", line 564, in dataReceived
        why = self.lineReceived(line)

      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Scrapy-0.16.2-py2.7.egg/scrapy/core/downloader/webclient.py", line 50, in lineReceived
        return HTTPClient.lineReceived(self, line.rstrip())

      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-macosx-10.6-intel.egg/twisted/web/http.py", line 450, in lineReceived
        self.extractHeader(self._header)

      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-macosx-10.6-intel.egg/twisted/web/http.py", line 406, in extractHeader
        key, val = header.split(':',1)
    exceptions.ValueError: need more than 1 value to unpack 
```

I found the solution from [https://groups.google.com/forum/#!msg/scrapy-users/xFKo8ggzPxs/VXDl3CZ4V4cJ](https://groups.google.com/forum/#!msg/scrapy-users/xFKo8ggzPxs/VXDl3CZ4V4cJ) They describe this is caused by twisted. Then I patched function extractHeader in /twisted/web/http.py from [http://twistedmatrix.com/trac/ticket/2842](http://twistedmatrix.com/trac/ticket/2842). Its WORKS

**BUT BUT, Hold on NOt yet!!!**

I run another web

```
scrapy shell http://www1.wkdown.info/fs3/file.php/M994ATR.html 
```

Error:

```
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-macosx-10.6-intel.egg/twisted/internet/defer.py", line 551, in _runCallbacks
    current.result = callback(current.result, *args, **kw)

  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Scrapy-0.16.2-py2.7.egg/scrapy/core/downloader/webclient.py", line 122, in _build_response
    status = int(self.status)

ValueError: invalid literal for int() with base 10: 'html' 
```

I think something happen on response headers. Scrapy cannot handle it well. Any idea? Thank you!

# jquery - 使用 jQuery 提交表单时在 Fancybox 中显示确认对话框

> ID：13839351
> 
> 赞同：-1
> 
> 时间：2012-12-12T12:02:42.160
> 
> 标签：jquery, html, fancybox

我正在尝试使用 Fancybox 确认消息控制表单提交确认。

如何使用 jQuery fancybox 向表单提交添加事件？

我的表格来源如下：

```
<form name="oactivite" action="url" method="POST" onsubmit="return confirmTask(' do you confirm task : '+document.forms['oactivite'].elements['task_id'].options[this.document.forms['oactivite'].elements['task_id'].selectedIndex].text+'?');">
    <select name="task_id" id="task_id">
        <option value="1">Pause</option>
        <option value="2">Digit</option>
        <option value="3">editing</option>
    </select>
    <div name="emp_id" value="20" style="display:none" />
    <input type="submit" value="validate task"/>
  </form> 
```

当我调用confirmTask 时如何显示fancybox 确认消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:10:04.147

您应该向我们展示您的一些代码，但希望这会有所帮助。Fancy box 有一个打开灯箱的方法，你可以在表单提交时调用它，如下所示：

```
$('#myform').submit(function() {
    $("#myfancybox").trigger('click');
    return false; // prevents form from submitting
}); 
```

然后，您可以放置​​另一个元素（例如，您的确认按钮），然后调用表单提交：

```
$('#confirmbutton').click(function() {
    $('#myform').submit();
}); 
```

请参阅[花式盒子上的提示和技巧部分以](http://fancybox.net/blog)供参考

# sql - 如何在 TSQL Where 语句中比较两个表中的值？

> ID：13839354
> 
> 赞同：1
> 
> 时间：2012-12-12T12:02:49.600
> 
> 标签：sql, tsql, stored-procedures

我有一个存储过程，它接受以逗号分隔的 ID 字符串作为参数

我有一个名为 Split 的 UDF，然后将其拆分并作为表返回

在我的查询中，我从另一个以逗号分隔的 ID 字符串的视图返回一个值

在我的 Where 语句中，我基本上想说

```
WHERE dbo.Split(@inputstring) IN dbo.Split(view.ViewString) 
```

并且只返回我的输入字符串中的值存在于我的视图字符串中的行

我怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:07:00.717

`@inputstring`如果列表中至少有一个 ID，我想您需要选择一行`view.ViewString`？如果是这样，那么：

```
WHERE EXISTS (select ID 
                 from dbo.Split(@inputstring) t1 
                      inner join dbo.Split(view.ViewString) t2 on (t1.id=t2.id)) 
```

# python - 使用并行 C 程序扩展 Python（在 OMP 下）

> ID：13839358
> 
> 赞同：4
> 
> 时间：2012-12-12T12:02:57.037
> 
> 标签：python, c, parallel-processing, openmp

所以，我正在考虑对我拥有的 python 组件进行 C 扩展。然后，我想使用 OMP 来尽可能多地利用机器，这些机器最终将运行 Python+C 的组合解决方案。

有没有人尝试过类似的东西？是否有任何特殊的、不利的细节会使这样的解决方案失败？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:37:16.703

我已经成功地完成了射电天文学中的大型数据挖掘任务。有关示例，请参见[https://github.com/ewanbarr/sigpyproc.git 。](https://github.com/ewanbarr/sigpyproc.git)

需要注意的是，我在这些情况下构建的 C 库是通过 ctypes 访问的，而不是作为原生 Python 扩展。

因此，例如：

Python：测试.py

```
import ctypes as C
import numpy as np
from numpy.ctypeslib import as_ctypes
lib = C.CDLL("libmytest.so")

def set_N_threads(nthreads):
    self.lib.omp_set_num_threads(nthreads)

def do_some_task(input_array):
    input_array = input_array.astype("float32")
    output_array = np.empty_like(input_array)
    lib.do_some_omp_task(as_ctypes(input_array),
                         as_ctypes(output_array),
                         C.c_size_t(input_array.size))
    return output_array 
```

C：测试.c

```
#include <omp.h>

void do_some_omp_task(float* input_array,
                      float* output_array,
                      size_t size)
{
   int ii;
#pragma omp parallel for default(shared) private(ii)
   for (ii=0;ii<size;ii++)
       do something using ii and the arrays
} 
```

编译：

```
gcc -O3 -lm -fopenmp -fPIC -c test.c -o test.o
gcc -shared -lgomp -o libmytest.so test.o 
```

要回答您的问题，我对这种设置没有任何问题，并且可实现的速度改进令人印象深刻（尽管上面的示例不会真正受益于 OMP）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T14:34:02.023

[Cython](http://cython.org)有`parallel.prange()`，[例如](https://gist.github.com/3733763#file-b2a_bin-pyx)。

要手动执行此操作，请调用`PyEval_InitThreads`您的扩展模块初始化。在派生非 python 线程时释放 GIL，例如，通过将 OMP 并行部分包装在`Py_BEGIN_ALLOW_THREADS/Py_END_ALLOW_THREADS`. 如果您需要使用`state = PyGILState_Ensure()/PyGILState_Release(state)`. [这是一个示例](https://gist.github.com/3471699#file-c_extension_module-c)（复杂以在关闭时触发线程模块中的错误）。为避免任何问题，`threading`请在模块初始化时导入。

# c# - 在 asp.net 条形图的条形图上显示值

> ID：13839359
> 
> 赞同：5
> 
> 时间：2012-12-12T12:02:58.783
> 
> 标签：c#, asp.net, c#-4.0, asp.net-charts

我想在 asp.net 图表的条形顶部显示值。我还想在显示 x 轴时隐藏它。对于模型，请参见下图。谢谢。

![带有值的条形图在 asp.net 中的 Bar 上](../Images/89478e38aeb5f2e2b095834450e5e6ae.png)

我尝试了以下但不起作用。

```
var c = HorizontalChart;
        //c.ChartAreas.Add(new ChartArea("HChartArea"));
        //c.ChartAreas[0].BackHatchStyle = ChartHatchStyle.None;
        c.ChartAreas[0].AxisX.MajorGrid.Enabled = false;
        c.ChartAreas[0].AxisY.MajorGrid.Enabled = false;
        c.ChartAreas[0].AxisY.CustomLabels="Code here for Lable values" <-------------
        c.Width = 300;
        c.Height = 300;
        Series myHorizontalSeries = new Series();
        myHorizontalSeries.Color = System.Drawing.Color.Blue;
        myHorizontalSeries.ChartType = SeriesChartType.Bar;
        myHorizontalSeries.Points.DataBindXY(new string[] { "one", "two", "three" }, new int[] { 1, 2, 3 });
        c.Series.Add(myHorizontalSeries); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T12:23:12.273

您可以尝试：

我想在 asp.net 图表的条形顶部显示值。

```
myHorizontalSeries.IsValueShownAsLabel = true; 
```

我还想在显示 x 轴时隐藏它。

```
c.ChartAreas[0].AxisX.Enabled = AxisEnabled.False; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T12:23:40.163

您应该尝试将 Axis Enabled 属性设置为 false

```
c.ChartAreas[0].AxisX.Enabled = AxisEnabled.False; 
```

要显示您将`IsValueShownAsLabel`系列的属性设置为的值`true`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-20T09:06:19.563

另一个示例，您可以显示标签等值

```
c.Series[myHorizontalSeries].Label = "#VALY"; 
```

希望我有所帮助。

# c++ - c ++打破排序算法对象的循环依赖

> ID：13839361
> 
> 赞同：-1
> 
> 时间：2012-12-12T12:03:00.010
> 
> 标签：c++, g++, circular-dependency

我有两个班级 A 和 B

A.hpp

```
#include <vector>
#include <algorithm>
#include "B.hpp"

class A {
public:
  void sortTrans() { std::sort(trans_.begin(), trans_.end(), sortStruct); }
  unsigned int name() { return name_; }
private:
  std::vector<B*> trans_;
  unsigned int name_;
}; 
```

B.hpp：

```
class A;

class B {
  A& source_;
  A& dest_;
  unsigned int choice_;
}; 
```

现在我想按选择和名称的值对 trans_ 进行排序，因此我写了

```
struct sort {
  bool operator()(B* t1, B* t2) {
    if (t1->choice < t2->choice)
        return true;
    if (t1->dest_.name() < t2->dest_.name())
        return true;
    return false;
  }
} sortStruct; 
```

但现在我面临着打破循环依赖的问题。A的定义在A.hpp中，B的定义在B.hpp中。在 B.hpp 中，我使用 A 的前向减速，A 包括 B.hpp。但是我必须在哪里（或如何）放置 sortStruct，因为它使用 A 和 B 的定义。而且我总是得到错误

```
Wrong usage of forward declaration A 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:45:41.857

两个标头都可以使用前向贬值，因为两者都没有真正（需要）依赖于另一个。

A.hpp

```
#ifndef A_HPP
#define A_HPP
#include <vector>

class B;

class A {
public:
  void sortTrans();
  unsigned name();
private:
  std::vector<B*> trans_;
  unsigned int attr1_;
  unsigned int attr2_;
};
#endif 
```

B.hpp

```
#ifndef B_HPP
#define B_HPP_
class A;

class B {
  A& source_;
  A& dest_;
  unsigned choice_;
};
#endif 
```

A.cpp

```
#include "A.hpp"
#include "B.hpp"
#include <algorithm>

// I can't really define this with your B as given ...
struct SortB {
    bool operator()(B *x, B *y) {
        if (x->choice_ < y->choice_)
            return true;
        if (x->dest_.name() < y->dest_.name())
            return true;
        return false;
    }
 };

void A::sortTrans()
{
    std::sort(trans_.begin(), trans_.end(), SortB());
} 
```

请注意，我还没有展示如何访问 B::choice_ 和 B::dest_，因为这是一个设计决策，我没有足够的信息来做出正确的猜测。

您可以将它们公开（在这种情况下`B`基本上是一个结构），将访问器成员添加到`B`，或`SortB`在 B.hpp 中作为朋友前向声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:40:00.890

您可以将声明放在`operator()`和`B.hpp`实现中 - `B.cpp`（像往常一样）

```
// B.hpp
class A;

class B {
  A& source_;
  A& dest_;
};

SortB {
  bool operator()(B* a, B* b); // can be implemented in B.cpp
}; 
```

没有什么`SortB`需要知道的`class A`：

```
// B.cpp
bool SortB::operator()(B* t1, B* t2) {
    if (t1->attr1() < t2->attr1())
        return true;
    if (t1->attr2() < t2->attr2())
        return true;
    return false;
} 
```

代码`A.hpp`不需要改动太多：

```
// A.hpp
#include "B.hpp"

class A {
public:
  void sortTrans() { std::sort(trans_.begin(), trans_.end(), SortB()); }
private:
  std::vector<B*> trans_;
  unsigned int attr1_;
  unsigned int attr2_;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:40:50.163

如果一个类有引用成员，则需要提供构造函数/复制构造函数。你提供给B了吗

还注意到`t1->attr2()`<`t2->attr2()`不正确。它应该是`t1->attr1_`和`t2->attr2_`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T19:03:34.073

您的排序功能可能不是您想要的。它可能应该是这样的

```
if (b1->choice < b2->choice)
    return true;
if (b1->choice == b2->choice && b1->name < b2->name)
    return true;
return false; 
```

If you don't have a == operator for choice you have to use the < operator reversed and negated to accomplish the same functionality

# android - 如何模拟 Nexus 4？

> ID：13839363
> 
> 赞同：4
> 
> 时间：2012-12-12T12:03:03.150
> 
> 标签：android, avd, emulation

是否可以创建一个 AVD 来模拟 Nexus 4？

我正在使用 Eclipse，我很确定我已经更新了所有的 SDK 工具等，以及 4.2 SDK/系统映像等。

但是，当我打开 AVD 管理器添加新的 AVD 时，似乎不再能够输入自定义分辨率/密度等。有一个包含多个设备的下拉列表，但没有 Nexus 4，也没有带有分辨率为 768x1200。

我只是错过了一些明显的东西吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T12:27:58.953

将您的 ADT 更新到版本 21 之后。

**`Add Custom`在旧版本中，如果您想要自定义设备配置（如果您想要 Nexus 4），则每次必须设置屏幕。**

在 ADT21 版本中，您可以通过

> **打开`AVD Manager`，你可以定义你的自定义屏幕`"Device Definition"`**

**替代方案（更简单的方法）**

> 在最新版本中，您不需要根据上述建议设置自定义设备配置，因为它提供了更简单的方法。您>只需使用您的设备配置制作模拟器，然后您将在`Graphical Layout`XML 中看到带有模拟器名称的那些配置

就像在使用名称为“Nexus7_Android_4.2”的Android 4.2创建我的Nexus7模拟器模拟器之后，我将自动在xml的图形布局中获得此设备配置。

下面是它的屏幕截图。

![在此处输入图像描述](../Images/b97d1e5e83c13f9e3be2d0ac367cfeab.png)

希望它会帮助你。

# objective-c - 为什么我的位于单例中的 NSMutableArray 返回（null）？

> ID：13839364
> 
> 赞同：0
> 
> 时间：2012-12-12T12:03:07.130
> 
> 标签：objective-c, null, nsmutablearray, singleton, nsnumber

我在 Objective-C 的 Xcode 4.5.1 中工作。我正在进行听力测试，并希望将每个问题的相关数据存储在一个数组中。我做了一个单例 MyManager。我用它来存储数据。

它适用于简单的 int/float 值等，但我一直在尝试使用 NSMutableArray。我是 Objective-C 的新手，所以我假设/希望我犯了一些明显的错误。

所以，我想用浮点值填充 mySNRArray。我开始明白我不能简单地添加浮点数，因为它只会接收对象。因此，我使用 NSNumber。

问题：当我尝试读取我应该添加到 NSMutableArray 的数据时，我得到 (null)。

我现在将提供相关代码：

我的经理.h

```
@interface MyManager : NSObject
{

NSMutableArray *mySNRArray;

}

@property (readwrite) NSMutableArray *mySNRArray;

+ (id)sharedManager;

@end 
```

我的经理.m

```
@implementation MyManager

@synthesize mySNRArray;

+ (id)sharedManager
{
static MyManager *sharedMyManager = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^
    {

            sharedMyManager = [[self alloc] init];

    });

return sharedMyManager;
}

- (id)init
{
if (self = [super init])
{

    NSMutableArray *mySNRArray = [[NSMutableArray alloc]init];

}

return self;
}

@end 
```

测试视图控制器.m

```
//First, I try to add a value to mySNRArray.

MyManager *Manager = [MyManager sharedManager];

NSNumber *tempStorage1 = [[NSNumber alloc] initWithFloat:mySNR];

[Manager.mySNRArray insertObject:tempStorage1 atIndex:questionNumber];

//The NSLog below is showing the correct value.

NSLog(@"%@ : mySNR", tempStorage1);

...

for (n = 0; n < questionNumber; n++)
{

//Second, I try to acces the values I supposedly added to mySNRArray. 

MyManager *Manager = [MyManager sharedManager];

//This NSLog below is showing (null).

NSLog(@"Value at %i in SNRArray = %@", n, [Manager.mySNRArray objectAtIndex:n]);

}

... 
```

我希望有人能解释我的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:07:34.147

改变

```
NSMutableArray *mySNRArray = [[NSMutableArray alloc]init]; 
```

到

```
self->_mySNRArray = [[NSMutableArray alloc]init]; 
```

在您的 init 方法中，您正在创建一个本地可变数组，但没有将其分配给您的属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:14:43.333

不要创建新对象，而是使用您创建的 ivar ..在`init`方法中。

```
_mySNRArray = [[NSMutableArray alloc]init]; 
```

即使你可以从你的 .h 中省略这些

```
{

NSMutableArray *mySNRArray;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T13:29:59.840

```
+ (id)sharedManager 
```

返回一个值

```
static MyManager* sharedManager 
```

把界面改成

```
+ (MyManager*)sharedManager 
```

编译器会准确地告诉你你犯了什么错误。

# optimization - Cuda 探查器显示奇怪的差距？

> ID：13839367
> 
> 赞同：4
> 
> 时间：2012-12-12T12:03:26.453
> 
> 标签：optimization, cuda, profiling, nvvp

在开始优化之前，我试图弄清楚配置文件结果的含义。我对 CUDA 和一般分析非常陌生，我对结果感到困惑。

具体来说，我想知道在看似未被占用的计算块中发生了什么。当我从上到下查看 CPU 和 GPU 时，在大部分代码中似乎没有发生任何事情。这些看起来像没有任何内容的列，也没有`Thread1`任何内容`GeForce`。这是正常的吗？这里发生了什么事？

运行是在多核机器上使用 nvprof 在无负载的情况下完成的。`-arch=sm_20 -m32 -g -G`GPU 代码是为 CUDA 5编译的。

![在此处输入图像描述](../Images/7debe2ac135076daf44e6555dd9392eb.png) [大图](http://imageshack.us/photo/my-images/23/screenshot121212055101.png/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T05:24:57.747

这里的错误是在调试模式下分析代码（`-G`编译器标志：“为设备代码生成调试信息”）。程序的行为发生了深刻的变化，这不应该用于分析和优化代码。

另一件事：很难找到有关**nvcc调试模式的完整文档。****nvcc**可能会将寄存器/共享内存转储到全局内存中，以便于主机访问和调试，这反过来可能会隐藏共享内存中的竞争条件等问题（参见此处的讨论：[https](https://stackoverflow.com/a/10726970/1043187) ://stackoverflow.com/a/10726970/1043187 ）。因此，诸如此类的程序也`cuda-memcheck --tool racecheck`应该在发布模式下使用。

# delphi - 用于 FoxPro 的 c++ dll

> ID：13839369
> 
> 赞同：0
> 
> 时间：2012-12-12T12:03:30.507
> 
> 标签：delphi, visual-c++, delphi-2007, visual-foxpro

我有用 FoxPro 编译的程序，它调用 d1.dll 函数。d1.dll 是使用 Delphi 2007 开发的。我需要开发 d1.dll，它将使用 c++ 替换现有的。经过几次测试后，FoxPro 应用程序在随机位置崩溃，并出现如下随机消息：

> 致命错误：异常代码=C0000005 @ 2012.12.12 11:33。错误日志文件：C:\Program Files\Common Files\Microsoft Shared\VFP\vfp9rerr.log

或者

> 没有足够的内存执行 some_function

我已经从 c++ dll 中删除了所有代码，只留下了一些原始 dll 通常返回的测试值。但这无济于事。声明和变量使用可能有问题。

我按照 Fox Pro 主程序中声明 d1.dll 函数的方式构建了 Fox Pro 小测试程序。不幸的是它没有崩溃。我从 IDE 运行它，而我的程序从可执行文件运行，但我认为这不是原因。可能有一些关于变量使用的问题。

可能有什么问题？

Delphi 和 C++ 中的函数声明：

C++

> extern "C" int _stdcall f1(unsigned char *aError)
> 
> extern "C" int_stdcall f2(char *txt,unsigned char *aError)
> 
> extern "C" int _stdcall f3(unsigned char *aError, char *aAnswer)
> 
> extern "C" int _stdcall f4(unsigned char *aError)
> 
> extern "C" int _stdcall f5(char* 描述符, char x, double pr, char *aError, double qtity, char* kd, char* pd) extern "C" int _stdcall f6(char *acomment_string, unsigned char* aError)
> 
> extern "C" int _stdcall f7(unsigned chartender_number, double amount, unsigned char *aError)
> 
> extern "C" int _stdcall f8(unsigned char *aError)

德尔福 2007

> 函数 f1(var aError: byte):bool; 标准调用；函数 f2(txt: pchar; var aError: byte):bool; 标准调用；
> 
> 函数 f3(var aError: byte; adata: pchar):bool; 标准调用；
> 
> 函数 f4(var aError: byte):bool; 标准调用；
> 
> 函数 f5（描述符：pchar；x：字节；pr：double；var aError：字节；数量：double；kd：pchar；pd：pchar）：bool；标准调用；
> 
> 函数 f6(non_fiscal_string: pchar; var aError: byte):bool; 标准调用；
> 
> 函数 f7(tender_number:byte; 数量:double; var aError: byte):bool; 标准调用；
> 
> 函数 f8 (var aError: byte):bool; 标准调用；

FoxPro 测试程序

FoxPro FoxPro

> 在 c:\d1.dll 字符串中声明整数 f1 错误
> 
> 在 c:\d1.dll string txt,string err 中声明整数 f2
> 
> 在 c:\d1.dll 中声明整数 f3 字符串错误，字符串 rec_nr
> 
> 在 c:\d1.dll 字符串中声明整数 f4 错误
> 
> 在 c:\d1.dll 中声明整数 f5 字符串描述，整数 x，双 pr ，字符串 err，双倍数量，字符串 kd，字符串 pd
> 
> 在 c:\d1.dll 中声明整数 f6 字符串 non_fiscal_string,string err
> 
> 在 c:\d1.dll 中声明整数 f7 整数投标，双倍金额，字符串错误
> 
> 在 c:\d1.dll 字符串中声明整数 f8 错误
> 
> 长度=2048
> 
> aCardinal=4
> 
> ff_log=空格（aLength）
> 
> rec_nr=空间（红衣主教）
> 
> 财政记录=空间（红衣主教）
> 
> serial_nr = 空间（aLength）
> 
> 状态字节=空间（红衣主教）
> 
> 描述=“描述”
> 
> x =1 pr = 123 t=0 t= f2(descr,@kl)
> 
> t= f1(@kl)
> 
> ```
>  Thisform.text1.Value=ff_log 
> ```
> 
> t= f2(descr,@kl)
> 
> t= f4(@kl)
> 
> ```
>  t=f3(@kl,@ff_log)
> 
>   t=GetStatus(@kl,rec_nr,fiscal_rec_nr,serial_nr,status_bytes) 
> ```
> 
> t= f5(descr,x,pr,@kl, 1, "","")
> 
> t= f2(descr,@kl)
> 
> t= f2(descr,@kl)
> 
> t=f6(descr,@kl)
> 
> t=f8(@kl)
> 
> t=f7(1,100,@kl)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:45:01.183

1) 编辑问题 - 使用您的 delphi 版本添加标签。这不仅是礼貌的，而且在这里可能很重要。

2）您在 FoxPro 代码中看到“字符串”引用 - 这可能意味着您`char*`听到的是 C 字符串（又名 ASCIIZ 字符串，又名以零结尾的字符串）

他们需要一种特殊的待遇。尝试将它们传递为 PAnsiChar - 比如 -`function f1(const aError: PAnsiChar):bool; stdcall;`

阅读有关 Delphi PChar 类型的帮助 - 但始终`PAnsiChar`在固定的 DLL API 中使用：PChar 在不同的 Delphi 版本中不明确 - 映射到 PAnsiChar 或 PWideChar

3) 返回正确的数据类型。不是布尔值。

在 c:\d1.dll 中声明**整数 f2** string txt, string err
extern "C" **int** _stdcall **f2** (char *txt,unsigned char *aError)
function **f2** (const txt, aError: PAnsiChar): **integer** ; 标准调用；

# delphi - 如何从 TComObjectFactory.CreateComObject(const Controller: IUnknown) 返回错误：TComObject

> ID：13839372
> 
> 赞同：3
> 
> 时间：2012-12-12T12:03:34.827
> 
> 标签：delphi, com

我有一个自定义 COM 服务器实现。服务器使用 TComObjectFactory 创建用于客户端连接的 COM 对象。

我是这样写的：

```
function TPsOPCProviderClientFactory.CreateComObject(const Controller:
    IUnknown): TComObject;
begin
  FStartupCompleteEvent.WaitFor(INFINITE);
  if Provider.State = OPC_STATUS_SUSPENDED then // Server already shutdown
    raise EAbort.Create('Server shut down.');
  Result := inherited CreateComObject(Controller);
  (Result as TPsOPCProviderClient).Provider := Provider;
end; 
```

FStartupCompleteEvent 用于确保应用程序在第一个连接通过之前准备就绪，Provider.State 用于在服务器将要关闭时禁用客户端连接。

现在看来，这不是取消对象创建的正确方法：如果引发异常，它将在屏幕上弹出一个带有“DAX 错误”的消息对话框，并且客户端可能会崩溃。

使对象创建失败的正确方法是什么 - 还是必须始终成功？

该代码用于一个组件框架，该框架可用于自 Delphi 5 以来的所有 Delphi/C++Builder 版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T12:40:26.947

你不应该让任何异常从你的[`DllGetClassObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680760%28v=vs.85%29.aspx)COM 入口点逃逸。相反，您应该捕获此异常并返回适当的`HResult`值（可能`E_UNEXPECTED`）。

它可能看起来类似于：

```
function DllGetClassObject(const CLSID, IID: TGUID; var Obj): HResult;
begin
  try
    Result := ComServ.DllGetClassObject(CLSID, IID, Obj);
  except
    Pointer(Obj) := nil;
    Result := E_UNEXPECTED;
  end;
end; 
```

编辑：或者，修改您的`CreateComObject`方法以返回 nil 而不是引发异常会更简单。在这种情况下，默认`DllGetClassObject`实现`ComServ`将返回`CLASS_E_CLASSNOTAVAILABLE`。

# send - 使用 libnet 在 C 中创建 arp 数据包

> ID：13839373
> 
> 赞同：1
> 
> 时间：2012-12-12T12:03:38.737
> 
> 标签：send, packet, arp, libnet

我想知道创建框架后如何发送框架。

我有下一个：

int arp_send(libnet_t *l, int op, u_char *sha, in_addr_t spa, u_char *tha, in_addr_t tpa) {
libnet_ptag_t t;

```
if (sha == NULL &&
    (sha = (u_char *)libnet_get_hwaddr(l)) == NULL) {
    return (-1);
}
if (spa == 0) {
    if ((spa = libnet_get_ipaddr4(l)) == -1)
        return (-1);        
}
if (tha == NULL)
    tha = (u_char *)"\xff\xff\xff\xff\xff\xff";

libnet_clear_packet(l);

/*
 *  Build the packet, remmebering that order IS important.  We must
 *  build the packet from lowest protocol type on up as it would
 *  appear on the wire.  So for our ARP packet:
 *
 *  -------------------------------------------
 *  |  Ethernet   |           ARP             |
 *  -------------------------------------------
 *         ^                     ^
 *         |------------------   |
 *  libnet_build_ethernet()--|   |
 *                               |
 *  libnet_build_arp()-----------|
 */

t = libnet_build_arp(
        ARPHRD_ETHER,                           /* hardware addr */
        ETHERTYPE_IP,                           /* protocol addr */
        6,                                      /* hardware addr size */
        4,                                      /* protocol addr size */
        op,                                     /* operation type */
        sha,                                    /* sender hardware addr */
        (u_int8_t *)&spa,                       /* sender protocol addr */
        tha,                                    /* target hardware addr */
        (u_int8_t *)&tpa,                       /* target protocol addr */
        NULL,                                   /* payload */
        0,                                      /* payload size */
        l,                                      /* libnet context */
        0);                                     /* libnet id */

if (t == -1)
{
    fprintf(stderr, "Can't build ARP header: %s\n", libnet_geterror(l));
    return -1;
}

t = libnet_autobuild_ethernet(
        tha,                                    /* ethernet destination */
        ETHERTYPE_ARP,                          /* protocol type */
        l);                                     /* libnet handle */

if (t == -1)
{
    fprintf(stderr, "Can't build ethernet header: %s\n",
            libnet_geterror(l));
    return -1;
}    
return libnet_write(l); 
```

}

我在网上找到了该代码，它从无到有创建了一个 arp 数据包。除了返回之外，我确实了解所有内容，因为我没有找到“发送”命令。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T13:31:24.013

libnet_write() 就是这样做的。

```
Writes a prebuilt packet to the network. The function assumes that l was
previously initialized (via a call to libnet_init()) and that a
previously constructed packet has been built inside this context (via one or
more calls to the libnet_build* family of functions) and is ready to go.
Depending on how libnet was initialized, the function will write the packet
to the wire either via the raw or link layer interface. The function will
also bump up the internal libnet stat counters which are retrievable via
libnet_stats().
  @param l pointer to a libnet context
  @return the number of bytes written, -1 on error 
```

根据 libnet/libnet-functions.h 中的评论

# c - 结构偏移宏

> ID：13839381
> 
> 赞同：-1
> 
> 时间：2012-12-12T12:04:11.673
> 
> 标签：c, pointers, struct, offset

> **可能重复：**
> [为什么这个 C 代码有效？](https://stackoverflow.com/questions/713963/why-does-this-c-code-work)

我确实看到定义了一个宏来计算结构偏移量，如下所示

`#define offsetof(st, m) ((size_t)(&((st *)0)->m))`

但我不明白这个定义是如何工作的。看起来结构的成员是通过`NULL`指针访问的。谁能详细说明这个表达式是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:08:50.720

此表达式在编译时进行了优化，从而在您的程序中产生了一个编译时偏移值。

编译器看到一个常量指针（0），从它看到一个常量偏移量，然后应用[常量折叠](http://en.wikipedia.org/wiki/Constant_folding)，产生地址`0 + offset`（==偏移量），这就是我们需要的。

有趣的是，这是否可以在没有任何优化的情况下工作，或者总是进行一些基本的常量折叠。

PS 更准确地说，这种优化被称为`Scalar Replacement of Aggregates`，正如下面雷某所指出的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:12:22.503

1) 首先创建一个指向“st”类型结构的空指针：(st *)0

2）接下来取这个结构的成员：->m

3) 接下来获取成员的地址：&(...)

4) 最后将成员的地址转换为 size-t 类型：(size_t)(...)

工作发生在第 3 步，因为指针为空（即地址 == 0），然后成员的地址仅包含结构内的成员位置。

# asp.net-mvc - 使用httpclient的异步方法有什么好处吗

> ID：13839383
> 
> 赞同：1
> 
> 时间：2012-12-12T12:04:13.473
> 
> 标签：asp.net-mvc, asynchronous, asp.net-mvc-4

我正在开发一个 MVC 4 应用程序。我有一个控制器，我使用`HttpClient`该类调用一些 REST 服务。控制器是普通控制器，动作没有用`async`关键字描述。在这种情况下，我使用类`PostAsync`方法有什么好处吗？`HttpClient`这不是火灾和忘记呼叫，我需要从服务返回的结果。ASP.NET 线程无论如何都会被阻塞，直到它得到结果，所以有优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:07:08.667

在这种情况下你没有任何优势。您必须始终保持异步或始终同步。

我能想到的唯一一个例外是，当您有一个从几十个异步并发请求开始的单一同步 MVC 操作时。在这种情况下，你烧一个线程来协调几十个其他线程。那是可以接受的。

旁注：异步不适用于大多数服务器应用程序，但在您的情况下，您似乎可以从全异步风格的解决方案中受益，因为您正在发出可能长时间运行的 HTTP 请求。因此，对于这一特定的 MVC 操作，您可能会切换到全异步。

# android - 发布 Apk 时是否需要在该应用的应用产品中发布？

> ID：13839388
> 
> 赞同：1
> 
> 时间：2012-12-12T12:04:30.490
> 
> 标签：android, in-app-purchase

我在我的应用程序中使用应用程序产品..但我不知道是否需要在我的应用程序的应用程序产品中发布已在 Google Play 中发布的产品..请帮助我..提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:23:14.050

您必须在 Google Play 上发布您通过应用购买销售的产品。您可以在此处找到更多详细信息：[https ://developer.android.com/google/play/billing/billing_admin.html#billing-list-setup](https://developer.android.com/google/play/billing/billing_admin.html#billing-list-setup)

# java - 扩展java语法的简单方法

> ID：13839389
> 
> 赞同：1
> 
> 时间：2012-12-12T12:04:31.087
> 
> 标签：java, preprocessor

我想对 java 语法进行一些更改。**例如**，我想使用运算符“+”来添加向量。所以我想要这段代码：

```
public class Vector2 {
    public float x, y;
    public Vector2(float x, float y) {this.x = x;this.y = y;}
    public String toString() {...}

    public static Vector2 operator+(Vector2 a, Vector2 b) {
        return new Vector2(a.x + b.x, a.y + b.y);
    }

    public static void main(String[] args) {
        Vector2 a = new Vector2(3, 6);
        Vector2 b = new Vector2(2, 8);
        System.out.println(a + b);
    }
} 
```

将被翻译成这个标准的java代码：

```
public class Vector2 {
    public float x, y;
    public Vector2(float x, float y) {this.x = x;this.y = y;}
    public String toString() {...}

    public static Vector2 operator_plus(Vector2 a, Vector2 b) {
        return new Vector2(a.x + b.x, a.y + b.y);
    }

    public static void main(String[] args) {
        Vector2 a = new Vector2(3, 6);
        Vector2 b = new Vector2(2, 8);
        System.out.println(Vector2.operator_plus(a, b));
    }
} 
```

是否有一些好的和安全的方法可以像编写自己的编译器一样更容易地扩展 java 语法？

（我的意思不仅是运算符重载，而且本质上是扩展 java 语法的好方法。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T12:06:54.047

由于 Java 不支持运算符重载，因此如果您真的想要该语法，则需要更改语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T12:18:21.670

您可以查看[Project Lombok](http://projectlombok.org/)的源代码以获得灵感。他们做了一些非常酷的转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:34:40.627

这实际上取决于您想要执行的扩展类型。如果您想要功能语言的典型扩展，您可以使用结合了 OOP 和功能范式的[scala 。](http://www.infoq.com/news/2008/01/why-scala)也许您的扩展可以结合[AspectJ](http://www.eclipse.org/aspectj/doc/next/adk15notebook/ataspectj.html)和注释来解决。在最后一个资源中，您可以使用预编译器，但如果您认为您的扩展与 Java 的目的无关，您可以考虑使用最适合您当前需求的另一种语言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T12:37:39.883

我建议这样：

1.  编写自己的或获得一个预处理器，这将使简单
2.  替换创建一个脚本，该脚本将调用预处理器来创建临时文件
3.  使用 java 编译器构建这些临时文件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T12:17:34.583

你在谈论预处理器。快速答案是否定的——java 没有扩展语言的可能性。但我建议您查看[MPS](http://www.jetbrains.com/mps/) - 这是用于创建翻译器和 DSL 的工具。但它包含一些扩展 java 语言的示例（[视频](http://www.jetbrains.com/mps/demos/new_statement/index.html)）。MPS 的主要优点之一是它具有 IntelliJ IDEA 插件 - 因此您可以轻松地将创建的扩展附加到此 IDE 并将它们用作语法糖。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-17T22:47:48.060

如果您可以保持在 java 语法范围内，则可以创建**注释处理器**（javac 插件）来做您想做的事。注释处理器基本上是在编译时运行的 java 代码。（注意注解处理器不需要*与*注解有任何关系）

在注释处理器的代码中使用一些技巧（基本上是强制转换），您可以访问 javac 的内部 AST - 这包括在编译期间重写 AST！

一个很好的介绍：[Javac 黑客指南](http://scg.unibe.ch/archive/projects/Erni08b.pdf)

用户使用您的插件所要做的就是在使用 javac 编译时将您的 .jar 包含在类路径中，因此它非常易于使用。（你可能也想做 IDE 插件）

这就是“ [Java-OO](https://amelentev.github.io/java-oo/) ”javac-plugin 为 Java 添加运算符重载所做的工作（运算符重载不需要任何语法更改，因此它适用于注释处理器）。这也是流行的[Project Lombok](https://projectlombok.org/)所做的。

* * *

然而，访问 javac 内部所需的黑客是“未记录/不受支持的”，因此它们总是存在停止处理 javac 新版本的危险。

# joomla - mod-pagespeed 和树形菜单行为

> ID：13839392
> 
> 赞同：0
> 
> 时间：2012-12-12T12:04:35.737
> 
> 标签：joomla, mod-pagespeed

我们在使用 mod-pagespeed 的网站上遇到了一个非常特殊的问题。这是有问题的链接 - [http://www.microsemi.com/applications/](http://www.microsemi.com/applications/)

如果您尝试通过单击“+”号来展开其中一个部分，则需要单击两次才能打开。

但是，如果您使用[http://www.microsemi.com/applications/?ModPagespeed=off](http://www.microsemi.com/applications/?ModPagespeed=off)禁用 pagespeed 链接可以正常工作。

调试这个的最佳方法是什么？是否可以选择性地禁用 mod-pagespeed 处理 javascripts？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:27:41.200

我首先要查看 chrome 控制台中页面上抛出的错误：

```
Uncaught ReferenceError: Tips is not defined www.microsemi.com:43
Failed to load resource http://www.microsemi.com/media/system/js/mootools-more.js.pagespeed.ce.BqakF5Rbjl.js 
```

这些可能是相关的，因为错误在没有页面速度的第二个链接上消失了。我假设第二个必须是需要两次单击的原因 - 由于某种原因，使用 mod_pagespeed 缺少一个 javascript 文件 - 也可能包含 jQuery UI。

我可能应该补充一点，[这里](http://www.the-art-of-web.com/system/mod-pagespeed-settings/#.UMh3voMQFMk)说mod-pagespeed 似乎只对写得不好的网站有用。Joomla 写得很好，所以只要你有运行良好的扩展，你的网站上的差异应该可以忽略不计！

# cocoa - 将允许的操作限制为仅 NSDragOperationCopy

> ID：13839398
> 
> 赞同：0
> 
> 时间：2012-12-12T12:05:06.400
> 
> 标签：cocoa, drag-and-drop

我有一个作为拖动源的自定义视图。我想将允许的拖动操作限制为仅一个副本，因此我在 draggingSession:sourceOperationMaskForDraggingContext: 方法中返回 NSDragOperationCopy。

由于某种原因，这没有效果。

我的代码似乎没有任何问题，因为返回 NSDragOperationNone 可以按预期工作并阻止拖动。

下面是来自我的 NSView 的代码，它是拖动源。从视图拖动到“垃圾箱”，您会看到 NSDragOperationMove 或 NSDragOperationDelete，即使我只想允许 NSDragOperationCopy 操作。

我还上传了一个小型演示项目来演示我在说什么：[https](https://dl.dropbox.com/u/368222/test.zip) ://dl.dropbox.com/u/368222/test.zip 。

```
- (void)mouseDown:(NSEvent *)event {
    NSString *path = [[NSBundle mainBundle] resourcePath];
    NSString *imagePath = [path stringByAppendingString:@"/image.png"];

    NSImage *image = [[NSImage alloc] initWithContentsOfFile:imagePath];

    NSArray *file = [NSArray arrayWithObject:imagePath];
    NSPasteboard *pboard = [NSPasteboard pasteboardWithName:NSDragPboard];
    [pboard declareTypes:[NSArray arrayWithObject:NSFilenamesPboardType] owner:nil];
    [pboard setPropertyList:file forType:NSFilenamesPboardType];

    [self dragImage:image at:NSZeroPoint offset:NSMakeSize(0, 0) event:event pasteboard:pboard source:self slideBack:NO];
}

- (NSDragOperation)draggingSession:(NSDraggingSession *)session sourceOperationMaskForDraggingContext:(NSDraggingContext)context {
    return NSDragOperationCopy;
}

- (void)draggingSession:(NSDraggingSession *)session endedAtPoint:(NSPoint)screenPoint operation:(NSDragOperation)operation {
    NSLog(@"Dragging session ended with operation: %li", operation);
} 
```

任何人？

谢谢！

# android - Intent 对象不起作用

> ID：13839400
> 
> 赞同：0
> 
> 时间：2012-12-12T12:05:08.470
> 
> 标签：android, android-intent, menu

我建立了一个选项菜单。它处理发送电子邮件的按钮之一不起作用。

以下是方法：

```
public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main_page, menu);
        return true;
    }

public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.settings: Toast.makeText(this, "You pressed the settings!", Toast.LENGTH_LONG).show();
                                break;
            case R.id.exit:     System.exit(0); //close the program + kill it from memory
                                break;
            case R.id.contactUs:sendEmail();
                                break;
        }
        return true;
    }

private void sendEmail(){
        Intent mailIntent = new Intent();
        mailIntent.setAction(Intent.ACTION_SEND);
        mailIntent.setType("text/plain");
        mailIntent.putExtra(mailIntent.EXTRA_EMAIL, new String[]{"some_email@gmail.com"});
        mailIntent.putExtra(mailIntent.EXTRA_SUBJECT,"Re:Your Application");
    } 
```

出于某种原因，我点击的任何项目，除了 contactUs 项目，都在工作。当我单击contactUs 项目时，它会关闭菜单栏并且什么也不做......

需要帮忙。

**编辑：**

我更改了以下内容：

```
private void sendEmail(){
    Intent mailIntent = new Intent();
    mailIntent.setAction(Intent.ACTION_SEND);
    mailIntent.setType("text/plain");
    mailIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{"some_email@gmail.com"});
    mailIntent.putExtra(Intent.EXTRA_SUBJECT,"Re:Your Application");
    startActivity(Intent.createChooser(mailIntent, "some_email@gmail.com"));
} 
```

这些字段仍然没有自动填充..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T12:08:30.360

你必须打电话

```
startActivity(Intent.createChooser(mailIntent, "Choose an Email client :")); 
```

编辑：

更改这些行

```
mailIntent.putExtra(mailIntent.EXTRA_EMAIL, new String[]{"some_email@gmail.com"});
mailIntent.putExtra(mailIntent.EXTRA_SUBJECT,"Re:Your Application"); 
```

到

```
mailIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{"some_email@gmail.com"});
mailIntent.putExtra(Intent.EXTRA_SUBJECT,"Re:Your Application"); 
```

编辑：

完整的方法应如下所示：

```
private void sendEmail(){
    Intent mailIntent = new Intent();
    mailIntent.setAction(Intent.ACTION_SEND);
    mailIntent.setType("text/plain");
    mailIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{"some_email@gmail.com"});
    mailIntent.putExtra(Intent.EXTRA_SUBJECT,"Re:Your Application");
    startActivity(Intent.createChooser(mailIntent, "Choose an Email client:"));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T12:09:15.093

您需要致电：

```
startActivity(Intent.createChooser(mailIntent,"Choose E-mail client:")); 
```

# jsf-2 - 如何在灯箱（Primefaces）中显示不同的页面，然后将该页面提交回第一页？

> ID：13839402
> 
> 赞同：1
> 
> 时间：2012-12-12T12:05:09.750
> 
> 标签：jsf-2, primefaces

我想在对话框/灯箱（Primefaces）中显示不同的页面，并在提交该页面后返回第一页。

```
<h:link onclick="createUserDialog.show();" value="Create New User">
    <p:dialog widgetVar="createUserDialog" modal="true">
        <h:outputLink value="createUser.jsf" >
        <ui:include src="createUser.xhtml"></ui:include>
        </h:outputLink>
    </p:dialog>
</h:link> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:23:08.717

像这样的东西？

```
<p:commandLink onclick="createUserDialog.show();" value="Create New User" />
<p:dialog widgetVar="createUserDialog" modal="true">
    <ui:include src="createUser.xhtml" />
</p:dialog> 
```

在 createUser.xhtml 中：

```
<h:body>
    <h:form>
        ...
        <p:commandButton value="button" oncomplete="createUserDialog.hide();" />
    </h:form>
</h:body> 
```

# mysql - 使用 < 和 > 时，如果 MySQL 查询中的日期为空，则跳过该日期

> ID：13839405
> 
> 赞同：0
> 
> 时间：2012-12-12T12:05:19.320
> 
> 标签：mysql, sql

如果未在表单中选择日期，我正在尝试编写查询以跳过日期。到目前为止，我得到了这个：

```
SELECT SQL_CALC_FOUND_ROWS id, dateTime FROM Message WHERE IFNULL(dateTime, '') < '' AND IFNULL(dateTime, '') > '' AND IFNULL(body, '') LIKE '%%'; 
```

如果我运行例如：`IFNULL(body, '') LIKE '%%';`使用`LIKE`它工作正常，它会返回预期的结果。但是，如果我使用`<`or`>`并且日期为空，它不会返回任何结果。

我的问题是如果日期为空，我如何跳过搜索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:08:32.683

我想你想要这个：

```
SELECT SQL_CALC_FOUND_ROWS id, dateTime
FROM Message
where dateTime IS NULL or dateTime <> ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:12:16.830

你也可以这样做::

```
SELECT SQL_CALC_FOUND_ROWS id, dateTime
FROM Message
where IFNULL(dateTime,'nullValue') <> ''; 
```

# javascript - 如何在会话之间保持类切换？

> ID：13839409
> 
> 赞同：1
> 
> 时间：2012-12-12T12:05:32.047
> 
> 标签：javascript, jquery, ruby-on-rails, session

我正在使用快捷键来切换类，如下所示。

```
// Toggle admin bar using Tab + q
key('tab + q', function(){
  $('body').toggleClass('admin')
}); 
```

但我想跨会话存储它。最好的方法是如何做到这一点？

我尝试使用 jQuery.cookie.js

```
// Toggle admin bar using Tab + q
if ($.cookie('adminBarVisible') == 'false') {
  $('body').removeClass('admin')
};

key('tab + q', function(){
  if ($.cookie('adminBarVisible') == 'true') {
    $('body').removeClass('admin')
    $.cookie('adminBarVisible', false)
  } else {
    $('body').addClass('admin')
    $.cookie('adminBarVisible', true)
  };
}); 
```

但在刷新一段时间（0.5 秒）时，我看到顶部的管理栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:16:36.143

您可以使用：

*   cookies - 大多数跨浏览器解决方案，`document.cookie`在检查是否应最初切换某些内容时，利用（或任何其他 cookie javascript 插件）在条件下访问 cookie 值。使用 cookie 会有额外的价值，因为 cookie 会随每个请求发送到您的服务器，因此它们自己可用于服务器端使用。
*   [localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage) - 易于使用，可在较新的浏览器上使用，数据跨会话持久保存。

# javascript - 登录表单在 Ipad 上不起作用

> ID：13839411
> 
> 赞同：0
> 
> 时间：2012-12-12T12:05:33.710
> 
> 标签：javascript, ipad, login

我最近遇到了一个奇怪的问题，我有一个简单的`html`登录表单，可以在手机和台式机上正常工作，但不能在 iPad 上工作，它只是刷新页面。起初我认为删除`'#'`和`href=""`添加`'javascript:;'`会起作用，但它什么也没做。

形式：

```
<form action="#" id="frmSignIn" method="post" name="frmSignIn">
    <p>
        <label class="uname" data-icon="u" for="username">Email Address:</label>
        <input class="formInput" maxlength="80" name="email" onkeydown="fnTrapKD('btnLgn', event);" style="width:150px;" value="">   
    </p>
    <p>
        <label class="pword" data-icon="u" for="password">Password:</label>
        <input class="formInput" name="password" onkeydown="fnTrapKD('btnLgn', event);" style="width:150px;" type="password"> 
    </p>
    <p>
        <input class="formCheckBox" name="cookie" type="checkbox" value="1"> &nbsp; Remember me
    </p>
    <input name="action" type="hidden" value="">
    <input id="loginbutton" name="loginbutton" type="hidden" value="">
    <p>
        <span class="floatr orange medium awesome">
            <a href="javascript:;" id="btnLgn" name="btnLgn" onclick="document.getElementById('loginbutton').value='loginbutton'; document.forms.frmSignIn.submit();" title="Login">Login</a>
        </span>
    </p>
    <div class="fpassword">
        <a href="#">Forgotten your password?</a>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:10:58.690

您需要在表单标签中指定操作页面

```
<form action="thispage.php" method="post" name="frmSignIn" id="frmSignIn"> 
```

# php - 使用 Zend 按下按钮时执行操作而不打开新页面

> ID：13839412
> 
> 赞同：0
> 
> 时间：2012-12-12T12:05:34.550
> 
> 标签：php, zend-framework, button

我与 Zend 一起开发。是否可以在按下提交按钮时在表单中执行特定控制器的特定操作，而不是打开网页。当前版本：

```
<form action=<?php echo $this->url(array('controller'=>'translation',
'action'=>'traduction'));?>><input type="submit" value="es"/> 
```

我想要的是：

```
<form action=<?php
//Execute the action TRADUCTION of the TRASLATION controller and stay in this page ?>>
input type="submit" value="es"/> 
```

我希望我很清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:20:36.810

您可以使用 ajax 来执行操作：

```
<form id='frm'>
<input type="submit" value="es"/> 
```

并进行ajax调用：（在这种情况下使用jquery）

```
<script>
$('#frm').submit(function(e){
    e.preventDefault();
    $.post({
        url:<?php echo this->url(array('controller'=>'translation','action'=>'traduction'));?>,
        data:$('#frm').serialize(),
        success:function(){
             //done
        }
    });
});
</script> 
```

注意：此代码使用 jquery，因此您还必须加载 jquery.js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:22:20.020

The only way to avoid page reloads is using javascript asynchronously.

[basic tutorial](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

# javascript - 我的用户脚本如何根据包含的图像 src 选择此链接？

> ID：13839416
> 
> 赞同：0
> 
> 时间：2012-12-12T12:05:52.457
> 
> 标签：javascript, jquery, userscripts

我想编写一个用户脚本来自动点击网页上的某个图像。目标 URL 是动态的，但图像名称是固定的。

到目前为止，我有以下用户脚本

```
//--- Note that the contains() text is case-sensitive.
var TargetLink          = $("a:contains('Click link.jpg')")

if (TargetLink  &&  TargetLink.length) 
    window.location.href    = TargetLink[0].href 
```

以下是网页的摘录，我需要一个用户脚本

```
<a target="_blank" href="http://www.movshare.net/video/0zq2u9732nvdf"><img border="0" src="http://img.movie2k.to/img/click_link.jpg" alt="view Rise of the Guardians" title="view Rise of the Guardians" width="742"></a> 
```

PS：图片属性的alt和title是动态的。Img SCR 是固定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:54:24.167

1.  [`:contains()`](http://www.jqapi.com/#p=contains-selector)搜索文本；它不会与图像源匹配。
2.  图像源不包含`Click link.jpg`. 它包含`click_link.jpg`. 下划线和正确的大小写至关重要。

鉴于此，此代码将选择正确的链接：

```
var TargetLink = $("a:has(img[src*='click_link.jpg'])"); 
```

# android - 尝试运行简单的 AndEngine 示例，但显示以下错误？

> ID：13839417
> 
> 赞同：0
> 
> 时间：2012-12-12T12:05:53.363
> 
> 标签：android, andengine

我是 android 游戏开发的新手，我从 GitHub 下载了 AndEngine 源代码和其他扩展，并创建了一个新项目，从 andengine 的 bin 中添加了 jar，用 SimpleGameActivity 扩展了我的主要活动并覆盖了抽象方法......但是当我尝试要运行这个项目，它说的是致命异常……BLA BLA……我被困在这里了最后 3 小时……不知道该怎么办？

这是我的主要活动代码

```
import org.andengine.engine.camera.Camera;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.scene.background.Background;
import org.andengine.entity.util.FPSLogger;

import org.andengine.ui.activity.SimpleBaseGameActivity;

public class MainActivity extends  SimpleBaseGameActivity {

    // ===========================================================
    // Constants
    // ===========================================================

    protected static final int CAMERA_WIDTH = 720;
    protected static final int CAMERA_HEIGHT = 480;

    private Scene mScene;

    @Override
    public EngineOptions onCreateEngineOptions() {
        final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
    }

    @Override
    public void onCreateResources() {
    }

    @Override
    public Scene onCreateScene() {
        this.mEngine.registerUpdateHandler(new FPSLogger());

        this.mScene = new Scene();
        this.mScene.setBackground(new Background(0, 0, 0));

        return this.mScene;
    }

} 
```

和清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="15" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
    <uses-feature android:glEsVersion="0x00020000" android:required="true"/>
    <uses-feature android:name="android.hardware.touchscreen" android:required="false"/>

    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>
    <uses-permission android:name="android.permission.BLUETOOTH"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

</manifest> 
```

和日志猫是

```
12-12 17:26:00.759: W/dalvikvm(20868): Unable to resolve superclass of Lcom/example/test/MainActivity; (558)
12-12 17:26:00.759: W/dalvikvm(20868): Link of class 'Lcom/example/test/MainActivity;' failed
12-12 17:26:00.759: D/AndroidRuntime(20868): Shutting down VM
12-12 17:26:00.759: W/dalvikvm(20868): threadid=1: thread exiting with uncaught exception (group=0x40018578)
12-12 17:26:00.799: E/AndroidRuntime(20868): FATAL EXCEPTION: main
12-12 17:26:00.799: E/AndroidRuntime(20868): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.test/com.example.test.MainActivity}: java.lang.ClassNotFoundException: com.example.test.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.test-1.apk]
12-12 17:26:00.799: E/AndroidRuntime(20868):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at android.os.Looper.loop(Looper.java:130)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at android.app.ActivityThread.main(ActivityThread.java:3687)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at java.lang.reflect.Method.invokeNative(Native Method)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at java.lang.reflect.Method.invoke(Method.java:507)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at dalvik.system.NativeStart.main(Native Method)
12-12 17:26:00.799: E/AndroidRuntime(20868): Caused by: java.lang.ClassNotFoundException: com.example.test.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.test-1.apk]
12-12 17:26:00.799: E/AndroidRuntime(20868):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
12-12 17:26:00.799: E/AndroidRuntime(20868):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
12-12 17:26:00.799: E/AndroidRuntime(20868):    ... 11 more 
```

我正在尝试在三星 Galaxy pop 中运行它

[我在http://www.youtube.com/watch?v=zVIZSKP3tR8](http://www.youtube.com/watch?v=zVIZSKP3tR8)找到了本教程

最后我找到了解决方案，我不必更改源代码......

[NoClassDefFoundError - Eclipse 和 Android](https://stackoverflow.com/questions/2247998/noclassdeffounderror-eclipse-and-android)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:08:29.167

确保 andengine.jar 不仅列在“Java Build Path”>“Libraries”下，而且还*导出*：“Java Build Path”>“Order and Export”。

**或者**，如果这不起作用，您可以随时将整个 AndEngine 项目与您的项目联系起来。只需将 AndEngine 项目导入您的 Eclipse（如果您还没有这样做的话），而不是复制 andengine.jar 做：

*   在 AndEngine 项目中选择“**属性**”>“ **android** ”并在“**库**”下标记为“**是库**”
*   回到你的项目中选择“**属性**”>“J* *ava Build Path* *”>“**项目**”然后“**添加**” **->**你在你的工作区中看到你所有的项目，选择 AndEngine
*   切换到“**订购和导出**”选项卡并确保 AndEngine 也被导出。
*   选择“**属性**”>“ **android** ”并在“**库**”下添加“ **AndEngine** ”

这应该可以解决问题（至少它对我有用）如果我弄乱了步骤的顺序，我很抱歉。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-12T05:30:53.790

改成

```
this.mText = new Text(50, 40, this.mFont, "", 1000, new TextOptions(AutoWrap.LETTERS, AUTOWRAP_WIDTH, HorizontalAlign.CENTER, Text.LEADING_DEFAULT), vertexBufferObjectManager); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-26T11:22:17.070

您的代码可以在我的 Android Studio 上运行，看起来不错，但您必须清理并重建项目。

# linker - 正确链接 osg/openthreads

> ID：13839425
> 
> 赞同：0
> 
> 时间：2012-12-12T12:06:16.403
> 
> 标签：linker, openscenegraph

我无法让 OSG/OpenThreads 在一个简单的示例应用程序中工作。这就是我的命令的样子：

```
g++ bAuto.o -o bAuto -lGL -lGLU -lstdc++ -losgSim -losgText -losgGA -losgParticle -losgDB -losgViewer -losgUtil -losg -lGLU -lGL  -lOpenThreads -L/opt/xfree86/default/lib -L/media/Programme/dev/cpp_libs/OpenSceneGraph/OpenSceneGraph-3.0.1-Ubuntu-x64-release-12741/lib64
bAuto.o: In function `osg::Referenced::unref() const':
bAuto.cpp:(.text._ZNK3osg10Referenced5unrefEv[osg::Referenced::unref() const]+0xd): undefined reference to `OpenThreads::Atomic::operator--()' 
```

所以我与 OpenThreads 链接，它肯定在 lib64 文件夹中。如果我删除链接依赖项，它会向 OpenThreads 中的函数抛出更多链接器错误。我错过了什么？我也尝试了 x86 版本，但它告诉我所有其他库都不兼容，因此无法找到。我的系统是 x64 但它不应该向后兼容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:36:18.340

这可能是相同的错误（阅读整个线程）： http: [//lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/2008-October/017447.html](http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/2008-October/017447.html)

# c# - 使用 JSON.NET 序列化对象时如何添加自定义根节点？

> ID：13839426
> 
> 赞同：14
> 
> 时间：2012-12-12T12:06:17.110
> 
> 标签：c#, json, serialization, json.net, custom-attributes

我为我的一些对象添加了一个自定义属性，如下所示：

```
[JsonCustomRoot("status")]
public class StatusDTO 
{
    public int StatusId { get; set; }
    public string Name { get; set; }
    public DateTime Created { get; set; }
} 
```

属性很简单：

```
public class JsonCustomRoot :Attribute
{
    public string rootName { get; set; }

    public JsonCustomRoot(string rootName)
    {
        this.rootName = rootName;
    }
} 
```

序列化对象实例时 JSON.NET 的默认输出如下：

```
{"StatusId":70,"Name":"Closed","Created":"2012-12-12T11:50:56.6207193Z"} 
```

现在的问题是：**如何使用自定义属性的值向 JSON 添加根节点，如下所示**：

```
{status:{"StatusId":70,"Name":"Closed","Created":"2012-12-12T11:50:56.6207193Z"}} 
```

我找到了几篇提到[IContractResolver](http://james.newtonking.com/projects/json/help/?topic=html/T_Newtonsoft_Json_Serialization_IContractResolver.htm)接口的文章，但我不知道该怎么做。我的尝试包括这段未完成的代码：

```
protected override JsonObjectContract CreateObjectContract(Type objectType)
{
    JsonObjectContract contract = base.CreateObjectContract(objectType);

    var info = objectType.GetCustomAttributes()
                   .SingleOrDefault(t => (Type)t.TypeId==typeof(JsonCustomRoot));
    if (info != null)
    {
        var myAttribute = (JsonCustomRoot)info;
        // How can i add myAttribute.rootName to the root from here?
        // Maybe some other method should be overrided instead?
    }

    return contract;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T12:10:12.947

如果你使用匿名对象怎么办？

```
JSON.Serialize(new { status = targetObject}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T06:33:35.447

这是一个专门针对 Web API 的解决方案，我也在使用它：[RootFormatter.cs](https://gist.github.com/4554127)

我基于[为 ASP.NET Web API 创建 JSONP Formatter](http://www.west-wind.com/weblog/posts/2012/Apr/02/Creating-a-JSONP-Formatter-for-ASPNET-Web-API)编写它。

我没有使用自定义属性，而是重用`JsonObjectAttribute`. 这是一个使用代码：

```
using Newtonsoft.Json

[JsonObject(Title = "user")]
public class User
{
    public string mail { get; set; }
} 
```

然后，将 RootFormatter 添加到您的 App_Start 并将其注册如下`WebApiConfig`：

```
GlobalConfiguration.Configuration.Formatters.Insert(0, new RootFormatter()); 
```

我能够得到类似于 WCF 的包装响应`WebMessageBodyStyle.Wrapped`：

```
{"user":{
  "mail": "foo@example.com"
}} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-03T18:59:41.070

解决此问题的一种非常简单的方法是将对象放在另一个对象中。看它可能过于简单化了，但这在处理集合和奇异对象时有效。

```
 public class StatusDTO
    {
        public int StatusId { get; set; }
        public string Name { get; set; }
        public DateTime Created { get; set; }
    }

    public class statusJasonModel
    {
        public StatusDTO status { get; set; }
    } 
```

现在，如果您将 StatusDTO 放在 statusJsonModel 对象中并将其序列化为 Json。它应该会给你想要的答案。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-09-23T12:12:50.523

我在我的一个项目中遇到了类似的挑战。以下是我解决问题的步骤。

**1.我的实体类**

```
public class Product
    {
        [Key]
        public string Id { get; set; }
        public string Title { get; set; }
        public string Album { get; set; }
        public string Artist { get; set; }
        public string Genre { get; set; }

    } 
```

**2.创建了另一个类，在这个表单中定义。**

```
 public class KindOfMedia
        {
            public KindOfMedia()
            {
                Product = new List<Product>();
            }
            public List<Product> Product { get; set; }
        } 
```

**3\. Web API 控制器，将返回 json**

```
 public HttpResponseMessage Products()
            {
                var kind = new KindOfMedia();
                kind.Products = new List<Product>();
                kind.Products.Add(new Product
                {
                    Id = Guid.NewGuid().ToString(),
                    Title = "I am A Winner",
                    Album = "",
                    Artist = "Project Fame",
                    Genre = "Contemporal"                
                });
                kind.Products.Add(new Product
                {
                    Id = Guid.NewGuid().ToString(),
                    Title = "Great Nation",
                    Album = "Oceans",
                    Artist = "Timi Dakolo",
                    Genre = "Gospel"
                });

                return Request.CreateResponse(HttpStatusCode.OK, kind);
            } 
```

**4.将这行代码添加到我的App_Start文件夹下的WebApi Config文件中**

```
 var json = config.Formatters.JsonFormatter;
                json.SerializerSettings.PreserveReferencesHandling = Newtonsoft.Json.PreserveReferencesHandling.None; 
```

请注意**Newtonsoft.Json.PreserveReferencesHandling.None**不会保留序列化类型的引用

结果 Json 是

```
{
  "Musics": [
    {
      "Id": "bf9faeee-7c39-4c33-a0ea-f60333604061",
      "Title": "I am A Winner",
      "Album": "",
      "Artist": "Project Fame",
      "Genre": "Contemporal"
    },
    {
      "Id": "243edd32-7ba2-4ac4-8ab9-bba6399cb0a6",
      "Title": "Great Nation",
      "Album": "Oceans",
      "Artist": "Timi Dakolo",
      "Genre": "Gospel"
    }
  ]
} 
```

# c# - C#失去对文本框的关注

> ID：13839429
> 
> 赞同：0
> 
> 时间：2012-12-12T12:06:23.107
> 
> 标签：c#, textbox

我已经为文本设置了标准文本和颜色，当单击文本框时，我清除了用户类型文本的文本并定义了黑色。点击事件：

```
 if (txtbox.Text == "Ex.: [text test]")
            {
                txtbox.Text = string.Empty;
                txtbox.ForeColor = Color.Black;
            } 
```

如果文本框为空并且焦点位于另一个文本框中，我想设置默认文本，因此如果用户单击或按下选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:32:57.020

```
 private void textBox1_Validating(object sender, EventArgs e)
    {
        if (string.IsNullOrWhiteSpace(textBox1.Text))
        {
            //Your logic here or the color you want 
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:15:10.863

您可以在`Leave`事件中设置默认文本。这将在文本框失去焦点时运行。

```
 private void textBox1_Leave(object sender, EventArgs e)
    {
        if (textBox1.Text == String.Empty)
        {
            //Set default text here.  
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:16:34.630

请在单击和按键事件函数中编写以下代码（用于选项卡的工作）

```
If(txtbox.Text == "")
{
    txtbox.Text = "Default";
    txtbox1.focus();  //focus will be set to another textbox.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:17:38.157

如果表单 form1 上有两个文本框 txt1 和 txt2，那么

```
form1_Load(object sender, System.EventArgs e)
{
    txt2.SetFocus;
    txt1.text = "Default Text";
}
txt1_Click(object sender, System.EventArgs e)
{
    if(txt1.text == "Default Text")
    {
        txt1.text = "";
    }
}
txt1_Leave(object sender, System.EventArgs e)
{
   if(txt1.text == "")
   {
        txt1.text = "Default Text";
   }
} 
```

我认为它会起作用。如果发生任何错误，请告诉我。

# php - 来自 Google Analytics 的实时访问者。如何得到它？

> ID：13839430
> 
> 赞同：4
> 
> 时间：2012-12-12T12:06:38.363
> 
> 标签：php, google-analytics

有没有办法使用[gapi](http://code.google.com/p/gapi-google-analytics-php-interface/)（首选）从谷歌分析中检索实时访问者？

我试图传递一个日期范围，例如：

开始：2012-12-12 09:49:04 结束：2012-12-12 09:49:05

但它没有用。

我进行了研究，但还没有找到解决方案。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-02T08:20:58.560

谷歌现在推出了实时 API。它仅处于测试阶段，但是您可以注册，以后应该可供所有人使用。

[http://analytics.blogspot.co.uk/2013/08/google-analytics-launches-real-time-api.html](http://analytics.blogspot.co.uk/2013/08/google-analytics-launches-real-time-api.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T01:48:28.750

还不能通过 api 访问实时数据。请参阅以下内容：

[访问实时数据](http://code.google.com/p/analytics-issues/issues/detail?id=154)

[从 Google Analytics 抓取实时访问者](https://stackoverflow.com/questions/11021554/scraping-real-time-visitors-from-google-analytics)

目前获取它的唯一方法是在 Google Analytics 网络界面中查看它：https: [//www.google.com/analytics/web/](https://www.google.com/analytics/web/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-23T15:20:16.940

**嵌入 API** -*第三方可视化*

[![在此处输入图像描述](../Images/53bb711b1ef7e069a633d000528fa2bd.png)](https://i.stack.imgur.com/G70kI.png)

Embed API 可以轻松查询数据并将其显示在 Google 图表中。但它也允许您访问原始数据，以便您可以随心所欲地显示它。此示例使用 Chart.js 可视化库。

Embed API 构建在 Google API 客户端库之上，这意味着您不仅可以访问报告 API，还可以访问所有内容。

除了显示 Chart.js 可视化之外，此示例还使用底层客户端库从实时报告 API 查询数据。

您可以在这里查看：[https ://ga-dev-tools.appspot.com/embed-api/third-party-visualizations/](https://ga-dev-tools.appspot.com/embed-api/third-party-visualizations/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-22T15:37:53.103

如果您不想等待 API 公开发布并且不需要从第三方帐户中提取数据，那么我在此处对 Analytics 仪表板使用的 API 进行了逆向工程：

[https://stackoverflow.com/a/18945515/900747](https://stackoverflow.com/a/18945515/900747)

正如您在答案中看到的那样，它几乎不是一个稳定的 API，但它应该提供您需要的一切，假设这是供个人使用的。

# javascript - 每周提醒如何运作？

> ID：13839431
> 
> 赞同：0
> 
> 时间：2012-12-12T12:06:39.130
> 
> 标签：javascript, dayofweek, reminders, gettimeofday

有每周提醒的算法吗？

例如，我为星期四设置了提醒，并检查了“每周”选项。
提醒应该每周四提醒，但是这是怎么做到的呢？

我想了一个主意，但我想这很愚蠢：

1.  获取今天的“日”。
2.  获取今天的“日期”。
3.  获取通缉日数。
4.  将这两天相减。
5.  使用 [4] 获取当天的日期。
6.  每次警报后将计数器增加 7。

我什至不知道这是否可行，我确信有更好的方法来做到这一点，所以在开始实施之前我需要你的意见。

PS：我使用 JavaScript，所以功能非常有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:08:41.250

目前尚不清楚您要做什么。

1.  如果您的代码需要知道是否是星期四，那真的很容易使用[`getDay`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.5.16)，它会为您提供星期几：

    ```
    if (new Date().getDay() === 4) {
        // It's Thursday
    } 
    ```

    [日期编号](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.6)以`0`= 星期日开头。

2.  如果您的代码需要查找从给定日期开始的下周四：

    ```
    var dt = /* ...the start date... */;
    while (dt.getDay() !== 4) {
        dt.setTime(dt.getTime() + 86400000)) // 86400000 = 1 day in milliseconds
    } 
    ```

    或者当然没有循环：

    ```
    var dt = /* ...the start date... */;
    var days = 4 - dt.getDay();
    if (days < 0) {
        days += 7;
    }
    dt.setTime(dt.getTime() + (days * 86400000)); 
    ```

3.  如果您已经有一个星期四并且您需要知道下一个星期四的日期：

    ```
    var nextThursday = new Date(thisThursday.getTime() + (86400000 * 7)); 
    ```

# c - 在自定义 linux 内核系统调用中强制代码段是原子的

> ID：13839434
> 
> 赞同：2
> 
> 时间：2012-12-12T12:06:44.617
> 
> 标签：c, linux, linux-kernel, locking, critical-section

我一直在尝试实现一个给我带来问题的 linux system_call，我怀疑这是因为我的代码没有锁定（或者可能是抢占）。

我在一个非常频繁调用的函数中有一个关键部分（每次进行 system_call 时都会调用这个自定义函数），它也由 system_calls 启动/停止。有没有办法确保每次在 linux 内核中进行任何系统调用时都会发生的这个关键部分是不可抢占的，并且必须在其他任何事情发生之前完成执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:22:54.123

如果我正确理解了这个问题，最简单的方法是使用自旋锁：

```
#include <linux/spinlock.h>

static DEFINE_SPINLOCK(foo_lock);

int my_system_call(...)
{
        ...
        /* critical section starts */
        spin_lock(&foo_lock);
        /* critical section goes here */
        ...
        /* critical section ends */
        spin_unlock(&foo_lock);
        ...
} 
```

这样的临界区将是不可抢占的，临界区的并发执行不会重叠。

# ruby-on-rails - Each_with_index 无法正常工作

> ID：13839435
> 
> 赞同：0
> 
> 时间：2012-12-12T12:06:44.790
> 
> 标签：ruby-on-rails, iterator, ruby-on-rails-3.2, each, carousel

我正在使用轮播来显示图像。我已经将图片上传到云端。但不知何故，它正在自我重复。这是我的代码

```
div id="myCarousel" class="carousel slide">
<div class="carousell-inner">
    <% @img.each_with_index do |i|%>
    <% if i.gallery == "Art"%>
        <div class="active item">
            <%= image_tag (i.image.url) %>
        </div>

        <% i.next%> <!-- For incrementing the i value but it is not working-->
        <div class="item">
            <%= image_tag (i.image.url)%>   
        </div>
    <%end%> 
    <%end%>
    </div>
</div> 
```

我想要的是`active item`它应该显示图像数组的第一个 url，并且在非活动项目（之后将是活动的）中应该有其他图像。它不应该重复图像。在这里它正在重复图像，因为 的值`i`没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:00:00.650

我一开始以为你需要`each_with_index`，但实际上，你只对`Art`图库中的图像感兴趣，不知道第一张图像是否真的是`Art`图像，所以我尝试如下：

```
<div id="myCarousel" class="carousel slide">
  <div class="carousell-inner">
    <% art_images_counter = 0 %>
    <% @img.each do |image|%>
      <% if image.gallery == "Art" %>
        <% if art_images_counter == 0 %>
          <div class="active item">
            <%= image_tag (image.image.url) %>
          </div>
        <% else %>
          <div class="item">
            <%= image_tag (image.image.url)%>   
          </div>
        <% end %>
        <% art_images_counter += 1 %>
      <%end%> 
    <%end%>
  </div>
</div> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:22:53.077

我开始了解您想要什么:) 如果您将数据分开，您可以使您的逻辑非常简单。

```
<div id="myCarousel" class="carousel slide">
    <div class="carousell-inner">
    <% @img.keep_if{|i| i.gallery == "Art"}.each do |i|%>
        <div class="active item">
            <%= image_tag (i.image.url) %>
        </div>
    <%end%>

    <% @img.keep_if{|i| i.gallery != "Art"}.each do |i|%>
        <div class="item">
            <%= image_tag (i.image.url)%>   
        </div>
    <%end%>
    </div>
</div> 
```

最好在控制器中准备数据，而不是在视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:31:05.320

我通过手动找到答案。首先，在控制器中，我`Art Gallery`通过此代码找到了属于 的所有图像。

```
 @image = Image.find_all_by_gallery("Art") 
```

现在要显示数组的第一个元素`@image`，我们可以使用简单的`@image.first`，然后我们可以在 carousel 的活动项中调用数组的第一个元素。那么对于该`item`部分，基本要了解的是，如果我们直接调用并显示数组的所有元素，那么数组的第一个元素也会显示在这部分。所以可能会发生重复。为了避免这种情况，我们可以这样做：

```
i = @image.count
@image[1..i] 
```

这样第一个元素就不会在轮播的“项目”部分重复。希望它可以帮助其他人。谢谢你给我时间。

# javascript - 如何定义基于其他任务的 grunt 任务？

> ID：13839437
> 
> 赞同：4
> 
> 时间：2012-12-12T12:06:46.570
> 
> 标签：javascript, gruntjs

例如，我定义了自己的名为`jasmine`. 它是基于任务的`server`。

如果我打电话`grunt server jasmine`- 没关系。但我想在我的任务中声明这种依赖关系。

`grunt.task.run`- 将任务添加到队列中（在我的任务之后）。 `grunt.task.requires`- 只检查依赖关系，不运行它...

有什么方法可以`server`在我的任务之前运行`jasmine`任务吗？

PS我不想创建`jasmine_orig`任务然后`.registerTask('jasmine', 'server jasmine_orig')`。看起来很傻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:41:15.137

当前编写服务器任务的方式，不，这是不可能的。但是，您可以通过使用[grunt-connect 插件](https://github.com/gruntjs/grunt-contrib-connect)或[滚动您自己的](https://github.com/gruntjs/grunt/blob/0.3-stable/docs/task_server.md#roll-your-own) `grunt server`任务来做您想做的事情。内置的源代码在这里：

[https://github.com/gruntjs/grunt/blob/0.3-stable/tasks/server.js](https://github.com/gruntjs/grunt/blob/0.3-stable/tasks/server.js)

正如您所看到的，除了读取配置、启动连接服务器以及可能在`--debug`传递时进行记录之外，它并没有什么大不了的。实际上，您可以将所有这些代码复制到一个帮助程序中（我担心文档不足），然后从您的 jasmine 任务中调用它。

为您的测试启动一个单独的服务器（为了测试独立性）可能是个好主意，但是如果您出于某种原因需要保存资源，或者您发现多个服务器以其他方式令人反感，您将不得不编写一些自定义任务代码检查服务器是否存在，如果不存在则启动服务器。

可能最好的解决方案如下：

1.  安装 grunt-contrib-connect npm 包：

    ```
    npm install grunt-contrib-connect --save-dev 
    ```

2.  为您的开发和测试环境进行配置：

    ```
    connect: {
      dev: {
        base: 'path/to/serve',
        port: 8000
      },
      test: {
        base: 'path/to/serve',
        port: 8001
      }
    } 
    ```

3.  注册一个为您`test`运行的任务`grunt server:test jasmine`。

    ```
    grunt.registerTask('test', 'server:test jasmine') 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-05T20:43:24.993

一种部分解决方案是将特定任务的步骤定义为变量。然后，您可以像这样连接它们：

```
var buildSteps = [ ... ];
var distDevSteps = [ ... ];
grunt.registerTask('build', buildSteps);
grunt.registerTask('dist_dev', [].concat(buildSteps, distDevSteps)); 
```

# javascript - 在列表 ID 属性中用作键值对的安全 JavaScript 字符

> ID：13839443
> 
> 赞同：0
> 
> 时间：2012-12-12T12:07:12.417
> 
> 标签：javascript, html, json

我有一个树视图（使用动态树版本），并且我已经扩展了 JS 以包含多个上下文菜单。

最初我正在使用

```
<li id="@ID@:3.@TYPE@:3"> 
```

保存我可能需要的详细信息并将其转换为 JSON，如下所示：

```
//Gets the ID value
var node = $.ui.dynatree.getNode(span).toString()
node = node.replace(/|/g, '\"')
node = node.replace(".", ',')
node = jQuery.parseJSON('{' + node + '}'); 
```

这很好，但不幸的是，这是在剃刀 MVC 视图中使用的，所以 @ 被淘汰了。我不想要@@ 所以想了一个 | 可能是更好的分隔符

```
<li id="|ID|:3.|TYPE|:3"> 
```

但是将 JS 更改为

```
var node = $.ui.dynatree.getNode(span).toString()
node = node.replace(/|/g, '\"')
node = node.replace(".", ',')
node = jQuery.parseJSON('{' + node + '}'); 
```

解析 JSON 时给我一个错误。有什么关于什么是错的以及我应该使用什么字符的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:13:38.310

正则表达式应该是`/\|/g`，因为`|`是正则表达式中的特殊字符。无论如何，这是一种非常可怕的方法，您可以直接将 json 放在一个元素中：

```
<span id="hello" data-json='{"ID":3, "TYPE": 3}'></span> 
```

当您使用 jQuery 时，它甚至会自动为您解析 json `.data()`：

```
$("#hello").data("json").TYPE; //3 
```

[http://jsfiddle.net/jJQ7z/](http://jsfiddle.net/jJQ7z/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:10:02.307

您不应该对 id 使用这些类型的值。id 应该是页面上给定对象的简单主格标识符，首先用于获取 JavaScript 调用的对象。最好只为页面上需要它们的元素提供 ID，因为它可以防止您在不会使用它们的元素上使用好的 id 名称。

如果您需要在标签中包含补充数据，您可以创建以 . 开头的自定义标签`data-`。您可以将您想要的任何信息放入您想要的任意数量的此类标签中，并且它仍然是完全有效的 HTML。例如：

```
<li data-myId="3" data-type="3"> 
```

然后，您可以在 JavaScript 中检索这些值，就像检索任何其他属性值一样。

# extjs - 如何覆盖 PagingToolbar 中的刷新操作

> ID：13839444
> 
> 赞同：7
> 
> 时间：2012-12-12T12:07:14.950
> 
> 标签：extjs, extjs4, extjs4.1

我需要根据分页工具栏中的刷新按钮编写一些操作。如何覆盖该`doRefresh()`方法？

```
this.bbar=Ext.create('Ext.PagingToolbar', {
      store: store,
      displayInfo: true,
      displayMsg: 'Displaying records {0} - {1} of {2}',
      emptyMsg: "No topics to display" 
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T12:57:46.383

如果你只想做一次使用

```
Ext.create('Ext.PagingToolbar', {
      store: store,
      displayInfo: true,
      displayMsg: 'Displaying records {0} - {1} of {2}',
      emptyMsg: "No topics to display",
      doRefresh : function(){
         // Keep or remove these code
         var me = this,
             current = me.store.currentPage;

         if (me.fireEvent('beforechange', me, current) !== false) {
             me.store.loadPage(current);
         }
      }
}); 
```

或所有页面栏。

```
Ext.PagingToolbar.prototype.doRefresh = function() {
     // Keep or remove these code
     var me = this,
         current = me.store.currentPage;

     if (me.fireEvent('beforechange', me, current) !== false) {
         me.store.loadPage(current);
     }
} 
```

**请注意，如果您这样做，则每次更新 EXTJS 核心时都必须仔细检查以确保功能正常！**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T08:09:34.473

```
Ext.create('Ext.PagingToolbar', {
  store: store,
  displayInfo: true,
  displayMsg: 'Displaying records {0} - {1} of {2}',
  emptyMsg: "No topics to display",
  doRefresh : function(){
     var me = this,
         current = me.store.currentPage;

     if (me.fireEvent('beforechange', me, current) !== false) {
        me.store.loadPage(1, {                                      
            callback: function (records, operation, success) {  
                Ext.getCmp('educationGrid').getSelection(records, operation, success);                                      
            }
        });
     }
  } 
```

});

...................................................

```
getSelection: function(records, operation, success){
    var grid= Ext.getCmp('educationGrid'); //my grid
    grid.getView().select(0);
} 
```

# windows - VS 2012 在 Windows 商店应用程序项目中加载 XAML 设计器时挂起

> ID：13839457
> 
> 赞同：0
> 
> 时间：2012-12-12T12:08:01.983
> 
> 标签：windows, windows-8, app-store, microsoft-metro

我在 VS 2012 Ultimate 中做 Windows App Store 项目。

从上周开始，每当我尝试创建新的 Windows App Store 项目时，XAML 设计器查看器就会永远挂起。

但是，它在 WPF 和其他项目中完美运行。

即使在 VS 2012 Update 1 安装后也没有任何改进。

怎么了 ？

# javascript - 提交和点击不一起工作

> ID：13839459
> 
> 赞同：2
> 
> 时间：2012-12-12T12:08:10.180
> 
> 标签：javascript, html

```
<input type="submit" class="sub" onClick="exefunction2()" id="button"> 
```

当我单击提交按钮时`onClick`不起作用。我怎样才能解决这个问题？我需要在提交表单时进行此操作，因为`onClick`事件包含值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T12:09:59.480

最好的方法是在表单标签上调用你的方法，如下所示：

```
<form onsubmit="return exefunction2();">
...
</form> 
```

退货`false`不会提交表格，`true`会提交！

要发布更多数据（使用 exefunction2 构建），您可以使用它

```
<script type="text/javascript">
    function exefunction2(form) {
        //add dynamic values
        var dynValues = {
            "val1": 1,
            "val2": "bla"
        };

        for(var name in dynValues) {
            //check if field exists
            var input = null;
            if(document.getElementsByName(name).length === 0) {
                input = document.createElement('input');
                input.setAttribute('name', name);
                input.setAttribute('type', 'hidden');
                form.appendChild(input);
            }
            else {
                input = document.getElementsByName(name)[0];
            }

            input.setAttribute('value', dynValues[name]);
        }
        return true;
    }
</script>

<form onsubmit="return exefunction2(this);">
    <input type="submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-12T07:04:22.837

W3学校在这里有一个很好的解释：http: [//www.w3schools.com/js/js_validation.asp](http://www.w3schools.com/js/js_validation.asp.)

基本上，提交在执行任何操作之前都会等待来自 onClick 的返回值。如果你愿意，你也可以连接一个 confirm() 请求。如果表单验证，只需编写类似 `return confirm("continue")`. 这是一个老问题，但我希望它可以帮助任何偶然发现它的人。失败的另一个重要原因是脚本中的错误。不幸的是，除非您在浏览器中运行调试器，否则很难知道是否有任何东西使您的脚本崩溃。打开浏览器调试器有助于跟踪任何问题。在 Chrome 中，您可以使用 CTRL-SHIFT-I 用于 Windows 或 CMD-OPTION-I 用于 Mac。如果您暂停捕获的错误，您会发现任何过早停止脚本的语法或致命错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:12:08.377

您可以使用 Javascript 提交表单。

```
<form id="form_id" ...>
<input type="button" class="sub" onclick="exefunction2();" id="button"> 
```

Javascript：

```
function exefunction2() {
    ...
    document.forms["form_id"].submit();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:11:39.697

好吧，我不知道这是否是“官方”预期的行为，但这就是它的工作原理：如果您向其添加 onclick Javascript 函数，则提交类型的按钮将不再提交。只需让函数也提交表单或让函数返回 false

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T12:14:29.610

试试`<form onSubmit="exefunction2()">`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-11T09:43:36.000

同意@silly，我使​​用了同样的想法。我正在分享实施。我的目标是，禁用用于提交表单的“执行”按钮，直到收到响应，然后再次启用“执行”按钮。我正在使用 Flask 。

**我的表格：**

```
<form onsubmit="return disableExecuteButton();" method="POST" action="/dothis">
.....
</form> 
```

**我的 JS：**

```
function disableExecuteButton(){
    var executeButton = document.getElementById("executeButton");
    executeButton.setAttribute("disabled","disabled");
    return true;
}

function reactivateExecuteButton(){
    var executeButton = document.getElementById("executeButton");
    executeButton.setAttribute("disabled","enabled");
} 
```

**从 Flask，我返回：**

```
return render_template('result.html', message=message, error=error, html_content=result, history=session['actions_taken'], done=True) 
```

"done=True" 是我用来表示已收到响应并且我们需要再次启用该按钮的内容。

**要重新启用按钮：**

```
{% if done %}
    <script type="text/javascript">
        reactivateExecuteButton()
    </script>
{% endif %} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-12T12:11:34.773

将事件改为onsubmit，返回false，避免表单提交。

```
<input type="submit" class="sub" onsubmit="exefunction2();return false;" id="button"> 
```

# php - Clickatell 阿拉伯语文本出现乱码

> ID：13839466
> 
> 赞同：3
> 
> 时间：2012-12-12T12:08:39.457
> 
> 标签：php, character-encoding, clickatell

我正在尝试使用 php 从 clickatell 短信提供商发送阿拉伯文本，但我所能发送的只是乱码文本。我用于测试的文本是“غثس هفس”。

我尝试使用 iconv 将消息文本编码为 Windows-1256,1250 和 ISO-8859-6 格式，但每次它只发送乱码文本。

谁能给我一些关于我所缺少的东西的指示？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:18:53.290

好的，这是给以后走这条路的人的。[在这里](http://drupal.org/files/issues/yh_26.patch)找到解决方案 Retaining code from Esailija's answer

```
<?php
$text = "غثس هفس خن";
$arr = unpack('H*hex', iconv('UTF-8', 'UCS-2BE', $text));
$message = strtoupper($arr['hex']);

$username = '';
$password = '';
$API_ID = '';
$to = '';

$url = "http://api.clickatell.com/http/auth?user=$username&password=$password&api_id=$API_ID";
$ret = file($url);
$sess = explode(":",$ret[0]);
if ($sess[0] == "OK") {
    $sess_id = trim($sess[1]);
    $url = "http://api.clickatell.com/http/sendmsg?session_id=$sess_id&to=$to&text=$message&unicode=1";
    $ret = file($url);
    $send = explode(":",$ret[0]);

    if ($send[0] == "ID") {
        echo "success - message ID: ". $send[1];
    } else {
        echo "send message failed";
    }
} else {
    echo "Authentication failure: ". $ret[0];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-16T12:09:58.213

简短的回答：你需要做两件事：

a) 转换您的阿拉伯语信息：

$data = iconv("UTF-8", "UCS-2BE", $data); $data = bin2hex($data);

使用生成的字符串作为您的消息文本

b) 通过 HTTP API 发送时，包含 unicode 参数：

&unicode=1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:34:52.297

基于[此](https://kb.swivelsecure.com/wiki/index.php/Clickatell_SMS_Gateway_How_To_Guide)，默认为 GSM，但您也可以选择 UCS2。

所以：

```
<?php
                                 //Make sure the PHP source file is physically
                                //saved in utf-8
$text = rawurlencode(iconv( "UTF-8", "UCS-2", "غثس هفس "));

$url = "http://api.clickatell.com/http/auth?user=username&password=password&api_id=API_ID&encoding=UCS2";
$ret = file($url);
$sess = explode(":",$ret[0]);
if ($sess[0] == "OK") {

    $sess_id = trim($sess[1]);
    $url = "http://api.clickatell.com/http/sendmsg?session_id=$sess_id&to=$to&text=$text&encoding=UCS2";
    $ret = file($url);
    $send = explode(":",$ret[0]);

    if ($send[0] == "ID") {
        echo "successnmessage ID: ". $send[1];
    } else {
        echo "send message failed";
    }
} else {
    echo "Authentication failure: ". $ret[0];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-12T09:28:59.773

我为 Vtiger 6 重写了 ClickAtell 代码，以便它可以容纳 UTF-8 扩展字符。我用土耳其语。我使用下面的代码进行转换。我希望你能移植。

```
/**
 * Function to handle UTF-8 Check and conversion
 * @author Nuri Unver
 * 
 */
public function smstxtcode($data){ 
$mb_hex = '';
$utf = 0;
for($i = 0 ; $i<mb_strlen($data,'UTF-8') ; $i++){ 
    $c = mb_substr($data,$i,1,'UTF-8');

    $o = unpack('N',mb_convert_encoding($c,'UCS-4BE','UTF-8')); 
    $hx = sprintf('%04X',$o[1]); 
    $utf += intval(substr($hx,0,2));
    $mb_hex .= $hx;
} 
if ($utf>0)
{
    $return=$mb_hex;
    $utf=1;
}
else
{
    $return=utf8_decode($data);
    $utf=0;
}
return array($utf,$return); 

} 
```

你用你的消息调用这个函数。您得到的响应是一个数组，说明根据消息以及要发送的文本发送 unicode 文本还是普通文本。如果没有扩展字符，它只是将其作为 unicode=0 的纯文本发送以保存字符。如果消息包含扩展字符，它将消息转换为十六进制代码并将其作为 unicode 发送。

这段代码只是进行计算。您需要实现自己的代码以将其移植到您的系统。为了演示，这是我用于 Vtiger 提取数据并发送消息的代码：

```
/**
 * Function to handle SMS Send operation
 * @param <String> $message
 * @param <Mixed> $toNumbers One or Array of numbers
 */
public function send($message, $toNumbers) {
    if(!is_array($toNumbers)) {
        $toNumbers = array($toNumbers);
    }
    $params = $this->prepareParameters();
    $smsarray = $this->smstxtcode($message);
    $params['text'] = $smsarray[1];
    $params['unicode'] = $smsarray[0];
    $params['to'] = implode(',', $toNumbers);
    $serviceURL = $this->getServiceURL(self::SERVICE_SEND); 
```

# android - SQLITE 无法从具有 1 行 6 列的 CursorWindow 读取第 0 行第 6 列

> ID：13839475
> 
> 赞同：2
> 
> 时间：2012-12-12T12:08:59.973
> 
> 标签：android, sqlite

我创建了一个包含 7 列和 1 行的表。但是我无法使用如下代码检索存储在 sqlite 中的数据。以前它在有 6 列时起作用..但是今天当我输入带有 bname 的新列时错误显示创建表::

```
@Override
    public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE " + DATABASE_TABLE+"("+KEY_BBOOKID+" varchar(15),"+KEY_DESC+" text(1500),"+KEY_URL1+" BLOB,"+KEY_URL2+" BLOB,"+KEY_ID+" INTEGER PRIMARY KEY AUTOINCREMENT ,"+KEY_NAME+" varchar(150),"+KEY_BNAME+" varchar(150))");
} 
```

在数据库类

我正在使用检索数据

```
private void getDataAndPopulate() 
{
    mapId = new ArrayList<String>();
    mapName=new ArrayList<String>();
    mapBookId = new ArrayList<String>();
    mapDesc = new ArrayList<String>();
    map1 = new ArrayList<byte[]>();
    map2 = new ArrayList<byte[]>();
    Cursor cursor = getEvents("pagess");
    while (cursor.moveToNext())
    {
         String temp_bookid = cursor.getString(0);
         String temp_desc=cursor.getString(1);
         byte[] temp_image1 = cursor.getBlob(2);
         byte[] temp_image2 = cursor.getBlob(3);
         String temp_id=cursor.getString(4);
         String temp_name = cursor.getString(5);
         String temp_bname=cursor.getString(6);
         mapId.add(temp_id);
         mapBname.add(temp_bname);
         mapBookId.add(temp_bookid);
         mapName.add(temp_name);
         mapDesc.add(temp_desc);
         map2.add(temp_image2);
         map1.add(temp_image1);

            TextView txtDesc = (TextView) findViewById(R.id.tDescription);
            text = (TextView) findViewById(R.id.tTitle);
            text.setText(temp_name);

            txtDesc.setText(temp_desc);
            TextView txtName = (TextView) findViewById(R.id.tvName);
            txtName.setText(temp_bname);

            ImageView img = (ImageView)findViewById(R.id.smallImage);

            img.setImageBitmap(BitmapFactory.decodeByteArray(temp_image1, 0,temp_image1.length));
            mContext = this;
            vf = (ViewFlipper) this.findViewById(R.id.vfShow);
            vf.setOnTouchListener(new OnTouchListener() {
            @Override
                public boolean onTouch(final View view, final MotionEvent event) {
                    detector.onTouchEvent(event);
           Log.i("ew","ae");
                    return true;
                }
            });

            forNewData(temp_image2,temp_desc);

            vf.addView(addImageView(R.drawable.road_rage));

    }
} 
```

我的日志显示为

```
 12-12 16:54:15.712: E/CursorWindow(744): Failed to read row 0, column 6 from a CursorWindow which has 1 rows, 6 columns.
  12-12 16:54:15.712: D/AndroidRuntime(744): Shutting down VM
  12-12 16:54:15.723: W/dalvikvm(744): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
  12-12 16:54:15.843: E/AndroidRuntime(744): FATAL EXCEPTION: main
  12-12 16:54:15.843: E/AndroidRuntime(744): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.books.bcukbook/com.books.bcukbook.DetailsActivity}: java.lang.IllegalStateException: Couldn't read row 0, col 6 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
  12-12 16:54:15.843: E/AndroidRuntime(744):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
  12-12 16:54:15.843: E/AndroidRuntime(744):    at  android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
  12-12 16:54:15.843: E/AndroidRuntime(744):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
  12-12 16:54:15.843: E/AndroidRuntime(744):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
  12-12 16:54:15.843: E/AndroidRuntime(744):    at android.os.Handler.dispatchMessage(Handler.java:99)
  12-12 16:54:15.843: E/AndroidRuntime(744):    at android.os.Looper.loop(Looper.java:137)
  12-12 16:54:15.843: E/AndroidRuntime(744):    at android.app.ActivityThread.main(ActivityThread.java:4424)
  12-12 16:54:15.843: E/AndroidRuntime(744):    at java.lang.reflect.Method.invokeNative(Native Method)
  12-12 16:54:15.843: E/AndroidRuntime(744):    at java.lang.reflect.Method.invoke(Method.java:511)
  12-12 16:54:15.843: E/AndroidRuntime(744):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
  12-12 16:54:15.843: E/AndroidRuntime(744):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
  12-12 16:54:15.843: E/AndroidRuntime(744):    at dalvik.system.NativeStart.main(Native Method)
 12-12 16:54:15.843: E/AndroidRuntime(744): Caused by: java.lang.IllegalStateException: Couldn't read row 0, col 6 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
 12-12 16:54:15.843: E/AndroidRuntime(744):     at android.database.CursorWindow.nativeGetString(Native Method)
 12-12 16:54:15.843: E/AndroidRuntime(744):     at android.database.CursorWindow.getString(CursorWindow.java:442)
 12-12 16:54:15.843: E/AndroidRuntime(744):     at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:51)
 12-12 16:54:15.843: E/AndroidRuntime(744):     at  com.books.bcukbook.DetailsActivity.getDataAndPopulate(DetailsActivity.java:477)
 12-12 16:54:15.843: E/AndroidRuntime(744):     at com.books.bcukbook.DetailsActivity.Exists(DetailsActivity.java:443)
 12-12 16:54:15.843: E/AndroidRuntime(744):     at com.books.bcukbook.DetailsActivity.onCreate(DetailsActivity.java:292)
 12-12 16:54:15.843: E/AndroidRuntime(744):     at android.app.Activity.performCreate(Activity.java:4465)
 12-12 16:54:15.843: E/AndroidRuntime(744):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
  12-12 16:54:15.843: E/AndroidRuntime(744):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:13:44.207

创建一个新数据库而不是用新的库更新。我们如何更新现有数据库的新列

# actionscript-3 - 从 XML 文件加载弹性模块

> ID：13839477
> 
> 赞同：1
> 
> 时间：2012-12-12T12:09:07.957
> 
> 标签：actionscript-3, apache-flex, actionscript

我正在尝试解析 xml 文件并在我的应用程序中动态加载 Flex 模块。但它每次只加载最后一个模块。我有一个单例类来解析和加载模块。这是课程

```
package
{
import flash.events.Event;
import flash.net.URLLoader;
import flash.net.URLRequest;

import mx.controls.Alert;
import mx.events.ModuleEvent;
import mx.modules.IModuleInfo;
import mx.modules.ModuleLoader;
import mx.modules.ModuleManager;

public class VappModuleManager
{

    private static var _instance:VappModuleManager;
    private static const MODULE_PATH:String="./com/emc/vapp/"; 
    private static const MANIFEST_PATH:String="module-manifest.xml";
    private var _module:IModuleInfo;
    private var _handler:Function;
    private var loader:URLLoader; 
    public function VappModuleManager(object:SingletonEnforcer)
    {

    }

    public function set handler(handler:Function):void
    {
        _handler=handler;
    }

    public static function get instance():VappModuleManager
    {
        if(_instance==null)
        {
            _instance=new VappModuleManager(new SingletonEnforcer());               
        }

        return _instance;
    }

    public function load():void
    {
        loader = new URLLoader();
        loader.addEventListener(Event.COMPLETE, xmlLoaded);
        loader.load(new URLRequest(MANIFEST_PATH));
    }

    private function xmlLoaded(event:Event):void
    {
        Alert.show("Event Completed");
        var manifest:XML=new XML(event.target.data);
        Alert.show(manifest.module.length());

        for (var index:int=0;index<manifest.module.length();index++)
        {
            Alert.show(MODULE_PATH+manifest.module[index].@name);
            _module=ModuleManager.getModule(MODULE_PATH+manifest.module[index].@name);
            _module.addEventListener(ModuleEvent.READY,_handler);
            _module.load();
        }
    }

}
}
internal class SingletonEnforcer    {} 
```

我使用上面的类如下。

```
moduleManager=VappModuleManager.instance;

moduleManager.handler=myhandler;

moduleManager.load(); 
```

我知道问题出在变量“_module”的事件监听器上，但不知道如何解决。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:51:50.910

调用`IModuleInfo.load`是异步的，因此您的`for`循环在任何模块加载之前已经完全运行。此外，每次循环迭代时，您的类级别`_module`属性都会被一个新实例覆盖。`Module`

我建议通过等待`READY`事件并仅在下一个模块触发时才开始加载下一个模块来按顺序加载每个模块。当所有模块都被加载而不是执行回调函数时，我也会触发一个事件，因为这会给你更多的灵活性（例如，多个对象可以监听一个事件）。

以下内容未经测试，但应该给您一个想法：

```
package
{
    import flash.events.Event;
    import flash.net.URLLoader;
    import flash.net.URLRequest;

    import mx.controls.Alert;
    import mx.events.ModuleEvent;
    import mx.modules.IModuleInfo;
    import mx.modules.ModuleLoader;
    import mx.modules.ModuleManager;

    public class VappModuleManager
    {

        private static var _instance:VappModuleManager;

        private static const MODULE_PATH:String="./com/emc/vapp/"; 
        private static const MANIFEST_PATH:String="module-manifest.xml";

        private var loader:URLLoader; 
        private var manifest:XML; 
        private var loadCount:int = 0; // track loaded modules

        public function VappModuleManager(object:SingletonEnforcer)
        {

        }

        public static function get instance():VappModuleManager
        {
            if(_instance==null)
            {
                _instance=new VappModuleManager(new SingletonEnforcer());               
            }

            return _instance;
        }

        public function load():void
        {
            loader = new URLLoader();
            loader.addEventListener(Event.COMPLETE, xmlLoaded);
            loader.load(new URLRequest(MANIFEST_PATH));
        }

        private function xmlLoaded(event:Event):void
        {
            manifest =new XML(event.target.data);

            // load the first module
            loadModule();
        }

        private function loadModule() {
            // Use a locally scoped variable to avoid writing over the previous instance each time.
            // You could push these onto an array if you need to be able to access them later
            var module:IModuleInfo = ModuleManager.getModule(MODULE_PATH+manifest.module[loadCount].@name);
            module.addEventListener(ModuleEvent.READY, moduleReadyHandler);
            module.load();
        }

        private function moduleReadyHandler(event:ModuleEvent) {
            // Remove the event listener on the loaded module
            IModuleInfo(event.target).removeEventListener(ModuleEvent.READY, moduleReadyHandler);

            loadCount ++;

            // Are there still modules in the manifest to load?            
            if (loadCount < manifest.module.length()) {
                // Yes... load the next module
                loadModule();
            } else {
                // No... we're all finished so dispatch an event to let subscribers know
                dispatchEvent(new Event("complete"));
            }
        }
    }
} 
```

# c# - 没有第三方组件的多行 ListView

> ID：13839479
> 
> 赞同：0
> 
> 时间：2012-12-12T12:09:14.753
> 
> 标签：c#, .net, listview

有没有办法增强 .NET ListView 控件以显示两个行项目？我无法使用第三方库。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:26:24.800

没有任何方法可以增强列表视图控件的内置功能。

您是否考虑过创建“用户控件”？这肯定会让您构想自己的列表视图，允许多行。

问候

# visual-studio-2010 - 在 VS2010 中使用 Add as link 在项目之间共享文件

> ID：13839481
> 
> 赞同：2
> 
> 时间：2012-12-12T12:09:22.543
> 
> 标签：visual-studio-2010

我正在尝试在 Visual Web Developer 2010 Express 中的多个项目之间共享文件，这样我就可以重用一些功能，而不必管理两个不同版本的代码。

我尝试将我的第一个项目中的 css 文件添加到第二个项目中：添加现有 - 添加为链接。到目前为止一切顺利，但是当我在我的母版页中包含 css 文件时：

```
<link href="../../../Konnektor/Konnektor/WebRole1/StyleSheets/CSS_Backoffice.css" rel="stylesheet" type="text/css" /> 
```

它在浏览器中不起作用，因为它无法找到资源，因为它正在搜索

```
http://127.0.0.1:81/Konnektor/Konnektor/WebRole1/StyleSheets/CSS_Backoffice.css 
```

最好（更好）的方法是什么？另外我认为这种技术在 Azure 上部署时会起作用，因为链接文件将是包的一部分？

多谢你们

# c# - 从呼叫目的地生成的异常

> ID：13839482
> 
> 赞同：-1
> 
> 时间：2012-12-12T12:09:39.017
> 
> 标签：c#, reflection.emit

我写了这段代码：

```
 AssemblyName assemblyName = new AssemblyName("SamAsm");
    AssemblyBuilder assemblyBuilder =      Thread.GetDomain().DefineDynamicAssembly(assemblyName, AssemblyBuilderAccess.Run);
    TypeBuilder typeBuilder = assemblyBuilder.DefineDynamicModule("SamAsm.exe").DefineType("SamAsmType", TypeAttributes.Public);
    MethodBuilder methodBuilder1 = typeBuilder.DefineMethod("Main", MethodAttributes.Static | MethodAttributes.Public, typeof(void), new Type[] { typeof(string) });
    ILGenerator gen = methodBuilder1.GetILGenerator();
    FieldInfo field1 = typeof(Form1).GetField("TextBox1", BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);

    MethodInfo method2 = typeof(Control).GetProperty("Text", BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic).GetGetMethod();
    MethodInfo method3 = typeof(String).GetMethod(
        "op_Equality",
        BindingFlags.Static | BindingFlags.Public | BindingFlags.NonPublic,
        null,
        new Type[]
        {
            typeof(String),
            typeof(String)
        },
        null
    );
    MethodInfo method4 = typeof(MessageBox).GetMethod(
        "Show",
        BindingFlags.Static | BindingFlags.Public | BindingFlags.NonPublic,
        null,
        new Type[]
        {
            typeof(String)
        },
        null
    );

    LocalBuilder a = gen.DeclareLocal(typeof(Boolean));

    System.Reflection.Emit.Label label42 = gen.DefineLabel();

    gen.Emit(OpCodes.Nop);
    gen.Emit(OpCodes.Ldarg_0);
    gen.Emit(OpCodes.Ldfld, field1);
    gen.Emit(OpCodes.Callvirt, method2);
    gen.Emit(OpCodes.Ldstr, "HI");
    gen.Emit(OpCodes.Call, method3);
    gen.Emit(OpCodes.Ldc_I4_0);
    gen.Emit(OpCodes.Ceq);
    gen.Emit(OpCodes.Stloc_0);
    gen.Emit(OpCodes.Ldloc_0);
    gen.Emit(OpCodes.Brtrue_S, label42);
    gen.Emit(OpCodes.Nop);
    gen.Emit(OpCodes.Ldstr, "You cracked me");
    gen.Emit(OpCodes.Call, method4);
    gen.Emit(OpCodes.Pop);
    gen.Emit(OpCodes.Nop);
    gen.MarkLabel(label42);
    gen.Emit(OpCodes.Ret);

    typeBuilder.CreateType().GetMethod("Main").Invoke(null, new string[] { null });
    assemblyBuilder.SetEntryPoint(methodBuilder1, PEFileKinds.WindowApplication);} 
```

当我运行它停止

```
typeBuilder.CreateType().GetMethod("Main").Invoke(null, new string[] { null }); 
```

出现此错误：

> 从呼叫目的地生成的异常。

我检查了发出的 IL 代码，我认为没问题。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:19:22.007

一方面，您似乎在声明您的方法在应该采用 a 时采用字符​​串参数`Form1`（基于您对 的使用`ldfld`）。

# c# - 与外部服务 ASP.NET MVC 同步

> ID：13839485
> 
> 赞同：0
> 
> 时间：2012-12-12T12:09:46.130
> 
> 标签：c#, asp.net, multithreading, asp.net-mvc-3, service

我们希望将应用程序中的数据与外部服务的数据同步。（例如会计软件。这种同步应该在每晚和客户想要的时候执行。

我知道长时间运行的线程不属于 Web 应用程序，这种同步应该在外部 Windows 服务中执行。但是这种方法的缺点是，部署/维护变得更加困难，因为应用程序也可以安装在客户的网络服务器上。

是否可以仅使用类库项目与我的解决方案完全集成这种同步，该解决方案将在 Application_Start 事件中启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:23:08.270

由于您的应用程序托管在 IIS 上，因此它由应用程序池进程维护。如果您为任务创建附加模块，它将在同一进程的上下文中运行。您必须确保此过程在半夜未使用应用程序时仍在工作，以便执行您想要的同步。您可以使用 Quartz.NET 来安排您的同步任务。

但是，我认为更好的主意是从 Windows 服务执行同步。服务应该与应用程序进行通信，例如通过使用数据库来记录其当前活动。它使您可以通过连接到此类数据库来从 Web 监视服务状态。我知道服务会迫使一些额外的管理工作，但它会更加可靠和安全。您还可以从您的 Web 应用程序添加服务启动可能性（如果池进程用户有权访问 Windows 服务）以克服（或至少最小化）与在某些故障后重新启动服务相关的管理工作。

我已经编写了这样的功能，所以只是为了让您全面了解我所说的对此类外部服务的 Web 监控的含义，请查看下面的屏幕。可以用 ajax 支持编写来实现更多的响应性（[池化机制](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)），这将方便最终用户。

![在此处输入图像描述](../Images/8ae33f76722a83933a86d058bb994fd2.png)

# sharepoint-2010 - SP2010：STS：'SecurityTokenServiceApplicationPool' - 自动启动错误

> ID：13839486
> 
> 赞同：2
> 
> 时间：2012-12-12T12:09:51.883
> 
> 标签：sharepoint-2010, sts-securitytokenservice

**我无法从中央管理创建 Web 应用程序**

需要让 FBA 网站正常工作

**如果我尝试运行 SecurityTokenServiceApplication/securitytoken.svc，则会显示以下错误。**

> 一个 ExceptionDetail，可能由 IncludeExceptionDetailInFaults=true 创建，其值为： System.InvalidOperationException：在对策略导出扩展的调用中引发了异常。
> 扩展：System.ServiceModel.Channels.TransportSecurityBindingElement 错误：安全策略导出失败。该绑定包含一个 TransportSecurityBindingElement，但没有实现 ITransportTokenAssertionProvider 的传输绑定元素。不支持此类绑定的策略导出。确保绑定中的传输绑定元素实现 ITransportTokenAssertionProvider 接口。---->
> System.InvalidOperationException：安全策略导出失败。该绑定包含一个 TransportSecurityBindingElement，但没有实现 ITransportTokenAssertionProvider 的传输绑定元素。不支持此类绑定的策略导出。确保绑定中的传输绑定元素实现 ITransportTokenAssertionProvider 接口。在 System.ServiceModel.Channels.TransportSecurityBindingElement.System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy(MetadataExporter exporter, PolicyConversionContext policyContext)
> 在 System.ServiceModel.Description.MetadataExporter.ExportPolicy(ServiceEndpoint 端点)

**在事件查看器中报告以下错误。**

> 事件 ID：2303
> 源：IIS-W3SVC-WP
> 在处理应用程序池的托管应用程序服务自动启动期间出错：“SecurityTokenServiceApplicationPool”。某些应用程序服务可能未得到正确处理。请检查分配给此应用程序池的应用程序的应用程序服务自动启动配置。数据字段包含错误代码。

已经试过了

*   .NET 框架 3.5 SP1 已安装
*   在 SecurityTokenServiceApplication 中禁用表单身份验证
*   确保提供了 SecurityTokenServiceApplication。

请任何其他解决方案。

我尝试将 web.config 更改为安全令牌服务以使用 IssuedToken 安全性。现在有了这个更改，我可以看到服务元数据。但是在事件查看器中报告了以下错误

事件 ID：8306 尝试颁发安全令牌时发生异常：从另一方收到不安全或安全错误。有关故障代码和详细信息，请参见内部 FaultException。

# android - 如何在当前活动中保存数据，以便下次在同一活动 Android 上访问它？

> ID：13839488
> 
> 赞同：0
> 
> 时间：2012-12-12T12:09:57.937
> 
> 标签：android

我有一个列表视图，其中有一些数据列表，我将其发送到单击时的其他活动

**我有意发送数据**

```
Intent i = new Intent(MainActivity.this,AppDiscription.class);
                    i.putExtra("NAME", s);
                    i.putExtra("AMT", Appname);
                    i.putExtra("COUNT", cnvert);
                    i.putExtra("SELECTEDID", selectedFromList);
                    startActivity(i); 
```

**关于接收活动：**

```
if (extras != null) {

            Appname = extras.getString("NAME");
            total = extras.getString("AMT");
            count = extras.getString("COUNT");
            selected = extras.getString("SELECTEDID");
} 
```

现在我必须将“**选定**”保存到此活动的变量中，以便我可以将它与新的“**选定**”数据进行比较，当我单击列表视图时，这些数据将与下一个意图一起出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:25:28.270

使用 ArrayList 并添加所有**选定**的字符串。并以这种方式进行比较：

```
list.get(last) == list.get(last-1); 
```

但如果您只想比较以前和新创建的值。

使用**共享偏好**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:17:49.047

你如何得到你的“额外”对象？它是来自活动意图的捆绑包，对吗？

```
 final Bundle extras = this.getIntent().getExtras(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:30:55.323

//在onCreate()里面

```
SharedPreferences  preferences = getPreferences(MODE_PRIVATE); 
SharedPreferences.Editor editor = preferences.edit(); 
```

//读取上次保存的selectedID

```
lastSavedSelected = preferences.getString("selectedID", "defaultID"); 
```

//保存新的selectedID

```
editor.putString("selectedID", selected); 
editor.commit(); 
```

# domain-driven-design - 我们对 DDD 中的域模型中使用的这些类型的对象有何要求？

> ID：13839491
> 
> 赞同：0
> 
> 时间：2012-12-12T12:10:08.477
> 
> 标签：domain-driven-design, cqrs, domain-model, aggregateroot, value-objects

我试图找到这个命名问题的解决方案，但我在网络上的任何地方都找不到类似的用法。可能是我们在域模型中有一个设计流程，或者我们根本没有为所谓的“ValueObjects”使用适当的名称。

请阅读下文..

我们使用具有 CQRS 模式的领域驱动设计。下面是域模型的设计方式。

![在此处输入图像描述](../Images/88d9a0b392c8b783994cb25d7636cc79.png)

*PS 不相关，但供您参考，我们的应用程序使用 ASP.NET MVC 和控制器与服务层通信。DTO（数据传输对象）被传入/传出到 MVC 控制器，这不在上图中。*

问题是我们没有正确使用“ValueObject”。根据 Martin Fowler 的定义，我们的 ValueObject 不是 ValueObject 的真实表示。 [http://martinfowler.com/bliki/ValueObject.html](http://martinfowler.com/bliki/ValueObject.html)

例如，我们的 ValueObjects 有一个身份。

```
public class NoteValue 
{
    public int Id { get; set; }
    public string NoteName { get; set; }
    public string NoteNumber { get; set; }
    public DateTime NotExpiry { get; set; }
} 
```

这些值对象只是在命令、聚合根和域实体之间传送数据。例如，AggregateRoot 只是基于域实体创建 ValueObjects，并将这些 ValueObjects 返回给命令层。

*以下不是完整的实现。只是一个简单的例子来展示交互*

AggregateRoot 扩展方法：

```
 private static IList<NoteValue> ToValueObject(this ICollection<Note> source)
 {
    var values = new List<NoteValue>();
    if (source != null)
         source.ForEach(i => values.Add(i.ToValueObject()));

    return values;
 } 
```

聚合根：

```
 Public IList<NoteValue> GetNotesValues()
 {
     return this._notes.ToValueObject();        
 } 
```

命令 ：

```
 var motesValues = notesAggregate.GetNotesValues(); 
```

我们正在努力为这些所谓的“ValueObjets”找到合适的名称。它们似乎也不是 DTO，而且我们希望能够与服务层中使用的 DTO 区分开来。具体来说，我们想知道可以为这些类型的对象 (ValueObjects) 调用的适当名称。任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T07:50:19.833

我不知道这是否能回答您的问题，但我可能希望为您指明正确的方向。

Dan Berg Johnsson 对价值对象进行了很好的讨论：http: [//www.viddler.com/v/6939b23](http://www.viddler.com/v/6939b23)

还可以查看 Vaughn Vernon 关于有效聚合设计的论文：http: [//dddcommunity.org/library/vernon_2011](http://dddcommunity.org/library/vernon_2011)

总而言之，DDD（尤其是在架构级别应用 CQRS 时）需要一些时间来掌握。耐心点，阅读，学习，加入 DDD/Cqrs Google 群组

# iphone - 如何从此字符串中获取 URL

> ID：13839495
> 
> 赞同：-1
> 
> 时间：2012-12-12T12:10:25.913
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我如何从以下获取网址

> [bpfb_link url='http://www.abcd.com/' title='abcd Technologies:: Home Page' image='http://www.abcd.com//images/itwall_b1.gif'] [/bpfb_link ]

上面的链接我`retrieved`从`php`方法变成了一个。`xml`我怎样才能`formatted url`从`above tag`. 我想用它`componentsseperatedBystring`来获取字符串，但格式每次都会改变。我正在执行以下操作以删除不需要的字符串

```
NSRange rangeLink = [[[arrUpdates valueForKeyPath:@"content"]objectAtIndex:intIndexPath] rangeOfString:@"bpfb_link"];
            if (rangeLink.location != NSNotFound) 
            {

            NSArray *arrNewLink=[[[arrUpdates valueForKeyPath:@"content"]objectAtIndex:intIndexPath] componentsSeparatedByString:@"["];
                NSLog(@"arrNewLink  %@",[arrNewLink objectAtIndex:0]);
                //[[arrNewLink objectAtIndex:1] componentsSeparatedByString:@"]"];

                NSArray *arrEditedLinks=[[arrNewLink objectAtIndex:1]componentsSeparatedByString:@"]"];
                 NSLog(@"arrEditedLinks  %@",[arrEditedLinks objectAtIndex:1] );
} 
```

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:11:44.487

如果你的反应是恒​​定的，那么你可以这样做

```
NSString *temp=@"[bpfb_link url='http://www.abcd.com/' title='abcd Technologies : : Home Page' image='http://www.abcd.com//images/itwall_b1.gif'] [/bpfb_link]";
    NSArray *arr=[[NSArray alloc]init];
    arr=[temp componentsSeparatedByString:@"'"];
    NSLog(@"arr %@",[arr objectAtIndex:1]); 
```

输出是——http [://www.abcd.com/](http://www.abcd.com/)

# php - 使用 javascript 禁用 Ckeditor

> ID：13839496
> 
> 赞同：1
> 
> 时间：2012-12-12T12:10:26.990
> 
> 标签：php, javascript, ckeditor

我的页面中有一个 ckeditor，它由以下代码创建：

```
$ckeditor = new CKEditor();
$ckeditor->basePath  = 'ckeditor/' ;
CKFinder::SetupCKEditor( $ckeditor, 'ckfinder/' ) ;
$config['height'] = '300';
$config['width'] = '700';
$initialValue = $initial['content'];
$ckeditor->editor('content', $initialValue, $config); 
```

我想根据在同一页面中选择框的选择禁用此 ckeditor。

你们有什么线索吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:23:13.310

在这里，*只需复制和粘贴：* **版本 3.6 或更高版本**

```
<html>
<head>
<script type="text/javascript" src="ckeditor/ckeditor.js"></script>
<script type="text/javascript">
var editor;
// The instanceReady event is fired, when an instance of CKEditor has finished
// its initialization.
CKEDITOR.on( 'instanceReady', function( ev ) {
    editor = ev.editor;

    // Show this "on" button.
    document.getElementById( 'readOnlyOn' ).style.display = '';

    // Event fired when the readOnly property changes.
    editor.on( 'readOnly', function() {
        document.getElementById( 'readOnlyOn' ).style.display = this.readOnly ? 'none' : '';
        document.getElementById( 'readOnlyOff' ).style.display = this.readOnly ? '' : 'none';
    });
});

function toggleReadOnly( isReadOnly ) {
    // Change the read-only state of the editor.
    // http://docs.ckeditor.com/#!/api/CKEDITOR.editor-method-setReadOnly
    editor.setReadOnly( isReadOnly );
}
</script>
</head>
<body>
<p>
    <textarea class="ckeditor" id="editor1" name="editor1"></textarea>
</p>
<p>
    <input id="readOnlyOn" onclick="toggleReadOnly();" type="button" value="Make it read-only" style="display:none">
    <input id="readOnlyOff" onclick="toggleReadOnly( false );" type="button" value="Make it editable again" style="display:none">
</p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:41:32.863

假设您在代码之后包含了 jQuery 适配器，应该将其设为只读。如果尚未包含，您可以从示例中获取 jQuery 适配器。

```
<div class="wrapper">
    <form id="myfrm" name="myfrm" class="myfrm" action="" method="post">
        <textarea id="myeditor" name="myeditor"></textarea>
        <input type="submit" id="submit" name="submit" value="Submit" />
    </form>
</div>​ 
```

和js

```
$(document).ready(function(e) {
    var myeditor = $('#myeditor');
    myeditor.ckeditor();
    myeditor.ckeditorGet().config.resize_enabled = false;
    myeditor.ckeditorGet().config.height = 200;
    myeditor.ckeditorGet().config.readOnly = true;
}); 
```

要根据您对选择框的选择启用或禁用 ckeditor，您必须像这样进行更改事件

```
$(document).ready(function(){
    //put ckeditor initialization (the above) here.
    $('#myselect').change(function(){
         var x = $(this);
         if(x.val()=='enable'){
             myeditor.removeAttr('disabled');           
         }else if(x.val()=='disable'){
             myeditor.attr('disabled','disabled');            
         }
         myeditor.ckeditorGet().destroy();
         myeditor.ckeditor();
    });
}); 
```

我们上面所做的是将原始元素设置为具有属性`disabled="disabled"`并在销毁当前实例后重新加载 ckeditor。检查 JSFiddle 示例 2。

[JSFiddle 示例](http://jsfiddle.net/lonewolfs/dpWVq/)

[JSFiddle 示例 2 反映 OP 的查询](http://jsfiddle.net/lonewolfs/C5Ex4/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:12:42.893

前几天我做了这个，你想`.setReadOnly (true)`在 CKEDITOR 实例上使用，然后用`.setReadOnly (false)`它来重新启用它。

# arrays - VHDL - 移动字节数组

> ID：13839497
> 
> 赞同：0
> 
> 时间：2012-12-12T12:10:37.767
> 
> 标签：arrays, scroll, byte, vhdl, shift

我在使用移位器模块时遇到了一些问题，该模块将移动由字节组成的数组的索引。

移位器.vhd：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use work.mypackage2.all; -- contains the type reg array

entity shifter is
    generic ( REGSIZE  : integer := 8);
    port(clk      : in  std_logic;
            Scan_Dav : in  std_logic;
            Data_in  : in  std_logic_vector(7 downto 0);
            Data_out : out reg_array );
end shifter;

architecture bhv of shifter is

    signal shift_reg : reg_array;
begin
    process (clk) begin
        if rising_edge(clk) then
                if Scan_Dav = '1' then
                    shift_reg <= shift_reg(shift_reg'high-1 downto 0) & Data_in;
                end if;
          end if;
    end process;
     Data_out <= shift_reg;
end bhv; 
```

这是一个移位器，它将保存来自键盘的扫描码，输出数组将用于滚动七段显示器上的文本。我的包包含用于定义移位器输出的类型声明：

mypackage2.vhd：

```
--  Package File Template
--
--  Purpose: This package defines supplemental types, subtypes, 
--       constants, and functions 

library IEEE;
use IEEE.STD_LOGIC_1164.all;

package mypackage2 is

   subtype reg is std_logic_vector(7 downto 0); -- a byte
    type reg_array is array (7 downto 0) of reg; -- array of bytes

end mypackage2;

package body mypackage2 is

end mypackage2; 
```

不过，我遇到了问题。此代码的 RTL 示意图如下所示：

![移位器的 RTL：](../Images/1eecbc85e25133cb4fdb5d18b9b5ca39.png)

我很困惑为什么会发生这种情况，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:11:39.527

您的“my_shifter”本身似乎很好。Xilinx 工具成功编译它，RTL 查看器成功显示它，包中的自定义信号等等。

然而，将“my_shifter”嵌入到您的 7 段控制器的顶层设计中，我设法重现了让您感到困惑的“错误”的症状 - 它不会显示在顶层图表的 RTL 视图中。

注意“综合报告”中的警告，我发现其他一些信号没有连接，让综合工具优化掉整个移位器！通过查看摘要中生成的触发器数量来确认

修复那些丢失的连接，果然 Shifter 出现，其所有端口都正确连接在 RTL 视图中。

所以我撤回了我的建议，即 RTL 查看器可能有问题（在这方面！），但加强我的建议，即这是解决基本设计问题的一种非常糟糕的方法。

这就是模拟的用途。

否则，您的工作量会比必要的要大得多，并且会被错误地引导到问题所在。

# arrays - 连接表与外键数组？

> ID：13839498
> 
> 赞同：25
> 
> 时间：2012-12-12T12:10:38.313
> 
> 标签：arrays, postgresql, many-to-many, junction-table

我正在建模多对多关系，其中大部分时间仅从一侧访问该关系。它更像是一个层次结构，它是自上而下访问的，而不是相反。

**调查**有并且属于许多**问题**有并且属于许多**答案**。

这两种关系必须是多对多的，因为同一个问题可以在不同的调查中重复使用，并且在许多问题中的答案相同。这是一个要求。

标准 M2M 实现将使用两个联结表，`surveys_questions`并且`questions_answers`. 相反，我正在考虑使用 PostgreSQL 的整数数组存储`question_ids`在 Survey 和`answer_ids`Question 中。

我们可以利用 ANY 运算符来查询与外键数组匹配的所有行。

我们将如何使用 SQL 查询所有带有问题和问题答案的调查？

我们如何将返回的行的顺序与外键数组匹配？IE。使用 question_ids = [1,2,3] 保证返回顺序为 1、2、3 的问题行。

与联结表相比，这在性能方面如何（假设有适当的索引，无论它们是什么）？

你会建议这个吗？是否有一些关于像这样建模 M2M 的资源？

**更新**

有人提议在 PostgreSQL 9.3 中添加数组外键的参照完整性，但没有被包括在内： http: [//blog.2ndquadrant.com/postgresql-9-3-development-array-element-foreign-keys/](http://blog.2ndquadrant.com/postgresql-9-3-development-array-element-foreign-keys/)

关于使用具有数组元素顺序的数组类型的外键数组 PostgreSQL JOIN 维护顺序的问题[，如何实现？](https://stackoverflow.com/questions/2486725/postgresql-join-with-array-type-with-array-elements-order-how-to-implement)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T13:09:18.100

使用联结表方法。数组方法不够标准，您必须询问它的工作量，而另一种是完全标准的。

# winapi - 有没有办法查看窗口的 sendMessage 队列？

> ID：13839511
> 
> 赞同：0
> 
> 时间：2012-12-12T12:11:13.190
> 
> 标签：winapi, sendmessage

出于调试目的，我希望查看窗口的队列，我尝试过使用 Spy++ 和[Window Detective](http://windowdetective.sourceforge.net/)，但消息在处理后不会被删除。

我只需要查看队列，而不是已经处理的呼叫。有没有替代软件可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:11:20.120

不，没有用于查看待处理消息队列的 API。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-22T14:14:07.053

使用 Microsoft Spy++ 并在此处的窗口/对话框中选择“日志消息”。

# c - 访谈：函数指针 vs switch case

> ID：13839512
> 
> 赞同：7
> 
> 时间：2012-12-12T12:11:16.007
> 
> 标签：c, switch-statement, function-pointers, state-machine

在我的面试中，我被要求为一个有 100 个状态的系统实现一个状态机，每个状态又包含 100 个事件，我回答了以下 3 种方法：

*   如果别的
*   开关盒
*   函数指针

if-else 显然不适合这样的状态机，因此主要比较的是 switch-case 与函数指针之间的比较，这是根据我的理解进行的比较：

*   速度方面两者几乎相同。
*   Switch-case 不像函数指针那样模块化
*   函数指针有更多的内存开销。

有人可以确认上述理解是否正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:20:40.247

函数指针方法可能有一个变体：一个包含函数指针以及其他信息的结构。所以你可以让一个函数处理几种情况。

除此之外，我认为你是对的。另外，我会考虑值得考虑的有关内存和速度的开销，但希望足够小以在最后被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:08:00.227

您可以指定有关您的状态和事件的更多详细信息。假设您的状态是连续整数。那么你也能

1.  编写一个表以包含所有状态和每个状态处理函数。接收事件时，引用此表并调用相应的处理函数。

2.  对于每个状态，编写一个包含所有事件及其事件处理函数的表。在处理状态事件时查找此表。

这2个查表的时间复杂度是O(1)，空间复杂度是O(m*n)

但是，你怎么能拥有 100 种状态的 FSM 和 100 种类型的事件呢？我建议你简化你的 FSM 设计，1~100 的数字可能是一个特定事件的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:49:05.393

我不知道你的面试官想听什么，我希望这不是太离题，但如果我正在面试某人，我会在证明自己的框架之前知道现有框架的优缺点，特别是在那个规模上.

C++ 替代品（如果您可以使用它们，感谢 glglgl 指出您似乎想要 C）将是：

Boost.MSM 虽然速度极快，但在这种规模上是不可能的。原因是编译时间、mpl::vector/list 约束以及您将拥有一个巨大的源文件。

Boost.Statecharts 可以处理 100 个状态，但每个状态 100 个事件会最大化 mpl::vector/list 约束。就个人而言，如果我有 100 个事件处于一个状态，我会尝试将它们分组并使用自定义反应，但这显然取决于应用程序。

我看不出为什么 Qt 的状态机不会扩展那么大（如果我错了，请纠正我）但它的数量级要慢一些，所以我从不使用它。

我所知道的唯一好的 C 替代方案是：

QP 在 C 和 C++ 中可用并且可以扩展那么大，具有良好的组织并且“不仅仅是一个状态机”，因为它处理事件队列、并发和内存管理等。滚动你自己的可能会产生更好的性能（取决于你的技能和你投入了多少时间），但应该注意的是，事件的内存管理可能最终需要比状态机实现更多的优化。QP 为您做到了这一点，而且做得很好。

# php - 多维数组复制 - 性能

> ID：13839515
> 
> 赞同：1
> 
> 时间：2012-12-12T12:11:33.023
> 
> 标签：php, performance, algorithm, multidimensional-array

检查多维数组是否包含 2 个或更多相等值并且只返回第一个的最佳方法是什么。

例如：我有一组人，其中包含

```
[0][firstName] = 'John';
[0][lastName]  = 'Doe';

[N][firstName] = 'Marco';
[N][lastName]  = 'Polo';

[120][firstName] = 'John';
[120][lastName]  = 'Doe'; 
```

应该检测到索引 120 是重复的并将其删除。

我正在寻找最佳性能，我不想在数组上循环并每次检查我是否有值。

有什么更快的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T12:16:01.560

这是[**元素差异性问题**](http://en.wikipedia.org/wiki/Element_distinctness_problem)，基本上是`O(NlogN)`通过排序和迭代（排序后，重复项将彼此相邻 - 很容易检测到它们）

[但是，通过在迭代时将所有元素存储到哈希表](http://en.wikipedia.org/wiki/Hash_table)并在元素已经存在时中断，它也可以`O(N)` *平均*完成并`O(N)`增加空间。

如果您以后需要它，您可能还想存储每个元素的原始索引（并且不要使用索引作为键）。

**伪代码：**

```
map <- empty hash map
for each element e with idx i in list (in ascending order of i):
     if (map.contains(e)):
           e is a dupe, the first element is in index map.get(e)        
     else:    
           map.add(e,i) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:12:37.453

你可以试试

```
// Generate Possible name with duplicate
$names = array("John","Doe","Polo","Marco","Smith");
$array = array();

for($i = 0; $i < 20; $i ++) {
    $key = mt_rand(0, 1000);
    $array[$key]["firstName"] = $names[array_rand($names)];
    $array[$key]["lastName"] = $names[array_rand($names)];
}

// Start Sorting process
ksort($array);

// Start Storage
$data = $hash = array();

// Loop and porpulate new array
foreach ( $array as $k => $v ) {
    $h = sha1($v['firstName'] . $v["lastName"]);
    isset($hash[$h]) or $data[$k] = $v and $hash[$h] = 1;
}

var_dump($data); 
```

# ruby - 数字填充作为字符串消息的一部分

> ID：13839519
> 
> 赞同：1
> 
> 时间：2012-12-12T12:11:40.557
> 
> 标签：ruby

我想要一个像`"The time is #{hours}:#{minutes}"`, 这样的字符串，`hours`并且`minutes`总是用零填充（2位数字）。请问我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:14:50.630

[请参见此处](http://www.ruby-doc.org/core-1.9.3/String.html)的 ljust、rjust 和 center 。

示例是：

`"3".rjust(2, "0") => "03"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:43:25.980

sprintf 通常很有用。

```
1.9.2-p320 :087 > hour = 1
 => 1 
1.9.2-p320 :088 > min = 2
 => 2 
1.9.2-p320 :092 > "The time is #{sprintf("%02d:%02d", hour, min)}"
 => "The time is 01:02" 
1.9.2-p320 :093 > 

1.9.2-p320 :093 > str1 = 'abc'
1.9.2-p320 :094 > str2 = 'abcdef'
1.9.2-p320 :100 > [str1, str2].each {|e| puts "right align #{sprintf("%6s", e)}"}
right align    abc
right align abcdef 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:13:32.330

您可以使用时间格式：[Time#strftime](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)

```
t1 = Time.now
t2 = Time.new(2012, 12, 12)
t1.strftime "The time is %H:%M" # => "The time is 16:18"
t2.strftime "The time is %H:%M" # => "The time is 00:00" 
```

或者，您可以使用['%' 格式运算符来使用字符串格式](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-25)

```
t1 = Time.now
t2 = Time.new(2012, 12, 12)
"The time is %02d:%02d" % [t1.hour, t1.min] # => "The time is 16:18"
"The time is %02d:%02d" % [t2.hour, t2.min] # => "The time is 00:00" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T12:14:58.493

对字符串使用格式运算符：`%`运算符

```
str = "The time is %02d:%02d" %  [ hours, minutes ] 
```

[参考](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-25)

格式字符串与 C 函数 printf 中的相同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T12:15:21.973

或类似的东西：

```
1.9.3-p194 :003 > "The time is %02d:%02d" % [4, 23]
 => "The time is 04:23" 
```

# mysql - PHP 中的 MySQL 查询优化

> ID：13839521
> 
> 赞同：0
> 
> 时间：2012-12-12T12:11:46.033
> 
> 标签：mysql, pdo

我有三个表，它们都可能有数百万行。我有一个动作表和一个反应表，其中包含与动作相关的反应。然后有一个与反应相关的表情表。我想对这个特定查询做的是为某个动作找到点击次数最多的表情。对我来说困难在于查询包括三个表而不是只有两个。

表操作（过帐）：

```
PKY id
... 
```

表反应（评论、表情等）：

```
PKY id
INT action_id (related to actions table)
... 
```

表表情：

```
PKY id
INT react_id (related to reactions table)
INT emote_id (related to a hardcoded list of available emotes)
... 
```

我想出的 SQL 查询基本上似乎可以工作，但如果表包含数百万行，则需要 12 秒。SQL 查询如下所示：

```
select emote_id, count(*) as cnt from emotes
where react_id in (
   select id from reactions where action_id=2942715
)
group by emote_id order by cnt desc limit 1 
```

MySQL解释说：

```
id  select_type         table       type            possible_keys       key         key_len     ref     rows    Extra
1   PRIMARY             emotes      index           NULL                react_id_2  21          NULL    4358594 Using where; Using index; Using temporary; Using f...
2   DEPENDENT SUBQUERY  reactions   unique_subquery PRIMARY,action_id   PRIMARY     8           func    1       Using where 
```

...我很感激任何改进查询的提示。请注意，我不会在每次构建动作列表时调用此查询，但仅在添加表情时调用。因此，如果查询可能需要 0.5 秒才能完成，这没有问题。但是12太长了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:17:26.850

那这个呢

```
SELECT
    emote_id,
    count(*) as cnt
FROM emotes a
INNER JOIN reactions r
    ON r.id = a.react_id
WHERE action_id = 2942715
GROUP BY emote_id
ORDER BY cnt DESC
LIMIT 1 
```

# php - 我无法让我传递给 myFunction 语句的变量在复制命令中工作

> ID：13839523
> 
> 赞同：-3
> 
> 时间：2012-12-12T12:11:47.263
> 
> 标签：php, html, function, variables, copy

我将变量从按钮传递到 myFunction。我可以创建一个显示正确信息的警报框，但是当我在复制命令中使用这些变量时，它什么也不做。我的目标是在目录中显示图像。用户可以单击包含该图像的按钮，然后将图像文件从 /storage/ 目录复制到 /attach/ 目录。任何人都可以帮我解决这个问题....谢谢

我创建的完整文件是：

```
<!DOCTYPE html>
<html>
<head>
<title>Mark Nutt</title>
<script>
 function myFunction(greeting,greeting2,source,destination)
 {
<?php
    echo copy('"+source+"','"+destination+"');
?> 
    alert("copy('"+source+"','"+destination+"')");
    alert(greeting2 +' attached to email!');
    }
 </script>
</head>
<body>
<a href="#" onclick="MyWindow=window.open('http://www.davidsdomaindesign.com/marknutt/emails/emails.php','_self'); return true;"><font size="2" color="white"><input type="button" value="I'm Done" /></font></a><br />
<?php
 $files = glob("/home/davidsdo/public_html/marknutt/photos/storage/*.jpg");
 asort($files);
 for ($i=0; $i<count($files); $i++)
 {$num = $files[$i];
  $file = substr($num,51);
?>
<button onclick="myFunction('<?php echo $file ?>','<?php echo substr_replace($file,"",-4); ?>','<?php echo $source='/home/davidsdo/public_html/marknutt/photos/storage/'; echo $file; ?>','<?php echo $destination='/home/davidsdo/public_html/marknutt/emails/attach/'; echo $file; ?>')" >
<input type="button" value="<?php echo substr_replace($file,"",-4); ?>" /><br /><img src="http://www.davidsdomaindesign.com/marknutt/photos/storage/<?php echo $file ?>" alt="<?php echo $file ?>" width="125" height="125">
</button>
<?php
 }
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:41:24.590

您不能在 php 代码上使用 javascript 变量。您应该使用 php 函数来执行此操作。使用此代码：

```
<!DOCTYPE html>
<html>
<head>
<title>Mark Nutt</title>
<script>
function myFunction(greeting,greeting2,source,destination)
{
window.location = "?greeting="+greeting+"&greeting2="+greeting2+"&source="+source+"&destination="+destination;
}
</script>

<?php
////////////////////////////////////
if(isset($_GET['greeting'])){
   if(copy($_GET['source'],$_GET['destination'])){
      echo '<script language="javascript">';
      echo "alert('copy({$_GET['source']},{$_GET['destination']})');";
      echo "alert('{$_GET['greeting2']} attached to email!');";
      echo'</script>';
   }

}
?>
</head>
<body>
<a href="#" onclick="MyWindow=window.open('http://www.davidsdomaindesign.com/marknutt/emails/emails.php','_self'); return true;"><font size="2" color="white"><input type="button" value="I'm Done" /></font></a><br />
<?php
 $files = glob("/home/davidsdo/public_html/marknutt/photos/storage/*.jpg");
 asort($files);
 for ($i=0; $i<count($files); $i++)
 {$num = $files[$i];
  $file = substr($num,51);
?>
<button onclick="myFunction('<?php echo $file ?>','<?php echo substr_replace($file,"",-4); ?>','<?php echo $source='/home/davidsdo/public_html/marknutt/photos/storage/'; echo $file; ?>','<?php echo $destination='/home/davidsdo/public_html/marknutt/emails/attach/'; echo $file; ?>')" >
<input type="button" value="<?php echo substr_replace($file,"",-4); ?>" /><br /><img src="http://www.davidsdomaindesign.com/marknutt/photos/storage/<?php echo $file ?>" alt="<?php echo $file ?>" width="125" height="125">
</button>
<?php
 }
?>
</body>
</html> 
```

要删除你可以使用这个：

```
<script>
function delFunction(source)
{
    window.location = "?delete="+source;
}
</script>
<?php
if(isset($_GET['delete']){
    unlink($_GET['source']);
}
?> 
```

但我更喜欢将文件移动到其他目录而不是删除它（记录想要删除文件的人）或使用 db 来管理图像。

# sql-server-2008 - 在不同项目中使用共享数据集

> ID：13839528
> 
> 赞同：1
> 
> 时间：2012-12-12T12:12:09.057
> 
> 标签：sql-server-2008, reporting-services, dataset, ssrs-2008

事实：Visual Studio 2010、SQL Server 2008 R2、SQL Server 2008 R2 报告服务

我有一个由多个项目组成的解决方案。这是因为无法创建嵌套部署文件夹。

所以我的解决方案如下所示：

*   学生 -> 报告部署到学生
*   StudentGraduated -> 报告部署到 Student/Graduate
*   StudentsGraduatedWithHonours _> 报告部署到 Student/Graduated/WithHonours
*   StudentsBlueEyes -> 报告部署到 Student/BlueEyes
*   StudentsGreenEyes -> 报告部署到 Student/GreenEyes

所有报告都应使用一个数据集，并带有适当的过滤器。

所以我设置了部署，以便每个项目都在 /Student/DataSets 中部署其数据集。我确保每个项目都有一个相同的数据集，以便在部署时它们都使用相同的数据集。

但显然这不起作用。只有最后部署的报表可以使用数据集:(

*   如果我将使用数据集的所有报告放在同一个项目中，它可以工作，但我必须手动将所有报告移动到它们的正确位置。
*   设置所有项目以在他们自己的 DataSet 文件夹中部署他们的报告也可以，但是我周围有很多相同的 DataSet，这有点超出目的。
*   部署后使用reportmanager手动重置数据集是可行的，但是当您在每个报告中平均有7个数据集和19个报告时，这是一个相当乏味的练习......

这是已知的现象吗？是否可以让来自不同项目的报告使用相同的数据集？如果是这样，怎么做？

我真的很想知道你对此的看法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:43:05.500

我这样做的方式应该[根据这个链接](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/71e98344-8b35-4ac9-abbf-d2058c2c820d?prof=required)是正确的方式。[所以我按照Charlie Liao在](http://social.msdn.microsoft.com/profile/charlie%20liao/?ws=usercard-mini)[这个链接](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/71e98344-8b35-4ac9-abbf-d2058c2c820d?prof=required)中概述的步骤重新做了它： 1\. 在您的一个项目中创建数据集 2\. 将这些作为现有项目添加到另一个项目 3\. 将 Overwrite Datasets 设置为 TRUE。

我认为这是我出错的第 2 步。我只是在每个项目中重新创建了数据集，我没有添加它们。我删除了所有项目中的所有数据集（但第一个），然后将所有数据集作为现有项目读取到所有项目中，将 Overwrite 设置为 True 并部署。

魔法！！

:)

# fluent-nhibernate - NHibernate fluent 防止孩子被更新

> ID：13839535
> 
> 赞同：3
> 
> 时间：2012-12-12T12:12:45.300
> 
> 标签：fluent-nhibernate, mapping, cascade

我拥有的应用程序使用本地化。它的构建方式是检查一个实体（遍历结构）并翻译每个标记为“翻译”的属性。

翻译存储在单独的翻译表中。

这一切都很好，但它给我留下了一个问题，当我使用翻译更新实体时，我现在在我的“默认”值中获得翻译的值。我不希望那样。

让我试着解释得更好。

数据库：![在此处输入图像描述](../Images/fcf890f6d1685b7c4a93da7cdeaba6e3.png)

footprintlinevLue的映射：

```
public class FootprintLineValueMap : ClassMap<FootprintLineValue> {
 public FootprintLineValueMap() {
    Table("FootprintLineValue");

    Id(x => x.Id).GeneratedBy.Identity().Column("Id");
    References(x => x.FootprintLine).Column("FootprintLineId");
    References(x => x.CategoryValue).Column("CategoryValueId").Cascade.None();

  } 
```

如您所见，足迹线有多个引用 categoryValue 的值。categoryvalue 已本地化。

当我现在检索足迹时，我们的框架将把它通过我们的翻译服务，并自动翻译相应文化中 CategoryValue 的名称和描述。如果在 CategoryValueLocal 中找不到翻译，它将使用 CategoryValue 中的默认值。

但是...如果我保存足迹线，它会将翻译后的值保存回 CategoryValue （覆盖默认值）而不是忽略它。

CategoryValues 不是值对象，可以更改，因此我不能将它们设为只读。我试图将引用映射为 Cascade.None，但这似乎没有任何作用。

我希望有一种方法可以在映射中简单地标记它，这样我们就可以继续使用我们的 TranslationService 而不必找出另一种处理本地化的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:42:35.453

将属性标记为不可更新。

```
Map(x => x.Description).Not.Update(); 
```

你甚至可以定义一个约定来这样做

```
class TranslatedPropertiesConvention : AttributePropertyConvention<Translated>
{
    public void Apply(FluentNHibernate.Conventions.Instances.IPropertyInstance instance)
    {
        instance.Not.Update();
    }
} 
```

# asp.net - AppFabric Cache - 分配两个缓存集群是否合理？

> ID：13839537
> 
> 赞同：0
> 
> 时间：2012-12-12T12:12:51.370
> 
> 标签：asp.net, .net, memcached, appfabric

[我对 AppFabric Cache 的第一印象是，它本质上是一个与memcached](http://en.wikipedia.org/wiki/Memcached)相同的分布式哈希表。这种缓存的典型使用模式是不能保证您的数据将在缓存中（旧条目被逐出以为新条目腾出空间），但通常有足够的 RAM。

另一方面，MS 提供了一个[Web 会话状态提供程序](http://msdn.microsoft.com/en-us/library/hh361709%28v=azure.10%29.aspx)，它将会话数据存储在 AppFabric 缓存中。这似乎是一种完全不同的使用模式，因为我们现在要求缓存的项目永远不会因为内存压力而被驱逐。为了实现这一点，MS 提供了一种高可用性模式，可以保留所有数据的冗余副本，此外可以禁用驱逐，这反过来又需要我们分配足够的 RAM 以确保缓存永远不会达到容量。

应用程序似乎很可能会从使用两种类型/模式的缓存中受益，但据我所知，AppFabric RAM 不能*在*集群或主机中被隔离，因此 Web 会话状态可能（并且通常会）在那个案子。我能看到的唯一解决方案是运行两个 AppFabric Cache 集群，每个模式一个。

以上是否很好地代表了这种情况，还是我错过了一些解决这种情况的配置设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:23:07.150

在 appfabric 中存储会话不是一个好主意，尝试这样做时遇到了很多问题（例如由于内存压力数据丢失，多个用户访问缓存以放置数据可能导致数据丢失等），现在开始使用 inProc/ SqlServer 会话状态使用。

# c++ - 什么是有效的检查：等于或不等于？

> ID：13839540
> 
> 赞同：7
> 
> 时间：2012-12-12T12:13:01.740
> 
> 标签：c++, c, if-statement

我想知道，如果我们`if-else`有条件，那么检查计算效率更高的是：使用*等于*运算符还是*不等于*运算符？有什么区别吗？

例如，以下哪一项在计算上是有效的，以下两种情况都会做同样的事情，但哪一种更好（如果有任何区别）？

**情况1：**

```
if (a == x)
{
    // execute Set1 of statements
}
else
{
    // execute Set2 of statements
} 
```

**案例二：**

```
if (a != x)
{
    // execute Set2 of statements
}
else
{
    // execute Set1 of statements
} 
```

这里的假设大部分时间（比如 90% 的情况）`a`将等于`x`. `a`两者`x`都是无符号整数类型。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T12:16:35.020

通常你应该考虑的是；编写此代码的最简单和最清晰的方法是什么？恕我直言，第一个肯定是最简单的（不需要！）

在性能方面没有差异，因为代码可能编译为相同的东西。（当然应该在 JIT for Java 中）

对于 Java，JIT 可以优化代码，因此分支预测首选最常见的分支。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-12T12:15:26.533

通常，您使用哪个运算符对性能无关紧要。但是，对于分支，建议首先出现 if 语句的最可能结果。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-12T12:15:36.260

在这个简单的情况下，它没有任何区别。（假设`a`和`x`是基本类型）如果它们是重载的类类型，`operator ==`或者`operator !=`它们可能不同，但我不会担心。

对于后续循环：

```
if ( c1 )   { }
else if ( c2 ) { }
else ... 
```

应将最可能的条件放在首位，以防止对其他条件进行无用的评估。（同样，这里不适用，因为你只有一个`else`）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-12T13:24:26.660

GCC 提供了一种方法来通知编译器表达式的可能结果：

```
if (__builtin_expect(expression, 1))
… 
```

这个内置的计算结果为`expression`，但它通知编译器可能的结果是 1（`true`对于布尔值）。`expression`要使用它，您应该尽可能清楚地编写（对于人类），然后将第二个参数设置为最有可能成为结果的值。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-12T12:19:06.310

没有区别。

x86 CPU 架构有两个用于条件跳转的操作码

```
JNE (jump if not equal)
JE (jump if equal) 
```

通常它们都占用相同数量的 CPU 周期。

即使他们不这样做，您也可以期望编译器为您做这些微不足道的优化。写出最易读的内容以及使您的意图更清晰的内容，而不是担心微秒。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-12T12:29:50.657

如果您曾经设法编写一段 Java 代码，该代码可以被证明以一种方式比另一种方式更有效，那么您应该发布您的结果并针对您观察到差异的任何实现提出问题。

更重要的是，仅仅问这种问题应该是有问题的迹象：这表明您将注意力和精力集中在代码的错误方面。现实生活中的应用程序性能总是受到架构不足的影响；**从来没有**像这样的担忧。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-12T12:19:08.363

> 早期优化是万恶之源

即使对于分支预测，我认为你也不应该太在意这一点，直到真的有必要。

正如彼得所说，使用最简单的方法。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-12-12T12:35:24.403

让编译器/优化器完成它的工作。源代码应该以最易读的方式表达你的意图，这是一个普遍的经验法则（现在大多数情况下）。您正在将它写给另一个人（而不是计算机），一年后您自己或您的队友将需要以更少的努力来理解您的代码。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-12T12:19:37.907

它不应该对性能产生任何影响，但您会考虑最容易阅读的内容。然后，当您回顾您的代码或有人在查看它时，您希望它易于理解。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-12T13:10:54.137

它们之间的性能差异可以忽略不计。因此，只需考虑代码的可读性。为了可读性，我更喜欢在 If 语句中有更多代码行的那个。

```
if (a == x) { 
    // x lines of code
} else {
    // y lines of code where y < x
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-12T12:17:25.317

如果第一个条件在大多数情况下都是正确的，它有一点优势（从可读性的角度来看）。以您可以最好地阅读它们的方式编写条件。否定条件不会从速度中受益

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-12-12T12:43:14.713

大多数处理器使用电子门进行等式/不等式检查，这意味着一次检查所有位。因此它应该没有什么区别，但是您想要真正优化您的代码，最好自己进行基准测试并检查结果。
如果你想知道这样优化是否值得，想象一下你会对屏幕上的每个像素或类似的场景进行多次检查。恕我直言，优化总是值得的，即使只是为了教自己好习惯；）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-12-12T12:51:00.127

只有您一开始使用的非否定方法似乎是最好的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-12-12T12:54:43.760

唯一确定的方法是编写两个版本并测量它们的性能。如果差异只有一个百分比左右，请使用更清楚地传达意图的版本。

您*不太*可能看到两者之间的显着差异。

# java - 在java中使用枚举有什么好处？

> ID：13839542
> 
> 赞同：5
> 
> 时间：2012-12-12T12:13:07.170
> 
> 标签：java, enums

我正在浏览Java中的枚举。枚举可以做的事情可以通过集合或字符串数​​组或用户定义的类型来实现。在 Java 5 中引入枚举的主要目的是什么？

谢谢， Sehensaa

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T12:15:11.917

优点 -

*   常量声明集
*   限制方法中的输入参数
*   可用于开关盒

它用于*由一组固定常量组成的字段*。

例子是`Thread.State`

```
public enum State {
    NEW,
    RUNNABLE,
    WAITING,
    BLOCKED,
    ...
} 
```

或者`private enum Alignment { LEFT, RIGHT };`

`Enum`您可以使用like-限制输入参数

```
String drawCellValue (int maxCellLnghth, String cellVal, Alignment align){} 
```

这里的 align 参数可以是唯一的，`Alignment.LEFT`也`Alignment.RIGHT`可以是受限的。

`enum`带有-的开关盒示例

```
String drawCellValue (int maxCellLnghth, String cellVal, Alignment align){
    switch (align) {
    case LEFT:...
    case RIGHT: ...
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T12:15:34.713

从[理解-enums-in-java](https://stackoverflow.com/questions/1419835/understanding-enums-in-java/1419849#1419849)

1.  类型安全。您可以将函数参数、返回类型、类成员或局部变量声明为特定的 Enum 类型，编译器将强制执行类型安全；
2.  枚举基本上是类。它们可以实现接口，具有行为等等。

从[enum-in-java-advantages](https://stackoverflow.com/questions/2077634/enum-in-java-advantages)
您可以获得有效值的免费编译时检查。使用

```
public static int OPTION_ONE = 0;
public static int OPTION_TWO = 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:29:01.787

看看“类型安全的枚举模式”（例如，在 Joshua Bloch 的“Effective Java”第一版一书中）。Java“枚举”结构是这种设计模式的语言级别支持（语法糖）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T12:17:56.317

它的一个用途是作为在 Java 7 之前模拟字符串类型变量的一种手段，`switch`这是不允许的

# tdd - 使用自动化测试进行测试

> ID：13839543
> 
> 赞同：-3
> 
> 时间：2012-12-12T12:13:08.433
> 
> 标签：tdd

我正在阅读以 KentBenk 为例的 TDD 测试驱动开发。

--->压力--------$----->RunTests |
|<------------$--------|

上图表示，如果带有 $ 的箭头表示第一个节点的增加意味着第二个节点的减少。

以上是正反馈循环。你感受到的压力越大，你做的测试就越少，错误和压力就越大。

我们如何摆脱这样的循环？这里作者提到要么引入一个新元素，要么替换其中一个元素，要么改变箭头。在这种情况下，我们将用自动化测试代替测试。

以下是图表后的文字说明：

> 我只是用那个改变破坏了其他东西吗？使用自动化测试，当我开始感到压力时，我会运行测试。立即运行测试让我感觉良好，并减少了我犯的错误数量，这进一步减轻了我的压力。
> 
> “我们没有时间进行测试。发布它吧！” 第二张图不保证。如果压力水平升高到足够高，它就会崩溃。但是，通过自动化测试，您必须有机会选择您的恐惧程度。

我的问题是

1.  任何人都可以用新元素自动化测试来代表新的反馈吗？在这里，当我感到压力时，我们如何使用上图运行较少的自动化测试，那么我们如何减轻压力？

2.  作者所说的“第二张图片没有保证。如果压力水平升高到足够高，它就会崩溃。但是，通过自动化测试，你必须有机会选择你的恐惧程度。”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:15:52.870

手头没有这本书..但是从您引用的段落中。

拥有快速的自动化测试可以

*   获得快速反馈（在做出改变后的几秒钟内）——你刚刚破坏了一些曾经有用的东西吗？
*   经常运行它。理想情况下，在每一个微小的变化之后。您的测试套件越快，您的测试频繁运行的可能性就越大。

与手动测试的不同之处在于，反馈周期太长，导致您在花费一天/一周的时间测试所有内容之前进行大量更改（您不想在每个微小的更改之后损失一天/一周）。这会导致在发现缺陷时隔离更改的问题 - 更多的压力。

# java - 使用 Selenium Webdrivers 方法“browser.helperApps.neverAsk.saveToDisk”如何在单击链接时自动下载文件

> ID：13839544
> 
> 赞同：29
> 
> 时间：2012-12-12T12:13:10.953
> 
> 标签：java, selenium-webdriver

在 Java 中使用 Selenium Web 驱动程序，我试图通过单击应用程序中的链接来下载文件。

即点击链接后，下载开始时不会询问是否使用 Firefox 12 浏览器保存文件的选项。

我正在使用 browser.helperApps.neverAsk.saveToDisk 方法。

实际结果：

当我运行此代码时，文件不会自动保存，而是要求选择是否保存。我正在使用数据驱动的方法，我从 Excel 文件中获取元素。

任何人都可以帮助我吗？

下面是`browser.helperApps.neverAsk.saveToDisk`使用的代码

```
public class Driver {

    static WebDriver driver;
    public static void main(String[] args) {

        FirefoxProfile profile = new FirefoxProfile();

        profile.setPreference("browser.download.folderList", 2);
        profile.setPreference("browser.download.dir", "d:\\");
        profile.setPreference("browser.helperApps.neverAsk.saveToDisk", "application/vnd.ms-excel");

        driver = new FirefoxDriver(profile);
        driver.get("https://www.testapp.com");

                driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);
        TestRunner.run(suiteToRun());

    }
    public static Test suiteToRun(){
        TestSuite suite = new TestSuite();
        System.out.println("Login Class");
        suite.addTestSuite(LoginLogout.class);
        return suite;
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-01-14T02:45:31.117

也许内容类型`application/vnd.ms-excel`不正确。

尝试使用以下代码列出[所有内容类型：](http://www.freeformatter.com/mime-types-list.html)

```
public class Driver {
    static WebDriver driver;

    public static void main(String[] args) {
        FirefoxProfile profile = new FirefoxProfile();

        profile.setPreference("browser.download.folderList", 2);
        profile.setPreference("browser.download.dir", "d:\\");
        profile.setPreference("browser.helperApps.neverAsk.saveToDisk", "application/vnd.hzn-3d-crossword;video/3gpp;video/3gpp2;application/vnd.mseq;application/vnd.3m.post-it-notes;application/vnd.3gpp.pic-bw-large;application/vnd.3gpp.pic-bw-small;application/vnd.3gpp.pic-bw-var;application/vnd.3gp2.tcap;application/x-7z-compressed;application/x-abiword;application/x-ace-compressed;application/vnd.americandynamics.acc;application/vnd.acucobol;application/vnd.acucorp;audio/adpcm;application/x-authorware-bin;application/x-athorware-map;application/x-authorware-seg;application/vnd.adobe.air-application-installer-package+zip;application/x-shockwave-flash;application/vnd.adobe.fxp;application/pdf;application/vnd.cups-ppd;application/x-director;applicaion/vnd.adobe.xdp+xml;application/vnd.adobe.xfdf;audio/x-aac;application/vnd.ahead.space;application/vnd.airzip.filesecure.azf;application/vnd.airzip.filesecure.azs;application/vnd.amazon.ebook;application/vnd.amiga.ami;applicatin/andrew-inset;application/vnd.android.package-archive;application/vnd.anser-web-certificate-issue-initiation;application/vnd.anser-web-funds-transfer-initiation;application/vnd.antix.game-component;application/vnd.apple.installe+xml;application/applixware;application/vnd.hhe.lesson-player;application/vnd.aristanetworks.swi;text/x-asm;application/atomcat+xml;application/atomsvc+xml;application/atom+xml;application/pkix-attr-cert;audio/x-aiff;video/x-msvieo;application/vnd.audiograph;image/vnd.dxf;model/vnd.dwf;text/plain-bas;application/x-bcpio;application/octet-stream;image/bmp;application/x-bittorrent;application/vnd.rim.cod;application/vnd.blueice.multipass;application/vnd.bm;application/x-sh;image/prs.btif;application/vnd.businessobjects;application/x-bzip;application/x-bzip2;application/x-csh;text/x-c;application/vnd.chemdraw+xml;text/css;chemical/x-cdx;chemical/x-cml;chemical/x-csml;application/vn.contact.cmsg;application/vnd.claymore;application/vnd.clonk.c4group;image/vnd.dvb.subtitle;application/cdmi-capability;application/cdmi-container;application/cdmi-domain;application/cdmi-object;application/cdmi-queue;applicationvnd.cluetrust.cartomobile-config;application/vnd.cluetrust.cartomobile-config-pkg;image/x-cmu-raster;model/vnd.collada+xml;text/csv;application/mac-compactpro;application/vnd.wap.wmlc;image/cgm;x-conference/x-cooltalk;image/x-cmx;application/vnd.xara;application/vnd.cosmocaller;application/x-cpio;application/vnd.crick.clicker;application/vnd.crick.clicker.keyboard;application/vnd.crick.clicker.palette;application/vnd.crick.clicker.template;application/vn.crick.clicker.wordbank;application/vnd.criticaltools.wbs+xml;application/vnd.rig.cryptonote;chemical/x-cif;chemical/x-cmdf;application/cu-seeme;application/prs.cww;text/vnd.curl;text/vnd.curl.dcurl;text/vnd.curl.mcurl;text/vnd.crl.scurl;application/vnd.curl.car;application/vnd.curl.pcurl;application/vnd.yellowriver-custom-menu;application/dssc+der;application/dssc+xml;application/x-debian-package;audio/vnd.dece.audio;image/vnd.dece.graphic;video/vnd.dec.hd;video/vnd.dece.mobile;video/vnd.uvvu.mp4;video/vnd.dece.pd;video/vnd.dece.sd;video/vnd.dece.video;application/x-dvi;application/vnd.fdsn.seed;application/x-dtbook+xml;application/x-dtbresource+xml;application/vnd.dvb.ait;applcation/vnd.dvb.service;audio/vnd.digital-winds;image/vnd.djvu;application/xml-dtd;application/vnd.dolby.mlp;application/x-doom;application/vnd.dpgraph;audio/vnd.dra;application/vnd.dreamfactory;audio/vnd.dts;audio/vnd.dts.hd;imag/vnd.dwg;application/vnd.dynageo;application/ecmascript;application/vnd.ecowin.chart;image/vnd.fujixerox.edmics-mmr;image/vnd.fujixerox.edmics-rlc;application/exi;application/vnd.proteus.magazine;application/epub+zip;message/rfc82;application/vnd.enliven;application/vnd.is-xpr;image/vnd.xiff;application/vnd.xfdl;application/emma+xml;application/vnd.ezpix-album;application/vnd.ezpix-package;image/vnd.fst;video/vnd.fvt;image/vnd.fastbidsheet;application/vn.denovo.fcselayout-link;video/x-f4v;video/x-flv;image/vnd.fpx;image/vnd.net-fpx;text/vnd.fmi.flexstor;video/x-fli;application/vnd.fluxtime.clip;application/vnd.fdf;text/x-fortran;application/vnd.mif;application/vnd.framemaker;imae/x-freehand;application/vnd.fsc.weblaunch;application/vnd.frogans.fnc;application/vnd.frogans.ltf;application/vnd.fujixerox.ddd;application/vnd.fujixerox.docuworks;application/vnd.fujixerox.docuworks.binder;application/vnd.fujitu.oasys;application/vnd.fujitsu.oasys2;application/vnd.fujitsu.oasys3;application/vnd.fujitsu.oasysgp;application/vnd.fujitsu.oasysprs;application/x-futuresplash;application/vnd.fuzzysheet;image/g3fax;application/vnd.gmx;model/vn.gtw;application/vnd.genomatix.tuxedo;application/vnd.geogebra.file;application/vnd.geogebra.tool;model/vnd.gdl;application/vnd.geometry-explorer;application/vnd.geonext;application/vnd.geoplan;application/vnd.geospace;applicatio/x-font-ghostscript;application/x-font-bdf;application/x-gtar;application/x-texinfo;application/x-gnumeric;application/vnd.google-earth.kml+xml;application/vnd.google-earth.kmz;application/vnd.grafeq;image/gif;text/vnd.graphviz;aplication/vnd.groove-account;application/vnd.groove-help;application/vnd.groove-identity-message;application/vnd.groove-injector;application/vnd.groove-tool-message;application/vnd.groove-tool-template;application/vnd.groove-vcar;video/h261;video/h263;video/h264;application/vnd.hp-hpid;application/vnd.hp-hps;application/x-hdf;audio/vnd.rip;application/vnd.hbci;application/vnd.hp-jlyt;application/vnd.hp-pcl;application/vnd.hp-hpgl;application/vnd.yamaha.h-script;application/vnd.yamaha.hv-dic;application/vnd.yamaha.hv-voice;application/vnd.hydrostatix.sof-data;application/hyperstudio;application/vnd.hal+xml;text/html;application/vnd.ibm.rights-management;application/vnd.ibm.securecontainer;text/calendar;application/vnd.iccprofile;image/x-icon;application/vnd.igloader;image/ief;application/vnd.immervision-ivp;application/vnd.immervision-ivu;application/reginfo+xml;text/vnd.in3d.3dml;text/vnd.in3d.spot;mode/iges;application/vnd.intergeo;application/vnd.cinderella;application/vnd.intercon.formnet;application/vnd.isac.fcs;application/ipfix;application/pkix-cert;application/pkixcmp;application/pkix-crl;application/pkix-pkipath;applicaion/vnd.insors.igm;application/vnd.ipunplugged.rcprofile;application/vnd.irepository.package+xml;text/vnd.sun.j2me.app-descriptor;application/java-archive;application/java-vm;application/x-java-jnlp-file;application/java-serializd-object;text/x-java-source,java;application/javascript;application/json;application/vnd.joost.joda-archive;video/jpm;image/jpeg;video/jpeg;application/vnd.kahootz;application/vnd.chipnuts.karaoke-mmd;application/vnd.kde.karbon;aplication/vnd.kde.kchart;application/vnd.kde.kformula;application/vnd.kde.kivio;application/vnd.kde.kontour;application/vnd.kde.kpresenter;application/vnd.kde.kspread;application/vnd.kde.kword;application/vnd.kenameaapp;applicatin/vnd.kidspiration;application/vnd.kinar;application/vnd.kodak-descriptor;application/vnd.las.las+xml;application/x-latex;application/vnd.llamagraphics.life-balance.desktop;application/vnd.llamagraphics.life-balance.exchange+xml;application/vnd.jam;application/vnd.lotus-1-2-3;application/vnd.lotus-approach;application/vnd.lotus-freelance;application/vnd.lotus-notes;application/vnd.lotus-organizer;application/vnd.lotus-screencam;application/vnd.lotus-wordro;audio/vnd.lucent.voice;audio/x-mpegurl;video/x-m4v;application/mac-binhex40;application/vnd.macports.portpkg;application/vnd.osgeo.mapguide.package;application/marc;application/marcxml+xml;application/mxf;application/vnd.wolfrm.player;application/mathematica;application/mathml+xml;application/mbox;application/vnd.medcalcdata;application/mediaservercontrol+xml;application/vnd.mediastation.cdkey;application/vnd.mfer;application/vnd.mfmp;model/mesh;appliation/mads+xml;application/mets+xml;application/mods+xml;application/metalink4+xml;application/vnd.ms-powerpoint.template.macroenabled.12;application/vnd.ms-word.document.macroenabled.12;application/vnd.ms-word.template.macroenabed.12;application/vnd.mcd;application/vnd.micrografx.flo;application/vnd.micrografx.igx;application/vnd.eszigno3+xml;application/x-msaccess;video/x-ms-asf;application/x-msdownload;application/vnd.ms-artgalry;application/vnd.ms-ca-compressed;application/vnd.ms-ims;application/x-ms-application;application/x-msclip;image/vnd.ms-modi;application/vnd.ms-fontobject;application/vnd.ms-excel;application/vnd.ms-excel.addin.macroenabled.12;application/vnd.ms-excelsheet.binary.macroenabled.12;application/vnd.ms-excel.template.macroenabled.12;application/vnd.ms-excel.sheet.macroenabled.12;application/vnd.ms-htmlhelp;application/x-mscardfile;application/vnd.ms-lrm;application/x-msmediaview;aplication/x-msmoney;application/vnd.openxmlformats-officedocument.presentationml.presentation;application/vnd.openxmlformats-officedocument.presentationml.slide;application/vnd.openxmlformats-officedocument.presentationml.slideshw;application/vnd.openxmlformats-officedocument.presentationml.template;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;application/vnd.openxmlformats-officedocument.spreadsheetml.template;application/vnd.openxmformats-officedocument.wordprocessingml.document;application/vnd.openxmlformats-officedocument.wordprocessingml.template;application/x-msbinder;application/vnd.ms-officetheme;application/onenote;audio/vnd.ms-playready.media.pya;vdeo/vnd.ms-playready.media.pyv;application/vnd.ms-powerpoint;application/vnd.ms-powerpoint.addin.macroenabled.12;application/vnd.ms-powerpoint.slide.macroenabled.12;application/vnd.ms-powerpoint.presentation.macroenabled.12;appliation/vnd.ms-powerpoint.slideshow.macroenabled.12;application/vnd.ms-project;application/x-mspublisher;application/x-msschedule;application/x-silverlight-app;application/vnd.ms-pki.stl;application/vnd.ms-pki.seccat;application/vn.visio;video/x-ms-wm;audio/x-ms-wma;audio/x-ms-wax;video/x-ms-wmx;application/x-ms-wmd;application/vnd.ms-wpl;application/x-ms-wmz;video/x-ms-wmv;video/x-ms-wvx;application/x-msmetafile;application/x-msterminal;application/msword;application/x-mswrite;application/vnd.ms-works;application/x-ms-xbap;application/vnd.ms-xpsdocument;audio/midi;application/vnd.ibm.minipay;application/vnd.ibm.modcap;application/vnd.jcp.javame.midlet-rms;application/vnd.tmobile-ivetv;application/x-mobipocket-ebook;application/vnd.mobius.mbk;application/vnd.mobius.dis;application/vnd.mobius.plc;application/vnd.mobius.mqy;application/vnd.mobius.msl;application/vnd.mobius.txf;application/vnd.mobius.daf;tex/vnd.fly;application/vnd.mophun.certificate;application/vnd.mophun.application;video/mj2;audio/mpeg;video/vnd.mpegurl;video/mpeg;application/mp21;audio/mp4;video/mp4;application/mp4;application/vnd.apple.mpegurl;application/vnd.msician;application/vnd.muvee.style;application/xv+xml;application/vnd.nokia.n-gage.data;application/vnd.nokia.n-gage.symbian.install;application/x-dtbncx+xml;application/x-netcdf;application/vnd.neurolanguage.nlu;application/vnd.na;application/vnd.noblenet-directory;application/vnd.noblenet-sealer;application/vnd.noblenet-web;application/vnd.nokia.radio-preset;application/vnd.nokia.radio-presets;text/n3;application/vnd.novadigm.edm;application/vnd.novadim.edx;application/vnd.novadigm.ext;application/vnd.flographit;audio/vnd.nuera.ecelp4800;audio/vnd.nuera.ecelp7470;audio/vnd.nuera.ecelp9600;application/oda;application/ogg;audio/ogg;video/ogg;application/vnd.oma.dd2+xml;applicatin/vnd.oasis.opendocument.text-web;application/oebps-package+xml;application/vnd.intu.qbo;application/vnd.openofficeorg.extension;application/vnd.yamaha.openscoreformat;audio/webm;video/webm;application/vnd.oasis.opendocument.char;application/vnd.oasis.opendocument.chart-template;application/vnd.oasis.opendocument.database;application/vnd.oasis.opendocument.formula;application/vnd.oasis.opendocument.formula-template;application/vnd.oasis.opendocument.grapics;application/vnd.oasis.opendocument.graphics-template;application/vnd.oasis.opendocument.image;application/vnd.oasis.opendocument.image-template;application/vnd.oasis.opendocument.presentation;application/vnd.oasis.opendocumen.presentation-template;application/vnd.oasis.opendocument.spreadsheet;application/vnd.oasis.opendocument.spreadsheet-template;application/vnd.oasis.opendocument.text;application/vnd.oasis.opendocument.text-master;application/vnd.asis.opendocument.text-template;image/ktx;application/vnd.sun.xml.calc;application/vnd.sun.xml.calc.template;application/vnd.sun.xml.draw;application/vnd.sun.xml.draw.template;application/vnd.sun.xml.impress;application/vnd.sun.xl.impress.template;application/vnd.sun.xml.math;application/vnd.sun.xml.writer;application/vnd.sun.xml.writer.global;application/vnd.sun.xml.writer.template;application/x-font-otf;application/vnd.yamaha.openscoreformat.osfpvg+xml;application/vnd.osgi.dp;application/vnd.palm;text/x-pascal;application/vnd.pawaafile;application/vnd.hp-pclxl;application/vnd.picsel;image/x-pcx;image/vnd.adobe.photoshop;application/pics-rules;image/x-pict;application/x-chat;aplication/pkcs10;application/x-pkcs12;application/pkcs7-mime;application/pkcs7-signature;application/x-pkcs7-certreqresp;application/x-pkcs7-certificates;application/pkcs8;application/vnd.pocketlearn;image/x-portable-anymap;image/-portable-bitmap;application/x-font-pcf;application/font-tdpfr;application/x-chess-pgn;image/x-portable-graymap;image/png;image/x-portable-pixmap;application/pskc+xml;application/vnd.ctc-posml;application/postscript;application/xfont-type1;application/vnd.powerbuilder6;application/pgp-encrypted;application/pgp-signature;application/vnd.previewsystems.box;application/vnd.pvi.ptid1;application/pls+xml;application/vnd.pg.format;application/vnd.pg.osasli;tex/prs.lines.tag;application/x-font-linux-psf;application/vnd.publishare-delta-tree;application/vnd.pmi.widget;application/vnd.quark.quarkxpress;application/vnd.epson.esf;application/vnd.epson.msf;application/vnd.epson.ssf;applicaton/vnd.epson.quickanime;application/vnd.intu.qfx;video/quicktime;application/x-rar-compressed;audio/x-pn-realaudio;audio/x-pn-realaudio-plugin;application/rsd+xml;application/vnd.rn-realmedia;application/vnd.realvnc.bed;applicatin/vnd.recordare.musicxml;application/vnd.recordare.musicxml+xml;application/relax-ng-compact-syntax;application/vnd.data-vision.rdz;application/rdf+xml;application/vnd.cloanto.rp9;application/vnd.jisp;application/rtf;text/richtex;application/vnd.route66.link66+xml;application/rss+xml;application/shf+xml;application/vnd.sailingtracker.track;image/svg+xml;application/vnd.sus-calendar;application/sru+xml;application/set-payment-initiation;application/set-reistration-initiation;application/vnd.sema;application/vnd.semd;application/vnd.semf;application/vnd.seemail;application/x-font-snf;application/scvp-vp-request;application/scvp-vp-response;application/scvp-cv-request;application/svp-cv-response;application/sdp;text/x-setext;video/x-sgi-movie;application/vnd.shana.informed.formdata;application/vnd.shana.informed.formtemplate;application/vnd.shana.informed.interchange;application/vnd.shana.informed.package;application/thraud+xml;application/x-shar;image/x-rgb;application/vnd.epson.salt;application/vnd.accpac.simply.aso;application/vnd.accpac.simply.imp;application/vnd.simtech-mindmapper;application/vnd.commonspace;application/vnd.ymaha.smaf-audio;application/vnd.smaf;application/vnd.yamaha.smaf-phrase;application/vnd.smart.teacher;application/vnd.svd;application/sparql-query;application/sparql-results+xml;application/srgs;application/srgs+xml;application/sml+xml;application/vnd.koan;text/sgml;application/vnd.stardivision.calc;application/vnd.stardivision.draw;application/vnd.stardivision.impress;application/vnd.stardivision.math;application/vnd.stardivision.writer;application/vnd.tardivision.writer-global;application/vnd.stepmania.stepchart;application/x-stuffit;application/x-stuffitx;application/vnd.solent.sdkm+xml;application/vnd.olpc-sugar;audio/basic;application/vnd.wqd;application/vnd.symbian.install;application/smil+xml;application/vnd.syncml+xml;application/vnd.syncml.dm+wbxml;application/vnd.syncml.dm+xml;application/x-sv4cpio;application/x-sv4crc;application/sbml+xml;text/tab-separated-values;image/tiff;application/vnd.to.intent-module-archive;application/x-tar;application/x-tcl;application/x-tex;application/x-tex-tfm;application/tei+xml;text/plain;application/vnd.spotfire.dxp;application/vnd.spotfire.sfs;application/timestamped-data;applicationvnd.trid.tpt;application/vnd.triscape.mxs;text/troff;application/vnd.trueapp;application/x-font-ttf;text/turtle;application/vnd.umajin;application/vnd.uoml+xml;application/vnd.unity;application/vnd.ufdl;text/uri-list;application/nd.uiq.theme;application/x-ustar;text/x-uuencode;text/x-vcalendar;text/x-vcard;application/x-cdlink;application/vnd.vsf;model/vrml;application/vnd.vcx;model/vnd.mts;model/vnd.vtu;application/vnd.visionary;video/vnd.vivo;applicatin/ccxml+xml,;application/voicexml+xml;application/x-wais-source;application/vnd.wap.wbxml;image/vnd.wap.wbmp;audio/x-wav;application/davmount+xml;application/x-font-woff;application/wspolicy+xml;image/webp;application/vnd.webturb;application/widget;application/winhlp;text/vnd.wap.wml;text/vnd.wap.wmlscript;application/vnd.wap.wmlscriptc;application/vnd.wordperfect;application/vnd.wt.stf;application/wsdl+xml;image/x-xbitmap;image/x-xpixmap;image/x-xwindowump;application/x-x509-ca-cert;application/x-xfig;application/xhtml+xml;application/xml;application/xcap-diff+xml;application/xenc+xml;application/patch-ops-error+xml;application/resource-lists+xml;application/rls-services+xml;aplication/resource-lists-diff+xml;application/xslt+xml;application/xop+xml;application/x-xpinstall;application/xspf+xml;application/vnd.mozilla.xul+xml;chemical/x-xyz;text/yaml;application/yang;application/yin+xml;application/vnd.ul;application/zip;application/vnd.handheld-entertainment+xml;application/vnd.zzazz.deck+xml");

        driver = new FirefoxDriver(profile);
        driver.get("https://www.testapp.com");

        driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);
        TestRunner.run(suiteToRun());
    }

    public static Test suiteToRun() {
        TestSuite suite = new TestSuite();
        System.out.println("Login Class");
        suite.addTestSuite(LoginLogout.class);
        return suite;
    }
} 
```

在确定文件属于哪个内容类型后，请记住删除所有其他内容类型。由于列出所有这些会使代码变得丑陋。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T05:42:57.303

设置以下首选项：

```
profile.setPreference("browser.helperApps.alwaysAsk.force", false);
profile.setPreference("browser.download.manager.showWhenStarting",false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-23T08:00:37.987

@lyen：使用 HTTPfox 插件获取您在应用程序中获取的 MIME 内容，同时单击下载按钮

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-02T10:28:04.250

使用以下内容：

```
setPreference("browser.helperApps.alwaysAsk.force", false); 
```

# sammy.js - 在 Sammy 中阻止路由或 URL

> ID：13839545
> 
> 赞同：0
> 
> 时间：2012-12-12T12:13:13.083
> 
> 标签：sammy.js

我是 Sammy 的新手，我想知道是否有办法阻止 Sammy 重定向到特定的路由或 URL。

有一种称为“setLocation”的方法，每次需要重定向时都会调用该方法。我想阻止对一个或多个 URL 的访问。

萨米可以吗？？？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:19:38.813

Sammy 只能使用 sammy 对象上的 'before' 方法在已知路线购买上执行此操作（请参阅 sammy 文档）。在之前您可以检查是否启用了导航

不能阻止任何其他网址（www.google.com、www.yourdomain/sammysinglepageapp2 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T22:52:52.830

考虑使用`Sammy.around(callback)`此处定义的： [Sammy.js 文档：Sammy.Application around(callback)](http://www.sammyjs.org/docs/api/0.7.4/all#Sammy.Application-around)

有关更详细的响应，请参阅[使用 Sammy.js 取消路由而不影响历史记录](https://stackoverflow.com/a/39583399/2939745)

# perforce - Perforce 提交时出现“检查线”验证错误

> ID：13839550
> 
> 赞同：0
> 
> 时间：2012-12-12T12:13:42.710
> 
> 标签：perforce

我正在尝试在我的 perforce 库中添加图像文件。这些文件使用正确添加：p4 add

但是在 p4 提交时出现检查行验证错误：'CheckLine'验证失败：您​​的提交已被拒绝，因为以下文件有行尾错误

不明白出了什么问题。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:44:44.330

也许“CheckLine”是您的管理员在您的服务器中安装的触发器；如果是这样，您的管理员可以帮助您了解您的提交不遵守哪些本地政策。

# python - 如何使用不同的类和导入动态地使用 Python 日志更改文件句柄

> ID：13839554
> 
> 赞同：66
> 
> 时间：2012-12-12T12:14:02.900
> 
> 标签：python, logging, configuration

我无法执行即时记录文件句柄更改。

例如，我有 3 节课

`one.py`

```
import logging
class One():
    def __init__(self,txt="?"):
        logging.debug("Hey, I'm the class One and I say: %s" % txt) 
```

`two.py`

```
import logging
class Two():
    def __init__(self,txt="?"):
        logging.debug("Hey, I'm the class Two and I say: %s" % txt) 
```

`config.py`

```
import logging
class Config():
    def __init__(self,logfile=None):
        logging.debug("Reading config")
        self.logfile(logfile) 
```

`myapp`

```
from one import One
from two import Two
from config import Config
import logging

#Set default logging
logging.basicConfig( 
    level=logging.getLevelName(DEBUG), 
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    filename=None
)

logging.info("Starting with stdout")

o=One(txt="STDOUT")
c=Config(logfile="/tmp/logfile")

# Here must be the code that change the logging configuration and set the filehandler

t=One(txt="This must be on the file, not STDOUT") 
```

如果我再试`loggin.basicConfig()`一次，它不起作用。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-12-12T12:25:14.793

实际上，如果已经设置了处理程序，`logging.basicConfig`则*什么也不做：*

> 如果根记录器已经为其配置了处理程序，则此函数不执行任何操作。

您需要*替换*根记录器上的当前处理程序：

```
import logging

fileh = logging.FileHandler('/tmp/logfile', 'a')
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
fileh.setFormatter(formatter)

log = logging.getLogger()  # root logger
for hdlr in log.handlers[:]:  # remove all old handlers
    log.removeHandler(hdlr)
log.addHandler(fileh)      # set the new handler 
```

请参阅 Python Logging HOWTO 中的[配置日志记录一章](http://docs.python.org/2/howto/logging.html#configuring-logging)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-11-23T04:13:29.693

@Martijn Pieters 提供的答案效果很好。但是，代码剪辑器删除了所有处理程序并仅将文件处理程序放回原处。如果您的应用程序有其他模块添加的处理程序，这将很麻烦。

因此，下面的代码片段被设计为仅替换文件处理程序。

线`if isinstance(hdlr,logging.FileHandler)`是关键。

```
import logging

filehandler = logging.FileHandler('/tmp/logfile', 'a')
formatter = logging.Formatter('%(asctime)-15s::%(levelname)s::%(filename)s::%(funcName)s::%(lineno)d::%(message)s')
filehandler.setFormatter(formatter)
log = logging.getLogger()  # root logger - Good to get it only once.
for hdlr in log.handlers[:]:  # remove the existing file handlers
    if isinstance(hdlr,logging.FileHandler):
        log.removeHandler(hdlr)
log.addHandler(filehandler)      # set the new handler
# set the log level to INFO, DEBUG as the default is ERROR
log.setLevel(logging.DEBUG) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-01-31T21:59:53.557

我找到了比上述“接受”答案更简单的方法。如果您有对处理程序的引用，您需要做的就是调用 close() 方法，然后设置 baseFilename 属性。分配 baseFilename 时，请务必使用 os.path.abspath()。库源中有一条注释表明它是必需的。我将配置内容保存在全局 dict() 中，因此很容易保存 FileHandler 引用对象。正如您在下面看到的，只需 2 行代码即可动态更改处理程序的日志文件名。

```
import logging

def setup_logging():
  global config

  if config['LOGGING_SET']:
    config['LOG_FILE_HDL'].close()
    config['LOG_FILE_HDL'].baseFilename = os.path.abspath(config['LOG_FILE'])

    config['DEBUG_LOG_HDL'].close()
    config['DEBUG_LOG_HDL'].baseFilename = os.path.abspath(config['DEBUG_LOG'])
  else:
    format_str = '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
    formatter = logging.Formatter(format_str)

    log = logging.getLogger()

    log.setLevel(logging.DEBUG)

    # add file mode="w" to overwrite
    config['LOG_FILE_HDL'] = logging.FileHandler(config['LOG_FILE'], mode='a')
    config['LOG_FILE_HDL'].setLevel(logging.INFO)
    config['LOG_FILE_HDL'].setFormatter(formatter)
    log.addHandler(config['LOG_FILE_HDL'])

    # the delay=1 should prevent the file from being opened until used.
    config['DEBUG_LOG_HDL'] = logging.FileHandler(config['DEBUG_LOG'], mode='a', delay=1)
    config['DEBUG_LOG_HDL'].setLevel(logging.DEBUG)
    config['DEBUG_LOG_HDL'].setFormatter(formatter)
    log.addHandler(config['DEBUG_LOG_HDL'])

    ch = logging.StreamHandler()
    ch.setLevel(logging.DEBUG)
    ch.setFormatter(formatter)
    log.addHandler(ch)
    config['LOGGING_SET'] = True 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-01-23T22:08:43.343

我尝试从@Martijn Pieters 结合@Arun Thundyill Saseendran 实施此页面上的建议。我太新了，不能发表评论，所以我必须发布一个调整后的答案。在 isinstance 调用中，我必须使用“logging”而不是“log”来访问类型（log 是一个实例），然后“FileHander”应该是“FileHandler”。我正在使用 Python 3.6。

```
import logging

filehandler = logging.FileHandler('/tmp/logfile', 'a')
formatter = logging.Formatter('%(asctime)-15s::%(levelname)s::%(filename)s::%(funcName)s::%(lineno)d::%(message)s')
filehandler.setFormatter(formatter)
log = logging.getLogger()  # root logger - Good to get it only once.
for hdlr in log.handlers[:]:  # remove the existing file handlers
    if isinstance(hdlr,logging.FileHandler): #fixed two typos here
        log.removeHandler(hdlr)
log.addHandler(filehandler)      # set the new handler
# set the log level to INFO, DEBUG as the default is ERROR
logging.setLevel(log.DEBUG) 
```

# android - 如何在 Android 上使用 Google Drive 打开 google doc 文件

> ID：13839555
> 
> 赞同：1
> 
> 时间：2012-12-12T12:14:11.090
> 
> 标签：android, google-drive-api

我在自己的 Android 应用程序上使用 Google Drive List API 并列出存储在 Google Drive 上的文件。当我在自己的应用程序上选择 Google Doc 文件时，我想用官方的 Google Drive Android-App 打开它，我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:31:50.357

If you open the file URL in Android, it should ask you if you want to use the Google Doc app or the web browser.

The URL is typically what you'll get from the Doc List, something like: [https://docs.google.com/document/d/_Doc_list_resource_id_/edit](https://docs.google.com/document/d/_Doc_list_resource_id_/edit)

# module - 如何以编程方式获取与特定用户相关的私人消息？

> ID：13839558
> 
> 赞同：0
> 
> 时间：2012-12-12T12:14:27.587
> 
> 标签：module, drupal-7, private-messaging

我想以编程方式获取与特定用户相关的私人消息（由[Privatemsg 模块提供）。](http://drupal.org/project/privatemsg)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:52:49.923

私人消息是实体，因此您可以使用`entity_load()`它们按条件加载它们......或使用私人消息模块本身提供的包装器：

```
$messages = privatemsg_message_load_multiple(array(), array('author' => $uid)); 
```

这将获得由 标识的用户创建的所有消息`$uid`。

# breeze - 在微风中处理日期

> ID：13839562
> 
> 赞同：2
> 
> 时间：2012-12-12T12:14:35.997
> 
> 标签：breeze

我在处理日期时遇到了一些麻烦。

我有一个带有日期字段的对象：

公共日期时间 FechaInicio{get; 放;}

此定义在数据库中生成以下字段：

FechaInicio 日期时间不为空

向 Web 服务发出请求，我得到以下格式的日期（在 JSON 中）：

“FechaInicio”：“1982-12-02T00：00:00”

并在 tne 实体上调用 FechaInicio() 返回一个 javascript Date 对象。

创建一个新实体我得到以下值：

```
createPalanca var = function () {
    MetadataStore var = manager.metadataStore;
    metadataStore.getEntityType palancaType = var ("Toggle");
    palancaType.createEntity newPalanca = var ();
    manager.addEntity (newPalanca);

    //Here: newPalanca.FechaInicio () has the value in this format: 1355313343214
    //Expected Date object here
    newPalanca return;
}; 
```

毕竟，我真正的问题是：我应该使用什么格式来为日期类型字段分配新值？

编辑：

在做了一些测试之后，我注意到如果我为属性分配一个 Date 对象，一切似乎都很好，直到我们到达这一行：

saveBundleStringified var = JSON.stringify (saveBundle);

saveBundle 内容为：

```
FechaInicio: Thu Dec 20 2012 00:00:00 GMT+0100 (Hora estándar romance) 
```

和 saveBundleStringified：

```
"FechaInicio": "2012-12-19T23:00:00.000Z" <- I guess this is utc format 
```

最后存入数据库的是：2012-12-19 23:00:00.0000000

当调用 SaveChanges 的结果被返回时，它们会在执行此检查的函数 updateEntity 处与缓存中的实体合并：如果 (!core.isDate(val)) 返回 false。结果，它创建了一个带有错误日期的新 Date 对象：

```
function fastDateParse(y, m, d, h, i, s, ms){ //2012 12 19 23 00 00 ""
    return new Date(y, m - 1, d, h || 0, i || 0, s || 0, ms || 0);
} 
```

如果我错了，请纠正我，但我认为这就是问题所在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T02:04:49.810

抱歉拖了这么久...

Breeze 的 DateTime 时区序列化和用于具有不可为空日期字段的新建实体的默认 DateTime 值存在错误。这些在 v 0.77.2 中是固定的。请确认这组修复程序是否适合您。

感谢您找到这些。

为了回答您的问题，您的对象上的所有日期属性都应设置为 javascript Dates。Breeze 应该正确处理所有的序列化问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:59:39.413

约会总是让我害怕。我的直觉是浏览器和服务器不在同一个时区；我不知道怎么会这样。无论如何，它一定会发生，我记得在日期时间协调客户端和服务器的各种基本问题。我认为通常的建议始终是将所有内容保持在 UTC 中，并调整您在本地时间向用户显示的内容。

我相当怀疑这是一个有用的答案。我不确定 Breeze 在解决这个问题时应该扮演什么角色。欢迎提出我们可以传播并建立共识的建议。

你也能澄清一下这个说法：

> 当调用 SaveChanges 的结果被返回时，它们会在执行此检查的函数 updateEntity 处与缓存中的实体合并：如果 (!core.isDate(val)) 返回 false。因此，它创建了一个日期错误的新 Date 对象

“错误的日期”是什么意思？您是说 Breeze 认为传入的日期值格式无效（而不是您预期的日期之外的日期）？

是的，@Sascha，Breeze 使用 Web Api 标准进行 JSON 格式化（Json.Net），它设置为 ISO8601 格式，而不是古怪的 Microsoft 格式（在我写这篇文章时它逃脱了我）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:32:55.577

Breeze/Web Api 似乎需要一些特殊格式（ISO8601）的日期。任何其他格式都不适合我。moment.js 通过设置和阅读为我解决了这个问题。如果您使用 Knockout 来显示具有特殊绑定的日期，那么格式化也可以很好地完成。

```
entity.someDate(moment().utc().toDate()) // example 
```

它有效。

你也可以使用这个：

```
Date.prototype.setISO8601 = function(string) {
        var regexp = "([0-9]{4})(-([0-9]{2})(-([0-9]{2})" +
            "(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?" +
            "(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";
        var d = string.match(new RegExp(regexp));

        var offset = 0;
        var date = new Date(d[1], 0, 1);

        if (d[3]) {
            date.setMonth(d[3] - 1);
        }
        if (d[5]) {
            date.setDate(d[5]);
        }
        if (d[7]) {
            date.setHours(d[7]);
        }
        if (d[8]) {
            date.setMinutes(d[8]);
        }
        if (d[10]) {
            date.setSeconds(d[10]);
        }
        if (d[12]) {
            date.setMilliseconds(Number("0." + d[12]) * 1000);
        }
        if (d[14]) {
            offset = (Number(d[16]) * 60) + Number(d[17]);
            offset *= ((d[15] == '-') ? 1 : -1);
        }

        offset -= date.getTimezoneOffset();
        time = (Number(date) + (offset * 60 * 1000));
        this.setTime(Number(time));
    }; 
```

# java - 此代码可用于连接到 SQL Server 2008 吗？

> ID：13839563
> 
> 赞同：1
> 
> 时间：2012-12-12T12:14:35.537
> 
> 标签：java, android, sql

我正在尝试连接到 Microsoft SQL 2008 服务器，这似乎对其他人有用，但我没有运气。我知道直接连接到服务器不是最佳做法，但这个应用程序仅用于演示，不会分发到我的设备之外。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

import net.sourceforge.jtds.jdbc.*;

public void query2()
{
    Log.i("Android"," MySQL Connect Example.");
    Connection conn = null;
    try {
        String driver = "net.sourceforge.jtds.jdbc.Driver";
        Class.forName(driver).newInstance();
        //test = com.microsoft.sqlserver.jdbc.SQLServerDriver.class;
        String connString = "jdbc:jtds:sqlserver://server_ip_address               
        :1433/DBNAME;encrypt=fasle;user=xxxxxxxxx;password=xxxxxxxx;instance=SQLEXPRESS;";
        String username = "xxxxxx";
        String password = "xxxxxxxxxx";
        conn = DriverManager.getConnection(connString,username,password);
        Log.w("Connection","open");
        Statement stmt = conn.createStatement();
        ResultSet reset = stmt.executeQuery("select * from TableName");

        //Print the data to the console
        while(reset.next()){
            Log.w("Data:",reset.getString(3));
            // Log.w("Data",reset.getString(2));
        }
        conn.close();
    } 
    catch (Exception e)
    {
        Log.w("Error connection","" + e.getMessage());
    }
} 
```

如果不是，需要改变什么？它每次都在连接语句上崩溃。谢谢你。

编辑：这是该事件的 logcat。

12-12 06:11:41.273: E/AndroidRuntime(5745): 致命异常: main 12-12 06:11:41.273: E/AndroidRuntime(5745): java.lang.IllegalStateException: 无法执行活动 12 的方法-12 06:11:41.273: E/AndroidRuntime(5745): 在 android.view.View$1.onClick(View.java:3597) 12-12 06:11:41.273: E/AndroidRuntime(5745): 在 android. view.View.performClick(View.java:4202) 12-12 06:11:41.273: E/AndroidRuntime(5745): 在 android.view.View$PerformClick.run(View.java:17340) 12-12 06: 11:41.273: E/AndroidRuntime(5745): 在 android.os.Handler.handleCallback(Handler.java:725) 12-12 06:11:41.273: E/AndroidRuntime(5745): 在 android.os.Handler.dispatchMessage (Handler.java:92) 12-12 06:11:41.273: E/AndroidRuntime(5745): 在 android.os.Looper.loop(Looper.java:137) 12-12 06:11:41.273: E/AndroidRuntime (5745)：在 android.app.ActivityThread。main(ActivityThread.java:5039) 12-12 06:11:41.273: E/AndroidRuntime(5745): at java.lang.reflect.Method.invokeNative(Native Method) 12-12 06:11:41.273: E/AndroidRuntime (5745): 在 java.lang.reflect.Method.invoke(Method.java:511) 12-12 06:11:41.273: E/AndroidRuntime(5745): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:793）12-12 06:11:41.273：E/AndroidRuntime（5745）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:560）12-12 06:11： 41.273: E/AndroidRuntime(5745): at dalvik.system.NativeStart.main(Native Method) 12-12 06:11:41.273: E/AndroidRuntime(5745): 由: java.lang.reflect.InvocationTargetException 12-12 06:11:41.273: E/AndroidRuntime(5745): 在 java.lang.reflect.Method.invokeNative(Native Method) 12-12 06:11:41.273: E/AndroidRuntime(5745): 在 java.lang.reflect。方法。调用(Method.java:511) 12-12 06:11:41.273: E/AndroidRuntime(5745): at android.view.View$1.onClick(View.java:3592) 12-12 06:11:41.273: E /AndroidRuntime(5745): ... 11 更多 12-12 06:11:41.273: E/AndroidRuntime(5745): 由: java.sql.SQLException: 没有合适的驱动程序 12-12 06:11:41.273: E/ AndroidRuntime(5745): 在 java.sql.DriverManager.getConnection(DriverManager.java:182) 12-12 06:11:41.273: E/AndroidRuntime(5745): 在 java.sql.DriverManager.getConnection(DriverManager.java:140 ) 12-12 06:11:41.273: E/AndroidRuntime(5745): 在 com.nateapp.finalproject.MainActivity.sendData(MainActivity.java:266) 12-12 06:11:41.273: E/AndroidRuntime(5745): ... 14 更多11 更多 12-12 06:11:41.273: E/AndroidRuntime(5745): 由: java.sql.SQLException: 没有合适的驱动程序 12-12 06:11:41.273: E/AndroidRuntime(5745): at java.sql .DriverManager.getConnection(DriverManager.java:182) 12-12 06:11:41.273: E/AndroidRuntime(5745): 在 java.sql.DriverManager.getConnection(DriverManager.java:140) 12-12 06:11:41.273 : E/AndroidRuntime(5745): at com.nateapp.finalproject.MainActivity.sendData(MainActivity.java:266) 12-12 06:11:41.273: E/AndroidRuntime(5745): ... 14 更多11 更多 12-12 06:11:41.273: E/AndroidRuntime(5745): 由: java.sql.SQLException: 没有合适的驱动程序 12-12 06:11:41.273: E/AndroidRuntime(5745): at java.sql .DriverManager.getConnection(DriverManager.java:182) 12-12 06:11:41.273: E/AndroidRuntime(5745): 在 java.sql.DriverManager.getConnection(DriverManager.java:140) 12-12 06:11:41.273 : E/AndroidRuntime(5745): at com.nateapp.finalproject.MainActivity.sendData(MainActivity.java:266) 12-12 06:11:41.273: E/AndroidRuntime(5745): ... 14 更多E/AndroidRuntime(5745): 在 com.nateapp.finalproject.MainActivity.sendData(MainActivity.java:266) 12-12 06:11:41.273: E/AndroidRuntime(5745): ... 14 更多E/AndroidRuntime(5745): 在 com.nateapp.finalproject.MainActivity.sendData(MainActivity.java:266) 12-12 06:11:41.273: E/AndroidRuntime(5745): ... 14 更多

它所要做的就是一个插入语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:43:20.043

“崩溃”是什么样的？发布堆栈跟踪。

此代码在每个级别上都是错误的。您不应该在与数据库交互的方法中以这种方式创建连接。最好在别处创建它（例如从池中获取它）并将其传递给方法。

你不关闭`ResultSet`或`Statement`。关闭`Connection`不会清理那些。您应该在一个`finally`块中关闭它们。

这是您的问题的原因：

```
12-12 06:11:41.273: E/AndroidRuntime(5745): Caused by: java.sql.SQLException: No suitable driver 
```

“没有合适的驱动程序”通常意味着连接 URL 被破坏。检查那个。

# c# - WPF 将 datagrid 组合框 ItemsSource 更改为另一个 datagrid 组合框的值

> ID：13839567
> 
> 赞同：0
> 
> 时间：2012-12-12T12:14:44.710
> 
> 标签：c#, wpf, datagrid, datagridcomboboxcolumn

我有一个带有 2 个 DataGridComboxClolumn 元素的数据网格，并且想要在第一个的值发生更改时更改第二个的 ItemsSource。如何设置这样的绑定？

注意：数据网格有它自己的项目源，数据是分层的：

数据网格的ItemsSource（列表操作类型Channel）：

```
public class Root
{
    public List<Channel> Ch { get; set; }  // This is the ItemsSource of the datagrid itself
}

public class Channel
{
    public Settings TheSettings { get; set; }
} 
```

我想要完成的事情是使用第二个 ComboBox 的选定值设置 TheSettings。这可以通过设置 ComboBox ItemsSource 轻松完成。虽然我要求第二个组合框的 ItemsSource 是动态的。例如，它必须更改为在 FIRST 组合框中选择的源。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:41:02.250

**选项1**

您可以使用两个组合框创建[DataGridTemplateColumn 。](https://stackoverflow.com/questions/7088284/wpf-datagridtemplatecolumn-with-combobox-binding-mvvm-pattern)第一个可以填充来自主 ViewModel 的项目，第二个将绑定到第一个的 SelectedItem 的项目。

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:local="clr-namespace:WpfApplication1"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="MainWindow"
    Width="525"
    Height="350"
    mc:Ignorable="d">
<Window.DataContext>
    <local:Root/>
</Window.DataContext>
<Grid x:Name="LayoutRoot">
    <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Ch}" CanUserAddRows="False">
        <DataGrid.Columns>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <ComboBox  Width="100" ItemsSource="{Binding DataContext.ComboBox1Items, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" x:Name="ComboBox1"/>
                        <ComboBox Grid.Column="1" Width="100" ItemsSource="{Binding SelectedItem.Items, ElementName=ComboBox1}" SelectedItem="{Binding TheSettings}" IsEditable="True" IsReadOnly="True"/>
                        </Grid>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid>

</Grid>
</Window>

public class ComboBox1Item
{
    public string Label { get; set; }
    public List<string> Items { get; set; }

    public override string ToString()
    {
        return this.Label;
    }
}

public class Root
{
    public List<Channel> Ch { get; set; }

    public List<ComboBox1Item> ComboBox1Items { get; set; }

    public Root()
    {
        this.Ch = new List<Channel>(){
            new Channel(){ TheSettings = "Settings1"},
            new Channel(){ TheSettings = "Settings2"},
        };

        this.ComboBox1Items = new List<ComboBox1Item>{
            new ComboBox1Item(){ Label = "Item1",
                Items = new List<string>(){ "Settings1", "Settings2"}
            },
            new ComboBox1Item(){ Label = "Item2",
                Items = new List<string>(){ "Settings3", "Settings4"}
            }
        };
    }
} 
```

**选项 2**

创建一个对象来包装您的 Channel 对象，并在其中放入逻辑以允许一个组合框驱动另一个组合框的项目：

```
public class ChannelWrapper : INotifyPropertyChanged
{
    #region INotifyPropertyChanged values

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
    #endregion

    private object comboBox1SelectedItem;
    public object ComboBox1SelectedItem
    {
        get { return this.comboBox1SelectedItem; }
        set
        {
            if (this.comboBox1SelectedItem != value)
            {
                this.comboBox1SelectedItem = value;
                this.OnPropertyChanged("ComboBox1SelectedItem");

                // Put the logic to change the items available in the second combobox here
                if (value == "Value1")
                    this.ComboBox2ItemsSource = new List<object>() { "Setting1", "Setting2" };
                if (value == "Value2")
                    this.ComboBox2ItemsSource = new List<object>() { "Setting3", "Setting4" };
            }
        }
    }

    private List<object> comboBox2ItemsSource;
    public List<object> ComboBox2ItemsSource
    {
        get { return this.comboBox2ItemsSource; }
        set
        {
            if (this.comboBox2ItemsSource != value)
            {
                this.comboBox2ItemsSource = value;
                this.OnPropertyChanged("ComboBox2ItemsSource");
            }
        }
    }

    public Channel Ch { get; set; }
} 
```

然后，您的 Root 类将公开一组包装器，而不是一组通道。您的 DataGrid 将有 2 个 ComboBoxColumns。第一个的 SelectedItem 将绑定到包装器的属性“ComboBox1SelectedItem”。第二个的 ItemsSource 将绑定到包装器的属性“ComboBox2ItemsSource”，第二列的 SelectedItem 将绑定到包装器的 Channel 实例的设置，路径为“Ch.TheSettting”。

# r - 如何使用getsymbols加载具有特定字段的csv文件？

> ID：13839568
> 
> 赞同：1
> 
> 时间：2012-12-12T12:14:46.053
> 
> 标签：r, csv, quantmod

我有一个 csv 文件，其中包含字段 "Date","Time","O","H","L","C","V" 我想将它与 quantmod 包中的 getSymbols 函数一起使用。csv 文件 (h1.csv) 如下所示：

```
"Date","Time","O","H","L","C","V"
20070801,0001,1.3668,1.3675,1.3666,1.3673,20693
20070801,0100,1.3671,1.3674,1.3652,1.3653,26636
20070801,0200,1.3655,1.3669,1.3651,1.3667,31300 
```

代码：

```
library(quantmod)
setSymbolLookup(h1=list(src='csv', format='%Y%m%d')) 
h1 <- getSymbols('h1', dir='C:\\Users\\Admin\\Documents\\R\\csv', auto.assign=FALSE, extension='csv')
barChart(h1) 
```

R发送错误：周期性（x）：无法计算1次观察的周期性

但是当我使用这个 R 代码时：

```
library(quantmod)
getSymbols("SPY")
write.zoo(SPY, file="SPY.csv", sep=",")
setSymbolLookup(SPY=list(src="csv",format="%Y-%m-%d"))
spy <- getSymbols("SPY", auto.assign=FALSE)
barChart(spy) 
```

一切都好

# jpa - Ecliplselink - @CascadeOnDelete 不适用于 @Customizer

> ID：13839570
> 
> 赞同：0
> 
> 时间：2012-12-12T12:14:50.060
> 
> 标签：jpa, eclipselink, sortedmap

我有两个实体。“价格”类将“CalculableValue”存储为 SortedMap 字段。为了支持排序地图，我编写了定制器。在那之后，@CascadeOnDelete 似乎不起作用。如果我从地图中删除 CalculableValue 实例，然后保存“价格”EclipseLink 只会将 calculableValues 表中的 priceId 列更新为 NULL ...

我真的很想保留 SortedMap。它有助于避免 Java 级别的值访问的大量日常工作。此外，CalculableValue 类中没有定义反向引用（ManyToOne），应用程序逻辑永远不需要它，因此，只想保持一种方式。

任何想法什么是解决这个问题的最佳方法？我实际上有很多其他这样的依赖关系，几乎所有东西都是 OneToMany 与存储在排序映射中的值的关系。

价格.java：

```
@Entity

@Table(uniqueConstraints={
        @UniqueConstraint(columnNames={"symbol", "datestring", "timestring"})
})
@Customizer(CustomDescriptorCustomizer.class)

public class Price extends CommonWithDate
{
...
    @CascadeOnDelete
    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
    @MapKeyColumn(name="key")
    @JoinColumn(name = "priceId")

    private Map<String, CalculatedValue> calculatedValues =
            new TreeMap<String, CalculatedValue>();
...
}

public class CustomDescriptorCustomizer implements DescriptorCustomizer
{
    @Override
    public void customize(ClassDescriptor descriptor) throws Exception
    {
        DatabaseMapping jpaMapping = descriptor.getMappingByAttribute("calculatedValues");
        ((ContainerMapping) mapping).useMapClass(TreeMap.class, methodName);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:46:46.453

您的定制器应该对此没有影响。这可能是因为您使用的是 @JoinColumn 而不是通常应该在 @OneToMany 中使用的 mappedBy。

您可以使用 isCascadeOnDeleteSetOnDatabase() 检查定制器中的映射

或使用

mapping.setIsCascadeOnDeleteSetOnDatabase(true)

# c# - 如何隐藏页面源更改中的隐藏字段值？

> ID：13839572
> 
> 赞同：0
> 
> 时间：2012-12-12T12:15:00.713
> 
> 标签：c#, asp.net, security, gridview, hidden-field

我有一组必需的隐藏字段，`gridview`如下所示：

```
<ItemTemplate>
<asp:HiddenField ID="hf_tc" Value='<%# Eval("term_code") %>' runat="server" /> 
```

* * *

问题是代码很清晰，每次查看页面源代码时都会显示出来。

有什么方法可以隐藏这个代码，我的意思是甚至让它处于视图状态形状。

我使用隐藏字段：就在我单击 gridview 行中的按钮时，然后使用这些隐藏字段值设置会话变量并打开特定页面。

如何解决这个问题呢 ？

# c#-4.0 - 函数返回值 c#

> ID：13839578
> 
> 赞同：0
> 
> 时间：2012-12-12T12:15:14.553
> 
> 标签：c#-4.0, return-type

我正在努力掌握多年未编码的 C# 以及我以前在 ANSI C 方面的经验。

我读过很多书并在网上搜索过，但有一个方面正在逃避我，我希望这里有人能提供帮助。

过去我会声明一个函数，如果函数内可能没有发生某些事情（即找不到文件等），则将返回声明为整数。如果一切顺利，我将返回 0，否则返回一个值。该值将对应于函数未能完全执行的位置，我可以从调用它的位置相应地分支。

```
if(function1())
  {
   // all my error stuff, maybe a switch/case etc.
  } 
```

我在 C# 中找到的所有示例似乎都避免了这种技术，我希望在这里得到一些理解。

感谢期待。

（我知道我是化石）。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:18:32.987

例外是您在 C# 和类似语言中使用的方法。

它是这样的：

```
try
{
    function();
}
catch(FileNotFoundException e)
{
    // File not found
}
catch(UnauthorizedAccessException e)
{
    // User doesn't have right to access file
}
// etc... 
```

为了使这项工作，`function`不应该返回状态代码，而是在发生错误时抛出异常。
请注意，如果您尝试访问文件并且发生其中一个错误，则框架会抛出我在上面的代码块中说明的异常。因此，您实际上不必自己执行此操作。

* * *

此外，在 C# 中，没有从整数值到 bool 的隐式转换，即`if(function())`如果`function`返回. 则无效`int`。你需要这样写：

```
if(function() != 0)
{
    // all your error stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T12:19:16.410

没有什么可以阻止您这样做（尽管有更好的方法来处理错误 -例如[异常）。](http://msdn.microsoft.com/en-us/library/ms173160%28v=vs.100%29.aspx)

如果您确实想继续使用这种方法，那么您遇到的最大问题是在 C# 中您不能将整数视为布尔值，因此您的 if 测试将无法编译。你需要的是：

```
if (function1() != 0)
{
} 
```

但是要检查您需要的值：

```
int result = function1();
switch (result)
{
    case 1:
        // Handle this case
        break;
    case 2:
        // Handle this case
        break;
    default:
        // All OK
        break;
} 
```

最好为每个错误情况返回一个枚举类型，这样你就没有幻数，但例外是要走的路：

```
try
{
    function1();
}
catch (SpecificException1 e1)
{
    // Handle this case
}
catch (SpecificException2 e2)
{
    // Handle this case
} 
```

你不应该有一个通用的异常处理程序：

```
catch (Exception e)
{
} 
```

这只是隐藏了其他潜在的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:19:14.347

```
 if(function()==1)
     {

     }

    int function()
     {
      int returnVal =0;
      // do stuff
      // if true return  returnVal =1 else set returnVal =0;
      return  returnVal;
     } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T12:27:31.740

如果你想遵循检查返回值而不是管理错误的模式，你最好使用枚举而不是普通数字。

例如：

```
public enum ResultType
{
    Error = 0,
    Success,
    Waiting
}

public ResultType function()
{
    if (still_waiting)
        return ResultType.Waiting;

    if (error_has_occured)
        return ResultType.Error;

    return ResultType.Success;
}

public void Main()
{
    ResultType result = function();
    switch (result)
    {
        case ResultType.Success:
            MessageBox.Show("all is good");
            break;
        case ResultType.Waiting:
            MessageBox.Show("still waiting...");
            break;
        case ResultType.Error:
            MessageBox.Show("error has occurred");
            break;
    }
} 
```

在幕后，它仍然使用数字，但你为每个数字赋予了一些意义。

# iphone - 从 iOs 应用程序访问 safari 会话数据

> ID：13839582
> 
> 赞同：0
> 
> 时间：2012-12-12T12:15:20.803
> 
> 标签：iphone, ios, xcode, session

我有一个重定向到应用商店的网页，一旦用户安装了应用程序，我希望它根据传递给网页的参数获取一些数据。所以[http://myapp.com/?q=123](http://myapp.com/?q=123)重定向到应用商店进行应用安装，一旦应用打开，它应该从[http://myapp.com/data/123](http://myapp.com/data/123)之类的东西中获取数据 是否有可能在网页上启动会话并将 123 存储在那里，然后从应用程序调用域上的任何页面并从那里检索 123？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:25:14.510

据我所知，不可能将一些价值传递给应用商店，然后在安装时/如果应用程序以某种方式保留该应用程序。您需要做的是在您的网站和应用程序中找到一些识别用户或设备的方法。用户名、电子邮件、Facebook 帐户中的任何内容都可以。设备 ID 和 MAC 地址之类的东西也几乎不受限制，如果不是不可能的话。我希望这会有所帮助，或者也许还有另一种我不知道的解决方案。

# coldfusion - ColdFusion：您能否使用 recordCount 从查询中提取唯一记录？

> ID：13839586
> 
> 赞同：1
> 
> 时间：2012-12-12T12:15:34.297
> 
> 标签：coldfusion

这是一个有点棘手的问题，但是，我的大多数评级乐队的页面会按照他们的评级高低显示乐队徽标。我唯一的问题是我想通过使用从 1 到 10 的 cfloop 来计算记录，因为它被分成两列，一个从 1 到 9，另一个从 2 到 10，每个都有步骤二。

有人可以帮我吗？如果我感到困惑，只需提及它并尝试澄清我的意思。

```
 <DIV class="community_middle">

    <cfoutput query="top10MostRated">
        <cfloop from="2" to="10" index="i" step="2">
        <DIV class="communityContent">
                            #chr(i)#
            <IMG src="logo/#top10MostRated.Logo#" alt="#top10MostRated.Name#" width="100%" height="100%"></IMG>
        </DIV>
        <BR/>
        </cfloop>
    </cfoutput>

</DIV> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:29:40.417

如果您希望单独执行奇数/偶数列表，则可以使用查询的 currentrow 属性与模运算符 (%) 结合使用来确定该行是奇数还是偶数：

```
<cfloop query="topBands>
  <cfif topBands.currentRow % 2 = 1>
    <!--- do your odd number output here --->
  </cfif>
</cfloop>
<cfloop query="topBands>
  <cfif topBands.currentRow % 2 = 0>
    <!--- do your even number output here --->
  </cfif>
</cfloop> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:13:40.177

我认为这些答案解决了您问题的并列部分，但没有解释“相同图像”问题。他们的代码编写正确，但没有解释原因。

你的代码：

```
 <IMG src="logo/#top10MostRated.Logo#" 
             alt="#top10MostRated.Name#" 
             width="100%" height="100%"></IMG> 
```

...如果您只在 a `<cfloop query = "top10MostRated">`or`<cfoutput query = "top10MostRated">`块内就可以了。原因是因为在这些类型的块中，CF 足够聪明，可以知道您想要当前行的数据。这将与以下内容相同：

```
 <IMG src="logo/#top10MostRated.Logo[top10MostRated.currentRow]#" 
             alt="#top10MostRated.Name[top10MostRated.currentRow]#" 
             width="100%" height="100%" /> 
```

因为您将 to/from 嵌套`cfloop`在一个`<cfoutput query = "">`块内，所以您会得到意想不到的结果。您现有的代码总是要求您的外部循环提供的记录。因此，您会看到相同的图像 5 次。（使用提供的任何优秀示例将帮助您摆脱这种情况）但是，您可以从您的查询中删除查询，`cfoutput`并简单地要求 CF 使用您的索引向您显示循环中正确行的值（您将索引设置为"i") 所以下面会显示与你的循环相对应的图像。

```
 <IMG src="logo/#top10MostRated.Logo[i]#" 
              alt="#top10MostRated.Name[i]#" 
              width="100%" height="100%" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:19:15.950

听起来您想要得到的是偶数记录的集合和奇数记录的集合。在 Coldfusion 10 或 Railo 4 中，您可以使用[Underscore.cfc 中的 groupBy()](http://russplaysguitar.github.com/UnderscoreCF/#groupBy)将查询结果拆分为可管理的子集，如下所示：

```
_ = new Underscore();// instantiate the library
groupedBands = _.groupBy(topBands, function (val, index) {
   return index % 2 ? "odd" : "even";
}); 
```

这将返回一个具有两个元素`odd`和的结构`even`，每个元素都包含一个奇数或偶数记录数组。示例结果：

```
{
   odd: [{name: "Band one"}, {name: "Band three"}],
   even: [{name: "Band two"}, {name: "Band four"}]
} 
```

将结果拆分为逻辑子集使代码更具可读性：

```
<cfoutput>
   <cfloop from="1" to="5" index="i">
      <div class="left">#groupedBands.odd[i].name#</div>
      <div class="right">#groupedBands.even[i].name#</div>
   </cfloop>
</cfoutput> 
```

如果需要，您还可以在页面的其他位置使用这些子集。

注意：我写了 Underscore.cfc

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:31:27.690

本·纳德（Ben Nadel）为此专门写了一篇文章。链接[在这里](http://www.bennadel.com/blog/665-And-On-The-Seventh-Row-MOD-Created-1-And-It-Was-Good.htm) 对此的细分是

```
<cfloop query="top10MostRated">
    <cfif top10MostRated.CurrentRow MOD 2>
        <!--- Add to the "odd list" --->
    <cfelse>
        <!--- Add the record to the "even list" --->
    </cfif>
</cfloop> 
```

然后你将有 2 个列表*oddList*和*evenList*。然后只是显示它们的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T13:06:27.623

我会用不同的方式来做。目标是并排记录 1 和 2，我在@barnyr 的回答中看不到这一点。

```
<cfoutput>
<cfloop from="2" to="topbands.recordcount + 1" index = "i" step="2">
    #topbands.fieldname[i-1]#  
    <cfif i lte topbands.recordcount>
        #topbands.fieldname[i]# <br />
    </cfif>
</cfloop>
</cfoutput> 
```

# asp.net - AJAX :: Tabcontainer 不正确显示选项卡？

> ID：13839588
> 
> 赞同：1
> 
> 时间：2012-12-12T12:15:38.047
> 
> 标签：asp.net, .net, tabcontainer

我正在为 asp.net 使用 AjaxToolkit 的 TabContainer 控件，但是当我在我的项目中使用它时，它不能正确显示。我用谷歌搜索了很多，但找不到合适的解决方案，请参见下图，请帮助我。 ![在此处输入图像描述](../Images/82f61453ee17855f6b9a542559670d0a.png)

代码：

```
<asp:TabContainer ID="TabContainer1" runat="server">
                <asp:TabPanel ID="tbpnluser" runat="server">
                    <HeaderTemplate>
                        Item Detail</HeaderTemplate>
                    <ContentTemplate>
                        <asp:Panel ID="itemDetailGrdPanel" runat="server">
                            <asp:GridView ID="grdItemDetail" runat="server" AutoGenerateColumns="False" OnRowCreated="gridView_RowCreated"
                                GridLines="None" OnRowDataBound="gridView_RowDataBound" CellPadding="4" ForeColor="#333333"
                                AllowPaging="True" PageSize="5" AutoGenerateSelectButton="True" >
                                <AlternatingRowStyle BackColor="White" />
                                <Columns>
                                    <asp:BoundField HeaderText="Item Code" DataField="ItemCode">
                                        <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="50px" />
                                        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="50px" />
                                    </asp:BoundField>
                                    <asp:BoundField HeaderText="Item Description" DataField="ItemDescription">
                                        <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="150px" />
                                        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="150px" />
                                    </asp:BoundField>
                                    <asp:BoundField HeaderText="Detail" DataField="ItemDetail">
                                        <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="100px" />
                                        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="100px" />
                                    </asp:BoundField>
                                    <asp:BoundField HeaderText="Quantity" DataField="Quantity">
                                        <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="100px" />
                                        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="100px" />
                                    </asp:BoundField>
                                </Columns>
                                <EditRowStyle BackColor="#2461BF" />
                                <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                                <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                                <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
                                <RowStyle BackColor="#EFF3FB" />
                                <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
                            </asp:GridView>
                        </asp:Panel>
                        <asp:Panel ID="itemDetailEditPanel" runat="server">
                            <table align="left" style="width: 187px">
                                <tr>
                                    <td>
                                    </td>
                                    <td align="left">
                                        Item Code:
                                    </td>
                                    <td>
                                        <asp:TextBox ID="txtItemCode" runat="server" ReadOnly="True"></asp:TextBox>
                                    </td>
                                    <td>
                                        <asp:Button ID="btnFindItemCode" runat="server" Text="Find" />
                                    </td>
                                </tr>
                                <tr style="height:70px; vertical-align:top; ">
                                    <td>
                                    </td>
                                    <td  >
                                        Item Description:
                                    </td>
                                    <td>
                                        <asp:TextBox ID="txtItemDescription" runat="server" Height="54px"></asp:TextBox>
                                    </td>

                                </tr>
                                <tr style=" vertical-align:top; ">
                                    <td>
                                    </td>
                                    <td  >
                                        Item Detail:
                                    </td>
                                    <td>
                                        <asp:TextBox ID="txtItemDetail" runat="server" Height="23px"></asp:TextBox>
                                    </td>

                                </tr>
                                <tr style=" vertical-align:top; ">
                                    <td>
                                    </td>
                                    <td  >
                                        Quantity:
                                    </td>
                                    <td>
                                        <asp:TextBox ID="txtQuantity" runat="server" Height="23px"></asp:TextBox>
                                    </td>

                                </tr>

                            </table>
                        </asp:Panel>
                    </ContentTemplate>
                </asp:TabPanel>
                <asp:TabPanel ID="tbpnlusrdetails" runat="server">
                    <HeaderTemplate>
                        User Details</HeaderTemplate>
                    <ContentTemplate>
                        <asp:Panel ID="Panel1" runat="server">
                            <table align="center">
                                <tr>
                                    <td align="right" colspan="2">
                                    </td>
                                    <td>
                                        <b>User Details</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right" colspan="2">
                                        UserName:
                                    </td>
                                    <td>
                                        <b>Suresh Dasari</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right" colspan="2">
                                        FirstName:
                                    </td>
                                    <td>
                                        <b>Suresh</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right" colspan="2">
                                        LastName:
                                    </td>
                                    <td>
                                        <b>Dasari</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right" colspan="2">
                                        Email:
                                    </td>
                                    <td>
                                        <b>sureshbabudasari@gmail.com</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right" colspan="2">
                                        Phone No:
                                    </td>
                                    <td>
                                        <b>1234567890</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right" colspan="2">
                                        Location:
                                    </td>
                                    <td align="left">
                                        <b>Hyderabad</b>
                                    </td>
                                </tr>
                            </table>
                        </asp:Panel>
                    </ContentTemplate>
                </asp:TabPanel>
                <asp:TabPanel ID="tbpnljobdetails" runat="server">
                    <HeaderTemplate>
                        Job Details</HeaderTemplate>
                    <ContentTemplate>
                        <asp:Panel ID="Panel2" runat="server">
                            <table align="center">
                                <tr>
                                    <td>
                                    </td>
                                    <td align="right">
                                    </td>
                                    <td>
                                        <b>Job Details</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                    </td>
                                    <td align="right">
                                        Job Type:
                                    </td>
                                    <td>
                                        <b>Software</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                    </td>
                                    <td align="right">
                                        Industry:
                                    </td>
                                    <td>
                                        <b>IT</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                    </td>
                                    <td align="right">
                                        Designation:
                                    </td>
                                    <td>
                                        <b>Software Engineer</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                    </td>
                                    <td align="right">
                                        Company:
                                    </td>
                                    <td>
                                        <b>aspdotnet-suresh</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                    </td>
                                    <td align="right">
                                        Phone No:
                                    </td>
                                    <td>
                                        <b>1234567890</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                    </td>
                                    <td align="right">
                                        Location:
                                    </td>
                                    <td align="left">
                                        <b>Hyderabad</b>
                                    </td>
                                </tr>
                            </table>
                        </asp:Panel>
                    </ContentTemplate>
                </asp:TabPanel>
            </asp:TabContainer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:25:15.810

尝试使用（也）该`HeaderText`属性：

```
<asp:TabPanel ID="tbpnluser" runat="server" HeaderText="Item Detail">
    <HeaderTemplate>
        Item Detail</HeaderTemplate>
    <ContentTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:31:26.027

对于面板，`itemDetailEditPanel`使用此标记：

```
<asp:Panel ID="itemDetailEditPanel" runat="server" style="display: table-cell;align: left;">
    <table style="width: 187px;"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T22:16:25.830

我发现如果我的浏览器处于兼容模式，我会得到这个，但在标准模式下，它工作得很好。经过一堆黑客攻击，我找到了兼容模式的解决方法：

尝试将此添加到您的`style`标签中：

```
 /* Deals with TabPanel height issue in Compatibility mode */
    .ajax__tab_xp .ajax__tab_header .ajax__tab_tab 
    {
        height: 22px !important;
    } 
```

这有`!important`帮助，因为其他东西正在缩小高度，导致空白出现在下面。 `!important`确保您的代码优先。

# javascript - javascript sdk 和画布应用程序

> ID：13839591
> 
> 赞同：1
> 
> 时间：2012-12-12T12:15:42.807
> 
> 标签：javascript, facebook-javascript-sdk, facebook-canvas

我有一个使用 c# facebook graph toolkit 的画布应用程序，但我使用 javascript sdk 来执行一些功能，最值得注意的是 facebook 对话框，包括提要帖子、facebook 积分实现和请求对话框。真的，我从 javascript sdk 中使用的是 FB.ui 和 FB.Canvas。javascript sdk 的使用会被视为 facebook 连接实现吗？

我不通过 javascript sdk 登录，我只是检查现有登录名，然后使用它来访问我需要的 javascript 功能。

我担心的是 facebook 会将应用程序视为连接应用程序而不是画布应用程序。有人知道吗？

# regex - 正则表达式 {} 解析

> ID：13839592
> 
> 赞同：4
> 
> 时间：2012-12-12T12:15:48.077
> 
> 标签：regex, c#-4.0, regex-greedy

您好，我在解析此文本时遇到问题

```
{
    {
        {
            {[system1];1;1;0.612509325};
            {[system2];1;1;0.977659115};
            {[system3];1;1;36.97828732969};
            {[system4];1;1;61.43154423}
        };2.5469
    };
    {
        {
            {[system5];1;1;0.9613443};
            {[system6];1;1;2.06340392};
            {[system7];1;1;4.12680784};
            {[system8];1;1;6.18989626};
            {[system9];1;1;24.75958504758};
            {[system10];1;3;61.8989626189}
        };31.6952
    }
} 
```

我需要把它解析成这样的对象

```
class Group
{
  Rate = 31.6952
  Systems = 
   {
    System5 = {[system5];1;1;0.9613443};
    System6 ={[system6];1;1;2.06340392};
    System7 ={[system7];1;1;4.12680784};
    System8 ={[system8];1;1;6.18989626};
    System9 ={[system9];1;1;24.75958504758};
    System10 ={[system10];1;3;61.8989626189}
   }
} 
```

我试过了

> ({[^{}] *})*

但它不能很好地分组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:28:31.230

试试这个正则表达式

```
{[\d\w]*.*?} 
```

它会回来

```
{[system5];1;1;0.9613443} 
```

从

```
System5 = {[system5];1;1;0.9613443}; 
```

# customization - 自定义 Alfresco Share 时的扩展模块 VS 网络扩展

> ID：13839595
> 
> 赞同：0
> 
> 时间：2012-12-12T12:16:15.697
> 
> 标签：customization, share, alfresco

好吧，我几个月前就开始使用 Alfresco 4.2b，主要是使用 Share。我正在执行一些定制工作，我的同事和我自己总是想知道这篇文章的主题。

我们知道扩展模块是一个相对较新的功能，自 Alfresco 4 的第一个版本以来就可以使用，但我们不知道在所使用的扩展机制方面应该采用哪种方式进行开发。我们正在努力使用扩展模块机制，而不是使用 web-extension 目录。我们这样做是因为我们知道它可能更具通用性、可维护性和可扩展性，谁知道呢，也许在以后的版本中可能会弃用 web-extension 目录。我们也知道，目前你不能用扩展模块做“一切”。

因此，据此，我想根据其他开发人员的经验了解这两种机制的优缺点，以及我们的扩展理念是否正确。同时，我想为接下来的问题找到一个合理的答案：

1.  我们是否正在正确地确定优先级并“牺牲”我们尝试使用扩展模块进行定制的时间？这值得吗？

2.  是否可以在后续版本中弃用 web-extension 目录作为自定义机制？

3.  扩展模块功能是否会得到改进？

4.  （大致）扩展模块的已知限制？主要的问题可能是，什么时候应该使用一种扩展机制或另一种？

我期待听到您的意见。根据您的真实经验并尽可能诚实，我们将非常感谢您的意见。

首先十分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:03:28.703

其实两者并不排斥。

例如，我使用自己的扩展机制来定义 web 扩展文件夹中定义的 web 脚本的新组件。

事实上，扩展模块本身可以位于 alfresco/web-extension/site-data/extensions/... 下的 web-extension 文件夹中

对我来说，使用扩展模块是一种逻辑打包（因为模块的部署过程）您的定制的方法。这是主要优势，因为如果您希望自定义仅在特定条件下可用，则可以通过评估器对其进行配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:53:21.167

该`web-extension`路由的两个主要问题是，您最终会在您的定制中复制核心代码，并且如果多个扩展试图扩展同一个组件，那么一个必须获胜。

可扩展性模块可能需要做更多的工作，但在大大减少维护负担以及解决多个附加组件相互冲突时的问题方面，您将得到更多回报。

从 4.2 开始，您不需要覆盖 Web 脚本组件 - 至少在 Share 中。您应该始终使用可扩展性模块。

# python - 我有一长串需要排序的元组，例如。[('12/2010', 196.9876),('12/2010', 654.9876), ('11/2010', 234.9876)......]

> ID：13839598
> 
> 赞同：3
> 
> 时间：2012-12-12T12:16:27.950
> 
> 标签：python, list, tuples, pandas-groupby

我有一长串需要排序的元组，例如。`[('11/2010', 196.9876),('11/2010', 654.9876), ('12/2010', 234.9876).........]`

我想使用 date(1st element) 将元组中的第二个元素分组到单独的列表中。到目前为止，我已经得到了一个唯一日期列表，例如`[11/2010,12/2010....]`，我试图使用这些来引用更大的列表并进行数学计算，我想出了：

```
vol_new = []
for monthrow in unique_date_list: 
    for row in date_and_av_tup: 
        if monthrow == row[0]:
            vol_new.append(row[1])
            len_vol_new = len(vol_new) # finds the n of items in volume list
            my_vol_total_new = reduce(lambda y,x: x+y, vol_new) # adds everything in the volume list
            average_vol_new = float(my_vol_total_new) / float(len_vol_new) #stores the average volume in a list

print average_vol_new 
```

这可能是真正的垃圾代码，但我是编码新手，尝试这样做非常沮丧，感谢提供的任何帮助。

PS我正在使用Python

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T12:42:10.003

您可能会发现[pandas](http://pandas.pydata.org/)数据分析库对此非常有用，可用于创建可以轻松执行这些功能的表。例如：

```
import pandas as pd

months = [('11/2010', 196.9876),('11/2010', 654.9876), ('12/2010', 234.9876)]
df = pd.DataFrame(months, columns=['Month', 'Value']) 
```

`df`是一个[DataFrame](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)（即一个表），它看起来像：

```
 Month   Value
0    11/2010     196.9876
1    11/2010     654.9876
2    12/2010     234.9876 
```

您可以使用以下方法获取平均值和总数`groupby`：

```
[7]:  df.groupby('Month').mean()
Out[7]:         Value    
        Month   
        11/2010  425.9876
        12/2010  234.9876

In [8]: df.groupby('Month').sum()
Out[8]:          Value
        Month   
        11/2010  851.9752
        12/2010  234.9876 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T12:31:23.397

使用 defaultdict 进行分组。

```
from collections import defaultdict
d = defaultdict(list)
for date, val in unique_date_list:
    d[date].append(val)
result = d.items() 
```

**编辑**

重读您的问题后，我看到您只需要根据日期分组的值，而不需要日期。在这种情况下，我示例中的最后一行将是

```
result = d.values() 
```

**编辑 2**

正如 Geoff 指出的那样，OP 希望列表按排序顺序排列。最后一行将是：

```
result = [sorted(vals) for _, vals in sorted(d.iteritems(), key=lambda x : x[0])] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T12:36:33.593

尝试以下实现

```
somelist = [('11/2010', 196.9876),('11/2010', 654.9876), ('12/2010', 234.9876)]
#Create a defaultdictionary
somedict = defaultdict(list)
#and append the tuples as key value pair to it
#note the values would be augmented as a list
for k, v in somelist:
    somedict[k].append(v)

#Now sort the generated expression which creates a tuple pair of sorted values  
sorted((k, sorted(v)) for k, v in somedict.iteritems())
[('11/2010', [196.9876, 654.9876]), ('12/2010', [234.9876])] 
```

当您处理大量列表时，您可能有兴趣了解性能。这是酸性测试

```
>>> def foo(lst):
    somedict = defaultdict(list)
    for k, v in lst:
        somedict[k].append(v)
    sorted((k, sorted(v)) for k, v in somedict.iteritems())
>>> somelist = [(random.randint(1,10),random.randint(1,1000)) for _ in range(1000000)]
>>> len(somelist)
1000000
>>> timeit.timeit("foo(somelist)",setup="from __main__ import foo, somelist",number=1)
0.9819706362000886
>>> 
```

# objective-c - 如何让应用使用 Growl on Lion 和 Notification Center on Mountain Lion？

> ID：13839599
> 
> 赞同：3
> 
> 时间：2012-12-12T12:16:28.327
> 
> 标签：objective-c, macos, cocoa, growl, nsusernotification

我正在制作一个使用山狮通知中心的应用程序。我加入了对雪豹和狮子咆哮的支持。如何使二进制文件能够在两者上运行而不需要 2 个单独的 .app 包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:43:48.810

我猜你会针对 Growl 框架和 10.7 构建一个应用程序，然后有代码在启动时检查通知中心是否可用（它将在 10.8+ 上）并改用它。[这里](https://stackoverflow.com/questions/11736877/how-to-build-an-app-that-runs-on-mac-os-10-6-and-supports-the-nsusernotification)有一个关于这个过程的非常相似的问题。

# r - 链接两个数据集

> ID：13839600
> 
> 赞同：2
> 
> 时间：2012-12-12T12:16:29.913
> 
> 标签：r, dataset

我有一个名为“J_BL5H1”的数据集，其中包括：

```
Var1    Freq
4   10
8   10
10  13
11  7
13  3
17  10
19  10
25  1
26  4
27  8
53  13 
```

从这个数据集中，我想分别找到所有的 Var1，我想把这个新数据称为 J_BL5H1JNVar1Number，这里 Var1Number 表示特定的 Var1，例如“4、8、10”。

我会用这个：

```
J_BL5H1JNVar1Number <- J_BL5H1$Freq[1] 
```

在这里，我想将旧数据中的 Var1Number 替换为“Var1”值。

例如，如果我想知道“Freq[4]”，我的新数据应该被称为“J_BL5H1JN11”，“Var1Number”将自动替换为 Freq[4] 的 Var1，在本例中为 11。

我希望我能清楚地说明我的问题，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:13:54.117

首先使用`paste`创建data.sets的名称：

```
 data.string <- "J_BL5H1LN"
 split.var <- "Var1"
 data.sets <- paste(data.string, J_BL5H1[, split.var], sep = "") 
```

`assign`然后对数据集的相应值使用循环：

```
 for( i in seq_along(data.sets) ) assign(data.sets[i], J_BL5H1[i, "Freq"]) 
```

现在您的工作区中有数据集：

```
ls() 
```

顺便说一句，如果您想访问不同的数据集而不是每次都实际调用它们，您可以使用以下`get`函数按名称访问它们：

```
sapply(data.sets, get) 
```

# javascript - 避免在页面加载或准备就绪时执行 javascript 的最佳方法？

> ID：13839605
> 
> 赞同：1
> 
> 时间：2012-12-12T12:17:07.000
> 
> 标签：javascript, jquery, asp.net, html

我有一个 asp.net 页面，当文本框为空时，我需要将整个页面隐藏在后面的代码中。问题是我有 javascript 和 jquery 代码**在文档就绪**时执行并从某些页面控件获取数据，并且由于未呈现控件，因此此代码失败并引发异常。

在代码后面我隐藏了整个页面

```
// allPageTable is an html table
// with runat=server
this.allPageTable.Visible = false; 
```

在 Javascript 中，我检查文本框是否为空，如果不是，则运行代码，否则不运行。但是`mytxt`没有定义所以它进入`if`并且失败了。

```
 if ($('#myTxt') != null) {
    // My JQUERY / JS CODE
    var data = $('#anotherTxt').val(); // Fails cause anotherTxt is not rendered
} 
```

所以我需要一种方法来避免在页面未呈现时执行 javascript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:27:04.627

当您使用 id 进行控制时，选择器`$('#myTxt')`不会返回 null，myTxt 不存在。您需要检查`length`选择器返回的对象。

```
if ($('#myTxt').length > 0) {
    // My JQUERY / JS CODE
    var data = $('#anotherTxt').val(); // Fails cause anotherTxt is not rendered
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:29:11.740

首先，你需要在“documentReady”上执行这个脚本，“onLoad”不是那么必要。要检查复选框是否存在，您可以使用`$('#myTxt').length > 0`，因为从 jQuery 选择器机制返回的所有内容都表示在元素数组中，即使它是一个 html 元素。

`$(window).load`在加载完所有内容并呈现包含 css 的 html 页面后执行。如果您的脚本可以在 Windows 负载上运行，那么您将获得一些“闪烁”效果。（一切渲染后消失）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:44:47.913

您可以将 javascript 代码放在占位符控件中，然后设置该控件的可见性，方法与为 html 表设置它的方式相同。这样你的脚本就不会出现在页面上。它需要一些额外的注意来避免函数/变量的“错误使用”，但它是一个通用的解决方案。

```
<table id="allPageTable" runat="server">
    ...
</table>

<%= "<script type=\"text/javascript\" language=\"javascript\">" %>
<asp:PlaceHolder runat="server" ID="PlaceholderJS">
    javascript code here
</asp:PlaceHolder>
<%= "</script>"%> 
```

.

```
this.allPageTable.Visible = PlaceholderJS.Visible = false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:32:32.617

```
var i = 0;

var interval = setInterval(function () {
    i = i + 1;

    if(typeof($('#myTxt')) != 'undefined') {
         // do your stuff
         clearInterval(interval);
    }

}, 1000); 
```

不要如果这是最好的方法，也许其他人会发布更好的方法......

# powershell - Set-QADUser 失败，因为它返回的是组而不是用户

> ID：13839616
> 
> 赞同：0
> 
> 时间：2012-12-12T12:17:39.717
> 
> 标签：powershell, powershell-2.0

我有一个脚本可以从 CSV 更新各种 AD 属性。

它工作正常，除了几个用户。他们的登录名很短，分别是 DA 和 RS，我收到以下错误：

```
Set-QADUser : Target object is of invalid type: 'group'. 'user' expected. 
```

违规行上的代码是：

```
Set-QADUser DA -Title "Manager" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:22:50.463

想通了 - 使用 DN 而不是 SAM 帐户名

# c# - dbContext.ExecuteStoreQuery 不在 dbcontext 上存储对象？

> ID：13839617
> 
> 赞同：0
> 
> 时间：2012-12-12T12:17:46.987
> 
> 标签：c#, entity-framework-5, dbcontext, executequery

我正在使用 entityframework 5，我注意到如果我使用 linq 从我的 db 加载一个对象，我的结果对象将存储在 dbcontext 中，但是如果我想使用 ExecuteStoreQuery 加载相同的对象，则结果不会存储在 db语境。

这是预期的行为吗？或者我能做些什么来维护secon way查询con dbcontext的结果？

**第一种方式（LINQ）：**

```
var obj = dbcontext.table.where(o=> o.id == queryId).FirstOrDefault(); 
```

**第二种方式（ExecuteStoreQuery）：**

```
var obj = dbcontext.executestorequery("select * from...").FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:35:11.463

`Database`在 DbContext API 中没有`ExecuteStoreQuery`- 这是来自`ObjectContext`. DbContext API 只使用`SqlQuery`方法。

如果您想使用本机 SQL 获得与使用 Linq 查询相同的行为，则必须使用：

```
var obj = dbcontext.table.SqlQuery("select * from ... "); 
```

`SqlQuery`直接在`DbContext`实例上调用或在实例上调用之间的区别在于`DbSet<>`，在第一种情况下，结果不会被上下文附加和跟踪，但在第二种情况下它是。

如果您使用 ObjectContext API，则需要使用重载版本`ExecuteStoreQuery`并将实体集的名称作为第二个参数传递，否则上下文不会跟踪结果。

# iphone - 关于iOS绘图的问题

> ID：13839624
> 
> 赞同：2
> 
> 时间：2012-12-12T12:17:59.793
> 
> 标签：iphone, objective-c, drawing, drawrect, cgcontext

我想在我的 iPhone 屏幕底部创建一个小导航栏，我基本上只是在其中绘制 5 个彼此相邻的矩形。但是，只有活动页面的不透明度应为 1.0，其他页面应略微透明（alpha=0.4）。**那是我已经拥有的。**

**现在我的问题：**

*   如何更改导航中各个元素的不透明度？每当事情发生变化时，我是否必须重新绘制整个事情？所以我会有名为 nav1Opacity,nav2Opacity...nav5Opacity 的全局变量，在导航更改时更改它们并重绘整个内容？如果是这样的话，

*   如何清除我之前绘制的内容？我是否将矩形创建为`CGMutablePathRef()`s 并将它们存储在数组中并全部清除？

我对绘画的经验很少，所以我有点迷茫。我已经阅读了 Quartz2d 和上下文的文档，但是，正如我所提到的，我还没有完全弄清楚它是如何工作的。

**这是我使用的一些代码：**

```
-(void)drawRect:(CGRect)rect{

    CGContextRef context = UIGraphicsGetCurrentContext();
    //save state
    CGContextSaveGState(context);

    //NAV1
    CGMutablePathRef nav1 = CGPathCreateMutable();
    CGPathAddRect(nav1, NULL, CGRectMake(0 , 15, 64, 10));
    UIColor *blueColor = UIColorFromRGB(0x35BFE5,0.1);
    CGColorRef bC = [blueColor CGColor];
    [colorArray addObject:(__bridge id)bC];
    [navArray addObject:(__bridge id)nav1];
    CGPathRelease(nav1);
    /*
     *
     *
     ... I do this for all 5 navigation elements

     *
     *
     */

    //then I go through all my rectangles and add/fill them
    for(int i=0;i<[navArray count];i++){
        CGContextAddPath(context, (__bridge CGMutablePathRef)[navArray objectAtIndex:i]);
        CGContextSetFillColorWithColor(context, (__bridge CGColorRef)[colorArray objectAtIndex:i]);
        CGContextFillPath(context);

    }

    // restore to last saved context state 
    CGContextRestoreGState(context);
}

//and this is how I redraw
-(void)updateActiveNav{
    [navArray removeAllObjects];
    [colorArray removeAllObjects];
    [self setNeedsDisplay];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:43:08.650

这就是问题：

```
for(int i=0;i<[navArray count];i++){
        CGContextAddPath(context, (__bridge CGMutablePathRef)[navArray objectAtIndex:i]);
        CGContextSetFillColorWithColor(context, (__bridge CGColorRef)[colorArray objectAtIndex:i]);
        CGContextFillPath(context);

    } 
```

您被添加到上下文的路径，然后设置填充颜色，然后填充它。然后在不恢复您的上下文的情况下再次执行此操作，以便填充先前的路径和新的路径。它不是上一个 drawRect 的绘图，而是来自这里的绘图。尝试以下类似的操作，以便在填充路径后重置上下文并自行绘制下一个块，而不是第一个和第二个等。

```
for(int i=0;i<[navArray count];i++){
    CGContextSaveGState(context);
    // Add Path, Fill
    CGContextRestoreGState(context);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:45:47.347

如果您实际*绘制*界面，则无论何时更改都必须重新绘制它，至少是更改的矩形。您可以重复使用 CGPath，但它们不是屏幕上的图形对象，它们只是有关如何绘制形状的说明，因此您必须重新绘制所有内容。

话虽如此，您可以改用代表屏幕对象的单个 UIView，并且您可以更改它们的不透明度，这将反映在屏幕上。

# opencl - OpenCL 中的内存复制不正确

> ID：13839626
> 
> 赞同：0
> 
> 时间：2012-12-12T12:18:01.353
> 
> 标签：opencl

我的 openCL 程序出现一些异常行为。

在程序的主机部分中，我创建了一个双精度数组并将所有元素设置为零。该数组使用以下命令复制到 GPU：

```
memObjects[4] = clCreateBuffer(context, CL_MEM_READ_WRITE | CL_MEM_COPY_HOST_PTR,
                             sizeof(double) * I_numel, I, NULL); 
```

在内核内部，根据某些条件将某些元素设置为 1，然后我将其读回主机：

```
errNum = clEnqueueReadBuffer(commandQueue, memObjects[4], CL_TRUE, 0,
                           I_numel * sizeof(double), I, 0, NULL, NULL); 
```

但是，一些应该为零的元素已更改为非常小（ 6.953267903e-310 ）或非常大的数字（ 2.0002319483e+161 ）！？！

我尝试将 double 更改为 float，但结果相似。我正在使用 openCL 的 nvidia 实现，版本是 1.1。有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:58:47.323

我怀疑你的内核代码有问题。如果你只执行 clEnqueueRead 而不运行内核会发生什么，你会得到全零吗？如果您删除 CL_MEM_COPY_HOST_PTR 并使用 clEnqueueWrite 清除缓冲区怎么样？

我试图用这个简化的内核重现这个问题，但输出只是交替的零和一，正如预期的那样：

```
kernel void enqueueReadBuffer(global float* outputValueArray) {
  int gid = get_global_id(0);
  if (gid % 2 == 0) {
    outputValueArray[gid] = 1.0f;
  }
} 
```

我在 Windows 7 上的三个不同 OpenCL 驱动程序上运行此程序，包括 NVIDIA Quadro FX4800 (R307.45)，并在所有驱动程序上都得到了正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:23:41.920

尝试用这个替换显示的代码，然后发布错误号

```
cl_int err;
memObjects[4] = clCreateBuffer(context, CL_MEM_READ_WRITE | CL_MEM_COPY_HOST_PTR,
                             sizeof(double) * I_numel, I, &err);

printf("Buffer creation error no = %d", err); 
```

**而对于复制回来**

```
cl_int err2;
err2= clEnqueueReadBuffer(commandQueue, memObjects[4], CL_TRUE, 0,
                           I_numel * sizeof(double), I, 0, NULL, NULL);
printf("Copy back error no = %d", err2); 
```

# azure - “'Content-Type' 是一个意外的标记。” 使用 Windows Azure PowerShell 模块时出错

> ID：13839634
> 
> 赞同：1
> 
> 时间：2012-12-12T12:18:48.597
> 
> 标签：azure

无论我从 Windows Azure PowerShell 模块运行什么命令，都会遇到同样的错误。例子：

```
Get-AzureStorageAccount : 'Content-Type' is an unexpected token. The expected token is '"' or '''. Line 2, position 18.
At line:1 char:24
+ Get-AzureStorageAccount <<<<  -StorageAccountName "bzyeastussys"
    + CategoryInfo          : CloseError: (:) [Get-AzureStorageAccount], XmlException
    + FullyQualifiedErrorId : Microsoft.WindowsAzure.Management.ServiceManagement.StorageServices.GetAzureStorageAccountCommand 
```

我完全不知道问题是什么。

我已经成功设置了我的订阅详细信息（我可以执行“Get-AzureSubscription”），但是我使用的任何调用 Azure 服务的命令都会给我这个关于“Content-Type”是意外令牌的错误。我可以毫无问题地使用旧的“Windows Azure PowerShell Cmdlets”。

关于“Windows Azure PowerShell”可能存在什么问题的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:12:52.900

问题归结为正在使用互联网代理。该请求正在接受身份验证，因此出现错误。

# mysql - 试图获取名字和姓氏

> ID：13839640
> 
> 赞同：1
> 
> 时间：2012-12-12T12:19:13.290
> 
> 标签：mysql, sql

跟随我的 sql 小提琴：[http ://sqlfiddle.com/#!2/62429/2](http://sqlfiddle.com/#!2/62429/2)

我有一个用户名，我需要在名字和姓氏之间分开。我想到的一个逻辑是根据父亲的名字获取姓氏，这意味着如果`Nick samuel is username and samuel james is father's name`samuel 在父亲的名字中，那么它就成为用户的姓氏，剩下的成为用户的名字。请让我知道如何在我的小提琴中实现这个逻辑。此外，假设父亲姓名和用户名之间不匹配，那么根据我们预定义的比率（由“”分隔的用户名字符串计数，因此名称`nick jhon`计数为 2，除以 2 为 1，因此对于该计算值，我们'将使名字成为字符串的第一部分，即 jhon 和 rest 成为姓氏，对于像这样的名字`jammie james jonathan bing`然后它的计数除以 2 并给出 2，因此在这种情况下，前两个字符串成为名字，剩下的成为姓氏）。我在实现这两种逻辑时感到困惑，所以我寻求帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:50:05.703

我在这里解决了

[http://www.sqlfiddle.com/#!2/b6f85/6](http://www.sqlfiddle.com/#!2/b6f85/6)。

它会将您的用户名的最后一个单词作为姓氏返回，而用户名的其余部分将成为它的名字..

# clearcase - 如何避免“没有权限执行操作”Make attribute“UCM”错误信息？

> ID：13839646
> 
> 赞同：1
> 
> 时间：2012-12-12T12:19:28.273
> 
> 标签：clearcase

当我尝试编辑`Proj_Mgr`UCM 中的值时，我收到以下错误。

请指教

```
no permission to perform operation "Make attribute" UCM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:50:34.017

您必须看到如下错误：

```
No permission to perform Make Attribute. 
Must be one of: member of object group, object owner, VOB owner, member of admin group 
```

因此，请检查您的`CLEARCASE_PRIMARY_GROUP`环境变量，并将其与 vob 组或关联的 pvob（在 UCM 中）进行比较。
您可以通过描述 vob 来查看这些内容：

```
cleartool descr -l vob:\myVob 
```

作为可能的原因，请查看 IBM 技术说明
“[如果 ClearCase 管理员组拥有 VOB 或 VOB 对象时出现的问题](http://www-01.ibm.com/support/docview.wss?uid=swg21264867)”：

> 当 VOB 或 VOB 中包含的对象（元素和元数据）归 ClearCase 管理员组所有时，当非管理员用户对该对象执行操作时，这肯定会导致权限错误。
> 
> 由于默认情况下管理员组可以访问所有 ClearCase 对象，因此没有必要显式添加该组并且应该避免。

您可以看到弹出该错误的具体场景：
“[设置此流的推荐基线时出错](http://www-01.ibm.com/support/docview.wss?uid=swg21128173)”（尽管对于流。在您的情况下，您不必重新保护 Vob，而是确保您拥有正确的身份/组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:57:23.253

我使用这个命令来解决这个问题（如上所述的保护问题）：

```
ct protect -chgrp ccuser project 
```

# c# - 自定义动作块

> ID：13839649
> 
> 赞同：9
> 
> 时间：2012-12-12T12:19:34.647
> 
> 标签：c#, multithreading, task-parallel-library, .net-4.5, tpl-dataflow

我想实施一个优先的`ActionBlock<T>`. 这样我就可以有条件地`TInput`使用`Predicate<T>`.
我阅读了 [Parallel Extensions Extras Samples](http://blogs.msdn.com/b/pfxteam/archive/2010/04/09/9990424.aspx)和[Guide to Implementing Custom TPL Dataflow Blocks](http://blogs.msdn.com/b/pfxteam/archive/2011/12/05/10244302.aspx)。
但是仍然不知道我该如何实现这种情况。
- - - - - - - - - - - - - - 编辑 - - - - - - - - - - - ------
有一些任务，其中5个可以同时运行。当用户按下按钮时，一些（取决于谓词函数）任务应该以最高优先级运行。
事实上我写了这段代码

```
TaskScheduler taskSchedulerHighPriority;
ActionBlock<CustomObject> actionBlockLow;
ActionBlock<CustomObject> actionBlockHigh;
...
queuedTaskScheduler = new QueuedTaskScheduler(TaskScheduler.Default, 5);
taskSchedulerHigh = queuedTaskScheduler.ActivateNewQueue(0);
taskSchedulerLow = queuedTaskScheduler.ActivateNewQueue(1);
...
actionBlockHigh = new ActionBlock<CustomObject>(new Action<CustomObject>(method), new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = 5, SingleProducerConstrained = false, TaskScheduler = taskSchedulerHigh });
actionBlockLow = new ActionBlock<CustomObject>(new Action<CustomObject>(method), new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = 5, MaxMessagesPerTask = 1, TaskScheduler = taskSchedulerLow });
...     
if (predicate(customObject))
    actionBlockHigh.Post(customObject);
else
    actionBlockLow.Post(customObject); 
```

但似乎优先级根本没有生效。
---------------------------------------- 编辑 ------------------
我找到了事实上，当我使用这行代码时：

```
actionBlockHigh = new ActionBlock<AvlHistory>(new Action<AvlHistory>(SemaphoreAction), new ExecutionDataflowBlockOptions { TaskScheduler = taskSchedulerHigh });
actionBlockLow = new ActionBlock<AvlHistory>(new Action<AvlHistory>(SemaphoreAction), new ExecutionDataflowBlockOptions { TaskScheduler = taskSchedulerLow }); 
```

导致应用程序正确观察Tasks的优先级，但一次只能执行一个任务，同时使用流程中显示的第一个代码块，导致应用程序同时运行5个任务但优先级顺序不合适。

```
actionBlockHigh = new ActionBlock<AvlHistory>(new Action<AvlHistory>(SemaphoreAction), new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = 5, TaskScheduler = taskSchedulerHigh });
actionBlockLow = new ActionBlock<AvlHistory>(new Action<AvlHistory>(SemaphoreAction), new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = 5, TaskScheduler = taskSchedulerLow }); 
```

更新：
要 svick 的坦克，我应该`MaxMessagesPerTask`指定`taskSchedulerLow`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T22:17:05.670

您的问题不包含很多细节，因此以下只是您可能需要的猜测。

我认为最简单的方法是让两个s 在[ParallelExtensionsExtras](http://blogs.msdn.com/b/pfxteam/archive/2010/04/09/9990424.aspx)`ActionBlock`上以不同的优先级运行。您将使用谓词链接到高优先级的链接，然后链接到低优先级的链接。此外，为了确保高优先级的 s 不等待，设置低优先级的块。[`QueuedTaskScheduler`](http://blogs.msdn.com/b/pfxteam/archive/2010/04/09/9990424.aspx)`Task``MaxMessagesPerTask`

在代码中，它看起来像：

```
static ITargetBlock<T> CreatePrioritizedActionBlock<T>(
    Action<T> action, Predicate<T> isPrioritizedPredicate)
{
    var buffer = new BufferBlock<T>();

    var scheduler = new QueuedTaskScheduler(1);

    var highPriorityScheduler = scheduler.ActivateNewQueue(0);
    var lowPriorityScheduler = scheduler.ActivateNewQueue(1);

    var highPriorityBlock = new ActionBlock<T>(
        action, new ExecutionDataflowBlockOptions
        {
            TaskScheduler = highPriorityScheduler
        });
    var lowPriorityBlock = new ActionBlock<T>(
        action, new ExecutionDataflowBlockOptions
        {
            TaskScheduler = lowPriorityScheduler,
            MaxMessagesPerTask = 1
        });

    buffer.LinkTo(highPriorityBlock, isPrioritizedPredicate);
    buffer.LinkTo(lowPriorityBlock);

    return buffer;
} 
```

这只是您可以做什么的草图，例如，`Completion`返回的块的行为不正确。

# python - 使用 image.merge 合并 tif 图像

> ID：13839654
> 
> 赞同：2
> 
> 时间：2012-12-12T12:19:52.053
> 
> 标签：python, python-imaging-library

我正在尝试将 4 个 tif 合并在一起以形成 CMYK 图像。

这是我到目前为止的代码：-

```
import Image

m = "C:\Documents and Settings\dbigwood\Desktop\TEST\magnew.tif"
c = "C:\Documents and Settings\dbigwood\Desktop\TEST\cyannew.tif"
y = "C:\Documents and Settings\dbigwood\Desktop\TEST\yellownew.tif"
k = "C:\Documents and Settings\dbigwood\Desktop\TEST\knew.tif"

im = Image.merge("CMYK",(c,m,y,k))

im.save("C:\Documents and Settings\dbigwood\Desktop\TEST\AAA.tif") 
```

这在运行时给了我一个错误

```
Traceback (most recent call last):
  File "C:\Documents and Settings\dbigwood\Desktop\TEST\try5.py", line 18, in <module>
    im = Image.merge("CMYK",(c,m,y,k))
  File "C:\Python26\ArcGIS10.0\lib\site-packages\PIL\Image.py", line 1996, in merge
    if im.mode != getmodetype(mode):
AttributeError: 'str' object has no attribute 'mode' 
```

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:25:27.743

`m`, `c`,`y`并且`k`需要是`PIL` `Image`对象，例如

```
m = Image.open("C:\Documents and Settings\dbigwood\Desktop\TEST\magnew.tif") 
```

# git - 使用 svn2git 后分支之间没有关系

> ID：13839658
> 
> 赞同：4
> 
> 时间：2012-12-12T12:20:21.743
> 
> 标签：git, git-svn

我已经使用 svn2git 将一个 SVN 项目转换为 git。一切都很顺利，只是分支之间没有关系。每个分支都以相同的提交开始（与 master 相同的 SHA1 哈希值，直到分支接受自己的提交）。

它应该是这样的：

```
master branch1  branch2   
  |       |       |
  |       |       |
  |       |-------'
  |       |  
  |-------'
  |
  |
  | 
```

这是它现在的样子：

```
master branch1  branch2   
  |       |       |
  |       |       |
  |       |       |
  |       |       |
  |       |       |
  |       |       |        (same commit hash)
  |       |       |        (same commit hash)
  |       |       |        (same commit hash) 
```

我怎样才能解决这个问题？

谢谢你。

斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:54:51.303

抱歉，是我的错。我用`git log`错了方法。

忘记添加`--all`一次显示所有分支的选项。

# objective-c - 这个函数会产生任何内存泄漏吗？

> ID：13839659
> 
> 赞同：0
> 
> 时间：2012-12-12T12:20:23.820
> 
> 标签：objective-c, memory-management, memory-leaks, instruments

```
+ (NSArray *) fetchAllContactsInContext:(NSManagedObjectContext *)a_context
{
    NSFetchRequest *_request = [[NSFetchRequest alloc] init];
    [_request setEntity:[NSEntityDescription entityForName:@"Contact" inManagedObjectContext:a_context]];

    NSSortDescriptor *_sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"lastName" ascending:YES];
    NSArray *_sortDescriptors = [[NSArray alloc] initWithObjects:_sortDescriptor, nil];
    [_request setSortDescriptors:_sortDescriptors];

    NSError *_fetchError=nil;
    NSArray *_results = [[NSArray alloc] initWithArray:[a_context executeFetchRequest:_request error:&_fetchError]];
    [_sortDescriptor release];
    [_sortDescriptors release];
    [_request release];

    if (_fetchError){
        NSLog(@"Contact - Error fetching contacts %@", [_fetchError localizedDescription]);
    }
    [_fetchError release];
    return [_results autorelease];
} 
```

我想问一下，这个函数是否泄漏内存？实际上 Instruments 是说这个函数正在泄漏大量内存。

你能帮我解决内存问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:30:18.967

如果您需要查看对象使用工具的保留、释放和自动释放发生的位置：

在仪器中运行，在分配中设置“记录参考计数”（您必须停止记录才能设置选项）。导致问题代码运行，停止记录，搜索感兴趣的 ivar，向下钻取，您将能够看到所有保留、释放和自动释放发生的位置。

![在此处输入图像描述](../Images/7838716286f7948b8b94a93abc6764ae.png)

这是使用 ARC for iOS 4.3 及更高版本的简化版本：

```
+ (NSArray *) fetchAllContactsInContext:(NSManagedObjectContext *)aContext {
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Contact"];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"lastName" ascending:YES];
    [request setSortDescriptors:@[sortDescriptor]];

    NSError *fetchError;
    NSArray *results = [aContext executeFetchRequest:request error:&fetchError];

    if (results == nil){
        NSLog(@"Contact - Error fetching contacts %@", [fetchError localizedDescription]);
    }
    return results;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:30:07.813

为什么`[_fetchError release];`会有？

你为什么不使用ARC？

尝试将此代码重构为 ARC。

# php - html表头的PHP echo mysql表列名

> ID：13839662
> 
> 赞同：2
> 
> 时间：2012-12-12T12:20:32.973
> 
> 标签：php, mysql, html-table

**解决**

完美运行！这是我的最终代码：

```
<table>
  <thead>
    <tr>
      <?php
      $row = mysql_fetch_assoc($result);
            foreach ($row as $col => $value) {
                echo "<th>";
                echo $col;
                echo "</th>";
            }
      ?>
      <th>Edit</th>
    </tr>
  </thead>
  <tbody>
    <?php
  // Write rows
  mysql_data_seek($result, 0);
    while ($row = mysql_fetch_assoc($result)) {
        ?>
    <tr>
      <?php         
    foreach($row as $key => $value){
        echo "<td>";
        echo $value;
        echo "</td>";
    }
    ?>
      <td><button id="edit_project_button(<?php echo $row['ID']; ?>)" class="edit-project-button edit button" onclick="editproject(<?php echo $row['ID']; ?>)">Edit</button></td>
    </tr>
    <?php } ?>
  </tbody>
</table> 
```

* * *

我希望适当地使用 mysql_fetch 函数来回显一个 HTML 表。我计划制作一个包含mysql表列名的*thead*和一个包含mysql表结果集的*tbody 。*SQL 查询从表中选择几列，并设置了默认限制。

**问题：**它似乎没有打印第一行表数据，其他所有内容都显示（缺少记录#1）

它显示在 each 中回显的列名，然后**跳过**第一条记录并成功回显第二行。例如：

```
| id | firstname | lastname | date_start | date_end   | clientid | members | edit          |
|  2 | Cal       | Clark    | 2012-12-12 | 2012-12-12 | 22       | Rob     | (edit button) |
|  3 | Rob       | Robin    | 2012-12-12 | 2012-12-12 | 33       | Cal     | (edit button) | 
```

我 100% 确定第一条记录将从我在 phpmyadmin 中的查询中显示。

这是我的代码：

```
<table>
  <thead>
    <tr>
      <?php
        $row = mysql_fetch_assoc($result);
            foreach ($row as $col => $value) {
                echo "<th>";
                echo $col;
                echo "</th>";
            }

      ?>
      <th>Edit</th>
    </tr>
  </thead>
  <?php
  // Write rows
  while ($row = mysql_fetch_array($result)) {
    ?>
  <tr>
    <td><?php echo $row[0]; ?></td>
    <td><?php echo $row[1]; ?></td>
    <td><?php echo $row[2]; ?></td>
    <td><?php echo $row[3]; ?></td>
    <td><?php echo $row[4]; ?></td>
    <td><?php echo $row[5]; ?></td>
    <td><?php echo $row[6]; ?></td>
    <td><button id="edit_project_button(<?php echo $row[0]; ?>)" class="edit-project-button edit button" onclick="editproject(<?php echo $row[0]; ?>)">Edit</button></td>
  </tr>
  <?php } ?>
</table> 
```

我现在感觉很健忘=/

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T12:23:01.107

先把你的数据倒回去！！

```
mysql_data_seek($result, 0);
while ($row = mysql_fetch_array($result)) {
... 
```

# sql - 与数据库连接错误

> ID：13839666
> 
> 赞同：1
> 
> 时间：2012-12-12T12:20:37.293
> 
> 标签：sql, database, oracle

我在我的系统中安装了 oracle 11g R2。但是当我在 sql developer 中连接到数据库时，它显示错误如下：

执行请求的操作时遇到错误：网络适配器无法建立连接供应商代码 20

我知道这是由于 oracle 的 CLASSPATH 不正确

我的 oracle 和 java 的 CLASSPATH 是：

```
E:\app\JamesPJ\product\11.2.0\dbhome_1\jlib\orai18n.jar.;E:\app\JamesPJ\product     \11.2.0\dbhome_1\jdbc\lib\ojdc6_g.jar.;E:\app\JamesPJ\product\11.2.0  \dbhome_1\BIN.;C:\Program Files\Java\jdk1.7.0_09\bin.;C:\Users\JamesPJ\Documents.;E:  \app\JamesPJ\product\11.2.0\dbhome_1\jdbc\lib.;E:\app\JamesPJ\product\11.2.0\dbhome_1\jlib.;E:\app\JamesPJ\product\11.2.0\dbhome_1\jdbc\lib\ojdbc6.jar.;E:\app\JamesPJ\product\11.2.0\dbhome_1\oc4j\jdbc\lib\orai18n.jar.;E:\app\JamesPJ\product\11.2.0\dbhome_1\oc4j\jdbc\lib\ocrs12.jar 
```

我不知道这些变量是否正确。如果有人知道解决方法，请回答我...。提前致谢…。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:24:42.217

尝试将`.;`CLASSPATH 中的所有内容替换为`;`并消除空格，例如：

```
E:  \app\JamesPJ\product\11.2.0\dbhome_1\jdbc\lib 
```

然后再试一次，你的类路径现在看起来不正常。

# javascript - JS 字符串到 html 标记

> ID：13839668
> 
> 赞同：0
> 
> 时间：2012-12-12T12:20:43.743
> 
> 标签：javascript, html, utf-8

最近我写了一个简单的 webapp 来处理与路由器的 telnet 连接。我正在使用带有 Express 和 WebSockets 的 Node.js。建立连接后，来自终端的流以 UTF-8 字符串形式通过 websocket。

这是我的问题：我写了一个简单的显示函数，它使用`slice('\n')`并添加了一个 html 段落，但我对结果并不满意，一切都是一团糟（towel.blinkenlights.nl 基于 telnet 的星球大战看起来并不接近从终端到版本）。当我在浏览器控制台中显示数据时，它看起来不错，但在我的 html 中却没有。

主要问题可能是由这些 all `\n`' `\t`s 等引起的。

所以现在我正在寻找将 js 字符串转换为 html 标记的解决方案/库/东西。有没有类似的东西，也许在 jQuery 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:26:27.260

将您的文本放入一个`pre`块中，它将保留格式：

```
document.getElementsByTagName("pre")[0].textContent = "string1\n\tstring2";

string1
    string2 
```

# c# - 在 C# 中合并 2 个文本文件

> ID：13839669
> 
> 赞同：4
> 
> 时间：2012-12-12T12:20:51.463
> 
> 标签：c#, file, merge

首先，我想提一下，我几天前才开始学习C#，所以我对它的了解有限。

我正在尝试创建一个程序，该程序将解析用户输入的某些短语的文本文件，然后将它们输出到新的文本文档中。

目前，我让程序搜索原始输入文件并收集用户输入的选定文本，处理这些行，创建新的文本文件，然后将它们合并在一起，然后删除它们。

我猜这不是创建它的最有效方法，但我只是创建了它并让它在一个合乎逻辑的庄园中工作，让我作为一个新手理解。

代码如下；

```
private void TextInput1()
    {
        using (StreamReader fileOpen = new StreamReader(txtInput.Text))
        {
            using (StreamWriter fileWrite = new StreamWriter(@"*DIRECTORY*\FIRSTFILE.txt"))
            {
                string file;
                while ((file = fileOpen.ReadLine()) != null)
                {
                    if (file.Contains(txtFind.Text))
                    {
                            fileWrite.Write(file + "\r\n");
                    }
                }
            }
        }
    }

    private void TextInput2()
    {
        using (StreamReader fileOpen = new StreamReader(txtInput.Text))
        {
            using (StreamWriter fileWrite = new StreamWriter(@"*DIRECTORY*\SECONDFILE.txt"))
            {
                string file;
                while ((file = fileOpen.ReadLine()) != null)
                {
                    if (file.Contains(txtFind2.Text))
                    {
                        fileWrite.Write("\r\n" + file);
                    }
                }
            }
        }
    }

    private static void Combination()
    {
        ArrayList fileArray = new ArrayList();

        using (StreamWriter writer = File.CreateText(@"*DIRECTORY*\FINALOUTPUT.txt"))
        {

            using (StreamReader reader = File.OpenText(@"*DIRECTORY*\FIRSTFILE.txt"))
            {
                writer.Write(reader.ReadToEnd());
            }

            using (StreamReader reader = File.OpenText(@"*DIRECTORY*\SECONDFILE.txt"))
            {
                writer.Write(reader.ReadToEnd());
            }
        }

    }

    private static void Delete()
    {
        if (File.Exists(@"*DIRECTORY*\FIRSTFILE.txt"))
            {
                File.Delete(@"*DIRECTORY*\FIRSTFILE.txt");
            }

        if (File.Exists(@"*DIRECTORY*\SECONDFILE.txt"))
            {
                 File.Delete(@"*DIRECTORY*\SECONDFILE.txt");
            }

    } 
```

正在创建的输出文件只是输出第一个文本输入，然后是第二个文本输入。我想知道是否有可能将它们合并到 1 个文件中，一次 1 行，因为它是一个连续的文件，这意味着需要输入 1 后跟 2 的信息，而不是全部 1，然后全部 2。

谢谢，尼尔。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T12:38:27.463

要将两个文件的内容逐行合并到一个合并文件中，您可以将您的 Combination() 代码替换为

```
string[] file1 = File.ReadAllLines("*DIRECTORY*\FIRSTFILE.txt");
string[] file2 = File.ReadAllLines("*DIRECTORY*\SECONDFILE.txt");

using (StreamWriter writer = File.CreateText(@"*DIRECTORY*\FINALOUTPUT.txt"))
{
    int lineNum = 0;
    while(lineNum < file1.Length || lineNum < file2.Length)
    {
        if(lineNum < file1.Length)
            writer.WriteLine(file1[lineNum]);
        if(lineNum < file2.Length)
            writer.WriteLine(file2[lineNum]);
        lineNum++;
    }
} 
```

这假设这两个文件不包含相同数量的行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T12:26:52.773

试试这个方法。您可以收到三个路径。文件 1、文件 2 和文件输出。

```
public void MergeFiles(string pathFile1, string pathFile2, string pathResult)
{
    File.WriteAllText(pathResult, File.ReadAllText(pathFile1) + File.ReadAllText(pathFile2));
} 
```

如果`pathResult`文件存在，该`WriteAllText`方法将覆盖它。记得包含`System.IO`命名空间。

重要提示：不建议用于大文件！使用此线程上可用的其他选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T12:46:36.820

如果您的输入文件非常大并且内存不足，您也可以尝试像这样包装两个阅读器：

```
 using (StreamWriter writer = File.CreateText(@"*DIRECTORY*\FINALOUTPUT.txt"))
        {
            using (StreamReader reader1 = File.OpenText(@"*DIRECTORY*\FIRSTFILE.txt"))
            {
                using (StreamReader reader2 = File.OpenText(@"*DIRECTORY*\SECONDFILE.txt"))
                {
                    string line1 = null;
                    string line2 = null;
                    while ((line1 = reader1.ReadLine()) != null)
                    {
                        writer.WriteLine(line1);
                        line2 = reader2.ReadLine();
                        if(line2 != null)
                        {
                            writer.WriteLine(line2);
                        }
                    }
                }
            }
        } 
```

不过，您必须知道输入文件中有多少行，但我认为它为您提供了继续进行的总体思路。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T12:57:11.227

使用`FileInfo`扩展，您可以通过执行以下操作来合并一个或多个文件：

```
public static class FileInfoExtensions
{
  public static void MergeFiles(this FileInfo fi, string strOutputPath , params string[] filesToMerge)
  {
    var fiLines = File.ReadAllLines(fi.FullName).ToList();
    fiLines.AddRange(filesToMerge.SelectMany(file => File.ReadAllLines(file)));
    File.WriteAllLines(strOutputPath, fiLines.ToArray());
  }
} 
```

**用法**

```
 FileInfo fi = new FileInfo("input");
  fi.MergeFiles("output", "File2", "File3"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-24T07:28:28.807

我很欣赏这个问题几乎足以（向上）投票（本身），但对于可扩展的方法：

```
const string FileMergeDivider = "\n\n";

public void MergeFiles(string outputPath, params string[] inputPaths)
{
    if (!inputPaths.Any())
        throw new ArgumentException(nameof(inputPaths) + " required");

    if (inputPaths.Any(string.IsNullOrWhiteSpace) || !inputPaths.All(File.Exists))
        throw new ArgumentNullException(nameof(inputPaths), "contains invalid path(s)");

    File.WriteAllText(outputPath, string.Join(FileMergeDivider, inputPaths.Select(File.ReadAllText)));
} 
```

# android - 是否需要为 android 的扩展文件编写代码？

> ID：13839671
> 
> 赞同：1
> 
> 时间：2012-12-12T12:20:56.877
> 
> 标签：android, eclipse, apk, google-play, apk-expansion-files

我们有基于 andriod 的应用程序，它有图像（比如 A、B、C 文件夹中的三组图像）画廊。由于图像的大小以 MB 为单位，我们想使用扩展文件。Eclipse 中的图像位于 3 中的资产内，（A ，B，C）不同的文件夹。现在，如果我为其中包含AB，C文件夹的资产文件夹创建zip文件（具有正确的命名约定（main.versionname.packagename））并上传到谷歌播放主apk文件，如何应用程序将了解从哪个文件夹（资产> A或资产> B）引用哪些文件。由于在SD卡上下载扩展文件，应用程序将如何理解应用程序中要引用的文件夹/文件。我需要做一些编码来读取图像文件？不要提供参考.. [http://developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html..this) ..这不能解决问题。

# ios - IOS Google Analytics V2 会话跟踪

> ID：13839676
> 
> 赞同：0
> 
> 时间：2012-12-12T12:21:30.823
> 
> 标签：ios, session, google-analytics, tracker

我最近开始在我的应用程序中实施 Google Analytics V2 测试版，我想知道如何跟踪它何时启动。我的代码是：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [GAI sharedInstance].debug = YES;
    [GAI sharedInstance].dispatchInterval = 120;
    [GAI sharedInstance].trackUncaughtExceptions = YES;
    self.tracker = [[GAI sharedInstance] trackerWithTrackingId:@"ID"];

    self.tracker.sessionStart = YES;

    return YES;
} 
```

我不想将其作为事件进行跟踪。我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:08:10.397

也许你可以试试这个：

```
[self.tracker trackView:@"App started"]; 
```

# windows - %1 不是 Apache 服务器上的有效 Win32 应用程序

> ID：13839680
> 
> 赞同：2
> 
> 时间：2012-12-12T12:21:43.120
> 
> 标签：windows, perl, apache, winapi

我在 Windows 7 x64 上运行 Apache 2.2 32 位服务器。我需要使用 perl，所以我安装了 Strawberry 5.12.3 32bit 并配置了 apache，所以我有 2 个位置：主要 - 仅 cgi 和次要 - 使用 mod_perl。我的问题是我可以从辅助位置运行页面和脚本而不会出现任何问题，而主位置会生成 500 错误和错误日志条目，说明：

```
[Wed Dec 12 09:13:10 2012] [error] [client 127.0.0.1] (OS 193)%1 is not a valid win32 application.  : couldn't create child process: 720193: login.pl 
```

在 Windows 事件日志中出现错误 7001。控制台中的脚本运行良好。你知道出了什么问题吗？

这是我的 Apache httpd.conf

```
ServerRoot "C:/Apache2_2"

PerlSetEnv NO_CACHE 1
PerlSetEnv DEBUG_SQL 1
Listen 80

LoadModule actions_module modules/mod_actions.so
LoadModule alias_module modules/mod_alias.so
LoadModule asis_module modules/mod_asis.so
LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule authn_default_module modules/mod_authn_default.so
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule authz_default_module modules/mod_authz_default.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_host_module modules/mod_authz_host.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule autoindex_module modules/mod_autoindex.so
LoadModule cgi_module modules/mod_cgi.so
LoadModule dir_module modules/mod_dir.so
LoadModule env_module modules/mod_env.so
LoadModule include_module modules/mod_include.so
LoadModule isapi_module modules/mod_isapi.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule mime_module modules/mod_mime.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule ssl_module modules/mod_ssl.so
LoadModule perl_module modules/mod_perl.so
LoadFile "C:/strawberry/perl/bin/perl512.dll"

PerlSwitches -wT -IC:/home/kks/srv/bin

<IfModule !mpm_netware_module>
    <IfModule !mpm_winnt_module>
        User daemon
        Group daemon
    </IfModule>
</IfModule>
ThreadsPerChild 20
ServerAdmin me@me.pl
DocumentRoot "C:/Apache2_2/htdocs"
ErrorLog "|perl bin/pipedLogClient.pl -e"
LogLevel warn

SetEnv PERLDB_OPTS "RemotePort=localhost:9000"
SetEnv DBGP_IDEKEY "kks"

<IfModule log_config_module>
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %b" common
<IfModule logio_module>
      LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
</IfModule>
    CustomLog "|perl bin/pipedLogClient.pl -a" common
</IfModule>

<IfModule alias_module>
    Alias /primary/static/ "C:/home/kks/srv/bin/static/"
    ScriptAlias /primary/ "C:/home/kks/srv/bin/"

#===   primary   ===#

<Location "/primary/">
        AllowOverride None
        Options FollowSymLinks
        Order allow,deny
        Allow from all
</Location>
<Location "/primary/static/">
        SetHandler default-handler
        AllowOverride None
        Options None
        Order allow,deny
        Allow from all
</Location>

Alias /secondary/static/ "C:/home/kks/srv/bin/static/"
ScriptAlias /secondary/ "C:/home/kks/srv/bin/"

<Location "/secondary/">
        SetHandler perl-script
        PerlResponseHandler ModPerl::Registry
        PerlOptions +ParseHeaders
        PerlCleanupHandler owf_cleanup
        Options FollowSymLinks
        Options  +ExecCGI
        Order allow,deny
        Allow from all
</Location>

<Location "/secondary/static/">
        SetHandler default-handler
        Options  None
        Order allow,deny
        Allow from all
</Location> 

</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:49:09.910

检查 login.pl 中的 shebang 行并确保 perl 指向您安装草莓的路径

# android - 安卓构建失败

> ID：13839684
> 
> 赞同：0
> 
> 时间：2012-12-12T12:21:56.643
> 
> 标签：android, command-line, build, opensuse

我已经下载了 Android SDK 工具。解压文件，然后在目录工具中运行这些命令

1.  `./android update sdk --no-ui`
2.  `./android create project --target 1 --name MyApp --path ./MyApp --activity MyAppActivity --package com.example.myapp`
3.  `cd MyApp`
4.  `ant debug`

并得到这个错误：

> 构建失败/home/lived/devel/android/tools/MyApp/build.xml:90：执行此行时发生以下错误：/home/lived/devel/android/tools/ant/build.xml:108: taskdef找不到类 com.android.ant.SignApkTask 所需的类：com.android.ant.SignApkTask 使用类加载器 AntClassLoader[/home/lived/devel/android/tools/lib/anttasks.jar:/home/lived/ devel/android/tools/lib/common.jar:/home/lived/devel/android/tools/lib/guava-tools.jar:/home/lived/devel/android/tools/lib/sdklib.jar:/home /lived/devel/android/tools/lib/layoutlib_api.jar:/home/lived/devel/android/tools/lib/commons-compress-1.0.jar:/home/lived/devel/android/tools/lib/httpclient -4.1.1.jar:/home/lived/devel/android/tools/lib/httpcore-4.1.jar:/home/lived/devel/android/tools/lib/httpmime-4.1.1.jar:/home/ live/devel/android/tools/lib/commons-logging-1.1.1。jar:/home/lived/devel/android/tools/lib/commons-codec-1.4.jar:/home/lived/devel/android/tools/lib/dvlib.jar:/home/lived/devel/android/tools /lib/manifmerger.jar]

系统信息：

```
lived@dama:~> cat /etc/SuSE-release
openSUSE 12.2 (x86_64)
VERSION = 12.2
CODENAME = Mantis

lived@dama:~> java -version
java version "1.7.0_09"
OpenJDK Runtime Environment (IcedTea7 2.3.3) (suse-3.16.1-x86_64)
OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode)

lived@dama:~> javac --version
javac (SUSE Linux) 4.7.1 20120723 [gcc-4_7-branch revision 189773]
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

lived@dama:~> ant -version
Apache Ant(TM) version 1.8.2 compiled on June 23 2012 
```

我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:23:09.477

我通过安装包 java-1_7_0-openjdk-devel 解决了这个问题。之前我只安装了patters-openSUSE-devel_java。

# ruby - 如何永久切换 ruby -v 1.8.7 到 1.9.3

> ID：13839685
> 
> 赞同：0
> 
> 时间：2012-12-12T12:21:58.827
> 
> 标签：ruby, rvm

通过使用这些命令

```
source ~/.rvm/scripts/rvm
rvm use 1.9.3 --default 
```

当前会话中的版本是 1.9.3，但是当我关闭终端并重新打开 ruby​​ 版本时，它又回到了 1.8.7。

我需要向 .bash_profile 添加一些东西吗？

**编辑：**我发现另一种方法是每次重新打开终端时只需键入 source .bash_profile。然后版本是 1.9.3。无论如何要永久执行 .bash_profile 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:36:52.620

是的，您需要在 bash 配置文件中添加一些内容。见这里：
[https ://rvm.io/rvm/basics/](https://rvm.io/rvm/basics/)

引用：

> rvm 安装文档指示您将以下行放在 bash 配置文件的最后：

```
# This loads RVM into a shell session
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:03:26.537

我们在这里涉足系统管理员领域，但一种可能的解释可能是因为您如何登录到您的外壳和操作系统。[在此处](http://hayne.net/MacDev/Notes/unixFAQ.html#shellStartup)查看有关您的 shell 加载哪些文件以及登录与非登录 shell 的组成[部分](http://hayne.net/MacDev/Notes/unixFAQ.html#loginShell)的讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:43:59.087

创建一个以`.rvmrc`文本命名的文件`rvm use 1.9.3 --default`。

# php - CodeIgniter $data 未从 Controller 传递到 View

> ID：13839705
> 
> 赞同：-1
> 
> 时间：2012-12-12T12:23:18.657
> 
> 标签：php, codeigniter

我的控制器没有传递`$data`给我的视图，我不知道为什么不传递。我正在重用以前项目中运行良好的代码，并且我当然理解 $data 传递是如何工作的想法。但也许我在复制代码时错过了什么？

我把变量`$data['hello']`放在那里只是为了测试目的。正如您从输出中看到的`$hello`那样，甚至没有通过。`if`失败并且`else`代码正确运行，这意味着正在加载视图文件本身。

控制器：

```
function users() {
    $data['title'] = 'users';
    $data['users'] = $this->main_m->get_users();
    $data['hello'] = 5;
    $this->load->view('users', $data);
} 
```

看法：

```
<?php
echo $hello;
if ($users->num_rows != 0) {
    foreach ($users->result() as $user) {
    }
} else {
    echo "No users.";
} 
```

输出（删节）：

```
A PHP Error was encountered
Message: Undefined variable: hello
Line Number: 2
A PHP Error was encountered
Message: Undefined variable: users
Line Number: 3
A PHP Error was encountered
Message: Trying to get property of non-object
Line Number: 3

No users. 
```

编辑：应要求提供更多信息：型号：

```
public function get_users($amount = 0, $offset = 0) {
    $this->db->from('users');
    $this->db->order_by('l_name', 'desc');
    if ($amount != 0)
        $this->db->limit($amount, $offset);
    return $this->db->get();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:29:51.610

我认为您可以通过一些简单的 var_dump() 检查来解决您的问题。

1.  通过 var_dump()ing $data['users'] 检查模型的结果 - 这是一个对象吗？当你 var_dump() $data['users']->result() 会发生什么？
2.  然后，您认为 var_dump() $data - 它包含所有部分吗？

问题是，即使向我们展示您的模型功能也不能证明您获得了真实的数据结果。检查那个。您的代码一目了然，所以我认为这不是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:49:28.017

我总是喜欢这样将您的模型更改为

```
$query = $this->db->get();
return $query->result(); 
```

并且在视图中

```
if (count($users)> 0) {
foreach ($users as $user) {
echo $user['name'];
}
} else {
echo "No users.";
} 
```

希望这可以帮助

问候

iijb

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:05:32.383

有一些非常基本的东西是错误的。所以离开那个控制器并进行健全性检查。首先确认您的欢迎视图工作正常。如果是去欢迎控制器并将其放入 index 方法中

```
 $data['here'] = 'we are here' ;
    $this->load->view('welcome_message', $data); 
```

然后在welcome.php 视图文件的某个地方

```
<?php echo $here ?> 
```

你不需要设置这个： $data = array(); 但是有些人建议这样做，因为即使您不创建任何数据变量，如果它在视图中调用 $this->load->view('welcome_message', $data); 也不会出错。

最后我建议看看这个

```
 function users() {
     $data['title'] = 'users';
     $data['users'] = $this->main_m->get_users();
     $data['hello'] = 5;
     $this->load->view('users', $data);
 } 
```

让我们看看你有一个名为 users 的方法，返回一个名为 users 的对象和一个名为 users 的视图——这可能会让人感到困惑！:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:57:14.993

只需`$data = array();`在将一些数据发送到`$data`数组之前写入。

```
function users() {
$data = array();
$data['title'] = 'users';
$data['users'] = $this->main_m->get_users();
$data['hello'] = 5;
$this->load->view('users', $data);
} 
```

# asp.net-mvc-3 - MVC3将日期转换为字符串错误

> ID：13839706
> 
> 赞同：1
> 
> 时间：2012-12-12T12:23:27.183
> 
> 标签：asp.net-mvc-3

当我尝试将日期转换为字符串时，出现此错误。那么我该如何解决这个错误呢？

> 模板只能与字段访问、属性访问、一维数组索引或单参数自定义索引器表达式一起使用。

这是我的看法：

```
<div class="editor-field">
   @Html.TextBoxFor(x => x.date.ToString("MM-dd-yyyy"), new { @class = "date", @required = "required" })
     @Html.ValidationMessageFor(model => model.date)
   </div> 
```

然后我用注释编辑了我的类，然后这里的结果是我的类。我的数据库表中的日期参数，名称是“内容”，我在视图“x => x.date”中使用

```
 public class Common
    {

        [DisplayFormat(DataFormatString = "{0:MM/dd/yyyy}")]
        public DateTime date { get; set; }

public class CommonModel
        {
            public content content{ get; set; }

        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:35:54.200

试试这个：

1）将数据注释放在您的班级中，例如：

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:MM/dd/yyyy}")]
public DateTime date { get; set; } 
```

2）替换此行：

```
@Html.TextBoxFor(x => x.date.ToString("MM-dd-yyyy"), new { @class = "date", @required = "required" }) 
```

这应该工作：

```
@Html.EditorFor(x => x.date, new { @class = "date", @required = "required" }) 
```

# python - 如何让 Plone 读取我的 pythonrc？

> ID：13839713
> 
> 赞同：4
> 
> 时间：2012-12-12T12:23:43.463
> 
> 标签：python, plone, readline

我正在使用[collective.python](https://github.com/collective/buildout.python)构建。

我有以下`.pythonrc`（配置`export PYTHONSTARTUP=~/.pythonrc`）：

```
import readline
import rlcompleter
readline.parse_and_bind('tab: complete') 
```

当我`Python`在 shell 中运行时，选项卡完成工作。当我`Plone`在调试模式下运行时，它不会。除非，我将我的内容粘贴`.pythonrc`到 Plone 调试 Python 提示符中。我在这里想念什么？

**注意**：粘贴我的 .pythonrc 的内容仅在我通过安装 Plone 时有效（即使用Python`python bootstrap.py`引导 Plone 构建）。`collective.python`如果我在 a 中安装 Plone ，则`virtualenv`没有任何效果。但至少在那种情况下，缺少的功能对我来说是有意义的（即`virtualenv`，使制表符完成工作所需的功能可能缺少一些东西。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:22:40.593

实例控制器使用两个命令行开关；`-i`用于交互模式，并`-c`加载 Zope 配置并设置`app`变量。`-c`开关是禁用`PYTHONSTARTUP`环境变量的原因。

无论如何，您*都可以*修改`plone.recipe.zope2instance`包以运行脚本。

在`plone.recipe.zope2instance`中，找到`plone/recipe/zope2instance/ctl.py`文件，将`do_debug()`方法更改为：

```
def do_debug(self, arg):
    interactive_startup = ("import os;"
        "os.path.exists(os.environ.get('PYTHONSTARTUP', '')) "
        "and execfile(os.environ['PYTHONSTARTUP']); del os;"
        'import Zope2; app=Zope2.app()')
    cmdline = self.get_startup_cmd(self.options.python,
                                   interactive_startup,
                                   pyflags = '-i', ) 
```

事实上，我喜欢支持`PYTHONSTARTUP`这么多的想法，我已经承诺对配方进行更改，请参阅[rev 536f8fc1c4](https://github.com/plone/plone.recipe.zope2instance/commit/537f8fc1c4a006955c90e4f227eceecd36ca6c47)！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:45:02.703

我愿意`import user`。这写着`~/.pythonrc.py`。注意 .py 扩展名。我已将该文件设置为我的`PYTHONSTARTUP`

我将粘贴该文件以备不时之需。几年前我把它拼凑在一起。不确定它是否仍然是最好的，因为我看到了关于 2006 和 python2.3 的评论。不过，它确实有效。

```
$ cat ~/.pythonrc.py 
# See http://blog.partecs.com/2006/02/27/source-inspector/
#import pydoc
import inspect
import rlcompleter, readline

readline.parse_and_bind('tab: complete')

# def source(obj):
#     """source of the obj."""
#     try:
#         pydoc.pipepager(inspect.getsource(obj), 'less')
#     except IOError:
#         pass

# From /usr/local/lib/python2.3/user.py
import os
home = os.curdir                        # Default
if 'HOME' in os.environ:
    home = os.environ['HOME']
elif os.name == 'posix':
    home = os.path.expanduser("~/")
# Make sure home always ends with a directory separator:
home = os.path.realpath(home) + os.sep

# From http://wiki.python.org/moin/PdbRcIdea
# Command line history:
histfile = home + '.pyhist'
try:
    readline.read_history_file(histfile)
except IOError:
    pass
import atexit
atexit.register(readline.write_history_file, histfile)
readline.set_history_length(200)

# Cleanup namespace
# del atexit
# del home
# del histfile
# del os
# del readline
# del rlcompleter 
```

# java - assert(false) 不会停止执行

> ID：13839715
> 
> 赞同：6
> 
> 时间：2012-12-12T12:23:50.217
> 
> 标签：java, eclipse, junit, assert

在我的一个 JUnit 测试中，我正在初始化一个对象：

```
MyObject myObject = new MyObject(220, 120, 0.05, true); 
```

构造函数的签名是：

```
public MyObject(int minLength, int maxLength, 
                double onBitsRatio, boolean forceAtLeastOneBitOn) 
```

其次是：

```
assert(onBitsRatio >= 0.0 && onBitsRatio <= 1.0);
assert(maxLength>=minLength);
assert(false); 
```

奇怪的是，断言并没有像我期望的那样停止执行。

为什么 JUnit 会忽略这些断言？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-12T12:31:01.363

JUnit 不会忽略这些断言，因为正如您所说，您正在使用 Java 的`assert`关键字。这是由 JVM 处理的，而不是 JUnit。

答案几乎可以肯定是您的 JVM 断言已关闭。实际上它们是关闭的，除非你用`-ea`. 否则这些将被忽略。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T12:26:44.063

您确定您使用的是来自 JUnit 的正确断言吗？

如果您使用的是普通的 java 断言，这些默认情况下是关闭的。您必须明确启用它们。

尝试使用这个：`org.junit.Assert.assertTrue(false)` 据我所知，JUnit Assert 库中没有方法被调用`assert()`

看到您的断言在某个对象中，并且您希望测试失败，那么您需要启用断言。查看[本教程](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html)，了解如何启用断言。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T12:29:06.747

将它们更改为 JUnit 断言，您使用的是普通[Java 断言](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html)，默认情况下在 jvm 中禁用：

```
assertTrue(onBitsRatio >= 0.0 && onBitsRatio <= 1.0);
assertTrue(maxLength>=minLength);
assertTrue(false); 
```

如果你真的想使用 java 断言，请确保你`-enableassertions`在运行配置中有一个参数。

根据您使用 eclipse 的问题标签，因此请转到运行方式 -> 运行配置并在 VM 参数选项卡中添加`-enableassertions`或`-ea`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-09T06:23:55.930

来自*Java 的完整参考*：

" 要在运行时启用断言检查，您必须指定 -ea 选项。例如，要为 AssertDemo 启用断言，请使用以下行执行它：

`java -ea AssertDemo` "

# jquery - JQuery 字符计数器在 IE8 中失败

> ID：13839720
> 
> 赞同：2
> 
> 时间：2012-12-12T12:24:24.617
> 
> 标签：jquery

为了发送短信，我整理了以下脚本来计算文本区域中使用的字符。

该代码允许服务提供商发送的最大字符数，并且还考虑了特殊字符 ( `{}^\/|~€\r`) 占用的空间是常规字符的两倍。这是通过将每个字符转换为其等效的 ascii 并将其与已识别字符的值数组进行比较来完成的。然后更新屏幕上的文本（#remaining、#messages）以反映正在使用的字符数。

该脚本在 FF 和 Chrome（最新）以及 IE9 中运行良好，但在 IE8 中完全失败。它的失败在于屏幕上的文本没有更新或更改，并且没有出现错误。它根本没有效果。

第二个问题是，在任何浏览器上，最终的 ascii 比较 - 128，€ 符号 - 不会被拾取。我可以在文本框中输入“€”，计数只会增加 1，而不是 2。128 是正确的值，它是`.charCodeAt()`函数在将 € 传递给它时生成的值。根据需要，所有其他符号都增加 2。

那么：为什么这段代码在 IE8 中会失败，为什么最后的 ascii 比较会失败呢？

所有帮助表示赞赏。

```
$('#sms-message').keyup(function(){
    $('#msg-validation').hide();
    var     chars = $(this).val(),
            arr_chars = chars.split(''),
            remaining = $('#remaining'),
            messages = $('#messages'),
            count = 0;

    $.each(arr_chars, function(i, l){
        var     ascii = l.charCodeAt(0),
                arr = [13, 47, 92, 94, 123, 124, 125, 126, 128];

        if($.inArray(ascii, arr) !== -1) { count = count + 2; }
        else { count = count + 1; }
    });

    var     units = Math.ceil(count / 160),
            remaining_chars = 459 - count;

    remaining.text(count + ' characters (' + remaining_chars + ' remaining)');
    messages.text(units + ' text unit(s)');

    if(remaining_chars < 0) {
        $(remaining).css('color', 'red');
    }
    else {
        $(remaining).css('color', 'black');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T11:41:39.647

对您声明的所有变量使用“var”，并通过添加“var”来更新代码并尝试。我认为它肯定会奏效。

```
$('#sms-message').keyup(function(){
    $('#msg-validation').hide();
    var     chars = $(this).val(),
    var     arr_chars = chars.split(''),
    var        remaining = $('#remaining'),
    var        messages = $('#messages'),
    var        count = 0;

    $.each(arr_chars, function(i, l){
        var     ascii = l.charCodeAt(0),
       var         arr = [13, 47, 92, 94, 123, 124, 125, 126, 128];

        if($.inArray(ascii, arr) !== -1) { count = count + 2; }
        else { count = count + 1; }
    });

    var     units = Math.ceil(count / 160),
          var  remaining_chars = 459 - count;

    remaining.text(count + ' characters (' + remaining_chars + ' remaining)');
    messages.text(units + ' text unit(s)');

    if(remaining_chars < 0) {
        $(remaining).css('color', 'red');
    }
    else {
        $(remaining).css('color', 'black');
    }
}); 
```

# primefaces - 如何在primefaces 3.4中自动缩放lineChart的x轴

> ID：13839723
> 
> 赞同：3
> 
> 时间：2012-12-12T12:24:45.013
> 
> 标签：primefaces, jqplot, overlap, linechart

在我的 lineChart(primefaces 3.4) 中，xaxis 有很多 dateTimes 标签并且它们重叠，有没有办法防止 xaxis 重叠？当我在 lineChart 中使用扩展器属性（带有 jqplot 函数）时，我可以将 autosacle 应用于轴 ***，但*** 来自 1..n 的 int 值标签将被替换而不是 dateTime 标签！这是我的示例代码：

xhtml代码

```
 <script type="text/javascript" src="js/plugins/jqplot.dateAxisRenderer.min.js"> 
 <script type="text/javascript">
 function setScale() {
          this.cfg.axes ={                
                xaxis:{
                    renderer:$.jqplot.DateAxisRenderer,                    
                    autoscale : true,
                    }          
        }
</script>
<p:lineChart  value="#{chartBean.chartModel}"  extender="setSacle" xaxisAngle="-30" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:02:09.640

我想你想用`CanvasAxisTickRenderer`

包括`jqplot.canvasAxisTickRenderer.min.js`

而不是定义

```
xaxis:{
    tickRenderer: $.jqplot.CanvasAxisTickRenderer,
    tickOptions: {
       angle: -30
    }
 } 
```

看一下 jqPlot 示例：[旋转轴刻度标签 | jq绘图](http://www.jqplot.com/tests/rotated-tick-labels.php)

和类似的问题[jqPlot - x 轴上带有角度的多行刻度](https://stackoverflow.com/questions/5314178/jqplot-multiline-ticks-with-angle-in-x-axis)

* * *

[看一下关于Axis Labels and Rotated Text](http://www.jqplot.com/deploy/dist/examples/axisLabelsRotatedText.html)的第二个示例， 它`DateAxisRenderer`与`autoscale: true`

```
xaxis: {
      autoscale: true,
      renderer: $.jqplot.DateAxisRenderer,
      label: 'Incliment Occurrance',
      labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
      tickRenderer: $.jqplot.CanvasAxisTickRenderer,
      tickOptions: {
           angle: 15
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T08:37:49.667

如果您有这么多数据点，如何使用缩放：

```
cursor: {
                    show: true,
                    showTooltip: false,
                    zoom: true,
                    constrainZoomTo: 'x'}, 
```

和

```
<script language="javascript" type="text/javascript" src="jquery/jqplot/plugins/jqplot.cursor.min.js"></script> 
```

# php - 如何集成验证码 joomla

> ID：13839727
> 
> 赞同：-4
> 
> 时间：2012-12-12T12:25:00.253
> 
> 标签：php, joomla2.5, captcha

如何在 joomla 2.5 中将验证码集成到联系表单中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:44:23.227

首先启用 Joomla 2.5 附带的 recaptcha 插件（如果你需要 captcha 而不是 recapture，你需要在[这里](http://extensions.joomla.org/extensions/access-a-security/site-security/captcha)找到一个插件）。[使用来自recaptcha 网站](http://www.google.com/recaptcha)的密钥填写此插件的详细信息。然后进入全局配置，在 Default Captcha 选项中选择 recatpcha。然后它应该默认显示我相信。

观看[此](http://people.joomla.org/videos/adeelch/video/859-how-to-setup-recaptcha-in-joomla-25-website.html)视频以获取分步指南！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:32:46.717

查看验证码的 Joomla Extensions 目录。

[http://extensions.joomla.org/extensions/access-a-security/site-security/captcha](http://extensions.joomla.org/extensions/access-a-security/site-security/captcha)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T12:31:48.930

Joomla 支持**Extension**。要了解什么是扩展程序，您可以查看此链接。[http://www.youjoomla.com/joomla-definitions-knowledgebase/what-is-a-joomla-extension.html](http://www.youjoomla.com/joomla-definitions-knowledgebase/what-is-a-joomla-extension.html)

您可以访问[http://extensions.joomla.org/extensions/access-a-security/site-security/captcha](http://extensions.joomla.org/extensions/access-a-security/site-security/captcha)，这是不同版本 Joomla 的扩展目录。你可以从那里为你挑选合适的。

# debugging - Intellij 远程调试：更改连接超时

> ID：13839728
> 
> 赞同：5
> 
> 时间：2012-12-12T12:25:01.007
> 
> 标签：debugging, intellij-idea

我正在尝试调试一台位于中国（离这里很远）的机器，连接速度很慢。intellij 远程调试器的超时时间很短，因此我无法打开调试器端口：java.net.ConnectException "Connection timed out:"

而且我无法调试。是否可以增加连接超时？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:50:33.167

尝试添加并`-Djava.net.connectiontimeout=<seconds>`重新`<IDEA_install_path>/bin/idea.vmoptions`启动 IDEA。但首先要确保端口已打开且主机可访问，例如您可以尝试连接`telnet`/ 另一个程序。

# c# - XmlWriter OutOfMemoryException

> ID：13839742
> 
> 赞同：0
> 
> 时间：2012-12-12T12:25:42.800
> 
> 标签：c#, xml

将非常大的字符串数据（100 Mb）保存到 Xml 时，我遇到了一个非常奇怪的内存不足异常。我不确定。有人对正在发生的事情有任何想法吗？而且我仅限于使用 2.0 框架。

```
Exception Stack:

System.OutOfMemoryException was unhandled
Message=Exception of type 'System.OutOfMemoryException' was thrown.
Source=mscorlib
StackTrace:

at System.IO.MemoryStream.set_Capacity(Int32 value)
at System.IO.MemoryStream.EnsureCapacity(Int32 value)
at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
at System.IO.StreamWriter.Flush(Boolean flushStream, Boolean flushEncoder)
at System.IO.StreamWriter.Write(Char value)
at System.Xml.XmlTextWriter.InternalWriteEndElement(Boolean longFormat)
at System.Xml.XmlTextWriter.WriteEndElement()
at System.Xml.XmlWriter.WriteElementString(String localName, String ns, String 
```

**示例代码：**

```
StreamWriter streamWriter = new StreamWriter( stream );
XmlTextWriter textWriter = new XmlTextWriter(streamWriter);
XmlWriter writer = textWriter;
writer.WriteStartDocument( true ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:37:45.240

尽管您的代码没有显示这一点，但您可能不是，使用“使用”正确打开和关闭 XMLWriter 流。如果您真的想写入内存，请传入一个 StringBuilder。尝试这个： -

```
using System;
using System.Text;
using System.Xml;
public class Test {
    static void Main()
    { 
        XmlWriterSettings settings = new XmlWriterSettings();
        StringBuilder builder = new StringBuilder();
        using (XmlWriter writer = XmlWriter.Create(builder, settings))
        {
            writer.WriteStartDocument();
            writer.WriteStartElement("root");
            writer.WriteStartElement("element");
            writer.WriteString("content");
            writer.WriteEndElement();
            writer.WriteEndElement();
            writer.WriteEndDocument();
            writer.Flush();
        }
        Console.WriteLine(builder);
} 
```

}

# sql - 用于 Web 发布数据库的 Visual Studio 2012 Express？

> ID：13839745
> 
> 赞同：1
> 
> 时间：2012-12-12T12:25:54.013
> 
> 标签：sql, visual-studio-2012

我需要将我的数据库部署到共享托管环境并且不能使用基于文件的连接。数据库“发布到提供者”选项在 VS2012 Express 中不再可用。我曾经在 VS2010 中使用它，它非常方便。在 VS2012 Express 中是否有任何解决方法？我知道可以使用 SQL Management Studio 来生成脚本，但我必须为每个项目附加数据库，因为我通常将我的数据库保存在每个项目的 App Data 文件夹中。还有 SSDT，但它们不适用于 VS express 版本。提前致谢。

# mysql - WHERE 子句中的 IF 语句

> ID：13839749
> 
> 赞同：1
> 
> 时间：2012-12-12T12:26:15.833
> 
> 标签：mysql, sql

是否可以在 WHERE 子句中创建一个 IF 语句，我需要这样的东西来过滤某个产品。

例如，如果产品 005 的排名为 100 或低于该产品不应该出现在我的查询结果中

例如...

```
SELECT b.id, b.rank 
FROM b_products b 
WHERE IF(b.id = '005' AND b.rank < 100, b.id != '005') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:29:41.420

简单地

```
WHERE (b.id = '005' AND b.rank >= 100) OR b.id != '005' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:30:01.933

您必须在查询中指定 else 部分：

```
SELECT b.id, b.rank 
FROM b_products b 
WHERE IF(b.id = '005' AND b.rank < 100, b.id != '005', else condition) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:32:42.790

[IF()](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_if)函数需要三个参数，而不是两个：

> IF(expr1,expr2,expr3)
> 
> 如果 expr1 为 TRUE（expr1 <> 0 且 expr1 <> NULL），则 IF() 返回 expr2；否则返回 expr3。IF() 返回一个数字或字符串值，具体取决于使用它的上下文。

但是，您没有描述任何无法使用正确的布尔表达式完成的事情：

```
SELECT b.id, b.rank 
FROM b_products b 
WHERE b.id<>'005'
OR (b.id='005' AND b.rank<100) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:29:25.123

条件在`WHERE`子句中直接评估为：

```
SELECT b.id, b.rank 
FROM b_products b 
WHERE NOT (b.id = '005' AND b.rank < 100) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T12:29:56.477

我认为你只需要一个 OR 子句。

```
SELECT 
    b.id, 
    b.rank 
FROM 
    b_products b 
WHERE 
   (b.id = '005' AND b.rank < 100)
or 
    b.id <> '005' 
```

# c# - 指定的强制转换对 SQLDataReader 上的 GetFloat 无效

> ID：13839754
> 
> 赞同：2
> 
> 时间：2012-12-12T12:26:28.180
> 
> 标签：c#, asp.net, sqldatareader

我有一个名为 EarlyHoursStartTime 的数据库列，它被声明为浮点数。

然后我有一些代码，我用 DataReader 遍历整个表

```
SqlDataReader myReader = cmd.ExecuteReader(CommandBehavior.CloseConnection);
while (myReader.Read())
{

    cmdInsertLocation.Parameters.AddWithValue("@EarlyHoursStartTime", myReader.GetFloat(44)); <- Error here

} 
```

我在上面的 AddwithValues 行中遇到错误。

**“指定的演员表无效。”**

发生这种情况时，myReader.GetValue(44) 显示的值为 0.0。

我尝试了各种方法来解决这个问题，比如在以下情况下使用默认值：

```
if (Convert.ToString(myReader.GetValue(44)) == "0.0") 
```

但这应该是不必要的，无论如何它都不起作用。

当值为 0.0 时，为什么我会收到无效的强制转换异常？datareader读入的数据库字段是float，那是什么问题呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T15:52:15.647

根据[映射列表](http://msdn.microsoft.com/en-us/library/ms131092%28v=sql.90%29.aspx)

```
SQL Server data type CLR data type (SQL Server) CLR data type (.NET Framework)
float                SqlDouble                  Double 
```

SQL float 映射到 double 数据类型，因此您应该尝试使用`GetDouble`而不是`GetFloat`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:14:13.447

为什么不试试

```
float _float = Convert.ToSingle(myReader[FloatCol].tostring()); 
```

我不倾向于使用 Oridnal 位置，因为我发现转换所有内容都会减少问题（大部分时间）

问候

# android - google IAB 版本 3 和静态响应测试产品

> ID：13839755
> 
> 赞同：1
> 
> 时间：2012-12-12T12:26:29.637
> 
> 标签：android, in-app-billing

首先感谢 Google 的新 IAB，它更易于使用，并且具有更完整的功能集。

但是，我认为在使用Google Play的[静态响应](https://developer.android.com/google/play/billing/billing_testing.html#billing-testing-static)对其进行测试时，我遇到了一个“小”问题。

遵循指南并在示例实现中使用帮助程序类，如果您开始购买其中一种测试产品，您似乎永远不会在活动 onActivityResult 上获得结果。
因此，经过一番挖掘，似乎至少对于那些产品，它仍然启动了之前的实现 IN_APP_NOTIFY 广播。你们有没有人偶然发现这个问题？

提前致谢

编辑：

在 logcat 中得到了这一行：

D/DfeApi(1367)：[1] DfeRequest.deliverResponse：不为请求提供第二个响应=[[] [https://android.clients.google.com/fdfe/details?doc=inapp:com.mobizy:android。 test.purchased](https://android.clients.google.com/fdfe/details?doc=inapp:com.mobizy:android.test.purchased) NORMAL 103]

编辑：

好的，这是一个错误。发生的事情是有一个忽略 onActivityResult 的代码路径。所以它已经修复并且正在工作......感谢人们的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:08:03.273

嗯，这不是我的经验。“购买的”产品似乎工作得很好：显示假卡，我可以为示例应用程序购买“汽油”。但是他们并没有在文档中提到它，因此可能并不真正支持静态响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:34:06.763

有没有可能你没有清理你的 AndroidManifest.xml？2.0 实现让您为各种 IAB 消息注册接收器。

当我升级到 3.0 时，我不得不删除这些接收器，因为它们全部由 IabHelper 处理。

# jquery - 检索选项的背景颜色时，Firefox 中 .css 的奇怪行为

> ID：13839759
> 
> 赞同：3
> 
> 时间：2012-12-12T12:26:45.763
> 
> 标签：jquery, css, firefox

我在这里做的很简单：

当有人从选择中选择一个选项时，我想将该选择的背景颜色更改为所选选项颜色。

```
$("select").change(function(){
    var newcolor=$(this).children("option:selected").css("background-color");
    $(this).css("backgroundColor", newcolor);
}); 
```

容易吧？好吧，它在 Firefox 17.0.1 中根本不起作用（它在 Chrome 中起作用）。问题是变量 newcolor 被填充：`rgb(51, 153, 255)`。最好的部分是在我的代码、css 或任何东西中都找不到这种颜色。

我已经尝试更改`background-color`为`backgroundColor`, `children`to `find`，但没有任何效果。

有趣的是，如果我这样做：

```
$("select").change(function(){
    var newcolor=$(this).children("option:first").css("background-color");
    $(this).css("backgroundColor", newcolor);
}); 
```

并选择第一个选项，而不是选定的...它有效！

我可能可以使用一些类使其工作，但我很好奇，为什么会发生这种情况，有什么办法可以解决它？

编辑：添加了[jsFiddle](http://jsfiddle.net/qEPPC/)。用 chrome 和 firefox 试试吧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:25:37.430

发生这种情况是因为选择一个选项会更改其背景颜色。您可以在选择它时看到它。之所以这样做，是因为用户代理样式表中有一条规则，该规则使用“选定选项”背景颜色和颜色设置选定选项的样式。

# iphone - 删除以编程方式添加的 UIImageView

> ID：13839762
> 
> 赞同：4
> 
> 时间：2012-12-12T12:26:59.337
> 
> 标签：iphone, xcode, uiimageview, removeall

我正在制作一个在主视图中有 2 个按钮的程序；

一个叫show，一个叫hide，

当用户按下显示按钮时，图像视图被添加到屏幕

代码 ：

```
-(IBAction)show{
  UIImageView *img = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 155, 155)];
  img.image = [UIImage imageNamed:@"icon.png"];
  [self.view addSubview:img];
} 
```

当用户按下隐藏按钮时，我希望应用程序隐藏刚刚添加的图像（img）

但...

当我使用

```
-(IBAction)add{
  [img removeFromSuperView];
} 
```

Xcode 说“img Undecleared”

编辑：有人说将对象定义为公共对象（@property），但问题是图像视图只添加一次。但我希望它在每次用户按下“显示”按钮时添加新的图像视图，

所以我使用 [[self subviews]objectAtIndex:xx]removeFromSuperview] 方法来解决问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T12:32:11.877

为您的图像视图设置一个`tag`，然后您可以通过此标签获取它。

```
[img setTag:123];

...

[[self.view viewWithTag:123] removeFromSuperview]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T12:33:43.277

`UIImageView`在文件中创建对象，`.h`如下所示..

```
UIImageView *img; 
```

并在`.m`文件`viewDidLoad:`方法中添加它，如下所示..

```
- (void)viewDidLoad
{
    ///your another code
    img = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 155, 155)];
    img.image = [UIImage imageNamed:@"icon.png"];
    img.hidden = YES;
    [self.view addSubview:img];
} 
```

当按下显示按钮时显示图像

```
-(IBAction)show{
    img.hidden = NO;
    [self.view bringSubviewToFront:img];
} 
```

而对于隐藏只是像下面这样隐藏..

```
-(IBAction)add{
    img.hidden = YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:29:05.883

使这个 UIImageView 成为你的 UIViewController 类的成员

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:30:20.567

您的 img 对象仅在 show 方法中可见，而不在外部可见..这就是原因。在外面声明它，你的问题就会得到解决。

# css - 应用于 td 的边界半径没有内半径

> ID：13839763
> 
> 赞同：0
> 
> 时间：2012-12-12T12:27:04.127
> 
> 标签：css

当我将边框和边框半径应用于 td 时，内半径是直角，根本不圆角。

![在此处输入图像描述](../Images/103db801eacc0424e3f2a89b498fec52.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:02:45.203

最有可能的问题是具有不透明背景的子元素将剪裁边框的内半径。

要解决此问题，您可以`overflow:hidden`在您的`td`.

您可以在[此示例小提琴](http://jsfiddle.net/hfYqP/3/)中使用溢出来查看效果。

# mysql - 两个具有不同字段的选择查询的联合

> ID：13839771
> 
> 赞同：2
> 
> 时间：2012-12-12T12:27:24.157
> 
> 标签：mysql, sql, select, sum

我有两张桌子`empmaster`和`allocation`. 我曾经`union`为了从两个表中获取结果而进行 sql 操作。`empmaster`有`empid`等`empdetails`。表`allocation`包含作为`empid`外`empmaster`键的另一个名为 的字段`per_alloc`。我需要检索`empdetails`满足：

1.  `empmaster.empid`不在`allocation.empid`。

2.  `empmaster.empid`在`allocation.empid and allocation.per_alloc < 100`.

我使用的 MySQL 查询是：

```
 select distinct(tbl_empmaster.emp_fname) 
  from tbl_empmaster 
  where tbl_empmaster.emp_id not in(select tbl_allocation.emp_id 
                                    from tbl_allocation)
  union
  select distinct(tbl_empmaster.emp_fname) 
  from tbl_empmaster 
   where tbl_empmaster.emp_id in(select tbl_allocation.emp_id 
                                 from tbl_allocation  
                                 group by emp_id  
                                 having sum(per_alloc) < 100) 
```

这只是检索`empdetails`，说 `tbl_empmaster.emp_fname`，我需要检索`sum(per_alloc) from select tbl_allocation`！当我尝试它时会出现很多错误，请任何人告诉我正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:50:52.137

试试这个：

```
SELECT DISTINCT em.emp_fname, 0 alloc 
FROM tbl_empmaster em
WHERE em.emp_id NOT IN(SELECT emp_id FROM tbl_allocation)
UNION
SELECT DISTINCT em.emp_fname, SUM(a.per_alloc) alloc
FROM tbl_empmaster em 
INNER JOIN tbl_allocation a ON em.emp_id = a.emp_id 
GROUP BY a.emp_id 
HAVING SUM(a.per_alloc)<100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:53:15.317

好的，根据我对您的问题的理解，我看到了两个问题。

1.  第二个 select 语句的子查询中存在不必要的分组。写
    `select tbl_allocation.emp_id from tbl_allocation where tbl_allocation.per_alloc<100)`*应该没问题
2.  以及您问题的答案。将第二个选择语句更改为以下内容，它应该可以工作：
    `select A.emp_fname, B.per_alloc from tbl_empmaster A join tbl_allocation B using(emp_id) where A.emp_id in(select C.emp_id from tbl_allocation C where C.per_alloc<100))`

**假设emp_id是主键*

# java - Netbeans 导入的 JAR 未在运行时加载

> ID：13839774
> 
> 赞同：0
> 
> 时间：2012-12-12T12:27:40.420
> 
> 标签：java, netbeans, classpath, netbeans-7

我看到这个问题已经发布了很多次，但是通过添加 `-Djava.library.path="./path"`到 VM 运行时选项已经解决了。

我必须在 JAVA 中构建一个使用 JNotify 类的应用程序。

这是示例代码：

```
package test;

import net.contentobjects.jnotify.JNotify;
import net.contentobjects.jnotify.JNotifyListener;

/**
 *
 * @author 
 */
public class Test {

    public void jnotifydemo() throws Exception {
    // path to watch
    String path = System.getProperty("user.home");

    // watch mask, specify events you care about,
    // or JNotify.FILE_ANY for all events.
    int mask = JNotify.FILE_CREATED
        | JNotify.FILE_DELETED
        | JNotify.FILE_MODIFIED
        | JNotify.FILE_RENAMED;

    // watch subtree?
    boolean watchSubtree = true;

    // add actual watch
    int watchID = JNotify.addWatch(path, mask, watchSubtree, new Listener());

    // sleep a little, the application will exit if you
    // don't (watching is asynchronous), depending on your
    // application, this may not be required
    Thread.sleep(1000000);

    // to remove watch the watch
    boolean res = JNotify.removeWatch(watchID);
    if (!res) {
        // invalid watch ID specified.
    }
    }

    class Listener implements JNotifyListener {

    public void fileRenamed(int wd, String rootPath, String oldName,
        String newName) {
        print("renamed " + rootPath + " : " + oldName + " -> " + newName);
    }

    public void fileModified(int wd, String rootPath, String name) {
        print("modified " + rootPath + " : " + name);
    }

    public void fileDeleted(int wd, String rootPath, String name) {
        print("deleted " + rootPath + " : " + name);
    }

    public void fileCreated(int wd, String rootPath, String name) {
        print("created " + rootPath + " : " + name);
    }

    void print(String msg) {
        System.err.println(msg);
    }
    }

    /**
     * @param args the command line arguments
     */

    public static void main(String[] args) throws Exception {
    System.out.println("Hello World");
    new Test().jnotifydemo();
    }
} 
```

当我运行它时，我得到：

```
Error loading library, java.library.path=C:\Program Files\Java\jdk1.6.0_26\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Windows\system32;(continues)
Exception in thread "main" java.lang.UnsatisfiedLinkError: no jnotify in java.library.path 
```

我已经设置了一个 Netbeans 项目并将 JAR 文件添加到项目中，以便 JAR 正确位于我的项目的 lib/ 文件夹中，并且所有内容都在 NETBEANS 中设置。

如果设置了`-Djava.library.path="./path"`java VM 的参数，这可以正常工作，但是如果我在 NETBEANS 中导入了我的 lib，应该自动包含在路径中。

我做错了什么或者有必要将每个 .jar 放在类路径系统变量中？我想发布这个应用程序，以便它可以在其库中没有 JNotify 的其他系统上运行。

谢谢

我在 Win 7 32Bit 上使用 Netbeans 7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:37:01.097

您将 java jar 文件作为库弄乱了，只能在 netbeans 类路径中添加：

只需在 NetBeans 中的项目属性上单击并调整具有您的 JAR 文件的库。

![项目属性](../Images/e12fe0280e16b4ac7bd93a16093ceba6.png)

对于本机库（so、dll、...），您需要设置：-Djava.library.path。正如您在问题中所做的那样。

所以你有 2 个步骤：
1\. 从[http://sourceforge.net/projects/jnotify/files/jnotify/jnotify-0.94/jnotify-lib-0.94.zip/download](http://sourceforge.net/projects/jnotify/files/jnotify/jnotify-0.94/jnotify-lib-0.94.zip/download)将 jnotify-0.94.jar 添加到你的库中，如图上面（这将自动更新您的类路径）
2\. jnotify.dll 或 64 位 Windows 的 jnotify_64bit.dll 位置是某个目录并将其添加到您的 -Djava.library.path - 将此添加到项目属性的 VM 选项

# magento - Magento 管理面板中的自定义系统配置选项卡视图问题

> ID：13839776
> 
> 赞同：0
> 
> 时间：2012-12-12T12:27:43.753
> 
> 标签：magento, magento-1.5

我在管理面板配置部分中创建了新的自定义配置选项卡`System > Configuration`。我已经参考了以下链接以进行系统配置**选项卡**创建
[http://www.johannreinke.com/en/2012/01/30/add-custom-settings-in-magento-admin-panel/](http://www.johannreinke.com/en/2012/01/30/add-custom-settings-in-magento-admin-panel/)

我的问题是当我单击系统下的配置菜单时，我们的自定义选项卡始终显示而不是常规选项卡。我需要始终显示常规选项卡，而不是显示我的自定义选项卡。

任何人都可以查看我上面的参考链接并就我的问题给我一个建议吗？

非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:10:33.460

你的排序顺序是什么 /app/code/local/[companyName]/[moduleName]/etc/system.xml

```
<config>
    ......
    <sections>
        <xyz translate="label" module="xyz">
             .....
             <sort_order>1</sort_order> 
```

尝试将其更改为更大的数字，例如`<sort_order>96</sort_order>`

请参阅[Magento 管理员 - 更改默认配置菜单](https://stackoverflow.com/questions/13407870/magento-admin-change-default-configuration-menu)

# objective-c - ARC - 代表（分配）过早释放

> ID：13839778
> 
> 赞同：0
> 
> 时间：2012-12-12T12:27:48.827
> 
> 标签：objective-c, automatic-ref-counting

我们正在子类化`UITabBarController`以及`UITabBarControllerDelegate`处理与选项卡开关有关的某些事件。

现在在我们的自定义标签栏控制器中，我们有：

```
- (id)initCustomTabBarController {
    self = [super init];
    if(self) {
       [self setDelegate:[[CustomTabBarControllerDelegate alloc] init]];
       // ...
    }
    return self;
} 
```

由于我们将项目转换为 ARC，因此委托被提前释放，这导致选项卡切换运行到已释放的实例中。

该属性定义为`assign`-`UITabBarController.h`我显然对此没有影响。

我该怎么做才能使委托对象“活”得比 init 方法长？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:31:36.240

是的，这在 ARC 下是正常的，因为没有提及它（又名强属性），它应该在周期结束时发布。

只需在您分配镜头的类中创建一个属性，`CustomTabBarControllerDelegate`使其变得强大。然后将此属性分配给委托。

在非 ARC 中，您设置它的方式可能会造成内存泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T12:37:01.200

按照您的操作方式，预计委托不会超过对象，因为它很弱。请记住，您创建了对象，由您决定是否保留它。

但是 - 您使用的模式不正确。

委托的意义在于，它为一个类提供了一个类不能为自己添加的方法实现，因为它没有足够的信息。例如，表视图委托。为了通用，表格视图不知道要显示多少行或部分，因此它要求它的委托提供此信息。

在您的情况下，您有一个对象正在创建它自己的委托。在这种情况下，为什么还要麻烦委托呢？只需实现类中的方法。

# java - 监视突出显示的文本

> ID：13839780
> 
> 赞同：3
> 
> 时间：2012-12-12T12:27:52.707
> 
> 标签：java, api, text, highlighting

这更像是一个假设性问题，我正在为我正在计划的一个项目集思广益，并且很好奇是否有人知道任何 API 或在任何窗口上立即获取任何突出显示的文本的方法，例如从浏览器或文字处理器。它也可能有一个只有在按下时才会读取的键命令（类似于 CTRL+C 将所选文本添加到剪贴板）

任何有关为此存在哪些 API 的知识将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T07:38:10.980

您可以使用 JNA 在前台窗口中实际模拟`Ctrl-C`（复制操作），然后读取剪贴板中的内容，之后您只需要恢复剪贴板中的内容。

这是一个简短的示例：

```
import java.awt.Toolkit;
import java.awt.datatransfer.Clipboard;
import java.awt.datatransfer.ClipboardOwner;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.StringSelection;
import java.awt.datatransfer.Transferable;

import com.sun.jna.Native;
import com.sun.jna.platform.win32.User32;
import com.sun.jna.platform.win32.WinDef.HWND;
import com.sun.jna.win32.StdCallLibrary;

public class Foo implements ClipboardOwner {
    public interface CustomUser32 extends StdCallLibrary {
        CustomUser32 INSTANCE = (CustomUser32) Native.loadLibrary("user32", CustomUser32.class);
        HWND GetForegroundWindow();
        void keybd_event(byte bVk, byte bScan, int dwFlags, int dwExtraInfo);
    }

    public void lostOwnership(Clipboard clipboard, Transferable contents) {
        // dummy: needed for `ClipboardOwner`
    }

    void controlC(CustomUser32 customUser32) {
        customUser32.keybd_event((byte) 0x11 /* VK_CONTROL*/, (byte) 0, 0, 0);
        customUser32.keybd_event((byte) 0x43 /* 'C' */, (byte) 0, 0, 0);
        customUser32.keybd_event((byte) 0x43 /* 'C' */, (byte) 0, 2 /* KEYEVENTF_KEYUP */, 0);
        customUser32.keybd_event((byte) 0x11 /* VK_CONTROL*/, (byte) 0, 2 /* KEYEVENTF_KEYUP */, 0);// 'Left Control Up
    }

    String getClipboardText() throws Exception {
        return (String) Toolkit.getDefaultToolkit().getSystemClipboard().getData(DataFlavor.stringFlavor);
    }

    void setClipboardText(String data) throws Exception {
        Toolkit.getDefaultToolkit().getSystemClipboard().setContents(new StringSelection(data), this);
    }

    String getSelectedText(User32 user32, CustomUser32 customUser32) throws Exception {
        HWND hwnd = customUser32.GetForegroundWindow();
        char[] windowText = new char[512];
        user32.GetWindowText(hwnd, windowText, 512);
        String windowTitle = Native.toString(windowText);
        System.out.println("Will take selected text from the following window: [" + windowTitle + "]");
        String before = getClipboardText();
        controlC(customUser32); // emulate Ctrl C
        Thread.sleep(100); // give it some time
        String text = getClipboardText();
        System.out.println("Currently in clipboard: " + text);
        // restore what was previously in the clipboard
        setClipboardText(before);
        return text;
    }

    public static void main(String[] args) throws Exception {
        Foo foo = new Foo();
        Thread.sleep(2000); // take some time for you to select something anywhere
        System.out.println(foo.getSelectedText(User32.INSTANCE, CustomUser32.INSTANCE));
    }
} 
```

当您运行它时，您将有两秒钟的时间在任何应用程序的某处选择一些文本，然后它通常会打印它。

> 将从以下窗口中获取选定的文本：[java - 突出显示的监控文本 - 堆栈内存溢出 - Google Chrome]
> 
> 目前在剪贴板中：我正在为我正在计划的项目集思广益

您不需要接受我的回答，这只是为了向您展示我在上面的评论中所说的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-15T09:13:46.753

```
public static String getSelectedData() {
    try {
        Robot robot = new Robot();
        robot.keyPress(KeyEvent.VK_CONTROL);
        Thread.sleep(2*1000);
        robot.keyPress(KeyEvent.VK_C);
        Thread.sleep(2*1000);
        robot.keyRelease(KeyEvent.VK_C);
        Thread.sleep(2*1000);
        robot.keyRelease(KeyEvent.VK_CONTROL);
        Thread.sleep(2*1000);
    } catch (Exception ex) {
        System.out.println(ex);
    }
    String word = getSelectedData();
    return word;
} 
```

私有静态字符串 getDataFromClipboard() {

```
Toolkit toolkit = Toolkit.getDefaultToolkit();
Clipboard clipboard = toolkit.getSystemClipboard();
try {
    String result = (String) clipboard.getData(DataFlavor.stringFlavor);
    return result;
} catch (Exception e) {
    System.out.println("ERROR");
    return null;
}
} 
```

# android - Android 通常只是中断

> ID：13839784
> 
> 赞同：0
> 
> 时间：2012-12-12T12:28:14.297
> 
> 标签：android

我一直在玩一个 android 应用程序，然后重新启动以再次对其进行编码，看看我能从脑海中记住什么。问题是，我已经完全破坏了应用程序并且不明白为什么。

应用程序将加载一点，并显示某种形式的布局（不是任何定义的布局），然后崩溃。

以下是一些代码，如果您需要查看其他内容，请告诉我：

清单：

```
 <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme">

        <activity android:name="org.mjth.online_sn.main" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="org.mjth.online_sn.live" android:label="@string/app_name"></activity>
        <activity android:name="org.mjth.online_sn.login_form" android:label="@string/app_name"></activity>

    </application>

</manifest> 
```

主.java

```
import java.util.EmptyStackException;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.pm.ActivityInfo;
import android.os.Bundle;

//Will do the default setup and checks
public class main extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        //Locks screen orientation to portrait for now
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        //Checks to see if we have valid authorisation keys and files
        SharedPreferences pref = getSharedPreferences("org.mjth.online_sn", MODE_PRIVATE);

        try{

            if(pref.getString("auth_id", "").equals("") == false){
                throw new EmptyStackException();
            }

            if(pref.getString("auth_pass", "").equals("") == false){
                throw new EmptyStackException();
            }

            if(pref.getString("lcl_first_name", "").equals("") == false){
                throw new EmptyStackException();
            }

            if(pref.getString("lcl_last_name", "").equals("") == false){
                throw new EmptyStackException();
            }

            if(pref.getString("lcl_expiry", "").equals("") == false){
                throw new EmptyStackException();
            }

            //TODO: Check if expiry is past todays date.

            //We passed all local checks, set view to live and double check on background
            Intent myIntent = new Intent(getApplicationContext(), live.class);
            startActivityForResult(myIntent, 0);
        }catch (EmptyStackException e){
            //No valid credentials were found.
            Intent myIntent = new Intent(getApplicationContext(), login_form.class);
            startActivityForResult(myIntent, 0);
        }

    }

} 
```

login_form.java

```
import org.mjth.online_sn.R;

import android.app.Activity;
import android.os.Bundle;

public class login_form extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login_form);
    }
} 
```

直播.java

```
import org.mjth.online_sn.R;

import android.app.Activity;
import android.os.Bundle;

public class live extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.live);
    }
} 
```

**更新：**禁用操作意图代码时，出现以下错误：

```
12-12 22:58:49.653: E/AndroidRuntime(1930): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{org.mjth.online_sn/org.mjth.online_sn.main}: java.lang.ClassNotFoundException: org.mjth.online_sn.main
12-12 22:58:49.653: E/AndroidRuntime(1930):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2024)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at android.os.Looper.loop(Looper.java:137)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at android.app.ActivityThread.main(ActivityThread.java:4898)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at java.lang.reflect.Method.invokeNative(Native Method)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at java.lang.reflect.Method.invoke(Method.java:511)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at dalvik.system.NativeStart.main(Native Method)
12-12 22:58:49.653: E/AndroidRuntime(1930): Caused by: java.lang.ClassNotFoundException: org.mjth.online_sn.main
12-12 22:58:49.653: E/AndroidRuntime(1930):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at android.app.Instrumentation.newActivity(Instrumentation.java:1057)
12-12 22:58:49.653: E/AndroidRuntime(1930):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2015)
12-12 22:58:49.653: E/AndroidRuntime(1930):     ... 11 more 
```

# html - body/html 的宽度小于浏览器的宽度问题

> ID：13839785
> 
> 赞同：1
> 
> 时间：2012-12-12T12:28:21.153
> 
> 标签：html, css

我正在为客户/设计工作室开发一个网站，有一个奇怪的问题，我发现尽管 body 和 html 元素设置为 100% 宽度并且当我调整浏览器大小时，滚动条出现迫使我向右滚动才能找到那里是右侧约 150 像素的间隙。当浏览器调整大小但仍然在右侧留下间隙时，body 元素容器 () 将自身设置为 1240px 的固定宽度。

这是body元素的css代码。

```
body {
min-width: 1200px;
max-width: 100%;
left: 0px;
right: 0px;
width: auto !important;
margin: 0 auto;
padding: 0;
background: url('images/bg-repeat2.jpg') repeat;
line-height: 1;
font: 'BitstreamVeraSerifRoman', Arial, sans-serif;
} 
```

这是html元素的css：

```
html {
margin: 0 auto;
padding: 0;
width: 100%;
min-width: 1200px;
left: 0px;
right: 0px;
} 
```

我没有使用“溢出-x：隐藏；” 由于担心需要在较小的屏幕和移动设备中滚动，因此属性。请注意，本网站是桌面版。

如果该社区中的任何人可以通过提供解决方案或修复来提供帮助，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:32:15.903

你的问题似乎是 min-width:1200px; 删除它，它将解决强制水平滚动。如果你想要 100% 的宽度，可以这样做：

```
html, body {
width:100%;
} 
```

对于 html 和 body，我认为您不需要更多的宽度。如果你这样做，请解释原因或张贴你需要的照片。

# magento - 客户登录magento后禁用重定向

> ID：13839792
> 
> 赞同：3
> 
> 时间：2012-12-12T12:28:56.293
> 
> 标签：magento, redirect, account, javascript

我只想让客户在登录到他的 Magento 帐户时留在他的当前页面上。

是的，我知道 Magento 后端选项（位于：系统 > 配置 > 客户 > 客户配置 > 登录选项），但是当我将此设置设置为“否”时，它仍然会在登录后将客户重定向到他的帐户仪表板。

真的没有简单的方法让客户停留在他登录的同一页面上吗？

我知道 Magento connect Psycho 扩展或其他东西 :) 但我只需要一个代码来实现。

蒂亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:18:02.573

你应该设置`NO`为`System > Configuration > Customers > Customer Configuration > Login Options`

并且在您的`login.phtml`文件（`persistent/customer/form`以及`customer/form`您的模板文件夹中）中，您必须将您的操作更改`<form>`为：

```
 action="<?php echo str_replace('login', 'loginPost', $this->helper('customer')->getLoginUrl()) ?>" 
```

或者

试试这个免费的扩展

[http://www.magentocommerce.com/magento-connect/customer-redirect-after-login-5446.html](http://www.magentocommerce.com/magento-connect/customer-redirect-after-login-5446.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-11T09:50:51.653

可以在登录表单phtml文件中添加以下代码

```
$refererUrl = $this->getRequest()->getServer('HTTP_REFERER');
Mage::getSingleton('customer/session')->setBeforeAuthUrl($refererUrl); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T20:46:56.203

我猜这在某种程度上取决于 Magento 版本。在 1.7 中，如果您检查 @Rajat ( `loginPostRedirect`) 提到的功能，您会看到您提到的选项只会在查询字符串中有引用参数时阻止客户最终出现在仪表板上。如果您将该查询参数添加到登录表单的操作中，您应该很高兴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:24:47.257

对于重定向，您必须对客户控制器进行更改。
为了在您的控制器中进行更改，更好的选择是覆盖您的控制器。
您必须更改控制器中的 loginPostRedirect() 函数。
对此行进行更改
**$session->setBeforeAuthUrl(Mage::helper('customer')->getAccountUrl());**

# html - UIWebView 中的可变字体大小

> ID：13839806
> 
> 赞同：0
> 
> 时间：2012-12-12T12:29:32.680
> 
> 标签：html, css, uiwebview, xcode4.3

在uiwebview中加载以下html字符串，我需要将字体大小设置为变量值：

```
 NSString * htmlString = [NSString stringWithFormat:@"\
                             <html>\
                             <style type='text/css'>\
                             hr{ height: 0;border-bottom: 2px dotted #000;}\
                             .Prim{color:#000000; direction:ltr;font-size:%d;font-weight:bold;}\
                             .Def_en{direction:ltr;font-size:%d}\
                             .Def_ar{direction:rtl;font-size:%d}\
                             </style>\
                             <table width='100%%'>\<tr>\<td>\
                             <body>\
                             <p style = 'font-size:%dpx;'> %@ <\p>\
                             </td></tr><tr><td><br><br></td></tr><tr><td align ='center'><br><img src='%@' width='60%%' \><br></td></tr></body>\
                             </table>\
                             </html>",textFontSize , authorNAme , cachePath]; 
```

这段代码是我想象的那样，但它不起作用..为了给 font-size 属性赋予变量 textFontSize 的值，我应该改变什么？
先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:08:58.067

我实际上发现了问题，它很简单......这是代码：

```
NSString * htmlString = [NSString stringWithFormat:@"\
                         <html>\
                         <style type='text/css'>\
                         hr{ height: 0;border-bottom: 2px dotted #000;}\
                         .Prim{color:#000000; direction:ltr;font-size:%d;font-weight:bold;}\
                         .Def_en{direction:ltr;font-size:%d}\
                         .Def_ar{direction:rtl;font-size:%d}\
                         </style>\
                         <table width='100%%'>\<tr>\<td>\
                         <body>\
                         <p style = 'font-size:%dpx;'> %@ <\p>\
                         </td></tr><tr><td><br><br></td></tr><tr><td align ='center'><br><img src='%@' width='60%%' \><br></td></tr></body>\
                         </table>\
                         </html>",textFontSize+12,textFontSize,textFontSize,textFontSize,authorNAme , cachePath]; 
```

# c# - Windows Phone 7 ApplicationBarIconButton 系统样式

> ID：13839807
> 
> 赞同：0
> 
> 时间：2012-12-12T12:29:35.093
> 
> 标签：c#, silverlight, windows-phone-7

是否可以在 ApplicationBarIconButton 上使用 PhoneAccentBrush？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T20:52:53.590

不，你不能。

应用程序栏不是 Silverlight 控件，并且不使用我们使用的数据绑定、画笔和其他细节的常规约定。

它实际上是操作系统中低级 shell 组件的包装器。

本文提供了更多信息： [http ://www.diaryofaninja.com/blog/2011/07/05/solved-why-donrsquot-applicationbar-bindings-work-ndash-windows-phone-7-sdk](http://www.diaryofaninja.com/blog/2011/07/05/solved-why-donrsquot-applicationbar-bindings-work-ndash-windows-phone-7-sdk)

# android - 平板电脑应用程序和移动应用程序

> ID：13839813
> 
> 赞同：1
> 
> 时间：2012-12-12T12:29:44.063
> 
> 标签：android, android-layout

您好我正在开发一个支持手机和平板电脑的安卓应用程序。我已经在平板电脑和手机上完成了列表和详细信息页面。但我需要显示创建页面，在平板电脑中它应该在弹出窗口中打开，而在手机中它应该像正常活动一样打开。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:15:37.100

我的要求是从以下文章解决的[http://developer.android.com/guide/topics/ui/dialogs.html#ActivityAsDialog](http://developer.android.com/guide/topics/ui/dialogs.html#ActivityAsDialog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:41:30.890

您可以通过检查屏幕尺寸来估计它是否是平板电脑。如果应用程序使用 XLARGE 或 LARGE 显示尺寸，它可能是平板电脑或“大”手机。

您可以通过以下方式获取相关信息：

```
if(getResources().getConfiguration().screenLayout == Configuration.SCREENLAYOUT_SIZE_LARGE 
|| getResources().getConfiguration().screenLayout == Configuration.SCREENLAYOUT_SIZE_XLARGE) {
    //doSomething
} 
```

您可以测试其中哪一个更适合您。

# web-services - Web 服务发布请求 playframework 2.0.4

> ID：13839820
> 
> 赞同：1
> 
> 时间：2012-12-12T12:30:05.000
> 
> 标签：web-services, playframework-2.0, http-post

我正在尝试使用 HTTPS 从 Play 2.0.4 向 google API 发出简单的 POST 请求，但我不知道如何发布参数。
我正在使用 Java。

```
WS.url("https://myurl"). ... .post("application/x-www-form-urlencoded"); 
```

我认为 .setQueryParemeter 仅用于 GET 请求。

欢迎任何帮助。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:56:20.483

环顾四周后，我找到了它。

```
WS.url("URL").post("param1=val1&param2=val2..."); 
```

# android - Phonegap PluginManager 无法使用 --rename-manifest-package 加载插件/config.xml

> ID：13839825
> 
> 赞同：1
> 
> 时间：2012-12-12T12:30:22.963
> 
> 标签：android, cordova

我使用 aapt 的 --rename-manifest-package 来生成 env 特定的包。

[看到这个问题](https://stackoverflow.com/questions/3360349/custom-android-build-xml-for-rename-manifest-package)

prod 中的包名，我使用

```
com.xxx.app 
```

对于 uat 环境，我使用

```
com.xxx.app.uat 
```

在我添加phonegap之前它工作正常，我使用的是codorva 2.2，它给了我以下错误

```
12-12 19:02:36.156: E/PluginManager(13188):     =====================================================================================
12-12 19:02:36.156: E/PluginManager(13188): ERROR: plugin.xml is missing.  Add       res/xml/plugins.xml to your project.
12-12 19:02:36.156: E/PluginManager(13188): https://git-wip-us.apache.org/repos/asf?     p=incubator-cordova-android.git;a=blob;f=framework/res/xml/plugins.xml  
12-12 19:02:36.156: E/PluginManager(13188): ===================================================================================== 
```

我终于追溯到 PluginManager 中的以下代码

```
int id = this.ctx.getActivity().getResources().getIdentifier("config", "xml", this.ctx.getActivity().getPackageName());
...
XmlResourceParser xml = this.ctx.getActivity().getResources().getXml(id); 
```

id 为 0，这意味着它无法引用 config.xml getActivity().getPackgeName() 给出替换的包名称 - “ **com.xxx.app.uat** ”

看起来 .getResources().getIdentifer() 没有更新到新包……这可能是 android 的错误吗？

在我的测试用例中，如果我使用 R.xml.config，它会毫无问题地引用 config.xml。

问题是我无法更改作为 Phonegap 代码库一部分的 PluginsManager ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T18:19:22.047

我遇到过同样的错误，但我的处理方式与 Rick Li 不同。应用程序首先尝试使用上下文的包名加载资源，如果这不起作用（id 仍然为 0），应用程序会尝试从 Activity 的类包名中加载资源。

```
int id = this.ctx.getActivity().getResources().getIdentifier("config", "xml", this.ctx.getActivity().getPackageName());
        if (id == 0) {
            // could not find the resource id, maybe we are using the wrong package name ? (the package name could have been changed via aapt at build time).
            id = this.ctx.getActivity().getResources().getIdentifier("config", "xml", this.ctx.getActivity().getClass().getPackage().getName());
            if(id == 0){
                this.pluginConfigurationMissing();
                //We have the error, we need to exit without crashing!
                return;
            }
        } 
```

# symfony - 如何在 symfony2 中处理 PHP 通知

> ID：13839826
> 
> 赞同：1
> 
> 时间：2012-12-12T12:30:23.863
> 
> 标签：symfony, handler, notice

我想了解如何管理 PHP 在 symfony 2 项目中抛出的通知。我有以下代码：

```
$this->login = $parameters['login'];
$this->password = $parameters['password']; 
```

并且当 $parameters 数组没有设置适当的键时会发出通知。但是 symfony 不允许代码更进一步并停止，显示通知消息但在异常中：

```
Notice: Undefined property blah blah blah 
```

在 /vendor/symfony/src/Symfony/Component/HttpKernel/Debug/ErrorHandler.php 第 67 行

```
 if (error_reporting() & $level && $this->level & $level) {
        throw new \ErrorException(sprintf('%s: %s in %s line %d', isset($this->levels[$level]) ? $this->levels[$level] : $level, $message, $file, $line));
    } 
```

仅在发出通​​知时如何使 symfony2 不抛出异常？

# javascript - 用javascript查找最上面的父窗口

> ID：13839828
> 
> 赞同：2
> 
> 时间：2012-12-12T12:30:25.793
> 
> 标签：javascript, jquery

如果您使用大量框架，如何找到文档的最父 body 元素。在几个 iframe 中的 iframe 中，我想为最上面的文档正文调用一个函数。

以下工作，除了你必须每次都计算父母。

```
$(parent.parent.parent.parent.document.body).function('loading'); 
```

没有这样的吗？

```
$(parentOfAllParents.document.body).function('loading'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T12:33:33.823

使用`window.top`.

[规格在这里](http://www.w3.org/TR/Window/#window-embedding)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T12:31:58.257

这可以解决任何问题`iframe`：`top.window.document.body`

# javascript - 在 jQuery 中使用 JSON 变量显示更多 JSON 变量

> ID：13839829
> 
> 赞同：1
> 
> 时间：2012-12-12T12:30:26.683
> 
> 标签：javascript, jquery, html, ajax, json

这有点伪代码，所以编辑掉。我想在用户单击 DIV 内的拇指时使其`#placeholder`显示`thumb2`在`#imageLoad`DIV 内。注意：`Thumb`并且`thumb2`是 JSON 项目。很多人说这不能完成，`getJSON`因为它是一个异步请求。如果是这种情况，那么我该如何更改我的脚本以支持该请求？如果我走错了路，请提供替代解决方案。

```
$.getJSON('jsonFile.json', function (data) {
    var image1 = "<ul>";
    for (var i in data.items) {
        image1 += "<li><img src=images/items/" + data.items[i].thumb + ".jpg></li>";
    }
    image1 += "</ul>";
    document.getElementById("placeholder").innerHTML = output;

    var image2 = "<img src=images/items/" + data.items[i].thumb2 + ".jpg>";
    $('li').click(function () {
        document.getElementById("imageLoad").innerHTML = output;
    });
}); 
```

这是下面的外部 JSON 文件 (jsonFile.json)：

```
{"items":[
    {
        "id":"1",
        "thumb":"01_sm",
        "thumb2":"01_md"
    },
    {
        "id":"2",
        "thumb":"02_sm",
        "thumb2":"02_md"
    }
]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:41:45.900

我认为这可以解决问题：

```
var $placeholder = $('#placeholder'),
    $imageLoad = $('#imageLoad');

$.getJSON('jsonFile.json', function(data) {
    var html = '<ul>';

    $.each(data.items, function(i,item){
        html += '<li><img src=images/items/' + item.thumb + '.jpg></li>';
    });        
    html += '</ul>';

    $placeholder.html(html);
});

$placeholder.on('click','li',function(){    
    $imageLoad.html($(this).html());
}); 
```

我无法理解 of 的用法，`output`因为您无论如何都没有声明它。事件的`click`事件处理程序将触发 的所有当前和未来`li`元素，`$placeholder`其中包含带有 的 DOM`id`对象`placeholder`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:10:41.357

您可以尝试以下方法：

```
$.getJSON('jsonFile.json', function(data)
{
  $("#placeholder").html("");
  var ul = $('<ul></ul>');
  $('#placeholder').append(ul);
  var load = $("#imageLoad");

  for(var i in data.items)
  {
    var li = $('<li></li>');
    ul.append(li);
    var img = $('<img>');
    img.attr("src", "images/items/" + data.items[i].thumb + ".jpg");
    img.click((function(x)
    {
      return function()
      {
        load.html("<img src=images/items/" + data.items[x].thumb2 + ".jpg>");
      }
    })(i));
    li.append(img);
  }
}); 
```

主要区别在于 click-handler 是在循环内分配的，因此每个处理程序都会收到一个带有对 thumb2 的适当引用的闭包。

# c# - 比较两个 RichTextBox？

> ID：13839830
> 
> 赞同：1
> 
> 时间：2012-12-12T12:30:31.507
> 
> 标签：c#, compare, richtextbox

我逐字比较richTextBox1 和richTextBox2。

```
// collect words from ritchtextbox1
String[] test = richtextbox1.text.Split(" ", StringSplitOptions.RemoveEmptyEntries);

// find each word test to richtextbox2
// if it is found then change back color of particular word to green of the 
// else change back color of particular word to red in richtextbox1

test = richtextbox2.text.Split(" ", StringSplitOptions.RemoveEmptyEntries);

// find each word in test to richtextbox1
// if it is found then change back color of particular word to green of the 
// else change back color of particular word to red in richtextbox2 
```

任何人都可以帮助我编写代码我的语法有点差。

我参考了[mateusz](https://stackoverflow.com/users/290863/mateusz)代码

```
String[] test = richtextbox1.text.Split(" ", StringSplitOptions.RemoveEmptyEntries); 
String[] test2 = richtextbox2.text.Split(" ", StringSplitOptions.RemoveEmptyEntries);

bool wordNotFound=false;

for (int i=0;i<test.lenght;i++)
 for (int j=0;j<test2.length;j++){
   if (test[i].equals(test2[j])){
         wordNotFound=true
          break;
          }
     else wordNotFound=true;
  } 
```

//// 这里我需要改变特定单词的颜色而不是整个 ritchtextbox

```
if (wordNotFound) richTextBox1.BackColor = Color.Red;
    else richTextBox1.BackColor = Color.Green; 
```

> 我没有比较两个文本框，我验证了两边是否存在的每个单词。就像拼写检查将字典作为一个richtextbox1。Richtextbox2 中的拼写检查 [有效单词]。反之亦然...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:11:11.290

```
var validWords = new HashSet<string>(new string[] { "a","c","e" });
string[] wordsToCheck = new string[] { "a", "b", "c", "d", "e" };

var result = wordsToCheck.Select(w => new
                {
                    Word = w,
                    IsValid = validWords.Contains(w)
                })
                .ToList(); 
```

如果您只对所有单词是否有效感兴趣，您可以通过以下方式进行简单检查

```
var isOK = wordsToCheck.All(w => validWords.Contains(w)); 
```

* * *

*PS：当然`new string[]{}`s要换成`rtb.Split(....)`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:42:04.330

如果单词的顺序相同，为什么还要费心拆分呢？如果可以的话，我会这样做：

```
if (richtexbox1.text.equals(richtexbox1.text)){
 richTextBox1.BackColor = Color.Green;
} else {
 richTextBox1.BackColor = Color.Red;
} 
```

如果不是，并且您想查找两个文本框是否包含相同的单词但顺序不同，则：

```
 String[] test = richtextbox1.text.Split(" ", StringSplitOptions.RemoveEmptyEntries); 
    String[] test2 = richtextbox2.text.Split(" ", StringSplitOptions.RemoveEmptyEntries);

    bool wordNotFound=false;

    for (int i=0;i<test.lenght;i++)
     for (int j=0;j<test2.length;j++){
       if (test[i].equals(test2[j])){
             wordNotFound=false;
              break;
              }
         else wordNotFound=true;
      }

   if (wordNotFound) richTextBox1.BackColor = Color.Red;
        else richTextBox1.BackColor = Color.Green; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T13:03:50.043

```
 String[] test = richtextbox1.text.Split(" ", StringSplitOptions.RemoveEmptyEntries); 
    String[] test2 = richtextbox2.text.Split(" ", StringSplitOptions.RemoveEmptyEntries); 
```

给出错误；

> 错误 1 ​​'string.Split(string[], System.StringSplitOptions)' 的最佳重载方法匹配有一些无效参数 C:\Users\Saad\Documents\Visual Studio 2012\Projects\WindowsFormsApplication5\WindowsFormsApplication5\Form1.cs 60 29 WindowsFormsApplication5
> 
> 错误 2 参数 1：无法从 'string' 转换为 'string[]' C:\Users\Saad\Documents\Visual Studio 2012\Projects\WindowsFormsApplication5\WindowsFormsApplication5\Form1.cs 60 53 WindowsFormsApplication5

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-12T12:38:55.273

您可以将 textbox1 中的每个单词与 textbox2 进行比较

```
for(int i = 0; i < stringarray1.length; i++)
{
 for(int j = 0; j < stringarray2.length; j++)
 {
   if(stringarray1[i] == stringarray2[j])
     // we have a match
 }
} 
```

# haskell - 根据数据类型类定义 fmap

> ID：13839833
> 
> 赞同：4
> 
> 时间：2012-12-12T12:30:47.833
> 
> 标签：haskell, metaprogramming

可以`fmap`根据`Data`类型类定义[`Data.Data`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Data.html)吗？

似乎使用`gfoldl`一个不能修改类型。还有其他组合器可以做到这一点吗？

我猜它不能*在一般情况下*完成，因为一个人无法只影响 " `Right`"`a`在 an 中`Either a a`，但也许它可以在某些情况下完成，例如`Maybe`?

（我知道这`fmap`很容易推导，但我仍然对使用 是否可以实现感兴趣`Data`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:22:10.470

这是使用`syb`from [here的示例](http://www.haskell.org/haskellwiki/Scrap_your_boilerplate)

```
{-# LANGUAGE DeriveDataTypeable, ScopedTypeVariables, FlexibleContexts #-}
import Data.Generics
import Unsafe.Coerce

{- | C tags the type that is actually parameterized, so to avoid touching the
Int when a ~ Int:

> data T a = T Int a

by changing the type (not representation) to:

> x :: T Int (C Int)
-}
newtype C a = C a deriving (Data,Typeable)

fmapData :: forall t a b. (Typeable a, Data (t (C a)), Data (t a)) =>
    (a -> b) -> t a -> t b
fmapData f input = uc . everywhere (mkT $ \(x::C a) -> uc (f (uc x)))
                    $ (uc input :: t (C a))
    where uc = unsafeCoerce 
```

# mysql - 使用多个 DATE BETWEEN 对选择进行分类

> ID：13839837
> 
> 赞同：0
> 
> 时间：2012-12-12T12:31:01.217
> 
> 标签：mysql, sql

我的标题问题，所以如果我有：

```
SELECT * FROM tbl WHERE date BETWEEN "date[0][start]"
AND "date[0][end]" OR date BETWEEN "date[1][start]" AND "date[1][end]" 
```

我可以以某种方式将设备中的结果与 where 子句分开吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:32:50.257

每个条件的计算结果为 FALSE (0) 或 TRUE (1)。可以选择表达式的结果作为值，甚至可以按这些值对结果进行排序：

```
SELECT
    col1, col2, ..., coln,
    date BETWEEN "date[0][start]" AND "date[0][end]" AS first,
    date BETWEEN "date[1][start]" AND "date[1][end]" AS second
FROM tbl
WHERE date BETWEEN "date[0][start]" AND "date[0][end]"
OR date BETWEEN "date[1][start]" AND "date[1][end]"
ORDER BY first 
```

# android - 横向启动安卓模拟器

> ID：13839838
> 
> 赞同：2
> 
> 时间：2012-12-12T12:31:04.387
> 
> 标签：android, emulation, screen-orientation

有没有办法告诉 Eclipse 以横向模式启动 Android Emulator (4.1.2)？

**我问的原因是，在启动模拟器后**更改方向（使用键盘快捷键之一）似乎不会影响主屏幕和其他系统屏幕，尽管它适用于应用程序。

我知道`-skin`命令行选项，但它已被弃用。

我想我也可以在 Android 虚拟设备管理器中创建一个自定义设备，但我宁愿使用 Nexus 7 预设。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T12:32:32.077

尝试：

```
ctrl+fn+F11 in Mac to change the landscape to portrait and vice versa.

left-ctrl+F11 in Windows 7.

ctrl+F11 in Linux. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T12:39:18.430

这可以通过使用自定义分辨率创建新的 AVD 来实现。

只需启动 AVD 管理器，创建新的 AVD，选择您的目标并勾选分辨率并添加适合横向的分辨率，例如 480 x 640。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-15T21:42:51.077

这是使用 4.4 模拟器时的已知错误。`ctrl+F11`您可以使用上面提到的快捷方式或使用`9`键盘上的键来旋转模拟器。

将模拟器设置为横向后，在模拟器中打开相机应用程序，这会将所有控件重新排列到它们应该处于横向模式的位置。然后，您可以从 eclipse/android studio 启动您的应用程序，它会以横向模式正确显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-11T06:59:24.973

您可以使用当前正在使用的 AVD 并编辑它（从 AVD 管理器），而不是创建新的 AVD，然后您可以更改纵向和横向之间的“方向”选项。

# jquery - 如何在自动完成中获取所选项目的索引？

> ID：13839840
> 
> 赞同：2
> 
> 时间：2012-12-12T12:31:13.457
> 
> 标签：jquery, jquery-ui

我正在使用 jQueryUI 的自动完成功能。它正确列出了项目，我可以从列表中进行选择。我遇到的问题是如何从源事件中使用的数组中获取所选项目的索引。

```
var options = {
    select: function() {
        // problem is here, I'm not able to see the correct index number of the selected item and always say -1
        alert($.inArray($("#searchAText").val()), arrayA); 
    },
    source: function(req, response) {
        var re = $.ui.autocomplete.escapeRegex(reg, term);
        var matcher = new RegExp("^" + re + "i");
        response($.grep(arrayA, function(item, index) {
            return matcher.test(item);
        })); 
    }
};
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:40:37.210

尝试这个：

```
select: function(event, ui) {
     alert($.inArray(ui.item.value, arrayA));
} 
```

# php - 将数据从excel表导入到php中的数据库时转换日期

> ID：13839841
> 
> 赞同：1
> 
> 时间：2012-12-12T12:31:15.427
> 
> 标签：php

我有一个格式为 10/12/2012 的 excel 表。然后我将其转换为 csv 文件，我的日期为“41253”，当我将其导入我的数据库时，它存储为 0000-00-00。如何在导入时转换日期格式。还是有其他方法？

这是我用来导入数据库的代码

```
if(isset($_POST['Submit']))
{

GLOBAL $HTTP_POST_FILES;

//$path= $HTTP_POST_FILES['ufile']['name'];
$path= $_FILES['ufile']['name'];
//
if(copy($_FILES['ufile']['tmp_name'], $path))
{

$host="localhost"; // Host name 
$username="root"; // Mysql username 
$password=""; // Mysql password 
$db_name="xyz"; // Database name 
$tbl_name="productsegmentmaster"; // Table name 
require_once '.\phpExcelReader\Excel\reader.php';
$excel = new Spreadsheet_Excel_Reader();
$excel->setOutputEncoding('CP1251');
$excel->read($path);
$x=2;
$sep = "*";
ob_start();
while($x<=$excel->sheets[0]['numRows']) {
$y=1;
$row="";
while($y<=$excel->sheets[0]['numCols']) {
$cell = isset($excel->sheets[0]['cells'][$x][$y]) ? $excel->sheets[0]['cells'][$x][$y] : '';
$row.=($row=="")?"".$cell."":"".$sep."".$cell."";
$y++;
} 
echo $row."\n"; 
$x++;
}
    //echo "Sheet count:$x";
$fp = fopen("data.csv",'w');
fwrite($fp,ob_get_contents());
fclose($fp);
//echo"----";   
ob_end_clean();
//connect to the database 
$connect = mysql_connect("localhost","root",""); 
mysql_select_db("AmaraRaja",$connect); //select the table 
//$file = $_FILES['data.csv']['tmp_name']; 
$handle = fopen('data.csv',"r"); 
//loop through the csv file and insert into database 
global $data;
do { 
//echo "$data[0]";
//echo "$data[1]";
//echo "$data[2]";
        //$post['ProductSegmentCode'] = $data[0];
//      $post['ProductSegment'] = $data[1];
//           $post['ProductGroup'] = $data[2];
         $post['ProductCode'] = $data[0];
        $post['WarrantyPeriod'] = $data[1];
        $post['ProRataPeriod'] = $data[2];
        $test = date("Y-m-d",strtotime($data[3]));
        $post['ManufactureDate'] = $test;
       $test1 = date("Y-m-d",strtotime($data[4]));
       echo  $data[4];
        $post['ApplicableFormDate'] = $test1;
         $tname = "productwarranty";
try
{
 if($data[0]!="")
 {
     $news->addNews($post,$tname);
//mysql_query("INSERT INTO productsegmentmaster VALUES ( '$data[0]', '$data[1]','$data[2]')"); 

  }
}
catch(Exception $e)
{
    echo $e.getMessage();
}
} while ($data = fgetcsv($handle,1000,"*","'")); 
echo"<script>alert('File $path Imported Successfully')</script>";
}
fclose($handle);

unlink('data.csv');
unlink($path);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T16:10:04.507

可悲的是，我有同样的问题！我尝试了格式化方式，没有用！

我不知道它是否适用于你，但我提供的一个解决方案是在它前面加上一个撇号！('YYYY/mm/dd)。Excel 本身省略撇号，仅将数据显示为文本，而不是 Excel 时间戳。这样，您可以通过“/”分解数据并按照您想要的方式放置。

但是，如果你不可能在每一个前面都放一个撇号，你可以验证是否是一个数字，并尝试[将 excel 时间戳转换为 unix 时间戳](https://stackoverflow.com/questions/1703505/excel-date-to-unix-timestamp)，假设你的服务器是 *NIX 之类的。

=)

我知道这不是最好的解决方案，但到目前为止是我能得到的。希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T06:47:27.100

尝试这个

```
 $date_format = floor($excelDateTime);
    $time_format = $excelDateTime - $date_format;
    $mysql_strdate = ($date_format > 0) ? ( $date_format - 25569 ) * 86400 + $time_format * 86400 :    $time_format * 86400;
    $mysql_date_format = date("Y-d-m", $mysql_strdate); 
```

# mongodb - 如何使用 Mongo $index 这样查询就不会使用任何索引

> ID：13839842
> 
> 赞同：1
> 
> 时间：2012-12-12T12:31:17.117
> 
> 标签：mongodb, nosql

这个问题有点奇怪，但我在我当前的实现中碰到了它：

我想对我的应用程序中的所有内容进行特权插入，我想到命令 $hint 也可以用来让 mongo 不使用索引。

那可能吗？考虑到 $hint 应该做什么，这是一个合理的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T12:37:02.650

[要强制查询优化器不使用索引](http://www.mongodb.org/display/DOCS/Optimization#Optimization-Hint)（进行表扫描），请使用：

> db.collection.find().hint({$natural:1})

不过，不确定这是否能达到您想要的效果（将插入优先于其他活动）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T13:01:18.553

我认为插入的工作方式与您的想法不同。

插入将根据集合本身的索引数量将其需要的字段编入 btree。因此，要获得特权插入，您必须销毁集合上的所有索引。

因此，使用`$natural`顺序提示对读写顺序没有影响。更不用说`$natural`order 是磁盘插入索引，只是一个您无法在查询中有效使用的索引，因此它将强制进行全表扫描。

但是，这实际上并没有任何特权，因为维护 btree 是插入数据的一部分，因此无法通过索引来确定插入的优先级。

此外，写锁和读锁是两个完全不同的东西，所以我再次不确定你的问题是否有意义。

您是否更喜欢寻找原子锁以确保在读取数据之前更新或放入数据？

# javascript - 如何将 Javascript 客户端与 Red5 服务器连接？

> ID：13839844
> 
> 赞同：3
> 
> 时间：2012-12-12T12:31:19.740
> 
> 标签：javascript, red5

有人知道如何将 JavaScript 客户端与 Red5 Server 连接吗？我需要在没有 Flash、Flash 播放器或 Java 虚拟机的情况下执行此操作。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:55:09.913

例如，您可以编写一个 servlet 并通过 JavaScript 对 servlet 调用 REST 调用。然后，servlet 可以调用一个方法并通过 RTMP 将消息广播到所有连接的 flash 客户端。

另一种可能性是例如您集成任何其他可能性来接收 REST 调用。Red5 是一个常规的 Java 应用程序服务器，通常部署在 Tomcat（或 Jetty）上。因此，您可以例如集成 Axis2 并拥有一个功能齐全的 REST 框架来处理 JavaScript 调用并将这些消息转发到 RTMP 客户端。

塞巴斯蒂安

# java - Xuggler 编码和复用

> ID：13839850
> 
> 赞同：12
> 
> 时间：2012-12-12T12:31:27.757
> 
> 标签：java, ffmpeg, streaming, h.264, xuggler

我正在尝试使用[Xuggler](http://www.xuggle.com/xuggler/)（我*相信*它在幕后使用[`ffmpeg`](http://ffmpeg.org/)）来执行以下操作：

*   接受原始 MPJPEG 视频比特流（来自小型 TTL 串行相机）并将其编码/转码为 h.264；和
*   接受原始音频比特流（来自麦克风）并将其编码为 AAC；然后
*   将两个（音频和视频）比特流混合到一个 MPEG-TS 容器中

我已经观看/阅读了他们的一些优秀教程，到目前为止，这就是我所拥有的：

```
// I'll worry about implementing this functionality later, but
// involves querying native device drivers.
byte[] nextMjpeg = getNextMjpegFromSerialPort();

// I'll also worry about implementing this functionality as well;
// I'm simply providing these for thoroughness.
BufferedImage mjpeg = MjpegFactory.newMjpeg(nextMjpeg);

// Specify a h.264 video stream (how?)
String h264Stream = "???";

IMediaWriter writer = ToolFactory.makeWriter(h264Stream);
writer.addVideoStream(0, 0, ICodec.ID.CODEC_ID_H264);
writer.encodeVideo(0, mjpeg); 
```

一方面，我想我已经接近了，但它仍然不正确；而且我只是通过阅读视频代码示例（而不是音频-我找不到任何好的音频示例）来做到这一点。

从字面上看，我将对进入我的 Xuggler 实现的原始视频和音频提要进行字节级访问。但是对于我的生活，我无法弄清楚如何将它们变成 h.264/AAC/MPEG-TS 格式。在此先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-18T14:09:10.860

查看[Xuggler 这个示例代码](http://wiki.xuggle.com/MediaTool_Introduction)，以下应该可以将视频编码为 H.264 并将其复用到 MPEG2TS 容器中：

```
IMediaWriter writer = ToolFactory.makeWriter("output.ts");
writer.addVideoStream(0, 0, ICodec.ID.CODEC_ID_H264, width, height);
for (...)
{

   BufferedImage mjpeg = ...;

   writer.encodeVideo(0, mjpeg);
} 
```

容器类型是从文件扩展名中猜测出来的，编解码器是明确指定的。

要复用音频和视频，您可以执行以下操作：

```
writer.addVideoStream(videoStreamIndex, 0, videoCodec, width, height);
writer.addAudioStream(audioStreamIndex, 0, audioCodec, channelCount, sampleRate);

while (... have more data ...)
{
    BufferedImage videoFrame = ...;
    long videoFrameTime = ...; // this is the time to display this frame
    writer.encodeVideo(videoStreamIndex, videoFrame, videoFrameTime, DEFAULT_TIME_UNIT);

    short[] audioSamples = ...; // the size of this array should be number of samples * channelCount
    long audioSamplesTime = ...; // this is the time to play back this bit of audio
    writer.encodeAudio(audioStreamIndex, audioSamples, audioSamplesTime, DEFAULT_TIME_UNIT);
} 
```

在这种情况下，我相信您的代码负责交错音频和视频：您希望在每次通过循环时调用 encodeAudio()*或*encodeVideo()，具体取决于可用的数据（一大块音频样本或视频帧） ) 具有*较早的时间戳*。

您可能最终会使用另一个基于[IStreamCoder](http://wiki.xuggle.com/Encoding_Video_from_a_sequence_of_Images)的较低级别的 API ，它可以更好地控制各种参数。我认为您不需要使用它。

要回答您提出的具体问题：

(1) “将 BufferedImage (M/JPEG) 编码为 h.264 流” - 你已经明白了，`writer.addVideoStream(..., ICodec.ID.CODEC_ID_H264)`确保你得到 H.264*编解码器*。要获取传输流 (MPEG2 TS)*容器*，只需`makeWriter()`使用扩展名为 .ts 的文件名进行调用。

（2）“弄清楚原始音频馈送的“BufferedImage-equivalent”是什么” - 这是一个短 [] 或[IAudioSamples](http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/javadoc/java/api/com/xuggle/xuggler/IAudioSamples.html)对象（两者似乎都有效，但 IAudioSamples 必须从一个 IBuffer 构造，这很多不那么直截了当）。

(3)“将此音频类编码成AAC音频流”——调用`writer.addAudioStream(..., ICodec.ID.CODEC_ID_AAC, channelCount, sampleRate)`

(4) “将两个流多路复用到同一个 MPEG-TS 容器中” -`makeWriter()`使用 .ts 文件名调用，它设置容器类型。为了正确的音频/视频同步，您可能需要以正确的顺序调用 encodeVideo()/encodeAudio()。

PS 总是先通过最早可用的音频/视频。例如，如果您有 440 个样本长的音频块（在 44000 Hz 采样率下，440 / 44000 = 0.01 秒），而视频正好是 25fps（1 / 25 = 0.04 秒），您可以将它们提供给作者这个命令：

```
video0 @ 0.00 sec
audio0 @ 0.00 sec
audio1 @ 0.01 sec
audio2 @ 0.02 sec
audio3 @ 0.03 sec
video1 @ 0.04 sec
audio4 @ 0.04 sec
audio5 @ 0.05 sec 
```

...等等

只要连续的音频/视频时间戳相对接近，大多数播放设备可能都可以使用流，但这是您为完美多路复用器所做的。

PS 您可能需要参考一些文档：[Xuggler 类图](http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/javadoc/java/api/com/xuggle/mediatool/package-summary.html)、[ToolFactory](http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/javadoc/java/api/com/xuggle/mediatool/ToolFactory.html)、[IMediaWriter](http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/javadoc/java/api/com/xuggle/mediatool/IMediaWriter.html)、[ICodec](http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/javadoc/java/api/com/xuggle/xuggler/ICodec.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:45:26.417

我认为您应该查看 gstreamer：[http://gstreamer.freedesktop.org/](http://gstreamer.freedesktop.org/)您必须寻找可以捕获相机输入的插件，然后将其通过管道传输到 libx264 和 aac 插件，然后它们通过 mpegts 多路复用器传递它们。

gstreamer 中的管道如下所示：

```
v4l2src queue-size=15 ! video/x-raw,framerate=25/1,width=384,height=576 ! \
  avenc_mpeg4 name=venc \
alsasrc ! audio/x-raw,rate=48000,channels=1 ! audioconvert ! lamemp3enc name=aenc \
avimux name=mux ! filesink location=rec.avi venc. ! mux. aenc. ! mux. 
```

在这个管道中，使用了 mpeg4 和 mp3 编码器，并且流被复用为 avi。您应该能够找到 libx264 和 aac 的插件。如果您需要进一步的指示，请告诉我。

# php - 不规则的正则表达式行为

> ID：13839861
> 
> 赞同：1
> 
> 时间：2012-12-12T12:31:57.440
> 
> 标签：php, regex, pcre

我有一个字符串：

```
$day = "11.08.2012 PROC BRE-AMS 08:00-12:00 ( MIETWAGEN MIT BAK RES 6049687886 ) Y AMS-AMS 13:15-19:15" 
```

我有一个正则表达式：

```
$data = preg_split("/(?=[A-Z]{1,4}[\s]+[A-Z]{3}[\-][A-Z]{3}[\s]+)/", $day); 
```

预期的`$data`-Array 应该是：

```
array
      0 => string '11.08.2012 ' (length=11)
      1 => string 'PROC 08:00-12:00 ( MIETWAGEN MIT BAK RES 6049687886 ) ' (length=22)
      2 => string 'Y AMS-AMS 13:15-19:15' (length=21) 
```

但我的结果是：

```
0 => string '11.08.2012 ' (length=11)
      1 => string 'P' (length=1)
      2 => string 'R' (length=1)
      3 => string 'O' (length=1)
      4 => string 'C BRE-AMS 08:00-12:00 ( MIETWAGEN MIT BAK RES 6049687886 ) ' (length=59)
      5 => string 'Y AMS-AMS 13:15-19:15' (length=21) 
```

我无法追溯这里发生的事情。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:40:29.080

简而言之，问题在于模式中*的 (?=...) 子表达式与 position*匹配。我明白这正是您的意图；问题是，下一个匹配不是在 (?=) 中指定的模式结束匹配时开始 - 而是在前瞻 + 1 符号匹配的*位置。*

让我们详细检查一下这个过程。第一次尝试拆分时，它会遍历字符串，直到到达星号标记的位置：

```
11.08.2012 *PROC BRE-AMS 08:00-12:00 
```

...它可以匹配给定的模式。对于下一次尝试，起始位置“碰撞”一个符号，所以现在我们在这里：

```
11.08.2012 P*ROC BRE-AMS 08:00-12:00 
```

......瞧，我们*再次*可以匹配这个模式，因为那个`{1,4}`量词！这就是你得到这些“不规则”`P`和`R`符号`O`的方式。

* * *

这是为了解释，现在是“如何修复”部分。我想，最简单的方法是在拆分模式中添加这个小扭曲：

```
$data = preg_split('/\b(?=[A-Z]{1,4}\s+[A-Z]{3}-[A-Z]{3}\s+)/', $day); 
```

我们仍然匹配位置 - 但现在这个位置应该是将“单词”符号与非单词符号分开的位置。同样的想法可以用消极的lookbehind模式来表达：

```
$data = preg_split('/(?<![A-Z])(?=[A-Z]{1,4}\s+[A-Z]{3}-[A-Z]{3}\s+)/', $day); 
```

...我想这实际上更精确，但不那么优雅。)

这里有两个旁注：1）当您需要指定单个符号时不要使用字符类语法（简单`-`- 或“快捷方式”之一，如`\s`）；2）使用单引号来分隔你的模式，除非你想在其中插入一些变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T12:35:26.383

连字符是字符类中的元字符。如果你想在一个字符类中包含一个连字符，你必须用反斜杠转义它（尽管在这种特定情况下它可以工作，因为你的字符类只有一个连字符）。

如果您需要包含拆分字符串，请将前瞻的开头锚定到单词边界，以便仅测试前 1-4 个字符序列的第一个字母：

```
/(?=\b[A-Z]{1,4}\s+[A-Z]{3}-[A-Z]{3}\s+)/' 
```

# php - htaccess 中的重定向关键性

> ID：13839864
> 
> 赞同：1
> 
> 时间：2012-12-12T12:32:03.147
> 
> 标签：php, asp.net, apache, .htaccess, unix

我的一个网站面临重定向严重性。就这个 -

我必须将[http://local.port-all/antique/c-Furniture/m-Antique-Dining-Room-Tables.html](http://local.port-all/antique/c-Furniture/m-Antique-Dining-Room-Tables.html)重定向 到[http://local.port-all/antique-c-Furniture-m-古董+餐厅+房间+桌子.html](http://local.port-all/antique-c-Furniture-m-Antique+Dining+Room+Tables.html)

所以我写了htaccess重定向

```
 Redirect /antique/c-Furniture/m-Antique-Dining-Room-Tables.html /antique-c-Furniture-m-Antique+Dining+Room+Tables.html 
```

所以它重定向到特定的url。但是该站点有一个默认规则集，

```
 RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
    RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

因此，当我的重定向工作时，它会在重定向 url 的末尾添加*路由。*这意味着重定向后它显示

```
 http://local.port-all/antique-c-Furniture-m-Antique+Dining+Room+Tables.html?_route_=antique/c-Furniture/m-Antique-Dining-Room-Tables.html 
```

但我只需要

```
 http://local.port-all/antique-c-Furniture-m-Antique+Dining+Room+Tables.html 
```

在我没有得到的重定向之后。我不能删除

```
 _route_ from RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

因为它创建了站点的默认路由访问。所以我需要不同的解决方案。

请帮忙。

提前致谢

# c# - 如何使用 Newtonsoft.Json 包在 C#(4.0) 中解析我的 json 字符串？

> ID：13839865
> 
> 赞同：34
> 
> 时间：2012-12-12T12:32:06.480
> 
> 标签：c#, json, c#-4.0, json.net

我是 JSON 新手。在我的 asp.net 应用程序中，我想解析 json 字符串。所以，我使用 Newtonsoft.Json 包来读取和写入 json 数据。现在，我可以解析简单的 json 数据了。但是现在我收到了一些复杂的 json 数据进行解析。所以，我对它有点印象深刻。

**这是 JSON 数据：**

```
{
    quizlist: [
     {
            QUIZ: {
                'QPROP': [
                    {
                        'name': 'FB',
                        'intro': '',
                        'timeopen': '1347871440',
                        'timeclose': '1355733840',
                        'timelimit': '0',
                        'noofques': '5',
                        'QUESTION': {
                            'QUEPROP': [
                                {
                                    'questiontext': 'Scienceisbasedont',
                                    'penalty': '0.3333333',
                                    'qtype': 'shortanswer',
                                    'answer': 'cause-and-effect',
                                    'mark'  : '5',
                                    'hint': ''
                                },
                                {
                                    'questiontext': 'otherscientistsevaluateit',
                                    'penalty': '0.3333333',
                                    'qtype': 'shortanswer',
                                    'answer': 'Peerreview',
                                    'mark'  : '5',
                                    'hint': ''
                                },
                                {
                                    'questiontext': 'Watchingavariety',
                                    'penalty': '0.3333333',
                                    'qtype': 'shortanswer',
                                    'answer': 'inductive',
                                    'mark'  : '5',
                                    'hint': ''
                                },
                                {
                                    'questiontext': 'coveriesorideas',
                                    'penalty': '0.3333333',
                                    'qtype': 'shortanswer',
                                    'answer': 'paradigmshift',
                                    'mark'  : '5',
                                    'hint': ''
                                },
                                {
                                    'questiontext': 'proportions',
                                    'penalty': '0.3333333',
                                    'qtype': 'shortanswer',
                                    'answer': 'fixed',
                                    'mark'  : '5',
                                    'hint': ''
                                }
                            ]
                        }
                    }
                ]
            }
        }
     ]
} 
```

**这是我的 C# 代码：**

```
dynamic dynObj = JsonConvert.DeserializeObject(jsonString);

            foreach (var data in dynObj.quizlist)
            {
                foreach (var data1 in data.QUIZ.QPROP)
                {
                    Response.Write("Name" + ":" + data1.name + "<br>");
                    Response.Write("Intro" + ":" + data1.intro + "<br>");
                    Response.Write("Timeopen" + ":" + data1.timeopen + "<br>");
                    Response.Write("Timeclose" + ":" + data1.timeclose + "<br>");
                    Response.Write("Timelimit" + ":" + data1.timelimit + "<br>");
                    Response.Write("Noofques" + ":" + data1.noofques + "<br>");
                }
              } 
```

我可以解析直到 QPROP 数组对象中的 noofques 对象。现在还必须解析 data.QUIZ.QPROP.QUESTION.QUEPROP 数组对象...

但我未能完全解析......

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T12:42:43.870

```
foreach (var data in dynObj.quizlist)
{
    foreach (var data1 in data.QUIZ.QPROP)
    {
        Response.Write("Name" + ":" + data1.name + "<br>");
        Response.Write("Intro" + ":" + data1.intro + "<br>");
        Response.Write("Timeopen" + ":" + data1.timeopen + "<br>");
        Response.Write("Timeclose" + ":" + data1.timeclose + "<br>");
        Response.Write("Timelimit" + ":" + data1.timelimit + "<br>");
        Response.Write("Noofques" + ":" + data1.noofques + "<br>");

        foreach (var queprop in data1.QUESTION.QUEPROP)
        {
            Response.Write("Questiontext" + ":" + queprop.questiontext  + "<br>");
            Response.Write("Mark" + ":" + queprop.mark  + "<br>");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-12T12:35:13.727

您可以使用此工具创建适当的 c# 类：

[http://jsonclassgenerator.codeplex.com/](http://jsonclassgenerator.codeplex.com/)

当您创建类时，您可以简单地将字符串转换为对象：

```
 public static T ParseJsonObject<T>(string json) where T : class, new()
    {
        JObject jobject = JObject.Parse(json);
        return JsonConvert.DeserializeObject<T>(jobject.ToString());
    } 
```

这里的类：[http ://ge.tt/2KGtbPT/v/0?c](http://ge.tt/2KGtbPT/v/0?c)

只需修复命名空间。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-12T13:35:27.913

您可以创建自己的 Quiz 类型的类，然后使用强类型反序列化：

例子：

```
quizresult = JsonConvert.DeserializeObject<Quiz>(args.Message,
                 new JsonSerializerSettings
                 {
                     Error = delegate(object sender1, ErrorEventArgs args1)
                     {
                         errors.Add(args1.ErrorContext.Error.Message);
                         args1.ErrorContext.Handled = true;
                     }
                 }); 
```

您还可以应用模式验证。

[http://james.newtonking.com/projects/json/help/index.html](http://james.newtonking.com/projects/json/help/index.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-24T13:24:15.203

这是一个简单的 JSON 解析示例，以谷歌地图 API 为例。这将返回给定邮政编码的城市名称。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Newtonsoft.Json;
using System.Net;

namespace WebApplication1
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        WebClient client = new WebClient();
        string jsonstring;
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            jsonstring = client.DownloadString("http://maps.googleapis.com/maps/api/geocode/json?address="+txtzip.Text.Trim());
            dynamic dynObj = JsonConvert.DeserializeObject(jsonstring);

            Response.Write(dynObj.results[0].address_components[1].long_name);
        }
    }
} 
```

# sql - PostgreSQL - 使第一行显示为其他行的总数

> ID：13839878
> 
> 赞同：11
> 
> 时间：2012-12-12T12:32:43.360
> 
> 标签：sql, postgresql

有没有办法让第一行与其他行不同，所以它会显示相应列的总和？

例如：

```
 fruits|a|b|c
       total|3|4|6
      apples|1|2|3
     bananas|1|1|2
     oranges|1|1|1 
```

是否可以进行这样的查询或违反sql的逻辑？它会是这样的（暂时忽略第一行）：

```
SELECT fruits, sum(a), sum(b), sum(c)
FROM basket 
```

所以第一行会有所不同。它将显示单词“total”而不是水果名称，并显示 a (1+1+1=3)、b (2+1+1=4) 和 c (3+2+1=6) 的总和. 有可能这样做吗？谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-12T14:27:37.367

您可以避免使用 CTE 对表进行第二次完整扫描：

**PostgreSQL 9.2 架构**：

```
create table basket(fruits text, a integer, b integer, c integer);
insert into basket(fruits, a, b, c) values('apples', 1, 1, 1),
                                          ('apples', 0, 1, 2),
                                          ('bananas', 1, 1, 2),
                                          ('oranges', 1, 1, 1); 
```

**查询**：

```
with w as ( select fruits, sum(a) a, sum(b) b, sum(c) c
            from basket
            group by fruits )
select * from w union all select 'total', sum(a), sum(b), sum(c) from w 
```

**结果**：

```
|  FRUITS | A | B | C |
-----------------------
| bananas | 1 | 1 | 2 |
| oranges | 1 | 1 | 1 |
|  apples | 1 | 2 | 3 |
|   total | 3 | 4 | 6 | 
```

*SQL小提琴[在这里](http://sqlfiddle.com/#!12/a682a/20)*

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-03-17T13:15:01.143

[这现在可以在 Postgres 9.5 版中实现](http://www.postgresql.org/docs/9.5/static/queries-table-expressions.html)：

**PostgreSQL 9.5 架构**

```
CREATE TABLE basket(fruits text, a integer, b integer, c integer);
CREATE TABLE
INSERT INTO basket(fruits, a, b, c) values('apples', 1, 1, 1),
                                      ('apples', 0, 1, 2),
                                      ('bananas', 1, 1, 2),
                                      ('oranges', 1, 1, 1); 
```

**询问**

```
SELECT coalesce(fruits,'total'), sum(a) a, sum(b) b, sum(c) c
FROM basket
GROUP BY ROLLUP((fruits)) 
```

**结果**

```
 fruits  | a | b | c
---------+---+---+---
 apples  | 1 | 2 | 3
 bananas | 1 | 1 | 2
 oranges | 1 | 1 | 1
 total   | 3 | 4 | 6 
```

这`ROLLUP`相当于使用带有 的表达式`GROUPING SETS`：

```
SELECT fruits, sum(a) a, sum(b) b, sum(c) c
FROM basket
GROUP BY GROUPING SETS (fruits, ()) 
```

中的每个子列表的`GROUPING SETS`解释方式与直接在 GROUP BY 子句中的方式相同。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-12T12:40:23.173

```
SELECT 'total' AS fruits, sum(a), sum(b), sum(c) FROM basket
UNION ALL
SELECT fruits, sum(a), sum(b), sum(c) FROM basket GROUP BY fruits 
```

# git - 如何确定 git 存储库的“人性化”部分

> ID：13839879
> 
> 赞同：6
> 
> 时间：2012-12-12T12:32:44.670
> 
> 标签：git, scripting

如果我像这样克隆一个 git 存储库

```
git clone <some-repository> 
```

git 创建一个目录，命名为源存储库的“人性化”部分。（根据手册页）。

现在我想创建一个 bash 脚本，将存储库克隆到新创建的目录中，并执行一些操作。bash 脚本是否有一种简单的方法可以知道创建的目录的名称，而无需为“git clone”命令显式提供目录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:13:08.780

要添加到 Hiery 的答案，您将在 git repo 本身中找到一个完整的 shell 脚本示例：
[`contrib/examples/git-clone.sh`](https://github.com/git/git/blob/master/contrib/examples/git-clone.sh)，以及[相关的提取](https://github.com/git/git/blob/master/contrib/examples/git-clone.sh#L218-L234)：

```
# Decide the directory name of the new repository
if test -n "$2"
then
    dir="$2"
    test $# = 2 || die "excess parameter to git-clone"
else
    # Derive one from the repository name
    # Try using "humanish" part of source repo if user didn't specify one
    if test -f "$repo"
    then
        # Cloning from a bundle
        dir=$(echo "$repo" | sed -e 's|/*\.bundle$||' -e 's|.*/||g')
    else
        dir=$(echo "$repo" |
            sed -e 's|/$||' -e 's|:*/*\.git$||' -e 's|.*[/:]||g')
    fi
fi 
```

请注意，它考虑了克隆**[捆绑包](http://git-scm.com/docs/git-bundle)**（这是一个作为*一个文件的*[存储库，在使用云中](https://stackoverflow.com/questions/3632723/git-with-dropbox/3633346#3633346)的存储库时很有用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:40:51.267

您需要获取 url 并对其进行解析以获取最新部分并剥离 .git。

```
#!/bin/bash
URL=$1

# Strip off everything from the beginning up to and including the last slash
REPO_DIR=${URL##*/}
# Strip off the .git part from the end of the REPO_DIR
REPO_DIR=${REPO_DIR%%.git}

git clone $URL
cd $REPO_DIR
.... 
```

# java - 从父类获取数据到片段

> ID：13839883
> 
> 赞同：0
> 
> 时间：2012-12-12T12:32:49.870
> 
> 标签：java, android, android-fragments

我有我的 settings.java 和我的 fragment.java。

在片段（存在于我的 settings.java 中）中，我有一个随机数来设置视图。效果很好。我正在尝试将其从随机 int 更改为从共享首选项中提取的内容。在我的 settings.java 我有一个方法：

```
public int getHour() {
        SharedPreferences settings = getSharedPreferences("My_Prefs",
                MODE_PRIVATE);
        int timeout = settings.getInt("timeout_hour", 8);
        return timeout;
    } 
```

我在我的 fragment.java 中通过说 `...settings.getHour();` 但这会导致它崩溃。如果我只是用随机整数（任何整数）替换它，`...8`程序就会完美运行。为什么当我只有数字 8 时我的应用程序会运行，但是当`getHour()`返回一个数字（在本例中为 8）时它会失败。这是对片段的某种限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:39:51.783

因为 settings 是 getHour() 函数的局部变量。如果您想在片段中访问它，请将其设为字段并提供公共 getter 函数 getSettings()。然后通过以下方式获取片段中的活动实例

```
activity = (Settings) getActivity(); 
```

现在访问设置

```
activity.getHour() 
```

内部片段。

# ios - 主线程处理问题

> ID：13839884
> 
> 赞同：1
> 
> 时间：2012-12-12T12:32:50.020
> 
> 标签：ios, multithreading, ios5, uiview, grand-central-dispatch

在我的应用程序中，我使用后台线程来访问多个服务并使用核心数据执行操作。我已经将主线程用于后台进程，它工作正常。这是我的代码

```
 dispatch_queue_t main = dispatch_get_main_queue();
    dispatch_async(main, 
                   ^{ 
                       [self backGroundCall]; 
                   }); 

-(void)backGroundCall
{
   NSLog(@"Done");
        if([CacheManager refreshDBforFirstTimeUseWithDelegate:self])
       {
           [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"IsDBInitialized"];

            ContainerViewController *containerViewControllerInstance = [ContainerViewController getContainerInstance];
            [containerViewControllerInstance setUserId:_userID];

            [progressView setHidden:YES];
            [self.view setUserInteractionEnabled:YES];

            [self.navigationController setDelegate:containerViewControllerInstance];
            [self.navigationController pushViewController:containerViewControllerInstance animated:YES];
        }

} 
```

初始化数据库后，我需要导航到容器视图。在初始化期间，我将显示一个进度条。当整个后台进程完成时（应用程序处于最小化状态），这一切正常。在后台过程中，如果我来到前台进度条当时没有显示黑屏而不是进度视图。主威胁容器视图完成后所有不显示[如果我来到主线程进程的前台]。

![在此处输入图像描述](../Images/1c0f6152ea2d6a5dedfaeede1358a3bc.png)

如果我在主线程进程的中间返回应用程序，我需要显示进度条。请指导我解决此问题。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:50:25.570

```
 dispatch_queue_t main = dispatch_get_main_queue();
    dispatch_async(main, 
                   ^{ 
                       [self backGroundCall]; 
                   }); 
```

这有点误导......您调用方法`backGroundCall`，但您实际上是在主线程上执行此操作。如果你想在一个工作线程上做一些操作，你可以这样做：

```
 // Declare the queue
         dispatch_queue_t workingQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
         dispatch_async(workingQueue,
                        ^{
                          // My background job
                            dispatch_async(dispatch_get_main_queue(),
                                           ^{
                                              // Update the UI
                                           }
                                           );
                        }); 
```

# objective-c - 需要帮助来加快自定义 UIView 的子类

> ID：13839891
> 
> 赞同：1
> 
> 时间：2012-12-12T12:33:03.450
> 
> 标签：objective-c, iphone, cocoa-touch, uiview, calayer

我已经开始写一个`UIView`子类。这将是一个允许用户滚动块并按下其中任何一个的控件，非常类似于`UITableView`. 请检查我在下面发布的图片的链接。

[http://i.piccy.info/i7/0577902c1bdba79ac3a26a5d3ce322f9/4-50-285/17627834/2012_12_12_14_06_11.jpg](http://i.piccy.info/i7/0577902c1bdba79ac3a26a5d3ce322f9/4-50-285/17627834/2012_12_12_14_06_11.jpg)

[http://i.piccy.info/i7/91a0a1eec95d74e7c13a789fc69a5582/4-50-285/20953097/2012_12_12_14_06_39.jpg](http://i.piccy.info/i7/91a0a1eec95d74e7c13a789fc69a5582/4-50-285/20953097/2012_12_12_14_06_39.jpg)

这是源代码：（.h 文件）

```
#import <UIKit/UIKit.h>
#import "Quartzcore/Quartzcore.h"

@interface OSBlockView : UIView
{
    CGFloat scrollPosition; // from 0 to 1
    CGFloat zoneForFlexion;

    CGSize blockSize;
    NSUInteger blockQuantity;
    CGFloat projection;

    NSDictionary *anglesForHeights;

    CGFloat oldTranslatedY;

    UIGestureRecognizer *panGesture;

    NSArray *blocks;
}

@property (nonatomic, readwrite) CGFloat scrollPosition;
@property (nonatomic, readwrite) CGFloat zoneForFlexion;
@property (nonatomic, readwrite) CGSize blockSize;
@property (nonatomic, readwrite) NSUInteger blockQuantity;
@property (nonatomic, readwrite) CGFloat projection;

@property (nonatomic, retain) NSDictionary *anglesForHeights;

@property (nonatomic, readwrite) CGFloat oldTranslatedY;

@property (nonatomic, retain) UIGestureRecognizer *panGesture;

@property (nonatomic, retain) NSArray *blocks;

- (id)initWithFrame:(CGRect)frame blockHeight:(CGFloat)bHeight projection:(CGFloat)proj andBlocks:(NSArray *)blcks;
+(NSDictionary *)calculateAllHeightsForAnglesWithBlockHeight:(CGFloat)blockHeight andProjection:(CGFloat)proj;
-(NSNumber *)getBlockTopWithBlockNumber:(NSNumber *)bn;
-(NSNumber *)angleValueForBlockHeight:(NSNumber *)h;

+(NSArray *)multicoloredViewsWithSize:(CGSize)size;

@end 
```

这是 .m 文件：

```
#import "OSBlockView.h"

@implementation OSBlockView

@synthesize scrollPosition, zoneForFlexion;
@synthesize blockSize, blockQuantity, projection;
@synthesize anglesForHeights;
@synthesize oldTranslatedY;
@synthesize panGesture;
@synthesize blocks;

int logForTimingIndex=0;
+(void)logFotTimingWithString:(NSString *)str
{
    NSLog(@"time log: %08i %@", logForTimingIndex, str);
    logForTimingIndex++;
}

- (id)initWithFrame:(CGRect)frame blockHeight:(CGFloat)bHeight projection:(CGFloat)proj andBlocks:(NSArray *)blcks;
{
    [[self class] logFotTimingWithString:@"begin init"];
    self = [super initWithFrame:frame];
    if (self)
    {
        self.blockSize=CGSizeMake(frame.size.width, bHeight);
        self.blockQuantity=[blcks count];
        self.blocks=blcks;
        self.projection=proj;
        self.anglesForHeights=[OSBlockView calculateAllHeightsForAnglesWithBlockHeight:bHeight andProjection:proj];
        self.scrollPosition=0.2;
        self.zoneForFlexion=frame.size.height*0.9;

        //adding pan gesture
        self.panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGesture:)];
        [self addGestureRecognizer:panGesture];
    };
    [[self class] logFotTimingWithString:@"end init"];
    return self;
}

+(NSArray *)multicoloredViewsWithSize:(CGSize)size
{
    [[self class] logFotTimingWithString:@"multicoloredViewsWithSize begin"];
    //generating multicoloured blocks
    NSMutableArray *blocks=[[NSMutableArray alloc] init];
    for (int i=0; i<13; i++)
    {
        UIColor *blockColor;
        switch (i)
        {
            case 0:
            {
                blockColor=[UIColor colorWithRed:0.75 green:0.75 blue:0.75 alpha:1.0];
                break;
            }
            case 1:
            {
                blockColor=[UIColor colorWithRed:0.5 green:0.5 blue:0.5 alpha:1.0];
                break;
            }
            case 2:
            {
                blockColor=[UIColor colorWithRed:1.0 green:0.0 blue:0.0 alpha:1.0];
                break;
            }
            case 3:
            {
                blockColor=[UIColor colorWithRed:0.5 green:0.0 blue:0.0 alpha:1.0];
                break;
            }
            case 4:
            {
                blockColor=[UIColor colorWithRed:1.0 green:1.0 blue:0.0 alpha:1.0];
                break;
            }
            case 5:
            {
                blockColor=[UIColor colorWithRed:0.5 green:0.5 blue:0.0 alpha:1.0];
                break;
            }
            case 6:
            {
                blockColor=[UIColor colorWithRed:0.0 green:1.0 blue:0.0 alpha:1.0];
                break;
            }
            case 7:
            {
                blockColor=[UIColor colorWithRed:0.0 green:0.5 blue:0.0 alpha:1.0];
                break;
            }
            case 8:
            {
                blockColor=[UIColor colorWithRed:0.0 green:1.0 blue:1.0 alpha:1.0];
                break;
            }
            case 9:
            {
                blockColor=[UIColor colorWithRed:0.0 green:0.5 blue:0.5 alpha:1.0];
                break;
            }
            case 10:
            {
                blockColor=[UIColor colorWithRed:0.0 green:0.0 blue:1.0 alpha:1.0];
                break;
            }
            case 11:
            {
                blockColor=[UIColor colorWithRed:0.0 green:0.0 blue:0.5 alpha:1.0];
                break;
            }
            case 12:
            {
                blockColor=[UIColor colorWithRed:1.0 green:0.0 blue:1.0 alpha:1.0];
                break;
            }
            case 13:
            {
                blockColor=[UIColor colorWithRed:0.5 green:0.0 blue:0.5 alpha:1.0];
                break;
            }
            default:
            {
                NSLog(@"PANIC: unknown block index");
                blockColor=[UIColor blackColor];
                break;
            }
        }
        UIView *bView=[[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, size.width, size.height)];
        [bView setBackgroundColor:blockColor];
        [bView.layer setBorderWidth:3];
        [bView.layer setBorderColor:[[UIColor whiteColor] CGColor]];
        UILabel *blockLabel=[[UILabel alloc] initWithFrame:CGRectMake(2.5, 2.5, bView.frame.size.width-5, bView.frame.size.height-5)];
        [blockLabel setBackgroundColor:[UIColor clearColor]];
        [blockLabel setText:[NSString stringWithFormat:@"block number %i", i]];
        [blockLabel setFont:[UIFont boldSystemFontOfSize:20]];
        [blockLabel setTextColor:[UIColor whiteColor]];
        [blockLabel setTextAlignment:UITextAlignmentCenter];

        [bView addSubview:blockLabel];
        [blocks addObject:bView];
    };
    [[self class] logFotTimingWithString:@"multicoloredViewsWithSize end"];
    return blocks;
}

- (void)drawRect:(CGRect)rect
{
    //NSLog(@"\n\n\n\n\n\n\n\n\n");
    [[self class] logFotTimingWithString:@"drawRect begin"];

    //NSLog(@"drawRect called");

    //NSLog(@"self.subview.count: %i", [self.subviews count]);

    //[[self class] logFotTimingWithString:@"subviews remove begin"];
    for (UIView* subview in self.subviews)
    {
        //NSLog(@"subview removed");
        [subview removeFromSuperview];
    };
    //[[self class] logFotTimingWithString:@"subviews remove end"];

    //calculating top coordinates of blocks
    //NSLog(@"calculating block tops...");

    //[[self class] logFotTimingWithString:@"calculating block tops begin"];
    NSMutableArray *blockTops=[[NSMutableArray alloc] init];
    for (unsigned int blockCounter=0; blockCounter<blockQuantity; blockCounter++)
    {
        [blockTops addObject:[self getBlockTopWithBlockNumber:[NSNumber numberWithInt:blockCounter]]];
    };
    //[[self class] logFotTimingWithString:@"calculating block tops end"];

    /*
     for (unsigned int index=0; index!=[blockTops count]; index++)
     {
     NSLog(@"top %i at %i", index, [[blockTops objectAtIndex:index] intValue]);
     };
     */

    //calculating block heights
    //NSLog(@"calculating block heights...");

    //[[self class] logFotTimingWithString:@"calculating block heights begin"];
    NSMutableArray *blockHeights=[[NSMutableArray alloc] init];
    for (unsigned int index=0; index<[blockTops count]; index++)
    {
        if (([blockTops count]-1)!=index)
        {
            [blockHeights addObject:[NSNumber numberWithInt:([[blockTops objectAtIndex:(index+1)] intValue]-[[blockTops objectAtIndex:index] intValue])]];
        }
        else
        {
            if ((self.frame.size.height-[[blockTops objectAtIndex:index] intValue])<blockSize.height)
            {
                [blockHeights addObject:[NSNumber numberWithInt:(self.frame.size.height-[[blockTops objectAtIndex:index] intValue])]];
            }
            else
            {
                [blockHeights addObject:[NSNumber numberWithInt:blockSize.height]];
            };
        };
    };
    //[[self class] logFotTimingWithString:@"calculating block heights end"];

    for (unsigned int blockCounter=0; blockCounter<blockQuantity; blockCounter++)
    {
        //NSLog(@"\n\n");
        //[[self class] logFotTimingWithString:@"draw cycle begin"];

        //[self preLoadBlockAtY:[blockTops objectAtIndex:blockCounter] withHeight:[blockHeights objectAtIndex:blockCounter] andIndex:[NSNumber numberWithUnsignedInt:blockCounter]];

        //NSLog(@"    preLoadingSampleBlockAtY: %g withHeight: %g andIndex: %i", [y doubleValue], [height doubleValue], [index unsignedIntValue]);

        NSNumber *y=[blockTops objectAtIndex:blockCounter];
        NSNumber *height=[blockHeights objectAtIndex:blockCounter];
        //NSNumber *index=[NSNumber numberWithUnsignedInt:blockCounter];
        //NSLog(@"loading block %02u y:%g h:%g", [index unsignedIntValue], [y doubleValue], [height doubleValue]);
        if ([height intValue]>2)
        {

            BOOL up;
            if ([y doubleValue]>self.frame.size.height/2.0)
            {
                up=true;
            }
            else
            {
                up=false;
            };

            //[[self class] logFotTimingWithString:@"bview init begin"];

            UIView *bView=[NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:[blocks objectAtIndex:blockCounter]]];            
            [bView setFrame:CGRectMake(0.0, [y doubleValue], self.frame.size.width, blockSize.height)];
            //[bView.layer setMasksToBounds:YES];

            //[[self class] logFotTimingWithString:@"bview init end"];

            //NSLog(@"    blockImage frame y: %g", blockImage.frame.origin.y);
            //NSLog(@"    blockImage frame height:   %g", blockImage.frame.size.height);

            double oldHeight=bView.frame.size.height;

            //NSLog(@"    preanchor: %@", NSStringFromCGRect(bView.frame));

            //[[self class] logFotTimingWithString:@"bview anchor begin"];

            //setting anchor point
            if (up)
            {
                [bView.layer setAnchorPoint:CGPointMake(0.5, 1.0)];
                [bView setFrame:CGRectMake(bView.frame.origin.x, bView.frame.origin.y+bView.frame.size.height/2.0, bView.frame.size.width, bView.frame.size.height)];
            }
            else
            {
                [bView.layer setAnchorPoint:CGPointMake(0.5, 0.0)];
                [bView setFrame:CGRectMake(bView.frame.origin.x, bView.frame.origin.y-bView.frame.size.height/2.0, bView.frame.size.width, bView.frame.size.height)];
            };

            //[[self class] logFotTimingWithString:@"bview anchor end"];

            //NSLog(@"    postanchor: %@", NSStringFromCGRect(bView.frame));

            //[[self class] logFotTimingWithString:@"bview transform begin"];

            if ([height doubleValue]!=blockSize.height)
            {

                //preparing transform
                CATransform3D basicTrans = CATransform3DIdentity;
                basicTrans.m34 =1.0/-projection;

                //calculating angle
                double angle= [[self angleValueForBlockHeight:height] doubleValue];
                double rangle;
                if (up)
                {
                    rangle=angle/360*(2.0*M_PI);
                }
                else
                {
                    rangle=(360.0-angle)/360*(2.0*M_PI);
                };

                //NSLog(@"    angle: %g", angle);

                //transforming
                bView.layer.transform = CATransform3DRotate(basicTrans, rangle, 1.0f, 0.0f, 0.0f);

                //NSLog(@"    blockImage frame y: %g", blockImage.frame.origin.y);
                //NSLog(@"    blockImage frame height:   %g", blockImage.frame.size.height);
            };

            //[[self class] logFotTimingWithString:@"bview transform end"];

            //[[self class] logFotTimingWithString:@"bview post transform begin"];

            double newHeight=bView.frame.size.height;

            if (up)
            {
                [bView setCenter:CGPointMake(bView.center.x, bView.center.y-(oldHeight-newHeight))];
            };

            //NSLog(@"    blockImage frame y: %g", bView.frame.origin.y);
            //NSLog(@"    blockImage frame height:   %g", bView.frame.size.height);

            //adding subview
            [self addSubview:bView];

            //[[self class] logFotTimingWithString:@"bview post transform end"];
        }
        else
        {
            //do not need to draw blocks with very low height
        };
        //[[self class] logFotTimingWithString:@"draw cycle end"];
        //NSLog(@"\n\n");
    };
    [[self class] logFotTimingWithString:@"drawRect end"];
    //NSLog(@"\n\n\n\n\n\n\n\n\n\n");
}

-(NSNumber *)angleValueForBlockHeight:(NSNumber *)h
{
    //[[self class] logFotTimingWithString:@"    angleValueForBlockHeight begin"];

    //NSLog(@"angleValueForBlockHeight: %g  called", [h doubleValue]);

    //searching for closest key
    double minDistance=blockSize.height;
    double distance;
    NSString *minKey=@"";
    for(NSString *key in anglesForHeights)
    {
        if ([[anglesForHeights objectForKey:key] doubleValue]==[h doubleValue])
        {
            //match found
            //NSLog(@"returned: %g", [key doubleValue]);
            return [NSNumber numberWithDouble:[key doubleValue]];
        };
        distance=fabs([[anglesForHeights objectForKey:key] doubleValue]-[h doubleValue]);
        if (distance<minDistance)
        {
            minDistance=distance;
            minKey=key;
        };
    };
    //NSLog(@"returned: %g", [blockSizesForAngles objectForKey:minKey]);

    //[[self class] logFotTimingWithString:@"    angleValueForBlockHeight end"];
    return [NSNumber numberWithDouble:[minKey doubleValue]];
}

+(NSDictionary *)calculateAllHeightsForAnglesWithBlockHeight:(CGFloat)blockHeight andProjection:(CGFloat)proj
{
    //NSLog(@"calculateAllHeightsForAnglesWithBlockHeight:%g andProjection:%g called", blockHeight, proj);

    //[[self class] logFotTimingWithString:@"    calculateAllHeightsForAnglesWithBlockHeight:andProjection begin"];

    NSMutableDictionary *res=[[NSMutableDictionary alloc] init];
    for (double i=0.0; i<=90.0; i=i+1.0)
    {
        //NSLog(@"i: %g", i);
        UIView *block=[[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 100.0, blockHeight)];        
        [block.layer setAnchorPoint:CGPointMake(0.5, 1.0)];

        CATransform3D basicTrans = CATransform3DIdentity;   
        double rangle;
        basicTrans.m34 =1.0/-proj;
        rangle=i/360*(2.0*M_PI);

        //NSLog(@"rangle: %g Pi", rangle/M_PI);

        block.layer.transform = CATransform3DRotate(basicTrans, rangle, 1.0f, 0.0f, 0.0f);
        //NSLog(@"calculated block height: %g for angle: %g", block.frame.size.height, i);
        if ([res objectForKey:[NSString stringWithFormat:@"%i", (int)roundf(i)]]==nil)
        {
            [res setObject:[NSString stringWithFormat:@"%i", (int)floor(block.frame.size.height)] forKey:[NSNumber numberWithDouble:i]];
        };
    };
    //NSLog(@"        result (size: %i): %@", [res count], [res debugDescription]);

    //[[self class] logFotTimingWithString:@"    calculateAllHeightsForAnglesWithBlockHeight:andProjection end"];
    return [NSDictionary dictionaryWithDictionary:res];
}

-(NSNumber *)getBlockTopWithBlockNumber:(NSNumber *)bn
{
    //NSLog(@"getBlockTopWithBlockNumber: %i", [bn intValue]);
    //[[self class] logFotTimingWithString:@"    getBlockTopWithBlockNumber begin"];

    int t=[bn intValue];
    CGFloat h=self.blockSize.height;
    float v = self.blockQuantity * h - self.zoneForFlexion;
    float vp = v * self.scrollPosition;

    float z = t * h;
    float alpha = (self.frame.size.height-self.zoneForFlexion) / (self.scrollPosition*self.scrollPosition + (1-self.scrollPosition) * (1-self.scrollPosition));

    float f;
    if (z < vp)
    {
        f = z / v;
        //NSLog(@"        %i", (int)(alpha * (f * f)));
        //[[self class] logFotTimingWithString:@"    getBlockTopWithBlockNumber end"];
        return [NSNumber numberWithInt:(int)(alpha * (f * f))];
    };
    if (z <= vp + self.zoneForFlexion)
    {
        //NSLog(@"        %i", (int)(z + alpha * (self.scrollPosition * self.scrollPosition) - vp));
        //[[self class] logFotTimingWithString:@"    getBlockTopWithBlockNumber end"];
        return [NSNumber numberWithInt:(int)(z + alpha * (self.scrollPosition * self.scrollPosition) - vp)];
    }
    else
    {
        f = (blockQuantity*h-z) / v;
        //NSLog(@"        %i", (int)(self.frame.size.height - alpha * (f * f)));
        //[[self class] logFotTimingWithString:@"    getBlockTopWithBlockNumber end"];
        return [NSNumber numberWithInt:(int)(self.frame.size.height - alpha * (f * f))];
    };
}

double oldTranslatedY=0.0;

-(IBAction)handlePanGesture:(UIPanGestureRecognizer *)sender
{
    //NSLog(@"handlePanGesture: called");
    //[[self class] logFotTimingWithString:@"    handlePanGesture begin"];

    double translatedY = [sender translationInView:self].y;
    double delta;

    if (fabs(translatedY)<fabs(oldTranslatedY))
    {
        [sender setTranslation:CGPointZero inView:self];
        oldTranslatedY=0.0;
        delta=0.0;
    }
    else
    {
        delta=translatedY-oldTranslatedY;
        oldTranslatedY=translatedY;
    };

    //NSLog(@"translatedY: %g", translatedY);
    double pOffset=delta/((blockQuantity*blockSize.height)-self.frame.size.height);

    self.scrollPosition=self.scrollPosition-pOffset;

    if (self.scrollPosition<0.0)
    {
        self.scrollPosition=0.0;
    }
    else if(self.scrollPosition>1.0)
    {
        self.scrollPosition=1.0;
    };

    [[self class] logFotTimingWithString:@"    handlePanGesture end"];

    [self setNeedsDisplay];
} 
```

在模拟器上一切正常。但是在真机上速度太慢了。

我在两件事上需要帮助：

1.  在绘制块的那一刻：如果我知道块应该具有什么高度值，我如何计算用于旋转块以适应高度的角度？它还取决于投影值。现在它正在使用一个丑陋的解决方案，在视图初始化并保存到字典后预先计算所有角度（从 0 到 90）的高度，当我们需要知道块旋转以适应高度的特定角度时，我们只需搜索此硬编码字典中最接近的高度值并使用适当的角度。太丑了 我试图通过在绘图期间计算所需的值来避免这种情况，但我没有运气（需要公式）。

2.  其他部分的优化。

请帮助我，我一直在解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:27:23.973

将计算放在另一个线程上。避免在后台线程中使用 GUI！:)

```
[self performSelectorInBackground:<#(SEL)#> withObject:<#(id)#>]; 
```

# sql-server - SQL Server - 如何在删除表后触发 DROP_TABLE TRIGGER 时从删除的表中复制数据？

> ID：13839892
> 
> 赞同：2
> 
> 时间：2012-12-12T12:33:04.057
> 
> 标签：sql-server

我不希望防止表删除，但是当某些表被删除到数据库中时，我想备份整个表或查询行并在删除之前将特定行选择到另一个表中。

使用表上的正常触发器，如果​​删除了一行，您可以访问“已删除”表并访问那些已删除的行。

删除表后触发 DROP_TABLE 触发器。

DROP_TABLE 触发器是否有与 Deleted 表等效的表？我可以使用其他方法吗？或者我是否必须在创建和删除这些表的 Windows 服务中重新编码业务逻辑？

（我*真的*不想编写一个触发器来回滚删除，访问和复制数据，然后在不递归触发触发器的情况下重新删除表。我喜欢创造性，但这对于解决方案来说太糟糕了我）

我在 Microsoft SQL Server Enterprise Edition（64 位）和 Microsoft SQL Server Developer Edition（64 位）上运行它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:24:09.850

感谢您的帮助，但要直接回答我自己的问题：

1.  对于 DDL 触发器（为 DROP TABLE 触发），没有等效于 DELETE/UPDATE 触发器中的 Deleted 表

2.  如果不回滚 drop、复制数据并重新发出 drop，则没有等效的解决方案

3.  唯一合适且正确的方法是在创建和删除这些表的 Windows 服务中重新编码业务逻辑 - 以便在需要时允许软删除/移动/重命名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:57:21.133

如果是触发器的递归触发让您感到困扰，则可以进行检查。这只会对初始的 DROP TABLE 运行。

```
alter Trigger ddlt_ProcessDropTable
on all server for drop_table
AS
begin
    if( trigger_nestlevel() = 1 ) -- only run if top level drop table
    begin
        declare @data XML
        set @data = EVENTDATA()
        -- rollback the drop
        rollback;

        -- get table name
        declare @TableName sysname, @SchemaName sysname, @DataBaseName sysname, @Sql nvarchar(1000);
        select 
            @TableName = @data.value('(/EVENT_INSTANCE/ObjectName)[1]', 'nvarchar(2000)'),
            @SchemaName = @data.value('(/EVENT_INSTANCE/SchemaName)[1]', 'nvarchar(2000)'),
            @DataBaseName = @data.value('(/EVENT_INSTANCE/DatabaseName)[1]', 'nvarchar(2000)')

        /****
        Do stuff with the dropped table...
        ****/

        -- re-drop the table
        set @sql = 'Drop Table ' + 
            QuoteName(@DataBaseName) + '.' + QuoteName(@SchemaName) + '.' + QuoteName(@TableName)
        exec(@sql)
    end

end
GO 
```

# jsf-2 - PrimeFaces 对话框在 Chrome 浏览器中不起作用

> ID：13839894
> 
> 赞同：0
> 
> 时间：2012-12-12T12:33:06.580
> 
> 标签：jsf-2, primefaces

如您所见，我试图在单击命令链接时显示一个对话框，该对话框在 IE 和 Firefox 中显示，但在 Google Chrome v23 中不显示，请建议。

```
<h:form id="myForm">
    <p:tabView id="tabView">
        <p:tab id="tab1" title="Tab 1">
            <h:panelGrid columns="1" cellpadding="10">
                <h:dataTable value="#{testBean.dataList}" var="data">
                    <h:column>
                        <h:outputText value="#{data}" />
                    </h:column>
                    <h:column>
                        <p:commandLink action="#{testBean.loadCommentHistory(data)}"
                                       update=":myForm:tabView:dialog" oncomplete="dlg.show()">
                            <h:graphicImage url="resources/theme1/images/comments.gif"
                                            styleClass="basicImageStyle" />
                        </p:commandLink>
                    </h:column>
                </h:dataTable>
                <p:dialog id="dialog" header="Dynamic Dialog" widgetVar="dlg">
                    <h:outputText value="#{testBean.commentHistory}" />
                </p:dialog>
            </h:panelGrid>
        </p:tab>
    </p:tabView>
</h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:52:42.057

当您更新对话框时，对话框将重置为隐藏的默认状态。如果您调用`dialog.show()`并更新对话框，对话框将再次隐藏。Chrome（可能比 IE 或 FireFox 更快）似乎以不同的方式处理这个问题。一种解决方案是将对话框的内容包装在容器中并更新容器。

```
<p:commandLink action="#{testBean.loadCommentHistory(data)}"
    update=":myForm:tabView:dialog-content" oncomplete="dlg.show()">
    <h:graphicImage url="resources/theme1/images/comments.gif"
        styleClass="basicImageStyle" />
</p:commandLink>

<p:dialog id="dialog" header="Dynamic Dialog" widgetVar="dlg">
    <p:outputPanel id="dialog-content">
        <h:outputText value="#{testBean.commentHistory}" />
    </p:outputPanel>
</p:dialog> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:02:21.827

如果您还没有，请尝试将页面封装在 af:view 标记中。Chrome 和 Safari 不存在时会出现一些问题。见[http://primefaces.org/faq.html](http://primefaces.org/faq.html)问题 3

```
<html xmnls=... >
    <f:view contentType="text/html">
        <h:head>
            ....
        </h:head>
        <h:body>
            ....
        </h:body>
    </f:view>
</html> 
```

# batch-file - 用于比较 2 个文件夹的批处理文件

> ID：13839897
> 
> 赞同：0
> 
> 时间：2012-12-12T12:33:18.437
> 
> 标签：batch-file

我如何能够创建一个批处理文件来比较具有相同文件集但修改日期不同的 2 个文件夹？我在互联网上检查了一些代码，但它只会检查文件是否存在于另一个文件夹中。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:26:43.040

```
for %%a in ("folder1" "folder2") do (
forfiles /p %%a /c "cmd /c @echo @file @fdate"
) >>dates.txt 
```

这会将两个文件夹中的文件及其旁边的修改日期输出到名为 dates.txt 的文件中，以便您进行比较。

如果您需要以其他方式比较它们，请指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:24:06.607

```
@echo off
Set folder1=c:\first folder
Set folder2=c:\second folder
Cd /D "%folder1%"
For %%a in (*.*) do (
   For %%b in ("%folder2%\%%a") do (
      If "%%~Ta" neq "%%~Tb" echo Different date/time in file %%a
   )
) 
```

您可以只比较分割`%%~T...`变量结果的日期，然后比较变量。

您还可以检查第二个文件夹中是否不存在该文件，或比较它们的大小等...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T18:37:55.370

我会从 MS Resource Kit 中尝试 Robocopy：

```
ROBOCOPY %SOURCE_DIR% %TARGET_DIR% * /MIR /XO /L 
```

“/L”指定测试模式，因此它实际上不会复制文件。它只显示不同的文件。

# python - 在特定操作之后将信息从一个文件添加到另一个文件

> ID：13839905
> 
> 赞同：0
> 
> 时间：2012-12-12T12:34:12.057
> 
> 标签：python

我有两个文件

文件1：

```
IdName1 Info1 Info2 Info3   #Info: from program1 for name1  #Info: from program2 for name1
IdName2 Info1 Info2 Info3   #Info: from program1 for name2  #Info: from program2 for name2
IdName4 Info1 Info2 Info3   #Info: from program1 for name4  
IdName3 Info1 Info2 Info3   #Info: from program1 for name3  #Info: from program2 for name3 
```

文件2：

```
# ProgramInfo
# Query: IdName1 Info1 Info2 Info3
# DatabaseInfo
# FiledInfo
line1
line2
# ProgramInfo
# Query: IdName2 Info1 Info2 Info3
# DatabaseInfo
# FiledInfo
# ProgramInfo
# Query: IdName4 Info1 Info2 Info3
# DatabaseInfo
# FiledInfo
line1
line2
line3
line4 
```

现在我需要检查“#Query：”之后的“IdName1 Info1 Info2 Info3”是否在 File2 中，如果是，我需要从 File1 中的该行拆分信息并将其插入 File2 中相应的“# ProgramInfo”行之前. 输出文件应如下所示：

输出文件：

```
# IdName1 Info1 Info2 Info3
# Info: from program1 for name1 
# Info: from program2 for name1
# ProgramInfo
# Query: IdName1 Info1 Info2 Info3
# DatabaseInfo
# FiledInfo
line1
line2
# IdName2 Info1 Info2 Info3 
# Info: from program1 for name2 
# Info: from program2 for name2
# ProgramInfo
# Query: IdName2 Info1 Info2 Info3
# DatabaseInfo
# FiledInfo
# IdName4 Info1 Info2 Info3 
# Info: from program1 for name4 
# ProgramInfo
# Query: IdName4 Info1 Info2 Info3
# DatabaseInfo
# FiledInfo
line1
line2
line3
line4 
```

我现在的问题是，如何将相应的三行添加到 File2 中，我一直在尝试这样的事情：

```
import sys
def programs_info_comb(fileName1, fileName2):
    my_file1 = open(fileName1, "r")
    my_line1=my_file1.readlines()
    my_file2 = open(fileName2, "r")
    my_line2=my_file2.readlines() 
    for line1 in my_line1: 
        (name1, info1, info2)= line1.strip().split("\t")
        for line2 in my_line2:
            if line2.startswith("# Q"):
                name2 = line2[9:-1]
                if name1 == name2:
                    #### here Im lost how to tell where I want those next two lines to be printed
                    print "#"+" "+name1
                    print info1
                    print info2
    my_file1.close
    my_file2.close
if __name__== "__main__":
    programs_info_comb(sys.argv[1], sys.argv[2]) 
```

可能有更好更简单的方法，所有帮助将不胜感激谢谢您的时间 Daeja

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:56:22.077

可能有更好的方法可以做到这一点，但这是一种有效的方法：

```
def programs_info_comb(f1, f2):
    tmp = open(f1, "r")
    file1 = tmp.readlines()
    tmp.close()

    tmp = open(f2, "r")
    file2 = tmp.readlines()
    tmp.close()

    for line in file1:
        content = line.split("#")[0].strip()
        for i, line in enumerate(file2.copy()):
            if line == "# Query: %s\n" %content:
                file2.insert(i-1, "# %s\n" %content)
                break

    tmp = open("output.txt", "w")
    tmp.writelines(file2)
    tmp.close() 
```

您还应该查看评论部分中提到的数据库。

`for`在某些情况下也可以避免使用两个嵌套循环。但是，这是一种完全有效的方式，并且可以满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:11:26.150

```
import sys
def programs_info_comb(fileName1, fileName2):
    my_file1 = open(fileName1, "r")
    my_line1=my_file1.readlines()
    my_file1.close()

    my_file2 = open(fileName2, "r")
    my_line2=my_file2.readlines() 
    my_file2.close()

    # load file1 into a dict for lookup later
    infoFor = dict()
    for line1 in my_line1: 
        parts = line1.strip().split("\t")
        infoFor[parts[0]] = parts[1:] 

    # iterate over line numbers to be able to refer previous line numbers
    for line2 in range(len(my_line2)):
        if my_line2[line2].startswith("# Q"):
            name2 = my_line2[line2][9:-1]
            # lookup
            if infoFor.has_key(name2):
                print '# ' + name2
        for info in infoFor[name2]:
                    print info
            # print programinfo and query lines
                print my_line2[line2-1],
                print my_line2[line2],
    # skip program info always
        elif my_line2[line2].startswith("# ProgramInfo"):
            pass
    # otherwise just print as is
        else:
            print my_line2[line2],

if __name__== "__main__":
    programs_info_comb(sys.argv[1], sys.argv[2]) 
```

我已将 file1 加载到字典中以供稍后查找，并将输出发送到标准输出。在发送输出之前，我已经检查了我所在的线路类型并相应地输出。

这是o / p： -

```
C:\>python st.py f1.txt f2.txt
# IdName1 Info1 Info2 Info3
#Info: from program1 for name1
#Info: from program2 for name1
# ProgramInfo
# Query: IdName1 Info1 Info2 Info3
# DatabaseInfo
# FiledInfo
line1
line2
# IdName2 Info1 Info2 Info3
#Info: from program1 for name2
#Info: from program2 for name2
# ProgramInfo
# Query: IdName2 Info1 Info2 Info3
# DatabaseInfo
# FiledInfo
# IdName4 Info1 Info2 Info3
#Info: from program1 for name4
# ProgramInfo
# Query: IdName4 Info1 Info2 Info3
# DatabaseInfo
# FiledInfo
line1
line2
line3
line4 
```

# javascript - Mozilla 和 IE 中的 Javascript 计时器倒计时 - 适用于 Chrome

> ID：13839909
> 
> 赞同：1
> 
> 时间：2012-12-12T12:34:28.280
> 
> 标签：javascript, firefox, countdown

下面的 Javascript 用于为我的 php 游戏格式化一系列计时器。当用户提交一个选项时，它会重置计时器，说“准备好”，根据用户提交时记录的时间与当前时间倒计时 1 分钟。当计时器达到“0”时，它会重置为默认的“就绪”。它与 CHrome 完美配合，但 Firefox 和 IE 仅显示就绪，但不会更新计时器并开始倒计时。任何帮助都深表感谢。

```
var d = new Date();

var tarray = new Array();

function loadTimers()
{
    var timersrow = g('timersrow');
    var html = '';
    var list = tinfo.split('|');
    var i;
    var cell
    for ( i=0; i<list.length; i++ ) {
        data = list[i].split(',');

        cell = ce('td');
        cell.innerHTML = data[0];
        timersrow.appendChild(cell);

        //html += '<td id="tcell' + data[0] + '">' + data[0] + '</td>';
        tarray[tarray.length] = new objTimer(data[0], data[1], cell);
    }
    //timersrow.innerHTML = html;

    updateTimers();
}

function updateTimers() {
    var i;
    for ( i=0; i<tarray.length; i++ ) {
        tarray[i].update(); 
    }
    setTimeout('updateTimers();', 250);
}

function objTimer(label, time, cell)
{
    this.label = label;
    this.time = Date.parse(time);
    this.cell = cell;

    function update() 
    {
        var t = new Date();
        var val = this.time - t.getTime();
        if ( val > 0 ) {
            this.cell.innerHTML = 'Next ' + this.label + ': ' +  formatSeconds(val);
        } else {
            this.cell.innerHTML = 'Next ' + this.label + ': Ready';
        }
    }
    this.update = update;
}

function formatSeconds(seconds) 
{   
    var h = 0, m = 0,
    seconds = parseInt(seconds / 1000);
    if (seconds > 60 * 60 ) {
        h = parseInt(seconds / (60 * 60));
        seconds -= h * 60 * 60;
    }
    if ( h < 10 ) {
        h = '0' + h;    
    }
    if ( seconds > 60 ) {
        m = parseInt(seconds / 60);
        seconds -= m * 60;
    }
    if ( m < 10 ) {
        m = '0' + m;    
    }
    if ( seconds < 10 ) {
        seconds = '0' + seconds;    
    }
    return h + ':' + m + ':' + seconds;
}

loadTimers(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:04:20.850

感谢你的帮助。我已经解决了这个问题，因为我相信在定义之前调用函数是关键问题之一，并且将舍入系统更改为 math.floor 而不是 parseInt。

我也很傻 - Var 细胞没有';' 这可能是最大的原因。

# c# - 如何映射多对多关系？

> ID：13839914
> 
> 赞同：2
> 
> 时间：2012-12-12T12:34:42.733
> 
> 标签：c#, model-view-controller, many-to-many, automapper

如何映射多对多关系？

一对一的关系很容易......

假设...

```
public class ProductDTO
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int SupplierId { get; set; }
}

public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public double Cost { get; set; }
    public Supplier Supplier { get; set; }
}

public class Supplier
  {
    public int Id { get; set; }
    public string Name { get; set; }
    public int Rating { get; set; }
    public ICollection<Product> Products { get; set; }
}

 Mapper.CreateMap<Product, ProductDTO>()
            .ForMember(d => d.SupplierId, m => m.MapFrom(s => s.Supplier.Id)); 
```

假设每个产品只有一个供应商并且一个供应商可以有很多产品。如果一个产品也可以有很多供应商，我该如何映射它？

我将产品中的供应商行更改为

```
 public ICollection<Supplier> Supplier { get; set; } 
```

并在 ProductDTO 中做同样的事情

```
 public ICollection<int> SupplierId { get; set; } 
```

由于 Id 现在是集合，如何更改 CreateMap？自动完成不再显示 Id，我得到的只是函数。

我是 C# 的新手，所以我很多人都遗漏了一些明显的东西。我是否应该在 for 循环中迭代并一一映射 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:09:15.933

您可以尝试使用：

```
Mapper.CreateMap<Product, ProductDTO>()         
      .ForMember(d => d.SupplierIds, m => m.MapFrom(p => p.Suppliers.Select(s => s.Id))); 
```

另外一个选项：

```
Mapper.CreateMap<Supplier, int>().ConvertUsing(s => s.Id);
Mapper.CreateMap<Product, ProductDTO>()                                
   .ForMember(d => d.SupplierIds, m => m.MapFrom(p => p.Suppliers)); 
```

如果您使用 DTO 从 Web/WCF 服务传递数据，您可以考虑使用另一件事

```
public ICollection<SupplierDTO> Supplier { get; set; } 
```

相反，如果仅传递供应商 ID。在大多数情况下，在一次调用中向服务传递更多数据比进行几次调用更好（也更有效）。

# javascript - 用于构建仪表板（条形、线形、饼形等）的开源库/框架

> ID：13839920
> 
> 赞同：13
> 
> 时间：2012-12-12T12:35:01.853
> 
> 标签：javascript, jquery-ui, dashboard

我已经用 highcharts 完成了 POC，效果很好，看起来很棒。

我正在寻找更好的开源库/框架，使用它我可以开发显示不同图表的仪表板。

UI 框架必须处理实时数据（如 Ajax 调用或 REST）。

任何有用的建议表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T12:39:23.983

如果您有一点时间学习它，[D3（数据驱动文档）非常好。](http://d3js.org/)

一些例子：

[http://bl.ocks.org/3287802](http://bl.ocks.org/3287802)

[http://jondot.github.com/graphene/](http://jondot.github.com/graphene/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-25T08:36:59.710

在您选择了您的图形解决方案（绘图、图表等）后，一些拖放网格将它们放在一个仪表板上：

*   [gridster.js](http://gridster.net)（MIT 许可）可能会派上用场
*   [Packery](http://packery.metafizzy.co)非营利 GPL v3 许可或一次性购买商业许可

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-29T09:35:41.203

这是另一个看起来很棒的（相当win8主题）：[dashing](http://shopify.github.com/dashing/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-19T22:56:46.387

[http://www.flotcharts.org/](http://www.flotcharts.org/)提供了一个流行的开源 javascript 图表库。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-12T12:47:47.020

有很多图表插件。[http://www.queness.com/post/10781/13-chart-and-graph-plotting-javascript-plugins](http://www.queness.com/post/10781/13-chart-and-graph-plotting-javascript-plugins)

我的建议：

[JQPlot](http://www.jqplot.com/)：jQuery 插件。使用画布元素或 VML
[gRaphael](http://g.raphaeljs.com/)：使用 raphaeljs JS 库。SVG W3C Recommendation 和 VML 作为创建图形的基础。- 很多选择。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-12T12:37:32.917

如果您只需要图表 api，请尝试[https://developers.google.com/chart/](https://developers.google.com/chart/)

它还支持实时更新

# iphone - UIWebView 流媒体 youtube 无法在 iPad 上全屏显示

> ID：13839921
> 
> 赞同：6
> 
> 时间：2012-12-12T12:35:02.713
> 
> 标签：iphone, ipad, uiwebview, youtube, fullscreen

我有一个按钮可以取消隐藏 UIWebView，然后流式传输 youtube 视频。在 iphone 上它工作正常，按下播放按钮直接进入全屏，然后当它完成点击完成按钮时隐藏 UIWebView 并将控制权返回给应用程序。

但是，当我在 iPad 上尝试相同的操作时，按播放不会自动进入全屏（您可以点击全屏控制，但我不希望用户拥有该选项） - 请问有没有办法做到这一点？

我的代码是：

```
- (IBAction)topButton:(id)sender {
    [[NSNotificationCenter defaultCenter] addObserver:self     selector:@selector(youTubeFinished:)     name:@"UIMoviePlayerControllerWillExitFullscreenNotification" object:nil];
    videoWebView.hidden=NO;
    NSString *embedcode = [self.detailItem objectForKey:@"youtubeEmbedCodeBeginner"];
    [[self videoWebView]loadHTMLString:embedcode baseURL:nil];
} 
```

和：

```
-(void)youTubeFinished:(NSNotification *)notification{
    // your code here
    videoWebView.hidden=YES;
} 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:58:20.093

尝试这个

选择器：@selector(someSelector) 名称：@"UIMoviePlayerControllerDidEnterFullcreenNotification" 对象：nil]

// 对于 iOS 4.3 及更高版本： UIMoviePlayerControllerDidEnterFullscreenNotification UIMoviePlayerControllerDidExitFullscreenNotification

// 对于 iOS 4.2 及以下版本： UIMoviePlayerControllerDidEnterFullcreenNotification UIMoviePlayerControllerDidExitFullcreenNotification

谢谢

# android - 从 SupportMapFragment (android map v2) 获取视图缓存

> ID：13839931
> 
> 赞同：0
> 
> 时间：2012-12-12T12:35:28.350
> 
> 标签：android

我在 SupportMapFragment 中有一个地图，我想从地图视图中获取屏幕截图（仅地图的可见部分）

我不知道我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:09:35.060

我今天遇到了同样的问题。不幸的是，目前似乎没有明确的解决方案，因为 v2 地图 API 使用的是 OpenGL ES。看看[Google Groups](https://groups.google.com/forum/#!msg/android-platform/xHIActZZ9PA/Ur4E0BuEKvEJ)的这篇文章和[Stack Overflow的这篇文章](https://stackoverflow.com/questions/13773658/capture-screen-shot-of-googlemap-android-api-v2)

我要做的是使用 Google 的静态地图 API V2。这是[Googles Static Maps API](https://developers.google.com/maps/documentation/staticmaps/)的链接。这项服务将满足我的要求，并希望它也对您有用。祝你好运！

# c# - 按钮在第一次点击时不提交，但在后续点击时提交之前的信息

> ID：13839934
> 
> 赞同：1
> 
> 时间：2012-12-12T12:35:43.913
> 
> 标签：c#, asp.net, html, double-click

我正在制作一个可编辑的`GridView`，但我的问题是，每当我点击一个按钮时，什么都没有发生。当我第二次单击时，我看到了上一次单击期间发生的情况。

### aspx

```
 <%@ Page Title="Home Page" Language="C#"
 MasterPageFile="~/Site.master" AutoEventWireup="true"
 EnableEventValidation="true"
     CodeBehind="Default.aspx.cs" Inherits="BeheerSysteemWeb._Default" %>

 <asp:Content ID="HeaderContent" runat="server"
 ContentPlaceHolderID="HeadContent"> </asp:Content> <asp:Content
 ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
     <h2>
         <asp:GridView ID="GridView1" runat="server"
         onrowcancelingedit="GridView1_RowCancelingEdit" 
             onrowediting="GridView1_RowEditing" 
             onrowupdating="GridView1_RowUpdating" AutoGenerateColumns="False">
             <Columns>               
                 <asp:CommandField ButtonType="Button" ShowEditButton="true" ShowCancelButton="true" />              
                 <asp:TemplateField HeaderText="36">
           <EditItemTemplate>
             <asp:TextBox runat="server" ID="txtSpoor" Text="TramNummer" />
           </EditItemTemplate>
       </asp:TemplateField>
             </Columns>        
         </asp:GridView>
     </h2>
     </asp:Content> 
```

### 代码隐藏

```
 namespace BeheerSysteemWeb 
 {
     public partial class _Default : System.Web.UI.Page
     {
         List<string> leeg = new List<string>();
         protected void Page_Load(object sender, EventArgs e)
         {
             if (!Page.IsPostBack)
             {
                 LoadData();
             }
         }

         private void LoadData()
         {
             leeg.Add("");
             leeg.Add("");
             leeg.Add("");
             leeg.Add("");
             GridView1.DataSource = leeg;
             GridView1.DataBind();
         }

         protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
         {
             GridView1.EditIndex = e.NewEditIndex;
         }

         protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
         {
             e.Cancel = true;
             GridView1.EditIndex = -1;
         }

         protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
         {
             GridViewRow row = GridView1.Rows[e.RowIndex];

             TextBox txtSpoor = (TextBox)row.FindControl("txtSpoor");

             e.Cancel = true;
             GridView1.EditIndex = -1;
         }
     } 
} 
```

如何让按钮在 ASP.NET 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:56:45.237

我不确定这是否是这里的问题，但您需要在每次页面调用时添加数据，并在操作后进行 DataBind：

```
 public partial class _Default : System.Web.UI.Page
     {
         List<string> leeg = new List<string>();
         protected void Page_Load(object sender, EventArgs e)
         {
             LoadData();

             if (!Page.IsPostBack)
             {
                 GridView1.DataBind();
             }
         }

         private void LoadData()
         {
             leeg.Add("");
             leeg.Add("");
             leeg.Add("");
             leeg.Add("");
             GridView1.DataSource = leeg;             
         }

         protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
         {
             GridView1.EditIndex = e.NewEditIndex;
             GridView1.DataBind();
         }

         protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
         {
             e.Cancel = true;
             GridView1.EditIndex = -1;
             GridView1.DataBind();
         }

         protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
         {
             GridViewRow row = GridView1.Rows[e.RowIndex];

             TextBox txtSpoor = (TextBox)row.FindControl("txtSpoor");

             e.Cancel = true;
             GridView1.EditIndex = -1;
             GridView1.DataBind();
         }
     } 
```

试试看你是否解决了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:54:21.497

您将不得不在 GridView1_RowEditing 和 GridView1_RowCancelingEdit 上重新绑定数据调用 LoadData()

可以参考[http://dotnetdiscussion.wordpress.com/2007/09/26/aspnet-gridview-updateeditcancel-hyperlinkfields-and-datakey-retrieval/](http://dotnetdiscussion.wordpress.com/2007/09/26/aspnet-gridview-updateeditcancel-hyperlinkfields-and-datakey-retrieval/)

快乐编码！！！

# fork - forking() 和 CreateProcess()

> ID：13839935
> 
> 赞同：7
> 
> 时间：2012-12-12T12:35:52.573
> 
> 标签：fork, createprocess

对于 Linux 和 WinXP，forking() 和 CreateProcess（带有所有必需的参数）是一样的吗？

如果它们不同，那么有人可以解释两种情况下发生的差异吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T12:47:20.420

他们在不同的系统上做不同的事情。`CreateProcess`是仅适用于 Windows 的功能，而`fork`仅适用于 POSIX（例如 Linux 和 Mac OSX）系统。

系统调用创建一个新进程，并从调用函数`fork`的位置开始在父进程和子进程中继续执行。创建一个新进程并从磁盘加载程序。唯一的相似之处是最终结果是创建了一个新流程。`fork``CreateProcess`

[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)有关更多信息，请阅读和上的相应手册页[`fork`](http://pubs.opengroup.org/onlinepubs/009695399/functions/fork.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-12-12T01:21:38.847

CreateProcess 采取以下步骤：

*   在内核中创建和初始化进程控制块 (PCB)。
*   创建并初始化一个新的地址空间。
*   将程序 prog 加载到地址空间中。
*   将参数 args 复制到地址空间的内存中。
*   初始化硬件上下文以在“开始”处开始执行。
*   通知调度程序新进程已准备好运行。

Unix 的 fork 采取以下步骤：

*   在内核中创建和初始化进程控制块（PCB）
*   创建一个新的地址空间
*   用父地址空间的全部内容的副本初始化地址空间
*   继承父级的执行上下文（例如，任何打开的文件）
*   通知调度程序新进程已准备好运行

它创建了父进程的完整副本，并且父进程不会为子进程设置运行时环境，因为父进程信任自己的设置。子进程是父进程的完整副本，除了它的进程 ID（fork 返回的内容）。分叉的进程继续运行与其父进程相同的程序，直到它执行显式执行。当子调用 exec 其中时，新的可执行映像进入内存并运行。

制作完整副本的效率如何？写时复制。它实际上只复制虚拟内存映射。段表中的所有段都是只读的。如果父级或子级编辑段中的数据，则会引发异常，并且内核会创建该段的完整内存副本。这个[答案很好地解释了这一点](https://unix.stackexchange.com/a/136649/325380)

在父子之间共享资源有几个好处： - 直观地说，资源管理：需要更少的内存来维护进程的状态 - 共享缓存资源意味着当数据没有被覆盖时，数据的时间局部性更高，从而提高了性能因为从较大的缓存/磁盘中检索数据非常耗时。

共享资源的缺点： - 当写入很常见时，它会将数据置于其他进程的无效状态，如果子进程在单独的核心上运行，这会导致一致性缺失，这是代价高昂的，因为更改将不得不传播到 L3 缓存。

但总的来说，程序读取的内容比写入的要多得多，通常子/父只需要对其堆栈进行写入，而这只是它们程序块的一小部分。

此外，Unix fork 不同，因为它返回两次，一次在父进程中（其子进程的进程 ID），一次在子进程中（0，恭喜你是一个新的婴儿进程），这就是我们在代码中区分的方式，如果我们是孩子还是父母。

Unix Exec 执行以下操作：

*   将程序 prog 加载到当前地址空间。
*   将参数 args 复制到地址空间的内存中。
*   初始化硬件上下文以在“开始”处开始执行。</li>

父母可以选择等待孩子完成。当孩子完成时，当调用退出时是通知父母等待的时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-13T08:05:25.723

我将举两个例子来说明区别
`fork()`：

```
#include "stdio.h"  
#include "stdlib.h"
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>
int fac(int);
int main(void)  
{
    int child_ret,input_num=-1;
    pid_t pid1;
    while(input_num<0){
        printf("\nPlease input a non-negative number:  ");
        scanf("%d",&input_num);
    }
    if((pid1=fork())<0){
        printf("fork error");
    }
    else if(pid1==0){
        printf("\nI am the child process,my PID is %d.\n\nThe first %d numbers of fibonacci sequence is:\n", getpid(),input_num);
        for (int i=0;i<input_num;i++)
        {printf("%d\n", fac(i+1));}
    }
    else{
        wait(&child_ret);
        printf("\nI am the parent process,my PID is %d.\n\n", getpid());
    }
    return 0;
}
int fac(int n)
{
    if (n<=2) return n-1;
    else 
    {
        return fac(n-1)+fac(n-2);
    }
} 
```

在这个程序中，fork 会做一个拷贝并返回两个值。我们将复制的进程称为父进程，另一个称为子进程。如果我们调用exec()函数，整个进程将被一个新的程序替换，除了PID。

`CreateProcess()`：

```
#include <windows.h>
#include <stdio.h>
#include <tchar.h>

void _tmain( VOID )
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;
    LPTSTR szCmdline=_tcsdup(TEXT("MyChildProcess"));

    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );

    // Start the child process.
    if( !CreateProcess( NULL,   // No module name (use command line)
       szCmdline,      // Command line
       NULL,           // Process handle not inheritable
       NULL,           // Thread handle not inheritable
       FALSE,          // Set handle inheritance to FALSE
       0,              // No creation flags
       NULL,           // Use parent's environment block
       NULL,           // Use parent's starting directory
       &si,            // Pointer to STARTUPINFO structure
       &pi )           // Pointer to PROCESS_INFORMATION structure
       )
    {
       printf( "CreateProcess failed (%d)./n", GetLastError() );
       return;
    }

    // Wait until child process exits.
    WaitForSingleObject( pi.hProcess, INFINITE );

    // Close process and thread handles.
    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );
} 
```

这是来自 MSDN 的示例。我们所说的创建新进程必须是Windows系统中单独的*.exe程序。新进程是一个全新的进程，它只有返回值与旧进程的唯一联系。
总之，我们经常`fork()+exec()`看到`CreateProcess()`。其实跟windows`fork()`中的比较类似。`CreateThread()`

# sql-server - SQL Server 查询 - 组合查询

> ID：13839936
> 
> 赞同：1
> 
> 时间：2012-12-12T12:35:52.717
> 
> 标签：sql-server

有谁知道是否可以在一个查询中执行以下操作而不是执行 numrows？

```
$select1 = "SELECT service FROM UPSServices WHERE code = '$serviceCode' AND ship_from_code = '$shipFrom'";

$result = mssql_query($select1);

//print_r($result);

if(mssql_num_rows($result) == 0) {
    $select2 = "SELECT service FROM UPSServices WHERE code = '$serviceCode' AND ship_from_code IS NULL";
    $result = mssql_query($select2);
}

while ($service = mssql_fetch_array($result)) {
    return $service['0'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:14:36.340

您正在使用 SQL Server，因此您可以执行此操作。它比您预期的要复杂一些。以下版本计算有效值的数量。如果这大于 0，则过滤掉 NULL。

```
select service    
from (SELECT service,
             count(ship_from_code) over () as NumValues
      FROM UPSServices
      WHERE code = '$serviceCode' AND (ship_from_code = '$shipFrom' OR ship_from_code IS NULL) 
    ) t
where (NumValues > 0 and service is not NULL) or (NumValues = 0 and service is NULL)
limit 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:51:18.693

如果指定的 shipCode 不存在，我认为您需要 NULL shipCode 的值

```
SELECT service FROM UPSServices WHERE 
code = '$serviceCode' AND (ship_from_code = '$shipFrom' OR ship_from_code IS NULL) 
ORDER BY ship_from_code" 
```

Order by 将确保如果您的船代码存在，那么它在顶部

# ruby - Ruby 'gets' 适用于多行

> ID：13839940
> 
> 赞同：13
> 
> 时间：2012-12-12T12:36:05.083
> 
> 标签：ruby, gets

使用 IRB，我想输入一个多行字符串，以便从中删除某些字符。“获取”只允许单行 - 多行是否有类似的功能。

```
ASCII_project.rb(main):002:0* puts = "What's the text you want to strip?"
=> "What's the text you want to strip?"
ASCII_project.rb(main):003:0> str = gets 
```

我现在想粘贴一段文本 - 因为新行它不起作用。这就是为什么我想收集多行

这是代码

```
# encoding: CP850
puts = "What's the text you want to strip?"
str = gets
str.gsub!(/\P{ASCII}/, '')
puts str 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T13:37:36.120

您可以使用此方法，它接受文本直到第一个空行

```
def multi_gets all_text=""
  while (text = gets) != "\n"
    all_text << text
  end
  all_text
end 
```

或者这个，你可以用你定义的任何结束字符替换 \n\n

```
def multi_gets all_text=""
  while all_text << STDIN.gets
    return all_text if all_text["\n\n"]
  end
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-12T12:42:51.747

您可以通过以下方式执行此操作，

```
$/ = "END"  
user_input = STDIN.gets
puts user_input 
```

当您认为输入完成时，请确保键入 END 关键字，

同样，这只适用于实际的解释器而不是 irb。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-30T21:45:15.043

你可以这样`readlines()`使用`$stdin`

```
> $stdin.readlines
Mit Wohnungen, mit Bergen, Hügeln, Flüssen,
Solang ichs deutlich sah, ein Schatz der Freuden;
Zuletzt im Blauen blieb ein Augenweiden
An fernentwichnen lichten Finsternissen.

# ^D
 => ["Mit Wohnungen, mit Bergen, Hügeln, Flüssen,\n",
 "Solang ichs deutlich sah, ein Schatz der Freuden;\n",
 "Zuletzt im Blauen blieb ein Augenweiden\n",
 "An fernentwichnen lichten Finsternissen.\n"] 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-12T13:37:43.757

```
str = <<-EOF
Your multi line
text goes here
.....
EOF 
```

但问题是你必须以 EOF 结尾

# c# - WCF 和 [DataMember] 属性

> ID：13839941
> 
> 赞同：3
> 
> 时间：2012-12-12T12:36:05.550
> 
> 标签：c#, wcf

我有以下（缩写）类通过 WCF 发送到客户端/从客户端接收：

```
public class Sparetime : ChartConfigurationBase, IChartConfiguration
{
    [DataMember]
    public int SparetimeConfigurationId { get; set; }

    public Single FeederOffRate { get; set; }
} 
```

请注意，第一个属性使用 DataMember 属性，而第二个没有。我是否正确，当进行 WCF 调用时，只有第一个属性会被序列化并发送到客户端？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T12:39:37.277

是的，你是对的， [MSDN 文档](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.aspx)指定了它：

> 当应用于类型的成员时，指定该成员是数据协定的一部分并且可由 DataContractSerializer 序列化。

您应该将[DataContract](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.aspx)属性添加到您的类以使其可序列化：

```
[DataContract]
public class Sparetime : ChartConfigurationBase, IChartConfiguration
{
} 
```

注意`FeederOffRate`将设置为其默认值（引用类型为 null）。

# apache - 点击链接时 WAMP 重定向到 phpmyadmin 主页

> ID：13839944
> 
> 赞同：0
> 
> 时间：2012-12-12T12:36:11.603
> 
> 标签：apache, codeigniter, wamp

我将我的 web 项目加载到一个新安装的 wamp 应用程序中，当我单击指向该网站其他页面的链接时，它被定向到 phpmyadmin 主页。我的 web 项目是使用 codeigniter 框架开发的。

根据apache错误日志，

> [2012 年 12 月 12 日星期三 16:56:38] [错误] [客户端 127.0.0.1] 文件不存在：C:/wamp/www/mathplication/about，引用者：[2012 年 12 月 12 日星期三 16:56:40] [错误] [客户端 127.0.0.1] 文件不存在：C:/wamp/www/assets

在htacess文件中，内容如下

> ```
> RewriteEngine On
> RewriteBase /mathplication/   #RewriteBase /
> 
> #Removes access to the system folder by users.
> #Additionally this will allow you to create a System.php controller,
> #previously this would not have been possible.
> #'system' can be replaced if you have renamed your system folder.
> RewriteCond %{REQUEST_URI} ^system.*  RewriteCond $1 !^(index\.php)
> RewriteRule ^(.*)$ /index.php?/$1 [L]
> 
> #When your application folder isn't in the system folder
> #This snippet prevents user access to the application folder
> #Submitted by: Fabdrol
> #Rename 'application' to your applications folder name.
> RewriteCond %{REQUEST_URI} ^application.*
> RewriteRule ^(.*)$ /index.php?/$1 [L]
> 
> #Checks to see if the user is attempting to access a valid file,
> #such as an image or css document, if this isn't true it sends the
> #request to index.php
> RewriteCond %{REQUEST_FILENAME} !-f
> RewriteCond %{REQUEST_FILENAME} !-d
> RewriteRule ^(.*)$ index.php?/$1 [L] </IfModule> 
> ```

但错误仍然存​​在。

不知道我还能检查什么。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:10:22.340

试试这个代码............

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

`.htaccess`删除文件中的所有其他内容

# linq - 使用 Interface cast 访问属性

> ID：13839946
> 
> 赞同：2
> 
> 时间：2012-12-12T12:36:17.220
> 
> 标签：linq, entity-framework, interface

ActionBase、ActionA、ActionB 和 ActionC 是实体（来自数据库）。ActionA、ActionB 和 ActionC 是 ActionBase 的派生类型。

ActionB 和 ActionC 使用 SpecialProperty 实现 ISpecialAction。

前任 ：

```
public interface ISpecialAction
{
    Guid SpecialProperty { get; }
}

public partial class ActionBase
{
    public objectX OnePropertyBase { get; set; }
}

public partial class ActionA : ActionBase
{
    public objectY OnePropertyA { get; set; }
}

public partial class ActionB:ActionBase,ISpecialAction 
{
    public objectZ OnePropertyB { get; set; }

    public Guid SpecialProperty
    {
        get
        {
            return OnePropertyB.ID;
        }
    }
}

public partial class ActionC : ActionBase ,ISpecialAction 
{
    public objectW OnePropertyC { get; set; }

    public Guid SpecialProperty
    {
        get
        {
            return OnePropertyC.ID;
        }
    }
} 
```

我的问题是 SpecialProperty 是从对象的其他属性（ActionB 或 ActionC）构建的，并且当转换（到 ISpecialAction）完成时，OtherProperty 和 OtherProperty2 为空。我试过了 ：

```
GetActionBase().ToList().Where(x=>x is ISpecialAction && ((dynamic) x).SpecialProperty== p_SpecialProperty);
GetActionBase().ToList().Where(x=>x is ISpecialAction && ((ISpecialAction) x).SpecialProperty== p_SpecialProperty);
GetActionBase().ToList().OfType<ISpecialAction>().Where(x => x.SpecialProperty== p_SpecialProperty).Cast<ActionBase>();
return GetActionOnGoing().ToList().OfType<ICityAction>().Cast<ActionBase>().Where(x => ((dynamic)x).CityId == p_CityId); 
```

备注：`OfType<>`不适用于 Linq 中的接口到实体，但在 Linq 中可以到对象

如何在不知道对象类型的情况下访问我的属性接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:11:26.113

没关系。

你的例子运行得很好，没有问题，所以我用另一种方式搜索：AutoMapper。

```
l_List.Actions = Mapper.Map<List<ActionBase>, Action[]>(l_ActionManagement.GetActionBySpecialId(l_Special.ID).ToList()); 
```

问题不是接口或 Linq 查询，而是 automapper 需要一个空的构造函数，在这个构造函数中，我需要初始化 OnePropertyB 和 OnePropertyC 来计算 SpecialProperty。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:13:00.333

不确定我是否完全理解您的问题，但您可以尝试使用中间接口，例如：

```
public interface ISpecialActionB : ISpecialAction
{
    objectZ OnePropertyB { get; set; }
}

public class ActionB : ActionBase, ISpecialActionB
{
    //same stuff
} 
```

并改为铸造。

```
var b = new ActionB{OnePropertyB = new Whatever()};

var bAsSpecial = b as ISpecialActionB;

var whatever =  b.OnePropertyB; // should not be null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:41:54.997

我可能错过了一些东西，但是您提供的代码可以：

```
public class objectX
{

}
public class objectY
{

}
public class objectZ
{
    public Guid ID { get { return Guid.NewGuid();} }
}
public class objectW
{
    public Guid ID { get { return new Guid(); } }
}

class Program
{
    private static Guid p_SpecialProperty;
    static void Main(string[] args)
    {
        var result = GetActionBase().ToList().Where(x => x is ISpecialAction && ((dynamic)x).SpecialProperty == p_SpecialProperty).FirstOrDefault();
        var result1 = GetActionBase().ToList().Where(x => x is ISpecialAction && ((ISpecialAction)x).SpecialProperty == p_SpecialProperty).FirstOrDefault();
        var result2 = GetActionBase().ToList().OfType<ISpecialAction>().Where(x => x.SpecialProperty == p_SpecialProperty).Cast<ActionBase>().FirstOrDefault();
                }

    private static IEnumerable<ActionBase> GetActionBase()
    {
        return new List<ActionBase> {new ActionA{OnePropertyA= new objectY()}, new ActionB{OnePropertyB=new objectZ()},new ActionC{OnePropertyC=new objectW()} };
    }
} 
```

# php - pdo 将变量绑定到准备好的 mysql 语句并使用 while 循环获取以显示在表中

> ID：13839948
> 
> 赞同：0
> 
> 时间：2012-12-12T12:36:28.733
> 
> 标签：php, mysql, pdo

我让自己纠结于使用 pdo 在表中显示 MySQL 数据的 pdo 语句。

我的语法是：

```
 $startdate=$_POST["start"];
 $enddate=$_POST["end"];
 $ttype=$_POST["ttype"];

$result = $db->query("SELECT cycletype,commenttype,adminstatus FROM v2loads where haulier= :haulier and :start < sarrive and :end> sarrive order by sarrive"); 
$result->bindParam(':haulier', $company, PDO::PARAM_STR); 
$result->bindParam(':start', $startdate, PDO::PARAM_STR); 
$result->bindParam(':end', $enddate, PDO::PARAM_STR); 
$result->execute; 
```

然后我尝试获取输出

```
<table>
    <? while($row = $jobs->fetch(PDO::FETCH_ASSOC)) {  ?>
      <tr>
        <td>
          <? echo $row['cycletype'];?>
        <td>
        <td>
          <? echo $row['icommenttype];?>
        <td>
        <td>
          <? echo $row['adminstatus'];?>
        <td>
     </tr>
    <?  }  ?>
</table> 
```

这会产生错误：调用非对象上的成员函数 bindParam()

任何援助将不胜感激。亲切的问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:45:46.293

这是你的脚本：

```
 $startdate=$_POST["start"];
    $enddate=$_POST["end"];
    $ttype=$_POST["ttype"];
    $result = $db->query("SELECT cycletype,commenttype,adminstatus FROM v2loads where    haulier= :haulier and :start < sarrive and :end> sarrive order by sarrive"); 
    $result->bindParam(':haulier', $company, PDO::PARAM_STR); 
    $result->bindParam(':start', $startdate, PDO::PARAM_STR); 
    $result->bindParam(':end', $enddate, PDO::PARAM_STR); 
    $result->execute; 
```

将此更改为：

```
 $startdate=$_POST["start"];
  $enddate=$_POST["end"];
  $ttype=$_POST["ttype"];
  $result = $db->prepare("SELECT cycletype,commenttype,adminstatus FROM v2loads where    haulier= :haulier and :start < sarrive and :end> sarrive order by sarrive"); 
  $result->bindParam(':haulier', $company, PDO::PARAM_STR); 
  $result->bindParam(':start', $startdate, PDO::PARAM_STR); 
  $result->bindParam(':end', $enddate, PDO::PARAM_STR); 
  $result->execute; 
```

然后尝试：

```
 <table>
  <? while($row = $result->fetch(PDO::FETCH_ASSOC)) {  ?>
  <tr>
    <td>
      <? echo $row['cycletype'];?>
    <td>
    <td>
      <? echo $row['icommenttype];?>
    <td>
    <td>
      <? echo $row['adminstatus'];?>
    <td>
  </tr>
  <?  }  ?>
 </table> 
```

您已`bindparam`在非对象上使用..USE`prepare`而不是`query`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T12:43:05.257

使用`prepare`方法不适`query`用于准备好的语句。

和：

*   方法调用需要括号，否则对于 PHP，它将是一个属性：`$result->execute();`而不是`$result->execute;`
*   你应该迭代 $result 而不是 $jobs：`while ($row = $result->fetch(PDO::FETCH_ASSOC)) {`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T12:41:11.520

这意味着您的查询没有解析，并且 $result 不是 PDO 语句对象。转储[$db->e​​rrorInfo()](http://php.net/manual/en/pdo.errorinfo.php)以获取有关错误的更多详细信息。

它可能就像 ":end>" 在 ">" 之前需要一个空格一样简单——我知道我倾向于把这些东西隔开，也许是因为过去的痛苦:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-18T21:38:47.733

答案的获取部分有一个错字。

`<? echo $row['icommenttype];?>`应该`<? echo $row['icommenttype'];?>`

我试图对其进行编辑，但由于 SO 的最少 6 个字符的编辑政策而被拒绝。

# qt - 如何以编程方式简单地删除 QFormLayout 中的行

> ID：13839952
> 
> 赞同：8
> 
> 时间：2012-12-12T12:36:40.010
> 
> 标签：qt, layout, pyqt

我有这个代码：

```
myEdit = QLineEdit()
myQFormLayout.addRow("myLabelText", myEdit) 
```

现在我必须`myEdit`仅通过引用删除该行：

```
myQformLayout.removeRow(myEdit) 
```

但是没有API。我可以使用`.takeAt()`，但我怎样才能得到论点？如何找到标签索引或 的索引`myEdit`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T18:08:16.550

您可以安排要删除的小部件及其标签（如果有的话），并让表单相应地自行调整。可以使用[labelForField](https://qt-project.org/doc/qt-4.8/qformlayout.html#labelForField)检索小部件的标签。

Python Qt 代码：

```
 label = myQformLayout.labelForField(myEdit)
    if label is not None:
        label.deleteLater()
    myEdit.deleteLater() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T15:08:28.140

我的解决方案...

在头文件中：

```
QPointer<QFormLayout> propertiesLayout; 
```

在 cpp 文件中：

```
// Remove existing info before re-populating.
while ( propertiesLayout->count() != 0) // Check this first as warning issued if no items when calling takeAt(0).
{
    QLayoutItem *forDeletion = propertiesLayout->takeAt(0);
    delete forDeletion->widget();
    delete forDeletion;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:04:47.813

这实际上是一个很好的观点……没有明确的反向函数`addRow()`。

要删除一行，您可以执行以下操作：

```
QLineEdit *myEdit;
int row;
ItemRole role;
//find the row
myQFormLayout->getWidgetPosition( myEdit, &row, &role);
//stop if not found  
if(row == -1) return;

ItemRole otheritemrole;
if( role == QFormLayout::FieldRole){
    otheritemrole = QFormLayout::LabelRole;
}
else if( role == QFormLayout::LabelRole){
    otheritemrole = QFormLayout::FieldRole;
}

//get the item corresponding to the widget. this need to be freed
QLayoutItem* editItem = myQFormLayout->itemAt ( int row, role );

QLayoutItem* otherItem = 0;

//get the item corresponding to the other item. this need to be freed too
//only valid if the widget doesn't span the whole row
if( role != QFormLayout::SpanningRole){
    otherItem = myQFormLayout->itemAt( int row, role );
}

//remove the item from the layout
myQFormLayout->removeItem(editItem);
delete editItem;

//eventually remove the other item
if( role != QFormLayout::SpanningRole){
     myQFormLayout->removeItem(otherItem);
     delete otherItem 
} 
```

请注意，我在删除它们之前检索了所有项目。那是因为我不知道当一个项目被删除时他们的角色是否会改变。没有指定这种行为，所以我玩得很安全。在 qt 设计器中，当您从表单中删除一个项目时，该行上的另一个项目会占用所有空间（这意味着他的角色发生了变化......）。

也许某处有一个功能，我不仅重新发明了轮子，而且还做了一个坏了的轮子……

# php - exec 'echo' 失败，如何检查原因？

> ID：13839961
> 
> 赞同：1
> 
> 时间：2012-12-12T12:37:12.907
> 
> 标签：php, debugging

我有一个需要将文本写入文件的控制台 PHP 应用程序。如果此文本大小超过 130999 字节，则不会写入数据：

```
$line = '';
for ( $i=0 ; $i<130991 ; $i++ ) {
    $line .= 'i';
}

$size = mb_strlen($line, 'utf-8');
$line = "\n" . $size . " " . $line; // Adds another 8 bytes
$logLine = escapeshellarg($line);
echo shell_exec("echo {$logLine} >> data.log}"); 
```

怀疑内存限制，我将 PHP 内存限制从 128 MB 增加到 512 MB，情况没有任何变化。**什么可能导致这种限制？**

**编辑：**
更多信息：

```
$ xargs --show-limits
Your environment variables take up 3126 bytes
POSIX upper limit on argument length (this system): 2091978
POSIX smallest allowable upper limit on argument length (all systems): 4096
Maximum length of command we could actually use: 2088852
Size of command buffer we are actually using: 131072 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:46:50.787

除了 PHP，您基本上所做的是在系统的命令行处理器中创建和运行一个巨大的命令。

我怀疑所有命令行 shell 都有最大命令大小。该限制在 Windows 2000 上为 2047，在 Windows XP 上为 8191 [[ref]](http://support.microsoft.com/kb/830473)。Linux 可能会有更大的限制，但我认为它不会是无限的。我很确定你刚刚达到了系统的限制。

PS 当 PHP 达到其内存限制时，您会收到正确的错误消息。

# java - 从 Java 客户端使用 WCF 服务

> ID：13839962
> 
> 赞同：0
> 
> 时间：2012-12-12T12:37:13.727
> 
> 标签：java, wcf, saas

我有带有 basicHttpBinding 的 WCF 服务：

```
 <basicHttpBinding>
    <binding name="DefaultBasic" closeTimeout="00:30:00" openTimeout="00:30:00"
      receiveTimeout="05:00:00" sendTimeout="00:30:00" maxBufferSize="655360000"
      maxBufferPoolSize="524288000" maxReceivedMessageSize="655360000">
      <readerQuotas maxDepth="655320000" maxStringContentLength="655320000"
        maxArrayLength="655320000" maxBytesPerRead="655320000"        maxNameTableCharCount="655320000" />
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Basic" />
        <message clientCredentialType="UserName" />
      </security>
    </binding>
  </basicHttpBinding> 
```

java客户端可以使用这个服务吗？同事告诉wsdl这部分是有问题的：

```
<wsp:Policy wsu:Id="Basic_policy">
 <wsp:ExactlyOne>
   <wsp:All>
       <http:BasicAuthentication     xmlns:http="http://schemas.microsoft.com/ws/06/2004/policy/http"/>
   </wsp:All>
 </wsp:ExactlyOne>
</wsp:Policy> 
```

编辑： java 客户端是否可以使用 Windows 身份验证服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:48:43.680

问题是您要调用的服务需要基本的 http 身份验证， [也许上](https://stackoverflow.com/questions/7071366/java-web-service-client-basic-authentication)一篇文章可以帮助您。

# java - 在 Configuration 中设置 HDFS 的根目录

> ID：13839963
> 
> 赞同：1
> 
> 时间：2012-12-12T12:37:15.417
> 
> 标签：java, database, hadoop, hdfs

我有一个目录结构：

```
/  
   DIR files
   DIR usr 
```

我的 HDFS 在 可用`hdfs://db:123`，所以我创建了配置：

```
configuration.set("fs.default.name", "hdfs://db:123"); 
```

然后所有目录/路径都相对于根 ( `/`)。我创建了一个目录`files`，这就是我要保存所有文件的地方。

我是否必须手动附加`/files/`到代码中每个路径的开头，或者我可以创建配置：

```
configuration.set("fs.default.name", "hdfs://db:123/files"); 
```

并且不需要更改代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:30:54.663

通常，如果没有通过前导斜杠，您传递的路径要么是相对于用户 HDFS 主目录的路径，要么是相对于以 / 为前缀的绝对路径。

如果您查看 Path.makeQualified 的源代码，您应该会看到一个测试路径是否不是绝对的（这是从 1.0.3 开始的）：

```
/** Returns a qualified path object. */
public Path makeQualified(FileSystem fs) {
  Path path = this;
  if (!isAbsolute()) {
    path = new Path(fs.getWorkingDirectory(), this);
  } 
```

`DistributedFileSystem.getWorkingDirectory()`使用名为 workingDir 的实例变量作为响应，可以使用该`setWorkingDirectory(path)`方法设置。如果不自己设置工作目录，则默认为用户的主目录（方法中可以看到`DistributedFileSystem.initialize(..)`：

```
this.workingDir = getHomeDirectory(); 
```

并且`DistributedFileSystem.getHomeDirectory()`：

```
public Path getHomeDirectory() {
  return new Path("/user/" + dfs.ugi.getShortUserName()).makeQualified(this);
} 
```

您似乎无法通过配置属性配置工作目录，因此您必须在提交作业之前调用以下命令（之后所有相对路径都将相对于 /files）：

```
FileSystem.get(configuration).setWorkingDirectory("/files"); 
```

# jquery - 跨域 JSONP 帖子给出控制台错误

> ID：13839964
> 
> 赞同：0
> 
> 时间：2012-12-12T12:37:24.420
> 
> 标签：jquery, json, cross-domain, jsonp

我想做一个跨域的帖子，看来我必须使用JSONP。我的帖子确实有效，但 Firefox 控制台出现错误。为什么我的 PHP 正确接收数据时脚本说它“失败”？

```
function post_data(data1, data2, data3) {
    $.ajax({
        type: 'POST',
        dataType: 'jsonp', 
        data: "data1=" + data1 + "&data2=" + data2 + "&data3=" + data3, 
        url: 'http://www.thedomainname.com/recievedata.php',
        success: function(data){
            alert('succes!!');
        },
        error: function(){
            alert('fail!');
        }
    });
    return false;
}; 
```

它触发错误函数；在这种情况下，它会提示“失败！”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:00:04.540

您可以尝试指定以下参数（`jsonp`, `jsonpcallback`），以便在 jsonp 请求成功的情况下设置自定义函数：

```
function jsonpCallback(response){
    console.log(response);
}

function post_data(data1, data2, data3) {
    $.ajax({
        type: 'POST',
        dataType: 'jsonp', 
        data: "data1=" + data1 + "&data2=" + data2 + "&data3=" + data3, 
        url: 'http://www.thedomainname.com/recievedata.php',
        jsonp: false,
        jsonpCallback: 'jsonpCallback',
        error: function(){
            alert('fail!');
        }
    });
    return false;
}; 
```

看看这里并搜索`jsonp`：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# android - 即使我们更改设备字体大小，Android如何保持Sherlock ActionBar Menu字体大小不变

> ID：13839968
> 
> 赞同：0
> 
> 时间：2012-12-12T12:37:35.313
> 
> 标签：android, actionbarsherlock, android-menu

在我的应用程序中，我在操作栏上有一些文本菜单。对于操作栏，我使用 Sherlock 支持库。同样根据[这个答案](https://stackoverflow.com/a/11220443/840669)，我已将字体大小更改为一些固定大小，例如这些菜单的 17dp。但是每当我更改系统字体大小时，菜单文本的字体大小也会增加，并且超出操作栏的高度。**无论系统字体大小如何，有什么方法可以保持菜单字体大小固定？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:29:58.087

最后，我最终删除了菜单并将它们添加到操作栏的自定义视图 xml 中。

# redis - 如何根据我的域中引发的事件在 RedMQ 中设置处理程序

> ID：13839971
> 
> 赞同：8
> 
> 时间：2012-12-12T12:37:43.957
> 
> 标签：redis, servicestack

只是[了解消息队列和 Redis MQ](http://github.com/ServiceStack/ServiceStack/wiki/Messaging-and-redis)，优秀的框架。

我知道您必须使用 .RegisterHandler(...) 来确定哪个处理程序将处理消息队列中的消息/事件类型。

因此，如果我有 EventA、EventB 等，我应该有一个服务来处理这些事件中的每一个，例如：

```
public class DomainService : Service {

    public object Any(EventA eventA) {...}
    public object Any(EventB eventA) {...}
} 
```

那么这些应该只是创建的队列/redis列表吗？

另外，如果我希望发生一系列事件，例如 EventA 类型的消息也有一个处理程序，该处理程序发送一封电子邮件，提供链上较早的处理程序成功，该怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T06:13:10.347

[ServiceStack](http://www.servicestack.net)在为 MQ、REST、HTML 或 SOAP 服务创建的服务之间没有区别，它们是同一个东西。即它们每个都接受一个请求 DTO 并可选择返回一个响应 DTO，并且同一服务可以处理来自任何端点或格式的调用，例如 HTML、REST、SOAP 或 MQ。

请参阅[ServiceStack 的体系结构](https://github.com/ServiceStack/ServiceStack/wiki/Architecture-overview)图以了解 MQ 是如何融入其中的。

### 限制

您需要记住的唯一事项是：

*   与 SOAP 一样，MQ 仅支持 1 个动词，因此您的方法需要命名为**Post**或**Any**
*   仅执行操作过滤器（即不执行全局或属性过滤器）
*   您将获得 MqRequest 和 MqResponse 存根来代替`IHttpRequest`, `IHttpResponse`。您仍然可以使用`.Items`通过请求管道传递数据，但任何 HTTP 操作（如设置 cookie 或 HTTP 标头）都是良性的

## 配置 Redis MQ 主机

MQ 主机本身与 ServiceStack 框架的其余部分完全解耦，在您自己将消息传递到 ServiceStack 之前，谁不知道 MQ 的存在，这通常在您注册的处理程序中完成，例如：

```
var redisFactory = new PooledRedisClientManager("localhost:6379");
var mqHost = new RedisMqServer(redisFactory, retryCount:2);

mqHost.RegisterHandler<Hello>(m => {
    return this.ServiceController.ExecuteMessage(m);
});

//shorter version:
//mqHost.RegisterHandler<Hello>(ServiceController.ExecuteMessage);

mqHost.Start(); //Starts listening for messages 
```

在你的`RegisterHandler<T>`你指定你希望它监听的请求类型。

默认情况下，您只能为每条消息注册一个处理程序，并且在 ServiceStack 中，请求与已知的服务实现相关联，在 MQ 的情况下，它正在寻找方法签名首先匹配：`Post(Hello)`如果不存在，它会查找后备`Any(Hello)`。

### 可以自己为每条消息添加多个处理程序

如果您想调用多个处理程序，那么您只需维护自己的处理程序，`List<Handler>`并在请求进入时将它们全部执行并执行。

### 调用不同的服务

如果您想调用不同的服务，只需将其转换为不同的 Request DTO 并将其传递给 ServiceController。

当任何人发送 MQ 请求时，例如：

```
mqClient.Publish(new Hello { Name = "Client" }); 
```

[使用IMessage](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Messaging/IMessage.cs)类型的实例调用您的处理程序，其中 Request DTO 包含在**Body**属性中。此时，您可以选择丢弃、验证或更改消息。

### MQ 请求与任何其他服务请求相同

在大多数情况下，您通常只需将消息转发到[ServiceController 以进行处理](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/ServiceHost/ServiceController.cs#L408-L411)，其实现是：

```
public object ExecuteMessage<T>(IMessage<T> mqMsg)
{
    return Execute(mqMsg.Body, new MqRequestContext(this.Resolver, mqMsg));
} 
```

**该实现只是从mqMsg.Body**中提取 Request DTO并将该消息作为普通服务处理，从那时起通过 C# Request DTO 传递一个包含 MQ IHttpRequest、IHttpResponse 存根的 MqRequestContext。

# iphone - ios：如何使用人的手机号码从通讯录中获取缩略图？

> ID：13839975
> 
> 赞同：2
> 
> 时间：2012-12-12T12:38:02.923
> 
> 标签：iphone, objective-c, ios, sqlite

> **可能重复：**
> [从 iphone 应用程序中的地址簿获取照片](https://stackoverflow.com/questions/9488675/get-photos-from-address-book-in-iphone-application)

我是 iphone 开发的新手。在我的应用程序中，我使用`<AddressBook/AddressBook.h> and <AddressBookUI/AddressBookUI.h>`框架从通讯录中获取人员详细信息。

我有`recName.text = (NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);` 并且`ABMultiValueRef multi = ABRecordCopyValue(person, kABPersonPhoneProperty); recNumber.text = (NSString*)ABMultiValueCopyValueAtIndex(multi, 0);`

之后，我将我的 recName 和 recNumber 保存到 sqlite 数据库中。

然后我在数据库中执行一些查询语句，以获取最大重复到数据库中的 recName 和 recNumber 值。

现在我有数据库中的recname 和recnumber，我想要地址簿中相应的人图像。

如何从通讯录中获取对应人的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:04:05.873

```
 CFDataRef imageData = ABPersonCopyImageData(person);
  UIImage *image = [UIImage imageWithData:(NSData *)imageData];
  CFRelease(imageData); 
```

# android - Android NativeActivity 打开浏览器

> ID：13839976
> 
> 赞同：1
> 
> 时间：2012-12-12T12:38:09.640
> 
> 标签：android, browser, android-intent, android-ndk, native-activity

我正在寻找一种从 android 本机活动内部打开浏览器到“www.google.com”的方法。我知道没有一种简单的方法可以从本机代码生成意图，但是根据[这篇文章](http://vkswtips.blogspot.co.uk/2012/01/android-how-to-call-java-activity-using.html)，可以使用 JNI 来实现。

由于打开网络浏览器是一件相当普遍的事情，我希望有人已经知道如何并且愿意分享。

谢谢您的帮助，

海梅

# prolog - Prolog合并排序列表内的列表

> ID：13839979
> 
> 赞同：1
> 
> 时间：2012-12-12T12:38:27.277
> 
> 标签：prolog, mergesort

例如，我需要排序：

`?- mergesort([8,1,[4,6,3],2],Sorted).`

结果应该是：

`Sorted = [1, 2, 8, [3, 4, 6]]`

不幸的是，我不确定该怎么做。我试图自己找到答案，但没有找到解决方案。目前的结果是：

`Sorted = [1, 2, 8, [4, 6, 3]]`

我的代码：

```
mergesort([],[]).
mergesort([A],[A]).
mergesort([A,B|R],S) :-  
   split([A,B|R],L1,L2),
   mergesort(L1,S1),
   mergesort(L2,S2),
   merge(S1,S2,S).

split([],[],[]).
split([A],[A],[]).
split([A,B|R],[A|Ra],[B|Rb]) :-  split(R,Ra,Rb).

merge(A,[],A).
merge([],B,B).
merge([A|Ra],[B|Rb],[A|M]) :-  A @=< B, merge(Ra,[B|Rb],M).
merge([A|Ra],[B|Rb],[B|M]) :-  A @> B,  merge([A|Ra],Rb,M). 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:44:49.187

我会写一个简单的预处理步骤：

```
sortl([H|T],[Hs|Ts]) :-
    (   is_list(H)
    ->  mergesort(H,Gs),
        sortl(Gs,Hs)
    ;   Hs = H
    ),
    sortl(T,Ts).
sortl([],[]). 
```

那么你可以这样使用它

```
?- sortl([8,1,[4,6,[3,4],[1,8],3],2,[1,3,2]],T),mergesort(T,Sorted).
T = [8, 1, [3, 4, 6, [1, 8], [3|...]], 2, [1, 2, 3]],
Sorted = [1, 2, 8, [1, 2, 3], [3, 4, 6, [...|...]|...]] 
```

# android - 如何使用android找到爬楼梯的方法？

> ID：13839985
> 
> 赞同：1
> 
> 时间：2012-12-12T12:38:52.613
> 
> 标签：android, android-sensors

我正在使用加速度计和 GPS 做与计步器相关的 android 应用程序。我可以根据这个公式找到用户是否正在行走

```
speed = Math.abs(x+y+z - last_x - last_y - last_z)/ diffTime * 10000; 
```

我找不到用户何时在室内爬楼梯。

我可以使用 GPS 找到，可以找到高度。所以我可以根据下面这个函数来判断用户是否在攀爬。

```
double altitude=location.getAltitude(); 
```

但 GPS 在室内不能提供良好的高度精度。是否可以使用加速度计在室内找到爬楼梯？

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:48:39.383

他。加速度计听起来是个好主意。

创建简单的应用程序来存储来自加速度计的数据并将其绘制在显示屏上。记录楼梯上的许多样本数据（上/下）。然后创建描述这种运动的近似函数。然后在您的应用程序中跟踪加速度计变化并检查它与给定函数的接近程度。当然，您应该考虑一些误差范围。

# regex - 正则表达式查找多个值

> ID：13839988
> 
> 赞同：2
> 
> 时间：2012-12-12T12:39:01.157
> 
> 标签：regex, apache

我正在对我网站中的一些链接进行重定向，并且我正在使用这样的正则表达式：

```
/thigs/([^(wood | \?n= | stone)].*) 
```

我想丢弃所有包含单词“wood”或“stone”或“?n=”的并发。它有效，但仅适用于 '?n=' 它忽略了 'wood' 和 'stone'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:41:48.650

不要为此使用字符类。字符类`[wood]`与`[dow]`.

```
/thigs/(?!(wood|\?n=|stone).*) 
```

**有关的**

*   [字符类](http://www.regular-expressions.info/charclass.html)

# php - 使用引用来布置简单的功能是一种好习惯吗

> ID：13839990
> 
> 赞同：5
> 
> 时间：2012-12-12T12:39:05.120
> 
> 标签：php, pass-by-reference

我有一个功能：

```
$query = "SELECT * from lol";
database_query( $query ); 
```

考虑到`$query`永远不会在 database_query 函数中更改，使用指针是一种好习惯，`$query`这样函数就不需要为传入的值的新迭代分配更多内存？

```
function database_query( &$query ){
    //do stuff that does not affect $query
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T12:43:24.207

**不，不要这样做**。[如果在函数内部更改了 non-pass-by-reference 参数的值（ “写时复制”](http://php.net/manual/internals2.variables.intro.php)），PHP 只会创建字符串的另一个副本。没有理由通过使参数成为引用来让阅读您的代码的人对您的函数正在执行的操作产生错误的印象。

此外，[引用不是指针](http://php.net/manual/language.references.arent.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:14:13.367

的值`$query`是一个字符串。字符串没有内部可变状态——在 PHP 中“更改”包含字符串的变量的唯一方法是为其分配一个新字符串（或通过引用将其传递给一个函数，该函数然后为其分配一个新字符串， ETC。）。因此，当您这样做时`$foo = $query;`，任何合理的实现都会简单地将指针复制到内部字符数组，而不是复制实际字符，因为它们无法更改。因此，即使您不知道 PHP 具有写时复制功能，您也可以得出结论，按值传递字符串并不昂贵。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-12T16:03:48.273

事实证明这是一个非常有趣的问题，我在过去的一个半小时里阅读了有关 PHP 以及它如何处理引用的内容（感谢 Tim Cooper 提供的链接让我开始学习）。

要回答您的问题，是的 - 在调用函数时使用这样的引用是一种很好的做法。通过使用引用，您将使用更少的资源 - 引用变量没有“写入时复制”。这里有一些证据：

```
<?php
function noref_nowrite($var_a){
    echo '<h3>NOT Using a Reference/Not Changing Data</h3>';
    echo '<p>'. xdebug_debug_zval('var_a') .'</p>';
    echo '<p>'. debug_zval_dump($var_a) .'</p>';
    echo '<p>$var_a = '. $var_a .' and $GLOBALS[a] = '. $GLOBALS['a'] .'</p>';
}
function noref_write($var_a){
    $var_a++;
    echo '<h3>NOT Using a Reference/Changing Data</h3>';
    echo '<p>'. xdebug_debug_zval('var_a') .'</p>';
    echo '<p>'. debug_zval_dump($var_a) .'</p>';
    echo '<p>$var_a = '. $var_a .' and $GLOBALS[a] = '. $GLOBALS['a'] .'</p>';
}

function ref_nowrite(&$var_a){
    echo '<h3>Using a Reference/Not Changing Data</h3>';
    echo '<p>'. xdebug_debug_zval('var_a') .'</p>';
    echo '<p>'. debug_zval_dump($var_a) .'</p>';
    echo '<p>$var_a = '. $var_a .' and $GLOBALS[a] = '. $GLOBALS['a'] .'</p>';
}
function ref_write(&$var_a){
    $var_a++;
    echo '<h3>Using a Reference/Changing Data</h3>';
    echo '<p>'. xdebug_debug_zval('var_a') .'</p>';
    echo '<p>'. debug_zval_dump($var_a) .'</p>';
    echo '<p>$var_a = '. $var_a .' and $GLOBALS[a] = '. $GLOBALS['a'] .'</p>';
}

$a = 5;
noref_nowrite($a);
noref_write($a);
ref_nowrite($a);
ref_write($a);
?> 
```

如果您将上述代码复制/粘贴到 PHP 页面并执行它，您将看到：

```
NOT Using a Reference/Not Changing Data
var_a: (refcount=3, is_ref=0)=5
long(5) refcount(4)

$var_a = 5 and $GLOBALS[a] = 5

NOT Using a Reference/Changing Data
var_a: (refcount=1, is_ref=0)=6
long(6) refcount(2)
$var_a = 6 and $GLOBALS[a] = 5

Using a Reference/Not Changing Data
var_a: (refcount=3, is_ref=1)=5
long(5) refcount(1)
$var_a = 5 and $GLOBALS[a] = 5

Using a Reference/Changing Data
var_a: (refcount=3, is_ref=1)=6
long(6) refcount(1)
$var_a = 6 and $GLOBALS[a] = 6 
```

所以我们这里有四个基本测试。我创建了一个全局变量 ($a) 并将其赋值为 5。

当我调用 noref_nowrite 函数时，我们看到 XDebug 计数为 3 个引用，而 PHP 的内置函数计数为 4。有趣的是，PHP 在内部对此进行了优化，这就像调用 ref_nowrite 函数一样，因为 PHP 使 $var_a 成为对 $GLOBALS['a'] 的引用.

当我调用 noref_write 函数时，我们看到 refcount 下降到 1（如果您查看 PHP 的内置函数，则为 2）。为什么？因为这是发生“写时复制”问题的地方。在我们增加 $var_a 之前，PHP 在内部使用 $var_a 作为对 $a 的引用，但是当我们更改值时，我们强制 PHP 复制变量以便它可以增加。所以此时 $var_a 不再是对 $a 的引用，而是改为引用它自己的数据。

ref_nowrite 函数显示不明确的结果。单看它，我们无法证明任何事情。然而 ref_write 函数告诉我们 XDebug 说我们正在处理一个引用变量（is_ref=1），最重要的是我们看到在我们增加 $var_a 之后，我们的全局变量 $a 的值也发生了变化——这意味着 $var_a 和$GLOBALS['a'] 肯定指向内存中的同一个地方。这意味着更改 $var_a 不会触发“写入时复制”的情况——它不应该因为我们正在处理引用。

玩弄这个来说服自己，这里还有一些阅读：

[检测 PHP 变量是否是引用/被引用](https://stackoverflow.com/questions/4817562/detecting-whether-a-php-variable-is-a-reference-referenced)（我认为 ircmaxell 有一个深思熟虑的答案）

[http://us2.php.net/debug-zval-dump](http://us2.php.net/debug-zval-dump)

XDebug 文档：http: [//xdebug.org/docs/display](http://xdebug.org/docs/display)

PHP 参考资料的作用：http: [//us3.php.net/manual/en/language.references.whatdo.php](http://us3.php.net/manual/en/language.references.whatdo.php)

PHP 参考计数基础：[http ://us3.php.net/manual/en/features.gc.refcounting-basics.php](http://us3.php.net/manual/en/features.gc.refcounting-basics.php)

# jquery - 无线电不同的名称 - 只检查一个

> ID：13839995
> 
> 赞同：6
> 
> 时间：2012-12-12T12:39:22.503
> 
> 标签：jquery, radio-button

我在基于 xtcommerce 的解决方法中使用了许多单选按钮。这些单选按钮是动态创建的，并为每个组赋予不同的名称，如下所示：

```
<input type="radio" name="id[1]" value="40">
<input type="radio" name="id[1]" value="30">
<input type="radio" name="id[1]" value="20">
<input type="radio" name="id[1]" value="10">
<input type="radio" name="id[2]" value="40">
<input type="radio" name="id[2]" value="30">
<input type="radio" name="id[2]" value="20">
<input type="radio" name="id[2]" value="10">
<input type="radio" name="id[3]" value="10">
.... 
```

现在我想将这些单选按钮“组合”在一起，这样我一次只能选择一个单选按钮。现在默认情况下，每个“组”（name="id[1]"、name="id[2]" 等）的每个第一个单选按钮都会被预先选择，并且每个单选按钮的每个值都会被提交。

我在stackoverflow上找到了这个脚本，只选择一个单选按钮：

```
$(document).ready(function () {
  $('input[type=radio]').prop('checked', false);
  $('input[type=radio]:first').prop('checked', true)

  $('input[type=radio]').click(function (event) {
    $('input[type=radio]').prop('checked', false);
    $(this).prop('checked', true);

    event.preventDefault();
  });
}); 
```

这是一个小提琴：

[http://jsfiddle.net/3xD7V/1/](http://jsfiddle.net/3xD7V/1/)

到目前为止，这有效，我只能在我的页面上选择一个单选按钮。但是你也可以在我的 js-fiddle 中看到一个问题：

[http://jsfiddle.net/ksZxV/](http://jsfiddle.net/ksZxV/)

第一组的第一个单选按钮是预先选择的——没关系。但是，如果您选择同一组的另一个单选按钮，则选择-“标记”不会改变。只有当您单击另一个组的单选按钮时，所选单选按钮才会被选中（在 FF **（编辑：和 Opera 以及 IE9 中发现另一个错误）**，如果我选择任何其他单选按钮，则不会显示选择标记; 在 Chrome 中，它通过选择另一个组来更改）。如果您留在同一组中，则选择也不会改变。

在我基于本地的安装中，我有一个动态变化的更新程序，它说明了所选项目的新价格（对不起，我无法在小提琴中实现它）。到目前为止，这有效，即使我选择同一组的另一个单选按钮，价格也会更新，但如前所述，选择-“标记”不会改变......

对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T12:53:06.253

您无需取消选中所有单选按钮，然后重新选中当前单选按钮。取消选中之前选中的按钮就足够了。

作为这种简化的副作用，您的错误也得到了修复。

```
$(document).ready(function () {
    $('input[type=radio]').change(function() {
        // When any radio button on the page is selected,
        // then deselect all other radio buttons.
        $('input[type=radio]:checked').not(this).prop('checked', false);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:45:37.457

你为什么在`event.preventDefault();`那里......因为你的点击函数内的代码正在这样做。

删除`event.preventDefault();`并尝试

这是小提琴..

[http://jsfiddle.net/ksZxV/1/](http://jsfiddle.net/ksZxV/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:46:41.030

只需删除`event.preventDefault();`它就会起作用。

检查这个[JSFIDDLE](http://jsfiddle.net/ksZxV/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-26T13:56:12.033

具有不同名称但只有一个选项的单选按钮

工作示例：**[https ://codepen.io/Vivekparashar/pen/wvwLwxY](https://codepen.io/Vivekparashar/pen/wvwLwxY)**

JS：

```
$(document).ready(function() {
  $("input[type=radio]").prop("checked", false);
  $("input[type=radio]:first").prop("checked", true);

  $("input[type=radio]").click(function(event) {
    $("input[type=radio]").prop("checked", false);
    $(this).prop("checked", true);

    //event.preventDefault();
  });
}); 
```

HTML：

```
<div class="mycontainer">   
    <h3 class="heading">Radio Button With Different Name/Group but Single Selection</h3>
    <hr>
    <form>
        <div class="radioDiv">
            <label class="11">Radio Button 1</label>
            <input type="radio" name="radiobutton1">
        </div>
        <div class="radioDiv">
            <label>Radio Button 2</label>
            <input type="radio" name="radiobutton2">
        </div>
        <div class="radioDiv">
            <label>Radio Button 3</label>
            <input type="radio" name="radiobutton3">
        </div>
        <div class="radioDiv">
            <label>Radio Button 4</label>
            <input type="radio" name="radiobutton4">
        </div>
        <div class="radioDiv">
            <label>Radio Button 5</label>
            <input type="radio" name="radiobutton5">
        </div>
    </form>
</div> 
```