# StackOverflow 问答 14647000-14647999

# python - 是否有用于打开 SPSS 文件的 Python 模块？

> ID：14647006
> 
> 赞同：37
> 
> 时间：2013-02-01T13:07:46.480
> 
> 标签：python, dataset, statistics, python-module, spss

是否有 Python 模块可以打开 IBM SPSS（即 .sav）文件？如果有一些最新的东西不需要任何额外的 dll 文件/库，那就太好了。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2018-08-22T10:39:06.330

我发布了一个 python 包“pyreadstat”，它可以读取 SPSS（sav、zsav 和 por）、Stata 和 SAS 文件。它是 C 库 ReadStat 的包装器，因此速度非常快。Readstat 是 R 库 Haven 后面使用的库，使用广泛，非常健壮。

包是自动包含的。它不需要使用 R（不需要安装额外的应用程序）并且它不依赖于 IBM dll 或其他外部库。

例如，为了读取 SPSS sav 文件，您可以：

```
import pyreadstat

df, meta = pyreadstat.read_sav("/path/to/sav/file.sav") 
```

df 是一个熊猫数据框。Meta 包含元数据，例如变量标签或值标签。read_sav 读取 sav 和 zsav（压缩）文件。对于旧的 por（便携式）文件，还有一个函数 read_por。

你可以在这里找到它：[https ://github.com/Roche/pyreadstat](https://github.com/Roche/pyreadstat)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-01-01T20:54:32.310

根据您想要做什么——使用来自[rpy2](http://rpy.sourceforge.net/rpy2.html)的 R 相关命令处理数据，或切换到 Python—— [@Spacedman](https://stackoverflow.com/a/19297044/420055)在相关线程上提供的解决方案可能很容易适应您的需求。

否则，[Pandas](http://pandas.pydata.org/)包含一个[方便的`rpy2`](http://pandas.pydata.org/pandas-docs/stable/r_interface.html). 以下是使用 Peat 和 Barton[`weights.sav`](http://goo.gl/lTwSkn)数据集的示例：

```
>>> import pandas.rpy.common as com
>>> filename = "weights.sav"
>>> w = com.robj.r('foreign::read.spss("%s", to.data.frame=TRUE)' % filename)
>>> w = com.convert_robj(w)
>>> w.head()
     ID  WEIGHT  LENGTH  HEADC  GENDER  EDUCATIO              PARITY
1  L001    3.95    55.5   37.5  Female  tertiary  3 or more siblings
2  L003    4.63    57.0   38.5  Female  tertiary           Singleton
3  L004    4.75    56.0   38.5    Male    year12          2 siblings
4  L005    3.92    56.0   39.0    Male  tertiary         One sibling
5  L006    4.56    55.0   39.5    Male    year10          2 siblings 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-06-26T12:19:54.947

作为人们后来发现的注释（像我一样）：`pandas.rpy`已在最新版本的熊猫（> 0.16）中被弃用，如此处[所述](http://pandas.pydata.org/pandas-docs/stable/r_interface.html#rpy-updating)。该页面包含有关更新代码以使用该`rpy2`界面的信息。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-11-07T18:50:56.860

当您拥有**pandas >= 0.25.0**时，您现在终于可以这样做了[`pd.read_spss()`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_spss.html)：

```
# you need pandas >= 0.25.0 for this    
import pandas as pd
df = pd.read_spss('your_spss_file.sav') 
```

这有库**pyreadstat 作为要求**，因此您可能必须先安装它：

```
pip install pyreadstat 
```

**pd.read_spss() 参数的**额外信息：

> 参数
> ----------
> **path** : string 或 Path
> 文件路径
> 
> **usecols**：类似列表，可选
> 返回列的子集。如果没有，则返回所有列。
> 
> **convert_categoricals** : bool，默认为 True
> 将分类列转换为 pd.Categorical。
> 
> 返回
> --------
> 数据帧

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-03T04:52:46.440

但是使用 IBM 库的好处是他们可以正确地获得这种相当复杂的二进制文件格式。它们是免费的，减轻您为这种格式编写代码的负担，并且许可证允许您重新分发它们。你还能问什么？

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-05T08:56:46.823

这是您可能感兴趣的软件包

*   Bitbucket 上的[savReaderWriter](https://bitbucket.org/fomcl/savreaderwriter/wiki/Home)

*   Python 包索引存储库中的[savReaderWriter 3.4.2](https://pypi.python.org/pypi/savReaderWriter/3.4.2)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-02T17:17:01.590

我和@Pyderman 有同样的问题，关于如何为熊猫更新这个（> 0.16）。这就是我想出的：

```
from rpy2.robjects import pandas2ri, r
filename = 'weights.sav'
w = r('foreign::read.spss("%s", to.data.frame=TRUE)' % filename)
df = pandas2ri.ri2py(w)
df.head() 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-01T13:14:12.363

也许您会发现这很有用：[http ://code.activestate.com/recipes/577811-python-reader-writer-for-spss-sav-files-linux-mac-/](http://code.activestate.com/recipes/577811-python-reader-writer-for-spss-sav-files-linux-mac-/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-15T10:40:42.687

您可以使用[R 的 python 接口](https://stackoverflow.com/questions/11716923/python-interface-for-r-programming-language)，然后使用`read.spss`in导入数据`library(foreign)`。

# c++ - std::list::clear 是否使 std::list::end 迭代器无效？

> ID：14647007
> 
> 赞同：12
> 
> 时间：2013-02-01T13:07:56.230
> 
> 标签：c++, visual-studio-2012, stl, stdlist

检查此代码：

```
#include "stdafx.h"
#include <list>

int _tmain(int argc, _TCHAR* argv[])
{
    std::list<int> mylist;
    mylist.push_back(1);
    std::list<int>::iterator i = mylist.end();
    if( i == mylist.end() )
        printf( "end is end\n" );

    mylist.clear();
    if( i == mylist.end() )
        printf( "never get here because Microsoft seems to "
                "think the iterator is no longer safe.\n" );

    return 0;
} 
```

现在，根据[cplusplus.com](http://www.cplusplus.com/reference/list/list/clear/)的说法，这应该不是问题，在发布模式下，我认为这很好，不会引起任何问题，但调试变得不可能，因为这只是让我继续下去。任何指针？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T13:37:39.433

其他答案指出，一般来说，您不能依赖容器的结束后迭代器在容器被清除时保持有效。但是，列表的结束迭代器确实应该保持有效：

> C++11 23.3.5.4/3*效果：*仅使迭代器和对已擦除元素的引用无效。

过去的迭代器不引用任何元素，因此不应无效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T13:20:30.467

从 C++11 开始，表 100（序列容器要求）：

> `clear()`[...] 可能会使过去的迭代器无效。

当然`std::list`是一个序列容器模板（23.3.5.1/2）：

> 列表满足容器、可逆容器（在 23.2 中的两个表中给出）、**序列容器**（包括大多数可选序列容器要求（23.2.3）和分配器感知容器）的所有要求（表 99）。例外是未提供的 operator[] 和 at 成员函数。此处仅针对这些表之一中未描述的列表上的**操作或存在附加语义信息的操作提供**描述。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-01T13:13:30.673

这实际上是无效的。迭代器仅在当前状态容器上有效。添加或删除项目后，迭代器将不再有效。

您链接的文章并未说明您在做什么是有效的。他们在清除后得到一个新的迭代器。

它没有出现在发布代码中的原因是因为发现问题的调试被禁用。

# android - 带有线条滚动的Textview

> ID：14647009
> 
> 赞同：1
> 
> 时间：2013-02-01T13:07:59.337
> 
> 标签：android, scroll, textview, lines

我有一个文本视图，当其中有超过 2 行文本时，第二行变成第一行，下面有一行空闲，第一行不应该是可见的。这可能与 android textview 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:12:05.183

尝试这个

```
<TextView
  android:id="@+id/TextView01"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:singleLine="false"
  android:maxLines="3"
  android:scrollbars="vertical"
  android:textColor="@android:color/secondary_text_dark_nodisable"
> 
```

在代码中

```
TextView textView = (TextView)findViewById(R.id.TextView01);
textView.setMovementMethod(ScrollingMovementMethod.getInstance()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:14:31.977

是的可能。创建高度为 2*text_line_height 的滚动视图。并在里面添加TextView。其中 text_light _height 你与 textSize 成比例。所以只需尝试一些组合，如 14sp vs 8o dp 。好消息是 sp/dp 将为所有设备尺寸提供相同的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:51:18.640

是的，看看。

```
<ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="30dp" >

          <TextView
                android:id="@+id/TextView01"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:singleLine="false"
                android:textSize="20dp"
                android:text="kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk"
                />
    </ScrollView> 
```

# mysql - 带有 MySQL-Adapter 的 ActiveRecord：非常慢的 INSERT

> ID：14647010
> 
> 赞同：2
> 
> 时间：2013-02-01T13:08:01.730
> 
> 标签：mysql, ruby-on-rails, rails-activerecord

Rails 2 应用程序已升级到 Rails 3.2.11。一切都运行得很好，除了一件事：

在具有全新硬件的两台不同服务器上的生产模式下，Rails 应用程序中的 MySQL INSERT**非常**慢，通常需要大约 100 毫秒，而直接从 MySQL 控制台查询时只需 1 毫秒。在我的开发机器上（带有 Mac OS X 10.7 的稍老的 iMac），这些查询总是很快的——来自 Rails 应用程序或 MySQL 控制台。

我已经尝试过不同的 /etc/my.cnf 配置（包括 Ubuntu 默认配置）、旧版本的 Rails (3.2.6) 和 mysql gem (0.3.10) 如果执行 INSERT 操作也没有区别MyObject.create 或 ActiveRecord::Base.connection.insert_sql("INSERT into my_objects ... ")

这是生产环境：

*   配备 16GB 内存和 2x1000GB HD 的全新 Intel Xeon 硬件*   Ubuntu 12.04.1 LTS（GNU/Linux 3.2.0-35-generic x86_64）*   mysql Ver 14.14 Distrib 5.5.29，适用于使用 readline 6.2 的 debian-linux-gnu (x86_64)*   导轨 3.2.11*   mysql2 0.3.11 宝石

# jms - 如何启动长时间运行的 Java EE 作业？

> ID：14647013
> 
> 赞同：3
> 
> 时间：2013-02-01T13:08:08.043
> 
> 标签：jms, ejb-3.1, jboss-mdb

我需要启动一个长时间运行的批处理类型的工作，而长期以来我们谈论的工作可能需要几个小时。具有运行此长时间运行作业的逻辑的 ejb 将与 NoSQL 存储通信并加载数据等。

因此，我正在使用 JMS MDB 异步执行此操作。但是，由于每个作业可能需要一个小时或更长时间（假设最多 4 小时），我不希望 MDB 中的 onMessage() 方法等待这么长时间。因此，我正在考虑在 onMessage() MDB 方法中触发异步 ejb，以便在调用批处理 ejb 运行程序后立即将 MDB 返回到池中。

将异步 ejb 方法调用与 MDB 结合起来有意义吗？大多数示例建议使用 1 或其他来实现相同的目标。

如果要从 MDB 调用的 ejb 不是异步的，则 MDB 可能会等待很长时间。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:52:07.387

我会简化一些事情：使用@Schedule 调用@Asynchronous 并忘记JMS。少一件可能出错的事情。

虽然还没有准备好迎接黄金时间，但 JSR 352：批处理应用程序看起来非常适合这类东西。

[https://blogs.oracle.com/arungupta/entry/batch_applications_in_java_ee](https://blogs.oracle.com/arungupta/entry/batch_applications_in_java_ee)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:53:05.467

我认为皮特回答了大部分问题。如果你只使用 mdb 来获得异步行为，你可以尽快触发 @Asynchronous 。

但是，如果您对 JMS 实现可能在可靠性、持久队列、缓慢的消费者策略、作业优先级等方面提供的任何其他功能感兴趣，您应该坚持使用 mdb:s

在 ejb 3.1 中引入 @Asynchronous 的原因之一是在不需要其他 JMS/MDB 特性时提供一种更轻量级的异步处理方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:17:33.003

我想这是一个品味问题。

如果您有来自 JMS 池的线程运行您的作业，或者您有一个异步 ejb 执行此操作，则最终结果将是相同的 - 某个线程将被某个池阻塞。

从 MDB 生成异步 bean 并没有错，因为您可能希望由消息传递接口触发作业，但您可能不想阻塞线程池。此外，考虑到事务通常在一小时之前默认超时，因此如果您出于某种原因执行 MDB 事务，您可能需要考虑在 onMessage 中触发该异步 ejb。

# gcc - 需要为结构体和变量生成汇编代码

> ID：14647017
> 
> 赞同：0
> 
> 时间：2013-02-01T13:08:16.933
> 
> 标签：gcc, assembly, data-structures, disassembly

我需要通过为函数和全局、局部结构、变量生成汇编代码来了解数据结构的一些内部结构。

从这个链接：

```
http://axelio.wordpress.com/2007/07/24/be-careful-with-packed-structures/ 
```

我可以看到结构成员在汇编代码中明确显示了分配的大小。

```
_my:
    .byte   10  <--- c
    .long   20  <--- i
    .byte   30  <--- s.c
    .space 3    <--- 3 bytes of alignment
    .long   40  <--- s.i 
```

如何生成这种程序集。使用

```
# gcc -S  file.c 
```

没有为结构生成上述输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:17:36.600

确实如此。

```
struct S
{
  int x;
  float y;
};

struct S t = {
  .x = 10,
  .y = 1.0
}; 
```

编译`gcc -S strasm.c`

结果`strasm.s`你会看到：

```
 .data
  .type t, @object
  .size t, 8
t:
  .long 10
  .long 1065353216 
```

您所需要的只是显式初始化的对象。

# bison - 规则右侧空的符号

> ID：14647018
> 
> 赞同：13
> 
> 时间：2013-02-01T13:08:17.997
> 
> 标签：bison, yacc, parser-generator

当使用右侧为空的规则编写（“理论”）语法时，总是使用诸如 ε（或 1）之类的符号来明确表示这种空性：

```
A → ε | a A 
```

Yacc 和其他人中的这种语法看起来像

```
a: | 'a' a 
```

或“更糟”

```
a:       { $$ = new_list(); }
 | a 'a' { $$ = $1; $$->append($1); }
 ; 
```

事实上，在“现实世界的语法”（Yacc、Bison 等）中，规则的右侧空部分没有明确标记为空，这让我很困扰：很容易忽略 rhs 为空的事实，或者更糟糕的是：忘记插入`|`并实际使用中间规则操作：

```
a:       { $$ = new_list(); }
   a 'a' { $$ = $1; $$->append($1); }
 ; 
```

1）我不知道有任何工具可以使空 rhs 显式化。有吗？

未来版本的 Bison 可能支持专用符号，在非空 rhs 中使用时会出现错误，并在留下隐式空 rhs 时发出警告。

2）人们认为这有用吗？

3) 你建议的符号是什么？

目前，候选人是`$empty`：

```
a: $empty { $$ = new_list(); }
 | a 'a'  { $$ = $1; $$->append($1); }
 ; 
```

# 编辑

选择的语法是`%empty`：

```
a: %empty { $$ = new_list(); }
 | a 'a'  { $$ = $1; $$->append($1); }
 ; 
```

Indeed`$empty`看起来像一个伪符号，例如`$accept`Bison 为初始规则生成的`$@n`伪符号，或者中间规则操作的伪符号，或者`$eof`是文件结尾的伪符号。但它绝对不是符号，恰恰是符号的缺失。

另一方面，`%`明确表示指令（某种属性/元数据），例如`%pred`.

所以这是语法上的细微差别，但更符合整体语法。归功于 Joel E. Denny。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T20:35:40.653

我通常只使用评论：

```
a: /*epsilon*/ { $$ = new_list(); }
 | a 'a'  { $$ = $1; $$->append($1); }
 ; 
```

无需更改即可正常工作，并使意图清晰......

IMO，这在标题下“如果它没有坏，就不要修理它”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T21:14:42.427

我建议如下：

定义声明：

```
%empty ID 
```

其语义是双重的：

1)`ID`可用作 RHS 中唯一的非规则标记，以指示 RHS 是 epsilon 产生式；和

2) 未标记的 epsilon 产生式`ID`将被视为语法错误。

因此，通过声明：

```
%empty epsilon 
```

`epsilon` *必须*用于标记空的 RHS；没有任何`%empty`声明，现状保持不变，空的 RHS 没有标记（可能有注释除外）。

这将允许喜欢显式标记空 RHS 的用户立即这样做，而不会对现有语法文件或不想以这种方式显式标记空 RHS 的用户产生任何影响。

就个人而言，我可能会使用这样的声明，尽管老实说我很习惯使用注释来标记一个空的 RHS，而且我不相信我曾经不小心创建了一个空的 RHS。所以我不会将它标记为优先功能请求，但我也不会反对它的实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T14:59:38.230

我已经使用了`epsilon`自己，以及`marker`我在大括号中附加了一些代码的空产品的变体。

野牛语法中的保留符号会很有用；我喜欢建议的 $ 前缀，以避免与用户命名的符号发生冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:40:35.783

1）嗯，有明显的

```
e：一个'b'
一个：'一个'
 | 空的
空的：

```

2）是的，这将非常有帮助。

3) `$accept`,`$end`和`$undefined`符号总是被定义，并保留给 Bison 内部使用（例如，它们不能出现在语法中）。Bison`$@n`为中间规则动作生成，但这些也不能在用户的语法中使用。

如果我没记错的话，用户可以在语法中使用的唯一预定义标记是`error`. 那么，您为什么不建议`empty`使用该专用符号呢？这似乎是相当合理的。还是你建议`$error`也介绍？

你考虑过`nothing`吗？我可能更喜欢那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T06:19:01.473

当然，从某种意义上说，如果它包含一个动作，产生式就不是真正的“空”，因为在 Yacc/Bison 中很难不知道动作在幕后被转换为可空的非终结符这一事实。如果你（或书）在课堂上整个学期都在说“epsilon”，也许“%epsilon”比“%empty”更逼真。

我想把它包含在一个更一般的断言机制中：

```
lines : %assert(epsilon)
      | %assert(on WORD) lines line ;

line : WORD '\n' ;

%assert(nullable(lines))
%assert(!nullable(line))
%assert(WORD in FIRST(lines))
/* etc. */ 
```

这个想法是稍微减少在所有启发式方法开始后弄清楚究竟是什么语言 yacc/bison 实际实现的痛苦。其余的将或多或少按照您指定的方式工作，一个警告“空”规则的选项，除非“空”规则包含 %assert(epsilon)。

在优先级方面，我认为当野牛可证明创建了一个不可能接受输入语法的解析器（例如，一个或多个产品永远不会触发）时，报告它的优先级要高得多。至少，我上次看时没有那种能力，但我有一只相当老的野牛:-)。并且它仍然无法用英语解释具有常见左前缀的产生式问题，这些问题因嵌入式动作而不同？除非它变得更好，否则我认为还有很多解释性改进要做，这将比检查无意中的空规则更有帮助。

It would be interesting to see some data on the most common errors students run into (I guess I would not have picked this one as a contender!). That would be kind of an interesting experiment: hack the student copy of bison so it sends every run into a database, use some software to clean it up and analyze the most common misunderstandings.

# php - 用php还是html写dom元素效率更高？

> ID：14647019
> 
> 赞同：0
> 
> 时间：2013-02-01T13:08:35.933
> 
> 标签：php, html, performance, pagespeed

我正在构建一个混合了 php 和 html 的站点，我的静态内容在 html 中，动态/数据库驱动的内容显然与 php 相呼应。然而，我发现自己有时会用 php 添加 html 标签，这不需要在 php 中，我只是想知道写作之间的效率是否有区别......例如......

```
<?php
$result = mysql_query("SOME QUERY") or die(mysql_error());
$num_rows = mysql_num_rows($result);
echo "<ul id=\"someid\">";
while ($row = mysql_fetch_array($result)) {
echo "<li>RAR RAR</li>";
}
echo "</ul>";
echo "<div class=\"clearfix\"></div>";
?> 
```

或者

```
<ul id="someid">
<?php
$result = mysql_query("SOME QUERY") or die(mysql_error());
$num_rows = mysql_num_rows($result);
while ($row = mysql_fetch_array($result)) {
echo "<li>RAR RAR</li>";
}
?>
</ul>
<div class="clearfix"></div> 
```

速度有区别吗？一点都不？我只是感兴趣。干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:15:23.807

一般来说，最好的做法是不要像在两个示例中那样将 HTML 与 PHP 混合使用。你想用它打开文档，`<?php`从不关闭它。回显 HTML 代码，可能使用[heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)语法。

在性能方面，没有任何重要的区别。这就像想知道是否`is_null`更快`===null`- 是的，`===`稍微快一点，但没人关心，因为单个 foreach 循环对性能的影响可能比这大很多倍。

所以别担心！以您觉得**更**容易阅读的方式编写它，因为这会有所不同。无论回声是否比原始输出更快 - 都没有关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:12:03.447

首先——你应该停止使用 MySQL。自 PHP 5.5 起已弃用，不再维护。您有 2 个选择：MySQLi 和 PDO。此外，您应该删除`or die()`，因为您不希望您的客户（甚至更糟 - 潜在的黑客）看到错误消息 :)

不回显 html 内容会更快，因为如果这样做，php 将不得不解析更多内容。不过，差异非常小，可能甚至不明显。

还有另一个问题在讨论这个问题：[Escape HTML to PHP or Use Echo? 哪个更好？](https://stackoverflow.com/questions/505642/escape-html-to-php-or-use-echo-which-is-better)

# asp.net-mvc-4 - ASP.NET MVC 4 架构设计问题

> ID：14647021
> 
> 赞同：0
> 
> 时间：2013-02-01T13:08:38.443
> 
> 标签：asp.net-mvc-4, viewmodel

我必须使用 asp.net mvc 4 重建现有的 asp.net 应用程序，我正面临一个设计问题，因为我对我的 mvc 技能还不够自信。

现有的应用程序是用于订阅保险费。输入屏幕具有用于填充以下信息的控件：

*   客户详情

*   风险细节：风险可以是不同的类型（汽车、卡车），并且控制是动态的。我们在这里继承了一个 RiskBase 类，然后是 RiskCar 和 RiskTruck。

现在，我试图弄清楚这将如何映射到 MVC 架构。

假设我有一个 Contract 业务对象，如下所示：

合同{

*   客户
*   RiskCar theRisk }

我应该为整个页面（视图）创建一个 ViewModel 吗？我很想为风险创建一个部分视图，但是对于每种类型的风险，它必须是不同的视图。我该如何管理？父 View 的 ViewModel 会是什么样子？

# lighttpd - lighttpd 上的 ikiwiki

> ID：14647022
> 
> 赞同：1
> 
> 时间：2013-02-01T13:08:42.053
> 
> 标签：lighttpd, ikiwiki

我正在尝试在运行 lighttpd 的树莓派上安装 ikiwiki。

我可以在我的用户家中创建 wiki，但是一旦我尝试在网络服务器上查看它（地址+“~/username/wikiname”），它就会返回 404。

将 wiki 目录链接到会`/var/www`导致 500 错误。

我做错了什么或错过了什么？

根据评论中的要求，这是我的 lighttpd.conf：

```
server.modules = (
    "mod_access",
    "mod_alias",
    "mod_compress",
    "mod_redirect",
    #"mod_rewrite",
    "mod_fastcgi"
)

server.modules += ( "mod_scgi" )
scgi.server = (
            "/RPC2" =>
            ( "127.0.0.1" =>
              (
               "socket" => "/tmp/rpc.socket",
               "check-local" => "disable",
               "disable-time" => 0,  # don't disable scgi if connection fails
              )
            )
          )
fastcgi.server             = ( ".php" =>
                           ( "localhost" =>
                             (
                            "min-procs" => 1,
                            "max-procs" => 2,
                            "max-load-per-proc" => 4,
                            "socket" => "/tmp/php-fastcgi.socket",
                            "bin-path" => "/usr/bin/php5-cgi"
                             )
                           )
                        )

server.document-root        = "/var/www" 
server.upload-dirs          = ( "/var/cache/lighttpd/uploads" )
server.errorlog             = "/var/log/lighttpd/error.log"
server.pid-file             = "/var/run/lighttpd.pid"
server.username             = "www-data"
server.groupname            = "www-data"
server.port                 = 80
index-file.names            = ( "index.php", "index.html", "index.lighttpd.html" )
url.access-deny             = ( "~", ".inc" )
static-file.exclude-extensions = ( ".php", ".pl", ".fcgi" )

compress.cache-dir          = "/var/cache/lighttpd/compress/"
compress.filetype           = ( "application/javascript", "text/css", "text/html", "text/plain" )

# default listening port for IPv6 falls back to the IPv4 port
include_shell "/usr/share/lighttpd/use-ipv6.pl " + server.port
include_shell "/usr/share/lighttpd/create-mime.assign.pl"
include_shell "/usr/share/lighttpd/include-conf-enabled.pl" 
```

我还执行了此处突出显示的步骤：http: [//ikiwiki.info/tips/dot_cgi/](http://ikiwiki.info/tips/dot_cgi/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:50:23.100

答案在于您发布的配置文件。包含以下内容的行：

```
url.access-deny             = ( "~", ".inc" ) 
```

这阻止了您的 url 请求，请尝试从您的配置文件中删除[波浪号。](http://en.wikipedia.org/wiki/Tilde)

# php - 用2个坐标在php中裁剪图像

> ID：14647031
> 
> 赞同：0
> 
> 时间：2013-02-01T13:09:26.170
> 
> 标签：php

> **可能重复：**
> [在 PHP 中裁剪图像](https://stackoverflow.com/questions/1855996/crop-image-in-php)

当我有左上角和右下角的坐标时如何裁剪图像的一部分？我不能使用 imagecopyresampled 函数，因为它只使用左上角作为起点，并且矩形的末端不是由右下角的坐标自动确定的。:(有人可以帮忙吗？请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:25:54.680

[http://php.net/manual/ru/function.imagecopyresampled.php](http://php.net/manual/ru/function.imagecopyresampled.php)

还有很多例子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T13:44:47.277

首先，[这是](http://www.talkphp.com/advanced-php-programming/1709-cropping-images-using-php.html)一个针对类似问题推荐给我的教程。如果这没有帮助，您的解决方案将被埋在某个地方的 GD 库中。[这](http://php.net/manual/en/book.image.php)是它的API。希望对你有些用处！

正如 Andrej 正确指出的那样，[imagecopyresampled()](http://php.net/manual/ru/function.imagecopyresampled.php)可能是您正在寻找的那个。

# javascript - 用于asp.net的jquery多文件上传

> ID：14647033
> 
> 赞同：-1
> 
> 时间：2013-02-01T13:09:42.947
> 
> 标签：javascript, jquery, asp.net, file-upload, multi-upload

我陷入了一个问题，请在这件事上帮助我......问题是我想要一个 jquery 多文件上传器嵌入到 asp.net 页面和要求 1）不使用 flash 插件 2）它支持 IE 3）不使用html 5 4）一次选择多个文件（当我们发送电子邮件时为gmail）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:59:09.090

用于使用 JQuery 上传多个文件。我使用简单易看的 JQuery Multifile 插件。请参阅此链接[JQuery Multiple File Upload](http://www.fyneworks.com/jquery/multiple-file-upload/)

只包括这个库和 JQuery，它的语法就像

对于 html 输入

```
<input type="file" class="multi"/> 
```

用于 Asp.net 文件上传控制

```
<asp:FileUpload ID="fileup" runat="server" CssClass="multi" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:18:13.773

好吧，您在这里没有提供太多信息，因此很难回答您的问题。但无论如何我都会试一试。

您可以尝试像[Plupload](http://plupload.com/)这样的解决方案：

> 允许您使用 HTML5 Gears、Silverlight、Flash、BrowserPlus 或普通表单上传文件，提供一些独特的功能，例如上传进度、图像大小调整和分块上传。

这里已经有一个关于在[ASP.NET/C# 中使用 Plupload的问题](https://stackoverflow.com/questions/4350686/using-plupload-with-asp-net-c)

Plupload 非常可扩展，您可以通过启用/禁用它必须提供的上传选项来自定义它以满足您自己的需求。

# php - 动态文本字段 html 表单 php

> ID：14647037
> 
> 赞同：0
> 
> 时间：2013-02-01T13:09:54.963
> 
> 标签：php, forms

我想创建一个表单，当用户添加一个数字时。它将根据他们添加的数字显示输入框。然后，当我单击添加按钮时，它将在添加的输入框中显示值。我已经为帖子添加了动态 ID/名称，但没有成功。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title>Tags</title>
</head>

<body>
<p></p>
<form name="add_tags" action="" method="POST" enctype="multipart/form-data">
&nbsp;&nbsp;<input type="text" name="tag_num" size="2" />&nbsp;&nbsp;<input type="submit" name="add_tag" value="Add Tag" style="border:dotted;" />
<p></p>

<?php
$num_x="";
$post=array();
$tag="tag";
if(isset($_POST['add_tag'])){
//Adding values to a tag
$num_x=$_POST['tag_num'];
$tag="tag";
echo "<form action=\"\" method=\"post\" enctype=\"multipart/form-data\">";
for($x=0;$x<$num_x;$x++){
echo $input=$tag.$x."<br>";
$post[]=$input;
echo "add_tag => <input type=\"text\" name=$input  />";

echo "<br>";
}
echo "<input type=\"submit\" name=\"Add\" value=\"Add\" style=\"border:dotted;\"/>";
echo "</form>";
}
if(isset($_POST['Add'])){
$num_x = count($post);
for($x=0;$x<$num_x;$x++){
  $input=$tag.$x;
echo $_POST[$input]."<br>";
}
}
?>

</form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:13:05.730

使用 JQUERY 像下面的代码一样使用，

```
$(document).ready (function () {
    $('#formID').after().html('<input type="textbox" .... />');
}); 
```

# android - rhomobile（或任何框架）与 Android 和 iOs SDK 的限制

> ID：14647039
> 
> 赞同：0
> 
> 时间：2013-02-01T13:09:57.083
> 
> 标签：android, frameworks, rhomobile

我是一名 android 和 ios 开发人员，从 1 年开始，我很累先为一个设备开发，然后再开发另一个设备，我想到了使用框架的想法。我和一个朋友谈论框架，他说他使用 Rothmobile。我为 android 和 ios 开发了一些应用程序，有地图的应用程序，蓝牙管理，wifi 等。我为控制这些功能而实现的功能在每个设备中都是不同的。在这一点上，这是我的问题。我真的可以用 Rhomobile 或其他框架解决这个问题吗？例如，上个月提出了 googlemaps api v2 for android，我用它开发了我的应用程序，框架是否真的很快适应新版本？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:41:22.353

要回答这个问题，您需要了解底层基础设施。另请注意，您可以使用 RhoMobile 混合和本机应用程序构建 Android、Windows Mobile、Windows CE、Windows XP/7、iOS 和 BlackBerry。

RhoMobile 在最近的最新版本 2.2.1.13 中变得更好。因此，您可以尝试使用简单的应用程序并自己检查性能。

如果您的应用程序很大，这可能会非常有趣，因此您不必加倍工作。此外，据我所知 MAP API 还支持 google API。[在这里检查](http://docs.rhomobile.com/faq#how-to-use-native-google-map-view-on-android)

[如有其他问题，您应该在启动板](https://developer.motorolasolutions.com/community/rhomobile-suite/discussions)论坛中询问他们

[RhoMobile 文档](http://docs.rhomobile.com/home)

[常问问题](http://docs.rhomobile.com/architecturefaq)

# security - Orbeon 单点登录到 SAP Netweaver

> ID：14647040
> 
> 赞同：0
> 
> 时间：2013-02-01T13:09:58.710
> 
> 标签：security, single-sign-on, orbeon, sap-basis, netweaver

我们在 SAP Netweaver 7.3 上使用自定义持久层设置了 Orbeon 4.0 beta 3。

考虑到这一点，这一层是在 Netweaver 上创建的：[http](http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/persistence-api) : //wiki.orbeon.com/forms/doc/developer-guide/form-runner/persistence-api存储表单和数据。通过 SAP HTTPDestination 连接到后端。

只要在 web.xml 等中关闭身份验证，此设置就可以工作。

下一步是在考虑 SSO 的情况下启用此功能。以便使用相同的 SSO 票证调用持久层，以启用将用户上下文传递到 SAP 后端。

脚步：

1.  使用适当的 SAP 角色和登录堆栈（票证）在 orbeon web.xml 和 web-j2ee-engine 中启用安全性
2.  在持久层上启用安全性
3.  设置 orbeon 以传递 MYSAPSSO2 cookie（属性 as="xs:string" name="oxf.http.forward-cookies" value="MYSAPSSO2"/>）

查看浏览器窗口，我看到了 JSESSIONID 和 MYSAPSSO2 cookie。这是由我在 Orbeon 前面制作的用于读取 cookie 的 java 过滤器支持的。Orbeon 前面的这个过滤器循环遍历 Servlet 请求的 Cookie[] 数组。

我有 3 条日志记录，引起我注意的是第一个日志记录的 JSESSION 看起来像这样

```
Cookie: JSESSIONID   0iqTevo1vDb_lYFwTa-9CJHymaGMPAHaCk0A_SAPox1Z6aY-RvYBtiK-2U5GLmAh 
```

以下记录确实看起来像这样：

```
Cookie: JSESSIONID   0iqTevo1vDb_lYFwTa-9CJHymaGMPAHaCk0A_SAP 
```

所以第一个问题是为什么要修剪 JSESSIONID？

查看 percistancy 层的日志，此类显示错误：

```
com.sap.engine.services.security.authentication.loginmodule.ticket
Base64 Encoded Ticket String: 0iqTevo1vDb_lYFwTa-9CJHymaGMPAHaCk0A_SAP 
```

在我看来，SAP 可以处理这个较短的 JSESSIONID。

通过浏览器测试：

1.  打开 Orbeon 表单网址
2.  通过显示的登录页面登录 SAP
3.  打开`/rest/test`（持久层的url）看看是否要重新登录

打开时无需登录，登录时`/rest/test`没有错误 `com.sap.engine.services.security.authentication.loginmodule.ticket`

# tsql - 如果表没有主键，则将列设置为主键

> ID：14647043
> 
> 赞同：30
> 
> 时间：2013-02-01T13:10:04.950
> 
> 标签：tsql

我在 db 中有一个列，它有 5 列但没有主键。其中一列名为 myTable_id 并且是整数。

我想检查表是否有主键列。如果不是，则将 myTable_id 设为主键列并将其设为标识列。有没有办法做到这一点？

我试过这个：

```
ALTER TABLE Persons
DROP CONSTRAINT pk_PersonID

ALTER TABLE Persons
ADD PRIMARY KEY (P_Id) 
```

我在 Management Studio 中遇到语法错误。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-01T13:22:36.493

这会检查主键是否存在，如果不存在则创建

```
IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS 
WHERE CONSTRAINT_TYPE = 'PRIMARY KEY' AND TABLE_NAME = 'Persons' 
AND TABLE_SCHEMA ='dbo')
BEGIN
   ALTER TABLE Persons ADD CONSTRAINT pk_PersonID PRIMARY KEY (P_Id)
END
ELSE
BEGIN
   -- Key exists
END 
```

小提琴：[http ://sqlfiddle.com/#!6/e165d/2](http://sqlfiddle.com/#!6/e165d/2)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-01T13:13:33.507

```
ALTER TABLE Persons
ADD CONSTRAINT pk_PersonID PRIMARY KEY (P_Id) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-12T14:04:05.797

不能将`IDENTITY`约束**添加到现有列**，因此如何添加它需要是您最初的想法。有两种选择：

1.  创建一个包含具有标识的主键的新表并删除现有表
2.  创建具有标识的新主键列并删除现有的“P_ID”列

还有第三种方法，这是通过`ALTER TABLE...SWITCH`语句处理非常大的表的更好方法。有关每个列的示例，请参阅向[现有列](https://stackoverflow.com/questions/1049210/adding-an-identity-to-an-existing-column)[添加一个。`IDENTITY`](https://stackoverflow.com/questions/1049210/adding-an-identity-to-an-existing-column)在回答这个问题时，如果表不是太大，我建议运行以下命令：

```
-- Check that the table/column exist and no primary key is already on the table. 
IF COL_LENGTH('PERSONS','P_ID') IS NOT NULL
   AND NOT EXISTS (SELECT 1 FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS 
                   WHERE CONSTRAINT_TYPE = 'PRIMARY KEY' AND TABLE_NAME = 'PERSONS')
                   -- Add table schema to the WHERE clause above e.g. AND TABLE_SCHEMA ='dbo'
BEGIN
    ALTER TABLE PERSONS    
    ADD P_ID_new int IDENTITY(1, 1)
    GO

    ALTER TABLE PERSONS 
    DROP COLUMN P_ID
    GO

    EXEC sp_rename 'PERSONS.P_ID_new', 'P_ID', 'Column'
    GO

    ALTER TABLE PERSONS 
    ADD CONSTRAINT PK_P_ID PRIMARY KEY CLUSTERED (P_ID)
    GO
END 
```

**注意：** 通过显式使用`CONSTRAINT`关键字，主键约束被赋予一个特定的名称，而不是依赖于 SQL Server 来自动分配一个名称。

仅包括`CLUSTERED`在`PRIMARY KEY`搜索特定 P_ID 的平衡和写入量超过通过其他索引对表进行集群的好处时。请参阅将[SQL 创建`IDENTITY`为`PRIMARY KEY`](https://stackoverflow.com/questions/1355349/create-sql-identity-as-primary-key).

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T13:28:54.177

[您可以使用OBJECTPROPERTY](http://msdn.microsoft.com/en-us/library/ms176105.aspx) Transact SQL检查主键是否存在，`'TableHasPrimaryKey'`用于第二个参数。

```
DECLARE @ISHASPRIMARYKEY INT;

SELECT @ISHASPRIMARYKEY = OBJECTPROPERTY(OBJECT_ID('PERSONS'), 'TABLEHASPRIMARYKEY');
IF @ISHASPRIMARYKEY IS NULL 
BEGIN
   -- generate identity column
   ALTER TABLE PERSONS
   DROP COLUMN P_ID;

   ALTER TABLE PERSONS
   ADD P_ID INT IDENTITY(1,1);

   -- add primary key
   ALTER TABLE PERSONS
   ADD CONSTRAINT PK_PERSONID PRIMARY KEY (P_ID);

END; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T13:25:40.897

我不认为你能做到这一点。为了使一列成为标识列，我认为您必须完全删除该表。

# java - 将从文本文件中读取的字符串拆分为二维字符数组

> ID：14647045
> 
> 赞同：0
> 
> 时间：2013-02-01T13:10:21.703
> 
> 标签：java, arrays, iteration

我必须在我的代码中使用 2d 数组，并且在将字符串拆分为 1d 数组并将其存储在我的 2d 数组中的某个位置时遇到了很多麻烦`testCases[][]`。从文本文件中读取字符串后，我正在使用 split 函数来创建字符数组。下面代码中的所有内容对我来说似乎都有意义，但是，当我尝试迭代并打印出 testCases 数组以确保我收集了正确的数据时，它打印出的数据不正确。

我感谢任何帮助解决这个问题，我已经花了几个小时来解决这个问题。

提前谢谢了。

```
//Read number of test cases 
String x = fin.nextLine();
int numTests = Integer.parseInt(x);

//create array
testCases = new String[numTests][100];

//Read actual test cases and store in 2d array
for(int i = 0; i < numTests; i++){
    String testCaseString = fin.nextLine();

    //System.out.println(testCaseString);                   
    testCases[i] = testCaseString.split("(?!^)"); 
    System.out.println(testCases[i][0]);
}
for(int z=0; z < numTests; z++){
    for(int q=0; q  < z; q++){
        System.out.printf("%s ", testCases[z][q]);
    }
    System.out.println();
} 
```

测试用例 - 文本文件位置

```
2
bcb
c 
```

当前控制台输出

```
c 
```

所需的控制台输出

```
b c b
c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:28:47.660

*您在输出数据*时遇到问题。

尝试

```
for(int z=0; z < numTests; z++){
    for(int q=0; q  < testCases[z].length; q++){
        System.out.printf("%s ", testCases[z][q]);
    }
    System.out.println();
} 
```

在内部循环中，您应该迭代 until `testCases[z].length`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:33:00.537

我认为如果您查看这部分代码，您会发现您的循环有问题。

```
for(int z=0; z < numTests; z++){
    for(int q=0; q  < z; q++){
        System.out.printf("%s ", testCases[z][q]);
    }
    System.out.println();
} 
```

q < z 如果 q 和 z 都从 0 开始，那么从开始 q 不小于 z，它等于 z，当循环完成并且 q 递增时，它现在大于 z。也许改变不平等。

# javascript - amCharts - 不在 jQuery 选项卡中显示

> ID：14647046
> 
> 赞同：0
> 
> 时间：2013-02-01T13:10:26.010
> 
> 标签：javascript, jquery, tabs, charts

我搜索了这个问题的解决方案，然后我来到了这个：[http](http://blog.amcharts.com/2012/08/displaying-javascript-charts-in-tabs-or.html) ://blog.amcharts.com/2012/08/displaying-javascript-charts-in-tabs-or.html这似乎很容易。但是当我根据示例应用那段代码时，选项卡停止工作，我无法在它们之间切换。

在 URL 中，根据我单击的选项卡有一些变化，但内容没有切换，选项卡也没有。即使经过两天的搜索，我也无法弄清楚。我的代码结构是这样的：

1.  我得到了带有 html 代码的文件，标签的 JS 代码（就像 amCharts 网站上的示例一样），以及将内容从其他文件加载到标签的功能：

    ```
    $("#zalozka_kalkulace").click(function(){
        $("#detail_ceny_switch_ceny").addClass("open");
        $("#detail_ceny_switch_ceny").removeClass("rucka");
        $("#detail_ceny_switch_ceny").css({ 'height' : '478px', 'margin-bottom' : '-360px', 'margin-right' : '-475px', 'float' : 'left', 'top' : '-360px', 'width' : '871px' });
        if($("#detail_ceny_grafy_kalkulaci").html() == ""){
            $("#detail_ceny_grafy_kalkulaci").load('./safe/kalkulace_grafy_all.php?k_stupen=<? echo $k_stupen; ?>&k_polozka=<? echo $co; ?>',function(){
                $("#detail_ceny_grafy_kalkulaci").removeClass("hidden");
            });
        }else{
            $("#detail_ceny_grafy_kalkulaci").removeClass("hidden");
        }
    }); 
    ```

2.  我得到了另一个文件，其中包含选项卡中显示的所有内容。这意味着应该在其中显示图表的 div，以及图表数据和图表本身的 JS 代码（就像 amCharts 网站上的示例一样）

你知道如何解决这个问题吗？我得到了该示例中的所有内容（我复制了该示例），但只是在两个文件中分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T21:01:09.387

我不认为它会那样工作。通过 jQuery.load 加载的 JavaScript 代码不会被执行。

解决方案是使用两个 AJAX 请求分别加载 HTML 和 JavaScript 部分：用于 HTML 的[jQuery.load](http://api.jquery.com/jQuery.getScript/)和用于 JavaScript 部分的 jQuery.getScript。或者，更好的是，修改加载的脚本以包含 HTML 项。

IE：

**在主脚本中：**

```
$.getScript("./safe/kalkulace_grafy_all.php?k_stupen=<? echo $k_stupen; ?>&k_polozka=<? echo $co; ?>',function(){
  $("#detail_ceny_grafy_kalkulaci").removeClass("hidden");
}); 
```

**在加载的脚本中：**

```
$("#detail_ceny_grafy_kalkulaci").html('<div id="chartdiv"></div>');
var chart = new AmCharts.AmSerialChart();
....
chart.write("chartdiv"); 
```

# c++ - 积分修改值

> ID：14647048
> 
> 赞同：0
> 
> 时间：2013-02-01T13:10:43.250
> 
> 标签：c++, opencv

我有两个点 top_left 和 bottom_right 。为了增加从这些点绘制的矩形所覆盖的区域，我从它们中添加/减去子值。

```
Point  top_left     -= Point( WIDTH_ADD,  HEIGHT_ADD);
Point  bottom_right += Point(WIDTH_ADD , HEIGHT_ADD ); 
```

现在我需要检查它们是否超出当前帧的边界（从相机捕获）。如果他们这样做，我需要检查并修改他们的值。

```
if ( top_left.x < 0 )           top_left.x = 0;
if (  bottom_right.x > frame.cols ) bottom_right.x = frame.cols; 
if ( top_left.y < 0 )               top_left.y = 0;
if( bottom_right.y >  frame.rows )      bottom_right.y = frame.rows; 
```

在 opencv 中有什么花哨的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:13:33.953

我不知道，但即使有，**您的代码可能会更快，**因为您至少跳过了对 OpenCV 的函数调用。

# flex-mobile - 适用于 iOS 和 Android 的 Flex 移动项目上的一个平台的 ANE

> ID：14647054
> 
> 赞同：0
> 
> 时间：2013-02-01T13:11:10.000
> 
> 标签：flex-mobile, air-native-extension

我是 Flex Mobile Projects 和原生扩展的新手。

我有一个很大的疑问......如果我有一个只能在 iOS 或 Android 上运行的 ANE，我可以将它用于 Android 和 iOS 的项目吗？

我的意思是，如果我想做某事，但我只找到了适用于 iOS 的 ANE 和适用于 Android 的另一个 ANE，我可以只创建一个项目并根据设备使用一个或另一个吗？还是我应该创建两个不同的项目？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:33:46.660

您应该能够使用两个不同的 ANE 正确编码，每个平台一个，但它确实取决于 ANE。

大多数都提供了一个 isSupported 标志，以允许您以编程方式确定当前平台是否支持扩展。

```
if (ExtensionA.isSupported)
{
    // Use extension A
}
else if (ExtensionB.isSupported)
{
    // Use extension B
} 
```

还值得注意的是，如果扩展没有正确实现“默认”版本（即在不受支持的平台上使用的版本），这可能会失败。真正归结为 ANE 实施。

# database - 类型表和软件硬编码值

> ID：14647055
> 
> 赞同：2
> 
> 时间：2013-02-01T13:11:22.313
> 
> 标签：database, hardcoded

我有这个数据库模型：

![数据库模型](../Images/d219cf66e78e67c6008b319f8683a4dd.png)

（`TEXT`实际上是`VARCHAR`）

`entity_group_type`在运行时不可修改，但在不久的将来会被开发团队修改以添加更多条目，数次。

现在我需要从中检索`entity`给定的所有条目`entity_group_type`。软件应该如何处理这种查询？我应该在软件中硬编码`entity_group_type` `_id`/吗？`name`如果是这样，那我为什么还需要这张桌子呢？还有什么更好的，硬编码`_id`还是`name`？

或者这是构建我的数据的错误方式？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T21:00:31.747

一次回答一个问题：

**软件中的实体组应该如何引用？对 id 或名称进行硬编码？**

以使您的代码最易读的方式引用实体组。因此，也许您使用名称，或者可能使用看起来像名称但其值为 id 的常量。当您按组类型查找实体时，使用常量可以避免一次连接，但通常这不是什么大问题。

**那为什么我什至需要数据库中的那个表呢？这是构建数据的错误方法吗？**

这是构建数据的一种完全可以接受的方式。最正确的方法取决于您对数据的处理方式，但对于大多数应用程序，您的结构将是正确的。但是，您当然不需要**数据库**中的那个表——您可以在 entity_group 表上设置一个“group_type”字段。以下是优点和缺点：

当前结构的优点：

*   易于添加描述 entity_group_type 的字段。例如，您可能希望使某些组类型只能由管理员用户查看，或禁用，或其他。如果这是未来的可能性，它几乎需要这种数据库结构。
*   能够让您的数据库软件强制执行参照完整性，这意味着数据在 entity_group 和 entity_group_type 表之间保持一致。

在 entity_group 表上添加 group_type 字段的优点：

*   可能是您的代码中更简单的表示。例如，如果您使用 MVC 架构，那么拥有额外的表可能需要代码中的另一个模型对象。这通常不是问题，并且可能具有优势，但有时更简单更好。
*   当您按实体组类型查找实体时，您的 SQL 语句会稍微简单一些，因为涉及的表/连接会少一些。

我认为在大多数情况下，您当前的结构会领先，尽管它确实取决于您如何使用数据。除非您有充分的理由以不同的方式构建数据，否则我会坚持使用您当前的结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T06:28:02.217

我认为您绝对应该`entity_group_type`根据上面的设计图将其存储在数据库中，存储在自己的表中。将该信息存储在 DB 中可以查询该信息，从而为您的设计增加灵活性。

一旦您在数据库中获得了这些信息，您的问题似乎是它是否应该被分解到自己的表中，或者只是作为列存储在`entity_type`表中。我认为您应该将其分解为自己的表，并使用 to 的外键`entity_type`约束`entity_group_type`。

*   拥有`entity_group_type`自己的表允许保留组类型，即使该类型的所有实体组都已从数据库中删除。
*   您可以利用外键来确保`entity_group_type`名称拼写一致。Inserted `entity_group`s 必须满足外键约束，因此必须引用`entity_group_type`具有正确拼写名称的现有名称，或者插入`entity_group_type`将为该 new 设置正确拼写的一个`entity_group_type`。

为您的表使用合成键`entity_group_type`，以减少`entity_group_type`名称外观中令人痛苦的冗余。这使得数据模型更加[DRY](http://programmer.97things.oreilly.com/wiki/index.php/Don%27t_Repeat_Yourself)，并允许更新`entity_group_type`'s name 是对一个表的简单更新。

至于将 存储`entity_group_type`在您的应用程序逻辑中，我建议存储名称，并在需要时查找 id `entity_group_type`。我认为这将使应用程序代码库更具可读性，并且我认为我已经提出了一个令人信服的论点，说明为什么我认为这些相关信息应该在数据库中具有表示形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:22:55.500

鉴于`name`您`entity_group_type`在运行时知道 s ，那么找到所有`entity_group`s的正确方法`entity_group_type.name`，您将使用连接：

```
SELECT entity_group._id, entity_group.name, entity_group_type.name AS groupTypeName
FROM entity_group
JOIN entity_group_type ON entity_group.id_type = entity_group_type._id
WHERE entity_group_type.name = 'someGroupName'; 
```

这将导致`entity_group`.`given entity_group_type name`

是的，这是一种存储此类信息的好方法，或者至少是可能的方法。试想一下，最终`entity_group_type`会获得一个新属性，例如`disabled`. 然后仍然很容易找到类型`entity_group`中（不是）的所有 s `disabled`。

# matlab - 如何将矩阵的每一行插入到 Matlab 中的单元格中？

> ID：14647056
> 
> 赞同：3
> 
> 时间：2013-02-01T13:11:22.560
> 
> 标签：matlab, cell

假设 A = [1 2 3;4 5 6;7 8 9] 我想将其转换为 B = [{[1,2,3]};{[4,5,6]};{[7,8 ,9]}] 我怎样才能以简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T13:22:30.383

你可以使用[`mat2cell`](http://www.mathworks.com/help/matlab/ref/mat2cell.html)函数。

从文档中：

> C = mat2cell(A,dim1Dist,...,dimNDist) 将数组 A 划分为元胞数组 C 中的较小数组。向量 dim1Dist,...dimNDist 指定如何划分 A 的行、列和（如果适用）更高维度.

![mat2cell](../Images/ec4e6581b5c634a0653b52d8c89270c3.png)

你可以这样做：

```
A = [1 2 3; 4 5 6; 7 8 9];
B = mat2cell(A, [1 1 1], 3); 
```

会给你：

```
B={[1 2 3];[4 5 6];[7 8 9]} 
```

* * *

文档还说：

> C = mat2cell(A,rowDist) 将数组 A 划分为一个 n×1 元胞数组 C，其中 n == numel(rowDist)。

因此，如果您总是要将矩阵拆分为行而不是列，则可以在没有第二个参数的情况下执行此操作。

```
B = mat2cell(A, [1 1 1]); 
```

* * *

更好的通用方法是：

```
mat2cell(A, ones(1, size(A, 1)), size(A, 2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:16:18.877

您不能拥有像 B 暗示的符号那样的“单元矩阵”。单元格数组允许您在单个单元格中存储“任何数据类型”。您不能将单元格作为数据类型存储在数组中。

所以让我们假设你的意思是说你想要`B = {[1,2,3], [4,5,6], [7,8,9]};`

如果是这样的话，那么

```
B = cell(1,3);
for ii=1:3
  B(ii) = {A(ii, :)};
end 
```

应该做的伎俩。

注意 - 根据哈迪的评论编辑。

# java - 如何在 grails 中获取 ResourceBundle？

> ID：14647058
> 
> 赞同：0
> 
> 时间：2013-02-01T13:11:23.060
> 
> 标签：java, grails, resourcebundle

我放了一些我放入的属性文件（例如resources.propperties）

```
src/main/resources/com/ebiznext/agregation/service/payment/sips 
```

目录，我试图在我的代码中检索它们，如下所示：

```
ResourceBundle resource = ResourceBundle.getBundle("com.ebiznext.aggregation.service.paiement.sips.resources", Locale.getDefault()) 
```

但我得到了例外：

```
Caused by MissingResourceException: Can't find bundle for base name com.ebiznext.aggregation.service.paiement.sips.resources, locale fr_FR
->> 1499 | throwMissingResourceException in java.util.ResourceBundle
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   1322 | getBundleImpl    in     ''
|   1028 | getBundle . . .  in     '' 
```

所以我的问题是在 Grails 中检索资源包的正确方法是什么？

# jquery - Firefox中的jquery fileuploader发送查询太长

> ID：14647059
> 
> 赞同：0
> 
> 时间：2013-02-01T13:11:25.963
> 
> 标签：jquery, firefox, jquery-file-upload

我使用[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)进行 ajax 上传。如上所述，文件<4GB必须没有问题

我在 localhost 上进行的所有测试，因此没有网络传输延迟

10mb 文件立即上传，与 100mb 和 200mb 文件一样好（在 FF 中）

300mb+ 文件永远不会上传！从未使用服务器端处理程序上的断点

这不是服务器端的问题，因为在 Opera 和 Chrome 中都没有问题，我测试了 2 个不同的处理程序（PHP 和 node.js）

是否可以使用文件上传配置做一些事情？（不使用分块上传）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:09:05.387

火狐更新后问题得到解决。我仍然不知道是什么原因，但看起来它是一个浏览器错误

# iphone - NSdateFormatter 将指定日期设置为一个月前

> ID：14647061
> 
> 赞同：-2
> 
> 时间：2013-02-01T13:11:33.040
> 
> 标签：iphone, ios, objective-c, nsdate, nsdateformatter

我正在使用 NSDateFormatter，如下所示：

```
- (void)calendarMonthView:(TKCalendarMonthView *)monthView didSelectDate:(NSDate *)d {
NSLog(@"calendarMonthView didSelectDate %@",d);
NSDate *tempDate = [[NSDate alloc]init];// = d;
NSString *selectedDate = @"2013-02-01 00:00:00 +0000";
//NSString *selectedDate = @"2013-02-04";
NSDateFormatter *dateformatter = [[NSDateFormatter alloc]init];
[dateformatter setDateFormat:@"yyyy-MM-DD hh:mm:ss ZZZZ"];
tempDate = [dateformatter dateFromString:selectedDate];
//if([tempDate compare:d])
if([tempDate isEqualToDate:d])
{
  flagtoCheckSelectedCalendarDate = 1;
}
if(flagtoCheckSelectedCalendarDate == 1)
{
    [self viewDidLoad];
}
if(flagtoCheckSelectedCalendarDate == 2)
{
    [self viewDidLoad];
}
//[table reloadData];

} 
```

为什么这个输出我的日期是错误的？我要去哪里错了？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:15:12.667

> [日期格式化程序 setDateFormat:@"yyyy-MM-DD hh:mm:ss ZZZZ"];

* * *

格式化程序字符串中的 DD 错误。大写D是一年中的天数。你想要d。

> d:1~31 (0 填充的日期)
> 
> D:1~366 (0 填充的一年中的一天)

# c# - 如何将 XML 字符串读入 List 或任何集合

> ID：14647063
> 
> 赞同：1
> 
> 时间：2013-02-01T13:11:39.037
> 
> 标签：c#, xml, linq, collections

我有类似的字符串

```
xmlDataEntAddAttr = @"<ADDITIONAL INFO>
                            <Host> Test Host Name </Host>
                            <IP Address>Test IP Address</IP Address>
                            <Domain>Test Domain</Domain>
                            <Host Method>Test Host Method</Host Method>
                            <Flag>Test Flag</Flag>
                      </ADDITIONAL INFO>"; 
```

我如何将其读入带有标签名称和值的字符串列表或任何集合中。请不要像内部标签一样`<Host></Host>`可以是任何值，只有不变的是这里的根本意思`<ADDITIONAL INFO></ADDITIONAL INFO>`。

请建议任何解析方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:13:26.740

使用`XDocument`（在`System.Xml.Linq`命名空间中）和 Linq to Xml。

```
XDocument xDocument = XDocument.Parse(xmlDataEntAddAttr);
Dictionary<string, string> result = xDocument.Root.Elements().ToDictionary(element => element.Name.LocalName, element => element.Value); 
```

但是，您的字符串不是有效的 XML。XML 元素名称中不能有空格。您的字符串的有效版本是：

```
xmlDataEntAddAttr = @"<ADDITIONAL_INFO>
                            <Host> Test Host Name </Host>
                            <IP_Address>Test IP Address</IP_Address>
                            <Domain>Test Domain</Domain>
                            <Host_Method>Test Host Method</Host_Method>
                            <Flag>Test Flag</Flag>
                      </ADDITIONAL_INFO>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:18:19.747

如果我的 xml 结构如下：

```
<nodes>
    <node id="123">
        <text>text goes here</text>
    </node>
</nodes> 
```

然后我可以这样做：

```
XDocument xDoc;
using(StringReader sr = new StringReader("thexml"))
{
    xDoc = XDocument.Load(sr);
}
myDictionary = xDoc.Descendants("node").ToDictionary(x => x.Attribute("id").Value, x =>         x.Descendants("text").First().Value); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T13:35:00.957

请注意，您需要删除附加信息、IP 地址和主机方法中的空格

```
 var xmlDataEntAddAttr = @"<?xml version=""1.0""?>
                        <ADDITIONALINFO>
                        <Host> Test Host Name </Host>
                        <IPAddress>Test IP Address</IPAddress>
                        <Domain>Test Domain</Domain>
                        <HostMethod>Test Host Method</HostMethod>
                        <Flag>Test Flag</Flag>
                  </ADDITIONALINFO>";
        var xDocument = XDocument.Parse(xmlDataEntAddAttr);
        if (xDocument.Root != null)
        {
            var coll = xDocument.Root.Elements().Select(x => new {Name = x.Name, Value = x.Value});
            foreach (var item in coll)
            {
              Console.WriteLine("Name: {0}\tValue: {1}", item.Name, item.Value);
            }
        }
        Console.ReadLine(); 
```

# jquery - 创建 jQuery 的副本

> ID：14647067
> 
> 赞同：1
> 
> 时间：2013-02-01T13:11:48.770
> 
> 标签：jquery

哪种方法是从 jQuery 创建副本的正确方法？

```
var copyjq = new jQuery; 
```

`var copyjq`要不然是啥？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:14:28.740

使用该[`sub`方法](http://api.jquery.com/jQuery.sub/)创建 jQuery 的副本：

```
var copyjq= jQuery.sub(); 
```

注意：对于 1.9 及更高版本，该方法已移至插件。

如果您只想要 jQuery 的另一个名称，而不是单独的副本，您可以复制参考：

```
var copyjq = jQuery; 
```

您还可以在函数表达式中隔离名称：

```
(function(copyjq){
  ...
}(jQuery)); 
```

# java - 在 appengine-web.xml 中使用静态文件声明时，Javascript 文件作为 HTML 文件提供

> ID：14647068
> 
> 赞同：1
> 
> 时间：2013-02-01T13:11:49.487
> 
> 标签：java, google-app-engine, jsp

我在**appengine-web.xml**中使用以下内容在 appengine 中启用了静态图像文件的缓存：

```
<static-files>
<include path="/css/images/**.gif" expiration="1d" />
    <include path="/css/images/**.png" expiration="1d" />
    <include path="/css/images/wind_pointers/*.png" expiration="7d" />
    <include path="/css/images/**.jpg" expiration="1d" />
    <include path="/errors/*" />
</static-files> 
```

这工作得很好，直到我发现一个奇怪的副作用：有时，appengine 提供了一个包含我的 HTML 页面内容的 JavaScript 文件，所以结果是我收到大量 JavaScript 错误，因为 JavaScript 解释器被输入的是 HTML 而不是 JS ：

![由 HTML 内容提供的 .js 文件引起的 JavaScript 错误](../Images/5d1df7143f8fab29ef9d437037539859.png)

现在，如果我简单地注释掉我上面提到的**appengine-web.xml中的****静态文件**部分，一切正常：.js 文件提供了它们自己的内容，我没有问题：

 **![Javascript 文件正确提供。](../Images/003c4f96d7ed94e43fed00b48c0249a7.png)

这对我来说似乎很奇怪。.js 文件甚至不在该**静态文件**部分中指定的目录中。我的**appengine-web.xml**中是否有语法错误导致一些奇怪的错误出现？

幸运的是，通过简单地注释掉**appengine-web.xml中的****静态文件**部分，我能够在部署的应用程序和我的本地开发服务器上轻松可靠地重现这一点。它发生在 Chrome 和 IE 中。我正在使用 Java 应用引擎。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:00:56.950

我设法弄清楚发生了什么：

我的**web.xml**中有一个过滤器，其目的是在用户请求页面但未登录时返回一个特殊的 HTML 页面。但是，我发现此过滤器将自身应用于浏览器的请求也会生成**.js**文件，因此我的过滤器将返回 HTML 文件而不是 .js 文件。

奇怪的是，当我没有问题时**部分已从**appengine-web.xml**中删除。如果没有该部分，AppEngine 将恢复为默认行为，根据文档将所有文件视为静态文件，在这种情况下，我希望问题总是会发生。此外，有时**.js**会返回，有时 HTML 会返回 - 这似乎是某处的竞争条件。这对我来说仍然是个谜。**

 **无论如何，我现在确保过滤器仅应用于站点 HTML 页面的请求，这解决了问题。谢谢你们的评论。******

# android - SQLite 数据库允许空值

> ID：14647071
> 
> 赞同：0
> 
> 时间：2013-02-01T13:12:01.063
> 
> 标签：android, sqlite

我使用以下代码在我的 android 应用程序中创建数据库。实际上，需要将数据从另一个表复制到该表。它只复制了 10868 条记录，但原始表包含 24000 条记录。

我查了一下，最后发现在 10869 记录处，其中一个字段有一个空值。但是我在创建表的过程中没有指定“not null”。但是这个表不能接受空值。

```
private static final String SCRIPT_CREATE_DATABASE1 =
          "create table " + MYDATABASE_TABLE2 + " ("
          + KEY_ID + " integer primary key autoincrement, "
          + KEY_RCODE + " text, "
          + KEY_RNAME + " text);"; 
```

还有其他方法可以让列接受空值吗？我真的很困惑

编辑：安卓代码

```
try
    {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://moberp.svsugar.com:8080/androidservlt/ryotmas");
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();

    } catch (Exception e) {
    Toast.makeText(getBaseContext(), "Buffer Error"+"Error converting result"+e.toString(), Toast.LENGTH_LONG).show();
    }

    try {
        jObj = new JSONObject(json);
        contacts = jObj.getJSONArray("get");
        for(int i = 0; i < contacts.length(); i++){
        JSONObject c = contacts.getJSONObject(i);
            rcode = c.getString("rcode");
            rname = c.getString("rname");
            radapter.insert(rcode, rname);
        }
        Toast.makeText(getBaseContext(), " Ryot BackUp completed", Toast.LENGTH_SHORT).show();

    } catch (JSONException e) {
        Toast.makeText(getBaseContext(), "Error"+e.toString(), Toast.LENGTH_LONG).show();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:28:09.400

您没有检查从 JSON 对象中检索的值是否确实具有值。

如果它们没有可以转换为您正在检索的类型的值，它们将抛出 JSONException。

您可以轻松地进行此检查`IsNUll`

```
JSONObject c = contacts.getJSONObject(i);
            rcode = c.getString("rcode");

            if(!c.isNull("rname"))
            {
              rname = c.getString("rname");
            }
            else
            {
              rname = ""; //or rname = null, whatever you want
            }
            radapter.insert(rcode, rname);
        } 
```

# java - 如何整理 TreeMap ?

> ID：14647074
> 
> 赞同：6
> 
> 时间：2013-02-01T13:12:08.897
> 
> 标签：java, treemap

我有一张地图：`TreeMap<String, Integer> m = new TreeMap<>();`我有一个完整的字母表和值，它显示了在我的文本中找到每个字母的次数。

我想按降序对该地图进行排序；即出现频率最高的字母在第一行，输出的最后一行表示出现频率最低的字母。**如果两个字母的频率相同，那么字母表中排在第一位的字母必须首先出现。**怎么做？

我试过比较器：

```
public int compare(String a, String b) {
        if (base.get(a) >= base.get(b) && a.compareToIgnoreCase(b) < 0) {
            return -1;
        } else {
            return 1;
        }
    } 
```

但仍然不是，输出是：

```
D 3
E 3
A 2
S 5 
```

伙计们......之前发现了这个，这根本没有帮助。好的输出应该是：

```
S 5
D 3
E 3
A 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:37:23.180

您的比较器看起来不正确 - 这应该会更好：

```
public int compare(String a, String b) {
    if (base.get(a) > base.get(b)) {
        return -1;
    } else if (base.get(a) < base.get(b)) {
        return 1;
    } else {
        int stringCompare = a.compareToIgnoreCase(b);
        return stringCompare == 0 ? 1 : stringCompare; // returning 0 would merge keys
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T13:41:12.610

由于自然排序与您的排序愿望没有任何共同之处：

```
List<Map.Entry<String, Integer>> entries = new ArrayList<>(m.entrieSet());

Collections.sort(entries, new Comparator<Map.Entry<String, Integer>>() {
    @Override
    public int compare(Map.Entry<String, Integer >a, Map.Entry<String, Integer>b) {
        if (a.getValue() < b.getValue()) { // Descending values
            return 1;
        } else if (a.getValue() > b.getValue()) {
            return -1;
        }
        return -a.getKey().compareTo(b.getKey()); // Descending keys
    }    
}); 
```

# wpf - 如何在 MVVM 场景中将控件的命令绑定到子视图模型命令？

> ID：14647077
> 
> 赞同：2
> 
> 时间：2013-02-01T13:12:19.630
> 
> 标签：wpf, mvvm

我在 WPF 中有一个基于视图模型的窗口。视图模型包括一个可以在运行时切换的子视图模型。每个子视图模型都有自己的命令。父视图包含一个带有按钮的功能区，这些按钮需要绑定到当前子视图模型命令。要切换视图，我在使用数据模板的父视图中使用内容控件。每个可能的子视图都是绑定到适当视图模型的用户控件（该位有效）。

```
 <!-- Switchable area -->
    <ContentControl Content="{Binding ChildViewModel}">
        <ContentControl.Resources>
            <DataTemplate DataType="{x:Type vm:VersionsViewModel}">
                <embeddable:VersionsView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:LockListViewModel}">
                <embeddable:LockListView />
            </DataTemplate>
        </ContentControl.Resources>
    </ContentControl> 
```

例如，我的一个子视图模型有一个刷新命令。我希望它出现在功能区按钮的主视图中。我尝试将绑定设置为以下 XAML，但它从未绑定，因此不会调用该命令。我究竟做错了什么？

```
<telerik:RadRibbonButton Size="Large"
                         Text="Refresh"
                         LargeImage="..\Images\Ribbon\32x32\Refresh.png"
                         Command="{Binding ChildView.RefreshCommand}" 
                         telerik:KeyTipService.AccessText="R"/> 
```

在主视图的其他地方，我绑定了来自子视图模型的数据并且工作正常，所以我真的很困惑！例如，这是我用来获取窗口标题的绑定。

```
Title="{Binding ChildViewModel.Title,FallbackValue='My System'}" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:12:53.997

```
<telerik:RadRibbonButton Size="Large"
                         Text="Refresh"
                         LargeImage="..\Images\Ribbon\32x32\Refresh.png"
                         Command="{Binding ChildViewModel.RefreshCommand}" 
                         telerik:KeyTipService.AccessText="R"/> 
```

你没有绑定到视图模型

# python - Python IRC bot 读取从 IRC 服务器的命令返回的数据

> ID：14647078
> 
> 赞同：0
> 
> 时间：2013-02-01T13:12:22.607
> 
> 标签：python, bots, irc, names

我有一个与[PHP IRC bot 类似的问题，它读取从 IRC 服务器的命令返回的数据](https://stackoverflow.com/questions/13031760/php-irc-bot-that-reads-data-returned-from-a-command-of-the-irc-server)

我正在使用在网络上广泛使用的用 Python 编写的 IRC 机器人。

**我必须向 IRC 服务器发送一个“ NAMES** ”命令，然后它返回一个当前在机器人所在频道中的用户名列表。但我似乎无法捕捉到该列表，也没有从服务器 - 机器人接收并打印其他用户发送的消息，但不是他自己也不是命令输出。

要打印我正在使用以下内容的数据：

```
while True:
    data = irc.recv ( 4096 )
    (...)
    print data 
```

要发送 NAMES 命令，我尝试了以下操作：

```
irc.send ( 'NAMES #channel\r\n' ) 
```

和：

```
irc.send ( 'PRIVMSG #channel :/names\r\n' ) 
```

pastebin dot com 上的完整代码：http: [//pastebin.com/xjymEjPu](http://pastebin.com/xjymEjPu)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:42:11.117

我只能在脚本输出中看到 NAMES 列表

```
:botty!~botty@durrrrrrrrr JOIN :#channel
:retribution.sg.as.irchighway.net 353 botty = #channel :botty IlPalazzo-ojiisan @Nibelung 
:retribution.sg.as.irchighway.net 366 botty #channel :End of /NAMES list.
:retribution.sg.as.irchighway.net 353 botty = #channel :botty IlPalazzo-ojiisan @Nibelung 
:retribution.sg.as.irchighway.net 366 botty #channel :End of /NAMES list. 
```

不过，这不是弹出的最后一件事。也许你错过了？它位于一组全球通知之上，这些通知是最后返回的行。

# excel - 排序问题

> ID：14647079
> 
> 赞同：-3
> 
> 时间：2013-02-01T13:12:26.117
> 
> 标签：excel, excel-2007, export-to-excel, excel-2010

我在excel 2007中有这样的情况：

```
.15X.04-1.25X.625-SD+str

.15X.04-1.25X1.25-SD

.15X.04-1.5X1.25-SD

.15X.04-1.75X1.75-SC

.15X.04-1X.625-SD+str

.15X.04-2.25X2.25-SC

.15X.04-2.5X2.5-SC

.15X.04-2.75X2.75-SC

.15X.04-2X1.75-SC

.15X.04-3X3-SC

.15X.06-1.25X.625-SD+str

.
.
.
. 
```

我需要按每个单元格中的部分内容对所有这些行进行排序，例如： `-1X; -1.25X; -1.5X; -1.75X`等等。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:51:41.153

使用此公式插入一个新列：`=MID(A1;8;500)`，假设您的原始列是 A，并将此公式复制到所有*列*，然后按此新列排序。该公式将仅复制您要排序的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:19:43.920

最好从文本中提取值。正如您在评论中指出的那样，这是 between`-`和 second `X`，因此您可以使用此公式将其提取并将其转换为数字：

```
=VALUE(MID(A1,SEARCH("-",A1)+1,SEARCH("X",SUBSTITUTE(A1,"X","_",1))+1-SEARCH("-",A1) -2))

```

请注意，如果您使用的是英文系统（使用小数点分隔符），这将返回您的值`.`。如果您使用的是另一个分隔符的系统，则需要使用以下公式：

```
=VALUE(SUBSTITUTE(MID(A1,SEARCH("-",A1)+1,SEARCH("X",SUBSTITUTE(A1,"X","_",1))+1-SEARCH("-", A1)-2),".",","))

```

（最后一个`","`必须替换为您当地的小数分隔符。）

将此公式应用于整个列，然后对该列进行排序。

# asp.net-mvc - MVC 4 ViewModel 不显眼的验证不显示

> ID：14647084
> 
> 赞同：0
> 
> 时间：2013-02-01T13:12:50.937
> 
> 标签：asp.net-mvc

我有一个 ViewModel，用于将数据 POST 回服务器。

```
[MetadataType(typeof(CompanyAdminViewModel))]
public class CompanyAdminViewModel
{
    public Company Company { get; set; }
    public RegisterModel User { get; set; }

    public CompanyAdminViewModel()
    {

    }
} 
```

公司实体有子实体：Company.CompanyContacts

```
public class CompanyContact
{
    public int CompanyContactId { get; set; }
    public int JobTitleId { get; set; }
    public int CompanyId { get; set; }
    public string Title { get; set; }
    [Required]
    public string FirstName { get; set; }
    [Required]
    public string LastName { get; set; }
    public Nullable<DateTime> BirthDate { get; set; }
    public string Gender { get; set; }
    [Required]
    public string Phone { get; set; }
    public string Fax { get; set; }
    public string Extension { get; set; }
    [Required]
    public string Email { get; set; }
    public Nullable<DateTime> HireDate { get; set; }
    public virtual Company Company { get; set; }

    public virtual JobTitle JobTitle { get; set; }

    public bool IsActive { get; set; }
} 
```

当我查看 pagesource 时，为模型属性正确呈现了 data-* 属性。

```
<div class="editor-label">
                <label for="FirstName">FirstName</label>
            </div>
            <div class="editor-field">
                <input class="text-box single-line" data-val="true" data-val-required="The FirstName field is required." id="FirstName" name="FirstName" type="text" value="" />
                <span class="field-validation-valid" data-valmsg-for="FirstName" data-valmsg-replace="true"></span>
            </div>

            <div class="editor-label">
                <label for="LastName">LastName</label>
            </div>
            <div class="editor-field">
                <input class="text-box single-line" data-val="true" data-val-required="The LastName field is required." id="LastName" name="LastName" type="text" value="" />
                <span class="field-validation-valid" data-valmsg-for="LastName" data-valmsg-replace="true"></span>
            </div> 
```

当我发布表单时，只有密码属性显示验证错误。当我检查 Model.IsValid 时，所有失败的验证都在集合中......

那么，为什么在尝试 POST 后表单上只显示一些验证错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:00:21.487

如果您添加了有关表单的所有内容，这将很有用；）

不过我的问题是，它提交了吗？您在许多字段上都有所需的过滤器，但没有消息（因此它可能不会显示错误，但不会提交）。

你有没有试过这些：

```
@Html.ValidationSummary() 
```

并且（对于您要验证的字段：

```
@Html.ValidationMessageFor(m => m.FirstName) 
```

# java - 字符串的 Java 正则表达式模式

> ID：14647087
> 
> 赞同：1
> 
> 时间：2013-02-01T13:12:59.270
> 
> 标签：java, regex

我是新手`regex`。我正在寻找与以下模式匹配的正则表达式并提取字符串，

```
 key1=test1
 key2="test1" // which will extract test1 stripping quotes
 key3=New test
 key4=New" "test // which will extract New" "test - as it is if the quotes come in between 
```

我尝试使用`\\s*(\\S+)\\s*=\\s*(\\S+*+)`，但不确定如何包含引号（如果存在）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:16:34.697

一个简单的解决方案是将其加载为[Properties](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)，这将完全执行您正在寻找的解析。否则，只需[读取每一行](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)并在第一个“=”处[拆分字符串。](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:19:45.393

这是一个没有正则表达式的解决方案，以避免嵌套引号问题：

```
String extractValue(String input) {
  // check if '=' is present here...
  String[] pair = input.split("=", 2);
  String value = pair[1];
  if (value.startsWith("\"") && value.endsWith("\"")) {
      return value.substring(1, value.length() - 1);
  }
  return value;
} 
```

基本上这不是没有正则表达式，因为使用了`split()`，但它没有按照您计划使用它的方式使用正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:23:41.780

您可以使用`^([^=]+)=("([^"]*)"|([^"].*))$`，但答案将显示在第三组或第四组中，具体取决于值是否被引用，因此您需要同时检查两者并拉取不为空的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:25:17.287

对于正则表达式，如果您想包含`"`在您的正则表达式中，只需使用`\\"`. 无论您要达到什么目标，首先在[http://www.regexpal.com/上直接测试](http://www.regexpal.com/)

# rubygems - 查找安装 ruby gems 的时间

> ID：14647091
> 
> 赞同：1
> 
> 时间：2013-02-01T13:13:24.747
> 
> 标签：rubygems

在最近对[http://rubygems.org/](http://rubygems.org/)进行黑客攻击之后，我想检查安装在我的系统上的 gem 的安装时间；这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:45:06.127

最后的“gem help install”将显示您机器上的默认安装目录。如果您一直使用默认值，您应该能够转到该目录的“gems”子目录并找到您所有的 gem。此外，同级还有一个“缓存”目录。

还有一件事。然后，您可以对任何此类 gem 运行“stat”命令。

# ssrs-2008 - 导出 PDF 并禁止分页符

> ID：14647100
> 
> 赞同：0
> 
> 时间：2013-02-01T13:13:50.737
> 
> 标签：ssrs-2008, report, reporting-services

当我将报告导出为 pdf 时，出现奇怪的分页符。如果一个冗长的报告发生在我身上，如果表格不适合页面的剩余空间，它会自动将我传递到下面的页面，从而创建空白空间。

已经启用了**Keep Together**属性，**交互式大小**为 0，如果可能的话，我在 tablix 属性中未选中**keep together on one page 。**

但是我认为问题不在于表格，因为在此之前，我有一个带有标题的文本框，并且位于表格和使分页符的文本框之间。

我已经将文本框和表格放在了一个矩形内，但仍然有这个问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:34:56.927

问：负责分页问题的表格/文本框是否在子报表中？

如果是这样，那么这就是您的问题（除非您调用该表将始终足够短以保持在单页中）。

您必须了解：子报表是破坏的原因，表格不会拆分，因为它是由必须保持一体的子报表呈现的。

选项包括：

1.  保留子报告 - 但请确保表格最大长度仍适合子报告所在的页面。

2.  从子报表中取出表格并将其直接放在主报表中 - 这样当表格太长而无法留在单页中时，它将分成两页。

# javascript - $(document).click(): 不触发警报

> ID：14647104
> 
> 赞同：0
> 
> 时间：2013-02-01T13:14:01.650
> 
> 标签：javascript, jquery

可能很简单，但我可以找到一个合理的解释

```
$(document).ready(function(){
    $(document).click(function () {
        alert('ok');
    });
}); 
```

不触发警报（）；我正在使用最新的谷歌浏览器。浏览器是否会像 ajax 回调函数那样对此设置一些限制？

**编辑1：**代码在`$(document).ready();`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:19:04.867

我想你忘了用

```
$(function(){
   //your code here 
}); 
```

**或者**

```
$(document).ready(function(){
    //your code here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:29:09.900

奇怪但真实，这适用于 Firefox，但不适用于 chrome。试试这个，也适用于最新版本的 chrome 和 firefox：

```
$(document.body).click(function () {
     alert('ok');
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T13:23:25.993

尝试

```
$().ready(function() {   
    alert('ok');
}); 
```

# delphi - Why do I get "Constant expression violates subrange bounds" for HKEY_-constants in Delphi XE2 64bit?

> ID：14647108
> 
> 赞同：10
> 
> 时间：2013-02-01T13:14:08.110
> 
> 标签：delphi, winapi, 64-bit, delphi-xe2

When I compile the following code in Delphi XE2 for the target platform 64-bit Windows ...

```
function HKeyToString(_HKey: HKey): string;
begin
  case _HKey of
    HKEY_CLASSES_ROOT: result := 'HKEY_CLASSES_ROOT'; // do not translate
    HKEY_CURRENT_USER: result := 'HKEY_CURRENT_USER'; // do not translate
    HKEY_LOCAL_MACHINE: result := 'HKEY_LOCAL_MACHINE'; // do not translate
    HKEY_USERS: result := 'HKEY_USERS'; // do not translate
    HKEY_PERFORMANCE_DATA: result := 'HKEY_PERFORMANCE_DATA'; // do not translate
    HKEY_CURRENT_CONFIG: result := 'HKEY_CURRENT_CONFIG'; // do not translate
    HKEY_DYN_DATA: result := 'HKEY_DYN_DATA'; // do not translate
  else
    Result := Format(_('unknown Registry Root Key %x'), [_HKey]);
  end;
end; 
```

... I get warnings for each of the HKEY_-Constants: "W1012 Constant expression violates subrange bounds"

I checked the declarations in Winapi.Windows (with Ctrl+Leftclick on the identifiers):

```
type
  HKEY = type UINT_PTR;
{...}
const
  HKEY_CLASSES_ROOT     = HKEY(Integer($80000000)); 
```

These look fine to me. Why does the compiler still think there is a problem?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T13:39:30.913

On the 64 bit compiler the actual value of `HKEY_CLASSES_ROOT` is:

```
FFFFFFFF80000000 
```

That's because the cast to `Integer` makes `80000000` into a negative number. And then the conversion to unsigned leads to `FFFFFFFF80000000`. Note that this value is correct. The declaration in the windows header file is:

```
#define HKEY_CLASSES_ROOT (( HKEY ) (ULONG_PTR)((LONG)0x80000000) ) 
```

and when you include the header file and inspect the value of `HKEY_CLASSES_ROOT` in a C++ program, it is the exact same value as for the Delphi declaration.

And then we can solve the puzzle from the Delphi documentation which states that the [selectors in a case statement can only be](http://docwiki.embarcadero.com/RADStudio/XE3/en/Declarations_and_Statements#Case_Statements):

> any expression of an ordinal type smaller than 32 bits

You have no choice but to replace your `case` statement with an `if` statement.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:27:51.070

`HKEY=UINT_PTR` is an unsigned 64 bit integer in your case, and `case ... of` statement seems not to handle it.

The XE2/XE3 compiler front-end still assumes it targets a 32bit platform, even if there is no technical reason for the compiler back-end not able to handle 64 bit case statements (with the classic `sub register,constant; jz @...` asm code generation pattern).

You can try to typecast everything to `integer`:

```
const
  HKEY_CLASSES_ROOT32 = Integer($80000000);

...

function HKeyToString(_HKey: integer): string;
begin
  case _HKey of
    HKEY_CLASSES_ROOT32: result := 'HKEY_CLASSES_ROOT'; // do not translate
 ... 
```

or just ignore the upmost 32 bits of the _HKey value (this is the same):

```
function HKeyToString(_HKey: HKey): string;
begin
  case _HKey and $ffffffff of
    HKEY_CLASSES_ROOT and $ffffffff: result := 'HKEY_CLASSES_ROOT'; // do not translate
 ... 
```

It will work as expected under Windows: due to the limited number of `HKEY_*` constants, I think you can just *ignore the upmost 32 bits* of the `_HKey` value, and therefore use the buggy `case .. of...` statement. And it will work of course for both Win32 and Win64.

I suspect even `... and $f` will be enough - see all `HKEY_*` constants.

Last (and certainly best solution) is to use good old nested `if... else if...` statements:

```
function HKeyToString(_HKey: HKey): string;
begin
  if_HKey=HKEY_CLASSES_ROOT then
    result := 'HKEY_CLASSES_ROOT' else // do not translate
  if_HKey=HKEY_CURRENT_USER then
    result := 'HKEY_CURRENT_USER' else // do not translate
 .... 
```

I guess the last one is preferred, and not slower, with modern pipelines CPUs.

# java - 使用 spring mvc ModelAttribute 将元素绑定到列表

> ID：14647112
> 
> 赞同：2
> 
> 时间：2013-02-01T13:14:21.777
> 
> 标签：java, html, forms, spring, spring-mvc

该问题基于[使用来自javascript的索引获取spring模型属性列表元素](https://stackoverflow.com/questions/13358950/getting-a-spring-model-attribute-list-element-using-an-index-from-javascript)，其中解释了html元素的每个名称都必须包含一个索引。示例用户[0]

我有一个表单，允许用户在提交之前从列表中动态添加或删除元素。让我举个例子：我们添加了 3 个用户，所以表单现在将包含 3 个输入：

```
<input name="user[0].name"    type="text" />
<input name="user[0].surname" type="text" />
<input name="user[1].name"    type="text" />
<input name="user[1].surname" type="text" />
<input name="user[2].name"    type="text" />
<input name="user[2].surname" type="text" /> 
```

如果我们提交这个，我们将有 3 个用户，每个用户都有一个名字和一个姓氏。但是，当我们尝试删除用户 [1] 时，问题就来了，因为我最终得到了这个 html：

```
<input name="user[0].name"    type="text" />
<input name="user[0].surname" type="text" />
<input name="user[2].name"    type="text" />
<input name="user[2].surname" type="text" /> 
```

如果我们提交此表单，springs 仍会创建 3 个用户，但 user[1] 的姓名和姓氏将为空值。

我知道我可以处理输入名称以始终具有“正确”的形式。但是还有其他解决方案吗？我以为像这样的形式

```
<input name="user[].name"    type="text" />
<input name="user[].surname" type="text" />
<input name="user[].name"    type="text" />
<input name="user[].surname" type="text" /> 
```

可能会解决问题，但后来我意识到：春天怎么知道哪个名字与哪个姓氏有关。

关于更好的解决方案的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:05:34.503

最后我添加了所有没有索引变量的输入（现在我将添加之前缺少的容器）：

```
<div class="container">
    <input name="name"    type="text" />
    <input name="surname" type="text" />
</div>
<div class="container">
    <input name="name"    type="text" />
    <input name="surname" type="text" />
</div>
<div class="container">
    <input name="name"    type="text" />
    <input name="surname" type="text" />
</div> 
```

所以在提交我使用的表格之前`updateIndexedInputNames($(".container"), "user");`

让我分享一下 updateIndexedInputNames 的代码：

```
function updateIndexedInputNames($container, name){
    $container.each(function(containerIndex, container){
        $(this).find("input,select").each(function(index, element){
            $(element).attr("name", name+"["+containerIndex+"]."+element.name);
        });
    });
} 
```

我不认为这比@sp00m 建议的解决方案更好，但它也可以。

希望这对某人有帮助！

# c - pthread_join 从数组中的函数接收结果

> ID：14647123
> 
> 赞同：0
> 
> 时间：2013-02-01T13:14:54.010
> 
> 标签：c, pthreads, pthread-join

我正在使用 C 中的 pthreads 并且遇到了问题（再次）。我正在尝试将结果作为函数数组发送到我的主线程。

此代码查找每个工人（1 个工人/行）的最大值并保存该值的索引。到目前为止，一切都很好。我将在此功能下方解释我的问题。这段代码做我想要的。

```
for (i = first; i <= last; i++){
    for (j = 0; j < size; j++){
    total += matrix[i][j];
        if(matrix[i][j] > biggest){
    biggest = matrix[i][j]; 
    x=i;
    y=j;
    maxValueResult[1]=i;
    maxValueResult[2]=j;
    }else if(matrix[i][j] < smallest){  
    smallest = matrix[i][j];
            indexes[2]=i;
            indexes[3]=j;   
}
} 
}      
    maxValueResult[0]=biggest;
    maxValueResult[1]=x;
    maxValueResult[2]=y;
printf("Results: maxValue: %d cord[%d,%d]\n",maxValueResult[0],maxValueResult[1],maxValueResult[2]);

return *maxValueResult; 
```

我的问题是当我在 pthread_join 中收到结果时，只有 maxValueResult[0] 有效，从 maxValueResult[1] 和 maxValueResult[2] 我只能得到地址或其他东西。之前：“返回*maxValueResult；” 所有三个值都是正确的，看起来像这样：“结果：maxValue：95 cord[3,3]”

这是我调用 pthread_join 的地方：

```
for(l=0;l<numWorkers;l++){
pthread_join(workerid[l], &maxValue);
temp[l] = maxValue[0];
if(maxValue[0]<temp[1]){
    maxValue[0] = temp[1];
    xCORD = maxValue[1];
    yCORD = maxValue[2];
}
}
printf("Results: maxValue: %d cord[%d,%d]\n",maxValue[0],xCORD,yCORD); 
```

这将打印：“结果：maxValue：95 线 [0,1629976061]”，其中 95 是正确的，但其他两个不正确。我能做些什么来解决这个问题？正如您可能从我的代码中看到的那样，我不是很有经验。

编辑：我忘了告诉警告，我得到了几个！不幸的是它们是瑞典语，但我还是把它们贴在这里：“$ gcc -o sumb matrixSumB.c matrixSumB.c: In funkcion "main": matrixSumB.c:120:1: warning: passing argument 2 of 'pthread_join' from不兼容的指针类型 /usr/include/pthread.h:144:5：注意：预期的 'void **' 但参数的类型为 'int * (*)[3]' matrixSumB.c：在函数“Worker”中：matrixSumB .c:172:1: 警告：return 从整数中生成指针而不进行强制转换。”

亲切的问候狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:36:46.190

你试过了吗

```
return maxValueResult[0];
return maxValueResult[1];
return maxValueResult[2]; 
```

# javascript - QML 中 JS 文件中的模型

> ID：14647125
> 
> 赞同：0
> 
> 时间：2013-02-01T13:15:01.093
> 
> 标签：javascript, qt, qml

我可以将我的模型对象放在 JS 文件中，然后像共享模型一样重用吗？它应该如下所示：

```
//Models.JS
var myModel = ListModel {} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:52:17.937

不，您不能在 JS 中使用 QML 类型（我假设它是 Qt 4.x）。如果“重用”是指共享（例如在全局变量中），则可以将模型作为上下文属性放在全局上下文中。请参阅[QDeclarativeContext::setContextProperty()](http://qt-project.org/doc/qt-4.8/qdeclarativecontext.html#setContextProperty)。另一种选择是创建 C++ 模型，其中所有实例将共享相同的状态。

如果您不想拥有单个全局实例，则可以`ListModel { id: myModel }`在根元素中声明，并从子元素中访问它（甚至在其他文件中声明）。

```
Item {
    ListModel { id: myModel }
    Listview {
        id: one
        model: myModel
    }
    Listview {
        id: two
        model: myModel
    }
    // etc
} 
```

# cocoa - 可可获取主窗口

> ID：14647126
> 
> 赞同：0
> 
> 时间：2013-02-01T13:15:04.470
> 
> 标签：cocoa, mainwindow

我想创建 3 个这样的窗口：

```
NSWindow *win1 = [[NSWindow alloc] initWithContentRect:rect1
                                             styleMask:uiStyle
                                               backing:backingStoreStyle
                                                 defer:NO]; 
```

并将其中一个设为主窗口，然后获取主窗口，但我总是得到`nil`.

```
[win1 makeKeyAndOrderFront:win1];
[win2 makeKeyAndOrderFront:win2];
[win3 makeKeyAndOrderFront:win3];
[win2 makeMainWindow]; 
```

所有这些都是零：

```
NSLog(@"%@", [app mainWindow]);
NSLog(@"%@", [win1 isMainWindow]);
NSLog(@"%@", [win2 isMainWindow]);
NSLog(@"%@", [win3 isMainWindow]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:15:42.447

我试过你的代码。它确实返回了一个实例化的 NSWindow 对象。我根本没有得到零。您能否将更多上下文发布到代码片段？

其次，在 IB 中创建窗口要容易得多且易于管理。第三，`- (BOOL)canBecomeMainWindow`在传递消息之前检查`makeMainWindow`。

如果您想以编程方式创建自定义窗口，我建议在 MainMenu.xib 中创建一个窗口。获取它的 IBOutlet，例如`window`. 然后创建您的 windows win1、win2 等，然后将其作为子窗口添加到您的`window`using `addChildWindow`.

# asp.net-mvc - MVC 收到来自另一个网站的帖子 - Chrome 说帖子已取消

> ID：14647129
> 
> 赞同：4
> 
> 时间：2013-02-01T13:15:10.673
> 
> 标签：asp.net-mvc, jquery

我通过`c:\`驱动器上的纯 html 文本文件发布到我的机器上运行的 mvc 网站：

```
<body>
<a id="testPost" href="./post_files/post.htm">test post</a>
<script type="text/javascript">

$("#testPost").click(function () {
    $.post("http://hml.backend/Helix/Authorisation", 
    {
        ClientIP: "192.168.20.34"
    }, function (resultData) {
        alert(resultData);
    });

    return false;
}); 
```

控制器是这样设置的：

```
[HttpPost]
public ActionResult Authorisation(string ClientIP)
{
    string result = _videoSecurityService.CheckHelixAuthorisation(ClientIP);
    return Content(result);
} 
```

控制器事件在调试中被击中，没有例外，但 Chrome 说

> 调试窗口中的“POST：已取消”

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:31:01.433

这是一个跨域调用，在许多浏览器中是不允许的，因为它可能存在安全风险。您可以尝试在服务器端重定向您的呼叫。（调用您自己的应用程序并处理对那里其他网站的请求响应）

# fonts - 如何使用 install4j 安装/注册字体

> ID：14647134
> 
> 赞同：2
> 
> 时间：2013-02-01T13:15:31.663
> 
> 标签：fonts, registry, install4j

我想在安装我制作的软件期间在主机（运行 Windows）上安装 TTF 字体。在 Windows 上安装字体意味着两件事：

*   复制 c:\windows\fonts 中的 TTF 文件。这很容易做到。
*   注册字体是：更新 Windows 注册表以更新其字体列表。**我的问题是：如何使用 install4j 做到这一点？**

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:46:56.493

好吧，我已经“艰难地”做到了，但它确实有效。这是我的代码：

```
String fontRegKey;
if (Util.isWindows9X())
{ fontRegKey = "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Fonts"; }
else
{ fontRegKey = "SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Fonts"; }
String [] fontFilesNames = new String[]
    {"braille_tbfr2007_b-2.ttf","BrailleTBFr2007INSHEAb_thermo.ttf","LouisLouis.ttf","LouisLouisThermo.ttf"};
String [] fontNames = new String[]
    {"Braille TBFr2007 INS HEA (TrueType)","Braille TBFr2007 INS HEA thermo (TrueType)",
    "LouisLouis Braille (TrueType)","LouisLouis Braille Thermo (TrueType)"};

for (int i=0 ; i<fontNames.length ; i++)
{
    boolean write = WinRegistry.setValue(RegistryRoot.HKEY_LOCAL_MACHINE, fontRegKey,fontNames[i], fontFilesNames[i]);
}

if (Util.isAtLeastWindowsXP()) //security : delete system font cache
{
    File sd = WinFileSystem.getSystemDirectory();
    File f = new File (sd.getAbsoluteFile()+"\\FNTCACHE.dat") ;
    if (f.exists()) {f.delete();}
}
return true; //mandatory for the script 
```

最后三件事：

*   这是脚本是我在安装程序的**完成屏幕中放置的****运行脚本操作**。

***   请务必仅在 Windows 环境中运行此脚本，因为您的安装程序会在其他系统下崩溃。

    *   **这对于 WinXP**来说似乎是不必要的，但**对于 Win7 来说是必不可少的，**因为安装后可以在字体列表中访问字体。** 

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T09:49:22.250

请参阅[此博客文章](http://blog.stevienova.com/2007/09/28/installing-fonts-programmatically-on-windows/)，了解如何以编程方式安装字体。您将使用“运行可执行文件”操作执行上述“fontinst.exe”可执行文件。**

# regex - 找出哪个正则表达式导致 Emacs 中的特定面孔

> ID：14647135
> 
> 赞同：2
> 
> 时间：2013-02-01T13:15:41.087
> 
> 标签：regex, emacs, syntax-highlighting, emacs-faces, font-lock

我试图找出哪个正则表达式导致在此缓冲区`connect`中突出显示。告诉我这是一个. 看了之后，我看不出这个亮点可能来自哪里。五颜六色的花环是由.`cperl-mode``describe-face``font-lock-type-face``font-lock-keywords-alist``font-lock-keywords``rainbow-delimiters-mode`

![语法高亮代码](../Images/00f46a459c33e998693fa89ce24752f4.png)

是否有检查哪个正则表达式匹配的功能，以便用这张脸突出显示连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:56:57.073

我有一个本地字体锁定黑客来在缓冲区中记录使用的规则。下面的补丁可能会做到这一点。应用它（并重新加载 font-lock.el）后，您可以检查（使用`C-u C-x =`）`font-lock-debug`缓冲区位置上要理解其字体化的属性。

```
=== modified file 'lisp/font-lock.el'
--- lisp/font-lock.el   2013-01-11 23:08:55 +0000
+++ lisp/font-lock.el   2013-01-13 15:28:16 +0000
@@ -1563,6 +1611,14 @@

 ;;; Keyword regexp fontification functions.

+(defvar font-lock-debug nil)
+
+(defun font-lock-debug ()
+  (interactive)
+  (set (make-local-variable 'font-lock-debug) t)
+  (make-local-variable 'font-lock-extra-managed-props)
+  (push 'font-lock-debug font-lock-extra-managed-props))
+
 (defsubst font-lock-apply-highlight (highlight)
   "Apply HIGHLIGHT following a match.
 HIGHLIGHT should be of the form MATCH-HIGHLIGHT, see `font-lock-keywords'."
@@ -1577,13 +1633,16 @@
    (when (eq (car-safe val) 'face)
      (add-text-properties start end (cddr val))
      (setq val (cadr val)))
-   (cond
-    ((not (or val (eq override t)))
+   (if (and (not val) (not (eq override t)))
      ;; If `val' is nil, don't do anything.  It is important to do it
      ;; explicitly, because when adding nil via things like
      ;; font-lock-append-text-property, the property is actually
      ;; changed from <face> to (<face>) which is undesirable.  --Stef
-     nil)
+       nil
+     (if font-lock-debug
+         (font-lock-append-text-property start end 'font-lock-debug
+                         (list (cons matcher highlight))))
+     (cond
     ((not override)
      ;; Cannot override existing fontification.
      (or (text-property-not-all start end 'face nil)
@@ -1599,7 +1658,7 @@
      (font-lock-append-text-property start end 'face val))
     ((eq override 'keep)
      ;; Keep existing fontification.
-     (font-lock-fillin-text-property start end 'face val)))))))
+       (font-lock-fillin-text-property start end 'face val))))))))

 (defsubst font-lock-fontify-anchored-keywords (keywords limit)
   "Fontify according to KEYWORDS until LIMIT.
@@ -1621,6 +1680,7 @@
                 (min lead-start (point)))
               limit
               'font-lock-multiline t)))
+    (font-lock-append-text-property (point) limit 'font-lock-debug keywords)
     (save-match-data
       ;; Find an occurrence of `matcher' before `limit'.
       (while (and (< (point) limit) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:20:33.227

我知道没有这样的功能。正则表达式被编译为最优，为什么你需要知道？

顺便说一句，显示在旁边`font-lock-keyword`显示字符串。`nect``tinue`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-03T23:23:10.067

您尝试[过 font-lock studio](https://github.com/Lindydancer/font-lock-studio)吗？这对我很有效。

# javascript - 使用 jQuery 在滚动时隐藏导航但在悬停时显示

> ID：14647138
> 
> 赞同：0
> 
> 时间：2013-02-01T13:16:09.333
> 
> 标签：javascript, jquery, navigation, css-position

我计划在我的设计顶部使用两层固定位置导航。

当用户向下滚动页面时，我希望导航向上滑动，直到第一层大部分被隐藏。

如果用户随后将鼠标悬停在导航上，则容器应向下滑动，再次显示第一层。

如果用户位于浏览器窗口的最顶部，则不应触发此悬停效果。

此外，当用户滚动回页面的最顶部时，完整的两层导航应该再次完全可见，因为它在初始加载时。

我在使用 javascript 将这些事件链接在一起时遇到了麻烦，不得不求助于`CSS3 transitions`jQuery`addClass/removeClass`调用的组合。

此外，我只能让整个混合糊炸一次。因此，一旦用户向下滚动并向后滚动，就没有更多的动画了。

[**我当前的代码在这个小提琴**](http://jsfiddle.net/5zNj7/)上是可见的[](http://jsfiddle.net/5zNj7/)

 **希望这可以让我了解我正在尝试做的事情。

谁能帮我把这个怪物复活？

代码如下：

HTML

```
<div id="nav_wrap">
    <div id="nav_one">
        <h2>Nav One</h2>
    </div>
    <div id="nav_two">
        <h3>Nav Two</h3>
    </div>
</div>
<p>blah blah blah etc...</p> 
```

CSS

```
#nav_wrap {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 120px;
    z-index: 100;
}

#nav_one,
#nav_two {
    float: left;
    width: 100%;
    height: 48px;
    background: #111;
}

#nav_two {
    background: #1f4c6b;
    height: 72px;
}

h2, h3 {
    color: #fff;
}

#nav_wrap.fixed {
    margin-top: -42px;
    -webkit-transition: margin-top .5s ease-in-out;
    box-shadow: 0 0 24px #111;
}

#nav_wrap.down {
    margin-top: 0px;
    -webkit-transition: margin-top .5s ease-in-out;
}

#nav_wrap.drop {
    top: 42px;
    -webkit-transition: top .5s ease-in-out;
}

#nav_wrap.up {
    top: 0;
    -webkit-transition: top .5s ease-in-out;
} 
```

Javascript

```
var top = $('#nav_wrap').offset()
                        .top - parseFloat($('#nav_wrap')
                        .css('marginTop')
                        .replace(/auto/, 0));

$(window).scroll(function (event) {
    var y = $(this).scrollTop();

    if (y > top) {
        $('#nav_wrap').addClass('fixed');
        $("#nav_wrap").hover(
            function () {
                $(this).addClass('drop');
            },
            function () {
                $(this).addClass('up');
            }
        );

    } else if (y == 0) {

        $('#nav_wrap').addClass('down');

    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:23:00.980

你的方法过于复杂了。你真正需要做的就是在你的 JavaScript 中切换一个滚动类。这个 CSS 将完成剩下的工作。

注意：代码需要为其他浏览器添加前缀（-moz、-o、-ms），我会考虑提高`addClass`滚动中调用部分的性能，因为该事件将被大量调用。

可以在[这里](http://jsfiddle.net/jamessouth/5zNj7/3/)找到一个示例小提琴。

**CSS**

```
#nav_wrap {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 120px;
    z-index: 100;
}

#nav_one,
#nav_two {
    width: 100%;
    height: 48px;
    background: #111;
}

#nav_two {
    background: #1f4c6b;
    height: 72px;
}

h2, h3 {
    color: #fff;
}

#nav_wrap{
    -webkit-transition: margin-top .5s ease-in-out;
}

#nav_wrap.scroll {
    margin-top: -42px;
    box-shadow: 0 0 24px #111;
}

#nav_wrap.scroll:hover{
    margin-top: 0px;
} 
```

**JS**

```
$(window).scroll(function (event) {
    var y = $(this).scrollTop();

    if (y > 0) {

        $('#nav_wrap').addClass('scroll');
    } 
    else{

        $('#nav_wrap').removeClass('scroll');
    }
}); 
```**

# c++ - [DevCpp]使用 curl 库编译程序的问题

> ID：14647141
> 
> 赞同：1
> 
> 时间：2013-02-01T13:16:26.287
> 
> 标签：c++, curl, libcurl

您好，我想使用 DevCpp 和 MinGW64 编译器编译一个 windows .EXE 应用程序。我要编译的应用程序非常简单，需要 CURL 库。我正在使用 Windows 8 64 位，Orwell Dev-C++ V 5.3.0.4。我已经从官方网站（Win64 - MinGW64 devel v.28.1）下载了 CURL 库。我已将所有包含、bin 和 lib 文件复制到 MinGW64 文件夹，但程序无法编译，因为它收到以下链接器错误：

```
 [Linker error] C:\Users\Panos\AppData\Local\Temp\ccSFo7Pn.o:upload.cpp:(.text+0x37): undefined reference to `__imp_curl_global_init'
        [Linker error] C:\Users\Panos\AppData\Local\Temp\ccSFo7Pn.o:upload.cpp:(.text+0x74): undefined reference to `__imp_curl_formadd'
        [Linker error] C:\Users\Panos\AppData\Local\Temp\ccSFo7Pn.o:upload.cpp:(.text+0xb1): undefined reference to `__imp_curl_formadd'
        [Linker error] C:\Users\Panos\AppData\Local\Temp\ccSFo7Pn.o:upload.cpp:(.text+0xba): undefined reference to `__imp_curl_easy_init'
        [Linker error] C:\Users\Panos\AppData\Local\Temp\ccSFo7Pn.o:upload.cpp:(.text+0xd5): undefined reference to `__imp_curl_slist_append'
        [Linker error] C:\Users\Panos\AppData\Local\Temp\ccSFo7Pn.o:upload.cpp:(.text+0x100): undefined reference to `__imp_curl_easy_setopt'
        [Linker error] C:\Users\Panos\AppData\Local\Temp\ccSFo7Pn.o:upload.cpp:(.text+0x157): undefined reference to `__imp_curl_easy_setopt'
        [Linker error] C:\Users\Panos\AppData\Local\Temp\ccSFo7Pn.o:upload.cpp:(.text+0x173): undefined reference to `__imp_curl_easy_setopt'
        [Linker error] C:\Users\Panos\AppData\Local\Temp\ccSFo7Pn.o:upload.cpp:(.text+0x183): undefined reference to `__imp_curl_easy_perform'
        [Linker error] C:\Users\Panos\AppData\Local\Temp\ccSFo7Pn.o:upload.cpp:(.text+0x19a): undefined reference to `__imp_curl_easy_strerror'
        [Linker error] C:\Users\Panos\AppData\Local\Temp\ccSFo7Pn.o:upload.cpp:(.text+0x1cc): undefined reference to `__imp_curl_easy_cleanup'
        [Linker error] C:\Users\Panos\AppData\Local\Temp\ccSFo7Pn.o:upload.cpp:(.text+0x1dc): undefined reference to `__imp_curl_formfree'
        [Linker error] C:\Users\Panos\AppData\Local\Temp\ccSFo7Pn.o:upload.cpp:(.text+0x1ec): undefined reference to `__imp_curl_slist_free_all'
        collect2: ld returned 1 exit status 
```

我设法编译程序的唯一方法是使用编译器的 -DCURL_STATICLIB -c -h -Icurl\include 选项，但我得到的只是一个无法在我的操作系统中运行的 16 位应用程序！

我要编译的代码是这个 CURL 示例： [http ://curl.haxx.se/libcurl/c/postit2.html](http://curl.haxx.se/libcurl/c/postit2.html)

我花了很多时间在互联网上搜索和阅读指南以使我的程序编译但没有任何运气。请帮助我并告诉我我做错了什么！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T05:46:07.030

如果在您尝试运行已编译的二进制文件时它要求 libcurl.dll，则它在运行时需要 libcurl.dll。尝试将 libcurl.dll 放在二进制文件的工作目录中。

# ruby-on-rails - 基于缩进的 Ruby 哈希

> ID：14647148
> 
> 赞同：-1
> 
> 时间：2013-02-01T13:16:41.263
> 
> 标签：ruby-on-rails, ruby, hash, syntax, indentation

我可以在 ruby​​ 中引入基于缩进的哈希吗？像咖啡散列这样的东西。

```
a: 1
  b: 
    c: 3
    d: 4
  e:
    f: 'qwe' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:33:37.073

不是直接的，但我认为你会喜欢[YAML](http://rhnh.net/2011/01/31/yaml-tutorial)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:44:40.510

是的，您可以实现一种方法来使用缩进作为分隔符来解析字符串中的哈希值，或者，正如@AJcodez 所建议的那样：

```
require 'psych'
require 'yaml'

yash = <<EOT  # type hashes like this
---
:a:
- 1
- :b:
    :c: 3
    :d: 4
  :e:
    :f: qwe
EOT

hash = YAML.load yash
=> {:a=>[1, {:b=>{:c=>3, :d=>4}, :e=>{:f=>"qwe"}}]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:46:59.523

如果您眯着眼睛许愿，那么常规语法与您正在寻找的语法有点相似。

```
h = { a: 1,
        b:{ 
          c: 3,
          d: 4},
        e:{
          f: 'qwe'}} 
```

# jquery - JQuery 使用 Prepend 动态设置 ID

> ID：14647149
> 
> 赞同：2
> 
> 时间：2013-02-01T13:16:41.350
> 
> 标签：jquery, dynamic, prepend

我想使用 prepend 来动态附加一个带有它所附加的容器 ID 的 div。我似乎无法让它适用于每个元素，目前它只使用相同的 ID。

HTML

```
<div class="advanced-slider" id="About" >
        <p> Content </p>
</div>
<div class="advanced-slider" id="Main" >
        <p> Content </p>
</div> 
```

JS

```
$('.advanced-slider').wrap('<div class="slider-container"><div class="slider-wrapper"></div></div>');

$('.slider-container').prepend('<div class="slider-title" id="' + $(this).find('.advanced-slider').attr('id') + '-title"></div>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:52:39.110

```
$(".slider-container").prepend(function(){
    return "<div class=\"slider-title\" id=\"" 
              + $(".advanced-slider", this).attr("id") 
              + "-title\"></div>";
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:27:03.383

`this`在您的代码中引用`window`对象，请尝试以下操作。

```
$('.slider-container').prepend(function(){
   return '<div class="slider-title" id="' + $(this).find('.advanced-slider').prop('id') + '-title"></div>';
}); 
```

[http://jsfiddle.net/aPJs5/](http://jsfiddle.net/aPJs5/)

# java - 在 zip 中写入（修改或添加）文件

> ID：14647152
> 
> 赞同：2
> 
> 时间：2013-02-01T13:16:50.287
> 
> 标签：java, file, zip, nio, archive

我已按照 [此线程](https://stackoverflow.com/questions/13787318/java-util-zip-replace-a-single-zip-file)中的说明进行操作，使用其中的代码，我能够将文件添加到 zip 文件中，而无需解压缩和重新压缩它，但是我有一个问题，让我向您展示我的代码：

```
private void saveFileIntoProjectArchive(Path pathOfFile) {
    this.projectArchiveFile.setWritable(true, false);
    Path zipFilePath = Paths.get(this.projectArchiveFile.getAbsolutePath()),
            pathToSaveInsideZIP = null;
    FileSystem fs;
    try {
        fs = FileSystems.newFileSystem(zipFilePath, null);
        pathToSaveInsideZIP = fs.getPath(pathOfFile.toString().substring((int) this.transactionalProjectFolder.getAbsolutePath().length()));
        System.out.println("Coping from:\n\t"+pathOfFile+"\nto\n\t"+pathToSaveInsideZIP);
        Files.copy(pathOfFile, pathToSaveInsideZIP, REPLACE_EXISTING);
        System.out.println("Done!!!");
        fs.close();
    } catch (java.nio.file.NoSuchFileException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    projectArchiveFile.setWritable(false, false);
} 
```

我想要做的是，我有很多文件用于同一个项目，该项目是一个存档（ZIP，在代码中由名为 projectArchiveFile 的 java.io.File 引用，我的类的实例变量）包含所有这些文件，当我想使用我的档案中的某个文件时，我只将该文件解压缩到一个结构与我的档案（ZIP，projectArchiveFile）中的结构相同的文件夹中，对该文件夹的引用是一个java .io.File 称为 transactionalProjectFolder，也是我班级的一个实例变量。但是给了我这个错误：

应对从：C:\Dir1\Dir2\Dir3\Begin of Archive stucure\Another folder replica of the archive structure\An Excel File.xlsm to \Begin of Archive stucure\Another folder replica of the archive structure\An Excel File.xlsm

```
java.nio.file.NoSuchFileException: Begin of Archive stucure\Another folder replica of the archive structure\ at com.sun.nio.zipfs.ZipFileSystem.checkParents(ZipFileSystem.java:846)
at com.sun.nio.zipfs.ZipFileSystem.newOutputStream(ZipFileSystem.java:515)
at com.sun.nio.zipfs.ZipPath.newOutputStream(ZipPath.java:783)
at com.sun.nio.zipfs.ZipFileSystemProvider.newOutputStream(ZipFileSystemProvider.java:276)
at java.nio.file.Files.newOutputStream(Files.java:170)
at java.nio.file.Files.copy(Files.java:2826)
at java.nio.file.CopyMoveHelper.copyToForeignTarget(CopyMoveHelper.java:126)
at java.nio.file.Files.copy(Files.java:1222) 
```

堆栈跟踪的其余部分是我的类。

我已经能够在存档（zip）的根目录中写入，但是每当我尝试在存档（zip）内部的文件夹中写入时，它都会失败，正如您在堆栈跟踪中注意到的那样，它说如果我要复制的文件`java.nio.file.NoSuchFileException: Begin of Archive stucure\Another folder replica of the archive structure\`，它会在名称之前停止，我完全确定 zip 中的路径存在并且拼写正确，只是不想写（我尝试使用 Files .copy 和 Files.move) 存档里面的文件，我已经卡在这个一个月了，我不知道还能做什么，任何建议将不胜感激！！！

提前致谢！:)...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:34:08.380

即使您确定路径存在，我也会在下面的行中添加故障排除并查看它创建的目录结构。

该错误表明 zip 中缺少目录。可能是您使用了一些 zip 等不支持的奇怪文件夹名称。

```
System.out.println("Coping from:\n\t"+pathOfFile+"\nto\n\t"+pathToSaveInsideZIP);

Files.createDirectories(pathToSaveInsideZIP);  // add this row

Files.copy(pathOfFile, pathToSaveInsideZIP, StandardCopyOption.REPLACE_EXISTING);
System.out.println("Done!!!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:26:38.330

我建议您试用易于使用的[TrueZip](https://truezip.dev.java.net/)，它将任何存档公开到虚拟文件系统中，然后您可以轻松附加、删除或编辑存档中的任何文件。

# java - Eclipse 无法启动

> ID：14647154
> 
> 赞同：2
> 
> 时间：2013-02-01T13:16:57.333
> 
> 标签：java, eclipse

我刚刚下载了 Eclipse，解压缩并尝试运行，但它不会启动。日志中充斥着错误，例如：

```
!ENTRY org.eclipse.equinox.p2.reconciler.dropins 4 0 2013-02-01 13:00:36.858
!MESSAGE FrameworkEvent ERROR
!STACK 0
org.osgi.framework.BundleException: The bundle "org.eclipse.equinox.p2.reconciler.dropins_1.1.200.v20120301-2145 [116]" could not be resolved. Reason: Missing Constraint: Import-Package: org.eclipse.equinox.internal.p2.extensionlocation; version="0.0.0"
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolverError(AbstractBundle.java:1332)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolutionFailureException(AbstractBundle.java:1316)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:323)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:390)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1176)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)

!ENTRY org.eclipse.osgi 4 0 2013-02-01 13:00:36.874
!MESSAGE Could not start bundle: org.eclipse.equinox.console
!STACK 0
org.osgi.framework.BundleException: Could not start bundle: org.eclipse.equinox.console
    at org.eclipse.osgi.framework.internal.core.ConsoleManager.checkForConsoleBundle(ConsoleManager.java:217)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarter.java:297)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
Caused by: org.osgi.framework.BundleException: The bundle "org.eclipse.equinox.console_1.0.0.v20120522-1841 [88]" could not be resolved. Reason: Missing Constraint: Bundle-RequiredExecutionEnvironment: 
```

鉴于我是 Java 新手（来自 .NET），谁能给我一些有关如何排除故障的指导？在这个阶段，这些日志对我来说太神秘了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:58:19.877

我注意到旧的安装现在也可以工作了。我认为问题实际上可能是因为我也安装了 Oracle。通过从系统变量 (Windows XP) 中删除所有 Oracle Java 引用似乎已经解决了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:30:45.670

问题是您的 eclipse zip 没有包含足够的文件来启动您的 eclipse 应用程序。

你的eclipse版本是什么？

下载： http: [//www.eclipse.org/downloads](http://www.eclipse.org/downloads)

# jquery - jQuery 交换 dom 位置并追加数据

> ID：14647164
> 
> 赞同：0
> 
> 时间：2013-02-01T13:17:41.403
> 
> 标签：jquery, dom, jquery-waypoints

我正在开发一个新网站。现在我有一个固定位置的菜单列表：

**菜单html**

```
<ul id="work-nav">
    <li class="selected">   
        <span class="label">new</span>
        <a href="#cake-film">Cake Film</a>
    </li>
    <li>
        <a href="#LOS-BANGELES">Los Bangeles</a>
    </li>
    <li>
        <a href="#museumnacht">Museumnacht - N8</a>
    </li>
    <li>
        <a href="#crosby-stills-nash">Crosby, Stills &amp; Nash</a>
    </li>
    <li>
        <a href="#meltinpot">Meltin'Pot</a>
    </li>
    <li>
        <a href="#nstore">N-store</a>
    </li>
    <li>
        <a href="#viewbook">Viewbook</a>
    </li>
    <li>
        <a href="#foodnotes">Foodnotes</a>
    </li>
</ul> 
```

我想要它做的是文章的顶部（带有链接锚的ID）：

**文章 html**

```
<article id="#LOS-BANGELES" class="page">
    <div class="wrap">
        <div class="info">
            <p>Los Bangeles Sed eu mauris nibh. Nunc sit amet mauris vitae nibh ultricies
                volutpat id a massa. Nulla lobortis odio vel velit eleifend at elementum.
                Sed eu mauris nibh. Nunc sit amet mauris vitae nibh ultricies volutpat
                id a massa.</p>
            <p>Nulla lobortis odio vel velit eleifend at elementum</p>
        </div>
    </div>
</article> 
```

到达视口的顶部，它应该将文章`.info`div 附加到相关列表项的下方。像这样。

**期望的结果 html**

```
<li class="selected">
    <a href="#LOS-BANGELES">Los Bangeles</a>
</li>
<li class="info">THE INFO FROM THE LOS BANGELES ARTICLE</li> 
```

![菜单](../Images/b88a506f44e9880a409240e46b5de501.png)

我如何实现这一目标？我正在使用航路点来检查锚点是否在视口中。

**jQuery解决方案？**

```
$('#work article').waypoint(function (d) {
    var $active = $(this);
    if (d === "up") {
        $active = $active.prev();
    }
    if (!$active.length) $active = $active.end();

    $('.active').removeClass('active');
    $active.addClass('active');
    /* 
    SOMEWHERE HERE I NEED TO REMOVE THE.info LI FROM THE OLD SELECTED MENU ITEM, IF EXSISTS
    AND APPEND A NEW ONE BASED ON THE ARTICLE.info DIV, BUT HOW
    */
    $('.selected').removeClass('selected');
    $('a[href=#' + $active.attr('id') + ']').addClass('selected');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:38:02.140

```
// Removes any existing info items from nav
$('#work-nav .info').remove();

// Copies contents of the info div in the currently active article
var $infoContents = $active.find('.info').contents().clone();

// Create a new li.info to inject into the nav;
var $infoLI = $('<li class="info"></li>');

// Set the content of that li to our copy of the article info
$infoLI.append($infoContents);

// Add the new info li after the nav item wrapper our matched link
$('a[href=#' + $active.attr('id') + ']').closest('li').after($infoLI); 
```

# mysql - 查询花费太多时间且性能不佳

> ID：14647165
> 
> 赞同：-8
> 
> 时间：2013-02-01T13:17:42.630
> 
> 标签：mysql, sql, query-performance

1.  我的查询需要很长时间，大约 1 小时
2.  它正在影响数据库性能。
3.  即使是解释计划也需要很长时间。
4.  请重写查询以获得最佳性能。

询问：

```
SELECT Count(*)
FROM   (SELECT paid.keyword_id,
               paid.keyword_name,
               stat.orgentrances,
               keyword.rank1,
               keyword.rank_check,
               Sum(paid.clicks)                                     AS sumclick,
               Sum(paid.clicks * paid.avg_position)                 AS
               sumclickavgpos,
               Sum(paid.itemrevenue)                                AS sumitem,
               Sum(paid.cost)                                       AS sumcost,
               Sum(paid.transactions)                               AS sumtrans,
               Sum(paid.impressions)                                AS
               sumimpress,
               IF(Sum(paid.impressions) = 0, 0, Sum(
               paid.impressions * paid.avg_position) / Sum
                                                (paid.impressions)) AS
                      sumimpressavgrank,
               con.item_revenue,
               con.transactions,
               keyword.monthly_search_volume
        FROM   `t_keyword_paid_analytics_google_ib` paid
               LEFT JOIN (SELECT outer_t.keyword_id,
                                 Sum(outer_t.item_revenue) AS item_revenue,
                                 Sum(outer_t.transactions) AS transactions
                          FROM   t_keyword_conversion_ga_ib outer_t
                          WHERE  outer_t.own_domain_id = 720
                                 AND outer_t.traffic_date >= '2012-12-01'
                                 AND outer_t.traffic_date <= '2012-12-31'
                          GROUP  BY outer_t.keyword_id) con
                      ON paid.keyword_id = con.keyword_id
               LEFT JOIN (SELECT outer_t.keyword_id,
                                 Sum(outer_t.entrances) AS orgEntrances
                          FROM   t_keyword_stat_ga_ib outer_t
                          WHERE  outer_t.own_domain_id = 720
                                 AND outer_t.traffic_date >= '2012-12-01'
                                 AND outer_t.traffic_date <= '2012-12-31'
                                 AND ( outer_t.medium = 'organic'
                                        OR outer_t.medium IS NULL )
                          GROUP  BY outer_t.keyword_id) stat
                      ON paid.keyword_id = stat.keyword_id
               LEFT JOIN `t_managed_keyword_ib` keyword
                      ON keyword.id = paid.keyword_id
        WHERE  paid.own_domain_id = 720
               AND paid.traffic_date >= '2012-12-01'
               AND paid.traffic_date <= '2012-12-31'
               AND ( paid.channel IS NULL
                      OR paid.channel = 'Google' )
        GROUP  BY paid.keyword_id
    HAVING paid.keyword_id IS NOT NULL) tempt; 

(outer_t.medium = 'organic' or outer_t.medium is null ) after outer_t.own_domain_id = 720 and (paid.channel is null or paid.channel = 'Google') 
after paid.own_domain_id = 720 
```

表结构：

```
mysql> show create table t_keyword_paid_analytics_google_ib\G
*************************** 1\. row ***************************
Table: t_keyword_paid_analytics_google_ib
Create Table: CREATE TABLE `t_keyword_paid_analytics_google_ib` (
`keyword_name` varchar(255) DEFAULT NULL,
`id` int(11) NOT NULL,
`keyword_id` int(11) NOT NULL,
`target_url_id` int(11) DEFAULT NULL,
`own_domain_id` int(11) NOT NULL,
`log_date` date NOT NULL,
`traffic_date` date NOT NULL,
`impressions` int(11) DEFAULT NULL,
`clicks` int(11) DEFAULT NULL,
`entrances` int(11) DEFAULT NULL,
`match_type` int(11) DEFAULT NULL COMMENT '1: Phrase, 2: Exact, 3:Broad 4: etc',
`ad_group_name` varchar(200) DEFAULT NULL,
`ad_distribution_network` varchar(500) CHARACTER SET latin1 DEFAULT NULL,
`match_query` varchar(500) CHARACTER SET latin1 DEFAULT NULL,
`cost` decimal(10,2) DEFAULT NULL,
`cpm` decimal(10,2) DEFAULT NULL,
`ctr` decimal(10,2) DEFAULT NULL COMMENT 'percent',
`cpc` decimal(10,2) DEFAULT NULL,
`campaign` varchar(200) CHARACTER SET latin1 DEFAULT NULL,
`keyword_status` tinyint(4) DEFAULT NULL COMMENT '1: Active,2: Approved, 3: Disapproved, 4: Paused , 5:Pending, 6: Failed, 7:etc',
`ad_group_status` tinyint(4) DEFAULT NULL COMMENT '1:ELIGIBLE; 2=PAUSED;3=LOW_SEARCH_VOLUME;4 =LOW_QUALITY_SCORE; 5=DISAPPROVED; 6=AD_GROUP_PAUSED; 7=etc',
`max_cpc` decimal(10,2) DEFAULT NULL,
`quality_score` tinyint(4) DEFAULT NULL,
`channel` varchar(100) DEFAULT NULL,
`first_page_cpc` decimal(10,2) DEFAULT NULL,
`avg_position` decimal(10,2) DEFAULT NULL,
`itemRevenue` decimal(10,2) DEFAULT NULL,
`goal1value` decimal(10,2) DEFAULT NULL,
`goal2value` decimal(10,2) DEFAULT NULL,
`goal3value` decimal(10,2) DEFAULT NULL,
`goal4value` decimal(10,2) DEFAULT NULL,
`transactions` int(10) DEFAULT NULL,
`goal1completions` int(10) DEFAULT NULL,
`goal2completions` int(10) DEFAULT NULL,
`goal3completions` int(10) DEFAULT NULL,
`goal4completions` int(10) DEFAULT NULL
) ENGINE=BRIGHTHOUSE DEFAULT CHARSET=utf8
1 row in set (0.00 sec)

mysql> show create table t_keyword_conversion_ga_ib\G
*************************** 1\. row ***************************
Table: t_keyword_conversion_ga_ib
Create Table: CREATE TABLE `t_keyword_conversion_ga_ib` (
`keyword_name` varchar(255) COLLATE latin1_bin DEFAULT NULL,
`id` int(11) NOT NULL,
`own_domain_id` int(11) DEFAULT NULL,
`keyword_id` int(11) DEFAULT NULL,
`traffic_date` date DEFAULT NULL,
`targeturl_id` int(11) DEFAULT NULL,
`entrance` int(11) DEFAULT NULL,
`transactions` int(11) DEFAULT NULL,
`item_revenue` decimal(9,2) DEFAULT NULL,
`goal1completions` int(11) DEFAULT NULL,
`goal2completions` int(11) DEFAULT NULL,
`goal3completions` int(11) DEFAULT NULL,
`goal4completions` int(11) DEFAULT NULL,
`goal5completions` int(11) DEFAULT NULL,
`goal6completions` int(11) DEFAULT NULL,
`goal7completions` int(11) DEFAULT NULL,
`goal8completions` int(11) DEFAULT NULL,
`goal9completions` int(11) DEFAULT NULL,
`goal10completions` int(11) DEFAULT NULL,
`goal1Value` decimal(9,2) DEFAULT NULL,
`goal2Value` decimal(9,2) DEFAULT NULL,
`goal3Value` decimal(9,2) DEFAULT NULL,
`goal4Value` decimal(9,2) DEFAULT NULL,
`goal5Value` decimal(9,2) DEFAULT NULL,
`goal6Value` decimal(9,2) DEFAULT NULL,
`goal7Value` decimal(9,2) DEFAULT NULL,
`goal8Value` decimal(9,2) DEFAULT NULL,
`goal9Value` decimal(9,2) DEFAULT NULL,
`goal10Value` decimal(9,2) DEFAULT NULL,
`medium` varchar(255) COLLATE latin1_bin DEFAULT NULL,
`source` varchar(255) COLLATE latin1_bin DEFAULT NULL
) ENGINE=BRIGHTHOUSE DEFAULT CHARSET=latin1 COLLATE=latin1_bin
1 row in set (0.00 sec) 
```

请在这里帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:26:40.277

你必须为你的表添加一些索引，

```
ALTER TABLE table_name ADD UNIQUE INDEX cate_id(field_name); 
```

这是[文档](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

在您的情况下，我会将索引添加到：

```
paid.keyword_id
con.keyword_id
stat.keyword_id
keyword.id
paid.keyword_id 
```

因为你正在加入`on`这些领域

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:43:20.757

您没有指明任何索引。您将需要它们来提高性能。

好的，我不明白分号后面的部分，所以我将忽略它。

您的整个查询对子选择进行计数（*），但是您在子查询中进行了一堆聚合（调用 SUM），这是数据库不必做的工作，所以消除它。

您在进一步的子查询中进行聚合，因此将其删除。

在你的主子选择中，你只是在做一个计数（*），你选择不在你的分组中的字段，这是在不影响计数的数据库上工作的，所以摆脱它。

这给了我们类似...

```
select count(*)
from (select paid.keyword_id
      from `t_keyword_paid_analytics_google_ib` paid
        left join
          (select outer_t.keyword_id
           from t_keyword_conversion_ga_ib outer_t
           where ...
           group by outer_t.keyword_id  ) con
          on paid.keyword_id = con.keyword_id
        left join
          (select outer_t.keyword_id
           from t_keyword_stat_ga_ib outer_t
           where ...
           group by outer_t.keyword_id) stat on paid.keyword_id = stat.keyword_id
        left join `t_managed_keyword_ib` keyword on keyword.id = paid.keyword_id
     where ...
     group by paid.keyword_id
     having paid.keyword_id is not null
    ) tempt; 
```

此外，计数可能比选择更快，您似乎正在寻找关键字 ID 并最终计算它们。如果您可以边走边算，那将比选择要好。我不确定您是否可以将其应用于此查询，但请记住这一点。

# intuit-partner-platform - 使用 IDS 发布发票时，是否可以覆盖 Quickbooks Desktop 计算的税款？

> ID：14647167
> 
> 赞同：1
> 
> 时间：2013-02-01T13:18:06.443
> 
> 标签：intuit-partner-platform, intuit

我们正在使用 IDS 将我们的订单管理应用程序与 Quickbooks Desktop 集成。我们发现我们的应用程序计算的税款与 Quickbooks 计算的税款相差几美分。当我们进行发票邮寄时，有什么方法可以覆盖 Quickbooks 计算的税款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:09:49.163

通常，您会将项目设置为非应税项目，然后添加一个引用该税项目的行项目，您可以在添加时设置金额。但是，IDS 似乎没有写回 v2 中的 Taxable 字段（无法写入 QuickBooks。）

您应该能够将项目的税码更改为无税，然后使用 TaxLine 以您想要的值添加税。

威廉

# ruby-on-rails-3 - 推送到 Heroku giv 后出现错误“我们很抱歉，但出了点问题。”

> ID：14647174
> 
> 赞同：0
> 
> 时间：2013-02-01T13:18:32.947
> 
> 标签：ruby-on-rails-3, heroku

我在rails 3.2.1上运行。我在已部署的应用程序上收到以下消息：我们很抱歉，但出了点问题。

我真的不知道是什么导致了这个错误。

这是我的heroku日志。

```
Invalid gemspec in [C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/specificatio
ns/ZenTest-4.8.4.gemspec]: Illformed requirement ["< 2.1, >= 1.8"]
2013-02-01T12:53:55+00:00 app[web.1]: [2013-02-01 12:53:55] INFO  WEBrick::HTTPS
erver#start: pid=2 port=47478
2013-02-01T12:53:58+00:00 app[web.1]:
2013-02-01T12:53:58+00:00 app[web.1]: ActiveRecord::ConnectionNotEstablished (Ac
tiveRecord::ConnectionNotEstablished):
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:374:i
n `retrieve_connection'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_specification
.rb:168:in `retrieve_connection'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_specification
.rb:142:in `connection'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
rd-3.2.1/lib/active_record/query_cache.rb:67:in `rescue in call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
rd-3.2.1/lib/active_record/query_cache.rb:61:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:i
n `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
ort-3.2.1/lib/active_support/callbacks.rb:405:in `_run__3328337976595330500__cal
l__2238187366165653971__callbacks'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
ort-3.2.1/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
ort-3.2.1/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
ort-3.2.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
.2.1/lib/rails/rack/logger.rb:26:in `call_app'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
.2.1/lib/rails/rack/logger.rb:16:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4
/lib/rack/methodoverride.rb:21:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4
/lib/rack/runtime.rb:17:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
ort-3.2.1/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4
/lib/rack/lock.rb:15:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/static.rb:53:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
-1.2/lib/rack/cache/context.rb:51:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
.2.1/lib/rails/engine.rb:479:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
.2.1/lib/rails/application.rb:220:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4
/lib/rack/content_length.rb:14:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
.2.1/lib/rails/rack/log_tailer.rb:14:in `call'
2013-02-01T12:53:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4
/lib/rack/handler/webrick.rb:59:in `service'
2013-02-01T12:53:58+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpse
rver.rb:111:in `service'
2013-02-01T12:53:58+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpse
rver.rb:70:in `run'
2013-02-01T12:53:58+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server
.rb:183:in `block in start_thread'
2013-02-01T12:53:58+00:00 app[web.1]:
2013-02-01T12:53:58+00:00 app[web.1]:
2013-02-01T12:53:58+00:00 app[web.1]: cache: [GET /pages/home] miss
2013-02-01T12:53:58+00:00 heroku[router]: at=info method=GET path=/pages/home ho
st=evening-caverns-5777.herokuapp.com fwd=82.207.20.180 dyno=web.1 queue=0 wait=
0ms connect=4ms service=519ms status=500 bytes=643
2013-02-01T12:53:47+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2013-02-01T12:53:48+00:00 app[web.1]: [2013-02-01 12:53:48] ERROR SignalExceptio
n: SIGTERM
2013-02-01T12:53:48+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server
.rb:90:in `select'
2013-02-01T12:53:58+00:00 heroku[web.1]: Stopping remaining processes with SIGKI
LL
2013-02-01T12:54:00+00:00 heroku[web.1]: Process exited with status 137
2013-02-01T12:53:58+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least on
e process failed to exit within 10 seconds of SIGTERM
2013-02-01T12:57:46+00:00 heroku[api]: Starting process with command `bundle exe
c rake db:reset` by marik.expert@gmail.com
2013-02-01T12:57:59+00:00 heroku[run.1710]: State changed from up to complete
2013-02-01T12:57:58+00:00 heroku[run.1710]: Client connection closed. Sending SI
GHUP to all processes
2013-02-01T12:57:52+00:00 heroku[run.1710]: Awaiting client
2013-02-01T12:57:52+00:00 heroku[run.1710]: Starting process with command `bundl
e exec rake db:reset`
2013-02-01T12:57:59+00:00 heroku[run.1710]: Process exited with status 1
2013-02-01T12:57:53+00:00 heroku[run.1710]: State changed from starting to up
2013-02-01T13:00:50+00:00 app[web.1]:
2013-02-01T13:00:50+00:00 app[web.1]: Started GET "/pages/home" for 82.207.20.18
0 at 2013-02-01 13:00:50 +0000
2013-02-01T13:00:50+00:00 app[web.1]:
2013-02-01T13:00:50+00:00 app[web.1]:
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_specification
.rb:142:in `connection'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
.2.1/lib/rails/rack/logger.rb:16:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4
/lib/rack/runtime.rb:17:in `call'
2013-02-01T13:00:50+00:00 app[web.1]: ActiveRecord::ConnectionNotEstablished (Ac
tiveRecord::ConnectionNotEstablished):
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4
/lib/rack/methodoverride.rb:21:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
ort-3.2.1/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
ort-3.2.1/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
ort-3.2.1/lib/active_support/callbacks.rb:405:in `_run__3328337976595330500__cal
l__2238187366165653971__callbacks'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/static.rb:53:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4
/lib/rack/lock.rb:15:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
rd-3.2.1/lib/active_record/query_cache.rb:67:in `rescue in call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
rd-3.2.1/lib/active_record/query_cache.rb:61:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
ort-3.2.1/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:374:i
n `retrieve_connection'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_specification
.rb:168:in `retrieve_connection'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
ort-3.2.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-02-01T13:00:50+00:00 heroku[router]: at=info method=GET path=/pages/home ho
st=evening-caverns-5777.herokuapp.com fwd=82.207.20.180 dyno=web.1 queue=0 wait=
0ms connect=3ms service=8ms status=500 bytes=643
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
.2.1/lib/rails/rack/logger.rb:26:in `call_app'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:i
n `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
-3.2.1/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
-1.2/lib/rack/cache/context.rb:51:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
.2.1/lib/rails/application.rb:220:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
.2.1/lib/rails/rack/log_tailer.rb:14:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server
.rb:183:in `block in start_thread'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
.2.1/lib/rails/engine.rb:479:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4
/lib/rack/content_length.rb:14:in `call'
2013-02-01T13:00:50+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpse
rver.rb:111:in `service'
2013-02-01T13:00:50+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpse
rver.rb:70:in `run'
2013-02-01T13:00:50+00:00 app[web.1]:
2013-02-01T13:00:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4
/lib/rack/handler/webrick.rb:59:in `service'
2013-02-01T13:00:50+00:00 app[web.1]:
2013-02-01T13:00:50+00:00 app[web.1]: cache: [GET /pages/home] miss 
```

我的宝石文件：

```
 source 'https://rubygems.org'

gem 'rails', '3.2.1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3', :group => :development

group :development do
        gem 'rspec-rails', '2.6.1'
end

group :test do
        gem 'rspec-rails', '2.6.1'
        gem 'webrat', '0.7.1'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtim
  # gem 'therubyracer'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:27:30.117

您的应用程序需要一个数据库连接，但您没有指定适当的适配器。如果你使用 Heroku Postgres，你需要添加类似的东西`gem 'pg', :group => :production`并确保你`DATABASE_URL`的 Heroku 配置中有一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:33:40.077

好吧，有一件事，没有数据库适配器被传递给 Heroku。确保你的 heroku 应用有一个数据库，一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T11:31:44.600

您需要在 Gemfile 的生产环境中添加 pg gem。

```
 group :production
    gem 'pg'
  end 
```

然后运行

```
 heroku rake db:migrate   #create db tables for production

 git push heroku master    #pushed the latest changes to production

 heroku restart        # it will start the server again with new changes 
```

它现在应该可以工作了。

# resources - Visual C# 本地化：仅在 obj/Debug/tempPE 中生成的资源 DLL

> ID：14647175
> 
> 赞同：0
> 
> 时间：2013-02-01T13:18:44.693
> 
> 标签：resources, resx, visual-c#-express-2010

为了国际化和本地化我创建`Resources.resx`并`Resources.fr.resx`包含键值字符串的 Visual C# 2010 Express 项目：

![在此处输入图像描述](../Images/916beff85f60971c9b0fc6af0f9337d6.png)

当我按下 时`Rebuild`，会创建两个 DLL：

```
obj/Debug/tempPE/Properties.Resources.Designer.cs.dll
obj/Debug/tempPE/Properties.Resources.fr.Designer.cs.dll 
```

为什么在这个奇怪的地方？
我应该将它们嵌入到我的安装程序中吗？
任何地方都没有生成其他资源 DLL，所以我别无选择，但是传送来自“tempPE”文件夹的文件很可怕......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:56:21.140

删除 Resource.fr.Designer.cs 文件。它不应该在那里。Resource.Designed.cs 就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T17:36:55.007

只有默认语言文件需要 Internal 或 Public 的访问修饰符。所有其他语言文件都需要“无代码生成”。

可以忽略的 obj 文件夹。它用于构建过程和 Visual Studio 的目的。程序运行所需的一切都在 bin 中。您可以删除这两个文件夹，它们将被重新创建。

# excel - 在 Excel VBA 中使用字符串作为公式

> ID：14647176
> 
> 赞同：1
> 
> 时间：2013-02-01T13:18:50.843
> 
> 标签：excel, vba, worksheet-function

我正在根据在电子表格中设置参数表的值来构建公式。我现在想评估 VBA 中的公式，但不知道如何获取字符串并将其转换为代码而不是字符串。

因此，公式在代码中构建如下（根据选项而有所不同，这只是一个简单的添加，其中工作簿、工作表和单元格对于两个术语都是可变的）

```
CalculationHoldArray(Loopcount) = "'[" & Usefile1.Name & "]" & Worksheet1 & "'!" & Cells1 & ", + '[" & Usefile2.Name & "]" & Worksheet2 & "'!" & Cells2 
```

在这种情况下，生成的字符串是

```
"'[Control Model v1.35- nonfunctional.xlsm]Input'!E2, + '[Control Model v1.35- nonfunctional.xlsm]Input'!E3" 
```

我将如何将其转换为代码？我曾尝试将其作为 application.worksheet.sum 函数来执行，但这会产生错误。除了求和之外，我还需要能够对数组进行乘法、除法、减法和求和。我认为使用 application.worksheet.sum 函数会起作用，但我只是得到错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:27:47.220

`Application.Evaluate("Sheet1!A1 + Sheet1!A2")`

请注意，您正在评估的字符串表达式有 255 个字符的限制。

[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/office/ff193019.aspx)

# php - 在 Drupal 如何调试我的自定义模块

> ID：14647184
> 
> 赞同：1
> 
> 时间：2013-02-01T13:19:30.327
> 
> 标签：php, drupal, drupal-7

在 Drupal 中，我开发了自己的自定义模块来更改查询（视图）。我该如何调试它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:00:06.413

使用[开发模块](http://drupal.org/project/devel)

> 一套包含模块开发者和用户乐趣的模块

有关更多详细信息，请参阅模块页面。

# ruby-on-rails - 需求和负载有什么区别？

> ID：14647185
> 
> 赞同：8
> 
> 时间：2013-02-01T13:19:31.413
> 
> 标签：ruby-on-rails, ruby

使用有什么区别：

```
require 'digest' 
```

和

```
load 'digest' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T13:20:53.370

如果您`require`两次使用相同的文件，它将仅加载和评估一次。`load`，另一方面，每次都加载和评估文件。实际文件名的解析方式也存在差异（[谢谢，Saurabh](https://stackoverflow.com/a/14647240/125816)）。

## 这实际上意味着什么？

假设我们有一个图书馆`foo`

```
# foo.rb

class Foo
  def bar
    puts 'bar'
  end

  def quux
    puts 'quux'
  end
end 
```

然后我们有一个文件，它进行一些非幂等操作。说，取消定义一个方法

```
# mod.rb
class Foo
  undef :bar
end 
```

然后，如果我们`require`mod.rb 两次，没有什么不好的事情发生。`bar`成功未定义。

```
# main.rb
require './foo'

Foo.instance_methods(false) # => [:bar, :quux]

require './mod'
require './mod'

Foo.instance_methods(false) # => [:quux] 
```

但是如果我们`load`mod.rb 两次，那么第二次`undef`操作就会失败，因为方法已经消失了：

```
# main.rb
require './foo'

Foo.instance_methods(false) # => [:bar, :quux]

load 'mod.rb'
load 'mod.rb'

Foo.instance_methods(false) # => 
# ~> mod.rb:2:in `<class:Foo>': undefined method `bar' for class `Foo' (NameError)
# ~>    from mod.rb:1:in `<top (required)>'
# ~>    from -:6:in `load'
# ~>    from -:6:in `<main>' 
```

没有错误，`require`因为在这种情况下`undef`只发生一次。诚然，这个例子是相当做作的，但我希望它能说明这一点。

# javascript - 当内部 div 增长/缩小时使外部 div 增长/缩小，但在它们之间保持边距

> ID：14647187
> 
> 赞同：0
> 
> 时间：2013-02-01T13:19:33.427
> 
> 标签：javascript, jquery, css

我试图解决的问题：

我有一个包含 div 的外部 div。

```
<div class="external">
    <div class="internal">
        content
    </div>
</div> 
```

内部和外部 div 之间的边距应始终相同。

当内部 div 增长/缩小时，外部 div 将修改其高度和宽度以保持与内部 div 的指定边距。不知何故，内部 div 正在控制两个 div 的宽度和高度。当内部 div 增长时，外部 div 也会增长以保持边距。当内部 div 缩小时，外部也会保持边距。

任何人？谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:50:06.017

默认情况下这是一个 CSS 的东西：

```
#internal {
    display: inline-block;
    width: 200px;
    height: 200px;
    background-color: red;
}
#external {
    display: inline-block;
    padding: 10px;
    background-color: #000;
} 
```

或者您可以像这样为整个事物设置动画：

```
$("#internal").animate({width: "300px", height: "500px"}, {duration: 1000, step: function (now,PlainObject) {

    // PlainObject.prop is either 'width' or 'height'
    $("#external")[PlainObject.prop](PlainObject.now + 10);

}}); 
```

我假设当内部 div 动画时会发生缩小和增长？还是您的意思是当内部 div 的内容更大/更小（内部 div 中的文本更多/更少）时？

该`inline-block`属性仅适用于纯 CSS 解决方案。如果您选择动态 javascript 解决方案，则应将其设置为`display: block;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:47:59.880

我不确定你有什么问题？您能否提供一些更详细的代码/css？如果您正在尝试以下代码，您将看到外部 div 将增长/缩小，当您对内部 div 进行任何大小更改并且`margin: 10px`保持在两者之间时。

```
// jQuery snippet tested in my browser's console:
$(document.body).append($('<div id="external">').append($('<div id="internal">').css({margin: '10px', backgroundColor: '#f00', height: '100px', width: '100px', display: 'inline-block'})).css({backgroundColor: '#000'}));

//resize:
$('#internal').height(200);
$('#internal').width(200); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:34:55.760

您应该在外部 div 上使用一些填充而不设置固定的宽度或高度。让

像这样：`.external { padding: 20px; }`如果需要，您还可以将 max-width 设置为外部 div。

# c++ - C++ 信号量（读/写）

> ID：14647193
> 
> 赞同：0
> 
> 时间：2013-02-01T13:19:45.177
> 
> 标签：c++, multithreading, semaphore, vxworks

我有一个关于读者/作者线程的问题，我不想让事情过于复杂，所以我来这里寻求一些建议。

我有一个数组，最终将由 4 个线程读取并由 3 个线程写入。（1 个读取器 3 个读/写）。我的目标是不让任何读操作阻塞另一个线程，同时让任何写操作阻塞所有线程直到完成。我很确定我知道如何使用每个线程一个信号量来做到这一点，但是有没有办法只用一个二进制、计数或互斥信号量（或每个线程少于 1 个信号量）来完成此操作。我将使用 VxWorks 信号量库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:34:30.677

除非 VxWorks 支持[像 POSIX one 这样的 shared/rwlock](http://linux.die.net/man/3/pthread_rwlock_init)，否则恐怕它会比简单的更复杂一些。

我建议使用 POSIX `pthread_rwlock_t`，如果你有的话。如果您不这样做并且 VxWorks 不提供任何等效的替代方案，您将不得不使用其他原语构建一个。可以在 2 个信号量和 3 个互斥锁以及两个整数变量之上构建一个 rwlock。参见*[“Readers”和“Writers”的并发控制；PJ Courtois、F. Heymans 和 DL Parnas；MBLE研究实验室；比利时布鲁塞尔](http://dl.acm.org/citation.cfm?id=362759.362813)*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:26:49.017

由于您只有一个阅读器，因此完全等同于互斥问题（只能进入一个线程）。直接使用单个二进制信号量就足够了。以 1 初始化，P 进入，V 离开。

# php - 保持变量 PHP 的状态而不查询

> ID：14647197
> 
> 赞同：1
> 
> 时间：2013-02-01T13:19:53.613
> 
> 标签：php, postgresql, state

我正在处理文章页面。我们可以对每篇文章进行投票。我想在单独的页面上显示所有文章和高于平均水平的投票文章。我目前的情况是这样的：

```
//For get all articles
GET ALL RECORDS FROM ARTICLES TABLE

//For above average articles
GET ALL RECORDS WITH VOTE ABOVE
    GET AVERAGE VOTE VALUE FROM ARTICLES TABLE
FROM ARTICLES TABLE 
```

我觉得这非常低效。有两个事件会改变平均投票：

*   有人对一篇文章进行了投票
*   有人写了一篇文章

有什么方法可以跟踪平均投票值而无需在每个请求上查询数据库？我想我必须保存发送了多少票以及写了多少文章的状态。我应该在文件中写这两个变量，这安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:24:21.917

只需按预期使用您的数据库，它就与您将获得的一样高效。如果您想减少数据库流量而不是使用缓存（[选择一种 PHP 缓存技术：将输出缓存到文件中与操作码缓存](https://stackoverflow.com/questions/4821978/choosing-a-php-caching-technique-output-caching-into-files-vs-opcode-caching)），请不要重新设计可行的东西并增加不必要的复杂性。

PHP 没有在请求之间持续存在的静态变量，这使得问题的明显/简单解决方案（您实际上没有问题，但您认为效率低下）是不可能的。将变量序列化到文件中并且每次请求都必须读取该文件不是可行的方法，文件系统 IO 是效率最低的构造。

# objective-c - NSOutlineView 组间距

> ID：14647198
> 
> 赞同：7
> 
> 时间：2013-02-01T13:19:53.057
> 
> 标签：objective-c, nsoutlineview, cellspacing

我正在开发 NSOutlineView (SourceList)，并希望用我自己的样式替换当前样式，以便更好地查看我的应用程序。我已经使用自定义 NSTableViewRows 更改了默认标题和内容单元格。这工作正常。但现在我可以看到组之间的空间。这些空间大约有 9 个像素，我想删除它。但我不知道怎么做。更改单元格间距没有帮助，我在开发人员参考中没有找到任何内容来做到这一点。有没有人可以给我一个提示或片段？那太好了。

```
-----------------------
* Group 1
  - Item 1
  - Item 2
-----------------------
// this space should be changed
-----------------------
* Group 2
  - Item 3
  - Item 4
----------------------- 
```

谢谢你。亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-22T10:54:06.393

这可能只是试图解决问题，而不是答案，但由于我的声誉，stackoverflow 不允许我发表评论。

[无论如何，我记得过去有过NSOutlineView](https://developer.apple.com/library/mac/documentation/cocoa/reference/ApplicationKit/Classes/NSOutlineView_Class/Reference/Reference.html)的奇怪行为。也许[setFloatsGroupRows:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSTableView/setFloatsGroupRows%3a)会帮助你：

```
[myOutlineView setFloatsGroupRows:NO]; 
```

请告诉我。

# shiro - Shiro web 过滤器链顺序策略

> ID：14647200
> 
> 赞同：1
> 
> 时间：2013-02-01T13:19:54.193
> 
> 标签：shiro

可能我遇到了一种误解问题，但事情是这样的：

*   我希望我的`<domain>/index.html`公开可用，其他一切都应该受到保护。

我正在使用 shiro web + guice：

```
...

bindConstant().annotatedWith(Names.named("shiro.loginUrl")).to("/index.html");

addFilterChain("/index.html", ANON);
addFilterChain("/**", AUTHC);

... 
```

这种配置导致我出现“TOO MANY REDIRECTS LOOP”问题。Shiro 文档[在这里](http://shiro.apache.org/web.html#Web-URLPathExpressions)说它使用 FIRST MATCH WIN 策略，但我认为我没有得到它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:09:16.033

从表面上看，您的过滤器链看起来应该可以工作。如果没有更多信息，我可能无法诊断您的太多重定向问题 - index.html 的内容，当您点击 index.html 时服务器实际返回的 http 等等。

但是，我可以告诉您，您不需要这样做。AUTHC 过滤器对“loginUrl”页面有一个特殊情况——它会让它通过。因此，请尝试移除 ANON 过滤器，看看情况如何。

# c++ - 将 std::to_wstring 与 libstdc++ 一起使用？

> ID：14647201
> 
> 赞同：1
> 
> 时间：2013-02-01T13:20:03.710
> 
> 标签：c++, gcc, c++11, libstdc++

为什么这不能在 gcc 上编译？

```
#include <iostream>
#include <string>

int main() {

    double f = 23.43;    
    std::wstring f_str = std::to_wstring(f);
    std::wcout << f_str << std::endl;

    return 0;
} 
```

错误：

> prog.cpp：在函数'int main（）'中：
> 
> prog.cpp:6:26: 错误：“to_wstring”不是“std”的成员</p>

[例子](http://ideone.com/rIAm93)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:28:53.333

[`std::to_wstring()`](http://en.cppreference.com/w/cpp/string/basic_string/to_wstring)在 C++11 中添加。您在 ideone 上的答案中的链接*未*使用 C++11 编译器：

> 语言：C++ (gcc-4.7.2)

它编译得很好： http: [//ideone.com/UO2FQM](http://ideone.com/UO2FQM)：

> 语言：C++0x (gcc-4.7.2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:29:33.610

如果您在 IDEONE 中选择 C++0x 而不是 C++，则您的程序将编译，因为它是 C++11 功能。

# javascript - 在 Internet Explorer 9 中禁用 F5

> ID：14647207
> 
> 赞同：0
> 
> 时间：2013-02-01T13:20:26.420
> 
> 标签：javascript, jquery, internet-explorer-9, keydown

我有一个运行某种东西的 JS 应用程序。

我想禁用`ctrl`+ `r`，`f5`所以我没有刷新浏览器。

我完全禁用`ctrl`+`r`并用我自己的处理替换禁用的`f5`刷新（ajax、对 RAP、DB 的调用等）

这两种机制在 FF、Chrome、Opera 和 Safari 上都能正常工作。
这意味着我可以使用垃圾邮件机器人组合键，并且一切正常。

但是在 IE 9 中，当我按`f5`顺序快速按顺序进行时，它确实会定期刷新，这对我来说意味着 IE 9 需要很长时间才能进行操作，并且它还没有为下一个 keydown 功能做好准备。

```
$(document).keydown(function (event) {
    if ((event.ctrlKey == true && (event.keyCode == 17 || event.keyCode == 82)) || (event.keyCode == 116)) {
        event.preventDefault();
        if (event.keyCode == 116) {
            // Here is the own Reload Logic which contains calls on DB and Server.              
        }
        if ($.browser.msie) {
            window.event.stopPropagation();
            window.event.keyCode = 0;
            window.event.returnValue = false;
            window.event.cancelBubble = true;
        }
    }
}); 
```

是否有可能`f5`在 IE 9 中以某种方式将其管理为快速按下（因此它一直被禁用）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:27:23.213

您只能使用 WebBrowserShortcutsEnabled 来阻止 F5，但您将终止浏览器在该页面上的所有其他快捷方式。您应该尝试阻止人们离开网页的过程。这会更有成效地实现您想要实现的目标。

```
window.onbeforeunload = function() {
    return "You are trying to leave.";
} 
```

这不应该用作安全措施，就像学生参加网络测试/考试一样。但如果只是为了防止意外刷新，这应该可以解决问题。

# php - url的反向id编码

> ID：14647208
> 
> 赞同：0
> 
> 时间：2013-02-01T13:20:29.840
> 
> 标签：php, string, encoding

我正在寻找一个将 int id 编码为字符串的函数 (php)，看起来像 md5 或 uuid 的结果。接下来是功能要求：

*   编码必须是反向的
*   快速地
*   编码字符串必须是唯一的
*   所需的字符是 [a-z0-9-]

安全不是重点，我只需要使用客户“感知”的安全性这种 id 转换，确实使用其他方法使链接仅对订单所有者可用。

我现在看到的工作流程：我从 URL 获取编码字符串，将其解码为 int，使用此 int 值进行查询。

我考虑了方法，当与 id 一起需要存储一些哈希，并在 url 中使用这个哈希，但是如果我可以使用我要求的函数，那就太好了，因为我不想添加单独的文件, 按此字段索引等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:22:23.397

试试 base64_encode/base64_decode。

[http://php.net/manual/en/function.base64-encode.php](http://php.net/manual/en/function.base64-encode.php)

[http://php.net/manual/en/function.base64-decode.php](http://php.net/manual/en/function.base64-decode.php)

# c# - TreeView 仅在复选框处忽略双击

> ID：14647216
> 
> 赞同：19
> 
> 时间：2013-02-01T13:20:43.180
> 
> 标签：c#, .net, winforms, treeview

我有一个带复选框的树视图，我试图仅在复选框中完成此操作时才禁用双击。

我找到了一种完全禁用双击的方法，但这不是我想要的。

如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T09:37:25.323

我在谷歌搜索相同的错误时发现了这个问题。NoodleFolk 解决方案的问题在于，它通过双击一个项目来禁用扩展三个。通过将 NoodleFolk 的答案与 john arlens 的答案结合起来，您会得到如下信息：

```
class NewTreeView : TreeView
{
    protected override void WndProc(ref Message m)
    {
        if (m.Msg == 0x203) // identified double click
        {
            var localPos = PointToClient(Cursor.Position);
            var hitTestInfo = HitTest(localPos);
            if (hitTestInfo.Location == TreeViewHitTestLocations.StateImage)
                m.Result = IntPtr.Zero;
            else
                base.WndProc(ref m);
        }
        else base.WndProc(ref m);
    }
} 
```

我（很快）测试了这个解决方案，它似乎有效。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-07T18:44:10.833

**选项1**：完全禁用双击事件。
创建客户控制

```
MyTreeView 类：树视图
{
    受保护的覆盖无效 WndProc（参考消息 m）
    {
        如果（m.Msg == 0x0203）
        {
            m.Result = IntPtr.Zero；
        }
        别的
        {
            base.WndProc(参考 m);
        }
    }
}

```

在您的设计器文件 ( form.Designer.cs ) 中，查找控件的创建位置，并将对 TreeView 构造函数的调用替换为新控件。

```
this.treeView1 = new MyTreeView();
```

**选项 2**：将双击事件视为两个单击事件

```
MyTreeView 类：树视图
{
    受保护的覆盖无效 WndProc（参考消息 m）
    {
        如果（m.Msg == 0x0203）
        {
            m.Msg = 0x0201;
        }
        base.WndProc(参考 m);
    }
}

```

我个人认为选项 2 更直观。当用户单击该复选框两次时，该复选框未被选中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-01T15:36:50.613

如果您只想知道复选框中发生的 DoubleClick 事件：

```
private void TreeViewDoubleClick(object sender, EventArgs e)
{
    var localPosition = treeView.PointToClient(Cursor.Position);
    var hitTestInfo = treeView.HitTest(localPosition);
    if (hitTestInfo.Location == TreeViewHitTestLocations.StateImage) 
        return;

    // ... Do whatever other processing you want
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-02T13:33:49.877

结合以上答案，我发现这对我来说是最好的解决方案。双击节点以展开其子节点仍然有效，只有双击复选框会受到影响并修复：

```
class MyTreeView : TreeView
{
    protected override void WndProc(ref Message m)
    {
      if (m.Msg == 0x0203 && this.CheckBoxes)
      {
        var localPos = this.PointToClient(Cursor.Position);
        var hitTestInfo = this.HitTest(localPos);
        if (hitTestInfo.Location == TreeViewHitTestLocations.StateImage)
        {
          m.Msg = 0x0201;
        }
      }
      base.WndProc(ref m);
    }
} 
```

# android - 如何使用forloop从相机拍摄图像3次

> ID：14647220
> 
> 赞同：0
> 
> 时间：2013-02-01T13:20:52.390
> 
> 标签：android

这是我下面的代码是浏览按钮并从相机拍摄图像并在屏幕上显示很好，但我想使用 for 循环以编程方式执行 3 次我的意思是 i = 1 到 2 是浏览按钮拍摄图像并显示屏幕显示使用 for 循环的 3 个按钮 3 个图像我该怎么做？

```
public class MainActivity extends Activity {
public  static Bitmap yourSelectedImage = null;
private final int CAMERA_PICTURE = 1;
private final int GALLERY_PICTURE = 2;
private Intent pictureActionIntent = null;
public final String SDCARD_ROOT_PATH =    
Environment.getExternalStorageDirectory().getAbsolutePath();
public final String SAVE_PATH_IN_SDCARD = "/myFolder23/"; 
public final String IMAGE_CAPTURE_NAME    
 ="imgtemp"+System.currentTimeMillis()+".jpeg"; 

ImageView imageView1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    LinearLayout btnLO = new LinearLayout(this);

    LinearLayout.LayoutParams paramsLO = new LinearLayout.LayoutParams(
                            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    // button margins
    paramsLO.setMargins(0, 0, 0, 0);
    // button height/width *pixels*
    paramsLO.height = 75;
    paramsLO.width = 75;

    btnLO.setOrientation(LinearLayout.VERTICAL);
    btnLO.setBackgroundColor(5); // not working correctly

    //buttons
    Button b1 = new Button(this);

    b1.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {               
        //      Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
        //      intent.setType("image/*");
         //     startActivityForResult(intent, 0);

                startDialog();
            }
        });        

//    int i1Btn = 0;
//    ImageButton i1 = new ImageButton(this);
 //   i1Btn = R.drawable.ic_launcher;
 ///   i1.setImageResource(i1Btn);

     imageView1 = new ImageView(this);

    //text for buttons
    b1.setText("Arrow");

    //displays buttons with parameters (if any)
    btnLO.addView(b1, paramsLO);

//    btnLO.addView(i1, paramsLO);

    btnLO.addView(imageView1, paramsLO);

    btnLO.setGravity(Gravity.LEFT | Gravity.CENTER_HORIZONTAL);

    this.addContentView(btnLO, new LayoutParams());

}

@Override
   protected void onActivityResult(int requestCode, int resultCode, Intent 
   imageReturnedIntent) {
       super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

       if (requestCode == GALLERY_PICTURE) {
            Uri uri = imageReturnedIntent.getData();
            if (uri != null) {
                // User had pick an image.
                Cursor cursor = getContentResolver().query(uri, new String[]  
{  android.provider.MediaStore.Images.ImageColumns.DATA }, null, null, null);
                cursor.moveToFirst();
                final String imageFilePath = cursor.getString(0);
                File photos = new File(imageFilePath);
                yourSelectedImage = decodeFile(photos);
                yourSelectedImage =  
 Bitmap.createScaledBitmap(yourSelectedImage, 150, 150, true);
                imageView1.setImageBitmap(yourSelectedImage);
                cursor.close();
            }
            else {
                Toast toast = Toast.makeText(this, "No Image is selected.",  
Toast.LENGTH_LONG);
                toast.show();
            }
        }
        else if (requestCode == CAMERA_PICTURE) {
            if (imageReturnedIntent.getExtras() != null) {
                // here is the image from camera
                yourSelectedImage = (Bitmap)  
imageReturnedIntent.getExtras().get("data");
                imageView1.setImageBitmap(yourSelectedImage);

            }
        }

    }

   private Bitmap decodeFile(File f) {
        try {
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            while (true) {
                if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 <  
  REQUIRED_SIZE)
                    break;
                width_tmp /= 2;
                height_tmp /= 2;
                scale++;
            }

            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null,  
 o2);
        }
        catch (FileNotFoundException e) {
        }
        return null;
    }

    private void startDialog() {
        AlertDialog.Builder myAlertDialog = new AlertDialog.Builder(this);
        myAlertDialog.setTitle("Upload Pictures Option");
        myAlertDialog.setMessage("How do you want to set your picture?");

        myAlertDialog.setPositiveButton("Gallery", new  
 DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                pictureActionIntent = new Intent(Intent.ACTION_GET_CONTENT,  
   null);
                pictureActionIntent.setType("image/*");
                pictureActionIntent.putExtra("return-data", true);
                startActivityForResult(pictureActionIntent, GALLERY_PICTURE);
            }
        });

        myAlertDialog.setNegativeButton("Camera", new  
DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                pictureActionIntent = new  
 Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

                File dir = new File(Environment.getExternalStorageDirectory()  
 + "/myFolder23");
                if(dir.exists() && dir.isDirectory()) {
                  // do something here
                 }
                else{
                    //create dir here
                    dir.mkdir(); 
                   }
                 Intent pictureActionIntent = new  
 Intent(MediaStore.ACTION_IMAGE_CAPTURE);  

                 pictureActionIntent.putExtra(MediaStore.EXTRA_OUTPUT,  
Uri.fromFile(new
                         File(SDCARD_ROOT_PATH +  
 SAVE_PATH_IN_SDCARD,IMAGE_CAPTURE_NAME)));  

                  startActivityForResult(pictureActionIntent,CAMERA_PICTURE);  

            }
        });
        myAlertDialog.show();
    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:33:30.740

您可以根据需要使用以下方法捕获多个图像

```
private class CaptureThread extends Thread {

    @Override
    public void run() {

        int count = 0;

        while(count < mNo) {
            mFileName = mLocation + "/pic" + count + ".jpg";

            mCamera.takePicture(null, mPictureCallback, mPictureCallback);

            count++;

            try {
                Thread.sleep(3000);
            } catch (InterruptedException exception) {
                exception.printStackTrace();
            }
        }
    } 
```

}

# sql - 如果没有找到结果，SQL 返回行

> ID：14647221
> 
> 赞同：1
> 
> 时间：2013-02-01T13:20:53.413
> 
> 标签：sql, postgresql, null, left-join

我有两张桌子：

```
person
id
name

car
name
person_id 
```

目前查询如下：

```
SELECT
person.name
car.name
FROM
person, car
WHERE
person.id = car.person_id 
```

现在，如果有一辆车与一个人相关联，这可以正常工作。但是，如果没有，则该人将不会被退回。如果一个人没有车，我想用`'No Car'`column中的文本返回一行`car.name`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:22:16.047

```
select person.name, coalesce(car.name, 'no car')
from person
left outer join car on person.id = car.person_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:05:02.317

```
SELECT person.name, CASE WHEN car.name IS NULL THEN 'no car' ELSE car.name END 
FROM person
LEFT JOIN car ON person.id = car.person_id 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T13:23:13.880

```
select person.name, ISNULL(car.name, 'no car')
from person
left join car on person.id = car.person_id 
```

# select - 从 Go 渠道获取价值

> ID：14647226
> 
> 赞同：1
> 
> 时间：2013-02-01T13:21:15.380
> 
> 标签：select, tcp, go, nonblocking, channel

我有一个监听 TCP 连接的 go-routine，并在通道上将这些连接发送回主循环。我在 go-routine 中执行此操作的原因是使此侦听非阻塞并能够同时处理活动连接。

我已经使用带有空默认情况的 select 语句实现了这一点，如下所示：

```
go pollTcpConnections(listener, rawConnections)

for {
    // Check for new connections (non-blocking)
    select {
    case tcpConn := <-rawConnections:
        currentCon := NewClientConnection()
        pendingConnections.PushBack(currentCon)
        fmt.Println(currentCon)
        go currentCon.Routine(tcpConn)
    default:
    }
   // ... handle active connections
} 
```

这是我的 pollTcpConnections 例程：

```
func pollTcpConnections(listener net.Listener, rawConnections chan net.Conn) {
  for {
    conn, err := listener.Accept()  // this blocks, afaik
    if(err != nil) {
        checkError(err)
    }
    fmt.Println("New connection")
    rawConnections<-conn
  }
} 
```

问题是我从来没有收到过这些联系。如果我以阻塞方式执行此操作，如下所示：

```
for {
    tcpConn := <-rawConnections
// ...
} 
```

我收到了连接，但它阻塞了......我也尝试过缓冲通道，但同样的事情发生了。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:55:03.947

根据现有代码，很难说出为什么您没有看到任何连接。您的示例的一个问题是您`default`的语句中有一个空的情况`select`，然后我们看不到在此发生的其他情况`for`环形。按照您编写的方式，该循环可能永远不会屈服于调度程序。您基本上是在说“从频道获取东西。没有？好吧，重新开始。从频道获取东西！”，但您实际上从不等待。当你做一些阻塞你的 goroutine 的操作时，那个 goroutine 让给调度程序。因此，当您以正常方式读取通道时，如果没有要读取的值，则该 goroutine 将被阻塞读取。由于它被阻塞了，它也让调度器允许其他 goroutines 继续在底层线程上执行。我很确定这就是为什么你`select`的空虚`default`正在破坏的原因；您正在导致该 goroutine 在循环中无限`for`循环，而不会屈服于调度程序。

目前尚不清楚它的作用`pendingConnections`是什么，或者是否需要它。

从行为中无法分辨的另一件事是您的`checkError`函数的作用。例如，它不会继续到`for`循环的顶部或保释。

无论如何，看起来这比它需要的更复杂。只需有一个将新连接作为参数的函数，然后在连接时在新的 goroutine 中启动它。我总是这样写：

```
func handleConnection(c net.Conn) {
    // do something with your connection here.
}

for {
    // Wait for a connection.
    conn, err := l.Accept()
    if err != nil {
        // do something with your error.  You probably want to break or return here.
        break
    }
    // handle each connection in a new goroutine
    go handleConnection(conn)
} 
```

这或多或少正是他们在[文档](http://golang.org/pkg/net/#Listener)中所做的。

# vb.net - 检查文本文件中的每一行是否包含某个字符串，并将执行的字符串添加到列表框中？

> ID：14647234
> 
> 赞同：0
> 
> 时间：2013-02-01T13:21:43.550
> 
> 标签：vb.net

以下代码有效，只需将每一行作为列表框中的一行。

```
Reader = IO.File.OpenText(textlocation)
Dim bookmarks() As String = Reader.ReadToEnd.Split(vbNewLine)
Dim i As Integer = 0

Do Until i = bookmarks.Length
  lstFavorites.Items.Add(bookmarks(i))
  i += 1
Loop 
```

但我不希望每一行都进入文本框。我只希望包含文本“书签”的行进入列表框。我能做些什么来实现这一目标？我已经尝试了我能想到的一切。

这是我尝试过的一些代码，我看不到其中的问题，但它似乎只是让我的程序崩溃。

```
Do Until i = bookmarks.Length
  If bookmarks(i).Contains("at") Then
    If radBookmarks.Checked Then
      If bookmarks(i).Contains("Bookmark") Then
        Original = bookmarks(i)
        BeginningOfDemoName = Original.Substring(Original.LastIndexOf("(") + 2)
        TickWithParenthesis = BeginningOfDemoName.Substring(BeginningOfDemoName.IndexOf(Chr(34)) + 4)
        Tick = TickWithParenthesis.Split(" ")(1).Split(")")(0)
        DemoName = BeginningOfDemoName.Split(Chr(34))(0)
        ToList = DemoName + " at " + Tick
        lstFavorites.Items.Add(ToList)
        i += 1
      Else
        i += 1
      End If
    ElseIf radEverything.Checked Then
      Original = bookmarks(i)
      BeginningOfDemoName = Original.Substring(Original.LastIndexOf("(") + 2)
      TickWithParenthesis = BeginningOfDemoName.Substring(BeginningOfDemoName.IndexOf(Chr(34)) + 4)
      Tick = TickWithParenthesis.Split(" ")(1).Split(")")(0)
      DemoName = BeginningOfDemoName.Split(Chr(34))(0)
      ToList = DemoName + " at " + Tick

      lstFavorites.Items.Add(ToList)
      i += 1
    End If
  End If
Loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:54:48.073

尝试更改此行

```
 If bookmarks(i).Contains("Bookmark") Then 
```

至

```
 If bookmarks(i).IndexOf("Bookmark", 
                 StringComparison.CurrentCultureIgnoreCase) >= 0 Then 
```

包含进行区分大小写的比较，并且您的输入字符串包含小写的“书签”

# html - Internet Explorer 中的布局混乱，但在其他浏览器中很好

> ID：14647237
> 
> 赞同：0
> 
> 时间：2013-02-01T13:21:51.760
> 
> 标签：html, css, internet-explorer, jsfiddle

我的布局有一个大问题。

使用 IE9 布局混乱，而在所有其他主要浏览器（chrome、safari、opera 和 Firefox）中的布局都很好，没有问题。是什么导致 IE9 中的布局混乱？

这是嵌入的 jsfiddle 以显示代码和布局：http: [//jsfiddle.net/gRdGx/1/](http://jsfiddle.net/gRdGx/1/)

jsfiddle 在这里只是为了表明它并排显示功能，这是我想要的所有浏览器的布局，但正如我已经说过的，它唯一没有这样做的浏览器是`IE`.

下面是一个屏幕截图，显示了它在 IE 9 和其他浏览器中显示的布局：

![在此处输入图像描述](../Images/7775be16c33c1976ced4616d5011fe35.png)

**更新：**

这可能是由于可能导致此问题的兼容性问题。如果是这样，是否有人知道如何稍微更改代码以使布局适用于 IE9 及其 6/7/8 的旧版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:42:31.297

在小提琴的 HTML 中，我发现：

```
<table class="answerSection">
    <tr>
        <tr>
        ...
        </tr>
</table> 
```

由于这不是有效的 HTML，因此由浏览器来充分利用它。这可能是错误的根源吗？

1.  HTML 创作的第一条规则：我们总是验证我们的 HTML
2.  HTML 创作的第二条规则：我们**总是**验证我们的 HTML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:32:21.187

添加`<!DOCTYPE html>`到您的 html 的最末尾。

这将使您的 IE 像大多数其他页面一样管理页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:19:51.310

`inline-block`在您使用它的表上尝试这个 IE7 修复：

```
TABLE_ID{
display: inline-block;
zoom: 1;
*display: inline;
} 
```

# php - 如何通过使用 sql 查询添加自己的行来选择记录以供 PHP MYSQL 使用

> ID：14647238
> 
> 赞同：0
> 
> 时间：2013-02-01T13:21:53.697
> 
> 标签：php, mysql

我很难找到这个问题的解决方案。在 PHP 中为这个问题提出任何解决方案。

我有一个名为 test_repeat 的表

```
id  start   repeater   length     final
 1   20       2           3         50
 2   10       50          4        500 
```

我的查询是

```
SELECT T.id AS ID, T.start AS start, T.repeater AS repeater 
       T.length AS length, T.final AS final
FROM `test_repeater` T
RIGHT JOIN `test_repeater` T2 ON T.id = T2.id 
WHERE T.start>=10 and T2.start*T2.repeater<=300 
```

我得到的结果是

```
ID  start  repeater   length    final    
1   20       2          3        50       
2   10       5          12       500 
```

我想要得到的是这样的结果，即每个起始值都与转发器一起添加，并使该值成为下一个原始值，直到最终条件适用（请参见下文）

我梦想的结果会是这样

```
 ID   start   repeater   length     final
   1     20       2           3         50
   1     22       2           3         50
   1     24       2           3         50
   1     ...      .           .         ...
   1     ...      .           .         ...
   1     50       2           3         50
   2     10       5           4         500
   2     15       5           4         500
   2     20       5           4         500
   2     25       5           4         500
   2     30       5           4         500
   2     35       5           4         500
   2     ...      .           .         ...
   2     ...      .           .         ...
   2     ...      .           .         ...
   2     500      5           4         500 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:53:22.800

好的。这更有意义...

```
 DROP TABLE IF EXISTS test_repeat;

 CREATE TABLE test_repeat
 (id  INT NOT NULL AUTO_INCREMENT PRIMARY KEY
 ,start   INT NOT NULL
 ,repeater   INT NOT NULL
 ,length     INT NOT NULL
 ,final INT NOT NULL
 );

 INSERT INTO test_repeat VALUE
 (1,   20       ,2           ,3         ,50),
 ( 2   ,10       ,5          ,4        ,500);

 DROP TABLE IF EXISTS ints;

 CREATE TABLE ints(i INT NOT NULL PRIMARY KEY);

 INSERT INTO ints VALUES (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);

 SELECT r.id
      , r.start+(r.repeater*(i2.i*10+i1.i)) start
      , repeater
      , length
      , final 
   FROM test_repeat r 
   JOIN ints i1
   JOIN ints i2
  WHERE r.start+(r.repeater*(i2.i*10+i1.i)) BETWEEN r.start AND r.final
  ORDER 
     BY id
      , start; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:30:02.643

```
 SELECT T.id AS ID, T.start*T.repeater AS mymultipliedstart, 
           T.length AS length, T.final AS final
    FROM `test_repeater` T
    RIGHT JOIN `test_repeater` T2 ON T.id = T2.id 

WHERE T.start>=10 and T2.start*T2.repeater<=300 
```

# image - 以图片为参数的 Google 图片搜索如何工作？

> ID：14647244
> 
> 赞同：1
> 
> 时间：2013-02-01T13:22:07.820
> 
> 标签：image, search, comparison

我对谷歌如何使用图像进行图像搜索感兴趣。我正在做一个图像比较和使用图像搜索的项目，考虑到使用图像的谷歌图像搜索似乎令人印象深刻，我很好奇他们做了什么。

我还想知道他们实际上做了多少图像比较以及他们在图像周围使用了多少关键字等。

# ms-access - ms-access + vb6：没有存储查询的参数化查询

> ID：14647251
> 
> 赞同：0
> 
> 时间：2013-02-01T13:22:28.853
> 
> 标签：ms-access, stored-procedures, vb6, parameterized-query

我想知道在 ms-access through vb6 (ADODB) 中是否可以享受参数化查询的安全优势

```
 Set Prm = CmdEnn.CreateParameter("pText1", adBSTR, adParamInput)
    Prm.Value = pText1
    Cmd.Parameters.Append Prm 
```

不使用存储过程。所以有类似的东西：

```
 Cmd.CommandText = "select * from ..."
    Cmd.CommandType = adCmdText 
```

代替

```
 Cmd.CommandText = "stored_query_name"
    Cmd.CommandType = adCmdStoredProc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:11:40.437

@KekuSemau，

```
Cmd.CommandText = "select * from tablename where column like @pText1"
Cmd.CommandType = adCmdText
Set Prm = CmdEnn.CreateParameter("pText1", adBSTR, adParamInput)
Prm.Value = random_variable
Cmd.Parameters.Append Prm 
```

它是这样工作的，但归根结底，我没有因为其他原因使用它。我不记得我是否必须在它周围使用单引号。

# jsf - h:outputText 不会将 \r\n 字符分成新行

> ID：14647274
> 
> 赞同：52
> 
> 时间：2013-02-01T13:23:53.273
> 
> 标签：jsf, output, line-breaks

我有一个`String`包含回车和换行符的变量`\r\n`。

```
text = "Text1\r\nText2\r\nText3"; 
```

我正在使用`<h:outputtext>`.

```
<h:outputText value="#{bean.text}" /> 
```

但它不识别换行符，并在 webbrowser 中显示如下。

> 文本 1 文本 2 文本 3

为什么不`<h:outputText>`换`\n`行？

我该怎么办？我必须用 替换`\n`吗`<br />`？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-02-01T13:51:19.663

HTML 中的换行符由`<br />`元素表示，而不是由`\n`字符表示。更重要的是，通过右键单击打开普通的 HTML 源代码，在浏览器中*查看源*代码，您将“看到”`\n`所有地方。然而，它们在最终的 HTML 演示文稿中并未如此呈现。只有`<br />`意志。

所以，是的，您需要将它们替换为`<br />`. 您可以为此使用[JSTL 函数：](https://javaserverfaces.github.io/docs/2.3/vdldocs/facelets/fn/tld-summary.html)

```
<... xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions">

<h:outputText value="#{fn:replace(bean.text,'\n','&lt;br/&gt;')}" escape="false" /> 
```

注意：当使用 Apache EL 而不是 Oracle EL 时，双转义反斜杠，如`\\n`.

```
<h:outputText value="#{fn:replace(bean.text,'\\n','&lt;br/&gt;')}" escape="false" /> 
```

否则，您将面临消息异常`Failed to parse the expression with root cause org.apache.el.parser.ParseException: Encountered <ILLEGAL_CHARACTER>`。

然而，这一切都很丑陋，如果值来自最终用户输入并且您没有事先对其进行[清理，那么它对](https://stackoverflow.com/questions/3410526/how-to-implement-a-possibility-for-user-to-post-some-html-formatted-data-in-a-sa)[XSS 攻击](https://stackoverflow.com/questions/7722159/csrf-xss-and-sql-injection-attack-prevention-in-jsf)`escape="false"`很敏感。更好的选择是继续使用[CSS](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)[属性](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)并将其设置为在父元素上预先格式化。如果您想在块元素的上下文中换行，请设置. 或者，如果您还想折叠空格和制表符，请设置.`\n`[`white-space`](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)`pre-wrap``pre-line`

例如

```
<h:outputText value="#{bean.text}" styleClass="preformatted" /> 
```

```
.preformatted {
    white-space: pre-wrap;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-01T13:52:11.820

这是正常的行为，在 HTML 中，空格和换行符等连续的空白被规范化，因此它只显示为一个空格。如果您直接在 HTML 源代码中包含带有换行符的文本，您将获得相同的显示。要尊重输出中的换行符，您必须将文本包装在`pre`标签中或应用样式表类：

```
<pre><h:outputText value="..."/></pre>

<div style="white-space: pre-wrap"><h:outputText value="..."/></div> 
```

有关该`white-space`属性的其他可能值，请查看此页面：[http ://www.w3schools.com/cssref/pr_text_white-space.asp](http://www.w3schools.com/cssref/pr_text_white-space.asp)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-22T23:06:13.633

以前的答案给我带来了大量文本的问题，比如非常宽的输出（没有文本换行），这`style="white-space: pre-wrap"`没有解决；或者它只是显示`&lt;br/&gt;`为文本，而不是行尾。

最后，我使用该`h:inputTextarea`组件显示文本并将其设置为“只读”，无需替换换行符即可直接工作，也不必使用额外的样式或 styleClasses。而且，它可以调整大小以适应用户的需求，这是一个奖励。

```
<h:inputTextarea cols="70" rows="10" readonly="true" value="#{bean.text}" /> 
```

对于少量文本，我发现`pre-wrap`上面 henko 建议的选项效果很好。

# jquery - Firefox 17+ 无限跳动

> ID：14647279
> 
> 赞同：1
> 
> 时间：2013-02-01T13:24:13.370
> 
> 标签：jquery, firefox, jquery-cycle

在测试新网站时，我发现 Firefox 17、18 和 19（测试版）存在问题/错误。我使用 jquery cycle2 进行了图像旋转，这种旋转似乎导致 Firefox 永远无法完成加载网站（无限的 Throbber，可以从 Firebug 获取加载时间）。

我为我的问题做了一个测试用例，甚至找到了解决方案，但想知道为什么 Firefox 不喜欢我的第一个代码（index_01.html）。

所有其他浏览器都可以工作，即使是 Firefox 16。

这是测试用例-> [http://www.mediafire.com/?ccneccr3czccac4](http://www.mediafire.com/?ccneccr3czccac4)

# jquery - Nodejs & socket io：警告 - 引发错误：错误：监听 EADDRINUSE

> ID：14647282
> 
> 赞同：12
> 
> 时间：2013-02-01T13:24:16.830
> 
> 标签：jquery, node.js, sockets, websocket

我正在尝试使用 socket.io 的 Node.js

现在这是我的场景，我是 ubuntu 12.04 用户，我在桌面上有文件夹 pp

在里面我放了服务器文件，即 `app.js`

这里是内容

```
var fs = require('fs')
    , http = require('http')
    , socketio = require('socket.io');

var server = http.createServer(function(req, res) {
    res.writeHead(200, { 'Content-type': 'text/html'});
    res.end(fs.readFileSync(__dirname + '/index.html'));
}).listen(8080, function() {
    console.log('Listening at: http://localhost:8080');
});

socketio.listen(server).on('connection', function (socket) {
    socket.on('message', function (msg) {
        console.log('Message Received: ', msg);
        socket.broadcast.emit('message', msg);
    });
}); 
```

现在在同一个文件夹中我有另一个文件 index.html 像

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        $(function(){
            var iosocket = io.connect();

            iosocket.on('connect', function () {
                $('#incomingChatMessages').append($('<li>Connected</li>'));

                iosocket.on('message', function(message) {
                    $('#incomingChatMessages').append($('<li></li>').text(message));
                });
                iosocket.on('disconnect', function() {
                    $('#incomingChatMessages').append('<li>Disconnected</li>');
                });
            });

            $('#outgoingChatMessage').keypress(function(event) {
                if(event.which == 13) {
                    event.preventDefault();
                    iosocket.send($('#outgoingChatMessage').val());
                    $('#incomingChatMessages').append($('<li></li>').text($('#outgoingChatMessage').val()));
                    $('#outgoingChatMessage').val('');
                }
            });
        });
    </script>
</head>
<body>
Incoming Chat: <ul id="incomingChatMessages"></ul>

<input type="text" id="outgoingChatMessage">
</body> 
```

当我尝试使用节点运行 app.js 时

```
 node app.js 
```

我收到错误

```
 warn  - error raised: Error: listen EADDRINUSE 
```

我浏览了一些文档，发现端口很忙，所以重新启动了系统，但我仍然遇到同样的错误。

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T13:28:20.820

尝试另一个端口。8080通常由tomcat使用，例如

用于`netstat -a -v`了解当前使用的端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T22:13:22.607

一个超级愚蠢/简单的可能性是确保您没有打开多个终端窗口。我收到此错误并意识到我有第二个预先存在的连接，我已经启动了我的应用程序。当我关闭它并重新启动应用程序时，错误消失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:09:48.360

您没有连接到您的服务器，这是错误的：

```
var iosocket = io.connect(); 
```

这是正确的：

```
var iosocket = io.connect('http://localhost:8080'); 
```

此外，“http-proxy”在您的服务器上使用您的端口 8080，请尝试其他端口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T13:32:25.607

在我看来，您没有连接到客户端的主机：

```
var iosocket = io.connect('http://localhost:8080'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-13T18:26:30.140

下面是一个针对初学者的示例，说明如何设置 NodeJS + Express + SocketIO，以便在第二次启动应用程序时不会出现 EADDRINUSE 错误：

```
'use strict';

// Init
var http = require('http');
var express = require('express');
var socketIO = require('socket.io');
var cors = require('cors');

// Create Server app
var app = express();
var server = http.createServer(app);
var io = socketIO(server);

// Socket.io settings
io.set('browser client minification', true);
io.set('browser client etag', true);
io.set('browser client gzip', true);
io.set('browser client expires', true);

// Starting Express server
server.listen(serverPort, function() {
  console.log(chalk.green('Server is running on localhost:' + serverPort + '...'));
});

// Middleware
app.use(cors());

// Routes
app.get('/', function(req, res) {
    res.send("Hello world!");
    console.log("Root visited!");
    // Broadcast socketIO message inside Express
    io.emit('new_message', "Hello world!");
});

// Socket.io
var connections = [];
var title = "Untitled";

io.sockets.on('connection', (socket) => {

    socket.once('disconnect', () => {
        connections.splice(connections.indexOf(socket), 1);
        socket.disconnect();
        console.log('Disconnected: %s. Remained: %s.', socket.id, connections.length)
    });

    // ...

    connections.push(socket);
    console.log('Connected: %s. Total: %s', socket.id, connections.length);
}); 
```

我认为这是一个有用的例子，我希望它能帮助遇到问题的人设置这一切。

# iphone - 如何在另一个视图控制器中侦听 didSelectRowAtIndexPath 更改

> ID：14647283
> 
> 赞同：-1
> 
> 时间：2013-02-01T13:24:18.553
> 
> 标签：iphone, ios, objective-c, uitableview

我想听/检测一个`didSelectRowAtIndexPath:`变化`viewController1`，然后根据这个选择改变一些`viewController2`。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:59:35.113

使用 KVO。

首先在 ViewController1.h 中创建一个@property：

```
@property (strong, nonatomic) NSIndexPath *selectedIndexPath; 
```

在 ViewController1.m 中：

```
@synthesize selectedIndexPath;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(indexPath!=self.selectedIndexPath) self.selectedIndexPath = indexPath; //this will fire the property changed notification 
```

在 ViewController2.m 中，假设您已经引用了 ViewController1（即 vc1），请在 viewDidLoad 中设置 Observer：

```
-(void)viewDidLoad
{
     [super viewDidLoad];
     [vc1 addObserver:self forKeyPath:@"selectedIndexPath" options:NSKeyValueObservingOptionNew context:NULL];
     //other stuff 
```

最后在 ViewController2 的某处添加以下内容

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    //inspect 'change' dictionary, fill your boots

    ...
} 
```

埃塔：

您还必须删除 ViewController2 的 dealloc 中的观察者：

```
-(void)dealloc
{
    [vc1 removeObserver:self forKeyPath:@"selectedIndexPath"];
    ...
} 
```

# c++ - 在超过 1 个（多个）'std::map's 或 'std::set's 中找到一个键的最佳方法？

> ID：14647288
> 
> 赞同：0
> 
> 时间：2013-02-01T13:24:39.840
> 
> 标签：c++, performance, search, map, set

将以`std::map`最少的数据为例。
我有2张地图如下：

```
map<string, Object*> map_ShortKey; // keys are single English words
map<string, Object*> map_LongKey; // keys are concatenated English words 
```

在`map_ShortKey`程序开始时填充了大约 50 个元素，并且始终保持不变。但是在`map_LongKey`整个程序中不断增加，它可能会达到 1000-10000 个元素。

当我想在这些地图中搜索一个词时，最好的方法是什么？

(1) 先在 中搜索`map_ShortKey`，如果没有则在 中搜索`m_LongKey`。
(2) 添加`map_ShortKey`到`m_LongKey`然后搜索

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:30:11.287

你的意思是搜索一个词，还是搜索一个键？

如果`map_LongKey`包含连接的单词，则搜索连接的第一个单词将不成功。

但是，如果您正在搜索实际上是其中一张地图中的关键的东西，那么 (2) 的答案取决于很多事情 - 需要更多信息。

如果您关心速度，那么首先在最有可能包含密钥的地图中搜索。

如果速度不是您关心的问题，那么为了清晰起见构建您的代码 - 这是否涉及将地图合并在一起或以其他方式取决于您的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:30:27.673

这取决于成功查找的可能性`map_Shortkey`——如果很有可能，那么您只需在此搜索中花费 6 个“步骤”[log2(n)]，其中`map_LongKey`列表中的搜索平均为 10-13 个“步骤”。

另一方面，如果您不太可能在 中找到您要查找的内容`map_shortKey`，那么在大集合中的另外 50 个元素中进行搜索的额外负载不会产生太大影响。

由于我们不知道成功的统计数据，因此很难说哪种方法更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T13:34:42.593

如果您喜欢最坏情况的复杂性并且对您的搜索*一无所知*（例如，在一张地图中比在另一张地图中更可能找到密钥），那么我会选择方法 1）。

在 an 中查找`std::map`具有**对数**的最坏情况复杂性，因此在第一种情况下，您最终会遇到`log(n) + log(m)`查找的最坏情况复杂性（假设您的地图分别具有`n`和`m`元素）。因此，`k`查找将花费您`k * (log(n) + log(m))`。

映射中的插入也具有对数复杂性，因此在第二种情况下，您将强制`m`从一个映射插入另一个映射，然后在带有`m + n`元素的映射中查找。因此，对于`k`查找（假设您只是第一次进行插入），您将获得`m * log(n) + k * log(n + m)`最坏情况的复杂性。

因此，如果您关心最坏情况的复杂性，则方法 1) 是可取的，只要：

```
k * (log(n) + log(m)) < m * log(n) + k * log(n + m) 
```

`k`您可以根据您的工作量`n`和输入的大小进行估算`m`，然后进行数学运算以找出最好的（然后通过测量来仔细检查）。

# html - HTML-5 日期字段在 Chrome 中显示为“mm/dd/yyyy”，即使设置了有效日期

> ID：14647290
> 
> 赞同：51
> 
> 时间：2013-02-01T13:24:45.620
> 
> 标签：html, google-chrome

我刚刚将一个 ASP.Net MVC 应用程序升级到 MVC-4。基于 DateTime 值的输入字段编辑器现在包括 HTML-5`type="date"`属性/值声明。

现在，在 Chrome 中查看时，我的日期输入在输入字段中显示为“mm/dd/yyyy”：

![框中带有“mm/dd/yyyy”的日期字段](../Images/8937e3f2b7afc0ee2ca8b90203bffb1c.png)

即使我使用 value 属性传入格式正确的日期：

```
<input value="2012/10/02" type="date"/> 
```

我仍然在输入框中得到“mm/dd/yyyy”，直到用户手动更改值。

问题似乎出在 Chrome 上，并且与我的后端框架无关。看看这个问题的实际效果：[jsFiddle](http://jsfiddle.net/HudMe/1/)

...编辑记录的大问题，当然。如果用户提取了已经具有有效日期的记录，则提交时将不会通过验证，除非她/他单击该字段并手动重置该值。

其他浏览器没有问题。

**这是 Chrome 错误吗？还是我错过了 HTML-5 日期字段的工作方式？**

**更新**
请参阅此修订小提琴： http: [//jsfiddle.net/HudMe/5/](http://jsfiddle.net/HudMe/5/) 它同时具有 HTML-4 和 HTML-5 日期输入，每个都将“10/01/2012”设置为页面加载值.

单击任一日期字段。Javascript 应该使用该元素的字段值发出警报。

因为通过 value 属性传入了一个有效日期，所以它应该显示“10/01/2012”，但在 Chrome 中，对于 HTML-5 日期字段，什么都没有显示。手动重置此值，然后再次单击，它现在将显示。

在 Safari、Firefox、IE 和 Opera 中页面加载后，HTML5 字段的值无需调整即可按预期显示和提醒。

**接受答案的注意事项：**
对于 Asp.net mvc-4 的其他用户，您可以使用`[DisplayFormat]`视图模型中 DateTime 字段声明中的属性调整显示格式。（可在[https://stackoverflow.com/a/12634470/613004](https://stackoverflow.com/a/12634470/613004)找到）

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-01T14:15:19.833

在 chrome 中设置你需要做的值`YYYY-MM-DD`我猜是因为这有效：http: [//jsfiddle.net/HudMe/6/](http://jsfiddle.net/HudMe/6/)

因此，要使其正常工作，您需要将日期设置为`2012-10-01`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T14:11:24.760

有同样的问题。一位同事用[jQuery.Globalize](https://github.com/jquery/globalize)解决了这个问题。

```
<script src="/Scripts/jquery.validate.js" type="text/javascript"></script>
<script src="/Scripts/jquery.globalize/globalize.js" type="text/javascript"></script>
<script src="/Scripts/jquery.globalize/cultures/globalize.culture.nl.js"></script>
<script type="text/javascript">
    var lang = 'nl';

    $(function () {
        Globalize.culture(lang);
    });

    // fixing a weird validation issue with dates (nl date notation) and Google Chrome
    $.validator.methods.date = function(value, element) {
        var d = Globalize.parseDate(value);
        return this.optional(element) || !/Invalid|NaN/.test(d);
    };
</script> 
```

我正在使用 jQuery Datepicker 来选择日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-08T14:21:36.187

我遇到了同样的问题，值类似于 2016-08-8，然后我解决了添加一个零以有两位数天的问题，并且它有效。在 chrome、firefox 和 Edge 中测试

```
today:function(){
   var today = new Date();
   var d = (today.getDate() < 10 ? '0' : '' )+ today.getDate();
   var m = ((today.getMonth() + 1) < 10 ? '0' :'') + (today.getMonth() + 1);
   var y = today.getFullYear();
   var x = String(y+"-"+m+"-"+d); 
   return x;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-02T08:52:04.723

我有同样的问题，我找到了下面给出的解决方案，它使用简单的 HTML、Javascript 和 CSS 使用完整的日期选择器。在这段代码中，我准备像 dd/mm/yyyy 这样的甲酸盐，但你可以工作任何。

HTML 代码：

```
 <body>
<input type="date" id="dt" onchange="mydate1();" hidden/>
<input type="text" id="ndt"  onclick="mydate();" hidden />
<input type="button" Value="Date" onclick="mydate();" />
</body> 
```

CSS 代码：

```
#dt{text-indent: -500px;height:25px; width:200px;} 
```

Javascript代码：

```
function mydate()
{
  //alert("");
document.getElementById("dt").hidden=false;
document.getElementById("ndt").hidden=true;
}
function mydate1()
{
 d=new Date(document.getElementById("dt").value);
dt=d.getDate();
mn=d.getMonth();
mn++;
yy=d.getFullYear();
document.getElementById("ndt").value=dt+"/"+mn+"/"+yy
document.getElementById("ndt").hidden=false;
document.getElementById("dt").hidden=true;
} 
```

输出：

[![在此处输入图像描述](../Images/487f031055ba326fa1e2f22dd7528534.png)](https://i.stack.imgur.com/QmFug.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-05T17:20:20.473

如果您正在处理一个表格并且其中一个日期恰好为空，您可以这样编码：

```
 @{
     if (Model.SomeCollection[i].date_due == null)
       {
         <td><input type='date' id="@("dd" + i)" name="dd" /></td>
       }
       else
       {
         <td><input type='date' value="@Model.SomeCollection[i].date_due.Value.ToString("yyyy-MM-dd")" id="@("dd" + i)" name="dd" /></td>
       }
   } 
```

# mysql - mySQL - 整个上个月

> ID：14647291
> 
> 赞同：2
> 
> 时间：2013-02-01T13:25:02.090
> 
> 标签：mysql, sql, date, between

我正在尝试使用以下语句检查上个月发生的所有记录。

```
Select  *  from statistics 
where statistics_date  
BETWEEN date_format(NOW() - INTERVAL 1 MONTH, '%Y-%m-01') 
AND last_day(NOW() - INTERVAL 1 MONTH ) 
```

但是，选择不包括最后一天。我想要的是从每月的第一秒到最后一秒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T13:42:41.687

`BETWEEN`众所周知，日期和时间戳的工作很糟糕，因为它弄错了结束日期。

这是您需要的：

首先，让我们计算本月的第一天。你说的完全正确。

```
 DATE_FORMAT(NOW(),'%Y-%m-01') 
```

接下来，让我们计算上个月的第一天：

```
 DATE_FORMAT(NOW(),'%Y-%m-01') - INTERVAL 1 MONTH 
```

现在，我们选择位于区间内的记录。

```
Select * 
  from statistics 
 where statistics_date   >=   DATE_FORMAT(NOW(),'%Y-%m-01') - INTERVAL 1 MONTH
   and statistics_date   <    DATE_FORMAT(NOW(),'%Y-%m-01') 
```

您是否看到日期范围的开头是如何选择的，`>=`而日期范围的结尾是如何选择的`<`？您是否看到我如何使用本月的第一天作为日期范围的结束？这些事情很重要，因为时间戳可以包含日期和时间。考虑时间戳“2013-01-31 23:58”。它恰好*在*'2012-01-31'之后，所以*不会*抓住它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:27:26.843

`where MONTH(statistics_date) = MONTH(NOW()) - 1`

# nhibernate - 不持久的值对象列表

> ID：14647294
> 
> 赞同：0
> 
> 时间：2013-02-01T13:25:10.700
> 
> 标签：nhibernate, fluent-nhibernate

我有这个映射：

```
mapping.HasMany(x => x.Blas)
                  .Component(comp =>
                  {
                      comp.Map(x => x.X1);
                      comp.Map(x => x.X2);
                  }).Cascade.All(); 
```

不幸的是，存储在名为 Blas 的列表中的值对象 Bla 不是持久化的。bla 值对象的表存在，并且包含 Blas 列表的父对象很好地持久化。我认为 Cascade.All 负责 Bla 对象的“流畅”持久性，但这似乎不起作用。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:41:19.227

如果 Bla 类有自己的表，则必须为其提供法线映射。组件将属性映射到同一个表，这在 HasMany 语句中不应该工作。所以做一个`ClassMap<Bla>`并删除`Component`声明。

# c++ - 在 XCode 4.5.2 c++ 项目中链接 boost 序列化静态库

> ID：14647297
> 
> 赞同：1
> 
> 时间：2013-02-01T13:25:18.533
> 
> 标签：c++, xcode, boost

我正在 Mac OSX 10.8 (Mountain Lion) 上构建应用程序，但遇到与 Boost 库 (serialisation.a) 相关的链接错误。我在同一个项目中使用其他 Boost 二进制文件并且它们没有引发任何问题，所以我非常有信心我已经正确构建了这些库（我选择为 Darwin 工具集构建整个库套件） . 出于同样的原因，我有理由相信我的链接器路径设置正确。我知道这个列表中没有很多 Mac 开发人员，但我想知道是否有人可以提供任何建议。该项目由 XCode 4.5.2 处理并使用 GCC 4.2 编译器。以下是构建的输出（我只包括了第一个错误——其余的都是主题的变体，都指的是 Boost::archive 或 Boost::

```
Ld /Users/tim/Library/Developer/Xcode/DerivedData/SurfaceReader-fwryryuvfvwihnglkuymbbjtxpac/Build/Products/Debug/SurfaceReader.app/Contents/MacOS/SurfaceReader normal x86_64
    cd /Users/tim/Developer/SurfaceReader
    setenv MACOSX_DEPLOYMENT_TARGET 10.8
    /Applications/Xcode.app/Contents/Developer/usr/bin/llvm-g++-4.2 -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -L/Users/tim/Library/Developer/Xcode/DerivedData/SurfaceReader-fwryryuvfvwihnglkuymbbjtxpac/Build/Products/Debug -L/users/tim/developer/libraries/boost_1_50_0/lib -L/users/tim/developer/libraries/cryptopp561 -F/Users/tim/Library/Developer/Xcode/DerivedData/SurfaceReader-fwryryuvfvwihnglkuymbbjtxpac/Build/Products/Debug -filelist /Users/tim/Library/Developer/Xcode/DerivedData/SurfaceReader-fwryryuvfvwihnglkuymbbjtxpac/Build/Intermediates/SurfaceReader.build/Debug/SurfaceReader.build/Objects-normal/x86_64/SurfaceReader.LinkFileList -mmacosx-version-min=10.8 -L/Users/tim/developer/libraries/wxwidgets-2.9.4/build-debug/lib -framework IOKit -framework Carbon -framework Cocoa -framework AudioToolbox -framework System -framework OpenGL /Users/tim/developer/libraries/wxwidgets-2.9.4/build-debug/lib/libwx_osx_cocoau_xrc-2.9.a /Users/tim/developer/libraries/wxwidgets-2.9.4/build-debug/lib/libwx_osx_cocoau_webview-2.9.a /Users/tim/developer/libraries/wxwidgets-2.9.4/build-debug/lib/libwx_osx_cocoau_qa-2.9.a /Users/tim/developer/libraries/wxwidgets-2.9.4/build-debug/lib/libwx_baseu_net-2.9.a /Users/tim/developer/libraries/wxwidgets-2.9.4/build-debug/lib/libwx_osx_cocoau_html-2.9.a /Users/tim/developer/libraries/wxwidgets-2.9.4/build-debug/lib/libwx_osx_cocoau_adv-2.9.a /Users/tim/developer/libraries/wxwidgets-2.9.4/build-debug/lib/libwx_osx_cocoau_core-2.9.a /Users/tim/developer/libraries/wxwidgets-2.9.4/build-debug/lib/libwx_baseu_xml-2.9.a /Users/tim/developer/libraries/wxwidgets-2.9.4/build-debug/lib/libwx_baseu-2.9.a -framework WebKit -lexpat -lwxregexu-2.9 -lwxtiff-2.9 -lwxjpeg-2.9 -lwxpng-2.9 -lz -lpthread -liconv -stdlib=libc++ -fobjc-arc -fobjc-link-runtime -framework CoreMIDI -framework CoreAudio -framework Cocoa -lboost_filesystem -lboost_iostreams -lboost_serialization -lboost_system -lcryptopp -o /Users/tim/Library/Developer/Xcode/DerivedData/SurfaceReader-fwryryuvfvwihnglkuymbbjtxpac/Build/Products/Debug/SurfaceReader.app/Contents/MacOS/SurfaceReader

Undefined symbols for architecture x86_64:

  "boost::archive::basic_xml_iarchive<boost::archive::xml_wiarchive>::load_start(char const*)", referenced from:
      void boost::archive::basic_xml_iarchive<boost::archive::xml_wiarchive>::load_override<std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> > >(boost::serialization::nvp<std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> > > const&, int)in SurfaceFrame.o 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T09:13:53.037

**将Apple LLVM 标准编译器 4.2 - 语言**/ **C++ 标准库**设置从*libc++ (LLVM)*更改为*libstdc++ (GNU)*为我解决了同样的情况。

# c# - 如何仅在graphsharp中的特定顶点上设置鼠标单击事件？

> ID：14647298
> 
> 赞同：0
> 
> 时间：2013-02-01T13:25:19.903
> 
> 标签：c#, wpf, graph-sharp

我正在使用 graphsharp 并在不同类型的顶点中显示不同的图片，但是我找不到仅在显示特定图片鼠标单击事件的特定类型的顶点上设置的方法。我只需要特定的顶点来处理事件。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-24T13:39:06.833

尝试直接使用而不使用触发器...我在顶点上下文菜单上使用它

```
<Style TargetType="{x:Type GraphSharp_Controls:VertexControl}">
<Setter Property="ContextMenu">
    <Setter.Value>
        <ContextMenu>
            <ContextMenu.ItemContainerStyle>
                <Style TargetType="MenuItem">
                    <EventSetter Event="Click" Handler="ContextMenuClick"/>
                    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:51:38.743

您可以使用 WPF 中的样式和绑定设置事件处理程序，如下所示：

```
<Style>
   <Style.Triggers>
       <Trigger Property="[APropertyOfVertex]" Value="[YourValue]">
           <EventSetter Event="Click" Handler="Click_Handler" />
       </Trigger>
   </Style.Triggers>
</Style> 
```

希望这有帮助

# php - 检测用于导航到新网页的源链接或按钮

> ID：14647302
> 
> 赞同：0
> 
> 时间：2013-02-01T13:25:26.887
> 
> 标签：php, html

网页上有一个按钮和一个链接，两者都转到同一个下一页。当用户登陆下一页时，我想知道他们是否点击了上一页的按钮或链接。

如何在登录页面的 php 中获取该信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:31:44.840

**更新**：

向链接和按钮添加一些额外的参数。

对于链接：

```
<a href="page.php?param1=1&param2=2&source=link">link text</a> 
```

对于按钮：

```
<form ...>
<input type="hidden" name="source" value="button">
...
<input type="button" ...>
</form> 
```

在处理页面输入时，检查`$_REQUEST['source']`

# xml - 解析器未忽略 CDATA 部分

> ID：14647306
> 
> 赞同：0
> 
> 时间：2013-02-01T13:25:33.167
> 
> 标签：xml, cdata, .net-1.1

我正在阅读一些包含 CDATA 部分的 XML 文件。现在，问题是 XML 解析器（在 NET 1.1 中）给了我以下错误：[XmlException: There is an invalid character in the given encoding。第 12 行，位置 6。] 错误在 CDATA 部分内。更具体地说，有问题的字符是一个 Š 字母（但也有很多其他变音符号）。我认为解析器完全忽略了 CDATA 部分。有任何想法吗？

相关代码是 <![CDATA[ **some text here** ]]>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-22T13:50:10.890

如果 CDATA 部分中的数据格式为 ${a_b:pp}，则会引发错误。它以变量的形式出现，其值未在逻辑中定义。它会抛出解析异常。您可以做的是在 $ 和其他文本之间留出空格。

# javascript - 跨浏览器：检测窗口上的模糊事件

> ID：14647308
> 
> 赞同：12
> 
> 时间：2013-02-01T13:25:35.223
> 
> 标签：javascript, dom-events, blur

我刚读过，我认为所有处理这个主题的线程，我都找不到真正解决我的问题的方法。我需要检测浏览器窗口何时失去焦点，即模糊事件。我已经尝试了 stackoverflow 上的所有脚本，但似乎没有合适的跨浏览器方法。

Firefox 是这里有问题的浏览器。

使用 jQuery 的常用方法是：

```
window.onblur = function() { 
   console.log('blur'); 
}
//Or the jQuery equivalent:
jQuery(window).blur(function(){
    console.log('blur');
}); 
```

这适用于 Chrome、IE 和 Opera，但 Firefox 不会检测到该事件。

是否有适当的跨浏览器方法来检测窗口模糊事件？或者，换个说法，有没有办法用 Firefox 浏览器检测窗口模糊事件？

* * *

相关问题和研究：

*   查看[Firefox 3 窗口焦点和模糊](https://stackoverflow.com/questions/844689/firefox-3-window-focus-and-blur)
*   根据以下 github 文章，jQuery 已停止支持 Firefox 模糊测试：
    *   [https://github.com/jquery/jquery/pull/1423](https://github.com/jquery/jquery/pull/1423)
    *   [http://bugs.jquery.com/ticket/13363](http://bugs.jquery.com/ticket/13363)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-20T20:05:19.380

我都试过了：

```
document.addEventListener('blur', function(){console.log('blur')}); 
```

和

```
window.addEventListener('blur', function(){console.log('blur')}); 
```

他们都在我的FF（33.1）版本中工作。

这是 jsfiddle：http: [//jsfiddle.net/hzdd06eh/](http://jsfiddle.net/hzdd06eh/)

在“运行”窗口内部单击，然后在其外部单击以触发效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-15T00:16:51.967

jQuery 似乎不再支持这些针对 FireFox 的测试：

*   jQuery 错误票在这里：[http ://bugs.jquery.com/ticket/13363](http://bugs.jquery.com/ticket/13363)
*   jQuery 关闭/弃用提交在这里：[https ://github.com/jquery/jquery/pull/1423](https://github.com/jquery/jquery/pull/1423)

我正在寻找一种更好的方法来支持 Firefox 模糊事件，但在我找到更好的方法之前，这是相对于原始接受答案的更当前状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-18T02:38:48.683

( [MDN](https://developer.mozilla.org/en-US/docs/Web/API/Document/hasFocus)`document.hasFocus` ) 是一种可以解决 Firefox 问题的实现，但在 Opera 中不受支持。因此，综合方法可以解决您面临的问题。

下面的函数举例说明了如何使用此方法：

```
function getDocumentFocus() {
    return document.hasFocus();
} 
```

由于您的问题对应用程序（定时、发布/订阅系统、事件驱动等）不够清楚，您可以通过多种方式使用上述功能。

例如，定时验证可以像在这个小提琴（[JSFiddle](https://jsfiddle.net/pa8d2bq4/2/)）上实现的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T13:37:45.337

您可以在窗口上使用 jQuery 的 blur 方法，如下所示：

```
$(document).ready(function() {
  $(window).blur(function() {
    // Put your blur logic here
    alert("blur!");
  });
}); 
```

这适用于 Firefox、IE、Chrome 和 Opera。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-20T11:50:58.900

我尝试使用 addEventListener DOM 函数

```
window.addEventListener('blur', function(){console.log('blur')});
window.addEventListener('click', function(event){console.log(event.clientX)}); 
```

我在第一次模糊后让它工作。但是当我没有附加点击功能时它不起作用。解释单击功能时可能会发生某种刷新

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-21T19:56:59.663

这是您问题的替代解决方案，但它使用[页面可见性 API](http://www.w3.org/TR/page-visibility/)，并且解决方案与[跨浏览器](http://caniuse.com/#search=page%20visibility)兼容。

```
(function() {
    var hidden = "hidden";

    // Standards:
    if (hidden in document)
        document.addEventListener("visibilitychange", onchange);
    else if ((hidden = "mozHidden") in document)
        document.addEventListener("mozvisibilitychange", onchange);
    else if ((hidden = "webkitHidden") in document)
        document.addEventListener("webkitvisibilitychange", onchange);
    else if ((hidden = "msHidden") in document)
        document.addEventListener("msvisibilitychange", onchange);
    // IE 9 and lower:
    else if ("onfocusin" in document)
        document.onfocusin = document.onfocusout = onchange;
    // All others:
    else
        window.onpageshow = window.onpagehide = window.onfocus = window.onblur = onchange;

    function onchange(evt) {
        var v = "visible",
            h = "hidden",
            evtMap = {
                focus: v,
                focusin: v,
                pageshow: v,
                blur: h,
                focusout: h,
                pagehide: h
            };

        evt = evt || window.event;
        if (evt.type in evtMap) {
            console.log(evtMap[evt.type]);
        } else {

            console.log(this[hidden] ? "hidden" : "visible");
        }
    }

    // set the initial state (but only if browser supports the Page Visibility API)
    if (document[hidden] !== undefined)
        onchange({
            type: document[hidden] ? "blur" : "focus"
        });
})(); 
```

# c# - 为空单元格着色，而不是为所有单元格着色

> ID：14647313
> 
> 赞同：0
> 
> 时间：2013-02-01T13:25:51.040
> 
> 标签：c#, devexpress

> **可能重复：**
> [在 GridView 的空单元格中显示消息](https://stackoverflow.com/questions/14603391/show-message-in-empty-cells-in-gridview)

通过该代码，我将所有单元格都着色了，我只需要一个空单元格.. 有人能注意到我的错在哪里（对不起，我是 C# 新手）

```
 private void simpleButton1_Click(object sender, System.EventArgs e)
    {

        string[] msg = new string[60];
        string[] error = new string[400];
        for (int i = 0; i < gridView3.RowCount ; i++)
        {
            System.Data.DataRow Rows = gridView3.GetDataRow(i);
            string cellvalue = Rows[0].ToString();
            if (cellvalue == "")
            {
                msg[0] = "Missing 'First Name'";
                error[i] = msg[0] + " - ";  
                gridView3.CustomDrawCell += new RowCellCustomDrawEventHandler(gridView3_CustomDrawCell);

            }
        }
    }
    private void gridView3_CustomDrawCell_1(object sender, DevExpress.XtraGrid.Views.Base.RowCellCustomDrawEventArgs e)
    {
        e.Style.BackColor = Color.LightSteelBlue;
    } 
```

顺便说一下，这个网格是从 Excel 导入的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:40:46.740

嗯，我认为您还需要循环其单元格，即

```
foreach (GridViewRow row in gridView3.Rows)
{
  foreach (GridViewCell cell in row.Cells)
  {
    if (cell.Text == "")
    {
     //Do stuff here color etc
    }
  }
} 
```

一旦您可以访问 CELL 对象，您就可以在那里设置颜色，即（System.Drawing 命名空间）

```
cell.BackColor = Color.Green 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:43:00.890

您可以尝试类似 `String.IsNullOrEmpty(cellvalue)` If True 的方法，然后执行您的操作。

如前所述，您可能希望先循环遍历单元格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:51:01.743

您只需要注册一次网格事件，而不是在循环中。
对于单元格着色，请使用[RowCellStyle](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_RowCellStyletopic)事件。

[自定义单个行和单元格的外观帮助主题](http://documentation.devexpress.com/#WindowsForms/CustomDocument758)。

# python - PYTHONPATH vs 符号链接

> ID：14647317
> 
> 赞同：6
> 
> 时间：2013-02-01T13:26:00.980
> 
> 标签：python, python-2.7, virtualenv, pycharm, pythonpath

昨天，我编辑了`bin/activate`我的 virtualenv 的脚本，以便它设置`PYTHONPATH`环境变量以包含一些外部包的开发版本。我不得不这样做，因为`setup.py`包使用`distutils`并且不支持`develop`命令 à la `setuptools`。`PYTHONPATH`就在终端中使用 Python 解释器而言，设置工作正常。

然而，刚才我在 PyCharm 中打开项目设置，发现 PyCharm 不知道有问题的外部包——PyCharm 既没有列出外部包，也没有列出它的路径。自然，这是因为 PyCharm 不（也不能可靠地）解析或获取`bin/activate`脚本。我可以在 PyCharm 项目设置中手动添加路径，但这意味着我必须重复自己（一次在PyCharm 项目设置中`bin/activate`，然后再次在 PyCharm 项目设置中）。那不是干的，那很糟糕。

在 中创建`site-packages`指向外部包的符号链接*几乎*是完美的。这样，至少 PyCharm 的源代码编辑器可以找到包，终端中的 Python 解释器也可以。但是，不知何故 PyCharm 仍然没有在项目设置中列出该包，我不确定是否可以这样保留它。

那么我怎样才能以这样的方式将外部包添加到我的 virtualenv/project 中......</p>

1.  我不必重复自己；还有……</li>
2.  Python 解释器和 PyCharm 都知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:14:07.873

即使一个包没有使用`setuptools` `pip`monkeypatches`setup.py`来强制它使用`setuptools`.

也许您可以删除该`PYTHONPATH`hack 和`pip install -e /path/to/package`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T14:18:03.800

一种选择是动态添加路径：

```
try:
    import foo
except ImportError:
    sys.path.insert(0\. "/path/to/your/package/directory")
    import foo 
```

但这不是最好的解决方案，因为该代码很可能不会进入应用程序的最终版本。另一种选择（和更合适的恕我直言）是为包制作简单的 setup.py 文件，并将其部署在 virtualenv 中，使用 develop 参数或通过 pip 使用 -e 参数：

```
python setup.py develop 
```

或者：

```
pip install -e /path/to/your/package/directory 
```

[http://packages.python.org/distribute/setuptools.html#development-mode](http://packages.python.org/distribute/setuptools.html#development-mode)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-08-22T16:16:18.200

这是对 ndpu 答案的改进，无论真实文件在哪里，它都可以工作。

您可以取消引用符号链接，然后`sys.path`在导入本地导入之前设置。

```
import os.path
import sys

# Ensure this file is dereferenced if it is a symlink
if __name__ == '__main__' and os.path.islink(__file__):
    try:
        sys.path.remove(os.path.dirname(__file__))
    except ValueError:
        pass
    sys.path.insert(0, os.path.dirname(os.path.realpath(__file__)))

# local imports go here 
```

# c# - 如何决定从对象返回什么

> ID：14647318
> 
> 赞同：1
> 
> 时间：2013-02-01T13:26:03.463
> 
> 标签：c#, forms, edit, point

您好，我想为 Point 创建自己的课程。所以在一些图形语句中我需要调用点的对象来发送它的 X 和 Y。

我想知道如何发送我想要的内容，例如：

```
myPoint PT = new myPoint(1,2);
myPoint PT2 = new myPoint(10,20);
e.Graphics.DrawLine(pen, PT1, PT2); 
```

我想将 PT1 和 PT2 作为常规点返回我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:27:28.300

您可以使用隐式转换或显式转换。我建议你显式转换。

加入你的`myPoint`班级：

```
public static explicit operator Point(myPoint myPointToConvert)
{
    return new Point(myPointToConvert.???, myPointToConvert.???);
} 
```

使用显式转换，您必须指定如何使用显式转换进行转换：

```
e.Graphics.DrawLine(pen, (Point)PT1, (Point)PT2); 
```

它比隐式转换要长一点，但可以避免一些可能的意外行为（因为您确切地知道自己在做什么）。

如果您绝对确定要进行隐式转换，那么在上面`operator`，只需替换`explicit`为... `implicit`！

# c# - 一个要检查的复选框

> ID：14647319
> 
> 赞同：0
> 
> 时间：2013-02-01T13:26:09.603
> 
> 标签：c#, asp.net, gridview

我在 gridView 中有以下复选框功能-

```
<Columns>
    <asp:TemplateField>
     <ItemTemplate>
        <asp:CheckBox ID="chkRow" runat="server" OnCheckedChanged="CheckBoxPN_CheckedChanged" AutoPostBack="true" />
     </ItemTemplate> 
```

它为 gridView 中创建的每一行创建一个复选框。

我的问题是，在事件中-

```
protected void CheckBoxPN_CheckedChanged(Object sender, EventArgs e)
    {

        CheckBox chk = (CheckBox)sender;
        GridViewRow row = (GridViewRow)chk.NamingContainer;  

        int gID = System.Convert.ToInt16(row.Cells[1].Text);

        gridViewDataSource.SelectCommand = sqlCommand + gID;
    } 
```

我正在使用它来检索值。一旦用户检查了一个复选框，然后去检查另一个复选框，之前的复选框状态仍然处于选中状态。

在检查新的复选框时，如何修改代码以取消选中的最后一个复选框？

**编辑** @Neil Knight 的答案实现了正确的功能，但是当我使用`checked_changed`事件时，当新的复选框被选中时，这会触发事件并获得正确的答案。但是，当未选中前一个复选框时，这会再次触发事件并得到错误的答案。如何阻止`gID`值被旧答案替换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:39:02.397

ASP.Net 示例：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<title>checkboxes</title>
<meta content="Microsoft Visual Studio .NET 7.1" name="GENERATOR">
<meta content="Visual Basic .NET 7.1" name="CODE_LANGUAGE">
<meta content="JavaScript" name="vs_defaultClientScript">
<meta content="http://schemas.microsoft.com/intellisense/ie5"
name="vs_targetSchema">
<script language="javascript">
function SingleSelect(regex,current)
{
re = new RegExp(regex);

for(i = 0; i < document.forms[0].elements.length; i++) {

elm = document.forms[0].elements[i];

if (elm.type == 'checkbox') {

if (re.test(elm.name)) {

elm.checked = false;

}
}
}

current.checked = true;

}
</script>
</HEAD>
<body>
<form id="Form1" method="post" runat="server">
<table width="100%" align="center">
<tr>
<td>
<br/>aaaa<input type="checkbox" id="chkOne" name="chkOne"
value="aaaa" checked onclick="SingleSelect('chk',this);" />
<br/>bbbb<input type="checkbox" id="chkTwo" name="chkTwo"
value="bbbb" onclick="SingleSelect('chk',this);" />
<br/>cccc<input type="checkbox" id="chkThree" name="chkThree"
value="cccc" onclick="SingleSelect('chk',this);" />
<br/>dddd<input type="checkbox" id="chkFour" name="chkFour"
value="dddd" onclick="SingleSelect('chk',this);" />
<br/>eeee<input type="checkbox" id="chkFive" name="chkFive"
value="eeee" onclick="SingleSelect('chk',this);" />
</td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
</table>
</form>
</body>
</HTML> 
```

取自[Stephen Cheng](http://www.velocityreviews.com/forums/t80854-how-to-allow-only-one-checkbox-to-be-checked-in-a-group-of-checkboxes.html)的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:34:32.040

您可以使用 XLAnt 建议的单选按钮（请记住将它们放入同一组（您可以使用单选按钮的`GroupName="FOO"`属性来执行此操作））

或者（如果 Checkbox 是您真正想要使用的）

您可以取消设置所有复选框，除了选中的复选框（非常慢）。

```
<ItemTemplate>
    <asp:RadioButton ID="chkRow" runat="server" OnCheckedChanged="CheckBoxPN_CheckedChanged" AutoPostBack="true" GroupName="foo"/>
 </ItemTemplate> 
```

# powershell - 为什么我的 powershell 脚本中有额外的输出“@{..}”？

> ID：14647321
> 
> 赞同：0
> 
> 时间：2013-02-01T13:26:13.597
> 
> 标签：powershell

当我运行以下脚本时，它返回：`@{Name=<Usersname>} not found`

```
Foreach ($object in Get-childitem "\\HomeDriveServer\home$\" | select Name)
{
$userAccount = get-aduser -Filter {SamAccountName -like "*$object*"}
if($userAccount -eq $null)
    {
write-host "$object not found"
    }
else
    {
write-host "$object found"
    }
} 
```

`Get-childitem "\\HomeDriveServer\home$\" | select Name`返回没有`@{Name=`XXX的文件夹名称列表`}`

为什么会出现`@{Name=`XXX `}`，我该如何摆脱它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:50:31.827

你看到的并不完全是你得到的。您的查询返回一个集合。你应该试试 ：

```
Foreach ($object in Get-childitem "\\HomeDriveServer\home$\" | select -ExpandProperty Name)
{
$userAccount = get-aduser -Filter {SamAccountName -like "*$object*"}
if($userAccount -eq $null)
    {
write-host "$object not found"
    }
else
    {
write-host "$object found"
    }
} 
```

# c# - Silverlight 中的 pdf 文档

> ID：14647324
> 
> 赞同：1
> 
> 时间：2013-02-01T13:26:20.943
> 
> 标签：c#, .net, silverlight

我有一个要求。我必须使用户能够附加文档，并且这些文档将以二进制格式保存在数据库中。

现在的挑战是，我必须在 silverlight 应用程序中显示文档列表，当用户单击任何链接时，它不应该要求下载文档，而是应该在下一个选项卡中打开文档。（文档可以是 pdf、png、excel、doc）。

我经历了多个线程，但所有这些线程都在第三方工具或 OOB 上结束。我无法启用 OOB。

我只想检查是否有任何方法可以使用 silverlights 内置功能来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:37:27.463

我认为将@Blam 发送正确mime 类型的评论与Silverlight HyperlinkBut​​ton 以及为新窗口设置的目标相结合将是您的票。XAML 看起来像这样：

```
<HyperlinkButton Content="Name of PDF" Target="PDFWindow" NavigateUri="/DownloadPDF.aspx?id=BINDING OF UNIQUE ID" /> 
```

您将在 Silverlight 项目中添加一个名为 DownloadPDF 的页面，它会在请求变量中接收一个参数；要从数据库中获取的 PDF 的唯一 ID。DownloadPDF 会将 mime 类型更改为“application/pdf”，然后将字节从 SQL 服务器写入响应流。

# ios - XMPPRoster 不会将新好友发布到 XMPP 服务器

> ID：14647329
> 
> 赞同：4
> 
> 时间：2013-02-01T13:26:46.483
> 
> 标签：ios, xmpp, xmppframework

我正在尝试使用这行代码向用户的名册中添加一个新伙伴：

```
XMPPJID jid = [XMPPJID jidWithString:[NSString stringWithFormat:@"%@@localhost",
                                      addBuddyTextField.text]];
[appDelegate.xmppRoster addUser:jid withNickname:addBuddyTextField.text]; 
```

这行得通。其他用户收到订阅请求通知，他可以接受，一切正常。新好友将被添加到 NSArray 中`XMPPRosterMemoryStorage`并显示在`[XMPPRosterMemoryStorage unsortedUsers]`NSArray 中，以便可以在 UI 上显示当前名单及其所有好友。

但是一旦用户注销并重新启动应用程序，整个名册就消失了，他添加了所有的好友。`[XMPPRoster fetchRoster]`下面的方法`[XMPPRosterMemoryStorage unsortedUsers]`返回一个没有项目的 NSArray。

我是否必须将好友更新（添加、删除）发布到 XMPPServer？还是我的 XMPPserver (ejabberd) 不支持名册？

这是我用来激活 XMPPRoster 的代码：

```
xmppRosterMemStorage = [[XMPPRosterMemoryStorage alloc] init];
xmppRoster = [[XMPPRoster alloc] initWithRosterStorage:xmppRosterMemStorage
                                         dispatchQueue:dispatch_get_main_queue()];
[xmppRoster addDelegate:self delegateQueue:dispatch_get_main_queue()];
xmppRoster.autoAcceptKnownPresenceSubscriptionRequests = false;
xmppRoster.autoFetchRoster = true;
[xmppRoster activate:xmppStream];
[xmppRoster fetchRoster]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:33:13.937

从上面的讨论中，听起来您的服务器正在处理您的名册请求。使用您的设置代码我无法重现您遇到的问题。

您可以尝试打开日志记录，看看阅读协议日志是否有助于您了解正在发生的事情：

```
#import "DDTTYLogger.h"

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    [DDLog addLogger:[DDTTYLogger sharedInstance]];

    ... 
```

或者在你的服务器上尝试我的测试代码，如果问题消失，从那里开始工作：

```
#import "AppDelegate.h"
#import "XMPPFramework.h"
#import "DDTTYLogger.h"
#import "DDLog.h"

static const int ddLogLevel = LOG_LEVEL_VERBOSE;

NSString * const XMPPAuthenticationMethodPlain = @"Plain";
NSString * const XMPPAuthenticationMethodDigestMD5 = @"Digest-MD5";

NSString * const OptionHostName = @"...";
NSUInteger const OptionPort = 5222;
BOOL const OptionOldSchoolSSL = NO;
NSString * const OptionJID = @"...";
NSString * const OptionAuthenticationMethod = @"Digest-MD5";
NSString * const OptionPassword = @"...";

@interface AppDelegate () <XMPPStreamDelegate, XMPPRosterMemoryStorageDelegate>

@property (retain) XMPPStream *xmppStream;
@property (retain) XMPPRosterMemoryStorage *xmppRosterMemStorage;
@property (retain) XMPPRoster *xmppRoster;

@end

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    [DDLog addLogger:[DDTTYLogger sharedInstance]];

    self.xmppStream = [[XMPPStream alloc] init];
    [self.xmppStream addDelegate:self delegateQueue:dispatch_get_main_queue()];
    self.xmppStream.hostName = OptionHostName;
    self.xmppStream.hostPort = OptionPort;
    self.xmppStream.myJID = [XMPPJID jidWithString:OptionJID];

    self.xmppRosterMemStorage = [[XMPPRosterMemoryStorage alloc] init];
    self.xmppRoster = [[XMPPRoster alloc] initWithRosterStorage:self.xmppRosterMemStorage
                                             dispatchQueue:dispatch_get_main_queue()];
    [self.xmppRoster addDelegate:self delegateQueue:dispatch_get_main_queue()];
    [self.xmppRoster activate:self.xmppStream];

    NSError *error = nil;
    if (OptionOldSchoolSSL)
        [self.xmppStream oldSchoolSecureConnect:&error];
    else
        [self.xmppStream connect:&error];
}

-(void)applicationWillTerminate:(NSNotification *)notification {
    [self.xmppStream removeDelegate:self];
    [self.xmppStream disconnect];
}

-(void)xmppStreamDidConnect:(XMPPStream *)sender {
    Class authClass = nil;
    if ([OptionAuthenticationMethod isEqual:XMPPAuthenticationMethodPlain])
        authClass = [XMPPPlainAuthentication class];
    else if ([OptionAuthenticationMethod isEqual:XMPPAuthenticationMethodDigestMD5])
        authClass = [XMPPDigestMD5Authentication class];
    else {
        DDLogWarn(@"Unrecognized auhthentication method '%@', falling back on Plain",
                  OptionAuthenticationMethod);
        authClass = [XMPPPlainAuthentication class];
    }
    id<XMPPSASLAuthentication> auth = [[authClass alloc] initWithStream:sender
                                                               password:OptionPassword];
    NSError *error = nil;
    if (![sender authenticate:auth error:&error])
        NSLog(@"Error authenticating: %@", error);
}

-(void)xmppRosterDidPopulate:(XMPPRosterMemoryStorage *)sender {
    NSLog(@"users: %@", [sender unsortedUsers]);
    // My subscribed users do print out
}

@end 
```

如果我将名册设置代码移至`-xmppStreamDidAuthenticate`，它也可以工作，但是在这种情况下我确实需要手动调用`-fetchRoster`。

# javascript - 使用 JS 读取应用于元素的 CSS 属性

> ID：14647334
> 
> 赞同：-1
> 
> 时间：2013-02-01T13:26:58.830
> 
> 标签：javascript, html, css

```
<style>
.mainclass{
width:900px;
color:red;
}
</style>
<div class="mainclass">
this is test text
</div> 
```

在 JavaScript 中是否有任何方法/可能，我实际上可以读取所有应用于元素的 css 属性？就像说 el.style.color/width 实际上应该返回设置/应用于此元素的样式。

我想这样做，以便可以迭代 dom 元素以找出应用于元素的宽度并将其转换为 % 以制作响应式 UI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:38:09.777

如果您可以使用 jQuery，$(...).css() 可以解决您的问题。

```
var color = $('#yourid').css("color"); 
```

如果你不想要 jQuery，你可以在元素上使用 getComputedStyle。有关跨浏览器解决方案，请参阅 [http://www.javascriptkit.com/dhtmltutors/dhtmlcascade4.shtml 。](http://www.javascriptkit.com/dhtmltutors/dhtmlcascade4.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:31:24.213

试试这个漂亮的小框架：

*   [http://jquery.com/](http://jquery.com/)

它具有这样做的功能：

*   [http://api.jquery.com/width/](http://api.jquery.com/width/)

例子：

```
$(function () {
    $("div").each(function (index, el) {
        var $el = $(el);
        if ($el.width() > 300) {
            $el.css({width: "10%"});
        }
    });
}); 
```

[http://jsfiddle.net/JvqAM/](http://jsfiddle.net/JvqAM/)

# php - 将时间戳与数据库中的当前时间进行比较

> ID：14647338
> 
> 赞同：27
> 
> 时间：2013-02-01T13:27:17.967
> 
> 标签：php

我需要根据数据库中的日期时间测试当前时间，如果已经 30 分钟，则执行代码，如果不是，则不执行。这就是我所在的地方，我被困住了：

```
$link = mysqli_connect("hostname", "username", "password", "database");
$q = "SELECT id FROM dwCache ORDER BY id DESC LIMIT 1";
$qu = mysqli_query($link, $q);

while($row=mysqli_fetch_array($qu, MYSQL_ASSOC)){
        $id = $row['id'];
        $cache = $row['cache'];
        $timest = $row['time'];
    }

$newTime = 
$difference = $timest
if($timest >= ) 
```

正如你在底部看到的那样，我失去了它，因为我不知道该怎么做。

`$timest`返回：`2013-02-01 12:36:01`作为格式`Y-m-d` `h-i-s`

对双发致歉，其他已删除。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-01T13:35:22.017

首先转换`$timest`为时间戳

```
$time = strtotime($timest);

$curtime = time();

if(($curtime-$time) > 1800) {     //1800 seconds
  //do stuff
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-01T13:33:52.963

全部在 sql 语句中完成

```
SELECT id FROM `dqCache` WHERE `time`<DATE_SUB(NOW(), INTERVAL 30 MINUTE); 
```

这将从您的表中返回时间列在现在之前 30 分钟之前的所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T13:33:09.067

在这种情况下，我喜欢使用[unix 时间戳。](http://en.wikipedia.org/wiki/Unix_time)

```
$timest = date('u'); // gets the unix timestamp
$q = "SELECT id 
      FROM `dwCache` 
      WHERE {$timest} - UNIX_TIMESTAMP(`timestamp_col`) > 1800"; 
```

**解释：**

这基本上计算了当前时间与表格列中的时间之间的差异。如果它高于 1800（30 分钟），它将选择该行，并且您的 PHP 代码将被执行。

**优点**

使用它而不是您开始执行的 PHP 检查有一些优点。您将选择更少的行，从而占用更少的内存。

**PS：**

使用请点赞`MySQLi`！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T13:29:51.677

```
SELECT id FROM dwCache ORDER BY id DESC LIMIT 1 
```

你会得到唯一`id`的领域，这是第一个。二、时间转换：[MySQL convert datetime to Unix timestamp](https://stackoverflow.com/questions/11133760/mysql-convert-datetime-to-unix-time-stamp)

`strtotime`第三：您可以使用函数转换您的时间字符串。

# java - 使用一种注释方法作为其他注释方法的默认值

> ID：14647339
> 
> 赞同：4
> 
> 时间：2013-02-01T13:27:19.110
> 
> 标签：java, annotations

```
public @interface MyAnnotation{

    public String someProperty();

    //How should I achieve this?
    public String someOtherProperty() default someProperty();

} 
```

我在注释中有两个属性，当未指定一个属性时，我想将另一个用作默认值。有没有办法做到这一点？

或者我必须做以下检查

```
if(myAnnotation.someOtherProperty() == null){
    //Use the value of someProperty
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:47:10.773

您当前的情况根本不可能 - 注释属性的默认值必须是静态可解析的。现在，您正在尝试将默认值定义为一个在实际使用注释之前不会设置的属性（也就是动态）。

您可以做的是这样定义您的注释：

```
public @interface MyAnnotation{

    public String someProperty();

    public String someOtherProperty() default "";
} 
```

然后在您的注释处理器中，使用`someProperty`for的值`someOtherProperty`，如果`someOtherProperty`为空。

# javascript - 谷歌地图标记弹出Jquery

> ID：14647345
> 
> 赞同：2
> 
> 时间：2013-02-01T13:27:42.857
> 
> 标签：javascript, jquery, html

我想为我想要的标记创建一个带有 jquery 的弹出窗口。所以我有一个标记的代码，但是如何为另一个标记创建另一个弹出窗口？例如在标记巴黎。我也想知道如何防止弹出窗口移动？

```
<script type='text/javascript'> $(function(){function initialize() {
    var mapOptions = {
      zoom: 4,
      disableDefaultUI: true,
      center: new google.maps.LatLng(45.35, 4.98),
      mapTypeId: google.maps.MapTypeId.TERRAIN
    }
    var map = new google.maps.Map(document.getElementById('map_canvas'),
                                  mapOptions);

// Paris 
var Paris = new google.maps.LatLng(48.856291,2.352705);
    var image = 'rss.png';
    var marker = new google.maps.Marker({
        position: Paris,
        map: map,
        icon: image,
    });

// Le Mans
var Lemans = new google.maps.LatLng(48.006922,0.20874);
    var image = 'rss.png';
    var marker = new google.maps.Marker({
        position: Lemans,
        map: map,
        icon: image,
    });

    var styles = [
   {
      featureType: "all",
      stylers: [
        { saturation: -15 },
        { lightness: -10 },
      ]
    },

            ];
map.setOptions({styles: styles});

var popup=$('<div/>', {
    'id':'infoWindow',
    'text':'Hello World'
}).dialog({
    'autoOpen':false,
    'width': 200,
    'height':200,
    'resizable':false,
    'modal':true,
    'title':'Map info'
});
google.maps.event.addListener(marker, 'click', function(e) {
    console.log(e);
    popup.dialog('open');
});    }initialize();}); </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:43:46.480

您可以在一个额外的函数中提取标记和窗口创建，并为每个城市调用它。顺便说一句，我用谷歌地图窗口替换了弹出窗口。但这也应该适用于自定义弹出窗口。

```
function addMarkerWithWindow(name, coordinate, map) {
    var infowindow = new google.maps.InfoWindow({
        content: name
    });

    var marker = new google.maps.Marker({
        map: map,
        position: coordinate
    });

    google.maps.event.addListener(marker, 'click', function (e) {
        infowindow.open(map, marker);
    });
}

function initialize() {
    var mapDiv = document.getElementById('map-canvas');
    var map = new google.maps.Map(mapDiv, {
        center: new google.maps.LatLng(48.006922, 2.20874),
        zoom: 4,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    addMarkerWithWindow("This is Lemans", new google.maps.LatLng(48.006922, 0.20874), map);
    addMarkerWithWindow("This is Paris", new google.maps.LatLng(48.856291, 2.352705), map);
} 
```

如果你把它放在这里，你可以测试代码：[http ://code.google.com/apis/ajax/playground/#info_windows_complex_v3](http://code.google.com/apis/ajax/playground/#info_windows_complex_v3)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T16:06:50.003

要创建一个弹出窗口，您可以这样做：

您可以在此处查看一些示例：[演示](http://swip.codylindley.com/popupWindowDemo.html)

```
<p><a href="http://www.yahoo.com" title="yahoo.com" class="example1demo">open popup</a></p> 
<script type="text/javascript"> 
$('.example1demo').popupWindow({ 
height:500, 
width:800, 
top:50, 
left:50 
}); 
</script> 
```

# liquibase - Liquibase runOnChange="true" 但存储在 sqlFile 中的函数未在数据库中更新以进行更改

> ID：14647346
> 
> 赞同：0
> 
> 时间：2013-02-01T13:27:43.760
> 
> 标签：liquibase

我有一个变更集：

```
<?xml version="1.0" encoding="UTF-8" ?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">
        <changeSet id="1359722450-38" author="myname" runOnChange="true" >        
           <sqlFile endDelimiter="" splitStatements="false" path="sql/38_getLeadSet.sql" relativeToChangelogFile="true" />
           <rollback>DROP FUNCTION `getLeadSet`</rollback>          
        </changeSet>
</databaseChangeLog> 
```

包含在主日志文件中

我如果在 sql/38_getLeadSet.sql 中更改某事并运行 liquibase update ，我得到：

`FUNCTION getLeadSet already exists liquibase.exception.DatabaseException: Error executing SQL ... getLeadSet....`

在命令行上。似乎与[此处](https://liquibase.jira.com/browse/CORE-411)提到的问题相同，但我有最新的 liquibase 版本

任何形式的建议表示赞赏，谢谢

# 编辑

好吧，我们需要在 sql 文件标记之前删除 sql，例如

```
 <sql>DROP FUNCTION if exists `getLeadSet`</sql>    
 <sqlFile endDelimiter="" splitStatements="false" path="sql/38_getLeadSet.sql"  relativeToChangelogFile="true" />
 <rollback>DROP FUNCTION `getLeadSet`</rollback> 
```

PS）Liquibase 版本：2.0.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:39:36.667

您是否在再次更新之前回滚更改？因为函数 getLeadSet 已经存在，你可能会得到一个 sql 错误而不是 liquiabase 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-13T13:33:33.437

runOnChange="true" 不起作用，而是我使用了运行**正常**的***runAlways="true"***。

 **我决定在我的项目中使用 runAlways="true" 而不是 runOnChange="true"，因为这在部署期间对我的项目没有太大影响。

liquibase 版本是 3.5.1**

# flash - 在 openX 中无法访问 Flash 横幅链接？

> ID：14647348
> 
> 赞同：0
> 
> 时间：2013-02-01T13:27:44.023
> 
> 标签：flash, actionscript, openx, clicktag

我为不同的客户制作了 flash 横幅，在遇到使用 openX 的伙伴之前，所有人都很高兴。我使用了常规的 as2 代码（他们要求使用 as2）

```
on (release){
  getURL("http://www.ge.vtb.ge/personal/cards/credit/");
} 
```

但他们说它不会转换什么的，所以我发现我需要点击标签，我使用了这段代码

```
on (release) {
  if (clickTAG.substr(0,5) == "http:www.[mylink].com") {
    getURL(clickTAG,clickTARGET);
  }
} 
```

如[本](http://www.openx.com/docs/tutorials/Using+Flash+with+OpenX)教程中所述，但现在他们说横幅未链接。我真的很困惑该怎么办，谁能给我一个建议？我什至阅读了[adobes 的 clicktag 官方指南](http://www.adobe.com/resources/richmedia/tracking/designers_guide/)，但它是一样的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:35:10.453

这里的条件：

```
if (clickTAG.substr(0,5) == "http:www.[mylink].com") 
```

永远不会解决到`TRUE`，所以`getURL`永远不会被调用。请将其更改为：

```
if (clickTAG.substr(0,5) == "http:") 
```

并检查它现在是否工作。

编辑：

确保他们在嵌入 swf 横幅时使用正确的 URL 设置 clickTAG 变量。[我将复制官方 clickTAG 指南](http://www.adobe.com/resources/richmedia/tracking/designers_guide/)的相关部分：

*下面的代码将允许广告服务网络动态地将 clickTAG 分配给他们的广告。*

*在本例中，getURL 操作被分配给一个按钮，该按钮将浏览器导航到 ["clickTAG"]。“getURL(clickTAG)”语句附加通过 OBJECT EMBED 标记传入的变量数据，并将浏览器导航到该位置。它是广告服务网络分配的跟踪代码，允许他们记录用户对该广告的点击。*

```
<EMBED src="ad_banner_example.swf?clickTAG= http://adnetwork.com/tracking?http://www.destinationURL.com"> 
```

这将是工作流程，我认为你们正在跳过第三步（将 URL 传递给 swf 对象）：

![clickTAG 工作流程](../Images/1d77bb64a56936033a1431d71588688f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T15:07:14.903

我认为重要的是要注意，您实际上不必为广告编写嵌入代码，或在 OpenX 中硬编码 clickTAG URL。而是选择“将**横幅上传到本地网络服务器**”（或数据库）。这使 OpenX 有机会“读取”文件并确定如何继续。

如果 URL 被硬编码到文件中，OpenX 可以找到它，并以这种方式跟踪点击。如果 URL 预期为 clickTAG 变量，则正常的“**目标 URL（包括 http://）** ”将作为 clickTAG FlashVars 变量传递到广告中。

我希望对某人有所帮助！

以下是 OpenX 关于此问题的文章的链接：

[http://www.openx.dev.limusdesign.com/blog/click-tracking-flash-banners/](http://www.openx.dev.limusdesign.com/blog/click-tracking-flash-banners/)

此处链接到完整的帮助文章（现在从实时站点中丢失，但在 Wayback Machine 中找到）：

[http://web.archive.org/web/20130315080057/http://www.openx.com/docs/tutorials/Using+Flash+with+OpenX](http://web.archive.org/web/20130315080057/http://www.openx.com/docs/tutorials/Using+Flash+with+OpenX)

# xml - 在 AS3 中使用来自 XML 的外汇提要？

> ID：14647356
> 
> 赞同：0
> 
> 时间：2013-02-01T13:28:18.043
> 
> 标签：xml, actionscript-3, flash

我想在我的 AS3 flash 文件中使用这个 xml 文件来计算货币汇率：

[http://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml](http://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml)

到目前为止，这就是我所拥有的：

```
var myXML:XML;
var myLoader:URLLoader = new URLLoader();

myLoader.load(new URLRequest("http://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml"));
 myLoader.addEventListener(Event.COMPLETE, processXML);

function processXML(e:Event):void {
myXML = new XML(e.target.data);
trace(myXML.*);
} 
```

有了这个，我得到了整个 xml 文档作为输出。

如何处理 as3 中的各种“立方体货币”和“汇率”值？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:04:12.897

```
 function processXML(e:Event):void {
        myXML = new XML(e.target.data);

        //set default xml to "", this allow to access to he Cube nodes by name
        var ns:Namespace =  myXML.namespace("");
        default xml namespace = ns;

        //list of Cube nodes
        var list:XMLList = myXML.Cube.Cube.*;
        var currency:String;
        var rate:Number;
        for each(var node:XML in list)
        {
            currency = String(node.@currency[0]);
            rate = node.@rate[0];
            trace(currency, rate);
        }
    } 
```

# actionscript-3 - 每 4 秒支付一次随机电影 as3

> ID：14647358
> 
> 赞同：0
> 
> 时间：2013-02-01T13:28:22.057
> 
> 标签：actionscript-3, random, movieclip

我有 5 个电影剪辑（5 个简单的按钮），我需要它们从第二帧开始，每 4 秒播放一次。我做错了什么？谢谢。

```
var clipArray:Array = new Array();

clipArray[0] = loader.button_01_mc.gotoAndPlay (2);
clipArray[1] = loader.button_02_mc.gotoAndPlay (2);
clipArray[2] = loader.button_03_mc.gotoAndPlay (2);
clipArray[3] = loader.button_04_mc.gotoAndPlay (2);
clipArray[4] = loader.button_05_mc.gotoAndPlay (2);

var clipTimer:Timer = new Timer(4000);
clipTimer.addEventListener(TimerEvent.TIMER, playClips);

function playClips(event:TimerEvent):void
{
    //Chooses a random clip in your array

     var randomClip:int = Math.random() * clipArray.length;

}

clipTimer.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:21:03.087

您需要在该数组中存储对影片剪辑的引用，而不是 gotoAndPlay 方法调用的结果（无效）。然后使用随机索引从数组中获取其中一个剪辑，并在其上调用 gotoAndPlay 方法。

```
var clipArray:Array = new Array();
clipArray[0] = loader.button_01_mc;
clipArray[1] = loader.button_02_mc;
clipArray[2] = loader.button_03_mc;
clipArray[3] = loader.button_04_mc;
clipArray[4] = loader.button_05_mc;

var clipTimer:Timer = new Timer(4000);
clipTimer.addEventListener(TimerEvent.TIMER, playClips);

function playClips(event:TimerEvent):void {
  var randomClip:int = Math.floor(Math.random() * clipArray.length);
  var mc:MovieClip = clipArray[randomClip];
  mc.gotoAndPlay(2);
}

clipTimer.start(); 
```

# matlab - 在 MATLAB 中计算对称平均百分比误差 (SMAPE)

> ID：14647360
> 
> 赞同：0
> 
> 时间：2013-02-01T13:28:26.153
> 
> 标签：matlab

我正在尝试编写一些代码来自动计算与一系列预测相关的（所谓的）对称平均百分比误差。

此处描述了相关方程![这里](../Images/04874646c3622f1098a7c527b93929e6.png)。

我编写了以下代码来完成此任务。

SMAPE = (sum(abs(Results(:,3)) ./ ((abs(Results(:,1))+ abs(Results(:,2))) /2))) * ((numel(Results( :,3)))^(-1));

我的代码有效，但被批评为太长且难以阅读，我同意它难以阅读。我能用更简短的方式完成同样的事情吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:40:11.943

如何定义变量 y 和 f，那么它会很简单：

```
y = Results(:,2);
f = Results(:,3);
0.5*mean(abs(y-f)./(abs(y)+abs(f))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-27T11:50:34.960

我想会是

```
2.0*mean(abs(y-f)./(abs(y)+abs(f))) 
```

# postgresql - 从postgis中一个点周围的点创建一个多边形

> ID：14647361
> 
> 赞同：1
> 
> 时间：2013-02-01T13:28:33.317
> 
> 标签：postgresql, gis, postgis, geodjango

我有一个使用 postgis 2.0 的 postgresql 数据库和一个包含数千个点的表，我想创建一个由特定中心位置周围最远点组成的多边形。我不知道这将如何完成，任何人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:30:08.583

过滤和聚合点，并返回点的凸包。

因此，要选择`mytable`距离 id=123 10 以内的点，并返回封闭多边形：

```
SELECT ST_ConvexHull(ST_Collect(A.geom))
FROM mytable A, mytable B
WHERE B.id=123 AND ST_DWithin(A.geom, B.geom, 10) 
```

# asp.net-mvc - MVC 4 移动应用程序中的 Response.Redirect

> ID：14647363
> 
> 赞同：0
> 
> 时间：2013-02-01T13:28:37.330
> 
> 标签：asp.net-mvc, asp.net-mvc-4, jquery-mobile

我正在使用 ASP.NET mvc 4 开发移动 Web 应用程序。我遇到了 response.redirect 问题，从我的控制器重定向到其他网站（例如：[http](http://www.google.com) ://www.google.com ），它显示“错误加载页面" 没有重定向的消息。

我已尝试使用以下代码在 Home 控制器上的“关于”操作下重定向：

```
return Redirect("http://www.google.com"); 

return RedirectResult("http://www.google.com");

response.Redirect("http://www.google.com"); 
```

以上所有都产生了相同的错误。

注意：视图页面中的超链接工作正常

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:38:57.427

When you are setting up your link to the controller...you need to make sure the `data-ajax` attribute is set to `false`.

```
<a href="/MyRedirectingController" data-ajax="false">Redirect</a> 
```

My understanding is that jQuery mobile wraps all anchor request in ajax, unless otherwise specified, and your response.redirect is just being served to the jQuery `.done` function which can't handle it properly.

[http://jquerymobile.com/demos/1.2.0/docs/pages/page-navmodel.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-navmodel.html)

> Important: rel="external" and $.mobile.ajaxEnabled=false
> 
> Slightly different implementations of the replaceState API in various browsers can cause odd behavior in specific scenarios. For example, some browser implementations (including desktop browsers) implement the popstate event differently when linking externally and moving back to a page onto which state has already been pushed/replaced. When building a jQuery Mobile application where the Ajax navigation is being explicitly disabled, either through the frequent use of rel="external" on links or by disabling Ajax navigation completely via the $.mobile.ajaxEnabled=false, we recommend disabling the pushState feature to fall back to the hash based navigation for more consistent behavior.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:18:37.080

我怀疑您的问题是您正在重定向到本地站点之外。

请参阅文档的这一部分：http: [//jquerymobile.com/test/docs/pages/page-navmodel.html](http://jquerymobile.com/test/docs/pages/page-navmodel.html)

> 由 jQuery Mobile 创建的哈希值被规范化为相对于加载的第一个“真实”页面的 URL 的完整路径。

然后稍后它在此处确认“本地”要求：

> 单击链接时，jQuery Mobile 将确保该链接引用的是本地 URL

我认为解决方案是不将用户重定向到其他域。

**更新**

上述解决方案突出了问题的错误部分，但解决方案可能仍然相同。您应该使用 javascript 进行重定向，例如：

```
window.location = 'http://www.google.com/'; 
```

我相信如果您的 JQM 解决方案尝试进行 ajax 调用然后重定向，您会遇到问题。一个问题，专门针对 google.com，可能是您是否登录了 google。然后它将您重定向到`https`例如。这可能会干扰 JQM / `window.location.hash`。

# android - 如果没有互联网连接，使用 url.openstream 的 android 不会抛出 IOException。为什么？

> ID：14647374
> 
> 赞同：0
> 
> 时间：2013-02-01T13:29:18.190
> 
> 标签：android, url, timeout, ioexception

我正在使用 url.openstream 向服务器请求。如果在此期间没有互联网连接，我希望将数据存储在数据库中，因此在 IOException 的 catch 子句中进行存储，但它不会被捕获，它只是挂在 url.openstream 上。我什至等了一分钟，但它仍然没有被 IOException catch 子句抓住。

我必须做些什么来克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:19:43.310

通过使用以下方法解决了问题，而不是使用 url.openstream。

```
 public HttpResponse getResp(String request) throws IOException
     {

    HttpGet httpGet = new HttpGet(request);
    HttpParams httpParameters = new BasicHttpParams();
    // Set the timeout in milliseconds until a connection is established.
    // The default value is zero, that means the timeout is not used. 
    int timeoutConnection = 30000;
    HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
    // Set the default socket timeout (SO_TIMEOUT) 
    // in milliseconds which is the timeout for waiting for data.
    int timeoutSocket = 40000;
    HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

    DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
    HttpResponse response = httpClient.execute(httpGet);
    return response;
} 
```

# c# - 单击节点的文本后，如何在 ASP.NET 动态 TreeView 控件中展开节点（父节点）？

> ID：14647382
> 
> 赞同：1
> 
> 时间：2013-02-01T13:29:51.893
> 
> 标签：c#, asp.net, treeview

我有一个树视图控件，我在服务器端从`DataTable`.

单击呈现的文本后，如何展开控件的任何节点？

更改`TreeNodeSelectAction`节点的属性无济于事。

我知道此属性适用于未动态填充的树视图控件。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:09:38.657

抱歉忘了回到这个。我搞砸了使用内置的“TreeView_ToggleNode”javascript 函数，该函数与 TreeView 控件一起呈现。得到了我需要的东西。

# ruby-on-rails - 如何在没有任何插件的情况下将多个文件从使用 Ajax 的 HTML5 文件上传输入发送到 Ruby on Rails？

> ID：14647383
> 
> 赞同：-1
> 
> 时间：2013-02-01T13:29:54.690
> 
> 标签：ruby-on-rails, html, jquery, file-upload

这是HTML5的代码：

```
<input class="image_file"  type="file" name="file_image" multiple /> 
```

这是Rails的代码：

```
@filename = params[:file_image].original_filename 
```

我的解决方案仅适用于单个文件。如何使用 ajax 或 jquery 在 Rails 中编写多个代码？谢谢回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:39:50.477

如果您有 Railscasts.com 的专业订阅，您可以找到一个完全符合您要求的屏幕投射。

如果你不尝试这个 jquery fileupload rails gem[1]，如果你不想使用 gem，直接使用 jquery fileupload plugin[2]，但我建议你使用 gem。

[1] [https://github.com/tors/jquery-fileupload-rails](https://github.com/tors/jquery-fileupload-rails) [2] [http://blueimp.github.com/jQuery-File-Upload](http://blueimp.github.com/jQuery-File-Upload)

# ruby-on-rails - 如何一次检查多个 cancan 属性。Rails 语法知识缺失

> ID：14647385
> 
> 赞同：0
> 
> 时间：2013-02-01T13:30:10.403
> 
> 标签：ruby-on-rails, ruby, cancan

我有一个这样的 if 语句

```
if can?(:read, Category) || can?(:read, Category2) 
```

如果用户可以阅读 Category 或 Category2，则会显示一个链接。

但是如果我有 10 个类别呢？必须有更短的方法而不是列出它们。我需要一点帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:56:33.680

我认为一种更快的方法（如果你已经有一个类别列表）是使用`detect`它，因为它是一个 OR 并且只需要一个条件为真

`categories.detect { |cat| can? :read, cat }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:29:39.047

jvnill 的方式还可以，但我认为这应该更快更清晰，因为它只返回一个布尔值：

```
[Category, Category2, ...].any?{|cat| can?(:read, cat)} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T13:39:46.777

假设您有一些对象列表：

```
categories = [Category1, Category2, Category3] 
```

您可以使用 获得结果[`inject`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)，如下所示：

```
categories.inject(false) { |p, cat| p || can?(:read, cat) } 
```

这字面意思是：

```
(((false || can(:read, Category1)) || can(:read, Category2)) || can(:read, Category3)) 
```

这当然相当于：

```
can?(:read, Category1) || can?(:read, Category2) || can?(:read, Category3) 
```

# for-loop - 我在scrapy中的循环没有按顺序运行

> ID：14647387
> 
> 赞同：0
> 
> 时间：2013-02-01T13:30:14.767
> 
> 标签：for-loop, while-loop, range, scrapy

我正在抓取一系列网址。该代码正在运行，但scrapy 没有按顺序解析网址。例如，虽然我正在尝试解析 url1、url2、...、url100，但 scrapy 会解析 url2、url10、url1...等。

它会解析所有的 url，但是当特定的 url 不存在时（例如 example.com/unit.aspx?b_id=10），Firefox 会显示我之前请求的结果。由于我想确保没有重复项，因此我需要确保循环按顺序解析 url 而不是“随意”解析。

我尝试了“for n in range(1,101)”和“while bID<100”，结果是一样的。（见下文）

提前致谢！

```
def check_login_response(self, response):
    """Check the response returned by a login request to see if we are
    successfully logged in.
    """
    if "Welcome!" in response.body:
        self.log("Successfully logged in. Let's start crawling!")
        print "Successfully logged in. Let's start crawling!"
        # Now the crawling can begin..
        self.initialized()
        bID=0
        #for n in range(1,100,1):
        while bID<100:
            bID=bID+1
            startURL='https://www.example.com/units.aspx?b_id=%d' % (bID)
            request=Request(url=startURL ,dont_filter=True,callback=self.parse_add_tables,meta={'bID':bID,'metaItems':[]})
            # print self.metabID
            yield request #Request(url=startURL ,dont_filter=True,callback=self.parse2)
    else:
        self.log("Something went wrong, we couldn't log in....Bad times :(")
        # Something went wrong, we couldn't log in, so nothing happens. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:45:40.647

您可以在请求对象中使用使用优先级属性。Scrapy 保证默认情况下在 DFO 中抓取 url。但它不能确保按照它们在解析回调中产生的顺序访问 url。

您不想产生 Request 对象，而是希望返回一个 Requests 数组，从中弹出对象直到它为空。

有关更多信息，您可以在此处查看

[按顺序抓取 URL](https://stackoverflow.com/questions/6566322/scrapy-crawl-urls-in-order)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:59:04.057

你可以试试这样的。我不确定它是否适合目的，因为我没有看到蜘蛛代码的其余部分，但是你去：

```
# create a list of urls to be parsed, in reverse order (so we can easily pop items off)
crawl_urls = ['https://www.example.com/units.aspx?b_id=%s' % n for n in xrange(99,1,-1)]

def check_login_response(self, response):
    """Check the response returned by a login request to see if we are successfully logged in.
    """
    if "Welcome!" in response.body:
        self.log("Successfully logged in. Let's start crawling!")
        print "Successfully logged in. Let's start crawling!"
        # Now the crawling can begin..
        self.initialized()
        return Request(url='https://www.example.com/units.aspx?b_id=1',dont_filter=True,callback=self.parse_add_tables,meta={'bID':1,'metaItems':[]})
    else:
        self.log("Something went wrong, we couldn't log in....Bad times :(")
        # Something went wrong, we couldn't log in, so nothing happens.

def parse_add_tables(self, response):
    # parsing code here
    if self.crawl_urls:
        next_url = self.crawl_urls.pop()
        return Request(url=next_url,dont_filter=True,callback=self.parse_add_tables,meta={'bID':int(next_url[-1:]),'metaItems':[]})

    return items 
```

# database - 为什么我们不能把所有的主人都放在数据库的一张主人表中？

> ID：14647390
> 
> 赞同：1
> 
> 时间：2013-02-01T13:30:28.750
> 
> 标签：database, ms-access

我们正在 MS Access 2010 中设计一个小型数据库，我们有 3 个主属性，例如，我们有 Country、State 和 Tastes。我们没有为每个属性设计主表，而是想出了一个如下表

```
ID  Value       Attribute
1   USA         Country
2   UK          Country
3   Illionis    State
4   Wisconsin   State
5   Sweet       Taste
6   Sour        Taste 
```

我们正在使用自连接并获得所需的内容。有没有人认为，这不是一个好的数据库设计，如果是，请解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:43:22.853

反对理由：

1）额外的存储空间来存储指示它是什么类型的字段（在有多个表时由每个表上的主键取消，但是您需要将类型存储为（小）整数类型，而不是字符串类型）。

2）为不适用于某些类型的字段提供额外的存储空间（如果以上不仅仅是示例，则不适用，并且不会有更多字段，但是我质疑您的数据库设计的其余部分，并且可扩展性总是值得考虑的）。

3) 降低性能以选择适用的行。

4）显然需要索引`Attribute`（否则（3）是性能杀手），因此 - 降低了更新和删除语句的性能。

5) 糟糕的数据库设计——不要组合不属于一起的概念

**编辑：**

6) 数据库完整性 - 是什么阻止您将无效数据插入到`Attribute`字段中。诚然，您可以拥有另一个带有属性的表并`Attribute`为该表创建一个外键，这有时会有点混乱和令人困惑。

7）外键 - 这样做只会一团糟，更不用说你不能强制数据库完整性和可能的​​速度影响。

8) 可视化——任何表格图都必须手动绘制或编辑，因为自动生成工具（很可能）无法解释这种类型的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:57:37.797

如果我需要按国家/地区获取州列表，我该怎么做？对于您的设计，除了添加一个额外的表格之外，您无法做到这一点。如果您拆分为实体类型，例如 Country、AdministrativeDivision 和 Taste，您可以为每个实体存储适当的属性，而不是复杂的连接表。生成的 SQL 更易于阅读和调试。

确实没有理由尝试通过最小化表的数量来“优化”。任何现代数据库引擎都不会受到额外表的性能损失。您的设计实际上可能会触发性能损失。根据您尝试塞入该表的不同实体的数量，您最终可能会使其变得如此之大以至于整个表无法放入内存，从而在对该表执行选择和连接时强制数据库从磁盘分页。一个好的经验法则可能是，如果您无法合理猜测数据库可能使用什么查询计划来获取您请求的数据，则只需遵循公认的 SQL 最佳实践即可。

在一种情况下，我可以想到这种设计可以接受的地方，那就是您需要为用户提供一个商店，以便在运行时添加他们自己的类别和值。

# javascript - 加载页面的一部分而不刷新它

> ID：14647392
> 
> 赞同：0
> 
> 时间：2013-02-01T13:30:36.283
> 
> 标签：javascript, html, refresh

我对网页设计很陌生。我刚刚完成了我的第一个静态网站。我不喜欢的是页面经常重新加载（每次更改部分时）

我的问题是“如何制作这种导航： http: [//www.doblin.com/work/#innovation-strategy](http://www.doblin.com/work/#innovation-strategy) ”

如您所见，当您单击“设置创新战略/设计、构建 + 启动创新/成为更好的创新者”时，页面不会重新加载

它是怎么做的？

是否可以在没有 sql 左右的静态网站（html/css/jquery）上（它可能需要 ajax 或 ...）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:22:05.613

看一下代码，这个页面使用了一些 jQuery 函数来完成这项工作，检查一下：

```
$(window).hashchange( function(){

    var hash = location.hash;

    // if a hash has been set
    if(hash !== '') {

        showContent(hash, origSections);

    } else {

        // pass in "empty" hash
        showContent('', origSections);

    }

    return false;

});

// call hashchange on initial page load
$(window).hashchange();

// ----------- SHOW CONTENT  ----------- //
function showContent(active, all) {

    if (jQuery.support.opacity) {
        opacity = true;
    } else {
        opacity = false;
    } 
```

这也可以使用 CSS3 过渡和动画来完成。这是基于[此](http://tympanus.net/codrops/2012/01/30/page-transitions-with-css3/)Codrops 教程的[钢笔。](http://codepen.io/anon/pen/FknGD)我特别认为这是一种更好的方法

但是如果你想从某个地方获取动态数据，我建议你使用 Ajax（有一些很酷的 jQuery 东西可以处理这个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:40:51.897

您可以在静态网站上使用 Jquery。您可以通过以下链接 [Jquery](http://coding.smashingmagazine.com/2012/05/31/50-jquery-function-demos-for-aspiring-web-developers/)

但是如果你想保存数据并从服务器检索，那么你需要使用 Ajax 来避免刷新页面。有很多关于如何使用 Ajax 的教程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:38:42.513

（认真）看一下 JQuery 或 Dojo，它们中的任何一个都将成为您的朋友。

您的示例使用 JQuery。

它可以在一个静态页面上完成而无需担心。

这里有一些演示：http: [//jqueryui.com/tabs/](http://jqueryui.com/tabs/)

你也可以在[http://w3schools.com/jquery/default.asp上学习 jquery](http://w3schools.com/jquery/default.asp)

# jquery - 如何使用 JQuery 从 XML 中查找叶子元素

> ID：14647396
> 
> 赞同：0
> 
> 时间：2013-02-01T13:30:44.840
> 
> 标签：jquery, xml, ajax

我有一个 XML 文件

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<childrens>
 <child id="1" value="Root Catalog" parent_id="0">
  <child id="2" value="Apparel" parent_id="1">
    <child id="3" value="Accessories" parent_id="2">
        <child id="4" value="Handbags" parent_id="3">
            <child id="5" value="Jewelry" parent_id="4"/>
            <child id="6" value="test1" parent_id="4"/>
            <child id="7" value="test2" parent_id="4"/>
            <child id="15" value="test3" parent_id="4"/>
        </child>
    </child>
  </child>
  <child id="8" value="test_A" parent_id="1">
    <child id="9" value="test_B" parent_id="8">
        <child id="10" value="test_C" parent_id="9">
            <child id="11" value="test_D" parent_id="10"/>
        </child>
    </child>
  </child>
 </child>
</childrens> 
```

现在我想找到特定元素的叶子元素

例如我想找到叶子元素`Apparel`

所以`Jewelry, test1, test2, test3`我想要这个作为我的输出

我已经编写了这个 jQuery 代码来查找叶子元素

```
$.ajax({
type: "GET",
url: "test.xml",
dataType: "xml",
success: function(xml) {
    $(xml).find('child:empty').filter('child[value="Apparel"]').each(function(){
        var id = $(this).attr('id');
        alert(id)
    });
}
}); 
```

如果我只使用`child:empty`它，它会给我所有的叶子元素

我的代码不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:26:31.657

查看问题[Traversing to the last child element in a tree using jQuery selector](https://stackoverflow.com/questions/2744251/traversing-to-the-last-child-element-in-a-tree-using-jquery-selector)

你可以这样做：

```
$(text).find('child[value="Apparel"]').find(':not(:has(*))').each(function(i, item) {
    console.log($(item).attr('id') + " : " + $(item).attr('value'));
}); 
```

# ruby-on-rails - 模型用户有很多帖子，可以创建帖子

> ID：14647397
> 
> 赞同：1
> 
> 时间：2013-02-01T13:30:45.130
> 
> 标签：ruby-on-rails, models

你好，我的逻辑有问题。在我的应用程序中，用户可以创建帖子并将它们添加到收藏夹。问题在于帖子和用户的关联。当用户创建帖子时 user_id 应用于帖子表。当其他用户或此用户将帖子添加到收藏夹时，我如何进行关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:37:09.777

您需要创建另一个将加入帖子和用户的表。您可以使用 2 列调用该表收藏夹：post_id 和 user_id

```
class Favorite < ActiveRecord::Base
  belongs_to :post
  belongs_to :user
end

class User < ActiveRecord::Base
  has_many :posts
  has_many :favorites
  has_many :favorite_posts, through: :favorites, source: :post
end

class Post < ActiveRecord::Base
  belongs_to :user
  has_many :favorites
  has_many :favorited_by_users, through: :favorites, source: :user
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T13:39:26.110

您可以创建一个新的模型/表进行关联。我会为此采取多对多的关系。

表：书签

```
user_id | post_id 
```

在这里描述了如何在 rails 工作中有许多 :through 关系：

[http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

# magento - Magento + Google Shopping：同步时找不到项目

> ID：14647398
> 
> 赞同：1
> 
> 时间：2013-02-01T13:30:45.403
> 
> 标签：magento

当我从“查看可用产品”中选择并添加产品时，产品已成功添加并显示“总共 1 个产品已添加到 Google 内容中。”，但它没有显示在我的 Google 购物中，我有吗等待一段时间该产品出现在 Google 购物上？

当我选择“谷歌内容项目”并提交同步时，它将从谷歌内容网格中删除项目并显示此消息，“总共 1 个项目已被删除；总共 0 个项目已被更新。 "

我检查了 Magento 中的 googleshopping 日志，它显示为

```
 [body] => 
[content_type] => 
[remaining_redirects] => 
[response] => Zend_Http_Response Object
    (
        [version:protected] => 1.1
        [code:protected] => 404
        [message:protected] => Not Found
        [headers:protected] => Array
            (
                [Content-type] => application/vnd.google.gdata.error+xml
                [Date] => Fri, 01 Feb 2013 10:49:19 GMT
                [Expires] => Fri, 01 Feb 2013 10:49:19 GMT
                [Cache-control] => private, max-age=0
                [X-content-type-options] => nosniff
                [X-frame-options] => SAMEORIGIN
                [X-xss-protection] => 1; mode=block
                [Server] => GSE
                [Connection] => close
            )

        [body:protected] => <errors xmlns='http://schemas.google.com/g/2005'><error><domain>sc</domain><code>notfound</code><location type='other'>request</location><internalReason>item not found</internalReason></error></errors>
    )

[__pid] => 24763 
```

知道出了什么问题。

最初它向我显示错误，例如

致命错误：在 /chroot/home/storeaud/store.audioholics.com/html/app/code/core/Mage/GoogleShopping/Model/Service/Item.php 中的非对象上调用成员函数 getText()第 64 行

因此，通过参考这篇文章[http://www.magentocommerce.com/boards/viewthread/303448/#t421637](http://www.magentocommerce.com/boards/viewthread/303448/#t421637)，我能够解决这个问题，但现在我无法将产品添加到 Google 帐户中的 Google 购物中。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T09:07:40.457

好的，经过一番挖掘，我发现这只会在产品过期并且不再存在于 GMC（Google Merchant Center）中的产品列表下时​​导致问题，因此在 GMC 上找不到要同步的产品/删除。

IMO，如果找不到产品，它应该会自动从 Magento Google Shopping 同步列表中删除它，但是呃......它就是这样。

要绕过它，您需要进入数据库并运行以下命令：

`googleshopping_items`从哪里删除`expires`<NOW();

这应该摆脱所有已过期的产品，并且您应该能够同步新鲜！

# backbone.js - 如何初始化嵌套的 Backbone.js 模型

> ID：14647400
> 
> 赞同：0
> 
> 时间：2013-02-01T13:30:45.630
> 
> 标签：backbone.js

在我的应用程序中，我有以下 JSON 数据格式：

```
{
    Item: {
        property1: '',
        ...
    }
} 
```

按照[这个](https://stackoverflow.com/a/6351460/461992)stackoverflow.com 答案的解决方案，我按照以下方式对我的 Backbond.js 模型进行了建模：

```
App.Models.Item = Backbone.Model.extend({

});

App.Models.ItemData = Backbone.Model.extend({
    defaults: {
        'Item': new App.Models.Item
    }
}); 
```

我现在想在页面加载时将数据从后端系统引导到我的应用程序，方法如下：

```
var item = App.Models.ItemData({
    {Item: 
        {property1: 'data'}
    }
}); 
```

我现在遇到的问题是`item.get('Item')`返回一个普通的 JavaScrip 对象而不是 Backbone.Model 对象，因为默认值被覆盖了。**如何在确保它`item.get('Item')`是 App.Models.Item 对象的同时创建 Backbone.js 对象？**

我也读过，如果你嵌套 Backbone.Models，你应该编写自定义的 getter 方法，所以你的应用程序的其余部分不必知道内部数据结构。如果是这样，实现这些 setter 和 getter 的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:37:59.683

您可以覆盖模型[`parse`](http://backbonejs.org/#Model-parse)上的方法`ItemData`。不需要`defaults`。如果未通过，则 parse 方法将初始化一个空模型：

```
App.Models.ItemData = Backbone.Model.extend({
   parse: function(attrs) {
     attrs = attrs || {};
     if(!(attrs.Item instanceof App.Models.Item))
       attrs.Item = new App.Models.Item(attrs.Item);

     return attrs;
   }
}); 
```

然后使用以下选项初始化您的`ItemData`模型`parse:true`：

```
var item = new App.Models.ItemData({Item:{property1: 'data'}}, {parse:true}); 
```

# sql - SQL查询我有一个表名student，有两列名称和状态

> ID：14647408
> 
> 赞同：2
> 
> 时间：2013-02-01T13:31:10.517
> 
> 标签：sql

我有一个表名 student 有两列`name`和`status`

```
CREATE TABLE student
(
  name varchar(30) , status varchar(30) 
);

INSERT INTO student 
(name, status) 
VALUES 
('a','pass'),
('a','fail'),
('a','pass'),
('b','fail'),
('b','fail'),
('b','pass'); 
```

查询应显示 3 列

```
name pass fail
a    2      1
b    1      2 
```

即学生的姓名对应于哪个计数。他们通过的科目和他们未通过的科目数应显示在结果中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T13:33:37.337

```
select name,
sum(case when status = 'pass' then 1 else 0 end) as sumPass,
sum(case when status = 'fail' then 1 else 0 end) as sumFail
From student
group by name 
```

和[sqlFiddle](http://sqlfiddle.com/#!2/d7959/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:45:18.463

您可以简单地在 MYSQL 中使用它：（假设您使用的是 MYSQL，**不能移植到** `Oracle, SQL Server`）

[MYSQL 演示](http://sqlfiddle.com/#!2/d7959/3)

```
select name,
sum(status = 'pass') as Pass,
sum(status = 'fail') as Fail
From student
group by name
;

| NAME | PASS | FAIL |
----------------------------
|    a |       2 |       1 |
|    b |       1 |       2 | 
```

# wpf - WPF 中的 Silverlight 页面

> ID：14647410
> 
> 赞同：2
> 
> 时间：2013-02-01T13:31:15.217
> 
> 标签：wpf, silverlight-5.0

我正在使用与 WPF 共享 Silverlight 代码。

Silverlight 页面是（导航：页面），但在 WPF 中只有页面，所以我收到错误。

是否可以在 WPF 中使用 Silverlight 页面。

![在此处输入图像描述](../Images/16f3d6093e5dc8972e43f90919252775.png)

# transactions - 流向 Workflow Foundation 4.5 的事务

> ID：14647411
> 
> 赞同：0
> 
> 时间：2013-02-01T13:31:23.113
> 
> 标签：transactions, workflow-foundation-4, transactionscope

我有这个非常简单的工作流程：
![简单的工作流程](../Images/4d6b8cb6d51b818fd4bf3646139cc3ef.png)

正如大家所见，它由一个接收、一个简单的分配和一个发送响应组成，所有这些都在一个接收事务范围内。

现在在消费者方面，我有这段简单的代码：

```
 static void Main(string[] args)
    {            
        using (TransactionScope scope = new TransactionScope())
        {
            Transaction t = Transaction.Current;
            t.TransactionCompleted += t_TransactionCompleted;

            TransactedServiceRef.ServiceClient cli = new TransactedServiceRef.ServiceClient();
            string aux = cli.GetData(new TransactedServiceRef.GetData() { id = 1, value = 1 });                

            Console.WriteLine(aux);
            scope.Complete();

        }            
        Console.ReadLine();

    }

    static void t_TransactionCompleted(object sender, TransactionEventArgs e)
    {
        //POINT 1
    } 
```

现在我的问题是：我不知道为什么，但在“第 1 点”中，我的交易总是中止！！！没有抛出异常，没有错误，没有回滚，什么都没有......它只是中止......有人可以帮助我吗？

顺便说一句：我希望在 POINT 1 中的状态是 Commited ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:58:11.093

您的问题中没有包含任何 WCF 配置详细信息？您是否还使用了适当的绑定并启用了事务？

前段时间我写了一篇关于这个主题的[博客文章。](http://msmvps.com/blogs/theproblemsolver/archive/2009/12/21/flowing-transaction-into-a-workflow-using-wf4.aspx)希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:45:40.647

我检查了“PersistBeforeSend”......所以当我取消选中它时，一切都回到了预期......我不知道它为什么会起作用......它只是......

# c++ - 如何将常量放入代码存储器

> ID：14647413
> 
> 赞同：2
> 
> 时间：2013-02-01T13:31:24.663
> 
> 标签：c++, c, linux, llvm, x86-64

我需要以常数的形式在我的程序中保留一些关于每个函数的信息。我想知道是否可以将函数的常量放在代码存储器之前，所以如果通过函数指针调用函数，则可以通过减去函数指针的值来读取该信息。

为了进一步说明，我的代码内存应如下所示。

```
ConstantForFunc1
Func1:
 ....

ConstantForFunc2
Func2:
 .... 
```

以下是我将如何阅读该信息的示例代码

```
FuncPointer f = &Func2;
int constantForFunc2 = *((int*)(f - sizeof(int))); 
```

请注意，使用哈希表对于我想要实现的目标来说太慢了，所以我需要一个非常快速的方法。所有这些修改，即插入常量和从中读取的代码，都是由我正在编写的编译器传递完成的，它修改了 LLVM IR。使用结构对于编译器传递来说太麻烦了，因为它必须修改大量代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T13:37:34.957

你在做什么没有意义，但是：

你可以使用结构吗？

```
struct example
{
  int constantForFunc;
  void (*ptrToFunc)();
};

//After declaring, maybe 3, functions

struct example funcList[3] = {{5, &func1}, {10, &func2}, {15, &func3}};

int currentFuncConstant=funcList[1].constantForFunc;
(*funcList[1].ptrToFunc)(); 
```

老实说，我没有使用函数指针，可能有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:22:24.237

这根本不能接受吗？：

```
#include <iostream>

using namespace std;

const int Const__Fxn1 = 1;
void Fxn1()
{
  cout << "Fxn1" << endl;
}

const int Const__Fxn2 = 2;
void Fxn2()
{
  cout << "Fxn2" << endl;
}

#define GetFxnConst(FxnName) Const__ ## FxnName

int main()
{
  cout << GetFxnConst(Fxn1) << endl;
  cout << GetFxnConst(Fxn2) << endl;
  return 0;
} 
```

选项 2：

```
#include <iostream>
#include <cstring>

using namespace std;

const volatile int v1 = 0;
volatile unsigned v2 = 0;

void Fxn1()
{
  if (v1) { v2 = 0x12345601; }
  cout << "Fxn1" << endl;
}

void Fxn2()
{
  if (v1) { v2 = 0x12345602; }
  cout << "Fxn2" << endl;
}

int FindFxnConst(void(*f)())
{
  const unsigned char* p = (const unsigned char*)f;
  while (memcmp(p, "\x56\x34\x12", 3))
    p++;
  return p[-1];
}

int main()
{
  Fxn1();
  cout << FindFxnConst(Fxn1) << endl;
  Fxn2();
  cout << FindFxnConst(Fxn2) << endl;
  return 0;
} 
```

输出（[Ideone](http://ideone.com/AGwYJX)）：

```
Fxn1
1
Fxn2
2 
```

您可以使用其他魔术前缀为每个函数嵌入超过 8 位的数据，例如：

```
 if (v1)
  {
    v2 = 0x12345611; // byte 1
    v2 = 0x789ABC22; // byte 2
    v2 = 0xDEF01233; // byte 3
    v2 = 0xFEDCBA44; // byte 4
  } 
```

这不一定是可靠的解决方案，更不用说便携了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:05:35.557

由于函数的地址是从可执行二进制文件中知道的（除非它们是从共享库加载的），如果你关闭了地址空间布局随机化（ASLR），你可以使用[gperf](http://www.gnu.org/software/gperf/)为你生成一个高效的哈希函数并使用该哈希函数来获取每个函数的常量。

但是，为此，您必须编译您的程序两次，首先从生成的二进制文件中获取函数的地址，以便您可以将这些地址作为输入提供给`gperf`并使用生成的哈希函数重新编译`gperf`。但是你必须小心，第一次编译的函数地址在第二次编译时不会变得不同。我不确定，如何实现。

另一种选择是`gperf`在程序加载后执行类似操作，这样您就不必编译两次。但我不知道该怎么做。

# php - PHP 联系表单在首次安装时不起作用

> ID：14647414
> 
> 赞同：0
> 
> 时间：2013-02-01T13:31:26.077
> 
> 标签：php

我刚刚安装了一个新的 PHP 联系表单，但它不起作用。我已经尝试修复它，但我不知道如何修复它。有人可以看看它并给我一个修复吗？PHP代码：

```
 $to = 'email@hotmail.com';
      $subject = 'Contact';
      $contact_submitted = 'Your message has been sent.';

      function email_is_valid($email) {
        return preg_match('/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i',$email);
      }
      if (!email_is_valid($to)) {
        echo '<p style="color: red;">You must set-up a valid (to) email address before this contact page will work.</p>';
      }
      if (isset($_POST['contact_submitted'])) {
        $return = "\r";
        $youremail = trim(htmlspecialchars($_POST['your_email']));
        $yourname = stripslashes(strip_tags($_POST['your_name']));
        $yourmessage = stripslashes(strip_tags($_POST['your_message']));
        $contact_name = "Name: ".$yourname;
        $message_text = "Message: ".$yourmessage;
        $user_answer = trim(htmlspecialchars($_POST['user_answer']));
        $answer = trim(htmlspecialchars($_POST['answer']));
        $message = $contact_name . $return . $message_text;
        $headers = "From: ".$youremail;
        if (email_is_valid($youremail) && !eregi("\r",$youremail) && !eregi("\n",$youremail) && $yourname != "" && $yourmessage != "" && substr(md5($user_answer),5,10) === $answer) {
          mail($to,$subject,$message,$headers);
          $yourname = '';
          $youremail = '';
          $yourmessage = '';
          echo '<p style="color: blue;">'.$contact_submitted.'</p>';
        }
        else echo '<p style="color: red;">Please enter your name, a valid email address, your message and the answer to the simple maths question before sending your message.</p>';
      }
      $number_1 = rand(1, 9);
      $number_2 = rand(1, 9);
      $answer = substr(md5($number_1+$number_2),5,10);
    ?>
    <form id="contact" action="contact.php" method="post">
      <div class="form_settings">
        <p><span>Name</span><input class="contact" type="text" name="your_name" value="<?php echo $yourname; ?>" /></p>
        <p><span>Email Address</span><input class="contact" type="text" name="your_email" value="<?php echo $youremail; ?>" /></p>
        <p><span>Message</span><textarea class="contact textarea" rows="5" cols="50" name="your_message"><?php echo $yourmessage; ?></textarea></p>
        <p style="line-height: 1.7em;">To help prevent spam, please enter the answer to this question:</p>
        <p><span><?php echo $number_1; ?> + <?php echo $number_2; ?> = ?</span><input type="text" name="user_answer" /><input type="hidden" name="answer" value="<?php echo $answer; ?>" /></p>
        <p style="padding-top: 15px"><span>&nbsp;</span><input class="submit" type="submit" name="contact_submitted" value="send" /></p>
      </div>
    </form>` 
```

有人可以帮助我吗？我得到的错误：http: [//i50.tinypic.com/2hfpe7m.jpg](http://i50.tinypic.com/2hfpe7m.jpg)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:33:30.923

PHP 命令显示在您的页面中这一事实清楚地表明 PHP 要么没有安装，要么没有正确配置。确保它已启动并正在运行，并且您的文件具有`.php`扩展名。

您的源代码也缺少开头的`<?php`. 它可能只是您的问题中缺少的，但请确保它存在于您的文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:47:06.033

您缺少开始的 PHP 标记。

只需添加：

```
<?php 
```

在脚本的顶部。

# java - 为不同的 Jbutton 编写动作

> ID：14647418
> 
> 赞同：-2
> 
> 时间：2013-02-01T13:31:38.963
> 
> 标签：java, swing, compiler-errors, jbutton, actionlistener

在上一个问题中，建议我使用以下格式将特定方法分配给特定的 Jbutton。每个按钮我都得到相同的错误。

```
public class MealPlannerGUI 
{
    JPanel foodOptions;
    JButton pButton;
    JButton cButton;
    JButton fButton;
    static JComboBox[] box= new JComboBox[3];

    JPanel search;
    JLabel searchL ;
    JTextField foodSearch;
    JButton startSearch;

    JPanel foodProfile;
    JLabel foodLabel;
    JTextArea foodInfo;
    JButton addFood;

    JPanel currentStatus;
    JLabel foodsEaten;
    JComboBox foodsToday;
    JLabel calories;
    JTextArea totalKCal;
    JButton clearInfo;
     //ow Carbs
    FoodListMaker tester = new FoodListMaker();
    public void go()
    {
        JFrame frame = new JFrame();

        foodOptions = new JPanel();
        foodOptions.setBackground(Color.darkGray);

        pButton = new JButton ("Add");
        cButton = new JButton ("Add");
        fButton = new JButton ("Add");

        for (int i = 0; i<3; i++)
        {

            box[0] = new JComboBox (tester.groupProtein());
            box[1] = new JComboBox (tester.groupKCal());
            box[2] = new JComboBox (tester.groupFat());

            //box[3]= new JComboBox (fillOptionPanel(carbFoods.groupCarb())); 
            foodOptions.add(box[i]);
        }

        search = new JPanel();
        search.setBackground(Color.BLUE);
        search.setLayout(new BoxLayout( search, BoxLayout.Y_AXIS));
        searchL = new JLabel("Search for a food:");
        //searchInfo= new JTextArea(10,20);
        startSearch = new JButton ("Search");
        //JScrollPane scrollPane = new JScrollPane(searchInfo); 
        foodSearch = new JTextField(10);
        search.add(searchL);
        search.add(foodSearch);
        //search.add(searchInfo);
        search.add(startSearch);

    foodProfile = new JPanel();
    foodLabel = new JLabel("Food Contents Profile:");
    foodInfo = new JTextArea(10,20);;
    addFood= new JButton ("Add");
    foodsEaten= new JLabel ("Foods consumed today:");
    foodsToday= new JComboBox();
    calories= new JLabel ("Calorie Counter");
    totalKCal = new JTextArea( 1 , 2);
    foodProfile.add( foodLabel);
    foodProfile.add( foodInfo);
    foodProfile.add( addFood);

    currentStatus = new JPanel();
    currentStatus.setLayout(new BoxLayout( currentStatus, BoxLayout.Y_AXIS));
    currentStatus.add( foodsEaten);
    currentStatus.add( foodsToday);
    currentStatus.add( calories);
    currentStatus.add( totalKCal);

        frame.getContentPane().add(BorderLayout.NORTH,foodOptions);
        frame.getContentPane().add(BorderLayout.WEST,search);
        frame.getContentPane().add(BorderLayout.CENTER,foodProfile);
        frame.getContentPane().add(BorderLayout.EAST,currentStatus);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(500,800);
        frame.setVisible(true);

    }
    startSearch.addActionListener(new ActionListener() 
    {               
        //@Override
        public void actionPerformed(ActionEvent e) 
        {       
            String str = foodSearch.getText();
            searchFoods(str, tester.getFoodList());
        }
    });

    addFood.addActionListener(new ActionListener() 
    {
         //@Override
         public void actionPerformed(ActionEvent e)
         {
            foodsEaten = add(currentFood);
            foodsToday = new JComboBox (foodsConsumed());
            calorieTracker(currentFood.getKCal());
        }
     });

    pButton.addActionListener(new ActionListener() 
    {
        //@Override
        public void actionPerformed(ActionEvent e)
        {
            String foodChoice = (String)box[0].getSelectedItem(); 
            searchFoods(foodChoice, tester.getFoodList());
        }
    });
    cButton.addActionListener(new ActionListener() 
    {
        //@Override
        public void actionPerformed(ActionEvent e)
        {
            String foodChoice = (String)box[1].getSelectedItem(); 
            searchFoods(foodChoice, tester.getFoodList());
        }
    });
    fButton.addActionListener(new ActionListener() 
    {
        //@Override
        public void actionPerformed(ActionEvent e)
        {
            String foodChoice = (String)box[2].getSelectedItem(); 
            searchFoods(foodChoice, tester.getFoodList());
        }
    }); 
```

第一个错误是关于@Override 如何需要“;” 这不应该发生。剩下的错误是指上面代码的结构：

```
mealplans/MealPlannerGUI.java:104: <identifier> expected
    startSearch.addActionListener(new ActionListener() 
                                 ^
mealplans/MealPlannerGUI.java:104: illegal start of type
    startSearch.addActionListener(new ActionListener() 
                                  ^
mealplans/MealPlannerGUI.java:104: ')' expected
    startSearch.addActionListener(new ActionListener() 
                                     ^
mealplans/MealPlannerGUI.java:104: ';' expected
    startSearch.addActionListener(new ActionListener() 
                                                    ^
mealplans/MealPlannerGUI.java:104: illegal start of type
    startSearch.addActionListener(new ActionListener() 
                                                     ^
mealplans/MealPlannerGUI.java:104: <identifier> expected
    startSearch.addActionListener(new ActionListener() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:39:56.857

非声明语句只能出现在构造函数、方法或静态初始化程序中，而不是类块中。您可以将所有调用移动`addActionListener`到一个`initComponents`方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:37:55.383

我不确定@Override。删除时是否会出现相同的错误？我不记得重写嵌套的 ActionListener。

请尝试删除它并告诉我您是否遇到相同的错误。

# java - java TCP Server不向客户端发送数据

> ID：14647419
> 
> 赞同：0
> 
> 时间：2013-02-01T13:31:40.143
> 
> 标签：java, tcp

我需要制作一个 TCP 服务器，它接受来自客户端的套接字并从它们接收数据并将接收到的数据发送到所有客户端。为此，我的 Server 类将接受的连接保存到一个`ArrayList<Socket>`并且同时想要向客户端发送数据：

```
Arraylist<Socket> sockets=Server.getSockets();
for(Socket current: sockets)
{
   ObjectOutputStream out=new ObjectOutputStream (current.getOutputStream());
   out.flush();
   out.writeObject(object);
   out.flush();
   out.close();
 } 
```

但它不起作用。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:05:03.203

您的代码片段没有任何问题，我能感觉到的唯一问题是您的客户端代码是如何实现的。假设您的客户端代码是这样的。

```
Socket clientSocket = new Socket(ip, port);
BufferedReader inFromUser = new BufferedReader( new InputStreamReader(System.in));
DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
while ( true ){
String sentence = inFromUser.readLine();
outToServer.writeBytes(sentence + '\n');
outToServer.flush();

DataInputStream is = new DataInputStream(clientSocket.getInputStream());
System.out.println(is.readLine());
} 
```

现在这个客户端正在从控制台读取输入并将其发送到服务器，发布它阻塞等待响应。**让我们假设如果他收到消息'fire'**，服务器将向所有人发送数据[这是你想要的] 。现在有两个客户端连接到服务器，**ClientA**和**ClientB**。

```
1\. ClientA blocked at user-input (console)
2\. User enter 'abc'
3\. ClientA moves on sends 'abc' to server
4\. ClientA blocks to read data from server
5\. Server sends back 'abc' to ClientA [Assuming its an echo server]
6\. ClientA reads the data, print it
7\. ClientA moves back(while loop), blocked again for user input. 
```

ClientB 也发生了同样的事情，所以现在两者都被阻止了来自控制台的用户输入。
现在假设 ClientA 用户发送我们的魔法词 ['fire' 在这种情况下]，服务器识别它是一个魔法词并开始向 ClientA 和 ClientB 发送数据，

**现在这里需要注意的重要一点，即 ClientA 和 ClientB 的状态**，此时ClientA刚刚发送数据并在点4，因此被阻止从服务器读取数据，因此当服务器发送消息时它可以读取和显示，而客户端B在点1，被阻止从控制台获取数据..所以即使服务器已经发送数据 ClientB 有数据要读取，但它不能因为它卡在第 1 点，你也在写入后关闭与服务器的连接，所以如果 ClientB 不知何故从点 1 移动到点4，套接字已经关闭，因此它再次无法读取。虽然服务器已经向 ClientA 和 ClientB 发送了数据，但只有 ClientA 能够得到它。

呸！！很长的解释，我想它会给你一些解决问题的方向

服务器代码供参考

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.ObjectOutputStream;
import java.io.OutputStreamWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.ArrayList;

public class BroadCastTCPServer {

    private static ArrayList<Socket> sockets = new ArrayList<Socket>();
    //Usage: java TCPServer port
    public static void main(String args[]){

        BroadCastTCPServer server = new BroadCastTCPServer();
        try {
            server.startServer("9999");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void startServer(String portStr) throws IOException {

        int port = Integer.parseInt(portStr);
        ServerSocket  serverSocket = new ServerSocket(port);

         System.out.println("Listening on IP:" +  serverSocket.getInetAddress().getHostAddress() + " Port:"+port);

         while(true){
            Socket connectionSocket = serverSocket.accept();
            sockets.add(connectionSocket);
            System.out.println("New client connection:" + connectionSocket.getRemoteSocketAddress());
            ClientHandler cl = new ClientHandler(connectionSocket);
            Thread clientThread = new Thread(cl);
            clientThread.start();
         }

    }

    public void sendAll() throws Exception{
        System.out.println("No of connections:" + sockets.size());
        for(Socket current: sockets){
            System.out.println(current.getRemoteSocketAddress());
           ObjectOutputStream out=new ObjectOutputStream (current.getOutputStream());
           out.flush();
           out.writeObject("Tata\n");
           out.flush();
           //out.close();
         }
    }

    class ClientHandler implements Runnable{

        Socket socket;
        public ClientHandler(Socket socket){
            this.socket = socket;
        }
        @Override
        public void run() {
            BufferedReader inFromClient = null;
            ObjectOutputStream out = null;
            BufferedWriter br = null;
            try {
                inFromClient = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                out=new ObjectOutputStream (socket.getOutputStream());
                OutputStreamWriter or= new OutputStreamWriter(out);
                br = new BufferedWriter(or);
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            while(true){
            String clientSentence= null;
            try {
                clientSentence = inFromClient.readLine() ;
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            System.out.println("Received: " + clientSentence);
            if (clientSentence.equalsIgnoreCase("fire")) {
                try {
                    sendAll();
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }else{
                try {
                    br.write(clientSentence + "\n" );
                    br.flush();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            }
        }

    }

} 
```

# linux - 在线 Linux Bash 演示

> ID：14647421
> 
> 赞同：6
> 
> 时间：2013-02-01T13:31:42.847
> 
> 标签：linux, bash, shell, webpage

我想向某人演示一些基本的 Linux shell (bash) 命令。我不想通过在我的系统上安装 Linux VM 的整个例程只是为了能够做到这一点。我只是想知道是否有一些在线网页可以做到这一点？比如在线[尝试 MongoDB](http://try.mongodb.org/)。

将不胜感激任何指针。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:35:38.727

我知道是这个，它是一个 Javascript PC 模拟器

[http://bellard.org/jslinux/](http://bellard.org/jslinux/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T13:37:21.373

这个网站在浏览器中做了很多语言： [http ://www.tutorialspoint.com/execute_bash_online.php](http://www.tutorialspoint.com/execute_bash_online.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:34:34.090

好吧，有一个 FreeBSD，对于 bash 的东西应该足够好，见[http://cb.vu/](http://cb.vu/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:35:56.753

Fabrice Bellard [JSLinux](http://bellard.org/jslinux/)是一个完整的 Linux PC 模拟器，在支持 Javascript 的最新浏览器中运行，它提供了一个 shell（可能不是完整的`bash`只是 a `busybox`）

# php - 包括外部站点的选定部分

> ID：14647422
> 
> 赞同：1
> 
> 时间：2013-02-01T13:31:46.227
> 
> 标签：php, wordpress, blogs

我从一个有网站和博客（Wordpress）的朋友那里得到了一个问题。它们位于完全不同的域上。现在，每次她在博客上输入一篇新文章时，她都必须手动更新她网站上的“新闻”部分。现在，她希望它自动更新。所以当她更新她的博客时，最新的文章也会显示在网站上。

是否有可能实现这一点，您是否可以更进一步，比如让网站上显示最近的三篇文章？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:33:30.550

Wordpress 有一个内置的 RSS 系统。在您的其他网站上使用该博客 RSS 自动将它们显示为新闻。

如果您想手动创建它，[这里](http://codex.wordpress.org/WordPress_Feeds)有一本关于如何启动它的好手册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:34:04.967

是的，这叫做`web syndication`

许多博客框架已经使用 RSS、Atom 或类似系统提供开箱即用的联合支持。

您需要做的就是在她的网站上获取 CMS，以阅读她博客的联合并从中获取最新文章。

# sql - 加入 varchar 和 nvarchar

> ID：14647426
> 
> 赞同：1
> 
> 时间：2013-02-01T13:32:08.510
> 
> 标签：sql

我正在比较两个不同数据库中的帐号，以确保两个数据库中都存在该帐户。一个数据库中的帐户字段是`nvarchar`，另一个是`varchar`. 我做了一个演员，把他们都投射到他们身上，`varchar(12)`然后加入他们，看看哪里不匹配。如果有一个少于 12 个字符的帐号，则认为它不匹配。我假设每个字段中的额外字符导致问题？

```
table1 - accountnumber(nvarchar(255))
table2 - accountnumber(varchar(20))

select * from
table1
left outer join table2 on table2.accountnumber = table1.accountnumber 
```

在这个示例中，两个表都有一个编号为 12345678 的帐户，但连接不起作用。我不确定是数据类型不匹配还是空格或其他原因。

--已添加-- 我应该补充一点，table2 中的数据实际上源自一个 Oracle 数据库，它以 varchar2（12 字节）的形式存储。我将它导入到 SQL Server 数据库中，并在其中存储为 varchar(20)。我不确定这是否有所作为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:43:01.140

不确定您在哪里遇到问题。此查询应返回匹配的帐号（无需 CAST）：

```
SELECT *
FROM YourTable 
   JOIN YourOtherTable ON YourTable.AccountNumber = YourOtherTable.AccountNumber 
```

如果您的数据有空格，您可以根据您的 RDBMS 修剪您的数据 - SQL Server 的 LTRIM 和 RTRIM。

```
SELECT *
FROM YourTable 
   JOIN YourOtherTable ON RTRIM(LTRIM(YourTable.AccountNumber)) = RTRIM(LTRIM(YourOtherTable.AccountNumber)) 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!3/8491a/3)。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:57:13.280

您的查询工作正常。这可能是字符编码问题。尝试使用`collate`. 请参阅[此](https://stackoverflow.com/a/2290796/1349295)以前的 SO 答案，这可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-25T11:22:02.463

我遇到了完全相同的情况，我什至有*两个*同级查询（一个创建为另一个的副本），它们都有这个问题。排序规则和类型在这里没有问题。

最后经过大量测试，其中一个查询开始工作而没有明显的变化，只是重新编写。当我重新输入第二个查询的 IN 部分时，它也开始工作了。因此，在查询的某处意外键入了**隐藏字符时出现了问题。**

# php - 如何使 Twitter Bootstrap 的 css 类适应 drupal 菜单？

> ID：14647428
> 
> 赞同：0
> 
> 时间：2013-02-01T13:32:11.880
> 
> 标签：php, css, drop-down-menu, twitter-bootstrap

我正在准备将 Twitter 的 Bootstrap 顶部菜单调整为 Drupal 菜单系统。直到现在，都没有成功。我正在使用 Drupal 模块**nicemenus**在下拉列表中显示它们。

这是使用 Bootstrap 的 css 手工制作的菜单列表：

```
 <div class="navbar navbar-fixed-top">
      <div class="navbar-inner" style="padding-left: 0px;">
        <div class="container">
          <ul class="nav">
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown 1
                <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="#"><i class="icon-star"></i> Item 1</a></li>
                    <li><a href="#"><i class="icon-star"></i> Item 2</a></li>
                </ul>
            </li>
            <li><a href="#">Normal Menu Link without dropdown</a></li>      
          </ul>
        </div>
      </div>
    </div> 
```

这是带有 nicemenus 的菜单输出，您可以看到 Bootstrap 更容易理解。

```
<div id="block-nice-menus-1" class="block block-nice-menus block-1 block-nice-menus-1 odd block-without-title">
  <div class="block-inner clearfix">

    <div class="content clearfix">
      <ul id="nice-menu-1" class="nice-menu nice-menu-down sf-js-enabled">
        <li class="menu-5674 menu-path-liganetnet  first   odd"><a href="">Link without Dropdowns</a></li>
        <li class="menu-267 menuparent  menu-path-front   even"><a style="dropdown" class="dropdown active" href="/">Dropdown Link 1</a>
            <ul style="display: none; visibility: hidden;">
                <li class="menu-2280 menu-path-node-196  first odd "><a href="">Item 1</a></li>
                <li class="menu-270 menu-path-node-197 even "><a title="" href="">Item 2</a></li>
                <li class="menu-271 menu-path-node-1464   odd   last "><a title="" href="">Item 3</a></li>
            </ul>
        </li>

        <li class="menu-268 menuparent  menu-path-front   odd"><a class="active" href="/">Dropdown Link 2</a>
            <ul style="display: none; visibility: hidden;">
                <li class="menu-274 menu-path-node-214  first   odd  "><a title="" href="">Item 1</a></li>
                <li class="menu-273 menu-path-node-213   even  "><a title="" href="">Item 2</a></li>
            </ul>
        </li>
      </ul>
    </div>
  </div>
</div> 
```

我已经安装了 menu_attributes 模块，但是当我添加一些类时，它们只会添加到标签中。如何以编程方式转换这些 CSS 类？

做一个 print_r()，我发现了这个：

```
 [sidebar_second] => Array
                                (
                                    [nice_menus_1] => Array
                                        (
                                            [#markup] => 

Link 1 without Dropdown
Dropdown 1
Dropdown 2
Dropdown 3

                                            [#contextual_links] => Array
                                                (
                                                    [block] => Array
                                                        (
                                                            [0] => admin/structure/block/manage
                                                            [1] => Array
                                                                (
                                                                    [0] => nice_menus
                                                                    [1] => 1
                                                                )

                                                        )

                                                )

                                            [#block] => stdClass Object
                                                (
                                                    [module] => nice_menus
                                                    [delta] => 1
                                                    [theme] => liganet
                                                    [status] => 1
                                                    [weight] => -62
                                                    [region] => sidebar_second
                                                    [custom] => 0
                                                    [visibility] => 0
                                                    [pages] => 
                                                    [title] => 
                                                    [bid] => 744
                                                    [cache] => -1
                                                    [subject] => 
                                                ) 
```

我认为可以通过在页面模板中打印父菜单变量然后在类中打印子变量来完成？我怎么能用 php 做到这一点？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T15:25:38.703

我制作了模块，因为我有同样的问题。

按着这些次序：

步骤1。

从 https://drupal.org/sandbox/m_roji28/2081231 安装模块 bootstrap_components

从 https://drupal.org/project/menu_block 安装模块菜单块

第2步。

添加一个菜单块，并记住菜单块 id（菜单块的增量）。例如，如果菜单块的 url 配置如下：admin/structure/block/manage/menu_block/1/configure，则表示菜单块 id 为 1

步骤 3。

假设你的主题是 bartik，所以在 bartik 的 template.php 中添加这一行

```
 <?php 
    function bartik_menu_link__menu_block__1(&$variables) {
     // set options below
      $options = array('component' => 'button_dropdowns');
     // stop, and enjoy
     if(module_exists('bootstrap_components')){
      $pra_options = array();
      if(isset($variables['element']['#localized_options']['bootstrap_components'])) $pra_options = $variables['element']['#localized_options']['bootstrap_components'];
      $variables['element']['#localized_options']['bootstrap_components'] = $options + $pra_options;//wajib ada index bootstrap_components
      return theme_bootstrap_components_menu_link($variables);
     }
     else return theme_menu_link($variables);
    }?> 
```

步骤完成。

现在，您的菜单块将从

```
 <ul class="menu clearfix"><li class="first leaf menu-mlid-611"><a style="f" class="e" rel="d" name="c" id="b" title="q" href="http://en.wikipedia.org/wiki/Sukarno"><i class="icon-camera-retro"></i>Sukarno</a></li>
    <li class="leaf menu-mlid-612"><a title="" href="http://en.wikipedia.org/wiki/Suharto"><i class="icon-globe"></i>Suharto</a></li>
    <li class="leaf menu-mlid-613"><a title="" href="http://en.wikipedia.org/wiki/B._J._Habibie"><i class="icon-compass"></i>B. J. Habibie</a></li>
    <li class="leaf menu-mlid-614"><a title="" href="http://id.wikipedia.org/wiki/Abdurrahman_Wahid"><i class="icon-bolt"></i>Abdurrahman Wahid</a></li>
    <li class="leaf menu-mlid-615"><a title="" href="http://en.wikipedia.org/wiki/Megawati_Sukarnoputri"><i class="icon-female"></i>Megawati Sukarnoputri</a></li>
    <li class="last leaf menu-mlid-616"><a title="" href="http://en.wikipedia.org/wiki/Susilo_Bambang_Yudhoyono"><i class="icon-bug"></i>Susilo Bambang Yudhoyono</a></li>
    </ul> 
```

至

```
 <div class="btn-group-vertical">
    <button type="button" onclick="window.location.href='http://en.wikipedia.org/wiki/Sukarno'" style="f" class="e btn btn-default" rel="d" name="c" id="b" title="q"><i class="icon-camera-retro"></i>Sukarno</button>

    <button class="btn btn-default" type="button" onclick="window.location.href='http://en.wikipedia.org/wiki/Suharto'" title="http://en.wikipedia.org/wiki/Suharto"><i class="icon-globe"></i>Suharto</button>

    <button class="btn btn-default" type="button" onclick="window.location.href='http://en.wikipedia.org/wiki/B._J._Habibie'" title="http://en.wikipedia.org/wiki/B._J._Habibie"><i class="icon-compass"></i>B. J. Habibie</button>

    <button class="btn btn-default" type="button" onclick="window.location.href='http://id.wikipedia.org/wiki/Abdurrahman_Wahid'" title="http://id.wikipedia.org/wiki/Abdurrahman_Wahid"><i class="icon-bolt"></i>Abdurrahman Wahid</button>

    <button class="btn btn-default" type="button" onclick="window.location.href='http://en.wikipedia.org/wiki/Megawati_Sukarnoputri'" title="http://en.wikipedia.org/wiki/Megawati_Sukarnoputri"><i class="icon-female"></i>Megawati Sukarnoputri</button>

    <button class="btn btn-default" type="button" onclick="window.location.href='http://en.wikipedia.org/wiki/Susilo_Bambang_Yudhoyono'" title="http://en.wikipedia.org/wiki/Susilo_Bambang_Yudhoyono"><i class="icon-bug"></i>Susilo Bambang Yudhoyono</button>
    </div> 
```

# sql - 如何识别 DB2 的 Dynamic Statement Cache 中的 SQL 来源

> ID：14647433
> 
> 赞同：1
> 
> 时间：2013-02-01T13:32:25.903
> 
> 标签：sql, dynamic, db2

为了优化发送到 DB2 的动态 sql 语句，我们将它们保存到一个定制的 DSN_STATEMENT 表中。每条记录都有 PROGRAM_NAME、COLLID 和 STMT_ID，在静态 SQL 中足以识别实际的包。但是如何识别创建动态 SQL 的程序呢？

这些信息是在 DB2、DB2 Connect 或拼图的其他部分中捕获的吗？

编辑：我看到 Trace 316 收集了事务名称和 USER_ID，所以这是有帮助的。在我需要去 SME 询问交易从哪里来之前，我还能做些什么吗？

编辑 2：我们在大型机 (z/OS) 上。

# ruby-on-rails - 如何完全自定义狂欢视图？

> ID：14647434
> 
> 赞同：2
> 
> 时间：2013-02-01T13:32:40.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, spree

如何在 Rails 3.2.11 中自定义狂欢视图，我想添加电子商务网站所有的滑块。请指导我。

我可以将狂欢视图导入我的应用程序导轨视图吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:44:47.077

阅读本[指南](https://guides.spreecommerce.com/developer/view.html)。一切都解释得很清楚。

> 我可以将狂欢视图导入我的应用程序导轨视图吗

是的，就像在任何其他宝石中一样。这是最简单的方法，并在指南的“模板替换”部分进行了说明。

# java - 如何编写一个函数 string replace (char a , char b, string s) 将字符串 s 中出现的每个字符 a 替换为 b

> ID：14647438
> 
> 赞同：-1
> 
> 时间：2013-02-01T13:32:52.123
> 
> 标签：java

我尝试了以下步骤。但是我不知道下一步该怎么做。只能使用`s.equals(""),s.charAt(0),s.substring(1)`。不允许使用其他方式。

```
public string remove1 (char c, string s){
string to_ret = "";
while(true){
   if (s.equals("")) return to_ret;
   char c2 = s.charAt(0);
   if (c2 = c) return to_ret+s.substring(1)
   to_ret = to _ret;
   s = s.substring(1);
}

remove("e","hello") 
```

接下来我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:36:58.890

如果我理解你的问题，你可以这样做：

```
s = s.replace('a', 'b'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:39:03.853

```
public String remove(char a, char b, String s) {
    String retString = "";
    for (int i = 0; i < s.length(); i++) {
        char stringChar = s.charAt(i);
        if (stringChar == a) {
            retString = retString + b;
        } else {
            retString = retString + stringChar;
        }
    }
    return retString;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T13:48:16.503

让我向您介绍一种递归：

```
public String replace(char a, char b, String s) {
    if (s.equals("") return "";
    char ch = s.charAt(i);
    if (stringChar == a) {
        return b+ replace(a,b,s.substring(1))
    } else {
        return ch+ replace(a,b,s.substring(1))
    }   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:46:39.873

这是一个家庭作业问题吗？

```
public String remove1 (char c,char b, String s){
String to_ret = "";
int len = s.length();
for(int i =0 ; i< len ; i++){
    if (s.equals("")) return to_ret;
    char c2 = s.charAt(i);
    if (c2 == c) 
        to_ret = to_ret + b;
    else
        to_ret = to_ret + c2; 

}
return to_ret;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T13:48:03.250

似乎有人试图用 Java 教你函数式编程原则。我会质疑为此选择的语言。即便如此，您应该为您的解决方案寻求递归。字符串的事物作为字符列表。

# java - 我如何获得上一个或最后一个项目？

> ID：14647439
> 
> 赞同：4
> 
> 时间：2013-02-01T13:32:56.863
> 
> 标签：java, swing, jcombobox, itemlistener

如何获取最后一个或上一个或未选中的项目，然后是 a 的新项目`JComboBox`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T13:32:56.863

我假设这适用于所有允许您向它们添加项目侦听器的对象。

```
String[] items = {"item 1","item 2"," item 3","item 4"};
JComboBox combo = new JComboBox(items)
combo.addItemListener(new ItemListener(){
public void itemStateChanged(ItemEvent ie)
{
   if(ie.getStateChange() == ItemEvent.DESELECTED) //edit: bracket was missing
   {
      System.out.println("Previous item: " + ie.getItem()); //edit: bracket was missing
   }
   else if(ie.getStateChange() == ItemEvent.SELECTED)
   {
      System.out.println("Current \ New item: " + ie.getItem());
   }
} 
```

# wcf - 需要建议来创建 WCF DataContarct

> ID：14647440
> 
> 赞同：-2
> 
> 时间：2013-02-01T13:32:56.520
> 
> 标签：wcf

我的 SQL 存储过程返回 3 个表。并且 1 个表是邮件表，另外 2 个是第一个表的子表。为此，我如何使用 C# 在 WCF 中创建 DataContract

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:54:43.773

我建议您尽可能保持 API 干净。使用 AutoMapper 将属性从数据库复制到 WCF 数据类。

```
[DataContract]
public class Mail
{
    [DataMember]
    public string Subject {get;set;}

    [DataMember]
    public ChildTableData1 ChildData1 {get;set;}

    [DataMember]
    public ChildTableData2 ChildData2 {get;set;}
}

[DataContract]
public class ChildTableData1
{
    [DataMember]
    public string Text {get;set;}
}

[DataContract]
public class ChildTableData2
{
    [DataMember]
    public string Text {get;set;}
} 
```

# c# - 以编程方式将证书添加到商店后 Netsh 错误 1312

> ID：14647443
> 
> 赞同：1
> 
> 时间：2013-02-01T13:33:07.603
> 
> 标签：c#, x509certificate, netsh

我正在尝试使用以下代码以编程方式将证书添加到商店：

```
var certPath = string.Format("{0}//{1}", Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location),"fileName.pfx");
        var cert = new X509Certificate2(certPath, "Password");

        X509Store store = new X509Store(StoreName.My, StoreLocation.LocalMachine);
        store.Open(OpenFlags.ReadWrite);
        store.Add(cert);
        store.Close(); 
```

我签入 MMC 并添加了证书。

如果我现在在具有管理员权限的命令提示符下运行：

```
netsh http add sslcert ipport=0.0.0.0:<port> certhash=<Thumbnail> appid={00000000-0000-0000-0000-000000000000} 
```

然后它会抛出一个 1312 错误，“指定的登录会话不存在。它可能已经被终止。”

如果我通过 MMC 中的导入功能添加证书，则上述命令有效。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-26T00:06:12.240

问题是 Windows 存储私钥的方式。要在 .Net 中以编程方式执行此操作，请更改以下代码行：

```
X509Certificate2 cert = new X509Certificate2(path, "password",
    X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.PersistKeySet); 
```

根据这个问题：[Inserting Certificate (with privatekey) in Root, LocalMachine certificate store failed in .NET 4](https://stackoverflow.com/questions/3625624/inserting-certificate-with-privatekey-in-root-localmachine-certificate-store)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:59:39.643

我们最终使用 WIX 在安装时将证书注入商店。它似乎工作得很好。

# android - android从包中获取文件列表

> ID：14647445
> 
> 赞同：4
> 
> 时间：2013-02-01T13:33:10.880
> 
> 标签：android, android-resources

如何获取`.json`不在 SD 卡上但在我的包中的所有配置文件列表？图像上的波纹管显示了我要访问的文件夹中的文件。这个想法如下：当应用程序启动时，我想获取配置文件列表，它们的路径并将其显示给测试人员以选择连接到的服务器。我怎样才能做到这一点？我一直在寻找`PackageManager`and `AssetManager`，但没有结果。

当我将文件夹配置放入文件夹资产时，此代码会向我展示可用配置的列表，但是如何获取它们的完整路径以读取它们？

```
AssetManager am = getAssets();
String s = getPackageName();
Resources tmp = pm.getResourcesForApplication(s);
String [] arr = am.list("configs2"); 
```

![快照](../Images/37409c7f467eeadf78f4b923592f6a25.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:34:54.060

为了做类似的事情，我使用了以下命令：

`InputStream is = context.getResources().openRawResource(R.raw.raw_data_file);`

文件`raw_data_file`在路径中的位置`res/raw/raw_data_file.txt`。然后，您可以正常使用 InputStream 读取文件。我相信你可以对你的文件做类似的事情，但作为一项规则，我通常会将任何资源放在`res(ources)`文件夹中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:09:14.490

我终于解决了我的问题。这是我的项目的结构： ![在此处输入图像描述](../Images/24007632a8cddeda792bcce3624e8002.png)

1.  要从应用程序包中获取文件列表，您需要将要获取的所有文件放入 assets 文件夹中。这是代码：

    私有 ArrayList getPackageConfigList() { AssetManager am = getAssets(); 字符串 [] arr = null; 尝试 { arr = am.list(文件夹); } catch(IOException e) {e.printStackTrace();}

    ```
     ArrayList<String> flist = new ArrayList<String>();

                for (int i=0; i<arr.length; i++)
                {
                    flist.add(PKG + arr[i]);
                    Log.d(tag, PKG+ arr[i]);
                }

                return flist;
            } 
    ```

    2.  从包中读取具体文件：

    private String loadConfigFromPackage(String fileName) { AssetManager am = getAssets(); InputStream in = null; 字符串结果 = null;

    ```
    try
    {
        //open file, read to buffer, convert to string
        in = am.open(folder + "/" + fileName);
        int size = in.available();
        byte[] buffer = new byte[size];
        in.read(buffer);
        in.close();
        result = new String(buffer);
    }
    catch(IOException e)
    {
        e.printStackTrace();
    }
    finally
    {
        try
        {
            in.close();
        }
        catch(Exception ex){}
    }
    return result; 
    ```

    }

# php - wordpress 3.5分页

> ID：14647446
> 
> 赞同：0
> 
> 时间：2013-02-01T13:33:14.610
> 
> 标签：php, wordpress

我正在使用 wordpress 3.4=5，我使用代码来获取帖子，但分页不适用于此，请帮助

```
$posts = get_posts('category='.$subcatid.'&orderby=rand&numberposts=4'); 
 foreach($posts as $post) { ?>
 <h2>
   <a href="<?php the_permalink() ?>" target="_parent"><?php the_title(); ?></a>
 </h2>
 <p><?php //echo $post->post_content; ?></p>
 <p><?php echo get_post_meta($post->ID, 'Address', true); ?></p>
 <hr style="margin-left:0px; margin-right:0px; margin-bottom:15px; margin-top:15px;" />
 <?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:15:31.250

你可以这样做，并为此使用 wp-pagenavi 插件

```
<?php get_query_var('paged');
                         query_posts('cat='.$subcatid.'&posts_per_page=2');
                         if (have_posts()) : while (have_posts()) : the_post();
                         ?>

                        <h2>
       <a href="<?php the_permalink() ?>" target="_parent"><?php the_title(); ?></a>
     </h2>

     <p><?php echo get_post_meta($post->ID, 'Address', true); ?></p>
     <hr style="margin-left:0px; margin-right:0px; margin-bottom:15px; margin-top:15px;" />
                        <?php endwhile; 
                         if(function_exists('wp_pagenavi')) { wp_pagenavi(); } ?>
    <?php                   
                        endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:45:40.963

分页不适用于 get_posts() 。因为你修改了正常的循环 iter 。

# cron - Cronjob cron.daily 不运行（debian）

> ID：14647447
> 
> 赞同：4
> 
> 时间：2013-02-01T13:33:14.247
> 
> 标签：cron, debian

我有一个脚本可以每天随时运行。所以`/etc/cron.daily`似乎是一个简单的解决方案。

但是现在我遇到了问题，cronjob 不会运行该脚本。似乎 cronjob 不会运行任何日常工作。

所以我试着把它放到 cron.hourly 中，一切正常。但我不想每小时运行一次备份脚本。

`/etc/init.d/cron start|stop`工作没有错误。

`/etc/crontab`看起来像默认值：

```
 m h dom mon dow user  command
17 *    * * *   root    cd / && run-parts --report /etc/cron.hourly
25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report     /etc/cron.daily )
47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )
52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly ) 
```

由于它不会运行，我尝试安装 anacron 但没有任何更改。

为什么它运行每小时脚本而不是每日脚本？

非常感谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-15T06:59:01.580

可能是您的日常脚本之一行为不端。尝试手动运行它们。我删除了 logwatch 包和 cron.daily 作业，它又可以工作了。

这是我的 /etc/crontab

```
# /etc/crontab: system-wide crontab

SHELL=/bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin

# m h dom mon dow user  command
16 * * * * root cd / && run-parts --report /etc/cron.hourly
12 2 * * * root test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )
41 1 * * 7 root test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )
9 3 30 * * root test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly )
# 
```

尝试像这样运行日常

```
 run-parts -v --report /etc/cron.daily 
```

您还可以使用 --list 或 --test 获得更多输出。在我的情况下，我删除了行为不端的脚本，日常工作又开始了

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-20T16:15:06.780

我在 /etc/cron.daily 中的一个脚本遇到了同样的问题 脚本的名称是 backupBugzilla.sh

将脚本重命名为 backupBugzilla 后，它起作用了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T03:37:24.297

你安装了 anacron 吗？

```
# dpkg --get-selections | grep anacron 
```

如果是，它不会运行每日、每周和每月脚本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-07T09:00:32.537

run-parts 的联机帮助页指出：

如果既没有 给出`--lsbsysinit` 选项也没有`--regex`给出选项，则名称必须完全由 ASCII 大小写字母、ASCII 数字、ASCII 下划线和 ASCII 减号连字符组成。

我认为它不喜欢您的脚本名称。例如，它不喜欢扩展名“.sh”，因为不允许使用点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-31T16:03:33.493

我遇到了这个问题，这是因为我的脚本的所有者`/etc/cron.daily`不是root。使 root 成为以下所有脚本的所有者`/etc/cron.daily`：

```
sudo chown root /etc/cron.daily/* 
```

此外，请确保脚本是可执行的：

```
sudo chmod +x /etc/cron.daily/* 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-17T16:11:26.133

我有一个喘不过气来`/etc/init.d/anacron`。

我的解决方案：

`edit /etc/init.d/anacron`

必需的开始：$all

保存并运行：

`update-rc.d /etc/init.d/anacron defaults`

现在在喘息开始时效果很好。

# javascript - 如何在 Javascript 中捕获用户操作中消耗的时间？

> ID：14647451
> 
> 赞同：1
> 
> 时间：2013-02-01T13:33:20.050
> 
> 标签：javascript, performance-testing

在我们使用 ExtJs 创建的 RIA 应用程序中，我们需要捕获用户操作所消耗的时间。

例如，用户点击打开窗口的按钮“打开”，则需要捕获打开窗口所消耗的时间。

我们已经尝试使用 Selenium IDE，但它只记录操作并执行它们，并且不记录命令中消耗的时间。

我们还尝试使用浏览器的“Profiler”功能（在操作之前开始分析，在操作结束后停止分析），但那是手动的。

因此，有人可以指导 - 如何以自动方式捕获用户在 Javascript 中操作所花费的时间？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:43:51.013

这是一个全局事件跟踪功能的粗略草图：

```
(function() {

var pairs = {};

eventLogger = function(e) {
    var ts = new Date().getTime();

    if (pairs[e]) {
        var taken = ts - pairs[e],
        img = new Image();
        img.onload = function() { };
        img.src = '/path/to/logger?evt=' + encodeURIComponent(e) + '&t=' + encodeURIComponent(taken);

        delete pairs[e];
    } else {
        pairs[e] = ts;
    }
}

}()); 
```

它匹配成对的事件名称；第一个启动计时器，第二个发出服务器请求以记录该事件所用的时间。

然后，您将记录如下事件：

```
eventLogger('loadContacts');
// start code that loads contacts
// ...
// later
eventLogger('loadContacts'); // done loading 
```

它不区分开始和停止事件，因此如果您可能有重叠的开始和停止时间，您可能需要进行一些调整。

# joomla - Virtuemart 小时和分钟折扣

> ID：14647462
> 
> 赞同：1
> 
> 时间：2013-02-01T13:34:03.337
> 
> 标签：joomla, time, virtuemart, hour, discount

我在 Joomla 上使用 dermart，我想知道是否可以根据时钟打折。我想为每天 16:00 到 20:00 的销售添加 20% 的折扣。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:49:38.883

我认为有一个基于名为 Chameleon 的扩展的可能解决方案。使用 Chameleon，您可以根据特定条件即时设置 VM 购物者组。

所以也许你可以建立一个有 20% 折扣的特殊购物组。然后，您将在 Chameleon 中制定仅在 16:00 到 20:00 之间触发的“规则”。该规则中的“成功操作”是将购物者组设置为新的购物者组。

这样，人们只能在那些时间看到特价。购物者组切换不是“粘性的”，即它不会将人永久分配到该购物者组。

有些人使用此功能为不同国家（GeoIP）的人或他们网站上的不同域设置不同的定价，所以我认为它也应该适用于基于时间的事情。唯一的问题可能是如果他们在 20:00 之前将一些东西添加到购物车但没有及时结帐会发生什么；但我相信这可以解决。

www.metamodpro.com/chameleon

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:02:56.710

开箱即用是不可能做到这一点的。如果您不介意花一些钱，您可以购买一个名为“数量插件”的美德玛特插件，它根据数量计算折扣并将其修改为使用时间而不是数量。

或者，您可以通过检查几个文件来检查计算规则的工作原理：

*   管理员/com_components/com_virtuemart/controllers/calc.php
*   管理员/com_components/com_virtuemart/models/calc.php
*   管理员/com_components/com_virtuemart/views/calc/view.html.php
*   管理员/com_components/com_virtuemart/tables/calc*.php

使用这些文件作为起点，您可以实施自己的折扣规则。

希望这可以帮助。

# android - 使用 onCreateView 从 XML 文件中获取视图

> ID：14647464
> 
> 赞同：0
> 
> 时间：2013-02-01T13:34:11.090
> 
> 标签：android, xml, android-fragments, actionbarsherlock, taps

我正在使用 SherlockFragment 在我的应用程序上创建一些水龙头。因此，我到了这一步，我想从我的 XML 文件中获取视图，因为我正在使用 onCreateView 方法在片段中获取视图（文本视图）。

我目前正在使用下面的代码来获取视图并且它正在工作：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        TextView northingText = new TextView(getActivity());
        northingText.setText("Northing");

        RelativeLayout layout = new RelativeLayout(getActivity()); 
        layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        //layout.setGravity(Gravity.CENTER);
        layout.addView(northingText);
        return layout;
    } 
```

但是，我想使用 RelativeLayout 直接链接到我的 XML 文件，以便获得视图.. IE: RelativeLayout layout = new RelativeLayout(My Xml relativeLayout)

下面的 XML 文件

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:padding="4dip"
    android:id="@+id/Layout"
    android:gravity="center_horizontal"
    android:layout_width="match_parent" android:layout_height="match_parent">
  <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="31dp"
        android:text="@string/northing"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:47:43.950

如果我理解正确你想在你的片段中使用上面的xml布局..使用以下方法：将xml文件放在res的布局文件夹中..构建你的代码..通过自动生成的R.java在活动中访问它并膨胀它在片段的oncreateView中

```
 View myFragmentView = inflater.inflate(R.layout.fragmentlayout, container, false);

   return myFragmentView; 
```

这里 fragmentlayout 是上面 xml 的布局名称...并在 oncreateView 中返回它...

# c - 关于 fork 和 printf/write

> ID：14647468
> 
> 赞同：0
> 
> 时间：2013-02-01T13:34:35.077
> 
> 标签：c, buffer, fork

> **可能重复：**
> [fork() 和输出](https://stackoverflow.com/questions/9364410/fork-and-output)

通过运行：

```
#include<stdio.h>
int main()
{
    fork();
    printf("b");
    if (fork() == 0) {
        write(1, "a", 1);
    }else{
        write(1, "c", 1);
    }
    return 0;
} 
```

我得到了`cbcabbab`，有人可以向我解释一下输出吗？如果可能的话，是否有一个工具可以逐步查看运行过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:00:18.393

简短的回答：不要混合缓冲和非缓冲代码。

长答案：让我们使用以下命令测试源代码的变体：

```
$ rm dump
$ for X in 0 1 2 3 4 5 6 7 8 9; do for Y in 0 1 2 3 4 5 6 7 8 9; do for Z in 0 1 2 3 4 5 6 7 8 9; do echo `./program` >> dump; done; done; done
$ sort -u dump 
```

这会执行`program`一千次，并列出它返回的所有唯一输出。

# 缓冲版本：替换`write`为`fwrite`（或`printf`）

```
#include <unistd.h>
#include <stdio.h>

int main()
{
    fork();
    printf("b");
    if (fork() == 0) {
        fwrite("a", 1, 1, stdout);
    }else{
        fwrite("c", 1, 1, stdout);
    }
    return 0;
} 
```

这给出了一个非常规则的输出模式。事实上，只有六个输出是可能的：

```
bababcbc
babcbabc
babcbcba
bcbababc
bcbabcba
bcbcbaba 
```

到底是怎么回事？

1.  第一次分叉后，有两个进程，W和Y。
2.  `"b"`两个进程都向`stdout`流写入一封信。默认情况下，流是缓冲的，因此 .
3.  在第二次分叉之后，有四个进程：W 和 X，Y 和 Z。W 和 X 的`stdout`流具有相同的状态，因此也包含相同的缓冲区`"b"`。Y 和 Z 也是如此。
4.  `stdout`所有四个进程都向流中写入另一个字母。
5.  返回后`main`，C 运行时接管。每个进程都会刷新它们的缓冲区，包括`stdout`.

# 无缓冲版本：替换`printf`为`write`

```
#include <unistd.h>

int main()
{
    fork();
    write(1, "b", 1);
    if (fork() == 0) {
        write(1, "a", 1);
    }else{
        write(1, "c", 1);
    }
    return 0;
} 
```

可能的输出现在更加多样化了，但考虑到并发性，它仍然很容易理解：

```
bbacca
bbcaac
bbcaca
bbccaa
bcabca
bcbaca 
```

这可能是您预期的输出。

# 混合版（你的）

您的代码比前两个变体提供了更多的结果：

```
cabbacbb
cabbcabb
cabbcbab
cabcabbb
cabcbabb
cabcbbab
... etc ... 
```

这是因为`write`调用会立即产生输出，但缓冲的`"b"`只会在每个进程终止时打印，当然是在**调用之后**`write`。就像在完全缓冲的版本中一样，每个进程都会`"b"`在`stdout`缓冲区中拥有它，所以你最终会看到其中的四个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:40:51.507

再次尝试运行它，您可能会得到不同的输出。

至于逐步查看过程的工具，我认为`strace -f`可能会有所帮助：

```
$ strace -f ./weirdfork
execve("./weirdfork", ["./weirdfork"], [/* 35 vars */]) = 0
... uninteresting boiler plate removed ...
clone(Process 8581 attached
child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7fe1c7d0b9d0) = 8581
[pid  8580] fstat(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 0), ...}) = 0
[pid  8581] fstat(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 0), ...}) = 0
[pid  8580] mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0 <unfinished ...>
[pid  8581] mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0 <unfinished ...>
[pid  8580] <... mmap resumed> )        = 0x7fe1c7d22000
[pid  8581] <... mmap resumed> )        = 0x7fe1c7d22000
[pid  8581] clone( <unfinished ...>
[pid  8580] clone(Process 8582 attached
 <unfinished ...>
[pid  8581] <... clone resumed> child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7fe1c7d0b9d0) = 8582
Process 8583 attached
[pid  8580] <... clone resumed> child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7fe1c7d0b9d0) = 8583
[pid  8580] write(1, "c", 1 <unfinished ...>
[pid  8581] write(1, "c", 1cc)            = 1
[pid  8580] <... write resumed> )       = 1
[pid  8581] write(1, "b", 1b <unfinished ...>
[pid  8580] write(1, "b", 1 <unfinished ...>
[pid  8581] <... write resumed> )       = 1
b[pid  8581] exit_group(0)               = ?
Process 8581 detached
[pid  8580] <... write resumed> )       = 1
[pid  8580] exit_group(0)               = ?
[pid  8583] write(1, "a", 1 <unfinished ...>
[pid  8582] write(1, "a", 1a)            = 1
a[pid  8582] write(1, "b", 1 <unfinished ...>
[pid  8583] <... write resumed> )       = 1
[pid  8583] write(1, "b", 1b)            = 1
[pid  8583] exit_group(0)               = ?
Process 8583 detached
b<... write resumed> )                   = 1
exit_group(0)                           = ?
Process 8582 detached 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:41:39.263

除非您专门添加代码来同步您的分叉进程，否则它们将完全独立运行，因此输出顺序是完全“随机的”。进程调度将决定谁下一个运行，这又取决于系统中有多少个处理器内核，还有什么正在运行，以及当前运行的每个进程已经运行了多长时间。

如链接中所述，您还可以从 的内部缓冲区获取输出`printf`，因为输出尚未写入代表的实际文件`stdout`- 您可以通过添加`fflush(stdout);`after来“修复”该问题`printf`。

# javascript - jQuery.grep 与 Array.filter 的性能对比

> ID：14647470
> 
> 赞同：39
> 
> 时间：2013-02-01T13:34:36.547
> 
> 标签：javascript, jquery, performance

在一个[问题](https://stackoverflow.com/q/14644693/1047823)中讨论了 jQuery 和原生 JS 将如何相互对抗。

当然，vanilla 解决方案的执行速度要快得多，因为它不处理整个数组，但我建议使用`Array.filter`它，我非常有信心至少会比`$.grep`.

令人惊讶的是，在将其添加到测试后，我学到了一个教训：**[Testsuite](http://jsperf.com/grep-vs-pure-js/8)**

[Edgecases](http://jsperf.com/grep-vs-pure-js/7)当然有不同的结果。

任何人都知道为什么`$.grep`应该比本机方法快 3 倍以上`Arrray.filter`？

编辑：我修改了测试以使用[来自 MDN 的过滤器垫片，](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter#Compatibility)结果非常有趣：

*   Chrome：即使是 MDN shim 也比原生方法快，jQuery 遥遥领先
*   Firefox：shim 比本机方法慢一点，jQuery 领先

最后是我希望看到的结果

*   Internet Explorer：native 方法是最快的，然后是 jQuery，shim 是最慢的（也许这只是 IE 相当弱的 JS 引擎的结果......）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-01T13:39:17.557

正如在**[这篇博文中发现的](http://monkeyandcrow.com/blog/why_javascripts_filter_is_slow/)**那样（也做了同样的测试）：

> 如果您阅读 的文档[`filter`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)，您会明白为什么它这么慢。
> 
> 1.  它忽略数组中已删除的值和间隙
> 2.  它可以选择设置谓词函数的执行上下文
> 3.  它可以防止谓词函数改变数据

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-01T14:13:16.140

[ECMAScript 5.1 规范的第 15.4.4.20 节](http://ecma-international.org/ecma-262/5.1/#sec-15.4.4.20)定义`Array.prototype.filter(callbackfn, thisArg)`如下：

> `callbackfn`应该是一个函数，它接受三个参数并返回一个可强制转换为布尔值的值`true`或 `false`. 对数组中的每个元素按升序`filter`调用一次，并构造一个包含所有返回值的新数组。仅对实际存在的数组元素调用；它不需要数组的缺失元素。`callbackfn``callbackfn``true``callbackfn`
> 
> 如果`thisArg`提供了参数，它将用作`this` 每次调用的值`callbackfn`。如果未提供， `undefined`则改为使用。
> 
> `callbackfn`使用三个参数调用：元素的值、元素的索引和被遍历的对象。
> 
> `filter`不会直接改变调用它的对象，但对象可能会通过调用`callbackfn`.
> 
> filter 处理的元素范围是在第一次调用之前设置的`callbackfn`。在调用过滤器开始后附加到数组的元素将不会被`callbackfn`. 如果数组的现有元素被更改，它们传递给 `callbackfn`的值将是过滤器访问它们时的值；在调用过滤器开始之后和被访问之前被删除的元素不会被访问。

这本身就已经是很多工作了。ECMAScript 引擎需要执行的许多步骤。

然后它继续说以下内容：

> 当使用一个或两个参数调用过滤器方法时，将执行以下步骤：
> 
> 让`O`是调用`ToObject`将`this`值作为参数传递的结果。让是使用参数`lenValue`调用`[[Get]]`内部方法的结果。让_`O``length``len``ToUint32(lenValue)`. 如果 IsCallable(callbackfn) 为 false，则抛出 TypeError 异常。如果提供了 thisArg，则令 T 为 thisArg；否则令 T 未定义。让 A 是一个新数组，就像由表达式 new Array() 创建的，其中 Array 是具有该名称的标准内置构造函数。令 k 为 0。令为 0。重复，而 k < len 令 Pk 为 ToString(k)。令 kPresent 为使用参数 Pk 调用 O 的 [[HasProperty]] 内部方法的结果。如果 kPresent 为真，则令 kValue 为使用参数 Pk 调用 O 的 [[Get]] 内部方法的结果。令 selected 为调用 callbackfn 的 [[Call]] 内部方法的结果，其中 T 作为 this 值，参数列表包含 kValue、k 和 O。如果 ToBoolean(selected) 为 true，则调用 [[DefineOwnProperty]] A 的内部方法，带参数 ToString(to)，属性描述符 {[[Value]]: kValue, [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true} 和 false。增加 1。将 k 增加 1。返回 A。
> 
> filter方法的length属性为1。
> 
> 注意过滤器功能是故意通用的；它不要求它的 this 值是一个 Array 对象。因此，它可以转移到其他类型的对象中用作方法。过滤器功能是否可以成功应用于宿主对象取决于实现。

关于这个算法的一些注意事项：

*   它可以防止谓词函数改变数据
*   它可以选择设置谓词函数的执行上下文
*   它忽略数组中已删除的值和间隙

在很多情况下，这些东西都不需要。因此，在编写`filter`自己的方法时，大多数时候您甚至都不会费心执行这些步骤。

每个符合 ES5.1 的 JavaScript 引擎都必须符合该算法，因此每次使用`Array#filter`.

任何只执行部分步骤的自定义编写方法都会更快，这不足为奇:)

如果您编写自己的`filter`函数，它可能不会像上述算法那样复杂。也许您根本不会将数组转换为对象，因为根据用例，可能不需要仅过滤数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T18:28:21.017

我发现了一些有趣的东西。正如 MarcoK 所解释的，$.grep 只是一个带有 for 循环的简单实现。过滤器在大多数情况下速度较慢，因此实现必须不同。我想我找到了答案：

```
function seak (e) { return e === 3; }

var array = [1,2,3,4,5,6,7,8,9,0], i, before;
array[10000] = 20; // This makes it slow, $.grep now has to iterate 10000 times.
before = new Date();

// Perform natively a couple of times.
for(i=0;i<10000;i++){
    array.filter(seak);
}

document.write('<div>took: ' + (new Date() - before) + '</div>'); // took: 8515 ms (8s)

before = new Date();

// Perform with JQuery a couple of times
for(i=0;i<10000;i++){
    $.grep(array, seak);
}
document.write('<div>took: ' + (new Date() - before) + '</div>'); // took: 51790 ms  (51s) 
```

在这种情况下，本机“过滤器”要快得多。所以我认为它迭代属性而不是数组索引。

现在让我们回到“大”问题；）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-21T07:45:04.510

你的剧本没有错吗？

因为`array.filter`您正在进行 1000 次测量，并通过总和除以 1000 来呈现它

因为`JQuery.grep`您正在进行 1 次测量，并以总和除以 1000 的方式呈现。

这意味着您的 grep 实际上比您用于比较的值慢 1000 倍。

Firefox 中的快速测试给出：

```
Machine 1:
average filter - 3.864
average grep - 4.472

Machine2:
average filter - 1.086
average grep - 1.314 
```

chrome中的快速测试给出：

```
Machine 1:
average filter - 69.095
average grep - 34.077

Machine2:
average filter - 18.726
average grep - 9.163 
```

Firefox (50.0) 中的结论对于您的代码路径来说要快得多，并且过滤器比 jquery.grep 快大约 10-15%。

Chrome 对于您的代码路径来说非常慢，但 grep 似乎比 array.filter 快 50%，这使得它比 firefox 运行慢 900%。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-10-06T14:24:13.803

**TLDR；**Grep 的速度要快一个数量级......（提示为什么[可以在这里找到](https://stackoverflow.com/questions/14091065/jquery-grep-vs-native-javascript-filter-function-performance#answer-14091157)）

> 在我看来，.filter 强制它是 Object，检查回调 IsCallable 并在其中设置 this 以及检查每次迭代中是否存在属性，而 .grep 假定并跳过这些步骤，这意味着发生的事情稍微少了一些。

这是我用于测试的脚本：

```
function test(){
var array = [];
for(var i = 0; i<1000000; i++)
{
array.push(i);
}

var filterResult = []
for (var i = 0; i < 1000; i++){
var stime = new Date();
var filter = array.filter(o => o == 99999);
filterResult.push(new Date() - stime);
}

var grepResult = [];
var stime = new Date();
var grep = $.grep(array,function(i,o){
return o == 99999;
});
grepResult.push(new Date() - stime);

$('p').text('average filter - '+(filterResult.reduce((pv,cv)=>{ return pv +cv},0)/1000))
$('div').text('average grep - '+(grepResult.reduce((pv,cv)=>{ return pv + cv},0)/1000))
}
test();
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<p></p>
<div></div>
```

# android - 如何打开浏览器并导航到带有air for android的网页？

> ID：14647475
> 
> 赞同：2
> 
> 时间：2013-02-01T13:34:51.610
> 
> 标签：android, flash, air

我正在使用 Actionscript 3.0 中的 flash 为 android 编程。用户触摸按钮后，我需要导航到网页。像这样的东西：

```
button.addEventListener(TouchEvent.TOUCH_TAP, fl_TapHandler);
function fl_TapHandler(event:TouchEvent):void
{
    WebBrowser.Navigate("http://www.webpage.com/");
} 
```

我不知道这个功能 D: 。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:46:32.337

我认为应该是这样的

```
button.addEventListener(TouchEvent.TOUCH_TAP, fl_TapHandler);
function fl_TapHandler(event:TouchEvent):void
{
   var request:URLRequest = new URLRequest("http://www.webpage.com/");
    navigateToURL(request);
} 
```

该[`navigateToURL`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html#navigateToURL())方法是`flash.net`包的一部分。

# java - Google App Engine Blob 操作 [常规]

> ID：14647476
> 
> 赞同：2
> 
> 时间：2013-02-01T13:34:51.727
> 
> 标签：java, eclipse, google-app-engine, blobstore

我对 App Engine 很陌生，但对**Java**很熟悉。我需要帮助了解 Google App Engine 的 Blobs API。

我有点在网上浏览了文档，但不幸的是并没有理解太多。我还花了几个小时在网上搜索包含关于 App 引擎上的 blob 的解释/教程/演练的博客，但无济于事。

我在同一个项目中使用数据存储 API 没有问题。

我需要以下帮助：

1.  如何将文本文件作为 blob 上传？
2.  什么是 blob 键，它在创建 blob 时有何作用？
3.  上传 Blob 后，如何打开它并将其读入字符串（用于修改）？
4.  如何将修改后的字符串写回 blob？[不必追加，只需写入即可]

谢谢！一个解释或一个教程的链接会很好。:)

PS如果这意味着什么，我在日食。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:14:00.823

1.  按照 Blobstore API 中的示例，了解如何[上传文件](https://developers.google.com/appengine/docs/java/blobstore/overview#Uploading_a_Blob)。
2.  BlobKey 是 Blobstore 在将 blob 存储到其中时生成的长唯一标识符（不易猜测）。
3.  Blobstore 中的 Blob 是不可变的，因此一旦它们完全保存到 Blobstore 中，您就无法更改它们的内容。您必须读取 blob 数据、对其进行修改、将其另存为新 blob（并可能删除旧 blob）。请参阅[文件 API](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)。
4.  见 3。

由于您需要更新 blob 数据，因此如果您的数据大小小于 1Mb，则最好将 blob 存储到 Datastore Entity 中。您可以使用或类型的[属性](https://developers.google.com/appengine/docs/java/datastore/entities#Properties_and_Value_Types)。[`Blob`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Blob)[`Text`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Texthttp://)

# google-analytics - 谷歌分析 - 退出页面上的跟踪

> ID：14647485
> 
> 赞同：0
> 
> 时间：2013-02-01T13:35:16.123
> 
> 标签：google-analytics, tracking

我的页面上有一个来自，在提交时我将跟踪提交事件。我必须提交转到其他服务器上的其他页面。如何在页面更改之前跟踪提交点击？

你有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:25:31.200

您将要使用“事件”来跟踪提交按钮的鼠标按下和/或“输入”按键

```
// submit button
jQuery('#keyword-submit').bind('mousedown', function (event) {
    _gaq.push(['_trackEvent', 'onsite search', search_keyword]);
});
// textbox
jQuery('#searchKeywords').bind('keydown', function (event) {
    if (event.keyCode == 13) 
        _gaq.push(['_trackEvent', 'onsite search', search_keyword]);
}); 
```

# python - 图 GUI 冻结

> ID：14647491
> 
> 赞同：1
> 
> 时间：2013-02-01T13:35:23.553
> 
> 标签：python, matplotlib, plot, freeze, subplot

我在 python 方面相当新，我正在尝试根据存储在文件中的数据绘制一个图。这个文件可能随时更新，所以我试图让绘图每 3 秒更新一次（所以我不使用所有 CPU）。我的问题是午餐后 GUI 冻结。

```
#!/usr/bin/python
# _*_ coding: utf8 _*_

import matplotlib.pyplot as plt
import numpy as np
import time 

plt.ion()
plt.figure()
i=0
while 1:
    taille=0
    fichier=np.loadtxt('data/US.SAVE')
    fichier1=np.loadtxt('data/cond.SAVE')
    taille1=np.size(fichier1[:,1])
    taille=np.size(fichier[:,1])

    min=min(fichier[0,0],fichier1[0,0]);

    fichier[:,0]=fichier[:,0]-min
    fichier1[:,0]=fichier1[:,0]-min

    if (taille != taille1) :
        printErrors("TAILLE DE FICHIERS DIFFERENTES")

    nb_chunks=np.size(fichier1[1,:])
    nb_inputs=np.size(fichier[1,:])

    plt.subplot(3,1,1)

    plt.bar(fichier[:,0],fichier[:,1],align='center',width=0.0001, facecolor='b', label="US")
    x1,x2,y1,y2 = plt.axis()
    x1=x1-0.0001
    plt.axis([x1, x2, y1, 1.2])
    plt.legend(ncol=3,prop={'size':9})
    plt.title("US ") 
    plt.ylabel('Activation')
    plt.xlabel('Time')

    plt.subplot(3,1,2)

    plt.bar(fichier1[:,0],fichier1[:,1],align='center',width=0.0001, facecolor='b', label="response")

    plt.axis([x1, x2, y1, 1.2])
    plt.legend(ncol=3,prop={'size':9})
    plt.title("Response ") 
    plt.ylabel('Activation')
    plt.xlabel('Time')

    plt.subplot(3,1,3)

    plt.bar(fichier[:,0]-fichier1[:,0],fichier1[:,1],align='center',width=0.0001, facecolor='b', label="Error")
    plt.axis([x1, x2, y1, 1.2])
    plt.legend(ncol=3,prop={'size':9})
    plt.title("Error") 
    plt.ylabel('Activation')
    plt.xlabel('Time')
    plt.draw()
    name1='data/Conditionnement.eps'
    plt.savefig(name1,dpi=256)
    plt.draw()
    del fichier,fichier1,min
    i=i+1

    time.sleep(3)   

plt.show() 
```

我没有在基于文件的绘图上找到任何其他主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:09:33.190

您想使用该`plt.pause(3)`功能而不是`time.sleep()`. `pause`包括对 gui 主循环的必要调用以重新绘制图形。

另请参阅：[Python- 1 秒绘图连续演示](https://stackoverflow.com/questions/12679013/python-1-second-plots-continous-presentation/12682987#12682987)、 [matplotlib 实时线性线](https://stackoverflow.com/questions/14265513/matplotlib-real-time-linear-line/14266609#14266609)、 [python 2 中的 pylab.ion()、matplotlib 1.1.1 以及程序运行时绘图的更新](https://stackoverflow.com/questions/12822762/pylab-ion-in-python-2-matplotlib-1-1-1-and-updating-of-the-plot-while-the-pro/12826273#12826273)，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T22:20:13.473

除了@tcaswell（解决问题）的答案之外，我建议以更面向对象的方式重新考虑脚本。

我试过这个：

```
plt.ion()
plt.figure()
plt.show()

while True:
    x=np.arange(10)
    y=np.random.rand(10)

    plt.subplot(121)
    plt.plot(x,y)
    plt.subplot(122)        
    plt.plot(x,2*y)

    plt.draw()

    plt.pause(3) 
```

但它不起作用（看起来它`plt.figure`会在每个循环中打开一个 gui。

像这样的解决方案：

```
plt.ion()
fig, ax = plt.subplots(nrows=2, ncols=1)
plt.show()

while True:
    x=np.arange(10)
    y=np.random.rand(10)

    ax[0].plot(x,y)
    ax[1].plot(x,2*y)

    plt.draw()

    plt.pause(3) 
```

效率更高（轴只创建一次），更整洁（最后 matplotlib 是 OO）并且可能不太容易出现内存泄漏。

此外，根据您的大部分情况，我收集到在每个循环中您再次读取文件，然后绘制新行。如果是这种情况，您需要在重绘之前先清除轴的内容。在我的简单情况下，您可以使用清除轴

```
for a in ax:
    a.clear() 
```

# java - 将位置移向目标位置

> ID：14647493
> 
> 赞同：0
> 
> 时间：2013-02-01T13:35:28.277
> 
> 标签：java, geolocation

我有两个位置（纬度、经度），一个是当前位置，另一个是目标。我想做的是有一个循环，将当前位置分阶段移动到目标位置。我不完全确定将当前位置转移到目标位置的数学方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:46:32.430

这是在两点之间分阶段实现所有点的粗略演示代码。希望对您有所帮助：

```
import java.awt.Point;
public class  Path
{
    public static void main(String[] args) 
    {
        Point start         = new Point(0,0);
        Point destination   = new Point(100,150);
        int   iStages = 9;//Suppose I want to reach to destination in 9 jumps
        int   jumpX = (destination.x - start.x) / iStages;
        int   jumpY = (destination.y - start.y) / iStages;
        Point currPos = start;
        for (int i = 0; i < iStages ; i++)
        {
            System.out.println(currPos);
            currPos = new Point(currPos.x + jumpX , currPos.y + jumpY );
        }
        currPos = new Point(destination.x , destination.y);
        System.out.println(currPos);
    }
} 
```

# redis - 键过期事件

> ID：14647494
> 
> 赞同：31
> 
> 时间：2013-02-01T13:35:28.123
> 
> 标签：redis, publishing

我想知道 redis 中是否有一个功能可以让我获取所有过期的密钥（我的意思是某种事件，这让我有机会收回所有过期的记录）。它的目的是将旧值保存到另一个数据库中。我听说可以使用发布机制，但谷歌无法帮助我们实现这个想法。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-01T18:41:09.957

当前的 redis 开发版本包含一个新特性：keyspace 通知。文档：[http ://redis.io/topics/notifications](http://redis.io/topics/notifications)

> Keyspace 通知允许客户端订阅 Pub/Sub 频道，以便接收以某种方式影响 Redis 数据集的事件。
> 
> 可能接收的事件示例如下：
> 
> *   影响给定键的所有命令。
> *   所有接受 LPUSH 操作的键。
> *   数据库 0 中所有过期的密钥。

希望它会尽快稳定下来。

顺便说一句，它在帮助您保存过期密钥的值方面不是很有用。当过期事件被触发时，该值已经消失。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-05-27T02:41:00.737

键空间通知生成的内置过期事件不准确。[请参阅http://redis.io/topics/notifications](http://redis.io/topics/notifications)的最后一部分

> Redis 以两种方式使与生存时间相关联的密钥过期：
> 
> 1.  当密钥被命令访问并发现已过期时。
>     
>     
> 2.  通过后台系统在后台逐步查找过期密钥，以便能够收集从未访问过的密钥。
>     
>     
> 
> 过期事件是在访问密钥并被上述系统之一发现过期时生成的，因此无法保证 Redis 服务器能够在密钥生存时间产生过期事件达到零值。如果没有命令始终以密钥为目标，并且有许多密钥与 TTL 相关联，则密钥生存时间下降到零的时间与生成过期事件的时间之间可能存在显着延迟。

要完全实现应计过期事件，您可能必须自己实现它。例如，通过使用按过期时间排序的排序列表（或 AVL 树），并不断读取列表的尾部（取消队列）。如果阅读器发现过期时间还没有到达，它会休眠（过期时间 - 现在）。这样精度可以控制在10s ms以内。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-27T14:29:21.860

使用`redis-scheduler`.
你可以在[这里找到](https://github.com/petreboy14/redis-scheduler)

# jquery - jQuery 加载“POST”错误

> ID：14647495
> 
> 赞同：1
> 
> 时间：2013-02-01T13:35:28.253
> 
> 标签：jquery, html

我只是想将一个 div 的内容加载到另一个 onClick 中，但我收到一个错误，要求我使用 POST 请求，

```
$("#button").click(function(){
     $('#slide1').load('#slide2');
}); 
```

[http://jsfiddle.net/9hnZx/](http://jsfiddle.net/9hnZx/)上的半个工作示例

对整个 jQuery 前端来说还是新手，所以如果这是一个愚蠢的问题，请耐心等待！谢谢！

编辑。感谢所有回答的人，真的很有帮助，除了我给出的例子是在 jsfiddle 中工作，但我无法在需要的网站上工作， [http:](http://bettondesignwork.co.uk/tim/j3mobile/) //bettondesignwork.co.uk/tim/j3mobile/ 有人有任何线索吗？jQuery 加载得很好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:37:10.500

尝试：

```
$("#button").click(function(){
    $('#slide1').html($('#slide2').html());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:43:58.370

其他答案建议将一个元素的 HTML 复制到另一个元素。[由于此答案](https://stackoverflow.com/questions/7392930/why-should-y-innerhtml-x-innerhtml-be-avoided/7393126#7393126)中说明的原因，这是一个坏主意。相反，复制 DOM 元素：

```
$("#button").click(function(){
    $('#slide1').html($('#slide2').contents());
}); 
```

有关这方面的文档，请参阅 API 参考页面[`html`](http://api.jquery.com/html)和[`contents`](http://api.jquery.com/contents)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:37:47.453

试试吧

```
 $("#button").click(function(){
         $('#slide1').html($('#slide2').html());
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:49:57.770

jQuery 代码

```
$("#button").click(function(){
         //first get the send div text
        var secondDiv = $("#slide2").text();
        var firstDiv = $("#slide1").text();
         // slide 1 value

         $('#slide2').text(secondDiv+" "+firstDiv);
    }); 
```

# cookies - 如何在两个不同的域之间共享 cookie

> ID：14647497
> 
> 赞同：1
> 
> 时间：2013-02-01T13:35:34.740
> 
> 标签：cookies, webforms

我只是不知道在两个不同的域之间共享 cookie 是否可行，但是当我需要在两个子域之间共享 cookie 时，我会按照以下方式进行

```
HttpCookie cookie = new HttpCookie("cookiename", "value");
cookie.Domain = "domain.com";

For forms authentication set this in web.config

<forms name=".ASPXAUTH" 
       loginUrl="login.aspx" 
       protection="All" 
       timeout="30" 
       path="/" 
       requireSSL="false" 
       domain="domain.com">
</forms> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T13:40:03.723

我认为你可以使用 jQuery 并且只指定域

`$.cookie('the_cookie', 'the_value', { path: '/', domain: 'www.example.com' });`

# css - 悬停放大时的 CSS 并移动文本位置

> ID：14647503
> 
> 赞同：0
> 
> 时间：2013-02-01T13:35:58.980
> 
> 标签：css, jsfiddle

这是我设法做的..

[http://jsfiddle.net/pns2050/gAZPs/3/](http://jsfiddle.net/pns2050/gAZPs/3/)

```
#navigation ul li {
    text-decoration: none;
    list-style:none;
    text-align:center;
    float:left;
    width:80px;
    height:30px;
    margin-left:10px;
    border-bottom-left-radius:10px;
    border-bottom-right-radius:10px;
    background-image:url(../images/nav.jpg);
    box-shadow: 0px 2px 5px 2px #91948d;

}

#navigation ul li a {
    margin-top:5px;      
    text-decoration: none;
    color:white;
    font-weight:bold;
    width:100%;
    height:100%; 
    display:block;
}

#navigation ul li:hover
{
 height:33px;
}

#navigation ul li a:hover {
    margin-top: 8px;

} 
```

我遇到的问题是，如果我将鼠标放在“框”的顶部，则在悬停时，文本将返回其原始位置..我已将 [ul li a] 设置为 height:100% 但我不明白为什么它不起作用..

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:38:10.370

只是改变

```
 #navigation ul li a:hover {
        margin-top: 9px;

    } 
```

至

```
#navigation ul li:hover a {
    margin-top: 9px;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:00:06.017

如果您希望整个元素可点击，请不要设置样式`li`而是`a`直接设置样式！

演示：http: [//jsfiddle.net/gAZPs/5/](http://jsfiddle.net/gAZPs/5/)

使用 display:inline`li`删除项目符号：

```
#navigation ul li {
    display:inline;   
} 
```

然后，使用您的所有样式`a`：

```
#navigation ul li a{
    text-decoration: none;
    text-align:center;
    float:left;
    width:80px;
    height:30px;
    margin-left:10px;
    border-radius:0 0 10px 10px;
    background-color:#ccc;
    box-shadow: 0px 2px 5px 2px #91948d;
    color:white;
    font-weight:bold;
    line-height: 30px;
}

 #navigation ul a:hover {
    padding-top: 3px;
} 
```

# jquery - 将文本附加到html charset utf8时的Jquery不起作用

> ID：14647507
> 
> 赞同：5
> 
> 时间：2013-02-01T13:36:14.083
> 
> 标签：jquery, utf-8, character-encoding

当我将信息传递给 html 中的 div 时，无法识别 charset utf 8 并且它在文本中带有询问点。有没有办法强制 jquery 中的字符集 utf 8 使脚本传递的所有文本都以正确的字符集出现？

编辑：我想我可以在所有文件中设置所有字符集：HTML

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Type:application/json; charset=UTF-8" />
<script type="text/javascript" src="scripts/jquery-1.9.0.min.js" charset="utf-8"></script>
<script type="text/javascript" src="message_validator.js" charset="utf-8"></script>
</head>
<body>
<div class="error_display" charset="utf-8"></div>
<form charset="utf-8">
<input type="text" id="name" class="textbox" name="name" minlength="2" maxlength="12" />
</form>
</body> 
```

查询

```
 $(document).ready(function() {
    $(document).load("Content-Type:application/json; charset=UTF-8");
    $('.submit').click(function(){
        var errorlist = [];
        errorlist.length = 0;

        errorlist.push("- Tem de preencher os campos obrigat&#243;rios.");

         if(errorlist.length >= 1){
            $('.error_display').animate({'height':errorlist.length*20}, {queue:false, duration:500});
            for(var i = 0; i < errorlist.length; i++) {
                $('.error_display').append(errorlist[i]+"<br/>");
            }

         }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:38:54.563

这不应该是一个问题。确保您的页面在元标记中设置为使用 UTF8。

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

还要确保此文本的来源（如果它是服务器端，您未在 OP 中指定）将其作为 UTF-8 发送给您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-13T05:44:10.237

使用正确的字符输入您的文本，然后尝试像这样对其进行解码：

```
errorlist.push(decodeURIComponent(escape("- Tem de preencher os campos obrigatórios."))); 
```

[还要检查这些示例以在此处](http://rbalajiprasad.blogspot.com.es/2012/09/jquery-utf8-encode-and-decode.html)对文本进行编码/解码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-20T12:58:16.193

应该注意的一件事是脚本文件本身的编码可能会导致此错误。确保您的脚本文件编码正确。在 Visual Studio 中，这是通过以下方式完成的：

1.  打开文件并执行“另存为”
2.  单击“保存”按钮旁边的 chrevon 并选择“使用编码保存”
3.  选择您需要的编码

[![在此处输入图像描述](../Images/00a0dbff62fa94b61bb52dbf8698421d.png)](https://i.stack.imgur.com/ni3bJ.jpg)

它因IDE而异，但要点是相同的

# c# - 我可以使用什么运算符来返回两个序列的“重叠”？

> ID：14647508
> 
> 赞同：1
> 
> 时间：2013-02-01T13:36:14.787
> 
> 标签：c#, system.reactive

我有一个`IObservable<InputEvent> eventStream`表示键盘输入流（KeyUp 或 KeyDown）的流。通过应用*Window 运算符*，我可以隔离保持输入的持续时间：

```
public static IObservable<InputEvent> WhileHeld(this IObservable<InputEvent> source, String key) {
    var k = source.Where(i => i.Key == key);
    return source.Window(k.Press(), _ => k.Release()).Switch().Where(i => i.Key != key);
} 
```

我现在想做的是**找到多个窗口的“重叠”**。例如：

```
var ctrlHeld = eventStream.WhileHeld("ctrl");
var shiftHeld = eventStream.WhileHeld("shift"); 
```

我想应用一个运算符来查找这两个序列之间的重叠，如下面的大理石图所示

*   K = 事件类型，其中`.`是新闻，`'`是发布
*   我 = 事件流
*   C = eventStream.WhileHeld("ctrl")
*   S = eventStream.WhileHeld("shift")
*   r = 结果流

大理石：

```
K |--.---.-.-.-'-'---.-.-.-'-'---.-.-'-.-.-.-'
i |--a---C-S-b-S-C---C-S-c-C-S---C-S-S-d-S-e-C-

C |--------S-b-S-------S-c---------S-S-d-S-e---
S |----------b-----------c-C---------------e-C

r |----------b-----------c-----------------e--- 
```

**这样的运营商存在吗？或者它将如何组成？**

**编辑：**

为了帮助可视化实际的事件流（我意识到上面的大理石图有点复杂）。这是我的事件流测试代码：

```
eventStream.Pump("a", EventType.Down); // should not propagate

eventStream.Pump("ctrl", EventType.Down);
eventStream.Pump("shift", EventType.Down);
eventStream.Pump("b", EventType.Down); // should propagate
eventStream.Pump("shift", EventType.Up);
eventStream.Pump("ctrl", EventType.Up);

eventStream.Pump("ctrl", EventType.Down);
eventStream.Pump("shift", EventType.Down);
eventStream.Pump("c", EventType.Down); // should propagate
eventStream.Pump("ctrl", EventType.Up);
eventStream.Pump("shift", EventType.Up);

eventStream.Pump("ctrl", EventType.Down);
eventStream.Pump("shift", EventType.Down);
eventStream.Pump("shift", EventType.Up);
eventStream.Pump("d", EventType.Down); // should not propagate
eventStream.Pump("shift", EventType.Down);
eventStream.Pump("e", EventType.Down); // should propagate
eventStream.Pump("ctrl", EventType.Up); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:54:56.220

我最终提出的解决方案提供了`x.WhileHeld(ctrl).WhileHeld(shift)`. 诀窍是传入一个`IObservable<InputEvent>`派生自**原始**源，而不是 a `string`，然后将其窗口化：

```
public static IObservable<InputEvent> WhileHeld(this IObservable<InputEvent> source, IObservable<InputEvent> held) {
    return source.Window(held.Press(), _ => held.Release()).Switch();
}

...

var x = InputStream.Where(i => i.Key == "X");
var shift = InputStream.Where(i => i.Key == "Shift");
var ctrl = InputStream.Where(i => i.Key == "Ctrl");

// gets all key presses of X while shift and control are held
var ctrlShiftX = x.WhileHeld(shift).WhileHeld(ctrl); 
```

这意味着捕获了按住键的第一个和最后一个按键，但我认为这不一定是坏事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:47:16.467

（注：将在电脑前测试/修改一次）

我*认为*您可以使用 获得“重叠窗口”行为`GroupJoin`，如下所示：

```
var ctrlShift = ctrlHeld.GroupJoin(
        shiftHeld,
        e => eventStream.Key("ctrl").Release(),   // "left duration" selector
        e => eventStream.Key("shift").Release(),  // "right duration" selector
        (a,b) => b.Key(a.Key).Press())
    .Switch(); 
```

但我永远无法`GroupJoin`从视觉上得到正确的语法，所以很可能这不是它......基本上，想法是：

*   从 ctrlHeld 中的事件开始（直到发生 ctrl 释放）
*   从 shiftHeld 中的事件开始（直到发生轮班释放）
*   选择重叠 (b)，仅在两个窗口中按下
*   展平那些嵌套的 observables 并返回

（编辑：进一步思考，您可能可以在持续时间内重用窗口选择器......）

```
var ctrlShift = ctrlHeld.GroupJoin(
        shiftHeld,
        e => ctrlHeld,   // "left duration" selector
        e => shiftHeld,  // "right duration" selector
        (a,b) => b.Key(a.Key).Press())
    .Switch(); 
```

啊哈，我知道有一个链接可以解释这一点：

[不可估量的 Lee Campbell 在 Windows 和 Rx 中的缓冲区](http://leecampbell.blogspot.com/2011/03/rx-part-9join-window-buffer-and-group.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:45:58.603

到目前为止，我最接近的是：

```
var ctrlShift = Observable.CombineLatest(ctrlHeld, shiftHeld)
    .SelectMany(list =>
        {
            if (list.Any(o => o != list[0]))
                return Observable.Empty<InputEvent>();
            else
                return Observable.Return(list[0]);
        }); 
```

它可以完成工作，但有点丑陋。如果有比这更简洁或更具表现力的答案，我会接受

# cocoa - 如何在可可中使用拉伸来调整 NSImage 的大小

> ID：14647510
> 
> 赞同：1
> 
> 时间：2013-02-01T13:36:32.140
> 
> 标签：cocoa, nsimage

我正在开发摄影应用程序。在那我需要为`NSImage`我使用这样的绘图创建框架

```
NSImage *fg_img = [[NSImage alloc]initWithData:[NSData dataWithContentsOfFile:filepath]];
        //NSData *imageData1 = [NSData dataWithContentsOfURL: [NSURL encryptedFileURLWithPath:str]] ;
        NSImage *bg_img = [[NSImage alloc]initWithContentsOfURL:[NSURL encryptedFileURLWithPath:str]];

    NSImage *newImage ;

    NSRect imageRect = NSMakeRect(0,0, fg_img.size.width+fg_img.size.width/5, fg_img.size.height+fg_img.size.height/5);
    newImage = [[NSImage alloc] initWithSize: NSMakeSize(imageRect.size.width,imageRect.size.height)];
    NSRect fgrect = NSMakeRect(imageRect.size.width*0.03,imageRect.size.height*0.04, imageRect.size.width-imageRect.size.width/15.5, imageRect.size.height-imageRect.size.height/12);

    [newImage lockFocus];

    [fg_img drawInRect:fgrect fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];
    [bg_img drawInRect:imageRect fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];

    [newImage unlockFocus]; 
```

但不清楚..

原始帧图像

![我原来的框架是](../Images/abb337e80582c7605878bb366ad59c74.png)

当我缩放它的输出是 ![在此处输入图像描述](../Images/1738706aecbde3ba56714e19792ec9d3.png)

在上图中，当我调整框架图像的大小时，框架的宽度发生了变化。我需要在缩放时不改变帧图像的宽度。

更新：

但是你的代码显示是这样的

![预习](../Images/38a47d102c2282d63ad2ac68d5e569d5.png)

如果我给大图，基本图像会变得很薄

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:32:45.083

我认为您正在寻找九部分图像。九部分图像仅垂直调整左侧和右侧，仅水平调整顶部和底部，中心是独立调整轴的大小，角不调整大小。

```
_____________ 
|c |  hor | c|  
|__|______|__|
|  |      |  |
|v | axes |v |
|e |indep.|e |
|r |      |r |
|__|______|__|
|c |  hor |c |
|__|______|__| 
```

苹果有一个方法可以帮助你绘制这样的图像：`NSDrawNinePartImage` [这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Miscellaneous/AppKit_Functions/Reference/reference.html) 但它需要准备图像。

初始化代码是这样的：

```
 static NSImage *baseImage = NULL;
    static NSImage *topLeftCornerImage;
    static NSImage *topEdgeImage;
    static NSImage *topRightCornerImage;
    static NSImage *leftEdgeImage;
    static NSImage *centerImage;
    static NSImage *rightEdgeImage;
    static NSImage *bottomLeftCornerImage;
    static NSImage *bottomEdgeImage;
    static NSImage *bottomRightCornerImage;

    + (void)initialize;
    {
        if (baseImage) return;

        //46x46

        baseImage = [NSImage imageNamed:@"badge.png"];

        topLeftCornerImage = [[NSImage alloc] initWithSize:NSMakeSize(22, 22)];
        [topLeftCornerImage lockFocus];
        [baseImage drawInRect:NSMakeRect(0,0,22,22)
                     fromRect:NSMakeRect(0.0,24,22,22)
                    operation:NSCompositeCopy fraction:1.0];
        [topLeftCornerImage unlockFocus];

        topEdgeImage = [[NSImage alloc] initWithSize:NSMakeSize(2, 22)];
        [topEdgeImage lockFocus];
        [baseImage drawInRect:NSMakeRect(0,0,2,22)
                     fromRect:NSMakeRect(22,24,2,22)
                    operation:NSCompositeCopy fraction:1.0];
        [topEdgeImage unlockFocus];

        topRightCornerImage = [[NSImage alloc] initWithSize:NSMakeSize(22, 22)];
        [topRightCornerImage lockFocus];
        [baseImage drawInRect:NSMakeRect(0,0,22,22)
                     fromRect:NSMakeRect(24,24,22,22)
                    operation:NSCompositeCopy fraction:1.0];
        [topRightCornerImage unlockFocus];

        leftEdgeImage = [[NSImage alloc] initWithSize:NSMakeSize(22, 2)];
        [leftEdgeImage lockFocus];
        [baseImage drawInRect:NSMakeRect(0,0,22,2)
                     fromRect:NSMakeRect(0,22,22,2)
                    operation:NSCompositeCopy fraction:1.0];
        [leftEdgeImage unlockFocus];

        centerImage = [[NSImage alloc] initWithSize:NSMakeSize(2, 2)];
        [centerImage lockFocus];
        [baseImage drawInRect:NSMakeRect(0,0,2,2)
                     fromRect:NSMakeRect(22,22,2,2)
                    operation:NSCompositeCopy fraction:1.0];
        [centerImage unlockFocus];

        rightEdgeImage = [[NSImage alloc] initWithSize:NSMakeSize(22, 2)];
        [rightEdgeImage lockFocus];
        [baseImage drawInRect:NSMakeRect(0,0,22,2)
                     fromRect:NSMakeRect(24,24,22,2)
                    operation:NSCompositeCopy fraction:1.0];
        [rightEdgeImage unlockFocus];

        bottomLeftCornerImage = [[NSImage alloc] initWithSize:NSMakeSize(22, 22)];
        [bottomLeftCornerImage lockFocus];
        [baseImage drawInRect:NSMakeRect(0,0,22,22)
                     fromRect:NSMakeRect(0,0,22,22)
                    operation:NSCompositeCopy fraction:1.0];
        [bottomLeftCornerImage unlockFocus];

        bottomEdgeImage = [[NSImage alloc] initWithSize:NSMakeSize(2, 22)];
        [bottomEdgeImage lockFocus];
        [baseImage drawInRect:NSMakeRect(0, 0, 2, 22)
                     fromRect:NSMakeRect(22, 0, 2, 22)
                    operation:NSCompositeCopy fraction:1.0];
        [bottomEdgeImage unlockFocus];

        bottomRightCornerImage = [[NSImage alloc] initWithSize:NSMakeSize(22, 22)];
        [bottomRightCornerImage lockFocus];
        [baseImage drawInRect:NSMakeRect(0,0,22,22)
                     fromRect:NSMakeRect(24,0,22,22)
                    operation:NSCompositeCopy fraction:1.0];
        [bottomRightCornerImage unlockFocus];
    } 
```

绘图代码：

```
NSDrawNinePartImage([self bounds],
                    topLeftCornerImage, topEdgeImage, topRightCornerImage,
                    leftEdgeImage, centerImage, rightEdgeImage,
                    bottomLeftCornerImage, bottomEdgeImage, bottomRightCornerImage,
                    NSCompositeSourceOver, 1.0, NO); 
```

这是我实现基于 CALayer 的九部分图像的另一个示例 - NinePartLayer。

NinePartLayer.h

```
#import <Foundation/Foundation.h>

@interface NinePartLayer : CALayer {
@private
    NSSize _blockSize;
    NSMutableArray* layers;
    NSMutableArray* _images;
}

+ (NinePartLayer*) layerWithImage:(NSImage*)aImage;

@property (assign)NSSize blockSize;
- (void) setImage:(NSImage*)aImage;
@end 
```

NinePartLayer.m

```
#import "NinePartLayer.h"

@interface NinePartLayer()

@property (retain)NSMutableArray* layers;
@property (retain)NSMutableArray* images;

@end

@implementation NinePartLayer
@synthesize images = _images;
@synthesize blockSize = _blockSize;
@synthesize layers;

+(NSImage*) imageFromImage:(NSImage *)anImage rect:(NSRect)aRect
{
    @try {
        NSPoint point = { -aRect.origin.x, -aRect.origin.y };
        NSImage *theImage = [[self alloc] initWithSize:aRect.size];
        [theImage lockFocus];
        [anImage compositeToPoint:point operation:NSCompositeCopy];
        [theImage unlockFocus];
        [theImage autorelease];
        return theImage;
    }
    @catch (NSException *exception) {
        NSLog(@"%@",[exception description]);
        return nil;
    }
}

+ (NinePartLayer*) layerWithImage:(NSImage*)aImage
{
    NinePartLayer* newLayer = [NinePartLayer layer];
    [newLayer setImage:aImage];
    return newLayer;
}

- (id)init {
    self = [super init];
    if (self) {
        self.layers = [NSMutableArray array];
        self.images = [NSMutableArray array];
    }
    return self;
}

- (void) updateLayers
{
    for (int i = 0; i < 3 && i < [self.images count]; ++i) {
        NSMutableArray* row = [self.images objectAtIndex:i];
        for (int j = 0; j < 3 && j < [row count]; ++j) {
            CALayer* item = [row objectAtIndex:j];
            float x,y,width,height;
            if(i == 0){
                y = 0;
                height = floorf(self.blockSize.height);
            } else if(i == 1){
                y = ceilf(self.blockSize.height);      
                height = self.frame.size.height - 2*self.blockSize.height;
            } else if(i == 2){
                y = self.frame.size.height - self.blockSize.height;
                height = self.blockSize.height;
            };
            if(j == 0){
                x = 0;
                width = self.blockSize.width;
            } else if(j == 1){
                x = self.blockSize.width;
                width = self.frame.size.width - 2*self.blockSize.width;
            } else if(j == 2){
                x = self.frame.size.width - self.blockSize.width;
                width = self.blockSize.width;
            };

            item.frame = CGRectMake(x, y, width, height);

            float delta=0;

            if((i==1)&&(j==0))
            {
                item.frame = CGRectMake(x, y-delta, width+delta, height+2*delta);
            }

            if((i==2)&&(j==1))
            {
                item.frame = CGRectMake(x-delta, y-delta, width+2*delta, height+delta);
            }

            if((i==1)&&(j==2))
            {
                item.frame = CGRectMake(x-delta, y-delta, width+delta, height+2*delta);
            }

            if((i==0)&&(j==1))
            {
                item.frame = CGRectMake(x-delta, y, width+2*delta, height+delta);
            }
        }
    } 
}

- (void) setImage:(NSImage*)aImage
{
   for(int i = 0; i < [self.layers count]; ++i)
        [[self.layers objectAtIndex:i] removeFromSuperlayer];

    [self.layers removeAllObjects];

    self.images = [NSMutableArray array];
    self.layers = [NSMutableArray array];
    if(!aImage)
        return;

    for (int i = 0; i < 3; ++i) {
        NSMutableArray* row = [NSMutableArray array];
        for (int j = 0; j < 3; ++j) {
            NSImage* img = [NSImage imageFromImage:aImage 
                                              rect:NSMakeRect((float)j/3.0*[aImage size].width, 
                                                              (float)i/3.0*[aImage size].height, 
                                                              1.0/3.0*[aImage size].width,
                                                              1.0/3.0*[aImage size].height)];
            self.blockSize = NSMakeSize(1.0/3.0*[aImage size].width, 1.0/3.0*[aImage size].height);

            CALayer* item = [CALayer layer];
            [item performSelectorOnMainThread:@selector(setContents:) withObject:img waitUntilDone:NO];
            [item performSelectorOnMainThread:@selector(setContentsGravity:) withObject:kCAGravityResize waitUntilDone:NO];
            [self performSelectorOnMainThread:@selector(addSublayer:) withObject:item waitUntilDone:NO];
            [row addObject:item];
            [self.layers addObject:item];
        }
        [self.images addObject:row];
    }
    [self performSelectorOnMainThread:@selector(updateLayers) withObject:nil waitUntilDone:NO];
}

- (void) setFrame:(CGRect)frame
{
    [super setFrame:frame];
    [self updateLayers];
}

- (void) setBounds:(CGRect)bounds
{
    [super setBounds:bounds];
    [self updateLayers];
}

- (void) setPosition:(CGPoint)position
{
    [super setPosition:position];
    [self updateLayers];
}

- (void)dealloc {
    self.layers = nil;
    self.images = nil;
    [super dealloc];
}
@end 
```

用法：

```
 NinePartLayer * pageContainerShadowlayer=[NinePartLayer layerWithImage:[NSImage imageNamed:@"drop_shadow.png"]];
    pageContainerShadowlayer.frame=[mainView layer].bounds;
    pageContainerShadowlayer.autoresizingMask=kCALayerWidthSizable | kCALayerHeightSizable;
    [[rootView layer] insertSublayer:pageContainerShadowlayer atIndex:3]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-09T08:00:59.263

万一其他人在几年后偶然发现了这个问题（就像我一样）——从 macOS 10.10 (Yosemite) 开始，NSImage 有一个`capInsets`属性可以使用单个源图像处理九部分图像行为。耶！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T17:20:19.223

你考虑[过 NSDrawNinePartImage](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Miscellaneous/AppKit_Functions/Reference/reference.html#//apple_ref/c/func/NSDrawNinePartImage)吗？这是一个专门为在您建议的排列中绘制九个图像（四个角、四个边缘和一个中心）而设计的功能，没有可见的接缝，也不会拉伸角和边缘图像。

# c# - C# 将额外参数传递给事件

> ID：14647513
> 
> 赞同：0
> 
> 时间：2013-02-01T13:36:44.650
> 
> 标签：c#

我想向事件传递三个额外的参数：

```
geocodeService.GeocodeCompleted += new EventHandler<GeocodeService.GeocodeCompletedEventArgs>(geocodeService_GeocodeCompleted); 
```

参数是

*   `int id`
*   `string color`
*   `double heading`

    ```
    private void Geocode(string strAddress, int waypointIndex, int id, string color, double heading)
    {

        // Create the service variable and set the callback method using the GeocodeCompleted property.
        GeocodeService.GeocodeServiceClient geocodeService = new GeocodeService.GeocodeServiceClient("BasicHttpBinding_IGeocodeService");

        // NEED TO PASS id, color, heading TO THIS EVENT HANDLER
        geocodeService.GeocodeCompleted += new EventHandler<GeocodeService.GeocodeCompletedEventArgs>(geocodeService_GeocodeCompleted);

        GeocodeService.GeocodeRequest geocodeRequest = new GeocodeService.GeocodeRequest();
        geocodeRequest.Credentials = new Credentials();
        geocodeRequest.Credentials.ApplicationId = ((ApplicationIdCredentialsProvider)BingMap.CredentialsProvider).ApplicationId;
        geocodeRequest.Query = strAddress;
        geocodeService.GeocodeAsync(geocodeRequest, waypointIndex);
    }

    private void geocodeService_GeocodeCompleted(object sender, GeocodeService.GeocodeCompletedEventArgs e)
    {
        GeocodeResult result = null;

        if (e.Result.Results.Count > 0)
        {
            result = e.Result.Results[0];
            if (result != null)
            {
                // this.ShowMarker(result);
                this.ShowShip(result);

            }
        }

    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:53:24.307

它看起来像`GeocodeCompletedEventArgs`延伸`AsyncCompletedEventArgs`。`AsyncCompletedEventArgs`具有`UserState`可用于存储异步事件状态信息的属性。此状态通常作为参数传递给引发事件的方法。

有关更多信息，请参阅此问题：[Bing GeocodeService userState usage as custom additional parameter](https://stackoverflow.com/questions/12176217/bing-geocodeservice-userstate-usage-as-custom-additional-parameter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:51:28.743

您可以扩展 GeocodeService.GeocodeServiceClient 添加这些属性，然后在事件方法 geocodeService_GeocodeCompleted 中使用 sender 参数：

```
var service = (GeocodeService.GeocodeServiceClient) sender; 
```

快速而肮脏（恕我直言）的版本是使用 lambda 表达式：

[将参数传递给 EventHandler](https://stackoverflow.com/questions/8644253/c-sharp-pass-parameter-to-eventhandler)

# php - ZEND：在模块引导程序中加载自定义类

> ID：14647516
> 
> 赞同：0
> 
> 时间：2013-02-01T13:36:50.963
> 
> 标签：php, zend-framework, zend-app-bootstrap

我想在 myModule/Bootstrap.php 中调用位于 myModule/myFolders/myFile.php 中的自定义类

这是它现在的样子：

```
 <?php

    class Users_Bootstrap extends Zend_Application_Module_Bootstrap {

        public function _initAutoload() {
        Zend_Loader_Autoloader::getInstance()->pushAutoloader(new NAMESPACE_Excel_ExcelAutoLoader()); // This workes fine

        new Myfolder_Myfile();  // THIS IS WHERE I'm CALLING my CLASS

}

        public function _initRoutes() {

            $router = Zend_Controller_Front::getInstance()->getRouter();

             $listUsersRoute = new Zend_Controller_Router_Route("admin/users/manage", array(
               'module' => 'users',
               'controller' => 'admin',
               'action' => 'index'      ));

            $router->addRoute('listUsersRoute', $listUsersRoute);

        }     } 
```

如果我将自定义类移动到 myModule/Modles 文件夹并从那里调用它，它就可以工作。

我知道 Zend Bootstrap 知道并自动从我的模块中加载位置作为视图、控制器和模型。那么我怎样才能让它也加载 myFolder 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:27:17.543

有很多方法可以完成您正在尝试做的事情。首先，我要问 - 是否需要在许多地方重用 MyFolder_MyFile() 类？如果没有，您可能会考虑将该类的逻辑转换为它自己的自定义引导程序 - 它扩展了您的 Users_Bootstrap。然后，你会有这样的事情：

```
MyFolder_MyFileBootstrap extends Users_Bootstrap 
```

然后，您可以选择创建单独的 _init* 方法 - 或者保持与您编写的一样兼容，您可以创建一个新的 _initAutoload() 来首先执行父级 - 然后是您自己的任何逻辑......

**MyFolder_MyFileBootstrap::_initAutoload()**

```
public function _initAutload() {
    parent::_initAutload();
    // my own logic here
} 
```

但是，如果此解决方案将彻底改变您编写应用程序的方式，您将需要使用 Zend Framework Autoloader 的命名空间方法添加文件。

对于您的示例，您可以在 _initAutoloader() 方法中尝试此操作：

```
$applicationAutoloader = $this->getResourceLoader();
$applicationAutloader->addResourceType('myfolder', 'MyFolder', 'MyFolder'); 
```

根据您的文件布局，您可能需要稍微调整一下。

# sql - 防止 URL SQL 注入

> ID：14647517
> 
> 赞同：0
> 
> 时间：2013-02-01T13:36:55.377
> 
> 标签：sql, url, code-injection

我想知道防止或取消 SQL 注入或 URL 的最佳方法。

例如，www.mysite.com/profile.php?id=18。这种网站（如果启用了 MySQL_Error）容易受到注入的攻击。我该如何预防？mysql_real_escape_string 将被弃用，所以它很快就会没用。

我尝试了 htmlspecialchars() 但它不适用于 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:42:21.623

您需要采取很多步骤来防止 sql 注入

*   删除 Web 用户的系统数据库权限
*   参数化您的输入
*   使用存储过程
*   清理并验证您的输入
*   保护您的错误信息

看看这篇关于这个主题的文章

[http://www.codeproject.com/Articles/9378/SQL-Injection-Attacks-and-Some-Tips-on-How-to-Prev](http://www.codeproject.com/Articles/9378/SQL-Injection-Attacks-and-Some-Tips-on-How-to-Prev)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:39:27.310

您应该在查询中使用准备好的语句。使用此方法，您将防止 SQL 注入。

编辑：

在这里您可以找到一些指南/文档：

[第一的](http://php.net/manual/en/pdo.prepared-statements.php)

[第二](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-29T00:15:37.227

1.  创建能够向您的电子邮件报告所有 php 错误的东西。您将能够更快地找到错误等，并且如果有任何问题，您将需要它来解决问题。（编码问题通常也是安全问题）代码框 1 是我为[tnhteam.com](http://www.tnhteam.com)编写的用于接收错误电子邮件的代码。例如，将其命名为 email-error-handler.php 并将其包含到您的站点中。
2.  如果您有很多页面，请访问您网站上的所有页面或使用[Xenu 的 Link Sleuth (TM)扫描您的网站。](http://home.snafu.de/tilman/xenulink.html)并修复所有问题，检查您的电子邮件是否有错误消息（第一次错误消息可以转到垃圾邮件/垃圾文件夹并设置错误消息文件夹）
3.  在此之后，您可能想要求[Beyond Security](http://www.beyondsecurity.com/)（1 个域免费）扫描您的网站，他们会找到有关您网站的所有重要信息和问题，并修复他们发现的所有错误。
4.  解决 URL 注入问题：在代码框 2 中查找代码，有关更多信息，请访问我在代码框 2 中找到代码的[站点](http://www.derby-web-design-agency.co.uk/blog-post/what-is-and-how-to-prevent-url-injections-in-php/11/)。

我希望这会帮助你走向正确的方向

### 密码框 1

```
<?php
//===========================================================================\\
//                                                                           \\
// Copyright (c) 2000-2015 Willem Vyent.        All rights reserved.         \\
//---------------------------------------------------------------------------\\
// http://www.tnhteam.com/                http://www.awesomehosting.org/     \\
//---------------------------------------------------------------------------\\
//                                                                           \\
//                                                                           \\
//                                                                           \\
//                                                                           \\
//         Coded by Willem Vyent                                             \\
// This program is distributed in the hope that it will be useful, but       \\
// WITHOUT ANY WARRANTY                                                      \\
//                                                                           \\
//                                                                           \\
//===========================================================================\\
if(!defined('FILE_PROTECT')) { // You should define this in your pages BEFORE you include this file 
   die('This file cannot be accessed directly!<br /><br />Dit bestand kan niet rechtstreeks worden benaderd<br /><br />Click <a href=\'http://' . $_SERVER['HTTP_HOST'] . '>here</a> to visit our homepage'); // Do not change it's a text for users who visit this document. we included a link as well...
}
    // Custom error handler - collecting information
    function awesome_error_handler($number, $message, $file, $line, $vars)

    {
$actual_link = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";
    $email = "<p>An error known as number <strong>$number</strong> has been found on line <strong>$line</strong>, this error has been found in file <strong>$file</strong>. The requested URL with errors is $actual_link<br /><p> $message </p>";

    $email .= "<pre>" . print_r($vars, 1) . "</pre>";

    $headers = 'Content-type: text/html; charset=iso-8859-1' . "";

    // Email the error to the webmaster...
    error_log($email, 1, 'your-name@example.com', $headers); // Yor email here...

    // Make sure that you decide how to respond to errors (on the user's side)
    // Either echo an error message, or kill the entire project. It's up to you...
    // The code below ensures that we only "die" if the error was more than
    // just a NOTICE.
    if ( ($number !== E_NOTICE) && ($number < 1024) ) {
    die('Sorry, this page is broken, but our coders will fix it ASAP.'); // your message to the website user (visitor)
    }
    }
    // Tell this script to use this error handler when errors found..
    set_error_handler('awesome_error_handler');
    ?> 
```

### 代码框 2

```
 <?php
 if(isset($_REQUEST["id"])){

if(!is_int($_REQUEST["id"])){

    //redirect this person back to homepage

 } else {

    $id_raw = trim(htmlentities($_REQUEST["id"]));
    $id_secure = mysql_real_escape_string($id_raw);
    $sql = "SELECT * FROM databasetable WHERE id='".$id_secure."'";

 }
}
?> 
```

# batch-file - 批处理文件一次帮助 adb 的 2 个命令

> ID：14647521
> 
> 赞同：2
> 
> 时间：2013-02-01T13:36:59.637
> 
> 标签：batch-file, command, adb

我正在尝试为我试图推送到 /system/app/ 的 apk 文件夹设置 2 个命令

所以我想要做的是将文件夹中的所有 apk 推送到 /system/app/ 然后为那些被推送的文件设置一个 chmod 644 命令

我所拥有的是推动apks

```
for /f %%a IN ('dir /b SystemAPKs\*.apk') do stuff\adb.exe push SystemAPKs\%%a  /system/app/ 
```

最好的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:56:06.323

在 for 循环中执行多个操作。像这样的东西：

```
for /f %%A IN ('dir /b SystemAPKs\*.apk') do (
    stuff\adb.exe push "%%~fA" /system/app/
    stuff\adb.exe shell chmod 644 "/system/app/%%~nxA"
) 
```

* * *

更新，让我们更改脚本的工作目录。这将允许我们仅使用文件名而不是整个文件路径来调用 adb。

*   根
    *   脚本.bat
    *   系统APK
        *   要推送的apk文件
    *   东西
        *   亚行
    *   市场APK
    *   Nexus 4 驱动程序

目录结构

```
:: Make SystemAPKs the Working Directory
pushd SystemAPKs
for /f %%A IN ('dir /b *.apk') do (
    ..\stuff\adb.exe push "%%~nxA" /system/app/
    ..\stuff\adb.exe shell chmod 644 "/system/app/%%~nxA"
)
popd 
```

# javascript - 基于http或https协议动态加载javascript

> ID：14647524
> 
> 赞同：6
> 
> 时间：2013-02-01T13:37:08.920
> 
> 标签：javascript, html, https, internet-explorer-8

我有一个位于不同服务器中的 javascript 文件，并且我在`http`页面上包含了 javascript 文件，例如

```
<script type="text/javascript" src="http://www.example.com/scriptfile.js"> 
```

或`https`翻页

```
<script type="text/javascript" src="https://www.example.com/scriptfile.js"> 
```

问题是，我的页面从 切换`http`到`https`，例如，如果用户在

`http://www.example.com/home`（站点主页 URL），然后我加载了 javascript `http`，现在当用户导航到另一个页面（如`https://www.example.com/transaction`（站点事务 URL））时，我加载了脚本`https`并且它工作正常。`https://www.example.com/home`如果用户点击（主页 URL 更改为），则从提到的事务 URL 中`https`，我加载的脚本`http`由于不安全的内容而失败。欢迎任何处理此问题的建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T13:40:32.100

该协议是可选的。如果省略它，浏览器将使用文档的协议。所以你可以这样做：

```
<script type="text/javascript" src="//www.mydomain.com/scriptfile.js"> 
```

将使用正确的协议。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T13:42:47.637

为您的脚本使用相对于协议的 URL：

```
<script type="text/javascript" src="//www.mydomain.com/scriptfile.js"> 
```

这将使用与调用页面相同的协议。

# python - Appengine 开发服务器 sendmail 错误 - 想要抑制

> ID：14647528
> 
> 赞同：1
> 
> 时间：2013-02-01T13:37:13.223
> 
> 标签：python, google-app-engine, smtp

我有一个 AppEngine Python/Django 应用程序，它会在注册时发送一封确认电子邮件。我没有在本地设置 SMTP 服务器，也没有任何设置本地服务器的计划。

因为我在本地没有设置 SMTP 服务器，所以当我在开发服务器上注册新用户时，程序会生成以下错误：“SMTPServerDisconnected: please run connect() first”。

根据以下 AppEngine 文档：[https](https://developers.google.com/appengine/docs/python/tools/devserver) ://developers.google.com/appengine/docs/python/tools/devserver引用：“如果邮件未启用 SMTP 或 Sendmail，则尝试从应用程序发送电子邮件即可什么都没有，并且在应用程序中显示成功。”

当邮件在开发服务器上失败时，我该如何 (1) 抑制这些错误消息，或者 (2) 阻止服务器尝试发送电子邮件？文档是否正确？

由于我的应用程序从任务队列发送电子邮件，因此此失败会导致重试，从而生成大量错误消息，这使我很难在日志中查看相关信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:53:34.520

文档是正确的，但它们指的是[App Engine 邮件 API](https://developers.google.com/appengine/docs/python/mail/)。根据您的错误消息，您似乎正在使用 smtplib（可能通过 Django 模块），它试图直接连接到 SMTP 服务器。您可以做的最好的事情可能是[检测何时在开发服务器上运行](https://stackoverflow.com/questions/4782332/how-can-my-code-tell-if-its-running-on-googles-server-or-my-local-development)并捕获您看到的异常。

# node.js - 使用 Node.js 进行 AES192 加密

> ID：14647531
> 
> 赞同：1
> 
> 时间：2013-02-01T13:37:15.963
> 
> 标签：node.js, encryption

我有一个 Node.js API。它必须对“父”API 进行 SOAP 调用，该 API 包括通过 AES-192 (ECB) 使用密钥加密的一项。我正在尝试使用本机加密库，但我得到的值与他们期望的值不匹配。

从规范：

> [字符串] 的加密是使用 AES (NIST FIPS-197) 192 位加密使用十六进制编码完成的。它使用带有 PKCS5Padding 的 ECB 反馈模式。既不使用 IV 也不使用盐腌。

坦率地说，我不得不查找大部分内容，但仍然没有帮助。除了偶尔 md5'ing 一些不需要真正安全的东西或者可能 sha'ing 一些确实安全的东西，我从来没有做过太多的加密，所以我有点卡住了。这是我目前所拥有的：

```
var cipher = require( 'crypto' ).createCipher( 'aes192', datasources.api.auth.encryptionKey )
cipher.update( data.encryptable )
cipher.final( 'hex' ) 
```

我已经尝试了许多输入和输出编码的变体`cipher.update()`，但我无法匹配他们期望的值。

任何更熟悉这些东西的人都可以为我指明正确的方向吗？在这一点上，我已经用尽了自己的知识，并离题了试错。

**更新**

到目前为止，我所拥有的更多信息：

```
var crypto  = require( 'crypto' );
var cipher  = crypto.createCipher( 'aes-192-ecb', datasources.api.auth.encryptionKey );
var crypted = cipher.update( 'DSS9676155', 'binary', 'hex' );
crypted     += cipher.final( 'hex' );

console.log( 'CRYPTED:  ' + crypted );
console.log( 'EXPECTED: 72989ABBE3D58AE582EF0EA669EDE521' ); 
```

有趣的是（？），`crypted`无论我发送给`update()`方法的输入和输出编码值的组合是什么，我都会得到相同的值（164fb25126c444031780c78d098fa877）。这似乎清楚地表明我做错了什么，但我看不到。

**更新**

刚刚从 API 提供者那里收到了这个。他们使用 Python 加密文本，如下所示：

```
import sys
import chilkat

crypt = chilkat.CkCrypt2()

password = "thisIsWhereTheKeyGoes"

crypt.put_CryptAlgorithm("aes")
crypt.put_CipherMode("ECB")
crypt.put_KeyLength(192)
crypt.SetEncodedKey(password,"base64")

crypt.put_EncodingMode("hex")
text = "The string to be encrypted"

encText = crypt.encryptStringENC(text)

print encText 
```

我更新了我的代码如下：

```
var crypto    = require( 'crypto' );
var base64pwd = new Buffer( datasources.api.auth.encryptionKey ).toString( 'base64' );
var cipher    = crypto.createCipher( 'aes-192-ecb', base64pwd );
var crypted   = cipher.update( 'DSS9676155', 'utf8' );
crypted       += cipher.final( 'hex' );

console.log( 'CRYPTED:  ' + crypted );
console.log( 'EXPECTED: 72989ABBE3D58AE582EF0EA669EDE521' ); 
```

我仍然与预期的结果不同。同样，我尝试了几种输入/输出编码变体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:46:19.463

以下代码适用于我：

```
var crypto  = require( 'crypto' );
var cipher  = crypto.createCipheriv('aes-256-cbc', DATA_CRYPT_KEY, DATA_CRYPT_IV);
var crypted = cipher.update(JSON.stringify(result),'utf8','hex');
crypted    += cipher.final('hex');

res.send(crypted); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:52:32.963

不管它值多少钱，我从来没有让 Node.js 回扣提供者所期望的相同价值。我最终使用他们使用的相同过程编写了一个 Python 脚本，并让我的 Node 应用程序调用它。这是一个彻底的黑客，但至少它有效。

只是想对这个问题做一个包装，所以它不会永远打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-27T20:34:45.283

[`crypto.createCipher()`](https://nodejs.org/api/crypto.html#crypto_crypto_createcipher_algorithm_password_options)令人困惑，因为它从提供的密码中*派生*了密钥：

> 的实现使用 OpenSSL 函数`crypto.createCipher()` *派生*密钥`EVP_BytesToKey`，摘要算法设置为*MD5，一次迭代，没有 salt*。缺少盐允许字典攻击，因为相同的密码总是创建相同的密钥。低迭代次数和非加密安全哈希算法允许非常快速地测试密码。

现在已弃用。

你应该尝试一下[`crypto.createCipheriv()`](https://nodejs.org/api/crypto.html#crypto_crypto_createcipheriv_algorithm_key_iv_options)。在 ECB 模式下，只需提供一个空缓冲区作为 IV。

```
var crypto  = require( 'crypto' );
var cipher  = crypto.createCipheriv( 'aes-192-ecb', encryptionKey, Buffer.alloc(0) );
var buf1 = cipher.update( Buffer.from(data) );
var buf2 = cipher.final();
var crypted = Buffer.concat([buf1, buf2]); 
```

# ssis - 如何在不更改部署服务器上的区域设置的情况下导入平面文件？

> ID：14647532
> 
> 赞同：8
> 
> 时间：2013-02-01T13:37:19.743
> 
> 标签：ssis, delimiter, flat-file

我正在尝试读取 SSIS (2005/2008) 中的文本文件。我创建了与文件的连接并放置了平面文件源，它在预览中运行良好，但是当我尝试运行时出现错误消息：

```
[Derived Column [91848]] 
Error: SSIS Error Code DTS_E_INDUCEDTRANSFORMFAILUREONERROR 
```

所以我发现有几列带有十进制数字，它们使用句点作为分隔符。但由于我在斯堪的纳维亚环境中工作，服务器期望逗号作为分隔符。

有效的方法是在 Windows 服务器上的区域设置中手动将分隔符从逗号更改为句点，但这不是一个适当的解决方案。

如何使用 SSIS 导入平面文件，而无需更改部署包的服务器上的区域设置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T17:25:27.303

您应该能够**`LocaleID`**在平面文件连接对象上设置 。这将在读取该文件时应用英语区域设置，而不会影响您计算机上的其他内容。（查看“属性”窗口，而不是“编辑器”对话框。）

右键单击*`Connection Managers`*部分下的平面文件连接，然后选择*`Properties`*. 您还可以选择平面文件连接管理器并按下*`F4`*以查看属性。

![平面文件连接管理器](../Images/525f791b2d12cc1c2e9e8cacfd626e68.png)

`LocaleID`根据您的喜好设置。

![LocaleID 属性](../Images/04d28d6c03300dec08a49ff84fdf7a33.png)

# jquery - CarouFREDsel 过滤器/CSS 问题

> ID：14647537
> 
> 赞同：1
> 
> 时间：2013-02-01T13:37:35.503
> 
> 标签：jquery, css, caroufredsel

我在响应式（html5 样板）布局中使用 carouFREDsel jQuery carousel 插件。因此可见项目的大小确实发生了变化。

我的HTML如下：

```
 <div class="portfolio-right">
  <div class="portfolio-img-container">
     <div class="portfolio-img"><img  src="img/purple-ink-likes-1.jpg" /></div>
     <div class="portfolio-img"><img src="img/purple-ink-likes-1.jpg" /></div>
     <div class="portfolio-img"><img src="img/purple-ink-likes-1.jpg" /></div>
     <div style="clear:both; visibility: hidden;"></div>
  </div>
</div> 
```

我正在使用样式为“clear: both”的最后一个 DIV，以确保 .portfolio-right 缩小到它的内容（它有一个围绕轮播中可见项目的边框）。

CSS：

```
div.portfolio-right
{
  float: right;
  width: 60%;
  border: 8px solid #E6E6E9;
} 
```

要么我需要找到一种方法让容器缩小到它的内容，要么让 carouFREDsel 中的过滤器工作（由于某种原因我不能）。

```
$(".portfolio-img-container").carouFredSel({
circular : true,
auto : false,
responsive  : true,
scroll      : 1,
items       : {
    filter : ".portfolio-img",
    visible     : 1,
    width       : 200,

},
    pagination: ".portfolio-img-pagination"
}); 
```

基本上我的问题是过滤器选项不起作用，无论是类还是 :visible 选择器。因此，样式为“clear:both”的最终 DIV 出现在分页中。

我是否遗漏了什么，是否有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:58:50.560

如果您使用的是 HTML5 样板，有一个方便的内置 float clear 辅助类`.clearfix`。

您只需要将 .clearfix 应用于具有浮动元素的容器。这是来自样板的课程和评论：

```
 /*
     * Clearfix: contain floats
     *
     * For modern browsers
     * 1\. The space content is one way to avoid an Opera bug when the
     *    `contenteditable` attribute is included anywhere else in the document.
     *    Otherwise it causes space to appear at the top and bottom of elements
     *    that receive the `clearfix` class.
     * 2\. The use of `table` rather than `block` is only necessary if using
     *    `:before` to contain the top-margins of child elements.
     */

    .clearfix:before,
    .clearfix:after {
        content: " "; /* 1 */
        display: table; /* 2 */
    }

    .clearfix:after {
        clear: both;
    } 
```

# java - 字节数组或ByteBuffer，哪个更快

> ID：14647541
> 
> 赞同：0
> 
> 时间：2013-02-01T13:37:43.850
> 
> 标签：java, android, reference, stream

我正在寻找在我的应用程序中做的最佳方法，现在我想知道：

我通过读取 InputStream 收到了一个字节数组 (byte[])。然后我要做一些处理，所以我将这个数组作为方法的参数传递。来自 C++ 语言，因为我必须尽可能快地进行这种处理，而且很多时候，我想知道按值传递字节数组是否不会导致问题。

是否值得创建一个 ByteBuffer 对象来传递对我的方法的引用而不是值？

感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:40:06.747

在 Java 中，数组是对象，因此您实际上是将引用变量的副本传递给该对象。

C++ 中的 IIRC 传递数组相当于传递指向第一个元素的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:40:37.840

传递`byte[]`引用就像传递序数对象引用一样。不会复制数组。**不**值得用`ByteBuffer`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:42:07.537

一般来说，使用原始类型会更快，因为它需要更少的内存来存储数据。

因此，我建议保留字节数组解决方案。这当然取决于你打算用它做什么“治疗”:)

# c++ - ios项目中的Eigen使用

> ID：14647551
> 
> 赞同：0
> 
> 时间：2013-02-01T13:38:26.257
> 
> 标签：c++, ios, objective-c, vector, eigen

我正在尝试在我的 ios 项目中使用 Eigen 3，我添加了头文件，但它不允许我编译。它总是给出错误。

无法解决。我一直在寻找解决方案很多天。

我的所有文件都是 .mm

我想，我缺少任何编译器标志、链接或任何东西。

请帮我。

附上 Xcode 的屏幕截图。

如果有人可以帮助我，我将不胜感激。

谢谢![在此处输入图像描述](../Images/78251110a4ab912a4da35b8ca4be2f8e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T09:01:34.057

首先，确保您包含 Eigen/Core（或类似的），而不是直接包含 Eigen/src/ 中的 .h 文件。然后，我想问题是您正在混合 c++ 和目标 c 代码（.mm 文件）。这会使编译器感到困惑，因为 Eigen 需要非常好的 C++ 编译器支持。你不能在 ios 中使用纯 C++ 代码吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:16:40.310

错误陈述非常清楚：您使用了编译器不知道的标识符。可能的原因：

1.  您未能包含正确的头文件。例如，`Dynamic`定义在`Constants.h`
2.  您未能打开正确的命名空间。例如，`Dynamic`为命名空间定义`Eigen`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-09T05:31:25.980

我的代码工作正常，直到我添加了一个 opencv 头，然后这些弹出。

解决方案是将 eigen 和 eigen/unsupported 添加到 System Header Search Paths 和 User Header Search Paths，并将它们保留为非递归。

你肯定也想将你的 .cpp 文件标记为 Objective C++。

# wpf - WPF DataGrid 单元格的条件格式取决于 DataType

> ID：14647556
> 
> 赞同：2
> 
> 时间：2013-02-01T13:38:56.577
> 
> 标签：wpf, wpf-controls, wpfdatagrid

我有一个从 WPF DataGrid 控件继承的用户控件，我将不同的对象列表传递给该控件，因此，网格的列取决于（即自动生成）我发送的对象类。

```
<userc:cfDataGrid x:Name="grdResults" 
    FontStyle="Normal" 
    FontFamily="Microsoft Sans Serif" 
    FontSize="14" 
    RowHeight="30"  

    AutoGenerateColumns="True" 
    Margin="12" 
    AlternatingRowBackground="Gainsboro"  
    AlternationCount="2" 

    ItemsSource="{Binding Results}" 
    IsReadOnly="True" 
    HeaderNames="{Binding Headers}" >
</userc:cfDataGrid> 
```

现在，我还想传递一个具有 SolidColorBrush 数据类型属性的对象列表，并且能够使用该值来设置单元格的背景颜色，而不是显示实际值。

我没有在样式等方面做太多工作，所以我想问是否有人可以给我一些关于如何捕获具有 SolidColorBrush 数据类型的列的指针 - 并执行上述操作 - 而不依赖于列的名称？

任何指针将不胜感激！

抄送

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T14:23:00.027

我会使用`DataTrigger`使用[Converter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)来检查对象是否为 a `SolidColorBrush`，如果是则设置背景颜色

像这样的东西：

```
<DataGrid.Resources>
    <Style TargetType="{x:Type DataGridCell}">
        <Style.Triggers>
            <!-- DataContext will be object for entire data row -->
            <DataTrigger Binding="{Binding MyBrushColorProperty, Converter={StaticResource IsSolidBrushColor}}" Value="True">
                <Setter Property="Background" Value="{Binding MyBrushColorProperty}" />
                <Setter Property="Content" Value="" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</DataGrid.Resources> 
```

# java - 如何从机场代码中获取纬度和经度？

> ID：14647557
> 
> 赞同：3
> 
> 时间：2013-02-01T13:38:56.687
> 
> 标签：java, javascript, google-maps-api-3

如何从机场代码中获取纬度和经度？我想绘制最近的机场，我只有 IATA 代码，但不想使用数据库或预先存储的 lat long。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:46:03.587

WebServiceX 具有根据其代码查找机场信息的方法。

[http://www.webservicex.net/ws/WSDetails.aspx?WSID=20&CATID=7](http://www.webservicex.net/ws/WSDetails.aspx?WSID=20&CATID=7)

# php - 正则表达式查找不在引号中的内容

> ID：14647560
> 
> 赞同：6
> 
> 时间：2013-02-01T13:39:04.627
> 
> 标签：php, regex

我正在尝试在引号之外查找参数（单或双）

```
$sql = "
INSERT INTO Notifify (to_email, msg, date_log, from_email, ip_from)
VALUES
    (
        :to_email,
        'test teste nonono',
        '2013-02-01 10:48:27',
        'bar@foo',
        :ip_from
    )
 ";

  $matches = array();
  preg_match_all('/:[A-Za-z0-9_]*/', $sql, $matches); 
```

上面的代码将产生以下结果，

`print_r($matches); // array(:to_email, :48, :27, :ip_from)`

我只想：

```
:to_email
:ip_from 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:44:35.267

```
'/^\\s*:[A-Za-z0-9_]*/m' 
```

应该做的伎俩，检查行首和空白，并确保 RegEx 查询设置为多行。

**编辑**

```
preg_match_all('/(?:^\\s*)(:[A-Za-z0-9_]+)/m', $sql, $matches);
print_r($matches[1]); 
```

这使用了被动非捕获组（？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:54:50.350

您可以使用负面的后视。这样，您将完全匹配所需的内容。

```
preg_match_all('/(?<!\w):[a-z0-9_]+/', $sql, $matches); 
```

[**演示**](http://codepad.viper-7.com/iV5tLP)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T13:55:18.910

那这个呢：

```
/\s+:[A-Za-z0-9_]*/ 
```

它不是很严格，对于网球分数 ( `15 : 30`) 等更复杂的示例可能会失败，但可能足以满足您的需求。

# javascript - KnockoutJS Virtual Tag Foreach IE8 追加额外的行

> ID：14647561
> 
> 赞同：0
> 
> 时间：2013-02-01T13:39:14.597
> 
> 标签：javascript, knockout.js

我目前正在使用 KnockoutJS 2.1.0 以以下形式显示一些带有虚拟标签的数据：

```
<!-- ko foreach:filteredCertificates-->
<div>
  <span data-bind="html:titel">TITEL</span>
  <span data-bind="html:name">NAME</span>
  <span data-bind="html:vorname">VORNAME</span>
</div>
<!-- /ko --> 
```

`filteredCertificates`看起来像这样：

```
self.filteredCertificates = ko.computed(function() {
    return ko.utils.arrayFilter(self.certifiedEntries(), function(certificate) {
      return certificate.isDeutsch;
    });
} 
```

该函数在任何浏览器中都没有任何错误。

如您所见，`filteredCertificates`是一个`ko.computed()`返回数组的函数。在所有主流浏览器中，它都能完美运行，但在 IE8（惊喜）中，它附加了一个额外的行，没有绑定数据，只有原始内容。例如，最后一个 raw 实际上具有“TITLE”、“NAME”和“VORNAME”作为值。我可以将它们留空，但即使其内容为空，它仍会追加一行。

我真的很喜欢使用虚拟标签，有没有办法解决这个问题而不必使用包装 foreach 的 dom 元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:07:34.553

经过一段时间的调试，我意识到当 IE 决定停止加载您的应用程序时出现了这种现象，因为它要么耗尽了耐心，要么将 javascript 插入在一起的小猴子认为它的工作量太大。

解决方案是优化您的应用程序以使 DOM 绘制不会永远持续下去，或者向 Paul Irish 祈祷您的客户端不使用 IE8，不管有什么诀窍。

# c++ - 链接错误 - 新模板

> ID：14647562
> 
> 赞同：-1
> 
> 时间：2013-02-01T13:39:14.900
> 
> 标签：c++, templates, linker-errors

这是代码：

```
#ifndef LINKED_LIST_H_
#define LINKED_LIST_H_

#include<memory>

template <class T>
class LinkedList{
public:
//
LinkedList() {}
LinkedList(const T &data);
LinkedList(const T &data, LinkedList &node);
LinkedList(const LinkedList &object);
LinkedList &operator=(const LinkedList &object);

~LinkedList() {}

std::shared_ptr<LinkedList> push_back(const T& data);

private:
T data;
std::unique_ptr<LinkedList> link;

std::unique_ptr<LinkedList> LinkFactory(const LinkedList &node);

std::shared_ptr<LinkedList> CreateStartNode(const T &data);
std::shared_ptr<LinkedList> CreateNode(const T &data, const LinkedList &node);
};
//
template <typename T>
LinkedList<T>::LinkedList(const T &data) : data(data), link(nullptr) {}
template <typename T>
LinkedList<T>::LinkedList(const T &data, LinkedList &node) : data(data) { this->link =           
LinkFactory(node); }
template <typename T>
LinkedList<T>::LinkedList(const LinkedList<T> &object) : data(object.data)       
link(object.link) {}
template <typename T>
LinkedList<T>& LinkedList<T>::operator=(const LinkedList<T> &object){
data = object.data;
link = object.link;
return *this;
}

template <typename T>
std::unique_ptr<LinkedList<T>> LinkFactory(const LinkedList<T> &node){
return std::unique_ptr<LinkedList<T>>(new LinkedList(node))
}
//
template <typename T>
std::shared_ptr<LinkedList<T>> LinkedList<T>::CreateStartNode(const T &data){
return std::shared_ptr<LinkedList<T>>(new LinkedList(data));
}
//
template <typename T>
std::shared_ptr<LinkedList<T>> CreateNode(const T &data, const LinkedList<T> &node){
return std::shared_ptr<LinkedList<T>>(new LinkedList(data, node));
}

template <typename T>
std::shared_ptr<LinkedList<T>> LinkedList<T>::push_back(const T &data){
//
if(this == 0){
    // create new node
    return CreateStartNode(data);
}else{
    // add a node
    return CreateNode(data, *this);
}
}

#endif 
```

这是链接错误：

```
 error LNK2001: unresolved external symbol "private: class std::tr1::shared_ptr<class   
 LinkedList<class std::basic_string<char,struct std::char_traits<char>,class  
 std::allocator<char> > > > __thiscall LinkedList<class std::basic_string<char,struct 
 std::char_traits<char>,class std::allocator<char> > >::CreateNode(class 
 std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > 
 const &,class LinkedList<class std::basic_string<char,struct 
 std::char_traits<char>,class std::allocator<char> > > const &)" (?CreateNode@?
 $LinkedList@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@@AAE?AV?
 $shared_ptr@V?$LinkedList@V?$basic_string@DU?$char_traits@D@std@@V?
 $allocator@D@2@@std@@@@@tr1@std@@ABV?$basic_string@DU?$char_traits@D@std@@V?
 $allocator@D@2@@4@ABV1@@Z)
 fatal error LNK1120: 1 unresolved externals
 1>
 1>Build FAILED. 
```

我对模板的使用相当陌生，并没有正式学习它，而是通过网络 hack-n-slash 而不是阅读一章。这段代码我哪里出了问题，必须进行哪些更正才能生成最专业的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:41:50.023

您对 CreateNode 函数的定义不在 LinkedList 范围内。

你的

```
template <typename T>
std::shared_ptr<LinkedList<T>> 
CreateNode(const T &data, const LinkedList<T> &node)
{
return std::shared_ptr<LinkedList<T>>(new LinkedList(data, node));
} 
```

应该

```
template <typename T>
std::shared_ptr<LinkedList<T>> 
LinkedList<T>::CreateNode(const T &data, const LinkedList<T> &node)
{
return std::shared_ptr<LinkedList<T>>(new LinkedList(data, node));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:46:19.120

当您在类定义之外定义成员函数时，您需要用 来限定成员名称`LinkedList<T>::`以表明它是成员；否则，它改为声明一个新的非成员函数。

您忘记了`CreateNode`和定义的限定条件`LinkFactory`：

```
template <typename T>
std::unique_ptr<LinkedList<T>> LinkedList<T>::LinkFactory(const LinkedList<T> &node){
//                    Add this ^^^^^^^^^^^^^^^
    return std::unique_ptr<LinkedList<T>>(new LinkedList(node));
} 
```

# indy10 - 使用 tidmessage.savetofile 和 loadfromfile 后删除的 Html 和附件

> ID：14647567
> 
> 赞同：0
> 
> 时间：2013-02-01T13:39:25.453
> 
> 标签：indy10

我使用 Mac 程序为我们的俱乐部会员创建外观精美的电子邮件。我将电子邮件发送到谷歌帐户，使用 POP3 将其读入 Delphi Windows 程序并保存以供以后使用 tidmessage.savetofile 发送。后来我使用 loadfromfile，清除标题并创建新的标题信息以作为批量电子邮件发送给成员。使用 Indy 9，我不必考虑使用 nodecode 和/或 noencode 选项。默认值刚刚起作用。当我们的 ISP 强制使用更安全的 SMTP 连接时，我借此机会升级到 Indy 10。然后我发现最初的 savetofile 工作正常，但随后的 loadfromfile 删除了 html 内容和附件。例如，如果我在 loadfromfile 之后立即发出 savetofile，则 180k 的电子邮件将被截断为小于 4k。

我切换到使用 nodecode/noencode = true，但如果我清除标题，我会丢失所有电子邮件正文，plain/html/attachments。如果我留下标题并只更新我需要的位，雅虎等网络邮件会显示空白电子邮件，而 Outlook 和 OE 等程序会正确显示电子邮件。

是否有调试选项可以确定 Indy 不喜欢电子邮件的哪些方面，以便让 Indy 正确解析电子邮件？

我看到有人在使用 IMAP 时遇到了类似的问题，但我不是，我认为修复或规避可能会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:00:54.037

好吧，再深入一点，Mac 程序似乎在 html 部分之前的 content-type 语句中添加了一个虚假的边界子句，因此它有 2 个边界子句，其中一个在电子邮件中没有其他引用。删除允许 Indy 正确解析电子邮件。并非每次都发生，但我已将其报告给 Equinux。

# r - 通过模拟数据替换 NA

> ID：14647572
> 
> 赞同：10
> 
> 时间：2013-02-01T13:39:34.190
> 
> 标签：r, na

在包含数字块和 NA 块的向量中，例如：

```
score <- c(0,1,2,3,4,NA,NA,0,-1,0,1,2,NA,NA,NA) 
```

有没有办法通过从 NA 块之前的最新值开始向上计数来模拟缺失值？

所以它最终会是：

```
score.correct <- c(0,1,2,3,4,5,6,0,-1,0,1,2,3,4,5) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:51:30.197

改编自[Christos Hatzis 上 r-help](https://stat.ethz.ch/pipermail/r-help/2008-July/169199.html)：

```
rna <- function(z) { 
  y <- c(NA, head(z, -1))
  z <- ifelse(is.na(z), y+1, z)
  if (any(is.na(z))) Recall(z) else z }

rna(score)
#[1]  0  1  2  3  4  5  6  0 -1  0  1  2  3  4  5 
```

龙：

```
rna(c(NA,score))
Error: evaluation nested too deeply: infinite recursion / options(expressions=)?

rna(c(1,rep(NA,1e4)))
Error: evaluation nested too deeply: infinite recursion / options(expressions=)? 
```

基准：

```
score2 <- 1:1e5
set.seed(42)
score2[sample(score2,10000)] <- NA
library(microbenchmark)
microbenchmark(rna(score2),incna(score2))

Unit: milliseconds
           expr      min        lq    median        uq       max
1 incna(score2)  2.93309  2.973896  2.990988  3.134501  5.360186
2   rna(score2) 50.42240 50.848931 51.228040 52.778043 56.856773 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T13:52:32.177

Q+D，有一个循环，做了一些不必要的加法，但完成了工作：

```
incna <- function(s){
  while(any(is.na(s))){
    ina = which(is.na(s))
    s[ina]=s[ina-1]+1
  }
  s
}

> score
 [1]  0  1  2  3  4 NA NA  0 -1  0  1  2 NA NA NA
> incna(score)
 [1]  0  1  2  3  4  5  6  0 -1  0  1  2  3  4  5 
```

如果第一项为 NA ，则**仅显示警告**失败：

```
> score
 [1] NA  1  2  3  4 NA NA  0 -1  0  1  2 NA NA NA
> incna(score)
 [1]  5  1  2  3  4  5  3  0 -1  0  1  2  3  4  5
Warning message:
In s[ina] = s[ina - 1] + 1 :
  number of items to replace is not a multiple of replacement length 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T18:26:57.197

这是另一种方法：

```
library(zoo)
ifelse(is.na(score), na.locf(score) + sequence(rle(is.na(score))$l), score)
#  [1]  0  1  2  3  4  5  6  0 -1  0  1  2  3  4  5 
```

`[]`显示带有指示`NA`槽的中间结果：

```
na.locf(score)
#  [1]  0  1  2  3  4  [4]  [4]  0 -1  0  1  2  [2]  [2]  [2]
sequence(rle(is.na(score))$l)
#  [1]  1  2  3  4  5  [1]  [2]  1  2  3  4  5  [1]  [2]  [3]
na.locf(score) + sequence(rle(is.na(score))$l)
#  [1]  1  3  5  7  9  [5]  [6]  1  1  3  5  7  [3]  [4]  [5]
ifelse(is.na(score), na.locf(score) + sequence(rle(is.na(score))$l), score)
#  [1]  0  1  2  3  4  [5]  [6]  0 -1  0  1  2  [3]  [4]  [5] 
```

# graphics - 无法在纹理 DirectX 上方画线

> ID：14647581
> 
> 赞同：1
> 
> 时间：2013-02-01T13:40:08.683
> 
> 标签：graphics, directx, rendering, directx-9

我正在使用 directX 绘制大量纹理，现在出于调试目的，我想在纹理周围绘制线条（也就是说绘制一个矩形）。但问题是无论我尝试什么，无论绘制顺序如何，纹理总是出现在线条的顶部，并且似乎线条只在背景上绘制，这是我用于绘制的代码：

设备：

```
LPDIRECT3DDEVICE9       graphicsDevice; // this is used for drawing lines
LPD3DXSPRITE            spriteHandler; // this is used for drawing texture
LPD3DXFONT              textRect; // this is used for drawing texts 
```

渲染代码：

```
graphicsDevice->Clear(0, NULL, D3DCLEAR_TARGET, BACKGROUND_COLOR, 1.0f, 0);
graphicsDevice->BeginScene();
spriteHandler->Begin(D3DXSPRITE_ALPHABLEND);
renderSprites();
renderText();
renderLines();
spriteHandler->End();
graphicsDevice->EndScene();
graphicsDevice->Present(NULL, NULL, NULL, NULL);

void DirectXGraphics::renderSprites()
{
    spriteHandler->Draw( texture, 
                     rect,
                     NULL,
                     &position,
                     DEFAULT_ALPHA_COLOR);
}

void DirectXGraphics::renderLines()
{
    graphicsDevice->SetFVF(D3DFVF_XYZRHW|D3DFVF_DIFFUSE);
    graphicsDevice->DrawPrimitiveUP(D3DPT_LINESTRIP, 
                        g_width,                    
                        LINES,              
                        sizeof(VERTEX_LIST));      
}

void DirectXGraphics::renderText()
{
      textFont->DrawText (  spriteHandler, 
                    lpcwstrText, 
                    -1, 
                    &textRect, 
                    DT_LEFT, 
                    fontColor );   
} 
```

有趣的是，textfont 不受这个问题的影响，受制于绘制顺序（可能是因为我已经`spriteManager`作为参数传递了）。

我的猜测是，我用来绘制的不同设备可能存在优先级，并且 spriteHandler 总是在顶部渲染，并且只有在纹理大小不足以覆盖该行部分时才能看到行（这会留下连同灰色背景一起去掉线条）。解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:05:18.680

您可以启用深度缓冲区

尝试调用：

```
graphicsDevice->SetRenderState(D3DRS_ZENABLE,D3DZB_FALSE);
graphicsDevice->SetRenderState(D3DRS_ZWRITEENABLE,FALSE);
graphicsDevice->SetRenderState(D3DRS_ZFUNC,D3DCMP_ALWAYS); 
```

在 renderLines 中（在绘制调用之前），通常应该修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-06T02:55:40.347

我遇到了同样的问题，令人沮丧，因为这没有太多信息。确保`spriteHandler->End();`在对设备进行任何绘制调用之前进行。

在您的示例中，而不是 `spriteHandler->Begin(D3DXSPRITE_ALPHABLEND); renderSprites(); renderText(); renderLines(); spriteHandler->End();`

切换到： `spriteHandler->Begin(D3DXSPRITE_ALPHABLEND); renderSprites(); renderText(); spriteHandler->End(); renderLines();`

# javascript - 想要删除行 onclick

> ID：14647583
> 
> 赞同：2
> 
> 时间：2013-02-01T13:40:20.023
> 
> 标签：javascript

嗨，我是 Javascript 新手（实际上我在 php mysql 上工作）。我想删除一些动态生成的行。我想将元素 id 传递给函数，然后从那里删除。但是 id 是动态创建的。下面的代码具有要显示的行数的变量，并且每行前面的按钮，应删除该行中的两个输入元素的按钮。

```
 <script>
        function removeMore()
        {
            var elem = document.getElementById();
            elem.parentNode.removeChild(elem);
            return false;
        }
    </script>
</head>

<body>
    <?php
        $row=5;
        for($i=1; $i< $row; $i++)
        {
            $img_id= "img_".$i;
            $cap_id= "cap_".$i;
            $row_id= $i*100;
            ?>
                <table>
                    <tr id="<?php echo $row_id;?>">
                        <td>
                            <input type="file" name="img[]" id="<?php echo $img_id;?>" />
                        </td>
                        <td>
                            <input type="text" name="cap[]" id="<?php echo $cap_id;?>" />
                        </td>
                        <td>
                            <input type="button" name="rem_but" id="<?php echo $i; ?>" value="<?php echo $i; ?>" onclick="removeMore(document.getElementsByName('rem_but')[0].value)" /> 
                            <!-- or may be something like this.value to get value of id. -->
                        </td>
                    </tr>
                </table>
            <?php   
        }
    ?> 
```

我只是想删除单击其按钮的行

HTML 看起来像这样

```
 <html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script>
function removeMore(eid){
document.write(eid);
var xd= eid*100;
 var elem = document.getElementById(xd);
 elem.parentNode.removeChild(elem);
 return false;
 }
 </script>
</head>

<body>
<table>
<tr id="100"><td><input type="file" name="img[]" id="img_1" /></td><td><input  type="text" name="cap[]" id="cap_1" /></td><td><input type="button" name="rem_but" id="1"  value="1" onclick="removeMore(document.getElementsById(this.value)" />
</td></tr>
 </table>
 <table>
 <tr id="200"><td><input type="file" name="img[]" id="img_2" /></td><td><input type="text" name="cap[]" id="cap_2" /></td><td><input type="button" name="rem_but" id="2" value="2" onclick="removeMore(document.getElementsById(this.value)" />
 </td></tr>
 </table>
 <table>
 <tr id="300"><td><input type="file" name="img[]" id="img_3" /></td><td><input type="text" name="cap[]" id="cap_3" /></td><td><input type="button" name="rem_but" id="3" value="3" onclick="removeMore(document.getElementsById(this.value)" />
 </td></tr>
 </table>
 <table>
 <tr id="400"><td><input type="file" name="img[]" id="img_4" /></td><td><input type="text" name="cap[]" id="cap_4" /></td><td><input type="button" name="rem_but" id="4" value="4" onclick="removeMore(document.getElementsById(this.value)" />
 </td></tr>
 </table>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:49:21.897

```
<html>
<head>    
<script>
    // pass the ID into the method.
    function removeMore(id)
    {
        var elem = document.getElementById(id); // getElementById requires the ID
        elem.parentNode.removeChild(elem);
        return false;
    }
</script>
</head>
<body>
    <?php
        $row=5;
        for($i=1; $i< $row; $i++)
        {
            $img_id= "img_".$i;
            $cap_id= "cap_".$i;
            $row_id= $i*100;
            ?>
                <table>
                    <tr id="<?php echo $row_id;?>">
                        <td>
                            <input type="file" name="img[]" id="<?php echo $img_id;?>" />
                        </td>
                        <td>
                            <input type="text" name="cap[]" id="<?php echo $cap_id;?>" />
                        </td>
                        <td>
                            <input type="button" name="rem_but" id="<?php echo $i; ?>" value="<?php echo $i; ?>" onclick="removeMore(<?php echo $row_id;?>)" /> 
                            <!-- You're using PHP - just print the ID in the right place. -->
                        </td>
                    </tr>
                </table>
            <?php   
        }
    ?>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:51:13.267

您不需要传递任何 ID：

试试这个：

```
function removeMore(element) {
    var tr = element.parentNode.parentNode; // Get the input's parent <tr>
    tr.parentNode.removeChild(tr);          // Remove the <tr> from it's parent.
} 
```

对于您的按钮：

```
<input type="button" name="rem_but" id="some_ID" value="Remove this Row" onclick="removeMore(this)" /> 
```

在`removeMore`中，`element`是按钮本身。`element.parentNode`, is `<td>`this button is in, `element.parentNode.parentNode`is the `<tr>`it's in。

优点是您不必将`id`属性添加到按钮，如果您没有在其他地方使用它们。

但是，如果您更改表的结构，此代码将中断。就像现在一样，这适用于：

```
<table>
    <tr>
        <td>
            <input type="button" onclick="removeMore(this)" />
        </td>
    </tr>
    <tr>
        <td>
            <input type="button" onclick="removeMore(this)" />
        </td>
    </tr>
</table> 
```

例如，如果您在`<div>`周围添加一个，您将在和`<input>`之间添加另一层 Dom 元素，这意味着一个额外的。`<tr>``<input>``.parentNode`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:55:58.213

```
<script>
function removeMore(element_id)
{
    var elem = document.getElementById(element_id);
    elem.parentNode.removeChild(elem);
    return false;
}
</script>
</head>

<body>
<?php
$row=5;
for($i=1; $i< $row; $i++)
{
    $img_id= "img_".$i;
    $cap_id= "cap_".$i;
    $row_id= "row_".$i*100;
    ?>
    <table>
    <tr id="<?php echo $row_id;?>">
        <td><input type="file" name="img[]" id="<?php echo $img_id;?>" /></td>
        <td><input type="text" name="cap[]" id="<?php echo $cap_id;?>" /></td>
        <td><input type="button" name="rem_but" id="<?php echo $i; ?>" value="<?php echo $i; ?>"   onclick="removeMore('<?php echo $row_id; ?>')" />
         </td>
    </tr>
    </table>
    <?php 
}   
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:57:06.367

您可以使用 jQuery 简单地做到这一点：

```
removeMore = function(id) {
    element_id = '#' + id + '00';
    $(element_id).remove();
} 
```

或者不传递 id：

```
removeMore = function(element) {
    $(element).parent().remove();
}

<input type="button" onclick="removeMore(this)" value=""> 
```

# jquery - 骨干js - 具有不同属性的相同模型

> ID：14647589
> 
> 赞同：1
> 
> 时间：2013-02-01T13:40:43.853
> 
> 标签：jquery, backbone.js

我是 Backbonejs 的新手，试图在这里理解模型。我定义了一个这样的模型

```
 var Employee=Backbone.Model.extend({

    initialize: function(){

    }
}); 
```

并设置这样的属性。对于模型的一个实例，又添加了一个属性，但我没有任何错误消息。我只是想知道这里的模型定义！模型的不同实例可能是不同的属性吗？

```
var emp1=new Employee();
var emp2=new Employee();
var emp3=new Employee();
var emp4=new Employee();

emp1.set({eName:"Suresh",eType:"employee",eNationality:"Indian"});
emp2.set({eName:"Håkan",eType:"contractor"});
emp3.set({eName:"Pelle",eType:"employee"});
emp4.set({eName:"Per",eType:"employee"});

    var empList=new Employees([emp1, emp2, emp3, emp4]);
console.log(empList.models); 
```

任何帮助表示赞赏！

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:11:36.823

根据您的用户名，我假设您在 .NET 中定义模型的方式会导致混淆。假设您在服务器上有这样的模型定义：

```
public class Employee
{
    [DisplayName("Employee ID")]
    [Required(ErrorMessage = "ID Required")]
    public int eId { get; set; }
    [DisplayName("Employee Name")]
    [Required]
    public string EName { get; set; }
    [DisplayName("Type")]
    [Required]
    public string eType { get; set; }
    [DisplayName("Nationality")]
    [Required]
    public string eNationality { get; set; }
} 
```

并且您想将其映射到您的主干模型，您不需要重新定义您的字段。你可以这样做：

```
var Employee = Backbone.Model.extend({
    idAttribute: 'eId'
}); 
```

然后当你想创建一个新员工时，你创建一个新**实例**，就像你通过向其中添加数据来创建它一样：

```
var emp1 = new Employee({
    eId: "1",
    eName:"Suresh", 
    eType:"employee", 
    eNationality:"Indian"
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:04:59.440

简短的回答：您可以在 Backbone.js 模型实例上设置您想要的任何属性，没有强制集合中的实例共享相同属性的机制。

实际上，用于显示这些实例的视图/模板可能会期望某些属性存在。如果某些属性是可选的，例如在您的示例中，则在编写视图/模板时必须考虑到这一点，但如果属性集没有太多分歧，这应该不是一个大问题。

# c - libtar c解压文件

> ID：14647591
> 
> 赞同：1
> 
> 时间：2013-02-01T13:40:49.440
> 
> 标签：c, linux, tar

Linux

完全是菜鸟问题，但我自己无法理解。我正在使用来自[http://www.feep.net/libtar/的 libtar](http://www.feep.net/libtar/)

我已经对几个文件进行了 zlib 处理，并通过 libtar 对其进行了 tar 处理。

```
TAR *pTar;
snprintf(tar_name,sizeof(tar_name),"%s.tar",BACKUP_TASK.path_to_backup);
tar_open(&pTar, tar_name, NULL, O_WRONLY | O_CREAT, 0777, TAR_GNU);
tar_append_tree(pTar, BACKUP_TASK.path_to_backup, BACKUP_TASK.task_name);
//Append vm list to archive
tar_append_file(pTar, "task.xml", "backup.xml");
//Close it
tar_close(pTar); 
```

然后我需要寻找tar，提取一些文件

以下是 TAR 的真实内容：

```
 #tar tf /home/backup/ftp_templates.tar 

 ftp_templates/
 ftp_templates/d982d6cc-810a-7582-ddec-2c6b6a9d5530.xva.zlib
 ftp_templates/51979771-7362-2061-9043-3606682fa0f3.xva.zlib
 ftp_templates/f9e5a919-4aa9-a02d-b1ec-3667ecaa4a5b.xva.zlib
 backup.xml 
```

我正在尝试列出里面的文件：

```
TAR *pTar;
char *tarFilename = "/home/backup/ftp_templates.tar";
tar_open(&pTar, tarFilename, NULL, O_RDONLY | TAR_NOOVERWRITE, 0777, TAR_GNU|TAR_VERBOSE);
while(th_read(pTar)==0)
{
    puts(pTar->th_buf.name);
}
tar_close(pTar); 
```

但它只给

```
ftp_templates/
ftp_templates/d982d6cc-810a-7582-ddec-2c6b6a9d5530.xva.zlib 
```

如果我尝试提取任何文件

```
tar_extract_file(pTar,"backup.xml"); 
```

它创建空文件，大小为 0

提取所有文件效果很好。我只是没有找到任何提取单个文件的例子......

tar -xvf /home/backup/ftp_templates.tar 备份.xml

这也做得很好，所以 tar 本身还可以..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:30:55.250

我就是这样做的。工作正常，但对我来说不是太明显

```
TAR *pTar;  
int i=0;
tar_open(&pTar, xva_filename, 0, O_RDONLY, 0, 0);
while ((i = th_read(pTar)) == 0)
{
    //th_print_long_ls(pTar);
    //th_print(pTar);
    if(strcmp(pTar->th_buf.name,"ova.xml")==0)
    {
        puts(pTar->th_buf.name);
        tar_extract_regfile(pTar,pTar->th_buf.name);
    }

    if (TH_ISREG(pTar) && tar_skip_regfile(pTar) != 0)
    {
        fprintf(stderr, "tar_skip_regfile(): %s\n",
            strerror(errno));
        return;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-04T20:08:21.143

如果要查找多个文件，请先建立 tar 的索引：

```
#include <iostream>
#include <string>
#include <vector>
#include <libtar.h>
#include <fcntl.h>
#include <unistd.h>
using namespace std;

int extract_from_tar(TAR *pTar, const vector<tar_header> &fileList, 
    const vector<long int> &fileInPos, size_t index)
{
    const tar_header &th = fileList[index];
    pTar->th_buf = th;
    lseek (tar_fd(pTar), fileInPos[index], SEEK_SET);

    return tar_extract_regfile(pTar, pTar->th_buf.name);
}

int main()
{
    time_t seed = time( NULL );
    srand( seed );

    vector<tar_header> fileList;
    vector<long int> fileInPos;
    TAR *pTar = nullptr;
    tar_open(&pTar, "test.tar", NULL, O_RDONLY, 0, 0);

    //Build index for quick access
    int i=0;    
    while ((i = th_read(pTar)) == 0)
    {
        if(TH_ISREG(pTar))
        {
            fileList.push_back(pTar->th_buf);
            long fd = tar_fd(pTar);
            long int pos = lseek(fd, 0, SEEK_CUR);

            fileInPos.push_back(pos);
            if (tar_skip_regfile(pTar) != 0) return -1;
        }
    }

    //Extract a random file from archive
    if(fileList.size()>0)
        cout << "extract_from_tar " << extract_from_tar(pTar, fileList, fileInPos, rand()%fileList.size()) << endl;

    tar_close(pTar);
} 
```

# java - 带美元符号的字符串模板

> ID：14647594
> 
> 赞同：3
> 
> 时间：2013-02-01T13:41:00.197
> 
> 标签：java, stringtemplate

处理字符串模板中的美元符号的最佳方法是什么。

例如我需要以下模板：

```
You can purchase item $name$ for $5 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:43:22.800

你试过逃避$吗？

```
You can purchase item $name$ for \$5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:44:21.337

例如，您应该使用转义`\$`

# javascript - 在 Javascript 中从 GAE 中的数据存储区访问图像

> ID：14647595
> 
> 赞同：0
> 
> 时间：2013-02-01T13:41:01.610
> 
> 标签：javascript, image, google-app-engine

我是 GAE (Python) 的新手，我真的需要一些帮助来了解如何从数据存储中提供图像并在客户端 Javascript 中访问它们。

我一直在关注 Google 的教程：[使用 Google App Engine (Python) 提供动态图像](https://developers.google.com/appengine/articles/python/serving_dynamic_images)

假设我有数据对象来存储一些图像

```
class Default_tile(db.Model)
  name = db.StringProperty()
  image = db.BlobProperty(default=None) 
```

将图像添加到上述数据库的正确代码是这样的吗？：

```
default_tile = Default_tile()
default_tile.name = "grass"
default_tile.image = db.Blob(urlfetch.Fetch("http://www.bbc.com/grass.png").content)
default_tile.put() 
```

不可以说我在客户端javascript上有以下代码：

```
 var image = new Image();

  image.onload = function() {
    context.drawImage(image, 69, 50);
  };
  imageObj.src = ***how to I get the image, named grass, from the Datastore*** 
```

所以我的问题是我将如何获得图像？

理想情况下，我只想使用 imageObj.src = /images/grass

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:49:57.043

## 数据存储

您正确地遵循了示例，但是您错过了从同一 URL[**检索和显示图像的部分。**](https://developers.google.com/appengine/articles/python/serving_dynamic_images)

基本上，您需要一个处理程序来定位此图像，然后提供它。在您的情况下，假设`title`示例中的 是`name`您的情况。所以你最终会得到一个用于检索图像的 URL，如下所示：

```
http://localhost:8080/image?name=grass 
```

这将提供图像，因此如果您想在客户端中使用，您可以简单地将其用作

```
imageObj.src = '/image?name=grass' 
```

## Blobstore API

如果您计划存储许多图像并从用户那里获取它们，那么您应该考虑改用[Blobstore API](https://developers.google.com/appengine/docs/python/blobstore/overview)。这对初学者来说有点复杂，但以后会有所收获，因为您可以将图像（或其他任何东西）存储在更便宜的谷歌云存储上。

从该[示例](https://developers.google.com/appengine/docs/python/blobstore/overview)中，您将能够存储和提供 blob，但您也可以`blob_info.key()`使用`BlobKeyProperty`, 而不是`BlobProperty`.

有了它而不是纯数据存储，您将能够利用[get_serving_url()](https://developers.google.com/appengine/docs/python/images/functions)函数：

> 返回提供图像的 URL。
> 
> 这种 URL 格式允许动态调整大小和裁剪，因此您不需要在服务器上存储不同的图像大小。图像通过高度优化的无 cookie 基础架构以低延迟提供。

# c# - 为解压缩文件引用 shell32 对 w7 有效，但对 xp 无效

> ID：14647599
> 
> 赞同：1
> 
> 时间：2013-02-01T13:41:10.563
> 
> 标签：c#, .net, winapi

嗨，我用它来将文件解压缩到目录

```
private string UnzipFile(string inputFileName, string destinationPath)
{
    Shell shell = new ShellClass();
    Folder folder = shell.NameSpace(inputFileName);
    Folder folder2 = shell.NameSpace(destinationPath);
    string name = folder.Items().Item(0).Name;
    folder2.CopyHere(folder.Items(), "");
    return name;
} 
```

当我编译项目时，它也给了我 interop.shell32.dll

我通过 ilmerge 将 interop.shell32.dll 与我的可执行文件合并

（我编译@ win 7 vs 12）

但是 unzipfile 函数会导致程序崩溃@Windows xp sp2

知道为什么会这样吗？

# python - 将文件上传到谷歌驱动器时重定向uri错误

> ID：14647601
> 
> 赞同：0
> 
> 时间：2013-02-01T13:41:21.227
> 
> 标签：python, google-api, google-drive-api, tornado, google-oauth

我正在尝试通过我的网络应用程序将文件上传到我的谷歌驱动器。我正在为我的 Web 应用程序创建客户端 ID，如下所示：

```
Client ID:  916885716524-1qvrrridktedn50pasooe1ndepe1oefp.apps.googleusercontent.com
Email address: 916885716524-1qvrrridktedn50pasooe1ndepe1oefp@developer.gserviceaccount.com
Client secret:  6an3xatjgt7sU4Y5v61er7hd
Redirect URIs:  http://localhost:9000/
JavaScript origins: http://localhost:9000/ 
```

我正在下载 json 文件并保存它。

现在，每当用户尝试从 Web 应用程序上传时。

它将进入身份验证窗口。现在，当我选择帐户时，它是说：

错误：redirect_uri_mismatch

请求中的重定向 URI：http://localhost:8080/ 与注册的重定向 URI 不匹配

请求详细信息

```
from_login=1
scope=https://www.googleapis.com/auth/drive.readonly https://www.googleapis.com/auth/drive.apps.readonly https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.metadata.readonly https://www.googleapis.com/auth/drive.file
response_type=code
access_type=offline
redirect_uri=http://localhost:8080/
as=36ff9556bb7c2164
display=page
pli=1
client_id=916885716524-1qvrrridktedn50pasooe1ndepe1oefp.apps.googleusercontent.com
authuser=0
hl=en 
```

如您所见，我没有在重定向 uri 中提到 8080，但它也在尝试重定向到该 uri。

我的代码如下：

在我的处理程序中：

```
Class Upload(tornado.web.RequestHandler):
    def post(self, *args, **kwargs):
        # some logic here by which I am getting the file path
        # then calling following function from another file
        file_path = "/home/user/filename.txt"
        upload_to_drive(file_path)
        self.finish(json.dumps({"status": "success"})) 
```

我正在编写上传到谷歌驱动器逻辑的另一个文件是：

#帮助完整链接是[https://developers.google.com/drive/quickstart-python#step_1_enable_the_drive_api](https://developers.google.com/drive/quickstart-)

```
import os
import sys
import socket
import logging
import httplib2
from mimetypes import guess_type

from apiclient.discovery import build
from apiclient.http import MediaFileUpload
from oauth2client.client import OAuth2WebServerFlow
from oauth2client.file import Storage
import apiclient
from oauth2client.client import flow_from_clientsecrets
from oauth2client.tools import run

# Log only oauth2client errors
logging.basicConfig(level="ERROR")

token_file = os.path.join(os.path.dirname(__file__), 'sample.dat')

CLIENT_SECRETS = os.path.join(os.path.dirname(__file__), 'client_secrets.json')

# Helpful message to display if the CLIENT_SECRETS file is missing.
MISSING_CLIENT_SECRETS_MESSAGE = """
WARNING: Please configure OAuth 2.0

To make this sample run you will need to download the client_secrets.json file
and save it at:

   %s

""" % os.path.join(os.path.dirname(__file__), CLIENT_SECRETS)

FLOW = flow_from_clientsecrets(CLIENT_SECRETS,
    scope=[
      'https://www.googleapis.com/auth/drive',
      'https://www.googleapis.com/auth/drive.apps.readonly',
      'https://www.googleapis.com/auth/drive.file',
      'https://www.googleapis.com/auth/drive.readonly',
      'https://www.googleapis.com/auth/drive.metadata.readonly',
    ],
    message=MISSING_CLIENT_SECRETS_MESSAGE)

def authorize(token_file, storage):
    if storage is None:
        storage = Storage(token_file)
    credentials = storage.get()

 if credentials is None or credentials.invalid:
    credentials = run(FLOW, storage)

# Create an httplib2.Http object and authorize it with credentials
http = httplib2.Http()

credentials.refresh(http)
http = credentials.authorize(http)
return http

def upload_file(file_path, file_name, mime_type):
# Create Google Drive service instance
    http = httplib2.Http()
    drive_service = build('drive', 'v2', http=http)

    media_body = MediaFileUpload(file_path,
                             mimetype=mime_type,
                             resumable=False)
    body = {
      'title': file_name,
      'description': 'backup',
      'mimeType': mime_type,
    }
    permissions = {
      'role': 'reader',
      'type': 'anyone',
      'value': None,
      'withLink': True
    }

    # Insert a file
    # drive_services.files() is at first an empty list.
    file = drive_service.files().insert(body=body, media_body=media_body).execute()
    # Insert new permissions and create file instance
    drive_service.permissions().insert(fileId=file['id'], body=permissions).execute()
    print 'file uploaded !!'

def file_properties(file_path):
    mime_type = guess_type(file_path)[0]
    file_name = file_path.split('/')[-1]
    return file_name, mime_type

def upload_to_drive(file_path):
    try:
        with open(file_path) as f: pass
    except IOError as e:
        print(e)
        sys.exit(1)

    http = authorize(token_file, None)
    file_name, mime_type = file_properties(file_path)

    upload_file(file_path, file_name, mime_type) 
```

我无法理解我在哪里做错了。请有人解释一下解决方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:41:30.697

我们需要稍微修改一下 oauth2client.tool

您可以指定您的端口，如下所示，然后一切都会正常工作。

```
gflags.DEFINE_multi_int('auth_host_port', [8080, 8090, 9000],.....
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:58:06.237

在`Upload`你上的最后一堂课

```
self.redirect("/") 
```

如果你在本地开发服务器上运行它，它期望在 http://localhost:8080/ 有一些东西，这是你的开发服务器的默认主机/地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:47:28.993

我对 python 库并不熟悉，但是无论哪个调用构造身份验证 URI，它显然`http://localhost:8080`都在参数中添加了 a，正如您在帖子中看到的那样。所以要么你需要弄清楚如何改变要放入的python库的行为`localhost:9000`，要么你需要在开发者控制台中更改注册以允许`localhost:8080`。

我发现当我通过开发、暂存和产品化应用程序的方式工作时，我最终在开发控制台中构建了六种不同的重定向。我看不到对它有明显的伤害。

# ios - 创建圆角视图

> ID：14647604
> 
> 赞同：6
> 
> 时间：2013-02-01T13:41:47.023
> 
> 标签：ios, objective-c

再会！

我试图让我的视图（主视图中的视图）变成圆角。我正在这样做，但它不起作用。有任何想法吗？

```
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
    currenView = [[UIView alloc] init]; 

    UIBezierPath *maskPath;
    maskPath = [UIBezierPath bezierPathWithRoundedRect:currenView.bounds byRoundingCorners:UIRectCornerAllCorners cornerRadii:CGSizeMake(30.0, 30.0)];

    CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
    maskLayer.frame = currenView.bounds;
    maskLayer.path = maskPath.CGPath;
    currenView.layer.mask = maskLayer;

}
return self; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T13:44:03.973

尝试这样的事情：

```
view.layer.cornerRadius = 5.0;
view.layer.masksToBounds = YES; 
```

对于阴影：

```
view.layer.shadowColor = [UIColor blackColor].CGColor;
view.layer.shadowOffset = CGSizeMake(1.0f, 1.0f);
view.layer.masksToBounds = NO;
view.layer.shadowRadius = 5.0f; 
```

确保导入`<QuartzCore/QuartzCore.h>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-02T12:00:32.020

这是代码。Alloc 初始化一个视图并发送到此方法以获取圆角。您可以选择绕过您想要的任何角落。也给阴影描边颜色。

```
-(void) setMaskTo:(UIView*)view byRoundingCorners:(UIRectCorner)corners withColor:  (UIColor*) color
{
 UIBezierPath* rounded = [UIBezierPath bezierPathWithRoundedRect:view.bounds  byRoundingCorners:corners cornerRadii:CGSizeMake(9.0, 9.0)];

CAShapeLayer* shape = [[[CAShapeLayer alloc] init] autorelease];
[shape setPath:rounded.CGPath];
shape.strokeColor = [[UIColor grayColor] CGColor];

view.backgroundColor=color;
view.layer.mask = shape;
} 
```

像这样调用方法。

```
[self setMaskTo:ABCView byRoundingCorners:UIRectCornerAllCorners withColor:[UIColor greenColor]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:12:35.490

您的视图没有大小。它的 w 和 h 为 0。试试类似的东西，

```
currentView = [[UIView alloc] initWithFrame:CGRectMake(0,0 200,200)]; 
```

然后申请

```
currentView.layer.cornerRadius = 8.0;
currentView.layer.masksToBounds = YES;
currentView.layer.borderWidth = 1.0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:55:24.913

Stavash的解决方案似乎是正确的，我已经使用过几次了。如果您正在寻找替代方案或坚持使用遮罩层，请参阅此答案：[https ://stackoverflow.com/a/13163693/936957](https://stackoverflow.com/a/13163693/936957)

# jsf - 有长期请求时的心跳

> ID：14647608
> 
> 赞同：1
> 
> 时间：2013-02-01T13:41:59.230
> 
> 标签：jsf, jakarta-ee, richfaces, session-timeout, seam2

如何使用 JSF 1.2、RichFaces 3.x 使用 SEAM 2.x 实现心跳，这在用户执行的长期请求期间也可以工作？

目前，我们有一个心跳（以避免会话超时），使用`<aj4:poll action="#{bean.keepAlive}" ... />`它在服务器上的长期请求期间不起作用。使用 own`eventsQueue="heartbeat"`允许即使在执行长期请求时发送所需的心跳，*但*会导致我们进入`org.jboss.seam.ConcurrentRequestTimeoutException`.

我们也尝试使用`@Asynchronous`on`keepAlive`方法。

您对我的问题有其他解决方案或提示吗？谢谢你。:)

* * *

*   [http://docs.jboss.org/seam/2.0.1.GA/reference/en/html/conversations.html#d0e5208](http://docs.jboss.org/seam/2.0.1.GA/reference/en/html/conversations.html#d0e5208)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:49:25.720

我们已经解决了在`<iframe ...>`. 我实际上不是使用框架的朋友，但在这种情况下，它是一个干净快速且肮脏的解决方案。

我们仍然`<a4j:poll ...>`在框架内使用。

# php - 如何使用 PHP 从 Ajax 请求中获取二级 JSON 节点的值？

> ID：14647612
> 
> 赞同：1
> 
> 时间：2013-02-01T13:42:20.680
> 
> 标签：php, ajax, codeigniter, codeigniter-2

如何使用 PHP 从 Ajax 请求中获取二级 JSON 节点的值？如果我在客户端有下一个 JSON 数据：

```
var Data = {idJS: "1", dataToSet: "example", another:{ field1: "example2"} }; 
```

当 Ajax 请求完成后，在 PHP`dataToSet`中得到如下：`$_POST['dataToSet']`，特别是我使用 Codeigniter，然后我使用`$this->input->post('dataToSet')`. 但是，我怎样才能得到`another->field1`？

[解决了]：

```
$postdata = $this->input->post();
$postdata['another']['field1']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:50:47.477

我不知道你是怎么用codeigniter做的，但你必须解码json。之后，您可以访问该字段。这可能看起来像这样：

```
$postdata = json_decode($this->input->post);
$postdata['another']['field1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:51:22.963

尝试这个：

```
$ata = json_decode($this->input->post('dataToSet'), true);
$field1 = $data['another']['field1']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:49:46.787

这应该这样做：

```
$data = $this->input->post('another');
print_r($data->field1);

// or you can do it in one line:
$this->input->post('another')->field1; 
```

# internet-explorer - IE10 上的兼容性视图问题

> ID：14647614
> 
> 赞同：1
> 
> 时间：2013-02-01T13:42:30.987
> 
> 标签：internet-explorer, internet-explorer-10

几天来，我一直被 Windows 8 上的 IE10 中的一个问题难住了。

我正在将最初用经典 ASP 编写的遗留 Web 应用程序现代化为 .NET 4.0 Web 应用程序。它最初是为 IE 编写的，并在 IE6 中开始了它的生命。显然，尚未更新的旧页面需要使用兼容模式，而较新的页面则不需要。

IE9 中的一切都按预期工作——该站点位于兼容性视图列表中，并且页面显示在兼容性视图中，除非提供基于包含以下元标记的 ASPX 母版页之一的页面——然后它处于“常规”IE9 模式（通过查看 F12 工具栏中的设置进行验证）。

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

但是在 IE10 中，浏览器中应用了相同的设置并提供了相同的元标记（我也尝试将 IE10 值也插入到内容属性中），但页面以兼容模式显示。命中断点时，Request.Browser.Version 显示为 7.0，并且相同的值反映在 IIS 日志中。

我还缺少其他需要添加的 IE10 中的新功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:15:01.150

[微软建议](http://msdn.microsoft.com/en-us/library/ie/hh920756%28v=vs.85%29.aspx)：

1.  利用`<!DOCTYPE html>`
2.  不要使用“X-UA-Compatible”元标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T15:57:53.360

尝试使用：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9"> 
```

# c# - 在 Unity3D 中使用物理的恒定轨道

> ID：14647616
> 
> 赞同：1
> 
> 时间：2013-02-01T13:42:37.970
> 
> 标签：c#, unity3d, game-physics

我正在玩 Unity3D 并向场景中的对象添加物理。我目前在屏幕的中心有一个球体（行星），我有另一个球体（月亮）位于它的外面，它没有移动。当我运行游戏时，我希望月球通过施加力来绕行星运行。我已经能够通过调用获得添加的力`rigidbody.AddForce()`，这会将其移动到指定的方向，但不会绕行。我不确定如何对其施加力，以便它以恒定的速度连续围绕球体运行。

我已经尝试了一些使用 a`ConfigurableJoint`和 it 轨道的示例，但它开始弹跳一点，然后开始轨道。我的目标是让一堆轨道卫星以自己的速度运行，它们能够相互反弹但不会失去速度。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T02:23:39.170

For the moon to orbit you would need to give the moon an initial velocity. Then have it accelerate towards the planet, that is a constant force.

![enter image description here](../Images/a0142410584d88e2af97fea46de2de2c.png)

![enter image description here](../Images/b477d8e81bb75c0ec52b54c37b822cfa.png)

```
gameObject.rigidbody.AddForce(1, 0, 0);
gameObject.constantForce.relativeForce = Vector3(0, 1, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T15:10:56.753

一般来说，你最终会失败，因为你的积分方法中的舍入错误会让你慢慢脱离轨道。您可以按照建议的方式非常接近，但您可以考虑做一些更像 Kerbal Space Program 的事情，它似乎将轨道预先计算为椭圆，然后跟随该椭圆，直到它有理由相信它应该停止，而不是严格“模拟”轨道......

如果发生碰撞，请让普通物理场解决碰撞问题，然后根据结果重新计算新轨道并开始跟踪。

# android - 下载图片网址包含“è”

> ID：14647622
> 
> 赞同：5
> 
> 时间：2013-02-01T13:42:58.143
> 
> 标签：android, image

我尝试在以下网址下载图像：

[http://upload.tapcrowd.com//cache/](http://upload.tapcrowd.com//cache/) /_cp_100_100_stand_filière_300x212.jpg

正如您在浏览器中看到的那样，这显示了一个图像，但在我的应用程序中，我得到了 FileNotFoundException。

但是，如果我将图像的 url 从“è”更改为“e”。我可以成功地将它下载到我的应用程序中。然而，这只是一个临时解决方案，因为它需要能够下载带有 unicode 符号的图像。

我怎样才能做到这一点？

用于下载图像的方法：

```
 Bitmap bitmap = null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection) imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is = conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f, maxheight, maxwidth); 
```

* * *

对我有用的结果代码：

```
 Bitmap bitmap = null;
        int slashIndex = url.lastIndexOf('/');
        String filename = url.substring(slashIndex + 1);
        filename = URLEncoder.encode(filename, "UTF-8");
        url = url.subSequence(0, slashIndex + 1) + filename;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection) imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is = conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f, maxheight, maxwidth); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:49:42.710

[使用URLEncoder](http://docs.oracle.com/javase/6/docs/api/java/net/URLEncoder.html)对 url 进行编码：

```
String baseUrl = "http://upload.tapcrowd.com//cache//";
String imageName = "_cp_100_100_stand_filière_300x212.jpg";
URL imageUrl = new URL(baseUrl+URLEncoder.encode(imageName ,"UTF-8")); 
```

它适用于您的浏览器，因为浏览器足够智能，可以在您在 url 栏中键入重音时进行编码。

# entity-framework - 不允许在 Breeze 中扩展特定实体类型

> ID：14647623
> 
> 赞同：1
> 
> 时间：2013-02-01T13:43:00.167
> 
> 标签：entity-framework, asp.net-web-api, odata, breeze

我正在寻找一种优雅的方式来不允许在 BreezeJS中[扩展特定的实体类型。](http://www.breezejs.com/sites/all/apidocs/classes/EntityQuery.html#method_expand)我们有一个（有点）我们要公开的公共 Web 服务，并且有一些表我们不希望对该服务的某些消费者可见。虽然我们只能为那些特定的表公开 Web API 方法，但服务的使用者仍然可以通过从相关表扩展来访问这些表。

**注意：**我已经发布了这个问题的答案，给出了解决方法。但是，如果有人知道一种更优雅的给这只猫剥皮的方法，我很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:53:05.827

在[请求将此功能正式添加到 Breeze 的 UserVoice 页面上](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/suggestions/3140624-attributes-on-controller-actions-to-block-the-use-)，Ward Bell 建议了一个不错的解决方法：

> 同时，在您的控制器中，您可以检查请求中的查询字符串是否存在 $select 和 $expand，如果看到则抛出异常。

我猜这看起来像这样：

```
 [HttpGet]
    public IQueryable<Widget> Widgets() {
        if (!string.IsNullOrEmpty(HttpContext.Current.Request.QueryString["$expand"]))
        {
            throw new Exception("Ah ah ah, you didn't say the magic word!");
        }
        return _contextProvider.Context.Widgets;
    } 
```

...阻止所有扩展，或更具体地阻止功能扩展本身。这不是太破旧，但不是很“优雅”。

（是的，这是[侏罗纪公园的参考](http://www.youtube.com/watch?v=RfiQYRn7fBg)。）

# jquery - 使用 jquery 从动态添加的画布中获取上下文（2d）

> ID：14647629
> 
> 赞同：4
> 
> 时间：2013-02-01T13:43:18.517
> 
> 标签：jquery

这里有点新手，可能超出了我的深度，但我正在循环一些导入的 xml 并附加一个带有 div 的容器，然后将它附加到一个画布上，然后我试图绘制到那个画布中。我得到的只是'getContext（）不是一个函数'任何指导都非常感激

```
var newCanvas = 
    $('<canvas/>', {'class':'cnvsClass'}, {'id': 'theCanvas'})
    .width(215)
    .height(217);

$("#innerWrapper")
    .append($('<div/>', {'class': 'wrapper'})
        .append($(newCanvas)));

// Have tried  $('<canvas/>', $('.cnvsClass'), $("#theCanvas")
// I've added [0] after the selector but all I get is 
// TypeError: $(...).getContext is not a function
var ctx = $("#theCanvas").getContext("2d");

var image = new Image();
image.src = "AtlasSheet.png";  
$(image).load(function() {
    ctx.drawImage(image, 830,1165, 215, 217, 0, 0, 215, 217);    
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T14:10:26.840

您需要本机 DOM 对象来执行此操作。

试试这个;

```
var ctx = $("#theCanvas").get(0).getContext("2d"); 
```

# java - 使用 RESTeasy 管理属性继承

> ID：14647635
> 
> 赞同：1
> 
> 时间：2013-02-01T13:43:35.227
> 
> 标签：java, json, rest, jax-rs, pojo

我正在使用 RESTeasy 将负载中的 json 转换为 Web 服务器中的 POJO。当其中一个 POJO 成员是通用的时，我遇到了一个问题。

例如：

```
public class MainPOJO
{
    private MyParentClass c;

    [...]
}

public class MyParentClass
{
    [...]
}

public class MyFirstChildClass extends MyParentClass
{
    private int number;

    [...]
}

public class MySecondChildClass extends MyParentClass
{
    private boolean isTrue;

    [...]
} 
```

在客户端发出的请求负载 (PUT) 中，您可以找到类似 json 的内容（请注意，我在“c”属性中以 json 格式发送了一个等效的 MyFirstChildClass）：

```
{
    c: {number:10}
} 
```

有没有办法告诉 RESTeasy MainPOJO 中的属性“c”可以是 MyParentClass、MyFirstChildClass 或 MySecondChildClass 的实例？

目前，它只是尝试实例化一个 MyParentClass 新实例，但抛出一个错误，指出该属性，例如，“数字”未标记为可忽略。但我希望它可以更智能，并根据 json 中的属性从树中的正确类实例化一个对象。

是否可以？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:39:15.083

假设您使用的是 Jackson 提供程序，那么处理此问题的最佳方法是通过`JsonTypeInfo`注释。使用它会通知 Jackson 您希望在生成的 JSON 中包含类型提示，当涉及到反序列化时，它可以用来解析实际类型。

要在序列化时***始终***包含类型信息`MyParentClass`，您将注释类本身：

```
@JsonTypeInfo(use=Id.CLASS, include=As.PROPERTY, property="class")
public class MyParentClass {
} 
```

或者，要仅包含对象被序列化`MyParentClass`时的类型信息，您可以注释该字段：`MainPojo`

```
public class MainPOJO {
    @JsonTypeInfo(use=Id.CLASS, include=As.PROPERTY, property="class")
    private MyParentClass c;
} 
```

有关覆盖和选项的更多详细信息，请参阅[JsonTypeInfo 上的 Jackson 文档。](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/annotate/JsonTypeInfo.html)

# r - 将对象传递给函数而不在更改时复制它

> ID：14647636
> 
> 赞同：2
> 
> 时间：2013-02-01T13:43:37.427
> 
> 标签：r, memory-management

### 我的问题

如果一个对象`x`被传递给一个`f`修改它的函数，R 将创建一个修改后的本地副本`x`within`f`的环境，而不是更改原始对象（由于 copy-on-change 原则）。但是，我有一种情况，`x`它非常大并且一旦传递给就不需要了`f`，所以我想避免存储`x`一次`f`调用的原始副本。有没有聪明的方法来实现这一目标？

`f`是一个可能不太聪明的用户提供的未知功能。

### 我目前的解决方案

到目前为止，我最好的方法是包装`x`一个函数，该函数对called`forget`进行新的本地引用，删除工作区中的原始引用，然后传递新的引用。问题是我不确定它是否能完成我想要的，它只适用于，这在我目前的情况下是一个交易破坏者。`x``y``globalenv()`

```
forget <- function(x){
    y <- x
    # x and y now refers to the same object, which has not yet been copied
    print(tracemem(y))
    rm(list=deparse(substitute(x)), envir=globalenv())
    # The outside reference is now removed so modifying `y`
    # should no longer result in a copy (other than the
    # intermediate copy produced in the assigment)
    y
}

f <- function(x){
    print(tracemem(x))
    x[2] <- 9000.1
    x
} 
```

这是调用上述函数的示例。

```
> a <- 1:3
> tracemem(a)
[1] "<0x2ac1028>"
> b <- f(forget(a))
[1] "<0x2ac1028>"
[1] "<0x2ac1028>"
tracemem[0x2ac1028 -> 0x2ac1e78]: f 
tracemem[0x2ac1e78 -> 0x308f7a0]: f 
> tracemem(b)
[1] "<0x308f7a0>"
> b
[1]    1.0 9000.1    3.0
> a
Error: object 'a' not found 
```

### 底线

我在做我希望我做的事吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T16:01:04.587

**(1) 环境**您可以为此使用环境：

```
e <- new.env()
e$x <- 1:3
f <- function(e) with(e, x <- x + 1)
f(e)
e$x 
```

**(2) 参考类**或因为参考类自动使用环境使用那些：

```
E <- setRefClass("E", fields = "x",
    methods = list(
        f = function() x <<- x + 1
    )
)
e <- E$new(x = 1:3)
e$f()
e$x 
```

**(3) proto 对象**也使用环境：

```
library(proto)
p <- proto(x = 1:3, f = function(.) with(., x <- x + 1))
p$f()
p$x 
```

添加：原型解决方案

更新：将函数名称更改`f`为与问题一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:15:20.083

我认为最简单的方法是只将工作副本加载到内存中，而不是同时加载原始（全局命名空间）和工作副本（函数命名空间）。您可以通过使用“ff”包将“x”和“y”数据集定义为“ffdf”数据框来回避整个问题。据我了解，“ffdf”数据帧驻留在磁盘上，仅在需要部分数据帧时才加载到内存中，并在不再需要这些部分时清除。从理论上讲，这意味着数据将被加载到内存中以复制到函数命名空间中，然后在复制完成后清除。

我承认我很少需要使用 'ff' 包，而且当我这样做时，我通常根本没有任何问题。不过，我并没有检查特定的内存使用情况，我的目标通常只是对数据执行大型计算。它有效，我不问问题。

# xml - XSLT 排序 - 如何使用属性对父节点内的 xml 子节点进行排序

> ID：14647638
> 
> 赞同：10
> 
> 时间：2013-02-01T13:43:48.323
> 
> 标签：xml, sorting, xslt, xpath, xslt-grouping

开始是一件简单的事情，但对于 XSLT 菜鸟来说却相当麻烦。

尝试对子节点/降序进行排序，但是在向其父节点添加属性后，在 VS2010 中调试时收到错误消息：

`"Attribute and namespace nodes cannot be added to the parent element after a text, comment, pi, or sub-element node has already been added."`

假设我有这个简单的 XML：

```
<posts>
    <year value="2013">
        <post postid="10030" postmonth="1">
            <othernode></othernode>
            <othernode2></othernode2>
        </post>
        <post postid="10040" postmonth="2">
            <othernode></othernode>
            <othernode2></othernode2>
        </post>
        <post postid="10050" postmonth="3">
             <othernode></othernode>
             <othernode2></othernode2>
        </post>
    </year>
    <year value="2012">
        <post postid="10010" postmonth="1">
            <othernode></othernode>
            <othernode2></othernode2>
        </post>
        <post postid="10015" postmonth="2">
            <othernode></othernode>
            <othernode2></othernode2>
        </post>
        <post postid="10020" postmonth="3">
             <othernode></othernode>
             <othernode2></othernode2>
        </post>
    </year>
</posts> 
```

我将 XPATH 传递给 xmldatasource 以检索相关`<year>`节点，例如 2013。然后我需要`<post>`使用 postid 对其子节点进行降序排序，因此对于`<year value=2013>`, postid=10050 将在呈现时首先显示。

所以，要明确一点：我只对在一个`<year>`节点内进行排序感兴趣。

在我将节点拆分为单独的节点（即 xml 是 /posts/post）之前，以下 XSLT 工作：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" indent="yes" omit-xml-declaration="no"/>
    <xsl:strip-space elements="*"/>
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()">
                <xsl:sort select="@postid" data-type="text" order="descending"/>
            </xsl:apply-templates>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

由于上述错误，现在运行时 xmldatasource 为空。如果我按升序传递，则明显返回相同的 xml（无转换）

问题：如何更新上述（或新的）XSLT 以适应父节点属性（`<year value="">`）？通过研究，一个答案说“我需要在创建元素之前添加属性创建”。这是有道理的，因为观察调试器，子节点是按 desc 顺序形成的，但是 year 标签缺少它的属性。但是我对 XSLT 真的一无所知。看不出它太复杂，但就是不懂语言。

任何帮助，非常感谢。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T13:58:49.483

那么您是说您只是将部分 XML 文档（一个`<year>`节点）传递给 XSLT 处理器吗？

您应该为年份使用单独的模板，以便这是唯一使用排序的模板。以下情况如何：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="no"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="year">
    <xsl:copy>
      <xsl:apply-templates select="@*" />
      <xsl:apply-templates select="post">
        <xsl:sort select="@postid" data-type="number" order="descending"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

我认为上面是一个更好的方法，但我认为你的错误的根本原因是它在进行排序时将属性与元素混合在一起。如果您只是这样做，您的原始 XSLT 可能会运行而不会出错：

```
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*">
        <xsl:apply-templates select="node()">
            <xsl:sort select="@postid" data-type="text" order="descending"/>
        </xsl:apply-templates>
    </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:04:36.067

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="@*|node()"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="year">
  <xsl:copy>
    <xsl:apply-templates select="@*"/>
    <xsl:apply-templates select="*">
      <xsl:sort select="@postid" data-type="number" order="descending"/>
    </xsl:apply-templates>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<posts>
    <year value="2013">
        <post postid="10030" postmonth="1">
            <othernode></othernode>
            <othernode2></othernode2>
        </post>
        <post postid="10040" postmonth="2">
            <othernode></othernode>
            <othernode2></othernode2>
        </post>
        <post postid="10050" postmonth="3">
            <othernode></othernode>
            <othernode2></othernode2>
        </post>
    </year>
    <year value="2012">
        <post postid="10010" postmonth="1">
            <othernode></othernode>
            <othernode2></othernode2>
        </post>
        <post postid="10015" postmonth="2">
            <othernode></othernode>
            <othernode2></othernode2>
        </post>
        <post postid="10020" postmonth="3">
            <othernode></othernode>
            <othernode2></othernode2>
        </post>
    </year>
</posts> 
```

**产生想要的正确结果：**

```
<posts>
   <year value="2013">
      <post postid="10050" postmonth="3">
         <othernode/>
         <othernode2/>
      </post>
      <post postid="10040" postmonth="2">
         <othernode/>
         <othernode2/>
      </post>
      <post postid="10030" postmonth="1">
         <othernode/>
         <othernode2/>
      </post>
   </year>
   <year value="2012">
      <post postid="10020" postmonth="3">
         <othernode/>
         <othernode2/>
      </post>
      <post postid="10015" postmonth="2">
         <othernode/>
         <othernode2/>
      </post>
      <post postid="10010" postmonth="1">
         <othernode/>
         <othernode2/>
      </post>
   </year>
</posts> 
```

# c++ - luabind - 超过 10 个参数的函数

> ID：14647639
> 
> 赞同：7
> 
> 时间：2013-02-01T13:43:42.957
> 
> 标签：c++, luabind

我想在 luabind 中使用超过 10 个参数的函数，但是我得到了一些 C2784 和 C2780 编译器错误（VS2012 Express）。
似乎问题是使用的boost库的限制。在 luabind 中，可以设置 LUABIND_MAX_ARITY 选项，但这取决于 boost 可能的情况。我怎样才能克服这个限制？

谢谢！

代码：

```
luabind::module(lua) [
    luabind::class_<WkmParserDB>("WkmParserDB")
        .def("insertInterface", &WkmParserDB::insertInterface)
        .def("insertIntfStats", &WkmParserDB::insertIntfStats)
        .def("intertIntfN1k", &WkmParserDB::intertIntfN1k)
]; 
```

函数**insertIntfStats**有大约 20 个 std::string 参数，仅此而已。其他两个函数的参数少于 8 个（std::string 也是如此）。当我注释 ".def("insertIntfStats", &WkmParserDB::insertIntfStats)" 行时，它会编译并工作。

错误：

```
Fehler  3   error C2784: "boost::mpl::vector12<R,const most_derived<T,Wrapped>::type&,A0,A1,A2,A3,A4,A5,A6,A7,A8,A9> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7,A8,A9) const,Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7,A8,A9) const" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden. d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  4   error C2780: 'boost::mpl::vector12<R,const T&,A0,A1,A2,A3,A4,A5,A6,A7,A8,A9> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7,A8,A9) const)': Erwartet 1 Argumente - 2 unterstützt    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  5   error C2784: "boost::mpl::vector12<R,most_derived<T,Wrapped>::type&,A0,A1,A2,A3,A4,A5,A6,A7,A8,A9> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7,A8,A9),Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7,A8,A9)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  6   error C2780: 'boost::mpl::vector12<R,T&,A0,A1,A2,A3,A4,A5,A6,A7,A8,A9> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7,A8,A9))': Erwartet 1 Argumente - 2 unterstützt    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  7   error C2784: "boost::mpl::vector11<T0,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10> luabind::detail::deduce_signature(R (__cdecl *)(A0,A1,A2,A3,A4,A5,A6,A7,A8,A9),...)": template-Argument für "R (__cdecl *)(A0,A1,A2,A3,A4,A5,A6,A7,A8,A9)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  8   error C2784: "boost::mpl::vector11<R,const most_derived<T,Wrapped>::type&,A0,A1,A2,A3,A4,A5,A6,A7,A8> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7,A8) const,Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7,A8) const" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.  d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  9   error C2780: 'boost::mpl::vector11<R,const T&,A0,A1,A2,A3,A4,A5,A6,A7,A8> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7,A8) const)': Erwartet 1 Argumente - 2 unterstützt  d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  10  error C2784: "boost::mpl::vector11<R,most_derived<T,Wrapped>::type&,A0,A1,A2,A3,A4,A5,A6,A7,A8> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7,A8),Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7,A8)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  11  error C2780: 'boost::mpl::vector11<R,T&,A0,A1,A2,A3,A4,A5,A6,A7,A8> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7,A8))': Erwartet 1 Argumente - 2 unterstützt  d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  12  error C2784: "boost::mpl::vector10<T0,T1,T2,T3,T4,T5,T6,T7,T8,T9> luabind::detail::deduce_signature(R (__cdecl *)(A0,A1,A2,A3,A4,A5,A6,A7,A8),...)": template-Argument für "R (__cdecl *)(A0,A1,A2,A3,A4,A5,A6,A7,A8)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.  d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  13  error C2784: "boost::mpl::vector10<R,const most_derived<T,Wrapped>::type&,A0,A1,A2,A3,A4,A5,A6,A7> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7) const,Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7) const" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  14  error C2780: 'boost::mpl::vector10<R,const T&,A0,A1,A2,A3,A4,A5,A6,A7> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7) const)': Erwartet 1 Argumente - 2 unterstützt    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  15  error C2784: "boost::mpl::vector10<R,most_derived<T,Wrapped>::type&,A0,A1,A2,A3,A4,A5,A6,A7> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7),Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden. d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  16  error C2780: 'boost::mpl::vector10<R,T&,A0,A1,A2,A3,A4,A5,A6,A7> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6,A7))': Erwartet 1 Argumente - 2 unterstützt    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  17  error C2784: "boost::mpl::vector9<T0,T1,T2,T3,T4,T5,T6,T7,T8> luabind::detail::deduce_signature(R (__cdecl *)(A0,A1,A2,A3,A4,A5,A6,A7),...)": template-Argument für "R (__cdecl *)(A0,A1,A2,A3,A4,A5,A6,A7)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  18  error C2784: "boost::mpl::vector9<R,const most_derived<T,Wrapped>::type&,A0,A1,A2,A3,A4,A5,A6> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6) const,Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6) const" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden. d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  19  error C2780: 'boost::mpl::vector9<R,const T&,A0,A1,A2,A3,A4,A5,A6> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6) const)': Erwartet 1 Argumente - 2 unterstützt   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  20  error C2784: "boost::mpl::vector9<R,most_derived<T,Wrapped>::type&,A0,A1,A2,A3,A4,A5,A6> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6),Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  21  error C2780: 'boost::mpl::vector9<R,T&,A0,A1,A2,A3,A4,A5,A6> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5,A6))': Erwartet 1 Argumente - 2 unterstützt   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  22  error C2784: "boost::mpl::vector8<T0,T1,T2,T3,T4,T5,T6,T7> luabind::detail::deduce_signature(R (__cdecl *)(A0,A1,A2,A3,A4,A5,A6),...)": template-Argument für "R (__cdecl *)(A0,A1,A2,A3,A4,A5,A6)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden. d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  23  error C2784: "boost::mpl::vector8<R,const most_derived<T,Wrapped>::type&,A0,A1,A2,A3,A4,A5> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5) const,Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3,A4,A5) const" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.  d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  24  error C2780: 'boost::mpl::vector8<R,const T&,A0,A1,A2,A3,A4,A5> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5) const)': Erwartet 1 Argumente - 2 unterstützt d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  25  error C2784: "boost::mpl::vector8<R,most_derived<T,Wrapped>::type&,A0,A1,A2,A3,A4,A5> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5),Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3,A4,A5)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  26  error C2780: 'boost::mpl::vector8<R,T&,A0,A1,A2,A3,A4,A5> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4,A5))': Erwartet 1 Argumente - 2 unterstützt d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  27  error C2784: "boost::mpl::vector7<T0,T1,T2,T3,T4,T5,T6> luabind::detail::deduce_signature(R (__cdecl *)(A0,A1,A2,A3,A4,A5),...)": template-Argument für "R (__cdecl *)(A0,A1,A2,A3,A4,A5)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.  d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  28  error C2784: "boost::mpl::vector7<R,const most_derived<T,Wrapped>::type&,A0,A1,A2,A3,A4> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4) const,Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3,A4) const" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  29  error C2780: 'boost::mpl::vector7<R,const T&,A0,A1,A2,A3,A4> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4) const)': Erwartet 1 Argumente - 2 unterstützt   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  30  error C2784: "boost::mpl::vector7<R,most_derived<T,Wrapped>::type&,A0,A1,A2,A3,A4> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4),Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3,A4)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden. d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  31  error C2780: 'boost::mpl::vector7<R,T&,A0,A1,A2,A3,A4> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3,A4))': Erwartet 1 Argumente - 2 unterstützt   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  32  error C2784: "boost::mpl::vector6<T0,T1,T2,T3,T4,T5> luabind::detail::deduce_signature(R (__cdecl *)(A0,A1,A2,A3,A4),...)": template-Argument für "R (__cdecl *)(A0,A1,A2,A3,A4)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  33  error C2784: "boost::mpl::vector6<R,const most_derived<T,Wrapped>::type&,A0,A1,A2,A3> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3) const,Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3) const" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  34  error C2780: 'boost::mpl::vector6<R,const T&,A0,A1,A2,A3> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3) const)': Erwartet 1 Argumente - 2 unterstützt d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  35  error C2784: "boost::mpl::vector6<R,most_derived<T,Wrapped>::type&,A0,A1,A2,A3> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3),Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2,A3)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.  d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  36  error C2780: 'boost::mpl::vector6<R,T&,A0,A1,A2,A3> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2,A3))': Erwartet 1 Argumente - 2 unterstützt d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  37  error C2784: "boost::mpl::vector5<T0,T1,T2,T3,T4> luabind::detail::deduce_signature(R (__cdecl *)(A0,A1,A2,A3),...)": template-Argument für "R (__cdecl *)(A0,A1,A2,A3)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  38  error C2784: "boost::mpl::vector5<R,const most_derived<T,Wrapped>::type&,A0,A1,A2> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2) const,Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2) const" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden. d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  39  error C2780: 'boost::mpl::vector5<R,const T&,A0,A1,A2> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2) const)': Erwartet 1 Argumente - 2 unterstützt   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  40  error C2784: "boost::mpl::vector5<R,most_derived<T,Wrapped>::type&,A0,A1,A2> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2),Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1,A2)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  41  error C2780: 'boost::mpl::vector5<R,T&,A0,A1,A2> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1,A2))': Erwartet 1 Argumente - 2 unterstützt   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  42  error C2784: "boost::mpl::vector4<T0,T1,T2,T3> luabind::detail::deduce_signature(R (__cdecl *)(A0,A1,A2),...)": template-Argument für "R (__cdecl *)(A0,A1,A2)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden. d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  43  error C2784: "boost::mpl::vector4<R,const most_derived<T,Wrapped>::type&,A0,A1> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1) const,Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1) const" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.  d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  44  error C2780: 'boost::mpl::vector4<R,const T&,A0,A1> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1) const)': Erwartet 1 Argumente - 2 unterstützt d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  45  error C2784: "boost::mpl::vector4<R,most_derived<T,Wrapped>::type&,A0,A1> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1),Wrapped *)": template-Argument für "R (__thiscall T::* )(A0,A1)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  46  error C2780: 'boost::mpl::vector4<R,T&,A0,A1> luabind::detail::deduce_signature(R (__thiscall T::* )(A0,A1))': Erwartet 1 Argumente - 2 unterstützt d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  47  error C2784: "boost::mpl::vector3<T0,T1,T2> luabind::detail::deduce_signature(R (__cdecl *)(A0,A1),...)": template-Argument für "R (__cdecl *)(A0,A1)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.  d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  48  error C2784: "boost::mpl::vector3<R,const most_derived<T,Wrapped>::type&,A0> luabind::detail::deduce_signature(R (__thiscall T::* )(A0) const,Wrapped *)": template-Argument für "R (__thiscall T::* )(A0) const" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  49  error C2780: 'boost::mpl::vector3<R,const T&,A0> luabind::detail::deduce_signature(R (__thiscall T::* )(A0) const)': Erwartet 1 Argumente - 2 unterstützt   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  50  error C2784: "boost::mpl::vector3<R,most_derived<T,Wrapped>::type&,A0> luabind::detail::deduce_signature(R (__thiscall T::* )(A0),Wrapped *)": template-Argument für "R (__thiscall T::* )(A0)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden. d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  51  error C2780: 'boost::mpl::vector3<R,T&,A0> luabind::detail::deduce_signature(R (__thiscall T::* )(A0))': Erwartet 1 Argumente - 2 unterstützt   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  52  error C2784: "boost::mpl::vector2<T0,T1> luabind::detail::deduce_signature(R (__cdecl *)(A0),...)": template-Argument für "R (__cdecl *)(A0)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.   d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  53  error C2784: "boost::mpl::vector2<R,const most_derived<T,Wrapped>::type&> luabind::detail::deduce_signature(R (__thiscall T::* )(void) const,Wrapped *)": template-Argument für "R (__thiscall T::* )(void) const" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.  d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  54  error C2780: 'boost::mpl::vector2<R,const T&> luabind::detail::deduce_signature(R (__thiscall T::* )(void) const)': Erwartet 1 Argumente - 2 unterstützt    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  55  error C2784: "boost::mpl::vector2<R,most_derived<T,Wrapped>::type&> luabind::detail::deduce_signature(R (__thiscall T::* )(void),Wrapped *)": template-Argument für "R (__thiscall T::* )(void)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  56  error C2780: 'boost::mpl::vector2<R,T&> luabind::detail::deduce_signature(R (__thiscall T::* )(void))': Erwartet 1 Argumente - 2 unterstützt    d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  57  error C2784: "boost::mpl::vector1<T0> luabind::detail::deduce_signature(R (__cdecl *)(void),...)": template-Argument für "R (__cdecl *)(void)" konnte nicht von "std::basic_string<_Elem,_Traits,_Alloc> " hergeleitet werden.  d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4
Fehler  58  error C2780: 'luabind::adl::object luabind::make_function(lua_State *,F)': Erwartet 2 Argumente - 4 unterstützt d:\programmieren\luabind-0.9.1\luabind\class.hpp    311 1   wktools4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T07:35:04.537

虽然这是个问题，但更大的问题是你的函数需要超过 10 个参数！！

您需要做的是简化此函数的接口，可能是将参数提取到结构或类（或 Lua 中的字典，我认为）中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T12:54:53.390

尝试使用单个表作为参数。

```
void MyFunction ( luabind::adl::object const & theTable)
{
    if(luabind::type(theTable) == LUA_TTABLE)
    {
        // Iterate or look for specific indexes by name or number.
        // Follow convention.
    }
} 
```

该系统还将使您能够拥有可选参数，从而允许您以不同的变体调用此函数，而无需重新编写它。

# java - 使用 XSLT 删除 PrettyPrint

> ID：14647642
> 
> 赞同：0
> 
> 时间：2013-02-01T13:43:52.023
> 
> 标签：java, xml, xslt

出于某种原因，我的以下代码给出了异常：`javax.xml.transform.TransformerConfigurationException: Could not compile stylesheet`

```
public String removePrettyPrint(String xml) throws TransformerException, TransformerFactoryConfigurationError {
    String result = "";
    TransformerFactory factory = TransformerFactory.newInstance();
    String source = "<?xml version=\"1.0\"?><xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">    <xsl:output indent=\"no\" />    <xsl:template match=\"@*|node()\">        <xsl:copy>            <xsl:apply-templates select=\"@*|node()\"/>        </xsl:copy>    </xsl:template></xsl:stylesheet>";
    Source xslt = new StreamSource(source);
    Transformer transformer = factory.newTransformer(xslt);
    Source text = new StreamSource(xml);
    transformer.transform(text, new StreamResult(result));
    return result;
} 
```

它有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:16:02.457

我认为问题在于，当您将字符串作为参数传递给[StreamSource](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/transform/stream/StreamSource.html)时，它​​希望它是 XML 文档的 URL，而不是实际的 XML 字符串本身。

您可能需要在这里使用 StringReader 阅读器：

```
String source = "...XSL Here...";
StringReader xsltReader = new StringReader(source);
Source xslt = new StreamSource(xsltReader);
Transformer transformer = factory.newTransformer(xslt); 
```

您可能必须对 XML 执行相同的操作，假设您传递的是 XML，而不是 XML 文档的 URL。

```
StringReader xmlReader = new StringReader(xml);
Source text = new StreamSource(xmlReader); 
```

对于转换本身，您可能需要使用 StringWriter

```
StringWriter writer = new StringWriter();
transformer.transform(text, new StreamResult(writer));
result = writer.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:19:54.027

问题是因为编码..当您使用 File() 类读取文件时，它会在内部进行编码..但是当您尝试将 XML 作为字符串加载..那么您必须手动执行..

观察使用情况`.getBytes() and ByteArrayInputStream(bytes).`

```
 String source = "<?xml version=\"1.0\"?><xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">    <xsl:output indent=\"no\" />    <xsl:template match=\"@*|node()\">        <xsl:copy>            <xsl:apply-templates select=\"@*|node()\"/>        </xsl:copy>    </xsl:template></xsl:stylesheet>";
    byte[] bytes = source .getBytes("UTF-16");
    Source xslsource = new StreamSource(new ByteArrayInputStream(bytes));
    Transformer transformer = factory.newTransformer(xslsource); 
```

另一种解决方案是使用 StringReader：

```
 String source = "<?xml version=\"1.0\"?><xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">    <xsl:output indent=\"no\" />    <xsl:template match=\"@*|node()\">        <xsl:copy>            <xsl:apply-templates select=\"@*|node()\"/>        </xsl:copy>    </xsl:template></xsl:stylesheet>";
    StringReader xslReader = new StringReader(source);
    Source xslsource= new StreamSource(xslReader); 
```

它会自动处理编码..

# mongodb - 在mongodb中选择字符串长度

> ID：14647644
> 
> 赞同：13
> 
> 时间：2013-02-01T13:43:52.573
> 
> 标签：mongodb, string-length

您如何查询 mongodb 以查找特定字符串/文本字段的长度？

您如何找到查询集的最大长度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:28:35.883

不幸的是，[聚合框架](http://docs.mongodb.org/manual/reference/aggregation/)不支持“len”运算符在您进行查询时自动将字符串转换为其长度。所以你必须在你自己的代码中解决这个问题。你可以

1.  使用 MapReduce 函数计算字符串长度
2.  在应用层查询字符串并计算它们的长度

这些方法之间的区别在于，第一个在数据库上运行，而后者在您的应用程序服务器上运行。我会推荐后一种选择，因为 MapReduce 使用起来可能非常缓慢且麻烦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T13:56:30.787

天空才是极限！不，实际上它是`16 MB`针对`mongodb`. 这可以是记录中字符串的最大长度。

为了找到查询集中的最大长度，您可以执行以下工作：

1.  将文本的长度与文本本身保持在一起。
2.  按长度降序对结果集进行排序。
3.  获取具有最大长度的第一个元素。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-23T15:32:02.820

开始`Mongo 3.4`，[`$strLenCP`](https://docs.mongodb.com/manual/reference/operator/aggregation/strLenCP/)聚合运算符可用于获取字符串的长度：

```
// { a: "Hello World" }
// { a: "42" }
// { a: "Hello World!" }
db.collection.aggregate([{ $addFields: { length: { $strLenCP: "$a" } } }])
// { a: "Hello World",  length: 11 }
// { a: "42",           length: 2 }
// { a: "Hello World!", length: 12 } 
```

为了通过[`$group`](https://docs.mongodb.com/manual/reference/operator/aggregation/group/index.html)/[`$max`](https://docs.mongodb.com/manual/reference/operator/aggregation/max/#grp._S_max)阶段从所有文档中获取最大长度：

```
db.collection.aggregate([
  { $group: { _id: null, longest: { $max: { $strLenCP: "$a" } } } }
])
// { "_id" : null, longest: 12 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-26T09:20:14.197

如何改用正则表达式。

```
> db.apps.find({$where:"(this.id.length gt 6) && (this.id.length lt 15)" }).count();
2548
> db.apps.find({$where:" (this.id.length gt 6) && (this.id.length lt 15) " } ).explain();
{
    “光标”：“基本光标”，
    “isMultiKey”：假，
    “n”：2548，
    “nscannedObjects”：88736，
    “nscanned”：88736，
    “nscannedObjectsAllPlans”：88736，
    “nscannedAllPlans”：88736，
    “scanAndOrder”：假，
    “indexOnly”：假，
    “nYields”：1，
    “nChunkSkips”：0，
    “毫”：1523，
    “索引边界”：{

    },
    “服务器”：“shuhaimac.local:27017”
}

```

```
> db.apps.find({id:/\w{7,16}/i}).count();
2548
> db.apps.find({id:/\w{7,16}/i}).explain();
{
    "cursor" : "BtreeCursor id_1 multi",
    “isMultiKey”：假，
    “n”：2548，
    “nscannedObjects”：2548，
    “nscanned”：88736，
    “nscannedObjectsAllPlans”：2548，
    “nscannedAllPlans”：88736，
    “scanAndOrder”：假，
    “indexOnly”：假，
    “nYields”：0，
    “nChunkSkips”：0，
    “毫”：122，
    “索引边界”：{
        “ID” ： [
            [
                "",
                {

                }
            ],
            [
                /\w{7,16}/i,
                /\w{7,16}/i
            ]
        ]
    },
    “服务器”：“shuhaimac.local:27017”
}

```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-05T20:19:56.580

所以，我希望这会有所帮助。:-) 我遇到了同样的问题——我花了一段时间才让 map-reduce 工作。

```
$response = $Mongo->yourdb->command(array(
    "mapreduce" => "yourcollection",
    "map" => new MongoCode(" function() { emit( this.groupbykey, this.thestring.length ); } "),
    "reduce" => new MongoCode(" function(k, vals) { return Math.max.apply(null, vals); } "),
    "query" => array("groupbykey" => "somevalue"),
    "out" => array("inline" => 0)
)); 
```

响应将保存 map-reduce 结果

```
Array
(
    [results] => Array
        (
            [0] => Array
                (
                    [_id] => groupbykeyvalue
                    [value] => 106
                )

        )

    [counts] => Array
        (
            [input] => 7341
            [emit] => 7341
            [reduce] => 76
            [output] => 1
        )

    [timeMillis] => 189
    [timing] => Array
        (
            [shardProcessing] => 171
            [postProcessing] => 17
        )

    [shardCounts] => Array
        (
            [someshard:27017] => Array 
```

祝你好运，如果您需要不同的变体，请告诉我！

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-01T14:30:24.240

与 SQL 不同，MongoDB 并不真正知道字段的长度。最多在索引时它知道该字段是否低于 1024 字节。

因此，您可能必须修复客户端。你可以在`$where`这里使用 a 但我认为如果你想这样做的话你看错了。

正如@Philipp 所说，您也可以在此处使用和 MR，但您可能再次在这里寻找错误的东西。

MongoDB 中的查询实际上是一个 BSON 文档。因此，查询集的最大长度（取决于您定义为“查询集”的内容）始终为 16MB（目前）。

许多驱动程序提供了一种将结构（散列或字典或其他）编码为 BSON 的方法，允许您判断编码字符串的长度以了解查询的大小。

# vb.net - 水晶报表中的页数

> ID：14647652
> 
> 赞同：2
> 
> 时间：2013-02-01T13:44:23.757
> 
> 标签：vb.net, winforms, .net-4.0, crystal-reports

这与[如何使用 CrystalReportViewer 获取报表的总页数？](https://stackoverflow.com/questions/1306985/how-to-get-total-page-count-for-a-report-using-crystalreportviewer)

我`CrystalReportViewer`在我的`win-from`应用程序中使用。（2011 年水晶报告）

但是是否有任何适当的方法来获取报告包含的总页数？似乎 CrystalReportViewer 不包含任何显示页数的属性。我也确实在谷歌中环顾四周。似乎这个问题没有任何答案。

任何帮助表示感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:54:18.930

是的，找到了答案

```
Dim a As PageView = ReportViewer.Controls(0)
Dim count = a.GetLastPageNumber() 
```

源[控制水晶报表查看器](http://blog.irm.se/blogs/eric/archive/2005/06/06/389.aspx)

# php - PHP SQL查询结果问题与日期

> ID：14647653
> 
> 赞同：1
> 
> 时间：2013-02-01T13:44:27.190
> 
> 标签：php, mysql

我对下面的代码有问题。

由于某种原因，它仅显示 10 月、11 月和 12 月的日期。

日期具有相同的格式......见下文：

```
DATE            RESULT

2013-02-01      Does Not Display
2013-03-01      Does Not Display
2013-04-01      Does Not Display
2013-05-01      Does Not Display
2013-06-01      Does Not Display
2013-07-01      Does Not Display
2013-08-01      Does Not Display
2013-09-01      Does Not Display
2013-10-01      Displays OK
2013-11-01      Displays OK
2013-12-01      Displays OK 
```

下面是查询代码：

```
$events = array();
$query = "SELECT title, DATE_FORMAT(date,'%Y-%m-%d') AS date FROM mytable WHERE user_id = '$session_user_id' AND date LIKE '$year-$month%' AND active = 1";
$result = mysql_query($query,$db_link) or die('cannot get results!');
while($row = mysql_fetch_assoc($result)) {

$events[$row['date']][] = $row;

} 
```

任何人都知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:51:41.757

我猜你正在使用月份 = 1。你只得到 10、11 和 12，因为它们是唯一以 1 开头的月份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:52:16.870

基于@mellamokb 的评论。而不是使用`LIKE`use `BETWEEN`。这也使查询更快。

```
$query = "SELECT title, DATE_FORMAT(date,'%Y-%m-%d') AS date FROM mytable WHERE user_id = '$session_user_id' AND date BETWEEN '$year-$month-1' AND '" . date("Y-m-t", strtotime("$year-$month-1")) . "' AND active = 1"; 
```

# asp.net-mvc - 如何将除一个控制器之外的所有控制器路由到“开始”操作，并将所有其他控制器路由到“索引”？

> ID：14647656
> 
> 赞同：1
> 
> 时间：2013-02-01T13:44:32.180
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我的主要起始页是`ApplicantProfile`，所以我的默认路线如下所示：

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "ApplicantProfile", action = "Start", id = UrlParameter.Optional }
); 
```

此控制器没有公共访问索引，但所有其他控制器都有。我想要的是通配符等价物，例如

```
routes.MapRoute(
    name: "Others",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "*", action = "Start", id = UrlParameter.Optional }
); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:14:42.343

这应该照顾它：

```
routes.MapRoute(
    name: "Default",
    url: "ApplicantProfile/{action}/{id}",
    defaults: new { controller = "ApplicantProfile", action = "Start", id = UrlParameter.Optional }
);

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { action = "Index", id = UrlParameter.Optional }
); 
```

假设您有申请人ProfileController、HomeController 和OtherController，这将导致：

*   /ApplicantProfile → 申请人ProfileController.Start
*   /Other → OtherController.Index
*   /SomeOtherPath → 默认 404 错误页面
*   /→默认404错误页面

有关路由的介绍，请参见[http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs)。它有点旧，但它很好地涵盖了基础知识。

路由发生自上而下，这意味着它在路由表中的第一个匹配项处停止。在第一种情况下，您将首先匹配您的申请者配置文件路由，以便使用控制器。第二种情况从路径中获取 Other，找到匹配的控制器并使用它。最后 2 个没有找到匹配的控制器，并且没有指定默认值，因此返回默认的 404 错误。我建议为错误放置一个适当的处理程序。[在此处](https://stackoverflow.com/a/1288819/173225)和[此处](https://stackoverflow.com/a/7442327/173225)查看答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:36:29.517

这应该根据您的要求工作

```
routes.MapRoute(
    name: "ApplicantProfile",
    url: "ApplicantProfile/Start/{id}",
    defaults: new { controller = "ApplicantProfile", action = "Start", id = UrlParameter.Optional }
);

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

第一个是将您路由到“开始”操作的 url，另一个是默认将“Home”控制器替换为您的默认控制器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T11:33:51.967

默认应该使用启动操作转到配置文件控制器，并且所有其他请求都应该登陆到索引操作，无论控制器是什么。

使用 IRouteConstraint 将约束添加到其他路由的 URL，并将其放置在默认控制器之上，并在控制器的路由上设置约束。

您可以添加一个检查控制器是否不是 ApplicationProfile 使用它。

我希望这有帮助。

# php - 使用 Ajax PHP 的动态表单

> ID：14647658
> 
> 赞同：0
> 
> 时间：2013-02-01T13:44:35.843
> 
> 标签：php, javascript, jquery, ajax

我是第一次使用 ajax。我有一个动态表单，它在单击“添加按钮”时添加了类似的表单，并且每个表单中都有一个字段“获取数据”，用于从数据库中检索各个字段的数据。问题是“获取数据”不适用于所有领域。

```
<style>
        td {
            border: solid 1px lightGrey;
            padding: 0 4px 0 4px;
        }
    </style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>

    <script type="text/javascript">
var count = 0;
$(document).ready(function(){

 $.ajaxSetup ({
                cache: false
            });
                       var loadUrl = "ajaxfunc.php";
            $("#submit").click(function(){
 count += 1;
   $("#result").load(loadUrl,{name:document.getElementById('fields'+count).value},function(responseText){

                });

            });

$(function(){
    $('p#addField').click(function(){
        count += 1;
        $('#fields1').append(
        '<div id="fields">'
                +'<table border="0">'
                        +'<tr>'
                            +'<td width="100">'
                                +'ISBN NO :'
                            +'</td>'
                            +'<td>'
                            +'  <input type="text" id="cIsbn1" name="cIsbn[]"  />'
                            +'</td>'
                            +'<td>'
                                +'<button name="submitit" id="submit' + count + '" type="button" class="btn "  style="float:left;">Get Data</button>'
                            +'</td>'
                        +'</tr>'
                        +'<tr>'
                            +'<td> Book Name:</td>'
                            +'<td> <input type="text" id="bookName' + count + '" name="bookName[]" style="width:200px;"  /> </td>'
                            +'<td> Price : </td>'
                            +'<td> RM<input type="text" id="price' + count + '" name="price[]"  style="width:50px;"/>'
                                +'&nbsp;$<input type="text" id="other_price' + count + '" name="other_price[]"  style="width:50px;" readonly="readonly"/>   </td>'
                        +'</tr>'
                        +'<tr>'
                            +'<td> Quantity :</td>'
                            +'<td><input type="text" id="quantity' + count + '" name="quantity[]" /></td>'
                            +'<td> Discount (in %): </td>'
                            +'<td> <input type="text" id="discount' + count + '" name="discount[]"  /></td>'                        
                        +'</tr>'
                        +'<tr>'
                            +'<td>'
                                +'Net Price :'
                            +'</td>'
                            +'<td>'
                                +'<input type="text" id="netPrice' + count + '" name="netPrice[]" />'
                            +'</td>'
                        +'</tr>'
                        +'<tr>'
                            +'<td>'
                                +'Remarks :'
                            +'</td>'
                            +'<td style="height:45px;">'
                                +'<textarea id="ind_remarks' + count + '" name="ind_remarks[]" style="resize:none; position:absolute;"></textarea>'
                            +'</td>'

                        +'</tr>'

                                   +'</div>'

                    +'</table><hr>'
                    +'</div>');

    });

});});
</script>
        <div id="contentWrapper">
        <?php include('includes/sidebar_left.php');?>

        <div class="content">

                <h2>Add New Customer & Issue Quotation</h2>
                <hr />
                <form id="newBook" action="newBookProcess.php" method="post" enctype="multipart/form-data">

                <table border="0">
                        <tr>
                        <td width="152">Customer Name *</td>
                        <td width="231">:
                                <input class="validate[required] text-input" type="text" name="cName" /></td>
                        <td width="272" rowspan="6"><p>Remarks:</p>
                                <p>
                                <textarea name="remarks" rows="7" cols="33" style="resize:none;"></textarea>
                            </p></td>
                    </tr>
                        <tr>
                        <td>Address</td>
                        <td> :
                                <input type="text" name="cAddress1" /><br />
                                : <input type="text" name="cAddress2" /></td>
                    </tr>
                        <tr>
                        <td>Telephone </td>
                        <td>:
                                <input type="text" name="cTelephone" /></td>
                    </tr>
                        <tr>
                        <td>Fax</td>
                        <td>:
                                <input type="text" name="cFax" /></td>
                    </tr>

                    </table>
                <hr />
                <p style="width:100%;">
                <h2 style="font-size:16px;">Add Book To Quotation </h2>

                <p id="addField" style="border:none; background:none; width:100%;cursor:pointer; right:0; float:right;"><img src="images/addNew.png" width="100" style="border:none;"/> <p>

                <hr />
                </p>
                <div id="fields1">

                    <table border="0">
                        <tr>
                            <td width="100">
                                ISBN NO :
                            </td>
                            <td>
                                <input type="text" name="cIsbn[]" id="cIsbn"  />
                            </td>
                            <td>
                                <button name="submitit" id="submit2" type="button" class="btn "  style="float:left;">Get Data</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Book Name:
                            </td>
                            <td>
                                <input type="text" name="bookName[]" style="width:200px;"  />
                            </td>
                            <td>
                                Price :
                            </td>
                            <td>
                                RM<input type="text" name="price[]"  style="width:50px;"/>
                                &nbsp;$<input type="text" name="other_price[]"  style="width:50px;" readonly/>

                            </td>
                        </tr>
                        <tr>
                            <td>
                                Quantity :
                            </td>
                            <td>
                                <input type="text" name="quantity[]" />
                            </td>
                            <td>
                                Discount (in %):
                            </td>
                            <td>
                                <input type="text" name="discount[]"  />
                            </td>

                        </tr>
                        <tr>
                            <td>
                                Net Price :
                            </td>
                            <td>
                                <input type="text" name="netPrice[]" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Remarks :
                            </td>
                            <td style="height:45px;">
                                <textarea name="ind_remarks[]" style="resize:none; position:absolute;"></textarea>
                            </td>
                            <td>
                                <button id="addField">Add New </button>
                            </td>
                        </tr>
                    </table> 
                <hr />
                </div>

                <p>
                        <input type="submit" value="Add Book" style="cursor:pointer;" />
                        <input type="reset" style="cursor:pointer;" /> <span class="req">* required fileds</span>
                    </p>
            </form>
            <div id="result" style="overflow:hidden;" >

                                    </div>
            </div>
    </div>
    </div>
<?php include('includes/footer.php');?> 
```

上面的代码是我的代码。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:51:16.587

首先，`id`元素的属性值必须是唯一的；它是一个标识符，如果您有多个具有相同`id`. 改用一个类。

现在，当您`$('#submit')`在 jQuery 代码中执行此操作时，只会选择执行代码时页面上存在的元素。而且，因为它是一个 ID 选择器，所以它最多只能选择一个元素。

如果要将事件处理程序绑定到页面加载后添加的元素，则需要使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)：

```
$('#fields1').on('click', '.submit-button', function(e) {
    count += 1;
    $("#result").load(loadUrl,{name:document.getElementById('fields'+count).value});
}); 
```

请注意，我已经删除了空回调函数；如果你不想在其中做任何事情，那么你不需要传递它——它是一个可选参数。我还用作`.submit-button`调用的选择器`.on()`；我假设`id="submit"`您将使用`class="submit-button"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T13:19:11.597

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){

 $.ajaxSetup ({
                cache: false
            });
             var loadUrl = "ajaxfunc.php";
            var count=1

            $("button").live('click', function(){
   $("#result").load(loadUrl,{name:document.getElementById('fname1').value, email:document.getElementById('mytext').value, id:document.getElementById('id'+count).value },function(responseText){

                count=count+1;
                });

            });

});

 $(document).ready(function(){

    var i = $('input').size() + 1;
     var count=1
    $('#add').click(function() {
        $('<div><input type="text" id="fname'+count+'"   /><input type="text" id="id'+count+'"  /><button  id="submit'+count+'" type="button"  style="float:left;">Submit'+count+'</button><div id="result" style="font-size:0px;width:30px;overflow:hidden;" ></div></div>').fadeIn('slow').appendTo('#form');
       var bj = count;
        count = count+1;

      var test = bj;
document.getElementById("mytext").value = test;

    });

});
function printIt(){
   var sj = document.getElementById('mytext').value;
   alert(sj);

}
</script>

</script>
<a href="#" id="add">Add </a>
<form id="contact" action="" method="post" enctype="multipart/form-data" >

<div id="form"></div>

                        <div id="printHere"></div>
                        <input type="hidden" name="countC" id="mytext" />
        <input type=button value="Get Value" onclick="printIt()" />

</form> 
```

# .net - 将 Action 委托用作内联函数是一种好习惯吗？

> ID：14647668
> 
> 赞同：1
> 
> 时间：2013-02-01T13:45:18.730
> 
> 标签：.net, delegates, action, inline

我经常有一些重复的代码。

通常，我将它们放在一个函数中，但有时我讨厌这样做，因为：

*   它需要太多参数
*   代码通常只针对整体的一小部分。所以我终于有了两三个只用在一个地方的功能。

因此，为了模拟 C# 中缺少的内联代码，我使用 Action 委托：

```
public void Display(DateTime from, DateTime to)
{
    var start = from.ToOADate();
    var end = to.ToOADate();

    [...]

    // This Action delegate helps me not to repeat the code.
    var removePoints = new Action<Series>(serie =>
    {
        var pointsToRemove = serie.Points.Where(pt => pt.XValue < start || pt.XValue > end).ToArray();

        foreach (var pt in pointsToRemove)
            serie.Points.Remove(pt);
    });

    removePoints(FlameTemperatureSerie);
    removePoints(BoshGasFlowRateSerie);
    removePoints(PercCOSerie);
    removePoints(PercH2Serie);

    [...]
} 
```

这很有帮助，尤其是因为 Action 委托执行上下文可以使用局部变量。

我对我来说似乎很好，但我从未见过 Action 代表以这种方式使用过任何地方。这就是为什么我想知道是否可以推荐这种做法，或者是否会导致我不知道的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:47:20.430

只要它不会变得太混乱，就没有错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-30T16:48:33.237

如果它使代码更易于阅读和维护，那么拥有一个只调用一次的函数是完全有效的。

# php - 优化 PHP Cron Job 的更好方法

> ID：14647669
> 
> 赞同：1
> 
> 时间：2013-02-01T13:45:27.747
> 
> 标签：php, web-services, soap, asynchronous, cron

我不能谈太多细节，因为这是一个工作项目，但无论如何..

我正在用 PHP 编写一个 SOAP 客户端，它将所有响应推送到 MySQL 数据库。我的主脚本发出一个初始soap 请求，该请求检索大量项目（目前大约有4000 个，但预计该列表在某个时候会增长到数十万个）。

一旦返回了 4000 个项目的列表，我使用 exec("/usr/bin/php path/to/my/historyScript.php &") 为每个项目发送历史请求。Web 服务 api 最多支持 30 个请求/秒。下面是我目前正在做的一些伪代码：

```
$count = 0;

foreach( $items as $item )
{
    if ( $count == 30 )
    {
      sleep(1); // Sleep for one second before calling the next 30 requests
      $count = 0;
    }

    exec('/usr/bin/php path/to/history/script.php &');
    $count++;
} 
```

我遇到的问题是我不确定进程何时完成并且我的开发服务器开始崩溃。由于预计数据会增长，我知道这对我的问题来说是一个非常糟糕的解决方案。

对于这样的任务，我应该考虑使用更好的方法吗？我只是觉得这更像是一个“黑客”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:19:11.910

我不确定，但我觉得您的应用程序崩溃的原因是您在 PHP 变量中保留了大量数据。调查一下，根据 RAM 大小，这个（数据大小）会导致系统崩溃。我的建议是尝试限制每个请求从外部服务传入的数据，而不是对服务的请求数。

# c# - Fluent NHibernate 不会创建 WHERE 子句的 IN 部分

> ID：14647670
> 
> 赞同：6
> 
> 时间：2013-02-01T13:45:37.577
> 
> 标签：c#, sql, nhibernate, fluent

我有 Fluent NHibernate Linq 查询，我在其中检查基于运行时数组的值。一个基本的例子是这样的：

```
var array = [1,2,3,4,5,6];
using (var session = SessionProvider.SessionFactory.OpenSession())
{
  return session.Query<MyObject>().Where(x => array.Contains(x.CompareVal)).ToList();
} 
```

我希望生成的 SQL 语句看起来像这样：

```
SELECT CompareVal, Column1, Column2
FROM MyObject
WHERE CompareVal IN (1,2,3,4,5,6) 
```

但是，我发现生成的 SQL 语句只是发出 WHERE 子句（通过在 Profiler 中观察证明）并选择整个表，然后似乎在获取所有数据后在内存中运行过滤器。

需要注意的一点 - 我有一个 Generic Repository 类，所有这些调用都通过它汇集。查询方法如下：

```
public IList<T> Query(Func<T, bool> criteria)
{
  using (var session = SessionProvider.SessionFactory.OpenSession())
  {
    return session.Query<T>().Where(criteria).ToList();
  }
} 
```

显然，这（缺少 where 子句）在具有大量数据的表中是不可接受的。我可以做些什么来强制 NHibernate 使用 WHERE 子句正确生成查询并仍然为存储库保留通用模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:54:22.707

如果您将 Query 方法更改为以下内容，是否会有所不同？

```
public IList<T> Query(Expression<Func<T, bool>> criteria)
{
  using (var session = SessionProvider.SessionFactory.OpenSession())
  {
    return session.Query<T>().Where(criteria).ToList();
  }
} 
```

* * *

这就是我通常使用通用查询的方式：

```
 public List<TOut> GetEntitiesLinq<TIn,TOut>(Expression<Func<IQueryable<TIn>,IQueryable<TOut>>> myFunc)
    {
        var t = (myFunc.Compile())(_session.Query<TIn>()) ;
        return t.ToList();
    } 
```

那么我将如何在您的情况下使用它：

```
var myObjList = myQueryManager.GetEntitiesLinq<MyObject,MyObject>(x=>x.Where(myObj => array.Contains(myObj.CompareVal))); 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:32:28.487

使用任何：

```
 return session.Query<MyObject>().Where(x => array.Any(y => y == x.CompareVal)).ToList(); 
```

您的存储库模式（使用普通 Func）会自动将您的查询具体化以列出，如果您希望延迟执行某些内容，请使用 IQueryable，不要仅使用 Func

> 需要注意的一点 - 我有一个 Generic Repository 类，所有这些调用都通过它汇集。查询方法如下：

```
public IList<T> Query(Func<T, bool> criteria)
{
  using (var session = SessionProvider.SessionFactory.OpenSession())
  {
    return session.Query<T>().Where(criteria).ToList();
  }
} 
```

您的存储库只是模仿 NHibernate 开箱即用的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:30:07.427

您可以改用 QueryOver 和 WhereRestrictionOn 吗？

```
session.QueryOver<MyObject>().WhereRestrictionOn(o => o.CompareVal).IsIn(array).List(); 
```

# ios - 缩放后图像未在 ScrollView 中居中

> ID：14647674
> 
> 赞同：0
> 
> 时间：2013-02-01T13:45:51.163
> 
> 标签：ios, objective-c, xamarin.ios

我正在尝试将 imgView 居中在 scrollView 中，这样当我放大时，它将保持正确居中（如照片应用程序）。

当屏幕第一次加载时，它是居中的。当我捏合并开始缩放时，位置会自行调整，因此图像不再居中。查看捏合/缩放照片之前和之后。红色是滚动视图的背景颜色。

![缩放前](../Images/fc0c4ca1ebfaf900fa452b8319fcf631.png)

![缩放后](../Images/93fe6de983f5a3b17ba2636afa6b8a6e.png)

这是我用来创建 imgView 并在滚动视图中居中的代码。（MonoTouch，但应该很容易转换为 Obj-C）

private void LoadPageContent(int page) { //TODO: 代码放在这里加载图像或你想在这个面板/页面上显示的任何内容

```
 //Each page will have it's own scrollview for scrolling and zooming that image on the page
        var panelScrollView = new UIScrollView();
        _panels.Add (panelScrollView);

        panelScrollView.CanCancelContentTouches=false;
        panelScrollView.ClipsToBounds = true; 

        panelScrollView.MinimumZoomScale = 1f;
        panelScrollView.MaximumZoomScale = 50.0f;
        panelScrollView.MultipleTouchEnabled = true;

        panelScrollView.ScrollEnabled = true;
        panelScrollView.UserInteractionEnabled=true;
        var ui = new UIImage (_assetImages[page], 1.0f, UIImageOrientation.Up);

        UIImageView imgView = new UIImageView(ui);

        panelScrollView.Frame = new RectangleF(scrollView.Frame.Width * (_numberOfPanels - 1),
                                               0,
                                               _pageWidthPortrait,
                                               scrollView.Frame.Height);

        panelScrollView.BackgroundColor = UIColor.Red;

        //scale down image to get proper fitted imgview dimensions
        float nPercentW = (panelScrollView.Frame.Width / (float)imgView.Image.Size.Width);
        float nPercentH = (panelScrollView.Frame.Height / (float)imgView.Image.Size.Height);
        float newPercent;
        if (nPercentH >= nPercentW)
        {
            //wider than it is tall
            newPercent = nPercentW;
        }
        else{
            //taller than it is wide..
            newPercent = nPercentH;
        }
        int newWidth1 = Convert.ToInt32(imgView.Image.Size.Width * newPercent);
        int newHeight = Convert.ToInt32(imgView.Image.Size.Height * newPercent);

        panelScrollView.ViewForZoomingInScrollView += (UIScrollView sv) => { 
            return imgView; 
        };

        imgView.Frame = new RectangleF(0,0,newWidth1, newHeight);
        imgView.Center = new PointF(panelScrollView.Frame.Width /2,
                                    (panelScrollView.Frame.Height/2));

  //ScaleToFill and ScaleAspect fit - i used scaleaspectfit and it had the same problem
  //I tried scaletofill but resizing the imgView to fit the proper view dimensions so it is like an aspect fit, but same problem
        imgView.ContentMode=UIViewContentMode.ScaleToFill;//ScaleAspectFit;
        imgView.UserInteractionEnabled=true;

        panelScrollView.ContentSize = imgView.Image.Size;

        panelScrollView.DidZoom += (object sender, EventArgs e) => {

    };

    panelScrollView.AddSubview(imgView);
    scrollView.AddSubview(panelScrollView);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:23:53.273

这对我来说很好用

```
- (void)centerScrollViewContents {

CGSize boundsSize = ScrollView.bounds.size;
CGRect contentsFrame = ImageView.frame;

if (contentsFrame.size.width < boundsSize.width) {
    contentsFrame.origin.x = (boundsSize.width - contentsFrame.size.width) / 2.0f;
} else {
    contentsFrame.origin.x = 0.0f;
}

if (contentsFrame.size.height < boundsSize.height) {
    contentsFrame.origin.y = (boundsSize.height - contentsFrame.size.height) / 2.0f;
} else {
    contentsFrame.origin.y = 0.0f;
}

ImageView.frame = contentsFrame; 
```

}

你必须调用这个方法

```
- (void)scrollViewDidZoom:(UIScrollView *)scrollView 
```

# matlab - 任意轴上的圆顶旋转？

> ID：14647679
> 
> 赞同：0
> 
> 时间：2013-02-01T13:46:07.197
> 
> 标签：matlab, 3d, rotation, linear-algebra

想象一个圆顶，其中心在 +z 方向。我想要做的是将圆顶的中心移动到不同的轴（例如 20 度 x 轴、20 度 y 轴、20 度 z 轴）。我怎样才能做到这一点 ？任何提示/提示都有帮助。

添加更多信息：

一段时间以来，我一直在 wiki 中涉足旋转矩阵。问题是，它不是交换操作。RxRyRz 与 RzRyRx 不同。因此，根据我的倍数方式，我得到了不同的最终结果。例如，我希望我的最终投影与原始 X 轴成 20 度，与原始 Y 轴成 20 度，与原始 Z 轴成 20 度。根据矩阵，给定 alpha、beta、gamma 值 20（或其对应的弧度）不会导致预期的旋转。我错过了什么吗？有没有一个矩阵可以让我把预期的角度放在最后？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:11:09.253

使用[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix)是旋转 (x,y,z) 点集合的简单方法。[您可以使用一般旋转](http://en.wikipedia.org/wiki/Rotation_matrix#General_rotations)部分中的方程式计算您的情况的旋转矩阵。请注意，找出插入这些方程的角度值可能很棘手。把它想象成一次绕一个轴旋转，记住你的旋转顺序（乘法顺序）确实很重要。

一般旋转方程的替代方法是[从轴和角度计算旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix#Rotation_matrix_from_axis_and_angle)。使用此方法定义正确的参数可能更容易。

**更新：**阅读维基百科后，我找到了一种计算两个向量之间的旋转轴和角度的简单方法。只需在此处填写您的开始和结束`a`向量`b`：

```
a = [0.0 0.0 1.0];
b = [0.5 0.5 0.0];
vectorMag = @(x) sqrt(sum(x.^2));
rotAngle = acos(dot(a,b) / (vectorMag(a) * vectorMag(b)))
rotAxis = cross(a,b)

rotAxis =
    -0.5          0.5            0
rotAngle =
    1.5708 
```

# ruby-on-rails - 在 Rails 上使用单独的身份验证模型

> ID：14647681
> 
> 赞同：12
> 
> 时间：2013-02-01T13:46:13.207
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, omniauth

我有一个简单的解决方案，我用以下对象制作了自己：

*   **帐户**（具有令牌字段，在身份验证时返回并在 API 调用中使用）
*   **身份验证**（具有 auth_type/auth_id 和对帐户的引用）

我有一个单独的**身份验证**模型，能够连接多种登录方式（设备 UUID、电子邮件/密码、推特、脸书等）。但似乎在设计的所有示例中，您都在**用户**（**帐户**）模型上使用它。

是不是不太灵活？例如 OmniAuth 模块在**User**模型上存储 provider 和 id，如果您希望能够同时从 Twitter 和 Facebook 登录会发生什么，只有一个 provider 的空间？

我应该在我的**Account**模型还是**Authentication**模型上使用 Devise？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T15:40:06.920

最近一直在做一个项目，我正在使用 Devise 为不同的服务保留用户的令牌。有点不同的情况，但你的问题仍然让我思考了一段时间。

无论如何，我都会将 Devise 绑定到**Account模型。**为什么？让我们来看看。

由于我的电子邮件是唯一可以将我识别为用户的东西（并且您将**帐户**称为用户），我会将其`accounts`与密码配对放在表中，以便我最初能够使用基本的电子邮件/密码身份验证. 此外，我会将 API 令牌保存在`authentications`.

正如您所提到的，OmniAuth 模块需要存储提供者和 id。如果您希望您的用户能够同时连接到不同的服务*（并且出于某种原因您这样做）*，那么显然您需要将两个 provider-id 对保存在某个地方，否则每次单个用户都会简单地覆盖一个认证。这将我们引向**Authentication**模型，该模型已经适合该模型并引用了**Account**。

因此，在寻找提供者 ID 对时，您要检查`authentications`table 而不是`accounts`. 如果找到一个，您只需返回一个`account`与之关联的。如果没有，那么您检查是否存在包含此类电子邮件的帐户。如果答案是肯定的，则创建新`authentication`的，否则创建一个然后`authentication`为它创建。

更加具体：

```
#callbacks_controller.rb
controller Callbacks < Devise::OmniauthCallbacksContoller
  def omniauth_callback
    auth = request.env['omniauth.auth']
    authentication =  Authentication.where(provider: auth.prodiver, uid: auth.uid).first
    if authentication
      @account = authentication.account
    else
      @account = Account.where(email: auth.info.email).first
      if @account
        @account.authentication.create(provider: auth.provider, uid: auth.uid,
         token: auth.credentials[:token], secret: auth.credentials[:secret])
      else
        @account = Account.create(email: auth.info.email, password: Devise.friendly_token[0,20])
        @account.authentication.create(provider: auth.provider, uid: auth.uid,
         token: auth.credentials[:token], secret: auth.credentials[:secret])
      end
    end
    sign_in_and_redirect @account, :event => :authentication
  end
end

#authentication.rb
class Authentication < ActiveRecord::Base
  attr_accessible :provider, :uid, :token, :secret, :account_id
  belongs_to :account
end

#account.rb
class Account < ActiveRecord::Base
  devise :database_authenticatable
  attr_accessible :email, :password
  has_many :authentications
end

#routes.rb
devise_for :accounts, controllers: { omniauth_callbacks: 'callbacks' }
devise_scope :accounts do
  get 'auth/:provider/callback' => 'callbacks#omniauth_callback'
end 
```

这应该给你你需要的东西，同时保持你想要的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:24:22.977

您可以将所有常见逻辑分离到模块并仅使用同一张表。

```
module UserMethods
  #...
end

class User < ActiveRecord::Base
  include UserMethods
  devise ...

end  

class Admin < ActiveRecord::Base
  include UserMethods
  self.table_name = "users"
  devise ...
end 
```

并在路由、视图中分别配置所有设计模型（如有必要，请参阅配置视图）。在这种情况下，您可以轻松处理所有不同的逻辑。

另请注意，如果您认为设计仅适用于用户模型，那么您就错了。

例如。-`rails g devise Admin`

这将为管理模型创建设计。

更多信息[在这里](https://github.com/plataformatec/devise/wiki/How-To%3a-Add-an-Admin-role)。

# c++ - (*ptr).f() 和 ptr->f() 有什么区别？

> ID：14647683
> 
> 赞同：2
> 
> 时间：2013-02-01T13:46:19.043
> 
> 标签：c++, c++, pointers

> **可能重复：**
> [C++ - (*) 之间的差异。和->？](https://stackoverflow.com/questions/2470255/c-difference-between-and)

这有什么区别：

```
(*ptr).f(); 
```

和这个：

```
ptr->f(); 
```

在[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")中，ptr 是指向具有函数的 C++ 类的指针`f`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T13:47:09.700

根本没有区别。`(*ptr).f();`是更丑陋的方法。

[实际上，如果`ptr`是一些智能指针及其`operator*`和`operator->`被重载并执行一些副作用，那么您可能对此有问题。但这确实是非常糟糕的事情。它和邪恶一样`#define true false`]

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-01T13:50:02.890

如果`ptr`是普通指针，那么两者是等价的。是取消引用指针（相当于）和访问被取消引用对象的成员（相当于 ）`ptr->f`的捷径。`(*ptr)``.f`

如果`ptr`是一个重载`operator->`和的类`operator*`，那么它们将各自调用不同的运算符重载，因此可能具有不同的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:48:41.330

除了风格/打字差异外，没有任何区别。这与使用指向结构或类的指针时的`(*ptr).member = 7;`vs完全相同。`ptr->member = 7;`

# c++ - 如何在 Windows Phone 8 中获取软件包名称

> ID：14647687
> 
> 赞同：1
> 
> 时间：2013-02-01T13:46:28.450
> 
> 标签：c++, visual-c++, windows-runtime, windows-phone-8

我遇到了一个小问题。我需要获取 WP8 包名称（使用 c++），但是当我使用[记录](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.packageid.aspx)的函数时，我只会得到未实现的异常。

```
Windows::ApplicationModel::Package^ package = Windows::ApplicationModel::Package::Current;
Windows::ApplicationModel::PackageId^ packageId = package->Id;
Platform::String^ output = "Name: \"" + packageId->Name + "\"\n" 
```

这应该可以，但是属性*package->Id*在 WP8 中不可用，尽管支持的最低手机是 Windows Phone 8。例如*fullName*属性已说明这在 WP8 API 中未实现。

你能帮助我吗？谢谢

PS 这个功能在 Windows Store 应用中运行良好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-27T15:37:42.477

您可以尝试使用以下代码在**C++中获取 PackageId**

```
Windows::ApplicationModel::PackageId^ packageId = Windows::Phone::Management::Deployment::InstallationManager::FindPackagesForCurrentPublisher()->First()->Current->Id;
Platform::String^ output = "Name: \"" + packageId->Name + "\"\n" 
```

**C＃**

```
Windows.Phone.Management.Deployment.InstallationManager.FindPackagesForCurrentPublisher().First().Id 
```

[FindPackagesForCurrentPublisher()](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.management.deployment.installationmanager.findpackagesforcurrentpublisher%28v=vs.105%29.aspx)返回的包似乎已经实现了 `Current->Id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:42:38.237

正如文档所述，并非所有属性都在 WP8 上实现，并且您已经找到了。这在 MSDN 上有点令人困惑，因为在某些情况下，表格说 API 可用，但上面的注释说它没有在 WP8 上实现。

它看起来`FullName`不可用，但`Name`可用。`ProductId`如果需要，您还可以使用一个仅限 Windows Phone 的属性来唯一标识您的应用程序。

# javascript - 如何通过“外键”关系组合json对象

> ID：14647694
> 
> 赞同：2
> 
> 时间：2013-02-01T13:46:55.890
> 
> 标签：javascript, json

我有两个对象从两个不同的休息资源返回。

```
{
"id": 1,
"username": "jdoe"
}

{
"role_id": 1,
"role": "developer",
"members": [
    1,
    3,
    5
]
} 
```

我想使用普通的 ole javascript 将这两个对象组合成一个对象，其中 id 在 members 数组中，这样我就可以得到一个对象，比如将角色作为顶部节点，然后在下面列出该角色的用户。

轻松搞定？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:01:22.203

几周前我遇到了一个类似的问题，我想将一组 10 个 AJAX 调用组合在一起。一个简单的方法是根据这些`id`值创建一个查找表，然后使用该查找表来组合结果。这是一个使用多个用户和多个角色的示例：

```
var users = [
    { "id": 1, "username": "jdoe" },
    { "id": 3, "username": "dbob" },
    { "id": 5, "username": "jske" }
];
var roles = [
    { "role_id": 1, "role": "developer", "members": [1,3,5] },
    { "role_id": 2, "role": "admin", "members": [5] }
];

// create lookup table
for (var i = 0; i < users.length; i++)
    users.lookup[users[i].id] = users[i];

// populate members from users with lookup table
for (var i = 0; i < roles.length; i++)
    for (var j = 0; j < roles[i].members.length; j++)
        roles[i].members[j] = users.lookup[roles[i].members[j]]; 
```

现在角色中的成员是对用户的引用，而不仅仅是 id：

```
[
  { "role_id": 1, "role": "developer", "members":
    [{ "id": 1, "username": "jdoe" },
     { "id": 3, "username": "dbob" },
     { "id": 5, "username": "jske" }] },
  { "role_id": 2, "role": "admin", "members": 
    [{ "id": 5, "username": "jske" }] }
] 
```

您可以像这样引用角色中的用户名：

```
for (var i = 0; i < roles[0].members.length; i++)
    alert(roles[0].members[i].username); 
```

演示：http: [//jsfiddle.net/2aqR5/1/](http://jsfiddle.net/2aqR5/1/)

# c# - 解析“DateTime.Now”？

> ID：14647703
> 
> 赞同：4
> 
> 时间：2013-02-01T13:47:17.483
> 
> 标签：c#, string, parsing, datetime

我需要翻译这样的字符串：

```
"DateTime.Now.AddDays(-7)" 
```

转化为它们的等价表达式。

我只对 DateTime 类感兴趣。.Net 中是否有任何内置功能可以帮助我做到这一点，或者我只需要编写自己的小解析器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:51:51.280

您可以使用[FLEE](http://flee.codeplex.com/)为您进行表达式解析。下面的代码在 Silverlight 中经过测试和工作（我相信在完整的 C# 中，创建表达式的语法可能略有不同，但无论如何它可能完全像这样工作）

```
ExpressionContext context = new ExpressionContext();

//Tell FLEE to expect a DateTime result; if the expression evaluates otherwise, 
//throws an ExpressionCompileException when compiling the expression
context.Options.ResultType = typeof(DateTime);

//Instruct FLEE to expose the `DateTime` static members and have 
//them accessible via "DateTime".
//This mimics the same exact C# syntax to access `DateTime.Now`
context.Imports.AddType(typeof(DateTime), "DateTime");

//Parse the expression, naturally the string would come from your data source
IDynamicExpression expression = ExpressionFactory.CreateDynamic("DateTime.Now.AddDays(-7)", context);

//I believe there's a syntax in full C# that lets you evaluate this 
//with a generic flag, but in this build, I only have it return type 
//`Object` so we cast (it does return a `DateTime` though)
DateTime date = (DateTime)expression.Evaluate();

Console.WriteLine(date); //January 25th (7 days ago for me!) 
```

# google-analytics - 谷歌分析平均访问时长下降

> ID：14647706
> 
> 赞同：0
> 
> 时间：2013-02-01T13:47:31.737
> 
> 标签：google-analytics

最近 2 天，我网站的平均访问时长在 Audience>Overview 窗口中从大约 1:30 下降到 50 秒，在 Content>Overview 窗口中从 2:00 下降到 1:30。访问时长参数长期具有稳定值。该网站 (www.rapidtables.com) 似乎运行良好。托管服务器活动历史图表似乎正常。所有其他分析参数（访问和页面/访问）似乎正常。为什么访问持续时间在 Audience>Overview 和 Content>Overview 窗口中不同？什么可能导致持续时间参数突然下降？（分析错误/旧的 urchin.js 用法...）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:00:40.540

你有历史数据可以比较吗？如果是这样，这是它发生的第一年，还是你每年都看到这个时候的下降？如果您已经完全验证了您的跟踪代码或您的网站总体上没有任何问题，那么它归结为猜测。您只需要研究您的网站所服务的行业并寻找可能导致它的原因。也许一些新的竞争对手开店？也许您提供的任何产品或服务都是“季节性的”？

# wordpress - 用于将 CSS/JS 插入帖子的 Wordpress 插件

> ID：14647707
> 
> 赞同：0
> 
> 时间：2013-02-01T13:47:35.723
> 
> 标签：wordpress

找遍了七海，都没有找到我想要的简单插件。我敢肯定我以前见过它——而且看起来非常有用。

我记得，每个帖子/页面的编辑页面上都有一个框，我可以在其中编写一些 javascript 或 css，它只会插入该页面的头部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T19:39:14.573

这里回复晚了，但我认为你在谈论[插入 Javascript 和 CSS](http://wordpress.org/plugins/insert-javascript-css/)插件

# css - 试图让我的 div 居中。我究竟做错了什么？

> ID：14647710
> 
> 赞同：0
> 
> 时间：2013-02-01T13:47:37.407
> 
> 标签：css, html

CSS

```
div.browseBuildsArea-pro {
float: left; 
position: relative;
width: 790px; 
height: 90px; 
background-image:url('images/builds/builds-bg-pro.jpg'); 
background-repeat:no-repeat;
}

div.browseBuildsArea-pro img.champion {
float: left;
display: block;
height: 72px;
margin-left: 14px;
margin-top: 7px;
border-radius: 9px;
-moz-border-radius: 9px;
-khtml-border-radius: 9px;
-webkit-border-radius: 9px;
}

div.browseBuildsArea-pro div.build-poster {
float: left;
display: block;
margin-left: 10px;
margin-top: 10px;
}

div.progress-for-build-listing {
float: left;
width: 250px; 
margin-left: 400px;
margin-top: 0px;
} 
```

HTML

```
<div class="browseBuildsArea-pro">
<img class="champion" src="<%THEME%>images/lol/avatars/2.png">

<div class="build-poster">
    Test Message
</div>

<div class="progress progress-for-build-listing">
    <div class="progress-bar" style="width: 100%;"></div>
</div>
</div> 
```

我想要实现的是基本的。

我希望“测试消息”内容自动对齐到 div 的中间。（不管字符串的长度）此外，右侧的“进度条”和其他 div 也应该自动居中到中间。

这是我正在寻找的内容的预览。 ![http://imgur.com/TAA7t3M](../Images/5dd0ac357a64edab2db0ee1dcc34c6f5.png) （div 和 div 内的内容都会自动对齐到中间。）

尝试了几件事，但都没有奏效。（例如显示：表格单元格；）我怎样才能做到这一点？一个小例子会让我继续前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:53:20.417

要在中间对齐文本，您的 CSS 中需要 2 个参数。

```
display:table-cell;
vertical-align:middle; 
```

此外，您的 div 缺少高度。你必须添加它来对齐它。对于您的代码，它将是：

```
div.browseBuildsArea-pro div.build-poster {
float: left;
display:table-cell;
vertical-align:middle;
height:72px;
text-align:center; // if you also want it to align in the middle horizontally
margin-left: 10px;
margin-top: 10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:02:34.590

对于垂直对齐检查这篇文章： http: [//phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

并利用我从上述文章中看到的内容：http: [//jsfiddle.net/tf7Cb/](http://jsfiddle.net/tf7Cb/)

如果您需要，这用于水平居中：

```
div.browseBuildsArea-pro div.build-poster {
   float: left;
   display: block;
   margin-left: 10px;
   margin-top: 10px;
   text-align: center;
} 
```

# amazon - 如何根据一组单词进行 Amazon Associates 图书推荐？

> ID：14647718
> 
> 赞同：0
> 
> 时间：2013-02-01T13:48:05.060
> 
> 标签：amazon, recommendation-engine, words

我有一个网站，它的头条新闻涵盖了从建筑到小工具到海洋到机器人的广泛主题。我想根据与当前主题相关的一组单词在每个页面上放置一个亚马逊书籍推荐。

因此，例如，海洋页面可能有单词 [鲨鱼、海洋、珊瑚、海洋...]。我想要一个小部件，它会根据那组单词推荐一本或多本书籍。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:10:49.427

我建议您看一下 ItemSearch 操作，该操作可通过 Amazon 的 Product Advertising API 获得。要获取有关鲨鱼的书籍，请求如下所示：

```
http://webservices.amazon.com/onca/xml?
Service=AWSECommerceService&
AWSAccessKeyId=[AWS Access Key ID]&
Operation=ItemSearch&
Keywords=Shark&
SearchIndex=Books
&Timestamp=[YYYY-MM-DDThh:mm:ssZ]
&Signature=[Request Signature] 
```

这将返回一个 XML 响应，其中包含与您的关键字相关的书籍列表：

```
<TotalResults>200</TotalResults>
<TotalPages>20</TotalPages>
<Item>
    <ASIN>0691120722</ASIN>
    <ItemAttributes>
         <Title>Sharks of the World</Title>
         ...
    </ItemAttributes>
</Item>
<Item>
    <ASIN>1604330074</ASIN>
    <ItemAttributes>
        <Title>The Shark Handbook</Title>
        ...
    </ItemAttributes>
</Item> 
```

然后，您应该可以毫无问题地解析该响应并为您的页面创建链接。

# android - Android MapView (google maps) v1 focus by Locale or country name

> ID：14647719
> 
> 赞同：0
> 
> 时间：2013-02-01T13:48:09.757
> 
> 标签：android, google-maps, android-mapview, locale, country

当您在浏览器中访问 Google 地图时，您可以输入一个国家名称，然后地图就会以该国家/地区为中心。是否有可能在 MapView 上得到这个？如果位置不可用，我希望我的 MapView 最初专注于用户所在的国家/地区。

编辑：这是我到目前为止所拥有的：

```
private MapView mvClear;
private MyLocationOverlay compass;
private MapController controller;

@Override
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_clear_map);

   mvClear = (MapView) findViewById(R.id.mvClear);
   mvClear.setBuiltInZoomControls(true);

   TouchOverlay touchOverlay = new TouchOverlay();
   List<Overlay> overlays = mvClear.getOverlays();
   overlays.add(touchOverlay);

   compass = new MyLocationOverlay(this, mvClear);
   overlays.add(compass);

   controller = mvClear.getController();
   controller.setZoom(8);

   Geocoder coder = new Geocoder(this);
   try {
       List<Address> address = coder.getFromLocationName(Locale.getDefault().getCountry(), 1);
       int lat = (int) address.get(0).getLatitude();
       int lon = (int) address.get(0).getLongitude();
       GeoPoint point = new GeoPoint(lat, lon);
       controller.setCenter(point);
   } catch (IOException e) {
       e.printStackTrace();
   }
} 
```

没有重点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:52:56.767

我发现的最佳解决方案是将默认中心点保存为字符串资源，以便在应用程序本地化时可以“翻译”它。暂时就是这样。。

# php - 将sql放入变量中

> ID：14647721
> 
> 赞同：0
> 
> 时间：2013-02-01T13:48:17.883
> 
> 标签：php

在 mysql_query 中给出了两行，我希望每一行都放入一个变量 $date1 和 $date2。我的示例代码如下。

```
while($row=mysql_fetch_array($sql)) {
  $date1 = $row['TheDate'];
  $date2 = $row['TheDate'];
}
echo $date1;
echo $date2; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:52:15.567

虽然我不知道你为什么要拥有`$date1`而`$date2`不是`$date`作为两个元素的数组，但这是一种方法：

```
$i = 1;
while($row=mysql_fetch_assoc($sql)){
    ${"date".$i} = $row['TheDate'];
    $i++;
}
echo $date1;
echo $date2; 
```

一种正确的方法是将它们分配到一个数组中并像这样访问数据：

```
while($row=mysql_fetch_assoc($sql)){
    $date[] = $row['TheDate'];
}
echo $date[0];
echo $date[1]; 
```

要比较这两个日期，您可以执行以下操作：

```
$difference = $date2- $date1; 
```

或在数组方法中：

```
$difference = $date[1] - $date[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:54:46.730

我认为这就是你所需要的。

```
$dates = array();
$allData = array();
while($row=mysql_fetch_array($sql)){ // switch to mysqli or PDO
    $dates[] = $row['TheDate']; // $dates will have all the dates
    $allData[] = $row; // $allData will have all the data in the query
}

print_r($dates); 
```

**PS：**

请考虑将您的代码切换到 MySQLi 或 PDO - MySQL 自 PHP 5.5 起已弃用，不再维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:55:27.997

```
while($row=mysql_fetch_array($sql)){
     $results[] = $row['TheDate1']
}
echo $results[0];
echo $results[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:55:41.530

你想要做的是创建一个数组：

```
$dates = array();
while($row=mysql_fetch_array($sql)) {
    $dates[] = $row['TheDate'];
}

var_dump($dates);

// Now if you *really* insist in having it in separate variables you could do:

list($date1, $date2) = $dates; 
```

还：

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# html - 如何实现 2 列等高的布局，第一列有 1 个元素，第二列有 2 个元素，没有浮动？

> ID：14647722
> 
> 赞同：1
> 
> 时间：2013-02-01T13:48:27.080
> 
> 标签：html, css, layout, stylesheet

我正在尝试为在左栏中具有徽标、在右侧具有旋转图像横幅和顶级导航的网站制作标题，而不使用浮动。我在这里做错了什么？

这就是我希望它看起来的样子：

![在此处输入图像描述](../Images/2a9d7bc62414163279c896f92cdab778.png)

这是我的 HTML：

```
<!doctype html>
<head>
<title></title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div id="header">
    <div id="logo"><p>Logo</p></div>
    <div id="right">    
        <div id="rotator"><p>Rotator</p></div>
        <div id="navigation"><p>Navigation</p></div>
    </div>
</div>
</body>
</html> 
```

这是我的CSS：

```
#header{
    width: 1024px;
    margin-left: auto;
    margin-right: auto;
    background-color: yellow;
    top: 10px;
    font-size: 0px;
}
#logo{
    display: inline-block;
    background-color: red;
    width: 306px;
    height: 192px;
    font-size: 0px;
}
#right{
    display: inline-block;
    background-color: black;
    width: 718px;
    height: 192px;
    font-size: 0px;
}
#rotator{
    display: block;
    background-color: green;
    width: 718px;
    height: 132px;
}
#navigation{
    display: block;
    background-color: blue;
    width: 718px;
    height: 60px;
}
p{
    font-size: 24px;
    margin:0;
    padding: 0;
} 
```

这就是它最终的样子： ![在此处输入图像描述](../Images/9aeec1fd29dd309d5c55923036e55b1b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:55:31.487

尝试穿上`vertical-align: top;`徽标和右 div

[这是小提琴](http://jsfiddle.net/jcurran/UqMPz/)

```
#logo{
display: inline-block;
background-color: red;
width: 306px;
height: 192px;
font-size: 0px;
vertical-align: top; 
```

}

```
#right{
display: inline-block;
background-color: black;
width: 718px;
height: 192px;
font-size: 0px;
vertical-align: top; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:24:11.157

```
#right {

background-color: black;
font-size: 0;
height: 192px;
position: absolute;
right: 168px;
top: 28px;
width: 718px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:03:42.600

这是使用 display:table 和 table-cell 的一种方法。

[http://jsfiddle.net/zR9GZ/](http://jsfiddle.net/zR9GZ/)

```
<div class="container">
    <div class="col1">LOGO</div>
    <div class="col2">
        <div class="rotator">ROTATOR</div>
        <div class="navigation">NAVIGATION</div>
    </div>
</div>

.container {
    display: table;
    width: 100%;
    color:# fff;
}

.col1, .col2 {
    display: table-cell;
}

.col1 {
    background: red;
    width: 25%;
}

.col2 {
    width: 75%;
}

.rotator {
    background: green;
}

.navigation {
    background: blue;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T14:22:40.697

虽然 flexbox 还没有完全准备好用于生产设计，但这是响应式解决方案的样子（尝试调整它的大小！）：

```
#header {
    display: flex;
    flex-flow: row wrap;
}

#header{
    background-color: yellow;
    font-size: 0px;
}

#logo{
    background-color: red;
    width: 306px;
    height: 192px;
    font-size: 0px;
}
#right{
    background-color: black;
    font-size: 0px;
    flex: 1 1 auto;
    display: flex;
    flex-flow: column nowrap;
    min-width: 40%;
}
#rotator{
    background-color: green;
    flex: 2 1 auto;
}
#navigation{
    background-color: blue;
    flex: 1 1 auto;
} 
```

[http://jsfiddle.net/2UjC3/](http://jsfiddle.net/2UjC3/)（不包括前缀）

在有足够多的浏览器支持 flexbox 之前，我的建议是使用 Billy Moat 的 display table/table-cell 解决方案。

# django - Django Forms：如果无效，则显示带有错误消息的表单

> ID：14647723
> 
> 赞同：138
> 
> 时间：2013-02-01T13:48:35.500
> 
> 标签：django, django-forms

在 Django 表单中，它可以检查表单是否有效：

```
if form.is_valid(): 
    return HttpResponseRedirect('/thanks/') 
```

但是我错过了如果它无效该怎么办？如何返回带有错误消息的表单？我在任何示例中都没有看到“其他”。

* * *

## 回答 #1

> 赞同：297
> 
> 时间：2013-02-01T13:50:51.657

如果您在表单无效时呈现相同的视图，那么在模板中您可以[使用`form.errors`](https://docs.djangoproject.com/en/2.2/ref/forms/api/#django.forms.Form.errors).

```
{% if form.errors %}
    {% for field in form %}
        {% for error in field.errors %}
            <div class="alert alert-danger">
                <strong>{{ error|escape }}</strong>
            </div>
        {% endfor %}
    {% endfor %}
    {% for error in form.non_field_errors %}
        <div class="alert alert-danger">
            <strong>{{ error|escape }}</strong>
        </div>
    {% endfor %}
{% endif %} 
```

一个例子：

```
def myView(request):
    form = myForm(request.POST or None, request.FILES or None)
    if request.method == 'POST':
        if form.is_valid():
            return HttpResponseRedirect('/thanks/')
    return render(request, 'my_template.html', {'form': form}) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-01T13:51:54.520

**视图.py**

```
from django.contrib import messages 

def view_name(request):
    if request.method == 'POST':
        form = form_class(request.POST)
        if form.is_valid():
            return HttpResponseRedirect('/thanks'/)
        else:
            messages.error(request, "Error")
return render(request, 'page.html', {'form':form_class()}) 
```

如果您想显示表单的错误而不是无效的，只需像我在下面所做的那样输入 {{form.as_p}}

**page.html**

```
<html>
    <head>
        <script>
            {% if messages %}
                {% for message in messages %}
                    alert('{{message}}')
                {% endfor %}
            {% endif %}
        </script>
    </head>
    <body>
        {{form.as_p}}
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-01-14T11:10:30.967

**更新：** 添加了对表单集错误的更详细描述。

* * *

Form.errors 结合了所有字段和 non_field_errors。因此，您可以将 html 简化为：

**模板**

```
 {% load form_tags %}

    {% if form.errors %}
    <div class="alert alert-danger alert-dismissible col-12 mx-1" role="alert">
        <div id="form_errors">
            {% for key, value in form.errors.items %}
                <span class="fieldWrapper">
                    {{ key }}:{{ value }}
                </span>
            {% endfor %}
        </div>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% endif %}

If you want to generalise it you can create a list_errors.html which you include in every form template. It handles form and formset errors:

    {% if form.errors %}
    <div class="alert alert-danger alert-dismissible col-12 mx-1" role="alert">
        <div id="form_errors">

            {% for key, value in form.errors.items %}
                <span class="fieldWrapper">
                    {{ key }}:{{ value }}
                </span>
            {% endfor %}
        </div>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% elif formset.total_error_count %}
    <div class="alert alert-danger alert-dismissible col-12 mx-1" role="alert">
        <div id="form_errors">
            {% if formset.non_form_errors %}
                {{ formset.non_form_errors }}
            {% endif %}
            {% for form in formset.forms %}
                {% if form.errors %}
                    Form number {{ forloop.counter }}:
                    <ul class="errorlist">
                    {% for key, error in form.errors.items %}
                        <li>{{form.fields|get_label:key}}
                            <ul class="errorlist">
                                <li>{{error}}</li>
                            </ul>
                        </li>
                    {% endfor %}
                    </ul>
                {% endif %}
            {% endfor %}

        </div>
    </div>

    {% endif %} 
```

**form_tags.py**

```
from django import template

register = template.Library()

def get_label(a_dict, key):
    return getattr(a_dict.get(key), 'label', 'No label')

register.filter("get_label", get_label) 
```

一个警告：与表单相比，Formset.errors 不包括 non_field_errors。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-01T13:58:08.893

```
def some_view(request):
    if request.method == 'POST':
        form = SomeForm(request.POST)
        if form.is_valid():
            return HttpResponseRedirect('/thanks'/)
    else:
        form = SomeForm()
    return render(request, 'some_form.html', {'form': form}) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-02-01T16:56:12.920

[这个答案](https://stackoverflow.com/a/14647770/254553)是正确的，但有一个问题：未定义字段。如果您有多个字段，则无法识别哪个字段有错误。

通过此更改，您可以显示字段名称：

```
{% if form.errors %}
    {% for field in form %}
        {% for error in field.errors %}
            <div class="alert alert-danger">
                <strong>{{ field.label }}</strong><span>{{ error|escape }}</strong>
            </div>
        {% endfor %}
    {% endfor %}
    {% for error in form.non_field_errors %}
        <div class="alert alert-danger">
            <strong>{{ error|escape }}</strong>
        </div>
    {% endfor %}
{% endif %} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-25T07:09:20.720

@AamirAdnan 的答案不见了`field.label`；另一种在几行中显示错误的方法。

```
{% if form.errors %}
    <!-- Error messaging -->
    <div id="errors">
        <div class="inner">
            <p>There were some errors in the information you entered. Please correct the following:</p>
            <ul>
                {% for field in form %}
                    {% if field.errors %}<li>{{ field.label }}: {{ field.errors|striptags }}</li>{% endif %}
                {% endfor %}
            </ul>
        </div>
    </div>
    <!-- /Error messaging -->
{% endif %} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-14T05:55:10.257

只需您可以这样做，因为当您初始化表单时，还包含表单数据和无效数据：

```
def some_func(request):
    form = MyForm(request.POST)
    if form.is_valid():
         //other stuff
    return render(request,template_name,{'form':form}) 
```

if 将在模板中引发错误（如果有），但表单数据仍将保持为：

[error_demo_here](https://i.stack.imgur.com/qD62S.png)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-11-22T13:36:02.080

您可以简单地放置一个标志变量，在这种情况下是**is_successed**。

```
def preorder_view(request, pk, template_name='preorders/preorder_form.html'):
    is_successed=0
    formset = PreorderHasProductsForm(request.POST)
    client= get_object_or_404(Client, pk=pk)
    if request.method=='POST':
        #populate the form with data from the request
       # formset = PreorderHasProductsForm(request.POST)
        if formset.is_valid():
            is_successed=1
            preorder_date=formset.cleaned_data['preorder_date']
            product=formset.cleaned_data['preorder_has_products']
            return render(request, template_name, {'preorder_date':preorder_date,'product':product,'is_successed':is_successed,'formset':formset})

    return render(request, template_name, {'object':client,'formset':formset}) 
```

之后在您的模板中，您可以将代码放在下面

```
{%if is_successed == 1 %}
<h1>{{preorder_date}}</h1>
<h2> {{product}}</h2>
{%endif %} 
```

# r - 如何重新调整R中直方图的Y轴（频率）？

> ID：14647727
> 
> 赞同：3
> 
> 时间：2013-02-01T13:48:44.707
> 
> 标签：r, plot, histogram

我有这个[光栅文件](https://echange-fichiers.inra.fr/get?k=aG724N9pJ0Fcv8Pe03i) ，我想将 y 轴（频率）重新调整为 [0,1]（通过将频率除以所有频率的总和）。

```
conne <- file("C:\\fined.bin","rb")
sd<- readBin(conne, numeric(), size=4,  n=1440*720, signed=TRUE)
y<-t(matrix((data=sd), ncol=1440, nrow=720))
r = raster(y)
hist(r, breaks=30, main="SMD_2010",
        xlab="Pearson correlation", ylab="Frequency", xlim=c(-1,1))

example:

        values  frequency        (rescaled by dividing each frequency by the sum(85600))
          -1    0                       0
        -0.5    100               0.001168224
           0    38000                 0.443925234
         0.5    7500                  0.087616822
        0.75    40000                 0.46728972 
```

![在此处输入图像描述](../Images/219ced48a81b7b85121f87e238192a5a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:27:41.600

一种解决方案是保存直方图 os 对象。如果您查看此对象的结构，您可以看到直方图条的高度存储在 element 中`counts`。

```
r<-sample(1:25000,1000)
hist.ob <- hist(r)
str(hist.ob)
List of 7
 $ breaks     : num [1:14] 0 2000 4000 6000 8000 10000 12000 14000 16000 18000 ...
 $ counts     : int [1:13] 75 46 72 91 71 91 74 87 86 82 ...
 $ intensities: num [1:13] 3.75e-05 2.30e-05 3.60e-05 4.55e-05 3.55e-05 4.55e-05 3.70e-05 4.35e-05 4.30e-05 4.10e-05 ...
 $ density    : num [1:13] 3.75e-05 2.30e-05 3.60e-05 4.55e-05 3.55e-05 4.55e-05 3.70e-05 4.35e-05 4.30e-05 4.10e-05 ...
 $ mids       : num [1:13] 1000 3000 5000 7000 9000 11000 13000 15000 17000 19000 ...
 $ xname      : chr "r"
 $ equidist   : logi TRUE
 - attr(*, "class")= chr "histogram" 
```

要转换数据以使所有条形高度的总和为 1，您必须将每个数字除以数字的总和`counts`。然后使用`plot()`函数来获取新的情节。

```
hist.ob$counts<-hist.ob$counts/sum(hist.ob$counts)
plot(hist.ob) 
```

# java - 如何在 JTextArea 中显示输入流？

> ID：14647728
> 
> 赞同：3
> 
> 时间：2013-02-01T13:48:54.347
> 
> 标签：java, swing, io, inputstream, jtextarea

这是从服务器获取流。

```
BufferedReader fromserver = new BufferedReader(
    new InputStreamReader(client.getInputStream())); 
```

`jTextArea1`是对象。如何`JTextArea`在 Java 中显示输入流？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:55:38.167

1.  使用[`JTextArea.append()`或`JTextArea.setText()`](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)

2.  利用[`JTextArea.read()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#read%28java.io.Reader,%20java.lang.Object%29)

3.  可能有问题[`Concurency in Swing`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)，必须调用`XxxStream`或`XxxReader`从`Workers Thread`，使用[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)或`Runnable#Thread`（所有输出必须包装到`invokeLater()`），

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:54:47.467

这个怎么样

> ```
> try {
>    StringBuilder sb = new StringBuilder();
>    BufferedReader fromserver = new BufferedReader(new InputStreamReader(client.getInputStream()));
>    while ((thisLine = fromserver .readLine()) != null) { // while loop begins here
>      sb.append(thisLine);
>    } // end while 
>    jTextArea1.settext(sb.toString());
>  } // end try
>  catch (IOException e) {
>    System.err.println("Error: " + e);
>  } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:54:54.997

你可以通过两种方式做到这一点。首先，您可以在任何字符串变量中获取输入。

1.  JTextArea(String text) 你可以在创建对象时使用上面的语法

或者

1.  或者只是简单地为 ex jTextArea1 创建一个对象，并使用方法 append()。即 jTextArea1.append(text);

# sql - 在 Oracle 中执行 SQL 查询时出错

> ID：14647729
> 
> 赞同：2
> 
> 时间：2013-02-01T13:48:54.777
> 
> 标签：sql, oracle

我对 SQL 有一些了解，但在 Oracle 方面完全是新手。下面的 sql 语句将在 SQL Server 中正确执行。但这不会在 Oracle 中执行并引发错误。

```
select Field1, * from Table1 where SomeField = 0 
```

请让知道如何在 Oracle 中执行类似的语句。收到的错误如下：

```
ORA-00936: missing expression
00936\. 00000 -  "missing expression" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:50:16.467

尝试，

```
select Field1, a.* from Table1 a where SomeField = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:56:02.060

只需尝试：

```
select Field1, Table1.* from Table1 where SomeField = 0 
```

# ruby-on-rails - Rails 在请求的参数中将空数组转换为 nil

> ID：14647731
> 
> 赞同：64
> 
> 时间：2013-02-01T13:48:53.190
> 
> 标签：ruby-on-rails, json

我的应用程序中有一个 Backbone 模型，它不是典型的平面对象，它是一个大型嵌套对象，我们将嵌套部分存储在 MySQL 数据库的 TEXT 列中。

我想在 Rails API 中处理 JSON 编码/解码，以便从外部看起来你可以 POST/GET 这个大型嵌套 JSON 对象，即使它的一部分存储为字符串化 JSON 文本。

但是，我遇到了 Rails 神奇地将空数组转换为`nil`值的问题。例如，如果我发布这个：

```
{
  name: "foo",
  surname: "bar",
  nested_json: {
    complicated: []
  }
} 
```

我的 Rails 控制器看到了这个：

```
{
  :name => "foo",
  :surname => "bar",
  :nested_json => {
    :complicated => nil
  }
} 
```

所以我的 JSON 数据被改变了..

有没有人遇到过这个问题？为什么 Rails 会修改我的 POST 数据？

**更新**

这是他们这样做的地方：

[https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/http/request.rb#L288](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/http/request.rb#L288)

这就是~为什么他们这样做：

[https://github.com/rails/rails/pull/8862](https://github.com/rails/rails/pull/8862)

所以现在的问题是，如何在我的嵌套 JSON API 情况下最好地处理这个问题？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-08-21T14:20:28.330

经过大量搜索，我发现您从 Rails 4.1 开始可以使用完全跳过 deep_munge “功能”

```
config.action_dispatch.perform_deep_munge = false 
```

我找不到任何文档，但您可以在此处查看此选项的介绍： [https ://github.com/rails/rails/commit/e8572cf2f94872d81e7145da31d55c6e1b074247](https://github.com/rails/rails/commit/e8572cf2f94872d81e7145da31d55c6e1b074247)

这样做可能存在安全风险，记录在此：[https ://groups.google.com/forum/#!topic/rubyonrails-security/t1WFuuQyavI](https://groups.google.com/forum/#!topic/rubyonrails-security/t1WFuuQyavI)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-01T14:18:12.893

看起来这是一个已知的，最近引入的问题：[https ://github.com/rails/rails/issues/8832](https://github.com/rails/rails/issues/8832)

如果你知道空数组在哪里，你总是可以`params[:...][:...] ||= []`在前置过滤器中。

或者，您可以修改您的 BackBone 模型的 JSON 方法，在发布之前使用显式字符串化 nested_json 值，并使用before_filter`JSON.stringify()`手动解析它。`JSON.parse`

丑陋，但它会工作。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-26T21:30:25.343

您可以自己重新解析参数，如下所示：

```
class ApiController
  before_filter :fix_json_params    # Rails 4 or earlier
  # before_action :fix_json_params  # Rails 5

  [...]

  protected

  def fix_json_params
    if request.content_type == "application/json"
      @reparsed_params = JSON.parse(request.body.string).with_indifferent_access
    end
  end

  private

  def params
    @reparsed_params || super
  end
end 
```

其工作原理是查找具有 JSON 内容类型的请求，重新解析请求正文，然后拦截该`params`方法以返回重新解析的参数（如果存在）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-15T11:58:16.597

我遇到了类似的问题。

通过将空字符串作为数组的一部分发送来修复它。

所以理想情况下你的参数应该喜欢

```
{
  name: "foo",
  surname: "bar",
  nested_json: {
    complicated: [""]
  }
} 
```

因此，我总是在我的请求中传递（“”）而不是发送空数组，以绕过深度修改过程。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-11T21:05:38.257

这是（我相信）一个不涉及重新解析原始请求正文的合理解决方案。如果您的客户端正在发布表单数据，这可能不起作用，但在我的情况下，我正在发布 JSON。

在`application_controller.rb`：

```
 # replace nil child params with empty list so updates occur correctly
  def fix_empty_child_params resource, attrs
    attrs.each do |attr|
      params[resource][attr] = [] if params[resource].include? attr and params[resource][attr].nil?
    end
  end 
```

然后在你的控制器中......

```
before_action :fix_empty_child_params, only: [:update]

def fix_empty_child_params
  super :user, [:child_ids, :foobar_ids]
end 
```

我遇到了这个问题，在我的情况下，如果一个 POSTed 资源包含`child_ids: []`或者`child_ids: nil`我希望该更新意味着“删除所有孩子”。如果客户端不打算更新`child_ids`列表，则不应在 POST 正文中发送，在这种情况下`params[:resource].include? attr`，`false`请求参数将保持不变。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-09T12:51:12.790

我遇到了一个类似的问题，发现传递一个空字符串的数组会被 Rails 正确处理，如上所述。如果您在提交表单时遇到这种情况，您可能希望包含一个与数组 param 匹配的空隐藏字段：

```
<input type="hidden" name="model[attribute_ids][]"/> 
```

当实际参数为空时，控制器将始终看到一个带有空字符串的数组，从而保持提交无状态。

# java - 如何降低 onClick() 方法中的圈复杂度

> ID：14647732
> 
> 赞同：1
> 
> 时间：2013-02-01T13:48:59.137
> 
> 标签：java, android, refactoring, switch-statement, cyclomatic-complexity

让我们想象一个简单的构造：

```
public void onClick(View view) {
    switch (view.getId()) {
        case R.id.btn_first: {
            // some code
        }
            break;
        case R.id.btn_second: {
            // some code
        }
            break;
        case R.id.btn_third: {
            // some code
        }
            break;
        // and so on
    }
} 
```

这是一段处理不同按钮点击的简单代码。但随着按钮数量的增加 -`switch`块的圈复杂度也随之增加。是否有另一种方法来表示此代码构造以降低`onClick()`方法的圈复杂度？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:04:59.717

```
public void onClick(View view) {
    for (ClickHandler handler : allHandlers()) {
        if (handler.supports(view.getId())) {
            handler.onClick(view);
        }
    }
}

interface ClickHandler {
    boolean supports(int viewId);
    void onClick(View view);
} 
```

为每个分支实现一个`ClickHandler`并`allHandlers()`构建它们的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-27T18:41:33.950

这是我在使用早期版本的 GWT（Google Web Toolkit）时遇到的问题之一。GWT 是 google 为 JAVA 开发人员提供一种使用 JAVA 编写 JavaScript 代码的方法的答案。

我们开始使用单个匿名内部类来处理网页上的每个事件/元素。当你没有太多元素时它工作得很好，这对于网页来说是不现实的。因此，随着元素数量的增加，它变得难以管理和混乱。然后我们很快就解决了您提出的同一个问题。谷歌通过在 GWT 的更高版本中使用事件总线解决了这个问题。

**那是怎么解决的？** 他们创建了一种模式，您可以在其中将条件抽象到事件总线的一个级别，并让它调用适当的处理程序。

但是，回到您的 javascript 问题，这里有一个很好、简单的模式解释，[Handling events for many elements](https://www.kirupa.com/html5/handling_events_for_many_elements.htm)

真的，在我看来，你想要做的是完全避免圈复杂性模式，就像我说的那样，通过使用事件总线或事件处理程序或映射抽象一个级别，最终调用一个函数来避免代码重复并用另一个解决这个问题图案。

我宁愿创建更多的小函数，从而使代码更像组件，而不是让 if/else 模式不断复制自己。我发现一旦你沿着这条路走下去，这种模式就没有尽头，你将继续被迫添加更多 if/else 语句，直到你用更好的解决方案重构代码。

我记得在 JAVA 代码中看到了同样的事情，他们正在培训 COBOL 开发人员学习 JAVA，而那些保持程序思维方式的人不断陷入这种模式。我曾经看到一个带有 26 个条件的 switch 语句检查单个类型条件。

这里有一些关于[Cyclomatic Complexity Refactoring Tips](https://sergeyski.com/cyclomatic-complexity-refactoring-tips/)的好技巧以及好的代码示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:00:46.093

这是可能的（例如带有执行程序的哈希图或其他东西），但我认为这会使代码质量变差。低圈复杂度有利于高质量的代码，但最终目标仍然应该是高质量和可维护的代码，而不是低圈复杂度。

# jquery - jQuery 性能不佳

> ID：14647733
> 
> 赞同：2
> 
> 时间：2013-02-01T13:48:58.683
> 
> 标签：jquery, performance

我对 jQuery 真的很陌生，但我已经阅读教程一周了，这是我的第一个代码。它可以工作，但是一段时间后它开始表现不佳。特别是当连续多次调用 mouseenter/mouseleave 操作时。每次延迟都会增加，直到我移动到另一个元素。

我在 jQuery 中搜索过糟糕的性能，但没有运气。我发现的最好的提示是：“*使用 ID 而不是类选择器 (JQuery)* ”，但我不确定为什么会出现问题，而且我发现很难将 '.photo' 替换为 id-tag，因为它应该会影响几个元素。

我还发现“*通常，当您尽可能少地搜索或更改 DOM 时，JavaScript 会更快。* ”这可能是我的问题吗？如果是这样，我该怎么做？

所以请让我知道我的代码中是否有什么奇怪的地方，或者你有什么想法。谢谢！

**代码**

```
$(document).ready(function(){
    $(".photo").mouseenter(function(){
        $(this).fadeTo("fast", 0.9);
    });
    $(".photo").mouseleave(function(){
        $(this).fadeTo("fast", 0.6);
    });
    $('.photo').click(function() {
        $(this).animate({width: '900px'});
        $(this).mouseleave(function(){
            $(this).animate({width: '294px'});
        });
    });

    $('.trigger').click(function() {
        if( $("#5").is(":hidden") ) {
            $("#6").hide('slow');
            $('.trigger').fadeTo('slow', 0);
        } else if ( $("#4").is(":hidden") ){
            $("#5").hide('slow');
        } else if ( $("#3").is(":hidden") ){
            $("#4").hide('slow');
        } else if ( $("#2").is(":hidden") ){
            $("#3").hide('slow');
        } else if ( $("#1").is(":hidden") ){
            $("#2").hide('slow');
        } else {
            $("#1").hide('slow');
            $(".triggerR").fadeTo('slow', 1);
        }
    });

    $('.triggerR').click(function() {
        if( $("#6").is(":hidden") ) {
            $("#6").toggle('slow');
            $(".trigger").fadeTo('slow', 1);
        } else if( $("#5").is(":hidden") ) {
            $("#5").toggle('slow');
        } else if ( $("#4").is(":hidden") ){
            $("#4").toggle('slow');
        } else if ( $("#3").is(":hidden") ){
            $("#3").show('slow');
        } else if ( $("#2").is(":hidden") ){
            $("#2").show('slow');
        } else if ( $("#1").is(":hidden") ){
            $("#1").show('slow');
            $(".triggerR").fadeTo('slow', 0);
        } 
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:50:13.250

问题是您正在排队不同的动画。`stop`在执行另一个动画之前，使用动画上的功能取消所有 qued动画。

[。停止（）](http://api.jquery.com/stop/)

```
$(this).stop(true, true).fadeTo("fast", 0.9); 
```

编辑：根据@guffa 建议保持不透明度更好地使用

```
$(this).stop(true, false).fadeTo("fast", 0.9); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:59:35.430

这些是最小的优化，因此您不会看到它们带来巨大的性能提升，而是这样做：

```
$('.photo').mouseenter(...);
$('.photo').mouseleave(...);
$('.photo').click(...); 
```

相反，您将链接这些函数，以便您只执行`$('.photo')`一次：

```
$('.photo').mouseenter(...).mouseleave(...).click(...); 
```

还要查看您`if`多次选择相同元素的条件；您可以将结果保存到变量中：

```
var foo = $('#6'); 
```

然后使用`foo`而不是`$('#6')`重复做。

这有点大，但是您在事件处理程序中添加了一个事件处理程序。每次单击`.photo`元素时，都会添加另一个`mouseleave`事件处理程序；它们会堆积起来，并可能导致页面变慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:01:01.397

代码有两个问题。首先，如果`mouseenter`和`mouseleate`事件发生在前一个动画完成之前，动画将被排队。如果您快速进出几次，您将看到所有动画都在播放，直到动画队列为空。

在开始新动画之前停止任何 previos 动画：

```
$(".photo").mouseenter(function(){
  $(this).stop().fadeTo("fast", 0.9);
});
$(".photo").mouseleave(function(){
  $(this).stop().fadeTo("fast", 0.6);
}); 
```

其次，在`click`事件处理程序中，您正在注册另一个`mouseleave`事件，因此，如果您多次单击，您将有多个事件处理程序在您离开元素时添加动画。您将看不到动画，因为它们会将大小从 294px 设置为 294px，但所有动画都已排队等待其他动画。

使用后取消绑定`mouseleave`事件处理程序：

```
$('.photo').click(function() {
  $(this).animate({width: '900px'});
  function handler() {
    $(this).unbind('mouseleave', handler);
    $(this).animate({width: '294px'});
  }
  $(this).mouseleave(handler);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:52:38.217

问题可能是您有很多带有“照片”类的元素，并且您为所有这些元素添加了不同的侦听器。

我不确定您将如何避免 mouseenter / mouseleave，但您可以使用 [事件委托](http://davidwalsh.name/event-delegate)进行单击...

# python - 重新打开 GTK 和 matplotlib 窗口 - GTK 窗口为空白

> ID：14647735
> 
> 赞同：1
> 
> 时间：2013-02-01T13:49:08.620
> 
> 标签：python, matplotlib, gtk

我的程序（使用`GTK`using开发`glade`）接收一些数据，并可以选择显示一个包含`matplotlib scatterplot`表示数据的单独窗口。

**我的问题是，如果用户关闭图表`window`并重新打开它，则不会显示图表。它只是一个空白`GTK Window`。**我确信有一个简单的解决方法，但是与我的问题（或`GTK`与此相关的`matlplotlib`集成）相关的可用资源并不多。

`Module`我为我创建了一个，`scatterplot`因此我可以轻松地重复使用它。我只是想让它工作，所以代码结构不完美。

```
##Scatterplot Module:

import gtk
import matplotlib
from matplotlib.backends.backend_gtkagg import FigureCanvasGTKAgg as FigureCanvas
from matplotlib.figure import Figure

class ScatterPlot:
    def __init__(self):
       self.window = gtk.Window()
       self.window.connect("destroy", lambda x: self.destroy())
       self.window.set_default_size(500,400)
       self.is_hidden = False

       self.figure = Figure(figsize = (5,4), dpi=100)
       self.ax = self.figure
       self.ax = self.ax.add_subplot(111)
       self.canvas = FigureCanvas(self.figure)
       self.window.add(self.canvas)

       self.Xs = list()
       self.Ys = list()

   def set_axis(self, xLimit = (0,384) , yLimit = (0,100)):
       self.ax.set_xlim(xLimit)
       self.ax.set_ylim(yLimit)

   def plot(self, xs, ys):
       self.Xs.extend([xs])
       self.Ys.extend([ys])
       self.ax.plot(xs,ys,'bo')

   def update(self):
       self.window.add(self.canvas)

   def set_title(self, title):
       self.ax.set_title(title)

   def show(self):
       self.window.show_all()
       self.is_hidden = False

   def hide(self):
       self.window.hide()
       self.is_hidden = True

   def destroy(self):
       self.window.destroy() 
```

我这样称呼模块：

```
class GUI:
    def __init__(self):
        self.scatterplot = scatterplot.ScatterPlot()

        #When the user presses the "Graph" button it calls the following function
    def graph():
        self.scatterplot.plot(someDataX, someDataY)
        self.scatterplot.set_axis()
        self.scatterplot.set_title("Some Title")
        self.scatterplot.show() 
```

（这只是我的代码的一个示例。）

当`scatterplot`关闭时，我打电话`self.window.destroy`而不是`self.window.hide`。尝试重新打开时，我调用相同的`graph()`函数，但如上所述，`GTK Window`不显示图形。（当我第一次打开它时，它显示完美）

**我的猜测：**

*   我应该打电话`.hide()`而不是打电话`.destroy()`吗？
*   的构造函数中是否有一段代码`scatterplot`需要再次调用才能创建`plot`？
*   `plot`还是我应该每次都重新实例化`graph()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:10:50.923

# 我的解决方案：

从：

```
class ScatterPlot:
    def __init__(self):
        #remove the following two lines
        self.canvas = FigureCanvas(self.figure)
        self.window.add(self.canvas) 
```

将两行代码移到`show()`

```
def show(self):
    self.canvas = FigureCanvas(self.figure)
    self.window.add(self.canvas)
    self.window.show_all()
    self.is_hidden = False 
```

移动这两行代码可以在重新打开窗口时显示图形。

旁注：同时调用`.destroy()`或`.show()`在关闭窗口时调用将起作用。我不确定哪个更好。

# activemq - ActiveMQ + Stomp：多订阅者队列

> ID：14647738
> 
> 赞同：0
> 
> 时间：2013-02-01T13:49:05.853
> 
> 标签：activemq, stomp

我正在通过 STOMP 与 ActiveMQ 交互。我有一个发布消息的应用程序和另一个订阅和处理消息的应用程序。

如果我将消息写入**队列**，我可以确定，如果我有两个消费者，每条消息将只被处理一次（因为当消息完成时，它会从队列中删除） - 但是这个功能是否可以从一个主题中获得?

例如; 我有第三个应用程序，它是一个记录器。我希望记录器接收发布者发出的每条消息，但我也希望两个（或三个或四个等）处理器中的一个也接收消息。

这可能吗？

**编辑**

我突然想到，这样做的一个好方法是拥有一个发布者写入的主题，以及一个处理器侦听的队列，并将主题中的每条消息推送到队列中。ApacheMQ 可以在内部执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:14:23.727

您可以使用[镜像队列](http://activemq.apache.org/mirrored-queues.html)在 ActiveMQ 内部执行此操作，也可以将[虚拟主题](http://activemq.apache.org/virtual-destinations.html)用于其他一些高级路由语义。如果您想选择其他 EIP 类型的消息传递模式，那么我建议您查看 Apache Camel，它提供了一整套 EIP 模式功能。

# magento - 如何在magento中为自定义模块创建表？

> ID：14647741
> 
> 赞同：1
> 
> 时间：2013-02-01T13:49:28.163
> 
> 标签：magento, magento-1.7

我是magento的新手。我需要在 Magento 中创建自己的模块（或）扩展。在我的模块中，无法在 magento 表中创建表。我正在使用此代码。

```
File:/app/code/local/com_name/module_name/sql/module_setup/mysql4_install-0.1.0.php
 $installer = $this;
  $installer->startSetup();

  $installer->run("
    DROP TABLE IF EXISTS {$this->getTable('th_tweet')};

    CREATE TABLE {$this->getTable('th_tweet')} (
      `tweet_id` int(11) NOT NULL AUTO_INCREMENT,
      `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
      `twitter_id` bigint(20) NOT NULL,
      `text` text NOT NULL,
      PRIMARY KEY (`tweet_id`)
    ) ENGINE=MyISAM  DEFAULT CHARSET=latin1
  ");

  $installer->endSetup(); 
```

然后，可以像这样调用 config.xml 文件，

```
<models>
        <tweet>
            <class>TechAndHouse_Tweet_Model</class>
            <resourceModel>tweet_mysql4</resourceModel>
        </tweet>

            <tweet_mysql4>
                  <class>TechAndHouse_Tweet_Model_Mysql4</class>
                  <entities>
                        <tweet>
                              <table>th_tweet</table>
                        </tweet>
                  </entities>
            </tweet_mysql4>
      </models> 
```

我在管理面板中创建选项卡并创建了前端块，但我无法为我的自定义模块创建表。如何为我的自定义模块创建表格？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:56:51.983

将资源部分添加到您的 config.xml，全局

```
<global>
    ...
    <resources>
        <tweet_setup>
            <setup>
                <module>TechAndHouse_Tweet</module>
            </setup>
            <connection>
                <use>core_setup</use>
            </connection>
        </tweet_setup>
        <tweet_write>
            <connection>
                <use>core_write</use>
            </connection>
        </tweet_write>
        <tweet_read>
            <connection>
                <use>core_read</use>
            </connection>
        </tweet_read>
    </resources>
    ...
</global> 
```

# ruby-on-rails - 使用 $ sudo bundle exec ... 引发 'bundle: command not found' 错误

> ID：14647745
> 
> 赞同：3
> 
> 时间：2013-02-01T13:49:41.520
> 
> 标签：ruby-on-rails, ruby, bundler, sudo, rbenv

我已经在 Ubuntu 服务器上安装了 rbenv。我可以 cd 进入我的应用程序目录并`$ bundle`毫无问题地运行，但是我需要运行`$ sudo bundle exec ...`，这给我一个错误：

> 捆绑包：找不到命令

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T20:23:19.063

不完全确定，但也许这对你有用：

```
sudo -i -u $USER bundle exec... 
```

或者

```
sudo -i -u username_with_correct_env bundle exec... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T14:13:04.227

Dan Carley 的[rbenv-sudo](https://github.com/dcarley/rbenv-sudo)看起来会做你想做的事：

> rbenv-sudo 是一个用于 rbenv 的插件，它允许您在 sudo 会话中运行 rbenv 提供的 Rubies 和 Gems。

本文提供了有关其工作原理的更详细说明：[Sudo Rbenv Me a Sandwich](http://dan.carley.co/blog/2012/03/06/sudo-rbenv-me-a-sandwich/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-17T16:54:32.573

您收到错误的原因已经得到解决。但我能够通过说：

```
sudo /full/path/to/bundle exec ... 
```

就我而言，我使用的是 rbenv，所以我必须：

```
sudo /home/renier/.rbenv/shims/bundle exec ... 
```

那行得通。要让 sudo 不要求输入密码，您需要为此配置`/etc/sudoers`文件。请参阅[https://serverfault.com/a/160587](https://serverfault.com/a/160587)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-22T22:12:06.893

要在不使用 rbenv 或 rvm 的情况下执行此操作，请执行以下操作：

`sudo -E bundle exec ...`

> ```
>  -E          The -E (preserve environment) option will override the env_reset option in sudoers(5).  It is only available when
>                either the matching command has the SETENV tag or the setenv option is set in sudoers(5).  sudo will return an error
>                if the -E option is specified and the user does not have permission to preserve the environment. 
> ```

# ruby-on-rails - form_for 中的自定义字段不在模型中

> ID：14647746
> 
> 赞同：6
> 
> 时间：2013-02-01T13:49:54.977
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想将一个参数传递给我的控制器，它是一个简单的复选框，但我不知道如何在我`form_for`的模型中引入它，这是我的观点：

```
<%= form_for @finance,:html => { :id => 'go_finance' } do |f| %>    
    <br>
    Transferir de :<%= f.select :from_money, @places.map { |p| [p.place, p.id] } %>
    para: <%= f.select :to_money, @places.map { |p| [p.place, p.id] } %>
    <br>
    Entrada: <%= f.text_field :input,:id => "input",:placeholder => "Quanto foi ganho ?" %>
    Saída: <%= f.text_field :output,:id => "output",:placeholder => "Quanto foi gasto ?" %>
    <br>
    Nota: <%= f.text_area :note %>
    <%= f.submit %>
<% end -%> 
```

我想制作一个额外的复选框，但是如何制作这个，模型中没有对象，但有一个对象需要检查以在控制器中创建 if else，如果检查是否没有检查，请帮助我，非常感谢，谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T14:09:59.597

你可以尝试使用`check_box_tag`

`<%= check_box_tag :my_attr %>`

然后只需检查`params[:my_attr]`控制器中的 a 。如果`params[:my_attr]`控制器中存在，则选中该复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:10:53.280

添加随机复选框[`check_box_tag`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag)：

```
<%= label_tag :rnd_boolean %>
<%= check_box_tag :rnd_boolean %>

# then in your controller
if params[:rnd_boolean]
  do_suff
else
  do_other_stuff
end 
```

# android - 如何将 setDisplayOptions 方法用于操作栏？

> ID：14647756
> 
> 赞同：3
> 
> 时间：2013-02-01T13:50:02.700
> 
> 标签：android, android-actionbar

我想设置一个操作栏：

```
 actionBar.setDisplayShowTitleEnabled(true);
 actionBar.setDisplayHomeAsUpEnabled(true); 
```

在其他地方：

```
 actionBar.setDisplayShowTitleEnabled(true);
  actionBar.setDisplayHomeAsUpEnabled(false); 
```

但改用该`setDisplayOptions`方法（当您想“一次设置多个显示选项”时建议使用该方法）但不知道如何使用它......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T14:00:28.323

布局：

```
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/editField"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:inputType="textFilter" >

</EditText> 
```

主要活动：

```
 import android.app.ActionBar;
    import android.app.Activity;
    import android.os.Bundle;
    import android.view.KeyEvent;
    import android.widget.EditText;
    import android.widget.TextView;
    import android.widget.TextView.OnEditorActionListener;
    import android.widget.Toast;

    public class FirstActivity extends Activity {

      @Override
      protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ActionBar actionBar = getActionBar();

        actionBar.setCustomView(R.layout.actionbar_view);
        EditText edit= (EditText) actionBar.getCustomView().findViewById(R.id.editField);
        edit.setOnEditorActionListener(new OnEditorActionListener() {

          @Override
          public boolean onEditorAction(TextView v, int actionId,
              KeyEvent event) {
            Toast.makeText(MainActivity.this, "Execution started",
                Toast.LENGTH_LONG).show();
            return false;
          }
        });
 //here comes the usage of setDisplayOptions
        actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM
            | ActionBar.DISPLAY_SHOW_HOME);
      }

    } 
```

希望这可以帮助。

# c++ - libavcodec 视频解码不起作用

> ID：14647766
> 
> 赞同：0
> 
> 时间：2013-02-01T13:50:31.093
> 
> 标签：c++, ffmpeg, h.264, video-processing, libavcodec

我正在尝试解码用 H264 编码的视频。我将 AVPacket 的数据及其大小发送到解码器代码。我正在尝试解码帧并将其显示在 GUI 上。问题是当我解码帧时，它返回的帧字节数与数据包的大小相同，这意味着它没有解压缩数据。谁能告诉会是什么问题。我的编码程序运行良好。

这是编码的代码

```
 static struct SwsContext *img_convert_ctx;
  pkt.data = NULL;   
  pkt.size = 0; 

  avpicture_fill((AVPicture *)srcFrame, frame,AV_PIX_FMT_BGR24, 640, 480);
 if(img_convert_ctx == NULL) {
  int w = 640;
  int h = 480;
  img_convert_ctx = sws_getContext(w, h, 
      AV_PIX_FMT_BGR24, c->width, c->height, PIX_FMT_YUV420P, SWS_BICUBIC, NULL, NULL, NULL);
   if(img_convert_ctx == NULL) {
    fprintf(stderr, "Cannot initialize the conversion context!\n");
  }
}
  sws_scale(img_convert_ctx, srcFrame->data, srcFrame->linesize, 0,480,picture->data, picture->linesize);

  fflush(stdout);

  picture->pts=counter;

  ret = avcodec_encode_video2(c, &pkt, picture, &got_output);
    if (ret < 0) {
        fprintf(stderr, "Error encoding frame\n");
    }

    if (got_output) {

        vdec.decode_frame(pkt.data ,pkt.size);

        av_free_packet(&pkt);
    } 
```

解码器代码...

```
 int len ,got_frame;

avpkt.size = data_length;

avpkt.data = frame_buffer;

if(!frame_buffer){

return "frame buffer empty\n";

}

len = avcodec_decode_video2(avctx ,frame ,&got_frame ,&avpkt);

if( len < 0){

    return "error while decoding\n";

}

if( got_frame ){

static struct SwsContext *img_convert_ctx;  

 if(img_convert_ctx == NULL) {

  img_convert_ctx = sws_getContext(w, h, 
      PIX_FMT_YUV420P, avctx->width,
      avctx->height, PIX_FMT_BGR24, 
      SWS_BICUBIC, NULL, NULL, NULL);

   if(img_convert_ctx == NULL) {

    return  "Cannot initialize the conversion context!\n";

  }

}

j=sws_scale(img_convert_ctx, 
    frame->data , frame->linesize ,
    0, h ,picture->data,
    picture->linesize );

if(j==0){

exit(1);

} 
```

我正在将所有其他代码（如 AVCodecContext 和 Codec）初始化为其他方法。

请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:45:39.530

该`avcodec_decode_video2`函数应返回处理的字节数，而不是结果图片的字节数。您只需检查 的值`got_frame`即可了解何时解码完整帧。

# c++ - Visual Studio 2012 中的 C++ 单元测试

> ID：14647771
> 
> 赞同：10
> 
> 时间：2013-02-01T13:50:46.253
> 
> 标签：c++, visual-studio, unit-testing, testing

我正在使用 Microsoft Visual Studio 2012 Ultimate 编写 C++ 应用程序。我从我的 MSDNAA 访问中获得了该版本。我的问题是我想为我编写的 C++ 类创建单元测试。

**请注意：** 它是符合标准的 C++，没有混合，没有 C#，它只是 C++，也可以用 g++ 编译。

在*文件 -> 新建 -> 项目 -> Visual C++*下存在类似于“托管测试项目”的东西：

![](../Images/811caafb30d5cf2f7dc30adea7fc2c4c.png)

但是，当我创建这样一个项目时，我无法管理它来添加对“MyClass.h”的引用并进行编译。我找不到一个简单的教程。

任何人都可以通过展示如何使用 Visual Studio 2012 设置简单的 C++ 单元测试来帮助我吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-01T14:11:44.000

对于 C++ 单元测试，您有两种选择**Manage Test Project**和**Native Unit Test Project**。您应该选择原生的，然后只需添加您想要的包含并编写测试。

这是一个虚拟示例，其中我包含一个“foo.h”标头，实例化 a`foo`并调用其方法之一。

```
#include "stdafx.h"

#include "..\foo.h" // <- my header

#include "CppUnitTest.h"
using namespace Microsoft::VisualStudio::CppUnitTestFramework;

namespace UnitTest1
{       
    TEST_CLASS(UnitTest1)
    {
    public:

        TEST_METHOD(TestMethod1)
        {
            foo f;
            Assert::AreEqual(f.run(), true);
        }
    };
} 
```

有关更多信息，请参阅[使用测试资源管理器对现有 C++ 应用程序进行单元测试](http://msdn.microsoft.com/en-us/library/hh419385.aspx)。

# jquery - jquery datepicker在几个月以下显示legenda

> ID：14647772
> 
> 赞同：0
> 
> 时间：2013-02-01T13:51:00.590
> 
> 标签：jquery, datepicker

在我的日期选择器中，我使用一些颜色来显示日期已被占用或不可用。我想在日期选择器的月份下方但在弹出窗口中显示颜色的解释。有没有办法在日期选择器的弹出窗口下方放置一个 div？日期/飞蛾会向上移动一点，但我可以解释我的颜色....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:15:36.547

我还没有尝试过，但也许你可以使用 jquery 并做这样的事情......

```
$('div#ui-datepicker-div').append('<div>my legend html</div>') 
```

显然，您还需要对其进行样式化。

# r - 如何将年份划分为日期？

> ID：14647775
> 
> 赞同：3
> 
> 时间：2013-02-01T13:50:57.740
> 
> 标签：r, data.table

我想从这个开始：

```
 years
 -------
  1994
  2001
   .
   . 
```

对此：

```
int dates
 ------
  8793    # 1994-01-28
  8824    # 1994-02-28
  8852    # 1994-03-28
  8883    # 1994-04-28
  8913    # 1994-05-28
  8944    # 1994-06-28
  8974    # 1994-07-28
  9005    # 1994-08-28
  9036    # 1994-09-28
  9066    # 1994-10-28
  9097    # 1994-11-28
  9127    # 1994-12-28
 11350    # 2001-01-28
 11381    # 2001-02-28
 11409    # 2001-03-28
 11440    # 2001-04-28
 11470    # 2001-05-28
 11501    # 2001-06-28
 11531    # 2001-07-28
 11562    # 2001-08-28
 11593    # 2001-09-28
 11623    # 2001-10-28
 11654    # 2001-11-28
 11684    # 2001-12-28
   .
   . 
```

即将每年分为 12 个日期（该年的每个月的第 28 个）作为 1970 年基整数。

这样做最有效的方法是什么？

我的尝试非常缓慢！

```
require(data.table)

# Sample data
dt <- data.table(year=c(1994,2001)) # edit

# Create results table
data <- data.table(dates=integer())

for (i in 1:12) {
    temp <- dt
    temp$dates <- as.integer(as.Date(paste(temp$year, "-", sprintf( "%02d",i),"-28", sep="")))
    temp <- subset(temp, select=dates)
    data <- rbind(temp,data)
}

# Sort
data <- data[with(data, order(dates)),] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:30:50.357

尝试这个。输入输出都是数据表：

```
# input data
Y <- data.table(year = c(1994, 2001))
M <- data.table(month = 1:12)

as.data.table( merge.data.frame( M, Y ))[, 
   list(`int dates` = as.numeric(as.Date(ISOdate(year, month, 28))))
] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:07:03.193

这是一个单行：

```
as.integer(as.Date(apply(expand.grid(1:12,c(1994,2001)), 1, 
                         function(x)paste(x[2], x[1], 28,sep="-"))))

 [1]  8793  8824  8852  8883  8913  8944  8974  9005  9036  9066  9097  9127 11350 11381 11409 11440 11470 11501
[19] 11531 11562 11593 11623 11654 11684 
```

这里是一步一步的解释：

```
expand.grid(1:12, c(1994,2001))
 Var1 Var2
1     1 1994
2     2 1994
3     3 1994
4     4 1994
5     5 1994
6     6 1994
7     7 1994
8     8 1994
9     9 1994
10   10 1994
11   11 1994
12   12 1994
13    1 2001
14    2 2001
15    3 2001
16    4 2001
17    5 2001
18    6 2001
19    7 2001
20    8 2001
21    9 2001
22   10 2001
23   11 2001
24   12 2001 
```

到你`apply`对每一行的功能`paste()`。然后转换为 Date 对象，然后将其转换为整数（默认为 1970-base）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T14:33:01.297

如果您打算将此数据移回 excel，然后将“25569”添加到 excel 中的数字，您将获得日期。这是 R 的一个问题，我使用该数字将日期恢复为 excel 正确格式。

# java - 排除文件集中的文件不起作用

> ID：14647784
> 
> 赞同：0
> 
> 时间：2013-02-01T13:51:23.000
> 
> 标签：java, ant

我正在对一个项目进行战争，但我希望从指定位置选择该战争中的类，并从自定义位置选择一个 jar 文件 A.jar 我正在做这样的事情......

```
<target name="war" depends="a-jar">
    <war destfile="D:/JBOSSHOME/project.war" webxml="${project-location}/web/WEB-INF/web.xml">
        <fileset dir="${project-location}/web" >
        <exclude name="${project-location}/web/WEB-INF/lib/A.jar"/>
        <exclude name="${project-location}/web/WEB-INF/classes/**/*.class"/> 
        </fileset>
        <lib dir="${jarsLocation}"></lib>
        <classes dir="D:/JBOSSHOME/project/build/classes"/>
    </war>
</target> 
```

但在由此产生的战争中，我得到了 2 个 A.jar 文件，并且类也从 ${project-location}/web/WEB-INF/classes 而不是我提供的类目录中复制...任何帮助都是非常感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:12:07.087

排除不应包含文件集的根目录：

```
<fileset dir="${project-location}/web" >
    <exclude name="WEB-INF/lib/A.jar"/>
    <exclude name="WEB-INF/classes/**/*.class"/> 
</fileset> 
```

# com - 找不到此引用的类型库

> ID：14647786
> 
> 赞同：0
> 
> 时间：2013-02-01T13:51:27.640
> 
> 标签：com, vbscript, msxml, wsh

我在注册 Windows 脚本文件时遇到问题。当我尝试这样做时，它显示“找不到此引用 Some.Reference 的类型库”

[基本上，行为与此问题Windows Scripting can't find reference](https://stackoverflow.com/questions/7256920/windows-scripting-cant-find-reference?answertab=votes#comment8732645_7256920)中描述的行为非常相似，但我不知道使用什么来代替 c:\path\to\control.dll。

在我的情况下 Some.Reference 是 Msxml2.FreeThreadedDOMDocument.4.0。那么我应该怎么做呢？我尝试使用不同类型的 msxml.dll，但似乎没有帮助。

或者也许还有其他方法可以解决这个问题？

更多细节：我设法在 Windows7 上注册了此脚本，但在 Windows Server 2008 sp 2 中出现错误描述

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:55:31.723

汉斯，感谢您的评论，因为我所做的是我使用这个工具 [http://www.nirsoft.net/utils/registered_dll_view.html](http://www.nirsoft.net/utils/registered_dll_view.html)来查看注册的 dll，我发现我唯一的可用对象是 Msxml2.FreeThreadedDOMDocument。 6.0 所以我只是改变了我的脚本来使用这个版本，从你的评论中我可以看出这不是最糟糕的决定

# php - 声音云返回 401 错误

> ID：14647791
> 
> 赞同：0
> 
> 时间：2013-02-01T13:51:38.950
> 
> 标签：php, curl, soundcloud

最近我开始使用 Sound cloud API (PHP)，我决定使用 PHP API

[https://github.com/mptre/php-soundcloud](https://github.com/mptre/php-soundcloud)。

但是当我试图通过这段代码从 Sound 云服务器获取访问令牌时：

```
// Get access token
try {
    $accessToken = $soundcloud->accessToken(isset($_GET['code']));
} catch (Services_Soundcloud_Invalid_Http_Response_Code_Exception $e) {
    exit($e->getMessage());
} 
```

在我的脚本中添加以下代码后，SC 返回 401 错误

$curlPath = '全路径\Of\cacert.crt';

$curlSSLSertificate = str_replace(array('/', '\'), DIRECTORY_SEPARATOR, $curlPath);

curl_setopt($ch, CURLOPT_CAINFO, $curlSSLSertificate);

我们添加此代码以修复“请求的 URL 以 HTTP 代码 0 响应”问题

在此之后我们收到 401 错误。

有没有办法解决这个问题。如果是，那么请建议我看看那里..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:51:00.610

我认为

```
$accessToken = $soundcloud->accessToken(isset($_GET['code'])); 
```

应该读

```
$accessToken = $soundcloud->accessToken($_GET['code']); 
```

# r - 在 ggplot 中使用多个尺寸比例

> ID：14647794
> 
> 赞同：7
> 
> 时间：2013-02-01T13:51:40.637
> 
> 标签：r, ggplot2, data-visualization

我正在尝试构建一个显示从一个类到另一个类的转换的图。我想要根据类属性来表示每个类的大小，以及从一个类到另一个类的箭头，根据从一个类到另一个类的转换次数来调整大小。

举个例子：

```
library(ggplot2)
points <- data.frame( x=runif(10), y=runif(10),class=1:10, size=runif(10,min=1000,max=100000) )
trans <- data.frame( from=rep(1:10,times=10), to=rep(1:10,each=10), amount=runif(100)^3 )
trans <- merge( trans, points, by.x="from", by.y="class" )
trans <- merge( trans, points, by.x="to", by.y="class", suffixes=c(".to",".from") )
ggplot( points, aes( x=x, y=y ) ) + geom_point(aes(size=size),color="red") + 
    scale_size_continuous(range=c(4,20)) + 
    geom_segment( data=trans, aes( x=x.from, y=y.from, xend=x.to, yend=y.to, size=amount ),lineend="round",arrow=arrow(),alpha=0.5) 
```

![示例图片](../Images/7d6a6da104a6aee0e7c774784d011998.png)

我希望能够将箭头以不同的比例缩放到圆圈。理想情况下，我想要一个带有两个刻度的图例，但我知道这可能是不可能的（[在一个 ggplot 上使用两个刻度颜色渐变](https://stackoverflow.com/questions/11752709/using-two-scale-colour-gradients-on-one-ggplot)）

有没有比对基础数据应用任意缩放更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:00:17.300

一个不错的选择是将类的周长生成为一系列点，并根据您的数据调整比例（直径）。然后将圆圈绘制为路径或多边形。

遵循一些示例代码。`circleFun`@joran 在[之前的帖子](https://stackoverflow.com/questions/6862742/draw-a-circle-with-ggplot2)中分享了这一点。这行得通吗？我认为你应该根据你的真实数据调整圆圈比例。

> **重要提示：**
> 另外，从您使用`arrow`without attaching来看`grid`，我假设您还没有更新`ggplot2`. 我更改了该代码以使用我的设置，并尝试不包含任何`ggplot2`可能导致向后兼容性问题的代码。

```
# Load packages
library(package=ggplot2)  # You should update ggplot2
library(package=plyr)     # To proccess each class separately

# Your data generating code
points <- data.frame(x=runif(10), y=runif(10),class=1:10,
                     size=runif(10,min=1000,max=100000) )
trans <- data.frame(from=rep(1:10,times=10), to=rep(1:10,each=10),
                    amount=runif(100)^3 )
trans <- merge(trans, points, by.x="from", by.y="class" )
trans <- merge(trans, points, by.x="to", by.y="class", suffixes=c(".to",".from") )

# Generate a set of points in a circumference
# Originally posted by @joran in
# https://stackoverflow.com/questions/6862742/draw-a-circle-with-ggplot2
circleFun <- function(center = c(0,0), diameter = 1, npoints = 100){
    r = diameter / 2
    tt <- seq(0,2*pi,length.out = npoints)
    xx <- center[1] + r * cos(tt)
    yy <- center[2] + r * sin(tt)
    return(data.frame(x = xx, y = yy))
}

# Get max and min sizes and min distances to estimate circle scales
min_size <- min(points$size, na.rm=TRUE)
max_size <- max(points$size, na.rm=TRUE)
xs <- apply(X=combn(x=points$x, m=2), MARGIN=2, diff, na.rm=TRUE)
ys <- apply(X=combn(x=points$y, m=2), MARGIN=2, diff, na.rm=TRUE)
min_dist <- min(abs(c(xs, ys)))  # Seems too small
mean_dist <- mean(abs(c(xs, ys)))

# Adjust sizes
points$fit_size <- points$size * (mean_dist/max_size)

# Generate the circles based on the points
circles <- ddply(.data=points, .variables='class',
                 .fun=function(class){
                    with(class,
                    circleFun(center = c(x, y), diameter=fit_size))
                 })
circles <- merge(circles, points[, c('class', 'size', 'fit_size')])

# Plot
ggplot(data=circles, aes(x=x, y=y)) +
    geom_polygon(aes(group=factor(class), fill=size)) + 
    geom_segment(data=trans,
                 aes(x=x.from, y=y.from, xend=x.to, yend=y.to, size=amount),
                 alpha=0.6, lineend="round", arrow=grid::arrow()) +
    coord_equal() 
```

# delphi - Firemonkey和Delphi XE3下如何依次浏览一个TTreeView的所有节点？

> ID：14647795
> 
> 赞同：3
> 
> 时间：2013-02-01T13:51:39.160
> 
> 标签：delphi, firemonkey

出于性能原因，我需要在不使用递归的情况下浏览树视图的项目。

TTreeview 提供了 GlobalCount 和 ItemByGlobalIndex 方法，但它只返回*可见*项目
我搜索了根类代码而没有找到所有节点的私有列表，FGlobalItems 似乎只保存需要渲染的项目

有没有办法顺序浏览树视图的所有项目（包括不可见和折叠的节点）？

这个问题适用于 Delphi XE3 / FM2

谢谢，

**[编辑 2 月 3 日]**
我接受了默认答案（不可能开箱即用），尽管我正在寻找一种方法来修补这方面的 firemonkey 树视图。
经过更多的分析，我发现 FGlobalItems 列表只保存扩展项，并在方法 TCustomTreeView.UpdateGlobalIndexes 中维护；
评论 FMX.TreeView 的第 924 行（如果 AItem.IsExpanded 则...）会导致构建节点的完整索引，并允许使用 ItemByGlobalIndex() 按顺序浏览所有节点，但可能会导致其他性能问题和错误...
没有更多线索，我将保留我的递归代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:43:09.487

这个问题本质上是问如何在没有递归的情况下遍历一棵树。遍历一棵树的方法有很多种；您的树恰好用可视控件中的节点表示这一事实是无关紧要的。

对于某些算法，用递归术语来考虑遍历更容易。这样，您就可以让编程语言通过将当前活动节点作为参数保留在堆栈中来跟踪您在树中的位置。如果您不想使用递归，那么您只需要自己跟踪进度即可。常用的工具包括堆栈和队列。

前序遍历意味着当您访问一个节点时，您先对该节点的数据执行操作，然后再对该节点的子节点执行操作。它对应于从上到下访问树视图控件的每个节点。你可以用一个堆栈来实现它：

```
procedure PreorderVisit(Node: TTreeNode; Action: TNodeAction);
var
  Worklist: TStack<TTreeNode>;
  i: Integer;
begin
  Worklist := TStack<TTreeNode>.Create;
  try
    Worklist.Push(Node);
    repeat
      Node := Worklist.Pop;
      for i := Pred(Node.Items.Count) downto 0 do
        Worklist.Push(Node.Items[i]);
      Action(Node);
    until Worklist.Empty;
  finally
    Worklist.Free;
  end;
end; 
```

以相反的顺序将孩子推入堆栈，以便它们以所需的顺序弹出。

在该代码中，`Action`代表您需要对每个节点执行的任何任务。您可以按照代码中的指定将其用作外部函数，也可以编写`PreorderVisit`包含特定任务代码的专用版本。

不过， TTreeView 实际上并不代表一*棵树*。它真的是一片*森林*（树木的集合）。那是因为没有代表根的单个节点。但是，您可以轻松地使用上面的函数来处理树中的所有节点：

```
procedure PreorderVisitTree(Tree: TTreeView; Action: TNodeAction);
var
  i: Integer;
begin
  for i := 0 to Pred(Tree.Items.Count) do
    PreorderVisit(Tree.Items[i], Action);
end; 
```

* * *

另一种利用 TTreeView 的特定结构进行前序遍历的方法是使用`GetNext`每个节点的内置方法：

```
procedure PreorderVisitTree(Tree: TTreeView; Action: TNodeAction);
var
  Node: TTreeNode;
begin
  if Tree.Items.Count = 0 then
    exit;
  Node := Tree.Items[0];
  repeat
    Action(Node);
    Node := Node.GetNext;
  until not Assigned(Node);
end; 
```

* * *

似乎无法获取 Firemonkey 树视图的隐藏节点。通过迭代内部树数据结构而不是尝试从 GUI 中提取信息，您可能会找到更好的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T11:53:36.533

这是我以非递归方式遍历树视图的函数。如果您有一个节点并且想要移动到下一个或上一个节点而无需遍历整个树，则使用起来很简单。

GetNextItem 通过查看它的第一个孩子来发挥作用，或者如果没有孩子，则在其自身之后查看下一个孩子的父母（并根据需要进一步通过父母）。

GetPrevItem 查看父项以查找前一项，并使用 GetLastChild 查找该项的最后一个子项（它确实使用递归，顺便说一句）。

请注意，编写的代码仅遍历扩展节点，但可以轻松修改为遍历所有节点（只需删除对 IsExpanded 的引用）。

```
function GetLastChild(Item: TTreeViewItem): TTreeViewItem;
begin
  if (Item.IsExpanded) and (Item.Count > 0) then
    Result := GetLastChild(Item.Items[Item.Count-1])
  else
    Result := Item;
end;

function GetNextItem(Item: TTreeViewItem): TTreeViewItem;
var ItemParent: TTreeViewItem;
  I: Integer;
  TreeViewParent: TTreeView;
  Parent: TFMXObject;
  Child: TFMXObject;
begin
  if Item = nil then
    Result := nil
  else if (Item.IsExpanded) and (Item.Count > 0) then
    Result := Item.Items[0]
  else
  begin
    Parent := Item.Parent;
    Child := Item;
    while (Parent <> nil) and not (Parent is TTreeView) do
    begin
      while (Parent <> nil) and not (Parent is TTreeView) and not (Parent is TTreeViewItem) do
        Parent := Parent.Parent;

      if (Parent <> nil) and (Parent is TTreeViewItem) then
      begin
        ItemParent := TTreeViewItem(Parent);
        I := 0;
        while (I < ItemParent.Count) and (ItemParent.Items[I] <> Child) do
          inc(I);
        inc(I);
        if I < ItemParent.Count then
        begin
          Result := ItemParent.Items[I];
          EXIT;
        end;
        Child := Parent;
        Parent := Parent.Parent
      end;
    end;

    if (Parent <> nil) and (Parent is TTreeView) then
    begin
      TreeViewParent := TTreeView(Parent);
      I := 0;
      while (I < TreeViewParent.Count) and (TreeViewParent.Items[I] <> Item) do
        inc(I);
      inc(I);
      if I < TreeViewParent.Count then
        Result := TreeViewParent.Items[I]
      else
      begin
        Result := Item;
        EXIT;
      end;
    end
    else
      Result := Item
  end
end;

function GetPrevItem(Item: TTreeViewItem): TTreeViewItem;
var Parent: TFMXObject;
  ItemParent: TTreeViewItem;
  TreeViewParent: TTreeView;
  I: Integer;
begin
  if Item = nil then
    Result := nil
  else
  begin
    Parent := Item.Parent;
    while (Parent <> nil) and not (Parent is TTreeViewItem) and not (Parent is TTreeView) do
      Parent := Parent.Parent;

    if (Parent <> nil) and (Parent is TTreeViewItem) then
    begin
      ItemParent := TTreeViewItem(Parent);
      I := 0;
      while (I < ItemParent.Count) and (ItemParent.Items[I] <> Item) do
        inc(I);
      dec(I);
      if I >= 0 then
        Result := GetLastChild(ItemParent.Items[I])
      else
        Result := ItemParent;
    end
    else if (Parent <> nil) and (Parent is TTreeView) then
    begin
      TreeViewParent := TTreeView(Parent);
      I := 0;
      while (I < TreeViewParent.Count) and (TreeViewParent.Items[I] <> Item) do
        inc(I);
      dec(I);
      if I >= 0 then
        Result := GetLastChild(TreeViewParent.Items[I])
      else
        Result := Item
    end
    else
      Result := Item;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-02T10:41:10.260

在 XE8 中，这对我有用：

```
function GetNextItem(Item: TTreeViewItem): TTreeViewItem;
var
   Parent: TFMXObject;
   Child: TTreeViewItem;
begin
    Result := nil;
    if Item.Count > 0 then
        Result := Item.Items[0]
    else
    begin
        Parent := Item.ParentItem;
        Child := Item;
        while (Result = nil) and (Parent <> nil) do
        begin
           if Parent is TTreeViewItem then
           begin
               if TTreeViewItem(Parent).Count > (Child.Index + 1) then
                   Result := TTreeViewItem(Parent).Items[Child.Index + 1]
               else
               begin
               Child := TTreeViewItem(Parent);
               if Child.ParentItem <> nil then
                   Parent := Child.ParentItem
               else
                   Parent := Child.TreeView;
               end;
           end
           else
           begin
            if TTreeView(Parent).Count > Child.Index + 1 then
                Result := TTreeView(Parent).Items[Child.Index + 1]
            else
                Parent := nil;
            end;
        end;
    end;
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-20T14:32:47.920

也`Item.ParentItem`可以为零！这就是我`Parent := Item.ParentItem`用以下几行替换该行的原因：

```
 if Item.ParentItem <> nil then
    Parent := Item.ParentItem
  else
    Parent := Item.TreeView; 
```

`GetNextItem`修正后的完整功能：

```
function GetNextItem(Item: TTreeViewItem): TTreeViewItem;
var
  Parent: TFMXObject;
  Child: TTreeViewItem;
begin
  Result := nil;
  if Item.Count > 0 then
    Result := Item.Items[0]
  else begin
    if Item.ParentItem <> nil then
      Parent := Item.ParentItem
    else
      Parent := Item.TreeView;
    Child := Item;
    while (Result = nil) and (Parent <> nil) do
    begin
      if Parent is TTreeViewItem then
      begin
        if TTreeViewItem(Parent).Count > (Child.Index + 1) then
          Result := TTreeViewItem(Parent).Items[Child.Index + 1]
        else begin
          Child := TTreeViewItem(Parent);
          if Child.ParentItem <> nil then
            Parent := Child.ParentItem
          else
            Parent := Child.TreeView;
        end;
      end else begin
        if TTreeView(Parent).Count > Child.Index + 1 then
          Result := TTreeView(Parent).Items[Child.Index + 1]
        else
          Parent := nil;
      end;
    end;
  end;
end; 
```

在德尔福 10.3.2 测试

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-02T07:50:44.690

我会添加一个函数来搜索部分文本到 TreeView，从 TreeView（TV）放置的 TEdit（搜索）。（特别感谢此答案所依据的上一篇文章）

这可以完美地使用 Enter 开始搜索并 F3 继续搜索。

```
// SEARCH ITEM (text partially or by particular ID in item.tag)

function GetNextItem(Item: TTreeViewItem): TTreeViewItem;
var
  Parent: TFMXObject;
  Child: TTreeViewItem;
begin
  Result := nil;
  if Item.Count > 0 then
    Result := Item.Items[0]
  else begin
    if Item.ParentItem <> nil then
      Parent := Item.ParentItem
    else
      Parent := Item.TreeView;
    Child := Item;
    while (Result = nil) and (Parent <> nil) do
    begin
      if Parent is TTreeViewItem then
      begin
        if TTreeViewItem(Parent).Count > (Child.Index + 1) then
          Result := TTreeViewItem(Parent).Items[Child.Index + 1]
        else begin
          Child := TTreeViewItem(Parent);
          if Child.ParentItem <> nil then
            Parent := Child.ParentItem
          else
            Parent := Child.TreeView;
        end;
      end else begin
        if TTreeView(Parent).Count > Child.Index + 1 then
          Result := TTreeView(Parent).Items[Child.Index + 1]
        else
          Parent := nil;
      end;
    end;
  end;
end;

function FindItem(aFromItem : TTreeViewItem ; Value: String = '' ; aID : integer = -1) : TTreeViewItem;
var I: Integer;
begin
  Result := nil;

  while aFromItem.Index < aFromITem.TreeView.Count do
  begin
    aFromItem := GetNextItem(aFromItem);
    if aFromItem <> nil then
    begin
      if (aID <> -1) and (aFromItem.Tag = aID) then
      begin
        Result := aFromItem;
        EXIT;
      end
      else if pos(Value, uppercase(aFromItem.Text)) > 0 then
      begin
        Result := aFromItem;
        EXIT;
      end;
    end
    else
      exit;
  end;
end;

procedure TCListeMedia.SearchKeyDown(Sender: TObject; var Key: Word; var KeyChar: Char; Shift: TShiftState);
var
  i : integer;
  vSearch : string;
begin
  if (Key = 13) or (Key = vkF3) then
  begin
    // Search or continue to search
    vSearch := Uppercase(Search.Text);
    if Key = 13 then
    begin
      i := 0;
      if TV.Count > 0 then
      begin
        if pos(vSearch, uppercase(TV.Items[0].Text)) > 0 then
          TV.Selected := TV.Items[0]
        else
          TV.Selected := FindItem(TV.Items[0], vSearch);
      end;
    end
    else if TV.Selected <> nil then
    begin
      i := 1 + TV.Selected.Index;
      TV.Selected := FindItem(TV.Selected, vSearch);
    end;
  end;
end;

procedure TCListeMedia.TVKeyDown(Sender: TObject; var Key: Word; var KeyChar: Char; Shift: TShiftState);
begin
  if (Key = vkF3) then
    SearchKeyDown(Sender, Key, KeyChar, Shift);
end; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-29T16:09:51.523

我为我的项目制作了这个功能，既快速又简单，你可以试试

```
function FindItem(const TreeView: TTreeView; const Value: Variant): TTreeViewItem;

      function ItemExist(const AItem: TTreeViewItem): Boolean;
      begin
           Result:= False;

           if AItem <> nil then
           begin
                {Set your condition here}
                if AItem.Text = Value then
                begin
                     FindItem:= AItem;
                     Exit(True);
                end;

                var I: Integer;
                for I := 0 to AItem.Count - 1 do
                begin
                     if ItemExist( AItem.ItemByIndex(I)) then
                          Break;
                end;
           end;
      end;

  var
    AItem: TTreeViewItem;
    I: Integer;
  begin
       Result:= nil;

       for I := 0 to TreeView.Count - 1 do
       begin
            AItem:= TreeView.ItemByIndex(I);
            if ItemExist(AItem) or (Result <> nil) then Break;
       end;
  end; 
```

# variables - let* 中未定义的变量

> ID：14647798
> 
> 赞同：0
> 
> 时间：2013-02-01T13:51:50.217
> 
> 标签：variables, lisp, let

出于某种原因，当我尝试 Cc Ck 包含代码的程序时：

```
(defun give-rank-vec (file-1 file-2)
  (let* ((cm-size (array-dimension (Swc (make-ff-array file-1)
                                        (make-ff-array file-2)) 
                                    0))
         (rank-dump-vec (make-array `(,cm-size)))     
         (Swc' (Swc (make-ff-array file-1)
                    (make-ff-array file-2))) 
         (Sbc' (Sbc (make-ff-array file-1) 
                    (make-ff-array file-2))))
    (dotimes (j cm-size) 
      (setf (svref rank-dump-vec j) 
            (/ (get-element Sbc' j j) 
               (get-element Swc' j j)))))   
   rank-dump-vec) 
```

我收到一条错误消息，提示“变量`rank-dump-vec`未定义”。我不确定为什么会这样——我相信反引号和逗号是可以的。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:56:10.813

您最后的参考`rank-dump-vec`是在您的`let*`表格之外。在前面移动它`)`。

# c++ - c++ 分配 *new Object() 来引用

> ID：14647800
> 
> 赞同：0
> 
> 时间：2013-02-01T13:51:55.980
> 
> 标签：c++, reference, allocation

我有一个关于在 C++ 中分配的问题。我有这个代码：

```
vector<unsigned char> &v = *new vector<unsigned char>(); 
```

现在的问题是，取消引用对象并将其直接分配给引用通常是一个好主意吗？

在我看来，这使得使用对象更容易，因为现在你可以这样做：

```
v.push_back('a');
v[0]; 
```

代替

```
v->push_back('a');
(*v)[0]; 
```

最后，我能做到

```
delete &v; 
```

释放我的堆

仅仅因为（相同）好答案的数量：我知道我可以只使用堆栈变量，但就我而言，我需要它在堆上！但是使用堆或堆栈变量的问题是另一个问题。

所以我保持这个例子简单，特别是没有问我是否应该分配变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:59:43.447

> 取消引用对象并将其直接分配给引用通常是一个好主意吗？

一点都不。

如果您不需要动态分配，因为对象只需要持续与当前范围一样长，那么请改为使用自动变量：

```
vector<unsigned char> v; 
```

如果您确实需要一个动态对象，那么尝试伪装它是忘记它需要删除的好方法。最好的办法是使用智能指针，这样您就根本不需要记住删除它；如果失败，请使用指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:34:56.193

这纯粹是一个风格问题。我工作过的所有地方都没有使用过这个约定，所以它可能会影响你组织中的新人，但它*是*一个有效的约定。

它应该是何时使用指针以及何时使用引用的更大定义的一部分。（你会发现其中有很多变化；我在不同的公司中至少使用了三种不同的约定。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:59:14.487

由于 Joachim Pileborg 在他的评论中给出的原因，将堆对象主要存储在引用变量中并不是一个好主意。您最终需要删除对象，最好通过指针变量来完成（在引用中，人们总是想知道实际对象是否存在于其他地方）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T14:03:31.580

你可以这样做：

```
...
{
    vector<unsigned char> v; // this allocates the vector in the stack
    v.push_back('a');
    v[0];
} 
... 
```

据我所知，不需要在堆中分配向量。

您应该阅读有关堆和堆栈内存的信息：

*   [堆栈和堆是什么以及在哪里？](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)

*   [C++ 中的堆栈、静态和堆](https://stackoverflow.com/questions/408670/stack-static-and-heap-in-c?lq=1)

# ruby - Sequel 模型找不到在 Sinatra 应用程序文件中定义的连接

> ID：14647802
> 
> 赞同：1
> 
> 时间：2013-02-01T13:52:00.597
> 
> 标签：ruby, gem, sinatra, sequel

我正在构建一个简单的 Sinatra 应用程序来显示存储在数据库中的一些项目。我碰巧找到了本应该让事情变得更容易的 gem [sinatra-sequel 。](http://github.com/rtomayko/sinatra-sequel)

为了保持模块化，我将 Sinatra 应用程序定义在一个文件中，并将模型定义在另一个文件中。不幸的是，模型找不到连接，导致我的应用程序崩溃。这个[sequel-sinatra issue中描述了同样的事情](http://github.com/rtomayko/sinatra-sequel/issues/1)

我可以在 app 类中定义我的模型，但如果有的话，我更喜欢更优雅的解决方案。

# c# - 如何使用 XDocument 区分 xml 中不同父层次结构中的两个完全相同的元素

> ID：14647803
> 
> 赞同：0
> 
> 时间：2013-02-01T13:52:02.093
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我有一个如下的 xml：

```
<return>
  <exams>
    <remove>
    </remove>
    <add>
        <exam errorCode="0" examRef="1" />
    </add>
    <add>
        <exam errorCode="0" examRef="1" />
        <exam errorCode="0" examRef="1" />
    </add>
  </exams>
</return> 
```

我正在构建一个实用程序，可以通过提取其祖先层次结构来区分每个节点。例如：

```
return[0].exams[0].add[0].exam[0] //This indicates the first exam node in the first add element.
return[0].exams[0].add[1].exam[0] //This indicates the first exam node in the second add element.
return[0].exams[0].add[1].exam[1] //This indicates the second exam node in the second add element. 
```

等等。我到目前为止的代码是：

```
 private string GetAncestorNodeAsString(XElement el)
    {
        string ancestorData = string.Empty;

        el.Ancestors().Reverse().ToList().ForEach(anc =>
        {
            if (ancestorData == string.Empty)
            {
                ancestorData = String.Format("{0}[0]", anc.Name.ToString());
            }
            else
            {
                ancestorData = String.Format("{0}.{1}[0]", ancestorData, anc.Name.ToString());
            }
        });

        if (ancestorData == string.Empty)
        {
            ancestorData = el.Name.ToString();
        }
        else
        {
            ancestorData = String.Format("{0}.{1}[0]", ancestorData, el.Name.ToString());
        }
        return ancestorData;
    } 
```

此代码返回如下内容：

```
return[0].exams[0].add[0].exam[0] //zeros here are hardcoded in the code and I need some mechanism to get the position of each of the element in the xml. 
```

我可以建立元素的位置，例如：

```
 var elements = el.Elements().Select((e, index) => new
            {
                node = e,
                position = index
            }); 
```

但这只会给我一个元素中只有直接子元素的位置。我需要识别所有祖先及其在 xml 中的位置。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:13:20.367

使用递归方法：

```
private static string GetAncestorNodeAsString(XElement el)
{
    if (el.Parent == null)
        return String.Format("{0}[0]", el.Name.LocalName);
    else
        return String.Format("{0}.{1}[{2}]", 
            GetAncestorNodeAsString(el.Parent), 
            el.Name.LocalName, 
            el.ElementsBeforeSelf().Count(e => e.Name == el.Name));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:09:33.937

这是将返回元素索引的方法：

```
private int GetElementIndex(XElement e)
{
    return e.NodesBeforeSelf().OfType<XElement>().Count(x => x.Name == e.Name);
} 
```

以及您修改后的代码。请记住 - 我曾经`AncestorsAndSelf`使用单循环。我也避免创建元素列表。并用于`StringBuilder`聚合结果并避免创建字符串。

```
private static string GetAncestorNodeAsString(XElement e)
{
    return e.AncestorsAndSelf().Reverse()
            .Aggregate(
               new StringBuilder(),
               (sb, a) => sb.AppendFormat("{0}{1}[{2}]", 
                          sb.Length == 0 ? "" : ".", a.Name, GetElementIndex(a)),
               sb => sb.ToString());
} 
```

# asp.net - 将数据库连接到 Visual Studio 2010 是否需要 SQL Management Studio？

> ID：14647804
> 
> 赞同：0
> 
> 时间：2013-02-01T13:52:07.157
> 
> 标签：asp.net, sql-server, visual-studio-2010, sql-server-2008

我无法在我的笔记本电脑上下载 SQL Management Studio，所以我放弃了尝试。我已经有了我的数据库（从其他地方得到），我无法将它连接到我的 Visual Studio。它一直给我这个错误......

**建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）**

我想知道如果我想将我的数据库连接到我在 Visual Studio 中创建的网站，是否必须拥有 SQL Management Studio？我分配/连接了我的数据源 = localhost。

当我下载 Visual Studio 2010 时，SQL Server 2008 文件夹中只包含 3 个文件……“SQL Server 配置管理器”、“SQL Server 错误和使用情况报告”和“SQL Server 安装中心”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:53:45.953

不，您不需要业务管理工作室它来连接到 VS2010 中的数据库。但是，您确实需要 Sql Server。

您可以尝试安装 SQL Express（免费）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:32:59.697

这是解决方案：

单击所有程序 --> 选择 Microsoft Server 2008 文件夹 --> 配置工具 --> SQL Server 配置管理器 --> SQL Server 服务。

现在，确保 SQL Server 的“状态”为“正在运行”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:06:47.830

如果您尝试连接到已经在另一台机器上运行的数据库，听起来您需要本机客户端。

从这里下载： http: [//www.microsoft.com/en-us/download/details.aspx?id=16978#SNAC](http://www.microsoft.com/en-us/download/details.aspx?id=16978#SNAC)

# windows-phone - 在 WP8 中的特定时间后自动重定向

> ID：14647805
> 
> 赞同：1
> 
> 时间：2013-02-01T13:52:04.783
> 
> 标签：windows-phone

我正在开发 Windows Phone 8 应用程序。我有两页；其中一页是启动页；一旦用户打开应用程序，此页面将在特定时间后自动出现；它将用户重定向到应用程序的主菜单。

如何在 WP8 中的特定时间后进行自动重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:21:02.647

可能是这些代码行可以帮助您：

```
public partial class MainPage : PhoneApplicationPage
{
    private DispatcherTimer timer;

    // Constructor
    public MainPage()
    {  
        InitializeComponent();

        timer = new DispatcherTimer();
        //Set your specific time here using TimeSpan instance
        timer.Interval = TimeSpan.FromSeconds(2);

        timer.Tick += (s, e) => {
            var frame = App.Current.RootVisual as PhoneApplicationFrame;
            frame.Navigate(new Uri("/Page1.xaml", UriKind.Relative));
        };
        timer.Start();
    }    
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:35:16.363

查看[此答案](https://stackoverflow.com/questions/13874981/how-to-schedule-a-repeating-task-to-count-down-a-number-in-windows-phone-8)以了解计时器实现。剩下要做的就是，当计时器结束时，调用导航方法导航到主菜单。

# android - 通过 Id (int) 获取视图 Id (string) 的更简单方法

> ID：14647810
> 
> 赞同：66
> 
> 时间：2013-02-01T13:52:15.907
> 
> 标签：android

我是android和java的新手，如果这是一个太基本的问题，我很抱歉，但我试图在论坛和谷歌中找到解决方案，但我做不到。

我的布局中有 24 个按钮，所有这些按钮都做类似的事情，所以我想创建一个通用功能。但首先我需要知道按钮的名称（xml id）。

这是按钮的 XML 代码：

```
 <Button
      android:id="@+id/add_04"
      android:layout_width="42dp"
      android:layout_height="wrap_content"
      android:layout_gravity="center"
      android:layout_marginLeft="15dp"
      android:background="@xml/zbuttonshape"
      android:onClick="onClick"
      android:text="@string/mas" /> 
```

我为所有按钮设置了 android:onClick="onClick" 。

在我的活动中，我创建了一个新函数 onClick：

这是我尝试过的代码：

```
public void onClick(View v) {
        String name = v.getContext().getString(v.getId());
        String name2 = context.getString(v.getId());
        String name3 = getString(v.getId());
        String name4 = getResources().getString(v.getId()); 
} 
```

但是当我尝试获取名称（在本例中为“add_04”）时，我总是得到“假”。

最后我找到了一个解决方案，代码如下：

```
import java.lang.reflect.Field;

String name5 = null;
Field[] campos = R.id.class.getFields();
for(Field f:campos){
     try{
        if(v.getId()==f.getInt(null)){
            name5 = f.getName();
            break;
        }
       }
       catch(Exception e){
        e.printStackTrace();
    }
} 
```

我的问题是是否有更简单的方法来获取此 ID？

提前致谢。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2013-08-05T20:58:26.963

像这样：

```
/**
 * @return "[package]:id/[xml-id]"
 * where [package] is your package and [xml-id] is id of view
 * or "no-id" if there is no id
 */
public static String getId(View view) {
    if (view.getId() == View.NO_ID) return "no-id";
    else return view.getResources().getResourceName(view.getId());
} 
```

我在视图构造函数中使用它来制作更有意义的标签

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-02-01T14:08:28.077

这种方法一开始就被误导了。如果你想将一段任意数据（例如一个字符串）与一个视图相关联，这就是`tag`目的。ID 是数字的，最好保持这种状态。不过需要注意的是，标签在 Android 中并不是唯一的，请注意同一视图树中的意外标签冲突。

稍后编辑：OP 的问题是[XY 问题](https://www.perlmonks.org/?node=XY+Problem)。也就是说，仅问题标题*本身*就是一个合法的问题。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-02-01T14:01:05.263

编辑：

你必须使用

`getResources().getResourceEntryName(int resid);`

如果要检索与 resId 关联的条目名称

或者

您可以使用`getIdentifier()` 来检索给定资源名称的资源标识符。

例如：

```
int id = this.getResources().getIdentifier("yourtext", "string", this.getPackageName()); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-02-01T14:02:32.770

您可以通过以下方式检查每个按钮的 ID：

```
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.add_04:
        Toast.makeText(MainActivity.this, "1", Toast.LENGTH_LONG).show();
        break;
    case R.id.add_05:
        Toast.makeText(MainActivity.this, "2", Toast.LENGTH_LONG).show();
        break;
    }
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-07-16T07:05:15.400

```
 Use this Approach to get View Id by Programming .
  <TextView
    android:id="@+id/tv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Hello World!"
    />

    String id=getResources().getResourceEntryName(textView.getId());
    Toast.makeText(this,id,Toast.LENGTH_LONG).show(); 
```

你会得到 Result ; 电视

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-05-13T10:05:24.130

您可以将此 toString() 放在 Android 视图中，它将返回字符串资源 ID。

```
@Override
public String toString() {

    Context context;
    Resources r = null;

    context = getContext();

    if (context != null) {
        r = context.getResources();
    }

    String entryName = null;

    if (r != null)
        entryName = r.getResourceEntryName(getId());

    return entryName;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-12-17T15:20:53.390

Kotlin 版本（来自@gadget）作为视图扩展：

```
val View.stringId: String
    get() {
        return if (this.id == -0x1)
            "no-id"
        else
            this.resources.getResourceName(this.id)
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-07-19T06:18:43.213

这是一个较晚的答案，但可能对寻找一种方法来获取任何视图/可绘制/字符串编程的资源ID（int）的人有用。

来自 res/drawable 的图像

```
int resID = getResources().getIdentifier("my_image", 
            "drawable", getPackageName()); 
```

根据资源名称查看

```
int resID = getResources().getIdentifier("my_resource", 
            "id", getPackageName()); 
```

细绳

```
int resID = getResources().getIdentifier("my_string", 
            "string", getPackageName()); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-27T10:26:47.297

@King of Masses 的回答很棒。这是我在 Kotlin 中的：

**来自 res/drawable 的图像**

```
val viewId = context.resources.getIdentifier("my_image", "drawable", context.packageName) 
```

**根据资源名称查看**

```
val viewId = context.resources.getIdentifier("my_textview_id", "id", context.packageName) 
```

**细绳**

```
val viewId = context.resources.getIdentifier("my_string", "string", context.packageName) 
```

**布局**

```
val viewId = context.resources.getIdentifier("my_custom_layout", "layout", context.packageName) 
```

# c# - 使 Guid 属性线程安全

> ID：14647811
> 
> 赞同：5
> 
> 时间：2013-02-01T13:52:13.207
> 
> 标签：c#, multithreading

我的一个类具有 Guid 类型的属性。该属性可以由多个线程同时读取和写入。我的印象是对 Guid 的读写不是原子的，因此我应该锁定它们。

我选择这样做：

```
public Guid TestKey
{
    get
    {
        lock (_testKeyLock)
        {
            return _testKey;
        }
    }

    set
    {
        lock (_testKeyLock)
        {
            _testKey = value;
        }
    }
} 
```

（在我的班级中，对 Guid 的所有访问也是通过该属性完成的，而不是直接访问 _testKey。）

我有两个问题：

（1）真的有必要像那样锁定Guid以防止读取撕裂吗？（我很确定它是。）

（2）这是一种合理的锁定方式吗？还是我需要这样做：

```
get
{
    Guid result;

    lock (_testKeyLock)
    {
        result = _testKey;
    }

    return result;
} 
```

[编辑] 这篇文章确实证实了 Guids 会受到撕裂的影响：http: [//msdn.microsoft.com/en-us/magazine/jj863136.aspx](http://msdn.microsoft.com/en-us/magazine/jj863136.aspx)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T13:55:56.623

1：是的；如果您有一个线程读取和一个线程写入，以防止损坏值；`Guid`不保证是原子的

2：“如下所示”：它们实际上是相同的；在 IL 级别，您**不能** `ret`从`try`/`catch`块，因此编译器通过引入局部变量来实现您的第一个示例，就像在您的第二个示例中一样。

另一种方法可能是装箱；引用*是*原子的：

```
object boxedTestKey;
public Guid TestKey
{
    get { return (Guid)boxedTestKey; }
    set { boxedTestKey = value; }
} 
```

不需要锁定，但盒子的开销很小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T13:55:22.690

1）真的有必要像那样锁定Guid以防止读取撕裂吗？（我很确定它是。）

是的。

2）这是一种合理的锁定方式吗？

再次：是的。

如果存在一种`Interlocked`方法，`Guid`那会更好（更快）。

对于`double`（另一个非原子结构），`Interlocked`不需要引用，也不需要引用。

因此，作为一种模式，这仅适用于不支持的较大结构`Interlocked`。

# php - 如何在 HTML 的下拉列表中设置选定值？

> ID：14647817
> 
> 赞同：2
> 
> 时间：2013-02-01T13:52:40.090
> 
> 标签：php, html, mysql

如何在编辑表单的 HTML 下拉列表中设置选定值？

选择的值来自MySql

此代码无效！>> 选定=""

```
<select name="TutorGender" id="TutorGender" selected="<?php echo $Gender ?>">
    <option value="Male">Male</option>
    <option value="Female">Female</option>
</select> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T13:57:51.510

W3Schools 在这里很好地解释了这一点 [http://www.w3schools.com/tags/att_option_selected.asp](http://www.w3schools.com/tags/att_option_selected.asp)

您的代码可能看起来像这样。

```
 <select name="TutorGender" id="TutorGender">
      <option value="Male" <?php if($Gender == "Male") echo "selected"; ?>>Male</option>
      <option value="Female" <?php if($Gender == "Female") echo "selected"; ?>>Female</option>
 </select> 
```

虽然我的 PHP 语法可能有点偏离，但你应该明白了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:54:20.517

Selected 出现在`option`标签上，而不是`select`标签上。

```
<select name="TutorGender" id="TutorGender" >
<option value="Male" selected="selected">Male</option>
<option value="Female">Female</option>
</select> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T13:55:07.540

```
<select name="TutorGender" id="TutorGender">
    <option value="Male" <?php if($Gender=='Male') echo 'selected' ?>>Male</option>
    <option value="Female" <?php if($Gender=='Female') echo 'selected' ?>>Female</option>
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:54:21.990

该`selected`属性出现在应该选择的选项上，而不是 select 元素上（如果它出现在 select 元素本身上，那么（因为可以同时选择多个选项）它必须采用`id`s的列表并且您需要为每个选项添加一个 id）。

```
<option value="foo" selected>Foo</option> 
```

通常，您将有一个值数组（或值/人类文本对），您将循环这些值。（即你不会硬编码你的选项）

每次您绕过循环时都会生成一个选项，并测试您是否应该每次都包含一个选定的属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T13:55:00.720

```
<option <?php if($Gender == 'Male'){ echo(' selected '); } ?> value="Male">Male</option>
<option <?php if($Gender == 'Female'){ echo(' selected '); } ?> value="Female">Female</option> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T13:57:55.217

```
<select name="TutorGender" id="TutorGender">

<?php
$genders = array( 'Male', 'Female' );
foreach( $genders as $value )
{
    $selected = ( $Gender == $value )? ' selected="selected"': '';
    echo '<option value="' . $value . '"' . $selected . '>' . $value . '</option>';
}
?>

</select> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-02T00:08:04.477

只是另一种方式。我更喜欢对这样的代码使用速记 if 语句。

```
<select name="TutorGender" id=\"TutorGender\">
  <option value="Male" <?php echo ($Gender == "Male" ? "selected" : ""); ?>>Male</option>
  <option value="Female" <?php echo ($Gender == "Female" ? "selected" : ""); ?>>Female</option> 
```

这是使用速记“if”语句的[链接。](http://davidwalsh.name/php-ternary-examples)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-13T13:13:14.003

在我需要使用选择作为通过数据库填充的用户更新表单的一部分的情况下，我发现数组选项效果最好。逐行选项很快就会变得非常笨拙。这样，如果需要任何新选项，您只需向 $optionDept 数组添加一个选项。在此示例中，“$row['Dept']”来自数据库请求的较大总体结果。

```
$optionDept= array('sales','warehouse','inspection','production','accounts','admin','inactive');

$optionCount= count($optionDept);

echo"<select name=\"UserDept\">";
for($x = 0; $x < $optionCount; $x++) {
echo"<option value=".$optionDept[$x];
if($optionDept[$x]==$row['Dept']){echo " selected";}
echo">".$optionDept[$x]."</option>";}
echo"</select</P> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-02-01T13:56:16.310

试试这个

如果你想保持男性为选中状态

```
<select name="TutorGender" id="TutorGender" >
<option value="Male" selected="selected">Male</option>
<option value="Female">Female</option>
</select> 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-02-17T10:51:13.737

这对我有用：我通过提交的 GET 方法发送我想要恢复的值，然后在 php 中，在页面的末尾（如果没有，如果代码在 php 之前，将设置默认值）我设置了这些值。

```
echo "select_language.selectedIndex = ".$_GET['iL'].";"; 
```

# django - 使用其他视图的 sweetpie api

> ID：14647819
> 
> 赞同：1
> 
> 时间：2013-02-01T13:52:50.227
> 
> 标签：django, api, tastypie

我从普通的 django 视图中调用tastepie api。

```
def test(request):

    view = resolve("/api/v1/albumimage/like/user/%d/" % 2 )

    accept =  request.META.get("HTTP_ACCEPT")
    accept += ",application/json"
    request.META["HTTP_ACCEPT"] = accept   
    res = view.func(request, **view.kwargs)

    return HttpResponse(res._container) 
```

[在视图中使用 sweetpie 资源](https://stackoverflow.com/questions/7795463/using-tastypie-resource-in-view)
[从另一个视图调用我服务器上的 API](https://stackoverflow.com/questions/6524709/call-an-api-on-my-server-from-another-view)

实现同样的目标，但似乎更难。

我调用 api 的方式可以接受吗？
此外，如果我能在 python 字典而不是 json 中得到结果，那就太棒了。
可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:16:13.640

如果您需要字典，则意味着您必须更好地设计您的应用程序。不要在你的观点中做重要的事情，也不要在 Tastypie 方法中做重要的事情。重构它以具有共同的功能。

作为一般规则，**视图必须很小**。不超过 15 行。这**使得代码可读、可重用且易于测试。**

我将提供一个示例以使其更清楚，假设在该 Tastypie 方法中您必须创建一个 Like 对象，可能会发送一个信号：

```
class AlbumImageResource(ModelResource):
    def like_method(self, request, **kwargs):
        # Do some method checking

        Like.objects.create(
            user=request.user,
            object=request.data.get("object")
        )
        signals.liked_object(request.user, request.data.get("object"))

        # Something more 
```

但是，如果您需要在视图中重用该行为，正确的做法是将其分解为不同的函数：

```
# myapp.utils
def like_object(user, object):
    like = Like.objects.create(
        user=request.user,
        object=request.data.get("object")
    )
    signals.liked_object(request.user, request.data.get("object"))
    return like 
```

现在您可以从您的 API 方法和视图中调用它：

```
class AlbumImageResource(ModelResource):
    def like_method(self, request, **kwargs):
        # Do some method checking
        like_object(request.user, request.data.get("object")) # Here! 
```

而在你看来...

```
# Your view
def test(request, object_id):
    obj = get_object_or_404(Object, id=object_id)
    like_object(request.user, obj)
    return HttpResponse() 
```

希望能帮助到你。

# ruby-on-rails - 执行 Rspec 时出现未定义的方法错误

> ID：14647822
> 
> 赞同：0
> 
> 时间：2013-02-01T13:53:10.413
> 
> 标签：ruby-on-rails, ruby, rspec

这是我的 work_spec.rb 文件的样子。运行该代码时出现**by_letter**未定义方法错误。

```
require 'spec_helper'
require 'factory_girl_rails'

describe Work do
  it "has a valid factory" do
    FactoryGirl.create(:work).should be_valid
  end
  it "is invalid without a last_name" do
     FactoryGirl.build((:work), last_name: nil).should be_valid
  end

  it "returns a sorted array of result that match" do
    smith = FactoryGirl.create((:work), last_name: "smith")
    jones = FactoryGirl.create((:work), last_name: "jones")
    johnson = FactoryGirl.create((:work), last_name: "johnson")

    Work.by_letter("j").should == [johnson, jones]
  end
end

Error receved while running
     Work returns a sorted array of result that match
     Failure/Error: Work.by_letter("j").should == [johnson, jones]
     NoMethodError:
     undefined method `by_letter' for #<Class:0x0000000429a708>
     # ./spec/models/work_spec.rb:17:in `block (2 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:40:34.027

它失败的原因是你没有`by_letter`在`Work`类中定义方法。

# php - & 作为 PHP 中的算术运算符

> ID：14647827
> 
> 赞同：2
> 
> 时间：2013-02-01T13:53:27.743
> 
> 标签：php, math

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

我正在处理一些遗留代码，我遇到了以下函数：

```
function is_odd($number) {
   return $number & 1; // 0 = even, 1 = odd
} 
```

我从来没有见过一种方法来检查一个数字是否像以前那样写成奇数，我只是想了解他们实际上在做什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T13:59:17.630

`&`是一个[按位与](http://en.wikipedia.org/wiki/Bitwise_operation#AND)，它基本上可以工作，因此对于`1`两个操作数中的每一位，它都会产生`1`结果值和`0`所有其他位。如果将任何数字转换为其位表示，您很快就会看到它是确定数字是偶数还是奇数的最低位，例如：

```
 5 = 101
  10 = 1010
  13 = 1101
1030 = 10000000110 
```

最低位（最右边的位，也称为最低有效位）对于每个奇数为 1，对于每个偶数为 0。除了最低位之外的所有其他位总是`$n & 1`会产生`0`（因为数字 1 只有一个位，您可以想象其余位用 0 左填充以匹配另一个操作数的长度）。所以基本上这个操作归结为比较操作数的最低位，并且`1 & 1`是1，所有其他组合都是0。所以基本上当`$n & 1`产生1时，它意味着数字是奇数，否则它是偶数。

**编辑。**

这里有几个例子来演示我之前给出的示例值的按位和工作原理，括号中的数字是原始的十进制数：

```
 101 (5)
& 001 (1)
  ---
  001 (1) = true

  1010 (10)
& 0001 (1)
  ----
  0000 (0) = false

  1101 (13)
& 0001 (1)
  ----
  0001 (1) = true

  10000000110 (1030)
& 00000000001 (1)
  -----------
  00000000000 (0) = false 
```

从这里你可以很容易地看到，只有当两个操作数的最右边的位都是 1 时，结果才为真。

# java - 使用 @ManyToOne 时的列名

> ID：14647830
> 
> 赞同：0
> 
> 时间：2013-02-01T13:53:36.200
> 
> 标签：java, hibernate

当我使用`@OneToMany`/ `@ManyToOne`Hibernate 时，假定列名是“task_id”。是否有一个注释来告诉 Hibernate 列名是例如“xxx”？

表架构：

```
Project      Task
-------      ----
id           id
text         text
             project 
```

代码：

```
class Project {
    ...
    @OneToMany(mappedBy = "task")
    private List<Task> tasks;
}

class Task {
    ...
    @ManyToOne
    private Project project;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:56:31.767

是的，它叫`@JoinColumn`…… 像这样使用：

```
@JoinColumn(name = "xxx") 
```

您将在关系的拥有方使用它 ( `Task`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:07:48.167

```
@ManyToOne
@JoinColumn(name="xxx")
private Project project; 
```

从 Jpa 2.0 规范，`JoinColumn`接口的声明

```
@Target({METHOD, FIELD}) @Retention(RUNTIME)
  public @interface JoinColumn {
  String name() default "";
  String referencedColumnName() default "";
  boolean unique() default false;
  boolean nullable() default true;
  boolean insertable() default true;
  boolean updatable() default true;
  String columnDefinition() default "";
  String table() default "";
} 
```

# ios - NSLog 对应用程序性能有影响吗？

> ID：14647833
> 
> 赞同：4
> 
> 时间：2013-02-01T13:53:35.237
> 
> 标签：ios, performance, nslog

嗨，我的应用程序正在进行大量计算，因为我有`NSLog`声明称其至少是 11 MB 的大应用程序的 2000 倍。我正在考虑从我的应用程序中删除它以提高性能。我以正确的方式思考？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:55:40.330

是的，当调试器正在运行并发出 NSLog 调用时，性能可能会受到严重影响。另外，看看[这个](https://stackoverflow.com/questions/7461338/iphone-ipad-does-having-many-nslog-calls-affect-app-preformance-or-memory)问题。

# c# - 如何获取开始日期和结束日期之间的持续时间

> ID：14647835
> 
> 赞同：1
> 
> 时间：2013-02-01T13:53:59.367
> 
> 标签：c#, .net

> **可能重复：**
> [将天数转换为人类可读的持续时间文本](https://stackoverflow.com/questions/296842/converting-days-into-human-readable-duration-text)
> [如何计算给定开始和结束时间的年月差](https://stackoverflow.com/questions/6698091/how-do-i-calculate-difference-in-years-and-months-given-a-start-and-end)

我使用 (结束日期 - 开始日期).TotalDays 它返回总天数。例如，145 天

但我不想要总天数。

可以将 145 天转换为 3 个月和 25 天，如下所示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:13:25.070

比最初看起来要难一些...

我想你可以做这样的事情，它的优点是计算实际的日历月，而不是估计月份是 30 天或类似的。

```
var now = DateTime.Now;
var future = DateTime.Now.AddDays(new Random().NextDouble() * 365);
//dates above for example only

var xx = Enumerable.Range(0,int.MaxValue)
        .Select(i => new{numMonths = i, date = now.AddMonths(i)})
        .TakeWhile(x => x.date < future)
        .Last();
var remainingDays = (future - xx.date).TotalDays;
Console.WriteLine("{0} months and {1} days",xx.numMonths,remainingDays); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:58:27.753

如果您假设一个月为 30 天，则以下内容可能会有所帮助。

```
var start = DateTime.Today;

var end = DateTime.Today.AddDays(99);

var timeSpan = end.Subtract(start);

var months = (int)timeSpan.TotalDays / 30;

var days = timeSpan.TotalDays % 30;

var str = string.Format("{0} months, {1} days", months, days); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:12:34.013

如果你想要年、月、日：

1.  年 = 您可以从结束日期中减去的最大年数，使得结果仍然 > 开始日期。
2.  月 = 您可以从之前的结果中减去的最大月数，使得结果仍然 > 开始日期。
3.  天数 = 先前结果与开始日期之间的天数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:57:20.907

要克服一个月的天数问题，只需查看年份和月份

```
DateTime d1 = New DateTime(2002, 1, 1);
DateTime d2 = New DateTime(2000, 10, 1);
int years = Math.Abs((d1.Year - d2.Year));
int months = ((years  * 12)  + Math.Abs((d1.Month - d2.Month))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T13:58:24.930

两个`DateTime`对象的差异导致一个`TimeSpan`对象。由于一个月所跨越的时间在月份之间是不一致的，那么一个`TimeSpan`对象如何用几个月来表示呢？

为了计算两个日期之间的月数，您需要提前知道开始日期和结束日期，以便计算它们之间的实际月数（记住闰年等）。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-02-01T13:56:45.623

尝试使用时间跨度来串...

# mysql - 如何使用 LIMIT 始终包含第一行

> ID：14647843
> 
> 赞同：0
> 
> 时间：2013-02-01T13:54:30.923
> 
> 标签：mysql, select, limit

我想知道是否有办法使用`LIMIT`运算符始终在结果集中包含第一行。我的意思是不管指定的任何范围。例如：

```
SELECT * FROM `table` LIMIT 5, 10 
```

应该返回第一行和第 6 行到第 15 行，或者：

```
SELECT * FROM `table` LIMIT 200, 30 
```

应该返回第一行和第 201 行到第 231 行。有没有办法做到这一点？

**编辑**第一行 id 始终为 0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:56:53.220

我没有看到另一种方式：

```
(SELECT * from table LIMIT 1)
UNION
(SELECT * FROM table LIMIT 5, 10) 
```

或正如斯科特指出的那样，带有新信息；）

```
SELECT * from table Where id = 0
UNION
(SELECT * FROM table LIMIT 5, 10) 
```

不要忘记[括号](http://dev.mysql.com/doc/refman/5.0/en/union.html)：

> 要将 ORDER BY 或 LIMIT 应用于单个 SELECT，请将子句放在括 SELECT 的括号内：
> 
> (SELECT a FROM t1 WHERE a=10 AND B=1 order by a LIMIT 10) UNION (SELECT a FROM t2 WHERE a=11 AND B=2 ORDER BY 10);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:57:14.100

您可以使用 UNION 连接 2 个选择：`(SELECT * FROM table LIMIT 1) UNION (SELECT * FROM table LIMIT 5, 10)`

# php - 工厂可用性监视器的想法

> ID：14647851
> 
> 赞同：0
> 
> 时间：2013-02-01T13:54:54.513
> 
> 标签：php, mysql, jquery

我想做的是建立一个页面，可以监控一个工厂的可用性，即JCB一天工作了多少小时？我希望有一个按钮可以在页面上更改工厂的状态（简单），但我想跟踪状态何时更改，然后能够计算给定时期的可用性（我的位我坚持）。

我正在努力思考如何构建数据库和 php 脚本以允许我这样做......任何想法/帮助都非常感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:08:56.840

这不是解决您的问题的方法，只是一些可以帮助您自己找到解决方案的想法。

首先，拿起一支**笔（铅笔）和一张纸**，开始写下你的想法，你如何做这个和那个，数据库设计，以及任何你认为相关的东西。过了一会儿，你就会知道如何开始了。

从您提出的想法开始，即使您不相信它是最好的，并且可能存在一些缺陷（如性能）。几个小时后，您可能不得不从头开始，但您将确切地知道您之前遇到的问题，并且可能对您缺少什么/您做对了什么有一个很好的了解。

就是这样。**反复试验**，这就是编程的工作方式，这样做你会成为一个越来越好的程序员。

PS：如果您想要准确的代码示例，请继续编写代码，并发布与代码相关的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:18:47.200

您可以使用 JCB ID、开始时间和结束时间的列来构建表格，如下所示

```
jcb_id    start_time               stop_time
1         2013-01-31 00:00:00      2013-01-31 06:19:00
1         2013-01-31 21:04:00      null
2         2013-01-31 08:00:45      2013-01-31 18:19:00 
```

在上面的例子中：

*   `jcb_id`1 当前处于活动状态，因为`stop_time`为空。
*   `jcb_id`2 下降，因为没有`null`停止时间的记录。

当您单击该按钮时，该页面将检查是否有 JCB 的记录，带有`null` `stop_time`.

*   从 jcb 表中选择 where`jcb_id = ?`和`stop_time is null`
*   如果`null`JCB 存在停止时间，
    *   更新记录`NOW()`- JCB 不工作
*   否则 - JCB 没有`null`停止时间记录
    *   插入一条新记录，离开`stop_time` `null`- JCB 正在工作

从那里，您可以运行查询来计算启动和停止之间的时间以启动/停机时间。

# mysql - 在数据库中保存日期

> ID：14647853
> 
> 赞同：-2
> 
> 时间：2013-02-01T13:54:57.663
> 
> 标签：mysql, sql

在数据库中保存日期时，我一直认为最好用*time()*函数的数字保存日期，因为它更准确，但我也看到人们保存日期，例如*2013-02-01*。

推荐哪一个？或者是否有不同的场合你应该使用其中一个还是另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:57:24.473

我宁愿保存日期，`DATE`而不是`INT`因为：

*   更具可读性
*   它仍然是日期！

无论如何它仍然是你的选择，考虑一下，

```
SELECT UNIX_TIMESTAMP(CURDATE()), CURDATE() 
```

将导致

```
UNIX_TIMESTAMP(CURDATE())   CURDATE()
1359676800                  2013-02-01 00:00:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:00:17.357

始终保存为日期的文本表示形式，即`YYYY-MM-DD`. 更容易被人类阅读，并且不限于 Unix 时间戳整数的限制（您只能使用整数向前走这么远或向后走这么远）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:02:32.210

在 ISO 8601 上进行标准化会比较保守，而且比在 time_t UNIX 纪元之间进行转换要容易得多。

第二天的开始可能会受到小时偏移的影响，因此时区可能存在问题。在夏令时期间，一天的开始可能会受到影响。使用 time_t*可能会*消除这些问题的歧义，但也可能会遇到问题，因为您没有正确翻译 time_t 以获得预期效果。

由于 UNIX 时间纪元具有时间组件，因此如果您发送 time_t 值并让数据库将其转换为日期，则可能会出现问题。数据库可以以您意想不到的方式翻译它。但是，如果您发送日期，数据库会按照您的要求存储该日期（无论它认为该日期所在的时区如何）并返回该确切日期。

现在，根据您如何获取包含在 SQL 中的日期值，可能会发生这样的转换问题。但是，这将是您的代码中的一个问题，您可能希望数据库没有翻译或更改您发送它的值。

我会坚持输入它作为日期，因为它是可读的，它是一个日期，即使问题发生在不同的情况下，它也不会比 time_t 有更多的问题。

# java - 如何跳过 Liferay 布局中的默认语言环境

> ID：14647855
> 
> 赞同：2
> 
> 时间：2013-02-01T13:54:51.757
> 
> 标签：java, layout, liferay

请在下面找到我的要求：

**考虑 ：**

*   门户默认语言环境 = 英语
*   某些页面的名称仅以法语提供

**要求：**

Liferay 不允许没有默认语言环境的页面名称。但我希望该页面仅提供法语版本。

这怎么可能 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:14:30.977

尝试默认设置法语。您需要更改 system-ext.properties。

```
user.country=FR
user.language=fr 
```

system-ext.properties 在 Liferay 启动时应用，但您可以在数据库中手动更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:34:54.647

另一个选项是通过名为 customLocale 的控制面板在页面中进行自定义字段，例如通过主题，您可以在速度中使用一些代码，获取此属性，如果它不为空，只需设置它。我不知道如何通过速度精确设置语言环境，但我认为这很容易。因此，要获得 customField 值，您需要：

```
#set($customLayout=$expandoValueLocalService.getData($item.layout.companyId, "com.liferay.portal.model.Layout", "CUSTOM_FIELDS", "customLayout", $item.layout.primaryKey, true)) 
```

`$item`你的页面在哪里`navigation.vm`。因此，可以随时轻松修改每个页面以更改语言环境（不仅是法语），如果您不需要它，只需跳过此选项。

# c# - 我如何将大小为 20x30 的 8 位位图数组下采样到 10x15

> ID：14647859
> 
> 赞同：-2
> 
> 时间：2013-02-01T13:55:02.997
> 
> 标签：c#, image-processing

我如何将大小为 20x30 的 8 位位图数组下采样到 10x15

`original_bitmap_array[20][30]`到`downsample_array[10][15]`

这是原始数组，它是字符“A”的表示`1`形式`0`

```
00000000111100000000
00000001111100000000
00000001111100000000
00000001111110000000
00000011100110000000
00000011000110000000
00000011000111000000
00000011000011000000
00000111000011000000
00000110000011000000
00000110000011000000
00000110000011000000
00001110000001100000
00001110000001100000
00001100000001100000
00001100000000110000
00001100000000110000
00011111111111110000
00011111111111111000
00011111111111111000
00011111111111111000
00111111111111111000
00110000000000011000
00110000000000011100
01110000000000011100
01110000000000001100
01110000000000001110
01100000000000001110
11100000000000000110
11100000000000000111 
```

现在有人可以告诉如何下采样成 10x15 数组，而不会丢失 char 'A'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:24:24.300

这完全取决于您要如何对图像进行采样。您的示例的一个简单采样是从 20x30 中获取每一秒像素并放入 10x15。

您可能想要扩展它并在 2x2 像素的横截面上采样并使用双线性插值。

因为我现在不知道您想如何对图像进行采样，所以我很难为您提供更多信息。

更新：

```
org_img[20][30]; --monochrome values
sampled_img[10][15];

for(int i=0; i < 10; i++)
{
    for(int j=0; j < 15; j++)
    {
        int average = org_img[2*i][2*j] + org_img[2*i+1][2*j]+ org_img[2*i][2*j+1] + org_img[2*i+1][2*j+1];
        average = average>>2; --integer division by 4.
        sampled_img[i][j] = average;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:08:12.967

您可以`Matrix.Scale`为此使用功能。

这是一个[例子](http://msdn.microsoft.com/en-us/library/33h63fz9%28v=vs.80%29.aspx)

# java - 如果存在 xsi:type 和不同的命名空间前缀，则 xmlunit.Diff 返回similar=false

> ID：14647861
> 
> 赞同：6
> 
> 时间：2013-02-01T13:55:16.880
> 
> 标签：java, xml

这段代码：

```
import org.custommonkey.xmlunit.Diff;

String result = "<ns1:Square xsi:type=\"ns1:Shape\" xmlns:ns1=\"http://example.com/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"/>";
String correct = "<ns2:Square xsi:type=\"ns2:Shape\" xmlns:ns2=\"http://example.com/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"/>";

Diff diff = new Diff(result, correct);
System.out.println("diff:" + diff);
System.out.println("diff.similar(): " + diff.similar()); 
```

结果是：

```
diff: org.custommonkey.xmlunit.Diff
[not identical] Expected namespace prefix 'ns1' but was 'ns2' - comparing <ns1:Square...> at /Square[1] to <ns2:Square...> at /Square[1]

[different] Expected attribute value 'ns1:Shape' but was 'ns2:Shape' - comparing <ns1:Square xsi:type="ns1:Shape"...> at /Square[1]/@type to <ns2:Square xsi:type="ns2:Shape"...> at /Square[1]/@type

diff.similar(): false 
```

* * *

我希望 diff.similar() 是真的。还是有理由说它是假的？或者它是一个错误？

如果我删除 xsi:type 信息，它将返回 true。

知道如何解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:46:23.130

XMLUnit 不理解 xsi 类型。它对属性值进行简单的字符串比较。

实现一个自定义的 DifferenceListener 做的伎俩

```
 final Diff d = new Diff(result, correct);
    d.overrideDifferenceListener(new DifferenceListener() {

        public int differenceFound(Difference difference) {

            final Node controlNode = difference.getControlNodeDetail().getNode();
            final Node testNode = difference.getTestNodeDetail().getNode();
            if (difference.getId() == DifferenceConstants.ATTR_VALUE_ID
                && isXSIType(controlNode) && isXSIType(testNode)) {
                if (getNameSpaceFromPrefix(controlNode).compareTo(getNameSpaceFromPrefix(testNode)) != 0) {
                    return RETURN_ACCEPT_DIFFERENCE;
                }
                String withoutPrefixControl = getNameWithoutPrefix(controlNode);
                String withoutPrefixTest = getNameWithoutPrefix(testNode);

                if (withoutPrefixControl.compareTo(withoutPrefixTest) == 0) {
                    return RETURN_IGNORE_DIFFERENCE_NODES_IDENTICAL;
                }
            }
            return RETURN_ACCEPT_DIFFERENCE;
        }

        boolean isXSIType(org.w3c.dom.Node node) {
            return node.getNodeType() == Node.ATTRIBUTE_NODE &&
                node.getLocalName().compareTo("type") == 0 &&
                node.getNamespaceURI() == "http://www.w3.org/2001/XMLSchema-instance";
        }

        private String getNameSpaceFromPrefix(Node node) {
            final int beginIndex = node.getNodeValue().indexOf(":");
            if (beginIndex == -1) {
                return "";
            }
            return node.lookupNamespaceURI(node.getNodeValue().substring(0, beginIndex));
        }

        private String getNameWithoutPrefix(Node controlNode) {
            final int beginIndex = controlNode.getNodeValue().indexOf(":");
            if (beginIndex == -1) {
                return controlNode.getNodeValue();
            }
            return controlNode.getNodeValue().substring(beginIndex);
        }

        public void skippedComparison(org.w3c.dom.Node node, org.w3c.dom.Node node1) {

        }
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-23T01:20:13.307

对于 XMLUnit 2.x，将此添加到 diff builder

```
.withDifferenceEvaluator(new DifferenceEvaluator() {
    public ComparisonResult evaluate(Comparison comparison, ComparisonResult comparisonResult) {

        // skip namespace prefix comparison
        if (comparison.getType().equals(ComparisonType.NAMESPACE_PREFIX))
            return ComparisonResult.SIMILAR;
        return comparisonResult;
    }
}) 
```

# ios - 谷歌地图 iOS SDK 的街景？

> ID：14647864
> 
> 赞同：4
> 
> 时间：2013-02-01T13:55:21.680
> 
> 标签：ios, google-maps-sdk-ios

[全新的 Google Maps iOS SDK ( https://developers.google.com/maps/documentation/ios/](https://developers.google.com/maps/documentation/ios/) )是否提供街景？

我查看了框架代码，但它似乎没有提供这样的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:10:51.163

iOS SDK 中尚不提供 Streetview。请提交[功能请求](https://code.google.com/p/gmaps-api-issues/issues/entry?template=Maps%20SDK%20for%20iOS%20-%20Feature%20Request)，以表明您有兴趣添加该功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-17T11:13:56.220

看来他们听你的了！查看 v1.4 的发行说明 [https://developers.google.com/maps/documentation/ios-sdk/releases#version_140__-_july_2013](https://developers.google.com/maps/documentation/ios-sdk/releases#version_140_-_july_2013)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:14:51.867

可能是`MapKit API`因为`iPhone`不提供街景功能。

提供的所有这些功能[`MapKit API is here`](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html)

在 iOS 5.1 及更早版本中，Map Kit 框架使用 Google Mobile Maps (GMM) 服务来提供地图数据。使用可以提供街景的此框架的特定类。

Google Street View Image API 可让您将静态（非交互式）街景全景图或缩略图嵌入到您的网页中，而无需使用 JavaScript。

如需更多信息[，请查看此链接。](https://developers.google.com/maps/documentation/streetview/)

谢谢 ：）

# ios - -80 被添加到 UIView 的 bounds.origin.x

> ID：14647870
> 
> 赞同：0
> 
> 时间：2013-02-01T13:55:29.067
> 
> 标签：ios, ios4

我在 UIScrollView 中有一系列 UIView，当根视图控制器接收到 willAnimateRotationToInterfaceOrientation:duration 时，我试图调整它们的大小：

这是代码...

（面板只是一个扩展的 UIView；面板是一个 NSMutableArray 的面板，由扩展的 UIScrollView 持有）

```
for(Panel * panel in panels)
{
  panel.bounds = CGRectMake(panel.bounds.origin.x,
                            panel.bounds.origin.y,
                            self.bounds.size.width,
                            panel.bounds.size.height);
}

NSLog(@"%@", [panels description]); 
```

这`self.bounds.size.width`是 UIScrollView （我已经扩展了类）。

这是设备面向**横向**时 NSLog 的结果...

```
"<Panel: 0x74324d0; frame = (-80 0; 480 50); animations = { bounds=<CABasicAnimation: 0xe1339d0>; }; layer = <CALayer: 0x7432530>>",
"<Panel: 0x7435ce0; frame = (-80 53; 480 50); animations = { bounds=<CABasicAnimation: 0xe133a90>; }; layer = <CALayer: 0x7435d40>>",
"<Panel: 0x7438e20; frame = (-80 106; 480 50); animations = { bounds=<CABasicAnimation: 0xe133ab0>; }; layer = <CALayer: 0x7438e80>>",
"<Panel: 0x7438eb0; frame = (-80 159; 480 50); animations = { bounds=<CABasicAnimation: 0x714f890>; }; layer = <CALayer: 0x7438f10>>",
"<Panel: 0x7438f40; frame = (-80 212; 480 50); animations = { bounds=<CABasicAnimation: 0x742ffd0>; }; layer = <CALayer: 0x7438fa0>>" 
```

当它变回**肖像**时......

```
"<Panel: 0x7480350; frame = (0 0; 320 50); animations = { bounds=<CABasicAnimation: 0x74a3b40>; }; layer = <CALayer: 0x74803b0>>",
"<Panel: 0x7483c90; frame = (0 53; 320 50); animations = { bounds=<CABasicAnimation: 0x74a3bd0>; }; layer = <CALayer: 0x7483cf0>>",
"<Panel: 0x7486dd0; frame = (0 106; 320 50); animations = { bounds=<CABasicAnimation: 0x74a3c60>; }; layer = <CALayer: 0x7486e30>>",
"<Panel: 0x7486e60; frame = (0 159; 320 50); animations = { bounds=<CABasicAnimation: 0x74a3cf0>; }; layer = <CALayer: 0x7486ec0>>",
"<Panel: 0x7486ef0; frame = (0 212; 320 50); animations = { bounds=<CABasicAnimation: 0x74a3d80>; }; layer = <CALayer: 0x7486f50>>" 
```

我看不出为什么 bounds.origin.x 应该是它从 (0) 开始的任何东西。这一定很明显，但我就是看不到——也许一些新的眼睛会看到我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:44:34.650

我认为你应该看看[框架和边界之间的差异](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40009503-CH2-SW6)

您必须设置框架而不是边界，因为设置边界会更改其 superView 中的视图框架。

希望这会有所帮助。

# apache - 从我的 iPhone 本地访问我的 MAMP 网站（复数）

> ID：14647872
> 
> 赞同：2
> 
> 时间：2013-02-01T13:55:27.823
> 
> 标签：apache, localhost, mamp, htdocs

我使用 MAMP PRO 作为本地服务器环境在我的 Mac 上本地创建了一些网站。

我可以在我的 Mac 上访问这些，因为我可以选择使用“本地名称解析”添加本地域（在 MAMP PRO 中）

但是...我不知道如何从我的 iphone 访问我的网站，我需要进行测试。

如果我将本地 IP 放入（在我的 iphone 上），我会得到 MAMP 保存页面：

> 虚拟主机设置成功。
> 
> 如果您可以看到此页面，则您的新虚拟主机已成功设置。现在，可以添加网页内容，并且应该替换或删除这个占位符 page1。
> 
> 服务器名称：localhost 文档根目录：/Applications/MAMP/htdocs

所以我知道这可行，但我如何访问我的个人网站。

我的网站的位置和结构是这样的：

```
/Users/myusername/Sites/vhosts/site1/public_html
/Users/myusername/Sites/vhosts/site2/public_html
/Users/myusername/Sites/vhosts/site3/public_html
/Users/myusername/Sites/vhosts/site4/public_html 
```

这可能与`localhost Document-Root`? 我注意到它是`/Applications/MAMP/htdocs`

我应该改变它还是改变我的网站的位置`/Applications/MAMP/htdocs`？

谢谢 C

更新：

好的，所以我`Document-Root`将`/Users/myusername/Sites/vhosts/`其更改为现在允许我在浏览器中本地加载站点`192.168.1.134/site1/public_html`

但是..当我`192.168.1.134/site1/public_html`从我的 iphone 加载（在同一个 wifi 网络上）时，我得到了页面标题，但页面没有加载。就挂了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-01T16:18:20.477

我使用[ngrok](https://ngrok.com/)转发我的本地主机并推荐它。安装它（它是免费的）之后，你基本上运行类似“ngrok 80”的东西，ngrok 将创建一个可以从任何地方（也就是你的手机）访问的公共 URL，并显示与[http://localhost/](http://localhost/)相同的内容。

抱歉，我无法发布完整的 http:// 链接 - 我受到我的声誉的限制。

在您的示例中，当从您的本地计算机访问时，ngrok 可能会创建一个与“localhost”相对应的域“hs673gs.ngrok.com”。从 iPhone 访问“hs673gs.ngrok.com/site1/public_html”与在本地计算机上访问“192.168.1.134/site1/public_html”基本相同。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-27T14:58:47.673

MAMP 推出了一款应用程序，您可以通过他们的应用程序 MAMP Viewer 在手机上查看您的本地网站：[https ://itunes.apple.com/de/app/mamp-viewer/id1047237620?l=en&mt=8](https://itunes.apple.com/de/app/mamp-viewer/id1047237620?l=en&mt=8)

您只需配置要用于 MAMP 查看器的主机：选择要在 MAMP 查看器上查看的主机 > 在常规选项卡上，确保选中“用于 'MAMP 查看器'（仅限 LAN）”> 单击保存 > 重新启动您的服务器 > 打开应用程序并检查您的站点。

# c# - EF5 不创建枚举列

> ID：14647874
> 
> 赞同：1
> 
> 时间：2013-02-01T13:55:21.043
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5, .net-4.5

我有一个这样的模型：

```
namespace Ad.NegCred.Data.Model {
    public enum DataKind {
        F, //Takibe alınıp henüz tahsil edilmeyen ferdi kredi bildirimi
        FA, //Aynı dönemde takibe alınan ve tahsil edilen ferdi kredi bildirimi
        FF, //daha önceki dönemlerde takibe alındığı bildirilmiş ferdi kredi tahsil bildirimi
        K, //Takibe alınıp henüz tahsil edilmeyan kredi kartı
        KA, //Aynı dönemde takibe alınan ve tahsil edilen kredi kartı
        KF //Daha önceki dönemlerde takibe alındığı bildirilmiş kredi kartı tahsil    bildirimi
    }

    public class Datum {
        [Key]
        public long Id { get; set; }
        public DataKind Kind { get; set; }
        [StringLength(25, MinimumLength = 2)]
        public string Name { get; set; }
    }
} 
```

EF 创建数据库时，`Kind`会创建除该列之外的所有列。另一个枚举列是此处未显示的复杂类型的一部分，也不会创建。

为什么 EF 5 会这样？有没有我不知道的设置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T18:31:42.927

您似乎正在使用 EF5 并以 .NET Framework 4 为目标。这不起作用，因为 EntityFrameork.dll 使用的 .NET Framework 4 中的 System.Data.Entity.dll 无法处理枚举。您需要迁移到 EF5 和 .NET Framework 4.5 或迁移到 EF6，您可以在其中定位 .NET Framework 4 并使用枚举，因为 EF6 不再依赖于 .NET Framework 中提供的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:12:41.393

应该可以工作，请参阅 MS EF 站点 [http://msdn.microsoft.com/en-us/data/hh859576](http://msdn.microsoft.com/en-us/data/hh859576)

我使用它并且它可以工作......并且 Enum 没有在 DB 上创建为 TABLE。该视频向您展示了如何根据需要在 DB 上创建 ENUM。

```
namespace XYZ.Core.Enum
{
public enum MasterEventType : int
{
    Undefined = 0,  
    Logon = 1,
    Logoff = 2,   
 }
}

namespace XYZ.Core.Model
{
public class MasterUserEventLog  
{
    // the rest is not relevant here....
    public MasterEventType EventType{ get; set; }       // what happened
}
{ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:41:52.450

EF 不会创建任何表，这是设计使然。EF 在内部处理枚举。您不必担心它们。我用过 Enum，它们工作得很好。但是，如果您想将 Enum 显式存储在数据库中，那么我建议您在自己的代码中创建滚动。但是，您应该注意，为枚举创建实体也具有与之相关的通常仪式。

您可以访问链接[http://msdn.microsoft.com/en-us/data/hh859576.aspx](http://msdn.microsoft.com/en-us/data/hh859576.aspx)，其中清楚地写着 Ef 不会为 Enum 创建任何表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-23T10:23:53.707

在 EF 6 中，如果您使枚举类型从 uint 而不是默认的 int 派生，您也会发现这种行为。例如

```
public enum LogStatus : uint 
```

以上内容*不会*在代码优先迁移中自动生成列，因此您必须删除 uint 部分：

```
public enum LogStatus 
```

默认为 int 基础和代码优先很乐意自动创建此列。

# javascript - tinymce 制表符缩进

> ID：14647879
> 
> 赞同：1
> 
> 时间：2013-02-01T13:55:41.020
> 
> 标签：javascript, tinymce, text-editor, rich-text-editor

有什么方法可以让 tinyMCE 正确处理 Tab 键的按下？目前我正在使用不间断插件，但只插入三个 nbsp，这还不够。我在想一些类似标签的东西，在文本周围插入一个跨度，但我找不到任何这样的插件。我也尝试过覆盖“选项卡”按钮，但我无法弄清楚完成后该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T11:40:16.700

对我来说，标签应该像 Indent/Outdent 一样工作，我找到了一个插件

[http://davejamesmiller.com/snippets/wordpress-keyboard-shortcuts-to-indentoutdent-and-format-as-code-in-tinymce](http://davejamesmiller.com/snippets/wordpress-keyboard-shortcuts-to-indentoutdent-and-format-as-code-in-tinymce)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:44:06.657

去年遇到过这个问题。这里的问题是浏览器会删除段落开头和结尾的制表符和其他空格字符（也在编辑器中）。不幸的是，没有办法在 Web 编辑器中获得 100% 功能的选项卡。但是除了那个“标签”的长度是固定的之外，有可能得到类似的东西。

我们对此的解决方案是在从数据库加载时用一定大小的[空白字符](http://en.wikipedia.org/wiki/Space_%28punctuation%29#Table_of_spaces)替换制表符。在插入制表符时，我们插入空格字符。当内容被写回数据库时，我们将字符替换为真正的制表符。

# android - Android XML 类转换异常 TextView

> ID：14647890
> 
> 赞同：0
> 
> 时间：2013-02-01T13:56:07.583
> 
> 标签：android, xml, textview, classcastexception

我遇到了这个致命的异常：

```
02-01 14:48:24.310: E/AndroidRuntime(12835): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.prva/com.example.prva.Meni_Splash}: java.lang.ClassCastException: android.widget.TextView 
```

我不明白我的文本视图中的问题在哪里？我只尝试更改 TimePickers 位置，使其位于 textDate 文本视图下？

这是我的完整 .xml。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"
    android:background="@drawable/menu">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/pozdrav"
        android:textSize="25sp" />

    <TextView
        android:id="@+id/textDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/textView1"
        android:layout_centerHorizontal="true"
        android:text="Date/Time"
        android:textSize="25sp" />    

    <TimePicker
        android:id="@+id/timePicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"            
        android:layout_below="@id/textDate"
        android:layout_centerHorizontal="true" />

    <Button
        android:id="@+id/btnalarm"
        android:layout_width="100dp"
        android:layout_height="wrap_content"        
        android:layout_below="@id/timePicker"
        android:layout_centerHorizontal="true"
        android:layout_toLeftOf="@+id/centerPoint"
        android:text="@string/postavi"  />

    <Button
        android:id="@+id/buttoncancel"
        android:layout_width="100dp"
        android:layout_height="wrap_content"        
        android:layout_below="@id/timePicker" 
        android:layout_centerHorizontal="true"
        android:layout_toRightOf="@id/centerPoint"     
        android:text="@string/zaustavi" />

    <TextView
        android:id="@+id/centerPoint"
        android:text=""
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_below="@id/timePicker"
        android:layout_centerHorizontal="true" />

    <Button
        android:id="@+id/buttonv"
        android:layout_width="150dp"
        android:layout_height="wrap_content"        
        android:layout_below="@id/btnalarm"
        android:layout_marginTop="17dp"
        android:layout_centerHorizontal="true"
        android:background="@drawable/button_v"
        android:shadowColor="#000000"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="2"
        android:text="@string/buttonv"
        android:textColor="#FFFFFF"
        android:textSize="15sp"
        android:textStyle="bold" />    

    <Button
        android:id="@+id/buttonv1"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_below="@id/buttonv"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="16dp"
        android:background="@drawable/button_v"
        android:shadowColor="#000000"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="2"
        android:text="@string/buttonv1"
        android:textColor="#FFFFFF"
        android:textSize="17sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/textbaza"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/buttonv1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="14dp"
        android:text="@string/textbaza" />

    <Button
        android:id="@+id/btnlistview"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@id/buttonv1"
        android:layout_alignBottom="@id/buttonv1"
        android:layout_alignParentLeft="true"
        android:text="ListView" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:59:01.727

不是什么大问题，只需清理您的项目并关闭 Eclipse 重新打开它并运行您的应用程序就可以正常工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:02:11.727

使用`layout_below`don't give`@+id/`因为它会创建一个新的 id。最好避免这种情况。

```
 android:layout_below="@id/textDate" 
```

这应该是正确的。

所有这些还**清理您的项目并再次构建**。

# iphone - 在 UIViewContentModeScaleAspectFit 之后获取调整大小的图像的宽度

> ID：14647891
> 
> 赞同：28
> 
> 时间：2013-02-01T13:56:19.143
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiimageview

我有我的 UIImageView 并在其中放入了我调整大小的图像：

```
UIImageView *attachmentImageNew = [[UIImageView alloc] initWithFrame:CGRectMake(5.5, 6.5, 245, 134)];
attachmentImageNew.image = actualImage;
attachmentImageNew.backgroundColor = [UIColor redColor];
attachmentImageNew.contentMode = UIViewContentModeScaleAspectFit; 
```

我尝试`UIImageView`通过这样做来获得调整后图片的宽度：

```
NSLog(@"Size of pic is %f", attachmentImageNew.image.size.width); 
```

但它实际上返回了原始图片的宽度。关于如何获得我在屏幕上看到的图片框架的任何想法？

**编辑：**这是我的`UIImageView`样子，红色区域是它`backgroundColor`

![在此处输入图像描述](../Images/95c7fb1d658ae2b7810e0b38a077a4e0.png)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-01T15:31:31.360

我不知道是否有更明确的解决方案，但这有效：

```
float widthRatio = imageView.bounds.size.width / imageView.image.size.width;
float heightRatio = imageView.bounds.size.height / imageView.image.size.height;
float scale = MIN(widthRatio, heightRatio);
float imageWidth = scale * imageView.image.size.width;
float imageHeight = scale * imageView.image.size.height; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-01T09:23:49.997

Swift 中的解决方案：

```
let currentHeight = imageView.bounds.size.height
let currentWidth = imageView.bounds.size.width
let newWidth = UIScreen.mainScreen().bounds.width
let newHeight = (newWidth * currentHeight) / currentWidth

println(newHeight) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:05:45.620

它具有原始图像的参考，因此始终提供与原始图像相同的尺寸。

要获得新图像的尺寸，您必须检查纵横比。我已经使用预览使用不同大小的不同图像导出了一个公式来满足我的需要，它如何根据图像的纵横比调整图像大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T14:15:42.663

根据 Apple 的**[UIViewContentModeScaleAspectFit文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW159)**

> 它通过保持纵横比来缩放**内容**（在您的情况下为实际图像）以适合**视图的大小（在您的情况下为 attachmentImageNew）。**

这意味着您的图像大小（缩放后）应该与您的`UIImageView`.

**更新 ：**

如果您不想使用`UIViewContentModeScaleAspectFit`并且可以修复大小，则给您一个新建议，`scaledImage`那么您可以使用下面的代码来缩放图像以修复 newSize，然后您可以使用代码的宽度。

```
CGSize newSize = CGSizeMake(100.0,50.0);
UIGraphicsBeginImageContext( newSize );
[image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T14:41:51.087

在你的情况下：

```
float yourScaledImageWitdh =  attachmentImageNew.frame.size.height *  attachmentImageNew.image.size.width / attachmentImageNew.image.size.height
NSLog(@"width of resized pic is %f", yourScaledImageWitdh); 
```

但你也应该检查一下，原始图像比例与imageView比例，我的代码行是好的，以防红色区域水平添加，而不是你的原始图像比例比imageView帧比例宽

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-04T10:23:10.933

对于**Swift 2**，您可以使用此代码片段将**aspectFitted**图像与屏幕**底部****对齐**（从该问题的早期答案中采样 -> 感谢你们，伙计们）

 **```
let screenSize: CGRect = UIScreen.mainScreen().bounds
let screenWidth = CGFloat(screenSize.width)
let screenHeight = CGFloat(screenSize.height)

imageView.frame = CGRectMake(0, screenHeight - (imageView.image?.size.height)! , screenWidth, (imageView.image?.size.height)!)

let newSize:CGSize = getScaledSizeOfImage(imageView.image!, toSize: self.view.frame.size)

imageView.frame = CGRectMake(0, screenHeight - (newSize.height) , screenWidth, newSize.height)

func getScaledSizeOfImage(image: UIImage, toSize: CGSize) -> CGSize       
{
    let widthRatio = toSize.width/image.size.width
    let heightRatio = toSize.height/image.size.height
    let scale = min(widthRatio, heightRatio)
    let imageWidth = scale*image.size.width
    let imageHeight = scale*image.size.height
    return CGSizeMake(imageWidth, imageHeight)
} 
```**

# c# - 如何操作 CAD 文档

> ID：14647893
> 
> 赞同：0
> 
> 时间：2013-02-01T13:56:23.683
> 
> 标签：c#, .net, silverlight, cad

我正在开发一个 WebMapping 项目。我正在使用 Silverlight (c#) 。我必须操作一些 CAD 文档（.STEP、.iges、.brep、.dxf）。有没有图书馆可以做到这一点？

# ios - 如何使用 NSNotificationCenter 发送数据并在收到数据后重新加载 UITable？

> ID：14647896
> 
> 赞同：0
> 
> 时间：2013-02-01T13:56:26.210
> 
> 标签：ios, objective-c, uitableview, nsnotificationcenter

我有一个`NSNotification`in`viewController1`发送调用方法`object:selectedTableString` 时的`didSelectRowAtIndexPath:`in `viewController1`。

`object:selectedTableString`然后在 中拾取该对象`viewController2`。控制台输出正确，物体被正确拾取。我面临的问题是如何在`[mainTable reloadData];`收到通知时重新加载（）tableView `viewController2`。

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    selectedTableString = cell.textLabel.text;

    if (cell.accessoryType==UITableViewCellAccessoryNone)
    {
        cell.accessoryType=UITableViewCellAccessoryCheckmark;
        if (prev!=indexPath.row) {
            cell=[tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:prev inSection:0]];
            cell.accessoryType=UITableViewCellAccessoryNone;
            prev=indexPath.row;
        }
    }
    else{
        cell.accessoryType=UITableViewCellAccessoryNone;
    }

    NSLog(@"selectedTableString is %@",selectedTableString);

    NSLog(@"posting notification");
    [[NSNotificationCenter defaultCenter] postNotificationName:@"TTSelectedList" object:selectedTableString];
} 
```

然后在`viewController2`：

```
- (void)selectedList:(NSNotification*)notification
{
    NSLog(@"received notification");

    theString = [notification object];

    NSLog(@"thestring is %@", theString);

    // getting an NSString
    selectedTableString = theString;

    if ([selectedTableString isEqualToString:@"Italy"]) {
        jsonStringCountry = @"http://***/v1/public/cities?country=it";
        [mainTable reloadData];
    }
    else if ([selectedTableString isEqualToString:@"Spain"]) {
        jsonStringCountry = @"http://***/v1/public/cities?country=es";
        [mainTable reloadData];
    }
    else if ([selectedTableString isEqualToString:@"UK"]) {
        jsonStringCountry = @"http://***/v1/public/cities?country=uk";
    }
    else if ([selectedTableString isEqualToString:@"Brazil"]) {
        jsonStringCountry = @"http://***/v1/public/cities?country=br";
    }

    NSLog(@"from two table selectedTableString %@",selectedTableString);

    [mainTable reloadData];
} 
```

# javascript - 尝试捕获 404 错误

> ID：14647906
> 
> 赞同：-1
> 
> 时间：2013-02-01T13:57:11.643
> 
> 标签：javascript

我有一个函数drawCountry，它试图根据点击的国家读取一个json文件：

```
 d3.json("../json/"+d.id.toLowerCase()+"/regions.json", function(error, json) {
        if (error) {
            return console.warn(error);
            self.drawMap();
        }
        else {
        self.regionsGroup.selectAll("path")
        .data(json.features)
        .enter().append("path")
        .attr("d", self.projection)
        .attr("id", function(d) {
            return d.properties.name;
        })
        .classed("country", true)
        .attr("class", "country")
        .on("mouseover", function(d) {
            d3.select(this)
            .style("fill", "#6C0")
            .append("svg:title")
            .text(d.properties.name);
        })
        .on("mouseout", function(d) {
            d3.select(this)
            .style("fill", "#000000");
        })
        .on("click", function(d) {
            console.log('clicked on country')
        });
        }
    }); 
```

我看不到如何加载 self.drawMap(); 什么时候有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:06:46.390

```
return console.warn(error);  <-- exits out of the function
self.drawMap();  <--never gets called because of the return 
```

换行

```
self.drawMap(); 
return console.warn(error); 
```

# php - 位置.路径名

> ID：14647909
> 
> 赞同：0
> 
> 时间：2013-02-01T13:57:11.000
> 
> 标签：php, javascript, jquery

如果选择了一个路径，我想向菜单点添加一个类。

如果每个站点都是它自己的`.php`/`.html`文件，这将很容易，但是所有内容都在**一个** `.php`文件中进行管理，并且所有内容都通过操作 ( `?action=main`, `?action=userinformation`) 进行导航。

我正在寻找一种替代方法来使用路径**和**操作来完成这项工作。

```
if (location.pathname == "/index.php") {
    $("#main1").addClass("mainActive");
} else if (location.pathname == "/index.php?action=other") {
    $("#main2").addClass("mainActive");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:03:01.303

也许你可以使用like；

```
var s = location.search;
if (s === "" || s === "?" || s.indexOf("?action=main") > -1)
    // main active
else if (s.indexOf("?action=userinformation") > -1)
    // userinformation active
// ... and so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:01:52.440

`location.pathname`不包括查询字符串。但是您可以将其与`location.search`：

```
var path = location.pathname + location.search;
//            "/index.php"   + "?action=other"

if(path === "/index.php?action=other") {
  // ...
} 
```

# java - JEdi torPane 的语法高亮显示，字体更改会产生偏移错误

> ID：14647910
> 
> 赞同：1
> 
> 时间：2013-02-01T13:57:16.173
> 
> 标签：java, macos, swing, jpanel, jeditorpane

我在 JScrollPane 中使用 JEditorPane。我正在初始化代码如下：

```
jsArea = new JEditorPane();
JScrollPane scrPane = new JScrollPane(jsArea);
scrPane.setMinimumSize(new Dimension(500, 710));
scrPane.setPreferredSize(new Dimension(500, 710));
scrPane.setMaximumSize(new Dimension(1600, 1600));
scrPane.setBorder(BorderFactory.createLineBorder (Color.white, 3));
jsArea.setContentType("text/javascript");
jsArea.setFont(Font.getFont("Arial"));
content.add(scrPane, c); 
```

编辑器按预期工作，除非我键入以下内容：

> ctx.arc(1,2,3,4,5,6)

这里发生的是光标（相信它位于行尾）悬停在“5”上，并且光标的移动与显示的文本不一致。它适用于默认字体，但我需要使用 Arial。

**注意我也在使用[语法荧光笔](https://code.google.com/p/jsyntaxpane/)，这*可能*是问题所在。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:21:44.883

*   [对于普通的 EditorKit 必须使用`text/html`or `text/plain`or`text/rtf`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JEditorPane.html#setContentType%28java.lang.String%29) ，而不是`setContentType("text/javascript");`（用于`JSON`or `Servlet`）

> 如果有一个字符集定义被指定为内容类型规范的参数，它将在使用关联的 EditorKit 加载输入流时使用。例如，如果类型指定为`text/html;`charset=EUC-JP，则将使用为 text/html 注册的 EditorKit 加载内容，并且提供给 EditorKit 以将 unicode 加载到文档中的 Reader 将使用 EUC-JP 字符集来转换为 unicode . 如果无法识别类型，则将使用为纯文本注册的 EditorKit 加载内容， `text/plain`.

*   todays`HTML in Java`减少支持`HTML<=3.2` （部分支持 css 和样式）

编辑

*   [JSyntaxPane 屏幕截图显示 text/javascript 的语法高亮](http://i1-mac.softpedia-static.com/screenshots/JSyntaxPane_3.png)作为参数`HightLighter`

# pdf - 报告工作室：将列表保留在 pdf 的一页中

> ID：14647913
> 
> 赞同：2
> 
> 时间：2013-02-01T13:57:25.213
> 
> 标签：pdf, report, cognos

我在一份超过一页的报告上有这个列表，因为它有很多行。我不想将它分成两页，而是希望列表的第二部分出现在第一部分旁边，全部在同一页中。在 html 和 pdf 中。

禁用列表属性中的中断和水平分页但不起作用。还要在报表属性中放置分页符。它确实增加了现在适合的行数，但我仍然需要将列表的一半放在一起，因为我不希望它分成很多页。也许您知道另一种解决方案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:41:15.313

如果有人正在寻找类似的东西，我会根据我的贡献发布这个。

如果您知道行数，您可以使用“报纸”样式的报告。查一下，你会发现它很简单。

另一种选择是使用中继器表。我选择了这个，因为我的行数是动态的。

希望这可以帮助。

问候

# c# - 如何更快地加载多个网格

> ID：14647918
> 
> 赞同：2
> 
> 时间：2013-02-01T13:57:37.650
> 
> 标签：c#, extjs, extjs4, extjs4.1

我有 4 个网格表。他们使用相同的模态。我不能使用同一个存储，因为每个网格都必须发送一个参数值才能从 db 获取数据。所以，发生的事情是我最终创建了 4 个不同的商店，然后当我加载我的应用程序时，它滞后了，因为它等待加载所有 4 个商店。这是我的网格..所以我还有 3 个这样的网格

```
this.grid1 =Ext.create('Ext.grid.Panel',{
    title:'GridView App',        store: store,        loadMask:true,
    columns:[
       { header:'Q1',            sortable:true, dataIndex:'Q1', flex:1,},
       { header:'Q2',            sortable:true, dataIndex:'Q2', flex:1,},
       { header:'Q3',            sortable:true, dataIndex:'Q3', flex:1,},
       { header:'Q4',            sortable:true, dataIndex:'Q4', flex:1,} 
```

这是我的 store1 ... 同样，我还有 3 个这样的商店，每个商店的参数分别为 Q2、Q3、Q4

```
 var store1 =Ext.create('Ext.data.JsonStore',{
    storeId:'myData',        scope:this,
    fields:[
       { name:'Q1', type:'int'},
       { name:'Q2', type:'int'},
       { name:'Q3', type:'int'},
       { name:'Q4', type:'int'}
   ],        
    sorters:[{            property:'Q1',            direct:'ASC'}],        
    proxy:{            
          type:'ajax',            
          url:'GridView/writeRecord',            
          extraParams: { ID: Q1 },            
          reader: newExt.data.JsonReader({                
               root:'myTable',              
               totalProperty:'count'
           })
       }
 }); 
```

有没有比我现有的方式更快/更好的方式来实现它？

更新 - ![在此处输入图像描述](../Images/427a4b69405b005e251a6a6955d53df3.png)

第二次更新 -

这是整个应用程序的布局...我的 rightcontainer 最初被禁用并包含实际的网格和表单，然后单击选项卡上的项目启用 rightcontainer 并加载所有网格。

```
Ext.define('ExtjsApp.app1.appPanel', {
extend: 'Ext.panel.Panel',
alias: 'widget.mypanel',
layout: {
    type: 'vbox',
    align: 'stretch'
},
scope: this,
titleAlign: 'center',
minWidth: 900,
bodyPadding: 10,
requires: [],
items: [],
constructor: function () {
    this.callParent(arguments);
    this.regForm = Ext.create('ExtjsApp.app1.RegForm', {});

    leftTreeStore = Ext.create('Ext.data.TreeStore', {
        scope: this,
        storeId: 'leftTreeStore',
        fields: [
            { name: 'text', type: 'string' },
            { name: 'dataId', type: 'string' },
            { name: 'listName', type: 'string' },
            { name: 'leaf', type: 'bool' }
        ],
        root: { expanded: true },
        proxy: {
            type: 'ajax',
            url: 'app1/getRecords',
            extraParams: { organization: 'GOOGLE' },
            reader: { type: 'json' }
        },
        autoLoad: true,
        expanded: true,
        autoSync: true,
        listeners: {
        }
    });

    allRecordsStore = Ext.create('Ext.data.TreeStore', {
        id: 'allRecordsStore',
        autoLoad: false,
        autoSync: false,
        scope: this,
        fields: [
            { name: 'text', type: 'string' },
            { name: 'dataId', type: 'string' },
            { name: 'listName', type: 'string' },
            { name: 'leaf', type: 'bool' }
        ],
        root: { expanded: true },
        proxy: {
            type: 'ajax',
            url: 'app1/getRecords',
            extraParams: { organization: 'GOOGLE' },
            reader: { type: 'json' }
        }
    });

    this.currentMonthsTree = Ext.create('Ext.tree.TreePanel', {
        scope: this,
        title: 'Current 12 Months',
        titleAlign: 'center',
        tabIndex: 0,
        height: 500,
        flex: 1,
        rootVisible: false,
        store: leftTreeStore,
        id: 'currentMonthsTree',
        useArrows: true,
        hideHeaders: true,
        columns: [
            {
                xtype: 'treecolumn',
                id: 'ID',
                dataIndex: 'text',
                flex: 1
            }
        ],
        viewConfig: {
            plugins: {
                ptype: 'treeviewdragdrop',
                enableDrop: false,
                appendOnly: false,
                enableDrag: false
            },
            listeners: {
                itemclick: function (view, rec, item) {
                    if (rec.isLeaf()) {
                        alert('isLeaf');
                    }
                    else if (!rec.isLeaf()) {
                        alert('isNotLeaf');
                    }
                }
            },
            allowCopy: true,
            copy: true
        }
    });

    this.currentMonthsTree.on('selectionchange', function (selected) {
        FnDisplayRecord(selected.selected.items[0]);
    });

    this.allRecordsTree = Ext.create('Ext.tree.TreePanel', {
        scope: this,
        title: 'All Records',
        titleAlign: 'center',
        flex: 1,
        tabIndex: 1,
        rootVisible: false,
        store: allRecordsStore,
        id: 'allRecordsTree',
        useArrows: true,
        hideHeaders: true,
        columns: [
            {
                xtype: 'treecolumn',
                id: 'ID',
                dataIndex: 'text',
                flex: 1
            }
        ],
        viewConfig: {
            plugins: {
                ptype: 'treeviewdragdrop',
                enableDrop: false,
                enableDrag: false,
                appendOnly: false
            },
            listeners: {
                itemclick: function (view, rec, item) {
                    if (rec.isLeaf()) {
                        alert('isLeaf');
                    }
                    else if (!rec.isLeaf()) {
                        alert('isNotLeaf');
                    }
                }
            },
            allowCopy: true,
            copy: true
        }
    });

    this.allRecordsTree.on('selectionchange', function (selected) {
        FnDisplayRecord(selected.selected.items[0]);
        //alert('Hello');
    });

    function FnClearValues() {
        //Clear All Values
        alert('ClearALLValues');
    }

    function FnSetValues(myObj) {
        //I set all my form values using Ext.getCmp
        Ext.getCmp('Textl').setValue(myObj.Text1);
    }

    function FnDisplayRecord(row) {
        if (row.get('leaf') == true) {
            console.log(row.data.dataId);
            var tempID = row.data.dataId;
            Ext.getCmp('rightContainer').setLoading(true, true);
            Ext.getCmp('requisitionPOGridPanel').store.loadData([], false);

            Ext.Ajax.request({
                method: 'GET',
                url: 'app1/getRecord',
                headers: { 'Content-Type': 'application/json' },
                dataType: 'json',
                params: {
                    ID: tempID
                },
                success: function (response) {
                    Ext.getCmp('rightContainer').setLoading(false, false);
                    myObj = Ext.JSON.decode(response.responseText);
                    if (AsbestosObj.DateIssued != '') {
                        FnSetValues(AsbestosObj);
                        Ext.getCmp('GridPanel').store.load({ params: { ID: tempID} });
                        Ext.getCmp('Grid1').store.load({ params: { ID: tempID, qID: 'Q01'} });
                        Ext.getCmp('Grid2').store.load({ params: { ID: tempID, qID: 'Q02'} });
                        Ext.getCmp('Grid3').store.load({ params: { ID: tempID, qID: 'Q03'} });
                        Ext.getCmp('Grid4').store.load({ params: { ID: tempID, qID: 'Q04'} });
                    }
                    else { FnClearValues(); }
                },
                failure: function () {
                    Ext.Msg.alert('Message', 'Error');
                }
            });
        }
        else if (row.get('leaf') == false) {
            FnClearValues();
        }
    }

    this.rightContainer = Ext.create('Ext.form.Panel', {
        scope: this,
        id: 'rightContainer',
        layout: {
            type: 'vbox',
            align: 'stretch',
            pack: 'start'
        },
        autoScroll: true,
        disabled: true,
        border: 1,
        flex: 1,
        items: [
            this.regForm
        ]
    });

    this.tabContainer = Ext.create('Ext.tab.Panel', {
        scope: this,
        activeTab: 0,
        flex: 0.5,
        id: 'tabContainer',
        layout: { type: 'vbox', align: 'stretch' },
        plain: true,
        listeners: {
            tabchange: function (panel, newTab, oldTab) {
                Ext.getCmp('rightContainer').disable();
                FnClearValues();
                var getTabStat = this.getActiveTab();
                if (getTabStat.tabIndex == 0) {
                    Ext.getCmp('currentMonthsTree').store.load();
                }
                else if (getTabStat.tabIndex == 1) {
                    Ext.getCmp('allRecordsTree').store.load();
                }
            }
        },
        items: [
            this.currentMonthsTree, this.allRecordsTree
        ]
    });

    this.mainContainer = Ext.create('Ext.container.Container', {
        scope: this,
        bodyPadding: 10,
        title: 'MAIN',
        layout: {
            type: 'hbox',
            align: 'stretch'
        },
        flex: 1,
        items: [
            this.tabContainer,
            { xtype: 'splitter', width: 5, animate: true },
            this.rightContainer
        ]
    });

    this.add(this.mainContainer);
},
loadingOn: function () {
    setTimeout(function () { Ext.getCmp('currentMonthsTree').setLoading(true, true); }, 100);

},

loadingOff: function () {
    setTimeout(function () { Ext.getCmp('currentMonthsTree').setLoading(false, false); }, 100);

}
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:30:56.813

你不能在这里做更多的事情。我认为你可以做一些微曲，但我怀疑它们是否值得花时间来识别。如果您的应用程序执行以下操作，那么您已经以正确的方式完成了；

*   直到你被加载的时间
*   仅初始化所需的控制器和商店（检查每个请求）
*   显示主视图

一旦你的网格被渲染，它们就会触发加载操作，至少当它们有一个分页工具栏时。您可以更早地开始加载操作，这意味着在您创建可能会给您一些毫秒的视图之前，但我怀疑您是否可以节省更多时间。

这当然是基于现有信息的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T15:12:13.287

请参考我非常相似的 SO 问题：[Combo box loading too slow](https://stackoverflow.com/q/11160059/1303936)

基本上，您需要像往常一样定义所有模型。

然后，您需要将页面的所有商店定义为没有代理的数组商店，如下所示：

```
var myStore1 = Ext.create("Ext.data.ArrayStore", {
    model: "MyModel1",
    data:  []
});

var myStore2 = Ext.create("Ext.data.ArrayStore", {
    model: "MyModel1",
    data:  []
}); 
```

然后，您将要创建一个调用，无论您从何处获取数据，您将需要更改服务器以将所有数组输出到单个 JSON 对象中，类似这样，并且为了超级优化，将它们设为数组数组，这将是我期望从服务器得到的输出：

```
{
     grid_data_1: [...],
     grid_data_2: [...]
} 
```

然后在创建所有商店后在您的网页上，进行一次 ajax 调用以获取所有四个网格的数据：

```
Ext.Ajax.request({
    url: 'url',
    method: 'GET',
    params: {
        ...whatever you want
    },

    success: function (response, opts) {
         var result = Ext.decode(response.responseText);
         myStore1.loadData(result.grid_data_1);
         myStore2.loadData(result.grid_data_2);
         ...
    },

}); 
```

这将使其效率更高，您可能不需要在您的情况下使用数组数组，因为每个网格只有 5 行，但是将 4 个 ajax 调用优化为一个应该会产生很大的影响。

# tomcat - Tomcat 和 JSF：EL 表达式返回 null

> ID：14647919
> 
> 赞同：0
> 
> 时间：2013-02-01T13:57:30.417
> 
> 标签：tomcat, jsf-2

我有以下问题：我有一个使用 JSF 2 作为前端的 web 应用程序。到目前为止，项目和部署（使用 Tomcat 7）只是从 eclipse 配置的。一切正常。现在我使用 maven 构建了项目。war文件中的结果和eclipse的输出完全一样（diff表示没有区别）。好的，现在我想使用（相同的）没有eclipse的tomcat部署war文件。应用程序的启动工作正常，但是一旦我访问第一个 jsf 页面，就会出现一些错误。似乎 web 应用程序无法解析 el 表达式（但没有异常表明找不到 el-api）。从我在日志文件中可以看到，el 表达式始终返回 null 。由于使用 maven 或 eclipse 构建过程的结果没有差异，因此错误应该在 tomcat 的配置中。有什么提示吗？

# php - 某种方式可以用另一个元素包装任何 html 元素？

> ID：14647927
> 
> 赞同：0
> 
> 时间：2013-02-01T13:58:07.743
> 
> 标签：php

消息通过表单提交。它可以包含**html**以及**普通文本**。

IE：

```
Why this code doesn't work for me?

<script type="text/javascript">
    var _gaq = _gaq || [];

    _gaq.push(['_setAccount', 'UA-XXXXX-X']);

    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script> 
```

我想用`pre`标签包围html元素。

IE

```
Why this code doesn't work for me?

<pre>
    <script type="text/javascript">
        var _gaq = _gaq || [];

        _gaq.push(['_setAccount', 'UA-XXXXX-X']);

        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</pre> 
```

我之前在 php 聊天室中询问过这个问题，这个问题的答案的作者建议阅读解决方案：[php DOMDocument: complete transform of form element? 包装和去除？](https://stackoverflow.com/questions/5416924/php-domdocument-complete-transform-of-form-element-wrapping-and-removing)

在这个例子中一切都是完美的，除了几件事。我需要包装任何显然 exept 的 html 元素`pre`。

1.  如果元素被折叠，则仅包裹外部元素。
2.  如果它们是分开的，则将它们各自包装起来。
3.  如果只有打开标签，则只包装它（无需使用关闭标签修复）。

有没有人对这个问题的解决方案有任何可能的想法？提前感谢所有可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:20:25.330

我不确定如何`DOMDocument`处理格式不正确的 HTML。如果消息包含结束标签而没有开始标签，您可能会收到错误消息。但我想你会从下面得到这个想法......

将整个消息包装成例如 a`div`以使其可解析。然后将字符串加载到 DOMDocument 中。在链接的答案中使用`DOMXPath`like 来查找您创建的 div 中最顶层的元素，并将其包装为`pre`：

```
$dom = new DOMDocument();
$dom->loadHTML("<div>$msg</div>");

$xpath = new DOMXPath($dom);
$query = $xpath->query("body/div/*"); 
```

# c++ - 如何为类指针向量构建构造函数

> ID：14647928
> 
> 赞同：1
> 
> 时间：2013-02-01T13:58:10.970
> 
> 标签：c++, class, pointers, vector, constructor

我需要为指向类的指针向量构建一个构造函数......

我的课是：

```
class Song {

    string song_name;

    string auther_name;

    int popularity;

    SongStructure song_format;

    int song_length;

    int lengths[size];

    bool first_condition_true();

    bool second_condition_true(int index);

    }

}; 
```

我的向量是：

```
vector<Song*> play_list; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:09:31.453

随着新标准 C++11 / 0x 初始化列表的引入：

我假设你想创建一个 SongBook 类，其中包含一个歌曲指针向量，然后是附加信息。它们可以这样使用：

类文件：

```
class SongBook {
    vector<Song*> songlist;
    string name;

    // Constructor
    SongBook(std::initializer_list<Song*> songs) : songlist(songs) {}
} 
```

然后像这样从你的 main 调用例如

```
SongBook book({new Song(...), new Song(...), new Song(...)}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:10:53.993

您的向量有一个可以使用的有效构造函数。（它为指针创建位置）。您所要求的可能是一种使指针指向某个有效的方法`Song`。您将需要在某个循环中执行此操作（可能是 STL“循环”）。但你可能不需要那个，因为你的歌曲是合法可复制的！？。您可以使用`vector<Song>`

# php - 注意使用 PEAR Auth

> ID：14647934
> 
> 赞同：4
> 
> 时间：2013-02-01T13:58:34.150
> 
> 标签：php, authentication, pear

我正在尝试使用 PEAR Auth 进行 php 站点身份验证。我遵循了官方文档中的示例，但我无法摆脱很多像这样的通知警报：

```
Notice: Constant DB_OK already defined in /usr/share/php/DB.php on line 47
Call Stack:
0.0005 647400 1\. {main}() /var/www/concursosRep/admin/index.php:0
0.0751 7100160 2\. include('/var/www/concursosRep/admin/loginbeta.php') /var/www/concursosRep/admin/index.php:60
0.0788 7448160 3\. Auth->start() /var/www/concursosRep/admin/loginbeta.php:114
0.0790 7448528 4\. Auth->login() /usr/share/php/Auth.php:528
0.0790 7448608 5\. Auth->_loadStorage() /usr/share/php/Auth.php:546
0.0790 7448608 6\. Auth->_factory() /usr/share/php/Auth.php:445
0.0809 7681728 7\. include_once('/usr/share/php/Auth/Container/DB.php') /usr/share/php/Auth.php:468
0.0839 8066384 8\. require_once('/usr/share/php/DB.php') /usr/share/php/Auth/Container/DB.php:32
0.0869 8374552 9\. define() /usr/share/php/DB.php:47 
```

我知道这意味着以某种方式多次包含该库，但我不知道如何修复它。在我的 php.ini 中，我在 include_path 中有这个：

```
include_path    .:/usr/share/php:/usr/share/php/libzend-framework-php 
```

我首先认为问题在于 Zend 在某个地方加载了 pear auth 的类，所以我将 include_path 更改为： .:/usr/share/php 但我遇到了同样的问题。

这是我使用它的方式：

```
require_once ('Auth.php');//Pear Auth

   $dns = 'mysql://'.USER.':'.Util::decodePass(PASSWORD).'@'.SERVER.'/'.DBNAME;

  $options = array(
   'dsn' => $dns,
   'table' => 'usuario',
   'usernamecol' => 'login',
   'passwordcol' => 'password',
   'cryptType' => 'md5', //'sha1'
   'db_fields' => '*'
   );

  // Create the Auth object:
  $auth = new Auth('DB', $options, 'show_login_form');

  // Start the authorization:
  $auth->start();

  // Confirm authorization:
  if ($auth->checkAuth()) {
     //Authorized
          echo(javaScriptRedirect(true,$js));             

   } else { // Unauthorized.         
     echo(javaScriptRedirect(false,$js));

   } 
```

我试图`DB.php`在我的系统中找到两个文件；这是我得到的：

```
 # sudo find -name DB.php -print
 ./usr/share/php/DB.php
 ./usr/share/php/Auth/Container/DB.php 
```

我试图找到我的脚本中包含的重复文件，这是我得到的：

```
#var_dump(get_included_files());
string(23) "/usr/share/php/Auth.php" [30] => string(36) "/usr/share/php/Auth/Container/DB.php" [31] => string(33) "/usr/share/php/Auth/Container.php" [32] => string(21) "/usr/share/php/DB.php" [33] => string(23) "/usr/share/php/PEAR.php" [34] => string(24) "/usr/share/php/PEAR5.php" [35] => string(27) "/usr/share/php/DB/mysql.php" [36] => string(28) "/usr/share/php/DB/common.php" } 
```

希望有人可以帮助找出问题所在。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:43:11.250

注意 1：Pear DB 是一个已弃用的库，因此您应该将 Auth 配置为使用 MDB2！

注意2：这是一个通知，因此您的代码可能运行良好。

根据您提供的信息，很难判断 DB_OK 常量之前定义的位置。要做到这一点需要完整的代码。

要调试这样的错误，您可以学习使用 XDEBUG 并逐步运行代码。或者，如果您不想像专业人士一样学习和做到这一点，这里有一些关于如何找到它的丑陋想法：

把它放在代码的最开始：

```
declare(ticks=1);
function my_tick_function()
{
    if (defined('DB_OK'))
    {
        echo 'DB_OK defined for the first time as ' . DB_OK;
        var_dump(debug_backtrace());
        unregister_tick_function('my_tick_function');
    }
}
// using a function as the callback
register_tick_function('my_tick_function', true); 
```

（我没有运行它，这只是一个想法）

[http://php.net/manual/en/function.register-tick-function.php](http://php.net/manual/en/function.register-tick-function.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:48:37.603

我不认为它`DB.php`会被加载两次，因为那样你会得到一个关于已经定义的类的致命错误——不仅仅是一个常量。

如果我是你，我会`grep`为`DB_OK`和`define`调用代码。要将选择限制为某些文件，请添加

```
var_dump(get_included_files()); 
```

在`/usr/share/php/DB.php`第 47 行。它会显示哪些文件已经包含在内，因此`define()`调用需要在其中。

* * *

另一种方法是使用[xdebug 的函数跟踪](http://xdebug.org/docs/execution_trace)来记录`define()`调用的位置。如果您安装了 xdebug，这可能是最简单的解决方案。

# javascript - Jquery UI Accordion 在打开之前折叠

> ID：14647935
> 
> 赞同：1
> 
> 时间：2013-02-01T13:58:29.490
> 
> 标签：javascript, jquery, jquery-ui, accordion, jquery-ui-accordion

我有一个简单的 Jquery UI 手风琴，有 3 个部分。开始时所有 3 个部分均已折叠。当我单击部分标题时，部分内容应向上显示（滑动）。特殊之处在于，部分内容 div 绝对位于彼此之上。为了让它看起来不错，我希望当前打开的部分在显示下一部分的动画开始之前完全切换。

这就是我现在用来切换该部分的内容：

```
 $(function () {
         $("#accordion").accordion({

             create: function (event, ui) {
                 ui.oldPanel.slideToggle("slow");

             },
             collapsible: true,
             active:false

         });
     }); 
```

你可以看到它的样子：

[http://jsfiddle.net/kqMAR/](http://jsfiddle.net/kqMAR/)

似乎切换和显示动画同时开始。但我想要的是在开始下一张幻灯片之前完全切换它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:33:17.667

```
 $(function () {
         $("#accordion").accordion({
             animate:{duration:5000},
             collapsible: true,
             active:false
         });
     }); 
```

使用上面的函数来了解实际发生了什么，一旦旧部分开始关闭，新部分就会开始打开，这就是为什么它给人一种动画不完整的错觉。对于完整的动画，将按钮放在另一个下方，然后您将能够看到正确的动画。如果您需要水平排列，那么您可以使用看起来也很酷的褪色效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T07:27:41.670

**新答案：**

尝试这个

[http://jsfiddle.net/6QJJp/1/](http://jsfiddle.net/6QJJp/1/)

这正是您所需要的

您将需要`CSS`根据您的要求进行修复。

# python - MySQLdb：操作数应包含 1 列

> ID：14647937
> 
> 赞同：3
> 
> 时间：2013-02-01T13:58:40.807
> 
> 标签：python, mysql, mysql-python

我正在尝试使用 Python 和 MySQLdb 将一些数据插入 MySQL 数据库。当我在我的程序中执行以下函数时，MySQL 返回错误“1241，'操作数应包含 1 列'”

用户、密码和数据库正确，表存在且授予所有权限。

```
def write_to_mysql(pname, dat, like, reachs, talker, friendsfans):
''
    try:
        con = mdb.connect(user='user', passwd='password', host='localhost', db='database');
    except Exception. err:
        print(err)

    with con:

        cur = con.cursor()
        cur.execute("INSERT INTO fbinsights (page, datum, likes, reach, talking, fanfriends) VALUES( %s, %s, %s, %s, %s, %s)", (pname, dat, like, reachs, talker, friendsfans))

    connection.commit() 
```

哪里错了？

完整追溯：

```
File "insights.py", line 111, in <module>
    main()
  File "insights.py", line 108, in main
    write_to_mysql(PAGE_NAME, date, likes_atm, reach_day, talking_day, friends_of_fans)
  File "insights.py", line 90, in write_to_mysql
    cur.execute("INSERT INTO fbinsights (page, datum, likes, reach, talking, fanfriends) VALUES( %s, %s, %s, %s, %s, %s)", (pname, dat, like, reachs, talker, friendsfans))
  File "/usr/local/lib/python2.7/site-packages/MySQL_python-1.2.3-py2.7-freebsd-9.0-RELEASE-p3-amd64.egg/MySQLdb/cursors.py", line 174, in execute
    self.errorhandler(self, exc, value)
  File "/usr/local/lib/python2.7/site-packages/MySQL_python-1.2.3-py2.7-freebsd-9.0-RELEASE-p3-amd64.egg/MySQLdb/connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
_mysql_exceptions.OperationalError: (1241, 'Operand should contain 1 column(s)') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T14:39:29.540

@schlamar 回答了它。错误的类型传递给 MySQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T14:25:26.027

当我生成一个`SELECT`查询时，我遇到了这个错误，其中的列选择括在括号中（错误地）`SELECT (id, name, age) FROM members`：;

请注意，如果括号中仅列出一列，则不会引发此错误。

# php - mysql_unbuffred_query 不工作

> ID：14647941
> 
> 赞同：2
> 
> 时间：2013-02-01T13:58:50.480
> 
> 标签：php, mysql, json, memory

我有一个 php 文件，它将从 mysql_query() 检索到的结果编码为 json 格式。我收到的数据很大，即接近 200,000 个元组，其中每个元组有接近 10 个 varchar。早些时候，我遇到了一个异常，例如“允许的内存大小为 67108864 字节已用尽”。然后我在互联网上搜索，有人引用了 mysql_unbuffered_query 是解决方案。我也试过了，但我又遇到了同样的错误。我们如何在php中处理如此大的数据？

> 增加内存也不是一种选择，因为我有一个共享主机帐户。

这是我用于检索结果和编码为 json 的代码。

```
$result=mysql_unbuffered_query("Some query which gives large data");
$res=array();
if($result)
{
    while($r = mysql_fetch_assoc($result)) 
    {
        $rows[] = $r;
    }
    print json_encode($rows);

}
else
{
    echo mysql_error();
} 
```

此类问题的解决方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:24:30.420

像这样的东西是我想象的，只需添加您的查询等。

```
// Must be zero to get 1st record
$limit = 0;
// Determine how many you want to pull at a time
$offset = 10;
// Run count query to get this value
$total = 10000; // <- number of records needing to be pulled
for ($limit; $limit <= $total; $limit + $offset) {
    // Run query here and pump results into an array
    echo "Total: ".$total."<br>";
    echo "offset: ".$offset."<br>";
    echo "limit: ".$limit."<br>";
} 
```

* * *

**注意：**确保您的总计数可以被您的偏移量整除，否则您将丢失记录，例如：

```
$offset = 19;
$total = 10000; 
```

将最后一次调用输出为：

> 总计：10000
> 偏移量：19
> 限制：9994

* * *

**编辑：**

试试下面的模板，看看是否有帮助，当我运行我给出的原始答案时`json_encode`，`$limit + $offset`在`for`循环中我得到了相同的内存错误，但接下来的一点对我有用。

```
$offset = 10;
$total = 1000000;
$array = array();
for ($limit = 0; $limit <= $total; $limit++) {
    // Your code here
    $array[$limit] = $offset;
    // Keep the following line
    $limit = ($limit - 1) + $offset;
}
print json_encode($array); 
```

# proxy - WSO2 ESB 代理设置 JMS 回复到队列

> ID：14647949
> 
> 赞同：0
> 
> 时间：2013-02-01T13:59:26.250
> 
> 标签：proxy, jms, wso2, wso2esb

有谁知道如何将 JMS 回复设置为代理服务中的队列，以便接收服务响应不同的代理。我已经尝试了几乎所有你能想象到的基于网上搜索的东西，但似乎没有任何效果。

据我了解，根据我在突触论坛上的发现，我应该能够将名为 JMS_REPLY_TO 的 Axis2 级别属性设置为我想要的任何东西，它应该可以工作，但它没有。

任何帮助将不胜感激。我现在正在从事的项目处于可怕的境地。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:50:07.910

请参阅 [1] 完成此操作所需的其他 JMS 参数。在那里您可以找到如下参数，这些参数可以附加到您想要拥有响应队列的 jms 端点 url。

IE

transport.jms.ReplyDestinationType - 回复目的地类型（队列或主题） transport.jms.ReplyDestination - 回复目的地的 JNDI 名称

[1] - [http://wso2.org/project/esb/java/4.0.2/docs/transports/transports-catalog.html#JmsTrp](http://wso2.org/project/esb/java/4.0.2/docs/transports/transports-catalog.html#JmsTrp)

# c# - 检索数据时出现 EF 错误：SQL 中的表名错误

> ID：14647951
> 
> 赞同：4
> 
> 时间：2013-02-01T13:59:29.420
> 
> 标签：c#, entity-framework, datacontext

我有一张简单`edmx`的两张桌子。这些表由单个`Navigation Property`. （1对许多）。

当我运行我的代码时，我得到一个**异常：“无效的对象名称 dbo.Enquiries”**

数据库中没有`dbo.Enquiries`（实际上称为`dbo.Enquiry`），因此错误本身是不言自明的。**但是它在哪里找到那个名字，我该如何解决呢？**

*编辑以按要求显示代码。*

```
 var foo = (from  d in context.Dealerships
            join e in context.Enquiry
                on d.Id equals e.DealershipId
            where (d.ParentBusinessId == id)
            select d).AsEnumerable(); 
```

这是生成的sql。

```
 foo   {SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[BusinessName] AS [BusinessName]
FROM  [dbo].[Dealerships] AS [Extent1]
INNER JOIN [dbo].[Enquiries] AS [Extent2] ON [Extent1].[Id] = 
[Extent2].[DealershipId]
WHERE [Extent1].[ParentBusinessId] = @p__linq__0} 
```

但是对于我的生活，我看不到它在哪里/如何决定将名称 Inquiry 更改为 Inquiries on the inner join。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:09:25.470

找到了答案。Pluralise 仅适用于模型生成。我必须明确告诉我的 DbContext 不要将名称复数（我不敢开始重命名这个数据库，所以我坚持使用的奇怪约定。）

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
  {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:03:14.127

尝试从 edmx 和更新模型后删除表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:14:39.260

您似乎正在使用基于模型的开发。如果是这种情况，那么您似乎对模型进行了一些更改，但没有将它们反映到数据库中。

使用从模型生成数据库选项，它会将数据库与模型同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T14:39:40.477

尝试关闭 EF 模型的图形视图。右键单击编辑并在 XML 编辑器中打开。到表的映射应该在那里，您可以更正它。或者如果您在导入/更新后更改了模式，您可以完全删除模型并再次导入模型。
访问模型的代码应该仍然可以。

# sql - 分区表上的未分区索引

> ID：14647955
> 
> 赞同：0
> 
> 时间：2013-02-01T13:59:38.527
> 
> 标签：sql, oracle, relational-database

当我在Oracle数据库中有分区表时，是否可以不使用分区索引？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:06:08.263

这是可能的，当然。您可以拥有一个[全局非分区索引](http://docs.oracle.com/cd/B10501_01/server.920/a96524/c12parti.htm#460722)。但是，拥有全局索引通常会让人头疼，特别是当您的分区方案旨在促进数据的轻松加载或归档时，因为各种分区操作需要额外的工作来更新全局索引。

# python - 对点/元组列表进行分组

> ID：14647957
> 
> 赞同：0
> 
> 时间：2013-02-01T13:59:44.663
> 
> 标签：python, list, tuples, distance

给定一个元组/点列表，我试图找出如何对给定边界（距离）内的每个元组进行分组。很难解释，但简短的代码应该可以解释我的意思......我根本找不到解决方案，也找不到正确解释问题的方法。

例如：

```
TPL = [(1, 1), (2, 1), (3, 2), (7, 5), (2, 7), (6, 4), (2, 3), (2, 6), (3, 1)]
Print GroupTPL(TPL, distance=1)
> [
>  [(2, 7), (2, 6)], 
>  [(6, 4), (7, 5)], 
>  [(3, 2), (3, 1), (2, 3), (1, 1), (2, 1)]
> ] 
```

我尝试过的所有东西都是垃圾。所以我认为没有理由考虑分享，希望你们得到一些提示和技巧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:54:50.217

当您想将这些点聚集在一起时，我假设您打算使用[Chebyshev 距离。](http://en.wikipedia.org/wiki/Chebyshev_distance)

在这种情况下，最直接的方法是使用[Union Find 数据结构](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)。

这是我使用的一个实现：

```
class UnionFind:
    """Union-find data structure. Items must be hashable."""

    def __init__(self):
        """Create a new empty union-find structure."""
        self.weights = {}
        self.parents = {}

    def __getitem__(self, obj):
        """X[item] will return the token object of the set which contains `item`"""

        # check for previously unknown object
        if obj not in self.parents:
            self.parents[obj] = obj 
            self.weights[obj] = 1
            return obj 

        # find path of objects leading to the root
        path = [obj]
        root = self.parents[obj]
        while root != path[-1]:
            path.append(root)
            root = self.parents[root]

        # compress the path and return
        for ancestor in path:
            self.parents[ancestor] = root
        return root

    def union(self, obj1, obj2):
        """Merges sets containing obj1 and obj2."""
        roots = [self[obj1], self[obj2]]
        heavier = max([(self.weights[r],r) for r in roots])[1]
        for r in roots:
            if r != heavier:
                self.weights[heavier] += self.weights[r]
                self.parents[r] = heavier 
```

然后编写函数`groupTPL`很容易：

```
def groupTPL(TPL, distance=1):
    U = UnionFind()

    for (i, x) in enumerate(TPL):
        for j in range(i + 1, len(TPL)):
            y = TPL[j]
            if max(abs(x[0] - y[0]), abs(x[1] - y[1])) <= distance:
                U.union(x, y)

    disjSets = {}
    for x in TPL:
        s = disjSets.get(U[x], set())
        s.add(x)
        disjSets[U[x]] = s

    return [list(x) for x in disjSets.values()] 
```

在您的设备上运行它会产生：

```
>>> groupTPL([(1, 1), (2, 1), (3, 2), (7, 5), (2, 7), (6, 4), (2, 3), (2, 6), (3, 1)])
[
 [(2, 7), (2, 6)], 
 [(6, 4), (7, 5)], 
 [(3, 2), (3, 1), (2, 3), (1, 1), (2, 1)]
] 
```

然而，这个实现虽然简单，但仍然是`O(n^2)`. 如果点的数量变得非常大，一个有效的实现将使用[kd 树](http://en.wikipedia.org/wiki/K-d_tree)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:04:53.300

我的回答迟到了；但这很短而且有效！

```
from itertools import combinations

def groupTPL(inputlist):  
    ptdiff = lambda (p1,p2):(p1,p2,abs(p1[0]-p2[0])+ abs(p1[1]-p2[1]),sqrt((p2[1] - p1[1])**2 + (p2[0] - p1[0])**2 ))
    diffs=[ x for x in map(ptdiff, combinations(inputlist,2)) if x[2]==1 or x[3]==sqrt(2)]
    nk1=[]
    for x in diffs:
        if len(nk1)>0:
            for y in nk1:
                if x[0] in y or x[1] in y:
                    y.add(x[0])
                    y.add(x[1])
                else:
                    if set(x[0:2]) not in nk1:
                        nk1.append(set(x[0:2]))
        else:
            nk1.append(set(x[0:2]))
    return [list(x) for x in nk1]

print groupTPL([(1, 1), (2, 1), (3, 2), (7, 5), (2, 7), (6, 4), (2, 3), (2, 6), (3, 1)]) 
```

这将输出为::::

```
[[(3, 2), (3, 1), (2, 3), (1, 1), (2, 1)], [(6, 4), (7, 5)], [(2, 7), (2, 6)]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T04:42:31.273

只是为了填写一个替代方案，默认情况下它并不比 给出的 Union-Find 代码快`musically-ut`，但它使用起来很简单，`Cython`从而实现了 3 倍的加速，但在某些情况下它默认更快。这不是我的工作，这是在这里找到的东西：[https ://github.com/MerlijnWajer/Simba/blob/master/Units/MMLCore/tpa.pas](https://github.com/MerlijnWajer/Simba/blob/master/Units/MMLCore/tpa.pas)

*Cython 代码：（*删除 cdef int... 和 int w, int h 以与 Python 一起使用）

```
def group_pts(pts, int w, int h):
  cdef int t1, t2, c, ec, tc, l

  l = len(pts)-1
  if (l < 0): return False
  result = [list() for i in range(l+1)]
  c = 0
  ec = 0
  while ((l - ec) >= 0):
    result[c].append(pts[0])
    pts[0] = pts[l - ec]
    ec += 1
    tc = 1
    t1 = 0
    while (t1 < tc):
      t2 = 0
      while (t2 <= (l - ec)):
        if (abs(result[c][t1][0] - pts[t2][0]) <= w) and \
           (abs(result[c][t1][1] - pts[t2][1]) <= h):

          result[c].append(pts[t2])
          pts[t2] = pts[l - ec]
          ec += 1
          tc += 1
          t2 -= 1
        t2 += 1
      t1 += 1
    c += 1

  return result[0:c] 
```

这可能可以优化一点，但我没有花时间这样做。这也允许重复，Union-Find 结构不太满意。

使用 SciPy 的 kd-tree 来处理这个问题可能会很有趣，这无疑会提高更大数据集的速度。

# iphone - 即使在同步到 iTunes 期间，使用 NSFileProtectionComplete 加密核心数据库是否也能保护数据？

> ID：14647959
> 
> 赞同：0
> 
> 时间：2013-02-01T13:59:53.083
> 
> 标签：iphone, ipad, core-data, sqlite

使用 NSFileProtectionComplete 加密核心数据是否可以防止将数据库同步到 iTunes？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:43:47.550

不会。NSFileProtectionComplete 仅在用户的设备上有密码时加密核心数据文件。它不会改变设备的备份行为。

控制备份行为因 iOS 版本而异[http://developer.apple.com/library/ios/#qa/qa1719/_index.html#//apple_ref/doc/uid/DTS40011342](http://developer.apple.com/library/ios/#qa/qa1719/_index.html#//apple_ref/doc/uid/DTS40011342)

在 5.1 及更高版本中，您可以使用

```
assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

NSError *error = nil;
BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]
                              forKey: NSURLIsExcludedFromBackupKey error: &error];
if(!success){
    NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);
} 
```

# memory-management - 内核模块，在从一个进程调用时，从另一个进程写入页面

> ID：14647964
> 
> 赞同：7
> 
> 时间：2013-02-01T14:00:21.990
> 
> 标签：memory-management, linux-kernel, kernel-module, virtual-memory

我正在编写一个由进程 p1 调用的内核模块，以覆盖属于目标进程 p2 的数据页。

首先，在内核模块内部，同时响应 p1 发出的对 proc 文件系统的写入事件。我使用目标进程（p2）的进程id来搜索后者的任务结构（p2_task）。

搜索我使用的特定页面`get_user_pages()`，显然在 ( `p2_task->mm`) 上调用它。然后我调用`kmap()`了前一个函数返回的页面。获得指针后，我使用典型的内存函数 ( `memset()`) 写入该内存。终于叫了`kunmap()`。

但是，一旦进程再次开始运行，我可以看到我所做的对目标进程 p2 没有影响。

我不确定我做错了什么。任何人都可以帮忙吗？

我怀疑在响应来自 p2 的请求时，您无法以某种方式写入属于进程 p2 的内存。因为这里我们处于不同的环境中。

这是真的吗，如果不是我还能检查什么。如果是问题所在，无论如何我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T21:33:44.047

也许您要写入的页面是只读的？在英特尔架构上，您可以设置写保护，请参阅[http://badishi.com/kernel-writing-to-read-only-memory/](http://badishi.com/kernel-writing-to-read-only-memory/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T22:11:27.787

对我来说听起来像是一个 TLB 问题，其中 p2 具有缓存在硬件中的数据的虚拟地址。在 p1 更改值之前，p2 是否曾在其地址空间中读取/写入页面？

更改值后尝试在 p1 中调用它： `flush_tlb_page(struct vm_area_struct * vma, unsigned long address)`

# javascript - 如何迭代中的一些 TH 元素

> ID：14647965
> 
> 赞同：1
> 
> 时间：2013-02-01T14:00:13.930
> 
> 标签：javascript, loops, html-table, columnheader

假设有6个`th`元素

```
 <thead>
      <tr><th></th><th></th><th></th> <th></th><th></th><th></th></tr>
    </thead> 
```

我只想迭代前 4 个。如何获得这些元素的可迭代列表，以便可以执行以下操作：

```
 while (i < myLimit) {
          th = thlist[i];
          // do something : if somecondition myLimit +=1;
          i++;
    }
    return i; 
```

这些`th`元素被装饰了，*其中一些*元素使用 style="display:none" 进行了装饰，我试图弄清楚在`th`任意选择的元素的左侧有多少这样的装饰元素。

注意：在迭代过程中可能需要增加 myLimit ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:30:20.560

您可以使用 getElementByTagName javascript 纯函数，如下所示：

```
function getStyle(elem, cssprop, cssprop2){
 // IE
 if (elem.currentStyle) {
   return elem.currentStyle[cssprop];

 // other browsers
 } else if (document.defaultView &&
                   document.defaultView.getComputedStyle) {
   return document.defaultView.getComputedStyle(elem,
null).getPropertyValue(cssprop2);

 // fallback
 } else {
   return null;
 }
}

var ths = document.getElementsByTagName('th');
var myLimit = 4;

var max = ths.length;

if (myLimit>max)
    myLimit = max;

for (var i = 0;i < myLimit; i++) {
    // do something with myarray[i]
    var th = ths[i];
    if (getStyle(th,'display','display')=='none')
        alert('th in position '+i+' is decorated with display:none');
} 
```

这是一个工作示例[http://jsfiddle.net/aJ8MS/](http://jsfiddle.net/aJ8MS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:13:13.970

您可以像这样收集前 4 个（或 n 个）元素：

```
var limit = 4,
    $ths = $('th:not(:nth-child('+limit+') ~ th)', 'thead'); 
```

然后使用 .each() 进行迭代：

```
$ths.each(function() {
  console.log(this);
}); 
```

[jsfiddle](http://jsfiddle.net/Z77nQ/6/)

或另一种方法：

```
var limit = 4,
    $ths = $('th', 'thead');

$ths.each( function() {
    var id = $(this).index();
    if(id < limit) {
        console.log(this);
        // increase limit on certain condition
        if(id == 2) limit++;
    }
});

return limit; 
```

[jsfiddle](http://jsfiddle.net/Z77nQ/7/)

要检查一个元素是否`display: none`简单：

```
$this.is(':hidden') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:35:45.750

访问表格中的行和单元格的一种简单方法是使用内置属性。通常标题位于第一行（在您的问题中就是这种情况），因此 ths 是 table.rows[0] 中包含的单元格：

```
var table=document.getElementById("myTable"),
    i=0,
    count=0,
    myLimit=4;
while (i < myLimit) {
    if (table.rows[0].cells[i].style.display=="none") { count ++; }
    i++;
}
return count; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T19:36:59.403

我从 Sandino 的解决方案开始，并使用 Christophe 的检查显示无样式。

这种情况的棘手之处在于我正在使用剑道网格，它将网格分成两个表格，一个用于标题，另一个用于正文行。如果某些列被隐藏，这两个表可以有不同数量的列，因为 body-grid 仅包含可见列，而 header-grid 甚至对不可见列都有定义。

假设网格中有 12 列，前 7 列是隐藏的。header-grid 包含所有 12 个，前 7 个用 display:none 装饰。内容网格仅包含 5 个可见列。因此，当用户单击第一个可见列，索引 0 时，它实际上对应于标题网格中的第 8 列（从 0 开始，因此索引 = 7）。

要找到对应于 VisibleIndex 0 的列标题，我们必须将单击单元格左侧的隐藏列数添加到单击单元格的索引中。我们将 7 加到 0 得到 7。

```
 function countHiddenColumnHeadersLeft(id, clickedCellIndex) {    
    var ths = document.getElementById(id).getElementsByClassName('k-header');
    var myLimit = clickedCellIndex;   

    var invisicount = 0;

    for (var i = 0; (i < myLimit) ; i++) {        
      var th = ths[i];
      if (th.style.display == 'none') {
            invisicount++;
            myLimit++;
        }        
    }
    return invisicount;
} 
```

# ruby-on-rails - 从 Rails 上的 Graylog2 获取日志的简单方法

> ID：14647969
> 
> 赞同：0
> 
> 时间：2013-02-01T14:00:32.177
> 
> 标签：ruby-on-rails, ruby, graylog2

我正在使用 Yell gem 和/或 gelf-rb 将我的 Rails 应用程序需要记录到 graylog2 服务器。

我在网上搜索了很多关于如何从我的应用程序访问这些日志，使用一些自定义字段进行过滤，但还没有运气。

我对这些消息的唯一访问权限是来自 graylog 网络服务器。但我需要从我的应用程序中获取它。我的用户需要在应用程序中看到其中一些消息。

有类似activerecord的东西可以查询和检索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:56:35.383

例如，您可以使用[Tire](https://github.com/karmi/tire#activemodel-integration "胎")来访问 Greylog 的 Elasticsearch 数据库。

# javascript - 如何在文档加载时调用另一个函数内的函数

> ID：14647971
> 
> 赞同：0
> 
> 时间：2013-02-01T14:00:32.120
> 
> 标签：javascript, jquery

首先，如果这个问题看起来很愚蠢，请忽略，因为我在 javascript 方面不是很好。

我需要在文档加载时在另一个函数中调用一个函数。下面是一个示例代码。在这里，我需要提醒消息“我的第二个警报”。我怎样才能让它发生？我知道通过`alertSecond()`在函数内部进行初始化会起作用，但是还有其他方法可以做到吗？

提前致谢

```
$(document).ready() {

test();

function test() {
    alert('my first alert');
    function alertSecond() {
        alert('my second alert')
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:23:39.057

检查此代码..

```
$(document).ready(function() {
    $('#fun_a').click(myFunction);
});

function myFunction() {
    alert('hi');
} 
```

看看这个链接..

[在 jquery 中调用用户定义的函数](https://stackoverflow.com/questions/2520172/call-user-defined-function-in-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:02:52.007

```
$(document).ready(function(){
test()
}) ;
function test() {
    alert('my first alert');
    alertSecond();
}
function alertSecond() {
        alert('my second alert')
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:08:42.957

只需从第一个函数调用您的函数，它就会起作用。您不需要在任何地方定义函数。当没有重用时，最好不要将代码定义为函数。

以下代码应该可以工作：

```
$(document).ready(function(){
 test();
});
function test() {
alert('my first alert');
alertSecond();
}
function alertSecond() {
    alert('my second alert');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T14:13:09.410

以前的答案没有运行，它没有显示任何警报，试试这个：

```
function alertSecond() {
     alert('my second alert')
}

function test() {
     alert('my first alert'); 
     alertSecond();
}

$(document).ready(function(){

test();

}) 
```

这是一个活生生的例子：

[http://jsfiddle.net/2xgXG/](http://jsfiddle.net/2xgXG/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T15:41:33.483

您只需要在 test() 函数中调用 alertSecond()。

```
$(document).ready(function(){
    test();
    function test(){
        alert('my first alert');
        alertSecond();
        function alertSecond(){
            alert('my second alert');
        }
    }
}); 
```

如果你想在其他函数中调用它们，你还可以在 $(document).ready 函数中定义 test() 和 alertSecond() 。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-01T14:30:34.173

所以你像这样声明你的两个函数：

```
function myFunct1(){
alert('alert 1 from function 1');
}
function myFunct2(){
alert('alert 2 from function 2');
} 
```

然后，如果您想一个接一个地调用它们，则 onload 将如下所示：

```
$(document).ready(function(){
myFunct1();
myFunct2();
}); 
```

如果您想从第一个函数内部调用第二个函数，您的函数定义需要如下所示：

```
function myFunct1(){
alert('alert 1 from function 1');
myFunct2();
}
function myFunct2(){
alert('alert 2 from function 2');
} 
```

# javascript - 类似于 Compass 的 Javascript 构建工具？

> ID：14647973
> 
> 赞同：4
> 
> 时间：2013-02-01T14:00:54.710
> 
> 标签：javascript, build-automation, compass-sass, codekit

我正在寻找一种行为类似于 Compass 的构建工具，因为它监视文件夹，然后连接、缩小并生成单个输出文件。我希望能够使用配置指定文件的顺序。

我目前使用的 CodeKit ( [http://incident57.com/codekit/](http://incident57.com/codekit/) ) 可以完美地做到这一点。但是我过去曾遇到过 JSON 配置文件的问题，这意味着我丢失了包含哪些 javascript 文件以及顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:09:17.467

一个好的解决方案是使用 require.js 作为你的模块加载器和依赖管理，这样你就永远不会忘记包含的内容以及它应该以什么顺序包含在最终构建中。如果你想要一个监视任务，你可以使用 MimosaJS（使用 require.js 和 uglify）并使用具有适当配置的“监视”命令：http: [//mimosajs.com/optimization.html](http://mimosajs.com/optimization.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:27:14.773

有约[曼](http://yeoman.io)和[咕噜](http://gruntjs.com/)。

我认为 Yeoman 是最简单的，它建立在 Grunt 之上，`yeoman server`你可以实时重新加载和编译 JS 和 CSS 文件。它还支持其他东西。如果您只想实时观看和缩小等。您可以使用的文件`yeoman watch`。它要求你设置一个 Gruntfile.js，但是有一些很好的例子。

你也可以只使用 Grunt.js，这将需要你安装一些额外的任务，但这不是一个大问题。

因此，简而言之，youman 您可以获得一些开箱即用的额外功能，但它是基于 Grunt 构建的，我可以同时推荐两者。它们通过命令行界面工作，但这很容易。查看他们的网站，并尝试一下，它是免费的！

[Youtube 介绍 Yeoman，与 Addy Osmani](http://www.youtube.com/watch?feature=player_embedded&v=vFacaBinGZ0)

# javascript - 来自图像地图的 Fancybox 1.3.4 图像库？

> ID：14647976
> 
> 赞同：1
> 
> 时间：2013-02-01T14:01:02.440
> 
> 标签：javascript, html, fancybox, gallery, imagemap

> **可能重复：**
> [如何使用地图链接打开fancybox](https://stackoverflow.com/questions/11412483/how-to-open-fancybox-using-map-link)

我发现了如何使用图像映射中的链接来使用 Fancybox 显示单个图像。我成功地融入了我的网站。但是，无论我做什么，我都无法展示画廊。

我正在使用下面的代码来显示 ImageMap 中的单个图像。

```
<script type="text/javascript">
    $(document).ready(function() {
        /*  Tek imaj */
        $("a#fbox").fancybox({
            'overlayShow'   : false,
            'transitionIn'  : 'elastic',
            'transitionOut' : 'elastic',
            'titlePosition' : 'inside'
        });
    });

</script>   
     <script type="text/javascript">
/* Image Map'den */
    //<![CDATA[ 
    $(window).load(function(){
    $('map > area.fbox').click(function(e) {
    e.preventDefault();
    var url = $(this).attr('href');
    var title = $(this).attr('title');
    var type = $(this).attr('rel');
    $.fancybox({
        'title': title,
        'titlePosition': 'inside',
        'transitionIn'  : 'elastic',
        'transitionOut' : 'elastic',
        'href' : url,
        'type' : type
    });
});
});//]]>  
</script> 
```

这些是脚本，这是 HTML。

```
<area shape="rect" coords="417,80,477,93" href="blabla.jpg" class="fbox" title="more blablabla" rel="image" /> 
```

# jquery - 我应该使用什么函数来登录以接收（解析）、验证和本地存储一些变量，使用 JQuery 和 JQuery Mobile

> ID：14647977
> 
> 赞同：0
> 
> 时间：2013-02-01T14:01:08.900
> 
> 标签：jquery, jquery-mobile

这是我目前拥有的代码，它的工作原理是找到 data.success 并在返回正确的值时启动下一页，我遇到的问题是解析一些额外的数据并传递到本地存储，所以我在下一页使用它，例如用户 ID、用户名等

```
$.post(postTo,{email:value1 , password:value2, tag:tagvar} , 

            function(data) {

                //$('#output').html('inside');

                if(data.success == '1') {

                  $.mobile.changePage( "home.html", { transition: "flip"} );

                } else {

                    $('#output').html('Could not connect please try again');

                }

            },'json');

       return false;
    });

}); 
```

这是从请求返回的 JSON...

```
{"tag":"login","success":1,"error":0,"uid":"4fc3562b9a8369.38575999","user":{"name":"test","email":"test@test.ie","created_at":"2012-05-28 11:40:43","updated_at":null,"ac":"8","user_type":"1"}} 
```

我真的不确定如何正确解析以及如何使用本地存储。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:11:40.800

如果您想查看已解析的数据，可以使用这个漂亮的在线解析器：http: [//json.parser.online.fr/](http://json.parser.online.fr/)

从那时起，您应该能够访问和保存您需要的任何内容（例如*data.user.name*）。

至于将数据保存到本地存储，请查看有关该主题的[W3C 手册。](http://www.w3schools.com/html/html5_webstorage.asp)例子：

```
...

if (typeof(Storage)!=="undefined") {
  localStorage.username = data.user.name;
}

... 
```

# c - 是否可以使用 %C 说明符打印非打印字符？

> ID：14647979
> 
> 赞同：7
> 
> 时间：2013-02-01T14:01:19.157
> 
> 标签：c

是否可以使用函数来检测非打印字符`isctrl()`并使用带有 %C 说明符的 printf 将它们打印为 '\n' 例如？

或者我应该`if`为每个控制字符写一个`printf("\\n")`，例如..？

好的，感谢下面所有的好心人 - 这是不可能的，您必须指定每种情况。例子：

```
if (isctrl(char))// WRONG
 printf("%c", char);

if (char == '\n')//RIGHT, or using switch. 
 printf("\\n"); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T14:06:28.573

```
const char *pstr = "this \t has \v control \n characters";
char *str = pstr;
while(*str){
   switch(*str){
     case '\v': printf("\\v");break;
     case '\n': printf("\\n"); break;
     case '\t': printf("\\t"); break;
     ...
     default: putchar(*str);break;
   }
   str++;
} 
```

这将打印不可打印的字符。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-01T14:12:07.073

要扩展 Aniket 的答案，您可以结合使用[`isprint`](http://en.cppreference.com/w/c/string/byte/isprint)switch-statement 解决方案：

```
char ch = ...;

if (isprint(ch))
    fputc(ch, stdout);  /* Printable character, print it directly */
else
{
    switch (ch)
    {
    case '\n':
        printf("\\n");
        break;

    ...

    default:
        /* A character we don't know, print it's hexadecimal value */
        printf("\\x%02x", ch);
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:09:07.267

你可以确定非打印字符，但我不这么认为，你可以写那些字符。您可以通过观察它们的 ASCII 值来检测特定的非打印字符。

# grails - Grails 中的外部化 BuildConfig

> ID：14647980
> 
> 赞同：4
> 
> 时间：2013-02-01T14:01:28.043
> 
> 标签：grails, configuration, config, buildconfig

`Config.groovy`我们可以通过指定一个配置脚本类来加载不同的配置文件。[外部化配置](http://grails.org/doc/latest/guide/conf.html#configExternalized)：

```
grails.config.locations = [com.my.app.MyConfig] 
```

是否可以为 做类似的事情`BuildConfig.groovy`？

我想将 CodeNarc 配置放在另一个配置文件中。由于它使用 Groovy 的[ConfigSlurper](http://groovy.codehaus.org/ConfigSlurper)语法，我尝试合并配置对象，但不起作用。

```
def config = new ConfigSlurper().parse(..)    
this.merge(config) 
```

有什么不一样的招数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T14:51:20.363

你不需要那样做。

Codenarc 插件可让您在外部保留您的 codenarc 配置。请参阅此处 [http://grails.org/plugin/codenarc#Configuring The Codenarc 属性](http://grails.org/plugin/codenarc#Configuring%20The%20Codenarc%20Properties)

这里包括一个我在其中的示例 codenarc 设置`BuildConfig.groovy`

```
codenarc.processTestUnit = false
codenarc.processTestIntegration = false
codenarc.processViews = true
codenarc.propertiesFile = 'grails-app/conf/codenarc.properties'
codenarc.ruleSetFiles = [
        "rulesets/basic.xml",
        "rulesets/braces.xml",
        "rulesets/grails.xml",
        "rulesets/groovyism.xml",
] 
```

在这里，我们还定义了一个外部`codenarc.properties`文件，我们用它来打开/关闭每个包含的规则集中的部分规则。`codenarc.properties`此处包含此文件内容的示例：

```
# some gsp's MUST have embedded CSS and/or embedded Javascript which requires the use of semicolons.
UnnecessarySemicolon.doNotApplyToFileNames = *.gsp
# we're not going to enforce these
UnnecessaryGString.enabled = false
UnnecessaryReturnKeyword.enabled = false 
```

因此，您可以避免使用 Tomas 提到的不需要的东西污染您的 BuildConfig。

希望这可以帮助。

汤姆

# c# - 为 Kinects 深度场创建 3D 面部网格

> ID：14647982
> 
> 赞同：3
> 
> 时间：2013-02-01T14:01:29.473
> 
> 标签：c#, kinect, kinect-sdk

Kinect SDK 附带了一个在颜色流上创建面部网格的示例。看起来像：

[http://imgur.com/TV6dHBC](http://imgur.com/TV6dHBC)

我想为深度流创建一个 3D 网格

我的代码目前如下所示：

```
private EnumIndexableCollection<FeaturePoint, PointF> facePoints;
private EnumIndexableCollection<FeaturePoint, Vector3DF> depthPoints;

public void DrawFaceModel(DrawingContext drawingContext)
{
    if (!this.lastFaceTrackSucceeded || this.skeletonTrackingState != SkeletonTrackingState.Tracked)
        return;

    var faceModelPts = new List<Point>();
    var faceModelPts3D = new List<Point3D>();
    var faceModel = new List<FaceModelTriangle>();
    var faceModel3D = new List<FaceModelTriangle3D>();

    for (int i = 0; i < this.facePoints.Count; i++)
    {
        faceModelPts3D.Add(new Point3D(this.depthPoints[i].X + 0.5f, this.depthPoints[i].Y + 0.5f, this.depthPoints[i].Z + 0.5f));
    }

    FaceDataPoints.Number_of_Points = this.facePoints.Count;

    foreach (var t in ImageData.faceTriangles)
    {
        var triangle = new FaceModelTriangle3D();
        triangle.Point1_3D = faceModelPts3D[t.First];
        triangle.Point2_3D = faceModelPts3D[t.Second];
        triangle.Point3_3D = faceModelPts3D[t.Third];
        faceModel3D.Add(triangle);
    }

    var faceModelGroup = new GeometryGroup();
    for (int i = 0; i < faceModel.Count; i++)
    {
        var faceTriangle = new GeometryGroup();  
        faceTriangle.Children.Add(new LineGeometry(faceModel3D[i].Point1_3D, faceModel3D[i].Point2_3D)); 
        faceTriangle.Children.Add(new LineGeometry(faceModel3D[i].Point2_3D, faceModel3D[i].Point3_3D));
        faceTriangle.Children.Add(new LineGeometry(faceModel3D[i].Point3_3D, faceModel3D[i].Point1_3D));
        faceModelGroup.Children.Add(faceTriangle); //Add lines to image
    }

    drawingContext.DrawGeometry(Brushes.LightYellow, new Pen(Brushes.LightYellow, 1.0), faceModelGroup);
}

private struct FaceModelTriangle3D
{
     public Point3D Point1_3D;
     public Point3D Point2_3D;
     public Point3D Point3_3D;
} 
```

我目前收到错误“错误 2 参数 1：无法从 'System.Windows.Media.Media3D.Point3D' 转换为 'System.Windows.Point' F:\Work\Uni\4th Year\Final Year Project\Project\项目 3.0\项目 3.0\FaceTrackingViewer.xaml.cs 275 68 项目 3.0"

这是由以下原因引起的：

```
(new LineGeometry(faceModel3D[i].Point2_3D, faceModel3D[i].Point3_3D)); 
```

我需要使用什么来代替 LineGeometry 才能使其正常工作，或者是否有更有效的方法来做到这一点？

此外，一旦我创建了面部网格，我还希望能够存储这些信息，以便能够计算面部点之间的距离。那么我将如何存储三角形信息呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T15:20:32.150

Face Tracking Basics WPF 示例使用 Point2D，但您使用的是 Point3D。

这意味着您将 3D 坐标传递给 LineGeometry 构造函数，该构造函数用于 2D 绘图。需要将 3D 世界坐标转换为 2D 屏幕坐标；一个称为投影的过程。

WPF 包括一个透视相机类，应该可以胜任这项工作

```
System.Windows.Media.Media3D.PerspectiveCamera 
```

看看在 WPF 中创建 3D 场景 - [MSDN](http://msdn.microsoft.com/en-us/library/ms752082.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T11:24:33.470

> [如何从 kinect fracetrack 获取网格？](https://stackoverflow.com/questions/23043315/how-to-get-mesh-from-kinect-fracetrack/23047316#23047316)

对于第二个问题：
三角形信息为您提供了面孔，因此如果您想将其存储在例如 .obj 中，那么

1.  Vertices: vxyz
    (x,y,z 应该换成对应的代表坐标的数字，而 v 表示你正在列出顶点)

2.  三角形中的面：fijk
    （x,y,z 应替换为代表坐标的相应数字，而 f 表示您正在列出面）

amd 你有你的 .obj

如果您将其存储在程序中，那么我建议您使用两个容器（可能是数组或链表，具体取决于您想要的内容），一个用于顶点，一个用于面或有一个类来存储所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-04T01:04:37.153

确实，您需要从 3D 投影到 2D。但是，您应该使用 Kinect 框架的校准投影方法，而不是滚动您自己的投影：

```
Microsoft.Kinect.CoordinateMapper.MapSkeletonPointToDepthPoint() 
```

请参阅[http://msdn.microsoft.com/en-us/library/jj883696.aspx](http://msdn.microsoft.com/en-us/library/jj883696.aspx)

# sql - 是否可以将参数作为列传递给 MS 查询 SELECT 语句？

> ID：14647986
> 
> 赞同：1
> 
> 时间：2013-02-01T14:01:47.890
> 
> 标签：sql, excel, excel-2010, parameterized

我想在`Excel 2010`电子表格中放置一个 SQL 查询，其中 SELECT 中的一列将是一个参数。

我已经使用不同的表别名和从连接属性框中更改命令文本进行了一些尝试，但没有成功。每次尝试都会给我各种错误。我尝试使用谷歌搜索，但没有找到任何关于该主题的内容。我怀疑使用标准数据库查询根本不可能做到这一点，因为 MS 查询非常有限。`SELECT`有人可以验证在 Excel 中使用列名作为参数的 SQL 查询确实是不可能的吗？如果不是不可能，你能分享如何让它工作吗？

会是这样的...

```
SELECT tble.Date, tble.Hour, tble.[parameter]
FROM my_table tble 
```

一旦我得到上述工作，我想要一些参数化的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:09:35.187

这可能是您要查找的查询字符串吗？假设您从在这种情况下单元格范围充当表格的单元格中获取数据：-

```
SELECT ID, NAME, ADDRESS
FROM   [Sheet1$A1:C20]
WHERE  ID = [Sheet1$E2] 
```

参考：

*   [http://msdn.microsoft.com/en-us/office2010developertrainingcourse_vbalab_topic3.aspx](http://msdn.microsoft.com/en-us/office2010developertrainingcourse_vbalab_topic3.aspx)
*   [http://sathyabh.at/2010/10/12/creating-and-editing-parameterized-queries-in-excel-2007/](http://sathyabh.at/2010/10/12/creating-and-editing-parameterized-queries-in-excel-2007/)
*   [如何将参数传递给SQL（Excel）中的查询](https://stackoverflow.com/questions/5434768/how-to-pass-parameters-to-query-in-sql)

# javascript - $.getJSON 调用中的 JavaScript 变量范围

> ID：14647987
> 
> 赞同：1
> 
> 时间：2013-02-01T14:01:46.780
> 
> 标签：javascript, jquery, scope, getjson

为什么调用 showOrders 时，orders 数组是空的？我的服务返回 4 个对象，我可以在 .push 调用中遍历项目初始化，但返回的数组始终为空。

```
var showOrders = function(orders){
    $.each(orders, function(i, val){

        alert(val.Order + "::" + val.Href);         

    });
}
var orders = (function(d){
    var _r = [];
    $.getJSON("/_vti_bin/listdata.svc/Orders", function (data) {
        for(var i = 0; i < data.d.results.length; i++)
        {
            var o = data.d.results[i];

            _r.push({
                    Id: o.Id,
                    Order: o.Order, 
                    PurchaseDate: o.PurchaseDate, 
                    CustomerPO: o.CustomerPO, 
                    PurchasedBy: o.PurchasedBy, 
                    SubTotal: o.SubTotal, 
                    Status: o.Status,
                    Href: o.Path + "/DispForm.aspx?ID=" + o.Id
            });
        }
        return _r;
    });
    d(_r);
})(showOrders); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:31:06.393

$.getJSON 正在执行异步调用。您需要在 getJSON-call 的回调中执行 d-callback（在您的循环之后）：

```
var orders = (function(d){
  var _r = [];
  $.getJSON("/_vti_bin/listdata.svc/Orders", function (data) {
      for(var i = 0; i < data.d.results.length; i++)
      {
          var o = data.d.results[i];

          _r.push({
                Id: o.Id,
                Order: o.Order, 
                PurchaseDate: o.PurchaseDate, 
                CustomerPO: o.CustomerPO, 
                PurchasedBy: o.PurchasedBy, 
                SubTotal: o.SubTotal, 
                Status: o.Status,
                Href: o.Path + "/DispForm.aspx?ID=" + o.Id
        });
      }
      d(_r);

  });

})(showOrders); 
```

# r - 在ggplot2中很好地安排点之间的箭头

> ID：14647988
> 
> 赞同：4
> 
> 时间：2013-02-01T14:02:00.197
> 
> 标签：r, ggplot2, data-visualization

（注意 - 这与[在 gg​​plot 中使用多个尺寸比例相同](https://stackoverflow.com/questions/14647794/using-multiple-size-scales-in-a-ggplot)，但我问的是不同的问题）

我正在尝试构建一个显示从一个类到另一个类的转换的图。我想要代表每个班级的圆圈，以及从一个班级到另一个班级的箭头代表过渡。

我正在使用 geom_segment 和 arrow() 来绘制箭头。有没有办法：

*   使箭头在到达圆圈之前停止
*   调整位置，以便如果两个方向都有箭头，它们会被“躲避”而不是重叠。

我无法让 position="dodge" 在这里做任何有用的事情。

举个例子：

```
library(ggplot2)
points <- data.frame( x=runif(10), y=runif(10),class=1:10, size=runif(10,min=1000,max=100000) )
trans <- data.frame( from=rep(1:10,times=10), to=rep(1:10,each=10), amount=runif(100)^3 )
trans <- merge( trans, points, by.x="from", by.y="class" )
trans <- merge( trans, points, by.x="to", by.y="class", suffixes=c(".to",".from") )
ggplot( points, aes( x=x, y=y ) ) + geom_point(aes(size=size),color="red",shape=1) + 
    scale_size_continuous(range=c(4,20)) +
    geom_segment( data=trans[trans$amount>0.6,], aes( x=x.from, y=y.from, xend=x.to, yend=y.to ),lineend="round",arrow=arrow(),alpha=0.5, size=0.3) 
```

![示例图](../Images/5bc9059dfcf0f43b8ff879bc52636a58.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T22:02:49.947

我想既然没有人给出解决方案，我会提供一个更针对此类问题的包示例：

```
vecs  <- data.frame(vecs =1:6,size=sample(1:100,6))
edges <- data.frame(from=sample(1:6,9,replace=TRUE), to=sample(1:6,9,replace=TRUE))

library(igraph)

g      <- graph.data.frame(edges, vertices = vecs, directed = TRUE)
coords <- cbind(sample(1:20,6), sample(1:20,6))

plot(g, vertex.size=V(g)$size,vertex.color="white",layout=coords,axes=TRUE) 
```

这至少会在圆圈问题之前解决你的箭头，并且当有倒数箭头时，它会用曲线调整它们，如下所示`2<->5`：

![在此处输入图像描述](../Images/7c54a97bf2283971aac336acec3ba791.png)

（当然可以修改箭头大小、线宽、颜色等）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T17:57:58.597

我整理了 geom_segment 的一个简单扩展，它允许指定

*   在行首和行尾缩短
*   抵消共享反向源和目标的线的数量

它在 pastebin 上：[geom_segment_plus](http://pastebin.com/0BRwUzpu)。

我使用了以下代码：

```
ggplot( points, aes( x=x, y=y ) ) + geom_point(aes(size=size),color="red",shape=1) +
    scale_size_continuous(range=c(4,20)) + 
    geom_segment_plus( data=trans[trans$amount>0.3,], 
        aes( x=x.from, y=y.from, xend=x.to, yend=y.to ),
        lineend="round",arrow=arrow(length=unit(0.15, "inches")),
        alpha=0.5, size=1.3, 
        offset=0.01, shorten.start=0.03, shorten.end=0.03) 
```

这绝对不是完美的，但它确实有效——你可以看到一个双箭头指向左下角。

offset、shortcut.start 和 short.end 是添加的 aes 元素。它们可以设置为数据点，但我还没有弄清楚如何正确缩放它们。

![在此处输入图像描述](../Images/7db932f04fda9bd2f8dd96c11832299c.png)

# iphone - 在 iOS 中的 UI 活动期间有条件地（取决于持续时间）显示活动指示器

> ID：14647989
> 
> 赞同：0
> 
> 时间：2013-02-01T14:01:58.137
> 
> 标签：iphone, ios, ipad, uiscrollview, uiactivityindicatorview

我使用 UIScrollView 来显示 PDF 文件。水平滚动会改变页面。这很好用，但是当下一页是全尺寸图像时，滚动视图会在开始动画滚动之前卡住。这是正常行为。

我想在持续时间超过一秒时显示活动指示器，以改善对用户的反馈。

我已经尝试过启动计时器的简单方法，该计时器在一秒钟后启动指示器。它没有出现，我假设它与需要很长时间的 UI 活动（更改页面）在同一个线程上排队。我还尝试使用 performSelectorOnMainThread 来启动指标，但这是一个弱猜测并且没有帮助。

我对 iOS 中线程的理解是这里的问题。我只能猜测，我必须中断页面更改，执行活动指示器的启动，然后继续更改（渲染）页面。我不知道该怎么做。我会很感激一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:11:27.923

我猜您的计时器不会触发，因为您在调用`performSelectorOnMainThread`方法或调度`NSTimer`. 它不起作用，因为在这种情况下，您的方法将在滚动完成后调用，即在您松开手指后。

为了让你的计时器即使在滚动期间也能触发，`NSRunLoopCommonModes`用作运行循环模式。

```
[self performSelectorOnMainThread:@selector(yourMethod)
                       withObject:nil
                    waitUntilDone:NO
                            modes:@[NSRunLoopCommonModes]]; 
```

**编辑**

您不应该阻塞主线程，否则在主线程完成加载图像之前不会调用该方法。而是在后台线程中加载图像并通过实现委托方法来防止滚动视图滚动。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView{
  if([self isLoadingImage]){
    //save the content offset when you start loading the image
    //and use it here to stop scroll view from scrolling.
    scrollView.contentOffset = offsetWhenLoadingStarted;
  }
} 
```

# c# - 统一失败的Viewinjection

> ID：14647992
> 
> 赞同：2
> 
> 时间：2013-02-01T14:02:06.877
> 
> 标签：c#, navigation, prism, unity-container, prism-4

我无法使用 Prism 4 进行导航。

我已经设置了一个测试解决方案，其中我有一个带有一个名为的区域的外壳`MainRegion`：

```
<Window x:Class="PrismNavigationTest.ShellView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:prism="http://www.codeplex.com/prism"
        Title="ShellView" Height="350" Width="525">
    <Grid>
        <ContentControl prism:RegionManager.RegionName="MainRegion"/>
    </Grid>
</Window> 
```

接下来我有一个引导程序，它将`Module`位于不同项目中的 a 添加到我的`modulecatalog`：

```
protected override void ConfigureModuleCatalog()
{
    Type module = typeof(Module.ModuleInit);
    ModuleCatalog.AddModule(new ModuleInfo("Module", module.AssemblyQualifiedName));

    base.ConfigureModuleCatalog();
} 
```

在`ModuleInit`类的 Initialize 方法中，我试图更改`mainregion`.

```
public class ModuleInit : IModule
{
    private IUnityContainer container;
    private IRegionManager regionManager;

    public ModuleInit(IUnityContainer container, IRegionManager regionManager)
    {
        this.container = container;
        this.regionManager = regionManager;
    }

    public void Initialize()
    {
        // TODO This works
        //regionManager.RegisterViewWithRegion("MainRegion", () => container.Resolve<View>());

        // TODO This doesn't work
        container.RegisterType<object, View>("View1");
        regionManager.Regions["MainRegion"].RequestNavigate(new Uri("View1", UriKind.Relative));
    }
} 
```

使用视图发现有效，但视图注入无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:20:02.373

更改以下行；

```
regionManager.RequestNavigate("MainRegion", "View1"); 
```

对此；

```
var view1 = new Uri("View1", UriKind.Relative);
regionManager.RequestNavigate("MainRegion", view1); 
```

此外，似乎还有另一个问题，您`() => container.Resolve<View>()`在显示视图时调用`RegisterViewWithRegion`. 然后似乎您已经注册了该视图。但是在“不工作”部分，您正在`View`重新注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:18:30.087

问题出在我的`Bootstrapper`.

在`InitializeShell`我使用以下代码从容器中解析 Shell 的方法中：

```
Application.Current.MainWindow = (Window)ServiceLocator.Current.GetInstance<Shell>(); 
```

我将其更改为使用已经初始化的 shell：

```
Application.Current.MainWindow = (Window)this.Shell; 
```

我对此仍然有些困惑，但我认为这与统一创建新对象有关，而不是在解析时默认为单例。

# java - 使用 Selenium Webdriver 在弹出窗口中找不到元素

> ID：14647993
> 
> 赞同：0
> 
> 时间：2013-02-01T14:02:11.980
> 
> 标签：java, dom, automation, popup, selenium-webdriver

我在 Java 中使用 InternetExplorerDriver 和 Selenium Webdriver。

我加载了一个 URL，它同时打开了另一个具有登录框的窗口。使用[这里提到的方法](http://www.thoughtworks-studios.com/twist/2.3/help/how_do_i_handle_popup_in_selenium2.html)

我可以选择所需的窗口，也可以选择`send keys`焦点框。

```
popup.getKeyboard().sendKeys("yeuiryuiryweuiryeuiyterui"); 
```

但是，以下内容：

```
popup.findElement(By.id("userName")).sendKeys("user") 
```

无法找到该元素并引发`Element-not-found`异常（类似于此）。

我在哪里弄错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:56:32.113

我会建议你尝试使用 xpath

```
String locator = "//*[@class='Class name of user name text box'and text()='if any']" 
```

可以通过firebug找到用户名

```
List<WebElement> element = Driver.driver.findElements(By.xpath(locator)); 
```

然后在 web 元素上使用单击功能，对密码执行相同操作，然后直接使用单击登录`Driver.selenium.click(xpath);`并提供登录按钮的 xpath，以防 id 不存在。