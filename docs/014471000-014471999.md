# StackOverflow 问答 14471000-14471999

# php - 识别捕获 php / codeigniter 错误的位置

> ID：14471002
> 
> 赞同：0
> 
> 时间：2013-01-23T01:24:54.100
> 
> 标签：php, codeigniter, error-handling

我试图在我的网络应用程序中捕获所有意外错误消息并向最终用户显示一般消息。但截至目前，我的页面上出现了几条 php / codeigniter 错误消息。

我的控制器中有以下逻辑：

```
public function logs()
{
    try {
        $data['logcontents'] = $this->switches_model->get_logs($this->uri->segment(7), $this->uri->segment(4));
        $data['main_content']='logs';
        $this->load->view('includes/template', $data);
    }
    catch (Exception $e) {
        show_error($e->getMessage());
    }   
}// end logs 
```

我的模型看起来像这样：

```
public function get_logs($dnsName, $switchname)
{
     try {              
            if ( $switch_obj->connect() )  {
            //do something                  
            return $data;
             }
        else {
            throw new Exception('Connection');

        }//end if
        }// end try
    catch (Exception $e) {
        print 'switches_model get_logs e handler<BR>';
        $this->error_handler($e->getMessage());
        return false;
    } 
```

最后，这就是我模型中的 error_handler() 方法的样子：

```
 private function error_handler($emess)
    {
        switch ($emess)
        {
            case 'Connection':
                $userfriendlyemess = "Unable to connect to device. Please contact administrator! (1)";
                break;

            case 'Empty Data Set':
                $userfriendlyemess = "Device connected.  Unable to get data.  Please contact administrator! (3)";
                break;
            case 'Failure':
                $userfriendlyemess = "Oops!  Unable to complete command. Please contact administrator! (4)";
                break;
            //handling unknown errors   
            default:
                $userfriendlyemess = "Oops!  Something big just happened. (99)";
                log_message('error', $emess); //write to ci logs
                break;
        }
        throw new Exception($userfriendlyemess);            
    } 
```

我已经在本地测试了这个逻辑，当我模拟连接失败时，我收到一条错误消息，显示消息“无法连接到设备。请联系管理员！(1)”，这是我所期望的。

但我在不同的网络服务器上尝试同样的逻辑，现在，我收到了一堆额外的错误消息：

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义的属性：switches::$_password
> 
> 文件名：core/Model.php
> 
> 行号：51 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义的属性：switches::$_userId
> 
> 文件名：core/Model.php
> 
> 行号：51 switch_model get_logs e handler 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：无法修改标头信息 - 标头已发送（输出开始于 /myapp/system/core/Exceptions.php:185）
> 
> 文件名：core/Common.php
> 
> 行号：438 遇到错误
> 
> 无法连接到设备。请联系管理员！(1)

我也想知道来自 CI 的这些消息是什么意思……但我可以用谷歌搜索它们。现在，我只是想知道如何防止这些消息出现在用户面前。我只想让他们记录下来。在我的 CI config.php 中，我有 $config['log_threshold'] = 1;

谢谢。

**编辑 1**

我弄清楚了为什么会出现错误-这是因为我没有正确声明 2 个变量。但是，如果您能帮助我解决问题以防止 GUI 上出现意外错误，那将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:16:41.717

看起来它们来自 CodeIgniter，但它们实际上来自 PHP。您可能应该阅读一般的 PHP 错误处理，但[这里有一个 50000 英尺的概述](http://phpcodeignitor.blogspot.com/2011/07/php-error-handling.html)，来自喜欢 CI 的人。作为一项规则，您应该在 dev 上尽可能严格地报告错误，并且在 prod 上它应该记录到文件中（如果可能，永远不要向最终用户显示）。

# c++ - 这个宏有什么作用？

> ID：14471004
> 
> 赞同：3
> 
> 时间：2013-01-23T01:24:59.723
> 
> 标签：c++, macros, interrupt

我正在做一个项目，并使用过去几年的项目来帮助我获得关于如何做某些事情的想法。请注意，我不是盲目地抄袭，而是书中没有很多东西。无论如何，这是我不明白的宏：

```
#define PREPAREENTRY(numIVT,oldINT) \
    void interrupt int##numIVT(...){\
            IVTEntry::entries[##numIVT]->signalAll();\
            if (oldINT) IVTEntry::entries[##numIVT]->callOld();}\
    IVTEntry entry##numIVT(##numIVT,int##numIVT); 
#endif 
```

我不完全确定，但我想我掌握了大部分内容。因此，PREPAREENTRY 得到两个值，numIVT（IV 表中的数字）和 OldNT（旧中断）。

然后它会创建一个名为 numIVT 的中断函数，我稍后可以将其设置为某个中断的中断函数，或者当该中断出现时会发生什么。

新的中断函数根据 numIVT 从对象数组中调用某个对象的 signalAll()。然后它检查它是否应该调用旧的中断函数并调用它。

新的中断函数到此结束。

但是#endif 之前的行是做什么的？我一直在寻找整个项目，但找不到答案。在头脑风暴期间看这个项目之前，我想到了类似的东西，但没有最后一行。

如果有人能告诉我我认为我被挂断的部分是对还是错，如果有人能告诉我这条神秘的线是做什么的，那将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T01:30:12.300

让我们假设`numIVT=1`。宏的最后一部分将扩展为：

```
IVTEntry entry1(1, int1); 
```

这意味着您正在定义一个 type 的对象`IVTEntry`，并使用`1`and `int1`（在同一宏中声明的函数）作为其构造函数参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:30:55.277

最后一行是声明一个名为 entry** 的 IVTEntry 类型的对象，并用一个数字和刚刚定义的函数对其进行初始化。

# php - MongoDB 抱怨缺少 2d 地理空间索引，但它似乎存在

> ID：14471005
> 
> 赞同：0
> 
> 时间：2013-01-23T01:25:01.177
> 
> 标签：php, mongodb, indexing, geospatial

我有一个非常简单的 PHP 函数，它应该根据传递给它的坐标返回一个事物的最近位置：

```
private function getLocationClosestTo($longitude, $latitude) {
    /**
     * NOTE: I've found some conflicting documentation about '$geoNear'.
     * Some say to use the field name in the collection, others say to use
     * the collection name. I've tried both 'location' and 'locationCollection'
     * and both have resulted in the same error. Seems like the field name
     * would be correct, since the collection name is specified before ->find().
     */
    $query= array('$geoNear' => 'location', '$near' => array($longitude, $latitude), '$num' => 1, '$spherical' => true);
    $cursor = $this->db->locationCollection->find($query);

    $location = null;
    // unnecessary, but I can clean it up
    foreach($cursor as $doc) {
        $location = $doc;
    }

    return $location;
} 
```

的内容`locationCollection`非常简单。这是一个示例文档：

```
{
   "_id": ObjectId("50ff04be7139fa2bbaf8f3cb"),
   "number": "100",
   "store_name": "Baz",
   "street": "Bar",
   "city": "Foo",
   "state": "CA",
   "zip": "98057",
   // plus a few other fields, and finally, the important stuff:
   "location": {
     "longitude": -122.2171, // MongoDB wants longitude first (x then y)
     "latitude": 47.4829 
  }
} 
```

我使用以下命令创建了索引：`db.locationCollection.ensureIndex({"location" : "2d" })`，并且`system.indexes`似乎在 中的字段`2d`上有正确的索引：`location``locationCollection`

```
{
   "v": 1,
   "key": {
     "location": "2d" 
  },
   "ns": "dbName.locationCollection",
   "name": "location_" 
} 
```

然而，当我执行我的代码时，我收到以下错误：

```
Uncaught exception 'MongoCursorException' with message 'can't find special index: 2d for: { $geoNear: "location", $near: [ -122.4194, 37.7749 ], $num: 1, $spherical: true }' 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:36:30.153

我认为您的查询应该是这样的：

```
$query= array('location' => array('$nearSphere' => array($longitude, $latitude)));
$location = $this->db->locationCollection->findOne($query);
return $location; 
```

您的困惑可能源于使用[`find`function](http://php.net/manual/en/mongocollection.find.php)和[`command`function](http://php.net/manual/en/mongodb.command.php)之间的不同语法。

# jquery - SpringMVC JQuery WebCam 插件

> ID：14471015
> 
> 赞同：1
> 
> 时间：2013-01-23T01:25:53.287
> 
> 标签：jquery, html, spring-mvc, jquery-plugins

我正在开发一个**SpringMVC**应用程序。此应用程序是一个表单，用户使用[Jquery WebCam Plufin 拍照](http://www.xarg.org/project/jquery-webcam-plugin/)。我有网络摄像头，我可以拍照，但是我现在需要将图像写入数据库或将其上传到服务器。

我想插入数据库。我想知道在插入数据库之前是否先上传到服务器？我不确定如何处理这个问题。有人可以指导我这个和最好的方法吗

**代码：**

```
 $(document).ready(function(){

        document.createElement("canvas");

        $("#canvas").hide();

        $("#camera").webcam({
                width: 320,
                height: 240,
                useMicrophone: false,
                mode: "callback",
                swffile: "resources/swf/jscam_canvas_only.swf",
                quality:85,

                onSave: saveCB,
                onCapture: function () {
                    $("#camera").hide();
                    webcam.save();
                    $("#canvas").show();
                },

                debug: function (type, string) {
                    $("#status").html(type + ": " + string);
                }

        }); 

        $('#upload').click(function () {
            webcam.capture();
            return false;
        });

        $('#retake').click(function () {
            $("#canvas").hide();
            $("#camera").show();
            return false;
        });

        window.addEventListener("load", function() {

            var canvas = document.getElementById("canvas");

            if (canvas.getContext) {
                ctx = document.getElementById("canvas").getContext("2d");
                ctx.clearRect(0, 0, 320, 240);
                image = ctx.getImageData(0, 0, 320, 240);
            }

            }, false);
});

    <div id="tab1" class="divGroup">
            <form:form id="citizenRegistration" name ="citizenRegistration" method="POST" commandName="citizens" action="citizen_registration.htm">
                <div id="divRight" class="mainDiv">             
                    <div class="divGroup" id="divCharInfo"> 

                        <label id="status"></label>                             
                        <div id="camera"></div>

                        <div><p><canvas id="canvas" name="photo" height="240" width="320"></canvas></p><form:errors path="photo" class="errors"/></div>
                        <input  id="upload" type="button" value="Take Photo">
                        <input  id="retake" type="button" value="Re-Take Photo"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:22:20.793

不知道你是否还需要这个答案。顺便说一句，您使用的是不支持“保存”模式的 jscam_canvas_only.swf。移至 jscam.swf 后重试...

# knockout.js - 使用 knockoutjs attr 编写 data* 属性

> ID：14471018
> 
> 赞同：47
> 
> 时间：2013-01-23T01:26:16.853
> 
> 标签：knockout.js, custom-data-attribute

我遇到了敲除.js 中的 data* 属性的问题，即。用`attr`.

我可以毫无问题地做到这一点：

```
<input data-bind='text: Title, attr: {name: "Events[" + viewModel.events.indexOf($data) + "].Title"}'/> 
```

但如果我想使用`data-id`，常规方式不起作用，所以我在属性周围加上单引号：

```
<input data-bind='text: Title, attr: {'data-id': "Events[" + viewModel.events.indexOf($data) + "].Title"}'/> 
```

这给了我

```
Error: Unable to parse bindings.
Message: SyntaxError: missing } in compound statement;
Bindings value: attr: {
http://127.0.0.1:21254/Scripts/knockout/knockout-2.2.0.js 
```

有人可以看到这里出了什么问题吗？

干杯!

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-01-23T02:04:09.597

你只需要在它周围加上双引号：

```
<input data-bind='text: Title, attr: {"data-id": "Events[" + viewModel.events.indexOf($data) + "].Title"}'/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-13T06:43:52.370

您甚至不需要在 attr 名称周围加上双引号或单引号，只需简单地使用`data-id`

```
<input data-bind='text: Title, attr: {data-id: "Events[" + viewModel.events.indexOf($data) + "].Title"}'/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T19:07:39.890

下面是一个工作片段，说明如何使用 Knockout 设置自定义数据属性值：

```
ko.applyBindings({
  somevalue: 'foo',
  title: 'Knockout custom data attribute binding --  example'
});

$("#result").text($("#test-el").data("someattr"));
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.2.0/knockout-min.js"></script>

<div data-bind="text: title, attr: {'data-someattr': somevalue}" id="test-el"></div>

<p>
  <b>Test data attribute expected value:</b> foo
</p>

<p>
  <b>Test data attribute value: </b>
  <span id="result"></span>
</p>
```

# php - 使用 php 从 mysql 获取 int (11) 日期

> ID：14471024
> 
> 赞同：-1
> 
> 时间：2013-01-23T01:26:39.147
> 
> 标签：php, mysql, unix-timestamp

我想要做的是`int(11)`从 mysql 获取日期和时间并在 PHP 中显示它：

```
<?php

$dbusername     = 'dbuser';
$dbpassword     = 'dbpassword';
$dbhost     = 'localhost';
$dbname     = 'dbname';

        $conn = mysql_connect($dbhost,$dbusername,$dbpassword);
        if (!$conn)
        {
         die('Could not connect: ' . mysql_error());
        }

        $conn = mysql_connect($dbhost,$dbusername,$dbpassword);
        if (!$conn)
        {
         die('Could not connect: ' . mysql_error());
        }

        mysql_select_db($dbname, $conn);

        $query = "SELECT from_unixtime(mycolumn) FROM mytable";

?> 
```

但页面加载并没有显示任何内容。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:37:59.047

@Jeffrey 说的是对的

但不推荐调用mysql函数，可以这样尝试：

```
$query = "SELECT from_unixtime(mycolumn) as timestamp FROM mytable";
$result = mysql_fetch_assoc($query);
echo date('Y-m-d', $result['timestamp']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:31:15.653

您没有执行查询：

```
$query = "SELECT from_unixtime(mycolumn) FROM mytable";
$result = mysql_query($query);
if (mysql_num_rows($result) > 0) {
    while ($row = mysql_fetch_assoc($result)) {
        echo $row["field1"];
        echo $row["field2"];
        echo $row["field3"];
        // ...
    }
} 
```

*`mysql_*`附带说明：请注意 PHP 手册中每个函数中的红色框：*

> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T01:35:54.243

您似乎已停止构建查询..

我想你必须添加这个才能看到一些输出..

```
 $result=mysql_query($query);

    $num=mysql_numrows($result);

    mysql_close();

    echo "<b><center>Database Output</center></b><br><br>";

    $i=0;
    while ($i < $num) {

    $field1-name=mysql_result($result,$i,"mycolumn");
    echo "<b>$field1-name";

    $i++;
    } 
```

# php - 比没有唯一标识符的 DOM 更好的方法？

> ID：14471026
> 
> 赞同：3
> 
> 时间：2013-01-23T01:26:53.970
> 
> 标签：php, html, simple-html-dom

我还在纠结于学习 php 简单 DOM 并遇到了一个令人费解的场景。没有唯一的标签可以实际用来指定我想要的东西，它只是一大堆`<a>`标签。除了它们在评论之间分组的事实。

如果我做一个

```
foreach($html->find('comment a') as $a){
    $articles[] = array($a->href,$a->innertext);
} 
```

我得到了很多东西。那么有没有办法指定我想要`<a>`第一个和第二个评论之间的所有标签，第三个和第四个等。或者在这种情况下使用 DOM 不是最好的东西，因为它只是一堆 html。

片段：

```
<! FIRST COLUMN STARTS HERE>
<center><table CELLPADDING="3" WIDTH="100%"><tr>
<td ALIGN="LEFT" VALIGN="TOP" WIDTH="30%"><tt><b>
<A HREF="http://foo.bar">Text text text...</A><BR><BR> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:35:28.083

这是可能的，但考虑标签的顺序而不是它们的嵌套可能会更好。

```
$articles = array(array());
foreach($html->find('comment, a') as $a) {
    if ($a->nodetype == HDOM_TYPE_COMMENT) {
        $articles[] = array();
    } else {
        $articles[count($articles) - 1][] = array($a->href,$a->innertext);
    }
} 
```

这个（相当粗略的）代码将创建一个数组数组，一个用于`<a>`第一个评论之前的任何 s，一个用于每个评论，每个数组包含零个或多个文章，具体取决于它的评论和下一个评论之间出现的链接数。

顺便说一句，此代码不适用于您提供的代码片段，因为其中的注释分别以, 而不是和开头`<!`和结尾。我假设注释正确显示在实际的 HTML 标记中。`>``<!--``-->`

编辑：好的，可以在片段中找到“评论”。在这种情况下，simplehtml 似乎调用了所有其他以`<!`“未知”开头的标签。因此，如果您将其添加到上面的代码中，您将拥有链接数组：

```
$articles = array(array());
foreach($html->find('comment, unknown, a') as $a) {
    if (in_array($a->nodetype, array(HDOM_TYPE_COMMENT, HDOM_TYPE_UNKNOWN))) {
        $articles[] = array();
    } else {
        $articles[count($articles) - 1][] = array($a->href,$a->innertext);
    }
} 
```

# seo - Googlebot 是否索引 CSS 背景图像？

> ID：14471032
> 
> 赞同：1
> 
> 时间：2013-01-23T01:27:40.947
> 
> 标签：seo, search-engine, background-image, googlebot

我有一个页面，将图像显示为通过 css 定义的背景图像到 div 元素。这些图像不是通过 js 动态加载的，它们在页面加载时就在那里。没有深入了解为什么它是这样设计的，我的问题很简单，googlebot 会索引那些 css 定义的背景图像吗？还是他们没有能力被 googlebot 索引？很高兴能对此有所了解。对于奖励积分 - 通过内联 css 定义的背景图像与通过外部 css 定义的背景图像会对 googlebot 产生任何影响吗？如果您可以将我指向任何专门针对此问题的 Google 资源，请加分。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-06T08:38:18.323

谷歌的约翰穆勒今天早上在谷歌网站管理员标记中表示，谷歌图片搜索不会对来自 CSS 背景代码的图片进行索引和排名。他说，如果您希望您的图片在 Google 图片搜索中排名，那么您最好使用带有指向图片的源属性的普通图片标签。

查看谷歌网站管理员了解更多详情。

我的网站[赛明照明官方页面](https://www.seminglighting.com)曾经设置了图片在后台。对图片索引不好，我把代码改成了img，现在越来越好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:48:32.213

谷歌可能会索引那些在 css 中声明的 bg 图像，但如果您对特定域进行图像搜索，它们将不会显示

另外，你为什么要用内联css定义bg图像？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T16:44:18.273

只需制作图像站点地图

“ 图片站点地图信息有助于 Google 发现我们可能无法找到的图片（例如您的网站使用 JavaScript 代码访问的图片），并允许您向 Google 表明您希望 Google 抓取和索引您网站上的图片。”

[https://support.google.com/webmasters/answer/178636](https://support.google.com/webmasters/answer/178636)

# twitter - Orchard CMS 和 Twitter API 限制 - 你如何克服它？

> ID：14471036
> 
> 赞同：2
> 
> 时间：2013-01-23T01:28:05.480
> 
> 标签：twitter, orchardcms, orchardcms-1.6

我正在使用 Orchard 上的 LatestTwitter 模块，它使用起来非常简单——你只需输入你的 twitter 句柄就可以了。问题是，随着越来越多的人开始使用该网站，推文有时会突然开始消失。我的猜测是，因为这是一个未经身份验证的调用，我正在阅读 API 限制。

有没有办法克服这个限制？是否有果园模块可以做到这一点？我试图避免编写自定义模块，因为我对 Orchard 很陌生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T01:42:28.483

好吧，真的没有办法克服这个问题，小部件的创建者确实说他正在缓存对 twitter 的请求，所以它不应该真的损害你的限制。

[http://blog.maartenballiauw.be/post/2011/01/21/Writing-an-Orchard-widget-LatestTwitter.aspx](http://blog.maartenballiauw.be/post/2011/01/21/Writing-an-Orchard-widget-LatestTwitter.aspx)

也许进入代码，调试并确保它正确缓存？我一直使用 Wygwam 制作的 twitter 小部件，[http](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Twitter) ://gallery.orchardproject.net/List/Modules/Orchard.Module.Twitter但我从未在流量巨大的网站上使用过它 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:14:43.757

根据我的研究，您无法克服此特定模块的 API 限制。但是，为了阻止推文消失，我只是将缓存时间限制设置为 60 分钟。以前是10分钟。

这意味着，如果达到 API 限制，任何缓存的内容将仅持续 10 分钟，然后推文就会在汇总中消失。将其设置为 60 意味着它会持续一个小时，这在 API 限制重置和您开始加载新推文之前已经足够了。

# theory - 如何用L语言写阶乘函数？

> ID：14471039
> 
> 赞同：2
> 
> 时间：2013-01-23T01:28:24.520
> 
> 标签：theory, regular-language

L 语言由以下指令组成：

```
V <- V
V <- V+-1
IF V != 0 GOTO L, where each instruction may or may not have the label [L] 
```

如何在 L 中编写阶乘函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:13:09.097

In what follows, I assume you are able to write functions with return statements. Otherwise, you can inline all functions and use new variables for local variables, and a new variable for the result. Returns should cause a new branch to after the function body. In other words, I use function/return syntax to reduce the complexity, not because it adds any power to the language.

One may object that I get things like recursion, etc., but I am not using that; looping is accomplished by GOTO. Subtact/Add functions could be combined into one, based on the sign of the second argument, so I see no harm in each calling the other. Combining these, and generally removing the function/return syntax, is left as an exercise.

(1) Write a sign function; returns 0 if 0, 1 if positive, and -1 if negative.

```
Sign(X)
 1\. Y <- X
 2\. Z <- X
 3\. if Y=0 GOTO 8
 4\. if Z=0 GOTO 10
 5\. Y <- Y + 1
 6\. Z <- Z - 1
 7\. if 0=0 GOTO 3
 8\. if Z=0 GOTO 11
 9\. return -1
10\. return +1
11\. return 0 
```

(2) Write addition and subtraction functions.

```
Add(X, Y)
 1\. Sx = Sign(X)
 2\. Sy = Sign(Y)
 3\. if Sx=0 GOTO 13
 4\. if Sy=0 GOTO 14
 5\. SyP <- Sy + 1
 6\. if SyP=0 GOTO 15
 7\. Z <- Y
 8\. R <- X
 9\. R <- R + 1
10\. Z <- Z - 1
11\. if Z=0 GOTO 16
12\. if 0=0 GOTO 9
13\. return Y
14\. return X
15\. R <- Subtract(X, Y)
16\. return R 
```

Similarly for subtract.

(3) Write a multiplication function.

```
Multiply(X, Y)
 1\. Sy = Sign(y)
 2\. if Sy=0 GOTO 18
 3\. SyP = Sy + 1
 4\. if SyP=0 GOTO 12
 5\. C <- Y
 6\. R <- 0
 7\. C <- C - 1
 8\. R <- Add(R, X)
 9\. if C=0 GOTO 11
10\. if 0=0 GOTO 7
11\. return R
12\. C <- Y
13\. R <- 0
14\. C <- C + 1
15\. R <- Subtract(R, X)
16\. if C=0 GOTO 11
17\. if 0=0 GOTO 14
18\. return 0 
```

(4) Write the factorial function.

```
Factorial(X)
 1\. Sx = Sign(X)
 2\. if Sx=0 GOTO 11
 3\. SxP = Sx + 1
 4\. if Sx=0 GOTO 11
 5\. R <- 1
 6\. C <- X
 7\. R <- Multiply(R, C)
 8\. C <- C - 1
 9\. if C=0 GOTO 12
10\. if 0=0 GOTO 7
11\. return 1
12\. return R 
```

You may need to massage these to get them strictly following your formulation of L, but the ideas are sound (modulo silly errors I've introduced, writing in this language for the first time).

# ios - 将场景添加到导演 cocos2d iOS

> ID：14471040
> 
> 赞同：0
> 
> 时间：2013-01-23T01:28:41.223
> 
> 标签：ios, cocos2d-iphone, scene

这是我尝试的第一个 cocos2d 应用程序，我正在学习《Learning Cocos2d》一书中的示例，但它似乎指的是旧版本的 cocos。

我创建了一个场景，并在它的 init 方法中添加了 2 个图层。

现在教程说，在我的 delegate.m 中我应该添加这一行（准确地更改之前的那个 strted HelloWorldScene 的行）：

```
[director_ runWithScene:[GameScene node]]; 
```

但我收到一个错误。

奇怪的是它根本不使用那个代码，而是那个：

```
[director_ pushScene: [IntroLayer Scene]]; 
```

但是如果我使用它，我也会得到一个错误：

```
[director_ pushScene: [GameScene node]]; 
```

我的游戏场景在这里：

```
#import "GameScene.h"

@implementation GameScene
-(id) init{
    self=[super init];
    if (self!=nil){
        BackgroundLayer *backgroundLayer=[BackgroundLayer node];
        [self addChild:backgroundLayer z:0];

        GameplayLayer *gameplayLayer=[GameplayLayer node];
        [self addChild:gameplayLayer z:5];
    }
}

@end 
```

和我得到的错误：

```
EXC_BAD_ACCESS in both cases. 
```

如何从我的 appdelegate 开始这个场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:42:32.933

您必须发送`Scene`主管的 pushScene 方法参数，如

```
[director_ pushScene: [GameScene scene]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:52:23.930

谢谢你的帮助！

我确实使用过：

```
[director_ pushScene: [GameScene node]]; 
```

但实际的问题是在我的 GameScene 初始化方法中我忘记了返回 self.

# javascript - jQuery 无法正常工作，可能与 Prototype 冲突？

> ID：14471041
> 
> 赞同：3
> 
> 时间：2013-01-23T01:28:55.497
> 
> 标签：javascript, jquery, magento, prototype

我很抱歉这个模糊的标题。

我正在为我公司的网站制作一个新主题，并且页面上有 jQuery 选项卡和滑块。

选项卡和滑块都不起作用 - 我不太清楚为什么。我继承了设计并简单地更改了主题 - 我认为这可能与加载多个 jQuery 脚本有关 - 滑块抛出该方法`.split()`不存在的错误，并且选项卡无法正常工作他们应该。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:59:30.493

你应该做这个：

```
<action method="addJs"><script>jquery/jquery.js</script></action>
<action method="addJs"><script>jquery/jquery.plugin.js</script></action>
<action method="addJs"><script>jquery/jquery.moreplugin.js</script></action>
<action method="addJs"><script>jquery/jquery.noConflict.js</script></action>

<action method="addJs"><script>prototype/prototype.js</script></action> 
```

在 page.xml 布局中。

jquery.noConflict.js 文件：

```
var jQuery = $.noConflict(); 
```

之后，您可以随心所欲地调用 jQuery() 函数。顺序为：jquery -> jquery 插件 -> jquery 无冲突 -> 原型

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T01:52:12.027

Explosion Pills 是对的——你应该使用 jQuery.noConflict。先导入 jQuery，然后，在导入 Prototype 之前，插入该行

```
<script type="text/javascript">
    jQuery.noConflict();
</script> 
```

如果你这样做，那么在你的应用程序中引用 jQuery 的其他任何地方，都可以使用`jQuery(...)`or`jQuery.`代替`$(...)`or `$.`。它不应该弄乱你的脚本导入，除非你正在导入的那些脚本写得不好并且没有为自己定义 $ 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:54:10.260

I prefer to use the following snippets:

```
<script type="text/javascript">
  jQuery.noConflict();
  (function($) {
    $.ajax(...);
  })(jQuery);
</script> 
```

, which won't conflict with Prototype and remain to use '$' for jQuery. Here's some more information: [http://www.magentogarden.com/blog/using-jquery-in-magento-with-good-programming-practice.html](http://www.magentogarden.com/blog/using-jquery-in-magento-with-good-programming-practice.html)

# input - raw_input 每次都返回相同的东西？

> ID：14471042
> 
> 赞同：0
> 
> 时间：2013-01-23T01:29:02.220
> 
> 标签：input, raw-input

所以我在一个小型文字冒险中为我正在制作的商店提供了一个功能。这是代码：

```
def shop():
global p #prompt for raw_input
global gold
global arrows

print"""
You enter the small shop and the man at the counter asks "How can I help?"
"""

print"""
"What would you like to buy?" He asks
You look up at the list of items
Copper Axe - 50G
Copper Sword - 50G
Wooden Bow - 30G
Copper Arrows (20) - 20G
Iron Axe - 100G
Iron Sword - 100G
Iron Arrows (20) - 40G
Steel Axe - 200G
Steel Sword - 200G
Steel Arrows (20) - 80G

or type 'exit' to exit the store
    """
print"You have:"
print inv

op = raw_input(p)

if op == "copper axe" or "Copper axe" or "Copper Axe" or "copper Axe":
    if gold < 50:
        print"You do not have enough gold"
        shop()
    else:
        gold = gold - 50
        inv.append("Copper Axe")
        shop()
if op == "copper sword" or "copper Sword" or "Copper sword" or "Copper Sword":
    if gold < 50:
        print"You do not have enough gold"
        shop()
    else:
        gold = gold - 50
        inv.append("Copper Sword")
        shop()
elif op == "Wooden bow" or "wooden bow" or "Wooden Bow" or "wooden Bow":
    if gold < 30:
        print"You do not have enough gold"
        shop()
    else:
        gold = gold - 30
        inv.append("Wooden Bow")
        if arrows < 10:
            print"You should probably buy some arrows"
            shop()
elif op == "Copper Arrows" or "copper arrows" or "Copper arrows" or "copper Arrows":
    if gold < 20:
        print"You do not have enough gold"
        shop()
    else:
        gold = gold - 20
        arrows = arrows + 20
        inv.append("Copper Arrows: %p" % arrows)
        shop()
elif op == "iron axe" or "Iron axe" or "Iron Axe" or "iron Axe":
    if gold < 100:
        print"You do not have enough gold"
        shop()
    else:
        gold = gold - 100
        inv.append("Iron Axe")
        shop()
elif op == "iron sword" or "Iron Sword" or "Iron sword" or "iron Sword":
    if gold < 100:
        print"You do not have enough gold"
        shop()
    else:
        gold = gold - 100
        inv.append("Iron Sword")
        shop()
elif op == "iron arrows" or "Iron arrows" or "Iron Arrows" or "iron Arrows":
    if gold < 40:
        print"You do not have enough gold"
        shop()
    else:
        gold = gold - 40
        iarrows = iarrows + 20
        inv.append("Iron arrows %a" % iarrows)
        shop()
elif op == "Steel Axe" or "steel axe" or "Steel axe" or "steel Axe":
    if gold < 200:
        print"You do not have enough gold"
        shop()
    else:
        gold = gold - 200
        inv.append("Steel Axe")
        shop()
elif op == "Steel Sword" or "steel sword" or "Steel sword" or "steel Sword":
    if gold < 200:
        print"You do not have enough gold"
        shop()
    else:
        gold = gold - 200
        inv.append("Steel Sword")
        shop()
elif op == "Steel Arrows" or "steel arrows" or "Steel arrows" or "steel Arrows":
    if gold < 80:
        print"You do not have enough gold"
        shop()
    else:
        gold = gold - 80
        sarrows = sarrows + 20
        inv.append("Steel Arrows - %a" % sarrows)
elif op == "exit" or "Exit":
    menu()
else:
    synerr() #syntax error function 
```

基本上每次我运行它时，无论原始输入是什么，它都会以铜斧的形式返回。像这样：

```
You enter the small shop and the man at the counter asks "How can I help?"

"What would you like to buy?" He asks
You look up at the list of items
Copper Axe - 50G
Copper Sword - 50G
Wooden Bow - 30G
Copper Arrows (20) - 20G
Iron Axe - 100G
Iron Sword - 100G
Iron Arrows (20) - 40G
Steel Axe - 200G
Steel Sword - 200G
Steel Arrows (20) - 80G

or type 'exit' to exit the store

You have:
[]
>>>fkjas;ldkf

You enter the small shop and the man at the counter asks "How can I help?"

"What would you like to buy?" He asks
You look up at the list of items
Copper Axe - 50G
Copper Sword - 50G
Wooden Bow - 30G
Copper Arrows (20) - 20G
Iron Axe - 100G
Iron Sword - 100G
Iron Arrows (20) - 40G
Steel Axe - 200G
Steel Sword - 200G
Steel Arrows (20) - 80G

or type 'exit' to exit the store

You have:
['Copper Axe']
>>> 
```

那么有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:32:30.763

这个表达式：

```
op == "copper axe" or "Copper axe" or "Copper Axe" or "copper Axe" 
```

评估如下：

```
(op == "copper axe") or "Copper axe" or "Copper Axe" or "copper Axe" 
```

这就是你想要的：

```
op == "copper axe" or op == "Copper axe" or op == "Copper Axe" or op == "copper Axe" 
```

顺便说一句，这是一个快捷方式，转换为小写：

```
op.lower() == "copper axe" 
```

# wpf - 如何在 RichEditControl 中隐藏标尺

> ID：14471045
> 
> 赞同：1
> 
> 时间：2013-01-23T01:29:15.857
> 
> 标签：wpf, xaml

我想知道是否有办法在 RichEditControl 中隐藏标尺，如下所示：

```
<dxre:RichEditControl x:Name="richEditControl"
                      Grid.Row="1"
                      Margin="10"
                      Height="150"
                      VerticalScrollBarVisibility="Visible"
                      HorizontalScrollBarVisibility="Collapsed"
                      BarManager="{Binding ElementName=barManager1,
                                   Mode=OneTime}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:54:35.730

目前，我创建了一个没有标尺的控件：

```
using DevExpress.Xpf.RichEdit;
(...)
    public class RulerlessRichEditControl : RichEditControl
(...)
            Options.HorizontalRuler.Visibility = DevExpress.XtraRichEdit.RichEditRulerVisibility.Hidden;
            Options.VerticalRuler.Visibility = DevExpress.XtraRichEdit.RichEditRulerVisibility.Hidden; 
```

# java - 从 MySql 表生成 DAO 的 Pojo 和 JSP 的工具/Eclipse 插件？

> ID：14471047
> 
> 赞同：3
> 
> 时间：2013-01-23T01:29:42.923
> 
> 标签：java, mysql, eclipse, jsp, dao

有谁知道在eclipse EE中使用JPA后是否有任何eclipse插件可以从pojo生成jsp（使用EL）？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-27T12:33:32.943

您可以尝试**使用 Telosys**（请参阅[http://www.telosys.org](http://www.telosys.org)）一个简单的代码生成器来搭建脚手架。

该工具作为 Eclipse 插件（以及其他插件）提供。

如有必要，可以调整模板以生成纯 JSP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:43:15.123

我建议研究[JBoss Forge](http://forge.jboss.org/)和[Spring Roo](http://www.springsource.org/spring-roo)。这两者都是类似于[Rails 脚手架](http://en.wikipedia.org/wiki/Scaffold_%28programming%29#Scaffolding_in_Ruby_on_Rails)的快速原型和脚手架工具。它们是从命令行执行的（不要害怕它非常简单），但是它们都有用于 Eclipse 的插件。来自 Forge 的报价：

> 在基于标准的环境中快速应用程序开发的核心框架。Java EE 的插件/增量项目增强等。

一般来说，如果您更多地使用 Java EE 6 堆栈，则使用 Forge 会更简单，如果您使用 Spring，则使用 Spring Roo 会更简单。目前 Forge 在概念上更干净，因为它不使用 AspectJ 或任何其他类似的黑魔法。

# python - Python 2.7.1：如何打开、编辑和关闭 CSV 文件

> ID：14471049
> 
> 赞同：16
> 
> 时间：2013-01-23T01:30:09.940
> 
> 标签：python, csv, python-2.7

我无法打开文件 (amount2.csv) 进行更改、保存并关闭文件。

如何打开文件编辑、保存和关闭它？

```
import csv

changes = {
    '1 dozen' : '12'
    }
with open('amount2.csv', 'r') as f:
reader = csv.reader(f)
print f
f.close() 
```

我的错误：在 0x1004656f0 打开文件“amount2.csv”，模式“r”（<> 已删除）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-23T02:27:19.957

这

```
<open file 'amount2.csv', mode 'r' at 0x1004656f0> 
```

您看到的不是错误，而是“打印 f”的结果。要查看文件的内容，您可以这样做

```
with open('test.csv', 'rb') as f:
    reader = csv.reader(f)
    for row in reader:
        # row is a list of strings
        # use string.join to put them together
        print ', '.join(row) 
```

要将行附加到您的文件中，请改为

```
changes = [    
    ['1 dozen','12'],                                                            
    ['1 banana','13'],                                                           
    ['1 dollar','elephant','heffalump'],                                         
    ]                                                                            

with open('test.csv', 'ab') as f:                                    
    writer = csv.writer(f)                                                       
    writer.writerows(changes) 
```

[Python CSV 文档](http://docs.python.org/2/library/csv.html)中的更多信息

编辑：

一开始我误解了，你想在你的 csv 文件中将“1打”的所有条目更改为“12”。我首先要说的是，不使用 csv 模块更容易做到这一点，但这里有一个使用它的解决方案。

```
import csv

new_rows = [] # a holder for our modified rows when we make them
changes = {   # a dictionary of changes to make, find 'key' substitue with 'value'
    '1 dozen' : '12', # I assume both 'key' and 'value' are strings
    }

with open('test.csv', 'rb') as f:
    reader = csv.reader(f) # pass the file to our csv reader
    for row in reader:     # iterate over the rows in the file
        new_row = row      # at first, just copy the row
        for key, value in changes.items(): # iterate over 'changes' dictionary
            new_row = [ x.replace(key, value) for x in new_row ] # make the substitutions
        new_rows.append(new_row) # add the modified rows

with open('test.csv', 'wb') as f:
    # Overwrite the old file with the modified rows
    writer = csv.writer(f)
    writer.writerows(new_rows) 
```

如果您是编程和 python 新手，最麻烦的可能是

```
new_row = [ x.replace(key, value) for x in new_row ] 
```

但这只是一个列表推导，实际上等效于

```
temp = []
for x in new_row:
    temp.append( x.replace(key, value) )
new_row = temp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:21:24.127

您正在尝试打印文件对象本身，这不会有多大用处。您是否查看[过 CSV 模块的文档](http://docs.python.org/2/library/csv.html)？第一个代码示例向您展示了如何使用 csv.reader。

# php - php DOM 元素值不是人类可读的，因为内容不是英文

> ID：14471052
> 
> 赞同：0
> 
> 时间：2013-01-23T01:30:24.600
> 
> 标签：php, html, dom

我正在尝试获取某个远程站点的 html 内容。我正在使用以下 php 脚本，但该脚本的输出中充满了不可读的字符。我不知道为什么它应该这样。仅供参考，我正在使用最新的 chrome 浏览器进行测试。

**脚本：**

```
<?php
$url = "http://www.sandesh.com/article.aspx?newsid=115627";
$curl = curl_init($url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
$output = curl_exec($curl);
curl_close($curl);
//echo $output;
$DOM = new DOMDocument;
@$DOM->loadHTML($output);
//get all H1
$items = $DOM -> getElementById('lblNews');
echo  $DOM -> getElementById('lblNews')->tagName;

echo "<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN'
'http://www.w3.org/TR/html4/loose.dtd'><html xmlns='http://www.w3.org/1999/xhtml'><head><meta http-equiv='Content-Type' content='text/html; charset=utf-8' /></head><body><span>". $items -> nodeValue ."</span". "<br/></body></html>";

//display all H1 text
/*
for ($i = 0; $i < $items -> length; $i++) {
    echo $items -> item($i) -> nodeValue . "<br/>";
}*/
?> 
```

输出：

```
span Ã ÂªÂ¨Ã ÂªÂµÃ Â«Â€ Ã ÂªÂ¦Ã ÂªÂ¿Ã ÂªÂ²Ã Â«ÂÃ ÂªÂ¹Ã Â«Â€, Ã ÂªÂ¤Ã ÂªÂ¾. Ã Â«Â¨Ã Â«Â¨ Ã ÂªÂ­Ã Â«ÂÃ ÂªÂ°Ã ÂªÂ·Ã Â«ÂÃ ÂªÂŸÃ ÂªÂ¾Ã ÂªÂšÃ ÂªÂ¾Ã ÂªÂ°Ã ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂ†Ã ÂªÂ°Ã Â«Â‹Ã ÂªÂªÃ Â«Â‹ Ã ÂªÂ…Ã ÂªÂ¨Ã Â«Â‡ Ã ÂªÂªÃ ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ‚ Ã ÂªÂ­Ã ÂªÂ¾Ã ÂªÂ°Ã Â«Â‡ Ã ÂªÂµÃ ÂªÂ¿Ã ÂªÂ°Ã Â«Â‹Ã ÂªÂ§Ã ÂªÂ¨Ã Â«Â‡ Ã ÂªÂªÃ ÂªÂ—Ã ÂªÂ²Ã Â«Â‡ Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂœÃ Â«Â€Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ®Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ†Ã ÂªÂªÃ Â«ÂÃ ÂªÂ¯Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂªÃ ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂªÃ Â«ÂÃ ÂªÂ°Ã ÂªÂ®Ã Â«ÂÃ ÂªÂ–Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂšÃ Â«Â‚Ã ÂªÂ‚Ã ÂªÂŸÃ ÂªÂ£Ã Â«Â€ Ã ÂªÂªÃ Â«Â‚Ã ÂªÂ°Ã Â«ÂÃ ÂªÂµÃ Â«Â‡Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂ¬Ã Â«Â‡Ã ÂªÂ Ã ÂªÂ•Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ‚ Ã ÂªÂ¹Ã ÂªÂ¾Ã ÂªÂˆÃ ÂªÂ¡Ã Â«ÂÃ ÂªÂ°Ã ÂªÂ¾Ã ÂªÂ®Ã ÂªÂ¾ Ã ÂªÂ…Ã ÂªÂ§Ã Â«ÂÃ ÂªÂ¯Ã ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂªÃ ÂªÂ¦ Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂŸÃ Â«Â‡ Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂœÃ ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ¥Ã ÂªÂ¸Ã ÂªÂ¿Ã ÂªÂ‚Ã ÂªÂ¹Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ‚ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ® Ã ÂªÂªÃ ÂªÂ° Ã ÂªÂ¸Ã ÂªÂ°Ã Â«ÂÃ ÂªÂµÃ ÂªÂ¸Ã ÂªÂ‚Ã ÂªÂ®Ã ÂªÂ¤Ã ÂªÂ¿ Ã ÂªÂ¹Ã Â«Â‹Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂšÃ ÂªÂ°Ã Â«ÂÃ ÂªÂšÃ ÂªÂ¾ Ã ÂªÂ¸Ã ÂªÂ‚Ã ÂªÂ˜Ã ÂªÂ¨Ã Â«Â‡ Ã ÂªÂªÃ ÂªÂ£ Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ‚Ã ÂªÂ§Ã Â«Â‹ Ã ÂªÂ¨Ã ÂªÂ¥Ã Â«Â€, Ã ÂªÂ¨Ã ÂªÂ¿Ã ÂªÂ°Ã Â«ÂÃ ÂªÂµÃ ÂªÂ¿Ã ÂªÂ°Ã Â«Â‹Ã ÂªÂ§ Ã ÂªÂšÃ Â«Â‚Ã ÂªÂ‚Ã ÂªÂŸÃ ÂªÂ¾Ã ÂªÂˆ Ã ÂªÂ¶Ã ÂªÂ•Ã Â«Â‡ Ã ÂªÂ›Ã Â«Â‡ Ã ÂªÂ†Ã ÂªÂœÃ Â«Â‡ Ã ÂªÂ­Ã ÂªÂ¾Ã ÂªÂœÃ ÂªÂªÃ ÂªÂ¨Ã Â«Â€ Ã ÂªÂ¸Ã ÂªÂ‚Ã ÂªÂ¸Ã ÂªÂ¦Ã Â«Â€Ã ÂªÂ¯ Ã ÂªÂ¸Ã ÂªÂ®Ã ÂªÂ¿Ã ÂªÂ¤Ã ÂªÂ¿Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂ¬Ã Â«Â‡Ã ÂªÂ Ã ÂªÂ• Ã ÂªÂ­Ã ÂªÂ¾Ã ÂªÂœÃ ÂªÂªÃ ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂ·Ã Â«ÂÃ ÂªÂŸÃ Â«ÂÃ ÂªÂ°Ã Â«Â€Ã ÂªÂ¯ Ã ÂªÂ…Ã ÂªÂ§Ã Â«ÂÃ ÂªÂ¯Ã ÂªÂ•Ã Â«ÂÃ ÂªÂ· Ã ÂªÂ¨Ã Â«Â€Ã ÂªÂ¤Ã ÂªÂ¿Ã ÂªÂ¨ Ã ÂªÂ—Ã ÂªÂ¡Ã ÂªÂ•Ã ÂªÂ°Ã Â«Â€Ã ÂªÂ Ã ÂªÂ®Ã ÂªÂ‚Ã ÂªÂ—Ã ÂªÂ³Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ°Ã Â«Â‡ Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂ¤Ã Â«ÂÃ ÂªÂ°Ã Â«Â‡ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂŸÃ ÂªÂ•Ã Â«Â€Ã ÂªÂ¯ Ã ÂªÂ…Ã ÂªÂ‚Ã ÂªÂ¦Ã ÂªÂ¾Ã ÂªÂœÃ ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ‚ Ã ÂªÂªÃ ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂ…Ã ÂªÂ§Ã Â«ÂÃ ÂªÂ¯Ã ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂªÃ ÂªÂ¦Ã Â«Â‡Ã ÂªÂ¥Ã Â«Â€ Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂœÃ Â«Â€Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ®Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ†Ã ÂªÂªÃ Â«ÂÃ ÂªÂ¯Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ¹Ã ÂªÂ¤Ã Â«ÂÃ ÂªÂ‚. Ã ÂªÂªÃ ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂµÃ ÂªÂ°Ã ÂªÂ¿Ã ÂªÂ·Ã Â«ÂÃ ÂªÂ  Ã ÂªÂ¨Ã Â«Â‡Ã ÂªÂ¤Ã ÂªÂ¾ Ã ÂªÂ²Ã ÂªÂ¾Ã ÂªÂ²Ã ÂªÂ•Ã Â«ÂƒÃ ÂªÂ·Ã Â«ÂÃ ÂªÂ£ Ã ÂªÂ…Ã ÂªÂ¡Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ£Ã Â«Â€ Ã ÂªÂ…Ã ÂªÂ¨Ã Â«Â‡ Ã ÂªÂ­Ã Â«ÂˆÃ ÂªÂ¯Ã ÂªÂ¾Ã ÂªÂœÃ Â«Â€ Ã ÂªÂœÃ Â«Â‹Ã ÂªÂ¶Ã Â«Â€ Ã ÂªÂ¸Ã ÂªÂ¾Ã ÂªÂ¥Ã Â«Â‡Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂ¬Ã Â«Â‡Ã ÂªÂ Ã ÂªÂ•Ã ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂ•Ã Â«Â‡Ã ÂªÂŸÃ ÂªÂ²Ã ÂªÂ¾Ã ÂªÂ• Ã ÂªÂ•Ã ÂªÂ²Ã ÂªÂ¾Ã ÂªÂ• Ã ÂªÂ¬Ã ÂªÂ¾Ã ÂªÂ¦ Ã ÂªÂœ Ã ÂªÂ—Ã ÂªÂ¡Ã ÂªÂ•Ã ÂªÂ°Ã Â«Â€Ã ÂªÂ Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂœÃ Â«Â€Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂœÃ ÂªÂ¾Ã ÂªÂ¹Ã Â«Â‡Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂ¤ Ã ÂªÂ•Ã ÂªÂ°Ã Â«Â€ Ã ÂªÂ¹Ã ÂªÂ¤Ã Â«Â€. Ã ÂªÂ—Ã ÂªÂ¡Ã ÂªÂ•Ã ÂªÂ°Ã Â«Â€Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ‚ Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂœÃ Â«Â€Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ®Ã ÂªÂ¾ Ã ÂªÂ¬Ã ÂªÂ¾Ã ÂªÂ¦ Ã ÂªÂªÃ ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂ‰Ã ÂªÂ¤Ã Â«ÂÃ ÂªÂ¤Ã ÂªÂ°Ã ÂªÂªÃ Â«ÂÃ ÂªÂ°Ã ÂªÂ¦Ã Â«Â‡Ã ÂªÂ¶Ã ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂ¸Ã ÂªÂ¾Ã ÂªÂ‚Ã ÂªÂ¸Ã ÂªÂ¦ Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂœÃ ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ¥Ã ÂªÂ¸Ã ÂªÂ¿Ã ÂªÂ‚Ã ÂªÂ¹ Ã ÂªÂ…Ã ÂªÂ§Ã Â«ÂÃ ÂªÂ¯Ã ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂªÃ ÂªÂ¦Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂ¹Ã ÂªÂ°Ã Â«Â€Ã ÂªÂ«Ã ÂªÂ¾Ã ÂªÂˆÃ ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ‚ Ã ÂªÂ¸Ã Â«ÂŒÃ ÂªÂ¥Ã Â«Â€ Ã ÂªÂ†Ã ÂªÂ—Ã ÂªÂ³ Ã ÂªÂ›Ã Â«Â‡. Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂ·Ã Â«ÂÃ ÂªÂŸÃ Â«ÂÃ ÂªÂ°Ã Â«Â€Ã ÂªÂ¯ Ã ÂªÂ¸Ã Â«ÂÃ ÂªÂµÃ ÂªÂ¯Ã ÂªÂ‚Ã ÂªÂ¸Ã Â«Â‡Ã ÂªÂµÃ ÂªÂ• Ã ÂªÂ¸Ã ÂªÂ‚Ã ÂªÂ˜ (Ã ÂªÂ†Ã ÂªÂ°Ã ÂªÂÃ ÂªÂ¸Ã ÂªÂÃ ÂªÂ¸)Ã ÂªÂ Ã ÂªÂªÃ ÂªÂ£ Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂœÃ ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ¥Ã ÂªÂ¸Ã ÂªÂ¿Ã ÂªÂ‚Ã ÂªÂ¹Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ‚ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ® Ã ÂªÂªÃ ÂªÂ° Ã ÂªÂ¸Ã ÂªÂ‚Ã ÂªÂ®Ã ÂªÂ¤Ã ÂªÂ¿ Ã ÂªÂ†Ã ÂªÂªÃ Â«Â€ Ã ÂªÂ¹Ã Â«Â‹Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ¨Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ¸Ã Â«Â‚Ã ÂªÂ¤Ã Â«ÂÃ ÂªÂ°Ã Â«Â‹Ã ÂªÂ Ã ÂªÂœÃ ÂªÂ£Ã ÂªÂ¾Ã ÂªÂµÃ Â«ÂÃ ÂªÂ¯Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ›Ã Â«Â‡, Ã ÂªÂœÃ Â«Â‹Ã ÂªÂ•Ã Â«Â‡ Ã ÂªÂ¨Ã ÂªÂµÃ ÂªÂ¾ Ã ÂªÂ…Ã ÂªÂ§Ã Â«ÂÃ ÂªÂ¯Ã ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂ°Ã Â«Â‡Ã ÂªÂ¸Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ‚ Ã ÂªÂµÃ Â«Â‡Ã ÂªÂ‚Ã ÂªÂ•Ã Â«ÂˆÃ ÂªÂ¯Ã ÂªÂ¾ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ¯Ã ÂªÂ¡Ã Â«ÂÃ ÂªÂ¨Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ® Ã ÂªÂªÃ ÂªÂ£ Ã ÂªÂšÃ ÂªÂ°Ã Â«ÂÃ ÂªÂšÃ ÂªÂ¾Ã ÂªÂˆ Ã ÂªÂ°Ã ÂªÂ¹Ã Â«ÂÃ ÂªÂ¯Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ›Ã Â«Â‡. Ã ÂªÂœÃ Â«Â‹Ã ÂªÂ•Ã Â«Â‡ Ã ÂªÂ¬Ã Â«ÂÃ ÂªÂ§Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ°Ã Â«Â‡ Ã ÂªÂ¸Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ°Ã Â«Â‡ Ã ÂªÂªÃ ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂ¸Ã ÂªÂ‚Ã ÂªÂ¸Ã ÂªÂ¦Ã Â«Â€Ã ÂªÂ¯ Ã ÂªÂ¸Ã ÂªÂ®Ã ÂªÂ¿Ã ÂªÂ¤Ã ÂªÂ¿Ã ÂªÂ¨Ã Â«Â‡ Ã ÂªÂ¬Ã Â«Â‡Ã ÂªÂ Ã ÂªÂ•Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ‚ Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂœÃ ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ¥Ã ÂªÂ¸Ã ÂªÂ¿Ã ÂªÂ‚Ã ÂªÂ¹Ã ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ®Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂ¸Ã ÂªÂ¤Ã Â«ÂÃ ÂªÂ¤Ã ÂªÂ¾Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ° Ã ÂªÂœÃ ÂªÂ¾Ã ÂªÂ¹Ã Â«Â‡Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂ¤ Ã ÂªÂ¥Ã ÂªÂˆ Ã ÂªÂ¶Ã ÂªÂ•Ã Â«Â‡ Ã ÂªÂ›Ã Â«Â‡ Ã ÂªÂ¤Ã Â«Â‡Ã ÂªÂ® Ã ÂªÂ¸Ã Â«Â‚Ã ÂªÂ¤Ã Â«ÂÃ ÂªÂ°Ã Â«Â‹ Ã ÂªÂœÃ ÂªÂ£Ã ÂªÂ¾Ã ÂªÂµÃ Â«Â‡ Ã ÂªÂ›Ã Â«Â‡. Ã ÂªÂ¬Ã Â«Â€Ã ÂªÂœÃ Â«Â€ Ã ÂªÂ¤Ã ÂªÂ°Ã ÂªÂ« Ã ÂªÂªÃ ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂµÃ ÂªÂ°Ã ÂªÂ¿Ã ÂªÂ·Ã Â«ÂÃ ÂªÂ  Ã ÂªÂ¨Ã Â«Â‡Ã ÂªÂ¤Ã ÂªÂ¾ Ã ÂªÂ¯Ã ÂªÂ¶Ã ÂªÂµÃ ÂªÂ‚Ã ÂªÂ¤ Ã ÂªÂ¸Ã ÂªÂ¿Ã ÂªÂ‚Ã ÂªÂ¹Ã ÂªÂ¾Ã ÂªÂ Ã ÂªÂªÃ ÂªÂ£ Ã ÂªÂ…Ã ÂªÂ§Ã Â«ÂÃ ÂªÂ¯Ã ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂªÃ ÂªÂ¦ Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂŸÃ Â«Â‡Ã ÂªÂ¨Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ‚Ã ÂªÂ•Ã ÂªÂ¨Ã ÂªÂªÃ ÂªÂ¤Ã Â«ÂÃ ÂªÂ° Ã ÂªÂ®Ã ÂªÂ‚Ã ÂªÂ—Ã ÂªÂ¾Ã ÂªÂµÃ Â«ÂÃ ÂªÂ¯Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ¹Ã ÂªÂ¤Ã Â«ÂÃ ÂªÂ‚. Ã ÂªÂœÃ Â«Â‹Ã ÂªÂ•Ã Â«Â‡ Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂœÃ ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ¥Ã ÂªÂ¸Ã ÂªÂ¿Ã ÂªÂ‚Ã ÂªÂ¹Ã ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ® Ã ÂªÂªÃ ÂªÂ° Ã ÂªÂ¸Ã ÂªÂ°Ã Â«ÂÃ ÂªÂµÃ ÂªÂ¸Ã ÂªÂ‚Ã ÂªÂ®Ã ÂªÂ¤Ã Â«ÂÃ ÂªÂ¤Ã ÂªÂ¿ Ã ÂªÂ¸Ã ÂªÂ§Ã ÂªÂ¾Ã ÂªÂ¤Ã ÂªÂ¾ Ã ÂªÂ¯Ã ÂªÂ¶Ã ÂªÂµÃ ÂªÂ‚Ã ÂªÂ¤ Ã ÂªÂ¸Ã ÂªÂ¿Ã ÂªÂ‚Ã ÂªÂ¹Ã ÂªÂ¾ Ã ÂªÂ¹Ã ÂªÂµÃ Â«Â‡ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ‚Ã ÂªÂ•Ã ÂªÂ¨Ã ÂªÂªÃ ÂªÂ¤Ã Â«ÂÃ ÂªÂ° Ã ÂªÂ¨Ã ÂªÂ¹Ã Â«Â€Ã ÂªÂ‚ Ã ÂªÂ­Ã ÂªÂ°Ã Â«Â‡. Ã ÂªÂ—Ã ÂªÂ¡Ã ÂªÂ•Ã ÂªÂ°Ã Â«Â€ Ã ÂªÂµÃ ÂªÂ¿Ã ÂªÂ°Ã Â«ÂÃ ÂªÂ¦Ã Â«ÂÃ ÂªÂ§ Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ¤Ã ÂªÂ¾Ã ÂªÂµÃ ÂªÂ°Ã ÂªÂ£ Ã ÂªÂ¬Ã ÂªÂ¨Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ¨Ã Â«Â‹ Ã ÂªÂ˜Ã ÂªÂŸÃ ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ•Ã Â«ÂÃ ÂªÂ°Ã ÂªÂ® Ã Â«Â§.Â Â Â Â Â Â Â Â  Ã ÂªÂ¶Ã ÂªÂ¨Ã ÂªÂ¿Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ°Ã Â«Â‡ Ã ÂªÂ²Ã ÂªÂ¾Ã ÂªÂ²Ã ÂªÂ•Ã Â«ÂƒÃ ÂªÂ·Ã Â«ÂÃ ÂªÂ£ Ã ÂªÂ…Ã ÂªÂ¡Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ£Ã Â«Â€Ã ÂªÂ Ã ÂªÂ…Ã ÂªÂ§Ã Â«ÂÃ ÂªÂ¯Ã ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂªÃ ÂªÂ¦Ã Â«Â‡ Ã ÂªÂ«Ã ÂªÂ°Ã Â«Â€ Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ° Ã ÂªÂ—Ã ÂªÂ¡Ã ÂªÂ•Ã ÂªÂ°Ã Â«Â€Ã ÂªÂ¨Ã Â«Â‡ Ã ÂªÂ¬Ã ÂªÂ¦Ã ÂªÂ²Ã Â«Â‡ Ã ÂªÂ¸Ã Â«ÂÃ ÂªÂ·Ã Â«ÂÃ ÂªÂ®Ã ÂªÂ¾ Ã ÂªÂ¸Ã Â«ÂÃ ÂªÂµÃ ÂªÂ°Ã ÂªÂ¾Ã ÂªÂœÃ ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ‚ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ®Ã ÂªÂ¨Ã Â«Â‡ Ã ÂªÂ†Ã ÂªÂ—Ã ÂªÂ³ Ã ÂªÂ•Ã ÂªÂ°Ã Â«ÂÃ ÂªÂ¯Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ¹Ã ÂªÂ¤Ã Â«ÂÃ ÂªÂ‚ Ã Â«Â¨.Â Â Â Â Â Â Â Â  Ã ÂªÂ®Ã ÂªÂ‚Ã ÂªÂ—Ã ÂªÂ³Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ°Ã Â«Â‡ Ã ÂªÂ†Ã ÂªÂ‡Ã ÂªÂŸÃ Â«Â€Ã ÂªÂ Ã ÂªÂ—Ã ÂªÂ¡Ã ÂªÂ•Ã ÂªÂ°Ã Â«Â€Ã ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂªÃ Â«Â‚Ã ÂªÂ°Ã Â«ÂÃ ÂªÂ¤Ã ÂªÂ¿ Ã ÂªÂ—Ã Â«ÂÃ ÂªÂ°Ã Â«Â‚Ã ÂªÂª Ã ÂªÂ¸Ã ÂªÂ¾Ã ÂªÂ¥Ã Â«Â‡ Ã ÂªÂ¸Ã ÂªÂ‚Ã ÂªÂ•Ã ÂªÂ³Ã ÂªÂ¾Ã ÂªÂ¯Ã Â«Â‡Ã ÂªÂ²Ã Â«Â€ Ã ÂªÂ•Ã ÂªÂ‚Ã ÂªÂªÃ ÂªÂ¨Ã Â«Â€Ã ÂªÂ“Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂ¤Ã ÂªÂªÃ ÂªÂ¾Ã ÂªÂ¸ Ã ÂªÂ¹Ã ÂªÂ¾Ã ÂªÂ¥ Ã ÂªÂ§Ã ÂªÂ°Ã Â«Â€ Ã ÂªÂ¹Ã ÂªÂ¤Ã Â«Â€ Ã Â«Â©.Â Â Â Â Â Â Â Â  Ã ÂªÂ®Ã ÂªÂ‚Ã ÂªÂ—Ã ÂªÂ³Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ°Ã Â«Â‡ Ã ÂªÂ¯Ã ÂªÂ¶Ã ÂªÂµÃ ÂªÂ‚Ã ÂªÂ¤ Ã ÂªÂ¸Ã ÂªÂ¿Ã ÂªÂ‚Ã ÂªÂ¹Ã ÂªÂ¾Ã ÂªÂ Ã ÂªÂªÃ ÂªÂ£ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ‚Ã ÂªÂ•Ã ÂªÂ¨Ã ÂªÂªÃ ÂªÂ¤Ã Â«ÂÃ ÂªÂ° Ã ÂªÂ®Ã ÂªÂ—Ã ÂªÂ¾Ã ÂªÂµÃ ÂªÂ¤Ã ÂªÂ¾ Ã ÂªÂ—Ã ÂªÂ¡Ã ÂªÂ•Ã ÂªÂ°Ã Â«Â€Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂ®Ã Â«ÂÃ ÂªÂ¶Ã Â«ÂÃ ÂªÂ•Ã Â«Â‡Ã ÂªÂ²Ã Â«Â€Ã ÂªÂ“ Ã ÂªÂµÃ ÂªÂ§Ã Â«Â€ Ã ÂªÂ¹Ã ÂªÂ¤Ã Â«Â€, Ã ÂªÂ…Ã ÂªÂ¡Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ£Ã Â«Â€Ã ÂªÂ Ã ÂªÂ¸Ã ÂªÂ¿Ã ÂªÂ¨Ã Â«ÂÃ ÂªÂ¹Ã ÂªÂ¾Ã ÂªÂ¨Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ® Ã ÂªÂ†Ã ÂªÂ—Ã ÂªÂ³ Ã ÂªÂ•Ã ÂªÂ°Ã Â«ÂÃ ÂªÂ¯Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ¹Ã ÂªÂ¤Ã Â«ÂÃ ÂªÂ‚ Ã Â«Âª.Â Â Â Â Â Â Â Â  Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂœÃ Â«ÂÃ ÂªÂ¯Ã ÂªÂ¸Ã ÂªÂ­Ã ÂªÂ¾Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ‚ Ã ÂªÂªÃ ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂ¨Ã Â«Â‡Ã ÂªÂ¤Ã ÂªÂ¾ Ã ÂªÂ…Ã ÂªÂ°Ã Â«ÂÃ ÂªÂ£ Ã ÂªÂœÃ Â«Â‡Ã ÂªÂŸÃ ÂªÂ²Ã Â«Â€Ã ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂ˜Ã ÂªÂ°Ã Â«Â‡ Ã ÂªÂ¬Ã Â«Â‡Ã ÂªÂ Ã ÂªÂ• Ã ÂªÂ¹Ã ÂªÂ¤Ã Â«Â€ Ã Â«Â«.Â Â Â Â Â Â Â Â  Ã ÂªÂ—Ã ÂªÂ¡Ã ÂªÂ•Ã ÂªÂ°Ã Â«Â€Ã ÂªÂ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ—Ã ÂªÂªÃ Â«ÂÃ ÂªÂ°Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ‚ Ã ÂªÂªÃ ÂªÂ¹Ã Â«Â‡Ã ÂªÂ²Ã Â«Â€ Ã ÂªÂ«Ã Â«Â‡Ã ÂªÂ¬Ã Â«ÂÃ ÂªÂ°Ã Â«ÂÃ ÂªÂ†Ã ÂªÂ°Ã Â«Â€Ã ÂªÂ Ã ÂªÂ†Ã ÂªÂ‡Ã ÂªÂŸÃ Â«Â€ Ã ÂªÂ¸Ã ÂªÂ®Ã ÂªÂ•Ã Â«ÂÃ ÂªÂ· Ã ÂªÂ¹Ã ÂªÂ¾Ã ÂªÂœÃ ÂªÂ° Ã ÂªÂªÃ ÂªÂ£ Ã ÂªÂ¥Ã ÂªÂµÃ ÂªÂ¾Ã ÂªÂ¨Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ›Ã Â«Â‡, Ã ÂªÂœÃ Â«ÂÃ ÂªÂ¯Ã ÂªÂ¾Ã ÂªÂ°Ã Â«Â‡ Ã Â«Â¨Ã Â«Â©Ã ÂªÂ®Ã Â«Â€ Ã ÂªÂœÃ ÂªÂ¾Ã ÂªÂ¨Ã Â«ÂÃ ÂªÂ¯Ã Â«ÂÃ ÂªÂ†Ã ÂªÂ°Ã Â«Â€Ã ÂªÂ Ã ÂªÂ…Ã ÂªÂ§Ã Â«ÂÃ ÂªÂ¯Ã ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂªÃ ÂªÂ¦Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂšÃ Â«Â‚Ã ÂªÂ‚Ã ÂªÂŸÃ ÂªÂ£Ã Â«Â€ Ã ÂªÂ›Ã Â«Â‡. Â Ã ÂªÂ®Ã Â«Â‡Ã ÂªÂ‚ Ã ÂªÂ­Ã Â«ÂÃ ÂªÂ°Ã ÂªÂ·Ã Â«ÂÃ ÂªÂŸÃ ÂªÂ¾Ã ÂªÂšÃ ÂªÂ¾Ã ÂªÂ°Ã ÂªÂ¨Ã ÂªÂ¾ Ã ÂªÂ†Ã ÂªÂ°Ã Â«Â‹Ã ÂªÂªÃ Â«Â‹Ã ÂªÂ¥Ã Â«Â€ Ã ÂªÂ•Ã ÂªÂ‚Ã ÂªÂŸÃ ÂªÂ¾Ã ÂªÂ³Ã Â«Â€Ã ÂªÂ¨Ã Â«Â‡ Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂœÃ Â«Â€Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ®Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ†Ã ÂªÂªÃ Â«ÂÃ ÂªÂ¯Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ›Ã Â«Â‡. Ã ÂªÂªÃ ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ‚ Ã ÂªÂ…Ã ÂªÂ§Ã Â«ÂÃ ÂªÂ¯Ã ÂªÂ•Ã Â«ÂÃ ÂªÂ·Ã ÂªÂªÃ ÂªÂ¦ Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂŸÃ Â«Â‡ Ã ÂªÂ¸Ã ÂªÂ‚Ã ÂªÂ˜ Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ°Ã ÂªÂ¾ Ã ÂªÂ¨Ã ÂªÂ¾Ã ÂªÂ®Ã ÂªÂ¨Ã Â«Â‹ Ã ÂªÂªÃ Â«ÂÃ ÂªÂ°Ã ÂªÂ¸Ã Â«ÂÃ ÂªÂ¤Ã ÂªÂ¾Ã ÂªÂµ Ã ÂªÂ¨ Ã ÂªÂ®Ã Â«Â‚Ã ÂªÂ•Ã Â«Â‡. Ã ÂªÂ¹Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ•Ã Â«ÂÃ ÂªÂ²Ã Â«Â€Ã ÂªÂ¨Ã ÂªÂšÃ ÂªÂ¿Ã ÂªÂŸ Ã ÂªÂ®Ã ÂªÂ³Ã ÂªÂ¶Ã Â«Â‡ Ã ÂªÂªÃ ÂªÂ›Ã Â«Â€ Ã ÂªÂªÃ ÂªÂ¾Ã ÂªÂ›Ã Â«Â‹ Ã ÂªÂ«Ã ÂªÂ°Ã Â«Â€Ã ÂªÂ¶. Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ°Ã Â«Â€ Ã ÂªÂ¸Ã ÂªÂ¾Ã ÂªÂ®Ã Â«Â‡ Ã ÂªÂ•Ã Â«Â‡Ã ÂªÂ¨Ã Â«ÂÃ ÂªÂ¦Ã Â«ÂÃ ÂªÂ° Ã ÂªÂ¸Ã ÂªÂ°Ã ÂªÂ•Ã ÂªÂ¾Ã ÂªÂ°Ã Â«Â‡ Ã ÂªÂ°Ã ÂªÂ¾Ã ÂªÂœÃ ÂªÂ•Ã Â«Â€Ã ÂªÂ¯ Ã ÂªÂ·Ã ÂªÂ¡Ã Â«ÂÃ ÂªÂ¯Ã ÂªÂ‚Ã ÂªÂ¤Ã Â«ÂÃ ÂªÂ° Ã ÂªÂ°Ã ÂªÂšÃ Â«ÂÃ ÂªÂ¯Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ›Ã Â«Â‡. Ã ÂªÂ®Ã Â«Â‡Ã ÂªÂ‚ Ã ÂªÂ•Ã ÂªÂ¶Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ–Ã Â«Â‹Ã ÂªÂŸÃ Â«ÂÃ ÂªÂ‚ Ã ÂªÂ•Ã ÂªÂ°Ã Â«ÂÃ ÂªÂ¯Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ¨Ã ÂªÂ¥Ã Â«Â€, Ã ÂªÂ¹Ã Â«ÂÃ ÂªÂ‚ Ã ÂªÂ•Ã Â«Â‹Ã ÂªÂˆ Ã ÂªÂªÃ ÂªÂ£ Ã ÂªÂªÃ Â«ÂÃ ÂªÂ°Ã ÂªÂ•Ã ÂªÂ¾Ã ÂªÂ°Ã ÂªÂ¨Ã Â«Â€ Ã ÂªÂ¤Ã ÂªÂªÃ ÂªÂ¾Ã ÂªÂ¸ Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂŸÃ Â«Â‡ Ã ÂªÂ¤Ã Â«ÂˆÃ ÂªÂ¯Ã ÂªÂ¾Ã ÂªÂ° Ã ÂªÂ›Ã Â«ÂÃ ÂªÂ‚, Ã ÂªÂªÃ ÂªÂ£ Ã ÂªÂªÃ ÂªÂ¾Ã ÂªÂ°Ã Â«ÂÃ ÂªÂŸÃ Â«Â€ Ã ÂªÂ¹Ã ÂªÂ¿Ã ÂªÂ¤Ã ÂªÂ¨Ã Â«Â‡ Ã ÂªÂ¨Ã Â«ÂÃ ÂªÂ•Ã ÂªÂ¸Ã ÂªÂ¾Ã ÂªÂ¨ Ã ÂªÂªÃ ÂªÂ¹Ã Â«Â‹Ã ÂªÂ‚Ã ÂªÂšÃ ÂªÂ¾Ã ÂªÂ¡Ã ÂªÂµÃ ÂªÂ¾ Ã ÂªÂ®Ã ÂªÂ¾Ã ÂªÂ—Ã ÂªÂ¤Ã Â«Â‹ Ã ÂªÂ¨Ã ÂªÂ¥Ã Â«Â€. Â - Ã ÂªÂ¨Ã Â«Â€Ã ÂªÂ¤Ã ÂªÂ¿Ã ÂªÂ¨ Ã ÂªÂ—Ã ÂªÂ¡Ã ÂªÂ•Ã ÂªÂ°Ã Â«Â€ 
```

**添加元标记后的效果内容类型：**

![在此处输入图像描述](../Images/9a5f7f469dc251b1a05e548129536eaf.png)

**预期输出的 PasteBin：**

类似于没有第一个跨度的这个 pastebin 链接，因为我们想要它内部的内容。 [http://pastebin.com/0fefAnhC](http://pastebin.com/0fefAnhC)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:34:59.920

我相信您的问题是您需要将此文档声明为 UTF-8 文档。

添加`<meta http-equiv="Content-Type" content="text/html; charset=utf-8">`到您的`<head> </head>`.

修改代码：

```
$url = "http://www.sandesh.com/article.aspx?newsid=115627";
$curl = curl_init($url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
$output = curl_exec($curl);
curl_close($curl);
//echo $output;
$DOM = new DOMDocument;
$output = mb_convert_encoding($output, 'HTML-ENTITIES', "UTF-8"); 
@$DOM->loadHTML('<?xml encoding="UTF-8">'.$output);
$doc->encoding = 'UTF-8'; // insert proper
//get all H1
$items = $DOM -> getElementById('lblNews');
echo  $DOM -> getElementById('lblNews')->tagName;

echo "<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN'
'http://www.w3.org/TR/html4/loose.dtd'><html xmlns='http://www.w3.org/1999/xhtml'><head></head><body><span>". $items -> nodeValue ."</span". "<br/></body></html>"; 
```

# php - 在 URL 中传递的空变量

> ID：14471055
> 
> 赞同：-1
> 
> 时间：2013-01-23T01:30:41.780
> 
> 标签：php

我正在从 create_topic.php 的 URL 中传递一个变量，但该变量为空。传递变量的页面在 mysql 查询中使用该变量 OK，所以我知道它不是空的，但是当我单击该页面中的链接转到另一个页面时，变量没有被传递。

在 create_topic.php 我有：

```
$author_pk = $_GET['author_pk']; 
```

然后在该页面上的查询中：

```
$query = "INSERT INTO topic (topic_pk,title,topic,majors,sub_discipline_fk,author_fk,created,place)
  VALUES ('','$title','$topic','$majors_string','$sub_discipline','$author_pk',NOW(),'$place')";
$result = mysql_query($query, $connection) or die(mysql_error()); 
```

$author_pk 包含传递的值 OK。

但在 create_topic.php 的链接中，我有：

```
<a href="create_author.php?author_pk="<?php echo $author_pk; ?>>Create</a> 
```

然后 $author_pk 在 URL 中为空...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T01:34:42.760

你的双引号不合适。一个简单的语法高亮器（就像 StackOverflow 上的那样）将向您揭示这一点。

这：

```
<a href="create_author.php?author_pk="<?php echo $author_pk; ?>>Create</a> 
```

应该：

```
<a href="create_author.php?author_pk=<?php echo $author_pk; ?>">Create</a> 
```

# ios - AudioFileOpenURL 无法打开原始 pcm 文件

> ID：14471059
> 
> 赞同：3
> 
> 时间：2013-01-23T01:31:04.197
> 
> 标签：ios, objective-c, audioqueue

我`AudioQueueServices`用来播放原始 pcm 文件。让我们称之为`somePcm.pcm`。

我正在使用以下行打开文件：

```
AudioFileOpenURL(myFileURL, kAudioFileReadPermission, 0, &player.playbackFile) 
```

where`myFileURL`是指向 where is 的 URL `somePcm.pcm`，并且`player.playerbackFile`是`AudioFileID`.

当我单步执行我的代码时，`playbackFile`指向内存位置 0x0000000000000。基本上它无法打开文件并将其表示为音频文件对象。

注意事项：

1.  `.mp3`我用一些文件替换了 url ，它工作正常。因此，我不确定那行代码到底有什么问题。
2.  该`.pcm`文件确实播放，因此它没有损坏。

有没有其他方法可以打开音频文件？或者如果有人看到我做错了什么，请告诉我。

谢谢。

# python - 通过 sh 模块运行 python 脚本后访问 stderr

> ID：14471065
> 
> 赞同：4
> 
> 时间：2013-01-23T01:32:23.803
> 
> 标签：python, mechanize, sh, stderr

我正在通过 sh 模块运行 Python 脚本，它在执行过程中崩溃。崩溃时，它给了我 stderr 前几行的读数，但它告诉我还有更多错误，我应该看到 e.stderr，但我不知道该怎么做，因为我不知道知道 e 是什么。如何访问我的 stderr 文件的其余部分？谢谢。

编辑：这是错误：

```
STDERR:
mydir/test.py:22: UserWarning: gzip transfer encoding is experimental!
  br.set_handle_gzip(True)
Traceback (most recent call last):
  File "mydir/test.py", line 142, in <module>
    run(sys.argv[1]);
  File "mydir/test.py", line 13, in run
    scrape(browser,folderName);
  File "mydir/test.py", line 46, in scrape
    processResponse(browser,folderName,1);
  File "mydir/test.py", line 121, in processResponse
    urllib.urlencode(data));
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mechanize-0.2.6.dev_20130122-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-pac... (4278 more, please see e.stderr) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-20T11:58:30.087

关于 e.stderr 的消息来自`sh`模块。

（[https://github.com/amoffat/sh/blob/30bd191a4f966bcf82c5666c56aeb1060d035920/sh.py#L148](https://github.com/amoffat/sh/blob/30bd191a4f966bcf82c5666c56aeb1060d035920/sh.py#L148)）

我编写了一个简单的程序`error.py`，它只向 stderr 写入了很多内容，然后以非零返回码退出。要摆脱该消息，只需使用 try/except 块：

```
import sh

cmd = sh.Command("./error.py")
try:
   c = cmd()
except sh.ErrorReturnCode, e:
    print e.stderr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:23:31.647

看看这个答案： [机械化标签 br.set_handle_gzip 做什么？](https://stackoverflow.com/questions/11009398/what-does-mechanize-tag-br-set-handle-gzip-do)

希望这可以将错误数量减少 1 个以上。

# ruby-on-rails - 与 Spree::Products 的关系

> ID：14471066
> 
> 赞同：1
> 
> 时间：2013-01-23T01:32:25.370
> 
> 标签：ruby-on-rails, ruby, e-commerce, spree

我在我的 Rails 3.2 应用程序中使用 Spree，我想知道如何在我自己定义的一些模型和`Spree::Product`.

例如，在一家服装店，我想`Spree::Product`按 Collection 对产品 ( ) 进行分组（现在`Collection`是我的一个假设模型）。

如何声明与对象相关的`has_many`关系？`Collection``Spree::Product`

PS：我在我的模型中都尝试过`has_many :products`，`has_many :spree_products`但它们都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:02:30.683

如果要在`Spree::Product`对象上定义此方法，则需要使用装饰器。将此代码添加到`app/models/spree/product_decorator.rb`您的应用程序中：

```
Spree::Product.class_eval do
  has_many :collections
end 
```

现在每个`Spree::Product`对象都会响应一个`collections`方法。

# c# - InvokeRequired 和 BeginInvoke 等效项

> ID：14471074
> 
> 赞同：2
> 
> 时间：2013-01-23T01:32:51.713
> 
> 标签：c#, wpf, richtextbox, begininvoke, invokerequired

我在我的 Windows 窗体中有这个功能，现在我正在尝试将我的工作转移到 WPF，转移后我注意到`InvokeRequired`并且`BeginInvoke`WPF 不支持。我正在寻找将我的函数转换为 WPF 的正确方法：

```
delegate void DisplayInvoker(string text, MessageType type);

private void DisplayinRichbox(string text, MessageType type = MessageType.Normal)
{
    if (this.InvokeRequired)  // not support by WPF
    {
        this.BeginInvoke(new DisplayInvoker(DisplayinRichbox), text, type); // Not support by WPF
        return;
    }
    txt_Log.AppendText(String.Format("[{0}]   {1}{2}\r\n",
    DateTime.Now, type == MessageType.Incoming ? "<< " : type == MessageType.Outgoing ? ">> " : "", text));
    txt_Log.ScrollToCaret();   // not support by WPF
} 
```

这是我的主课中的线程循环：

```
 while (bWaiting == true)
        {

            //System.Windows.Forms.Application.DoEvents();  // i comment it because i cant find equivalent in WPF
            System.Threading.Thread.Sleep(15);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T01:35:39.387

WPF 中的等效项是[Dispatcher.CheckAccess](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.checkaccess.aspx)和[Dispatcher.BeginInvoke](http://msdn.microsoft.com/en-us/library/ms604730.aspx)：

```
if (!this.Dispatcher.CheckAccess())
{
    this.Dispatcher.BeginInvoke(new Action(() => DisplayInRichbox(text, type)));
    return;
} 
```

* * *

编辑：

您`RichTextBox`从不更新的原因是您阻塞了 UI 线程：

```
 while (bWaiting == true)
    {

        //System.Windows.Forms.Application.DoEvents();  // i comment it because i cant find equivalent in WPF
        System.Threading.Thread.Sleep(15);
    } 
```

这将阻止 UI 中的任何内容更新，因为您正在阻止它并且永远不会为其提供正确更新的方法。在旧的 Win Forms 代码中，您调用`DoEvents()`了 ，它处理了消息（但由于许多原因，这是一个非常糟糕的主意）。没有那个电话，这将无法正常工作。

您应该尽量避免 UI 线程中的阻塞和循环 - 相反，在后台线程中执行您的工作，并让 UI 线程正常运行。 `BackgroundWorker`与 TPL 中的许多选项一样，这使这变得简单得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:45:36.017

Reed Copsey 为您的问题提供了完整的答案。但是，我只想指出，实际上您在 WPF 中不需要这个。通常，当您通过`INotifyPropertyChanged`和 xaml 数据绑定使用 MVVM 模式时，它会自动处理。如果要同步集合，您可以使用多线程可观察集合。这是我自己使用的源代码。

```
public class MultiThreadedObservableCollection<T> : ObservableCollection<T> {
    public override event NotifyCollectionChangedEventHandler CollectionChanged;
    public MultiThreadedObservableCollection() { }
    public MultiThreadedObservableCollection(IEnumerable<T> source) : base(source) { }
    public MultiThreadedObservableCollection(List<T> source) : base(source) { }

    protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e) {
        var handle = CollectionChanged;
        if (CollectionChanged == null)
            return;
        foreach (NotifyCollectionChangedEventHandler handler in handle.GetInvocationList()) {
            var dispatcherObj = handler.Target as DispatcherObject;
            if (dispatcherObj != null) {
                var dispatcher = dispatcherObj.Dispatcher;
                if (dispatcher != null && !dispatcher.CheckAccess()) {
                    dispatcher.BeginInvoke(
                        (Action)(() => handler.Invoke(
                            this,
                            new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset))
                        ), DispatcherPriority.DataBind);
                    continue;
                }
            }
            handler.Invoke(this, e);
        }
    }
} 
```

（它来自这里的某个地方，stackoverflow.com，但现在找不到源）

然后，您只需定义您的 ViewModel 并开始更改值。这是开发 WPF 应用程序最合适、最正确、最快捷的方式。

# ruby-on-rails-3 - Twitter引导程序显然没有加载

> ID：14471075
> 
> 赞同：1
> 
> 时间：2013-01-23T01:32:51.733
> 
> 标签：ruby-on-rails-3, jquery-ui, twitter-bootstrap, asset-pipeline

我有一个简单的 ROR 项目，我想使用 Bootstrap-sass。我已将它添加到我的 Gemfile 中，运行 bundle install 并添加了“@import "bootstrap";" 作为我的 css 文件的*第一*行。作为快速测试，我剪切并粘贴了几个不同样式的按钮示例。

它们在网页上显示为几个普通按钮。

我怎么知道引导程序是否真的被加载了？

更新：查看浏览器的错误控制台，我看到以下消息：'样式表 localhost:3000/assets/bootstrap 未加载，因为它的 MIME 类型“application/javascript”不是“text/css”'

有什么想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-22T11:11:04.410

我通过将 application.css 重命名为 application.scss 解决了问题

首先我想我做到了，但显然我没有保存重命名的文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:45:23.840

首先，您可以检查浏览器控制台的 NET 面板。它应该显示对“bootstrap.css”的请求。听起来确实没有被拉进来。这将是确认的第一步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T03:36:08.700

我记得我第一次使用引导程序时它不起作用。这是因为我没有将文档根目录指向正确的位置。当然，我通常会检查文档根目录，因为它对我来说是一个反复出现的问题，现在我知道我倾向于在那里犯错误，所以我从那里开始。我会说，花时间看看我经常犯的错误类型有助于我的成长。

# java - 比较Java中的整数

> ID：14471077
> 
> 赞同：-1
> 
> 时间：2013-01-23T01:32:56.510
> 
> 标签：java, equality

我的印象是，在寻找 2 `int`s == 之间的相等性时，测试就足够了

作为一部分`equals()`，我

```
 if (this.getDayOfWeek() != that.getDayOfMonth()) {
        return false;
    } 
```

其中 getDayOfWeek 定义为

```
 public int getDayOfWeek() {
        return calendarInstance.get(Calendar.DAY_OF_WEEK);
    } 
```

好的，所以我们`int`在这里得到 2 秒。两者都是 1。而且不一样（根据`equals`）

请帮我理解为什么是`1 != 1`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T01:36:06.437

```
if (this.getDayOfWeek() != that.getDayOfMonth()) 
```

有你的问题。您正在将一周中的某一天与一个月中的某一天进行比较，这在大多数情况下可能并不相等。

但要回答你原来的问题。是的，==`int`对于`Integer`需要使用`equals()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:06:21.597

您是否通过打印出它们的值和类型来确保比较的两个数据相同？此外，如果您参考此[http://www.leepoint.net/notes-java/other/10time/30calendar.html](http://www.leepoint.net/notes-java/other/10time/30calendar.html)，则 DayOfMonth 的范围为 (1-31)，而 DayOfWeek 的范围为 (0-6)

# perl - Mojolicious 中的会话不会过期

> ID：14471078
> 
> 赞同：3
> 
> 时间：2013-01-23T01:33:08.270
> 
> 标签：perl, session, mojolicious

我有一个 Mojolicious 应用程序和一个用于身份验证的桥梁。这是我的场景：
我在数据库中有一组标准错误响应，我通过传入一个值进行查询，比如返回一个带有详细错误响应的 404。数据库将具有与错误相对应的常见详细信息，而其他用户特定的详细信息（例如 ip 和用户名）则从控制器获取。请看一下[这个链接](https://stackoverflow.com/questions/13239501/http-reponse-for-error-in-rest-call-for-mojolicious)关于如何构建错误响应。我有一个助手，它获取控制器实例和错误代码以生成所需的响应。我使用控制器对象通过包含错误响应的表的结果集来查询数据库。通过控制器，我还获得了创建响应所需的用户特定详细信息。然后创建响应，将其发送回控制器，然后作为 Json 返回。
我的问题是注销，我设置`$self->session(expires => 1)`了使会话无效。在尝试再次注销时，我使用控制器访问帮助程序构建错误响应并将其发送给客户端。现在，通过以下检查，任何访问任何 URI 的尝试对于第一次尝试都是徒劳的。

```
unless($self->session('user')) {
    my $res = Controller::Helper->error_res($self, 403);
    $self->render_json($res, status => $res->{httpstatuscode});
    return;
    } 
```

此检查第一次有效，但是当我再次尝试访问资源（任意次数）时，此检查失败并且无需登录即可访问资源。当我查看 cookie 时，会创建一个新的 cookie。我在哪里错了？处理此类问题的最佳方法是什么？辅助函数看起来像这样

```
error_res{ 
    my($self,$c,$res) = @_; 
    my @arref = $c->db->resultset('Errorcode')->select_row($res);
    my $ref=$arref[0];
    $ref->{user}=$c->session->{user}->{name};
    $ref->{request}=$c->req->method."".join("\\",$c->req->url->path);
    $ref->{time}=scalar localtime();
    return $ref;
} 
```

数据库中`res`可以识别特定错误的位置和 id。

那么，它是否与助手中仍然可用的控制器的引用有关？当我`$c`在助手中取消定义时，它没有帮助。
**编辑1：**我在这里遗漏了一些观点，这是正确的方法吗？
**编辑 2：**我在注销时使用户无效。当用户再次尝试注销时，我会返回一个错误，其中包含有关该错误的其他信息。但是在创建有关错误的附加信息时，会创建一个没有用户信息的新会话。如果我执行以下操作，则不会发生这种情况

```
unless($self->session('user')) {
    $self->render_json("message:User has not logged in", status => 403);
    return;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T20:42:03.923

所以我想出了答案，奇怪的行为是由于 perl 的[自动生存](http://c2.com/cgi/wiki?AutoVivification)功能。它涉及数据结构的动态创建。就我而言，我尝试通过会话 cookie 获取用户名

```
$ref->{user}=$c->session->{user}->{name}; 
```

当用户未登录时，会话中未设置密钥，但我在创建错误响应时`user`尝试通过此密钥。`name`这导致创造`user`没有价值。检查`user`密钥是否存在解决了该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:16:01.020

阅读评论后，我相当确定该框架的行为符合预期。可能需要更改应用程序逻辑（如编辑 2 中所示）。

原因是，会话只是一个 hashref，序列化为 JSON，签名并存储在 cookie 中。如果您创建密钥，那么它就在那里。我不知道还能告诉你什么。

是的，在前一个会话 cookie 到期后立即创建一个新的会话 cookie。这是框架所必需的，也是完全可以预料的。

# mysql - Smarty 模板从 mySQL 数据库中获取价值

> ID：14471079
> 
> 赞同：-1
> 
> 时间：2013-01-23T01:33:10.573
> 
> 标签：mysql, database, smarty

我是一个数据库和 Smarty 新手。我有一个 Smarty 模板，我想从 mySql 数据库中获取一个值。

我的数据库结构如下：

```
MySql
    Mydatabase
        Table1
          username (info stored here)
          usermail  
        Table2
           GroupA
               ID = 101 (a unique number value)
               Age  (a number value)
           GroupB
                ID =102  (a unique number value)
                Age  (a number value)
        Table3
    phpmyadmin
    ..... 
```

在 Smarty 模板中，我可以通过以下方式轻松获取用户名：

```
 {$Table1.username} 
```

我想获得的值是表 2 GroupB 上的年龄。我知道 ID 的存储值并且可以使用它。

我试过这个但它不起作用：

```
 {$Table2.GroupB.Age} 
```

登录的用户有权获取 Table2 的值。

有任何想法吗？我感谢任何帮助或建议。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:45:19.797

从此先学Smarty`http://www.smarty.net/`

为数据库连接编写一个 php 文件并从表中获取值。参考：

```
http://www.w3schools.com/php/php_mysql_connect.asp 
```

然后将结果集分配给数组，例如

PHP 文件：

```
$smarty->assign('result',$recordset); 
```

使用要显示数据库值的模板文件：

```
$smarty->display('default/presentation.tpl'); 
```

smarty 文件：{$result|print_r} 你可以查看数据库值。

然后使用**section**或 **foreach**您可以拆分数组值并显示它。

# ios6 - 返回整数值

> ID：14471085
> 
> 赞同：0
> 
> 时间：2013-01-23T01:33:25.463
> 
> 标签：ios6, integer, automatic-ref-counting, instance-variables, nslog

我正在用 Objective-C iOS6 ARC 编写应用程序。这是一段代码：

```
header file:
@interface Chapter : NSObject

-(void) addPageCount:(int) pCount;
-(int)getPageCount;
@end

//implementation
#import "Chapter.h"
@interface Chapter()
{

    int pageCount;
}
@end
-(void)addPageCount:(int) pCount
{
    pageCount = pCount;
}

//testing

 NSLog(@"%d", [chapter getPageCount]);

Returns -1073750816 once I pass 100. 
```

问题是什么？此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:36:58.650

已找到解决方案。在某些时候，我一直在发送一个指针值而不是整数

# c++ - 循环和线程创建

> ID：14471089
> 
> 赞同：-1
> 
> 时间：2013-01-23T01:33:45.727
> 
> 标签：c++, multithreading, loops

当使用循环（特别是在 C++ 中）时，它们是否都创建了自己的线程？如果不是，哪些循环创建自己的线程，而不是哪些循环在其存在期间控制主线程的执行？

编辑：连续运行的消息循环怎么样，为什么它存在于程序中并不能阻止消息循环执行后的任何事情，因为它是一个连续循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:39:42.600

循环，例如`for`-loops 和`while`-loops 从不创建线程。主线程（或在代码中某处启动的任何其他线程）可以进入循环，就像它可以执行代码的所有其他部分一样，但进入循环后永远不会启动新线程。

有一些特殊的库提供模板，可以以类似于循环的方式使用，例如`parallel_for`. 这些将是启动线程（或类似类型的并行），但它们实际上是函数模板（或类模板），而不是语言标准定义的循环语句。

评论后编辑：
在您在下面的评论中提到的消息循环的[具体示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644928%28v=vs.85%29.aspx#creating_loop)中，其想法是在主线程进入循环*之前*创建窗口（对来自不同线程的事件作出反应）和可能的各种其他线程。然后循环运行，直到`WM_QUIT`收到消息，导致`GetMessage`返回等效的 boolean `false`。

所以循环在主线程中运行，但它接收到的消息是由单独的线程生成的，在进入循环之前创建和启动（由系统或您）。

# python-3.x - 从文件 python pygame 加载图像

> ID：14471090
> 
> 赞同：0
> 
> 时间：2013-01-23T01:33:48.177
> 
> 标签：python-3.x, pygame

我正在开发一个 pygame 项目，例如，在我的主目录中，我有一个名为“Sprites”的文件夹。有没有办法使用 python 将该文件中的所有图像加载到列表中？我知道如何使用 for 循环将内容放入列表中，我只是不确定是否有办法通过文件夹的图像并将它们加载到 pygame 精灵中。我也知道，如果图像都被命名​​为相同且后面跟着一个数字，我可以连接一个字符串，但如果它们的名称完全不同怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:19:34.183

使用 os 模块列出目录的文件；它将返回一个列表

```
import os
fileList = os.listdir("path") 
```

更多细节：[http ://docs.python.org/2/library/os.html#os.listdir](http://docs.python.org/2/library/os.html#os.listdir)

# twitter-bootstrap - 为什么 twitter bootstrap 在表单水平形式中超过了我的跨度

> ID：14471094
> 
> 赞同：2
> 
> 时间：2013-01-23T01:34:16.907
> 
> 标签：twitter-bootstrap

我正在尝试使用 Twitter Bootsrap（即 12 列网格）布置表单。

我有一个两列布局 - 2/3 - 1/3 所以我有一个 2 div，其中 span8 和 span4 作为它们各自的类。

这很好用，但是当我在表单中使用 form-horizo​​ntal 类做同样的事情时，标签似乎更宽，并将文本框推入排水沟。

我怎样才能解决这个问题？

这是 jsfiddle 中的演示。顶部工作正常，第二种形式是奇怪的。

```
<div class="container">
<form class="">
    <div>This form is fine!</div>
    <div class="row">
      <div class="span8">Span 8</div>
      <div class="span4">Span 4</div>
    </div>
    <div class="row">
        <div class="span8">
            <div class="control-group">
                <label class="control-label">Name</label>
                <div class="controls">
                    <input type="text" class="span8" />
                </div>
            </div>
        </div>

        <div class="span4">
            <div class="control-group">
                <label class="control-label">Age</label>
                <div class="controls">
                    <input type="text" class="span4" />
                </div>
            </div>
        </div>
    </div>
</form>

<form class="form-horizontal">
    <div>This form is broken!</div>
    <div class="row">
      <div class="span8">Span 8</div>
      <div class="span4">Span 4</div>
    </div>
    <div class="row">
        <div class="span8">
            <div class="control-group">
                <label class="control-label">Name</label>
                <div class="controls">
                    <input type="text" class="span6" />
                </div>
            </div>
        </div>

        <div class="span4">
            <div class="control-group">
                <label class="control-label">Age</label>
                <div class="controls">
                    <input type="text" class="span2" />
                </div>
            </div>
        </div>
    </div>
</form>

</div> 
```

这是[我的 jsfiddle](http://jsfiddle.net/cdshearer/8Xf2j/11/ "这是我的小提琴")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:56:27.793

查看css，看起来他们在您遇到的情况下没有正确计算出表单字段的宽度。您可以使标签宽度更小（这就是我所做的）或使输入字段更小。

如果您添加此 css，它应该可以解决您的问题：

```
.form-horizontal .control-label {
    width: 100px;
}
.form-horizontal .controls{
    margin-left: 120px;
}

/* if you are using responsive bootstrap */
@media (max-width: 480px) {
    .form-horizontal .controls {
        margin-left: 0;
    }
} 
```

[http://jsfiddle.net/hajpoj/LutqC/1/](http://jsfiddle.net/hajpoj/LutqC/1/)

# database - 如何让 ibook 显示从在线数据库查询的数据

> ID：14471095
> 
> 赞同：1
> 
> 时间：2013-01-23T01:34:20.383
> 
> 标签：database, ibooks

我有一本 ibook，我正试图从我的服务器上的云数据库中拉回一个数据表。如果我将 main.html 文件放在我的服务器上并使用我的网络浏览器浏览它，它就像一个返回数据表的冠军，但是当我将此 html 作为我的 main.html 文件放在 Info.plist 中时它不会在 ibook 中显示表格。我错过了什么？

这是我的 html 文件，它位于本书页面上 ibook html 小部件的小部件中

```
<html>
<head>
<script type="text/javascript" src="http://myserver.com/ibook_widgets/jquery-1.7.2.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){

$.ajax({
  type: 'post',
  url: 'http://myserver.com/ibook_widgets/getdata.php?id=4',
  data: 'json',
  beforeSend: function() {
    // before send the request, displays a "Loading..." messaj in the element where the server response will be placed
    $('#resp').html('Loading...');
  },
  timeout: 10000,        // sets timeout for the request (10 seconds)
  error: function(xhr, status, error) { alert('Error: '+ xhr.status+ ' - '+ error); },
  success: function(response) { $('#listhere').html(response); }
});

});
</script>
</head>

<body>
<div id="listhere" style="border: solid black 1px; background-color:red;">Replace this text with html table from php file</div>
</body>
</html> 
```

这是我的服务器上的 php 文件

```
<?php

/*
 * Following code will list all the products
 */

$dbhostname='myserver.com';
$dbusername='usr';
$dbpassword='pwd';
$dbname='mydatabase';

$con = mysql_connect($dbhostname,$dbusername,$dbpassword);
mysql_select_db($dbname, $con);

// check for post data
if (isset($_POST["id"])) 
{
$inValue = $_POST['id'];

$sql = 'select id, btn_txt from mytable where parent_id = '.$inValue.' order by btn_txt';

$result = mysql_query($sql) or die(mysql_error());
if (!empty($result)) 
{
    // check for empty result
    if (mysql_num_rows($result) > 0) 
    {

        $row = mysql_fetch_array($result);

        $btntxt = $row['btn_txt'];

            $result1 = mysql_query($sql) or die(mysql_error());
            // check for empty result
            if (!empty($result1)) 
            {
                // check for empty result
                if (mysql_num_rows($result1) > 0) 
                {
                    // looping through all results
                    // products node

                    $tmpStr =  "<table border='1'><tr><th>Tap A Row To See Details</th></tr>";

                    // show select box input_select_4
                    while($row1 = mysql_fetch_array($result1))
                    {
                        $tmpStr = $tmpStr . "<tr><th><a href=\"http://myserver.com/ibook_widgets/getdata.php?id=". $row1["id"] . "\" target=\"_self\">" . $row1["btn_txt"] . "</a></th></tr>";

                    }

                    $tmpStr = $tmpStr . "</table>";

                    echo $tmpStr;
                    // echoing JSON response
                   ///echo json_encode($tmpStr);

            mysql_close($con);

                    // echoing JSON response
                   ////echo json_encode($response);

                } 
            }

        } 
    } 
}

?> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:48:25.560

经过数小时的研究，它与 CORS 跨域资源共享有关

我必须在我的服务器上的 php 文件中添加以下标题行，然后宾果游戏一切正常。

```
<?php
header("Access-Control-Allow-Origin:  *"); 
```

有关这方面的更多详细信息，这里是对 CORS 的解释

[http://www.html5rocks.com/en/tutorials/cors/#toc-cors-from-jquery](http://www.html5rocks.com/en/tutorials/cors/#toc-cors-from-jquery)

跨域资源共享 (CORS) 是一个 W3C 规范，允许从浏览器进行跨域通信。通过在 XmlHttpRequest 对象之上构建，CORS 允许开发人员使用与同域请求相同的惯用语。

CORS 的用例很简单。想象一下网站 alice.com 有一些网站 bob.com 想要访问的数据。在浏览器的同源策略下，这种类型的请求传统上是不允许的。但是，通过支持 CORS 请求，alice.com 可以添加一些特殊的响应标头，允许 bob.com 访问数据。

从这个例子可以看出，CORS 支持需要服务器和客户端之间的协调。幸运的是，如果您是客户端开发人员，您可以免受大部分这些细节的影响。本文的其余部分展示了客户端如何发出跨域请求，以及服务器如何配置自己以支持 CORS。

# c++ - C++ Sqrt 函数

> ID：14471096
> 
> 赞同：1
> 
> 时间：2013-01-23T01:34:26.187
> 
> 标签：c++, function, sqrt

当我编译我的程序时，它似乎没有执行我的公式我无法弄清楚我在做什么错误的帮助将不胜感激

```
int main ()
  {
int distance, Xvalue, Yvalue;
double x1,y1,x2,y2;

cout << "\n Please enter X1 value: ";
cin  >> x1;
cout << " Please enter X2 value: ";
cin  >> x2;
cout << "\n Please enter Y1 value: ";
cin  >> y1;
cout << " Please enter Y2 value: ";
cin  >> y2;
    Xvalue = (x1 - x2);
    Yvalue = (y1 - y2);
distance = sqrt(Xvalue * Xvalue + Yvalue * Yvalue);

cout << "This is the distance between the two points" <<distance<< 

   cout << endl << endl;
   system ("pause");
  return 0;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:53:30.983

将距离、Xvalue 和 Yvalue 更改为双精度值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:37:41.700

我很确定这可能是您的问题的一部分：

```
Xvalue = (x1 - x2);
Yvalue = (y1 - y1); 
```

它可能应该是：

```
Xvalue = (x1 - x2);
Yvalue = (y1 - y2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T01:38:17.777

双变量的差异可以是 a`double`并且您`Yvalue`总是计算为`zero`。

实际上，您的公式本身是错误的。

```
Distance Formula: Given the two points (x1, y1) and (x2, y2), 
```

这些点之间的距离由以下公式给出：

```
d = sqrt((x2-x1)^2 + (y2-y1)^2) 
```

请注意，您正在减去而不是添加差异的平方。

```
double x1,y1,x2,y2,distance, Xvalue, Yvalue;
Xvalue = (x1 - x2);
Yvalue = (y1 - y2);
distance = sqrt(Xvalue * Xvalue + Yvalue * Yvalue); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-17T11:54:31.033

距离 = sqrt(pow((x2-x1),2)+pow((y2-y1),2));

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T01:54:11.153

第一个 cout 输入值，这样您就可以确定问题是否不在输入中

```
cout<<x1<<endl;
cout<<x2<<endl;
cout<<y1<<endl;
cout<<y2<<endl; 
```

那么您正在尝试 cout... cout！

```
cout<<"this is the"<< distance << cout ... // cout again, is not very good! 
```

尝试

```
cout<< "this is the"<< distance <<endl;
cout << endl << endl; 
```

无论如何..除非您出于特定原因需要那些“int”，否则最好有双打。（您仍然可以稍后使用“floor（value）”将它们四舍五入）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-06-17T13:23:10.453

# 包括

# 包括

诠释主要（无效）

{ 浮动 x1，x2，y1，y2，距离；

printf("x2 的值："); scanf("%f",&x2);

printf("x1 的值："); scanf("%f",&x1);

printf("y2 的值​​："); scanf("%f",&y2);

printf("y1 的值："); scanf("%f",&y1);

距离 = sqrt(pow((x2-x1),2)+pow((y2-y1),2)); printf("(X2,X1)和(Y2,Y1)之间的距离是%f", Distance);

返回0；

}

# sql - 如何将有空格的变量从shell传输到oracle sqlplus

> ID：14471097
> 
> 赞同：3
> 
> 时间：2013-01-23T01:34:28.363
> 
> 标签：sql, oracle, shell, variables, sqlplus

我正在使用 shell 脚本来运行用 sql 脚本文件编写的 sql。在脚本文件中有一些绑定变量可以从 shell 运行时传递参数。

这是我的代码。

```
result=`sqlplus -s ${DB_USER_NAME}/${DB_USER_PWD}@${DB_SID}<<!
        SET HEADING ON
        SET UNDERLINE OFF
        SET COLSEP ','
        WHENEVER SQLERROR EXIT 255
        SET TRIM SPOOL ON
        SPOOL $outputPath

        @{sqlFilePath} $@

        #@${sqlFilePath} "$@"    
` 
```

当我像这样运行外壳时：

```
run_sql.sh param1 param2 "param 3" 
```

$@ 将作为四个变量向 param1,param2,param,3 解释

```
@{sqlFilePath} param1 param2 param 3 
```

"$@" 将被解释为 "param1 param2 param 3" 作为一个变量

```
@{sqlFilePath} "param1 param2 param 3" 
```

但我希望参数会这样解释

```
@{sqlFilePath} param1 param2 "param 3" 
```

有什么办法可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T02:08:21.710

怎么样：

```
run_sql.sh param1 param2 '"param 3"' 
```

它应该在您的脚本中扩展为：

```
@{sqlFilePath} param1 param2 "param 3" 
```

# postgresql - 用查询打乒乓球

> ID：14471098
> 
> 赞同：0
> 
> 时间：2013-01-23T01:34:38.773
> 
> 标签：postgresql

我有 2 张桌子的设置，这很奇怪。

表A：它有多个列，但基本上是信息的集合。说：

```
------------------------------------
my_id| name | address | lat | long 
```

表 B 是表 A 的元素之间的关系的长列表： 例如：

```
------------------
my_id | parent_id 
```

我想要做的是以下内容：

对于任何 A.my_id，获取将 A.my_id 作为 B.parent_id 的 B.my_id 的列表（也有没有人的情况），然后：

获取，对于这个列表中的每个元素（我们刚刚得到），从表 A 中获取这些 id 的纬度和经度，并从中创建一个 2 数组。

谁能指出我正确的方向？我对 SQL 相当陌生，虽然我到现在为止都在管理，这真的让我感到困惑。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:46:00.557

```
SELECT results.lat, results.long 
FROM a 
JOIN b 
    ON b.parent_id=a.my_id 
JOIN a AS results 
    ON results.my_id=b.my_id
WHERE a.my_id = 'the one I'm looking for' 
```

忽略选定的列一分钟，查询将为您提供表 A 中与您正在查找的特定 ID 匹配的行（请参阅 where 子句），并与 B 中与您的 ID 具有相同父 ID 的行连接重新寻找，再次与表 A 连接，这次其 ID 与 B 中的 ID 匹配。

如果您的表格如下所示：

```
TABLE A
my_id| name | address | lat | long
  1    ABC    1234      10     20
  2    DEF    5678      15     19
  3    GHI    9101      17     21
  4    JKL    1121      18     18
 ...

TABLE B
my_id|parent_id
  1      4
  3      4
 ... 
```

如果您执行此查询：

```
SELECT *
FROM a 
JOIN b 
    ON b.parent_id=a.my_id 
JOIN a AS results 
    ON results.my_id=b.my_id
WHERE a.my_id = 4 
```

你应该得到这些结果：

```
a.my_id | a.name | a.address | a.lat | a.long | b.my_id | b.parent_id | results.my_id | results.name | results.address | results.lat | results.long
   4       JKL       1121       18       18        1          4             1             ABC                   1234           10             20
   4       JKL       1121       18       18        3          4             3             GHI                   9101           17             21 
```

从那里我们只需更改 中的列`SELECT`以影响结果的外观。

这里的诀窍是在`JOIN`.

# css - Internet Explorer 中不显示表格边框

> ID：14471100
> 
> 赞同：0
> 
> 时间：2013-01-23T01:34:42.197
> 
> 标签：css, internet-explorer, internet-explorer-8

我有以下 css 用于我的表格的细边框。它适用于 Chrone 和 Firefox，但不适用于 IE8。

```
table.list
{
    border-width: 0 0 1px 1px;
    border-spacing: 0;
    border-collapse: collapse;
    border-style: solid;
}

.list td, .list th 
{
    margin: 0;
    padding: 4px;
    border-width: 1px 1px 0 0;
    border-style: solid;
} 
```

在 IE8 中，表格的左边框和下边框，不是所有的 td，都没有显示。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:14:51.937

我放大并仔细观察了桌子，左右两边都有边框，但它们是白色的。我明确输入了`border-color`黑色，案件解决了。这是编辑后的css：

```
table.list
{
    border-width: 0 0 1px 1px;
    border-spacing: 0;
    border-collapse: collapse;
    border-style: solid;
    border-color: Black;
}

.list td, .list th 
{
    margin: 0;
    padding: 4px;
    border-width: 1px 1px 0 0;
    border-style: solid;
    border-color:Black;
} 
```

# jquery - 切换加号和减号 jQuery UI

> ID：14471105
> 
> 赞同：1
> 
> 时间：2013-01-23T01:35:03.910
> 
> 标签：jquery, html, jquery-ui

有没有办法为这段代码添加一个 + 和 - 的跨度？我正在努力让它工作。我希望它在来回切换时位于 div 中。该代码运行良好，但每次我更改代码时它似乎都不起作用。：-/

```
<script>
$(function() {
      $( '.mylisting-trigger' ).click(function() {
      $( '.mylisting-main' ).toggle( 'blind', {direction: 'down'}, 200 );
        return false;
     });
    });
</script> 
```

这是我正在使用的 HTML。

```
<div class="row mylisting">
<div class="twelve columns">
    <div class="mylisting-header">
        <a href="#" class="mylisting-trigger"><h1>my listing</h1><h1><span>(24)</span></h1></a>
    </div><!--/mylisting-header-->
    <div class="mylisting-main">
        <div class="mylisting-options">
            <p>
                <a href="#">Send</a> 
                <a href="#">Rename</a>
                <a href="#">Delete</a>
            </p>
        </div>
            </div><!--/.mylisting-main-->
        </div><!--/twelve columns-->
     </div><!--/row mylisting--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:53:05.327

你可以尝试这样的事情：

```
<div class="mylisting-header"> 
    <a href="#" class="mylisting-trigger">
         <span class='show'>- Less</span>
    </a>
</div> 
```

```
$(function () {
    $('.mylisting-trigger').click(function(e) {
        e.preventDefault();
        $('.mylisting-main').toggle('blind', {direction: 'down'}, function () {
            var $this = $(this);
            $('.show').text(function (i, v) {
                return $this.is(':hidden') ? '+ More' : '- Less';
            })
        });
    });
}); 
```

[http://jsfiddle.net/nxGfM/](http://jsfiddle.net/nxGfM/)

# html - IE9、Opera 和旧版 Safari 尝试将我的 Node.js 服务器托管站点下载为文件？

> ID：14471107
> 
> 赞同：1
> 
> 时间：2013-01-23T01:35:16.890
> 
> 标签：html, css, node.js

我……我完全被难住了。这对我来说完全没有意义。

现在，我是 HTML5、CSS 和 Javascript 的新手，但我觉得我已经使用 Node.js 制作了一个不错的（未完成的）网站设计和一个不错的、简单的（未完成的）服务器程序。但问题是……它不能在 IE9、Opera 或 Safari 5.0.6 或许多其他旧版本的浏览器中呈现；相反，它只是尝试将网站下载为没有扩展名的文件。然而，它在 Chrome、Firefox 和 Safari 5.1.7 中运行。（我没有测试过其他浏览器。）

我什至不知道从哪里开始进行故障排除，我希望这里有人可以帮助我。
希望它与我的服务器配置或代码以及我的错误有关。

来源 -
服务器：[http://pastebin.com/vzGnWfgr](http://pastebin.com/vzGnWfgr)
HTML： http: [//pastebin.com/CvPBhmPa](http://pastebin.com/CvPBhmPa)
CSS（如有必要）： http: [//pastebin.com/WSAKxqxD](http://pastebin.com/WSAKxqxD)

我现在也有这个网站在我的服务器上：http: [//test.kdude63.com/](http://test.kdude63.com/)

另外，如果有什么不同，我正在我的服务器上运行 Ubuntu Server 12.04 LTS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:01:27.437

您的 HTTP 响应中的内容类型（MIME 类型）未定义，当我运行 wireshark 跟踪并查看服务器的 200 响应时，我可以看到。如果我去[http://test.kdude63.com/index.html](http://test.kdude63.com/index.html)，Opera 工作正常，因为它以前没有，并且内容类型在响应中指定。这向我表明，对您的主索引页面的处理存在问题。

默认情况下，Chrome 和 firefox 似乎将这些未定义的数据作为 text/html 处理，这就是它们显示页面没有问题的原因。

另外，我看到您的 case 语句有一个不允许的布尔表达式，并且会导致任何带有 .htm 扩展名的页面出现与此相同的问题。改变这个：

```
case '.html' || '.htm':
            contentType = 'text/html';
            break; 
```

对此：

```
case '.html':
case '.htm':
            contentType = 'text/html';
            break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:55:17.073

在您的网站（http://test.kdude63.com/）中，页面的响应标题有`Content-Type: undefined`.

当 Content-Type 是未知的 MIME 类型时，许多浏览器只是下载页面。检查您的 app.js 或框架的标头设置。

# ruby-on-rails - 如何在协作上下文中处理捆绑器更新（Gemfile.lock）？

> ID：14471109
> 
> 赞同：23
> 
> 时间：2013-01-23T01:35:21.837
> 
> 标签：ruby-on-rails, version-control, bundler, collaboration, gemfile

我一直是一个特定项目的孤独程序员，但现在其他人作为合作者加入了。图片中只有我，`bundler`更新一直很顺利，我从没想过`Gemfile.lock`被 Git 跟踪。

新的合作者`bundle install`在克隆 repo 后运行，`Gemfile.lock`更新如下：

**Gemfile.lock**

```
@@ -141,7 +141,7 @@ GEM
       rack-ssl (~> 1.3.2)
       rake (>= 0.8.7)
       rdoc (~> 3.4)
-      thor (< 2.0, >= 0.14.6)
+      thor (>= 0.14.6, < 2.0)
     raindrops (0.10.0)
     rake (0.9.2.2)
     rdoc (3.12)
@@ -164,7 +164,7 @@ GEM
     sprockets (2.1.3)
       hike (~> 1.2)
       rack (~> 1.0)
-      tilt (!= 1.3.0, ~> 1.1)
+      tilt (~> 1.1, != 1.3.0)
     thor (0.16.0)
     tilt (1.3.3)
     treetop (1.4.10)
@@ -175,7 +175,7 @@ GEM
     tzinfo (0.3.33)
     uglifier (1.3.0)
       execjs (>= 0.3.0)
-      multi_json (>= 1.0.2, ~> 1.0)
+      multi_json (~> 1.0, >= 1.0.2)
     unicorn (4.3.1)
       kgio (~> 2.6)
       rack 
```

此更改已推送到 master 的命名分支中。我应该如何应对这种变化？

大声思考：我是否合并 GitHub 上的拉取请求？我是否一开始就从上游拉取而没有拉取请求？我是否运行特定的捆绑程序命令来与其他合作者的同步`Gemfile.lock`？有没有其他合作者可以做不同的事情，这样他们就不会导致任何 gem 更新（而只是下载现有的 gem 中指定的 gem `Gemfile.lock`）？围绕这种情况的最佳做法是什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-23T01:53:00.227

Gemfile.lock*应该*是版本控制的。您应该对其进行任何更改。当某人（您信任的人）更新它时，您应该运行`bundle install`以安装当前锁定在 Gemfile.lock 中的 gem。

只是运行`bundle install`不会更新现有的 Gemfile.lock。为此，您需要运行`bundle update`.

话虽如此，您的 Gemfile.lock 中的版本并没有实际变化。改变的只是几行参数的顺序。您可以安全地将这些更改合并或忽略它们；生成的 Gemfile.lock 将（功能上）相同。

# python - 将 Int64Index 更改为 Index 并将 dtype=int64 更改为 dtype=object

> ID：14471120
> 
> 赞同：4
> 
> 时间：2013-01-23T01:36:39.153
> 
> 标签：python, pandas, xlwt

我正在尝试将 pandas DataFrame 和 Series 写入 xlwt Worksheet 对象。一切顺利，除非我尝试写入 numpy.int64 数据，在这种情况下 xlwt 喘不过气来。在我的数据和单级索引中将 int64 更改为 float64 很简单，但是对于 MultiIndexes，正确的做法是什么？

```
t = pd.DataFrame(np.array(np.mat('0 1 0 1; 1 0 2 3; 1 1 2 4')))
arrays = [[1,2,3,4],[5,6,7,8]]
tuples = zip(*arrays)
index = pd.MultiIndex.from_tuples(tuples, names=['First','Second'])
t.columns = index
wb = xlwt.Workbook()
ws_1 = wb.add_sheet('simple index', cell_overwrite_ok=True)

In [137]: t
Out[137]: 
First   1  2  3  4
Second  5  6  7  8
0       0  1  0  1
1       1  0  2  3
2       1  1  2  4

In [157]: t.ix[0][1][5]
Out[157]: 0

In [158]: ws_1.row(0).write(0, t.ix[0][1][5])
------------------------------------------------------------
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
  File "C:\Python27\lib\site-packages\xlwt\Row.py", line 259, in write
    raise Exception("Unexpected data type %r" % type(label))
Exception: Unexpected data type <type 'numpy.int64'>

In [159]: t.dtypes
Out[159]: 
First  Second
1      5         int64
2      6         int64
3      7         int64
4      8         int64

In [160]: idx = t.dtypes[t.dtypes == np.int64].index

In [161]: idx
Out[161]: 
MultiIndex
[(1, 5), (2, 6), (3, 7), (4, 8)]

In [163]: for i in idx:
   .....:             t[i] = t[i].astype(np.float64)
   .....: 

In [164]: t.dtypes
Out[164]: 
First  Second
1      5         float64
2      6         float64
3      7         float64
4      8         float64

In [165]: ws_1.row(0).write(0, t.ix[0][1][5])

In [167]: t.columns.levels
Out[167]: [Int64Index([1, 2, 3, 4], dtype=int64), Int64Index([5, 6, 7, 8], dtype=int64)]

In [168]: t.columns
Out[168]: 
MultiIndex
[(1, 5), (2, 6), (3, 7), (4, 8)]

In [169]: t.columns[0][0]
Out[169]: 1

In [170]: ws_1.row(0).write(0, t.columns[0][0])
------------------------------------------------------------
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
  File "C:\Python27\lib\site-packages\xlwt\Row.py", line 259, in write
    raise Exception("Unexpected data type %r" % type(label))
Exception: Unexpected data type <type 'numpy.int64'> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T02:13:36.640

```
for i in range(len(t.columns.levels)):
    if t.columns.levels[i].dtype == np.int64:
        t.columns.levels[i] = t.columns.levels[i].astype(np.float64) 
```

# php - PHP效率，使用循环与否？（改进旧项目）

> ID：14471121
> 
> 赞同：0
> 
> 时间：2013-01-23T01:36:42.077
> 
> 标签：php

我怀疑它会对性能产生“巨大”影响，但我想知道 PHP 循环是否比使用 PHP 变量吐出 HTML 更好？

一个**非常**简单的例子是这样的：

这是“更有效”：

```
<?php
$i = 0;
$settings = array(
    1   => 'var_a|var_one',
    2   => 'var_b|var_two',
    3   => 'var_c|var_two',
    4   => 'var_d|var_three',
);
foreach($settings as $setting) {
    $e = explode('|', $setting);
    if(get_option($e[0]) !== ''){ ?>
        <li class="radio">
            <h2><?php print($e[1]); ?></h2>
            <input name="radio_ask" type="radio" value="<?php print($e[0]); ?>" id="radio_<?php print($i); ?>" tabindex="<?php print($i); ?>" onclick="this.setAttribute('checked', 'checked'); this.checked = true;">
        </li>
    <?php }
} 
?> 
```

或者

```
<?php 
if(get_option('var_a') !== ''){ ?>
    <li class="radio">
        <h2><?php print( get_option('var_one')); ?></h2>
        <input name="radio_ask" type="radio" value="<?php print( get_option('var_a')); ?>" id="radio_1" tabindex="1" onclick="this.setAttribute('checked', 'checked'); this.checked = true;">
    </li>
}
if(get_option('var_b') !== ''){ ?>
    <li class="radio">
        <h2><?php print( get_option('var_two')); ?></h2>
        <input name="radio_ask" type="radio" value="<?php print( get_option('var_b')); ?>" id="radio_2" tabindex="2" onclick="this.setAttribute('checked', 'checked'); this.checked = true;">
    </li>
<?php } ?>
<?php 
    //etc. etc.
?> 
```

这个问题的基础是我很久以前写了一些代码，从那时起我学到了很多东西。我想稍微清理一下。（诸如`print($this); print($that);`代替之`print($this.$that);`类的东西，包括上述内容。

我只是想确保移动到“最高”示例更好，或者只是一种更好/更清洁的做事方式。我不想继续做一些我认为看起来更干净的东西，但由于某种我看不到的原因很糟糕

**编辑：**对于代码的任何打嗝，我很抱歉，我当场写了它作为一个简单的例子

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T01:39:20.100

**简短的回答**

DRY（不要重复自己）是您应该更害怕的原则，而不是“绩效”。因此，您应该使用循环。

**长答案**

考虑一个（可怕的）时刻来获得第二个代码；一长串相同的代码一遍又一遍地重复大约 20 次。假设您想再添加 10 行：第一个您只需更改开头的循环（1 行），第二个您创建大约 100 行代码。然后假设您想更改每个代码的一些内容：第二次您必须编辑该段代码 30 次，而第一次……我想您已经掌握了这个概念。

# regex - 捕捉这些元素的最佳正则表达式是什么？

> ID：14471122
> 
> 赞同：0
> 
> 时间：2013-01-23T01:36:42.357
> 
> 标签：regex

给定如下输入（其中可能有任意数量的逗号分隔值；在此示例中只有 3 个）

```
Abc (xyz) asd 123 - 1 MMM, xcz8c.8x - 5 MMMs, hello - world - 1 MMM 
```

将捕获以下 3 个元素的正则表达式是什么：

```
 Abc (xyz) asd 123
  xcz8c.8x
  hello - world 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:51:51.443

在蟒蛇中：

```
>>> import re
>>> s = 'Abc (xyz) asd 123 - 1 MMM, xcz8c.8x - 5 MMMs, hello - world - 1 MMM'
>>> re.findall(r'[ |,]*(.*?) - \d+ MMMs?', s)
['Abc (xyz) asd 123', 'xcz8c.8x', 'hello - world'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:57:29.777

```
([^,]*?)\s-\s\d+\sMMMs? 
```

这可能不是最好的，但我已经在[这里](http://rubular.com/r/CBaVexW6NL)测试过了。

# perl - 如何安装和使用 log4perl？

> ID：14471128
> 
> 赞同：15
> 
> 时间：2013-01-23T01:37:26.997
> 
> 标签：perl, log4perl

我是新手`log4p`，想用它来登录我的代码。我收到如下错误：

> 在 @INC 中找不到 Log/Log4perl.pm

我理解是因为缺少库。现在，我在哪里以及如何在我的 UNIX 环境中安装这个库？

我尝试安装：

```
yum install perl-Log-Log4perl-1.30-1.el6.noarch.rpm 
```

这也失败了。我不是在正确的轨道上吗？有人可以给我一个快速启动链接，它还告诉我如何安装这个包以及从哪里安装？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-23T01:40:08.593

为 perl 安装软件包的典型方法是使用[`cpan`](http://www.cpan.org/)或它的变体（cpanm、cpanp 等）。如果它是由您的发行版打包的，那会更容易/更快，但如果不是，您仍然可以通过 cpan 进行打包。

```
cpan Log::Log4perl 
```

或在 DOS 命令提示符下输入

```
> cpan
> install Log::Log4perl 
```

[您可以在search.cpan.org](http://search.cpan.org/%7Emschilli/Log-Log4perl-1.40/lib/Log/Log4perl.pm)上查找所需的软件包及其确切的软件包名称

查看[Wikipedia 以获取有关 CPAN 的信息](http://en.wikipedia.org/wiki/CPAN)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-07T21:53:02.147

```
1) Go to http://search.cpan.org/~mschilli/Log-Log4perl-1.46/
2) Download tar.gz archive
3) tar zxfv archive
4) go to the archive's folder
5) run "perl Makefile.PL"
6) run "make"
7) run "make test"
8) run "make install" 
```

就这样。

# java - JMX MBean - 在 getter 和 setter 上同步

> ID：14471130
> 
> 赞同：1
> 
> 时间：2013-01-23T01:37:45.027
> 
> 标签：java, thread-safety, jmx

我只是想澄清一下我对 JMX MBean 的线程安全性的理解。

我有一个像这样的简单 MBean：

```
public class Person
    implements PersonMBean
{
    private String name;

    public void setName(String name)
    {
        this.name = name;
    }

    public String getName()
    {
        return name;
    }
} 
```

在可以有多个客户端访问MBean的情况下（例如，多个用户通过jconsole调用setName()），我确实需要同步getter和setter，对吧？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:26:10.847

同步可能不是您所需要的。同步定义了*发生前的*关系，我认为这里没有必要。所以

```
volatile private String name; 
```

可能就够了。

如果*发生之前*真的很重要，我会选择一个[公平的可重入锁](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantLock.html#ReentrantLock%28boolean%29)。

来自*[JLS 3 8.3.1.4 volatile 字段](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.3.1.4)*

> Java 编程语言提供了第二种机制 [除了同步之外]，易失性字段，在某些情况下它比锁定更方便。

这可能是这些目的之一。

> 一个字段可能被声明为 volatile，在这种情况下，Java 内存模型（第 17 节）确保所有线程都能看到变量的一致值。

无论如何，请查看 JLS 中的*[17.4.5 Happens-before Order](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html#17.4.5)*并决定在这种情况下什么最适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:46:16.487

> ...可以有多个客户端通过 jconsole 调用 [ing] setName()，我需要同步 getter 和 setter 吗？

是的，如果多个线程正在调用 getter 和 setter，您可能应该这样做——就像多个本地线程正在调用 getter 和 setter 时一样。正如@user454322 所指出的，使用`volatile`关键字来完成内存同步也是合适的。

由于两个原因，某种形式的同步是必要的。首先，多个 JMX 操作可以同时运行，这意味着可能会发生 getter 和 setter 竞争条件。其次，即使 setter 发生在 getter 之前，也不能保证 JMX 线程在没有同步的情况下具有更新的值。这取决于每个线程获取名称的最后一个值的重要性。如果所有线程都必须看到设置的姓氏，那么您需要保持良好状态`synchronized`。

这就是说，我们有很多关于统计信息和其他诊断信息的不同步的 JMX getter 方法，并期望 JVM 会在某个时候同步各种计数器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T04:15:51.877

如果您的 JMX bean 所做的只是设置字段的值，那么您需要做的就是将该字段声明为`volatile`. 这确保了对变量的后续读取可以看到之前的写入。

制作这些方法`synchronized`也提供了相同的保证，但需要额外的成本来获得监视器。

# c++ - 虚拟继承和参数化构造函数

> ID：14471138
> 
> 赞同：5
> 
> 时间：2013-01-23T01:39:42.040
> 
> 标签：c++

> **可能重复：**
> [默认构造函数和虚拟继承](https://stackoverflow.com/questions/3524019/default-constructor-and-virtual-inheritance)

```
class Base
{
private:
    int number;
protected:
    Base(int n) : number(n) {}
public:
    virtual void write() {cout << number;}     
};

class Derived1 : virtual public Base
{
private:
    int number;
protected:
    Derived1(int n, int n2) : Base(n), number(n2) {}
public:
    virtual void write() {Base::write(); cout << number;}
};

class Derived2 : virtual public Base
{
private:
    int number;
protected:
    Derived2(int n, int n2) : Base(n), number(n2) {}
public:
    virtual void write() {Base::write(); cout << number;}
};

class Problematic : public Derived1, public Derived2
{
private:
    int number;
public:
    Problematic(int n, int n2, int n3, int n4) : Derived1(n, n2), Derived2(n, n3), number(n4) {}
    virtual void write() {Derived1::write(); Derived2::write(); cout << number;}
};

int main()
{
    Base* obj = new Problematic(1, 2, 3, 4);
    obj->write();
} 
```

换句话说：

```
Base
| \
|  \
|   \
|    \
D1   D2
|    /
|   /
|  /
| /
Problematic 
```

我试图在输出中获得“1 2 1 3 4”。然而，编译器一直抱怨我在 Base 中需要一个无参数构造函数，但是当我添加一个时，“1”变成了垃圾。关于如何处理它的任何想法？甚至可以使用参数化构造函数来解决菱形图案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:47:19.213

看一下[调用虚基类的重载构造函数](https://stackoverflow.com/questions/3495139/calling-a-virtual-base-classs-overloaded-constructor)，看起来如果继承是虚的，那么最派生的类必须调用基类的构造函数。

```
Problematic(int n, int n2, int n3, int n4) : Derived1(n, n2), Derived2(n, n3), Base(n), number(n4) {} 
```

# .net - 实体框架 5：在上下文中替换条目的正确方法

> ID：14471142
> 
> 赞同：12
> 
> 时间：2013-01-23T01:40:18.297
> 
> 标签：.net, entity-framework, entity-framework-5

我想做的很简单。我在数据库中有一个零件列表，我想根据更新列表删除/插入/更新它们。

主要问题是，当我想替换一个条目时，我无法将它附加到上下文中，因为旧的（要更新的）条目已经附加（通过先前的读取调用）并且引发​​了异常。

我有3个想法。

1.  手动分离旧条目并附加新条目（尽管将实体状态更改为已分离仍会引发异常）
2.  用新条目手动更改旧条目的值
3.  使读取调用不可跟踪（AsNoTracking（）），这似乎工作正常，但我担心对延迟加载的影响。

是否有像“context.entry.replace(oldEntry,newEntry)”这样的功能或任何其他适当的方法来做到这一点？

```
IEnumerable<SoldPart> old = db.SoldParts.Where(sp=>sp.sessionId == sessionId);

                var toDelete = old.Where(po=> !parts.Any(pu=>pu.id == po.id));
                var toCreate = parts.Where(po => !old.Any(pu => pu.id == po.id));
                var toUpdate = parts.Where(po => old.Any(pu => pu.id == po.id));

                foreach (SoldPart item in toDelete)
                {
                    db.SoldParts.Attach(item);
                    db.SoldParts.Remove(item);
                }
                foreach (SoldPart item in toCreate)
                {
                    db.SoldParts.Add(item);
                }

                foreach (SoldPart item in toUpdate)
                {

                    db.SoldParts.Attach(item);
                    db.Entry(item).State = EntityState.Modified;
                }

                db.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-23T09:13:53.923

有一种自动方法可以从分离的实体中更新附加实体的值，但它仅适用于标量/复杂属性。不在导航属性上：

```
deb.Entry(oldEntry).CurrentValues.SetValues(newEntry); 
```

# java - 在eclipse java项目中加载dll文件

> ID：14471150
> 
> 赞同：4
> 
> 时间：2013-01-23T01:42:35.120
> 
> 标签：java, sql-server-2008, jakarta-ee, jdbc

我正在尝试将文件添加`sqljdbc_auth.dll`到项目库中。我将包含 dll 的文件夹添加为外部类文件夹。

在这里，我基本上是尝试使用 Microsoft 提供的 SQL 驱动程序连接到我的 SQL SERVER 2008 数据库。

我的代码是

```
private static void Connect(){
        try
        {
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
            String connectionUrl = "jdbc:hostname:1433;databaseName=dbname;"

                + "user=username;password=password";
            java.sql.Connection con = DriverManager.getConnection(connectionUrl);
        }
        catch(ClassNotFoundException e)
        {
            e.printStackTrace();
        }
        catch(SQLException e2)
        {
            e2.printStackTrace();
        }
    }` 
```

我收到以下错误

```
WARNING: Failed to load the sqljdbc_auth.dll cause : no sqljdbc_auth in java.library.path
com.microsoft.sqlserver.jdbc.SQLServerException: This driver is not configured for integrated authentication. ClientConnectionId:b83147c7-b45a-4f35-b601-195a0aa9c32c
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate(SQLServerConnection.java:1667)
    at com.microsoft.sqlserver.jdbc.AuthenticationJNI.<init>(AuthenticationJNI.java:60)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:2229)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.access$000(SQLServerConnection.java:41)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:2220)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1326)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:991)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:827)
    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1012)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at com.sagar.com.package1.T1.Connect(T1.java:21)
    at com.sagar.com.package1.T1.main(T1.java:37)
Caused by: java.lang.UnsatisfiedLinkError: no sqljdbc_auth in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at com.microsoft.sqlserver.jdbc.AuthenticationJNI.<clinit>(AuthenticationJNI.java:35)
    ... 13 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-26T20:50:13.083

另一种选择是将类似这样的内容添加到项目主类的 VM 参数中：

```
-Djava.library.path="C:\Program Files\Microsoft JDBC Driver 4.0 for SQL Server\sqljdbc_4.0\enu\auth\x64" 
```

（指定 sqljdbc_auth.dll 文件的路径）。无需更改环境 PATH 或 Eclipse IDE jvm 参数。

对于项目的主类，选择菜单选项`Run As >> Run Configurations...` ![运行配置...](../Images/2cf4eda10d4b54e5121200e3a9d7f432.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:07:18.177

如果要从 Eclipse 内部使用 DLL，则需要将 DLL 包含在系统上的某个位置`PATH`，或者需要在 Eclipse 的运行配置中显式指定`java.library.path`属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T06:43:47.660

在 Windows 平台上，Java.library.path 默认为 PATH 环境变量。简单的解决方案是将 DLL 复制到您的路径中（例如 windows/system32）并重新启动 eclipse。此外，DLL 类型必须与 Java 版本匹配，即如果您使用 32 位 Java，那么您应该使用 32 位 DLL

# c# - 在 Excel 应用自动格式之前获取单元格值

> ID：14471152
> 
> 赞同：0
> 
> 时间：2013-01-23T01:42:39.163
> 
> 标签：c#, excel

在 Excel 将自动格式应用于单元格之前，我需要获取用户输入到单元格中的值。例如 1230E45 被转换为 1.23E+48（科学记数法）。

我知道用户可以通过将单元格预格式化为文本来避免这个问题，但我不希望他\她每次都这样做。

有没有办法在编辑模式下捕获 keydown 来存储用户输入的内容？

或者更好的主意....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:57:26.063

> 我知道用户可以通过将单元格预格式化为文本来避免这个问题，但我不希望他\她每次都这样做。

如果输入单元格位于某个定义的区域中，例如 1 列或多列 - 您可以使用通常的“单元格属性”对话框**将整个区域预格式化为文本。**

也许这有点简单，但是您的输入中没有任何内容使我的解决方案完全不可能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:36:42.163

Excel 仅出于显示目的格式化数字 - 基础值存储为可使用 Cell.Value2 访问的双精度浮点数。
因此，大概您正在谈论当您希望它们成为文本时，Excel 会自动将一些看起来像数字的事物（1230E45 ... 24-Sep-1992 等）转换为数字。

如果是这样，一些可能的解决方案是：

*   捕获表格中的数据，然后以您想要的表格将其传输到 Excel
*   输入后对数据进行后处理并将其转换回您想要的形式
*   有选择地将单元格预格式化为文本（有效地预先创建一个工作表表单供用户填写）
*   使用表单控件（例如数据验证、列表框等）来允许从列表中选择用户输入

# coldfusion - 是否可以将 Selenium 2 WebDriverWait 与 ColdFusion 一起使用？

> ID：14471153
> 
> 赞同：1
> 
> 时间：2013-01-23T01:42:46.237
> 
> 标签：coldfusion, selenium-webdriver, coldfusion-10

来自[http://seleniumhq.org/docs/03_webdriver.jsp](http://seleniumhq.org/docs/03_webdriver.jsp)它显示了以下 Java 示例代码

```
(new WebDriverWait(driver, 10)).until(new ExpectedCondition<Boolean>() {
  public Boolean apply(WebDriver d) {
    return d.getTitle().toLowerCase().startsWith("cheese!");
  }
}); 
```

是否可以在 CFML 中编写上面的代码，也许在 CF10 的[动态代理](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d318518-106e125d1353e804331-7ff9.html)的帮助下？

如果我们可以让 CF10 的[闭包](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d31851842acbba1353e848b35-7fff.html)与上面的代码示例一起工作，那就太棒了，但由于预期的 Java 接口和 Java 返回类型，它似乎不会工作，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:14:31.983

我不确定哪个是更好的选择。但是可以使用动态代理。只需创建一个实现`ExpectedCondition`接口的cfc：

```
component {
    public boolean function apply(Any d) {
        return d.getTitle().toLowerCase().startsWith("cheese!");
    } 
} 
```

然后创建代理的实例并将其传递给`WebDriverWait`

```
<cfscript>
    driver = createObject("java", "org.openqa.selenium.firefox.FirefoxDriver").init();
    driver.get("http://www.google.com");

    by = createObject("java", "org.openqa.selenium.By");
    element = driver.findElement(By.name("q"));

    WriteDump("Page title is: "& driver.getTitle());

    element.sendKeys(["Cheese!"]);
    element.submit();

    conditionProxy = createDynamicProxy("test.ExpectedConditionProxy", ["org.openqa.selenium.support.ui.ExpectedCondition"]); 
    WebDriverWait = createObject("java", "org.openqa.selenium.support.ui.WebDriverWait");
    WebDriverWait.init(driver, 10).until( conditionProxy );
    WriteDump("Page title is: "& driver.getTitle());

    driver.quit();
</cfscript> 
```

# asp.net - 使用richtextbox和documenttext函数无法在网页上找到多个单词

> ID：14471157
> 
> 赞同：0
> 
> 时间：2013-01-23T01:43:39.760
> 
> 标签：asp.net, vb.net, richtextbox

我有这个代码。有时它会在网页中找到这个词，有时它不会。我不确定问题可能是什么。同样输入到richtextbox2.text中的单词它只找到第一个单词，所以如果我把第一个单词作为“Cookies”然后在那个“Milk”下，它只会寻找“Cookies”。有没有办法让它查找richtextbox 中的所有单词？

```
Private Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click
    If WebBrowser1.DocumentText.ToLower.Contains(RichTextBox2.Text.ToLower) Then
        MsgBox("its there")
    Else
        MsgBox("NOT THERE")
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:48:26.200

当 RichTextBox 中有多个单词时，它会同时搜索这两个单词，因为它们都在 RichTextBox2.Text 中。您可以一次搜索 RichTextBox 中的每个单词或短语，如果它们位于不同的行上，如下所示：

```
for each s in RichTextBox2.lines
  If WebBrowser1.DocumentText.ToLower.Contains(s.ToLower) Then
    MsgBox(s & " is there")
  Else
    MsgBox(s & " IS NOT THERE")
  End If
next s 
```

# .net - .NET 中的 WAMI 记录器

> ID：14471161
> 
> 赞同：1
> 
> 时间：2013-01-23T01:44:12.587
> 
> 标签：.net, asp.net-mvc-3, flash, voice-recording

我在看这个闪存录音机： [http ://code.google.com/p/wami-recorder/](http://code.google.com/p/wami-recorder/)

有没有人在.NET（特别是 MVC3 C#）中成功实现它？我在站点中看到的只是 PHP 实现，没有实际的演示站点。

此外，如果有人有很好的录音替代品，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:16:11.783

您需要做的就是设置 recordUrl 和 playUrl

作为基本实现，您可以执行以下操作：

```
@{
    var payUrl = "http://yourdomain/recordings/recording-" + Session["recordingId"] + ".wav";
    <!-- saves the wav file to local folder called recodings using a session value to make unique file names -->
}
<script>
        function setupRecorder() {
            Wami.setup({
                id: "wami",
                onReady: setupGUI
            });
        }

        function setupGUI() {
            var gui = new Wami.GUI({
                id: "wami",
                recordUrl: "http://yourdomain/home/Save",
                playUrl: "@payUrl"
            });

            gui.setPlayEnabled(false);
        }
</script> 
```

并在您的家庭控制器中添加保存操作

```
public ActionResult Save()
{
    Request.SaveAs(Server.MapPath("/recordings/recording-" + Session["recordingId"].ToString() + ".wav"), false);
    return Json(new {Success = true}, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T11:25:22.050

将以下代码放入您的页面中：

```
<div id="wami"></div> 
```

后面的代码如下：

```
protected override void OnPreRender(EventArgs e) {
    ScriptManager.RegisterStartupScript(Page, GetType(), "setupRecorder", "setupRecorder();", true);
    base.OnPreRender(e);
} 
```

创建一个网页，比如**RecorderPage.aspx**，将 html 留空，并将以下代码放入后面的代码中：

```
private const string Path = "/App_Data/recordings";
private static readonly string FileName = string.Format("audio-{0}-{1}.wav", DateTime.Now.ToString("yyyyMMdd"), Guid.NewGuid());
private static readonly string Directory = HttpContext.Current.Server.MapPath(Path);

protected void Page_Load(object sender, EventArgs e) {
    string mapPath = HttpContext.Current.Server.MapPath(Path);
    string action = Request.QueryString["action"];
    if (!action.HasValue()) {
        return;
    }
    if (action.Equals("save")) {
        if (!System.IO.Directory.Exists(Directory)) {
            System.IO.Directory.CreateDirectory(Directory);
        }
        Request.SaveAs(Server.MapPath(Path + "/" + FileName), false);
    } else if (action.Equals("play")) {
        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.ClearContent();
        HttpContext.Current.Response.ClearHeaders();
        HttpContext.Current.Response.Buffer = true;
        HttpContext.Current.Response.BufferOutput = true;
        HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment;filename=" + FileName);
        HttpContext.Current.Response.Charset = "utf-8";
        HttpContext.Current.Response.AddHeader("Content-Type", "audio/x-wav");
        HttpContext.Current.Response.ContentType = "audio/x-wav";
        HttpContext.Current.Response.AddHeader("Pragma", "no-cache");
        Response.WriteFile(mapPath + "/" + FileName);
        HttpContext.Current.Response.Expires = -1;
        HttpContext.Current.Response.Flush();
        HttpContext.Current.Response.End();
    }
} 
```

确保正确导入所有必需的文件（buttons.png、gui.js、recorder.js 和 Wami.swf）。

最后，将这两个函数包含在页面的脚本部分中，`recordUrl`根据`playUrl`您的配置进行修改：

```
function setupRecorder() {
    Wami.setup({
        id: "wami",
        onReady: setupGUI
    });
}

function setupGUI() {
    var gui = new Wami.GUI({
        id: "wami",
        recordUrl: "http://localhost/RecorderPage.aspx?action=save",
        playUrl: "http://localhost/RecorderPage.aspx?action=play"
    });

    gui.setPlayEnabled(false);
} 
```

# html - 在 IE 中单击时导航链接向左移动

> ID：14471162
> 
> 赞同：0
> 
> 时间：2013-01-23T01:44:32.177
> 
> 标签：html, css, internet-explorer, navigation

当我在 IE 中单击导航链接时，我无法弄清楚为什么导航链接会向左移动或跳转，但在 chrome、safari、firefox 上，它们会像动画一样轻轻按下按钮。我被赋予了这个空白主题，并以某种方式融入其中。如果有人可以让我知道如何解决 IE 问题或将其全部删除，将不胜感激。谢谢

网站是[www.newpathwaysretreat.com](http://www.newpathwaysretreat.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:38:37.567

在你的CSS中，你有这一行......删除它：

```
a:active { position: relative; top: 1px; } 
```

# php - 无法让自动完成功能在 CodeIgniter 中工作 - 想法？

> ID：14471163
> 
> 赞同：0
> 
> 时间：2013-01-23T01:44:35.110
> 
> 标签：php, codeigniter, jquery-autocomplete

我有一个表单，用户可以在其中输入视频游戏的名称。我要做的是在名称和 ID 均为“gameTitle”的字段中设置自动完成功能。自动完成是从名为“aararity”的数据库表中提取名为“title”的字段。

我使用[这个博客上的指南](http://www.jamipietila.fi/codeigniter-and-autocomplete-with-jquery/)作为我的范例。

首先，我知道要使自动完成功能起作用，您需`config/config.php`要这样做，我会这样做：

```
$config['csrf_protection'] = FALSE; 
```

在我看来，我有：

```
$(document).ready(function() {
$(function() {
$( "#gameTitle" ).autocomplete({ // the field I want to autocomplete is called gameTitle
source: function(request, response) {
$.ajax({ url: "",
data: { term: $("#gameTitle").val()},
dataType: "json",
type: "POST",
success: function(data){
response(data);
}
});
},
minLength: 2
});
});
}); 
```

这是我的控制器中的“建议”功能（$row->title 中提到的“标题”是指我试图从中提取的数据库表中的“标题”字段）：

```
function suggestions()
{
            $this->load->model('usergames_model');
            $term = $this->input->post('term',TRUE);

            if (strlen($term) < 2) break;

            $rows = $this->autocomplete_model->GetAutocomplete(array('keyword' => $term));

            $json_array = array();
            foreach ($rows as $row)
            array_push($json_array, $row->title);

            echo json_encode($json_array);
} 
```

现在，这是我添加到模型中的内容：

```
function GetAutocomplete($options = array())
{
     $this->db->select('title');
     $this->db->like('title', $options['keyword'], 'after');
     $query = $this->db->get('aararity');
     return $query->result();
} 
```

基本上，当我运行表单时，没有任何自动完成功能。我认为`$options[keyword]`参数可能是问题所在；我几乎从上述博客中复制了它，我猜这可能是作者使用的模糊占位符。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:51:44.650

OMG，我不敢相信……我想通了……

建议（）试图调用一个名为“autocomplete_model”的不存在的模型——我忘了​​把它改成“usergames_model”！！！！

现在它工作得很好！

# android - Android：使用快捷方式启动应用程序，执行操作并退出？

> ID：14471165
> 
> 赞同：0
> 
> 时间：2013-01-23T01:44:50.457
> 
> 标签：android, android-activity, shortcut

我有一个可以执行某些操作的 Android 应用程序。但是，我也允许在主屏幕上创建快捷方式来执行某些操作。您可以在应用程序中通过按下调用方法的按钮（让我们调用方法 DoAction）在应用程序中执行某些操作，我希望允许用户直接从快捷方式执行。单击快捷方式时，它会打开主 Activity 并像按钮一样调用 DoAction，然后在 Activity 上调用 finish() 以关闭它。

但是，当应用程序已经在 RAM（最小化）中打开时，就会出现问题。在快捷方式创建的活动中调用完成（）后，应用程序的旧运行实例被带到前面（我不希望发生这种情况）。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:23:41.013

这是我用来创建快捷方式的工作代码：

```
Intent shortcutIntent = new Intent(ShortcutActivity.this, com.example.myproject.ClassToOpen.class);
shortcutIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK); // This was the line that I needed to add

ShortcutIconResource iconResource = Intent.ShortcutIconResource.fromContext(ShortcutActivity.this, R.drawable.shortcut);
Intent intent = new Intent();
intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
intent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, iconResource);
intent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "Shortcut Name");
setResult(RESULT_OK, intent); 
```

# c# - 在 XNA 中缩放对象并在缩放时平铺纹理

> ID：14471173
> 
> 赞同：0
> 
> 时间：2013-01-23T01:46:12.577
> 
> 标签：c#, xna, rendering, 3ds

我正在使用 C#/XNA 4.0 制作游戏。

所以我有一个用 3DSMax 制作的简单盒子

[http://i.imgur.com/gd65sTx.png](http://i.imgur.com/gd65sTx.png)

我缩放它

```
Vector3 scaleVector = new Vector3(width, 1, height); 
Matrix newMatrix = scale * translationMatrix; 
```

结果如下：

[http://i.imgur.com/YNAIr8y.png](http://i.imgur.com/YNAIr8y.png)

这是我的渲染方法：

```
 /// <summary>
    /// Draws an objects with the specified texture. This DOES change the current textures, so be careful!
    /// </summary>
    public static void DrawModel(GraphicsDevice gd, Model model,
        RenderTechnique technique, Vector3 cameraPosition,
        Matrix world, Matrix viewProjection, LightList lights, Texture2D texture)
    {
        SetTexture(texture, model);
        DrawModel(gd, model, technique, cameraPosition, world, viewProjection, lights);
    }

    /// <summary>
    /// Sets a texture for a model by changing the effect parameters
    /// </summary>
    public static void SetTexture(Texture2D texture, Model model)
    {
        // for each mesh in model
        foreach (ModelMesh mesh in model.Meshes)
        {
            // for each mesh part
            foreach (ModelMeshPart meshPart in mesh.MeshParts)
            {
                // if primitives to change
                if (meshPart.PrimitiveCount > 0)
                {
                    // set texture visa effect
                    Effect effect = meshPart.Effect;
                    effect.Parameters["Texture"].SetValue(texture);
                }

            }
        }
    }

    /// <summary>
    /// Main Draw method. All draw calls end up here eventually.
    /// </summary>
    public static void DrawModel(GraphicsDevice gd, Model model,
        RenderTechnique technique, Vector3 cameraPosition,
        Matrix world, Matrix viewProjection, LightList lights)
    {
        if (gd == null)
        {
            throw new ArgumentNullException("gd");
        }

        // get model bones
        model.CopyAbsoluteBoneTransformsTo(bones);

        BlendState bs = gd.BlendState;
        DepthStencilState ds = gd.DepthStencilState;

        gd.DepthStencilState = DepthStencilState.DepthRead;
        gd.BlendState = BlendState.Additive;

        // for each mesh in model
        foreach (ModelMesh mesh in model.Meshes)
        {
            // get mesh world matrix
            Matrix worldBone = bones[mesh.ParentBone.Index] * world;
            Matrix worldBoneInverse = Matrix.Invert(worldBone);

            // compute camera position in object space
            Vector3 cameraObjectSpace = cameraPosition - worldBone.Translation;
            cameraObjectSpace = Vector3.TransformNormal(cameraObjectSpace,
                                                    worldBoneInverse);

            gd.SamplerStates[0] = SamplerState.LinearWrap;

            // for each mesh part
            foreach (ModelMeshPart meshPart in mesh.MeshParts)
            {
                // if primitives to render
                if (meshPart.PrimitiveCount > 0)
                {
                    // setup vertices and indices
                    gd.SetVertexBuffer(meshPart.VertexBuffer);
                    gd.Indices = meshPart.IndexBuffer;

                    // setup effect
                    Effect effect = meshPart.Effect;
                    effect.Parameters["WorldViewProj"].SetValue(worldBone * viewProjection);
                    effect.Parameters["CameraPosition"].SetValue(cameraObjectSpace);

                    // setup technique
                    effect.CurrentTechnique =
                        meshPart.Effect.Techniques[(int)technique];

                    // if not lights specified
                    if (lights == null)
                    {
                        // begin effect
                        effect.CurrentTechnique.Passes[0].Apply();
                        // draw with plain mapping
                        gd.DrawIndexedPrimitives(PrimitiveType.TriangleList,
                            meshPart.VertexOffset, 0, meshPart.NumVertices,
                            meshPart.StartIndex, meshPart.PrimitiveCount);
                        gd.SetVertexBuffer(null);
                        gd.Indices = null;
                    }
                    else
                    {
                        gd.DepthStencilState = DepthStencilState.Default;
                        gd.BlendState = BlendState.Opaque;

                        // get light effect parameters
                        EffectParameter effectLightPosition =
                                            effect.Parameters[1];
                        EffectParameter effectLightColor =
                                            effect.Parameters[2];
                        EffectParameter effectLightAmbient =
                                            effect.Parameters[3];

                        // ambient light
                        Vector3 ambient = lights.ambient;

                        // for each light
                        foreach (Light light in lights.lights)
                        {
                            // setup light in effect
                            effectLightAmbient.SetValue(ambient);
                            light.SetEffect(effectLightPosition,
                                effectLightColor, worldBoneInverse);

                            // begin effect
                            effect.CurrentTechnique.Passes[0].Apply();
                            // draw primitives
                            gd.DrawIndexedPrimitives(PrimitiveType.TriangleList,
                                meshPart.VertexOffset, 0, meshPart.NumVertices,
                                meshPart.StartIndex, meshPart.PrimitiveCount);

                            // setup additive blending with no depth write
                            gd.DepthStencilState = DepthStencilState.DepthRead;
                            gd.BlendState = BlendState.Additive;

                            // clear ambinet light (applied in first pass only)
                            ambient = Vector3.Zero;
                        }

                        // clear vertices and indices
                        gd.SetVertexBuffer(null);
                        gd.Indices = null;

                    }

                }
            }
        }
        gd.DepthStencilState = ds;
        gd.BlendState = bs;
    } 
```

这是我正在使用的着色器：

```
float4x4 WorldViewProj;
float4 LightPosition;
float3 LightColor;
float3 LightAmbient;
float3 CameraPosition;

texture2D Texture;
sampler2D TextureSampler = sampler_state
{
    Texture = <Texture>;
    MinFilter = linear;
    MagFilter = linear;
    MipFilter = linear;
};
sampler2D TextureSamplerClamp = sampler_state
{
    Texture = <Texture>;
    MinFilter = linear;
    MagFilter = linear;
    MipFilter = linear;
    AddressU = clamp;
    AddressV = clamp;
};

texture2D Bump0;
sampler2D NormalSampler = sampler_state
{
    Texture = <Bump0>;
    MinFilter = linear;
    MagFilter = linear;
    MipFilter = linear;
};

texture2D Specular0;
sampler2D SpecularSampler = sampler_state
{
    Texture = <Specular0>;
    MinFilter = linear;
    MagFilter = linear;
    MipFilter = linear;
};

texture2D Emissive0;
sampler2D GlowMapSampler = sampler_state
{
    Texture = <Emissive0>;
    MinFilter = linear;
    MagFilter = linear;
    MipFilter = linear;
};

textureCUBE Reflect;
samplerCUBE ReflectSampler = sampler_state
{
    Texture = <Reflect>;
    MinFilter = linear;
    MagFilter = linear;
    MipFilter = linear;
    AddressU = clamp;
    AddressV = clamp;
    AddressW = clamp;
};

void PlainMappingVS( 
     in float4 InPosition    : POSITION0,
     in float2 InTexCoord    : TEXCOORD0,
    out float4 OutPosition    : POSITION0,
    out float2 OutTexCoord    : TEXCOORD0 )
{
    OutPosition = mul(InPosition, WorldViewProj);
    OutTexCoord = InTexCoord;
}

float4 PlainMappingPS( in float2 TexCoord : TEXCOORD0 ) : COLOR0
{
    return tex2D(TextureSampler, TexCoord);
}

void NormalMappingVS( 
     in float4 InPosition    : POSITION0,
     in float2 InTexCoord    : TEXCOORD0,
     in float3 InNormal      : NORMAL0,  
     in float3 InBinormal    : BINORMAL0,
     in float3 InTangent     : TANGENT0,
    out float4 OutPosition   : POSITION0,
    out float2 OutTexCoord   : TEXCOORD0,
    out float3 OutLightDir   : TEXCOORD1,
    out float3 OutViewDir    : TEXCOORD2,
    out float3 OutReflectDir : TEXCOORD3 )
{
    OutPosition = mul(InPosition, WorldViewProj);

    OutTexCoord = InTexCoord;

    float3x3 tangent_space = float3x3(InTangent, InBinormal, InNormal);

    OutLightDir = mul(tangent_space, LightPosition.xyz - InPosition.xyz);

    OutViewDir = mul(tangent_space, CameraPosition - InPosition.xyz);

    OutReflectDir = reflect(InPosition.xyz - CameraPosition, InNormal);
}

float4 NormalMappingPS(
    in float2 TexCoord        : TEXCOORD0,
    in float3 LightDir        : TEXCOORD1,
    in float3 ViewDir         : TEXCOORD2,
    in float3 ReflectDir      : TEXCOORD3 ) : COLOR0
{
    float4 diffuse = tex2D(TextureSampler, TexCoord);
    float4 specular = tex2D(SpecularSampler, TexCoord);
    float4 normal = tex2D(NormalSampler, TexCoord);
    float3 reflect = texCUBE(ReflectSampler, ReflectDir);
    float4 glow = tex2D(GlowMapSampler, TexCoord);

    float3 n = normalize(normal.xyz - 0.5);
    float3 l = normalize(LightDir);
    float3 v = normalize(ViewDir);
    float3 h = normalize(l+v);

    float ndotl = saturate(dot(n,l));
    float ndoth = saturate(dot(n,h));
    if (ndotl == 0)    ndoth = 0;

    float3 ambient = LightAmbient * diffuse.xyz;

    specular.xyz *= LightColor * pow(ndoth, specular.w * 255);
    diffuse.xyz *= LightColor * ndotl;
    reflect *= 1 - normal.w;

    float glow_intensity = saturate(dot(glow.xyz, 1.0) + dot(specular.xyz, 1.0));

    float4 color;
    color.xyz = ambient + glow.xyz + diffuse.xyz + specular.xyz + reflect.xyz;
    color.w = glow_intensity;

    return color;
}

void ViewMappingVS( 
     in float4 InPosition   : POSITION0,
     in float3 InNormal     : NORMAL0,  
    out float4 OutPosition  : POSITION0,
    out float  OutFacing    : TEXCOORD0 )
{
    OutPosition = mul(InPosition, WorldViewProj);

    float3 view = normalize(CameraPosition - InPosition.xyz);

    OutFacing = saturate(dot(view, InNormal));
}

float4 ViewMappingPS(in float Facing : TEXCOORD0) : COLOR0
{
    Facing *= Facing;
    Facing *= Facing;

    float4 tex = tex2D(TextureSamplerClamp, float2(Facing, 0));
    tex.w = 1.0f;

    return tex;
}

Technique PlainMapping
{
    Pass
    {
        VertexShader = compile vs_1_1 PlainMappingVS();
        PixelShader = compile ps_2_0 PlainMappingPS();
    }
}

Technique NormalMapping
{
    Pass
    {
        VertexShader = compile vs_1_1 NormalMappingVS();
        PixelShader = compile ps_2_0 NormalMappingPS();
    }
}

Technique ViewMapping
{
    Pass
    {
        VertexShader = compile vs_1_1 ViewMappingVS();
        PixelShader = compile ps_2_0 ViewMappingPS();
    }
} 
```

但是有两件事并没有像我希望的那样进行。首先，我想在盒子尺寸增加时平铺纹理。其次，它的灯光似乎很不稳定。我正在使用教育目录中 Ship Game 中的 Normal Lighting。

任何想法与照明发生了什么？或者我可以如何平铺纹理？

# mysql - 更改字段格式时出现语法错误

> ID：14471176
> 
> 赞同：1
> 
> 时间：2013-01-23T01:46:29.247
> 
> 标签：mysql, sql

我有一个日期字段（var）以“mm-dd-yy”格式保存日期信息，例如 07-01-12。我需要将其更改为日期格式。我尝试了以下但不起作用。我收到语法错误。

```
mysql_query("UPDATE `table-name` 
             SET `column-name` = STR_TO_DATE(`column-name`, '%m-%d-%y')") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:49:18.720

如果数据类型`column-name`为`DATETIME`或`DATE`，则不能更改其格式。保持原样。

`SELECT`只需在语句期间格式化值。

或者，如果您真的想要这种格式，请创建一个包含这种格式的新列（*但不要删除包含日期的旧*列）。当然数据类型应该是`VARCHAR`.

# python - Python - 检查字符串中的最后一个字符是否是数字

> ID：14471177
> 
> 赞同：42
> 
> 时间：2013-01-23T01:46:45.347
> 
> 标签：python, regex, string, numbers

基本上我想知道我会怎么做。

这是一个示例字符串：

```
string = "hello123" 
```

我想知道如何检查字符串是否以数字结尾，然后打印字符串以数字结尾。

我知道对于这个特定的字符串，您可以使用正则表达式来确定它是否以数字结尾，然后使用 string[:] 选择“123”。但是，如果我正在循环一个带有这样字符串的文件：

```
hello123
hello12324
hello12435436346 
```

...然后由于数字长度的差异，我将无法使用 string[:] 选择数字。我希望我能清楚地解释我需要什么来帮助你们。谢谢！

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-23T01:53:57.490

```
import re
m = re.search(r'\d+$', string)
# if the string ends in digits m will be a Match object, or None otherwise.
if m is not None:
    print m.group() 
```

* * *

`\d`匹配一个数字，`\d+`表示匹配一个或多个数字（贪心：匹配尽可能多的连续数字）。并且`$`表示匹配字符串的结尾。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-01-23T01:50:48.887

这不考虑字符串中间的任何内容，但它基本上表示如果最后一个数字是数字，则它以数字结尾。

```
In [4]: s = "hello123"

In [5]: s[-1].isdigit()
Out[5]: True 
```

有几个字符串：

```
In [7]: for s in ['hello12324', 'hello', 'hello1345252525', 'goodbye']:
   ...:     print s, s[-1].isdigit()
   ...:     
hello12324 True
hello False
hello1345252525 True
goodbye False 
```

我完全完全支持正则表达式解决方案，但这里有一种（不漂亮的）方法可以让你得到这个数字。同样，正则表达式在这里要好得多:)

```
In [43]: from itertools import takewhile

In [44]: s = '12hello123558'

In [45]: r = s[-1::-1]

In [46]: d = [c.isdigit() for c in r]

In [47]: ''.join((i[0] for i in takewhile(lambda (x, y): y, zip(r, d))))[-1::-1]
Out[47]: '123558' 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-12-17T21:46:50.690

另一种解决方案：查看您可以去除多少个 0-9 数字*字符串*的结尾，并将该长度用作*字符串*的索引以拆分数字。（`''`如果*字符串*不以数字结尾，则返回）。

```
In [1]: s = '12hello123558'

In [2]: s[len(s.rstrip('0123456789')):]
Out[2]: '123558' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T02:04:53.347

如果字符串以非数字结尾，则此字符串将简单地返回一个空字符串。

```
import re
re.split('[^\d]', str)[-1] 
```

由于空字符串是*falsy*，因此您可以重载含义：

```
def getNumericTail(str):
    re.split('[^\d]', str)[-1]

def endsWithNumber(str):
    bool(getNumericTail(str)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T01:59:52.313

另一种解决方案：

```
a = "abc1323"
b = ""
for c in a[::-1]:
    try:
        b += str(int(c))
    except: 
        break

print b[::-1] 
```

# sql - 使用 PostgreSQL 查找重复行

> ID：14471179
> 
> 赞同：74
> 
> 时间：2013-01-23T01:47:11.197
> 
> 标签：sql, database, ruby-on-rails-3, duplicates, postgresql-9.2

我们有一张包含以下列的照片表：

```
id, merchant_id, url 
```

此表包含组合的重复值`merchant_id, url`。所以有可能一排出现多次。

```
234 some_merchant  http://www.some-image-url.com/abscde1213
235 some_merchant  http://www.some-image-url.com/abscde1213
236 some_merchant  http://www.some-image-url.com/abscde1213 
```

删除这些重复项的最佳方法是什么？（我使用 PostgreSQL 9.2 和 Rails 3。）

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-01-23T03:21:31.640

这是我的看法。

```
select * from (
  SELECT id,
  ROW_NUMBER() OVER(PARTITION BY merchant_Id, url ORDER BY id asc) AS Row
  FROM Photos
) dups
where 
dups.Row > 1 
```

随意使用 order by 以根据您的规范定制要删除的记录。

SQL 小提琴 => [http://sqlfiddle.com/#!15/d6941/1/0](http://sqlfiddle.com/#!15/d6941/1/0)

* * *

不再支持用于 Postgres 9.2 的 SQL Fiddle；将 SQL Fiddle 更新到 postgres 9.3

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-10T21:14:06.480

sgeddes 答案的第二部分不适用于 Postgres（小提琴使用 MySQL）。这是他使用 Postgres 回答的更新版本：[http ://sqlfiddle.com/#!12/6b1a7/1](http://sqlfiddle.com/#!12/6b1a7/1)

```
DELETE FROM Photos AS P1  
USING Photos AS P2
WHERE P1.id > P2.id
   AND P1.merchant_id = P2.merchant_id  
   AND P1.url = P2.url; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-23T02:50:59.813

我为你看到了几个选择。

为了快速执行此操作，请使用类似这样的方法（假设您的 ID 列不是唯一的，因为您在上面多次提到 234）：

```
CREATE TABLE tmpPhotos AS SELECT DISTINCT * FROM Photos;
DROP TABLE Photos;
ALTER TABLE tmpPhotos RENAME TO Photos; 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!2/4e945/1)。

如果有任何约束，您需要将约束添加回表中。

如果您的 ID 列是唯一的，您可以执行类似保持最低 ID 的操作：

```
DELETE FROM P1  
USING Photos P1, Photos P2
WHERE P1.id > P2.id
   AND P1.merchant_id = P2.merchant_id  
   AND P1.url = P2.url; 
```

还有[小提琴](http://sqlfiddle.com/#!9/83864/1)。

# java - aspectj 在切入点内获取对象

> ID：14471183
> 
> 赞同：1
> 
> 时间：2013-01-23T01:47:46.080
> 
> 标签：java, spring, aop, aspectj

我有以下课程：

```
package Test;
public class A
{
    private B b = new B()
    {
       @Override
       public boolean someFunc() {return false;}
    }
 } 
```

什么是 AspectJ 切入点来捕获 someFunc 的执行，同时获得对外部类 A 的引用？

我试过了：

```
pointcut captureExec(): within(Test.A) && execution(boolean Test.B+.someFunc());
before(): captureExec()
{
    //here thisJoinPount.getTarget() returns object to class B, 
    //but I need reference object to the outer class A
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:02:26.833

应该是这样的：

```
pointcut captureExec(Test.A a): within(a) && execution(boolean Test.B+.someFunc());
before(Test.A a): captureExec(a) 
{
    if(a==blah) ...
} 
```

虽然没试过

# android - 如何为按钮创建新意图以打开新课程？

> ID：14471185
> 
> 赞同：0
> 
> 时间：2013-01-23T01:47:52.133
> 
> 标签：android, eclipse, android-intent

这是我的代码，我需要在里面放一些东西{} 以将按钮链接到新类或活动，例如 second page.java ：

```
public void addListenerOnButton() {

        ImageButton imageButton = (ImageButton) findViewById(R.id.imageButton1);

        imageButton.setOnClickListener(new OnClickListener() {

/*What can I put here to open new class 
,I mean another activity like secondp.java.*/

            } 
```

我试图把下面的代码，但我得到了以下错误：

```
The constructor Intent(new View.OnClickListener(){}, Class<List>) is undefined 
```

**代码**

```
@Override
            public void onClick(View arg0) {
                Intent k = new Intent(this,Secondp.class);
                startActivity(k); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:07:11.243

# 简单的

当需要上下文时，您使用了错误的`this`:)
`this`会将类传递给 Intent。`OnClickListener`

**利用：**

```
startActivity(new Intent(NameofyourcurrentActivity.this,Second.class)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:51:39.947

改变

```
Intent k = new Intent(this,Secondp.class); 
```

至

```
Intent k = new Intent(NameofyourcurrentActivity.this,Secondp.class); 
```

仅使用`this`关键字，您正在传递的对象`OnClickListener`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T01:50:55.453

尝试删除“this”子句，因为当您在代码中使用“this”时，它指的是 onclicklistener 类。如果您想在上下文中添加，请在方法之前引用您的上下文并改用它。

# java - “运行方式”在 Eclipse Juno 中不起作用

> ID：14471186
> 
> 赞同：0
> 
> 时间：2013-01-23T01:48:08.623
> 
> 标签：java, eclipse

我正在使用 Eclipse Juno，尝试使用 TestNG 和 Selenium 进行一些测试。当我按照说明编写我的java文件来运行测试时，我应该能够右键单击然后看到带有箭头的“运行方式”和一些选项，包括TestNG - 但我没有选项，也看不到TestNG。我也收到以下错误，但不清楚是否相关：

> 在“计算启动按钮工具提示”期间发生内部错误。.class 文件中的错误版本号

任何人都可以帮忙吗？

Ps 有人可能会说“你的 jdk 版本错误或版本不匹配”这可能是真的，但你能告诉我如何/在哪里检查/更改它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:35:12.837

右键单击 java 项目并选择构建路径 -> 配置构建路径。那里检查 jdk 版本和 java 编译器版本。将编译器版本更改为 jdk 版本。清理并构建项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:55:58.930

导航到您的 Java 项目，右键单击，导航到`Build Path`> `Configure Build Path..`，然后选择“库”选项卡。在那里，您可以设置项目使用的 Java 库。然后你可能想要清理你的项目并重建。

# android - 保存用户个人资料详细信息 android 应用程序的最佳方法

> ID：14471187
> 
> 赞同：2
> 
> 时间：2013-01-23T01:48:25.440
> 
> 标签：android, save

我正在创建一个有多个用户的应用程序。我创建了一个对象（用户），其中包含更多详细信息（姓名、年龄、自定义对象等）。因为我有一个自定义对象，所以我知道使用共享首选项会很困难。存储用户数据的最佳方式是什么？我研究过 SQLite，但找不到将自定义对象保存到 SQLite 的方法？

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:00:33.567

您可以使用任何 ORM 库来存储对象，我建议[使用 ORMLite](http://ormlite.com/)

# 将 SQLite 与 ORM 一起使用

[ORMLite](http://ormlite.com/)有一个 Android 后端，它调用原生 Android 操作系统数据库 API 以支持其 ORM 功能。许多 Android 开发人员正在成功使用该框架。浏览此处获取更多信息：

> [http://ormlite.com/sqlite_java_android_orm.shtml](http://ormlite.com/sqlite_java_android_orm.shtml)

在多对多关系方面，ORMLite 不支持级联或任何更高级的 ORM 功能，但有一些简单的多对多实现示例：

> [http://ormlite.com/docs/examples](http://ormlite.com/docs/examples)

# 将 db4o 与 ORM 一起使用

您可以将它们存储在专为存储对象而设计的[db4o](http://www.db4o.com/android/)中，而不是将它们存储在 SQLite 中。使用 db4o 排序对象的简单[教程。](http://www.sohailaziz.com/2012/09/using-database-for-objects-db4o-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:52:07.977

看看外部化。这是一篇关于它的博客文章：[Externalizable](http://www.craigr.com/2011/12/23/externalizable/)

这主要涉及使您的自定义对象可外部化。我怀疑有一种方法可以将这些写入共享偏好；我通常只是将它们发送到文件中。您可以制作一组用户数据并将整个数据流式传输到文件中。

# ios - UIBarButtonItem显示自定义视图后如何将其移动到不同的超级视图？

> ID：14471189
> 
> 赞同：1
> 
> 时间：2013-01-23T01:48:55.703
> 
> 标签：ios, ios6, uikit

这是原始布局： A`UIBarButtonItem`在 a 中显示自定义视图`UIToolbar`：

```
+-- main view --------------+
|                           |
|                           |
| +-- toolbar ------------+ |
| | +-- custom view ----+ | |
| | |                   | | |
| | +-------------------+ | |
| +-----------------------+ |
+---------------------------+ 
```

这是我这样做的方法：

```
UIBarButtonItem* button = [[[UIBarButtonItem alloc] initWithCustomView:self.customView] autorelease];
NSArray* items =  [NSArray arrayWithObject:button];
self.toolbar.items = items; 
```

经过一些用户交互后，我想从工具栏中删除自定义视图并将其显示在其他位置，在本示例中直接作为主视图的子视图：

```
+-- main view --------------+
|                           |
| +-- custom view ----+     |
| |                   |     |
| +-------------------+     |
|                           |
| +-- toolbar ------------+ |
| |                       | |
| +-----------------------+ |
+---------------------------+ 
```

我正在尝试这样做（`self`是视图控制器）：

```
self.toolbar.items = [NSArray array];
CGRect frame = self.customView.frame;
frame.origin.x = 10;
frame.origin.y = 10;
self.customView.frame = frame;
[self.view addSubview:self.customView]; 
```

这不起作用。由于某种原因，自定义视图在我将其移至其新的超级视图后未显示。我一定在这里做错了什么，但我不知道它是什么。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T11:20:00.437

如果您从未解决此问题，或者其他人遇到同样的问题，我想我发现了问题所在。

我将 Xamarin iOS 与 C# 一起使用，但问题似乎是相同的：将自定义 UIView 添加到 UIBarButtonItem.CustomView 后，无法通过将 UIView 添加到另一个 UIView 或 UIBarButtonItem 来重用它。

我为解决这个问题所做的设置是：

```
button.CustomView = null;
button = null; 
```

我想Objective C等价物是这样的：

```
button.customView = null;
button = null; 
```

然后我终于能够使用 AddSubview() 将我的 CustomView 添加到另一个 UIView。

似乎一旦您使用 CustomView 创建了 UIBarButtonItem，CustomView 就会绑定到该 UIBarButtonItem 实例。因此，将 UIBarButtonItem 实例保存在类变量中很重要，这样您就不会丢失对它的引用。

无论如何，这就是它在我的 Xamarin/C# 环境中的工作方式。希望它可以帮助别人。

# rest - REST 消息的行话是什么（即请求正文和响应正文）

> ID：14471193
> 
> 赞同：3
> 
> 时间：2013-01-23T01:49:29.217
> 
> 标签：rest, terminology

我知道这可能是一个愚蠢的问题，但我知道在 REST 用语中点击的 REST url 被称为“*资源*”。

我的问题是应该如何称呼响应/请求机构。他们应该被称为国家吗？

媒体类型不可能是正确的，因为那是格式（即 XML 或 JSON）。也许是“国家”？

现在我一直在使用“消息”这个词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T02:51:47.510

正确的术语是“表示”。它们是 URI 引用的实际资源的时间快照。

REST 代表“Representational State Transfer”，所以答案就是名字。REST 是关于围绕系统传输表示的一种方式，即可以在服务器端的真实资源上完成工作。表示的编码由用于内容协商的媒体类型决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:20:25.373

我认为“资源”是请求/响应主体的正确术语。URI 是这些资源的标识符。

看看这个博客条目：[http](http://blog.dhananjaynene.com/2009/06/why-rest/) ://blog.dhananjaynene.com/2009/06/why-rest/ 。这是我见过的对 REST 最好的解释之一。在其中，作者明确指出这些实体通常称为资源。

# php - 使用 .htaccess 在 Wordpress 中重写单页 url

> ID：14471195
> 
> 赞同：1
> 
> 时间：2013-01-23T01:49:35.720
> 
> 标签：php, wordpress, .htaccess, url, redirect

我在 Wordpress 中有一个页面，它是父页面的子页面。它的网址就这样出现了：

```
www.domain.com/parent/subpage/ 
```

父页面还有大约五个其他子页面。但是，对于一个特定的子页面，我想更改 URL 以显示在根目录下，如下所示：

```
www.domain.com/subpage/ 
```

有没有办法用`.htaccess`或插件来做到这一点？我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:45:19.250

您可以仅使用重定向此单个页面

```
Redirect /parent/subpage/ http://www.domain.com/subpage/ 
```

有关详细信息，请参阅[重定向指令](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect)。

# c - C中的void *怪异

> ID：14471197
> 
> 赞同：0
> 
> 时间：2013-01-23T01:49:57.973
> 
> 标签：c, pointers, void-pointers

我正在研究使用 void 指针接受任意数据类型参数的函数。这样的功能如下：

```
void funct(void *a) {
    float *p = a;
    printf("number = %f\n",*p);
} 
```

这是对 的成功调用`funct`：

```
float x = 1.0f;
funct(&x); 
```

`x`被声明为浮点数，然后将其指针（即`&x`类型`float*`为 ）传递给`funct`; 很简单！

然而，还有另一种方法可以在 C 中声明一个变量并获取它的指针。这是：

```
float *p;
*p = 1.0f; 
```

但随后调用`funct(&x);`返回一个`Segmentation fault: 11`！这怎么可能？

此外，假设我想创建一个接受“数字”（即浮点数、整数、双精度、浮点数或其他任何值（例如，甚至 u_short））并在其上加 1 的方法。最通用的实现可能是什么？我应该考虑以下原型：

```
void add_one(void* x); 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T01:52:39.813

```
float *p = 1; 
```

是无效的; 您的编译器至少应该发出警告。它尝试`float*`使用整数表达式（类型`int`、值）初始化指针变量（类型`1`）。

`int`标准 C 中没有从to的隐式转换`float*`。

如果您的编译器警告您该行，请注意警告。如果没有，请使用您的编译器选项直到它出现，或者获得更好（更现代？）的编译器。

至于一个函数，它接受一个指向变量的指针，不管它的类型如何，都给它加 1，在 C 中真的没有办法做到这一点。可以想象，你可以编写一个函数，它接受一个`void*`指针和一个指示其类型的第二个参数，然后使用`switch`函数中的语句来决定要执行的转换。但是写起来要容易得多

```
x ++; 
```

针对您更新的问题：

```
float *p; 
```

这是有效的；它定义`p`为指向`float`.

```
*p = 1.0f; 
```

编译器可能不会抱怨这一点，但由于您没有为 赋值`p`，它可能没有指向有效对象。`*p = 1.0f;`具有未定义的行为。如果你幸运的话，你的程序会崩溃；如果你*不走运*，它似乎会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:06:13.443

首先，我必须说清楚一点。`float *p`和`float* p`是等价的陈述。如果你是 C 的初学者，我建议你写后者而不是前者，因为这样可以更清楚地说明类型是什么，变量是什么——它会在以后为你省去很多困惑。考虑到这一点，请记住，在下面的块`p`中，not`*p`是变量。

```
float* p;
*p = 1.0f; 
```

第一行在`float*`堆栈上分配 a 。就像在堆栈上分配的所有变量一样，它的初始值是*未定义*的（很可能是垃圾）。这不是指针独有的：即使你分配了一个`int`并且你没有初始化它，它也会有一个未定义的值。

也会发生同样的情况`p`，因此您`p`最初应该将其视为包含随机数据。如果`p`包含随机数据并且它是一个指针，则意味着它*指向*一个随机地址。尝试（在第二行中）将值`1.0f`（或其他任何内容）写入该随机地址几乎总是会导致分段错误，因为在任何给定时间随机地址属于您的程序的可能性很小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T02:01:10.360

在`float *p`中，p 是一个指向浮点数的指针。`*p = 1.0`如果不先让指针 p 指向某个东西，你就不能说。例如，

```
float *p = new float;
*p = 1.0f; 
```

那可能行得通。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T01:57:03.710

通过声明

```
float *p; 
```

p 应该是保存有效浮点变量地址的指针。在这里，您只是为 p 分配一个数字。

```
*p = 1.0f; 
```

这将导致未定义的行为。因为 p 不包含任何有效地址，而您只是试图取消引用它。

# php - 发布的变量未发送到 Db - Codeigniter

> ID：14471198
> 
> 赞同：1
> 
> 时间：2013-01-23T01:50:00.290
> 
> 标签：php, codeigniter, variables

我有一个`Codeigniter Form`：

```
<?php
    $attr = array('id'=>'urlSubmit','method'=>'post');
    $urlInputAttr = array('name'=>'urlInput','value'=>'yourdomain.com','maxlength'=>'50','size'=>'25');
    echo form_open('urlSubmission',$attr);
    echo form_input($urlInputAttr);
    echo form_close();
?> 
```

然后一个`controller`：

```
 $this->load->view('support/header', $urlSubmissionMeta); ## Header info 
  $this->load->view('support/toolbar'); #logo
  //
    # Determine whether domain already has been crawled.
    $this->load->model('domaincheckmodel');
        $this->domaincheckmodel->verifyduplicates(); 

    # Then Perform Scan
    $this->load->model('performscanmodel');
        $this->performscanmodel->fetchlinks(); 
```

A `model`，叫 domaincheckmodel.php：

```
 function verifyduplicates(){
        #PREPARE DATA
        $postedTLD = $_POST["urlInput"];    // Get unsanitized data
        $sql = "SELECT tld from ClientDomain WHERE tld = ?";
        $endquery = $this->db->query($sql,array($this->db->escape_str($postedTLD))); // Query db

        #CONDITION   - if #rows GT 0, load domain already exists.
        if($endquery->num_rows() > 0){
            $this->load->view('err/domainexists'); ##domain already used
            ## redir to new pagee to .. please login..
        } 

        else{ #number of rows must be 0, insert into db
            $newDomain = "INSERT INTO ClientDomain(tld) VALUES('".$this->db->escape_str($postedTLD)."')";
            $this->db->query($newDomain);

            $this->load->view('success/domainfree');
            ## please register to begin saving history of your scans, without doing so you lose results.
        } 
```

问题是当我提交表单时，`if{}`and`else{}`语句在模型中工作正常，但变量`$postedTLD`正在向 mysql 发送一个空白值。

这里有什么想法为什么要发送？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T01:52:04.453

```
$postedTLD = $_POST["urlInput"]; 
```

应该：

```
$postedTLD = $this->input->post('urlInput'); 
```

有关如何访问 POST 值的更多信息，请参阅[文档。](http://ellislab.com/codeigniter/user-guide/libraries/input.html#content)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:32:33.727

您可以使用单行代码将所有发布数据作为数组获取。

```
$postData=$this->input->post(NULL,TRUE); 
```

# android - Facebook 在 android 中的帖子检索

> ID：14471199
> 
> 赞同：0
> 
> 时间：2013-01-23T01:50:29.353
> 
> 标签：android, facebook, post, feed

我正在尝试使用下面给出的代码在我的 android 应用程序中检索 facebook 的最新帖子。但它只给了我我的分享和评论。我想获得这些以及我在我的状态上发布的消息，但它总是为空。

```
Bundle params = new Bundle();
params.putString("format", "json");
params.putString("access_token",sp.getString("access_token",null));
String url = "https://graph.facebook.com/me/feed";
String response = Util.openUrl(url, "GET", params);
JSONObject json = Util.parseJson(response);
JSONArray jsonArray = json.optJSONArray("data");

if(jsonArray != null) {
i=0;
String tempName = jsonArray.getJSONObject(i).getString("from");
String tempId = jsonArray.getJSONObject(i).getString("id");
String story = jsonArray.getJSONObject(i).getString("story");
String msg = jsonArray.getJSONObject(i).getString("message");
} 
```

在这里，如果我在我的状态上发布一些文本，那么“msg”也为空。

请提供您的建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:31:30.633

您的应用需要拥有“read_stream”权限才能访问非公开帖子。有关其他方法可能需要的其他权限，请参阅[用户 API 参考](https://developers.facebook.com/docs/reference/api/user/)的连接部分。

[您可以先使用Graph API Explorer](https://developers.facebook.com/tools/explorer)尝试您的请求。

# ruby-on-rails - 如何让 Facebook 登录与设计、omniauth 一起使用 - 无法克服控制器错误

> ID：14471200
> 
> 赞同：2
> 
> 时间：2013-01-23T01:50:29.150
> 
> 标签：ruby-on-rails, facebook, devise, callback, omniauth

我正在努力让 Facebook 与 devise 和omniauth 合作。几天来我一直试图解决这个问题，但没有成功。当我按下“Facebook 连接”按钮时，会出现登录页面。输入 FB 电子邮件和密码后，我将被重定向到带有 url 后缀“{root domain}/users/sign_in# *-* ”的页面，同时出现错误提示“translation missing: en.devise.authentications.user 。失败。” 未将用户添加到数据库中。我已经有一段时间了，到目前为止它非常令人沮丧。我的路线如下：

路线.rb

```
new_user_session GET    /users/sign_in(.:format)    sessions#new

user_session POST       /users/sign_in(.:format)    sessions#create

destroy_user_session DELETE /users/sign_out(.:format) sessions#destroy

user_omniauth_authorize /users/auth/:provider(.:format) authentications#passthru {:provider=>/facebook/}

user_omniauth_callback  /users/auth/:action/callback(.:format)  authentications#(?-mix:facebook) 
```

在 devise.rb 我有：

```
config.omniauth :facebook, Facebook::APP_ID.to_s, Facebook::SECRET.to_s
require 'devise/orm/active_record'
config.authentication_keys = [ :email ]
config.http_authenticatable = false
config.http_authenticatable_on_xhr = false
config.navigational_formats = [:js, :html, :json]
config.token_authentication_key = :auth_token
config.sign_out_via = :delete 
```

配置初始化程序omniauth.rb

```
if Rails.env == 'development' || Rails.env == 'test'
  Rails.application.config.middleware.use OmniAuth::Builder do
    provider :facebook, 'XXXXXX', 'XXXXXXXXXXXXX'
  end
else
  # Production
  Rails.application.config.middleware.use OmniAuth::Builder do
    provider :facebook, 'PRODUCTION_APP_ID', 'PRODUCTION_APP_SECRET'
  end
end 
```

在 users.rb 我有：

```
 def self.find_for_facebook_oauth(access_token, signed_in_resource=nil)
        data = access_token.extra.raw_info
        if user = User.where(:email => data.email).first
            if user.facebook_id.nil?
                    user.facebook_id = data.id
                    user.save
            end
        user
        else # Create a user with a stub password. 
            token = Devise.friendly_token[0,20]
        User.create!(:email => data.email, :name=>data.name, :facebook_id=>data.id, :password => token, :password_confirmation=> token)
      end
    end

    def self.new_with_session(params, session)
       super.tap do |user|
         if data = session["devise.facebook_data"] && session["devise.facebook_data"]["extra"]["raw_info"]
             user.name = data["name"]
             user.email = data["email"]
             user.facebook_id = session["devise.facebook_data"]["extra"]["raw_info"]['id']
         end
       end
    end 
```

在身份验证控制器中（从omniauth 回调控制器派生）

```
class AuthenticationsController < Devise::OmniauthCallbacksController
  def facebook
    # You need to implement the method below in your model
    @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

    if @user.persisted?
      flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
      sign_in_and_redirect @user, :event => :authentication
    else
      session["devise.facebook_data"] = request.env["omniauth.auth"]
      flash[:notice] = "Please register an account first!"
      redirect_to "/"
    end
  end
end 
```

在开发日志中，有：

2013 年 1 月 22 日 20:09:28 -0500 开始为 127.0.0.1 获取“/users/auth/facebook”

```
Started GET "/users/auth/facebook/callback? state=blah&code=blah" for 127.0.0.1 at     
2013-01-22 20:09:29 -0500
Processing by AuthenticationsController#failure as HTML
Parameters: {"state"=>"blah", "code"=>"blah"}
Redirected to http://myapp.com/users/sign_in
Completed 302 Found in 2ms (ActiveRecord: 0.0ms) 
```

在 Facebook 应用程序设置页面上，我有：

应用程序域：（空）

网站网址：http://myapp.com/users/auth/facebook/callback?

并启用沙盒模式。在这方面我将不胜感激。我已经尝试了所有可能的方法并检查了许多站点，但我遇到了障碍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:55:39.443

关于您的即时错误消息（通过网络搜索“en.devise.authentications”部分找到）存在设计[问题。](https://github.com/plataformatec/devise/issues/2002)

Rails Internationalization (I18n) API 指南[描述](http://guides.rubyonrails.org/i18n.html#configure-the-i18n-module)了翻译加载路径。

显然，这里 Devise 的 lib/en.yml 没有提供 Devise 需要的英文字符串，但是你可以自己提供。

您尚未向我们提供 config/locales/en.yml 文件的内容，但您可以在此处添加：

```
en:
  devise:
    authentications:
      user:
        failure: User authentication failure 
```

您可以将失败消息更改为您想要的任何内容。

有关通用 i18n YAML 格式的信息，请参阅此[示例](http://guides.rubyonrails.org/i18n.html#adding-date-time-formats)。

那应该回答您的问题并解决您的即时错误消息。

# .net - 使 .NET DLL 对 COM 可见的最简单方法？

> ID：14471201
> 
> 赞同：1
> 
> 时间：2013-01-23T01:50:44.900
> 
> 标签：.net, dll, wrapper, com-interop, regasm

我有一个专有的`.NET`DLL，我想在`COM`客户端中使用它。

目前，当我使用`regasm`它时说：`warning RA0000 : No types were registered`

由于我没有源代码，因此无法将类设置为`ComVisible`或其他任何需要。

我怎样才能**轻松地**使这个 DLL 对 DLL 可见`COM`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:01:18.737

您需要编写一个“COM 可调用包装器”。这里有几个链接：

[http://msdn.microsoft.com/en-us/library/ms973802.aspx](http://msdn.microsoft.com/en-us/library/ms973802.aspx)

[http://msdn.microsoft.com/en-us/library/f07c8z1c.aspx](http://msdn.microsoft.com/en-us/library/f07c8z1c.aspx)

[http://edn.embarcadero.com/article/32754](http://edn.embarcadero.com/article/32754)

其中一些已经很老了，但我想这些原则保持不变。

编辑：似乎有人写了一个通用的包装器：

[http://www.codeproject.com/Articles/113720/Universal-COM-Callable-Wrapper](http://www.codeproject.com/Articles/113720/Universal-COM-Callable-Wrapper)

# memcached - Memcached 一致性哈希 - spymemcached

> ID：14471207
> 
> 赞同：1
> 
> 时间：2013-01-23T01:51:05.873
> 
> 标签：memcached, spymemcached, consistent-hashing

我想启用 memcached 一致性哈希。我看过 phpinfo(); 我可以看到以下内容 - 最后一行“memcached.sess_consistent_hash”：

```
memcached

memcached support   enabled
Version 2.1.0
libmemcached version    1.0.4
Session support yes
igbinary support    no
json support    no

Directive   Local Value Master Value
memcached.sess_consistent_hash  0   0 
```

是否应该将其设置为 1 以启用一致的散列，或者我是否会朝着错误的方向前进？我正在使用 spymemcached。有不同的方法可以做到这一点吗？

谢谢你

** 另外我该如何启用它 - 我在 php.ini 中找不到条目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T19:16:23.803

SpyMemcached 是一个 Java 库，所以我不确定你是如何与 PHP 集成的，但你可以像这样在 SpyMemcached 中打开一致性哈希：

```
ConnectionFactory connFactory = new ConnectionFactoryBuilder()
        .setLocatorType(Locator.CONSISTENT).build();
MemcachedClient client = 
        new MemcachedClient(connFactory, AddrUtil.getAddresses(serverString)); 
```

# java - 链表：数据类型不匹配

> ID：14471208
> 
> 赞同：2
> 
> 时间：2013-01-23T01:51:07.403
> 
> 标签：java, linked-list

我知道我的代码的问题是（应该）愚蠢的。但会感谢所有帮助。

![在此处输入图像描述](../Images/a2ae5bc4565a986915c87f3d9a3263dc.png)

```
public void transferFrom(LinkedIntList list2) {

   // Point to first node of list1
   ListNode current = front;

   // Move to the last node of list1
   while(current != null) {
      current = current.next;
   }

   // Last node of list1 -> firs node of list2
   current.next = list2;

   list2 = null;

} 
```

问题线是`current.next = list2;`。数据类型不匹配，因为`current.next`is`ListNode`和`list2`is `LinkedIntList`。

如果我宁愿使用`current.next = list2;`，我会得到`NullPointerException`这条线。

我应该做什么？

**编辑**：固定！

```
public void transferFrom(LinkedIntList list2) {

   // Point to first node of list1
   ListNode current = front;

   // Move to the last node of list1
   while(current != null && current.next != null) {
      current = current.next;
   }

   // Last node of list1 -> first node of list2
    if(front == null) {
        front = list2.front;
    } else {
        current.next = list2.front;
   }

   list2.front = null;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:55:22.230

您想在 current.next 不等于 null 时向下移动列表。否则，您从列表“跳”到空指针上。

例如...

```
while(current.next != null){

 current = current.next

} 
```

一旦下一个节点为空，循环将退出并`current`等于列表中的最后一个节点。

因此，这将使您到达列表一的最后一个元素。然后只需将列表 2 的所有元素附加到列表 1 的末尾（提示：当前应该指向列表 2 的第一个元素）

**编辑**

正如 Ted Hopp 下面所述，您提供的有关特定链表实现的信息有点参差不齐，所以我将解释一个一般情况。

您应该将 current 分配为等于您当前在存储中拥有的节点。这可能应该从列表中的第一个节点开始。在您上面的示例中，您似乎正在这样做，但我不知道您`front`来自哪里。它的价值在哪里？它在哪里声明？我猜你的前面是空的，可能是因为你错误地将它指向了前面的节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:55:32.767

如果您发布了 and 的类定义`LinkedIntList`，`ListNode`并且告诉我们这个方法实际上应该做什么，那将会有所帮助。但是我假设 a`LilnkedIntList`包含一个`ListNode front`成员，并且您正在尝试将内容附加到`list2`to `this`（这是另一个`LinkedIntList`）。您的麻烦线可能应该是：

```
current.next = list2.front; 
```

但是，您还有另一个问题：您的`while`循环保证以 退出`current == null`，这根本不是您想要的。循环条件应该是`(current.next != null)`，不是`(current != null)`。

最后，如果你想清空`list2`，方法是`list2.front = null;`。在方法内部赋值`list2`什么都不做。

这是包含我所有建议的代码版本：

```
public void transferFrom(LinkedIntList list2) {

   if (front == null) {
       front = list2.front;
   } else {
       // Point to first node of list1
       ListNode current = front;

       // Move to the last node of list1
       while(current.next != null) {
          current = current.next;
       }

       // Last node of list1 -> firs node of list2
       current.next = list2;
   }

   // empty out list2
   list2.front = null;

} 
```

# python - 为什么 python 的 urllib2.urlopen 给我一个 403 错误？

> ID：14471212
> 
> 赞同：1
> 
> 时间：2013-01-23T01:51:34.410
> 
> 标签：python, urllib2, urllib, http-status-code-403, python-2.5

> **可能重复：**
> [Python 的 urllib2 在某些站点上不起作用](https://stackoverflow.com/questions/2572266/pythons-urllib2-doesnt-work-on-some-sites)

好的，我只想使用 python 访问这个 URL：[http ://www.gocomics.com/wizardofid/2013/01/22](http://www.gocomics.com/wizardofid/2013/01/22)

但是，每当我调用 urllib2.urlopen(' [http://www.gocomics.com/wizardofid/2013/01/22](http://www.gocomics.com/wizardofid/2013/01/22) ').read() 时，都会出现 403 错误。使用 urllib，我所能做的就是阅读错误页面，但 urllib2 会引发错误。当我在 Chrome 中查看该页面时，它不会给我带来任何问题。为什么会这样，我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T02:45:49.893

这个特定的网站需要一个“类似浏览器”的`User-Agent`标题，否则它将拒绝访问。

尝试添加标题，例如（例如）这样：

```
import urllib2

opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0')]
urllib2.install_opener(opener)
print urllib2.urlopen('http://gocomics.com/wizardofid/2013/01/22').read() 
```

# objective-c - isKindOfClass 行为

> ID：14471213
> 
> 赞同：7
> 
> 时间：2013-01-23T01:51:36.480
> 
> 标签：objective-c

有人可以解释为什么 isKindOfClass 根据实例的创建方式返回不同的结果吗？

```
@interface BaseClass
...

@interface DerivedClassA : BaseClass
...

DerivedClassA *instance = [[DerivedClassA alloc] init];

[instance isKindOfClass:[BaseClass class]];  // yields YES

Class c = NSClassFromString(@"DerivedClassA");
id instance = [[c alloc] init];

[instance isKindOfClass:[BaseClass class]];  // yields NO 
```

我可以从调试器中的两种类型中收集到的所有其他内容都是相同的。我什至可以比较 NSStringFromClass([instance superclass]) 的两个结果，它们是相等的。

我一定错过了一些简单的东西。

**更新代码**

这是单元测试代码。

```
LightingUnit *u1 = [[LightingUnit alloc] init];

STAssertTrue([u1 isKindOfClass:[ModelBase class]], @"should be derived from base");

Class uc = NSClassFromString(@"LightingUnit");
id u2 = [[uc alloc] init];

STAssertTrue([u2 isKindOfClass:[ModelBase class]], @"should be derived from base"); 
```

这是类定义。

```
@interface ModelBase : NSObject

@property (readonly) NSString *__type;

- (id)initWithDictionary:(NSDictionary *)dictionary;

- (NSMutableDictionary *)dictionary;

@end

@interface LightingUnit : ModelBase

@property (strong, nonatomic) NSString *name;
@property NSInteger unitId;

@end 
```

**可能的答案**

当我在测试环境之外运行这个逻辑时，它的工作没有问题。显然，唯一的区别是删除 STAssertTrue 语句并用我的条件替换它们。在这种情况下，它们都返回 YES。我什至尝试创建一个简化的示例（基础或派生中没有 ivars），它在测试中失败，但在标准运行时工作。

任何想法为什么这可能只是测试时的一个问题？我的测试目标是否遗漏了什么？

**解决了**

我已将 .m 文件包含在测试目标编译源中。删除后，它开始按预期运行。感谢[这篇文章](https://stackoverflow.com/questions/5364074/iskindofclass-and-nsstringfromclass-disagree-about-uiapplicationdelegate)帮助我解决了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:45:16.587

是否`BaseClass`继承自`NSObject`将改变此代码的结果。以下是两种可能性：

* * *

```
@interface BaseClass 
```

如果您在`BaseClass` *没有*继承自的情况下进行了定义`NSObject`，那么坦率地说，我很惊讶编译器让您摆脱了设置`instance`变量的束缚。除非您定义了自己的`+alloc`和`-init`方法`BaseClass`（这是可能的），否则测试的第一行将根本不起作用。如果您确实定义了适当的`+alloc`方法`-init`，您仍然会遇到麻烦，`-isKindOfClass:`因为您还需要自己定义它。所以基本上这行不通，让我们看看下一个选项......

* * *

```
@interface BaseClass : NSObject 
```

测试的第一行（创建`instance`）应该可以正常工作。

`[instance isKindOfClass:[BaseClass class]]`返回适当的值，`YES`。

您的`class c`初始化应该可以正常工作。

我怀疑这里省略了一些东西，因为最后一行应该返回`YES`您发布的代码（假设`BaseClass`继承自`NSObject`）......最后一行应该返回`YES`。我怀疑可能发生的事情是通过不正确的初始化/错字/等`instance`以某种方式结束。`nil`在这种情况下，向它发送消息只会返回`nil`，因此发送`-isKindOfClass`将产生`NO`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T02:30:51.013

我在我的测试应用程序中添加了您的代码。我不得不更改这两个`instance`变量的名称，之后编译器给了我一个警告（“找不到类方法'+alloc'”），当我运行它时程序崩溃了。

然后我改变了这一行：

```
@interface BaseClass : NSObject 
```

即我`BaseClass`从`NSObject`. 不再有编译器警告，代码按预期运行，即第二个`isKindOfClass`返回 YES。

我不知道丢失`NSObject`是否是导致您的问题的原因。如果不是，那么其他人必须介入。如果是，我想知道您是如何运行您的代码的。

# c++ - C++11：如何获取指针或迭代器指向的类型？

> ID：14471224
> 
> 赞同：19
> 
> 时间：2013-01-23T01:52:24.080
> 
> 标签：c++, templates, c++11

更具体地说，假设我正在写作`template<class Pointer> class Foo`，并且我想`typedef`在类中声明一个`*p`如果是 type 则将具有`p`的类型`Pointer`。

据我所知，在 C++03 中，唯一的方法是使用类似

```
typename std::iterator_traits<Pointer>::reference 
```

`Pointer`这种方法的缺点是，如果是一些自定义迭代器类型并且作者忘记扩展`std::iterator`或以其他方式定义`std::iterator_traits`专门化，它将不起作用。

在 C++11 中，我的同事建议

```
decltype(*Pointer()) 
```

但是，如果不是默认可构造的，这将不起作用`Pointer`，因此他将其修改为

```
decltype(**(Pointer*)0) 
```

我试过这个，它奏效了，但后来我认为它看起来有点不确定，因为它涉及空指针的取消引用，因此可能不符合标准。

我们能做得更好吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-23T01:56:49.983

您对取消引用空指针保持谨慎是正确的，但事实是这里没问题！`decltype`不评估其操作数，因此在内部取消引用空指针是完全有效的。

然而，正确的解决方案是在 C++11 中`std::declval`引入：`<utility>`

```
decltype(*std::declval<Pointer>()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T02:59:31.457

在 C++03 中，您可以编写一个简单的构造，该构造将从给定类型中删除所有指针：

```
template<typename T>
struct ActualType { typedef T type; };
template<typename T>
struct ActualType<T*> { typedef typename ActualType<T>::type type; }; 
```

如果您通过`int*`或`int**`然后最终`ActualType<T>::type`将归结为`int`.

这是一个[演示](http://ideone.com/vIQTeV)；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T02:00:01.547

`SFINAE`使用回退到取消引用的迭代器特征。

与其取消引用 null，不如创建一个返回`std::decay<T>&`然后取消引用的模板函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-30T04:18:08.933

在 C++11 中，您可以使用[`std::pointer_type`](https://en.cppreference.com/w/cpp/types/remove_pointer)

```
using PType = std::pointer_type<Pointer>::type; 
```

# c# - 任务管理器图标选项

> ID：14471226
> 
> 赞同：2
> 
> 时间：2013-01-23T01:52:53.063
> 
> 标签：c#, windows, user-interface, jump-list

当您在 Skype 运行时右键单击任务栏中的 Skype 图标时，它在“CloseWindow”弹出窗口中有一个名为“任务”的小组，其中包含退出或退出 Skype 的选项。

![在此处输入图像描述](../Images/634db7a53e7da9840f5aa3fd4b7d1d5b.png)

我将如何在 C# 中执行此操作？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:58:15.137

您需要使用[Microsoft 的 Windows API 代码包](http://archive.msdn.microsoft.com/WindowsAPICodePack)。有关在您的案例中实现它的确切方法的示例，[本](http://msdn.microsoft.com/en-us/windows7trainingcourse_win7taskbarmanaged_topic2.aspx)教程将指导您完成所有步骤！本教程将向您展示如何快速使用 Skype 和 windows 媒体播放器。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T00:09:22.927

[我在这里](https://stackoverflow.com/questions/13478089/adding-items-to-the-taskbar-application-menu/13478161#13478161)回答了一个类似的问题：

此功能称为 JumpList，适用于 Windows 7。它是 Microsoft API 的一部分。如何在 C# 中使用它已在[此处](https://stackoverflow.com/questions/13478089/adding-items-to-the-taskbar-application-menu/13478161#13478161)和[此处](http://channel9.msdn.com/coding4fun/articles/Windows-7-Jump-Lists)详细记录。

为了能够处理 Windows 窗体中的 Jumplist 类，您必须在项目中包含这些 DLL (`Microsoft.WindowsAPICodePack.dll`和`Microsoft.WindowsAPICodePack.Shell.dll`)。您可以从此[CodeProject 项目中获取它们，也可以从](http://www.codeproject.com/Articles/103913/How-to-Create-a-Custom-Jumplist-with-Custom-Events)[WindowsAPICodePack](http://code.msdn.microsoft.com/WindowsAPICodePack)下载开源库，其中包括可用于访问 Windows 7 和 Windows Vista 功能的源代码。您需要在代码顶部添加两个使用：

```
using Microsoft.WindowsAPICodePack.Taskbar;
using Microsoft.WindowsAPICodePack.Shell; 
```

Any`Jumplist`由类别组成，每个类别都有自己`Jumptask`的 s。`Jumptask`WindowsAPICodePack目前支持两种类型的s；`JumplistLink` 和`JumplistSeperator`。_ A`Jumptask`表示用户要执行的操作，例如打开应用程序的新实例或启动另一个程序。这些`Jumptask`s 被分组到称为 的类别中`JumplistCustomCategories`。

# windows - 禁用撤消删除/移动/重命名/复制菜单

> ID：14471234
> 
> 赞同：0
> 
> 时间：2013-01-23T01:53:43.300
> 
> 标签：windows, tortoisesvn

我安装 TortoiseSVN。它将“更新”菜单项添加到右键菜单。而这个菜单项的热键是“u”。不幸的是，“撤消 XXX”菜单项的热键也是“u”。

有时我右键单击桌面或文件夹内，然后按“u”。启用此菜单项时会触发“撤消 XXX”菜单项，但我想触发“更新”菜单项。这对我来说是一个很大的不便。

如何禁用“撤消 XXX”菜单项，或更改“撤消 XXX”菜单项的热键，或修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:29:36.070

You can disable the accelerators on the context menu. It's in the [advanced settings page](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-settings.html#tsvn-dug-settings-registry). Look for `ShellMenuAccelerators`.

# mysql - 如何将百分比加起来正好是 100.00%？

> ID：14471235
> 
> 赞同：0
> 
> 时间：2013-01-23T01:53:55.420
> 
> 标签：mysql

我有一个问题，如何将百分比相加为 100.00。我尝试使用“圆形”，但结果只显示 99.93。有人知道吗？

```
SELECT Sum(percent) 
FROM   (SELECT state, 
               jantina, 
               bilmale, 
               jds, 
               jumall, 
               Round(( bilmale * 100 / ( jumall ) ), 2) PERCENT, 
               ( jds ) * 100 / ( jumall )               AS p_jdk 
        FROM   (SELECT Timestamp(X.createdate) 
                             dattime 
                       , 
                       Upper(Date_format(X.createdate, '%d %M %Y'))      AS 
                       datenegeri, 
                       X.state, 
                       Upper(CASE 
                               WHEN g.ns_fender_desc = 'male' THEN 'LELAKI' 
                               WHEN g.ns_fender_desc = 'female' THEN 'PEREMPUAN' 
                               ELSE g.ns_fender_desc 
                             END)                                        jantina 
                       , 
                       Sum(CASE 
                             WHEN X.male = 1 THEN 1 
                             WHEN X.male = 0 THEN 1 
                             ELSE 0 
                           END)                                          bilmale 
                       , 
                       (SELECT Sum(CASE 
                                     WHEN Y.male = 1 THEN 1 
                                     WHEN Y.male = 0 THEN 1 
                                     ELSE 0 
                                   END) bilmale 
                        FROM   xyuser_userext Y 
                               JOIN tnsstate TS 
                                 ON TS.ns_state_id = Y.state 
                               LEFT JOIN tnsgender g 
                                      ON g.ns_gender_id = Y.male 
                        WHERE  Y.statususerext IN ( '0', '1', '2', '5' ) 
                               AND Y.state = X.state 
                               AND Date_format(X.createdate, '%d %M %Y') = 
                                   Date_format(Y.createdate, '%d %M %Y') 
                        GROUP  BY TS.ns_state_desc, 
                                  Date_format(X.createdate, '%d %M %Y')) jds, 
                       (SELECT Sum(CASE 
                                     WHEN Y.male = 1 THEN 1 
                                     WHEN Y.male = 0 THEN 1 
                                     ELSE 0 
                                   END) bilmale 
                        FROM   xyuser_userext Y 
                               JOIN tnsstate TS 
                                 ON TS.ns_state_id = Y.state 
                               LEFT JOIN tnsgender g 
                                      ON g.ns_gender_id = Y.male 
                        WHERE  Y.statususerext IN ( '0', '1', '2', '5' ))jumall 
                FROM   xyuser_userext X 
                       JOIN tnsstate TS 
                         ON TS.ns_state_id = X.state 
                       LEFT JOIN tnsgender g 
                              ON g.ns_gender_id = X.male 
                WHERE  X.statususerext IN ( '0', '1', '2', '5' ) 
                GROUP  BY TS.ns_state_desc, 
                          Date_format(X.createdate, '%d %M %Y'), 
                          X.male 
                ORDER  BY 1 ASC) AS A) AS b 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:39:03.767

如果只对结果而不是单个项目进行四舍五入，它会更准确。尝试`SELECT Round(Sum(percent), 2)`在 WHERE 子句的百分比计算中使用并删除 Round。

# java - 如何在字符串检索时修复空指针异常 - 哈希表

> ID：14471249
> 
> 赞同：0
> 
> 时间：2013-01-23T01:55:36.840
> 
> 标签：java, hash

```
class Item
{
    private int address;
    private String itemString;

    public Item(String item)
    {
        separate(item);
    }

    public void separate(String string)
    {
        StringTokenizer st = new StringTokenizer(string);
        itemString = st.nextToken();
        if(st.hasMoreTokens())
        {
            address = Integer.parseInt(st.nextToken());
        }
        else
        {
            address = -1;
        }
    }

    public String getKey()
    {
        return itemString;
    }

    public int getAddress()
    {
        return address;
    }

    public void illegitimize()
    {
        itemString = "*del";
        address = -1;
    }
}

class HashTable
{
    private Item[] hashArray;
    private int arraySize;

    public HashTable(int size)
    {
       arraySize = size;
       hashArray = new Item[arraySize];
    }

    public int hash(Item item)
    {
        String key = item.getKey();

        int hashVal = 0;
        for(int i=0; i<key.length(); i++)
        {
            int letter = key.charAt(i) - 96;
            hashVal = (hashVal * 26 + letter) % arraySize;
        }

        return hashVal;
    }

    public void insert(Item item)
    {
        int hashVal = hash(item);

        while(hashArray[hashVal] != null && 
                !(hashArray[hashVal].getKey().contains("*")))
        {
            hashVal++;
            hashVal %= arraySize;
        }

          String keyAtHashVal = hashArray[hashVal].getKey();
          String itemKey = item.getKey();

        if(!keyAtHashVal.equals(itemKey))
        {
            hashArray[hashVal] = item;
            System.out.println(item.getKey() + " inserted into the table at "
                    + "position " + hashVal);
        }
        else
        {
            System.out.println("Error: " + item.getKey() + " already exists "
                    + "at location " + hashVal);
        }
    }

    public Item find(Item item)
    {
        int hashVal = hash(item);

        while(hashArray[hashVal] != null)
        {
            if(hashArray[hashVal].getKey().equals(item.getKey()))
            {
                System.out.println(item.getKey() + " found at location "
                        + hashVal + " with address " + item.getAddress());
                return hashArray[hashVal];
            }

            hashVal++;
            hashVal %= arraySize;
        }

        System.out.println("Error: " + item.getKey() + " not found in the "
                + "table");
        return null;
    }

}

public class HashTableMain
{
    public static void main(String[] args) throws Exception
    {
        File file = new File(args[0]);
        Scanner input = new Scanner(file);

        Item currentItem;
        String currentItemsKey;
        int currentItemsAddress;

        HashTable table = new HashTable(50);

        while(input.hasNextLine())
        {
            currentItem = new Item(input.nextLine());
            currentItemsKey = currentItem.getKey();
            currentItemsAddress = currentItem.getAddress();

            if(currentItemsAddress > 0)
            {
                table.insert(currentItem);
            }
            else
            {
                table.find(currentItem);
            }
        }
    }
} 
```

标题几乎解释了它。当 insert() 方法尝试检索我从文件中提供的第一个项目的键时，我得到一个空指针。我认为这与我检索存储字符串的方式有关，但我无法确定问题所在。

文件中的记录将采用以下格式：
george
stacy 112
patrick 234
angelo 455
money 556
kim
chloe 223

如果行中有一个数字，我需要将项目散列到适当位置的数组中。如果没有数字，我需要搜索键（每行开头的字符串）。

编辑：添加查找功能。我遗漏了任何我认为你不需要帮助我的东西。如果您还需要什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:08:35.157

```
String keyAtHashVal = hashArray[hashVal].getKey(); 
```

问题是它`hashArray[hashVal]`总是为空，因为您在前面的语句中探测空空间。我怀疑它应该在`while()`循环内移动并在那里使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:19:57.290

问题似乎在

```
String keyAtHashVal = hashArray[hashVal].getKey(); 
```

在`HashTable.insert()`. 您的 hashArray[hashVal] 可能没有导致空指针的对象。你可以做一个空检查。

```
Item existingItem =  hashArray[hashVal];
if(existingItem==null) {
 //do appropriate code
} else {
 //do your stuff
} 
```

顺便说一句，StringTokenizer 已被弃用，仅出于兼容性目的。您可以使用 String.split() 方法。另外，如果您不知道，可以使用 HashMap 而不是 HashTable

# php - 以单词为运算符的 PHP 计算器

> ID：14471251
> 
> 赞同：0
> 
> 时间：2013-01-23T01:55:48.643
> 
> 标签：php, jquery, class

我一直在解决 PHP 脚本。

我想根据一组指令计算结果。指令由关键字和数字组成，每行用空格分隔。从文件加载指令并将结果输出到屏幕。可以指定任意数量的指令。指令是运算符（加、除、减、乘）。指令将忽略数学优先级。最后一条指令应该是“apply”和一个数字（例如“apply 3”）。然后使用该数字初始化计算器，并将前面的指令应用于该数字。

```
[Input]
add 2
multiply 3
apply 3
[Output]
15 
```

[解释] (3 + 2) * 3 = 15

例子

```
[Input]
multiply 9
apply 5
[Output]
45 
```

任何人都可以帮助一些示例逻辑或代码吗？

这是我到目前为止所尝试的：

```
class calculator {

    public
    function calculate($expression) {
        $expression = str_replace(' ', '', $expression);
        return $this - > exec($expression);
    }
    private
    function exec($expression) {

        switch ($expression['op']) {
            case 'add':
                $r = $expression[0] + $expression[1];
                break;
            case 'subtract':
                $r = $expression[0] - $expression[1];
                break;
            case 'multiply':
                $r = $expression[0] * $expression[1];
                break;
            case 'divide':
                $r = $expression[0] / $expression[1];
                break;

        }
        return $r;
    }

    private
    function parseExpression($expression) {

        $blankspace = preg_match('/\s/', $expression);

        $counter = count($expression);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:05:25.970

我会这样：

```
class Calculator {
    public $result = 0;
    public $queue = Array();
    public parseString($text) {
       // parse input string
       $cmds = explode(" ", $text);
       foreach($cmds as $cmd) {
          $cmd = trim($cmd);
          if(!$cmd) continue; // blank or space, ignoring
          $this->queue[] = $cmd;
       }

       // lets process commands
       $command = false;
       foreach($this->queue as $index => $cmd) { 
           if(is_number($cmd)) {
               // if it's number fire previous command if exists
               if(!$command || !method_exists($this, $command)) {
                   throw new Exception("Unknown command $command");
               }
               $this->$command($index, $cmd);
           }else{
               $command = $cmd;
           }
       }
    }
    public function apply($index, $number) {
       // manipulate $result, $queue, $number
    }
    public function add($index, $number) {
       // manipulate $result, $queue, $number
    }
    public function substract($index, $number) {
       // manipulate $result, $queue, $number
    }
}

$calculator = new Calculator();
$calculator->parseString('...'); 
```

这只是你如何做到这一点的例子，但这是你的工作:)

您需要添加一些方法，例如,`clearQueue`等...`clearResult``setResult`

# timezone - 提取 Iphone 用户的当前时间、日期、时区

> ID：14471253
> 
> 赞同：0
> 
> 时间：2013-01-23T01:56:08.523
> 
> 标签：timezone, timestamp, nsdateformatter

我想用 Xcode 以这种格式提取 Iphone 的当前时间：日期格式为 YYYY-MM-DD，时间格式为 HH:MM:SSSS 和时区 +0000，这个人在哪里。

谢谢

里吉斯

# php - 在 apache 中覆盖 404 页面时的 404 处理

> ID：14471258
> 
> 赞同：0
> 
> 时间：2013-01-23T01:56:32.673
> 
> 标签：php, javascript, apache, http-status-code-404

我正在一个网站上工作，我已将 apache 配置为通过以下方式将*404*页面指向`index.php`：

```
"ErrorDocument 404 /index.php" 
```

所以我可以手动解析 url 参数。我目前正在编写一个图像包装器，所以如果你去例如

```
"myssite.com/image/test" 
```

它将显示一个测试图像，其中*php*标头设置为 image/jpeg，以掩盖图像在服务器上的物理位置，因为图像稍后将由数据库管理。*当我通过php*显示此图像时，如下所示：

```
"echo '<img src="/image/test" alt="some_text">';" 
```

它显示正确。如果同样的事情是用 javascript 完成并插入到页面上，它会收到 404 错误并且不会加载图像。

我想我要么`apache`根本不需要报告**404**，要么以某种方式改变 javascript 处理它的方式。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:37:49.787

请将您的页面与其他 php 脚本连接以了解标头响应

> ```
> $ch = curl_init('http://myssite.com/image/test'); 
> curl_setopt($ch, CURLOPT_HEADER, 1); 
> curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
> $data = curl_exec($ch);
> echo $data; 
> ```

确保它给出200 ok；

如果它给出 404 可能是标题的问题。

所以你必须使用 htaccess 重定向到你的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:11:09.847

通过将以下内容添加到 httpd.conf 来修复 404 错误：

```
<Directory "/var/www">
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php [L]

</Directory> 
```

尽管这对不显示图像没有帮助，但这使我更仔细地查看了显示图像的功能。当我在显示图像之前使用裁剪脚本时出现问题，这很可能导致标题出现问题。这应该需要我对后端进行较小的更改。

感谢大家的帮助。

# algorithm - 克里普克结构

> ID：14471262
> 
> 赞同：3
> 
> 时间：2013-01-23T01:57:05.470
> 
> 标签：algorithm, logic, automata, temporal, model-checking

什么是用于检查 Kripke 结构上的不变量的（伪代码）算法，以便在违反不变量的情况下，算法返回的反例具有最小长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:38:28.053

您没有在问题中提供足够的详细信息，但如果我不得不猜测，我会说您正在寻找[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)。

# iphone - 是否可以在特定人群中分发 iphone 应用程序？

> ID：14471263
> 
> 赞同：-2
> 
> 时间：2013-01-23T01:57:21.507
> 
> 标签：iphone, ios, app-store, ipa

我需要在我认识的 50 个人中分发我的 iphone 应用程序。我希望他们并且只有他们才能使用它。是否可以在 AppStore 之外分发 iphone 应用程序？我知道我可以为越狱手机生成一个 .ipa，但这些手机没有越狱。这有解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T02:01:29.083

我相信基本上存在三种不同的官方[iPhone/iPad 应用程序分发方法](https://developer.apple.com/programs/ios/distribute.html)：

**- 应用商店**

使用这种方法，任何拥有 iPhone 的人都可以访问该应用程序。您可以像这样分发无限数量的应用程序。苹果获得 30% 的提成。当然，Apple 必须批准您的申请。

**- 特别指定**

您可以使用 ad hoc 分发应用程序，而无需通过应用商店，但您最多只能使用 100 台设备。使用这种方法，您可以从网站、电子邮件等分发您的应用程序。

**- 企业**

该方法适用于员工人数超过 500 人的公司的内部分配。Apple 没有提供我可以找到的有关此方法的任何更多公开细节。

听起来这些方法中的任何一种都不符合您的标准，除非您的客户少于 100 个并且不打算超过该数量。这听起来像是您的客户不是您公司内部的问题。

我建议联系苹果。他们也许能够制定出某种定制分销协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:00:27.747

有一种非常方便的方法可以最多容纳 100 人。本质上，您可以通过 Apple 的开发人员网站将您的人员设备的 UDID 添加到 AdHoc 分发配置文件中。

此外，请查看[http://www.testflightapp.com](http://www.testflightapp.com)以非常方便地分发此类 IPA。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T02:07:08.453

您可以对多达 100 个用户进行临时分发。我不记得配置文件持续了多长时间，但我认为它是 90 天或类似的时间。您必须每 90 天（或其他任何时间）更新配置文件并将其分发给所有用户。

如果您将应用程序的一个版本分发给 50 人，然后删除其中 25 人并尝试为下一个版本再添加 75 人，即使您认为您只有 100 个用户，但实际上有 125 个用户。删除的 UDID 仍然计数反对您的 100 个用户限制。您可以每年重置一次 100 个用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T04:29:56.613

如果没有开发人员许可证和有效的配置文件，您的应用将无法安装在任何设备上（即未越狱）。创建配置文件后，必须将其安装在希望使用该应用程序的所有设备上。例外情况是使用企业代码签名身份，它不需要配置设备并且对内部分发很有用。在任何情况下，如果您想在模拟器上工作以外的任何事情，您都需要一个开发者帐户。

# ubuntu-12.04 - 在 Veewee 脚本中更改 shell

> ID：14471270
> 
> 赞同：0
> 
> 时间：2013-01-23T01:58:38.180
> 
> 标签：ubuntu-12.04, vagrant, veewee

我正在使用 Veewee (ubuntu 12.04) 构建我的第一个 Vagrant 盒子，并且在大约 95% 的过程中，我遇到了一些问题。我有一个自定义的安装后脚本，在 之后调用`postinstall.sh`，它构建了我喜欢的用户环境。它...

*   安装 curl、zsh 和 git
*   安装 oh-my-zsh
*   编写自定义主题文件
*   编写自定义 .zshrc 文件

所有这一切似乎都很好，但下一个合乎逻辑的步骤是更改我的外壳，以便在我`vagrant ssh`第一次时一切准备就绪，但我被卡住了。该脚本的最后一行是`chsh -s /usr/bin/zsh`，但不需要。难道我做错了什么？还有另一种从脚本更改外壳的方法吗？我想我可以`/etc/passwd`用 sed 更新，但是……呃。如果它可以以比这更清洁的方式完成，那就太好了。

此外，在尝试解决此问题时，我发现了另一个可能的问题。我没有无密码的 sudo 访问权限。在打包的`postinstall.sh`脚本中，我看到它正在运行以实现这一点，但至少在 12.04 中，`/etc/sudoers`它是只读的，这可能会阻止进行更改。

其他人注意到这些事情了吗？关于如何解决它们的任何提示？我的搜索一无所获。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T11:48:55.400

这在使用 Vagrant（又名“precise32”）安装 Ubuntu 12.04.3 时对我有用：因为默认的 vagrant 密码只是“vagrant”：

```
echo "vagrant" | chsh -s /bin/zsh 
```

# linux - 是否可以使用 Eclipse 调试 mex 代码？

> ID：14471276
> 
> 赞同：17
> 
> 时间：2013-01-23T01:59:16.827
> 
> 标签：linux, eclipse, matlab, debugging, mex

我正在尝试编写一些 mex 代码，但在控制台上使用 gbd 调试它很痛苦。是否可以使用 Eclipse 或 Matlab 的 GUI？如果这些方法不可行，那么编写提供良好调试功能的 mex 代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T14:21:45.677

在 gdb 中调试 C/C++ MEX 文件已经在[官方文档](http://www.mathworks.com/help/matlab/matlab_external/debugging-c-c-language-mex-files.html)中进行了全面介绍，因此我的建议是尝试将 gdb 与 Eclipse CDT 集成。

那里有很多关于如何正确执行的信息，所以我不会在这里重复所有内容。我知道的最好的教程是 IBM 的两部分指南，*“与 CDT 调试器接口”*：

1.  [*第 1 部分：了解 C/C++ 调试器接口*](http://www.ibm.com/developerworks/library/os-eclipse-cdt-debug1/index.html)- 涵盖高级基础知识。
2.  [*第 2 部分：使用 Eclipse CDT 和 MI 访问 gdb*](http://www.ibm.com/developerworks/library/os-eclipse-cdt-debug2/index.html) - 解释了如何使 Eclipse 与 gdb 一起工作。

我认为第 2 部分是您真正需要的。基本上，您必须安装一个[插件](http://www.ibm.com/developerworks/apps/download/index.jsp?contentid=314937&filename=os-eclipse-cdt-debug-ex-debugger-plugin.zip&method=http&locale=worldwide)并在 Eclipse 中对其进行配置。

即使在 StackOverflow 上也有很多相关的问题：

1.  [如何在 Eclipse 中使用 GDB 进行 C/C++ 调试？](https://stackoverflow.com/questions/3758794/how-do-i-use-gdb-in-eclipse-for-c-c-debugging)
2.  [如何将 GDB 调试器安装到 Eclipse CDT](https://stackoverflow.com/questions/4544711/how-to-install-gdb-debugger-to-eclipse-cdt)
3.  [使用 Eclipse CDT 和 GDB 进行调试](https://stackoverflow.com/questions/1587748/debugging-with-eclipse-cdt-and-gdb)
4.  [如何在使用 Eclipse CDT 进行调试时向 gdb 提示符输入命令？](https://stackoverflow.com/questions/10177897/how-can-i-enter-commands-to-a-gdb-prompt-while-debugging-with-eclipse-cdt)

我还没有尝试过，所以我希望这有效。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-23T06:19:37.133

**在 Windows 平台上：**
调试 mex 代码的最佳方法（根据我的经验）是使用 Visual Studio。这是有关如何执行此操作的[链接。](http://www.mathworks.com/help/matlab/matlab_external/debugging-c-c-language-mex-files.html)

**其他平台（Linux/Mac）：除了gdb（一点***都不*好玩），
恐怕我还没有找到任何好的方法。

 *### 更新（2018 年）：

最近，Mathworks 发布了[一篇博](https://blogs.mathworks.com/developer/2018/06/19/mex-debugging-vscode/)文，介绍了如何使用[Visual Studio Code](https://code.visualstudio.com/)调试 mex 代码。
我自己没有尝试过，但它似乎是调试 mex 文件的一个不错的跨平台解决方案。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-31T11:40:25.750

这是我的解决方案，适用于 Ubuntu 12.04、Matlab R2012b 和 C/C++ 开发人员 Kepler 版本的 Eclipse IDE。

1.  在 Eclipse 中，从运行选项卡中打开“调试配置”。然后制作一个新的“C/C++ 应用程序”。
2.  在“主”选项卡中，将正确的路径写入“C/C++ 应用程序”中的 matlab 可执行文件（我的是“/usr/local/MATLAB/R2012b/bin/glnxa64/MATLAB”注意：不是 MATLABPATH/bin/matlab ）。 ![主选项卡](../Images/d2addc5777ca9a9d3aa0c137af6d38a4.png)
3.  在“参数”选项卡中添加“-nojvm”作为程序参数。 ![论据](../Images/10ca7b82b7223db97168cf3e81a9a8e7.png)
4.  在“环境”选项卡中添加变量“MATLAB_DEBUG”，其值为“gdb” ![环境](../Images/9658d75ffc31ef8e748669ee3e347ecc.png)
5.  按“应用”和“调试”
6.  “Matlab 控制台”将在“控制台”视图中打开。
7.  在此控制台中写入“dbmex on”。这将启用调试。
8.  运行 mex 文件！（Matlab 将在加载每个新的 mex 文件时停止）
9.  祝调试愉快！:-)*

# python - 为什么不显示此文档字符串？

> ID：14471277
> 
> 赞同：0
> 
> 时间：2013-01-23T01:59:40.877
> 
> 标签：python

刚刚开始使用“潜入 Python”。出于某种原因，我无法显示文档字符串。

```
#!/usr/bin/env python

def buildConnectionString(params):
    """Build a connection string from a dictionary of parameters
    """
    # Returns string
    return ";".join(["%s=%s" % (k, v) for k, v in params.items()])

if __name__ == "__main__":
    myParams = {"server":   "mpilgrim", \
                "database": "master",   \
                "uid":      "sa",       \
                "pwd":      "secret"    \
                }
    print buildConnectionString(myParams) 
```

在控制台：

```
>>> import odbchelper
>>> print odbchelper.buildConnectionString.__doc__
None
>>> 
```

这工作正常：

```
>>> import sys
>>> sys.path.__doc__
"list() -> new empty list\nlist(iterable) -> new list initialized from iterable's items"
>>> 
```

我尝试了许多排列，包括`"""`和`#`评论。没有喜悦。哪里有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:37:21.163

你所拥有的应该工作；一些可能的原因：

*   您正在编辑不同的文件
*   编辑正确的文件后，您还没有退出并重新启动解释器

更新：

如果您使用`reload`避免退出和重新启动解释器（或 IDLE 或您正在使用的任何东西），您需要注意几个陷阱：

*   `reload`不是递归的

换句话说，如果你的`odbchelper`导入`odbcstuff`和你`reload(odbchelper)`，`odbcstuff`将不会被重新加载。

*   `reload`不更新其他现有对象

如果你试图绕过`reload`with的非递归性质

```
import odbcstuff
reload(odbcstuff) 
```

`odbcstuff`看到的`odbchelper`还是旧的；你还需要一步：

```
odbchelper.odbcstuff = odbcstuff     # update odbchelper with the reloaded odbcstuff 
```

正如你所看到的，这对于几个依赖模块来说是相当乏味的。所以继续使用`reload`，但如果事情仍然无法正常工作，请退出并重新启动。

# c - OpenSSL 识别 cookie 在多个线程中使用 DTLS 会话/连接验证回调

> ID：14471278
> 
> 赞同：0
> 
> 时间：2013-01-23T01:59:42.173
> 
> 标签：c, multithreading, callback, openssl

我在多线程服务器（每个线程的连接）中的 cookie 生成/验证回调有点麻烦。据我所知，DTLS 的东西需要这些回调；我担心的是示例代码对 cookie 使用全局变量，如果有很多连接传入，那么我希望有一个 cookie 和连接的哈希。

我有两个问题：

1.  我应该这样做还是有更好、更简单的 OpenSSL 方式？
2.  我用什么来将回调/cookie 标识为属于特定连接？

关于（2），回调（见下文）发生的线程与连接不同，因此我不能使用线程 ID 作为哈希键。回调被赋予一个 SSL* 参数，我敢打赌，有办法从中获得一个唯一的会话/连接 ID，但我不知道如何获得它。我查看了[文档](http://www.openssl.org/docs/ssl/ssl.html#DEALING_WITH_CONNECTIONS)，但没有看到任何采用 SSL* 对象并给出唯一编号的东西，至少从我能知道的方法名称来看。给定这些回调传递的参数，什么是识别具有连接的唯一 cookie 的最佳方法？

我正在使用基于[Robin Seggelmann 示例的](http://sctp.fh-muenster.de/dtls-samples.html)代码。我的东西在[这里](https://github.com/a34729t/exp/blob/master/tun2udp/dtls/server3_oo.c)。

* * *

2个全局变量：

```
unsigned char cookie_secret[COOKIE_SECRET_LENGTH];
int cookie_initialized=0; 
```

2 个回调使用这些变量：

```
int generate_cookie(SSL *ssl, unsigned char *cookie, unsigned int *cookie_len) {
    ...
    /* Initialize a random secret */
    if (!cookie_initialized) {
        if (!RAND_bytes(cookie_secret, COOKIE_SECRET_LENGTH))
            ... 
```

和

```
int verify_cookie(SSL *ssl, unsigned char *cookie, unsigned int cookie_len) {
    ...
    /* If secret isn't initialized yet, the cookie can't be valid */
    if (!cookie_initialized) return 0; 
```

主服务器循环设置这些回调并为每个客户端连接打开一个新线程：

```
void start_server(int port, char *local_address) {
    ...
    SSL_CTX_set_cookie_generate_cb(ctx, generate_cookie);
    SSL_CTX_set_cookie_verify_cb(ctx, verify_cookie);
    ...
    while (1) {
        // accept new conns
        ...
        if (pthread_create( &tid, NULL, connection_handle, info) != 0) {
            perror("pthread_create");
            exit(-1);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-05T03:04:54.617

虽然@matt_h 的解决方案有效，但您应该意识到可能出现的后果。

如[#rfc4347](https://www.rfc-editor.org/rfc/rfc4347)中所述：

* * *

4.2\. DTLS 握手协议

> 1.  添加了无状态 cookie 交换以防止拒绝服务攻击。

4.2.1。拒绝服务对策

> 数据报安全协议极易受到各种拒绝服务 (DoS) 攻击。有两种攻击特别值得关注：
> 
> 1.  攻击者可以通过传输一系列握手启动请求来消耗服务器上的过多资源，从而导致服务器分配状态并可能执行昂贵的加密操作。
>     
>     
> 2.  攻击者可以通过向伪造的受害者源发送连接启动消息来将服务器用作放大器。然后服务器将它的下一条消息（在 DTLS 中，一个证书消息，可能非常大）发送到受害机器，从而淹没它。
>     
>     
> 
> [...]
> 
> 当客户端向服务器发送它的 ClientHello 消息时，服务器可以用 HelloVerifyRequest 消息进行响应。此消息包含使用 [PHOTURIS] 技术生成的无状态 cookie。客户端必须重新发送添加了 cookie 的 ClientHello。然后，服务器验证 cookie 并仅在其有效时继续进行握手。这种机制迫使攻击者/客户端能够接收 cookie，这使得使用欺骗性 IP 地址的 DoS 攻击变得困难。此机制不提供任何防御来自有效 IP 地址的 DoS 攻击。

最重要的部分是：

> DTLS 服务器应该以这样一种方式生成 cookie，即它们可以被验证，而无需在服务器上保留任何每个客户端的状态。

* * *

因此，在实践中，您根本不应该存储任何 cookie。这也违背了 DTLS 的 DOS 对策的整体安全概念。目标是在对等方通过身份验证之前**不**分配额外资源。

攻击者可以通过使用虚假 IP 地址轻松地向您的存储（内存、数据库等）发送垃圾邮件。

* * *

**结论：**我们不需要存储 cookie 或一遍又一遍地使用相同的秘密，我们只需生成特定数量的秘密，将它们存储在保险库中，并在创建 cookie 时随机选择一个。稍后，我们将 cookie 与我们在该保险库中的秘密进行匹配。

**请阅读以下来自@Nathaniel J. Smith 的评论，他在其中指出，该解决方案并未反映 RFC 4347 中描述的最合适的方式，其中仅应使用 2 个自我失效的机密。因此，我的解决方案应该只被视为实现 RFC 的工具。**

* * *

这是我的开源解决方案（经过测试和工作）：

项目：[https ://github.com/Burnett01/openssl-cookie-secret-vault](https://github.com/Burnett01/openssl-cookie-secret-vault)

堆栈版本：[https ://github.com/Burnett01/openssl-cookie-secret-vault/blob/master/stack/](https://github.com/Burnett01/openssl-cookie-secret-vault/blob/master/stack/)

堆版本：[https ://github.com/Burnett01/openssl-cookie-secret-vault/blob/master/heap/](https://github.com/Burnett01/openssl-cookie-secret-vault/blob/master/heap/)

* * *

API（堆栈版本）：

```
#define CK_SECRET_MAX 20
#define CK_SECRET_LEN 16

/*
Vault that contains the secrets 
*/
static unsigned char ck_secrets_vault[CK_SECRET_MAX][CK_SECRET_LEN];

/*
Creates and stores an amount of secrets
into the vault
*/
size_t ck_secrets_generate( size_t amount );

/*
Returns the amount of secrets in the vault
*/
size_t ck_secrets_count( void );

/*
Picks a random secret off the vault
*/
unsigned char *ck_secrets_random( void );

/*
Tests whether cookie matches on of the secrets
in the vault
*/
size_t ck_secrets_exist( unsigned char* peer, size_t plen, 
        unsigned char *cookie, size_t clen ); 
```

生成 20 个秘密：

```
printf( "Generated %d cookie-secrets.\n", ck_secrets_generate( CK_SECRET_MAX ) ); 
```

生成一个带有随机密钥的 cookie：

```
HMAC( EVP_sha256(), (const void*)ck_secrets_random(), CK_SECRET_LENGTH,
        (const unsigned char*)buff, bufflen, result, &reslen ); 
```

测试 cookie 是否匹配我们的秘密之一：

```
if( ck_secrets_exist( buff, bufflen, cookie, clen ) == 1 )
   /* Cookie is valid since we found a matching secret */
else
   /* Cookie is not valid */ 
```

* * *

API（堆版本）：

```
#define CK_SECRET_MAX 20
#define CK_SECRET_LEN 16

/*
Vault that contains the secrets 
*/
struct Vault
{
  unsigned char **secrets;
  size_t count;
};

/*
Creates and stores an amount of secrets
into a vault
*/
Vault *vault_init( size_t amount );

/*
Destroys a vault
*/
void vault_destroy( Vault *v );

/*
Picks a random secret off a vault
*/
unsigned char *vault_random( Vault *v );

/*
Tests whether cookie matches one of the secrets
in a vault
*/
size_t vault_sec_exists( Vault *v, unsigned char* peer, size_t plen, 
        unsigned char *cookie, size_t clen ); 
```

创建一个保管库并生成 20 个秘密：

```
Vault *v = vault_init( CK_SECRET_MAX ); 
```

生成一个带有随机密钥的 cookie：

```
HMAC( EVP_sha256(), (const void*)vault_random( v ), CK_SECRET_LENGTH,
        (const unsigned char*)buff, bufflen, result, &reslen ); 
```

测试 cookie 是否匹配我们的秘密之一：

```
if( vault_sec_exists( v, buff, bufflen, cookie, clen ) == 1 )
   /* Cookie is valid since we found a matching secret */
else
   /* Cookie is not valid */ 
```

销毁保险库：

```
vault_destroy( v ); 
```

* * *

编辑 30/04/2017：我添加了一个可能有用的堆栈版本示例：

[https://github.com/Burnett01/openssl-cookie-secret-vault/blob/master/stack/example.c](https://github.com/Burnett01/openssl-cookie-secret-vault/blob/master/stack/example.c)

编辑 28/05/2017：我进一步改进了堆栈版本，还添加了一个堆版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:19:52.710

只需存储指向 cookie 的 SSL 指针的简单映射。

```
struct cookie_entry { SSL *ssl; unsigned char cookie[COOKIE_SECRET_LENGTH]; }
struct cookie_entry cookie_tbl[100];

struct cookie_entry* find_cookie(SSL *ssl)
{
  for (int i = 0; i < 100; i++)
    if (ssl == cookie_tbl[i].ssl)
       return &cookie_tbl[i];
  return NULL;
}

int generate_cookie(SSL *ssl, unsigned char *cookie, unsigned int *cookie_len) {

    /* Initialize a random secret */
    if (!find_cookie(ssl)) {
        struct cookie_entry ce* = find_cookie(NULL); 
        if (!RAND_bytes(ce->cookie, COOKIE_SECRET_LENGTH))
}

int verify_cookie(SSL *ssl, unsigned char *cookie, unsigned int cookie_len) {
    /* find_cookie and compare.. */ 
```

希望这是有道理的。显然可以修改为动态调整大小，或使用哈希表实现，例如 hcreate(3)。

# assembly - 当只使用位移时，LEA 指令会做什么？

> ID：14471280
> 
> 赞同：0
> 
> 时间：2013-01-23T01:59:57.047
> 
> 标签：assembly, x86

```
int _tmain(int argc, _TCHAR* argv[])
{
004113D0  push        ebp  
004113D1  mov         ebp,esp 
004113D3  sub         esp,0E4h 
004113D9  push        ebx  
004113DA  push        esi  
004113DB  push        edi  
004113DC  lea         edi,[ebp-0E4h] 
004113E2  mov         ecx,39h 
004113E7  mov         eax,0CCCCCCCCh 
004113EC  rep stos    dword ptr es:[edi] 
    int a=2;
004113EE  mov         dword ptr [a],2 
    int b=3;
004113F5  mov         dword ptr [b],3 
    int c=add(&a,&b);
004113FC  lea         eax,[b] 
004113FF  push        eax  
00411400  lea         ecx,[a] 
00411403  push        ecx  
00411404  call        add (4111CCh) 
00411409  add         esp,8 
0041140C  mov         dword ptr [c],eax 
    printf("%d",c);
0041140F  mov         esi,esp 
00411411  mov         eax,dword ptr [c] 
00411414  push        eax  
00411415  push        offset string "%d" (41563Ch) 
0041141A  call        dword ptr [__imp__printf (4182B8h)] 
00411420  add         esp,8 
00411423  cmp         esi,esp 
00411425  call        @ILT+310(__RTC_CheckEsp) (41113Bh) 
    return 0;
0041142A  xor         eax,eax 
}
0041142C  push        edx  
0041142D  mov         ecx,ebp 
0041142F  push        eax 
```

**00411430 lea edx,[ (411454h)] //LEA 指令在这里做什么，在安全程序之前？**

```
00411436  call        @ILT+140(@_RTC_CheckStackVars@8) (411091h) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T02:39:55.360

> //LEA 指令在安全程序之前在这里做什么？

它不是“安全程序”。您正在查看 MSVC 编译器在打开 /RTC 选项的调试版本中生成的代码。RTC 表示运行时错误检查。LEA 指令加载由编译器生成的表的地址，该表描述堆栈帧中的局部变量。它们被组织起来，因此它们之间有未使用的字节，这些字节用 0xcc 填充。你看到发生在地址 004113EC。

_RTC_CheckStackVars@8 调试函数使用此表来检查这些字节是否仍然具有相同的值。如果不是，那么有确凿的证据表明该代码存在错误并踩踏了堆栈框架。通常是通过溢出堆栈上的数组末尾。如果没有这种调试帮助，这些错误可能很难诊断。 *非常*有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:21:36.597

```
lea edx, [(411454h)] 
```

是相同的

```
mov edx, offset [(411454h)] 
```

# jquery - ASP.Net 中的 JQuery 确认对话框

> ID：14471285
> 
> 赞同：-1
> 
> 时间：2013-01-23T02:00:56.260
> 
> 标签：jquery, asp.net

是否有任何由 Jquery 制作的确认对话框，我可以在 ASP.NET 中使用它？

带有“是”或“否”、“确定”、“确定”或“取消”按钮的确认对话框？

例如，如果我单击“确定”按钮，我可以在 ASP.net 的服务器代码中执行条件。

对话框中的另一个示例：“您要将此记录保存到数据库吗？” “是还是不是”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:50:05.713

```
 jQuery("#send").click(function () {
            $("#dialog").dialog({
                modal: true, title: 'message', zIndex: 10000, autoOpen: true,
                width: 'auto', resizable: false,
                buttons: {
                    Yes: function () {
                        window.location = '<%=demo\test\data%>?ID=' + Id;
                        $(this).dialog("close");
                    },
                    No: function () {
                        $(this).dialog("close");
                    }
                },
                close: function (event, ui) {
                    $(this).remove();
                }
            });
        });

        $("#cancelSend").click(function () {
            window.location.href = "javascript:history.back();";
        });
    }); 
```

这就是我正在做的......但它是一个 MVC 应用程序。但我相信您可以对任何 asp.net 应用程序以相同的方式执行此操作.... url 是您的方法或服务器页面的链接，ID 是您要传递的任何查询字符串。这个逻辑在是的功能，所以只会在是按钮单击时执行..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:30:51.133

使用[jQuery UI 对话框](http://jqueryui.com/dialog/)：

```
$(element).dialog({
    buttons : {
        Yes : function () {
            $.ajax({...});
        },
        No : function () {
            $(this).dialog('close');
        }
    }
}); 
```

# kineticjs - 事件在其父 div 的缩放更改后被禁用

> ID：14471286
> 
> 赞同：1
> 
> 时间：2013-01-23T02:00:58.507
> 
> 标签：kineticjs

使用KineticJS，发现父div缩放比例后，放置在画布中的事件被禁用。

[http://jsfiddle.net/Mxh42/](http://jsfiddle.net/Mxh42/)

请看这里的情况。

首先，您可以在红色圆圈上移动鼠标。然后弹出窗口将显示。然后，请按下按钮使圆圈变小。然后，您可以再次将鼠标移动到新的小圆圈。你会看到什么都没有发生。

HTML

```
<div id="wrap" style="width:200px;height:200px">
<div id="container"></div>
</div>
<input type="button" value="make it 50%" onClick="document.getElementById('container').style.zoom = '0.5';"> 
```

JS

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 200,
    height: 200
});
var layer = new Kinetic.Layer({
    x: 100,
    y: 100
});

var arc = new Kinetic.Shape({
    drawFunc: function(canvas) {
        var ctx = canvas.getContext();
        ctx.fillStyle = "rgb(255, 0, 0)";
        ctx.beginPath();
        ctx.lineWidth = 10;
        ctx.arc(50, 50, 40, 0, 2*Math.PI, false);
        ctx.closePath();
        ctx.fill();
        ctx.stroke();
        canvas.fillStroke(this);
    }
});

arc.on('mouseover', function() {
    alert("mouseover detected");
});

layer.add(arc);
stage.add(layer); 
```

这是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:04:10.480

所以，正如评论中所说：

```
stage.draw() // will redraw your stage and could help you out 
```

至于缩放：

```
stage.setScale(x,y); //will do all your zooming for you at no loss of functionality 
```

和我个人最喜欢的：

```
stage.transitionTo({  //this will animate the zoom
     scale: {x: number, y: number},  //scale by some amount, you need x and y in an objet, not like with .setScale(x,y) where they are integers separated by a comma
     duration: 2  //duration is the amount of time the animation takes (in seconds, not milliseconds)
}); 
```

[http://jsfiddle.net/Mxh42/5/](http://jsfiddle.net/Mxh42/5/)

# php - 函数调用时返回错误

> ID：14471288
> 
> 赞同：0
> 
> 时间：2013-01-23T02:01:15.093
> 
> 标签：php, mysql, function, arguments

我正在创建一个从数据库中提取菜单的脚本。我目前将菜单分为 6 个单独的类别。我不想为每个类别创建一个查询并获取每个结果，而是创建一个识别类别然后发布正确结果的函数。目前，我的函数返回错误“致命错误：在第 5 行的 /home/a2077073/public_html/functions.php 中的非对象上调用成员函数 query()”。我对函数没有太多经验，搜索没有结果。代码贴在下面。

```
<?php 
function getmenuitems($menu) {

$query = "SELECT * FROM `menu` WHERE `item_cat`= '" .$menu. "' ";
$result = $mysqli->query($query) or die($mysqli->error.__LINE__);

    if($result->num_rows > 0) {
    while($row = $result->fetch_assoc()) {
        $item_name = stripslashes($row['item_name']);
        $item_des = stripslashes($row['item_des']);
        $item_price = stripslashes($row['item_price']);     
     ?>
<div class="menu_contain">
  <div class="order-menu-first">
    <div class="mp"><strong><?php echo $item_name; ?></strong> <?php echo $item_des; ?>        </div>
  </div>
  <div class="order-menu-second">
    <div class="mp">
      <select>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
      </select>
    </div>
  </div>
  <div class="order-menu-third">
    <div class="mp">
      <input type="text" value="notes">
    </div>
  </div>
  <div class="order-menu-third">
    <div class="mp"> <?php echo $item_price; ?> </div>
  </div>
  <div class="order-menu-fifth">
    <div class="mp"> <a href="#">X</a> </div>
  </div><div class="clear"></div> 
```

我正在调用该函数，

```
 <?php 
echo getmenuitems('firsts');
   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:09:55.030

`$mysqli`未在函数范围内定义。特别是调用时会触发错误`$mysqli->query($query);`。`$mysqli`甚至没有在全局文件范围内定义。此时，您有三个主要选择：

1.  在全局范围内创建一个 mysqli 连接并将其作为第二个（或第一个）参数传递：`function getmenuitems($mysqli, $menu) {`
2.  **不建议**：`$mysqli`在函数本身内部创建。
3.  **真的不建议**：在全局范围内创建一个mysqli连接，并`global $mysqli;`在函数内部使用它来访问它。

# django - Solr/Jetty 混乱 - 如何获得持久服务？

> ID：14471289
> 
> 赞同：2
> 
> 时间：2013-01-23T02:01:18.193
> 
> 标签：django, ubuntu, solr, jetty, django-haystack

我在 Ubuntu 12.04 上，使用安装在 django 1.4.2 站点中的 jetty (9_M4)、solr (4.0.0) 到 django-haystack (2.0beta)。

我必须跳很多圈才能启动并运行它，因为很少有文档可以使用 django-haystack 在 Ubuntu 中启动和运行 solr 4.0。但这能有多难？

我的主要困惑在于 Jetty 在做什么和 Solr 在做什么。

因此，我[通过本教程安装了 Jetty，](http://pietervogelaar.nl/ubuntu-12-04-install-jetty-9)[正如我在该教程的评论中所指出的那样](http://pietervogelaar.nl/ubuntu-12-04-install-jetty-9/#comment-1729)，对 init 文件进行了小幅调整。Jetty 现在正在运行，即使在重新启动后，我也可以在浏览器中看到它。

伟大的。

再次通过本教程安装[Solr 并](http://pietervogelaar.nl/ubuntu-12-04-install-solr-4-with-jetty-9/)进行调整。代替：

```
cp -R apache-solr-4.0.0/example/solr /opt 
```

我用：

```
cp -R apache-solr-4.0.0/example/* /opt/solr/ 
```

因此将以下内容添加到 /etc/default/jetty：

```
JAVA_OPTIONS="-Dsolr.solr.home=/opt/solr/solr $JAVA_OPTIONS" 
```

我不记得我为什么这样做了，但当时是有原因的。那时我停止使用该教程，因为我不太了解核心的 solr 概念，而且我已经对这是多么烦人的困难感到慌乱。

（作为上下文，大约 6 个月前，当我用 solr 3.5 设置 django-haystack 2.0 时，它非常简单，不需要单独安装码头 - 我花了大约两个小时）

无论如何，我回到我的 Django 安装，创建 schema.xml，进行 stopwords-en.txt 更改，将其复制到 /opt/solr/solr/collection1/conf。

我编辑 /opt/solr/solr/collection1/conf/solrconfig.xml 以删除对 updateLog 的引用，因为我将*版本*字段添加到 schema.xml 的任何尝试都因某种字符错误而失败。请参阅[此处（lucene -solr-user 邮件列表）](http://osdir.com/ml/solr-user.lucene.apache.org/2012-10/msg00792.html)和[此处（django-haystack github）](https://github.com/toastdriven/django-haystack/issues/671)了解更多信息。

最后，我 cd 进入 /opt/solr 并运行它：

```
sudo java -jar start.jar 
```

砰砰砰！我得到了一些结果（当我去我的 django 网站并使用我设置的搜索时）。极好的。这真的很棒。现在我只需要使 solr 的启动持久化。

我创建了一个如下所示的 /etc/init/solr：

```
description     "Solr Search Server"

# Make sure the file system and network devices have started before
# we begin the daemon
start on (filesystem and net-device-up IFACE!=lo)

# Stop the event daemon on system shutdown
stop on shutdown

# Respawn the process on unexpected termination
respawn

# The meat and potatoes
exec /usr/bin/java -jar /opt/solr/start.jar >> /var/log/solr.log 2>&1 
```

我重新启动服务器，但什么也没有——我可以看到 solr 正在运行，但在 django 搜索中没有得到任何结果。

我删除了 init 文件并再次尝试从 cli 运行 - 是的，很可爱。

所以，我的问题是：

1.  我到底做错了什么？

2.  如果 solr 意外死亡并通过我的 Django/haystack 界面产生结果，我如何让 solr 在启动时启动并重生

3.  为什么我需要jetty和solr同时运行，/opt/jetty/webapps/solr.war和我的/opt/solr是什么关系？我在创造导致冲突吗？

4.  为什么 solr 3.5 这么简单，现在这么难？我诚实地问这个问题 - 我不想要 solr 开发人员的借口或解释清单 - 我想知道我的理解如何在第一个实例（solr 3.5）中如此有限，并让它在两个小时内运行，为什么我现在需要对 jetty/solr 架构和 cli/shell 脚本黑客有全面更深入的了解才能使其运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:17:29.053

我不承诺得到你所有的东西，但是（数字与问题不匹配）：

1) Jetty 是一个网络服务器。Solr 在该 Web 服务器内作为（Web）应用程序运行，但是：

2) Jetty 还可以运行嵌入式网络服务器，这就是 Solr 下载的工作方式。当您执行 java -jar start.jar 运行 Jetty 并预先配置所有内容时。在这种情况下，您不需要独立的 Jetty。我建议从嵌入式 Jetty 开始，然后切换到外部的。但是，如果只有您的本地应用程序与本地 Solr 服务器通信，您可能无需完整的 Jetty 就可以走得很远。

3）您不需要在示例目录中找到的所有东西 - 它有多个配置和支持文件，并且有点嵌套（这很混乱）

4）开始你需要两件事：运行solr；你的配置目录

5) 让 Solr 运行的最简单方法是将整个分发目录（我知道 - 很大）放在某个地方（例如 /opt/solr）。

6）你的配置目录很简单。您只需要两个文件即可开始，如果您对名称很挑剔，则需要三个文件：-（无论在哪里，但要确保 Solr 可以在那里读/写）-- solr.xml（如果您正在选择集合名称，否则您可以跳过它) -- collection1/ (这是默认名称，你可以在 solr.xml 中更改它) -- collection1/conf/ (这是配置目录，一旦你正确启动，Solr 将在同一级别添加数据目录) schema.xml --集合1/conf/shema.xml——集合1/conf/solrconfig.xml

7) 然后，您需要在示例目录中运行 java -Dsolr.solr.home= start.jar 。这将使所有部分在端口 :8983 上启动并运行。Solr 4 有一个非常新的管理界面，所以用你的浏览器访问它，也许做教程等等。

如果您需要有关最小功能架构/solrconfig 文件的帮助，请单独询问，但您不能只使用示例目录中的文件，因为它在 fieldType 分析器中包含所有其他文件引用（尽管您可以将这些行注释掉）。

# jquery - 通过jquery设置多个图像的高度？

> ID：14471291
> 
> 赞同：0
> 
> 时间：2013-01-23T02:01:24.780
> 
> 标签：jquery, height

我在页面上有一个图像，我想将其高度设置为等于父容器。如果你以这个页面为例，[http](http://myrtlebeachgolfpackages.com/packages/) ://myrtlebeachgolfpackages.com/packages/ ，左边的主图像，我想填充它们各自div的高度100%。

所以我的想法是抓取父容器的高度并将图像的高度设置为等于该父容器。

```
$(".packagepic").height($('this').parent().parent().height()); 
```

布局基本

```
<div>
    <a>
        <image class="packagepic">
    </a>
</div> 
```

这就是我要抓住的原因`parent().parent()`。

但是，您当然可以看到这不起作用。另请注意，我不能将所有 div 的高度设置为一个高度，或者将所有图像设置为某个高度，因为它们各自 div 的高度会根据包的不同而变化。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:13:12.307

您可以使用函数[http://api.jquery.com/height/](http://api.jquery.com/height/)

```
$(".packagepic").height(function () {
    return $(this).parent().parent().height();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:03:56.953

```
$(".packagepic").css('height', function () {
    return $(this).parent().parent().height();
}); 
```

您也可以将宽度设置为`auto`，以保持纵横比。

# c# - 使用 Excel InputBox 在 C# 中捕获工作表名称

> ID：14471294
> 
> 赞同：0
> 
> 时间：2013-01-23T02:01:33.060
> 
> 标签：c#, excel-interop

我想使用 Excel`InputBox()`通过单击它或它的选项卡来捕获工作表的名称。但是，当我使用以下代码时：

```
Excel.Application _excel = this.Application; // this refers to an C# excel addin.
// ...
var result = _excel.InputBox(
             "prompt",
             "Sheet Selection",
             Type.Missing,
             Type.Missing,
             Type.Missing,
             Type.Missing,
             Type.Missing,
             Type.Missing); 
```

我得到结果

> “='工作表名称'！”

但相反，我想要的是

> “工作表名称”

我试过使用[这里](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._application.inputbox%28v=office.11%29.aspx)`InputBox`提到的文本说明符 (2)但这似乎没有任何区别。任何想法我做错了什么？

**编辑**

我发现如果我捕获一个范围，我可以用它来推断我需要的工作表名称：

```
Excel.Range result = _excel.InputBox(
                                     prompt,
                                     "Sheet Selection",
                                     Type.Missing,
                                     Type.Missing,
                                     Type.Missing,
                                     Type.Missing,
                                     Type.Missing,
                                     Type.Missing) as Excel.Range;

if (result == null)
   return null;
return result.Worksheet.Name; 
```

# excel - ActiveCell.Formula 1004 错误

> ID：14471296
> 
> 赞同：0
> 
> 时间：2013-01-23T02:01:57.910
> 
> 标签：excel, vba

```
Range("B2").Activate
ActiveCell.Formula = "=LEFT(I2,IF(ISERROR(FIND(",",I2,1)),LEN(I2),FIND(",",I2,1)-1))" 
```

有一些人发布了解决方案，但我已经尝试了所有似乎相关的解决方案。

`Formula`从在and ...之间切换`FormulaR1C1`到在公式周围使用双引号、三引号甚至四引号。

在这一点上的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:23:03.700

这应该适合你

```
Range("B2").Formula = "=LEFT(I2,IF(ISERROR(FIND("","",I2,1)),LEN(I2),FIND("","",I2,1) -1))” 

```

如果不是，您使用的是哪个版本的 Excel？

# php - PHP多维数组计数器

> ID：14471297
> 
> 赞同：0
> 
> 时间：2013-01-23T02:02:12.173
> 
> 标签：php, multidimensional-array

我试图制作一个包含两列的多维数组。名称和计数器。我可以用所有的名字做一个数组。但我不知道如何使它多维并且仍然能够更新计数器。到目前为止我得到的代码是

```
if (!in_array($prodname, $da)){
    array_push($da, $prodname);
} 
```

然后我可以用 foreach 把它倒出来。我如何使它成为二维的？我怎么说好吧，这存在更新旧值？等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:15:06.540

假设你想`$da`看起来像这样：

```
Array(
   "name1" => array("score1" => 80, "score2" => 100),
   "name2" => array("score1" => 50, "score2" => 60),
   "name3" => array("score1" => 90, "score2" => 80),
   ...
) 
```

然后你需要做的就是：

```
function setScore($prodName, $scoreName, $score)
{
    global $da;
    if (!array_key_exists($prodName, $da)) {
        $da[$prodName] = array();
    }
    $da[$prodName][$scoreName] = $score;
}

setScore("name1", "score1", 80);
setScore("name1", "score2", 100);
setScore("name2", "score1", 50);
... 
```

除非我误解了你的问题，这是很有可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:20:36.117

如果您只需要名称和计数器，那么您应该能够使用普通数组：

```
$nameCountArray = array();
foreach($names as $name){
    if(!array_key_exists($name,$nameCountArray)){
        $nameCountArray[$name] = 1;
    }else{
        $nameCountArray[$name] = $nameCountArray[$name] + 1;
    }
} 
```

如果您确实需要多维数组，这些只是数组的数组，可以这样访问。一个很好的例子是使用二维数组来存储位置（比如在 3 x 3 网格上）：

```
$twoDArray = array(
                  0 => array(0 => 1,
                             1 => 4,
                             2 => 7), 
                  1 => array(0 => 2,
                             1 => 5,
                             2 => 8), 
                  2 => array(0 => 3,
                             1 => 6,
                             2 => 9)
              );

//Grab the item at 1,2
$item = $twoDArray[1][2];//Will give '8' 
```

# ios6 - 使用自动布局在 UIScrollView 内缩放 UIImageView

> ID：14471298
> 
> 赞同：19
> 
> 时间：2013-01-23T02:02:15.777
> 
> 标签：ios6, uiscrollview, uiimageview, autolayout

我在 UIScrollView 中嵌入了 UIImageView，在 iOS 6 和自动布局之前，我在控制器的 viedDidLoad 方法中使用了以下代码片段来显示可滚动和可缩放的图像。

```
self.scrollView.contentSize = self.imageView.image.size;
self.imageView.frame = CGRectMake(0, 0, self.imageView.image.size.width, self.imageView.image.size.height); 
```

但是现在使用情节提要中设置的约束。我发现这个问题[Embed ImageView in ScrollView in ScrollView with Auto Layout on iOS 6](https://stackoverflow.com/questions/12619786/embed-imageview-in-scrollview-with-auto-layout-on-ios-6)和其他一些在 SO 中指出约束是在 viewDidLoad 之后加载/强制执行的，并且将我以前的代码段移动到 viewDidAppear 可以解决这个问题，但缩放不能正常工作并且似乎 scrollView 和 imageView 的大小在捏到缩放手势后被重置为情节提要的约束。

我只是在猜测，但我认为如果有某种方法可以覆盖可能有效的代码中的 scrollView 和 imageView 的垂直和水平空间约束。

还有其他人有这个问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-23T09:25:09.120

Zsolt 在评论中提出了最佳解决方案：

> [http://github.com/evgenyneu/ios-imagescroll](http://github.com/evgenyneu/ios-imagescroll)看看这个。非常适合我。

此存储库中提出的解决方案是在显示图像之前调整最小和当前缩放级别：

```
@interface MyViewController () <UIScrollViewDelegate>
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;
@property (weak, nonatomic) IBOutlet UIImageView *imageView;
@end

@implementation MyViewController

- (void)viewDidLoad
{
  [super viewDidLoad];
  self.scrollView.delegate = self;

  [self initZoom];
}
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
  [self initZoom];
}

// Zoom to show as much image as possible
- (void) initZoom {
  float minZoom = MIN(self.view.bounds.size.width / self.imageView.image.size.width,
                      self.view.bounds.size.height / self.imageView.image.size.height);
  if (minZoom > 1) return;

  self.scrollView.minimumZoomScale = minZoom;

  self.scrollView.zoomScale = minZoom;
}

- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
  return self.imageView;
} 
```

但是，缩小样本时会出现问题。图像未居中。这可以通过使用包含以下代码的自定义滚动视图类轻松解决：

```
@interface MyScrollView : UIScrollView
@end

@implementation MyScrollView

-(void)layoutSubviews
{
  [super layoutSubviews];
  UIView* v = [self.delegate viewForZoomingInScrollView:self];
  CGFloat svw = self.bounds.size.width;
  CGFloat svh = self.bounds.size.height;
  CGFloat vw = v.frame.size.width;
  CGFloat vh = v.frame.size.height;
  CGRect f = v.frame;
  if (vw < svw)
    f.origin.x = (svw - vw) / 2.0;
  else
    f.origin.x = 0;
  if (vh < svh)
    f.origin.y = (svh - vh) / 2.0;
  else
    f.origin.y = 0;
  v.frame = f;
}

@end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-27T22:26:55.057

使用以下代码示例解决了我的问题。github 存储库对应于 Matt Neuburg 所著的 Programming iOS。

[https://github.com/mattneub/Programming-iOS-Book-Examples/blob/11c6c57743b04e6e722b635b87be69fa41a5abaf/ch20p573scrollViewAutoLayout/ch20p573scrollViewAutoLayout/ViewController.m](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/11c6c57743b04e6e722b635b87be69fa41a5abaf/ch20p573scrollViewAutoLayout/ch20p573scrollViewAutoLayout/ViewController.m)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-21T00:52:15.483

我也同意 Zsolt 的建议和链接。

但是我更新了宽度/高度约束以允许它处理任何尺寸的图像：

```
- (void) initZoom
{
  for (NSLayoutConstraint *constraint in self.photoImageView.constraints)
  {
    if (constraint.firstAttribute == NSLayoutAttributeWidth)
      constraint.constant = self.photoImageView.image.size.width;
    else if (constraint.firstAttribute == NSLayoutAttributeHeight)
      constraint.constant = self.photoImageView.image.size.height;
  }

  float minZoom = MIN(self.scrollView.bounds.size.width / self.photoImageView.image.size.width,
                      self.scrollView.bounds.size.height / self.photoImageView.image.size.height);
  if (minZoom > 1) return;

  self.scrollView.minimumZoomScale = minZoom;

  self.scrollView.zoomScale = minZoom;
} 
```

# android - FragmentStatePageAdapter 不会暂停片段

> ID：14471299
> 
> 赞同：1
> 
> 时间：2013-01-23T02:02:21.247
> 
> 标签：android, android-fragments, android-lifecycle

我正在使用 FragmentStatePageAdapter (android.support.v4) 并且我已将 setOffscreenPageLimit 设置为 2，因此它会在当前显示的 Fragment 的前面和后面创建并存储 Fragment 2 和 2。

问题：当屏幕外片段被*创建*时，即使它们还没有被绘制到屏幕上，它们也会立即*启动*和*恢复。*（！）

当当前页面发生变化，对应的 Fragment 被刷出屏幕时，它不会被*paused*或*stop*。（！）

我已经尝试记录 FSPA 及其超类中所有回调的行为 - *setPrimaryItem*最接近可用，但似乎出于各种原因而被调用，而不仅仅是在显示片段时。

**您如何检测到您的 Fragment 之一不再显示或返回显示？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:28:57.060

你可以使用监听器。

```
 mPager.setOnPageChangeListener(new OnPageChangeListener(){

            @Override
            public void onPageScrollStateChanged(int arg0) {
            }

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {
            }

            @Override
            public void onPageSelected(int position) {
                if(mPageSelectedListener!=null){
                    mPageSelectedListener.pageSelected(position);
                }
            }

        }); 
```

您像这样定义 PageSelectedListener 的地方

```
 public interface PageSelectedListener{
        public void pageSelected(int position);
    };

    public void setPageSelectedListener(PageSelectedListener l){
        mPageSelectedListener = l;
    } 
```

并在您的片段中像这样使用它

```
 if(getActivity() instanceof MyActivity
        ((MyActivity)getActivity()).setPageSelectedListener(new PageSelectedListener(){
            @Override
            public void pageSelected(int position) {
                if(position==MyAdapter.MY_PAGE){
                    // do something with currently viewed page...like resume it
                } else {
                    // do something with any other page..like pause it
                }
            }
        });
    } 
```

# mysql - 快速查询数据库中太多表

> ID：14471303
> 
> 赞同：0
> 
> 时间：2013-01-23T02:02:51.323
> 
> 标签：mysql, database, oracle, postgresql

对于非常非常大的表，**索引**可能有很大帮助。但是数据库中的**小表太多**的解决方案是什么。?

如果我有一个很大的数据库，里面有太多的表怎么办。我怎样才能使查询快速，因为索引有助于加快表的查询？

让我们用一个真实的例子来谈谈。在 stackoverflow.com ，有一张桌子说。“**问题**”。有**身份证，日期，投票。** 然后在 questions 表中存在**每个 id**的表。（此表将具有数字 id 的名称。例如，“ **q-45588** ”）现在很容易**索引“问题”**表。但是**每个问题 id 的这么多子表**呢？（可能包含 id、答案 1、答案 2、答案 3、评论 1、评论 2……投票、否决票、日期、标志等等）？

这就是通常的帐户软件中发生的情况。IE。具有所有债务人 id 的债务人帐户表，并且每个表都针对每个该 id 存在（具有债务人的更多详细信息）

**还是设计问题？** **更新** ----------------- 有人可能会说全部在 3 或 4 个表中（可能**有数万亿**行），例如**问题表、答案表、评论表，用户表。**

这是一个修改堆栈的例子

```
Catagory of thread:-----info----

Question
Discussion

Catagory of Thread Response:----info-----

A  Answer
c  comment

Theads:----A table-----

Id (key)
Thread Id number (Long data type)
status (active,normal,closed(visible but not editable), deleted, flagged, etc.
type (Ques / Dis)
votes Up
vots Down
count of views
tag 1
tag 2
tag 3
Subject
body
maker ID
date time stramp of time creation
date time stramp of time last activity
A  Answer count
c  comment count

Thread: (table name is thread id (long data type) (in Threads table)----A table-----

id (key)
response text
response type (    A  Answer / c  comment)
vote up
vote down
abuse count 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T02:24:15.857

通常，索引旨在通过提供有序的结构来进行搜索，从而加快搜索速度。在一个非常小的表中，由于搜索应该很快，它可能没有多大意义。您最好的选择是尝试使用和不使用索引，并进行相应的测量。

话虽如此，如果您的小表具有相同的确切结构，则将它们合并到一个实体中可能更有意义（无论如何从 RDBMS 的角度来看）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:57:16.213

你有一个设计问题。拥有多个具有相同列的表应该立即敲响警钟——拥有多个具有相同唯一键的表也应该如此。

在您给出的示例中，您应该有一个子表。

现在，在某些情况下，您可能拥有一个表，其中包含一个或多个不同值，这些值代表大部分表行。例如，假设您有 50 位客户的销售，但其中一位负责 40% 的总销售记录，其他客户平均分配给其他客户。通过customer_id 上的索引访问较小客户的数据是有意义的，但对于大客户而言则不然。在这种情况下，您可能会考虑对表进行分区以将大客户的记录放在一个子表中，将其他记录放在另一个子表中，两者都与主表相关[http://www.postgresql.org/docs/9.2/static/ ddl-partitioning.html](http://www.postgresql.org/docs/9.2/static/ddl-partitioning.html)。

但是，一般而言，对于您的初始设计，您应该为这些子记录使用单个非分区表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T02:18:59.717

也许这份文件可以帮助你。

[http://dev.mysql.com/doc/refman/5.0/en/table-cache.html](http://dev.mysql.com/doc/refman/5.0/en/table-cache.html)

实际上，MySQL 和其他 RDBMS 专注于处理一个大表，而不是很多表，对吧？如果要处理大量表，则应考虑使用 NoSQL 解决方案。

# c# - 从 TFS 单元测试覆盖范围中排除文件夹

> ID：14471310
> 
> 赞同：2
> 
> 时间：2013-01-23T02:03:43.170
> 
> 标签：c#, code-coverage

我们可以自定义 TFS 中的单元测试覆盖率计算方式吗

我们正在团队中运行持续集成。关键是单元测试。我们在 TFS 中签入代码，并会触发构建，只有达到一定的单元测试覆盖率，比如 50%，我们的签入才能完成。

现在我们正在努力争取一个目标，即 50% 的覆盖率。

现在的问题是，我们的很多代码都是由 XSDObjGen.exe 为此类代码自动生成的，我们将它们放在名为 XSDObjGen 的特定文件夹中。

我正在考虑如何自定义TFS的UT覆盖率计算方法，让TFS在计算覆盖率时不要考虑XSDObjGen文件夹中的代码。

你能帮忙给一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:40:31.117

这是对该主题的完整解释：http:
[//msdn.microsoft.com/en-us/library/dd537628.aspx](http://msdn.microsoft.com/en-us/library/dd537628.aspx)

使用属性 [ExcludeFromCodeCoverage] 解决了我的问题。

# javascript - Fancybox 和 Jquery 实现

> ID：14471313
> 
> 赞同：0
> 
> 时间：2013-01-23T02:04:00.073
> 
> 标签：javascript, jquery, fancybox

对此很陌生，但正在取得进展。我使用 Fancybox 作为灯箱，但希望一个缩略图打开多个图像。我找到[了这个小提琴](http://jsfiddle.net/uZCC6/)：

**HTML：**

```
<a class="fancybox" href="http://fancyapps.com/fancybox/demo/1_b.jpg"><img src="http://fancyapps.com/fancybox/demo/1_s.jpg" alt=""/></a>

<div class="hidden">
<a class="fancybox" href="http://fancyapps.com/fancybox/demo/2_b.jpg"><img src="http://fancyapps.com/fancybox/demo/2_s.jpg" alt=""/></a>

<a class="fancybox" href="http://fancyapps.com/fancybox/demo/3_b.jpg"><img src="http://fancyapps.com/fancybox/demo/3_s.jpg" alt=""/></a>
</div> 
```

**CSS：**

```
.hidden {
    display: none;
} 
```

**Javascript：**

```
$(".fancybox")
    .attr('rel', 'gallery')
    .fancybox({
        padding : 0
    }); 
```

我复制了 HTML 并将其粘贴到我的文档中。图像显示，但所有缩略图。取右上角的 CSS，粘贴到 fancybox.css 文件中。太好了，现在 3 个图像到一个缩略图，但它还包括页面上的任何其他图像。我必须在上面的 jsfiddle 文档中的 HTML 框下方添加 .js，但我不知道需要将此代码添加到哪个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:22:18.447

你的问题真的不清楚，因为杰夫建议尝试用例子来说明。如果你的意思是这部分代码

```
$(".fancybox")
    .attr('rel', 'gallery')
    .fancybox({
        padding : 0
    }); 
```

这需要添加到您放置此 Fancy Box 的 html 页面中，您将其放置在 a`<script></script>`中并将其放入`page load`事件中。

# c++ - c++ 中客户端程序的可选命令行参数

> ID：14471318
> 
> 赞同：0
> 
> 时间：2013-01-23T02:04:55.350
> 
> 标签：c++, command-line-arguments

我必须修改需要 2 个命令行参数的代码

```
 if (argc == 3){
   host = argv[1];
    port = atoi(argv[2]);
      else {
    fprintf(stderr, "usage error: incorrect number of arguments\n"); 
```

以任何顺序（用户名、服务器主机编号、服务器端口编号）有 3 个可选命令行参数。我这样写但它不起作用。有人可以帮我弄清楚该怎么做。谢谢

```
 if (argc<1 || argc>4)
    fprintf(stderr, "usage error: incorrect number of arguments\n");
else 
    for(int i=1;i<=argc;i++)
    {
        if (strcmp( argv[i],"-u"==0 )
             username=argv[i];
        if(strcmp(argv[i],"-p"==0)
            port=atoi(argv[i]);
        if (strcmp(avrgv[i],"-h"==0)
            host=(argv[i]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:07:18.450

使用[`getopt`](http://www.gnu.org/software/libc/manual/html_node/Using-Getopt.html#Using-Getopt)，它是专门为以一致的方式处理命令行参数而设计的，这是众所周知的难以正确执行的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:13:11.453

您应该增加索引以绕过选项获取参数的值。例如像这样修改你的代码。

```
 if (argc<1 || argc>4)
        fprintf(stderr, "usage: %s -u username\n", argv[0]);
    else 
        for(int i=1;i<=argc;i += 2)
        {
            if (strcmp( argv[i],"-u")==0 )
                 username=argv[i + 1]; 
```

此外，您最好将其定义`username`为`char`数组并将参数值复制到其中，这样您就可以直接对其进行修改，如下所示：

```
char username[NAME_LEN + 1];                            // +1 for tailing '\0'
strncpy(username, argv[i + 1], NAME_LEN); 
```

# web-scraping - Scrapy：无法通过登录抓取页面

> ID：14471324
> 
> 赞同：2
> 
> 时间：2013-01-23T02:05:34.143
> 
> 标签：web-scraping, scrapy, scrape

我想抓取下面显示的这些页面，但它需要身份验证。尝试了下面的代码，但它说 0 个页面被刮掉了。我无法理解问题所在。有人可以帮忙吗..

```
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.spiders.init import InitSpider
from scrapy.http import Request, FormRequest
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.contrib.spiders import Rule
from kappaal.items import KappaalItem

class KappaalCrawler(InitSpider):
    name = "initkappaal"
    allowed_domains = ["http://www.kappaalphapsi1911.com/"]
    login_page = 'http://www.kappaalphapsi1911.com/login.aspx'
    #login_page = 'https://kap.site-ym.com/Login.aspx'
    start_urls = ["http://www.kappaalphapsi1911.com/search/newsearch.asp?cdlGroupID=102044"]

    rules = ( Rule(SgmlLinkExtractor(allow= r'-\w$'), callback='parseItems', follow=True), )
    #rules = ( Rule(SgmlLinkExtractor(allow=("*", ),restrict_xpaths=("//*[contains(@id, 'SearchResultsGrid')]",)) , callback="parseItems", follow= True), )

    def init_request(self):
        """This function is called before crawling starts."""
        return Request(url=self.login_page, callback=self.login)

    def login(self, response):
        """Generate a login request."""
        return FormRequest.from_response(response,
                    formdata={'u': 'username', 'p': 'password'},
                    callback=self.check_login_response)

    def check_login_response(self, response):
        """Check the response returned by a login request to see if we are
        successfully logged in.
        """
        if "Member Search Results" in response.body:
            self.log("Successfully logged in. Let's start crawling!")
            # Now the crawling can begin..
            self.initialized()
        else:
            self.log("Bad times :(")
            # Something went wrong, we couldn't log in, so nothing happens.

    def parseItems(self, response):
        hxs = HtmlXPathSelector(response)
        members = hxs.select('/html/body/form/div[3]/div/table/tbody/tr/td/div/table[2]/tbody')
        print members
        items = []
        for member in members:
            item = KappaalItem()
            item['Name'] = member.select("//a/text()").extract()
            item['MemberLink'] = member.select("//a/@href").extract()
            #item['EmailID'] = 
            #print item['Name'], item['MemberLink']
            items.append(item)
        return items 
```

执行刮板后得到以下响应

```
2013-01-23 07:08:23+0530 [scrapy] INFO: Scrapy 0.16.3 started (bot: kappaal)
2013-01-23 07:08:23+0530 [scrapy] DEBUG: Enabled extensions: FeedExporter, LogStats,      TelnetConsole, CloseSpider, WebService, CoreStats, SpiderState
2013-01-23 07:08:23+0530 [scrapy] DEBUG: Enabled downloader middlewares:HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2013-01-23 07:08:23+0530 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2013-01-23 07:08:23+0530 [scrapy] DEBUG: Enabled item pipelines:
2013-01-23 07:08:23+0530 [initkappaal] INFO: Spider opened
2013-01-23 07:08:23+0530 [initkappaal] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2013-01-23 07:08:23+0530 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2013-01-23 07:08:23+0530 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2013-01-23 07:08:26+0530 [initkappaal] DEBUG: Crawled (200) <GET https://kap.site-ym.com/Login.aspx> (referer: None)
2013-01-23 07:08:26+0530 [initkappaal] DEBUG: Filtered offsite request to 'kap.site-ym.com': <GET https://kap.site-ym.com/search/all.asp?bst=Enter+search+criteria...&p=P%40ssw0rd&u=9900146>
2013-01-23 07:08:26+0530 [initkappaal] INFO: Closing spider (finished)
2013-01-23 07:08:26+0530 [initkappaal] INFO: Dumping Scrapy stats:
        {'downloader/request_bytes': 231,
         'downloader/request_count': 1,
         'downloader/request_method_count/GET': 1,
         'downloader/response_bytes': 23517,
         'downloader/response_count': 1,
         'downloader/response_status_count/200': 1,
         'finish_reason': 'finished',
         'finish_time': datetime.datetime(2013, 1, 23, 1, 38, 26, 194000),
         'log_count/DEBUG': 8,
     'log_count/INFO': 4,
     'request_depth_max': 1,
     'response_received_count': 1,
     'scheduler/dequeued': 1,
     'scheduler/dequeued/memory': 1,
     'scheduler/enqueued': 1,
     'scheduler/enqueued/memory': 1,
     'start_time': datetime.datetime(2013, 1, 23, 1, 38, 23, 542000)}
2013-01-23 07:08:26+0530 [initkappaal] INFO: Spider closed (finished) 
```

我不明白为什么它没有像前面提到的那样验证和解析起始 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:21:19.060

还要确保您启用了 cookie，以便在您登录时会话保持登录状态

```
COOKIES_ENABLED = True
COOKIES_DEBUG = True 
```

在你的`settings.py`文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:10:59.927

我这样修复它：

```
def start_requests(self):
    return self.init_request()

def init_request(self):
    return [Request(url=self.login_page, callback=self.login)]

def login(self, response):
    return FormRequest.from_response(response, formdata={'username': 'username', 'password': 'password'}, callback=self.check_login_response)

def check_login_response(self, response):
    if "Logout" in response.body:
        for url in self.start_urls:
            yield self.make_requests_from_url(url)
    else:
        self.log("Could not log in...") 
```

通过重载 start_requests，您可以确保登录过程正确结束，然后才开始抓取。

我正在使用 CrawlSpider 并完美运行！希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T21:57:24.183

这可能不是你想要的回应，但我能感觉到你的痛苦......

我遇到了同样的问题，我觉得文档对于 Scrapy 来说是不够的。我最终使用 mechanize 登录。如果你现在用 scrapy great if 来解决这个问题，Mechanize 非常简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T17:11:41.800

好的，所以我可以看到几个问题。但是，由于用户名和密码，我无法测试代码。是否有可用于测试目的的虚拟帐户？

1.  InitSpider 不执行规则，因此虽然它不会引起问题，但应该将其删除。
2.  `check_login_response`需要返回一些东西。

以机智：

```
def check_login_response(self, response):
    """Check the response returned by a login request to see if we are
    successfully logged in.
    """
    if "Member Search Results" in response.body:
        self.log("Successfully logged in. Let's start crawling!")
        # Now the crawling can begin..
        return self.initialized()
    else:
        self.log("Bad times :(")
        # Something went wrong, we couldn't log in, so nothing happens.
        return 
```

# python - 如何停止在 Tkinter 中引发事件？

> ID：14471326
> 
> 赞同：5
> 
> 时间：2013-01-23T02:05:46.170
> 
> 标签：python, events, tkinter

我有一些这样的代码

```
from Tkinter import *
master = Tk()
def oval_mouse_click(event):
    print "in oval"
def canvas_mouse_click(event):
    print "in canvas"
w = Canvas(master, width = 800, height = 600)
uid = w.create_oval(390, 290, 410, 310, fill='blue')
w.tag_bind(uid, "<Button-1>", lambda x: oval_mouse_click(x))
w.bind("<Button-1>" , canvas_mouse_click)
w.pack()
mainloop() 
```

当我单击画布时，控制台中有“画布中”消息。当我单击椭圆形时，我有两条消息“椭圆形”和“画布中”，但我只想收到第一条消息。有什么方法可以阻止事件引发？

我可以用一些全局标志来完成这项任务，但我认为 Tkl 应该有更自然的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:58:23.587

这是处理您的问题的最简单示例：

```
import Tkinter

def oval_mouse_click(event):
    print "in oval"
    event.widget.tag_click = True

def canvas_mouse_click(event):
    if event.widget.tag_click:
        event.widget.tag_click = False
        return
    print "in canvas"

root = Tkinter.Tk()
canvas = Tkinter.Canvas(width=400, height=300)
oid = canvas.create_oval(400/2-10, 300/2-10, 400/2+10, 300/2+10, fill='blue')
canvas.tag_click = False
canvas.tag_bind(oid, "<Button-1>", oval_mouse_click)
canvas.bind("<Button-1>" , canvas_mouse_click)
canvas.pack()
root.mainloop() 
```

没有其他更简单的方法可以在`Canvas`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:03:32.373

我刚刚在[Python tkinter:stop event propagation in text widgets tags 中](https://stackoverflow.com/questions/13066773/python-tkinter-stopping-event-propagation-in-text-widgets-tags)发布了针对类似问题的改进解决方案。

核心思想与之前的解决方案相同：`Canvas`通过将小部件绑定到与`tag_bind`. 我提出的改进解决方案**现在可以模拟`return "break"`Tk 的其他绑定+回调对的预期行为**。简而言之：

1.  围绕希望创建一个包装器`callback`，即一个可调用的类实例
2.  当调用类实例时，运行`callback`并检查其结果。
    *   如果结果是`"break"`，则暂时劫持事件传播：`bind`小`Canvas`部件与绑定到 的相同事件`tag_bind`，回调为空。然后，在一段空闲时间之后，`unbind`.
    *   如果结果不是`"break"`：什么都不做，事件将`Canvas`自动传播到

上面的链接列出了一个完整的`Text`小部件工作示例，但它可以立即转移到 Canvas 小部件。

# json - d3js 强制定向无法从 json 读取

> ID：14471327
> 
> 赞同：1
> 
> 时间：2013-01-23T02:05:50.587
> 
> 标签：json, d3.js

我有一个简单的 json 文件，它是：

```
{
 "nodes":[ 
{"name":"Moe","group":1},
{"name":"Madih1","group":1},
{"name":"Madih2","group":1},
{"name":"Nora","group":1},
{"name":"Myna","group":1}
 ],
 "links":[
{"source":35,"target":44,"value":1},
{"source":44,"target":35,"value":1},
{"source":45,"target":35,"value":1},
{"source":45,"target":44,"value":1},
{"source":35,"target":49,"value":1},
{"source":49,"target":35,"value":1}
 ] 
 } 
```

[当我保存它时，完全使用http://bl.ocks.org/4062045#index.html](http://bl.ocks.org/4062045#index.html)中所示的 html 代码并解决上面的 json，cancas 上什么也没有出现。

如果您能帮我解决这个问题，我将不胜感激，因为我对它不是很熟悉。此外，如果我知道使用 json 绘制这样的图形所需的最少代码，那就太好了。

最好的，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:39:51.393

“源”和“目标”的数量是指节点数组中项目的索引。因此，您可以将 json 更改为以下内容：

```
{
 "nodes":[ 
    {"name":"Moe","group":1},
    {"name":"Madih1","group":1},
    {"name":"Madih2","group":1},
    {"name":"Nora","group":1},
    {"name":"Myna","group":1}
 ],
 "links":[
    {"source":0,"target":1,"value":1},
    {"source":1,"target":2,"value":1},
    {"source":2,"target":3,"value":1},
    {"source":3,"target":4,"value":1},
 ] 
 } 
```

然后，您可以复制[http://bl.ocks.org/4062045#index.html](http://bl.ocks.org/4062045#index.html)示例中的代码作为最低代码。请记住将 json 文件更改为您自己的 json 文件。

```
d3.json("path/to/your/json", function(error, graph) {
    //codes
}); 
```

# mysql - 从另一个表插入后更新行

> ID：14471329
> 
> 赞同：3
> 
> 时间：2013-01-23T02:06:12.993
> 
> 标签：mysql, triggers, insert

我使用 MySql 并有两个表，`master`并且`inventory`. `product_description`现在我需要从`master`表字段插入更新库存表字段后的触发器`product_description`。

例子：

**主表：**

```
pmid  -  product_name - product_description - price
1        tv                HD tv               10 
```

**库存表：**

```
invid - pmid  - product_description - color
1        1                             black 
```

触发器应从`partmaster`pmid = pmid 插入 product_description。

```
CREATE TABLE IF NOT EXISTS `master` (
  `pmid` int(11) NOT NULL AUTO_INCREMENT,
  `product_name` varchar(255) NOT NULL,
  `product_description` varchar(255) NOT NULL,
  `price` varchar(10) NOT NULL,
  PRIMARY KEY (`pmid`),
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=20 ;

CREATE TABLE IF NOT EXISTS `inventory` (
  `invid` int(11) NOT NULL AUTO_INCREMENT,
  `pmid` int(11) NOT NULL,
  `product_description` varchar(255) NOT NULL,
  `color` int(11) NOT NULL,
  PRIMARY KEY (`invid`),
  KEY `pmid` (`pmid`),   //foreign key master table//
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=20 ; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:58:59.430

```
delimiter //
CREATE TRIGGER update_inventory AFTER INSERT ON master
FOR EACH ROW 
BEGIN
UPDATE inventory I SET I.product_description = new.product_description 
WHERE (I.pmid = new.pmid );
END; //
delimiter ; 
```

我发现您的数据不一致： 1\. 您如何在没有主表的情况下将 pmid 存入库存？2\. 颜色字段为数字；与您的示例相矛盾。

# c++ - 在构造函数中动态分配新对象

> ID：14471332
> 
> 赞同：2
> 
> 时间：2013-01-23T02:06:51.367
> 
> 标签：c++, heap-memory, heap-corruption

所以给定这个简单的场景：

```
class A{
public:        
    A(){
        n = new int(10);
    }
    ~A(){
        delete n;
    }
    int* n;
};

int main(){
    A* a = new A();
} 
```

这是否会导致堆损坏（一般问题），因为在我进行新分配时，指针尚未完成分配？

如果是这样，也禁止在堆构造函数中使用 std::vector ，对吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:10:24.513

没有“堆构造函数”之类的东西，不，你不能通过在堆上`new`对象的构造函数中插入内存来破坏堆。的内存在调用`new A`时完全分配。`A::A()`你所做的既正确又*非常*普遍。您的构造函数*永远*不需要关心正在构造的对象是在堆栈上分配还是在堆上分配。否则，指针和类将毫无用处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T02:14:13.377

如果“new”抛出异常，则不会分配对象（请注意在“new”之前进行的任何分配都需要释放，否则您将有内存泄漏）..

由于构造函数不能返回错误代码，因此异常被认为用作错误系统。

```
myclass::myclass()
{
    param1 = new type1(); //successfull
    try
    {
        param2= new type2(); //may fail
    }
    (...)
    {
        delete param1; //need to deallocate
    }
} 
```

这有点矫枉过正，我更喜欢在构造函数中完全没有异常，有些人用构造函数制作整个框架而不是抛出异常。

无论如何，分配器中的任何其他错误都可能导致：

分段错误（访问超出范围的值）

堆损坏（覆盖内存范围内但技术上不属于对象的数据）

无限循环（您需要在外部中止程序，否则它将永远不会退出分配器）。

当然，这些是您使用普通代码也可能遇到的主要问题。然而，默认分配器不会产生任何问题，至少可以抛出“内存不足”异常。如果你没有足够的内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T02:15:51.473

您的`a`指针**已完成分配**。

新作品如下（过于简化）

*   分配
*   构造

所以在你的情况下

*   分配一个
*   构造一个
    *   分配整数
    *   构造 int - 初始化
*   完成构造 A

这忽略了涉及异常的情况..

# ruby-on-rails - 麻烦推到 Heroku

> ID：14471333
> 
> 赞同：2
> 
> 时间：2013-01-23T02:06:58.140
> 
> 标签：ruby-on-rails, heroku, syntax, gemfile

我无法推送到 Heroku。环顾四周，但没有找到可行的解决方案。似乎缺少一些库，gemfile 在 dev 和 test 下有 sqlite，在 production 下有 pg。下面是推送的结果和sqlite的依赖：

```
Fetching: sqlite3-1.3.7.gem (100%)
Building native extensions.  This could take a while...
Fetching: sqlite3-ruby-1.3.3.gem (100%)

#######################################################

Hello! The sqlite3-ruby gem has changed it's name to just sqlite3\.  Rather than
installing `sqlite3-ruby`, you should install `sqlite3`.  Please update your
dependencies accordingly.

Thanks from the Ruby sqlite3 team!

<3 <3 <3 <3

#######################################################

Successfully installed sqlite3-1.3.7
Successfully installed sqlite3-ruby-1.3.3
2 gems installed
user-macbook:sample_app user$ git push heroku master
Counting objects: 146, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (108/108), done.
Writing objects: 100% (117/117), 17.84 KiB, done.
Total 117 (delta 50), reused 0 (delta 0)
-----> Removing .DS_Store files
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.0.pre.5
   Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
   Fetching gem metadata from https://rubygems.org/.........
   Fetching gem metadata from https://rubygems.org/..
   Using rake (10.0.3)
   Using i18n (0.6.1)
   Using multi_json (1.5.0)
   Using activesupport (3.2.3)
   Using builder (3.0.4)
   Using activemodel (3.2.3)
   Using erubis (2.7.0)
   Using journey (1.0.4)
   Using rack (1.4.1)
   Using rack-cache (1.2)
   Using rack-test (0.6.2)
   Using hike (1.2.1)
   Using tilt (1.3.3)
   Using sprockets (2.1.3)
   Using actionpack (3.2.3)
   Using mime-types (1.19)
   Using polyglot (0.3.3)
   Using treetop (1.4.12)
   Using mail (2.4.4)
   Using actionmailer (3.2.3)
   Using arel (3.0.2)
   Using tzinfo (0.3.35)
   Using activerecord (3.2.3)
   Using activeresource (3.2.3)
   Installing annotate (2.5.0)
   Installing bcrypt-ruby (3.0.1)
   Installing bootstrap-sass (2.0.0)
   Installing coderay (1.0.8)
   Using coffee-script-source (1.4.0)
   Using execjs (1.4.0)
   Using coffee-script (2.2.0)
   Using rack-ssl (1.3.2)
   Using json (1.7.5)
   Using rdoc (3.12)
   Using thor (0.14.6)
   Using railties (3.2.3)
   Using coffee-rails (3.2.2)
   Using diff-lcs (1.1.3)
   Installing factory_girl (2.3.2)
   Installing factory_girl_rails (1.4.0)
   Installing listen (0.6.0)
   Installing lumberjack (1.0.2)
   Installing method_source (0.8.1)
   Installing slop (3.3.3)
   Installing pry (0.9.10)
   Installing guard (1.6.0)
   Installing guard-rspec (0.5.5)
   Using jquery-rails (2.0.1)
   Using pg (0.12.2)
   Using bundler (1.3.0.pre.5)
   Using rails (3.2.3)
   Using rspec-core (2.9.0)
   Using rspec-expectations (2.9.1)
   Using rspec-mocks (2.9.0)
   Using rspec (2.9.0)
   Using rspec-rails (2.9.0)
   Using sass (3.2.4)
   Using sass-rails (3.2.5)
   Installing sqlite3 (1.3.6)
   Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
   /usr/local/bin/ruby extconf.rb
   checking for sqlite3.h... no
   sqlite3.h is missing. Try 'port install sqlite3 +universal'
   or 'yum install sqlite-devel' and check your shared library search path (the
   location where your sqlite3 shared library is located).
   *** extconf.rb failed ***
   Could not create Makefile due to some reason, probably lack of
   necessary libraries and/or headers.  Check the mkmf.log file for more
   details.  You may need configuration options.
   Provided configuration options:
   --with-opt-dir
   --without-opt-dir
   --with-opt-include
   --without-opt-include=${opt-dir}/include
   --with-opt-lib
   --without-opt-lib=${opt-dir}/lib
   --with-make-prog
   --without-make-prog
   --srcdir=.
   --curdir
   --ruby=/usr/local/bin/ruby
   --with-sqlite3-dir
   --without-sqlite3-dir
   --with-sqlite3-include
   --without-sqlite3-include=${sqlite3-dir}/include
   --with-sqlite3-lib
   --without-sqlite3-lib=${sqlite3-dir}/lib
   --enable-local
   --disable-local
   Gem files will remain installed in /tmp/build_3vt0kpt7q53ss/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6 for inspection.
   Results logged to /tmp/build_3vt0kpt7q53ss/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out
   An error occurred while installing sqlite3 (1.3.6), and Bundler cannot continue.
   Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !         Heroku push rejected, failed to compile Ruby/rails app

    To git@heroku.com:still-woodland-3538.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:still-woodland-3538.git' 
```

sqlite依赖：

```
Gem sqlite3-1.3.5
  hoe (~> 2.12, development)
  mini_portile (~> 0.2.2, development)
  rake-compiler (~> 0.7.0, development)
  rdoc (~> 3.10, development)

Gem sqlite3-1.3.6
  hoe (~> 3.0, development)
  mini_portile (~> 0.2.2, development)
  rake-compiler (~> 0.7.0, development)
  rdoc (~> 3.10, development)

Gem sqlite3-1.3.7
  hoe (~> 3.4, development)
  mini_portile (~> 0.2.2, development)
  rake-compiler (~> 0.8.2, development)
  rdoc (~> 3.10, development) 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'bootstrap-sass', '2.0.0'
gem 'bcrypt-ruby', '3.0.1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :devlopment, :test do
  gem 'rspec-rails', '2.9.0'
  gem 'guard-rspec', '0.5.5'
  gem 'sqlite3'
  gem 'annotate'
  gem 'factory_girl_rails', '1.4.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.4'
  gem 'coffee-rails', '~> 3.2.2'
  gem 'uglifier', '1.2.3'
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
 # gem 'therubyracer', :platform => :ruby
   end

   gem 'jquery-rails', '2.0.1'

   # To use ActiveModel has_secure_password
   # gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug'
group :test do
    gem 'capybara', '1.1.2'
    gem 'rspec-rails', '2.9.0'
    gem 'rb-fsevent'
    gem 'growl', '1.0.3'
    gem 'spork', '0.9.0'
end

group :production do
    gem 'pg'
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:08:01.393

问题似乎是你有一个错字：`group :devlopment, :test`应该是`group :development, :test`. 您可以看到您在 " `devlopment`" 组下使用的所有 gem 都已安装在 Heroku 上。

看看更正拼写是否能确保不会尝试在`sqlite3`生产中使用该宝石（或该组中的任何其他宝石）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:05:48.840

Heroku 不支持 sqlite3。相反，您应该`gem pg`改用。

```
group :production do 
  gem 'pg'
end 
```

类似于[使用 Sqlite3 将 RoR 应用程序部署到 Heroku 失败](https://stackoverflow.com/questions/3897431/deploying-ror-app-to-heroku-with-sqlite3-fails)

# c - 在没有竞争条件的 Windows 上将文件大小增加到至少 N

> ID：14471338
> 
> 赞同：0
> 
> 时间：2013-01-23T02:07:32.910
> 
> 标签：c, windows, filesize

我正在寻找一种方法以不受竞争条件影响的方式将文件大小增加到至少 N 个字节。

当然，简单的方法有一个竞争条件：

```
LARGE_INTEGER large_int;
GetFileSizeEx(handle, &large_int);
if (large_int.QuadPart < N) {
  SetFilePointerEx(handle, N, 0, FILE_BEGIN);
  SetEndOfFile(handle);
} 
```

有任何想法吗？

编辑：详细说明比赛条件：

初始文件大小为零。Alice 想要将大小设置为至少 100。Bob 想要将大小设置为至少 200。很明显，如果没有竞态条件，那么当 Alice 和 Bob 都完成时，文件的大小必须为至少200。

假设 Alice 和 Bob 都将当前文件大小读取为零。然后 Bob 看到他需要将大小增加到 200，因此他将大小设置为 200。现在 Alice 开始运行，她得出结论 100 大于零，她认为这是当前大小，然后她设置大小为 100。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:31:08.760

使用[文件锁定](http://en.wikipedia.org/wiki/File_locking)确保只有一个进程在处理文件。

大概是这样的：

```
check file size, if too small then
  Lock file
  check size again
  set size if needed
  Unlock file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:39:24.540

我找到了一种方法：

```
DWORD protect = PAGE_READONLY;
LARGE_INTEGER large_int;
large_int.QuadPart = desired_minimum_size;
HANDLE map_handle = CreateFileMapping(file_handle, 0, protect, large_int.HighPart, large_int.LowPart, 0);
CloseHandle(map_handle); 
```

我想知道与我上面提到的幼稚方法相比，这样做的开销是多少。

显然，无论该文件是否已经存在，都可以创建一个新的文件映射对象。在这方面，文档非常模糊，但我已经检查过它是否有效。

# c++ - 无法打开包含文件：'initializer_list'

> ID：14471340
> 
> 赞同：2
> 
> 时间：2013-01-23T02:08:09.667
> 
> 标签：c++, visual-c++, boost, c++11, initializer-list

我想在 Microsoft Visual Studio 2012 (MSVC) 上编译 The Forgotten Server (Tibia OTServer)。但在文件： unordered_set.hpp 我有这个：

```
#if !defined(BOOST_NO_0X_HDR_INITIALIZER_LIST)
#include <initializer_list>
#endif 
```

并给我错误：

> boost/unordered/unordered_set.hpp(27): 致命错误 C1083: 无法打开包含文件: 'initializer_list': 没有这样的文件或目录 (..\spells.cpp)
> 
> boost/unordered/unordered_set.hpp(27): 致命错误 C1083: 无法打开包含文件: 'initializer_list': 没有这样的文件或目录 (..\talkaction.cpp)

我能做些什么？

* * *

通过定义 BOOST_NO_0X_HDR_INITIALIZER_LIST 现在我有以下错误：

```
..\scriptmanager.cpp(147): error C2039: 'string' : is not a member of 'std::basic_string<_Elem,_Traits,_Alloc>'
          with
          [
              _Elem=char,
              _Traits=std::char_traits<char>,
              _Alloc=std::allocator<char>
          ] 
```

在：

```
std::string s = BOOST_DIR_ITER_FILENAME(it); 
```

# html - VideoJS 在 IE9 中默认为 Flash

> ID：14471341
> 
> 赞同：1
> 
> 时间：2013-01-23T02:08:13.643
> 
> 标签：html, video.js

出于某种我无法理解的原因，播放器默认在 IE 中闪烁，尽管它在 Chrome 和 FF 中运行良好。我添加了所有三种推荐的视频格式（mp4、webm 和 ogv）。

[http://www.bijouphotobooths.com/](http://www.bijouphotobooths.com/)

非常感激任何的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:54:06.513

IE 9 以[怪癖模式](https://stackoverflow.com/questions/1695787/what-is-quirks-mode)呈现您的页面。在 quirks 模式下，IE 无法原生播放 MP4，因此需要 Flash 后备。

如果您打开 IE 的开发人员工具（按 F12）并将文档模式从“Quirks”切换到“Internet Explorer 9 标准”，您会看到重新加载页面上的播放器现在可以使用浏览器的原生 MP4 支持。

也可以在开发者工具的控制台中试试这个。在 quirks 模式下它会出错，因为 canPlayType 不是一个函数。

```
document.createElement("video").canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'); 
```

有关如何诱使 Internet Explorer 使用标准模式，请参阅此[问题。](https://stackoverflow.com/questions/6529728/html5-doctype-putting-ie9-into-quirks-mode)

# bash - awk 读取每行 csv 后清除数组值

> ID：14471342
> 
> 赞同：2
> 
> 时间：2013-01-23T02:08:19.513
> 
> 标签：bash, csv, awk

我遇到的问题与[以前的帖子](https://stackoverflow.com/questions/14391738/awk-set-elements-in-array)有关。现在我现在拥有的是：

1.  一个 900 万行的 CSV 文件，其中包含随机排列的字段，例如：

    ```
    192.168.12.23,62,LOCAL,341993,23/10/2012
    192.168.12.25,11,MONLOCAL$MONREMOTE,33222$56,22/10/2012$18/10/2012
    192.168.12.678,14,MONLOCAL,341993,22/10/2012

    192.168.12.83,18, , ,
    192.168.12.21,49,LOCAL$REMOTE,19316$15253,22/10/2012$22/10/2012
    192.168.12.79,52,REMOTE,1180306134,19/10/2012
    192.168.12.41,44,MONLOCAL$MONREMOTE,1865871$383666,22/10/2012$22/10/2012
    192.168.12.29,23,MONREMOTE,151145,18/10/2012 
    ```

    正如您可能已经观察到的那样，有 2 个字段分隔符，`,`并且`$`：

    *   字段 1 = IP 地址

    *   字段 2 = 唯一 ID

    *   字段 3 = IP 已使用的连接（例如 LOCAL、REMOTE、MONLOCAL 或 MONREMOTE）

    *   字段 4 = 也可以是 IP 已使用的连接（例如 LOCAL、REMOTE、MONLOCAL 或 MONREMOTE）或与字段 3 相关的值

    *   字段 5 = 如果字段 4 是 LOCAL 或 REMOTE 或 MONLOCAL 或 MONREMOTE，则字段 5 表示字段 3 的值，否则表示与字段 3 相关的时间戳

    *   字段 6 = 如果字段 4 是 LOCAL 或 REMOTE 或 MONLOCAL 或 MONREMOTE，则字段 6 表示字段 4 的值，否则它将不存在。

    *   字段 7 = 如果字段 4 是 LOCAL 或 REMOTE 或 MONLOCAL 或 MONREMOTE，则字段 7 表示字段 3 的时间戳，否则它将不存在。

    *   字段 8 = 如果字段 4 是 LOCAL 或 REMOTE 或 MONLOCAL 或 MONREMOTE，则字段 7 表示字段 4 的时间戳，否则它将不存在。

2.  我需要处理上面的文件并输出以下格式，字段始终按以下顺序（10 个字段）：

    IP,ID,MONLOCAL_value,MONLOCAL_timestamp,LOCAL_value,LOCAL_timestamp,MONREMOTE_value,MONREMOTE_timestamp,REMOTE_value,REMOTE_timestamp 如：

    ```
    192.168.12.23,62, , ,341993,23/10/2012, , , , 
    192.168.12.25,11,33222,22/10/2012, , , , ,56,18/10/2012
    192.168.12.678,14,341993,22/10/2012, , , , , ,  
    192.168.12.83,18, , , , , , , , 
    192.168.12.21,49, , ,19316,22/10/2012, , ,15253,22/10/2012
    192.168.12.79,52, , , , , , ,1180306134,19/10/2012
    192.168.12.41,44,1865871,22/10/2012, , ,383666,22/10/2012, , 
    192.168.12.29,23, , , , ,151145,18/10/2012, , 
    ```

3.  我有以下脚本来处理上面的文件：

    ```
    nawk 'BEGIN {
        while (getline < "'"$data"'" > 0)
        {
        {FS = "[,,$]"; OFS=","}
        split($0,flds)
           {if ($4 ~ /LOCAL|REMOTE|MONLOCAL|MONREMOTE/) {
                if ($3 ~ /MONLOCAL/) {
                        MONREMOTE_time=flds[8];
                        MONREMOTE_value=flds[6];
                        MONLOCAL_time=flds[7];
                        MONLOCAL_value=flds[5]; }
                if ($3 ~ /MONREMOTE/) {
                        MONREMOTE_time=flds[7];
                        MONREMOTE_value=flds[5];
                        REMOTE_value=flds[6];
                        REMOTE_time=flds[8]; }
                if ($3 ~ /REMOTE/) {
                        REMOTE_value=flds[5];
                        REMOTE_time=flds[7];
                        LOCAL_value=flds[6];
                        LOCAL_time=flds[8]; }
        } else {
                if($3 ~ /MONLOCAL/) {
                        MONLOCAL_value=flds[4];
                        MONLOCAL_time=flds[5]; }
                if ($3 ~ /MONREMOTE/) {
                        MONREMOTE_value=flds[4];
                        MONREMOTE_time=flds[5]; }
                if ($3 ~ /LOCAL/) {
                        LOCAL_value=flds[4];
                        LOCAL_time=flds[5]; }
                if ($3 ~ /REMOTE/) {
                        REMOTE_value=flds[4];
                        REMOTE_time=flds[5]; }
        }
      }
      {print MONLOCAL_value",MONLOCAL_time,LOCAL_value,LOCAL_time,MONREMOTE_value,MONREMOTE_time,REMOTE_value,REMOTE_time;}
     }
    }' 
    ```

4.  这里的坏处是，正如您在下面观察到的那样，输出与预期不符，因为我无法在读取每一行后清除数组值，或者找到一种解决方案来为每行动态地对数组元素充电：

    ```
    4915779000211,62, , ,341993,23/10/2012, , , , ,
    4915779000212,11,33222,22/10/2012,341993,23/10/2012,56,18/10/2012, , 
    491639000591,14,341993,22/10/2012,341993,23/10/2012, , , ,  
    491779001768,18,319307448,18/10/2012,19316,22/10/2012,383666,22/10/2012,1180306134,19/10/2012
    4915779000213,49,3849259,05/10/2012,19316,22/10/2012,56,18/10/2012,15253,22/10/2012
    491779000758,52,9356828,08/10/2012,19316,22/10/2012,56,18/10/2012,1180306134,19/10/2012
    4915779000214,44,1865871,22/10/2012,19316,22/10/2012,383666,22/10/2012,1180306134,19/10/2012
    491639000221,23,319307448,18/10/2012,19316,22/10/2012,151145,18/10/2012,1180306134,19/10/2012 
    ```

所以，如果你们知道如何使这个 awk 函数工作并给出预期的输出，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:20:50.097

通过一些修改，您可以使用类似于以下内容的内容：

```
while read line; do 
  if [[ "$line" == *\$* ]]; then 
    echo $line | awk -F',|\$' '{print $1,$2,$5,$6,$3}' >> newfile;
  else
    echo $line | awk -F',' '{print $1,$2,$3,,$4,,$5}' >> newfile;
  fi
done < "/path/to/your/file" 
```

# php - Gmail 将合法邮件从 php mail() 函数发送到垃圾邮件文件夹

> ID：14471347
> 
> 赞同：2
> 
> 时间：2013-01-23T02:08:34.777
> 
> 标签：php, email, gmail, spam, spf

我已经为此搜索了解决方案，但没有一个解决了我的问题。我也在使用谷歌应用程序。

这是在 gmail 上收到的邮件的副本：

```
Delivered-To: suporte@taskka.com.br
Received: by 10.114.37.166 with SMTP id z6csp286681ldj;
        Tue, 22 Jan 2013 17:22:28 -0800 (PST)
X-Received: by 10.236.119.206 with SMTP id n54mr27422481yhh.8.1358904147674;
        Tue, 22 Jan 2013 17:22:27 -0800 (PST)
Return-Path: <contato@jetcarros.com.br>
Received: from smtp-web3-ctba.kinghost.net (smtp-web3-ctba.kinghost.net. [177.12.170.3])
        by mx.google.com with ESMTP id h1si4616624anp.108.2013.01.22.17.22.26;
        Tue, 22 Jan 2013 17:22:27 -0800 (PST)
Received-SPF: pass (google.com: domain of contato@jetcarros.com.br designates 177.12.170.3 as permitted sender) client-ip=177.12.170.3;
Authentication-Results: mx.google.com;
       spf=pass (google.com: domain of contato@jetcarros.com.br designates 177.12.170.3 as permitted sender) smtp.mail=contato@jetcarros.com.br
Received: from smtp-web-ctba.kinghost.net (smtp-web-ctba [127.0.0.1])
       by smtp-web3-ctba.kinghost.net (Postfix) with ESMTP id 7C5D58F2AE
       for <suporte@taskka.com.br>; Tue, 22 Jan 2013 23:22:26 -0200 (BRST)
Received: from web593.kinghost.net (unknown [10.27.86.33])
       by smtp-web-ctba.kinghost.net (Postfix) with ESMTP id 7BB2BC2DFC6C
       for <suporte@taskka.com.br>; Tue, 22 Jan 2013 23:22:26 -0200 (BRST)
Received: by web593.kinghost.net (Postfix, from userid 850)
       id 77EA6E9B6; Tue, 22 Jan 2013 23:22:26 -0200 (BRST)
To: suporte@taskka.com.br
Subject: test mail
From: contato@jetcarros.com.br
Subject: test mail
MIME-Version: 1.0
Content-Type: text/html; charset=UTF-8
Message-Id: <20130123012226.77EA6E9B6@web593.kinghost.net>
Date: Tue, 22 Jan 2013 23:22:26 -0200 (BRST)

It's a test mail<br/>
Another line<br/>
Yet another line. 
```

和 jetcarros.com.br 上的 spf：

> v=spf1 ip4:177.12.170.0/24 a mx a:jetcarros.com.br 包括:aspmx.googlemail.com ?all

在其他情况下，我发现人们说我可以通过将 php 邮件函数上的第 5 个参数设置为“-f$senderAdderess”来解决问题，但是信封发件人甚至不会像您一样出现在邮件的任何部分可以看上面。

这是我的脚本：

```
 $email_content = implode ( "\n",array ( "It's a test mail", "Another line", "Yet another line.")
    $email_headers = implode ( "\n",array ( "From: contato@jetcarros.com.br", "Subject: test mail","Return-Path:  contato@jetcarros.com.br","MIME-Version: 1.0","Content-Type: text/html; charset=UTF-8" ) );  
    mail('suporte@taskka.com.br', 'test mail', nl2br($email_content), $email_headers, "-fcontato@jetcarros.com.br") 
```

**编辑：**正如 iWizardPro 建议的那样，我使用 DKIM 来签署我的邮件，几个小时后让它正确签名，我已经完成了。但是我的电子邮件一直在垃圾邮件文件夹中。

欢迎在这里提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:12:21.140

我相信 Gmail 需要 DKIM 密钥来验证电子邮件的有效性。

当我实现我网站的电子邮件系统时，我必须为 Gmail 添加 DKIM 密钥，以停止阻止我的电子邮件并将它们发送到垃圾邮件。

编辑：我相信这个网站是相关的，因为您说您正在使用 Google Apps： http: [//support.google.com/a/bin/answer.py ?hl=en&answer=174124](http://support.google.com/a/bin/answer.py?hl=en&answer=174124)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:46:23.480

您的 IP-/域声誉似乎被破坏了：

*   发件人分数：[14 / 100](https://www.senderscore.org/lookup.php?lookup=177.12.169.33)
*   McAfee：红色 =[高垃圾邮件风险](http://www.mcafee.com/threat-intelligence/ip/default.aspx?ip=177.12.169.33)（电子邮件）

解决方案：从另一个 IP/域发送。

# r - 数据集子集的回归

> ID：14471351
> 
> 赞同：2
> 
> 时间：2013-01-23T02:08:55.010
> 
> 标签：r, linear-regression

我想做以下事情并需要一些帮助：

分别计算“身高”超过“年龄”[lm(Height~Age)] 的斜率和截距

(A) 每个人

(二) 性别

并创建一个包含结果（斜率和截距）的表格。我可以为此使用“申请”吗？

在下一步中，我想做一个统计测试，以确定性别之间的斜率和截距是否显着不同。我知道如何在 R 中进行测试，但也许有一种方法可以结合斜率/截距计算和 T 检验。

示例数据：

```
example = data.frame(Age = c(1, 3, 6, 9, 12,
                             1, 3, 6, 9, 12,
                             1, 3, 6, 9, 12,
                             1, 3, 6, 9, 12), 
                Individual = c("Jack", "Jack", "Jack", "Jack", "Jack",
                               "Jill", "Jill", "Jill", "Jill", "Jill",
                               "Tony", "Tony", "Tony", "Tony", "Tony",
                               "Jen", "Jen", "Jen", "Jen","Jen"),
                    Gender = c("M", "M", "M", "M", "M",
                               "F", "F", "F", "F", "F",
                               "M", "M", "M", "M", "M",
                               "F", "F", "F", "F", "F"),
                    Height = c(38, 62, 92, 119, 165,
                               31, 59, 87, 118, 170,
                               45, 72, 93, 155, 171,
                               33, 61, 92, 115, 168)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T06:25:24.900

对每个级别分别进行回归分析，然后在数据框中组合斜率和截距的一种方法是使用`ddply()`库中的函数`plyr`。

```
library(plyr)

ddply(example,"Individual",function(x) coefficients(lm(Height~Age,x)))
  Individual (Intercept)      Age
1       Jack    26.29188 11.11421
2        Jen    22.10660 11.56345
3       Jill    18.33249 12.04315
4       Tony    33.02030 11.96447

ddply(example,"Gender",function(x) coefficients(lm(Height~Age,x)))
  Gender (Intercept)      Age
1      F    20.21954 11.80330
2      M    29.65609 11.53934 
```

# android - 未创建项目

> ID：14471352
> 
> 赞同：0
> 
> 时间：2013-01-23T02:08:55.433
> 
> 标签：android, cordova

我挣扎了几个小时让 ant 和 java 运行，现在我终于可以使用 create 命令了，它运行没有错误，但是在指定的文件夹中没有创建项目。

我的问题可能是什么？

![命令行](../Images/b80007b5ac41e104d4650bec7a9bf46b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:47:40.187

[Cordova 2.1.0 (PhoneGap) 为 Android 创建脚本说“项目已经存在”或“发生错误。删除项目”](https://stackoverflow.com/questions/13475687/cordova-2-1-0-phonegap-create-script-for-android-says-project-already-exists)

此处列出的第一个解决方案。

命令应采用以下格式：

```
create ./test2 com.mytest MyTest 
```

# java - 尝试创建新对话框并将其中的进度条绑定到工作人员时出现 JavaFX 错误

> ID：14471353
> 
> 赞同：1
> 
> 时间：2013-01-23T02:08:57.040
> 
> 标签：java, javabeans, javafx

我遵循了关于 StackOverflow [Passing Parameters JavaFX FXML](https://stackoverflow.com/questions/14187963/passing-parameters-javafx?lq=1)的另一个答案的建议，但是当我尝试运行我的程序时，我得到了一个空指针异常。

我有代码可以创建一个新工作人员并启动一个线程，然后尝试显示一个分析器对话框。但是，此对话框无法正确打开。

```
@FXML
private void profilePDBFoldertoCSVAction(ActionEvent e) {
PDBProfilerOperator worker = new PDBProfilerOperator();
FileChooser fc = new FileChooser();
DirectoryChooser dc = new DirectoryChooser();
Stage s = new Stage();
worker.setPdbsdirectory(dc.showDialog(s));
worker.setOutputCSV(fc.showSaveDialog(s));
Thread th = new Thread(worker);
th.setDaemon(true);
th.start();
worker.showProfilerDialog(worker);
} 
```

showProfilerDialog 如下：

```
public Stage showProfilerDialog(PDBProfilerOperator operator) {
FXMLLoader loader = new FXMLLoader(getClass().getResource("/pdpro/gui/dialogues/dataset/ProfilingProgress.fxml"));
ProfilingProgressController controller = loader.<ProfilingProgressController>getController();
controller.initProgress(operator);
Parent root = null;
try {
  root = (Parent) loader.load();
} catch (IOException ex) {
  Logger.getLogger(PDPro.class.getName()).log(Level.SEVERE, null, ex);
}
Scene scene = new Scene(root);
Stage stage = new Stage();
stage.setScene(scene);
stage.setTitle("Profiling Progress");
stage.show();
return stage;
} 
```

initProgress 如下：

```
public void initProgress(PDBProfilerOperator operator) {
  this.profilingFiles.progressProperty().bind(operator.progressProperty());
} 
```

尝试运行 initProgress 时出现 NullPointerException，因为控制器仍为 Null。如何修复此错误？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:30:15.483

[我之前对传递参数 JavaFX FXML](https://stackoverflow.com/questions/14187963/passing-parameters-javafx?lq=1)的回答中的代码不正确 - 必须在从 FXMLLoader 检索控制器之前加载 fxml。我更新了答案中的错误代码。

对 Kylamus 的代码应用相同的修复：

```
public Stage showProfilerDialog(PDBProfilerOperator operator) {
  try {
    FXMLLoader loader = new FXMLLoader(
      getClass().getResource(
        "/pdpro/gui/dialogues/dataset/ProfilingProgress.fxml"
      )
    );
    Parent root = (Parent) loader.load();

    ProfilingProgressController controller = 
      loader.<ProfilingProgressController>getController();
    controller.initProgress(operator);

    Stage stage = new Stage(new Scene(root));
    stage.setTitle("Profiling Progress");
    stage.show();

    return stage;
  } catch (IOException ex) {
    Logger.getLogger(PDPro.class.getName()).log(Level.SEVERE, null, ex);
  }

  return null;
} 
```

* * *

有一个可执行[示例](https://gist.github.com/4631319)，我在回答[How can I use a variable from another Controller in JavaFX中使用了类似的结构](https://stackoverflow.com/questions/14511016/how-can-i-use-a-variable-from-another-controller-in-javafx)

* * *

其他可能导致加载 fxml 文件失败的原因如下（尽管在这种情况下这些都不是真正的原因）：

1.  您的 fxml 格式错误 => 在[SceneBuilder](http://www.oracle.com/technetwork/java/javafx/tools/index.html)中打开它并查看 SceneBuilder 是否记录任何错误。
2.  您的 fxml 不在应有的位置 => 是否`getClass().getResource("/pdpro/gui/dialogues/dataset/ProfilingProgress.fxml")`返回 null？
3.  您的 fxml 没有引用您的控制器 => 了解[如何引用控制器](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#controllers)。

# javascript - 在密码中允许多个特殊字符

> ID：14471358
> 
> 赞同：0
> 
> 时间：2013-01-23T02:10:11.917
> 
> 标签：javascript, regex, validation, passwords

我有正则表达式可以测试以下规则，

1.  密码必须至少有一个字符。
2.  密码必须至少有一个数字。
3.  密码必须至少包含一个字母数字字符。（应允许多于一个）

**我的尝试是这样的，**

```
/^([a-zA-Z+]+[0-9+]+[!@#$%^&*])$/ 
```

这在大多数情况下都可以正常工作，除非我添加了一个以上的字母数字字符。

***测试***

*   测试【qwer1234】结果【**无效**】结论【**通过**】
*   测试 [qwer1234$] 结果 [**有效**] 结论 [**通过**]
*   测试[qwer1234#$]结果[**无效**]结论[**失败**]

最后一个测试应该通过，但它失败了。我知道哪里出了问题，但无法掌握正则表达式的魔力。我对错误的想法是，

```
[0-9+] // This + sign shows that you can have more then 1 of that range of numerics 
```

在哪里，

```
[!@#$%^&*] // Does not have the + sign 
```

我试过，

```
[!@#$%^&*+] // Does not have the + sign
[!@#$%^&*]+ // Does not have the + sign 
```

两者都没有工作。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:32:12.117

为什么你需要把它全部混入一个正则表达式？

```
function test_password(password) {
    if (password.length < 2) return false;            // Minimum length
    if (!/[0-9]/g.test(password)) return false;       // Needs a number
    if (!/[a-z]/gi.test(password)) return false;      // Needs a letter
    if (!/[^a-z0-9]/gi.test(password)) return false;  // Needs a special char

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:33:32.830

根据您实际需要的内容，根据您对情况的混乱描述，这里有两个正则表达式，希望对您有所帮助。第一个要求密码以至少 1 个字母字符开头，其次至少有 1 个数字字符，最后至少有 1 个特殊字符。

```
/^([a-zA-Z]+[0-9]+[!@#$%^&*]+)$/ 
```

[http://jsfiddle.net/ECwP8/](http://jsfiddle.net/ECwP8/)

如果您不要求字符按特定顺序出现，您可以试试这个正则表达式：

```
/(?=[^a-zA-Z]*[a-zA-Z])(?=[^0-9]*[0-9])(?=[^!@#$%^&*]*[!@#$%^&*])/ 
```

[http://jsfiddle.net/bJTTk/1/](http://jsfiddle.net/bJTTk/1/)

这仅要求密码中至少有 1 个字母字符、至少 1 个数字字符和至少 1 个特殊字符，以任意顺序出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T02:38:50.720

试试下面的。如果一个字符应该是第一个，数字应该是第二个，字母数字应该是下一个，它将起作用。

/^[a-zA-Z]+[1-9]+[!@#$%^&*]+$/

# haskell - STArray 和堆栈溢出

> ID：14471359
> 
> 赞同：2
> 
> 时间：2013-01-23T02:10:19.270
> 
> 标签：haskell, stack-overflow, starray

我很难理解为什么以下在 STArray 中查找最小元素的尝试在使用`ghc`（7.4.1，无论 -O 级别）编译时会导致堆栈空间溢出，但在以下情况下**工作正常**`ghci`：

```
import Control.Monad
import Control.Monad.ST
import Control.Applicative
import Data.Array.ST

n = 1000 :: Int

minElem = runST $ do
  arr <- newArray ((1,1),(n,n)) 0 :: ST s (STArray s (Int,Int) Int)
  let ixs = [(i,j) | i <- [1..n], j <- [1..n]]
  forM_ ixs $ \(i,j) -> writeArray arr (i,j) (i*j `mod` 7927)
--  readArray arr (34,56)  -- this works OK
--  findMin1 arr           -- stackoverflows when compiled
  findMin2 arr           -- stackoverflows when compiled

findMin1 arr = do
  es <- getElems arr
  return $ minimum es

findMin2 arr = do
  e11 <- readArray arr (1,1) 
  foldM (\m ij -> min m <$> readArray arr ij) e11 ixs
      where ixs = [(i,j) | i <- [1..n], j <- [1..n]]

main = print minElem 
```

注意：切换到`STUArray`or`ST.Lazy`似乎没有任何效果。

`STArray`但主要问题是：在 big while inside上实现这种“折叠式”操作的正确方法是什么`ST`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T02:42:27.563

这可能`getElems`是一个坏主意的结果。在这种情况下，数组完全是个坏主意：

```
minimum (zipWith (\x y -> (x, y, mod (x*y) 7927)) [1..1000] [1..1000]) 
```

这个马上给你答案：(1, 1, 1)。

如果您仍然想使用数组，我建议先将数组转换为`Array`or `UArray`，然后在该数组上使用`elems`or `assocs`。如果您使用`runSTArray`or执行此操作，则无需额外费用`runSTUArray`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:42:17.947

最大的问题`findMin1`是`getElems`：

```
getElems :: (MArray a e m, Ix i) => a i e -> m [e]
getElems marr = do
  (_l, _u) <- getBounds marr      -- Hmm, why is that there?
  n <- getNumElements marr
  sequence [unsafeRead marr i | i <- [0 .. n - 1]] 
```

在长列表上使用是导致不够懒惰`sequence`的 monad 中堆栈溢出的常见原因，因为`(>>=)`

```
sequence ms = foldr k (return []) ms
        where
          k m m' = do { x <- m; xs <- m'; return (x:xs) } 
```

然后它必须构建一个与列表长度成正比的大小。`getElems`将与 一起使用`Control.Monad.ST.Lazy`，但随后使用

```
forM_ ixs $ \(i,j) -> writeArray arr (i,j) (i*j `mod` 7927) 
```

创建一个巨大的 thunk 溢出堆栈。对于严格的`ST`变体，您需要`getElems`用构建列表的东西替换，`sequence`或者 - 更好地 - 计算最小值而不创建元素列表。对于惰性`ST`变体，您需要确保数组的填充不会产生巨大的 thunk，例如通过强制`writeArray`调用结果

```
let fill i j
      | i > n     = return ()
      | j > n     = fill (i+1) 1
      | otherwise = do
          () <- writeArray arr (i,j) $ (i*j `mod` 7927)
          fill i (j+1)
() <- fill 1 1 
```

问题`findMin2`在于

```
foldM (\m ij -> min m <$> readArray arr ij) e11 ixs 
```

是惰性的`m`，因此它构建了一个巨大的 thunk 来计算最小值。您可以通过使用`seq`（或 bang-pattern）使其在`m`.

> `STArray`但主要问题是：在 big while inside上实现这种“折叠式”操作的正确方法是什么`ST`？

通常，您将使用 strict`ST`变体（对于 类似的类型`Int`，您几乎肯定应该使用`STUArray`s 而不是`STArray`s）。那么最重要的规则是你的函数足够严格。的结构`findMin2`还可以，实现就是太懒了。

如果性能很重要，您通常必须避免使用通用的高阶函数，`foldM`并编写自己的循环以避免分配列表​​并完全按照手头的问题要求控制严格性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:29:21.843

问题是 minimum 是一个非严格的折叠，所以它会导致 thunk 堆积。使用 (foldl' min)。

现在我们添加一堆废话来忽略，因为 stackoverflow 已经变得毫无价值，不再允许发布直接的答案。

# javascript - JavaScript 运行时错误：无法添加动态内容

> ID：14471362
> 
> 赞同：6
> 
> 时间：2013-01-23T02:10:29.097
> 
> 标签：javascript, windows-8, microsoft-metro

我正在制作一个 javascript Metro 应用程序并有一些这样的代码：

```
 <script>
       document.writeln(foo());//this line is trouble
    </script> 
```

当我尝试运行时，它给了我一个相当长的错误：

> ms-appx://a375ffac-3b69-475a-bd53-ee3c1ccf4c4e/default.html 中第 20 行第 9 列的未处理异常
> 
> 0x800c001c - JavaScript 运行时错误：无法添加动态内容。脚本试图注入可能不安全的动态内容或先前动态修改的元素。例如，使用 innerHTML 属性添加脚本或格式错误的 HTML 将生成此异常。使用 toStaticHTML 方法过滤动态内容，或使用 createElement 等方法显式创建元素和属性。有关详细信息，请参阅 [http://go.microsoft.com/fwlink/?LinkID=247104](http://go.microsoft.com/fwlink/?LinkID=247104)。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T02:18:20.377

Windows 8 限制了您可以通过 innerHTML 和 Writeln 设置的内容，因为它被认为是不安全的...

添加内容的正确方法是：

```
// The untrusted data contains unsafe dynamic content
var unTrustedData = "<img src='http://www.contoso.com/logo.jpg' on-click='calltoUnsafeCode();'/>";

// Safe dynamic content can be added to the DOM without introducing errors
var safeData = window.toStaticHTML(unTrustedData);

// The content of the data is now 
// "<img src='http://www.contoso.com/logo.jpg'/>" 
// and is safe to add because it was filtered
document.write(safeData); 
```

如果你的代码有一些 javascript，你可以使用这个函数（但微软不推荐它）：

```
MSApp.execUnsafeLocalFunction(function() {
    var body = document.getElementsByTagName('body')[0];
    body.innerHTML = '<div style="color:' + textColor + '">example</div>';
}); 
```

见：

[http://msdn.microsoft.com/en-us/library/windows/apps/Hh767331.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh767331.aspx)

对于您的情况：

```
MSApp.execUnsafeLocalFunction(function() {
    document.writeln(foo());
}); 
```

请注意，只有在您了解您的内容是安全的情况下，您才应该这样做；如果您不这样做，我建议您使用该`toStaticHTML`方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T02:16:18.707

关于我会尝试的[文档：](http://msdn.microsoft.com/de-de/library/ie/cc848922%28v=vs.85%29.aspx)

```
document.writeln(window.toStaticHTML(foo())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-05T15:25:33.700

Windows 8 商店应用程序对在 innerHTML 属性中放置动态内容有限制。要解决此问题，您需要在页面中的以下位置包含 winstore-jscompat.js 文件作为第一个参考。请参阅[此链接以了解有关 winstore-jscompat 的更多信息](https://github.com/Microsoft/winstore-jscompat)。

Windows 10 不需要此文件。

# fonts - 如何为 docsplit (ghostscript) 配置 CID 字体？

> ID：14471364
> 
> 赞同：0
> 
> 时间：2013-01-23T02:10:31.000
> 
> 标签：fonts, pdf-generation, ghostscript, postscript, docsplit

我在下面的网址中有指南参考。 [http://www.ghostscript.com/doc/9.06/Use.htm#CIDFonts](http://www.ghostscript.com/doc/9.06/Use.htm#CIDFonts)

但我认为我没有正确地遵循它。

我要做的是使用 Docsplit 将 Office 文件转换为图像。但有些字符（韩文和中文）显示为问号。

我认为它与ghostscript有关，但很难，因为我是基于linux的解决方案的新手。

有人可以告诉我如何配置 CID 字体的命令行指南吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:57:58.070

您使用的是什么版本的 Ghostscript？如果它是 CentOS，那么我怀疑您使用的是过时版本。我建议的第一件事是升级到最新版本的 Ghostscript。

之后，我需要您发送到 Ghostscript 的 PostScript 文件（不是 Office 文件）的副本，以及您尝试使用的字体。

如果您使用的是正版 CIDFonts，那么这非常容易。但是，如果您更可能尝试使用 TrueType 字体作为 CIDFont 的替代品，那么整个问题就会变得更加困难。

为什么不能在 PostScript 中嵌入字体？那将完全消除问题。

# ios - 在 Core Data 中使用类和点符号访问会得到一个可变集吗？

> ID：14471366
> 
> 赞同：0
> 
> 时间：2013-01-23T02:10:50.783
> 
> 标签：ios, xcode, core-data

我有一个名为的实体，它具有一组实体（一对多关系）`LogBook`的属性（称为）。`columns``LogBookColumn`

我看到检索可变列集的标准方法似乎是：

```
NSEntityDescription *myLogbook;
myLogbook = [NSEntityDescription insertNewObjectForEntityForName:@"LogBook"
                                          inManagedObjectContext:self.managedObjectContext];
NSMutableSet *columns = [myLogbook mutableSetValueForKey:@"columns"]; 
```

而不是第三行的方法，我想使用点表示法。为此，我创建了类定义，也称为`LogBook`and `LogBookColumn`，并使用 @property 创建 setter 和 getter。

```
LogBook *myLogBook;
myLogbook = [NSEntityDescription insertNewObjectForEntityForName:@"LogBook"
                                          inManagedObjectContext:self.managedObjectContext];
NSMutableSet *columns = (NSMutableSet *)myLogbook.columns; 
```

那么，`columns`默认情况下真的是一个可变集吗？我做了两件事来验证：

*   尝试写入列表，例如：`[columns addObject:aColumn];`
*   询问：`BOOL isKindOfMutableSet = [myLogbook.columns isKindOfClass:[NSMutableSet class]];`

两者都可以达到预期的结果，这可能会使这个问题过大，但我非常担心难以追踪的内存错误。我还想知道问这个问题是否`isKindOfClass`会起作用，因为我已将其定义为可变集 - 所以即使底层内存组织不支持可变集，它也不会起作用吗？

以上所有内容总结为：这是访问和更改`columns`属性/属性的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:15:24.140

根据[此文档](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html#//apple_ref/doc/uid/TP40002154-SW7)，应将多对关系声明为`NSSet`，这是有道理的。即使属性返回`NSMutableSet`，也不能保证更新`NSMutableSet`会正确更新关系（[确实如此](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html#//apple_ref/doc/uid/TP40002154-SW6)[）`mutableSetValueForKey:`](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html#//apple_ref/doc/uid/TP40002154-SW6)。

如果您真的想要一个可变访问器，那么只需创建一个`readonly`包装的属性`mutableSetValueForKey:`

**更新：**

否则，我们应该使用 - (void)addLogBookColumnsObject:(LogBookColumn *)value;, - (void)removeLogBookColumnsObject:(LogBookColumn *)value;, - (void)addLogBookColumns:(NSSet *)values;, - (void) removeLogBookColumns：（NSSet *）值；由 Core Data 为我们生成。

# java - 自定义地图条目集 - 可能吗？

> ID：14471374
> 
> 赞同：0
> 
> 时间：2013-01-23T02:12:18.217
> 
> 标签：java, dictionary

我正在制作一个将字符串映射到整数的类。我希望能够获取与特定 String 关联的 Integer 并遍历条目，这些条目被定义为另一个实现`Map.Entry<String, Integer>`.

目前我有这个：

```
public class MyMap implements Iterable<MyEntry> {

private final Map<String, Integer> wrappedMap = 
    new HashMap<String, Integer>();

@Override
public Iterator<MyEntry> iterator() {
    return wrappedMap.entrySet().iterator();
}

    //more methods

} 
```

即使 MyEntry 实现了，它也不会因为类型不匹配而编译`Map.Entry<String, Integer>`。

有没有办法自定义 Map.Entry 的实现？有没有更简单的方法可以做到这一点，我忽略了？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:23:10.167

它没有编译，因为 MyEntry 根本不是哈希图的一部分。如果要返回 MyEntry 列表，则需要将数据元素复制到 MyEntry 实例中并将其加载到集合中。这会很慢并且会消耗大量内存。

它应该是：

```
@Override
public Iterator<Map.Entry<String,Integer>> iterator() {
    return wrappedMap.entrySet().iterator();
} 
```

调用`entrySet()`返回一个 Set，其中包含 hashmap 中的映射。所以迭代器需要遍历`Entry`对象

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T02:31:58.933

为什么不只使用常规地图？

```
Map<String, MyEntry> map = new HashMap<String, MyEntry>(); 
```

然后你的迭代器将是这样的：

```
Iterator<MyEntry> iter = map.values().iterator(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T02:22:33.733

即使`MyEntry`implements `Map.Entry<K,V>`，也不是`Iterator<MyEntry>`implements `Iterator<Map.Entry<K,V>>`。对于像这样的类`Iterator`，这种区别对人类来说没有直观的意义，所以让我们考虑一个`Box<E>`类，它有`.put(E)`和`.contains(E)`方法。是`Box<Dinosaur>`的子类`Box<Animal>`吗？您可能会这么认为，但事实并非如此：在 a`Box<Animal>`中调用 是合法的`.put(someMammal)`，但在 a`Box<Dinosaur>`中显然是非法的。由于`Box<Dinosaur>`不能支持 a 上所有合法的动作`Box<Animal>`，所以它绝对不是子类，不能随意替换。

从编译器的角度来看，同样的问题可能适用于迭代器，因此您不能重载`.iterator()`以返回不是`Iterator<K,V>`.

# windows-phone-8 - 数组引用 Windows Phone 8 示例

> ID：14471379
> 
> 赞同：1
> 
> 时间：2013-01-23T02:12:57.977
> 
> 标签：windows-phone-8, c++-cx

谁能指出我`Platform::ArrayReference<T>`在 Windows Phone 8 上使用的示例？我所做的每一次尝试都导致了编译器语法错误。它[在文档中被列为](http://msdn.microsoft.com/en-us/library/windows/apps/jj127099.aspx)WinRT 的一部分，但我找不到任何可以最终将其标识为仅限桌面的内容。

我想在我的手机应用程序中使用它来减少在 C# 和 C++ 之间混洗数据时正在进行的副本数量，但如果不允许这样做，也许我只能忍受这些副本。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:53:14.437

我意识到我一直在想`ArrayReference`错。在与 C# 代码交互时，您仍然需要将其`Array`用作输入参数，但是当传递`Arrays`给其他 C++ 对象或从 C++ 代码传递给 C# 代码时，您可以使用`ArrayReference`在平台包装器中包装 C 数组。

# android-activity - 活动流

> ID：14471391
> 
> 赞同：1
> 
> 时间：2013-01-23T02:15:22.637
> 
> 标签：android-activity, stream

我见过一千种显示 XML、JSON 和其他显示活动数据的复杂方法的方法。

那似乎是第 1000 步，我在第 1 步。

我可以记录任何内容，并将任何内容保存到表中。我的问题是从哪里开始...

如何设置数据模型来收集我的活动？

从这个问题我有几个数据空白需要填补......

1.  我是否使用独立日志？还是我要预留活动数据？无论哪种情况，我都需要哪些列？

2.  基于问题 1，我如何构建查询以提供我需要的响应？我是否对每个用户使用基于字符串的构造？或存储过程来返回数据集？

我意识到这是一个关于活动流的真正菜鸟问题，但任何有关此的信息都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T13:14:17.927

[本教程](http://www.mellowmorning.com/2013/10/18/scalable-pinterest-tutorial-feedly-redis/)将帮助您使用 Redis 设置像 Pinterest 的提要这样的系统。这很容易上手。

在 Fashiolista，我们已经开源了我们构建饲料系统的方法。 [https://github.com/tschellenbach/Stream-Framework](https://github.com/tschellenbach/Stream-Framework)

另外看看这篇高可扩展性帖子，我们解释了一些涉及的设计决策：http: [//highscalability.com/blog/2013/10/28/design-decisions-for-scaling-your-high-traffic-提要.html](http://highscalability.com/blog/2013/10/28/design-decisions-for-scaling-your-high-traffic-feeds.html)

要了解有关提要设计的更多信息，我强烈建议阅读我们基于提要的一些文章：

*   [雅虎研究论文](http://research.yahoo.com/files/sigmod278-silberstein.pdf)
*   [Twitter 2013 基于 Redis](http://highscalability.com/blog/2013/7/8/the-architecture-twitter-uses-to-deal-with-150m-active-users.html)，带有回退
*   [Instagram 上的卡桑德拉](http://planetcassandra.org/blog/post/instagram-making-the-switch-to-cassandra-from-redis-75-instasavings)
*   [Etsy 饲料缩放](http://www.slideshare.net/danmckinley/etsy-activity-feeds-architecture/)
*   [脸书历史](http://www.infoq.com/presentations/Facebook-Software-Stack)
*   [Django 项目](http://justquick.github.com/django-activity-stream/)，具有良好的命名约定。（但仅限数据库）
*   [http://activitystrea.ms/specs/atom/1.0/](http://activitystrea.ms/specs/atom/1.0/)（演员、动词、宾语、目标）
*   [Quora 上关于最佳实践的帖子](http://www.quora.com/What-are-best-practices-for-building-something-like-a-News-Feed?q=news%20feeds)
*   [Quora 扩展社交网络提要](http://www.quora.com/What-are-the-scaling-issues-to-keep-in-mind-while-developing-a-social-network-feed)
*   [Redis 红宝石示例](http://web.archive.org/web/20130525202810/http://blog.waxman.me/how-to-build-a-fast-news-feed-in-redis)
*   [FriendFeed 方法](http://backchannel.org/blog/friendfeed-schemaless-mysql)
*   [Thoonk 设置](http://blog.thoonk.com/)
*   [Twitter的方法](http://www.slideshare.net/nkallen/q-con-3770885)

# datagrid - Silverlight 4 数据网格行转换器

> ID：14471392
> 
> 赞同：0
> 
> 时间：2013-01-23T02:15:24.213
> 
> 标签：datagrid, silverlight-4.0

我有一个数据网格，它的 itemssource 通过使用 MVVM 绑定到模型。数据由存储过程返回，对于特定行，例如代码为“A”的行，我希望仅在某些列中显示数据，其余列应显示空字符串。如何为此创建转换器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:09:33.563

有几种方法可以做到这一点。
第一个也是简单的方法是在模型本身中处理数据，以便您拥有正确的数据绑定。
另一种方法是直接模型。这是您的操作方法，假设您有 Product 类，并且其中包含 Name 和 Color。如果颜色为红色，则不想显示名称。所以我的 XAML 如下所示

```
 <sdk:DataGrid x:Name="grid" AutoGenerateColumns="False" HorizontalAlignment="Left" Height="300" VerticalAlignment="Top" 
                  Width="400">
        <sdk:DataGrid.Columns>
            <sdk:DataGridTextColumn Binding="{Binding Converter={StaticResource MyConverter}, ConverterParameter=Color}" />
            <sdk:DataGridTextColumn Binding="{Binding Converter={StaticResource MyConverter}, ConverterParameter=Name}" />
        </sdk:DataGrid.Columns>
    </sdk:DataGrid> 
```

我背后的代码只不过是直接的数据绑定

> ```
>  var products = Product.GetProducts(200);
>         grid.ItemsSource = products; 
> ```

我的转换器将有

> 公共类转换器：IValueConverter {

```
 public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value != null)
        {
            Product p = value as Product;
            switch (parameter as string)
            {
                case "Name":
                    if (p.Color == "Red")
                        return "";
                    else
                        return p.Name;
                case "Color":
                    return p.Color;
            }
        }
        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

** 这里的技巧是绑定，我绑定到整行并将列名作为参数传递。这样，即使列正在生成，每次都会调用值转换器，您可以将逻辑应用于它。

# jqgrid - 如何在jqGrid中的列之间插入垂直空间

> ID：14471393
> 
> 赞同：1
> 
> 时间：2013-01-23T02:15:48.847
> 
> 标签：jqgrid, jqgrid-asp.net, jqgrid-formatter

我将如何在列之间注入垂直空间，如下面的粗略模型所示（如果可能的话）。再次请原谅我在这张图片上的粗心大意，但我认为它传达了我想要做的事情。基本上我想在网格中有“组”列，然后在组的任一侧都有空间。

前任![在此处输入图像描述](../Images/ea8559794fa2fe1f317b11a47cae5c94.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:10:30.720

您有很多可能性来实现您的要求。最简单的方法似乎是使用自定义列`padding-right`或`padding-left`选定列。例如，您可以像下面这样定义 CSS

```
.ui-jqgrid tr.ui-row-ltr td.myCustomColumnClass { padding-right: 10px; } 
```

并根据 中列定义`"myCustomColumnClass"`的用法为列的所有单元格分配类。我想这是你需要的。`classes: "myCustomColumnClass"``colModel`

另一种可能性是只包括空列

```
{ name: "empty1", width: 10, sortable: false, hidedlg: true, search: false,
    resizable: false, fixed: true } 
```

在网格中。如果需要，您可以通过分配`classes: "noVerticalLines"`给上一列来额外删除空列和上一个/下一个之间的分区（垂直线）。您可以为“noVerticalLines”类定义 CSS，如下所示

```
.ui-jqgrid tr.ui-row-ltr td.noVerticalLines { border-right-color: transparent; } 
```

[该演示](http://www.ok-soft-gmbh.com/jqGrid/EmptyColumns.htm)展示了所有可能性：

![在此处输入图像描述](../Images/e632933832335ac601875fe074276688.png)

**更新**：您可以另外使用[答案](https://stackoverflow.com/a/11792322/315935)中的技巧。如果您定义例如 CSS

```
.ui-jqgrid tr.ui-row-ltr td.noHorizLines { border-bottom-color: transparent; } 
```

并将“noHorizLines”类添加到“empty1”列

```
{ name: "empty1", width: 10, sortable: false, hidedlg: true, search: false,
    resizable: false, fixed: true, classes: "noHorizLines" } 
```

你会得到以下结果

![在此处输入图像描述](../Images/179fdb766a4e798c5d960e14db7e548f.png)

（见[演示](http://www.ok-soft-gmbh.com/jqGrid/EmptyColumns1.htm)）。

此外，如果您从服务器获取数据，则可能需要在从服务器返回的数据数组中再添加一个空字符串“”。最好在客户端插入空字符串，而不是修改服务器代码。因此，我建议您`beforeProcessing`为此目的使用。[您可以仅枚举从服务器返回的项目并使用拼接](http://www.w3schools.com/jsref/jsref_splice.asp)函数插入空字符串。

# javascript - 观察偏好变化的函数每次变化触发 3 次

> ID：14471396
> 
> 赞同：1
> 
> 时间：2013-01-23T02:16:11.847
> 
> 标签：javascript, firefox-addon

我正在尝试在 Firefox 扩展中使用首选项。我能够创建和阅读这些内容，但是当我尝试在更改它们时运行函数时遇到问题。我正在使用来自[MDN](https://developer.mozilla.org/en-US/docs/Code_snippets/Preferences)的建议框架（经过修改，它可以满足我的需求）。这是这里的确切代码：

```
observe: function(aSubject, aTopic, aData) {
if (aTopic != "nsPref:changed")
{
return;
}
switch (aData) {
    case "username":
        var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
        var username = prefManager.getCharPref("extensions.alexandriauplink.username");
        // extensions.myextension.pref1 was changed
        break;
    case "password":
        var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
        var password = prefManager.getCharPref("extensions.alexandriauplink.password");
        alert(password);
        break;
}
var password = prefManager.getCharPref("extensions.alexandriauplink.password");
var username = prefManager.getCharPref("extensions.alexandriauplink.username");
alert( "username:" + username +"|" + "password:" + password);
} 
```

问题是，当我在选项对话框中更改首选项时，每个更改的首选项都会触发此功能 3 次。如果您能提供帮助，请提前感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:21:46.547

正如评论者指出的那样，这是由于打开了多个 Firefox 窗口造成的——每个窗口都在触发事件。

# jquery - mvc3 google api Microsoft JScript 运行时错误：“控制台”未定义

> ID：14471397
> 
> 赞同：0
> 
> 时间：2013-01-23T02:16:12.473
> 
> 标签：jquery, asp.net-mvc-3, google-maps

我在我的 MVC3 网站上使用 google maps api 在 Firefox 上一切正常，但在 Internet Explorer 中我收到一条错误消息，提示**Microsoft JScript runtime error: 'console' is undefined**。我试图解决这个问题，突出显示的代码是**console.log("changed: " + $(object).attr('id'));** 该代码的部分是

```
 $(document).bind("location_changed", function (event, object) {
    console.log("changed: " + $(object).attr('id'));

}); 
```

控制台只会导致 Internet Explorer 出现问题。我该如何解决这个问题.. 我从[http://www.wimagguc.com/projects/jquery-latitude-longitude-picker-gmaps/获得了代码](http://www.wimagguc.com/projects/jquery-latitude-longitude-picker-gmaps/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:27:22.197

IE8 及更低版本没有控制台。有些浏览器没有控制台，所以在javascript中使用控制台时，最好先看看它是否存在：

```
$(document).bind("location_changed", function (event, object) {
    if (window.console) {
        console.log("changed: " + $(object).attr('id'));
    }
}); 
```

您可以查看[此答案](https://stackoverflow.com/q/690251/144496)，了解如何在`console.log`未定义控制台时转换为警报。

# c# - 在没有日期的页面上将表达式转换为数据类型 datetime 的算术溢出错误

> ID：14471399
> 
> 赞同：0
> 
> 时间：2013-01-23T02:16:27.920
> 
> 标签：c#, asp.net-mvc

我不确定这个错误是如何发生的——因为当我保存不包含任何要保存的日期或时间信息的信息时，它会出现在页面中。我不是造成这种情况的原因。该页面仅显示没有日期或时间的选择下拉框。对此问题的任何见解将不胜感激。

这是总体错误消息：

> System.Data.SqlClient.SqlException (0x80131904)：将表达式转换为数据类型 datetime 时出现算术溢出错误。该语句已终止。在 Kids.Domain.Entities.KidsDataContext.HandleSqlException(SqlException sqlException) 在 C:\code\kids\Kids.Domain\Entities\KidsDataContextPartial.cs:第 86 行在 Kids.Domain.Entities.KidsDataContext.SubmitChanges(ConflictMode failureMode) 在 C :\code\kids\Kids.Domain\Entities\KidsDataContextPartial.cs:第 78 行 Kids.Domain.Repository.Concrete.CasePartyRepository.Save(CaseParty caseParty) 在 C:\code\kids\Kids.Domain\Repository\Concrete\ CasePartyRepository.cs：C:\code\kids\Kids.MVC\Controllers\PartyRelationshipController.cs 中 Kids.MVC.Controllers.PartyRelationshipController.SelectPartyType(PartyTypeRelationshipFormViewModel viewModel, Guid[] selectedParties) 的第 67 行：*DisplayClass44.b* _43() 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c_ *DisplayClass39.<>c* _DisplayClass3b.b_ *35() 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c* _DisplayClass51.b_ *4b( ) 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c* _DisplayClass51.b_ *4b() 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c* _DisplayClass51.b_ *4b() 在 System.Web.Mvc.Async。 AsyncControllerActionInvoker.<>c* _DisplayClass39.b_38 *(IAsyncResult asyncResult) 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c* _DisplayClass27.<> *c_DisplayClass2c.b* _22() 在 System.Web.Mvc.Async。AsyncControllerActionInvoker.<>c_*DisplayClass27.b* _24(IAsyncResult asyncResult)

KidsDataContextPartial 代码：

```
 private void HandleSqlException(SqlException sqlException)
    {
        if (sqlException.Message.StartsWith("The DELETE statement conflicted"))
        {
            throw new DeleteReferencedException("Can not delete referenced items", sqlException);
        }
        if (sqlException.Number == 2601 || sqlException.Number == 2627 )
        {
            throw new DuplicateItemException("Item already exists.", sqlException);
        }
        throw sqlException;
    } 
```

第 86 行：

```
throw new DeleteReferencedException("Can not delete referenced items", sqlException); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:40:28.383

如果您的表架构中有任何类型的日期时间字段（可能作为时间戳），则默认情况下 EF 不够聪明，无法尊重 SQL 默认值（如`getdate()`），因此您需要在添加实体时自行设置。否则，EF 会尝试将该值设置为`DateTime`（似乎是`01/01/0001`）的默认值，这会导致日期对 MSSQL 类型无效`datetime`（尽管将字段更改为`datetime2`应该可以工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:33:55.333

尝试将文化添加到您的页面：

```
<%@ Page Language="VB" Title="..." Culture="en-US" %> 
```

不同的文化可以做不同的结果......也许服务器文化与你的文化不同

# jquery - Lotus Notes：将图像上传到外部驱动器

> ID：14471406
> 
> 赞同：0
> 
> 时间：2013-01-23T02:17:03.297
> 
> 标签：jquery, ajax, lotus-notes

我正在使用 Lotus Domino 8.5。我想在不使用文件上传控件的情况下上传图像，因为它将文件上传到服务器的数据库。所以，我认为我应该使用其他方式将图像上传到外部驱动器。谁能帮我？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:25:19.397

一般来说，我会建议以下方法：

1.  创建一个页面/表单以将文件上传到笔记数据库中的文档。我的建议是创建一个带有文件上传控件的 XPage。
2.  在数据库中，创建一个计划代理，将文件保存到操作系统上的指定位置

我就是这样做的——我知道必须有很多可能性来实现你想要的。

# c - 在 C 中显示来自 .pgm 图像文件的像素颜色

> ID：14471407
> 
> 赞同：0
> 
> 时间：2013-01-23T02:17:20.063
> 
> 标签：c, image

我正在编写一个程序，我需要将 .pgm 格式的图像显示到 TFT 屏幕。我正在使用 C 语言。我能够读取文件，当我尝试在屏幕上显示图像内容时，我只能看到出现的字符而不是像素颜色。我在 .pgm 文件中使用 P5 幻数。我的问题很简单，这个字符（在 .pgm 文件中）如何显示为像素颜色？我应该为此使用任何库函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:57:29.547

是的，您需要一个可与[SDL](http://www.libsdl.org/)和[Allegro等 ANSI C 配合使用的图形库](http://www.liballeg.org/)

# git - 使用 GIT 钩子修改发行说明

> ID：14471408
> 
> 赞同：1
> 
> 时间：2013-01-23T02:17:25.600
> 
> 标签：git, githooks

我们有一个包含许多贡献者的 GIT 存储库，并且我们经常遇到与发行说明文件的合并冲突。有什么好的方法可以预防吗？

我正在考虑一个 git post-upload 服务器挂钩，它只能在 master 分支上运行，并使用脚本从提交消息中提取一些神奇的关键字，并将以下文本附加到发行说明文件中。有什么工具吗？这是一个好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:39:50.690

我不知道是否有这样的工具，但是如果您需要在特定提交上附加信息，我建议您使用**[`git notes`](https://stackoverflow.com/a/9856913/6309)**, 以便不修改 SHA1.

您可以添加类似“[如何仅显示名称和提交标题，因为 git 中的标签？](https://stackoverflow.com/a/2941614/6309) ”中建议的信息。

对所述提交消息的任何自动处理都假定它们遵循严格的格式（如[文章所示](http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html)），然后应由*预*`pre-receive`提交挂钩（或远程端的至少一个挂钩）强制执行。

# android - 在 Viewpager 片段中向上和向下滚动 ExpandableListView 会导致内存不足错误

> ID：14471411
> 
> 赞同：0
> 
> 时间：2013-01-23T02:17:51.413
> 
> 标签：android, android-viewpager, out-of-memory, expandablelistview, android-support-library

ExpandableListView 几乎是空的。我真的不知道是什么浪费了这么多内存。大量滚动（上下约 60 次）后，应用程序停止响应。我做了一些研究，发现这个错误只发生在 targetSdkVersions 8 到 13 中。版本 14 及更高版本一切都很好。我的应用程序为 ViewPager 使用 android 支持库 v4 和 ViewPagerIndicator。这是一个讨厌的错误，还是我的代码有问题？

```
package com.test.test;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;
import android.widget.ExpandableListAdapter;
import android.widget.ExpandableListView;

import com.viewpagerindicator.TabPageIndicator;

public class MainActivity extends Activity{

    public ExpandableListAdapter mAdapter;  
    final String[] page_titles = new String[]{"page1","page2"}; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);    
        setContentView(R.layout.main_activity);

        //Instantiating the adapter
        myAdapter mAdapter = new myAdapter(this);

        //instantiate the Views
        ViewPager mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        TabPageIndicator mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);              
    }

    private class myAdapter extends PagerAdapter{
        Context context;

        public myAdapter(Context c){
            this.context = c;
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return page_titles.length;
        }

        @Override
        public boolean isViewFromObject(View v, Object o) {
            // TODO Auto-generated method stub
            return v.equals(o);
        }

        public CharSequence getPageTitle(int position) {
            return page_titles[position];
        }

        public Object instantiateItem(View pager, int position) {
            final LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View v = inflater.inflate(R.layout.expander, null, false);
            ExpandableListView elv1 = (ExpandableListView) v.findViewById(R.id.elv1);

            MainActivity.this.mAdapter = new BaseExpandableListAdapter() {

                @Override
                public Object getChild(int groupPosition, int childPosition) {
                    return null;
                }

                @Override
                public long getChildId(int groupPosition, int childPosition) {
                    return 0;
                }

                @Override
                public int getChildrenCount(int groupPosition) {
                    return 1;                                       
                }

                @Override
                public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
                    View v = inflater.inflate(R.layout.childview, null, false);

                    return v;
                }

                @Override
                public Object getGroup(int groupPosition) {
                    return null;
                }

                @Override
                public int getGroupCount() {
                    return 20;
                }

                @Override
                public long getGroupId(int groupPosition) {
                    return 0;
                }

                @Override
                public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
                    View v = inflater.inflate(R.layout.twolinelistitem, parent, false);                                                                                                                                                                                 
                    return v;
                }

                @Override
                public boolean hasStableIds() {
                    return false;
                }

                @Override
                public boolean isChildSelectable(int groupPosition, int childPosition) {
                    return false;
                }
            };
            elv1.setAdapter(MainActivity.this.mAdapter);

            ((ViewPager) pager).addView(v, 0);
            return v;                                   
        }

        @Override
        public void destroyItem(View pager, int position, Object view) {
            ((ViewPager) pager).removeView((View) view);
        }

        @Override
        public void finishUpdate(View view) {
        }

        @Override
        public void restoreState(Parcelable p, ClassLoader c) {
        }

        @Override
        public Parcelable saveState() {
            return null;
        }

        @Override
        public void startUpdate(View view) {
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:20:03.770

膨胀布局非常占用内存，您需要找到一种方法不要为每个列表项执行此操作，使用视图持有者类或仅在 pager 为空时膨胀。

视图持有者看起来像这样：

```
private static class ViewHolder {
    public LinearLayout linearLayout;
} 
```

你会像这样存储你的布局

```
ViewHolder holder = new ViewHolder();
holder.linearLayout = (LinearLayout) convertView.findViewById(R.id.expander); 
```

# html - 提交后谷歌表单重定向

> ID：14471412
> 
> 赞同：0
> 
> 时间：2013-01-23T02:18:08.267
> 
> 标签：html, forms

我正在寻找一种解决方案，当提交表单时，在提交的按钮下会出现一条感谢消息，反对将它重定向到我现在拥有的同一个网页。

我是新手，请举个例子，谢谢。

脚本的相关位是：

```
<script type="text/javascript">var submitted=false;</script>
<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"     
onload="if(submitted)          
{window.location='http://originalblueskythinking.blogspot.co.uk/2013/01/what-drives-us-    
fantasies-or-dreams_22.html';}"></iframe>
  <form action="https://docs.google.com/spreadsheet/formResponse?     
formkey=dFh5VndEdW9JQzVrUU9FdjYteDNfSHc6MQ&amp;ifq" id="ss-form" method="POST"     
 target="hidden_iframe" 
 onsubmit="submitted=true;">

<br />
<div class="errorbox-good">
<div class="ss-item ss-item-required ss-radio">
<div class="ss-form-entry">
<label class="ss-q-title" for="entry_0"><b style="font-family: Leelawadee; text-align:    
justify;"><span style="color: orange; font-size: large;">What would you say you are  
more of, a dreamer or fantasist?&nbsp;</span></b></label><br />

<label class="ss-q-title" for="entry_0"><b style="font-family: Leelawadee; text-align:  
justify;"><span style="color: orange; font-size: large;"><br /></span></b></label>
<span style="color: white;"><label class="ss-choice-label"><input class="ss-q-radio"   
id="group_0_1" name="entry.0.group" type="radio" value="I'm a dreamer and have a 
ideologist natural" />

</label><span style="font-family: Leelawadee; text-align: justify;">I'm a dreamer and 
have a ideologist natural</span></span><br />

 <span style="color: white; font-size: small;"><input class="ss-q-radio" id="group_0_2"   
 name="entry.0.group" type="radio" value="I'm a fantasist and I find my self escaping " 
 />&nbsp;<span style="font-family: Leelawadee; text-align: justify;">I'm a fantasist 
 and I find my self escaping</span></span><br />
<br /></div>
</div>
</div>
<br />
<input name="pageNumber" type="hidden" value="0" />
<input name="backupCache" type="hidden" value="" />

 <br />
 <div class="ss-item ss-navigate">
 <div class="ss-form-entry">
 <input name="submit" type="submit" value="Submit" /></div>
 </div>
 </form>
  <script type="text/javascript">

  (function() {
  var divs = document.getElementById('ss-form').
  getElementsByTagName('div');
  var numDivs = divs.length;
  for (var j = 0; j < numDivs; j++) {
  if (divs[j].className == 'errorbox-bad') {
  divs[j].lastChild.firstChild.lastChild.focus();
 return;
  }
  }
  for (var i = 0; i < numDivs; i++) {
  var div = divs[i];
  if (div.className == 'ss-form-entry' &&
   div.firstChild &&
  div.firstChild.className == 'ss-q-title') {
  div.lastChild.focus();
  return;
  }
  }
  })();
  </script></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:21:29.887

我不能 100% 确定这是否可行，但是您很可能需要在此处修改这段代码：然后将其替换为必要的 Javascript 消息。`if(submitted)
{window.location='http://originalblueskythinking.blogspot.co.uk/2013/01/what-drives-us-
fantasies-or-dreams_22.html';}`

# r - 如何在 R 中编写包测试以查看是否正确抛出警告？

> ID：14471413
> 
> 赞同：6
> 
> 时间：2013-01-23T02:18:13.673
> 
> 标签：r, unit-testing, package, warnings

我正在为 R 包编写一些测试，并希望`R CMD check`验证函数是否针对某些输入显示正确的警告。但我不知道如何捕获警告输出以便进行测试。

所以如果我有这样的功能：

```
throwsWarning<-function(x){
  if(x>0){
    warning('Argument "x" is greater than zero, results may be incorrect')
  }
  # do something useful ...
} 
```

我想在我的测试文件中有一些东西，比如：

```
warningOutput <-try( throwsWarning(1))
if (warningOutput!='Argument "x" is greater than zero, results may be incorrect'){
  stop('function "throwsWarning" did not produce correct warning when x>0')
} 
```

到目前为止，我已经通过更改找到了可能的部分解决方案，`options`以便将警告视为错误并用`trycatch`块包围。也被认为是 的测试值`last.warning`，但如果不抛出警告，这似乎很危险（将测试以前的值）。似乎必须有一个简单的方法来做到这一点，我错过了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T02:58:36.827

testthat[包](https://github.com/hadley/test_that)有一个[`expect_warning`](https://github.com/hadley/test_that/blob/master/R/expectations.r#L402)和[`gives_warning`](https://github.com/hadley/test_that/blob/master/R/expectations.r#L385)你可以使用的功能。

从示例中，您将执行以下操作：

```
R> library(testthat)
R> expect_that(warning("this is a warning"), gives_warning("is a"))
## This does not raise an error, but:
R> expect_that(warning("this is a warning"), gives_warning("nope"))
Error: warning("this is a warning") does not match 'nope'. Actual value: 
this is a warning 
```

因此，`gives_warning`正则表达式与应该发出的警告相匹配。如果正则表达式不匹配（或未引发警告），则会引发红旗。

同样，使用更短的`expect_warning`：

```
R> expect_warning(warning("this is a warning"), "is a") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T21:31:38.673

如果您正在编写自己的包，那么通过抛出（和捕获）特定类型的错误或警告来利用 R 的条件系统可能是有意义的。所以

```
myFun <- function(x) {
    if (any(is.na(x))) {
        w <- simpleWarning("'x' contains NA values")
        class(w) <- c("HasNA", class(w))
        warning(w)
    }
    if (any(x < 0))
        warning("'x' contains values less than 0")
    x
} 
```

然后在您的测试中，例如，`library(RUnit)`使用`tryCatch`并选择您对测试感兴趣的条件，即带有 class 的警告`HasNA`：

```
test_myFun_NAwarning <- function() {
    warnOccurred <- FALSE
    tryCatch(myFun(1:5), HasNA = function(w) warnOcccurred <<- TRUE)
    checkTrue(!warnOccurred)
    tryCatch(myFun(-(1:5)), HasNA = function(w) warnOcccurred <<- TRUE)
    checkTrue(!warnOccurred)
    tryCatch(myFun(c(1:5, NA)), HasNA = function(w) warnOccurred <<- TRUE)
    checkTrue(warnOccurred)
} 
```

导致

```
> test_myFun_NAwarning()
[1] TRUE
Warning message:
In myFun(-(1:5)) : 'x' contains values less than 0 
```

这表明 tryCatch 仅捕获您感兴趣的特定警告，并且这样做的方式不依赖于匹配字符串的文本。也许你会有一个辅助函数`.warn`来为你的包发出所有警告。更多细节参见`?withCallingHandlers`；`withCallingHandlers`以及`muffleRestart`人们如何应对警告发生后的持续评估，而不是停止这种方式`tryCatch`。

# python - 为什么 CGI 脚本上的 Python 子进程根据它们的运行方式具有不同的退出状态？

> ID：14471422
> 
> 赞同：0
> 
> 时间：2013-01-23T02:19:12.600
> 
> 标签：python, shell, cgi, subprocess, exit-code

我正在尝试在下面的 CGI 脚本上从 Python 运行 shell 命令。有人可以向我解释为什么`exit_status`当`0`我在 shell 上执行脚本时，而`exit_status`当`127`我从网络浏览器运行它时？提前致谢。另外，如果我尝试像`echo something`（例如）这样的子进程，在终端中运行时退出状态将为零，但在浏览器中完成时`exit_status = subprocess.call('echo something', shell=True)`会有一个。`500 Internal Server Error`我真的很纳闷...

```
#!/usr/bin/env python

import subprocess

print 'Content-type: text/html\n\n'  
print '<html><head>'
print '</head><body>'

exit_status = subprocess.call('ls', shell=True)

print exit_status

print '</body></html>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:59:20.660

正如@abarnert 在评论中提到的那样，`shell=True`除非您别无选择（例如，您绝对需要系统外壳的扩展功能），否则通常应避免使用。作为[子流程文档的这一部分](http://docs.python.org/2/library/subprocess.html?highlight=subprocess#frequently-used-arguments)解释说，shell 的使用引入了各种严重的安全问题，其中任何命令（包括参数）都是从外部来源（例如表单提交）获得的。除了这些问题之外，您还相信在主机系统上正确配置了 shell，这对于特殊用户（例如用于 Web 服务的用户）来说并不总是一个安全的假设。除了安全漏洞之外，为了执行可以直接执行的命令而派生一个额外的 shell 进程也是一种浪费。此外，您可能会因依赖系统外壳而损害您的可移植性，因为不同的平台将对命令字符串应用不同的扩展和规则。

使用`subprocess`时最好将命令作为参数列表而不是单个字符串传递，这在使用`shell=False`. 可能并非所有平台都需要它，但它肯定在 Linux 上，因此可以使您的代码更具可移植性。此外，自己拆分参数可以避免忘记转义或将参数引用到 shell 的情况。

此外，@ababert 已正确解释您不一定会`PATH`在 CGI 环境中正确设置，因此最佳做法是通过绝对路径名引用所有内容。同样，这通常是移植到不同平台和环境的好习惯（当然，硬编码二进制文件的路径已经妨碍了可移植性，但至少你可以*最小化*这个问题 - 谁知道你或其他人什么时候将需要移植此代码）。

考虑到这一点，您的`ls`示例`echo`将如下所示：

```
exit_status = subprocess.call(['/bin/ls'])
exit_status = subprocess.call(['/bin/echo', 'something']) 
```

`echo`许多 shell 将其视为内置命令，它会覆盖实际`echo`命令——通过绝对路径（即`/bin/echo`）引用它会强制它使用实际命令而不是内置命令，这一事实也让人有些困惑。

当作为 CGI 脚本运行时，内部服务器错误通常意味着您有一个未捕获的 Python 异常。如果您查看网络服务器的日志文件（假设您可以访问它们），那么您应该找到异常的全文，但这确实因服务器而异。当没有运行时`shell=True`，我怀疑您在`OSError`找不到要运行的可执行文件时遇到异常。当你使用 shell 运行时，你不会得到异常——你只会得到 shell 错误消息的标准错误输出。同样，这应该在日志中重复。如果您确实遇到异常，我怀疑这是由于您正在运行的用户没有指定有效的登录 shell - 某些配置以用户身份运行脚本，例如`/bin/false`作为他们的登录外壳，以避免帐户被滥用。我希望返回代码`1`而不是`127`这种情况。

简而言之，查看您的网络服务器的错误日志中包含哪些信息，最佳做法是避免`shell=True`并确保将所有命令指定为参数列表而不是空格分隔的字符串。如果您可以从日志中获得更多信息并将其发布在此处，我们可以更新我们的答案以提供更具体的帮助。

最后，如果可能的话，我会避免`fork()`在网络服务器中使用任何代码，这包括`subprocess`. 有时没有办法避免它，但对于简单的事情，`ls`你可以使用 Python 函数代替（`os.listdir()`）。当您作为标准 CGI 脚本运行时，您可能没问题，但如果您打算将代码移植到更高效的托管环境（例如 mod-wsgi、fastcgi），那么您必须非常小心生成外部进程，因为文件描述符和其他资源的重复发生。我并不是说它不能安全地完成，但它是未来令人困惑的错误的潜在来源，所以如果可以的话，我真的会避免它。更不用说生成外部进程来处理 Web 请求的相对低效率了，如果您计划扩展代码，这可能很重要。

# jquery - 一个切换元素的Jquery多个按钮

> ID：14471424
> 
> 赞同：0
> 
> 时间：2013-01-23T02:19:49.297
> 
> 标签：jquery, html, css, toggle

基本上是这样的情况：

[http://jsfiddle.net/thomascs/CfGYG/1/](http://jsfiddle.net/thomascs/CfGYG/1/)

我有一个 iframe，当点击不同的按钮时加载不同。但是所有这些按钮都在切换同一个 iframe，但只有最上面的一个在工作。

我还希望动画使 iframe 不切换，然后在它已经打开时重新切换，但是单击了一个新链接。

**HTML：**

```
<div id="wrapper">
    <div id="left">LINKSSSSS</div>
    <div id="menu"> 
        <span class="button" id="leftbutton">open left</span>
        <span class="button" id="rightbutton">open right1</span>
        <span class="button" id="rightbutton">open right2</span>
        <span class="button" id="rightbutton">open right3</span>
    </div>
    <div id="right">RECHTSSSS</div>
</div> 
```

**CSS：**

```
 #menu {
    background:#eee;
    width:300px;
    height:400px;
    float:left;
}
#left {
    float:left;
    display:none;
}
#right {
    float:left;
    display:none;
} 
```

**JS：**

```
$(document).ready(function () {
    $('#leftbutton').click(function () {
        $('#right').hide();
        $('#left').toggle();
    });
});
$(document).ready(function () {
    $('#rightbutton').click(function () {
        $('#left').hide();
        $('#right').toggle();
    });
}); 
```

！编辑！

所以用id代替类选择器的问题已经解决了。我还设法实现了重新切换动画。当我点击同一个链接两次时，我只需要恢复切换功能。

就像现在一样：http: [//jsfiddle.net/thomascs/CfGYG/6/](http://jsfiddle.net/thomascs/CfGYG/6/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T02:20:54.167

属性`id=""`是**唯一的**。`class=""`改为使用

*   演示：http: [//jsfiddle.net/CfGYG/2/](http://jsfiddle.net/CfGYG/2/)

重新切换：

*   演示：http: [//jsfiddle.net/CfGYG/3/](http://jsfiddle.net/CfGYG/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:33:57.403

看起来您的按钮没有触发，因为您使用的是 ID 而不是类。每个页面的 ID 都是唯一的。这就是为什么只有第一个 OPEN RIGHT 按钮被触发，而不是其他两个。对于像导航菜单项这样将被反复重用的东西，您应该使用类名。

我已经修改了您的代码以使用“rightbutton”和“leftbutton”作为类而不是IDS，现在它似乎可以按需要工作。

改变 `<span class="button" id="rightbutton">open right1</span>`

至 `<span class="button rightbutton">open right1</span>`

和

`<span class="button" id="leftbutton">open left</span>`

至

`<span class="button leftbutton">open right1</span>`

请参阅下面的工作演示：

[http://jsfiddle.net/bNVkG/](http://jsfiddle.net/bNVkG/)

这具有淡化效果。我已经用fadeIn() 和fadeOut() 替换了toggle()：

[http://jsfiddle.net/HcRSm/](http://jsfiddle.net/HcRSm/)

# php - php cookie 命名约定

> ID：14471433
> 
> 赞同：1
> 
> 时间：2013-01-23T02:20:25.923
> 
> 标签：php, cookies, naming-conventions

我正在为一个新网站创建一堆 cookie，包括用户名和密码 - 均已加密。

通常我将这些cookie命名为'678768_cookie'之类的晦涩名称，但我只是想知道这是否真的有任何意义。

任何人有任何想法或命名约定以及晦涩名称的用法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T02:31:49.353

我不喜欢在 cookie 中使用用户名和密码（即使是加密的），但由于这不是我们可以跳过这部分的问题。

Cookie 应具有有用/有意义的名称并被识别：website_cookiename

例如：backOffice_sessionDetails

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T02:28:30.667

简短而有意义。如果您的 cookie 是加密的，那么用户是否可以看到名称并不重要，因此您不妨让自己和其他使用您的代码的开发人员轻松处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T02:35:58.383

> 通常我将这些cookie命名为'678768_cookie'之类的晦涩名称，但我只是想知道这是否真的有任何意义。

如果有人在寻找您网站上的 cookie，他很可能会窃取在浏览器 cookie 文件等中找到的*所有cookie……无论名称是什么。*所以使用复杂的名称没有意义，建议使用有意义的名称（另请参阅[）](https://stackoverflow.com/questions/2097843/naming-cookies-best-practices)。

> 我正在为一个新网站创建一堆 cookie，包括用户名和密码 - 均已加密。

加密用户名和密码是个好主意，因为它隐藏了一些可能很重要的信息，但是 - 即使是加密的 - 如果有人能够从您的计算机浏览器中窃取原始 cookie，他们将在她的计算机上同样工作。

# php - Windows批处理文件运行PHP文件

> ID：14471435
> 
> 赞同：6
> 
> 时间：2013-01-23T02:20:43.463
> 
> 标签：php

我有 PHP 脚本，它从后端服务器获取信息并保存到数据库中。

我正在使用 wamp 服务器和 mysql。现在如何在没有用户交互的情况下定期（每 1 小时）运行一次？我想到了使用 Windows 批处理文件。还有其他方法吗？

如何在 Windows 批处理文件中执行 PHP 文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T02:24:33.303

要从批处理文件执行 PHP，请遵循以下 3 个简单步骤：

1.  [将 PHP 添加到您的 PATH 变量](http://php.net/manual/en/faq.installation.php#faq.installation.addtopath)中。

2.  使用您的文件创建一个调用 PHP 的批处理文件：

    ```
    php path\to\file.php 
    ```

    并命名你的文件`whatever.bat`。

3.  现在只需[在 Windows 任务计划程序中设置一个任务以](http://www.howtogeek.com/school/using-windows-admin-tools-like-a-pro/lesson2/all/)定期运行您的批处理文件。

# android - Android：收到短信后如何点击列表视图中的一行？

> ID：14471436
> 
> 赞同：0
> 
> 时间：2013-01-23T02:20:49.057
> 
> 标签：android

```
public void onItemClick( AdapterView<?> parent, View view, int pos, long id ) 
    {
        try
        {
            String sender = smsList.get( pos ).split("\n")[0];
            String encryptedData = smsList.get( pos ).split("\n")[1];
            String data = sender + "\n" + StringCryptor.decrypt( new String(SmsReceiver.PASSWORD), encryptedData );
            Toast.makeText( this, data, Toast.LENGTH_SHORT ).show();
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    } 
```

我想在每次进入应用程序时解密点击收到的短信，它只有在只有一条短信时才能解密，如果收到2条短信，就无法解密，因为每次点击时，它都点击了整个`ListView`。

有谁知道如何逐行单独单击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:36:56.080

***你在做这样的事情吗？：***
***这应该有效***

```
public class MyActivity extends Activity
    implements AdapterView.onItemClickListener {

    @Override
    public void onCreate (Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listr);

        ListView lv = (ListView) findViewById(R.id.list);
        lv.setOnItemClickListener(this);

        // Do whatever else you need to do
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        // Do whatever
    }
} 
```

# java - Java DatagramSocket(UDP Socket) 仅在先前已发送数据包时接收

> ID：14471438
> 
> 赞同：3
> 
> 时间：2013-01-23T02:21:00.570
> 
> 标签：java, sockets, network-programming, udp, voip

我有以下问题：

我有一个位于远程机器上的非常简单的 Java 数据报客户端和服务器。并且客户端不会从服务器接收任何东西，除非它更早地向服务器发送了一个数据包（数据包包含什么信息都没有关系）

这是我的客户的样子：

```
 public static void TheClient() throws Exception { 
        ds = new DatagramSocket(clientPort); 
        while(true) { 
            DatagramPacket p = new DatagramPacket(buffer, buffer.length);   
            ds.receive(p); 
            System.out.println(new String(p.getData(), 0, p.getLength())); 
        } 
    } 
```

基本上，它所做的只是监听端口 clientPort，然后打印它接收到的任何内容。但是它不起作用。

现在稍微修改一下就可以解决问题了：

```
public static void TheClient() throws Exception {
    ds = new DatagramSocket(clientPort); 

    //Sending an empty packet
    byte tempBuffer1[] = new byte[10];
    InetAddress address = InetAddress.getByName(SERVER_IP);
    DatagramPacket packet1 = new DatagramPacket(
            tempBuffer1, tempBuffer1.length, address, serverPort);
    ds.send(packet1);

    while(true) { 
        DatagramPacket p = new DatagramPacket(buffer, 
                buffer.length);     
        ds.receive(p); 
        System.out.println(new String(p.getData(), 0, 
                p.getLength())); 
    } 
} 
```

有谁知道可能导致此问题的原因？虽然解决方法确实解决了问题，但对我来说为什么它最初无法正常工作没有任何意义，因此该解决方案实际上可能无法在所有计算机上工作。

另外，应该注意的是，当客户端和服务器都在同一台机器上时，代码可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:19:33.110

检查您的 PC 是否使用私有 IP 地址，通常是一个以“10.xxx”或“192.168.xx”开头的地址。如果是这样，最可能的原因是您正在使用基于 NAT 的防火墙，该防火墙共享一个公共地址和多个私有地址。

当您向外发送数据包时，防火墙知道哪个内部地址应该接收返回数据包。但是，当从外部地址启动连接时，它无法知道应该接收流量的内部地址。大多数 SOHO（小型办公室/家庭办公室）路由器将允许您将流量“端口转发”到特定的内部 IP 地址。如果您使用的是 DHCP，您需要为自己分配一个静态 IP 地址，否则您的端口转发可能会在未来某个日期停止工作，因为它会获取不同的 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-23T13:10:51.140

这发生在`AWS EC2`. 客户端的端口未在您的防火墙（安全组）上打开。当您的客户端向服务器发送数据包时，防火墙会在短时间内允许来自服务器的数据。如果防火墙上的客户端端口打开，则客户端可以从服务器接收而不向服务器发送任何内容。

# hadoop - Hadoop Pig Latin，CONCAT 函数失败

> ID：14471448
> 
> 赞同：0
> 
> 时间：2013-01-23T02:21:38.617
> 
> 标签：hadoop, apache-pig

我已经尝试了所有我能想到的排列，但我无法让 CONCAT 工作。

当我尝试：

fake = load CONCAT('foo','bar');

我得到以下信息：

2013-01-17 12:41:44,443 [main] 错误 org.apache.pig.tools.grunt.Grunt - 错误 1200：不匹配的输入 'CONCAT' 期望引用字符串

我尝试了双引号，但我不希望它起作用，而且确实没有；我尝试将参数传递给脚本并在它们上使用 CONCAT，但我得到了同样的错误。

为了激发这一点，我试图指定一个基本输出目录，该目录与各种可能的子输出目录连接，具体取决于我想要结果文件的位置。

顺便说一句，我也试过：

假=加载'foo'+'bar'；

也就是说，没有使用 CONCAT。

我正在使用 pig-0.10.1.jar - 我认为这是最新版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T03:13:56.920

您不能`CONCAT`直接在 中调用`LOAD`，但实际上不需要。您可以定义在脚本中使用`%declare`或通过命令行参数/参数文件指定的参数常量。然后您可以使用符号解析参数`$x`，并且连接是隐式的，就像在 shell 脚本中一样：

```
%declare FOO 'foo'
%declare BAR 'bar'

fake = load '$FOO$BAR'; 
```

# windows - 适用于 Windows Server 的 Varnish 的替代品

> ID：14471449
> 
> 赞同：4
> 
> 时间：2013-01-23T02:22:11.580
> 
> 标签：windows, nginx, cygwin, varnish, squid

我的操作系统是 Win2003 服务器（64 位），我想要一些软件来做文件缓存。Varnish 或 Nginx 在 Windows 上的缓存基于 Cygwin（32 位），其大小仅限于 2GB，这对我来说太小了。我可以在 Windows 上使用任何替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:35:06.397

有一些版本的 Squid 和 Nginx 可以在没有 Cygwin 的 Windows 上运行

# ios - 以编程方式创建搜索视图 ios

> ID：14471451
> 
> 赞同：1
> 
> 时间：2013-01-23T02:22:20.050
> 
> 标签：ios

我目前正在尝试在 ios 中使用 tableview 和 searchbar 以编程方式创建一个 searchview。表格视图按预期工作，但搜索栏位于屏幕左侧，只有最后一个像素可见。请告诉我我错在哪里。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    //init array item for table view
    self.timeZoneNames = [NSMutableArray array];
    for(int i = 0; i < 100; i++)
    {
        [self.timeZoneNames addObject:[NSString stringWithFormat:@"a %d", i]];
    }

    //init rectangel that store table view's frame
    UIScreen *mainScreen;
    CGRect rect = CGRectMake(0, 44, [mainScreen applicationFrame].size.width,[mainScreen applicationFrame].size.height);

    //init search bar
    UISearchBar *search = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, [mainScreen applicationFrame].size.width, 44)];

    //init search controller that handle search bar
    //UISearchDisplayController *searchController = [[UISearchDisplayController alloc] initWithSearchBar:search contentsController:self];
    //searchController.delegate = self;
    //searchController.searchResultsDataSource = self;

    //UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, [mainScreen applicationFrame].size.width, 44)];
    //[view addSubview:search];

    //init table view, add search bar on top of table view and reload data 
    UITableView *table = [[UITableView alloc] initWithFrame:rect style:UITableViewStylePlain];
    table.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;    
    table.dataSource = self;
    table.delegate = self;
    //table.tableHeaderView = search;
    [table reloadData];

    //set table view to be this controller's view
    //self.view = table;
    self.view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, [mainScreen applicationFrame].size.width, [mainScreen applicationFrame].size.height)];

    self.view.backgroundColor = [UIColor blackColor];
    [self.view addSubview:table];
    [self.view addSubview:search];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:24:44.473

您可以使用`self.view.bounds`而不是`[mainScreen applicationFrame]`. 而且您不必`self.view`再次分配内存。您可以删除该部分。

# ios - 有人可以解释 UIView 的奇怪旋转吗？

> ID：14471454
> 
> 赞同：0
> 
> 时间：2013-01-23T02:22:40.383
> 
> 标签：ios, uiview, core-animation

我正在尝试使用以下代码在包含一些 CALayers 的 iPhone 上旋转 320x320 UIView（黑色）：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:2];
    CGAffineTransform rr=CGAffineTransformMakeRotation(M_PI_2*2);
    self.transform=rr;
    [UIView commitAnimations];
} 
```

请注意，M_PI_2 是 pi/2 (math.h)。此代码将视图旋转 180°。但是，如果我将它自己更改为 M_PI_2（没有 *2），黑色 UIView 消失，内容向下和向右移动，然后大部分旋转到屏幕外。为什么是这样？我很困惑为什么视图不只是旋转 90°。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:36:58.903

因为，`transform`不同于`affineTransform`。`transform`需要一个`CATransform3D`结构，因此您应该改用便捷方法`setAffineTransform`。

**编辑**

所以它似乎`self`是一个 UIView 而我上面的答案是无关紧要的。尝试使用`[UIView setAnimationBeginsFromCurrentState:YES]`.

# java - Android静态库方法无法调用

> ID：14471455
> 
> 赞同：0
> 
> 时间：2013-01-23T02:22:44.977
> 
> 标签：java, android, c++, makefile, java-native-interface

我遇到了与此人类似的问题：

[Android NDK 导入模块/代码复用](https://stackoverflow.com/questions/6355055/android-ndk-import-module-code-reuse)

但是由于某种原因，当我实施他们列出的解决方案时，它对我不起作用。我在项目中的唯一区别是我为整个项目使用了 1 个 makefile。因此，模块如下所示：（... = 更多文件或路径）

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := mod1
LOCAL_C_INCLUDES := $(LOCAL_PATH)/to/c/includes \
... \
LOCAL_SRC_FILES := stringTester.cpp \
... \
include$(BUILD_STATIC_LIBRARY)

include $(CLEAR_VARS)

LOCAL_MODULE := mod2
LOCAL_C_INCLUDES := $(LOCAL_PATH)/to/c/includes \
... \
LOCAL_SRC_FILES := localSourceFile.cpp \
... \
include$(BUILD_STATIC_LIBRARY) 
```

等等 2 个模块，然后在最后一个模块中：

```
include $(CLEAR_VARS)

LOCAL_MODULE := sharedMod
LOCAL_C_INCLUDES := $(LOCAL_PATH)/to/c/includes \
... \
LOCAL_STATIC_LIBRARIES := mod1 mod2 mod3 mod4
... \
include $(BUILD_SHARED_LIBRARY) 
```

在我的java文件中：

```
package com.string.test

public class javaTest{

public native String returnAString();

static{
    System.LoadLibrary("sharedMod");
  }
} 
```

我遇到的问题是我无法从静态库中调用任何方法，例如 stringTester.cpp 中的任何方法，但是如果我将该文件移动到创建共享库的模块中，一切都会正常运行应该，Java 包装器是正确的，并且方法返回我期望的数据。我不将所有文件移动到共享库的唯一原因是它们是独立且不断发展的项目，例如我们的物理引擎等。

我还尝试将模块分开，每个模块都有自己的makefile，并且在共享库中也有一个cpp文件，该文件调用静态库中的方法，但我会遇到很多未解决的引用失败。我尝试过的另一种解决方案是使用 LOCAL_WHOLE_STATIC_LIBRARIES 加载静态库，但这也给了我未解决的参考错误。

任何帮助或建议表示赞赏。我束手无策，遇到了障碍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:42:12.020

答案肯定是使用：

```
LOCAL_WHOLE_STATIC_LIBRARIES := mod1 mod2 mod3 mod4 
```

我在包含其他库时遇到了其他问题，但是当简化为一个简单的测试用例时，使用上面的宏就可以了。感谢 nos 的帮助！！

# c++ - mp3 和 m4a 频率分析

> ID：14471461
> 
> 赞同：0
> 
> 时间：2013-01-23T02:23:20.100
> 
> 标签：c++, mp3, m4a, frequency-analysis

我正在使用 FMOD 的 getSpectrum 函数和 Windows 上的其他实用程序对 mp3 文件进行一些频率分析。它工作得很好，但后来我尝试从 iTunes 加载一个 .m4a 文件，并了解到 FMOD 在 Windows 上不支持该格式（仅限 iOS）。

我正在编写一个几乎可以在 Windows 和 iOS 上运行的 mp3 和 m4a 格式的均衡器。我正在用 C++ 创建它。

是否有我可以使用与 FMOD 具有类似功能的 api 或中间件来执行此操作？我一直在寻找，但没有太多运气。

谢谢

# yahoo-pipes - 使用 Yahoo Pipes 从 RSS 提要中提取超链接

> ID：14471463
> 
> 赞同：1
> 
> 时间：2013-01-23T02:23:52.017
> 
> 标签：yahoo-pipes

我想过滤来自网络漫画 RSS 提要的描述，并使用 Yahoo Pipes 提取具有特定链接文本的所有链接。例如，对于文本“本章从这里开始”和包含以下内容的描述：

```
<a href="http://example.com/1234.html">This chapter began here</a>.
<a href="http://cuteoverload.com/">Here are some great kitten pictures</a> 
```

我希望输出是

```
http://example.com/1234.html 
```

我最好的猜测是这将涉及一个正则表达式，但经过 45 分钟的研究，我不确定从哪里开始。我没有看到如何使用正则表达式来提取文本，而不仅仅是替换它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:09:45.700

正则表达式应该可以解决问题。

**A）“替换”论点**

```
(.*<a href=")(http://example\.com/[^"]*)(.*) 
```

将描述分成 3 个部分

```
(.*<a href=")
(http://example\.com/[^"]*)
(.*) 
```

**B）“With”参数**用第二部分替换整个描述

```
$2 
```

# javascript - MomentJS .format() 在我的时区产生正确的日期 -1 天

> ID：14471467
> 
> 赞同：6
> 
> 时间：2013-01-23T02:24:24.020
> 
> 标签：javascript, jquery, momentjs

我注意到，当我使用 momentJs 在我的时区以特定格式输出日期时，会丢失一天。

我在 UTC-4:30 时区。

这并非在所有时区都发生；注意到这在 UTC-5:00 时区可以正常工作。

以下是console.log连续运行的结果：

**正确的输出：**

```
moment([2013, 0, 24]) 
```

*时刻
  _a：数组 [8]
  _d：2013 年 1 月 24 日星期四 00:00:00 GMT-0430（委内瑞拉标准时间）
  _isUTC：假
  _lang：假
  _proto：对象*

```
moment([2013, 0, 24]).toDate() 
```

*2013 年 1 月 24 日星期四 00:00:00 GMT-0430（委内瑞拉标准时间）*

**输出错误：**

```
moment('01/24/2013').format('MM/DD/YYYY') 
```

*“2013 年 1 月 23 日”*

```
moment([2013, 0, 24]).format('MM/DD/YYYY') 
```

*“2013 年 1 月 23 日”*

请注意，一旦使用 .format() 方法，就会丢失一天，并且输出 23 号而不是 24 号。

任何人都可以解释这种行为吗？同样，它似乎特定于时区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T15:20:51.777

我将时区设置为`(UTC-4:30) Caracas`，然后检查以下值：

```
moment('01/24/2013').format('MM/DD/YYYY') 
```

它正确返回`01/24/2013`，所以我无法重现您描述的问题。

我正在检查 moment.js 2.0.0。在 Windows 8 上运行的 Google Chrome 27.0.1453.116m 中。

也许这与较旧版本的 moment.js 有关。你能验证一下吗？

# python - python中将edgelist导入igraph的格式

> ID：14471473
> 
> 赞同：3
> 
> 时间：2013-01-23T02:25:30.433
> 
> 标签：python, social-networking, igraph, sna

igraph 接受的用于导入 python 的 edgelist 格式是什么？包含我的加权边缘的文本文件应该是什么样的？

我以前使用过 igraph 和 R，但是在我需要使用的机器上没有安装有效的 R ——所以我被困在 python 中。

我有一个 egelist.txt 是这样的：

```
123123, 321321, 1
222222, 333333, 2
123123, 333333, 3
222222, 321321, 4 
```

...其中值采用（源、目标、权重）形式。

我将如何在 python 中导入它？或者我应该重新格式化我的输入？

我在试探

```
import igraph

g = igraph.Graph.Read_Edgelist() 
```

我不知道如何设置如何告诉导入语句期望我的列的顺序是什么，以及我对文档的理解（http://hal.elte.hu/~nepusz/development/igraph/tutorial/ tutorial.html) 是假设我有 321,321 个节点在运行，而不是将“321321”作为节点的标记 ID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:04:49.913

去掉文件中的所有逗号（即仅使用空格作为分隔符），然后使用`Graph.Read_Ncol`. 这应该可以解决问题。文件中的数字 ID 将分配给`name`顶点属性，边权重将存储在`weight`边属性中。

# java - 压缩 char[] 字母表

> ID：14471474
> 
> 赞同：-1
> 
> 时间：2013-01-23T02:25:30.957
> 
> 标签：java, arrays, char, alphabet

我最好朋友的女朋友给我发了短信，认为在他的蛋糕上写一些代码说生日快乐是个好主意。我想我会为字母表做一个数组，并使用他必须输入的一些严肃的数学方程来表示生日快乐，并为他的脸的简单版本制作一些形状。

目前我有

```
class josh
{
public static void main (String[] args)
{

        char alphabet[] = {'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'};
        char c;
       for (c = 0 ; c < 26; c++)//for statement was just a text to make sure it worked
        {
            System.out.println (alphabet[c]);
        }       
} 
```

}

我想做的只是为了生日蛋糕，压缩字母数组初始值设定项中的 az ，只需使用一些东西而不是全部输入以保持简单。我想到了一个 for 语句，但不知道如何使用它。有什么建议么？

编辑：她可以打印出一张图片，这样我就可以放入更多代码。如果蛋糕太多了，我可以把它剪成更简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:36:13.077

您可以使用 ascii 数字并循环它。例如声明一个 char chAlpha 然后用这些代码初始化它：

```
char[] chAlpha = new char[26];
for (int i = 0; i < 26; ++i) {
   char[i] = (char) (i + 65);
}//note that 65-131 is decimal value of the alphabet 
```

对于小写/小写字母：

```
char[] chAlpha = new char[26];
for (int i = 0; i < 26; ++i) {
       char[i] = (char) (i + 97);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:30:44.367

您可以像这样初始化字母表：

```
char[] alphabet = new char[26];
for (int i = 0; i < 26; ++i) {
   char[i] = (char) (i + 65);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T02:36:20.460

关于什么：

```
String s1= "day!"; 
String s2= "Hap";
String s3= "py ";
String s4= "Birth";
System.out.println(s2+s3+s4+s1); 
```

# mysql - 在 fedora16 上安装 mysql 和 mysql2 gem 失败

> ID：14471478
> 
> 赞同：2
> 
> 时间：2013-01-23T02:26:02.650
> 
> 标签：mysql, ruby, gem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:24:06.230

[root@Lil zhanlgei]# gem install mysql2 构建原生扩展。这可能需要一段时间... 错误：安装 mysql2 时出错：错误：无法构建 gem 原生扩展。/usr/bin/ruby extconf.rb 检查 rb_thread_blocking_region()... 不检查 rb_wait_for_single_fd()... 不检查 mysql.h... 是 检查 errmsg.h... 是 检查 mysqld_error.h ...是的，正在创建 Makefile

你有安装mysql开发包吗？放置整个构建日志（包括下一个 shell 提示符之前的所有内容）

我已经通过yum安装了'mysql-devel'。安装mysql2时的总信息是：[root@Lil zhanlgei]# gem install mysql2 构建原生扩展。这可能需要一段时间... 错误：安装 mysql2 时出错：错误：无法构建 gem 原生扩展。/usr/bin/ruby extconf.rb 检查 rb_thread_blocking_region()... 不检查 rb_wait_for_single_fd()... 不检查 mysql.h... 是 检查 errmsg.h... 是 检查 mysqld_error.h ...是的，正在创建 Makefile ..... gcc -shared -o mysql2.so mysql2_ext.o client.o result.o -L。-L/usr/lib64 -L. -Wl,-z,relro -rdynamic -Wl,-export-dynamic -Wl,-rpath,/usr/lib64/mysql -lruby -L/usr/lib64/mysql -lmysqlclient -lpthread -lz -lm -lrt -lssl -lcrypto -ldl -lpthread -lrt -ldl -lcrypt -lm -lc /usr/bin/ld: 跳过不兼容的 /usr/lib/gcc/x86_64-redhat-linux/4.6.3/../../.. /libz。

将 zlib 升级到最新版本。

耶！~gem 安装成功！想你hd1！

# php - 砖石画格

> ID：14471480
> 
> 赞同：3
> 
> 时间：2013-01-23T02:26:51.550
> 
> 标签：php, javascript, jquery, math

我一直在思考这个复杂的问题，我相信有一个简单的答案或我可以找到解决方案的其他途径。

我想要完成的是一个随机的图像网格。我有一组图像，我想将它们排列在一个齐平的网格中。我的意思是我希望网格中没有任何间隙。以下是一些示例图像：

![示例网格](../Images/ae44928e6b038b53c48d2b6ac54e6e58.png)

## 关键规格：

*   容器/单元格必须处于图像可以不倾斜的比例
*   网格必须齐平。它不能有任何间隙，包括最后一行。

我遇到的问题是我无法提出或表达一个可以创建我想要完成的表 maxtrix 的公式。Masonary 是我正在寻找的 99.9%，除了网格没有考虑图像大小，也没有结束齐平。所以这 1% 就是我不考虑使用它的原因。

我不是在寻找特定的 javascript，因为这与数学有关，所以我计划在 PHP 中创建布局，然后在 javascript 中提供功能。

任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:17:08.790

您的示例图像按行排列。此外，您没有写任何关于固定总大小的内容，所以我假设可以随意选择整个布局的纵横比。在这种情况下，您可以尝试以下方式：

1.  通过固定高度并选择宽度以保持纵横比，将所有图像排成*一行。*
2.  将该单行拆分为多行。在这里，您可以使用多种启发式方法，根据您的喜好调整最终结果。但是*任何*解决方案都会满足您所说的要求。
3.  以这样的方式缩放每一行，使它们都具有相同的宽度，然后将它们堆叠起来。

显然这只是一个粗略的轮廓。真正困难的部分是*如何*将图像分布到不同的行上。一个目标可能是组合具有相似纵横比的图像，以使最终图像具有相似的大小。您可以为每个比率计算将导致所需图像区域的首选图像高度，然后组合具有相似高度要求的图像，直到缩放到共同高度产生的宽度与您希望的最终行的宽度相匹配。但其他方面也将发挥作用，例如制作类似宽度的行，以及类似的东西。

您可能会在其他答案和评论中找到有关目标的建议，然后玩弄它们，直到找到您喜欢的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T10:48:50.977

[Justified-Gallery](https://github.com/miromannino/Justified-Gallery)看起来像是一个解决方案，[这里是带有示例的站点](http://miromannino.com/projects/justified-gallery/)。

![来自 miromannino.com/projects/justified-gallery/ 的屏幕截图示例](../Images/499954d374232763fed3d147cb0ba065.png)

# c++ - 外部参照错误：“无效”函数返回值

> ID：14471481
> 
> 赞同：2
> 
> 时间：2013-01-23T02:26:53.817
> 
> 标签：c++, windows, c++11, visual-studio-2012, bind

使用 Visual Studio 2012 编译我的项目时，我遇到了这个奇怪的错误：

`error C2562: 'std::_Callable_obj<_Ty>::_ApplyX' : 'void' function returning a value C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\xrefwrap`

跳转时`xrefwrap`，错误来自这一行：

`_VARIADIC_EXPAND_0X(_APPLYX_CALLOBJ, , , , )`

我的代码在 Linux 上使用 GCC 编译得很好。另外，编译器没有给我任何关于导致此错误的信息。

此错误的原因可能是什么？我怀疑这段代码可能是源代码，但这只是因为我`std::ref`在那里使用：

```
_listener.addSocket(clientSock, std::bind(&Client::handleReceive, &client,
                                          _1, std::ref(*this)),
                    std::bind(&Lounge::handleClientDisconnect, this,
                              std::cref(client))); 
```

这是我绑定的成员函数的两个签名：

```
bool  Client::handleReceive(std::shared_ptr<TBSystem::network::sockets::ITcpSocket>& socket,
                        Lounge& lounge);

void  Lounge::handleClientDisconnect(const Client& c); 
```

我确实返回了一个值`Client::handleReceive`。

这是`std::function`我在调用时使用的两个原型`addSocket`：

```
typedef std::function<bool (std::shared_ptr<sockets::ITcpSocket>&)> readCallback;
typedef std::function<void ()> disconnectCallback; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:37:23.320

好吧，原来在我的一个文件中，我添加了一个带有错误原型（`std::plus`）的侦听器......

```
_listener.addSocket(serverSocket,
                    std::bind(&Lounge::acceptClient, this, _1),
                    std::bind(std::plus<int>(), 0, 0); 
```

# xcode - XCode 标题 Ctrl 拖动

> ID：14471489
> 
> 赞同：-1
> 
> 时间：2013-01-23T02:28:00.247
> 
> 标签：xcode

当我控制将出口从 MKMapView 拖动到我的头文件时 - XCode 4.5.2 不会自动为 MapKit/MapKit.h 添加#import

我必须手动添加这个 -

XCode有没有办法自动添加头文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:31:56.460

没有。将创建的唯一代码控制拖动是 IBOutlets 和 IBActions。

# web-services - 使用指定的客户端密钥设计 API

> ID：14471490
> 
> 赞同：12
> 
> 时间：2013-01-23T02:28:12.650
> 
> 标签：web-services, security, api, web-applications, api-design

我正在设计一个 JSON Web API，并希望通过唯一的 ID 来区分客户端，以监控使用情况并阻止恶意/行为不端的客户端。该 API 没有封装在 JavaScript 库中，也不是 Web 应用程序独有的，任何客户端类型都可以使用它（桌面、电话等）。

**问题是，网络应用程序（官方网站）也是 API 本身的客户端**，因此必须公开其 API 密钥。因此，某些用户可以直接从页面上的 JavaScript 中提取密钥并使用它，而不是生成自己的密钥。

是否有可能通过一些更好/更智能的设计选择以某种方式缓解这个问题，还是我必须接受这样一个事实，即任何恶意使用 API 的人都可以利用这一点？

我对前端应用程序 (EmberJS) 和后端服务器 (Go) 有 100% 的控制权，因此可以建议任何更改。

*   我正在使用每个会话/IP 的速率限制来为这种情况添加额外的保护层
*   twitter.com 页面曾经也是它自己的 API 的客户端。他们是怎么解决的？

**注意：问题不在于身份验证或安全性本身，而是如何要求第 3 方用户在身份验证之外（！）使用 API 密钥！**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T13:35:44.890

您应该区分 Web 客户端和非 Web 客户端。Web 的访问密钥不能在非 Web 中使用，反之亦然。对于网络客户端，您可以进行引用检查等。您还可以为您的应用程序动态创建访问密钥并每天（或每个会话）自动更改它们。您还可以仅为您的应用添加一些特殊的验证，例如一些由混淆 JS 计算的附加密钥。

没有什么能阻止恶意用户模拟浏览器，执行 JS，操纵它，然后做坏事——但你可以让它变得足够烦人，以至于他们认为不值得他们努力。**诸如权限等非常重要的事情显然需要在服务器端进行检查，因此滥用您的 API 应该不是什么大问题。**您必须像处理常规 Web 应用程序滥用 - IP 块等一样，通过您网站的 API 密钥处理 API 滥用。

您仍然需要为非 Web 客户端的 API 密钥保密。这只能通过混淆来不可靠地完成，您可以将其交给客户端开发人员。如果他们的密钥被泄露和滥用，您将其撤销，他们将有动力修复它。

看看[OAuth 2.0](https://www.rfc-editor.org/rfc/rfc6749#section-2.1)，它们包含许多可能对您有用的功能。即使你不想使用它，你也可以从中获得一些灵感。OpenStreetMap 使用 OAuth（不确定是 1 还是 2）作为基于 flash 的编辑器；只要登录用户从同一来源调用它，就会自动完成 OAuth 权限授予。对于第三方应用程序，用户需要手动完成。你可能想检查一下。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T16:04:25.187

仅使用单个 API 密钥将无法使您的 API 安全。您所描述的 API 密钥基本上是一个公钥，您将需要某种类型的私钥来进行安全识别/身份验证以及一种传递它的机制。

你问 Twitter 是如何解决这个问题的。他们使用 Oath 1.0a。以下是[Twitter 开发人员常见问题解答](https://dev.twitter.com/docs/faq)中关于它如何与 API 密钥绑定的简要说明。

> 大多数与 API 的集成都需要您通过 API 密钥向 Twitter 识别您的应用程序。在 Twitter 平台上，术语“API 密钥”通常指的是所谓的 OAuth 消费者密钥。此字符串在向 API 发出请求时标识您的应用程序。在 OAuth 1.0a 中，您的“API 密钥”可能是指此消费者密钥和“消费者秘密”的组合，该字符串用于安全地“签署”您对 Twitter 的请求。除了应用程序上下文之外，大多数对 Twitter 的请求都需要用户上下文。通过使用另一种称为“访问令牌”的令牌/密钥来呈现用户上下文。有关更多信息，请参阅获取访问令牌。

[您可以在Apigee.com](http://apigee.com/about/)找到很多关于设计 API 的优秀资源。他们建议使用[OAuth 2.0](http://oauth.net/2/)进行身份验证/授权。

这是关于如何使用[HMAC 身份验证来保护 Web API](https://stackoverflow.com/questions/11775594/how-to-secure-an-aspnet-mvc-web-api/11782361#11782361)的描述。

当我不得不使用仅使用 API 密钥的 API 时，我为我的 Web 应用程序使用了一种解决方法。我不直接从 Web 应用程序的客户端部分（即 Web 浏览器中的 JavaScript）访问 API。相反，我访问 API 服务器端并将 API 密钥加密存储在安全配置文件中。我为原始 API 提供了一个 Facade，并使用我自己的安全方法来保护依赖于应用程序类型的 Facade API。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-29T11:44:07.060

通用 API 工作流程：

1.  客户端发送请求
2.  请求经过身份验证和授权
3.  数据被发回

网站 - 登录

1.  用户登录提供用户名和密码
2.  创建一个秘密并将其存储到一个 cookie 中

网站 - API 访问

1.  客户端发送请求
2.  根据 coockie 的秘密对请求进行身份验证和授权（cookie 随请求一起发送）
3.  数据被发回

非 WEB 客户端 - 获取 API KEY（长随机字母数字字符串）

1.  选项 1 - 用户在网站上注册客户端，获取 API KEY 并将其存储到客户端
2.  选项 2 - 用户在客户端输入用户名和密码，客户端请求一个带有用户名和密码的 API KEY，密钥被返回并存储到客户端。用户名和密码不存储在客户端上。

非 WEB 客户端 - API 通信

1.  客户端使用 API KEY 发送请求
2.  请求基于 API-KEY 进行认证和授权
3.  数据被发回

当使用选项 2 生成密钥时，您可以获得一些额外的数据，因为它来自客户端（操作系统、浏览器）。在这种情况下，当检查 API-KEY 时，如果用户更改了操作系统或浏览器，您可以强制用户生成一个新的

关键是您的 API 以两种方式对请求进行身份验证。使用 coockie 的秘密或 API KEY。因此无需在网站上公开 API-KEY。

请注意，对于使用 API-KEY 的客户端，不涉及会话。每个请求仅由 API-KEY 进行身份验证。所以那些客户端被认为是非 WEB 应用程序。

# javascript - 具有多个字段的内容可编辑和本地存储问题

> ID：14471495
> 
> 赞同：1
> 
> 时间：2013-01-23T02:30:22.593
> 
> 标签：javascript, html, local-storage, contenteditable

我一直在尝试用我对 HTML5 的基本知识来解决这个问题，但我想要做的是允许访问者在一个页面上编辑多个表单字段，然后使用能够在重新查看这些更改时使用 localstorage 保存它们- 访问页面。

这是我到目前为止从教程中得到的：http: [//www.developerdrive.com/2012/06/allowing-users-to-edit-text-content-with-html5/](http://www.developerdrive.com/2012/06/allowing-users-to-edit-text-content-with-html5/)

发生的事情是字段二覆盖了字段一，这不是我的预期结果。预期结果 = 每个可编辑区域在编辑完成后应保持其自己的编辑状态。页面上大约有 63 个字段，但为简单起见，我包括了 2 个。

JavaScript：

```
<script type="text/javascript">
function saveEdits() {

//get the editable element
var editElem = document.getElementById("edit");
var editElem = document.getElementById("edit2");

//get the edited element content
var userVersion = editElem.innerHTML;

//save the content to local storage
localStorage.userEdits = userVersion;

//write a confirmation to the user
document.getElementById("update").innerHTML="Edits saved!";
}

function checkEdits() {

//find out if the user has previously saved edits
if(localStorage.userEdits!=null)
document.getElementById("edit").innerHTML = localStorage.userEdits;
}

</script> 
```

HTML：

```
<body onload="checkEdits()">

<div id="edit" contenteditable="true">LASTNAME</div> 
<div id="edit2" contenteditable="true">FIRSTNAME</div>

<input type="button" value="save my edits" onclick="saveEdits()"/>
<div id="update"> - Edit the text and click to save for next time</div> 
```

非常感谢您的帮助，特别是如何以及相应地添加什么以包括将来可能更多可编辑的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:30:38.263

首先，您在 saveEdits() 函数中覆盖了相同的 var editElem 两次，因此您只会得到第二个。

如果您有很多字段，最好将它们存储在一个对象中并将其保存到 localstorage，如下所示：

```
function saveEdits() {
    //get the editable elements.
    var editElems = {
        'edit1': document.getElementById('edit1').innerHTML,
        'edit2': document.getElementById('edit2').innerHTML
    };

    //save the content to local storage. Stringify object as localstorage can only support string values
    localStorage.setItem('userEdits', JSON.stringify(editElems));

    //write a confirmation to the user
    document.getElementById("update").innerHTML="Edits saved!";
} 
```

所以基本上你有一个以字段 id 作为键及其值的对象（editElems）。

然后检索此对象并在页面上填写您的字段：

```
function checkEdits(){
    //find out if the user has previously saved edits
    var userEdits = localStorage.getItem('userEdits');
    if(userEdits){
        userEdits = JSON.parse(userEdits);
        for(var elementId in userEdits){
          document.getElementById(elementId).innerHTML = userEdits[elementId];
        }
    }
} 
```

请注意，只有字符串值可以存储在 localStorage 中，因此您必须在保存对象时使用 JSON.stringify，然后在检索时将其解析回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:10:58.307

如果我了解您如何正确尝试执行此操作，那么问题是您有：

```
var editElem = document.getElementById("edit");
var editElem = document.getElementById("edit2"); 
```

执行此操作时，第二行会更改 的值`editElem`，因此您不能再使用第一个值。

我怀疑您想使用 for 循环：

```
 function saveEdits() {

      for (var i = 0; i < something; i++) {
            // get the editable element
            var editElem = document.getElementById("edit" + i)

            //get the edited element content
            var userVersion = editElem.innerHTML;

            //save the content to local storage
            localStorage.userEdits = userVersion;

      }

      //write a confirmation to the user
      document.getElementById("update").innerHTML="Edits saved!";
 } 
```

您还必须为本地存储中的每个值使用不同的键，大概遵循相同的模式。

# mysql - MySQL：查询中的查询？

> ID：14471508
> 
> 赞同：1
> 
> 时间：2013-01-23T02:32:29.283
> 
> 标签：mysql, sql, sql-insert

简单的问题，我仍然无法弄清楚。我有两张桌子。

```
Table items: id (INT), text (VARCHAR)
Table shared: type (VARCHAR), account (VARCHAR), id (INT) 
```

解释：

*   表**项**包含推文列表。

*   **共享**表包含已共享（发送到 Twitter）的所有推文的列表。

现在我需要有一个查询，它为我提供**项目**表中尚未用于**共享**表中特定“类型”和“帐户”的最旧文本（最小的“id”）。

例子：

数据库看起来像这样。**项目**表中有两个项目，尚未共享任何项目。

```
Table items: [[1, "First Tweet"], [2, "Second Tweet"]]
Table shared: [] 
```

运行查询将返回 [1, "First Tweet"]。之后，我将在共享表中插入一个值，如下所示：

```
Table items: [[1, "First Tweet"], [2, "Second Tweet"]]
Table shared: [["twitter", "my-twitter-account", 1]] 
```

再次运行查询将返回 [2, "Second Tweet"]。之后，我将在共享表中插入一个值，如下所示：

```
Table items: [[1, "First Tweet"], [2, "Second Tweet"]]
Table shared: [["twitter", "my-twitter-account", 1], ["twitter", "my-twitter-account", 2]] 
```

我知道我可以通过首先从**项目**表中提取所有“id”，将它们放入一个数组中，然后检查“id”是否在**共享**表中，但我认为这是一个可怕的解决方案......表最多将增长到大约 10,000 个项目。

**解决方案**

编辑：我稍微修改了 JW. 的代码，它运行良好。谢谢！

我的查询：

```
SELECT a.id, a.text, MIN(a.id) ID
FROM    items a
        LEFT JOIN shared b
            ON a.id = b.id
WHERE   b.id IS NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:38:27.840

尝试使用`INSERT..INTO SELECT`

```
INSERT INTO shared (type, account, id)
SELECT 'twitter' type, 'my-twitter-account' account, MIN(a.id) ID
FROM    items a
        LEFT JOIN shared b
            ON a.id = b.id
WHERE   b.id IS NULL 
```

# c - 套接字选项“SO_DONTROUTE”和 send() 标志“MSG_DONTROUTE”都不起作用

> ID：14471509
> 
> 赞同：1
> 
> 时间：2013-01-23T02:32:38.330
> 
> 标签：c, sockets, network-programming

根据我从手册页的理解，当设置 MSG_DONTROUTE 时，数据包应该只发送到直接连接到源的目的地。但是，当我尝试将数据包发送到间接连接的目的地（需要路由）时，send() 仍然返回一个正值。我有什么误解吗，谢谢？

# 这是我的测试代码：

```
int main (int argc, char *argv[]) {

    const char* ip = argv[1] ? argv[1] : "74.125.31.100"; // google

    int fd = socket (AF_INET, SOCK_STREAM, 0);
    if (fd == -1)
        ErrAndExit("socket");

    struct sockaddr_in addr;
    memset (&addr, 0, sizeof(sockaddr_in));
    addr.sin_family = AF_INET;
    addr.sin_port = htons (80);
    if (inet_pton (AF_INET, ip, &addr.sin_addr) != 1)
        ErrAndExit ("inet_pton");

    if (connect (fd, (struct sockaddr*) &addr, sizeof(addr)) == -1)
        ErrAndExit("connect");

    // int optval = 1;
    // int optlen = sizeof(optval);
    // if (setsockopt (fd, SOL_SOCKET, SO_DONTROUTE, (void*) &optval, optlen) == -1)
    //     ErrAndExit ("setsockopt");

    ssize_t written = send (fd, "apple", 6, MSG_DONTROUTE);
    if (written == -1)
        ErrAndExit ("send");
    else
        printf ("wrote %ld bytes\n\n", written);

    return 0;
} 
```

# ruby - Ruby 用空格将第一个字符大写

> ID：14471511
> 
> 赞同：2
> 
> 时间：2013-01-23T02:32:42.817
> 
> 标签：ruby

一些规则：必须使用大写（不是大写或任何其他表达式）

坚持以下几点：

```
字符串 = <<-这里
              我喜欢炸玉米饼。我听见
   它们美味又营养

这里

```

我需要用空格将每行的第一个单词大写，并且无法弄清楚如何完成它：

输出需要如下所示：

```
              我喜欢炸玉米饼。我听见
   它们美味又营养

```

任何指导或帮助将不胜感激。我什至会指出正确的方向而不是答案！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T03:13:10.993

这是一个可以满足您要求的单线：

`string.gsub(/^\s*\w/) {|match| match.upcase }`

我知道您说“没有大写”，但在这种情况下，它只是将第一个字母大写。如果您对此有任何疑问，请告诉我。

为了解决您对另一个答案的评论，您始终可以使用`gsub!`在不创建副本的情况下对字符串进行适当的变异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T03:16:24.063

```
string.gsub!(/^\s*\w/){|match| match.upcase} 
```

这将在不创建新字符串的情况下完成您想要的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T02:49:21.030

这行得通吗？

```
string = <<-HERE
              i love tacos.  I hear
   they are delicious and nutritious

HERE

string.gsub!(/(^\s*)(\w)/) do |match|
  $1 << $2.capitalize
end 
```

这试图做的是在换行符上拆分字符串，搜索第一个字母，将其大写并重新加入片段。

这将产生：

```
>           I love tacos.  I hear
   They are delicious and nutritious 
```

# c# - 具有已知最大项目数和固定键大小的高效固定大小“有损”哈希表

> ID：14471512
> 
> 赞同：0
> 
> 时间：2013-01-23T02:32:44.850
> 
> 标签：c#, .net, hash, hashtable

考虑到我总是有一个 128 位整数作为键和最大数量的元素，是否有可能制作一个完美的散列函数？

我想将 guid 存储为键，并且我想要一个固定大小的无链表解决方案。也就是说，如果发生碰撞，我会失去第二个元素。

有人可以推荐一个可以做到这一点的散列函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:38:43.903

> 考虑到我总是有一个 128 位整数作为键和最大数量的元素，是否有可能制作一个完美的散列函数？

如果密钥的熵（包含在变量中的信息的预期值）大于散列结果可以容纳的值 - 答案是否定的。如果密钥的熵等于或低于散列结果可以容纳的熵 - 答案是肯定的。

这意味着，如果您的散列函数例如生成 16 位结果（65536 个可能值）并且您的 128 个键变量可以假设最多 65536 个或更少的不同值（因此 128 位键的熵最多为 10 -bits) 比存在这样的散列函数。另一方面，如果您的密钥可以假设超过 65535 个不同的值，则无法将其散列到 65535 个或更少的存储桶中。

> 有人可以推荐一个可以做到这一点的散列函数吗？

在不知道密钥的可能值的情况下，即使您知道密钥熵如此之低以至于可以完成这一事实，也没有人可以为您提供可以做到这一点的散列函数。

# php - 如果外部页面输入名称与数组不匹配，则执行其他操作

> ID：14471513
> 
> 赞同：0
> 
> 时间：2013-01-23T02:32:48.253
> 
> 标签：php, arrays

可以说我有一个这样的数组。. .

> $array = array("username", "password", "token", "redirect", "sid");

我想要做的是如果输入名称在数组中不匹配，否则使用不匹配的输入名称和值做一些事情，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:34:45.250

我认为您正在尝试过滤不在数组中的输入字段。

如果我正确理解您的问题，请按以下步骤操作：

```
$array = array("username", "password", "token", "redirect", "sid");

foreach ( $_POST as $input_name => $value ) {
    if ( ! in_array($input_name, $array) ) {
        // Do something with $value
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:35:03.807

您可以使用**[`in_array()`](http://php.net/manual/en/function.in-array.php)**.

```
if(in_array($myName, $array)) {
   // in the array.
} else {
  // nope.
} 
```

您可以找到不`$array`使用此功能的键。

```
$keys = array_keys($_POST);

$invalidKeys = array_merge(array_diff($array, $keys), array_diff($keys, $array)); 
```

# python - 如何将字典列表列表转换为单个熊猫数据框？

> ID：14471515
> 
> 赞同：4
> 
> 时间：2013-01-23T02:33:14.140
> 
> 标签：python, pandas

我之前的代码是熊猫数据框列表列表，如下所示

```
rowResults = [ [df, df, df], [df, df, df], ... [df, df, df] ]
results=results.append(rowResults) 
```

由于所有数据帧都具有完全相同的列，因此当我附加上面的列表时，它将整个数据结构转换为具有与单个数据帧相同的列的单个数据帧。

现在，由于性能问题，我已将小数据帧转换为字典。如果我创建大量数据帧，我会发现在存储 pandas 数据帧使用的元数据信息时存在某种内存泄漏。当我使用字典时不会发生这种情况。

我的新代码如下

```
rowResults = [ [dict, dict, dict], [dict, dict, dict], ... [dict, dict, dict] ]
results=results.append(rowResults) 
```

上面的代码与前一种情况的效果不同，这是正常的。如何转换上面的字典列表列表，以便最终的 pandas 数据帧具有与字典键相同的列？如果是字典，我的输出如下所示

```
(Pdb) results
<class 'pandas.core.frame.DataFrame'>
Int64Index: 799 entries, 0 to 798
Data columns:
0                799  non-null values
1                799  non-null values
2                799  non-null values
column1            0  non-null values
column2            0  non-null values
column3            0  non-null values
column4            0  non-null values 
```

请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T03:52:18.677

我在下面的代码中实现了上述用途。让我知道这是否是最好的方法。请注意，每一行都是下面代码中的字典列表。

```
frames=[]
for row in self.rowResults:
    frames.append(pandas.DataFrame(row))
self.results = pandas.concat(frames) 
```

# xaml - DependencyProperty 数据绑定返回空值

> ID：14471522
> 
> 赞同：0
> 
> 时间：2013-01-23T02:34:24.377
> 
> 标签：xaml, windows-8, dependency-properties

我正在编写一个 Windows 8 应用商店应用程序（Metro / Modern？），并且我正在创建一个控件以在多个表单上重新使用格式。我过去创建了一些 WPF 应用程序，并尝试以与在 WPF 中相同的方式创建依赖属性。但是，当我将控件放在表单上以使用它时，我无法返回任何值。

我的 personControl.cs WPF 类：
公共部分类 PersonControl：UserControl {

```
 public PersonControl()
    {
        InitializeComponent();

    }

    public static readonly DependencyProperty PersonProperty = 
        DependencyProperty.Register("thisPerson", typeof(Person), typeof(PersonControl));

    public Person thisPerson
    {
        get
        {
            return (Person)GetValue(PersonProperty);
        }
        set
        {
            SetValue(PersonProperty, value);
        }
    }

} 
```

对于 Windows 8 应用程序，它需要添加 PropertyMetadata ——我假设这是我出错的地方，但我无法追踪要做什么：

公共部分类 PersonControl : UserControl {

```
 public PersonControl()
    {
        InitializeComponent();

    }

    public static readonly DependencyProperty PersonProperty = 
        DependencyProperty.Register("thisPerson", typeof(Person), typeof(PersonControl), new PropertyMetadata(new Person()));

    public Person thisPerson
    {
        get
        {
            return (Person)GetValue(PersonProperty);
        }
        set
        {
            SetValue(PersonProperty, value);
        }
    }

} 
```

* * *

据我所知，XAML 中控件的使用或绑定没有任何变化。我仍在使用示例数据，因此我创建了一个 List(Person)，然后创建了一个列表框并将列表框绑定到 List(Person)。

* * *

这是绑定代码：

在用户控件 xaml 上：

```
<Grid x:Name=”PersonGrid”&gt;
…….
<TextBox x:Name="txtFirstName" Text="{Binding Path=thisPerson.FirstName, ElementName=This}"></TextBox> 
```

在 Xaml 主页上：

```
<StackPanel x:Name="layoutRoot">        
   <ListBox x:Name="myListbox">
       <ListBox.ItemTemplate>
           <DataTemplate>
                <local:PersonControl x:Name="myControl" thisPerson="{Binding Path=.}" Margin="5"></local:PersonControl>               
           </DataTemplate>
       </ListBox.ItemTemplate>
   </ListBox> 
```

后面的主页代码：

```
List<Person> People = new List<Person>();
… populate data … 
myListbox.ItemsSource = People; 
```

* * *

作为附加说明——当我获取 UserControlXaml 的内容并将 UI 元素直接放入主页上的 XAML 时，它工作正常——当我使用 UserControl 时它失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:27:39.083

IIRC，如果值与默认值不同，则 SetProperty 调用只会导致注册更改。同样，IIRC，SetProperty 不比较实际对象，只要对对象的引用是否已设置（object.Equals vs. object ！= null）。通过使用此代码...

```
new PropertyMetadata(new Person())); 
```

SetValue 不能按预期工作，因为它有一个对象，并且分配一个新对象不会导致属性更新。改成

```
new PropertyMetadata(null) 
```

我认为事情会正常进行。

有点匆忙，所以也许我错过了什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:32:11.303

用户控件上的 XAML 中的行似乎是：

```
<TextBox x:Name="txtFirstName" Text="{Binding Path=thisPerson.FirstName, ElementName=This}"> 
```

在 Windows 8 中的工作方式不同——当我取出对 ElementName 和 DependencyProperty 的引用时（我猜只是让 .Net 自己解决这个问题？）它工作得很好。

所以：

```
 <TextBox x:Name="txtFirstName" Text="{Binding Path=FirstName}"></TextBox> 
```

工作正常，绑定现在可以正常工作。

# linux - 编写 linux 命令脚本来修改文件中的数据

> ID：14471523
> 
> 赞同：1
> 
> 时间：2013-01-23T02:34:28.863
> 
> 标签：linux, command-line, batch-file, ssh, plink

我有一系列设备需要通过 SSH 连接，修改一些文件以更改设备名称和网​​络设置。

这些文件包含以下数据：

```
NETWORK_ETH1_CLIENTIP_LIST='10.47.19.182'

HOSTNAME="c50" 
```

我正在使用 putty ssh 进入系统，然后使用 nano 修改每个文件。

我相信编写脚本很容易，但我不太确定我想要做什么的 linux 命令。

linux 中是否有我可以使用的命令在指定的文本文件中搜索字符串，例如“HOSTNAME”并用新的 HOSTNAME 替换找到的行？

我目前正在使用 plink 进行一些从批处理文件调用的更简单的系统检查：

```
plink.exe -pw PASSWORD USERNAME@192.168.77.77 -m Commands/SystemChecks.txt 
```

用户名和密码已被省略。SystemChecks 包含一些基本的查找表和 ping 命令等来测试设备是否被成功修改。

我需要帮助的是找出一种使用 linux 命令查找和替换数据（主机名、IP 地址、网络掩码等）的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:38:23.657

```
echo 'HOSTNAME="c50"' | sed 's/HOSTNAME="c50"/HOSTNAME="c60"/g' 
```

使用命令`sed`，您可以轻松实现替换。

假设您有一个名为的文件`file.conf`，并且该文件中有以下内容，如下所示：

```
NETWORK_ETH1_CLIENTIP_LIST='10.47.19.182'
HOSTNAME="c50" 
```

因此，如果要将值更改`HOSTNAME="c50"`为`HOSTNAME="d10000"`，可以通过`sed`以下方式使用：

```
sed -i 's/HOSTNAME="c50"/HOSTNAME="d10000"/g' file.conf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:40:33.843

您可以使用 sed 将线路吹走并使用 echo 重新编写内容。我敢肯定，可能有更优雅的方式来替换值

```
target='/path/to/target_file'
sed -i "/HOSTNAME/d" $target
echo "HOSTNAME=\"newhostname\"" >> $target 
```

# java - 水平日历

> ID：14471532
> 
> 赞同：1
> 
> 时间：2013-01-23T02:35:17.573
> 
> 标签：java, swing, calendar

我对 Java 还是很陌生，并且作为一个整体编码，所以请原谅我的新手问题。

我正在尝试制作一个日历，除了正常的 6 x 7 布局等。我希望它在月视图中水平显示。

这就是我到目前为止所拥有的。我尝试更改列和行以及框架宽度，但我无法让窗格以水平方式正确显示。

任何帮助表示赞赏。

```
package Calendar_Test;

/*Contents of CalendarProgran.class */
//Import packages
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;
import javax.swing.table.*;

public class Test_Code {

    static JLabel lblMonth, lblYear;
    static JButton btnPrev, btnNext;
    static JTable tblCalendar;
    static JComboBox<String> cmbYear;
    static JFrame frmMain;
    static Container pane;
    static DefaultTableModel mtblCalendar; //Table model  
    static JScrollPane stblCalendar; //The scrollpane  
    static JPanel pnlCalendar;
    static int realYear, realMonth, realDay, currentYear, currentMonth;

    public static void main(String args[]) {
        //Look and feel  
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException e) {
        } catch (InstantiationException e) {
        } catch (IllegalAccessException e) {
        } catch (UnsupportedLookAndFeelException e) {
        }

        //Prepare frame  
        frmMain = new JFrame("Key Dates Timeline"); //Create frame  
        frmMain.setSize(330, 375); //Set size to 400x400 pixels  
        pane = frmMain.getContentPane(); //Get content pane  
        pane.setLayout(null); //Apply null layout  
        frmMain.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); //Close when X is clicked  

        //Create controls  
        lblMonth = new JLabel("January");
        lblYear = new JLabel("Change year:");
        cmbYear = new JComboBox<String>();
        btnPrev = new JButton("<<");
        btnNext = new JButton(">>");
        mtblCalendar = new DefaultTableModel() {

            /**
            *
            */
            private static final long serialVersionUID = 1L;

            public boolean isCellEditable(int rowIndex, int mColIndex) {
                return false;
            }
        };
        tblCalendar = new JTable(mtblCalendar);
        stblCalendar = new JScrollPane(tblCalendar);
        pnlCalendar = new JPanel(null);

        //Set border  
        pnlCalendar.setBorder(BorderFactory.createTitledBorder("Calendar"));

        //Register action listeners  
        btnPrev.addActionListener(new btnPrev_Action());
        btnNext.addActionListener(new btnNext_Action());
        cmbYear.addActionListener(new cmbYear_Action());

        //Add controls to pane  
        pane.add(pnlCalendar);
        pnlCalendar.add(lblMonth);
        pnlCalendar.add(lblYear);
        pnlCalendar.add(cmbYear);
        pnlCalendar.add(btnPrev);
        pnlCalendar.add(btnNext);
        pnlCalendar.add(stblCalendar);

        //Set bounds  
        pnlCalendar.setBounds(0, 0, 320, 335);
        lblMonth.setBounds(160 - lblMonth.getPreferredSize().width / 2, 25, 100, 25);
        lblYear.setBounds(10, 305, 80, 20);
        cmbYear.setBounds(230, 305, 80, 20);
        btnPrev.setBounds(10, 25, 50, 25);
        btnNext.setBounds(260, 25, 50, 25);
        stblCalendar.setBounds(10, 50, 300, 250);

        //Make frame visible  
        frmMain.setResizable(false);
        frmMain.setVisible(true);

        //Get real month/year  
        GregorianCalendar cal = new GregorianCalendar(); //Create calendar  
        realDay = cal.get(GregorianCalendar.DAY_OF_MONTH); //Get day  
        realMonth = cal.get(GregorianCalendar.MONTH); //Get month  
        realYear = cal.get(GregorianCalendar.YEAR); //Get year  
        currentMonth = realMonth; //Match month and year  
        currentYear = realYear;

        //Add headers  
        String[] headers = {"Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"}; //All headers  
        for (int i = 0; i < 7; i++) {
            mtblCalendar.addColumn(headers[i]);
        }

        tblCalendar.getParent().setBackground(tblCalendar.getBackground()); //Set background  

        //No resize/reorder  
        tblCalendar.getTableHeader().setResizingAllowed(false);
        tblCalendar.getTableHeader().setReorderingAllowed(false);

        //Single cell selection  
        tblCalendar.setColumnSelectionAllowed(true);
        tblCalendar.setRowSelectionAllowed(true);
        tblCalendar.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        //Set row/column count  
        tblCalendar.setRowHeight(38);
        mtblCalendar.setColumnCount(7);
        mtblCalendar.setRowCount(6);

        //Populate table  
        for (int i = realYear - 100; i <= realYear + 100; i++) {
            cmbYear.addItem(String.valueOf(i));
        }

        //Refresh calendar  
        refreshCalendar(realMonth, realYear); //Refresh calendar  
    }

    public static void refreshCalendar(int month, int year) {
        //Variables  
        String[] months = {
            "January", "February", "March", "April", "May", "June", "July",
            "August", "September", "October", "November", "December"};
        int nod, som; //Number Of Days, Start Of Month  

        //Allow/disallow buttons  
        btnPrev.setEnabled(true);
        btnNext.setEnabled(true);
        if (month == 0 && year <= realYear - 10) {
            btnPrev.setEnabled(false);
        } //Too early  
        if (month == 11 && year >= realYear + 100) {
            btnNext.setEnabled(false);
        } //Too late  
        lblMonth.setText(months[month]); //Refresh the month label (at the top)  
        lblMonth.setBounds(160 - lblMonth.getPreferredSize().width / 2, 25, 180, 25); //Re-align label with calendar  
        cmbYear.setSelectedItem(String.valueOf(year)); //Select the correct year in the combo box  

        //Clear table  
        for (int i = 0; i < 6; i++) {
            for (int j = 0; j < 7; j++) {
                mtblCalendar.setValueAt(null, i, j);
            }
        }

        //Get first day of month and number of days  
        GregorianCalendar cal = new GregorianCalendar(year, month, 1);
        nod = cal.getActualMaximum(GregorianCalendar.DAY_OF_MONTH);
        som = cal.get(GregorianCalendar.DAY_OF_WEEK);

        //Draw calendar  
        for (int i = 1; i <= nod; i++) {
            int row = new Integer((i + som - 2) / 7);
            int column = (i + som - 2) % 7;
            mtblCalendar.setValueAt(i, row, column);
        }

        //Apply renderers  
        tblCalendar.setDefaultRenderer(tblCalendar.getColumnClass(0), new tblCalendarRenderer());
    }

    static class tblCalendarRenderer extends DefaultTableCellRenderer {

        /**
        *
        */
        private static final long serialVersionUID = 1L;

        public Component getTableCellRendererComponent(JTable table, Object
            value, boolean selected, boolean focused, int row, int column) {
            super.getTableCellRendererComponent(
                table, value, selected, focused, row, column);
            if (column == 0 || column == 6) { //Week-end  
                setBackground(new Color(255, 220, 220));
            } else { //Week  
                setBackground(new Color(255, 255, 255));
            }
            if (value != null) {
                if (Integer.parseInt(value.toString()) == realDay
                    && currentMonth == realMonth && currentYear == realYear) { //Today  
                    setBackground(new Color(220, 220, 255));
                }
            }
            setBorder(null);
            setForeground(Color.black);
            return this;
        }
    }

    static class btnPrev_Action implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            if (currentMonth == 0) { //Back one year  
                currentMonth = 11;
                currentYear -= 1;
            } else { //Back one month  
                currentMonth -= 1;
            }
            refreshCalendar(currentMonth, currentYear);
        }
    }

    static class btnNext_Action implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            if (currentMonth == 11) { //Foward one year  
                currentMonth = 0;
                currentYear += 1;
            } else { //Foward one month  
                currentMonth += 1;
            }
            refreshCalendar(currentMonth, currentYear);
        }
    }

    static class cmbYear_Action implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            if (cmbYear.getSelectedItem() != null) {
                String b = cmbYear.getSelectedItem().toString();
                currentYear = Integer.parseInt(b);
                refreshCalendar(currentMonth, currentYear);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:21:29.123

如果您使用 4x3 [GridLayout](http://docs.oracle.com/javase/7/docs/api/java/awt/GridLayout.html)（每季度一行），每个单元格包含一个嵌套的 6x7 GridLayout（保存天/月标题的值，我认为它会工作得更好。您甚至可以嵌套这些都在其他一些容器内来保存你的按钮等等。

正如 MadProgrammer 指出的那样，如果您使用 null 布局并更改字体、框架大小等，那么事情将会变得很不稳定，很快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:09:44.327

您的要求非常基本。鉴于您已经在使用 a `JTable`，您只需要为`TableModel`视图提供一个新的......

现在，这非常简单，但这个概念应该让你开始......

```
public class CalendarTableModel extends AbstractTableModel {

    private Calendar cal;

    public CalendarTableModel() {
        this(new Date());
    }

    public CalendarTableModel(Date date) {
        setMonthByDate(date);
    }

    public void setMonthByDate(Date date) {

        cal = Calendar.getInstance();
        cal.setTime(date);
        cal.set(Calendar.DAY_OF_MONTH, 1);

        fireTableStructureChanged();

    }

    @Override
    public String getColumnName(int column) {

        String name = null;

        if (cal != null) {

            Calendar tmp = Calendar.getInstance();
            tmp.setTime(cal.getTime());
            tmp.set(Calendar.DAY_OF_MONTH, column + 1);

            int date = tmp.get(Calendar.DAY_OF_MONTH);
            int dow = tmp.get(Calendar.DAY_OF_WEEK);

            switch (dow) {

                case Calendar.MONDAY:
                    name = "Mon";
                    break;
                case Calendar.TUESDAY:
                    name = "Tue";
                    break;
                case Calendar.WEDNESDAY:
                    name = "Wed";
                    break;
                case Calendar.THURSDAY:
                    name = "Thr";
                    break;
                case Calendar.FRIDAY:
                    name = "Fri";
                    break;
                case Calendar.SATURDAY:
                    name = "Sat";
                    break;
                case Calendar.SUNDAY:
                    name = "Sun";
                    break;

            }

            name += " " + date;

        }

        return name;

    }

    @Override
    public int getRowCount() {
        return 10;
    }

    @Override
    public int getColumnCount() {

        return cal == null ? 0 : cal.getMaximum(Calendar.DAY_OF_MONTH);

    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {

        return null;

    }

} 
```

# r - 在 R 中找到截断伽马分布的 95 个可信区间

> ID：14471534
> 
> 赞同：2
> 
> 时间：2013-01-23T02:35:25.357
> 
> 标签：r, statistics, quantile

我有一个支持 [4,6] 的 Gamma(shape=50, scale=0.1)。我能够通过将完整的伽马分布除以 F(6) - F(4) 来找到它的分布。

```
p1 = seq(1,10,length=100)
d1 = dgamma(p1, shape=50, scale=0.1)

p2 = seq(4,6,length=100)
d2.full = dgamma(p2, shape=50, scale=0.1)
d2 = d2.full / (pgamma(6, shape=50, scale=0.1) - pgamma(4, shape=50, scale=0.1)) 
```

我如何找到这个截断分布的中心 95 可信区间（即 d2）？

编辑：请注意，我的截断伽玛与标准伽玛没有相同的 pdf。原因是截断的 gamma 必须重新归一化，以便它在支持上积分为 1 [4,6]。这就是为什么 d2 = d2.full / (F(6) - F(4))

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T03:15:04.250

如果我理解正确，您需要的是`(lower, upper)`截断伽马的概率为 95% 的间隔，间隔的概率为`(4, lower)`2.5%，间隔的概率为`(upper, 6)`2.5%。如果是这样，通过简单的代数：

```
R > F = function(x){ pgamma(x, shape = 50, scale = 0.1) }
R > F(4)
[1] 0.07034
R > F(6)
[1] 0.9156
R > gap = 0.025*(F(6)-F(4))
R > gap
[1] 0.02113
R > (lower = qgamma(F(4) + gap, shape = 50, scale = 0.1))
[1] 4.087
R > (upper = qgamma(F(6) - gap, shape = 50, scale = 0.1))
[1] 5.9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T03:19:52.560

我真的很喜欢@liuminzhao 的答案，但我已经编写了一个更脏但可能是互补的答案：

```
plot(p2, d2)  # you have most of the probability mass in the interval 4-6
 rd2.full = rgamma(100000, shape=50, scale=0.1)
 rd2 = rd2.full[rd2.full >= 4 & rd2.full <6]  # rejection sampling
 quantile(rd2, probs=c(0.025, 0.975))
#     2.5%    97.5% 
# 4.087765 5.897290 
```

# asp.net - 如何用VB获取PDF子书签

> ID：14471536
> 
> 赞同：0
> 
> 时间：2013-01-23T02:35:42.137
> 
> 标签：asp.net, vb.net, pdf

我使用了线程“如何使用 c# 获取 pdf 文件书签”中的示例代码。

它可以工作，但它只能获得第一级书签。我怎样才能得到孩子书签？

谢谢

```
 'Read PDF bookmark
    Dim bookmarks As IList(Of Dictionary(Of String, Object)) = SimpleBookmark.GetBookmark(reader)
    Dim i As Integer = 0

If Not IsNothing(bookmarks) Then

For Each bookmark In bookmarks

    pdf_bookmark += bookmarks(i).Values(0).ToString()

    If i < bookmarks.Count - 1 Then
        pdf_bookmark += ", "
    End If

    i = i + 1
Next 
```

万一

# c++ - 在对 tr1::bind() 的新调用中嵌套来自 tr1::bind() 的 tr1::bind<> 对象

> ID：14471541
> 
> 赞同：2
> 
> 时间：2013-01-23T02:36:29.587
> 
> 标签：c++, templates, boost-bind, tr1

我有点困惑为什么这个绑定调用不起作用。我已将问题缩小到尝试将绑定对象嵌套在新的绑定调用中。

```
#include <iostream>
#include <algorithm>
#include <tr1/functional>
using namespace std;
using tr1::bind;
using namespace std::tr1::placeholders;

double times_2(double a) { 
    return 2*a;
}
void print_num(double a) {
    cout << a << endl;
}

template <typename Oper>
void oper_on_list(Oper op) {

    int list[] = {0,1,2,3,4};

    for_each(list, list+5, bind(print_num, bind(op, _1)));      // This works!
    for_each(list, list+5, bind(print_num, bind(op, bind(op, _1)))); // This doesn't!
}

int main() {
    oper_on_list(bind(times_2, _1));
    return 0;
} 
```

在这里，我`no matching function for call to 'bind'`从我的编译器收到一条消息。（G++ 4.2.1 或 Apple LLVM 3.0）。

（实际上，`no matching function for call to object of type 'std::tr1::_Bind<double (*(std::tr1::_Placeholder<1>))(double)>'`）

这里的目标是在不同的绑定中重用绑定对象。从我能够归结为，问题是使用第二个绑定调用的结果作为已经创建的绑定调用的参数。有没有办法解决这个问题？

我认为这也可能有助于说明情况？：

```
template <typename T>
void print(T t) {
    cout << t << endl;
}

template <typename Oper>
void oper_on_list(Oper op) {

    int list[] = {0,1,2,3,4};

    for_each(list, list+5, bind(print, bind(op, _1)));        // This doesn't work
    for_each(list, list+5, bind(print<double>, bind(op, _1))); // This does
    for_each(list, list+5, bind<void(*)(double)>(print, bind(op, _1))); // So does this!
} 
```

在这里，我认为，问题在于它在推断基于`bind(op, _1)`. 虽然我不知道为什么它不能..

但无论哪种方式，指定它似乎都可以解决问题。不幸的是，我看不到如何在原始示例中指定模板，因为我不知道`Oper`会是什么！

任何帮助将非常感激！:D 谢谢！

==============================

更新！事实证明，这可以在 C++11 上正确编译。现在的问题是：为什么没有 C++11 就不能编译？据我所知，没有任何特定于 C++11 的功能。有没有办法在没有 C++11 的情况下完成同样的任务？也许是另一种设置代码的方法？

==============================

更新2！好吧，这适用于 boost::bind，所以我想这只是 tr1::bind 的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:48:32.453

好吧，无论如何，这适用于 boost::bind。

所以显然这只是 tr1::bind pre-C++11 中的一个错误。

# c# - Monodevelop Android 下载文件

> ID：14471544
> 
> 赞同：0
> 
> 时间：2013-01-23T02:37:08.460
> 
> 标签：c#, android, save, download, monodevelop

我正在使用适用于 Android 的 MonoDevelop，希望获得一些帮助，以便轻松地从 URL 下载文件，然后将其保存到文件中。我已经看到了这个动作的许多 Java 版本，但如果可能的话，我会使用一些 C# 代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:42:26.617

请参阅[文档到`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx). [`DownloadFile`](http://msdn.microsoft.com/en-US/library/system.net.webclient.downloadfile%28v=vs.80%29.aspx).

来自文档的示例：

```
string remoteUri = "http://www.contoso.com/library/homepage/images/";
string fileName = "ms-banner.gif", myStringWebResource = null;
// Create a new WebClient instance.
WebClient myWebClient = new WebClient();
// Concatenate the domain with the Web resource filename.
myStringWebResource = remoteUri + fileName;
Console.WriteLine("Downloading File \"{0}\" from \"{1}\" .......\n\n", fileName, myStringWebResource);
// Download the Web resource and save it into the current filesystem folder.
myWebClient.DownloadFile(myStringWebResource,fileName);        
Console.WriteLine("Successfully Downloaded File \"{0}\" from \"{1}\"", fileName, myStringWebResource);
Console.WriteLine("\nDownloaded file saved in the following file system folder:\n\t" + Application.StartupPath); 
```

# ruby-on-rails - 管理员应该如何与状态机交互？

> ID：14471545
> 
> 赞同：1
> 
> 时间：2013-01-23T02:37:17.900
> 
> 标签：ruby-on-rails, activeadmin, state-machine

我有一个使用状态机模式的 ruby​​ 应用程序。用户提交申请，并且在获得批准和审查后，这些申请将对其他用户可见。

该应用程序还使用 ActiveAdmin 允许管理员将应用程序从“草稿”状态移动到“已批准”状态，并最终进入“成功发布”状态或“退休”状态。

我的问题是我无法弄清楚如何赋予管理员在所有州执行操作的特殊权限。例如，我希望管理员能够在任何状态下编辑应用程序，即使用户一旦获得批准就无法对其进行编辑。我有一个默认为 false 的“可编辑”方法，但是当我想允许用户编辑应用程序时，我偶尔会设置为 true。

```
def editable?
  true
end 
```

我想也许可以创建一个名为“admin_editable”的类似方法？并在所有状态下将其设置为 true。但这似乎是一个黑客。

有最佳实践吗？我应该一起废弃状态机吗？或者，我如何允许管理员编辑项目而不管其状态如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T02:16:43.537

像[cancan](https://github.com/ryanb/cancan)这样的宝石会在这里为您提供帮助吗？

# ios - 从 NSMutableArray 中删除 for 循环中的对象

> ID：14471549
> 
> 赞同：1
> 
> 时间：2013-01-23T02:38:05.840
> 
> 标签：ios, objective-c, xcode, uitableview, nsmutablearray

我正在处理`UITableView`数组中作为 的数据源的每个对象，如果它们满足某个语句`UITableView`，我将删除它们。`if`我的问题是它只会从数组中删除所有其他对象。

代码：

```
UIImage *isCkDone = [UIImage imageNamed:@"UITableViewCellCheckmarkDone"];
int c = (tasks.count);
for (int i=0;i<c;++i) {
    NSIndexPath *tmpPath = [NSIndexPath indexPathForItem:i inSection:0];
    UITableViewCell * cell = [taskManager cellForRowAtIndexPath:tmpPath];
    if (cell.imageView.image == isCkDone) {
        [tasks removeObjectAtIndex:i];
        [taskManager deleteRowsAtIndexPaths:@[tmpPath]
                withRowAnimation:UITableViewRowAnimationLeft];
    }
} 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T02:43:22.797

您必须向后运行循环，即

```
for (int i=c-1;i>=0;--i) 
```

如果您以相反的方式运行它，则删除索引位置`i`的对象会使数组中位于`i`一个位置后面的对象向前移动。最后，您甚至会超出数组的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:49:50.513

如果您想保持循环向前运行，您可以：

当`i`您的条件得到满足并且您`removeObjectAtIndex`

```
 if (cell.imageView.image == isCkDone) {
        ...
        --i ;
        ...
    } 
```

或`i` **仅**在您的条件不满足时才增加：

```
for ( int i=0 ; i<c ; ) {
    ...
    if (cell.imageView.image == isCkDone) {
        ...
    } else {
    ++i ;
    } 
```

# linux - “ulimit -s 无限”有什么作用？

> ID：14471564
> 
> 赞同：56
> 
> 时间：2013-01-23T02:39:57.260
> 
> 标签：linux, stack, ulimit

关于堆栈分配有很多相关的问题是可以理解的

[堆栈和堆是什么以及在哪里？](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)

[为什么堆栈大小有限制？](https://stackoverflow.com/questions/6648059/why-is-there-a-limit-on-the-stack-size)

[堆栈和堆内存的大小](https://stackoverflow.com/questions/12687274/size-of-stack-and-heap-memory)

但是在各种 *nix 机器上，我可以发出 bash 命令

```
ulimit -s unlimited 
```

或 csh 命令

```
set stacksize unlimited 
```

这如何改变程序的执行方式？对程序或系统性能是否有任何影响（例如，为什么这不是默认设置）？

如果有更多的系统细节是相关的，我主要关心的是在 x86_64 硬件上运行的 Linux 上使用 GCC 编译的程序。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-23T03:05:45.257

当您调用函数时，会在堆栈上分配一个新的“命名空间”。这就是函数可以具有局部变量的方式。随着函数调用函数，函数又调用函数，我们不断在堆栈上分配越来越多的空间来维护这种深层的命名空间层次结构。

为了限制使用大量堆栈空间的程序，通常通过`ulimit -s`. 如果我们通过 取消该限制`ulimit -s unlimited`，我们的程序将能够继续为不断增长的堆栈占用 RAM，直到最终系统完全耗尽内存。

```
int eat_stack_space(void) { return eat_stack_space(); }
// If we compile this with no optimization and run it, our computer could crash. 
```

通常，使用大量堆栈空间是偶然的，或者是非常深的递归的症状，可能不应该过多地依赖堆栈。因此堆栈限制。

对性能的影响很小，但确实存在。使用该`time`命令，我发现消除堆栈限制将性能提高了几分之一秒（至少在 64 位 Ubuntu 上）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T03:02:10.463

堆栈大小确实可以是无限的**。**`_STK_LIM`是*默认值*，`_STK_LIM_MAX`是每个架构不同的东西，从以下可以看出`include/asm-generic/resource.h`：

```
/*
 * RLIMIT_STACK default maximum - some architectures override it:
 */
#ifndef _STK_LIM_MAX
# define _STK_LIM_MAX           RLIM_INFINITY
#endif 
```

从这个例子可以看出，泛型值是无限的，`RLIM_INFINITY`在泛型情况下，这里定义为：

```
/*
 * SuS says limits have to be unsigned.
 * Which makes a ton more sense anyway.
 *
 * Some architectures override this (for compatibility reasons):
 */
#ifndef RLIM_INFINITY
# define RLIM_INFINITY          (~0UL)
#endif 
```

所以我想真正的答案是 - 堆栈大小可以受到某些架构的限制，然后无限的堆栈跟踪将意味着任何`_STK_LIM_MAX`定义，如果它是无限的 - 它是无限的。有关将其设置为无限的含义以及它可能产生的影响的详细信息，请参阅另一个答案，它比我的要好得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-14T15:32:58.343

`ulimit -s unlimited`让堆栈无限增长。

This may prevent your program from crashing if you write programs by recursion, especially if your programs are not tail recursive (compilers can "optimize" those), and the depth of recursion is large.

# c# - 保持隐藏控制台处于活动状态

> ID：14471565
> 
> 赞同：0
> 
> 时间：2013-01-23T02:39:57.243
> 
> 标签：c#, console, lync

我开发了一个控制台应用程序来等待事件。代码的主要部分如下所示。

```
static void Main(string[] args)
{
    // get lync client
    var getclient = LyncClient.GetClient();  
    // register for conversation event
    getclient.ConversationManager.ConversationAdded += Conversation_ConversationAdded;
} 
```

我希望在后台运行它，因此我已将其输出更改为 Windows 应用程序。但似乎应用程序一旦启动就结束了。有没有办法让应用程序保持活力？

显然我不能使用`Console.Readline()`，因为我想隐藏它。现在我正在使用`System.Threading.Thread.Sleep(int.MaxValue)`，但我认为这不是一个好主意，因为它有一个限制。

不确定问题是否出在我的代码中，或者我只是需要一些东西来保持它的活力。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T01:55:15.027

将其作为具有隐藏主窗口的 WPF 应用程序运行，该窗口具有属性 ShowInTaskbar = false。这样，它将与 Lync 客户端交互，而不会显示在用户的桌面上。

# matlab - 在调用自身的函数/脚本中替代“设置值”

> ID：14471566
> 
> 赞同：2
> 
> 时间：2013-01-23T02:40:00.877
> 
> 标签：matlab, loops, setvalue, handles

我有一个脚本，当 if 语句的条件为假时，它会调用自己。用户定义的最大迭代次数可达 20 次。

问题是算法本身内部有一个变量会发生变化，如果 if 语句的条件为假，则整个过程将重新开始。问题是当它再次开始时要进行的新计算应该取决于最后计算的值而不是初始值。在这一点上，我正在通过使用 set-get 函数来实现我想要的。设置值标准的问题在于它会在每次运行时更新 GUI，这非常耗时。任何想法都非常感谢。下面是有效的代码，但很长；请注意，这是对实际脚本的非常简短的摘要，但它可以达到目的。

```
FunctionOne
       InitialPrice=str2double(get(handles.StockP,'String'));
       TargetPrice=105;
       T=str2double(get(handles.Time,'String')); %This value is maximum 20 
       StockPrice= InitialPrice*(1+randn) %just for simplicity
       If Time > 0 
            If StockPrice>TargetPrice 
              update the GUI %end
            else 
               set(handles.StockP,(StockPrice))
               set(handles.Time,'String',(T-1))
               FunctionOne  
            end
        end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:06:12.763

您可以让 FunctionOne 接受如下参数吗？从 FunctionOne 内部调用时，您传递了两个参数，但是从外部调用该函数时，您像以前一样在不带参数的情况下调用它。

```
FunctionOne (StockP,Time)

   if nargin == 2
       InitialPrice = StockP;
       T = Time;
   else 
       InitialPrice=str2double(get(handles.StockP,'String'));
       T=str2double(get(handles.Time,'String')); %This value is maximum 20 
   end

   TargetPrice=105;
   StockPrice= InitialPrice*(1+randn) %just for simplicity

   If T > 0 
        If StockPrice>TargetPrice 
          update the GUI %end
        else 
           FunctionOne(StockPrice,T-1); 
        end
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:21:31.753

也许您可以存储`StockPrice`在一个全局数组中，删除递归调用，并在所有计算步骤完成后才更新 GUI。就像是：

```
FunctionOne(InitialPrice, TargetPrice, Time)
    StockPrice(1) = InitialPrice;
    T = ...;
    i = 1;

    while( T>0 )
        i = i+1;
        T = T-1;
        StockPrice(i) = StockPrice(i-1)*(1+randn);
    end

    Update the GUI %not sure if you want to only use certain StockPrice values or all of them
end 
```

# sql - 搜索范围包含多个标签

> ID：14471568
> 
> 赞同：0
> 
> 时间：2013-01-23T02:40:10.737
> 
> 标签：sql, ruby-on-rails, rails-activerecord

出于这个问题的目的，假设我正在构建 Stack Overflow。

`Posts`我通过and的关联表建立了多对多关系`Tags`，我想搜索包含多个标签的帖子。

我可以搜索包含单个标签的帖子，如下所示：

```
scope :has_tag, lambda { |tag| includes(:tags).where("lower(tags.name) = ?", tag.downcase) }

Post.has_tag("Python") 
```

为了搜索多个标签，我尝试使用循环构建查询：

```
def self.has_tags(tags)
  query = includes(:tags)
  tags.each do |tag|
    query = query.where("lower(tags.name) = ?", tag)
  end
  return query
end 
```

这会导致 query`... WHERE (lower(tags.name) = 'tag1') AND (lower(tags.name) = 'tag2')`不匹配任何内容。

我也尝试过使用`.where('tags.name IN (?)', tags)`，但我认为它匹配包含标签之一的任何帖子，而不是包含所有标签的帖子。

现在我在想也许我应该使用标签的 ID，但这听起来可能会导致多个查询。这是低效的吗？

```
... WHERE tag_id IN (SELECT id FROM tag WHERE name IN ('tag1','tag2')) 
```

* * *

搜索多个标签的最佳方法是什么？
（我更愿意理解语法并手动完成，而不是使用 gem，因为我是 Rails 新手。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:11:16.427

我最终使用了以下内容：

```
scope :has_tags, lambda { |tags| includes(:tags)
  .where("lower(tags.name) IN (?)", tags.collect { |tag| tag.downcase } )
  .group('"posts"."id"')
  .having('COUNT(DISTINCT "tags"."id") = ?', tags.count) } 
```

# c# - 为收藏纸牌游戏加载超过一百万张图像的有效方法是什么？

> ID：14471570
> 
> 赞同：0
> 
> 时间：2013-01-23T02:40:19.867
> 
> 标签：c#, algorithm, architecture, monogame

我正在将 C# 与 MonoGame 一起使用，我想知道为收藏纸牌游戏加载超过一百万张卡片图像的有效方法是什么。在未来的更新中会不断添加更多卡片，等等。我确信有一些天才的方法可以解决这个问题，既优雅又高效。我希望对其他人如何解决这个问题有所了解。

这些卡片都将位于用户下载的客户端应用程序上。服务器将确保玩家没有作弊。我试图弄清楚在客户端管理大量关于卡片加载和卸载的卡片图像的有效方法。

我了解卡片应仅在必要时加载和显示。然而，在游戏中的某些地方，用户可以查看他们的整个收藏。我正在考虑使用滚动条或类似的东西。他们可以根据卡片的某些属性过滤卡片。在这种情况下，我将如何实时管理卡片的加载/卸载以使其无缝和高效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:51:28.047

您不会一次加载所有图像。无论这是否是在线游戏，一次加载所有这些都将是非常低效的。解决此问题的一种方法是将它们全部放入某种数据库中，并且仅在需要时才加载所需的牌，例如在发新手时等。如果您担心查询速度会减慢游戏速度，请查看[此](http://www.simple-talk.com/sql/performance/writing-efficient-sql-set-based-speed-phreakery/)有关如何正确最快查询的详细文章/竞赛，以及[这些](http://hungred.com/useful-information/ways-optimize-sql-queries/)提示。

**至于您的编辑：**

您仍然可以在服务器上使用 SQL 数据库并运行查询以确保它们没有作弊。您无需查看他们所有的牌，只需查看他们当前拥有或正在处理的牌即可。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:46:29.343

假设这是一个在线游戏。我想你会想要使用数据库（MySQL 等）来存储卡信息。卡片图像将存储在 FTP 上以便快速访问，它们的路径将存储在数据库中。然后使用查询来访问当前屏幕所需的必要卡片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T02:51:40.123

您不应该一次加载一百万张图像。仅按需加载...例如，当发牌时，加载图像。

我相信您可以将图像保存在数据库中。这是最有效的存储和检索机制。或者您可以存储为二进制数据。如果不将图像数据保存在 RAM 或 SSHD 中，您将不会变得更快。

如果您关心的是性能，我认为您的优先级错误。;)

# c# - DllImport 是如何真正工作的？

> ID：14471571
> 
> 赞同：12
> 
> 时间：2013-01-23T02:40:23.373
> 
> 标签：c#, dll, pinvoke, dllimport

我想了解`DllImport`真正的工作原理。我需要一个简单的英文解释——意思是简单的解释。

它是否与 DLL 中的导出方法静态链接，例如“包含文件”指令/静态库？

还是当它到达 C# 程序中的执行点时，它是否从 DLL 中动态调用该方法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-23T02:56:37.210

它使用两个核心的 winapi 函数。首先是 LoadLibrary()，将 DLL 加载到进程中的 winapi 函数。它使用您为 DLL 指定的名称。第二个是GetProcAddress()，winapi 函数，它返回DLL 中函数的地址。它使用您指定的函数的名称。然后一些管道运行，使用您指定的参数为函数调用构建堆栈框架，并在它找到的地址调用函数。

所以是的，这是非常动态的。直到您的代码实际落在调用 pinvoked 函数的语句上，才会发生这种情况。技术术语是“后期绑定”，而不是 Windows 加载程序用于本机代码的更常见的早期绑定。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T02:43:33.217

它动态调用它。DLLimport 不会在您编译的程序中嵌入任何内容。这就是为什么当您使用 DLLImport 时，确保最终用户在正确的位置拥有正确的 DLL 非常重要，否则您的程序将无法运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T02:43:14.607

后者 - 您可以通过指定一个不存在的 dll 名称来说服自己。当然，您将能够很好地编译和运行，但不能调用该函数。

# list - 语言实现如何表示一个空列表？

> ID：14471572
> 
> 赞同：1
> 
> 时间：2013-01-23T02:40:25.647
> 
> 标签：list, data-structures

单链表中的每个节点都是一些数据和指向下一项的指针（如果它是列表的尾部，则为空指针）。

我所知道的具有本机列表类型的每种语言都支持“空”列表，通常带有一些文字语法。

这将如何在机器的内存中表示？

我可以想到几个方法：

*   在具有运行时类型信息（即类型/值对）的语言中，它可以是具有空值项的“列表”类型
*   列表节点中数据项的空指针（但这仅适用于“指针”类型，而不是直接嵌入节点数据结构中的值）
*   一个特殊的符号值

这在语言之间是否存在很大差异，还是有标准的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:44:02.563

这取决于实施。

我想一个非常标准的单链表实现看起来像这样：

```
object List
  Node head

object Node
  Type data
  Node next 
```

对于一个空列表，`List.head`将只是一个空指针。

或者，一个空列表可以是一个空指针类型`List`（尽管在某些语言中，这两者之间的区别并不重要）。

您也可以完全摆脱`List`并将列表定义为 a `Node`，然后一个空列表可以是：

*   空指针类型`Node`（同样不适用于某些语言）
*   A`Node`两者都`data`为`next`空（如果可能的话，可能无法与具有一个空元素的列表区分开来）

某些语言可能没有空指针的概念，但您应该能够将其替换为特殊对象。

# javascript - 从数组中提取单个值以存储在变量javascript中

> ID：14471575
> 
> 赞同：0
> 
> 时间：2013-01-23T02:40:35.337
> 
> 标签：javascript, arrays

所以我已经看到了几种方法，但它们似乎不适用于我想要做的事情......

我正在将此推送用于另一段代码，但我不明白为什么它也不适用于有问题的代码。

```
var npc = new Array();

npc.push([  
[5,25,10],
]);

npc.push([  
[18,28,38],
]);

npc.push([  
[1,2,3],
]); 
```

我想设置它，这样我就可以调用类似...

```
LoadNpc(2); 
```

我希望它检查第二个 npc 数组并将 3 个数字设置为变量..

```
hp = 18;
atk = 28;
def = 38;
id = 2;  //current loaded npc's id 
```

我确定我一直在考虑如何做到这一点，但我无法让任何东西正常工作。如果有人对此有一个简单的javascript，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T02:43:58.220

您应该使用对象数组而不是数组数组。

```
npc[2] = {hp :18, atk: 28, def :38} 
```

你“拉”这样的值：

```
alert(npc[2].atk);
alert(npc[2].hp);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:50:13.653

这看起来很简单：

```
var npc = [];
npc.push([5,25,10]);
npc.push([18,28,38]);
npc.push([1,2,3]);

var hp, atk, def, id;

function loadNpc(index){
    id = index;
    hp = npc[index-1][0];
    atk = npc[index-1][1];
    def = npc[index-1][2];
} 
```

# css - 大背景图像和屏幕尺寸

> ID：14471576
> 
> 赞同：5
> 
> 时间：2013-01-23T02:40:36.760
> 
> 标签：css, background

我正在创建一个网站，该网站将使用我无法平铺的图像。我需要这张图片来覆盖整个背景屏幕。但是，我希望它适用于大型显示​​器和小型显示器。

我应该制作一个大的背景图像并使用它来缩小它，`background-size`还是应该创建不同尺寸的同一图像的多个版本，然后使用 CSS3 媒体查询来选择应该显示哪个图像？如果是这样，我应该使用屏幕尺寸的哪些断点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T04:09:00.007

您可以使用[`background-size`](https://developer.mozilla.org/en-US/docs/CSS/background-size)设置为`contain`或的属性`cover`。这对于缩放伪影不那么明显的摄影背景（与图案相反）特别适用。

比较两者：[包含](http://jsfiddle.net/ovfiddle/W3g7m/1/)与[覆盖](http://jsfiddle.net/ovfiddle/W3g7m/)

请记住为 IE8 及以下版本设置后备规则（只需拉伸背景就足够了）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T03:51:24.527

我最终根据来自 StatCounter 的信息选择了五个断点：

![统计计数器统计](../Images/52f2f28a540865160f0fb2e44fdbcc26.png)

直到 2012 年 12 月。

根据这些数字、我的测试以及与他人的交谈，我选择了以下选项：

```
/*Monitors Large than 1920px, image has "soft" edges to blend into background */
@media (min-width:1921px){
    html, body{
background: url(/images/backgrounds/1920-bg-large.jpg) no-repeat center top fixed #190303;
background-size:100% auto;
    }
}

/* Mointores ranging from 1367px - 1920px */
@media (min-width:1367px) and (max-width:1920px){
html, body{
background: url(/images/backgrounds/1920-bg.jpg) no-repeat center top fixed #190303;
background-size:100% auto;
    }
}

/* Mointores ranging from 769px - 1366px */
@media (min-width:769px) and (max-width:1366px){
html, body{
background: url(/images/backgrounds/1366-bg.jpg)  no-repeat center top fixed #190303;
background-size:100% auto;
    }
}
/* Tablets like the iPad 2 and iPad Mini */
@media (max-width:768px){
html, body{
background: url(/images/backgrounds/768-bg.jpg)  no-repeat center top fixed #190303;
background-size:100% auto;
    }
}

/* At a certain point the Background images become irrelevant as they are hidden behind other elements. Changed to a solid BG */
@media handheld, only screen and (max-width: 640px) {
html, body{
background:#190303;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T03:20:21.357

```
body
{
background-image:url('smiley.gif');
background-repeat:no-repeat;
background-size:100% 100%;
} 
```

这应该在每个屏幕的每个浏览器中拉伸它。

我只会在所有这些上使用大的。

# ruby-on-rails - ActionController::Dispatcher (NameError)

> ID：14471577
> 
> 赞同：0
> 
> 时间：2013-01-23T02:40:44.930
> 
> 标签：ruby-on-rails, cucumber, rack

我正在与 Rspec 书一起工作。在第 19 章中，他们为 Rails 项目建立了一个测试环境

```
group :development, :test do
  gem "rspec-rails", "2.0.0"
  gem "cucumber-rails", "0.3.2"
  gem "webrat", "0.7.2"
end 
```

当我尝试运行 cucumber 时出现此错误。

```
bundle exec rake cucumber
/Users/kk/.rbenv/versions/1.9.3-p327/bin/ruby -S bundle exec cucumber  --profile default
Using the default profile...
Rack::File headers parameter replaces cache_control after Rack 1.5.
uninitialized constant ActionController::Dispatcher (NameError) 
```

这部分错误信息...

```
 Rack::File headers parameter replaces cache_control after Rack 1.5. 
```

... 很常见（根据谷歌搜索）。但是，我可以找到与我的开发环境相关的任何信息。谁能解释

这是我的宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :development, :test do
  gem "rspec-rails", "2.0.0"
  gem "cucumber-rails", "0.3.2"
  gem "webrat", "0.7.2"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:25:24.810

即使它仍在发出部分错误消息

```
Rack::File headers parameter replaces cache_control after Rack 1.5. 
```

我让黄瓜工作，但我不确定哪一步是造成变化的原因。

我添加了require语句。

```
 gem "cucumber-rails", "1.3.0", :require => false 
```

我还在 gemfile 中添加了 nokogiri。

# javascript - 如何判断html的代码在IE6/7/8中换行了？

> ID：14471578
> 
> 赞同：0
> 
> 时间：2013-01-23T02:41:12.640
> 
> 标签：javascript, html, internet-explorer

我的代码：

```
<div id="box">
<p>
    123
</p>
<p>
    abc
</p>
</div>

<script>
     var html = document.getElementById("box").innerHTML;

     alert(html)  //you can the different HTMLString between IE6/7/8 and IE9/FF 

     for (var i = 0, len = html.length; i < len; i++) {
         var word = html.charAt(i)
         if(i == 0){
           alert(word=="\n")  // IE6/7/8: false .     IE9/FF:true     
         }
         if(i == 11){
           alert(word=="\n")  //Look at here in IE6/7/8, why is false ??????
         }
     }
</script> 
```

当 (i==11) 时，IE6/7/8 中此处的字符正在换行，但为什么显示为 false？

怎么写我可以知道html的代码在IE6/7/8中换了一个新行？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:04:17.067

你可以用有条件的评论来做到这一点，比如

```
<!--[if IE 6]>
<script>
     var html6 = document.getElementById("box").innerHTML;

     alert(html6)  //you can the different HTMLString between IE6/7/8 and IE9/FF 
     }
</script>
<![endif]--> 
```

然后重复 7 和 8。我不是 100% 确定警报会起作用，但你明白了。

# ios - 如何设置 NSNumberFormatter 以使用“万”（日文/中文 10,000 标记）显示数字？

> ID：14471579
> 
> 赞同：11
> 
> 时间：2013-01-23T02:41:24.513
> 
> 标签：ios, currency, nsnumberformatter

`en_US`我的 iOS 应用程序以不同的本地化（ 、、、`en_AU`等）显示不同的货币（美元、日元、澳元、欧元`ja_JP`）。

对于日语地区/语言（两者都在我的设备上设置），如果我有：

```
NSNumberFormatter *fmt = [[NSNumberFormatter alloc] init];
fmt.numberStyle = NSNumberFormatterCurrencyStyle;
fmt.currencyCode = @"JPY";
NSString *labelText = [fmt stringFromNumber:@1000000]; 
```

我的标签文本是`¥1,000,000`. 但是，在日文和中文中，可能会写入大于 10,000 的数字`100万円`，这是我想要的输出。

知道我可以编写什么代码`100万円`作为输出吗？

我想在我的代码检查语言环境/区域时避免逻辑块，但我觉得这就是我遇到的问题（例如，使用方法调用`fmt.multipler = @(1/10000)`将 1,000,000 除以 10,000 以获得正确的值）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-11T09:06:44.887

EDIT: Up to date gist here: [https://gist.github.com/fjolnir/cd72ea39be1476023adf](https://gist.github.com/fjolnir/cd72ea39be1476023adf)

Old thread, but I came across it while looking for a solution so I figured I'd post my implementation.

The formatter itself does not handle placement of 円, but that's easy to do outside of it. (as the example below demonstrates)

The expected output of the below is:

```
2015-03-11 18:00:13.376 LENumberFormatter[82736:3604947] 12億3,460万円
2015-03-11 18:00:13.377 LENumberFormatter[82736:3604947] 25円 
```

-

```
@import Foundation;
@import ObjectiveC.message;

typedef NS_ENUM(NSUInteger, LENumberFormatterAbbreviationStyle) {
    kLEAbbreviateShort, // 2.5m
    kLEAbbreviateNormal // 2m 5k
};

@interface LENumberFormatter : NSNumberFormatter
@property(nonatomic) BOOL abbreviateLargeNumbers;
@property(nonatomic) LENumberFormatterAbbreviationStyle abbreviationStyle;
@end

@implementation LENumberFormatter
- (instancetype)init
{
    if((self = [super init])) {
        self.abbreviationStyle = [self _usingKanjiNumbers]
                               ? kLEAbbreviateNormal
                               : kLEAbbreviateShort;
    }
    return self;
}

- (NSString *)stringForObjectValue:(id const)aObj
{
    if(!_abbreviateLargeNumbers || ![aObj isKindOfClass:[NSNumber class]])
        return [super stringForObjectValue:aObj];

    // Copy ourselves to get format the partial digits using the settings on self
    LENumberFormatter * const partialFormatter = [self copy];
    partialFormatter.currencySymbol = @"";
    if(_abbreviationStyle == kLEAbbreviateNormal)
        partialFormatter.maximumFractionDigits = 0;

    NSString *(^partialFormat)(NSNumber*) = ^(NSNumber *num) {
        NSString *(*superImp)(struct objc_super*,SEL,NSNumber*) = (void*)&objc_msgSendSuper;
        return superImp(&(struct objc_super) { partialFormatter, self.superclass }, _cmd, num);
    };

    double n = [aObj doubleValue];
    BOOL const shortFormat = _abbreviationStyle == kLEAbbreviateShort;

    NSDictionary * const separators         = [self _localizedGroupingSeparators];
    NSArray      * const separatorExponents = [separators.allKeys sortedArrayUsingSelector:@selector(compare:)];

    BOOL const currencySymbolIsSuffix = [self.positiveFormat hasSuffix:@"¤"];
    NSMutableString * const result = currencySymbolIsSuffix || self.numberStyle != NSNumberFormatterCurrencyStyle
                                   ? [NSMutableString new]
                                   : [self.currencySymbol mutableCopy];
    NSUInteger significantDigits = 0;
    NSNumber *lastExp = nil;
    for(NSNumber *exp in separatorExponents.reverseObjectEnumerator) {
        double divisor = pow(10, exp.shortValue);
        if(divisor > n)
            continue;

        if(lastExp)
            significantDigits += lastExp.doubleValue - exp.doubleValue;
        lastExp = exp;

        if(self.usesSignificantDigits && significantDigits >= self.maximumSignificantDigits)
            break;

        double partialNum = shortFormat
                          ? n/divisor
                          : floor(n/divisor);
        NSString * const digits = [self _groupRecursively] && ![exp isEqual:@0]
                                ? [partialFormatter stringFromNumber:@(partialNum)]
                                : partialFormat(@(partialNum));
        [result appendFormat:@"%@%@", digits, separators[exp]];

        n = fmod(n, divisor);

        if(shortFormat)
            break; // Just use a float+first hit

        // If we make it here, partialNum is integral and we can use log10 to find the number of digits
        significantDigits += log10(partialNum) + 1;
        partialFormatter.maximumSignificantDigits -= digits.length;

    }
    if(n > 0
       && !shortFormat
       && (!self.usesSignificantDigits || significantDigits < self.maximumSignificantDigits))
    {
        partialFormatter.maximumFractionDigits = self.maximumFractionDigits;
        [result appendString:partialFormat(@(n))];
    }
    if(self.numberStyle == NSNumberFormatterCurrencyStyle && currencySymbolIsSuffix && self.currencySymbol)
        [result appendString:self.currencySymbol];

    return result.length > 0
         ? [result stringByTrimmingCharactersInSet:NSCharacterSet.whitespaceAndNewlineCharacterSet]
         : [super stringForObjectValue:aObj];
}

- (BOOL)_usingKanjiNumbers
{
    return [self.locale.localeIdentifier rangeOfString:@"^(ja|zh)_"
                                               options:NSRegularExpressionSearch].location != NSNotFound;
}
- (NSDictionary *)_localizedGroupingSeparators
{
    if(self._usingKanjiNumbers)
        return @{ @2: @"百", @3: @"千", @4: @"万", @8: @"億" };
    else {
        NSBundle * const bundle = [NSBundle bundleForClass:self.class];
        return @{ 
            @3: [bundle localizedStringForKey:@"thousandSuffix" value:@"k " table:nil],
            @6: [bundle localizedStringForKey:@"millionSuffix"  value:@"m " table:nil]
        };
    }
}

- (BOOL)_groupRecursively
{
    // Return _usingKanjiNumbers if you want:
    // 12億3千4百56万7千8百90
    // Rather than:
    // 1億2,3456万7千8百90
    return NO;
}

- (instancetype)copyWithZone:(NSZone * const)aZone
{
    LENumberFormatter * const copy = [super copyWithZone:aZone];
    copy.abbreviateLargeNumbers = _abbreviateLargeNumbers;
    copy.abbreviationStyle      = _abbreviationStyle;
    return copy;
}
@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        LENumberFormatter * const f = [LENumberFormatter new];
        f.locale = [NSLocale localeWithLocaleIdentifier:@"ja_JP"];
//        f.locale = [NSLocale localeWithLocaleIdentifier:@"en_US"];
        f.numberStyle = NSNumberFormatterCurrencyStyle;
        f.abbreviateLargeNumbers = YES;
        f.abbreviationStyle = kLEAbbreviateNormal; // Automatic if using system locale
        f.maximumSignificantDigits = 5;
        f.usesSignificantDigits = YES;
//        f.currencyCode   = @"JPY";
//        f.currencySymbol = @"¥";

        if([f.locale.localeIdentifier hasPrefix:@"ja"]) {
            f.positiveFormat = @"#,##0¤";
            if([f.currencyCode isEqualToString:@"JPY"])
                // We allow ourselves this special case because *日本円 just looks dumb
                f.currencySymbol = @"円";
            else
                f.currencySymbol = [f.locale displayNameForKey:NSLocaleCurrencyCode
                                          value:f.currencyCode];
        }

        NSLog(@"%@", [f stringFromNumber:@1234567890]);
        NSLog(@"%@", [f stringFromNumber:@25]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T06:59:24.580

In the end, I subclassed `NSNumberFormatter` and overrode `stringWithNumber:`.

Here is the relevant code I used to re-configure the `NSNumberFormatter` when the currency code is `JPY`.

```
 NSString *localeString = [self.locale localeIdentifier];
  if ([localeString isEqualToString:@"ja_JP"])
  {
    // 1-oku
    if (num >= 100000000)
    {
      self.negativeFormat = @"-#,###0億円";
      self.positiveFormat = @"#,###0億円";
      self.multiplier = @(1.0f/100000000.0f);
    }
    // 1-man
    else if (num >= 10000)
    {
      self.negativeFormat = @"-#,###0万円";
      self.positiveFormat = @"#,###0万円";
      self.multiplier = @(1.0f/10000.0f);
    }
    // Less than 10,000
    else
    {
      self.negativeFormat = @"-#,###0円";
      self.positiveFormat = @"#,###0円";
    }
  }
  // This could be en_AU, en_UK, en_US -- but all use "million yen"
  else if ([localeString hasPrefix:@"en"])
  {
    // We only care about 1M JPY+
    if (num >= 1000000)
    {
      self.negativeFormat = @"-¥#,###0M";
      self.positiveFormat = @"¥#,###0M";
      self.multiplier = @(1.0f/1000000.0f);
    }
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T03:04:32.650

# image - 在 windows phone 上的滚动查看器中实现图像缩放

> ID：14471580
> 
> 赞同：6
> 
> 时间：2013-01-23T02:41:35.370
> 
> 标签：image, scrollview, windows-phone, zooming, pinchzoom

我在滚动查看器中放置了一个图像控件，就像 tnis 一样：

```
 <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" >
        <Image Source="/Test/1.jpg" Width="320">
            <Image.RenderTransform>
                <CompositeTransform ScaleX="{Binding Path=Value, ElementName=slider}"/>
            </Image.RenderTransform>
        </Image>
    </ScrollViewer> 
```

如代码所示，我添加了一个滑块来控制图像的 Compositetransform，但是当我更改滑块的值时，什么也没发生？

而且我还尝试在图像上附加缩放和平移行为（取决于工具包），不幸的是，我可以上下滚动，但无法放大/缩小图像。Scrollviewer 似乎阻止了捏合操作。

众所周知，Scrollviewer 控件在 WPF 中有一个“ZoomMode”属性，但在 Windows Phone 中已弃用。那么如何在滚动查看器中实现 iamge 缩放，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-23T13:23:36.967

xml代码：

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <ScrollViewer x:Name="scrl" Height="300" Width="300" BorderBrush="red"
                      BorderThickness="2" VerticalScrollBarVisibility="Disabled">
            <StackPanel>
                <Image x:Name="img" Source="Assets/Mountain.jpg" Height="100" Width="150"
                       RenderTransformOrigin="0.5,0.5">
                    <Image.RenderTransform>
                        <CompositeTransform x:Name="trans"/>
                    </Image.RenderTransform>
                    <toolkit:GestureService.GestureListener>
                        <toolkit:GestureListener PinchStarted="GestureListener_PinchStarted" PinchDelta="GestureListener_PinchDelta" DragDelta="GestureListener_DragDelta"/>
                    </toolkit:GestureService.GestureListener>
                </Image>
            </StackPanel>
        </ScrollViewer>
    </Grid> 
```

cs代码：

```
 double _initialAngle, _initialScale;
    public MainPage()
    {
        InitializeComponent();
        scrl.ManipulationMode = ManipulationMode.Control;
    }

    private void GestureListener_PinchStarted(object sender, PinchStartedGestureEventArgs e)
    {
        _initialAngle = trans.Rotation;
        _initialScale = trans.ScaleX;
    }

    private void GestureListener_PinchDelta(object sender, PinchGestureEventArgs e)
    {
        trans.Rotation = _initialAngle + e.TotalAngleDelta;
        var curZoom = _initialScale * e.DistanceRatio;
        if (curZoom >= 1 && curZoom <= 3)
        {
            trans.ScaleX = _initialScale * e.DistanceRatio;
            trans.ScaleY = _initialScale * e.DistanceRatio;
        }
    }

    private void GestureListener_DragDelta(object sender, DragDeltaGestureEventArgs e)
    {
        trans.TranslateX += e.HorizontalChange;
        trans.TranslateY += e.VerticalChange;
    } 
```

此代码适用于缩放、旋转和缩放。

# netty - localhost上的ECHO在windows7上写了两次消息

> ID：14471582
> 
> 赞同：2
> 
> 时间：2013-01-23T02:42:15.543
> 
> 标签：netty

我正在从指南中学习网络。当使用带有 echo back 的 echo 示例时，我发现了一些奇怪的东西。代码就像示例一样：

```
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
    //echo back
    System.out.println(buf.readableBytes()); //will print  1
    Channel  ch = e.getChannel();
    ch.write(e.getMessage());
} 
```

我在windows7上使用netty 3.6.2，cmd telnet localhost 8080。第一次我输入像'1'这样的字符，telnet控制台显示'1'，但是当我输入任何像'2'这样的字符时，控制台显示像'22'这样的两个字符。怎么了？

# c++ - 如果将对象创建为引用，为什么即使基类析构函数不是虚拟的，也会调用派生类析构函数

> ID：14471593
> 
> 赞同：2
> 
> 时间：2013-01-23T02:42:50.387
> 
> 标签：c++, visual-c++, reference, virtual

```
#include <iostream>
class Database
{
public:
   Database()
   {
      std::clog << "Database object created " <<std::endl ;
   }
   ~Database()
   {
      std::clog << "Database object destroyed " << std::endl;
   }
   virtual void Open(const std::string & ) = 0 ; 
} ;

class SqlServer : public Database
{
public:
   void Open(const std::string & conn)
   {
       std::clog << "Attempting to open the connection "<< std::endl ;
   }

   ~SqlServer()
   {
        std::clog << "SqlServer:Database object destroyed "<< std::endl ;
   }
} ;
int main()
{
   Database &ref = SqlServer();
   ref.Open("uid=user;pwd=default");
   return 0 ;
} 
```

输出

> 创建的数据库对象
> 
> 尝试打开连接
> 
> SqlServer:Database object destroy // 为什么这个被称为析构函数在数据库中不是虚拟的
> 
> 数据库对象被破坏

注意：如果我用 pref 替换 ref 那么一切正常，即不会调用 sqlserver 析构函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T02:47:35.333

`const`当涉及对临时对象的引用时，这是一种特殊情况。正确调用了临时的析构函数，而不是引用的析构函数，因为毕竟临时的生命周期只是延长了。

* * *

类似于 Andrei Alexandrescu 在他的范围守卫中使用的技巧。不过，他使用了`const`对临时的引用。

> 根据 C++ 标准，使用临时值初始化的引用使该临时值在引用本身的生命周期内有效。
> 
> 临时变量与引用一样长——当它被销毁时，会调用**正确的析构函数。**

从[通用：改变你编写异常安全代码的方式——永远](http://www.drdobbs.com/cpp/generic-change-the-way-you-write-excepti/184403758?pgno=2)

* * *

还解决了[为什么在对基类的 const 引用上调用派生类的析构函数？](https://stackoverflow.com/questions/4985800/why-is-the-derived-classs-destructor-invoked-on-a-const-reference-to-the-base-c)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T02:47:56.070

您正在将临时绑定到引用。通常这是不允许的，但 MSVC 有一个邪恶的扩展允许它。您可以通过声明`const Database &ref = SqlServer();`和注释您的`ref.Open()`行来在其他编译器中重现这一点，因为临时对象可能受 const 引用的约束。

因此，使用 MSVC 中的原始代码或其他编译器中的修改代码，您看到的被记录的析构函数消息来自被销毁的临时代码。引用使临时对象保持活动状态，并且当引用超出范围时，临时对象也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T03:47:29.787

```
Database &ref = SqlServer(); 
```

`ref`绑定到临时引用，您可以使用 VS 扩展绑定到 const 引用，但最好不要使用它，这些扩展是邪恶的。建议使用智能指针。

```
class Database
{
public:
   Database()
   {
      std::clog << "Database object created " <<std::endl ;
   }
   ~Database()
   {
      std::clog << "Database object destroyed " << std::endl;
   }
   virtual void Open(const std::string & ) = 0 ; 
   virtual ~Database() {}
} ;

std::unique_ptr<Database> conn(new SqlServer());
conn->Open("uid=user;pwd=default"); 
```

注意：您的 Database 类用作基类，但尚未定义`virtual destructor`. 如果通过指向基的指针删除派生类型的对象，则会得到未定义的行为。

# ios - 有没有办法在 NSString 中获取 \t 的测量值？

> ID：14471600
> 
> 赞同：2
> 
> 时间：2013-01-23T02:43:44.277
> 
> 标签：ios, objective-c, nsstring

如果这是重复的，请告诉我，我会立即删除它——我已经有一段时间寻找答案了，因为“\t”返回的搜索没有正斜杠。

我需要找到以 . 开头的 NSString 的宽度`\t\t`。使用`sizeWithFont`不会这样做，因为它只是忽略了空间。有没有办法测量标签占用了多少空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:05:07.453

不确定您的代码是什么，但这似乎对我有用。

```
NSString *delMessage = @"\t";
CGSize theSize = [delMessage sizeWithFont:[UIFont fontWithName:@"American Typewriter" size:30]];
NSLog(@"length %f",theSize.width); 
```

> 日志长度为 8.000000

```
NSString *delMessage = @"\t\t";
CGSize theSize = [delMessage sizeWithFont:[UIFont fontWithName:@"American Typewriter" size:30]];
NSLog(@"length %f",theSize.width); 
```

> 日志长度为 16.000000

# fonts - ID3DXFont 绘制的文本在窗口调整大小后被拉伸

> ID：14471603
> 
> 赞同：1
> 
> 时间：2013-01-23T02:44:21.000
> 
> 标签：fonts, size, render, direct3d, drawtext

我使用 ID3DXFont::DrawText 在窗口上绘制文本。但是当窗口调整大小时，文本也会拉伸/收缩。我试图计算窗口大小改变的百分比，并应用于字体大小，但它看起来真的很奇怪。我想知道是否有固定字体大小，即使窗口大小改变了。这是我绘制文本的方式：

```
g_pd3dDevice->Clear( 0, NULL, D3DCLEAR_TARGET, D3DCOLOR_XRGB(0,0,255), 1.0f, 0 );

if( SUCCEEDED( g_pd3dDevice->BeginScene() ) )
{
    D3DXFONT_DESC df;
    ZeroMemory(&df,sizeof(D3DXFONT_DESC));
    df.Height = 25;
    df.Width = 0;
    df.Weight = 100;
    df.MipLevels = D3DX_DEFAULT;
    df.Italic = false;
    df.CharSet = DEFAULT_CHARSET;
    df.Quality = 0;
    df.PitchAndFamily = 0;

    strcpy(df.FaceName,"Candara");
    D3DXCreateFontIndirect(g_pd3dDevice,&df,&g_font);
    RECT g_FontPosition = {0, 0, 300, 300};     
    g_font->DrawText(NULL,"Hello World",-1,&g_FontPosition,
                          DT_CENTER|DT_VCENTER,D3DCOLOR_XRGB(255,255,255));
    // End the scene
    g_pd3dDevice->EndScene();
}

g_pd3dDevice->Present( NULL, NULL, NULL, NULL ); 
```

* * *

我尝试使用 SetViewport 方法，但是没有用。以下代码显示了我如何操作 direct3d。我已经在这个问题上停留了很长一段时间，完全不知道如何解决它。

```
STDMETHODIMP VideoRender::InitializeD3D(VOID)
{
    HRESULT hr = E_FAIL;
    D3DDISPLAYMODE d3ddm;
    D3DCAPS9 d3dcaps;
    DWORD dwCreateFlags = D3DCREATE_FPU_PRESERVE;
    D3DPRESENT_PARAMETERS d3dpp;

    m_lpD3D = Direct3DCreate9(D3D_SDK_VERSION);
    hr = IDirect3D9_GetAdapterDisplayMode(m_lpD3D, D3DADAPTER_DEFAULT, &d3ddm);
    if (m_lpD3D == NULL)
        goto error_occured;

    hr = IDirect3D9_GetAdapterDisplayMode(m_lpD3D, D3DADAPTER_DEFAULT, &d3ddm);
    if (FAILED(hr))
        goto error_occured;

    hr = IDirect3D9_GetDeviceCaps(m_lpD3D, D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, &d3dcaps);
    if (FAILED(hr))
        goto error_occured;

    if ((d3dcaps.DevCaps & D3DDEVCAPS_HWTRANSFORMANDLIGHT) == D3DDEVCAPS_HWTRANSFORMANDLIGHT)
        dwCreateFlags |= D3DCREATE_HARDWARE_VERTEXPROCESSING;
    else
        dwCreateFlags |= D3DCREATE_SOFTWARE_VERTEXPROCESSING;

    if ( (d3dcaps.StretchRectFilterCaps & D3DPTFILTERCAPS_MINFLINEAR) == D3DPTFILTERCAPS_MINFLINEAR 
        && (d3dcaps.StretchRectFilterCaps & D3DPTFILTERCAPS_MAGFLINEAR) == D3DPTFILTERCAPS_MAGFLINEAR ) {
        m_d3dfiltertype = D3DTEXF_LINEAR;
    } else
        m_d3dfiltertype = D3DTEXF_NONE;

    m_d3dformat = d3ddm.Format;

    ZeroMemory(&d3dpp, sizeof(D3DPRESENT_PARAMETERS));
    d3dpp.Windowed = TRUE;
    d3dpp.SwapEffect = D3DSWAPEFFECT_DISCARD;
    d3dpp.BackBufferCount = 1;
    d3dpp.BackBufferFormat = m_d3dformat;
    d3dpp.BackBufferWidth = m_dwWindowWidth;
    d3dpp.BackBufferHeight = m_dwWindowHeight;
    d3dpp.MultiSampleQuality = D3DMULTISAMPLE_NONE;
    d3dpp.PresentationInterval = D3DPRESENT_INTERVAL_DEFAULT;

    hr = IDirect3D9_CreateDevice(m_lpD3D, D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, m_hAppWindow, dwCreateFlags, &d3dpp, &m_lpDevice);
    if (FAILED(hr))
        goto error_occured;

    return S_OK;

error_occured:
    return hr;
}

STDMETHODIMP VideoRender::InitializeSwapChain(DWORD dwWidth, DWORD dwHeight)
{
    HRESULT hr = E_FAIL;
    D3DPRESENT_PARAMETERS d3dpp;
    D3DTEXTUREFILTERTYPE d3dfiltertype;
    D3DFORMAT d3dformat;
    D3DFORMAT d3dfourcc;
    D3DLOCKED_RECT LockedRect = {0};
    LPBYTE lpByte = NULL;
    LPDWORD lpdwColor = NULL;
    DWORD dwFontSize = 16;

    if (m_lpDevice == NULL)
        InitializeD3D();

    if (m_lpDevice) {
        if (dwWidth && dwHeight) {
            m_dwVideoWidth = dwWidth;
            m_dwVideoHeight = dwHeight;

            d3dfourcc = (D3DFORMAT) MAKEFOURCC('Y', 'V', '1', '2');
            d3dformat = D3DFMT_X8R8G8B8;

            ZeroMemory(&d3dpp, sizeof(D3DPRESENT_PARAMETERS));
            d3dpp.Windowed = TRUE;
            d3dpp.SwapEffect = D3DSWAPEFFECT_DISCARD;
            d3dpp.BackBufferWidth = m_dwVideoWidth;
            d3dpp.BackBufferHeight = m_dwVideoHeight;
            d3dpp.BackBufferFormat = d3dformat;
            d3dpp.hDeviceWindow = m_hAppWindow;

            hr = IDirect3DDevice9_CreateAdditionalSwapChain(m_lpDevice, &d3dpp, &m_lpSwapChain);
            if (FAILED(hr))
                goto error_occured;

            hr = IDirect3DDevice9_CreateOffscreenPlainSurface(m_lpDevice, m_dwVideoWidth, m_dwVideoHeight, d3dfourcc, D3DPOOL_DEFAULT, &m_lpSurface, NULL);
            if (FAILED(hr))
                goto error_occured;

            hr = IDirect3D9_CheckDeviceFormat(m_lpD3D, D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, m_d3dformat, D3DUSAGE_QUERY_FILTER, D3DRTYPE_TEXTURE, d3dformat);
            if (FAILED(hr))
                d3dfiltertype = D3DTEXF_NONE;
            else
                d3dfiltertype = m_d3dfiltertype;

            m_d3dfiltertype = d3dfiltertype;
            m_d3dformat = d3dformat;
            m_d3dfourcc = d3dfourcc;

            hr = IDirect3DDevice9_CreateTexture(m_lpDevice, 2048, 2048, 1, D3DUSAGE_DYNAMIC, D3DFMT_A8R8G8B8, D3DPOOL_DEFAULT, &m_lpTexture, NULL);
            IDirect3DTexture9_LockRect(m_lpTexture, 0, &LockedRect, NULL, D3DLOCK_DISCARD);
            lpByte = (LPBYTE) LockedRect.pBits;
            lpdwColor = (LPDWORD) lpByte;
            memset(lpByte, 0xff, 2048 * 2048 * 4);
            IDirect3DTexture9_UnlockRect(m_lpTexture, 0);

            hr = D3DXCreateSprite(m_lpDevice, &m_lpSprite);
            if (FAILED(hr)) {
            }

            hr = D3DXCreateFont(m_lpDevice, dwFontSize, 0, FW_BOLD, 0, FALSE, DEFAULT_CHARSET, OUT_DEFAULT_PRECIS, DEFAULT_QUALITY, DEFAULT_PITCH | FF_DONTCARE, L"Consolas", &m_lpInfoFont);
            if (FAILED(hr)) {
            }

            m_bInitedSwapChain = TRUE;
        }
    }

    return S_OK;

error_occured:
    return hr;
}

STDMETHODIMP VideoRender::Update(LPBYTE lpBuffer)
{
    HRESULT hr = S_OK;
    LPDIRECT3DSURFACE9 lpBackBuffer = NULL;
    DWORD dwWidth = 0;
    DWORD dwHeight = 0;
    D3DPRESENT_PARAMETERS d3dpp;

    if (lpPluginBuffer) {
        EnterCriticalSection(&m_csSwapChain);
        if (m_lpSwapChain) {
            IDirect3DSwapChain9_GetPresentParameters(m_lpSwapChain, &d3dpp);

            hr = IDirect3DSwapChain9_GetBackBuffer(m_lpSwapChain, 0, D3DBACKBUFFER_TYPE_MONO, &lpBackBuffer);
            hr = IDirect3DDevice9_SetRenderTarget(m_lpDevice, 0, lpBackBuffer);
            hr = IDirect3DSurface9_Release(lpBackBuffer);
            hr = IDirect3DDevice9_Clear(m_lpDevice, 0, NULL, D3DCLEAR_TARGET, D3DCOLOR_XRGB(0, 0, 0), 1.0f, 0);

            hr = IDirect3DDevice9_BeginScene(m_lpDevice);
            if (SUCCEEDED(hr)) {
                D3DLOCKED_RECT LockedRect;
                LPBYTE source = 0, dest = 0;

                ZeroMemory(&LockedRect, sizeof(D3DLOCKED_RECT));
                hr = IDirect3DSurface9_LockRect(m_lpSurface, &LockedRect, NULL, 0);
                dest = (LPBYTE) LockedRect.pBits;
                source = lpPluginBuffer->lpBuffer;
                if (SUCCEEDED(hr) && dest) {
                    /* copy image buffer to LockedRect */
                }
                IDirect3DSurface9_UnlockRect(m_lpSurface);
                hr = IDirect3DDevice9_StretchRect(m_lpDevice, m_lpSurface, lprtSrc, lpBackBuffer, lprtDest, D3DTEXF_LINEAR);

                m_lpSprite->Begin(D3DXSPRITE_ALPHABLEND);
                pos.x = 0;
                pos.y = 0;
                pos.z = 0;

                SetRect(&rt, 0, 0, 100, 100);
                m_lpInfoFont->DrawTextW(m_lpSprite, L"test", -1, &rt, DT_VCENTER, D3DCOLOR_RGBA(0, 255, 255, 0xff));
                m_lpSprite->End();
            }
            hr = IDirect3DDevice9_EndScene(m_lpDevice);
            hr = IDirect3DSwapChain9_Present(m_lpSwapChain, NULL, NULL, NULL, NULL, 0);
        }
        LeaveCriticalSection(&m_csSwapChain);
    }

    return S_OK;
} 
```

* * *

非常感谢，这真的很有帮助。

但是，如果我创建一个与窗口大小（更大或更小）具有不同分辨率后备缓冲区的交换链。并将一些图像渲染到窗口，它会自动重新调整图像大小以适应窗口大小。由于大小不同，视口似乎已更改。绘制的文本也会被拉伸/收缩。有什么办法可以防止这种情况发生吗？

我希望覆盖文本不受其他任何影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:08:19.323

每次窗口大小发生变化时，您都必须重置 Direct3D 设备。

使用[IDirect3DDevice9::Reset 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174425%28v=vs.85%29.aspx)。记得先释放默认池中创建的所有资源。

您应该检查`WM_SIZE`窗口消息循环以确定窗口的大小是否已更改。

# facebook - 2013 年 2 月 6 日 - 自定义操作结束，意味着重新发布到墙上的结束？

> ID：14471605
> 
> 赞同：4
> 
> 时间：2013-01-23T02:44:31.987
> 
> 标签：facebook

2013 年 2 月 6 日

以下更改将于 2013 年 2 月 6 日生效： 内容消费自定义操作的结束 我们将不再显示仅由消费内容的用户发布的自定义 Open Graph 操作。如果您拥有其中一项操作并且之前已获得批准，您将收到我们的电子邮件。开发人员应停止发布这些操作，因为这样做会从 2 月 6 日开始返回错误。可以在用户简单地消费内容时发布的唯一操作是内置操作。

* * *

我的自定义操作是在用户离线时发布到用户墙上，我可以随时重新发布状态更新。随着 2 月 6 日的更改，我相信我将无法再重新发布到用户墙上，有没有人知道是否有替代方法可以重新发布到用户墙上？例如提要对话框或登录对话框？获得令牌后，我是否能够重新发布到用户墙上？请帮忙，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:46:26.707

在 2 月 6 日（及之后）的更新中，如果用户离线，您将无法在用户的墙上发帖，因为`offline_access`授权已被弃用。您现在要做的就是获取用户的访问令牌，将它们换成长期访问令牌（如果我没有出错，可以持续几个月）并将其用于您的帖子。

我可以知道“在用户墙上重新发布”是什么意思吗？你在分享什么？如果它是链接或消息（状态更新）和类似的东西，它会起作用（它对我有用），但你必须处理访问令牌过期的那一刻。我希望这回答了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:59:15.917

您应该没有问题，因为在用户墙上发帖不被视为自定义操作。操作是用户可以在您的应用程序中执行的特殊“交互”，例如，如果您定义一个“观看”操作，那么您的应用程序可以将诸如“约翰在您的电影应用程序上观看泰坦尼克号”之类的内容发布到用户墙上。要使用操作，必须为每个应用程序手动定义它们并通过审批流程。

可以在此处找到操作文档： [https ://developers.facebook.com/docs/technical-guides/opengraph/defining-an-action-type/](https://developers.facebook.com/docs/technical-guides/opengraph/defining-an-action-type/)

# yii - YII 在部分视图中加载日期选择器会破坏表格布局

> ID：14471608
> 
> 赞同：1
> 
> 时间：2013-01-23T02:44:50.323
> 
> 标签：yii

我有一个表单，其中一部分具有里程碑的表格输入，带有 ajax 函数以添加新行。

这是ajax调用的函数：

```
public function actionNewMilestoneRow($index)
{
  $milestoneModel = new TgifMilestone;
  $this->renderPartial('_milestone', array(
    'milestoneModel' => $milestoneModel,
    'i' => $index,
  ),false,true);
} 
```

这是带有 JS 的视图的表格部分，用于添加额外的行：

```
 <table class="timeline">
  <tbody class="milestones">
  <tr><th>Milestone</th><th>Expected<br />Completion Date</th></th></tr>
  <?php foreach ($milestoneModels as $i=>$milestoneModel): ?>
  <tr>
  <td><?php echo $form->textField($milestoneModel,"[$i]milestone",array('size'=>75,'maxlength'=>250)); ?>
  <?php echo $form->error($milestoneModel,"[$i]milestone]"); ?>
  </td>
  <td>
  <?php
  $date_value=empty($milestoneModel->expected_completion_date)?date('l, M j, Y'):$milestoneModel->expected_completion_date;
  $this->widget('zii.widgets.jui.CJuiDatePicker',array(
      'model'=>$milestoneModel, //Model object
      'language'=>'',
      'attribute'=>"[$i]expected_completion_date", //attribute name
      'options'=>array(
        'dateFormat' => 'DD, M d, yy',// equivalent to PHP date 'l, M j, Y'
        'defaultDate'=>$date_value,//see above
      ), // jquery plugin options
  ));
  ?>
<?php echo $form->error($milestoneModel,"[$i]expected_completion_date"); ?>
</td>
</tr>    <?php endforeach; ?>
</tbody>
</table>

<?php echo CHtml::button('Add Another Milestone', array('class' => 'milestone-add')) ?>    
<script>
$(".milestone-add").click(function(){
  $.ajax({
    success: function(html){
      $(".milestones").append(html);
    },
    type: 'get',
    url: '<?php echo $this->createUrl('newMilestoneRow');?>',
    data: {
      index: $(".milestones tr").size() - 1
    },
    cache: false,
    dataType: 'html'
  });
});    
</script> 
```

如果我在没有返回和处理输出的情况下渲染部分内容，则对于添加的行一切正常：

```
 $this->renderPartial('_milestone', array(
    'milestoneModel' => $milestoneModel,
    'i' => $index,
  )); 
```

除了日期选择器不显示，但表格正确呈现。

当我添加返回和处理输出时，我得到了日期选择器，但它打破了表格：

```
 $this->renderPartial('_milestone', array(
    'milestoneModel' => $milestoneModel,
    'i' => $index,
  ),false,true); 
```

表格行和表格单元格标签消失：

```
<tr><!-- this is the row befoe the added row -->
<td><input id="TgifMilestone_4_milestone" type="text" name="TgifMilestone[4][milestone]" maxlength="250" size="75"></td>
<td><input id="TgifMilestone_4_expected_completion_date" class="hasDatepicker" type="text" name="TgifMilestone[4][expected_completion_date]"></td>
</tr>
<link href="/requests/assets/f73aa0bb/jui/css/base/jquery-ui.css" type="text/css" rel="stylesheet">
<input id="TgifMilestone_5_milestone" type="text" name="TgifMilestone[5][milestone]" maxlength="250" size="75">
<input id="TgifMilestone_5_expected_completion_date" class="hasDatepicker" type="text" name="TgifMilestone[5][expected_completion_date]">
</tbody>
</table> 
```

没有返回和处理输出，它呈现如下：

```
<tr>
<td><input id="TgifMilestone_5_milestone" type="text" name="TgifMilestone[5][milestone]" maxlength="250" size="75"></td>
<td><input id="TgifMilestone_5_expected_completion_date" type="text" name="TgifMilestone[5][expected_completion_date]"></td>
</tr>
</tbody>
</table> 
```

任何想法如何解决它，以便我获得添加行的表格行和日期选择器？

应 bool.dev 的要求添加 _milestone.php 部分视图；

```
<tr>
<td><?php echo CHtml::activeTextField($milestoneModel,"[$i]milestone",array('size'=>75,'maxlength'=>250)); ?></td>
<td>
<?php
$date_value=empty($milestoneModel->expected_completion_date)?date('l, M j, Y'):substr($milestoneModel->expected_completion_date,0,10);//default date must be a date not a datetime
  $this->widget('zii.widgets.jui.CJuiDatePicker',array(
      'model'=>$milestoneModel, //Model object
      'language'=>'',
      'attribute'=>"[$i]expected_completion_date", //attribute name
      'options'=>array(
        'dateFormat' => 'DD, M d, yy',// equivalent to PHP date 'l, M j, Y'
        'defaultDate'=>$date_value,//see above, date not datetime..

      ), // jquery plugin options

));
?> 
</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:38:03.997

这里的问题是再次`processOutput`加载*jquery.js*、*jquery-ui.min.js*和*jquery-ui.css*，这会导致不正确的元素。即使`CJuiDatePicker`需要这些文件，加载一次（在第一次渲染期间）就足够了，在随后的 ajax 调用中，我们可以避免再次加载它们。

为此，您可以简单地修改*_milestone.php*部分视图文件：

```
<?php
    Yii::app()->clientScript->scriptMap['jquery.js']=false;
    Yii::app()->clientScript->scriptMap['jquery-ui.css']=false;
    Yii::app()->clientScript->scriptMap['jquery-ui.min.js']=false;
?>
<!-- rest of your _milestone.php --> 
```

* * *

发生的情况是，当`processOutput`遇到上述 3 个文件的 registerScript 调用时，它将被忽略，但所需的其余脚本（如激活）`CJuiDatePicker`将包含在脚本中。

# android - InflateException 引起的 没有绑定类的标记

> ID：14471613
> 
> 赞同：0
> 
> 时间：2013-01-23T02:45:56.497
> 
> 标签：android, android-layout, android-fragments

我正在使用 Master-Detail 流的类和 xml 布局（在创建新项目时可用），以并排显示列表和详细视图。但是，我收到此错误：

```
E/AndroidRuntime(  724): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.TrueFalse/com.TrueFalse.news.NewsModule}: android.view.InflateException: Binary XML file line #14: Error inflating class fragment
E/AndroidRuntime(  724):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1736)
E/AndroidRuntime(  724):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1752)
E/AndroidRuntime(  724):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
E/AndroidRuntime(  724):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:993)
E/AndroidRuntime(  724):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  724):    at android.os.Looper.loop(Looper.java:126)
E/AndroidRuntime(  724):    at android.app.ActivityThread.main(ActivityThread.java:3997)
E/AndroidRuntime(  724):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  724):    at java.lang.reflect.Method.invoke(Method.java:491)
E/AndroidRuntime(  724):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
E/AndroidRuntime(  724):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
E/AndroidRuntime(  724):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(  724): Caused by: android.view.InflateException: Binary XML file line #14: Error inflating class fragment
E/AndroidRuntime(  724):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:688)
E/AndroidRuntime(  724):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
E/AndroidRuntime(  724):    at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
E/AndroidRuntime(  724):    at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
E/AndroidRuntime(  724):    at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
E/AndroidRuntime(  724):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:224)
E/AndroidRuntime(  724):    at android.app.Activity.setContentView(Activity.java:1777)
E/AndroidRuntime(  724):    at com.TrueFalse.news.NewsModule.onCreate(NewsModule.java:19)
E/AndroidRuntime(  724):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
E/AndroidRuntime(  724):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1700)
E/AndroidRuntime(  724):    ... 11 more
E/AndroidRuntime(  724): Caused by: java.lang.NullPointerException
E/AndroidRuntime(  724):    at java.lang.VMClassLoader.findLoadedClass(Native Method)
E/AndroidRuntime(  724):    at java.lang.ClassLoader.findLoadedClass(ClassLoader.java:390)
E/AndroidRuntime(  724):    at java.lang.ClassLoader.loadClass(ClassLoader.java:538)
E/AndroidRuntime(  724):    at java.lang.ClassLoader.loadClass(ClassLoader.java:508)
E/AndroidRuntime(  724):    at android.support.v4.app.Fragment.instantiate(Fragment.java:391)
E/AndroidRuntime(  724):    at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
E/AndroidRuntime(  724):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
E/AndroidRuntime(  724):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:660)
E/AndroidRuntime(  724):    ... 20 more 
```

我怀疑这与我没有设置 android:name="" 或 class="" 的事实有关，这可以解释堆栈跟踪，但是上面提到的模板具有相同的 xml 文件改变一些名称。

我的代码跟踪中的行号是

```
setContentView(R.layout.news_list_container); 
```

我的 NewsModule 类扩展了 android.support.v4.app.FragmentActivity。

* * *

/res/values-large/refs.xml（将 news_list_container.xml 映射到 news_twopane_container.xml，我很确定会发生这种情况，因为它在不满足“大：约束”的设备上工作正常。）

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <!-- List of layout overrides for screens that can support iPad style views.
         This should mirror the other refs.xml file-->
    <item name="news_list_container" type="layout">@layout/news_twopane_container</item>
</resources> 
```

/res/layout/news_twopane_container.xml（第 14 行是第二个片段的开头）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/news_list_container"
        android:name="com.TrueFalse.news.NewsList"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1" />

    <fragment
        android:id="@+id/news_detail_container"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:27:30.367

当我使用模板时，我忽略了一个事实，即第二个片段实际上应该是片段的*占位符*，在模板中是一个 FrameLayout。我最初的怀疑是问题所在，因为片段*必须*有一个与之关联的类。所以 /res/news_twopane_container.xml 应该是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/news_list_container"
        android:name="com.TrueFalse.news.NewsList"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1" />
    <!-- NOT fragment, because we don't have data to put here yet -->
    <FrameLayout
        android:id="@+id/news_detail_container"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:34:48.637

您可能想通过将 onCreate 方法替换为 onCreateView 来尝试此操作。我想这可能对你有帮助。

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i(LOG_TAG, "Loading Container with news_container.xml");
        setContentView(R.layout.news_list_container);
--------------------------------------------------------------------------

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
// Inflate the layout for this fragment
return inflater.inflate(R.layout.news_list_container, container, false);
} 
```

# javascript - 挂钩 document.write 函数

> ID：14471615
> 
> 赞同：3
> 
> 时间：2013-01-23T02:46:14.547
> 
> 标签：javascript, google-chrome

我正在开发一个需要我拦截 document.write 函数的 Chrome 扩展程序（注意：我正在使用内容脚本）。我在这里使用该方法：http: [//sitr.us/2012/09/04/monkey-patching-document-write.html](http://sitr.us/2012/09/04/monkey-patching-document-write.html) 但它无法正常工作。这就是我现在所拥有的：

```
(function() {
    var originalWrite = document.write;
    alert("checkpoint 1");
    document.write = function() {
        alert("checkpoint 2");

        //secret stuff here         

        return Function.prototype.apply.call(
                        originalWrite, document, arguments);    
    }
})(); 
```

但是，当我在网页上调用 document.write 时，我的钩子中的“检查点 2”警报永远不会被调用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T02:48:58.830

您的扩展程序在其自己的沙箱中运行，并且[无法访问网页的 JavaScript 环境](https://stackoverflow.com/questions/10285886/chrome-extension-adding-external-javascript-to-current-pages-html#answer-10371025)。在扩展中覆盖`document.write`不会影响`document.write`网页本身的功能。

[这是来自文档](http://developer.chrome.com/dev/extensions/content_scripts.html)的引用：

> 但是，内容脚本有一些限制。他们不能：
> 
> *   使用 chrome.* API（chrome.extension 的部分除外）
> *   使用由其扩展页面定义的变量或函数
> *   **使用由网页**或其他内容脚本定义的变量或函数

* * *

要更改`document.write`网页的功能，您必须[将脚本插入到 DOM](https://stackoverflow.com/questions/9515704/building-a-chrome-extension-inject-code-in-a-page-using-a-content-script/9517879#9517879)中。

# html - 图像未在 XAMPP 中加载

> ID：14471621
> 
> 赞同：1
> 
> 时间：2013-01-23T02:47:15.273
> 
> 标签：html, xampp, image

我正在编写一个动态生成骰子并加载相应图像的程序。一切正常，除了图像永远不会使用 localhost 加载。我的路一定有问题。无论我使用相对路径还是绝对路径，都不会加载图像。

绝对路径为：C:\xampp\htdocs\php6-mysql\3\die1.png

唉，我创建了一个最基本的 HTML 页面，但图像仍然无法加载。有任何想法吗？这是 XAMPP 的问题吗？

```
<!DOCTYPE html>
<html>
<head>
    <title>Here are your dice!</title>
</head>
    <body>
        <img src="die1.png">
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-23T19:12:59.670

您必须为每个图像设置读/写权限。我相信你可以做整个文件夹，但如果这不起作用，单独做每个图像。右键单击（两指 mac）=> 获取信息 => 为所有人读写。重新加载和 presto，你通过 xampp 获得了图像。[![在此处输入图像描述](../Images/5d14bb876c223ee037ca58359a8a296c.png)](https://i.stack.imgur.com/NLzLJ.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:49:52.057

你应该把你的形象放在里面`htdocs`。它是您页面的根目录。或者这个`/php6-mysql/3/die1.png`到你的html`<img src`标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-28T15:07:15.487

您可以使用来自在线资源的图像。例如，您可以将图片放在 Dropbox 中并从那里检索它们。这是代码：

```
<a href="#"><img src="URL" alt=""></a> 
```

这应该可以帮助您在寻找更好的解决方案时使用图像。

# javascript - 计算文本中的空白垂直空间

> ID：14471623
> 
> 赞同：15
> 
> 时间：2013-01-23T02:47:38.017
> 
> 标签：javascript, jquery, css

我有一个 CSS 跨度：

```
font-height = 120px; 
height = 120px;
line-height = 120px; 
```

其中的文本不占据跨度的完整高度（120px）。有什么方法可以计算跨度内文本与上下边界的偏移量吗？

或者这是一种使文本接触封闭跨度标记的上下边界的方法？

[jsFiddle 链接](http://jsfiddle.net/jTpfT/1) 供参考。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T18:05:06.857

这在没有 javascript 的情况下直观地做到了：

```
#abc {
    margin: none;
    border: dotted 1px red;
    padding: 0;
    height: 120px;
    font-size:180px;
    line-height:120px;
    display:inline-block;
} 
```

我认为您需要`display:inline-block;`根据您使用的实际字体来使用和调整字体大小。

[JsFiddle在这里](http://jsfiddle.net/jTpfT/4/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T00:21:37.243

文本已经占据了跨度高度的 100% (120px)，您忘记了其他字符，如“j”或“Á”。

![在此处输入图像描述](../Images/304eb81c4f0d7f8750d767e5986ffeda.png)

试试这个html：

```
<span id="abc">jÁ / ABC</span> 
```

这个CSS

```
#abc {
    margin: none;
    border: dotted 1px red;
    padding: 0;
    display:inline-block;
    /*****120px*****/
    height: 120px;
    font-size:120px;
    line-height:120px;
} 
```

测试：http: [//jsfiddle.net/jTpfT/17/](http://jsfiddle.net/jTpfT/17/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-02T00:25:22.170

**更新**

我写了一个小脚本来自动重新调整 font-size，你需要做的就是手动调整 font-family 总大小的总高度与 font-family 大写大小的比例。

检查脚本：http: **[//jsfiddle.net/jTpfT/32/](http://jsfiddle.net/jTpfT/32/)**

* * *

JS：

```
/**
 * Calculate the ratios by hand and store in this variable form:
 * myfontlowercase + _upper_case_ratio
 */
 var georgia_upper_case_ratio           = 1.44
 var arial_upper_case_ratio             = 1.32
 var times_upper_case_ratio             = 1.48

 /********************************************/

 $(document).ready(function() {
    $(".fitTextHeight").each(function(){
        //Get font family
        var ff = $(this).css('font-family').toLowerCase().split('\'').join('').split(' ').join('');

        //get ratio
        var miRatio = 1;
        try {miRatio = eval(ff+ "_upper_case_ratio"); } catch (e) { }

        //Get boxSize
        var boxSize = Number ($(this).css('height').split('px')[0]);

        //Calculate newSize & apply
        var newCssFontSize =  boxSize  * miRatio
        $(this).css('font-size', newCssFontSize );
        $(this).css('line-height', boxSize + "px" );
    })
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T00:57:37.313

就浏览器而言，您在 jsFiddle 链接中看到的差距不存在。间隙是字体的一部分。例如，如果您在示例中使用小写字母`g`，则底部间隙会消失，并且跨度完全适合文本。

这意味着无法自动调整文本大小以消除间隙，因为浏览器将不知道阈​​值，因此需要手动/视觉试验和错误，并且该技术在不同浏览器中不会非常成功。

假设问题正在消除该差距，我只能看到 1 个真正解决此问题的方法。解决方案是使用图像。

如果您不想在 Photoshop 中创建图像，则可以在画布上的前端创建图像，或者通过 PHP 中的 GD 等库在后端创建图像。通过动态创建图像，您可以循环抛出像素数据以轻松删除文本周围的任何空白。

顺便说一句，像[cufon](http://cufon.shoqolate.com/generate/)或[typeface.js](http://typeface.neocracy.org/)这样的字体替换技术可能能够通过一些微调来提供没有间隙的文本。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-02T01:10:12.313

这样做的方法是将`line-height`相对设置为`font-size`. 之后，您需要使用`display:inline-block`. 这并不完美，您必须考虑您正在使用的各个字体。控制变化的一种方法是使用`text-transform:uppercase`.

这是代码：

```
#abc {
  font-size: 100px;
  line-height: 68.5%;
  border: dotted 1px red;
  text-transform:uppercase;
  display:inline-block;
} 
```

您可以将字体大小更改为您喜欢的任何大小——它仍然可以工作。如果您使用不同的字体，只需更改行高的相对百分比。

# angularjs - 设置复选框以检查 Angular JS

> ID：14471624
> 
> 赞同：1
> 
> 时间：2013-01-23T02:47:38.087
> 
> 标签：angularjs

我有以下代码：

```
<input type="checkbox" data-col="1" name="eighth-slot" data-ng-model="scope.friends.calendar[0][8]" class="ng-pristine ng-valid"> 
```

第一个 [0] 是星期几，第二个 [8] 表示 2 小时的时间段，并返回真/假，指示他们在该特定时间段内当天是否空闲。

我认为将模型绑定到输入是第一件事，但是如果最后一个参数为真，我该如何检查呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:02:16.407

在模板中您不需要说假定为接收者`scope.friends.calendar[0][8]`。`scope`所以`friends.calendar[0][8]`很好。

```
function Ctrl($scope) {
  $scope.friends = {calendar: [[]]};
  $scope.friends.calendar[0][8] = true;
} 
```

例如，会使复选框被选中。

# macos - 从 Python 字典创建 NSDictionary

> ID：14471626
> 
> 赞同：3
> 
> 时间：2013-01-23T02:47:44.657
> 
> 标签：macos, nsdictionary, pyobjc

如何从 Python 字典中获取 NSDictionary（以便我可以调用`description`它）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T03:27:00.157

```
>>> d = NSDictionary.dictionaryWithDictionary_({"foo": "bar"})
>>> type(d)
<objective-c class __NSDictionaryI at 0x7fff7ae34688>
>>> d.description()
u'{\n    foo = bar;\n}'
>>> d
{
    foo = bar;
}
>>> 
```

# vb.net - 什么是 vb.net 中 vb6 的“Report.DetailCopies”属性

> ID：14471627
> 
> 赞同：1
> 
> 时间：2013-01-23T02:47:46.543
> 
> 标签：vb.net, crystal-reports

我正在将一个 vb6 Windows 应用程序重写为处理水晶报告文件的 vb.net。我在 vb.net 中找不到“report.DetailCopies 属性”。

DetailCopies 属性可以生成重复的详细信息部分，如下所示：

*   DetailCopies 属性设置为 1 -
    Page1 Page2 Page3 Page4
    Header Header Header Header
    Detail(1) Detail(2) Detail(3) Detail(4)

    Footer Footer Footer Footer

*   DetailCopies 属性设置为 2 -
    Page1 Page2 Page3 Page4
    Header Header Header Header-
    Detail(1-1) Detail(2-1) Detail(3-1) Detail(4-1)
    Detail(1-2) Detail(2-2) ) 详细信息(3-2) 详细信息(4-2)
    页脚 页脚 页脚 页脚

*   DetailCopies 属性设置为 3 -
    Page1 Page2 Page3 Page4
    Header Header Header Header-
    Detail(1-1) Detail(1-3) Detail(2-1) Detail(2-3)
    Detail(1-2) Detail(2-2) )
    页脚 页脚 页脚 页脚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:03:38.820

尝试使用`Report.Areas.Item("D").CopiesToPrint = 1`（或 2 或 3）。

# objective-c - XCode 4.5 中的工作区/编译/库问题试图集成 Box2DCocos2DExamples.xcodeproj 文件

> ID：14471636
> 
> 赞同：1
> 
> 时间：2013-01-23T02:48:53.117
> 
> 标签：objective-c, cocos2d-iphone, compiler-errors, xcode4.5, box2d-iphone

第一次在 iOS 上发帖和新手，但过去几周一直在努力解决工作区/编译/库问题，虽然我喜欢学习冒险，但我只是受够了，需要帮助。我正在使用 XCode4.5

我正在尝试将 Box2DCocos2DExamples.xcodeproj 文件与另一个项目文件（test.xcodeproj）集成到我自己的工作区文件中，以便我可以从我在网上找到的这个示例项目文件中获取一些很酷的切片功能并将其放入我的应用程序。看起来像一个简单的请求，不是吗？我设置了一个工作区项目，以便可以导入整个 Box2DCocos2DExamples.xcodeproj 文件并在需要时从同一个工作区中修改代码。

我做了以下事情：

*   为我的应用程序构建设置指定了正确的用户标题搜索路径：/Users/xx/Desktop/Code/Box2D-Examples-master，**递归是**并且始终搜索用户路径设置为**是**
*   我已经从 Box2DCocos2DExamples.xcodeproj 创建了一个库文件 Slice.a 并且对“**编译源**”和添加“**复制标题**”感到困惑/有问题，因为这似乎是 Xcode 中添加这些文件的愚蠢手动过程，甚至当我尝试过滤诸如“.m”之类的东西并选择一堆它要么不选择所有文件，所以我递归地继续添加更多文件，直到我真正得到数量截然不同的 .h 和 .m 文件。我确实觉得这对我来说有点愚蠢，因为我从 Box2D 和 Cocos2D 包中添加了所有这些 .m 和 .h 文件（超过 100 个），但我的“链接器错误”和“未知符号 i386”错误消息似乎需要这些文件...有更好的方法吗？
*   我尝试了各种方案设置，并确保在我的应用程序方案的构建目标中添加了库 (slice.a)。为什么我可以将 Box2DCocos2DExamples.xcodeproj 添加为我的应用程序的附加构建目标以及库 (slice.a)？有没有办法避免将库文件用于这种事情？
*   我已将库 (slice.a) 文件中的构建设置设置为 Skip Install = yes

好的，所以说了这么多，我觉得我的主要问题和缺乏理解是围绕我的库的编译源和复制头文件，并且还想知道我是否正在从我的应用程序文件中做一些时髦的事情，试图调用一个类Box2DCocos2DExamples.xcodeproj 文件。这只是一个小示例，也是引用其他项目类的唯一未注释部分。通过将 CCDirector.m 添加到我的库中，我能够解决这些链接器错误。

```
// Try to use CADisplayLink director
// if it fails (SDK < 3.1) use the default director
if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
    [CCDirector setDirectorType:kCCDirectorTypeDefault];

CCDirector *director = [CCDirector sharedDirector]; 
```

我的错误消息会根据添加的源文件有所不同，但我似乎无法在我的库 (slice.a) 文件中找出源文件的正确组合来解决所有问题，而且它肯定不会通过链接编译阶段。

这是我收到的错误消息示例：

> _ccRemoveHDSuffixFromFile”，引用自： -[CCTextureCache addImageAsync:target:selector:] in libSlice.a(CCTextureCache.o) -[CCTextureCache addImage:] in libSlice.a(CCTextureCache.o) -[CCTextureCache(PVRSupport) addPVRTCImage:bpp: hasAlpha:width:] in libSlice.a(CCTextureCache.o) -[CCTextureCache(PVRSupport) addPVRImage:] in libSlice.a(CCTextureCache.o) "_ccpLength"，引用自：-[CCLayerGradient updateColor] in libSlice.a(CCLayer .o) "_cocos2dVersion"，引用自：-[CCDirector init] in libSlice.a(CCDirector.o) "_gluLookAt"，引用自：-[CCDirectorIOS setProjection:] in libSlice.a(CCDirectorIOS.o) -[CCCamera locate ] 在 libSlice.a(CCCamera.o) - [CCGridBase set3DProjection] 在 libSlice.a(CCGrid.o) "_gluPerspective"，引用自：-[CCDirectorIOS setProjection:] in libSlice.a(CCDirectorIOS.o) -[CCGridBase set3DProjection] in libSlice.a(CCGrid.o) ld：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

有一段时间，我煞费苦心地将 .m 文件一个一个地添加到我的库文件构建阶段，以便解决我看到的错误，但这花费了太长时间，并没有让我走上正确的轨道，我仍然觉得我在遗漏了一些明显的或更（一般）简单的方法来做我正在做的事情。

我知道我已经说了很多，我很抱歉，但我主要是在寻找一些关于编译、链接库等的见解，希望能帮助我解决我遇到的问题。欢迎任何关于 XCode 机制的输入，因为我真的希望在这里获得深刻的理解。

提前干杯和感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:55:36.290

我不是这种解决方法的真正粉丝，但这是我目前决定继续前进的地方，所以我想我会发布它。它在概念上有点简单，但不一定可扩展，所以最终我必须想出更好的东西。帮助！

与其尝试将 Box2D/Cocos2D 或在我的情况下（Box2dCocos2DExamples.xcodeproj）作为库添加到我的应用程序，我想我会将我的应用程序作为库添加到包含 Box2dCocos2D.xcodeproj 文件的新工作区。然后我意识到，将我的应用程序的源文件添加到这个新工作区中会更简单，因为没有太多，然后通过重新排列工作区的 appDelegate 文件从那里开始。这很好，但只是因为我已经放弃了添加/创建库文件:(

# javascript - 是否可以使用变量的值来定义 JavaScript 字符串中另一个变量的名称？

> ID：14471637
> 
> 赞同：0
> 
> 时间：2013-01-23T02:48:53.727
> 
> 标签：javascript, variables, variable-assignment, session-cookies

我正在尝试将变量的值用作字符串中另一个变量的名称。

我已经搜索过，看到了类似的问题，答案似乎是“学习如何使用数组，傻瓜”。但我认为，我对这个问题有一个有点独特的版本。

我什至不擅长 Javascript 来解释这个问题，所以只显示代码可能会更容易，我用双星（**）包围了我感到困惑的部分：

```
<script language="JavaScript">
function bake(cookietype,ingredient) {
    **ingredient**=document.recipes.**ingredient**.value;
    document.cookie=**cookietype** + "=" + **ingredient**;
}
</script>

<form name="recipes">
    Name: <input type="text" name="flour" size="20" onBlur="bake('oreo','flour')">
    Email: <input type="text" name="eggs" size="20" onBlur="bake('milano','eggs')">
</form> 
```

因此，如果这有任何意义，我想设置一个以传递给函数“bake”的第一个变量命名的 cookie，并且我希望 cookie 的内容是相应表单输入元素的值。这可能吗？它必须是，对吧？我只是没有受过足够的教育来做看起来相当简单的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T02:52:10.543

我不确定您是否以正确的方式进行操作，仅此而已-无需创建变量并将其命名为特定的表单元素。而不是`'flour'`作为第二个参数传递，而是传递`this`... 所以它会是`onBlur="bake('oreo',this)"`. 然后，在您的函数中，您可以使用`ingredient.value`来获取表单输入的值。这是我用作函数的内容：

```
function bake(cookietype,ingredient) {
    var textbox_value=ingredient.value;
    document.cookie=cookietype + "=" + textbox_value;
} 
```

和 HTML：

```
<form name="recipes">
    Name: <input type="text" name="flour" size="20" onBlur="bake('oreo',this)">
    Email: <input type="text" name="eggs" size="20" onBlur="bake('milano',this)">
</form> 
```

`this`指的是调用它的 HTML 元素。所以当你将它传递给函数时，你可以通过名为 的参数来引用它`ingredient`。它似乎比使用文本指定表单中元素的名称要干净得多......特别是因为在您的示例中，文本总是引用它被调用的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T02:54:09.223

您想查看方括号表示法。

```
function bake(cookietype,ingredient) {
    var ingredient=document.recipes[ingredient].value;
    document.cookie= cookietype + "=" + ingredient;
} 
```

您可能应该使用设置 cookie 功能。查看[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T02:55:04.777

您可以使用全局对象：

```
var myVars = {};
function bake(cookietype,ingredient) {
    myVars[ingredient] = document.recipes[ingredient].value;
    document.cookie = cookietype + "=" + myVars[ingredient];
} 
```

但这肯定不是 Ian 指出的正确方法。

# r - 按日期子集 data.frame

> ID：14471640
> 
> 赞同：29
> 
> 时间：2013-01-23T02:48:59.677
> 
> 标签：r, date, subset

我有一个名为`EPL2011_12`. 我想通过按日期对原始数据集进行子集来制作新的数据集。日期位于名为`Date` 日期的列中，格式为 DD-MM-YY。

我努力了

```
EPL2011_12FirstHalf <- subset(EPL2011_12, Date > 13-01-12) 
```

和

```
EPL2011_12FirstHalf <- subset(EPL2011_12, Date > "13-01-12") 
```

但每次都会收到此错误消息。

> ```
> Warning message:
> In Ops.factor(Date, 13- 1 - 12) : > not meaningful for factors 
> ```

我想这意味着 R 正在处理文本而不是数字，为什么它不起作用？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-23T03:08:55.583

好吧，它显然不是一个数字，因为它有破折号。错误消息和两条评论告诉您这是一个因素，但评论员显然正在等待并让消息进入。Dirk 建议您这样做：

```
 EPL2011_12$Date2 <- as.Date( as.character(EPL2011_12$Date), "%d-%m-%y") 
```

之后你可以这样做：

```
 EPL2011_12FirstHalf <- subset(EPL2011_12, Date2 > as.Date("2012-01-13") ) 
```

R 日期函数假定格式为“YYYY-MM-DD”或“YYYY/MM/DD”。您确实需要比较类似的类：日期到日期或字符到字符。而且，如果您要逐个字符进行比较，那么只有日期采用 YYYYMMDD 格式（如果使用任何分隔符，则使用相同的分隔符），它才会成功。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-15T05:45:08.837

您应该对日期变量做的第一件事是确认 R 将其读取为日期。为此，对于名为 Date 的变量（即向量/列），在名为 EPL2011_12 的数据框中，输入

`class(EPL2011_12$Date)`

输出应为 [1]“日期”。如果没有，您应该通过输入将其格式化为日期

`EPL2011_12$Date <- as.Date(EPL2011_12$Date, "%d-%m-%y")`

请注意，上述日期格式中的连字符（“%d-%m-%y”）也可以是斜杠（“%d/%m/%y”）。确认 R 将其视为日期。如果没有，请尝试不同的格式化命令

`EPL2011_12$Date <- format(EPL2011_12$Date, format="%d/%m/%y")`

一旦你有了日期格式，你可以使用`subset`命令，或者你可以使用括号

`WhateverYouWant <- EPL2011_12[EPL2011_12$Date > as.Date("2014-12-15"),]`

# php - 使用 Lighttpd 和 Fast-CGI 时如何显示 PHP 错误？

> ID：14471641
> 
> 赞同：7
> 
> 时间：2013-01-23T02:49:03.633
> 
> 标签：php, syntax-error, runtime-error, fastcgi, lighttpd

我正在使用 FastCGI 运行 Lighttpd 网络服务器，并且网络服务器不输出 PHP 解析错误。

我的 php.ini 文件具有以下设置：

```
error_reporting = E_ALL
display_errors = Off
display_startup_errors = Off
log_errors = On
html_errors = On 
```

我在我的 PHP 脚本中启用错误输出以进行开发，如下所示（其他环境有冗余）：

```
error_reporting( E_ALL );
ini_set( 'display_errors', 1 );
ini_set( 'html_errors', 'On' ); 
```

大多数错误输出正常。解析错误不会。下面是引发解析错误的示例代码。该错误不是由 Lighttpd 网络服务器输出的，而是在从命令行执行时，因为它没有使用 FastCGI。（注意缺少连接运算符）：

```
<?php echo 'foo' 'bar'; ?> 
```

我发现如果我`display_errors = On`在 php.ini 中设置，然后使用 FastCGI 和 Lighttpd 正确解析错误输出，但是我无法在我的 PHP 脚本中使用`ini_set( 'display_errors', 0 )`.

我希望在开发应用程序时能够在我的应用程序中显示这些，并且能够在不更改 php.ini 配置的情况下将它们关闭以进行生产。使用 FastCGI 时，是否无法在我的 PHP 应用程序中执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-18T17:18:33.230

未显示错误的原因是因为当代码中存在致命错误时（例如您的示例），代码根本不会执行，因此永远不会设置 display_errors 值。

来自 php.net（[http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)）：

> 虽然 display_errors 可以在运行时设置（使用 ini_set()），但如果脚本有致命错误，它不会有任何影响。这是因为未执行所需的运行时操作。

我发现的一个解决方案是在您正在开发的目录中使用 .user.ini 文件并希望看到错误输出（它们的功能类似于 Apache 的 .htaccess 文件）。没有很好的方法来修改 PHP 代码以显示致命错误，因为包含致命错误的代码永远不会运行。

因此，对于上面的示例，您可以在与包含以下行的 php 文件相同的目录中使用 .user.ini 文件：

```
error_reporting = -1
display_errors = On
html_errors = On 
```

有关更多信息，请参阅[http://php.net/manual/en/configuration.file.per-user.php](http://php.net/manual/en/configuration.file.per-user.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-06T21:27:00.823

谢谢杰克的回答，这真的很有帮助。但是我想补充一点，创建 .user.ini 文件并添加代码行对我不起作用。

我将这些行添加到 .user.ini 文件中：

```
error_reporting = E_ALL
display_errors = On
html_errors = On
display_startup_errors = On
log_errors = On 
```

在此之后，我能够看到错误并解决问题。

# sql - SQL Server 从连接表中选择列以及同一选择语句中的计数

> ID：14471642
> 
> 赞同：2
> 
> 时间：2013-01-23T02:49:05.273
> 
> 标签：sql, count, group-by

目前我正在执行 3 个单独的 SQL 调用。如果可能的话，我想将它们组合成一个，这样我的网格就会正确排序。

我正在使用 4 个单独的表格

BlastAnalytics - 有以下列，粗体是我需要的值... id(primaryKey)、**eventType、BlastID、email、ts、bounceDesc**

BlastJobs - 有以下列，粗体是我需要的值... JobNumber(primaryKey), **MessageFrom, MessageHeader**

BlastOpens - id(primaryKey)、AnalyticsID、ts

BlastClicks - id(primaryKey)、AnalyticsID、ts

连接是... BlastAnalytics.BlastID --> BlastJobs.JobNumber BlastAnalytics.id --> BlastOpens.AnalyticsID BlastAnalytics.id --> BlastClicks.AnalyticsID

目前我运行以下 SQL 语句来绑定我的网格......

```
SELECT BlastAnalytics.eventType, BlastAnalytics.BlastID, BlastAnalytics.email, 
  BlastAnalytics.ts, BlastAnalytics.bounceDesc, BlastJobs.MessageFrom, 
  BlastJobs.MessageHeader
FROM BlastAnalytics INNER JOIN
  BlastJobs ON BlastAnalytics.BlastID = BlastJobs.JobNumber
WHERE (BlastAnalytics.eventType <> 'open') 
 AND (BlastAnalytics.eventType <> 'click') 
 AND (BlastAnalytics.BlastID = @BlastID)
ORDER BY BlastAnalytics.ts DESC 
```

然后在 grid1_RowDataBound 上（创建每个单独的行时）我运行以下语句来获取我的计数...

```
SELECT COUNT(*) AS OpenCount, BlastAnalytics.email
FROM BlastAnalytics INNER JOIN
  BlastOpens ON BlastAnalytics.id = BlastOpens.AnalyticsID
WHERE (BlastAnalytics.BlastID = @BlastID) 
  AND (BlastAnalytics.email = @email)

SELECT COUNT(*) AS ClickCount, BlastAnalytics.email
FROM BlastAnalytics INNER JOIN
  BlastClicks ON BlastAnalytics.id = BlastClicks.AnalyticsID
WHERE (BlastAnalytics.BlastID = @BlastID) 
  AND (BlastAnalytics.email = @email) 
```

这一切都很好，但我认为我应该能够使用 GROUP BY 或其他东西将这些语句组合成一个，但我不知道如何。

**编辑**

这是表中数据类型的示例...

BlastOpens 表

```
id     AnalyticsID    ts     BlastID
2958   38289   1358546399   479
2959   38852   1358546391   479
2960   38280   1358546391   479
2961   38280   1358546400   479
2965   38282   1358546396   480
2986   38284   1358546398   480 
```

BlastAnalytics 表

```
id  eventType   BlastID   email   ts   bounceDesc
38280   open   479  blahblah@blah.com   1358546555  NULL
38289   open   479  blahblah@blah.com   1358546555  NULL
38352   open   479  itsa@test.com   1358550528  NULL
38115   send   479  blahblah@blah.com   1358545375  NULL 
```

因此，在上面的示例中 blahblah@blah.com 的总打开数为 3，itsa@test.com 的总打开数为 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:54:26.437

虽然我没有对此进行测试，但假设您的 RDBMS 支持子查询，这样的事情应该可以工作：

```
SELECT BlastAnalytics.eventType, BlastAnalytics.BlastID, BlastAnalytics.email, 
   BlastAnalytics.ts, BlastAnalytics.bounceDesc, BlastJobs.MessageFrom, 
   BlastJobs.MessageHeader, 
   BO.OpenCount,
   BC.ClickCount
FROM BlastAnalytics 
   INNER JOIN BlastJobs ON BlastAnalytics.BlastID = BlastJobs.JobNumber
   LEFT JOIN (
      SELECT COUNT(*) AS OpenCount, BlastAnalytics.BlastID, BlastAnalytics.email
      FROM BlastAnalytics INNER JOIN
         BlastOpens ON BlastAnalytics.id = BlastOpens.AnalyticsID
      GROUP BY BlastAnalytics.BlastID, BlastAnalytics.email
   ) BO ON BlastAnalytics.BlastID = BO.BlastID AND BlastAnalytics.Email = BO.Email
   LEFT JOIN (
      SELECT COUNT(*) AS ClickCount, BlastAnalytics.BlastID, BlastAnalytics.email
      FROM BlastAnalytics INNER JOIN
         BlastClicks ON BlastAnalytics.id = BlastClicks.AnalyticsID
      GROUP BY BlastAnalytics.BlastID, BlastAnalytics.email
   )  BC ON BlastAnalytics.BlastID = BC.BlastID AND BlastAnalytics.Email = BC.Email
WHERE (BlastAnalytics.eventType <> 'open') 
   AND (BlastAnalytics.eventType <> 'click') 
   AND (BlastAnalytics.BlastID = @BlastID)
ORDER BY BlastAnalytics.ts DESC 
```

祝你好运。

# .htaccess - .htaccess 中的 AddDefaultCharset UTF-8 安全吗？

> ID：14471643
> 
> 赞同：4
> 
> 时间：2013-01-23T02:49:17.227
> 
> 标签：.htaccess, utf-8

很长的故事，但是我的网站有问题，在我的网站内的任何页面/链接导航之间都会有一个空白的白色页面闪烁。仅在 Firefox 中发生，并且仅在较新版本的 Firefox 中发生（例如，未出现在 3.6.x 版本中）。

在比较了来自两个不同服务器的响应标头之后，从另一个服务器提供服务的站点没有这个问题——我注意到它的响应标头中有这个：

```
Content-Type text/html; charset=UTF-8 
```

我的正常服务器确实有问题，它的响应头中有这个：

```
Content-type text/html 
```

所以，我将此行添加到我的 .htaccess 中，问题就消失了：

```
AddDefaultCharset UTF-8 
```

我的问题：

1.  Content-Type 没有指定字符集是什么原因，这可能导致 Firefox 在我的网站页面之间闪烁（如 10 毫秒）总空白白屏？

2.  既然我解决了问题，我的解决方法“ok”吗？它是安全的，还是很有可能破坏其他东西？

我的快速测试没有显示问题，但不知道它可能导致什么副作用，或者它解决我的页面闪烁问题的原因，这让我很困扰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:05:02.820

我假设您的网站主要提供英文内容，并且由于 utf-8 与大多数英文字符编码兼容，我会说这种方法相当安全。如果没有，您需要对这些内容进行相应的更改。

顺便说一句，大多数 HTTP 服务器还有一个全局默认字符集配置，理论上比 .htaccess 设置更有效。在大多数由 PHP、Java 编写的 Web 应用程序中，无论是哪种语言，应用程序本身最好清楚地说明它正在使用哪种编码。

对于火狐刷机部分，根据我以往的浏览器开发经验，如果响应头中没有说明，浏览器需要自动检测你的编码。因此，如果最初假定的编码与检测到的不同，浏览器需要强制页面重排。只是一个粗略的猜测，出于实际原因，我认为 firefox 邮件列表应该是一个更好的去处。

# sql-server - 安排 SQL Server 查询 csv 文件导出到远程服务器

> ID：14471645
> 
> 赞同：0
> 
> 时间：2013-01-23T02:49:20.890
> 
> 标签：sql-server, csv, scheduled-tasks

我需要安排查询并将结果导出到远程服务器上的 csv 文件。

```
SELECT *
  FROM [Database1].[dbo].[Trans]
    WHERE dat_TransDate >= dateadd(day,datediff(day,1,GETDATE()),0)
        AND dat_TransDate < dateadd(day,datediff(day,0,GETDATE()),0)

UNION ALL
SELECT *
  FROM [Database2].[dbo].[Trans]
    WHERE dat_TransDate >= dateadd(day,datediff(day,1,GETDATE()),0)
        AND dat_TransDate < dateadd(day,datediff(day,0,GETDATE()),0)

UNION ALL etc... 
```

此结果需要保存到 \\A_Server\Share。
调度任务很好，只需要导出到 csv。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:24:13.857

您有几个选项可以将查询结果导出到 csv 文件。

可能你最强大，给你最大的灵活性，将是创造一份`SSIS`工作。然而，这可能需要编码超出您正在寻找的内容。

您也可以考虑使用`SQLCommand`or `BCP`。我建议创建数据视图（但您可以使用动态 sql）。

只需为每个搜索适当的语法。

祝你好运。

# php - 如何在不提交的情况下获取复选框值？

> ID：14471646
> 
> 赞同：1
> 
> 时间：2013-01-23T02:49:25.990
> 
> 标签：php, html, checkbox

我有一个像这样的复选框..

```
<form action='index.php' method='post'>
    <input type='checkbox' name='checkme' value='Yes' /> 
    Include Inactive Keys 
</form> 
```

我在网页的最底部还有一个提交按钮。但是当我点击提交按钮时，我希望它也能获取复选框的值（无论它是否被点击）。我怎样才能抓住价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T02:58:09.367

如果您想在提交之前查看复选框项目的值，可以通过**javascript 或 jquery**完成。

**您可以通过document.getElementsByName("checkme")[0]**获取复选框项的值。

但是，除非您在同一页面上处理提交，否则您仍然难以在提交表单时获取复选框值。

如果您在同一页面中处理表单提交，您可以使用上面的代码来获取每个复选框的值，即使是那些未选中的复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:02:40.090

如果您单击按钮：您可以通过 php 脚本获取值。索引.php：

```
var_dump($_POST); 
```

如果您没有单击该按钮，则可以通过 javascript 获取该值。例如

```
<input type='checkbox' name='checkme' value='Yes' onclick="postValue(this.value)"/>

function postValue(var para){
  //post the para to php script by ajax that you must master.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T02:52:27.183

由于复选框是表单的一部分，它将被提交。

您可以通过这样做来获取价值`$value_of_checkbox = $_POST['checkme'];`

编辑，您还应该检查是否预先设置了该值，使用类似：`if(isset($_POST['checkme'])) { ...`

# c# - Control.DoubleBuffered 和 Control.SetStyle 之间的区别

> ID：14471647
> 
> 赞同：2
> 
> 时间：2013-01-23T02:49:49.210
> 
> 标签：c#, winforms

`Control.DoubleBuffered`在幕后和实践中有何`Control.SetStyle`不同？`ControlStyles.DoubleBuffer`

`ControlStyles.DoubleBuffer`此外和 和有什么区别`ControlStyles.OptimizedBuffer`？[文档页面](http://msdn.microsoft.com/en-us/library/system.windows.forms.controlstyles.aspx)上定义的差异并不是很清楚。

最后，为什么文档中规定两者`ControlStles.OptimizedDoubleBuffer`和都`ControlStyles.DoubleBuffer`需要伴随`ControlStyles.UserPaint`和`ControlStyles.AllPaintingInWmPaint`？

这些问题与 Windows 窗体应用程序 (GDI+) 有关。例如，我不知道这些方法是否存在，`WPF`但如果存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:32:15.740

DoubleBuffered 属性是在 .NET 版本 2 中添加的便利属性。由于过时的 DoubleBuffer 样式标志和新的 OptimizedDoubleBuffer 样式，到那时样式标志变得难以弄清楚。将该属性设置为 true 会设置所有正确的样式标志，这样您就可以获得最大的收益。包括 AllPaintingInWmPaint，它也需要打开才能让 OnPaintBackground 与 OnPaint 同时完成，即使它们通常在不同的时间运行。重要的。

始终偏爱该属性，使用样式标志只会导致错误并损害可读性。

# design-patterns - 使用有限状态机对复杂行为进行建模有哪些替代方法？

> ID：14471653
> 
> 赞同：7
> 
> 时间：2013-01-23T02:50:11.773
> 
> 标签：design-patterns, state-machine

我已经阅读了有关使用有限状态机的许多缺点，但还没有真正看到任何用于建模复杂行为的替代模式 - 有吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:08:47.237

你能给我们一些参考吗？我通常会看到 FSM 用光彩照人的方式写的。如果您真的拥有 FSM，那么它们实施起来并不难，并且具有很多优势。很多时候，虽然，人们认为他们有一个 FSM，但他们真正拥有的是一些简单的程序性的东西，通过几个步骤进行。如果是这种情况，那么要考虑的关键替代方案是设计模式[Template Method](http://en.wikipedia.org/wiki/Template_method_pattern)。

FSM 真正发挥作用的地方，是在模板方法可以做的事情之外做的事情，是当从一个阶段到另一个阶段的进展存在限制时。例如，如果我们在模拟准备纳税申报表之类的事情，那么所有初步的收入收集和总工资的计算都是在第一阶段完成的，在工资完成之前应该没有办法开始计算扣除额。（这是一个人为的例子，但想象一下状态转换还有其他先决条件。）

根据四人帮中的示例，模板方法可以在抽象类中强制执行某些操作必须按顺序执行一系列步骤的事实。模板方法的有趣之处在于您隐藏了这些细节并迫使子类仅提供所需步骤/方法的实现。

# video - 限制 S3 对象访问来自特定域的请求

> ID：14471661
> 
> 赞同：6
> 
> 时间：2013-01-23T02:51:30.313
> 
> 标签：video, amazon-web-services, amazon-s3, video-streaming

我在 S3 中有视频文件和一个通过 src 属性加载文件的简单播放器。

我希望视频只能通过我的网站查看，而不是直接通过 S3 URL（可能在页面的源代码中可见或通过右键单击访问）

浏览 AWS 文档，似乎我可以通过 HTTP 执行此操作的唯一方法是将签名和到期日期附加到查询中，但这还不够。其他访问限制涉及 AWS 用户。

我如何解决这个问题或实现这个服务器/客户端？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T04:57:30.550

我认为存储桶策略（您可以从管理界面设置）可以做到这一点。语法有一些变化（例如，您可以围绕**拒绝**或**允许**条件构建策略）并过滤特定的文件名，但我更喜欢将媒体类型拆分为离散的存储桶

```
{
"Version": "2008-10-17",
"Id": "Restrict based on HTTP referrer policy",
"Statement": [
    {
        "Sid": "1",
        "Effect": "Deny",
        "Principal": {
            "AWS": "*"
        },
        "Action": "s3:GetObject",
        "Resource": "arn:aws:s3:::mybucket/myprefix/*",
        "Condition": {
            "StringNotLike": {
                "aws:Referer": [
                    "http://www.mydomain.com/*",
                    "http://www.subdomain.mydomain.com/*"
                ]
            }
        }
    }
]
} 
```

# html - 如何使左浮动和右浮动在同一条线上？

> ID：14471662
> 
> 赞同：12
> 
> 时间：2013-01-23T02:51:36.767
> 
> 标签：html, css, css-float

**问题**：

```
     **左边部分**（#nav ul li）浮动：left
     和**右侧部分**（#nav .search）浮动：对
            **不在一条线上**。

```

**它应该是这样的：** ![在此处输入图像描述](../Images/5e12ce62f6f6eb570c63915c99481bef.png)

**但我的：** ![在此处输入图像描述](../Images/8c33eb64701755c63a9862ee4fcce6e9.png)

**的HTML：**

```
<div id="nav">
   <ul>
     <li><a href="#">Home</a></li>
     <li><a href="#">Portfolio</a></li>
     <li><a href="#">Blog</a></li>
     <li><a href="#">Contact</a></li>
   </ul>
   <div class="search">
     <input type="text" name="search" id="search" value="search">
   </div> 
```

**CSS：**

```
#nav ul li{
float: left;
list-style: none;
margin: 0 20px;
}

#nav .search{
float: right;
} 
```

* * *

**我的解决方案：**

**解决方案1**：使用**bootsrap**来构建布局，而不是自己做，我在页脚上使用它，它完全在同一行！但是我仍然不知道它是如何工作的 ![在此处输入图像描述](../Images/3d5cad83296f1094fd2b1ca5a1930420.png)

**解决方案 2**：我使用**margin-top: -20px**拉起搜索框，但我认为这不是一个好习惯。

任何人都可以帮忙吗？非常感谢！

* * *

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-08-08T07:55:42.010

已经提到的解决方案的替代方案是翻转标记的顺序，以便右浮动项首先出现。

```
#nav ul li {
  float: left;
  list-style: none;
  margin: 0 20px;
}
#nav .search {
  float: right;
}
```

```
<div id="nav">
   <div class="search">
     <input type="text" name="search" id="search" value="search">
   </div>       
   <ul>
     <li><a href="#">Home</a></li>
     <li><a href="#">Portfolio</a></li>
     <li><a href="#">Blog</a></li>
     <li><a href="#">Contact</a></li>
   </ul>
</div>
```

你不必做任何其他事情。不需要其他 CSS 或标记。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-23T02:54:53.390

它不能按预期工作的原因是`<ul>`左侧的 向右侧扩展，从而将内容向下推。解决方案可能是为左右区域设置一个明确的固定宽度，这是我过去遇到这种情况时所做的。但是会说浮动甚至绝对定位的混合最终会起作用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T03:08:07.930

您必须使用绝对定位并使用左右对齐。

```
#nav ul, #nav .search {
    margin: 5px;
    position: absolute;
    display: inline-block;
} 
```

检查这里[http://jsfiddle.net/A8SyJ](http://jsfiddle.net/A8SyJ)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T03:06:26.013

您是否尝试将搜索添加为导航中的另一个列表项并将其浮动到右侧？

`<li class="search"><input type="text" name="search" id="search" value="search"></li>`

请参见下面的示例：

[http://jsfiddle.net/teWP5/](http://jsfiddle.net/teWP5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T10:20:57.490

您可以将 float:left 用于 ul 并将 float:right 用于搜索框

# objective-c - 分配与任何东西等 Viewunload viewload 等

> ID：14471664
> 
> 赞同：0
> 
> 时间：2013-01-23T02:51:47.337
> 
> 标签：objective-c

我是objective-c的新手。

我有 2 个不相关的问题。

*   创建实例变量或属性时必须经过哪些过程？比如我一般在interface部分定义变量，然后给它创建一个属性，然后合成，然后在viewUnload部分设置为nil。

即使我为它创建了一个属性，我是否必须在接口部分定义变量？何时必须在 viewUnload 部分将变量设置为 nil？

*   定义属性时，强、弱、非原子、原子、分配等有什么区别？我什么时候应该强，弱，非原子，原子，分配等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:16:12.297

> 创建实例变量或属性时必须经过哪些过程？

合成一个属性是声明它的ivar，并定义访问器方法，而不是分配和初始化它。您需要在适当的时间点对其进行初始化（通常在对象实例的初始化过程中，`-init*`或者在视图即将显示之前，例如在 中`-viewDidLoad`）。

> 定义属性时，强、弱、非原子、原子、分配等有什么区别？我什么时候应该强，弱，非原子，原子，分配等？

strong、weak、assign 是改变对象实例引用方式的修饰符。请参阅自动引用计数的文档。（[维基百科](http://en.wikipedia.org/wiki/Automatic_Reference_Counting)和[Apple 的文档](https://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)）

非原子和原子是改变访问器合成方式的修饰符。请参阅[this的](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW31)**声明属性**部分。

> 即使我为它创建了一个属性，我是否必须在接口部分定义变量？

不。就目前而言，您不需要这样做，因为最新 SDK 中的编译器会为您完成这些工作。例如，如果您声明了一个属性：`@property (strong, nonatomic) NSData *data1;`，那么您将`NSData *_data1`免费获得 ivar，即使您省略了 @synthesize 语句。

> 何时必须在 viewUnload 部分将变量设置为 nil？

不，顺便说一句，`-viewDidUnload`在 iOS 6.0 中已弃用。

# node.js - 如何使用 travis-ci 的 .travis.yml 为 Node.js 应用程序提供环境参数？

> ID：14471666
> 
> 赞同：6
> 
> 时间：2013-01-23T02:51:59.670
> 
> 标签：node.js, environment-variables, travis-ci

我使用 travis-ci 来测试我的 node.js 应用程序。因为应用程序需要用户使用 Access Key 和 Secret Key 登录进行测试，所以我需要在 travis-ci 的 .travis.yml 文件中指定这两个密钥。那么我该怎么做呢？以及如何在 Node 中获取这些环境参数？

喜欢这两个参数：[https ://github.com/ikbear/nodejs-sdk/blob/feature/copy_and_move_file/test/rs.test.js#L22](https://github.com/ikbear/nodejs-sdk/blob/feature/copy_and_move_file/test/rs.test.js#L22)

我想像这样在 .travis.yml 中指定它们：

```
language: node_js
node_js:
  - 0.8
  - 0.6
  - 0.4
env:
  - QINIU_ACCESS_KEY = '2FRuiVGEsA511NS9pNd2uvuSB3k5ozXE_DHCH8Ov' QINIU_SECRET_KEY = 'CIRtcmymB3VeIfXebFvYxmMmH9u2oLKW6rffVvoK' 
```

那么如何从我的这个测试文件中获取 QINIU_ACCESS_KEY 和 QINIU_SECRET_KEY 呢？[https://github.com/ikbear/nodejs-sdk/blob/feature/copy_and_move_file/test/rs.test.js](https://github.com/ikbear/nodejs-sdk/blob/feature/copy_and_move_file/test/rs.test.js)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T03:51:21.550

**更新**：Travis 现在支持通过其 Web 用户界面[直接在构建存储库中定义变量。](https://docs.travis-ci.com/user/environment-variables/#Defining-Variables-in-Repository-Settings)因此，除非您需要为[**.travis.yml**](https://docs.travis-ci.com/user/environment-variables/#Defining-encrypted-variables-in-.travis.yml)[文件](https://docs.travis-ci.com/user/environment-variables/#Defining-encrypted-variables-in-.travis.yml)[手动生成本地加密变量](https://docs.travis-ci.com/user/environment-variables/#Defining-encrypted-variables-in-.travis.yml)**（根据下面的原始答案），否则这似乎是让环境变量与 Travis CI 一起使用的最简单方法。**

 *** * *

我不确定关于 Node.js 的细节，但如果你想在你的**.travis.yml**`QINIU_ACCESS_KEY`中使用和而不是纯文本，让它们成为[安全的环境变量](http://about.travis-ci.org/docs/user/build-configuration/#Secure-environment-variables)：`QINIU_SECRET_KEY`

 **第 0 步：安装 travis gem（如果您还没有[安装 Rubygems](http://docs.rubygems.org/read/chapter/3)`travis` ；不确定是否有另一种方法来获取命令或另一种方法来执行下面的第 1 步）：

```
$ gem install travis 
```

第 1 步：加密值，记下结果：

```
$ travis encrypt QINIU_ACCESS_KEY=2FRuiVGEsA511NS9pNd2uvuSB3k5ozXE_DHCH8Ov
$ travis encrypt QINIU_SECRET_KEY=CIRtcmymB3VeIfXebFvYxmMmH9u2oLKW6rffVvoK 
```

第 2 步：将值添加到您的**.travis.yml**文件中：

```
env:
  global: 
    - secure: {{ENCRYPTED_QINIU_ACCESS_KEY}}
    - secure: {{ENCRYPTED_QINIU_SECRET_KEY}} 
```

（多个键调用`secure`没问题）

下次您的应用程序通过 Travis 时，您应该会在 Config 行看到：

> 环境：QINIU_ACCESS_KEY=[安全] QINIU_SECRET_KEY=[安全]

更多可能有帮助的 StackOverflow 问答（它在 Ruby on Rails 上下文中，但他们处理这个问题）在这里：

*   [如何从 travis-ci 在 Heroku 上部署 Rails 应用程序？](https://stackoverflow.com/q/10235026/567863)
*   [在 travis-ci 上使用秘密 api 密钥](https://stackoverflow.com/q/9338428/567863)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-02T18:57:46.167

在这里阅读（在 Travis-CI 中使用环境变量！）--> [https://github.com/dwyl/learn-environment-variables#using-environment-variables-with-travis-ci-](https://github.com/dwyl/learn-environment-variables#using-environment-variables-with-travis-ci-)

另外，要了解有关 Travis 的更多信息，请阅读此处（学习 Travis）--> [https://github.com/dwyl/learn-travis](https://github.com/dwyl/learn-travis)****

# jquery - .toggle() 只隐藏它的目标元素，而不是在交替点击时切换状态

> ID：14471673
> 
> 赞同：0
> 
> 时间：2013-01-23T02:52:43.497
> 
> 标签：jquery

我正在尝试创建一个按钮，该按钮可以在每次单击时切换两个元素的可见性......这在几天前工作正常，但现在在页面加载时它隐藏了按钮。我发现 .toggle 也可以显示/隐藏元素，但是如何使用它在交替点击时在功能之间切换？

JS：

```
$("#button").toggle(
     function(){
          $('#stuff1').hide("slow");
          $('#stuff2').show("slow");
     },
     function(){ 
          $('#stuff1').show("slow");
          $('#stuff2').hide("slow"); 
     }
); 
```

HTML：

```
<img id="button" src="button.jpg"/>
<p id="stuff1">stuff</p> 
<p id="stuff2">stuff</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:55:01.470

它停止为您工作的原因是因为此`toggle`重载在 1.8 中已被弃用，但您没有注意到，并在 1.9 中被删除，直到现在您才注意到：

```
.toggle( handler(eventObject), handler(eventObject) [, handler(eventObject) ] ) 
```

**不推荐使用的版本：1.8，已删除：1.9**

使用使用`toggle`功能：

```
$("#button").click(function(){
      $('#stuff1').toggle("slow");
      $('#stuff2').toggle("slow");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:02:04.173

试试这个

**jQuery**

```
$("#button").click(
     function(){         
          $('#stuff1').toggle("slow");
          $('#stuff2').toggle("slow");
     }

); 
```

**CSS**

```
#stuff1
{
    display:none;
} 
```

# javascript - 通过 xmlhttprequest 连接到 API 服务器的问题

> ID：14471676
> 
> 赞同：0
> 
> 时间：2013-01-23T02:53:00.763
> 
> 标签：javascript, xmlhttprequest

我正在尝试创建一个简单的[Pocket](http://getpocket.com) Web 应用程序，该应用程序将连接到他们的 API 并首先进行身份验证，然后检索经过身份验证的用户的书签。不幸的是，我正在使用连接到他们的服务，因为我在这个领域真的没有经验。

*我在获取请求令牌的文档身份验证过程的第 2 步失败。*

到目前为止我得到的是：

```
var url = "https://getpocket.com/v3/oauth/request";
var data = "consumer_key=censored&request_uri=foo.bar/success";

function post(url, data, parameters){
    var request;
    try{
        request = new XMLHttpRequest();
    }catch(e){
        request = false;
    }
    if(request !== false){
        request.open("POST", url, true);
        request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        // request.setRequestHeader("Access-Control-Allow-Origin", "*");
        request.send(data);
        request.onreadystatechange = function(){
            console.log(request.responseText);
        };
    }else{
        console.log("Couldn't create a new XmlHttpRequest Object");
    }
}

post(url, data); 
```

我知道现代浏览器会阻止跨域请求，但我不确定如何在不使用代理的情况下修复它。该文档没有提及任何内容（或者确实提及但我不明白如何）。我知道通过 JSONP 我可以解决这个问题，但我不确定如何判断他们的 API 是否支持（或如何实现它）。他们只提到 2 个选项：

1.  应用程序/x-www-form-urlencoded（默认）
2.  应用程序/json

这是我得到的错误：

```
XMLHttpRequest cannot load https://getpocket.com/v3/oauth/request. Origin http://localhost is not allowed by Access-Control-Allow-Origin. 
```

[口袋 v3 API](http://getpocket.com/developer/docs/authentication)

## 编辑

我刚刚完成了创建 json 版本的尝试，以查看这个版本是否有效，但似乎我做错了什么（再次）。

```
var url = "https://getpocket.com/v3/oauth/request";
var data = {};
data.comsumer_key = "censored";
data.request_uri  = "foo.bar/success";

function post(url, data, parameters){
    var request;

    try{
        request = new XMLHttpRequest();
    }catch(e){
        request = false;
    }

    if(request !== false){
        request.open("POST", url, true);
        request.setRequestHeader("Content-type", "application/json");
        request.setRequestHeader("X-Accept", "application/json");
        request.setRequestHeader("Access-Control-Allow-Origin", "*");
        request.send(JSON.stringify(data));
        request.onreadystatechange = function(){
            console.log(request.responseText);
        };
    }else{
        console.log("Couldn't create a new XmlHttpRequest Object");
    }
}
post(url, data); 
```

## 编辑编号 2

[我在这里](http://pocket.aklp.gr/)上传了一个现场演示，我想调试起来会更容易

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:25:28.553

我看到几个问题：

首先，XMLHttpRequest 受到同源限制，因此这是您因同源原因而被拒绝访问的主要原因。您需要做一个实际的表单发布，而不是 XMLHttpRequest。请参阅此处以获取解释：[为什么 $.post() 受同源策略约束，但提交带有 method='POST' 的表单好吗？](https://stackoverflow.com/questions/9033513/why-is-post-subject-to-same-origin-policy-but-submitting-a-form-with-method)

其次，根据我在这里看到的袖珍文档[http://getpocket.com/developer/docs/authentication](http://getpocket.com/developer/docs/authentication)，您需要发送`redirect_uri`参数，而不是`request_uri`步骤 2 中的参数，并且它需要是返回应用程序的完整 URL，不是相对 URI。

# php - 如何选择多个复选框并保存到我的数据库中

> ID：14471677
> 
> 赞同：0
> 
> 时间：2013-01-23T02:53:08.173
> 
> 标签：php, javascript, mysql, mysqli

我在这里有我的代表.php 代码，这些数据是从 javscript 函数在我的数据库中调用的。当我单击我的提交按钮时，它没有返回任何内容，因为我回显了已检查的人员（代表）。只有我知道以静态形式获取多个复选框的值，但这一次真的让我很困惑，因为这个是动态的。另一件事是我如何将选定的值保存到我的数据库中，因为我仍然不知道应该如何保存它.. 请...

```
<?php session_start(); ?>
<?php

// server info
$server = 'localhost';
$user = 'root';
$pass = 'root';
$db = 'user';
// connect to the database
$mysqli = new mysqli($server, $user, $pass, $db);
// show errors (remove this line if on a live site)
mysqli_report(MYSQLI_REPORT_ERROR);
?>
<?php
if ($_POST['submit']){
    $check = $_POST['representatives'];
    foreach ($check as $ch){
        echo $ch."<br>";
    }

} ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<html>
    <head>  
        <script type="text/javascript">
        function get_representatives_value()
        {
            for (var i=0; i < document.list.representatives.length; i++)

            {
                if (document.list.representatives[i].checked = true)
                {
                    var candidate = document.list.representatives[i].checked;

                }
                document.president.radio[i].value;
            }
        }
        }
        </script>
        <title></title>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <link href="candidate.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <form name="list" action="president2.php" method="post"  onClick="get_president_value">
            <div id="form"> 
            <?php
            // get the records from the database
            if ($result = $mysqli->query("SELECT * FROM candidate_info WHERE position= 'representatives' ORDER BY cand_id"))
            {
            // display records if there are records to display
                if ($result->num_rows > 0)
                {
                    // display records in a table
                    echo "<table border='1' cellpadding='10'>";
                    // set table headers

                    echo "<tr><th>Student ID</th><th>Candidate ID</td><th>Course</th><th colspan = '3'>Name</th></tr>";
                    while ($row = $result->fetch_object())
                    {
                        // set up a row for each record
                        echo "<tr>";
                        echo "<td>" . $row->cand_studid . "</td>";
                        echo "<td>".$row->cand_id."</td>"; 
                        echo "<td>" . $row->course . "</td>";
                        echo "<td coslpan ='5'>" . $row->fname . " ". $row->mname ." ". $row->lname ." </td>";
                        echo "<td><input type ='checkbox' name='representatives[]' id='". $row->studid ."' value='" . $row->fname . " ". $row->mname ." ". $row->lname .  "'onchange='get_representatives_value()' /></td>";
                        echo "</tr>";
                    }
                    cho "</table>";
                }
                // if there are no records in the database, display an alert message
                else
                {
                    echo "No results to display!";
                }
            }
            // show an error if there is an issue with the database query
            else
            {
                echo "Error: " . $mysqli->error;
            }

            // close database connection
            $mysqli->close();
            echo "<input type='submit' value='Submit'/>";
            ?>
            </div>
        </form>
    </body>
</html> 
```

这是我的输出representative.php的预览。选项卡

![在此处输入图像描述](../Images/32ffe708eed3c2ae6ccf1ef2bbf23f8b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:30:30.637

改变

```
 echo "<input type='submit' value='Submit'/>"; 
```

至

```
 echo "<input type='submit' name='submit' value='Submit'/>"; 
```

或者

改变

```
 if ($_POST['submit']){ 
```

至

```
 if ($_POST['representatives']){ 
```

什么都没有发生，因为根据您的情况，您正在检查是否`$_POST['submit']`已设置，当您的`$_POST`. 你刚刚给出`type='submit'`和`value='submit'`。的名称或索引在哪里`$_POST`。只需添加缺少的提交输入元素的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:29:32.027

使用您提供的代码，在 PHP 代码中，您可以使用 $_POST["representatives"] 获取所选复选框的学生 ID 数组。

示例 PHP 代码：

```
//dump out to see the student IDs of selected checkboxes
var_dump($_POST["representatives"]);

//print out the list of student IDs of selected checkboxes
foreach ($_POST["representatives"] as $studid)
  echo $studid.chr(32); 
```

从这个学生 ID 列表中，您可以进行查询以更新您的数据库。我不知道你想对数据库进行什么操作，所以我只能建议这么多。

请记住，只有选中的复选框才会提交到服务器。这意味着对于您提供的示例，前 2 个学生被选中，然后服务器将仅接收从 $_POST["representatives"] 获取的数组中的**c-27327**和**c-7262两个项目。**

# ms-access - 刷新/重新查询组合框问题

> ID：14471679
> 
> 赞同：2
> 
> 时间：2013-01-23T02:53:49.973
> 
> 标签：ms-access, vba, ms-access-2003

下午，

我在 ComboBox 所在的表单打开时更新它时遇到问题。

我的数据在表单打开时发生了变化，因此 ComboBox 需要刷新，但我不知道如何。似乎唯一的方法是关闭然后重新打开表单，但我不是真的

ComboBox 的原始源是一个简单选择查询。我尝试过使用 requery，但它似乎没有做任何事情。

```
Sub ComboBox_GotFocus()

Me.ComboBox.Requery

End Sub 
```

有任何想法吗？

干杯，迈克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:07:06.990

清空并重新填充组合框。
最简单的是：

```
sSQL_Select = "SELECT * FROM SOMETABLE" 

Me.lstListBox.RowSource = "" 
Me.lstListBox.RowSource = sSQL_Select 
```

除了使用 SQL 查询，您还可以显式地将值添加到列表框。
在此您可以执行以下操作：

```
Dim iList_Cnt As Integer
Dim iCnt As Integer

iList_Cnt = Me![lstListBox].ListCount

For iCnt = 0 To iList_Cnt - 1
    Me![lstListBox].RemoveItem 0
Next 
```

然后重新填充列表框：

```
lstListbox.AddItem("Smtg_Col1;Smtg_Col2;Smtg_Col3") 
```

循环组合框以添加多行。

# visual-c++ - 未处理的异常@ClearRenderTargetView()

> ID：14471680
> 
> 赞同：0
> 
> 时间：2013-01-23T02:53:55.247
> 
> 标签：visual-c++, directx, directx-11, direct3d11

所以，我正在使用带有“板载”Windows SDK 8 的 Visual Studio 2012，编写 Direct3D11 应用程序，但我遇到了一个大问题。我有一个类可以处理 D3D11 之上的所有初始化、设置和绘制调用。我用它需要知道的所有数据正确地实例化了包含 D3D11 驱动程序类实例的应用程序类。

D3D11 驱动程序类构造函数获取应用程序的主窗口句柄并使用它将 D3D 挂钩到应用程序的主窗口。它正确地构建自己并返回`app->run()`驱动主循环的调用位置。

在主循环中，调用该驱动程序来简单地测试绘制一个带红色的空白屏幕。观察调试信息，有问题的渲染目标是可操作的，创建是为了将交换链中的后备缓冲区绑定到管道。

`renderTargetView` **不为空。HRESULT 被验证为 S_OK。**

如果我尝试在 D3D11 驱动程序类构造函数中调用 Draw 函数，它可以工作。**它不会在调用之间被释放。**

就像 Application 类的构造函数在 run() 函数之前没有完成一样，如果我尝试继续而不退出几个“帧”向前，则清除的渲染目标会显示为红色。有人可以启发我吗？我已经走投无路了。

**它不为空。HRESULT 被验证为 S_OK。有报道称这已在 Windows 8 中得到修复，而 Win7 SDK 仍然受到影响。谷歌没有产生任何有用的东西，大多数人忘记为 OMGetRenderTargets 创建渲染目标视图（保持 NULL）或智能感知错过 OMSetRenderTargets。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T03:11:02.753

当您取消引用空指针时，几乎完全丢弃未处理的异常。`ClearRenderTargetView()`是**有效初始化**（立即）上下文的实例方法，或

`ID3D11DeviceContext::ClearRenderTargetView(...)`

如果您没有犯不初始化渲染目标视图或调用`OMGetRenderTargets(...)`而不是调用的小错误`OMSetRenderTargets(...)`，我绝对可以肯定您的上下文为空。根据您的陈述，您明确否认犯了这些错误。

用于`assert`验证我的声明，即您的上下文确实为 NULL。由于它在您的驱动程序构造函数中工作，并且以后不会用作应用程序类的成员，因此您可能没有在驱动程序类中提供正确的复制赋值运算符，这就是它丢弃未处理异常框的原因，它初始化上下文，然后由于缺少参考副本而不会持续存在。当对象被初始化时，它是部分有效的，这就是它一次工作的原因。

这只是一个假设，我很确定，但是由于您缺少代码，我只能使用我的想象力和逻辑。如果您需要进一步的帮助，请报告。

# javascript - 这个 jQuery 离线工作，但不能在线

> ID：14471681
> 
> 赞同：0
> 
> 时间：2013-01-23T02:53:55.533
> 
> 标签：javascript, jquery, html, json

我有以下脚本：

```
<script type="text/javascript">
    $.getJSON("http://api.twitter.com/1/statuses/user_timeline/koawatea.json?count=1&include_rts=1&callback=?", function(data)
    {
     $("#headertweet").html(data[0].text);
    });
</script> 
```

它创建了一个离线工作的测试文档。但是当我把它放到网上（现场或我的本地 XAMPP 设置）时，这不起作用。

有人可以告诉我为什么吗？

这是CSS：

```
#headertwitterbox {
    width: 200px;
    height: 100px;
    background:url(http://i48.tinypic.com/169ruab.jpg) no-repeat;
    font-family: 'Source Sans Pro', sans-serif;
    font-size: 7pt;
}

#headertweet {
    width: 180px;
    height: 53px;
    float:left;
    margin-left: 10px;
    margin-top: 6px;
} 
```

HTML：

```
<div id="headertwitterbox" style="float:left;">
<div id="headertweet"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:01:49.230

 ~~~~> 是的，它在头上。我已经尝试将它放在脚本标签中并链接到外部 JS 表。~~ 

那将是你的问题。您在加载元素之前调用它，因此它可能找不到该元素，因为它在响应返回时尚未创建。将脚本放在元素之后或在*document ready*`headertweet`上调用它。

 *后：

```
<div id="headertwitterbox" style="float:left;">
<div id="headertweet"></div>
</div>
<script type="text/javascript">
    $.getJSON("http://api.twitter.com/1/statuses/user_timeline/koawatea.json?count=1&include_rts=1&callback=?", function(data)
    {
     $("#headertweet").html(data[0].text);
    });
</script> 
```

在头部准备好文件：

```
<script type="text/javascript">
    $( function () {
        $.getJSON("http://api.twitter.com/1/statuses/user_timeline/koawatea.json?count=1&include_rts=1&callback=?", 
            function (data) {
                $("#headertweet").html(data[0].text);
            }
        );
    });
</script> 
```

 ~~* * *

**编辑 - 已更改，因为您提供了链接并且错误与其他内容有关！**

在示例链接中，您有错误！您在无冲突模式下定义了 jQuery，但您使用的是 $! 将 $ 更改为 jQuery！~~*~~

# php - in_array 与 isset - 性能

> ID：14471682
> 
> 赞同：1
> 
> 时间：2013-01-23T02:54:05.073
> 
> 标签：php, arrays

考虑以下代码片段：

**示例 #1**

```
$array = Array(1,2,3,4,5,6,7);
$array_test = Array(3,5,4,7,3,6,7,8,8,9,3);

foreach($array_test as $value) {
   if(in_array($value, $array)) {
       // do some magic here
   }
} 
```

**示例 #2**

```
$array = Array(1,2,3,4,5,6,7);
$array_test = Array(3,5,4,7,3,6,7,8,8,9,3);

$array_index = Array();
foreach($array as $value) {
    $array_index[ $value ] = true;
}

foreach($array_test as $value) {
   if(isset($array_index[ $value ])) {
       // do some magic here
   }
} 
```

显然，这两个片段都做同样的工作。在某些数组示例中，示例 #1 比示例 #2 快。

我确信我们都处于这两种情况，但是我的问题是：

*   我应该总是选择#2吗？
*   我什么时候应该选择#1？当大小`$array * $array_test`< 10 时？<100？<1000？
*   如何确定在特定情况下哪种方法更好？
*   除了使用 temp table 之外，也许还有其他技巧`$array_index`。我不记得其他编程语言中的类似情况，一切都准备好了

请注意关联键。

有人已经问过非常相似的问题：

*   [什么更快：in_array 或 isset？](https://stackoverflow.com/questions/13483219/what-is-faster-in-array-or-isset)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:01:14.360

在您的第二个示例中，您必须先构造 的“翻转”值，`$array`然后才能使用`isset()`. 顺便说一句，您也可以使用[`array_flip()`](http://www.php.net/array_flip)它。

如果您可以立即使用数组键（无需转换），请使用它，因为它显然比查找键的方式`isset()`快得多，*并且*因为它是一种语言结构。`in_array()`

 *如果您不能在没有转换的情况下使用键，则可以考虑将`in_array()`其用于小型数组。对于更大的阵列，可能值得运行基准测试以确定阵列转换步骤是否仍然值得。

最后，在很大程度上取决于具体情况，您也可以使用其中一个`array_intersect_`函数，主要是为了避免在 PHP 代码中循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-16T15:42:40.657

isset 总是比 in_array 快，因为键是唯一的，而值不是。键是唯一的这一事实提供了值不可能的优化可能性。*

# android - 用于创建新活动的 android 访问向导

> ID：14471684
> 
> 赞同：1
> 
> 时间：2013-01-23T02:54:09.207
> 
> 标签：android, eclipse, adt, wizard

当我使用 Eclipse 中的向导创建一个全新的 android 应用程序时，我总是会得到这样有组织的功能。每次我更新我的 android 工具时，似乎有越来越多的配置可供我选择，自动在 android 活动中生成一些复杂的功能。

当我进行新活动时，如何获取该向导或从其他配置浏览？我通常这样做的方式非常基本，例如自己编写或从我编码的其他项目中复制和粘贴

感谢您的洞察力

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:59:19.947

1.  右键单击项目
2.  选择“新建”
3.  转到“其他”
4.  找到“安卓”
5.  选择“安卓活动”

# java - 如何在 Java/Spring Web MVC 中设置全局变量？

> ID：14471686
> 
> 赞同：0
> 
> 时间：2013-01-23T02:54:35.713
> 
> 标签：java, spring

我想在我的基于 Java/Spring 的网站上有一组全局变量。

我在想这样的事情：

1.  电子邮件发件人（只有 1 个值，因为它是办公室的通用电子邮件）

2.  电子邮件服务器 IP/主机（我们使用自己的 smtp 服务器）

3.  以及其他我无法在短时间内想到的事情。

我进行了搜索，但在哪里/如何做这件事上没有任何有用的信息。

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:16:18.933

对于简单直接的解决方案，我建议您使用存储在 WebContent 目录下的 (config) 目录中的属性文件。以下是有关如何从文件中读取属性的基本代码。（随意根据您的需要对其进行修改。）创建一个接口或类来包含静态属性键。

对于更复杂的方法，您还可以考虑 Apache Commons 配置库。

```
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

public class ConfigurationReader {

private static final String FILE_SEPARATOR_KEY = "file.separator";  
private String configDirectory; // initialised with ServletContext absolute path
private String configFileName;  // filename of the properties file
private Properties properties;

public void init() throws IOException {
    InputStream inputStream = new FileInputStream(getFileConfigPath(configDirectory, configFileName));
    try {
        properties = new Properties();
        properties.load(inputStream);
    }
    finally {
        try {
            inputStream.close();
        }
        catch(Exception e) {}
    }
}

public String getProperty(String key) {
    return properties.getProperty(key);
}

private String getFileConfigPath(String directory, String fileName) {
    StringBuilder sb = new StringBuilder();
    sb.append(directory);
    if(!sb.substring((sb.length() - 1)).equals(System.getProperty(FILE_SEPARATOR_KEY))) {
        sb.append(System.getProperty(FILE_SEPARATOR_KEY));
    }
    sb.append(fileName);        
    return sb.toString();
}

public String getConfigDirectory() {
    return configDirectory;
}

public void setConfigDirectory(String configDirectory) {
    this.configDirectory = configDirectory;
}

public String getConfigFileName() {
    return configFileName;
}

public void setConfigFileName(String configFileName) {
    this.configFileName = configFileName;
}
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-23T03:04:03.270

创建一个具有公共静态变量的类并将它们用作全局变量。如果您希望每个事务的全局变量在 java ThreadLocal 上设置变量并使用它们。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-23T03:49:25.727

如果您希望它是可配置的，请尝试将 DeploymentDescripter (web.xml) 中的那些配置为上下文参数。

```
<context-param>
    <param-name>email</param-name>
    <param-value>xxx@yyyy.com</param-value>
  </context-param> 
```

否则，您可以拥有一个包含常量的 Util 类并将常量变量声明为

```
public static final String EMAIL="xxx@yyy.com"; 
```

# ruby-on-rails - friendly_id：可选择更新 slug

> ID：14471689
> 
> 赞同：1
> 
> 时间：2013-01-23T02:54:54.883
> 
> 标签：ruby-on-rails, model, params, slug, friendly-id

我想允许用户通过单击复选框来 *更新* 条目的 slug。

我知道函数 **should_generate_new_friendly_id 吗？** ，但不是在这种情况下如何使用它，因为它是在模型中定义的并且无法读取 params 属性。

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:51:09.997

在模型上，您可以添加一个 attr_accessor 来测试这种情况

```
attr_accessor :should_generate_new_friendly_id

before_save :generate_new_friendly_id, :if => :should_generate_new_friendly_id

def generate_new_friendly_id
  self.friendly_id = ...
end 
```

然后，在表单中，您可以提供一个名为“should_generate_new_friendly_id”的复选框。这一切都应该像你期望的那样工作......

# android - 捏缩放手势安卓

> ID：14471690
> 
> 赞同：3
> 
> 时间：2013-01-23T02:54:55.290
> 
> 标签：android

android 开发人员页面[http://developer.android.com/design/patterns/gestures.html](http://developer.android.com/design/patterns/gestures.html)列出了捏开和捏合的列表由 android API 支持。但我找不到合适的 API / 方法来做到这一点。大部分这些帖子表明本机捏合不可用。

android 4.1 + 应用程序是否可以使用本机捏合和缩放？如果是这样，那是 API。

（编辑：我是 android 的新手，任何关于如何在像矩形这样的画布中缩放单个元素的指针或资源对我来说都很有价值。谢谢）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T20:28:03.697

查看活动或画布上的手势以进行移动、缩放和旋转： [http ://code.almeros.com/android-multitouch-gesture-detectors#.Udcq_z789cR](http://code.almeros.com/android-multitouch-gesture-detectors#.Udcq_z789cR)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-28T06:31:15.063

您可以使用[ScaleGestureDetector](https://developer.android.com/reference/android/view/ScaleGestureDetector)通过两指触摸检测放大/缩小，或者也可以双击并向上/向下移动，这现在是 Android 上的标准（例如在 Google 地图中使用）。

ScaleGestureDetector 为您提供可以缩放的屏幕点，并在您在屏幕上移动手指时改变比例。

您不仅限于缩放，还可以执行缩放手势产生的其他操作。

# mysql - MySQL预订查询，

> ID：14471691
> 
> 赞同：1
> 
> 时间：2013-01-23T02:54:56.847
> 
> 标签：mysql

我有两张桌子：

```
|| *id* || *calendar_type* || *event_name* || *event_details* || *start_date* || *end_date* || *closed_date* || *time_start* || *time_end* ||
|| 1 || OPEN || AVAILABLE BLOCK || _NULL_ || 2013-01-01 || 2013-12-31 || 0000-00-00 || 08:00:00 || 08:59:00 ||
|| 2 || OPEN || AVAILABLE BLOCK || _NULL_ || 2013-01-01 || 2013-12-31 || _NULL_ || 09:00:00 || 09:59:00 ||
|| 3 || OPEN || AVAILABLE BLOCK || _NULL_ || 2013-01-01 || 2013-12-31 || _NULL_ || 10:00:00 || 10:59:00 ||
|| 4 || OPEN || AVAILABLE BLOCK || _NULL_ || 2013-01-01 || 2013-12-31 || _NULL_ || 13:00:00 || 13:59:00 || 
```

和 Appointment_Calendar 表：其中包含可用时间段和已关闭时间段的日期和时间。

```
|| *id* || *start_time* || *duration_min* || *customer_id* || *consignee* || *trucker_name* || *email* || *phone* || *pallet_total* || *freight_type* || *notes* || *reserved_on* || *is_cancelled* ||
|| 1 || 2013-01-22 09:00:00 || 01:00:00 || 0 ||  || Testing ||  ||  || 20 || DELIVERY || this is a test || 2013-01-22 19:15:06 || 0 ||
|| 2 || 2013-01-22 10:00:00 || 01:00:00 || 0 ||  || Trucker 2 ||   ||  || 12 || DELIVERY ||  || 2013-01-22 19:16:37 || 0 ||
|| 4 || 2013-01-23 08:00:00 || 01:00:00 || 0 ||  || Trucker 3 ||  ||  || 10 || DELIVERY ||  || 2013-01-22 20:32:18 || 0 || 
```

现在我的目标是编写一个查询（可能是两个），它获取所有可用块的列表（来自约会日历）并仅返回那些不在约会中（未保留）或未在特定日期关闭的时间。下面的 SQL 执行此操作，但是当我引入子查询以省略所有约会日期或时间时，请参阅注释掉的段，所有可用的约会日历块 dissapear 。我希望只显示可用的时间块

```
SELECT DATE('2013-01-23 08:00:00')as today,appointment_calendar.*
FROM appointment_calendar 
WHERE calendar_type='OPEN'
AND
 DATE( '2013-01-23 08:00:00') BETWEEN start_date AND end_date
AND
 DATE( '2013-01-23 08:00:00') 
  NOT IN (SELECT closed_date  FROM appointment_calendar WHERE calendar_type='CLOSED')

/*  This does not work somehow if the time is in the appointment all blocks for that day do not appear
AND
( TIMESTAMP('2013-01-23 08:00:00')  
    NOT IN  (SELECT TIMESTAMP( start_time) FROM appointments )
)
*/ 
```

有什么建议的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:35:18.773

被注释掉的部分将始终评估为真或假。所以它要么过滤掉所有行，要么没有行。您需要以某种方式将 'TIMESTAMP('2013-01-23 08:00:00')' 替换为约会日历表中的时间戳。也许根据 start_date 和 time_start 制作时间戳？

# bash - Bash 十进制到 base 62 的转换

> ID：14471692
> 
> 赞同：12
> 
> 时间：2013-01-23T02:55:00.847
> 
> 标签：bash, shell, base-conversion, bc

我想反转以下`bash`命令执行的操作：

```
$ echo $((62#a39qrT))
9207903953 
```

*即将十进制 9207903953*转换为*基数 62*，保持`bash`标准为`{0..9},{a..z},{A..Z}`.

我知道我可以通过使用来做到这一点`bc`，但我必须手动转换每个字符。例如，我目前这样做：

```
BASE62=($(echo {0..9} {a..z} {A..Z}))
for i in $(echo "obase=62; 9207903953" | bc)
do
    echo -n ${BASE62[$i]} #Doesn't work if bc's output contains leading zeroes
done 
```

必须有一种方法可以以一种不那么“黑客”的方式来做到这一点。你知道一种更有效地做到这一点的方法吗？

编辑：更改`bc`输入。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T04:14:59.223

我非常感谢您提出的解决方案，而且我想没有办法直接使用 bash 解决它。这是你错过的一点：

```
BASE62=($(echo {0..9} {a..z} {A..Z}))
for i in $(bc <<< "obase=62; 9207903953"); do
    echo -n ${BASE62[$(( 10#$i ))]}
done && echo 
```

输出：

```
a39qrT 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-17T17:38:34.810

```
function base62encode() {
  bc<<<"obase=62;$1" | awk '{for (i=1; i<=NF; i++) printf "%c", $i+(($i<10)?48:(($i<36)?87:29))}'
} 
```

*   `bc<<<"obase=62;$1"`转换为从 00 到 61 的以空格为前缀的十进制数字序列
*   然后将每个数字偏移到 ASCII 表中并使用 awk 的 printf 转换为字符

或者没有 for 循环：

```
function base62encode() {
  bc<<<"obase=62;$1" | awk 'BEGIN{RS=" +"}/./{printf "%c", $1+(($1<10)?48:(($1<36)?87:29))}';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-30T15:55:03.473

或者没有 bc 并且具有任意基数：

```
function baseXencode() {
  awk 'BEGIN{b=split(ARGV[1],D,"");n=ARGV[2];do{d=int(n/b);i=D[n-b*d+1];r=i r;n=d}while(n!=0);print r}' "$1" "$2"
}
function base62encode() {
  baseXencode 0123465789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ "$1"
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-12T20:24:08.123

`gforth`使用, 和`tr`, (`tr`需要使用任意 base10 到 baseX 转换函数`gforth`，因为`bash`使用不同的字符来打印基数)：

```
n2b() { gforth -e "$1 $2 base ! . cr bye" | tr '[0-9A-z]' '[0-9a-zA-Z]' ; }
n2b 9207903953 62
n2b 9207903953 61   # Also works with other bases.
n2b 9207903953 3 
```

输出：

```
a39qrT 
aT1PM8
212202201021222121202 
```

# ruby - Ruby logger - 何时关闭日志文件

> ID：14471696
> 
> 赞同：0
> 
> 时间：2013-01-23T02:55:09.067
> 
> 标签：ruby, logging

何时打开和关闭“记录器”设备的任何建议。我有一个通过 Open4 调用多个子程序的主程序。

1.  我是否应该为 main 和所有 subs 启动一个记录器，并在 main 完成时关闭。
2.  或者打开主记录器并为每个子进程创建一个记录器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:07:06.630

选择第一个选项。这是有效的方法。因为每个地方只能使用一个 Logger 实例。

# jquery - 如何从 rails3_jquery_autocomplete 上的连接表中带来 extra_data

> ID：14471701
> 
> 赞同：2
> 
> 时间：2013-01-23T02:56:01.327
> 
> 标签：jquery, ruby-on-rails-3, autocomplete

我有一个关联**用户属于_to 角色**，并希望使用 rails3_jquery_autocomplete按**名称搜索用户。**我想在选择用户后显示一些**角色的值。**

这是我的控制器

```
class UserController < ApplicationController
   autocomplete :user, :name, scopes: [:join_role], 
   extra_data: [:address, :email] 
```

这是我的模型

```
class User < ActiveRecord::Base
  belongs_to :role
  attr_accessible :name, :address, :email
  scope :join_role, joins(:role)

class Role < ActiveRecord::Base
   attr_accessible :name, :level 
```

如何在用户自动完成搜索中获取名称和级别值？

我不能在**extra_data**选项上添加**:name**，**:level ，** **:role**因为它会返回一个 sql 错误。

 ****这里[rails3-jquery-autocomplete-search-by-several-fields](https://stackoverflow.com/questions/11123749/rails-3-rails3-jquery-autocomplete-search-by-several-fields)说我可以覆盖**get_autocomplete_items**方法，但不知道如何。

类似的东西？

```
def get_autocomplete_items(parameters)
    super(parameters)
    result = []
    User.join_role.where('....').each do |user|
      result << {id: user.id, label: user.name, role: user.role.name, 
        address: user.address, email: user.email, level: user.role.level }
    end
    result
  end 
```

但它导致“哈希的未定义方法‘id’......”****

# c# - 处理大量异常的最佳方法

> ID：14471703
> 
> 赞同：1
> 
> 时间：2013-01-23T02:56:35.503
> 
> 标签：c#, exception-handling

如果我有很多异常要处理，那么 C# 异常处理的最佳方法是什么？

我会将它们全部放在 try 块中还是尽可能多地放入 try 块？

例如，当我按如下方式连接到数据库时，

放置 try...catch...finally 块的最佳方法是什么？

```
OleDbConnection conn = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=school.mdb");
conn.Open();
string sql = "select * from sheet1 where student='stu2'";
OleDbCommand command;
command = new OleDbCommand(sql, conn);
OleDbDataReader reader = command.ExecuteReader();

while (reader.Read())
{
    for (int i = 0; i < reader.FieldCount; i++)
    {
        Console.Write("{0} ", reader[i]);
    }

    Console.WriteLine();
}

reader.Close();
conn.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:05:22.643

一个小小的异常处理提示：如果抛出异常，您的代码不会自行清理。无论是否引发异常，以下代码都将清理：

```
using (OleDbConnection conn = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=school.mdb"))
{
    conn.Open();
    string sql = "select * from sheet1 where student='stu2'";
    using (OleDbCommand command = new OleDbCommand(sql, conn))
    {
        using (OleDbDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                for (int i = 0; i < reader.FieldCount; i++)
                {
                    Console.Write("{0} ", reader[i]);
                }

                Console.WriteLine();
            }
        }
    }
    conn.Close();
} 
```

# php - 重写apache的规则

> ID：14471705
> 
> 赞同：0
> 
> 时间：2013-01-23T02:56:43.607
> 
> 标签：php, apache, mod-rewrite, url-rewriting, rewrite

鉴于此链接：localhost/app/forms/enroll.php。我希望它在我访问/注册时呈现。

例如：localhost/register 将显示 localhost/app/forms/enroll.php

所以基本上我有这个代码：

```
RewriteEngine On
RewriteBase /
RewriteRule register app/forms/enroll.php 
```

在我的代码中，我调用了 localhost/enroll.php，我想将其重定向到 /app/enroll.php，但随后我想再次显示链接（localhost/register）。

所以我需要再次回调我上面所做的 RewriteRule。

添加此规则不起作用

```
RewriteRule enroll.php register [R] 
```

还有这个

```
RewriteRule enroll.php app/forms/enroll.php [C]
RewriteRule app/forms/enroll.php register 
```

注意：我需要解决此问题，而不必更改代码中的链接。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:55:56.587

如果我理解正确，您不必多次重定向。第一次只需静默映射，如下所示：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  !enroll.php         [NC]
RewriteRule ^register/?$  app/forms/enroll.php  [L] 
```

它会默默地重定向

`http://localhost/register` （此 URL 始终显示在浏览器中）

到：

`http://localhost/app/forms/enroll.php`

# python - PYTHON SSL - 建立 ssl 连接的两种方式之间的区别

> ID：14471708
> 
> 赞同：4
> 
> 时间：2013-01-23T02:56:49.753
> 
> 标签：python, authentication, ssl, client

我正在尝试使用 ssl 在客户端和我开发的服务器之间建立连接。基于此：[http](http://bobthegnome.blogspot.fr/2007/08/making-ssl-connection-in-python.html) ://bobthegnome.blogspot.fr/2007/08/making-ssl-connection-in-python.html 我创建了一个简单的连接并且它可以工作。但我想通过添加客户端身份验证来改进它。所以我发现有些人使用 socket.warp_socket 。

这是一个例子：

```
bindsocket = socket.socket()
bindsocket.bind(('127.0.0.1', 9998))
bindsocket.listen(5)

while True:
    newsocket, fromaddr = bindsocket.accept()
    connstream = ssl.wrap_socket(newsocket,
                            server_side=True,
                            certfile="srv.crt",
                            keyfile="srv.key",
                            ssl_version=ssl.PROTOCOL_TLSv1)
    deal_with_client(connstream) 
```

这两者有什么区别？女巫一号是最好的（就我而言）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:11:51.923

没有区别。

`socket.ssl()`是一个不推荐使用的方法，它在下面调用`socket.wrap_socket()`，只是检查 python 是否已使用 SSL 支持进行编译（`import ssl`无论如何都会为你做）。

```
def ssl(sock, keyfile=None, certfile=None):
    # we do an internal import here because the ssl
    # module imports the socket module
    import ssl as _realssl
    warnings.warn("socket.ssl() is deprecated.  Use ssl.wrap_socket() instead.",
                  DeprecationWarning, stacklevel=2)
    return _realssl.sslwrap_simple(sock, keyfile, certfile) 
```

# c# - 在foreach中删除对象

> ID：14471712
> 
> 赞同：2
> 
> 时间：2013-01-23T02:57:08.520
> 
> 标签：c#, .net, entity-framework, entity-framework-4, linq-to-entities

我有一个例外，它说：

> 无法删除该对象，因为它在 ObjectStateManager 中找不到

当我循环调用`DeleteObject()`时。`ForEach`在谷歌搜索这个问题后，我还没有找到答案，我没有发现我的代码有任何问题，如下所示。

`DHEntity`和之间存在一对多的关系`DHEntityVersion`。

```
public IList<DHEntity> GetAllDHEntity(Guid packId)
{
    using (DiaDataContext db = new DiaDataContext(ConnectionStrings.LogDB))
    {
        var subPackList = new List<DHEntity>();
        subPackList = db.DHEntities.Include(d=>d.DHEntityVersions).Where(p => p.PackageId == packId).ToList();
        return subPackList;
    }
}

private void Delete()
{
    using (DiaDataContext db = new DiaDataContext(ConnectionStrings.LogDB))
    {
        var subPacks = GetAllDHEntity(packId);////This method used another context. maybe it is the reason cause the problem .
        foreach (var subpack in subPacks)
        {
            var vList = db.DHEntityVersions.Where(v =>v.DHEntityId == subpack.ID).ToList();
            foreach (var version in vList)
            {
                db.DeleteObject(version);
            }
            db.DeleteObject(subpack);//the debugger stop here along with the exception I mentioned before.
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:09:31.337

问题是该对象来自另一个数据上下文。

`GetAllDHEntity`用于获取项目的上下文不是`Delete`它的上下文，这就是该对象的状态不存在的原因。

# ios - 通过 AFNetworking 将多个文件上传到 FTP

> ID：14471721
> 
> 赞同：1
> 
> 时间：2013-01-23T02:58:14.930
> 
> 标签：ios, objective-c, ftp, afnetworking

所以我完全不熟悉objective-c和编程），我正在尝试了解如何将多个文件下载/上传到FTP。我从 SimpleFTPSample 开始，但每个人都说，使用 AFNetworking 要简单得多，所以我如何使用 AFNetworking 将 2 个 txt 文件上传到 FTP。我只找到有关发送到 http 的信息。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T05:56:24.617

问题是，基本上你不能。

AFNetworking 几乎只是 HTTP(S) - 不支持 FTP。从名称上看并不明显，但如果你看这里：[https](https://github.com/AFNetworking/AFNetworking#overview) ://github.com/AFNetworking/AFNetworking#overview就会很清楚。

因此，您可能必须使用 SimpleFTPSample 或检查：[https ://github.com/nkreipke/FTPManager](https://github.com/nkreipke/FTPManager)

# javascript - javascript点击两个函数

> ID：14471728
> 
> 赞同：0
> 
> 时间：2013-01-23T02:59:07.260
> 
> 标签：javascript, forms, submit

我想要的只是一个简单的表格，一个人必须同意在提交信息之前选中该框。但是，javascript 的代码适用于电子邮件验证和所有文本框，但不适用于复选框。它实际上会发出警报，但无论如何都会提交信息。

如何同时调用这两个函数？或者更好的是如何验证并填写高字段并检查 Box？

带有 Java 的 HTML 表单。看我那里有两个javacode。下面的这段代码不起作用。

```
<input name="imageField" type="image" id="imageField" onclick="if(!form2.checkbox.checked){alert('You must agree to the terms first.');} MM_validateForm('FullName','','R','Email','','RisEmail','Password','','R','Phone','','R');return document.MM_returnValue" src="images/Submit.png" /> 
```

用于验证的 javacript：

```
function MM_validateForm() 
{ 
    if (document.getElementById)
    {
        var i,p,q,nm,test,num,min,max,errors='',args=MM_validateForm.arguments;
        for (i=0; i<(args.length-2); i+=3) 
        { 
            test=args[i+2]; 
            val=document.getElementById(args[i]);

            if (val) { nm=val.name; if ((val=val.value)!="") 
            {
                if (test.indexOf('isEmail')!=-1) 
                { 
                    p=val.indexOf('@');
                    if (p<1 || p==(val.length-1)) 
                        errors+='- '+nm+' must contain an e-mail address.\n';
                } 
                else if (test!='R') 
                { 
                    num = parseFloat(val);
                    if (isNaN(val)) 
                        errors+='- '+nm+' must contain a number.\n';
                    if (test.indexOf('inRange') != -1) 
                    { 
                        p=test.indexOf(':');
                        min=test.substring(8,p); 
                        max=test.substring(p+1);
                        if (num<min || max<num) 
                            errors+='- '+nm+' must contain a number between '+min+' and '+max+'.\n';
                    } 
                } 
            } 
            else if (test.charAt(0) == 'R') 
                errors += '- '+nm+' is required.\n'; }
        } 

        if (errors) 
            alert('The following error(s) occurred:\n'+errors);

        document.MM_returnValue = (errors == '');
    } 
} 
```

# ios - 如何实现在 Hotel Tonight 应用程序中看到的这种效果

> ID：14471732
> 
> 赞同：2
> 
> 时间：2013-01-23T02:59:36.697
> 
> 标签：ios, ios6, uiscrollview, core-animation

我试图弄清楚这种效果的几个部分是如何完成的。效果是从图像的滚动视图过渡到看起来像启用了分页的 UIViewController。

我已经包含了两个屏幕截图。在图 1 中，似乎有一个嵌入的滚动视图，当用户单击红色按钮时，它会打开到图 2 所示的全屏视图。

![在此处输入图像描述](../Images/671b0962595d0c33c6fc7a8805bacdf3.png)

第二个是转换到启用分页的滚动视图。我的一个问题是“隐藏”按钮（显示为红色按钮）。效果是如图 1 所示的动画。

我想这是作为 Fig1 中的嵌套滚动视图完成的，并带有向外扩展的动画。这部分是怎么做的？可以有动画一个被拉回的面具吗？我的想法是正确的还是有不同的方法来实现这一点？

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:56:54.347

从几张静态图片中很难判断发生了什么。我猜该应用程序只是使用 UIView 动画从屏幕的顶部和底部滑开两组视图，同时将包含图片的滚动视图的大小扩大到几乎全屏。然后隐藏按钮会反过来做同样的事情。我在我们公司的几个应用程序中做了与此非常相似的事情。

在这种情况下，我会将图片上方的视图组放入容器视图中，将图片下方的视图组放入单独的容器视图中。

我不太了解视图的顺序以及页面控制器的作用，因此很难推荐一种具体的方法。

# php - 使用 PHP 将 HTML 代码从 url 复制到另一个文件

> ID：14471733
> 
> 赞同：0
> 
> 时间：2013-01-23T02:59:51.963
> 
> 标签：php, file

我的PHP代码如下：

```
<?php
    $htmlFile = file_get_contents(http://archi-graphi.com/arcancianev/sejour-29-eau_turquoise_en_corse.html');
    $pdfHtml = ('pdfFile.html');
    copy($htmlFile, $pdfHtml);
        // Now you can choose to run a check to see if the new copy exists,
        // or you have the option to do nothing and assume it is made
        if (file_exists($pdfHtml)) {
            echo "Success :  has been made";
        } else {
            echo "Failure:  does not exist";
        }
?> 
```

但是我收到了错误消息`Warning: copy( <!DOCTYPE html> <html lang="fr"> <head> <meta charset="utf-8" /> <title>Vacances Arcanciane</title> ...`，我不知道是什么错误。请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:03:59.423

如果我错了，请纠正我，但您可能正在寻找[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)而不是[copy](http://php.net/manual/en/function.copy.php)：

```
<?php
    $html = file_get_contents('http://archi-graphi.com/arcancianev/sejour-29-eau_turquoise_en_corse.html');
    $pdfHtml = 'pdfFile.html';

    // this is probably what you're trying to do
    file_put_contents($pdfHtml, $html);

        // Now you can choose to run a check to see if the new copy exists,
        // or you have the option to do nothing and assume it is made
        if (file_exists($pdfHtml)) {
            echo "Success :  has been made";
        } else {
            echo "Failure:  does not exist";
        }
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-04-24T15:43:26.300

检查副本的变量顺序。它应该`copy($pdfHtml, $htmlFile);`代替`copy($htmlFile, $pdfHtml);`

# php - 有效的 MySQL 查询不返回结果

> ID：14471736
> 
> 赞同：2
> 
> 时间：2013-01-23T03:00:50.107
> 
> 标签：php, mysql, datediff

我在 MySQL 中有一个查询（感谢用户[Ross Smith II](https://stackoverflow.com/users/1432614/ross-smith-ii)），我在控制台中测试过，（几小时前返回 1 天 10 小时 34 分钟）我相对确定我的 PHP 是正确的，尽管我可能是忽略某些东西，或者这个查询的某个地方有一个条件，我不能做我想做的事情。真的很感激一些见解。请注意，顶部的时间戳将是从另一个表中选择的变量，但出于此查询的目的，我以相同的格式设置了时间。我已经取出所有变量并尝试了原始数据，仍然可以在 SQL 查询中使用，但我无法让 PHP 回显它。我收到致命错误：调用非对象上的成员函数 fetch_assoc()。再次感谢。

```
$aquery = ("SET @start = \"2013-01-19 07:56:22\";
        SET @end = NOW();

        SELECT
        CONCAT(
            FLOOR(
                (
                    UNIX_TIMESTAMP(@end) - UNIX_TIMESTAMP(@start) - 86400 * (
                        (FLOOR(DATEDIFF(@end, @start) / 7) * 2) +
                            IF(WEEKDAY(@end) > 4, WEEKDAY(@end) - 4, 0) +
                            IF(WEEKDAY(@end) < WEEKDAY(@start), 2, 0)
                    )
                ) / 86400
            ),
            ' days ',
            TIME_FORMAT(
            SEC_TO_TIME(
                (
                    UNIX_TIMESTAMP(@end) - UNIX_TIMESTAMP(@start) - 86400 * (
                        (FLOOR(DATEDIFF(@end, @start) / 7) * 2) +
                            IF(WEEKDAY(@end) > 4, WEEKDAY(@end) - 4, 0) +
                            IF(WEEKDAY(@end) < WEEKDAY(@start), 2, 0)
                    )
                ) % 86400
            ),
            '%H hours %i minutes'
            )
        ) AS duration");
        $aresult = $mysqli->query($aquery);
        // while( $row = $result->fetch_assoc() ) {
        // Edited typo above, does not fix.
        while ( $row = $aresult->fetch_assoc() ) {
        echo ($row['duration']);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:03:43.633

```
$aresult = $mysqli->query($aquery);
while( $row = $result->fetch_assoc() ) {
        echo ($row['duration']);
} 
```

这看起来像一个错字。你不应该使用`$aresult->fetch_assoc()`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:23:03.777

您不能像这样使用多个查询来调用*查询。*单独查询它们中的每一个（并删除 ;'s）或使用[multi_query](http://php.net/manual/en/mysqli.multi-query.php)。

```
$aresult = $mysqli->multi_query($aquery); 
```

或者

```
$mysqli->query("SET @start = \"2013-01-19 07:56:22\"");
$mysqli->query("SET @end = NOW()");
$result = $mysqli->query("SELECT
    CONCAT(
        FLOOR(
            (
                UNIX_TIMESTAMP(@end) - UNIX_TIMESTAMP(@start) - 86400 * (
                    (FLOOR(DATEDIFF(@end, @start) / 7) * 2) +
                        IF(WEEKDAY(@end) > 4, WEEKDAY(@end) - 4, 0) +
                        IF(WEEKDAY(@end) < WEEKDAY(@start), 2, 0)
                )
            ) / 86400
        ),
        ' days ',
        TIME_FORMAT(
        SEC_TO_TIME(
            (
                UNIX_TIMESTAMP(@end) - UNIX_TIMESTAMP(@start) - 86400 * (
                    (FLOOR(DATEDIFF(@end, @start) / 7) * 2) +
                        IF(WEEKDAY(@end) > 4, WEEKDAY(@end) - 4, 0) +
                        IF(WEEKDAY(@end) < WEEKDAY(@start), 2, 0)
                )
            ) % 86400
        ),
        '%H hours %i minutes'
        )
    ) AS duration"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T03:26:58.707

您有多个查询，不能像您尝试的方式那样直接执行。我正在使用 PDO，所以我不确定这是否会满足您的要求。但是试一试。

```
$mysqli->autocommit(FALSE);
$mysqli->query("SET @start = '2013-01-19 07:56:22'");
$mysqli->query("SET @end = NOW()");
/*$aresult = */$mysqli->query("SELECT
    CONCAT(
        FLOOR(
            (
                UNIX_TIMESTAMP(@end) - UNIX_TIMESTAMP(@start) - 86400 * (
                    (FLOOR(DATEDIFF(@end, @start) / 7) * 2) +
                        IF(WEEKDAY(@end) > 4, WEEKDAY(@end) - 4, 0) +
                        IF(WEEKDAY(@end) < WEEKDAY(@start), 2, 0)
                )
            ) / 86400
        ),
        ' days ',
        TIME_FORMAT(
        SEC_TO_TIME(
            (
                UNIX_TIMESTAMP(@end) - UNIX_TIMESTAMP(@start) - 86400 * (
                    (FLOOR(DATEDIFF(@end, @start) / 7) * 2) +
                        IF(WEEKDAY(@end) > 4, WEEKDAY(@end) - 4, 0) +
                        IF(WEEKDAY(@end) < WEEKDAY(@start), 2, 0)
                )
            ) % 86400
        ),
        '%H hours %i minutes'
        )
    ) AS duration");
$mysqli->commit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T04:33:12.803

在研究了 mysqli_multi_query 并考虑了[inhan](https://stackoverflow.com/users/913097/inhan)和[ring0 的](https://stackoverflow.com/users/338904/ring0)答案之后，感谢[Ross Smith II](https://stackoverflow.com/users/1432614/ross-smith-ii)，这是我想出的解决方案。如果有人需要 PHP 脚本从时间戳（此处为 $timeApproved）和当前时间（可以替换为任何其他时间戳，将 @end = NOW() 替换为您的时间戳...）计算经过的时间，这里就是。它将以 0 天 0 小时 0 分钟的格式返​​回时间量。非常感谢帮忙。

**这是更新的代码**

```
$link = mysqli_connect("localhost", "username", "password", "database");
$query = "SET @start = \"".$timeApproved."\";"; 
$query .= "SET @end = NOW();";
$query .= "SELECT
CONCAT(
    FLOOR(
        (
            UNIX_TIMESTAMP(@end) - UNIX_TIMESTAMP(@start) - 86400 * (
                (FLOOR(DATEDIFF(@end, @start) / 7) * 2) +
                    IF(WEEKDAY(@end) > 4, WEEKDAY(@end) - 4, 0) +
                    IF(WEEKDAY(@end) < WEEKDAY(@start), 2, 0)
            )
        ) / 86400
    ),
    ' days ',
    TIME_FORMAT(
    SEC_TO_TIME(
        (
            UNIX_TIMESTAMP(@end) - UNIX_TIMESTAMP(@start) - 86400 * (
                (FLOOR(DATEDIFF(@end, @start) / 7) * 2) +
                    IF(WEEKDAY(@end) > 4, WEEKDAY(@end) - 4, 0) +
                    IF(WEEKDAY(@end) < WEEKDAY(@start), 2, 0)
            )
        ) % 86400
    ),
    '%H hours %i minutes'
    )
) AS duration;"; 

if (mysqli_multi_query($link, $query)) {
do {

if ($result = mysqli_store_result($link)) {
    while ($row = mysqli_fetch_array($result)) 

{
echo $row['duration'];
}

// mysqli_free_result($result); // I will only have one result.
}   
} while (mysqli_next_result($link));
} 
```

# performance - 无符号整数函数的性能改进

> ID：14471737
> 
> 赞同：3
> 
> 时间：2013-01-23T03:00:50.653
> 
> 标签：performance, haskell

任何`Word32`数字都可以表示为`Word8`数字的线性组合，如下所示：

```
x = a + b * 2^8 + c * 2^16 + d * 2^24 
```

换句话说，这是`x`在 base 中的表示`2^8`。为了获得这些因素，我实现了以下功能：

```
word32to8 :: Word32 -> (Word8,Word8,Word8,Word8)
word32to8 n = (fromIntegral a,fromIntegral b,fromIntegral c,fromIntegral d)
  where
   (d,r1) = divMod n  (2^24)
   (c,r2) = divMod r1 (2^16)
   (b,a)  = divMod r2 (2^8) 
```

它可以正常工作，但是由于我的程序多次使用此功能，我认为你们可以给我一个关于如何改进（如果可能）此操作的性能的想法。任何微小的改进对我来说都是好的，无论是在时间上还是空间上。对我来说，它看起来如此简单，以至于无法实现性能提升，但我仍然想问这个问题，以防万一我遗漏了什么。

顺便说一句，我对 的所有重复感到恼火`fromIntegral`，但转换是必要的，以便类型可以匹配。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T03:35:07.277

通过为结果定义不同的类型、使用 GHC 扩展并改用按位运算，您可能会获得显着的性能提升：

```
data Split =
    Split {-# UNPACK #-} !Word8
          {-# UNPACK #-} !Word8
          {-# UNPACK #-} !Word8
          {-# UNPACK #-} !Word8

splitWord :: Word32 -> Split
splitWord x =
    Split (fromIntegral x)
          (fromIntegral (shiftR x 8))
          (fromIntegral (shiftR x 16))
          (fromIntegral (shiftR x 24)) 
```

通过使用以下改进，此代码比原始函数快四倍以上：

*   我没有使用非严格元组类型，而是定义了一个严格类型`Split`。
*   我已经解压缩了该类型的字段以摆脱大多数内存分配和垃圾收集。
*   我已经从 切换`divMod`到`shiftR`。你实际上不需要模运算，所以我放弃了它。

另一种提高速度的方法是根本不通过具体的数据类型。您可能希望使用字节执行计算，因此我们跳过存储和检索它们的步骤。相反，我们将`splitWord`函数传递给*continuation*：

```
splitWord :: (Word8 -> Word8 -> Word8 -> Word8 -> r) -> Word32 -> r
splitWord k x =
    k (fromIntegral x)
      (fromIntegral (shiftR x 8))
      (fromIntegral (shiftR x 16))
      (fromIntegral (shiftR x 24)) 
```

如果您仍想保存字节，则可以将`Split`构造函数作为延续传递：

```
splitWord Split 123456 
```

但现在您也可以只执行您想要执行的计算：

```
splitWord (\a b c d -> a + b + c + d) 123456 
```

# javascript - 如何将元素数组转换为字符串并使用 javascript 解析它们？

> ID：14471738
> 
> 赞同：-1
> 
> 时间：2013-01-23T03:01:03.487
> 
> 标签：javascript, parsing

现在我有一个元素数组。我想把它们变成字符串数组并在onclick之后解析出信息。所以我想我有两个问题，首先是如何将它们变成字符串，其次是如何使用正则表达式来解析它们？我可以自己编写正则表达式，但我想知道如何将它应用于 javascript 中的字符串。

首先我这样做：

```
var array = $('a[onclick*="findCustomer"]'); 
```

现在，我有一个清单：

```
 <a href="javascript:void(0);" onclick="findCustomer('James Smith',808-371-   4984,"Hawaii")">James Smith</a> 
```

所以我的问题是如何把它变成一个字符串数组，以及如何从中解析出客户的姓名、电话号码和状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:57:06.913

> 所以我的问题是如何把它变成一个字符串数组，以及如何从中解析出客户的姓名、电话号码和状态。

首先获取所有*onclick*属性（因为您似乎想使用 jQuery，这可以使用完成[`$.map`](http://api.jquery.com/jQuery.map/)）

```
var array = $.map($('a[onclick*="findCustomer"]'), function (elm) {
    return elm.getAttribute('onclick');
}); // `array` is now an array of the _onclick_ attributes 
```

然后解析属性，例如[`$.each`](http://api.jquery.com/jQuery.each/)

```
$.each(array, function (key, val) {
    var parts = val.slice(val.indexOf('(')+1, val.lastIndexOf(')')).split(',');
    // parts[0] is name, parts[1] is number, parts[2] is state
    // you'll need to trim quotes
}); 
```

[**如此处所述**](https://stackoverflow.com/a/1732454/1615483)，尝试使用 RegExp 解析 x/HTML 是一个非常糟糕的主意。我展示的方法应该没问题，因为您**知道***onclick*属性的结构。然而，一个更好的解决方案是让这些数据通过其他一些根本不涉及解析 HTML 的方法来访问。

# delphi - Delphi：为什么 TStringlist 不能在程序中分配？

> ID：14471740
> 
> 赞同：6
> 
> 时间：2013-01-23T03:01:05.097
> 
> 标签：delphi, tstringlist

第一个程序：

```
procedure TestOne(List : TStringList);
var
  TempList : TStringList;
begin
  TempList := TStringList.Create;
  TempList.Add('Test');
  List := TempList;
  TempList.Free;
end;

procedure TForm1.Button1Click(Sender : TObject);
var
  aList : TStringList;
begin
  aList := TStringList.Create;
  TestOne(aList);
  Memo1.Lines := aList;
end; 
```

当我点击按钮时，备忘录没有显示任何东西，断点显示程序没有执行这一行：</p>

```
 List := TempList; 
```

![这条线](../Images/23b25e9f1f830959271b2f4c96d65e75.png)

我修改了程序：

```
procedure TestTwo(List : TStringList);
var
  TempList : TStringList;
begin
  TempList := TStringList.Create;
  TempList.Add('Test');
  List.Text := TempList.Text;
  //or
  List.Assign(TempList);
  //List := TempList;
  TempList.Free;
end; 
```

这次它起作用了。

那为什么不能使用`List := TempList;`呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-23T03:16:36.943

当您按值传递变量时，Delphi 在堆栈中制作参数值的副本，并且在方法内对该参数所做的所有更改都在该副本上完成。

从 Turbo Pascal 时代开始，也许从一开始，这就是 pascal 的工作方式。考虑一下：

```
procedure TestInt(Int: Integer);
begin
  Int := 10;
  Writeln(Int); //writes 10
end;

var
  I: Integer;
begin
  I := 5;
  Wirteln(I); //writes 5
  TestInt(I);
  Writeln(I); //also writes 5
end. 
```

现在，当您将对象作为参数传递时，您必须记住对象变量是对对象的引用（指向对象实际存储在堆中的地址的指针）。但是，如果您通过引用传递参数，上述规则仍然适用：在堆栈中制作引用的副本。您在方法/过程中对该引用所做的任何更改都是在该副本上完成的。

该行`List := TempList;`仅更改引用，使其指向不同内存位置中的不同对象。该值在过程返回时丢失，与整数值在`TestInt`过程返回时丢失的方式相同。

该行从不执行的事实是优化器在起作用。由于从未使用过新值，因此优化器会从最终的 exe 中消除分配，并且该行实际上从未执行过。

您可以更改参数声明以通过引用（var 参数）传递它，但这在处理对象时不是一个好主意，因为您必须考虑谁负责释放对象的内存以避免内存泄漏。

您没有告诉您要完成什么，但看起来分配是要走的路，因为分配将字符串从一个列表复制到另一个。您必须考虑直接在 List 上工作，而不是使用 TempList，如下所示：

```
procedure TestOne(List : TStringList);
begin
  List.Clear;
  List.Add('Test');
end;

procedure TForm1.Button1Click(Sender : TObject);
var
  aList : TStringList;
begin
  aList := TStringList.Create;
  TestOne(aList);
  Memo1.Lines := aList;
end; 
```

如您所见，结果是相同的。

# 编辑

Rob 在评论中指出了一些重要的东西，所以我将解释为什么 Button1Click 方法的最后一行有效：`Memo1.Lines := aList;`

这看起来像是直接赋值，但您*必须*知道在那一行中您正在处理一个[Delphi 属性](http://docwiki.embarcadero.com/RADStudio/XE3/en/Properties)。

> 属性，就像字段一样，定义了对象的属性。但是，虽然字段只是一个可以检查和更改其内容的存储位置，但属性将**特定操作与读取或修改其数据相关联**。属性提供对对象属性访问的控制，并且它们允许计算属性。
> 
> 属性的声明指定名称和类型，并包括至少一个访问说明符。

查看如何声明 TCustomMemo 的 Lines 属性：

```
 TCustomMemo = class(TCustomEdit)
  ..
  ..
    property Lines: TStrings read FLines write SetLines; 
```

这意味着，当您为属性赋值时，您实际上是在调用 SetLines 方法，将 Value 作为参数传递，如下所示：

```
 Memo1.SetLines(AList); 
```

SetLines 实现如下所示：

```
procedure TCustomMemo.SetLines(Value: TStrings);
begin
  FLines.Assign(Value);
end; 
```

因此，您最终发出了相同的 TStrings.Assign 调用，它将所有字符串从源列表复制到目标列表。

这是 Delphi 处理对象属性并保持对对象的明确所有权的方法。每个组件都创建并拥有它自己的子对象，而您创建并拥有自己的对象。

属性上的赋值运算符 ( := ) 是语法糖，允许组件编写者在读取或写入值时引入副作用，并允许程序员将属性视为标准字段并享受舒适的副作用。

# java - 对 2 个 String[] 数组进行排序

> ID：14471741
> 
> 赞同：1
> 
> 时间：2013-01-23T03:01:08.450
> 
> 标签：java, arrays, string, sorting

> **可能重复：**
> [如何对彼此相关的两个数组进行排序？](https://stackoverflow.com/questions/10213493/can-i-sort-two-lists-in-relation-to-each-other)

我有 2 个两个`String[]`数组。我想对索引与第一个数组相同的第二个数组进行排序。

```
private void checkDatabase(String keyword, String origins) {
    List<RSList> rslist = db.getAllRSListsByType(keyword);

    total = rslist.toArray().length;

    String[] titlearray = new String[total];
    String[] distance = new String[total];

    int i = 0;
    for (RSList cn : rslist) {
        titlearray[i] = cn.getName();
        String origin = origins;
        String destination = cn.getGlat() + "," + cn.getGlon();
        distance[i] = checkDataToGoogle(origin, destination);
        Log.i("Name: ", distance[i]);
        i++;
    }
    Arrays.sort(distance);
    filldata(titlearray, distance);
} 
```

我想`titlearray`用数组创建相同的索引`distance`，我已经`distance`先对数组进行了排序，但我不知道如何`titlearray`用`distance`.

谁能给我建议？

# database - 电子商务网站的最佳数据库结构

> ID：14471743
> 
> 赞同：2
> 
> 时间：2013-01-23T03:01:18.500
> 
> 标签：database, zend-framework

[我想知道您的程序员如何在 Mysql http://shop.ccs.com](http://shop.ccs.com)中处理这样一个电子商务网站，其中包含产品、产品质量、尺寸、颜色价格之间的所有相关性。我的是

1.  餐桌用品
    1.  ID
    2.  姓名
    3.  父母
2.  桌子大小
    1.  ID
    2.  id_product
    3.  尺寸名称
    4.  数量
3.  表格颜色
    1.  ID
    2.  id_product
    3.  颜色
    4.  数量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:17:20.773

嗯..我想出了这个结构，希望能有所帮助。应该有一个包含产品信息的主表。在你的例子中，它的产品 ID、尺寸和颜色reec。其余表连接到主表

```
1.table products_id (master table)
     1.id- Primary Key
     2.id_product_size- References size.id (FK)
     3.id_product_color- References color.id (FK)

 2\. table product_name
     1.product_id- References product_id.id(FK)
     2.name
     3.parents

 3.table size 
     1.id- Primary Key
     2.size_name
     3.quantity

 4.table color 
     1.id- Primary Key
     2.colors
     3.quantity 
```

# java - Appfog 上的 Apache Solr

> ID：14471748
> 
> 赞同：1
> 
> 时间：2013-01-23T03:02:08.333
> 
> 标签：java, apache, solr, appfog

我对 Apache Solr 非常陌生，我正在尝试将它部署在运行 Java 运行时的 Appfog 应用程序上。我可以部署起始页：[sga-search.aws.af.cm](http://sga-search.aws.af.cm)，但没有其他方法可以工作。有人可以指导我如何部署这个吗？？？

注意：Appfog 不允许通过 SSH 连接到服务器。

感谢您的时间！

# php - 在 publict_html 根目录之外上传原始图像

> ID：14471749
> 
> 赞同：-1
> 
> 时间：2013-01-23T03:02:09.680
> 
> 标签：php, filesystems

我正在将 php 表单中的图像上传到文件系统中。由于原始图像质量很高，并且我不想与任何人分享，所以我想将原始图像保存在安全的地方，并公开从原始图像创建的不同尺寸

我读过将原始图像上传到 publict_html 根目录之外是一个不错的选择。这是真的？如何将原始图像保存在安全的地方并防止其被下载？

谢谢马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:21:59.900

可能值得创建一个文件夹并设置 apache / Web 服务器权限，以仅允许对经过验证的用户进行窃取。查看如何使用 .htaccess 文件授权用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:27:36.643

对，是真的。用户只能访问 public_html 目录。因此，用户可以浏览 public_html 中的文件和目录（假设没有 .htaccess 或其他安全性）。所以，你可以说，

```
root/public_html      = www.example.com
root/public_html/img/ = www.example.com/img/
root/public_html      = www.example.com/img/../ 
```

但是无法使用“../”访问root，

```
root != www.example.com/../ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T03:34:24.300

.htaccess .htpasswd 是可能的解决方案；您可以密码保护包含您的图像的目录（因为您需要访问它）。

如果您想阻止在服务器上的目录中访问 .jpg，请在您的目录中使用以下 .htaccess 代码：

```
# prevent reading of .jpg files
<Files *.jpg>
    Deny From All
</Files> 
```

[密码保护目录](http://www.addedbytes.com/blog/code/password-protect-a-directory-with-htaccess/) [.htaccess 信息](http://www.edginet.org/techie/website/htaccess.html)

# javascript - 在ajax中发布数组的最佳方法是什么？

> ID：14471759
> 
> 赞同：-3
> 
> 时间：2013-01-23T03:03:34.523
> 
> 标签：javascript, jquery, ajax, arrays, post

我有一个 java 脚本数组创建为 -

```
var ar = new Array();
ar[0] = 'foo';
ar[1] = 'bar'; 
```

我需要知道使用 ajax (jquery) 将其发布到服务器的最佳方法是什么？我需要在发布之前对其进行序列化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:10:05.730

您可以按原样发送，

```
var ar = ..your_array..;
$.ajax({
     url: 'http://www.example.com/',
     data: {array: ar},
     type: 'POST'
}); 
```

您还可以使用 jquery $.post 和 $.get 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:09:35.497

可能这是最好的办法。

```
var data  = {fookey:"foo",barkey:"bar"}; 
```

并在您的 ajax 代码中

```
$.ajax(function(){
.....
data:data
sucess:...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T03:17:36.163

如果您尝试将数组发送到服务器，那么 JSON 样式的字符串可能效果最好。如果我没记错的话，您可以使用`JSON.stringify(ar);`，但这不是跨浏览器兼容的。在这种情况下，自己编写字符串可能会更容易。

```
var json_string = '{0:foo, 1:bar}'; 
```

然后，您可以使用`json_decode()`PHP 在服务器端对其进行解码。我假设您使用的是 PHP，因为您最初的问题有些模糊。

对于实际的 AJAX 请求代码，您可以自己查找。对不起。:P

# c# - 通过 MSMQ 的 MassTransit 无法正常工作，为什么？

> ID：14471770
> 
> 赞同：4
> 
> 时间：2013-01-23T03:04:25.270
> 
> 标签：c#, masstransit

这是我的 MassTransit 代码。

订阅者控制台应用程序：

```
namespace ConsoleSubscriber
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("set up a subscriber");

            Bus.Initialize(config =>
            {
                config.UseMsmq();
                config.VerifyMsmqConfiguration();
                config.UseMulticastSubscriptionClient();
                config.UseControlBus();
                config.ReceiveFrom("msmq://localhost/test_end");
                config.Subscribe(s => s.Instance(new Consumer()).Permanent());                    
            });

            Console.Read();
        }         
    }

    public class Consumer : Consumes<Message>.All
    {
        public void Consume(Message message)
        {
            Console.WriteLine("start consuming message");

            if (string.IsNullOrEmpty(message.Ids))
            {
                Console.WriteLine("no ids");     
            }
            else
            {
                Console.WriteLine("ids are " + message.Ids);
            }
        }
    }
} 
```

留言类：

```
[Serializable]
public class Message
{
    public string Ids { get; set; }
} 
```

发布者控制台应用程序：

```
namespace ConsolePublisher
{
    class Program
    {
        static void Main(string[] args)
        {                
            Console.WriteLine("start publishing");

            // initialize bus 
            Bus.Initialize(config =>
            {
                config.UseMsmq();
                config.VerifyMsmqConfiguration();
                config.UseMulticastSubscriptionClient();
                config.UseControlBus();
                config.ReceiveFrom("msmq://localhost/test_queue");
            });

            Bus.Instance.Publish(new Message());
            Console.WriteLine("Message sent 1");

            var msg2 = new Message() { Ids ="1,2,3,4" };
            Bus.Instance.Publish(msg2);
            Console.WriteLine("Message sent 2");

            Console.Read();    
        }
    }
} 
```

当我运行这两个控制台应用程序时，消费者似乎没有接收到消息。有任何想法吗？

干杯!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T12:07:57.957

在调用发布之前尝试进入睡眠状态。多播订阅可能需要一些时间来配置，因为这两个实例正在相互通信。还要确保您在发布者之前启动了消费者。也替换`config.Subscribe(s => s.Instance(new Consumer()).Permanent());`为`config.Subscribe<Consumer>();`可能有帮助。

一旦您继续前进，还有其他路由方法可以在进程重新启动之间保留订阅数据。一旦你掌握了这个，我就会开始考虑使用订阅服务、静态路由，或者只是使用 RabbitMQ。

# windows - 如何找到可执行文件的所有依赖项？

> ID：14471771
> 
> 赞同：0
> 
> 时间：2013-01-23T03:04:27.450
> 
> 标签：windows, dll, executable

我可以在 Windows 可执行文件上运行哪些程序/应用程序来查找它依赖或使用的所有 DLL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:07:17.167

一个经典的是[Dependency Walker](http://www.dependencywalker.com/)。

它列出了所有静态导入的 dll（以及实际使用的函数）和延迟加载 dll；此外，运行程序它可以为您提供动态加载的（如在 LoadLibrary 中）dll 和使用的入口点（如果通过 GetProcAddress 检索）的列表。

# javascript - 将背景图像设置为 Canvas 元素或在其中放置图像

> ID：14471774
> 
> 赞同：0
> 
> 时间：2013-01-23T03:04:57.190
> 
> 标签：javascript, html, canvas

```
var device = false;
var a0 = (device? 'rgba(0,169,157,0.6)' : {darker: 'rgba(0,122,133,1)', start: 'rgba(67,192,183,0)', end: 'rgba(0,169,157,1)', angle: 156.1});
var a1 = (device? 'rgba(41,171,226,0.6)' : {darker: 'rgba(1,101,166,1)', start: 'rgba(21,131,196,1)', end: 'rgba(132,207,238,.1)', angle: 180-11.1});
var a2 = (device? 'rgba(200,200,200,0.6)' : {darker: 'rgba(120,120,120,0.4)', start: 'rgba(90,90,90,1)', end: 'rgba(80,80,80,0.4)', angle: 245}); 
```

我刚开始画布。

所以我有这些线条来改变我画布上圆圈的颜色。但不是这些颜色，我想在其中添加一个图像，最好是作为背景图像或其他东西。有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:38:43.903

我不确定我是否理解你的问题，但是，

（这仅在 html5 画布中：[http](http://shedlimited.debrucellc.com/) ://shedlimited.debrucellc.com/ ）

html5 canvas + kinetic.js 来做到这一点 -->

[http://jsfiddle.net/aqaP7/4/](http://jsfiddle.net/aqaP7/4/)

（可拖动的圆圈依赖于同时设置的 HTML5 裁剪约束）

```
 // draw clipping rectangle
                    context.beginPath();
                    context.rect(box._x, box._y, 200, 100);
                    context.clip();

                    // draw circle
                    context.beginPath();
                    context.arc(this._x, this._y, 50, 0, 2 * Math.PI, false);
                    context.fillStyle = "blue";
                    context.fill();
                    context.closePath();
                }, 
```

如果要在其中绘制背景图像，则可以同时绘制图像

# php - 从数据库验证用户名和密码

> ID：14471780
> 
> 赞同：2
> 
> 时间：2013-01-23T03:05:31.823
> 
> 标签：php, pdo

我这里有一些代码在我输入它时返回“用户名不正确”，当它应该输出“密码不正确”时，因为我只是输入了正确的用户名，但密码不正确。

```
if ($_POST['login']) {
    $username = strip_tags($_POST['username']);
    $password = strip_tags($_POST['password']);
    $fetchme = $dbc->query('SELECT * FROM users WHERE username="$username"');
    while($row = $fetchme->fetch(PDO::FETCH_ASSOC)) {
        $lastlogin = $row['lastlogin'];
    }
    if (!$username||!$password) {
        echo '<center>Please enter a valid username and password</center>';
    }else{
        $login = $dbc->query('SELECT * FROM users WHERE username="$username"');
        $num_rows_login = ($login->fetchColumn() > 0) ? true : false;
        if ($num_rows_login == 0) {
            echo "<center>Username doesn't exist</center>";
        }else{
            while($login_row = $login->fetch(PDO::FETCH_ASSOC)) {
                $password_db = $login_row['password'];
                $password_db2 = hash('sha512', $password);
                if ($password_db2 != $password_db) {
                    echo '<center>Incorrect password</center>';
                }
            }
        }    
    }
} 
```

这是我第一次使用 PDO。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:24:55.973

首先，不要`strip_tags()`在用户名或密码上使用；它们没有任何用途，您应该在 SQL 中正确地转义它们（或使用准备好的语句）。

其次，您可以假设最多会从`users`表中返回一行，因此您真的不需要 a`while`来获取所有记录。

第三，不要区分不存在的用户名和无效密码；他们都应该产生相同的消息“无效的用户名或密码”。

这是一个快速重写：

```
$stmt = $dbc->prepare('SELECT * FROM users WHERE username=?');
$stmt->execute(array($username));
// fetch all records and take first one (returns false in case of no rows)
$user = current($stmt->fetchAll(PDO::FETCH_ASSOC));
// validate record
if ($user === false || hash('sha512', $password) !== $user['password']) {
    echo '<center>Invalid username or password</center>';
} else {
    echo 'yay, you are the man';
} 
```

最后，阅读此内容以获得更好的密码散列：

[如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

# php - 在 PHP 中使用 XMLReader + SimpleXML 解析 XML

> ID：14471783
> 
> 赞同：0
> 
> 时间：2013-01-23T03:05:51.250
> 
> 标签：php, xml-parsing, simplexml, xmlreader

最近我从[这里](http://posterous.richardcunningham.co.uk/using-a-hybrid-of-xmlreader-and-simplexml)了解到如何在 PHP 中使用 XMLReader 和 SimpleXML 解析大型 xml 文件。我试图将上述教程的代码改编成我的 php 程序，如下所示：

```
$xml_url = "http://localhost/rest/server.php?wstoken=".$token&function=contents";
    $reader = new XMLReader;
    $reader->open($xml_url);

    while($reader->read()){
        if($reader->nodeType == XMLReader::ELEMENT && $reader->name == 'SINGLE'){
            $doc = new DOMDocument('1.0','UTF-8');
            $xml = simplexml_import_dom($doc->importNode($reader->expand(), true));
            //$titleString = (string) $xml->description;
            echo $xml->description;
        }
    } 
```

通过 url 调用的 XML 文件是这样的（xml 版本在[这里](http://dl.dropbox.com/u/72519118/response.xml)）： ![截屏](../Images/09c45335d9140808ff490fed14b2c188.png)

其他 SINGLE 标签（标有“红色”）具有相同的结构，我也想打印它们的“描述”。

上面提到的 php 程序的输出是：第 1 行第 1 列的错误：文档末尾的额外内容。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:48:30.830

[`SimpleXML`](http://php.net/manual/en/function.simplexml-load-file.php)功能应该足够了：

```
$xml=simplexml_load_file('http://dl.dropbox.com/u/72519118/response.xml');
var_dump($xml->xpath('//SINGLE/KEY[@name="description"]/VALUE/text()')); 
```

上述`var_dump`输出：

```
array(3) {
  [0]=>
  object(SimpleXMLElement)#2 (1) {
    [0]=>
    string(1703) "<div class="no-overflow">..."
  }
  [1]=>
  object(SimpleXMLElement)#3 (1) {
    [0]=>
    string(9906) "<div class="no-overflow">..."
  }
  [2]=>
  object(SimpleXMLElement)#4 (1) {
    [0]=>
    string(4114) "<div class="no-overflow">..."
  }
} 
```

请注意，标签名称`xpath()`区分大小写，因此`'//single/key...'`不起作用。

**加法**：

在 SimpleXML 中检索文本值的“标准”方法是`$KEY->VALUE`；

但是，如果您已经到达 XML 树的“结束”节点（就像我在 XPath 中所做的那样），您可以简单地将其类型转换为字符串以获取值：

```
$xml=simplexml_load_file('http://dl.dropbox.com/u/72519118/response.xml');
$result=$xml->xpath('//SINGLE/KEY[@name="description"]/VALUE/text()');
foreach($result as $text)
{
    var_dump((string)$text);
} 
```

上述输出：

```
string(1703) "<div class="no-overflow"><p>..."
string(9906) "<div class="no-overflow"><h3>..."
string(4114) "<div class="no-overflow"><h3>..." 
```

# sql - 遍历日期范围

> ID：14471784
> 
> 赞同：0
> 
> 时间：2013-01-23T03:05:54.790
> 
> 标签：sql, ruby-on-rails-3, datetime

鉴于此代码：

```
def doc_chart_data(document)
  (1.month.ago.to_date..Date.today).map do |date| {
      date: date,
      hits: Impression.where(:impressionable_id => document).where(:created_at => date).count
      }
  end
end 
```

我如何将`date`SQL 查询中的更改为**一整天**，而不仅仅是特定的时间戳？有所有日期范围的答案`Time.now`，但我真的不知道如何在日期自动映射的情况下写一个。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:22:26.517

尝试：

```
Impression.where(:impressionable_id => document).where("YEAR(created_at) = ? && MONTH(created_at) = ? && DAY(created_at) = ?",date.year,date.month,date.day).count 
```

# node.js - Node.JS：替代 chown 字符串

> ID：14471786
> 
> 赞同：7
> 
> 时间：2013-01-23T03:06:06.277
> 
> 标签：node.js, unix, chown, chgrp

此时，[`fs.chown`需要和`int`的值`uid``gid`](https://github.com/joyent/node/issues/4410)。

那么，从类 UNIX 系统获取这些 int 值的推荐方法是什么？

我应该直接阅读`/etc/passwd`吗`/etc/group`？
这似乎不是正确的方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T12:01:21.230

您现在可能已经解决了它，但供将来参考：[uid-number](https://npmjs.org/package/uid-number)包由 npm 使用，所以我认为可以安全地假设它有效（而且它对我有用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-08T17:56:49.273

直接调用`chown`即可：

```
var exec = require( "child_process" ).exec;
exec( "chown user:group filename" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T00:35:02.270

我检查并发现了这个：[https](https://npmjs.org/package/getuid) ://npmjs.org/package/getuid 我没用过。买者自负。

就个人而言，我喜欢在用户提供的配置文件中查找这些内容:)

-丹尼尔

# windows - 我可以在 Windows 和 OS X 之间共享 USB 拇指驱动器上的 Git 存储库吗？

> ID：14471787
> 
> 赞同：2
> 
> 时间：2013-01-23T03:06:12.293
> 
> 标签：windows, macos, git, repository, msysgit

我的 USB 拇指驱动器上有一个个人 git 存储库，我使用 msysGit（[http://msysgit.github.com/](http://msysgit.github.com/)，版本 1.8.0）维护它，它作为便携式应用程序安装在所述拇指驱动器上。

当我在工作中将它与 Windows 7 一起使用时，此设置运行良好。不幸的是，当我尝试在家里的 Mac OS X Snow Leopard (10.6.8) 上使用 git (版本 1.8.1) 使用相同的存储库时，我从终端收到以下错误：

```
$ git diff
fatal: Could not chdir to 'e:/': No such file or directory 
```

`'e:/'`显然是指包含此 repo 的目录的基于 Windows 的地址。

这些 git 安装可以配置为一起工作吗？我仍在学习 git 并且宁愿不采用涉及制作副本的解决方案，因为我已经这样做了，以使用`rsync`.

**更新：**这是我通常要做的将文件添加到我的存储库的操作。我做错什么了吗？

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\Username\Documents>E:

E:\>PortableApps\Git\git-bash.bat

Username@Username /e (master)
$ git add launch.bat 
```

# java - 如何复制阅读器？

> ID：14471789
> 
> 赞同：1
> 
> 时间：2013-01-23T03:06:28.123
> 
> 标签：java, lucene

> **可能重复：**
> [如何制作 BufferedReader 的副本？](https://stackoverflow.com/questions/12107049/how-can-i-make-a-copy-of-a-bufferedreader)

我有一个方法要求一个 Reader 作为参数：

```
public List<String> getURI(Reader reader) 
```

在这种方法中，我需要“复制”这个阅读器，以便拥有两个 TokenStream（每个阅读器一个阅读器，但都指向同一个文件、字符串或其他任何东西），所以请执行以下操作：

```
Reader reader2 = reader; 
```

由于我上面显示的内容不起作用，还有其他方法吗？

感谢您的帮助。

问候，

布卢尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:13:44.847

如果内存使用不是您关心的问题，请将内容读入 String 对象，并基于它实例化两个 StringReader 实例。

如果您关心内存使用情况，请使用相对较小的缓冲区读取内容，保存到临时文件中，并根据它实例化阅读器。

也许还有其他更好的方法我也很好奇。

# .htaccess - 使用 mod_rewrite 允许带有或不带斜杠的友好 URL

> ID：14471792
> 
> 赞同：0
> 
> 时间：2013-01-23T03:06:48.327
> 
> 标签：.htaccess

我正在尝试创建一个 mod_rewrite 规则，该规则将创建一个可以使用或不使用尾部斜杠的友好 URL。

例如。domain.com/index.php?id=421 可供用户输入 domain.com/421 或 domain.com/421/ 访问。

我目前有（相当简单的）规则：

```
RewriteEngine On
RewriteRule /(.*)$ /index.php?id=$1 
```

只要有一个斜杠，它就可以正常工作，但是如果输入的 URL 没有一个，则会重新写入 domain.com/domain.com/index.php?id=421

我在这里完全超出了我的深度，因此将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:21:26.937

好的，我解决了这个问题。首先，我最终在圈子里转了很长时间的原因是我的浏览器正在缓存 .htaccess 文件（不知道他们这样做了！）所以无论我尝试什么都没有什么效果！一旦我解决了这个问题，解决问题就轻而易举了，这要感谢我在数小时的挫折中所阅读的所有内容。我的解决方案是：-

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ $1/ [L,R=301] 
RewriteRule (.*)/ index.php?id=$1 [L] 
```

如果有人需要对此代码的解释，其中大部分内容都在[http://enarion.net/web/htaccess/trailing-slash/](http://enarion.net/web/htaccess/trailing-slash/)中介绍。

# javascript - 跨站点脚本（没有 iframe 或任何东西）

> ID：14471797
> 
> 赞同：1
> 
> 时间：2013-01-23T03:07:01.600
> 
> 标签：javascript, ajax, forms, post, xss

我试图更好地理解这一点，这让我有点困惑。我发现的所有东西都与我没有使用的 iframe 有关。

我在我拥有的域上有一个表单，当您单击提交时，它会向第 3 方服务 (infusionsoft) 发送请求并提交一些信息。

我想发送一个 ajax 发布请求，其中包含他们输入的信息给这个第 3 方，而不是让他们必须点击提交。

该表单只是一个标准的 POST 表单，其中包含一些与活动相关的隐藏输入。该表格只是由 3rd 方服务生成并粘贴到您的网站上。

当我通过 ajax 提交它时，我在控制台中收到一个跨站点脚本错误。

问题：

1.  他们的服务器如何“知道”这是一个 ajax 请求？（从他们的服务器看来）发布请求看起来与用户定期单击“提交”（没有 ajax）相同吗？

2.  我如何才能成功地做到这一点而没有错误？

3.  有人说我应该使用 php 和 ajax 发布到*_*的 php 文件中。那有什么不同？你能想到他们可能会想到什么来解决这个问题吗？他们很模糊。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:12:02.450

了解[同源政策](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)

1.  它不是服务器，而是浏览器阻止它。
2.  禁用浏览器的安全性
3.  [称为代理](http://www.daniweb.com/web-development/php/code/216729/php-proxy-solution-for-cross-domain-ajax-scripting)

# iphone - 创建通过委托回调完成的任务队列

> ID：14471806
> 
> 赞同：0
> 
> 时间：2013-01-23T03:07:55.280
> 
> 标签：iphone, ios, objective-c, queue, nsoperationqueue

我的应用程序允许人们通过 Facebook、Twitter、电子邮件和 SMS 分享他们创建的内容。这些选项中的每一个都有一个对应的 UISwitch。用户配置所有开关，然后按下“完成”按钮。对于每个开关，如果设置为“ON”，我会触发一个适当的方法（`shareViaSms`、`shareViaEmail`等），该方法会实例化本机 iOS 视图控制器以完成该类型的共享（TWTweetComposeViewController、MFMailComposeViewController 等）。这些视图控制器有委托回调来表示它们的完成，当一个完成时（有人发送或取消电子邮件撰写表），我需要触发他们想要使用的下一个。

我当前管理这个的代码感觉很笨拙，我正在寻找更好的解决方案。如果用户打开所有 4 个选项，我调用第一个共享方法`shareViaFacebook.`，它有一个委托方法，完成后，我检查下一个共享选项的 UISwitch 状态，如果它打开，调用它的共享方法，如果没有，检查下一个开关，以此类推。每个委托的完成方法循环通过剩余的开关，并负责调用下一个共享方法。可以想象，添加一个新选项需要更改大量代码并修改许多 if/else 条件。

我该如何改进呢？我希望能够简单地查看所有 UISwitches，如果设置为“ON”，则将我相应的共享方法 ( `shareViaSMS`) 添加到某个队列中，然后让该队列运行并在前一个共享方法时自动调用下一个共享方法一个完成。我很挣扎，因为如前所述，完成是异步的，并且是通过委托回调宣布的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:31:08.877

为此，您需要一个“管理器”对象，它接受一个“请求”对象，该对象将包含启动您想要的特定请求的所有必要信息（服务名称、文本、标题等）。

“manager”对象包含一系列任务，您将使用请求对象加载这些任务，并且它必须通过使用委托并在完成后立即弹出请求来使用递归。

委托应调用管理器内部的方法，该方法执行以下操作：

如果请求成功完成，则弹出栈顶并再次调用管理器的执行栈顶请求方法。

如果请求失败，请停止并发送消息。

如果堆栈为空，则所有请求都已执行。

当然，您的经理必须拥有适当的代码来处理每种类型的请求。

如果您有这种架构，添加新服务就像添加代码来管理该类型的请求一样简单到管理器对象。

**顺便说一句，这是创建队列的众多方法之一，我建议使用这种方法，因为在我看来它与语言无关且易于理解。**

# sbt - 如何在多项目中设置 sbt 配置以运行 testng 测试

> ID：14471810
> 
> 赞同：1
> 
> 时间：2013-01-23T03:08:20.640
> 
> 标签：sbt, testng

我有一个 sbt 多项目设置，项目结构如下

项目父
|
|-- 客户
|
|-- 服务器

父项目是一个虚拟项目。project/MyBuild.scala 文件是这样的

```
 import sbt._
  import Keys._
  object MyBuild extends Build {
      lazy val root = Project(id = "parent", base = file(".")) aggregate(server, client)
      lazy val server = Project(id = "server", base = file("server"))
      lazy val client = Project(id = "client", base = file("client")) dependsOn( server )
  } 
```

客户端和服务器是两个独立的项目，带有 testng 测试设置，它们都独立工作。

要运行 testng，我使用的是 testng 接口插件“sbt-testng-plugin”，它需要指定 testng 测试套件配置 xml。

在客户端和服务器的 build.sbt 文件中，我都指定了

```
testNGSuites := Seq(  "src/test/resources/testng.xml") 
```

这样 testng 可以找到 testng.xml 来运行测试。

在父项目中，如果我输入

sbt 编译

它分别编译所有子项目（客户端和服务器）。这很好用。

但如果我输入，

sbt测试

父项目 sbt 尝试运行 testng 测试，但由于找不到文件而失败

```
 src/test/resources/testng.xml 
```

在父项目中。由于 parent 只是一个虚拟目录，并且没有

```
 src/test/resources/testng.xml 
```

因此测试失败。

现在我的问题是如何配置设置以允许子项目以及父项目运行测试？

我在想，如果我能以某种方式在子项目中设置这样的设置

```
 testNGSuites := Seq( base +  "src/test/resources/testng.xml") 
```

所以 testNGSuites 对于子项目而不是父项目是绝对的。

但是由于我刚开始使用 sbt，我不确定如何在 sbt 中获取“基本”路径。

我尝试使用 baseDirectory，但它是一个设置键而不是值本身。

任何帮助将不胜感激。

谢谢

# git - 从堆叠特征分支变基

> ID：14471812
> 
> 赞同：2
> 
> 时间：2013-01-23T03:08:27.983
> 
> 标签：git, git-rebase

我有两个分支机构。一个是从 master 分叉的，第二个是从 master 分叉的，但取决于第一个分支的变化。我想提交我的第一个分支以供审核。审核通过后，将rebase到master上。

有什么方法可以在没有第一个变更集的情况下开始在第二个分支上工作？我最初的想法是从第一个分支变基第二个分支，然后当第一个分支变基到 master 时，将第二个变更集变基到 master。这可行吗？如果不是，正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:02:55.473

**免责声明：**这假设`Branch2`它是您的存储库本地的，或者它是公共的，但没有其他人会从中提取/工作。如果有人确实尝试处理它并且您执行以下操作，它可能会引起各种头痛。

* * *

您应该能够使用命令`--onto`参数完成分支操作[`rebase`](http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)。它非常强大，可以让您（至少尝试）在几乎任何其他提交之上移动几乎任何范围的提交。

对于您的情况，假设您有一个看起来像这样的图表

```
 e -- f            <-- Branch2
      /
a -- b                   <-- Master
      \
       c -- d            <-- Branch1 
```

并且你想把它变成下面这样的东西，这样你就可以在等待合并批准的`Branch2`同时继续工作。`Branch1`

```
a -- b                   <-- Master
      \
       c -- d            <-- Branch1
             \
              e -- f     <-- Branch2 
```

它应该能够使用命令来完成

```
git rebase --onto branch1 master branch2 
```

`Branch1`合并后`master`，假设存储库如下所示

```
a -- b ------- g          <-- Master
      \       /
       c -- d             <-- Branch1
             \
              e -- f      <-- Branch2 
```

然后，您可以使用以下命令`Branch2`重新开始`master`

```
git rebase --onto master branch1 branch2 
```

产生一个看起来像这样的存储库

```
 e -- f   <-- Branch2
                /
a -- b ------- g          <-- Master
      \       /
       c -- d             <-- Branch1 
```

*抱歉，Branch2 一直在顶部和底部之间跳跃。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:20:40.433

如果您的意思是您需要从分支 2 中的分支 1 进行更改，那么您可能只想 git [cherry-pick](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)您需要从分支 1 到分支 2 的更改。这正是您正在寻找的，而不需要任何复杂的变基计划。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T03:22:18.100

看来您正在使用 gerrit 进行代码审查。

你可以这样做：

当分支 1 被提交并合并到 repo 中时，你可以这样做：

git 获取原点

并直接 rebase 来自 branch1 的更改，例如 git rebase origin/master

兄弟，蒂姆

# android - Android JPEG 到位图到 JPEG

> ID：14471813
> 
> 赞同：2
> 
> 时间：2013-01-23T03:08:30.583
> 
> 标签：android, bitmap, size, jpeg, reduce

我保存的图像大小有问题。假设我有一个 1028 x 960 的 JPEG，我会将文件读入位图并进行一些编辑并再次将其另存为 JPEG。图像为 514 x 480。我能做些什么使尺寸保持不变？

这是我阅读文件时的代码：

```
private void choosePhoto() {
    generalIntent = new Intent(Intent.ACTION_GET_CONTENT);
    generalIntent.setType("image/*");
    startActivityForResult(generalIntent, CHOOSE_PHOTO);
} 
```

和这个

```
if (requestCode == CHOOSE_PHOTO) {
    cleanUpImageView();
    tempImageUri[1] = data.getData();
    editPhotoImg.setImageURI(tempImageUri[1]);
} 
```

这是保存文件的代码：

```
private void savePhoto() {
    if (editPhotoImg.getDrawable() == null) {
        Toast.makeText(EditPhoto.this, "No Photo Edited", Toast.LENGTH_SHORT).show();
    } else {
        try {
            String filePath = getOutputMediaFile(RESULT).getPath();
            editPhotoImg.setDrawingCacheEnabled(true);
            Bitmap b = editPhotoImg.getDrawingCache(true);

            b.compress(CompressFormat.JPEG, 100, new FileOutputStream(filePath));
            Toast.makeText(EditPhoto.this, "Image saved to: " + filePath,
                    Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
            Toast.makeText(EditPhoto.this, "Invalid File Path", Toast.LENGTH_SHORT).show();
        }
    }
} 
```

图像质量也丢失了，但我认为这可能无济于事。但我真的希望至少尺寸不会减少。提前感谢您的帮助。我很感激。

# json - KnockOutJS 中的自定义视图数据绑定

> ID：14471815
> 
> 赞同：0
> 
> 时间：2013-01-23T03:08:47.953
> 
> 标签：json, data-binding, knockout.js

我在 KnockOutJS ViewModel 中创建自定义字段时遇到问题。

**HTML**

```
<table class="table table-striped">
    <thead><tr>
        <th>name</th><th>abb</th><th>combo</th>
    </tr></thead>
    <tbody data-bind="foreach: clients"><tr>
        <td data-bind="text: Name"></td>
        <td data-bind="text: Abbreviation"></td>
        <td data-bind="text: NameAbbreviation"></td>
    </tr></tbody>
</table> 
```

**JS代码**

```
function ClientModel() {
    var self = this;
// Bind all data to UI < -- working
    self.clients = ko.observableArray(data);
// Not working        
    self.NameAbbreviation = ko.computed(function () {
        return self.Name + " " + self.Abbreviation;
    })
};
ko.applyBindings(new ClientModel()); 
```

**JOSN 数据**（工作）

```
{"ID":14,"GUID":"c999b888-9566-2e50-a23c-07913d389f99","Name":"Aaron46","Abbreviation":"Corporate Customer","Website":"www.ts2mkg3d0oomo.com","Email":"kltuh32@otyvmj.net","Active":true,"ModifyDate":"1959-02-14T15:47:53.43","CreatedDate":"1987-09-26T00:37:13.52","CreatedDateString":"9/26/1987","ModifyDateString":"2/14/1959","Status":0,"Message":null},{"ID":443,"GUID":"12c60aa5-03f1-509c-5d49-9caf696c44ce","Name":"Abigail","Abbreviation":"Technical","Website":"www.wsfj97qccj1.com","Email":"eagai@odgqur.com","Active":true,"ModifyDate":"2007-02-01T06:01:11.3","CreatedDate":"1963-05-11T01:23:21.11","CreatedDateString":"5/11/1963","ModifyDateString":"2/1/2007","Status":0,"Message":null},{"ID":136,"GUID":"63c65e85-0f9b-1f7c-328a-ca253a4881d1","Name":"Adrienne","Abbreviation":"Accounting","Website":"www.ixug6k4eqkjmnr.com","Email":"tqxcjexh.izoiqv@pyuzqk.net","Active":false,"ModifyDate":"2000-12-14T08:11:31.83","CreatedDate":"1980-05-03T03:25:02.34","CreatedDateString":"5/3/1980","ModifyDateString":"12/14/2000","Status":0,"Message":null} 
```

当我不创建自定义视图字段时，我能够毫无问题地绑定所有数据！

当我尝试创建**NameAbbreviation**自定义字段时，出现错误

```
Error: Unable to parse bindings.
Message: ReferenceError: NameAbbreviation is not defined;
Bindings value: text: NameAbbreviation 
```

我理解错误，因为 KO 在视图中找不到 NameAbbreviation。

如何让 KO 使用/查看此自定义视图 NameAbbreviation？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:21:29.037

当您处于`foreach`循环中时，范围是您正在循环的数组项。您的视图模型已`NameAbbreviation`在根级别而不是在每个项目上定义。

您可以在此处采用多种方法。

最简单的方法是在您的视图模型上创建一个简单的函数，该函数返回格式化的字符串并使用`$root`or绑定它`$parent`。

```
function ClientModel() {
    this.clients = ko.observableArray(data);
    this.NameAbbreviation = function (item) {
        return item.Name + " " + item.Abbreviation;
    };
}; 
```

然后，在您的 UI 中绑定如下：

```
<tbody data-bind="foreach: clients">
    <tr>
        <td data-bind="text: Name"></td>
        <td data-bind="text: Abbreviation"></td>
        <td data-bind="text: $root.NameAbbreviation($data)"></td>
    </tr>
</tbody> 
```

否则，您可以考虑创建一个“项目”构造函数，该函数添加`NameAbbreviation`然后通过构造函数发送每个原始数据项。

另一种选择是使用[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:32:51.350

```
// use () with item.Name and item.Abbreviation as below

this.NameAbbreviation = function (item) {
        return item.Name() + " " + item.Abbreviation();
    }; 
```

# c++ - 删除 GDIPlus 位图不能减少内存使用

> ID：14471817
> 
> 赞同：0
> 
> 时间：2013-01-23T03:09:00.150
> 
> 标签：c++, gdi+

我有一个新位图的代码，但是当我使用删除时，任务管理器中的内存使用量并没有减少。

我的代码如下

```
Bitmap* pBuffer = new Bitmap(pMainImage->GetWidth(),  pMainImage->GetHeight());
delete pBuffer; 
```

如何适当地删除上面的pBuffer？所以内存使用量恢复到调用 new Bitmap() 之前的水平。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:31:26.697

这不是 Windows 内存管理器的工作方式。当您释放内存时，堆块只会被标记为“未使用”。可用于下次分配。它*确实*合并了空闲块并取消了虚拟地址空间，但它并不急于这样做。它使用的确切规则没有记录，并且因操作系统版本而异。

否则，任务管理器无法成为实际使用中虚拟内存的可靠指标。最重要的是因为这并不容易做到。HeapWalk() api 函数可以做到这一点，但带有强烈警告，即实际使用它会产生有害的副作用。原因是它必须使用太多锁才能确保安全。只有冻结所有线程的调试器才能做到这一点而不会产生这些副作用。就像 Windbg 的 !heap 命令一样。

# django - 电子邮件用户模板 Django

> ID：14471824
> 
> 赞同：0
> 
> 时间：2013-01-23T03:09:59.573
> 
> 标签：django, templates, messaging

我正在使用 Django Userena 来配置我的用户配置文件。该站点的工作方式如下： User#1 在我的站点上创建 Object#1。之后，我想让其他人使用 Userena 的消息传递系统向 User#1 发送关于 Object#1 的消息。

我意识到您可以像这样收到用户的电子邮件：

```
{{ object.user.email }} 
```

但我不想在互联网上公开我用户的电子邮件，我更愿意使用 userena 的消息传递系统。

你会怎么做？我会在页面上创建一个指向[userena 的 write view](https://bitbucket.org/psam/django-postman/src/6ff9fdf9c33f7365a7235a789af2e47f47d9c4fa/postman/views.py?at=default#L111)的链接，包括用户名作为参数吗？

我不得不承认我对如何做到这一点非常迷茫，但由于这似乎是一个常见问题，我希望有任何好的建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:22:16.880

您将需要通过添加`userena.contrib.umessages`到您的`INSTALLED_APPS`设置来安装 userna 的消息传递框架。您还需要将其添加到您的 urlconf。例如：

```
(r'^messages/', include('userena.contrib.umessages.urls')), 
```

现在，如果您访问这样的 url，`/messages/compose/username_1+username_2+username_3/`则可以向所有用户名在 URL 中的 3 个用户发送一条消息。

请查看[`urls.py`](https://github.com/bread-and-pepper/django-userena/blob/master/userena/contrib/umessages/urls.py)并[`views.py`](https://github.com/bread-and-pepper/django-userena/blob/master/userena/contrib/umessages/views.py)了解更多信息。

如果有兴趣，您也应该[`models.py`](https://github.com/bread-and-pepper/django-userena/blob/master/userena/contrib/umessages/views.py)了解一下所有模型都用于此目的。

# wix - Wix 自定义操作属性 - 为什么这不起作用？

> ID：14471826
> 
> 赞同：0
> 
> 时间：2013-01-23T03:10:09.880
> 
> 标签：wix, custom-action

我有以下 Wix 片段，它根据是安装还是卸载调用两个自定义操作之一：

```
<?xml version="1.0" encoding="UTF-8" ?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <?include $(sys.CURRENTDIR)\Config.wxi?>
  <Fragment>
    <CustomAction Id="caSetPropertyForInstall" Property="caRegisterDriver" Value="DeviceId=$(var.DriverId);DeviceName=$(var.ChooserName)" />
    <CustomAction Id="caSetPropertyForUninstall" Property="caUnregisterDriver" Value="DeviceId=$(var.DriverId);DeviceName=$(var.ChooserName)" />
    <Binary Id="DriverRegCA" SourceFile="$(var.ASCOM.Wix.CustomActions.TargetDir)\$(var.ASCOM.Wix.CustomActions.TargetName).CA.dll" />
    <CustomAction Id="caRegisterDriver" BinaryKey="DriverRegCA" DllEntry="RegisterAscomDriver" Execute="deferred" Return="check" />
    <CustomAction Id="caUnregisterDriver" BinaryKey="DriverRegCA" DllEntry="UnregisterAscomDriver" Execute="immediate" Return="ignore" />
    <InstallExecuteSequence>
      <Custom Action="caSetPropertyForInstall" Before="caRegisterDriver" />
      <Custom Action="caSetPropertyForUninstall" Before="caUnregisterDriver" />

      <!-- Execute during install -->
      <Custom Action="caRegisterDriver" Before="InstallFinalize">NOT Installed</Custom>

      <!-- Execute during uninstall -->
      <Custom Action="caUnregisterDriver" Before="RemoveFiles">REMOVE ~= "ALL"</Custom>
    </InstallExecuteSequence>
  </Fragment>
</Wix> 
```

安装 CA 按预期工作。我在操作 Id=caSetpropertyForInstall 中设置了一些属性，然后操作 caRegisterDriver 调用我的 C# 托管自定义操作。C# 代码查询自定义操作属性，如下所示：

```
var deviceId = session.CustomActionData["DeviceId"];
var deviceName = session.CustomActionData["DeviceName"];
Diagnostics.TraceInfo("Property DeviceId = [{0}]", deviceId);
Diagnostics.TraceInfo("Property DeviceName = [{0}]", deviceName); 
```

无论是安装还是卸载，都使用相同的 C# 方法，并且如前所述，这在安装阶段有效。

我的问题是在卸载阶段，我收到一个异常：

```
1 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe ===== TiGra.Diagnostics 已初始化：默认 TraceLevel = 警告 =====
2 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe ASCOM.Wix.CustomActions.CustomActions[信息]：开始 UnregisterAscomDriver 自定义操作
3 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe ASCOM.Wix.CustomActions.CustomActions[错误]：查询安装程序属性时出错
4 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe ASCOM.Wix.CustomActions.CustomActions[错误]: System.Collections.Generic.KeyNotFoundException: 给定的键不在字典中.
5 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe 在 System.ThrowHelper.ThrowKeyNotFoundException()
6 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe 在 System.Collections.Generic.Dictionary`2.get_Item(TKey 键)
7 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe 在 Microsoft.Deployment.WindowsInstaller.CustomActionData.get_Item（字符串键）
8 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe 在 ASCOM.Wix.CustomActions.CustomActions.CreateAscomDeviceFromSessionProperties（IInstallerPropertyProvider 会话）
9 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe ASCOM.Wix.CustomActions.CustomActions[错误]：UnregisterAscomDriver 失败：System.Collections.Generic.KeyNotFoundException：给定的密钥不存在在字典里。
10 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe 在 System.ThrowHelper.ThrowKeyNotFoundException()
11 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe 在 System.Collections.Generic.Dictionary`2.get_Item（TKey 键）
12 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe 在 Microsoft.Deployment.WindowsInstaller.CustomActionData.get_Item（字符串键）
13 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe 在 ASCOM.Wix.CustomActions.CustomActions.CreateAscomDeviceFromSessionProperties（IInstallerPropertyProvider 会话）
14 23/01/2013 03:07:37 7120 C:\Windows\SysWOW64\rundll32.exe 在 ASCOM.Wix.CustomActions.CustomActions.UnregisterAscomDriver（会话会话）

```

我看不出我处理安装和卸载的方式有什么不同，所以我很困惑为什么会这样。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:37:38.060

您将自定义操作“caUnregisterDriver”安排为立即执行而不是延迟执行。它没有要反序列化到集合中的 CustomActionData 属性。

顺便说一句，我也没有看到回滚和提交自定义操作，所以我也会担心这一点。

# ruby-on-rails - 使用表单发布自定义路线。导轨 3.2.x

> ID：14471827
> 
> 赞同：0
> 
> 时间：2013-01-23T03:10:12.080
> 
> 标签：ruby-on-rails, routing, routes

浏览stackoverflow一段时间后无法找到以下问题的解决方案：

我有一个脚手架模型`fleets`，我想将路由匹配`\fleets\postponed?id=31\`到控制器中的特定操作 => `def postponed`with`POST`方法。

当我尝试遵循一些教程时，这里失败了：

`Couldn't find Fleet with id=postpone`

这是我的路线：

```
  匹配 'fleets/postponed.id?:id', :controller => "fleets", :action => "postponed", :via => :post
  资源：舰队

```

这是`POST`方法的形式：

```
 <%= form_for @fleet, :html => { :class => 'form-horizontal' }, :url => { :id => @fleet.id }  do |f| %>
   blah-blah-blah
 <%= f.submit 'Postpone' %>
 <% end %> 
```

这是动作：

```
def 推迟
  @fleet = Fleet.find(params[:id])
  @fleet.update_attributes(params[:fleet])
结尾

```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:15:02.830

我想你只会在你的路线中想要这个

```
match 'fleets/postponed', :id => /d+/, :via => :post, :controller => 'fleets', :action => 'postponed' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:04:48.643

要实现这条路线`<host>/fleets/postponed?id=31`，您应该有以下路线

```
match 'fleets/postponed/:id', :via => :post 
```

[请参阅查询字符串的](http://guides.rubyonrails.org/routing.html#the-query-string)路由指南部分

```
match ':controller/:action/:id' 
```

一个传入路径`/fleets/postponed/1?user_id=2`将被分派到 Fleets 控制器的延迟操作。参数将是`{ :controller => “fleets”, :action => “postponed”, :id => “1”, :user_id => “2” }`.

# python - sqlalchemy 立即更新

> ID：14471831
> 
> 赞同：2
> 
> 时间：2013-01-23T03:10:22.843
> 
> 标签：python, postgresql, sqlalchemy, select-for-update

sqlalchemy的[文档](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.with_lockmode)说您可以使用 Query.with_lockmode('update_nowait') 在 PostgreSQL 8.1 以上指定“FOR UPDATE NOWAIT”。有谁知道如何让它添加 FOR UPDATE NOWAIT 而不仅仅是 FOR UPDATE？

```
PostgreSQL 9.1.6

query = db.session.query(MyTable)\
    .filter_by(process_status="PENDING")\
    .order_by(MyTable.id)\
    .with_lockmode('update_nowait')\

print query 
```

sql：

```
SELECT 
MyTable.id AS MyTable_id
,MyTable.created_on AS MyTable_created_on
FROM MyTable 
WHERE MyTable.process_status = :process_status_1 
ORDER BY MyTable.id 
FOR UPDATE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:36:25.320

我能够用 Oracle 11g 和 SQLAlchemy 0.8.0b2 重现类似的情况。

```
db = create_engine('...',echo=True)
...
q = session.query(CauseCode.__table__).with_lockmode('update_nowait')
print q
>>>SELECT ... FROM cause_code FOR UPDATE
print renderquery(q)
>>>SELECT ... FROM cause_code FOR UPDATE NOWAIT
q.all()
>>>2013-01-23 09:58:12,665 INFO sqlalchemy.engine.base.Engine SELECT ... FROM cause_code FOR UPDATE NOWAIT 
```

通常**str** () 使用的默认查询渲染器生成的查询与执行到 DB 的实际查询不同。我怀疑 sqlalchemy 在您的情况下对 Postgres 的行为方式相同 - print q 产生与方言无关的查询。

PS renderquery() 方法实现可以在[这里找到](https://stackoverflow.com/a/9898141/1296661)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-13T00:37:23.240

在较新版本的 sqlalchmey 中，您可以使用

```
session.query().with_for_update(of=[fields to update], nowait=True) 
```

# c# - 在 C# 中重新格式化时间跨度

> ID：14471832
> 
> 赞同：3
> 
> 时间：2013-01-23T03:10:25.057
> 
> 标签：c#, timespan

我有几个看起来像这样的字符串：

其中 S 代表秒，M 代表分钟

```
"MM Minutes and XX Seconds"
"MM Minutes"
"SS Seconds"
":SS" 
```

我如何将其转换为以下之一：字符串格式“MM：SS”时间跨度格式

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T03:13:05.287

你可以使用[TempusReader](http://github.com/ChrisMissal/TempusReader)。这是一个开源项目，我开始解决这个确切的问题*（并自学如何使用[Parsley](http://github.com/plioi/Parsley)）*。

查看 GitHub 页面上的示例，看看它是否适合您的需求。`and`它适用于您的第一个示例中的单词。像这样：

```
TimeSpan x = new Time("2 days, 7 hours, 12 mins and 52 seconds") // 2.07:12:52 
```

此外，`TempusReader.Time`对象可以隐式转换为`TimeSpan`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:17:49.370

如果你想用 DateTime.Now 进行测试，你也可以这样做

```
DateTime currentTime = DateTime.Now;
TimeSpan duration = DateTime.Now.Subtract(currentTime);
MessageBox.Show(string.Format("{0:D2}:{1:D2}", duration.Minutes, duration.Seconds)); 
```

# lua - Lua：我如何让它把一个变量变成方程中的一个数字？

> ID：14471833
> 
> 赞同：2
> 
> 时间：2013-01-23T03:10:40.610
> 
> 标签：lua

所以我刚刚进入 lua 并想制作一个程序来为我做一些计算。现在我有一系列元素，后跟一个数字，例如 H = 1 He = 4 等......然后在脚本的稍后部分，我希望能够调用该字母并将其作为数字工作。这就是我所拥有的。

```
 print ("Element 1")
    e1 = io.read()
    print ("Enter Subscript")
    sub1 = io.read("*n")
    e1s = e1 * sub1
    print (e1s) 
```

在此我希望用户能够输入类似 H 的东西，让它被视为 1。然后用户可以输入下标，并且 1（来自 H）乘以作为下标输入的数字，然后打印出来用户。对不起，如果这没有多大意义，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T06:53:53.060

您可以将元素存储在表格中，并在需要时查找它们：

```
elements = {H = 1, He = 4}
print("Element 1")
e1 = elements[io.read()]
print("Enter Subscript")
sub1 = io.read("*n")
e1s = e1 * sub1
print(e1s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:34:58.867

如果您尝试做的是在用户提供 3 的情况下将“H”打印为“HHH”，您可以使用循环将一个字符串与所有三个字符串连接起来，然后打印它。

# javascript - jquery.getJSON 的问题打印为未定义或声明该函数未定义

> ID：14471834
> 
> 赞同：0
> 
> 时间：2013-01-23T03:10:47.547
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, json

这变得非常令人沮丧，我认为这会更容易做，我想做的就是使用我创建的 Rails 应用程序作为 API，我似乎无法让它工作，所以我创建了一个快速的小测试应用程序来消除任何可能真的很复杂的事情，我知道非常基本的 java 脚本，我的经验并没有走得更远，然后使用 Jquery 获得各种效果等。

我正在使用 rails-api gem，我在这个测试中所做的只是简单地运行

```
Rails g scaffold user name 
```

没有创建任何视图或类似的东西，当您导航到用户路径时，您将看到一个包含用户的 json 数组（当前唯一的字段将被创建、更新、名称和 ID）

这是我的代码。

```
$(document).ready(function(){

$('#new_user').submit(function(e) {
  $.post('/users', $(this).serialize());
  this.reset();
  e.preventDefault();
});

$.getJSON('/users', function(users) {
  $.each(users, function(user) { 
    var output = "<li>" + user.name + "</li>";
    $('#content ul').append(output);
 });
});

}); 
```

.getJson 指向的 json 是什么样的

```
[{"user":{"created_at":"2013-01-23T02:30:42Z","id":1,"name":"test","updated_at":"2013-01-23T02:30:42Z"}},
{"user":{"created_at":"2013-01-23T02:31:49Z","id":2,"name":"test","updated_at":"2013-01-23T02:31:49Z"}}] 
```

发布工作正常，但是当运行时，字段打印未定义，以前如果我输入 user.user.name 它会工作得很好，但显然这似乎不是最好的路线。

是否有我遗漏的东西或者这比我最初更复杂，但我认为为我的应用程序创建 API 客户端真正需要的只是像我在这里一样解析 json 并将其简单地输出到 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:26:01.220

你需要使用`user.user.name`. `$.each`遍历数组，但每个对象都有一个带有`user`键的对象，而`name`键在其中。

[http://jsfiddle.net/DC5Gg/](http://jsfiddle.net/DC5Gg/)

# javascript - 无法动态加载 Facebook 按钮

> ID：14471835
> 
> 赞同：1
> 
> 时间：2013-01-23T03:10:53.400
> 
> 标签：javascript, jquery, facebook, xfbml

我有一个网页，当您滚动到底部时，它会动态加载下一页，一旦新页面加载，我希望能够呈现所有新的 Facebook 按钮，但不是所有已经呈现的按钮。

对于我在哪里出错，我有点茫然，任何帮助将不胜感激，谢谢。

Javascript代码：

```
$('.fb-like:not(.fb_edge_widget_with_comment)').each(function(index, element) {
    $(element).attr('id', 'ajax-fb-like');
    FB.XFBML.parse(document.getElementById('ajax-fb-like'));
    $(element).removeAttr('id');
}); 
```

Facebook喜欢按钮代码：

```
<div class="fb-like" data-href="http://url.com/" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true"></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T03:29:45.150

您可以将喜欢的按钮更改为 XFBML 并用于`FB.parse()`动态制作按钮。

[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

[http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)

# actionscript-3 - 您如何描述 AS3 中的矩阵？

> ID：14471839
> 
> 赞同：2
> 
> 时间：2013-01-23T03:11:13.297
> 
> 标签：actionscript-3, matrix

不要误会我的意思，我知道如何在 AS3 中使用矩阵，例如在 createGradientBox() 我有这些参数：

```
matrix.createGradientBox(width, height, rotation, x, y); 
```

但我对 Matrix 如何在幕后工作感兴趣？你会如何描述一个矩阵？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:03:33.450

我喜欢的几个教程

[http://www.senocular.com/flash/tutorials/transformmatrix/](http://www.senocular.com/flash/tutorials/transformmatrix/)

[http://active.tutsplus.com/tutorials/effects/understanding-affine-transformations-with-matrix-mathematics/](http://active.tutsplus.com/tutorials/effects/understanding-affine-transformations-with-matrix-mathematics/)

# android - 文件下载Android中的HttpURLConnection授权失败

> ID：14471840
> 
> 赞同：0
> 
> 时间：2013-01-23T03:11:14.413
> 
> 标签：android, authorization, download, httpurlconnection, urlconnection

我想从 Android 中的服务器下载一个 zip 文件，为此我使用以下代码。它还需要授权，以便我在 URL 连接请求中传递用户名和密码。但我总是收到**401-Response code(UNAUTHORIZED)**。

代码 ：-

```
protected String doInBackground(final String... params) {
            int count;
            try {
                if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {
                    /*Authenticator.setDefault(new Authenticator(){
                        protected PasswordAuthentication getPasswordAuthentication() {
                            return new PasswordAuthentication(Constants.USERNAME,Constants.PASSWORD.toCharArray());
                        }});*/

                    Log.i(TAG, "URL == " + params[0]);
                    final URL url = new URL(params[0]);
                    final HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                    final String auth = new String(Constants.USERNAME + ":" + Constants.PASSWORD);
                    connection.setRequestProperty("Authorization", "Basic " + Base64.encodeToString(auth.getBytes(), Base64.URL_SAFE));
                    //connection.addRequestProperty("Authorization", "Basic " + Base64.encodeToString(auth.getBytes(), Base64.DEFAULT));
                    connection.setUseCaches(false);
                    connection.setConnectTimeout(5000);
                    connection.setDoOutput(true);
                    connection.connect();
                    Log.i(TAG, "Response == " + connection.getResponseMessage());
                    Log.i(TAG, "Response Code == " + connection.getResponseCode());

                    // download the file
                    final InputStream input = new BufferedInputStream(connection.getInputStream());
                    // Path to the just created empty db

                    // this will be useful so that you can show a tipical 0-100% progress bar
                    lenghtOfFile = connection.getContentLength();
                    lengthOfFileInMB = lenghtOfFile / 1048576;
                    Log.i(TAG, "File Size in MB = " + lengthOfFileInMB);

                    outFileName = Environment.getExternalStorageDirectory() + File.separator + ZIP_NAME;
                    final File file = new File(outFileName);
                    if (!file.exists()) {
                        file.createNewFile();
                    }

                    // Output stream
                    final BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(new FileOutputStream(file));
                    final byte data[] = new byte[lenghtOfFile];
                    long total = 0;

                    while ((count = input.read(data)) != -1) {
                        total += count;
                        publishProgress("" + total);
                        bufferedOutputStream.write(data, 0, count);
                    }
                    bufferedOutputStream.flush();
                    bufferedOutputStream.close();
                    input.close();
                } else {
                    Toast.makeText(DashboardActivity.this, "MEDIA IS NOT MOUNTED.", Toast.LENGTH_LONG).show();
                }
            } catch (final MalformedURLException e) {
                flag = false;
                Log.e(TAG, e.getMessage(), e);
            } catch (final FileNotFoundException e) {
                flag = false;
                Log.e(TAG, e.getMessage(), e);
            } catch (final IOException e) {
                flag = false;
                Log.e(TAG, e.getMessage(), e);
            } catch (final Exception e) {
                Log.e(TAG, e.getMessage(), e);
            }

            return null;
        } 
```

**我在同一台服务器中拥有 Web 服务，并且为了获得 JSON/XML 响应，我使用了 DefaultHttpClient。这工作得很好，我也得到了响应代码。我不知道为什么它在 URLConnection 时没有授权。**

这是它的代码。

```
String line = null;
        try {
            final URL urlObj = new URL(url);
            final HttpHost host = new HttpHost(urlObj.getHost(), urlObj.getPort(), urlObj.getProtocol());
            final HttpParams httpParameters = new BasicHttpParams();
            // Set the timeout in milliseconds until a connection is established.
            HttpConnectionParams.setConnectionTimeout(httpParameters, Constants.CONNECTION_TIME_OUT);
            // Set the default socket timeout (SO_TIMEOUT) 
            // in milliseconds which is the timeout for waiting for data.
            HttpConnectionParams.setSoTimeout(httpParameters, Constants.CONNECTION_TIME_OUT);

            final DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
            final AuthScope scope = new AuthScope(urlObj.getHost(), urlObj.getPort());
            final UsernamePasswordCredentials creds = new UsernamePasswordCredentials(Constants.USERNAME, Constants.PASSWORD);
            final CredentialsProvider credentialProvider = new BasicCredentialsProvider();
            credentialProvider.setCredentials(scope, creds);
            final HttpContext credContext = new BasicHttpContext();
            credContext.setAttribute(ClientContext.CREDS_PROVIDER, credentialProvider);

            final HttpGet job = new HttpGet(url);
            job.addHeader("USER-AGENT", userAgentString);
            final HttpResponse httpResponse = httpClient.execute(host,job,credContext);

            final HttpEntity httpEntity = httpResponse.getEntity();

            try {
                line = EntityUtils.toString(httpEntity);
            } catch (final ParseException e) {
                line = "Error";
                Log.e("Parse Error", e.getMessage().toString());
            } catch (final IOException e) {
                line = "Error";
                Log.e("IOException Error", e.getMessage().toString());
            }
            final StatusLine status = httpResponse.getStatusLine();
            Log.d("Authentication Status = ", status.toString());
        } catch (final ClientProtocolException e1) {
            line = "Error";
            Log.e("ClientPrtocol Error", e1.getMessage().toString());
        } catch (final ConnectTimeoutException e1) {
            line = "ConnectionTimeOut";
            Log.e("Connection Error", e1.getMessage().toString());
        } catch (final IOException e1) {
            Log.e("IO Error", e1.getMessage().toString());
            line = "Error";
        } 
```

我还尝试在 URLConnection 中添加以下代码以进行身份​​验证，但这对我也不起作用。

```
Authenticator.setDefault(new Authenticator() {
  protected PasswordAuthentication getPasswordAuthentication() {
     return new PasswordAuthentication(loginNameString, passwordString.toCharArray());
  }
}); 
```

**问题：-**

**1）是服务器端还是android端的问题？**

**2) 我可以使用我拥有的默认httpclient 代码下载文件吗？如果是的话，任何线索如何下载它，因为我认为我只能通过这种方式获取内容，而不是整个文件。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:02:42.550

似乎使用 HttpClient 是一种更直接的方法，在 Android 上也可以使用。

我将跳过 auth 部分，因为您的代码对我来说看起来不错，并且根据您的评论，下面的代码下载部分应该可以工作。这是典型的读写IO操作代码，来自我自己的项目。

```
 HttpGet httpget = new HttpGet(url);
    //
    // Authorization configuration code here ...
    // 
    HttpResponse response = httpClient.execute(httpget);
    HttpEntity entity = response.getEntity();

    //
    // The content is all cached in memory for demonstration only, 
    // you can also write to file system using FileOutputStream.
    //
    ByteArrayOutputStream baos = new ByteArrayOutputStream();

    if (entity != null) {
        InputStream inputStream = entity.getContent();

        byte[] buf = new byte[1024];
        int read = 0;

        try {
            while ((read = is.read(buf)) >= 0) {
                baos.write(buf, 0, read);
            }
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        } finally {
            try {is.close();} catch (Exception ex) {}
            try {baos.close();} catch (Exception ex) {}
        }
    }

    byte[] content = baos.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:41:41.770

我认为您需要添加，`connection.setDoInput(true)`否则我很确定您无法获取输入流（您可以在同一连接上同时拥有`doInput`和`doOutput`true）这可能无法回答您的确切问题，但它肯定会阻止您下载。

编辑：没有 setDoInput(true) 可能会阻止下载，我在您的代码中没有看到

# java - Spring3 所需的罐子和其他罐子的功能？

> ID：14471841
> 
> 赞同：0
> 
> 时间：2013-01-23T03:11:34.013
> 
> 标签：java, spring, jakarta-ee, jar, spring-3

我正在检查 Spring 3.1.1 Web 应用程序中是否有未使用的 jar。你知道这些罐子是干什么用的吗？

*   **激活-1.1.1.jar**
*   **aopalliance-1.0.jar**
*   **asm-3.3.1.jar** *- 根据 Google 的说法，这是 Spring 3 使用 ASM 所必需的吗？*
*   **aspectj-1.7.1.jar**
*   **aspectjrt-1.6.1.jar**
*   **aspectjweaver-1.6.1.jar**
*   **cglib-2.2.2.jar** *- 为什么有 2 个 cglib？除了包含更多类的 nodep 之外，它们似乎是相同的？它们是干什么用的？*
*   **cglib-nodep-2.2.jar**
*   **com.springsource.org.aopalliance-1.0.0.jar** *- 另一个 aopalliance jar？我已经有了 aopalliance-1.0.jar 和 org.springframework.aop-3.1.1.RELEASE.jar。这有什么不同？*
*   **jettison-1.1.jar** *- 似乎是一个 JSON StAX API。我们没有使用 JSON。*
*   **jstl.jar** *- 根据 Arun P Johny 用于 JSP*
*   ~~**jxl.jar** *- 请忽略这个。已经发现这是来自 JExcel。*~~
*   ~~**jxls-core-0.9.9.jar** *- 请忽略这个。这是另一个 Excel。API*~~
*   **slf4j-api-1.6.2.jar** *- 似乎是一个日志 API。我认为我们正在使用 log4j。这是 log4j 所必需的吗？*
*   **slf4j-log4j12-1.6.2.jar** *- 另一个 slf4j？我可以删除 2 个 slf4j 罐子中的任何一个吗？*
*   **标准.jar**
*   **上传bean.jar**

上面的罐子是我不熟悉的罐子。我也在网上搜索过，发现 Spring3（除了你可以从他们的网站下载的 jars 之外）有一些依赖 jars。你知道上面的名单是哪一个吗？你能列出上述罐子的功能吗？你认为我可以安全地删除哪些罐子？

我们的 Web 应用程序在 Tomcat 7 上运行。除了使用 Spring 3.1.1 之外，Web 应用程序还使用 MyBatis 进行数据库连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:38:56.953

您可以从类路径中删除这些项目并检查是否有任何编译错误，如果没有，那么您可以尝试使站点运行，如果它也很好，那么很可能没有库你应该没问题

您可以删除 cglib-2.2.2.jar 并保留 cglib-nodep-2.2.jar，

可能需要 slf4j，因为像 hibernate 这样的库使用它。

jstl 是 jsp 标签库 如果你不使用 jsp 你可以删除它

我认为您可以删除 com.springsource.org.aopalliance

# jsf-2 - 验证错误：值无效

> ID：14471842
> 
> 赞同：0
> 
> 时间：2013-01-23T03:11:44.600
> 
> 标签：jsf-2, primefaces

我写的客户转换器有问题。我从转换器调用我的 DAL 并将其作为托管属性注入。当我从我的一个 ui 组件调用转换器时，一切正常；但是，当我从另一个组件调用它时，注入的 DAL 为空。如果这是一个骗局，我深表歉意，我已经到处寻找答案。

我正在使用primefaces 3.5。

这是转换器：

```
@ManagedBean(name = "fanlistConverter")
public class FanlistConverter implements Converter, Serializable {
private  List<Fanlist> fanlist; 
@ManagedProperty(value="#{dAL}")
private DAL dAL;
private static Session session;

public FanlistConverter(){

} 

@PostConstruct
public void init(){
    session  = dAL.getSession();

}

public Object getAsObject(FacesContext facesContext, UIComponent component, String submittedValue) {  
    if (!submittedValue.equals(null) &&  !submittedValue.equals("null")) {  
        Fanlist fanlist = new Fanlist();

        try {  

                fanlist = (Fanlist)session.get(Fanlist.class, UUID.fromString(submittedValue));

            } catch(NumberFormatException exception) {  
                System.out.println("error: " + exception.getMessage());
                throw new ConverterException(new FacesMessage(FacesMessage.SEVERITY_ERROR, "Conversion Error", "Not a valid player"));  
            }catch(Exception e){
                System.out.println("error get as Object: " + e.getMessage());

            }

    } 

   return  fanlist; 

}  

 public String getAsString(FacesContext facesContext, UIComponent component, Object value) {  
        if (value == null || value.equals("")) {  
            return "";  
        } else {  
            return String.valueOf(((Fanlist) value).getId());  
        }  
    }   

public DAL getdAL() {
    return dAL;
}

public void setdAL(DAL dAL) {
    this.dAL = dAL;
} 
```

}

这是两个 ui 组件

这个有效：

```
 <p:panelGrid columns="3">
                    <p:outputLabel for="fanlist" value="Subscription Opt-In List    " />
                    <p:autoComplete id="fanlist" dropdown="true"
                        value="#{campaignWizard.selectedList}"
                        completeMethod="#{campaignWizard.complete}" var="f"
                        itemLabel="#{f.name}" itemValue="#{f}" converter="#{fanlistConverter}" />
                    <p:commandLink value="Add List"
                        actionListener="#{campaignWizard.addFanList}" update=":formbox2"
                        ajax="false" />
                </p:panelGrid> 
```

这个不行

```
 <p:selectManyMenu id="fanlist2" value="#{blast.selectedLists}"
                    var="fl" showCheckbox="true" converter="#{fanlistConverter}"
                    style="width:250px;height:100px">
                    <f:selectItems value="#{blast.fanlists}" var="fanl"
                        itemLabel="#{fanl.name}" itemValue="#{fanl}" />
                    <p:column>
                        Name: #{fl.name} 
                        </p:column>
                    <p:column>
                        Size: #{fl.name}
                        </p:column>
                </p:selectManyMenu>

@ManagedBean(name = "blast")
@ViewScoped
public class BlastBean implements Serializable {
@ManagedProperty(value="#{globalVars}")
private GlobalVars globalVars; 

@ManagedProperty(value="#{dAL}")
private DAL dAL;

@ManagedProperty(value="#{messaging}")
private Messaging messaging; 

private User u; 
private Blast blast;
private List<Fanlist> fanlists; 
private List<Fanlist> selectedLists;
private List<Fanlisttoparent> fltops = new ArrayList<Fanlisttoparent>();

    public  BlastBean(){

}

@PostConstruct
public void init(){

    fetchData();

}

public void fetchData(){
    u = globalVars.getUser();
    blast = new Blast();
    fanlists = dAL.query("FROM Fanlist where client.id ='" + globalVars.getUser().getClient().getId() + "'");

}   

...

public String sendBlast(){
    System.out.println("blast:" + blast.getMessage());
    dAL.upsert(blast);
    final List<String> phoneNumbers = new ArrayList<String>(); 

    List<Profile> profiles = new ArrayList<Profile>(); 
    for(Fanlist fl: selectedLists){
        Set<Fantolist> fantolist = fl.getFantolists();
        for(Fantolist ftol: fantolist){
            profiles.add(ftol.getFanprofile().getProfile());
        }

        for(Profile p: profiles){
            phoneNumbers.add("+1"+ p.getPhonenumber());
        }

    }

... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:12:51.637

首先，我们需要了解确切`Validation Error: Value is not valid`的发生时间。当当前选定项目的任何当前可用项目的`equals()`测试未返回时，将发生此错误。`true`

因此，从技术上讲，此错误有 2 个原因：

1.  项目类型的`equals()`方法丢失或损坏。

2.  与初始请求相比，当前可用项目的列表发生了不兼容的变化。

    当涉及转换器时，还有第三个原因：

3.  转换器已返回`null`，而不是`getAsObject()`.

根据目前提供的信息，转换器在一个页面上工作正常，但在其他页面上却不行。所以原因 1 可以安全地被划伤。遗留原因 2 和 3。

至于原因2，您需要保证`<f:selectItems value="#{blast.fanlists}">`在处理表单提交过程中不会返回不同的值。如果`#{blast}`bean 是请求范围的并且`fanlists`属性是基于在表单提交期间丢失的一些请求范围的变量初始化的，则可能会发生这种情况。您可以通过将 bean 放在视图范围中来修复它（并确保您没有在 getter 中执行业务逻辑）。

至于原因 3，调试器/记录器应该提供足够的线索，说明转换器是否正常工作。那么这个问题实际上已经超出了 JSF 的范围。根据提交的值返回正确的对象实例是开发人员的责任。

### 也可以看看：

*   [验证错误：值无效](https://stackoverflow.com/questions/9069379/validation-error-value-is-not-valid/9069660#9069660)

* * *

**与具体问题**无关。**转换器上的`@FacesConverter`注释是多余的。它没有在这个结构中使用。如果您使用它，则根本不会注入托管属性。另请参阅[如何注入@FacesConverter？](https://stackoverflow.com/questions/13156671/how-can-i-inject-in-facesconverter/13156834#13156834)**

# math - 计算以任意基数表示整数所需的长度

> ID：14471846
> 
> 赞同：7
> 
> 时间：2013-01-23T03:12:11.220
> 
> 标签：math, base, logarithm, radix

我有任意基数中整数表示的长度。假设长度为 15，基数为 36。然后我想计算出所述整数的表示在另一个任意基数中的长度。即，转换为基数 2 可能会导致长度为 68。

我知道它是按照下面的思路，但我不能完全理解我需要地板和天花板的东西，而且我得到的结果有些离谱：

```
length * log(fromBase) / log(toBase) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T05:59:48.983

遵循类似 Mathematica 的语法，让

```
Log[b,n] 
```

表示以 n 为底的 b 的对数。让`Log[n]`代表 的自然对数`n`。

那么比例

```
Log[b1,n]/Log[b2,n] 
```

是常数，并且等于

```
Log[b2]/Log[b1] 
```

这个比率是一个乘数，用于从 base 中的位数计算 base`b1`中的位数`b2`（反之亦然，如果你这样看的话）。对于问题中的示例，需要一个 15 位的 base-36 数字

```
15*Log[36]/Log[2] == 77.5489 
```

基数 2 位。当然，这正是您的问题。您只需要将最终答案四舍五入到下一个整数。

当然，我不确定为什么您似乎得到了一些偏离的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T15:58:44.497

可悲的是，如果不进行高精度计算，就没有精确的解决方案。例如，（我将在工作中使用 MATLAB，包括我自己编写的用于高精度工作的工具）什么是 2^200？在基数 10 中，我们得到：

```
vpij(2)^200
ans =
    1606938044258990275541962092341162602522202993782792835301376 
```

该数字使用以 201 为基数的 2 位数字以二进制形式表示。但是，2^200-1 只需要 200 个以 2 为底的数字即可表示。

```
vpij(2)^200 - 1
ans =
    1606938044258990275541962092341162602522202993782792835301375 
```

现在，我们可以通过只取最高位数字来计算这些数字的对数，作为双精度数。我们需要将一个数字的以 2 为底的对数加 1，以了解表示它所需的以 2 为底的数字的数量。

```
format long g
1 + log2(vpij(2)^200)
ans =
   201

1 + log2(vpij(2)^200 - 1)
ans =
   201 
```

这里 log2 正是这样做的，采用最高十进制数字来计算该日志。请注意，它无法判断第二个数字确实需要少一位数字才能以二进制形式存储。

```
vpij2bin(vpij(2)^200)
ans =
100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

vpij2bin(vpij(2)^200 - 1)
ans =
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111 
```

我们可以通过对这些数字进行高精度日志来了解会发生什么。因此，精确到小数点后 100 位，

```
log2(hpf(2,100)^200)
ans =
200

log2(hpf(2,100)^200 - 1)
ans =
199.9999999999999999999999999999999999999999999999999999999999991022086719253476184905817230522465495 
```

这两个数字之间的差异非常小。

```
log10(hpf(2,100)^200) - log10(hpf(2,100)^200 - 1)
ans =
2.702621195974725251000559400026211938865e-61 
```

因此，任何使用日志的计算都必须在此处失败，除非本身采用高精度日志。充其量，你可以在正确的数字范围内，但仅此而已。因此，如果您的目标只是为数字分配足够的空间，那么总是比明显需要的多分配一位数字。在您开始使用真正巨大的力量之前，这应该足够了。

（VPIJ 是 MATLAB 中的一种新的可变精度整数形式，它将直接取代我的旧 VPI 工具。HPF 已经在文件交换中可用。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-04T12:01:17.523

您可以在不使用对数的情况下得到准确的答案。沿着任意基数的基数向上走，直到数字适合里面。

Python 示例：

```
def count_digits(number, base):
    radix = 1
    while number >= base ** radix:
        radix += 1
    return radix 
```

# php - PHP MYSQL 回车

> ID：14471857
> 
> 赞同：0
> 
> 时间：2013-01-23T03:13:26.770
> 
> 标签：php

我有一个备份 wordpress 数据库的脚本，效果很好。但是，我试图用 php 恢复它，它总是在回车处停止，并且出错。错误：

> \n\n这是一个文本示例，第 1 行的 chang'
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '\n\n 附近使用的正确语法

我试过了 `nl2br`，，，，甚至他们。`htmlspecialchars``mysql_real_escape_string``preg-replacing`

这是我正在使用的代码：

```
// Connect to MySQL server
mysql_connect($mysql_host, $mysql_username, $mysql_password) or die('Error connecting to MySQL server: ' . mysql_error());
// Select database
mysql_select_db($mysql_database) or die('Error selecting MySQL database: ' . mysql_error());

// Temporary variable, used to store current query
$templine = '';
// Read in entire file
$lines = file($filename, FILE_IGNORE_NEW_LINES);
// Loop through each line
foreach ($lines as $line)
{
    // Skip it if it's a comment
    if (substr($line, 0, 2) == '--' || $line == '')
        continue;

    // Add this line to the current segment
    $templine .= $line;
    // If it has a semicolon at the end, it's the end of the query
    if (substr(trim($line), -1, 1) == ';')
    {
        // Perform the query
        mysql_query($templine) or print(mysql_error() . '<br /><br />');
        // Reset temp variable to empty
        $templine = '';
       }
} 
```

该`$filename`变量是一个`.sql`格式正确的文件。在数据库转储中，我可以看到**\n's**，并且我很确定`wordpress`做了某种`nl2br`，并将它们替换为`<p>`'s，因此可以删除它们或完全删除站点上的间距。

# jquery - jquery关闭切换

> ID：14471859
> 
> 赞同：0
> 
> 时间：2013-01-23T03:13:34.950
> 
> 标签：jquery, toggle

我有多个按钮切换同一个 div（实际上是我页面上的 iframe）。当我单击不同的按钮时，我希望它们“重新切换”，但是当我再次单击相同的按钮时，我只想关闭 div。

[JSFIDDLE](http://jsfiddle.net/thomascs/CfGYG/6/)

```
$(document).ready(function(){
    $('.leftbutton').click(function(){
        if($('#left').is(':visible')) return ; // ignoring
        $('#right').hide();
        $('#left').fadeIn();
    });
});

$(document).ready(function(){
    $('.rightbutton').click(function(){
        if($('#right').is(':visible')){
            $('#right').fadeOut();
            $('#right').fadeIn();
        } 
        else{
            $('#left').hide();
            $('#right').fadeIn();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:18:33.627

您可以做的是将最后一个单击的按钮存储为目标元素的一部分。例如：

```
$(".rightbutton").on('click', function () {
   $("#right").data('lastClicked', this); 
```

然后，比较最后点击的数据，`this`看看是否应该显示按钮。

[http://jsfiddle.net/CfGYG/10/](http://jsfiddle.net/CfGYG/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:19:34.027

要在再次单击时关闭左侧，您可以简单地隐藏它而不是在您的函数中返回。同样的概念也可以应用于右侧按钮：

```
$('.leftbutton').click(function(){
    if($('#left').is(':visible'))
    {
        $("#left").hide("slide");;
        return;
    }
    $('#right').hide();
    $('#left').fadeIn();
}); 
```

[http://jsfiddle.net/CfGYG/11/](http://jsfiddle.net/CfGYG/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T03:38:56.483

这两个答案都很有用，并且结合起来为我提供了我想要的所有功能。

看看这个 jsfiddle：http: [//jsfiddle.net/thomascs/nV5Tu/](http://jsfiddle.net/thomascs/nV5Tu/)

```
$(document).ready(function(){
    $('.leftbutton').click(function(){
        if($('#left').is(':visible')) {
            $('#left').hide();
        }
        else {
        $('#right').hide();
        $('#left').fadeIn();
        }
    });
});

$(document).ready(function(){
    $('.rightbutton').click(function() {
        if ($('#right').is(':visible')) {
              $('#right').fadeOut();
            if ($("#right").data('lastClicked') !== this) {
               $('#right').fadeIn();
            }
        } 
        else {
            $('#left').hide();
            $('#right').fadeIn();
        }
        $("#right").data('lastClicked', this);
    });
}); 
```

谢谢你的帮助！

# java - 确保鼠标光标坐标等于组件的 setBounds 坐标

> ID：14471872
> 
> 赞同：0
> 
> 时间：2013-01-23T03:15:16.327
> 
> 标签：java, swing, mouseevent, mousemove

这是我上一个问题的后续问题。我正在尝试解决上一个问题中的问题。 [关联](https://stackoverflow.com/questions/14453513/comparing-components-via-setname)

我正在编写一个图像益智游戏，其中一部分代码是将用户选择的部分与正确图像的部分进行比较。

每个图像片段都已作为 ImageIcon 添加到 JButton。

需要一个标识符来区分每个图像片段并进行比较。

我正在为作为标识符创建的每个 JButton 设置一个 setName()。

当用户从原始 3x3 网格中拖动块时，当用户将鼠标光标移动到另一个 3x3 网格上的特定按钮坐标时，比较开始。

已编辑：标记已编辑的代码。Flex似乎有一种方法可以检测光标下的对象，java有吗？ [Link](https://stackoverflow.com/questions/8621038/how-to-tell-if-the-mouse-cursor-is-over-a-component-using-the-mouse-coordinates) ^ getSource() 解决了上述问题。

但是，当我试图`system.out.println`查看按钮何时`getName()`运行时，当我将碎片拖到按钮时，它似乎没有运行；要激活`getName()`，我必须在将图像块拖到按钮后将鼠标悬停在按钮上 =/。

```
private int mouseX,mouseY;
private JButton[] button = new JButton[9];
private JButton[] userarea = new JButton[9];

// setName for each of the 9 buttons in the original 3x3 grid being created 
// which stores the shuffled puzzle pieces
for(int a=0; a<9; a++){
    button[a] = new JButton(new ImageIcon());
    id += Integer.toString(++cc);
    button[a].setName(id); 
}

// create 9 buttons for the user to place the puzzle pieces to
for(int b=0; b<9; b++){
         userarea[b] = new JButton();
         id2 += Integer.toString(++cc2);
         // setName for each button (as unique id)
         userarea[b].setName(id2); 
         TransferHandler transfer1 = new TransferHandler("icon");
         userarea[b].setTransferHandler(transfer1);
    //<--- EDITED CODE ------>
            ChangeListener clistener = new ChangeListener(){                 
               public void stateChanged(ChangeEvent ce) {

                     JButton source = (JButton)ce.getSource();
                     ButtonModel mod = source.getModel(); 
                     if (mod.isRollover()){
                     System.out.println(source.getName());
                     }
                     else{

                 }
             }
         };
   //<--- EDITED CODE ------>
}

public void nameOfDestButton() {

            // not sure how to do this
            if(mouseCoordinate == getBounds of one of the buttons){
                userarea[appropriate button number].getName();
            }
}

public void mouseMoved(MouseEvent m){
        mouseX=m.getX();
        mouseY=m.getY();

        nameOfDestButton();

        // not sure how to do this. Obtaining a return value of getName
        // in the nameOfDestButton() method ?
        if (m.getComponent().getName().equals(nameOfDestButton) {  

        }
        else{
             JOptionPane.showMessageDialog(null,"Wrong! Try Again.");
        }
    } 
```

# list - 使用列表列表，将每个列表的每个元素与每个其他列表的其他元素组合

> ID：14471876
> 
> 赞同：2
> 
> 时间：2013-01-23T03:15:55.670
> 
> 标签：list, haskell, combinations

我需要一个函数来获取（项目列表）列表，并枚举每个列表中每个项目的所有可能组合。所以

```
someCombo :: [[a]] -> [[a]]
someCombo = undefined 
```

如果我有这样的事情

```
[ 
 [a1,b1],
 [a2,b2,c2],
 [a3,b3]
] 
```

我想吐出这样的答案，每个列表的每个元素都与其他每个列表的每个元素匹配。大概在这种情况下，最终列表中有 12 个元素。

```
[
  [a1,a2,a3],[a1,a2,b3],[a1,b2,a3],[a1,b2,b3],...,[b1,c2,b3]
] 
```

main 参数中可以有任意数量的列表。这看起来应该很简单，但我无法完全理解它。我可以为两个或三个列表做这件事，但我不能让它递归地工作任意数量的列表。哦，我不在乎结果列表的顺序，只要我拥有全部 12 个（或其他）。

如果有人好奇这是为了什么，这是我需要实现的最后一块算法，该算法确定我在每次举重之前将盘子放在杠铃上的顺序，这将最大限度地减少我在每次锻炼中所做的盘子洗牌量。我认为这可能会为我每次锻炼节省几分钟。为了做到这一点，我需要列举所有可能的训练，这些训练涉及每次升降机的一组特定盘子，然后找到每个升降机的盘子顺序组合，从而导致最少的改组。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T03:18:43.667

```
import Control.Monad

someCombo = sequence 
```

让我们尝试一下：

```
>>> someCombo [[1, 2], [3, 4]]
[[1,3],[1,4],[2,3],[2,4]] 
```

要理解这一点，您需要了解列表推导式或列表单子。 `sequence`有效地做到了这一点：

```
sequence [[1, 2], [3, 4]]
= do x <- [1, 2]
     y <- [3, 4]
     return [x, y] 
```

你可以把它想象成“让`x`范围超过 1 和 2，让范围超过 3 和 4，现在返回和`y`的所有排列”。`x``y`

# php - 使用 PHP mkdir() 创建用户组目录时使用什么 chmod 权限

> ID：14471881
> 
> 赞同：0
> 
> 时间：2013-01-23T03:16:33.350
> 
> 标签：php, permissions, directory, chmod, mkdir

-

*   PHP Web 应用程序需要允许登录的管理员上传和删除图像到 Web 文件夹，以获取特定记录。

*   在 MySQL 数据库中创建记录时，还会在公共服务器上创建一个文件夹 - 使用 PHP mkdir() - 来保存该特定记录的图像。

*   同一应用程序将有多个用户，所有用户都需要向正在创建的文件夹添加和删除图像的权限。

*   该文件夹还需要继续通过 FTP 访问。

所以我想总的来说，它需要被登录用户访问——添加、编辑、删除、查看、FTP——但公众不能访问。

我应该为此使用什么文件夹权限？

为什么？安全？可访问性？编辑能力？

谢谢。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:29:48.920

使用 Web 界面上传文件时，您的上传目录需要可由 apache 用户写入。如果与文件的所有交互都将通过 Web 界面进行，您只需要担心 apache 用户，其他组将通过 Web 应用程序进行身份验证。

如果您正在创建文件夹，然后允许用户和组从您需要创建组的服务器访问文件。在这种情况下，请创建一个管理员组。

脚步：

```
//make the admin group
$ groupadd admin

// make the folder for uploads
$ sudo mkdir uploads

// make the apache user (apache or www-data) the owner and the group admin
$ chown apache.admin uploads

// give the folder permission using the sticky bit
// this will allow both apache and admin group to edit/add/delete in uploads
$ chmod 7752 uploads

// the sticky bit will maintain the group inside the uploads folder
// try it out
$ su apache
$ cd uploads
$ mkdir test
$ touch newFile.txt

// the new folder and new file should have admin as the group 
```

如果没有粘性位，上传中的新文件和文件夹将归 apache 和 apache 组所有。即... chmod 775 测试

现在，当您在上传文件夹中创建新文件夹时，管理员组中的用户将拥有对它们的 ftp 访问权限

# ruby - 使用 Windows 7（命令行）将文件提交到 git hub

> ID：14471883
> 
> 赞同：2
> 
> 时间：2013-01-23T03:16:49.480
> 
> 标签：ruby, github, commit

这是我第一次向 git hub 提交任何东西，我不知道自己在做什么。我使用了“git add”。命令在我正在工作的目录中添加所有文件。我的下一个命令是“git commit”。我得到了这个屏幕。我现在无法输入任何内容来进行更改。有谁知道该怎么做？

![在此处输入图像描述](../Images/4b9f61152081ed5551f0956a9bf92dfd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:22:24.387

你已经进入 vim 来编辑你的提交信息。有关使用该程序的一些帮助，请参阅此[vim 教程。](http://blog.interlinked.org/tutorials/vim_tutorial.html)

简洁版本：

点击`i`进入插入模式（看起来你已经无意中做到了，请参阅屏幕截图的底部）。输入您的提交信息。然后`esc`切换回“命令模式”，并`:wq`保存退出。您的提交消息将保存到临时文件中，然后用作提交的输入。

为避免将来出现这种情况，请使用`git commit -m "This is my commit message"`. 系统提示您（通过 vim）输入提交消息，因为您没有在提示符处提供提交消息。

# c - 绑定：无法分配请求的地址

> ID：14471885
> 
> 赞同：0
> 
> 时间：2013-01-23T03:17:18.737
> 
> 标签：c, tcp, bind

> **可能重复：**
> [无法分配请求的地址 - 可能的原因？](https://stackoverflow.com/questions/7640619/cannot-assign-requested-address-possible-causes)

```
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/wait.h>
#include <netinet/in.h>
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <unistd.h>
#include <netdb.h>
#include <time.h>
#include <string.h>

#ifdef STRERROR
extern char *sys_errlist[];
extern int sys_nerr;
char *undef = "Undefined error";

char *strerror(error)
int error;
{
    if (error > sys_nerr)
        return undef;
    return sys_errlist[error];
}
    #endif
    #define CIAO_PS "bfi_2"

main(argc, argv)
    int argc;
    char **argv;
{
    int lsock, csock, osock;
    FILE *cfile;
    char buf[4096];
    struct sockaddr_in laddr, caddr, oaddr;
    int caddrlen = sizeof(caddr);
    fd_set fdsr, fdse;
    struct hostent *h;
    struct servent *s;
    int nbyt;
    unsigned long a;
    unsigned short oport;
    int i, j, argvlen;
    char *bfiargv[argc+1];
    char *fintops = CIAO_PS ;

    if( argc < 4 )
    {
        fprintf(stderr,"Usage: %s localport remoteport remotehost fakeps\n",argv[0]);
        return 30;
    }

    for( i = 0; i < argc; i++ )
    {
        bfiargv[i] = malloc(strlen(argv[i]) + 1);
        strncpy(bfiargv[i], argv[i], strlen(argv[i]) + 1);
    }

    bfiargv[argc] = NULL;
    argvlen = strlen(argv[0]);

    if( argvlen < strlen(CIAO_PS) )
    {
        printf("Se vuoi fregare davvero ps vedi di lanciarmi almeno come superFunkyDataPipe !\n") ;
        abort();
    }

    if(bfiargv[4]) fintops=bfiargv[4] ;
    strncpy(argv[0], fintops, strlen(fintops));

    for( i = strlen(fintops); i < argvlen; i++ )
        argv[0][i] = '\0';

    for( i = 1; i < argc; i++ )
    {
        argvlen = strlen(argv[i]);
        for(j=0; j <= argvlen; j++)
            argv[i][j] = '\0';
    }

    a = inet_addr(argv[3]);

    if( !(h = gethostbyname(bfiargv[3])) && !(h = gethostbyaddr(&a, 4, AF_INET)) )
    {
        perror(bfiargv[3]);
        return 25;
    }

    oport = atol(bfiargv[2]);
    laddr.sin_port = htons((unsigned short)(atol(bfiargv[1])));

    if( (lsock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) == -1 )
    {
        perror("socket");
        return 20;
    }

    laddr.sin_family = htons(AF_INET);
    // laddr.sin_addr.s_addr = htonl(0);
    laddr.sin_addr.s_addr = inet_addr("IP OF THE PROXY");

    if( bind(lsock, &laddr, sizeof(laddr)) )
    {
        perror("bind");
        return 20;
    }

    if( listen(lsock, 1) )
    {
        perror("listen");
        return 20;
    }

    if( (nbyt = fork()) == -1 )
    {
        perror("fork");
        return 20;
    }

    if (nbyt > 0)
        return 0;

    setsid();
    while( (csock = accept(lsock, &caddr, &caddrlen)) != -1 )
    {
        cfile = fdopen(csock,"r+");
        if( (nbyt = fork()) == -1 )
        {
            fprintf(cfile, "500 fork: %s\n", strerror(errno));
            shutdown(csock,2);
            fclose(cfile);
            continue;
        }

        if (nbyt == 0)
            goto gotsock;

        fclose(cfile);
        while (waitpid(-1, NULL, WNOHANG) > 0);
    }

    return 20;

gotsock:
    if( (osock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) == -1 )
    {
        fprintf(cfile, "500 socket: %s\n", strerror(errno));
        goto quit1;
    }

    oaddr.sin_family = h->h_addrtype;
    oaddr.sin_port = htons(oport);
    memcpy(&oaddr.sin_addr, h->h_addr, h->h_length);
    if( connect(osock, &oaddr, sizeof(oaddr)) )
    {
        fprintf(cfile, "500 connect: %s\n", strerror(errno));
        goto quit1;
    }

    while( 1 )
    {
        FD_ZERO(&fdsr);
        FD_ZERO(&fdse);
        FD_SET(csock,&fdsr);
        FD_SET(csock,&fdse);
        FD_SET(osock,&fdsr);
        FD_SET(osock,&fdse);

        if( select(20, &fdsr, NULL, &fdse, NULL) == -1 )
        {
            fprintf(cfile, "500 select: %s\n", strerror(errno));
            goto quit2;
        }

        if( FD_ISSET(csock,&fdsr) || FD_ISSET(csock,&fdse) )
        {
            if ((nbyt = read(csock,buf,4096)) <= 0)
                goto quit2;
            if ((write(osock,buf,nbyt)) <= 0)
                goto quit2;
        }
        else if( FD_ISSET(osock,&fdsr) || FD_ISSET(osock,&fdse) )
        {
            if ((nbyt = read(osock,buf,4096)) <= 0)
                goto quit2;
            if ((write(csock,buf,nbyt)) <= 0)
                goto quit2;
        }
    }

quit2:
    shutdown(osock,2);
    close(osock);

quit1:
    fflush(cfile);
    shutdown(csock,2);

quit0:
    fclose(cfile);
    return 0;
} 
```

我想知道出于某种原因我确实编译了它，当我运行它时，我总是最终遇到这个错误

./proxyapp 5121 5121 我的真实服务器的 IP PChar 绑定：无法分配请求的地址

它应该将 3 个端口重定向到具有相同端口的某个代理 ip。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:50:15.263

端口 5121 已被使用。尝试另一个，或者设置 SO_REUSEADDR 如果它只是之前运行程序的产物。

注意，您需要关闭套接字，而不仅仅是关闭它们。

# javascript - jQuery keyup 延迟

> ID：14471889
> 
> 赞同：8
> 
> 时间：2013-01-23T03:17:43.420
> 
> 标签：javascript, jquery, delay

希望这对某人来说是一个快速而简单的方法。我对使用大量 javascript/jquery 相当陌生，并且我有以下设置从数据库中提取客户名称并在用户完成输入客户 ID 时显示它。

一切都很好，但它会在每个*keyup*进行搜索。我知道我可以将其更改为*模糊*，但我希望它可以**延迟**搜索。

这是当前代码：

```
function postData(){
    var id = $('#id').val();

    $.post('inc/repairs/events-backend.php',{id:id},   
        function(data){
        $("#display_customer").html(data);
    });
    return false;
}

$(function() {
    $("#id").bind('keyup',function() {postData()});
}); 
```

正如您所看到的，它绑定到每个 keyup，这意味着如果您搜索得太快，它可能会给您留下错误的结果，因为它仍在加载中。（即，如果未找到匹配项，则会显示错误，并且输入速度足够快，用户需要退格并重新输入最后一个数字）

有人可以协助在现有代码中添加延迟，并且如果可能的话，对您所做的更改进行一个小的解释，我宁愿不理解就只是复制和粘贴。

**- - 编辑 - -**

这是我完成的代码，谢谢大家！

```
function postData(){
    var id = $('#id').val();

    $.post('inc/repairs/events-backend.php',{id:id},   
        function(data){
        $("#display_customer").html(data);
    });
    return false;
}

$(function() {
    var timer;
    $("#id").bind('keyup input',function() {
        timer && clearTimeout(timer);
        timer = setTimeout(postData, 300);
    });
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T03:20:58.190

您应该查看[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)and[`clearTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)函数：

```
$(function() {
    var timer;
    $("#id").on('keyup',function() {
        timer && clearTimeout(timer);
        timer = setTimeout(postData, 300);
    });
}); 
```

基本上我们所做的是，我们不是`postData`立即触发函数，而是将它传递给`setTimeout`，以便它在给定时间（在本例中为 300 毫秒）后触发。

该`setTimeout`函数返回一个计时器 ID，然后我们可以将其传递`clearTimeout`给以取消该调用的运行。在每次按键时，在设置新计时器之前，我们首先检查是否设置了计时器。如果有，我们在开始新计时器之前取消旧计时器。

* * *

为了进一步增强这一点，您还可以在每次按键时[中止您的 AJAX 调用](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest?redirectlocale=en-US&redirectslug=XMLHttpRequest#abort%28%29)，以防用户在 300 多毫秒后（在计时器触发之后，但在 AJAX 请求返回之前）键入内容。

* * *

**PS**你应该看看 Ben Alman 的[油门/去抖动插件](http://benalman.com/projects/jquery-throttle-debounce-plugin/)，它在这里可以很好地工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T03:24:05.850

看看[Underscore 的`debounce`函数](http://underscorejs.org/#debounce)——它使这种行为变得非常简单：

```
$(function() {
  $('#id').on('keyup input', _.debounce(postData, 500))
} 
```

这样，`postData`只有在用户*停止输入*`500ms`（或您将 debounce 设置为任何内容）`wait`之后，才会调用

此外，除了击键（在现代浏览器中）之外，我还偷偷参加[了`input`活动以捕捉其他更改，例如复制/粘贴](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/input)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T03:23:24.683

我会在 keyup 上稍微延迟搜索，但您还需要中止最后一个请求，因为您无法预测它们将执行的顺序（*或者*您可以使用 ajax 队列）。

我将描述所有三个部分：

## 延迟

将 postData 回调包装在`setTimeout`. `setTimeout`存储as的返回值`$("#id").data('timeout')`并每次调用`clearTimeout`它，以便每个快速键入的字符串仅触发一次事件。

## 中止

将最后一个请求存储在`$("#id").data('lastRequest')`等等。每次`postData`调用，运行`$("#id").data('lastRequest').abort()`。将返回值存储 `$.post()`在该数据字段中。为了防止出错，初始化如下：

```
$("#id").data('lastRequest', {abort: function () {})); 
```

## 队列

```
$("#id").data('lastRequest', true);
...
$.when($("#id").data('lastRequest')).then(function () {
   $("#id").data('lastRequest', $.post(...));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T03:25:18.573

可能有更好的方法，但这是我的想法：

```
window.currentKeyup = 0;
$("#id").bind('keyup',function() {
    window.currentKeyup++;
    var keyup = window.currentKeyup;
    setTimeout(function(){
        if( keyup == window.currentKeyup ){
            postData();
        }
    },3000);
}); 
```

# mp4 - 有没有办法让 MP4 在所有带有 VideoJS 的浏览器中工作？

> ID：14471901
> 
> 赞同：0
> 
> 时间：2013-01-23T03:19:15.977
> 
> 标签：mp4, video.js, webm

在我为我的客户制作的网站的后端，我有一个输入供我的客户将 Dropbox URL 放入要`mp4`在前端播放的文件（他不想在服务器本身上托管文件）。

但是，对于[VideoJS](http://videojs.com/)，看起来我可能需要一些浏览器的 WebM 和其他浏览器的 MP4。

有没有办法让 MP4 在所有浏览器中与 VideoJS 一起工作？

我的客户不想为每个视频使用 2 或 3 种不同的文件类型，而只想使用一个`mp4`文件。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:40:23.580

这是。如果浏览器不能原生播放 MP4（例如 Firefox），video.js 使用轻量级的 Flash 组件来播放 MP4。这是默认行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T19:03:01.763

我使用 ffmpeg 将视频转换为 mp4。转换后，视频可在 IE、chrome 和 firefox 上运行。

我调用了一个执行以下内容的文件：

```
define('DS', DIRECTORY_SEPARATOR);
define('SOURCE_PATH', 'put the source path here' . DS);
define('DESTINY_PATH', 'put the destiny path here' .DS);

$cmd = ('ffmpeg -i ' .SOURCE_PATH. name of source file  . ' ' .DESTINY_PATH. name of  destiny file . '.mp4');
exec($cmd);

define('SOURCE_PATH', 'put the source path here' . DS);
define('DESTINY_PATH', 'put the destiny path here' .DS);

$cmd = ('ffmpeg -i ' .SOURCE_PATH. name of source file  . ' ' .DESTINY_PATH. name of destiny file . '.mp4');
exec($cmd); 
```

# ios - NSPredicate 聚合操作与 NONE

> ID：14471910
> 
> 赞同：9
> 
> 时间：2013-01-23T03:19:55.867
> 
> 标签：ios, objective-c, core-data, nspredicate

如何创建可以获取的谓词：所有问题都不包含`answer.correct = "1"`.

如果返回的数组包含“0”和“1”，则以下谓词不起作用：

```
[NSPredicate predicateWithFormat:@"NONE answers.correct IN %@", [NSArray arrayWithObject:@"1"]]; 
```

还尝试了 NOT (ANY ...) ：相同的结果

这是一个错误吗？

![数据模型](../Images/68238252e0d0c144a93944e7ae351b43.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-23T06:05:48.013

**简短回答：**要使用“正确 == 1”获取所有没有任何“答案”的对象，请使用以下 *SUBQUERY*：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(answers, $a, $a.correct == 1).@count == 0"] 
```

**解释：**两个谓词

```
[NSPredicate predicateWithFormat:@"NONE answers.correct == 1"]
[NSPredicate predicateWithFormat:@"NOT (ANY answers.correct == 1)"] 
```

应该可以工作（因为我理解 NOT 和 ANY 关键字），但他们没有。它们返回相同的结果集

```
[NSPredicate predicateWithFormat:@"ANY answers.correct != 1"] 
```

`-com.apple.CoreData.SQLDebug 3`通过设置启动参数和检查 SQL 选择语句可以看出。

这对我来说似乎是一个核心数据错误。使用 SUBQUERY 是解决该问题的方法。

# php - mysql查询结果错误输出

> ID：14471911
> 
> 赞同：-3
> 
> 时间：2013-01-23T03:20:03.447
> 
> 标签：php, mysql

更新数据时删除子表行后插入行，如何比较插入

```
$sql=mysql_query("INSERT INTO ( stu_no,username,maths,english,telugu,id) VALUES 
      ('".$_POST['stu_no']."','".$_POST['username']."','".$_POST['maths']."',
      '".$_POST['english']."',)'".$_POST['teslugu']."','".$_GET['id']."')"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:26:03.943

你错过了表名，所以这样做：

```
mysql_query("INSERT INTO table_name_here (stu_no,username.. 
```

**添加：**

```
$sql=mysql_query("INSERT INTO ( stu_no,username,maths,english,telugu,id) VALUES 
      ('".$_POST['stu_no']."','".$_POST['username']."','".$_POST['maths']."',
      '".$_POST['english']."','".$_POST['teslugu']."','".$_GET['id']."')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:55:48.657

@Sudhir 是对的，您错过了表名。此外，不要在 mysql 语句中直接使用 $_POST 值。你必须使用，

```
$username = mysql_real_escape_string($_POST['username']); 
```

还有一件事，如果您不想多次打开和关闭双引号，那么您还可以格式化查询字符串，例如，

```
mysql_query("INSERT INTO `table` (`stu_no`,`username`,`maths`,`english`,`telugu`, `id`)
 VALUES ('{$_POST['stu_no']}','{$_POST['username']}','{$_POST['maths']}',
'{$_POST['english']}','{$_POST['telugu']}','{$_GET['id']}')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T04:33:38.317

希望这对你有用。

```
$sql=mysql_query("INSERT INTO table ( `stu_no`,`username`,`maths`,`english`,`telugu`,`id`) VALUES 
  ('$_POST['stu_no']','$_POST['username']','$_POST['maths']',
  '$_POST['english']','$_POST['teslugu']','$_GET['id']')"); 
```

# c - C Mingw 中的椭圆运算符

> ID：14471917
> 
> 赞同：0
> 
> 时间：2013-01-23T03:20:34.573
> 
> 标签：c

我知道省略号运算符用于在函数接口中实现变量参数。但是，我想知道这 3 个省略号是某种宏还是内置的 C 构造。我正在查看 Mingw 标头，似乎找不到该宏的任何定义。我似乎没有 stdvar.h 和 varargs.h 是空的。如果省略号确实是一个宏，有人可以指导我实现它们吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:23:58.490

它不是宏。它是语言本身的一部分，因此是“内置 C 构造”。

找不到好的参考，但[谷歌结果](https://www.google.com.sg/search?q=...+ellipses+c+function&aq=0&oq=ellipses+c+f&aqs=chrome.1.57j0l2j60l3.5698&sugexp=chrome,mod=16&sourceid=chrome&ie=UTF-8)在调用它们`operator`和`specifier`

# peg - 我如何干燥这个 PEGjs 规则？

> ID：14471921
> 
> 赞同：1
> 
> 时间：2013-01-23T03:21:09.830
> 
> 标签：peg, pegjs

以下工作对于我正在尝试做的事情很好，但它显然是非常重复的。它应该与以下示例匹配：

*   #id.class1.class2 attr="asdsa"
*   .class1.class2 attr="asdsad"
*   attr="asds"

使用起来很诱人

```
id:idShortcut? classes:classShortcut* attrs:fullAttribute* 
```

但是如果所有三个组件都不存在，我不希望它匹配。如何指定 3 个可选组件的规则，但必须至少存在一个？

```
attributes = id:idShortcut classes:classShortcut* attrs:fullAttribute* 
{ 
  var ret = [['id', id]];
  for(var i = 0; i < classes.length; ++i ) {
    ret.push(['class', classes[i]]);
  }

  for(var i = 0; i < attrs.length; ++i ) {
    ret.push(attrs[i]);
  }

  return ret;
}
/ classes:classShortcut+ attrs:fullAttribute* { 

  // TODO: how to dry this with the above?

  var ret = [];
  for(var i = 0; i < classes.length; ++i ) {
    ret.push(['class', classes[i]]);
  }

  for(var i = 0; i < attrs.length; ++i ) {
    ret.push(attrs[i]);
  }

  return ret;
}
/ attrs:fullAttribute+ { 
  var ret = [];
  for(var i = 0; i < attrs.length; ++i ) {
    ret.push(attrs[i]);
  }
  return ret;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T01:31:58.340

这就是 And 谓词的用处

仅当 id 未定义、classes 不是空数组或 attrs 不是空数组时，属性才匹配。

```
attributes = 
    id:idShortcut? classes:classShortcut* attrs:fullAttribute* &{return id !== undefined || classes.length > 0 || attrs.length > 0;} 
    {
        var ret = [];
        if (id) {
            ret.push(['id', id]);
        }
        for (var x=0; x < classes.length;x++) {
            ret.push(['class', classes[x]);
        }
        for (var y=0; y < attrs.length;y++) {
            ret.push([attrs[y]);
        }
        return ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:42:11.160

好的，不知道为什么这对我来说甚至是一场斗争，但这很好地重构了如下（并且可能会进一步改进：

```
attributes 
  = a:( attributesAtLeastID
    / attributesAtLeastClass
    / attributesAtFullAttr ) 
{
  var id = a[0];
  var classes = a[1];
  var attrs = a[2];
  var ret = [];

  if(id) { ret.push(['id', id]); }

  for(var i = 0; i < classes.length; ++i ) {
    ret.push(['class', classes[i]]);
  }

  for(var i = 0; i < attrs.length; ++i ) {
    ret.push(attrs[i]);
  }
}

attributesAtLeastID = id:idShortcut classes:classShortcut* attrs:fullAttribute* { return [id, classes, attrs]; }
attributesAtLeastClass = classes:classShortcut+ attrs:fullAttribute* { return [null, classes, attrs]; }
attributesAtFullAttr = attrs:fullAttribute+ { return [null, [], attrs]; } 
```

# ruby - 用更灵活的解决方案替换 if 语句

> ID：14471922
> 
> 赞同：0
> 
> 时间：2013-01-23T03:21:10.457
> 
> 标签：ruby

我有带有代码作为属性的产品类。代码始终是一个数字，根据第一个数字，产品属于某种类型。

```
If first digit in 0,1,2,3 product is a 'A type'
If first digit in 4,5,6 product is a 'B type'
If first digit in 7,8,9 product is a 'C type' 
```

我正在寻找一种不使用 3 分支`if`语句来确定产品类型的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:04:38.903

一种面向对象的方法。显然，该`match?`方法可以以最能满足您的要求的任何方式编写，也可以根据您的需求变化进行调整——我在这里使用了正则表达式来帮助展示这种方法的灵活性。`TYPES`常量 &`type_for`方法应该封装在某个地方，但这取决于你决定在哪里。

```
class Type
  def initialize name, pattern
    @name = name
    @pattern = pattern
  end

  def match? code
    code =~ @pattern
  end
end

a_type = Type.new 'A', /^[0-3]/
b_type = Type.new 'B', /^[4-6]/
c_type = Type.new 'C', /^[7-9]/
TYPES = [a_type, b_type, c_type]

def type_for product
  TYPES.detect { |type| type.match? product.code }
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T03:36:36.313

您是否考虑过使用`case`声明？我不确定这是否满足您摆脱“3 分支 if 语句”的愿望，但也许它会给您带来其他考虑。

```
case code[0].to_i
when 0..3 then 'A type'
when 4..6 then 'B type'
when 7..9 then 'C type'
end 
```

我在上面假设“代码”属性实际上存储为字符串，因为您指定第一个数字可以是 0，并且在 Ruby 中，如果它是一个文字整数，它会将您的数字转换为八进制。如果这是一个错误的假设，只需更改 code[0] 位。

这有帮助吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T05:44:54.350

我倾向于在我自己的代码中使用这样的东西，仅仅是因为我宁愿定义一个表来显示与匹配值和预期输出的关系：

```
HASH = {
  /\A[0-3]/ => 'A type',
  /\A[4-6]/ => 'B type',
  /\A[7-9]/ => 'C type'
}

def get_type(s)
  HASH.keys.each { |regex| 
    return HASH[regex] if s[regex]
  }
end

[ '0001', '3000', '4000', '9000' ].each do |v|
  puts "#{ v } => #{ get_type(v) }"
end 
```

哪个输出：

```
0001 => A type
3000 => A type
4000 => B type
9000 => C type 
```

我尝试将诸如哈希之类的内容保留在 YAML 文件中，这样我们就不必修改代码来添加其他测试/类型。`YAML::load_file()`可以使用如下文件轻松初始化 HASH 常量：

```
---
? !ruby/正则表达式 /\A[4-6]/
: B型

? !ruby/正则表达式 /\A[0-3]/
： 一种

? !ruby/正则表达式 /\A[7-9]/
: C型

```

并使用简单的`puts HASH.to_yaml`.

也就是说，我`case`也强烈支持声明方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T03:36:58.767

```
def func(code)
  return 'A type' if code[0] == '0'
  ['A','B','C'][(code[0].to_i-1)/3] << ' type'
end

func('0ekrnn')   # => 'A type'
func('4mgm')     # => 'B type' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T03:53:26.677

您可以使用三元运算符

```
first_char = code[0].to_i
product_type = [0,1,2,3].include?(first_char) ? "A" : [4,5,6].include?(first_char) ? "B" : [7,8,9].include?(first_char) ? "C" : "" 
```

# d3.js - d3 模式在缺少时添加元素

> ID：14471923
> 
> 赞同：10
> 
> 时间：2013-01-23T03:21:17.003
> 
> 标签：d3.js

使用 D3，我发现自己经常这样做：

```
selectAll('foo').data(['foo']).enter().append('foo') 
```

如果节点不存在，我想简单地添加一个节点，因为我需要在 DOM 树的不同位置进行更新，而且我手头的数据与 DOM 并不完全平行。

这是否表明我应该重新格式化我的数据以使其平行，或者人们*是否*有一种不那么愚蠢的模式用于这种“如果丢失则创建”的事情？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T21:47:00.367

D3 实现了 DB 界众所周知的 JOIN + INSERT/UPDATE/DELETE 模式。在 d3 中，您首先选择一些 DOM 元素，然后将其与数据连接：

```
//join existing 'g.class' DOM elements with `data` elements
var join = d3.select('g.class').data(data)   

//get the join pairs that did not have 'g.class' join partner and
//INSERT new 'g.class' DOM elements into the "empty slots"
join.enter().append('g').attr('class', 'class')

//get the join pairs that did not have a `data` element as join partner and
//DELETE the existing 'g.class' DOM elements
join.exit().remove()

//get the join pairs that have a `data` element join partner and
//UPDATE the 'g.class' DOM elements
join.attr("name","value") 
```

您会看到，如果您的数据非常符合您的 UI 要求，您可以编写非常可维护的代码。如果您尝试在此模式之外进行 hack，您的 UI 代码很快就会让您非常难过。您应该预处理您的数据以适应 UI 的需求。

D3 为某些用例提供了一些预处理器。例如，[treemap](http://bl.ocks.org/4063582)布局函数将分层数据集展平为一个列表`treemap.nodes`，然后您可以将其用作简单的基于列表的数据集来为每个元素绘制一个矩形。树形图布局还会`x,y,width,height`为您计算所有值。您只需绘制矩形，不再关心层次结构。

以同样的方式，您可以开发自己的辅助函数来

1.  将您的数据转换为更好的消费格式，并
2.  尝试用 UI 的“提示”来丰富数据，如何绘制它

这些“提示”可能包括几何值、标签文本、颜色，以及基本上您无法通过查看单个数据元素（例如树形图几何）直接得出的所有内容，这需要您将每个元素与部分/全部相关联其他元素（例如，确定树中节点的嵌套深度）。在一个预处理步骤中执行此类任务可以让您为该任务编写更清晰、更快的代码，并将数据处理与 UI 的绘制分开。

# linux - svn ssh 连接的详细日志记录

> ID：14471924
> 
> 赞同：11
> 
> 时间：2013-01-23T03:21:17.427
> 
> 标签：linux, svn, ssh

有谁知道通过 ssh 连接操作时如何让 SVN 记录 ssh 连接的详细信息？

当我无法连接时，svn 总是给我：

```
To better debug SSH connection problems, remove the -q option from 'ssh' in the [tunnels] section of your Subversion configuration file. 
```

我查看了配置的 [tunnels] 部分，目前没有启用任何内容。似乎您可以指定如何调用 ssh，我尝试通过此方法指定 -v 来 ssh，但它似乎没有效果。当 SVN 尝试连接时，我真正想要的是 ssh 的 -v 输出。尽管任何额外的日志记录都会很好。

如何通过 SVN 获取详细的 ssh 日志记录？

我在 linux 的命令行中使用 SVN。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-23T03:24:37.243

如果您在 Windows 上使用 *nix 之类的系统或 cygwin，您可以尝试使用以下方法：

```
$ export SVN_SSH="ssh -v "
$ svn checkout svn+ssh://xyz 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-07-08T18:36:59.327

我只是有同样的问题。[如此处](http://benjchristensen.com/2010/06/01/useless-svn-error-message-network-connection-closed-unexpectedly/)所述，删除`~/.ssh/known_hosts`为我解决了它。

# .net - 使用“动态”抛出 RuntimeBinderException

> ID：14471929
> 
> 赞同：0
> 
> 时间：2013-01-23T03:21:51.663
> 
> 标签：.net, c#-4.0

```
public class Peploe
{
    public string Name { get; set; }
}

public class Animal
{
    public string NickName { get; set; }
}

internal static class Program
{
    /// <summary>
    /// This 'ItemSorce' will be assignment by anywhere , so i don't know it have 'Name' property.
    /// </summary>
    public static IEnumerable ItemSource { get; set; }

    private static void Main()
    {
        var list = new List<Peploe>() {new Peploe() {Name = "Pato"}};
        ItemSource = list;

        //Test2
        //var animals = new List<Animal>() { new Animal() { NickName = "Pi" } };
        //ItemSource = animals;

        dynamic dy;
        foreach (var item in ItemSource)
        {
            dy = item;
            Console.WriteLine(dy.Name);//If I Uncomment 'Test2',it will throw a RuntimeBinderException at here.
        }
    }
} 
```

如果我使用反射，它可以解决这个问题。但是当'ItemSource'非常大时，'foreach'会执行很多次，性能很差。我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:59:32.607

您需要添加一点点反射以使其完全动态。相信我不会影响性能，因为我已经在使用它了。这是我从您的示例中创建的代码示例。它还没有准备好生产，但你会得到基本的想法，你可以如何做到这一点，并受到你的所有限制。

```
dynamic dy;
            List<dynamic> result = new List<dynamic>(); 

            foreach (var item in ItemSource)
            {
                dy = new ExpandoObject();
                var d = dy as IDictionary<string, object>;

                foreach (var property in item.GetType().GetProperties())
                {
                    d.Add(property.Name, item.GetType().GetProperty(property.Name).GetValue(item, null));
                }

                result.Add(dy);
            }

            foreach (var item in result)
            {
                var r = ((dynamic)item) as IDictionary<string, object>;
                foreach (var k in r.Keys)
                {
                    Console.WriteLine(r[k] as string);
                }
            } 
```

这段代码完全按照你想要的方式工作。它不取决于您在课堂上拥有的任何财产。如果需要任何进一步的细节，请告诉我。

# jquery - 缩小引导程序

> ID：14471931
> 
> 赞同：2
> 
> 时间：2013-01-23T03:22:08.253
> 
> 标签：jquery, css, twitter-bootstrap

我正在尝试创建一个使用 Bootstrap compatible`<div>, <span>`等标签的“帖子”创建者。当用户在文本框中输入他们的帖子时，我希望在它旁边创建一个“预览”，大小为 1/2 页面宽度。所以，里面的所有东西都会缩小2。

我的问题：有没有办法缩小 Bootstrap 元素，以便可以将其制作成预览？我可以使用`jquery`等来获取输入并将其动态格式化到页面上，但我只需要知道如何实际缩小所有内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:37:28.900

假设您可以对目标受众做出假设或设置最低浏览器指南，则一种选择是使用[CSS3 2D Transforms](http://www.w3schools.com/css3/css3_2dtransforms.asp)。因此，例如，如果您希望将预览窗口缩放 50%，您可以执行以下操作：

```
#my-preview-div {
transform: scale(.5);
-ms-transform: scale(.5); /* IE 9 */
-webkit-transform: scale(.5); /* Safari and Chrome */
-o-transform: scale(.5); /* Opera */
-moz-transform: scale(.5); /* Firefox */      
} 
```

然后，您可以使用 jquery 将预览 html 注入到您的预览 div 中，例如 `<div id="my-preview-div"></div>`.

# html - 最小高度：100% 不起作用

> ID：14471935
> 
> 赞同：0
> 
> 时间：2013-01-23T03:23:01.693
> 
> 标签：html, css

我正在尝试创建一个 div，当没有足够的内容可以正常执行此操作时，该 div 将扩展到屏幕高度的 100%，但如果有足够的内容，它将正常扩展超出该高度。如果我的 div 被称为容器，那么每当我使用

```
#container
{
min-height: 100%;
} 
```

它似乎对高度没有任何影响。当我使用

```
#container
{
height: 100%;
min-height: 100%;
} 
```

它将高度设置为固定的 100%，切断通常超过屏幕高度 100% 的任何内容。我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:28:07.490

你可以试试

```
body, html {
    height: 100%;
} 
```

借用[这个答案](https://stackoverflow.com/questions/6737790/min-height-100)。你也可以[参考这个](http://peterned.home.xs4all.nl/examples/csslayout1.html)。

[小提琴](http://jsfiddle.net/arunpjohny/bq8mm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:28:26.753

也许你能给我们一个你的 HTML的[JSfiddle吗？](http://jsfiddle.com)它会帮助我们帮助你。

我想你可以使用：

```
#container
{
    height: 100%;
    overflow: auto;
} 
```

或者使用位置/浮动/清除。

# c# - SignalR 中组的性能问题？

> ID：14471938
> 
> 赞同：2
> 
> 时间：2013-01-23T03:23:08.003
> 
> 标签：c#, asp.net-mvc, signalr, signalr-hub

SignalR 中的大量组对性能有多大影响？例如，以一个有帖子的社交网络为例，对需要通过 SignalR 中心更新的帖子进行评论。最好为每个帖子创建一个组，然后将评论更新发送到该组，将评论更新发送给所有客户端，然后让客户端代码决定是否更新，或者是还有另一种我想念的方式吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:43:53.620

当您通过 SignalR 向客户端广播消息时，该消息会转到一个主题，然后该主题会被推送到订阅该主题的客户端/客户端。每个连接的客户端都有一个主题，每个组都有自己的主题。

发送给一个组（与它关联的用户超过 1 个）总是比发送给单个用户更快。但是，组确实会占用内存。单个组的内存远不及整个用户的内存量，但如果创建过多，您会看到损失。

因此，您的问题的答案是，这取决于。根据您的应用程序的规模和实现，您可以使许多组工作或不工作。

例如，几个人对一个帖子发表评论的情况肯定会证明一个小组是合理的，而一个人在他们的墙上发表评论为 0 的情况则不会。

希望这可以帮助！

# methods - 何时通过 ref 或 value 与方法一起使用

> ID：14471952
> 
> 赞同：-1
> 
> 时间：2013-01-23T03:24:50.480
> 
> 标签：methods

我被问到下面的问题，我被卡住了。我理解价值和参考之间的区别，但不知道我什么时候会在方法中使用它们。

如果你在写一个方法，你会选择哪种参数传递方法，如果有的话？为什么？

我在下面发现了这一点，以帮助我了解差异。

“如果我告诉你 URL，我是通过引用传递的。你可以使用该 URL 来查看我可以看到的同一个网页。如果该页面被更改，我们都会看到更改。如果你删除 URL，所有你'正在破坏您对该页面的引用-您并没有删除实际页面本身。

如果我打印出页面并给您打印输出，我就是按价值传递。您的页面是原始的断开连接的副本。您不会看到任何后续更改，并且您所做的任何更改（例如在打印输出上涂鸦）都不会显示在原始页面上。如果您销毁打印输出，您实际上已经销毁了您的对象副本——但原始网页仍然完好无损。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:16:04.747

请记住，按值传递会产生副本。不这样做可能有两个原因。首先，如果您传递的值是一些大型数据结构（或其他任何使用大量内存的数据），则复制整个数据可能效率低下且没有必要。其次，如果您希望对参数的任何更改都反映在调用函数中，则必须通过引用传递。这样，原始值会被修改，而不是副本。

当这两种情况都不适用时，按值传递通常更简单，也是更好的选择。

还有一件事要考虑。按值传递，因为它创建一个副本，保护原始函数中的值不被意外修改。但是，您可能希望通过引用传递来获得性能优势。在这种情况下，最好通过引用传递，但将参数标记为`const`（或任何适合您的语言的）。

# ruby-on-rails - Rails 3 数据表 JSON - aData 未定义

> ID：14471956
> 
> 赞同：0
> 
> 时间：2013-01-23T03:25:00.110
> 
> 标签：ruby-on-rails, json, datatables

我知道这个问题之前已经被问过很多次了，但是由于我没有经验，我无法使用这些回答来纠正这个问题。我在以前的 Rails 项目中使用过它，但看不到发生了什么变化。我使用 PostgreSQL 而不是 MySQL 开始了一个新项目，现在我使用的是 Rails 3.2.8（原为 3.2.1）。

Firebug 显示：TypeError：aData 未定义于：

```
var aData = _fnGetObjectDataFn( oSettings.sAjaxDataProp )( json );
for ( var i=0, iLen=aData.length ; i<iLen ; i++ ) 
```

我认为这可能是由于 Datatables 没有获得正确的 JSON 造成的。下面显示了一个片段，它在 JSONLint 中验证。

```
[{"code":"STATE 30","created_at":"2012-12-10T06:01:34Z","id":1,"name":"ALBANY     HIGHWAY","rank":null,"state":"WA","updated_at":"2012-12-10T06:01:34Z"},{"code":"ANNE BEADELL HIGHWAY","created_at":"2012-12-10T06:01:34Z","id":2,"name":"ANNE BEADELL HIGHWAY","rank":null,"state":"SA","updated_at":"2012-12-10T06:01:34Z"},... 
```

我看到它不包括 iTotalRecords、iTotalDisplayRecords 和 aaData。这是问题吗？我认为 JSON 选项是由 def as_json 设置的，购买我没有在我的渲染中明确引用它？？http get（如 Firebug 中所示）包括 sEcho 但不包括 iTotalRecords。

我的代码基于 RailsCasts #340：

控制器：（见列表动作）。

```
class HighwaysController < ApplicationController
  respond_to :html, :json

def index
  @highways = Highway.all
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @highways }
  end
end

def list
  @highways = Highway.all
  logger.debug "Highway Count: #{@highways.size}"
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: HighwaysDatatable.new(view_context)}
  end
end 
```

相关的 Ruby 代码：

```
class HighwaysDatatable
  delegate :params, :h,:link_to,:number_to_currency,to: :@view

  def initialize(view)
    @view = view
  end

  def as_json(options = {})
    {
     sEcho: params[:sEcho].to_i,
     iTotalRecords: Highway.count,
     iTotalDisplayRecords: highways.total_entries,
     aaData: data
    }
  end

  private

  def data
    highways.map do |highway|
      [
       h(highway.id),
       h(highway.name),
       h(highway.state),
       h(highway.code),
       h(highway.rank),
       h(highway.created_at),
       h(highway.updated_at)
      ]
    end
  end

  def highways
    @highways ||= fetch_highways
  end

  def fetch_highways
    ...  (as per RailsCasts code - code wrapped and did not show properly)    
  end
   highways
 end

 def page
   params[:iDisplayStart].to_i/per_page + 1
 end

 def per_page
   params[:iDisplayLength].to_i > 0 ? params[:iDisplayLength].to_i : 10
 end

 def sort_column
  columns = %w[name state code rank]
  columns[params[:iSortCol_0].to_i]
 end

 def sort_direction
    params[:sSortDir_0] == "desc" ? "desc" : "asc"
 end
end 
```

和列表视图：

```
<% @page_title = "Highways List" %>

  <h2>Highways</h2>

  <%= javascript_tag do %>
    window.highwaysURL = '<%= j highways_url %>';
  <% end %>

  <div id="EditLink">
    <%= link_to "Edit Highway", :controller => :highways, :action => :edit, :id => 1 %>
  </div>  
  <div>
    </br>
      <%= link_to 'Neighbours', '/neighbours/' %>
      <%= link_to 'Localities', '/localities/' %>
    </br>
  </div>
  <div id="tools">

  </div>      

 <table id="highways" class="display" data-source="<%= highways_url(format: "json") %>">
    <thead>
      <tr>
        <th>Id</th>
        <th>Highway</th>
        <th>State</th>
        <th>Code</th>
        <th>Rank</th>
        <th>Created At</th>
        <th>Updated At</th>
      </tr>
    </thead>
    <tbody>

    </tbody>    
 </table>

 <div id=editarea class='result'    ></div> 
```

我的 gemfile（删除了评论）：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'pg'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end
gem 'libv8', '~> 3.11.8'
gem 'therubyracer', require: 'v8'
gem 'jquery-rails'
gem 'will_paginate'
gem 'debugger' 
```

和用于资产管道的 application.js：

```
//= require jquery
//= require jquery-ui
//= require jquery.dataTables
//= require TableTools
//= require ZeroClipboard
//= require datatable_highways
//= require datatable_localities
//= require datatable_neighbours
//= require_tree . 
```

这可能很简单，但它一直困扰着我一段时间。感谢期待。

**更新**

DataTables 调试器小书签指示“列表”视图正在呈现以下内容，其中不包括 DataTables 预期的 json 参数。

```
http://localhost:3000/highways.json 
```

我相信它应该是：

```
http://localhost:3000/highways/list.json. 
```

我不确定这是控制器还是视图问题。

**更新**

我进行了各种更改，但仍然遇到同样的问题。但我在日志中看到两件事很重要：

输入 localhost:3000/highways/list 显示渲染了 2 个视图。

```
 Processing by HighwaysController#list as HTML [1m[36mHighway Load (4.8ms)[0m  [1mSELECT "highways".* FROM "highways" ORDER BY name  
 Highway Count: 229
 Rendered highways/list.html.erb within layouts/highways (32.6ms) 
```

然后

```
Processing by HighwaysController#index as JSON
Parameters: {"sEcho"=>"1", "iColumns"=>"5", "sColumns"=>"", "iDisplayStart"=>"0",... 
```

第一个是 HTML（通过操作“列表”），第二个是 JSON（通过操作“索引”）。

所以有两个问题：

1.  第一个渲染有一个相关的数据请求，这会导致来自 DataTables 的“已初始化”警告，并且

2.  我的 routes.rb 显式匹配语句正在捕获 HTML 以呈现视图，但 JSON 响应（来自对数据行的 AJAX 调用）失败并由资源处理：highways，然后它在控制器

路线.rb

```
match 'highways/list'=> 'highways#list' 
...
resources :highways 
```

当我只想呈现视图（列标题等）时，如何停止数据请求？
我需要什么路由将 JSON 响应发送到控制器中的“列表”操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:35:10.763

解决。回到最小设置，使用 Ryan Bates #340 代码的 1 个表 - 因此使用索引操作/视图来解决上面的 2 个渲染问题。还是行不通。将 gem 移除到 rweng github 并将 DataTables 文件加载到 ./vendor/assets。现在工作。索引或列表操作可能可以通过显式路由修复，但是当我试图通过列表操作强制它时，我无法通过“缺少模板”。

# ruby - Ruby 字符串到 int/float 的转换

> ID：14471960
> 
> 赞同：4
> 
> 时间：2013-01-23T03:25:19.753
> 
> 标签：ruby

所以假设我有一个字符串，`'$3,444.11'`. 如何将其转换为 float `3,444.11`？我有一个表单域。用户可以插入`"3,444.11"`, `"3444.11"`, 或`"$3,444.11`" 或`"€3,444.11"`. 我需要的是`3,444.11`作为一个浮点数。我是否必须求助于正则表达式？或者，是否已经有一个我忽略的功能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T03:30:09.170

我认为标准库中没有任何东西可以为您做到这一点。这是一个快速的单行：

```
'$3,444.11'.gsub(/[^\d\.]/, '').to_f
# => 3444.11 
```

但是，您可能想查看[`money`](http://rubymoney.github.com/money/)用于高级处理货币字符串的 gem。

# css - 获得更多垂直 div 和分隔页脚

> ID：14471963
> 
> 赞同：1
> 
> 时间：2013-01-23T03:25:40.293
> 
> 标签：css, html, width

几个小时以来，我一直在尝试获取我在图像上发布的内容，但我无法达到...为什么这些 CSS 对用户如此不友好？

例如，如果绿色的 2 个 div 长度不同，我的页脚将张贴在最短的绿色 div 下方。

如果所有内容都可以针对 1000 像素更窄的窗口调整大小，我也想这样做。

谢谢！

所以...我发现我无法发布图片...

我尝试在这里“绘制”：

```
---------------------------------------------------
|                 DIV                             |
---------------------------------------------------
|                  DIV                            |
--------------------------------------------------
|                  DIV                            |
---------------------------------------------------
|            some white space                     |
-----------------------   -------------------------
|                     |  |                        |
|                     |S |                        |
|                     |P |                        |
|                     |A |                        |
|                     |C |                        |
|                     |E |                        |
|DIV (about 30% width)|  | DIV (rest of width)    |
|                     |  |                        |
|                     |  |                        |
|                     |  |                        |
|                     |  |                        |
|                     |  |                        |
|                     |  |                        |
|_____________________|  |________________________|
|               some white space                  |
|_________________________________________________|
|                   div for footer etc.           |
|_________________________________________________| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:44:20.860

以下是您的 HTML 布局

```
<div>
  <div class="div1">
  </div>
    <div class="div1">
  </div><div class="div1">
  </div>
    <div class="left">
  </div>    <div class="right">
  </div>
    <div class="footer">
  </div>
</div> 
```

以下是它的 CSS。

```
.div1
{
    width:100%;  
    border:1px solid black;
    height:50px;
    margin:5px;
}
.left
{
 width:30%;   
 border:1px solid black;
 margin:5px;
 height:50px;
 float:left;
}
.right
{
 width:60%;
 border:1px solid black;
 height:50px;
 float:right;
 margin:5px;

}
.footer
{
     width:100%;  
     border:1px solid black;
     height:50px;
    overflow: auto; 
    margin:5px;

} 
```

改变高度。或者，如果您在 DIV 中添加内容，则无需更改高度，它们将自动获得高度。

[在这里看小提琴](http://jsfiddle.net/xyJ8J/)

# sockets - FD_SIZE 和应用程序可以在 Windows 中使用的最大套接字数

> ID：14471964
> 
> 赞同：0
> 
> 时间：2013-01-23T03:25:42.810
> 
> 标签：sockets, winsock, winsock2, winsockets

我在 Windows 上使用流媒体服务器，它达到了 32 个流限制。根据 msdn [http://support.microsoft.com/kb/111855](http://support.microsoft.com/kb/111855)上的以下文章，我们发现原因是 FD_SET 大小，winsock 中默认为 64。

将 FD_SET 大小增加到 128 后，我们可以流式传输更多频道。

问题是，1\. 增加 FD_SET 大小是否安全？2\. 增加 FD_SET 的大小能保证套接字的可用性吗？3\. FD_SIZE 可以动态设置还是只在编译时设置？我们能以编程方式找到最大限制吗？

谢谢。米...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T06:35:12.127

在 Windows 中，我成功地将 FD_SETSIZE 设置为 32767。

# javascript - 如何使用回调函数在 TypeScript 中保留词法范围

> ID：14471975
> 
> 赞同：41
> 
> 时间：2013-01-23T03:27:33.387
> 
> 标签：javascript, callback, typescript

我有一个 TypeScript 类，带有一个我打算用作回调的函数：

```
removeRow(_this:MyClass): void {
    ...
    // 'this' is now the window object
    // I must use '_this' to get the class itself
    ...
} 
```

我将它传递给另一个函数

```
this.deleteRow(this.removeRow); 
```

依次调用 jQuery Ajax 方法，如果成功，调用回调，如下所示：

```
deleteItem(removeRowCallback: (_this:MyClass) => void ): void {
    $.ajax(action, {
        data: { "id": id },
        type: "POST"
    })
    .done(() => {
        removeRowCallback(this);
    })
    .fail(() => {
        alert("There was an error!");
    });
} 
```

我可以保留对我的类的“this”引用的唯一方法是将它传递给回调，如上所示。它有效，但它是裤子代码。如果我没有像这样连接“this”（对不起），那么回调方法中对 this 的任何引用都已恢复到 Window 对象。因为我一直在使用箭头函数，所以我希望“this”是类本身，就像在我类的其他地方一样。

任何人都知道如何在 TypeScript 中传递回调，保留词法范围？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-23T04:18:56.400

## 编辑 2014-01-28：

新读者，请务必在下面查看[Zac 的答案](https://stackoverflow.com/a/21386201/81723)。

他有一个更简洁的解决方案，可以让您使用胖箭头语法在类定义中定义和实例化一个作用域函数。

我唯一要补充的是，关于Zac 答案中的**选项 5**，可以使用以下语法指定方法签名和返回类型而无需任何重复：

```
public myMethod = (prop1: number): string => {
    return 'asdf';
} 
```

## 编辑 2013-05-28：

定义函数属性类型的语法已更改（自 TypeScript 0.8 版以来）。

以前你会定义一个这样的函数类型：

```
class Test {
   removeRow: (): void;
} 
```

现在已更改为：

```
class Test {
   removeRow: () => void;
} 
```

我已在下面更新了我的答案以包含此新更改。

*顺便说一句：*如果您需要为同一个函数名称定义多个函数签名（例如运行时函数重载），那么您可以使用对象映射表示法（这在 jQuery 描述符文件中被广泛使用）：

```
class Test {
    removeRow: {
        (): void;
        (param: string): string;
    };
} 
```

* * *

您需要将签名定义为`removeRow()`类的属性，但在构造函数中分配实现。

有几种不同的方法可以做到这一点。

## 选项1

```
class Test {

    // Define the method signature here.
    removeRow: () => void;

    constructor (){
        // Implement the method using the fat arrow syntax.
        this.removeRow = () => {
            // Perform your logic to remove the row.
            // Reference `this` as needed.
        }
    }

} 
```

如果你想保持你的构造函数最小，那么你可以将`removeRow`方法保留在类定义中，并在构造函数中分配一个代理函数：

## 选项 2

```
class Test {

    // Again, define the method signature here.
    removeRowProxy: () => void;

    constructor (){
        // Assign the method implementation here.
        this.removeRowProxy = () => {
            this.removeRow.apply(this, arguments);
        }
    }

    removeRow(): void {
        // ... removeRow logic here.
    }

} 
```

## 选项 3

最后，如果您使用的是下划线或 jQuery 之类的库，那么您可以使用它们的实用方法来创建代理：

```
class Test {

    // Define the method signature here.
    removeRowProxy: () => void;

    constructor (){
        // Use jQuery to bind removeRow to this instance.
        this.removeRowProxy = $.proxy(this.removeRow, this);
    }

    removeRow(): void {
        // ... removeRow logic here.
    }

} 
```

* * *

然后你可以稍微整理一下你的`deleteItem`方法：

```
// Specify `Function` as the callback type.
// NOTE: You can define a specific signature if needed.
deleteItem(removeRowCallback: Function ): void {
    $.ajax(action, {
        data: { "id": id },
        type: "POST"
    })

    // Pass the callback here.
    // 
    // You don't need the fat arrow syntax here
    // because the callback has already been bound
    // to the correct scope.
    .done(removeRowCallback)

    .fail(() => {
        alert("There was an error!");
    });
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-01-27T16:31:15.023

更新：请参阅 Sly 的更新答案。它包含以下选项的改进版本。

另一个更新：泛型

有时您想在函数签名中指定泛型类型，而不必在整个类中指定它。我花了几次尝试弄清楚语法，所以我认为它可能值得分享：

```
class MyClass {  //no type parameter necessary here

     public myGenericMethod = <T>(someArg:string): QPromise<T> => {

         //implementation here...

     }
} 
```

**选项 4**

这里还有一些语法可以添加到 Sly_cardinal 的答案中。这些示例将函数声明和实现保留在同一位置：

```
class Test {

      // Define the method signature AND IMPLEMENTATION here.
      public removeRow: () => void = () => {

        // Perform your logic to remove the row.
        // Reference `this` as needed.

      }

      constructor (){

      } 
```

}

或者

**选项 5**

更紧凑一点，但放弃了显式返回类型（如果不显式，编译器无论如何都应该推断返回类型）：

```
class Test {

      // Define implementation with implicit signature and correct lexical scope.
      public removeRow = () => {

        // Perform your logic to remove the row.
        // Reference `this` as needed.

      }

      constructor (){

      } 
```

}

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-19T20:52:38.627

使用 .bind() 在回调中保留上下文。

工作代码示例：

```
window.addEventListener(
  "resize",
  (()=>{this.retrieveDimensionsFromElement();}).bind(this)
) 
```

原始问题中的代码将变成这样：

```
$.ajax(action, {
    data: { "id": id },
    type: "POST"
})
.done(
  (() => {
    removeRowCallback();
  }).bind(this)
) 
```

它将回调函数内的上下文（this）设置为作为参数传递给绑定函数的任何内容，在本例中为原始 this 对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-21T21:05:28.590

这是来自另一个答案的交叉帖子（[TypeScript 中是否有 'this' 的别名？](https://stackoverflow.com/questions/12756423/is-there-an-alias-for-this-in-typescript/22567957#22567957)）。我使用上面的示例重新应用了这个概念。我比上面的选项更喜欢它，因为它明确支持类实例以及调用该方法的动态上下文实体的“this”范围。

下面有两个版本。我喜欢第一个，因为编译器有助于正确使用它（由于显式类型的参数，您不会轻易尝试滥用回调 lambda 本身*作为*回调）。

测试一下： [http ://www.typescriptlang.org/Playground/](http://www.typescriptlang.org/Playground/)

```
class Test {

    private testString: string = "Fancy this!";

    // Define the method signature here.
    removeRowLambdaCallback(outerThis: Test): {(): void} {
        alert("Defining callback for consumption");
        return function(){
            alert(outerThis.testString); // lexically scoped class instance
            alert(this); // dynamically scoped context caller
            // Put logic here for removing rows. Can refer to class
            // instance as well as "this" passed by a library such as JQuery or D3.
        }
    }
    // This approach looks nicer, but is more dangerous
    // because someone might use this method itself, rather
    // than the return value, as a callback.
     anotherRemoveRowLambdaCallback(): {(): void} {
        var outerThis = this;
        alert("Defining another callback for consumption");
        return function(){
            alert(outerThis.testString); // lexically scoped class instance
            alert(this); // dynamically scoped context caller
            // Put logic here for removing rows. Can refer to class
            // instance as well as "this" passed by a library such as JQuery or D3.
        }
    }
}

var t = new Test();
var callback1 = t.removeRowLambdaCallback(t);
var callback2 = t.anotherRemoveRowLambdaCallback();

callback1();
callback2(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-26T16:41:52.233

基于 sly 和 Zac 对类型的回答：一个完整​​的 hello world 示例。我希望这是受欢迎的，因为这是在 Google 中搜索“typescript javascript callbacks”时的最高结果

```
type MyCallback = () => string;

class HelloWorld {

    // The callback
    public callback: MyCallback = () => {
        return 'world';
    }

    // The caller
    public caller(callback: MyCallback) {
        alert('Hello ' + callback());
    }
}

let hello = new HelloWorld();
hello.caller(hello.callback); 
```

这被转换为：

```
var HelloWorld = (function () {
    function HelloWorld() {
        // The callback
        this.callback = function () {
            return 'world';
        };
    }
    // The caller
    HelloWorld.prototype.caller = function (callback) {
        alert('Hello ' + callback());
    };
    return HelloWorld;
}());
var hello = new HelloWorld();
hello.caller(hello.callback); 
```

希望有人觉得它有点用处。:)

# php - PHP增加1个月但考虑到年份变化

> ID：14471978
> 
> 赞同：0
> 
> 时间：2013-01-23T03:27:42.337
> 
> 标签：php, date

我有以下功能可以仅从当月提取评论。我需要它不要从下个月拉出任何评论。

我将下个月定义为`$to_date`如何`+1`更改它以自动确定下一年的时间，即防止它在第 13 个月查看？谢谢

```
Function to only pull comments from a date range of the current month
     $from_date = date('Y-m') . '1 00:00:00';
     $to_date = date('m') . '1 00:00:00'+1;
     $all_comments = Comment::find('all', 
     array(
         'conditions'=>array('response_date_and_time >= ? AND response_date_and_time <= ?', $from_date, $to_date )
     )
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:38:10.557

strototime 可以为您做到这一点。您可以使用关键字“now + 1 month”，它将当前日期 +1 并返回 unix 时间戳，日期函数将转换为正确的月份。应该返回 02

```
$to_date = date('m', strtotime('now + 1 month')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:45:04.623

有两种方法。正如已经提到的，您可以使用 strtotime：

```
$to_date = date('m', strtotime('now + 1 month')) . ' 00:00:00'; 
```

但我认为了解模运算符对您来说也是一个好主意`%`。基本上，模数将在除法后返回余数（在 PHP 中这是一个整数，在其他语言（如 JavaScript）中它也将包括任何十进制值）。在这种情况下，这意味着我们有一种快速简便的方法来确保月份换行永远不会高于 12。

```
// get the modulus
$dt = ((date('m')+1)%12);
// bit of a trick. December is the 12th month. 12 % 12 is 0, which is invalid
// so we check to see if the month is 0, and if it is we use 12 instead.
$to_date = ($dt?$dt:12) . ' 00:00:00'; 
```

# php - 如何从这个复杂的数组系统中编译 SQL 查询

> ID：14471980
> 
> 赞同：0
> 
> 时间：2013-01-23T03:27:59.690
> 
> 标签：php, mysql, sql

乍一看，我认为这很简单，只需通过内爆数组来构造一个 sql 查询，但我就是想不通如何达到这一点。基本上我有一个程序可以将用户输入分解为我的表所需的方式，现在我需要将该数据放入 SQL 命令中，你可以看到我是如何尝试这样做的，不用说我在我的束手无策。

HTML：

```
<form action="go.php" method="post">
<h1>Enter port data to view how your table will look</h1>
<label for="ports">Number of Ports:</label><input type="text" id="ports" name="ports" size="30"><br>
<label for="super">Super Columns:</label><input type="text" id="super" name="super"  size="30"><br>
<label for="columns">Columns:</label><input type="text" id="columns" name="columns" size="30"><br>
<label for="rows">Rows:</label><input type="text" id="rows" name="rows" size="30"><br> 
```

PHP：

```
//post vars
$port = (int)$_POST['ports'];
$super = (int)$_POST['super'];
$col = (int)$_POST['columns'];
$row = (int)$_POST['rows'];
//rest of vars
$halfPort=$port/2;//12
$colHalf = $col / $super;//6
$half=$colHalf-1;//5
$i=1;
$count=1;
$and=1;
$one=1;
$s=1;

echo "<h1>here goes nothen</h1><br><br>";
//sperate port
$finalArray = array();
for ($i = $port; $i >= 1; $i -= $colHalf) {
    $tempArray = array();
    for ($j = 0; $j < $colHalf; $j++) {
        $tempArray[] = $i - $j;
    }
    $tempArray[]= sort($tempArray);
    $finalArray[] = implode(",", $tempArray);
}
$finalArray = array_reverse($finalArray);
echo "<pre>" . print_r($finalArray, true) . "</pre>";

echo "<br><br>";
//sql for insert
$sqlinsert='
        INSERT INTO '.$tbl_name2.'
        (PortNumber) VALUES ';
$start='(';
$end=')';
    $c=1;
$b=0;
//while to finish SQL
$queryStart=array();
$queryEnd=array();
while($c<$half){
    echo "<br>c:".$c."<br>";
$queryStart[]=explode(',',$finalArray[$b]);
    echo "<pre>" . print_r($queryStart, true) . "</pre>";
    $queryEnd[]=

$c+=$and;
$b+=$and;
unset($queryStart);
} 
```

这是我第一次打印的输出：

```
Array
(
[0] => 1,2,3,4,5,6,1
[1] => 7,8,9,10,11,12,1
[2] => 13,14,15,16,17,18,1
[3] => 19,20,21,22,23,24,1
) 
```

第二个：

```
c:1
Array
(
[0] => Array
    (
        [0] => 1
        [1] => 2
        [2] => 3
        [3] => 4
        [4] => 5
        [5] => 6
        [6] => 1
    )

)

c:2
Array
(
[0] => Array
    (
        [0] => 7
        [1] => 8
        [2] => 9
        [3] => 10
        [4] => 11
        [5] => 12
        [6] => 1
    )

)

c:3
Array
(
[0] => Array
    (
        [0] => 13
        [1] => 14
        [2] => 15
        [3] => 16
        [4] => 17
        [5] => 18
        [6] => 1
    )

)

c:4
Array
(
[0] => Array
    (
        [0] => 19
        [1] => 20
        [2] => 21
        [3] => 22
        [4] => 23
        [5] => 24
        [6] => 1
    )

) 
```

我觉得我很接近，只是不能让自己打最后一点我想。有任何想法吗？

另外作为旁注，请忽略数组末尾的尾随 1，它似乎来自运行`sort()`

# ios - iOS 上的 mathml -- mtable 行间距

> ID：14471981
> 
> 赞同：0
> 
> 时间：2013-01-23T03:28:05.760
> 
> 标签：ios, webkit, margins, mathml, cellpadding

这真让我抓狂。我需要 mtable 元素的行之间的间距。现在，我满足于在 html 中获取它；一旦我有这个工作，我会尝试将它移动到 CSS 中。

这是我正在尝试的一些事情。在每种情况下，我都将空间量设置得非常大，这样如果它有效，它将是无误的。但到目前为止，我看不到任何空间。

mathML 的实现是不完整的。但直到现在，我已经能够为几乎所有事情找到解决方法。

```
 <math>
        <mtable rowspacing="10ex">
            <mtr padding="40px">
                <mtd padding="40px">
               <!-- remainder of the table here --> 
```

另一种尝试，同样无用：

```
 <math>
        <mtable framespacing="40px 40px">
            <mtr margin="40px">
                <mtd margin="40px">
               <!-- remainder of the table here --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:52:15.040

这做到了：

```
 <mtd style="padding:10px 0 10px 0"> 
```

# php - 为什么以两种不同的方式比较数组时这里的输出差异

> ID：14471982
> 
> 赞同：1
> 
> 时间：2013-01-23T03:28:06.463
> 
> 标签：php, arrays

我将数组与`array_diff_key`and进行比较，`array_diff_ukey` 但输出与两个数组不同。手册说除了后一个函数接受回调之外，这两个函数没有区别，但我得到了输出的差异。

```
$array1 = array("a" => "green", "red", "blue", "red");
$array2 = array("b" => "green", "yellow", "");

print_r($result = array_diff_key($array1, $array2));

$result = array_diff_ukey($array1, $array2, function($key1, $key2) {
                                    if ($key1 == $key2)
                                        return 0;
                                    elseif ($key1 > $key2)
                                        return 1;
                                    else
                                        return -1;
                    });

print_r($result); 
```

输出：

```
Array
(
    [a] => green
    [2] => red
)
Array
(
    [2] => red
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:37:36.343

这是因为您`==`在回调中使用了运算符。比较字符串时，应始终使用`===`.

```
var_dump("b" == 0);
> true 
```

您可以通过修改回调以输出相等的键来亲自查看：

```
if ($key1 == $key2)
{
    echo $key1 . " == " . $key2 . " = " . var_export($key1 == $key2, true) . "<br>";
    return 0;
} 
```

将导致：

```
0 == a = true
a == 0 = true
0 == b = true
b == 0 = true
a == 0 = true
0 == b = true
1 == 1 = true 
```

原因是当您将 int 与 string 进行比较时，`==`它们都会被转换为 int 值；所以“a”变成了0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:43:25.560

我知道了。

`array_diff_*`函数的版本通过首先将它们转换为字符串类型然后比较来比较值/键。

所以我的回调应该是

```
$result = array_diff_ukey($array1, $array2, function($key1, $key2) {
                                    if ((string) $key1 == (string) $key2)
                                        return 0;
                                    elseif ($key1 > $key2)
                                        return 1;
                                    else
                                        return -1;
                    }); 
```

# vim - “如何避免 GVim 治疗 比如 è ?” 或“有没有办法让 GVim 使用转义序列作为元修饰符？”？

> ID：14471983
> 
> 赞同：4
> 
> 时间：2013-01-23T03:28:06.417
> 
> 标签：vim

语境：

`set encoding=utf-8`

如果我输入：

`:imap <M-h> foo`

然后我输入

`:imap <M-h>`

我得到：

`i è foo`

`<M-h>`和，结果，`è`如果在插入模式下按下，则插入`foo`

我在 Ubuntu 12.04 和 Windows XP 上测试了这种行为

链接到[这个问题](https://stackoverflow.com/questions/6778961/alt-key-shortcuts-not-working-on-gnome-terminal-with-vim)，似乎 GVim 将 Meta 键添加`0x80`到键码中。
阅读之前链接的答案并用谷歌搜索，我认为这可能只是终端 Vim 的问题，而不是 GVim 的问题。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T07:06:54.000

由于键盘输入在内部处理的方式，不幸的是，这在今天是不可能的，即使在 GVIM 中也是如此。更糟糕的是，某些组合键，如`Ctrl`+`non-alphabetic`无法映射，无法区分`Ctrl`+`letter`与`Ctrl`++ 。`Shift``letter`

一些人（最重要的是 Paul LeoNerd Evans）想要解决这个问题（即使是支持此功能的终端中的控制台 Vim），并提出[了各种建议](http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8)。

但是截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。

# groovy - 在 SoapUI 中使用 groovy-wslite

> ID：14471988
> 
> 赞同：0
> 
> 时间：2013-01-23T03:29:05.520
> 
> 标签：groovy, soapui

我在 Windows 7 机器上使用 SoapUI 4.5.1 版来创建模拟 Web 服务。它包括一个在 OnRequest 事件中触发的 Groovy 脚本，该事件试图创建和发送第二个响应。

问题与 groovy-wslite 库的安装有关，我试图使用它来实例化发送附加响应的 SoapClient 对象。

如果我在脚本顶部包含以下内容（根据[https://github.com/jwagenleitner/groovy-wslite](https://github.com/jwagenleitner/groovy-wslite)上的 wslite github 站点）：

```
@Grab(group='com.github.groovy-wslite', module='groovy-wslite', version='0.7.1') 
```

...我收到以下错误：

```
java.lang.NoClassDefFoundError: org/apache/ivy/core/settings/IvySettings 
```

如果我从脚本中删除它，我会收到以下错误：

```
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed: Script6.groovy: 23: unable to resolve class SOAPClient @ line 23, column 18.
       def client = new SOAPClient(clientURL)
                    ^
org.codehaus.groovy.syntax.SyntaxException: unable to resolve class SOAPClient  @ line 23, column 18. 
```

谁能建议我做错了什么？我需要在 SoapUI 中单独安装 groovy-wslite 吗？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:49:45.447

我已经下载了 groovy-wslite jar 并将其添加到我的 SoapUI 安装的 bin/ext 目录中。

# javafx - 扩展时锚不工作

> ID：14471989
> 
> 赞同：0
> 
> 时间：2013-01-23T03:29:17.223
> 
> 标签：javafx, extend, pane

我用 x 和 y 轴创建了自己的图表。我发现目前的图表选择不适合我的需要。我已经设法根据自己的喜好构建图表，现在我想将所有组件添加到扩展 AnchorPane 的对象中。最终结果是我的代码编译时没有错误，没有运行时错误，但我没有看到我创建的任何窗格。我想知道扩展 AnchorPane 的正确程序是什么。

这是我的类中扩展应用程序的代码。奇迹般有效：

```
 Vector <String[]>  v = new Vector<String[]>();
        double highest_high = 0;
        double lowest_low = 0;
        AnchorPane anchorpane = new AnchorPane();

        double xaxisHeight = 20;
        double yaxisWidth = 60;
        double chartYAdjustment = 40;
        double barGap = 3;
        double bars = 15;
        final Chart chart = new Chart(v, yaxisWidth, xaxisHeight, highest_high, lowest_low, chartYAdjustment, barGap);
        final YAxis yaxis = new YAxis(yaxisWidth, highest_high, lowest_low);
        final XAxis xaxis = new XAxis(xaxisHeight, barGap, bars);

        AnchorPane.setTopAnchor(yaxis, 0.0);
        AnchorPane.setRightAnchor(yaxis, 0.0);
        AnchorPane.setBottomAnchor(yaxis, 20.0);        

        AnchorPane.setLeftAnchor(xaxis, 0.0);
        AnchorPane.setRightAnchor(xaxis, 60.0);
        AnchorPane.setBottomAnchor(xaxis, 0.0);     

        AnchorPane.setLeftAnchor(chart, 0.0);
        AnchorPane.setTopAnchor(chart, 0.0);
        AnchorPane.setBottomAnchor(chart, 0.0);
        AnchorPane.setRightAnchor(chart, 0.0);

        anchorpane.getChildren().addAll(chart, yaxis, xaxis);

        Scene s = new Scene(anchorpane, 800, 400, Color.BLACK);
        stage.setScene(s);
        stage.show(); 
```

当我将代码放在扩展 AnchorPane 的类中时：

```
public class Main extends AnchorPane{

    public void Main(){
        Vector <String[]>  v = new Vector<String[]>();
        double highest_high = 0;
        double lowest_low = 0;      

        double xaxisHeight = 20;
        double yaxisWidth = 60;
        double chartYAdjustment = 40;
        double barGap = 3;
        double bars = 15;
        final Chart chart = new Chart(v, yaxisWidth, xaxisHeight, highest_high, lowest_low, chartYAdjustment, barGap);
        final YAxis yaxis = new YAxis(yaxisWidth, highest_high, lowest_low);
        final XAxis xaxis = new XAxis(xaxisHeight, barGap, bars);

        AnchorPane.setTopAnchor(yaxis, 0.0);
        AnchorPane.setRightAnchor(yaxis, 0.0);
        AnchorPane.setBottomAnchor(yaxis, 20.0);        

        AnchorPane.setLeftAnchor(xaxis, 0.0);
        AnchorPane.setRightAnchor(xaxis, 60.0);
        AnchorPane.setBottomAnchor(xaxis, 0.0);     

        AnchorPane.setLeftAnchor(chart, 0.0);
        AnchorPane.setTopAnchor(chart, 0.0);
        AnchorPane.setBottomAnchor(chart, 0.0);
        AnchorPane.setRightAnchor(chart, 0.0);

        getChildren().addAll(chart, yaxis, xaxis); 
```

然后在我的扩展应用程序的类中，我有：

```
Main main = new Main();
Scene s = new Scene(main, 800, 400, Color.BLACK);
            stage.setScene(s);
            stage.show(); 
```

它只显示一个黑色窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:45:12.870

弄清楚我做错了什么。我在构造方法调用中有“void”。

# objective-c - 使用数组动态删除按钮

> ID：14471990
> 
> 赞同：0
> 
> 时间：2013-01-23T03:29:19.763
> 
> 标签：objective-c, uibutton, labels

我有一个视图，其中包含用户动态添加的标签。如果用户想编辑任何标签，他们按下一个按钮，所有标签都会通过删除按钮和移动按钮突出显示。（编辑是我稍后会跨越的另一座桥）。

我的问题是：打开和关闭按钮的最佳方法是什么？我有一种打开按钮的方法……但我不知道在完成编辑时如何关闭它们。我是否需要标记我的按钮然后“隐藏它们”？还是我完全删除它们？我如何解析所有打开的按钮，然后将它们关闭。我是否也需要将它们放入数组中？标签上标有唯一的数字，所以我知道哪个标签是哪个。

有什么想法吗？指导？如果我做错了，请告诉我。

这是我有的几种方法：

```
- (void) showEditableText {
// Parse the array of labels
    if(textArray.count > 0){
        for(UILabel *label in textArray){

//Add Delete Button           
 UIImage * delButtonImage = [UIImage imageNamed:@"GUI_Delete.png"];
            UIButton * delThisButton = [[UIButton alloc] initWithFrame:CGRectMake(label.frame.origin.x - delButtonImage.size.width, label.frame.origin.y - delButtonImage.size.height, delButtonImage.size.width, delButtonImage.size.height)];
 [delThisButton setBackgroundImage:delButtonImage forState:UIControlStateNormal];
            [delThisButton addTarget:self action:@selector(deleteThisLabel:) forControlEvents:UIControlEventTouchUpInside];
            [self addSubview:delThisButton];

            //Add a move button
            UIImage * moveButtonImage = [UIImage imageNamed:@"GUI_Move.png"];
            UIButton * moveThisButton = [[UIButton alloc] initWithFrame:CGRectMake((label.frame.origin.x + label.frame.size.width + moveButtonImage.size.width), label.frame.origin.y - moveButtonImage.size.height, moveButtonImage.size.width, moveButtonImage.size.height)];
 [moveThisButton setBackgroundImage:moveButtonImage forState:UIControlStateNormal];
            [moveThisButton addTarget:self action:@selector(moveThisLabel:) forControlEvents:UIControlEventTouchUpInside];
            [self addSubview:moveThisButton];

//Make the text highlighed
            label.highlighted = YES;
            label.backgroundColor  = [UIColor colorWithRed:203/255.0f green:230/255.0f blue:239/255.0f alpha:1];
            label.highlightedTextColor = [UIColor redColor];
        }
    }
}

- (void) doneEditingText {
    if(textArray.count > 0){
        for(UILabel *label in textArray){
//THIS IS WHERE I AM STUCK? WHAT DO I DO?

            label.highlighted = NO;
            label.backgroundColor  = [UIColor clearColor];
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:49:50.940

```
//inside your first method set the same tag to your all buttons

-(void) showEditableText {

........
.......
.......
 delThisButton.tag = 10;

 moveThisButton.tag = 10;

}

//inside your second method delete all the subviews using this tag as shown below..

-(void) doneEditingText {

    if(textArray.count > 0){
        for(UILabel *label in textArray){
..............................

//THIS IS WHERE I AM STUCK? WHAT DO I DO?

    for (UIView *subview in [self.view subviews]) {
        if (subview.tag == 10) {
            [subview removeFromSuperview];
        }
    }
...............................

            label.highlighted = NO;
            label.backgroundColor  = [UIColor clearColor];
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:40:15.163

尝试这个

```
UIView *   seletetButton = nil;
for (UIView * btn in self.view.subviews){
    if ([btn isKindOfClass:[UIButton class]])
    {
        if (seletetButton.tag != btn.tag)
        {
            [btn removeFromSuperview];
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T03:34:19.097

将所有按钮代码移至`viewDidLoad`，隐藏它们 ( `button.hidden = YES`)。当您开始/完成编辑文本时，取消隐藏和隐藏您的按钮。您还需要一个 ivar 来包含按钮。因此，将它们添加到您的 .h 文件中。

# jquery - 如何在流体布局中不使用 flexslider 切断幻灯片

> ID：14471995
> 
> 赞同：0
> 
> 时间：2013-01-23T03:30:16.407
> 
> 标签：jquery, carousel, fluid-layout, flexslider

我需要一些帮助。我在我的网站上使用[了 flexslider](http://www.woothemes.com/flexslider/)，但有问题。我的网站是流动的。它应该调整 li 的边距以更改可见区域中的幻灯片数量。例如，当分辨率为 1366px 时可见 4 个项目，当分辨率为 1024px 时可见 3 个项目，就像[这里](http://www.nikolakis.net/liquidcarousel/)一样，没有人必须切断，只是可见区域中的整数数量的幻灯片。你能说这个滑块可以吗？因为它有选项：

```
minItems: 0,                    //{NEW} Integer: Minimum number of carousel items that should be visible. Items will resize fluidly when below this.

maxItems: 0,                    //{NEW} Integer: Maxmimum number of carousel items that should be visible. Items will resize fluidly when above this limit. 
```

但它在我的情况下不起作用。也许我做错了什么。这是我的召唤：

```
var parametrsSlider = {
            animation: "slide",
            animationLoop: false,
            itemWidth: 227,
            itemMargin: 23,
            minItems: 3,
            maxItems: 4,
            controlNav: false,
            move:1
        }
    var exist2 = $("#product-slider").length;
    if(exist2 != 0){
        $('#product-slider').flexslider(parametrsSlider);
    };
    var exist2 = $("#product-slider2").length;
    if(exist2 != 0){
        $('#product-slider2').flexslider(parametrsSlider);
    };
    var exist2 = $("#product-slider3").length;
    if(exist2 != 0){
        $('#product-slider3').flexslider(parametrsSlider);
    }; 
```

有[我的网站](http://business-dev4.alleanza.ru/alfatextil/01_psd_index.html)。先感谢您

# android - 如何在 android 的地图上显示新闻 RSS 提要？

> ID：14471996
> 
> 赞同：1
> 
> 时间：2013-01-23T03:30:19.610
> 
> 标签：android

我正在开发一个使用新闻 Rss 提要的 android 应用程序，我想在地图上显示新位置以及用户位置。如何在地图上显示新位置？如何跟踪该新闻位置的纬度和经度？

帮助将不胜感激

# c# - Linq to Entity 数据模型

> ID：14471998
> 
> 赞同：0
> 
> 时间：2013-01-23T03:30:22.460
> 
> 标签：c#, linq-to-entities

我正在尝试使用 Linq 针对实体数据模型编写一个非常简单的选择语句，如下所示

试图达到

`"Select * from SAPCostcentre where costcentermanager="mike";`

创建了我的 edmx 并添加了一个新类来使用 linq 编写我的 DAO，如下所示，但它不喜欢它。

```
public void ResourceCollection(string CostCenter)
    {
        string name = "Mike";

        var context = new ScheduALLDAL.SAPCostCentre();
        var query = from c in context.CostCentreManager where      context.CostCentreManager = name select c;
        var costcenter = query.ToList();        

    } 
```

它抛出异常“无法将类型字符串转换为`bool`此处”context.CostCentreManager = name”

在我的数据库设计中，`costcentermanger`数据类型是`varchar`. 请有人告诉我这里缺少什么或正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:32:48.057

应该`==`就像您进行布尔评估一样。那么你的其余代码应该没问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:32:54.327

这是因为您需要使用双等号 (==)。通过使用单个等号，您试图将 context.CostCentreManager 分配给“名称”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T03:33:05.793

它应该是：

```
 var query = from c in context.CostCentreManager 
      where context.CostCentreManager == name select c; 
```

使用`==`而不是`=`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T03:33:39.930

```
var query = from c in context.CostCentreManager 
    where context.CostCentreManager == name 
    select c; 
```