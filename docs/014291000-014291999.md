# StackOverflow 问答 14291000-14291999

# android - 简单的光标适配器需要最低 api 11 问题

> ID：14291006
> 
> 赞同：4
> 
> 时间：2013-01-12T06:43:33.550
> 
> 标签：android, android-listview, android-sqlite, android-cursoradapter

我正在开发一个应用程序，我需要从数据库中填充列表视图。我在以下代码中遇到兼容性问题

```
 dataAdapter = new SimpleCursorAdapter(
    this, R.layout.eventlisting, 
    cursor, 
    columns, 
    to,
    0); 
```

它需要最低 api 级别 11 ，我的是 8 级。是否有任何替代方法可以使此代码也可以在 api 8 上运行。我可以使用支持库吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T06:45:57.783

尝试[支持类中的 SimpleCursorAdapter](http://developer.android.com/reference/android/support/v4/widget/SimpleCursorAdapter.html)。它与 API 11+ 版本一样使用，并且已经向后兼容。

您必须下载支持库，因此您只需像这样更改导入：

```
import android.support.v4.widget.SimpleCursorAdapter; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:53:30.070

对于 Backword 兼容性，您可以下载支持库并使您的代码工作。

添加支持库

右键单击您的项目-> android 工具-> 添加支持库。

然后再一次

右键单击您的项目-> android 工具-> 修复项目属性。

然后清理构建您的项目。之后您将能够在您的应用程序中导入 SimpleCursorAdapter 类。希望它会有所帮助。

# post - 贝宝集成。C# POST 与 WSDL

> ID：14291015
> 
> 赞同：0
> 
> 时间：2013-01-12T06:44:30.183
> 
> 标签：post, soap, paypal

我使用 C# 和 .NET 2/3.5 使用普通的旧 HTTP POST 使 PayPal 集成运行良好。我还在响应中获得了所有交易细节。

那么，如果我想使用 WSDL（SOAP），会有什么好处吗？（你可以假设我知道如何使用网络服务）

另外，是否有使用此方法的完整 C# 项目的示例？我已经查看了[http://www.codeproject.com/Articles/42894/Introduction-to-PayPal-for-C-ASP-NET-developers](http://www.codeproject.com/Articles/42894/Introduction-to-PayPal-for-C-ASP-NET-developers) 但该页面很少说明如何使用 WSDL 进行功能齐全的交易。

有任何想法吗？或者“如果它没有坏，就不要修理它”

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:17:51.680

我真的不经常使用 WSDL 工作，因为我主要是一名 PHP 开发人员。不过，我曾在 Adob​​e Flex 中与他们合作过，我得说我喜欢我所看到的。

基本上，我能够在 Flex 中连接 WSDL（您也可以在其他 IDE 中执行此操作），并且它自动使我能够访问系统中的所有 API 调用。我可以看到 Web 服务可用的所有可能请求（功能）以及如何构建它们，甚至无需参考太多文档。

当直接构建 HTTP 请求（NVP/XML/JSON/etc）时，您必须参考文档以了解如何构建请求，并且通常还涉及更多的试验和错误，直到您让事情正常工作。WSDL 可以帮助您解决这个问题，尽管实际上您可能仍然会大量参考文档。

据我所知，我在 PHP 中使用的 WSDL/SOAP 工具不如 Flex 或 Visual Studio 好用，因此我通常坚持使用为我构建请求的自定义类库。不过，当我在其他使用 WSDL 的平台上工作时，我肯定更喜欢它。

# java - servlet 中“response.setContentType("text/html")”的用途是什么

> ID：14291027
> 
> 赞同：22
> 
> 时间：2013-01-12T06:46:53.503
> 
> 标签：java, servlets

```
public class HelloWorld extends HttpServlet{ 
      public void doGet(HttpServletRequest request, 
      HttpServletResponse response)
      throws ServletException,IOException{
      **response.setContentType("text/html");**
      PrintWriter pw = response.getWriter();
      pw.println("<html>");
      pw.println("<head><title>Hello World</title></title>");
      pw.println("<body>");
      pw.println("<h1>Hello World</h1>");
      pw.println("</body></html>");
      }
    } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-12T06:49:28.827

内容类型包含在 HTTP 响应中，因为内容中相同的字节序列值可以以多种方式解释。(*)

请记住，http 不仅可以传输 HTML（js、css 和图像是明显的例子），而且在某些情况下，接收者将不知道它将接收什么类型的对象。

* * *

(*) 这里最明显的是 XHTML——它是 XML。如果它的内容类型为`application/xml`，则接收者*应该*将其视为 XML。如果它被用作`application/xhtml+xml`，那么它应该被视为 XHTML。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-12-31T10:25:17.863

来自 JavaEE 文档[`ServletResponse#setContentType`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#setContentType%28java.lang.String%29)

*   如果响应尚未提交，则设置发送给客户端的响应的内容类型。

*   给定的内容类型可以包括字符编码规范，例如，

> `response.setContentType("text/html;charset=UTF-8");`

*   如果在调用此方法之前调用此方法，则仅从给定的内容类型设置响应的字符编码`getWriter`。

*   可以重复调用此方法来更改内容类型和字符编码。

*   如果在响应提交后调用此方法无效。`getWriter`如果在调用后或响应提交后调用它，则不会设置响应的字符编码。

*   如果协议提供了这样做的方法，容器必须将用于 servlet 响应的编写器的内容类型和字符编码传达给客户端。在 HTTP 的情况下，使用 Content-Type 标头。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-12T06:58:23.987

这意味着您要发送给客户端的响应类型，一些内容类型，例如：

```
 res.setContentType("image/gif");
 res.setContentType("application/pdf");
 res.setContentType("application/zip"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-02T03:27:52.513

您必须告诉浏览器您要发回的内容，以便浏览器可以采取适当的措施，例如在收到 PDF 时启动 PDF 查看器或启动视频播放器来播放视频文件，如果内容类型为则渲染 HTML简单的 html 响应，将响应的字节保存为下载的文件等。

一些常见的 MIME 类型是 text/html、application/pdf、video/quicktime、application/java、image/jpeg、application/jar 等

在您的情况下，由于您向客户端发送 HTML 响应，因此您必须将内容类型设置为 text/html

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-17T06:03:34.420

```
response.setContentType("text/html"); 
```

上面的代码将包含在“HTTP 响应”中，以告知浏览器响应的格式，以便浏览器可以解释它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-12T06:51:31.223

它是其中一种`MIME`类型，在这种情况下，您是响应标头`MIME`类型，`text/html`这意味着它显示 html 类型。它是浏览器的信息。您还可以设置其他类型以显示 excel、zip 等。[`MIME Type`](http://en.wikipedia.org/wiki/MIME)有关详细信息，请参阅

# node.js - 通过 node.js 和 socket.io 将 PDF.js 视图流式传输给多人？

> ID：14291039
> 
> 赞同：3
> 
> 时间：2013-01-12T06:49:10.080
> 
> 标签：node.js, pdf, express, socket.io

GitHub 上有一个非常流行的 PDF.js 库，可让您从浏览器上传/查看 PDF 文件。

演示： http: [//mozilla.github.com/pdf.js/web/viewer.html](http://mozilla.github.com/pdf.js/web/viewer.html)

首先，是否可以将我的本地 PDF 文件实时流式传输到将连接到我的网站的多个客户端？其次，不修改PDF.js源码可以吗？

理想情况下，所有用户都应该看到相同的灰色背景页面，表明没有加载 PDF。然后任何一个用户都可以上传 PDF。当该用户上传 pdf 文件时，它应该立即显示给所有其他连接的用户。

对此最简单的蛮力解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T00:47:22.797

您必须至少修改 viewer.js（和 viewer.html）。让我们以现有的聊天程序为基础，例如[http://psitsmike.com/2011/09/node-js-and-socket-io-chat-tutorial/](http://psitsmike.com/2011/09/node-js-and-socket-io-chat-tutorial/)

要在开始时保持查看器为空，请删除`PDFView.open(file, 0);`webViewerLoad() 中的：行。

将 pdf 数据发送到聊天而不是立即在查看器中打开：在 webViewerChange() 中替换`PDFView.open(uint8Array, 0);`为将发送`btoa(bytesToString(uint8Array))`到“聊天”的代码。当收到来自聊天的 open-document-message 时，您可以通过以下方式处理它：`PDFView.open(stringToBytes(atob(data)), 0);`

现在导航：如果查看者是大师，`pdfOpenParams`则将 updateViewarea() 发送到“聊天”。在 slave 上，执行 navigate-message as`PDFView.setHash(hash.substring(1));`

希望这会有所帮助。

# cocoa - 如何将值传递给 Xcode 中的另一个控制器视图

> ID：14291043
> 
> 赞同：-3
> 
> 时间：2013-01-12T06:49:36.010
> 
> 标签：cocoa

如何从 xcode storyBoard 中的不同 UIViewController 获取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:17:53.697

我最终使用了 prepareForSegue 方法。首先我在我的第三个视图控制器中创建一个字符串。

```
@property (strong,nonatomic) NSString* stringFromSecondView; 
```

然后我给了push segue一个名为“getDate”的ID，在我的第二个视图类中使用下面的代码并记住导入thirdviewcontroller.h

```
#import "thirdViewController.h"

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"getDate"]){
        NSString *intro = _myDate.text;
        thirdViewController *vc = [segue destinationViewController];
        vc.stringFromSecondView = intro;
    }
} 
```

现在回到我的thirdViewController.m

```
_myLabel.text = stringFromSecondView; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:11:33.113

在您的第二个视图控制器中

```
- (IBAction) btnPressToBringThirdView : (id) sender
{
      ThirdViewController* newObject = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];
      newObject.labelString = @"whatever text you want";
      [self.navigationController pushViewController:newObject];
      [newObject release];
} 
```

在 .h 文件中的第三个视图控制器中

```
@property (nonatomic, retain) NSString* labelString; 
```

在 .m 文件中

```
- (void)viewDidLoad
{
     [super viewDidLoad];
     yourLabel.text = labelString;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T07:45:13.500

```
ViewController *secondview=[[ViewController alloc]init];

secondview.your var here= secondview.your var here+100;//whate you var to change if NSintager 
```

///保存你的var

```
[[NSUserDefaults standardUserDefaults]setInteger:secondview.your var here forKey:@"your key to save"]; 
```

# iphone - 多对象拖动

> ID：14291051
> 
> 赞同：0
> 
> 时间：2013-01-12T06:51:03.487
> 
> 标签：iphone, ios6, uitouch

使用以下代码拖动多个对象时，当我触摸对象时，对象正在晃动，

```
 -(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
    {
UITouch *touch = [[event allTouches] anyObject];
    if ([touch view] == img1)
    {
        CGPoint location = [touch locationInView:touch.view];
        img1.center = location;
        return;
    }
    if (touch.view == img2)
    {
        CGPoint location = [touch locationInView:touch.view];
        img2.center = location;
        return;
    }
    }
    -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
[self touchesBegan:touches withEvent:event];
     } 
```

我的代码有什么问题，还有其他方法可以拖动吗？如果视图包含更多对象？请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:41:16.120

我认为，如果您正在谈论一次要拖动的更多对象，那么您应该从 touch begin 方法中删除返回

# php - PHP PDO 海量数据库查询速度优化

> ID：14291057
> 
> 赞同：0
> 
> 时间：2013-01-12T06:51:44.603
> 
> 标签：php, mysql, pdo, mysqli

我正在建立一个网站 geekwiz.com。测试加载它，LONG。

我是 php 新手，只是从 mysql_query 更改为 PDO。我必须进行多次查询才能在第一页上显示产品，并且该表有超过 150 万条记录。

我怎样才能让它更快？

这是我创建的代码：

```
#connection
$DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
$DBH->setAttribute(PDO::ATTR_EMULATE_PREPARES, 0); 
```

单独的文件

```
#fetch data
require_once('db_config.php');
$STH = $DBH->query("
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('notebook pc - other') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 3;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Desktop PC') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 3;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Hard Drives - External') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 3;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Camcorders - Analog/Digital') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 3;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Monitors - LCD Flat Panel') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 3;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Software - PC Games') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 3;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('third party accessories') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 3;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE advertisercategory LIKE ('LED TV') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 3;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Motherboards - %') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 9;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE advertisercategory LIKE ('LED TV') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 9;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Hard Drives - External') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 9;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('CPU Cooling') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 9;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('CPU Thermal Paste / Grease') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 9;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Keyboards') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 9;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Memory (USB Flash Drive)') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 9;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Memory (Desktop Memory)') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 9;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Memory (Notebook Memory)') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 9;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Mouse') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 9;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Printer - Inkjet Printers') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 9;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Projectors') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 9;
SELECT name, buyurl, imageurl, price, manufacturer, manufacturerid FROM catalog WHERE MATCH advertisercategory AGAINST ('Processors - Desktops') AND special = 'YES' AND instock = 'YES' AND standardshippingcost LIKE '0' ORDER BY lastupdated DESC limit 9;

");

$STH->setFetchMode(PDO::FETCH_OBJ);

while ($row = $STH->fetch()) {
echo "<ul>";
echo "<li>" .$row->name ."</li>";
echo "<li>" .$row->buyurl ."</li>";
echo "<li>" .$row->imageurl ."</li>";
echo "<li>" .$row->price ."</li>";
echo "<li>" .$row->manufacturer ."</li>";
echo "<li>" .$row->manufacturerid ."</li>";
echo "</ul>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:15:51.107

几个问题，你可能不会喜欢我要说的。

按 text/varchar 排序非常慢，而且更新将永远持续下去。您应该做的是将所有文本转换为整数。所以`advertisercategory`不应该有实际的文字。相反，它应该是一个固定长度`INT`，链接到存储实际文本的表格。`special`和也是如此`instock`。 `standardshippingcost`看起来像一个 varchar，因为它是单引号，如果它看起来是这样，那真的不应该是这种情况。如果它是数字，它应该是数字。我不太确定您的架构，因此`standardshippingcost`可能需要在`catalog`FK 链接到的自己的表中。 `lastupdated`应该是`INT`unix时间。

你的数据应该`INT`是因为1）它占用更少的空间（因此排序时的内存更少）`notebook pc - other`和2）更新会更快（我假设你正在使用InnoDB）。

所以，当你排序时，你`SELECT`所有的`id`s （应该是一个自动增量`PRIMARY`）、`advertisercategory`、`instock`、`standardshippingcost`、`standardshippingcost`和`lastupdated`到一个 PHP 数组中。找到最有效的方式来获得您想要的东西（您会随时找到捷径）。最后，按键`SELECT`的具体数据`PRIMARY`。

我会倒过来解释。这种方法会产生最高性能的原因是，如果您在没有任何其他索引的 InnoDB 表上`SELECT`关闭`PRIMARY`，那么无论您的表有多大，它都会“立即”返回。正如您所经历的那样，使用大量深奥的查询很慢。这就是您实际检索数据的方式。

PHP 在逻辑上比 MySQL 快。这就是它的用途。堆栈上有许多 Q 表明了这一点。这就是为什么要在 PHP 上进行排序的原因。另外，如果您在数据中看到某种统计或其他类型的模式，您实际上可以编写更好的算法以使您的排序运行得更快。

除了 unix 日期之外，您的其他列不应太长。 `advertisercategory`可能会变得有点大，但与`notebook pc - other`已经是`19`. 我在您的 Q 中看到大约 30`advertisercategory`秒，所以这只是`INT` `LENGTH` `2`因为那是 100 个潜在值。这将在排序时节省空间和内存。

此外，在更新时使用固定长度的整数会更快，因为聚簇表将始终保持自身紧凑和碎片整理。如果你`UPDATE`在集群 InnoDB 中间的一行 from`'Memory (USB Flash Drive)'`到`'Projectors'`，你只是让你的数据库对整个数据库进行碎片整理以消除你刚刚造成的差距。如果您从一个更改`1`为`10`固定长度的 int 列，您就没有这样做，因为两者占用相同数量的空间，不会产生间隙，不需要对集群进行碎片整理。

当您这样做时，您会对性能的大幅提升感到震惊，但是是的，这将涉及更多代码。那么你的优先级是什么，性能还是开发时间？

* * *

哎呀！忘记了unix时间的解释。您想使用它是因为您可以将它存储`INT`几秒钟和几`DECIMAL`微秒。这样做可以在 PHP 中进行最简单的操作，因为 php 在 unix 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:16:11.073

编写一个名为`saveCacheData.php`执行该组 sql 查询的 php 脚本，该脚本还将数据转储到一个名为`cacheData.php`.

在主页上，将 sql 查询替换为`require_once('cacheData.php')`.

现在，当 mysql 表中的数据`catalog`更新时，请确保您也执行`file_get_contents('saveCacheData.php')`（或执行某种将为您缓存数据的 cron 作业）。

顺便说一句，我确实认为您的数据库设计可能会好很多，但是将数据库数据缓存到磁盘通常也是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:22:27.947

好吧，首先，PDO 与巨大的数据库速度优化完全无关。
为了更清楚一点，假设您在问一个类似于“如何驾驶我的福特 Escort 从纽约布鲁克林到佛罗里达州坦帕”的问题。汽车品牌在这里无关紧要。数据库驱动程序也是如此。

现在到您的数据库。
你有**很多**工作要做。

首先，绝对没有办法使用Mysql FULLTEXT来做分类。它应该只是一个数字索引，链接到具有类别结构的表。

所以，查询变成了这样

```
SELECT * FROM catalog WHERE category=1 AND special = 'YES' AND instock = 'YES' 
AND standardshippingcost=0 ORDER BY lastupdated DESC limit 3; 
```

而且，如果索引正确，它可以非常快。比如说，如果特价商品的数量非常有限，那么无论数据库中有多少条记录，这个字段上的索引都会让它变得更快。

但是，整体数据库架构可能会有所不同。以及可以有其他优化方式。但我们对您的项目了解不多，老实说，这不是简单的问答形式的问题。

# c++ - 返回字符串时可能存在内存泄漏？

> ID：14291058
> 
> 赞同：0
> 
> 时间：2013-01-12T06:51:51.593
> 
> 标签：c++, memory, memory-leaks

我使用 valgrind --leak-check=full 检查我的程序，发现了一个我不知道的泄漏：

```
==6072== 54 bytes in 2 blocks are possibly lost in loss record 15 of 28
==6072==    at 0x4C2AF8E: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==6072==    by 0x55B63B8: std::string::_Rep::_S_create(unsigned long, unsigned long, std::allocator<char> const&) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17)
==6072==    by 0x55B7D94: char* std::string::_S_construct<char const*>(char const*, char const*, std::allocator<char> const&, std::forward_iterator_tag) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17)
==6072==    by 0x55B7E72: std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, std::allocator<char> const&) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17)
==6072==    by 0x4268ED: Writable::readString(std::istream*) (Writable.cpp:33) 
```

这是我的代码片段：

```
#include "Writable.h"

Writable::Writable()
{
    //ctor
}

Writable::~Writable()
{
    //dtor
}

void Writable::writeString(ostream* ofs, string str){
    int length = str.size()+1;

    ofs->write((char*)&length, sizeof(length));

    if (length > 1)
        ofs->write(str.c_str(), length);

}

string Writable::readString(istream* ifs) {
    int length = 0;

    ifs->read((char*)&length, sizeof(length));

    if(length > 1) {
        char buf[length];
        ifs->read(buf, length);

        return string(buf);
    }

    return string("");
} 
```

它指向“返回字符串（buf）”行。你能弄清楚泄漏是如何在那里完成的吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:05:22.767

好的，我不太确定你想在这里做什么。对于您的`writeString`方法（如果它不使用任何成员，为什么它应该是一个方法？），您应该将流作为引用传递，并将您的字符串作为常量引用传递。您的代码可以简化为：

```
void Writable::writeString(std::ostream & ofs, std::string const & str){
    ofs << str;
} 
```

如果标准已经为您做到了，则无需自己摆弄指针和缓冲区。

至于您的`readString`“方法”：您似乎尝试读取 4 个字符 ( `sizeof(length)`) 并将它们存储在`length`. 如果您有 4 个字符，例如“abcd”，则您的`length`变量包含位模式`41424344`（十六进制）。在十进制中，这是`1094861636`. 基本上，然后您尝试从流中读取下十亿个字符（在`abcd`您之前提取的之后）。您的流很可能不包含十亿个字符，因此您的缓冲区的很大一部分将未初始化。如果幸运的话，您会在某处发现终止流的 NULL 字符。

我不知道您是想阅读整个流还是只阅读一行。在后一种情况下，您可以将代码简化为：

```
std::string Writable::readString(std::ostream & ofs){
    std::string extracted;
    getline(ofs, extracted);
    return std::move(extracted); // or return extracted; if you have a pre C++11 compiler
} 
```

希望这可以帮助。

# sql - 仅包含特定单词的 SQL SELECT LIKE

> ID：14291060
> 
> 赞同：3
> 
> 时间：2013-01-12T06:52:37.690
> 
> 标签：sql, select, sql-like

我有这个查询：

```
SELECT * FROM mytable
WHERE column1 LIKE '%word1%'
AND column1 LIKE '%word2%'
AND column1 LIKE '%word3%' 
```

我需要修改此查询以返回 column1 包含 word1 word2 和 word3 的记录，仅此而已！没有别的词，只有这些话。

示例：搜索应该返回但 NOT`samsung galaxy s3`的任意组合`samsung s3 galaxy``samsung galaxy s3 lte`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T07:01:11.733

*假设*包含`column1`空格分隔的单词，并且您只想匹配*整个*单词，例如：

```
SELECT * FROM
  (select ' ' + REPLACE(column1,' ','  ') + ' ' as column1 from mytable) t
WHERE
   column1 like '% word1 %' AND
   column1 like '% word2 %' AND
   column1 like '% word3 %' AND
   REPLACE(REPLACE(REPLACE(column1,
      ' word1 ',''),
      ' word2 ',''),
      ' word3 ','') = '' 
```

请注意，这种结构确实允许*同一个*词多次出现。从是否应该允许的问题中不清楚。（[小提琴](http://sqlfiddle.com/#!3/d4a4b/3)）

* * *

如果将这些单词作为单独的行存储在与`mytable`. 然后我们可以使用更普通的 SQL 来满足这个查询。您的示例看起来像是某种标记示例。有一个表将每个标签存储为单独的行（如果需要，还记录了序数位置）会将其变成一个简单的关系除法问题。

* * *

计算一个单词在一列中出现多少次的一种方法是表达式：

```
(LEN(column2) - LEN(REPLACE(column2,'word',''))/LEN('word') 
```

但这将再次恢复到匹配较大单词的子序列以及单词本身，而无需更多工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:56:41.213

试试这个

```
SELECT * FROM mytable
WHERE column1 LIKE 'word1'
AND column1 LIKE 'word2'
AND column1 LIKE 'word3' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:15:48.220

在`MySQL`你可以使用正则表达式作为

```
SELECT * FROM mytable
WHERE column1 regexp '^word[1-3]$'; 
```

在`postgres`你可以使用' `similar to`'关键字

我认为甲骨文也有`regexp`

# php - Doctrine - 一般错误：1395 无法从连接视图中删除

> ID：14291064
> 
> 赞同：0
> 
> 时间：2013-01-12T06:53:33.497
> 
> 标签：php, mysql, doctrine-orm

当我尝试删除 Doctrine 中的实体时出现此错误。

> 一般错误：1395 无法从连接视图中删除

我的表结构是：

```
 user
   ----
   aid 
   name
   email
   ...

   role
   -----
    rid
    name

   users_roles
   -----------
    uid - foreign key references User.aid
    rid - foreign key, references Role.rid 
```

User-Role 表具有多对多关系，其中 users_roles 作为映射表。但是，之前编写代码的开发人员选择在 users_roles 中插入 rid 作为逗号分隔的角色 ID，而不是为每个 (uid, rid) 对使用不同的行。

因此，为了正确定义 Doctrine 中的关联，我创建了一个视图 UsersRolesView，如下所示：

```
CREATE view `users_roles_view` AS SELECT `r`.`rid` AS `rid`, `ur`.`uid` AS `uid` 
FROM (`users_roles` `ur` JOIN `role` `r`)
WHERE (find_in_set(`r`.`rid`, `ur`.`rid`) > 0) 
```

我的 User 实体的学说映射 xml 如下所示：

尝试删除用户实体时出现 Doctrine 错误。删除用户功能如下：

```
function removeUser($aid)
{
   $admin = $GLOBALS['em']->find('Admin', $aid);
   $GLOBALS['em']->remove($admin);

   $GLOBALS['em']->flush();
} 
```

完全例外：

> 致命错误：未捕获的异常 'PDOException' 并带有消息 'SQLSTATE[HY000]：一般错误：1395 无法从 vendor\doctrine\dbal\lib\Doctrine\DBAL\Connection.php 中的连接视图 'users_roles_view'' 在第 754 行删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:55:22.550

你确定这个想法存在于 Doctrine2 中吗？

```
find_in_set() 
```

# javascript - 有没有办法在可编辑的 div 中放置键盘快捷键？

> ID：14291067
> 
> 赞同：0
> 
> 时间：2013-01-12T06:53:56.440
> 
> 标签：javascript, html

例如，我有一个用户可以输入的 div。我想放置快捷方式，以便当用户输入单词 pi 时。输出将是符号 π。或者，如果用户输入 sqrt，那么他们将得到这个符号 inf，那么输出将为 ∞。甚至当单击选项卡按钮缩进几行时。我还没有看到这样做的网络应用程序，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:01:22.687

您可以进行一些广泛的键跟踪 + 字段更新来完成此操作，或者您可以获得一个已经做了类似（如果不完全）的 jQuery 插件并对其进行修改以完成相同的任务。

这可能是您正在寻找的内容： [http ://code.google.com/p/js-hotkeys/wiki/about](http://code.google.com/p/js-hotkeys/wiki/about)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:19:31.677

您可以简单地使用替换。在此处查看[JSFiddle 演示](http://jsfiddle.net/bFurj/4/)

```
$('.test').keydown(function (event) {
  if ($('.test').val().contains("pi")) {
    var newVal = $('.test').val().replace("pi", "π");
    $('.test').val(newVal);
    //Place Cusor at the end of the div if using editable div
  }
  else if ($('.test').val().contains("inf")) {
    var newVal = $('.test').val().replace("inf", "∞");
    $('.test').val(newVal);
    //Place Cusor at the end of the div if using editable div
  }
}); 
```

在此示例中，我使用的是`input`. 您可以将其更改为`div`

# php - 使用 PHP 的 UPS 运输标签创建器

> ID：14291069
> 
> 赞同：2
> 
> 时间：2013-01-12T06:54:27.293
> 
> 标签：php, shipping, ups

我使用了一个使用 PHP 的运输标签创建者代码，但是，标签的图像没有出现。[我只是从http://webcollage.wordpress.com/2011/05/13/ups-label-print-with-php/](http://webcollage.wordpress.com/2011/05/13/ups-label-print-with-php/)复制并粘贴此代码。请查看 URL 中的代码并提出建议。我在我的本地服务器（XAMPP）中设置了这个代码。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:47:56.680

最后，我解决了这个问题。首先，我从另一个 API (http://webcollage.wordpress.com/2011/05/10/ups-shipping-confirmation-code-in-php/) 生成 Shipment Digest 代码。并将 Shipment Digest 代码粘贴到第二个代码 ( [http://webcollage.wordpress.com/2011/05/13/ups-label-print-with-php/](http://webcollage.wordpress.com/2011/05/13/ups-label-print-with-php/) ) 中。以及浏览器中显示的运输标签图像。

# python - 仅检查字符串的 var 的前 XX 行

> ID：14291070
> 
> 赞同：-1
> 
> 时间：2013-01-12T06:54:34.377
> 
> 标签：python, webpage, lines

嘿，我得到以下代码：

```
import urllib

source = urllib.urlopen('WEBPAGE').read()
if 'STRING TO LOOK FOR' in source:
    print 'MESSAGE'
else:
    print 'else MESSAGE' 
```

它检查特定字符串的网页源代码，有没有一种方法可以只让第一个让说20行代码被搜索到字符串？如果字符串不在那里，我会收到其他消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:59:28.157

更改`if 'STRING TO LOOK FOR' in source:`为

```
if 'STRING TO LOOK FOR' in '\n'.join(source.split('\n', 20)[:20]): 
```

将源代码分成几行，然后重新组合前 20 行。

# magento - Magento 中 Mage::app 和 Mage:: 之间的区别

> ID：14291072
> 
> 赞同：4
> 
> 时间：2013-01-12T06:54:40.723
> 
> 标签：magento

任何人都可以说出 Mage:app 和 Mage:: 之间有什么区别吗？

例如：

```
Mage::getModel('catalog/product');

Mage::app->getLayout->createBlock('catalog/product_view'); 
```

如果我这样尝试

```
Mage::app->getModel('catalog/product'); 
```

它抛出一个致命错误

基本区别是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-12T09:27:58.093

作为更一般的解释，并进一步 Alan 的回答`Mage::app()`，`Mage::getModel()`它们都是 Mage 类（`app/Mage.php`）的静态方法。

该`Mage::app()`函数用于引导您的 Magento 应用程序（设置配置、自动加载等），并且在您想要在您自己的自定义脚本中访问 Magento 模型时非常有用。

它是一个静态方法，因此也可以在您的应用程序中的任何位置调用它以返回当前的 Mage_Core_Model_App 对象，例如，您可以使用该对象来获取当前配置值，例如`Mage::app()->getStore()`将返回当前的`Mage_Core_Model_Store`商店对象。

`Mage::app()`类似于`Mage::run()`在您的`index.php`文件中找到的。不同之处在于，它`Mage::run()`还会根据默认调用应用程序的 MVC、路由等部分，并控制将您定向到页面并实例化块和布局模板呈现的请求/响应。

`Mage::getModel()`只是一个工厂方法，它将根据您提供的类别名返回一个类的新实例。例如`Mage::getModel('customer/customer')`将返回一个新`Mage_Customer_Model_Customer`对象。如果您希望在整个请求过程中每次都返回相同的对象，则可以`Mage::getSingleton()`改用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-12T07:20:58.737

当你说

```
Mage::getModel('catalog/product'); 
```

您正在调用`getModel`Mage 类的静态方法

```
#File: app/Mage.php
public static function getModel($modelClass = '', $arguments = array())
{
    return self::getConfig()->getModelInstance($modelClass, $arguments);
} 
```

当你说

```
Mage::app->getModel('catalog/product'); 
```

你会得到一个致命的错误，因为那是无效的 PHP。

但是，如果你说

```
$app = Mage::app(); 
```

你在类上调用`app`静态`Mage`方法

```
public static function app($code = '', $type = 'store', $options = array())
{
    if (null === self::$_app) {
        self::$_app = new Mage_Core_Model_App();
        self::setRoot();
        self::$_events = new Varien_Event_Collection();
        self::$_config = new Mage_Core_Model_Config();

        Varien_Profiler::start('self::app::init');
        self::$_app->init($code, $type, $options);
        Varien_Profiler::stop('self::app::init');
        self::$_app->loadAreaPart(Mage_Core_Model_App_Area::AREA_GLOBAL, Mage_Core_Model_App_Area::PART_EVENTS);
    }
    return self::$_app;
} 
```

这将返回一个`Mage_Core_Model_App`对象，这将让您在类/对象上调用任何方法

```
app/code/core/Mage/Model/App.php 
```

# php - PHP中的级联下拉菜单

> ID：14291075
> 
> 赞同：0
> 
> 时间：2013-01-12T06:56:08.330
> 
> 标签：php

我的页面中有两个下拉列表，即位置和员工。我想要做的是我想根据位置过滤员工。也就是说，当我选择德里位置时，德里位置的所有员工都进入了员工下拉列表。在PHP中可以吗？？？？请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:59:53.387

仅使用 PHP 是不可能的，除非您可以在两者之间进行页面刷新。在 JavaScript 中有很多方法可以做到这一点，您是否尝试过使用 JavaScript？

编辑：使用 CSS3 选择器可能有一些复杂的方法，但即使有我也不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:04:39.663

是的，没有什么是不可能的。你可以做到..但是你必须使用像ajax这样的脚本语言来完成这个..如果你需要更多帮助，请发布你的代码..你可以在这里找到答案..

[根据从第一个数据库中选择第一个值填充第二个下拉列表](https://stackoverflow.com/questions/9388038/populating-second-drop-down-based-on-selection-of-first-with-value-from-first-da)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:04:50.557

是的，可以使用 php 和 ajax 实现。

这是一个很好的教程，给出了哪个国家，州，城市的例子。希望这会帮助你。

[http://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html](http://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html)

# c++ - Qt 应用程序：无法加载平台插件“windows”。可用平台有：

> ID：14291078
> 
> 赞同：7
> 
> 时间：2013-01-12T06:56:33.910
> 
> 标签：c++, qt, qt5

我已经用 msvc2010 编译了 Qt 5.0.0，因为我需要带有配置字符串的 opengl

```
configure -prefix %CD%\qtbase -opensource -nomake -nomake examples -nomake demo -opengl desktop -platform win32-msvc2010 
```

现在我只能从 QtCreator 启动 Qt 应用程序。我已将应用程序放在 WinDBG 中，它的输出如下

```
CommandLine: D:\work\workspace\WellReader_0_1-build-Qt_5_0_0_msvc2010_opengl-Release\release\WellReader_0_1.exe
Symbol search path is: *** Invalid ***
****************************************************************************
* Symbol loading may be unreliable without a symbol search path.           *
* Use .symfix to have the debugger choose a symbol path.                   *
* After setting your symbol path, use .reload to refresh symbol locations. *
****************************************************************************
Executable search path is: 
ModLoad: 00120000 00132000   image00120000
ModLoad: 77900000 77a3d000   ntdll.dll
ModLoad: 774b0000 77584000   C:\Windows\system32\kernel32.dll
ModLoad: 75b60000 75baa000   C:\Windows\system32\KERNELBASE.dll
ModLoad: 59d30000 59df8000   C:\Windows\system32\OPENGL32.dll
ModLoad: 77020000 770cc000   C:\Windows\system32\msvcrt.dll
ModLoad: 775f0000 77690000   C:\Windows\system32\ADVAPI32.dll
ModLoad: 77b10000 77b29000   C:\Windows\SYSTEM32\sechost.dll
ModLoad: 77a50000 77af2000   C:\Windows\system32\RPCRT4.dll
ModLoad: 76340000 7638e000   C:\Windows\system32\GDI32.dll
ModLoad: 76070000 76139000   C:\Windows\system32\USER32.dll
ModLoad: 77a40000 77a4a000   C:\Windows\system32\LPK.dll
ModLoad: 77690000 7772d000   C:\Windows\system32\USP10.dll
ModLoad: 71a30000 71a52000   C:\Windows\system32\GLU32.dll
ModLoad: 71500000 715e7000   C:\Windows\system32\DDRAW.dll
ModLoad: 71620000 71626000   C:\Windows\system32\DCIMAN32.dll
ModLoad: 75d70000 75f0d000   C:\Windows\system32\SETUPAPI.dll
ModLoad: 75d20000 75d47000   C:\Windows\system32\CFGMGR32.dll
ModLoad: 770d0000 7715f000   C:\Windows\system32\OLEAUT32.dll
ModLoad: 75f10000 7606c000   C:\Windows\system32\ole32.dll
ModLoad: 75be0000 75bf2000   C:\Windows\system32\DEVOBJ.dll
ModLoad: 743d0000 743e3000   C:\Windows\system32\dwmapi.dll
ModLoad: 5a1f0000 5a23b000   D:\work\workspace\WellReader_0_1-build-Qt_5_0_0_msvc2010_opengl-Release\release\Qt5OpenGL.dll
ModLoad: 59910000 59d22000   D:\work\workspace\WellReader_0_1-build-Qt_5_0_0_msvc2010_opengl-Release\release\Qt5Widgets.dll
ModLoad: 763d0000 7701a000   C:\Windows\system32\SHELL32.dll
ModLoad: 77590000 775e7000   C:\Windows\system32\SHLWAPI.dll
ModLoad: 59650000 59910000   D:\work\workspace\WellReader_0_1-build-Qt_5_0_0_msvc2010_opengl-Release\release\Qt5Gui.dll
ModLoad: 59250000 5964c000   D:\work\workspace\WellReader_0_1-build-Qt_5_0_0_msvc2010_opengl-Release\release\Qt5Core.dll
ModLoad: 76390000 763c5000   C:\Windows\system32\WS2_32.dll
ModLoad: 77360000 77366000   C:\Windows\system32\NSI.dll
ModLoad: 687b0000 68819000   C:\Windows\system32\MSVCP100.dll
ModLoad: 67930000 679ef000   C:\Windows\system32\MSVCR100.dll
(116c.16cc): Break instruction exception - code 80000003 (first chance)
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for ntdll.dll - 
eax=00000000 ebx=00000000 ecx=0030f8d4 edx=779470f4 esi=fffffffe edi=00000000
eip=779a058e esp=0030f8f0 ebp=0030f91c iopl=0         nv up ei pl zr na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000246
ntdll!LdrVerifyImageMatchesChecksum+0x633:
779a058e cc              int     3
0:000> g
ModLoad: 75d50000 75d6f000   C:\Windows\system32\IMM32.DLL
ModLoad: 77830000 778fc000   C:\Windows\system32\MSCTF.dll
ModLoad: 75a10000 75a45000   C:\Windows\system32\nvinit.dll
ModLoad: 75940000 7594c000   C:\Windows\system32\cryptbase.dll
Failed to load platform plugin "windows". Available platforms are: 

*** ERROR: Symbol file could not be found.  Defaulted to export symbols for C:\Windows\system32\kernel32.dll - 
eax=00000000 ebx=00000001 ecx=0030fa38 edx=00000020 esi=779d7380 edi=779d7340
eip=779470f4 esp=0030fa88 ebp=0030faa4 iopl=0         nv up ei pl zr na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000246
ntdll!KiFastSystemCallRet:
779470f4 c3              ret
0:000> g
       ^ No runnable debuggees error in 'g' 
```

我可以在哪里使用插件“windows”？或者我应该使用其他配置选项重新编译 Qt？请指教

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T07:18:10.313

我还没有看过 Qt 5.0，但是如果他们现在有插件平台，你必须确保你的应用程序可以在运行时找到它们。显然QtCreator正确设置了PATH，所以所有插件都在那里，不需要重建Qt。

找到插件文件夹，将必要的插件复制到您的安装文件夹中（确保保持结构，如“plugins/imageformats/.../bla.dll”等），创建[qt.conf](http://qt-project.org/doc/qt-4.8/qt-conf.html)文件并将插件路径设置为“ ."。将 qt.conf 文件也放入您的安装文件夹。

# asynchronous - 是否有适用于 Windows 应用商店应用的 ObserveOnDispatcher？

> ID：14291081
> 
> 赞同：1
> 
> 时间：2013-01-12T06:57:00.073
> 
> 标签：asynchronous, system.reactive, windows-store-apps

我在 Windows 商店应用程序中使用响应式扩展（嗯，尝试，学习）。我有一系列异步操作，最终将导航到 RTM 的授权网页。鉴于我已经完成的阅读，我希望写如下内容：

```
 var result = rtm
            .GetFrob()
            .Select(s => rtm.GetAuthenticationUrl(s))
            .ObserveOnDispatcher()
            .Do(uri => AuthWebView.Navigate(new Uri(uri)))
            .First(); 
```

但是，我似乎找不到 ObserveOnDispatcher 方法，而且也没有 Scheduler.Dispatcher 属性，这让我想到在 Windows 应用商店应用程序中，主 UI 线程以及您如何引用它有一些更深层次的工作。

顺便说一句，GetFrob 使用 Observable.FromAsync 创建一个 IObservable 序列（如果有帮助的话）。

顺便说一句，如果我删除该行，我在调用 Navigate 时会失败，因为它是从错误的线程发布的。那么，在这里做些什么来确保我回到正确的线程上是正确的？

顺便说一句，请原谅这里的“.Do”操作，我知道它不是“好”，但是，我仍在尝试丢弃代码。

提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T07:47:37.817

啊。显然我只是不擅长搜索。:(

事实证明，添加 nuget 包 Rx-Xaml 包括调度程序的正确程序集等。详细信息可以在主[Rx 博客](http://blogs.msdn.com/b/rxteam/archive/2012/08/15/reactive-extensions-v2-0-has-arrived.aspx)上找到。当然，我的应用程序现在又重新挂起，但这可能是由于我的其他愚蠢行为。

# html - IE 9 忽略页面上最后一个元素的边距底部

> ID：14291082
> 
> 赞同：0
> 
> 时间：2013-01-12T06:57:12.800
> 
> 标签：html, css, internet-explorer-9, margin

如果我在页面上的最后一个元素（在我的例子中是一个 div）添加一个 margin-bottom，它在 IE 9 中会被忽略。换句话说，最后一个元素与窗口的底部齐平。

这是一个已知的问题？它在 Chrome/Firefox 中按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:42:46.983

如果 div 是浮动的，但包含的 div 不是，这是正确的。

```
<div class='outer'>
   <div class='inner'>dfsdfs</div>
   <div class='inner'>sdfsdf</div>
   <div class='inner'>vxcvxv</div>
   <div class='inner'>cvxcv</div>
</div>

div.outer {
   background: green;
}

div.inner {
   height: 50px;
   background: red;
   margin-bottom: 50px;
   display:block;
   float:left;
   clear:left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:13:55.517

我已经设置了一个简单的测试，看看我是否可以重现您的问题。首先，在您的带领下，我提供了一些 HTML - 确保将最后一个元素设为 a `div`：

```
<div></div><div></div>
<div></div><div></div> 
```

然后是一些样式：

```
div {
  height: 50px;
  background: red;
  margin-bottom: 50px;
} 
```

然后我继续使用[browserstack](http://browserstack.com)在 Windows 7 上测试 IE9 - 我无法重现您的问题。就我而言，浏览器在最后一个元素周围正确呈现了适当的间距。

小提琴：http: [//jsfiddle.net/jonathansampson/EgjVn/](http://jsfiddle.net/jonathansampson/EgjVn/)

# opengl - OpenGL窗口系统屏幕撕裂预防

> ID：14291083
> 
> 赞同：2
> 
> 时间：2013-01-12T06:57:22.617
> 
> 标签：opengl, buffer, swap, vsync, tearing

在我的 OpenGL 应用程序中，出于明显的原因，我想防止屏幕撕裂。到目前为止，我一直在使用 vsync。但我想用翻页缓冲区交换（更改指向监视器数据的指针而不是更改值）来替换它以提高性能。我的问题是：重要的窗口系统（Windows、Cocoa、X11）是否完全支持这种缓冲区交换，是否需要明确请求，还是默认行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T11:55:56.333

V-Sync 是“垂直回溯同步”。如果启用了 V-Sync，则意味着当显示器未绘制时，双缓冲区在该时间跨度内被交换。这是从 CRT 显示器时代继承下来的术语，其中使用电子束从左上角到底部逐行绘制图像。当光束到达右下角时，它必须返回到右上角。电子束是使用两对电磁线圈控制的，并且（与示波器中的静电偏转器不同）不能超过一定的转换速率。这就是垂直同步

今天，显示器仍然将它们的数据逐行接收到显示器内部的缓冲区中。在整个帧的末尾插入一个小停顿。

因此，“垂直回溯”是您可以在不干扰绘图过程的情况下更新显示帧缓冲区中的数据的时间跨度。

> 到目前为止，我一直在使用 vsync。

不，你没有“使用”垂直同步。您确实使用了双缓冲，该交换由 V-Sync 同步。

> 但我想用翻页缓冲区交换替换它

这不是你做的决定。使用何种方法由图形硬件及其驱动程序选择。您的程序存在于用户空间中，甚至无法与硬件进行低级别对话。并且通常使用在这种情况下表现最好的方法。

# java - 将 ResolveInfo 项从 ArrayList a 复制到 ArrayList b？

> ID：14291088
> 
> 赞同：0
> 
> 时间：2013-01-12T06:58:52.733
> 
> 标签：java, android

Aasically 我正在尝试将 ArrayList a (allApps) 中的项目添加到 ArrayList b (myApps) 中，但出现错误。

这就是我正在尝试的：

```
public ArrayList myApps = new ArrayList(); 

@Override
public void onCreate(Bundle savedInstanceState) {
   ...
   for(final ResolveInfo app : allApps) {
        addApp(app);
    }
}

public void addApp(ResolveInfo app) {
    ArrayList.add(app); // ERROR: Cannot make a static reference to the non-static method add(Object) from the type ArrayList
} 
```

这个错误是什么意思，我怎样才能让我将一个项目从一个数组复制到另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:02:15.593

add 方法`ArrayList`不是静态方法，因此您不能在 ArrayList 实例之外调用。先声明实例然后调用`add`

它应该是`myApps.add(app);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:04:48.290

根据您的描述，您需要在 ArrayList 的实例上调用 add，而不是在类本身上调用，您正在寻找的是

```
public void addApp(ResolveInfo app) {
    myApps.add(app);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:05:08.447

像这样改变你的方法：

```
public void addApp(ResolveInfo app) {
    myApps.add(app); 
} 
```

# jquery - jQuery在选择元素之间拖放？

> ID：14291089
> 
> 赞同：0
> 
> 时间：2013-01-12T06:58:54.880
> 
> 标签：jquery, asp.net-mvc

是否可以使用 jQuery 将选项元素从一个拖动`select`到另一个？

# c# - 同步数据库中的某些列

> ID：14291090
> 
> 赞同：0
> 
> 时间：2013-01-12T06:58:58.120
> 
> 标签：c#, sql-server, database, microsoft-sync-framework

作为对我的旧问题的跟进：

[与服务器同步时处理客户端数据库中的主键冲突](https://stackoverflow.com/questions/14171987/dealing-with-primary-key-clashs-in-client-database-when-synchronizing-with-the-s)

和这篇博文

[第 1 部分 – 客户端和服务器主键不同的上传同步](http://jtabadero.wordpress.com/2011/03/14/upload-synchronization-where-the-client-and-server-primary-keys-are-different/)

我想知道是否可以在服务器和数据库之间提供某些列。例如，我希望服务器和客户端同步除 id 之外的所有内容。

如果我们有

客户 1：
ID
1
2
3
4

客户 2：
ID
1
2
3
4

那么服务器将具有：

编号
1
2
3
4
5
6
7
8

这个想法是我需要将我的 id 列保持为身份并自动递增。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:06:46.960

做一些假设，你有同步 2 个数据库的 SSIS 包吗？

假设您这样做了，您仍然可以通过多种方式同步数据：

*   使用其他字段作为主键（不确定是否可以选择）

*   更改您的服务器表以存储原始客户端 ID 和原始源

*   写入存储原始 id 和新 id 以及源/客户端的中间表。

SSIS 提供了许多工具来将数据从一个源映射到另一个源。

希望这是有道理的。

# android - 对于 GMT +x 区域，Android 日历全天活动日期提前一天

> ID：14291091
> 
> 赞同：15
> 
> 时间：2013-01-12T06:59:23.180
> 
> 标签：android, calendar, timezone, google-calendar-api

我使用官方网站上的教程编写了一个简单的代码，将全天事件插入日历。 [http://developer.android.com/guide/topics/providers/calendar-provider.html](http://developer.android.com/guide/topics/providers/calendar-provider.html)

```
 ContentResolver cr = context.getContentResolver();
    ContentValues values = new ContentValues();
    values.put(Events.DTSTART, dueDate.getTime());
    values.put(Events.ALL_DAY, true);   
    values.put(Events.DTEND, dueDate.getTime());
    values.put(Events.TITLE, "Some Event");
    values.put(Events.CALENDAR_ID, mCalID);
    TimeZone tz = TimeZone.getDefault();
    values.put(Events.EVENT_TIMEZONE, tz.getID());
   Uri uri = cr.insert(Events.CONTENT_URI, values); 
```

我发现当我在运行 4.03 的 Acer 设备上打开 Google 日历应用程序时，输入的日期已经向后移动了 1 天。我的本地时区是 GMT+10 的悉尼。

所以我去设置将当地时区更改为美国东部（格林威治标准时间 -5）并运行相同的代码并且日期没有变化。然后我将时区更改为 GMT+2，伊斯坦布尔，日期发生了变化。然后我改到伦敦格林威治标准时间 0，没有班次。

当我进行非全天活动时，无论时区如何，正确的时间都会输入到日历中。

我发现的最接近的错误报告是 [http://code.google.com/p/android/issues/detail?id=14051](http://code.google.com/p/android/issues/detail?id=14051)

我是否在代码中遗漏了某些内容，或者其他人也遇到了这个问题。

**编辑** 使用内容解析器读取事件数据时的进一步检查

```
 ContentResolver cr = context.getContentResolver();
Uri uri =  CalendarContract.Events.CONTENT_URI; 
String selection =CalendarContract.Events._ID + "=?";
String [] selectionArgs = new String[]{String.valueOf(eventID)}; 
```

转换为日期时的 long 值是正确的日期和时间，例如。2013 年 2 月 14 日 12.00 AEST（悉尼时间）。所以问题一定出在谷歌日历读取这些值的方式上。当我从 Android 中的日历应用程序手动添加全天事件并使用内容解析器读取时间时，它是 AEST（悉尼时间）的日期和上午 11 点，对应于悉尼的 +11 GMT 关闭时间。因此，需要在 GMT 中输入全天事件以避免这种情况，但文档中没有提及这一点。

所以现在我正在转移时间，以避免这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-15T07:10:14.497

几个想法：

1.  全天事件的时区“独立性”（视为具有 GMT）[1] [2]
2.  国际日期变更线

[1]“如果 allDay 设置为 1，则 eventTimezone 必须为 TIMEZONE_UTC，并且时间必须对应于午夜边界。”

[2] [http://developer.android.com/reference/android/provider/CalendarContract.Events.html](http://developer.android.com/reference/android/provider/CalendarContract.Events.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-01T23:31:42.637

CalendarContract.EventsColumns 的文档状态“如果 allDay 设置为 1，则 eventTimezone 必须为 TIMEZONE_UTC，并且时间必须对应于午夜边界。”

我确保在查询 API 后返回预期日期的解决方案是 a) 将开始和结束事件值设置为与 UTC 对齐的日期。b) 调整查询后返回的时间，考虑设备时区和夏令时。

一个）

```
@Before
public void setup(){
    ...
    mJavaCalendar = Calendar.getInstance();
    mInputStart = getUtcDate(
            mJavaCalendar.get(Calendar.YEAR),
            mJavaCalendar.get(Calendar.MONTH),
            mJavaCalendar.get(Calendar.DAY_OF_MONTH));
}

private long getUtcDate(int year, int month, int day){
    Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
    calendar.set(year, month, day,0, 0, 0);
    calendar.set(Calendar.MILLISECOND, 0);
    return calendar.getTimeInMillis();
}

@Test
public void jCalAlldayTzDflt0000To2400(){
    mTodayEvent.setEventStart(mInputStart);
    mTodayEvent.setEventEnd(mTodayEvent.getEventStart() +  DateUtils.DAY_IN_MILLIS);
    mTodayEvent.setAllDay(true);
    ...
} 
```

b)

```
public static long getTzAdjustedDate(long date){
    TimeZone tzDefault = TimeZone.getDefault();
    return date - tzDefault.getOffset(date);
}

public void getCorrectDate(cursor){
    isAllDay() == 1 ? DateTimeUtils.getTzAdjustedDate(cursor.getLong(INST_PROJECTION_BEGIN_INDEX)) :
            cursor.getLong(INST_PROJECTION_BEGIN_INDEX)); 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-15T14:39:16.983

如果我的活动是全天活动，我会将其转换为当地时间。这使得全天活动保持在正确的日期。如果不是一整天，我就照常离开。我不认为这是一个很好的解决方案，但它确实有效，如果有人发现它有问题，请告诉我。

```
 var startDate = yourCalendarEvent.StartDate;
        if (yourCalendarEvent.IsAllDay)
        {
            startDate = startDate.ToLocalTime();
        }
        Java.Util.GregorianCalendar calStartDate = new Java.Util.GregorianCalendar(startDate.Year, startDate.Month - 1, startDate.Day, startDate.Hour, startDate.Minute, startDate.Second);
        intent.PutExtra(CalendarContract.ExtraEventBeginTime, calStartDate.TimeInMillis); 
```

# javascript - 检测用户何时在 div 外部单击

> ID：14291093
> 
> 赞同：3
> 
> 时间：2013-01-12T06:59:31.730
> 
> 标签：javascript, jquery

我正在向用户展示一个模态/灯箱。当用户单击按钮时，模态显示并且页面的其余部分变暗。平常的东西。

但是我想这样做。如果用户单击模式之外的任何元素，我希望模式消失并且页面恢复正常。

如何才能做到这一点？我知道我可以为 body 设置一个 onclick 事件，然后检查事件目标是否是我的模态，但是如果用户单击模态中的链接/文本框/按钮怎么办？在这种情况下，目标将不是模态的。我该如何解决这个问题？

有没有办法检查事件目标是否包含`<div id="modal"></div>`，如果是，我不会关闭模态，如果不是，这意味着用户在模态之外单击并且我可以关闭它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T07:02:05.360

**[jsBin 演示](http://jsbin.com/amudim/2/edit)**

```
$(document).mouseup(function(e){
   if(e.target.id !== 'modal' ){
     $('#modal').hide();
   }
});

$('#modal').mouseup(function(e){
  e.stopPropagation();  // prevent mouseup propagate to underneath layers
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:01:59.577

您可以在填充整个空间的模态下放置一个 div 并将您的点击处理程序附加到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T07:10:40.947

```
$("body").click(function(e){
    if( ! $(e.target).closest("#modal").length ){
        $('#modal').hide();
    }
}); 
```

[演示](http://jsbin.com/amudim/7/edit)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T06:58:56.333

另一种方法：

```
var mouseOverModal = false;

$(document).click(function(e){
   if ( ! mouseOverModal ){
       // close modal
   }
});

$('#modal').bind("mouseenter mouseleave", function(e){
     mouseOverModal = ( "mouseenter" == e.type );
})

$('#open-modal-handler').click(function(){  
    // open modal  
    return false; // <- IMPORTANT
}) 
```

# mysql - 什么可能导致 Visual Studio 2010 中的 Crystal Report 显示乱码？

> ID：14291095
> 
> 赞同：1
> 
> 时间：2013-01-12T06:59:53.587
> 
> 标签：mysql, vb.net, visual-studio-2010, crystal-reports

**早上好，**

在观看了大量在线教程并阅读了文档后，我决定开始使用 Crystal Reports for Visual Studio 运行时。据我了解，SAP Crystal Reports 运行时本身并不支持与 MySQL 数据库的连接，因此我相信我已正确完成所有操作，将数据库记录拉入 Dataset 对象。我可以看到数据集中的记录，它们与数据库中的记录相匹配。不幸的是，当我运行报告的预览时，除了日期字段之外，所有内容都是“乱码”。

我很困惑，不知道现在该怎么办，任何帮助将不胜感激。下面的屏幕截图显示了数据集中的记录以及报告预览。

顺便说一句，服务器和表上的排序规则都设置为“ *Latin1 - 默认排序规则*” - 不确定这是否有任何区别。

**图片 #1：查看数据集记录**

![在此处输入图像描述](../Images/96e5a00e55ca2361669467af65bbc914.png) 点击此处查看大图： [https ://dl.dropbox.com/u/55174425/Dataset%20Records.jpg](https://dl.dropbox.com/u/55174425/Dataset%20Records.jpg)

**图片 #2：报告的设计视图**

![在此处输入图像描述](../Images/ab6fbe5425ebd1701cc91ce29d7f5e8f.png) 点击此处查看大图： [https ://dl.dropbox.com/u/55174425/Design%20View%20of%20Report.jpg](https://dl.dropbox.com/u/55174425/Design%20View%20of%20Report.jpg)

图片#3：报告预览

![在此处输入图像描述](../Images/2563a61dce32e4da0c46008c3e82b899.png) 点击这里查看大图： [https ://dl.dropbox.com/u/55174425/Preview%20of%20Report.jpg](https://dl.dropbox.com/u/55174425/Preview%20of%20Report.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:00:50.740

**你好，**

我设法回答了我自己的问题，并决定分享我的答案，以防有人遇到同样的问题。

好吧，这不是什么大问题，因为它是 Crystal Reports for Visual Studio 运行时的实际工作方式（至少在涉及 MySQL 时）。我没有意识到的是，因为 VS 的 CR 运行时不支持与 MySQL 数据库的本机连接，所以有必要使用 Visual Studio 使用 .Net 连接器创建服务器连接（当您安装连接器）。

建立服务器连接后，我就可以创建一个 DataSet 并使用数据库中的记录填充它。不幸的是，我没有意识到这个数据集只允许选择设计报告（.rpt 文件）所需的字段/列。现在，这就是我的“胡言乱语”问题所在。事实上，我发现 CR 运行时在您设计报告时故意使用随机文本/字符，如果您预览报告，您会看到这一点。此外，如果您调试应用程序，您将得到一个只有列标题的空白报告。

对此的解决方案是以编程方式查询数据库、创建和填充 DataTable 并将其分配给您刚刚创建的报表的新实例作为其数据源。还有中提琴，报告现在显示了我正在寻找的信息。因此，这是我在运行时最终使用的代码，以便让我的报告显示我正在寻找的数据：

```
Private Sub Form2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Try
        'Define the MySQL Connection String.
        Dim myConnectionString As String = "Server=server_address;Port=3306;Uid=user_id;Password=password;Database=schema_name;"

        'Create a new MySqlConnection object and assign the Connection String to it.
        Dim dbConn As New MySqlConnection(myConnectionString)

        'Define your Query.
        Dim dbQuery As String = "SELECT * FROM users"

        'Create a new MySqlDataAdapter object and assign the Query and Connection String objects to it.
        Dim dbAdapter As New MySqlDataAdapter(dbQuery, dbConn)

        'Create a new DataTable object and fill it with the contents of the MySqlDataAdapter object.
        Dim dbTable As New DataTable
        dbAdapter.Fill(dbTable)

        'Create a new instance of the report you previously designed and set its DataSource to the DataTable.
        Dim report As New rptUserList
        report.SetDataSource(dbTable)

        'Set the ReportSource of the CrystalReportViewer control to your report.
        CrystalReportViewer1.ReportSource = report
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try

End Sub 
```

# silverstripe - Silverstipe 教程 - addFieldToTab 不起作用

> ID：14291099
> 
> 赞同：0
> 
> 时间：2013-01-12T07:01:02.040
> 
> 标签：silverstripe

我正在关注 silverstripe 教程 2：扩展基本站点[http://doc.silverstripe.org/framework/en/tutorials/2-extending-a-basic-site](http://doc.silverstripe.org/framework/en/tutorials/2-extending-a-basic-site)

我已下载 ss3.0.3 并使用 Windows 7 WAMP 2.1

我已经创建了 ArticlePage 和 ArticleHolderPage，但是当我创建一个 ArticleHolder 类型的页面时，内容选项卡中没有日期和作者字段。

我的文章页面代码：

```
class ArticlePage extends Page
{
    static $db = array(
         'Date'=>'Date',
         'Author'=>'Text'
      );

   public function getCMSFields()
   {
      $fields = parent::getCMSFields();

      $dateField = new DateField('Date');
      $dateField = setConfig('showcalendar', true);
      $fields->addFieldToTab('Root.Main', $dateField, 'Content');
      $fields->addFieldToTab('Root.Main', new TextField('Author'), 'Content');

      return $fields;
   }
} 
```

难道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:23:22.350

哦，我上面的评论太快了，刚刚在你的代码中发现了一个错误：

```
$dateField = setConfig('showcalendar', true); 
```

应该读

```
$dateField->setConfig('showcalendar', true); 
```

# php - 选择框中未选择的选项不会附加到另一个选择框中

> ID：14291105
> 
> 赞同：0
> 
> 时间：2013-01-12T07:01:47.640
> 
> 标签：php, jquery, html, ajax, mysqli

我的应用程序中有 2 个选择框。现在，当用户提交页面时，所有在选择框中被选中（突出显示）的学生`#studentadd`都会被附加到`#studentselect`选择框。但未在第一个选择框中选择的选项不会附加到第二个选择框中。

我的问题是如何在“#studentadd”选择框中获得未选择的选项以附加到“#studentselect”选择框中？

是我的 php/ajax 的问题，因为我所做的是使用 ajax 导航到单独的 php 文件并将`#studentadd`选择框中的学生插入数据库。但是插入只发生在`#studentdd`选择框中的那些学生荧光笔上。它不会对那些在 `#studentadd' 中未选择的选项执行插入操作。

下面是选择框`#studentadd`：

```
<select multiple="multiple" name="addtextarea" id="studentadd" size="10">
    <option value='1'>u08743 - Joe Cann</option>
    <option value='4'>u03043 - Jill Sanderson</option>
    <option value='7'>u08343 - Craig Moon</option>
</select> 
```

以下是学生应附加到的选择框：

```
<select id="studentselect" name="studenttextarea"></select> 
```

下面是jquery/ajax：

```
 function submitform() {    

    $.ajax({
        type: "POST",
        url: "updatestudentsession.php",
data: { 
    addtextarea:$('#studentadd').val()
        },
        dataType:'json',  //get response as json
        success: function(result){
                    if(result.errorflag){

       //do your stuff on getting error message
      var newHtml="<span style='color: red'>"+result.msg+"</span>"; 
      $("#targetdiv").html(newHtml);  //i am displaying the error msg here

      $('#targetdiv').show();

    }else{
       //you got success message

       var newHtml="<span style='color: green'>"+result.msg+"</span>"; 
            $("#targetdiv").html(newHtml);

           //append students you want to add to assessment into student exist select box 
            var selectedOption = $('select#studentadd');
            $('select#studentselect').append(selectedOption.html()); 

             //blank #studentadd select box
             $('#studentadd').empty(); 

                $('#targetdiv').show();
        }
    }
  });        
} 
```

下面是`updatestudentsession.php`从 ajax 访问并将数据插入数据库的单独 php 文件：

```
$studentid = (isset($_POST['addtextarea'])) ? $_POST['addtextarea'] : array(); 
$sessionid = (isset($_POST['Idcurrent'])) ? $_POST['Idcurrent'] : array();   

$insertsql = "
INSERT INTO Student_Session
(SessionId, StudentId)
VALUES
(?, ?)
";

if (!$insert = $mysqli->prepare($insertsql))
{
    // Handle errors with prepare operation here
}      

$success = true;

foreach($studentid as $id)
{ 
    $insert->bind_param("ii", $sessionid, $id);

    if($insert->execute() === false)
    {
        $success = false;
    }
}

$insert->close();

if($success)
{
    echo json_encode(array('errorflag'=>false,'msg'=>"Students have been successfully added into the Assessment"));
}
else
{
    echo json_encode(array('errorflag'=>true,'msg'=>"An error has occured, Students have not been added into the Assessment"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:45:53.343

啊，您想在提交时选择所有目标选项：

```
function submitform() {    
  $('#studentadd option').attr('selected', 'selected'); 
```

还是你的意思

```
 $('#studentselect option').attr('selected', 'selected'); 
```

??

# c# - 使用 C# 的 AES crypt 函数并使用 javascript 解密

> ID：14291107
> 
> 赞同：0
> 
> 时间：2013-01-12T07:02:00.653
> 
> 标签：c#, javascript, aes

我正在尝试编写一个可以用 JavaScript 解密的 C# crypt 函数，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:36:14.540

对于需要更高安全性的应用程序，我通常使用 C# 进行编码和解码，并在 JS 中使用 $.ajax，但是有一种简单的方法使用 JS 来解码预加密的字符串。

您可以使用 Base64String ...

C＃ ：

```
string encoded = Convert.ToBase64String(Encoding.UTF8.GetBytes(str)); 
```

JS：

```
function decode(str) {
  var keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
  var output = "";
  var chr1, chr2, chr3;
  var enc1, enc2, enc3, enc4;
  var i = 0;

  do {
     enc1 = keyStr.indexOf(str.charAt(i++));
     enc2 = keyStr.indexOf(str.charAt(i++));
     enc3 = keyStr.indexOf(str.charAt(i++));
     enc4 = keyStr.indexOf(str.charAt(i++));

     chr1 = (enc1 << 2) | (enc2 >> 4);
     chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
     chr3 = ((enc3 & 3) << 6) | enc4;

     output = output + String.fromCharCode(chr1);

     if (enc3 != 64) {
        output = output + String.fromCharCode(chr2);
     }
     if (enc4 != 64) {
        output = output + String.fromCharCode(chr3);
     }
   } while (i < str.length);

  return output;
} 
```

# css - CSS：如何摆脱移动元素留下的空间？

> ID：14291113
> 
> 赞同：0
> 
> 时间：2013-01-12T07:02:32.290
> 
> 标签：css, positioning, element

我有一个元素，我向右移动然后向上推。它排列得很完美，但由于某种原因，它仍然留下了它之前占据的空间。我尝试了清除、溢出、空白、负边距、可见性、块等。没有乐趣。CSS 似乎并没有预料到人类的想法。

```
 div.overlay-ad{

     position:relative;
     width:310px;
     height:260px;
     top:-332px;
     left:538px;

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:32:29.473

```
div.overlay-ad{
     position:absolute;
     width:310px;
     height:260px;
     top:-332px;
     left:538px;
} 
```

这`position: relative`使您的块占用了流程中的空间。然后将视觉渲染放置在远处并不重要。`position: absolute`将块移出一般流程。

# java - 异常处理错误：找不到符号变量

> ID：14291117
> 
> 赞同：2
> 
> 时间：2013-01-12T07:03:21.730
> 
> 标签：java, exception, exception-handling

```
public static void operation() {
    try {
        Scanner input = new Scanner(System.in);
        String choiceString = "";
        char choice = 'a';
        System.out.print("Enter letter of choice: ");
        choiceString = input.next();
        if (choiceString.length() == 1) {
            choice = choiceString.charAt(0);
            System.out.println("-------------------------------------------");

        switch(choice) {
            case 'a': {
                ....
                break;  
            }
            case 'b': {
                ....    
            }
            default:
                throw new StringException("Invalid choice...");
        }
        }else {
            throw new StringException("Invalid input...");
        }
    } catch(StringException i) {
        System.out.println("You typed " + choiceString + i);
    } 
```

当程序提示用户输入选择的字母，并且用户输入一个单词或一个数字时，它应该捕获异常。它应该显示这个输出：

```
You typed: ashdjdj
StringException: Invalid input... 
```

这里的问题是，它找不到变量choiceString。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T07:06:15.750

这是因为您在 try 块中声明了变量，在 try 块之外声明它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:38:06.957

像这样将您的choiceString移出try块，

```
String choiceString = "";
        try {
            Scanner input = new Scanner(System.in);
........ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T07:07:41.147

您的问题是在 try 块中声明的变量的范围从相应的 catch 块中是不可见的。要修复编译错误，请在 try 之外声明变量，如下所示，

```
public static void operation() {
    String choiceString = "";
    try {
        ...
    } catch(StringException i) {
        System.out.println("You typed " + choiceString + i);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T07:08:24.360

在try catch块之外声明choiceString，它应该可以解决问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T07:08:25.597

choiceString 在 try 块中声明，因此在该范围内是本地的。您可以将choiceString 移到try-catch 块的外部，以使其在catch 块的范围内可用：

```
String choiceString = "";
try {
  //  omitted for brevity
} catch(StringException i) {
  System.out.println("You typed " + choiceString + i);
} 
```

# php - 通过ajax传递动态值

> ID：14291118
> 
> 赞同：0
> 
> 时间：2013-01-12T07:03:50.480
> 
> 标签：php, jquery, mysql, ajax

我在 jquery 中有这段代码，它的编写方式是当我向下滚动鼠标时，会从 db 中获取下一组记录并显示出来。最初我的页面显示 25 条记录，当我向下滚动下一个 15 条记录时，r 从 db 中获取。我的问题是，每当调用滚动功能时，我都无法设置计数器并增加计数器。而且每当我向下滚动时，都会显示相同的 15 条记录。这是我的代码...

```
$(window).on('scroll',function(){
  if($(window).scrollTop()==($(document).height()-$(window).height())){

    $.ajax({
        type: 'POST',
        url: 'getdata.php',
        success: function(nxt_data){
           $('#data').append(nxt_data);
        }
    });
  } 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T07:08:28.640

创建一个页面变量，然后在每次调用 ajax 时添加到它。

```
var page = 1;
$(window).on('scroll', function () {
  if ($(window).scrollTop() == ($(document).height() - $(window).height())) {
    page++;

    $.ajax({
      type: 'POST',
      data: 'page=' + page,
      url: 'getdata.php',
      success: function (nxt_data) {
        $('#data').append(nxt_data);
      }
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:10:23.410

您的问题似乎是因为 getdata.php 无法知道要返回哪些记录，所以它只是返回相同的 15 行。

```
var counter=25;

$(window).on('scroll',function(){
  if($(window).scrollTop()==($(document).height()-$(window).height())){

    $.ajax({
        type: 'GET',
        url: 'getdata.php?start_row=' + counter,
        success: function(nxt_data){
           $('#data').append(nxt_data);
           counter += 15;
        }
    });
  } 
}); 
```

在您的 PHP 文件中，您可以使用以下方法访问计数器变量`$_GET['start_row'];`

# maxima - 阻止最大值询问正数、负数或零

> ID：14291119
> 
> 赞同：13
> 
> 时间：2013-01-12T07:04:26.347
> 
> 标签：maxima

有没有办法告诉最大值一个表达式总是积极的？这是一个示例片段，它导致 maxima 询问表达式的问题`sin(a)*x`：

```
声明（[a，x，y]，真实）；
 ca: cos(a) = (x / (sqrt(x*x + y*y)));
 a1: 解决(ca,a)[1];
 解决（a1，y）；

```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-12T07:13:19.013

您可以使用`assume`. 来自Maxima自己的文档：

```
    -- 函数：假设 (, ..., )
     将谓词 , ... 添加到当前上下文。
     如果谓词与中的谓词不一致或冗余
     当前上下文，它不会添加到上下文中。上下文
     从每次调用“assume”中累积谓词。

     `assume' 返回一个列表，其元素是添加到的谓词
     上下文或原子“冗余”或“不一致”，其中
     适用的。

     谓词 , ..., 只能是表达式
     使用关系运算符 `=' 和 `>'。
     谓词不能是文字相等 `=' 或文字不等式
     `#' 表达式，也不能是谓词函数，例如
     '整数'。

     ` and ... and ' 形式的复合谓词
     被识别，但不是 ` 或 ... 或 '。`不是
     ' 如果是关系谓词则被识别。
     'not ( and )' 和 'not 形式的表达式
     ( 或 )' 无法识别。

     千里马的扣减机制不是很强；有许多
     不能由“是”确定的明显后果。这是
     一个已知的弱点。

     `assume' 评估它的论点。

     参见“is”、“facts”、“forget”、“context”和“declare”。

```

```
 Examples:

      (%i1) assume (xx > 0, yy < -1, zz >= 0);
      (%o1)              [xx > 0, yy < - 1, zz >= 0]
      (%i2) assume (aa < bb and bb < cc);
      (%o2)                  [bb > aa, cc > bb]
      (%i3) facts ();
      (%o3)     [xx > 0, - 1 > yy, zz >= 0, bb > aa, cc > bb]
      (%i4) is (xx > yy);
      (%o4)                         true
      (%i5) is (yy < -yy);
      (%o5)                         true
      (%i6) is (sinh (bb - aa) > 0);
      (%o6)                         true
      (%i7) forget (bb > aa);
      (%o7)                       [bb > aa]
      (%i8) prederror : false;
      (%o8)                         false
      (%i9) is (sinh (bb - aa) > 0);
      (%o9)                        unknown
      (%i10) is (bb^2 < cc^2);
      (%o10)                       unknown 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-01-19T12:34:45.673

当关系运算符的两边都有空格时，“假设”有效。换句话说，在我的例子中：假设（L> 0）不起作用，但假设（L > 0）确实起作用！

# jquery - 将 JQuery 与 AJAX 一起使用时出错

> ID：14291135
> 
> 赞同：0
> 
> 时间：2013-01-12T07:06:46.580
> 
> 标签：jquery

我在 index.html 中使用以下代码

```
<html>
<head>
<title>Ajax check</title>
<script type="text/javascript" src="jquery-1.8.3.min.js" > </script>

<script type="text/javascript">
$(document).ready(function(){

alert('working...');
$('#ibutton').click(function(e){
e.preventDefault();
alert('double click');      
$.ajax({
url: "page.html",
cache: false,
success: function(){
$("#message").text('ajax working..');
},
error: function(){
$("#message").text('error in the page');
}
});
}); 
});
</script>
</head>
<body> 
<form action="page.html">
<input type="button" id="ibutton" value="click here"/>
<div id="message"></div>
</form>
</body>
</html> 
```

在`page.html`中，当我单击`click here`按钮时，唯一的内容是“正在工作...”...它显示“页面中的错误”...我犯了什么错误？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:30:39.050

确保`page.html`与当前页面位于同一文件夹中。您的代码没有任何问题。此外，我在我的电脑上测试了你的代码，它就像一个魅力。似乎这里唯一的问题是`page.html`与当前工作的脚本不在同一个文件夹中。

# php - 如何让一个按钮执行两个操作？

> ID：14291140
> 
> 赞同：0
> 
> 时间：2013-01-12T07:07:13.230
> 
> 标签：php

是否可以让一个“保存”按钮执行这两个操作？

行动一：

```
<td>
<?php
    $target = TRoute::_("index.php?option=com_adsmanager&task=save"); 
    if ($this->nbcats == 1)
    {
        $this->displaySingleCatChooser(@$this->content->id,$this->conf,"com_adsmanager",$this->cats,$this->catid);
    }
?>
</table> 
```

行动二：

```
<input type="button" onclick="countDown(this.form)" value="SAVE"><p> 
```

提前致谢。

# php - 为什么我不能选择数据库？（错误“未选择数据库”）

> ID：14291142
> 
> 赞同：0
> 
> 时间：2013-01-12T07:07:31.767
> 
> 标签：php, mysql, database, calendar

我发现这个漂亮的 PHP 日历正是我想要创建的，所以我决定在我的网站上采用它。然而问题是我不能为我的生活让它工作......

[这是这里](http://www.rpetechnologies.com/calendar/code.php?p=c)的函数代码。这是通用页面[。](http://www.rpetechnologies.com/calendar/code.php?p=h)我的 dbinfo.php 看起来像这样。

```
<?php

$dbhost = 'localhost';

$dbuser = 'username';

$dbpass = 'pass';

$dbname = 'database';

$dblink = mysql_connect($dbhost, $dbuser, $dbpass, $dbname);

?> 
```

谁能给我一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:09:37.593

$dblink = mysql_connect($dbhost, $dbuser, $dbpass); mysql_select_db($dbname);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:10:24.287

使用 连接到数据库后`mysql_connect()`，您必须调用[`mysql_select_db()`](http://php.net/mysql_select_db)以选择数据库。

尝试以下操作：

```
$dblink = mysql_connect($dbhost, $dbuser, $dbpass);
mysql_select_db($dbname, $dblink); 
```

旁注（不具体回答）：
您应该考虑使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)库而不是过时/不受支持的`mysql_`方法。两者都为您提供了额外的功能和安全优势，并且修改您的代码以实现任何一个都不是太困难。例如，与上面相同的代码，但使用 MySQLi 将是：

```
$dblink = mysqli_connect($dbhost, $dbuser, $dbpass, $dbname); 
```

请注意，您可以在与连接本身相同的调用中选择数据库！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:12:18.983

你做错了。

尝试：

`$db_link = mysql_connect($dbhost, $dbuser, $dbpass);`

接着：

`mysql_select_db($dbname);`

但是，现在不鼓励使用 mysql_* 函数。请改用 MySQLi 或 PDO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T07:14:06.257

`mysql_connect`已弃用[http://php.net/manual/en/function.mysql-connect.php](http://php.net/manual/en/function.mysql-connect.php)

如果可能，您应该使用 mysqli 或 PDO。试试`mysqli_connect`吧。再加上看看Xingjia Luo的回答，你的最后一个参数（dbName）不应该被传递。

[http://php.net/manual/en/mysqli.quickstart.dual-interface.php](http://php.net/manual/en/mysqli.quickstart.dual-interface.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T07:14:18.660

用这个

```
$con = mysql_connect($dbhost, $dbusername, $dbpassword);
mysql_select_db($yourdb, $con); 
```

# php - 您必须启用 openssl 扩展才能通过 https 下载文件

> ID：14291151
> 
> 赞同：124
> 
> 时间：2013-01-12T07:08:33.623
> 
> 标签：php, ssl, openssl, zend-framework2, composer-php

我想安装 Zend Framework 2。所以我下载了框架应用程序。正如ZF2手册中提到的，我们必须发出命令

```
php composer.phar install 
```

骨架里面。

但我收到一个错误

> 您必须启用 openssl 扩展才能通过 https 下载文件

然后我在我的 wamp 中启用了 ssl_module，我检查了 php_ini 文件，我可以看到以下行

> 扩展=php_openssl.dll

我仍然遇到同样的错误。有人知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：288
> 
> 时间：2013-01-21T20:55:40.247

PHP CLI SAPI 使用不同于`php.ini`CGI 或 Apache 模块。

通过从行首删除分号 ( ) 来查找 line `;extension=php_openssl.dll`in`wamp/bin/php/php#.#.##/php.ini` 并取消注释。`;`

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-05-08T11:55:32.077

验证您正在编辑正确的 php.ini 文件。

参考： [https ://github.com/composer/composer/issues/1440](https://github.com/composer/composer/issues/1440)

“WAMP 在 CLI 和 Apache 中使用不同的 php.ini 文件。当您通过 WAMP UI 启用 php_openssl 时，您为 Apache 而不是 CLI 启用它。您需要修改 C:\wamp\bin\php\php- XYZ\php.ini 为 CLI 启用它。”

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-11-19T12:43:46.220

确保您有正确的扩展文件夹路径

> extension_dir = "分机"

默认情况下，它带有注释；特点

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-08-16T16:34:59.873

在玩 Zend Framework 2 和 composer 时，我也遇到了同样的问题。我正在使用 PHP 5.4（通过 macports 安装），我的解决方案是通过 macports 为 PHP 5.4 安装 openssl。

```
sudo 端口安装 php54-openssl

```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-19T22:55:45.837

我遇到了这个问题，但配置 openssl（也适用于 cli）并没有帮助。

**我已经更新了作曲家，这解决了我的问题。**

只需输入：

```
$ php composer.phar self-update 
```

或者

```
$ composer selfupdate 
```

祝你好运！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-11-23T22:31:27.173

我使用 XAMPP。在 C:\xampp\php\php.ini 中，openssl 的条目不存在，所以我在第 989 行添加了“extension=php_openssl.dll”，composer 工作了。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-12-22T06:16:37.400

您需要在两个文件（php 和 apache）中启用“extension=php_openssl.dll”。我的电脑文件路径是这些：

1.  C:\wamp\bin\php\php5.3.13\php.ini

2.  C:\wamp\bin\apache\apache2.2.22\bin\php.ini

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-09-20T06:40:54.593

Valery 的回答帮助了我： [https ://stackoverflow.com/a/14265815/492457](https://stackoverflow.com/a/14265815/492457)

> WAMP 在 CLI 和 Apache 中使用不同的 php.ini 文件。当您通过 WAMP UI 启用 php_openssl 时，您为 Apache 启用它，而不是为 CLI 启用它。您需要修改 C:\wamp\bin\php\php-5.4.3\php.ini 为 CLI 启用它。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-01-29T17:26:30.693

Uttam，如果您的问题没有解决，请尝试以下 3 步方法。它对我有用，因为我遇到了完全相同的问题。

step1：点击wamp托盘图标。

第二步：转到菜单 apache->apache 模块

第三步：点击菜单项“ssl_module”

它会自动重启 wamp。如果 wamp 未自动重新启动，则通过 wamp 托盘菜单-> 重新启动所有服务重新启动它。重新启动后确认“ssl_module”在菜单 apache->apache 模块下打勾

之后，只需通过您共享的响应尝试 php composer.phar 安装，php.ini 文件包含 extension=php_openssl.dll 并且 php/ext 目录也有文件“php_openssl.dll”

祝你好运

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-07-02T12:03:02.643

确保更新您的`php.ini`for `CLI`。就我而言，这是`C:\wamp\bin\php\php5.4.3\php.ini`取消注释`extension=php_openssl.dll`行。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-02-12T05:53:54.293

迟到的答案，但添加以便其他人可以了解原因。

您还需要在“wamp\bin\php\php-XYZ”位置编辑 php.ini 文件。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-10T17:59:20.847

我必须取消注释文件才能正常工作`extension=openssl`！`php.ini`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-16T09:33:10.210

请注意，如果您使用的是 wamp，请不要使用 wamp ui 来启用`extension=php_openssl.dll`

只需转到您的 php 目录，例如：`C:\wamp\bin\php\php5.4.12`然后编辑`php.ini`并取消注释`extension=php_openssl.dll`.

它应该工作。

# popup - Facebox - Facebox 弹出窗口不显示 FB Like 按钮

> ID：14291152
> 
> 赞同：0
> 
> 时间：2013-01-12T07:08:37.933
> 
> 标签：popup, facebook-like, facebox

我正在尝试在 Facebook 弹出窗口中显示类似 FB 的按钮，但它对我来说并不能始终如一地工作，在多次打开弹出窗口后，出现类似 fb 的按钮。

我还尝试使用 FB Like 按钮 - Iframe 代码，它可以完美运行，但在这种情况下无法触发边缘创建事件。

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:46:23.620

终于找到解决方案了，问题出在解析...

FB.XFBML.parse(document.getElementById("login1")); 不是仅解析添加按钮代码的 div，而是

我刚刚解析如下，FB.XFBML.parse();

现在像按钮获取显示和

# php - 管理员区域中的 PHP MyDirectory cron 作业警告

> ID：14291157
> 
> 赞同：0
> 
> 时间：2013-01-12T07:09:20.667
> 
> 标签：php, cron

我有一个内置在 phpmydirectory 中的网站。

当我转到管理面板时，我收到以下警告。谁能告诉我如何解决它？临时文件夹的权限为 755，我也尝试过 777。

```
Scheduled tasks have not run in the last 5 days. Please ensure the /files/temp/ folder is writable. If it continues to fail, please setup your cron job to run hourly using one of the following:

Using PHP: 
```

php -q /home/content/60/8955660/html/cron.php 2f1d8c64644e7d9d462d8602aed5e6a3

```
Using GET: 
```

获取[http://www.peydaa.com/cron.php?c=2f1d8c64644e7d9d462d8602aed5e6a3](http://www.peydaa.com/cron.php?c=2f1d8c64644e7d9d462d8602aed5e6a3)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:03:06.277

请确保名为“ **www-data** ”的 Apache Web 服务器组是“/files/temp/”的所有者

例子：

chmod -R 775 www-数据/文件/临时/

chown -R www-data:www-data /files/temp/

# php - 无法使用 PHP 代码和 SMTP 服务器向 yahoo（任何地址）发送邮件

> ID：14291162
> 
> 赞同：1
> 
> 时间：2013-01-12T07:10:00.603
> 
> 标签：php, email, smtp, gmail, yahoo

我有以下设置 SMTP 服务器的代码：

```
ini_set("send_from", "test@gmail.com");
ini_set("SMTP", "smtp.gmail.com"); 
```

我以这种方式创建了一个简单的邮件：

```
mail("test@yahoo.com", "A subject", "My message for you", "From: TEST"); 
```

当我运行此代码时，它无法向**Yahoo**发送邮件，例如**some.email@yahoo.com**。但是当我使用任何**Gmail**邮件地址作为第一个参数时，它可以工作。

怎么了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:22:38.757

要以经过身份验证的用户身份发送邮件，您应该使用[SPF](http://en.wikipedia.org/wiki/Sender_Policy_Framework)、[DKIM](https://help.ubuntu.com/community/Postfix/DKIM)等**电子邮件身份验证方法**。

此外，您需要确保您的域应该指向您的 IP 地址，并且 IP 地址必须指向同一个域。这称为[反向 DNS](http://en.wikipedia.org/wiki/Reverse_DNS_lookup)

防止邮件进入垃圾邮件文件夹的其他良好做法是

1.  确保您有退订链接
2.  确保`Reply-To`添加了标题并且此处使用的电子邮件是有效的电子邮件。
3.  在`To`字段中添加名称。像`First Last <email@example.com>`
4.  添加您要邮寄的公司的邮政地址，其中必须包含电话号码。

有一个表格可以将雅虎的电子邮件发件人 IP 列入白名单。现在我没有找到它。所以尝试上面的事情，它应该工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:18:32.337

在这种情况下，您不进行身份验证（用户名密码）并且不使用 tls。这不会被接受。

更好地使用这个：

[使用 Gmail 帐户的 XAMPP Sendmail](https://stackoverflow.com/questions/4948687/xampp-sendmail-using-gmail-account)

或通过 smtp 发送电子邮件的框架，例如

[Zend 邮件 Gmail SMTP](https://stackoverflow.com/questions/1094137/zend-mail-gmail-smtp)

[http://framework.zend.com/manual/1.12/en/zend.mail.sending.html](http://framework.zend.com/manual/1.12/en/zend.mail.sending.html)

这是一个代码示例

[http://framework.zend.com/downloads/latest#ZF1](http://framework.zend.com/downloads/latest#ZF1)

```
require('Zend/Mail.php');

$config = array(
    'ssl' => 'tls',
    'port' => 587,
    'auth' => 'login',
    'username' => 'your_gmail_address@gmail.com',
    'password' => 'password'
);
$smtpConnection = new Zend_Mail_Transport_Smtp('smtp.gmail.com', $config);

Zend_Mail::setDefaultTransport($smtpConnection);

Zend_Mail::setDefaultFrom('your_gmail_address@gmail.com', 'Your real name');

$mail = new Zend_Mail();
$mail->addTo('any_address@yahoo.com', 'Test');

$mail->setSubject(
        'Demonstration - Sending Mails per SMTP Connection'
    );

$mail->setBodyText('...Your message here...');

$mail->send($smtpConnection); 
```

# html - 在为 android 智能设备设计 UI 时，我应该遵循的设计指南？

> ID：14291163
> 
> 赞同：-2
> 
> 时间：2013-01-12T07:10:03.670
> 
> 标签：html, android-layout, css, user-interface, photoshop

由于我是一个初学者，就设计android智能设备而言，我想知道**设计指南，我在为android智能设备设计UI时应该遵循。这里我指的是 Photoshop 设计指南和 HTML5/CSS3 指南。**

谢谢-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:32:28.703

您最好的选择是遵循 Google 的官方 Android 设计指南。你可以在[这里](http://developer.android.com/design/index.html)找到它们。

除此之外，您还可以从包含 Android 设计元素的不同来源下载大量 GUI 工具包。

# opencv - 来自 Vector 的 opencv Mat 模板初始化

> ID：14291165
> 
> 赞同：1
> 
> 时间：2013-01-12T07:10:19.377
> 
> 标签：opencv, stl, vector, mat

我正在编写一个带有一些行的函数，以将 2d STL 向量转换为 OpenCV Mat。因为，OpenCV 支持使用 Mat(vector) 从向量初始化 Mat。但这一次，我尝试了一个 2D 矢量，但没有成功。

该功能很简单，例如：

```
template <class NumType>
Mat Vect2Mat(vector<vector<NumType>> vect)
{
    Mat mtx = Mat(vect.size(), vect[0].size(), CV_64F, 0);  // don't need to init??
    //Mat mtx;

    // copy data
    for (int i=0; i<vect.size(); i++)
        for (int j=0; j<vect[i].size(); j++)
        {
            mtx.at<NumType>(i,j) = vect[i][j];
            //cout << vect[i][j] << " ";
        }   

    return mtx;
} 
```

那么有没有办法用 NumType 相应地初始化 Mat mtx？语法始终固定为 CV_32F、CV_64F、....，因此非常受限制

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:59:04.123

我想我已经找到了 OpenCV 文档中给出的答案。他们通过使用 DataType 类将该技术称为“类特征”。

就像是：

```
Mat mtx = Mat::zeros(vect.size(), vect[0].size(), DataType<NumType>::type); 
```

例如：

```
 template <class NumType>
cv::Mat Vect2Mat(std::vector<std::vector<NumType>> vect)
{
    cv::Mat mtx = cv::Mat::zeros(vect.size(), vect[0].size(), cv::DataType<NumType>::type);  
    //Mat mtx;

    // copy data
    for (int i=0; i<vect.size(); i++)
        for (int j=0; j<vect[i].size(); j++)
        {
            mtx.at<NumType>(i,j) = vect[i][j];
            //cout << vect[i][j] << " ";
        }   

        return mtx;
} 
```

# hadoop - Hadoop 进程记录如何跨块边界拆分？

> ID：14291170
> 
> 赞同：123
> 
> 时间：2013-01-12T07:10:57.050
> 
> 标签：hadoop, split, mapreduce, block, hdfs

根据`Hadoop - The Definitive Guide`

> FileInputFormats 定义的逻辑记录通常不适合 HDFS 块。例如，TextInputFormat 的逻辑记录是行，通常会跨越 HDFS 边界。这与您的程序的功能无关——例如，行不会丢失或损坏——但值得了解，因为它确实意味着数据本地映射（即，与它们在同一主机上运行的映射）输入数据）将执行一些远程读取。这导致的轻微开销通常并不显着。

假设一条记录线被分成两个块（b1 和 b2）。处理第一个块 (b1) 的映射器将注意到最后一行没有 EOL 分隔符，并从下一个数据块 (b2) 中获取该行的剩余部分。

处理第二个块（b2）的映射器如何确定第一个记录不完整，应该从块（b2）中的第二个记录开始处理？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2013-01-26T18:44:05.087

有趣的问题，我花了一些时间查看代码的细节，这是我的想法。拆分由客户端 by 处理`InputFormat.getSplits`，因此查看 FileInputFormat 会提供以下信息：

*   对于每个输入文件，获取文件长度、块大小并计算分割大小，其中`max(minSize, min(maxSize, blockSize))`对应`maxSize`于`mapred.max.split.size`和。`minSize``mapred.min.split.size`
*   `FileSplit`根据上面计算的分割大小将文件分成不同的s。这里重要的是**每个都使用与输入文件中的偏移量相对应`FileSplit`的参数进行初始化`start`**。那时仍然没有处理线。代码的相关部分如下所示：

    ```
    while (((double) bytesRemaining)/splitSize > SPLIT_SLOP) {
      int blkIndex = getBlockIndex(blkLocations, length-bytesRemaining);
      splits.add(new FileSplit(path, length-bytesRemaining, splitSize, 
                               blkLocations[blkIndex].getHosts()));
      bytesRemaining -= splitSize;
    } 
    ```

之后，如果您查看`LineRecordReader`由 定义的`TextInputFormat`，那是处理行的地方：

*   当您初始化时`LineRecordReader`，它会尝试实例化 a `LineReader`，这是一种能够读取行的抽象`FSDataInputStream`。有2种情况：
*   如果有`CompressionCodec`定义，那么这个编解码器负责处理边界。可能与您的问题无关。
*   但是，如果没有编解码器，这就是有趣的地方：如果`start`您`InputSplit`的 不同于 0，那么您**回溯 1 个字符，然后跳过您遇到的由 \n 或 \r\n (Windows) 标识的第一行**！回溯很重要，因为如果您的行边界与分割边界相同，这可以确保您不会跳过有效行。以下是相关代码：

    ```
    if (codec != null) {
       in = new LineReader(codec.createInputStream(fileIn), job);
       end = Long.MAX_VALUE;
    } else {
       if (start != 0) {
         skipFirstLine = true;
         --start;
         fileIn.seek(start);
       }
       in = new LineReader(fileIn, job);
    }
    if (skipFirstLine) {  // skip first line and re-establish "start".
      start += in.readLine(new Text(), 0,
                        (int)Math.min((long)Integer.MAX_VALUE, end - start));
    }
    this.pos = start; 
    ```

因此，由于拆分是在客户端计算的，因此映射器不需要按顺序运行，每个映射器都已经知道它是否需要丢弃第一行。

因此，基本上，如果您在同一个文件中有 2 行，每个 100Mb，为了简化，假设拆分大小为 64Mb。然后在计算输入拆分时，我们将有以下场景：

*   拆分 1 包含此块的路径和主机。在开始时初始化 200-200=0Mb，长度 64Mb。
*   拆分 2 在开始时初始化 200-200+64=64Mb，长度 64Mb。
*   拆分 3 在开始时初始化 200-200+128=128Mb，长度 64Mb。
*   拆分 4 在开始时初始化 200-200+192=192Mb，长度 8Mb。
*   映射器 A 将处理拆分 1，开始为 0，因此不要跳过第一行，并读取超过 64Mb 限制的整行，因此需要远程读取。
*   Mapper B 将处理 split 2，start 是 != 0 所以跳过 64Mb-1byte 之后的第一行，这对应于第 1 行的末尾 100Mb 仍然在 split 2 中，我们在 split 2 中有 28Mb 的行，所以远程读取剩余的 72Mb。
*   Mapper C 将处理拆分 3，开始为 != 0 所以跳过 128Mb-1byte 之后的第一行，这对应于 200Mb 处的第 2 行的结尾，这是文件的结尾，所以不要做任何事情。
*   映射器 D 与映射器 C 相同，只是它在 192Mb-1byte 之后查找换行符。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-01-12T06:39:46.950

**Map Reduce**算法不适用于文件的物理块。它适用于逻辑输入拆分。输入拆分取决于记录的写入位置。一条记录可能跨越两个映射器。

**HDFS**的设置方式是将非常大的文件分解为大块（例如，测量 128MB），并将这些块的三个副本存储在集群的不同节点上。

HDFS 不知道这些文件的内容。一条记录可能已在***Block-a***中开始，但该记录的结尾可能出现在***Block-b***中。

为了解决这个问题，Hadoop 使用存储在文件块中的数据的逻辑表示，称为输入拆分。当 MapReduce 作业客户端计算**输入拆分**时，***它会计算出块中第一条完整记录的开始位置和块中最后一条记录的结束位置***。

***关键点：***

***如果块中的最后一条记录不完整，则输入拆分包括下一个块的位置信息和完成记录所需的数据的字节偏移量。***

看看下面的图表。

[![在此处输入图像描述](../Images/d01eb6568c54c576351661198c500f83.png)](https://i.stack.imgur.com/4NCbv.jpg)

看看这篇[文章](http://www.dummies.com/how-to/content/input-splits-in-hadoops-mapreduce.html)和相关的 SE 问题：[关于 Hadoop/HDFS 文件拆分](https://stackoverflow.com/questions/9258134/about-hadoop-hdfs-file-splitting)

可以从[文档中阅读更多详细信息](https://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapred/InputFormat.html)

Map-Reduce 框架依赖作业的 InputFormat 来：

1.  验证作业的输入规范。
2.  将输入文件拆分为逻辑 InputSplits，然后将每个输入文件分配给单独的 Mapper。
3.  然后将每个 InputSplit 分配给一个单独的 Mapper 进行处理。*Split 可以是 tuple*。 `InputSplit[] getSplits(JobConf job,int numSplits`) 是处理这些事情的 API。

[FileInputFormat](https://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/FileInputFormat.html)，它扩展了`InputFormat`实现的`getSplits`() 方法。[在grepcode](http://grepcode.com/file_/repo1.maven.org/maven2/com.ning/metrics.action/0.2.7/org/apache/hadoop/mapreduce/lib/input/FileInputFormat.java/?v=source)中查看此方法的内部结构

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-12T09:49:55.030

我认为它如下： InputFormat 负责将数据拆分为逻辑拆分，同时考虑到数据的性质。
没有什么能阻止它这样做，尽管它会为作业增加显着的延迟 - 所有逻辑和围绕所需拆分大小边界的读取都将在 jobtracker 中发生。
最简单的记录感知输入格式是 TextInputFormat。它的工作方式如下（据我从代码中了解）-输入格式按大小创建拆分，无论行如何，但 LineRecordReader 始终：
a）跳过拆分中的第一行（或其中的一部分），如果不是第一次拆分
b) 最后读取拆分边界后的一行（如果数据可用，则不是最后一次拆分）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-23T13:29:48.297

据我了解，当`FileSplit`为第一个块初始化时，会调用默认构造函数。因此 start 和 length 的值最初为零。在第一个块的处理结束时，如果最后一行不完整，那么长度的值将大于分割的长度，它也会读取下一个块的第一行。因此，第一个块的 start 值将大于零，在这种情况下，`LineRecordReader`将跳过第二个块的第一行。（见[来源](http://grepcode.com/file_/repository.cloudera.com/content/repositories/releases/com.cloudera.hadoop/hadoop-core/0.20.2-737/org/apache/hadoop/mapreduce/lib/input/LineRecordReader.java/?v=source)）

如果第一个块的最后一行是完整的，那么 length 的值将等于第一个块的长度，而第二个块的 start 值将为零。在这种情况下，`LineRecordReader`将不会跳过第一行并从头开始读取第二个块。

说得通？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-27T16:18:47.033

从 LineRecordReader.java 的 hadoop 源代码构造函数：我找到了一些评论：

```
// If this is not the first split, we always throw away first record
// because we always (except the last split) read one extra line in
// next() method.
if (start != 0) {
  start += in.readLine(new Text(), 0, maxBytesToConsume(start));
}
this.pos = start; 
```

由此我相信hadoop会为每个拆分读取一个额外的行（在当前拆分结束时，在下一个拆分中读取下一行），如果不是第一次拆分，第一行将被丢弃。以免线路记录丢失和不完整

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-06T00:01:42.063

映射器不必通信。文件块在 HDFS 中，并且当前映射器（RecordReader）可以读取具有该行剩余部分的块。这发生在幕后。

# c - 找到大于 n 的 2 的最小幂

> ID：14291172
> 
> 赞同：2
> 
> 时间：2013-01-12T07:11:09.373
> 
> 标签：c, algorithm, bit-manipulation

我遇到了一段代码，用于查找大于 32 位整数 n 的 2 的最小幂...

```
n+=(n==0);
n--;
n|=n>>1;
n|=n>>2;
n|=n>>4;
n|=n>>8;
n|=n>>16;
n++; 
```

现在它是如何工作的？我尝试在 n=100 的每一步之后以 base-2 打印数字，但这没有多大意义。其背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T07:18:52.210

这段代码`n`用二进制`1`s 填充给定数字的所有最低有效位，然后将结果增加 ，从而`1`实现请求的结果。例如，对于输入`101`，位操作将产生`111`，并且在增加之后`1`将变为`1000`(8)，这实际上是大于`101`(5) 的 2 的最小幂。

**更新**：实际上，这是对手动设置每个 lsb 位的简单方法的优化。为什么这种优化能达到相同的结果是一个更广泛范围内的不同问题，超出了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T07:22:13.190

实际上，它找到大于或等于 2 的最小幂，`n`它适用于 32 位无符号数。

*   第一行只是以与 1 相同的方式处理 0（以一种有点混乱的方式编写）
*   第二行说明“或等于”，如果一个数字恰好是 2 的幂，我们将其缩短一点。
*   接下来的几行确保所有低位都设置为 1。首先我们右移 1 并执行逻辑或。效果是现在最高位和紧随其后的位设置为 1。现在通过移位 2 执行相同操作，使最高 4 位变为 1，依此类推。
*   最后我们得到一个比 2 的幂小 1 的数字，我们只需加 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:21:27.713

除了 icepack 的回答：正如[这里](http://graphics.stanford.edu/~seander/bithacks.html#RoundUpPowerOf2)所解释的，算法计算`1 << (floor(log_2(n - 1)) + 1)`.

# android - 获取第一个活动和第二个活动到第三个活动的字符串值，我在 onPost 执行对话中获取列表视图

> ID：14291173
> 
> 赞同：-3
> 
> 时间：2013-01-12T07:11:14.210
> 
> 标签：android, database, android-intent

我有 3 个活动。我正在尝试从第一个 Activity 到第二个 Activity 获取字符串值。然后我想要第三个活动中的第一个活动和第二个活动的字符串值。

代码在我的活动中应该如何实现这一点？

我的流程是首先执行第一个 Activity，然后在第一个中启动第二个 Activity，最后在第二个中启动第三个 Activity。

我将 null 作为字符串值，在 log cat 中没有任何错误。

我无法在 onPost Execute 的 Topic.java 中的对话中看到列表视图，但是如果我在没有使用 arrayadapter 的情况下获得数据..

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:14:12.483

目前您没有发送第二个活动到第三个活动`SuperSecretValue`，`SuperSecretValue1`将您的第二个活动意图更改为：

```
Intent intent = new Intent(Topic.this, QuestionActivity.class);
 String superSecretValue = getIntent().getStringExtra("SuperSecretValue");
 String superSecretValue1 = getIntent().getStringExtra("SuperSecretValue1");

 intent.putExtra("AnotherSuperSecretValue", topicid);
 intent.putExtra("SuperSecretValue", superSecretValue);
 intent.putExtra("SuperSecretValue1", superSecretValue1);
 startActivity(intent); 
```

**编辑 ：**

如果您`QuestionActivity`在按钮单击时启动 Activity，则`Topic.this.getIntent().getStringExtra("SuperSecretValue"); ....` 用于从先前的 Activity 获取 Intent 或第二种方式在 Activity之后将`getIntent`代码移动到`onCreate`方法中`setContentView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:14:22.783

当您开始第三项活动时，您忘记在第二项活动中投入价值。

```
Intent intent = new Intent(Topic.this, QuestionActivity.class);
String superSecretValue = getIntent().getStringExtra("SuperSecretValue");
String superSecretValue1 = getIntent().getStringExtra("SuperSecretValue1");
intent.putExtra("SuperSecretValue",superSecretValue );// here is missing
intent.putExtra("SuperSecretValue1",superSecretValue1 ); // here is missing
intent.putExtra("AnotherSuperSecretValue", topicid);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T07:24:03.770

```
In second activity try this

Bundle bundle=getIntent().getExtras();

String superSecretValue = bundle.getString("SuperSecretValue");   
String superSecretValue1 =bundle.getString("SuperSecretValue1");

Intent intent = new Intent(Topic.this, QuestionActivity.class);  
intent.putExtra("AnotherSuperSecretValue", topicid);
intent.putExtra("SuperSecretValue",superSecretValue );
intent.putExtra("SuperSecretValue1",superSecretValue1 );  
startActivity(intent);

Again, in third activity, try this

Bundle bundle=getIntent().getExtras();  
String topicValue = bundle.getString("AnotherSuperSecretValue");  
String levelValue = bundle.getString("SuperSecretValue");  
String groupValue1 = bundle.getString("SuperSecretValue1");

System.out.println("Result:"+topicValue);  
System.out.println("Result:"+levelValue);  
System.out.println("Result:"+groupValue1); 
```

# d3.js - 为什么我的 D3 力布局图线延伸成圆形？

> ID：14291174
> 
> 赞同：2
> 
> 时间：2013-01-12T07:11:15.537
> 
> 标签：d3.js, force-layout

它在这里没有做任何奇怪的事情。但我似乎无法让它们与圆的外边缘相匹配。任何帮助，将不胜感激。

```
 // Create Nodes
    var node = svg.selectAll(".node")
        .data(force.nodes())
        .enter().append("g")
        //.group(d.group)
        .attr("class", "node")
        .on("mouseover", nodeMouseover)
        .on("mouseout", nodeMouseout)
        .call(force.drag);

    // Append circles to Nodes
    var circle = node.append("circle")
        .attr("r", 8)
        .style("stroke", function (d) { return d.BaseColor; })
        .attr("id", function (d) { return d.ID; })
        var link = svg.selectAll(".link")
        .data(force.links())
        .append("line")
        .attr("class", "link arrow")

    // Draw lines for Links between Nodes
    var link = svg.selectAll(".link")
        .data(force.links())
        .append("line")
        .attr("class", "link arrow") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T16:07:24.153

在 svg 中，创建的最新对象放在前面，这就是为什么您通常在节点之前创建链接。默认情况下，链接附加到节点的中心。例如，如果您将节点的不透明度更改为稍微透明，您可以看到这一点。

```
// Draw lines for Links between Nodes
var link = svg.selectAll(".link")
    .data(force.links())
    .append("line")
    .attr("class", "link arrow")

// Create Nodes
var node = svg.selectAll(".node")
    .data(force.nodes())
    .enter().append("g")
    //.group(d.group)
    .attr("class", "node")
    .on("mouseover", nodeMouseover)
    .on("mouseout", nodeMouseout)
    .call(force.drag);

// Append circles to Nodes
var circle = node.append("circle")
    .attr("r", 8)
    .style("stroke", function (d) { return d.BaseColor; })
    .attr("id", function (d) { return d.ID; }) 
```

# qt - 使用半透明属性时如何避免白色伪影？

> ID：14291175
> 
> 赞同：0
> 
> 时间：2013-01-12T07:11:21.427
> 
> 标签：qt, artifacts

我想在 Qt 中制作一个半透明的窗口：

```
setWindowFlags(Qt::Popup| Qt::FramelessWindowHint);
setAttribute(Qt::WA_TranslucentBackground,true); 
```

但是一旦我设置`Qt::WA_TranslucentBackground`为`true`，每个小部件的四个角上都会有白色的东西：

![](../Images/956bba6fc375c5c4f0600d4441c2bf70.png)

每当鼠标悬停在小部件上或单击它时，它就会出现。如何避免这种情况？如果我设置`Qt::WA_TranslucentBackground`为`false`，问题就会消失。但我需要透明窗口。预先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:46:16.903

我自己解决了。造成这些伪影的原因有两个：我为窗口打开了半透明背景，并使用 QPainter 手动绘制了窗口的圆角背景。当鼠标悬停/按下子小部件时，发送到窗口小部件的更新（QRect）小部件不能很好地计算背景。

当我使用样式表绘制背景时，问题解决了:)

# opencv - cmaklist.txt 的 OpenCV 和 Microsoft Visual Studio 2012 问题

> ID：14291179
> 
> 赞同：0
> 
> 时间：2013-01-12T07:11:49.133
> 
> 标签：opencv, cmake

当接受解决此处发布的 tuple::too many arguments 问题的建议时[OpenCV & Microsoft Visual Studio 2012 (for x64)](https://stackoverflow.com/questions/12474448/opencv-microsoft-visual-studio-2012-for-x64)

当我尝试添加 `if( MSVC ) # VS2012 doesn't support correctly the tuples yet add_definitions( /D _VARIADIC_MAX=10 ) endif()`

到顶级 cmakelists.txt 的末尾我收到此错误-

解析错误。需要一个命令名称，得到带有文本“ï»¿”的未引用参数。配置不完整，出现错误！

我的问题是这段代码应该插入到哪里？这个错误的原因是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:57:10.157

该`add_definitions`命令看起来不错。你也可以使用

```
add_definitions(-D_VARIADIC_MAX=10) 
```

但这不应该有任何区别。

您看到的错误消息与 CMake 无法解析构建文件夹中的 CMakeCache.txt 文件有关。

尝试删除 CMakeCache.txt 并重新运行 CMake。

# mysql - 将 Mongodb ObjectId 映射到 Mysql ID 字段

> ID：14291180
> 
> 赞同：4
> 
> 时间：2013-01-12T07:12:03.743
> 
> 标签：mysql, django, mongodb

我有一个基于 mongodb 的应用程序，它使用 12 字节 objectid 作为主键和用户 id，我有另一个使用 Mysql 的 Django 应用程序，需要继承从 mongodb 生成的用户 id（继承意味着不创建新 id，而只是存储 id 哪个来自 mongodb，并尽可能将其用作外键）。

什么是最好的解决方案，

1.  在 mysql 中用于表示 Mongo 对象 ID 的数据类型是什么？二进制（12）？
2.  考虑使用 Django，使用 binary(12) 需要任何额外的插件吗？
3.  或与上述不同的任何解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-17T13:20:31.517

我一直在使用两者`BINARY(12)`并将`VARCHAR(24)`MongoDB 的 ObjectIds 存储在 MySQL 中。`BINARY(12)`使用较少的磁盘空间，但您需要将`HEX()`其用作字符串。

# php - 可扩展的 CakePHP 登录系统

> ID：14291194
> 
> 赞同：0
> 
> 时间：2013-01-12T07:14:01.567
> 
> 标签：php, cakephp, login

我们决定将 CakePHP 用于登录系统和前端数据库 UI，因为在遵守其严格约定时所有的自动化，我知道 Codeigniter，并且使用 CI，您可以扩展系统控制器`system/core/Controller.php`以处理身份验证

```
class AdminController extends CI_Controller {

    protected $user;

    public function __construct() {

        parent::__construct();

        $this->load->model('AdminModel');

        $this->user = $this->AdminModel->user()->row();
        $data->user = $this->user;
        $this->load->vars($data);
    }
} 
```

然后通过将其扩展为应用程序控制器，`$user`全局可用并且 AdminController 已经扩展了 CI_Controller。

```
class Admin extends AdminController {

    public function __construct() {

        parent::__construct();

    }

    function index(){

        //$user is global since it's extending AdminController

        $this->data['user'] = $user->someItem;

        //load view etc..

    }
} 
```

我不确定这是否是使用 CakePHP 的正确方法，对于实现自动化的可扩展登录系统是否存在普遍共识/最佳实践？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:17:29.080

您可以`AuthComponent::user()`在需要详细信息或`AuthComponent::user('id')`需要特定字段的地方使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:15:56.427

是的，你可以这样做。例如，这将起作用：

```
 class AppController extends Controller
     class CustomAppController extends AppController
         class BikesController extends CustomAppController 
```

其实这是插件的实现，你应该看看这里：

[http://book.cakephp.org/2.0/en/plugins.html](http://book.cakephp.org/2.0/en/plugins.html)

同样的事情发生在插件中，每个插件都有一个自定义的 PluginNameAppController ，所有插件控制器都将扩展它。

无论如何，看看插件可能会很有趣，因为项目中功能的明确分离。

# c# - C# - ExecuteNonQuery 需要一个开放且可用的连接。连接的当前状态为关闭

> ID：14291202
> 
> 赞同：7
> 
> 时间：2013-01-12T07:14:23.643
> 
> 标签：c#, .net, sql, ms-access

我是 C# 新手。请协助！

我一直遇到以下错误：“ExecuteNonQuery 需要一个打开且可用的连接。连接的当前状态已关闭。” 我也无法插入我的数据库。

下面是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;

namespace AzureSecureStore
{
    public partial class Client : Form
    {
        OleDbConnection vcon = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\SB18\Documents\Visual Studio 2010\Projects\AzureSecureStore\AzureSecureStore\AzcureSecureStore Database.accdb; Persist Security Info=False;");
        //OleDbConnection vcon = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\SB18\Documents\Visual Studio 2010\Projects\AzureSecureStore\AzureSecureStore\AzcureSecureStore Database.accdb");
        public Client()
        {
            InitializeComponent();

        }

        private void button1_Click(object sender, EventArgs e)
        {

        }

        private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {

        }

        private void button5_Click(object sender, EventArgs e)
        {

        }

        private void button4_Click(object sender, EventArgs e)
        {

        }

        private void Client_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'azcureSecureStore_DatabaseDataSet5.Client' table. You can move, or remove it, as needed.
            this.clientTableAdapter.Fill(this.azcureSecureStore_DatabaseDataSet5.Client);
            // TODO: This line of code loads data into the 'azcureSecureStore_DatabaseDataSet2.Client' table. You can move, or remove it, as needed.
            //this.clientTableAdapter.Fill(this.azcureSecureStore_DatabaseDataSet2.Client);

        }

        private void button2_Click(object sender, EventArgs e)
        {
            string ab = string.Format("insert into Client values({0}, '{1}', '{2}', {3}, {4}, '{5}')",
    textBox1.Text, textBox2.Text, int.Parse(textBox3.Text), int.Parse(textBox4.Text), textBox9.Text, int.Parse(textBox10.Text));
            OleDbCommand vcom = new OleDbCommand(ab, vcon);
            vcom.ExecuteNonQuery();
            MessageBox.Show("Data stored successfully");
            vcom.Dispose();
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T07:15:26.587

你忘了打开连接，

```
vcon.Open();
vcom.ExecuteNonQuery(); 
```

但记得使用

*   `using`声明——正确处理对象
*   `try-catch`块——正确捕获异常（*异常处理*）

**更新 1**

```
string connStr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\SB18\Documents\Visual Studio 2010\Projects\AzureSecureStore\AzureSecureStore\AzcureSecureStore Database.accdb; Persist Security Info=False;";
string query = "INSERT INTO Client VALUES(@col1,@col2,@col3,@col4,@col5,@col6)";
using (OleDbConnection conn = new OleDbConnection(connStr))
{
    using (OleDbCommand comm = new OleDbCommand())
    {
        comm.Connection = conn;
        comm.CommandText = query;
        comm.CommandType = CommandType.Text;
        comm.Parameters.AddWithValue("@col1", textBox1.Text);
        comm.Parameters.AddWithValue("@col2", textBox2.Text);
        comm.Parameters.AddWithValue("@col3", int.Parse(textBox3.Text));
        comm.Parameters.AddWithValue("@col4", int.Parse(textBox4.Text));
        comm.Parameters.AddWithValue("@col5", textBox9.Text);
        comm.Parameters.AddWithValue("@col6", int.Parse(textBox10.Text));
        try
        {
            conn.Open();
            comm.ExecuteNonQuery();
            MessageBox.Show("Data stored successfully");
        }
        catch(OleDbException e)
        {
            MessageBox.Show(e.ToString());
        }
    }
} 
```

*   [加值](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)
*   [添加（*推荐使用*）](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.add.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T07:17:20.913

要与数据库连接，您需要打开连接，因此请使用

```
vcon.Open(); 
```

接着

```
vcom.ExecuteNonQuery(); 
```

# android - 将 runOnUiThread 转换为 AsyncTask

> ID：14291215
> 
> 赞同：0
> 
> 时间：2013-01-12T07:16:20.007
> 
> 标签：android, multithreading, android-asynctask, autocompletetextview

我读到了一些我需要将我的 runOnUiThread 转换为 AsyncTask 的链接： [Android: RunOnUiThread vs AsyncTask](https://stackoverflow.com/questions/9296539/android-runonuithread-vs-asynctask)

但我无法完成它。我正在实现一个从数据库中获取查询的 AutoCompleteText。

我的 runOnUiThread 以及新线程（它编译）：

```
new Thread(new Runnable() {
        public void run() {
            final DataBaseHelper dbHelper = new DataBaseHelper(ActivityName.this);
            dbHelper.openDataBase();
            item_list = dbHelper.getAllItemNames();

            ActivityName.this.runOnUiThread(new Runnable() {

                public void run() {
                    ArrayAdapter<String> sAdapter = new ArrayAdapter<String>(
                            ActivityName.this,
                            android.R.layout.simple_dropdown_item_1line,
                            item_list);
                    itemNameAct = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextView_item_name);
                    itemNameAct.setAdapter(sAdapter);

                }
            });

        }
    }).start(); 
```

我将工作线程部分放在 doInBackground 中，将代码的 runOnUiThread 部分放在 onPostExecute 中，但它在启动时崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:05:39.427

这很尴尬。我问了一个问题并自己回答：/实际上我正在尝试 AsyncTask(Object, Void, Cursor) 但这对我没有任何好处。

这是正在工作的课程：

```
class autoComplete extends AsyncTask<Void, Void, Void> {
    final DataBaseHelper dbHelper = new DataBaseHelper(ActivityName.this);

    @Override
    protected Void doInBackground(Void... params) {

        dbHelper.openDataBase();
        item_list = dbHelper.getAllItemNames();
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        ArrayAdapter<String> sAdapter = new ArrayAdapter<String>(
                ClassName.this, android.R.layout.simple_dropdown_item_1line,
                item_list);
        itemNameAct= (AutoCompleteTextView) findViewById(R.id.autoCompleteTextView_item_name);
        itemNameAct.setAdapter(sAdapter);
    }

} 
```

然后在 onCreate 我将其初始化为：

```
new autoComplete().execute(); 
```

# javascript - 我可以在客户端脚本中使用 JavaScript 以外的语言吗？

> ID：14291220
> 
> 赞同：3
> 
> 时间：2013-01-12T07:17:47.953
> 
> 标签：javascript, html, ruby, coffeescript

我知道 IE 可以运行 VBScript 和 JScript，但我想要跨浏览器使用 JavaScript 以外的其他语言的东西，所以我写了这个：

```
 <script src='bla.rb' type='text/ruby'></script>
 <script src='bla.coffee' type='text/coffescript'></script>
 <script src='bla.ics' type='text/icedcoffescript'></script> 
```

它会正常运行。如何使这些标签起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:29:15.967

[如果您使用Emscripten](https://github.com/kripken/emscripten)将 CPython 编译为 JavaScript，则可以使用 Python 。也许你可以用 Ruby 做同样的事情。

除了 Emscripten，还有一些语言可以编译为 JavaScript，例如[CoffeeScript](http://coffeescript.org/)和[Fay](http://fay-lang.org/)。当然，你也可以用 JavaScript 编写你自己的 VM，并为你最喜欢的语言编写一个编译器，以该 VM 为目标。

最后，浏览器本身只能解释 JavaScript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T07:38:27.913

鲁比：[也许吧？](http://www.ironruby.net/browser/)不知道这个项目有多远，但它确实存在。

(Iced)CoffeeScript：[是的。](https://stackoverflow.com/questions/5170473/is-there-a-way-to-send-coffeescript-to-the-clients-browser-and-have-it-compiled)但是您必须加载一个额外的 JavaScript 文件作为 CoffeeScript 编译器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T07:25:28.387

不，您不能依赖大多数浏览器中存在的任何其他语言。您可能会要求用户安装新的语言或插件，但 JavaScript 是唯一的“通用”客户端脚本语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-13T20:53:09.617

有许多[语言可以编译成 JavaScript](https://github.com/jashkenas/coffeescript/wiki/list-of-languages-that-compile-to-js)，包括 C、C++、Python、PHP 等。

JavaScript 中还有其他语言的虚拟机实现，包括用于 JVM 语言的[DoppioJVM](http://plasma-umass.org/doppio-demo/)和用于 .NET 编程语言的[JSIL 。](http://jsil.org/)

# android - 从动态创建的编辑文本中检索值和显示

> ID：14291225
> 
> 赞同：0
> 
> 时间：2013-01-12T07:18:27.353
> 
> 标签：android

我有一个按钮，当我点击它时，它会在我输入一个值时显示edittext，但我无法显示输入的值来显示我使用过textview的值，但我无法显示。

```
class DynamicbuttonActivity extends Activity {

    TextView view= new TextView(getApplicationContext());

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ScrollView scrl=new ScrollView(this);

        final LinearLayout ll=new LinearLayout(this);
        ll.setOrientation(LinearLayout.VERTICAL);
        scrl.addView(ll);

        Button add_btn=new Button(this);
        add_btn.setText("Click to add EditTexts");
        ll.addView(add_btn);

        Button add_btn1=new Button(this);
        add_btn1.setText("Click to view TextViiews");
        ll.addView(add_btn1);

        add_btn.setOnClickListener(new OnClickListener() {
            public void onClick(View v)  { 
                EditText et=new EditText(getApplicationContext());
                ll.addView(et);
            }
        });

        add_btn1.setOnClickListener(new OnClickListener()  {    
            String strg;
            public void onClick(View v)  {
                strg = et.getText().toString();
                view.setText(strg);
                ll.addView(view);    
            }
        });

        this.setContentView(scrl);
    }  
} 
```

你能帮我么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:32:14.140

您的实施方式错误。在按钮上首先单击它会添加`EditText`，但这是您在`onclick`方法中定义的，因此您不会进入另一个`onclick`方法，其范围仅适用于第一个`onclick`方法

每次单击第一个按钮时，第二件事都会在您的布局中添加 EditText。我不明白你对这段代码的定义。我的定义是当用户输入文本`edittext`并单击要显示的值的按钮时，`TextView`只需删除第一个按钮并定义您的`EditText`外部`onclick`方法，如您的声明`TextView`

```
public class DynamicbuttonActivity extends Activity {

    TextView view= new TextView(getApplicationContext());
    EditText et=new EditText(getApplicationContext());

    public void onCreate(Bundle savedInstanceState){

        super.onCreate(savedInstanceState);

        ScrollView scrl=new ScrollView(this);

        final LinearLayout ll=new LinearLayout(this);
        ll.setOrientation(LinearLayout.VERTICAL);
        scrl.addView(ll);

        /*Button add_btn=new Button(this);
        add_btn.setText("Click to add EditTexts");
        ll.addView(add_btn);*/
        Button add_btn1=new Button(this);
        add_btn1.setText("Click to view TextViiews");
        ll.addView(add_btn1);
        /*add_btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v){ 
            }

        });*/

        add_btn1.setOnClickListener(new OnClickListener() { 
            String strg;
            public void onClick(View v){
                strg = et.getText().toString();
                view.setText(strg);
            }

        });
        ll.addView(et);
        ll.addView(view);
        this.setContentView(scrl);

    }

} 
```

# cuda - 关于 CUDA 部分和代码 threadIdx.x、blockDim.x 和 a 2 的混淆

> ID：14291233
> 
> 赞同：0
> 
> 时间：2013-01-12T07:19:57.673
> 
> 标签：cuda, sum, nvidia

有人可以帮我理解以下CUDA-C的部分并行求和算法实现吗？我很难理解共享`partialSum`数组的初始填充 [第 3 到 8 行]。我已经追踪了几个小时，但我不明白为什么应该从下面的代码开始而`2*blockIdx.x*blockDim.x;`不是`blockIdx.x*blockDim.x;`？

主机代码：

```
numOutputElements = numInputElements / (BLOCK_SIZE<<1);
 if (numInputElements % (BLOCK_SIZE<<1)) {
     numOutputElements++;
 }
#define BLOCK_SIZE 512
dim3 dimGrid(numOutputElements, 1, 1);
dim3 dimBlock(BLOCK_SIZE, 1, 1);
total<<<dimGrid, dimBlock>>>(deviceInput, deviceOutput, numInputElements); 
```

内核代码：

```
1    __global__ void total(float * input, float * output, int len) {
2    
3    __shared__ float partialSum[2*BLOCK_SIZE];
4      
5      unsigned int t = threadIdx.x;
6      unsigned int start = 2*blockIdx.x*blockDim.x;
7      partialSum[t] = input[start + t];
8      partialSum[blockDim.x + t] = input[start + blockDim.x + t];
9     
10    for (unsigned int stride = blockDim.x; stride >=1; stride >>=1)
11      {
12       __syncthreads();
13        
14       if (t < stride)
15         partialSum[t] += partialSum[t + stride];
16      }
17      output[blockIdx.x] = partialSum[0];   
18  } 
```

假设我有 10 个元素要求和，我选择将块大小设为 4，每个块有 4 个线程，所以将有 3 个块在使用，对吧？[让我们暂时忘记经线大小和其他事情]

当 blockIdx.x 为 2 （具有 2 个元素的最后一个块）时，开始变为 (2*2*4=)16 并且大于 10 并且超过`input`长度（因此`partialSum[t]`和`partialSum[blockDim.x + t]`都将保持不变并且`block2`'s共享内存将保持为空。）如果是这样，那么我数组的最后 2 个元素将丢失！

这让我觉得我得到了 blockIdx.x, blockDim.x 错误的方式。有人可以纠正我吗？请！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T07:38:25.840

你只会启动一半的块，每个块做两倍的工作。这样做的好处是存储部分和所需的暂存空间减少了一半（因为您只启动了一半的块）。

进行减少（在这种情况下为总和）的*通常*方法是做这样的事情。

```
1    __global__ void total(float * input, float * output, int len) {
2    
3    __shared__ float partialSum[BLOCK_SIZE];
4      
5     unsigned int t = threadIdx.x;
6     unsigned int start = blockIdx.x*blockDim.x;
7     partialSum[t] = 0;
8     for (int T = start; T < len; T += blockDim.x * gridDim.x) 
9        partialSum[t] += input[T];
10    for (unsigned int stride = blockDim.x/2; stride >=1; stride >>=1)
11      {
12       __syncthreads();
13        
14       if (t < stride)
15         partialSum[t] += partialSum[t + stride];
16      }
17      output[blockIdx.x] = partialSum[0];   
18  } 
```

所以如果你有`len = 1024`, 和`BLOCK_SIZE = 256`，你可以启动任何 <= 4 块。

让我们看看当你启动不同数量的块时，第 8 行和第 9 行中包含的 for 循环会发生什么。还要记住输出需要有元素的数量==块的数量。

*   `Blocks == 4`意味着，`blockDim.x * gridDim.x`= 256 x 4 = 1024，所以它只会迭代一次。对输出的非合并写入次数 = 4。
*   `Blocks == 2`意思是，`blockDim.x * gridDim.x`= 256 x 2 = 512，所以它会迭代两次。对输出的非合并写入次数 = 2。
*   `Blocks == 1`意思是，`blockDim.x * gridDim.x`= 256 x 1 = 256，所以它会迭代 4 次。对输出的非合并写入次数 = 1。

因此，启动更少的块有利于减少内存占用并减少全局写入。然而，它降低了并行性。

理想情况下，您需要启发式地找到最适合您的算法的组合。或者你可以使用现有的库来为你做这件事。

有问题的内核选择启动一半的块以获得一些性能改进。但是可能不需要使用两倍的共享内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T12:26:51.803

您可能在计算积木时遇到问题。

假设您有 10 个元素要求和，并且您选择将块大小设为 4，并且每个块有 4 个线程，那么将只有**两个**块在使用中。

根据您的内核代码，由于每个线程负责全局设备内存中的**两个元素。**

每个线程读取的输入元素如下所示。我没有在您的代码中看到任何范围检查。所以我假设你的 10 个元素有足够的零填充。

```
blockIdx.x           : 0 0 0 0  1 1 1 1  2 2 2 2  3 3 3 3
threadIdx.x          : 0 1 2 3  0 1 2 3  0 1 2 3  0 1 2 3
linear thread id     : 0 1 2 3  4 5 6 7  8 9 a b  c d e f

Idx of the element     0 1 2 3  8 9
read by the thread   : 4 5 6 7 
```

所以`output[0]`存储 elmemnt 0~7`output[1]`的总和，存储元素 8~9 的总和。我不认为有什么损失。

请参阅[优化 CUDA 中的并行减少中](http://developer.download.nvidia.com/compute/cuda/1.1-Beta/x86_website/projects/reduction/doc/reduction.pdf)的内核 4，以了解有关为什么存在`2*`. **@Pavan**在他的回答中给出的较慢的内核 3 和内核是类似的实现，其中每个线程只负责一个元素。

# android - 连接到 MySQL 服务器时，Android 应用程序强制关闭？

> ID：14291238
> 
> 赞同：0
> 
> 时间：2013-01-12T07:21:24.580
> 
> 标签：android, json, xmlhttprequest

我有一个非常简单的 android 应用程序并将其导出到我的 android 手机，现在它在启动时完美运行，但是当我单击将通过 WiFi 并使用 HTTPPOST 和 JSON 连接到笔记本电脑上的 MySQL 服务器的两个按钮之一时（我已经启动并运行了 WAMP 服务器，并且还编辑了我的 MySQL 服务器上的所有用户以拥有所有权限），它强制关闭。

任何想法为什么？

我已将访问 php 文件的 URL 设置为“http://localhost/exampleSite/example.php”。此外，如果您要询问我的 Windows 防火墙，我尝试在禁用防火墙的情况下运行该应用程序，因为我似乎看不到任何允许“端口”连接的选项。

我遵循了本教程：[http ://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

除了用于 HTTPPOST/HTTPREQUEST 的 URL 之外，每一块 coed 都和我的一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:10:32.273

如果您正在使用模拟器，请尝试使用 IP 地址 10.0.2.2 而不是 127.0.0.1 访问您的 WAMP 服务器（即本地主机）

所以你的 URL 看起来像

10.0.2.2/yourphpscript.php

* * *

根据您的评论，您正在通过 USB 在您的实际设备上进行测试。而不是使用 localhost 连接它

URL 应该是 192.168.0.75:8080/exampleSite/example.php（192.168.0.75 只是一个例子）

通过在手机的网络浏览器上输入笔记本电脑的 IP 地址和 WAMP 端口号，测试您当前的网络环境是否允许您的手机与笔记本电脑建立 HTTP 连接。-- 所以在 android webbrowser URL 栏中输入 ie 192.168.0.5:8080

如果这会将您带到您的 WAMP 服务器目录，那么您的服务器设置没有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:37:17.070

使用您的计算机IP地址更改url并通过您的计算机互联网连接您的手机。

```
http://localhost/exampleSite/example.php"
Ip address instead of localhost 
```

# android - Android TabContent 更改

> ID：14291242
> 
> 赞同：2
> 
> 时间：2013-01-12T07:21:51.673
> 
> 标签：android, tabs, tabwidget

![布局](../Images/1c3458f71d32b72691ee63b9014fa2ae.png)

你好，

在下图中，我有我的应用程序的布局。我在底部的标签主机中有一个标签小部件（绿色）。我在中间有标签内容（粉红色）。

我在标签主机中有 3 个不同的标签，但是右上角有 2 个按钮（蓝色）。我想单击顶部的按钮并更改选项卡内容。

这可能吗？

在常规选项卡上单击我让每个选项卡打开不同的活动。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T07:36:26.090

采用`yourTabHost.setCurrenttab(INDEX YOU WANT TO SET)`

# ajax - iOS Safari Mobile 中的 HTML5 文件上传挂起

> ID：14291243
> 
> 赞同：1
> 
> 时间：2013-01-12T07:22:01.847
> 
> 标签：ajax, html, file-upload, mobile-safari

我有一个基本的 HTML5 文件上传脚本，使用`$.ajax()`（我也尝试过使用 vanilla `xhr`）将图像上传到 imgur.com。它在桌面上运行良好，并在 iOS Safari 上正常上传，但在 iOS Safari 上，它在完成上传时似乎“挂起”——手机顶部的加载指示器继续无限期地旋转。知道可能是什么原因造成的吗？

[http://jsfiddle.net/AFLNe/](http://jsfiddle.net/AFLNe/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:33:21.013

您可能希望在响应中添加错误处理以检查是否有任何错误被传回：

```
 ..
    ,success: function(response) {
            console.log("Success", response);
            $("body").append("<a href=\"" + response.data.link + "\" target=\"_blank\">" + response.data.link + "</a><br>");
        }
     ,error: function (XMLHttpRequest, textStatus, errorThrown) {
        console.log("Status:"+ textStatus +","+ errorThrown);
    }
    });
}); 
```

# iphone - 使用 AppDelegate 使变量可用于整个应用程序

> ID：14291244
> 
> 赞同：4
> 
> 时间：2013-01-12T07:22:01.773
> 
> 标签：iphone, ios, objective-c, c, xcode

我对使用应用程序委托使变量能够在我的应用程序中的任何位置设置和使用的概念感到非常困惑。这是我的代码：

应用代理.h

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    NSMutableString *globalUsername;
}
@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, retain) NSMutableString *globalUsername; 
```

appdelegate.m

```
@synthesize globalUsername; 
```

和另一个视图场景（称为“Forum.h”，我试图在其中设置值）

```
AppDelegate *appDelegate = (MyAppDelegate *)[[[UIApplication sharedApplication] delegate]];
[appDelegate globalUsername appendString; 
```

最后一行当然是不完整的，但是 xcode 会自动获取 globalUsername 变量，我只是无法调用“appendString”函数来实际更改它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T15:27:48.390

呃，如果你想存储用户名，为什么不直接使用 NSUserDefaults 呢？

```
// set the username
[[NSUserDefaults standardUserDefaults] setValue:@"johnsmith" forKey:@"username"];
[[NSUserDefaults standardUserDefaults] synchronize];

// retrieve the user name
NSString *username = [[NSUserDefaults standardUserDefaults] valueForKey:@"username"]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-12T07:27:36.963

您缺少一组 []，它们实际上是两个语句合二为一。首先在 appDelegate 上调用 globalUsername 方法，然后发送消息 appendString（缺少参数）

所以这应该看起来像这样：

```
[[appDelegate globalUsername] appendString:@"foobar"]; 
```

但是对于一个游戏，你不应该像这样滥用应用委托。相反，我建议如果你想要一个全球性的地方来存储游戏状态，你应该考虑拥有一个单例，就像我在这里描述的那样：http: [//www.cocoanetics.com/2009/05/the-death-of-global-variables /](http://www.cocoanetics.com/2009/05/the-death-of-global-variables/)

PS：由于几个原因，您可能不想在那里使用可变字符串。最好让属性/ivar 成为一个普通的 NSString，然后设置它。我看不出有什么好的理由要在用户名上附加字符。即使 NSString 是不可变的，您也可以简单地将它们替换为其他字符串。

```
[[appDelegate setGlobalUsername:@"foobar"]; 
```

或具有相同效果：

```
appDelegate.globalUsername = @"foobar"; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-12T07:26:03.147

如果它是 NSMutableString，那么你在 'Delegate' 类中有 alloc - init。

因为如果它是可变对象，那么你必须分配和初始化。

首先，在 Delegate.m 类中

```
globalUserName = [[NSMutableString alloc] init]; 
```

然后，

在 ViewController 中，您可以使用，

```
appDelegate.globalUsername appendString ....(What you want) 
```

谢谢。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-12T09:34:22.517

我认为您已经混淆了委托与其视图控制器之间的关系。AppDelegate 在您启动应用程序时创建。您无需在 Forum.h 中创建 AppDelegate，而是在 AppDelegate 中创建 ViewController、Forum。大括号中的 *globalUserName 也是不必要的。

所以 AppDelegate.h 会这样写：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, retain) NSMutableString *globalUsername;
@property (nonatomic, retain) Forum *forum; 
```

此外，在当前版本的 Xcode 和 Objective-C 中，也不需要综合。它会自动设置和初始化。在 AppDelegate.m 中，您可以使用以下命令引用 *globalUsername：

```
self.globalUsername 
```

您的 AppDelegate.m 还应在 applicationDidLaunch 中包含以下内容：

```
[[self.forum alloc] init];  //Allocate and initialize the forum ViewController
self.forum.delegate = self; //Set the forum ViewController's delegate variable to be the AppDelegate itself 
```

但是 Forum ViewController 目前没有一个名为 delegate 的变量，所以我们必须创建它。所以在 Forum.h 你应该添加：

```
@property (nonatomic) id delegate; 
```

所以现在在 Forum.m 中，由于 AppDelegate.m 负责设置委托，我们现在可以使用论坛的委托变量引用 AppDelegate 中的数据。

所以最后，为了从 Forum.m 访问 globalUsername，我们可以使用 self.delegate.globalUsername。因此，要附加到来自 Forum.m 的字符串，我们可以使用：

```
[self.delegate.globalUsername appendString:myNewString]; 
```

其中“myNewString”是要添加到 globalUsername 的字符串。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T07:29:28.247

`@interface AppDelegate : UIResponder <UIApplicationDelegate> { NSMutableString *globalUsername; }`

这不会创建全局变量。事实上，它是 AppDelegate 类的受保护成员。

从您无法访问的所有课程中。您需要创建 AppDelegate 的另一个实例，然后您将明智地使用该 ivar。

全局一词是指您在所有类中的应用程序中都将具有相同的价值。而且您不需要每次都分配+初始化。

对于全局变量，您需要创建一个静态变量。共享课程/单身课程将为您工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T07:26:14.297

我想你忘记了`alloc`。只需`alloc`在`application did finish launching`方法中使用一次。

# android - 使用动作发送从 android 应用程序共享图像，这是行不通的 :(

> ID：14291246
> 
> 赞同：3
> 
> 时间：2013-01-12T07:22:15.560
> 
> 标签：android, facebook

我用

```
Intent sharingIntent = new Intent(Intent.ACTION_SEND);

Uri screenshotUri = Uri.parse("file//res/drawable/u.png");

sharingIntent.setType("image/png");

sharingIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);

startActivity(Intent.createChooser(sharingIntent, "Share image using")); 
```

//我将 sumsung real 用于设备。我选择在 facebook 上分享。//但是内容是空的，不是我要共享的图像，我无法共享图像。

这是意图操作发送不使用 facebook sdk。你能帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T07:28:39.303

您将使用这种方式访问​​ Drawable 文件夹的错误方式。

```
Uri imageUri = Uri.parse("android.resource://your.package/drawable/fileName"); 
```

**你应该这样尝试：**

```
 Uri imageUri = Uri.parse("android.resource://your.package/drawable/fileName");
      Intent intent = new Intent(Intent.ACTION_SEND);
      intent.setType("image/png");

      intent.putExtra(Intent.EXTRA_STREAM, imageUri);
      startActivity(Intent.createChooser(intent , "Share")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T07:33:06.730

试试这种方式：

> ```
>  Uri pngUri = Uri.parse("file//res/drawable/u.png");
>  Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
>  shareIntent.setType("image/png");
>  shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"YOUR TEXT HERE");
>  shareIntent.putExtra(android.content.Intent.EXTRA_TEXT,"YOUR TEXT HERE");
>  shareIntent.putExtra(android.content.Intent.EXTRA_STREAM,pngUri);
>  PackageManager pm = getApplicationContext().getPackageManager();
>  List<ResolveInfo> activityList = pm.queryIntentActivities(shareIntent, 0);
> for (final ResolveInfo app : activityList) {
>     if ((app.activityInfo.name).contains("facebook")) {
>         final ActivityInfo activity = app.activityInfo;
>         final ComponentName name = new ComponentName(
>                     activity.applicationInfo.packageName,
>                     activity.name);
>         shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
>         shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
>                             | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
>         shareIntent.setComponent(name);
>         startActivity(shareIntent);
>             }
>         }
>     } 
> ```

这对我来说可以 。我相信它也对你有用。

# actionscript-2 - 添加Flash ActionScript 2.0

> ID：14291247
> 
> 赞同：0
> 
> 时间：2013-01-12T07:22:19.160
> 
> 标签：actionscript-2, addition

我有一个动态文本，变量名称和实例名称为“total”。我需要它来显示每个点击按钮的总价格。

我在按钮中有这个代码：

```
var vaseprice = 400;
total = price + vaseprice; 
```

价格是框架上的一个变量。我的问题是它不显示总价。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:43:37.887

试试看`_root.total = _root.price + _root.vaseprice`是否可行

# java - 为什么 int 1 的最小值比正值更远离零？

> ID：14291248
> 
> 赞同：7
> 
> 时间：2013-01-12T07:22:24.187
> 
> 标签：java, c++, c, math, numbers

我想知道为什么 int、double 等负值比正值多 1 个。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-12T07:25:47.583

简而言之：0 必须适合某个地方，它在正数中，这使得它们比负数少 1。

示例：5 个槽用于负片，5 个槽用于正片，负片得到 -1 到 -5，正片得到 0 到 4

*   不要忘记阅读@chris 链接 :)

正如@WhozCraig 指出的那样，这仅对使用二进制补码表示的有符号二进制数的体系结构有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T22:54:03.493

假设您有一个使用 4 位的整数数据类型。您可以用它们表示 16 个可能的有符号整数。正整数值分配给范围的前半部分：

```
0000b = 0
0001b = 1
0010b = 2
0011b = 3
0100b = 4
0101b = 5
0110b = 6
0111b = 7 
```

下半场，有两种选择：

1.  将 8 个位置映射到整数**`-1`**和**`-7`**特殊值**`-0`**。这由数字**的补码**和**符号和大小**表示使用。
2.  将 8 个位置映射到整数**`-1`**到**`-8`**. 大多数程序员都熟悉（以及您正在谈论的那个）[**的二进制补码表示**](http://en.wikipedia.org/wiki/Two%27s_complement)使用它。

* * *

负数映射如下：

```
1000b = -8
1001b = -7
1010b = -6
1011b = -5
1100b = -4
1101b = -3
1110b = -2
1111b = -1 
```

虽然这可能没有意义，但这种映射使执行算术运算变得容易。

* * *

这不适用于花车；它们的表示方式不同。大多数浮点表示在 +0/-0 的任一侧具有相等的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:33:43.847

对于 C 语言，不能保证您将在具有二进制补码算术硬件的机器上运行（负数比正数多）。实际上，它可能会是这样。

# java - 从 windows 上的 php pclose_popen(exec) 获取 pid

> ID：14291249
> 
> 赞同：0
> 
> 时间：2013-01-12T07:22:25.793
> 
> 标签：java, php, windows, cmd

我有脚本
`pclose(popen("D: & cd D:\server\LoginServer & start /b startLoginServer.bat", "r"));`
`startloginserver.bat`启动java进程，我需要在需要时获取它的pid来杀死它。我对这些东西很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:26:30.643

在 cmd 中执行此操作有一个命令.. 将使用**pid**`tasklist`列出进程，然后键入. 注意：pid 是列出的进程 id **`taskkill /PID pid /F`**

# android - 从 SQLite 将字符串数组转换为整数数组

> ID：14291252
> 
> 赞同：2
> 
> 时间：2013-01-12T07:22:51.363
> 
> 标签：android, sqlite, type-conversion

朋友们，我创建了一个整数数组 qlist[]，它有一些元素。现在我已经将这个整数数组以字符串的形式插入到数据库中

```
Arrays.toString(qlist) 
```

现在，当我将来再次从 db 取回它时，我想将该字符串转换为整数数组.. 例如。

```
int[] qlist={13,4,12}; 
```

在数据库中它看起来像

```
[13,4,12] 
```

作为一个字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T07:29:52.207

首先将您的字符串保存在字符串变量中。您需要删除 [] 括号，然后用逗号（，）分割您的字符串。

那么您将拥有一个仅包含 1,2,3 个值的字符串数组。您可以通过其位置轻松地将它们转换为整数。在这里，我已经给出了它的代码。希望它会有所帮助。

```
String arr = "[1,2]";
 String[] items = arr.replaceAll("\\[", "").replaceAll("\\]", "").split(",");

 int[] results = new int[items.length];

for (int i = 0; i < items.length; i++) {
    try {
       results[i] = Integer.parseInt(items[i]);
    } catch (NumberFormatException nfe) {};
 } 
```

# sql-server - LINQ TO SQL 查询将 csv 字段与另一个表字段匹配

> ID：14291254
> 
> 赞同：0
> 
> 时间：2013-01-12T07:23:40.007
> 
> 标签：sql-server, linq, linq-to-sql

我有下表

```
**MemberMst**
MemberID Name      Hobbies
1        Ronak     1,3,4
2        Kapil     2,4

**HobbiesMst**
HobbyId   Title
1         Computer Game
2         Cricket
3         Skating
4         Basket Ball 
```

Member master 中的 Hobbies 是来自 HobbiesMst 的值。现在我想要来自 HobbiesMst 的成员的爱好。使用 linq 查询。我尝试拆分、包含、SelectMany 但无法编译。

所以我很困惑如何在这种情况下做多对多关系。

```
i want below output.
==============================================
MemberId Name     Title
1        Ronak    Computer Game
1        Ronak    Skating
1        Ronak    Basket Ball
2        Kapil    Cricket
2        Kapil    Basket Ball 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:36:22.100

您听起来好像在正确的轨道上，以下应该编译...

```
var query = MemberMst.SelectMany(
                mem => HobbyMst.Where(hob => mem.Contains(hob.HobbyId)),
                (mem,hob) => new 
                {
                 MemberId = mem.MemberId, 
                 Name = mem.Name, 
                 Title = hob.Title
                }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:06:11.923

如果您想在两个表之间建立多对多关系，您应该创建第三个表来处理该关系。在您的情况下，架构应该是这样的：

```
 MemberMst                 Member_Hobbie                 HobbiesMst
MemberId   Name           Id   MemberId   HobbiId         HobbyId   Title 
```

Member_Hobbies 表中的每条记录都显示了特定成员的特定爱好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T12:30:03.807

你可以试试这个。

```
var result = from record in 
                (
                    from transform in MemberMst.AsEnumerable( )
                    select new
                    {
                        MemberId = transform.MemberId,
                        Name = transform.Name,
                        Hobbies = transform.Hobbies
                                           .Split( new[] { "," }, StringSplitOptions.RemoveEmptyEntries )
                                           .Select( item => Convert.ToInt32( item ) )
                                           .ToList( )

                    }
                )
             from hobby in HobbiesMst
             where record.Hobbies.Contains( hobby.HobbyId )
             select new 
             {
                record.MemberId,
                record.Name,
                hobby.Title
             }; 
```

可悲的是，我不确定这是否有效。但是您可以尝试在客户端而不是 sql-server 上转换您的 csv 字段。

内部查询将首先执行并将表中的**每条**记录加载到您的客户端。然后它会尝试将您的 csv 字段转换为一个`List<int>`值（当数据无法转换时，它甚至会引发异常）。然后它对`HobbiesMst`表执行连接。总而言之不是一个很好的解决方案。

我会推荐一个多对多关系表（比如 Karamafrooz）。

# mysql - MySQL REGEXP 不匹配字符串

> ID：14291257
> 
> 赞同：0
> 
> 时间：2013-01-12T07:24:05.610
> 
> 标签：mysql, regex, mysqli

我正在做一个 MySQL 查询，我需要匹配一个长字符串中的两个字符串，但无法让它工作。这是我尝试过的。

```
SELECT * FROM mytable WHERE (mycol REGEXP '/~20\|2~/' AND mycol REGEXP '/~14\|1~/') 
```

这是字符串的样子

```
~20|2~14|1~15|1~16|1~1|1397|1|0:0:0:0||~17|1~18|1~ 
```

我想选择包含这两个子字符串的所有行

```
~20|2~ AND ~14|1~ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:31:14.857

请检查一下，这只是选择包含两个字符串的行。

*   ## 编辑：

**您原来的正则表达式不起作用的原因是：**

[`Because MySQL uses the C escape syntax in strings (for example, “\n” to represent the newline character), you must double any “\” that you use in your REGEXP strings.`](http://dev.mysql.com/doc/refman/5.0/en/regexp.html)

*   [SQLFIDDLE 演示2](http://sqlfiddle.com/#!2/f933f/9)

询问：

```
SELECT * FROM vendor 
WHERE (vname REGEXP '~20\\|2~' 
AND vname REGEXP '~14\\|1~')
; 
```

* * *

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/f933f/2)

查询：请注意，我使用的表/样本数据与您的不同。但是复制了您的数据行并进行了一些更改以触发正确的`regex`.

样本数据：

```
| VID |                                              VNAME |
------------------------------------------------------------
|   1 | ~20|2~14|1~15|1~16|1~1|1397|1|0:0:0:0||~17|1~18|1~ |
|   2 |               ~20|2~14|1397|1|0:0:0:0||~17|1~18|1~ |
|   3 | ~20|2~14|1~15|1~16|1~1|1397|1|0:0:0:0||~17|1~18|1~ |
|   4 |       ~20|2~1|1~16|1~1|1397|1|0:0:0:0||~17|1~18|1~ | 
```

询问：

```
SELECT * FROM vendor 
WHERE (vname REGEXP '~20\[|]2~' 
AND vname REGEXP '~14\[|]1~')
; 
```

结果：

```
| VID |                                              VNAME |
------------------------------------------------------------
|   1 | ~20|2~14|1~15|1~16|1~1|1397|1|0:0:0:0||~17|1~18|1~ |
|   3 | ~20|2~14|1~15|1~16|1~1|1397|1|0:0:0:0||~17|1~18|1~ | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:28:01.197

你试过这个吗？

`SELECT * FROM mytable WHERE (mycol REGEXP '~20\|2~' AND mycol REGEXP '~14\|1~')`

[SQL小提琴](http://sqlfiddle.com/#!2/51340/2)

# python - 将值传递给 web2py 的 HTML 表单

> ID：14291258
> 
> 赞同：2
> 
> 时间：2013-01-12T07:24:12.117
> 
> 标签：python, web2py

我目前正在处理一个页面，用户将在搜索表单（html）中选择所有适当的字段，然后将值传递给 web2py 查询。

我在编写此查询时遇到问题？我想知道如何将 HTML 表单中的值实际传递给 web2py 查询以针对数据库运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:42:55.373

当您向 web2py 提交表单（通过 GET 或 POST）时，所有表单变量都将可用`request.vars`（有关此内容的更多信息，请参阅关于[调度](http://web2py.com/books/default/chapter/29/04#Dispatching)和[`request`对象](http://web2py.com/books/default/chapter/29/04#request)的书籍部分以及关于[表单](http://web2py.com/books/default/chapter/29/07)的章节）。

因此，您可以执行以下操作：

```
def search():
    rows = None
    if request.vars:
        query = reduce(lambda a, b: (a & b),
            (db.mytable[var] == request.vars[var] for var in request.vars))
        rows = db(query).select()
    return dict(rows=rows) 
```

注意，`reduce()`带有生成器表达式的 等同于编写这样的查询：

```
(db.mytable.field1 == request.vars.field1) & \
(db.mytable.field2 == request.vars.field2) & \
...
(db.mytable.fieldN == request.vars.fieldN) 
```

# emacs - Emacs 的 Viper、Vimpulse 和 Evil 之间的区别？

> ID：14291260
> 
> 赞同：48
> 
> 时间：2013-01-12T07:24:23.153
> 
> 标签：emacs, viper-mode, vimpulse, evil-mode

在使用 Vim 很长时间后，我最近开始使用 Emacs（就像其他许多其他人一样），我个人认为 Vim 移动键和文本对象是编辑器可以拥有的最好的东西之一。我听说过使用不同的插件在 Emacs 中模拟这些功能，但是在互联网上阅读了更多内容后，我很困惑。

我特别遇到了三种模式：**Viper**、**Vimpulse**和**Evil**。有人可以帮助我了解如何使用这些模式来实现近乎完美的 Vim 仿真吗？我需要安装所有三个吗？它们之间有什么区别？谢谢。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-12T13:56:07.307

简单的说：

*   **Viper**：Emacs 提供的基本 Vi 仿真模式；内置并与 Emacs 捆绑在一起
*   **Vimpulse**：添加到 Viper 模式，但提供视觉选择和文本对象等高级功能
*   **Evil**：一种全新的 Emacs Vim 仿真模式，据说是 Viper 和 Vimpulse 模式的继承者。据说这种模式比上述两种模式都要好得多，用户报告说面临的问题较少。建议往前走。

可以在[此处](http://emacswiki.org/emacs/Evil)找到安装 Evil 的说明。祝你好运！

# ios - iOS 中的社交分享 SDK

> ID：14291262
> 
> 赞同：3
> 
> 时间：2013-01-12T07:24:36.467
> 
> 标签：ios, ios6, social

是否有任何适用于 iOS 的社交共享 sdk 或库，包括 twitter、Facebook、linkedIn 和 Google+。

我检查了 ShareKit，但它只包括 twitter 和 Facebook 服务，而不包括linkedIn 和 Google+。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:27:09.450

iOS 6 现在包括 Facebook 和 Twitter，它们是主要的两个。

所有其他都需要手动完成（我很确定 Google+ 还没有！）。

然后，您可以扩展 UIActivity 类以与 Facebook 和 Twitter 共享一起创建它们。

# yii - 使用 yii 进行语言翻译

> ID：14291264
> 
> 赞同：0
> 
> 时间：2013-01-12T07:25:00.767
> 
> 标签：yii, yii-components

我正在研究 yii 项目的国际化，我指的是 url [Multilingual](http://www.yiiframework.com/wiki/294/seo-conform-multilingual-urls-language-selector-widget-i18n/)我在用户页面上正确获取了小部件，但是当我点击任何链接时，我得到错误`404 not found`，这是所有 url 的问题` s。在这种情况下我该怎么办

# javascript - 如何在引导类型头中进行 ajax 调用

> ID：14291266
> 
> 赞同：0
> 
> 时间：2013-01-12T07:25:24.583
> 
> 标签：javascript, jquery, bootstrap-typeahead

这是我的 jquery 代码，用于从本地源设置引导类型头

```
 $(function () {

    var src = [{ id: 1, name: 'Toronto', state: 'ON', country: 'Canada', key: 12345 },
                    { id: 2, name: 'Montreal', state: 'QC', country: 'Canada', key: 23456 },
                    { id: 3, name: 'New York', state: 'NY', country: 'USA', key: 34567 },
                    { id: 4, name: 'Buffalo', state: 'NY', country: 'USA', key: 45678 },
                    { id: 5, name: 'Boston', state: 'MA', country: 'USA', key: 56789 },
                    { id: 6, name: 'Columbus', state: 'OH', country: 'USA', key: 67890 },
                    { id: 7, name: 'Dallas', state: 'TX', country: 'USA', key: 78901 },
                    { id: 8, name: 'Vancouver', state: 'BC', country: 'Canada', key: 89102 },
                    { id: 9, name: 'Seattle', state: 'WA', country: 'USA', key: 90123 },
                    { id: 10, name: 'Los Angeles', state: 'CA', country: 'USA', key: 11234}];

    localStorage.setItem("cities", JSON.stringify(src));

    $('#search').typeahead({
        sources: [
        { name: "local", type: "localStorage", key: "cities" }
      ]
    });

}); 
```

它工作正常。如何从服务器进行 ajax 调用并将如上所示的类似数据与源连接。

***`update`：*** 这是 jsfiddle 上的上述工作代码`http://jsfiddle.net/MMarW/`

这是 jsfiddle 上没有触发的 ajax 代码`http://jsfiddle.net/FZP8a/3/`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:44:57.143

提供函数作为源：

```
$('#search').typeahead({
  source: function(query, process) {
    var searchUrl = YOUR_URL + '?q=' + encodeURIComponent(query);

    $.get(searchUrl)
    .success(function(data){
      //... do whatever you want...
      // ... and pass array to process function
      process(dataArray);
    })
    .error(function(){
      //...handle error
    });
  }
}); 
```

您也可以直接从源函数返回 dataArray。选项下的[文档](http://twitter.github.com/bootstrap/javascript.html#typeahead)中的更多信息。

编辑：要请求 jsonp，请使用 jQuery.ajax：

```
$('#search').typeahead({
  source: function(query, process) {
    var searchUrl = YOUR_URL + '?q=' + encodeURIComponent(query);

    $.ajax(searchUrl, {
       dataType: 'jsonp',
       crossDomain: true // probably needed
    }).success(function(data){
      //... do whatever you want...
      // ... and pass array to process function
      process(dataArray);
    }).error(function(){
      //...handle error
    });
  }
}); 
```

[在jQuery.ajax 文档](http://api.jquery.com/jQuery.ajax/)中获取有关 jsonp 的更多信息

实际上 $.get 只是 $.ajax 的简写。

# javascript - javascript 正则表达式提取字符串中 content.html() 返回的代码

> ID：14291267
> 
> 赞同：0
> 
> 时间：2013-01-12T07:25:26.740
> 
> 标签：javascript, jquery, regex

我需要存储一些 javascript 语句，以便稍后在撤消/重做机制中实现。

我的陈述包括设置`content`div 的 HTML 和编辑全局变量`i`。`$('#content')`它可以包含许多`divs`，每个都有自己的内联样式属性。我以前是这样存储多个语句的：

```
storedcontent = $('#content').html();
statements = "$('#content').html("+storedcontent+"); i = " +i+ "; "; 
```

然后我会`eval(str);`在按下撤消按钮时使用 , 。可能存储在`statements`变量中的示例如下：

```
content.html('<div id="left" class="margin-line" style="top: 15px; left: 15px; width:1px; height: 317px; border-right:1px dotted gray;"></div>     <div id="top" class="margin-line" style="top: 14px; left: 16px; height:1px; width: 569px; border-bottom:1px dotted gray; "></div>'); 
i = 3; 
```

（请注意，在 .html() 语句之后有一个变量赋值）。

所以我之前所做的只是简单地做`eval(statements)`, 以便同时执行 the`.html()`和`i=3`语句。

但我意识到`eval()`有问题。因此，在保留`statements`变量中的两个（并且可能还有更多）javascript 语句的同时，我只想提取`$('#content').html()`.

所以我想要一个正则表达式从变量中提取`statements`，只有返回的`$('#content').html()`内容，即我在 中的内容`storedcontent`。这样，我可以直接做，而不是使用 eval`$('#content').html(storedcontent);`

我知道我可以轻松地使用子字符串，但我想知道如何使用正则表达式来做到这一点。

我试图编辑这个问题，但我认为它可能仍然令人困惑。为了简化，也许我只是在问，如何使用正则表达式来捕获两个不同子字符串之间的字符串，在这种情况下`$('#content').html(`和`);`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:49:52.107

我真的不明白你为什么不使用存储内容，但无论如何。

'i' 变量里面是什么？如果它是一个整数，那么 RegExp 应该是：

```
var storedcontent2 = statements.match(/#content\'\)\.html\((.*)(\);\s*i\s*=\s*\d+\s*;\s*)$/)[1]; 
```

# python - 数组循环结束时并排打印元素两次

> ID：14291269
> 
> 赞同：1
> 
> 时间：2013-01-12T07:25:33.483
> 
> 标签：python, python-2.7

我写了这几行代码

```
import string
alphabets=string.uppercase
for i in range(0,26):
   print alphabets[i] 
```

它将打印所有字母。但是如果范围大于数组的长度

```
for i in range(0,28):
  print alphabets[i] 
```

它将给出 Index out of range 错误，因为 Array 中只有 26 个元素。

但我希望它应该继续循环数组并在数组像这样迭代之后打印范围的其余部分的结果

```
AA
BB 
```

所以我做了这个

```
for j in range(0,28-26):
    print alphabets[j]*2 
```

但我不知道如何组合这四行代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T07:29:10.010

```
import string
alphabets=string.uppercase
for i in range(0, 28):
   print alphabets[i % 26] * (i / 26 + 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:31:07.947

```
for i in range(0, 28):
   print alphabets[i%26] * (i/26 + 1) 
```

这适用于`i`. 它将继续环绕并增加打印的字母数量。

从 50 到 60：

```
YY
ZZ
AAA
BBB
CCC
DDD
EEE
FFF
GGG
HHH 
```

# iphone - 如何将 30 分钟添加到当前时间

> ID：14291271
> 
> 赞同：-1
> 
> 时间：2013-01-12T07:25:50.380
> 
> 标签：iphone, ipad

我想在当前时间上增加 30 分钟。

我试过这个

```
NSDate *dateToFire = [[NSDate date] dateByAddingTimeInterval:5*60]; 
```

但是只需要像 10:00:30 这样的时间 ---> +30 = 10:30:00

建议总是受到赞赏。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T07:34:12.057

使用这种方式：

```
NSCalendar *calendar=[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components=[NSDateComponents new];
components.minute=30;
NSDate *newDate=[calendar dateByAddingComponents: components toDate: [NSDate date] options: 0];
//To get date in  `hour:minute` format.
NSDateFormatter *dateFormatterHHMM=[NSDateFormatter new];
[dateFormatterHHMM setDateFormat:@"hh:mm"];
NSString *timeString=[dateFormatterHHMM stringFromDate:newDate];

NSLog(@"===> %@",timeString); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T07:30:58.830

请像这样添加它：30 * 60。您在代码中只添加了 5 分钟。

您添加的时间以毫秒为单位。

所以你需要试试这个：

```
NSDate *dateToFire = [[NSDate date] dateByAddingTimeInterval:30*60]; 
```

这将在当前时间增加 30 分钟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T07:30:21.910

试试这个 ：：

```
NSDate *dateToFire = [[NSDate date] dateByAddingTimeInterval:1800.0]; 
```

希望，它会帮助你。谢谢。

# wcf - 是否可以使用预定义的接口生成实际的 RESTful Web 服务？

> ID：14291275
> 
> 赞同：0
> 
> 时间：2013-01-12T07:26:17.690
> 
> 标签：wcf, web-services, rest, wsdl, interop

我正在构建一个需要公开服务接口的应用程序。目的是将服务接口分发给其他参与的应用程序，这些应用程序将使用服务接口创建实际的 Web 服务。其他应用程序可能使用也可能不使用 .NET 平台。我的应用程序将成为所有由其他应用程序创建（使用我定义的接口）和托管的 Web 服务的客户端。

为此，我定义了服务接口（世界`ServiceContract`中的 s `WCF`）并从中创建`WSDL`。我会将 WSDL 分发给其他应用程序，这些应用程序将在他们的平台上生成实际的 Web 服务。

1.  在这种情况下，我可以使用 RESTful 服务吗？会有多大好处？
2.  **在 REST 世界中，是否可以定义服务合同（C# 接口）并让其他方生成实际的 Web 服务？**（我读过一些关于`WADL`但人们不推荐它的博客！
3.  是否可以将现有的 WCF 服务迁移到 REST？

我是 REST 世界的新手！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T14:37:08.857

可以将现有的 WCF 服务迁移到 RESTful 模式。我目前正在从事类似的活动。我要迁移的服务只包括读取数据，所以这里只涉及一个 GET。对于 PUT 或 POST 需要做更多的工作。

我也是 REST 世界的新手。我有一个可以在[这里找到的例子。](https://www.dropbox.com/s/ai924bnkct9j1lz/Lesson5.zip)

# php - 用于从表中选择指定数据的我的 sql 查询

> ID：14291276
> 
> 赞同：0
> 
> 时间：2013-01-12T07:26:21.363
> 
> 标签：php, mysql, select, limit

我的 php 页面中有 $i 计数器，所以我想直接从 $ith 行获取接下来的 15 条记录。我只是使用下面的查询 bt 它返回空输出。虽然我在 db 中有很多记录

```
SELECT * FROM BOOKS WHERE @ROWNUM > '$i' LIMIT 15 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T07:30:24.727

如果我理解正确，您想显示从 $i 开始的 15 行吗？

尝试：

```
SELECT * FROM tbl_name LIMIT $i,15 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:29:33.923

您可以将查询构建为

```
SELECT * FROM BOOKS LIMIT $i, 15; 
```

检查此链接[**MySQL SELECT with LIMIT**](http://dev.mysql.com/doc/refman/5.1/en/select.html)

# ruby-on-rails - 如何在 application.controller.rb 中使用自定义方法？

> ID：14291277
> 
> 赞同：0
> 
> 时间：2013-01-12T07:26:22.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是rails和ruby的新手。我对rails中的一些约定感到很困惑~

我写了一个这样的方法：

```
def show_session_counter?
  if session[:counter] && session[:counter] > 4
  end
end 
```

...并想像这样使用 application.html.erb 中的方法：

```
<% if show_session_counter? %>
      <li><a href="#"><%= pluralize session[:counter], "time" %></a></li>
<% end %> 
```

首先，我尝试将方法放在 application.controller.rb 中，因为我认为该方法将在 application.html.erb 中使用。我试图把它作为一种普通的方法和一种私人的方法。都不工作。

然后我将该方法放在 application_helper.rb 中，它就可以工作了。

所以我的问题是：为什么第一种方法行不通？这里有任何“rails约定”吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:46:04.277

当您将方法放入控制器并希望在视图中使用它时，您需要将其声明为`helper_method`.

```
helper_method :show_session_counter?

def show_session_counter?
  if session[:counter] && session[:counter] > 4
  end
end 
```

# c# - 如何获取某个 GridView 列中的所有值？

> ID：14291280
> 
> 赞同：1
> 
> 时间：2013-01-12T07:26:37.320
> 
> 标签：c#, asp.net, database, gridview

我想检查删除的行是否在某个单元格中有一个值，该单元格是整个 GridView 中的最后一个。我知道我可以通过以下方式获取已删除行的单元格的值：

```
protected void GridView1_RowDeleted(object sender, GridViewDeletedEventArgs e)
{
   Response.Write(e.Values["img_cat"]);            
} 
```

但不知道如何检查`img_cat`已删除行的列内的值是否不存在于任何其他`img_cat`单元格中。

另外，我想知道这种方法是否更适合检查数据库中某个单元格值的存在。`RowDeleted`或者只是在事件中直接在数据库中进行检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:40:44.120

您可以在您的活动中写下此代码并检查

```
 foreach (GridViewRow row in gvAdminUsers.Rows) {

    if (row.RowType == DataControlRowType.DataRow) {
              //here 2 can be replace by your column index i.e. index of image column 

        if (row.Cells(2).Text == e.Values["img_cat"]) {
            // found inserted user - select it!
            gvAdminUsers.SelectedIndex = iRowCnt;
        }
        iRowCnt += 1;
    }
 }
 if(iRowCnt>1)
  //there are row exists with this value 
```

像这样你可以解决你需要遍历每一行网格来找出价值的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:43:45.560

作为@PranayRana 答案的补充，您还可以使用 Linq：

```
protected void GridView1_RowDeleted(object sender, GridViewDeletedEventArgs e)
{
   var val = e.Values["img_cat"];
   if (!(sender as GridView).Cast<GridViewRow>().Any(x => x["img_cat"] == val))
   {
       //It's the last one, do something.
   }
} 
```

# javascript - 当我尝试使用 ajax 时，chrome 的控制台显示“资源加载失败”

> ID：14291282
> 
> 赞同：0
> 
> 时间：2013-01-12T07:26:45.453
> 
> 标签：javascript, jquery, ajax

我想使用 ajax 下载一个 javascript 文件。但我做不到。

谷歌浏览器控制台说`Resource failed to load`

这是我的html。请检查并给我意见。

[https://www.box.com/s/b2mj0cs7xbdqh8sdrh92](https://www.box.com/s/b2mj0cs7xbdqh8sdrh92)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:35:39.943

尝试`GET`作为您的请求类型。所以你的新代码会读，

```
$.ajax({
    type: "GET",
    url: "jquery.jsPlumb-1.3.16-all-min.js",
    dataType: "script"
    }); 
```

还要确保它`jquery.jsPlumb-1.3.16-all-min.js`与`index.htm`. 这仍然不会将其直接加载到页面中，但可以访问文本，然后根据需要对其进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:36:13.537

在我看来，AJax 不应该用于下载资源文件，而应该用于从客户端与服务器通信。前者的含义太多。

加载 js 文件的预期结果是什么？

如果您真的打算这样做（我不建议这样做），请使用 jQuery.getScript()：

[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

# facebook - Facebook 应用的客户端令牌可用于哪些调用？

> ID：14291283
> 
> 赞同：15
> 
> 时间：2013-01-12T07:26:51.023
> 
> 标签：facebook

在 Facebook 应用程序配置的*Settings > Advanced*部分，有一个名为**Client Token**的设置。描述说*Client Token 用于 auth 方法而不是 app secret*。

![客户端令牌设置](../Images/f83ae04c2803fb24c87d7d87cca37e76.png)

在哪些调用中可以使用 Client Token 而不是 App Secret，为什么要使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-06T09:33:11.303

客户端令牌用于无法使用标准 oAuth2 方法的客户端应用程序。

Web 应用程序可以填充 redirect_uri 参数，确保调用 url 是应用程序的授权 url，但 iOS 应用程序没有可重定向到的有效 url，因此使用客户端令牌。

# spring-mvc - 我可以同时使用@Validated 和@RequestBody 吗？

> ID：14291289
> 
> 赞同：1
> 
> 时间：2013-01-12T07:28:04.530
> 
> 标签：spring-mvc, spring-3

我开始研究SpringMVC。

这是我的控制器中的一种方法。

```
@ResponseBody
@RequestMapping(value = "/user/login", method = RequestMethod.POST)
public Result login(@Validated(UserLoginVaildator.class)
@RequestBody User user, BindingResult result, HttpSession session,
    HttpServletResponse response, Model model) 
```

我想使用 JSR-303 验证来验证用户。并且用户是通过 JSON 发布的，所以我必须使用`@RequstBody`.

但是当我尝试使用这种方法时有一个例外。

```
Errors/BindingResult argument declared without preceding model attribute. 
Check your handler method signature! 
```

我正在使用弹簧 3.1.3.RELEASE。

我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:29:54.103

为什么不开始使用最新的 3.2GA 版本？3.2 支持 @Validated 有效负载后的 BindingResult 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T02:06:50.780

我不认为 Spring 3.1.x 已经支持 JSR-303 验证组 (@Validated) + @RequestBody。

我所知道的是@Valid 与@RequestBody 一起工作。见[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/new-in-3.1.html#new-in-3.1-mvc-valid-requestbody](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/new-in-3.1.html#new-in-3.1-mvc-valid-requestbody)

# java - 无法使用 usebean 制作错误处理程序

> ID：14291290
> 
> 赞同：0
> 
> 时间：2013-01-12T07:28:18.833
> 
> 标签：java, jsp, servlets

如何使用此代码检查下拉列表是否没有值？

```
<td width="168"><select name="OrgType" class="txtbox" tabindex="1">
                            <option value="1">Please choose...</option>
                            <%
                                Iterator it2 = Org_Items2.iterator();
                                while (it2.hasNext())
                                {
                                    OrganizationItems orgItem2 = (OrganizationItems) it2.next();
                                    //EMSItems newsItem4 = new EMSItems();
                            %>
                            <option value=<%=orgItem2.getOrgTypeId()%>><%=orgItem2.getOrgTypeName()%></option>
                            <%
                                }
                            %>

                    </select></td>
                    <td width="120">
                        <%
                            if (errors.containsKey("OrgType"))
                            {
                                out.println("<span class=\"warning\">" + errors.get("OrgType") + "</span>");
                            }
                        %>
                    </td> 
```

然后验证码

```
long OrgType = Integer.parseInt(req.getParameter("OrgType"));
    if ("1".equals(OrgType))
    {
        errors.put("OrgType", "Required");
    }
    else if(req.getParameter("OrgType") != null && !"".equals(req.getParameter("OrgType")))
    {
        long OrgTypeId = Integer.parseInt(req.getParameter("OrgType"));
        emsItem.setOrgTypeId(OrgTypeId);
    } 
```

我在我的标题页中使用了 usebean 标记

```
<%@ page import="java.util.Iterator"%>
<%@ page import="data_registration_items.OrganizationItems"%>
<jsp:useBean id="Org_Items2" scope="request" type="java.util.List" /> 
```

但是当我尝试将下拉列表的值保留为“请选择...”时，我收到了错误

```
java.lang.InstantiationException: bean Org_Items not found within scope
    org.apache.jsp.WEB_002dINF.jsp.organization_002dregistry_jsp._jspService(organization_002dregistry_jsp.java:79)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    web_registration.OrganizationServlet.doPost(OrganizationServlet.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    web.SecurityFilter.doFilter(SecurityFilter.java:55) 
```

如果下拉列表传递了正确的值，如何正确验证？

* * *

我试图删除标题中的 usebean。在我的 servlet 中，我已经有了

```
List<OrganizationItems> orgItems2 = new SetOrganizationType().OrgTypeList();
req.setAttribute("Org_Items2", orgItems2). 
```

在我的 doGet 方法下...

在我的jsp页面中，我输入了相同的代码并且错误说

```
Org_Items2 cannot be resolved 
```

在选项 2 中我也尝试过，但发生错误

```
java.lang.ClassCastException: java.util.LinkedList cannot be cast to java.util.ArrayList 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:07:20.177

> java.lang.InstantiationException：在范围内找不到 bean Org_Items

当`<jsp:useBean>`您使用`type`属性而不是`class`属性并且所需的 bean 实例在指定范围内**不可用时，将抛出此异常。**

所以基本上有2个解决方案：

1.  事先将 bean 放在所需的范围内，以便`<jsp:useBean>`可以找到它。

    ```
    request.setAttribute("Org_Items", Org_Items); 
    ```

    但是，实际上，这种方式你根本不需要整体`<jsp:useBean>`。它只能在 EL 中直接通过`${Org_Items}`.

2.  请改用该`class`属性，以便`<jsp:useBean>`在范围内找不到它时自动创建一个。您应该只将 FQN 更改为`java.util.ArrayList`，因为`java.util.List`作为接口没有默认构造函数。

    ```
    <jsp:useBean id="Org_Items2" scope="request" class="java.util.ArrayList" /> 
    ```

### 也可以看看：

*   [javax.servlet.ServletException：在范围内找不到 bean [名称]](https://stackoverflow.com/questions/270444/javax-servlet-servletexception-bean-name-not-found-within-scope)

* * *

**与具体问题**无关。**这段代码包含一些不好的做法（[使用*scriptlet*](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/)，不尊重[Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)，使用`<jsp:useBean>`）。我建议学习如何分离关注点并查看[我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)。它还包含一个带有验证和错误处理的示例。**

# c# - 如何在 c# 中将 numericupdown 控件添加到自定义属性网格？

> ID：14291291
> 
> 赞同：4
> 
> 时间：2013-01-12T07:28:36.453
> 
> 标签：c#, vb.net, winforms

如何在我的应用程序的属性网格中添加数字向上/向下控件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-23T10:49:35.723

您需要创建一个 UI 类型编辑器，然后在其中创建向上/向下控件。我不确定是否有办法在设置中指定最小值/最大值。我对它们进行了硬编码。

```
public class UpDownValueEditor : UITypeEditor {
    public override System.Drawing.Design.UITypeEditorEditStyle GetEditStyle(System.ComponentModel.ITypeDescriptorContext context) {
        return UITypeEditorEditStyle.DropDown;
    }

    public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value) {
        IWindowsFormsEditorService editorService = null;
        if (provider != null) {
            editorService = provider.GetService(typeof(IWindowsFormsEditorService)) as IWindowsFormsEditorService;
        }

        if (editorService != null) {
            NumericUpDown udControl = new NumericUpDown();
            udControl.DecimalPlaces = 0;
            udControl.Minimum = 0;
            udControl.Maximum = 127;
            udControl.Value = (UInt16)value;
            editorService.DropDownControl(udControl);
            value = (UInt16)udControl.Value;
        }

        return value;
    }
} 
```

将其添加到您的设置中，如下所示：

```
//MinimumVolume
[Description("When using a sound card for MIDI output use this to adjust the minimum volume.\r\n" +
"Set this to zero for output to play back expression as it was recorded."),
DisplayName("Minimum Volume"),
Editor(typeof(UpDownValueEditor), typeof(UITypeEditor)),
Category("MIDI")]
public UInt16 MinimumVolume { get { return Settings.MinimumVolume; } set { Settings.MinimumVolume = value; } } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-20T03:49:00.937

阿德里安瓦迪的回答对我来说很好。我不得不将它转换为 VB Net，因为它对我来说更容易（将下面的代码转换为 C# 应该不难）。

为了对具有不同数据类型的多个属性使用相同的 UpDownValueEditor 并让每个属性为 NumericUpDown 控件指定自己的值，这是我在假设用户一次仅更改 1 个属性的情况下所做的，因此允许动态更改NumericUpDown 值：

1) 在 UpDownValueEditor 类中声明公共共享变量：

```
Public Shared udControl As New NumericUpDown()
Public Shared valueType As String 
```

2) 修改 EditValue 函数，使其仅处理属性值

```
Public Overrides Function EditValue(ByVal context As ITypeDescriptorContext, ByVal provider As IServiceProvider, ByVal value As Object) As Object
        Dim editorService As IWindowsFormsEditorService = Nothing
        If provider IsNot Nothing Then
            editorService = TryCast(provider.GetService(GetType(IWindowsFormsEditorService)), IWindowsFormsEditorService)
        End If

        If editorService IsNot Nothing Then
            udControl.Value = value
            editorService.DropDownControl(udControl)
            If valueType = "Single" Then value = CSng(udControl.Value)
            If valueType = "Integer" Then value = CInt(udControl.Value)
        End If

        Return value
End Function 
```

3) 从属性的 Get 语句中传递所有必需的值（应使用以下示例）：

```
Private _lineWidth As Single = 2.0F
<Browsable(True), Editor(GetType(UpDownValueEditor), GetType(UITypeEditor)), DefaultValue(2.0F)> _
Public Property RectangleLineWidth As Single
        Get
            UpDownValueEditor.udControl.DecimalPlaces = 0
            UpDownValueEditor.udControl.Increment = 1
            UpDownValueEditor.udControl.Minimum = 0
            UpDownValueEditor.udControl.Maximum = 20
            UpDownValueEditor.valueType = "Single"
            Return Me._lineWidth
        End Get
        Set(ByVal value As Single)
            Me._lineWidth = value
        End Set
End Property 
```

该代码对我来说工作得很好，每个属性都将它自己的值指定给 NumericUpDown 控件。

使用相同的逻辑，可以放置 TrackBar 代替 NumericUpDown 控件。

这是一个使用 TrackBar 和 NumericUpDown 控件的用户控件的链接。从本页最后一篇文章下载文件（会员可以下载，免费注册）：

[http://advancedhmi.com/forum/index.php?PHPSESSID=6e4661fc9662685cf4ad61874a12fa86&topic=673.0](http://advancedhmi.com/forum/index.php?PHPSESSID=6e4661fc9662685cf4ad61874a12fa86&topic=673.0)

# jquery - jQuery如何绑定通过AJAX添加的元素

> ID：14291294
> 
> 赞同：0
> 
> 时间：2013-01-12T07:29:08.790
> 
> 标签：jquery, ajax

我正在尝试通过 jQuery 获取列表中所有元素的宽度，但我不确定如何将它绑定到它将从 AJAX 加载的内容中读取它的位置。

这是我的代码

```
// below html is loaded via AJAX
<ul>
<li>item 1</li>
<li>item 2</li>
<li>item 3</li>
</ul>

var width;
$('ul li').each(function() {
width = (width + $(this).outerWidth());
});

console.log(width); 
```

那么从这段代码中，我该如何修改它，以便它“绑定/监听”通过 AJAX 加载的元素？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:45:36.877

当您在动态加载的元素上绑定事件时，您需要使用该`.on()`方法，因为事件侦听器是在页面加载时绑定的，如果您的元素当时不存在，jQuery 无法附加事件侦听器。

因此，在您关心的情况下，如果您想附加一个单击事件侦听器，您将绑定一个您确定在 DOM 准备好时存在的元素（例如。`body`）。

```
$('body').on('click', 'ul > li', function(e) {
  console.log('clicked');
}); 
```

但是，如果您只想要元素的宽度（如您的问题），则不需要使用`.on()`. 您只需要在检查它们的宽度时确保元素存在。最好的方法是在`success`加载内容的 AJAX 请求的回调中运行代码。

```
var width = 0;

$.get('example.php', function(data) {
   // this is the success callback

   // first add the new data to the document
   $('#someTarget').append(data);

   // you can now query for their width since they now exist
   $('ul li').each(function() {
      width += $(this).outerWidth();
   });

   console.log(width);
}, 'html'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:56:16.833

jQuery 适用于 DOM 元素。这些方法大多在文档准备好后运行*（在所谓的 $(document),ready() 方法中）*。因此，在 ajax 调用之前初始化的方法将无法访问动态创建的元素。为此，您可以在`complete`ajax 调用的方法中再次初始化 bind 方法。下面是一个例子：

## 示例 1：这行不通。

### HTML

```
<ul>
    <li>item</li>
    <li>item</li>
    <li>item</li>
</ul>
<button onclick="get_ajax_data();">Get Data</button> 
```

### jQuery

```
$(document).ready(function(){
    get_width();
    get_ajax_data();
});

function get_width(){
    # some code to get the width;
}

function get_ajax_data(){
    $.ajax({
        # Some code to get data from the ajax call
        # and then append it as a <li> to the <ul>
    });
} 
```

在上面的示例中，如果您单击按钮获取数据，则`get_width`方法将无法访问`<li>`通过 ajax（动态）添加的新项目，因为在`get_width`初始化方法时该`<li>`元素不存在。因此，您需要按以下方式进行操作。

## 示例 2：这可行。

### HTML

```
<ul>
    <li>item</li>
    <li>item</li>
    <li>item</li>
</ul>
<button onclick="get_ajax_data();">Get Data</button> 
```

### jQuery

```
$(document).ready(function(){
    get_ajax_data();
});

function get_width(){
    # some code to get the width;
}

function get_ajax_data(){
    $.ajax({
        # Some code to get data from the ajax call
        # and then append it as a <li> to the <ul>
        complete: function(){
            get_width();
        }
    });
} 
```

在上面我们所做的是`get_width`在我们的 ajax 调用完成后再次初始化该方法，以便`get_width`也可以访问新创建的元素。

# javascript - 如何通过 HTTP（如 JavaScript）发送 Mozilla Firefox IonMonkey MIR？

> ID：14291300
> 
> 赞同：1
> 
> 时间：2013-01-12T07:29:34.363
> 
> 标签：javascript, firefox, google-nativeclient

[Google Native Client](https://developers.google.com/native-client/overview)可以将标准化的本机代码从服务器发送到浏览器并执行它。代码运行速度很快。

最近 Mozilla 发布了名为[IonMonkey](https://wiki.mozilla.org/IonMonkey)的新 JavaScript VM ，它具有[Middle-level Intermediate Representation](https://wiki.mozilla.org/IonMonkey/MIR)。首先，将 JavaScript 翻译成 MIR，然后应用优化，然后生成原生代码。

是否可以像使用 Native Client 一样将 MIR 从服务器发送到浏览器？

Mozilla 是否有任何计划使之成为可能？

Mozilla IonMonkey MIR 能否变成类似于 Google Native Client 的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:39:51.873

无法将 MIR 从服务器发送到浏览器。

没有计划使这成为可能。一方面，这需要构建一个 MIR 验证器，并且没有计划构建一个。此外，MIR 依赖于在运行时观察到的类型信息；使其可序列化还需要序列化和反序列化此类型信息，并在反序列化时将其传播到 JS 引擎的非 MIR 部分。这是一项很好的工作，但有一个可疑的好处：生成的代码将比 JS 源代码大得多，而且一旦完成所有验证和什么的。

# javascript - 扩展 DOM

> ID：14291303
> 
> 赞同：0
> 
> 时间：2013-01-12T07:29:53.937
> 
> 标签：javascript

我最近读到，由于[此处](http://www.nczonline.net/blog/2010/03/02/maintainable-javascript-dont-modify-objects-you-down-own/)和[此处](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)列出的原因，从整体上扩展 DOM 是不好的。据我了解，反对它的主要原因是：

*   它在 IE 中不能很好地工作/根本不工作
*   可能会发生冲突，例如如果框架使用并且浏览器然后在文档元素上`Document.prototype.hide`实现功能`hide`
*   浏览器以截然不同的方式实现事物

但是，我还没有看到有人问过这些问题。

1.  如果我想扩展 DOM，我将如何安全地进行？除了包装器的明显使用之外，我如何`hide`安全地本地添加一个函数，例如作为一个整体的 DOM？
2.  如果无法安全实施，具体原因是什么？我可以实施检查，例如`typeof Document.prototype.hide == 'undefined'`在原型上实施我自己的功能之前进行检查吗？

换句话说，向我解释如何安全地扩展 DOM，以及我可以做些什么来确保如果浏览器要实现该`hide`功能，我可以做些什么来不让我的代码必须完全重做。

# java - JAVA(TM) 平台 SE 二进制文件在处理 jUSB 程序时停止工作

> ID：14291316
> 
> 赞同：1
> 
> 时间：2013-01-12T07:32:40.877
> 
> 标签：java, jusb

我已经在eclipse中从JAVA USB导入了usb包。我在 system32 文件夹中添加了 jusb.dll。我正在使用 Windows 7 和 JDK 7。当我通过 Eclipse 运行 RunUSBControllerTest.java 时出现错误

> JAVA(TM) 平台 SE 二进制文件已停止工作

我已经更新了 JDK 7 update 10。请给我一些解决方案

这些是错误详细信息

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: javaw.exe
  Application Version:  7.0.100.18
  Application Timestamp:    50b6401f
  Fault Module Name:    StackHash_9451
  Fault Module Version: 6.1.7600.16385
  Fault Module Timestamp:   4a5bdadb
  Exception Code:   c0000374
  Exception Offset: 000c283b
  OS Version:   6.1.7600.2.0.0.256.1
  Locale ID:    1033
  Additional Information 1: 9451
  Additional Information 2: 945177d4dcd25bd15a24a1ac55a01ff1
  Additional Information 3: 1b4c
  Additional Information 4: 1b4c3e808b9e543d0671ecf153713e18 
```

# grammar - 使用 Flex 和 Bison

> ID：14291319
> 
> 赞同：4
> 
> 时间：2013-01-12T07:33:03.590
> 
> 标签：grammar, bison, flex-lexer

我是 Flex 和 Bison 的新手，我曾尝试编写 Flex 词法扫描器和 Bison 语法，但遇到以下问题：

*   一个词有时可以与 Flex 定义中的不同定义匹配，我希望 Bison 从它的语法中找到好的 Flex 定义来选择。

例如，如果这个词在 Flex`abc`中可以看成`category1`or `category2`，我想让 Bison 选择`category1`它是否像 Bison 语法那样出现没有语法错误，`category1`而像 category2 那样不正确；但如果它在是`category1`而不是 as时显示为语法错误`category2`，则 Flex 应将其归类为`category2`.

有没有办法做到这一点？还是我完全误解了 Flex 和 Bison？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:37:18.397

这种情况通常出现在通常称为“半保留”字词或 C# 中称为“上下文关键字”的字词中。在 bison/flex 中，处理这些是一件很痛苦的事情。（Lemon 有一个未记录的功能，您可以使用该`%fallback`指令为令牌定义回退，这非常适合此用例；您只需`IDENTIFIER`为任何上下文保留的令牌进行回退。）

通过一些工作，您可能可以通过定义非终端来实现相同的效果，例如：

```
identifier : IDENTIFIER | VAR | ADD | REMOVE | DYNAMIC | GLOBAL | ...
/* VAR is special in a local-variable-type: */
local_variable_type_identifier : IDENTIFIER | ADD | REMOVE | DYNAMIC | GLOBAL | ... 
```

`identifier`您可能可以通过使用整个然后解决每个冲突来找到需要自定义的位置，其中包括`identifier`通过将其替换为受限非终结符来减少冲突，该非终结符排除参与冲突的半保留词。

这不是很好，但这是我所知道的最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:22:04.913

Flex 支持“开始状态”和“独占开始状态”，这可能会让您达到您想要的效果。如果你可以提前知道上下文是`abc`应该的`category1`，那么你可以告诉 Flex 启动一个被分类为的状态`abc`，`category1`而在其他状态下，它被分类为`category2`。完成特殊状态后，不要忘记将状态切换回来。这种技术可用于在某些上下文中将选定的关键字变成关键字，而在其他上下文中将其保留为标识符。但是，通常情况下，您让词法分析器始终以相同的方式对其进行分类（例如，作为 token `KW_ABC`）并让语法继续使用该标记。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-10T20:08:33.823

重申 Jonathan Leffler 在 1 月 13 日 19:39 的上述评论，您正在尝试使用上下文不敏感的解析器生成器工具解析上下文敏感的语言。您需要重新考虑语法或重新考虑您对解析器生成器工具的选择——您所做的相当于尝试使用螺丝刀敲钉子。

如果是我，我会回到书籍和互联网上来回顾上下文相关语法解析的处理。

# android - 媒体记录器android中的setLocation

> ID：14291324
> 
> 赞同：1
> 
> 时间：2013-01-12T07:33:53.437
> 
> 标签：android, camera, android-mediarecorder

在我的应用程序中，我使用 gps 获取地址、纬度、经度。我们还需要捕获视频并将该位置设置为视频。因此可以在 video-> detail 选项中看到这一点。

我用照片成功地做到了这一点，但不能用视频完成。

我正在使用 Media Recorder 尝试使用 setLocation 属性，但对于 Media Recorder 对象，它不显示该属性。

该怎么办？？？

以下是示例代码

```
 mrec.setCamera(mCamera);   
    mrec.setVideoSource(MediaRecorder.VideoSource.CAMERA);
    mrec.setAudioSource(MediaRecorder.AudioSource.MIC);    
    mrec.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    mrec.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
    mrec.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

    mrec.setPreviewDisplay(surfaceHolder.getSurface());
    mrec.setOutputFile(path+filename);
    mrec.prepare();
    mrec.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:41:30.753

首先获取[相机参数](http://developer.android.com/guide/topics/media/camera.html#using-features)。然后使用方法[`setGpsLatitude(double latitude)`](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setGpsLatitude%28double%29)，[`setGpsLongitude(double longitude)`](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setGpsLongitude%28double%29)在`Parameters`对象上设置位置等。

然后设置这些参数`mCamera.setParameters(params)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T16:53:31.013

使用[MediaRecorder.setLocation()](http://developer.android.com/reference/android/media/MediaRecorder.html#setLocation%28float,%20float%29)函数。

# c - C中的SHA1错误实现

> ID：14291325
> 
> 赞同：1
> 
> 时间：2013-01-12T07:33:54.383
> 
> 标签：c, openssl, sha1

我一直在努力让 sha1() 函数从 openssl/sha.h 工作，但是我得到了随机输出和一些警告。我已经阅读了很多内容并尝试了一些示例代码，但我收到了所有警告并且无法正确显示。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <openssl/sha.h>

int main() 
{ 
const unsigned char data[] = "Hello, World";
unsigned long length = sizeof(data);
unsigned char  hash[SHA_DIGEST_LENGTH];
SHA1(data, length, hash);
printf("%02x \n", hash);
return 0;

} 
```

以下是我收到的警告：

```
sha.c: In function ‘main’:
sha.c:12: warning: ‘SHA1’ is deprecated (declared at /usr/include/openssl/sha.h:124)
sha.c:13: warning: format ‘%02x’ expects type ‘unsigned int’, but argument 2 has type   ‘unsigned char *’
sha.c:13: warning: format ‘%02x’ expects type ‘unsigned int’, but argument 2 has type ‘unsigned char *’ 
```

当我运行它并得到输出时：62652b34

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T07:49:13.573

我也花了一段时间才弄清楚这一切。最好的方法是使用 EVP，它为几乎所有东西提供了通用功能。

```
#include <openssl/evp.h> 
```

在调用哈希函数之前，您需要先调用这个 im main。初始化你的哈希。否则 openssl 会抱怨该算法不可用。

```
OpenSSL_add_all_algorithms(); 
```

**模式**必须是“SHA256”、“SHA512”、“SHA1”作为字符串。 **dataToHash**是输入，**dataSize**是输入的大小， **outHashed**应该已经分配好了，hash 会写在那里

```
unsigned int hash(const char *mode, const char* dataToHash, size_t dataSize, unsigned char* outHashed) {
    unsigned int md_len = -1;
    const EVP_MD *md = EVP_get_digestbyname(mode);
    if(NULL != md) {
        EVP_MD_CTX mdctx;
        EVP_MD_CTX_init(&mdctx);
        EVP_DigestInit_ex(&mdctx, md, NULL);
        EVP_DigestUpdate(&mdctx, dataToHash, dataSize);
        EVP_DigestFinal_ex(&mdctx, outHashed, &md_len);
        EVP_MD_CTX_cleanup(&mdctx);
    }
    return md_len;
} 
```

一个使用示例（这个没有经过测试，我在一个 c++ 包装器中使用了上面的代码）

```
const char *inData = "test data2";
unsigned char outHash[20]; // output is already allocated
hash("SHA1", inData, 10, outHash); 
```

* * *

您不应该直接使用已弃用的 SHA1 方法（您的代码可能会在下一个版本中崩溃）。如果您想使用您的版本，您需要将每个字符打印为十六进制：

```
int i;
for(i=0; i<SHA_DIGEST_LENGTH; i++) {
    printf("%02x", hash[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:46:03.060

您不能以这种方式转储整个缓冲区。你需要循环它，如下所示。您为输出获得的值实际上是缓冲区的*地址*`hash`，这显然不是您要查找的。您希望缓冲区中的十六进制字节转储为文本

所以...

```
int main()
{
    const unsigned char data[] = "Hello, World";
    unsigned long length = sizeof(data);
    unsigned char hash[SHA_DIGEST_LENGTH];
    SHA1(data, length, hash);

    int i=0;
    for (;i< sizeof(hash)/sizeof(hash[0]);++i)
        printf("%02x \n", hash[i]);

    return 0;

} 
```

关于您的警告，弃用是因为此接口对于执行您正在尝试的加密操作 (SHA1) 已过时。OpenSSL 中有更新的接口是最新的。具体考虑 EVP 接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:38:13.670

```
printf("%02u \n", hash); 
```

通过打印 unsigned char 删除警告

# ocaml - 如何在交互式 Ocaml 中获取类型信息？

> ID：14291326
> 
> 赞同：21
> 
> 时间：2013-01-12T07:33:54.893
> 
> 标签：ocaml

我正在使用版本 4 的 Ocaml。当我以交互方式定义某种类型时，解释器会立即打印出该类型的字符串表示形式：

```
# type foo = Yes | No;;         <-- This is what I entered
type foo = Yes | No             <-- This is what interpreter bounced 
```

但在我键入更多定义后，有时我想再次查看该类型的文本表示。

在 Haskell 中，我可以输入 ":t foo"。

我怎样才能在 Ocaml 中做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-05T13:24:41.847

在 utop 中，您可以使用该`#typeof`指令：

```
#typeof "list";;
type 'a list = [] | :: of 'a * 'a list 
```

您可以将值和类型放在双引号内：

```
let t = [`Hello, `World];;
#typeof "t";;
val t : ([> `Hello ] * [> `World ]) list 
```

PS 甚至更好的解决方案是使用 merlin。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T13:07:54.087

据我所知，Ocaml中实际上没有办法在字符串形式下检索类型信息

您必须为每种类型构建模式匹配

```
type foo = Yes | No;;

let getType = function
  |Yes -> "Yes"
  |No -> "No"    
  ;;

let a = Yes;;
print_string (getType a);; 
```

# html - 用html设计布局

> ID：14291328
> 
> 赞同：-4
> 
> 时间：2013-01-12T07:34:14.350
> 
> 标签：html

我使用 CSS 来样式化我的页面。我使用 % 样式而不是使用 px 值。然而，由于我需要在不同的位置添加几个不同大小的元素，我最终在设计布局上花费了比编码更多的时间。

我尝试使用 WYSIWYG 编辑器，但它使用 px 样式编码。有人可以帮助我解决方案，以便我可以快速设计布局并进行实际部分吗？我现在使用写字板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:41:53.207

最好的办法是多练习。更好地编码它们，并在有意义的地方重用以前项目中的部分。

对于大多数项目，没有所见即所得的工具可以节省您的时间。他们都写垃圾代码，因为用这样的工具编辑有点模棱两可。作为 Web 开发人员，您可以以一种可以在许多用户代理中正确解释的方式编写您的标记和样式。

# ios - 如何在 iOS 中使用 MPMusicPlayerController 的 applicationMusicPlayer 播放背景音乐？

> ID：14291333
> 
> 赞同：2
> 
> 时间：2013-01-12T07:35:16.013
> 
> 标签：ios, cocoa-touch, mpmusicplayercontroller

您好，我正在尝试`MPMusicPlayerController's` `applicationMusicPlayer`在 iOS 中播放背景音乐。

我也在`Required background modes`Plist 中添加了。

但它不播放背景音乐。

如何播放背景音乐`MPMusicPlayerController`？

感谢您的阅读。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T17:43:11.667

`applicationMusicPlayer`不支持背景音乐。使用`MPMusicPlayerController`'s`iPodMusicPlayer`代替。它与内置的 iPod 播放器共享状态，当您的应用程序进入后台时，音乐将继续播放。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T13:52:14.357

Bryan 关于 applicationMusicPlayer 不在后台播放音乐是正确的，但还有另一种解决方案：

您可以使用 AVAudioPlayer 播放流式或本地（捆绑）音频。它甚至允许您同时播放多个音频文件，每个文件都有一个 AVAudioPlayer 实例。

这是文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)

# javascript - 如何检查 JavaScript 或 jQuery 中的类名，并重新加载到另一个 URL

> ID：14291334
> 
> 赞同：0
> 
> 时间：2013-01-12T07:35:27.877
> 
> 标签：javascript, jquery

我有这个代码。

```
<div class="1st-class"></div> 
```

我有一个按钮，当我点击它时，div 会是这样的。

```
<div class="1st-class goto"></div> 
```

现在，如果类名有，我如何检查 div `goto`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T07:39:02.290

给 div 一个 id ：

```
<div id="target" class="1st-class goto"></div> 
```

然后做：

```
if ($('#target').hasClass('goto')) {
    alert('Has class goto');
} 
```

注意：你不需要给 div 一个 ID。您也可以使用`.1st-class`选择器。但是，如果您有多个带有 class 的 div，给它一个 Id 可以使其唯一可识别`1st-class`。

参考：

[`jQuery hasClass()`](http://api.jquery.com/hasClass/)

# javascript - 调整 Div 大小以适应不同的文本

> ID：14291335
> 
> 赞同：0
> 
> 时间：2013-01-12T07:35:33.570
> 
> 标签：javascript, css

所以我遇到的问题是我有多个 div 都应用了相同的类（“文本”）我没有为这些 div 设置宽度或高度，并允许它们自动调整为文本的大小在其中（当然宽度不同）。不幸的是，当我这样做时，任何其他使用我相同的“文本”类的 div 都会占用其中包含最多文本的 div 的宽度。有没有办法使用 CSS 或 Javascript 自动调整每个 Div 的宽度到它们内部的特定文本？（无需手动指定每个 div 的宽度）。

CSS

```
.Text{
   background-color: teal;
   padding: 7px;
   margin: auto;
} 
```

HTML

```
<div class="Text">
     <h1>This is Some Text</h1>
</div>

<br />

<div class="Text">
     <h1>This is More Text only longer than the first</h1>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T07:43:41.307

`DIV`标签的默认 CSS是`display: block, position: static;`. 这使得`DIV`标签占据了其容器的整个宽度。在您的情况下，容器足够宽以包含最长的`DIV`，并且所有`DIV`s 都占用了该空间。

为了解决这个问题，你可以像这样设置你的 CSS：

```
.Text{
   display: inline-block;
   background-color: teal;
   padding: 7px;
   margin: auto;
} 
```

您可能需要使用`<BR />`标签来强制换行，但我看到您已经这样做了。

# javascript - 选中复选框 = 在 div 中切换类（具有许多相同的 div）

> ID：14291339
> 
> 赞同：0
> 
> 时间：2013-01-12T07:36:15.427
> 
> 标签：javascript, jquery

我有一个 div 列表（#div1、#div2、#div3 等）。这些 div 中的每一个都包含不同的图片和纹理。div 共享相同的布局类，它们都包含一个复选框（所有复选框也有一个类）。

我希望单个 div 在选中其中的复选框时切换类。

单击一个 div 中的复选框时，如何在没有所有 div 切换类的情况下进行管理？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:43:08.180

[http://jsbin.com/exasow/1/edit](http://jsbin.com/exasow/1/edit)

```
$(':checkbox').click(function(){
   $(this).closest('div[id^=div]').toggleClass( 'superclass' );
}); 
```

您可以同时使用两者`click`或`change`功能。

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)将允许您将复选框放在其他元素中，它将始终在 DOM 树中搜索所需的父元素：

`div[id^=div]`意味着`DIV element which ID starts with the word "div"`并将适用于您的所有`div1, div2, div***`选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:45:36.103

尝试这个。[**演示**](http://jsfiddle.net/4mTfV/2/)。

使用复选框，然后使用then call`.click()`获取其父 div 。`.parent()``.toggleClass('classforparentdiv')`

**更新**

[在这里](http://jsfiddle.net/4mTfV/5/)。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:46:18.023

为复选框提供一个 ID，并在此基础上切换父 div 类

或者，监听事件并切换父 div 的类

像这样的东西，

$(event.currentTarget).parent().toggle('className');

# php - array_intersect 内部多维数组

> ID：14291340
> 
> 赞同：1
> 
> 时间：2013-01-12T07:36:17.680
> 
> 标签：php, multidimensional-array, array-intersect

我有一个多维数组，可以根据用户输入增加。我想在数组内部做 array_intersect 以获得键之间的公共值。

像例子

```
Array ( [php] => Array ( [0] => 36 [1] => 51 [2] => 116 [3] => 171 [4] => 215 [5] => 219 [6] => 229 [7] => 247 [8] => 316 ) [java] => Array ( [0] => 14 [1] => 16 [2] => 19 [3] => 24 [4] => 25 [5] => 26 [6] => 29 [7] => 31 [8] => 33 [9] => 34 [10] => 35 [11] => 36 [12] => 37 [13] => 40 [14] => 45 [15] => 49 [16] => 51 ) ) 
```

预期输出应该是（36,51）

这是我能得到的

通过这个，

```
$intersected_array = call_user_func_array('array_intersect', $array); 
```

但是如果我的数组还有第三个键，它在所有三个中都没有共同的值

喜欢

```
Array ( [php] => Array ( [0] => 36 [1] => 51 [2] => 116 [3] => 171 [4] => 215 [5] => 219 [6] => 229 [7] => 247 [8] => 316 ) [java] => Array ( [0] => 14 [1] => 16 [2] => 19 [3] => 24 [4] => 25 [5] => 26 [6] => 29 [7] => 31 [8] => 33 [9] => 34 [10] => 35 [11] => 36 [12] => 37 [13] => 40 [14] => 45 [15] => 49 [16] => 51 ) [ajax] => Array ( [0] => 91 [1] => 110 [2] => 113 [3] => 172 ) ) 
```

然后它把我的输出作为键具有最大值的结果。在这种情况下，它将返回我所有的`java`键值。

但我的预期输出是`0`。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:52:50.003

我复制了你的例子，对我来说它有效：

```
<?php

$array = array(
    'php' => array(
        36,
        51,
        116,
        171,
        215,
        219,
        229,
        247,
        316,
    ),
    'java' => array(
        14,
        16,
        19,
        24,
        25,
        26,
        29,
        31,
        33,
        34,
        35,
        36,
        37,
        40,
        45,
        49,
        51,
    ),
    'ajax' => array(
        91,
        110,
        113,
        172,
    ),
);

$intersected_array = call_user_func_array('array_intersect',$array);

print_r($intersected_array);

// RESULT: "Array ( ) " 
```

请准确复制此代码并告诉我您的输出。

# google-app-engine - 如何在 google appengine ndb 中使用列表对象查询重复属性

> ID：14291341
> 
> 赞同：2
> 
> 时间：2013-01-12T07:36:21.417
> 
> 标签：google-app-engine, app-engine-ndb, djangoappengine

我需要构造一个具有重复属性的逻辑查询并且无法使其工作。我有一个带有主题的列表对象。

```
topics = [u'string1', u'string2', ...] 
```

我有一个查询对象：

```
videos = Video.query()
videos.count()
=> 19 
```

主题是重复的字符串属性

```
class Video
  topics = ndb.StringProperty(repeated=True) 
```

我想返回具有主题`string1`OR的视频`string2`。我之前也不知道列表对象的长度，或者我可以用逻辑运算符构建查询。

我试着像文档建议的那样做

```
videos.filter( Video.topics.IN([topics]) ) 
```

但这会引发 IN 期望字符串而不是列表对象的错误。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T16:38:09.357

看起来`topics`已经是一个列表了。因此，您需要在没有其他列表的情况下传递它：

```
videos.filter( Video.topics.IN(topics) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-15T02:29:01.373

对于一系列主题，您可以使用：

```
Video.query(Video.topics.IN(topics)) 
```

或者对于单个字符串：

```
Video.query(Video.topics == topic) 
```

来源：[https ://cloud.google.com/appengine/docs/standard/python/ndb/queries](https://cloud.google.com/appengine/docs/standard/python/ndb/queries)

# node.js - 监控执行不工作

> ID：14291343
> 
> 赞同：0
> 
> 时间：2013-01-12T07:36:45.963
> 
> 标签：node.js, monit, forever

这是我适用的monit.conf

```
check file feedabilityLog with path /var/www/scraper/feedability/feedabilityLog.txt
if timestamp > 20 seconds then
  exec "/usr/local/bin/forever restart feedability.js"
group feedabilityLog 
```

在我的监控日志文件中，我得到以下信息：错误：'feedabilityLog' timestamp test failed for /var/www/scraper/feedability/feedabilityLog.txt

这似乎表明时间戳检查正在工作。但是，monit 脚本的 exec 部分不起作用。我什至尝试将重新启动放在 bash 文件中，但这不会重新启动永远的过程。我不确定我做错了什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:33:29.483

没关系。弄清楚了。一切的绝对路径！

# asp.net - Html 页面不会发布到控制器

> ID：14291354
> 
> 赞同：0
> 
> 时间：2013-01-12T07:38:54.110
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, visual-studio-2010

我在模特上课`Customer`

当我单击 Cshtml 页面上的提交按钮时，

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Registration</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.Fname)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Fname)
            @Html.ValidationMessageFor(model => model.Fname)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Lname)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Lname)
            @Html.ValidationMessageFor(model => model.Lname)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Address)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Address)
            @Html.ValidationMessageFor(model => model.Address)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.phoneNo)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.phoneNo)
            @Html.ValidationMessageFor(model => model.phoneNo)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Username)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Username)
            @Html.ValidationMessageFor(model => model.Username)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Password)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Password)
            @Html.ValidationMessageFor(model => model.Password)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.ConfirmPassword)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ConfirmPassword)
            @Html.ValidationMessageFor(model => model.ConfirmPassword)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset> 
```

该页面未发布到控制器

```
[HttpPost]
public ViewResult DisplayCustomer(FormCollection Collection)
{
     objinfo.Fname = Request.Form["Fname"].ToString();
     objinfo.Lname = Request.Form["Lname"].ToString();
     objinfo.Address = Request.Form["Address"].ToString();
     objinfo.phoneNo = Request.Form["PhoneNo"].ToString();
     objinfo.Username = Request.Form["UserName"].ToString();
     objinfo.Password = Request.Form["Password"].ToString();
     objutility.InsertEmployee(objinfo);    

     return View("DisplayCustomer");
} 
```

我无法将值输入`request.form`. 我缺少什么特定的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:46:41.777

1 - 您不需要使用 Request.Form 或 FormCollection 。

您的控制器应如下所示：

```
// this method should just display the page, not handle the post back
public ViewResult DisplayCustomer(){
 return View(); 
}

// this method will handle the post back
[HttpPost]
public ViewResult DisplayCustomer(Customer model){
    // Handle the post back.

    if(ModelState.IsValid){
         /* Hanlde the submission, at this point "model" should have all the properties, such as model.Fname, model.Lname, etc... 

         DB.InserOnSubmit(model);
         DB.Customers.AddObject(model);
         DB.Customers.Add(model);
         you get the point 
         */
    }

} 
```

# integration - Alfresco 和 LDAP 完全集成

> ID：14291357
> 
> 赞同：0
> 
> 时间：2013-01-12T07:39:15.387
> 
> 标签：integration, alfresco, alfresco-share

是否可以在 Alfresco 和 LDAP 之间进行集成以管理组、用户和权限？我的意思是，必须使用自己的一组权限来管理露天组？目前我有一个允许身份验证的 LDAP 存储库，但是跨多个系统维护用户和组需要做很多工作。换句话说，我可以在不修改 alfresco 核心的情况下轻松地在这两个环境之间进行完全集成吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:31:37.230

简短的回答是否定的。

恕我直言，外部管理的用户、组和身份验证已经是最有意义的。即使这样，当您开始使用共享站点并邀请外部人员时，仍然会在 alfreco 本地创建一部分权限（用户/组）。当然，这在技术上是可以改变的，但是露天写入 LDAP 会打开一个新的蠕虫罐。默认的 LDAP 读取/同步方法不应该导致显着的额外工作。

授权数据，例如角色（很容易与组混淆）和权限及其语义高度依赖于应用程序（alfresco）。在没有线索的外部系统中管理它们是没有意义的。

# c# - 在 LinkedListNode 上添加扩展方法

> ID：14291358
> 
> 赞同：1
> 
> 时间：2013-01-12T07:39:15.077
> 
> 标签：c#, linked-list

我正在尝试创建一种简单的方法来让我的链表在 C# 中像循环链表一样工作。

我有这段代码，它不想显示为扩展方法。知道为什么吗？

```
static class CircularLinkedList
{
    public static LinkedListNode<object> NextOrFirst(this LinkedListNode<object> current)
    {
        if (current.Next == null)
            return current.List.First;
        return current.Next;
    }

    public static LinkedListNode<object> PreviousOrLast(this LinkedListNode<object> current)
    {
        if (current.Previous == null)
            return current.List.Last;
        return current.Previous;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T07:45:26.867

1.  确保将此扩展类的命名空间添加到您正在使用的代码中
2.  默认情况下，类是内部的，因此如果您在另一个项目中使用此扩展方法，请将类标记为公共。
3.  最好使用`LInkedListNode<T>`而不是`LinkedListNode<object>`

代码。

```
public static class CircularLinkedList
{
    public static LinkedListNode<T> NextOrFirst<T>(this LinkedListNode<T> current)
    {
        if (current.Next == null)
            return current.List.First;
        return current.Next;
    }

    public static LinkedListNode<T> PreviousOrLast<T>(this LinkedListNode<T> current)
    {
        if (current.Previous == null)
            return current.List.Last;
        return current.Previous;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T07:41:59.953

您必须`public`与您的班级一起指定。您的类是内部的，如果您的扩展类在不同的项目中，可能是因为您无法访问扩展方法。

```
public static class CircularLinkedList
{
.....
} 
```

要稍后访问它，请使用它：

```
LinkedListNode<object> obj = new LinkedListNode<object>(null);
obj.PreviousOrLast(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T07:53:31.580

这在以下应用程序中对我来说很好：

```
class Program
{
    static void Main(string[] args)
    {
        LinkedListNode<object> node = new LinkedListNode<object>("Hello World");
        node.NextOrFirst();
    }
}

static class CircularLinkedList
{
    public static LinkedListNode<object> NextOrFirst(this LinkedListNode<object> current)
    {
        if (current.Next == null)
            return current.List.First;
        return current.Next;
    }

    public static LinkedListNode<object> PreviousOrLast(this LinkedListNode<object> current)
    {
        if (current.Previous == null)
            return current.List.Last;
        return current.Previous;
    }
} 
```

确保您使用正确的泛型类型实例化您的 LinkedListNode，因为使用任何其他类型（即字符串）将不起作用。但是，您可以通过将代码更改为以下内容来扩展它以支持任何类型的 LinkedListNode：

```
class Program
{
    static void Main(string[] args)
    {
        LinkedListNode<string> node = new LinkedListNode<string>("Hello World");
        node.NextOrFirst<string>();

        LinkedListNode<int> node2 = new LinkedListNode<int>(3);
        node2.NextOrFirst<int>();
    }
}

static class CircularLinkedList
{
    public static LinkedListNode<T> NextOrFirst<T>(this LinkedListNode<T> current)
    {
        if (current.Next == null)
            return current.List.First;
        return current.Next;
    }

    public static LinkedListNode<T> PreviousOrLast<T>(this LinkedListNode<T> current)
    {
        if (current.Previous == null)
            return current.List.Last;
        return current.Previous;
    }
} 
```

# javascript - 在开发过程中禁用广告的任何简单方法？

> ID：14291366
> 
> 赞同：4
> 
> 时间：2013-01-12T07:40:50.457
> 
> 标签：javascript, adsense

我正在开发包含添加的网站。但是，我不希望在开发过程中显示这些广告。

有什么简单的方法可以禁用 Google adsense 生成的 Javascript 代码？例如旗帜？我应该在 JQuery 文档中准备好一些东西吗？寻找一个干净和简单的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T07:43:31.447

您绝对可以将 Adsense JavaScript 包装在条件语句中，如果您愿意，可以在文档顶部自己设置一个标志；只需确保在构建过程中或在准备发布代码时将其剥离。

虽然这在技术上是可行的，但我可能会建议反对它。我不会太担心搞砸您的报告或任何事情-正如您对问题的评论中所指出的那样，Google 在这方面并不是完全新的；他们可以确定什么时候是展示赚钱广告的好时机，什么时候是加入一些填充物的好时机。

请注意，我不代表 Google，也无法说明哪些活动会导致您的帐户被暂停。如果您希望保护自己免受意外点击，我建议您在开发过程中继续禁用广告。安全总比后悔好。

# jasper-reports - 通过从多个数据库中获取数据来生成报告

> ID：14291368
> 
> 赞同：0
> 
> 时间：2013-01-12T07:41:03.653
> 
> 标签：jasper-reports

我想知道有没有办法从多个数据库中获取数据并将数据合并到一个报告中。

例如，假设有两个数据库*DB1*和*DB2* ，分别具有表*t1*和*t2*。*t1*具有与*t2*中的*c1*相同的列*c1*。

 **现在我必须从*t1*获取*c1*并且需要查看*t2中是否有**c1*的任何数据。如果是这样，从*t1*和*t2*获取数据并将其显示为单个报告。

 ***这是我想要的*JasperReports*。*JR*会支持吗？如果有怎么办？

任何建议都会非常有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:59:41.993

我建议你在java端（不在jasperreport中）给出从不同数据库中获取数据的问题。您可以创建一个包含从不同数据库获取的数据的 POJO 列表，然后将该列表传递给 jasperreport。*****

# meteor - Meteor 执行来自客户端的涉及时间的查询

> ID：14291370
> 
> 赞同：1
> 
> 时间：2013-01-12T07:41:23.337
> 
> 标签：meteor

如果我正在做一个

```
Collection.insert({"name":"Record 1",creationTime:new Date()}); 
```

从客户端，因为无论如何命令都会发送到服务器，有没有办法在数据插入时使用服务器的时间而不是客户端的时间？

使用`new Date();`可能不一致，因为客户的时间可以是任何东西。

我知道我们可以在插入查询之前获取服务器的时间，但考虑到插入命令将被发送回服务器，这似乎有点多余。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:51:03.860

您可以简单地这样做来避免已经发送到服务器的冗余：

```
if (Meteor.isClient) {
    Meteor.call("addItem", {"name": "Record 1"});
}

if (Meteor.isServer) {
    Meteor.methods({
        "addItem": function(obj) {
            obj.creationTime = new Date();
            Collection.insert(obj);
        }       
    });
} 
```

或来自客户：

```
if (Meteor.isClient) {
    Meteor.call("getDate", function (error, result) {
        Collection.insert({"name":"Record 1", creationTime: result});
    });
}

if (Meteor.isServer) {
    Meteor.methods({
        getDate: function () {
            return new Date();
        }
    });
} 
```

# c++ - 是否可以将数组编号作为函数执行？

> ID：14291381
> 
> 赞同：2
> 
> 时间：2013-01-12T07:42:36.807
> 
> 标签：c++, c, linux, elf

长话短说，我有一个整数数组，它表示具有一个函数的 ELF 二进制文件的 .text 部分。我想执行这个功能。在尝试执行命令之前，我已经运行了这个命令：

```
mprotect(function, sHeader.sh_size, PROT_EXEC | PROT_READ | PROT_WRITE); 
```

认为它可能会解决权限问题，但是当我尝试运行它时它仍然会出现段错误：

```
int (*fp)(int, int) = (int (*)(int, int))getFunc("t.o");
int a = 2;
int b = 3;
cout << fp(a, b) << "\n"; 
```

但是当我尝试运行它时它仍然会出现段错误：

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000000603010 in ?? () 
```

有什么我错过的吗？

我正在尝试执行的函数的 objdump：

```
0000000000000000 <mult>:
mult():
   0:   55                      push   %rbp
   1:   48 89 e5                mov    %rsp,%rbp
   4:   89 7d fc                mov    %edi,-0x4(%rbp)
   7:   89 75 f8                mov    %esi,-0x8(%rbp)
   a:   8b 45 fc                mov    -0x4(%rbp),%eax
   d:   0f af 45 f8             imul   -0x8(%rbp),%eax
  11:   5d                      pop    %rbp
  12:   c3                      retq 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T08:05:01.593

[ELF](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)对象文件包含[重定位](http://en.wikipedia.org/wiki/Relocation_%28computer_science%29)信息，并且很可能它的部分包含要重定位的`.text`代码，因此代码不会按原样运行。使用`objdump`和`readelf`命令来探索它。如果您真的想按您的方式加载它，您应该处理重定位信息，这是复杂的、特定于处理器的且乏味的。如果您真的想花几周时间来做这件事，请研究 x86-64 [ABI](http://en.wikipedia.org/wiki/Application_binary_interface)。但是使用`dlopen`then`.so`要`dlsym`简单得多（因为在-ed 段 from`dlopen`之后进行重定位 ），见下文。`mmap``t.so`

^(x86-64 ABI 曾经位于[http://x86-64.org/documentation/abi.pdf](http://x86-64.org/documentation/abi.pdf)但该站点今天无法使用)

是什么`getFunc`？你如何在你的内部进行搬迁`t.o`？为什么你不能有一个`t.so`共享对象（例如用 编译`gcc -Wall -fPIC -O -shared t.c -o t.so`）然后使用[dlopen(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/dlopen.3.html)加载它，`dlsym(3)`例如

```
typedef int functionsig_t (int, int);
void* dlh = dlopen("./t.so", RTLD_NOW);
if (!dlh) {
   fprintf(stderr, "dlopen t.so failed with %s\n", dlerror());
   exit(EXIT_FAILURE);
};
functionsig_t* fp = (functionsig_t*) dlsym(dlh, "myfunc");
if (!fp) {
   fprintf(stderr, "dlsym myfunc failed with %s\n", dlerror());
   exit(EXIT_FAILURE),
}
// now you can call fp
int res = (*fp) (1,2); 
```

一旦`fp`返回并且不存在调用堆栈帧，使用`t.so`您可以使用的任何函数`dlclose(dlh);`将`munmap`来自`t.so`. 您可以避免调用`dlclose`（这通常会使进程地址空间泄漏微不足道；请参阅`/proc/1234/maps`pid 1234 进程的文件），尤其是在您没有`dlopen`大量共享对象的情况下。

如果`t.so`插件从您的主程序调用函数，您希望该主程序与`-rdynamic`选项链接到`ld`或`gcc`

如果`t.so`是从一些 C++ 源代码编译的，它应该声明

```
 extern "C" int myfunc(int,int); 
```

因为[名称修改](http://en.wikipedia.org/wiki/Name_mangling)由`g++`

我的[manydl.c](http://starynkevitch.net/Basile/manydl.c)`dlopen`程序表明，您可以在 Linux 进程中执行数十万个-s。它的工作原理是生成“随机”C 代码，将其编译成 some `.so`，然后`dlopen`-ing 该`.so`文件，然后重复多次。

如果您不想将代码编译成`.c`插件的负担，您可以考虑使用[LLVM](http://llvm.org/)、[asmjit](http://code.google.com/p/asmjit/)、[libjit](http://freecode.com/projects/libjit)、[GNU 闪电](http://www.gnu.org/software/lightning/)等在内存中即时生成代码...`.cc``.so`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T08:00:13.980

您缺少搬迁。二进制不包含绝对地址，而是偏移量。

加载二进制文件时，操作系统通过将分配的段地址添加到二进制文件中的偏移量来重新定位函数指针（和所有其他符号）。

# mysql - mysql中的调用过程

> ID：14291382
> 
> 赞同：0
> 
> 时间：2013-01-12T07:42:54.740
> 
> 标签：mysql, sql

我有一张桌子，存放友谊，例如：

```
Friend : f_id , f_userid1 , f_userid2 , f_status . 
```

如果用户 a 是用户 b 的朋友，我只插入一行：

```
 f_userid1 = a  , f_userid2 = b 
```

我想检查我是否有这个友谊行，将状态更改为零，我已经为它创建了一个程序：

```
 BEGIN                                      
        DECLARE fid INT(15);

        -- check for first one 
        SELECT f_id INTO fid FROM f WHERE
        f_userid1 = @userid1
        AND f_userid2 = @userid2;

SET oup = 1;

        IF(fid = 0) THEN

SET oup = 2;
            -- check for SECOUND one 
            SELECT f_id INTO fid FROM f WHERE f_userid2 = @userid1 AND f_userid1 = @userid2;

        END IF;

            -- if statment

        IF(fid > 0) THEN

SET oup = 3;
            -- we need to update the exiting request
            UPDATE f SET f_userid1 = @userid1 , f_userid2 = @userid2 , f_status = 0 WHERE f_id = @fid ;

        END IF;

    END 
```

我以前也有过这样的情况

```
f_id = 1 , f_userid1 = a . f_userid2 = b , f_status = 1; 
```

它运行成功，但没有任何影响！

**我添加了输出，它只返回 1 ；**

我的问题在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:59:28.257

为什么不把它写在一个查询中呢？

```
UPDATE f
SET f_status = 0
WHERE ( f_userid1 = @userid1 AND f_userid2 = @userid2 )
   OR ( f_userid1 = @userid2 AND f_userid2 = @userid1 ); 
```

# joomla - Joomla 3.0 安装数据库创建问题

> ID：14291384
> 
> 赞同：2
> 
> 时间：2013-01-12T07:43:15.417
> 
> 标签：joomla, installation

我尝试在我的系统中安装 Joomla 3。下载并解压缩文件后，我将文件放在我的 localhost 文件夹`wamp/www/jesite/myfiles`中。之后，我运行 jesite 文件夹并显示索引页面，然后我在配置、数据库和概述部分提供相应的详细信息。

然后我在显示一个包含四个部分的窗口后按下安装按钮

首先它完成了备份旧数据库，然后它显示了创建数据库表的进度条。但之后它会长时间显示进度条，当我签入 DB 时，它会创建 78 个表。但之后它只显示进度条。

我不知道我做错了什么。任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-05T16:10:27.293

我改变 php.ini

从

```
max_execution_time = 30 
```

到

```
max_execution_time = 3000 
```

也撞上了

```
memory_limit = 256M 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-14T19:33:48.577

**正如[Giorgi BaneTishvili 在上一个答案中所建议的那样](https://stackoverflow.com/a/18617746/2779877)，在 SQL 脚本**/installation/sql/mysql/joomla.sql****中将“ENGINE=InnoDB”替换为“ENGINE=MyIsam”**也**对我**有用。**

 **我通过上传 Joomla 文件在 Strato 共享主机中安装 Joomla 3.1.5，而不是使用他们的自动安装应用程序。

我尝试使用*max_execution_time = 3000*和*memory_limit = 256M*添加一个 php.ini 文件，但它没有奏效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-13T07:36:45.327

编辑 SQL 安装文件 ( `Root/installation/SQL/mysql/joomla.sql`)。用记事本打开并全部替换`"ENGINE=InnoDB"`为`"ENGINE=MyIsam"`数据库类型，然后它将成功运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-04T15:20:52.720

我有同样的问题。转到 \installation\sql\mysql\joomla.sql 并将所有 ENGINE=InnoDB 更改为 ENGINE=MyIsam

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-29T00:13:00.663

编辑 SQL 安装文件 ( `Root/installation/SQL/mysql/joomla.sql`)。用记事本打开，全部替换`"ENGINE=InnoDB"`为`"ENGINE=MyIsam"`数据库类型，就可以成功了。

这个答案对我帮助很大，经过长时间的搜索，Joomla 没有工作，虽然我现在仍然不知道为什么我必须在脚本中进行此更改，原始脚本是否适用于其他用户如何实现 Joomla？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-09T13:26:14.727

将 max_execution_time = 30 更改为 3000 对我来说适用于 Wampserver 2.4

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-07T02:23:35.897

为了解决这个问题，我更改了数据库密码并删除了特殊字符，MySqli 是 MySql 驱动程序的改进版本，因此不建议在配置上更改此值，更改为 MyIsam 也会删除关系和事务的完整性，所以这也是一个考虑的点。因此，如果您的服务器支持 MySqli，您应该将此选项与默认的 InnoDB 引擎一起使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-16T04:48:21.730

只需设置（在 php.ini 中）

```
max_execution_time = 120 
```

在 Xwampp v3.2.1 上为我工作

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-13T03:00:15.533

我也遇到了这个问题，要解决：

1.  打开文件`installation/sql/mysql/joomla.sql`
2.  替换**`ENGINE=InnoDb`**为**`ENGINE=MyIsam`**

它工作成功。**

# yii - 如何获取登录用户的用户ID

> ID：14291387
> 
> 赞同：0
> 
> 时间：2013-01-12T07:43:38.027
> 
> 标签：yii

我想问一个问题，如果我想在`config/main.php`yii 的文件中获取任何用户的 id，那么我该如何获取呢？如果有人有想法请告诉？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:18:58.043

您的 config/main.php 用于构建您的应用程序，因此无法在其中获取仅在 Yii::app() 可用后才可用的数据。

但是你可以通过`Yii::app()->user->id;`

您可以在任何地方使用它，例如在运行 SiteController 之前执行的 Controller->init() 中。

配置后您仍然可以设置语言。

```
Yii::app()->language = Helper::getLanguageFromUser(Yii::app()->user->id); 
```

Ofc Helper 在这里是一个虚构的类，它可以是任何东西。[在此处查看示例。](http://www.yiiframework.com/wiki/26/setting-and-maintaining-the-language-in-application-i18n/)

# javascript - 我如何在条件下将 tokeninput 参数设置为动态

> ID：14291391
> 
> 赞同：0
> 
> 时间：2013-01-12T07:44:14.647
> 
> 标签：javascript, jquery, jquery-tokeninput

我正在使用 tokeninput jquery 与 asp.net 进行自动完成。

[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

我有一个文本框，搜索参数是有条件的。这个 jquery 在加载时呈现。有一个复选框，如果选中复选框，则搜索参数将更改，如果未选中复选框，则搜索参数是默认参数。我已经在就绪状态下调用了它。问题是当复选框被选中时，搜索参数没有改变。它仅搜索一个条件作为默认条件。在复选框上单击 IsPastClass 更改为真或假。

```
 $(document).ready(function() {
        $("#txtStudentTokenSearch").tokenInput("../Handlers/TestAutoCompleteHandler.ashx?SearchType=Patient&IsPastClass=false", {
            theme: "facebook",
            tokenDelimiter: "|",
            preventDuplicates: true,
            onAdd: function(item) { removeTokenDuplicate('#txtStudentTokenSearch', item); btnLoadStudent.Focus(); }
        });
}); 
```

谁能告诉我如何在条件下设置 tokeninput 参数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:02:41.227

尝试

```
$(document).ready(function() {
    $('.checkbox').change(function(){
        var IsPastClass = this.checked;
        $("#txtStudentTokenSearch").tokenInput("clear");
        $("#txtStudentTokenSearch").tokenInput("../Handlers/TestAutoCompleteHandler.ashx?SearchType=Patient&IsPastClass="+IsPastClass , {
            theme: "facebook",
            tokenDelimiter: "|",
            preventDuplicates: true,
            onAdd: function(item) { removeTokenDuplicate('#txtStudentTokenSearch', item); btnLoadStudent.Focus(); }
        });
    });
    $('.checkbox').trigger('change');
}); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T17:08:42.327

您可以非常轻松地将 tokenInput 与 ajax 和处理程序一起使用您可以从 github [https://github.com/yanivsuzana/jquery-tokeninput-ajax-asp.net-vb下载示例](https://github.com/yanivsuzana/jquery-tokeninput-ajax-asp.net-vb)

# jsf - JSF 和 Primefaces 数据网格，链接到查看页面

> ID：14291394
> 
> 赞同：0
> 
> 时间：2013-01-12T07:44:43.247
> 
> 标签：jsf, view, primefaces

我有一个名为 tours 的 jsf 页面和一个 tourController，在 tours 中，我使用 primefaces 数据网格来显示我的游览项目，并使用 commandLink 为每个项目添加视图链接。问题是当我单击链接时，它没有转到 viewTour 页面，而是显示了 tours.xhtml 的同一页面。过了一会儿，它说视图已过期，所以它似乎去了某个地方。这是我的代码：

TourController.java viewTour 方法：

```
public String viewTour(){
    current = (Tour) getItems().getRowData();
    selectedItemIndex = pagination.getPageFirstItem()+getItems().getRowIndex();
    return "ViewTour";
} 
```

tours.xhtml 数据网格：

```
<h:form id="list">
            <p:dataGrid var="item" value="#{tourController.items}" columns="4" rows="20" paginator="true">                
                <p:panel>
                    <p:panelGrid style="width: 180px; height: 200px">   
                        <f:facet name="header">
                            <p:row><p:column colspan="2"><h:outputText value="#{item.destination}"/></p:column></p:row>
                        </f:facet>
                        <p:row>
                            <p:column colspan="2" style="text-align: center">
                                <h:commandLink id="viewTour" action="#{tourController.viewTour()}" style="color: darkred; font-weight: bold">
                                    <h:outputText value="#{item.description}"/>
                                </h:commandLink>                                    
                            </p:column>
                        </p:row>                            
                        <p:row>
                            <p:column rowspan="2" style="vertical-align: middle">
                                <h:outputText value="#{item.company}"/><br/>                               
                                <h:outputText value="#{item.phone}"/><br/>
                                <a href="mailto:#{item.email}"><h:outputText value="#{item.email}"/></a><br/>
                                <a href="#{item.websiteurl}"><h:outputText value="#{item.websiteurl}"/></a>                        
                            </p:column>
                        </p:row>    
                        <p:row>
                            <p:column><p:graphicImage value="/resources/images/tours/#{item.imgurl}.jpg"/></p:column>
                        </p:row>
                    </p:panelGrid>
                </p:panel>
            </p:dataGrid>                
        </h:form> 
```

ViewTour.xhtml：

```
<h:form>
            <h:panelGrid columns="2">   
                <h:outputText value="#{bundle.ViewTourLabel_imgurl}"/>
                <h:outputText value="#{tourController.selected.imgurl}"/>
                <h:outputText value="#{bundle.ViewTourLabel_source}"/>
                <h:outputText value="#{tourController.selected.source}" title="Source"/>
                <h:outputText value="#{bundle.ViewTourLabel_destination}"/>
                <h:outputText value="#{tourController.selected.destination}" title="Destination"/>
                <h:outputText value="#{bundle.ViewTourLabel_daysno}"/>
                <h:outputText value="#{tourController.selected.daysno}" title="Duration"/>
                <h:outputText value="#{bundle.ViewTourLabel_price}"/>
                <h:outputText value="#{tourController.selected.price}" title="Price"/>
                <h:outputText value="#{bundle.ViewTourLabel_description}"/>
                <h:outputText value="#{tourController.selected.description}" title="Description"/>
                <h:outputText value="#{bundle.ViewTourLabel_date}"/>
                <h:outputText value="#{tourController.selected.date}" title="Date of Travel:">
                    <f:convertDateTime pattern="MM/dd/yyyy" />
                </h:outputText>
                <h:outputText value="To book this trip contact:"/>
                <h:outputText value="#{bundle.ViewTourLabel_phone}"/>                    
                <h:outputText value="#{tourController.selected.phone}" title="Phone:"/>
                <h:outputText value="#{bundle.ViewTourLabel_email}"/>
                <h:outputText value="#{tourController.selected.email}" title="Email:"/>                                        
                <h:outputText value="#{bundle.ViewTourLabel_purpose}"/>
                <h:outputText value="#{tourController.selected.purpose}" title="Special Purpose Tour:"/>                    
                <h:outputText value="#{bundle.ViewTourLabel_company}"/>
                <h:outputText value="#{tourController.selected.company}" title="Arranged by:"/>
                <h:outputText value="#{bundle.ViewTourLabel_websiteurl}"/>
                <h:outputText value="#{tourController.selected.websiteurl}" title="Website:"/>
                <h:outputText value="#{bundle.ViewTourLabel_rating}"/>
                <h:outputText value="#{tourController.selected.rating}"/>                    
            </h:panelGrid>                                
        </h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:55:42.390

**更新：** OP自己解决了：

*`This post helped`* [Primefaces DataGrid-CommandLink 不工作](https://stackoverflow.com/q/11985305/1317692)。*`<p:panel> tags should be inside <p:column> when all are inside a <p:datagrid> tag.`*

* * *

所以如果我是你，我会检查的事情：

我`viewTour()`想得到**正确的调用和执行**。

*   检查*ViewTour.xhtml是否与**tours.xhtml*位于同一文件夹中。如果不是，您必须指定正确的路径。
**   检查是否为*.jsf*文件正确配置了*servlet 映射。*打开位于配置文件中的*web.xml并检查**servlet 映射*是否如下所示：*

 ***`<servlet-mapping>`

```
 <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
 </servlet-mapping> 
```

可能还有许多其他问题，但这些是 IMO 最常见的问题。

*另请注意*：

如果您需要在浏览器中更新 URL 地址，则需要使用**redirect**。

要**重定向**到另一个页面，您必须使用`?faces-redirect=true`. 像这样将它附加到您的返回字符串`return "ViewTour?faces-redirect=true";`中。如果没有这个，您只使用完全在服务器端发生的**转发**机制，因此您的 URL 不会在浏览器中更新。

## 编辑

在您的情况下它不导航的原因可能是您的 bean 的**bean 范围**`tourController`。由于控制器 bean 在大多数情况下`@RequestScope`是 -d （我认为它也是你的情况），问题是你`<h:commandLink>`被放置在迭代组件中 - `<p:dataGrid>`。[JSF 将在应用请求值阶段](http://balusc.blogspot.cz/2006/09/debug-jsf-lifecycle.html)尝试查找单击`commandLink`和提交的值——它将在组件上重复。

因此，您需要确保在此阶段（与单击时）给出的组件值完全相同。

**解决方案**： 将您的 bean 放入`@ViewScope`或加载数据`@PostConstruct`。

要检查其他相关问题，请参阅JSF guru BalusC 的[这篇文章](https://stackoverflow.com/a/2120183/1317692)。***

# jboss7.x - 使用 SLSB 接口时出现 WELD 异常

> ID：14291397
> 
> 赞同：0
> 
> 时间：2013-01-12T07:45:28.940
> 
> 标签：jboss7.x, cdi, jboss-weld

我有一个在 JBoss AS 7.1.1 上运行的基于 Java EE 6 CDI 的应用程序，它也包含一些会话 Bean。

```
@Stateless
public class OrderService   {
@Inject
private Logger log;

@Inject
private EntityManager em;

    . . . . . 
```

}

一切正常，直到我不得不将我的 SLSB 公开为 SOAP Web 服务。所以我必须提供一个接口并声明 Web 服务：

```
@Stateless
@Remote(OrderServiceItf.class)
@WebService
public class OrderService implements OrderServiceItf  {

@Inject
private Logger log;

@Inject
private EntityManager em;

    . . . . .
}

@WebService
public interface OrderServiceItf  {
. . . .
} 
```

不幸的是，一旦我部署应用程序，无论我在哪里使用这个 Bean，我都会得到以下 WELD 异常： **org.jboss.weld.exceptions.DeploymentException: WELD-001408 在注入点 [[field] 带有限定符 [@Default] 的类型 [OrderService] 的不满足依赖关系] @Inject com.telco.service.SendMessageService.orderService]**

```
public class SendMessageService implements Serializable {
@Inject
private Logger logger;

int money;
@Inject OrderService orderService;

} 
```

任何帮助我该如何解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:35:19.533

You can use `@Typed(OrderService)` and you should be good. This changes the metadata for that bean and instead of being of the interface type, CDI will recognize your EJB as the concrete type.

# javascript - 如何使用 Javascript 计算 div 中的表单

> ID：14291400
> 
> 赞同：-1
> 
> 时间：2013-01-12T07:45:53.740
> 
> 标签：javascript, forms, html, cout

我对`div`.

我想计算一个中的表单元素`div`。但我不怎么办。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:48:00.737

尝试这个

```
var top_level_div = document.getElementById('id_of_first_div');
var count = top_level_div.getElementsByTagName('form').length; 
```

# android - 此 Android 权限是否会阻止我收到错误报告？

> ID：14291404
> 
> 赞同：0
> 
> 时间：2013-01-12T07:46:19.220
> 
> 标签：android, air

在我的应用程序描述符文件中有这一行：

```
<!--Removing the permission android.permission.INTERNET will have the side effect
                of preventing you from debugging your application on your device-->
<uses-permission android:name="android.permission.INTERNET"/> 
```

这是否意味着我将无法使用 Flash Builder 调试我的应用程序，或者是否意味着如果我的应用程序在用户运行时崩溃，我不会在 Google App 开发人员中心收到错误报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:52:05.837

不，不！这只是一个不会影响上述任何内容的权限。它只允许您的应用程序连接到 Internet。

但也许您的应用程序需要 Internet 才能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:55:40.537

ANR 和崩溃报告集成到操作系统中，并通过 Play 商店服务进行处理。它与您的应用程序的权限无关。

# android - onReceive 问题使用短信

> ID：14291407
> 
> 赞同：1
> 
> 时间：2013-01-12T07:46:55.510
> 
> 标签：android, methods, sms

我是 android 编程的新手，我遇到了关于广播接收器中的 onReceive() 方法的问题。我想从另一个类执行一个特定的方法，即 MainActivity.java，它具有 TurnGPSOnOff() 的方法。就像这样，每次系统接收到与共享首选项中存储的值相等的 SMS 时，如果 GPS 被禁用，GPS 将打开，反之亦然。

MainActivity.java：

```
package com.smscontrol;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.provider.Settings;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {

EditText editText1, editText2;
Button buttonSaveMem1;

 @Override

/** Called when the activity is first created. */
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

       editText1 = (EditText)findViewById(R.id.editText1);
       editText2 = (EditText)findViewById(R.id.EditText01);
       buttonSaveMem1 = (Button)findViewById(R.id.button1);

       buttonSaveMem1.setOnClickListener(buttonSaveMem1OnClickListener);

       LoadPreferences();
 }

   Button.OnClickListener buttonSaveMem1OnClickListener = new Button.OnClickListener(){

  @Override
  public void onClick(View arg0) {
   // TODO Auto-generated method stub
   SavePreferences("loc_key", editText1.getText().toString());
   SavePreferences("gps_key", editText2.getText().toString());
   Toast.makeText(getBaseContext(), "Keywords Saved.", Toast.LENGTH_SHORT).show();
   LoadPreferences();
  }

   };
   private void SavePreferences(String key, String value){
       Context context = getApplicationContext();
          AppPrefs appPrefs = new AppPrefs(context);
          appPrefs.setLoc_key(editText1.getText().toString());
          appPrefs.setGPS_key(editText2.getText().toString());
       }

       private void LoadPreferences(){
        Context context = getApplicationContext();
        AppPrefs appPrefs = new AppPrefs(context);
        String strSavedMem1 = appPrefs.getLoc_key();
        String strSavedMem2 = appPrefs.getGPS_key();
        editText1.setText(strSavedMem1);
        editText2.setText(strSavedMem2);
       }
       public void turnGPSOnOff(){

            String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
            if(!provider.contains("gps"))
            { //if gps is disabled
                final Intent poke = new Intent();
                poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider"); 
                poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
                poke.setData(Uri.parse("3")); 
                sendBroadcast(poke);
            } 
            else { //if gps is enabled
                final Intent poke = new Intent();
                poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider");
                poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
                poke.setData(Uri.parse("3")); 
                sendBroadcast(poke);    
        }

       }       
} 
```

AppPrefs.java：

```
package com.smscontrol;

import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;

public class AppPrefs {

private static final String KEYWORDS = "KEYWORDS";
private SharedPreferences appSharedPrefs;
private SharedPreferences.Editor prefsEditor;
private String gps_key = "gps_key_prefs";
private String loc_key = "loc_key_prefs";

public AppPrefs(Context context){
    this.appSharedPrefs = context.getSharedPreferences(KEYWORDS, Activity.MODE_PRIVATE);
    this.prefsEditor = appSharedPrefs.edit();
    }

public String getGPS_key() {
    return appSharedPrefs.getString(gps_key, null);
    }

public void setGPS_key(String _gps_key) {
    prefsEditor.putString(gps_key, _gps_key).commit();
    }

public String getLoc_key() {
    return appSharedPrefs.getString(loc_key, null);
    }

public void setLoc_key(String _loc_key) {
    prefsEditor.putString(loc_key, _loc_key).commit();
    } 
```

}

短信监听器.java：

```
package com.smscontrol;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SmsListener extends BroadcastReceiver {
    MainActivity Activity = new MainActivity();
    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

    AppPrefs appPrefs = new AppPrefs(context);
    String strSavedMem1 = appPrefs.getLoc_key();
    String strSavedMem2 = appPrefs.getGPS_key();

    if(intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")){

        Bundle bundle = intent.getExtras();           //---get the SMS message passed in---
        SmsMessage[] msgs = null;

        String str = "";

        if (bundle != null){
            //---retrieve the SMS message received---
            try{
                Object[] pdus = (Object[]) bundle.get("pdus");
                msgs = new SmsMessage[pdus.length];
                for(int i=0; i<msgs.length; i++){
                    msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                    str = msgs[i].getMessageBody().toString();

                    if (str.equals(strSavedMem1)){
                        Toast.makeText(context, "LOCATE", Toast.LENGTH_SHORT).show();
                    } else if (str.equals(strSavedMem2)){ 
                         Toast.makeText(context, "GPS", Toast.LENGTH_SHORT).show();
                    }
                }
            }catch(Exception e){
//                            Log.d("Exception caught",e.getMessage());
            }

        }
    }
} 
```

}

任何建议或帮助都可以。我论文的一部分急需。谢谢！

# ruby-on-rails - 从 youtube 登录 OAuth 保存用户的性别和位置

> ID：14291409
> 
> 赞同：0
> 
> 时间：2013-01-12T07:47:32.000
> 
> 标签：ruby-on-rails, api, youtube-api, oauth-2.0, omniauth

我使用 OAuth2 设置了 youtube 登录，并且在成功注册用户后，我想将用户的性别和位置保存在数据库中。

检查 OAuth 文档[https://developers.google.com/accounts/docs/OAuth2Login#userinfocall](https://developers.google.com/accounts/docs/OAuth2Login#userinfocall) 您可以看到您可以访问用户的性别和位置以及姓名、电子邮件和他们的个人资料图片等信息。

下面是我将用户信息保存到数据库的代码

用户.rb

```
def self.from_omniauth(auth)
    where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
      user.provider = auth.provider
      user.uid = auth.uid
      user.name = auth.info.name
      user.email = auth.info.email
      user.picture = auth.info.image
      user.gender = auth.info.gender
      user.country = auth.info.locale
      user.oauth_token = auth.credentials.token
      user.oauth_expires_at = Time.at(auth.credentials.expires_at)
      user.save! 
      end
     end 
```

但使用 auth.info.USER_INFO 配置似乎不会将这些值保存到数据库中。我错过了什么吗？

这是我的应用程序要求的参数，没有任何范围。 ![在此处输入图像描述](../Images/c590513713ffd9551f92c21ea5aa4dbf.png)

更新

我通过为 userinfo.profile 参数传入一个额外的范围来实现这一点。请记住包含完整的网址，其中没有逗号，以空格分隔。

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :youtube, YOUTUBE_KEY, YOUTUBE_SECRET, { :scope => "https://www.googleapis.com/auth/userinfo.profile https://gdata.youtube.com", access_type: 'offline', approval_prompt: '' }
end 
```

这获得了以下权限 ![在此处输入图像描述](../Images/32a7afce28d27e429749746812989f2c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:15:50.167

您可以在要求 OAuth 范围的地方发布代码吗？我的猜测是您没有要求配置文件范围。看看这个网站：

[https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

如果您只是使用 YouTube 示例代码，您可能不会要求配置文件范围：

[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)

当您点击 auth 页面时，您可以判断您是否要求此范围，因为 auth 页面会显示如下内容：

“Google OAuth 2.0 Playground 正在请求以下权限：查看有关您帐户的基本信息查看您的姓名、公开个人资料 URL 和照片查看您的性别和出生日期查看您的国家、语言和时区”

我附上了截图。![在此处输入图像描述](../Images/639f0c7e1d8e7e94989ed57c4263e7bb.png)如果您没有看到此内容，请查看您在哪里配置您的范围并将其添加到 OAUth 范围列表以进行授权。

# google-app-engine - gwt 组件不呈现

> ID：14291410
> 
> 赞同：-1
> 
> 时间：2013-01-12T07:47:32.297
> 
> 标签：google-app-engine, gwt

在我们昨天部署到 google app engine for java 之后，gwt 组件突然停止了渲染。

我们已经尝试了很多次。在调查萤火虫时，我看到了

错误：访问属性“文档”的权限被拒绝 [http://1-ps.googleusercontent.com/x/s.sakshumweb-hrd.appspot.com/www.sakshum.org/sakshumwebgae/B365B696BAAE7DD00F53BC81F86AF51C.cache.html](http://1-ps.googleusercontent.com/x/s.sakshumweb-hrd.appspot.com/www.sakshum.org/sakshumwebgae/B365B696BAAE7DD00F53BC81F86AF51C.cache.html) 第 2860 行

我不确定为什么会这样。有人可以建议吗

允许的静态文件是

```
<static-files>
        <include path="/**.xml" expiration="30d 1h" />
        <include path="/**.txt" expiration="30d 1h" />
        <include path="/**.html" expiration="30d 1h" />
        <include path="/favicon.ico" expiration="30d 1h"/>
        <include path="/**.ico" expiration="30d 1h" />
    <include path="/**.js" expiration="30d 1h" />
    <include path="/**.css" expiration="30d 1h" />
    <include path="/**.gif" expiration="30d 1h" />
    <include path="/**.JPG" expiration="30d 1h" />
    <include path="/**.jpg" expiration="30d 1h" />
    <include path="/**.jpeg" expiration="30d 1h" />
    <include path="/**.png" expiration="30d 1h" />
     <include path="/**.htc" expiration="30d 1h" />
     <include path="*.nocache." expiration="0s" />
     <include path="*.cache." expiration="365d" />
     <exclude path="**.gwt.rpc" />
</static-files> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T12:44:48.293

`.cache.js`是跨域加载的（从到`www.sakshum.org`。URL`1-ps.googleusercontent.com`中的*ps*可能代表 Page Speed，它会重写指向静态资产的链接。

我不知道它在 GAE/J 上是如何工作的，但要么禁用 Page Speed（如果可能），要么使用`xsiframe`链接器重新编译您的应用程序（在您的 中`gwt.xml`）：

`<add-linker name="xsiframe" />`

# php - MySQL查询未更新但PHP未显示错误

> ID：14291413
> 
> 赞同：0
> 
> 时间：2013-01-12T07:48:11.820
> 
> 标签：php, login, registration

这是为了用户激活。

```
function activate($email, $email_code){
    $email = mysql_real_escape_string($email);
    $email_code = mysql_real_escape_string($email_code);

    if (mysql_result(mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `email` = '$email' AND `email_code` = '$email_code' AND `active` = 0"), 0) == 1){
        mysql_query("UPDATE `users` SET `active` = 1 WHERE `email` = '$email'");
        return true;
    }else{
        return false;
    }
} 
```

激活.php

```
if (isset($_GET['success']) === true && empty($_GET['success'])===true){
    echo 'Account activated!';
}
else if (isset($_GET['email'], $_GET['email_code']) === true){

    $email = trim($_GET['email']);
    $email_code = trim($_GET['email_code']);

    if(email_exists($email) === false){
        $errors[] = 'Oops, something went wrong!';
    }else if (activate($email, $email_code === false)){
        $errors[] = 'We have problems activating your account!';
    }
    if (empty($errors) === false){
        echo output_errors($errors);
    }else{
        header('Location:activate.php?success');
        exit();
    }
}else{
    header('Location:go.php');
    exit();
} 
```

它说“帐户已激活！” 正如我回应的那样，但它并没有改变表中的字段。基本没有激活。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:50:57.463

您必须像这样更改功能

```
function activate($email, $email_code){
$email = mysql_real_escape_string($email);
$email_code = mysql_real_escape_string($email_code);

if (mysql_result(mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `email` = '$email' AND `email_code` = '$email_code' AND `active` = 0"), 0) == 1){
    if(mysql_query("UPDATE `users` SET `active` = 1 WHERE `email` = '$email'")){
        return true;
        }
  else{
    return false;
    }
  }
} 
```

# php - 使用 Javascript 或 HTML 发布安全 SSL 登录

> ID：14291418
> 
> 赞同：0
> 
> 时间：2013-01-12T07:48:46.593
> 
> 标签：php, javascript, post, ssl, login

只是想知道哪个对于安全登录的 POST 数据更安全。我正在使用 SSL 来保护传输中的数据，并使用 phpass 来管理密码服务器端的散列和加盐。

基本上，

任何一个，

```
<form action="user-man.php" method="POST">
Username:<br>
<input type="text" name="user" size="60"><br>
Password:<br>
<input type="password" name="pass" size="60"><br>
<input type="submit" value="Create user">
</form> 
```

**或者**

```
// DEFINE FUNCTION TO REQUEST TO PORTAL PHP FILE HANDLING REQUESTS
function phpRequest( command, username, password )
{
    if( command == "tryLogin" )
    {   
        $.ajax({ 
        type: "POST",
        url: 'open.php',
        data: { request: command, user: username, pass: password },
        success: function( data, textStatus, jqXHR )
        {           
            alert(data);
        }
        }); 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T07:50:39.773

安全性是一样的。无论您使用 JavaScript 还是 HTML 表单都没有区别，相同类型的请求会发送到服务器。

一切都使用 HTTPS。

# playframework - Play!framework 中 GenericModel.findAll 的实现在哪里？

> ID：14291420
> 
> 赞同：1
> 
> 时间：2013-01-12T07:49:02.640
> 
> 标签：playframework

我只看到这个：

```
 /**
     * Find all entities of this type
     */
    public static <T extends JPABase> List<T> findAll() {
        throw new UnsupportedOperationException("Please annotate your JPA model with @javax.persistence.Entity annotation.");
    } 
```

它的实现在哪里？我的意思是，这些 SQL 序列放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:54:52.857

此代码在适用于所有 JPA 实体的 JPAEnhancer 类中定义：

```
public class JPAEnhancer extends Enhancer {

    public void enhanceThisClass(ApplicationClass applicationClass) throws Exception {
        CtClass ctClass = makeClass(applicationClass);
     ...
        // findAll
        CtMethod findAll = CtMethod.make("public static java.util.List findAll() { return play.db.jpa.JPQL.instance.findAll(\"" + entityName + "\"); }", ctClass);
        ctClass.addMethod(findAll);
    ... 
} 
```

# java - 瓷砖可以有动作类吗？

> ID：14291422
> 
> 赞同：3
> 
> 时间：2013-01-12T07:49:26.313
> 
> 标签：java, struts2, tiles, struts2-tiles-plugin

在 Stuts2 中，我使用 Tiles 插件为网站（菜单、页脚、页眉等）创建在每个页面上都一致的布局。

现在每个图块只是一个静态 HTML 内容。

是否可以通过例如使 Tile 更具动态性。`Footer`每次要渲染页脚时调用一个动作类？例如：从数据库中获取页脚内容。

如果我要在我的应用程序的每个页面的操作类中执行此操作，这将产生一个非常不可用的代码......

所以也许从 Tile 的角度来看是可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:02:44.903

试试下面的代码：

```
$('#footer').load('your/action/with/namespace'); 
```

我假设您`footer`使用 id `footer`，每次打开页面时，都会调用您的页脚操作类，并且可以动态获取数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T21:03:18.977

[对于低于 2.2.2 的磁贴版本，只有一种方法可以满足您的要求，那就是使用 "preparer"](http://tiles.apache.org/tutorial/advanced/preparer.html)。

然而，这不是与 struts2 的集成，而是意味着它自己的准备者将访问服务层以获取视图所需的内容，并且所有这些内容都需要通过图块属性进行设置。

使用 2.2.2 及更高版本的磁贴：您可以在磁贴属性中使用 OGNL 表达式，这可以允许访问某些 struts2 交互以及静态方法访问。使用静态方法访问，您可以调用一个方法来返回您想要的字符串。创建这样的字符串与编写脚本相当。

要升级，您需要手动覆盖一些 jar 以获取 tile 2.2.2，或者要获取版本 3，您需要实现自己的结果类型：[如何将 Struts 2 与 Tiles 3 集成](https://stackoverflow.com/questions/13337938/how-to-integrate-struts-2-with-tiles-3)。

* * *

我目前实际上不推荐上述任何一种方法，推荐使用tile 3，但不能作为做像编写scriptlet 这样糟糕的事情的借口。正如 David 所提到的那样，在 tile 中使用 s:action 标签可能会更好，或者使用 Jaiwo99 提到的 Ajax 方法可能会更好。原因是这两种方法都与 struts2 保持一致，而我介绍的方法不寻常且更难维护。就我个人而言，我倾向于使用 ajax 方法。

Struts2 和 struts2-json-plugin 使得创建 json 服务变得非常简单。Tiles 是一个很好的减少样板的系统。如果 ajax 被大量使用，两者真的可以相互补充。您可以制作很多可重用的 ajax 组件，只要确保不要对操作的 url 进行硬编码。始终使用 s:url 标记并将其分配给 JS 变量。

# javascript - 我如何找到里面的文字由双方选择身份证和 使用 jQuery 的价值？

> ID：14291426
> 
> 赞同：1
> 
> 时间：2013-01-12T07:50:18.527
> 
> 标签：javascript, jquery, text

我已经进行了一些搜索，但我对 JavaScript 和 jQuery 很陌生，似乎无法弄清楚如何去做（或者甚至可能）。基本上，我有两个选择菜单和一个关联值，每个选择与文本不同，但选择之间相同：

```
<select id="day1Breakfast">
<option value="">Select One</option>
<option value="bec">Bacon Egg and Cheese</option>
<option value="muf">Muffin</option>
<option value="bag">Bagel</option>
</select>

<select id="day2Breakfast">
<option value="">Select One</option>
<option value="bec">Bacon Egg and Cheese</option>
<option value="muf">Muffin</option>
<option value="bag">Bagel</option>
</select> 
```

我需要做的是使用基于 SELECT ID 和 OPTION VALUE 的选择文本填充另一个 div。例如，如果有人从 day2Breakfast SELECT 中选择了“Muffin”，我想提醒（“您选择了第 2 天的 Muffin”）。我知道我可以使用它从具有某些 ID 的 div 中查找文本：

```
document.getElementById("day1Breakfast").text() 
```

但这将返回“培根蛋和奶酪松饼百吉饼”。我只需要检索与特定 SELECT ID 和 OPTION VALUE 关联的文本。

非常感谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T07:51:38.513

您正在寻找元素`.value`（在 vanilla JavaScript 中），并且`.val()`在 jQuery 中。此外，要获取所选值的文本，只需`option:selected`在元素内请求 all：

```
// Event delegation on all select elements
$("select").on("change", function (e) {
  // When a select changes, find the selection option
  // Also, get the ID of the select element that changed
  var selected = $(this).find("option:selected"),
      fromElem = $(this).prop("id");
  // Output the new selected text, value, and ID of affected select
  console.log( selected.text(), selected.val(), fromElem );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:54:14.880

你想要这样的东西，

```
$("#day1Breakfast option[value='bec']").text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:55:58.353

```
 <script type="text/javascript">
function fnc(myid,myvalue)
{
    alert("you've chosen "+myvalue+" from "+myid);
}
</script>

<select id="day1Breakfast" onChange="fnc(this.id,this.value)">
<option value="">Select One</option>
<option value="bec">Bacon Egg and Cheese</option>
<option value="muf">Muffin</option>
<option value="bag">Bagel</option>
</select>

<select id="day2Breakfast" onChange="fnc(this.id,this.value)">
<option value="">Select One</option>
<option value="bec">Bacon Egg and Cheese</option>
<option value="muf">Muffin</option>
<option value="bag">Bagel</option>
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T08:01:11.883

我稍微修改了你的html。见演示[http://jsfiddle.net/j6HU6/8/](http://jsfiddle.net/j6HU6/8/)

HTML：

```
<select class="menu" name="day 1">
<option value="">Select One</option>
<option value="bec">Bacon Egg and Cheese</option>
<option value="muf">Muffin</option>
<option value="bag">Bagel</option>
</select>

<select class="menu" name="day 2">
<option value="">Select One</option>
<option value="bec">Bacon Egg and Cheese</option>
<option value="muf">Muffin</option>
<option value="bag">Bagel</option>
</select> 
```

JS：

```
$('.menu').change(function(){
  alert('You chose ' + $(this).children('option:selected').text() + ' for ' + $(this).attr('name'));    
}); 
```

# database - 具有固定大小的键和值的基于磁盘的 B+-tree 实现

> ID：14291428
> 
> 赞同：4
> 
> 时间：2013-01-12T07:50:50.023
> 
> 标签：database, data-structures, relational-database, b-tree

是否有任何库提供基于磁盘的 B+-tree 实现，专门设计用于所有键具有固定大小且所有值也具有固定大小（不一定与键具有相同的固定大小）的场景？

**注意：**是的，我想实现另一个玩具，概念验证 RDBMS。我不使用 SQL DBMS是[有充分理由的。](http://meaningfulcomputing.wordpress.com/2013/01/10/multiple-indirection-foreign-keys/)**笔记结束。**

我并不特别介意这个库是用什么语言编写的。但是，我确实对库的功能有一些特定的要求。为了清楚起见，这些要求将通过用 C 编写的示例来说明。

该库必须足够灵活，以允许我使用自己的比较函数。例如：

```
struct comparer
{
    void * extra;
    int (*function)(
        void *, // closure over extra
        char *, // 1st value to be compared
        char *  // 2nd value to be compared
    );
}; 
```

应该如何操作索引文件的机制由所有键的固定长度、所有值的固定长度以及键的比较函数定义。例如：

```
struct index_spec
{
    size_t keylen, vallen;  // fixed lengths for keys and values
    struct comparer comp;   // comparison function for keys
}; 
```

如果库建立了可查询索引和可更新索引之间的区别，以及在预期可查询索引时使用可更新索引的机制，这将是一个非常好的接触（尽管不是强制性的），但不是相反。例如：

```
struct queryable_index
{
    struct index_spec spec;
    FILE * file;            // opened in read mode
};

struct updateable_index
{
    struct index_spec spec;
    FILE * file;            // opened in read/write mode
};

struct queryable_index open_queryable_index
    (struct index_spec, const char *);

struct updateable_index open_updateable_index
    (struct index_spec spec, const char * filename);

struct queryable_index just_queryable_index
    (struct updateable_index index)
{
    struct queryable_index result;
    result.spec = index.spec;
    result.file = index.file;
    return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T12:53:11.243

我所知道的最好的实现是[Berkeley DB](http://www.oracle.com/technetwork/products/berkeleydb/overview/index.html)。它是一个高性能的嵌入式数据库系统，具有非常好的 B-tree 实现，由 Sleepycat 开发，后来被 Oracle 收购。

它是用 C 语言编写的，支持您所追求的使用场景。它是开源的，如果您想构建自己的实现，代码是寻找灵感的好地方。

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-11T16:21:30.217

LevelDB： *“leveldb 库提供了一个持久的键值存储。键和值是任意字节数组。键在键值存储中根据用户指定的比较器函数进行排序。”*

[https://github.com/google/leveldb/blob/master/doc/index.md](https://github.com/google/leveldb/blob/master/doc/index.md)

# ubuntu - 使用 udev 更改 ttyUSB 权限

> ID：14291431
> 
> 赞同：2
> 
> 时间：2013-01-12T07:51:18.163
> 
> 标签：ubuntu, tty, udev

我的程序需要在`ttyUSB`没有root权限的情况下访问。

如您所知，我尝试更改它`chmod 777 /dev/ttyUSB0`，当我重新启动时，此权限更改为默认值。如何为此配置我的 udev rules.d？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:40:55.107

`ttyUSB*`在目录中查找`rules.d`并将其更新为如下所示：

```
KERNEL=="ttyUSB*", MODE="0777" 
```

保留您在该行中找到的任何其他条目不变，如果不存在则添加模式属性。

# python - 如何更新 tkinter 标签中的图像？

> ID：14291434
> 
> 赞同：2
> 
> 时间：2013-01-12T07:51:56.483
> 
> 标签：python, tkinter

我是 python 的初学者，所以这可能是一个太简单的问题，但我需要帮助。使用此代码，我无法更新 tkinter 标签中的图像。我什至可以根据新加载的图像的属性调整窗口大小，但新图像不会显示在 tkinter 标签中。

```
from Tkinter import Frame, Tk, Label, Text, Menu, END, BOTH, StringVar
from PIL import ImageTk, Image
import numpy
import tkFileDialog

class DIP(Frame):
    def __init__(self, parent):
        Frame.__init__(self, parent) 
        self.parent = parent        
        self.initUI()

def initUI(self):

    self.parent.title("DIP Algorithms- Simple Photo Editor")
    self.pack(fill=BOTH, expand=1)

    menubar = Menu(self.parent)
    self.parent.config(menu=menubar)

    #Open Image Menu
    fileMenu = Menu(menubar)
    fileMenu.add_command(label="Open", command=self.onOpen)
    menubar.add_cascade(label="File", menu=fileMenu)

    #menu for image ngative
    basicMenu=Menu(menubar)
    basicMenu.add_command(label="Negative", command=self.onNeg)
    menubar.add_cascade(label="Basic", menu=basicMenu)

#Image Negative Menu callback
def onNeg(self):
    I2=255-self.I;
    im = Image.fromarray(numpy.uint8(I2))
    photo2=ImageTk.PhotoImage(im)
    self.label2= Label(self.parent,border=25,image=photo2)
    self.label2.image = photo2 # keep a reference!
    self.label2.grid(row=1, column=2)

def setImage(self):

    self.img=Image.open(self.fn)
    self.I = numpy.asarray(self.img)
    l,h = self.img.size
    text=str(2*l+100)+"x"+str(h+50)+"+0+0"
    self.parent.geometry(text)
    photo = ImageTk.PhotoImage(self.img)
    self.label1 = Label(self.parent,border=25,image=photo)
    self.label1.configure(image=photo)
    self.label1.image = photo # keep a reference!
    self.label1.grid(row=1, column=1)

#Open Callback
def onOpen(self):

    ftypes = [('Image Files', '*.tif *.jpg *.png')]
    dlg = tkFileDialog.Open(self, filetypes = ftypes)
    filename = dlg.show()
    self.fn=filename
    #print self.fn #prints filename with path here
    self.setImage()

#def onError(self):
    #box.showerror("Error", "Could not open file")    

def main():

    root = Tk()
    DIP(root)
    root.geometry("320x240")
    root.mainloop()  

if __name__ == '__main__':
    main() 
```

当我运行此代码并打开图像时，它会显示在 label1 中。但是当我再次打开另一个图像时，我希望它会显示在同一个 label1 中，但它没有发生。我知道第二张图片已加载，因为窗口大小相应调整，唯一的问题是它没有被显示，我不知道为什么！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T11:16:50.477

`tk.Label`而不是每次调用都创建一个新`setImage`的，只需在外部创建一次`setImage`- 例如，在`initUI`.

然后，您可以通过调用更改图像`self.label.configure`：

* * *

```
import Tkinter as tk
import Image
import ImageTk
import numpy as np
import tkFileDialog

class DIP(tk.Frame):
    def __init__(self, parent):
        tk.Frame.__init__(self, parent) 
        self.parent = parent        
        self.initUI()

    def initUI(self):
        self.parent.title("DIP Algorithms- Simple Photo Editor")
        self.pack(fill = tk.BOTH, expand = 1)

        menubar = tk.Menu(self.parent)
        self.parent.config(menu = menubar)

        self.label1 = tk.Label(self, border = 25)
        self.label2 = tk.Label(self, border = 25)
        self.label1.grid(row = 1, column = 1)
        self.label2.grid(row = 1, column = 2)

        #Open Image Menu
        fileMenu = tk.Menu(menubar)
        fileMenu.add_command(label = "Open", command = self.onOpen)
        menubar.add_cascade(label = "File", menu = fileMenu)

        #menu for image ngative
        basicMenu = tk.Menu(menubar)
        basicMenu.add_command(label = "Negative", command = self.onNeg)
        menubar.add_cascade(label = "Basic", menu = basicMenu)

    def onNeg(self):
        #Image Negative Menu callback
        I2 = 255-self.I;
        im = Image.fromarray(np.uint8(I2))
        photo2 = ImageTk.PhotoImage(im)
        self.label2.image = photo2 # keep a reference!

    def setImage(self):
        self.img = Image.open(self.fn)
        self.I = np.asarray(self.img)
        l, h = self.img.size
        text = str(2*l+100)+"x"+str(h+50)+"+0+0"
        self.parent.geometry(text)
        photo = ImageTk.PhotoImage(self.img)
        self.label1.configure(image = photo)
        self.label1.image = photo # keep a reference!

    def onOpen(self):
        #Open Callback
        ftypes = [('Image Files', '*.tif *.jpg *.png')]
        dlg = tkFileDialog.Open(self, filetypes = ftypes)
        filename = dlg.show()
        self.fn = filename
        #print self.fn #prints filename with path here
        self.setImage()

    #def onError(self):
        #box.showerror("Error", "Could not open file")    

def main():

    root = tk.Tk()
    DIP(root)
    root.geometry("320x240")
    root.mainloop()  

if __name__ == '__main__':
    main() 
```

# android - 通过通知操作复制到剪贴板

> ID：14291436
> 
> 赞同：3
> 
> 时间：2013-01-12T07:52:19.760
> 
> 标签：android, android-intent, android-notifications

我正在尝试执行通知操作（适用于 Android 4.1+），它将一些文本复制到剪贴板。我阅读了有关复制粘贴功能的参考资料，现在我有了这个：

```
 ClipboardManager clipboard = (ClipboardManager)
            mContext.getSystemService(Context.CLIPBOARD_SERVICE);
    ClipData clip = ClipData.newPlainText("simple text","Hello, World!"); 
```

我不知道如何将其放入将放入 PendingIntent 的 Intent 中。

如果你能给我一些例子并解释一下——那就太好了！我是android开发的新手。先感谢您。

*编辑：* 我发现了这个：[https](https://stackoverflow.com/a/12601766/1866009) ://stackoverflow.com/a/12601766/1866009但我没有正确理解。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T15:12:36.360

With [android developer](https://stackoverflow.com/a/14293006/1866009)'s help the problem was solved by this code:

```
 BroadcastReceiver brCopy = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            ClipboardManager clipboard = (ClipboardManager)
                    mContext.getSystemService(Context.CLIPBOARD_SERVICE);
            ClipData clip = ClipData.newPlainText("label", "text");
            clipboard.setPrimaryClip(clip);
            Toast.makeText(mContext, "Copied!", Toast.LENGTH_SHORT).show();

        }
    };
    IntentFilter intentFilter = new IntentFilter("com.example.ACTION_COPY");
    mContext.registerReceiver(brCopy, intentFilter);

    Intent copy = new Intent("com.example.ACTION_COPY");
    PendingIntent piCopy = PendingIntent.getBroadcast(mContext, 0, copy, PendingIntent.FLAG_CANCEL_CURRENT);

    mBuilder.addAction(android.R.drawable.ic_menu_copy, "Copy", piCopy); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T11:44:36.113

查看有关 android 通知操作的本教程：

[http://www.vogella.com/articles/AndroidNotifications/article.html](http://www.vogella.com/articles/AndroidNotifications/article.html)

在创建 pendingIntent 时，给它一个自定义意图，该意图将由您的 broadcastReceiver 接收（在您的清单中定义，[此处](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)的示例），然后用它做任何您想做的事情（例如复制到剪贴板）。

# c++ - clang++ - 将模板类名视为类范围内的模板

> ID：14291438
> 
> 赞同：4
> 
> 时间：2013-01-12T07:52:29.940
> 
> 标签：c++, templates, clang++

似乎clang ++（我尝试过clang 3.2）将模板类的名称视为实例化类，而不是类范围内任何出现的模板。例如，以下代码

```
template <template <class> class T>
class A {};

template <typename T>
class B {
    A<B> member;
   // ^---- clang++ treats B as an instantiated class
         // but I want it to be a template here
         // this code could compile in g++
};

int main()
{
    B<int> b;
    return 0;
} 
```

我应该怎么做才能编译它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T08:05:24.837

# C++03

解决`B`这种方式（称为*注入类名称*，每个类的隐式声明的成员，包括模板实例化）是为了方便。我从来没有见过它像这样挡道！

要解决此问题，请通过在名称`::`之前添加来限定名称（如有必要，添加名称空间的名称）。

```
template <typename T>
class B {
    A< ::B> member; // whitespace required to prevent digraph; see comments
}; 
```

# C++11

C++11 §14.6.1/1 指定（强调我的）

> 像普通（非模板）类一样，类模板有一个注入类名（第 9 条）。注入的类名可以用作模板名或类型名。当它与模板参数列表一起使用时，**作为模板模板参数的模板参数，**或作为朋友类模板声明的详细类型说明符中的最终标识符，**它指的是类模板本身.** 否则，它相当于模板名称后跟 <> 中包含的类模板的模板参数。

因此，如果在 C++11 下出现此问题，则它是编译器错误。解决方法如上。

注意——为了比较，C++03 中对应的段落是

> 与普通（非模板）类一样，类模板有一个注入类名（第 9 条）。注入的类名可以与模板参数列表一起使用，也可以不与模板参数列表一起使用。当它在没有模板参数列表的情况下使用时，它等效于注入的类名后跟 <> 中包含的类模板的模板参数。当它与模板参数列表一起使用时，它指的是指定的类模板特化，可以是当前特化或另一个特化。

如您所见，已经有一种特殊情况允许标识符是类或模板，这取决于它是否出现在模板名称中。他们只是增加了几个案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T12:00:24.043

这是 C++11 的不一致行为，因为 C++11 表示注入的类名（这是在类主体中自动声明的名称）在传递给模板模板参数时是一个模板。所以你的代码应该只在 C++03 实现中失败。

但是，现在无需打开有关此问题的错误报告。我已经这样做了。

# ios - NSFetchedResultsController 未接收到新对象

> ID：14291439
> 
> 赞同：0
> 
> 时间：2013-01-12T07:52:30.417
> 
> 标签：ios, xcode, core-data, nsfetchedresultscontroller

我正在尝试更新一个`UITableView`名为“HomeViewController”的视图以显示我添加的新对象。但是`NSFetchedResultsController`在我创建完一个新的之后不会更新。我在各种文档中有以下代码：

HomeViewController.h

```
- (void)saveNewShindyToDatabaseForName:(NSString *)name
                               details:(NSString *)details
                           dateAndTime:(NSDate *)dateAndTime
                              location:(CLLocation *)location
                            timePosted:(NSDate *)postedTime
{

    if (!self.shindysDatabase) {
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        self.shindysDatabase = [[UIManagedDocument alloc] initWithFileURL:url];
    }

    dispatch_queue_t saveQ = dispatch_queue_create("Shindy Creator", nil);
    dispatch_async(saveQ, ^{
        [self.shindysDatabase.managedObjectContext performBlock:^{
            [Shindy setupShindyForSaveToDatabaseForName:name
                                                details:details
                                            dateAndTime:dateAndTime
                                               location:location
                                             timePosted:postedTime
                                 inManagedObjectcontext:self.shindysDatabase.managedObjectContext];
        }];
    });

    NSError *error = nil;
    if (![self.shindysDatabase.managedObjectContext save:&error]) {
        NSLog(@"%@", error.userInfo);
    }
}

- (void)setupFetchedResultsController
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Shindy"];
    NSSortDescriptor *nameSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];
    NSSortDescriptor *photoSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"photo" ascending:YES];
    NSSortDescriptor *detailSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"details" ascending:YES];
    NSSortDescriptor *dateAndTimeSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"dateAndTime" ascending:YES];
    NSSortDescriptor *timePostedSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"timePosted" ascending:YES];
    request.sortDescriptors = [NSArray arrayWithObjects:nameSortDescriptor, photoSortDescriptor, detailSortDescriptor, dateAndTimeSortDescriptor, timePostedSortDescriptor, nil];

    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.shindysDatabase.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];
} 
```

Shindy+SQL.m（`NSManagedObject`实体的子类，“Shindy”）

```
+ (Shindy *)setupShindyForSaveToDatabaseForName:(NSString *)name
                               details:(NSString *)details
                           dateAndTime:(NSDate *)dateAndTime
                              location:(CLLocation *)location
                            timePosted:(NSDate *)postedTime
                inManagedObjectcontext:(NSManagedObjectContext *)context
{
    Shindy *shindy = [NSEntityDescription insertNewObjectForEntityForName:@"Shindy" inManagedObjectContext:context];

    __block NSString *nameString = name;
    __block FBProfilePictureView *profileImage = nil;

    if (FBSession.activeSession.isOpen) {
        [[FBRequest requestForMe] startWithCompletionHandler:
         ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
             if (!error) {
                 nameString = user.name;
                 profileImage.profileID = user.id;
             }
         }];
    }

    NSData *imageData = nil;

    for (NSObject *obj in [profileImage subviews]) {
        if ([obj isMemberOfClass:[UIImageView class]]) {
            UIImageView *objImg = (UIImageView *)obj;
            imageData = UIImagePNGRepresentation(objImg.image);;
            break;
        }
    }

    shindy.name = name;
    shindy.dateAndTime = dateAndTime;
    shindy.timePosted = postedTime;
    shindy.details = details;
    shindy.photo = imageData;

    return shindy;
} 
```

该方法`- (void)setupFetchedResultsController:`在最初加载视图时调用（但不在`viewDidLoad`or`viewWillAppear`方法中）。一旦用户完成输入数据，我的`- (void)saveNewShindyToDatabaseForName:`函数就会在单独的视图控制器中调用。换句话说，它是公共 API，但`NSManagedObjectContext`仍保留在`HomeViewController`for 委托中。此外，我的代码的代表和数据源设置正确。

我试图强制每一种获取；无论是通过 managedObjectContext 还是 fetchedResultsController。我还在`NSLog`代码的各个位置设置了一个，以确保数据通过`HomeViewController`. 我还设置了另一个`NSLog`以确保 fetchedResultsController 和 managedObjectContext 都不是`nil`。

一切似乎都已检查，并且我没有从我的代码中当前的其他默认错误中得到任何类型的错误。

我担心这与`NSSortDescriptor`我的`- (void)setupFetchedResultsController:`方法中的 s 有关系，但我也尝试以各种方式配置它们，但无济于事。我的 managedObjectContext 和我的 fetchedResultsController 也有明确的联系，所以这不是问题。

我只是用完了可以尝试的东西。或许，这里有人有一些见识。

**对于jrturton...**

`- (void)saveNewShindyToDatabaseForName:`在最初的所有代码之后，我已经在我的方法中实现了以下代码。它看起来像这样：

```
- (void)saveNewShindyToDatabaseForName:(NSString *)name
                               details:(NSString *)details
                           dateAndTime:(NSDate *)dateAndTime
                              location:(CLLocation *)location
                            timePosted:(NSDate *)postedTime
{
    // All of the code originally in this method is here...

    if ([self.fetchedResultsController managedObjectContext] == self.shindysDatabase.managedObjectContext) {
        NSLog(@"MOC's are the same.");
    }

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Shindy"];
    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"details" ascending:YES];
    request.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

    NSError *error = nil;
    NSArray *detailsArray = [self.shindysDatabase.managedObjectContext executeFetchRequest:request error:&error];

    if (error) {
        NSLog(@"error: %@", error.userInfo);
    }

    NSLog(@"details: %@", detailsArray);
} 
```

所有这些返回的是，要回答您的第二个可能的答案，MOC 肯定是相同的。然而，新对象似乎并没有真正保存到 Core Data 中。或者我没有正确地将它们拉回来。

我能想到的在不出现无法识别的选择器错误的情况下记录我的核心数据内部的唯一方法是为正确的实体创建一个新请求，然后执行一个提取，然后记录该提取的结果，在这个情况下，什么也没返回。

我将假设我的问题在于我的代码没有将新对象保存到 Core Data。话虽如此，您能否识别出我没有将这些对象正确保存到我的上下文中以便可以将其放入我的核心数据模型中以供以后检索的任何地方？或者我是否需要设置不同的方法，而不是请求将保存到我的核心数据中的内容记录下来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:30:18.670

可能的问题：

1.  没有获取结果控制器委托（好的，根据评论解决）。
2.  FRC 可能在您拥有数据库之前设置（您在第一种方法中创建一个新数据库，但说 FRC 是在此之前设置的 - 它们是否具有相同的 MOC 对象？
3.  多线程地狱 - 您的 MOC 保存调用将在调用方法的块之前执行，该方法调用通过完成块的方法（呸！）。这很可能导致通知无法赶上。

您没有提及新对象是否曾经进入数据库 - 如果您保存、关闭并重新打开应用程序，它们是否存在？我们是在处理无法发送或接收更改通知，还是无法进行更改？

# php - 如果付款未完成并且现在使用php过期，如何发送自动邮件？

> ID：14291441
> 
> 赞同：-4
> 
> 时间：2013-01-12T07:52:55.867
> 
> 标签：php, email, date

我有简单的 php 计费应用程序，管理员可以在其中输入他的费用报告（带有截止日期和带复选框的付费选项）

如果付款未完成，如何通过自动邮件记住他（如果他付款了，他可以编辑他的报告）并且使用 php 过期了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:00:06.330

对于自动任务，它非常简单，在基于 linux 的服务器中，我们使用了 Cron Jobs。它是一个简单的任务，在您定义的时间间隔内运行并运行您在 cron 作业中指定的 php 文件。因此，每天创建一个 cron 作业，并为您的 php 脚本提供路径，该脚本将检查数据库中是否有任何没有付款的记录并发送电子邮件。

# c# - 使用 S3 的动态图像缩略图

> ID：14291443
> 
> 赞同：1
> 
> 时间：2013-01-12T07:52:58.793
> 
> 标签：c#, amazon-s3, amazon-ec2

目前我创建了一个小 api 来处理我的应用程序上的所有缩略图处理，如下所示：

```
../thumbnail?src=image.jpg&w=150&height=100 
```

这将首先检查是否已经为该图像生成了具有这些参数的缩略图，如果没有，它将创建它然后重定向到它。如果它已经存在，它会跳过这一代。

我现在的问题是，如果我想将这些缩略图上传到 S3，我如何检查图像是否已经存在并跳过生成？

理想情况下，如果图像不存在，我会向 S3 发出第一个请求，该请求将重定向到我的缩略图脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:52:51.937

想通了，解决方案是完全绕过 S3 并使用 Cloudfront，它允许选择从您的服务器获取其内容。

```
something.cloudfront.com/thumbnail?params=... 
```

它会首先在这些缓存服务器中查找图像，如果没有找到它，它会转到

```
your.domain.com/thumbnail?params=.... 
```

它会从那里缓存到亚马逊

# java - 未设置 jscrollpane 中 jtextarea 的位置和大小

> ID：14291446
> 
> 赞同：2
> 
> 时间：2013-01-12T07:53:19.660
> 
> 标签：java, swing, jscrollpane, jtextarea, absolutelayout

我在编辑器上工作。我正在使用Java swing。我嵌入了一个`JTextArea`with `JScrollPane`。我想将`jtextarea`特定尺寸的`JScrollPane`. 为此，我使用了`setLocation`函数。但这不起作用？

```
public class ScrollPaneTest extends JFrame {
private Container myCP;
private JTextArea resultsTA;
private JScrollPane scrollPane;
private  JPanel jpanel;

public ScrollPaneTest() {
resultsTA = new JTextArea(50,50);
resultsTA.setLocation(100,100);
jpanel=new JPanel(new BorderLayout());
jpanel.add(resultsTA,BorderLayout.CENTER);

scrollPane = new JScrollPane(jpanel,JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
scrollPane.setPreferredSize(new Dimension(800, 800));
scrollPane.setBounds(0, 0, 800, 800);

setSize(800, 800);
setLocation(0, 0);
myCP = this.getContentPane();
myCP.setLayout(new BorderLayout());
myCP.add(scrollPane);
setVisible(true);
addWindowListener(new WindowAdapter() {
    public void windowClosing(WindowEvent e) {
        System.exit(0);
    }
 });
}
public static void main(String[] args) {
     new ScrollPaneTest();
     }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T08:02:30.200

您只需将`JTextArea`加到 中`JScrollPane`，然后将其加到`CENTER`中。`JPanel``BorderLayout`

不要使用绝对定位。添加适当的[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)，让 LayoutManager 完成其余的工作，以在屏幕上定位和调整组件的大小。

为了使用该`setBounds(...)`方法，您必须为组件使用不值得使用的布局，提供透视图，如[AbsolutePositioning](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)`null`的第一段所述。尽管在您提供的代码示例中，您同时使用 Layout 和使用 AbsolutePositioning，这在各个方面都是错误的。我的建议**停止这样做**:-)

 **在您提供的示例中`ROWS`，`COLUMNS`您提供的足以`JTextArea`根据布局关注点调整大小。

代码示例：

```
import java.awt.*;
import javax.swing.*;

public class Example
{
    private JTextArea tarea;

    private void displayGUI()
    {
        JFrame frame = new JFrame("JScrollPane Example");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BorderLayout(5, 5));

        JScrollPane textScroller = new JScrollPane();
        tarea = new JTextArea(30, 30);
        textScroller.setViewportView(tarea);

        contentPane.add(textScroller);
        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new Example().displayGUI();
            }
        });
    }
} 
```**

# android - 如何在Listview android中添加第一个字母在右侧垂直的字母部分索引器

> ID：14291450
> 
> 赞同：3
> 
> 时间：2013-01-12T07:53:44.947
> 
> 标签：android, list, android-layout

我正在创建一个应用程序，我必须在右侧垂直栏中显示带有字母部分和字母首字母的 listView，如屏幕截图所示。所以请帮助我如何使用字母部分索引器创建listView，索引在右上角。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-30T10:27:41.307

将来可能会帮助某人。您可以做两件事来实现这一目标。首先创建一个可扩展的列表视图，它将显示项目的活动，其中包含 A 到 Z 列表的部分，将其作为示例[http://javapapers.com/android/android-expandable-listview](http://javapapers.com/android/android-expandable-listview)。

下一步是向其中添加节索引器。下面的链接适用于 listview [http://www.survivingwithandroid.com/2012/12/android-listview-sectionindexer-fastscroll.html](http://www.survivingwithandroid.com/2012/12/android-listview-sectionindexer-fastscroll.html)。

这会将可扩展列表视图的滚动位置设置为部分索引器中的一个用户触摸。

```
private static String sections = "abcdefghilmnopqrstuvz";

this.setSelection(((SectionIndexer) getAdapter()) .getPositionForSection(currentPosition));//position of group view item 
```

现在在 getPositionForSection 回调方法中返回标题的位置

```
@Override public int getPositionForSection(int sectionIndex) { 
    // Get the total number of groups
    for (int i = 0; i < this.getGroupCount(); i++) {
      //Get Group Item like,For 0 Group Item A,For 1 Group Item B etc
      String groupItem = (String) this.getGroup(i);
      int childCount = 0;
      //Start Matching for letter B on section indexer, get the count of child 
      //for letter A and same logic for other letters
      if (groupItem.charAt(0) == sections.charAt(sectionIndex)){
      int previousChildIndex = i - 1;
      //Run a for loop to get previous childs
      for (int j = previousChildIndex; j >= 0; j--) {
      //If for letter B, previous group Item i.e.A contains 3 childs 
      //the sum is maintained 
      childCount = childCount + this.getChildrenCount(j);
    }
    //for Group Item B, i=0 and childCount is 3 and so on
    return i + childCount;
   }
 }

}
 return 0;
} 
```

其余示例中解释的相同逻辑应该像魅力一样对您有用！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T12:39:36.190

您可以在 github 上搜索打开的库。

您可以使用的库之一：Daniel Nam 的 IndexableListView

[https://github.com/woozzu/IndexableListView](https://github.com/woozzu/IndexableListView)

您可以通过查看源代码来了解它的想法；）

祝你好运

# java - 无法在 linux 中加载库 MediaInfo

> ID：14291453
> 
> 赞同：1
> 
> 时间：2013-01-12T07:54:10.047
> 
> 标签：java, jna, mediainfo

我正在开发一个使用 mediainfo 库的 java 项目。我在 Windows 中使用 midiainfo.dll 的 JNA 代码工作正常，但是当我在 linux 中运行我的代码时，它不起作用并给出以下异常 -

```
java.lang.UnsatisfiedLinkError: Unable to load library 'MediaInfo': libMediaInfo.so: cannot open shared object file: No such file or directory 
```

我已经像这样编写了我的 java 代码 -

```
interface MediaInfoDLL_Internal extends Library
{

    MediaInfoDLL_Internal INSTANCE = (MediaInfoDLL_Internal) Native.loadLibrary("MediaInfo", MediaInfoDLL_Internal.class, singletonMap(OPTION_FUNCTION_MAPPER, new FunctionMapper()
        {

            public String getFunctionName(NativeLibrary lib, Method method)
            {
                // MediaInfo_New(), MediaInfo_Open() ...
                return "MediaInfo_" + method.getName();
            }
        }
    ));

    //Constructor/Destructor
    Pointer New();
    void Delete(Pointer Handle);

    //File
    int Open(Pointer Handle, WString file);
    void Close(Pointer Handle);

    //Infos
    WString Inform(Pointer Handle);
    WString Get(Pointer Handle, int StreamKind, int StreamNumber, WString parameter, int infoKind, int searchKind);
    WString GetI(Pointer Handle, int StreamKind, int StreamNumber, int parameterIndex, int infoKind);
    int     Count_Get(Pointer Handle, int StreamKind, int StreamNumber);

    //Options
    WString Option(Pointer Handle, WString option, WString value);
} 
```

并且只需在类路径中添加 mediainfo.dll 这就像魔术一样，但在 linux 中我尝试添加 libmediainfo.so.0、libmediainfo.so.0.0.0、libzen.so.0 和 libzen.so.0.0.0但没有运气...

有人知道如何在 linux 中运行 mediainfo+java 吗？

我正在使用 Java 6、CentOS 5.6 最终版和最新的 mediainfo 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:05:20.220

我通过制作符号链接解决了我的问题

我使用了来自超级用户的以下命令

$ sudo ln -s /usr/lib/libmediainfo.so.0 /usr/lib/libMediaInfo.so
$ sudo ln -s /usr/lib/libzen.so.0 /usr/lib/libzen.so

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:41:46.893

*nix 上的文件名区分大小写，因此如果您的库被调用`libmediainfo.so`，则需要更改

```
Native.loadLibrary("MediaInfo",.... 
```

到

```
Native.loadLibrary("mediainfo", 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T10:24:00.127

1) 确保文件实际上被称为“libMediaInfo.so”（区分大小写！）；它可以是指向实际版本的符号链接，很多库都是这样设置的。2) 确保此文件在 *nix 上的 LD_LIBRARY_PATH 中 3) 在代码中将其设为小写可能会使它更简洁，但这是风格问题 - 重要的是代码中的 lib 名称必须与文件名对应系统，包括案例

# c# - 无法取消注册 ID 为“AjaxPanel”的 UpdatePanel，因为它未在 ScriptManager 中注册。如果

> ID：14291456
> 
> 赞同：0
> 
> 时间：2013-01-12T07:54:29.333
> 
> 标签：c#, telerik

请我有这个错误，我无法摆脱它我在另一个用户控件中有一个用户控件，子控件包含 RadAjaxPanel。

父控件包含一个 Radgrid 希望有一个 editformTemplate 并在其中加载子控件我将在代码中向您展示：

```
<EditFormSettings EditFormType="Template">
                <EditColumn FilterControlAltText="Filter EditCommandColumn column">
                </EditColumn>
                <FormStyle BackColor="#FCFCFC"></FormStyle>
                <FormTemplate>
                       <table>
                            <tr>
                                <td class="LblWidth" style="padding-top: 5px;">
                             <asp:Label ID="Label1" runat="server" Text="Center logo:">
                                    </asp:Label>
                                </td>
                                <td style="padding-top: 10px;">

                 <uc1:MAYAUploadImageControl ID="UploadImageControl1" runat="server" />

                                    <span class="redSpan">
                                    </span>
                                </td>
                            </tr>
                        </table>
   </FormTemplate>
            </EditFormSettings> 
```

那是父控件

子控件是：

```
<telerik:RadAjaxPanel ID="ajaxPanel" runat="server" >
    <asp:HiddenField ID="hf_FileName" runat="server" />
    <asp:HiddenField ID="ImageChanged" runat="server" Value="0" />
    <asp:Label ID="Label1" runat="server" Text="New Picture:"></asp:Label>
    <br />
    <telerik:RadImageEditor ID="RIEditor" runat="server" Width="180" Height="150" ToolBarMode="Default"
        EnableResize="false" EnableTheming="false" BackColor="Transparent" OnImageSaving="ImageEditor_ImageSaving"
        StatusBarMode="Hidden" CanvasMode="No" ToolBarPosition="top" BorderStyle="Solid"
        BorderWidth="0px" Visible="false" OnClientImageLoad="ImageLoad" OnClientImageChanged="ImageChanged">
        <Tools>
            <telerik:ImageEditorToolGroup>
                <telerik:ImageEditorTool CommandName="Flip" />
                <telerik:ImageEditorTool CommandName="FlipVertical" />
                <telerik:ImageEditorTool CommandName="FlipHorizontal" />
                <telerik:ImageEditorToolSeparator />
                <telerik:ImageEditorTool CommandName="Crop" />
                <telerik:ImageEditorTool CommandName="Resize" />
                <telerik:ImageEditorToolSeparator />
                <telerik:ImageEditorTool CommandName="Reset" />
            </telerik:ImageEditorToolGroup>
        </Tools>
    </telerik:RadImageEditor>
    </telerik:RadAjaxPanel> 
```

父控件 ascx.cs：

```
 protected void GridCenters_ItemCommand(object sender,Telerik.Web.UI.GridCommandEventArgs e)
{
    if (e.CommandName == RadGrid.UpdateCommandName || e.CommandName == RadGrid.PerformInsertCommandName)
    { controls_CustomControls_UploadImageControl_Maya ctrl = e.Item.FindControl("UploadImageControl1") as controls_CustomControls_UploadImageControl_Maya;
        if (ctrl.ImageFileName != "")
        {
            //string imageFileName = (e.Item.FindControl("AsyncUpload1") as RadAsyncUpload).UploadedFiles[0].FileName;
            ctrl.SaveImage();
            logo = ctrl.ImageFileName != "" ? ConvertImgToBinary(ctrl.ImageFileName) : null;
        }

        switch (e.CommandName)
        {
 case "Update":
    if(!EntertainmentDataAccess.UpdateCenter(long.Parse(e.CommandArgument.ToString()), centerName, centerType, logo, website, "", isactive, "", mail, tel, Mobile, fax, country, casa, town, street, BuildNb, POB))
                {
                    LblError.Text = "Branch cannot be updated";
                }
                else
                {
                    LblError.Text = "Branch updated successfully";
                    GridEditCommandColumn editColumn = (GridEditCommandColumn)GridCenters.MasterTableView.GetColumn("EDIT");
                    editColumn.Visible = true;

                    GridCenters.DataBind(); // here i'm getting the error
                }
                break;
        }
    } 
```

我很抱歉我的解释混乱，但我在这个问题上被困了好几天，我没有解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:40:52.467

根据下面链接中的信息，看起来它`RadAjaxPanel`正在从它所属的控件集合中移动或删除。第三个链接包含 Telerik 特定的解决方法。

1.  [是什么导致“无法取消注册 UpdatePanel”错误？](https://stackoverflow.com/questions/238915/what-causes-the-cannot-unregister-updatepanel-error)
2.  [“无法取消注册 ID 为‘xxx’的 UpdatePanel，因为它没有向 ScriptManager 注册...”在 RadGrid 中编辑记录时](https://stackoverflow.com/questions/8727658/cannot-unregister-updatepanel-with-id-xxx-since-it-was-not-registered-with-th?lq=1)
3.  [http://www.telerik.com/support/kb/aspnet-ajax/window/cannot-unregister-updatepanel-with-id-updatepanelid-since-it-was-not-registered-with-the-scriptmanager.aspx](http://www.telerik.com/support/kb/aspnet-ajax/window/cannot-unregister-updatepanel-with-id-updatepanelid-since-it-was-not-registered-with-the-scriptmanager.aspx)
4.  [http://msmvps.com/blogs/luisabreu/archive/2006/11/16/adding-removing-updatepanels-dynamicaly-from-a-page.aspx](http://msmvps.com/blogs/luisabreu/archive/2006/11/16/adding-removing-updatepanels-dynamicaly-from-a-page.aspx)

# android - 获取 java.lang.ExceptionInInitializerError 和 java.lang.UnsatisfiedLinkError

> ID：14291457
> 
> 赞同：2
> 
> 时间：2013-01-12T07:54:31.143
> 
> 标签：android, unsatisfiedlinkerror

我有项目源代码和 apk 文件。如果我直接在模拟器上安装 APK，那么它工作正常，但是在从 eclipse 运行应用程序时，我遇到了以下错误。

```
01-12 07:45:42.918: E/AndroidRuntime(889): FATAL EXCEPTION: main
01-12 07:45:42.918: E/AndroidRuntime(889): java.lang.ExceptionInInitializerError
01-12 07:45:42.918: E/AndroidRuntime(889):  at com.ims.IMSClientActivity.<init>(IMSClientActivity.java:64)
01-12 07:45:42.918: E/AndroidRuntime(889):  at java.lang.Class.newInstanceImpl(Native Method)
01-12 07:45:42.918: E/AndroidRuntime(889):  at java.lang.Class.newInstance(Class.java:1409)
01-12 07:45:42.918: E/AndroidRuntime(889):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
01-12 07:45:42.918: E/AndroidRuntime(889):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
01-12 07:45:42.918: E/AndroidRuntime(889):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-12 07:45:42.918: E/AndroidRuntime(889):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-12 07:45:42.918: E/AndroidRuntime(889):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-12 07:45:42.918: E/AndroidRuntime(889):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-12 07:45:42.918: E/AndroidRuntime(889):  at android.os.Looper.loop(Looper.java:123)
01-12 07:45:42.918: E/AndroidRuntime(889):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-12 07:45:42.918: E/AndroidRuntime(889):  at java.lang.reflect.Method.invokeNative(Native Method)
01-12 07:45:42.918: E/AndroidRuntime(889):  at java.lang.reflect.Method.invoke(Method.java:507)
01-12 07:45:42.918: E/AndroidRuntime(889):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-12 07:45:42.918: E/AndroidRuntime(889):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-12 07:45:42.918: E/AndroidRuntime(889):  at dalvik.system.NativeStart.main(Native Method)
01-12 07:45:42.918: E/AndroidRuntime(889): Caused by: java.lang.ExceptionInInitializerError
01-12 07:45:42.918: E/AndroidRuntime(889):  at com.Aloha.tinyWRAP.ProxyVideoProducer.registerPlugin(ProxyVideoProducer.java:65)
01-12 07:45:42.918: E/AndroidRuntime(889):  at com.Aloha.ngn.NgnEngine.initialize(NgnEngine.java:67)
01-12 07:45:42.918: E/AndroidRuntime(889):  at com.ims.Engine.<clinit>(Engine.java:37)
01-12 07:45:42.918: E/AndroidRuntime(889):  ... 16 more
01-12 07:45:42.918: E/AndroidRuntime(889): Caused by: java.lang.UnsatisfiedLinkError: swig_module_init
01-12 07:45:42.918: E/AndroidRuntime(889):  at com.Aloha.tinyWRAP.tinyWRAPJNI.swig_module_init(Native Method)
01-12 07:45:42.918: E/AndroidRuntime(889):  at com.Aloha.tinyWRAP.tinyWRAPJNI.<clinit>(tinyWRAPJNI.java:679)
01-12 07:45:42.918: E/AndroidRuntime(889):  ... 19 more 
```

PS：这个项目中使用了一些库

帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-26T11:51:40.613

您的**pjsua2JNI.java** - 文件位于错误的命名空间/目录中。您必须在 Java 源代码的根目录下提供它，结构如下：

**org > pjsip > pjsua2 >** ...文件必须在这里...

不要忘记在您的应用程序代码中导入该包：

**导入 org.pjsip.pjsua2.*；**

# driving-directions - 谷歌方向以外的驾驶时间API？

> ID：14291459
> 
> 赞同：0
> 
> 时间：2013-01-12T07:54:55.307
> 
> 标签：driving-directions, driving-distance

我有一个应用程序，我应该有一个点 A 和一组点之间的行驶时间。我有所有这些点的 GPS 坐标。我尝试使用谷歌地图方向 api 完成这项工作，但问题是程序必须在两个连续请求之间等待至少 1 秒，所以如果目标集包含 40 个点，我应该等待 39 秒才能获得所有答案.

这部分程序很关键，所以 39 秒将是一个很长的时间。

还有其他我可以使用的api吗？

请注意，我对详细的方向或距离不感兴趣，总的旅行时间就足够了，我以后可以在最佳答案上使用谷歌方向来获取这些详细信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T00:40:27.330

[Walk Score 的 Travel Time API](http://www.walkscore.com/professional/travel-time-api.php)似乎提供了这样的功能

> Travel Time API 快速计算起点和一组目的地之间的旅行时间。距离计算器使用...行驶距离...

# javascript - 页面上任何表单的事件（不特定于单个表单）

> ID：14291463
> 
> 赞同：0
> 
> 时间：2013-01-12T07:55:52.490
> 
> 标签：javascript

所以我正在开发一个 Chrome 扩展程序，我想做的是有一个事件处理程序，用于当用户在任何表单上执行操作时。

所以想象一下我不知道表单的名称，但我想拥有它，所以当用户提交表单时，一个动作就完成了。

这将如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:57:38.353

我只会处理`onsubmit`页面上的每个表单。遍历所有表单，将您的函数设置为处理程序。

```
document.getElementsByTagName('form') 
```

# sql - 减去两个查询的结果

> ID：14291464
> 
> 赞同：0
> 
> 时间：2013-01-12T07:55:53.870
> 
> 标签：sql, database, ms-access, database-design

我有一个数据库，其中有一个查询告诉我每个特定房间总共有多少钥匙，另一个指示每个特定房间目前有多少钥匙已注销。我想创建第三个查询，指示每个房间现在有多少可用。

访问文件：http: [//jumpshare.com/b/k7pEg4](http://jumpshare.com/b/k7pEg4)

查询 1（每个房间的钥匙）

```
SELECT r.room_name, count(r.room_id) AS Key_Count
FROM keys AS k 
INNER JOIN rooms AS r ON r.room_id = k.room_id
GROUP BY r.room_id, r.room_name
ORDER BY 2 DESC; 
```

查询 2（KPR 已注销）

```
SELECT r.room_name, Count(r.room_id) AS Key_Count
FROM rooms AS r 
INNER JOIN (keys AS k 
INNER JOIN signin AS s ON k.key_id = s.key_id) ON r.room_id = k.room_id
WHERE (((s.[return_date]) Is Null))
GROUP BY r.room_name, r.room_id
ORDER BY 2 DESC; 
```

这是查询 1 和 2 的结果。如果 Room FY218 总共有 8 个密钥，并且当前有 2 个密钥已注销。我可以结合我的查询告诉我这个房间还有 6 把钥匙吗？如果不是我怎么能得到这个结果。

![在此处输入图像描述](../Images/5f826b2949a323a8a6b72c78f7a353a8.png)

这些是我的表格和关系：

![在此处输入图像描述](../Images/ee30180b6ed5b9963c5b4394ce678ef1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:15:42.920

这应该是你想要的：

```
SELECT r.room_name, Count(k.key_id) AS Key_Count
FROM rooms AS r
INNER JOIN keys AS k ON r.room_id = k.room_id 
WHERE k.key_id NOT IN (
    SELECT k2.key_id
    FROM keys AS k2
    INNER JOIN signin AS s ON k2.key_id = s.key_id
    WHERE s.[return_date] Is Null)
GROUP BY r.room_name
ORDER BY 2 DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:03:57.493

您可以使用子查询，如下所示：

```
SELECT
r.room_name,
Count(*) -
(
  SELECT Count(*)
  FROM keys AS k2
  INNER JOIN signin s2
  ON s2.key_id = k2.key_id
  WHERE r.room_id = k2.room_id
) AS AvailableKeys
FROM rooms AS r
LEFT JOIN keys AS k
ON r.room_id = k.room_id
GROUP BY r.room_name, r.room_id 
```

# java - Java 彩票类

> ID：14291466
> 
> 赞同：0
> 
> 时间：2013-01-12T07:56:16.393
> 
> 标签：java, arrays

所以我正在写一个`Lottery`类和一个类来演示这个`Lottery`类。我已经完成了工作并且可以编译，但是当我运行它时，我得到了

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 4  
at LotteryDemo.main(LotteryDemo.java:21) 
```

这是我的代码，任何帮助将不胜感激！

**`Lottery`班级：**

```
 import java.util.Random;

import java.util.Scanner;

   public class Lottery
   {

  int NUM_DIGITS = 5;   
  int[] lotteryNumbers = new int[4];

  public Lottery(){
     Random rand = new Random();
     lotteryNumbers[0] = rand.nextInt(10);
     lotteryNumbers[1] = rand.nextInt(10);
     lotteryNumbers[2] = rand.nextInt(10);
     lotteryNumbers[3] = rand.nextInt(10);
     lotteryNumbers[4] = rand.nextInt(10);
     getLotteryNums();

  }

  public int numIntsInCommon(int[] picks){
     int inCommon = 0;

     for (int counter = 0; counter < 5; counter++)
     {
        for (int index = 0; index < 5; index++)
        {
           if (lotteryNumbers[counter] == picks[index])
              inCommon++;
           return inCommon;
        }
        return inCommon;
     }

     return inCommon;
  }

  public String getLotteryNums(){
     return lotteryNumbers[0] + ", " + lotteryNumbers[1] + ", " + 
                    lotteryNumbers[2] + ", " + lotteryNumbers[3] + ", " +
                    lotteryNumbers[4];
  }

} 
```

**`LotteryDemo`班级：**

```
 import java.util.*;

   public class LotteryDemo
   {
  public static void main(String[] args)
  {

        Scanner input = new Scanner(System.in);
     int[] userNumbers = new int[4];

     System.out.println("Please supply your lottery picks. Choose unique numbers between 0 and 9.");
     System.out.print("Enter digit 1: ");
        userNumbers[0] = input.nextInt();
        System.out.print("Enter digit 2: ");
        userNumbers[1] = input.nextInt();
        System.out.print("Enter digit 3: ");
        userNumbers[2] = input.nextInt();
        System.out.print("Enter digit 4: ");
        userNumbers[3] = input.nextInt();
        System.out.print("Enter digit 5: ");
        userNumbers[4] = input.nextInt();

    Lottery lottery = new Lottery();

    System.out.print("Lottery Numbers: " + lottery.getLotteryNums());
  System.out.print("Number of matching digits: " + lottery.numIntsInCommon(userNumbers));
    if(lottery.numIntsInCommon(userNumbers) == 5)
        System.out.print("All 5 match! You have hit the jackpot!");
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:57:49.327

```
int[] lotteryNumbers = new int[4]; 
```

这意味着该数组有 4 个元素或`lotteryNumbers[0]`....`lotteryNumbers[3]`

从而`lotteryNumbers[4] = rand.nextInt(10);`会导致上述异常。

`userNumbers`与导致异常的 in main类似。

```
int[] userNumbers = new int[4];
...
userNumbers[4] = input.nextInt(); // java.lang.ArrayIndexOutOfBoundsException 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:58:16.003

您分配数组，`new int[4]`这意味着它有 4 个元素，编号为 0 到 3。当您访问索引为 4 的元素时，它超出了范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T08:09:37.633

Java中的数组具有如下实例化：

```
type[] name = new type[size]
                       ^ 
```

大小表示数组*中的索引数。*如您所知，数组从零开始，因此：

```
int[] userNumbers = new int[4] 
```

制作一个数组：

```
[ ][ ][ ][ ]
 0  1  2  3 
```

`userNumbers[4]`因此不存在。您需要`userNumber[5]`为五个索引创建。

# mysql - 选择嵌套集中的项目

> ID：14291468
> 
> 赞同：0
> 
> 时间：2013-01-12T07:56:44.213
> 
> 标签：mysql, sql, nested-sets

我有以下嵌套集。

cat.table：

```
cat.ID Name Lft Rgt
  1     A    1   8
  2     B    2   5
  3     C    3   4
  4     D    6   7
  5     E    9   14
  6     F   10   11
  7     G   12   13 
```

输出：括号中的项目数。（在“A”中将计算其节点中的项目 - B、C 和 D）

```
 A (7)
 -B (3)
 --C (2)
 -D (1)
 E (3)
 -F (1)
 -G (2) 
```

项目表：

```
ID Cat.ID  Name
1    1     item1
2    2     item2
3    2     item3
4    2     item4
5    3     item5
6    3     item6
7    4     item7
8    6     item8
9    7     item9
10   7     item10 
```

如果我选择 Cat A，那么我也想选择 B、C 和 D 中的项目。如果我选择 B，则显示 B 和 C 中的项目。如果我选​​择 F 而不是仅从 F 中显示...在 Items 表中，我没有只有 Cat.ID 的左右值。

我怎么知道如果我选择“A”类别，哪些项目也在“B”、“C”和“D”中？

**编辑：** 例如：如果我选择 B 而不是显示 B 和 C 中的项目（B 是 C 的父级，C 是 B 的节点） - 输出：

```
item2
item3
item4
item5
item6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:56:09.590

答案在链接文章的*检索完整树*段中。

```
SELECT Id,Name FROM Items WHERE cat_id IN (
SELECT cat_id
FROM category AS node,
    category AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
    AND parent.name = 'A') 
```

# vb.net - 如何在 vb.net 中创建搜索滑块

> ID：14291469
> 
> 赞同：0
> 
> 时间：2013-01-12T07:56:45.660
> 
> 标签：vb.net, vb.net-2010

我在 youtube 上找到了许多教程，它们告诉我们如何使用 AxWindowsMediaPlayer 以及使用 TrackBar1 for Windows Media Player 组件创建自己的音量控制等基本内容。但现在我想问一下，我们如何在 Windows Media Player 的 vb.net 中使用轨迹栏或搜索滑块创建自己的电影持续时间控件。我搜索了很多，但问题仍然是一个问题。我希望这个站点上许多伟大的 vb.net 开发人员应该告诉我它背后的逻辑

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:19:28.833

诀窍是继承 TrackBar 控件并处理 OnPaintBackground 和 OnPaint 事件。这是我在自己的一些项目中使用的控件的“超精简版”版本。

此版本非常有限，但它应该可以帮助您入门...

```
Imports System.Drawing.Drawing2D

Public Class CoolTrackBar
    Inherits TrackBar

    Private thumbRect As Rectangle = New Rectangle(0, 0, 19, 19)
    Private isOverThumb As Boolean
    Private cachedValue As Integer
    Private rangeRect As Rectangle = Rectangle.Empty

    Private mGrooveSize As Integer = 6
    Private mGrooveBorderColor As Color = Color.Gray
    Private mGrooveColor As Color = Color.LightGray

    Private mSelStartColor As Color = Color.Blue
    Private mSelEndColor As Color = Color.Red

    Public Sub New()
        Me.SetStyle(ControlStyles.AllPaintingInWmPaint, True)
        Me.SetStyle(ControlStyles.OptimizedDoubleBuffer, True)
        Me.SetStyle(ControlStyles.ResizeRedraw, True)
        Me.SetStyle(ControlStyles.UserPaint, True)
        Me.SetStyle(ControlStyles.SupportsTransparentBackColor, True)
    End Sub

    Public Property GrooveSize As Integer
        Get
            Return mGrooveSize
        End Get
        Set(value As Integer)
            mGrooveSize = value
            Me.Invalidate()
        End Set
    End Property

    Public Property GrooveColor As Color
        Get
            Return mGrooveColor
        End Get
        Set(value As Color)
            mGrooveColor = value
            Me.Invalidate()
        End Set
    End Property

    Public Property GrooveBorderColor As Color
        Get
            Return mGrooveBorderColor
        End Get
        Set(value As Color)
            mGrooveBorderColor = value
            Me.Invalidate()
        End Set
    End Property

    Public Overloads Property TickStyle As TickStyle
        Get
            Return Windows.Forms.TickStyle.Both
        End Get
        Set(value As TickStyle)
            MyBase.TickStyle = Windows.Forms.TickStyle.Both
        End Set
    End Property

    Protected Overrides Sub OnPaintBackground(pevent As PaintEventArgs)
        Dim g As Graphics = pevent.Graphics
        Dim r As Rectangle = Me.DisplayRectangle

        Select Case MyBase.Orientation
            Case Orientation.Horizontal
                rangeRect = New Rectangle(r.X + 14, r.Top, r.Width - 30, r.Height)
            Case Orientation.Vertical
                rangeRect = New Rectangle(r.X + 5, r.Y + 14, r.Width, r.Height - 29)
        End Select

        MyBase.OnPaintBackground(pevent)

        DrawGroove(g)
    End Sub

    Protected Overrides Sub OnPaint(e As PaintEventArgs)
        Dim g As Graphics = e.Graphics

        DrawThumb(g)
    End Sub

    Private Sub DrawGroove(g As Graphics)
        Dim r1 As Rectangle
        Dim r2 As Rectangle

        Select Case Orientation
            Case Windows.Forms.Orientation.Horizontal
                r1 = New Rectangle(rangeRect.X, rangeRect.Y + (rangeRect.Height - mGrooveSize) \ 2, rangeRect.Width, mGrooveSize)
                r2 = New Rectangle(r1.X, r1.Y, r1.Width * ValueToPercentage(cachedValue), r1.Height)
            Case Windows.Forms.Orientation.Vertical
                r1 = New Rectangle(rangeRect.X + (rangeRect.Width - mGrooveSize) / 2 - mGrooveSize \ 2, rangeRect.Y, mGrooveSize, rangeRect.Height)
                r2 = New Rectangle(r1.X, r1.Y, r1.Width, r1.Height * ValueToPercentage(cachedValue))
        End Select

        Using b As New SolidBrush(mGrooveColor)
            g.FillRectangle(b, r1)
        End Using

        Using p As New Pen(mGrooveBorderColor)
            g.DrawRectangle(p, r1)
        End Using

        Using lgb As New LinearGradientBrush(r1.Location, New Point(r1.Right, r1.Bottom), mSelStartColor, mSelEndColor)
            g.FillRectangle(lgb, r2)
        End Using
    End Sub

    Private Sub DrawThumb(g As Graphics)
        Dim thumb As VisualStyles.VisualStyleElement = Nothing

        Select Case MyBase.Orientation
            Case Orientation.Horizontal
                If MyBase.Enabled Then
                    If isOverThumb Then
                        thumb = VisualStyles.VisualStyleElement.TrackBar.ThumbTop.Hot
                    Else
                        If MyBase.Focused Then
                            thumb = VisualStyles.VisualStyleElement.TrackBar.ThumbTop.Focused
                        Else
                            thumb = VisualStyles.VisualStyleElement.TrackBar.ThumbTop.Normal
                        End If
                    End If
                Else
                    thumb = VisualStyles.VisualStyleElement.TrackBar.ThumbTop.Disabled
                End If
            Case Orientation.Vertical
                If MyBase.Enabled Then
                    If isOverThumb Then
                        thumb = VisualStyles.VisualStyleElement.TrackBar.ThumbRight.Hot
                    Else
                        If MyBase.Focused Then
                            thumb = VisualStyles.VisualStyleElement.TrackBar.ThumbRight.Focused
                        Else
                            thumb = VisualStyles.VisualStyleElement.TrackBar.ThumbRight.Normal
                        End If
                    End If
                Else
                    thumb = VisualStyles.VisualStyleElement.TrackBar.ThumbRight.Disabled
                End If
        End Select

        Dim valuePercentage As Single = ValueToPercentage(cachedValue)
        Dim vsr = New VisualStyles.VisualStyleRenderer(thumb)
        thumbRect.Size = vsr.GetPartSize(g, VisualStyles.ThemeSizeType.Draw)

        Dim pos As Integer
        Select Case MyBase.Orientation
            Case Orientation.Horizontal
                pos = valuePercentage * rangeRect.Width
                thumbRect.Location = New Point(pos + thumbRect.Width / 2 + 3, rangeRect.Y + thumbRect.Height / 2 + mGrooveSize / 4)
            Case Orientation.Vertical
                pos = valuePercentage * rangeRect.Height
                thumbRect.Location = New Point(rangeRect.X + thumbRect.Width / 2 + mGrooveSize / 4, pos + thumbRect.Height / 2 + 3)
        End Select

        vsr.DrawBackground(g, thumbRect)
    End Sub

    Private Function ValueToPercentage(value As Integer) As Single
        Dim w As Integer = MyBase.Maximum - MyBase.Minimum
        Dim min = MyBase.Minimum
        Dim max = MyBase.Maximum

        If MyBase.Orientation = Orientation.Horizontal Then
            Return (value - min) / (max - min)
        Else
            Return 1 - (value - min) / (max - min)
        End If
    End Function

    Private Sub CoolTrackBar_MouseMove(sender As Object, e As MouseEventArgs) Handles Me.MouseMove
        If thumbRect.IntersectsWith(New Rectangle(e.Location, New Size(1, 1))) Then
            isOverThumb = True
            Me.Invalidate()
        ElseIf isOverThumb Then
            isOverThumb = False
            Me.Invalidate()
        End If
    End Sub

    Private Sub CoolTrackBar_ValueChanged(sender As Object, e As EventArgs) Handles Me.ValueChanged
        cachedValue = MyBase.Value
        Me.Invalidate()
    End Sub
End Class 
```

要使用它，只需创建一个 WinForms 项目，然后创建一个新的`Class`，命名`CoolTrackBar`并粘贴上面的代码。您需要编译解决方案以使控件出现在您的工具箱中。

# cordova - 带有cordova 2.3.0的Android childbrowser插件给出错误消息

> ID：14291471
> 
> 赞同：0
> 
> 时间：2013-01-12T07:57:45.880
> 
> 标签：cordova, phonegap-plugins, cordova-2.0.0

我已经在cordova 1.9.0 中成功集成了android childbrowser 插件。现在我想在 cordova 2.3.0 中使用相同的 childbowser 插件。我已经下载了最近（更新）的子浏览器插件，并根据cordova 2.3.0 的要求进行了一些修改，但在第 411 行仍然出现一个错误，即“方法成功（插件结果，字符串）对于类型 ChildBrowser 是未定义的”。

这是我收到错误消息的地方，即

> this.success(result, this.browserCallbackId);

下面是导致错误的方法。

```
 private void sendUpdate(JSONObject obj, boolean keepCallback) {
        if (this.browserCallbackId != null) {
            PluginResult result = new PluginResult(PluginResult.Status.OK, obj);
            result.setKeepCallback(keepCallback);
            **this.success(result, this.browserCallbackId);**
        }
    } 
```

任何人都建议我应该怎么做才能删除错误消息和代码才能正常工作。

下面是修改后的整个代码

```
/*
* PhoneGap is available under *either* the terms of the modified BSD license *or* the
* MIT License (2008). See http://opensource.org/licenses/alphabetical for full text.
*
* Copyright (c) 2005-2011, Nitobi Software Inc.
* Copyright (c) 2010-2011, IBM Corporation
*/
package com.nxtwhat.SuvilasCDV23;

import java.io.IOException;
import java.io.InputStream;

import org.apache.cordova.api.CordovaPlugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.text.InputType;
import android.util.Log;
import android.util.TypedValue;
import android.view.Gravity;
import android.view.KeyEvent;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.view.WindowManager.LayoutParams;
import android.view.inputmethod.EditorInfo;
import android.view.inputmethod.InputMethodManager;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;

public class ChildBrowser extends CordovaPlugin  {

    protected static final String LOG_TAG = "ChildBrowser";
    private static int CLOSE_EVENT = 0;
    private static int LOCATION_CHANGED_EVENT = 1;

    private String browserCallbackId = null;

    private Dialog dialog;
    private WebView webview;
    private EditText edittext;
    private boolean showLocationBar = true;

    /**
* Executes the request and returns PluginResult.
*
* @param action The action to execute.
* @param args JSONArry of arguments for the plugin.
* @param callbackId The callback id used when calling back into JavaScript.
* @return A PluginResult object with a status and message.
*/
    public PluginResult execute(String action, JSONArray args, String callbackId) {
        PluginResult.Status status = PluginResult.Status.OK;
        String result = "";

        try {
            if (action.equals("showWebPage")) {
                this.browserCallbackId = callbackId;

                // If the ChildBrowser is already open then throw an error
                if (dialog != null && dialog.isShowing()) {
                    return new PluginResult(PluginResult.Status.ERROR, "ChildBrowser is already open");
                }

                result = this.showWebPage(args.getString(0), args.optJSONObject(1));

                if (result.length() > 0) {
                    status = PluginResult.Status.ERROR;
                    return new PluginResult(status, result);
                } else {
                    PluginResult pluginResult = new PluginResult(status, result);
                    pluginResult.setKeepCallback(true);
                    return pluginResult;
                }
            }
            else if (action.equals("close")) {
                closeDialog();

                JSONObject obj = new JSONObject();
                obj.put("type", CLOSE_EVENT);

                PluginResult pluginResult = new PluginResult(status, obj);
                pluginResult.setKeepCallback(false);
                return pluginResult;
            }
            else if (action.equals("openExternal")) {
                result = this.openExternal(args.getString(0), args.optBoolean(1));
                if (result.length() > 0) {
                    status = PluginResult.Status.ERROR;
                }
            }
            else {
                status = PluginResult.Status.INVALID_ACTION;
            }
            return new PluginResult(status, result);
        } catch (JSONException e) {
            return new PluginResult(PluginResult.Status.JSON_EXCEPTION);
        }
    }

    /**
* Display a new browser with the specified URL.
*
* @param url The url to load.
* @param usePhoneGap Load url in PhoneGap webview
* @return "" if ok, or error message.
*/
    public String openExternal(String url, boolean usePhoneGap) {
        try {
            Intent intent = null;
            if (usePhoneGap) {
                intent = new Intent().setClass(this.cordova.getActivity(), org.apache.cordova.DroidGap.class);
                intent.setData(Uri.parse(url)); // This line will be removed in future.
                intent.putExtra("url", url);

                // Timeout parameter: 60 sec max - May be less if http device timeout is less.
                intent.putExtra("loadUrlTimeoutValue", 60000);

                // These parameters can be configured if you want to show the loading dialog
                intent.putExtra("loadingDialog", "Wait,Loading web page..."); // show loading dialog
                intent.putExtra("hideLoadingDialogOnPageLoad", true); // hide it once page has completely loaded
            }
            else {
                intent = new Intent(Intent.ACTION_VIEW);
                intent.setData(Uri.parse(url));
            }
            this.cordova.getActivity().startActivity(intent);
            return "";
        } catch (android.content.ActivityNotFoundException e) {
            Log.d(LOG_TAG, "ChildBrowser: Error loading url "+url+":"+ e.toString());
            return e.toString();
        }
    }

    /**
* Closes the dialog
*/
    private void closeDialog() {
        if (dialog != null) {
            dialog.dismiss();
        }
    }

    /**
* Checks to see if it is possible to go back one page in history, then does so.
*/
    private void goBack() {
        if (this.webview.canGoBack()) {
            this.webview.goBack();
        }
    }

    /**
* Checks to see if it is possible to go forward one page in history, then does so.
*/
    private void goForward() {
        if (this.webview.canGoForward()) {
            this.webview.goForward();
        }
    }

    /**
* Navigate to the new page
*
* @param url to load
*/
    private void navigate(String url) {
        InputMethodManager imm = (InputMethodManager)this.cordova.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(edittext.getWindowToken(), 0);

        if (!url.startsWith("http") && !url.startsWith("file:")) {
            this.webview.loadUrl("http://" + url);
        } else {
            this.webview.loadUrl(url);
        }
        this.webview.requestFocus();
    }

    /**
* Should we show the location bar?
*
* @return boolean
*/
    private boolean getShowLocationBar() {
        return this.showLocationBar;
    }

    /**
* Display a new browser with the specified URL.
*
* @param url The url to load.
* @param jsonObject
*/
    public String showWebPage(final String url, JSONObject options) {
        // Determine if we should hide the location bar.
        if (options != null) {
            showLocationBar = options.optBoolean("showLocationBar", true);
        }

        // Create dialog in new thread
        Runnable runnable = new Runnable() {
            /**
* Convert our DIP units to Pixels
*
* @return int
*/
            private int dpToPixels(int dipValue) {
                int value = (int) TypedValue.applyDimension( TypedValue.COMPLEX_UNIT_DIP,
                                                            (float) dipValue,
                                                            cordova.getActivity().getResources().getDisplayMetrics()
                );

                return value;
            }

            public void run() {
                // Let's create the main dialog
                dialog = new Dialog(cordova.getActivity(), android.R.style.Theme_NoTitleBar);
                dialog.getWindow().getAttributes().windowAnimations = android.R.style.Animation_Dialog;
                dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
                dialog.setCancelable(true);
                dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {
                        public void onDismiss(DialogInterface dialog) {
                            try {
                                JSONObject obj = new JSONObject();
                                obj.put("type", CLOSE_EVENT);

                                sendUpdate(obj, false);
                            } catch (JSONException e) {
                                Log.d(LOG_TAG, "Should never happen");
                            }
                        }
                });

                // Main container layout
                LinearLayout main = new LinearLayout(cordova.getActivity());
                main.setOrientation(LinearLayout.VERTICAL);

                // Toolbar layout
                RelativeLayout toolbar = new RelativeLayout(cordova.getActivity());
                toolbar.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, this.dpToPixels(44)));
                toolbar.setPadding(this.dpToPixels(2), this.dpToPixels(2), this.dpToPixels(2), this.dpToPixels(2));
                toolbar.setHorizontalGravity(Gravity.LEFT);
                toolbar.setVerticalGravity(Gravity.TOP);

                // Action Button Container layout
                RelativeLayout actionButtonContainer = new RelativeLayout(cordova.getActivity());
                actionButtonContainer.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
                actionButtonContainer.setHorizontalGravity(Gravity.LEFT);
                actionButtonContainer.setVerticalGravity(Gravity.CENTER_VERTICAL);
                actionButtonContainer.setId(1);

                // Back button
                ImageButton back = new ImageButton(cordova.getActivity());
                RelativeLayout.LayoutParams backLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
                backLayoutParams.addRule(RelativeLayout.ALIGN_LEFT);
                back.setLayoutParams(backLayoutParams);
                back.setContentDescription("Back Button");
                back.setId(2);
                try {
                    back.setImageBitmap(loadDrawable("www/childbrowser/icon_arrow_left.png"));
                } catch (IOException e) {
                    Log.e(LOG_TAG, e.getMessage(), e);
                }
                back.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        goBack();
                    }
                });

                // Forward button
                ImageButton forward = new ImageButton(cordova.getActivity());
                RelativeLayout.LayoutParams forwardLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
                forwardLayoutParams.addRule(RelativeLayout.RIGHT_OF, 2);
                forward.setLayoutParams(forwardLayoutParams);
                forward.setContentDescription("Forward Button");
                forward.setId(3);
                try {
                    forward.setImageBitmap(loadDrawable("www/childbrowser/icon_arrow_right.png"));
                } catch (IOException e) {
                    Log.e(LOG_TAG, e.getMessage(), e);
                }
                forward.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        goForward();
                    }
                });

                // Edit Text Box
                edittext = new EditText(cordova.getActivity());
                RelativeLayout.LayoutParams textLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
                textLayoutParams.addRule(RelativeLayout.RIGHT_OF, 1);
                textLayoutParams.addRule(RelativeLayout.LEFT_OF, 5);
                edittext.setLayoutParams(textLayoutParams);
                edittext.setId(4);
                edittext.setSingleLine(true);
                edittext.setText(url);
                edittext.setInputType(InputType.TYPE_TEXT_VARIATION_URI);
                edittext.setImeOptions(EditorInfo.IME_ACTION_GO);
                edittext.setInputType(InputType.TYPE_NULL); // Will not except input... Makes the text NON-EDITABLE
                edittext.setOnKeyListener(new View.OnKeyListener() {
                    public boolean onKey(View v, int keyCode, KeyEvent event) {
                        // If the event is a key-down event on the "enter" button
                        if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER)) {
                          navigate(edittext.getText().toString());
                          return true;
                        }
                        return false;
                    }
                });

                // Close button
                ImageButton close = new ImageButton(cordova.getActivity());
                RelativeLayout.LayoutParams closeLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
                closeLayoutParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
                close.setLayoutParams(closeLayoutParams);
                forward.setContentDescription("Close Button");
                close.setId(5);
                try {
                    close.setImageBitmap(loadDrawable("www/childbrowser/icon_close.png"));
                } catch (IOException e) {
                    Log.e(LOG_TAG, e.getMessage(), e);
                }
                close.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        closeDialog();
                    }
                });

                // WebView
                webview = new WebView(cordova.getActivity());
                webview.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
                webview.setWebChromeClient(new WebChromeClient());
                WebViewClient client = new ChildBrowserClient(edittext);
                webview.setWebViewClient(client);
                WebSettings settings = webview.getSettings();
                settings.setJavaScriptEnabled(true);
                settings.setJavaScriptCanOpenWindowsAutomatically(true);
                settings.setBuiltInZoomControls(true);
                settings.setPluginsEnabled(true);
                settings.setDomStorageEnabled(true);
                webview.loadUrl(url);
                webview.setId(6);
                webview.getSettings().setLoadWithOverviewMode(true);
                webview.getSettings().setUseWideViewPort(true);
                webview.requestFocus();
                webview.requestFocusFromTouch();

                // Add the back and forward buttons to our action button container layout
                actionButtonContainer.addView(back);
                actionButtonContainer.addView(forward);

                // Add the views to our toolbar
                toolbar.addView(actionButtonContainer);
                toolbar.addView(edittext);
                toolbar.addView(close);

                // Don't add the toolbar if its been disabled
                if (getShowLocationBar()) {
                    // Add our toolbar to our main view/layout
                    main.addView(toolbar);
                }

                // Add our webview to our main view/layout
                main.addView(webview);

                WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
                lp.copyFrom(dialog.getWindow().getAttributes());
                lp.width = WindowManager.LayoutParams.FILL_PARENT;
                lp.height = WindowManager.LayoutParams.FILL_PARENT;

                dialog.setContentView(main);
                dialog.show();
                dialog.getWindow().setAttributes(lp);
            }

          private Bitmap loadDrawable(String filename) throws java.io.IOException {
              InputStream input = cordova.getActivity().getAssets().open(filename);
              return BitmapFactory.decodeStream(input);
          }
        };
        this.cordova.getActivity().runOnUiThread(runnable);
        return "";
    }

    /**
* Create a new plugin result and send it back to JavaScript
*
* @param obj a JSONObject contain event payload information
*/
    private void sendUpdate(JSONObject obj, boolean keepCallback) {
        if (this.browserCallbackId != null) {
            PluginResult result = new PluginResult(PluginResult.Status.OK, obj);
            result.setKeepCallback(keepCallback);
            **this.success(result, this.browserCallbackId);**
        }
    }

    /**
* The webview client receives notifications about appView
*/
    public class ChildBrowserClient extends WebViewClient {
        EditText edittext;

        /**
* Constructor.
*
* @param mContext
* @param edittext
*/
        public ChildBrowserClient(EditText mEditText) {
            this.edittext = mEditText;
        }

        /**
* Notify the host application that a page has started loading.
*
* @param view The webview initiating the callback.
* @param url The url of the page.
*/
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            super.onPageStarted(view, url, favicon);
            String newloc;
            if (url.startsWith("http:") || url.startsWith("https:") || url.startsWith("file:")) {
                newloc = url;
            } else {
                newloc = "http://" + url;
            }

            if (!newloc.equals(edittext.getText().toString())) {
                edittext.setText(newloc);
            }

            try {
                JSONObject obj = new JSONObject();
                obj.put("type", LOCATION_CHANGED_EVENT);
                obj.put("location", url);

                sendUpdate(obj, true);
            } catch (JSONException e) {
                Log.d("ChildBrowser", "This should never happen");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:02:32.910

使用新的 inappbrowser

[http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

这将替换 childbrowser

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-19T23:45:18.580

如果您仍然想使用 Childbrowser，这里是刷新的代码：[https ://github.com/mpeterka/phonegap-plugins/blob/6671b5f2656bd1cd2306367f908282a9c6d56864/Android/ChildBrowser/2.0.0/src/com/phonegap/plugins/childBrowser /ChildBrowser.java](https://github.com/mpeterka/phonegap-plugins/blob/6671b5f2656bd1cd2306367f908282a9c6d56864/Android/ChildBrowser/2.0.0/src/com/phonegap/plugins/childBrowser/ChildBrowser.java)

# php - 未获取数据

> ID：14291478
> 
> 赞同：0
> 
> 时间：2013-01-12T07:58:51.090
> 
> 标签：php, mysql, sql

我正在使用这段代码从数据库中获取数据，我得到`$data`了正确的获取，但是我没有在这个变量中正确获取数据，`$seldata`为什么会这样

```
<?php
    include_once("includes/connection.php");
    include_once("includes/session.php");
    //echo $_SESSION['uid'];
    $sql="SELECT * FROM employee WHERE eid = '{$_GET['id']}'";
    $result=mysql_query($sql);
    $data=mysql_fetch_array($result);
    echo "data".$data;
    $sel_valsql="select * FROM selected_candidate WHERE eid = '{$_GET['id']}'";
    $sresult=mysql_query($sel_valsql);
    $seldata=mysql_fetch_array($sresult);
    echo "seledata".$seldata;       
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:00:11.720

尝试这个，

```
$sql = "SELECT * FROM employee WHERE eid = '" . $_GET['id'] . "'"; 
```

作为旁注，`SQL Injection`如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用 PreparedStatements，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:11:50.513

```
<?php
include_once("includes/connection.php");
include_once("includes/session.php");
//echo $_SESSION['uid'];
$sql="SELECT * FROM employee WHERE eid = '".$_GET['id']."'";
$result=mysql_query($sql);
$data=mysql_fetch_array($result);
echo "data".$data;
$sel_valsql="select * FROM selected_candidate WHERE eid = '".$_GET['id']."'";
$sresult=mysql_query($sel_valsql);
$seldata=mysql_fetch_array($sresult);
echo "seledata".$seldata;       
?> 
```

注意：mysql_fetch_array() 返回一个结果数组，因此您需要执行 print_r($seldata) 才能查看结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T08:04:14.303

从where条件中删除单引号，即

```
$sql="SELECT * FROM employee WHERE eid = {$_GET['id']}"; 
```

或这样做：

```
$sql = "SELECT * FROM employee WHERE eid = '" . $_GET['id'] . "'"; 
```

# java - 在java中接受日期类型命令行参数

> ID：14291485
> 
> 赞同：1
> 
> 时间：2013-01-12T07:59:34.823
> 
> 标签：java, date, command-line-arguments, hsqldb

我正在尝试编写这个练习 CRUD 应用程序。这是一个应用程序来存储与出生日期和东西的联系人。由于我使用命令行来接受输入并将其存储在 HSQLDB 数据库中，因此我不确定如何接受`Date`类型参数。我尝试将它从 Sting 解析为 long，但它一直抛出一个`SQLDataException`.

这里是我用于这个变量的代码行

```
//this in the class with main

    private Date dob;

    public Date getDob() {
    return dob;
        }

    public void setDob(Date dob) {
            this.dob = dob;
        }

    System.out.println("Enter date of birth of "+n+" in the format dd/mm/yyyy
    String date = sc2.nextLine();
    long d = Date.parse(date);
    uv.setDob(d);

//class with all the business logic

public void addContact(String cb, String name, long dob, String email, String phno, String tag) {
sql = "insert into "+ cb + "(name,dob,email,phone,tag) values (?,?,?,?,?)";
 try {
    con = JDBCHelper.getConnection();
    ps1 = con.prepareStatement(sql);
    ps1.setString(1, name);
    ps1.setLong(2, dob);
    ps1.setString(3, email);
    ps1.setString(4,phno);
    ps1.setString(5, tag);
 }   
 catch(SQLException e) {
    e.printStackTrace();
 }

} 
```

它在输入日期时给我的例外是

```
java.sql.SQLSyntaxErrorException: incompatible data type in conversion
        at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.Util.throwError(Unknown Source)
    at org.hsqldb.jdbc.JDBCPreparedStatement.setParameter(Unknown Source)
    at org.hsqldb.jdbc.JDBCPreparedStatement.setLongParameter(Unknown Source)
    at org.hsqldb.jdbc.JDBCPreparedStatement.setLong(Unknown Source)
Caused by: org.hsqldb.HsqlException: incompatible data type in conversion
    at org.hsqldb.error.Error.error(Unknown Source)
    at org.hsqldb.error.Error.error(Unknown Source)
    at org.hsqldb.types.DateTimeType.convertJavaToSQL(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:09:19.437

您必须创建一个[sql Date](http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html#Date%28long%29)。构造函数需要很长时间，所以你应该没问题。

```
ps1.setDate(2, new java.sql.Date(dob)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:07:44.267

对于任意日期格式，使用`SimpleDateFormat`get `java.util.Date`，然后将其转换为 JDBC date: `java.sql.Date sqlDate = new java.sql.Date(date.getTime()))`。对于 SQL 兼容格式 (yyyy-MM-dd)，有`java.sql.Date.valueOf(String)`帮助程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T08:13:05.890

要解析迄今为止的字符串，您可以使用类[SimpleDateFormat](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/SimpleDateFormat.html)，例如：

```
SimpleDateFormat simpleDateFormat =
        new SimpleDateFormat("dd-MM-yyyy", Locale.ENGLISH);
Date date = simpleDateFormat.parse(date); 
```

然后你可以使用[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)`setDate(int, Date)`的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T08:21:18.113

第一步使用 SimpleDateFormat 解析日期，并确保输入采用您想要的格式。然后，您可以在准备好的语句中使用相同的值。

[另外，试试这个](https://stackoverflow.com/questions/5468540/string-to-date-in-a-preparedstatement)

# objective-c - 请帮助我在 XCode 中获取 CGSize 的一个实例的高度值

> ID：14291486
> 
> 赞同：1
> 
> 时间：2013-01-12T07:59:38.483
> 
> 标签：objective-c, cgsize

我是 XCode 编程的新手。我有以下代码：

```
CGSize firstSize = CGSizeMake(1.0,1.0);

NSLog(@"[height] %@", firstSize.height);
//... 
```

在运行时，我得到了结果：

```
height (null) 
```

有人可以帮我解释一下该代码为 firstSize.height 打印 null 吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:01:32.410

使用`%f`代替`%@`：

```
CGSize firstSize = CGSizeMake(1.0,1.0);
NSLog(@"[height] %f", firstSize.height); 
```

`%@`用于所有对象，这里你处理的是Core它的float类型，你需要使用`%f`float。

如果您还想要小数精度，请使用`%.2f`2 个小数位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T07:32:20.527

你也可以使用这个不错的功能

```
NSString * NSStringFromCGSize (
   CGSsize 大小
);

```

由 UIKit 在 UIGeometry.h 中定义（以及许多其他有用的功能）：

```
 NSLog(@"Size: %@",NSStringFromCGSize(firstSize)); 
```

# asp.net-mvc-4 - 信号器 + 统一 DI

> ID：14291487
> 
> 赞同：5
> 
> 时间：2013-01-12T07:59:52.310
> 
> 标签：asp.net-mvc-4, unity-container, signalr

我通过设置一个普通的集线器（包括 JS 文件）成功地在我的 MVC4 项目中使用了 Signalr，`/signalr/hubs`它可以正常工作。

现在我正在尝试统一设置 DI：

在`Global.asax`

```
UnityContainer = Bootstrapper.Initialise();
var unityDependencyResolver = new UnityDependencyResolver(UnityContainer);

// Used for MVC
DependencyResolver.SetResolver(unityDependencyResolver);

// Used for SignalR
GlobalHost.DependencyResolver = new SignalRUnityDependencyResolver(UnityContainer);

RouteTable.Routes.MapHubs(); 
```

`Bootstrapper.cs`

```
public static IUnityContainer Initialise()
{
    var unityContainer = new UnityContainer();

    unityContainer.RegisterType<IUsers, Users>();

    unityContainer.RegisterType<ChatHub>(new InjectionFactory(CreateMyHub));

    return unityContainer;
}

private static object CreateMyHub(IUnityContainer p)
{
    return new ChatHub(p.Resolve<IUsers>());
} 
```

和集线器： public class UserHub : Hub { private readonly IUsers _users;

```
public ChatHub(IUsers users)
{
    _users = users;
}

public void Send(String message)
{
    Clients.All.addMessage(message);
} 
```

}

我的 SignalRUnityDependencyResolver.cs

```
public class SignalRUnityDependencyResolver : DefaultDependencyResolver
{
    private readonly IUnityContainer _container;

    public SignalRUnityDependencyResolver(IUnityContainer container)
    {
        if (container == null)
        {
            throw new ArgumentNullException("container", "Containet cannot be null");
        }
        _container = container;
    }

    public override Object GetService(Type serviceType)
    {
        return _container.IsRegistered(serviceType) ? _container.Resolve(serviceType) : base.GetService(serviceType);
    }

    public override IEnumerable<Object> GetServices(Type serviceType)
    {
        return _container.IsRegistered(serviceType) ? _container.ResolveAll(serviceType) : base.GetServices(serviceType);
    }
} 
```

这适用于非集线器，因为所有依赖项都已解决，但现在`<script src="~/signalr/hubs"></script>`不再生成 javascript 文件。

我该如何调试这一代的 JS，罪魁祸首在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-12T01:47:43.500

您可以在配置 EnableJavaScriptProxies = false 中使用它

像这样的代码：

```
 app.Map("/signalr", map =>
        {
            map.UseCors(CorsOptions.AllowAll);
            var hubConfiguration = new HubConfiguration
            {
                EnableJSONP = true,

                EnableJavaScriptProxies = false
            };

            map.RunSignalR(hubConfiguration);
        }); 
```

# vb.net-2010 - WebBrowser 控件 (VB.NET) 新选项卡

> ID：14291489
> 
> 赞同：0
> 
> 时间：2013-01-12T08:00:00.470
> 
> 标签：vb.net-2010

我在 vb.net (Windows 窗体应用程序) 中遇到了 WebBrowser Control 的问题。问题是当我单击打开新选项卡的超链接时，它会打开新的 Internet Explorer 窗口吗？如何在我的选项卡控件而不是 Internet Explorer 中打开新选项卡？我在网上搜索，但我只找到了 c# 的结果。例如这个结果[Open link in new TAB (WebBrowser Control)](https://stackoverflow.com/questions/1286746/open-link-in-new-tab-webbrowser-control)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:11:57.730

来自其他链接的有问题的代码......

```
Private Sub InitializeBrowserEvents(SourceBrowser As ExtendedWebBrowser)
SourceBrowser.NewWindow2 += New EventHandler(Of NewWindow2EventArgs)(AddressOf SourceBrowser_NewWindow2)
End Sub
'
Private Sub SourceBrowser_NewWindow2(sender As Object, e As NewWindow2EventArgs)
Dim NewTabPage As New TabPage() With { Key .Text = "Loading..." }
Dim NewTabBrowser As New ExtendedWebBrowser() With { Key .Parent = NewTabPage, Key .Dock = DockStyle.Fill, Key .Tag = NewTabPage }
  '
  e.PPDisp = NewTabBrowser.Application
  InitializeBrowserEvents(NewTabBrowser)
  '
  Tabs.TabPages.Add(NewTabPage)
  Tabs.SelectedTab = NewTabPage
End Sub
'
Private Sub Form1_Load(sender As Object, e As EventArgs)
  InitializeBrowserEvents(InitialTabBrowser)
End Sub 
```

请注意，我使用此链接转换代码...

[http://www.developerfusion.com/tools/convert/csharp-to-vb/?batchId=2183e979-2b56-4c82-a7d5-c0822e7f0bca](http://www.developerfusion.com/tools/convert/csharp-to-vb/?batchId=2183e979-2b56-4c82-a7d5-c0822e7f0bca)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T01:40:56.560

最简单的解决方案是将我的 Tabbed_EI .dll 添加到您的工具箱，并将您的应用程序按钮单击和其他事件链接到 Tabbed_EI 的公共/全局变量、对象和 Subs。位于[这里](http://amerigoware1.wix.com/amerigoware#!tabbed-browser/c1pb6)

否则，您可以使用 Webbrowser.newWindow 事件并添加“e.cancel = true”

# c - 优化/使用指针访问数组

> ID：14291493
> 
> 赞同：0
> 
> 时间：2013-01-12T08:00:14.480
> 
> 标签：c, optimization

我有一个关于优化的练习。我需要优化一个旋转 45 度的程序。我知道使用指针访问数组更有效，所以我尝试了下面的更改 - 原始代码：

```
RGB* nrgb = (RGB *)malloc(imgSizeXY*3);//3=sizeof(RGB)
//...
for (i=imgSizeY-1; i>=0; --i)
    {
        for (j=imgSizeX-1; j>=0; --j)
        {
                //...
                int y=(i*imgSizeX+j);
                nrgb[y].r = *imgInd; //*imgInd computed earlier 
```

变化：

```
 RGB* nrgb = (RGB *)malloc(imgSizeXY*3);//3=sizeof(RGB)
    RGB* rgbInd = nrgb+imgSizeXY-1;
    for (i=imgSizeY-1; i>=0; --i)
    {
        for (j=imgSizeX-1; j>=0; --j)
        {
              rgbInd->r=*imgInd;
              --rgbInd; 
```

但是当使用指针时，程序会产生错误的输出。我已经盯着它看了好几个小时，仍然不知道为什么。有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:09:47.860

通过指针访问数组元素和通过索引访问没有区别。你可以看到，如果产生汇编代码。索引记法更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:22:19.927

L1 高速缓存命中比 L2 高速缓存命中快一个数量级，而 L2 高速缓存命中本身比主存储器访问快一个数量级。请参阅[每个计算机科学家都应该知道的数字](https://gist.github.com/2843375)。对于图像操作，您预计您将不得不进行大量的内存读取和写入，因此您应该期望在优化代码时主要关注缓存效率。

所以集中精力寻找更有效地使用缓存的方法，不要太担心你的编译器没有优化简单的指针算法。

# java - 我如何编写一个简单的随机事实生成器

> ID：14291494
> 
> 赞同：-4
> 
> 时间：2013-01-12T08:00:43.793
> 
> 标签：java, random

我正在做一个小项目，其中涉及制作一个简单的随机事实生成器-只需单击一个按钮，就会从事实列表中随机出现一个新事实-有点像[WhatTheHeckHasObamaDoneSoFar？](http://whattheheckhasobamadonesofar.com/)

所以我对 Java 还是很陌生，但这很简单，所以我应该能够在一点帮助下完成它！

我不确定开始 - 我检查了许多随机数生成器/名称生成器，它们有些不同。我应该使用带有事实的数组吗？如何编写代码以随机显示数组中的事实？我什至不太确定数组，它们是不同的文件还是主 .java 文件上的部分代码？

任何帮助，将不胜感激！如果有人能给我一个随机事实生成器的代码，我可以重新调整到我自己的事实，那对我来说超级容易吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:05:09.893

将您的事实（`String`实例）收集到一个列表中并对其进行维护（根据需要添加、删除、更新条目）。

```
List<String> facts = new ArrayList<String>();
facts.add("I'm a fact myself!");
... 
```

然后生成一个随机整数，用于通过其索引选择事实，即随机整数将是您将使用的索引。

```
Random random = new Random();
int index = random.nextInt(100); // Assuming your list contains 100 elements.

String randomFact = facts.get(index); // yepp your random choice is ready. 
```

# ruby-on-rails - Heroku：RubyGem 版本错误：rails(2.3.15 not = 2.3.14)

> ID：14291497
> 
> 赞同：0
> 
> 时间：2013-01-12T08:01:36.433
> 
> 标签：ruby-on-rails, heroku

当然，你们都听说过 Rails 中需要更新的最新安全漏洞。我目前使用的是 2.3.14 版本的 Rails，因此尝试更新到 2.3.15（修补版本）。

在我的本地机器上，这个过程真的很*顺利*。但是在将更改推送到 Heroku 并等待部署之后，我的应用程序没有启动。它在日志中说

```
RubyGem version error: rails(2.3.15 not = 2.3.14) 
```

不，怎么会这样？我的`Gemfile`说

```
gem 'rails', '~> 2.3.15' 
```

我`Gemfile.lock`说

```
GEM
  specs:
    rails (2.3.15) 
```

最后，Heroku 告诉我

```
Installing rails (2.3.15) 
```

真的，问题出在哪里？其他人有这个问题吗？

## 解决方案

查尔斯的答案包括解决方案，即将in更新`RAILS_GEM_VERSION`为.`2.3.15``config/environment.rb`

## 重要通知

如果您有同样的烦恼，请**立即使用**[建议的解决方案](https://groups.google.com/forum/?fromgroups#!topic/rubyonrails-security/61bkgvnSGTQ) 之一。已知 Rails 应用程序损坏的案例！

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:45:36.533

It seems like you also need to do change `RAILS_GEM_VERSION` to `3.2.15` in environment.rb:

If you find yourself having to do the whole upgrading process over again, you can follow these steps:

*   Run your tests and make sure everything works
*   Open up a new branch through git (`git checkout -b new_rails`)
*   Change Rails 3.2.15 in your Gemfile
*   Change RAILS_GEM_VERSION to '3.2.15' in environment.rb
*   Run `bundle update rails`
*   Run the tests and see if everything still works
*   If not, reverse back to the old branch by doing `git checkout master`; optionally delete the new branch by doing `git branch -D new_rails`

Taken from this question: [Site dead. "ACTION REQUIRED: Rails Security Vulnerability "](https://stackoverflow.com/questions/14295007/site-dead-action-required-rails-security-vulnerability/14295186#14295186)**

# string - 如何使用 Current url 字符串来创建 img 名称？

> ID：14291500
> 
> 赞同：0
> 
> 时间：2013-01-12T08:02:08.383
> 
> 标签：string, image, url

如何创建以当前 Url 自动命名的图像 src？例如 xxy.html 为 xxy.jpg 创建一个 img src，.html 和 .jpg 文件的文件路径相同，所有图像都是 .jpg，所有页面都是 .html。我没有使用 php，但可以实现 javascript、jquery 或 css 解决方案！

如果这没有意义，我只需要一个读取当前页面 url 的代码，并启用 img src="(name of current page -".html") .jpg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:32:08.820

一种快速而肮脏的方式：

```
<script>document.write('<img src="' + location.pathname.replace(/\.html$/, '.jpg') + '">')</script> 
```

把它放在你希望你的图像去的 HTML 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T08:32:24.400

在页面加载期间；

```
`<img src="" id=img1>` 
```

页面加载后；在页面末尾：

```
<script>
document.getElementById('img1').src= window.location.replace(".html", ".jpg");
</script> 
```

我还没有测试过代码。但它给了你一个好主意。

# git - 为什么您的新克隆不包含所有更改

> ID：14291505
> 
> 赞同：0
> 
> 时间：2013-01-12T08:03:09.163
> 
> 标签：git

我已经向 git responsitory 提交了几个变更集并推送了。

我可以在远程响应中看到我的变更集，但是在我克隆了一个新的存储库之后。

我看不到几个文件的最新更改。我只有一个分支。

```
$ git branch
* master

$ git log
showing all the logs in the right way

$ git log <filename1> #look at certain file <p>
It does not show the newest change on that file

$ git log --full-history <filename1> <p>
It is showing the newest change on that file 
```

我希望我的文件获取最新的更改。

我该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:34:08.660

克隆存储库时，只检出一个分支，通常是 master。这就是为什么您的克隆器存储库仅列出的原因`master`。

尝试运行`git branch --remotes`，它应该显示原始存储库中的所有分支。

关于您丢失的更改，这些可能位于`master`. 如果是这种情况，您只需要检查您工作的正确分支：

```
git checkout origin/someBranch 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T08:17:29.230

'git log' 和 'git log --full-history' 之间的唯一区别是第一个表单将隐藏某些条目，如果它们并没有真正导致最终结果。我认为它只影响分支，但它可能是打击你的东西。

[您可以在手册页](http://www.kernel.org/pub/software/scm/git/docs/git-log.html)中阅读有关此不同的信息`git log`

感觉两个日志的最终结果是相同还是不同？

# html - 保存图片不扩展

> ID：14291507
> 
> 赞同：0
> 
> 时间：2013-01-12T08:03:26.730
> 
> 标签：html, image-uploading

我曾开发过许多允许用户上传和显示图片（如个人资料图片、背景图片等）的网络应用程序。我遇到的一个问题是您通常提供用户可以使用的特定格式（即 jpg、png、jpeg、gif 等）。

问题是，假设您有个人资料图片，有些人可能会上传 jpeg、一些 png 和一些 gif。您应该以什么格式保存文件？即“ **profile.jpeg** ”、“ **profile.png** ”或简单的“ **profile** ”。

我注意到您可以简单地排除文件扩展名，然后浏览器打开图像，但这安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:22:01.593

文件扩展名不决定文件格式。您可以上传以 .png 结尾的 .gif，浏览器将毫无困难地显示它。（您也可以使用 .exe 或 .foo 或其他任何文件，图像仍会显示。）

换句话说，扩展与安全无关。

另一方面，我不知道将未知文件传递给浏览器以显示为图像的任何安全风险。如果您有`<img src="virus.exe">`，浏览器将什么也不做，因为该文件不是有效的图像文件。

如果您想确定，您可以在服务器上检查上传的文件是否为有效图像，如果不是则丢弃。

# python - 令人困惑的python继承

> ID：14291508
> 
> 赞同：0
> 
> 时间：2013-01-12T08:03:35.720
> 
> 标签：python, inheritance

* * *

```
class BaseA(object):
    authors = ['a', 'b']
    author_list = authors

class BaseB(object):
    authors = ['a', 'b']

    def __init__(self, *arg, **kwargs):
        self.author_list = self.authors

class ChildA(BaseA):
    authors = ['c', 'd']

class ChildB(BaseB):
    authors = ['c', 'd']

child_a = ChildA()
child_b = ChildB()
print(child_a.author_list)
print(child_b.author_list)
>>> ['a', 'b']
>>> ['c', 'd'] 
```

代码有什么不同？为什么我会得到不同的结果？

我很困惑为什么不覆盖父 author_list 属性。

你能告诉我python继承的原理吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T08:09:09.530

块内的材料`class`是类本身的一部分，并且在您定义类时执行*一次。*材料 in`__init__`是每个*实例的，每次实例化类时每个实例*执行一次。

在您的第一个示例 ( `BaseA`) 中，您创建一个类属性`authors`，然后创建另一个`author_list`指向相同值的属性。这就对了。没有别的事情发生。`ChildA`继承自的事实`BaseA`不会导致`author_list = authors`重新执行。 `author_list`结束并完成了一次`BaseA`定义。

在您的第二个示例 ( `BaseB`) 中，您创建了一个类属性`authors`。然后在`__init__`你创建一个指向相同值的新实例属性。由于您在 中执行此操作`__init__`，因此会为每个实例重新执行此操作。所以当你实例化时`BaseB`，它会得到新的属性。

请注意，您正在检查实例`child_a`和`child_b`. 如果您在类 (`ChildA.author_list`和`ChildB.author_list`) 上检查它们，您将看到两者具有相同的值 ( `['a', 'b']`)。因为您在 ChildB 中的操作发生在 中`__init__`，所以它仅在您实际实例化该类时生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T08:08:23.420

不同之处在于，在第二个示例中，`author_list`是在创建对象实例时设置的。

当你定义类时`BaseA`，你定义了类成员`author_list`，就是这样，所以当你创建一个`ChildA`什么都没有发生的实例时`author_list`。它只是继承。

当您定义`BaseB`时没有成员`author_list`。在创建 的实例时将其创建为实例变量`BaseB`。因此，当您创建相同事情的实例时`ChildB`，会发生相同的事情，但是由于`authors`被重新定义，那么它将使用的新值`authors`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-08T23:54:09.933

## 编写 Python 代码的推荐方法：

```
class BaseA(object):
    def __init__(self):
        self.authors = ['a', 'b']

class BaseB(object):
    def __init__(self):
        self.authors = ['a', 'b']

class ChildA(BaseA):
    def __init__(self):
        self.authors = ['c', 'd']

class ChildB(BaseB):
    def __init__(self):
        self.authors = ['c', 'd']

child_a = ChildA()
child_b = ChildB()
print(child_a.authors)
print(child_b.authors)
>>> ['c', 'd']
>>> ['c', 'd'] 
```

## 调用超类（Base Parent 类）的推荐方法：

```
class BaseA(object):
    def __init__(self):
        self.authors = ['a', 'b']

class BaseB(object):
    def __init__(self):
        self.authors = ['a', 'b']

class ChildA(BaseA):
    def __init__(self):
        self.authors = ['c', 'd']
        super().__init__()

class ChildB(BaseB):
    def __init__(self):
        self.authors = ['c', 'd']
        BaseB.__init__(self)

child_a = ChildA()
child_b = ChildB()
print(child_a.authors)
print(child_b.authors)
>>> ['a', 'b']
>>> ['a', 'b'] 
```

### 在结尾使用一个下划线的深奥超类调用`__init__ (__init_)`：

```
class BaseA(object):
    def __init__(self):
        self.authors = ['a', 'b']

class BaseB(object):
    def __init__(self):
        self.authors = ['a', 'b']

class ChildA(BaseA):
    def __init_(self):
        self.authors = ['c', 'd']

class ChildB(BaseB):
    def __init_(self):
        self.authors = ['c', 'd']

child_a = ChildA()
child_b = ChildB()
print(child_a.authors)
print(child_b.authors)
>>> ['a', 'b']
>>> ['a', 'b'] 
```

# 警告

### 使用深奥的超类调用会导致失去对子变量的所有访问权限！

对子类（Child 类）中的方法的访问仍然可以访问，但对子类（Child 类）中变量的所有访问都将完全丢失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-08T22:43:22.640

在您的 BaseB`__init__`函数中，您调用的是 Child 的作者，而不是 Parent 的作者。如果你想打电话给父母的作者，你会使用`BaseB.authors`而不是`self.authors`：

```
class BaseA(object):
    authors = ['a', 'b']
    author_list = authors

class BaseB(object):
    authors = ['a', 'b']

    def __init__(self, *arg, **kwargs):
        self.author_list = BaseB.authors

class ChildA(BaseA):
    authors = ['c', 'd']

class ChildB(BaseB):
    authors = ['c', 'd']

child_a = ChildA()
child_b = ChildB()
print(child_a.author_list)
print(child_b.author_list)
>>> ['a', 'b']
>>> ['a', 'b'] 
```

如果您将连接 ParentB 和 ChildB 的作者，那么您将同时使用`BaseB.authors`and `self.authors`：

```
class BaseA(object):
    authors = ['a', 'b']
    author_list = authors

class BaseB(object):
    authors = ['a', 'b']

    def __init__(self, *arg, **kwargs):
        self.author_list = BaseB.authors + self.authors

class ChildA(BaseA):
    authors = ['c', 'd']

class ChildB(BaseB):
    authors = ['c', 'd']

child_a = ChildA()
child_b = ChildB()
print(child_a.author_list)
print(child_b.author_list)
>>> ['a', 'b']
>>> ['a', 'b', 'c', 'd'] 
```

# 覆盖

```
class BaseA(object):
    authors = ['a', 'b']
    author_list = authors

class BaseB(object):
    authors = ['a', 'b']

    def __init__(self, *arg, **kwargs):
        self.author_list = self.authors

class ChildA(BaseA):
    authors = ['c', 'd']
    def __init__(self, *arg, **kwargs):
        self.author_list = self.authors

class ChildB(BaseB):
    authors = ['c', 'd']

child_a = ChildA()
child_b = ChildB()
print(child_a.author_list)
print(child_b.author_list)
>>> ['c', 'd']
>>> ['c', 'd'] 
```

# emacs - Emacs 中是否包含一个函数来递归遍历目录结构并调用函数？

> ID：14291512
> 
> 赞同：6
> 
> 时间：2013-01-12T08:04:45.230
> 
> 标签：emacs, elisp

我想从特定点递归地遍历目录结构，并在每个级别调用版权更新目录。

Emacs 24 中是否包含有助于解决此问题的功能？例如：

```
(recursive-directory-walk "~/src/foo" '(copyright-update-directory)) 
```

如果不存在这样的功能，那么一些关于开始实现这个（或工作实现）的指针会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-22T03:39:52.600

MELPA 上的 f.el 库 ( [github](https://github.com/rejeep/f.el) ) 包含用于文件系统遍历的函数。

```
(mapc 'copyright-update-directory (f-directories "~/path" nil t)) 
```

这将递归地降低目录层次结构。请参阅[f-directories](https://github.com/rejeep/f.el#f-directories-path-optional-fn-recursive)的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T09:39:25.827

不确定是否存在，但不是很难编写自己的。

```
(defun folder-dirs (folder)
  (delete-if-not 'file-directory-p
    (mapcar (lambda(arg) (file-name-as-directory (concat (file-name-as-directory folder) arg)))
      (delete-if (lambda (arg) (or (string= ".." arg) (string= "." arg)))
        (directory-files folder)))))

(defun recursively-run-on-every-dir (fn folder)
"FN - function, taking one argument; 
FOLDER - initial forder"
  (funcall fn folder)
  (mapc (lambda(arg) (recursively-run-on-every-dir fn arg))
    (folder-dirs folder))
  nil)

;; use your function instead of print
(recursively-run-on-every-dir 'print "/your/initial/path/") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-21T20:54:34.383

只需使用`find-lisp`

```
(require 'find-lisp)

;;  a simple function, just to test
(defun my-funct (x)
  (princ x)
  (terpri))

(mapc 'my-funct (find-lisp-find-files "~/src/foo/" "\\.txt$")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-14T16:34:34.693

我认为[Chris Barrett 的回答](https://stackoverflow.com/a/19508559/596361)是正确且惯用的。但是，出于学习目的，我想实现 Python 的[`os.walk`](http://docs.python.org/2/library/os.html#os.walk)，一个用于广度优先遍历目录树的通用函数。我使用[`dash.el`](https://github.com/magnars/dash.el)了列表库以及[`f.el`](https://github.com/rejeep/f.el)文件和目录库。这是[从 Python 翻译而来](https://codereview.stackexchange.com/q/44328/12332)的基于堆栈的实现。

```
(defun walk (path)
  (let ((stack (list (f-full path)))
        result)
    (while stack
      (let* ((path (pop stack))
             (ds_ (f-directories path))
             (ds (-map 'f-relative ds_))
             (fs (-map 'f-relative (f-files path))))
        (--each ds_ (!cons it stack))
        (!cons (list path ds fs) result)))
    (reverse result))) 
```

见函数：[`f-full`](https://github.com/rejeep/f.el#f-full-path), [`pop`](https://www.gnu.org/software/emacs/manual/html_node/elisp/List-Elements.html#index-pop-317), [`f-directories`](https://github.com/rejeep/f.el#f-directories-path-optional-fn-recursive), [`f-relative`](https://github.com/rejeep/f.el#f-relative-path-optional-dir), [`f-files`](https://github.com/rejeep/f.el#f-files-path-optional-fn-recursive), [`--each`](https://github.com/magnars/dash.el#-each-list-fn), [`!cons`](https://github.com/magnars/dash.el#cons-car-cdr), [`reverse`](https://www.gnu.org/software/emacs/manual/html_node/elisp/Building-Lists.html#index-reverse-336). 现在你可以在循环中使用它，就像在 Python 中使用它一样：

```
(loop for (b ds fs) in (walk path)
      do (copyright-update-directory b "*")) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-15T16:03:56.547

Emacs 有内置函数[directory-files-recursively](https://www.gnu.org/software/emacs/manual/html_node/elisp/Contents-of-Directories.html)用于此目的：

```
(mapc #'YOUR-FUNCTION
      (remove-if-not
       #'file-directory-p       ;only dirs
       (directory-files-recursively YOUR-DIRECTORY "" t))) 
```

[它也比另一个答案中提到的f-directories](https://github.com/rejeep/f.el#f-directories-path-optional-fn-recursive)函数快得多，因为它不使用内部递归。

# .net - 设计只能具有两个外键之一的数据库实体？

> ID：14291517
> 
> 赞同：5
> 
> 时间：2013-01-12T08:05:14.070
> 
> 标签：.net, database, hibernate, nhibernate, database-design

我们系统中的一个进程负责按照一定的规则发送文件。根据文件名，文件可以发送给客户或工厂（但不能同时发送给两者）。

规则的每一行都将包含文件名过滤器、它所属的客户和工厂，并指定其他参数，例如目标文件夹、文件是否需要加密、拆分、合并、重命名等。

在这个过程中，我们会知道一个文件所属的工厂和客户，我们会查看工厂和客户的规则并对匹配过滤器的文件应用规则（将优先考虑客户规则）

在数据库中表示规则与客户/工厂之间关系的最佳方式是什么？我们已经在数据库中有 Customer 和 Factory 表，但我想不出表示这种关系的最佳方式。每行规则都将有一个 FK（客户或工厂，它不能同时拥有，也不能没有）。表示这一点的一种方法是：

![在此处输入图像描述](../Images/dabf3b1c81b7caa4a496dca774026f51.png)

但这并没有捕捉到它只能具有两个 FK 中的一个的事实。我们可以设置一个约束，其中一个必须是有效的 FK，另一个必须为空，但它似乎不是很干净。此外，如果我们有其他规则的决定因素（例如国家），它会变得更丑陋。知道如何改进这个设计吗？

我认为这也将有助于指定系统是在 .NET 中开发的，并且我们使用对象关系映射，即 NHibernate。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T08:27:32.110

看看[表继承](http://www.sqlteam.com/article/implementing-table-inheritance-in-sql-server)。

你可以使用这样的东西：

```
Rule
  int RuleId
  int TypeRule
  PK (RuleId)
  UQ (RuleId, TypeRule)

CustomerRule
  int TypeRule = 1
  int CustomerId
  FK (TypeRule, RuleId)
  FK CustomerId

FactoryRule
  int TypeRule = 2
  int FactoryId
  FK (TypeRule, RuleId)
  FK FactoryId 
```

使用这样的系统，您要么拥有客户规则，要么拥有工厂规则，而不是两者兼而有之。另外，明天添加 CountryRule 很容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T16:59:31.133

Using Hibernate and its [Table-per-Subclass Mapping Strategy](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/inheritance.html#inheritance-tablepersubclass) you can define an abstract Rule-Class, specialize it for Customers and Factories and map the class hierarchy to the relational database schema like this:

![Mapping](../Images/5a80a51307306e0bfa8ec735c934dc6a.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T08:17:53.227

我知道您提到了您不想为此使用约束的事实，但是阅读任何答案以及它们指向表继承方向的事实，我想谈谈我的个人经历。

数据库并不是要复制面向对象的原则，我不确定 NHibernate，但是 Entity Framework 非常严格，一旦你实现了这个继承，你可能会遇到你想要继承几个类型的事实，这是不可能的（在 EF 中这是事实）。我的意思是你有一个可以定义为customerrule和factoryrule的规则（或者系统将来可能知道的任何其他类型的规则）。

我已经完成了表继承和约束的实现，后者最终为我提供了最灵活的模型，我仍然对这个解决方案非常满意。您正在考虑以最少的努力获得最简单的方法，这很好，但有时复杂的问题需要不那么简单的解决方案只是一个事实。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T23:02:26.580

引入一个新实体而不是 2 个 FK 怎么样？它将有3个字段，即自己的PK和两个FK。比您可以引入一些自定义逻辑来使其中一个 FK 为空。从逻辑上讲，您对于该任务只有一个 FK，并且各个实体负责处理细节，这在逻辑上会更清楚。

# java - 与此字符序列不匹配的正则表达式

> ID：14291521
> 
> 赞同：-4
> 
> 时间：2013-01-12T08:05:28.800
> 
> 标签：java, regex

这是我的正则表达式，我正在尝试搜索所有特殊字符以便我可以转义它们。

```
(\(|\)|\[|\]|\{|\}|\?|\+|\\|\.|\$|\^|\*|\||\!|\&|\-|\@|\#|\%|\_|\"|\:|\<|\>|\/|\;|\'|\`|\~) 
```

我的问题是，我不想仅在按顺序出现时才转义一些特殊字符

像这样`(.*)`

所以，让我们考虑一个例子。

```
Sting message = "Hi, Mr.Xyz! Your account number is :- (1234567890) , (,*) &$@%#*(....))((("; 
```

根据当前的正则表达式转义后，我得到的是，

```
Hi, Mr\.Xyz\! Your account number is \:\- \(1234567890\) , \(,\*\) \&\$\@\%\#\*\(\.\.\.\.\)\)\(\(\( 
```

但是不想逃避这部分`(.*)`想要保持原样。

我上面的正则表达式仅用于搜索，所以我不想与这部分匹配，`(.*)`我的问题将得到解决

任何人都可以建议不逃避该部分字符串的正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T10:04:58.083

有关如何使用正则表达式执行此操作的信息，请参阅@nhahtdh。

作为替代方案，这是一个不使用正则表达式的解决方案，而是使用 Guava 的[CharMatcher](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/CharMatcher.html)：

```
private static final CharMatcher SPECIAL
    = CharMatcher.anyOf("allspecialcharshere");
private static final String NO_ESCAPE = "(.*)";

public String doEncode(String input)
{
    StringBuilder sb = new StringBuilder(input.length());

    String tmp = input;

    while (!tmp.isEmpty()) {
        if (tmp.startsWith(NO_ESCAPE)) {
            sb.append(NO_ESCAPE);
            tmp = tmp.substring(NO_ESCAPE.length());
            continue;
        }
        char c = tmp.charAt(0);
        if (SPECIAL.matches(c))
            sb.append('\\');
        sb.append(c);
        tmp = tmp.substring(1);
    }

    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T14:29:55.207

**这个答案只是为了证明这种可能性。在生产代码中使用它是有问题的。**

使用 Java String`replaceAll`函数是可能的：

```
String input = "Hi, Mr.Xyz! Your account number is :- (1234567890) , (.*) &$@%#*(....))(((";
String output = input.replaceAll("\\G((?:[^()\\[\\]{}?+\\\\.$^*|!&@#%_\":<>/;'`~-]|\\Q(.*)\\E)*+)([()\\[\\]{}?+\\\\.$^*|!&@#%_\":<>/;'`~-])", "$1\\\\$2"); 
```

结果：

```
"Hi, Mr\.Xyz\! Your account number is \:\- \(1234567890\) , (.*) \&\$\@\%\#\*\(\.\.\.\.\)\)\(\(\(" 
```

另一个测试：

```
String input = "(.*) sdfHi test message <> >>>>><<<<f<f<,,,,<> <>(.*) sdf (.*)  sdf (.*)"; 
```

结果：

```
"(.*) sdfHi test message \<\> \>\>\>\>\>\<\<\<\<f\<f\<,,,,\<\> \<\>(.*) sdf (.*)  sdf (.*)" 
```

* * *

**解释**

原始正则表达式：

```
\G((?:[^()\[\]{}?+\\.$^*|!&@#%_":<>/;'`~-]|\Q(.*)\E)*+)([()\[\]{}?+\\.$^*|!&@#%_":<>/;'`~-]) 
```

请注意，`\`当在字符串中指定正则表达式时，它会再次转义，并且`"`需要转义。上面可以看到字符串中生成的正则表达式。

原始替换字符串：

```
$1\\$2 
```

由于`$`在替换字符串中具有特殊含义，并且您希望将其**保留**为`$2`，因此您需要转义 ，`\`这样`\`就不会转义`$`. 并将替换字符串放在带引号的字符串中，您需要`\`将`\`.

在我们剖析怪物之前，让我们谈谈这个想法。我们将使用非特殊字符，以及我们不想替换的序列，并且尽可能多地使用。下一个字符要么是不构成我们不想替换的序列的特殊字符，要么是字符串的结尾（这意味着我们已经找到了所有需要替换的字符（如果有的话））。

自然，我们可以将任意字符串视为由以下许多连续模式组成：`[0 or more (non-special character or special pattern not to be replace)][special character]`，并且字符串以 . 结尾`[0 or more (non-special character or special pattern not to be replace)]`。

`replaceAll`与不带正则表达式的函数一起使用时，`\G`可能会找到不连续的匹配项，这可能会在不被替换的序列中间切开并弄乱。`\G`表示最后一场比赛的边界，可用于确保下一场比赛从上一场比赛结束的地方开始。

*   `\G`: 从最后一场比赛开始

*   `((?:[^()\[\]{}?+\\.$^*|!&@#%_":<>/;'`~-]|\Q(.\*)\E)*+)`：捕获0个或多个，非特殊字符或特殊模式不被替换。请注意，我在 .`+`之后添加了所有格限定符`*`。这将防止引擎在找不到我们在此之后指定的特殊字符时回溯。

    *   `[^()\[\]{}?+\\.$^*|!&@#%_":<>/;'`~-]`: 特殊字符的否定字符类。

    *   `\Q(.*)\E`: 特殊序列`(.*)`不被替换，字面由`\Q`and引用`\E`。

*   `([()\[\]{}?+\\.$^*|!&@#%_":<>/;'`~-])`：捕获单个特殊字符。

整个正则表达式将匹配最小长度为 1（特殊字符）的字符串。第一个捕获组包含不应替换的部分，第二个捕获组包含应替换的特殊字符。

# wordpress - WordPress 中的 .htaccess 错误：此处不允许重写引擎

> ID：14291522
> 
> 赞同：2
> 
> 时间：2013-01-12T08:05:36.533
> 
> 标签：wordpress, apache, .htaccess, permalinks, xampp

我真的受够了。我已经尝试了一切来获得漂亮的永久链接，但我最终还是收到了 500 条消息或未找到对象的消息。我仍在尝试让它在本地环境中工作。我在我的`http.conf`文件和文件中将 Override 设置为 all `http-xammp.conf`，FollowSymLinks 到位，这是我的`.htaccess`文件：

```
Options -Indexes
Options +FollowSymLinks

# BEGIN WordPress

RewriteEngine On
RewriteBase /xampp/wordpress/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l 
RewriteRule ^(.+)$ /?file_name=$1  [L,QSA]
RewriteRule ^([^/]+/[^/]+)/([^/]+)/([^/]+)(/.+)?$ $1$4?$2=$3 [QSA,N]
RewriteCond $1 !.+\.xyz$
RewriteRule ^([^/]+/[^/]+)$ $1.xyz [L]

# END WordPress 
```

但我仍然会遇到错误！我是整个 htaccess 的新手，所以任何帮助都将不胜感激。

我现在得到的错误是：

> “C:/xampp/htdocs/xampp/wordpress/.htaccess: RewriteEngine 不允许在这里，引用者： [http](http://www.mydomain.com/xampp/wordpress/wp-admin/options-permalink.php) ://www.mydomain.com/xampp/wordpress/wp-admin/options-permalink.php ”

但我是管理员，我可以完全控制？有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T08:17:01.983

您收到的错误意味着未打开正确的覆盖。Htaccess 文件“覆盖”配置文件定义的设置，配置文件中的`AllowOverride`指令决定了哪些类型的设置可以被 htaccess 文件覆盖。正如您[在 Apache mod_rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)中看到的那样，每个**Override**指令都有一个列表，这意味着您需要在配置中进行设置。

在您的 xampp 配置文件中的某处，您应该会看到一个`AllowOverride`指令。您可以添加`FileInfo`到该列表，也可以将其更改为`All`：

```
AllowOverride FileInfo 
```

或者

```
AllowOverride All 
```

这应该允许您在 htaccess 文件中使用 mod_rewrite 指令。

* * *

编辑：

> 我应该把它放在哪里？我把允许覆盖无处不在

查看[Apache 文档`AllowOverride`](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)，您需要将其放入`<Directory>`容器中。所以是这样的：

```
<Directory "/path/to/your/xampp/wordpress">
    AllowOverride All
</Directory> 
```

您*必须*确保“/path/to/your/xampp/wordpress”是您的 htaccess 文件所在的**绝对物理文件路径，而不是***URI 路径*（您在 URL 中看到的路径） . 这意味着您的 htaccess 文件将位于`/path/to/your/xampp/wordpress/.htaccess`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T13:23:16.183

我认为这里的问题是您在文件夹中有`htdocs/xampp/`文件夹。如果我没记错的话，XAMPP 以某种方式设置了这个文件夹，这很可能会导致问题。将`wordpress`文件夹移动到您的`htdocs`文件夹中，它应该可以按预期工作

# android - 如何在android中优化卷积矩阵

> ID：14291524
> 
> 赞同：2
> 
> 时间：2013-01-12T08:06:00.627
> 
> 标签：android, convolution

我正在使用`Convolution Matrix`我的 android 应用程序制作图像浮雕。我已经为它定义了类：

```
public class ConvolutionMatrix {
public static final int SIZE = 3;

public double[][] Matrix;
public double Factor = 1;
public double Offset = 1;

public ConvolutionMatrix(int size) {
    Matrix = new double[size][size];
}

public void setAll(double value) {
    for (int x = 0; x < SIZE; ++x) {
        for (int y = 0; y < SIZE; ++y) {
            Matrix[x][y] = value;
        }
    }
}

public void applyConfig(double[][] config) {
    for (int x = 0; x < SIZE; ++x) {
        for (int y = 0; y < SIZE; ++y) {
            Matrix[x][y] = config[x][y];
        }
    }
}

public static Bitmap computeConvolution3x3(Bitmap src,
        ConvolutionMatrix matrix) {
    int width = src.getWidth();
    int height = src.getHeight();
    Bitmap result = Bitmap.createBitmap(width, height, src.getConfig());

    int A, R, G, B;
    int sumR, sumG, sumB;
    int[][] pixels = new int[SIZE][SIZE];

    for (int y = 0; y < height - 2; ++y) {
        for (int x = 0; x < width - 2; ++x) {

            // get pixel matrix
            for (int i = 0; i < SIZE; ++i) {
                for (int j = 0; j < SIZE; ++j) {
                    pixels[i][j] = src.getPixel(x + i, y + j);
                }
            }

            // get alpha of center pixel
            A = Color.alpha(pixels[1][1]);

            // init color sum
            sumR = sumG = sumB = 0;

            // get sum of RGB on matrix
            for (int i = 0; i < SIZE; ++i) {
                for (int j = 0; j < SIZE; ++j) {
                    sumR += (Color.red(pixels[i][j]) * matrix.Matrix[i][j]);
                    sumG += (Color.green(pixels[i][j]) * matrix.Matrix[i][j]);
                    sumB += (Color.blue(pixels[i][j]) * matrix.Matrix[i][j]);
                }
            }

            // get final Red
            R = (int) (sumR / matrix.Factor + matrix.Offset);
            if (R < 0) {
                R = 0;
            } else if (R > 255) {
                R = 255;
            }

            // get final Green
            G = (int) (sumG / matrix.Factor + matrix.Offset);
            if (G < 0) {
                G = 0;
            } else if (G > 255) {
                G = 255;
            }

            // get final Blue
            B = (int) (sumB / matrix.Factor + matrix.Offset);
            if (B < 0) {
                B = 0;
            } else if (B > 255) {
                B = 255;
            }

            // apply new pixel
            result.setPixel(x + 1, y + 1, Color.argb(A, R, G, B));
        }
    }

    // final image
    return result;
} 
```

}

它给了我正确的结果，但计算结果需要太多时间。有什么方法可以让计算更快、更高效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-18T13:46:46.670

你减速的核心是：

```
 // apply new pixel
    result.setPixel(x + 1, y + 1, Color.argb(A, R, G, B)); 
```

这是每次迭代逐个像素设置每个像素的合理工作量，它们在位图​​类中不是免费的。最好调用 getPixels() 例程并在那里处理原始像素，然后将它们放回原处，完成后只需一次。

您还可以对浮雕进行硬编码（大多数情况下，您正在抓取一堆数据并将其与该内核相乘为零，您很容易作弊并像您关心的三个像素一样抓取。

```
private static int hardEmboss(int[] pixels, int stride, int index, int[][] matrix, int parts) {
        //ignoring the matrix
        int p1 = pixels[index];
        int p2 = pixels[index + stride + 1];
        int p3 = pixels[index + stride + stride + 2];
        int r = 2 * ((p1 >> 16) & 0xFF) - ((p2 >> 16) & 0xFF) - ((p3 >> 16) & 0xFF);
        int g = 2 * ((p1 >> 8) & 0xFF) - ((p2 >> 8) & 0xFF) - ((p3 >> 8) & 0xFF);
        int b = 2 * ((p1) & 0xFF) - ((p2) & 0xFF) - ((p3) & 0xFF);
        return 0xFF000000 | ((crimp(r) << 16) | (crimp(g) << 8) | (crimp(b)));
    } 
```

假设您的浮雕内核是：

```
 int[][] matrix = new int[][]{
            {2, 0, 0},
            {0, -1, 0},
            {0, 0, -1}
    }; 
```

* * *

此外，大多数人都不知道标准卷积算法中存在一个严重缺陷，将结果像素返回到中心是错误的。如果将其返回到左上角，则可以简单地处理同一内存占用空间中的所有数据，从左到右，从上到下在扫描线操作中进行。

```
 public static int crimp(int v) { return (v > 255)?255:((v < 0)?0:v); }
    public static void applyEmboss(int[] pixels, int stride) { 
        //stride should be equal to width here, and pixels.length == bitmap.height * bitmap.width;
        int pos;
        pos = 0;
        try {
            while (true) {
                int p1 = pixels[pos];
                int p2 = pixels[pos + stride + 1];
                int p3 = pixels[pos + stride + stride + 2];
                int r = 2 * ((p1 >> 16) & 0xFF) - ((p2 >> 16) & 0xFF) - ((p3 >> 16) & 0xFF);
                int g = 2 * ((p1 >> 8) & 0xFF) - ((p2 >> 8) & 0xFF) - ((p3 >> 8) & 0xFF);
                int b = 2 * ((p1) & 0xFF) - ((p2) & 0xFF) - ((p3) & 0xFF);
                pixels[pos++] = 0xFF000000 | ((crimp(r) << 16) | (crimp(g) << 8) | (crimp(b)));
            }
        }
        catch (ArrayIndexOutOfBoundsException e) { }
    } 
```

缺点是像素似乎向左和向上移动了 1 个像素。但是，如果您向后进行另一条扫描线填充，则可以将它们向后移动。这里所有的垃圾最终都会在右侧和底部排成两排（其中一些会充满浮雕的废话，因为我没有放慢速度来检查这些地方）。这意味着如果您想在读取像素时将其切断，则将高度和宽度减少 2，并将步幅保持在原始宽度的大小。由于所有好的数据都将位于最高位，因此您根本不必摆弄偏移量。

另外，只需使用渲染脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:42:25.473

看看：[卷积演示](https://github.com/abergmeier/android-convolute)。*它是一个应用程序，它比较了用Java*和*C++*完成的卷积实现。不用说 C++ 变体的运行速度要快**10 倍**以上。

因此，如果您想要速度，可以通过 NDK 或 Shaders 来实现它。

# javascript - 问题从另一个 div 中提取 div 标签

> ID：14291528
> 
> 赞同：0
> 
> 时间：2013-01-12T08:07:04.467
> 
> 标签：javascript, html

嗨，我正在使用 Javascript。我的代码是：

```
var oldData  = document.getElementById(id).innerHTML;
alert(oldData);

alert is shown as : text<img src="add-icon.png"><div id = "1"></div> 
```

这里旧数据包含一个文本、一个图像标签和一个 div 标签。问题是我只想访问 div 标签 ID，但我不知道如何获取它。请帮忙。提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:16:39.860

使用 vanilla JavaScript 的问题是，您必须自己编写所有过滤器 :)

```
var oldData = document.getElementById(id), firstDiv, id;
firstDiv = filterElements(node);
id = firstDiv.id;

function filterElements( node ){
     var children = parent.childElements, firstDiv, node;
     for (var i = 0; i < children.length; i += 1 ){
         node = children[i];
         if (node.tagName && node.nodeType && node.nodeType === 1 && 
                 node.tagName.toLowerCase() === "div"){
              firstDiv = node;
              break;
         }
     }
      return firstDiv;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T08:30:27.070

我建议使用 jQuery。然后您可以访问其元素中的 div 的 id，存储`elem`为

```
$(elem).children("div").attr("id") 
```

如果您通过 ID 知道父母，那么您可以这样做：

```
$("#"+id).children("div").attr("id") 
```

甚至这个：

```
$("#"+id+">div").attr("id") 
```

当然，如果您只想通过 ID 访问元素，则不需要。将新图像附加到 div：

```
$("#"+id+">div").append("<img ...>") 
```

或者

```
$("#"+id+">div").append($("<img>"). ...) 
```

另外，我建议使用类而不是童年来识别元素：

```
$("#"+id+" .image-holder").append(...) 
```

或者

```
$("#"+id+").find(".image-holder").append(...) 
```

# lambda - Prolog - 将一个列表与一个元素相乘，结果带有一个奇怪的尾巴？

> ID：14291529
> 
> 赞同：3
> 
> 时间：2013-01-12T08:07:10.290
> 
> 标签：lambda, prolog, swi-prolog

我想将两个列表相乘，我将左侧列表乘以右侧列表的每个元素。

例如：

```
?- multLists([3,4,2], [4,7,8], R).
R = [[12,16,8],[21,28,14],[24,32,16]]. 
```

为此，我编写了一个辅助谓词，它接受一个列表并将其乘以一个标量：

```
multListElem([], _, _).
multListElem([H|T], Result, Elem) :- 
    multListElem(T, W, Elem),
    Z is H*Elem,
    Result = [Z|W]. 
```

但是现在，当我跑步时，`?- multListElem([1,2,3], X, 3).` 我得到：

```
1 ?- multListElem([1,2,3], X, 3).
X = [3, 6, 9|_G1840]. 
```

那个奇怪的尾巴是`_G1840`什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T08:29:04.887

错误在这里：`multListElem([],_,_)`. 当第一个列表为空时，结果为空，所以必须写`multListElem([],[],_).`

当您使用列表时，您可以使用诸如 [maplist 之](https://stackoverflow.com/a/6683502/4609915)类的功能习语：

```
multLists(L1, L2, R) :-
    maplist(mult_one_list(L1), L2, R).

mult_one_list(L1, Elem, R) :-
    maplist(mult_2_numbers(Elem), L1, R).

mult_2_numbers(V1, V2, R) :-
    R is V1 * V2. 
```

[`maplist`](https://www.complang.tuwien.ac.at/ulrich/iso-prolog/prologue#maplist)将第一个参数应用于每个列表的每个元素（作为参数传递给它）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T08:41:05.813

您的基本情况未实例化尾巴：更改为

```
multListElem([],[],_). 
```

它会起作用。

@Joel76 已经解决了您的问题，并使用 maplist 公开了一种更好的方法。如果您有可用的 lambda.pl，这里有一个解决问题的紧凑公式

```
?- maplist(\A^B^maplist(\X^Y^(Y is X*A), [3,4,2], B), [4,7,8], R).
R = [[12, 16, 8], [21, 28, 14], [24, 32, 16]]. 
```

**编辑**当然是正确的界面

```
multLists(L1, L2, R) :-
    maplist(\A^B^maplist(\X^Y^(Y is X*A), L1, B), L2, R). 
```

@false 指出的第二个错误很难理解但很容易修复：

```
multLists(L1, L2, R) :-
    maplist(\A^maplist(\X^Y^(Y is X*A), L1), L2, R). 
```

我将称之为功能的第一个错误：lambda 与闭包一起使用*非常有用，然后*`A` **被**声明......只需我的 2 美分......

# objective-c - 代表没有被调用

> ID：14291531
> 
> 赞同：1
> 
> 时间：2013-01-12T08:07:43.987
> 
> 标签：objective-c, delegates

我在 RootViewController`UIPageViewController`的方法中设置了一个`viewDidLoad`，如下所示：

```
[self addChildViewController:self.pageViewController];
[self.view addSubview:self.pageViewController.view]; 
```

委托`pageViewControllerspineLocationForInterfaceOrientation`被成功调用，我可以相应地设置脊椎。

但是，我想在单击按钮时设置 PageViewController，因此我将代码移至按钮按下事件的事件处理程序。现在委托没有被调用。

有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:53:08.327

这有点复杂，但可以通过下面的代码来实现：

第 1 步：将以下代码添加到 rootViewController 的 .h 文件中。

```
@property (strong, nonatomic) IBOutlet UIButton *previousClick;
@property (strong, nonatomic) IBOutlet UIButton *nextClick; 
```

第 2 步：将它们连接到您使用的 xib 或故事板。

![在此处输入图像描述](../Images/08b897f4fd714fdb426700324bf03001.png)

第 3 步：在 .m 文件中添加两个 IBAction 方法。

```
#pragma mark - IBAction Methods

- (IBAction)previousClick:(id)sender
{
    [_modelController pageViewController:self.pageViewController viewControllerBeforeViewController:_dataViewController];
}

- (IBAction)nextClick:(id)sender
{
    [_modelController pageViewController:self.pageViewController viewControllerAfterViewController:_dataViewController];
} 
```

第 4 步：您还需要将以下行也放入 .m 文件

```
@interface RootViewController ()
@property (readonly, strong, nonatomic) ModelController *modelController;
@property (readonly, strong, nonatomic) DataViewController *dataViewController;
@end 
```

并将它们合成如下

```
@synthesize modelController = _modelController;
@synthesize dataViewController = _dataViewController; 
```

第 5 步：最后和最后在方法中添加以下行`- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation`。

```
_dataViewController = currentViewController; 
```

在 currentViewController 的 alloc init 调用之后。

如果您发现添加的按钮被 pageViewController 隐藏了，只需使用下面`-viewDidLoad`方法中的代码将它们带到前面

```
[self.view bringSubviewToFront:self.previousClick];
[self.view bringSubviewToFront:self.nextClick]; 
```

# javascript - rails ajax生成的javascript链接不起作用

> ID：14291533
> 
> 赞同：0
> 
> 时间：2013-01-12T08:08:13.807
> 
> 标签：javascript, ruby-on-rails, ajax

这应该是一个简单的：

鉴于此链接：

```
<a id="description_link_146" class="document_icon pull-left" data-slug="link-to-the-blog" data-remote="true" href="/challenges/link-to-the-blog/description_line"></a> 
```

当点击时，它不显眼地执行这个 js.erb 视图，修改我们的链接以触发 javascript hideDescription() 函数：

```
$("#task_<%=@challenge.id%>").append("<%=j render partial: 'description_line', locals: {challenge: @challenge}%>");
$("#description_link_<%=@challenge.id%>").attr("href","javascript: hideDescription(<%=@challenge.id%>)"); 
```

这是 hideDescription 函数：

```
function hideDescription(id) {
    alert("hide");    
} 
```

这个链接失效了。知道为什么吗？我知道在 Jquery 中，我需要在加载后重新绑定它，但这是纯 javascript。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:42:38.053

据我了解，这是您的 js.erb 文件代码：

```
$("#task_<%=@challenge.id%>").append("<%=j render partial: 'description_line', locals: {challenge: @challenge}%>");
$("#description_link_<%=@challenge.id%>").attr("href","javascript: hideDescription(<%=@challenge.id%>)"); 
```

如果您只想在点击后隐藏链接，您可以这样做：

```
$("#description_link_<%=@challenge.id%>").hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:18:37.587

看来问题是由于我使用了远程链接。我无法在远程 = true 的 href 中使用 javascript

即使将远程属性更改为 false 也无济于事。我想该链接需要解除绑定，但我不知道该怎么做。

最后我创建了一个单独的隐藏链接并使用了 hide() 和 show() 方法：

链接：

```
<%= link_to "", description_line_challenge_path(challenge), class: "document_icon pull-left", id: "description_link_#{challenge.id}", data: {slug: challenge.slug}, remote: true %>
<%= link_to "", "javascript:hideDescription(#{challenge.id})", class: "document_icon pull-left", style: "display: none", id: "description_hide_link_#{challenge.id}", data: {slug: challenge.slug} %> 
```

js.erb 显示文件：

```
$("#task_<%=@challenge.id%>").append("<%=j render partial: 'description_line', locals: {challenge: @challenge}%>");
$("#description_link_<%=@challenge.id%>").hide();
$("#description_hide_link_<%=@challenge.id%>").show(); 
```

javascript函数：

```
function hideDescription(id) {
    $("#task_description_" + id).remove();
    $("#description_link_" + id).show();
    $("#description_hide_link_" + id).hide();
} 
```

这不是很多“铁路方式”，但我不知道更好的方式。

有人会吗？

# xml - 如何用是/否表示决策树？

> ID：14291536
> 
> 赞同：2
> 
> 时间：2013-01-12T08:08:38.037
> 
> 标签：xml, database, decision-tree

我想将此图中的数据保存为 xml 文件或数据库文件。

![](../Images/994a0758a838d6bbfe7881c0a482c02e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T11:05:51.113

我会将树表示为有向图，其中决策是节点，答案是导致其他决策的边。作为 xml，这可以是决策元素的线性列表，其 id 属性为 1..n 和连接到其他决策的是/否 id：

```
<?xml version="1.0"?>
<decision_tree>
<decisions>
    <decision id="1" y="2" n="3">
        Power comes on?
    </decision>
    <decision id="2" y="4" n="5">
        Live screen?
    </decision>
    <decision id="3" y="6" n="7">
        Good AC power source?
    </decision>
    <!-- ... -->
</decisions>
<actions>
    <action id="5">
        Procede to Video Failure chart
    </action>
    <action id="7">
        Use live outlet.
    </action>
    <!-- ... -->
</actions>
</decision_tree> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:23:59.150

如果要将其保存为 XML，则可以使用类似于以下的结构：

```
<question> Power comes on
  <question if="yes">Live screen?
    <answer if="no">Proceed to video failure chart</answer>
    <question if="yes">New Build?
      <answer if="yes">Check power requirement vs rating</answer>
      <answer if="no"> .....
...
...
</question> 
```

如果您想将其保存在数据库中，最佳格式取决于您的需求以及您使用的数据库类型（SQL、noSQL 等）。许多数据库允许您将 XML 存储为文本对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T17:46:37.460

Wizard4j[使用](http://wizard4j.org/)XML 格式来描述它的工作流程。我建议先看看那里，看看有没有什么有用的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T09:48:35.283

如果您正在寻找一种“标准”（广泛使用）格式来存储决策树，您可以使用[PMML](http://en.wikipedia.org/wiki/Predictive_Model_Markup_Language)。例如，[Knime](http://www.knime.org/)使用这种格式导出决策树。在冒险中，您还可以告知是或否的可能性。

您可以在[lightpmmlpredictor 项目](https://github.com/ctrl-alt-d/lightpmmlpredictor)上找到 PMML 的示例。

使用标准格式，您可以使用 knime 挖掘数据：

![在此处输入图像描述](../Images/773a5b82177405468b2bca5468d1503b.png)

# javascript - javascript 唯一随机数

> ID：14291542
> 
> 赞同：0
> 
> 时间：2013-01-12T08:09:27.047
> 
> 标签：javascript, random, stack-overflow

专家

*   我希望在两个数字之间生成唯一的随机数（来自网页的文本框）。
*   我正在使用数组来存储数字。当用户单击按钮时，它会给出第一个随机数，将其存储在数组中，当用户再次单击按钮时，它会生成随机数，并将其与数组数进行比较，如果不同，则将其存储并显示出来。
*   如果显示最大可能的不同数字，则清除数组并通知用户。
*   我已经编写了代码，但它给出了错误：堆栈溢出，或者有时我会显示重复的结果。

任何人都可以阐明代码：

```
var allnums = new Array();
var num1= new Number;
var num2= new Number;

function funClick()
{
  var num1 = Number(document.getElementById('lnum').value); 
  var num2 = Number(document.getElementById('hnum').value); 

  if (allnums.length==num2)
  {
    alert("Maximum non-duplicate numbers served. Now resetting the counter.");
    allnums = [];
    return;
  }

  if (num1<num2) 
  {
    x = Math.floor(Math.random() * (num2 - num1 + 1)) + num1;
    funShow(x);
  }
  else
  {
    alert("You entered wrong number criteria!");  
  }
}

function funShow(x)
{
  var bolFound = false;
  for (var i=0;i<allnums.length;i++)
  {
    if((allnums[i])==x)
    {   
      funClick();
    }    
  }
  if (bolFound == false)
  {
    document.getElementById('rgen').innerText  = x;
    allnums.push(x);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:19:08.873

我看不到该代码是如何产生堆栈溢出的（即使`funShow`调用`funClick`和`funClick`调用`funShow`,`funShow`的调用`funClick`也不应该因为逻辑错误而发生 - 修复错误，你会得到堆栈溢出，虽然），但它有几个问题。见评论：

```
// style: Use [], not new Array()
var allnums = new Array();

// `new Number` doesn't do anything useful here
var num1 = new Number;
var num2 = new Number;

function funClick() {
    // For user-entered values, use parseInt(value, 10) to parse them into numbers
    var num1 = Number(document.getElementById('lnum').value);
    var num2 = Number(document.getElementById('hnum').value);

    if (allnums.length == num2) {
        alert("Maximum non-duplicate numbers served. Now resetting the counter.");
        allnums = [];
        return;
    }

    // & is a bitwise AND operation, not a logical one. If your goal is to see
    // if both numbers are !0, though, it works but is obtuse.
    // Also, there is no ltnum2 variable anywhere, so trying to read its value
    // like this should be throwing a ReferenceError.
    if (num1 & ltnum2) {
        // You're falling prey to The Horror of Implicit Globals, x has not
        // been declared.
        x = Math.floor(Math.random() * (num2 - num1 + 1)) + num1;
        funShow(x);
    } else {
        alert("You entered wrong number criteria!");
    }
}

function funShow(x) {
    var bolFound = false;
    // Again, & is a bitwise AND operation. This loop will never run, because
    // you start with 0 and 0 & anything = 0
    // But it should be throwing a ReferenceError, as there is no ltallnums
    // anywhere.
    for (var i = 0; i & ltallnums.length; i++) {
        if ((allnums[i]) == x) {
            funClick();
        }
    }
    // This condition will always be true, as you've done nothing to change
    // bolFound since you set it to false
    if (bolFound == false) {
        document.getElementById('rgen').innerText = x;
        allnums.push(x);
    }
} 
```

有两种方法可以解决这个问题。这基本上就是您想要做的，但没有递归：

```
function funClick() {
    var num1 = parseInt(document.getElementById('lnum').value, 10);
    var num2 = parseInt(document.getElementById('hnum').value, 10);
    var nums = [];
    var targetCount;
    var x;

    // Check the inputs
    if (isNaN(num1) || isNaN(num2) || num2 <= num1) {
        alert("Please ensure that hnum is higher than lnum and both are really numbers.");
        return;
    }

    // Find out how many integers there are in the range num1..num2 inclusive
    targetCount = num2 - num1 + 1;

    // Produce that many random numbers
    while (nums.length < targetCount) {
        x = Math.floor(Math.random() * (num2 - num1 + 1)) + num1;
        if (nums.indexOf(x) < 0) {
            nums.push(x);
        }
    }

    // Show the result
    document.getElementById('rgen').innerText = nums.join(", ");
} 
```

[实例](http://jsbin.com/iwukur/1)| [来源](http://jsbin.com/iwukur/1/edit)

这样做的问题是，填充最后几个插槽可能需要很长时间，因为我们必须随机命中它们。

另一种方法是按顺序生成具有数字的数组，然后将其弄乱。对于大范围，它可以显着提高效率。像这样的东西：

```
function funClick() {
    var num1 = parseInt(document.getElementById('lnum').value, 10);
    var num2 = parseInt(document.getElementById('hnum').value, 10);
    var nums = [];
    var x;

    // Check the inputs
    if (isNaN(num1) || isNaN(num2) || num2 <= num1) {
        alert("Please ensure that hnum is higher than lnum and both are really numbers.");
        return;
    }

    // Create an array with those numbers in order
    for (x = num1; x <= num2; ++x) {
        nums.push(x);
    }

    // Sort it with a random comparison function
    nums.sort(function(a, b) {
        return 0.5 - Math.random();
    });

    // Show the result
    document.getElementById('rgen').innerText = nums.join(", ");
} 
```

[实例](http://jsbin.com/iwukur/3)| [来源](http://jsbin.com/iwukur/3/edit)

**但是**，仅`nums.sort(...)`随机执行一次可能不会成功地产生随机结果；[有关更多信息，请参阅本文](http://sroucheray.org/blog/2009/11/array-sort-should-not-be-used-to-shuffle-an-array/)。*（感谢[eBusiness](https://stackoverflow.com/users/305545/ebusiness)提供的链接以及他对以下内容的投入。）*

因此，您可能想要更进一步并投入更多的随机操作。这是另一个例子：

```
function funClick() {
    var num1 = parseInt(document.getElementById('lnum').value, 10);
    var num2 = parseInt(document.getElementById('hnum').value, 10);
    var nums = [];
    var n, x, y;
    var num;

    // Check the inputs
    if (isNaN(num1) || isNaN(num2) || num2 <= num1) {
        alert("Please ensure that hnum is higher than lnum and both are really numbers.");
        return;
    }

    // Create an array with those numbers in order
    for (n = num1; n <= num2; ++n) {
        nums.push(n);
    }

    // We only need to shuffle it if it's more than one element long
    if (nums.length > 1) {
        // Sort it "randomly"
        nums.sort(function(a, b) {
            return 0.5 - Math.random();
        });

        // Throw a bunch of random swaps in there
        for (n = 0; n < nums.length; ++n) {
            do {
                x = Math.floor(Math.random() * nums.length);
            }
            while (x === n);
            num = nums[x];
            nums[x] = nums[n];
            nums[n] = num;
        }
    }

    // Show the result
    document.getElementById('rgen').innerText = nums.join(", ");
} 
```

[实例](http://jsbin.com/iwukur/6)| [来源](http://jsbin.com/iwukur/6/edit)

这会将数组排序作为起点，但随后也会在元素之间进行一堆随机交换。它仍然在恒定时间内运行，但应该比单独使用数组排序有更好的结果。自然，您会想要测试分布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-13T18:18:22.167

使用数组：

```
var uniqueRandomNumbers = new Array();
var totalNumbers = 100;
for (var i=0; i<totalNumbers; i++){
    uniqueRandomNumbers.push(i);
}
uniqueRandomNumbers.sort(function() {return 0.5 - Math.random();});
var uniqueNumber;
for(var i=0; i<uniqueRandomNumbers.length; i++){
    uniqueNumber = uniqueRandomNumbers[i];
    //do something with the number
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T22:11:07.603

由于我无法编辑 Crowder 的答案，因此这里是加扰数组的简单无偏方法：

```
function scramble(nums){
    for (var n = nums.length; n; n--) {
        var x = Math.floor(Math.random() * n);
        var num = nums[n-1];
        nums[n-1] = nums[x];
        nums[x] = num;
    }
} 
```

# php - 如果一个失败则回滚多个更新查询

> ID：14291543
> 
> 赞同：5
> 
> 时间：2013-01-12T08:09:27.640
> 
> 标签：php, mysql

所以我正在做的是有多个`UPDATE`查询，它更改表中的组名，`tbl_groups`然后更新`tbl_users`属于该组的所有用户，但如果用户更新查询失败，它会更新组，但我想同时更新一起或不一起使用，我正在使用 PHP 和 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:59:01.507

听起来您需要做的就是使用事务。

必须使用 InnoDB 表才能使用事务（实际上，其他一些数据库引擎也有事务，但 InnoDB 最常见于 MySQL）。

在第一次更新之前发出“BEGIN TRANSACTION”查询。

如果任何查询失败，请发出“ROLLBACK”查询以撤消所有操作。

这真的很简单。

如果您决定要进行部分回滚（回到事务开始后的某个点），那么您可以使用“ROLLBACK TO SAVEPOINT savepoint_name”。您必须首先发出“SAVEPOINT savepoint_name”查询。

例如，在 PHP 中

```
mysql_query("BEGIN TRANSACTION");

$result1 = mysql_query("UPDATE `tbl_groups` SET `user_id` = 5 WHERE `group_id` = 3");
if($result1 === false) {
mysql_query("ROLLBACK");
}

mysql_query("SAVEPOINT savepoint1");

$result2 = mysql_query("UPDATE `tbl_users` SET `group_id` = 3 WHERE `user_id` = 5");

if($result === false) {
ROLLBACK TO SAVEPOINT savepoint1;
}
// COMMIT saves the changes to the db, making them visible to other sessions
// if the ROLLBACK TO SAVEPOINT statement executed, then only changes up to that SAVEPOINT will be saved
// if no ROLLBACK statements were executed, then all changes will be saved (assuming no MySQL errors that cause implicit ROLLBACK)
mysql_query('COMMIT'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:43:57.860

使用具有最佳隔离级别的事务

我更喜欢**“可重复读取”**（在您提交事务之前，您无法查看其他数据和虎钳）总是好的，它是 innodb 存储引擎的默认设置

如果您不使用 innodb 则更改隔离级别

设置全球 tx_isolation='REPEATABLE-READ'; 或者

设置会话 tx_isolation='REPEATABLE-READ';

其余细节由@Buttle Butkus 提供

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T13:29:51.723

将 tbl_groups 和 tbl_users 之间的关系设置为`ON DELETE CASCADE`。然后只需更新 tbl_groups，更改将级联到 tbl_users 中的相关记录。如果您必须经常像这样更新您的父键，那么您可能会考虑使用代理键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-25T06:25:36.987

以下示例基于面向对象的样式，请确保您的所需数据库表类型为 InnoDB，因为它支持事务语句

在这里，我只想根据 id 删除多条记录

```
$this->link_id->autocommit(FALSE); 
```

// 上面的语句通过禁用自动提交来启动事务，其中 link_id 是指您的 MySQLi 数据库连接

```
 for($i=1; $i<=5; $i++){     

            $tSql = "DELETE FROM your_table" 
                     . " WHERE id=" . $i;

            $rs = $this->link_id->query($tSql);// execute the query

            if($this->link_id->affected_rows == -1) // check if it fails
            {   
               $_SESSION["error"] = "Sorry ! cant be deleted ! ";           
                $this->link_id->rollback(); // rollback the transaction
                break; // break the loop

            }           

        }

//check if there is some error or not, if no error then commit the transaction
        if(empty($_SESSION["error"])){          
            $this->link_id->commit();
        } 
```

# garbage-collection - 引用计数是唯一可以在确定的时间回收对象的 GC 方法吗？

> ID：14291545
> 
> 赞同：1
> 
> 时间：2013-01-12T08:09:37.093
> 
> 标签：garbage-collection

通过引用计数，对象可以在不再被引用后立即被回收。它不需要为 GC 运行单独的线程。其他的GC方法，比如mark和sweep，都是在自己的线程上运行的，我们无法确定它什么时候运行。也许函数返回时会回收最年轻的一代，但其他一些推送到下一代的对象也可能是垃圾。

是否有任何其他 GC 方法可以在确定的时间回收对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:37:29.723

如果“在确定的时间”是指“在没有周期的情况下尽快”，那么不是。为此，您需要*天真*的引用计数，尽管存在所有问题，您甚至不能使用引用计数的任何优化（例如延迟引用计数）。

如果像“在范围结束时”这样的时间是可以接受的，那么是的，这是可能的（尽管不建议）。您只需运行当时拥有的任何形式的 GC。当然，这是非常低效的，这是没有人这样做的一个原因（另一个是唯一的优势，确定性清理，很少需要并且更好地明确处理）。增量 GC 可能会稍微缓解这一点，但我不确定能缓解多少。

# c++ - 编译器会优化静态函数的未使用参数吗？

> ID：14291549
> 
> 赞同：9
> 
> 时间：2013-01-12T08:09:49.043
> 
> 标签：c++, c, compiler-construction, compiler-optimization

我有一组已声明的函数，`static`并且`fastcall`. `this`它们中的大多数使用指向在 C++ 中或多或少扮演角色的结构的指针。有些函数在结构中不需要任何东西，但为了统一起见，我还是想将指针传递给它们。编译器会注意到没有使用该参数并忽略为其分配寄存器吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T08:50:54.417

我写了这个无意义的程序来测试这个。它在函数中有一些无意义的代码，并多次调用它，否则编译器只会内联整个函数调用，使测试无用。（我知道这是 C 和 C++ 的奇怪组合......愚蠢的代码，但仍然可以证明这个问题）

```
#include <stdio.h>
#include <vector>
#include <algorithm>

using namespace std;

struct demo
{
    int a;
    char ch;
};

static  void __fastcall func(struct demo* d)
{
    for(int i = 0; i < 100; i++) {
    std::vector<int> a;
    std::sort(begin(a), end(a));
    printf("THis is a test");
    printf("Hello world\n");
    }
}

int main()
{
  //  void*p = (void*)&func;
    struct demo d;
    func(&d);
    func(&d);
    func(&d);
    func(&d);
    func(&d);
    func(&d);
    func(&d);
    //printf((const char*)p);
} 
```

如那里所写，函数调用编译为此：-

```
 func(&d);
00F61096  call        func (0F61000h)  
    func(&d);
00F6109B  call        func (0F61000h)  
    func(&d);
00F610A0  call        func (0F61000h)  
    func(&d);
00F610A5  call        func (0F61000h)  
    func(&d);
00F610AA  call        func (0F61000h)  
    func(&d);
00F610AF  call        func (0F61000h)  
    func(&d);
00F610B4  call        func (0F61000h) 
```

这表明如果不使用 该参数，编译器*确实会省略该参数。***但是**，如果我取消注释那里的两行以获取函数的地址，那么事情就会改变，它会生成这个：-

```
00C71099  lea         ecx,[esp]  
00C7109C  call        func (0C71000h)  
    func(&d);
00C710A1  lea         ecx,[esp]  
00C710A4  call        func (0C71000h)  
    func(&d);
00C710A9  lea         ecx,[esp]  
00C710AC  call        func (0C71000h)  
    func(&d);
00C710B1  lea         ecx,[esp]  
00C710B4  call        func (0C71000h) 
```

它在哪里发送指针。

我的假设是，在第一种情况下，编译器能够证明，如果它为函数生成了一个自定义调用约定，那么就不可能有任何用户可见的效果，但在第二种情况下，如果你使用指向函数的指针，函数可以从另一个单独编译的模块调用，该模块无法知道是否需要参数。尽管在这种情况下，寄存器是否设置都无关紧要，但通常编译器需要坚持精确的调用模式，所以我假设它生成了最通用的代码，并且如果可以的话，不会使用自定义调用约定'不能证明它可以看到所有可以调用该函数的代码。

无论如何，要回答这个问题，编译器不会总是在寄存器中传递未使用的参数，但我当然不会编写任何取决于此处任何特定行为的代码，因为在其他地方更改不相关的代码（获取函数的地址），更改这种行为，我能看到的任何标准都无法保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:40:39.173

首先，如果您使用正确的编译器标志（例如 -Wall），编译器应该警告您未使用的函数参数。我建议您将不使用的参数留在参数列表之外，尽管我我猜他们会被优化掉。但是，您可以做的是确保将代码编译两次，一次带有参数，一次不带参数，然后`diff`在二进制文件之间执行 a 并查看它们是否匹配。我认为这应该取决于您使用的编译器和优化标志。

干杯，

安迪

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T11:38:25.143

您可以在函数定义中省略参数。这将向编译器提示未使用特定参数，它将利用它并优化代码

无效函数（结构演示 *）{ ... }

# asp.net - 启用无效输入的最佳方法是什么？

> ID：14291550
> 
> 赞同：0
> 
> 时间：2013-01-12T08:09:50.460
> 
> 标签：asp.net, webforms

我们有一个 ASP.Net 网络表单页面。在页面加载事件中，页面用数据填充一些输入。然后阻止它们，以便用户无法编辑它们。不幸的是，有些数据似乎是错误的，因此 ASP.Net 验证器不允许用户发布表单。

决定取消阻止无效输入以允许用户对其进行编辑。我们在页面上有许多 ASP.Net 验证器，包括自定义验证器。我可以使用这些验证器来验证 OnLoad 事件中的数据并取消阻止无效字段还是需要手动取消阻止它们检查每个字段？实现结果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:34:23.630

由于没有代码，我只是猜测这应该符合您的逻辑。基本上，在为所有字段设置值后，您可以`Page.Validate()`根据数据的有效性运行并设置可见性。

```
// set all your values
_textBox1.Text = "Some Value 1";
_textBox2.Text = "Some Value 2";
Page.Validate();
_textBox1.Enabled = !_textBox1RangeVal.IsValid;
_textBox2.Enabled = !_textBox2RequiredFieldVal.IsValid; 
```

# java - 使用附加 API 时出错

> ID：14291556
> 
> 赞同：9
> 
> 时间：2013-01-12T08:10:36.813
> 
> 标签：java, instrumentation, agent, attach-api

在 Eclipse 中使用附加 API 时，控制台中会抛出错误。

为了使用附加 API，我在 eclipse 中安装了 JRE，然后使用编辑选项将 tools.jar 包含在当前 JRE 的外部 jars 选项中。

但是当我尝试执行一个简单的程序时，它会抛出以下错误，例如

> java.lang.UnsatisfiedLinkError：在 java.library.path com.sun.tools.attach.AttachNotSupportedException 中没有附加：在 dynamicLoadingTest.VMAttach 的 com.sun.tools.attach.VirtualMachine.attach(VirtualMachine.java:190) 处没有安装提供程序.main(VMAttach.java:17)

这是执行的简单程序。导入 java.io.IOException；

```
import com.sun.tools.attach.AttachNotSupportedException;
import com.sun.tools.attach.VirtualMachine;

public class VMAttach {

    public static void main(String[] args) {

        try {
            VirtualMachine vm = VirtualMachine.attach("6832");
        } catch (AttachNotSupportedException e) {
            System.out.println("This error");
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

提到的进程 id *6832*是系统上运行的 Java 应用程序

在将安装的 jre 更改为 jdk 时，会产生以下错误

```
Exception in thread "main" com.sun.tools.attach.AttachNotSupportedException: jvm.dll not loaded by target process
    at sun.tools.attach.WindowsVirtualMachine.<init>(WindowsVirtualMachine.java:46)
    at sun.tools.attach.WindowsAttachProvider.attachVirtualMachine(WindowsAttachProvider.java:52)
    at com.sun.tools.attach.VirtualMachine.attach(VirtualMachine.java:195)
    at dynamicLoadingTest.VMAttach.main(VMAttach.java:17) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T17:45:24.490

实际上，当您的系统中有不同的 jdk 并且所有 jdk 都包含在类路径中时，就会出现此问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-10T12:06:22.557

对我来说，解决方案是将`attach.dll`JDK（与您的 JRE 相同的版本）放入 JRE 的`bin`目录中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:26:43.400

我对 JDK1.7 进行了同样的尝试，它工作正常。对于 JDK1.6，问题仍然存在。

# html - CSS `vertical-align: middle` 不起作用？

> ID：14291559
> 
> 赞同：2
> 
> 时间：2013-01-12T08:11:53.460
> 
> 标签：html, css

我希望以下 html 文档会产生一个垂直居中在黄色正方形内的红色正方形：

```
<html>
<body>

<div style="width:200px;height:200px;background-color:yellow">

    <div style="width:100px;height:100px;background-color:red;vertical-align:middle">

    </div>

</div>

</body>
</html> 
```

但它会产生一个与其父 div 顶部对齐的结果。

[小提琴](http://jsfiddle.net/7Q4hj/)

我究竟做错了什么？为什么不`vertical-align:middle`工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:15:15.563

```
<div style="display: table-cell; width:200px;height:200px;background-color:yellow; vertical-align:middle">
    <div style="width:100px;height:100px;background-color:red;">
    </div>
</div> 
```

jsFiddle[在这里](http://jsfiddle.net/pmatseykanets/322me/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T08:14:10.510

vertical-align 属性影响由行内元素生成的框的行框内的垂直定位。[这里有更多细节！](http://www.w3.org/wiki/CSS/Properties/vertical-align)

# java - FTPClient 无法从带有空格的目录名称中获取文件列表

> ID：14291560
> 
> 赞同：6
> 
> 时间：2013-01-12T08:12:48.800
> 
> 标签：java, ftp, apache-commons-net

我正在使用 Apache FTPClient 来获取文件和子目录文件列表。但它无法从带有空格的目录名中获取文件列表。这是一个示例-我使用两个不同的目录进行了尝试：

```
 FTPClient client = new org.apache.commons.net.ftp.FTPClient();
    client.connect("ftp.domain.com");
    client.login("userid", "password");

    FTPFile[] names = client.listDirectories("ABC XYZ"); //Empty array
    FTPFile[] names2 = client.listDirectories("ABCXYZ"); //working 
```

因此，带有空格的目录名称不返回任何内容。我试图将“%20”和“+”放在空格处。我也试过“\”ABC XYZ\“”。但仍然无法正常工作。我有什么遗漏吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-19T18:46:14.200

这是一个旧问题，但我最近遇到了这个问题并找到了一个似乎对我有用的解决方案。使用转义字符“\”转义您的空格。

例如：

```
String path = "/Path/To/Folder With/Spaces";
path = path.replace(" ", "\\ ");
FTPFile[] listedDirectories = client.listDirectories(path); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T10:28:30.953

我认为这可能是 Apache Commons 问题，它对我不起作用，实际上它可能不起作用，因为空格被解释为命令参数的分隔符。我找不到您的问题的解决方案，我所能做的就是建议您一个解决方法：

```
FTPClient client = new org.apache.commons.net.ftp.FTPClient();
client.connect("ftp.domain.com");
client.login("userid", "password");

client.cwd("ABC XYZ");
FTPFile[] names = client.listDirectories(); //now this should work, it works for me
client.cdup();
FTPFile[] names2 = client.listDirectories("ABCXYZ"); //working 
```

如果您不想在每次有一个名称中包含空格的目录时都写这个，您可以创建一个为您执行此操作的方法：

```
FTPFile[] listDirectories(String directory){
    if(directory.contains(" ")){
        client.cwd(directory);
        FTPFile[] listedDirectories = client.listDirectories();
        client.cdup();
        return listedDirectories;
    } else {
        return client.listDirectories(directory);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T11:51:43.963

显然，当 listFiles(String path) 包含空格的路径存在问题时，其他函数没有类似问题。您需要做的只是更改工作目录，然后使用 listFiles()。

像这样的东西：

```
private FTPFile[] getDirectoryFiles(String dirPath) throws IOException
{
    String cwd = ftp.printWorkingDirectory();

    ftp.changeWorkingDirectory(dirPath);
    FTPFile[] files = ftp.listFiles();
    ftp.changeWorkingDirectory(cwd);

    return files;               
} 
```

# c++ - 模板类的实例之间是否有共享范围？

> ID：14291563
> 
> 赞同：0
> 
> 时间：2013-01-12T08:13:16.223
> 
> 标签：c++, templates, macros, scope

当然，除了全球范围。

* * *

我有一个带有宏的自定义断言类来缓存对以下内容的引用`__FILE__`：

```
#define DEFINE_THIS_FILE \
  static const char THIS_FILE__[] = __FILE__ 
```

对于源代码，使用宏没什么大不了的，因为每个源都有自己的范围。但是，模板类不能使用源代码，所以我不得不在 TemplateClass.h 给出的声明/定义中进行所有的 ASSERT() 调用

如果我在类定义之外使用我的宏，例如`Singleton`

```
DEFINE_THIS_FILE;

namespace NE
{
  template<typename T>
  class Singleton
  {
    ...
  }
} 
```

然后宏在 #includes 的任何代码的相同范围内结束`Singleton`，并且编译器为`THIS_FILE__`. （当然，这只发生在其他代码*也*使用`DEFINE_THIS_FILE`宏的情况下。）

如果我将宏*放在*声明中，编译器不会抱怨，但链接器将无法为任何给定的模板类实例找到 THIS_FILE__ ，例如`Singleton`：

```
namespace NE
{
  template<typename T>
  class Singleton
  {
    constexpr DEFINE_THIS_FILE;     // constexpr modifier required in this case
    ...
  }
} 
```

我假设我得到的链接器错误 是由模板实例不存在于与第一次定义的范围相同的范围内引起的，Singleton.h
`Undefined symbols for architecture x86_64:
"NE::Singleton<NE::NonTemplateType>::THIS_FILE__"`
`THIS_FILE__`

* * *

# OT：有没有办法让我的模板类型的所有实例`Singleton`共享一个范围（全局是不可接受的），以便所有实例都可以使用这个静态 const 宏？

* * *

**Edit1**
进一步的测试证实：在每个包含 ASSERT() 的`DEFINE_THIS_FILE` *模板化方法*
中使用宏将正确编译和运行.... 在这种情况下，实例不共享范围，但`static const char THIS_FILE__`为每个方法定义了一个范围。这可行，但我怀疑它使用的 ROM 与 std::assert 一样多或更多（其隐含分配`__FILE__`）。

我会解决这个问题，直到对 OT 的回答出现:)

* * *

**Edit2**
愚蠢的我。除了使用上面编辑中列出的解决方法，我还不如创建另一个宏 UNCACHED_ASSERT(argsToCheck) 直接使用`__FILE__`而不是 const 静态表示。
但是，每个方法的多个 ASSERTions 仍然可以从缓存中受益。

不过，仍然需要对 OT 的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:33:57.147

您可以将声明放在未命名的命名空间中

```
#define DEFINE_THIS_FILE namespace { static const char THIS_FILE__[] = __FILE__; } 
```

# appharbor - 访问 AppHarbor 上的文件系统

> ID：14291564
> 
> 赞同：3
> 
> 时间：2013-01-12T08:13:44.013
> 
> 标签：appharbor

我想尝试 AppHarbor，但我有一个应用程序可以将上传的文件存储在文件系统的某个位置。它与 AppHarbor 兼容吗？我可以将文件存储在文件系统中并稍后访问它们吗？

（我可以期待什么样的路径，比如 c:\blabla 什么的？）

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T08:38:29.800

您可以将文件存储在本地文件系统上，但在每次新部署时都会擦除应用程序目录，因此不建议依赖文件存储。

相反，我们建议您使用云存储服务，例如[Amazon S3](http://aws.amazon.com/s3/)、[Google Cloud Storage](https://cloud.google.com/products/cloud-storage)或类似服务。这两种服务都有 .NET 库。

我们最近写了一篇关于[从浏览器将文件直接上传到 S3 和 GCS](http://blog.appharbor.com/2013/01/10/asynchronous-browser-uploads-to-s3-and-gcs-using-cors-aspnet-mvc)的博文，您可能想阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T19:17:11.470

如果您使用的是后台工作人员，则需要在应用程序的设置中“启用文件系统写入访问”。

然后，您可以访问：`Path.GetTempPath()`

来自此支持问题：http: [//support.appharbor.com/discussions/problems/5868-create-directory-in-background-worker](http://support.appharbor.com/discussions/problems/5868-create-directory-in-background-worker)

# php - 是否可以将 HTML 上的所有 FORM 变量和值自动抓取到 Javascript 中？

> ID：14291565
> 
> 赞同：0
> 
> 时间：2013-01-12T08:14:07.800
> 
> 标签：php, javascript, ajax

我刚刚开始使用 AJAX/JS 如果这看起来很无聊，请原谅..（尽管我的腰带上有超过 10 年的 php 和 actionscript）

我确实环顾四周，但无法得到我特别想做的事情的答案。

就像标题说的那样，我想把html文档的当前形式的variable=values转换成JS（用于XMLHttpRequest处理）

如果我的表单字段被编号，比如 id1 id2 id3 等，我可以循环遍历它。但不幸的是，他们不是..

那么是否有一个 JS 函数可以将所有这些表单字段 var=values 抓取到 JS 块中？

谢谢一堆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:17:26.443

使用`document.querySelectorAll()`需要 CSS 选择器。示例（您可以调整以使用选择和过滤按钮 - 这是这个想法，因为我不知道您的问题是什么（尽管您应该从这里自己弄清楚））

```
var elems = document.querySelectorAll('input');
var values = [];
for (var i = 0; i < elems.length; i++) {
    values.push(elems[i].value);
} 
```

# json - 解组 json 的问题

> ID：14291567
> 
> 赞同：1
> 
> 时间：2013-01-12T08:14:27.920
> 
> 标签：json, jersey, unmarshalling, jettison

我创建的 Jax-RS Web 服务有点问题。每次我发布适合“Beitrag”类型的 Json-Object 时，我都会收到此错误：

```
SCHWERWIEGEND: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type [simple type, class javax.xml.bind.JAXBElement<de.dhbw.pgbackend.Beitrag>]: can not instantiate from JSON object (need to add/enable type information?)
at [Source: org.apache.catalina.connector.CoyoteInputStream@2771f735; line: 1, column: 2] at org.codehaus.jackson.map.JsonMappingException.from(JsonMappingException.java:163)
at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObjectUsingNonDefault(BeanDeserializer.java:740)
at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:683)
at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:580)
at org.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:2695)
at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1308)
at org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:419)
at com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy.readFrom(JacksonProviderProxy.java:139)
at com.sun.jersey.spi.container.ContainerRequest.getEntity(ContainerRequest.java:488)
at com.sun.jersey.server.impl.model.method.dispatch.EntityParamDispatchProvider$EntityInjectable.getValue(EntityParamDispatchProvider.java:123)
at com.sun.jersey.server.impl.inject.InjectableValuesProvider.getInjectableValues(InjectableValuesProvider.java:46)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$EntityParamInInvoker.getParams(AbstractResourceMethodDispatchProvider.java:153)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$VoidOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:166)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1511)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1442)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
11.01.2013 21:12:41 org.apache.catalina.core.StandardWrapperValve invoke
SCHWERWIEGEND: Servlet.service() for servlet [Jersey REST Service] in context with path [/de.dhbw.pgbackend] threw exception [org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type [simple type, class javax.xml.bind.JAXBElement<de.dhbw.pgbackend.Beitrag>]: can not instantiate from JSON object (need to add/enable type information?)
 at [Source: org.apache.catalina.connector.CoyoteInputStream@2771f735; line: 1, column: 2]] with root cause
 org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type [simple type, class javax.xml.bind.JAXBElement<de.dhbw.pgbackend.Beitrag>]: can not instantiate from JSON object (need to add/enable type information?)
at [Source: org.apache.catalina.connector.CoyoteInputStream@2771f735; line: 1, column: 2]
at org.codehaus.jackson.map.JsonMappingException.from(JsonMappingException.java:163)
at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObjectUsingNonDefault(BeanDeserializer.java:740)
at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:683)
at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:580)
at org.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:2695)
at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1308)
at org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:419)
at com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy.readFrom(JacksonProviderProxy.java:139)
at com.sun.jersey.spi.container.ContainerRequest.getEntity(ContainerRequest.java:488)
at com.sun.jersey.server.impl.model.method.dispatch.EntityParamDispatchProvider$EntityInjectable.getValue(EntityParamDispatchProvider.java:123)
at com.sun.jersey.server.impl.inject.InjectableValuesProvider.getInjectableValues(InjectableValuesProvider.java:46)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$EntityParamInInvoker.getParams(AbstractResourceMethodDispatchProvider.java:153)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$VoidOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:166)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1511)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1442)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

这是我的课：

```
@XmlRootElement  
public class Beitrag {
public int id;
public String user_id;
public String typ;
public String kategorie;
public String titel;
public String beschreibung;
public String preis;
public String datum;
public String name;
public String telefon;
public String email;

public Beitrag(){

}

public Beitrag(int id, String user_id, String typ, String kategorie, String titel, 
                  String beschreibung, String preis, String datum, String name, String telefon, String email){
    this.setId(id);
    this.setUser_id(user_id);
    this.setTyp(typ);
    this.setKategorie(kategorie);
    this.setTitel(titel);
    this.setBeschreibung(beschreibung);
    this.setPreis(preis);
    this.setDatum(datum);
    this.setName(name);
    this.setTelefon(telefon);
    this.setEmail(email);
}

public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

public String getUser_id() {
    return user_id;
}

public void setUser_id(String user_id) {
    this.user_id = user_id;
}

public String getTyp() {
    return typ;
}

public void setTyp(String typ) {
    this.typ = typ;
}

public String getKategorie() {
    return kategorie;
}

public void setKategorie(String kategorie) {
    this.kategorie = kategorie;
}

public String getTitel() {
    return titel;
}

public void setTitel(String titel) {
    this.titel = titel;
}

public String getBeschreibung() {
    return beschreibung;
}

public void setBeschreibung(String beschreibung) {
    this.beschreibung = beschreibung;
}

public String getPreis() {
    return preis;
}

public void setPreis(String preis) {
    this.preis = preis;
}

public String getDatum() {
    return datum;
}

public void setDatum(String datum2) {
    this.datum = datum2;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getTelefon() {
    return telefon;
}

public void setTelefon(String telefon) {
    this.telefon = telefon;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

} 
```

和

```
@Path("/putbeitrag")
public class PutBeitrag {

@Path("/newBeitrag")
@POST
@Consumes(MediaType.APPLICATION_JSON)
public void newBeitrag(JAXBElement<Beitrag> beitrag){
    Beitrag b = beitrag.getValue();
    Connection conn = MySQLConnection.getInstance();
    if(conn != null)
    {
        try{
        // Anfrage-Statement erzeugen.
        Statement query;
        query = conn.createStatement();

        // Beitrag hinzufügen

            String sql = "INSERT into Beitraege (kategorie, titel, beschreibung, preis, bild, datum, name, telefon, email) " +
                    "values ("+b.getUser_id()+",'"+b.getTyp()+"','"+b.getTitel()+"','"+b.getKategorie()+"','"+b.getTitel()+"','"+b.getBeschreibung()+"'" +
                            ",'"+b.getPreis()+"',null,'"+b.getDatum()+"','"+b.getName()+"','"+b.getTelefon()+"','"+b.getEmail()+"')";
            query.executeQuery(sql);

        }catch (SQLException e) {
            e.printStackTrace();
        }
   }
}

@Path("/updateBeitrag")
@POST
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.TEXT_PLAIN)
public String updateBeitrag(JAXBElement<Beitrag> beitrag){
    Beitrag b = beitrag.getValue();
    Connection conn = MySQLConnection.getInstance();
    if(conn != null)
    {
        try{
        // Anfrage-Statement erzeugen.
        Statement query;
        query = conn.createStatement();

        // Beitrag ändern

            String sql = "UPDATE beitraege SET typ='"+b.getTyp()+"', SET kategorie='"+b.getKategorie()+"', SET titel='"+b.getTitel()+"', SET beschreibung='"+b.getBeschreibung()+"', SET preis='"+b.getPreis()+"', SET datum='"+b.getDatum()+"', SET name='"+b.getName()+"'," +
                    " SET telefon='"+b.getTelefon()+"', SET email='"+b.getEmail()+"' WHERE id="+b.id;
            query.executeQuery(sql);

        }catch (SQLException e) {
            e.printStackTrace();
        }
   }
    return "ok";
}

@Path("/deleteBeitrag")
@POST
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.TEXT_PLAIN)
public String deleteBeitrag(JAXBElement<Beitrag> beitrag){
    Beitrag b = beitrag.getValue();
    Connection conn = MySQLConnection.getInstance();
    if(conn != null)
    {
        try{
        // Anfrage-Statement erzeugen.
        Statement query;
        query = conn.createStatement();

        // Beitrag löschen

            String sql = "DELETE FROM Beitraege Where id="+b.getId();
            query.executeQuery(sql);

        }catch (SQLException e) {
            e.printStackTrace();
        }
   }
    return "ok";
}
} 
```

我只是不知道该怎么办。我希望你能帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:35:25.010

您需要使用 @JsonCreator 注释您的全参数构造函数：

```
@JsonCreator
public Beitrag(int id, String user_id, String typ, String kategorie, String titel, 
              String beschreibung, String preis, String datum, String name, String telefon, String email){
... 
```

对于资源本身，您不需要 JAXBElement 部分，因此它应该如下所示：

```
@Path("/newBeitrag")
@POST
@Consumes(MediaType.APPLICATION_JSON)
public void newBeitrag(Beitrag beitrag){ 
```

您的输入 JSON 也可能格式不正确；如果您在此之后收到更多错误，请将其发布，以便我们查看它的外观。

最后，您应该考虑使用更规范的 REST 格式。如果您有资源 beitrag，那么访问它的常用方法是：

*   GET /beitrag - 获取所有物品
*   PUT /beitrag - 创建一个新项目
*   GET /beitrag/{id} - 获取 ID 为 {id} 的项目
*   POST /beitrag/{id} - 更新 ID 为 {id} 的项目
*   DELETE /beitrag/{id} - 删除 ID 为 {id} 的项目

这方面有一些变化，但这样的事情比拥有 /newBeitrag、/udateBeitrag 等路径要清晰得多。

# c# - 避免调试器在线程中捕获异常时停止

> ID：14291573
> 
> 赞同：2
> 
> 时间：2013-01-12T08:15:30.300
> 
> 标签：c#, multithreading, exception, exception-handling, visual-studio-debugging

调试器是否可以在 throw 语句处停止，同时保持相同的功能？我已经四处询问，但似乎没有，但我想在我接受这是不可能的之前先尝试一下 stackoverflow。

```
class Program
{
    static void Main(string[] args)
    {
        var o = new MyClass();
        var t = new Task(o.DoStuff);
        t.Start();

        try
        {
            t.Wait();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }
        Console.ReadKey();
    }
}

public class MyClass
{
    public void DoStuff()
    {
        throw new Exception("Testing"); // debugger stops here!
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T08:21:26.943

在 Visual Studio 中使用++打开`Exceptions`窗口。单击要取消处理的异常。`Ctrl``Alt``E`

另请检查：[Visual Studio：如何中断已处理的异常？](https://stackoverflow.com/questions/116896/visual-studio-how-to-break-on-handled-exceptions)

![在此处输入图像描述](../Images/3c6ab9dfca6404c539cf0e561c4a2a78.png)

# c++ - 如何从 E_FAIL 获取详细的错误信息？

> ID：14291577
> 
> 赞同：0
> 
> 时间：2013-01-12T08:16:31.190
> 
> 标签：c++, visual-studio-2010, com, mfc, atl

当我在 MFC 应用程序中使用 ATL 时（不要问我为什么，只是因为我喜欢），有时我会收到错误代码：**E_FAIL**。但是，我几乎找不到具体原因。

我用谷歌搜索了很多次，但没有发现任何相关内容。`try{} catch{}`我认为在 ATL 中应该有类似的东西。

这是一些示例代码：

```
CAxWindow  m_wndView;  // ActiveX host window class.
CComPtr<IWMPPlayer>  m_spWMPPlayer;  // Smart pointer to IWMPPlayer interface.

AtlAxWinInit();
CComPtr<IAxWinHostWindow>  spHost;
HRESULT  hr;
CRect rcClient;
GetClientRect(&rcClient);
m_wndView.Create(m_hWnd, rcClient, NULL, WS_CHILD | WS_VISIBLE | WS_CLIPCHILDREN, WS_EX_CLIENTEDGE);
//when I switch to Static Link to ATL from Dynamic Link to ATL, I always get E_FAIL
hr = m_wndView.QueryHost(&spHost); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:41:33.477

使用`_com_error`类。通过传入该值构造该类的对象，`HRESULT`然后使用其`WCode`或`ErrorMessage`方法获取映射到该`HRESULT`值的错误代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T12:02:03.550

错误代码完全是特定于功能的。想想[另一方面]的一段代码，`return E_FAIL;`它可以从中获得哪些额外的细节？很有可能你根本没有细节。

有时您可以使用[`GetErrorInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221032%28v=vs.85%29.aspx)API 获取其他信息，在您的情况下 - 考虑到您的代码片段 - 不太可能。

你能做的最好的事情就是走进去尽可能接近代码的源头，以便知道它来自哪里。

# symfony - 如何在 Symfony 中的多对多关系中更新反面的计数器字段？

> ID：14291581
> 
> 赞同：0
> 
> 时间：2013-01-12T08:17:13.293
> 
> 标签：symfony, doctrine, many-to-many, sonata-admin

我有两个实体用户和类别，它们通过多对多关系相互连接。

```
manyToMany:
    categories:
      targetEntity: Category
      joinTable:
        name: users_categories
        joinColumns:
          user_id:
            referencedColumnName: id
        inverseJoinColumns:
          category_id:
            referencedColumnName: id 
```

在我的 UserAdmin.php（我正在使用 Sonata Admin 和 Sonata User 捆绑包）中，它们由以下字段处理：

```
->add('categories', 'sonata_type_model', array('required' => false, 'expanded' => false, 'multiple' => true, 'label' => 'Chose your categories')) 
```

现在我需要向我的 Category 实体添加额外的字段 - user_counter，它存储与其链接的用户数量。每次用户添加、更新或删除他与类别的关系时，都应该更新它。

一个想法是在用户实体中创建方法，该方法将在保存管理表单之前获取他的类别，将它们与当前输入进行比较，然后做出决定（类别计数器使 +1 或 -1）。并通过生命周期回调（prePersist 和 preUpdate）开启这个方法。

问题：我的代码将获取所有用户类别并将它们与每个表单保存时的当前输入进行比较。我怎样才能避免这样的开销？也许这个任务还有另一种解决方案？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:24:31.193

您可以跟踪的一种方法是修改实体中的收集方法。例如：

```
/*
 * @ORM\Column(name="user_counter", type="integer")
 */
 protected $user_counter;

public function addUser(User $user) 
{
    $this->users[] = $user;
    $this->user_counter++;
}

public function removeUser(User $user)
{
    $this->users->remove($user);
    $this->user_counter--;
} 
```

或者，如果您不需要数据库中的计数，只需执行 $category->getUsers()->count();

编辑：

如果您想使用事件侦听器来跟踪它而不是修改您的实体设置器，请使用`$unitOfWork->getScheduledCollectionUpdates()`和`getDeleteDiff()`的组合`getInsertDiff()`。

# jquery - 如何结合2点击功能？

> ID：14291587
> 
> 赞同：1
> 
> 时间：2013-01-12T08:17:58.807
> 
> 标签：jquery, jquery-validation-engine

我有输入电子邮件和消息文本时向我发送消息的表单。我想同时使用 jQuery Validation Engine 插件和 ajax 响应来返回结果。为此，我`jQuery('#messageSendButton').click()`在每种情况下都使用相同的功能。

从控制器返回响应：

```
<script type="text/javascript">
                jQuery('#messageSendButton').click(function () {

                    var url = '@Url.Action("SendQuickMessage", "Home")';
                    var email = $('#email').val();
                    var messageText = $('#messageText').val();

                    $.ajax({
                        url: url,
                        type: 'GET',
                        contentType: 'application/json',
                        data: { Email: email, Message: messageText },
                        success: function (result) {
                            if (result.success) {
                                alert("Message sent! Thanks!");
                            }
                            else {
                                alert("Error occured!");
                            }
                        },

                        complete: function () {
                            $(".loading").hide();
                        }
                    });
                });
            </script> 
```

并且，要验证表单：

```
 <script type="text/javascript">
                jQuery(document).ready(function () {
                    jQuery('#quickMessageForm').validationEngine('init');
                    jQuery('#messageSendButton').click(function () {
                        jQuery('#quickMessageForm .loading').animate({ opacity: 1 }, 250);
                        if (jQuery('#quickMessageForm').validationEngine('validate')) {

                            jQuery.post('/Home/SendQuickMessage', {
                                Email: jQuery('#email').val(),
                                Message: jQuery('#message').val(),
                                formname: 'messageForm',
                                formtype: 'messageF'
                            }, function () {
                                jQuery('#quickMessageForm .loading').hide();
                            });

                            return false;
                        } else {
                         jQuery('#quickMessageForm .loading').animate({ opacity: 0 }, 250);
                            return false;
                        }
                    });
                });
            </script> 
```

分别，它们都单独工作，但一起工作，**首先 ajax 函数工作，第二个验证工作。这是不对的。**. 我怎样才能将它们合二为一？首先验证表单，然后获取 ajax 响应。

**编辑：**

这是表格：

```
 <form action="#" method="post" id="quickMessageForm">
            <div class="form_info cmsms_input">
                <label>Email<span class="color_3"> *</span></label>
                @Html.TextBoxFor(model => model.Email, new { name = "email", id = "email", tabidex = 1, @class = "validate[required,custom[email]]" })
            </div>
            <div class="form_info cmsms_textarea">
                <label>Message<span class="color_3"> *</span></label>
                @Html.TextAreaFor(model => model.Message, new { id = "messageText", name = "messageText", tabindex = 2, @class = "validate[required,minSize[10]]" })
            </div>
            <div class="loading"></div>
            <div>
                <input type="submit" name="messageSendButton" id="messageSendButton" value="Send" class="button_small" tabindex="3" />
            </div>
        </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:52:43.770

您可以尝试如下。

即打你的ajax电话`async:false`

```
$.ajax({
url: restmethod,
type: "POST",
contentType: "application/json",
async:false
success: function(data) {
    return data.d; 
}
}); 
```

我希望这对你有帮助。

# javascript - 如果我需要将一个 div 拖放到另一个 div，HTML 5 中的数据类型是什么？

> ID：14291590
> 
> 赞同：0
> 
> 时间：2013-01-12T08:18:11.727
> 
> 标签：javascript, html, drag-and-drop

在下面的 JS 函数中，数据类型设置为“文本”，但这不起作用，因为我正在查看拖放 div。有没有办法解决？还是数据类型？

`function drag(ev) { ev.dataTransfer.setData('Text', ev.target.id); }`

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:25:52.950

Mozilla[建议`application/x-moz-node`](https://developer.mozilla.org/en-US/docs/DragDrop/Recommended_Drag_Types#Dragging_Nodes)在文档中拖动节点，尽管这显然只适用于基于 Gecko 的浏览器。将元素的引用设置为文本更容易且通常更兼容，就像您已经在做的那样，然后使用引用来抓取`drop`事件中的元素并将其在代码中移动到正确的位置。

# ios - 带有工具栏的 Mapview，如默认地图 iphone

> ID：14291597
> 
> 赞同：3
> 
> 时间：2013-01-12T08:19:18.513
> 
> 标签：ios, mapkit, mkmapview, uitoolbar, uitoolbaritem

我想用 iphone 地图之类的工具栏制作地图视图。我用谷歌搜索了它，但我找不到任何合适的东西可以给我任何开发它的想法。所以任何人都对下面的地图有想法。 ![在此处输入图像描述](../Images/49ccb1741ab54535fd22b995160cc216.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:24:35.507

你有你的 mapView 设置，现在你正在尝试添加导航栏吗？您需要做的就是使用界面构建器中的标准导航栏并将其放置在 viewController 的底部。连接适当的网点和 IBActions，然后你就可以开始了。

# c# - 如何在套接字编程中处理客户端断开连接？

> ID：14291598
> 
> 赞同：0
> 
> 时间：2013-01-12T08:19:21.473
> 
> 标签：c#, sockets, network-programming

我已经使用 Sockets 编写了一个服务器端代码，它工作正常，但有一个问题我不知道如何处理这种情况：如果客户端只是关闭应用程序而不发送断开连接请求，我的服务器端程序就会崩溃。我需要做些什么来避免这种情况？请指导我，我是 Socket 编程的新手。

```
private void OnReceive(IAsyncResult result)
{
    try
    {
        Socket clientSocket = (Socket)result.AsyncState;
        clientSocket.EndReceive(result);

        command = responseMessage = string.Empty;
        command = ByteToString(receviedData);
        receviedData = new byte[30];

        if (command=="Connect")
        {
            ClientInfo clientInfo = new ClientInfo();
            clientInfo.socket = clientSocket;
            clientInfo.IP = clientSocket.RemoteEndPoint.ToString();
            connectedClients.Add(clientInfo);
            responseMessage = "Connection established...";
        }
        else if (command=="Disconnect")
        {
            for (int i = 0; i < connectedClients.Count; i++)
            {
                if (connectedClients[i].socket == clientSocket)
                {
                    connectedClients.RemoveAt(i);
                    break;
                }
            }
            clientSocket.Close();
        }
        else
        {
            responseMessage = "Error";
        }

        byte[] responseStatus = StringToByte(responseMessage);
        for (int i = 0; i < connectedClients.Count; i++)
        {
            if (connectedClients[i].socket==clientSocket)
            {
                connectedClients[i].socket.BeginSend(responseStatus, 0, responseStatus.Length,SocketFlags.None, new AsyncCallback(OnSend), connectedClients[i].socket);
                break;
            }
        }

    }
    catch(Exception ex)
    {
      throw new Exception(ex.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:45:08.907

`catch`您的应用程序崩溃了，因为您在方法块中抛出了异常。

如果您不希望应用程序崩溃，则需要从块中删除该`throw new Exception(ex.Message);`行。`catch`将其替换为处理错误并优雅地将应用程序恢复到安全状态的代码。通过阅读您的代码，这应该通过删除`clientSocket`from`connectedClients`

其次，最好只使用`throw;`而不是`throw new Exception(ex.Message);`. `throw;`将重新抛出原始异常对象，从而保留堆栈跟踪和其他有助于调试软件的重要信息。使用`new Exception("Message")`将使用当前堆栈跟踪创建一个全新的异常对象。

```
private void OnReceive(IAsyncResult result)
{
    try
    {
        Socket clientSocket = (Socket)result.AsyncState;
        clientSocket.EndReceive(result);

        command = responseMessage = string.Empty;
        command = ByteToString(receviedData);
        receviedData = new byte[30];

        if (command=="Connect")
        {
            ClientInfo clientInfo = new ClientInfo() {
               socket = clientSocket,
               IP = clientSocket.RemoteEndPoint.ToString(),
               }; 
            connectedClients.Add(clientInfo);
            responseMessage = "Connection established...";
        }
        else if (command=="Disconnect")
        {
            removeClientInfo(clientSocket);
            clientSocket.Close();
        }
        else
        {
            responseMessage = "Error";
        }

        byte[] responseStatus = StringToByte(responseMessage);
        for (int i = 0; i < connectedClients.Count; i++)
        {
            if (connectedClients[i].socket==clientSocket)
            {
                connectedClients[i].socket.BeginSend(responseStatus, 0, responseStatus.Length,SocketFlags.None, new AsyncCallback(OnSend), connectedClients[i].socket);
                break;
            }
        }

    }
    catch(Exception ex)
    {
      // add error handling and gracefully recover
      // caution: The way done here, might work, but it smells :-/
      removeClientInfo((Socket)result.AsyncState);
      ((Socket)result.AsyncState).Close();
    }
}

/// removes the client info from the connectedClients enumerable
private void removeClientInfo(Socket socket)
{
    for (int i = 0; i < connectedClients.Count; i++)
    {
        if (connectedClients[i].socket == socket)
        {
            connectedClients.RemoveAt(i);
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:47:51.740

您在`catch`块内抛出了一个新异常，除非您正在执行一些日志记录或类似操作，否则这没有多大意义。更改 catch 块，如：

```
catch(SocketException)
{ 
} 
```

此外，您应该检查从`EndReceive`. 如果您收到零字节，则意味着客户端已关闭连接：

```
int numReceived = clientSocket.EndReceive(result);
if(numReceived == 0)
{
    //client has shutdown the connection
} 
```

# c++ - RAM 上的存储单元是如何组织的，它与 C++ 有什么关系？

> ID：14291599
> 
> 赞同：2
> 
> 时间：2013-01-12T08:19:30.657
> 
> 标签：c++, memory, ram

据我所知，RAM 的组织方式就像一个由行和列单元组成的网络，每个单元包含 1 个字节。此外，每个单元都带有以十六进制系统编写的地址存储器的标签。是这样吗？现在，在运行 c++ 程序时，我想它使用 RAM 作为存储手段。在这种情况下，由于 c++ 上的 char 类型是存储的基本单位，这个 char 的大小是否与单元格（1 字节）完全相同？， char 的大小是否取决于单元格的大小（在如果单元格的大小不是 1 字节）？，它取决于编译器吗？太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:52:22.067

很容易将 RAM 可视化为行和列的网络。这也是大多数 CS 课程教学生的方式，并且对于大多数目的而言，这在概念层面上会做得很好。编写 C++ 程序时必须知道的一件事是 2 种不同内存的概念：堆栈和堆。堆栈是在变量进入作用域时存储变量的内存。当它们超出范围时，它们将被删除。将此视为堆栈实现（FIFO）。

现在，堆内存稍微复杂一些。这与变量的范围没有任何关系。你可以设置一个固定的内存位置来包含一个特定的值，它会一直留在那里直到你释放它。您可以使用“new”关键字设置堆内存。例如： int* abc = new int(2); 这意味着指针`abc`指向值为“2”的堆位置。`delete`使用完此内存后，您必须使用关键字显式释放内存。不这样做会导致内存泄漏。

在 C 中，字符常量 like 的类型`a`实际上是 a `int`，大小为 4。在 C++ 中，类型是`char`，大小为 1。大小不依赖于编译器。int、float 等的大小取决于系统的配置（16/32/64 位）。使用语句：

```
int a=5;
cout<<sizeof(a)<<endl; 
```

确定系统中 int 的大小。

# iphone - iOS - 尝试旋转文本标签并且标签消失

> ID：14291600
> 
> 赞同：0
> 
> 时间：2013-01-12T08:19:32.063
> 
> 标签：iphone, ios, cocoa-touch, rotation, uilabel

我正在尝试将视图上的标签旋转 90 度。我已经尝试了以下两种方法来做到这一点，标签就从屏幕上消失了。我三次检查属性是否正确附加。有什么想法吗？

尝试一：

```
// rotating labels 90 degrees
self.labelCloseScroll.transform = CGAffineTransformMakeRotation (3.14/2); 
```

尝试二：

```
CGAffineTransform rotate = CGAffineTransformMakeRotation(3.14/2);
rotate = CGAffineTransformScale(rotate, 1, 1);
[self.labelCloseScroll setTransform:rotate]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:02:23.103

可能只是视图的边界对于文本来说太小了。当文本无法在 iOS 的标签视图中完全显示时，它会简单地消失，而不是继续显示。也许这是一项蓄意的 Apple 政策，以防止应用程序附带剪切的文本并强制开发人员进行修复；）

这听起来很像是正在发生的事情。您说过文本在旋转时会变小，这表明您在标签视图上设置了适合属性的缩小文本。随着约束视图的尺寸减小，这将缩小文本。但是文本在消失之前只会缩小这么多。

如果标签视图本身看起来足够大，还请务必检查包含标签的每个父视图的边界，直至整个视图层次结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:27:02.160

我不是 100% 确定它是否有效，但你为什么不使用`M_PI_2`. 这只是您假设的简单想法，`Value of Pi`但`3.14`确切的值是`3.14159...`

我这样做了，效果很好：

```
UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 50, 70)];
lbl.text = @"New";
lbl.backgroundColor = [UIColor clearColor];
lbl.textColor = [UIColor whiteColor];
lbl.highlightedTextColor = [UIColor blackColor];
lbl.font = [UIFont systemFontOfSize:12];
lbl.transform = CGAffineTransformMakeRotation(M_PI_2);
[self.view addSubview:lbl]; 
```

您还可以查看这些问题的答案：

[如何渲染旋转的 UIlabel](https://stackoverflow.com/questions/12686274/how-to-render-a-rotated-uilabel?rq=1)

[在其中心旋转 UILabel](https://stackoverflow.com/questions/13377504/rotating-uilabel-at-its-center?rq=1)

希望对您有所帮助。

# php - 使用推荐人标题

> ID：14291601
> 
> 赞同：0
> 
> 时间：2013-01-12T08:19:43.193
> 
> 标签：php, javascript, web-applications, web-scraping

有2个站点：

```
http://www.site1.com
http://www.site2.com 
```

`http://www.site1.com`包含指向`http://www.site2.com`as 的链接

```
<a href="http://www.site2.com/">link<a/> 
```

当用户从浏览器单击链接时，`http://www.site1.com`会将 Referrer 标头发送到`http://www.site2.com`. 基于 Referrer 标头`http://www.site2.com`进行一些处理。

我想知道我是否可以伪造/更改（可能使用 javascript、PHP、...）Referrer 标头或根本不发送它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:27:03.647

您通常不能自己更改Referer 标头（可能只使用浏览器错误，但是很可能会在短时间内修复），但是，您可能希望使用或制作一个dereferrer 站点，这基本上会改变引用它的 URL。例如：[http](http://dereferer.org/start.asp) ://dereferer.org/start.asp 。

# jquery - 无法使用 jquery 选择复选框 - 意外的标识符

> ID：14291603
> 
> 赞同：0
> 
> 时间：2013-01-12T08:19:50.447
> 
> 标签：jquery, checkbox

我正在尝试选中此复选框并测试它是否被选中

```
<input class="controls" id="user_regret_avatar" label="Delete My Picture" name="user[regret_avatar]" type="checkbox" value="1"> 
```

有了这个

```
if $("#user_regret_avatar").attr('checked') {
    alert("yay");
}
else{
alert("aww");
}; 
```

但我得到

```
Uncaught SyntaxError: Unexpected identifier 
```

我的选择器坏了吗？

另请注意 - 我已经看过[http://api.jquery.com/prop/](http://api.jquery.com/prop/)，我已经检查了所有检查过的测试.. 仍然是同样的问题

现在用[小提琴](http://jsfiddle.net/nptXf/)- 无法进行测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:22:57.297

您需要按如下方式更改 if 条件：

```
if ($("#user_regret_avatar").attr('checked')) {
    alert("yay");
} else {
alert("aww");
}; 
```

注意`()`后面的 if：

### [这是一个有效的 JSFiddle](http://jsfiddle.net/xWuS2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:29:21.233

以下代码对我有用：

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
function displayItems()
{
    //$('#table_numbers input:checkbox:checked')
    if ($("#user_regret_avatar").attr('checked')) {
        alert("yay");
    }
    else {
        alert("aww");
    }
}
    </script>
    <title>SEARCH</title>
</head>
<body>
    <form method="post" action="1004mcout.php">
        <input class="controls" id="user_regret_avatar" label="Delete My Picture" name="user[regret_avatar]" type="checkbox" value="1">
        <input type="button" onclick="displayItems();" />
    </form>

</body> 
</html> 
```

我想你忘了用括号括起来 if 语句：

```
if ($("#user_regret_avatar").attr('checked')) {... 
```

# ios - 在 dispatch_async 死锁中执行blockandwait

> ID：14291604
> 
> 赞同：0
> 
> 时间：2013-01-12T08:19:59.293
> 
> 标签：ios, core-data, thread-safety, grand-central-dispatch, nsmanagedobjectcontext

我大量使用后台操作，我只是好奇这是否会导致死锁。我有一个核心数据托管对象上下文设置为使用一个私有队列，该队列使用 performblockandwait 从几个不同的线程引用（可能同时）。在某些情况下，可以通过完成另一个后台任务来启动后台任务。

可能会出现以下情况，因为我的后台任务是在满足某些条件时启动的，这可能来自主线程上的用户输入或后台任务。

```
- (void)task1
{
     __weak MyClass *weakself = self;

     dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0),^{
         ....
         ....
         [context performBlockAndWait:^{
              BOOL condition = [weakself performDbCleanup];

              if (condition)
              {
                  [weakself task2];
              }
         }];
     });
}

- (void)task2
{
     __weak MyClass *weakself = self;

     dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,0),^{
         ....
         ....
         [context performBlockAndWait:^{
              [weakself performDbCleanup2];
         }];
     });
} 
```

很难准确解释为什么我需要以这种方式做事，但在这两种情况下我都需要 performBlockAndWait，因为这是正在发生的事情的高度简化版本。长时间处理发生在 performBlockAndWait 调用之前和之后，我不想阻塞对 DB 上下文的访问，也不应该阻塞主线程。

# json - JSON::XS "用法" 呱呱

> ID：14291605
> 
> 赞同：6
> 
> 时间：2013-01-12T08:20:14.227
> 
> 标签：json, perl, perl-module

我似乎无法`JSON::XS`正确使用 OO 接口。以下呱呱叫我无法追踪的错误：

```
use JSON::XS;
my $array = ['foo', 'bar'];

my $coder = JSON::XS->new->utf8->pretty;
print $coder->encode_json($array); 
```

这与以下内容有关：`Usage: JSON::XS::encode_json(scalar) at test.pl line 5.`我一直在梳理代码，`JSON::XS`但在任何地方都找不到“用法：”警告。我的用法似乎与文档中的示例非常匹配。谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T08:29:02.340

[`JSON::XS`](https://metacpan.org/module/JSON%3a%3aXS)有两个接口：function 和 OO。

*   在函数式接口中，函数名是`encode_json`。
*   在OO接口中，方法很简单`encode`，不是`encode_json`。

以下两个片段都有效：

```
# Functional                  | # OO
------------------------------+-----------------------------------------
                              | 
use JSON::XS;                 | use JSON::XS;
my $array = ['foo', 'bar'];   | my $array = [ 'foo', 'bar' ];
                              |
print encode_json($array);    | my $coder = JSON::XS->new->utf8->pretty;
                              | print $coder->encode($array);
                              |
# ["foo","bar"]               | # [
                              | #    "foo",
                              | #    "bar"
                              | # ] 
```

# asp.net - XSS：突破不完整的编码

> ID：14291606
> 
> 赞同：2
> 
> 时间：2013-01-12T08:20:19.743
> 
> 标签：asp.net, security, xss

我正在测试在 Microsoft-IIS/7.5 Web 服务器上运行的 ASP.NET 应用程序，并向其发送以下 GET 请求参数：

```
&search=aaa%20%*+,-/;<=>^|"'bbb 
```

其中一个参数是搜索，我在其中输入了上面可以看到的值。该值在返回的响应中打印两次，如下所示：

第一个参数：

```
<input name="nn" type="text" value="aaa %* ,-/;&lt;=>^|&quot;&#39;bbb" class="cc" /> 
```

第一项中引用的参数如下：

*   " ==>`&quot;`
*   ' ==>`&#39;`
*   <==>`&lt;`

我想没有办法突破那里，因为值被转义了，我们不能正确输入 " 字符。然而，所有参数都没有正确转义，即使不可能突破。

第二个参数：

```
<strong>aaa %* ,-/;<=>^|"'bbb</strong> 
```

我们可以看到所有角色都按原样呈现，但有一个问题。在 < 字符之后不能有任何 [a-zA-Z0-9] （可能还有其他一些）字符，因为我们可能会被 ASP.NET 过滤器阻止。

如果我们输入以下内容：

```
&searchQuery=aaa<#script>alert('Hi');<#/script>bbb 
```

我们得到以下输出：

```
<strong>aaa<#script>alert('Hi');<#/script>bbb</strong> 
```

我问你是否有任何方法可以打破限制并执行任意 JavaScript 代码？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:24:55.233

HTML 要求[标签名称](http://www.w3.org/TR/html5/syntax.html#syntax-tag-name)紧跟在[起始标签](http://www.w3.org/TR/html5/syntax.html#start-tags)open delimiter之后`<`：

> **开始标签**必须具有以下格式：
> 
> 1.  开始标记的第一个字符必须是 U+003C LESS-THAN SIGN 字符 ( `<`)。
> 2.  开始标签接下来的几个字符必须是元素的标签名称。
> 
> […]

除此之外的任何事情都取决于浏览器的解释怪癖。

但是除了元素标签之外，还有其他标签，例如标记声明标签 ( `<!…&gt;`)、处理指令标签 ( `<?…&gt;`) 和替代注释标签 ( `<%…%>`)，它们可以被某些浏览器识别并允许某些黑客攻击。

看看常见的 XSS 备忘单，如[OWASP 的*XSS Filter Evasion*](https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet) Cheatsheet和[*HTML5 Security Cheatsheet*](http://html5sec.org)，或一些 HTML fuzzer，如[Shazzer](http://shazzer.co.uk/)。

# ruby-on-rails-3 - 在其他 2 个位置之间的路径半径中查找位置

> ID：14291608
> 
> 赞同：2
> 
> 时间：2013-01-12T08:20:51.943
> 
> 标签：ruby-on-rails-3, performance, gps, geometry, geokit

我有一个大型的位置数据库，都带有纬度/经度。我使用 GeoKit 和 Rails 轻松获取任何其他位置的设定半径内的位置。所有这些都很好。

**我的目标是指定 2 个位置（例如 A 和 B），并在 A 和 B 之间的路径上找到 Xmi 半径内的所有其他位置。**

有哪些方法可以解决这个问题？我曾考虑在路径上以某个固定间隔执行附近的搜索，但后来我担心性能和另一面——仅仅因为我选择了一个糟糕的间隔而丢失了路径附近的位置。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:15:57.213

我没有在这里找到一个优雅的答案，但我想 sadiqxs 是在正确的轨道上。GeoKit 不支持非矩形搜索，所以我最终得到了一个类似于 sadiqxs 的解决方案，但经过优化以根据距离应用最大搜索次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T08:29:11.300

只需计算端点，

在沿路径的半径长度的间隔处

![在此处输入图像描述](../Images/2d9000ef849d896638602db53b06cf73.png)

如图所示。

这可能会解决你的问题

# jquery - .load() 和 $.get() 之间的区别

> ID：14291609
> 
> 赞同：1
> 
> 时间：2013-01-12T08:21:05.867
> 
> 标签：jquery, html, cordova, jquery-mobile

我正在创建一个包含多个 HTML 页面、jquery 和电话间隙的移动应用程序。我不想在我的应用程序页面中复制粘贴相同的页脚，所以我创建了一个全局 footer.html 并尝试将该文件的内容加载到文档 .ready() 上，类似这样。

**页脚 HTML**

```
<div data-role="navbar" data-grid="d">
    <ul class="apple-navbar-ui comboSprite">
        <li><a href="../dashboard.html">Home</a></li>
        <li><a href="../contacts/contacts.html">Contacts</a></li>
        <li><a href="../applications/applications.html">Applications</a></li>
        <li><a href="settings.html">My Account</a></li>
    </ul>
</div> 
```

**主要 HTML**

```
<div data-role="page">
    <div id="footer" data-role="footer">
    </div>
</div>

$(document).ready(function () {
   $('#footer').load("footer.htm");
   $('#footer').trigger('create');
}); 
```

它加载了 footer.html 的内容，但 Jquery mobile 的 UI 没有被渲染。

但是当我将文档就绪代码更改为此

```
$(document).ready(function () {
   $.get('footer.htm', function (retData) {
      $('#footer').append(retData);
      $('#footer').trigger('create');
   });
}); 
```

效果很好。

那么这两种方法有什么区别呢？为什么一个工作而另一个失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T08:24:17.783

实际上不同之处在于`$.get()`你有一个回调函数，而你在里面`$('#footer').trigger('create');`放`.load()`了一个回调函数。

你应该这样做：

```
$(document).ready(function(){
    $('#footer').load("footer.htm", function(){
        $(this).trigger('create');
    });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T08:27:44.260

方法之间的区别：
`.get()`- 加载所有内容
`.load()`- 可以加载部分内容`$('#result').load('file.html #container');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T06:44:25.767

.load() - 从服务器获取数据的最简单方法，但与 .get() 方法不同，它允许我们指定要插入的远程文档的一部分。喜欢“ `$( "#result" ).load( "ajax/test.html #container" );`”

.get() - 使用 HTTPGET 请求从服务器加载数据。从服务器加载所有内容。

# facebook - 我可以喜欢我的 Facebook 页面，但我的朋友不能？

> ID：14291616
> 
> 赞同：0
> 
> 时间：2013-01-12T08:21:45.727
> 
> 标签：facebook, facebook-javascript-sdk

我已经制作了一个 Facebook 页面，并在我的页面上放置了喜欢按钮。

在我将它从“fb”目录移动到根目录之前它一直有效。

现在有人可以检查这个链接

[http://kris.byethost10.com/](http://kris.byethost10.com/)

在此页面中，当您喜欢它不起作用时，请向我显示错误

```
Sorry, this feature isn't available right now: We're working on this issue and will have it fixed soon. Check the Known Issues on Facebook page for more information. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:26:47.370

可能是您朋友浏览器的问题，尝试在您朋友的浏览器上检查您的帐户并检查[此链接](http://forums.kanoapps.com/showthread.php?8210-FB-Error-Message-Error-processing-request-Sorry-this-Feature-isn-t-available-...)可能对您有帮助

# datagridview - 添加查询结果

> ID：14291618
> 
> 赞同：1
> 
> 时间：2013-01-12T08:21:57.447
> 
> 标签：datagridview, listbox

我想将书桌加载到`DataGridView`其中，如果`bookname`少于 10 个字符，请在`ListBox`

怎么做 ？

```
public partial class DataGridViewSample : Form  
{   
sqlconnection conn = new sqlconnection ("connection string");

DataTable dt = null;

private void LoadData(string vCommand)

    {
      if (vSqlConnection.State == ConnectionState.Closed)
      {  
        vSqlConnection.Open();

        using (SqlDataAdapter sda = new SqlDataAdapter(vCommand, conn))
        {
          sda.Fill(dt);
          dataGridView.DataSource = dt;
        }
        vSqlConnection.Close();
      }
    }

    private void button1_Click(object sender, EventArgs e)
    {
      string vCommand = @"Select * From Book";
      LoadData(vCommand);
    }
} 
```

# yaml - 如何将 YML 文件用于 Mojito 项目？

> ID：14291624
> 
> 赞同：0
> 
> 时间：2013-01-12T08:23:22.860
> 
> 标签：yaml, mojito

据说 Mojito 可以使用 JSON 或 YML 作为`application.json`（配置文件），但是我周围没有看到 YML 的例子吗？

例如，如何转换：

```
[
    {
        "settings": [ "master" ],
        "specs": {
            "hello" : {
                "type" : "HelloWorldMojit"
            }
        }
    }
] 
```

到 YML 文件？

另外，当我们使用

```
$ mojito create app Hello 
```

我们不能指定我们希望 YML 文件作为默认文件（而不是 JSON 文件）吗？

* * *

细节：

我使用 npm 的 yamljs 将文件转换为：

```
-
  settings: [master]
  specs: { hello: { type: HelloWorldMojit } } 
```

它不起作用。我将其编辑为

```
-
  settings: [master]
  specs:
      hello:
          type:
              HelloWorldMojit 
```

它也行不通。服务器可以启动，但是访问首页时，报错：

```
error: (outputhandler.server): { [Error: Cannot expand instance [hello], 
       or instance.controller is undefined] code: 500 } 
```

（文件`routes.json`取决于`hello`被定义）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:57:08.410

从 Mojito 0.5.2 开始，再次支持 YML。0.5.1 和 0.5.0 不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:30:58.050

我们没有`archetypes`with `yaml`，您必须手动转换文件并重命名它们。好消息是，更灵活的`archetypes`基础设施正在形成。

您应该对问题中粘贴的配置没问题，只需使用最新版本的 mojito (0.5.x)

# ruby-on-rails - Rails、RSpec 和 Capyara/Selenium - 如何使用 Selenium click_at 方法点击精确的 x、y 坐标？

> ID：14291625
> 
> 赞同：1
> 
> 时间：2013-01-12T08:23:39.377
> 
> 标签：ruby-on-rails, ruby, selenium, rspec, rspec-rails

我正在尝试在 Rails 项目中使用 RSpec 和 Selenium 测试单击 HTML 页面中的精确坐标。但是，文档中的 Selenium click_at 方法似乎无法通过任何驱动程序或本机方法使用。有谁知道如何访问该方法。我正在使用 Rails 3.2.8 和 rspec-rails gem 2.12.0 以及 selenium-webdriver gem 2.27.2 和 capybar 2.0.1

现在我正在尝试使用此代码，但它没有点击正确的坐标：

```
page.driver.browser.action.move_to( my_element.native ).move_by( 300, 300 ).click.perform 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T07:31:59.983

```
page.driver.browser.action.move_to( my_element.native, 300, 300 ).click.perform 
```

# javascript - index.js.haml 未加载

> ID：14291631
> 
> 赞同：0
> 
> 时间：2013-01-12T08:24:17.893
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, haml

我正在使用inherited_resources 并在我的控制器中指定了`respond_to :js, :only => [:index]`.

但是，当我触发 oncange 事件以进行下拉时，ajax url 会通过适当的查询访问控制器索引方法。

我正在尝试刷新`div`using `index.js.haml`. 但它没有加载。

在我的 Rails 日志中

我正进入（状态`Processing by MessagesController#index as */*`

为什么我没有用`'js'`format 而不是`*/*`. 我在哪里做错了？如何让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:18:42.873

“*/*”表示“浏览器”接受任何你发回的东西，它基本上取决于浏览器发送的HTTP_ACCEPT。

有关更多详细信息，请参阅[https://stackoverflow.com/a/3793974/1970061](https://stackoverflow.com/a/3793974/1970061)。

您的 div 没有刷新，因为您的 JavaScript 响应 Text 没有执行。使用 Jquery eval() 函数运行响应文本的 javascript

# mysql - 在 mysql datetime 和 python timestamp 之间转换的正确方法是什么？

> ID：14291636
> 
> 赞同：40
> 
> 时间：2013-01-12T08:24:40.927
> 
> 标签：mysql, python-3.x

根据[http://dev.mysql.com/doc/refman/5.0/en/datetime.html](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)。我必须找到一种将字符串值 'YYYY-MM-DD HH:MM:SS' 转换为时间戳 int 的方法。

我在python的文档中查找。

我试过：

```
print(time.strptime('2013-01-12 15:27:43', '%Y-%m-%d %H:%M:%S')) 
```

python给我这样的结果。

time.struct_time(tm_year=2013, tm_mon=1, tm_mday=12, tm_hour=15, tm_min=27, tm_sec=43, tm_wday=5, tm_yday=12, tm_isdst=-1)

我尝试将时间戳转换为 YYYY-MM-DD HH:MM:SS 格式

```
print(time.strftime('%Y-%m-%d %H:%M:%S',time.time())) 
```

python给我一个类型错误。

我只使用时间戳来计算时间和日期，我希望python中已经有一种方法，简单高效，并且不必创建临时数据。

根据答案我写了两种方法。希望它会有所帮助

```
import time

def convertTimestampToSQLDateTime(value):
    return time.strftime('%Y-%m-%d %H:%M:%S',time.localtime(value))

def convertSQLDateTimeToTimestamp(value):
    return time.mktime(time.strptime(value, '%Y-%m-%d %H:%M:%S')) 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-12T08:57:07.507

如果我没有正确理解，很高兴更新此内容，但这里有一些示例可能会有所帮助。请注意，这使用`datetime`模块而不是`time`.

```
>>> import datetime 
```

在这里，我们设置了一个示例时间戳`ts`和格式`f`：

```
>>> ts = '2013-01-12 15:27:43'
>>> f = '%Y-%m-%d %H:%M:%S' 
```

与您在上面所做的类似，我们使用`strptime`函数 (from `datetime.datetime`) 将我们的字符串转换为`datetime`基于格式化参数的对象：

```
>>> datetime.datetime.strptime(ts, f)
datetime.datetime(2013, 1, 12, 15, 27, 43) 
```

现在反过来 - 这里我们`datetime.datetime.now()`用来获取当前时间作为一个`datetime`对象：

```
>>> now = datetime.datetime.now()
>>> now
datetime.datetime(2013, 1, 12, 0, 46, 54, 490219) 
```

在这种`datetime`情况下，该`strftime`方法实际上是在`datetime`对象本身上调用的，格式参数作为参数：

```
>>> now.strftime(f)   
'2013-01-12 00:46:54' 
```

在您的情况下，您收到错误的原因是因为`time.time()`返回一个浮点数：

```
>>> time.time()
1357980846.290231 
```

但`time.strftime`需要一个`time`元组，类似于你上面的。无需进入令人抓狂的时间漩涡，诸如`time.localtime()`返回上述`time`元组之类的函数将按您的预期返回：

```
>>> now = time.localtime()
>>> now
time.struct_time(tm_year=2013, tm_mon=1, tm_mday=12, tm_hour=0, tm_min=55, tm_sec=55, tm_wday=5, tm_yday=12, tm_isdst=0)
>>> f = '%Y-%m-%d %H:%M:%S'
>>> time.strftime(f, now)
'2013-01-12 00:55:55' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-01-25T05:26:56.290

我只是添加这个类来潜在地为下一个人节省一点时间。如果有人觉得这很有用，请支持 RocketDonkey 的答案。

```
## dev on v3.7.6

from datetime import datetime
from time import mktime, time

class Time:
    '''\
*Convenience class for easy format conversion*\n
Accepts time() float, datetime object, or SQL datetime str.\n
If no time arg is provided, object is initialized with time().\n
id kwarg can be used to keep track of objects.\n
Access formats as instance.t, instance.dt, or instance.sql.\
    '''

    f = '%Y-%m-%d %H:%M:%S'

    def __init__(self, *arg, id=None) -> None:
        self.id = id
        if len(arg) == 0:
            self.t = time()
            self.dt = self._dt
            self.sql = self._sql
        else:
            arg = arg[0]
            if isinstance(arg, float) or arg == None:
                if isinstance(arg, float):
                    self.t = arg
                else:
                    self.t = time()
                self.dt = self._dt
                self.sql = self._sql
            elif isinstance(arg, datetime):
                self.t = arg.timestamp()
                self.dt = arg
                self.sql = self._sql
            elif isinstance(arg, str):
                self.sql = arg
                if '.' not in arg:
                    self.dt = datetime.strptime(self.sql, Time.f)
                else:
                    normal, fract = arg.split('.')
                    py_t = datetime.strptime(normal, Time.f)
                    self.dt = py_t.replace(
                        microsecond=int(fract.ljust(6, '0')[:6]))
                self.t = self.dt.timestamp()

    @property
    def _dt(self) -> datetime:
        return datetime.fromtimestamp(self.t)

    @property
    def _sql(self) -> str:
        t = self.dt
        std = t.strftime(Time.f)
        fract = f'.{str(round(t.microsecond, -3))[:3]}'
        return std + fract

    def __str__(self) -> str:
        if self.id == None:
            return self.sql
        else:
            return f'Time obj "{self.id}": {self.sql}'

def test():
    def test_one(*arg):
        t = Time(*arg, id=type(*arg))
        print(t)
        print(t.t)
        print(t.dt)

    sql = '2020-01-22 15:30:33.433'
    time_float = 1579927395.3708763
    dt_obj = datetime.now()
    for datum in [sql, time_float, dt_obj, None]:
        test_one(datum)

if __name__ == '__main__':
    test() 
```

# jquery - 带有ajax jquery的jsonp

> ID：14291644
> 
> 赞同：0
> 
> 时间：2013-01-12T08:26:58.583
> 
> 标签：jquery, ajax, json, jsonp

我有这个代码：

```
$.ajax({
    type: "POST",
    url: URL,
    data: data,
    dataType: 'jsonp',
    crossDomain: true,
    contentType: "application/json; charset=utf-8",
    jsonpCallback: callback,
    success: function (data,textStatus,jqXHR) {
        alert("success");
    }, 
    error:function(jqXHR, textStatus, errorThrown){
        alert(JSON.stringify(jqXHR));
    },
    complete: function(jqXHR, textStatus){
        alert(JSON.stringify(jqXHR));
    }

}); 
```

状态响应是 200 但它被视为错误。我可以在 chrome 响应选项卡上看到这个：

```
{
  "error": "cannot create user because user already exists",
  "code": 404
} 
```

<-- 这是服务器返回的数据

而且我无法使用 jQuery 获取该数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:15:06.523

我使它可以使用以下代码：

```
 $.ajax({
        type: "POST",
        url: URL,
        data: data,
        dataType: 'jsonp',
        crossDomain: true,
        contentType: "text/javascript",
        success: function (data,textStatus,jqXHR) {
             alert(JSON.stringify(data));
        }, 
        error:function(jqXHR, textStatus, errorThrown){
             alert(JSON.stringify(jqXHR));
        },
        complete: function(jqXHR, textStatus){
             alert(JSON.stringify(jqXHR));
        }

    }); 
```

希望这有帮助。

# jquery - jquery按ID或名称跟踪？

> ID：14291647
> 
> 赞同：0
> 
> 时间：2013-01-12T08:27:10.470
> 
> 标签：jquery

> **可能重复：**
> [在 jQuery 中，按类或 id 选择是否比按其他属性选择更快？](https://stackoverflow.com/questions/6460644/in-jquery-is-selecting-by-class-or-id-faster-than-selecting-by-some-other-attri)

我对 jquery 非常陌生，在搜索不同的论坛后对这么多选项感到有些困惑。您能否建议在 jquery 中选择一个元素的方法更快、最优化？

1）按id [通常我用这个]

```
$("#thisID") 
```

2) 按名称

```
$("input[name=thisName]") 
```

3) 按类型后跟 id [不确定这是否是正确的语法]

```
$("select #thisID) 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:27:57.957

通过 ID 选择元素比任何其他方法都快。

由于 DOM 操作的差异，性能将取决于您使用的浏览器。

# javascript - JQuery 事件的通用函数

> ID：14291648
> 
> 赞同：1
> 
> 时间：2013-01-12T08:27:10.823
> 
> 标签：javascript, javascript-events, jquery

一开始 - 我不是 JQuery 的主人；）。我有以下解决方案来防止多次点击（只尊重第一个并忽略其余的）：

```
preventMultiClick = function() {
    $(this).unbind("click");
    $(this).bind("click", function() {
        return false;
    });
};
preventMultiSubmit = function() {
    $(this).unbind("submit");
    $(this).bind("submit", function() {
        return false;
    });
};
$("a").one("click", preventMultiClick);
$("#user").one("submit", preventMultiSubmit); 
```

对我来说，这个解决方案并不优雅，我认为应该如此。所以我尝试将其升级到以下一个：

```
preventMultiClick = function(event) {
    $(this).unbind(event);
    $(this).bind(event, function() {
        return false;
    });
};
$("a").one("click", preventMultiClick("click"));
$("#user").one("submit", preventMultiClick("submit")); 
```

并且该解决方案不起作用。有人可以解释为什么或告诉我应该如何编写作为函数参数给出的事件的函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:35:06.453

问题是您在绑定处理程序时调用该函数，`event`对象被传递给您的处理程序，也是`event`一个对象，您应该使用它的`type`属性。

```
var preventMultiClick = function(event) {
    $(this).unbind(event.type);
    $(this).bind(event.type, function() {
        return false;
    });
};

$("a").one("click", preventMultiClick);
$("#user").one("submit", preventMultiClick); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:35:18.717

问题是您传递的是未定义的变量而不是函数引用。相反，我会做这样的事情。

```
preventMultiClick = function(event) {
    $(this).unbind(event.type);
    $(this).bind(event.type, function() {
        return false;
    });
};

$('a').one('click', preventMultiClick);
$('#user').one('submit', preventMultiClick); 
```

每个事件都包含它的类型。

# c++ - 将析构函数实现为函数？

> ID：14291649
> 
> 赞同：0
> 
> 时间：2013-01-12T08:27:11.773
> 
> 标签：c++, oop, destructor

我有一个关于类的析构函数实现的问题。我了解正确的方法是使用 ~ 运算符，但请查看以下代码：

```
class foo
{
private:
int* abc;

public:
foo()
{
abc = new int(2);
}

~foo()
{
delete abc;
}

void func()
{
delete abc;
}
} 
```

现在让我们说 main 函数定义如下：

```
int main(int argc, char** argv)
{
foo a;
a.func();
} 
```

在 main 函数调用 func() 时，它的工作方式与析构函数完全相同吗？在任何类似的设置中，析构函数和这个函数有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T08:33:45.040

`func()`并`~foo()`做同样的事情。这就是问题所在。当`a`超出范围时，`~foo()`会自动调用其析构函数，导致`abc`被删除*两次*。解决它的一种方法是在之后的末尾设置`abc`为，这样当析构函数被调用时，它是一个指针，这是 C++ 中的一种特殊情况，实际上什么都没有做，并且是一个有效的操作。`NULL``func()``delete``delete``NULL`

或者，当然，可以以一种真正有意义并完成某些事情的方式重写代码。

并且要非常清楚，`func()`和之间的“区别”`~foo()`是如何/何时调用它们，而不是它们的作用。`func()`由用户手动调用，而`~foo()`在变量超出范围时自动调用。`func()`可能会被调用零次或多次（取决于程序员），但编译器将`~foo()`在此代码中只调用一次（不多也不少）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:31:49.597

除了定义上的明显差异之外，几乎没有差异。

析构函数

*   在作用域结束或调用时自动`delete`调用，可以手动调用，很少是一个好主意

*   调用成员变量和基类的析构函数。

磨坊法

*   手动调用

在这种特殊情况下，没有基类，只有成员字段是`int *`没有析构函数的 ptr，所以在这种情况下，除了调用方法之外，它们是相同的。

# session - Codeigniter 会话 - 机器人的很多行

> ID：14291656
> 
> 赞同：1
> 
> 时间：2013-01-12T08:28:03.027
> 
> 标签：session, codeigniter-2, bots

每个人。我对**CI 会话**有疑问。
我的会话配置的一部分：

```
$config['sess_cookie_name'] = 'ci_session';
$config['sess_expiration'] = 0;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie'] = TRUE;
$config['sess_use_database'] = TRUE;
$config['sess_table_name'] = 'ci_sessions';
$config['sess_match_ip'] = TRUE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update'] = 300; 
```

在短时间内，机器人/蜘蛛创建了大量（约 20 万）会话。喜欢 ：

```
Mozilla/5.0 (compatible; YandexBot/3.0; +http://yandex.com/bots)
Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 
```

有没有办法防止这种情况？我阅读了[12241701](https://stackoverflow.com/questions/12241701)问题的答案。但我不知道在我的情况下我应该写什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:43:59.193

好吧，当您永远保持会话时，`$config['sess_expiration'] = 0;`您将遇到这个“问题”。

如果您想使用链接到自己的文章中的 .htaccess 文件，请完全按照该答案中的内容使用它。

它正在做的是减慢所有蜘蛛的爬行速度，除了百度和搜搜（它们都是中国搜索引擎），它完全禁止爬行。

我认为您并不想真正禁止好的搜索引擎抓取您的网站，因此这可能是您的最佳选择。

# c# - 在 Winforms 中更改连接字符串

> ID：14291658
> 
> 赞同：3
> 
> 时间：2013-01-12T08:28:49.430
> 
> 标签：c#, winforms, visual-studio-2010, configuration, app-config

我正在开发 win 表单，并且我有应用程序配置文件。如何写入应用程序配置文件的连接字符串部分？我当前的 App.Config 文件是

```
 <?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>
     <add name="MyDbConnection" connectionString="" providerName="System.Data.OleDb" />
</connectionStrings>
</configuration> 
```

我更改连接字符串的 C# 代码是

```
var Config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
                var connectionStringsSection = (ConnectionStringsSection)Config.GetSection("connectionStrings");
                ConfigurationManager.ConnectionStrings["MyDbConnection"].ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + FilePath + "";
                Config.Save();
                ConfigurationManager.RefreshSection("connectionStrings"); 
```

但是在第 3 行会生成异常

```
configuration error exception this configuration is read only 
```

更改连接字符串的代码是从外部类调用的。我不知道应该将代码放在哪里来覆盖 IsReadonly() 方法。应用程序配置也没有文件隐藏代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:55:24.070

**应用程序配置**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
   <connectionStrings>
      <add name="MyDBConnectionString" providerName="System.Data.SqlClient"
            connectionString="Data Source=localhost;Initial Catalog=MySQLServerDB; Integrated Security=true" />
   </connectionStrings>
</configuration> 
```

当您将连接字符串保存在 App.config 文件中时，您可以使用 System.Configuration.ConfigurationManager 类在代码中读取此连接字符串。

```
ConnectionStringSettings  conSettings = ConfigurationManager.ConnectionStrings["MyDBConnectionString"]; 
```

ConnectionStringsSettings 类提供了在程序中读取连接字符串设置的属性，如下所示：

```
string name = conSettings.Name;
string providerName = conSettings.ProviderName;
string connectionString = conSettings.ConnectionString; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T07:38:10.577

**要在App.config**文件中写入连接字符串，您可以使用：

创建两个设置，例如：**AppConnectionString**（类型：字符串）和**ServerConnectionString**（类型：ConnectionString）

修改设置代码，在获取**ServerConnectionString**设置的属性时将返回值更改为**AppConnectionString**。

通过这样做，您可以修改、保存或重新加载**AppConnectionString**设置，当您在应用程序上引用**ServerConnectionString**时，它将返回**AppConnectionString**设置。尝试一下。

# c++ - 捆绑应用程序中的 dylib 和框架

> ID：14291665
> 
> 赞同：1
> 
> 时间：2013-01-12T08:29:44.633
> 
> 标签：c++, macos, deployment, homebrew

昨天我阅读了很多关于部署 MacOSX 应用程序的内容，但我仍然有一些疑问。在过去的几年里，我一直在使用*macdeployqt*为 MacOSX 部署 Qt4 应用程序。现在，mi 应用程序使用了一个不属于 Qt 框架的库：Poppler。

我已经使用*Homebrew*安装了 poppler-qt4 ：

```
brew install poppler --with-qt4 --enable-xpdf-headers 
```

使用*macdeployqt*后，我​​知道我必须使用*install_name_tool*通过相对路径更改绝对路径。一些 dylibs 也有依赖关系：

> ```
> MyApp.app/Contents/MacOS/MyApp:
>     /usr/local/lib/libpoppler-qt4.4.dylib
> 
> /usr/local/lib/libpoppler-qt4.4.dylib:
>   /usr/local/Cellar/poppler/0.20.5/lib/libpoppler.28.dylib
>   /usr/local/lib/libfontconfig.1.dylib
>   /usr/local/lib/QtCore.framework/Versions/4/QtCore
>   /usr/local/lib/QtGui.framework/Versions/4/QtGui
>   /usr/local/lib/QtXml.framework/Versions/4/QtXml 
> ```

使用*macdeployqt*后，我​​知道 Qt 框架已被复制到应用程序包中，如何使用*install_name_tool更改**/usr/local/lib/QtCore.framework/Versions/4/QtCore*的相对路径？

 *是否使用 -headerpad_max_install_names 编译自制*dylib*？

是否有使用 brew 自动执行此操作的方法？

我应该使用*install_name_tool*什么？@executable_path 还是 @loader_path？

编辑：似乎 macdeployqt 足够聪明，可以部署第三方 dylib、poppler-qt4 及其所有依赖项都复制到 Applicaciont.app/Frameworks 文件夹，并自动使用 install_name_tool。但是，现在我遇到了这个BUG：[macdeployqt not copying plugins](https://stackoverflow.com/questions/3454001/macdeployqt-not-copying-plugins)我想问题是poppler-qt4.4名称上的“qt”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:47:00.567

您可以手动更改所有路径，但这样做容易出错、耗时且痛苦。我的建议是使用一个工具来为你做这件事：cmake 中包含的 cpack。

无论如何，从 10.5 开始，您应该使用：@loader_path。请参阅[Dylib](https://stackoverflow.com/questions/2094411/dylib-executable-path-path-issue-in-a-plug-in-bundle)。

对于 MacOS X，以下代码创建一个包并正确复制 homebrew dylib，即使具有 root 权限。但是，您必须检查使用 homebrew 编译的每个库是否具有正确的参数。

通常，对于部署，最好手动编译库。我在自制库（ffmpeg）方面遇到了一些问题。但不是 Qt 也不是 Boost :-)。

```
if( USE_QT5 )
     qt5_use_modules( MyApp Core OpenGL Sql Multimedia Concurrent )
endif()

# Install stuff
set( plugin_dest_dir bin )
set( qtconf_dest_dir bin )
set( APPS "\${CMAKE_INSTALL_PREFIX}/bin/MyApp" )
if( APPLE )
    set( plugin_dest_dir MyApp.app/Contents/ )
    set( qtconf_dest_dir MyApp.app/Contents/Resources )
    set( APPS "\${CMAKE_INSTALL_PREFIX}/MyApp.app" )
endif( APPLE )
if( WIN32 )
    set( APPS "\${CMAKE_INSTALL_PREFIX}/bin/MyApp.exe" )
endif( WIN32 )

#--------------------------------------------------------------------------------
# Install the MyApp application, on Apple, the bundle is at the root of the
# install tree, and on other platforms it'll go into the bin directory.
install( TARGETS MyApp
    BUNDLE DESTINATION . COMPONENT Runtime
    RUNTIME DESTINATION bin COMPONENT Runtime
)

#--------------------------------------------------------------------------------
# Install needed Qt plugins by copying directories from the qt installation
# One can cull what gets copied by using 'REGEX "..." EXCLUDE'
install( DIRECTORY "${QT_PLUGINS_DIR}/imageformats"
    "${QT_PLUGINS_DIR}/codecs"
    "${QT_PLUGINS_DIR}/phonon_backend"
    "${QT_PLUGINS_DIR}/sqldrivers"
    "${QT_PLUGINS_DIR}/accessible"
    "${QT_PLUGINS_DIR}/bearer"
    "${QT_PLUGINS_DIR}/graphicssystems"
    DESTINATION ${plugin_dest_dir}/PlugIns
    COMPONENT Runtime
    FILES_MATCHING
    PATTERN "*.dylib"
    PATTERN "*_debug.dylib" EXCLUDE
)

#--------------------------------------------------------------------------------
# install a qt.conf file
# this inserts some cmake code into the install script to write the file
install( CODE "
    file(WRITE \"\${CMAKE_INSTALL_PREFIX}/${qtconf_dest_dir}/qt.conf\" \"\")
    " COMPONENT Runtime
)

#--------------------------------------------------------------------------------
# Use BundleUtilities to get all other dependencies for the application to work.
# It takes a bundle or executable along with possible plugins and inspects it
# for dependencies.  If they are not system dependencies, they are copied.

# directories to look for dependencies
set( DIRS ${QT_LIBRARY_DIRS} ${MYAPP_LIBRARIES} )

# Now the work of copying dependencies into the bundle/package
# The quotes are escaped and variables to use at install time have their $ escaped
# An alternative is the do a configure_file() on a script and use install(SCRIPT  ...).
# Note that the image plugins depend on QtSvg and QtXml, and it got those copied
# over.

install( CODE "
    file(GLOB_RECURSE QTPLUGINS
      \"\${CMAKE_INSTALL_PREFIX}/${plugin_dest_dir}/plugins/*${CMAKE_SHARED_LIBRARY_SUFFIX}\")
    set(BU_CHMOD_BUNDLE_ITEMS ON)
    include(BundleUtilities)
    fixup_bundle(\"${APPS}\" \"\${QTPLUGINS}\" \"${DIRS}\")
    " COMPONENT Runtime
)

# To Create a package, one can run "cpack -G DragNDrop CPackConfig.cmake" on Mac OS X
# where CPackConfig.cmake is created by including CPack
# And then there's ways to customize this as well
set( CPACK_BINARY_DRAGNDROP ON )
include( CPack ) 
```*

# json - 玩 2.1-RC2：将 JsValue 转换为 Scala 值

> ID：14291666
> 
> 赞同：3
> 
> 时间：2013-01-12T08:29:56.027
> 
> 标签：json, scala, playframework, playframework-2.0, playframework-2.1

我是一名游戏初学者，并尝试将我的 Web 应用程序从 Play 2.0.4 迁移到新的闪亮 Play 2.1-RC2。由于新的 JSON 处理，我的代码无法编译。

我已阅读[Mandubians 博客](http://mandubian.com/2012/09/08/unveiling-play-2-dot-1-json-api-part1-jspath-reads-combinators/)、[Play 2.1 迁移指南](https://github.com/playframework/Play20/wiki/Migration)和[Play JSON 库文档（测试版）](http://play2-docs-snapshot.herokuapp.com/render/master/ScalaJson)，但我仍然不确定迁移代码的最佳方法是什么。

前任 我有一个`File`使用隐式读取对象（Play 2.0）调用的模型：

```
object File {
    implicit object FileReads extends Reads[File] {
      def reads(json: JsValue) = File(
        (json \ "name").as[String],
        (json \ "size").as[Long]
     )
   }
} 
```

我在控制器中这样使用它（Play 2.0）：

```
val file = webserviceResult.json.as[models.File] 
```

Play 2.1 迁移指南告诉我用`JsSuccess()`这样的方式重构它（Play 2.1？）：

```
object File {
    implicit object FileFormat extends Format[File] {
      def reads(json: JsValue) = JsSuccess(File(
        (json \ "name").as[String],
        (json \ "size").as[Long]
     ))
   }
} 
```

但是我现在如何使用这种隐式转换呢？

还是使用[Play for Scala-book中的](http://www.manning.com/hilton/)[Twitter-example](https://github.com/playforscala/sample-applications/blob/master/ch10-webservices-iteratees-and-websockets/twitter/app/models/Tweet.scala)中的`implicit val`-stuff更好？将 JsValue 转换为它的 Scala 值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T11:16:25.173

> 还是使用 Play for Scala 书中 Twitter 示例中的隐式 val-stuff 更好？

是的，对于经典转换，这是一个很好的解决方案（简单明了）。

但是有一种更简单的方法可以通过“ [Json Macro Inception](https://www.playframework.com/documentation/2.3.x/ScalaJsonInception) ”实现这种转换：

```
import play.api.libs.json._
import play.api.libs.functional.syntax._

case class File(name: String, size: Long)
implicit val fileFormat = Json.format[File]

val json = Json.parse("""{"name":"myfile.avi", "size":12345}""") // Your WS result

scala> json.as[File]
res2: File = File(myfile.avi,12345) 
```

警告：您不能将您的格式化程序放在伴随对象中，这是当前 Json API 的限制。

我建议将一个对象与所有 json 格式化程序一起使用，并在必要时导入它。

仅供参考，原始格式化程序应该这样写：

```
implicit val rawFileRead: Format[File] = ( 
    (__ \ "name").format[String] and 
    (__ \ "size").format[Long]
)(File.apply _, unlift(File.unapply _)) // or (File, unlift(File.unapply)) 
```

检查这两个测试类，有很多有趣的例子：

*   [JsonSpec](https://github.com/playframework/playframework/blob/master/framework/src/play-json/src/test/scala/play/api/libs/json/JsonSpec.scala)
*   [JsonExtensionSpec](https://github.com/playframework/playframework/blob/master/framework/src/play-json/src/test/scala/play/api/libs/json/JsonExtensionSpec.scala)

# c++ - fread 在新进程中完成时给出 BadPtr

> ID：14291667
> 
> 赞同：0
> 
> 时间：2013-01-12T08:30:15.663
> 
> 标签：c++, binary-data, fread, file-read

我编写了一个具有两个功能的 C++ Dll，一个将二进制文件写入磁盘，另一个从磁盘读取该文件并加载到内存中。

```
//extremely simplified code looks like this

bool Utilities::WriteToBinary(wstring const fileName)
    {
    //lot of code

    DWORD size = //get size of data to write
    LPBYTE * blob = new LPBYTE[size];
    WriteDataToMemoryBlob(blob, & size);

    FILE * pFile;
    if(0 != _wfopen_s (&pFile , fileName.c_str() , L"wb" ))
        {
        //do something
        return false;
        }

    fwrite (blob,  1, size , pFile );
    fclose (pFile);

    delete[] blob;
    return true;
    }

bool Utilities::ReadDataFromDisk(wstring const fileName)
    {    
    long fileSize = GetFileSize(fileName);
    FILE * filePointer;
    if(0 != _wfopen_s (&filePointer, fileName.c_str() , L"rb" ))
        return false;

    //read from file
    LPBYTE * blobRead = new LPBYTE[fileSize];
    fread (blobRead, 1, fileSize , filePointer );
    fclose (filePointer);

    //rest of the code... 
```

**问题** 我创建了另一个 C++ 项目，它调用这些 DLL 方法进行测试。

让我发疯的问题是，当我在同一个程序中连续调用*WriteToBinary*和*ReadDataFromDisk*时，它们工作得非常好。但是，当我一次调用*WriteToBinary*并让程序退出并下次调用*ReadDataFromDisk并为其提供由**WriteToBinary*先前写入的文件路径时，我在执行**fread**后在**blobRead中得到了****BadPtr**。

 ****我已尽力确保不涉及共享或静态数据结构。这两种方法是完全独立的。

知道可能是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T09:03:04.033

一个错误是数组的分配`LPBYTE`是`BYTE*`这样的：

```
LPBYTE * blobRead = new LPBYTE[fileSize]; 
```

正在分配 的数组`BYTE*`，而不是 的数组`BYTE`。改成：

```
BYTE* blobRead = new BYTE[fileSize]; 
```

为避免动态分配，您可以使用 a`std::vector<BYTE>`代替：

```
std::vector<BYTE> blobRead(fileSize); 
```****

# python - 如何使用 python 正则表达式 findall 并在匹配项上保留组号

> ID：14291681
> 
> 赞同：0
> 
> 时间：2013-01-12T08:32:05.467
> 
> 标签：python, regex

我觉得这*一定*是在其他地方问过的，但我找不到！

我有一个带有嵌套括号的正则表达式（见下文）。我需要在一行中匹配所有出现的它，然后对这些部分做一些事情。但是，我无法弄清楚如何从我的正则表达式中引用特定组。

具体来说，这是我的正则表达式：

```
(([a-zA-Z][a-zA-Z0-9_\+\-\.]*\.)+\s*[a-zA-Z]{2,6}) 
```

我实际上并不关心保留内括号的内容，我只想获取外部括号的所有匹配项。

如果我使用“匹配”，我会得到一个实例，并且可以使用匹配对象进行引用。但是，当我做 findall 时，它不返回匹配对象，它只返回一个列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:41:25.760

您可能正在寻找`re.finditer()`：

```
import re

a = 'foo 123 blah 234 xxx 655'
for m in re.finditer(r'(\d+)', a):
  print m.group(1) 
```

# c# - 最大化带有标签大小的窗体

> ID：14291684
> 
> 赞同：0
> 
> 时间：2013-01-12T08:32:29.677
> 
> 标签：c#, winforms, label, maximize

我制作了一个自定义 MessageBox，但在最大化带有标签大小的 msgBox 时遇到了问题。如果我的标签太长太大，那么我希望我的自定义 MessageBox 变大或变小也取决于标签大小。我可以在 Windows 窗体选项中设置它还是我能做什么？

我的代码：

```
 public static DialogResult Show(string Text, string Caption, string btnOk, string btnCancel)
      {

        MsgBox = new CustomMsgBox();
        MsgBox.label1.Text = Text;
        MsgBox.button1.Text = btnOk;
        MsgBox.button2.Text = btnCancel;
        MsgBox.AutoSize = true;
        result = DialogResult.No;
        MsgBox.ShowDialog();

        return result;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        result = DialogResult.Yes;
        MsgBox.Close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:56:28.973

您可以在其中`MsgBox_load(object sender, EventArgs e)`添加以下代码：

```
private void MsgBox_Load(object sender, EventArgs e)
{
    this.Width = label1.Width + label1.Location.X;
    //do other things you need in the load event.
} 
```

这将`width`根据宽度 + label1 的 X 坐标位置设置 MsgBox 的集合。由于标签可能在也可能不在完整的左侧，这将显示完整的标签并相应地最大化 MsgBox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:49:54.947

试试这个代码。

**在设计师**

1.  拖放`FlowLayoutPanel`控件，根据需要调整流布局宽度
2.  拖放您的`Label`控件

**在 .cs 文件中**

例如，我在表单加载事件中绑定一些文本并调用调整大小事件

```
 private void CustMsgBox_Load(object sender, EventArgs e)
    {
        //Binding some long text to the label
        label1.Text = "ga,dsa,bdas,bcc,asbcc,asc,asbc,a c,asc,n asc,baskcas,c sam ckavcmas cmas ckasvmas cmas ckavcma cmaga,dsa,bdas,bcc,asbcc,asc,asbc,a c,asc,n asc,baskcas,c sam ckavcmas cmas ckasvmas cmas ckavcma cmaga,dsa,bdas,bcc,asbcc,asc,asbc,a c,asc,n asc,baskcas,c sam ckavcmas cmas ckasvmas cmas ckavcma cmaga,dsa,bdas,bcc,asbcc,asc,asbc,a c,asc,n asc,baskcas,c sam ckavcmas cmas ckasvmas cmas ckavcma cma";
        this.ResizeWindow(); // Calling this event will resize the label and window
    } 
```

将一些文本绑定到标签后，调用以下方法

```
 private void ResizeWindow()
    {
        int iHeight = flowLayoutPanel1.Height;
        flowLayoutPanel1.Height = label1.Height;
        this.Height += (flowLayoutPanel1.Height - iHeight); //This will increase the height of the window accordingly
        this.Top=Convert.ToInt32((Screen.PrimaryScreen.WorkingArea.Height-this.Height)/2); //This will position the window center vertically
    } 
```

# android - 在 2.2 版的 android webview 中加载 https 得到白屏

> ID：14291685
> 
> 赞同：2
> 
> 时间：2013-01-12T08:32:44.877
> 
> 标签：android, android-webview

我需要在 android webview 中加载一个 https url，但它会加载白屏。

我也处理`public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error)`过，但在加载 url 时仍然会出现白屏，但 logcat 中没有异常。

下面是我的代码

```
public class MainActivity extends Activity { 
private static final String URL = "https://someurl";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    WebView myWebView = (WebView)findViewById(R.id.webview);

    WebSettings settings = myWebView.getSettings();

    settings.setJavaScriptEnabled(true);

    settings.setDomStorageEnabled(true);

    myWebView.loadUrl(URL);

    myWebView.setWebViewClient(new MyWebViewClient());

}

private class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (Uri.parse(url).getHost().equals(URL)) {

            return false;
        }
        Activity that handles URLs
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
        startActivity(intent);
        return true;
    }

    @Override
    public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {
        super.onReceivedSslError(view, handler, error);

        handler.proceed();
    }
} 
```

}

期待你的答复。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:46:24.697

handler.proceed(); 应该让 WebView 加载 https url，你有没有尝试加载一个常规的 http url，看看 WebView 是否仍然是白色的。

Android 有时将 WebView 呈现为白色存在错误。

尝试在 WebView 上禁用硬件加速，在 .xml 布局资源中的 webview 上设置 android:layerType="software" 属性。

```
<WebView
    android:id="@+id/webviev"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/transparent"
    android:layerType="software" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:47:40.250

Android 2.2 不支持某些 SSL 证书，您可以尝试检查以将其加载到本机浏览器中，如果它在浏览器上运行，则可能受支持。如果不支持，您至少有以下两个选项

1.  假设您拥有网站的管理员权限，则更改 SSL 证书提供商
2.  实现类似[SSL 的解决方法在 Android 2.2 上不起作用（仅在 2.3 中）](https://stackoverflow.com/questions/9300821/ssl-not-working-on-android-2-2-only-in-2-3)

请检查其他 Android 版本是否也支持 SSL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T15:40:44.047

```
mWebview.setWebViewClient(new WebViewClient() {

        @Override
        public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {
            super.onReceivedSslError(view, handler, error);
           //Error happens here and returns an empty page.
        } 
```

在 2.3 设备上，认证验证存在问题。它可能是有效的，但是如果顺序不正确，它就会失败。

你可以调用 handler.proceed(); 但我不推荐它！因为它破坏了所需的验证。

# binding - JavaFX2：向使用表格单元绑定的 TableView 添加行

> ID：14291687
> 
> 赞同：1
> 
> 时间：2013-01-12T08:33:01.280
> 
> 标签：binding, row, javafx-2, tableview, add

我正在尝试修改[UITableView - Better Editing through Binding 中概述的解决方案？](https://stackoverflow.com/questions/7880494/tableview-better-editing-through-binding)（感谢 jKaufmann 提供的出色示例）以允许向表中添加行。

我介绍了一个按钮，当单击该按钮时，将调用代码以向支持该表的 ObservableList 添加一个额外的 TableData 行。

新行显示没有事故。但是，在添加了几行并使用向上/向下键滚动表格几次之后，表格中的随机行开始被空白行替换。

通常需要添加几行，选择一行，向下遍历列表（使用键盘）到新行，添加更多行，向下遍历到新行并一直到顶部再次重现问题。要选择表格中的一行，我单击一行的边缘，以便选择该行而不是单个单元格。

源代码（本质上是 jkaufmann 的示例修改为包含“添加行”按钮）在这里。

```
package tablevieweditingwithbinding;

import javafx.application.Application;
import javafx.application.Platform;
import javafx.beans.property.ObjectProperty;
import javafx.beans.property.SimpleObjectProperty;
import javafx.beans.property.SimpleStringProperty;
import javafx.beans.property.StringProperty;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Node;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.HBox;
import javafx.stage.Stage;
import javafx.util.Callback;

public class TableViewEditingExample2 extends Application {

    public static class TableData {

        private SimpleStringProperty firstName, lastName, phone, email;
        private ObjectProperty<SimpleStringProperty> firstNameObject;

        public TableData(String firstName, String lastName, String phone, String email) {
            this.firstName = new SimpleStringProperty(firstName);
            this.firstNameObject = new SimpleObjectProperty(firstNameObject);
            this.lastName = new SimpleStringProperty(lastName);
            this.phone = new SimpleStringProperty(phone);
            this.email = new SimpleStringProperty(email);
        }

        public String getEmail() {
            return email.get();
        }

        public void setEmail(String email) {
            this.email.set(email);
        }

        public SimpleStringProperty emailProperty() {
            return email;
        }

        public String getFirstName() {
            return firstName.get();
        }

        public SimpleStringProperty getFirstNameObject() {
            return firstNameObject.get();
        }

        public void setFirstNameObject(SimpleStringProperty firstNameObject) {
            this.firstNameObject.set(firstNameObject);
        }

        public ObjectProperty<SimpleStringProperty> firstNameObjectProperty() {
            return firstNameObject;
        }

        public void setFirstName(String firstName) {
            this.firstName.set(firstName);
        }

        public SimpleStringProperty firstNameProperty() {
            return firstName;
        }

        public String getLastName() {
            return lastName.get();
        }

        public void setLastName(String lastName) {
            this.lastName.set(lastName);
        }

        public SimpleStringProperty lastNameProperty() {
            return lastName;
        }

        public String getPhone() {
            return phone.get();
        }

        public void setPhone(String phone) {
            this.phone.set(phone);
        }

        public SimpleStringProperty phoneProperty() {
            return phone;
        }
    }

    public static class TextFieldCellFactory
            implements Callback<TableColumn<TableData, String>, TableCell<TableData, String>> {

        @Override
        public TableCell<TableData, String> call(TableColumn<TableData, String> param) {
            TextFieldCell textFieldCell = new TextFieldCell();
            return textFieldCell;
        }

        public static class TextFieldCell extends TableCell<TableData, String> {

            private TextField textField;
            private StringProperty boundToCurrently = null;

            public TextFieldCell() {
                String strCss;
                // Padding in Text field cell is not wanted - we want the Textfield itself to "be"
                // The cell.  Though, this is aesthetic only.  to each his own.  comment out
                // to revert back.  
                strCss = "-fx-padding: 0;";
                textField = new TextField();

                // 
                // Default style pulled from caspian.css. Used to play around with the inset background colors
                // ---trying to produce a text box without borders
                strCss = ""
                        + //"-fx-background-color: -fx-shadow-highlight-color, -fx-text-box-border, -fx-control-inner-background;" +
                        "-fx-background-color: transparent;"
                        + //"-fx-background-insets: 0, 1, 2;" +
                        //"-fx-background-insets: 0;" +
                        //"-fx-background-radius: 3, 2, 2;" +
                        //"-fx-background-radius: 0;" +
                        //"-fx-padding: 3 5 3 5;" +   /*Play with this value to center the text depending on cell height??*/
                        //"-fx-padding: 0 0 0 0;" +
                        //"-fx-prompt-text-fill: derive(-fx-control-inner-background,-30%);" +
                        //"-fx-accent: derive(-fx-control-inner-background, -40%);" +
                        "-fx-cell-hover-color: derive(-fx-control-inner-background, -20%);"
                        + "-fx-cursor: text;"
                        + "";

                // 
                textField.focusedProperty().addListener(new ChangeListener<Boolean>() {
                    public void changed(ObservableValue<? extends Boolean> observable, Boolean oldValue, Boolean newValue) {
                        TextField tf = (TextField) getGraphic();
                        String strStyleGotFocus = "-fx-background-color: purple, -fx-text-box-border, -fx-control-inner-background;"
                                + "-fx-background-insets: -0.4, 1, 2;"
                                + "-fx-background-radius: 3.4, 2, 2;";
                        String strStyleLostFocus = //"-fx-background-color: -fx-shadow-highlight-color, -fx-text-box-border, -fx-control-inner-background;" +
                                "-fx-background-color: transparent;"
                                + //"-fx-background-insets: 0, 1, 2;" +
                                "-fx-background-insets: 0;"
                                + //"-fx-background-radius: 3, 2, 2;" +
                                "-fx-background-radius: 0;"
                                + "-fx-padding: 3 5 3 5;"
                                + /**/ //"-fx-background-fill: green;" +   /**/
                                //"-fx-background-color: green;" +
                                "-fx-background-opacity: 0;"
                                + //"-fx-opacity: 0;" +
                                //"-fx-padding: 0 0 0 0;" +
                                "-fx-prompt-text-fill: derive(-fx-control-inner-background,-30%);"
                                + "-fx-cursor: text;"
                                + "";

                        if (newValue.booleanValue()) {
                            tf.setStyle(strStyleGotFocus);
                        } else {
                            tf.setStyle(strStyleLostFocus);
                        }

                    }
                });
                textField.setStyle(strCss);
                this.setGraphic(textField);
            }

            @Override
            protected void updateItem(String item, boolean empty) {
                super.updateItem(item, empty);
                if (!empty) {
                    // Show the Text Field
                    this.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);

                    // Retrieve the actual String Property that should be bound to the TextField
                    // If the TextField is currently bound to a different StringProperty
                    // Unbind the old property and rebind to the new one
                    ObservableValue<String> ov = getTableColumn().getCellObservableValue(getIndex());
                    SimpleStringProperty sp = (SimpleStringProperty) ov;

                    if (this.boundToCurrently == null) {
                        this.boundToCurrently = sp;
                        this.textField.textProperty().bindBidirectional(sp);
                    } else {
                        if (this.boundToCurrently != sp) {
                            this.textField.textProperty().unbindBidirectional(this.boundToCurrently);
                            this.boundToCurrently = sp;
                            this.textField.textProperty().bindBidirectional(this.boundToCurrently);
                        }
                    }
                    System.out.println("item=" + item + " ObservableValue<String>=" + ov.getValue());
                } else {
                    this.setContentDisplay(ContentDisplay.TEXT_ONLY);
                }
            }
        }
    }
    private final TableView<TableData> table = new TableView<TableData>();
    final ObservableList<TableData> ol =
            FXCollections.observableArrayList(
            new TableData("Wilma", "Flintstone", "555-123-4567", "WFlintstone@gmail.com"),
            new TableData("Fred", "Flintstone", "555-123-4567", "FFlintstone@gmail.com"),
            new TableData("Barney", "Flintstone", "555-123-4567", "Barney@gmail.com"),
            new TableData("Bugs", "Bunny", "555-123-4567", "BugsB@gmail.com"),
            new TableData("Yo", "Sam", "555-123-4567", "ysam@gmail.com"),
            new TableData("Tom", "", "555-123-4567", "tom@gmail.com"),
            new TableData("Jerry", "", "555-123-4567", "Jerry@gmail.com"),
            new TableData("Peter", "Pan", "555-123-4567", "Ppan@gmail.com"),
            new TableData("Daffy", "Duck", "555-123-4567", "dduck@gmail.com"),
            new TableData("Tazmanian", "Devil", "555-123-4567", "tdevil@gmail.com"),
            new TableData("Mickey", "Mouse", "555-123-4567", "mmouse@gmail.com"),
            new TableData("Mighty", "Mouse", "555-123-4567", "mimouse@gmail.com"));

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        Application.launch(args);
    }
    static int counter = 1;

    @Override
    public void start(Stage Stage) {
        Stage.setTitle("Editable Table");
        BorderPane borderPane = new BorderPane();
        Scene scene = new Scene(borderPane, 800, 600);

        // top of border pane
        Button b1 = new Button("Change value in table list");
        Button b2 = new Button("Add row");
        HBox hbox = new HBox(10);
        hbox.setStyle("-fx-background-color: #336699");
        hbox.setAlignment(Pos.BOTTOM_CENTER);
        HBox.setMargin(b2, new Insets(10, 0, 10, 0));
        HBox.setMargin(b1, new Insets(10, 0, 10, 0));
        hbox.getChildren().addAll(b1, b2);
        borderPane.setTop(hbox);
        BorderPane.setAlignment(hbox, Pos.CENTER);

        // Button Events
        b1.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                String curFirstName = ol.get(0).getFirstName();
                if (curFirstName.contentEquals("Jason")) {
                    ol.get(0).setFirstName("Paul");
                } else {
                    ol.get(0).setFirstName("Jason");
                }
            }
        });

        b2.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                Platform.runLater(new Runnable() {
                    @Override
                    public void run() {
                        int dataListSize = 0;
                        dataListSize = ol.size();
                        System.out.println("Table size = " + dataListSize);
                        ol.add(new TableData("firstName" + counter,
                                "lastName" + counter,
                                "phone" + counter,
                                "email" + counter++));
                        dataListSize = ol.size();
                        System.out.println("Table size = " + dataListSize);
                        table.getColumns().get(0).setVisible(false);
                        table.getColumns().get(0).setVisible(true);
                    }
                });
            }
        });

        table.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);
        table.setItems(ol);
        borderPane.setCenter(table);
        BorderPane.setAlignment(table, Pos.CENTER);
        BorderPane.setMargin(table, new Insets(25));

        // Add columns
        TableColumn<TableData, String> c1 = new TableColumn<TableData, String>("FirstName");
        c1.setCellValueFactory(new PropertyValueFactory<TableData, String>("firstName"));
        c1.setCellFactory(new TextFieldCellFactory());

        TableColumn<TableData, String> c2 = new TableColumn<TableData, String>("LastName");
        c2.setCellValueFactory(new PropertyValueFactory<TableData, String>("lastName"));
        c2.setCellFactory(new TextFieldCellFactory());

        TableColumn<TableData, String> c3 = new TableColumn<TableData, String>("Phone");
        c3.setCellValueFactory(new PropertyValueFactory<TableData, String>("phone"));
        c3.setCellFactory(new TextFieldCellFactory());

        TableColumn<TableData, String> c4 = new TableColumn<TableData, String>("Email");
        c4.setCellValueFactory(new PropertyValueFactory<TableData, String>("email"));
        c4.setCellFactory(new TextFieldCellFactory());

        table.getColumns().addAll(c1, c2, c3, c4);

        scene.getStylesheets().add(TableViewEditingWithBinding.class.getResource("styles.css").toExternalForm());
        Stage.setScene(scene);
        Stage.show();
    }
} 
```

我尝试添加以下代码

```
table.getColumns().get(0).setVisible(false);
table.getColumns().get(0).setVisible(true);

```

在添加行后的 addRow 按钮的处理程序中，但这没有任何帮助。

我还尝试清除支持可观察列表并将值重置为列表+添加每一行后的新行；那也没有解决问题。
非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T08:00:12.023

我有同样的问题。删除一行后，其他一些行将被空白。如果我滚动空白行更改。

我的解决方案是移动线路

```
setContentDisplay(ContentDisplay.GRAPHIC_ONLY); 
```

到单元格的构造函数并删除该行

```
setContentDisplay(ContentDisplay.TEXT_ONLY); 
```

完全地。

`Cell.updateItem`状态的 API 文档

> `empty`- 此单元格是否代表列表中的数据。如果它是空的，那么它不代表任何域数据，而是一个用于呈现“空”行的单元格。

对我来说，这看起来像是 JavaFX 中的一个错误，因为我的所有行都以域数据为后盾，但仍然有一些行（滚动时发生变化）接收`updateItem()`with `empty=true`。

# android - android webview 隐藏地址的方法

> ID：14291688
> 
> 赞同：0
> 
> 时间：2013-01-12T08:33:22.077
> 
> 标签：android, webview

我认为一段语法可以浏览本地网页。但我想隐藏地址。我测试了很多次都不成功。

```
package org.webViewEx;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.webkit.JsResult;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class WebViewEx extends Activity {

    // Controls
    private WebView m_webView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Initialize controls
        m_webView = (WebView)findViewById(R.id.wvBrowser);

        // Initialize web view
        WebSettings webViewSettings = m_webView.getSettings();
        webViewSettings.setJavaScriptEnabled(true);
        webViewSettings.setDomStorageEnabled(true);
        webViewSettings.setDatabaseEnabled(true);
        webViewSettings.setDatabasePath("/data/data/"+getPackageName()+"/databases");

        // Override functions so that javascript alert() and confirm() can work
        m_webView.setWebChromeClient(new WebChromeClient()
        {
            @Override
            public boolean onJsAlert(WebView view, String url, String message,
                    final JsResult result)
            {
                new AlertDialog.Builder(WebViewEx.this)
                .setMessage(message)
                .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        result.confirm();
                    }})
                .show();

                return true;
            }

            @Override
            public boolean onJsConfirm(WebView view, String url,
                    String message, final JsResult result)
            {
                new AlertDialog.Builder(WebViewEx.this)
                .setMessage(message)
                .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        result.confirm();
                    }})
                .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        result.cancel();
                    }})
                .show();

                return true;
            }
        });

        // Initialize a webview client

        m_webView.setWebViewClient(new WebViewClient()
        {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl("file:///android_asset/ts.htm");
                return true;
            }
        });

        // Show main page
        m_webView.loadUrl("file:///android_asset/anttree.htm");
    }
} 
```

我从网上了解到。使用这种方法可以成功隐藏。

```
m_webView.setWebViewClient(new WebViewClient()

{
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl("file:///android_asset/ts.htm");
        return true;
    }
}); 
```

但是没用 告诉我怎么做 thx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T08:40:31.507

中没有地址栏`WebView`。问题已经在这里说明：禁用地址栏`Android webview`

您可能想要的是删除标题。如果我没记错的话，活动标题中也会注明名称/网址。你应该阅读：http: [//developer.android.com/resources/tutorials/views/hello-webview.html](http://developer.android.com/resources/tutorials/views/hello-webview.html)

您可以通过在您的`manifest file`.

```
<activity android:name=".MyActivity" android:label="@string/app_name"
 android:theme="@android:style/Theme.NoTitleBar"> 
```

# javascript - Google Apps 脚本双重删除电子表格中的行

> ID：14291689
> 
> 赞同：0
> 
> 时间：2013-01-12T08:33:29.650
> 
> 标签：javascript, google-apps-script, google-sheets

```
function onEdit() {
var openRequests = SpreadsheetApp.getActive().getSheetByName('Open Requests');
var lastRowOpen = openRequests.getLastRow();

var closedRequests = SpreadsheetApp.getActive().getSheetByName('Closed Requests');
var lastRowClose = closedRequests.getLastRow();

var closed = openRequests.getRange(2,8,lastRowOpen,1).getValues();

for (var i = 0; i < lastRowOpen; i++)
{
    if (closed[i][0].toString() == 'Yes')
    {
        var line = i+2;
        if (closedRequests.getLastRow() == 1)
        {
            openRequests.getRange(line,1,1,9).copyTo(closedRequests.getRange(2,1,1,9));
            closedRequests.getRange(2,9,1,1).setValue(new Date());
            openRequests.deleteRow(line);
        }
        else
        {
            openRequests.getRange(line,1,1,9).copyTo(closedRequests.getRange(lastRowClose+1,1,1,9));
            closedRequests.getRange(lastRowClose+1,9,1,1).setValue(new Date());
            openRequests.deleteRow(line);
        }
    }
} 
```

}

我已经设置了一个触发器来运行 onEdit。它所做的是检查一个名为的列`Closed`以查看它是否显示`Yes`. 该`Closed`列有一个数据验证下拉菜单，其中包含值`Yes`。

因此，当我单击下拉菜单并选择`Yes`时，它应该将整行复制到另一个名为的工作`Closed Requests`表中，然后从名为 的电子表格中删除该行`Open Requests`。

我遇到的问题是，大约 50% 的时间，它删除了我选择的行`Yes`，但它也删除了它下面的行（大约 50% 的时间发生这种情况，第二个删除的行只显示一些时间向上`Closed Requests`，其他时候整行会永远消失，除非我撤消）。

据我所知，该`deleteRow()`函数删除整行并将其下方的所有行向上移动一行以填充空白。因此，要删除的行下方的行将向上移动到同一行并被删除。我不知道为什么该函数被调用两次。

我尝试添加一些延迟，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T00:07:10.833

```
function onEdit(e) {
  var eRange = e.source.getActiveRange();
  var openRequests = SpreadsheetApp.getActive().getSheetByName('Open Requests');
  var closedRequests = SpreadsheetApp.getActive().getSheetByName('Closed Requests');
  var nextRowClose = (closedRequests.getLastRow()?closedRequests.getLastRow()+1:2);

  if(eRange.getSheet().getName()=="Open Requests" && eRange.getColumn()==8 && eRange.getValue()=="Yes") {
    openRequests.getRange(eRange.getRow(), 1, 1, 9)
      .copyTo(closedRequests.getRange(nextRowClose, 1));
    closedRequests.getRange(nextRowClose, 9).setValue(new Date());
    openRequests.deleteRow(eRange.getRow());
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T14:20:45.570

[可以尝试像我提到的](https://stackoverflow.com/questions/11058019/delete-a-row-in-google-spreadsheet-base-on-value-of-cell-in-row)那样向后迭代。`SpreadsheetApp.flush()`在删除后加入a也可能有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T01:14:12.530

@Jack，我有一个与您类似的用例。我的代码是 BryanP 讨论的倒退代码。我的代码或多或少在这里： [“批量删除状态='完成'的任务项”](https://stackoverflow.com/questions/14221264/open-google-docs-spreadsheet-by-name/14221807#14221807)。这是因为我在批处理中删除它们，所以我使用了向后的方法，即删除具有较高行号的行不会干扰具有较低行号的任何行的行号。

但是您不是在批处理模式下删除行，因此可能向后不应该有所作为（也许除非两个用户同时使用工作表并删除？）

所以想我会试试你的代码。我将您的代码插入到我的电子表格中已经存在的 onedit() 函数中（用于在一段时间不活动后将行着色为红色，并在实际参与任务后放入时间戳）。

然后为了测试，我使用了我们的一个电子表格的副本，其中已经有 50 行/任务。我连续手动填写了所需的单元格，并从带有下拉列表的单元格中选择了完成（我将您的代码更改为期望“完成”而不是“是”）。我重复了 20 行。

结果：您的代码成功了，正如您所期望的那样 20 次中的每一次……没有双重删除，总是复制数据。它对我有用，没有引入延迟，也没有引入 SpreadsheetApp.flush()。

恐怕我没有可靠的建议。顺便提一下电子表格没有正确刷新自身的已知错误，因此不显示已删除的行；这可以通过在出现此故障时手动刷新电子表格来检查。（然而，这个错误的迹象似乎在逻辑上不符合你关于重复复制两个连续行的报告。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T04:14:37.120

线程锁？听起来像一个线程锁定问题。尝试：

```
function onEdit() {

 // ****** add lock code
 var lock = LockService.getPublicLock();
 var hasMutex = lock.tryLock(100);
 if(hasMutex==false) {
   return;
 }
 // *** end

 var openRequests = SpreadsheetApp.getActive().getSheetByName('Open Requests');
 var lastRowOpen = openRequests.getLastRow();

 var closedRequests = SpreadsheetApp.getActive().getSheetByName('Closed Requests');
 var lastRowClose = closedRequests.getLastRow();

 var closed = openRequests.getRange(2,8,lastRowOpen,1).getValues();

 for (var i = 0; i < lastRowOpen; i++)
 {
    if (closed[i][0].toString() == 'Yes')
    {
       var line = i+2;
       if (closedRequests.getLastRow() == 1)
       {
          openRequests.getRange(line,1,1,9).copyTo(closedRequests.getRange(2,1,1,9));
          closedRequests.getRange(2,9,1,1).setValue(new Date());
          openRequests.deleteRow(line);
       }
        else
       {

   openRequests.getRange(line,1,1,9).copyTo(closedRequests.getRange(lastRowClose+1,1,1,9));
        closedRequests.getRange(lastRowClose+1,9,1,1).setValue(new Date());
        openRequests.deleteRow(line);
        }
      }
  }

 // ****** add lock code
  lock.releaseLock();    

 // *** end

} 
```

问题：

1) 当时有多少人在使用电子表格。

2）它发生的频率。

# vb.net - 对象转换错误

> ID：14291693
> 
> 赞同：0
> 
> 时间：2013-01-12T08:33:53.020
> 
> 标签：vb.net, background-color, datetimepicker

显示错误无法将“system.windows.forms.combobox”类型的对象转换为在我的代码中键入“system.windows.form.DateTimePicker”...

```
Private Sub UncheckMyControlsdtp()
    Dim dtp As DateTimePicker
    Try
        For Each dtp In EMPGBDATA.Controls
            If dtp.CalendarMonthBackground = Color.Red Then
                dtp.CalendarMonthBackground = Color.White
            End If
        Next
    Catch e As Exception
        MsgBox(e.Message)
    End Try
End Sub 
```

朋友检查我的代码并给出解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:38:54.653

您应该检查您从中枚举的控件`EMPGBDATA.Controls`的类型`DateTimePicker`：

```
Private Sub UncheckMyControlsdtp()
    Try
        For Each ctrl In EMPGBDATA.Controls
            If TypeOf ctrl Is DateTimePicker Then
                Dim dtp As DateTimePicker = CType(ctrl, DateTimePicker)
                If dtp.CalendarMonthBackground = Color.Red Then
                    dtp.CalendarMonthBackground = Color.White
                End If
            End If
        Next
    Catch e As Exception
        MsgBox(e.Message)
    End Try
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:39:01.697

问题是您正在迭代 中的所有控件`EMPGBDATA.Controls`，其中一些不是`DateTimePicker`. 您将不得不手动检查`For Each`循环内部以确保实例是正确的类型。像这样：

```
Private Sub UncheckMyControlsdtp()
    For Each ctl As Control In EMPGBDATA.Controls
        If TypeOf ctl Is DateTimePicker Then
            Dim dtp As DateTimePicker = DirectCast(ctl, DateTimePicker)

            If dtp.CalendarMonthBackground = Color.Red Then
                dtp.CalendarMonthBackground = Color.White
            End If
        End If
    Next
End Sub 
```

# php - PHP：函数将大量数组作为参数传递

> ID：14291694
> 
> 赞同：2
> 
> 时间：2013-01-12T08:33:55.870
> 
> 标签：php, arrays, function

我需要创建一个函数，它有大量参数可以是空值或值。现在我正在创建如下示例的函数：

```
function container($args){

    $args += array(
            'limit'             =>      10,
            'container'         =>      null,
            'container_class'   =>      null,
            'list_class'        =>      null,
        );

    echo'<'.$args['container'].' class="'.$args['container_class'].'" >';

    echo 'My function will have other content here with the '.$args['limit'];

    echo '<ul class="'.$args['list_class'].'" >';
    echo '<li>list itme here</li>';
    echo '</ul>'

    echo '</'.$container.'>';    

} 
```

如果我必须在数组中传递 4-5 个值，这很好，但如果我有超过 15-20 个键要传递怎么办？必须有一些合适的方法来实现。

那么如何以如此有效的方式创建一个函数来传递许多数组键作为参数呢？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T08:46:56.427

15-20 键并不是一个真正的大数组。当您需要考虑如何将某些内容传递给 args 时，就是当您拥有 1000 多个键时。

无论如何，您可以使用“通过引用传递”概念（请参阅[http://php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)）。当您必须在没有任何返回语句的情况下将变量修改为函数时，此概念很有用。但是为了实现这个目标，PHP 只需发送一个引用内存中变量的键，而不是发送变量的副本。

并且这个键不依赖于变量的大小。

如何使用？通过在函数声明中使用 & 符号，例如：

```
function container(&$args) 
{
    // your function
}

$args = array(1, 2, 3 ..., 100000);
container($args); 
```

但是如果你使用“通过引用传递”的概念，请注意不要修改 $args 或 $args 将在主脚本上被修改。

**最终世界：**如果你有少于 50 个键不关心如何传递你的参数，只使用复制（默认行为）会更安全！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:25:22.743

Kakawait 的最后一句话是真的。

您应该在调用函数时使用`$args`而不是。`&$args`

# jquery - 使用 jquery 从多选中添加/删除选项

> ID：14291695
> 
> 赞同：2
> 
> 时间：2013-01-12T08:34:01.707
> 
> 标签：jquery

我有 jquery，它将向选择列表添加一个项目并更改背景颜色以指示它已被添加（选择列表不可见）。当我单击加号时，它会将项目添加到列表中并将背景更改为绿色。当我第二次单击它时，它会删除项目和颜色。这工作一次。如果我重复这个循环，它就会停止工作。任何想法为什么会这样？

```
<ul>
<li><span id='add'> + </span>this is a test
 </li>
</ul>
<select multiple="multiple" id="destination"></select>

$(document).ready(function () {
  $("#add").click(function () {
var color = $("#add").css("background-color");
if (color == "transparent") {
  $("#add").css("background-color", "green");
  $("#destination").append('<option value="1">New option</option>');
} else {
  $("#add").css("background-color", "transparent");
  $("#destination option[value='1']").remove();
}
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T08:41:18.457

不要检查背景，只使用[**`.toggle()`事件**](http://api.jquery.com/toggle-event/)：

[http://jsbin.com/unojap/4/edit](http://jsbin.com/unojap/4/edit)

```
 $("#add").toggle(function () {

        $("#add").css("background-color", "green");
        $("#destination").append('<option value="1">New option</option>');

  },function(){
        $("#add").css("background-color", "transparent");
        $("#destination option[value='1']").remove();

  }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T08:41:56.823

这取决于浏览器。在 Chrome 中的示例`$("#add").css("background-color")`返回`rgba(0,0,0,0)`not `transparent`。因此，读取这样的背景颜色不符合跨浏览器的要求。

一般来说，我认为你可能会更好地上课。

[http://jsfiddle.net/watRq/](http://jsfiddle.net/watRq/)

```
$(document).ready(function () {
  $("#add").click(function () {
    if ($(this).hasClass("transparent")) {
      $(this).addClass("green").removeClass("transparent");
      $("#destination").append('<option value="1">New option</option>');
   } else {
      $("#add").addClass("transparent").removeClass("green");
      $("#destination option[value='1']").remove();
   }
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T10:00:02.397

不是检查背景颜色，而是使用[jQuery.data](http://api.jquery.com/data/)来存储是否添加了元素：

```
var added = $(this).data("added");
// returns undefined if requested data does not exist
if (!added) {
    $(this).data("added", true);
    // change background, do stuff
}
else {
    $(this).removeData("added");
    // change background, do stuff
} 
```

[**演示**](http://jsfiddle.net/salman/DjWEn/)

# android - MvvmCross Android Button Click 绑定在 Release 版本中不起作用

> ID：14291696
> 
> 赞同：0
> 
> 时间：2013-01-12T08:34:34.917
> 
> 标签：android, xamarin.android, mvvmcross

在这个[问题](https://stackoverflow.com/questions/14208203/mvvmcross-android-alternative-to-relativesource-binding-for-button-command)之后，我在 Release 中构建了应用程序并发布到 Samsung Galaxy Tab 2 10.1，Android 版本 4.0.4，并且按钮单击命令不会触发。我什至在其中放了一个对话框片段，但实际上并没有执行该命令。

当我在同一台设备上调试同一个应用程序时，它工作正常。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:39:57.817

请参见：

*   [IOS 上的 mvvmcross 绑定问题（适用于模拟器，但某些属性在设备上不起作用）](https://stackoverflow.com/questions/14275499/problems-with-mvvmcross-binding-on-ios-works-on-simulator-but-some-properties)
*   [MvvmCross Monotouch - 无法在真正的 iPad 上绑定属性，但它可以在模拟器上运行](https://stackoverflow.com/questions/11349864/mvvmcross-monotouch-fail-to-bind-properties-on-a-real-ipad-but-it-works-on-th)

[https://stackoverflow.com/questions/10224376/mvvmcross-experiences-hindsight-limitations](https://stackoverflow.com/questions/10224376/mvvmcross-experiences-hindsight-limitations)中也提到了类似的链接器问题

# ios - 如何在类方法中实现键值对的简单本地缓存？

> ID：14291698
> 
> 赞同：2
> 
> 时间：2013-01-12T08:34:57.890
> 
> 标签：ios, nsdictionary, nsmutabledictionary

我的项目中有一个类，它查询私有服务器并在获得字母数字用户 ID 时返回一个人类可读的用户名。我将其实现为类方法。

我不想过多地查询服务器。我知道这可以通过实现实例方法来解决，但我真的只想使用类方法。如何实现用户 ID/用户名对的私有缓存，最好使用`NSMutableDictionary`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:59:17.480

我建议使用`NSCache`. `static`在类的实现文件中创建一个变量。例如：

```
#import "MyClass.h"

static NSCache *Cache;

@implementation MyClass

+ (void)initialize 
{
    [super initialize];

    Cache = [[NSCache alloc] init];
}

//  Rest of class implementation here

@end 
```

您将需要编写一些委托给您的类方法，`NSCache`具体取决于您的用例。例如，如果您正在缓存来自网络请求的数据，您可能会编写如下方法：

```
+ (void)cacheResponse:(NSData *)response forURL:(NSURL *)URL
{
    [Cache setObject:response forKey:URL];
}

+ (NSData *)cachedResponseForURL:(NSURL *)URL
{
    return [Cache objectForKey:URL];
} 
```

为了进一步阅读，我建议阅读 NSHipster 的精彩[文章`NSCache`](http://nshipster.com/nscache/)。

# javascript - 通过 XMLHttpRequest 登录/注销 HTTP 认证：IE 有时会弹出登录窗口

> ID：14291699
> 
> 赞同：2
> 
> 时间：2013-01-12T08:35:05.077
> 
> 标签：javascript, http, authentication, http-headers, xmlhttprequest

我想要一个自定义登录表单来对 Web 服务器进行身份验证。服务器非常简单（它基于嵌入式平台），所以我不能使用复杂的机制（php、asp、ssl、...）。对于我的需要，基本的 HTTP 身份验证很好。此外，我需要注销功能。

我实现了 login.html、/pages/protected.html 和 auth.js。第一个是带有登录表单的索引页面。提交按钮调用 auth.js 中的 login() 函数。第二个是受保护的页面（/pages 文件夹下的所有文件都受到保护），只有正确登录才能看到。在这个页面中有一个注销按钮，它调用 auth.js 中的 logout() 函数。

这是 auth.js 的内容：

```
var loginURL = "/login.html";
var logoutURL = "/pages/logout.html";
var userAgent = navigator.userAgent.toLowerCase();

function getHTTPObject() {
  var xmlhttp = false;

  if (window.XMLHttpRequest) {  // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
  } else {                      // code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
  }
  return xmlhttp;
}

function login(strUrl) {
  var user = document.getElementById("txt_username").value;
  var pass = document.getElementById("txt_password").value;
  var http = getHTTPObject();
  http.open("get", strUrl, false, user, pass);
  http.send("");
  if (http.status == 200) {
    document.location = strUrl;
  } else {
    alert("Incorrect username and/or password!");
  }
  return false;
}

function logout() {
  if (userAgent.indexOf("msie") != -1) {
    document.execCommand("ClearAuthenticationCache", false);
  }
  var http = getHTTPObject();
  var logout_url = "/login.html";
  http.open("get", logout_url, false);
  http.send("");
  document.location = logout_url;
  return false;
} 
```

如果请求没有 Authorization 标头，则服务器被编程为使用 401 和 WWW-Authenticate HTTP 标头进行响应。如果请求包含带有错误凭据的授权标头，它会回答 403。通过这种方式，我可以避免使用错误凭据的浏览器登录窗口。

使用最新的 Firefox 版本，这非常有效，它也适用于 IE。但有时 IE 坚持弹出带有用户/密码文本框的小对话框窗口，即使在表单中输入的凭据已更正。

我开始以下循环：

1.  输入正确的用户名和密码
2.  单击登录并出现受保护的页面
3.  点击注销
4.  转到步骤 1。

在 n 次（n 可以是 1、5 或 10）之后，单击登录按钮后，我会收到来自 IE 的身份验证表单。

如您所知，在清除 IE 中的凭据缓存（使用 ClearAuthenticationCache）后，浏览器首先发送没有凭据的请求（即使 XMLHttpRequest 对象具有用户名和密码参数）。只有当 Web 服务器使用 401 代码和 WWW-Authenticate 标头进行响应时，浏览器才会再次发送带有凭据的请求。

我尝试在普通 PC 上使用 lighttpd 服务器实现**相同的页面。**在这种情况下，似乎 IE 没有弹出问题。所以IE不太喜欢我的嵌入式服务器（也就是HTTP1.0）的答案。我的服务器使用以下 HTTP 标头进行回答：

*   HTTP 1.0（*200 表示正确的凭据，401 表示无凭据，403 表示错误的凭据*）
*   服务器
*   WWW-Authenticate（*在没有凭据的情况下*）
*   连接：关闭
*   内容类型

lighttpd (HTTP 1.1) 的答案有更多标题：

*   HTTP 1.1 和代码
*   WWW-认证
*   内容类型
*   内容长度
*   日期
*   服务器

你有什么建议吗？

# php - PHP - 即使用户看不到地址栏，Get 方法是否仍然不安全？

> ID：14291702
> 
> 赞同：0
> 
> 时间：2013-01-12T08:35:21.343
> 
> 标签：php, post, get

> **可能重复：**
> [GET 或 POST 是否比另一个更安全？](https://stackoverflow.com/questions/198462/is-either-get-or-post-more-secure-than-the-other)
> [POST 和 GET 有什么区别？](https://stackoverflow.com/questions/3477333/what-is-the-difference-between-post-and-get)

`$_GET`我的理解是和之间的区别在于`$_POST`，`$_GET`您可以在地址栏中看到表单发送的内容。

现在我正在制作一个 iPhone 应用程序，它正在发送一个带有 $_GET 详细信息的 url。用户无法看到或猜测正在使用的变量。我不应该使用 GET 还有其他原因吗？

我通过 URL 发送敏感数据，所以我问如果用户看不到 URL，使用 $_GET 是否足够安全。

此外，数据是从 IOS 应用程序生成的，因此我的服务器上没有包含此数据的网站。

提前致谢：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:44:51.477

GET 和 POST 是HTTP 的[请求方法](http://en.wikipedia.org/wiki/HTTP#Request_methods)，还有更多像 PUT 和 DELETE 这样的 PHP 不使用的方法。尽管最佳实践是使用 GET 进行任何数据/信息检索（例如搜索操作）并使用 POST 发送一些数据以存储（例如用户输入），但坚持使用 POST 或 GET 没有安全论据。

如果您要发送敏感数据，您应该考虑 SSL 而不是请求方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:05:25.560

这里的每个人都是正确的，如果您不通过安全（即 SSL）连接发送数据，中间人可以嗅探这两个请求。

但是，您需要记住的一件事是您的 Web 服务器如何处理这两者。请求发送的数据`POST`通常不被服务器记录，而`GET`请求则被记录。这是因为 GET 数据实际上只是 URL 的一部分。我们只是将其视为单独的数据，因为 PHP 有助于将其分类为我们的超全局数组。尽管没有查询字符串，但对像这样的裸 URL 的`http://www.google.com`请求仍然是 GET 请求（除非您在客户端中专门调用不同的协议）。

与其他 GET 请求一样，带有查询字符串的请求仍将输入到服务器的访问日志中。如果您通过查询字符串传递敏感信息，则需要制定策略来安全地处理这些日志以及可能记录此类数据的其他位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T08:42:24.260

不，它不安全。您的网站仍然可以从其他具有可见 url 栏的机器访问。此外，它不需要网络浏览器来开始操作`GET`或`POST`请求，有一些程序，例如[Fiddler](http://www.fiddler2.com/fiddler2/)，将允许某人修改请求，而不管浏览器或数据如何提交。

使用`POST`而不是`GET`使攻击者更难向您发送恶意数据，它可能会阻止临时用户尝试使用该 url，但不会阻止它。本质上客户端数据不可信，您必须在服务器上对其进行验证。如果您需要传输敏感数据，您应该使用`HTTPS`.

从不[情愿到信任](https://buildsecurityin.us-cert.gov/bsi/articles/knowledge/principles/355-BSI.html)

> 与其做出需要成立的假设，不如不愿扩大信任。服务器应该被设计成不信任客户端，反之亦然，因为客户端和服务器都会被黑客入侵。不愿信任有助于划分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T08:42:36.330

好问题。如果数据非常敏感，例如密码，我不建议使用 $_GET ，因为嗅探无线网络的人可以拦截请求的网站。假设恶意用户正在使用诸如[http://www.wireshark.org/](http://www.wireshark.org/)之类的工具嗅探网络上的所有 Web 流量，则密码或其他敏感信息将简单地显示在 URL 中。此外，如果 iOS App 用户通过网络嗅探找到 URL，用户自己可以通过提交自定义 HTTP 请求从自己的浏览器更改数据。考虑使用 SSL 或 HTTPS 发送数据并避免网络嗅探（在一定程度上）。

您可以查看替代方案，例如使用 JSON：[How to send json data in the Http request using NSURLRequest](https://stackoverflow.com/questions/4456966/how-to-send-json-data-in-the-http-request-using-nsurlrequest)

祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T09:00:37.167

即使您使用 SSL，也不要使用 GET 传输敏感数据，因为 Web 服务器通常会在其访问日志文件中记录带有查询字符串（但不是 POST 正文）的 GET URL。请参阅[此答案](https://stackoverflow.com/a/198866/1402846)、[此答案](https://stackoverflow.com/a/1008704/1402846)和[此评论](https://stackoverflow.com/questions/989967/best-way-to-log-post-data-in-apache#comment798769_990021)。

以下是在我的测试 Web 服务器上找到的一些示例日志记录（我使用的是 Apache）

```
127.0.0.1 - - [10/Jan/2013:14:50:57 +0800] "GET /Web/WebAPI.php?action=login&username=ttt&password=uuu HTTP/1.1" 200 380 "-" "Opera/9.80 (Windows NT 6.1) Presto/2.12.388 Version/12.12"
127.0.0.1 - - [10/Jan/2013:14:51:05 +0800] "GET /Web/WebAPI.php?action=logout HTTP/1.1" 200 87 "-" "Opera/9.80 (Windows NT 6.1) Presto/2.12.388 Version/12.12"
127.0.0.1 - - [12/Jan/2013:13:26:13 +0800] "GET /Web/WebAPI.php?action=login&username=ttt&password=uuu HTTP/1.1" 200 380 "-" "Opera/9.80 (Windows NT 6.1) Presto/2.12.388 Version/12.12" 
```

现在用户的密码**以纯文本**形式登录服务器。你不想要那个，是吗？

# c# - 为什么 Timer_Tick 事件中的 SendKeys.SendWait 和 Thread.Sleep 没有阻塞？

> ID：14291704
> 
> 赞同：2
> 
> 时间：2013-01-12T08:36:04.997
> 
> 标签：c#, .net, winforms, timer, blocking

我的表单上有一个带有以下`Tick`事件处理程序的 Timer 控件：

```
private void timer1_Tick(object sender, EventArgs e) {
    foreach (char c in "Andrew") {
        SendKeys.SendWait(c.ToString());
        System.Threading.Thread.Sleep(1000);
    }
} 
```

由于 [System.Windows.Forms.Timer 在 UI 线程上运行](https://stackoverflow.com/a/5694481/692456)，我希望事件处理程序`Tick`在它运行时阻止进一步发生的事件，这将`AndrewAndrewAndrew...`作为输出提供。相反，我得到`AnAnAnAn...`.

`Tick`为什么在第一个事件完成之前引发和处理后续事件？

如何确保 Timer 一次引发一个事件，并在处理程序运行完成之前完全阻塞？

*我意识到 Thread.Sleep 是一种可怕的计时代码方式*。我只是想知道发生了什么事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:56:15.377

您是通过消息循环重新进入的受害者。您正在`timer1_Tick`通过消息循环间接递归到您的函数中。正在发生的事情是，在`SendKeys.SendWait` *另一个*消息循环内部（而不是在不同的线程上）正在启动以监视消息是否已被处理。然后在另一个线程上，当在这个内部循环中处理消息时，计时器正在触发并发布一条消息以再次调用您的 tick 函数。欢闹随之而来。

也许一个简化的例子会有所帮助。运行它并观察输出。

```
public class Program
{
    private static Queue<Action> queue = new Queue<Action>();

    public static void Main(string[] args)
    {
        // put three things in the queue. 
        // In a simple world, they would finish in order.
        queue.Enqueue(() => DoWork(1));
        queue.Enqueue(() => DoComplicatedWork(2));
        queue.Enqueue(() => DoWork(3));

        PumpMessages();            
    }

    private static void PumpMessages()
    {
        while (queue.Count > 0)
        {
            Action action = queue.Dequeue();
            action();
        }
    }

    private static void DoWork(int i)
    {
        Console.WriteLine("Doing work: {0}", i);
    }

    private static void DoComplicatedWork(int i)
    {
        Console.WriteLine("Before doing complicated work: {0}", i);
        PumpMessages();
        Console.WriteLine("After doing complicated work: {0}", i);
    }

}` 
```

您有点假设，因为在 UI 中只有一个线程泵送消息，排队的每个项目都按顺序处理。但是，当放入队列的方法本身可以泵送消息时，情况就不是这样了。在示例中，第 3 次操作实际上在第 2 次之前完成。该`DoComplicatedWork`方法类似于`SendWait`.

我应该回答你关于如何防止这种情况的第二个问题。A`lock`无济于事，因为它们是可重入的（即同一个线程可以多次获取锁）。最好的方法是在方法内部禁用计时器或分离滴答处理程序，并在返回之前再次重新启用/附加处理程序。您也可以尝试一个简单的`boolean`标志来指示您是否已经在该方法中，如果是则返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:15:08.540

您可以使用参考源或像 Reflector 或 ILSpy 这样的良好反编译器来找出框架代码内部发生的情况。SendKeys.SendWait() 方法最终调用内部类的方法调用 SKWindow 来实现“等待”请求。该方法如下所示：

```
public static void Flush()
{
    Application.DoEvents();
    while ((events != null) && (events.Count > 0))
    {
        Application.DoEvents();
    }
} 
```

*DoEvents() 是一个相当臭名昭著的方法，以导致大量*代码崩溃而闻名。您在计时器的 Tick 事件处理程序上获得的重新进入是相当无害的，此代码可能**会对**您的程序造成更大的损害。你会发现[这个答案](https://stackoverflow.com/a/5183623/17034)中解释了更常见的肮脏。显然，如果可以的话，您会希望避免使用 SendWait()。

# php - 在 index.php 中 require_once Zend/Loader/Autoloader.php 配置？

> ID：14291705
> 
> 赞同：0
> 
> 时间：2013-01-12T08:36:10.073
> 
> 标签：php, zend-framework, configuration

```
require_once 'Zend/Loader/Autoloader.php';
$loader = Zend_Loader_Autoloader::getInstance();
$loader->registerNamespace('./application/');
$loader->setFallbackAutoloader(true); 
```

这对我不起作用，即 getinstanc() 没有被调用，但 require_once 没有抛出任何错误

我什至从库中删除了整个 zend 文件夹，然后它也没有抛出错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:46:35.670

`require_once`如果文件不存在，肯定会抛出错误。您可能关闭了 display_errors - 检查您的 Apache 错误日志以了解实际错误，并确保您在开发环境中将 APPLICATION_ENV 设置为“开发”。

此外，您传递给 registerNamespace 的命名空间无效，您可能想要更多类似的东西`$loader->registerNamespace('Application_');`

# javascript - 可以用 AJAX XMLHttpRequest 做一个真正的 POST（？不是 var=val url 类型的帖子）吗？

> ID：14291706
> 
> 赞同：0
> 
> 时间：2013-01-12T08:36:30.847
> 
> 标签：javascript, ajax, post

我不太确定如何问这个问题，对不起..但基本上就是这个..

我刚开始使用 Ajax .. 并在后台发送 XMLhttpRequest，我在表单数据中遇到了一些 html 特殊字符的问题，特别是 & 符号过早地终止了变量

例如。将“你和我”的结果评价为“你”

现在从我的角度解释这个问题..这很简单..如果我使用GET方法提交我的常规表单，同样的事情会发生..因为变量是URL编码的..但是如果我将表单设置为POST方法然后一切都在我需要的时候被保留了..

现在我相信它与这个（？）

```
hr.open("POST", link, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 
```

特别是在 form-urlencoded 部分..有替代方案吗？

我不想必须对我通过 Ajax 传递的每个变量运行清理例程:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:46:01.917

> `&`过早终止变量的符号

`&`应该终止 x-www-form-urlencoded 数据中的值。构建 URL 时需要对数据进行[编码。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

> 如果我使用 GET 方法提交我的常规表单，也会发生同样的事情......因为变量是 URL 编码的

不。如果您使用 GET 提交常规表单，则输入的数据将是 URL 编码的，并且作为数据出现的 & 字符将由原始字符`%26`而不是原始`&`字符表示，因此**不会**发生同样的事情。

> 是否有替代方案[应用程序/x-www-form-urlencoded]？

您可以使用任何您喜欢的数据格式。有些比其他更容易生成（JSON 特别容易从浏览器生成）。然后，您将面临在服务器上解码它们的挑战（表单处理库不倾向于使用 JSON，因此您必须获取原始 POST 数据并自己解码）。

由于您的实际问题是通过对数据进行编码来解决的，因此这是不必要的。

# activereports - 活动报告 标签间距

> ID：14291708
> 
> 赞同：1
> 
> 时间：2013-01-12T08:36:46.057
> 
> 标签：activereports

我在 activereports 详细信息部分有一个富文本框。它与 html 动态分配。该 HTML 也包含 LIST 标签（UL 和 LI）。但问题是我无法更改每个 LI 标签之间的间距。我在 LI 的 style 属性上尝试了所有 CSS 方法。像边距，填充，线高。但是没有什么能帮助我解决这个问题。但我需要在 Richtextbox 上的每个 LI 标记之间留一些明显的间距。

这是我老板的紧急要求。

请求您的宝贵支持.. 提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:20:08.187

ActiveReports 文档中有[支持的 HTML 元素和 CSS 样式属性的](https://web.archive.org/web/20110518062342/http://www.datadynamics.com/Help/ActiveReports6/arCONRichText.html)列表。您可以查看该参考并尝试提到的样式属性。我会尝试 LI 元素的 line-height、margin 和 padding 属性。或者也许尝试将 P 元素放在 LI 元素之一上？如果这不起作用，您可能应该联系[ComponentOne 的 ActiveReports 支持](https://web.archive.org/web/20110924082400/http://www.componentone.com/SuperProducts/SupportServices/Overview/)。

如果不出意外，您可以尝试让一些 RTF 文档看起来像您想要的方式（即增加列表项之间的间距）并尝试将该 RTF 文档导入 ActiveReports。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-12T18:32:40.317

这对我有用：

段落标签支持 ActiveReports RichTextBox 中的内联样式属性。因此，您可以将每个列表项包含在打开/关闭段落标签中，然后使用内联段落样式中的 margin-top、margin-bottom 来获得所需的行间距。

我用 style='margin-top:0;margin-bottom:5'

# html - 嵌入 HTML 文件时，舞台尺寸显示不正确

> ID：14291711
> 
> 赞同：1
> 
> 时间：2013-01-12T08:37:10.130
> 
> 标签：html, actionscript-3

我需要一个 swf 文件来填充整个 html 页面。但遗憾的是，我未能使其按预期工作。即使 SWF 确实填满了整个页面，它的尺寸也显示错误。这就是我所说的：[http ://tinypic.com/r/w7k75i/6](http://tinypic.com/r/w7k75i/6)

如您所见，swf 位于窗口的末尾，但尺寸为 1024x768（左下角的文本），并且从未触发“舞台调整大小”事件（0- 最后一个数字）。这在我的 PC 上打开 swf 时非常有效，但在嵌入 html 页面时却不行。

这就是我嵌入 SWF 的方式：

```
<body><script type='text/javascript' language='javascript' src='/B1D671CF-E532-4481-99AA-19F420D90332/netdefender/hui/ndhui.js?0=0&amp;0=0&amp;0=0'></script>
<div id="content">
</div>

<script type="text/javascript">

    swfobject.embedSWF("SiteVali.swf", "content", "100%", "100%", "9.0.0");
</script> 
```

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:41:05.470

从评论中重新发布解决方案：

您的尺寸检查代码是否仅由 Event.RESIZE 触发？您可能只需要在加载完成后手动检查 stageWidth 和 stageHeight 值，因为它不会在第一次呈现 swf 时触发，即使它不是默认大小。

# jquery - Jquery 页面切换器

> ID：14291714
> 
> 赞同：0
> 
> 时间：2013-01-12T08:37:26.497
> 
> 标签：jquery, css, load, refresh, switchers

当我点击下一页时，我的代码有问题>>>页面刷新两次。<<<可以停止吗？对不起我糟糕的英语

**代码**

`jQuery(document).ready(function() {`

```
$(".container").css("display", "none");

$(".container").fadeIn(1000);

$("a.pager").click(function(event){
    event.preventDefault();
    linkLocation = this.href;
    jQuery(".container").fadeOut(1000, redirectPage);       
});

function redirectPage() {
    window.location = linkLocation;
}}); 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:45:24.160

您需要停止传播点击事件（与 不同`.preventDefault()`）：

```
$("a.pager").click(function(event){
  event.preventDefault();
  linkLocation = this.href;
  jQuery(".container").fadeOut(1000, redirectPage);
  return false; // stop propagation of the click event 
}); 
```

# wcf - WCF 中的运行时错误：没有协议绑定与给定地址匹配

> ID：14291715
> 
> 赞同：4
> 
> 时间：2013-01-12T08:37:34.310
> 
> 标签：wcf

当我使用以下配置运行 WCF 服务时，我想从我的 VS2010 运行 WCF 服务。

```
<system.serviceModel>
<services>
  <service name="WcfSample.Service1" behaviorConfiguration="servicebehaviour1">
    <endpoint  address ="http://localhost:8080/service1/Service1.svc" contract="WcfSample.IService1" binding="wsHttpBinding"></endpoint>
    <endpoint address="" binding="mexHttpBinding" contract ="IMetadataExchange"></endpoint>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="servicebehaviour1">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="false"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<!--<serviceHostingEnvironment multipleSiteBindingsEnabled="false" />--> 
```

我收到如下异常

> 没有协议绑定与给定地址“http://localhost:8080/service1/Service1.svc”匹配。协议绑定在 IIS 或 WAS 配置中的站点级别进行配置。

如果我想在我给定的地址运行我的 WCF，我应该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T08:49:50.993

WCF 服务的托管不采用您在配置文件的端点中定义的地址

```
<endpoint 
      address="http://localhost:8080/service1/Service1.svce" 
```

因此，您反对的上述一个不是正确的，而不是您需要执行以下操作的

您的服务地址是 Web 服务器和虚拟目录加上 SVC 文件名，如下所示

```
http://servername/vrirualdirectoryname/svcfiename.svc/ 
```

您可以定义相对地址，如下所示：

```
<service name="WcfSample.Service1">
   <endpoint name="" 
             address="ServiceAddress" 
             binding="wsHttpBinding"   
             contract="WcfSample.IService1" />
</service> 
```

所以最后你使用服务的服务地址是

```
http://servername/vrirualdirectoryname/svcfiename.svc/ServiceAddress 
```

所以像这样你可以做而不是直接指定地址。

**笔记 ：**

上面的代码表明该服务将托管在 IIS 服务器上。

# codeigniter - 使用 Codeigniter CLI 发送电子邮件时出错

> ID：14291721
> 
> 赞同：0
> 
> 时间：2013-01-12T08:39:51.457
> 
> 标签：codeigniter, email, command-line-interface, send

我有使用 codeigniter 发送电子邮件的功能。当我通过浏览器在 localhost 计算机中运行时，此功能正常，但是当我尝试通过命令行界面运行时，此功能失败，这是我得到的日志：

```
调试 - 2013-01-12 15:09:57 --> 配置类已初始化
    错误 - 2013-01-12 15:09:57 --> 严重性：警告 --> chmod()：不允许操作 /var/www/myapp/system/libraries/Log.php 106
    ……
    调试 - 2013-01-12 15:09:57 --> 数据库驱动程序类已初始化
    错误 - 2013-01-12 15:09:57 --> 严重性：警告 --> chmod()：不允许操作 /var/www/myapp/system/libraries/Log.php 106
    调试 - 2013-01-12 15:09:57 --> Helper 加载：file_helper
    错误 - 2013-01-12 15:09:57 --> 严重性：警告 --> chmod()：不允许操作 /var/www/myapp/system/libraries/Log.php 106
    调试 - 2013-01-12 15:09:57 --> 电子邮件类已初始化
    错误 - 2013-01-12 15:09:57 --> 严重性：警告 --> chmod()：不允许操作 /var/www/myapp/system/libraries/Log.php 106
    DEBUG - 2013-01-12 15:10:00 --> 加载的语言文件：language/english/email_lang.php
    错误 - 2013-01-12 15:10:00 --> 严重性：警告 --> chmod()：不允许操作 /var/www/myapp/system/libraries/Log.php 106
    调试 - 2013-01-12 15:10:00 --> 无法使用 PHP mail() 发送电子邮件。您的服务器可能未配置为使用此方法发送邮件。
来自：“测试”
    返回路径：
    回复：“myemail@gmail.com”
    X 发件人：myemail@gmail.com
    X-Mailer: CodeIgniter
    X 优先级：3（正常）
    消息 ID：<50f11a55932b7@gmail.com>
    哑剧版：1.0

```

请帮我解决这个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:02:05.780

最后我可以自己解决问题根据[here](https://github.com/EllisLab/CodeIgniter/issues/1890)和[here](http://www.absolutelytech.com/2010/07/18/howto-send-emailsusing-mail-function-from-localhost-in-php-through-msmtp-using-gmail-account-on-linux/)

并像这样更改 config/email.php：

```
$config['protocol']='smtp';
$config['mailpath'] = "/usr/bin/msmtp";
$config['smtp_host']='ssl://smtp.googlemail.com';
$config['smtp_port']=465;
$config['smtp_timeout']=30;
$config['smtp_user']='myemail@gmail.com';
$config['smtp_pass']='mypassword';
$config['charset']='utf-8';  
$config['newline']="\r\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:55:21.050

您是否在 php.ini 文件中设置了邮件设置？您真的能够通过浏览器中的应用程序发送电子邮件吗？仅仅因为它不抱怨并不意味着该功能确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T21:35:15.730

也许您没有对该文件的访问权限。

尝试使用以下命令使所有用户都可以访问：

```
sudo chmod 777 /var/www/myapp/system/libraries/Log.php 
```

这是一种不正确的使用方式，但您可以找到问题所在。

# arm - NAND jffs2 文件系统 - 二进制和文本文件可以超过 NAND 的大小

> ID：14291722
> 
> 赞同：1
> 
> 时间：2013-01-12T08:39:56.210
> 
> 标签：arm, jffs2

我正在编写一个基于 ARM 9 v5 处理器的嵌入式应用程序，并且正在使用 64MB NAND。我的问题是，当我复制大小为 3-4 MB 的文本或二进制文件时，可用物理内存仅减少了几 KB，而`ls -l`以 MB 为单位显示文件大小。

通过重复相同的过程，我达到了一个点，`df`命令显示**10MB**大小是免费的，并且`du`总大小显示为**239MB**。

我只有**64MB**的 NAND，如何添加最大 239MB 的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T05:42:42.853

JFFS2 是一个压缩文件系统，因此它将文件压缩在磁盘中，这导致了这种冲突。`du`列出磁盘使用情况，`df`是文件系统看到的可用容量。

# javascript - 按键条件验证上的jquery文本框

> ID：14291724
> 
> 赞同：0
> 
> 时间：2013-01-12T08:40:09.733
> 
> 标签：javascript, jquery

我正在研究 asp.net mvc 网站，我有 4 个下拉菜单和 4 个这样的文本框

```
dialprefix1   callfromnumber1
dialprefix2   callfromnumber2
dialprefix3   callfromnumber3
dialprefix4   callfromnumber4 
```

我想要如果 dialprefix1 下拉列表的值为 44 那么 callfromnumber1 应该

有数字值 - done 应该以 0 0r 1,2,7,8 开头，否则显示警报（不工作）如果数字以 0 开头，那么 callfromnumber1 中允许的长度是 10（工作）如果数字以 1,2,7 开头， 8 那么 callfromnumber1 中允许的长度是 9 （工作）

我已经这样编码了：

```
$(document).ready(function () {

    $("#DefaultCallFrom1, #DefaultCallFrom2, #DefaultCallFrom3, #DefaultCallFrom4").keydown(function (event) {
        // Allow: backspace, delete, tab, escape, and enter
        if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 ||
        // Allow: Ctrl+A
            (event.keyCode == 65 && event.ctrlKey === true) ||
        // Allow: home, end, left, right
            (event.keyCode >= 35 && event.keyCode <= 39)) {
            // let it happen, don't do anything
            return;
        }
        else {
            // Ensure that it is a number and stop the keypress
            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105)) {
                event.preventDefault();
            }
        }

    });

    if ($("#DefaultCallFrom1").val().match("5")) {
        displayAlertMessage($("#DefaultCallFrom1").val().substring(0, 1) + "Number must start with 0, 1, 2, 7 or 8");
    }

    $("#DefaultCallFrom1").keypress(function () {
        if ($("#Dialprefix1").val() == "44") {           
            if (this.value.substring(0, 1) == "0")
                return this.value.length <= 10
            else
                return this.value.length <= 9
        }
    })

    $("#DefaultCallFrom2").keypress(function () {
        if ($("#Dialprefix2").val() == "44") {
            if (this.value.substring(0, 1) == "0")
                return this.value.length <= 10
            else
                return this.value.length <= 9
        }
    })

    $("#DefaultCallFrom3").keypress(function () {
        if ($("#Dialprefix3").val() == "44") {
            if (this.value.substring(0, 1) == "0")
                return this.value.length <= 10
            else
                return this.value.length <= 9
        }
    })

    $("#DefaultCallFrom4").keypress(function () {
        if ($("#Dialprefix4").val() == "44") {
            if (this.value.substring(0, 1) == "0")
                return this.value.length <= 10
            else
                return this.value.length <= 9
        }
    })

}); 
```

另外，我可以为所有四个制作一个按键事件吗（现在我在这个片段的末尾有四个按键。

[编辑]

```
<td style="padding-left: 1px">
    <input type="text" value="1" readonly="readonly" name="srNo" id="srNo" disabled="disabled" class="tiny" style="text-    align:right">
    <select name="Dialprefix1" id="Dialprefix1">
        <option value="44">+44</option>
        <option value="001">+001</option>
        <option value="11" selected="selected">+11</option>
        <option value="12">+12</option>
        <option value="13">+13</option>
    </select>
    <input type="text" value="" name="DefaultCallFrom1" id="DefaultCallFrom1" class="textarea normal" autocomplete="off">
    <br>
    <input type="text" value="2" readonly="readonly" name="srNo" id="srNo" disabled="disabled" class="tiny" style="text-    align:right">
    <select name="Dialprefix2" id="Dialprefix2">
        <option value="44">+44</option>
        <option value="001">+001</option>
        <option value="11" selected="selected">+11</option>
        <option value="12">+12</option>
        <option value="13">+13</option>
    </select>
    <input type="text" value="" name="DefaultCallFrom2" id="DefaultCallFrom2" class="textarea normal" autocomplete="off">
    <br>
    <input type="text" value="3" readonly="readonly" name="srNo" id="srNo" disabled="disabled" class="tiny" style="text-    align:right">
    <select name="Dialprefix3" id="Dialprefix3">
        <option value="44">+44</option>
        <option value="001">+001</option>
        <option value="11" selected="selected">+11</option>
        <option value="12">+12</option>
        <option value="13">+13</option>
    </select>
    <input type="text" value="" name="DefaultCallFrom3" id="DefaultCallFrom3" class="textarea normal" autocomplete="off">
    <br>
    <input type="text" value="4" readonly="readonly" name="srNo" id="srNo" disabled="disabled" class="tiny" style="text-    align:right">
    <select name="Dialprefix4" id="Dialprefix4">
        <option value="44">+44</option>
        <option value="001">+001</option>
        <option value="11" selected="selected">+11</option>
        <option value="12">+12</option>
        <option value="13">+13</option>
    </select>
    <input type="text" value="" name="DefaultCallFrom4" id="DefaultCallFrom4" class="textarea normal" autocomplete="off">
</td> 
```

请建议

# mouseevent - 如何记录 ppt/pdf 幻灯片的标记（绘图）和音频旁白

> ID：14291728
> 
> 赞同：1
> 
> 时间：2013-01-12T08:40:57.567
> 
> 标签：mouseevent, ms-office, powerpoint, video-capture

背景：

我目前正在为第三世界国家开发远程教育系统。由于带宽有限，学生无法或负担不起观看来自互联网的视频流。

要求：

1.  连续录音。老师讨厌为每张幻灯片录制旁白。

2.  语音标记同步，即标记应该在它们被记录的确切时间一一出现。

显然嵌入 Ms PowerPoint 是不够的。

问题：

是否有某种 PowerPoint 插件可以实现这一点？

如何记录加价？

只需记录鼠标移动/事件并重播这些事件可能会奏效，但这很复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T02:38:00.860

请看一下[PresentationTube](http://presentationtube.com/)。PresentationTube 提供免费的桌面演示记录器和基于 YouTube 的视频共享网络，以帮助教师和学生以新的方式制作和共享高质量的电子学习视频演示。记录器允许演示者同步各种视觉辅助工具，包括演示者的音频和视频片段、PowerPoint 幻灯片、手写文本、绘图和网页。该平台集成了可滚动的幻灯片缩略图，允许观众移动到相应的视频内容并控制视频演示的时间和进度。

# c - C 代码仅在某一点上运行良好

> ID：14291732
> 
> 赞同：0
> 
> 时间：2013-01-12T08:41:33.867
> 
> 标签：c

我编写了这个简单的代码来生成高达 1005 的所有正整数的 4 次方。它只能在整数 215 之前正常工作。之后它会给出错误的读数。为什么这样？

```
# include<stdio.h>

int main(void)
{
    int i;
    unsigned long long int j;

    for (i = 1; i <= 1005; i++){
        j = i*i*i*i;
        printf("%i.........%llu\n",i,j);

    }

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T08:43:40.730

您可以通过进行这个小改动来[修复它。](http://liveworkspace.org/code/1EHgE3%241)

```
unsigned long long i; 
```

问题是，在该行`j = i*i*i*i;`中，右手边`int`在被分配到之前被计算为一个`j`。因此，如果`i^4`超过整数限制，它基本上会首先开始变为负数，并在高位被剪裁时开始循环。当负数分配给 时`j`，因为`j`是**unsigned**，`-i`变成`max - i`，这就是**巨大数字**的来源。您还需要将`printf`格式说明符从更改`%i`为`%llu`for `i`。

您也可以通过执行以下操作来解决此问题

```
j = (unsigned long long)i*i*i*i; 
```

这基本上强制强制转换为`j`在执行乘法之前的类型。

健全性检查 - `215 ^4`= 2136750625，非常接近上限`signed int`2,147,483,647。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T08:48:01.060

`i*i`产生一个`int`. `i*i*i`和也是如此`i*i*i*i`。215 是 4 次方适合 32 位的最大正整数`int`。

除此之外，结果通常会被截断（通常是因为严格来说，您遇到了未定义行为的情况；有符号整数溢出导致根据 C 标准的 UB）。

您可能希望将其`i`转换为`unsigned long long`或将其定义为`unsigned long long`，因此乘法是 64 位的：

```
 j = (unsigned long long)i*i*i*i; 
```

# android - 第二个 ListView 显示一个新数组

> ID：14291739
> 
> 赞同：0
> 
> 时间：2013-01-12T08:42:48.743
> 
> 标签：android, arrays, android-arrayadapter

我有 2 个数组：
Array1: ABCDEF
Array2: A1, A2, A3, A4, B1, B2, B3 ...

列表视图1 | 列表视图2

* * *

```
 A     |   A1 A2 A3 A4
 B     |   B1 B2 B3
 C     |   C1 C2 C3 C4
 D     |   D1 D2
 E     |   E1 E2
 F     |   F1 F2 F3 
```

我想首先显示一个包含 Array1 的 ListView。一旦选择了一个项目，该项目将突出显示或所有其他项目都将消失，并且一个新的 ListView 将显示在第一个 ListView 旁边，其中包含 Array2。

假设我选择了 C：

列表视图1 | 列表视图2

* * *

```
 A     |   C1
 B     |   C2
*C*    |   C3
 D     |   C4
 E     |      
 F     | 
```

我可以做第一部分，并且可以处理 onItemClick 事件，但不确定如何在第二个数组之后创建一个新的 ListView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:17:39.997

尝试创建这样的东西。

```
ArrayAdapter<String> arrayAdapterOne = new ArrayAdapter<String>(this, R.layout.your_layout, listOne);
ArrayAdapter<String> arrayAdapterTwo = new ArrayAdapter<String>(this, R.layout.your_layout, listTwo); 
listViewOne.setAdapter(arrayAdapterOne);
listViewTwo.setAdapter(arrayAdapterTwo);                

listViewOne.setOnItemClickListener(new AdapterView.OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1,int pos, long arg3) {

    // your logic here
    //update list two as per value of list One
    arrayAdapterTwo = new ArrayAdapter<String>(this, R.layout.your_layout, listTwo); 
    arrayAdapterTwo.notifyDataSetChanged();
    // or
    // listViewTwo.setAdapter(arrayAdapterTwo);             

    }
}); 
```

# c++ - 为什么 std::shared_ptr 不使用参考链接？

> ID：14291744
> 
> 赞同：3
> 
> 时间：2013-01-12T08:43:31.167
> 
> 标签：c++, c++11, shared-ptr, smart-pointers, reference-counting

`std::shared_ptr`需要在包含引用计数的堆上分配一个控制块。我从[http://ootips.org/yonat/4dev/smart-pointers.html](http://ootips.org/yonat/4dev/smart-pointers.html)学到了另一种方法，它将所有引用保存在一个双向链表中。它不需要额外的分配，也不需要计数器，但引用对象本身更大。

是否有基准或任何明确的理由表明一种实现优于其他实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T15:16:14.007

该标准在理论上允许使用链表，但由于复制 a`shared_ptr`必须是线程安全的，因此使用链表实现它会更加困难。该列表需要由互斥体保护（或者是一个无锁列表，这要困难得多），以便每次 a`shared_ptr`被复制或超出范围时，该列表都可以被多个线程安全地修改。

使用原子类型进行引用计数并使用原子操作进行引用计数更新要简单得多，而且通常效率更高。

**编辑：**要回答下面的评论，仅使用原子指针来实现链表是不够的。要从列表中添加或删除一个节点（对应于增加和减少`use_count`），您需要以原子方式更新两个指针，以在添加/删除节点之前和之后调整节点中的链接。 `std::atomic<T*>`允许您以原子方式更新单个指针，但如果您需要以原子方式更新两个此类对象，则无济于事。由于这两个指针位于不同的节点中，因此它们并不相邻，因此即使是四字 CAS 也无济于事。

替代方案是保护整个列表的互斥锁（显然不利于争用）或每个列表节点的互斥锁，您可以锁定任何更新中涉及的每个节点的互斥锁，这会使用更多内存并一次影响多达三个节点，即需要锁定三个互斥锁。如果您的数量`use_count()`小于或等于五个，则复制/销毁任何一个都`shared_ptr`与复制/销毁共享同一指针所有权的任何其他实例进行竞争。在大多数更新是针对彼此相距较远的非邻居节点的情况下，您可能会因为使用次数较多而减少争用，但在一般情况下可能不会。大量程序使用`shared_ptr`使用计数为个位数。即使使用计数很高并且任何节点上都没有争用，您仍然必须锁定三个互斥锁并创建/销毁一个列表节点（可能需要堆分配）并更新其相邻节点中的指针，因此原子增量/减量尽管存在原子整数的争用，但它更简单并且仍然可以更快。

上次我在委员会反射器上提到`shared_ptr`不需要使用参考计数并且可以使用列表，我得到了答复：

> 鉴于标准现在承认多线程，有人真的这样做吗？

和（参考线程安全要求）：

> 对于引用链接的实现，要（有效地）完成这项工作要困难得多。我什至不确定这是否可能，尽管它可能是。

# jquery - 日期选择器问题

> ID：14291746
> 
> 赞同：0
> 
> 时间：2013-01-12T08:43:55.223
> 
> 标签：jquery, datepicker

我需要将日期选择器添加到我的网站（实时比分网站）我需要根据所选日期更改固定装置。我尝试了很多 jquery datepickers，但我总是遇到同样的问题：当我选择一个新日期时我无法更改固定装置我尝试了 jquery 事件（选择、更改、实时......）我也没有任何工作无法从文本框中获取日期以获取相关灯具？这是我正在处理的示例代码（我什至无法提醒更改）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="zebra_datepicker.js"></script>
    <link rel="stylesheet" href="zebra_datepicker.css" type="text/css">
    <script>
    $(document).ready(function() {

    // assuming the controls you want to attach the plugin to 
    // have the "datepicker" class set
    $('input.datepicker').Zebra_DatePicker();

 });
 $(".datepicker").change(function(){alert('basel')});
    </script>
    </head>
<body><input type="text" name="your_input" class="datepicker"/></body>
<footer></footer>
</html> 
```

我希望尽快得到答复 thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:53:40.630

jQueryUI 覆盖了 change 函数，因此您要使用 jQueryUI 事件，例如 onSelect。

```
$('input.datepicker').datepicker({
    onSelect: function() { alert("Test"); }
}); 
```

当然，所有这些都在文档中：

[http://api.jqueryui.com/datepicker/#option-onSelect](http://api.jqueryui.com/datepicker/#option-onSelect)

# c# - gridview中HeaderStyle的Font-Bold

> ID：14291747
> 
> 赞同：0
> 
> 时间：2013-01-12T08:44:10.960
> 
> 标签：c#, asp.net, gridview

我在 asp.net 中将此代码用于 gridview 格式：

```
<FooterStyle BackColor="Tan" />
<HeaderStyle BackColor="Tan" Font-Bold="False" Font-Size="11px" />
<PagerStyle BackColor="PaleGoldenrod" ForeColor="DarkSlateBlue" 
    HorizontalAlign="Center" />
<SelectedRowStyle BackColor="DarkSlateBlue" ForeColor="GhostWhite" />
<SortedAscendingCellStyle BackColor="#FAFAE7" />
<SortedAscendingHeaderStyle BackColor="#DAC09E" />
<SortedDescendingCellStyle BackColor="#E1DB9C" />
<SortedDescendingHeaderStyle BackColor="#C2A47B" /> 
```

我想要 HeaderStyle 的 Font-Bold = false：

```
<HeaderStyle BackColor="Tan" Font-Bold="False" Font-Size="11px" /> 
```

但它在浏览器中不是假的，并且 HeaderStyle 中的显示字体是粗体，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:09:47.647

我用这个：

```
HeaderStyle-Font-Bold="false" 
```

没关系 ：-）

# javascript - n = n +1 比 n++ 或 ++n 快，为什么？

> ID：14291748
> 
> 赞同：3
> 
> 时间：2013-01-12T08:44:36.067
> 
> 标签：javascript, performance, increment

检查这个测试用例：http: [//jsperf.com/nn-1-or-n](http://jsperf.com/n-n-1-or-n)

```
n = n + 1; 
```

比

```
n++; 
```

和

```
++n; 
```

关于为什么第一次写作在许多浏览器上如此之快的任何线索？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T08:47:15.420

性能会因浏览器和计算机而异。

我看到`n = n + 1`我的设置快了大约 4 倍。

同时，最慢的是每秒超过 6200**万次操作。**

你在这里进行微优化。一个在另一个之上的使用*几乎不会*成为一个瓶颈。

* * *

**为什么在某些**浏览器中它更快？我不知道。您需要深入研究不同 JavaScript 引擎的源代码才能找到答案。

由于一些流行的微基准是如何编写的，因此很有可能对这种情况进行优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T08:52:52.913

检查这个测试。或者[这里](http://jsperf.com/n-n-1-or-n)是另一个测试。 ![预测试](../Images/263b8b703b6ed28c074799fafc7ee0d1.png)

# android - 图像拖放

> ID：14291752
> 
> 赞同：2
> 
> 时间：2013-01-12T08:45:23.500
> 
> 标签：android, drag-and-drop

上一个问题我已经开始了，但是我想改变拖动的方法。

所以任务是，用户（孩子）学习如何做加法。所以有 2 个糖果和 1 个糖果罐。用户需要将糖果拖放到罐子中。怎么做？

这些是我的代码：

主要的 xml

```
<?xml version="1.0" encoding="utf-8"?>

<AbsoluteLayout android:layout_width="fill_parent" android:layout_height="fill_parent" xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/mainLayout">
<ImageView android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/emptyLetterView" android:src="@drawable/r_empty" android:layout_x="200px" android:layout_y="300px"></ImageView>
<ImageView android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/letterView" android:src="@drawable/r_filled" ></ImageView>
</AbsoluteLayout> 
```

这是java文件包edu.sbcc.cs123.draganddropbasic；

```
import android.app.*;
import android.graphics.*;
import android.os.*;
import android.view.*;
import android.view.View.*;
import android.widget.*;

@SuppressWarnings("deprecation")
public class DragAndDropBasicActivity extends Activity implements OnTouchListener {
    private ImageView letterView;                       // The letter that the user drags.
    private ImageView emptyLetterView;              // The letter outline that the user is supposed to drag letterView to.
    private AbsoluteLayout mainLayout;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mainLayout = (AbsoluteLayout) findViewById(R.id.mainLayout);
        mainLayout.setOnTouchListener(this);
        letterView = (ImageView) findViewById(R.id.letterView);
        letterView.setOnTouchListener(this);

        emptyLetterView = (ImageView) findViewById(R.id.emptyLetterView);
    }

    private boolean dragging = false;
    private Rect hitRect = new Rect();

    @Override
    /**
     * NOTE:  Had significant problems when I tried to react to ACTION_MOVE on letterView.   Kept getting alternating (X,Y) 
     * locations of the motion events, which caused the letter to flicker and move back and forth.  The only solution I could 
     * find was to determine when the user had touched down on the letter, then process moves in the ACTION_MOVE 
     * associated with the mainLayout.
     */
    public boolean onTouch(View v, MotionEvent event) {
        boolean eventConsumed = true;
        int x = (int)event.getX();
        int y = (int)event.getY();

        int action = event.getAction();
        if (action == MotionEvent.ACTION_DOWN) {
            if (v == letterView) {
                dragging = true;
                eventConsumed = false;
            }
        } else if (action == MotionEvent.ACTION_UP) {

            if (dragging) {
                emptyLetterView.getHitRect(hitRect);
                if (hitRect.contains(x, y))
                    setSameAbsoluteLocation(letterView, emptyLetterView);
            }
            dragging = false;
            eventConsumed = false;

        } else if (action == MotionEvent.ACTION_MOVE) {
            if (v != letterView) {
                if (dragging) {
                    setAbsoluteLocationCentered(letterView, x, y);
                }
            }
        }

        return eventConsumed;

    }

    private void setSameAbsoluteLocation(View v1, View v2) {
        AbsoluteLayout.LayoutParams alp2 = (AbsoluteLayout.LayoutParams) v2.getLayoutParams();
        setAbsoluteLocation(v1, alp2.x, alp2.y);
    }

    private void setAbsoluteLocationCentered(View v, int x, int y) {
        setAbsoluteLocation(v, x - v.getWidth() / 2, y - v.getHeight() / 2);
    }

    private void setAbsoluteLocation(View v, int x, int y) {
        AbsoluteLayout.LayoutParams alp = (AbsoluteLayout.LayoutParams) v.getLayoutParams();
        alp.x = x;
        alp.y = y;
        v.setLayoutParams(alp);
    }
} 
```

这就是我已经实现了一段时间我只是添加新变量并将其更改为 letterView1 和 emptyLetterView1

Java 文件：

```
package edu.sbcc.cs123.draganddropbasic;

import android.app.*;
import android.graphics.*;
import android.os.*;
import android.view.*;
import android.view.View.*;
import android.widget.*;

@SuppressWarnings("deprecation")
public class DragAndDropBasicActivity extends Activity implements OnTouchListener {
    private ImageView letterView;                       // The letter that the user drags.
    private ImageView emptyLetterView;          // The letter outline that the user is supposed to drag letterView to.
    private ImageView letterView1;                      // The letter that the user drags.
    private ImageView emptyLetterView1; 
    private AbsoluteLayout mainLayout;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mainLayout = (AbsoluteLayout) findViewById(R.id.mainLayout);
        mainLayout.setOnTouchListener(this);
        letterView = (ImageView) findViewById(R.id.letterView);
        letterView.setOnTouchListener(this);

        emptyLetterView = (ImageView) findViewById(R.id.emptyLetterView);

        letterView1 = (ImageView) findViewById(R.id.letterView1);
        letterView1.setOnTouchListener(this);

        emptyLetterView1 = (ImageView) findViewById(R.id.emptyLetterView1);
    }

    private boolean dragging = false;
    private Rect hitRect = new Rect();

    @Override
    /**
     * NOTE:  Had significant problems when I tried to react to ACTION_MOVE on letterView.   Kept getting alternating (X,Y) 
     * locations of the motion events, which caused the letter to flicker and move back and forth.  The only solution I could 
     * find was to determine when the user had touched down on the letter, then process moves in the ACTION_MOVE 
     * associated with the mainLayout.
     */
    public boolean onTouch(View v, MotionEvent event) {
        boolean eventConsumed = true;
        int x = (int)event.getX();
        int y = (int)event.getY();

        int action = event.getAction();
        if (action == MotionEvent.ACTION_DOWN) {
            if (v == letterView) {
                dragging = true;
                eventConsumed = false;
            }
            if (v == letterView1) {
                dragging = true;
                eventConsumed = false;
            }
        } else if (action == MotionEvent.ACTION_UP) {

            if (dragging) {
                emptyLetterView.getHitRect(hitRect);
                if (hitRect.contains(x, y))
                    setSameAbsoluteLocation(letterView, emptyLetterView);
            }

            if (dragging) {
                emptyLetterView1.getHitRect(hitRect);
                if (hitRect.contains(x, y))
                    setSameAbsoluteLocation1(letterView1, emptyLetterView1);
            }
            dragging = false;
            eventConsumed = true;

        } else if (action == MotionEvent.ACTION_MOVE) {
            if (v != letterView) {
                if (dragging) {
                    setAbsoluteLocationCentered(letterView, x, y);
                }
            }
            if (v != letterView1) {
                if (dragging) {
                    setAbsoluteLocationCentered1(letterView1, x, y);
                }
            }
        }

        return eventConsumed;

    }

    private void setSameAbsoluteLocation(View v1, View v2) {
        AbsoluteLayout.LayoutParams alp2 = (AbsoluteLayout.LayoutParams) v2.getLayoutParams();
        setAbsoluteLocation(v1, alp2.x, alp2.y);
    }

    private void setAbsoluteLocationCentered(View v, int x, int y) {
        setAbsoluteLocation(v, x - v.getWidth() / 2, y - v.getHeight() / 2);
    }

    private void setAbsoluteLocation(View v, int x, int y) {
        AbsoluteLayout.LayoutParams alp = (AbsoluteLayout.LayoutParams) v.getLayoutParams();
        alp.x = x;
        alp.y = y;
        v.setLayoutParams(alp);
    }

    private void setSameAbsoluteLocation1(View v1, View v2) {
        AbsoluteLayout.LayoutParams alp2 = (AbsoluteLayout.LayoutParams) v2.getLayoutParams();
        setAbsoluteLocation1(v1, alp2.x, alp2.y);
    }

    private void setAbsoluteLocationCentered1(View v, int x, int y) {
        setAbsoluteLocation1(v, x - v.getWidth() / 2, y - v.getHeight() / 2);
    }

    private void setAbsoluteLocation1(View v, int x, int y) {
        AbsoluteLayout.LayoutParams alp = (AbsoluteLayout.LayoutParams) v.getLayoutParams();
        alp.x = x;
        alp.y = y;
        v.setLayoutParams(alp);
    }
} 
```

我已将图像文件添加到 xml 文件中，并将 id 更改为 letterView1 和 emptyLetterView1。

所以成功显示了另一张图片，但是，当我拖动其中一张时，另一张图片消失了。

请问我该如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T10:04:05.120

我会将您的解决方案基于以下代码/信息：

*   拖放[官方指南](http://developer.android.com/guide/topics/ui/drag-drop.html)
*   来自 SDK 的示例：[DragAndDrop](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/DragAndDropDemo.html)和[DragableDot](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/DraggableDot.html)
*   Vogella 的[拖放教程](http://www.vogella.com/articles/AndroidDragAndDrop/article.html)
*   关于拖放[1、2](http://codingjunkie.net/android-drag-and-drop-part1/)和[3](http://codingjunkie.net/android-drag-and-drop-part-2/)的[三部分博客文章](http://codingjunkie.net/android-drag-and-drop-part-3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T10:00:52.710

您的代码的问题在这里

```
else if (action == MotionEvent.ACTION_MOVE) {
        if (v != letterView) {
            if (dragging) {
                setAbsoluteLocationCentered(letterView, x, y);
            }
        }
        if (v != letterView1) {
            if (dragging) {
                setAbsoluteLocationCentered1(letterView1, x, y);
            }
        }
    } 
```

现在在您之前的代码中有 2 个侦听器。

1.  主要背景
2.  这`letterView`

现在您有 3 个侦听器，`if (v != letterView)`如果用户在地面或字母上拖动，这将是真的。

例如，如果您开始在随机屏幕上拖动，`v!=letterView`然后`v!=letterView1`. 然后它们都将居中到同一点，因此一个会显得隐藏。

如果您拖动其中一个，同样适用。另一个将移动到该点并显示为隐藏。

而不是使用非方程，你可以尝试

```
else if (action == MotionEvent.ACTION_MOVE) {
        if (v == letterView) {
            if (dragging) {
                setAbsoluteLocationCentered(letterView, x, y);
            }
        }
        if (v == letterView1) {
            if (dragging) {
                setAbsoluteLocationCentered1(letterView1, x, y);
            }
        }
    } 
```

或者你甚至可以做一个命中测试

```
 else if (action == MotionEvent.ACTION_MOVE) {
        letterView.getHitRect(hitRect);
        if (letterView.contains(x,y)) {
            if (dragging) {
                setAbsoluteLocationCentered(letterView, x, y);
            }
        }
        letterView1.getHitRect(hitRect);
        if (letterView1.contains(x,y)) {
            if (dragging) {
                setAbsoluteLocationCentered1(letterView1, x, y);
            }
        }
  } 
```

# java - 在不使用文件路径的情况下将图像添加到标签

> ID：14291757
> 
> 赞同：0
> 
> 时间：2013-01-12T08:46:23.083
> 
> 标签：java, netbeans

我在我的 Netbeans Java 项目中导入了一些图像。单击按钮时，我想将其中一个设置为标签的图标。我不想在代码中使用图像的路径。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:55:28.383

如果您在*项目*中导入了图像，请使用：

```
myJLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/yourImageName.jpg"))); 
```

并将其包含在该按钮的[actionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)块中。

请参阅[此](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)以了解如何使用`Jbutton`.

# ios - 我使用 git_index_add_from_workdir 添加，但是为什么 git_index_entrycount 返回 0？

> ID：14291759
> 
> 赞同：0
> 
> 时间：2013-01-12T08:46:40.100
> 
> 标签：ios, libgit2

我使用 git_index_add_from_workdir 添加，但是为什么 git_index_entrycount 返回 0？还有一个问题，我从远程克隆了一个 git，而 git_index_entrycount 也返回 0？为什么？下面是我如何获得 IndexCount 的代码，我首先创建一个新的 repo，然后创建新的文件和文档

```
(IBAction)IndexInfo:(id)sender {    
git_index *index = NULL;
int ret = 0 ;
char out[41];
out[40] = '\0';
NSArray *array = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString *docPath = [array objectAtIndex:0];
NSString *dir = [docPath stringByAppendingPathComponent:@"efg/" ];
NSLog(@"dir:%@",dir);

git_repository *repo = NULL;
ret = git_repository_init(&repo, [dir UTF8String], 0);
NSLog(@"git_repository_init ret:%d", ret);
git_repository_index(&index, repo);
if(git_index_entrycount(index) == 0)
{
    NSLog(@"initial ok");
}
NSString *testPath = [dir stringByAppendingPathComponent:@"test00.txt"];
NSString *string = @"write String";
NSFileManager *fileManager = [NSFileManager defaultManager];
BOOL bres = [fileManager createFileAtPath:testPath contents:[string  dataUsingEncoding:NSUTF8StringEncoding] attributes:nil];
if(bres == NO)
{
    NSLog(@"create file error.");
}
ret = git_index_add_from_workdir(index, "test00.txt");
NSLog(@"git_index_add_from_workdir ret:%d", ret);

ret = git_index_read(index);
NSLog(@"index_read ret:%d", ret);

int ecount = git_index_entrycount(index);
if (!ecount)
    printf("Empty index\n");
NSLog(@"index ecount:%d",ecount);
for (int i = 0; i < ecount; ++i) {
    const git_index_entry *e = git_index_get_byindex(index, i);

    git_oid_fmt(out, &e->oid);

    printf("File Path: %s\n", e->path);
    printf("    Stage: %d\n", git_index_entry_stage(e));
    printf(" Blob SHA: %s\n", out);
    printf("File Mode: %07o\n", e->mode);
    printf("File Size: %d bytes\n", (int)e->file_size);
    printf("Dev/Inode: %d/%d\n", (int)e->dev, (int)e->ino);
    printf("  UID/GID: %d/%d\n", (int)e->uid, (int)e->gid);
    printf("    ctime: %d\n", (int)e->ctime.seconds);
    printf("    mtime: %d\n", (int)e->mtime.seconds);
    printf("\n");
}

git_index_free(index);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:38:31.303

`git_index_add_from_workdir()`更新索引的内存实例。更改不会保留在文件系统上（为了实现这一点，必须调用`git_index_write()`）。

调用`git_index_read()`会使用文件系统上存储的内容更新内存索引，从而丢弃任何“未保存”的更改。这解释了为什么最终的 entrycount 为零。

为了解决这个问题，要么删除对 的调用，要么在对的调用之前`git_index_read()`添加对的调用。`git_index_write()``git_index_read()`

# ios - iOS - 地图视图的自定义图形

> ID：14291760
> 
> 赞同：2
> 
> 时间：2013-01-12T08:46:50.967
> 
> 标签：ios, objective-c, map, mkmapview

我正在制作一个社交网络应用程序，并且有一次向用户展示了一张带有注释的地图。但是，我更愿意为我的地图视图使用自定义图形/图块/地形。如果您知道我的意思，我希望将一个不错的类似游戏的主题应用于我的应用程序。

这可能吗？显然不是使用本机 API，但是我可以使用第三方客户端吗？

我已经进行了先前的研究，但没有找到任何解决方案。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T08:58:17.953

我没有这方面的第一手经验，但它似乎符合您的要求。[地图盒 iOS SDK](http://mapbox.com/mobile/)。

# php - 如何发送动态值 通过表单获取价值

> ID：14291761
> 
> 赞同：0
> 
> 时间：2013-01-12T08:46:52.720
> 
> 标签：php, javascript, html, forms

我有一个**运行时间而不是恒定值的部分。我想发送里面的最新值**通过一个表格。****

 ****请让我知道如何发送当前运行值**通过形式。下面是我的部分，**

 **```
<div id="txt"></div> 
```

我有一个 Javascript 函数来显示

```
//..Inside the java script code...
var output = document.getElementById("txt");
startTime();
//for full code , please visit below link 
```

请看这个页面： http: [//www.chemfluence.org.in/sample.html](http://www.chemfluence.org.in/sample.html) ![在此处输入图像描述](../Images/d11534ceb531f0a56f035279045ad719.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:15:03.557

试试这个方法

```
 <div id="txt"></div>
  <form name='' id='' method='post'>
  <input type='text' name='getmytime' id='getmytime'/>
  <input type='button' name='subtime' id='subtime' value='Submit' onclick='getcurrenttime()'/> 
```

并且像这样修改你的脚本，

```
function startTime() {
    var now = new Date();
    var display = getVirtual(now);
    output.innerText = format(display);
    document.getElementById("getmytime").value=format(display);//insert the value to textbox
    setTimeout(startTime, 1000/factor - (now.getMilliseconds() % (1000/factor)));
}

function getcurrenttime() {
 alert(document.getElementById("getmytime").value);//get time onclick
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:51:46.037

您应该`<input type='hidden' name='something' id='something'>`与 div 一起添加并设置其值：

```
output.innerText = format(display);
outputSubmitter.value = format(display); 
```

...

```
var output = document.getElementById("txt");
var outputSubmitter = document.getElementById("something"); 
```

...

```
<form action="..." method="...">
  <div id="txt"></div>
  <input type='hidden' name='something' id='something' />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T09:00:35.730

只需在下面添加：

```
document.getElementById('txt').innerHTML = format(display); 
```******

# c# - 如何将 ComObject 转换为 ENVDTE.Project？

> ID：14291769
> 
> 赞同：2
> 
> 时间：2013-01-12T08:47:47.650
> 
> 标签：c#, envdte

我正在使用以下代码：

```
Object projObj = htProjects[selectedNode]; // htProjects is a Hashtable:key-project Name,value-ENVDTE.Project
Project selectedProject = (Project)projObj; 
```

我收到以下错误：

```
Unable to cast COM object of type 'System.__ComObject' to interface type 'EnvDTE.Project'. This operation failed because the QueryInterface call on the COM component for the interface with IID '{866311E6-C887-4143-9833-645F5B93F6F1}' failed due to the following error: No such interface supported (Exception from HRESULT: 0x80004002 (E_NOINTERFACE)). 
```

[我尝试按照此处](https://stackoverflow.com/questions/9354007/visual-studio-2008-publish-fails-cant-load-dll-envdte-dll)所述注册 DLLS，但似乎还有其他问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T08:54:57.607

找到了解决方案。一些哈希表条目将 ENVDTE.ProjectItems 作为值。所以需要检查。

代码：

```
 if (projObj is Project)
        {
            Project selectedProject = (Project)projObj;
            MessageBox.Show(selectedProject.FullName);
        }
        else if(projObj is ProjectItem)
        {
            ProjectItem selectedProject = (ProjectItem)projObj;
            MessageBox.Show(selectedProject.get_FileNames(1));
        } 
```

# java - 如何在 Liferay 中获取最新的日历事件

> ID：14291771
> 
> 赞同：1
> 
> 时间：2013-01-12T08:47:56.387
> 
> 标签：java, events, calendar, liferay-6

我想从 Liferay 的日历事件表中检索最新的两个事件。

我试过这个

```
List<CalEvent> cl = CalEventLocalServiceUtil.getCalEvents(CalEventLocalServiceUtil.getCalEventsCount()-2, CalEventLocalServiceUtil.getCalEventsCount()); 
```

我收到了两个事件，但我想要根据修改日期最新的两个事件。

如何根据修改日期获取最新的两个事件？

任何帮助或建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:50:20.207

在 service.xml 中添加该类型的语句

`<order by="desc"> <order-column name="modifieddate" /> </order>`

你会得到你的结果。

# java - 具有私有访问权限的静态方法的参数

> ID：14291776
> 
> 赞同：-1
> 
> 时间：2013-01-12T08:48:29.283
> 
> 标签：java, class, static

为什么我必须通过 Java 中的私有访问控制将参数传递给静态方法。

```
class Test extends Teacher
{
  int field = 123;

  private static void accessInstance(Test test)
  {
    System.out.println(test);
  }
} 
```

对于以下代码，它会*生成错误*

```
 private static void accessInstance()
  {
     System.out.println("Hi there");
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:51:58.017

因为静态方法不能访问实例值，只能访问静态值。因此，如果您希望静态方法访问实例字段的值，则必须将其作为参数传递。

最后，您最好考虑使该方法不是静态的，以便您可以直接从实例对象上调用它。

此外，上面的代码没有任何问题（至少不会编译）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T08:56:08.610

如果你的类是内部类并且不是静态的，编译器会给你一个错误，例如：

```
class X
{
    class Test
    {
        int field = 123;

        private static void accessInstance(Test test)
        {
            System.out.println(test);
        }
    }
} 
```

如果内部类是静态的，这将起作用：

```
 class X
{
    static class Test
    {
        int field = 123;

        private static void accessInstance(Test test)
        {
            System.out.println(test);
        }
    }
} 
```

我认为你应该更正你的帖子。

静态内部类意味着您可以在没有封闭外部类实例的实例的情况下实例化它。

> JLS 8.1.3。内部类和封闭实例
> 
> 内部类不能声明静态成员，除非它们是常量变量（第 4.12.4 节），或者发生编译时错误。

# php - 具有替代语法的相同控制结构的嵌套块

> ID：14291779
> 
> 赞同：0
> 
> 时间：2013-01-12T08:49:05.993
> 
> 标签：php, syntax

PHP中具有替代语法的相同控制结构的嵌套块？

以下代码段生成

```
syntax error, unexpected 'endforeach' (T_ENDFOREACH) 
```

最后一行。

```
 <?php foreach($search_results as $book): ?> 
        <tr>
            <td><?php echo $book['title']?></td>
            <td>
                <?php foreach($book["authors"] as $author)?>
                    <?php echo $author . ', '; ?>
                <?php endforeach; ?>
            </td>
        </tr>
        <?php endforeach; ?> 
```

我对嵌套`if`结构有同样的问题，但对不一样的嵌套块没有任何问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T08:53:02.173

`:`你在第二个 foreach 语句中忘记了

```
<?php foreach($book["authors"] as $author): ?>
                                          ^ 
```

# doxygen - Doxygen：对多个 \xrefitem 命令使用相同的列表

> ID：14291780
> 
> 赞同：1
> 
> 时间：2013-01-12T08:49:39.223
> 
> 标签：doxygen

我使用 xrefitem 和别名创建了 4 个自定义命令，每个命令都是我们项目的 4 位程序员之一的名字。我的想法是让一个人在他们想在代码中的特定点发表评论或提出问题时使用他们自己的名字作为命令，并跟踪相关页面下列表中的所有评论引用，例如错误和待办事项列表。

我想设置它，以便每个命令都会根据人名生成自己的唯一标题，但都会被添加到同一个列表中。

```
john   =\xrefitem john \"John says\" \"Comments\"
bob    =\xrefitem bob \"Bob says\" \"Comments\"
dave   =\xrefitem dave \"Dave says\" \"Comments\"
george =\xrefitem george \"George says\" \"Comments\" 
```

使用上面的别名，输出完全符合我的要求，但是每个命令都会为每个名称生成自己的 Comments 资源文件，而不是像我希望的那样添加到已经存在的资源文件中。

```
john   =\xrefitem comments \"John says\" \"Comments\"
bob    =\xrefitem comments \"Bob says\" \"Comments\"
dave   =\xrefitem comments \"Dave says\" \"Comments\"
george =\xrefitem comments \"George says\" \"Comments\" 
```

如上所述，为每个使用一个单数键，给我一个我想要的单数资源文件，但只使用代码中调用的第一个命令的标题（例如，调用 4 个名称中的任何一个都会产生“John says” ）。

我是否可以在某处指定如果列表 xrefitem 设置为写入已经存在，只需添加到它而不是创建一个新的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:27:44.563

部分标题和列表都耦合到相同的标识符，因此目前无法实现您想要的。

如果您希望将此作为官方功能请求，请在 doxygen 的错误跟踪器中提交错误报告，并将严重性设置为增强。

# html - Lightswitch HTML 客户端默认插入屏幕变暗（禁用所有控件）

> ID：14291784
> 
> 赞同：1
> 
> 时间：2013-01-12T08:50:53.807
> 
> 标签：html, client, screen, visual-studio-lightswitch

我正在创建一个简单的灯开关应用程序来收集用户的一些表单数据。我正在使用 VS 2012 的最新**HTML 客户端**版本。问题出在插入屏幕上，如果我默认创建它并将其链接到简单的服务器数据对象，则在浏览器中查看时它会变暗。所有控件都被禁用，包括保存按钮。如果我创建一个 List All 屏幕并从那里触发插入屏幕，它会在启用所有控件的情况下显示正常。这个想法是我希望插入屏幕成为应用程序的主屏幕。我只会从用户那里收集一些信息，然后将他重定向到其他地方。那里的所有演示/示例都不包括作为主屏幕的插入屏幕

顺便说一句，silverlight 客户端不会发生这种模式

问候你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T18:17:33.813

AddEditScreen 接收实体将要添加或编辑的参数，如果是新记录，它需要该属性中的 myapp.activeDataWorkspace.ApplicationData.YourEntities.addNew() 。YourEntities 是您的实体的复数名称。如果您使用的是外部数据库而不是内部数据库，ApplicationData 会发生变化。

当您在启动时使用“设置为主屏幕”调用屏幕时，它会运行但它无法接收它需要操作的记录，因此它将屏幕显示为禁用。

唉，我不知道您需要在哪里编写代码才能使其工作。对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T17:19:23.337

在 default.html 中，您可以添加类似这样的内容。

```
msls._run().then(
                function () {
                    var myapp = msls.application;
                    myapp.showScreen("AddDec", null, {
                        beforeShown: function (addEditScreen) {                            
                            var newDC = new myapp.Dec();
                            addEditScreen.Dec = newDC;
                        },
                        afterClosed: function (addEditScreen, navigationAction) {

                        }
                    });

                },
                function failure(error) {
                    alert(error);
                }
            ); 
```

这个对我有用。

# iphone - ios中的多个webview

> ID：14291788
> 
> 赞同：4
> 
> 时间：2013-01-12T08:51:12.417
> 
> 标签：iphone, ios, objective-c, ipad

我如何使用三个 webview 来显示多个 html 页面，比如在滚动视图中显示 50 个。任何示例代码请参考我。我目前的代码是这样的。它会导致内存泄漏，我当然知道这是一个愚蠢的问题。我坚持这个超过2天。请帮我。

```
-(void)AddWebviews
{
    [m_CtrlActivity stopAnimating];
    m_CtrlLblProgress.hidden=YES;
    int divisor = WebViewAddCount % 3;
    MagazineAppDelegate     *appdelegate              = (MagazineAppDelegate *)[[UIApplication sharedApplication]delegate];

    IstructPageDetails *objPageDetails=[appdelegate.m_mutarrPageDetails objectAtIndex:WebViewAddCount];
    if (divisor==0)
    {
         m_CtrlWebViewone=[[UIWebView alloc]initWithFrame:CGRectMake(768*WebViewAddCount,0,768,1024)];
        // m_CtrlWebView.scrollView.delegate=self;
        // m_CtrlWebView.delegate=self;
        NSString *m_strMagazineFolder=[[GlobalFunctions GetCachesFolder]stringByAppendingPathComponent:MAGAZINE_FOLDER_NAME];
        NSString *finalpath=[NSString stringWithFormat:@"%@/%@/%@/%@",m_strMagazineFolder,appdelegate.m_StrSelectedMagazineUrl,objPageDetails.m_strFolderName, objPageDetails.m_strPageName ];
        NSURL *url = [NSURL fileURLWithPath:finalpath isDirectory:NO];

        [m_CtrlWebViewone loadRequest:[NSURLRequest requestWithURL:url]];

        m_CtrlWebViewone.scrollView.pagingEnabled=YES;
        m_CtrlWebViewone.scrollView.bounces=NO;
        m_CtrlWebViewone.scalesPageToFit=YES;
        m_CtrlWebViewone.backgroundColor=[UIColor clearColor];

        self.m_CtrlScrollview.pagingEnabled=YES;
        [self.m_CtrlScrollview addSubview:m_CtrlWebViewone];
        [m_CtrlWebViewone release];

    }
    else if(divisor==1)
    {
         m_CtrlWebViewtwo=[[UIWebView alloc]initWithFrame:CGRectMake(768*WebViewAddCount,0,768,1024)];
        // m_CtrlWebView.scrollView.delegate=self;
        // m_CtrlWebView.delegate=self;
        NSString *m_strMagazineFolder=[[GlobalFunctions GetCachesFolder]stringByAppendingPathComponent:MAGAZINE_FOLDER_NAME];
        NSString *finalpath=[NSString stringWithFormat:@"%@/%@/%@/%@",m_strMagazineFolder,appdelegate.m_StrSelectedMagazineUrl,objPageDetails.m_strFolderName, objPageDetails.m_strPageName ];
        NSURL *url = [NSURL fileURLWithPath:finalpath isDirectory:NO];

        [m_CtrlWebViewtwo loadRequest:[NSURLRequest requestWithURL:url]];

        m_CtrlWebViewtwo.scrollView.pagingEnabled=YES;
        m_CtrlWebViewtwo.scrollView.bounces=NO;
        m_CtrlWebViewtwo.scalesPageToFit=YES;
        m_CtrlWebViewtwo.backgroundColor=[UIColor clearColor];

        self.m_CtrlScrollview.pagingEnabled=YES;
        [self.m_CtrlScrollview addSubview:m_CtrlWebViewtwo];
        [m_CtrlWebViewtwo release];
    }
    else if(divisor==2)
    {
         m_CtrlWebViewthree=[[UIWebView alloc]initWithFrame:CGRectMake(768*WebViewAddCount,0,768,1024)];
        // m_CtrlWebView.scrollView.delegate=self;
        // m_CtrlWebView.delegate=self;
        NSString *m_strMagazineFolder=[[GlobalFunctions GetCachesFolder]stringByAppendingPathComponent:MAGAZINE_FOLDER_NAME];
        NSString *finalpath=[NSString stringWithFormat:@"%@/%@/%@/%@",m_strMagazineFolder,appdelegate.m_StrSelectedMagazineUrl,objPageDetails.m_strFolderName, objPageDetails.m_strPageName ];
        NSURL *url = [NSURL fileURLWithPath:finalpath isDirectory:NO];

        [m_CtrlWebViewthree loadRequest:[NSURLRequest requestWithURL:url]];

        m_CtrlWebViewthree.scrollView.pagingEnabled=YES;
        m_CtrlWebViewthree.scrollView.bounces=NO;
        m_CtrlWebViewthree.scalesPageToFit=YES;
        m_CtrlWebViewthree.backgroundColor=[UIColor clearColor];

        self.m_CtrlScrollview.pagingEnabled=YES;
        [self.m_CtrlScrollview addSubview:m_CtrlWebViewthree];
        [m_CtrlWebViewthree release];
    }

    WebViewAddCount++;

    [self.m_CtrlScrollview setContentSize:CGSizeMake(WebViewAddCount*768, 1004)];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:59:19.287

如[UIWebView 类参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html)中所述：

> 重要提示：您不应该在 UIScrollView 对象中嵌入 UIWebView 或 UITableView 对象。如果这样做，可能会导致意外行为，因为两个对象的触摸事件可能会混淆并错误处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:28:47.227

一次在滚动视图上添加多个 webview 不是一个好主意，这可能会导致内存泄漏，然后应用程序崩溃。所以最好的方法是在必要时加载 webview。我建议你有两个选项......

1) Apple 有一个名为[UIPageviewController](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReferenceClassRef.pdf)的框架。您只需将转换类型 UIPageViewControllerTransitionStylePageCurl 控件更改为 UIPageViewControllerTransitionStylePageSwipe。

2）使用[贝克框架](https://github.com/germanocaldeira/baker)。

ARC 和非 ARC 代码均可用。

希望它可以帮助你:)

# javascript - 单击按钮时返回键码

> ID：14291789
> 
> 赞同：1
> 
> 时间：2013-01-12T08:51:19.797
> 
> 标签：javascript

> **可能重复：**
> [用javascript模拟左右箭头键事件](https://stackoverflow.com/questions/5516600/simulate-left-and-right-arrow-key-event-with-javascript)

我希望当我单击一个按钮时会发出一个键码。例如，网页上某处有一个按钮。当您单击此按钮时，将`j`发出密钥代码（或者可能是快捷方式`cmd+j`）。我怎样才能做到这一点？

# python - 多进程：识别队列中的进程

> ID：14291803
> 
> 赞同：2
> 
> 时间：2013-01-12T08:53:16.250
> 
> 标签：python, python-3.x, multiprocessing

我有一个多进程程序，可以获取所有响应时间不同的网页。结果按照先进先出规则存储在进程队列中。我想通过进程号识别队列中的结果。这是我的测试平台，也是迄今为止我使用两个队列所取得的成果。还有什么办法吗？我曾尝试使用全局列表来存储结果，但两个进程似乎并不共享相同的内存空间。

```
#!/usr/bin/python3.2

import time
from multiprocessing import Process, Queue

def myWait(processNb, wait, resultQueues):
    startedAt = time.strftime("%H:%M:%S", time.localtime())
    time.sleep(wait)
    endedAt = time.strftime("%H:%M:%S", time.localtime())
    resultQueues[processNb].put('Process %s started at %s wait %s ended at %s' % (processNb, startedAt, wait, endedAt))

# queue initialisation
resultQueues = [Queue(), Queue()]

# process creation arg: (process number, sleep time, queue)
proc =  [
    Process(target=myWait, args=(0, 2, resultQueues,)),
    Process(target=myWait, args=(1, 1, resultQueues,))
    ]

# starting processes
for p in proc:
    p.start()

for p in proc:
    p.join()

# print results
print(resultQueues[0].get())
print(resultQueues[1].get()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:42:50.493

不，当您使用时，进程*根本*不会共享地址空间`multiprocessing`- 这与`threading`所有进程共享内存的位置不同。这意味着您想要在进程之间共享的任何内容都必须通过进程之间的显式连接，例如`Queue`.

如果您想要组合所有进程的结果，您实际上可以只使用一个结果队列——多个进程（和多个线程）一次访问它们是非常安全的。然后，您的所有工作人员都可以将他们的结果插入到该队列中，并且主进程可以在它们进入时读取它们。

这是您将上面的代码修改为使用单个队列：

```
#!/usr/bin/python3.2

import time
from multiprocessing import Process, Queue

def myWait(processNb, wait, results):
    startedAt = time.strftime("%H:%M:%S", time.localtime())
    time.sleep(wait)
    endedAt = time.strftime("%H:%M:%S", time.localtime())
    results.put('Process %s started at %s wait %s ended at %s' % (processNb, startedAt, wait, endedAt))

# queue initialisation
results = Queue()

# process creation arg: (process number, sleep time, queue)
proc =  [
    Process(target=myWait, args=(0, 2, results,)),
    Process(target=myWait, args=(1, 1, results,))
    ]

# starting processes
for p in proc:
    p.start()

for p in proc:
    p.join()

# print results
print(results.get())
print(results.get()) 
```

如果您想在不读取字符串的情况下识别每个结果的来源过程，您可以轻松地将其添加为 2 元组。这将更改代码如下（我只显示了更改的部分）：

```
import time
import multiprocessing
import queue

def myWait(processNb, wait, results):
    startedAt = time.strftime("%H:%M:%S", time.localtime())
    time.sleep(wait)
    endedAt = time.strftime("%H:%M:%S", time.localtime())
    results.put((processNb, 'Process %s started at %s wait %s ended at %s' % (processNb, startedAt, wait, endedAt)))

# queue initialisation
results = multiprocessing.Queue()

# process creation arg: (process number, sleep time, queue)
proc =  [
    multiprocessing.Process(target=myWait, args=(0, 2, results,)),
    multiprocessing.Process(target=myWait, args=(1, 1, results,))
    ]

# starting processes
for p in proc:
    p.start()

for p in proc:
    p.join()

# print results
while True:
    try:
        processNb, message = queue.get_nowait()
        print "Process %d sent: %s" % (processNb, message)
    except queue.Empty:
        break 
```

这有帮助吗？

编辑：正如另一位响应者非常正确地指出的那样，传递更多结构化数据可能比传递字符串更好，但出于解释目的，我试图让我的示例与您的示例相似。实际上，为了使将来的更改更容易，我会使用可以按名称而不是元组索引的东西（因此您不限于仅将项目添加到末尾）。

您可以使用自己的类，也可以简单地使用[collections.namedtuple](http://docs.python.org/3.2/library/collections.html#collections.namedtuple)来完成这项工作（如果您想稍后扩展已经使用元组来使用名称的代码，后者特别有用，允许逐步迁移）。

请记住（据我所知）您可以将任何可以[腌制](http://docs.python.org/3.2/library/pickle.html)的东西传递给队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:41:32.057

*   `mp.Process`可以给 s 一个`name`参数，`myWait`然后目标函数可以使用`mp.current_process().name`. 所以没有必要通过`processNb`。
*   将进程间通信保持在最低限度。无需通过队列传递格式化字符串，只需传递将在元组中更改的字符串部分：`(name, wait, startedAt, endedAt)`。

* * *

所以，你可以用这样的一个队列来做到这一点：

```
import time
import multiprocessing as mp

def myWait(wait, resultQueue):
    startedAt = time.strftime("%H:%M:%S", time.localtime())
    time.sleep(wait)
    endedAt = time.strftime("%H:%M:%S", time.localtime())
    name = mp.current_process().name
    resultQueue.put(
        (name, wait, startedAt, endedAt))

# queue initialisation
resultQueue = mp.Queue()

# process creation arg: (process number, sleep time, queue)
proc =  [
    mp.Process(target=myWait, name = '0', args=(2, resultQueue,)),
    mp.Process(target=myWait, name = '1', args=(1, resultQueue,))
    ]

# starting processes
for p in proc:
    p.start()

for p in proc:
    p.join()

# print results
for p in proc:
    name, wait, startedAt, endedAt = resultQueue.get()
    print('Process %s started at %s wait %s ended at %s' %
          (name, startedAt, wait, endedAt)) 
```

# wordpress-theming - 如何在 WordPress 中为特定类别的每页显示一个类别

> ID：14291805
> 
> 赞同：0
> 
> 时间：2013-01-12T08:54:10.337
> 
> 标签：wordpress-theming, wordpress

我对 WordPress 相当陌生。我正在开发一个具有自定义主题的网站（我正在尝试通过编写一个来学习）。该网站是关于汽车的，有自行车、汽车、直升机等类别。我必须在导航菜单上显示其中一个类别（自行车）。现在，当我单击此菜单时，它应该将我带到一个单独的页面，该页面仅显示有关该`bikes`类别的帖子。在这个页面中，我想每页显示一篇文章。所以我做了一个`category-8.php`（`8`作为自行车类别的ID）。所以我把下面的代码放在那里：

```
<?php query_posts( array(  'cat' => 8, 'posts_per_page' => 1  ) ) ?>
<?php if ( have_posts() ) : ?>

   <?php while ( have_posts() ) : the_post() ?>
      <h3><?php wp_title(); ?></h3>
      <h6>BY <?php the_author(); ?> |<?php the_time('F jS, Y') ?></h6>
      <p> <?php the_content(); ?> </p>
   <?php endwhile; // end of the loop. ?>

<p style="float:left;"><?php next_post_link('%link &laquo; Newer Entries',true) ?></p>
<p style="float:right;"><?php previous_post_link('Older Entries &raquo %link;',true) ?></p> 

<?php endif; // end of the loop. ?> 
```

所以这里的问题是：

1.  帖子标题说`Bikes`，即使我的帖子标题`Hot wheels`。但是，它正确显示了帖子内容。

2.  `previous_post_link()`提供到另一个页面的链接。我希望这能提供指向同一页面但较旧类别的链接。请不要链接到该类别页面`localhost/myBlog?cat=8`

而previous_post_link 指向`localhost/myBlog?page=114`

为什么会这样？我在这里做错了吗？

更重要的是，我是否需要自定义定义`page.php`or`single.php`而不是工作`category-8.php`？

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:02:29.667

[wp_title()](http://codex.wordpress.org/Function_Reference/wp_title)用于文件中的`<title>`标签`header.php`。你想要的是[the_title()](http://codex.wordpress.org/Function_Reference/the_title)。

[next_post_link()](http://codex.wordpress.org/Function_Reference/next_post_link)和[previous_post_link()](http://codex.wordpress.org/Function_Reference/previous_post_link)仅用于单个帖子，而不用于类别页面。

# c# - 更改多个复选框值

> ID：14291807
> 
> 赞同：-1
> 
> 时间：2013-01-12T08:54:30.423
> 
> 标签：c#, checkbox

我有 2 个表格。第二种形式 (frmConvert) 有 3 个复选框。我可以使用以下方法更改一个复选框的值：-

表格1

```
f.CheckBoxChecked = true; 
```

(frmConvert)

```
public bool CheckBoxChecked
{
get { return checkBox1.Checked; }
set { checkBox1.Checked = value; }
} 
```

我想知道的是，如果我有 3 个复选框（checkBox1、checkBox2 和 checkBox3），我怎样才能在 form1 上有单独的代码行，以便我可以单独更改每个复选框的值，而不需要每个单独的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:20:35.647

做

```
public void doCheck(int index,bool value)
    {

        switch (index)
        {
            case 1:
                checkBox1.Checked = value;
                break;
            case 2:
                checkBox2.Checked = value;
                break;
            case 3:
                checkBox3.Checked = value;
                break;
            default:
                break;
        }

    } 
```

并使用：

```
Form3 f = new Form3();
f.doCheck(2, true);
f.doCheck(3, false);
f.ShowDialog(); 
```

# c# - 在 TreeView 中一次检查一个节点

> ID：14291808
> 
> 赞同：0
> 
> 时间：2013-01-12T08:54:43.037
> 
> 标签：c#, winforms, treeview, treenode, oncheckedchanged

我`TreeView`从数据库中填充了很多节点，每个节点可能有一些子节点，并且没有像 2 个深度这样的固定角色，它可能非常深。

想象一下，我希望我一次`TreeView` `CheckBoxes`只检查一个节点。我已经尝试过事件，但它们陷入了永远的循环，我该怎么办？`RadioButtons``TreeView``AfterCheck``BeforeCheck`

我想保持我选中的节点 CHECKED 并取消选中所有其他节点，但我不能。等待你的聪明点。谢谢。

这是我尝试过但最终出现`StackOverFlow`异常的代码，我想它可能是在说去[StackOverflow](http://www.stackoverflow.com)上检查它：D

```
private void tvDepartments_AfterCheck(object sender, TreeViewEventArgs) 
{
   List<TreeNode> nodes = new List<TreeNode>();
   if (rdSubDepartments.Checked)
       CheckSubNodes(e.Node, e.Node.Checked);
   else if (rdSingleDepartment.Checked)
   {
       foreach (TreeNode node in tvDepartments.Nodes)
       {
           if (node != e.Node)
               node.Checked = false;
       }
   }
}

public void CheckSubNodes(TreeNode root, bool checkState)
{
    foreach (TreeNode node in root.Nodes)
    {
        node.Checked = checkState;
        if (node.Nodes.Count > 0)
            CheckSubNodes(node, checkState);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T09:41:12.890

Mahdi 这应该是[TreeView.AfterCheck 事件中的 Ref](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.aftercheck.aspx)

```
// Updates all child tree nodes recursively. 
private void CheckAllChildNodes(TreeNode treeNode, bool nodeChecked)
{
   foreach(TreeNode node in treeNode.Nodes)
   {
      node.Checked = nodeChecked;
      if(node.Nodes.Count > 0)
      {
         // If the current node has child nodes, call the CheckAllChildsNodes method recursively. 
         this.CheckAllChildNodes(node, nodeChecked);
      }
   }
}

// NOTE   This code can be added to the BeforeCheck event handler instead of the AfterCheck event. 
// After a tree node's Checked property is changed, all its child nodes are updated to the same value. 
private void node_AfterCheck(object sender, TreeViewEventArgs e)
{
   // The code only executes if the user caused the checked state to change. 
   if(e.Action != TreeViewAction.Unknown)
   {
      if(e.Node.Nodes.Count > 0)
      {
         /* Calls the CheckAllChildNodes method, passing in the current 
         Checked value of the TreeNode whose checked state changed. */ 
         this.CheckAllChildNodes(e.Node, e.Node.Checked);
      }
   }
} 
```

# javascript - 最小化 DOM 访问以获得响应更快的页面

> ID：14291811
> 
> 赞同：0
> 
> 时间：2013-01-12T08:54:53.667
> 
> 标签：javascript, html, dom, tree-nodes

使用 JavaScript 访问 DOM 元素很慢，因此为了获得响应速度更快的页面，我们必须执行以下操作

1.  缓存对访问元素的引用

2.  “离线”更新节点，然后将它们添加到树中

3.  避免使用 JavaScript 修复布局

谁能告诉我如何做前两件事？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:43:53.033

这些是一些抽象的问题，甚至不一定相互关联。

* * *

**1.缓存访问元素的引用**

缓存引用是一种*实践*，有时是*必要*的。在本地（或者，嗯，全局）维护对元素的引用的*行为*相当简单。当使用 DOM 方法时`document.createElement()`，通常会保存一个变量。这是一个可以*缓存*供以后使用的参考。`document.getElementById`返回对元素`document.getElementsByTagName`的引用，返回引用列表，如`document.querySelectorAll`等。

* * *

**2.“离线”更新节点，然后将它们添加到树中**

当您说“离线”时，我不太确定您所引用的上下文。这是在将任何元素（包括类似的字符串`<div>`）添加到 DOM 之前吗？

与元素交互的三种主要方式：

*   `document.createElement`（与`elem.appendChild`）

    在遥远的过去有一天，这是用你的页面内容胡闹的*惯用*方式。它吸引了“Web 开发人员”社区的子集，他们对类似 API 的编程方式来处理和处理 DOM 及其居民感到满意；它几乎*看起来像真正的代码*，很难的东西。

    当然，有些代码有点杂乱无章，迭代地创建和附加并附加到那些代码上，对那些*不需要生成它*的人来说，这看起来很酷。

    如果你很聪明[`cloneNode`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-3A0ED0A4)，你可以用 DOM 节点得到更合理的结果。但我*认为*直到最近几年，`cloneNode`这并不是一个很好的选择。我可能记错了，货物崇拜和所有。如我错了请纠正我。

    然后 IE 出现并给了我们...

*   [`elem.innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)

    惊喜！这是*不标准的，伙计*。他们怎么*可能*？唯一的问题是，*它真的很快*。[Killer-fast](http://www.quirksmode.org/dom/innerhtml.html)（像 IE6/7 一样从未发生过，我们都想忘记）。

    DOM 是……无论如何，浏览器很慢而且效率低下，而且*无论如何都没有真正运行真正的代码*，所以 DOM 的缓慢是可以容忍的。但是，不管出于什么原因，`innerHTML`进入了 stage-left 和 groovy，老兄，它*比 DOM 方法快*。优雅，以“我喜欢整天盯着标记而不是 DOM 方法”的方式。

    最终，每个人​​都加入了`.innerHTML`潮流，现在它已成为事实上的标准。它很快，对吧？

    好。依靠。做`elem.innerHTML = "<p>Hey!</p>"`的很快，是的。也是`elem.innerHTML = '<p>Hey!</p><p>Yo!</p><p>What!</p>'`。所以人们很自然地认为，它是一种财产，让我们尽情狂欢吧

    ```
    for 1..500 element.innerHTML += '<p>Medusa!</p>'; 
    ```

    那里的伪代码。问题出在哪里？对我们的冲刺朋友`+=`来说就像*氪石*`innerHTML`， . 疯狂的坏主意，从不做，甚至不去想它的坏主意。为什么？AFAIK，它与`.innerHTML`攻击内部内容的方式有关，所以当你 时`elem.innerHTML += '...mayhem...'`，你每次都在“拆除”DOM。或者其他的东西。这让 DOM 哭泣。

    不要让 DOM 哭泣。

*   [`documentFragment`](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-B63ED1A3)

    那么在某个时候（它一直都在那里吗？DOM Level 3，如果这意味着什么的话），`documentFragment`让场景崩溃了。不过， MDN 的[*简短*说明](https://developer.mozilla.org/en-US/docs/DOM/DocumentFragment)对此进行了总结。它`Node`与主 DOM 是分开的。就像你放东西的小盒子，然后把它移到爸爸 DOM。

    就*速度*而言，它大部分都在后面`.innerHTML`，而且都是 DOM 程序和东西。漂亮。

* * *

在缓存方面，很大程度上与您如何构建代码和使用范围来发挥自己的优势有关。举个例子：

```
window.addEventListener('load', function () {
  var target = document.getElementById('target'),
      source = document.getElementById('source'),
      ...

  source.addEventListener('click', function () {
    var words = source.getElementsByTagName('span'),
        total = words.length,
        word;

    while (word = words[--total]) {
      target.appendChild(word);
    }
  });

}); 
```

[http://jsfiddle.net/userdude/T6YLZ/](http://jsfiddle.net/userdude/T6YLZ/)

我将`target`and保留在处理程序的范围`source`之上`click`，以便稍后访问它们时，我已经拥有它们。由于我没有添加`words`到`source`until `window.onload`，所以我不会得到所有带有to的`span`元素，直到发生。`words``target``source.click`

您似乎`documentFragment`在用您的术语描述 s 。他们很酷。我只是最近才遇到它们，尽管显然对于那些知道的人来说，它们似乎已经在那里呆了几年或更长时间。因此，如果您是其中之一，请在插入非片段 DOM 之前`must.use.dom.methods(now)`使用s 。`documentFragment`

但是...请记住，有时您会使用`elemn.innerHTML`，因为您正在添加标记。也许你有模板、AJAX 响应标记等等。

只是不要`+=`在`elem.innerHTML`ing 时。

# javascript - 如何防止类名应用于 Div，或者，清除？

> ID：14291814
> 
> 赞同：-1
> 
> 时间：2013-01-12T08:55:27.567
> 
> 标签：javascript

真是个难题，如何正确设置 className 来清除它。就此而言，我不确定我是否应该这样做，但情况就是这样。

window.onload 函数成功地使用 *addEventListener*处理这些事件，[ webkitAnimationEnd & mouseover ] 然后我利用它为 Divs 设置 className。到目前为止一切都很好，但有时我想显示那个 window.onload 函数的 Div OUTSIDE。因此，单击带有 an 的按钮`onclick="wazzupClyde();`会调用以下函数。

因为我在 window.onload 脚本之后拥有它，所以我认为它应该是负责的脚本，并且想要取消 div 上的任何 className，因此用于 Div 的 CSS 声明正常或默认设置 div 的样式。好吧，这似乎是一个计划……但正如此处代码后所述，它是嗯……有缺陷的，是的。

```
 <script type="text/JavaScript">
    function wazzupClyde(){
        var Bid = document.getElementById("Bid");
        Bid.className = (window.WebKitAnimationEvent) ? "x";
    }
    wazzupClyde();
    </script> 
```

在我的 Chrome JavaScript 控制台中说调试器：

试过：

```
Bid.className = (window.WebKitAnimationEvent) ? ""; 
```

> Uncaught TypeError: Unexpected token ;

并且

```
Bid.className = (window.WebKitAnimationEvent) ? "x":""; 
```

> 未捕获的类型错误：无法将属性“className”设置为 null

并且

```
Bid.className = (window.WebKitAnimationEvent) ? "x"; 
```

> Uncaught TypeError: Unexpected token ;

加上这个

```
Bid.className = "": 
```

> 未捕获的类型错误：意外的令牌：

* * *

```
 <div id="SomeChickenShitz"class="hover">
   <form action="<?php echo $PHP_SELF; ?>" method="post">
      <input type="hidden" name="OhGoodOneBubba" value="<?php echo $ForSaleCompetentEWE;?>"/>
        <button id="Bid"type="submit"class="hover" onclick="wazzupClyde();">WHY?</button>
       </form>
</div> 
```

当我尝试 Bid.removeAttribute('className'); 收到有关“无法调用 null 的方法 'removeAttribute'”的投诉，所以我怀疑问题出在代码设计上……所以，回顾一下。我怎样才能阻止 Div *Bid* 应用 className，或者清除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:22:48.170

> 无法将属性“className”设置为 null

它抱怨那`Bid`是空的。`id`显然，在该函数运行时，您没有属性为“Bid”的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:24:21.683

元素`id = 'Bid'`不在您当前的 DOM 中。

声明后不应调用该函数。只需使用以下代码：

```
<script type="text/JavaScript">
    function wazzupClyde(){
        var Bid = document.getElementById("Bid");
        Bid.className = (window.WebKitAnimationEvent) ? "x" : "";
    }
</script> 
```

# sqlite - 通过 SQLite 选择前一天

> ID：14291818
> 
> 赞同：0
> 
> 时间：2013-01-12T08:55:44.703
> 
> 标签：sqlite, date, time

我需要编写一个查询，从今天开始计算前一天/后一天在表中有记录，然后获取当天的所有行。

插入数据时，日期可能会有所不同。例如，仅仅因为它是星期二并不意味着前一天是星期一。前一天可能是上周的星期日、星期六，甚至是星期三。

我试图弄清楚如何最好地选择有记录的前一天和第二天（不是今天）。然后，在同一个查询中，获取当天的所有行。

我不知道这是否有功能或任何东西，我很困惑。我知道如何用 2 个查询来做到这一点，但我想用 1 来做到这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:03:48.960

以下查询返回最近一天的事件，无论是过去还是未来：

```
select 'Nearest in the future';

select * from job where schedule = (
  select schedule from job where schedule > date('now')
         order by schedule limit 1
);

select 'Nearest in the past';

select * from job where schedule = (
  select schedule from job where schedule < date('now')
         order by schedule desc limit 1
); 
```

给定示例架构：

```
create table if not exists job (
  id integer primary key not null,
  name text,
  schedule text
);

insert into job (name, schedule) values ( 'foo', date('now', '+32 days') );
insert into job (name, schedule) values ( 'bar', date('now', '+12 days') );
insert into job (name, schedule) values ( 'baz', date('now', '+12 days') );
insert into job (name, schedule) values ( 'woo', date('now', '+55 days') );
insert into job (name, schedule) values ( 'qoo', date('now', '-32 days') );
insert into job (name, schedule) values ( 'bzz', date('now', '-18 days') );
insert into job (name, schedule) values ( 'frr', date('now', '-18 days') );
insert into job (name, schedule) values ( 'trr', date('now', '-55 days') ); 
```

`ORDER BY`结合使用`LIMIT 1`就可以了。用于`>`最近的将来和`<`最近的过去（并颠倒排序）。您可能希望在`schedule`列上添加索引以提高性能。

# jquery - 只要用户将鼠标放在另一个 div 上，就可以防止 div 消失

> ID：14291821
> 
> 赞同：0
> 
> 时间：2013-01-12T08:56:09.300
> 
> 标签：jquery

当用户将光标放在 时，以下代码使`.fixed-toolbar`、`.fixed-submit`和出现和消失：`.fixed-toggle``.fixed-toolbar`

```
 $(document).on("mouseover", ".fixed-container", function(){
    $('.fullscreen .fixed-toolbar').css('visibility', 'visible');
    $(".fullscreen .fixed-submit").css('visibility', 'visible');
    $(".fullscreen .fixed-toggle .exit-fullscreen").css('visibility', 'visible');
    setTimeout(function(){ 
      $(".fullscreen .fixed-toolbar").css('visibility', 'hidden');
      $(".fullscreen .fixed-submit").css('visibility', 'hidden');
      $(".fullscreen .fixed-toggle .exit-fullscreen").css('visibility', 'hidden');
    }, 3000 ); 
  }); 
```

即使用户将鼠标保持在`.fixed-toolbar`. 只要用户打开鼠标，我想防止 div 消失`.fixed-toolbar`（并且仅在光标离开后 3 秒使其消失`.fixed-toolbar`）。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:59:42.873

尝试

```
$(document).on("mouseover", ".fixed-container", function(){
    $('.fullscreen .fixed-toolbar, .fullscreen .fixed-submit, .fullscreen .fixed-toggle .exit-fullscreen').fadeIn();
}).on('mouseleave', '.fixed-container', function(){
    setTimeout(function(){
        $('.fullscreen .fixed-toolbar, .fullscreen .fixed-submit, .fullscreen .fixed-toggle .exit-fullscreen').fadeOut();
    }, 3000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:11:38.190

```
$(document).on("mouseover", ".fixed-container", function(){
    $('.fullscreen .fixed-toolbar, .fullscreen .fixed-submit, .fullscreen .fixed-toggle .exit-fullscreen').css('visibility', 'visible');
});
$(document).on("mouseout",".fixed-container",function(){
    setTimeout(function(){
    $(".fullscreen .fixed-toolbar, .fullscreen .fixed-submit, .fullscreen .fixed-toggle .exit-fullscreen").css('visibility', 'hidden');
    },3000);
}); 
```

或者，如果您在 CSS 中使用`display:none;`而不是：`visibility:hidden;`

```
$(document).on("mouseover", ".fixed-container", function(){
    $(".fixed-toolbar, .fixed-submit, .exit-fullscreen").show();
});
$(document).on("mouseout",".fixed-container",function(){
    setTimeout(function(){
        $(".fixed-toolbar, .fixed-submit, .exit-fullscreen").hide();
    },1000);
}); 
```

或者使用一些内置的 jQuery 效果：

```
$(document).on("mouseover", ".fixed-container", function(){
    $(".fixed-toolbar, .fixed-submit, .exit-fullscreen").slideDown();
});
$(document).on("mouseout",".fixed-container",function(){
    setTimeout(function(){
        $(".fixed-toolbar, .fixed-submit, .exit-fullscreen").slideUp();
    },1000);
}); 
```

# ruby-on-rails - rails活动记录计数方法不计算行数

> ID：14291824
> 
> 赞同：0
> 
> 时间：2013-01-12T08:56:24.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我必须计算查询返回的结果数。我知道有一个 count 方法可以计算返回的结果数，但它不起作用。这是我的查询：

```
@oi_report = IncidentDetailsReport.find_by_case_id(id).count 
```

我得到了这个例外：

```
undefined method `count' for #<IncidentDetailsReport:0x745def8> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:05:05.107

您应该使用以下**查询**

```
@oi_report = IncidentDetailsReport.where('case_id=?',id).count 
```

在这种情况下不要使用“find_by_case_id”

这将解决您的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T09:07:17.817

显然`IncidentDetailsReport.find_by_case_id(id)`返回一个类型为`IncidentDetailsReport`没有方法的对象`count`，这是因为在添加到查询时`find_by_case_id`返回一个对象而不是关系。`LIMIT 1`

而不是`find_by_*`你可以使用`where`，比如：

`IncidentDetailsReport.where(:case_id => id).count`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T09:07:31.727

根据[文档](http://apidock.com/rails/ActiveRecord/Calculations/ClassMethods/count)，您可以通过 count 传递条件。所以尝试这样做：

```
IncidentDetailsReport.count(:conditions => "id = "+id) 
```

否则你能用`length`吗？

# java - SQL - 从 avg 中选择 id

> ID：14291825
> 
> 赞同：2
> 
> 时间：2013-01-12T08:56:32.107
> 
> 标签：java, sql, database, hsqldb

我的桌子是：

```
CREATE TABLE Rating
(
    rid INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    mid INTEGER FOREIGN KEY REFERENCES Movie(movieId) ON DELETE CASCADE, 
    uid INTEGER FOREIGN KEY REFERENCES User(id) ON DELETE CASCADE,
    rating INTEGER NOT NULL, 
); 
```

我想选择平均评分最高的中档：

```
select avg(r.rating) from rating r 
```

女巫返回平均值。我想返回平均评分最高的中档。任何想法如何做到这一点？

**> 更新**

另外两个表：

```
CREATE TABLE User(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    passwordhash VARCHAR(100) NOT NULL,
    fullname VARCHAR(50) NOT NULL,
    birthday DATE NOT NULL,
    joindate DATE NOT NULL,
    email VARCHAR(50) NOT NULL,
    picturepath VARCHAR(256) NOT NULL,
    favouritemovie VARCHAR(50) NOT NULL,
    favouritecategory INTEGER REFERENCES category(id),
    isDeleted BOOLEAN NOT NULL
);

CREATE TABLE Movie
(
    movieId INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    moviePath VARCHAR(500) NOT NULL
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:29:25.460

从您的评论中：

> *计算每个中间值的平均评分（使用 GROUP BY 中间值），然后选择最大值并返回中间值*

所以第一步，计算每个中间值的平均值：

```
select mid, 
       avg(rating) as avg_rating
from rating
group by mid; 
```

现在选择最大值：

```
select max(avg_rating)
from (
  select avg(rating) as avg_rating
  from rating
  group by mid
) as mar 
```

现在结合这些：

```
select ar.mid, mar.max_avg
from (
    select mid, 
           avg(rating) as avg_rating
    from rating
    group by mid
  ) as ar
  join (
    select max(avg_rating) as max_avg
    from (
      select avg(rating) as avg_rating
      from rating
      group by mid
    ) as t
  ) as mar
  on ar.avg_rating = mar.max_avg; 
```

SQLFiddle 示例（使用 Postgres，但也适用于 HSQLDB）：[http ://sqlfiddle.com/#!12/e208a/8](http://sqlfiddle.com/#!12/e208a/8)

这不是最简单的解决方案，但查询分组数据从来都不是。使用`TOP`Luther 所示的构造会快得多。唯一的缺点`TOP 1`是您不会注意到两部电影是否具有相同的平均评分。

**编辑**：只是为了在 HSQLDB 之外扩展一点。在支持窗口函数的数据库（PostgreSQL、Oracle 等）中，这类问题非常简单：

```
select *
from (
  select mid, 
         avg(rating) as avg_rating,
         dense_rank() over (order by avg(rating) desc) as rnk
  from rating
  group by mid
) t
where rnk = 1; 
```

特别容易找到第二高、第三高等等 ( `where rnk = 2`, `where rnk = 3`)，使用这些嵌套查询确实很复杂 - 但使用方法时会更容易一些`TOP/LIMIT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:12:27.010

大概是这样的：

```
SELECT TOP 10
  mid,
  avg(cast(r.rating as float))
FROM Rating r
GROUP BY mid
ORDER BY avg(cast(r.rating as float)) DESC 
```

您不需要将等级更改为浮点数，但我认为如果您的等级为 4 和 5，您可能希望平均值为 4.5，而不是四舍五入为整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T09:29:54.267

你说你想从大多数平均评级中选择中频..请试试这个..

```
select max(x.avgr)
from (
  select r.mid, avg(r.rating) avgr
  from rating r
  group by r.mid
) as x; 
```

或试试这个：在[Sql Server](http://sqlfiddle.com/#!3/2a3ba/15)中工作。

```
select Top 1 r.mid, avg(r.rating) as avgr
from rating r
group by r.mid
order by avgr desc
; 
```

**那些`Top`不起作用的 dbms 你可以`limit 1`改用..**

```
 select r.mid, avg(r.rating) as avgr
    from rating r
    group by r.mid
    order by avgr desc Limit 1
    ; 
```

# c++ - 存储反转数据的向量

> ID：14291827
> 
> 赞同：0
> 
> 时间：2013-01-12T08:57:09.857
> 
> 标签：c++, vector, containers

我使用一个按索引引用列表中事物的协议。存储这些东西的自然方式是在向量中，所以我可以在恒定时间内随机访问。但是从本质上讲，向量的开头有很多摆弄，包括插入和删除。指数越低，越摆弄。结果是大量复制向量的其余部分。

我想以相反的方式存储东西，在更高的向量索引（即更高的地址）上存储更低的协议索引，以最大限度地减少内容移动，但仍然能够通过协议索引透明地随机访问元素。理想的容器将是 std::vector 的直接替代品，指针算术等除外。我仍然想要指针算术，但可以自己处理相反的顺序。

周围有这样的课吗？

也许是一些我找不到的提升容器或一些晦涩难懂的政策？

**编辑：**实际上，让我感到震惊的是，我可以使用一种在 index*之前*和index`0`之后保留空间的向量`length-1`。双端队列不像我想的那样构建，它使用大块内存代替，防止指针算术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:12:18.157

根据您的描述，听起来好像在向量的前面插入和删除了项目，导致向量的其余部分被移动。如果是这样，这意味着您不依赖于停留在特定索引的项目。这就提出了为什么插入和删除位于向量前面的问题——以保持排序顺序？

C++ 标准库中有许多容器维护对数时间插入和删除的排序顺序，例如`std::multi_set`.

当插入和删除非常本地化时，听起来像（但你不是很清楚），您可能可以使用**游标间隙**结构，也称为**[间隙缓冲区](http://en.wikipedia.org/wiki/Gap_buffer)**，将插入和删除减少到恒定时间，保持恒定时间索引。一个成本是索引涉及额外的间接。但这可能是过早的优化，所以如果性能很重要，请**测量。**

# javascript - JavaScript - 显示来自文本字段的关注者

> ID：14291830
> 
> 赞同：-1
> 
> 时间：2013-01-12T08:57:54.740
> 
> 标签：javascript

我想显示来自 twitter 的关注者，如下所示：

![在此处输入图像描述](../Images/f8121fc2425556385d7bf20d631ecf5b.png)
所以，当我用任何用户名填充文本字段时，关注者的结果将显示在底部

这是我的代码：

*   索引.html

    ```
    <html>
    <head>
    <start twitter fan box –&gt;
    <script type="text/javascript" src="script.js"></script>
    <title></title>
    </head>
    <body>
    <div id="twitterfanbox">
    <script type="text/javascript">fanbox_init("your_username");
    </script type="text">
    </start>
    </div id="twitterfanbox"> 
    </body>
    </html> 
    ```

*   脚本.js

> function fanbox_init(screen_name){document.getElementById('twitterfanbox').innerHTML=

```
 '\<iframe name=\"fbfanIFrame_0\" frameborder=\"0\" allowtransparency=\"true\"
src=\"http://s.moopz.com/connect.html?user='+screen_name+'\" class=\"FB_SERVER_IFRAME\" scrolling=\"no\" style=\"width: 300px; height: 250px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; \"\>\<\/iframe\>';} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:23:07.157

您现在总是将字符串文字 "your_username" 传递给 fanbox_init: `fanbox_init("your_username")`。

尝试`fanbox_init(prompt("what is your Twitter username?"))`- 或作为两个陈述：

```
var username = prompt("what is your Twitter username?");
fanbox_init(username); 
```

这将显示一个提示（一个允许用户输入一行文本的弹出框）并将该值传递给`fanbox_init`.

# ios - 我可以创建一个在 NSMutableSet 中使用的自定义对象吗？

> ID：14291832
> 
> 赞同：0
> 
> 时间：2013-01-12T08:59:14.923
> 
> 标签：ios, objective-c, nsmutabledictionary, nsmutableset

我是 Objective-C 的新手，所以请多多包涵。我需要创建一个名称=值对的数组（或一组），其中一个条件是名称可以在集合中重复（因此我不能使用 NSMutableDictionary。）我发现 NSMutableSet 似乎是我需要的，但我的现在的困境是如何向其中添加两个 NSString 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:01:39.280

您仍然可以使用字典，但对于值，请使用数组或集合。这样，您可以将相同的键映射到多个不同的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:07:40.077

我不会使用集合，我认为您仍然应该使用`NSMutableDictionary`as 作为问题的根源是基于键的查找。

您想要做的是将 a`NSMutableArray`作为“值”，将名称作为键。如果该键尚未使用，`NSMutableArray`请在字典内部创建一个具有第一个值的值。如果键已被使用，只需将值添加到`NSMutableArray`字典中的已存在。

以下是“setValueForKey”方法的一些示例代码：

```
NSMutableDictionary *dictionary = /* Some mutable dictionary stored as an instance variable or similar */
NSString *keyToAdd; id valueToAdd;

NSMutableArray *arrayForKey = [dictionary objectForKey:keyToAdd];

if (arrayForKey != nil) { // if the array has been created before earlier in the program
    [arrayForKey addObject:valueToAdd]; // then just add the value directly to the array inside the dictionary
} else { // otherwise create the mutable array using the key
    NSMutableArray *newMutableArray = [[NSMutableArray alloc] initWithCapacity:0];

    [dictionary setObject:newMutableArray forKey:keyToAdd];

    [newMutableArray addObject:valueToAdd];
} 
```

要实现这个逻辑，从技术上讲，您可以创建 的子类`NSDictionary`，但我认为自定义包装器对象在语义上会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T09:22:40.433

您可能也不能使用 NSMutableSet ，因为集合通过哈希进行唯一化。如果您有两个具有相同哈希的对象（例如两个具有相同字符的 NSString），那么您最终也会在集合中得到一个字符串。

您可能希望使用 NSMutableArray 放置一个对象，该对象具有指向实际对象的键属性和值属性。或者，您可以自己在 NSArray 中获取值，如果您正在寻找某个值，则可以遍历数组并获取具有匹配键的对象。或者更优雅地使用 NSPredicate 按键过滤数组。

有关如何使用谓词过滤数组，请参见此处： http: [//www.cocoanetics.com/2010/03/filtering-fun-with-predicates/](http://www.cocoanetics.com/2010/03/filtering-fun-with-predicates/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T09:05:56.997

您应该选择 NSDictionary，因为它是哈希映射的并且速度更快。您可以创建一个具有数组类型属性的自定义类。将所有值存储在那里并将该对象用作值并放置一个键。

# c# - Windows 7 上的 IIS 7 中是否有管理服务 (WMSVC) UI？

> ID：14291833
> 
> 赞同：4
> 
> 时间：2013-01-12T08:59:19.187
> 
> 标签：c#, user-interface, service, iis-7, remote-server

我在同一台机器上使用 Windows 7 Ultimate x86 和 IIS 7。我想用 VS 2010 将 Silverlight 应用程序“网络部署”到这个 IIS 7。

我知道，我需要配置管理服务 (WMSVC) 和 Web 部署服务 (MsDepSvc)，以便 VS 2010 中的 Web 部署任务能够工作。

查看我的 IIS 7 管理 UI (inetmgr.exe)，我找不到执行此操作的条目“管理服务”。

我可以找到很多教程来做到这一点，但都在谈论 Windows Server 2008 和 IIS 7。

所以我的两个问题是：

1.) 有什么方法可以激活 IIS 7 UI 中的“管理服务”UI 条目？

2.) 如果没有，是否有任何带有 UI 的替代工具来执行此操作？

如果不清楚，我在说什么 - 这是一个教程的链接，其中 UI 条目“管理服务”显示在 IIS 7 中：

[iis-7-远程管理](http://www.trainsignal.com/blog/iis-7-remote-administration)

谢谢您的意见。

**我刚刚发现，这里也正在讨论这个问题：**

[缺少管理服务委派图标](http://forums.iis.net/p/1171432/1956059.aspx)

我尝试了建议的解决方案（Web 部署的自定义安装、脚本），但没有任何效果。

我错过了一点吗。Web 部署 3.0 的 msi 中一定存在错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:33:45.567

我仍然不知道为什么，但毕竟 VS 2010 内置方法“Web Deploy”对我**不起作用**。我刚刚放弃并编写了自己的部署批处理脚本，该脚本构建了我的应用程序并将所有相关数据复制到 IIS。

我想在这里为遇到同样问题的每个人发布这个批处理脚本。在使用这个脚本之前，有一些事情要记住：

**1.)**将 Local Copy = True 设置为 Silverlight Web 项目中所有引用的 DLL。

**2.)**每个 WCF RIA 服务都需要一个单独的 *.svc 文件。svc 文件需要包含完整的服务命名空间+名称以及用于实例化服务的工厂类。该文件的内容可能如下所示：

```
<%@ServiceHost language="C#" Debug="true" Service="Fullnamespace.Servicename" Factory="System.ServiceModel.DomainServices.Hosting.DomainServiceHostFactory"%> 
```

我的情况是我所有的 svc 文件都在 zhClientBin 文件夹中。请记住，您必须自己编写它们并设置 Locaol Copy = True。另请记住，您必须在 SL 客户端中调用正确的 svc 文件。

这可能看起来像这样：

```
LoginContext _loginContext = new LoginContext(Globals.URI.getServiceUri("http://yourdomain/ClientBin/YourService.svc"));
LoadOperation<ServiceLog> _loadOperation = _loginContext.Load<ServiceLog>(_loginContext.LogInQuery(user.EMail, user.Passwort), LoginCallBack, true); 
```

**3.**以下批处理脚本构建您的应用程序。然后它将文件复制到您的 IIS。对于调试问题，pdb 文件包含在 xap 文件中。请记住，批处理中的所有路径都与我的系统相关。你当然必须改变它们。也许您以此为灵感来构建您自己的脚本。

**请非常小心此脚本，如果您不熟悉批处理语言，请不要使用它。它会在您的硬盘上删除并创建文件夹。使用风险自负**

```
SET DestPath=D:\Sources Internet\www.MyDomain.de\%2
SET DevelopmentPath=D:\Sources\MyDomain\MyDomain.Web\%3

RD /S /Q "%DestPath%" 

MKDIR "%DestPath%"

"C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe" "D:\Sources\MyDomain\MyDomain\MyDomain.sln" /p:Configuration=Debug;DeployOnBuild=true;DeployTarget=Package;_PackageTempDir="D:\Sources Internet\www.MyDomain.de"

DEL "%DestPath%\Web.config" /s /q

COPY "%DevelopmentPath%\Web.config" "%DestPath%\Web.config"

COPY "D:\Sources\MyDomain\MyDomain\Bin\Debug\MyDomain.pdb" "D:\Sources Internet\www.MyDomain.de\ClientBin\MyDomain.pdb"

CD /D D:\Sources Internet\www.MyDomain.de\ClientBin

REN *.xap *.rar

SET WINRAR="C:\Program Files\WinRAR"

%WINRAR%\WinRAR.exe a MyDomain MyDomain.pdb 

DEL MyDomain.pdb

REN *.rar *.xap

COPY "D:\Sources Internet\www.MyDomain.de\ClientBin\MyDomain.xap" "D:\Sources Internet\www.MyDomain.de\bin\MyDomain.xap" 
```

**请非常小心此脚本，如果您不熟悉批处理语言，请不要使用它。它会在您的硬盘上删除并创建文件夹。使用风险自负**

使用这种方法，我不再需要 VS 2010 Web 部署，而且我还可以在 IIS 7.5 上运行和调试我的 SL 应用程序。

# android - preexecute() 方法中的动画

> ID：14291835
> 
> 赞同：1
> 
> 时间：2013-01-12T08:59:25.370
> 
> 标签：android, animation, android-asynctask

我正在尝试在单击时制作动画（使用 xml 中的动画列表）`TextView`。在`OnClick`中`OnClickListener()`，我正在使用 an`AsyncTask`来做一些后台操作。所以我在方法中放置了启动动画的代码`AsyncTask's` `preexecute()`。但是动画只有在`doInBackground()`完成后才会发生。这是为什么？中的动画代码`preexecute()`如下

```
protected void onPreExecute()
    {
        Drawable current =  mainActivity.textClicked.getBackground();
          if (current instanceof AnimationDrawable) {
              AnimationDrawable btnAnimation = (AnimationDrawable) current;
              btnAnimation.setVisible(true, false);
              btnAnimation.start();
          }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-21T06:59:54.380

某处，可能是您在 ui 线程中使用 .get() 方法。

取自 [这里](https://stackoverflow.com/questions/15101171/android-progress-dialog-in-asynctask-not-showing-up "鼠标悬停时出现此文本")

只需在工作线程中使用 .get() 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:05:33.730

```
Drawable current =  mainActivity.textClicked.getBackground();
          if (current instanceof AnimationDrawable) {
              AnimationDrawable btnAnimation = (AnimationDrawable) current;
              btnAnimation.setVisible(true, false);
              btnAnimation.start();
          } 
```

在调用之前或之后写上面的行 `AysncTask`。因为如果我们使用`AsyncTask`它，它不会等到任务完成。

有关更多信息，请阅读[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# c# - 检查用户名是否可用或被占用

> ID：14291836
> 
> 赞同：0
> 
> 时间：2013-01-12T08:59:30.440
> 
> 标签：c#, asp.net, visual-studio-2010, ajaxcontroltoolkit

我有一个使用 ASP.NET C# 并使用 MS SQL Server 2008 的简单应用程序。我需要将所有访问者用户注册到我的站点。为此，用户必须填写表格。问题是当用户输入**Desired Username**字段时，我应该能够在后台检查另一个用户是否已经使用了该**用户名**。我将不得不触发一个 sql 选择查询来检查可用性。

目前我正在使用该`TextBoxName_TextChanged`方法，但它不能实时工作。它仅适用于回发。代码如下：

```
protected void TextBox3_TextChanged(object sender, EventArgs e)
        {
            if (TextBox3.Text.Length == 0)
            {
                availability.Text = "";
                return;
            }

            SqlDataAdapter adp = new SqlDataAdapter("select username from users where username='" + TextBox3.Text + "'", con);
            DataSet ds = new DataSet();
            adp.Fill(ds, "users");
            if (ds.Tables["users"].Rows.Count > 0)
            {
                availability.ForeColor = System.Drawing.Color.Red;
                availability.Text = "Not Available";
            }
            else
            {
                availability.ForeColor = System.Drawing.Color.White;
                availability.Text = "Available";
            }

        } 
```

请给我一些建议，因为我在网上搜索的都是关于 PHP，而不是 ASP.NET

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
</asp:UpdatePanel>
    <table cellpadding="5" class="style1"> 
        <tr>
            <td class="style3">
                <asp:Label ID="Label3" runat="server" Text="Username" ForeColor="White"></asp:Label>&nbsp;&nbsp; </td>
            <td style="border:0px none #FF0000;">
                <asp:TextBox ID="TextBox3" runat="server" Width="175px" 
                    CssClass="input-control" ForeColor="Black" ontextchanged="TextBox3_TextChanged" AutoPostBack="true"></asp:TextBox></td>
        </tr>
        <tr>
            <td class="style3"></td>
            <td style="border:0px none #FF0000;"> 

                <asp:Label ID="availability" runat="server" Width="175px" CssClass="text" Text="availability"></asp:Label></td>
        </tr>
        <tr>
            <td class="style3">
                <asp:Label ID="Label4" runat="server" Text="Password" ForeColor="White"></asp:Label>&nbsp;&nbsp;&nbsp; </td>
            <td style="border:0px none #FF0000;">
                <asp:TextBox ID="TextBox4" runat="server" Width="175px" TextMode="Password" CssClass="input-control" ForeColor="Black"></asp:TextBox></td>
        </tr>
        <tr>
            <td class="style3">
                <asp:Label ID="Label5" runat="server" Text="Email" ForeColor="White"></asp:Label>&nbsp;&nbsp;&nbsp; </td>
            <td style="border:0px none #FF0000;">
                <asp:TextBox ID="TextBox5" runat="server" Width="175px" CssClass="input-control" ForeColor="Black"></asp:TextBox></td>
        </tr>

        <tr>

            <td class="style3">

            <td style="width:30%; text-align: right; padding: 10px; border:none;">
                <div class="button-set" data-role="button-set">
                    <asp:Button ID="Button2" runat="server" class="active bg-color-red" Text="Sign Up" />
                </div>
        </tr>
        </table></asp:UpdatePanel> 
```

* * *

更新：

按照大家的评论和回答，我已经取得了这么大的成就，但屏幕截图中显示了一个小问题：![截屏](../Images/18bbe4801bf016ea9bb76b0267709be9.png) 不知道为什么还有另一个带有状态的标签，**availability_status**保持原样。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:48:59.657

我相信您的更新面板格式不正确。您需要将“可用性”标签放入更新面板，然后为用户名文本框设置触发器，然后设置事件名称。就像是 ：

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
  <ContentTemplate>
    <asp:Label ID="availability" AppendDataBoundItems="true" runat="server" >                                         
    </asp:Label>
  </ContentTemplate>
  <Triggers>
   <asp:AsyncPostBackTrigger ControlID="TextBox3" EventName="TextChanged" />
    </Triggers>
 </asp:UpdatePanel> 
```

您还需要在文本框中设置 AutoPostBack="True"。我认为它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:03:12.910

您需要通过 AJAX 触发您的请求。连接到文本框客户端的“更改”事件并从那里触发它 - 最好的选择是使用 jQuery，例如

```
<script text="text/javascript">

$(document).ready(function() {
    var searchTimer;
    ...
    $('TextBox3').change(function() {
        var searchTerm = $(this).val();
        clearTimer(searchTimer);
        searchTimer = setTimeout(1000, function() {
            $.get('findUsers', { userName: searchTerm }, function(response) {
                // process successful response
            }).error(function(error) {
                // process error response
            });
        });
    });
});
<script>

<table>
    ...
    <input type="text" id="TextBox3" />
</table> 
```

以上将在每次文本更改后 1 秒触发对 API 调用“findUsers”的请求。这是为了避免在用户键入时发送不必要的请求，因为您只想在用户完成时发送请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T09:03:22.003

文本框是否有 AutoPostBack="true" ？您当然需要在您的文本框周围添加一个 UpdatePanel 以防止整个页面加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T11:21:48.193

最后，我得到了它的工作，感谢所有感兴趣并尝试过的人。解决方案是在每个 OnkeyUp 事件上进行 PostBack，这可以使用 JS 来完成。

标记是

```
<asp:TextBox ID="TextBox3" runat="server" Width="175px" 
                    CssClass="input-control" ForeColor="Black" onkeyup="RefreshUpdatePanel();" ontextchanged="TextBox3_TextChanged" AutoPostBack="false"></asp:TextBox>

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
                    <ContentTemplate><asp:Label ID="availability" runat="server" Width="175px" CssClass="text" Text="availability_label"></asp:Label>
                    </ContentTemplate>
                    <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="TextBox3" EventName="TextChanged" />
                    </Triggers> 
```

Javascript是：

```
<script type="text/javascript">
      function RefreshUpdatePanel() {
          __doPostBack('<%= TextBox3.ClientID %>', '');
      };
</script> 
```

并且检查用户名是否存在的代码写在里面

> TextBox3_TextChanged() 方法。有效。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-12T09:04:01.823

我最近构建了这个功能，您可以自己尝试一下。

```
public bool IsExist(string name, string pass)  /// in your case you only need to save the textbox on a string variable
    {
        string sql = "select * from Users where UName='" + name + "' and Pass='" + pass + "'"; ; 
        DataSet ds = General.GetData(sql); // General class has function called GetData which obviouslly gets the data of the required SQL information.
        if (ds.Tables[0].Rows.Count > 0)
            return true;
        return false;
    } 
```

# jquery-plugins - JavaScript 图片组合框 v3.2 选中属性

> ID：14291839
> 
> 赞同：1
> 
> 时间：2013-01-12T09:00:14.880
> 
> 标签：jquery-plugins, selected, html.dropdownlistfor

我正在使用[JavaScript 图像组合框 v3.2](http://www.marghoobsuleman.com/jquery-image-dropdown)插件，它是一个带有图像的下拉列表，我只是想使用 PHP 将 selected 属性设置为下拉列表的选项之一，因为我得到这个值（如果从 XML 文件中选择了特定选项）所以我必须在 PHP 中执行此操作，但它不像往常一样工作 select

```
array ('selected' => 'selected'); 
```

或者

```
array ('selected' => true); 
```

而且我在网上找不到与我的问题类似的任何东西。

有人试过这个插件吗？

```
$('#selectid > option:eq(1)').attr ('selected' , ?) 
```

# sql-server-2008 - c#中的语法错误

> ID：14291842
> 
> 赞同：-4
> 
> 时间：2013-01-12T09:01:27.017
> 
> 标签：sql-server-2008, c#-2.0

以下查询给了我一个不正确的语法错误

```
dt = sFunctions.ExecuteQuery(Variables.con, "House_Machinery", "usp_housemachinery_Master_insert" + Id + ",'" + txtItemName.Text + "'," + txthp.Text + "," + txtrate.Text + "," + Variables.sTendercode + "," + Variables.StrResourceHeaderCode);
                sFunctions.setSqldbConnCommand_Close(sSqldbCommand); 
```

错误如下：

```
incorrect syntax near ',' 
```

有人对我的问题的根源有任何见解吗？

它仍然有同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:02:51.740

你错过了一个`"`之前的`usp_housemachinery_Master_insert"`。

它应该是：

```
sFunctions.ExecuteQuery(Variables.con, 
                       "House_Machinery", 
                       "usp_housemachinery_Master_insert" + ... 
```

请注意，字符串连接是[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的邀请- 您应该参数化您的查询。

* * *

该错误可能来自 SQL Server - 您需要准确检查您发送的内容 - 它很可能是无效的 SQL，但在不知道不同文本框的值的情况下无法确定。

# perl - Expect.pm - 打印出子模式分组

> ID：14291843
> 
> 赞同：0
> 
> 时间：2013-01-12T09:01:28.313
> 
> 标签：perl, expect

我尝试在以下示例中使用 $expect_out(1, string) 打印出子模式组 1；但程序没有采用“$expect_out(1, string)”。相反，它打印出 (1,string) （见下面的输出）。

关于如何打印出子模式组 1（即“SunOS”）的任何想法。

我将括号放在搜索模式中以指示第 1 组用于反向引用；和内部调试（在输出中）似乎表明它正确地捕捉到了这个短语，但我不知道如何打印出来。

谢谢，

* * *

```
#!/usr/bin/perl
use Expect;

my $exp = new Expect;

# Begin: 2 lines for debugging only
$exp->exp_internal(1);
$exp->log_file("./expect_log.txt");
# End: 2 lines for debugging only

$exp->spawn("uname -a");
$exp->expect(10, '-re', "^(SunOS).*") or print "\nNot found!\n";
print "$expect_out(1, string)\n"; 
```

* * *

## 输出：

```
unix-machine% test_expect.pl
SunOS unix-machine 5.12 Generic_000000-00 sun4u sparc SUNW,SPARC-Bus
(1, string) 
```

## 带有内部调试的输出：

```
86 unix-machine% test_expect.pl
Spawned 'uname -a'
        spawn id(3)
        Pid: 25613
        Tty: /dev/pts/169
 at /home/user/PERL/lib/Expect.pm line 181
        Expect::spawn('Expect=GLOB(0x2b2040)', 'uname -a') called at test_expect.pl line 10
Starting EXPECT pattern matching...
 at /home/user/PERL/lib/Expect.pm line 561
        Expect::expect('Expect=GLOB(0x2b2040)', 10, '-re', '^(SunOS).*') called at test_expect.pl line 11
spawn id(3): list of patterns:
  #1: -re `^(SunOS).*' 
```

spawn id(3): 是否有`' match: pattern #1: -re`^(SunOS).*'? 不。

SunOS unix-machine 5.10 Generic_000000-00 sun4u sparc SUNW,SPARC-Bus

spawn id(3): 是否有`SunOS unix-machine 5.12 Generic_000000-00 sun4u sparc SUNW,SPARC-Bus\r\n' match: pattern #1: -re`^(SunOS).*'? 是的！！匹配字符串前：`' Match string:`SunOS unix-machine 5.12 Generic_000000-00 sun4u sparc SUNW,SPARC-Bus\r' 匹配字符串后：`\n' Matchlist: (`SunOS') (1, string)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:34:44.243

要获得快速直接的解决方案，请使用函数**$exp->matchlist**。如果你愿意，你可以继续阅读一些细节。

"$expect_out(1, string)" 适用于 expect 脚本，但不适用于 Perl 脚本，因为 Perl 解释器会将 $expect_out 视为标量变量，而后面的 "(1, string)" 将视为原始字符串。您可以参考 Perl 和 PHP 如何处理双引号中的字符串的规则以了解详细信息。

Perl的Expect.pm模块使用方法请参考CPAN： [Expect.pm](http://search.cpan.org/~rgiersig/Expect-1.21/Expect.pod)

进入此页面并搜索“括号”，您将知道**$exp->matchlist**函数可以解决问题。

因此，将您的脚本更改为：

```
#!/usr/bin/perl
use Expect;

my $exp = new Expect;

## Begin: 2 lines for debugging only
$exp->exp_internal(1);
$exp->log_file("./expect_log.txt");
## End: 2 lines for debugging only

$exp->spawn("uname -a");
$exp->expect(10, '-re', "^(SunOS).*") or print "\nNot found!\n";
#print $expect_out(1, string);
print ${$exp->matchlist}[0],"\n"; 
```

# c++ - 使用 == 运算符的自定义类比较向量

> ID：14291849
> 
> 赞同：3
> 
> 时间：2013-01-12T09:02:38.900
> 
> 标签：c++, list, vector, comparison, containers

一个伪代码（这是我的课）：

```
struct cTileState   {
        cTileState(unsigned int tileX, unsigned int tileY, unsigned int texNr) : tileX(tileX), tileY(tileY), texNr(texNr) {}
        unsigned int tileX;
        unsigned int tileY;
        unsigned int texNr;

        bool operator==(const cTileState & r)
        {
            if (tileX == r.tileX && tileY == r.tileY && texNr == r.texNr) return true;
            else return false;
        }
    }; 
```

然后我有两个容器：

```
 std::list < std::vector <cTileState> > changesList;  //stores states in specific order
       std::vector <cTileState> nextState; 
```

在程序的某个地方，我想在我的状态交换函数中这样做：

```
 if (nextState == changesList.back()) return; 
```

但是，当我想编译它时，我会遇到一些对我来说毫无意义的错误，例如：

> /usr/include/c++/4.7/bits/stl_vector.h:1372:58: 来自 'bool std::operator==(const std::vector<_Tp, _Alloc>&, const std::vector<_Tp, _Alloc>&) [with _Tp = cMapEditor::cActionsHistory::cTileState; _Alloc = std::allocator]'</p>
> 
> 错误：传递 'const cMapEditor::cActionsHistory::cTileState' 作为 'bool cMapEditor::cActionsHistory::cTileState::operator==(const cMapEditor::cActionsHistory::cTileState&)' 的 'this' 参数丢弃限定符 [-fpermissive]

它说 stl_vector.h 中有问题，并且我不尊重 const 限定符，但老实说，没有我不尊重的 const 限定符。这里有什么问题？

更重要的是，ide 不会在我的文件中的任何特定行中显示错误 - 它只是显示在构建日志中，仅此而已。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T09:05:46.897

您需要创建您的成员函数`const`，以便它接受一个`const` `this`参数：

```
bool operator==(const cTileState & r) const
                                      ^^^^^ 
```

更好的是，让它成为一个免费功能：

```
bool operator==(const cTileState &lhs, const cTileState & rhs) 
```

使成员函数`const`大致对应于`const`in `const cTileState &lhs`，而非常量成员函数将具有`cTileState &lhs`等价物。错误指向的函数尝试使用`const`第一个参数调用它，但您的函数只接受非常量参数。

# c++ - 库中的函数名称已更改

> ID：14291854
> 
> 赞同：0
> 
> 时间：2013-01-12T09:03:18.817
> 
> 标签：c++

我有一个小问题，如下所示。

我从下面的代码创建了一个共享库。

**帮助.h**

```
#include<iostream>
#include<signal.h>
#include<unistd.h>

using namespace std;

void killMe(int sig_num);

void printMe(void); 
```

**帮助.cpp**

```
#include<iostream>
#include<signal.h>
#include<unistd.h>

using namespace std;

void killMe(int sig_num)
{
    cout<<"Timeout occurred."<<endl;
    raise(SIGKILL);
}

void printMe()
{
    cout<<"This is help.cpp"<<endl;
}

[root@localhost DL]# nm -n /usr/local/lib/libmyhelp.so | grep " T "
00000584 T _init
00000760 T _Z6killMei
000007ae T _Z7printMev
00000864 T _fini
[root@localhost DL]# 
```

检查 nm 的输出，我看到 killMe 和 printMe 函数的名称已经改变了一点。有没有办法在共享库中保留与 cpp 代码中相同的名称？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T09:04:58.797

这是由于[C++ name mangling](http://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_C.2B.2B)造成的。要关闭它，请将函数声明为`extern "C"`.

**帮助.h：**

```
#include<iostream>
#include<signal.h>
#include<unistd.h>

using namespace std;

extern "C" {

void killMe(int sig_num);

void printMe(void);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:43:14.327

如果您也将其添加`extern "C"`到实现中，它应该可以工作。help.h 文件不参与编译过程。但是，有一个更好的方法：`#include "help.h"`作为 cpp 文件中的第一行，它验证它可以自己包含，并且在头文件中声明的函数的定义匹配。

还有一些注意事项：

*   你缺少包括警卫。
*   在 C++ 中标记空参数列表的 void 是多余的，尽管在 C 中不是。
*   我会调用头文件 help.hpp 以明确它是 C++。
*   您还可以删除 iostream 包含，然后使其与 C 兼容。然后您必须处理从 C++ 代码中抛出异常的情况，在 C 中使用时一定不能发生这种情况。

# pdf - 从 PDF 杂志中提取文章内容

> ID：14291856
> 
> 赞同：0
> 
> 时间：2013-01-12T09:03:33.057
> 
> 标签：pdf, structure, extraction, article

首先，我的目标不是一个具体的开发答案，而是一种开发方法。

我遇到的问题是，我有一个客户有*大量*的 PDF 文章，在过去的 20 年里，每年大约有 150 篇文章在 50 个 pdf 中。所有这些 PDF 都是从 Quark express 编译的，来自使用 mac 的人（如果该信息很重要）。每次创建新的 pdf 杂志时，网络开发团队都会将每篇文章复制并粘贴（！）到 Internet 上的表格（！），包括 标题、内容、关键字、参考文献、作者姓名等。一个人通常需要大约 3 天的时间才能完成这项工作。

当我在那里工作时（我现在已经不在了，那是差不多七年前的事了），我使用剪贴板监控应用程序和一些与服务器交互的简单的基于 XML 的 PHP 脚本将这个过程加快了三倍。然后，您需要做的就是选择文本，CTRL+C，选择更多文本，CTRL+C，转到应用程序 (ALT+TAB)，按“下一篇文章”，然后重复此操作。但是我们，或者大部分是我，每年仍然要花费大约 50 天来处理 PDF 杂志。

现在我已经七年了，出于友好的访问原因，我即将再次与我的老老板交谈。我知道他们仍在使用我的应用程序（！）。但也许重新审视他们的问题是个好主意，看看我是否可以建议一个可以帮助他们的编码项目？

我从来没有使用过 Quark Express，我只*知道*它类似于 MS Word，就我对软件的了解而言。我对未加密、提取的 PDF 代码/语法不是很熟悉。

简而言之：Quark Express 是否有一些特定的编译模式，可以在 PDF 脚本中用于提取文章？有哪些“智能”工具，可以从文章内容所在的类似结构的 pdf 页面中“学习”？是否有工具，例如某种 Quark Xpress 模块，可以将文章“封装”或“标记”在一起，并带有不可见的参考标签，从而使脚本的提取更加简单？

创建这些 PDF 的人在过去 20 年里一直在做他们的工作，除了软件更新之外，他们不愿意改变他们的工作流程。为他们提供的任何其他工具都不得干扰他们的工作流程，否则他们只会拒绝它。

**我不想要代码**；但只是一些关于您或其他人可能对其他 PDF 提取问题所做的描述。最好的答案可能是对几种方法的描述，或者对带有案例描述的外部链接的一些引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:19:25.530

广泛的问题，但乍一看，我的回答是——如果你让他们去到 PDF——你已经让事情变得非常困难了。如果他们仍在使用 Quark XPress，则有更好的方法来做这种事情，并且实际上有不少出版商使用类似的方法。

1) 研究从 Quark XPress 生成 PDF 和 XML。他们不想改变他们的方式很好，但无论如何他们必须用 Quark 创建 PDF；生成 XML 也不是一个很大的附加步骤。事实上（警告 - 隶属关系！）有一些工具可以将所有这一切变成一个步骤。例如，您可以编写 AppleScript 来引导流程，但在人们单击“导出”后，像 axaio MadeToPrint 这样的东西会自动生成（正确的）PDF 和 XML 文件。

2）一旦您拥有相同内容的 PDF 和 XML，使用 PDF 进行打印（就像知道的那样），然后编写一些代码将 XML 转换为您在网站上需要的任何内容。如果编码是在网站本身上完成的，您甚至可能不需要调整来自 Quark 的 XML；只需使站点足够智能，以获取任何必要的点点滴滴。

宽泛问题的宽泛回答；希望这就是你要找的...

# eclipse - UML 序列图

> ID：14291857
> 
> 赞同：3
> 
> 时间：2013-01-12T09:03:36.830
> 
> 标签：eclipse, uml, modeling

我在使用 Eclipse Papyrus 建模 SD 时遇到了一些问题，不是因为该工具（实际上制作得非常好），而是因为我对 OMG 规范有错误的理解。

考虑这个简单的例子：

我有一个`ClassA`包含两个不同类的两个实例的类的模型`(say bObj:ClassB and cObj:ClassC)`。 `ClassA`提供与通过 SequenceDiagram 指定的行为相关的操作（即 classAOperation(int param)）。

现在该行为包括调用 bObj:ClassB 的操作（**即**.classBOOperation(int param)）和`cObj:ClassC`（即 classCOperation(int param)）的操作。

我想知道如何通过 SD 对这种非常简单的行为进行建模。这个问题基本上与LifeLine有关。

根据 OMG 规范。生命线只能表示（表示属性）一个 ConnectableElement，在我的例子中是两个，并且对应于实现`ClassA`a`ClassB`和 a的组合的属性。`ClassC``(bObj and cObj)`

问题是，我还需要引用这些可连接元素的容器，即`ClassA`实际执行这种紧急行为的实例。正是该实例向生命线`bObj:ClassB`和`cObj:ClassC`生命线发送消息（与操作调用相关）。此外，由于此行为对应于`ClassA:classAOperation(int param)`调用，因此我还需要通过正式的门来表示 classAOperation(int param) 消息。但同样，由于我无法对容器生命线进行模式化，我看不到将 classAOperation(int param) 消息附加到哪个端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:40:31.137

确实可以引用self实例

事实上UML spec 2.5b1 page 607，关于生命线的说法。如果名称是关键字self，则生命线表示包含拥有生命线的交互的分类器对象。即使包含 self ，外壳的端口也可以单独显示。

![在此处输入图像描述](../Images/a540a1c5aa677f8d9f84f0a3fe7b1ee2.png)

见 [http://lowcoupling.com/post/47844944042/uml-sequence-diagrams](http://lowcoupling.com/post/47844944042/uml-sequence-diagrams)

一个完整的例子

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-13T07:13:38.257

我认为，在序列图中，您只需要显示调用序列即可。我认为，可连接元素、对容器的引用等并不重要。它只是显示对象之间的调用链。我可以称序列图：消息图。

![序列图](../Images/25a94a48c7cb585d1d71a34a666c4355.png)

# android - 如何在对话框中制作下拉内容

> ID：14291862
> 
> 赞同：0
> 
> 时间：2013-01-12T09:04:08.547
> 
> 标签：android, android-layout

我确实有一个带有足够长内容的 ScrollBar 对话框。它工作得很好，现在我想在其中添加更多信息`dialog`。添加新内容不是问题，但我不希望它太长，所以用户将向下滚动直到感兴趣的地方。所以，我决定把我的内容分成`three`几部分。当用户点击某个部分时，将显示该部分下的信息。我会拿出 2 个插图来说明我想要的东西。 ![在此处输入图像描述](../Images/857954cb6d45635ae0bbc7b43b0e29f4.png)

因此，插图编号 2：

![在此处输入图像描述](../Images/8fb7930f4b1ae89da9203f5768e026cc.png)

如您所见，它们将在 onClick 之后向下滚动并显示内容。我看了看，`Spinner`但似乎完全是另一回事。它接近`Tabs`但我没有看到垂直实现，而且我的应用程序`minSdk`是 7。我想从你那里得到一些建议，这将以最好的方式适合我的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:10:51.457

您需要在 xml 中使用**Expandable listview**并将其绑定为`BaseExtendedAdapter`

这是[示例](http://www.dreamincode.net/forums/topic/270612-how-to-get-started-with-expandablelistview/)

试试这个[演示](http://www.dreamincode.net/forums/index.php?app=core&module=attach&section=attach&attach_id=28652&s=a5fc64500c422342c93165b0c38c2710)

# google-app-engine - ndb 查询部分字符串匹配

> ID：14291863
> 
> 赞同：6
> 
> 时间：2013-01-12T09:04:26.677
> 
> 标签：google-app-engine, app-engine-ndb, djangoappengine

这似乎应该是一个简单的问题。但是[文档](https://developers.google.com/appengine/docs/python/ndb/queries#filter_by_prop)似乎没有回答它。使用他们的示例，我想这样做：

```
Account.query(Account.title == "best") 
```

除了我也想匹配部分字符串。所以在这种情况下：

```
acct = Account(title="the best account in the world") 
```

带有参数“最佳”的 ndb 查询将匹配`acct`.

我目前看到的唯一选择是循环遍历`Account.query()`并将每个模块`title`与`re.search`python 中的模块匹配。这似乎不是一个好的解决方案。

**更新：**我也在看`gql`. 这样做：

```
acct = ndb.gql('SELECT * from Account WHERE title LIKE '%best%') 
```

返回一个`Parse Error: Invalid WHERE Condition at symbol LIKE`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-02-05T03:10:31.910

注意：这并不能完全回答问题，但寻找的人`starts with`可能会发现这个答案很有用。

NDB 的 String 字段以您可以进行大于 ( `>=`) 和小于 ( `<`) 搜索的方式进行索引。假设以下`Person`模型：

```
class Person(ndb.Model):
    name         = ndb.StringProperty()
    name_lower   = ndb.ComputedProperty(lambda self: self.name.lower()) 
```

您可以执行以下操作：

```
def search_by_text(text):
  text = text.lower()
  limit = text[:-1] + chr(ord(text[-1]) + 1)
  return Person.query(Person.name_lower >= text, Person.name_lower < limit).fetch(50)

p = search_by_text('kri') 
```

此示例中的`limit`变量将包含字符串“krj”并成为搜索值的限制。以上将为您提供所有姓名大于`kri`但小于`krj`并限制为前 50 个结果的人。由于限制，喜欢`kross`和的名称`lark`将被过滤掉。

注意：重要的是您必须`ndb.ComputedProperty`包含要搜索的字段的小写版本。不要忘记添加它！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-12T09:25:59.347

GQL 没有通配符匹配，要实现这一点，您需要使用[全文搜索](https://developers.google.com/appengine/docs/python/search/overview)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T12:59:00.067

对于像标题这样的（可能）短字段，添加一个重复的 StringProperty 包含标题的每个单词（可能忽略停用词）将允许您匹配单词，并且比使用搜索 API 更简单。

# c++ - 转换为 token_def 的值类型

> ID：14291865
> 
> 赞同：2
> 
> 时间：2013-01-12T09:04:56.190
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi, boost-spirit-lex

当我在词法分析器中定义时

```
typedef boost::mpl::vector<std::string, unsigned int, bool>
            token_value_types;
lex::token_def<unsigned int> lit_uint("[0-9]+", token_ids::lit_uint); 
```

然后在一些语法中使用它

```
primary_expr =
        lexer.lit_uint
    |   lexer.true_or_false
    |   identifier
    |   '(' > expr > ')'
    ; 
```

那么如何将字符串转换为正确**令牌值类型**的值（`unsigned int`在这种情况下）？如果您将自定义类型或浮点类型指定为**令牌值类型**，会发生什么情况？转换例程的存在在哪里（我认为类似于**`boost::iterator_range`转换`double`**）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:09:45.597

完成你想要的事情的方法就是专业化[`assign_to_attribute_from_iterators`](http://www.boost.org/libs/spirit/doc/html/spirit/advanced/customize/assign_to/assign_to_attribute_from_iterators.html)。[您可以在此处](http://www.boost.org/libs/spirit/example/lex/custom_token_attribute.cpp)找到具有自定义类型的示例。如果您`double`在令牌定义中用作属性，spirit 在内部使用`qi::double_`来解析该值。（您可以在[此处](http://www.boost.org/boost/spirit/home/qi/detail/construct.hpp)找到double 和其他基本类型的特化）。

愚蠢的例子，我将`real`标记定义为任何不是 a`,`或 a`;`以显示`double`s 的解析。

```
#define BOOST_SPIRIT_DEBUG
#include <boost/spirit/include/lex_lexertl.hpp>
#include <boost/spirit/include/qi.hpp>

namespace lex = boost::spirit::lex;
namespace qi = boost::spirit::qi;
namespace mpl = boost::mpl;

template <typename Lexer>
struct my_lexer : lex::lexer<Lexer>
{
    my_lexer()
    {
        real = "[^,;]*"; //anything that is not a , or ; is a real number

        this->self=lex::token_def<lex::omit>(',')| ';';

        this->self.add(real);
    }
    lex::token_def<double> real;
};

int main()
{
    // the token type needs to know the iterator type of the underlying
    // input and the set of used token value types
    typedef lex::lexertl::token<std::string::iterator,
        mpl::vector<double> > token_type;

    // use actor_lexer<> here if your token definitions have semantic
    // actions
    typedef lex::lexertl::lexer<token_type> lexer_type;

    // this is the iterator exposed by the lexer, we use this for parsing
    typedef lexer_type::iterator_type iterator_type;

    // create a lexer instance
    std::string input("3.4,2,.4,4.,infinity,NaN,-3.8,1e2,1.5E3;");
    std::string::iterator s = input.begin();

    my_lexer<lexer_type> lex;
    iterator_type b = lex.begin(s, input.end());

    // use the embedded token_def as a parser, it exposes its token value type
    // as its parser attribute type
    std::vector<double> result;
    qi::rule<iterator_type,double()> number= lex.real;
    qi::rule<iterator_type,std::vector<double>()> sequence= number >> *(',' >> number) >> ';';
    BOOST_SPIRIT_DEBUG_NODE(number);
    BOOST_SPIRIT_DEBUG_NODE(sequence);
    if (!qi::parse(b, lex.end(), sequence, result))
    {
        std::cerr << "Parsing failed!" << std::endl;
        return -1;
    }

    std::cout << "Parsing succeeded:"  << std::endl;
    for(auto& n : result)
        std::cout << n << std::endl;
    return 0;
} 
```

***编辑：***我对正则表达式的经验很少，但我相信与注释中链接的语法等效的标记定义（我认为应该有`fractional_constant >> -exponent_part`而不是`fractional_constant >> !exponent_part`）将是：

```
template <typename Lexer>
struct my_lexer : lex::lexer<Lexer>
{
    my_lexer()
    {
        this->self.add_pattern("SIGN","[\\+\\-]");
        this->self.add_pattern("NAN","(1\\.0#)?(?i:nan)(\\([^\\)]\\))?");
        this->self.add_pattern("INF","(?i:inf(inity)?)");
        this->self.add_pattern("DIGIT","[0-9]");
        this->self.add_pattern("FRACT_CONST","{DIGIT}*\\.{DIGIT}+|{DIGIT}+\\.?");
        this->self.add_pattern("EXP","[eE]{SIGN}?{DIGIT}+");

        real = "{SIGN}?({NAN}|{INF}|{FRACT_CONST}{EXP}?|{DIGIT}+{EXP})";

        this->self=lex::token_def<lex::omit>(',')| ';';

        this->self.add(real);
    }
    lex::token_def<double> real;
}; 
```

# android - 为什么我的 layout-large 文件夹没有被访问？

> ID：14291868
> 
> 赞同：0
> 
> 时间：2013-01-12T09:05:17.890
> 
> 标签：android, android-layout

下面的类从不调用 layout-large 文件夹中的布局。也就是下面的 maintabletlayout.xml 文件。我正在使用分辨率为 800x1280 且密度为 160 的 avd。下面的 findViewById() 始终返回 null。有任何想法吗？系统必须具备哪些规范才能访问 layout-large 文件夹？

```
public class MainActivity extends Activity
{
 boolean mTwoPane;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    ArrayList<String> subjects=new ArrayList<String>();
    subjects.add("Math");
    subjects.add("Science");
    subjects.add("Art");
    if(findViewById(R.id.top_tablet_container)!=null){
       mTwoPane=true; 
    }else{
        mTwoPane=false;
    }

    if(mTwoPane){
        setContentView(R.layout.maintabletlayout);
        SubjectListFragment top=new SubjectListFragment(subjects,mTwoPane);
        getFragmentManager().beginTransaction().add(R.id.list_container, top).commit();
    }else{

        setContentView(R.layout.mainphonelayout);
        SubjectListFragment top=new SubjectListFragment(subjects,mTwoPane);
        getFragmentManager().beginTransaction().add(R.id.top_phone_container, top).commit();

    }
}
} 
```

mainphonelayout.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/top_phone_container"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
>

</LinearLayout> 
```

maintabletlayout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/top_tablet_container"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

    >
<RelativeLayout
    android:id="@+id/list_container"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="2"
    android:layout_toLeftOf="@+id/content_container"
  >

</RelativeLayout>

<RelativeLayout
    android:id="@id/content_container"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
   android:layout_weight="1"
    android:layout_toRightOf="@id/content_container"
  >

</RelativeLayout>
</LinearLayout> 
```

在清单中我也有这个

```
<supports-screens
   android:xlargeScreens="true"
   android:largeScreens="true"
   android:normalScreens="true"
   android:anyDensity="true" /> 
```

@nOiAd 有正确的答案。我必须为这两个布局赋予相同的名称，然后使用该名称设置 setContentView()。这样，您可以为适当大小的屏幕设置内容视图，然后 findViewById() 在尝试在大屏幕布局中查找 id 时能够返回非 null。

```
 public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

        ArrayList<String> subjects=new ArrayList<String>();
        subjects.add("Math");
        subjects.add("Science");
        subjects.add("Art");
        if(findViewById(R.id.top_tablet_container)!=null){
           mTwoPane=true; 
        }else{
            mTwoPane=false;
        }

        if(mTwoPane){

            SubjectListFragment top=new SubjectListFragment(subjects,mTwoPane);
            getFragmentManager().beginTransaction().add(R.id.list_container, top).commit();
        }else{

            SubjectListFragment top=new SubjectListFragment(subjects,mTwoPane);
            getFragmentManager().beginTransaction().add(R.id.top_phone_container, top).commit();

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:23:04.437

@nOiAd 有正确的答案。我必须为这两个布局赋予相同的名称，然后使用该名称设置 setContentView()。这样，您可以为适当大小的屏幕设置内容视图，然后 findViewById() 在尝试在大屏幕布局中查找 id 时能够返回非 null。

```
 public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

        ArrayList<String> subjects=new ArrayList<String>();
        subjects.add("Math");
        subjects.add("Science");
        subjects.add("Art");
        if(findViewById(R.id.top_tablet_container)!=null){
           mTwoPane=true; 
        }else{
            mTwoPane=false;
        }

        if(mTwoPane){

            SubjectListFragment top=new SubjectListFragment(subjects,mTwoPane);
            getFragmentManager().beginTransaction().add(R.id.list_container, top).commit();
        }else{

            SubjectListFragment top=new SubjectListFragment(subjects,mTwoPane);
            getFragmentManager().beginTransaction().add(R.id.top_phone_container, top).commit();

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:29:12.467

确保您正在运行的模拟器确实已配置为“大”。分辨率范围不会自动应用于大小“桶”（正常/大/...）。 ![模拟器](../Images/51afd4cd5dcd9e02069ce7108945b8af.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T09:24:10.357

从 Android 3.2 开始，您应该使用`layout-swXXXdp`符号，`XXX`数字在哪里。在您的情况下应该是`720`10" 屏幕

# iphone - 在 iPhone 的数组中存储地址簿联系人

> ID：14291872
> 
> 赞同：2
> 
> 时间：2013-01-12T09:05:54.743
> 
> 标签：iphone, ios, addressbook

我正在使用下面的编码来获取字符串格式的名字，但想在一个数组中获取它，因为它包括地址簿联系人和 facebook 联系人。这样我就可以像数组 [0]、数组 [1] 和很快的那样检索它们。所以请帮助我完成这项工作。

```
 ABAddressBookRef ab=ABAddressBookCreate();

    NSArray *arrTemp=(NSArray *)ABAddressBookCopyArrayOfAllPeople(ab);

    NSMutableArray *arrContact=[[NSMutableArray alloc] init];
       for (int i=0;i<[arrTemp count];i++) 
             {
    NSMutableDictionary *dicContact=[[NSMutableDictionary alloc] init];
    NSString *str=(NSString *) ABRecordCopyValue([arrTemp objectAtIndex:i],             kABPersonFirstNameProperty);
    @try
        {
    [dicContact setObject:str forKey:@"name"];
        }
    @catch (NSException * e) {
    [dicContact release];
    continue;
     }

    [dicContact release];

    NSLog(@"%@",str ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:19:22.150

您可以将您的地址簿中的所有联系人存储到 NSMutableArray 中，如下所示：-

```
ABAddressBookRef addressBook = ABAddressBookCreate();
NSArray *thePeople = (NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);
NSMutableArray* allPeoplesDicts = [NSMutableArray array];
for (id person in thePeople)
{
    ABMultiValueRef phones =(NSString*)ABRecordCopyValue(person, kABPersonPhoneProperty);
    NSString* name = (NSString *)ABRecordCopyCompositeName(person);
    NSMutableArray* phones = [[NSMutableArray alloc] init];
    for (CFIndex i = 0; i < ABMultiValueGetCount(phones); i++)
    {
        NSString *phone = [(NSString *)ABMultiValueCopyValueAtIndex(phones,i) autorelease];
        [phones addObject:phone];
    }
    NSDictionary* personDict = [[NSDictionary alloc] initWithObjectsAndKeys:name,@"Name",phones,@"PhoneNumbers",nil];
    [phones release];
    [allPeoplesDicts addObject:personDict];
    [personDict release];
} 
```

我只是谷歌它，我得到了这个访问这个类似的问题：-

[如何将 ABRecordRef 添加到 iPhone 中的 NSMutableArray？](https://stackoverflow.com/questions/6071256/how-can-i-add-a-abrecordref-to-a-nsmutablearray-in-iphone)

[将地址簿联系人存储到字典中](https://stackoverflow.com/questions/3226027/storing-adressbook-contacts-into-a-nsdictionary)

# javascript - 复选框的jQuery onclick错误

> ID：14291877
> 
> 赞同：0
> 
> 时间：2013-01-12T09:06:51.793
> 
> 标签：javascript, jquery, checkbox

我有一个表格：

```
<form name="registration_form" action="<?php echo base_url();?>user/register" method="post" onsubmit="return verify()">
   <table width="100%" border="0" cellspacing="1" cellpadding="2">
   <tr>
       <td class="login_user_td">Click If Want To Edit :</td>
       <td><input type="checkbox" name="edit" id="edit" onclick="enable_edit()"/>
       </td>
     </tr>
     <tr>
       <td class="login_user_td"> First Name :</td>
       <td><input type="text" name="f_name" readonly="true" id="f_name" value="<?php echo $my_info[0]['first_name'];?>">
       </td>
     </tr>
     <tr>
       <td colspan="2" align="center" class="login_user_button"><input type="image" style="display: none;"src="<?php echo base_url();?>assets/front_assets/image/edit.gif" /></td>
     </tr>

   </table>
   </form> 
```

现在复选框编辑有一个 onclick 事件，它调用该函数

```
enable_edit()
{
        if($('#edit').prop("checked", true))
             {
                 alert('true');
             }
        else
                 alert('false');
    } 
```

问题是，每当我点击复选框时，它总是显示为真。

假设如果我第一次单击，该属性被选中，那么它会警告 true，下次当我再次单击时，这次检查应该被取消选中，因此应该警告 false。

但是每次警报都为真时，复选框并没有被取消选中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:12:14.053

您总是设置检查状态而不是查询它。

在条件检查中使用`prop("checked")`而不是，`prop("checked", true)`因为后者将始终将`checked`state 属性设置为`true`.

有关获取和设置属性值的更多详细信息，请参阅[**.prop() 文档**](http://api.jquery.com/prop/)。

将您的代码更改为以下内容：

```
function enable_edit() {
  if ($('#edit').prop("checked")) {
    alert('true');
  } else alert('false');
} 
```

* * *

[**演示**](http://jsfiddle.net/vqpLY/)- 工作复选框

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T09:12:24.367

您在该 if 语句中将 checked 属性的值设置为 true。

你需要的只是`$('#edit').prop("checked");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T09:10:45.290

```
if($('#edit').prop("checked") {

} 
```

可能是一个更好的测试。

# php - 如何在表单处理过程中避免很长的 if` 语句？

> ID：14291882
> 
> 赞同：-2
> 
> 时间：2013-01-12T09:08:09.367
> 
> 标签：php, forms

在表单处理的每个示例中，我都发现了这种情况：

```
if(!empty($_POST)) {... 
```

...而且比 - 属于上述的这么多行（有时大约 250 行）`if`。
非常不适合追踪。

有没有这样的方法：
`if(empty($_POST)) {`show show some message or echo... anything `}`，然后 - 停止代码
所以所有下一行都将是`outside of very long if`并且只有在`if`满足时它们才会执行。

我尝试了一些东西，但是`$_POST`在这种情况下（用户名，密码...）的成员不可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T09:13:02.790

定义一个函数，该函数将执行必要的代码并将 $_POST 变量作为参数传递。这样，所需的变量（例如用户名、密码）现在在函数中可用

```
function executePost($post) {
   // execute code here with $post variables
   $username = $post['username'];
   $password = $post['password'];
} 
```

检查帖子后调用该函数

```
if(!empty($_POST)) {
    executePost($_POST);
} else {
   echo 'Post was empty';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T09:11:00.577

当你在一个函数中时，你可以`return`在`if(empty($_POST)) {...}`. 否则，您可以使用`die(message)`或`exit()`停止整个脚本执行。

# python - IPython 笔记本不起作用

> ID：14291887
> 
> 赞同：2
> 
> 时间：2013-01-12T09:09:27.303
> 
> 标签：python, python-2.7, ipython

我尝试运行 IPython 笔记本。我在命令行中输入了以下内容：

ipython 笔记本

我收到以下错误（堆栈跟踪）

```
> Traceback (most recent call last):   File
> "C:\Python27\Scripts\ipython-script.py", line 9, in <module>
>     load_entry_point('ipython==0.13.1', 'console_scripts', 'ipython')()   File
> "C:\Python27\lib\site-packages\IPython\frontend\terminal\ipapp.py",
> line 388, in launch_new_instance
>     app.initialize()   File "<string>", line 2, in initialize   File "C:\Python27\lib\site-packages\IPython\config\application.py", line
> 84, i n catch_config_error
>     return method(app, *args, **kwargs)   File "C:\Python27\lib\site-packages\IPython\frontend\terminal\ipapp.py",
> line 313, in initialize
>     super(TerminalIPythonApp, self).initialize(argv)   File "<string>", line 2, in initialize   File
> "C:\Python27\lib\site-packages\IPython\config\application.py", line
> 84, i n catch_config_error
>     return method(app, *args, **kwargs)   File "C:\Python27\lib\site-packages\IPython\core\application.py", line 325,
> in  initialize
>     self.parse_command_line(argv)   File "C:\Python27\lib\site-packages\IPython\frontend\terminal\ipapp.py",
> line 308, in parse_command_line
>     return super(TerminalIPythonApp, self).parse_command_line(argv)   File "<string>", line 2, in parse_command_line   File
> "C:\Python27\lib\site-packages\IPython\config\application.py", line
> 84, i n catch_config_error
>     return method(app, *args, **kwargs)   File "C:\Python27\lib\site-packages\IPython\config\application.py", line
> 420, in parse_command_line
>     return self.initialize_subcommand(subc, subargv)   File "<string>", line 2, in initialize_subcommand   File
> "C:\Python27\lib\site-packages\IPython\config\application.py", line
> 84, i n catch_config_error
>     return method(app, *args, **kwargs)   File "C:\Python27\lib\site-packages\IPython\config\application.py", line
> 352, in initialize_subcommand
>     subapp = import_item(subapp)   File "C:\Python27\lib\site-packages\IPython\utils\importstring.py", line
> 40, i n import_item
>     module = __import__(package,fromlist=[obj])   File "C:\Python27\lib\site-packages\IPython\frontend\html\notebook\__init__.py
> ", line 8, in <module>
>     raise ImportError(msg) ImportError: The IPython Notebook requires tornado >= 2.1.0 
```

我该如何解决？我有 Python 2.7 版

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T09:11:55.897

您需要安装龙卷风网络服务器。假设您已安装 pip 并在您的路径上：

> 点安装龙卷风

# jquery - 使用 tabindex 的菜单选项卡顺序以实现可访问性

> ID：14291888
> 
> 赞同：1
> 
> 时间：2013-01-12T09:09:35.307
> 
> 标签：jquery, focus, accessibility, tabindex

我目前正在开展一个项目，以使网站更易于访问。在这方面，我遇到了与 tabindex/tab 顺序相关的问题。单击菜单按钮后，将显示一个子菜单，其中包含一个带有两个选项卡的菜单栏。每个选项卡在单击时都会显示另一个子菜单。我想要的是能够在单击菜单时直接关注第一个选项卡。一旦第一个选项卡获得焦点，应该能够在此选项卡和第二个选项卡之间来回切换，并通过按 Enter 选择其中一个。

选择项目后，按 Tab 应继续浏览为所选选项卡显示的子菜单中的所有项目。我为此创建了以下代码：

```
 // First set the tabindex for both tabs to 0 to be able to
    // tab through them sequentially
    $('#tab1').attr("tabindex", 0);
    $('#tab2').attr("tabindex", 0);

    // Set focus on the first tab once the main menu link has been clicked
    $('#menulink').click(function({ $('#tab1').focus(); });

    // Select appropriate tab when ENTER is pressed
    $('#tab1').keydown(function(event) { 
        if(event.which == 13) { event.preventDefault(); }
        $('#tab1').click();
    });
    $('#tab2').keydown(function(event) {
        if(event.which == 13) { event.preventDefault(); }
        $('#tab2').click();
    }); 
```

如果我按 tab 转到 tab2 然后尝试 shift+tab 返回 tab1 并选择它，就会出现问题。然后它不允许我在它的子菜单中进一步向下选择 - 它再次直接返回到 tab2，然后在它的子菜单中继续。选择时，我尝试将焦点显式设置为子菜单中的选项卡第一个元素，但这也不起作用。有人对如何使这项工作提出建议吗？

更新：HTML 看起来像这样

```
 <a href="#" id="**menulink**" class="actionDropDownList menulink" title="Hovedmeny">
            Hovedmeny</a>
        <div id="mainMenu">
            <div id="mainMenuPositionWrapper">
                <div id="mainMenuGfxTop"></div>
                    <div id="mainMenuWrapper">
                        <div id="mainMenuBgWrapper" class="clearfix">
                            <!--Menubar with tabs-->
                            <ul id="swapMenu" style=" ">
                                <li><a id="**tab1**"><span>Privat</span></a></li>
                                <li><a id="**tab2**"><span>Bedrift</span></a></li>
                            </ul>
                            <!--TAB1 submenu-->
                            <div id="**tab1_submenu**">
                                <dl class="firstColumn">
                                    <dt><a xmlns="" id="tab1submenu_item1">Lån og 
                                    eiendom</a></dt>
                                    <dd><a xmlns="" id="tab1submenu_item2">Boliglån ung               
                                    </a></dd>...**more menuitems follows.**
                            <!--TAB2 submenu-->
                            <div id="**tab2_submenu**">
                                <dl class="firstColumn">
                                    <dt><a xmlns="" id="tab2submenu_item1">Lån og 
                                    eiendom</a></dt>
                                    <dd><a xmlns="" id="tab2submenu_item2">Boliglån</a>
                                    </dd>...**more menuitems follows.** 
```

# iphone - 我们如何在没有 UICollectionViewController 的情况下使用 UICollectionView

> ID：14291889
> 
> 赞同：1
> 
> 时间：2013-01-12T09:09:40.300
> 
> 标签：iphone, uiviewcontroller, ios6, uicollectionview

通常，如果我们想使用`UICollectionView`，我们必须使用`UICollectionViewController`. 但现在我不想要了，所以我怎么能使用`UICollectionView`没有`UICollectionViewController`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T09:22:09.827

当然，您可以使用`UICollectionView`不带`UICollectionViewController`.

只需创建一个`UICollectionViewLayout`您选择的，然后调用

```
- (id)initWithFrame:(CGRect)frame collectionViewLayout:(UICollectionViewLayout *)layout 
```

创建一个新的实例`UICollectionView`。不要忘记为`UICollectionView`您的类设置委托和数据源，并实现`UICollectionViewDataSource`协议。

希望有帮助。

# prolog - 在 Prolog 中实现我自己的地图列表？

> ID：14291895
> 
> 赞同：3
> 
> 时间：2013-01-12T09:11:02.513
> 
> 标签：prolog, maplist

我想在 Prolog 中实现我自己的地图列表。

鉴于以下情况：

```
myMaplist(Goal, [Elem1|Tail1], [Elem2|Tail2]) :-
        apply(Goal, [Elem1, Elem2]), 
        myMaplist(Goal, Tail1, Tail2). 
```

什么是`apply`操作符，我怎样才能用**不是**库系统调用的东西来替换它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T09:16:35.043

如果您的 Prolog 有呼叫/N，请使用它：

```
myMaplist(Goal, [Elem1|Tail1], [Elem2|Tail2]) :-
        call(Goal, Elem1, Elem2), 
        myMaplist(Goal, Tail1, Tail2). 
```

否则用 univ 建立呼叫，并使用 call/1

```
myMaplist(Goal, [Elem1|Tail1], [Elem2|Tail2]) :-
        Pred =.. [Goal, Elem1, Elem2],
        call(Pred),
        myMaplist(Goal, Tail1, Tail2). 
```

**编辑**感谢@false 指出我必须更正。说实话，我在没有测试的情况下发布了该代码，但我肯定忽略了这个错误......这里是一个更正

```
myMapList(_, [], []).
myMapList(Goal, [Elem1|Tail1], [Elem2|Tail2]) :-
    Goal =.. [P|A],
    append(A, [Elem1, Elem2], Ac),
    Pred =.. [P|Ac],
    call(Pred),
    myMapList(Goal, Tail1, Tail2). 
```

测试：

```
?- myMapList(myMapList(=),[[1,2,3],[a,b,c]],L).
L = [[1, 2, 3], [a, b, c]] . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:21:51.210

纯序言基于一阶逻辑，这意味着您不能将谓词作为其他谓词的参数。因此，您无法实现映射谓词。

关于`apply/2`：[swipl手册](http://www.swi-prolog.org/pldoc/doc_for?object=apply/2)

# c++ - 如何在字符串流中放置一个字符串

> ID：14291896
> 
> 赞同：0
> 
> 时间：2013-01-12T09:11:06.233
> 
> 标签：c++, string, stl, stringstream

我有一个向量：

```
vector<stringstream*> ssv;
for (int i = 0; i < cIter; i++) {
    ssv.push_back(new std::stringstream);
} 
```

如何放入向量 ssv 字符串的元素？

我尝试：

```
string s1 = "easfef" + '\n';
int i = 0;
*ssv[i] << s1 << '\n'; 
```

但它给了我一个空字符串：

```
string sdf = ssv[i]->str(); 
```

我该怎么做？

感谢您对“\ n”的帮助，但它仍然是向量的问题：如果我写：

```
std::string s1 = "qwerqwr\n";   // for example
int i = 0;
*ssv[i] << s1; 
```

但是像以前一样给我一个空字符串

```
string sdf = ssv[i]->str(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T09:19:39.740

您的主要问题是如何初始化字符串：

```
"easfef" + '\n' 
```

`"easfef"`衰减为 a`const char *`并`'\n'`提升为`int`值为 10 的 a（假设为 ASCII）。然后，将两者相加，从而产生一个指向字符串文字之外某处的指针。很可能发生车祸，你的母亲被恐龙吃掉。

解决此问题的一种简单方法是强制执行`std::string`：

```
std::string s1 = std::string("easfef") + '\n'; 
```

一种更简单的方法是内联换行符：

```
std::string s1 = "easfef\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T09:20:16.277

在您的代码中

```
string s1 = "easfef" + '\n'; 
```

初始化表达式实际上将计算为

```
"easfef" + 10; 
```

它是指向字符串第十一个字符的指针。

但是没有这样的，所以你有**Undefined behavior**。

* * *

使固定：

```
string s1 = string() + "easfef" + '\n'; 
```

* * *

也就是说，对于`stringstream`您要解决的任何问题，指针向量几乎肯定是不切实际的解决方案。

尝试描述更高层次的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T09:22:08.020

在 C++ 中，字符串文字是**chars**的原始数组，数组可以被视为指针，而像 '\n' 这样的字符文字可以被视为数字，因此`"easfef" + '\n'`被解释为指针算术运算。

你应该写：

```
string s1 = "easfef";
s1 += '\n'; 
```

# git - 即使在“git pull”之后，Git 也会出现“非快进更新”错误

> ID：14291901
> 
> 赞同：3
> 
> 时间：2013-01-12T09:11:57.820
> 
> 标签：git, git-push, fast-forward

Github 是我项目的默认存储库（只是将“origin”重命名为“github”）。发生了一些事情，以至于“git push”导致“非快进更新”错误，即使“git push github master”有效。“git pull”和“git pull github master”都表示最新状态。我如何 (a) 确保 Github 上没有未合并的更改并 (b) 更正非快进错误？

```
$ git status
# On branch master
nothing to commit (working directory clean)
$ git pull
Already up-to-date.
$ git pull github master
From github.com:MikeBlyth/mission_net
 * branch            master     -> FETCH_HEAD
Already up-to-date.
$ git push github master
Everything up-to-date
$ git push
To git@github.com:MikeBlyth/mission_net.git
 ! [rejected]        add_command -> add_command (non-fast-forward)
error: failed to push some refs to 'git@github.com:MikeBlyth/mission_net.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

我的 git 配置文件是

```
[core]
  repositoryformatversion = 0
  filemode = true
  bare = false
  logallrefupdates = true
[remote "github"]
  url = git@github.com:MikeBlyth/mission_net.git
  fetch = +refs/heads/*:refs/remotes/github/*
[branch "master"]
  remote = github
  merge = refs/heads/master
[remote "heroku"]
  url = git@heroku.com:joslink.git
  fetch = +refs/heads/*:refs/remotes/heroku/*
  merge = refs/heads/master
[remote "heroku"]
url = git@heroku.com:joslink.git
fetch = +refs/heads/*:refs/remotes/heroku/* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:22:52.170

解释可能与用于远程“ `github`”的默认 refspec 有关：

```
+refs/heads/*:refs/remotes/github/* 
```

一个简单的`git push`推：

*   到与master关联的远程（这里是“ `github`”），因为`master`是当前分支（根据`git status`）
*   所有*其他*分支（`master` *和* `add_command`分支）

`add_command`是与`github`遥控器不同步的那个。

```
git checkout add_command 
git pull github 
```

然后一个`git push`会工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T10:12:13.320

'git push' 的语法支持显式版本和速记版本。显式版本`git push github master`适合您。速记版本`git push`没有。

如果您使用速记版本，则不会告诉 git 使用哪个远程以及应将哪个本地分支推送到哪个远程分支。因此 git 必须猜测你的意思。

您可以使用远程设置和 push.default 配置来配置它：

```
 push.default
       Defines the action git push should take if no refspec is given on
       the command line, no refspec is configured in the remote, and no
       refspec is implied by any of the options given on the command line.
       Possible values are:

       ·    nothing - do not push anything.

       ·    matching - push all matching branches. All branches having the
           same name in both ends are considered to be matching. This is
           the default.

       ·    upstream - push the current branch to its upstream branch.

       ·    tracking - deprecated synonym for upstream.

       ·    current - push the current branch to a branch of the same
           name. 
```

查看`git branch -vv`以检查当前分支跟踪的分支。然后检查`git config --get push.default`以验证它是否符合您的预期。

# forms - 在wordpress中从前端上传多张图片

> ID：14291908
> 
> 赞同：0
> 
> 时间：2013-01-12T09:13:29.343
> 
> 标签：forms, wordpress

我有一个 CPT “Annonce”，它应该有四个附加图像。现在我构建了一个前端表单，允许用户提交带有四个图像上传字段的帖子。当我尝试提交包含多个图像的表单时，只有最后一个图像显示在仪表板中。我在媒体部分看到了其他图片，但在帖子编辑页面中没有看到，因此我可以更改或删除主题。

我在 page-post.php 中使用此代码：

```
 if ( $_FILES ) {
        $files = $_FILES['upload_attachment'];
        foreach ($files['name'] as $key => $value) {
            if ($files['name'][$key]) {
                $file = array(
                    'name'     => $files['name'][$key],
                    'type'     => $files['type'][$key],
                    'tmp_name' => $files['tmp_name'][$key],
                    'error'    => $files['error'][$key],
                    'size'     => $files['size'][$key]
                );

                $_FILES = array("upload_attachment" => $file);

                foreach ($_FILES as $file => $array) {
                    $newupload = insert_attachment($file,$post_id);
                }
            }
        }
    }
...

<label for="postPhoto1">Photo 1 :</label>
<input type="file" name="upload_attachment[]" id="postPhoto1">

<label for="postPhoto1">Photo 2 :</label>
<input type="file" name="upload_attachment[]" id="postPhoto2"> 
```

在functions.php中我有这个功能：

```
function insert_attachment($file_handler,$post_id,$setthumb='false') {

  // check to make sure its a successful upload
  if ($_FILES[$file_handler]['error'] !== UPLOAD_ERR_OK) __return_false();

  require_once(ABSPATH . "wp-admin" . '/includes/image.php');
  require_once(ABSPATH . "wp-admin" . '/includes/file.php');
  require_once(ABSPATH . "wp-admin" . '/includes/media.php');

  $attach_id = media_handle_upload( $file_handler, $post_id );

  if ($setthumb) update_post_meta($post_id,'_thumbnail_id',$attach_id);
  return $attach_id;
} 
```

使用此表单，图像已成功上传，但只有最后一张图像被设置为特色图像，我也想在帖子编辑页面中显示其他图像。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T11:01:29.600

尝试这个

```
 < input type="file" id="attachment" name="attachment[]" multiple="multiple" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:11:22.513

您可以安装高级自定义字段插件，创建任意数量的图像字段，然后按照文档中描述的方法在前端使用它。 [http://www.advancedcustomfields.com/resources/tutorials/creating-a-front-end-form/](http://www.advancedcustomfields.com/resources/tutorials/creating-a-front-end-form/)

我在 wordpress 3.4.2 中测试并使用了此方法，后来的版本在从前端上传时出现问题。

# ios - 当我在 iOS 中关闭应用程序时会发生哪个事件？

> ID：14291910
> 
> 赞同：8
> 
> 时间：2013-01-12T09:13:46.470
> 
> 标签：ios, cocoa-touch

当我在 iOS 中关闭我的应用程序时，我需要实现事件，如下图所示。

![在此处输入图像描述](../Images/7205ddd7b867023d0b05679b3294784f.png)

当我用那个减号按钮关闭应用程序时，我想捕捉那个事件。

我需要做什么活动？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-12T09:19:52.710

当您的应用程序将要终止时，将调用此委托。

```
- (void)applicationWillTerminate:(UIApplication *)app
{
} 
```

如果您使用的是 iOS 4 或更高版本并具有多任务支持，`applicationWillTerminate`则不会被调用。

要接收终止事件，您需要`UIApplicationExitsOnSuspend`在您的`info.plist`

查看这篇[**文章**](http://www.cocoanetics.com/2010/07/understanding-ios-4-backgrounding-and-delegate-messaging/)以更好地了解应用程序事件。

![无需多任务](../Images/a51d3545b1250ce7aade5ad0defbe2cf.png)

![多任务处理](../Images/c2e693594f631acbb21fec8320f5df15.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T09:16:24.890

您可能希望实施

```
- (void)applicationWillTerminate:(UIApplication *)app; 
```

应用程序委托中的方法。

（[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW28)）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T09:17:11.620

你可以处理它

```
 - (void)applicationWillTerminate:(UIApplication *)application 
```

它告诉委托人应用程序何时将终止。

或者，您可以收听`UIApplicationWillTerminateNotification`通知。

另请参阅：[UIApplicationDelegate 协议参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-04T16:53:57.160

`func sceneDidDisconnect(_ scene: UIScene)`如果你正在使用`SceneDelegate`

# c# - 浮点数 C#

> ID：14291916
> 
> 赞同：2
> 
> 时间：2013-01-12T09:15:19.710
> 
> 标签：c#, floating-point

我的印象是，以这种格式声明和初始化浮点数是合法且常规的：

```
float someVariable = 12.502D;  (or M, F does not give a compiler error). 
```

但是我得到一个编译器错误：

> double 类型的文字不能隐式转换为 'float' 类型；使用“F”后缀来创建这种类型的文字。

C# 中有三种类型的浮点数，对吧？

1.  F 或 f 表示浮点数。（7 位有效数字）
2.  D 或 d 表示 Double。（15 或 16 位有效数字）
3.  M 或 m 表示十进制。（28 或 29 位有效数字）

为了修复编译器错误，我明确地转换了赋值语句：

```
float SomeVariable = (float) 12.525D; 
```

在这种情况下我做对了吗？声明和初始化由 Double 或 Decimal 值组成的浮点变量的常规或正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T09:23:29.727

用更简单的英语来说，编译器为文本字符串 12.502 假定的默认类型是 double。double 的大小是 float 的两倍，就像一夸脱装不下一品脱一样，double 不能存储在 float 中，除非您进行强制转换，否则会失去精度。

您可以告诉编译器 12.502 实际上是一个浮点数，您可以通过添加 F 或 f 后缀来执行此操作，如下所示：

```
float someVariable = 12.502f; 
```

或者：

```
double someVariable = 12.502; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:20:21.923

你为什么不使用：

```
float someVariable = 12.502f; 
```

或者

```
double someVariable = 12.502; //floating point literals are by default doubles 
```

`float`是单精度浮点运算，不能`double`在 C# 中隐式转换为。在 C# 中，每个可能丢失某些信息的强制转换都不能是隐式的。`float`有 32 位来存储浮点精度的分量。`double`有 64 位。

`float`可以从`1.5 × 10^-45`to取值`3.4 × 10^38`

`double`可以从 `5.0 × 10^-324`to取值`1.7 × 10^308`

所以你可以看到双打可以存储更大范围的值。因此，如果您转换`double`为`float`您可能会丢失信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T10:24:03.073

如果你写`float SomeVariable = (float) 12.525D;`，那么十进制数字首先转换为双精度数，然后再转换为浮点数。在极少数情况下，根据数字，这种双舍入会稍微改变值。

用 F 后缀写数字可以避免这种情况。

（如果数字在某种意义上是均匀分布的，这将在 2 ^(30)中发生一次，因为浮点有效数中的位比双有效数中的位少 29 位。当原始数字以双精度四舍五入时，就会出现问题浮点舍入的中点 [2 ^(29)中的一次]，但如果直接舍入为浮点，则从该中点舍入到 [2 中的一次] 的另一个方向舍入。）

# linux - Linux内核内存屏障

> ID：14291920
> 
> 赞同：4
> 
> 时间：2013-01-12T09:16:18.557
> 
> 标签：linux, linux-kernel, memory-barriers

我是 Linux 内核编程的新手。我对*GUARANTEES*章节中[的内存障碍](http://www.kernel.org/doc/Documentation/memory-barriers.txt)文档感到困惑。

 *> 特定 CPU 中的重叠加载和存储似乎在该 CPU 中是有序的。
> 
> ```
> *X = c; d = *X; 
> ```
> 
> CPU**只会**发出：
> 
> ```
> STORE *X = c, d = LOAD *X 
> ```

然后是另一个例子：

> *必须*假设可以合并或丢弃重叠的内存访问。
> 
> ```
> *A = X; Y = *A; 
> ```
> 
> 我们可能会得到**：**
> 
> ```
> STORE *A = X; Y = LOAD *A;
> STORE *A = Y = X; 
> ```

它们看起来一样，这两个例子有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:26:52.390

你是对的，文档不正确。实际上您的文件版本不是最新的。3.8-rc3 中有一个提交修复了该问题： [http ://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=commitdiff;h=f191eec58803e1e16c3421638cdcc9195c425851](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=commitdiff;h=f191eec58803e1e16c3421638cdcc9195c425851)

希望有帮助。马蒂亚斯*

# ios - 如何接收其他应用程序的推送通知？

> ID：14291925
> 
> 赞同：11
> 
> 时间：2013-01-12T09:17:22.037
> 
> 标签：ios, notifications, push, pebble-watch

你们中的大多数人可能都知道卵石手表，这款手表会收到您手机的推送通知。

他们能够接收一些通知。

*   来电显示
*   电子邮件（Gmail 或任何 IMAP 电子邮件帐户）
*   Android 和 iPhone 上的短信
*   iMessage（仅限 iOS）
*   日历提醒
*   脸书消息
*   推特
*   天气警报
*   静音振动闹钟和定时器

我该怎么做？也许他们使用 facebook api 或类似的东西自己写了一些通知。但是如何用短信和电话做到这一点？

你能捕捉到哪些通知？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T13:59:56.227

Pebble 使用蓝牙与智能手机通信。请查找 iPhone(iOS6) 的答案和相关链接。

```
Incoming Caller ID                                 CoreTelephony Framewerk 
```

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html)

您必须使用 PBAP 在蓝牙设备上显示来电显示，并且设备必须是 MFi 才能与 iPhone 应用程序通信。

```
Email (Gmail or any IMAP email account)            PushNotifications 
SMS and iMessage                                   PushNotifications with MAP 
```

[https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

```
Calendar Alerts                                    EVentKit Framework 
```

[http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EventKitFrameworkRef/_index.html](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EventKitFrameworkRef/_index.html)

```
Facebook Messages                                  Social Framework
Twitter                                            Social Framework 
```

[http://developer.apple.com/library/ios/#documentation/Social/Reference/Social_Framework/_index.html#//apple_ref/doc/uid/TP40012233](http://developer.apple.com/library/ios/#documentation/Social/Reference/Social_Framework/_index.html#//apple_ref/doc/uid/TP40012233)

```
Weather Alerts                         Any weather API from yahoo or MSN 
```

以下代码可用于振动 iPhone

添加 AudioToolbox 框架导入 AudioServices.h

AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-12T00:31:10.447

尝试查看功能 Apple 通知中心服务 (ANCS) [https://developer.apple.com/library/ios/documentation/CoreBluetooth/Reference/AppleNotificationCenterServiceSpecification/Specification/Specification.html](https://developer.apple.com/library/ios/documentation/CoreBluetooth/Reference/AppleNotificationCenterServiceSpecification/Specification/Specification.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T12:54:26.097

它使用蓝牙并通过它来访问所有数据。它没有做任何花哨的事情。但是，所有这些数据都来自操作系统，而不是设备上的应用程序。

回答您的问题 - 无法在您自己的应用程序中获取所有这些通知。您可以使用 CoreTelephony 访问与来电相关的一些数据，并且您可以集成 Facebook 和 Twitter API 来获取这些数据，但您确实必须自己完成这一切。不幸的是，这里没有灵丹妙药！

# iphone - 由于 UIKeyboardInputManager 导致的 Iphone App 内存泄漏

> ID：14291927
> 
> 赞同：0
> 
> 时间：2013-01-12T09:17:27.000
> 
> 标签：iphone, ios

由于 UIKeyboardInputManager，我的应用程序中发生了内存泄漏。我该如何解决？请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:14:28.117

如果您使用的是模拟器，请不要担心。这并不是一个很好的指标，可以很好地表明内存在真实设备上的工作方式。使用真实设备重复您的测试。

此外，似乎[内存管理](https://stackoverflow.com/questions/1691528/uitextfield-memory-leak)[存在错误`UITextField`](https://stackoverflow.com/questions/1691528/uitextfield-memory-leak)。

# asp.net - 从外部（运行）进程的未处理异常中获取异常信息

> ID：14291929
> 
> 赞同：1
> 
> 时间：2013-01-12T09:17:34.770
> 
> 标签：asp.net, iis, azure

我在 Azure 上有一个带有 Web API 的基于 ASP.NET 的 Web 应用程序。昨天，每当调用 API 调用之一时，我就开始从应用程序中获取异常。

目前我没有拦截应用程序异常的异常记录器，但是，我对每个 API 调用都有审计日志记录，99% 的时间会捕获异常并向我报告问题。

在这种特殊情况下，从审计日志开始，堆栈中似乎出现了异常。老实说，我写的代码并不多，在上面被调用。还配置了 IIS 错误页面，因此不会将异常信息传递给客户端。我查看了事件日志，里面什么都没有。

为了解决这个问题，我启动了一个新的 Azure 实例，使其生效并将有问题的实例降级为暂存。新实例工作正常。如果我通过重新配置 web.config 以禁用 IIS 错误来重新启动（现在）暂存实例，那么该实例也可以正常工作！

那么有谁知道我如何从正在运行的应用程序域中提取未处理的异常信息而无需重新启动它或以任何方式影响它？

我很快就会进行异常登录，别担心 :-) 但是如果有办法解决这个问题而不必等待问题再次发生，那就太好了！

更新：我登录到服务器并设法从“详细响应”中获取以下信息：

> HTTP 错误 500.0 - 内部服务器错误 该页面无法显示，因为发生了内部服务器错误。详细错误信息：
> 
> 模块 ManagedPipelineHandler
> 
> 通知 ExecuteRequestHandler
> 
> 处理程序 System.Web.Http.WebHost.HttpControllerHandler
> 
> 错误代码 0x00000000
> 
> 请求的 URL http://10.77.52.122:80/api/Login
> 
> 物理路径 E:\sitesroot\0\api\Login
> 
> 登录方法匿名
> 
> 登录用户匿名
> 
> 请求跟踪目录
> C:\Resources\directory\34c6b40352d4449d8a19274caa328300.Web.UI.DiagnosticStore\FailedReqLogFiles\Web

然后我配置了失败的请求跟踪——它立即使错误消失了！

有人有想法么？我可能不得不等待它再次发生，但到那时会有更多的异常记录。

谢谢克里斯

# rss - 如果所有提要项的 pubDate 相同，则 Mule RSS FeedSplitter 仅返回一个结果

> ID：14291938
> 
> 赞同：2
> 
> 时间：2013-01-12T09:18:55.657
> 
> 标签：rss, mule

如果所有项目的 pubDate 相同，Mule 的 rss:feed-splitter 组件即使提要包含多个项目也仅返回单个项目。

在这种情况下，有什么办法可以拿到所有的物品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:58:39.430

您面临的问题是由于`FeedSplitter`默认情况下依赖于`EntryLastUpdatedFilter`接受或拒绝提要条目。此过滤器基于更新时间，因此任何与已处理的另一个条目具有相同时间的条目都将被拒绝。

我还没有找到任何干净的方法来配置`<rss:feed-splitter>`元素以接受所有 RSS 条目，因此我必须将其实例化为自定义过滤器才能对其进行配置，如下所示：

```
<custom-splitter class="org.mule.module.rss.routing.FeedSplitter">
    <spring:property name="entryFilter">
        <spring:bean class="org.mule.routing.filters.AcceptAllFilter" />
    </spring:property>
</custom-splitter> 
```

这让所有 RSS 条目都经过拆分过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:35:43.197

根据[rss 模块文档](http://www.mulesoft.org/documentation/display/MULE3USER/RSS+Module+Reference)rss:feed-splitter

> 将提要的条目拆分为单个条目对象。每个条目将是 Mule 中的一条单独消息。

所以你正在经历的是预期的行为。

您可以做的是编写一个自定义聚合器，该聚合器基于 pubDate 进行聚合，以便传播到下一个消息处理器的消息将是一个 mule 消息集合，其中包含具有相同 pubDate 的所有消息

# azure - 是否可以在 WorkerRole 中启动 VM？

> ID：14291939
> 
> 赞同：3
> 
> 时间：2013-01-12T09:18:55.390
> 
> 标签：azure

我有一个小操作系统，我想在 Azure 中启动和使用，并考虑在 WorkerRole 中运行 VM。我知道可以为此使用 Azure VM 角色，但我的练习是从 Worker/WebRole 内部运行它。那可能吗？

我尝试安装 VirtualBox 并在 WorkerRole 中运行它，但是在运行操作系统时，我的 WorkerRole 只是重新启动。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:12:44.687

You cannot run a VM inside a VM in Azure. A Worker Role (or *instances* of a Worker Role) are already Windows Server 2008 / 2012 VMs. As @Robert pointed out, Azure has support for Virtual Machines, whether Linux or Windows, where you have complete control of its contents.

Regarding **I have a little OS that I'd like to start**: You can only run supported OS's that are listed in the Virtual Machine gallery: Ubuntu, CentOS, Windows Server, SUSE currently. More info on Linux VMs [here](http://www.windowsazure.com/en-us/manage/linux/), Windows Server [here](http://www.windowsazure.com/en-us/manage/windows/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T14:32:23.723

您尝试执行的操作不受 Microsoft 的技术支持，也不推荐（即使您可以轻松），因为 Azure 会不断地在部署中关闭并恢复您的 Web/Worker 角色实例。

这意味着在 Azure 退回您的部署（即数据中心问题、迁移等）时，对您的 WorkerRole 所做的任何手动更改都将被撤消。这种情况比您想象的要频繁得多。

你应该查看 Azure 的[VM 支持](http://www.windowsazure.com/en-us/home/features/virtual-machines/)，它可能有你需要的东西。

# python - 从python中的字符串中删除空白字符

> ID：14291940
> 
> 赞同：0
> 
> 时间：2013-01-12T09:19:03.643
> 
> 标签：python

我有嵌套列表。在这个列表中，每个嵌套列表都包含两个组件，每个组件可能包含空白（''）字符。我想删除并编写一段代码但无法使其工作。我该如何克服这个问题 ？

List 的嵌套列表是：

```
[['bike', '2 * wheel+1* frame'], ['wheel', '1  * rim + 1* spoke +1 *hub'], ['rim', 60], ['spoke', 120], ['hub', '2*gear+1*axle'], ['gear', 25], ['axle', '5*bolt+7*nut'],['bolt',0.1], ['nut', 0.15],['frame', '1*rearframe+ 1*frontframe'],['rearframe', 175],['frontframe', '1*fork+2*handle'], ['fork', 22.5],['handle', 10.0]] 
```

如所见，某些字符串中有一些空格。

我写的python代码：

```
def blanks(des):
    a = 0
    while a < len(des): 
        if type(des[0][1]) == str: 
            des[0][0] = des[0][0].replace(' ','')
        if type(des[0][1]) == str:
            des[0][1] = des[0][1].replace(' ','')
        a += 1

    return des 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:29:04.453

请改用`for`循环。

```
def blanks(lis):
    for i, _ in enumerate(lis):
        for j in range(2):
            if isinstance(lis[i][j], str):
                lis[i][j] = lis[i][j].replace(' ', '')
    return lis 
```

列表理解也可以。

```
def blanks(lis):
    return [i.replace(' ', '') if isinstance(i, str) else i for a in lis for i in a] 
```

或者只是没有函数定义：

```
lis = [[i.replace(' ', '') if isinstance(i, str) else i for i in a] for a in lis] 
```

我认为这应该做你想要的。但是，如果您的嵌套列表的深度不一致，则最好使用生成器函数。

```
def blanks(lis):
    for i, el in enumerate(lis):
        if isinstance(el, list):
            blanks(el)
        elif isinstance(el, str):
            yield el.replace(' ', '')
        else:
            yield el 
```

有关最后一段代码的更多信息，另请参阅[此答案。](https://stackoverflow.com/a/2158532/1907098)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:41:01.070

尝试这个：

```
def removeBlanks(input):

  if type(input) is list:
    ret=[]
    for i in input:
      ret.append(removeBlanks(i))
  else:
    ret=input.replace(" ", "")

  return ret 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T09:30:42.133

这将是一种方法：

```
map(lambda x:map(lambda y:y.replace(' ','') if isinstance(y,str) else y,x),a) 
```

`a`您传递的输入列表在哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T10:23:38.243

在 python 中，您通常希望遵循[EAFP](http://docs.python.org/2/glossary.html#term-eafp)并捕获异常，而不是使用以下命令预先验证输入`isinstance`：

```
def no_blanks(s):
    try:
        return s.replace(' ', '')
    except AttributeError:
        return s

ls = [['bike', '2 * wheel+1* frame'], ['wheel', '1  * rim + 1* spoke +1 *hub'], ['rim', 60], ['spoke', 120], ['hub', '2*gear+1*axle'], ['gear', 25], ['axle', '5*bolt+7*nut'],['bolt',0.1], ['nut', 0.15],['frame', '1*rearframe+ 1*frontframe'],['rearframe', 175],['frontframe', '1*fork+2*handle'], ['fork', 22.5],['handle', 10.0]]

new_ls = [[no_blanks(a), no_blanks(b)] for a, b in ls] 
```

还要仔细查看您的列表，在我看来，这`dict`可能是您数据的更好选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T09:34:28.700

好的，因为没有限制或任何固定参数，您将不得不使用一点递归来解决您的问题。

```
def trimSpaces(list):
  for i in range(0,len(list)):
    if type(list[i]) == str:
      list[i] = list[i].replace(' ','')
    elif type(list[i]) == type([]):
      list[i] = trimSpaces(list[i])
    else:
      continue
  return list 
```

# android - android捏缩放比例视图滚动条移动

> ID：14291942
> 
> 赞同：0
> 
> 时间：2013-01-12T09:19:36.733
> 
> 标签：android, view, scrollbar, scale

我有一个线性布局的视图。该应用程序是音乐符号，它是一系列换行的音乐条，因此它们始终小于屏幕宽度（无水平滚动）。当乐谱变得太大而无法查看时，会有一个垂直滚动条。到目前为止，一切都很好。我可以上下滚动很好。

现在我正在实现捏缩放，我在 ScaleGestureDetector 中设置了一个 onScale，保存比例因子，无效并在 onDraw 中我使用像这样的比例因子 canvas.scale(mScaleFactor, mScaleFactor);

它可以缩放视图，除了它没有完全按照我想要的方式进行。我希望画布的绘图区域像它一样缩放，但滚动条保持在原位，但缩放将其发送到一边，看不见。

知道如何缩放视图而不是滚动条吗？

顺便说一句，我可以通过将比例因子应用于宽度来重新计算音乐条的换行位置，这实际上只是滚动条显示的问题。

谁能帮忙？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:58:14.380

我想出了办法。我需要将滚动条的绘制与主乐谱视图的绘制分离。这样我就可以在不影响滚动条的情况下缩放主符号视图。

所以我使用线性布局来创建 2 个视图 -

```
layout.setLayoutParams(new LinearLayout.LayoutParams(
                    LinearLayout.LayoutParams.MATCH_PARENT,
                    LinearLayout.LayoutParams.WRAP_CONTENT, 
                    100));
            layout.setOrientation(LinearLayout.HORIZONTAL);

            Globals.mMainView = new MainView(context);
            Globals.mMainView.setLayoutParams(new LinearLayout.LayoutParams(0, LinearLayout.LayoutParams.WRAP_CONTENT, 60));
            layout.addView(Globals.mMainView);

            Globals.mScrollbarView = new ScrollbarView(context);
            Globals.mScrollbarView.setLayoutParams(new LinearLayout.LayoutParams(20, LinearLayout.LayoutParams.WRAP_CONTENT, 0));
            layout.addView(Globals.mScrollbarView); 
```

然后我从 MainView 中删除滚动条的显示并将它们放在 ScrollbarView 中。

然后我在 ScrollbarView 中使用 onScroll 事件来控制 MainView 中的滚动。我必须记住从 ScrollbarView.computeVerticalScrollRange 返回 MainView 的实际显示长度，以便滚动条大小显示正常。

因为我参考了保存为全局变量的两个视图，所以它们很容易在必要时相互交谈。

# ruby - 下面的 Array 方法在 Ruby 中有何不同？

> ID：14291945
> 
> 赞同：-3
> 
> 时间：2013-01-12T09:19:52.527
> 
> 标签：ruby, arrays

我对下面的 Array 方法感到困惑。任何人都可以通过简单的代码片段帮助我了解它们之间的工作方式有何不同？

*   `array.sort`和`array.sort { | a,b | block }`
*   `array.to_a`和`array.to_ary`
*   `array.size`和`array.length`
*   `array.reverse`和`array.reverse_each {|item| block }`
*   `array.fill(start [, length] ) { |index| block }`和
    `array.fill(range) { |index| block }`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:36:17.940

请阅读[Array 的文档](http://www.ruby-doc.org/core-1.9.3/Array.html)。

**种类：**

```
a=[3,1,2]
a.sort              # => [1, 2, 3] 
a.sort{|a,b| b<=>a} # => [3, 2, 1] 
```

如果您需要某种自定义方式对元素进行排序，请使用第二种方法。

**to_a 与 to_ary：**

```
class Foo < Array;end
b=Foo[1,2]
b.to_ary.class # returns self
b.to_a.class   # converts to array 
```

大小和长度完全一样。

reverse_each 与 reverse.each 几乎相同。

如果只想填充数组的一部分，可以使用 a`range`或调用 Array.fill `start,length`。这些只是实现相同目标的不同方法：

```
(["a"]*10).fill("b",2..7)
(["a"]*10).fill("b",2,6) 
```

两者都返回`["a", "a", "b", "b", "b", "b", "b", "b", "a", "a"]`。

# javascript - 在Javascript中循环，多个变量

> ID：14291946
> 
> 赞同：-2
> 
> 时间：2013-01-12T09:19:57.997
> 
> 标签：javascript, jquery, loops, for-loop

我有一个 MySQL 数据库，我从中获取数据以在我的谷歌地图上显示一个标记。我想显示 n 个标记，但我不知道如何实现 for 循环，以便

```
var marker = new google.maps.Marker({
position: myLatlng,
map: map,
title: 'Hello World!',
}); 
```

会重复n次。我已经尝试添加 for 循环功能，但我无法做到正确。我才刚刚开始学习 JavaScript。

**这是其余的代码：http: [//jsfiddle.net/Wkn9v/7/](http://jsfiddle.net/Wkn9v/7/)**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T09:33:17.030

你尝试了什么？for 循环工作正常[http://jsfiddle.net/Wkn9v/3/](http://jsfiddle.net/Wkn9v/3/)

```
for(var i=0; i < 3; i++) {
      var myLatlng = new google.maps.LatLng(-25.363882 + i/2, 131.044922);
      var marker = new google.maps.Marker({
          position: myLatlng,
          map: map,
          title: 'Hello World!',
      });
} 
```

也许您在循环中使用相同的纬度/经度？如果是这样，它们在彼此之上，并且看起来像一个标记？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T09:40:13.410

我修改了您的代码，以便在初始化函数中执行逻辑，否则循环无法正确执行。在错误的地方也有一些其他的东西。这有效：

```
jQuery(function ($) {
  var map_canvas = document.getElementById('map_canvas');

  $.getJSON('http://www.wawhost.com/appProject/fetchmarker.php?callback=?', function (data) {
    initialize(data);
  });

  function initialize(data) {
    var myLatlng = new google.maps.LatLng(-25.363882, 131.044922),
      mapOptions = {
        zoom: 4,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      },
      map = new google.maps.Map(map_canvas, mapOptions),
      pos, lat, lng, latlang, marker;

    for (var i = 0, l = data.length; i < l; i++) {
      localStorage.loc = data[i].location;

      pos = localStorage.loc.split(",");
      lat = parseFloat(pos[0]);
      lng = parseFloat(pos[1]);

      latlang = new google.maps.LatLng(lat, lng);

      marker = new google.maps.Marker({
        position: latlang,
        map: map,
        title: 'Hello World!' // <<< Keep in mind that trailing , that was here is unnecessary
      });
    }
  }

}); 
```

[http://jsfiddle.net/userdude/Wkn9v/13/](http://jsfiddle.net/userdude/Wkn9v/13/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T09:37:59.870

如果您有一个要运行的列表，并且您不需要正在使用的列表而是设置`markers`或诸如此类，您可以使用基于队列的方法迭代列表直到列表为空：

```
jQuery(document).ready(function ($) {
  (function initialize() {
    var pos = localStorage.loc.split(","),
      lat = parseFloat(pos[0]),
      lng = parseFloat(pos[1]),
      myLatlngs = [
        new google.maps.LatLng(-25.0, 131.0),
        new google.maps.LatLng(-26.0, 132.0),
        new google.maps.LatLng(-24.0, 130.0)
      ],
      myLatlngs,
      mapOptions = {
        zoom: 4,
        center: myLatlngs[0],
        mapTypeId: google.maps.MapTypeId.ROADMAP
      },
      map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    while (myLatlng = myLatlngs.shift()) {
      new google.maps.Marker({
        position: myLatlng,
        map: map,
        title: 'Hello World!'
      });
    }
  })();
}); 
```

[http://jsfiddle.net/userdude/Wkn9v/9/](http://jsfiddle.net/userdude/Wkn9v/9/)

这里的“列表”指的是一个`array`，而不是一个`object`s 属性。因此，假设您从 fetch 脚本中得到以下内容：

```
data = [
  {"id":"1","published":"yes","location":"-25.363882,131.044922"},
  {"id":"2","published":"yes","location":" -24.96614015991296, 139.7900390625"},
  {"id":"3","published":"yes","location":"-28.76765910569124, 128.3203125"}
];

while (localStorage.loc = data.shift()) {
  pos = localStorage.loc.location.split(",");
  lat = parseFloat(pos[0]);
  lng = parseFloat(pos[1]);

  latlang = new google.maps.LatLng(lat, lng);

  marker = new google.maps.Marker({
    position: latlang,
    map: map,
    title: 'Hello World!'
  });
} 
```

我不确定你在`localStorage.loc`这里做什么，因为你每次都会覆盖它。如果你省略它，你可以[`while (pos = ...location.split(','))`](http://jsfiddle.net/userdude/Wkn9v/16/)改为设置。仅取决于您在做什么以及如何`data`在脚本中与之交互。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T09:40:17.790

您可以使用这样的`for`循环：

```
var myLatlng = [
    new google.maps.LatLng(-10.0, 10.0),
    new google.maps.LatLng(-10.2, 10.0),
    new google.maps.LatLng(-10.0, 10.2)
    ];

var marker;

for(var i = 0; i < myLatlng.length; i++) {
    marker = new google.maps.Marker({
        position: myLatlng[i],
        map: map,
        title: 'Hello World!',
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T09:48:31.200

这是您需要做的：http: [//jsfiddle.net/Wkn9v/10/](http://jsfiddle.net/Wkn9v/10/)

代码非常简单：

```
function initialize(data) {
  var map = new google.maps.Map(document.getElementById('map'), {
    center: new google.maps.LatLng(-25.363882, 131.044922),
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    zoom: 4
  });

  var length = data.length;

  for (var i = 0; i < length; i++) {
    var loc = data[i].location;
    var pos = loc.split(",");
    var lat = +pos[0];
    var lng = +pos[1];

    var marker = new google.maps.Marker({
      position: new google.maps.LatLng(lat, lng),
      map: map
    });
  }
} 
```

这是它的作用：

1.  创建以固定位置为中心的地图。
2.  对于通过 AJAX 获取的每个位置，它都会创建一个新标记。

# java - 使用 SQlite 在整个表中搜索关键字

> ID：14291949
> 
> 赞同：0
> 
> 时间：2013-01-12T09:20:31.157
> 
> 标签：java, sql, sqlite

使用关键字搜索数据库：

![](../Images/d404419baec75d268dd4f7caf02c3b93.png)

有没有办法查询整个 SQLite 数据库表以查找匹配的单词。我试图在关键字中放置一个单词，`JTextField`以便它搜索整个`Job`表并返回包含匹配单词的行。每一行代表一个独特的工作。

我认为下面的剪断结构不会达到结果

```
SELECT * FROM Job WHERE Job MATCH 'Microsoft'; 
```

有什么快速简单的推荐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:00:29.833

我不知道 sqlite 但在 mysql 我们有全文搜索用作

select * from table where match(name) against('value')

只看sqlite中是否有天气全文搜索，我发现这个链接验证它

[http://www.sqlite.org/fts3.html#section_3](http://www.sqlite.org/fts3.html#section_3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:21:49.933

看来您可以使用您建议的语法，只要它是一个全文搜索表：

[http://www.phparch.com/2011/11/full-text-search-with-sqlite/](http://www.phparch.com/2011/11/full-text-search-with-sqlite/)

您可能应该阅读[有关 FTS 表的官方 SQLite 文档](http://www.sqlite.org/fts3.html)。请注意，这些是“虚拟”表，因此不会以相同的方式使用数据库文件 - 这可能不是您想要的，但它与您正在寻找的语法相匹配。链接的 SQLite 页面有很好的描述。请注意，FTS 模块是可选的附加模块，可能未安装。

只要您使用占位符，您就不必担心 SQL 注入攻击。看看[这个 SO question](https://stackoverflow.com/questions/41233/java-and-sqlite)，特别是代码片段的第二个答案。本质上，您将 a`?`放入语句中，然后将要替换的字符串作为参数提供给查询函数。那应该为您进行 SQL 转义。

# php - 如何在 Wordpress 中的 php 文件上调用 css？

> ID：14291951
> 
> 赞同：0
> 
> 时间：2013-01-12T09:20:44.107
> 
> 标签：php, css, wordpress

> **可能重复：**
> [如何在我的 wordpress 插件中包含 CSS 和 jQuery？](https://stackoverflow.com/questions/3760222/how-to-include-css-and-jquery-in-my-wordpress-plugin)

我打算在 wordpress 插件上添加一个按钮

我想在按钮上添加一种样式，我知道将 css 调用到 html 文件中的基本方法。

```
<link rel="stylesheet" type="text/css" href="buttonPro.css"> 
```

但它不适用于 php 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:45:44.397

你可以这样称呼它：

```
<link rel="stylesheet" href="<?php bloginfo('template_url'); ?>
/css/style.css" media="screen" /> 
```

当您的样式表位于名为“css”的子目录中并且实际文件名为“style.css”时。不要忘记在 php 中转义 HTML 代码：

```
<?php 
   put some php code here
?>

   **put some HTML code here**

<?php
   now you can continue with php
?> 
```

# sql - 包含“$$”和“%”的sql server匹配字段

> ID：14291954
> 
> 赞同：0
> 
> 时间：2013-01-12T09:21:05.393
> 
> 标签：sql, where-clause, collate

我在 sql 表中的一列包含如下值

```
$$ADC.ES%32,A 
```

如何在我的 select where 子句中匹配它？

```
Select .... From .... Where ColumnName = '$$ADC.ES%32,A' 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:53:35.617

它应该以任何方式通过您的查询找到尝试这个

select * from table where name like '$$ADC.ES%32,A'

# html - 文本超出框

> ID：14291957
> 
> 赞同：1
> 
> 时间：2013-01-12T09:21:54.667
> 
> 标签：html, css

我正在尝试创建一个 128 像素 x 192 倍的框，其中包含标题和文本。如果文本太长，我希望出现一个滚动条来滚动文本，但标题不应该滚动。

问题是文本超出了框的边界。

我怎样才能解决这个问题？

JSFiddle：http: [//jsfiddle.net/qr8aK/](http://jsfiddle.net/qr8aK/)

html:

```
<body>
<h1>JavaScript sample</h1>

<div id="square"></div>

<div class="card-front">
  <div class="card-title">Hello Friends</div>
  <img class="card-image" src="grizzly.jpg">
  <div class="card-text">
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  hello friends
  </div>
</div>    
</body> 
```

CSS：

```
.card-front {
  width: 128px;
  height: 192px;
  background-color: green;
  border: 2px inset gray;
}

.card-title {
  width: 90%;
  height: 1em;
  background-color: white;
  border: 0px;
  text-align: center;
  margin-top: 4px;
  margin-left: auto;
  margin-right: auto;
}

.card-text {
  width : 90%;
  height: auto;
  display: block;
  margin-top: 4px;
  margin-left: auto;
  margin-right: auto;
  margin-bottom: 4px;
  overflow: auto;
  background-color: white;
} 
```

* * *

这是我第一次使用 HTML 和 CSS，所以我可能做错了很多事情。任何其他意见表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:24:32.943

尝试css[`overflow`](https://developer.mozilla.org/en-US/docs/CSS/overflow)属性

```
.card-front {
  width: 128px;
  height: 192px;
  background-color: green;
  border: 2px inset gray;
  overflow-y:scroll;
} 
```

[**提琴手**](http://jsfiddle.net/3bj7f/)

* * *

**已编辑**

```
.card-text {
  width : 90%;
  overflow-y:scroll;

  display: block;
  margin-top: 4px;
  margin-left: auto;
  margin-right: auto;
  margin-bottom: 4px;
 height:150px;

 background-color: white;
 } 
```

[**提琴手**](http://jsfiddle.net/V4usB/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T09:26:15.560

```
.card-text {
  width : 90%;
  height: 150px;//specify height
  display: block;
  margin-top: 4px;
  margin-left: auto;
  margin-right: auto;
  margin-bottom: 4px;
  overflow: auto;
  background-color: white;

} 
```

[演示](http://jsfiddle.net/qr8aK/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T09:25:10.167

尝试

```
overflow:scroll; 
```

当文本溢出时，这会给你一个滚动条。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T09:28:12.717

您必须定义高度并在卡片文本中添加溢出。

```
.card-text {
width : 90%;
height: 155px;
display: block;
margin-top: 4px;
margin-left: auto;
margin-right: auto;
margin-bottom: 4px;
background-color: white;
overflow:scroll;
} 
```

# sql-server-2008 - C# 错误为语法错误为 ','

> ID：14291964
> 
> 赞同：-1
> 
> 时间：2013-01-12T09:23:02.730
> 
> 标签：sql-server-2008, c#-2.0

以下代码给了我一个错误；

```
dt = sFunctions.ExecuteQuery(Variables.con, "House_Machinery", "usp_housemachinery_Master_insert" + Id + ",'" + txtItemName.Text + "'," + txthp.Text + "," + txtrate.Text + "," + Variables.sTendercode + "," + Variables.StrResourceHeaderCode);
                sFunctions.setSqldbConnCommand_Close(sSqldbCommand); 
```

',' 附近的语法不正确

任何人都可以对此提供见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:26:16.617

这可能是因为存储过程后缺少空格

```
dt = sFunctions.ExecuteQuery(Variables.con, "House_Machinery", 
  "usp_housemachinery_Master_insert " + Id 
```

我还建议您考虑以下技术来消除此类问题：

*   使用[ADO.NET 参数](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)
*   或使用[string.Format](http://msdn.microsoft.com/en-us/library/b1csw23d.aspx)以便于阅读

# android - 将参数传递给 AsyncTask

> ID：14291966
> 
> 赞同：0
> 
> 时间：2013-01-12T09:23:10.750
> 
> 标签：android, parameters, android-asynctask, imageview, drawable

嗨，我正在尝试通过 AsyncTask 从 url 链接中获取图像，获取图像本身的功能可以正常工作。但我想做的是将 src 变量传递给 asyncTask ，这似乎对我不起作用。退货将是空白的。

这是代码：

```
 private AsyncTask<String, Void, Drawable> task2;
 Drawable profile;
 public Drawable getProfile(String src){        
    task2 = new AsyncTask<String, Void, Drawable>() {           
        ProgressDialog dialog2;
        InputStream is;
        Drawable d;
        @Override 
        protected void onPreExecute(){
            dialog2 = new ProgressDialog(Thoughts.this, ProgressDialog.STYLE_SPINNER);
            dialog2.setMessage("Loading Data...");          
            dialog2.setCancelable(false);
            dialog2.setCanceledOnTouchOutside(false);   
            dialog2.show();
        }
        @Override
        protected Drawable doInBackground(String... src) {
                try
                {
                    is = (InputStream) new URL(src[0]).getContent();
                    d = Drawable.createFromStream(is, "src name");
                    return d;
                }catch (Exception e) {
                    e.toString();
                    return null;
                }
        }
        @Override
        protected void onPostExecute(Drawable result2) {
            profile = result2; 
            dialog2.dismiss();
        }
    };
    task2.execute(src);
    return profile;
} 
```

我在 onCreate() 中这样称呼它；

```
Drawable p4 = getProfile("http://..../xyz.jpg");
Drawable p5 = getProfile("http://..../xyz.jpg");

ImageView thoughtsProfilePic =(ImageView) findViewById(R.id.ivProfilePicData);
ImageView thoughtsProfilePic1 =(ImageView) findViewById(R.id.ivProfilePicData1);

thoughtsProfilePic.setImageDrawable(p4);
thoughtsProfilePic1.setImageDrawable(p5); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:57:37.087

`AsyncTask`帮助您完成异步工作。在您的代码中，我可以看到您`Drawable` 在调用它后立即返回。但是在那一刻，您的 asynctask 尚未完成，并且 drawable 仍然为空。

```
task2.execute(src);
return profile; 
```

如果您想在异步任务中完成作业时设置可绘制资源，只需将您的`ImageView`放入您的方法中。它应该是：

```
 public void getProfile(String src, final ImageView v){           

         @Override
    protected void onPostExecute(Drawable result2) {

        // set drawable for ImageView when complete.
        v.setImageDrawable(result2);
        dialog2.dismiss();
    }
    task2.excute(src);
    //do not need return anything.
  } 
```

用它：

```
 ImageView thoughtsProfilePic =(ImageView) findViewById(R.id.ivProfilePicData);
 getProfile("http://..../xyz.jpg", thoughtsProfilePic ); 
```

希望这有帮助。

**更新**：
无法直接从异步方法返回值，这是另一种选择。首先，创建一个接口来通知何时完成作业。

```
 public interface INotifyComplete{  
      public void onResult(Drawable result);  
 } 
```

然后您的活动类应如下所示：

```
 public class YourActivity extends Activity implement INotifyComplete{
 private Drawable res1;
 private Drawable res2;
 public void onResult(Drawable result){
    if(result == res1){
        // do something with resource 1
        ImageView thoughtsProfilePic =(ImageView) findViewById(R.id.ivProfilePicData);
        thoughtsProfilePic.setImageDrawable(result);
    }
    if(result == res2){
        // do something with resource 2
    }
  }

 void someMethod(){
// you can use this way to call
    getProfile("http://..../xyz.jpg", res1, YourActivity.this);
    //or this
    getProfile("http://..../xyz.jpg", res2, new INotifyComplete(){
        public void onResult(Drawable result){
            // result is res2, so don't need to check
        }
    });
 }
 public void getProfile(String src, final Drawable res, final INotifyComplete notify){
   //don't need store asynctask instance
    AsyncTask<String, Void, Drawable>  task2 = new AsyncTask<String, Void, Drawable>(){

        // do something ...

        protected void onPostExecute(Drawable result2) {             
        dialog2.dismiss();
        // you will set the value to your drawable then notify it when complete job
        res = result2;
        notify.onResult(res);
    }
    }
    task2.excute();
}
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:05:53.693

在您的活动中编写一个公共成员函数，该函数返回可绘制对象，只需在 asyncTask 类的 doInBackground() 方法中调用该函数。

```
Drawable downloadImage(){
//write code here to download image so you can return any dataType
} 
```

现在只需在 doInBackground() 方法中调用此函数并将返回的结果保存在您活动的某个变量中。

像

```
void doInBackground(){
    drawableVariable = downloadImage();    
} 
```

编辑： asyncTask 是您的后台线程，而不是 UI 线程，因此如果您想做任何 UI 工作，那么您必须通过 runOnUiThread() 方法在 UI 线程中执行该工作

```
runOnUiThread(new Runnable() {
           @Override
           public void run() {

               /* update your UI here for example what you are doing something */;
               profile = result2;
           }
       }); 
```

# objective-c - 使用 iPad Mini 进行 UIWebView 缩放

> ID：14291967
> 
> 赞同：0
> 
> 时间：2013-01-12T09:23:18.437
> 
> 标签：objective-c, cocoa-touch, uiwebview, ipad-mini

我为 iPad 开发的应用程序包含两个 UiWebView，并执行此代码以确保内容很好地适合屏幕：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
   [ipadWebMonth1 stringByEvaluatingJavaScriptFromString:@"document.body.style.zoom = 1.7;"];
   [ipadWebMonth2 stringByEvaluatingJavaScriptFromString:@"document.body.style.zoom = 1.7;"];
} 
```

我没有办法测试，因为我没有，但 iPad mini 的屏幕尺寸更小，（我知道像素数量是相同的）。

但可以肯定的是，这段代码会将内容放大太多，因为我禁用了用户交互，因此无法看到其中的一些内容。

我在这里有什么选择？有什么模拟器可以下载吗？或者有没有办法检测 iPad mini 并使用不同的代码制作新功能？

谢谢，

杰克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:32:29.293

尝试在您的方法中调用它`viewDidLoad`（还要确保删除您的 JavaScript 代码）：

```
[_webView setScalesPageToFit:YES] 
```

它使网页缩放以完全适合 webview 的边界。

# json - 使用 knockoutjs 基于嵌套下拉菜单选择嵌套对象

> ID：14291970
> 
> 赞同：1
> 
> 时间：2013-01-12T09:23:45.397
> 
> 标签：json, knockout.js

好的，所以我有以下 json：

```
{"VehicleMakes":
[{"VehicleModels":[],"ID":3,"Description":"BMW"},
{"VehicleModels":[],"ID":1,"Description":"Ford"},
{"VehicleModels":[{"ID":1,"Description":"Astra","MakeID":2},{"ID":2,"Description":"Corsa","MakeID":2}],"ID":2,"Description":"Vauxhall"}],
"VehicleModels":[],
"SelectedMake":"Vauxhall","SelectedModel":null,"Postcode":null} 
```

所以基本上我有几个汽车品牌，一个品牌可以有很多型号。

然后我有以下模型：

```
 function SearchModel() {
        this.SearchCriteria = "";
        this.SelectedMake = ko.observable();
        this.SelectedModel = ko.observable();
    } 
```

然后这个html：

```
<select id="vehiclesMake" data-bind="options: SearchCriteria.VehicleMakes, optionsText: 'Description',optionsValue: 'Description', value: SelectedMake, optionsCaption: 'Choose...'"></select>      

 <div data-bind="if: SelectedMake">
            <select data-bind='options: SelectedMake().VehicleModels, optionsText: "Description", optionsCaption: "Select...", optionsValue: "Description", value: SelectedModel'></select>
                 </div> 
```

所以我基本上想说的是，当在第一个下拉列表中选择车辆制造商时，在第二个下拉列表中显示其型号。

第一个下拉列表填充得很好，当我进行选择时，第二个下拉列表出现但没有被填充。

注意我将所有 json 分配给属性 SearchCriteria。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:55:41.737

在您的第一次选择中，`optionsValue: 'Description'`您告诉敲除使用`Description`文本作为选择中的值。因此，您`SelectedMake`将包含`Description`文本而不是 VehicleMake 对象。

所以只需删除`optionsValue`它，它应该可以正常工作：

```
<select id="vehiclesMake" data-bind="options: SearchCriteria.VehicleMakes, 
                                     optionsText:  'Description', 
                                     value: SelectedMake, 
                                     optionsCaption: 'Choose...'"></select> 
```

演示[JSFiddle](http://jsfiddle.net/nemesv/QqzLA/)。

# cakephp-2.1 - 当我使用 j-query 在选择框中加载值时，无法在 cake php 中编辑重新编码

> ID：14291972
> 
> 赞同：0
> 
> 时间：2013-01-12T09:24:03.853
> 
> 标签：cakephp-2.1

当我想更新值时，我无法加载选择框值。当我要节省价值时，相同的代码可以完美运行。

我的控制器代码是：

```
public function listwardByCircle($category = "") {
        $this->layout = 'ajax';
        $this->beforeRender();
        $this->autoRender = false;
        $ward=$this->Ward->find('list',array(
                "fields" => 'id, wardname',
                "conditions" => array('Ward.circle_id' => $category)
        ));
        //$this->set('ward',$ward);
        print_r($ward);
        foreach($ward as $key => $val) {
            echo "<option value=$key>$val</option>";
        }
    } 
```

这是我的 js 代码：

```
$("#AreaCircleId").change(function() {
alert("testing....");
$.post('../Admins/listwardByCircle/' + $(this).val(), function(data) {
alert(  data);
$("#AreaWardId").empty().append(data);
}, 'html');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:24:50.513

`In js file` `Url in Controller Like`

```
`\../../Admins\/listwardByCircle`
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T03:54:28.557

您可能需要从以下位置更新您在 ajax 中的 URL 发布位置：

```
$.post('../Admins/listwardByCircle/' 
```

至

```
$.post('/admins/listwardByCircle/' 
```

这是如果控制器名称是管理员。

# java-me - Java微版中的MD5

> ID：14291974
> 
> 赞同：1
> 
> 时间：2013-01-12T09:24:06.973
> 
> 标签：java-me, md5

我有个问题。我必须在 Java ME 中获得字符串的 md5 哈希值。我有那个代码

```
 public static String md5(String input) throws UnsupportedEncodingException{
    String res = "";
    try {
        MessageDigest algorithm = MessageDigest.getInstance("MD5");
        algorithm.reset();
        algorithm.update(input.getBytes("UTF-8"));
        byte[] md5 = algorithm.digest();
        return md5.toString();
        }
     catch (NoSuchAlgorithmException ex) {}
    return res;
} 
```

但是**MessageDigest.update()**和**MessageDigest.digest()**只接受 3 个参数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:26:41.263

另外两个参数是`offset`和`len`，您可以分别设置它们`0`和*字节缓冲区的长度*。

# mysql - 如何学习编写复杂的 SQL 查询

> ID：14291979
> 
> 赞同：-1
> 
> 时间：2013-01-12T09:25:05.797
> 
> 标签：mysql, sql

我不确定这是一个正确的地方，所以如果不是，请原谅我。我希望能够编写复杂的 SQL 查询。学习编写复杂的 SQL 查询的最佳方法是什么？也许在互联网上的某个地方有一个示例任务列表？请注意，我不是 MySQL 新手，所以请不要建议阅读诸如“Mysql. Complete guide”之类的大书。一篇文章或示例任务列表会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:48:51.980

搜索 SQL 挑战，有几个站点存在问题，尝试寻找解决方案，看看其他人做了什么。

尝试[http://beyondrelational.com/](http://beyondrelational.com/)作为初学者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:11:38.127

sql参考是一本好书

你可以在这里找到这个 [http://books.google.co.in/books?id=gfjKrrj0FicC&printsec=frontcover&source=gbs_ge_summary_r&cad=0#v=onepage&q&f=false](http://books.google.co.in/books?id=gfjKrrj0FicC&printsec=frontcover&source=gbs_ge_summary_r&cad=0#v=onepage&q&f=false)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T10:18:58.177

[来自 Sitepoint 的Simply SQL](http://www.sitepoint.com/books/sql1/)是一本非常容易理解的 SQL 书籍，它清楚地解释了如何进行高级查询，而且我认为您可以免费下载前几章

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T09:50:20.770

创建 PHP/MySQL 网站。让它“做”事情。首先，简单的事情。然后得到启发。问，“有没有可能做……”某事。是的，所以现在进行研究并找出方法。

有各种各样的“复杂”查询。您学习哪些取决于您要做什么。所以，首先尝试做一些事情，然后学习查询。

例如，也许您想显示分层信息，如树形菜单。您将如何将其存储在数据库中，以及什么样的查询会向您显示以下内容：

有 n 个父母的项目。有 n 个孩子的项目。那些是他们自己爷爷的物品。

现在你有一个具体的问题要解决，一个激励你学习实际查询的目标。除了提出一个真正的问题来激励你之外，我认为没有其他方法可以学习这些东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T09:33:21.207

[Joe Celko - SQL for Smarties](https://rads.stackoverflow.com/amzn/click/com/0123820227)是一本极好的书。

# android - 从 Android 中的 Google 日历获取颜色代码

> ID：14291980
> 
> 赞同：2
> 
> 时间：2013-01-12T09:25:06.797
> 
> 标签：android, colors, calendar, google-calendar-api

如何从`Google event`颜色代码中解析颜色？

我有`Google calendar`这样的活动

我以这种格式打印了我的 logcat**`event title : calendar color code`**

```
01-12 14:46:40.190: E/(19626): ID : 22 : Happy birthday! : 16437605
01-12 14:46:40.190: E/(19626): ID : 23 : May Day : 13658980
01-12 14:46:40.190: E/(19626): ID : 24 : New Year's Day : 13658980
01-12 14:46:40.190: E/(19626): ID : 25 : Christmas Day : 13658980 
```

我试过这样

```
holder.eventColor.setBackgroundColor(Color.parseColor("#"
                + data.get(position).calendar_color)); 
```

那么`13658980`是什么格式？？我认为它不在`ARGB`

帮助！！谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T11:18:52.110

data.get(position).calendar_color 是您需要转换为整数的字符串。

它不包含 alpha，因此您还需要添加 0xff000000，有关此的更多信息，请参阅[如何设置视图的背景颜色](https://stackoverflow.com/questions/2173936/how-to-set-background-color-of-a-view)

正确的代码是：

```
setBackgroundColor(0xff000000 + Integer.parseInt(data.get(position).calendar_color)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:38:52.680

表格中有一个字段，您可以从中获取日历的颜色。使用日历 URI，您可以获得颜色和事件这里是更多详细信息的链接

[http://developer.android.com/reference/android/provider/CalendarContract.Calendars.html](http://developer.android.com/reference/android/provider/CalendarContract.Calendars.html)

**更新**

好的，我已经使用与解析和显示颜色相同的方式尝试了您的颜色。如果你增加前两位数或删除它，它太浅的青色你可以得到它

```
setBackgroundColor(Color.parseColor("#658980")); // removed alpha color

setBackgroundColor(Color.parseColor("#13658980")); 
```

# javascript - 如果单击正文，则切换事件处理程序，但如果单击 [some element] 则不切换

> ID：14291997
> 
> 赞同：0
> 
> 时间：2013-01-12T09:28:23.037
> 
> 标签：javascript, jquery, html, javascript-events

我想创建一个事件侦听器，在单击某个元素时触发一些代码，以及一个在单击该元素之外的任何其他内容时切换一些代码的事件侦听器。到目前为止，我想出的只是制作两个处理程序，一个用于主体，一个用于元素，并稍微延迟代码`setTimeout()`以避免两个处理程序发生冲突。它看起来很丑，而且，不对。有没有更好的方法来做我需要的事情？或者，有没有我可以使用的“除此之外的所有元素”处理程序？我一直在使用 JQuery 进行此操作，因此欢迎和首选依赖于库的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:47:37.137

也许你想要这样的东西（如果我理解这个问题）

**HTML：**

```
<button id="btn">Click</button> 
```

**JS：**

```
$('body').on('click', function(e){
    if(e.target.nodeName=='BODY') 
    {
        // clickd on body
    }
    else if($(e.target).attr('id')=='btn')
    {
        // clickd on button
    }
}); 
```

[**例子**](http://jsfiddle.net/HDsLF/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:36:36.830

如果要将点击绑定到所有元素而不是 id 为“div1”的元素，可以使用如下：

```
$('body').on('click', ':not(#div1)', function(){ 

}); 
```

# javascript - Javascript 对象构造函数和布尔变量

> ID：14291998
> 
> 赞同：0
> 
> 时间：2013-01-12T09:28:39.077
> 
> 标签：javascript, object, constructor, boolean

我正在尝试创建一个 JS 对象构造函数，但想使用布尔运算声明对象的属性之一。不知何故我弄错了 - 请指教！

谢谢！交流电

```
function Student(gender, name, id, age, likes) {
this.gender = gender;
this.name = name;
this.id = id;
this.age = Boolean () {
    var age = x;
    if (age >= 21) {
    return "adult";
    } else {
    return "minor";
  }     
  };
this.likes = likes;
 }

window.onload = init;

function init() {
var jessica = new Student("female", "Jessica", 12, 21, ["butterflies", "flowers", "music"]);
var jessicaJSON = JSON.stringify(jessica);
console.log(jessicaJSON);

var anotherJessica = JSON.parse(jessicaJSON);
console.log(anotherJessica);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:39:49.183

这是为您修复的学生功能。使用三元 if 语句而不是真正无效的 "Boolean() {}"无论如何都是布尔类型。

```
function Student(gender, name, id, age, likes) {
  this.gender = gender;
  this.name = name;
  this.id = id;
  this.likes = likes;
  this.age = (age >= 21 ? "adult" : "minor");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:40:23.893

我想这就是你需要的：

```
function Student(gender, name, id, age, likes) {
  this.gender = gender;
  this.name = name;
  this.id = id;
  this.age = (age >= 21) ? "adult" : "minor";
  this.likes = likes;
}

var jessica = new Student("female", "Jessica", 12, 21, ["butterflies", "flowers", "music"]);
console.log(jessica.age); //adult 
```

这里我使用三元条件运算符：`condition ? value_if_true : value_if_false`.

在这种情况下，条件是`age >= 21`，如果为真`"adult"`，则值为，如果为假，则值为`"minor"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T09:40:58.247

```
function Student(gender, name, id, age, likes) {
    this.gender = gender;
    this.name = name;
    this.id = id;
    this.age = (age >= 21) ? "adult":"minor";
    this.likes = likes;
} 
```

示例：http: [//jsfiddle.net/av5ym/1/](http://jsfiddle.net/av5ym/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T09:45:09.777

其他人告诉你你应该做什么，但这里有一个本着你的代码精神的答案，以防你需要的不仅仅是一个布尔三元。

```
this.age = (function () {
    if (age >= 21) {
        return "adult";
    } else {
        return "minor";
    }     
}(); 
```

# css - 不考虑下边距，div重叠，为什么？

> ID：14291999
> 
> 赞同：0
> 
> 时间：2013-01-12T09:28:42.550
> 
> 标签：css, html, overlap

我正在实现一个典型的页眉、左列、中列、右列、页脚布局。我已将 lft,mid,right 包裹`div`在 midBlock 中`div`。为了清楚起见，我附上了一张图片：

![在此处输入图像描述](../Images/c601471cab2f427ad19d69dc420e5286.png)

我在 midBlock 上设置了 10px 的下边距，但是它与页脚重叠。为什么？以及如何解决？

这是[JSFiddle](http://jsfiddle.net/KJsQa/1/)。

这是我的CSS：

```
body {
    background-image:url('./img/GreenLetters.jpg');
}

#blankPage {
    background-color: #fffffd;
    width: 1020px;
    margin: 0px auto;
    border: 0px;
    padding: 10px;
    position:relative;
}

#header {
    background-color: #000000;
    color:red;
    width: 1000px;
    margin: 0px 0px 10px 0px;
    border: 0px;
    padding: 10px;
}

#midBlock {
    margin: 0px 0px 10px 0px;
    border: 0px;
    width: 1020px;
    position:relative;
    left:0px;
    top:0px;
}

#leftCol {
    background-color: #123456;
    width: 160px;
    margin: 0px;
    border: 0px;
    padding: 0px;
    position:absolute;
    left:0px;
    top:0px;
}

#midCol {
    background-color: #654321;
    width: 660px;
    margin: 0px 10px 10px 0px;
    border: 0px;
    padding: 10px;
    position:absolute;
    left:170px;
    top:0px;
}

#rightCol {
    background-color: #567890;
    width: 160px;
    margin: 0px;
    border: 0px;
    padding: 0px;
    position:absolute;
    left:860px;
    top:0px;
}

#footer {
    background-color: #000000;
    color:red;
    width: 1000px;
    margin: 10px 0px 0px 0px;
    border: 0px;
    padding: 10px;
    position:relative;
    left:0px;
    top:0px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:51:50.243

我通过设置找到了解决方案：

```
min-height:1px;
overflow:auto; 
```

在 midBlock css 中。这是[JSFiddle](http://jsfiddle.net/KJsQa/2/)。

它产生了另一个问题，但在[这里](https://stackoverflow.com/questions/14292249/making-englobing-parent-div-as-high-as-inner-divs/14292371#14292371)找到了解决方案。