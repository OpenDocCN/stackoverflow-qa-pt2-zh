# StackOverflow 问答 12771000-12771999

# android - Android TranslateAnimation 覆盖其他布局视图

> ID：12771000
> 
> 赞同：1
> 
> 时间：2012-10-07T17:15:35.633
> 
> 标签：android, android-relativelayout, translate-animation

我有一个定义为包含 3 个视图的相对布局（垂直）。顶部和底部视图均为 16 像素高，并显示文本。中间视图显示游戏应用程序的图形。

在游戏过程中的不同时间点，应用程序会运行一个 TranslateAnimation，它可以有效地向上或向下“滚动”中间视图。这使游戏中的游戏角色在中间视图中“居中”。

我的问题是，当动画运行时，翻译会导致顶部或底部视图被覆盖。这仅持续动画的持续时间。动画完成后，一切正常，顶部/底部视图按预期显示其文本。令我惊讶的是，翻译动画在其运行的（中间）视图之外显示内容。我的愿望是，当翻译向上/向下滑动显示时，动画只会影响中间视图，不会遮挡顶部或底部视图中的内容。

以下是我用来创建布局的代码。自定义视图直接派生自 View 并在其 onDraw(Canvas) 方法中显示内容。

```
RelativeLayout rl = new RelativeLayout(this);

topView = new MyTextView(this);
topView.setId(1);

middleView = new MyGameView(this);
middleView.setId(2);

bottomView = new MyTextView(this);
bottomView.setId(3);

final int textSize = 16;
RelativeLayout.LayoutParams lpTop = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, textSize);
lpTop.addRule(RelativeLayout.ALIGN_PARENT_TOP);

RelativeLayout.LayoutParams lpBottom = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, textSize);
lpBottom.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);

RelativeLayout.LayoutParams lpMiddle = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
lpMiddle.addRule(RelativeLayout.BELOW, 1);
lpMiddle.addRule(RelativeLayout.ABOVE, 3);

rl.addView(topView, lpTop);
rl.addView(middleView, lpMiddle);
rl.addView(bottomView, lpBottom);

setContentView(rl); 
```

middleView 中启动动画的代码如下：

```
TranslateAnimation ta = new TranslateAnimation(0, 0, 0, yDistance);
ta.setDuration(500);
startAnimation(ta); 
```

我已经尝试了很多方法来让这个动画按预期运行，但一直无法做到。希望有人可以提供帮助。提前致谢。

# c++ - 尾随返回类型的“覆盖”限定符在哪里？

> ID：12771005
> 
> 赞同：34
> 
> 时间：2012-10-07T17:16:08.160
> 
> 标签：c++, c++11

C++11 具有新的`override`限定符，可应用于成员函数以断言它们覆盖基类中的虚函数。C++11 还允许尾随返回类型，因此函数可以声明为`auto f() -> return_type`. 当我结合这两个功能时，我不知道是`override`在`->`.

例如，假设我们有以下基类：

```
struct Base {
    virtual auto f () const -> int = 0;
}; 
```

派生类的两种可能性是：

```
struct Derived : public Base {
    virtual auto f () const override -> int { return 0; } // Compiles on g++ 4.7.1
}; 
```

或者

```
struct Derived : public Base {
    virtual auto f () const -> int override { return 0; } // Compiles on clang++ 4.0
}; 
```

g++ 4.7.1 编译第一个版本，但在第二个版本中失败

```
test.cpp:6:30: error: expected ';' at end of member declaration
test.cpp:6:34: error: 'override' does not name a type 
```

而 clang++ 4.0 编译第二个，但第一个失败

```
test.cpp:6:11: error: 'auto' return without trailing return type
  virtual auto f () const override -> int { return 0; }
          ^
test.cpp:6:3: error: only virtual member functions can be marked 'override'
  virtual auto f () const override -> int { return 0; }
  ^                       ~~~~~~~~
test.cpp:6:35: error: expected ';' at end of declaration list
  virtual auto f () const override -> int { return 0; } 
```

根据标准，这些编译器中的哪一个实际上在做正确的事情？

**编辑：**正如 Kerrek SB 所指出的，这是[gcc (Bugzilla link) 中的一个错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54849)。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-07T17:22:16.033

根据标准 8.4.1，函数的*声明*符包含*trailing-return-type*，类函数定义包含“ *declarator virt-specifier-seq* [opt] ”。第二个，*virt-specifier-seq*，是`final`or之一`override`，所以它们*在*尾随返回类型之后。（即 Clang 做对了。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-15T08:59:49.257

像这样：

```
class I
{
    virtual auto Func() -> void = 0;
};

class C : public I
{
    auto Func() -> void override;
}; 
```

它从 4.8.1 开始在 gcc 中工作：
[https ://godbolt.org/z/TbTTwa](https://godbolt.org/z/TbTTwa)

# javascript - 在 NodeJS 中构建自定义网页

> ID：12771009
> 
> 赞同：0
> 
> 时间：2012-10-07T17:16:40.920
> 
> 标签：javascript, html, node.js, customization, builder

我正在开发一个为每个客户端定制的网页，我正在寻找一个 NodeJS 构建器，它允许我配置每个客户端的 CSS 和功能。

模块[appgen](https://github.com/nearform/appgen)似乎符合要求，但这个应用程序的问题是它仍处于开发的早期阶段，可能会在第一个版本发布之前进行重大修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:18:01.003

imo，这对于当今世界的 node.js 来说不是一个很好的用途。Node 是关于深入到金属和自定义 Web 应用程序开发的。对于基本的自定义和“html 模板”，我会查看 wordpress、joomla、drupal 等。

如果您想亲自动手（我鼓励您这样做），在 Node 世界中，您可以选择一些 Web 应用程序框架：

*   express [http://expressjs.com/](http://expressjs.com/) -- 大稳定 api
*   flatiron [http://flatironjs.org/](http://flatironjs.org/) -- 一个带有插件基础设施的混合搭配框架
*   其他很多，但那些似乎是最受欢迎的

在cms方面，我听说过这个，但不知道它的质量：

*   [http://calip.so/——](http://calip.so/)从早期开始就已经取得了相当大的进展，看起来像

# c# - IEnumerable 与 Prev/Next

> ID：12771010
> 
> 赞同：5
> 
> 时间：2012-10-07T17:16:41.857
> 
> 标签：c#, linq

只是在寻找对此的一些确认。我需要为我的列表捕获上一个和下一个 ID。有没有更好的办法？

```
var questionArray = dc.Question
    .Where(i => !i.IsDeleted)
    .OrderBy(i => i.SortOrder)
    .Select(i => new
    {
        i.QuestionID,
        i.Name,
    })
    .ToArray();

var questionList = questionArray
    .Select((item, index) => new
    {
        item.QuestionID,
        PrevID = index > 0 ? questionArray[index - 1].QuestionID : (int?)null,
        NextID = index < questionArray.Length - 1 ? questionArray[index + 1].QuestionID : (int?)null,
        item.Name,
    })
    .ToList(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T17:54:00.237

您可以编写一个小助手扩展来消除对结果数组的需要

```
public static IEnumerable<TResult> PrevNextZip<T, TResult>(this IEnumerable<T> stream, Func<T, T, T, TResult> selector) where T : class
{
  using (var enumerator = stream.GetEnumerator())
  { 
    if (enumerator.MoveNext())
    {
      T prev = null;
      T curr = enumerator.Current;

      while (enumerator.MoveNext())
      {
        var next = enumerator.Current;
        yield return selector(prev, curr, next);
        prev = curr;
        curr = next;
      }

      yield return selector(prev, curr, null);
    }
  }
} 
```

然后构建您的结果将如下所示

```
 var questionList = questionArray.PrevNextZip((prev, item, next) => new
    {
      item.QuestionID,
      PrevID = prev != null ? prev.QuestionID : (int?)null,
      NextID = next != null ? next.QuestionID : (int?)null,
      item.Name,
    })
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:27:14.967

您可以使用`Aggregate`来构建列表。您构建的聚合跟踪最后一个元素以设置`PrevID`在下一个元素中，并在`NextID`插入新元素后立即更新最后一个元素。大约是这样的：

```
class Info { ... // QuestionID, PrevID, NextID, Name }
class ListBuilder { List<Info> list; Info lastElement; }

var questionList = dc.Question 
    .Where(i => !i.IsDeleted) 
    .OrderBy(i => i.SortOrder)
    .Aggregate (
        new ListBuilder () { list = new List<Info> (), lastElement = null },
        (acc, source) => {
            var lastElement = acc.lastElement;
            var newElement = new Info () {
                QuestionID = source.QuestionID,
                PrevID = lastElement != null ? lastElement.QuestionID : null,
                NextID = null
            };
            acc.list.Add (newElement);
            if (lastElement != null) lastElement.NextID = source.QuestionID;
            acc.lastElement = newElement;
            return acc;
         })
    .list; 
```

这保留了函数式编程的一些“精神”，但您也可以简单地使用闭包并在 linq 查询之前定义的局部变量中跟踪必要的信息。

或者为它构建一个函数：

```
IEnumerable<Info> previousNextInfo (IEnumerable<QuestionType> sourceEnumerable) {
   Info preprevious = null;
   Info previous = null;
   Info current = null;
   foreach (Info newOne in sourceEnumerable) {
      preprevious = previous;
      previous = current;
      current = newOne;
      yield return new Info () {
         QuestionID = previous.ID,
         lastID = preprevious != null ? preprevious.ID : null,
         nextID = current.ID
      };
   }
   if (current != null)
      yield return new Info () { QuestionID = current.ID, lastID = previous.ID, nextID = null };
}

...

questionList = previousNextInfo (dc.Question 
        .Where(i => !i.IsDeleted) 
        .OrderBy(i => i.SortOrder)
).ToList (); 
```

# java - 检查对的数据结构？

> ID：12771016
> 
> 赞同：2
> 
> 时间：2012-10-07T17:17:15.530
> 
> 标签：java, data-structures

假设我有对象 A、B、C、D。它们可以包含对彼此的引用，例如，A 可能引用 B 和 C，而 C 可能引用 A。我想创建段但不想创建两次，所以我不想要段 AC 和段 CA，只是其中 1 个。所以我想保留一个已创建段的列表，例如：AC，并检查我是否已经有一个 AC 或 CA，如果有则跳过它。

有没有可以做到这一点的数据结构？

谢谢

```
if(list.contains(a,b)
{
   //dont add
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:31:40.150

你可以介绍类似的东西

```
class PairKey<T extends Comparable<T>> { 
  final T fst, snd;
  public PairKey(T a, T b) {
    if (a.compareTo(b) <=0 ) {
      fst = a;
      snd = b;
    } else {
      fst = b;
      snd = a;
    }
  }

  @Override
  public int hashCode() {
    return a.hashCode() & 37 & b.hashCode();
  }

  @Override
  public boolean equals(Object other) {
    if (other == this) return true;
    if (!(other instanceOf PairKey)) return false;
    PairKey<T> obj = (PairKey<T>) other;
    return (obj.fst.equals(fst) && obj.snd.equals(snd));
  }
} 
```

那么您可以将边缘放入 HashSet < PairKey < ？extends Comparable> > 然后检查给定的对是否已经存在。

您需要使您的顶点具有可比性，因此可以将 PairKey(A,B) 视为等于 PairKey(B,A)

然后 HashSet 将为您完成剩下的工作，例如您将能够查询

```
pairs.contains(new PairKey(A,B)); 
```

如果对包含 PairKey(A,B) 或 PairKey(B,A) - 它将返回 true。

hashCode 实现可能略有不同，可能是 IDE 会生成更复杂的东西。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:23:01.070

我会使用一个`Pair`看起来像这样的对象：

```
class Pair  
{  
    Node start;  
    Node end;  

    public Pair(Node start, Node end)  
    { 
      this.start=start;
      this.end=end;  
    }  

   public Pair reverse()  
   {  
       return new Pair(end,start);  
   }  
} 
```

现在您可以执行以下操作：

```
if(pairs.contains(currentPair) || pairs.contains(currentPair.reverse())  
{  
    continue;
}  else{  
     pairs.add(currentPair);  
} 
```

正如评论中所指出的，您将需要实现 equals 和 hashcode。但是，在纯 OO 中进行检查以使其与段的反转相匹配是一种不好的做法，因为。通过以注释中描述的方式实现 equals ，只会将 Pair 绑定到您的应用程序并删除它的可移植性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T17:21:26.240

您可以使用一组对象集。

```
Set<Set<MyObjectType>> segments = new HashSet<Set<MyObjectType>>(); 
```

然后您可以添加表示成对的二元素集`MyObject`。由于集合是无序的，如果`segments`包含具有 A 和 B 的集合，尝试添加包含 B 和 A 的集合会将其视为已存在于`segments`.

```
Set<MyObjectType> segment = new HashSet<MyObjectType>();
segment.add(A); // A and B are instances of MyObjectType
segment.add(B);
segments.add(segment);
segment = new HashSet<MyObjectType>();
segment.add(B);
segment.add(A);
segments.add(segment);
System.out.println("Number of segments: " + segments.size()); // prints 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T17:22:15.800

使用`java.util.Set`/`java.util.HashSet`并继续添加您找到的参考文献，例如

```
 Set set1 = new HashSet();
   set1.add(A), set1.Add(C), set1.Add(C) 
```

您可以将此发现添加到外部集中，如`finalSet.add(set1)`

```
 Set<Set> finalSet = new HashSet<Set>();
  finalSet.add(set1); 
```

这将自动过滤掉重复项，最后，您将只剩`A & C`下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T17:34:05.803

您的问题与图论有关。

您可以尝试删除该内部列表并创建一个所有对象共享的[事件矩阵。](http://en.wikipedia.org/wiki/Incidence_matrix)

最终解决方案主要取决于任务目标和可用结构。因此，很难根据您提供的描述为您的问题选择最佳解决方案。

# jquery - 单击锚点时突出显示 div

> ID：12771018
> 
> 赞同：15
> 
> 时间：2012-10-07T17:17:22.980
> 
> 标签：jquery, html, css, class, onclick

我发现自己陷入了困境：

我有一个指向`<a>`内部 a的锚链接`div`，因此页面一直向下滚动到它。

不幸的`div`是，它位于页面底部，因此用户很可能看不到它。

我认为解决此问题的一个好方法是在单击链接时更改 div 的类，例如将边框颜色切换为红色，然后在 2 秒内恢复正常。

我不知道如何做到这一点。我用谷歌搜索了一下，似乎这可以用 jQuery 完成，但我真的不明白如何根据我的需要编辑脚本。

非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T17:28:06.113

# 三种选择：

## 第一个 - CSS3

如果您并不真正关心[支持所有浏览器](http://caniuse.com/css-animation)，请使用此方法。它是纯 CSS，所以这是一个优势。这是一个大纲（包括多个浏览器的多个版本的规则）：

```
.youranchorsclass:active ~ #yourdivsid { /*when the anchor is active (clicked)*/
   -moz-animation: myanimation 1s;
   -webkit-animation: myanimation 1s;
   -o-animation: myanimation 1s;
   animation: myanimation 1s;
}
@-moz-keyframes myanimation, @-webkit-keyframes myanimation, @-o-keyframes myanimation, @keyframes myanimation {
   from { background: red; }
   to { background: white; /*or whatever it was originally*/ }
} 
```

（如果你想摆脱所有那些丑陋的前缀规则，看看[PrefixFree](http://leaverou.github.com/prefixfree/)）。

## 第二个——jQuery

如果您确实关心旧浏览器的支持，请使用此选项。在您的页面中包含 jQuery，首先，将其插入您的`head`：

```
<script src = "https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type = "text/javascript"></script> 
```

然后：

```
$(".yourlink").click(function() {
   $("#yourdivid").css("background", "red").delay(1000).css("background", "white");
}; 
```

请注意，此 jQuery 方法不会逐渐改变颜色，您必须包含一个插件（例如[jQuery UI](http://jqueryui.com)）才能这样做。

## 第三个——纯 JavaScript

如果您不想仅仅为了这么小的效果而包含一个相对庞大的库，请使用它。这很简单，这里有一个注释大纲可以帮助您入门：

```
function changeDivColor(color) {
    document.getElementById("yourdivid").style.backgroundColor = color;
}
document.getElementById("youranchor").onClick = function() { //when the anchor is clicked
    changeDivColor("red"); //chang the div color to red
    setTimeout(function() { //wait 1000 milliseconds (1s) -- see below
        changeDivColor("white"); //then change it back to white
    }, 1000);
}; 
```

希望以任何方式有所帮助！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-07T17:23:06.093

是的，您可以通过两种方式进行**黄色渐变技巧：**

### 使用`:target`伪类：

```
<section id="voters"> 
   Content
</section> 
```

各自的**CSS**

```
:target {
   background: yellow;
} 
```

### 使用黄色渐变技术

在点击功能中，如果有，可以这样操作：

```
$('a[href*="#"]').click(function(){
    $($(this).attr("href")).effect("highlight", {}, 1500);
}); 
```

或使用`animate()`：

```
$('a[href*="#"]').click(function(){
    $($(this).attr("href")).animate({"background-color": "#ffc"}).delay(2000).animate({"background-color": "transparent"});
}); 
```

### 小提琴：http: [//jsfiddle.net/HnERh/](http://jsfiddle.net/HnERh/)

***PS：**为了使用* `effect()`*，你需要有这两个 JS:* `effects.core.js` *和* `effects.highlight.js`*.*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T17:26:39.557

单击时，您可以将 div 的颜色更改为 red `.css({ elements })`，然后等待 2 秒`.delay( time )` 并动画回原来的颜色`.animate({ elements }, time, callback)`

```
$(document).ready() {
    $('a[href^="#"]').click(function(){
        $('div.divs_class_or_id_name').css('border','solid 1px #ff0000').delay(2000).animate({
            border: 'solid 1px #000000'
        }, 500, function() {
            // animation complete
        });
    });
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T17:23:38.327

类似于以下内容。

```
$("#button").click(function() {
    $('html, body').animate({
        scrollTop: $("#element").offset().top
    }, 2000);
    $("#element").animate({
        "background-color": "#FFFFCC"
    }).delay(2000).animate({
        "background-color": "#00FFFF" //original background color
    });
}); 
```

确保包含一个允许颜色动画的 jquery 插件，例如[http://www.bitstorm.org/jquery/color-animation/jquery.animate-colors-min.js](http://www.bitstorm.org/jquery/color-animation/jquery.animate-colors-min.js)。

尽管@praveen-kumar 的`:target`解决方案看起来不错，但我相信您可以纯粹使用 css3 动画来做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-14T09:08:06.360

@Chris 的纯 CSS 解决方案很棒。对`~`我不起作用（可能只适用于[兄弟姐妹](https://developer.mozilla.org/en-US/docs/Web/CSS/General_sibling_combinator)）

这是一个经过测试并在 2021 年有效的变体：

```
#targetdivid:target { /* i.e when this element is navigated to (from a link) */
   animation-name: ref-animation;
   animation-duration: 3s;
}
@keyframes ref-animation {
   from { background-color: #FFFFCC;     }  /* light yellow */
   to   { background-color: transparent; }  /* assuming original was transparent */
} 
```

# bash - Bash脚本以彩色打印文本文件

> ID：12771026
> 
> 赞同：3
> 
> 时间：2012-10-07T17:18:32.427
> 
> 标签：bash, text, colors, sed

我有一个包含三个段落的文本文件。我想使用 bash 脚本命令以不同的颜色显示不同的段落。第 1 段为红色，第 2 段为蓝色，第 3 段为青色。

我设法使用以下命令显示彩色线条

```
echo -e '\E[32;47m Green.'; tput sgr0 
```

但是，当有新段落时，我想解析我的文件并更改颜色。我会很感激一些提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T17:58:25.423

**输入`/tmp/FILE`**： http: [//pastie.org/4928415](http://pastie.org/4928415)

**脚本**：

```
#!/bin/bash

c=1
tput setaf $c
while read a; do
    [[ $a =~ ^$ ]] && tput setaf $((++c))
    echo "$a"
done < /tmp/FILE
tput sgr0 
```

**输出**：

![在此处输入图像描述](../Images/267df8da3b880cbcd9cd001c4d7fc3de.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T18:27:43.610

这是一个 awk 解决方案，它依次使用一组颜色设置的元素：

```
BEGIN { nc = split("\33[31;47m \33[34;43m \33[36;40m", colors, " ");
        c=1; print colors[c] }
{ print }
/^$/ { c = 1+(c%nc); print colors[c]} 
```

*[编辑：以上错误地在段落之间添加了一个额外的空白行。更正后的代码如下：*

```
BEGIN { nc = split("\33[31;47m \33[34;43m \33[36;40m", colors, " ");
        c=1; printf "%s", colors[c] }
/^$/ { c = 1+(c%nc); print colors[c]}
!/^$/ 
```

*这`!/^$/`会导致任何非空行按原样打印。（结束编辑）]。*

如果上述内容在文件 3-para.awk 中，而数据在文件 3-para.data 中，请使用`awk -f 3-para.awk 3-para.data`类似以下的命令获取输出。 ![脚本输出截图](../Images/6d59013f8c8d12da3e33a31e4abee985.png)

为了更方便使用，定义一个调用脚本然后将颜色重置为默认值的函数：

```
tricolor() {
   awk -f 3-para.awk $1; tput sgr0
} 
```

通过（例如）使用该功能`tricolor 3-para.data`

# ms-word - 使用 AppleScript 在 Microsoft Word 中设置表格边框

> ID：12771029
> 
> 赞同：1
> 
> 时间：2012-10-07T17:18:45.507
> 
> 标签：ms-word, applescript

当我尝试设置表格边框的线条粗细时，结果会将线条类型更改为不需要的东西。为什么线宽参数会影响线型参数？请参阅下面的示例并亲自尝试。我正在使用 MS Office 2011 Word v14.2.3。

```
tell application "Microsoft Word"
    set line style of (get border selection which border border bottom) to line width225 point
    get line width of (get border selection which border border bottom)--test:results in line width150\. Why? I just set it to line width225!

    --width25 = fine dots
    --width225 = cornered sine wave
    --width50 = dashed line
    --width75 = dash + 3 dots + dash
    --width100 = 3 lines
    --width150 = 2 lines
    --width300 = single
    --width450 = does not work
    --width600 = does not work
end tell 
```

如果我在具有我想要的设置的表上运行它，以查看它们是什么：

```
tell application "Microsoft Word"
    get properties of (get border selection which border border bottom)
end tell 
```

我得到：

```
{class:border, visible:true, color index:no highlight, inside:false, line style:line style single, line width:line width225 point, art style:missing value, art width:missing value, color:{0, 0, 0}, color theme index:no theme color} 
```

哪个是对的。我应该能够复制这些参数以使我的脚本工作，但是当我尝试设置线宽（边框粗细）时会发生一些事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T21:03:57.087

如果要更改线条粗细，请使用`line width`而不是 `line style`，否则不符合您的预期是正常的。

`set line width of (get border selection which border border bottom) to line width225 point`

如果你想改变`line style`，你应该使用这个列表中的一个值：（ **线型无，线型单一，线型点，线型短划线小间隙**，还有更多......）

# javascript - Lawnchair Phonegap 迭代脚本

> ID：12771033
> 
> 赞同：0
> 
> 时间：2012-10-07T17:19:08.173
> 
> 标签：javascript, json, cordova, lawnchair

我正在使用 Lawnchair 进行 HTML5 iOS 应用程序开发以进行持久存储。

我有一个返回未定义 11 次的迭代脚本，这是脚本

```
var lawnchair = Lawnchair({name:'relaxed', record:'config'}, function(people){

    this.all(function(record, index) { 
        records = record.length;
        couchURL = record.couchURL;
        alert(records);

        for(i = 0, len = records; i < len; i++){
            console.log(couchURL);
        }

    })
}) 
```

数据显然在本地存储中，但没有正确迭代，有人可以解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:15:49.373

尝试这个 ：

```
var lawnchair = Lawnchair({name:'relaxed', adapter:'dom'}, function(people){

})

this.all(function(data) { 
    for(var i = 0; i<data.length;i++)
    {
       Get data using this...data[i].value.fieldname
    }

}) 
```

# php - 为现有的基于 Web 的业务系统添加移动支持

> ID：12771034
> 
> 赞同：1
> 
> 时间：2012-10-07T17:19:11.263
> 
> 标签：php, html, jquery-mobile

我们有一个基于 PHP/JQuery/HTML 的业务系统。什么是创建系统移动版本的最佳解决方案。我正在考虑让它的一部分在不同的移动平台上运行，并提出了为数据提供 Web 服务，并为演示提供了 jquery mobile。

有没有人做过类似的事情？

# c# - 协变和逆变，编译时错误

> ID：12771036
> 
> 赞同：1
> 
> 时间：2012-10-07T17:19:49.890
> 
> 标签：c#, covariance, contravariance

我一直在阅读协变和逆变 -[维基百科](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)谈到以下内容：

> 假设你有一个代表一个人的类。一个人可以看医生，所以这个类可能有一个方法 virtual void Person::see(Doctor d)。现在假设您要创建 Person 类 Child 的子类。也就是说，一个孩子就是一个人。然后可能想创建一个子类 Doctor, Pediatrician。如果孩子只看儿科医生，我们希望在类型系统中强制执行。然而，一个简单的实现失败了：因为 Child 是一个 Person，所以 Child::see(d) 必须接受任何医生，而不仅仅是儿科医生。

这是一个“幼稚的实现”：

```
public interface IDoctor
{
}

public interface IPerson
{
    void VisitDoctor(IDoctor doctor);
}

public class Adult : IPerson
{
    public void VisitDoctor(IDoctor doctor)
    {
        Console.WriteLine("Adult saw doctor of type: {0}", doctor.GetType().Name);
    }
}

public class Child : IPerson
{
    public void VisitDoctor(IDoctor doctor)
    {
        Console.WriteLine("Child saw doctor of type: {0}", doctor.GetType().Name);
    }
}

public class AdultDoctor : IDoctor
{
}

public class ChildDoctor : IDoctor
{
} 
```

这些测试：

```
[Test]
public void AdultSeesDoctor()
{
    var adult = new Adult();
    adult.VisitDoctor(new AdultDoctor());
    adult.VisitDoctor(new ChildDoctor());  // <-- Would like this to fail
}

[Test]
public void ChildSeesDoctor()
{
    var child = new Child();
    child.VisitDoctor(new AdultDoctor());  // <-- Would like this to fail
    child.VisitDoctor(new ChildDoctor());
} 
```

输出：

> 成人锯医生类型：AdultDoctor
> 
> 成人锯医生类型：ChildDoctor
> 
> 儿童锯医生类型：AdultDoctor
> 
> 儿童锯医生类型：ChildDoctor

现在，我可以实现以下内容，如果成人尝试去看儿童医生，或者孩子尝试去看成人医生（抛出 a `System.InvalidCastException`），则会引发运行时错误：

```
public interface IVisitDoctors<T> where T : IDoctor
{
    void VisitDoctor(T doctor);
}

public class Child : IPerson
{
    private readonly ChildDoctorVisitor _cdv = new ChildDoctorVisitor();

    public void VisitDoctor(IDoctor doctor)
    {
        _cdv.VisitDoctor((ChildDoctor)doctor);
    }
}

public class Adult : IPerson
{
    private readonly AdultDoctorVisitor _adv = new AdultDoctorVisitor();

    public void VisitDoctor(IDoctor doctor)
    {
        _adv.VisitDoctor((AdultDoctor)doctor);
    }
} 
```

您能否强制 的 类`Adult`仅访问 类型 的医生，以便在访问类型`AdultDoctor`的医生时引发*编译时*`ChildDoctor`错误（反之亦然 的 类`Child`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:28:38.947

为此，您不需要 co 或逆变：

```
public interface IDoctor<TPatient> where T : IPerson<TPatient>
{
}

public interface IPerson<T> where T : IPerson<T>
{
    void VisitDoctor(IDoctor<T> doctor);
}

public class Adult : IPerson<Adult>
{
    void VisitDoctor(IDoctor<Adult> doctor) {  }
}

public class AdultDoctor : IDoctor<Adult>
{
} 
```

现在以下将无法编译：

```
Adult a = new Adult();
a.VisitDoctor(new ChildDoctor()); 
```

虽然这将：

```
Adult a = new Adult();
a.VisitDoctor(new AdultDoctor()); 
```

这被称为[奇怪重复的模板模式](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)。在这种情况下，它用于`Adult`通过接口类型获取具体的实现者类型（）`IPerson`。这意味着`IPerson`可以访问的医生类型可以限制为与实施者相同的类型。

您还可以在[Java Enum 类](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Enum.html)中看到它。该`compareTo`方法允许您比较枚举，但需要循环模板以确保您只能比较相同类型的枚举。

然而，它非常难看，因此您可能需要考虑将您的设计更改为：

```
public interface IDoctor<TPatient>
{
    void SeePatient(TPatient patient);
}

public interface IAppointments<T>
{
    void MakeAppointment(T patient, IDoctor<T> doctor);
} 
```

因此，您可以消除对`IPerson`类型参数的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:30:26.997

我了解您想要达到的目标。但如果你继续玩这个界面：

```
public interface IPerson
{
    void VisitDoctor(IDoctor doctor);
} 
```

那么对实施者的任何进一步限制都将打破**[Liskov 原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)**。这很可能会在以后给您的代码带来一些问题。

您可以做的是将该限制放入您的接口声明中

```
public interface IPerson<TDoctor>
    where TDoctor : class, IDoctor...
{
    void VisitDoctor(TDoctor doctor);
} 
```

# javascript - three.js：我的飞机有阴暗面

> ID：12771038
> 
> 赞同：2
> 
> 时间：2012-10-07T17:20:18.193
> 
> 标签：javascript, three.js

当我在three.js中制作飞机时，如下所示：

```
plane = new THREE.Mesh( new THREE.PlaneGeometry( 10, 10 ), new THREE.MeshBasicMaterial( { color: 0xe0e0e0 } ) );
plane.position = somePoint;
plane.lookAt( someOtherPoint );
scene.add( plane ); 
```

飞机只能从一侧看到。另一面是看不见的。我已经尝试更改背景颜色，但另一面仍然没有显示。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:37:11.747

```
plane.material.side = THREE.DoubleSide; 
```

或者，

```
THREE.MeshBasicMaterial( { color: 0xe0e0e0, side: THREE.DoubleSide } ) 
```

三.js r.51

我希望你的飞机感觉更好。

# android - 在Android中增加ListView中视图的大小

> ID：12771040
> 
> 赞同：0
> 
> 时间：2012-10-07T17:20:28.223
> 
> 标签：android, listview, tabview

我有一个列表视图。我想在每一行中显示以下字段。

```
 1\. An Image 
 2\. An TextView For Book Name
 3\. An TextView For Author Name
 4\. An TextView For File Type 
```

一切都由我成功完成。但是列表视图中每一行的大小不足以显示图像中解释的所有这些功能。

![在此处输入图像描述](../Images/5abcbb1e1682c9028f62c73c4c54ce23.png)

创建这个的代码：

```
if( row_view == null)
        {
            LayoutInflater inflater = context.getLayoutInflater();
            row_view  = inflater.inflate(R.layout.row_layout, null,true) ;
            holder = new ViewHolder();
            holder.textView_for_BookName = (TextView) row_view.findViewById(R.id.book_text_view_book_tab);
            holder.textView_For_fileType = (TextView) row_view.findViewById(R.id.type_for_book_tab);
            holder.textView_Forauthor = (TextView) row_view.findViewById(R.id.author_text_view_book_tab);
            holder.imageview = (ImageView) row_view.findViewById(R.id.image_sd_list_view);
            row_view.setTag(holder);
        } 
```

rowLayout.xml 的代码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:background="#FFFFFF"
  android:orientation="horizontal">

    <ImageView
    android:src="@drawable/icon"
    android:layout_width="wrap_content"
    android:id="@+id/image_sd_list_view"
    android:layout_height="wrap_content">
    </ImageView>

    <LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:orientation="vertical">

        <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="5dip"
        android:paddingBottom="5dip"
        android:textColor="#000000"
        android:textSize="20dip"
        android:paddingLeft="10dip"
        android:text="Book Name"
        android:id="@+id/book_text_view_book_tab">
        </TextView>

        <TextView
        android:id="@+id/author_text_view_book_tab"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Author Name"
        android:textColor="#000000"
        android:textSize="13dip"
        android:layout_marginLeft="15dip">
        </TextView>

        <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="File Type :"
        android:textColor="#000000"
        android:layout_marginLeft="15dip"
        android:textSize="10dip"
        android:id="@+id/type_for_book_tab">
        </TextView>

    </LinearLayout>

</LinearLayout> 
```

我想在每个 textView 中显示上述字段（book_name、author_name、file_type）。为此，我必须增加 listView 中每一行的大小。如何增加列表视图中行的大小？请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:30:50.987

您只需将根布局的高度设置`row_layout.xml`为`wrap_content`（或更大的静态值）。

```
android:height="wrap_content" 
```

（如果您需要更具体的帮助，您需要发布`row_layout.xml`。）

* * *

尝试更改您的 LinearLayout 的两个`height`属性：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    ...
    /> 
```

# asp.net-mvc-3 - 将 id 存储到变量中并在 MVC3 中的另一个控制器中使用

> ID：12771041
> 
> 赞同：1
> 
> 时间：2012-10-07T17:20:32.063
> 
> 标签：asp.net-mvc-3, session

我正在为 MVC3 中的用户创建一个网站，一种情况是用户可以创建项目并在项目中添加任务

我需要做的是当我创建一个项目并点击保存时，网站会显示一个页面，询问用户是否想向该项目添加任务

我需要保留您需要设置的变量 SelectedProjectID ，如果您创建一个新项目以及如果您按下编辑链接

因此，您可以从编辑页面按“添加任务”，然后进入任务页面并按链接“使用任务”，然后将值插入多对多表

我需要为每个用户设置具有唯一值的 SelectedProjectID 变量，因为用户只能看到他的项目，因此所有用户都不会将任务添加到同一个项目:)

在这种情况下是否可以使用会话变量

HttpContext.Current.Session["SelectedProjectID"] = project.Id 然后检索我需要使用它的值

我知道我不能将变量用作静态变量，因为如果我将变量设置为 public int，那么它会保持整个应用程序域的状态，然后我不能在另一个控制器中使用它，因为我需要新的控制器，而不是我得到变量为 0

处理此问题的最佳方法是什么？

# xcode - 如何在按下按钮时同时传递纬度和经度坐标并在下一个地图视图（三个视图之间）放置一个图钉？

> ID：12771044
> 
> 赞同：0
> 
> 时间：2012-10-07T17:20:48.873
> 
> 标签：xcode, xcode4, nsstring, xcode4.2, cllocation

我正在为一些让我坚持数小时甚至数天的事情而苦苦挣扎。如果有人可以提供意见，那就太棒了。我想出了如何将数据从按钮按下传递到另一个视图，但我现在要做的是将经度和纬度坐标作为 NSString 发送到下一个视图。这可能作为 NSString 吗？

我现在意识到它不起作用，因为我已经将 CLLocationCoordinate2D 与“位置”相关联，但我现在还能做什么？

这是我的代码：

```
if ([mlabel.text isEqualToString: @" Arts "])

   {
         CLLocationCoordinate2D location;
         location.latitude = (double) 44.4758;
         location.longitude = (double) -73.2125;

         viewController.stringToDisplay = location;

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:27:41.647

在我的应用程序中，我声明了 MapView 所在的 UIViewController 的属性：

```
@property (nonatomic) double latitude;
@property (nonatomic) double longitude; 
```

您可以处理此属性，或制作自定义方法将地图移动到您的位置。或者你可以通过传递 [str doubleValue] 将 NSString 转换为 double，其中 str 是 NSString。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:38:20.843

在我发布这个问题之后，我实现了一个额外的视图，总共 3 个，所以我最初的问题是不同的。到目前为止，我最初的观点有一个叫做艺术的类别。通过以下方式达到艺术观点：

例如，我的第一个视图使用以下内容打开我的“艺术”视图。

```
-(void)mainButton
{
  if ([mlabel.text isEqualToString: @" Arts " ])
  {
    [self performSegueWithIdentifier:@"Arts" sender:self];
  }
} 
```

在我的艺术视图中，我将艺术场地的坐标放到我的第三个视图（地图）中，如下所示：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
  FlipsideViewController *viewController = segue.destinationViewController;
  viewController.delegate = self;

  NSString *str;

     if ([[segue identifier] isEqualToString:@"showAlternate"]) 
     {
      [[segue destinationViewController] setDelegate:self];
     }

     if ([mlabel.text isEqualToString: @" Burlington City Arts "])     
     {
      CLLocationCoordinate2D location;
      location.latitude = (double) 44.476625;
      location.longitude = (double) -73.212827;

      str = [NSString stringWithFormat:@"%.2f, %.2f", location.latitude, location.longitude];

      viewController.stringToDisplay = str;
     }
} 
```

上面代码中发生的事情是我声明 stringToDisplay 来存储坐标并将其发送到第三个视图。我使用标签并说如果我的pickerview标签等于短语“Burlington City Arts”，那么通过我的“str”NSString将坐标从那个特定的地方发送到我的第三个视图。

最后，我想在那个地方放一个别针的第三个视图的代码：

```
if ([self.stringToDisplay isEqualToString: @"44.48, -73.21"])

{
    location.latitude = (double) 44.476625;
    location.longitude = (double) -73.212827;

    MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"newAnnotation" andCoordinate:location];
    [self.mapView addAnnotation:newAnnotation];
    [mapView setCenterCoordinate:location animated:YES];
} 
```

我的 stringToDisplay 在上面的代码中将带有坐标的 str NSString 传输到地图视图（第三个视图），但是，这些值是四舍五入的，所以我所做的就是将四舍五入的数字放入我的 IF 语句中。之后，我再次指定了要放置的别针的确切坐标。达达！

```
*****UPDATE***** 
```

与其在视图 2 和 3 中重复坐标，我现在意识到最好的方法是重新声明每个场地的标签，并将该标签名称传递给第三个视图，这样就不会与坐标混淆。这些坐标在第三个地图视图中只指定一次，这很好。我在我的 stringToDisplay 字符串中传递标签名称，如下所示：

```
if ([mlabel.text isEqualToString: @" The S.P.A.C.E. Gallery "])
        {
            viewController.stringToDisplay = @" The S.P.A.C.E. Gallery ";

        } 
```

# php - 自定义 WHMCS 登录页面

> ID：12771046
> 
> 赞同：0
> 
> 时间：2012-10-07T17:20:53.740
> 
> 标签：php, whmcs

我需要更改 WHMCS 的登录页面，因为当前页面与所有那些在用户登录后更好显示的附加选项有点混淆。我想更改 clientarea.php 以仅显示一个小对话框（看起来很酷在我在要求用户登录的整个页面上添加 css 和一些 jquery 之后。我试图找到专门用于客户区域的 tpl 文件，但找不到。clientarea.php 文件已编码，因此无法真正对其进行编辑。有什么猜测吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-02T06:53:51.530

你最好的选择是编辑 login.tpl

然后只需在您的对话框中

```
 <form action="{$systemsslurl}dologin.php?goto=clientarea.php" method="post" name="frmlogin">
   <label>Email address</label>
   <input type="email" name="username" placeholder="Your Email">
   <label>Password</label>
   <input type="password" name="password">
   <button type="submit">Login</button>
 </form>
 <a href="/pwreset.php" >Forgotten your Password? Click Here</a> 
```

上面的表单可以放在任何 tpl 文件中，并且可以按预期工作 注意： ?goto 子句可以用来重定向登录的用户，我们用它来导航用户回到 /cart.php?a=checkout 当他们是准备购买。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:45:41.133

您可以在 .TPL 文件中使用 jQuery.append() 和自定义标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T14:13:10.000

您可以简单地为您的登录创建自己的新自定义页面（php +模板文件），您可以使用 WHMCS API 函数验证用户登录。

如何创建自定义页面： http: [//forum.whmcs.com/showthread.php?20267 -Creating-Custom-Pages](http://forum.whmcs.com/showthread.php?20267-Creating-Custom-Pages)

登录验证 API：[http ://docs.whmcs.com/API:Validate_Login](http://docs.whmcs.com/API:Validate_Login)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-03T19:21:34.953

首先，您必须知道您使用的是什么客户端版本。要在 vs 5.3.6 上执行此操作，请转到选项卡设置，单击常规设置并查看模板。

源代码位于 /whmcs/templates

您可以复制一个目录并创建自己的模板目录，它将显示在“常规设置”中。

完成此操作后，您可能必须修改服务器页面才能获得所需的效果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T19:44:18.167

客户区被分成几个不同的模板文件。我认为您应该查看的文件是 header.tpl、login.tpl 和 footer.tpl。您还应该查看位于[http://docs.whmcs.com/Client_Area_Template_Files](http://docs.whmcs.com/Client_Area_Template_Files)和[http://docs.whmcs.com/Developer_Resources#Display_Customisation](http://docs.whmcs.com/Developer_Resources#Display_Customisation)的 WHMCS 文档。WHMCS 也为这些事情提供支持。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-24T08:10:49.407

很容易。

因为我已经创建了 WHMCS Clientarea 的 ajax 登录。

在 root 中创建一个名为 ajaxlogin.php 的文件，然后使用加密的密码检查电子邮件，然后设置会话 uid 和 upw（密码哈希）。就这样。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-03T22:40:53.153

我认为最简单的方法是使用 Smarty 中已经设置的变量。

如果显示登录页面，则 $loginpage 变量返回 true。

在 header.tpl 中，围绕您不希望在登录页面上显示的内容使用以下代码：

```
{if $loginpage ne "true"}
//nav menu etc
{/if} 
```

您也可以以相同的方式在页脚上使用它。然后它只是修改 login.tpl 以满足您的需求的一个案例。

如果您想在登录页面上显示不同的页眉和页脚，您可以添加一个 else 语句，如下所示：

```
{if $loginpage ne "true"}
//nav menu etc
{else}
//Different Content
{/if} 
```

来源： {debug} - 这会将所有 Smarty 变量转储到一个窗口。

# python - 自变量没有存储在python中？

> ID：12771063
> 
> 赞同：0
> 
> 时间：2012-10-07T17:22:53.957
> 
> 标签：python, variables, global, self

我定期在我的程序中声明自变量：

```
def __init__(self):
    self.x = dict() 
```

稍后在我的代码（调用的第一个函数）中，我为 self.x 分配了一个值。但是后来当我尝试在以后的函数中实际使用 self.x 时，self.x 打印为 {}。即使我确定我分配正确并且我的数据是正确的。

这里有点python noob，有什么我可能遗漏的吗？我是否应该将这些变量声明为全局变量，因为我的程序编写方式可能会丢失范围？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:34:33.133

如果没有看到您的其余代码，很难回答您的问题（当您提供更多信息时，我将编辑这篇文章），但也许我可以让您深入了解可能是什么问题。您的函数应该类似于下面类中所示的函数：

```
class Foo:
    def __init__(self):
        self.x = dict()

    def add(self):
        self.x[1] = 'a'  # add something to our dict

    def redefine(self):
        self.x = {2:'b', 3:'c'}  # reassign our dict 
```

所以要看到一切都井井有条：

```
foo = Foo()
print foo.x
foo.add()
print foo.x
foo.redefine()
print foo.x 
```

输出：

> {}
> {1: 'a'}
> {2: 'b', 3: 'c'}

# php - 从用户有多行但查找具有两个最大值的行的 mysql db 中提取数据

> ID：12771069
> 
> 赞同：0
> 
> 时间：2012-10-07T17:23:16.163
> 
> 标签：php, mysql

我有一张桌子叫`leaders`. 在里面我有`id`, `userid`, `bmid`, `reps`, `rounds`, `ts`. 基本上，我需要将拥有最多`rounds`. 现在每次有人进入他们的`reps`，`rounds`它是成对的，所以有人可能有 12 `rounds`13`reps`所以如果这是他们的最大值并且它在所有用户的前十名中，那么我需要提取该信息加上他们对应的`reps`. 我以为我有这个，但它实际上是从不同的行中拉出他们`max` `rounds`和他们的。`max` `reps`我所拥有的如下。

```
 SELECT max(l.rounds) as rounds, l.reps, m.name, l.userid 
 from leaders l 
 inner join members m on m.id = l.userid 
 where m.genre = 'male' and l.bmid  = 1 
 group by l.userid 
 order by  rounds desc,reps desc 
```

是`join`到`members`表中获取有关它们的一些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:51:05.503

I guess you need a subquery to achieve this. Take a look at this:

[How to select the first/least/max row per group in SQL](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

EDIT: Try this code: [http://sqlfiddle.com/#!2/8bb81/3](http://sqlfiddle.com/#!2/8bb81/3)

```
CREATE TABLE `leaders` (
  `id` int(11) AUTO_INCREMENT,
  `userid` int(11),
  `rounds` int(11),
  `reps` int(11),
  PRIMARY KEY (`id`)
);

INSERT INTO `leaders` (userid, rounds, reps) VALUES
  (1, 5, 3), (1, 7, 2), (1, 7, 1), (1, 7, 8),
  (2, 7, 6), (2, 7, 9), (2, 4, 3),
  (3, 7, 2), (3, 3, 5),
  (4, 8, 9);

SELECT
  userid,
  MAX(rounds) AS max_rounds, (
    SELECT MIN(reps)
    FROM leaders l2
    WHERE l2.userid = l1.userid AND l2.rounds <> l1.rounds
  ) AS min_reps
FROM leaders l1
GROUP BY userid
ORDER BY max_rounds DESC, min_reps ASC; 
```

# c++ - Qt 上的图形编辑器

> ID：12771074
> 
> 赞同：2
> 
> 时间：2012-10-07T17:23:40.400
> 
> 标签：c++, qt, graph, qgraphicsview

我现在正在写一个图形编辑器。程序必须在Qt上编写，但问题是我没有足够的Qt经验，但我对C++的经验很少。上周我读了一本关于 Qt 的书，但我已经读了大约 100 页，所以我只知道一些基础知识。

有人可以给我关于我应该使用哪些课程的建议吗？

我已经做了什么：

*   我用菜单文件、算法、关于等填充菜单栏。
*   我想我应该在 QGraphicsView 上绘制图形顶点等，所以我也添加了它，我还添加了 QGraphicsScene 并将它们绑定在一起（ui->setScene(scene)）。

抱歉我的错误，不幸的是我对所有这些事情没有完全了解。

我还用 scene->addRect() 添加了 QGraphicsRectItem 并设置了可移动的标志。但我不知道我应该使用哪些类。

所以，总的来说，我想了解如何做接下来的事情：

*   我想添加一个带有 2 个按钮（顶点、线）的面板。在我选择了顶点按钮（或它将是什么）并单击 QGraphicsView 之后 - 顶点应该出现在该点上。我也必须能够更改顶点名称
*   在我选择线模式（链接，连接 2 个顶点）后，我应该能够根据图形类型（定向与否）将 2 个顶点连接在一起。
*   通过单击顶点之间的链接，我应该能够更改链接的权重。

我认为一个问题就足够了。

对不起，如果问题非常简单或愚蠢。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:06:12.503

您的问题相当广泛，因此几乎不可能完全回答。所以相反，我将提供一个[非常好的例子](http://qt-project.org/doc/qt-4.8/graphicsview-elasticnodes.html)，你可以去看看。这个例子做了很多你想要的事情，并且可能是一个很好的开始代码集，既可以查看也可以重用。

# javascript - 如何优化包含对象数组的两个对象的合并

> ID：12771077
> 
> 赞同：3
> 
> 时间：2012-10-07T17:23:46.577
> 
> 标签：javascript, node.js

我需要在将被大量使用的代码路径中合并两个对象。该代码有效，但我担心它的速度优化不够，我正在寻找任何改进/替换我提出的建议。我最初在本期结束时开始编写一个示例：[如何动态合并两个 JavaScript 对象的属性？](https://stackoverflow.com/questions/171251/how-can-i-merge-properties-of-two-javascript-objects-dynamically). 该解决方案适用于简单对象。但是，我的需求有一个转折点，这就是性能问题的来源。我需要能够支持这样的数组

1.  一个简单值数组将在新对象中查找值并将这些值添加到现有对象的末尾，并且
2.  对象数组将合并对象（基于 id 属性的存在）或将新对象（id 属性不存在的对象）推送到现有数组的末尾。

我不需要函数/方法克隆，我也不关心 hasOwnProperty，因为对象在合并后会返回 JSON 字符串。

任何帮助我从中提取最后一次性能的建议将不胜感激。

```
var utils = require("util");

function mergeObjs(def, obj) {
  if (typeof obj == 'undefined') {
    return def;
  } else if (typeof def == 'undefined') {
    return obj;
  }

  for (var i in obj) {
    // if its an object
    if (obj[i] != null && obj[i].constructor == Object)
    {
      def[i] = mergeObjs(def[i], obj[i]);
    }
    // if its an array, simple values need to be joined.  Object values need to be remerged.
    else if(obj[i] != null && utils.isArray(obj[i]) && obj[i].length > 0)
    {
      // test to see if the first element is an object or not so we know the type of array we're dealing with.
      if(obj[i][0].constructor == Object)
      {
        var newobjs = [];
        // create an index of all the existing object IDs for quick access.  There is no way to know how many items will be in the arrays.
        var objids = {}
        for(var x= 0, l= def[i].length ; x < l; x++ )
        {
          objids[def[i][x].id] = x;
        }

        // now walk through the objects in the new array
        // if the ID exists, then merge the objects.
        // if the ID does not exist, push to the end of the def array
        for(var x= 0, l= obj[i].length; x < l; x++)
        {
          var newobj = obj[i][x];
          if(objids[newobj.id] !== undefined)
          {
            def[i][x] = mergeObjs(def[i][x],newobj);
          }
          else {
            newobjs.push(newobj);
          }
        }

        for(var x= 0, l = newobjs.length; x<l; x++) {
          def[i].push(newobjs[x]);
        }
      }
      else {
        for(var x=0; x < obj[i].length; x++)
        {
          var idxObj = obj[i][x];
          if(def[i].indexOf(idxObj) === -1) {
             def[i].push(idxObj);
          }
        }
      }
    }
    else
    {
      def[i] = obj[i];
    }
  }
  return def;} 
```

要合并的对象样本：

```
var obj1 = {
            "name" : "myname",
            "status" : 0,
            "profile": { "sex":"m", "isactive" : true},
            "strarr":["one", "three"],
            "objarray": [
                {
                    "id": 1,
                    "email": "a1@me.com",
                    "isactive":true
                },
                {
                    "id": 2,
                    "email": "a2@me.com",
                    "isactive":false
                }
            ]
        };
        var obj2 = {
            "name" : "myname",
            "status" : 1,
            "newfield": 1,
            "profile": { "isactive" : false,  "city": "new York"},
            "strarr":["two"],
            "objarray": [
                {
                    "id": 1,
                    "isactive":false
                },
                {
                    "id": 2,
                    "email": "a2modified@me.com"
                },
                {
                    "id": 3,
                    "email": "a3new@me.com",
                    "isactive" : true
                }
            ]
        }; 
```

一旦合并，这个 console.log(mergeObjs(obj1, obj2)) 应该产生这个：

```
{ name: 'myname',
  status: 1,
  profile: { sex: 'm', isactive: false, city: 'new York' },
  strarr: [ 'one', 'three', 'two' ],
  objarray: 
   [ { id: 1, email: 'a1@me.com', isactive: false },
     { id: 2, email: 'a2modified@me.com', isactive: false },
     { id: 3, email: 'a3new@me.com', isactive: true } ],
  newfield: 1 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:07:02.863

我会看看：[https ://github.com/bestiejs/lodash](https://github.com/bestiejs/lodash)

`_.merge`不在“优化”功能列表中，但这是经过实战考验的，久经考验的。他还有一个性能套件，可能会询问您如何为 perf 套件做出贡献，以获得对`merge`实施的一些可见性。

[https://github.com/bestiejs/lodash/blob/master/lodash.js#L1677-1738](https://github.com/bestiejs/lodash/blob/master/lodash.js#L1677-1738)

编辑：顺便说一句，我不会过早优化。我会看看这是否真的是您的用例中的一个问题，然后转到实际数据。我会看类似的东西：[https ://github.com/felixge/faster-than-c](https://github.com/felixge/faster-than-c)

基本原则：

*   收集数据
*   分析一下
*   发现问题
*   修复它们
*   重复

他对每一个都有提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T18:02:20.857

如果您不使用 Lo-Dash，而只是想要一个工具来合并两个对象（包括它们的数组），请使用 deepmerge：[https ://github.com/nrf110/deepmerge](https://github.com/nrf110/deepmerge)

npm 安装 deepmerge

# php - Facebook 通知 API：“必须使用应用程序 access_token 调用此方法”

> ID：12771078
> 
> 赞同：4
> 
> 时间：2012-10-07T17:23:47.777
> 
> 标签：php, facebook, facebook-graph-api, notifications

我正在尝试使用 Graph API Explorer 从我的应用程序发送 Facebook 通知。所以我选择了我的应用程序 POST，并在`/`

```
11093774316/notifications?access_token=430xxxxxx156|HU0ygMtxxxxxxxxxxxxikVKg&template=Hello&href=index.php 
```

访问字符串是我在“访问令牌调试器”上得到的，我检查它是否正常。

但是，我收到此错误消息：

```
{
  "error": {
    "message": "(#15) This method must be called with an app access_token.", 
    "type": "OAuthException", 
    "code": 15
  }
} 
```

我会说它在一个月前工作......有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-06T14:00:40.543

尝试使用此处的访问令牌：

[https://developers.facebook.com/tools/access_token/](https://developers.facebook.com/tools/access_token/)

我有同样的问题，我已经解决了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T17:38:44.520

*   尽快更改您的应用程序机密，您不应在这些问题中包含私人信息
*   然后，检查您的应用程序的高级设置并将应用程序类型设置为“Web”，而不是“native/desktop” - 如果它设置为native/desktop，则应用程序机密不受信任并且需要应用程序访问令牌的调用将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T03:07:01.770

我也在尝试使用图形 api 发布通知。我首先请求正确返回的应用程序 access_token。然后我将它用作通知请求的参数，就像应该做的那样。但是，我仍然收到相同的错误消息“必须使用应用程序 access_token 调用此方法”......并且是的，该应用程序配置为 Web 应用程序。

前五个小时很有趣，但它变得有点烦人......

任何其他的想法，世界？请？

**编辑**： **我整晚都在与这个问题作斗争，**第二天早上，我最终决定放弃它。这个 API 肯定有我不理解的问题，而且我无法在任何地方找到任何解决方案。

关于我所做的一些细节，以防有人提出想法：

这是一个 iOS 应用程序，使用 Facebook iOS SDK。登录、授权、获取朋友资料、在我的墙上发布消息：一切正常。

然后，为了发送通知，我首先发送请求以检索应用访问令牌。

```
NSDictionary* parameters = @{@"client_id": [THE APP FACEBOOK ID], @"client_secret" : [THE APP FACEBOOK SECRET], @"grant_type" : @"client_credentials"};

NSURL* feedURL = [NSURL URLWithString:@"https://graph.facebook.com/oauth/access_token"];

SLRequest *feedRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodGET URL:feedURL parameters:parameters];
feedRequest.account = self.account;
[feedRequest performRequestWithHandler ... ] 
```

请求回答：

```
NSString* tokenString = [[NSString alloc]  initWithBytes:[responseData bytes] length:[responseData length] encoding: NSUTF8StringEncoding];
NSArray* chunks = [tokenString componentsSeparatedByString: @"="];
NSString* appAccessToken = [chunks objectAtIndex:1];

NSLog(@"appAccessToken '%@'", appAccessToken); 
```

这似乎按预期工作。我得到：

```
appAccessToken '1309[HIDDEN]|-eta-nuWz[HIDDEN]' 
```

现在，我尝试发布通知

```
NSDictionary* parameters = @{@"href": [myHref absoluteString], @"access_token" : appAccessToken, @"template" : myMessage};
NSURL* feedURL = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@/notifications", theRecipientFacebookId];
SLRequest* feedRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodPOST URL:feedURL parameters:parameters];
    feedRequest.account = self.account;
    [feedRequest performRequestWithHandler: ... ] 
```

不幸的是，我不断得到这个：

```
error =     {
    code = 15;
    message = "(#15) This method must be called with an app access_token.";
    type = OAuthException;
}; 
```

这真的让我发疯了......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-28T11:50:14.733

所以，因为我使用 Graph Api Explorer 获得了成功，所以我有了绕过 SLRequest 对象的想法，然后去处理通常的发布请求（使用 AFNetworking）。

```
NSURL* url = [NSURL URLWithString:@"https://graph.facebook.com"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys: appToken, @"access_token", @"index.php", @"href", @"hello", @"template", nil];

[httpClient postPath:[NSString stringWithFormat:@"/%@/notifications", theRecipientFacebookId] parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {
            NSString *responseStr = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];
            NSLog(@"Request Successful, response '%@'", responseStr);
        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            NSLog(@"[HTTPClient Error]: %@", error.localizedDescription);
        }]; 
```

**我得到了成功：真的**！因此，如果我不得不猜测，我建议在使用 SLRequest 时会覆盖 access_token 参数（应用程序访问令牌），并且会被另一个“access_token”（用户访问令牌）覆盖。如果这是实际的解释，那当然是有道理的。但是为什么这些令牌应该具有相同的名称呢？

**编辑**：我确实看到了通知，现在，它可以工作了。所以问题肯定来自使用 SLRequest，我相信它会覆盖 access_token 参数。

**附加信息**：您无法向尚未安装应用程序的用户发送通知。为了“邀请朋友”，目前看来唯一的解决方案是使用 facebook SDK 中的 Dialog 功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-20T00:05:53.680

尝试更改图形资源管理器顶部字段中的访问令牌，不要将其添加到 URL。

```
Access Token: xxxxxx|YYYYYY

POST: /11093774316/notifications?template=Hello&href=index.php 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-04T11:11:50.720

转到您的设置 => Basic => App Secret 并将该密钥用作密钥然后我们

# jquery - 基本 Twitter 搜索出现 profile_image_url 的未定义错误

> ID：12771080
> 
> 赞同：2
> 
> 时间：2012-10-07T17:23:59.453
> 
> 标签：jquery, json, jquery-mobile, twitter, undefined

好的，这是我的代码，当我开始解析结果时，我收到一个错误 Uncaught TypeError: Cannot read property 'profile_image_url' of undefined 我可以看到该对象，看来我选择正确？有什么建议吗？谢谢

```
$('#twits').live('pageinit' , function(){
alert('test');
$('#twitsubmit').click(function(){
    alert($('#query').val());

    twitSearch();
    });
    function twitSearch(){
        $.ajax({
            url:'http://search.twitter.com/search.json?q='+ $('#query').val(),
            dataType:'jsonp',
            success: function(json_results){
                $('#twitresults ul').remove();
                $('#twitresults').append('<ul data-role="listview"></ul><p>');
                console.log(json_results);
                listItems = $('#twitresults').find('ul');
                $.each(json_results, function(key){
                    html ='<img src=' + json_results.results[key].profile_image_url +  '/>';
                    html += '<h3><a href="#">' + json_results.results[key].text + '</a></h3><p>';
                    html += '<p>From: ' + json_results.results[key].from_user + 'Created: ' + json_results.results[key].created_at + '</p>';
                    listItems.append('<li>' + html + '</li>');

                    });
                $('#twitresults ul').listview();

                }
            });
        };
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:11:37.337

当您使用 $.each 遍历数组时，传递给回调的值（在您的情况下为键）就是对象本身。所以尝试使用 key.profile_image_url。

虽然 - 你似乎也在使用 json_results.results。因此，您的 $each 可能需要改用 json_results.results ，即： $.each(json_results.results, ...

# ios - 是否可以在拍照并使用 ImagePickerController 选择“使用”后重新呈现相机？

> ID：12771088
> 
> 赞同：0
> 
> 时间：2012-10-07T17:24:57.263
> 
> 标签：ios, camera, uiimagepickercontroller

使用 ImagePickerController 拍照并选择“使用”后，我希望再次出现相机屏幕以继续拍摄更多照片，我该如何实现这一点，以便我可以不停地继续拍摄？我没有使用 AVFoundation，而是使用 ImagePickerController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:23:12.610

如果您设置`showsCameraControls`并`UIImagePickerController`提供`NO`自己的相机控件，您可以连续拍摄多张照片，并在您认为合适时关闭界面。

# c# - C#程序中的WatiN没有响应

> ID：12771089
> 
> 赞同：1
> 
> 时间：2012-10-07T17:25:04.027
> 
> 标签：c#, .net, watin

我是 WatiN 的新手，但做了一些应用程序，它非常好。问题是我的程序在执行一些网络操作时没有响应。

这是我的 WatiN 源代码：

```
using (var ie = new IE())
{
    StreamWriter wr = new StreamWriter(textBox1.Text+".txt");

    ie.GoTo("http://twitter.com/"+textBox1.Text+"/followers");

    string dm1 = ie.Body.Parent.OuterHtml;

    Match match1 = Regex.Match(dm1, "(?<=<strong>).*?(?=</strong> Followers)");
    string ck = match1.ToString();
    ck = ck.Replace(",", "");
    long check = Int64.Parse(ck);
    long n= 0;
    string pattern = "(?<=data-screen-name=\").*(?=data-name)";

    while (n <= check)
    {
        WatiN.Core.Settings.WaitUntilExistsTimeOut = 1;
        var focusme = ie.Div(Find.ByClass("stream-loading"));
        var element = focusme.NativeElement as IEElement;
        element.AsHtmlElement.scrollIntoView();

        string dm = ie.Body.Parent.OuterHtml;
        MatchCollection matches1 = Regex.Matches(dm, pattern);
        n = matches1.Count;
        label4.Text = n.ToString();
    }
    string dom = ie.Body.Parent.OuterHtml;

    MatchCollection matches = Regex.Matches(dom, pattern);
    foreach (Match match in matches)
    {
        string usr0 = match.ToString();
        int i = usr0.IndexOf("\"");
        string usr = usr0.Substring(0, i - 1);
        wr.WriteLine(usr);
    }
    label4.Text = label4.Text + " done";

    wr.Close();
} 
```

这是将 twitter 关注者放入文件的来源。这只是一个随机示例，但在执行此操作时，我的程序没有响应。我想我必须为此操作创建一个新流程，但不知道如何进行。

**编辑：**我在 button1_Click 中使用它，所以基本上在 Form1 类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:01:39.717

关于这些问题的材料有很多——这不是 WatiN 的问题，而是设计的问题。您应该在 BackgroundWorker 中移动 WatiN 核心，这样 UI 在执行 WatiN 代码时就不会挂起。

[WinForm 应用程序 UI 在长时间运行期间挂起](https://stackoverflow.com/questions/1216791/winform-application-ui-hangs-during-long-running-operation)

[Windows 窗体应用程序 - 缓慢/无响应的 UI](https://stackoverflow.com/questions/11425395/windows-forms-application-slow-unresponsive-ui?lq=1)

还有一些指南：

[http://www.codeproject.com/Articles/58292/Basic-Backgroundworker](http://www.codeproject.com/Articles/58292/Basic-Backgroundworker)

[http://www.dotnetperls.com/backgroundworker](http://www.dotnetperls.com/backgroundworker)

# c - 在 C 中读取文件时遇到问题

> ID：12771091
> 
> 赞同：-1
> 
> 时间：2012-10-07T17:25:11.310
> 
> 标签：c

我正在尝试解决一个问题，该问题需要我读取一个文件并生成另一个文件，该文件与原始文件具有相同的内容，但每四个字节被删除。我尝试这样做......

```
int main()
{
  FILE *p;
  FILE *q;
  int i=0,k=0;
  char c;

  p = fopen("C:\\Users\\Teja\\Desktop\\Beethoven.raw","rw");
  q = fopen("C:\\Users\\Teja\\Desktop\\Beethoven_new.raw","w+");

  printf("%x is the EOF character \n",EOF);
  while((c=fgetc(p))!=EOF)
  {

     if(i==3){
      i=0;
      printf("Removing %x %d \n",c,k++);
     }
     else{
      printf("Putting %x %d \n",c,k++);
      fputc(c,q);
      i++;
     }
  }
  fclose(p);
  fclose(q);

  return 0;
} 
```

我试图读取的文件是一个 .raw 文件，大小约为 10-15 MB。我注意到上面的代码通常在 88 个字节后停止读取文件。有什么方法可以读取大文件还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:28:58.937

除了已经指出的内容，关于打开文件的注意事项：听起来你的文件在二进制文件中，这意味着你必须`b`在模式字符串中添加一个。此外，`rw`它不是一种模式，因为您只读取`p`您想要的内容`rb`，并且您只写入`q`您想要的`wb`或`wb+`。

顺便说一句，您需要`fgetc`返回 int 的原因是因为`fgetc`必须返回 257 个唯一值：所有可能的值`char`，即`0x00`thru`0xFF`以及表示 EOF 的唯一值，通常`-1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:28:25.320

改变

```
char c; 
```

到

```
int c; 
```

[因为fetgetc()](http://www.cplusplus.com/reference/clibrary/cstdio/fgetc/)的返回类型是 an`int`而不是`char`。

# couchdb - 按时间排序记录

> ID：12771094
> 
> 赞同：1
> 
> 时间：2012-10-07T17:25:27.903
> 
> 标签：couchdb

我创建了一个简单的视图来返回博客标题和时间

```
function(doc) {
if ( doc.TITLE) emit(doc.TIME, doc.TITLE); 
```

}

首先显示最新博客文章的简单方法是什么（默认情况下是相反的）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T17:36:25.350

只需`descending`在查看请求时应用排序顺序，例如

```
GET /dbname/_design/titles/_view/by_time?descending=True 
```

视图输出将以相反的方式排序 - 最新的博客文章将排在最前面。请记住，startkey/endkey 参数将限制此相反顺序的键范围。您可以在[CouchDB wiki中找到有关查看查询参数的更多信息](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)

# google-apps-script - 如何使用谷歌应用脚 本显示联系人照片？

> ID：12771099
> 
> 赞同：0
> 
> 时间：2012-10-07T17:26:35.733
> 
> 标签：google-apps-script

嗨，我正在尝试使用谷歌应用程序脚本显示联系人照片，这是我目前所拥有的。所以我成功连接到联系人，获取第一个，它是 id，然后我使用 OAuth 进行身份验证，加载完整的联系人资料，我什至有照片的链接，但它不会显示。我在某处读到，将访问令牌添加到链接会有所帮助，但是从哪里获取此令牌？

```
function doGet() {
  var app = UiApp.createApplication();
  var c = ContactsApp.getContacts();
  c1 = c[0];
  var options = OAuthApp.getAuth('contacts','http://www.google.com/m8/feeds'); 
  var response = UrlFetchApp.fetch(c1.getId().replace(/base/,'full')+"?alt=json&v=3.0", options); 
  var object  = Utilities.jsonParse(response.getContentText());
  app.add(app.createImage(object.entry.link[0].href));
  return app;
} 
```

当我使用 UrlFetchApp.fetch （包括包含授权的选项参数）时，它会加载图像数据，但我不知道如何授权 app.createImage 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:55:00.210

UiApp 无法显示私密图片。明星问题 912 [http://code.google.com/p/google-apps-script-issues/issues/detail?id=912](http://code.google.com/p/google-apps-script-issues/issues/detail?id=912)

# c# - ServiceStack.Text 可以将 JSON 反序列化为自定义泛型类型吗？

> ID：12771101
> 
> 赞同：2
> 
> 时间：2012-10-07T17:26:47.937
> 
> 标签：c#, json, generics, serialization, servicestack

示例如下，其中 T 是一些 DTO，我希望得到 1...n 与 resultCount 匹配。这使用 Jayrock JsonConvert 加载得很好，但是在尝试反序列化在 Jayrock 中工作的相同 json 文本时，它只是返回一个新的 JsonResult 给我。

```
[Serializable]
public class JsonResult<T>
{
  public int resultCount = 0;
  public T[] results;
} 
```

[我认为这可能是我在ServiceStack.Text.JsonSerializer.DeserializeFromString<T>()](https://stackoverflow.com/questions/12765072/servicestack-text-jsonserializer-deserializefromstringt-fails-to-deserialize)中询问的一个问题，如果字符串包含 \n's 则无法反序列化，但是即使去掉那些 \n's 仍然不允许反序列化成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T17:43:20.623

[ServiceStack 的 JSON 序列化](https://github.com/ServiceStack/ServiceStack.Text)器确实支持泛型，但只序列化**公共属性**，这是这里的问题。

此外，该`[Serializable]`属性在 .NET 之外的大多数（全部？）序列化程序中没有意义，包括所有 ServiceStack 的序列化程序。

# css - 修改 LESS 变量的 alpha 不透明度

> ID：12771102
> 
> 赞同：185
> 
> 时间：2012-10-07T17:26:56.643
> 
> 标签：css, variables, less, opacity, alpha

使用 LESS，我知道我可以更改颜色变量的饱和度或色调。看起来像这样：

```
background: lighten(@blue, 20%); 
```

不过，我想更改颜色的 alpha 不透明度。最好像这样：

```
background: alpha(@blue, 20%); 
```

有没有一种简单的方法可以在 LESS 中做到这一点？

* * *

## 回答 #1

> 赞同：324
> 
> 时间：2012-10-07T19:33:50.290

网站[文档](http://lesscss.org/functions/#color-operations-fade)给出了答案：

```
background: fade(@blue, 20%); 
```

函数名称`fade`不`alpha`符合该文档。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-06-14T11:43:05.320

## 为了完整性

**褪色**

设置颜色的绝对透明度。可以应用于颜色，无论它们是否已经具有不透明度值。

```
background: fade(@blue, 20%); 
```

**淡入**

降低颜色的透明度（或增加不透明度），使其更加不透明。

```
background: fadein(@blue, 80%); 
```

**消退**

增加颜色的透明度（或降低不透明度），使其不那么不透明。要淡入另一个方向，请使用淡入淡出。

```
background: fadeout(@blue, 20%); 
```

[查看完整文档](http://lesscss.org/functions/#color-operations-fade)

# python - RSA的计算时间？

> ID：12771104
> 
> 赞同：0
> 
> 时间：2012-10-07T17:27:02.200
> 
> 标签：python, performance, rsa

我对编程很陌生，在开始学习 Python 之前，我已经在 Coursera 上完成了密码学课程。最近，作为一个项目，我想为 RSA 算法编写自己的代码。我刚刚完成了加密过程的编写，如下所示：

![在此处输入图像描述](../Images/4e4fce375803351fa68eec55b1c25268.png)

但是，该程序现在正在运行，并且需要很长时间。我确实注意到，由于庞大的尺寸，键和模数的计算需要很长时间。因为我对这一切都不熟悉，所以我知道的不够多，想知道是否有任何方法可以加快这个过程？

如果需要发布我的代码，我可以这样做，但是我更喜欢关于如何加快代码速度的更一般的答案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:58:47.707

我也参加了coursera的课程。您应该检查以下库，它可以极大地加快您的计算速度：

```
1.) http://userpages.umbc.edu/~rcampbel/Computers/Python/lib/numbthy.py ( check the powmod function)
2.) gmpy2 (gmpy2.readthedocs.org/en/latest/mpz.html)
3.) mpmath (code.google.com/p/mpmath/) 
```

# mysql - 对如何构建我的 SQL 查询感到困惑

> ID：12771108
> 
> 赞同：1
> 
> 时间：2012-10-07T17:27:30.717
> 
> 标签：mysql, sql

我有以下查询：

```
SELECT 
    `people`.`surename`, 
    calcWeight(`people`.`surname`,'kiera',6)
    as `weight`
FROM
    `people`
LEFT JOIN
    `dogs`
ON
    `people`.`id` = `dogs`.`owner` 
ORDER BY 
    `weight` DESC 
```

问题是我需要删除所有结果 where `weight`，这是我计算的值是 0。我认为它会 WHERE `weight`> 0 但显然`weight`直到 where 子句之后才存在。我不知道我是打算移动`weight`计算的位置还是移动 WHERE。

我不想做

```
 WHERE calcWeight(`people`.`surname`,'kiera',6) > 0 
```

因为 calcWeight 需要很长时间来计算（当它发生在数千行上时）而且我不知道它是否会缓存结果并重新使用它。

任何帮助和建议都会很棒！谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:37:07.737

使用子查询执行此操作的最佳方法：

```
select t.*
from (SELECT `people`.`surename`, calcWeight(`people`.`surname`,'kiera',6) as `weight`
      FROM `people` LEFT JOIN
           `dogs`
           ON  `people`.`id` = `dogs`.`owner` 
     ) t
where weight > 0
ORDER BY `weight` DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T17:31:07.527

在您的`ORDER BY`条款之前，添加`HAVING weight > 0`. `HAVING`子句可以引用您在`SELECT`子句中设置的聚合函数和别名。

`WHERE`和的区别`HAVING`是`WHERE`在结果集投影之前`HAVING`执行，在实际投影的结果集上执行。因此，`WHERE`有更多使用索引的机会（我认为`HAVING`过滤器根本不能使用索引），但`HAVING`更灵活一些。尽可能使用`WHERE`，`HAVING`否则使用。

# css - 试图在不拉伸容器的情况下将 JScrollPane 高度设置为 100%？

> ID：12771110
> 
> 赞同：2
> 
> 时间：2012-10-07T17:27:34.503
> 
> 标签：css

我有一个中间容器，它占据了屏幕上剩余的任何垂直空间。在其中，我放置了一个当前设置为 200px 的 Jquery 滚动条：

```
.scroll-pane
{
width: 100%;
height: 200px;
overflow: auto;
}
.horizontal-only
{
height: auto;
max-height: 100%;
} 
```

但是，如果我将`.scroll-pane`高度设置为 100%，它只会删除滚动条并拉伸整个页面。

[在此处查看 JsFiddle](http://jsfiddle.net/je7ZP/)

我怎样才能阻止这个？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:14:32.980

`height: 100%`永远不会像你想要的那样工作。*CSS 规范规定它必须等于浏览器窗口的高度，或具有指定绝对*高度的最近的父块级元素。~~这~~ 意味着此代码不*应按*预期工作：

```
<!DOCTYPE html>
<html>
 <head>
  <title>Want the body to fill the page? Too bad!</title>
  <style type="text/css">
   html, body {
    height: 100%;
   }
   .page {
    padding-top: 50px;
    box-sizing: border-box;
    height: 100%;
   }
   .header {
    margin-top: -50px;
    height: 50px;
   }
   .body {
    height: 100%;
    background: gray;
   }
  </style>
 </head>
 <body>
  <div class="page">
   <div class="header">
    <h1>Too bad!</h1>
   </div>
   <div class="body">
    <p>Hello cruel world...</p>
   </div>
  </div>
 </body>
</html> 
```

但是，这在 Chrome 中运行良好。为什么？我只能假设 Google 决定**专门反对 Web 标准**，因为在这种情况下，这些标准***毫无意义***。为什么我希望某些东西是浏览器窗口的确切高度？唯一的一次是`<div>`包装整个页面；在这种情况下，一个简单的“高度与父块相关”规则可以正常工作，而不会破坏其他地方的期望。

不过，有办法解决这个问题。至少，这也是我在 Firefox 中尝试之前想说的。另一种获取方式`height: 100%`（有一些限制）是使用`position: absolute`. 然而，Firefox 似乎没有尊重`position: relative`某个`display: table-cell`元素——可能又是那些讨厌的标准。无论如何，如果您有兴趣，这里是这种技术的代码：

```
#wrapper > div > #middleleft {
 position: relative;
}
.scroll-pane {
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
} 
```

所以，你可以做什么？好吧，不幸的是，我还不知道答案。一个笨拙的解决方案是让 Javascript 将高度设置为绝对像素值，并将一个事件附加到窗口调整大小以更新该高度。如果我找到更好的方法，我会回复你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T02:58:09.873

这是我对这个问题的解决方案（[jsfiddle](http://jsfiddle.net/je7ZP/3/)）。它使用这样的标记：

```
<div id="top">...</div>
<div id="wrapper">
    <div id="middle">...</div>
</div>
<div id="bottom">...</div> 
```

The `top` and `bottom` divs are position absolutely at the top and bottom, with a `width` of `100%`. The wrapper `div` has `height: 100%`, `box-sizing: border-box`, and top and bottom padding equal to the height of the top and bottom divs, respectively. This causes it to fill the viewport but have padding underneath the top and bottom divs. The `middle` div has a height of `100%` so it fills the content box of the wrapper (i.e., `100%` minus the top and bottom paddings). It has `position: relative`, which leaves you free to use `height: 100%` on both interior boxes.

Lastly, `middleleft` is positioned absolutely and `middleright` has a left margin equal to its width, which causes it to fill the remaining horizontal space.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T19:26:09.457

我不确定您到底想做什么，但另一种方法是将身体高度设置为 100%，然后将滚动窗格设置为“高度：自动”。然后对于“顶部”和“底部” div 使用的固定定位，加上等于顶部/底部高度的边距。

```
body {
    height: 100%;
}
.top {
    position: fixed;
    top: 0;
    height: 100px;
}
.middle {
    height: auto;
    margin: 100px auto;
}
.bottom {
    position: fixed;
    bottom: 0;
   height: 100px;
}

<div class="top">content</div>
<div class="middle">content</div>
<div class="bottom">content</div> 
```

试试那个...

# php - 将表格中的文本转换为带有换行符的纯文本

> ID：12771115
> 
> 赞同：2
> 
> 时间：2012-10-07T17:28:12.350
> 
> 标签：php, simple-html-dom

`<div>`给定一大块在和中很好地显示数据的 HTML `<table>`，如何在保留最初在单个单元格和 div 中找到的文本的同时删除所有 HTML/CSS 标记，现在只用换行符分隔？

此处显示的当前尝试将输出一个长的连续段落，而不是在 div 或表格形式时保持分隔。

**原始 HTML： http:** [//pastebin.com/63N3Kg16](http://pastebin.com/63N3Kg16)

**输出：**

```
John Smith | SomeName Realty | (xxx) 939-4835 Allston St, Cambridge, MA Very spacious under renovation with SST/Granite, porch, minutes to MIT, redline, Nov/1 4BR/1BA Apartment $3,400/month Bedrooms 4 Bathrooms 1 full, 0 partial Sq Footage Unspecified Parking None Pet Policy No pets Deposit $0 DESCRIPTION Triple decker building secondfloor apt aprox 2000 sqf with large bedrooms, kitchen, pantry, porch, d/w, all woodfloor and ZTilded in the kitchen, new bath. utilities extra,Nov/1 see additional photos below Contact info: Payman Ahmadifar Bayside Realty (xxx) 939-4835 Posted: Sep 24, 2012, 6:55am PDT 
```

**PHP**

```
nl2br(trim(strip_tags($html))); 
```

* * *

**预期产出**

`<br>`带有或换行符、无`<div>`或`<table>`HTML 标记的纯文本。基本上是为了使文本更具可读性，保持原始的间距/分隔结构，但除了`<br>`.

```
John Smith | SomeName Realty | (xxx) 939-4835 

Allston St, Cambridge, MA 

Very spacious under renovation with SST/Granite, porch, minutes to MIT, redline, Nov/1 

4BR/1BA Apartment $3,400/month 

Bedrooms 4 
Bathrooms 1 full, 0 partial 
Sq Footage Unspecified 
Parking None 
Pet Policy No pets 
Deposit $0 

DESCRIPTION 
Triple decker building secondfloor apt aprox 2000 sqf with large bedrooms, kitchen, pantry, porch, d/w, all woodfloor and ZTilded in the kitchen, new bath. utilities extra,Nov/1 see additional photos below 

Contact info: Payman Ahmadifar Bayside Realty (xxx) 939-4835 
Posted: Sep 24, 2012, 6:55am PDT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:18:42.633

你可以玩一些字符串操作

尝试

```
$string = strip_tags($html);
$string = str_replace(chr(32).chr(32).chr(32),"*****",$string);
$newString = array_map(function($var){ return  trim(preg_replace('!\s+!', ' ',$var)); },explode("*****",$string));
print(implode("\n", $newString)); 
```

[观看现场演示](http://codepad.viper-7.com/ZWMxMd)

# java - JDBC 未执行 SHOW DATABASES 命令

> ID：12771120
> 
> 赞同：2
> 
> 时间：2012-10-07T17:29:12.450
> 
> 标签：java, mysql, jdbc, resultset

我想获取存储在 mysql 中的数据库列表，并通过结果集使用命令“show databases”将其放入 java 表中。但它不工作。

```
DefaultTableModel model=(DefaultTableModel)dbTbl.getModel();
try{
    Class.forName("com.mysql.jdbc.Driver");
    Connection con=DriverManager.getConnection("jdbc:mysql//localhost/:3306","root","password");
    Statement stmt=con.createStatement();
    ResultSet rs=stmt.executeQuery("show databases;");
    while(rs.next())
   {
    String db=rs.getString(1);
    model.addRow(new Object[] {db});
   }
    rs.close();
    stmt.close();
    con.close();
}
catch(Exception e)
{
    JOptionPane.showMessageDialog(null,"nahi chalda");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T17:42:02.977

这不是在 JDBC 中获取数据库列表的最佳方式。这是它的完成方式 - 使用元数据

```
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("jdbc:mysql://localhost/:3306","root","password");
DatabaseMetaData meta = con.getMetaData();
ResultSet resultSet = meta.getCatalogs();
while (resultSet.next()) {
   String db = resultSet.getString("TABLE_CAT");
   model.addRow(new Object[] {db});
}
resultSet.close();
con.close(); 
```

另请参阅：[如何使用 java JDBC 获取 MySql 的数据库“架构”名称列表](https://stackoverflow.com/questions/5679259/how-to-get-list-of-databases-schema-names-of-mysql-using-java-jdbc)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T16:18:05.220

I just forgot to add colon after "jdbc:mysql Correct code is:

```
Connection con=DriverManager.getConnection("jdbc:mysql://localhost/:3306","root","password"); 
```

It works ,......... !!!

# c++ - 使用其元素对向量进行排序

> ID：12771123
> 
> 赞同：0
> 
> 时间：2012-10-07T17:29:21.130
> 
> 标签：c++, vector, c++11, stdvector

我需要知道如何使用其元素对用户定义类的向量进行排序。假设我有一个名为“坐标”的类，它使用 getX 和 getY 方法返回一个 int 值。我创建了向量数组“vector PointTwoD vcP2D(5);”

```
 class coordinates {
 int getX();
 int getY();

  ) 
```

现在的问题是，1）我需要使用 getX() 对向量“vcP2D”进行排序并按 asc 顺序排序 2）假设用户输入“2”作为 x 坐标。并使用该信息我需要找到哪个向量包含 2

请指教

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T18:16:53.863

这将做：

```
std::sort(v.begin(), v.end(), [](const coordinates& c, const coordinates& d){ return c.getX() < d.getX(); }); 
```

它使用 C++11 Lambda 表达式作为`std::sort`.

一个简短的[演示](http://liveworkspace.org/code/e4ab5f38881fa180e9ed19027a57370a)：

```
#include <algorithm>
#include <vector>

#include <iostream>

struct coordinates
{
  int x;
  int y;
};

int main()
{
  std::vector<coordinates> v{ {2,3}, {0,0}, {1,5} };

  std::sort(v.begin(), v.end(), [](const coordinates& c, const coordinates& d) { return c.x < d.x; });

  std::cout << "sorted by x values, values of \"x\": " << v[0].x << " " << v[1].x << " " << v[2].x << "\n";

  std::sort(v.begin(), v.end(), [](const coordinates& c, const coordinates& d) { return c.y < d.y; });

  std::cout << "sorted by y values, values of \"x\": "  << v[0].x << " " << v[1].x << " " << v[2].x << "\n";
} 
```

* * *

如何以相同方式[查找元素](http://liveworkspace.org/code/cbcdb37f9dea92c0c86155c4b0acff72)的演示：

```
#include <algorithm>
#include <vector>

#include <iostream>

struct coordinates
{
  int x;
  int y;
};

int main()
{
  std::vector<coordinates> v{ {2,3}, {0,0}, {1,5} };

  auto result = std::find_if(v.begin(), v.end(), [](const coordinates& c){ return c.x == 1 && c.y == 5; });
  if(result != v.end())
    std::cout << "point (1,5) is number " << std::distance(v.begin(), result)+1 << " in the vector.\n";
  else
    std::cout << "point (1,5) not found.\n";
 } 
```

如果您要在排序后的向量中进行搜索，可以使用[`std::binary_search`](http://en.cppreference.com/w/cpp/algorithm/binary_search)带有比较功能的 which（`std::sort`同上）。它也没有给那个元素一个迭代器，只有一个`true`or `false`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T17:34:05.913

您需要在元素上定义严格的弱顺序，使用`operator< ()`或二元谓词，然后使用`std::sort()`.

最简单的方法是创建一个小于`operator<()`：

```
bool operator< (coordinates const& c0, coordinates const& c1) {
    // return a suitable result of comparing c0 and c1 such that operator<()
    // become a strict weak order
} 
```

有了这个，您对 a 进行排序所需要做的`std::vector<coordinates>`就是使用`std::sort()`. 要定位特定对象，您将使用`std::lower_bound()`.

# java - 如何在不关闭java中的UI的情况下更新时间？

> ID：12771125
> 
> 赞同：1
> 
> 时间：2012-10-07T17:29:42.203
> 
> 标签：java, user-interface, time

我想创建一个具有超时/超时功能的系统。

在将该功能包含到我的系统之前，我尝试了此代码作为试用版：

```
import java.text.SimpleDateFormat;
import java.util.Date;
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class Time extends JFrame implements ActionListener {

     Date now = new Date();
     private JLabel time;
     private JButton getTime;
     private SimpleDateFormat dateFormatter = new SimpleDateFormat("hh:mm:ss");

public Time()
{

  setLayout(null);
  setSize(500,300);

  JLabel time = new JLabel("00:00:00");
  time.setSize(100,100);
  time.setLocation(40,40);

  JButton getTime = new JButton("GET TIME");
  getTime.addActionListener(this);
  getTime.setSize(90,30);
  getTime.setLocation(90,70);

  Container pane = getContentPane();

  pane.add(time);
  pane.add(getTime);

  setVisible(true);

}

public void actionPerformed(ActionEvent e)
{
    if (e.getActionCommand() == "GET TIME")
    {
        JOptionPane.showMessageDialog(null, "Time "+dateFormatter.format(now),       
"Time.",JOptionPane.INFORMATION_MESSAGE);
}
}

public static void main(String[] args) {
  new Time();
}
} 
```

它获取当前时间，但是当我再次单击按钮时它仍然给出相同的时间。只有当我关闭 UI 时它才会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:30:33.250

**罐头答案：**

不要使用`==`. 请改用`equals(...)`or`equalsIgnoreCase(...)`方法。了解 == 检查两个*对象*是否相同，这不是您感兴趣的。另一方面，这些方法检查两个字符串是否具有相同顺序的相同字符，这在这里很重要。所以而不是

```
if (fu == "bar") {
  // do something
} 
```

做，

```
if ("bar".equals(fu)) {
  // do something
} 
```

或者，

```
if ("bar".equalsIgnoreCase(fu)) {
  // do something
} 
```

* * *

**无法回答的答案：**

换句话说，改变这个：

```
if (e.getActionCommand() == "GET TIME") 
```

对此：

```
if ("GET TIME".equals(e.getActionCommand()) 
```

或者更好的是，使用字符串常量。

此外，您需要避免在 Swing GUI 中使用空布局，因为您会发现这是一种很难布局的方式。使用布局管理器更容易、更健壮。

**编辑**
您需要从您的 actionPerformed 方法中获取时间。也就是说，`now`应该在调用JOptionPane之前在actionPerformed方法中创建。

```
public void actionPerformed(ActionEvent e)
{
    if (e.getActionCommand() == "GET TIME")
    {
        now = new Date();
        JOptionPane.showMessageDialog(null, "Time "+dateFormatter.format(now), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:42:32.167

您得到了相同的时间，因为您已将 Date 变量声明为全局变量并在全局范围内对其进行了初始化。你应该改变你的实现`actionPerformed`如下：

```
public void actionPerformed(ActionEvent e) {
    Date now = new Date(); //Create a new instance of date
    if ("GET TIME".equalsIgnoreCase(e.getActionCommand())) {
        JOptionPane.showMessageDialog(null,
                "Time " + dateFormatter.format(now), "Time.",
                JOptionPane.INFORMATION_MESSAGE);
    }           
} 
```

# javascript - Javascript/JQuery – 几个问题，应该很简单

> ID：12771126
> 
> 赞同：2
> 
> 时间：2012-10-07T17:29:47.207
> 
> 标签：javascript, jquery, html

尝试为我正在放置的登录页面做一些 jquery。我在 JS 上绝对是可怕的，所以请耐心等待。

这是我正在开发它的页面：

[http://kickstartyourbiz.info/](http://kickstartyourbiz.info/)

对于占位符图片下的旋转数字，我使用以下代码：

```
<script>

setInterval(function() {
  var min = 1000;
  var max = 100000;
  var number = 1 + Math.floor(Math.random() * (max - min + 1)) + min;
  $('#random_number').fadeIn(500).text(number).delay(4000).fadeOut(450);
  var newnumber = Math.round(number / .6);
  $('#wtf').fadeIn(500).text(newnumber).delay(4000).fadeOut(450);
},
5000);

</script>

<div id="random_number"></div>

<div id="wtf"></div> 
```

这个问题很少：

1）数字直到五秒钟才加载，我假设这是由于间隔。但是，如何在页面加载后立即开始显示/旋转数字？

2）当数字淡出时，较低的“标志”部分被提起，然后再下降。我猜这是因为`<div>`当淡出发生时消失，然后在再次淡入时又回来了。我能做些什么来防止这种情况发生？

最后，我还想在数字的开头添加一个美元符号，如果足够简单，可以在每三个数字中添加逗号。所以它看起来像这样：

93,029 美元 – 163,029 美元

感谢您的帮助，非常感谢！

**编辑：**

好吧，我想我可能知道问题是什么，在某种程度上......

所以当我有这个功能时：

```
function() {
  var min = 1000;
  var max = 100000;
  var firstnumber = 1 + Math.floor(Math.random() * (max - min + 1)) + min;
  $('#random_number').text(firstnumber);
  var newnumber = Math.floor(firstnumber / .6);
  $('#wtf').text(newnumber);
} 
```

然后尝试用 调用它，页面上没有任何显示。但是当我使用这段代码时：

```
setInterval( function() {
  var min = 1000;
  var max = 100000;
  var firstnumber = 1 + Math.floor(Math.random() * (max - min + 1)) + min;
  $('#random_number').text(firstnumber);
  var newnumber = Math.floor(firstnumber / .6);
  $('#wtf').text(newnumber);
},
5000); 
```

它确实显示在页面上，但仅在 5 秒后。

所以我想知道为什么没有setInterval它不会出现在页面上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:33:56.070

1.  **数字直到五秒才加载**

    原因是，您`function() {var min ... (450);}`只在`5000`几毫秒后执行。

    代替：

    ```
    setInterval(function() {
        var min = 1000;
        var max = 100000;
        var number = 1 + Math.floor(Math.random() * (max - min + 1)) + min;
        $('#random_number').fadeIn(500).text(number).delay(4000).fadeOut(450);
        var newnumber = Math.round(number / .6);
        $('#wtf').fadeIn(500).text(newnumber).delay(4000).fadeOut(450);
    },
    5000); 
    ```

    和：

    ```
    $(document).ready(function () {
      var min = 1000;
      var max = 100000;
      var number = 1 + Math.floor(Math.random() * (max - min + 1)) + min;
      $('#random_number').fadeIn(500).text(number).delay(4000).fadeOut(450);
      var newnumber = Math.round(number / .6);
      $('#wtf').fadeIn(500).text(newnumber).delay(4000).fadeOut(450);

      setInterval(function() {
        var min = 1000;
        var max = 100000;
        var number = 1 + Math.floor(Math.random() * (max - min + 1)) + min;
        $('#random_number').fadeIn(500).text(number).delay(4000).fadeOut(450);
        var newnumber = Math.round(number / .6);
        $('#wtf').fadeIn(500).text(newnumber).delay(4000).fadeOut(450);
      },
      5000);
    } 
    ```

2.  **我能做些什么来防止这种情况发生？**

    考虑使用`opacity`而不是，`fadeOut`因为它会从 DOM 中删除内容，这会给你带来跳转。

3.  **我还想在数字的开头添加一个美元符号**

    考虑使用[jQuery Number Format](http://www.teamdf.com/web/jquery-number-format/178/)，一个 jQuery 插件，它做的事情和你期望的一样。

# ruby-on-rails-3.1 - 通过 request.ip 添加 ip 地址到设计的忘记密码邮件视图

> ID：12771141
> 
> 赞同：3
> 
> 时间：2012-10-07T17:31:32.090
> 
> 标签：ruby-on-rails-3.1, devise, ip-address

我想添加一个 IP 地址来设计忘记密码的电子邮件，使用`request.remote_ip`. 由于用户尚未登录，我无法使用设计的 ip 属性。

我在哪里检查`request.ip`？我无法访问设计的控制器并将代码放在那里，也无法将其放入视图中

最好怎么做？我必须为一个小的 request.ip 调用重写所有设计操作吗？

# javascript - 显示单个标记时，Gmaps4rails 缩放太近

> ID：12771142
> 
> 赞同：0
> 
> 时间：2012-10-07T17:31:32.673
> 
> 标签：javascript, ruby, ruby-on-rails-3, google-maps-api-3, gmaps4rails

> **可能重复：**
> [gmaps4rails 单标记自动缩放](https://stackoverflow.com/questions/12658748/gmaps4rails-single-marker-auto-zoom)

我将 gmaps4rails 与 Google Maps API v3 一起使用，并且经常显示一个标记。然后 gmaps4rails 放大，以便所有标记（此处为 1）在地图上可见。但是，它采用了谷歌地图中最接近的缩放级别，我还没有找到一种方法来仅更改此单个标记的缩放级别。

我正在这样显示我的地图：

```
gmaps(markers: {data: @events, options: {raw: '{animation: 
google.maps.Animation.DROP}'}}, map_options: {auto_adjust: 
true, center_on_user: true, auto_zoom: true, zoom: 14}) 
```

标记替换为`Gmaps.map.replaceMarkers(...);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:58:23.343

设置自定义缩放或 auto_zoom 的问题应该是错误的。

我使用此设置来获得我的自定义缩放：

> gmaps(:map_options => {"auto_zoom" => false, "zoom" => 17}, :markers => { "data" => @json })

希望这可以帮助。

# windows-phone-7 - WaveMediaStreamSource 在 Windows Phone 7 上不起作用

> ID：12771147
> 
> 赞同：0
> 
> 时间：2012-10-07T17:31:53.607
> 
> 标签：windows-phone-7, wavmss

`WaveMediaStreamSource`我从这个[站点](http://archive.msdn.microsoft.com/wavmss)下载了 Silverlight 。

但我在使用此控件在 Windows phone 7 上播放 .wav 文件时遇到`wavemediastreamsource`问题`MediaElement`。

我需要解决此问题的人的帮助，请分享他们的代码或帮助告诉我他们为使其工作所做的更改。

我能够成功解析 .wav 文件并提取所有标题信息。

我被卡住了，如果您自己解决了这个问题或知道如何解决，任何指针和示例代码都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:07:35.310

我不太明白你的问题，但你可以看看[帖子](http://blogs.msdn.com/b/gillesk/archive/2009/03/23/playing-back-wave-files-in-silverlight.aspx)。
它有关于如何使用`WaveMediaStreamSource`库的很好的小例子。

# javascript - jquerymobile 通用照片弹出

> ID：12771148
> 
> 赞同：0
> 
> 时间：2012-10-07T17:32:04.053
> 
> 标签：javascript, jquery-mobile, photo-gallery

我是 javascript 的新手，想调整以下 jquerymobile 代码以允许使用它，而无需在 data-role="popup" div 中硬编码图像路径。

这是代码的两个部分。第一部分用于显示缩略图，当触摸该缩略图时，会显示具有更高分辨率图片的灯箱：

```
<a href="#popupPhoto" data-rel="popup" data-position-to="window" data-inline="true" data-transition="fade" ><img  class="v100col" alt="equinox" src="images/equinox.jpg"></a> 
```

触摸图片执行以下操作以显示弹出窗口：

```
</div>
<div data-role="popup" id="popupPhoto" data-overlay-theme="a" data-theme="a" data-corners="false">
<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a><img class="popphoto" rc="images/equinox_big.jpg" alt="Equinox">
</div> 
```

我想用一个变量替换 src="images/equinox_big.jpg" 以便可以对我的移动页面上的所有图像执行相同的 div 例程。

在显示图像之前，执行以下 on-event 函数

```
$( ".photopopup" ).on({
popupbeforeposition: function() {
var maxHeight = $( window ).height() - 60 + "px";
$( ".photopopup img" ).css( "max-height", maxHeight );
}
}); 
```

这可以通过修改popupbeforeposition js函数或其他方法来完成吗？

谢谢艾略特``

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:24:17.600

正因为我是更多的服务器端开发人员，所以我会使用 mysql 进行数据库查询并使用 php.ini 检索图像名称。

就像是：

```
<?php 
$query = "SELECT * FROM mytable";
$result = mysql_query($query) or die (mysql_error());
while ($row = mysql_fetch_assoc($result)) {
    $img = $row['img_name'];
    echo '<img src="'.$img.'"/>';
}
?> 
```

如果您想管理大量图像并将它们很好地组织在数据库中，我认为这可能是最好的解决方案。

# iphone - 过滤无法在 iphone 设备上播放的 YouTube 视频（yt:accessControl 嵌入和联合）字段

> ID：12771149
> 
> 赞同：1
> 
> 时间：2012-10-07T17:32:22.887
> 
> 标签：iphone, ios, youtube-api

我正在使用这个 api 来获取 youtube 视频

我打的 API 是：

[http://gdata.youtube.com/feeds/api/charts/movies/trending?v=2&paid-content=false&hl=en&alt=json&format=5](http://gdata.youtube.com/feeds/api/charts/movies/trending?v=2&paid-content=false&hl=en&alt=json&format=5)

您能否提出一些建议，以便我可以在此 api 中发送一些参数，这些参数可以根据 yt:accsessControl 嵌入和联合字段过滤结果...那么如何在 api 中嵌入此字段以过滤结果

我试过这个： [http](http://gdata.youtube.com/feeds/api/charts/movies/trending?v=2&paid-content=false&hl=en&alt=json&format=5&embed=) ://gdata.youtube.com/feeds/api/charts/movies/trending ?v=2&paid-content=false&hl=en&alt=json&format=5&embed='allowed'&syndicate='allowed'

这不会过滤视频结果..所以请建议我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:07:07.083

`format=5`有效地充当代理，仅返回可嵌入的视频。

同样，您可以使用`format=1`（这是公共 RTSP 流之一）仅返回启用了联合的视频，因为只有这些视频才有该格式可用。

但是，您不能将两者结合起来只取回同时设置的视频。如果你说`format=1,5`你会取回任何一组的视频。

# c - C中的错误代码

> ID：12771151
> 
> 赞同：-3
> 
> 时间：2012-10-07T17:32:45.787
> 
> 标签：c, gcc, unistd.h

我在下面的代码中有错误

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main()
{
        int i, status;
        pid_t child;
        child=fork();
        if(child == 0){
        for(i=0; i<10; i++){
            printf("\tChild PID = %d\n", getpid());
            printf("\tChild PPID = %d\n", getppid());
            sleep(1);
        }
        exit(0);
        }
        else{
        for(i=0; i<10; i++){
            printf("Parent PID = %d\n", getpid());
            printf("Parent PPID = %d\n", getppid());
        }
        }
        waitpid(child, &status, 0);
        return 0;
} 
```

我在 GCC(Unix) 中编码，并得到以下错误：

> test.c:27:1: 错误：预期标识符 '(' 在 '}' 标记之前

有人可以建议我任何帮助吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:42:17.217

状态的手册页`waitpid()`：

```
#include <sys/types.h>
#include <sys/wait.h> 
```

无论如何，错误可能是由于`pid_t`在`sys/types.h`.

使用`-Wall`打开所有编译器警告将指向一个`waitpid()`.

**更新**：这假设 Linux。

# java - 带有上下文菜单的文件列表

> ID：12771152
> 
> 赞同：2
> 
> 时间：2012-10-07T17:32:47.520
> 
> 标签：java, swing

![应用示例](../Images/28b3906242a10b8c5d6ba97fad56c2ab.png)

嗨，我是 Swing 的新手。我想知道将与行上的文件名相关的按钮集关联起来的正确方法。我正在使用控制视图模式。这是当我想在 JPanel 上添加文件时控件调用的代码：

```
public void addFileToTheList(File selectedFile) {

        /*file name */
        fileName = new JLabel(selectedFile.getName());  

        /* menu buttons */
        editButton = new JButton("edit ");
        resultsButton = new JButton("results");
        takeTestButton = new JButton("take");
        deleteButton = new JButton("delete");

        testsListDiv.add(fileName);
        testsListDiv.add(editButton);
        testsListDiv.add(resultsButton);
        testsListDiv.add(takeTestButton);
        testsListDiv.add(deleteButton);

        /* update the scroll list*/
        scrollList.revalidate();
        scrollList.repaint();
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:37:51.593

遵循每个人的建议（无论如何我都会建议），这里有一个小演示片段来说明这个案例。在左侧，我添加了一个 JFileChooser，以便您可以浏览磁盘以查看代表性案例，但您关心的是右侧的 JTable。

它需要一个额外的类：[ButtonColumn](http://tips4java.wordpress.com/2009/07/12/table-button-column/)，但您可以使用它来注释行，只是没有按钮。

结果如下： ![生成的 JFrame 示例](../Images/afa5aa9ab1c61ad64dc3569d16df4158.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.io.File;
import java.util.Arrays;

import javax.swing.AbstractAction;
import javax.swing.Icon;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.filechooser.FileSystemView;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableColumnModel;
import javax.swing.table.TableModel;

public class TestFileTable {

    public class DirectoryModel extends AbstractTableModel {

        private File directory;

        private File[] files;

        public DirectoryModel(File directory) {
            super();
            setDiretory(directory);
        }

        @Override
        public String getColumnName(int column) {
            switch (column) {
            case 0:
                return "";
            case 1:
                return "File name";
            case 2:
                return "";
            default:
                break;
            }
            return "";
        }

        @Override
        public int getRowCount() {
            return files.length;
        }

        @Override
        public int getColumnCount() {
            return 6;
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return columnIndex > 1;// button columns
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            switch (columnIndex) {
            case 0:
                return FileSystemView.getFileSystemView().getSystemIcon(files[rowIndex]);
            case 1:
                return files[rowIndex].getName();
            case 2:
                return "Edit";
            case 3:
                return "Results";
            case 4:
                return "Take";
            case 5:
                return "Delete";
            }
            return null;
        }

        public TableModel setDiretory(File currentDirectory) {
            this.directory = currentDirectory;
            files = directory.listFiles();
            if (files == null) {
                files = new File[0];
            }
            Arrays.sort(files);
            fireTableDataChanged();
            return this;
        }

    }

    protected void initUI() {
        JFrame frame = new JFrame(TestFileTable.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JTable table = new JTable();
        final JFileChooser fileChooser = new JFileChooser();
        final DirectoryModel model = new DirectoryModel(fileChooser.getCurrentDirectory());
        fileChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        fileChooser.addPropertyChangeListener(JFileChooser.DIRECTORY_CHANGED_PROPERTY, new PropertyChangeListener() {

            @Override
            public void propertyChange(PropertyChangeEvent evt) {
                table.setModel(model.setDiretory(fileChooser.getCurrentDirectory()));
            }
        });
        fileChooser.setCurrentDirectory(new File(System.getProperty("user.home")));
        table.setShowGrid(false);
        table.setIntercellSpacing(new Dimension(10, 10));
        table.setRowHeight(30);
        TableColumnModel columnModel = table.getColumnModel();
        columnModel.getColumn(0).setCellRenderer(new DefaultTableCellRenderer() {
            @Override
            protected void setValue(Object value) {
                if (value instanceof Icon) {
                    setText(null);
                    setIcon((Icon) value);
                } else {
                    super.setValue(value);
                }
            }
        });
        columnModel.getColumn(0).setPreferredWidth(36);
        columnModel.getColumn(0).setMaxWidth(36);
        table.setTableHeader(null);

        // If you don't have the class ButtonCOlumn, comment the next lines, it still works
        // You can get it at http://tips4java.wordpress.com/2009/07/12/table-button-column/
        new ButtonColumn(table, new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(table, "You have chosen to edit " + table.getModel().getValueAt(table.getSelectedRow(), 1));
            }
        }, 2);
        new ButtonColumn(table, new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(table,
                        "You have chosen to show results for " + table.getModel().getValueAt(table.getSelectedRow(), 1));
            }
        }, 3);
        new ButtonColumn(table, new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(table, "You have chosen to take " + table.getModel().getValueAt(table.getSelectedRow(), 1));
            }
        }, 4);
        new ButtonColumn(table, new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(table, "You have chosen to delete " + table.getModel().getValueAt(table.getSelectedRow(), 1));
            }
        }, 5);

        frame.add(fileChooser, BorderLayout.WEST);
        frame.add(new JScrollPane(table));
        frame.setSize(1200, 600);
        frame.setVisible(true);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestFileTable().initUI();
            }
        });
    }
} 
```

# macos - 可可：自定义 TableView 单元格？

> ID：12771156
> 
> 赞同：0
> 
> 时间：2012-10-07T17:33:33.293
> 
> 标签：macos, cocoa, nstableview, nstablecellview

我对表格不是很熟悉，因为我通常制作游戏，但现在我想创建一个关卡构建器，我需要一个带有自定义单元格的表格视图。我创建了一个 nib 文件，并且将 NSTableCellView 子类化，但我不知道下一步该做什么。我只有：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification{
    NSScrollView * tableContainer = [[NSScrollView alloc] initWithFrame:NSMakeRect(self.window.frame.size.width-TABLEWIDTH, 0, TABLEWIDTH, self.window.frame.size.height)];
    SpriteTable *sT = [[SpriteTable alloc]initWithFrame:NSMakeRect(self.window.frame.size.width-TABLEWIDTH, 0, TABLEWIDTH, self.window.frame.size.height)];
    NSTableView *tableView = [[NSTableView alloc] initWithFrame: sT.bounds];

    NSTableColumn*  firstColumn = [[[NSTableColumn alloc] initWithIdentifier:@"firstColumn"] autorelease];
    [[firstColumn headerCell] setStringValue:@"First Column"];
    [tableView  addTableColumn:firstColumn];

    tableView.dataSource = self;
    tableView.delegate = self;
    [tableContainer setDocumentView:tableView];
    tableContainer.autoresizingMask = NSViewHeightSizable | NSViewMinXMargin;
    [self.window.contentView addSubview: tableContainer];

}

- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView{

    return 4;
}

- (NSView *)tableView:(NSTableView *)tableView
   viewForTableColumn:(NSTableColumn *)tableColumn
                  row:(NSInteger)row {

    // get an existing cell with the MyView identifier if it exists
    CustomCell *result = [tableView makeViewWithIdentifier:@"MyView" owner:self];

    // There is no existing cell to reuse so we will create a new one
    if (result == nil) {
        NSLog(@"result = nil");

        // create the new NSTextField with a frame of the {0,0} with the width of the table
        // note that the height of the frame is not really relevant, the row-height will modify the height
        // the new text field is then returned as an autoreleased object
        //result = [[[NSTextField alloc] initWithFrame:NSMakeRect(0, 0, 250, 70)] autorelease];

        // the identifier of the NSTextField instance is set to MyView. This
        // allows it to be re-used
        result.identifier = @"MyView";
    }

    // result is now guaranteed to be valid, either as a re-used cell
    // or as a new cell, so set the stringValue of the cell to the
    // nameArray value at row

    result.imageView.image = [NSImage imageNamed:NSImageNameHomeTemplate];

    // return the result.
    return result;

} 
```

如果有的话，我必须实现哪些委托方法？以及如何使用 nib 文件自定义我的单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:01:16.297

在您的子视图中执行此操作->

```
@implementation suhasView 
@synthesize name,containerView;// container view contains ur subview
- (NSView*) myView 
{
  NSBundle *bundle = [NSBundle bundleForClass:[self class]];
  NSNib *theNib = [[NSNib alloc] initWithNibNamed:@"suhas"bundle:bundle];
 [theNib instantiateNibWithOwner:self topLevelObjects:nil];
 return containerView;
} 
```

在控制器中->

```
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn   *)tableColumn row:(NSInteger)row 
{ 
suhas *a=[[suhas alloc]initWithFrame:NSMakeRect(0,0, 40, 40)];
NSView * v = [a myView]; 
[a.name setStringValue:@"suhas"];
return v;
}...//sorry for my naming of the class:) 
```

# php - 在php中单击文本时如何将MYSQL变量值设置为1？

> ID：12771166
> 
> 赞同：0
> 
> 时间：2012-10-07T17:34:43.887
> 
> 标签：php, mysql, private, messages

首先，我对 php 知之甚少，并且仍在学习，所以请用你的答案对我轻松一点。基本上我正在开发一个功能类似于社交网站的项目，用户能够发送和接收私人消息等。我已经让这一切都很好，当你设置变量时，消息甚至会进入 messages_deleted.php 页面数据库中从“0”到“1”的值。

有没有办法让用户自己这样做，通过单击一段文本来删除他们自己的消息？

我正在使用 php，所以如果有人有任何想法，我需要一段 php 代码来让我这样做？

这是我正在使用的当前 php 脚本：

```
<?php

    $page_title = "Messages";
        include('includes/header.php'); 

        confirm_logged_in();

        include ('includes/mod_login/login_form.php');  
    ?>

<div class="modtitle">
  <div class="modtitle-text">Inbox</div>
</div>

<div class="modcontent">

<strong>Inbox</strong> | <a href="messages_sent.php">Sent Messages</a> | <a href="messages_deleted.php">Deleted</a>
<br /><br />
<table width="100%" border="0" cellpadding="5" cellspacing="0">
  <tr bgcolor="#CCCCCC">
    <td width="30%"><strong>Recieved</strong></td>
    <td width="20%"><strong>From</strong></td>
    <td width="28%"><strong>Subject</strong></td>
    <td width="0%"><strong>Read/Unread</strong></td>
      <td width="0%"><strong>Delete</strong></td>
  </tr>
<?php
        $inbox_set = get_inbox();
        while ($inbox = mysql_fetch_array($inbox_set)) {

?>

<?php
 if ($inbox['read'] == 0) { ?>
  <tr bgcolor="#6666B3">
<?php }
 if ($inbox['read'] == 1) { ?>
    <tr>

<?php }  ?>

    <td><?php 

    $datesent1 = $inbox['date_sent'];

    echo "$datesent1"; ?></td>

    <a href="profile.php?id={$inbox['from_user_id']}"><td><?php echo "<a href=\"profile.php?id={$inbox['from_user_id']}\">{$inbox['display_name']}"; ?></td></a>

    <td><?php echo "<strong><a href=\"read_message.php?msg={$inbox[0]}\">{$inbox['subject']}</a></strong>"; ?></td>

    <td><?php   if ($inbox['read'] == 0)  {
                echo "Unread"; 
                }
                if ($inbox['read'] == 1)  {
                echo "Read";
                }
                ?></td>
                <td>
                <?php 
                if ($inbox['delete'] == 0)  {
                echo "Delete";

                }
                 if ($inbox['delete'] == 1)  {
                echo "$deleted_set;";
                }   

                    ; ?></td>

                </td>

<?php
}

?>

</tr>
</table>

</div>

<?php include('includes/footer.php'); ?> 
```

* * *

我真正需要的是一种使“删除”行可点击的方法，这样当用户点击它时，它会将值设置为“1”。如果可以那样做，我想对我来说会容易得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:38:45.600

是的。这很简单。您可以查看一些在页面上运行的基本 jQuery 和 AJAX。这是API[文档的链接。](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:39:58.530

### 假设

如果您可以将 jQuery 包含到您的项目中，那么您可以使用 PHP + AJAX 来处理它。说，你有一个 PHP 文件，它使消息被删除为`messages_deleted.php`. 并且要删除一条消息，我假设您需要将一个参数传递`id`给脚本，最终以这种方式出现：`messages_deleted.php?id=5`.

还假设您的**PHP 文件**中的代码是：

```
<?php
    mysql_connect();
    if (mysql_query("UPDATE `messages` SET `deleted` = 1 WHERE `id` = " . mysql_real_escape_string($_GET["id"])))
        die ("deleted");
    else
        die ("error");
?> 
```

### 代码

您可以使用 jQuery[`$.getScript()`](http://api.jquery.com/jQuery.getScript/)为您完成这项工作。

如果消息有效并被删除，您的 PHP 脚本应该`die("deleted");`. 相应调整。

```
$(document).ready(function(){
    $("table tr").click(function(){
        $.getScript("messages_deleted.php", function(data){
            if (data == "deleted")
                alert("Message Deleted");
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T17:42:50.523

如果你不想使用 Ajax，你应该创建一个链接，将用户重定向到一个页面，例如`delete_message.php?mid=16`mid 是用户想要删除的消息 id，

然后在服务器端首先检查该消息是否属于要删除它的用户，因此用户无法删除其他人的消息，

然后运行一个 mysql 代码，它应该看起来像这样：`UPDATE`messages `SET`deleted `= '1' WHERE`id`= '16'`

希望对您有所帮助，如果您还有其他问题，请告诉我。

# django - Heroku上的Django settings.py + dj_database_url？

> ID：12771167
> 
> 赞同：4
> 
> 时间：2012-10-07T17:34:51.623
> 
> 标签：django, heroku

我正在关注 Heroku 上的 Django 入门 - 它显示设置 dj_database_url ...

```
DATABASES = {'default': dj_database_url.config(default='postgres://localhost')} 
```

我应该完全按照上面的方式离开吗？这就是我所做的 - 我的网站似乎工作得很好......

或者

我是否应该用 DATABASE_URL 换掉上面的一些东西——它是从 heroku 配置设置中提取的？

没有在任何地方使用 DATABASE_URL - 它似乎正在使用上述设置并且没有更改的 heroku.... 但是当我使用 pg:info 查看数据库时 - 我得到 0 个连接......这让我觉得没有与 postgresql 的连接——但它是如何工作的？

我还不太明白 dj_database_url 是如何在 Heroku 上工作的……有人能对此有所了解吗？

```
heroku pg:info
=== HEROKU_POSTGRESQL_GOLD_URL (DATABASE_URL)
Plan:        Dev
Status:      available
Connections: 0
PG Version:  9.1.6
Created:     2012-10-07 16:11 UTC
Data Size:   6.6 MB
Tables:      12
Rows:        27/10000 (In compliance)
Fork/Follow: Unavailable 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T05:46:04.130

它是正确的。

在 Heroku 上运行时，有一个环境变量`DATABASE_URL`集`postgres://`（

在本地运行时，`DATABASE_URL`未设置，因此`default = '...'`使用您的数据库 URL（允许您在本地运行代码进行开发，并部署到 Heroku，无需更改任何代码）。

这是基于[“12factor 方法”](http://www.12factor.net/)（整个文档几乎描述了 Heroku 的结构）

只是从 URL中`dj_database_url.config`解析用户名/密码/主机/数据库名称，并将其拆分为[Django 期望的字典格式](https://docs.djangoproject.com/en/dev/ref/settings/#databases)-如果您好奇，[代码](https://github.com/kennethreitz/dj-database-url/blob/master/dj_database_url.py)相当简单

# html - HTML5 离线 JSON 不起作用

> ID：12771168
> 
> 赞同：2
> 
> 时间：2012-10-07T17:34:52.357
> 
> 标签：html, jquery-mobile, offline

我有一个小型 HTML5（使用 jQuery 移动）网络应用程序，它缓存其文件以离线使用它们，但是一旦离线，某些部分似乎无法工作。

文件缓存正常（我可以在 Web 检查器中看到它们），但是当我尝试访问使用 jQuery 加载 JSON 文件的页面时，它不会加载。

我尝试创建一个空函数来加载 JSON 文件（加载索引页面时），看看这是否有帮助，但似乎没有什么不同。

这是不想离线工作的功能。

我的问题是：它应该离线工作还是我错过了什么？

```
// events page listing start
 function listEvents(data){
 $.getJSON('/files/events.json', {type: "json"},function (data) {
        var output = '';
             for (i in data)
                {
                var headline = data[i].headline;
                var excerpt =  data[i].rawtext;
                output += '<div id="eventsList">';
                output += '<h3>'+headline+'</h3>';  
                output += '<p>'+ excerpt +'<p>';  
                output += '</div>';  
                }
            $("#eventsPageList").html(output).trigger("create");
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:53:35.207

我不确定，如果我是对的。但我认为当您离线时，ajax 请求总是会失败。它不会使用本地缓存的文件。您应该尝试的是，将数据缓存在 localStorage 中。当 ajax 请求失败时，回退到 localStorage。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:04:36.330

好的，这是一个似乎可以工作的版本，我读取了 json 文件并将其放在 localstorage 中，然后在 listEvents 函数中使用 localstorage。

当页面加载时，我调用此函数将 json 添加到 localstorage

```
function  cacheJson(data){
        $.getJSON('/files/events.json',
              {type: "json", cache: true},function (data) {
             localStorage['events'] = JSON.stringify(data);   });
    } 
```

然后这个函数将json（从localstorage）输出到页面，如果localstorage不包含json，则使用if else。

```
function listEvents(data){

    if (localStorage.getItem("events") === null) { 
        var output = '';
        output += 'Sorry we have an error';  
        $("#eventsPageList").html(output).trigger("create");
     }
     else {
    data = JSON.parse(localStorage['events']);
      var output = '';
         for (i in data)
            {
            var headline = data[i].headline;
            var excerpt =  data[i].rawtext;
            output += '<div id="eventsList">';
            output += '<h3>'+headline+'</h3>';  
            output += '<p>'+ excerpt +'<p>';  
            output += '</div>';  
            }
        $("#eventsPageList").html(output).trigger("create");
   }
} 
```

它似乎工作正常，但我错过了可能导致问题的东西吗？

有没有更有效的方法来做到这一点？

# visual-studio - 如何在TFS中获取已经检查过一定次数的文件

> ID：12771169
> 
> 赞同：2
> 
> 时间：2012-10-07T17:35:01.963
> 
> 标签：visual-studio, tfs

有没有办法在 TFS 中获取所有已签入/更新 X 次的文件？我目前有一个 ASP.NET MVC 项目，并且正在使用 VS 2012 的 TFS 预览。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:20:00.413

虽然速度很慢，但最好的方法是在您已签入版本控制的每个文件上运行 QueryHistory。如果您计算返回的变更集的数量，这将告诉您该文件已更新的次数。

基本上你想做这样的事情：

```
TfsTeamProjectCollection tpc = new TfsTeamProjectCollection("http://server:8080/tfs/collection";
VersionControlServer vcs = tpc.GetService<VersionControlServer>();

foreach (string filePath in filePaths)
{
     var changesets = vcs.QueryHistory(filePath, ...);

     // Do your counting logic here
} 
```

同样，这不会运行得非常快，但它是回答您试图回答的问题的最佳方式。如果 X 大于 1 或 2，那么我们可以提出一个更好的算法，在根上调用 QueryHistory 并在深度上向下工作，以希望修剪掉树的某些部分。

# ios - UIApplication 的 -canOpenURL: -openURL: 返回误导性结果

> ID：12771177
> 
> 赞同：16
> 
> 时间：2012-10-07T17:36:22.340
> 
> 标签：ios, ios6, uiapplication

从 iOS6 开始，我无法判断应用程序是否可以启动 Safari。

如果设备上的 Safari 受到限制（设置>常规>限制），则在尝试打开 URL 时不会发生任何事情，并且没有迹象表明出了什么问题：

```
NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
[[UIApplication sharedApplication] canOpenURL:url]; // Returns YES
[[UIApplication sharedApplication] openURL:url]; // Returns YES 
```

但是，Safari**没有**启动，用户想知道为什么我的按钮“坏了”。

这对我来说似乎是一个错误，所以我提交了一个雷达#12449905。

有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:21:40.913

如果这是一个 Apple 错误，那么看起来你要做的就是围绕它进行编程。用户单击按钮后，您始终可以编写如下内容：

```
[self performSelector:@selector(notifyUserOfRestrictedAccess) withObject:self afterDelay:.5]; 
```

在应用程序委托中，您可以设置一个属性，例如：

```
- (void)applicationWillResignActive:(UIApplication *)application {
    self.openingExternalProgram = YES;
} 
```

在您的视图控制器中，创建如下方法：

```
-(void) notifyUserOfRestrictedAccess {

    if (!appDelegate.openingExternalProgram) {
        // Message the user via UIAlertView about restricted Safari access
    }
    appDelegate.openingExternalProgram = NO;
} 
```

I'm sure there are better ways, but at least you don't have to wait on Apple.

# java - 零填充到给定宽度

> ID：12771179
> 
> 赞同：-1
> 
> 时间：2012-10-07T17:36:26.580
> 
> 标签：java, formatting

如何使用此标头编写方法

```
public static String format (int number, int width) 
```

这将返回带有一个或多个前缀 0 的数字的字符串。字符串的大小是宽度？例如，如果使用使用`format(43, 4)`输出是`0043`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:39:24.730

尝试这个：

```
public static String format(int number, int width) {
    return String.format("%0" + width + "d", number);
} 
```

# java - 使用java从SQL表中获取主键值

> ID：12771180
> 
> 赞同：0
> 
> 时间：2012-10-07T17:36:47.067
> 
> 标签：java, sql, sql-server-2008, jdbc

我正在使用 java 将用户插入到 sql 数据库表中。插入效果很好。但是，用户 id 是主键并且会自动递增。将新用户插入表后，我想获取用户 ID 的值。

这是插入部分：

```
PreparedStatement create_statement;
StringBuilder sb = new StringBuilder();
sb.append("INSERT INTO ");
sb.append(this.get_database());
sb.append(".dbo.");
sb.append(this.get_table());
sb.append(" ( username, password, email_addr, first_name, middle_name, last_name, dob, street_addr, phone_num, bio)   ");
sb.append(" VALUES( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? );");

try {
    create_statement = this.sql_connection.prepareStatement(sb.toString());
    create_statement.setString(1, this.username);
    create_statement.setString(2, this.password);
    create_statement.setString(3, this.email_addr);
    create_statement.setString(4, this.first_name);
    create_statement.setString(5, this.middle_name);
    create_statement.setString(6, this.last_name);
    create_statement.setString(7, this.dob);
    create_statement.setString(8, this.street_addr);
    create_statement.setString(9, this.phone_num);
    create_statement.setString(10, this.bio);
    create_statement.executeUpdate(); 
```

我正在寻找一个小时的答案，有些是通过使用**ResultSet**来完成的。但是，尝试从**create_statement获取数据时，我不断收到错误或 null**

帮助 ：（

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:50:02.930

在此处比较 executeQuery 和 executeUpdate：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html)

您不会从 executeUpdate 获得 ResultSet，因为它返回一个 int。你也不能在这里使用 executeQuery，因为你是在插入，而不是在选择任何东西。改用这个

```
create_statement = this.sql_connection.prepareStatement(sb.toString(),
                   Statement.RETURN_GENERATED_KEYS);
//your code
ResultSet res = create_statement.getGeneratedKeys(); 
```

而且即使在学习时，变量也应该适当命名，这不是`create`陈述，是吗？

# android - 从布局中获取可绘制不起作用

> ID：12771184
> 
> 赞同：0
> 
> 时间：2012-10-07T17:37:11.683
> 
> 标签：android, google-maps, drawable

我很难在地图上显示特定项目。当用户单击一个点时，我想在顶部放置一个带有计数器的对象。我正在考虑使用文本视图并将其转换为可绘制对象，使用[此方法](https://stackoverflow.com/a/5951258/1369566)但它不起作用。我尝试的看起来像这样：
**xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout ... >
    <TextView
        android:id="@+id/object"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableBottom="@drawable/car"
        android:text="Human 1,2..." /> <!-- Here should be the counter modified programatically -->
</LinearLayout> 
```

**代码：**

```
 public boolean onTouchEvent(MotionEvent e, MapView m) {
    ....
        CustomPinPoint custom = new CustomPinPoint(getHuman(), Main.this);
    }
    private Drawable getHuman() {
            Bitmap snapshot = null;
            Drawable drawable = null;
            LayoutInflater li = Main.this.getLayoutInflater();
            View view = li.inflate(R.layout.human, null); //human is the layout
            view.setDrawingCacheEnabled(true);
            view.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_LOW);
            try {
                snapshot = Bitmap
                        .createBitmap(view.getDrawingCache());
                drawable = new BitmapDrawable(snapshot);
            } finally {
                view.setDrawingCacheEnabled(false);
            }
            return drawable;

        } 
```

目前，我在`Bitmap.createBitmap(view.getDrawingCache());`. 尝试了维度，仍然没有成功。有人可以告诉我我做错了什么吗？或者如果有另一种从文本视图中获取可绘制的方法？
在此先感谢，科斯敏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T20:37:09.103

你的问题不是很清楚...

如果您想始终将对象放置在同一个位置，并且希望独立于用户触摸地图的位置显示它，请将对象添加到您拥有地图视图的相同布局中，如我在此答案中显示的[Animated Menu Buttons在 MapView 之上，](https://stackoverflow.com/questions/12694176/animated-menu-buttons-on-top-of-mapview/12713582#12713582)然后使其可见/不可见，并根据需要更改计数器。

如果您想要其他内容，请在您的问题中添加更多信息。

祝你好运。

# java - 将文件保存在注册表中

> ID：12771185
> 
> 赞同：-4
> 
> 时间：2012-10-07T17:37:27.817
> 
> 标签：java, file, registry

我想创建并保存我创建的文件，这样任何人都无法访问它。我已经知道如何创建文件，所以我的问题是：如何将这个文件保存在**注册表**中，这样任何人都无法修改或删除它？

这是创建文件：

```
File f = new File("C:\\test.txt");
f.mkdirs();
f.createNewFile(); 
```

我在网上搜索，这是我在注册表中保存文件时发现的 [http://answers.yahoo.com/question/index?qid=20090310201348AAihqUQ](http://answers.yahoo.com/question/index?qid=20090310201348AAihqUQ)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T17:56:57.160

1.  人们仍然可以更改注册表中的内容
2.  注册表不可移植
3.  在注册表中存储文件是错误的

不要这样做。

# mysql - 如何将 Komodo 连接到我的 sql 服务器

> ID：12771186
> 
> 赞同：1
> 
> 时间：2012-10-07T17:37:40.327
> 
> 标签：mysql, virtualbox, ubuntu-12.04, komodo

我想知道是否有人帮助我，这是我的设置：

我在运行 ubuntu virtualbox 作为本地 Web 服务器和数据库服务器（mysql）的 Windows 7 机器上。

我刚刚获得了一份 Komodo 的副本，我正在我的 Windows 机器上运行它，我想将它连接到我的数据库。它需要的字段是主机名、端口、套接字、用户名和密码。

我知道用户名/密码，但不确定如何找出其他字段的内容。ubuntu vb 的 ip 为 192.168.0.10，在我的 hosts 文件中为[http://swishprint.dev](http://swishprint.dev)

我希望我在正确的地方问过这个问题，非常感谢任何帮助。

# javascript - 切换在 Firefox 中无法正常工作，在 IE 中工作

> ID：12771189
> 
> 赞同：0
> 
> 时间：2012-10-07T17:38:22.257
> 
> 标签：javascript, firefox

简单切换

```
$(document).ready(function(){
  $("#classes").click(function(){
    $("#class_breakdown").slideToggle("slow");
  });
});

<a href="javascript:void(null)" id="classes" onclick="click(); return false;">View All Classes &raquo;</a>

<div id="class_breakdown">All Stuff Here</div> 
```

IE 工作得很好，但是 Firefox 在单击时会展开 div，在完全展开后它会折叠并返回到 Display:None。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:44:37.487

您做了很多事情，您必须删除`click()`onclick 属性中的 ，因为您已经使用 jQuery 绑定到 click 事件：

```
$(document).ready(function(){
  $("#classes").click(function(e){
    $("#class_breakdown").slideToggle("slow");
    e.preventDefault();
  });
});

<a href="#" id="classes">View All Classes &raquo;</a> 
```

我添加了`e.preventDefault()`，而不是`return false`因为它的跨浏览器效果更好。

# ios - 带有 CocoaPods 的多个应用程序的项目/工作区结构

> ID：12771191
> 
> 赞同：25
> 
> 时间：2012-10-07T17:38:31.247
> 
> 标签：ios, xcode, cocoapods

我即将迁移我的应用程序以使用[CocoaPods](https://github.com/CocoaPods/CocoaPods)。我当前的目录结构如下图所示。我有一个包含 3 个项目 ( `ipad`, `ipod`, `common`) 的工作区。`ipad`和项目中有构建目标，`ipod`依赖于`common`项目。

```
MyGreatApp
|
+-- MyGreatApp.xcworkspace
|
+-- ipad
|    |
|    +-- ipad.xcodeproj
|    +-- (source code)
|
+-- ipod
|    |
|    +-- ipod.xcodeproj
|    +-- (source code)
|
+-- common
     |
     +-- common.xcodeproj
     +-- (source code) 
```

我的问题是，我应该如何将它迁移到 CocoaPods？看起来 CocoaPods 为`Podfile`您创建的每个工作区创建了一个新工作区。我想保留我的 3 项目工作区结构，因为它似乎将所有内容很好地结合在一起。我应该`Podfile`为每个带有目标的项目和`Specfile`公共项目创建一个吗？那么如何在 XCode 中进行设置呢？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-24T18:08:01.860

在本文发布时的最新版本中，您的 podfile 需要采用以下格式：

```
workspace 'Test'
xcodeproj 'iphone/iphone.xcodeproj'
xcodeproj 'iphone2/iphone2.xcodeproj'

target :iphone do
    platform :ios, '6.0'
    pod 'RestKit'
    xcodeproj 'iphone/iphone.xcodeproj'
end

target :iphone2 do
    platform :ios, '6.0'
    pod 'RestKit'
    xcodeproj 'iphone2/iphone2.xcodeproj'
end 
```

我验证这适用于现有工作区中的多个项目。

有关详细信息，请参阅此帖子：[https ://github.com/CocoaPods/CocoaPods/issues/738](https://github.com/CocoaPods/CocoaPods/issues/738)

# java - 带有地图的通用地图 在爪哇

> ID：12771196
> 
> 赞同：1
> 
> 时间：2012-10-07T17:39:15.243
> 
> 标签：java, generics, map

我有一个类，`TestMap`只有`main`用于测试的静态方法（包括一个）`Maps`。类中有一个方法，例如，接受一个map，key和value的类型分别用`KeyType`和表示`ValueType`，如下图；

```
public static <KeyType,ValueType> void printMap( String msg, Map<KeyType,ValueType> m )
{
    System.out.println( msg + ":" );
    Set<Map.Entry<KeyType,ValueType>> entries = m.entrySet( );

    for( Map.Entry<KeyType,ValueType> thisPair : entries )
    {
        System.out.print( thisPair.getKey( ) + ": " );
        System.out.println( thisPair.getValue( ) );
    }
} 
```

我的问题是，如果我想重写这个类以便它可以被实例化，而不是只包含静态方法，我如何在类中定义一个可以使用的映射`Map<KeyType, ValueType>`？

我试图定义如下地图，但它似乎不起作用。

```
private Map<KeyType, ValueType> internalMap; 
```

有任何想法吗？

根据第一条评论，我尝试添加到类定义中，然后按如下方式设置构造函数；

```
public class TestMap<KeyType, ValueType>
{
    private Map<KeyType, ValueType> internalMap;

    /*
     * Constructor which accepts a generic Map for testing
    */
    public <KeyType,ValueType> TestMap(Map<KeyType, ValueType> m)
    {
       this.internalMap = m;
    }       
} 
```

但是，构造函数中的赋值抛出一个错误，说它是类型不匹配，并且它不能从 java.util.Map 转换为 java.util.Map

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:41:55.723

你是这个意思吗：

```
class MyMap<KeyType, ValueType> {
    private Map<KeyType, ValueType> internalMap;
} 
```

**编辑**：您不需要构造函数上的类型参数：

```
class TestMap<KeyType, ValueType>
{
    private Map<KeyType, ValueType> internalMap;

    /*
     * Constructor which accepts a generic Map for testing
    */
    public TestMap(Map<KeyType, ValueType> m)
    {
       this.internalMap = m;
    }       
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:47:01.870

您可以`internalMap`按照您尝试过的方式声明，但由于`Map`是接口，您需要使用具体的类类型（例如 、 等）实例`HashMap`化`TreeMap`它

```
public class TestMap<KeyType, ValueType> {
    private Map<KeyType, ValueType> internalMap;

    public TestMap() {
        internalMap = new HashMap<KeyType, ValueType>();
    }

    public TestMap(Map<KeyType, ValueType> m) {
        internalMap = m;
    }

    public void printMap( String msg )
    {
        System.out.println( msg + ":" );
        Set<Map.Entry<KeyType,ValueType>> entries = internalMap.entrySet( );

        for( Map.Entry<KeyType,ValueType> thisPair : entries )
        {
            System.out.print( thisPair.getKey( ) + ": " );
            System.out.println( thisPair.getValue( ) );
        }
    }

    . . . // methods to add to internal map, etc.
} 
```

# php - 每 6 个结果 WordPress 包装 li 标签

> ID：12771199
> 
> 赞同：0
> 
> 时间：2012-10-07T17:39:37.250
> 
> 标签：php, wordpress, while-loop

在下面的 li 标签中得到了带有包装结果的堆栈是我的代码

```
PHP Code

<ul>
    <li>
<?php

$counter = 0;

 while (have_posts()) : the_post(); $counter++;
?>
    <div><?php the_title();</div>
<?php 
    if($counter%7 == 6){ echo '</li><li>'; } 

    endwhile;
?>
    </li>
</ul> 
```

我的前 6 个结果用 li 成功包装，但在第二个和第三个出现问题，它包装 7 个结果 li 而不是 6

**结果 HTML**

```
<ul>
    <li>
        <div>Result 1</div>
        <div>Result 2</div>
        <div>Result 3</div>
        <div>Result 4</div>
        <div>Result 5</div>
        <div>Result 6</div>
    </li>

    <li>
        <div>Result 7</div>
        <div>Result 8</div>
        <div>Result 9</div>
        <div>Result 10</div>
        <div>Result 11</div>
        <div>Result 12</div>
        <div>Result 13</div>
    </li>
    <li>
        <div>Result 14</div>
        <div>Result 15</div>
        <div>Result 16</div>
        <div>Result 17</div>
        <div>Result 18</div>
        <div>Result 19</div>
        <div>Result 20</div>
    </li>
    <li>
        <div>Result 21</div>
    </li>

</ul> 
```

我不知道我在那里的循环中哪里出错了，或者我错过了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:58:03.897

尝试这个：

```
if ($counter > 0 && $counter % 6 == 0) {
    echo '</li><li>';
} 
```

# php - 在显示最终结果之前在 foreach 中添加值

> ID：12771201
> 
> 赞同：-1
> 
> 时间：2012-10-07T17:39:47.923
> 
> 标签：php, codeigniter

我有一个购物车，它传递了每件商品的船值。

当我想显示总运费时，我尝试了下面的代码。

```
foreach ($cart as $item)
echo $ship = $this->cart->format_number($item['ship']); 
```

假设我的购物车中有三件商品。

*   项目 1 = 30 美元运费
*   项目 2 = 20 美元运费
*   项目 3 = 30 美元运费

在回显之前我需要`add`这些值`result`但是我的代码输出`30.0020.0030.00`

# 问题：

`add`在回显结果之前如何获取值？

--有用的信息--使用codeigniter购物车

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:46:10.387

只需在每次迭代中逐步添加，您现在只是在呼应...

```
$total = 0;

foreach ($cart as $item)
{
  $total += $this->cart->format_number($item['ship']);
}

echo $total; 
```

# java - Android：加载、操作和使用图像

> ID：12771203
> 
> 赞同：1
> 
> 时间：2012-10-07T17:40:03.550
> 
> 标签：java, android, image

我在我的活动中有一个值，它代表某个玩家在实现目标的背景下的“进度”（例如，一个玩家需要 10 场胜利，他获得了 3 场胜利 -> 进度 = 30%）。

我现在想要的是加载一个“空”图像并相对于进度值填充它。

例如

![在此处输入图像描述](../Images/1af8df53ca3e9e48ce7ac173f9159516.png)

被操纵到

![在此处输入图像描述](../Images/db76d9e0f2e051f84ca86a80494fc132.png)

但现在我绝对不知道如何实现这一点。我想到最简单的方法是一个带有参数 progress 的 Java 函数，它加载该空图像并在该图像上绘制 x 条垂直线（其中 x 是 = progress as int）并返回它。

现在我已经阅读了一些教程，但我仍然不知道如何加载该 png，在其上绘制一些东西并将其返回，而无需将图纸保存在其中。有谁知道如何执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:03:26.173

您可以使用 Android 进度条功能。[http://developer.android.com/reference/android/widget/ProgressBar.html](http://developer.android.com/reference/android/widget/ProgressBar.html)

如果您不希望它在对话框中，则可以直接将其嵌入。

这是另一个可能有帮助的答案： [Android progress bar embedded in ui and not in dialog](https://stackoverflow.com/questions/4242295/android-progress-bar-embedded-in-ui-and-not-in-dialog)

以下是如何创建自定义进度对话框：[ProgressBar/ProgressDialog 的自定义 Drawable](https://stackoverflow.com/questions/2819778/custom-drawable-for-progressbar-progressdialog)

希望有帮助。

# git - 如何在我的 mac osx 终端上显示我的 git 分支和提交状态？

> ID：12771205
> 
> 赞同：3
> 
> 时间：2012-10-07T17:40:08.737
> 
> 标签：git, terminal

我见过很多脚本来显示当前分支，但我想复制这个确切的设置![这个确切的设置](../Images/dba969f8b46b207e200d2257d9b9d7a2.png)（见屏幕截图的右侧）。有谁知道如何使它成为可能？

[链接到全尺寸屏幕截图](https://i.stack.imgur.com/Rgv5Y.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:58:13.497

查看[oh-my-zsh](https://github.com/robbyrussell/oh-my-zsh)。它有不同的主题可以显示当前的 git 分支。您可以在此处查看许多当前可用主题的屏幕截图：[主题](https://github.com/robbyrussell/oh-my-zsh/wiki/themes)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T17:55:30.387

我能想到的最接近的是

```
git describe --all --dirty=' ±' 
```

也许不完全是你需要的，但也许你可以从中工作。

# python - Psycopg2 字符串格式化，带有用于创建类型的变量名

> ID：12771209
> 
> 赞同：4
> 
> 时间：2012-10-07T17:40:49.717
> 
> 标签：python, postgresql, list-comprehension, psycopg2

当使用 psycopg2 使用其格式化选项在 postgres 中创建变量类型名称时，由于对象名称的错误字符串格式化而引发错误。是否不允许在查询参数中使用 %s 传入名称？

我写的确实解决了我的问题的代码如下（只是寻找一种更好的方法来解决这个问题）

```
cursor.execute("CREATE TYPE {0} AS ENUM %s".format(name), (tuple(set([e.upper() for e in elements])),)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-09T15:46:09.797

实际上，您永远不应该对查询进行 python 格式化，而是让*psycopg2*来做。这是制作它的方法：http: [//initd.org/psycopg/docs/usage.html#passing-parameters-to-sql-queries](http://initd.org/psycopg/docs/usage.html#passing-parameters-to-sql-queries)即：

```
cur.execute("INSERT INTO numbers VALUES (%s)", (42,)) 
```

`psycopg2.sql`从 2.7 版本开始，可以通过该模块获得一些高级格式化可能性：http: [//initd.org/psycopg/docs/sql.html](http://initd.org/psycopg/docs/sql.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:37:21.677

如您所料，您不能将表名之类的内容作为查询参数传递。

它们作为协议级别的绑定参数发送，并且（关键）查询*必须可解析为有效的 SQL，并将它们作为 placeholders*。就好像您要运行 SQL 级别`PREPARE`然后将`EXECUTE`. 您必须在准备之前将它们格式化为 SQL 字符串，并使用适当的标识符引用。

双引号您要替换的标识符，并注意您正在传递的字符串中可能出现的双引号，这可能会过早地结束您的引用序列。这些必须加倍。例如，对于`some"table`您将使用的表名：

```
 'SELECT * FROM "{0}"'.format('some""table'); 
```

SQL注入是一个非常严重的风险；你必须让你的报价*完全*正确。`quote_ident`理想情况下，找到 PostgreSQL SQL 函数的客户端等效项。

请注意，双引号标识符区分大小写。通过始终使用双引号来确保您在数据库中使用相同的大小写创建它们，不要混合使用带引号和不带引号的标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T13:58:21.270

我也遇到了这个问题，并写了一篇简短的[博客文章](http://josephfusaro.com/string-formatting-errors-psycopg/)，其中介绍了使用字符串格式连接到远程数据库，但是这个问题和我的解决方案适用于需要将变量传递给 SQL 命令的任何情况。

以下是我解决此问题的方法：

```
import psycopg2 as db
import sys

my_host = 'ec2-190-111-829-829.compute-1.amazonaws.com'
my_dbname = 'myDBNameGoesHere'
my_user = 'myUsernameGoesHere'
my_password = 'myPasswordGoesHere'
remote_connection_str = 'host={0} dbname={1} user={2} password={3}'.format(my_host, my_dbname, my_user, my_password)

if __name__ == '__main__':
     try:
          remote_connection = db.connect(remote_connection_str)
          cursor = remote_connection.cursor()
          cursor.execute('SELECT version()')
          version = cursor.fetchone()
          print "\n"
          print "Successful connection to database."
          print "Database information:\n", version
          print "\n"

     except db.DatabaseError, e:
          print 'Error %s' % e
          sys.exit(1)

     finally:
          if remote_connection:
          remote_connection.close() 
```

# php - 使用 PHP 搜索亚马逊的顶级评论者

> ID：12771211
> 
> 赞同：1
> 
> 时间：2012-10-07T17:41:09.873
> 
> 标签：php, zend-framework, amazon-web-services, amazon

有什么方法可以提取亚马逊的顶级评论者`http://www.amazon.com/review/top-reviewers`？我想提取信息，例如名字、姓氏、Facebook 页面或网站、他们查看的电子邮件和书籍兴趣、常用标签等。

如何使用 Amazon API 做到这一点？

# ios - 没有标题标签的自定义 UITabBarItem

> ID：12771212
> 
> 赞同：7
> 
> 时间：2012-10-07T17:41:13.960
> 
> 标签：ios, uitabbar, uitabbaritem

我正在尝试创建一个 UITabBar，我将使用外观 API 对其进行自定义。我一直试图从 UITabBarItem 中删除标题标签并调整图像大小以使其居中。如果您只是删除标题文本，则图像下方和栏的底部会有空白区域。

有谁知道如何制作没有标题的 UITabBarItem ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-12T11:15:08.727

设置标题`nil`并移动图标

```
self.tabBarItem = [[UITabBarItem alloc] initWithTitle:nil
                                                image:[[UIImage imageNamed:@"icon_tabbar_inactive.png"]
                                                    imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal]
                                        selectedImage:[[UIImage imageNamed:@"icon_tabbar_active.png"]
                                                    imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal]];

// Move the tabbar icon to the middle of tabbar
self.tabBarItem.imageInsets = UIEdgeInsetsMake(6.0, 0.0, -6.0, 0.0); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-13T17:11:57.167

今天做了同样的任务。

由于我不能将选项卡栏的全部空间用于项目图像，因此我只需在用户按下任何选项卡时更改选项卡栏背景。

1.  因此，第一步是为每个选定的选项卡准备带有全尺寸按钮的背景图像。

2.  然后创建自定义类并将其分配给您的标签栏控制器

3.  在 ViewDidLoad 中的第一个选项卡的自定义类中设置背景图像：

    ```
    [[self tabBar] setBackgroundImage:[UIImage imageNamed:@"tabShopsActive"]];
    [[self tabBar] setSelectionIndicatorImage:[UIImage imageNamed:@"tabSelection"]]; 
    ```

4.  为 ViewWillAppear 中的每个 UIController 添加背景更改：

    ```
    UITabBarController *bar = [self tabBarController];
    [bar.tabBar setBackgroundImage:[UIImage imageNamed:@"tabDiscountsActive"]]; 
    ```

因此，现在当用户按下任何选项卡选项卡栏更改背景以显示正确的图片时。

这是我选择第二个选项卡时生成的选项卡栏：

![没有标签的标签栏](../Images/639f4669001aade7371e67fd73b09a07.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-08T06:25:18.173

我对同样问题的解决方案：

1、将横条原点y调低，将屏幕外的空白推开。

2、重置背景，确保它刚好覆盖正确的位置。

# c++ - 如果输入错误，则无限循环

> ID：12771213
> 
> 赞同：1
> 
> 时间：2012-10-07T17:41:15.380
> 
> 标签：c++, io, while-loop, infinite-loop

请看下面的代码

```
#include <iostream>
#include <iomanip>

using namespace std;

double hypontenuse(double,double);

int main()
{
    double side1 = 0;
    double side2 = 0;

    cout << "Enter side1 (-1 to exit)" << endl;
    cin >> side1;

    while(true)
    {

        if(side1==-1)
        {
            break;
        }

        cout << "Enter side2" << endl;
        cin >> side2;

        double result = hypontenuse(side1,side2);

        cout << "The Hypontenuse of the Right Triangle is: " << setprecision(2) << fixed << result << endl;

        cout << "Enter side1 (-1 to exit)" << endl;
        cin >> side1;
    }
} 

double hypontenuse(double side1, double side2)
{
    double result = (side1*side1)+(side2*side2);

    return result;
} 
```

我是 C++ 新手。在这段代码中，如果我输入了无效的输入（空格、制表符、字母等），这段代码会突然变成一个无限循环。我需要忽略这些无效输入，显示一条消息，然后回到起始位置。我怎样才能做到这一点？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:47:56.760

您总是需要检查您的输入是否成功。通常，只需将流转换为布尔值即可：

```
if (std::cin >> value) {
    process(value);
else {
    // recover from the error
} 
```

从错误输入中恢复至少包括两个部分：

1.  将流设置回它可以执行任何操作的状态，例如，使用`std::cin.clear()`.
2.  摆脱任何有问题的输入。如何做到这一点完全取决于您的需求。例如，您可能可以忽略单个字符或直到行尾的所有内容。

忽略字符的代码类似于以下代码之一：

```
std::cin.ignore(); // ignores one character
std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); // ignore until end of line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:47:44.617

就个人而言，我的建议是使用良好的旧 C“fgets()”和“sscanf()”。

但是，请查看此链接：

*   [使用 cin 在 C++ 中进行输入验证的最佳方法是什么？](https://stackoverflow.com/questions/545907/what-is-the-best-way-to-do-input-validation-in-c-with-cin)

它执行以下操作：

1）用于`std::getline(std::cin, str)`读取您的原​​始输入（类似于“fgets”）

2) 用于`std::ws`吃掉多余的空白（如制表符、字符和换行符）

不幸的是，它*无助*于验证输入（ sscanf() 会在一个语句中为您做）。

'希望有帮助

==================================================== =============

> 问：你能编辑我的代码吗？有点难以理解 :( – Sepala

答：够公平的。开始：

```
#include <stdio.h>

double 
hypontenuse(double side1, double side2)
{
    return (side1*side1)+(side2*side2);
}

int 
main(int argc, char *argv[])
{
    double side1 = 0;
    double side2 = 0;
    char buff[80];

    while(true)
    {
      printf ("Enter side1 and side2 (-1 to exit): ");
      fgets (buff, sizeof (buff), stdin);
      int iret = sscanf (buff, "%lf %lf", &side1, &side2);
      if (side1 == -1)
        break;
      if (iret != 2)
        continue;

      double result = hypontenuse(side1,side2);
      printf ("The Hypontenuse of the Right Triangle is: %.02lf\n", result);
    }
    printf ("Done.\n");
    return 0;
} 
```

# android - WebView 在 Android 2.3.7 上不显示视频

> ID：12771214
> 
> 赞同：2
> 
> 时间：2012-10-07T17:41:22.540
> 
> 标签：android, android-webview, android-video-player, android-websettings

我尝试在 Android WebView 中播放 dailymotion.com 视频。

在 Android 4.0.1 上，当我在清单文件中设置 android:hardwareAccelerated="true" 时，它运行良好。

当我在 Android 2.3.7 上使用它时，视频在第一帧冻结，我可以在 logcat 上看到以下错误：

```
E/Web Console(14426): Uncaught Error: INDEX_SIZE_ERR: DOM Exception 1 at http://static1.dmcdn.net/js/gen/widget/pack/player.js.v43e491a06c202f1e6:1 
```

当我在 Android 4.0.1 内置浏览器上播放时，视频会在浏览器中播放。当我在 Android 2.3.7 内置浏览器中播放时，视频似乎正在打开外部媒体播放器。

这是我正在使用的代码：

```
mVideoWebView.setWebChromeClient(new WebChromeClient());
setWebViewSettings(mVideoWebView);
String data_html = "<!DOCTYPE HTML> <html xmlns=\"http://www.w3.org/1999/xhtml\" 
                    xmlns:og=\"http://opengraphprotocol.org/schema/\" 
                    xmlns:fb=\"http://www.facebook.com/2008/fbml\">
                    <head></head>
                    <body style=\"margin:0 0 0 0; padding:0 0 0 0;\">
                    <iframe src=\"http://www.dailymotion.com/embed/video/xu4vre\" 
                            width=\"300\" height=\"162\" frameborder=\"0\">
                    </iframe> </body> </html> ";
mVideoWebView.loadData(data_html, "text/html", null);
public static void setWebViewSettings(WebView webview) {
    WebSettings webSettings = webview.getSettings();
    webSettings.setPluginState(PluginState.ON);
    webSettings.setJavaScriptEnabled(true);
    webSettings.setAllowFileAccess(true);
    webSettings.setLoadWithOverviewMode(false); // zoom y/n
    webSettings.setUseWideViewPort(true); // true = like desktop
    webSettings.setPluginsEnabled(true);

    //webSettings.setAllowContentAccess(true);
    webSettings.setAllowFileAccess(true);
    //webSettings.setAllowFileAccessFromFileURLs(true);
    //webSettings.setAllowUniversalAccessFromFileURLs(true);
    webSettings.setDatabaseEnabled(true);
    webSettings.setGeolocationEnabled(true);
    webSettings.setJavaScriptCanOpenWindowsAutomatically(true);
    webSettings.setDomStorageEnabled(true);
} 
```

我认为解决方案的关键在于 WebChromeClient。如果我删除该行`mVideoWebView.setWebChromeClient(new WebChromeClient());`，即使在 Android 4 上视频也不会播放，而且我看不到错误。

# lisp - 嵌套 alist 到 plist 与 alexandria

> ID：12771215
> 
> 赞同：2
> 
> 时间：2012-10-07T17:41:43.150
> 
> 标签：lisp, common-lisp

Alexandria 非常适合将简单的 alist 转换为 plist，例如：

```
> (get-document "flower-photo-with-lytro")

((:|_id| . "flower-photo-with-lytro")
 (:|_rev| . "6-eb6d9b71251c167039d3e73d8c0c9a63")
 (:TITLE . "flower-photo-with-lytro")
 (:AUTHOR . "devnull") 
 (:TEXT . "hello here is a  sample flower .... ")
 (:TIME . "3558566236"))

> (alexandria:alist-plist (get-document "flower-photo-with-lytro"))

(:|_id| "flower-photo-with-lytro" :|_rev| "6-eb6d9b71251c167039d3e73d8c0c9a63" 
 :TITLE   "flower-photo-with-lytro" :AUTHOR "devnull"
 :TEXT "hello here is a sample flower .... " :TIME "3558566236") 
```

我如何使用 alexandria 来格式化更结构化的 alist，例如

```
> (invoke-view "hulk" "time")

((:|total_rows| . 2)
 (:|offset| . 0)
 (:|rows|
  ((:|id| . "flower-photo-with-lytro")
   (:|key| . "3558566236")
   (:|value| . "flower-photo-with-lytro"))
  ((:|id| . "hello-world-in-common-lisp-and-restas")
   (:|key| . "3558567019")
   (:|value| . "3558567019-hello-world-in-common-lisp-and-restas")))) 
```

获取带有:id、:key 和:value 的plist？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T20:03:57.600

```
(defparameter *test*
  '((:|total_rows| . 2)
    (:|offset| . 0)
    (:|rows|
     ((:|id| . "flower-photo-with-lytro")
      (:|key| . "3558566236")
      (:|value| . "flower-photo-with-lytro"))
     ((:|id| . "hello-world-in-common-lisp-and-restas")
      (:|key| . "3558567019")
      (:|value| . "3558567019-hello-world-in-common-lisp-and-restas")))))

(defun rows-alist (tree)
  (list (car tree)
        (cadr tree)
        (alexandria:flatten (caddr tree)))) 
```

好吧，我会试着猜测......

* * *

如果您想重命名关键字：

```
(defun rows-alist (tree)
  (list (car tree)
        (cadr tree)
        (mapcar
         #'(lambda (x)
             (if (symbolp x)
                 (intern
                  (string-upcase (symbol-name x))
                  "KEYWORD") x))
         (alexandria:flatten (caddr tree))))) 
```

# iphone - 通过 iOS 6 为 iOS 4.2 构建/编译应用程序？

> ID：12771218
> 
> 赞同：0
> 
> 时间：2012-10-07T17:42:00.180
> 
> 标签：iphone, ios

> **可能重复：**
> [在 App Store 应用中同时支持 armv6 和 iOS 6？](https://stackoverflow.com/questions/12574851/support-both-armv6-and-ios-6-in-an-app-store-app)

到目前为止，我一直在使用“armv6 armv7”和 iOS 4.2+ 构建我的应用程序。

使用 Xcode 4.5x 和 iOS 6，我似乎不能再这样做了。我尝试将“armv6”添加到现有的“armv7”和“armv7s”中，并尝试删除“armv7s”，但在分析时仍然收到警告：

“警告：没有规则为架构 armv6 处理 sourcecode.c.objc 类型的文件 '$(PROJECT_DIR)/MyApp/main.m'”

Plus iOS 4.2 不再显示“Depolyment Target”

有没有办法为 iOS 4.2-6 构建我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:00:08.627

不，您可以在单独的应用程序中执行 4.3 - 6 或 4.2 和 6。没有办法在一个应用程序中支持 4.3 - 6。

# ruby-on-rails - Rails，rake db:migrate 从 github 克隆应用程序时出错

> ID：12771226
> 
> 赞同：0
> 
> 时间：2012-10-07T17:42:51.833
> 
> 标签：ruby-on-rails

我从新安装的 linux 中的 github 获取了 2 个我的应用程序（它们一直在其他 linux 环境中工作）。我也安装了，mysql，nodejs。我在 rails 创建了一个测试应用程序，并对其进行了测试以使其正常工作。但是我克隆的应用程序在运行 rake db:migrate 时出错。

**app1 中的错误**：

rake db:migrate == CreateItems: 迁移 ========================================= =========== -- create_table(:items) -> 0.0025s == CreateItems: 已迁移 (0.0027s) ================== =========================

== AddDataToTableItems：迁移 ============================================= rake中止！发生错误，此迁移和所有后续迁移均已取消：

未定义的方法“制造商”#

**app2中的错误**

rake db:migrate rake 中止！nil:NilClass 的未定义方法 `[]='

（通过使用 --trace 运行任务查看完整跟踪）

尽管两个错误都不同，但它们应该是相关的（因为应用程序在其他环境中运行）。由于这个问题，我被困了半天。关于相同的任何输入？

PS：应用程序的迁移文件如下： http: [//dl.dropbox.com/u/18367173/migrate_app2.tar.gz](http://dl.dropbox.com/u/18367173/migrate_app2.tar.gz) http://dl.dropbox.com/u/18367173/migrate_app1.tar.gz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:01:00.667

我相信您正在尝试在创建该表列之前在制造商字段中添加一些内容。

确保首先运行所有真正的迁移（那些修改架构的迁移），然后才运行您在数据库中发布数据的迁移。

顺便说一句，您不应该使用迁移在您的应用程序中发布示例数据，您应该为此使用 rake 任务或数据库种子。

# printing - “行”之前的反斜杠字符 - Python3中的打印功能

> ID：12771227
> 
> 赞同：0
> 
> 时间：2012-10-07T17:43:05.747
> 
> 标签：printing, python-3.x

我在这个问题上遇到了困难。每次我尝试在这个程序中使用反斜杠时，它只会给我一个错误。

我想要的线是

```
print(day,\\month,\\year"is a magic date") 
```

但无论我多久尝试一次其他事情，似乎都没有任何效果。任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T19:31:13.530

作为 Oz123 已经编写的替代方案，您可能希望使用字符串格式：

```
print('{}/{}/{} is a magic date'.format(day, month, year)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:34:03.537

你需要告诉 Python “\”是一个字符串：

```
>>> print(day, "\\", month, "\\", year, "\\", "is a magic date") 
1 \ Sep \ 1978 \ is a magic date 
```

您还可以指定操作符：

```
>>> print(day, "\\", month, "\\", year, "\\", " is a magic date", sep=" ")
1 \ Sep \ 1978 \ is a magic date 
```

或者干脆做：

```
>>> print(day ,month, year, " is a magic date", sep="\\") 
1\Sep\1978\ is a magic date 
```

# javascript - 什么是 Jquery 的媒体查询等价物

> ID：12771230
> 
> 赞同：2
> 
> 时间：2012-10-07T17:43:48.517
> 
> 标签：javascript, jquery, responsive-design

当我的网站在桌面大小的显示器上时，我希望加载其他不会在移动大小的显示器上加载的 jQuery 脚本。

CSS 具有媒体查询，可以根据浏览器大小轻松加载 CSS 文件。Jquery 是否有类似的功能？

* * *

* * *

**背景调查：**

以下是我找到的一些解决方案以及每个解决方案的缺点。

**解决方案 1：** **[Enquire.js](http://wickynilliams.github.com/enquire.js/)** - 这应该是 Javascript 的媒体查询等价物（我认为）。但是，文档不是很清楚（至少对于初学者来说）。

例如，[本教程](http://css-tricks.com/enquire-js-media-query-callbacks-in-javascript/)给出了以下示例：

```
enquire.register("max-width: 960px", function() {
  // put your code here
}); 
```

但是，如果您将 Jquery 代码复制并粘贴到它所说的位置，则不会发生任何事情！我认为您可能必须放置一个指向您的 Jquery 文件的链接，但文档没有解释如何做到这一点！

**解决方案 2：** **[使用 Window Resize](http://www.venveo.com/articles/view/quick-tip-jquery-media-queries)** - 您可以使用`$(window).resize`来触发脚本。但是，它只有在用户重新调整浏览器大小时才会起作用。这对于窗口总是最大化的桌面用户来说是没有好处的。

另一个问题是每次调整浏览器大小时都会加载脚本。对于某些脚本来说，这可能是一个问题（请参阅[此处](http://jsfiddle.net/QcmpG/1/embedded/result/)的示例，如果窗口多次调整大小，则单词 false/true 会无休止地重复）。

**解决方案 3：** **[设置一个隐藏的 100% 宽度的 DIV，然后运行一个检查其宽度的脚本](https://stackoverflow.com/questions/6461300/triggering-jquery-with-css-media-queries)**- 这样做的缺点是它仅在页面首次加载时运行，因此对于更改其窗口大小的用户不利（或设备的方向）。 [您可以运行一个计时器，使其](http://jsfiddle.net/9X4up/)每 1 秒检查一次宽度，但这似乎效率不高。

有谁知道有效的解决方案？

谢谢。

PS。这个问题是关于 Jquery 的等效媒体查询。这不是关于尝试在 Javascript 中重新创建 CSS 媒体查询（即，它不是关于使用 Jquery 为不同的窗口大小加载不同的 CSS 文件，这是通过[css3-mediaqueries-js](http://code.google.com/p/css3-mediaqueries-js/)实现的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:59:03.383

虽然它不是专门为 jQuery 设计的，但我在 Paul Irish 的 Modernizr 库中取得了很高的成功。一个简单的方法允许您使用与 CSS 相同的语法来测试媒体查询。测试返回真或假。例如：

```
if (Modernizr.mq('only screen and (max-width: 768px)') == true) {
  // your code here
} 
```

如果浏览器接受来自该规则的 CSS，那么该函数也将返回 true。您可以在[Modernizr 文档](http://modernizr.com/docs/#mq)中阅读更多内容。

希望有帮助。

# node.js - cf 运行时不工作

> ID：12771231
> 
> 赞同：0
> 
> 时间：2012-10-07T17:43:49.493
> 
> 标签：node.js, cloud-foundry

我正在尝试将 nodeJS 本机应用程序部署到 CF。我正在使用 cf-runtime 模块来确定我的应用程序正在运行的真实服务器的 IP 和端口地址。但是随着添加

```
var cf = require('cf-runtime');
var local_port = 3000;
......
....business code....

 }).listen(local_port);

  console.log('Proxy server running at localhost:' + local_port);
  console.log("host: " + app.host + " port: " + app.port); 
```

我看到如下错误：

> 创建应用程序：OK 上传应用程序：检查可用资源：OK 处理资源：OK 打包应用程序：OK 上传（44K）：OK 推送状态：OK 暂存应用程序 'leohu-proxy'：OK 启动应用程序 'leohu-proxy'：.. .....错误：应用程序'leohu-proxy的状态未确定，没有足够的信息可用。
> 
> thu@geekdev:~$ vmc logs leohu-proxy ====> /logs/staging.log <====
> 
> # 由 logger.rb/25413 在 2012-10-07 17:41:24 +0000 创建的日志文件跳过 npm 支持：不提供 npm-shrinkwrap.json
> 
> ====> /logs/stdout.log <====
> 
> 代理服务器运行在 localhost:3000 主机：172.30.49.236 端口：15669

谁能解释为什么，或者建议我在这里做什么？

以下问题可能是：我可以使用公开的主机和端口地址从另一个应用程序访问此应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:24:12.733

根据您的阶段日志，您缺少 npm-shrinkwrap.json 文件。

这是来自 Cloud Foundry 的 2 篇博文。一个用于 Node.js 模块支持，另一个是新的运行时模块（您正在使用）。

*   [http://blog.cloudfoundry.com/2012/05/24/cloud-foundry-supports-node-js-modules-with-npm/](http://blog.cloudfoundry.com/2012/05/24/cloud-foundry-supports-node-js-modules-with-npm/)
*   [http://blog.cloudfoundry.com/2012/08/21/new-runtime-module-for-node-js-applications/](http://blog.cloudfoundry.com/2012/08/21/new-runtime-module-for-node-js-applications/)

我建议您查看第一个网址并应用他们的指示。这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:41:44.693

我不是 CF 方面的专家。但我会试试的。

我觉得你的日志没问题。但该应用程序似乎已被健康管理器关闭。（启动应用程序后）。

您的应用程序只是代理吗？如果我对健康经理的看法是正确的，这可能是个问题。

希望能帮助到你。

卢卡斯

# c++ - 在 C++ 中创建一个通用实用程序类

> ID：12771232
> 
> 赞同：-1
> 
> 时间：2012-10-07T17:43:51.440
> 
> 标签：c++

由于我大部分时间都使用数组，因此我想创建一个使用向量执行插入、删除、搜索和其他操作的类。

```
arrOperation obj = new arrOperation(); 
obj.insert(arr,val); 
```

如上所示，我正在为通用实用程序类创建一个对象，我在其中编写了用于插入、删除和其他操作的代码。我的问题是，写这样一个类并使用其中的函数是好还是在同一个类本身中有插入、删除函数好？我需要一些关于我可以制作一些代码并且可以在需要时重复使用的领域的想法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T17:48:38.643

听起来你想要的是`std::vector`课程。附加将是 push_back(val)、`insert`is`insert`和`remove`is `erase`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T17:54:42.917

When you say "vector" in your question it seems you are talking of a built-in array. If that's the case, please have a look at `std::vector<T>` which pretty much seems to do what you are looking for.

If you are talking about packaging some operations which are not available in `std::vector<T>`, you should probably consider making them "algorithms" which are applicable to a suitable sequence. For example, `std::vector<T>` doesn't have a method for sorting its elements but there is an algorithm, `std::sort()`, which can sort any random access sequence, e.g., a `std::vector<T>` (as long as there is a strict weak order defined for the type `T`, of course).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T21:14:33.010

如果您想用 Java 编程，请使用 Java。在堆上创建对象以向其他对象提供函数并不是 C++ 的本意。

您可以使用自由函数，在现有类型上编写频繁的操作。

如果您需要动态内存，您可以使用标准库类。

提供操作的类只需要不允许自由函数存在的语言。

# rest - Struts2 + Rest Plugin：在动作类中设置属性时的奇怪行为

> ID：12771234
> 
> 赞同：0
> 
> 时间：2012-10-07T17:44:17.970
> 
> 标签：rest, struts2

我在使用 rest 插件时遇到了 struts2 的奇怪行为。奇怪，因为在我已经完成的 Web 应用程序中，一切正常。

好吧，我有一个带有帖子表单的弹出式 jsp。此表单操作 url 正确调用了控制器的 create 方法。

```
<form name="gestioneUtenteForm" action="../credenziali" method="post">
           <input type="hidden" name="idModifica" id="idUtente" value="<%=request.getParameter("idModifica") %>" />
            <div>
                <label>Nome Completo</label>
                <input type="text" name="nomeUtente" id="nomeUtente" />
            </div>
            <div>
                <label>Login</label>
                <input type="text" name="loginUtente" id="loginUtente" />
            </div>
            <div>
                <label>Password</label>
                <input type="password" name="password" id="password" />
            </div>
            <div>
                <label>Conferma Password</label>
                <input type="password" name="confermaPassword" id="confermaPassword" />
            </div>
            <!-- ... OTHER FIELDS ... -->

        <div><input type="submit" name="submit" value="Registra" /></div>
    </form> 
```

我的问题是，并非控制器的所有属性值都是从 post 的参数设置的。我的意思是，通过 firebug，我看到所有参数都已发布，如果我通过 request.getParameter("something") 之类的调用将它们放入控制器中，我将获得所有值。如果我尝试使用它们的 getter 从控制器的属性中获取参数，我会得到正确的东西，但会得到其他带有空值的东西。在具体：

```
private String nomeUtente;
private String loginUtente;
private String password;
... Other Properties ....

public String getNomeUtente() {
    return nomeUtente;
}

public void setNomeUtente(String nomeUtente) {
    this.nomeUtente = nomeUtente;
}

public String getLoginUtente() {
    return loginUtente;
}

public void setLoginUtente(String loginUtente) {
    this.loginUtente = loginUtente;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

... Other Setters & Getters ...

public HttpHeaders create() {
    GestioneUtenteService.creaUtente(nomeUtente, loginUtente, password,
            mailUtente, telUtente, scadenzaReg, scadenzaPwd, ruoloUtente);

    if (Integer.valueOf(ruoloUtente) == Constants.NUM_RUOLO_ADMIN_GENERALE)
        return new DefaultHttpHeaders("accesso").disableCaching();

    return index();
} 
```

我认为 loginUtente 具有正确的值，就像其他属性一样。但是... nomeUtente 和密码为空。如果我打电话：

```
public HttpHeaders create() {

    HttpServletRequest request = getServletRequest();
    nomeUtente = request.getParameter("nomeUtente");
    loginUtente = request.getParameter("loginUtente");
    password = request.getParameter("password");
    mailUtente = request.getParameter("mailUtente");
    telUtente = request.getParameter("telUtente");
    scadenzaReg = request.getParameter("scadenzaReg");
    scadenzaPwd = request.getParameter("scadenzaPwd");
    ruoloUtente = request.getParameter("ruoloUtente");

    logger.info("Creazione utente");
    GestioneUtenteService.creaUtente(nomeUtente, loginUtente, password,
            mailUtente, telUtente, scadenzaReg, scadenzaPwd, ruoloUtente);

    if (Integer.valueOf(ruoloUtente) == Constants.NUM_RUOLO_ADMIN_GENERALE)
        return new DefaultHttpHeaders("accesso").disableCaching();

    return index();
} 
```

正如我之前所说，我得到了所有的价值......nomeUtente 和密码包括在内，因为一切都在发布。再次使用 Web 应用程序，一切正常，并且控制器的属性都已正确设置。

问题出在哪里？

# c# - 在 C#/XAML Metro 应用程序中的 WebView 顶部显示 appbar？

> ID：12771238
> 
> 赞同：0
> 
> 时间：2012-10-07T17:45:03.833
> 
> 标签：c#, xaml, windows-8, microsoft-metro, z-index

我正在尝试在我的 Metro 应用程序中使用 AppBar。问题是，我还有一些 WebView 正在 AppBar 上显示。这是我的代码：

```
<Page
x:Class="AppName.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:AppName"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Grid Background="#00D4FF" Canvas.ZIndex="1">
    <WebView Source="http://bing.com/"
        VerticalAlignment="Center" Margin="306,518,360,25" 
             Canvas.ZIndex="1" Height="225" />
</Grid>
<Page.BottomAppBar>
    <AppBar x:Name="ABar" IsSticky="True" Padding="10,0,10,0" Canvas.ZIndex="200">
        <Grid>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Style="{StaticResource EditAppBarButtonStyle}" x:Name="EditButton" Visibility="Collapsed" />
                <Button Style="{StaticResource AddAppBarButtonStyle}" />
                <Button Style="{StaticResource DeleteAppBarButtonStyle}" x:Name="DelButton" Visibility="Collapsed" />
            </StackPanel>
        </Grid>
    </AppBar>
</Page.BottomAppBar> 
```

如果您运行它并调出 appbar，您会注意到 WebView 显示在 appbar 上方，即使 AppBar 的 Canvas.ZIndex 高于 WebView 和 Grid 的 ZIndex。我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:50:56.757

您需要使用 WebViewBrush 控件，该控件将在应用栏处于活动状态时显示 WebView 内容。在应用栏显示事件中，您隐藏 WebView 控件并显示 WebViewBrush，而在应用栏隐藏事件中执行相反的操作。实现这一点的棘手部分是正确获取动画时间。

下面链接的文章包含一个如何做到这一点的示例，虽然它与魅力栏有关，但原理相同。

[http://blogs.msdn.com/b/priozersk/archive/2012/08/13/how-to-display-charms-on-a-top-of-the-webview.aspx](http://blogs.msdn.com/b/priozersk/archive/2012/08/13/how-to-display-charms-on-a-top-of-the-webview.aspx)

# javascript - 使用敲除调用函数/使“div”容器在下拉框中的值更改时可见

> ID：12771242
> 
> 赞同：1
> 
> 时间：2012-10-07T17:45:23.737
> 
> 标签：javascript, html, knockout.js

我有一个包含 4 个选项的下拉框。

然后，我有 4 个 div 容器，我使用`style="display:none"`.

我希望在选择每个特定选项时，使用 KnockoutJs 使与该选项对应的 div 容器可见，而其余 div 容器保持不可见。

例如数组是：

```
this.Types=ko.observableArray([{name:'op1'},{name:'op2'},{name:'op3'},{name:'op4'}]); 
```

html:

```
<select data-bind='options:Types, optionsCaption:"(Select a Type)", optionsText:"name", value:seltype'></select>  

<div> id=1 style="display:none"> id1 </div>     
<div id=2 style="display:none"> id2 </div>  
<div id=3 style="display:none"> id3 </div>  
<div id=4 style="display:none"> id4 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:45:14.690

这是在 DIVs 元素上使用*可见绑定的解决方案：*

```
<select data-bind='options:Types, optionsCaption:"(Select a Type)", optionsText:"name", optionsValue: "name", value:seltype'></select>  

<div data-bind="visible: seltype() === 'op1'"> id1 </div>     
<div data-bind="visible: seltype() === 'op2'"> id2 </div>  
<div data-bind="visible: seltype() === 'op3'"> id3 </div>  
<div data-bind="visible: seltype() === 'op4'"> id4 </div> 
```

请参阅此[小提琴](http://jsfiddle.net/f7K4d/)以获取工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:39:09.860

您可以订阅下拉列表的选定值，如下所示：

```
<select data-bind='options:Types, optionsCaption:"(Select a Type)", optionsText:"name", value:seltype'></select>  
<div id="div1" style="display:none"> id1 </div>     
<div id="div2" style="display:none"> id2 </div>  
<div id="div3" style="display:none"> id3 </div>  
<div id="div4" style="display:none"> id4 </div>  

this.seltype = ko.observable();   
this.Types=ko.observableArray([{id:1, name:'op1'},{id:2,name:'op2'},{id:3,name:'op3'},{id:4,name:'op4'}]);

this.seltype.subscribe(function(newValue){
    // jquery
    $.("#div1,#div2,#div3,#div4").hide();
    $.("#div" + newValue).show();
}); 
```

# ruby-on-rails - Rspec 错误消息：PagesController GET 'home'' has 应该有正确的标题

> ID：12771243
> 
> 赞同：1
> 
> 时间：2012-10-07T17:45:30.263
> 
> 标签：ruby-on-rails, railstutorial.org

```
 Error Message:PageController GET 'contact' should have the right title.... 
```

我想向更有经验的 Rubists 寻求建议。我正在关注 Michael Hartl 的 Rails 教程 3，就在第 3 章结束之前，我附上了错误消息。

我真的不知道要改什么，因为我检查了几次，我的文件和教科书里的一样。

我的代码在 Github 上可用： [https ://github.com/maro9/sample_app](https://github.com/maro9/sample_app)

预先感谢您的任何帮助。

错误信息打印屏幕：http: [//s11.postimage.org/pcz9us1tv/rspec_error.jpg](http://s11.postimage.org/pcz9us1tv/rspec_error.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:54:36.580

Change this:

```
response.should have_selector("title",
                :content => "Ruby on Rails Tutorial Sample App|Home") 
```

to this:

```
response.should have_selector("title",
                :content => "Ruby on Rails Tutorial Sample App | Home") 
```

in your `pages_controller_spec.rb`: [https://github.com/maro9/sample_app/blob/master/spec/controllers/pages_controller_spec.rb#L15](https://github.com/maro9/sample_app/blob/master/spec/controllers/pages_controller_spec.rb#L15)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T19:29:48.840

在您的代码中，内容中的“应用程序”是小写的，但您正在测试大写字母。

你创造了什么

```
"Ruby on Rails Tutorial Sample app | About" 
```

你断言你创造了什么

```
"Ruby on Rails Tutorial Sample App | About" 
```

app/views/layouts/application.html.erb 应该改变：

```
-            <title>Ruby on Rails Tutorial Sample app | <%= @title %></title>
+            <title>Ruby on Rails Tutorial Sample App | <%= @title %></title> 
```

# java - For循环将信息发送到Java中的构造函数

> ID：12771245
> 
> 赞同：3
> 
> 时间：2012-10-07T17:46:04.433
> 
> 标签：java, for-loop

我正在尝试使用 a`for loop`来允许用户设置我的类的对象。

老实说，这是一个`homework project`，但我们还没有做到`for loops`，我只是觉得稍微先进一点会很酷。

但是，当我键入将输入发送到方法的部分时，它表示该`non-static`变量不能在`static`上下文中使用。

有没有办法做到这一点，还是我必须使用 2X 的变量和代码行来设置这些对象？

这是带有 for 循环的部分

```
 for (int x=1; x<=2; x++)
   {
    //get input before setting up 2 objects of Employee
    Scanner input = new Scanner ( System.in);
    System.out.print("\nPlease enter the employee's name");
    name = input.nextLine();

    Scanner input1 = new Scanner ( System.in);
    System.out.print("\nPlease enter the employee's department");
    dept = input1.nextLine();

    Scanner input2 = new Scanner ( System.in);
    System.out.print("\nPlease enter the employee's name");
    wage = input2.nextdouble();

    // set Employee objects 
    if (x == 1) {
        Employee_irishRodger employee1 = new Employee_irishRodger(name, dept, wage);
    } else {
        Employee_irishRodger employee2 = new Employee_irishRodger(name, dept, wage);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:50:56.413

I'm assuming `name`, `dept` and `wage` are the non-static fields of some class. The reason you are receiving an error is because the method in which you are using the `for`-loop is in fact `static` (not associated with each instance of your class) and hence your non-static fields can not be accessed through it. Try removing the `static` keyword from your method header.

You can read more about the `static` keyword [here](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html).

* * *

On another note, you don't need to create a new `Scanner` each time, you can just keep using `input`. Furthermore, you can instantiate this `Scanner` outside the scope of the `for` loop:

```
Scanner input = new Scanner(System.in);
for (int x = 1 ; x <= 2 ; x++) {
    System.out.print("\nPlease enter the employee's name");
    name = input.nextLine();

    System.out.print("\nPlease enter the employee's department");
    dept = input.nextLine();

    System.out.print("\nPlease enter the employee's name");
    wage = input.nextdouble();

    ...
}
input.close();  // don't forget to close the scanner when you're done 
```

We've gone from 6 `Scanner` instantiations to 1.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T17:57:28.513

我会更像这样。您可以拥有任意数量的员工：

```
Scanner input = new Scanner(System.in);
int numEmployees = 5;
List<Employee_irishRodger> employees = new List<Employee_irishRodger>();
for (int i = 0; i < numEmployees; ++i) {
    System.out.print("\nPlease enter the employee's name");
    String name = input.nextLine();
    System.out.print("\nPlease enter the employee's department");
    String dept = input.nextLine();
    System.out.print("\nPlease enter the employee's wage");
    String wage = input.nextLine();
    employees.add(new Employee_irishRodger(name, dept, wage));
} 
```

我不知道类名`Employee_irishRodger`从何而来。为什么不只是`Employee`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T17:53:17.920

Make `name`, `dept` and `wage` local.

# android - 将 ormlite-4.9 与 sqlcipher-2.08 集成

> ID：12771251
> 
> 赞同：6
> 
> 时间：2012-10-07T17:46:34.193
> 
> 标签：android, sqlite, ormlite, sqlcipher

我正在将 ormlite-4.9 与 sqlcipher-2.08 集成。我已经用谷歌搜索了，但我没有成功。我还看到了 Gray 先生关于集成的回答（ [How can I use ORMLite with SQLCipher together in Android? ）。](https://stackoverflow.com/a/9180906/1278748)我试了一下他的回答。但是，我猜它是针对旧版本的 ORMLite 和 SQLCipher 的，它们的包与我从[http://sqlcipher.net/sqlcipher-for-android](http://sqlcipher.net/sqlcipher-for-android)下载的包不同。

有人可以详细解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-16T08:04:12.613

我只是添加了与您相同的问题。问题是您必须更改`ormlite-android.jar`代码才能使其与`SQLCipher`库一起使用。所以你要做的是：

1.  [从此处](https://s3.amazonaws.com/sqlcipher/SQLCipher+for+Android+v3.1.0.zip)或直接从[网站](http://sqlcipher.net/open-source/)下载`SQLCipher`最新版本
2.  解压缩文件夹，然后将其复制到您的项目中。
3.  将资产文件夹中的 zip 添加到您的构建路径。
4.  下载`ormlite-core`4.46 的代码（你可以尝试更高，但我不保证它会工作），你可以在[这里](http://sourceforge.net/projects/ormlite/files/releases/com/j256/ormlite/ormlite-core/4.46/ormlite-core-4.46.jar/download)做。
5.  将库添加到您的 libs 文件夹
6.  下载这个 git 项目：[https ://github.com/d-tarasov/ormlite-android-sqlcipher](https://github.com/d-tarasov/ormlite-android-sqlcipher)
7.  复制项目中的源文件夹
8.  ormlite 类的包已更改，因此请更正它。

它应该可以工作:) 让我知道你对此有任何问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-18T09:15:25.677

我知道这是很老的线程。但我最近不得不走同样的路。我已经阅读了两个线程来寻找解决方案：[this](https://stackoverflow.com/questions/9176768/how-can-i-use-ormlite-with-sqlcipher-together-in-android)和[this](https://stackoverflow.com/questions/12771251/integrating-ormlite-4-9-with-sqlcipher-2-08)。

1.  我遵循了 ge0rg 的[回答](https://stackoverflow.com/a/14774778/955107)，它几乎起作用了，但有一些问题，我必须替换代码中的方法（我想避免它）。
2.  我做了 Eliott Roynette[在这里](https://stackoverflow.com/a/24775373/955107)建议的事情，它工作得很好，除了我需要向 Helper 类添加一种方法来接受密码并且我做到了。
3.  我想将代码排除在 lib 中以获得更智能的解决方案而不是代码混合，因此我单独构建 lib/module。

现在我有了可行的[解决方案](https://github.com/sierpito/demo-ormlite-with-sqlcipher)（你可以从 GitHub 克隆工作演示）。将我的答案放在两个线程中以在将来帮助其他人。

# c# - 我可以使用 C# 字符串格式并在运行时确定输入数量吗？

> ID：12771254
> 
> 赞同：2
> 
> 时间：2012-10-07T17:47:13.557
> 
> 标签：c#, format, string-formatting

我有一个程序，它在配置文件中定义了各种单位转换，包括应如何显示的字符串格式。要显示米、厘米等，格式只需要一个输入，但英尺和英寸需要两个输入（其他单位转换可能需要更多输入）。

`List<>`我从包含输入值的泛型长度中知道运行时的参数数量。然后我可以以某种方式将其输入 C#`String.Format`吗？

*举例说明：*

因此，配置中定义的格式可以是`"{0} ft. {1} in."`英尺和英寸，也可以`"{0} cm."`是厘米。代码相应地生成一个或两个值并将它们放入一个`List<float>`通用容器中。然后我需要将代码放入`String.Format`语句中，但`String.Format`不`List<float>`作为参数（据我所知）。

我比 C# 更了解 Python，并且由于它的动态特性，我可以使用星号将参数解压缩到列表中。即格式字符串`my_format.format(*args_list)`在哪里。`my_format`

C#中有类似的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T17:54:46.957

格式字符串后的参数可以作为对象数组提供。

例子：

```
string format = "{0} feet {1} inches";
object[] parameters = { 4, 2 };

string formatted = String.Format(format, parameters); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T18:45:29.040

String.Format 可以获取对象数组，您可以从 List 中获取对象数组`yourList.Cast<object>().ToArray()`。

```
List<float> a = new List<float>();
a.Add(1.0f);
a.Add(2.0f);

string fmt = "{0} ft. {1} in.";
Console.WriteLine(String.Format(fmt, a.Cast<object>().ToArray())); 
```

或者，如果您使用的是 .NET 2.0（并且可能有更简洁的方法可以做到这一点；我对 C# 了解不多）：

```
using System;
using System.Collections.Generic;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static object[] ToObjectArray(List<float> a)
        {
            object[] b = new object[a.Count];
            for (int i = 0; i < (a.Count); i++)
                b[i] = (object)a[i];
            return b;
        }

        static void Main(string[] args)
        {
            List<float> a = new List<float>();
            a.Add(1.0f);
            a.Add(2.0f);

            string fmt = "{0} ft. {1} in.";
            Console.WriteLine(String.Format(fmt, ToObjectArray(a)));

            Console.ReadLine();

        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T18:10:57.280

选择

```
string format = "{0} feet {1} inches";
string[] parameters = { "4", "2" };

string formatted = format;
for(int i=0; i<parameters.length; i++)
{
    //Replaces("{0}", parameters[0]);
    //Replaces("{1}", parameters[1]);
    formatted = formatted.Replace("{"+i+"}", parameters[i]);
} 
```

# java - Spring MVC 的选择框似乎是空的

> ID：12771255
> 
> 赞同：0
> 
> 时间：2012-10-07T17:47:22.180
> 
> 标签：java, google-chrome, select, spring-mvc, form-submit

我想在我的 Spring MVC 应用程序上使用一个选择字段。

```
<c:if test="${!empty REPORTED_WORD_LIST}">
        <form method="post" action="seeReportedWordsOneByOne.html">

            <select name="fityma" onchange="submit()">
                <c:forEach items="${REPORTED_WORD_LIST}" var="rep">
                    <option value="${rep.german}"></option>
                </c:forEach>
            </select>

        </form>
    </c:if> 
```

当页面打开时，所有选项似乎都是空的。然而，与 REPORTED_WORD_LIST 的内容一样多的空选项出现。（因此，如果列表包含例如 3 个对象，比如说“A”、“B”和“C”，那么当我单击选择时，我可以看到三个空选项）但是这些字段似乎是空的。当我提交表单时，我可以在控制器中获得“A”、“B”或“C”。总而言之，提交有效，但显示无效。

我错过了一些明显的东西吗？重要的是要注意我的浏览器是 Chrome。（我无法在 IE 上进行此尝试，我尝试过但我完成了，因为我无法在其上访问 localhost..）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:59:57.450

难道不应该

```
<c:if test="${!empty REPORTED_WORD_LIST}">
        <form method="post" action="seeReportedWordsOneByOne.html">

            <select name="fityma" onchange="submit()">
                <c:forEach items="${REPORTED_WORD_LIST}" var="rep">
                    <option value="${rep.german}">${rep.german}</option>
                </c:forEach>
            </select>

        </form>
</c:if> 
```

# c++ - 将 uint16_t 转换为 wchar_t 的安全方法

> ID：12771256
> 
> 赞同：0
> 
> 时间：2012-10-07T17:47:22.560
> 
> 标签：c++

试图清理一些代码，我想知道以下是否是将 uint16_t 转换为 wchar_t 的安全方法。

```
#if ! defined(MARKUP_SIZEOFWCHAR)
#if __SIZEOF_WCHAR_T__ == 4 || __WCHAR_MAX__ > 0x10000
#define MARKUP_SIZEOFWCHAR 4
#else
#define MARKUP_SIZEOFWCHAR 2
#endif

void FileReader::parseBuffer(char * buffer, int length)
{
  //start by looking for a vrsn
  //Header seek around for a vrns followed by 32 bit size descriptor
  //read 32 bits at a time
  int cursor = 0;
  char vrsn[5] = "vrsn";
  cursor = this->searchForMarker(cursor, length, vrsn, buffer);
  int32_t size = this->getObjectSizeForMarker(cursor, length, buffer);
  cursor = cursor + 7; //advance cursor past marker and size
  wchar_t *version = this->getObjectForSizeAndCursor(size, cursor, buffer);
  wcout << version;
  delete[] version; //this pointer is dest from getObjectForSizeAndCursor
} 
```

-

```
wchar_t* FileReader::getObjectForSizeAndCursor(int32_t size, int cursor, char *buffer) {

  int wlen = size/2;
  uint32_t *dest = new uint32_t[wlen+1];
  unsigned char *ptr = (unsigned char *)(buffer + cursor);
  for(int i=0; i<wlen; i++) {
    #if MARKUP_SIZEOFWCHAR == 4 // sizeof(wchar_t) == 4
      char padding[2] = {'\0','\0'}; 
      dest[i] =  (padding[0] << 24) + (padding[1] << 16) + (ptr[0] << 8) + ptr[1];
    #else // sizeof(wchar_t) == 2
      dest[i] = (ptr[0] << 8) + ptr[1];
    #endif
      ptr += 2;
      cout << ptr;
  }
  return (wchar_t *)dest;
} 
```

我使用填充的方式有任何范围问题吗？当我`delete dest[]`在调用函数中时，我会泄漏填充吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:01:18.987

区别

```
#if MARKUP_SIZEOFWCHAR == 4 // sizeof(wchar_t) == 4
  char padding[2] = {'\0','\0'}; 
  dest[i] =  (padding[0] << 24) + (padding[1] << 16) + (ptr[0] << 8) + ptr[1];
#else // sizeof(wchar_t) == 2
  dest[i] = (ptr[0] << 8) + ptr[1];
#endif 
```

完全没有必要。`padding[i]`是 0，所以左移保持 0，添加没有效果。

编译器可能会或可能不会在每次循环迭代中优化两字节数组的分配`padding`，但由于它是一个自动数组，它不会以任何方式泄漏。

由于循环中使用的类型是无符号的，只需使用

```
dest[i] = (ptr[0] << 8) + ptr[1]; 
```

非常安全。（字节顺序当然必须是正确的。）

为了

```
return (wchar_t *)dest; 
```

你应该让 的类型`dest`取决于 的大小`wchar_t`，它应该是`uint16_t*`if `sizeof(wchar_t) == 2`(and `CHAR_BIT == 8`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:10:35.730

你试图做的事情是行不通的。它在几个方面被打破，但让我们专注于演员阵容。

您的问题与您的代码不符。您的代码使用 a `uint32_t`，而您的问题询问 a `uint16_t`。但这没关系，因为*两者都行不通*。

如果你需要使用`wchar_t`，那么你应该实际*使用* `wchar_t`。如果您的目标是获取 a 的两个连续字节`char*`并将它们复制到 a 的前两个字节中`wchar_t`，那么就这样做。

这是您的代码的一个更好的版本，它实际上*可以工作*`char*`（在某种程度上，从 a 复制两个字节并假装它是 a是有意义的`wchar_t`）：

```
std::wstring FileReader::getObjectForSizeAndCursor(int32_t size, int cursor, char *buffer) {

  int wlen = size/2;
  std::wstring out(wlen);
  unsigned char *ptr = (unsigned char *)(buffer + cursor);
  for(int i=0; i<wlen; i++) {
    out[i] = (ptr[0] << 8) + ptr[1];
    ptr += 2;
    cout << ptr;
  }
  return out;
} 
```

另外，由于我们使用了适当的 RAII 类，例如`std::wstring`.

# import - 如何在 TypeScript 中导入 JavaScript 模块

> ID：12771258
> 
> 赞同：3
> 
> 时间：2012-10-07T17:47:34.913
> 
> 标签：import, typescript

我有一些 JavaScript 代码正在尝试转换为 Typescript。

据说，typescript 是 JavaScript 的超集，除了以下有编译器错误。假设我没有将 ko 库导入打字稿，我将如何转换以下代码：

```
(function(ko, viewModels){
    viewModels.MyViewModel = function(){
        //stuff in here
    }
}(ko, window.viewModels = window.viewModels || {})); 
```

作为参考，这是我在 TypeScript 中的尝试

```
module viewModels {

    export class PartDetailsViewModel {
        public bar: string;
             constructor (){
                 this.bar = ko.foo(); //<-- compiler error, "ko" does not exist in current scope
             }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T18:24:00.557

查看 TypeScript 的“环境声明”，它允许您声明将在运行时提供的外部成员。因此，在您的示例中，添加以下内容将使编译器满意：

```
declare var ko; 
```

顺便说一句，我还想在这篇文章中指导您：[https ://stackoverflow.com/a/12692174/806003](https://stackoverflow.com/a/12692174/806003)

Sten 提供了一个基本的敲除接口，以便您可以在声明中指定一个类型以获取一些静态类型。在评论中也发现了这一点：[https ://gist.github.com/3833509](https://gist.github.com/3833509)

# variables - Powershell 外部程序作为变量

> ID：12771259
> 
> 赞同：1
> 
> 时间：2012-10-07T17:47:38.990
> 
> 标签：variables, powershell

我刚开始使用powershell。并创建了一个脚本来监控我的服务器。但是，我还需要从我的服务器监控我的硬盘和 RAID 配置。这只能通过 HP 的软件来完成。

所以我想要的是：
我有一个来自 HP 的命令行实用程序，我可以用它来监控阵列和磁盘。当我启动这个实用程序时，我得到了这个：

```
PS C:\Program Files (x86)\Compaq\Hpacucli\Bin> .\hpacucli.exe controller slot=3 physicaldrive "1I:0:1 (port 1I:box 0:bay  1, 750 GB)" show status | out-host 
physicaldrive 1I:0:1 (port 1I:box 0:bay 1, 750 GB): OK 
```

我只想将此输出作为变量在我的脚本中进一步使用。

如何才能做到这一点。

我试过了：

```
$disk1 = "c:\program files (x86)\Compaq\hpacucli\bin\hpacucli.exe controller slot=3 physicaldrive "1I:0:1 (port 1I:box 0:bay  1, 750 GB)" show status | out-host" 
```

但这不起作用

所以我只想拥有`physicaldrive 1I:0:1 (port 1I:box 0:bay 1, 750 GB): OK`变量。

我希望有一个人可以帮助我。所以我可以进一步学习使用powershell。

已经谢谢了。丹尼斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:56:32.323

摆脱`out-host`cmdlet，因为它正在消耗 exe 的输出，例如：

```
$disk1 = .\hpacucli.exe controller slot=3 physicaldrive "1I:0:1 (port 1I:box 0:bay 1, 750 GB)" show status 
```

使用 PowerShell，请记住，只要您调用管道并且有输出，它将转到输出流，在那里它可以由变量（如上）捕获，或者如果未捕获输出，则显示在屏幕上。当您通过管道传输到 时`Out-Host`，它会绕过正常输出并将输入“直接”显示到屏幕上。这就是为什么您无法将数据捕获到变量中的原因。

在函数中，这与传统语言有点不同，因为每条产生输出但未被捕获到变量（或重定向到 $null）的语句都将为该函数产生输出。当函数返回超出预期时，许多首次使用 PowerShell 的用户可能会感到惊讶。有关更多详细信息，请查看[此 SO 问题的已接受答案](https://stackoverflow.com/questions/2158786/calling-echo-inside-a-function-pre-pends-echo-string-to-return-value-in-powershe)。

# sql - 从 SQL Server 调用外部函数

> ID：12771263
> 
> 赞同：2
> 
> 时间：2012-10-07T17:48:08.413
> 
> 标签：sql, sql-server, sql-server-2008-r2

菜鸟在这里，如果这是一个愚蠢的问题，请提前抱歉。

我正在使用 SQL Server Management Studio 2008 R2。

我需要在 SQL 中实现一个反向 beta 函数。（你传入一个 alpha、beta 和概率，结果是一个 x 值。）SQL 没有内置这个函数，所以我需要：

1.  购买一个我不会充分利用的昂贵的数学包，或者
2.  调用外部程序为我进行计算。

我的问题是：我该怎么做 (B) ？是否可以从 SQL 调用 R 中的函数？或者也许是 c# 或 PHP？我用谷歌搜索了一下，似乎找不到任何关于调用外部函数的好文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:52:58.063

No, you can't call a function in another language (like R) directly from MSSQL.

Yes, you *can* write some managed code that you can call from MSSQL, and which should, in turn, be able to call your R function.

*   [http://msdn.microsoft.com/en-us/library/ms254498%28v=VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms254498%28v=VS.80%29.aspx)

If you were to consider this, you *definitely* want to look at R.Net:

*   [http://rdotnet.codeplex.com/](http://rdotnet.codeplex.com/)

# php - 做while循环不起作用，只显示一个结果

> ID：12771264
> 
> 赞同：0
> 
> 时间：2012-10-07T17:48:16.553
> 
> 标签：php, sql, loops, while-loop, do-while

在 do wile 循环不循环时遇到了一些问题。目前在 SQL 中应该返回 2 个结果，但它只显示一个。

**SQL。- 它应该找到的两个结果**

```
array('bid'=>4,'bname'=>'fdsfsdaf','section'=>'Network','btype'=>'Activity','breq'=>'fdsfsd','bnotes'=>'fdsfdsf','image'=>'Badges/Network/2inchsquare.png'),
  array('bid'=>3,'bname'=>'Test','section'=>'Network','btype'=>'Activity','breq'=>'dfsfds','bnotes'=>'fsdfs','image'=>'Badges/Network/2inchsquare.png')
); 
```

**我的 PHP**

```
<?php
require_once('inc/global.php');
include('inc/auth.php');
mysql_select_db($dbname, $db);
$sql = "SELECT * FROM badges WHERE section = 'Network'";
$result = mysql_query($sql, $db) or die(mysql_error());
$bnetwork = mysql_fetch_assoc($result);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Admin</title>
<link href="css/admin.css" type="text/css" rel="stylesheet" media="screen,projection" />
</head>
<body>
<div id="listtable">

<table class="contacts">
        <tr>
            <td class="contactDept" width="20%">Badge Name</td>
            <td class="contactDept" width="20%">Section</td>
            <td class="contactDept" width="20%">Badge Type</td>
            <td class="contactDept" width="20%">Pic</td>
            <td class="contactDept" width="10%">Edit</td>
            <td class="contactDept" width="10%">Del</td>
        </tr>
</table>
<?php do { ?>       
        <ul>
            <li class="badgeName"><?php echo $bnetwork['bname']; ?></li>
            <li class="badgeSection"><?php echo $bnetwork['section']; ?></li>
            <li class="badgeType"><?php echo $bnetwork['btype']; ?></li>
            <li class="badgePic"><img src="<?php echo $bnetwork['image'];?>" width="30px" height="30px"></li>
            <li class="badgeEdit"><a href="#">Edit</a></li>
            <li class="badgeDel"><a href="#">Del</a></li>
        </ul>

<?php } while($bnetwork = mysql_fetch_assoc($result)); ?>
</div>
</body>
</html> 
```

我知道该表不应该在**LI**标签中，我只是在尝试以防万一它由于某些未知原因不喜欢**TD标签。**请告诉我你是否能弄清楚为什么它只显示一个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:59:42.367

while 循环应该足够。你也不需要 echo 和 ';' 仅在 HTML 中显示变量时。当它紧跟一个开始的 php 标记时，您可以只使用 '=' 来表示回显。我希望这有帮助。

```
<? while($n = mysql_fetch_assoc($result)) { ?>
        <ul>
            <li class="badgeName"><?=$n['bname']?></li>
            <li class="badgeSection"><?=$n['section']?></li>
            <li class="badgeType"><?=$n['btype']?></li>
            <li class="badgePic"><img src="<?=$n['image']?>" width="30px" height="30px"></li>
            <li class="badgeEdit"><a href="#">Edit</a></li>
            <li class="badgeDel"><a href="#">Del</a></li>
        </ul>
<? } ?> 
```

# javascript - Backone、Ajax 和 Restful JSON 服务

> ID：12771267
> 
> 赞同：3
> 
> 时间：2012-10-07T17:48:50.060
> 
> 标签：javascript, json, backbone.js, jsonp

> **可能重复：**
> [jQuery - 如何消除跨域限制](https://stackoverflow.com/questions/11299438/jquery-how-to-remove-cross-domain-limitation)

我目前正在开发基于 Backbone.js 的单页应用程序。我还有一个远程 RESTful 服务，它使用 JSON-Results 来回答（此服务无法更改..）。

显然问题是我无法在我的 SPA 中使用 rest-service，因为它不支持 JSONP。

我遇到的问题是：这是否意味着我的 SPA 无法使用 restful 服务，除非它将其应答格式更改为 JSONP？或者是否有某种我还没有找到的解决方法。

谢谢

编辑：我发现了一篇非常有趣的帖子，涵盖了我的问题。

[jQuery - 如何消除跨域限制](https://stackoverflow.com/questions/11299438/jquery-how-to-remove-cross-domain-limitation)

# c# - 每行换行而不是每个字符？

> ID：12771271
> 
> 赞同：2
> 
> 时间：2012-10-07T17:49:52.087
> 
> 标签：c#, string, loops, serial-port, grasshopper

从变量中的串行端口接收的数据**`myReceivedLines`**（下面的代码）显示每个字符的新行，而不是每个“句子”的逐行显示。

有没有办法让“句子”出现在单独的行上而不是字符上？

```
 //Fields
    string myReceivedLines;

    //subscriber method for the port.DataReceived Event
    private void DataReceivedHandler(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
        SerialPort sp = (SerialPort)sender;
        myReceivedLines = sp.ReadExisting();
    }

    protected override void SolveInstance(IGH_DataAccess DA)
    {

        List<string> gcode = new List<string>();
        DA.GetDataList(0, gcode);
        string selectedportname = default(string);
        DA.GetData(1, ref selectedportname);
        int selectedbaudrate = default(int);
        DA.GetData(2, ref selectedbaudrate);
        bool connecttodevice = default(bool);
        DA.GetData(3, ref connecttodevice);

        SerialPort port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One); //Create the serial port
        port.DtrEnable = true;   //enables the Data Terminal Ready (DTR) signal during serial communication (Handshaking)

        port.Open();             //Open the port

        if ((port.IsOpen) && (connecttodevice == true))
        {
            port.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);
            DA.SetDataList(0, myReceivedLines);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:29:07.173

假设您输入的内容包含换行符，请使用[ReadLine](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.readline.aspx)来实现。请注意，如果您没有设置正确的`ReadTimeout`. 我将设置`ReceivedBytesThreshold`为预期的平均线长度，并将我的线存储在适合我需要的任何集合中。

```
//Fields
List<string> myReceivedLines;

//subscriber method for the port.DataReceived Event
private void DataReceivedHandler(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
    SerialPort sp = (SerialPort)sender;
    while(sp.BytesToRead > 0)
    {
        try 
        {
            myReceivedLines.Add(sp.ReadLine());
        }
        catch(TimeOutException) 
        {
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:10:41.377

我建议您首先通过 Wireshark 检查数据是否真的以您假设的格式发送，这样您就可以确定它不是编码问题。
[该程序](https://bacnet.svn.sourceforge.net/svnroot/bacnet/trunk/bacnet-stack/demo/mstpcap/main.c)允许您记录数据，以便您可以在 Wireshark 中检查它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T09:19:25.623

查看为握手启用 Xon/Xoff 是否有帮助。

更新：

这是调整握手方法的属性。DTR（RequestToSend）比较常见：

```
serPort.Handshake = Handshake.XOnXOff
serPort.Handshake = Handshake.RequestToSendXOnXOff
serPort.Handshake = Handshake.RequestToSend 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T15:21:35.543

尝试 .ReadLine() 而不是 .ReadExisting() 这应该读到新行

或者您可以设置一个循环以将每个字符添加到字符串中，直到您找到表示新行所需的任何内容，因为您在这里说过句子，您可以检查一段时间

```
private void DataReceivedHandler(object sender,System.IO.Ports.SerialDataReceivedEventArgs e)
{
    SerialPort sp = (SerialPort)sender;
    String s=sp.ReadExisting();
    while(s != ".")
    {
        myReceivedLines += s;
        s=sp.ReadExisting();
    }
} 
```

# android - 在 Android 上通过 HTML 文件上传将图像上传到服务器

> ID：12771272
> 
> 赞同：1
> 
> 时间：2012-10-07T17:49:58.237
> 
> 标签：android, html, cordova, file-upload

我正在尝试为某些站点开发一个移动应用程序，该应用程序使用 HTML 表单进行数据传输。目前我正在为 Android 开发，但这个应用程序也应该在 iOS 和 WP7 上（这就是我选择 PhoneGap 的原因）。

我使用的表单有`<input type="file">`标签，我应该通过它传递图像本身，因为我无法访问服务器部分。

我试过的：

1.  使用`<input type="file">`表单上的标签，但不会打开文件选择器对话框。
2.  使用 PhoneGap 方法获取 base64 格式的图像并将其附加到表单参数，但服务器无法将它们识别为有效文件。为了实现这一点，我正在使用下一个功能：

    ```
    function fileUpload (url, fileData, fileName) {

    var fileSize = fileData.length,
        boundary = "12352134",
        xhr = new XMLHttpRequest();

    xhr.open("POST", url, true);
            // simulate a file MIME POST request.
    xhr.setRequestHeader("Content-Type", "multipart/form-data, boundary="+boundary);
    xhr.setRequestHeader("Content-Length", fileSize);

    var body = "--" + boundary + "\r\n";
    body += 'Content-Disposition: form-data; name="imagen"; filename="' + fileName + '"\r\n';
    body += "Content-Type: image/jpeg\r\n\r\n";
    body += fileData + "\r\n";
    body += "--" + boundary + "--";

    xhr.send(body);
    return true; 
    ```

    }

我不能使用 Ajax 来传递图像，因为我无法访问表单并且所有数据都必须是完整的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:07:26.453

input[type=file] 不会在所有设备上一致地工作。版本 6 以下的 iOS 设备根本不支持它。但是，PhoneGap 确实允许您访问文件系统。您可以提供另一种选择文件的方式。请参阅文件系统文档：[http ://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#File)

这些也讨论了 FileTransfer 对象。这将允许您上传文件。

# c++ - Heap corruption from memory allocation using malloc: why did it happen?

> ID：12771276
> 
> 赞同：0
> 
> 时间：2012-10-07T17:50:31.173
> 
> 标签：c++, c, pointers, memmove

Ok, I was trying to implement memmove just as a programming exercise, and I get a memory access violation in the memmove function when I try to use malloc. Here is the function:

```
//Start

void* MYmemmove (void* destination, const void* source, size_t num) { 

    int* midbuf = (int *) malloc(num); // This is where the access violation happens.
    int* refdes = (int *) destination; // A pointer to destination, except it is casted to int*
    int* refsrc = (int *) source; // Same, except with source
    for (int i = 0;num >= i;i++) { 
        midbuf[i] = *(refsrc + i); // Copy source to midbuf
    }
    for (int i = 0;num >= i;i++) { 
        refdes[i] = *(midbuf + i); // Copy midbuf to destination
    } 
    free(midbuf); // free midbuf 
    refdes = NULL; // Make refdes not point to destination anymore
    refsrc = NULL; // Make refsrc not point to source anymore
    return destination;
} 
```

By the way, I am sort of a newbie to pointers, so don't be suprised if there is some mistakes. What am I doing wrong?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T18:01:56.753

请注意其他建议！答案取决于您的 memmove 将如何使用。其他答案表明您应该更改 malloc 调用以考虑 int 的大小。但是，如果您的 memmove 函数将用于表示“移动此*字节*数”，那么实现将是错误的。我会改为使用 char* ，因为它可以一次性解决几个问题。

此外，an`int`通常为 4 个字节，`char`通常为 1 个字节。如果`void*`您收到的地址不是字对齐的（不是 4 字节的倍数），您将遇到问题：要复制一个非字对齐的 int，您将不得不进行多次读取和昂贵的位掩码。这是低效的。

最后，内存访问冲突发生了，因为您每次都在增加 midbuf`int`指针，并且一次向前移动*4 个字节*。但是，您只分配了 num *bytes*，因此最终会尝试访问超出分配区域的末尾。

```
/** Moves num bytes(!) from source to destination */
void* MYmemmove (void* destination, const void* source, size_t num) { 

    // transfer buffer to account for memory aliasing
    // http://en.wikipedia.org/wiki/Aliasing_%28computing%29
    char * midbuf = (char *) malloc(num); // malloc allocates in bytes(!)
    char * refdes = (char *) destination;
    char * refsrc = (char *) source;

    for (int i = 0; i < num; i++) { 
        midbuf[i] = *(refsrc + i); // Copy source to midbuf
    }

    for (int i = 0; i < num; i++) { 
        refdes[i] = *(midbuf + i); // Copy midbuf to destination
    } 

    free(midbuf); // free midbuf
    // no need to set the pointers to NULL here.
    return destination;
} 
```

通过逐字节复制，我们避免了对齐问题，以及 num 本身可能不是 4 个字节的倍数的情况（例如 3，因此 int 对于该移动来说太大了）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T17:54:05.703

Replace the string with malloc with this one:

```
int* midbuf = (int *) malloc(num*sizeof(int)); 
```

The problem is that you allocated not `num` elements of int but `num` bytes.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T17:54:26.490

```
int* midbuf = (int *) malloc(num); // This is where the access violation happens.
int* refdes = (int *) destination; // A pointer to destination, except it is casted to int*
int* refsrc = (int *) source; // Same, except with source
for (int i = 0;num >= i;i++) { 
    midbuf[i] = *(refsrc + i); // Copy source to midbuf
} 
```

You `malloc` only `num` bytes, but in the loop, you try to copy `num` `int`s. Since an `int` usually takes more than one byte, you're accessing out of bounds.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T17:54:04.523

memory access violation?

You are trying to access memory you are not entitled to access. Maybe you have a null pointer or the pointer is pointing into another program or the code segment.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T17:55:00.933

The problem is that you're mallocing `num` bytes into `midbuf`, and then copying `num` ints into it. Since an `int` is larger than a byte on most platforms, you have a problem. Change your `malloc` to `num*sizeof(int)` and you won't have that problem.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-07T18:06:33.897

有两个问题需要看

**1\. 内存空间**

（前提是按照问题建议`MYmemmove`进行自定义实现移动）`ints`

```
 int* midbuf = (int *) malloc(num * sizeof(int)); 
```

`malloc`是基于字节的，将分配*num*个字节。`int *`是指向 的指针`ints`。意思`midbuf[x]`是将从中访问内存`midbuf + sizeof(int)*x`。您想分配*num* `ints`（int 的大小取决于体系结构，通常为 4 或 2 个字节）。因此`malloc(num * sizeof(int))`.

**2.数组索引**

```
 for (int i = 0;num > i;i++) { 
```

在 C（和 C++）中，数组是从 0 开始的，即第一个索引是`0`. 你做对了。但这也意味着如果你保留*num* `ints`，可用的索引将是 from `0`to `num-1`。在您的循环中，由于 condition 的原因，`i`它将从`0`to变化，这意味着您将访问项目。所以（或）会是一个更好的条件。`num``num >= i``num+1``num > i``i < num``for`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-07T18:01:53.697

```
#include <stdlib.h>  // did you included this?

void* MYmemmove (void* destination, const void* source, size_t num) { 

    char *Source = source, *Destination = destination;
    char *Middle = malloc( sizeof(char) * num );    // midbuf

    for (int i = 0; i < num ; i++) { 
        Middle[i] = Destination[i]; // Copy source to midbuf
    }
    for (int i = 0; i < num ; i++) { 
        Destination[i] = Middle[i]; // Copy midbuf to destination
    }

    free(Middle);                   // free memory allocated previously with malloc
    return destination;
} 
```

可能会发生访问冲突，因为您没有包含 malloc 所需的库（如果您忘记了函数定义，标准 c 不会在您的脸上抛出错误）。您不需要将指针标记为 NULL，因为 C 中没有垃圾收集（指针就是这样 - 指针。指向内存中某个点的地址，而不是内存本身）。

想想像这样的指针

指针地址 0x1243 0x4221 目的地 -> {某种数据}

Destination = 0x1243 *Destination = 当前地址 0x4221 处的任何值

您也不能索引 void 指针。您必须首先将它们转换为某种类型，以便编译器知道它们需要多少偏移量。

目的地[x] = *(目的地+x)

char 是 1 个字节，所以 char 指针实际上会移动 x 个字节，但 int 是 4 个字节，而 int 指针将移动 4*x 个字节。如果这听起来很技术性，请不要太担心，当您达到非常低的水平时，它会很重要；）

# android - Different background color for different keys on android softkeyboard

> ID：12771279
> 
> 赞同：3
> 
> 时间：2012-10-07T17:51:01.043
> 
> 标签：android, android-softkeyboard

I have used "Android Icon Set" (in eclipse), which has created different size icons in various drawable folders. Now when I am setting this icon using following code:

```
<Key android:codes="49" android:keyIcon="@drawable/my1" android:keyWidth="7%p"/> 
```

Icon is not taking the full keysize, it is coming in center for some devices and coming outside the key in other devices. I need to fix this urgently please guide me. My main requirement is that I want certain different color keys on my custom keyboard (based on samplesoft keyboard), as it is difficult to change key background I am using images and now images are not occupying full space.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-14T12:46:37.770

我实际上只是自己遇到了这个问题。不幸的是，我得出的结论是，为了让它工作的努力，我最好忽略 KeyboardView 而只是使用按钮构建我自己的。KeyboardView 不提供任何非常有价值的东西，通过构建您自己的，您可以获得完全的控制权。

查看 android 内置键盘的源代码[https://android.googlesource.com/platform/packages/inputmethods/LatinIME/](https://android.googlesource.com/platform/packages/inputmethods/LatinIME/)我看到谷歌已经重新实现了他们自己的 KeyboardView，它支持不同的背景颜色以及许多其他功能。如果我的键盘需求很复杂，我会考虑从 LatinIME 项目中提取相关代码并重新使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-14T01:51:41.950

如果您厌倦了寻找解决方案。你必须像我一样尝试用你自己的逻辑覆盖你的 KeyboardView 的 onDraw() 。

```
public class MyKeyboardView extends android.inputmethodservice.KeyboardView {

    Context context;
    public MyKeyboardView(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
        this.context = context ;
    }

    @Override
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        Paint paint = new Paint();
        paint.setTextAlign(Paint.Align.CENTER);
        paint.setTextSize(25);
        paint.setColor(Color.RED);

        List<Key> keys = getKeyboard().getKeys();
        for(Key key: keys) {

     if(key.pressed){
                NinePatchDrawable npd = (NinePatchDrawable)context.getResources().getDrawable(R.drawable.glow);
                npd.setBounds(key.x,key.y,key.x+key.width,key.y+key.height);
                npd.draw(canvas);
            if(key.label != null)
                canvas.drawText(key.label.toString(), key.x + (key.width/2), key.y + 25, paint);
     }else if(key.modifier){  // boolean that defines key is function key

            NinePatchDrawable npd = (NinePatchDrawable)context.getResources().getDrawable(R.drawable.btn_keyboard_special);
            npd.setBounds(key.x,key.y,key.x+key.width,key.y+key.height);
            npd.draw(canvas);
            if(key.label != null)
                canvas.drawText(key.label.toString(), key.x + (key.width/2), key.y + 25, paint);
      }

        break;
        }
    } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-08-14T10:53:01.387

你不能使用这样的颜色：

在文件夹`drawable`中，创建`key_diff.xml`，其中应包含：

```
<?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
      <solid android:color="#AABBCC"/> 
    </shape> 
```

例如，为普通键 ( `keys_norm.xml`) 创建第二个形状：

```
<?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
      <solid android:color="#0000CC"/> 
    </shape> 
```

在您的情况下，我认为困难的是控制drawabe的大小，以防它是图像（还考虑到“容器”具有固定的比例大小并且无法控制它的bg）。

# css - Overlay divs on scroll

> ID：12771281
> 
> 赞同：4
> 
> 时间：2012-10-07T17:51:29.277
> 
> 标签：css, html, positioning, z-index

Instead of scrolling down the page to view a bunch of divs, I would like them to overlay in the same place-- one stacked on top the next -- when you scroll. So, you would scroll down, but the page would not go down. Instead, the next div would overlay the first and so on and so forth. Not sure how to do this? Here is what I have:

***UPDATE***

```
.container {
    width:100%;
    height:100%;
    position:relative;

}

.container1 {
    display:block;
    position:fixed;
    margin-top:690px;
    width:100%;
    height:500px;
    z-index:1;
    background:#333;

  }

.container2 {
    display:block;
    position:absolute;
    margin-top:1190px;
    width:100%;
    height:500px;
    z-index:2;
    background:#F00;
}

<div class="container">

<div class="container1">
info
</div>

<div class="container2">
info
</div>
</div> 
```

This adjustment is working, but the bottom div (container1) is not 500px, but set to the size of the screen. I'm sure this is a simple adjustment to the code, but I am stumped.

Thanks for any help!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T20:14:33.640

这是一个概念证明，虽然有效，但确实需要跨浏览器进行测试（但我相信它可以在任何地方工作）并稍微改进。

这个想法是使用 JavaScript 来监视窗口的滚动位置并相应地修复适当的内容面板，从而在滚动查看时产生新内容与其重叠的错觉。

[http://jsfiddle.net/amustill/wQQEM/](http://jsfiddle.net/amustill/wQQEM/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-08T15:32:41.590

为了仅使用 CSS 实现视差效果，您需要做的就是使用 CSS`background-attachment`属性并将其设置为`fixed`并添加`min-height`

```
.parallax {
    /* The image used */
    background-image: url("img_parallax.jpg");

    /* Set a specific height */
    min-height: 500px; 

    /* Create the parallax scrolling effect */
    background-attachment: fixed;
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
   } 
```

查看此链接：
[https ://www.w3schools.com/howto/tryhow_css_parallax_demo.htm](https://www.w3schools.com/howto/tryhow_css_parallax_demo.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T18:04:09.310

使用位置固定而不是绝对位置：

```
.container1 {
    position: fixed;
    z-index: 1;
}
.container2 {
    position: fixed;
    z-index: 2;
} 
```

# c - “从非宽字符串初始化的宽字符数组”是什么意思，如何在 C 中更正它？

> ID：12771292
> 
> 赞同：1
> 
> 时间：2012-10-07T17:53:15.633
> 
> 标签：c, arrays, string

我正在尝试制作一个程序来显示用户订购的杂货。它会将数据写入另一个文件（完成后），并显示每个食物组的平均值。它是这样的：

```
#include<stdio.h>

int main()
{
    int beverage[3][20] = {
        "Soda"
        "Water"
        "Coffee"
    }; /* Here is 9 */
    int produce[3][20] = {
        "Apple"
        "Carrot"
        "Banana"
    }; /* Here is 14 */
    int dairy[3][20] = {
        "Milk"
        "Yogurt"
        "Cheese"
        }; /* Here is 19 */
    int dessert[3][20] = {
        "Ice Cream"
        "Cake"
        "Chocolate"
    }; /* Here is 24 */
    int meat[3][20] = {
        "Chicken"
        "Seafood"
        "Beef"
    }; /* Here is 29 */
    int grain[3][20] = {
        "Bread"
        "Muffin"
        "Cereal"
    }; /* Here is 34 */

    printf("Beverages: %p\n ", beverage[1]);
    printf("Produce: %p\n ", produce[2]);
    printf("Dairy: %p\n ", dairy[0]);
    printf("Candy: %p\n ", dessert[0]);
    printf("Meat: %p\n ", meat[2]);
    printf("Grain: %p\n ", grain[1]);

    return 0;
} 
```

它在第 9、14、19、24、29 和 34 行显示错误消息“从非宽字符串初始化的宽字符数组”。那么，错误消息对我的代码意味着什么？如何更改它以及在哪里更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T17:54:45.600

如果您想要的是字符串列表（我假设这是您想要的）。您应该使用`char`而不是`int`：

```
char beverage[3][20] = {
    "Soda",
    "Water",
    "Coffee"
}; 
```

# javascript - 在表单中使用 JavaScript 计算，输出到动态字段，代码不起作用

> ID：12771308
> 
> 赞同：1
> 
> 时间：2012-10-07T17:55:31.230
> 
> 标签：javascript, forms

目标：这块 js，旨在获取输入到表单中的字段的值，将它们分配给变量，然后执行计算，输出到该页面上的字段中。

有一个简短的函数表示如果任何变量未定义或为空，则将输出设置为未知。

我的代码：

```
function calculate() {
    var $u5pop = $('input[name=sv_21d]').val();
    var $sam = $('input[name=sv_25d]').val();
    var $incidence = $('input[name=sv_313]').val();
    var $treated = $('input[name=sv_312]').val();

    if ($u5pop == undefined ||$u5pop == '') {
        $u5pop = 0;
    }
    else {
        $u5pop = parseFloat($u5pop);
    }

    if ($sam == undefined ||$sam == '') {
        $sam = 0;
    }
    else {
        $sam = parseFloat($sam);
    }

    if ($incidence == undefined || $incidence == '') {
        $incidence = 0;
    }
    else {
        $incidence = parseFloat($incidence);
    }
    //
    if ($treated == undefined || $treated == '') {
        $treated = 0;
    }
    else {
        $treated = parseFloat($treated);
    }

    var $determined = $u5pop / $incidence * $treated * $sam;

    if ($determined == undefined || $determined == '') {
        $determinedOut = 'Unknown';
    }
    else {
        $determinedOut = parseFloat($determined);
    }

    $('#calculation').attr('value', $determinedOut.toFixed(2));
} 
```

输出字段 div #calculation 是：

```
<input size="18" class="calculation" id="calculation" value="Click to calculate" onfocus="calculate()"/> 
```

这样当用户在该字段内单击时，它会执行计算。

我认为这是一个结构/语法问题，但对我来说一切都很好。任何有经验的人都能看到我在这里出错的地方吗？目前：没有任何反应（默认值保持不变）。

非常感谢！

编辑：只要填写了所有字段，它就可以完美地工作，但是如果字段为空并且该函数由 onfocus 调用，它将无法输出“未知”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T18:04:47.027

看到这个[jsFiddle](http://jsfiddle.net/Lgpku/1/)。代码最初无法更改输入值，直到我将 JS 函数移到 HTML 上方。也许这是你的问题！？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:22:06.073

在其他答案中查看 jsFiddle。如果`$u5pop`OR `$sam`OR`$treated`更改为 0 则没有结果

如果`$incidence`更改为 0，则答案是无穷大。（除以零）

默认值应该是 = 1 NOT = 0

```
if ($u5pop == undefined ||$u5pop == '') {
    $u5pop = 1;
}
else {
    $u5pop = parseFloat($u5pop);
}

if ($sam == undefined ||$sam == '') {
    $sam = 1;
}
else {
    $sam = parseFloat($sam);
}

if ($incidence == undefined || $incidence == '') {
    $incidence = 1;
}
else {
    $incidence = parseFloat($incidence);
}
//
if ($treated == undefined || $treated == '') {
    $treated = 1;
} 
```

# mysql - 如何对 MySQL 表列进行子串化

> ID：12771311
> 
> 赞同：55
> 
> 时间：2012-10-07T17:55:52.377
> 
> 标签：mysql, database

我想从表中选择一个字段并将其子串化。

例如：

```
VAN1031 --> 1031 
```

我试过这个，但语法不正确：

```
SELECT SUBSTR(R.regnumber,3,3) from registration R 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-07T17:58:23.723

如果要选择特定索引右侧的所有字符，则不需要第三个参数（长度）：

```
SELECT SUBSTR(R.regnumber, 4)
FROM registration AS R 
```

我还将起始索引更改为 4，因为在 SQL 中，字符串是 1 索引而不是 0 索引，因为它们在许多流行的编程语言中都是如此。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-10-07T18:18:49.653

您可以使用：

```
SUBSTR(string,position)
SUBSTR(string,position,length)
SUBSTRING_INDEX(string, delimiter, count) 
```

例子：

```
command                                      prints
-------------------------------------------  -----------
select substr("abcd", 1, 1)                  #a
select substr("abcd", 1, 2)                  #ab
select substr("abcd", 2, 1)                  #b
select substr("abcd", 2, 2)                  #bc
select substr("abcd", -2, 1)                 #c
select substr("abcd", -2, 2)                 #cd

select substring_index('ababab', 'b', 1);    #a
select substring_index('ababab', 'b', 2);    #aba
select substring_index('ababab', 'b', 3);    #ababa
select substring_index('ababab', 'b', -1);   #
select substring_index('ababab', 'b', -2);   #ab
select substring_index('ababab', 'b', -3);   #abab

select substr("abcd", 2)                     #bcd
select substr("abcd", 3)                     #cd
select substr("abcd", 4)                     #d
select substr("abcd", -2)                    #cd
select substr("abcd", -3)                    #bcd
select substr("abcd", -4)                    #abcd 
```

从[这个链接](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_substring-index)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-07T17:59:57.123

您可以使用[`SUBSTRING()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring)：

```
select substring(col1, 4)
from table1 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/dbca0/2)。所以你的查询是：

```
SELECT substring(R.regnumber,4) 
from registration R 
```

如果要指定要返回的字符数：

```
select substring(col1, 4, 4)
from table1 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-08T08:49:44.727

我注意到 mysql 索引从 1 开始，而不是像许多编程语言那样从零开始。

```
SELECT SUBSTRING(R.regNumber,1,3) FROM registration AS R 
```

返回 VAN 和

```
SELECT SUBSTRING(R.regNumber,4) FROM registration AS R 
```

将字符串的剩余部分返回为 1031

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-03T20:19:25.907

```
SELECT substring(R.regnumber FROM 4) FROM registration AS R; 
```

如果您想将该部分作为整数而不是字符串，您可以编写：

```
SELECT CAST(substring(R.regnumber FROM 4) AS UNSIGNED) FROM registration as R; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-22T13:14:41.743

有时您需要在没有最后一个字符的情况下捕获列。例如，我有：

```
This is a string 
```

假设由于某种原因我想要没有最后 6 个字符的列：

```
This is a 
```

我们可以这样做（使用@bluefeet 的答案和 LENGHT）：

```
select substring(col1, 1,LENGTH(col1)-7)
from table1 
```

这只是一个例子，但你明白了，我用来修复错误的数据库导入。

# javascript - 使用动画Jquery导航到当前div下方或上方的div？JavaScript？

> ID：12771313
> 
> 赞同：0
> 
> 时间：2012-10-07T17:56:28.520
> 
> 标签：javascript, jquery, button, html, find

我有一个网站，我已经做到了，所以每个页面都垂直低于/高于对方。在同一页上。我想在屏幕的顶部和底部放置一些箭头按钮，所以一旦你点击它，它要么动画到它上面的 div（如果你点击屏幕顶部的按钮）或者动画到 div在它下面（如果你点击底部的按钮。）

我在每个 div 上使用了一个最小高度 100% 的类，目前有三个 div。

我觉得这应该不是太难的事情。如果你能帮助我，那就太好了。谢谢你。

我做了一张小图片，以帮助更具描述性。应该让您对我正在寻找的东西有一个完整的想法。;) [http://i45.tinypic.com/s49ugw.jpg](http://i45.tinypic.com/s49ugw.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:57:05.950

```
<script type="text/javascript">
$(function() {

    function scroll(direction) {

        var scroll, i,
                positions = [],
                here = $(window).scrollTop(),
                collection = $('.part');

        collection.each(function() {
            positions.push(parseInt($(this).offset()['top'],10));
        });

        for(i = 0; i < positions.length; i++) {
            if (direction == 'next' && positions[i] > here) { scroll = collection.get(i); break; }
            if (direction == 'prev' && i > 0 && positions[i] >= here) { scroll = collection.get(i-1); break; }
        }

        if (scroll) {
            $.scrollTo(scroll, {
                duration: 350       
            });
        }

        return false;
    }

    $("#next,#prev").click(function() {        
        return scroll($(this).attr('id'));        
    });

    $(".scrolltoanchor").click(function() {
        $.scrollTo($($(this).attr("href")), {
            duration: 350
        });
        return false;
    });

});
</script> 
```

# winapi - 使用 DirectShow 在 Windows Embedded Compact 7 上同时播放多个视频

> ID：12771314
> 
> 赞同：1
> 
> 时间：2012-10-07T17:56:28.813
> 
> 标签：winapi, video, windows-ce, directshow, windows-embedded-compact

您好，过去几天我一直在苦苦挣扎，使用简单的应用程序可以为不同视频流的同时视频播放创建多个预览（但在示例 mpeg4 中格式相同）。在我的平台上没有 Xaml 运行时，所以我使用带有 DirectShow 的简单 WinApi32 函数。

但无论我做什么，我都无法同时播放多个视频流。我现在怀疑是否可以在 Windows Embedded Compact 上使用 DirectShow。但也许我错了，因为我没有详细介绍创建过滤器图的细节。

我的方法是简单地创建几个**IBuilderGraph**、**IMediaControl**和**IMediaEventEx**接口。然后我为每个图形构建器使用**RenderFile**方法来创建过滤器图形，然后为每个集合通知窗口创建**IVideoWindow**并使用**IMediaControl::Run**开始播放文件。

这适用于桌面 windows 7 平台，但根本不适用于 CE。只有一个预览实际上正在播放视频流，而其他预览是黑色的，不显示任何内容。

所以我的问题是“**这可能在 Windows Embedded Compact 7 上播放多个视频吗？** ”如果是，请解释我可以使用什么工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-03-03T05:43:25.330

微软官网有说明 [https://docs.microsoft.com/en-us/windows/win32/api/control/nn-control-ivideowindow](https://docs.microsoft.com/en-us/windows/win32/api/control/nn-control-ivideowindow) IVideoWindow 接口（control.h）

IVideoWindow 接口设置视频窗口的属性。应用程序可以使用它来设置窗口所有者、窗口的位置和尺寸以及其他属性。

注意 IVMRWindowlessControl 或 IVMRWindowlessControl9 接口现在优先于 IVideoWindow。有关详细信息，请参阅使用无窗口模式。

Video Renderer 过滤器和 Filter Graph Manager 都公开了这个接口。Filter Graph Manager 将所有方法调用转发到 Video Renderer。它还转发视频渲染器需要接收的某些窗口消息，例如 WM_DISPLAYCHANGE。因为视频窗口通常是应用程序窗口的子窗口，所以过滤器不会收到这些消息。因此，它依赖于 Filter Graph Manager 来转发它们。在大多数情况下，由于刚刚描述的消息传递问题，应用程序应该查询过滤器图形管理器以获得此接口，而不是直接调用过滤器。但是，如果过滤器图具有多个 Video Renderer，则过滤器图管理器仅与其中一个通信，可任意选择。因此，如果您的应用程序使用多个视频窗口，直接在过滤器上使用 IVideoWindow 接口。在这种情况下，您必须使用 IVideoWindow::NotifyOwnerMessage 方法将窗口消息转发到每个 Video Renderer 实例。

示例代码如下 [https://cpp.hotexamples.com/examples/-/IVideoWindow/-/cpp-ivideowindow-class-examples.html](https://cpp.hotexamples.com/examples/-/IVideoWindow/-/cpp-ivideowindow-class-examples.html)

```
 HRESULT
recChannel_t::unmap(void)
{
    __CONTEXT("recChannel_t::unmap");

    IBaseFilter *pFilter = NULL;
    int hr = 0;
    hr = pGraph->FindFilterByName(L"Video Renderer", &pFilter);

    if (!hr)
    {
        IVideoWindow *pWindowInfo = NULL;
        hr = pFilter->QueryInterface(IID_IVideoWindow, (void **)&pWindowInfo);
        errorCheck(hr);
        pWindowInfo->put_Visible(OAFALSE);
        pWindowInfo->put_AutoShow(OAFALSE);
        pWindowInfo->Release();
    }

    pControl->StopWhenReady();
#ifdef _WINDOWS
    if (fControl)
    {
        fControl->CWnd::ShowWindow(SW_HIDE);
    }
#endif
    mapping = false;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-20T10:58:32.693

我很惊讶你能够让流媒体继续进行。我读到这个：

> Windows Embedded Compact 也不支持 IMediaControl 接口。尝试访问任一成员都会产生`E_NOTIMPL`错误

在：http: [//msdn.microsoft.com/en-us/library/ee494426.aspx](http://msdn.microsoft.com/en-us/library/ee494426.aspx)

# web - 如何使用 OWA 2010 启用 Saml SSO

> ID：12771316
> 
> 赞同：0
> 
> 时间：2012-10-07T17:56:38.373
> 
> 标签：web, exchange-server, saml-2.0, outlook-web-app

我有使用 SAML2 的 SSO 身份提供程序。

我需要在 OWA 2010 上启用 SSO，以便一键登录 ID 的用户可以登录到他们的电子邮件帐户。

# linux - Linux：在前台运行 cron 作业

> ID：12771333
> 
> 赞同：11
> 
> 时间：2012-10-07T17:59:19.653
> 
> 标签：linux, cron, foreground

在 Linux 中，有没有办法在前台（或交互模式）运行 cron 作业？（我有一个定期运行的程序来接受用户输入并进行一些处理。所以我想将它安排为可以在前台运行的 cron 作业）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T18:10:53.897

在你的用户上试试这个`crontab`：

```
@hourly DISPLAY=:0 xterm -e /path/to/my/script.sh 
```

它将`xterm`在您的脚本执行时（每小时）打开一次，并在您的脚本退出后退出。当然，您应该修改`@hourly`零件以满足您的需要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T18:08:45.150

对于中的`GUI`脚本`cron`，请在 a 中尝试以下行`shell`：

```
crontab -e 
```

然后在`crontab`：

```
0 7 * * * DISPLAY=:0 /PATH/TO/SCRIPT 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T18:04:33.283

假设您正在运行 X，您总是可以让它在选定的显示器上打开一个窗口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-07T21:30:31.247

如果您没有 GUI 而只有终端，请将出口转移到 tty。执行“tty”，它将返回您将输出重定向到的设备。例如，在 Centos 中，它将是这样的：

```
/ dev / pts / 0 
```

然后在`crontab -e`你写：

```
1 * * * * user sh / PATH / TO / SCRIPT> / dev / pts / 0 
```

根据您的需要调整 crontab 中的时间。它只会在有人打开该终端时运行。

但是人们正在寻找问题的标题：

Linux：在前台运行 cron 作业

答案是`nohup command_to_run &`：

```
1 * * * * nohup user sh / PATH / TO / SCRIPT & 
```

`nohup`允许像打开终端一样执行脚本并解决执行 crontab 的问题。我的意思是当我们创建一个脚本时，例如：

```
#! / bin / bash

echo "I make it up" 
```

我们等待 echo 的输出来处理它。例子：

```
echo "I make it up"
if [[$? -gt 0]]
then
do something with the output of echo 
```

通过在 tty 终端`echo`中获取执行响应。`stdout`但是从 crontab 中“没有 tty”并且发生崩溃并且 crontab 不执行应用程序。这是解决的`nohup`。更多信息：`man nohup`

# android - 使用 ORMLite 创建表期间的列未与 Bean 对齐

> ID：12771342
> 
> 赞同：2
> 
> 时间：2012-10-07T18:00:09.313
> 
> 标签：android, sqlite, ormlite

我为android应用程序创建了一个具有以下字段的bean

```
@DatabaseField(generatedId=true)
private int id;
@DatabaseField
private String name;
@DatabaseField(unique=true)
private String emailId;
@DatabaseField
private String mobile;
@DatabaseField(unique=true)
private String loginName;
@DatabaseField
private String loginPassword;
@DatabaseField
private String confirmPassword;
@DatabaseField
private String securityQuestion;
@DatabaseField
private String securityPassword;
@DatabaseField
private String transactionPassword;
@DatabaseField
private String uac; 
```

但是，当我在 Eclipse IDE 中使用 Questoid SQLite 管理器查看数据库表时，我看不到以与 bean 中声明的顺序相同的顺序创建的列，而是看到如下所示的内容：

```
CREATE TABLE user (confirmPassword VARCHAR, emailId VARCHAR, uac VARCHAR,
    loginPassword VARCHAR, mobile VARCHAR, name VARCHAR, securityPassword VARCHAR,
    transactionPassword VARCHAR id INTEGER PRIMARY KEY AUTOINCREMENT); 
```

从可读性和调试的角度来看，这个顺序非常困难。有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:52:52.363

我很惊讶这个命令。我相信这就是 Android 如何对类中的字段进行排序。 [ORMLite](http://ormlite.com/)只是遍历类中的字段。除了尝试在对象中移动字段外，我没有任何解决顺序问题的方法。然而，绝对是一个 HACK。

如果看ORMLite是如何通过JDBC在Sqlite中配置类的，可以看到直接匹配了类的顺序：

```
public class AllTypes {
    @DatabaseField
    String stringField;
    @DatabaseField
    boolean booleanField;
    @DatabaseField
    Date dateField;
    @DatabaseField
    byte byteField;
    @DatabaseField
    short shortField;
    @DatabaseField
    int intField;
    @DatabaseField
    long longField;
    @DatabaseField
    float floatField;
    @DatabaseField
    double doubleField;
} 
```

这是SQL：

```
CREATE TABLE `alltypes` (`stringField` VARCHAR , `booleanField` BOOLEAN ,
    `dateField` TIMESTAMP , `byteField` TINYINT , `shortField` SMALLINT ,
    `intField` INTEGER , `longField` BIGINT , `floatField` FLOAT ,
    `doubleField` DOUBLE PRECISION ) 
```

所以这是一个Android唯一的问题。

# hibernate - Jpa：存储由实体组成的值对象的集合

> ID：12771343
> 
> 赞同：1
> 
> 时间：2012-10-07T18:00:18.487
> 
> 标签：hibernate, jpa, orm

```
@Entity
class Question{
    @Id
    private int id;
    private String questionText;

    @OneToMany
    Set<AnswerOption> answerOptions;
}

class AnswerOption{
    private String option;

    @ManyToOne
    private Question question;
}

table-columns:
Question: id, text 
AnswerOption: question_id, option

example:
Question: Which county are you from?
Possible answers: Kent, Essex, Middlesex, Others

Intended api usage:
Question q = new Question("Which county are you from?");
q.addAnswerOption(new AnswerOption("Kent"))
q.addAnswerOption(new AnswerOption("Essex"))
q.addAnswerOption(new AnswerOption("Middlesex"))
q.addAnswerOption(new AnswerOption("Others"))
questionDao.save(q); 
```

我不需要 AnswerOption 的标识符，因为我认为 AnswerOption 是一个 Value 对象。有人可以推荐如何使用 JPA 持久化这个模型，因为我不确定要用于 AnswerOption 类的注释吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T20:07:54.097

我想说，让你的`AnswerOption`班级也成为实体。

```
@Entity
class AnswerOption{
   private String option;

   @ManyToOne
   private Question question;
 } 
```

更改类中的`oneToMany`映射`Question`以使用`CASCADE`如下选项：

```
 @Entity
 class Question{

    @Id
    private int id;
    private String questionText;

    @OneToMany(cascade = CascadeType.ALL, mappedBy="question")
    Set<AnswerOption> answerOptions;
 } 
```

完成后，保存您的问题对象，如下所示：

```
 //get your hibernate session
 Session session = ....
 Question q = new Question("Which county are you from?");
 q.addAnswerOption(new AnswerOption("Kent"))
 q.addAnswerOption(new AnswerOption("Essex"))
 q.addAnswerOption(new AnswerOption("Middlesex"))
 q.addAnswerOption(new AnswerOption("Others"))

 //use session to save the Question with AnswerOptionss
 session.save(q); 
```

确保您的`addAnswerOption`方法`Question`如下：

```
 public void addAnswerOption(AnswerOption answerOption){
     //setting the question as parent in answerOption
     answerOption.setQuestion(this).
     this.answerOptions.add(answerOption);
 } 
```

# c# - 如何在命令行参数中从文件中读取其他标准？（模拟 Python 的文件输入）

> ID：12771347
> 
> 赞同：7
> 
> 时间：2012-10-07T18:00:46.487
> 
> 标签：c#, .net

我希望我的应用程序从命令行参数或标准输入指定的文件中读取，以便用户可以使用它`myprogram.exe data.txt`或`otherprogram.exe | myprogram.exe`. 我怎样才能在 C# 中做到这一点？

* * *

在 Python 中，我会写

```
import fileinput
for line in fileinput.input():
    process(line) 
```

> 这会遍历 sys.argv[1:] 中列出的所有文件的行，如果列表为空，则默认为 sys.stdin。如果文件名是“-”，它也被 sys.stdin 替换。

Perl`<>`和 Ruby `ARGF`也同样有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T18:37:22.697

`stdin`暴露给你作为一个`TextReader`通过`Console.In`。只需`TextReader`为您的输入声明一个变量，该变量可以使用`Console.In`或您选择的文件，并将其用于所有输入操作。

```
static TextReader input = Console.In;
static void Main(string[] args)
{
    if (args.Any())
    {
        var path = args[0];
        if (File.Exists(path))
        {
            input = File.OpenText(path);
        }
    }

    // use `input` for all input operations
    for (string line; (line = input.ReadLine()) != null; )
    {
        Console.WriteLine(line);
    }
} 
```

否则，如果重构以使用这个新变量过于昂贵，您始终可以`Console.In`使用`Console.SetIn()`.

```
static void Main(string[] args)
{
    if (args.Any())
    {
        var path = args[0];
        if (File.Exists(path))
        {
            Console.SetIn(File.OpenText(path));
        }
    }

    // Just use the console like normal
    for (string line; (line = Console.ReadLine()) != null; )
    {
        Console.WriteLine(line);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T18:06:06.720

实际上，这非常容易。

在 C# 代码编辑器中，您可以执行以下操作：

```
public static void Main(string[] args) {
    //And then you open up a file. 
    using(Streamreader sr = new Streamreader(args[0])) {
            String line = sr.ReadToEnd();
            Console.WriteLine(line);
    }
} 
```

另一个好主意是遍历 ac# 集合中的项目 args，以便您可以将多个文件作为输入。例：`main.exe file1.txt file2.txt file3.txt`等等。

您可以通过使用特殊的 for 循环修改上述代码来做到这一点，如下所示：

```
foreach(string s in args) {
    using( Streamreader sr = new Streamreader(s) ) {
        String line = sr.ReadToEnd();
        Console.WriteLine(line);
    }
} 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T18:07:34.800

采用

```
 static void Main(string[] args) 
```

然后在 for 循环中使用 args.length 遍历每个输入。

使用示例：http: [//www.dotnetperls.com/main](http://www.dotnetperls.com/main)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-25T04:17:12.650

试试这个：

```
public void Main(string[] args)
        {
            if (args.Count() > 0)
            {

                byte[] byteArray = Encoding.UTF8.GetBytes(args[0]);
                MemoryStream stream = new MemoryStream(byteArray);

                StreamReader sr = new StreamReader(stream);
                String line = sr.ReadToEnd();
                Console.WriteLine(line);
            }
            Console.ReadLine();
        } 
```

args[0] 是一个字符串，在传递给 StreamReader 构造函数之前必须将其转换为流。

# django - 在 Django 中将视图推送到表单

> ID：12771349
> 
> 赞同：1
> 
> 时间：2012-10-07T18:01:12.443
> 
> 标签：django, forms

我对似乎是一个简单的想法有点麻烦。

我有一个视图叫做`register`. 我希望该视图将用户带到我创建的注册表单。

```
def register(request):
    form = register()
    data = {}
    data.update(csrf(request))
    data.update({ 'form' : form })
    return render_to_response("register.html", data)

class register(forms.Form):
    rsb_first_name = forms.CharField(max_length = 25, required = True)
    rsb_last_name = forms.CharField(max_length = 25, required = True)
    rsb_company_name = forms.CharField(max_length = 25)
    rsb_address1 = forms.CharField(max_length = 50, required = True)
    rsb_address2 = forms.CharField(max_length = 50)
    rsb_city = forms.CharField(max_length = 50, required = True)
    rsb_zip_code = forms.CharField(max_length = 25, required = True)
    rsb_phone_number = USPhoneNumberField(label = "Phone", widget = USPhoneNumberMultiWidget(), required = True)
    rsb_email = forms.EmailField(required = True) 
```

当我去`/register/`我收到以下错误：

```
register() takes exactly 1 argument (0 given) 
```

它期待什么论据？

编辑1：

感谢 eakron，我能够看到我遇到了什么问题 - 现在我完全遇到了另一个问题。

因此，我重命名了我的视图`registerUser`，更改了`urls.py`文件以反映这一点，并将我的表单更改为`RegisterForm`.

现在我的看法很简单：

```
def registerUser(request):
    form = RegisterForm()
    data = {}
    data.update(csrf(request))
    data.update({ 'form' : form })
    return render_to_response("register.html", data) 
```

我收到以下错误：

```
Could not import rsb.views.registerUser. View does not exist in module rsb.views. 
```

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T18:03:50.307

你的命名引起了冲突。Python 不知道您的意思是注册类还是注册函数，并且函数是“最接近的”。重命名一个（或以大写字母开头类的名称，无论如何这是规范）。

例如将其更改为

```
class Register(forms.Form) 
```

ETC

# javascript - 在 Javascript 中，Array.join 真的是 Array.prototype.join 吗？

> ID：12771356
> 
> 赞同：3
> 
> 时间：2012-10-07T18:02:19.167
> 
> 标签：javascript

我想知道为什么即使在 Javascript Definitive Guide 第 6 版，O'Reilly，[p。149 - 150](http://books.google.com/books?id=6TAODdEIxrgC&lpg=PA149&ots=obbpJQLwUC&dq=Array.join%20definitive&pg=PA150#v=onepage&q=Array.join%20definitive&f=false)，它继续使用`Array.join()`或`Array.concat()`。应该`Array.prototype.join()`改为吗？

但是虽然 Chrome 没有`Array.join`定义，但 Firefox 确实有，并且可以通过`Array.join(array, string)`. 区别可能很重要，因为一个是类方法，另一个是实例方法。我不知道这是为什么？

`Array.join`这本书甚至在 Core Javascript Reference 文档中也继续使用，但它可能意味着`Array.prototype.join`, 而且，它似乎暗示`Array`有一个`length`属性，但它实际上也应该是 , 的一个属性`Array.prototype`，并且是`Array.prototype.length`?

顺便说一句，Firefox的实现似乎`Array.prototype.join`可以

```
Array.prototype.join = function(s) {
    return Array.join(this, s);
} 
```

但我认为通常不会这样做（定义可以在实例上调用的类方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:07:56.393

FireFox 将原型方法的*一个版本放在相关的构造函数上。*

这不是 ECMAScript 标准的一部分，而是 ECMAScript 的特定 JavaScript 超集的一部分。

这本书应该做出这样的区分，除非这本书专门讨论 JavaScript 扩展。

请记住 JavaScript !== ECMAScript。ECMAScript 是语言标准，而 JavaScript 是该标准第 3 版的实现，包括标准未指定的功能超集。

# c# - 使用（多个/混合/多个）编码读取文本文件

> ID：12771357
> 
> 赞同：-2
> 
> 时间：2012-10-07T18:02:20.450
> 
> 标签：c#, text, utf-8, character-encoding, globalization

我有一个具有多个编码的文本文件，其中要使用的编码本身在文本文件中指定（vCard 格式是一个允许这样做的示例）。这是一个例子：

```
charset=windows-1251: ABCDE
charset=utf-8: VWXYZ 
```

...其中“ABCDE”将被解释为编码“windows-1251”，而“VWXYZ”将采用 UTF8。最终，我希望它全部转换为标准字符串（在 C# 中为 UTF2/UTF16）。

我想我想使用 RealAllText() 因为如果没有另外指定，这显然有助于自动使用默认编码。当如上所述指定字符集时，它将覆盖默认编码。

不幸的是，我还需要进行一些文本解析来查找各种编码，所以我认为需要 ReadAllBytes()，所以我可以以更原始的格式逐个字符地解析。

我也希望它快点。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:41:24.677

假设有关编码的所有元数据都将采用 ASCII 格式，您可以使用一些宽松的基于单字节的编码对其进行解码，这样您就可以像往常一样解析文本。然后使用适当的编码重新解析（从字节）每个字符串。

一些愚蠢的示例代码：

```
var encoding = Encoding.GetEncoding("Windows-1252");
string asString = System.IO.File.ReadAllText("C:/Temp/test.txt", encoding);
byte[] asBytes = System.IO.File.ReadAllText("C:/Temp/test.txt");

foreach(var entry in ParseFile(aString))
{
    int start = entry.PositionInString;
    // Since we used a one-byte encoding, we can use this location
    // directly in the byte-array.

    int length = entry.Length;
    string encoding = entry.Encoding;
    string decodedEntry = Encoding.GetEncoding(encoding)
                                  .GetString(bytes, start, length);
    Console.WriteLine(decodedEntry);
} 
```

# boost - 无法将 boost 库与 cmake 静态链接

> ID：12771358
> 
> 赞同：1
> 
> 时间：2012-10-07T18:02:33.347
> 
> 标签：boost, cmake

我已经增强了信号库，构建于：

```
./b2 address-model=32 link=static --build-type=complete --with-signals --layout=tagged 
```

简单的代码：

```
#include <iostream>
#include "boost/signal.hpp"

void onSignal() {
 std::cout << "Hello from slot" << std::endl;
}

int main() {
  boost::signal<void()> sig;
  sig.connect(&onSignal);
  sig();
 return 0;
} 
```

CmakeLists.txt：

```
project(test)
cmake_minimum_required(VERSION 2.8)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -m32 -static")
aux_source_directory(. SRC_LIST)
include_directories(/home/koshchiy/dev/boost/boost_1_51_0)
link_directories(/home/koshchiy/dev/boost/boost_1_51_0/stage)

add_executable(${PROJECT_NAME} ${SRC_LIST})
target_link_libraries(${PROJECT_NAME} libboost_signals-mt-s.a) 
```

它构建没有错误，但是在运行时，我得到了：

```
bash: ./test: No such file or directory 
```

似乎是，cmake 产生动态链接而不是静态链接：

```
koshchiy@koshchiy-lin-NB:~/dev/projects/test/test-build-release$ ldd test
linux-gate.so.1 =>  (0xf778b000)
libstdc++.so.6 => /usr/lib32/libstdc++.so.6 (0xf768e000)
libc.so.6 => /lib32/libc.so.6 (0xf74e7000)
libm.so.6 => /lib32/libm.so.6 (0xf74bc000)
/usr/lib/libc.so.1 => /lib/ld-linux.so.2 (0xf778c000)
libgcc_s.so.1 => /usr/lib32/libgcc_s.so.1 (0xf749e000) 
```

没有 cmake 的构建似乎没问题：

```
g++ -static main.cpp -o test -I... -l... 
```

我正在使用 ubuntu 12.04 x64 和 g++-4.7 编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T18:32:48.020

您的手动构建是在没有`-m32`您在 CMAKE_CXX_FLAGS 的 CMakeLists.txt 中使用的标志的情况下完成的。

因此，使用 cmake 构建会生成一个 32 位可执行文件，即使该文件存在，它也无法使用“没有此类文件”，因为您的系统上缺少对 32 位的二进制支持。

删除`-m32`您的 CMakeFiles.txt 或尝试为您的系统和 gcc 版本安装 gcc-multilib 支持。

如果你想强制静态链接到你的 cmake-build 检查[这个答案](https://stackoverflow.com/questions/3762057/cmake-how-to-produce-binaries-as-static-as-possible)是否可以帮助你。

# java - Java套接字服务器->只接受一个请求然后停止接受？

> ID：12771360
> 
> 赞同：0
> 
> 时间：2012-10-07T18:03:12.090
> 
> 标签：java, sockets, connection

我正在尝试为我的一个项目编写一个简单的套接字服务器，但它只接受一个请求，然后不接受来自任何地方的任何其他请求。

```
public void run() {
    println("Socket server running...");
    try {
        sock = new ServerSocket(20424);

        while(true) {

            clientSocket = sock.accept();

            PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
            BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

            String data;

            while((data = in.readLine()) != null) {
                println("[SocketServer] " + data);
                if(data.equalsIgnoreCase("COUNT(TRIGGERS)")) {
                    out.println(getTriggerCount());
                }               
            }
            out.println("endOfStream");

            out.close();
            in.close();
            clientSocket.close();
        }
    }  catch (IOException e) {
        e.printStackTrace();
    }
} 
```

它将接受一个请求并以正确数量的数据进行响应，但在那之后就没有任何效果了。这是我用来连接的客户端：

```
public static void main(String[] args) {
    try {
        socket = new Socket("localhost", 20424);
        out = new PrintWriter(socket.getOutputStream(), 
                true);
        in = new BufferedReader(new InputStreamReader(
                socket.getInputStream()));

        out.println("COUNT(TRIGGERS)");

        String data;

        while((data = in.readLine()) != null) {
            System.out.println(data);
        }

        socket.close();
    } catch (UnknownHostException e) {
        System.out.println("Unknown host");
        System.exit(1);
    } catch  (IOException e) {
        System.out.println("No I/O");
        System.exit(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:16:08.307

一旦内部while结束，它将接受下一个连接......

也许您想使用自己的线程为传入连接创建套接字处理程序，这样您就可以同时处理多个连接。

# ios - 在 Windows 上开发 iOS 应用程序

> ID：12771361
> 
> 赞同：5
> 
> 时间：2012-10-07T18:03:22.197
> 
> 标签：ios, windows

我刚刚为一家他们满意的公司完成了一个 Android 应用程序。然而，现在他们想要这个应用程序的 iOS 版本。我没有 iOS 应用程序开发经验，也没有任何苹果产品，但我说我会进一步研究替代品。

在阅读了一下之后，您似乎可以在 Windows 上开发 iOs 应用程序，但也有缺点。启动和运行环境似乎很麻烦。据说它也很慢，如果没有 mac 许可证，您将无法在市场上发布该应用程序。这是真的？

该公司会向我支付环境许可证等费用，但不会支付给我用于 mac 机器的费用。如果我要求支付这笔费用，我不想让他们失望，因为我的应用程序没有在真实设备上测试过，也没有由我编译和发布。

在这种情况下，我可以在没有 mac 计算机的情况下开发应用程序吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T18:06:09.763

我猜真正的答案对您不利：您需要一台 Mac OS 计算机来开发您的应用程序，并且确实应该拥有至少一两个 iOS 设备来测试该应用程序，然后再将其投放市场。如果没有公司支持你，我不会开始一个 iOS 项目，最好现在让他们失望。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-10T10:09:15.920

我建议您不要退出该项目，可以在 Windows 机器上创建 iPhone 应用程序。详细解释查看链接：[如何使用Windows开发机进行iPhone开发？](https://stackoverflow.com/questions/22358/how-can-i-develop-for-iphone-using-a-windows-development-machine?page=1&tab=votes#tab-top)

# objective-c - 检测uitextview空行

> ID：12771363
> 
> 赞同：1
> 
> 时间：2012-10-07T18:03:29.750
> 
> 标签：objective-c, uitextview

我有两个`UITextView`让用户在第一个文本视图中输入一些文本并在第二个文本视图中产生一些不同的文本。

用户可以在第一个文本视图中输入下一行，但是我不希望在第二个文本视图中生成空行。我想知道如何检测第一个文本视图中是否有空行并删除这些行？

谢谢你。

字符输入计数错误的结果：

```
-(void)textViewDidChange:(UITextView *)textView{

if ([inputTextSection.text rangeOfString:@"\n\n"].location == NSNotFound) return;
NSString *resultStr = [inputTextSection.text stringByReplacingOccurrencesOfString:@"\n\n" withString:@"\n"];
inputTextSection.text = resultStr;

 int maxChars = 70; //maximum characters
 int charsLeft = maxChars - [inputTextSection.text length];

 if(charsLeft == 0) {
    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"No more characters"
                                                     message:[NSString stringWithFormat:@"You have reached the character limit of %d.",maxChars]
                                                    delegate:nil
                                           cancelButtonTitle:@"OK"
                                           otherButtonTitles:nil];
    [alert show];
    [alert release];
}

liveCountTextView.text = [NSString stringWithFormat:@"%d/70",charsLeft];} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T21:55:30.110

1.  你应该设置`delegate`第一个`UITextView`。
2.  在文本视图委托中实现上述方法：

    ```
    - (void)textViewDidChange:(UITextView *)textView
    {
        if ([textView.text rangeOfString:@"\n\n"].location == NSNotFound) return;
        NSString *resultStr = [textView.text stringByReplacingOccurrencesOfString:@"\n\n" withString:@"\n"];
        textView.text = resultStr;
    } 
    ```

这将删除所有空行。

# android - 在android中创建带圆角的按钮

> ID：12771367
> 
> 赞同：12
> 
> 时间：2012-10-07T18:04:07.063
> 
> 标签：android, android-layout, android-button

![在此处输入图像描述](../Images/38231cc088120de605a34ad24773294f.png)

我正在尝试创建一个如上图所示的按钮。最初我的想法是创建一个 9 补丁并将其设置为按钮背景。但是因为这是一个普通的按钮，我认为我们可以在不使用任何图像的情况下以某种方式绘制它。

按钮背景颜色为#0c0c0c 边框颜色为#1a1a1a 文本颜色为#cccccc

我在 SO 上发现了一个类似的问题，但它创建了一个渐变 -
[Android - 按钮边框](https://stackoverflow.com/questions/7690416/android-border-for-button)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-07T18:08:59.440

Android 开发人员指南对此有详细指南：[Shape Drawbables](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)。

您也可以简单地`gradient`从您提供的链接中删除该元素：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <corners android:radius="3dp" />
    <stroke android:width="5px" android:color="#1a1a1a" />
</shape> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-07T18:48:16.550

```
 <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_alignLeft="@+id/textView1"
    android:layout_marginBottom="56dp"
    android:text="Button" 
    android:textColor="#FF0F13"
    android:background="@drawable/bbkg"/>//create bbkg.xml in drawable folder 
```

bbkg.xml//按钮背景

```
 <?xml version="1.0" encoding="utf-8"?>
  <selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="true" 
    android:drawable="@drawable/pressed" />
  <item  android:state_focused="false" 
    android:drawable="@drawable/normal" />
  </selector> 
```

normal.xml //按钮背景正常状态

```
 <?xml version="1.0" encoding="UTF-8"?> 
  <shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle"> 
  <solid android:color="#10EB0A"/>    
  <stroke android:width="3dp"
        android:color="#0FECFF" /> 
  <padding android:left="5dp"
         android:top="5dp"
         android:right="5dp"
         android:bottom="5dp"/> 
  <corners android:bottomRightRadius="7dp"
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp"
         android:topRightRadius="7dp"/> 
  </shape> 
```

pressed.xml //按钮背景按下状态

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"
   android:shape="rectangle"> 
<solid android:color="#FF1A47"/>    
<stroke android:width="3dp"
        android:color="#0FECFF"/>

<corners android:bottomRightRadius="7dp"
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp"
         android:topRightRadius="7dp"/> 
</shape> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-28T12:08:00.860

如果你想要这样的东西

按钮预览

这是代码。

1.在您的可绘制文件夹中创建一个 xml 文件，如 mybutton.xml 并粘贴以下标记：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
 <item android:state_pressed="true" >
     <shape android:shape="rectangle"  >
         <corners android:radius="3dip" />
         <stroke android:width="1dip" android:color="#5e7974" />
         <gradient android:angle="-90" android:startColor="#345953" android:endColor="#689a92"  />            
     </shape>
 </item>
<item android:state_focused="true">
     <shape android:shape="rectangle"  >
         <corners android:radius="3dip" />
         <stroke android:width="1dip" android:color="#5e7974" />
         <solid android:color="#58857e"/>       
     </shape>
 </item>  
<item >
    <shape android:shape="rectangle"  >
         <corners android:radius="3dip" />
         <stroke android:width="1dip" android:color="#5e7974" />
         <gradient android:angle="-90" android:startColor="#8dbab3" android:endColor="#58857e" />            
     </shape>
 </item>
</selector> 
```

2.现在使用这个drawable作为你视图的背景。如果视图是按钮，则如下所示：

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:textColor="#ffffff"
    android:background="@drawable/mybutton"
    android:text="Buttons" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-07T08:38:09.290

只需使用`MaterialButton`：

```
 <com.google.android.material.button.MaterialButton
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            style="@style/Widget.MaterialComponents.Button.OutlinedButton"
            android:backgroundTint="..."
            app:strokeColor="..."
            android:textColor="..."
            app:cornerRadius="xxdp"
            android:text="BUTTON"
            /> 
```

[![在此处输入图像描述](../Images/cff30ad2e83e717d3ab62532bef9bd65.png)](https://i.stack.imgur.com/ZHM1x.png)

# javascript - 无法让用户名显示每个对象

> ID：12771370
> 
> 赞同：0
> 
> 时间：2012-10-07T18:04:15.300
> 
> 标签：javascript, json, instagram

**javascript**

```
var likesperimage = photo.likes.data;
console.log(likesperimage); 
```

**显示**

![输出](../Images/5ed65eb3c60bd4a9b1097eee309588a0.png)

当我在我的真实编码中尝试时`var likesperimage = JSON.stringify(photo.likes.data);`，它会完整输出对象，但我只需要每个图像的每个对象的用户名。我都尝试过使用 jQuery，但这并不能满足我的真正需要。

每个包含对象的分组行都是来自图像的数据。所以每个图像有多个用户名。我想做的是显示与主对象相关的所有用户名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:27:03.983

为什么`jQuery.each`对你不起作用？试试下面的代码：

```
var likesperimage = photo.likes.data;
var userList = [];
$.each(likesperimage, function(index, user) {
    userList.push(user.username);
});
console.log(userList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:24:13.600

```
$.each(likesperimage, function(i, obj) {
    console.log(obj.username);
}); 
```

如果你想要一个集合，你应该使用`$.map`而不是`$.each`.

```
var names = $.map(likesperimage, function(obj, i) {
                                     return obj.username;
                                 }); 
```

# macos - 当用户选择一个文件夹时，Mac 沙盒应用程序可以访问什么？

> ID：12771375
> 
> 赞同：9
> 
> 时间：2012-10-07T18:04:40.217
> 
> 标签：macos, sandbox

我正在阅读有关 Mac 应用程序沙盒的信息，并且想知道当用户选择 NSOpenPanel 或 NSSavePanel 中的文件夹时究竟会发生什么。“<a href="http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html" rel="noreferrer">应用沙盒设计指南”给出了以下内容例子：

> 当您的应用程序的用户指定他们要使用文件或文件夹时，系统会将关联的路径添加到您的应用程序的沙箱中。例如，用户将`~/Documents`文件夹拖到应用程序的 Dock 磁贴（或应用程序的 Finder 图标，或应用程序的打开窗口）上，从而表明他们想要使用该文件夹。作为响应，系统会`~/Documents`为您的应用程序提供文件夹、其内容及其子文件夹。

我不清楚这里的“内容”是什么意思。这是否仅限于查看文件夹中的文件而无法读取这些文件中的内容？或者这是否仅仅意味着应用程序将能够（递归地）读取 Documents 文件夹中的任何文件（例如，它可以同时读取`~/Documents/Foo.txt`和`~/Documents/Bar/Baz.txt`）？那么写入操作（写入现有文件、删除文件或创建新文件或文件夹）呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T18:21:51.930

该应用程序可以读取所选文件夹及其子文件夹中的所有文件。写入也是如此，无论是新文件还是覆盖现有文件。也可以删除以及创建新文件夹、在文件夹（或您拥有所需权限的其他文件夹）范围内移动文件夹。

简而言之，您可以自由地在此文件夹及其子文件夹中做任何您想做的事情。

**警告**：当保存面板打开并显示`Documents`为目标时，它可能是`~/Library/Containers/<app signature>/Data/Documents`. 您可以更改位置，但是文件成功保存但不在`~/Documents`.

# objective-c - AppDelegate 中的方向检测

> ID：12771377
> 
> 赞同：2
> 
> 时间：2012-10-07T18:04:52.287
> 
> 标签：objective-c, ios, orientation, ios6, uistoryboard

这是在我的 AppDelegate 中，并在方向更改时运行。当应用程序加载时，它总是以纵向模式加载。如果我在设备处于横向模式时加载应用程序，这仍然会像设备处于纵向模式一样执行。这是我遇到的第一个问题。第二个是加载后，当我将设备从纵向旋转到横向时，会出现断线，如下所示：

```
-(void)setOrientationView
{

    UIDevice *currentDevice = [UIDevice currentDevice];
    [currentDevice endGeneratingDeviceOrientationNotifications];
    UIDeviceOrientation theOr = currentDevice.orientation;

    if ( UIDeviceOrientationIsLandscape(theOr) && !isLandVisible )
    {
        NSLog(@"setLand");
        isLandVisible = YES;
        isPortVisible = NO;

        [self.window.rootViewController pushViewController:portCont animated:YES];   // <Thread 1: breakpoint 2.1

    }

    if( UIDeviceOrientationIsPortrait(theOr) && !isPortVisible )
    {
        NSLog(@"setPort");
        isPortVisible = YES;
        isLandVisible = NO;

        [self.window.rootViewController pushViewController:portCont animated:YES];

    }
    [currentDevice beginGeneratingDeviceOrientationNotifications];

} 
```

我正在努力支持加载时的两个方向，使用情节提要应用程序，并且在查看视图后不关闭视图（防止重新加载 UIWebViews 所必需的）。所以有两个问题超出了我的范围。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T06:51:55.670

The [Advanced App Tricks](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html) section of the iOS App Programming Guide has some guidelines about `Launching in Landscape Mode`, it could be that your answer lies within those few lines (if at all possible). Especially take care of the `UIInterfaceOrientation` in your `Info.plist` file.

# c# - WCF 服务可以处理哪些数据类型？

> ID：12771378
> 
> 赞同：2
> 
> 时间：2012-10-07T18:05:02.773
> 
> 标签：c#, wcf, datacontract, wcftestclient

我是 WCF 的新手。以前我将 WCF 服务用于字符串、int32 等基本数据类型。但是当我尝试使用`BitmapImage`类时，它的测试客户端会给出以下错误

> *添加服务失败。服务元数据可能无法访问。确保您的服务正在运行并公开元数据。*

当我用它替换`BitmapImage`它`String`时工作正常。这意味着我缺少一些代码。

为了更好地理解这里是我的代码。

**WCF 接口代码**

```
using System;
using System.Collections.Generic;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.Windows.Media;
using System.Windows.Media.Imaging;

namespace MyWcfService
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        void MyMethod(MyDataContract obj);
    }

    [DataContract]
    public class MyDataContract
    {
        [DataMember]        
        public BitmapImage MyProperty { get; set; }
    }
} 
```

**WCF 服务代码**

```
using System;
using System.Collections.Generic;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.Windows.Media;
using System.Windows.Media.Imaging;

namespace MyWcfService
{
    public class Service1 : IService1
    {
        public void MyMethod(MyDataContract obj)
        {
            //No code. It is blank.
        }
    }
} 
```

Web.Config 代码

```
 <system.serviceModel>
    <services>
      <service name="MyWcfService.Service1" behaviorConfiguration="MyWcfService.Service1Behavior">
        <!-- Service Endpoints -->
        <endpoint address="" binding="wsHttpBinding" contract="MyWcfService.IService1">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MyWcfService.Service1Behavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T20:09:52.673

我的猜测是 BitmapImage 不是 DataContractSerializer 支持的类型之一（请参阅[http://msdn.microsoft.com/en-us/library/ms731923.aspx](http://msdn.microsoft.com/en-us/library/ms731923.aspx)），因此数据合同变得无效（因此元数据生成失败，导致您发布的错误消息）。

如果是这种情况，您需要从 BitmapImage 属性中删除 [DataMember]，并创建一个新的 [DataMember] 属性来手动处理序列化（将 MyProperty 转换为某些受支持的类型，例如 byte[]）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T18:19:38.930

您应该在**MyDataContract**类上添加 BitmapImage 的**KnownType 。**

 **```
[KnownType(typeof(BitmapImage))]
[DataContract]
    public class MyDataContract
    {
        [DataMember]        
        public BitmapImage MyProperty { get; set; }
    } 
```

这是因为 string 是原始类型而 BitmapImage 不是，所以你应该“告诉”编译器在序列化/反序列化时它将处理哪些数据类型。**

# javascript - 像素操作后旋转画布

> ID：12771379
> 
> 赞同：3
> 
> 时间：2012-10-07T18:05:06.660
> 
> 标签：javascript, html5-canvas

我遇到以下问题：

我将图像加载到我的画布中并用它做一些事情（fe反转颜色或更多需要性能的东西）。之后，我仍然希望能够缩放和旋转画布（或其中的操纵图像）。那是因为（如果我做对了）我需要重新绘制图像，那么 - 操作就消失了。

所以： - 我可以以某种方式保存图像并在操作后重绘它（ctx.save() 和 ctx.restore() 在这种情况下似乎不起作用） - 或者我是否必须通过像素操作来旋转和缩放（不会一个问题，但如果canvas-transformation可以做到这一点会很酷）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:35:37.087

您可以使用两个画布元素来实现您想要的效果，在一个上绘制用于您的操作，然后在第二个上绘制该画布以应用旋转：

```
var canvas1 = document.createElement('canvas'),
    canvas2 = document.createElement('canvas'),
    ctx1 = canvas1.getContext('2d'),
    ctx2 = canvas2.getContext('2d');

/// use ctx1 to perform whatever manipulation you want, and then...

/// start
ctx2.save();
/// shift our "hotspot" to the center
ctx2.translate(canvas2.width / 2, canvas2.height / 2);
/// rotate 45 degrees clockwise.. obviously you can do what you want here
/// scale, fade, flip, stretch, rotate... whatever 
ctx2.rotate(Math.PI / 4);
/// draw your first canvas with it's manipulated image on to the second
/// along with it's rotation
ctx2.drawImage( canvas1, 0,0 );
/// all done
ctx2.restore(); 
```

我发现上面的内容更容易使用，但是您也可以使用以下内容，它将抓取/放回画布元素的当前图像数据：

```
ctx.getImageData();
ctx.putImageData(); 
```

您可以在此处了解如何使用它们：

[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas)

[http://www.w3schools.com/html5/canvas_getimagedata.asp](http://www.w3schools.com/html5/canvas_getimagedata.asp)

# css - 固定位置使元素移动

> ID：12771380
> 
> 赞同：1
> 
> 时间：2012-10-07T18:05:16.127
> 
> 标签：css, position, html-table, border

我有一个有 3 列的表。我使用中间列作为内容，另外 2 个有一个图像作为边框，如下所示：

```
 border -->   ||HEADER  ||  <--- border
              ||NAV     || 
              ||CONTENT ||
              ||        ||
              ||FOOTER  || 
```

我必须使用固定位置，以便在页面滚动时边框不会移动，这是我的代码：

```
 <td style="background-image:url(images/vertical.jpg); width:10px; height:100%; background-repeat:repeat-y; vertical-align:top; position:fixed;"></td> 
```

问题是，当使用固定位置时，我的边框图像会在主要内容内移动，这会弄乱我的布局。奇怪的是，这只发生在左 td 上。我的主要内容的固定宽度为 990px​​。

有任何想法吗？

显示问题的屏幕截图：

[http://imageshack.us/a/img571/3016/tableg.jpg](http://imageshack.us/a/img571/3016/tableg.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:35:39.167

出于设计目的，表格有限制（这只是我的意见:-)）。如果你坚持你的代码，那么你可以使用这个布局。

您的图像的最小宽度应为 1010 像素（10 像素边框，990 像素内容，10 像素边框）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style>
body{
    min-width: 1010px;
    background:url(images/vertical.jpg) top center repeat-y;
    margin:0;
}
.wrapper{
    margin-left: auto;
    margin-right: auto;
    width: 990px;
}
.contenttable{
    width: 990px;
    margin:0;
    padding:0;
}
</style>
</head>
<body>
    <div class="wrapper">
    <table class="contenttable">
        <tr>
        <td>content goes here</td>
        <tr>
    </table>
    </div>
</body>
</html> 
```

您也可以尝试使用[960.gs](http://960.gs/)的自[定义 Grid CSS 生成器](http://grids.heroku.com/)

# scala - scala：在函数中定义默认参数（val）与使用方法（def）

> ID：12771381
> 
> 赞同：13
> 
> 时间：2012-10-07T18:05:17.150
> 
> 标签：scala, functional-programming

我有以下方法：

```
scala> def method_with_default(x: String = "default") = {x + "!"}
method_with_default: (x: String)java.lang.String

scala> method_with_default()
res5: java.lang.String = default!

scala> method_with_default("value")
res6: java.lang.String = value! 
```

我正在尝试使用 val 来实现相同的效果，但出现语法错误，如下所示：

（没有默认值，这个可以编译）

```
scala> val function_with_default = (x: String) => {x + "!"}
function_with_default: String => java.lang.String = <function1> 
```

（但我无法编译这个...）

```
scala> val function_with_default = (x: String = "default") => {x + "!"}
<console>:1: error: ')' expected but '=' found.
       val function_with_default = (x: String = "default") => {x + "!"}
                                              ^ 
```

任何的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T18:16:07.813

没有办法做到这一点。你能得到的最好的东西是一个对象，它扩展了两者`Function1`，并且`Function0`应用`Function0`方法使用默认参数调用另一个应用方法。

```
val functionWithDefault = new Function1[String,String] with Function0[String] {
  override def apply = apply("default")
  override def apply(x:String) = x + "!"
} 
```

如果您更频繁地需要此类功能，您可以将默认的 apply 方法分解为一个抽象类`DefaultFunction1`，如下所示：

```
val functionWithDefault = new DefaultFunction1[String,String]("default") {
  override def apply(x:String) = x + "!"
}

abstract class DefaultFunction1[-A,+B](default:A)
               extends Function1[A,B] with Function0[B] {
  override def apply = apply(default)
} 
```

# hibernate - 连接表的唯一约束

> ID：12771383
> 
> 赞同：8
> 
> 时间：2012-10-07T18:05:28.717
> 
> 标签：hibernate, jpa

我有一个用户，他有很多书：

```
public class User {

    @OneToMany
    @Cascade( { org.hibernate.annotations.CascadeType.ALL })
    @JoinTable(name="user_book")
    private Set<Book> books;

} 
```

这将在数​​据库中创建一个连接表：

```
|user_id|book_id|
-----------------
|1      |2      |
|1      |3      |
|2      |1      | 
```

问题是唯一约束**仅**在`book_id`列上。这意味着 2 个用户不能拥有同一本书。如果我想添加到`user(id:1)`a `book(id:1)`，那么我得到：`BatchUpdateException: Duplicate entry`

这是正常的吗？或者这是错误？如果不是错误，我如何配置休眠以在对（`user_id`，`book_id`）上创建唯一约束，而不仅仅是`book_id`在连接表中。

休眠：`3.6.4.Final`

MySQL：`5.0.21`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-07T18:08:53.860

您的协会是一对多**的。**这意味着**一个**用户可以拥有多本书。如果您希望能够让多个用户共享一本书，请将其设为多对多关联：一个用户将拥有几本书，而一本书将有多个用户。

# c# - 控制台重量转换器用户选择

> ID：12771384
> 
> 赞同：3
> 
> 时间：2012-10-07T18:05:38.853
> 
> 标签：c#

我是 C# 新手，并且已经制作了一些工作控制台应用程序，例如 Hello World 和 BMI 计算器。

我正在尝试制作一个从英制到公制的重量转换器，反之亦然，但我无法让用户选择他们想要做的事情。这是我正在努力解决的代码段：

```
decimal pounds;
decimal poundsconverted;
decimal kilo;
decimal kiloconverted;
string choice;

Console.WriteLine ("Press 1 to convert from imperial to metric");
Console.WriteLine ("Press 2 to convert from metric to imperial");
choice = Console.ReadLine();

if (choice (1))
    Console.WriteLine ("Please enter the weight you would like to convert in pounds (lbs) ex. 140");
    pounds = Convert.ToDecimal (Console.ReadLine());
    poundsconverted=pounds/2.2;
    Console.WriteLine("The weight in kilograms is:{0:F3}", poundsconverted);

if (choice (2))
    Console.WriteLine ("Please enter the weight you would like to conver in kilograms (kg) ex. 80");
    kilo = Convert.ToDecimal (Console.ReadLine());
    kiloconverted=pounds*2.2;
    Console.WriteLine("The weight in pounds is:{0:F3}", kiloconverted); 
```

我的问题是`if`陈述。我尝试了多种格式，但无济于事。有没有更好的方法来做到这一点？可以用`if`语句吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T18:08:48.343

使用`switch/ case`或`if/else`这里是开关/案例的示例

```
decimal pounds;
decimal poundsconverted;
decimal kilo;
decimal kiloconverted;
string choice;

Console.WriteLine ("Press 1 to convert from imperial to metric");
Console.WriteLine ("Press 2 to convert from metric to imperial");
choice = Console.ReadLine();
switch (choice)
{
   case 1:
     Console.WriteLine ("Please enter the weight you would like to convert in pounds (lbs) ex. 140");
        pounds = Convert.ToDecimal (Console.ReadLine());
        poundsconverted=pounds/2.2;
        Console.WriteLine("The weight in kilograms is:{0:F3}", poundsconverted);
        break;
   case 2:
      Console.WriteLine ("Please enter the weight you would like to conver in kilograms (kg) ex. 80");
        kilo = Convert.ToDecimal (Console.ReadLine());
        kiloconverted=pounds*2.2;
        Console.WriteLine("The weight in pounds is:{0:F3}", kiloconverted);
        break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T18:07:23.710

您的 if 语句应如下所示：

```
if (choice  == 1)
{

} 
```

如果您有多个代码行，那么它们需要像上面那样`if`用花括号括起来。`{}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T15:11:01.350

```
 int pounds;           
        int kilo;              

        Console.WriteLine("Please enter (1)lb. conversion(2) kg. conversion");
        int userNumber = int.Parse(Console.ReadLine());

        if (userNumber == 1)
        {
            Console.WriteLine("Please enter the weight(in kilograms) you would like to convert in pounds.");
            pounds = Int32.Parse(Console.ReadLine());

            Console.WriteLine("The weight in pounds is:{0:F3}", pounds / 2.2);
        }
        else
        {
            Console.WriteLine("Please enter the weight(in pounds) you would like to conver in kilograms");
            kilo = Int32.Parse(Console.ReadLine());
            Console.WriteLine("The weight in kilograms is:{0:F3}", kilo * .45);
        }
        Console.ReadLine(); 
```

# android - 交换片段

> ID：12771385
> 
> 赞同：0
> 
> 时间：2012-10-07T18:05:52.063
> 
> 标签：android, android-fragments

我的主视图由 2 个片段组成

```
gfs = new GalleriesFragment();
gf = new GalleryFragment();

FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.add(R.id.frame1,gfs);
ft.add(R.id.frame2,gf);
ft.commit(); 
```

在我想参加的活动中

*   用第 2 帧中的片段替换第 1 帧片段。
*   用新片段替换 frame2 片段

（类似于 gmail 应用程序）

所以我这样做：

```
ImageFragment ig = new ImageFragment();
FragmentTransaction transaction = null;
transaction = getFragmentManager().beginTransaction();
transaction.replace(gf.getId(), ig);
transaction.replace(gfs.getId(), gf);
transaction.addToBackStack("remove1");
transaction.commit(); 
```

第一次替换有效，但第二次抛出错误：

> java.lang.IllegalStateException：无法更改片段 GalleryFragment{41034f18 #1 id=0x7f060008} 的容器 ID：以前是 2131099656 现在是 2131099655

我尝试了不同的组合，通过删除然后添加片段但没有成功。

是否可以仅在一次交易中做到这一点？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:43:15.317

一个片段可能只有一个父级，而您正试图将片段从一个父级移动到另一个父级。

我从来没有做过这样的事情，但是如果你首先从原始父容器中分离（不是删除，而是分离所以它仍然存在）片段然后将它替换到另一个中，那么它可能是可能的。

老实说，我会使用直接 id (R.id.whatever) 而不是尝试使用`getId()`... 但这只是我个人的偏见。

# ruby - 如何拆分此字符串？

> ID：12771387
> 
> 赞同：4
> 
> 时间：2012-10-07T18:06:07.140
> 
> 标签：ruby

我有这个字符串：

```
a = "hy what are you doing [Zoho Reports] will you like? [Zoho Books] reply" 
```

我想拆分它，所以结果是这样的：

```
hy
what
are
you
doing
[Zoho Reports]
will
you
like?
[Zoho Books]
reply 
```

如何循环该字符串以实现这些结果？我目前正在这样做：

```
a.split("") 
```

但它分裂`"[Zoho Reports]"`成`"[Zoho"`and `"Reports]"`，这是我不想要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T18:35:05.760

在这种情况下，您应该使用`scan`而不是，`split`因为它更容易描述您想要的内容，而不是您想要丢弃的内容。

类似于 Bozhidar 的答案，但您不需要复杂性。

```
a.scan(/\[.*?\]|\S+/) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T18:26:30.233

不是很漂亮，但可以完成工作：

```
a.scan(/(\S+)|(\[.+?\])/).map(&:compact).flatten 
```

后来我注意到我使用的组根本没有必要，没有它们，解决方案可以简化为：

```
a.scan(/\S+|\[.+?\]/) 
```

# c - 为什么在c中会发生这种情况？

> ID：12771389
> 
> 赞同：-1
> 
> 时间：2012-10-07T18:06:14.107
> 
> 标签：c

```
void xstrcpy ( char *t, char *s );

void main(void ) {      
    char source[ ] = "Sayonara" ;
    char target[20] ;
    xstrcpy ( target, source ) ;   
    printf ( "\nsource string = %s", source);
    printf ( "\ntarget string = %s", target ) ; 
}

void xstrcpy ( char *t, char *s ) {  
    while ( *s != '\0' ){
        *t = *s ;    
        t++ ; s++ ;
    } 
    *t = '\0' ;
} 
```

此代码给出输出：

```
source string = Sayonara 
target string = Sayonara 
```

但是当我更改`char target[20];`为时`char target[8];`，它给出：

```
source string =  target string = Sayonara 
```

当我更改`char target[20];`为 时`char target[4];`，它给出：

```
source string = nara 
target string = Sayonara 
```

当我更改`char target[20];`为 时`char target[3];`，它给出：

```
source string = nara 
target string = Sayonara 
```

为什么源值发生变化，而目标变为具有字符串大小的数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T18:11:50.480

当你的目标比要求的短时，它会覆盖它后面的任何数据。特别是，当您 make it 时`8`，它会以终止零覆盖源的开头。当你做它时`4`，它会用源字符串的尾部覆盖源。

这就是正在发生的事情。虽然不能保证这种行为，但当然是未定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:10:29.810

由于 target 是在堆栈上分配的，因此当您将溢出的数据复制到此数组时，它会**覆盖它后面的代码**。不要那样做，这是未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:34:51.417

没有数组绑定检查，如果发生数据溢出，则行为未定义！

# button - 使用按钮调整 WebView 的大小

> ID：12771390
> 
> 赞同：1
> 
> 时间：2012-10-07T18:06:16.737
> 
> 标签：button, web, webview, resize, scale

我有一个 iPad 应用程序，它使用屏幕的一小部分（左上角）来显示一个网站，我想做的是在应用程序内按一下按钮来调整 webview 的大小。所以我启动应用程序时，网页视图占据了一小部分屏幕，当我按下按钮时，网页视图会缩放到全屏。

谢谢

```
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://m.facebook.com"]]];

[webView2 loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://m.youtube.com/"]]];

[webView3 loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"https://mobile.twitter.com/signup"]]];

[webView4 loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.tumblr.com/tagged/mobile"]]]; 
```

# c# - 公共访问者

> ID：12771392
> 
> 赞同：0
> 
> 时间：2012-10-07T18:06:43.550
> 
> 标签：c#, class

我在课堂上有以下访问器`Glass`：

```
public bool isGlassEnabled{
    get {
         if (System.Environment.OSVersion.Version.Major >= 6) {
             DwmIsCompositionEnabled( ref en );
             if (en > 0) {
                return true;
             } else { return false; }
         } else { return false; }
    }
} 
```

（我不确定代码是否有效，但这不是我感兴趣的）

现在我们位于`MainClass`. 有没有可能`isGlassEnabled`像这样访问：

```
bool myBool = **without new** Glass.isGlassEnabled; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T18:09:56.083

为了使这项工作

```
bool myBool = **without new** Glass.isGlassEnabled; 
```

你只需要一个`static`属性：

```
public static bool isGlassEnabled{
    get { ... }
} 
```

然后`bool myBool = Glass.isGlassEnabled;`将简单地编译。

您（可能）在吸气剂中需要的一切都是静态的，所以那里没有问题。

编辑：

正如其他人所指出的，您的代码包含一个`en`应该是本地或静态的变量。
连同一些其他分支折叠：

```
public static bool isGlassEnabled
{
    get 
    {
         if (System.Environment.OSVersion.Version.Major >= 6) 
         {
             Int32 en;   // or whatever type exactly needed
             DwmIsCompositionEnabled( ref en );
             if (en > 0) 
                return true;                
         }
         return false; 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T18:09:39.667

是的，您应该将属性标记为**static**。

```
public static bool isGlassEnabled 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T18:09:59.573

使用*静态*修饰符

```
public static bool isGlassEnabled 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T18:09:37.627

使用静态属性：

```
public static bool isGlassEnabled{
    get {
        TypeTheTypeOfEnVariableHere en;
        if (System.Environment.OSVersion.Version.Major >= 6) {
             DwmIsCompositionEnabled( ref en );
            if (en > 0) {
               return true;
            } else { return false; }
        } else { return false; }
   }
} 
```

# jquery - 更改相对于 eq() 的 css 属性 .. jQuery/JavaScript

> ID：12771398
> 
> 赞同：3
> 
> 时间：2012-10-07T18:07:49.300
> 
> 标签：jquery, html, css

我正在尝试根据 eq() 值更改一组 div 的“左”属性。我将展示我正在尝试做的基本代码！任何帮助将不胜感激

HTML：

```
<html>
<body>
<div class"item-holder"></div>
  <div class"item item-one"></div>
  <div class"item item-one"></div>
  <div class"item item-one"></div>
  <div class"item item-one"></div>
</div>
</body>
</html> 
```

CSS：

```
.item-holder {
position:relative;
width:100px;
}
.item {
position:absolute;
width:25px;
float:left;
} 
```

jQuery：

```
$(document).ready(){
var itemWidth = $('.item-holder').width()/$('.item').size();
  $('.item').css({
    'left':$('.this').eq()*itemWidth+'px'
  });
}; 
```

请不要这不是完整的代码，如果它更有意义，我可以发布它，我需要在 jQuery 中创建左值的原因是因为我想在几个不同的地方重用这段代码，并且将使用不同的数字'项目' 每次！欢迎任何帮助并被采纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:09:02.467

您似乎需要的是[索引](http://api.jquery.com/index/)：

```
$('.item').each(function(){
    $(this).css({
       'left':$(this).index()*itemWidth+'px'
    });
}); 
```

请注意，您的代码中有一些错误：

*   你可能不想关闭你的第一个 div 并让它为空
*   设置类时，不要忘记`=`操作符

**[示范](http://jsfiddle.net/u28v8/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T18:11:08.793

你可以使用`css` [函数](http://api.jquery.com/css/#css-propertyName-functionindex-%20value)。

> .css（属性名，函数（索引，值））

```
$('.item').css('left', function(ind, v){
    return (ind * itemWidth) + 'px'
}) 
```

请注意，通过使用`$('.this')`，您将选择具有类的元素，以便从您应该编码的对象`this`创建一个 jQuery 对象。`this``$(this)`

# jquery - jQuery CSS 属性名称不一致

> ID：12771403
> 
> 赞同：3
> 
> 时间：2012-10-07T18:08:29.713
> 
> 标签：jquery, css

为什么属性名称不同：

```
$(elem).css('padding-top') 
```

和

```
$(elem).css('marginTop') 
```

? 不应该是：

```
$(elem).css('margin-top') 
```

反而？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T18:11:38.997

您可以使用“camelCase”或“连字符分隔”形式的属性。两者都会起作用。请参阅[jQuery 文档`.css()`](http://api.jquery.com/css/)：

> jQuery 可以同等地解释多词属性的 CSS 和 DOM 格式。例如，jQuery 理解并返回正确的值`.css('background-color')`和`.css('backgroundColor')`。

因此，要使用您的示例，以下所有操作都可以：

```
$(elem).css('marginTop')
$(elem).css('margin-top')
$(elem).css('paddingTop')
$(elem).css('padding-top') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:11:26.613

有两件事。**CSS**如何看待它以及如何使用**JavaScript**访问它。在 CSS 中，它是：

```
#element {margin-top: ...;} 
```

而在 JavaScript 中，它是：

```
document.getElementById('element').style.marginTop 
```

`css()`是的，传递给函数的 JavaScript 方式和 CSS 方式都有效。

# c# - 无法将数据插入到 MS Access 中的特定表中

> ID：12771404
> 
> 赞同：0
> 
> 时间：2012-10-07T18:08:29.600
> 
> 标签：c#, ms-access-2007, windows-applications

我正在创建一个 Windows 应用程序，为此我使用 MS Access 作为数据库。但是在执行插入或更新操作时，我收到一个异常：
“无法打开数据库”。它可能不是您的应用程序识别的数据库，或者文件可能已损坏。

**我只为单表面临这个问题**。在其他表中，我可以执行插入、更新操作。
我尝试用以前工作的数据库替换这个数据库。我检查了数据库的大小，它也不超过 10MB。为什么会这样。以前我能够在同一张表上执行所有操作。

请提出解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:15:56.343

听起来您正在尝试超出最大尺寸。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T12:52:15.637

Access 不适合专业开发人员。这显然是一个损坏的表。

移动到 SQL Server。

# javascript - 基于数组突出显示行

> ID：12771412
> 
> 赞同：0
> 
> 时间：2012-10-07T18:09:32.053
> 
> 标签：javascript, jquery

我有几行的正文。每一行都包裹在一个 span 中，末尾有一个递增的值，以确定哪一行是什么（例如，第 1 行、第 2 行、第 3 行等）。

```
<div id="textbody">
    <span id="line-1">what is love</span><br/>
    <span id="line-2">oh baby, don't hurt me</span><br/>
    <span id="line-3">Don't hurt me no more</span><br/>
    <span id="line-4">Oh, baby don't hurt me</span><br/>
    <span id="line-5">Don't hurt me no more</span><br/>
    <span id="line-6">What is love</span><br/>
    <span id="line-7">Yeah</span><br/>
</div> 
```

现在我有一个数组，表示第 1 行和第 2 行组合在一起，第 5-6 行组合在一起。这意味着当鼠标悬停在第 1 行上时，然后在第 1 行和第 2 行（根据数组）将背景变成不同的颜色，如果第 5 行被鼠标悬停，则在第 5 行和第 6 行。

它只是在跨跨度的基础上进行，但我不确定如何处理它的数组部分。我应该使用像 in_array 这样的东西吗？我知道这是一个 PHP 函数，但 Google 告诉我人们已经为 JS 构建了类似的函数。

```
$("span[id^='line-']").live('mouseover', function(e) {
  e.preventDefault();
  var line_id = $(this).attr('id').substring(6);

  $(this).addClass("highlight1");

  return false;
}); 

$("span[id^='line-']").live('mouseleave', function(e) {
  e.preventDefault();
  var line_id = $(this).attr('id').substring(6);

  $(this).removeClass("highlight1");

  return false;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T18:27:19.303

如果您可以对 HTML 中的元素进行分组：

```
<div id="textbody">
  <span>
    <span>what is love</span><br/>
    <span>oh baby, don't hurt me</span><br/>
  </span>
  <span>Don't hurt me no more</span><br/>
  <span>Oh, baby don't hurt me</span><br/>
  <span>
    <span>Don't hurt me no more</span><br/>
    <span>What is love</span><br/>
  </span>
  <span>Yeah</span><br/>
</div> 
```

然后你根本不需要任何脚本，只需要一些 CSS：

```
#textbody > span:hover { background: yellow; } 
```

演示：http: [//jsfiddle.net/Guffa/Rfwye/](http://jsfiddle.net/Guffa/Rfwye/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:05:53.447

```
var groups = [{
    group: [1,2],
    color: "#000"},
{
    group: [3,7],
    color: "#0ff"},
{
    group: [4,6],
    color: "#ff0"},
{
    group: [5],
    color: "#ff0000"}];

$(groups).each(function(index, item) {
    $(item.group).each(function(i, span) {
        $("#line-" + span).addClass("group" + index).data("bgcolor", item.color);
    });
});

$("#textbody span").mouseover(function(){
   $("." + $(this).attr("class")).css("background-color", $(this).data("bgcolor"));
});

$("#textbody span").mouseout(function(){
   $("." + $(this).attr("class")).css("background", "transparent");
}); 
```

演示：http: [//jsfiddle.net/y8UrW/](http://jsfiddle.net/y8UrW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T18:53:10.630

我已经找到了一个有点冗长的解决方案来维持您当前的结构。似乎工作得很好，虽然它可能对你的情况有点矫枉过正......无论如何，看看：http: [//jsfiddle.net/Ap6JP/](http://jsfiddle.net/Ap6JP/)

```
var groups = [
  [1, 2],
  [5, 6]
]

var lineIdFor = function($span) {
  return parseInt($span.attr("id").match(/\d+/)[0]);  
};

var groupFor = function(lineId) {
  var group;
  $.each(groups, function() {
    if(this.indexOf(lineId) >= 0) {
      group = this;
    }
  });

  return group || [lineId];
};

var spansInGroup = function(group) {
  var $spans = new $();

  $.each(group, function() {
    $spans = $spans.add($("#line-" + this));
  });

  return $spans;
};

var groupForSpan = function($span) {
  var lineId = lineIdFor($span);
  var group  = groupFor(lineId);
  return spansInGroup(group);
};

$("#textbody").on("mouseover", "span", function() {
  var $group = groupForSpan($(this));
  $group.addClass("highlight1");
});

$("#textbody").on("mouseout", "span", function() {
  var $group = groupForSpan($(this));
  $group.removeClass("highlight1");
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T18:22:32.507

您可以向容器中添加一个类，并使用 CSS 根据悬停的线条突出显示线条。

```
$('#textbody').addClass('over-' + $(this).id()); 
```

然后使用 CSS 将它们分组

```
#textbody span[id^='line-']:hover, /* Always highlight the hovered line */
.over-line-1 > #line-2, .over-line-2 > #line-1 /* Higlight the partner line */
{ background: yellow } 
```

将对第 1 行和第 2 行进行分组。

# redis - 带有分区消息队列的 ServiceStack RedisMqHost

> ID：12771418
> 
> 赞同：3
> 
> 时间：2012-10-07T18:10:29.293
> 
> 标签：redis, servicestack

我正在实现一个解决方案，其中多个节点侦听使用 ServiceStack.Redis 实现的多个 Redis 消息队列。在系统内，每个节点服务于一个特定的“通道”和通道上的一个特定操作。例如，消息可能是入站电子邮件，频道可能是“abc”。

将有许多频道，但消息类型的数量是固定的。

我花了一个周末在 ServiceStack 源代码中四处寻找，并在 RedisMessageQueueClient 和 RedisMqHost 上实现了几个变体。这个想法是在构建时传入“通道”，然后将其用于构建要发布/监控的队列名称。

在内部，现有的 RedisMqHost 和 RedisMessageQueueClient 使用 QueueNames 静态来生成队列名称，但是因为这会生成一个纯粹基于类型名称的队列，所以我无法只为特定通道提供服务。我更新的代码将通道名称附加到队列名称的末尾。

例如，对于“abc”频道，mq:InboundEmail:in 将变为 mq:InboundEmail:in:abc

代码感觉不对，因为我只更改了几个地方，但始终使用 QueueNames 类。

两个问题：

1.  拥有多个消息队列的底层设计是否正确？应该将其建模为多个 Redis 数据库（听起来不正确）还是我的大量队列设计合适？我想我们会看到大约一千个频道和每个频道四五个队列。

2.  是否有一种现有的机制来划分我错过的消息队列 - 感觉它应该是一个相当标准的要求，并且它已经在下面发生了，因为每个队列都有 In 队列、Out 队列以及 Priority 和 Dlq 队列消息类型。

# macos - OSX 10.7.4 上的 freetype 问题

> ID：12771421
> 
> 赞同：2
> 
> 时间：2012-10-07T18:10:45.103
> 
> 标签：macos, homebrew, freetype, mplayer

我正在尝试使用自制软件安装带有 OSD 的 mplayer。我已经将`--enable-menu`和都添加`--with-freetype-config=/usr/local/Cellar/freetype/2.4.10/freetype-config`到了酿造配方中。

```
==> Downloading http://www.mplayerhq.hu/MPlayer/releases/MPlayer-1.1.tar.xz
Already downloaded: /Library/Caches/Homebrew/mplayer-1.1.tar.xz
xz -dc "/Library/Caches/Homebrew/mplayer-1.1.tar.xz" | /usr/bin/tar xf -
==> ./configure --prefix=/usr/local/Cellar/mplayer/1.1 --cc=cc --host-cc=cc --disable-cdparanoia --disable-libopenjpeg --enable-menu --disable-x11 --     with-freetype-config=/usr/local/Cellar/freetype/2.4.10/freetype-config
./configure --prefix=/usr/local/Cellar/mplayer/1.1 --cc=cc --host-cc=cc --disable-cdparanoia --disable-libopenjpeg --enable-menu --disable-x11 --with     -freetype-config=/usr/local/Cellar/freetype/2.4.10/freetype-config
Checking for cc version ... clang 4.2.1 (experimental support only)
Checking for working compiler ... yes
Detected operating system: Darwin
Detected host architecture: x86_64
Checking for cross compilation ... no
Checking for host cc ... cc
Checking for CPU vendor ... GenuineIntel (6:15:10)
Checking for CPU type ...  Intel(R) Core(TM)2 Duo CPU     T7700  @ 2.40GHz 
```

因为`freetype-config`我尝试了三种不同的路径；`/usr/X11R6/bin/freetype-config`，`/usr/X11/bin/freetype-config`和地窖里的那个。

检查 freetype 总是失败：

```
Checking for freetype >= 2.0.9 ... no
Checking for fontconfig ... no (FreeType support needed) 
```

尽管 freetype 本身似乎已安装。

```
mufasa:bin eythor$ freetype-config --version
15.0.9
mufasa:bin eythor$ freetype-config --ftversion
2.4.10
mufasa:bin eythor$ freetype-config --libs
-L/usr/local/Cellar/freetype/2.4.10/lib -lfreetype -lz -lbz2
mufasa:bin eythor$ freetype-config --cflags
-I/usr/local/Cellar/freetype/2.4.10/include/freetype2 -          I/usr/local/Cellar/freetype/2.4.10/include 
```

我注意到 fontconfig 依赖于 freetype，所以我通过 brew 成功安装了它。我不确定接下来要尝试什么或如何弄清楚为什么无法识别 freetype。

谁能指出我一个明智的方向？

# c - C 宏 - 通过指针传递与传递给宏时的复制/错误

> ID：12771425
> 
> 赞同：1
> 
> 时间：2012-10-07T18:11:08.223
> 
> 标签：c, gcc, vector, macros

为了学习纯 C（来自 C++），我决定使用结构和宏编写一个简单的数学库。

到目前为止，我将此作为测试宏：

```
#define MulVec2(dest,src) ((dest.x) = (dest.x) * (src.x); (dest.y) = (dest.y) * (src.y); return dest;)

typedef struct vec2f_s
{
    float x, y;
}
vec2f_t; 
```

在我的调用代码中，我有这个：

```
int main(void)
{

    vec2f_t v, w;

    v.x = 5.0f;
    v.y = 2.0f;

    w.x = 3.0f;
    w.y = 3.0f;

    v = MulVec2(v, w);

    printf( "x => %f; y => %f \n", v.x, v.y );

    return 0;
} 
```

我的问题如下：

1）我是否需要编写一个单独的宏来将对象的指针/地址传递给宏？如果是这样，怎么做？例如，请注意`MulVec2(dest,src)`宏假定传入的对象不是动态分配的，但我也希望支持这一点。

2）当我编译代码时，我得到这个错误：

```
../main.c: In function 'main':
../main.c:15:9: error: expected ')' before ';' token
../main.c:15:7: error: incompatible types when assigning to type 'vec2f_t' from type 'float' 
```

我能做些什么来解决这个问题？

**编辑**

我应该澄清一下，我不打算为此*只*使用宏，但编写宏的原因是我不必为向量的双精度和浮点变量编写单独的函数。我希望通过遵循 DRY（不要重复自己）原则，尽可能地重复使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:17:27.807

宏不是函数！

当您调用 时`MulVec2(v, w)`，它只是将宏替换为其定义的值。

预处理后的代码将如下所示：

```
int main(void)
{

    vec2f_t v, w;

    v.x = 5.0f;
    v.y = 2.0f;

    w.x = 3.0f;
    w.y = 3.0f;

 v=MulVec2(dest,src) ((dest.x) = (dest.x) * (src.x); (dest.y) = (dest.y) * (src.y); 
    return dest;)

    printf( "x => %f; y => %f \n", v.x, v.y );

    return 0;
} 
```

这就是编译错误的原因。只需将 #define 替换为`MulVec2`函数即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T18:24:06.830

正如其他人指出的那样，宏不是函数，这将是函数的用例。宏只是将 Mul2Vec(...) 文本扩展为您在宏中编写的内容，这对编译器没有任何意义，因为无法`return`脱离表达式。

如果您想在 C 中实现 C++ 模板的效果，请重新考虑您的策略，也许只是选择其中一个`float`or`double`并坚持下去。但是如果你绝对必须在不重复代码的情况下使用泛型，你可以像这样定义函数定义宏：

```
/* vec-impl.h */

#define PASTE(a, b) a ## b
#define NAME(prefix, type) PASTE(prefix, type)

#define VEC_T NAME(vec_, T)

typedef struct {
  T x;
  T y;
} VEC_T;

void NAME(MulVec2_, VEC_T)(VEC_T *dest, VEC_T *src) {
 dest->x = dest->x * src->x;
 dest->y = dest->y * src->y; 
} 
```

定义实际函数的编译单元如下所示：

```
/* vec-double.c */

#define T double
#include "vec-impl.h"

/* vec-float.c */

#define T float    
#include "vec-impl.h" 
```

此设置为您提供了 C++ 模板的穷人近似，没有类型推断和任何花哨的元编程功能。同样，除非您绝对必须这样做，否则不要走那条路，即使那样，也要尽量减少执行此操作的代码。这不是惯用的 C 代码，并且不会被有能力的 C 程序员所接受——虽然 C 比 C++ 更容易受到预处理器黑客攻击，但这已经超出了界限。

关于您发布的代码：要了解宏是什么，请购买一本关于 C 的好书来解释该主题，例如 Kernighan 和 Ritchie 的“The C Programming language”。在探索宏时，请记住以下几点：

*   除非你真的知道自己在做什么，否则永远不要`return`脱离宏。如果您仍然这样做，请将 RETURN 一词作为宏名称的一部分。其他流控制语句也是如此，例如`break`、`continue`和`goto`。在你之后维护该代码的人会很感激它。

*   按照惯例，宏总是用全大写字母拼写，所以它是 MUL_VEC2，而不是 MulVec2。这会提醒读者他正在处理的是宏，而不是函数。

*   宏定义中的括号点是为了使宏扩展即使传递了复合表达式也能工作。因此`dest`，必须用括号括起来，而不是`dest.x`. 即，而不是`(dest.x)`，一个人会写`(dest).x`。

*   使用`-E`编译器的开关向您显示预处理器输出，这样您就可以看到编译器看到的内容并弄清楚发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T18:21:29.990

这是一个糟糕的设计。多次评估其参数的宏很容易出错，因为作为参数传递的表达式的副作用可能会破坏整个代码。使用`inline`与在 C++ 中使用函数几乎相同的函数。

作为一般规则，不要将宏用于可以通过函数完成的事情。

现在，如果您有这样的函数，请创建另一个通过指针接收参数的函数，将其命名为`MulVec2p`。然后使用 C11 的一个新功能，称为类型泛型宏，您可以执行类似于 C++ 中的函数重载的操作

```
#define MULVEC2(X, Y)                \
(_Generic((X),                       \
  struct vec2f_s: MulVec2,           \
  struct vec2f_s*: MulVec2p)         \
   ((X), (Y))) 
```

（这个只测试第一个参数的类型，但我希望你能明白。）

编译器尚未完全支持 C11，但例如 clang 已经有`_Generic`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T02:55:24.790

如果您有 C99 编译器，则此版本的宏将执行您希望它执行的操作：

```
 #define DOT2(a, b) ((vec2f_t){(a).x * (b).x, (a).y * (b).y}) 
```

按照惯例，但*特别是*如果他们两次评估他们的参数，就像这里的情况一样，宏必须有一个大写的 UGLY_NAME。我喜欢宏，但我从痛苦的经历中知道，如果你不遵守这条规则，你会后悔的。所以我已经用你的替换`MulVec2`了`DOT2;` `MULVEC2`也可以。

同样按照惯例，宏参数总是用括号括起来，例如`(a).x`. 参照。*街*_ 此规则的例外情况向读者表明您正在做一些不寻常和/或错误的事情。但`fabs((a))`可能是不必要的。

使用此宏，您甚至可以获取地址（使用 gcc 测试）：

```
 extern void foo(vec2f_t *);
   // ...
   foo(&DOT2(ying, yang)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T18:17:07.203

对于第二个问题 - 删除 return desc；从宏中，您不能将此宏分配给任何人

# android - 在 android 清单中添加 Theme.Holo 会返回资源未找到错误

> ID：12771426
> 
> 赞同：0
> 
> 时间：2012-10-07T18:11:08.470
> 
> 标签：android, android-layout, android-theme

我一直在尝试将 Holo Dark 主题添加到我的 android 应用程序中。为此，我将以下内容添加到 android manifest xml 文件的应用程序标记中。

```
android:theme="@style/Theme.Holo" 
```

这会产生一个错误，提示找不到与给定名称匹配的资源。关于如何克服这个问题的任何想法？

PS：我刚刚开始android开发。

**编辑 1**

我为 android 应用程序添加 Holo 主题的唯一步骤是添加上述代码行。我是否必须将任何文件导入项目中的样式文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T20:59:35.497

您必须使用系统资源。`@style`仅使用您定义的资源。`@android:style`使用系统资源：

`android:theme="@android:style/Theme.Holo"`

# asp.net - 邮政编码工作的谷歌地理编码 API，但没有街道地址？

> ID：12771430
> 
> 赞同：1
> 
> 时间：2012-10-07T18:11:30.777
> 
> 标签：asp.net, google-geocoding-api

我正在使用以下代码来获取输入的邮政编码的地址，它很好地遍历地址组件，但它从来没有返回街道地址，我是否遗漏了一些东西：

```
public class GeoCoder
{
    public class GeoLocation
    {
        public decimal Lat { get; set; }
        public decimal Lng { get; set; }
    }
    public class GeoGeometry
    {
        public GeoLocation Location { get; set; }
    } 
    public class GeoResult
    {
        public GeoGeometry Geometry { get; set; }
        public GeoAddressComponent[] Address_Components { get; set; }
    }
    public class GeoResponse
    {
        public string Status { get; set; }
        public GeoResult[] Results { get; set; }
    }
    public class GeoAddressComponent
    {
        public string Long_Name { get; set; }
        public string Short_Name { get; set; }
        public string[] Types { get; set; }
    }

    public void FindAddress(string postcode)
    {            
        string url = "http://maps.googleapis.com/maps/api/geocode/" +
            "json?address=" + postcode + "&sensor=false";

        WebResponse response = null;
        try
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create (url);
            request.Method = "GET";
            response = request.GetResponse ();
            if (response != null)
            {
                string str = null;
                using (Stream stream = response.GetResponseStream())
                {
                    using (StreamReader streamReader = new StreamReader(stream))
                    {
                        str = streamReader.ReadToEnd ();
                    }
                }

                GeoResponse geoResponse = JsonConvert.DeserializeObject<GeoResponse>(str);
                if (geoResponse.Status == "OK")
                {
                    int count = geoResponse.Results.Length;
                    if (count > 0)
                    {
                        for (int i = 0; i < count; i++)
                        {
                            int comps = geoResponse.Results[i].Address_Components.Length;
                            for (int z = 0; z < comps; z++)
                            {
                                Console.WriteLine("Test: {0}", geoResponse.Results[i].Address_Components[z].Long_Name);
                            }

                            Console.WriteLine("Lat: {0}", geoResponse.Results[i].Geometry.Location.Lat);
                            Console.WriteLine("Lng: {0}", geoResponse.Results[i].Geometry.Location.Lng);
                        }
                    }
                } 
                else
                {
                    Console.WriteLine ("JSON response failed, status is '{0}'", geoResponse.Status);
                }
            }
        } 
        catch (Exception ex)
        {

        } 
        finally
        {
            if (response != null)
            {
                response.Close ();
                response = null;
            }
        }
    }
} 
```

# c# - 实体框架 5 中的 LoadProperty

> ID：12771433
> 
> 赞同：7
> 
> 时间：2012-10-07T18:11:52.553
> 
> 标签：c#, asp.net, entity-framework, entity-framework-5

我将我的实体框架 4.3 数据库第一个项目升级到新的实体框架 5。 ~~显然我现在使用的是 DbContext 而不是 ObjectContext。~~

我已将旧的 .edmx 文件替换为新文件。我以前使用我的 4.3 .edmx 文件的旧业务代码现在使用以下`LoadProperty`方法的代码存在问题：

```
using (var context = new MyEntities())
{
    Models.User user = context.Users.First(x => x.GUID == guid);
    context.LoadProperty(user, o => o.Settings);
    return user;
} 
```

似乎 LoadProperty 不是 DbContext 中的可用方法。

无论如何，我怎样才能获得强类型加载？

我想我可以使用

```
context.Users.Include("Settings") 
```

但这不是强类型并且容易出现拼写错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-07T20:04:05.197

您也可以将 Include 方法与 Lambda 一起使用。不要忘记 using 语句，因为这个 Include 来自 DbExtension 类：

```
using System.Data.Entity; 
```

...

```
context.Users.Include(u => u.Settings); 
```

以下是有关 Include 扩展方法的一些信息：[msdn info](http://msdn.microsoft.com/en-us/library/gg671236%28VS.103%29.aspx)

# android - 复选框onclicklistener在列表行android中不起作用

> ID：12771435
> 
> 赞同：0
> 
> 时间：2012-10-07T18:12:10.513
> 
> 标签：android, listview, checkbox, listactivity, onclicklistener

我的列表行还包含一个带有其他视图的复选框。当我选中或取消选中该复选框时，不会触发其关联的动作侦听器。以下是 getView() 的代码片段。请看一下并为我提供解决方案。

```
 public View getView(int position, View convertView, ViewGroup parent) {
        //ViewHolder holder;

        if (convertView == null) 
        {
            convertView = mInflater.inflate(R.layout.list_item, null);
            Log.i("adapter", "ADAPTER");
        }

        checkTax = (CheckBox) convertView.findViewById(R.id.check_tax);
        checkTax.setOnCheckedChangeListener(new OnCheckedChangeListener () {      
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)          {
                        Log.i("on click", "ON CLICK");
                if (isChecked) {
                    tvSelectTaxAccount.setVisibility(View.VISIBLE);
                    spinnerTaxAcc.setVisibility(View.VISIBLE);
                    tvTaxAmt.setVisibility(View.VISIBLE);
                    editTaxAmt.setVisibility(View.VISIBLE);
                    tvAmtAfterTax.setVisibility(View.VISIBLE);
                    amtAfterTax.setVisibility(View.VISIBLE);
                    tvAmt.setText("amount before tax");
                    Log.i("checked", "CHECKED");
                }
                else
                {
                    tvSelectTaxAccount.setVisibility(View.GONE);
                    spinnerTaxAcc.setVisibility(View.GONE);
                    tvTaxAmt.setVisibility(View.GONE);
                    editTaxAmt.setVisibility(View.GONE);
                    tvAmtAfterTax.setVisibility(View.GONE);
                    amtAfterTax.setVisibility(View.GONE);
                    tvAmt.setText("AMOUNT");
                    Log.i("unchecked", "UNCHECKED");
                }
            }

        });

        tvSelectTaxAccount = (TextView) convertView.findViewById(R.id.tv_select_tax_account);
        spinnerTaxAcc = (Spinner) convertView.findViewById(R.id.spinner_tax_acc);
        spinnerTaxAcc.setOnItemSelectedListener(selectSpinnerTaxAcc);

        tvTaxAmt = (TextView) convertView.findViewById(R.id.tv_tax_amt);
        editTaxAmt = (EditText) convertView.findViewById(R.id.edit_tax_amt);
        tvAmt = (TextView) convertView.findViewById(R.id.tv_amt);
        tvAmtAfterTax = (TextView) convertView.findViewById(R.id.tv_amt_after_tax);
        amtAfterTax = (TextView) convertView.findViewById(R.id.amt_after_tax);

    spinnerTaxAcc.setOnItemSelectedListener(selectSpinnerTaxAcc);

        tvSelectTaxAccount.setVisibility(View.GONE);
        spinnerTaxAcc.setVisibility(View.GONE);

        tvTaxAmt.setVisibility(View.GONE);
        editTaxAmt.setVisibility(View.GONE);
        tvAmtAfterTax.setVisibility(View.GONE);
        amtAfterTax.setVisibility(View.GONE);

        return convertView;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:17:36.793

取消注释此行`//checkTax.setOnClickListener(tax);`并尝试使用 onclicklistener 或尝试使用

```
checkTax.setOnCheckedChangeListener(new OnCheckedChangeListener() {
     public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

   if(isChecked)
   {
    checkTax.setText("Check Box is checked");
   }
   else
   {
    checkTax.setText("not checked");
   }

}); 
```

我认为即使是 setOnCheckedChangeListener 也会在单击复选框时被触发

# ruby-on-rails - 如何使用 capybara DSL 测试 Select2 元素？

> ID：12771436
> 
> 赞同：21
> 
> 时间：2012-10-07T18:12:21.180
> 
> 标签：ruby-on-rails, capybara, capybara-webkit, jquery-select2

我在通过 ajax 加载结果的页面上有一个[Select2元素。](http://ivaynberg.github.com/select2/)想用 capybara/rspec 测试这个（使用 poltergeist 驱动程序），但由于 Select2 元素实际上是作为一个隐藏字段开始的，然后填充`<ul>`一次结果被处理，所有的 normal`select`或`fill_in`helpers`choose`都不会工作。

我现在拥有的是

```
 it "should have a search field for events" do
    click_link "Select an Event"       # this works as expected
    within('.select2-container') do    # works
      find('.select2-search input').set(event.description[0,5])  # won't work!
      find(:xpath, "li[text()='#{event.description}']").click 
    end
    click_button "Search"
    page.should have_content("Displaying all 2 photos")
  end 
```

上面的第 4 行，显然 capybara 可以找到元素，但值没有改变，并且 Select2 永远不会进行 ajax 调用。（不能`fill_in`在那里正常使用，因为搜索字段元素没有标签、id 或名称属性）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-04-13T18:16:29.753

停止挠头，这样做会奏效

```
select "option_name_here", :from => "Id Of Your select field" 
```

我尝试了每个模块和我能做的所有该死的事情，最后只是通过一行简单的代码在没有任何帮助的情况下做到了这一点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-22T13:30:19.500

我创建了一个可以与 Cucumber 一起使用的助手，它没有，`sleep`所以它比上面的方法更快。如果您使用`createSearchChoice`Select2 提供的，这也有效。

把它放进去`features/support/select2_helper.rb`

```
module Select2Helper
  def select2(value, attrs)
    first("#s2id_#{attrs[:from]}").click
    find(".select2-input").set(value)
    within ".select2-result" do
      find("span", text: value).click
    end
  end
end

World(Select2Helper) 
```

像这样使用它：

```
Then(/^I select2 "([^"]*)" from "([^"]*)"$/) do |value, select_name|
  select2 value, from: select_name
end 
```

使用 Rails 4.1.1 和 Cucumber 1.3.15 测试。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-10-25T08:49:44.233

您可以使用[capybara-select-2 gem](https://github.com/Hirurg103/capybara_select2)，它将为您完成所有工作。只需传递`search: true`给辅助选项即可进行 Ajax 调用：

```
select2 'Marriage', from: 'Event', search: true 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-07T19:02:27.877

我能够通过`page.execute_script`手动将所需的值和`keyup`事件破解到搜索字段中来解决这个问题。

```
 it "should have a search field for events" do
    click_link "Select an Event"
    page.execute_script("i = $('.select2-container input').first();
                         i.val('#{event.description[0,4]}').trigger('keyup');");
    sleep 2
    find('.select2-results li:first-child').click
    click_button "Search"
    page.should have_content("Displaying all 2 photos")
  end 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-18T09:44:35.577

对于您页面上的多个 select2 组件，我创建了以下适用于我的辅助方法：

```
def select2(id, value)
  page.execute_script %Q{
    i = $('#s2id_#{id} .select2-input');
    i.trigger('keydown').val('#{value}').trigger('keyup');
  }
  sleep 2
  find('div.select2-result-label').click
end

def remove_all_from_select2(id)
  page.execute_script %Q{
    $('#s2id_#{id} .select2-choices a').click();
  }
end

def remove_from_select2(id, value)
  page.execute_script %Q{
    $('#s2id_#{id} .select2-choices div:contains("#{value}")').closest('li').find('a').click();
  }
end 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-21T12:50:27.563

对于那些与 Select2 **multiple**苦苦挣扎的人：

奇怪的是，我发现带有 multiple:true 的 select_tag 似乎热衷于为每个条目生成 html，例如：

```
<div class="select2-result-label">
  <span class="select2-match"></span>
  value
</div> 
```

而不是

```
<div class="select2-result-label">
  <span class="select2-match">value</span>
</div> 
```

无益地将内容放在跨度之外。

为了用水豚测试它，我有两种方法：

```
# for most select2s

def select2_select(value, id)
  # This methods requires @javascript in the Scenario
  first("#s2id_#{id}").click
  find(".select2-input").set(value)
  within ".select2-result" do
    if !find("span").text.empty?
      find("span", text: value).click
    elsif !find("div").text.empty?
      find("div", text: value).click
    else
      fail 'neither span nor div within this select2, did you get the id of the select2 right?'
    end
  end
end

# for select_tag select2s which are multiple:true

def select2_select_multiple(select_these, id)
  # This methods requires @javascript in the Scenario
  [select_these].flatten.each do | value |
    first("#s2id_#{id}").click
    found = false
    within("#select2-drop") do
      all('li.select2-result').each do | result |
        unless found
          if result.text == value
            result.click
            found = true
          end
        end
      end
    end
  end
end 
```

后者对我来说太老套了，所以我尽可能使用第一个并希望最终替换后者。

使用的 HAML：

```
= select_tag "some_id", options_for_select(['hello','world']), multiple: true, include_blank: true 
```

js：

```
$("#some_id").select2(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-03-10T17:43:25.460

受此答案和[Capybara select2 helper](https://stackoverflow.com/questions/21528438/capybara-select2-helper)的启发，我想出了对于同一页面上的单选和多选的多个 select2 字段来说似乎很健壮的方法：

```
def select2(value, attrs)
  s2c = first("#s2id_#{attrs[:from]}")
  (s2c.first(".select2-choice") || s2c.find(".select2-choices")).click

  find(:xpath, "//body").all("input.select2-input")[-1].set(value)
  page.execute_script(%|$("input.select2-input:visible").keyup();|)
  drop_container = ".select2-results"
  find(:xpath, "//body").all("#{drop_container} li", text: value)[-1].click
end 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-11-30T13:51:28.233

这适用于带有远程数据源的下拉样式 select2：

```
 def select2(value, from:)
    execute_script("$('##{from}').select2('open')")
    find(".select2-search__field").set(value)
    find(".select2-results li", text: /#{value}/).click
  end 
```

`from`必须是构建 select2 的常规选择标记的 ID。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-06-07T02:30:22.167

我有两个远程 select2。我在第一个中搜索一个字符串，根据找到的结果，第二个被填充。在尝试了 capybara-select2 gem 和这里和那里列出的所有解决方案之后，我不得不想出自己的解决方案，因为它们都不能用于搜索。在我的情况下，我选择的内容并不重要，因此没有尝试选择具有特定值的结果标签。希望这对我的情况有所帮助。

```
Given(/^I have selected  "(.*?)" category$/) do |arg1|  
  page.find(:css, ".select2-choice.select2-default").click 
  page.find(:css, "#s2id_autogen1_search").set "Dip Boya"
  sleep 2
  page.all(:css, '.select2-result-label')[1].click

end

Given(/^I have selected "(.*?)" variation$/) do |arg1|  
  page.find(:css, ".select2-choice.select2-default").click 
  page.all(:css, '.select2-result-label')[1].click
end 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-07T15:41:40.913

[https://github.com/goodwill/capybara-select2](https://github.com/goodwill/capybara-select2) 对`js: true`我来说效果很好。干杯

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-02-23T11:03:00.483

这对我有用，即使使用 select2 AJAX 自动完成：

```
find('#user_id').sibling('span.select2').click
find('.select2-search__field').set('ABCDEF')
find('.select2-results li', text: 'ABCDEF').click 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-01-03T18:09:19.703

简单的回答：

```
page.find('.select2-drop-active .select2-input').set('foo')
page.find('.select2-drop-active .select2-input').native.send_keys(:return) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-03-09T03:02:41.857

嘿，我不确定是否有人仍然关心，但我也遇到了这个问题，我找到了一种简单的方法来处理它。

首先，我不会将类添加到每个下拉选择中，而是像这样在全局范围内进行：

```
 class CollectionSelectInput < SimpleForm::Inputs::CollectionSelectInput
      def input_html_classes
        super.push('chosen-select')
      end
    end 
```

因此，当我开始遇到 capybara 无法使用 select2 下拉菜单的问题时，我的解决方法是仅在不在测试环境中时才使用全局推送：

```
 class CollectionSelectInput < SimpleForm::Inputs::CollectionSelectInput
      unless Rails.env.test?
        def input_html_classes
          super.push('chosen-select')
        end
      end
    end 
```

我曾经使用 capybara-select2 gem，但它似乎不再被维护:(

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-03-22T20:14:15.880

这是 select2 更新版本的解决方案 - 特别是 select2-rails (4.0.0) gem：

将其放在 中`features/support/feature_helpers.rb`，然后将其包含在您的`spec_helper.rb`文件中，并包含`config.include FeatureHelpers`在您的`RSpec.configure do |config|`块中。

```
module FeatureHelpers
  def fill_in_select2(container_selector, with: '')
    page.execute_script %Q{
      i = $('#{container_selector} .select2-search__field');
      i.trigger('keydown').val('#{with}').trigger('keyup');
    }
    sleep 2
    find('.select2-results__option--highlighted').click
  end
end 
```

然后像在 Capybara 中使用`fill_in_select2`一样使用`fill_in`，但使用适当的前缀符号包含容器元素的类或 id。（例如`fill_in_select2 '.actions_list', with: 'bob@testmaster1000.com'`）。

**注意**：这会在输入文本后选择下拉列表中的第一个元素。

在 Rails 4.2.5.2、Capybara 2.7.1 和 Capybara-Webkit 1.11.1 中测试

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-04-30T16:42:30.223

在花费了比我想要的更长的时间之后，我终于通过使用 xpath 选择器在 Brandon McInnis 的答案上构建它来工作。

```
module Select2Helper
  def fill_in_select2(container_selector, with: '')
    page.execute_script %Q{
      i = $('#{container_selector} .select2-search__field');
      i.trigger('keydown').val('#{with}').trigger('keyup');
    }
    sleep 2
    find(:xpath, "//body").all("#{container_selector} li", text: with)[-1].click
  end
end 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-02-02T13:10:55.383

```
def select2(id, value)
  find("##{id} ~ span.select2").click
  within ".select2-results" do
    find("li", text: value).click
  end
end 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-05-11T06:53:13.730

对于 select2 **4.0**与 capybara-webkit 的结合，我尝试了基于 execute_script 的解决方案，但它们不起作用，因为 capybara 找不到生成的 'li' 元素。我最终确定了这个基于 send_keys 的简单解决方案。因为我使用的是远程数据源，所以我加了一个小睡眠让结果出现：

```
module Select2Helpers
  def fill_in_select2(field_name, with: '')
    field = find("##{field_name}")
    parent = field.find(:xpath, './/..')
    ui = parent.find('.select2-search__field')

    ui.send_keys(with)
    sleep 0.5
    ui.send_keys(:enter)
    sleep 0.1
  end
end 
```

请注意，您可能需要更新到最新的 capybara-webkit (1.14.0) 才能完成这项工作。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-11-16T00:01:16.210

这个助手为我工作（使用占位符）：

```
 # Add this helper
  def select2(placeholder, option)
    find("select[data-placeholder='#{placeholder}'] + .select2").click
    within '.select2-results' do
      find('span', text: option).click
    end
  end 
```

并这样称呼它：

```
select2 'Placeholder', 'some option' 
```

# c# - WCF：没有端点监听

> ID：12771439
> 
> 赞同：2
> 
> 时间：2012-10-07T18:12:37.530
> 
> 标签：c#, wcf

我使用[此](http://www.switchonthecode.com/tutorials/wcf-tutorial-events-and-callbacks)链接学习 WCF 编程

我在该链接中使用了用于客户端和服务器之间连接的示例代码。现在我想将该控制台应用程序转换为 WPF，但是当我运行客户端时出现此错误（当然我在运行客户端之前运行服务器）：

> *在 net.pipe://localhost/PipeReverse 上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。*

另外我应该说示例代码没有任何`app.config`文件。

在`MainWindow.xaml`客户文件中：

```
[CallbackBehavior( ConcurrencyMode=ConcurrencyMode.Multiple,UseSynchronizationContext=false )]
public partial class MainWindow : Window,ICallbacks
{
    public void MyCallbackFunction(string callbackValue)
    {
        Dispatcher dispatcher=Dispatcher.CurrentDispatcher;
        dispatcher.BeginInvoke( new Action(
        () => textBox1.Text = callbackValue ) );
        //     MessageBox.Show( "Callback Received: {0}",callbackValue );
    }
    IStringReverser _channel;
    [ServiceContract( SessionMode = SessionMode.Required,
    CallbackContract = typeof( ICallbacks ) )]
    public interface IStringReverser
    {
        [OperationContract]
        string ReverseString(string value);
    }

    public MainWindow()
    {
        InitializeComponent();
        MainWindow myCallbacks = this;
        var pipeFactory = new DuplexChannelFactory<IStringReverser>(
           myCallbacks,
           new NetNamedPipeBinding(),
           new EndpointAddress(
              "net.pipe://localhost/PipeReverse" ) );
        ThreadPool.QueueUserWorkItem( new WaitCallback(
            (obj) =>
            {
                _channel = pipeFactory.CreateChannel();
            } ) );
    }

    private void button1_Click(object sender,RoutedEventArgs e)
    {
      _channel.ReverseString( "Hello World" );
    }
}
public interface ICallbacks
{
    [OperationContract( IsOneWay = true )]
    void MyCallbackFunction(string callbackValue);
} 
```

在`MainWindow.xaml`服务器文件中：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender,RoutedEventArgs e)
    {
        using (ServiceHost host = new ServiceHost(
       typeof( StringReverser ),
        new Uri[]{
      new Uri("net.pipe://localhost")
        } ))
        {
            host.AddServiceEndpoint( typeof( IStringReverser ),
              new NetNamedPipeBinding(),
              "PipeReverse" );

            host.Open();

            MessageBox.Show( Properties.Resources.Service_is_available__Press__ENTER__to_exit_ );
            host.Close();
        }
    }
}

[ServiceContract(SessionMode = SessionMode.Required,
                 CallbackContract = typeof( ICallbacks ) )]
public interface IStringReverser
{
    [OperationContract]
    string ReverseString(string value);
}

public interface ICallbacks
{
    [OperationContract( IsOneWay = true )]
    void MyCallbackFunction(string callbackValue);
}

public class StringReverser : IStringReverser
{
    public string ReverseString(string value)
    {
        char[] retVal = value.ToCharArray();
        int idx = 0;
        for (int i = value.Length - 1;i >= 0;i--)
            retVal[idx++] = value[i];

        ICallbacks callbacks =
     OperationContext.Current.GetCallbackChannel<ICallbacks>();

        callbacks.MyCallbackFunction( new string( retVal ) );

        return new string( retVal );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:42:16.723

问题就这么简单解决了，

所有的问题是我在单击服务器中的按钮后错误地关闭了连接！

# android - 如何自行卸载应用程序？

> ID：12771444
> 
> 赞同：14
> 
> 时间：2012-10-07T18:13:37.123
> 
> 标签：android, uninstallation

问题是——我的应用程序从 UI POV 获得管理员权限非常容易。但是，一旦应用程序拥有这些权限，卸载它就很麻烦（用户必须首先撤销这些管理员权限；如果没有，卸载时没有信息说明卸载出了什么问题——至少在 Ace 2 Android 2.3 上）。

因此，在应用程序中具有卸载功能会很有用——它会首先撤销管理员权限，然后进行正常卸载。

另一种方法是通知应用程序即将被卸载，但是 AFAIK 这是不可能的 - 请参阅：[http ://code.google.com/p/android/issues/detail?can=2&q=33315&colspec=ID% 20Type%20Status%20Owner%20Summary%20Stars&id=33315](http://code.google.com/p/android/issues/detail?can=2&q=33315&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&id=33315)

到目前为止，我只提出了解决方法——如果应用程序已准备好卸载，请添加一个带有状态信息的“清除卸载”按钮，以便为用户节省问题。但随后用户必须采取另一个步骤来卸载我的应用程序。总之很麻烦。

那么——如何卸载自我？

## 解决方案

只是为了将代码保留在 SO 网站上：

```
Uri packageURI = Uri.parse("package:"+MyMainActivity.class.getPackage().getName());
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE, packageURI);
startActivity(uninstallIntent); 
```

[该代码是从Android Tales Blog](http://android.amberfog.com/?p=98)复制的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T18:28:55.470

看看这几个问题（它们与安装/卸载有关）

[卸载应用程序的隐含意图？](https://stackoverflow.com/questions/7868460/implicit-intent-to-uninstall-application)

[以编程方式安装/卸载 APK（PackageManager 与 Intents）](https://stackoverflow.com/questions/6813322/install-uninstall-apks-programmatically-packagemanager-vs-intents)

# perl - Unicode::GCString 和 UTF8 标志

> ID：12771446
> 
> 赞同：1
> 
> 时间：2012-10-07T18:14:04.007
> 
> 标签：perl, unicode, string-length

[Unicode::GCString](http://search.cpan.org/perldoc?Unicode%3A%3AGCString)是否有这样的设计方式为 UTF8 标志（[已接受的答案](https://stackoverflow.com/questions/9390884/unicodegcstring-error-message-new-unicode-string-must-be-given)）分配意义，或者这在未来的版本中会发生变化吗？

# java - 在 Android 上拍摄并下载照片

> ID：12771447
> 
> 赞同：0
> 
> 时间：2012-10-07T18:14:07.127
> 
> 标签：java, android, android-camera, photo

我花了几个小时试图让这段代码成功拍照并将其下载到我手机的 SD 卡中。由于某种原因，它只是不将照片保存到图片文件中。我不确定我做错了什么，但如果有人能给我一个提示，那就太好了。

```
public class PhotoTaker extends Activity {

    private Camera mCamera;
    private CameraPreview mCameraPreview;
    private File pictureFile;
    private CountDownTimer timer;
    public byte[] dataArray;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.photoview);

        mCamera = getCameraInstance();
        mCameraPreview = new CameraPreview(this, mCamera);

        FrameLayout preview = (FrameLayout) findViewById(id.camera_preview);
        preview.addView(mCameraPreview);

        //Getting the actual picture
        final PictureCallback mPicture = new PictureCallback() {

            public void onPictureTaken(byte[] data, Camera camera) {
                       picturereFile = getOutputMediaFile();
                       #the pictureFils always is equal to null here and it doesn't write out anywhere
                       if (pictureFile == null){
                    return;
                }

                try {
                    FileOutputStream fos = new FileOutputStream(pictureFile);
                    dataArray = data;
                    fos.write(data);
                    fos.close();

                } catch (FileNotFoundException e) {
                    Log.d("filenotfound", null);

                } catch (IOException e) {
                    Log.d("ioexception", null);

                }

            }

        };

        //Adding listener
        final Button captureButton = (Button) findViewById(id.button_capture);
        captureButton.setOnClickListener(
                new View.OnClickListener() {

                    public void onClick(View v) {
                        mCamera.takePicture(null, null, mPicture);
                        timer.cancel();
                    }
                });

/** Create a File for saving the image */

private static File getOutputMediaFile(){

    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
            Environment.DIRECTORY_PICTURES), "MyCameraApp");

    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    File mediaFile;
    mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "IMG_"+ timeStamp + ".jpg");

    return mediaFile;
}

    } 
```

这是 LogCat 中的错误：

```
E/dalvikvm(524): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

这应该可以解决，但它仍然给我同样的错误：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# java - 如何在没有 xml 的情况下验证使用 @ManagedProperty 注入的 bean 属性？

> ID：12771453
> 
> 赞同：0
> 
> 时间：2012-10-07T18:15:46.033
> 
> 标签：java, validation, jsf-2, annotations, javabeans

我发现很多讨论如何注入属性的主题，但没有一个建议验证方法。这是我的豆：

```
@ManagedBean
@RequestScoped
public class MyBean {       
    @ManagedProperty(value = "#{param.key}")
    private String keyFromUser;
} 
```

目前，如果我拥有的 GET 参数中缺少 param.key

```
com.sun.faces.mgbean.ManagedBeanCreationException: An error occurred performing resource injection on managed bean myBean 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:04:53.093

改为使用`<f:viewParam>`。就像`<h:inputText>`，但是对于 GET 请求参数。因此，它允许通过`validator`属性甚至标签注册验证器。你甚至可以附加一个。`<f:validator>``<f:validateXxx>``<h:message>`

```
<f:metadata>
    <f:viewParam id="key" name="key" value="#{myBean.keyFromUser}" validator="myValidator" />
</f:metadata>
<h:message for="key" /> 
```

您只需将`@PostConstruct`作业移至`<f:event type="preRenderView">`.

### 也可以看看：

*   [ViewParam 与 @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:51:03.600

我很少使用 JSF-beans，所以我必须说我不了解您的功能要求。也许注释一个方法@PostConstruct 并在那里进行验证？那是我把依赖注入解决后需要做的事情

作为不直接回答问题的旁注，我认为 CDI 对于这样的场景非常强大。

看起来像：

```
@Inject
@RequestParam (validator = MyValidator.class) 
```

如果您有兴趣，我可以提供实际的完整实施

# c++ - 从 void* 到 char* 的无效转换 C++ 从文件中读取链表

> ID：12771454
> 
> 赞同：4
> 
> 时间：2012-10-07T18:15:50.310
> 
> 标签：c++, linked-list, getline

我试图编写一个从文本文件读取到链表的程序

这是列表结构。

```
#include <iostream> 
#include <string>
#include <fstream>
using namespace std;

struct Video { 
char video_name[1024];      //  video name
int ranking;                // Number of viewer hits
char url[1024];             //  URL
Video *next;  // pointer to Video structure
}  *head = NULL;        // EMPTY linked list 
```

这是读入的代码：

```
void load()
{
struct Video *temp;
temp = (Video*)malloc(sizeof(Video)); //allocate space for node 
temp = head;
ifstream rankFile ("Ranking.dbm");
if (rankFile.is_open())
{
    while ( rankFile.good() )
    {
        cin.getline(rankFile, temp->video_name, "\n");
        cin.getline(rankFile, temp->ranking, "\n");
        cin.getline(rankFile, temp->url, "\n");
        temp = temp->next; 

    }
    myfile.close();
}

else cout << "Unable to open file"; 

return ;

} 
```

它正在从如下所示的文本文件中读取`Ranking.dbm`：

```
bagheera
20
bagheera.com
sushi
60
sushi.com
wicket
99
wicket.com
teek
100
teek.com 
```

但是我收到一条错误消息：在我从文件中读取的`Invalid conversion from void* to char*`所有 3 条语句中。`cin.getline()`我需要能够从我的文件 () 中逐行读取`Ranking.dbm`并将每组 3 行存储到`temp->video_name`，`temp->ranking`然后`temp->url`创建一个新节点并保存接下来的 3 行......依此类推，直到我读入文件中的所有内容。

我怎样才能做到这一点？我是以完全错误的方式解决这个问题还是这只是一个语法错误？我仍然掌握 C++ 的窍门：/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T18:21:59.053

这是不正确的使用[`std::istream::getline()`](http://en.cppreference.com/w/cpp/io/basic_istream/getline)：

```
cin.getline(rankFile, temp->video_name, "\n"); 
```

并且没有任何意义，因为涉及两个输入流：`cin`和`rankFile`. 正确的调用（但不是最可取的）是：

```
rankFile.getline(temp->video_name, 1023); 
```

建议：

*   使用[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)而不是`char[]`使用[`std::getline(in, std::string&)`](http://en.cppreference.com/w/cpp/string/basic_string/getline).
*   用于`operator>>`阅读，`int`因为您不能`std::getline()`用于此。
*   检查*每个*读取操作的结果。
*   不要`malloc()`在 C++ 中使用`new`和`delete`.
*   如果不需要，请不要动态分配。
*   例如，使用其中一个 STL 容器来保存一个列表，而不是自己实现它[`std::vector<Video>`](http://en.cppreference.com/w/cpp/container/vector)。

例如：

```
struct Video { 
    std::string video_name;
    int ranking;
    std::string url;
};

std::vector<Video> load()
{
    std::vector<Video> result;
    std::ifstream rankFile("Ranking.dbm");
    if (rankFile.is_open())
    {
        Video temp;
        std::string line;
        while (std::getline(rankFile, temp.video_name) &&
               rankFile >> temp.ranking &&
               std::getline(rankFile, line) && // need to skip 'ranking's
                                               // unread new-line
               std::getline(rankFile, temp.url))
        {
            result.push_back(temp);
        }
    }
    else
    {
        std::cerr << "Unable to open file"; 
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:21:50.963

```
getline(rankFile, temp->video_name); // You should write it this way 
```

# asp.net - MVC 4 Web Api Odata $Filter 问题

> ID：12771458
> 
> 赞同：0
> 
> 时间：2012-10-07T18:16:11.087
> 
> 标签：asp.net, backbone.js, asp.net-web-api

我有一个我似乎无法弄清楚的问题。您的帮助将不胜感激。我正在使用 Odata Nuget 包。现在我有这个网址：

```
localhost:3196/api/leads/get/?$filter=DateSent+gt+datetime'2012-09-06' 
```

完美运行。如果我有以下

```
http://10.211.55.4:3196/api/leads/get/?$filter=DateSent+gt+datetime'2012-09-06'&_=1349632487099 
```

我收到此错误 - **')' 或操作符应位于 '(_ eq 'datetime'1349632487099')' 中的第 16 位。**在我安装软件包之前，以下工作。

```
http://10.211.55.4:3196/api/leads/get/?$filter=(DateSent+gt+datetime'2012-09-06')&_=1349632487099 
```

然而仍然没有运气。你能帮忙吗？顺便说一句，如果我将过滤器放在 url 的末尾，它就可以工作。这并不理想。Backbone 自动附加缓存变量，我不想覆盖/破解它。

谢谢

泰隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T03:37:42.903

我刚试过这个，它似乎工作正常。从错误消息中，似乎 url 没有被正确编码。您还提到将 $filter 放在最后似乎有效，这也可能意味着 url 编码有问题。那可能吗 ？

# objective-c - 尝试使用发布方法时出现编译器错误

> ID：12771465
> 
> 赞同：0
> 
> 时间：2012-10-07T18:17:04.613
> 
> 标签：objective-c, memory-management, compiler-errors

这让我有点困惑，因为我正在阅读 2009 年的 Objective-C 书籍（这是我的图书馆唯一的版本）并且作者不断提醒读者释放内存，但是当我尝试使用此方法时出现错误. 我阅读了一些关于它的内容，发现 release 方法已被弃用，但是我需要做些什么来代替 release 方法来管理内存，或者 Objective-C 现在有垃圾收集吗？

例如：

```
NSString *s = [[NSString alloc] init];
[s release]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T18:19:19.880

这不是垃圾收集，而是`Automatic Reference Counting`( `ARC`) 为您工作。

要遵循书中的示例，请在 Xcode 中创建一个新项目并取消选择使用 ARC 的选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T18:19:36.077

您已启用 ARC；调用`retain`并由`release`编译器自动插入。如果您想手动进行内存管理，请在目标的构建设置中禁用 ARC。在 OS X 上，也有垃圾收集，但它已被弃用。

# c# - C# 列表问题，包含列表

> ID：12771471
> 
> 赞同：0
> 
> 时间：2012-10-07T18:17:45.877
> 
> 标签：c#, asp.net, c#-4.0

我有一个问题，我似乎无法基本上解决它我有两个 int 列表，一个可能包含或不包含另一个，我需要绘制一个 if 条件来检查传入列表中的 int 集合来自并做出决定，所以我使用了

所以我有一个布尔函数

```
public bool firstiterate()
{
  var listint= new List<int>(){1,2,3,4};
  var incoming= returned.Select(s=s.ref);

  if(incoming.All(listint.Contains)
  {
  //dosomething
  }
} 
```

第二个功能为：

```
public bool seconditerate()
{
  var listint= new List<int>(){1,2,3,4};
  var incoming= returned.Select(s=s.ref);

  if(incoming.Any(listint.Contains) && !incoming.All(listint.Contains)
  {
  //dosomething
  }
} 
```

但是我所有的布尔值在所有情况下都返回 null，即使任何一个都应该返回一些东西，我做错了什么。欢迎任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:49:49.963

这无法重现。把它变成一个小而完整的程序。目前，错误不在您认为的位置。

我的代码：

```
 var returned = new List<int> { 4, 5, 8 };

        var listint = new List<int>() { 1, 2, 3, 4 };
        var incoming = returned.Select(s => s);       //

        if (incoming.All(listint.Contains))
        {
            Console.WriteLine("if1");
        }

        if (incoming.Any(listint.Contains) && !incoming.All(listint.Contains))
        {
            //dosomething
            Console.WriteLine("if2");
        } 
```

这将打印“if2”

# unit-testing - 如何使用 IDEA 为新方法创建测试存根？

> ID：12771472
> 
> 赞同：11
> 
> 时间：2012-10-07T18:17:58.477
> 
> 标签：unit-testing, intellij-idea

假设你有一个新的 Main 类，有 2 个方法 a 和 b

按下`Control-Shift-T`允许我们创建新的测试类并为这两种方法创建存根

![在此处输入图像描述](../Images/319126490df810d6a2bf8c40905113fc.png)

好的，现在如果我再添加 1 个方法`c`，我想在已经存在的 MainTest 类中为它添加一个测试

请使用IDEA如何做到这一点？`Control-Shift-T`不起作用，因为它试图创建一个已经存在的测试类。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T18:21:46.377

此功能[尚未实现](http://youtrack.jetbrains.com/issue/IDEA-90247)，请为链接请求投票。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-07T09:12:14.600

在 Idea 14.x 中，您可以按`Alt+Enter`方法名称，如果有一些缺失的测试，您可以选择名为“**生成缺失的测试方法**”的选项

[![生成遗漏的测试方法](../Images/62ab8727922bebe7d9ca19435a104e93.png)](https://i.stack.imgur.com/CApcc.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-06T15:39:24.227

现在已添加此功能。CTRL+SHIFT+T | 元+Shift+T

# windows - 查找 Windows 用户的“真实”应用程序数据文件夹？

> ID：12771473
> 
> 赞同：10
> 
> 时间：2012-10-07T18:18:11.663
> 
> 标签：windows, delphi, winapi, special-folders, appdata

我有一个 Delphi 6 应用程序，与大多数 Windows 应用程序一样，它读取/写入数据到用户的“本地应用程序数据”文件夹。我使用下面的代码来确定该文件夹。到目前为止，该代码对我的大多数用户都有效。我遇到了一个用户，其本地应用程序数据不在预期的文件夹中：

```
C:\Users\Bob\AppData\Roaming\ 
```

通常本地应用程序数据文件夹解析为：

```
C:\Documents and Settings\Bob\Application Data\ 
```

这个用户的特殊情况奇怪的是，通常在 HKEY_LOCAL_MACHINE 中找到的几个注册表项实际上位于 HKEY_CURRENT_USER 中。它们在 Windows 7 上运行。

由于缺乏更好的词，有没有办法为用户获取“真实”的应用程序数据，以便我可以更好地导航这种情况？如果是在 CSIDL_APPDATA、CSIDL_COMMON_APPDATA 和 CSIDL_LOCAL_APPDATA 特殊文件夹之间进行智能选择，这样做的逻辑是什么？如您所知，我正在寻找一种通用功能，该功能可以根除正确的应用程序数据文件夹，而不管用户正在运行的 Windows 版本或其特定的 PC 配置如何。

我发现这个 Stack Overflow 帖子似乎有答案，但它使用的是 .NET 库中的函数，我使用的是 Delphi 6。如果这个解决方案回答了我的问题，有人可以告诉我在 Delphi 中复制它的快速方法：

[如何获取当前用户的“应用程序数据”文件夹的路径？](https://stackoverflow.com/questions/915210/how-can-i-get-the-path-of-the-current-users-application-data-folder)

```
// Function to get the app data special folder.
function GetAppdataFolder: string;
begin
   Result := GetSpecialFolderLocation(CSIDL_APPDATA);
end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T18:42:29.107

您链接到使用的 .net 代码与 .net 代码`Environment.SpecialFolder.ApplicationData`完全相同`CSIDL_APPDATA`。因此，您的代码已经等同于您链接到的 .net 代码。并且这些都指的是相同的位置[`FOLDERID_RoamingAppData`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378457.aspx)。

查看[`FOLDERID_RoamingAppData`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378457.aspx). 它说：

```
默认路径 %APPDATA% (%USERPROFILE%\AppData\Roaming)
旧版默认路径 %APPDATA% (%USERPROFILE%\Application Data)

```

“默认路径”是您将在 Vista 或更高版本上看到的内容。“传统路径”是您在 XP 上看到的。

您观察到的不同行为只不过是 XP 和 Vista/7/8 之间的预期差异。

在我的 Windows 机器上，

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) 
```

评估为

```
C:\Users\heff\AppData\Roaming 
```

换句话说，您的代码已经在做正确的事情。您根本不需要对其进行任何更改。继续使用`GetSpecialFolderLocation(CSIDL_APPDATA)`。

* * *

> 这个用户的特殊情况奇怪的是，通常在 HKEY_LOCAL_MACHINE 中找到的几个注册表项实际上位于 HKEY_CURRENT_USER 中。

这并不少见。应用程序经常配置默认设置，`HKLM`然后将它们复制到`HKCU`应用程序首次运行时。在不了解相关设置的更多详细信息的情况下，很难对问题的这方面发表评论。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T22:21:12.553

> 如果是在 CSIDL_APPDATA、CSIDL_COMMON_APPDATA 和 CSIDL_LOCAL_APPDATA 特殊文件夹之间进行智能选择，这样做的逻辑是什么？

是的，这只是一个问题。您的代码已经按预期工作。

`CSIDL_APPDATA`( `FOLDERID_RoamingAppData`) 用于调用线程的当前用户帐户（可以模拟）在多台机器上可访问的数据（即“漫游”数据）。

`CSIDL_LOCAL_APPDATA`( `FOLDERID_LocalAppData`) 仅用于调用线程的当前用户帐户在本地计算机上可访问的数据（即“本地”数据）。

`CSIDL_COMMON_APPDATA`( `FOLDERID_ProgramData`) 仅适用于本地计算机上的任何用户帐户可访问的数据（不是“漫游”数据）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-07T18:41:12.133

您可以使用它（包装器）。您需要将 ShlApi 添加到您的 uses 子句中。`CSIDL_APPDATA`就像上面的示例一样传递它。有关各种`CSIDL_`值的列表，请参阅[此处的 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762494%28v=vs.85%29.aspx)

```
function GetShellFolder(CSIDLFolder : integer) : string;
begin
  SetLength(Result, MAX_PATH);
  SHGetSpecialFolderPath(0, PChar(Result), CSIDLFolder, false);
  SetLength(Result, StrLen(PChar(Result)));
  if (Result <> '') then
    Result  := IncludeTrailingBackslash(Result);
end; 
```

如果您支持较早的 Windows（XP 及更低版本），您的文本出现的情况就是这种情况，您可以`SHGetFolderPath`改用：

```
function GetFolderPath(Wnd: HWnd; CSIDLFolder: Integer): string;
begin
  SetLength(Result, MAX_PATH);
  Result := SHGetFolderPath(Wnd, CSIDLFolder, nil, 0, PChar(Result);
  SetLength(Result, StrLen(PChar(Result)));
end; 
```

如果您只支持 Vista 及更高版本，则应[`SHGetKnownFolderPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762188%28v=vs.85%29.aspx)改为使用，并将其传递给`KNOWNFOLDERID`.

至于注册表问题，Windows Vista 和 7 对非管理员用户可以写入的位置的限制要大得多，其中一个发生的地方是 HKLM 和 HKCR。以前在这些蜂箱中的许多物品现在都在 HKCU 中，或者在那里镜像。

# twitter - 社交网站如何管理数据？

> ID：12771474
> 
> 赞同：2
> 
> 时间：2012-10-07T18:18:11.660
> 
> 标签：twitter, social-networking, google-plus

我一直想知道 twitter、facebook、google plus 等社交网站的架构。只是出于好奇，我想知道，他们如何管理所有带有评论的长篇和短篇文章（包括图片、网络链接等）。他们将它们存储在数据库中还是存储在 xml 文件中或一些混合和匹配中？他们实际上是如何管理如此大量的数据的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:25:22.707

Facebook 今年早些时候在 IBM 的硅谷实验室进行了一次技术演讲，并谈到了他们对 Apache hBase 的使用以及 MySQL 如何无法很好地对其进行扩展。他们没有深入研究数据的结构，而是深入研究为系统提供动力的基础设施以及他们如何专注于非常高速的读取操作。

一般来说，规模和速度对于像这样大的站点来说是一个巨大的问题，它们严重依赖于系统内置自动冗余的分片数据库结构。它们通常不使用参照完整性等数据库概念，甚至不使用定义的模式，因为它们会极大地影响数据库性能。对于 Facebook，如果我没记错的话，他们基本上存储了描述数据的 JSON 对象，并且可以在必要时轻松地将新字段添加到对象中以支持新的数据结构。如果您在一个巨大的表上并跨许多不同的独立机器进行列操作，那么让它们同步而不是让系统完全脱机将是一场噩梦。

[Facebook 页面](https://www.facebook.com/UsingHbase)上的HBase有一些有趣的图形和信息，您可能会发现它们很有帮助。

# php - 如何让函数读取数据库，抓取约 10 个帖子（每个帖子 4 列）并返回所有数据？

> ID：12771478
> 
> 赞同：0
> 
> 时间：2012-10-07T18:18:53.753
> 
> 标签：php, mysql, arrays, foreach, mysqli

我正在尝试在 php 中编写一个函数，以使用 mysqli 函数从 mysql 数据库中读取帖子信息（标题、内容、作者、已发布）。我对一切都很陌生，包括mysqli，但我已经尽力而为，目前有这个：

```
foreach(readPosts($pageid) as $posts)
        echo $posts; 
```

这只是显示第一篇文章。功能如下

```
function readPosts($pageid) {
$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASS, DB_NAME);
if (mysqli_connect_errno()) {
    return false;
}
$pageid = preg_replace("/[^0-9]/","",$pageid);
if ($result = $mysqli->query("SELECT * FROM posts WHERE pageID = '$pageid'")) {
    while($row = $result->fetch_array()) {
        $time1 = date('H:i \o\n jS M Y', $row['publishedtime']);
        $postarray[$i++] = $row['title'];
        $postarray[$i++] = $row['content'];
        $postarray[$i++] = $row['author'];
        $postarray[$i++] = $time1;
    }
    $result->close();
}
mysqli_close($mysqli);
return $postarray; 
```

}

所以我的问题是，我如何让它给我所有的信息，而不仅仅是一个帖子信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:51:55.253

在 foreach 循环中，您每个 readPost() 调用都会创建一个新的 mysql 连接，该连接在返回之前关闭。您应该必须在 foreach 之前建立连接，像数组一样遍历选定的数据，并且可以在最后一个循环之后关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:21:38.497

您可以使用 $result->fetch_all() 在[这里查看文档](http://php.net/manual/en/mysqli-result.fetch-all.php)

# documentation - reStructuredText 中粗体字的一部分

> ID：12771480
> 
> 赞同：38
> 
> 时间：2012-10-07T18:19:01.550
> 
> 标签：documentation, formatting, restructuredtext

如何在 reStructuredText 中使单词的一部分变为粗体？

这是我需要的一个示例：“.rst 代表**r** e **s** structured **t** ext。”

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-08T11:54:04.257

我很惊讶你不能简单地写

```
.rst stands for **r**e**s**tructured **t**ext. 
```

但[reStructuredText 规范](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#inline-markup)确实指出内联标记必须后跟空格或 or 之一`-` `.` `,` `:` `;` `!` `?` `\` `/` `'` `"` `)` `]` `}`，`>`因此上述 reStructuredText 字符串*无效*。但是，只需稍作更改即可获得带有反斜杠转义的有效[*字符*标记。](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#character-level-inline-markup)将上述更改为

```
.rst stands for **r**\ e\ **s**\ tructured **t**\ ext. 
```

工作正常。要查看实际情况，请尝试使用[在线 reST 到 HTML 转换器](http://www.tele3.cz/jbar/rest/rest.html)。

# c# - 如何查询大表和列表对象

> ID：12771483
> 
> 赞同：0
> 
> 时间：2012-10-07T18:19:23.817
> 
> 标签：c#, asp.net, sql, linq

我有一个大表，大约有 120 万行需要查询。包含在同一字段中。有一个字段combined_name 需要使用列表进行查询。我现在尝试只用一个字段来检查性能，这反映在代码中。我写它的方式太长了。有没有一种方法我不必将表加载到内存中？

```
JDataClassDataContext db = new JDataClassDataContext();
var fullName = txtSearchBox0.Text.Trim();
List<string> firstName = new List<string>(txtSearchBox1.Text.Split(',').Select(x => Convert.ToString(x)).ToList());

var rows = (from c in db.defendants_ALLs.AsEnumerable()
      where c.combined_name.Contains(fullName)
          && firstName.Any(n => c.combined_name.Contains(n))
      select c).ToList();     

dlSearch.DataSource = rows;
dlSearch.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:24:51.547

查看[Skip()](http://www.dotnetperls.com/skip)和[Take()](http://www.dotnetperls.com/take)方法。

你可以像这样使用它：

```
var rows = (from c in db.defendants_ALLs.AsEnumerable()
           where c.combined_name.Contains(fullName)
           && firstName.Any(n => c.combined_name.Contains(n))
           select c).OrderBy(o => o.id).Skip(amount).Take(otherAmount).ToList(); 
```

在哪里`amount`并`otherAmount`表示您要从数据库中实际获取的记录数量。这意味着您只能请求 30 条记录，而不是全部 120 万条记录（== 如果您只做 a 会发生什么`.ToList()`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:32:18.760

最好的方法是生成一个好的老式 SQL 查询，例如“SELECT fields FROM table WHERE combine_name LIKE '%fullname%' AND firstName IN ('first', 'next',...)”你应该看看 SqlConnection和 SqlCommand 和 SqlDataReader。它与 linq 稍有不同，但速度更快（如果您有正确的索引）

# java - 多项式的图形比例

> ID：12771487
> 
> 赞同：0
> 
> 时间：2012-10-07T18:20:02.320
> 
> 标签：java, graph

我必须创建一个线性逼近任何多项式的程序，我想知道是否有一种算法可以自动缩放 x 轴和 y 轴，以使图形看起来不会过度拉伸或缩小？

# php - yiic migrate 命令不执行从模块的迁移

> ID：12771489
> 
> 赞同：7
> 
> 时间：2012-10-07T18:20:08.923
> 
> 标签：php, yii, migration

我正在尝试在基于 Yii 的应用程序中安装用户模块。为此，我必须从以下位置迁移文件：

```
webapp/protected/modules/user/migrations 
```

我试图运行`yiic migrate --migrationPath=user.migrations`，但出现错误：

```
the migration directory does not exist: user.migrations 
```

我读到我必须将 user.migrations 设置为别名，但我不知道该怎么做。

我还读到，迁移的默认文件夹由`basePath`值确定，在主配置文件 ( `protected/config/main.php`) 中设置。我已经改变了它，它仍然不能正常工作。

有什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T05:32:05.073

试试这个：

`yiic migrate --migrationPath=application.modules.user.migrations`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-12T21:44:19.007

从您的命令行打开**受保护文件夹**的 yiic 。不是**框架文件夹**的 yiic 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-10T20:32:04.333

如果有人似乎无法让它工作，这里有一些细节：

使用：*./yiic migrate --migrationPath=application.dirName.migrations*

怎么会？检查类**MigrateCommand**。公共属性*$migrationPath='application.migrations'*其中*'application'*将变为*'/home/yourUser/yourYiiApp/protected/*并且*'migrations'*将在解析后变为*'migrations'*。因此，如果您正在运行*./yiic*只需指向*dirname/migrationFolder*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-05T23:00:26.917

万一其他人为此苦苦挣扎，我必须进入受保护的文件夹并强制它使用正确的 yiic：

`php yiic.php migrate --migrationPath=application.modules.user.migrations`

# php - 如何使用 PHP 从 BLOB 字段中删除 HTML 标签？

> ID：12771494
> 
> 赞同：-1
> 
> 时间：2012-10-07T18:21:06.620
> 
> 标签：php, mysql

我在我的一个网站上使用 Opencart，并使用 MySQL 来检索一些字段。其中之一是 BLOB，内容类似于：

```
"<p>SOME TEXT HERE</p>". 
```

我使用的 MySQL 语法如下所示：

```
$query_desc = mysql_query("SELECT description FROM product_description WHERE product_id = $id_produs AND language_id = 2");
    while($row_desc = mysql_fetch_assoc($query_desc)) {
        $desc = $row_desc['description'];
    } 
```

我想要做的是删除 HTML 标签，但使用 strip_tags 或 str_replace 不起作用。

我也尝试使用 SELECT CONVERT 但也失败了。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:29:24.783

我通过在变量上使用 html_entity_decode 让它工作。问题起源于 OpenCart 的某个地方，将尝试找出确切的位置！

如果其他人发现这样的问题，只需 html_entity_decode 你的字符串，然后你可以使用 str_replace、strip_tags 或 preg_replace，它工作正常。

# ruby-on-rails - Gem 由于不同的字段名创建 MySQL 错误消息

> ID：12771496
> 
> 赞同：0
> 
> 时间：2012-10-07T18:21:25.190
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem

我正在玩 Acts-As-Taggable Rails gem。我收到以下消息，因为我相信标签模型正在寻找不存在的“post_id”（而不是帖子模型/表中的“id”）。

我是否需要修改模型或控制器才能使其正常工作？

当我尝试显示帖子时发生错误。

更新： - 该错误似乎是由帖子视图（show.html.erb）引起的。帖子视图是指帖子模型（tag_list）。

错误：

```
 Mysql2::Error: Unknown column 'taggings.post_id' in 'where clause': SELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`post_id` = 4 
```

后控制器（显示）；

```
def show
  @post = Post.find(params[:id])

 respond_to do |format|
  format.html # show.html.erb
  format.json { render json: @post }
   end
 end 
```

发布 show.html.erb：

```
<%= form_for(@post) do |post_form| %>
..
<div class="field">
  <%= post_form.label :tag_list, "Tags (separated by commas)" %><br />
  <%= post_form.text_field :tag_list %>
</div> 
```

岗位型号：

```
class Post < ActiveRecord::Base
  attr_accessible :content, :name, :title, :tag_list #:tags_attributes

  has_many :taggings
  has_many :tags, through: :taggings

  def self.tagged_with(name)
Tag.find_by_name!(name).posts
  end

  def self.tag_counts
    Tag.select("tags.*, count(taggings.tag_id) as count").
        joins(:taggings).group("taggings.tag_id")
  end

  def tag_list
    tags.map(&:name).join(", ")
  end

 def tag_list=(names)
    self.tags = names.split(",").map do |n|
      Tag.where(name: n.strip).first_or_create!
    end
  end

#Validations
  validates :name,  :presence => true
  validates :title, :presence => true,
        :length => { :minimum => 5 }

  has_many :comments, :dependent => :destroy

#  accepts_nested_attributes_for :tags, :allow_destroy => :true,
#                                :reject_if => proc { |attrs| attrs.all? { |k, v| v.blank? } }
end 
```

标签型号：

```
class Tag < ActiveRecord::Base
 belongs_to :post
 has_many :taggings
 has_many :posts, through: :taggings
end 
```

标记模型：

```
class Tagging < ActiveRecord::Base
 belongs_to :tag
belongs_to :post
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:00:14.477

经过几个小时的折腾，我终于得到了这个工作。基本上我必须删除所有以前对标签的引用——特别是在 post 控制器和 post 视图中。

然后我按照下面链接描述的步骤安装 Acts-As-Taggable gem。 [http://ericlondon.com/tag/acts-as-taggable-on](http://ericlondon.com/tag/acts-as-taggable-on)

```
# add acts as taggable on gem, for tagging (clearly optional)
# edit file: Gemfile
+gem 'acts-as-taggable-on'

# execute bundle to install gems
$ bundle

# create Post model
$ rails generate model Post title:string content:text

# add taggable property to Post model & make mass-assignable
# file: app/models/post.rb
 class Post < ActiveRecord::Base
+  attr_accessible :content, :title, :tag_list
+  acts_as_taggable_on :tags
 end

# run acts as taggable migration
$ rails generate acts_as_taggable_on:migration

# setup database
$ rake db:migrate 
```

我不得不从我的帖子模型中删除名为“名称”的字段，因为这会导致标签模型中的字段名称“名称”发生冲突。

# java - 创建和使用匿名 Runnable 类的最佳方式

> ID：12771500
> 
> 赞同：42
> 
> 时间：2012-10-07T18:21:41.690
> 
> 标签：java, multithreading, runnable

我想为`Runnable`. 有两种方法，但我不知道他们是否做同样的事情：

方法一：`Runnable`直接使用，然后调用`run()`：

```
new Runnable() {
    @Override
    public void run() {
    }
}.run(); 
```

方法二：创建一个匿名`Runnable`并粘贴到`Thread`，使用该`start()`方法而不是`run()`：

```
new Thread(new Runnable() {
    @Override
    public void run() {
    }
}).start(); 
```

我认为方法二显然是正确的。但是，我不知道它是否与方法一做同样的事情。我们可以直接调用`run()`方法`Runnable`吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-07T18:22:35.933

不，您通常不会`run()`直接在 Runnable 上调用，因为那样您不会获得后台线程。如果您不想要并且需要后台线程，则`run()`直接调用即可，否则，如果您想创建后台线程并从其中运行 Runnable，则必须创建一个新线程，然后将 Runnable 传入其构造函数, 并调用`start()`.

此外，还有其他方法可以完成此任务，包括使用 Executors 和 ExecutorServices，您应该研究一下它的用途，因为它们比使用简单的 Thread 对象提供更多的灵活性和功能。

此外，您还需要了解[Future](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html)接口和[FutureTasks](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html)类的使用，它们与 Runnables 类似，只是它们允许您在完成时返回结果。如果您使用过 SwingWorker，那么您已经使用过 Future 接口而没有意识到它。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-07T18:38:05.643

正如其他人所提到的，使用 Thread 类是正确的方法。但是，您还应该考虑使用 Javas [Executors](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)框架来处理正在运行的线程。

```
Executors.newSingleThreadExecutor().execute(new Runnable() {
    @Override 
    public void run() {
        // code in here
    }
}); 
```

当然，直接使用 Thread 就可以了。但通常建议（或首选）使用该框架。让 Java 为您处理细节。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-07T18:29:47.847

`Runnable`接口必须在`Thread`. 如果您想找到另一种内联包装的方法，即 a 中的一段代码`Thread`，请尝试：

```
Thread t = new Thread()
{
     public void run()
     {
        // put whatever code you want to run inside the thread here.
     }
};

t.start(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-07T19:42:12.727

我想在这个讨论中添加一些东西（你已经得到了很好的答案）。
如果您的 Runnable 对象是无状态的，为了减少内存分配（这需要时间 + 消耗一些内存 - 考虑一个应用程序大量使用线程的情况） - 请考虑使用一个静态字段来保存可运行对象。

```
private static Runnable runnable = new Runnable() { //Once again - do this only if this is a statelss object!
   public void run() {
   }
} 

//Use the runnable somewhere in the code 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-14T18:33:43.330

在方法一中，它就像实现和调用它的 Runnable 接口的方法一样工作，但不会创建后台线程。事实上，当我们调用 start 方法时，它会导致相应的线程开始执行，Java 虚拟机在内部调用该线程的 run 方法。所以要启动一个线程，我们需要使用接口 Runnable referencence 调用 start 方法。在方法一中，即使我们不能调用带有 Runnable 接口引用的 start 方法，因为 Runnable 接口不支持 start() 方法。因此必须创建 Thread 类的对象来启动线程执行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-30T14:23:30.797

永远记住，Runnable 只是您想要或能够在线程中运行的代码。匿名定义 Runnable 代码的一种方法是：

```
 Runnable codeToRunOnThread=new Runnable() {
      @Override
      public void run() {
      //code to run in a thread you want
      }
  }; 
```

然后您可以创建一个线程并将您创建的 Runnable 传递给该新线程，如下所示

```
 Thread myThread=new Thread(codeToRunOnThread);
  myThread.start(); 
```

调用 Thread 类的 start() 方法后，run() 方法内部的代码在新创建的线程上运行。

您还可以 [在此处查看创建 Runnable 对象的不同方式](https://developer.android.com/training/multiple-threads/define-runnable.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-09-28T19:37:44.013

这可以通过 lambda 表达式来完成：

```
Runnable myRunnable = () -> {
    //code you want to execute
}; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-07T18:22:40.707

第一种方法是错误的：它不会创建一个新线程，所以它没用。

这就像将代码放在可运行文件之外。

请注意，**有两种方法**可以在匿名类中定义的代码上启动新线程，[如 Thread 的 javadoc 中所述，](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)但您的*方法 1*不在其中，您的*方法 2*是您通常应该喜欢的方法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-07T18:27:18.450

正如@Hovercraft 提到的，如果您`Runnable.run()`直接调用方法，`Thread`则根本不会创建 a 。这就像调用任何其他方法（`System.out.println(...)`，...）。

当您将`Runnable`对象传递给`Thread`构造函数时，会将 中的`target`字段设置`Thread`为您的对象：

```
this.target = target; 
```

然后，当您调用`start()`时`Thread`，它会分叉新线程并调用该`Thread.run()`方法。依次`Thread.run()`调用目标的方法：`run()`

```
public void run() {
    if (target != null) {
        target.run();
    }
} 
```

因此，将 a 传递`Runnable`给 a`Thread`然后调用是在单独的线程中在后台`start()`运行的方法。`Runnable`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-24T15:47:23.013

你的方法 1 通常不能做任何有用的工作。使用这种方法，如果你想得到简单的 HelloWorld.java 程序的输出，即“Hello World”，它会类似于下面的无用代码，但它会打印“Hello World”。所以你应该使用你的第二种方法。无用的代码：

```
class MyRunnable implements Runnable {

    public void run() { 
    System.out.println("Hello World");
    }

    public static void main(String[]arg){ 
    MyRunnable myRunnable = new NamedRunnable( );
    namedRunnable.run();
    } 
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-01-31T11:44:52.973

这是一个简单的代码示例，说明如何正确创建匿名 Runnable 类并处理内存泄漏（Android 示例）：

```
public class MainActivity extends Activity{
@Override
protected void onCreate(Bundle savedInstanceState) {

            MyRunnable myRunnable = new MyRunnable(this);
            myHandler.postDelayed(myRunnable, TimeUnits);
}

// Must be declared as a static class    
private static class MyRunnable implements Runnable {
        WeakReference<MainActivity> mActivity;
        // Creating weakreference
        MyRunnable(MainActivity activity) {
            mActivity = new WeakReference<>(activity);
        }

        @Override
        public void run() {
            MainActivity activity = mActivity.get();
            // Checking reference exist or not
            if (activity != null) {
                    //Do necessary tasks
                }
            }
        }
    }

} 
```

# java - 用最少的 for 循环创建数字模式

> ID：12771505
> 
> 赞同：5
> 
> 时间：2012-10-07T18:22:05.433
> 
> 标签：java, for-loop, design-patterns, minimum

如何使用最少的 for 循环创建以下数字模式。是否有任何数字模式的数学名称，如斐波那契、帕斯卡三角形、任何其他有趣的模式，这些模式很复杂但可以使用 for 循环？

> 预期的 O/P 模式：

```
 1
    22
    333
    4444
    55555
    6666
    777
    88
    9 
```

// For loops 只打印 1 到 5 它正确打印并且在反转时会出现错误的输出。

```
for(int i=1; i<10; i++)
{
for(int j=1,k=10; j<=i&&k>5; j++,k--)   
        {
            if(i<=5)
            System.out.print(i);
            else
            if(i>5)
            System.out.print(i);
        }
            System.out.println();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:30:48.200

这个给你：

```
for (int i = 1, j = 1 ; i < 10 ; i++, j = (i <= 5) ? (j*10 + 1) : (j/10))
    System.out.println(i * j); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T18:50:28.667

另一个逻辑更简单的解决方案：

```
public static void main(String[] args) {
    int input = 5;

    for (int i = 1; i <= 2 * input - 1; i++) {
        for (int j = 0; j < input - Math.abs((input - i)); j++)
            System.out.print(i);
        System.out.println();
    }
} 
```

您可以根据元素与输入的差异的绝对值来打印元素。如果您将输入更改为另一个值，这仍然有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T19:36:35.897

这是一个没有循环的解决方案（递归）

```
public class NumberTriangle {        

    public static void print(int top_, int count_, int length_) {
        int top = top_;
        int count = count_;
        int length = length_;
        count++;        

        if (count <= top){
            length++;           
        } else {
            length--;
        }

        if (length == 0) {
            return;
        }       

        String s = String.format(String.format("%%0%dd", length), 0).replace("0",""+count);     
        System.out.println(s);

        NumberTriangle.print(top, count, length);
    }

    public static void main (String args[]){

        NumberTriangle.print(5,0,0);

    }   

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-05T07:11:36.570

[java-8](/questions/tagged/java-8 "显示标记为“java-8”的问题")解决问题的方法：

```
IntStream.range(MAX * -1, MAX)
            .forEach(i -> IntStream.rangeClosed(1, MAX - Math.abs(i))
                    .mapToObj(j -> j == MAX - Math.abs(i) ? MAX - Math.abs(i) + "\n" : MAX - Math.abs(i) + " ")
                    .forEach(System.out::print)
            ); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-29T19:34:35.590

@RandMate您可以这样做：要打印此模式，您必须将模式分成两部分并使用两组嵌套的 for 循环：这里是：int i,j,p; /*第一个嵌套循环打印 1 22 333 4444 55555* / for(i=1;i<=5;i++)
{ for(j=1;j<=i;j++) { System.out.print(i); } System.out.println(); }

```
/*this is the second nested loop to print
 6666
 777
 88
 9 */
    p=6;
  for(i=4;i>=1;i--)
  {
   for(j=1;j<=i;j++)
   {
    System.out.print(p);
   }
    p=p+1;
   System.out.println();
  }

  Hope it was helpul.
  ALL THE BEST......enjoy! 
```

# php - 将永久链接转换为 PHP 中的查询

> ID：12771510
> 
> 赞同：0
> 
> 时间：2012-10-07T18:22:40.723
> 
> 标签：php, wordpress

> **可能重复：**
> [.htaccess php 重写](https://stackoverflow.com/questions/6564624/htaccess-php-rewrite)

我想从页面重定向：

`http://www.bb.com/order/a`

至

`http://www.bb.com/order?val=a`

我怎样才能做到？

UPD。用户将通过第一个链接询问服务器，但响应将通过第二个链接。

UPD2。

```
RewriteEngine On
RewriteBase /

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^order/(.*)$ order?val=$1 [R, L]

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:43:06.427

用这个`.htaccess`

```
RewriteEngine On
RewriteBase /

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^order/(.*)$ order?val=$1 [R, L] 
```

如果您不想重定向但重写使用`[PT, L]`而不是`[R, L]`

# mysql - 选择和更新 MySQL 查询

> ID：12771511
> 
> 赞同：0
> 
> 时间：2012-10-07T18:22:47.447
> 
> 标签：mysql, database

我正在尝试从 MySQL 表中选择一个字段并从该字段中删除一个子字符串，然后更新该字段。

例如： VAR1010 我想用 SHS 替换和更新 VAR，其余部分相同。我期待的结果是 SHS1010

这是代码：

```
SELECT SUBSTR(R.regnumber,4,4) as RegNo from registration R WHERE R.teacheremail='param';

UPDATE registration  SET regnumber = 'SHSRegNo' where teacheremail='param'; 
```

但它正在更新为`RegNo`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T18:27:26.960

您可以在一个`UPDATE`语句中执行此操作：

```
UPDATE registration  
SET regnumber = concat('SHS', substr(regnumber, 4, 4))
where teacheremail='param'; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/3aa6c/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T18:28:50.060

只需这样做：

```
UPDATE registration  SET regnumber = concat('SHS', substr(regnumber, 4, 4))
WHERE teacheremail='param'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T18:27:36.933

采用[`replace`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)

```
UPDATE registration  SET regnumber =  replace(regnumber,'VAR','SHS')
where teacheremail='param'; 
```

# javafx-2 - javafx - 设置文本区域中不同单词的颜色

> ID：12771513
> 
> 赞同：1
> 
> 时间：2012-10-07T18:23:11.453
> 
> 标签：javafx-2

> **可能重复：**
> [突出显示 JavaFX TextArea 中的字符串](https://stackoverflow.com/questions/12346009/highlighting-strings-in-javafx-textarea)

```
TextArea text = new TextArea();
text.setText("select from"); 
```

现在我想在文本区域中为这两个单词设置不同的颜色怎么做有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:59:36.547

控件中的富文本支持将由 JavaFX8 - [http://javafx-jira.kenai.com/browse/RT-23077](http://javafx-jira.kenai.com/browse/RT-23077)提供。这是可用于 TextInputControl-http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#textinputcontrol 的 CSS 属性

可能的解决方法是：-

1.  使用富文本编辑器 - [http://docs.oracle.com/javafx/2/ui_controls/editor.htm](http://docs.oracle.com/javafx/2/ui_controls/editor.htm)
2.  将不同格式的文本放在 HBox 中。
3.  在画布上分别绘制它们。

# c# - 显示列表的最快方法 在 WinForms 应用程序中？

> ID：12771515
> 
> 赞同：5
> 
> 时间：2012-10-07T18:23:17.280
> 
> 标签：c#, winforms

我对 Visual C# 相当陌生，我正在尝试创建一个`List<String>`其内容由表单小部件显示的，最好使用表单编辑器。来自 Qt/C++ 背景，我通常会做这样的事情：

*   在我的模型中创建一个自定义数据结构，它围绕 a`QList<string>`并派生自`Subject`观察者模式中的类。
*   创建一个子类的新小部件`Observer`（这也是观察者模式的一部分）和 Qt 的列表小部件之一。这个新创建的小部件在收到来自数据结构的通知时应该能够更新列表。
*   确保小部件在运行时订阅数据结构。

这个过程很麻烦，我确信有更好的方法，但我现在不是来寻求 Qt 帮助的。`List<String>`在 C# 中显示（或类似结构）内容的最快方法是什么？我正在使用 WinForms。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T18:27:33.240

```
// simple one-way, one-time binding 
var myItems = new List<string> { "aaa", "bbb" };
listBox1.DataSource = myItems; 
```

```
// rebinding
var myItems = new List<string> { "aaa", "bbb" };
listBox1.DataSource = myItems;
....
myItems.Add("ccc");
listBox1.DataSource = myItems; 
```

```
// one-way, multi-time binding
var myItems = new BindingList<string> { "aaa", "bbb" };
listBox1.DataSource = myItems;
...
myItems.Add("ccc"); 
```

# python - mod_wsgi 3.4 错误，其中 404 错误被误解

> ID：12771520
> 
> 赞同：0
> 
> 时间：2012-10-07T18:23:41.447
> 
> 标签：python, django, linux, apache, django-celery

在我使用 mod_wsgi 3.4 和 apache 的 django 项目中，所有 404 页面都不是作为 404 错误返回，而是作为 500 服务器错误返回：

当 debug 设置为 true 时，它​​返回 404 错误，django 的。

找不到页面 (404) 请求方法：GET 请求 URL：.. 没有与给定查询匹配的模型。您看到此错误是因为您的 Django 设置文件中有 DEBUG = True 。将其更改为 False，Django 将显示标准 404 页面。

在解决此问题之前遇到过此问题的其他任何人都可以提供一些指示或指南吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:36:19.247

这可能不是 mod_wsgi 错误。

请确保您`404.html`的“模板”文件夹中有文件。如果 Django 找不到 404 错误的模板，它会提供一个内部 500 错误。

注意：如果这不能解决错误，请查看[此页面](https://docs.djangoproject.com/en/dev/intro/tutorial03/#write-a-404-page-not-found-view)以了解如何使 404 错误页面正常工作。

# ruby-on-rails - 从数组中按日期时间对数组的哈希图进行排序

> ID：12771521
> 
> 赞同：8
> 
> 时间：2012-10-07T18:23:41.080
> 
> 标签：ruby-on-rails, sorting

我的哈希图如下：

```
variable_name[user] = { url, datetime }
variable_name[user] << { url1, datetime1 }
variable_name[user] << { url2, datetime2 }
variable_name[user] << { url3, datetime3 } 
```

如果可能的话，如何在 RoR 中按日期时间排序？

编辑：variable_name 是一个哈希，[user] 是一个键。该值是一个数组

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T18:41:41.040

假设 variable_name 是一个数组，你的意思是：

```
variable_name[user] = {:url => url, :datetime => datetime } 
```

一种简单的升序排序方法：

```
variable_name.sort_by {|vn| vn[:datetime]} 
```

要降序排序，您可以使用完整排序：

```
variable_name.sort {|vn1, vn2| vn2[:datetime] <=> vn1[:datetime]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:37:38.627

在 Ruby 中可以对任何东西进行排序，但请记住，您最终会得到一个排序后的数组。尽管自 Ruby 1.9 以来哈希具有内部顺序，但 Hash#sort 方法仍然返回一个数组。

例如：

```
hash = {
  user1: { name: 'Baz', date: Time.current },
  user2: { name: 'Bar', date: Time.current - 1.month },
  user3: { name: 'Foo', date: Time.current - 2.months },
}

hash.sort { |x, y| x.last[:date] <=> y.last[:date] } 
```

会给你结果：

```
[
  [:user3, {:name=>"Foo", :date=>Tue, 07 Aug 2012 20:32:23 CEST +02:00}],
  [:user2, {:name=>"Bar", :date=>Fri, 07 Sep 2012 20:32:23 CEST +02:00}],
  [:user1, {:name=>"Baz", :date=>Sun, 07 Oct 2012 20:32:23 CEST +02:00}]
] 
```

不过，将其映射回散列并不是非常困难。

# r - 无法使用 R 中的 read.table 或 read.csv 读取带有“#”和空格的文件

> ID：12771522
> 
> 赞同：27
> 
> 时间：2012-10-07T18:23:47.073
> 
> 标签：r, import, read.table

我有一个文件，其中第一行是标题。标题可以有空格和# 符号（也可能有其他特殊字符）。我正在尝试使用 read.csv 或 read.table 读取此文件，但它不断向我抛出错误：

```
undefined columns selected 

more columns than column names 
```

我的制表符分隔的 chromFile 文件如下所示：

```
Chromosome# Chr chr Size    UCSC NCBI36/hg18    NCBIBuild36 NCBIBuild37
1   Chr1    chr1    247199719   247249719   247249719   249250621
2   Chr2    chr2    242751149   242951149   242951149   243199373 
```

命令：

```
chromosomes <- read.csv(chromFile, sep="\t",skip =0, header = TRUE,  ) 
```

我想首先寻找一种方法来读取文件，因为它不需要用其他可读符号替换空格或#。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-07T18:26:27.160

从文档（`?read.csv`）：

> **comment.char**字符：长度为 1 的字符向量，包含单个字符或空字符串。使用“”完全关闭注释的解释。

默认是`comment.char = "#"`给你带来麻烦的。按照文档，您应该使用`comment.char = ""`.

标题中的空格是另一个问题，正如 mrdwab 所指出的，可以通过设置`check.names = FALSE`.

```
chromosomes <- read.csv(chromFile, sep = "\t", skip = 0, header = TRUE,
                        comment.char = "", check.names = FALSE) 
```

# android - Android 布局中的小部件 ID 名称冲突

> ID：12771523
> 
> 赞同：0
> 
> 时间：2012-10-07T18:23:53.863
> 
> 标签：android, layout, android-widget, android-resources

在我当前的项目中，我有三个不同的`EditText`小部件，采用三种不同的`Activity`布局，用于输入年份。我从创建 UI 开始，最初有

```
<EditText android:id="@+id/year_text" ... other attributes ... /> 
```

在我的每个 XML 布局文件中。由于这个名称冲突，我从来没有遇到过任何编译器错误，我只是意识到这可能是一个问题，因为我开始为每个`Activity`. 所以我的第一个问题是，这种名称冲突是否会导致未来出现问题？

据我了解，`+`告诉布局解析器为`R.java`文件中的命名 ID 创建一个新值。我还可以使用`@id/name`语法引用以前给定的 ID。如果我`+`从除一个之外的所有`EditText`s 中删除 会发生什么？这解决了为`R`类中的标识符分配新值的问题。但是在不同的布局中重复使用相同的 ID 会导致任何问题吗？（回想一下，名称冲突发生在不同的 XML 布局文件中，而不是在同一个布局中。）

现在，我已经为我的所有小部件 ID 创建了长名称。例如：

```
<EditText android:id="@+id/details_year_text" ... other attributes ... />
<EditText android:id="@+id/year_filter_year_text" ... other attributes ... />
<EditText android:id="@+id/year_and_number_filter_year_text" ... other attributes ... /> 
```

前缀跟在每个文件所在的 XML 布局文件的名称之后`EditText`。这有点麻烦，尤其是在使用 NetBeans 中的自动完成功能时。（是的，我使用的是 NetBeans 而不是 Eclipse。=p）。如果我确实需要为每个`EditText`小部件使用唯一的名称，那么将它们分成命名空间会很方便。XML 布局是否支持任何可以创建内部类的语法，这些内部类`R.id`可以用作我的 ID 的命名空间？

最后，我知道这是一个非常小的项目。我可以想象有些 Android 应用程序的小部件比我使用的要多得多。如果有的话，在项目的 XML 布局中命名和组织 ID 的标准做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:00:48.613

对于您的第一个问题，android 为您的资源 xml 文件提供了 id 标签，这意味着您可以先声明您的 id（类似于 string ），以下信息可能对您有所帮助：http: [//developer.android.com/guide/主题/资源/more-resources.html#Id](http://developer.android.com/guide/topics/resources/more-resources.html#Id)

# android - 无法使用 maven (android-maven-plugin) 构建 android 项目

> ID：12771526
> 
> 赞同：0
> 
> 时间：2012-10-07T18:24:08.520
> 
> 标签：android, eclipse, maven, pom.xml

奇怪的行为，有时我可以打包我的项目，大多数时候我不能。问题发生在`android:dex`：

```
$ mvn clean android:dex
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Test 0.0.1
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.3:clean (default-clean) @ test ---
[INFO] Deleting file set: /home/danny/workspace/test/target (included: [**], excluded: [])
[INFO] 
[INFO] --- android-maven-plugin:3.3.2:dex (default-cli) @ test ---
[INFO] /usr/lib/jvm/java-6-sun-1.6.0.26/jre/bin/java [-Xmx1024M, -jar, /home/danny/.bin/android-sdk-linux/platform-tools/lib/dx.jar, --dex, --output=/home/danny/workspace/test/target/classes.dex, /home/danny/workspace/test/target/classes]
[INFO] 
[INFO] UNEXPECTED TOP-LEVEL EXCEPTION:
[INFO] java.lang.RuntimeException: /home/danny/workspace/test/target/classes: file not found
[INFO]  at com.android.dx.util.FileUtils.readFile(FileUtils.java:55)
[INFO]  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:134)
[INFO]  at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
[INFO]  at com.android.dx.command.dexer.Main.processOne(Main.java:418)
[INFO]  at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
[INFO]  at com.android.dx.command.dexer.Main.run(Main.java:206)
[INFO]  at com.android.dx.command.dexer.Main.main(Main.java:174)
[INFO]  at com.android.dx.command.Main.main(Main.java:91)
[INFO] 1 error; aborting
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.914s
[INFO] Finished at: Sun Oct 07 20:17:03 CEST 2012
[INFO] Final Memory: 7M/88M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.3.2:dex (default-cli) on project test: MojoExecutionException: ANDROID-040-001: Could not execute: Command = /bin/sh -c cd /home/danny/workspace/test && /usr/lib/jvm/java-6-sun-1.6.0.26/jre/bin/java -Xmx1024M -jar /home/danny/.bin/android-sdk-linux/platform-tools/lib/dx.jar --dex --output=/home/danny/workspace/test/target/classes.dex /home/danny/workspace/test/target/classes, Result = 1 -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

我找不到有关此的任何信息...我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
    http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <packaging>apk</packaging>
    <artifactId>test</artifactId>
    <groupId>com.example</groupId>
    <name>Test</name>
    <version>0.0.1</version>

    <dependencies>
        <dependency>
            <artifactId>android</artifactId>
            <groupId>com.google.android</groupId>
            <scope>provided</scope>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <artifactId>junit</artifactId>
            <groupId>junit</groupId>
            <scope>test</scope>
            <version>4.10</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>android-maven-plugin</artifactId>
                <configuration>
                    <assetsDirectory>src/main/assets</assetsDirectory>
                    <resourceDirectory>src/main/resources</resourceDirectory>
                    <sdk>
                        <platform>8</platform>
                    </sdk>
                </configuration>
                <extensions>true</extensions>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <version>3.3.2</version>
            </plugin>    
        </plugins>
    </build>

</project> 
```

**编辑**

运行`mvn package`结果：

```
$ mvn package
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Test 0.0.1
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- android-maven-plugin:3.3.2:generate-sources (default-generate-sources) @ test ---
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] /home/danny/.bin/android-sdk-linux/platform-tools/aapt [package, -m, -J, /home/danny/workspace/test/target/generated-sources/r, -M, /home/danny/workspace/test/AndroidManifest.xml, -S, /home/danny/workspace/test/src/main/resources, --auto-add-overlay, -A, /home/danny/workspace/test/src/main/assets, -I, /home/danny/.bin/android-sdk-linux/platforms/android-8/android.jar]
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ test ---
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 8 resources
[INFO] skip non existing resourceDirectory /home/danny/workspace/test/target/generated-sources/extracted-dependencies/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.5.1:compile (default-compile) @ test ---
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[INFO] Compiling 3 source files to /home/danny/workspace/test/target/classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /home/danny/workspace/test/src/main/java/com/example/test/gui/MainActivity.java:[17,18] package R does not exist
[ERROR] /home/danny/workspace/test/src/main/java/com/example/test/gui/MainActivity.java:[26,29] package R does not exist
[INFO] 2 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.960s
[INFO] Finished at: Sun Oct 07 22:40:35 CEST 2012
[INFO] Final Memory: 13M/86M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (default-compile) on project test: Compilation failure: Compilation failure:
[ERROR] /home/danny/workspace/test/src/main/java/com/example/test/gui/MainActivity.java:[17,18] package R does not exist
[ERROR] /home/danny/workspace/test/src/main/java/com/example/test/gui/MainActivity.java:[26,29] package R does not exist
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T19:27:15.713

好吧，我可以告诉您，基于该日志，您的构建器正在删除文件夹中的所有文件，然后才尝试对该文件夹进行 dex 索引 - 因此，dex 失败，因为那里没有任何内容。但是，我不知道为什么会发生这种情况，因为我没有看到您在任何地方调用了 maven-clean-plugin。我已经看到类似的问题发生在构建工作的地方，如果你打电话`mvn clean`，然后`mvn install`，但如果你打电话就不会工作`mvn clean install`；但是，我只在人们自己调用 clean 插件的大型自定义构建中看到了这一点。但是，它也可能对您的情况有所帮助，即使我看不出是什么原因造成的......

编辑：对不起，对我来说还为时过早。问题不在于干净，问题在于编译器插件从未运行。清理之后，您通常会生成所需的任何资源，然后编译您的代码，然后对类进行索引。你永远不会生成你的 .class 文件，所以没有什么要 dex 的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:09:30.330

生成的`R`文件使用了包声明`com.example.test`（这是我项目的 groupId），我尝试在 class 中访问它`com.example.test.gui.MainActivity`。所以我需要`com.example.test.R`明确导入。

# c# - 优化 .NET Web 服务 DB 记录选择

> ID：12771529
> 
> 赞同：1
> 
> 时间：2012-10-07T18:24:23.943
> 
> 标签：c#, mysql, web-services

我正在计划一个需要尽可能优化的 Web 服务 (.NET asmx)。Web服务根据客户端传来的一个参数，从数据库（Mysql）中返回10条随机记录（来自客户端的每次调用需要是随机的）。每个参数 (1-12) 在数据库中保存约 2000 条记录。

解决方案：

1.  查询数据库（将由参数索引）并返回结果。
2.  将数据库中的表缓存到 .net 数据表并通过 Linq 选择（约 15,000 条记录）。
3.  将数据库缓存到 12 个 .net 数据表中，每个数据表都有可能的参数，并使用 Linq 查询数据表。

执行此任务的最佳方法是什么？我很想听听其他的想法！

最好的问候， 乌迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:21:01.227

将数据缓存到 12 个强类型数组中。除了从一个简单的数组中选择 10 个随机记录之外，这将删除所有处理。它不会比这更快。

不要使用数据表。你为什么要？它们只能比自定义类的强类型列表/数组慢。

但是，如何优化选择 10 个随机项目是一个不同的问题，但肯定已经回答了。

# nservicebus - 在“RavenTimeoutPersistence”类型上调用构造函数“Void .ctor(Raven.Client.IDocumentStore)”时引发异常

> ID：12771530
> 
> 赞同：-1
> 
> 时间：2012-10-07T18:24:25.493
> 
> 标签：nservicebus

我正在尝试使用 nservicebus 中的一些示例开始使用 nservicle ebus。我无法得到一个简单的例子来工作。如果我遗漏了什么，请告诉我

在“RavenTimeoutPersistence”类型上调用构造函数“Void .ctor(Raven.Client.IDocumentStore)”时引发异常。

Magnum.StateMachine.StateMachineException 未处理 Message=Exception 发生在 Topshelf.Internal.ServiceController `1[[NServiceBus.Hosting.Windows.WindowsHost, NServiceBus.Host, Version=3.2.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c]] during state Initial while handling OnStart Source=NServiceBus.Host StackTrace: at Magnum.StateMachine.ExceptionActionDictionary`1.HandleException(T stateMachine, Event event, Object parameter, Exception exception) in :line 0 at Magnum.StateMachine.EventActionList `1.Execute(T stateMachine, Event event, Object parameter) in :line 0 at Magnum.StateMachine.EventActionBase`1.Execute(T instance,事件事件，对象参数）在：Magnum.StateMachine.State 的第 0 行`1.RaiseEvent(T instance, BasicEvent`1 事件，对象值）在：Magnum.StateMachine.StateMachine 的第 0 行 1.Start `1.RaiseEvent(Event raised) in :line 0 at Topshelf.Internal.ServiceController`() 在 c:\Projects\TopShelfForNSB\src\Topshelf\Internal \ServiceController.cs：Topshelf.Internal.IsolatedServiceControllerWrapper 的第 77 行`1.Start() in c:\Projects\TopShelfForNSB\src\Topshelf\Internal\IsolatedServiceControllerWrapper.cs:line 40 at Topshelf.Internal.ServiceControllerProxy.Start() in c:\Projects\TopShelfForNSB\src\Topshelf\Internal\ServiceControllerProxy.cs:line 47 at Topshelf.Internal.ServiceControllerProxy.Start() at Topshelf.Internal.FacadeToIsolatedServiceController`第 134 行 InnerException：消息 = 启动端点时出现异常，已记录错误。原因：在“RavenTimeoutPersistence”类型上调用构造函数“Void .ctor(Raven.Client.IDocumentStore)”时引发异常。Source=NServiceBus.Host StackTrace：在 C:\TeamCity\buildAgent\work\nsb.master_8\src\hosting\NServiceBus.Hosting\GenericHost.cs 中的 NServiceBus.Hosting.GenericHost.Start() 处：NServiceBus.Hosting 的第 45 行。 c:\TeamCity\buildAgent\work\nsb.master_8\src\hosting\NServiceBus.Hosting.Windows\WindowsHost.cs 中的 Windows.WindowsHost.Start()：NServiceBus.Hosting.Windows.Program.<>c_ 中的第 56 行 在类型“RavenTimeoutPersistence”上无效 .ctor(Raven.Client.IDocumentStore)'。Source=NServiceBus.Host StackTrace：在 C:\TeamCity\buildAgent\work\nsb.master_8\src\hosting\NServiceBus.Hosting\GenericHost.cs 中的 NServiceBus.Hosting.GenericHost.Start() 处：NServiceBus.Hosting 的第 45 行。 c:\TeamCity\buildAgent\work\nsb.master_8\src\hosting\NServiceBus.Hosting.Windows\WindowsHost.cs 中的 Windows.WindowsHost.Start()：NServiceBus.Hosting.Windows.Program.<>c_ 中的第 56 行 在类型“RavenTimeoutPersistence”上无效 .ctor(Raven.Client.IDocumentStore)'。Source=NServiceBus.Host StackTrace：在 C:\TeamCity\buildAgent\work\nsb.master_8\src\hosting\NServiceBus.Hosting\GenericHost.cs 中的 NServiceBus.Hosting.GenericHost.Start() 处：NServiceBus.Hosting 的第 45 行。 c:\TeamCity\buildAgent\work\nsb.master_8\src\hosting\NServiceBus.Hosting.Windows\WindowsHost.cs 中的 Windows.WindowsHost.Start()：NServiceBus.Hosting.Windows.Program.<>c_ 中的第 56 行*DisplayClass8.b* _4（WindowsHost 服务）在 c:\TeamCity\buildAgent\work\nsb.master_8\src\hosting\NServiceBus.Hosting.Windows\Program.cs：Topshelf.Internal.ControllerDelegates `1.StartActionObject(Object obj) in c:\Projects\TopShelfForNSB\src\Topshelf\Internal\ControllerDelegates.cs:line 18 at Topshelf.Internal.IsolatedServiceControllerWrapper`1 的第 97 行。<>c_ *DisplayClass2 .b* _1（TService 服务）在 c:\Projects\TopShelfForNSB\src\Topshelf\Internal\IsolatedServiceControllerWrapper.cs:第 65 行在 Topshelf.Internal.ServiceController `1.<.cctor>b__1(ServiceController`1 sc) 在 c:\Projects\TopShelfForNSB\src\Topshelf\Internal\ ServiceController.cs：Magnum.StateMachine.LambdaAction 的第 35 行`1.Execute(T instance, Event event, Object parameter) in :line 0 at Magnum.StateMachine.EventActionList`1.Execute(T stateMachine, Event event, Object parameter) in :line 0 InnerException: Autofac.Core.DependencyResolutionException Message=在“RavenTimeoutPersistence”类型上调用构造函数“Void .ctor(Raven.Client.IDocumentStore)”时引发异常'。Source=NServiceBus.Core StackTrace：在 Autofac.Core.Activators.Reflection.ReflectionActivator.ActivateInstance（IComponentContext 上下文，IEnumerable `1 parameters) at Autofac.Core.Resolving.InstanceLookup.Activate(IEnumerable`1 参数）在 Autofac.Core.Resolving.InstanceLookup 的 Autofac.Core.Activators.Reflection.ConstructorParameterBinding.Instantiate()。 b_ *6() 在 Autofac.Core.Lifetime.LifetimeScope.GetOrCreateAndShare(Guid id, Func`1 creator) at Autofac.Core.Resolving.InstanceLookup.Execute() at Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`Autofac.Core.Resolving.InstanceLookup.ResolveComponent(IComponentRegistration registration, IEnumerable `1 parameters) at Autofac.ResolutionExtensions.TryResolveService(IComponentContext context, Service service, IEnumerable`1 parameters, Object& instance) at Autofac.ResolutionExtensions.ResolveService(IComponentContext context, Service service, IEnumerable `1 parameters) at Autofac.ResolutionExtensions.Resolve(IComponentContext context, Type serviceType, IEnumerable`1 parameters) at Autofac.ResolutionExtensions.Resolve(IComponentContext context) 的 1 个参数，在 Autofac.Core.Activators.Reflection.AutowiringPropertyInjector.InjectProperties(IComponentContext context, Object instance, Boolean overrideSetValues) 在 Autofac.Builder.RegistrationBuilder `3.<>c__DisplayClassd.<PropertiesAutowired>b__c(Object s, ActivatingEventArgs`1 e) 在 Autofac.Core 的 System.EventHandler `1.Invoke(Object sender, TEventArgs e) at Autofac.Core.Registration.ComponentRegistration.RaiseActivating(IComponentContext context, IEnumerable`1 参数中键入 serviceType)。 Resolving.InstanceLookup.Activate(IEnumerable`1 parameters) at Autofac.Core.Resolving.InstanceLookup.<Execute>b__6() at Autofac.Core.Lifetime.LifetimeScope.GetOrCreateAndShare(Guid id, Func`1 个创建者）在 Autofac.Core.Resolving.InstanceLookup.Execute() 在 Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration 注册, IEnumerable `1 parameters) at Autofac.Core.Resolving.InstanceLookup.ResolveComponent(IComponentRegistration registration, IEnumerable`1 参数) 在 Autofac.Features.Collections.CollectionRegistrationSource.<>c* _DisplayClass4。 <>c_ *DisplayClass6.b* _1(IComponentRegistration cr) at System.Linq.Enumerable.WhereSelectArrayIterator `2.MoveNext() at System.Linq.Buffer`1..ctor(IEnumerable `1 source) at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source) at Autofac.Features.Collections.CollectionRegistrationSource.<>c_ *DisplayClass4.b* _0(IComponentContext c, IEnumerable`1 p) at Autofac.Core.Activators.Delegate.DelegateActivator.ActivateInstance(IComponentContext context, IEnumerable`1 个参数）在 Autofac.Core.Resolving.InstanceLookup.Activate（IEnumerable `1 parameters) at Autofac.Core.Resolving.InstanceLookup.Execute() at Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`1 个参数）在 Autofac.Core.Resolving.ResolveOperation.ResolveComponent（IComponentRegistration 注册，IEnumerable `1 parameters) at Autofac.Core.Resolving.ResolveOperation.Execute(IComponentRegistration registration, IEnumerable`1 个参数）在 Autofac.Core.Lifetime.LifetimeScope.ResolveComponent（IComponentRegistration 注册， IEnumerable `1 parameters) at Autofac.Core.Container.ResolveComponent(IComponentRegistration registration, IEnumerable`1 参数）在 Autofac.ResolutionExtensions.TryResolveService（IComponentContext 上下文，服务服务，IEnumerable `1 parameters, Object& instance) at Autofac.ResolutionExtensions.ResolveService(IComponentContext context, Service service, IEnumerable`1 参数）在 Autofac.ResolutionExtensions.Resolve（IComponentContext 上下文，类型 serviceType，IEnumerable `1 parameters) at Autofac.ResolutionExtensions.Resolve(IComponentContext context, Type serviceType) at NServiceBus.ObjectBuilder.Autofac.Internal.ContainerExtensions.ResolveAll(IComponentContext container, Type componentType) at NServiceBus.ObjectBuilder.Autofac.AutofacObjectBuilder.BuildAll(Type typeToBuild) at NServiceBus.ObjectBuilder.Common.CommonObjectBuilder.<NServiceBus.ObjectBuilder.IBuilder.BuildAll>d__1`1.MoveNext（）在 System.Collections.Generic.List`1..ctor(IEnumerable`1 个集合）在 System.Linq.Enumerable.ToList[TSource](IEnumerable `1 source) at NServiceBus.Unicast.Config.StartupRunners.<Run>b__4(Object obj, EventArgs ev) at NServiceBus.Unicast.UnicastBus.NServiceBus.IStartableBus.Start(Action startupAction) at NServiceBus.Unicast.UnicastBus.NServiceBus.IStartableBus.Start() at NServiceBus.Hosting.GenericHost.Start() in c:\TeamCity\buildAgent\work\nsb.master_8\src\hosting\NServiceBus.Hosting\GenericHost.cs:line 32 InnerException: System.Net.WebException Message=The remote server returned an error: (401) Unauthorized. Source=System StackTrace: at System.Net.HttpWebRequest.GetResponse() at Raven.Client.Connection.HttpJsonRequest.ReadStringInternal(Func`1 getResponse) 在 Raven.Client.Connection.HttpJsonRequest.ReadResponseString() 在 Raven.Client.Connection.HttpJsonRequest.ExecuteRequest() 在 Raven.Client.Connection。 ServerClient.DirectPutIndex(String name, String operationUrl, Boolean overwrite, IndexDefinition definition) at Raven.Client.Connection.ServerClient.<>c_ *DisplayClass34.b* _33(String operationUrl) at Raven.Client.Connection.ServerClient.TryOperation[T](功能`2 operation, String operationUrl, Boolean avoidThrowing, T& result) at Raven.Client.Connection.ServerClient.ExecuteWithReplication[T](String method, Func`2 操作）在 Raven.Client.Connection.ServerClient.PutIndex（字符串名称，IndexDefinition 定义，布尔覆盖）在 Raven.Client.Connection.ServerClient.PutIndex[TDocument,TReduceResult]（字符串名称，IndexDefinitionBuilder`2 indexDef，布尔覆盖）在 NServiceBus.Timeout.Hosting.Windows.Persistence.RavenTimeoutPersistence..ctor（IDocumentStore 存储）InnerException：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:24:21.483

我解决了这个问题。当我创建一个新的 MVC 项目时，添加了一个默认连接字符串。似乎 Nservicebus 将该连接字符串的存在视为某种指示符，以使用 ravendb 进行持久性等。一旦我删除它，样本就开始工作了

# php - 在 PHP 中调用函数时使用临时变量

> ID：12771532
> 
> 赞同：8
> 
> 时间：2012-10-07T18:24:37.400
> 
> 标签：php, variables

通常，我看到函数被称为

```
$content = getContent($isAdmin = false) 
```

而函数声明就像

```
function getContent($isAdmin = true){
....} 
```

为什么有人会在函数调用中添加创建变量并仅使用一次的重载！

我知道这使函数调用变得清晰，但是我们不应该使用 PHPDoc 块来代替吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T18:28:56.360

我有一种感觉，你被这么多的“浪费”深深地震撼了。

保持冷静，使用变量没什么不好，你应该经常使用它们。它们通常使您的代码更具描述性，甚至更快。

更具描述性的部分是这里的情况，如果您查看该行，您会看到哪个参数是因为现在它有一个名称。

> 但我们不应该改用 PHPDoc 块吗？

好吧，实际上这与（docblock）评论无关。即使在函数定义中，也没有*对该*参数的注释：

```
function getContent($isAdmin = true) { 
```

这只是参数名称的定义。此外 docblock 参数将仅在您定义函数时出现：

```
...
 * @param $isAdmin bool (optional) true or false, true by default
...
function getContent($isAdmin = true) { 
```

但是，这不是调用函数的地方：

```
$content = getContent($isAdmin = false) 
```

因此，如果您查看该行（并且在按下任何热键或鼠标按钮之前），您已经阅读了该行。什么都不需要，只需要代码。甚至可以在记事本或未配置的 gedit 中使用。

```
$nonAdmin = false;
$content = getContent($nonAdmin); 
```

顺便说一句，如果您的代码*需要*注释，这通常表明它太复杂了。此外，参数的名称比它的文档块重要得多。一个好的名称通常意味着您不需要为其添加 docblock 标签（这意味着：需要维护的代码更少），因为名称本身就说明了问题。

现代 IDE 也通过静态分析知道参数的类型，因此您也不需要 docblock 标签。所以不，你不应该总是使用 PHPDocblocks。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T18:32:57.730

像这样写：

```
$content = getContent($isAdmin = false) 
```

甚至可以`$isAdmin`在函数范围之外定义，即如果您发出 a `var_dump($isAdmin)`，您将得到`bool(false)`.

这样你就可以保存一个 var 赋值：

```
$isAdmin = false;
$content = getContent($isAdmin);
...
someStuff($isAdmin); 
```

# java - java中String的垃圾回收

> ID：12771533
> 
> 赞同：2
> 
> 时间：2012-10-07T18:24:39.430
> 
> 标签：java, string, garbage-collection

假设Java中的一个字符串被声明为`String s = "hi"`

我只想知道上面创建的 String 对象是否会被垃圾收集？

如果我写`s = null`，此时字符串对象会被垃圾收集吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:38:49.867

采取这种方式，编译器会将其移动到文字池中。现在所有 "hi" 的实例都将替换为 pool 中的这个值，这实际上是编译器优化内存使用的一种方式。不，这些值永远不会被垃圾收集。但是，在运行时创建的 String 对象将被垃圾收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:15:16.640

JVM 将字符串文字加载到字符串常量池中。这不是由 javac 或 JIT 编译器完成的。当不再有对该对象的引用时，以这种方式加载到常量池中的字符串可以像任何其他对象一样被清除。这需要卸载该类，但如果您的应用程序以这种方式工作，就会发生这种情况。

# java - 使用 java 集合对 Person 的 ArrayList 进行排序

> ID：12771534
> 
> 赞同：8
> 
> 时间：2012-10-07T18:24:41.973
> 
> 标签：java, sorting, collections, io

在我使用的代码下面可以正常工作并输出名称，但排序方法不起作用。我期待“Collections.sort(nameFromText);” 按名字的字母顺序对 ArrayList 进行排序。

我究竟做错了什么？

```
public static void main(String[] args) throws IOException {
    // Create and populate text file
    Writer textFile = new FileWriter("names.txt");
    String[] nameArray = new String[] { "Tina Tully\n", "Bill Simpson\n",
            "Dana Smith\n", "Ralph Andrews\n", "Greg Smithers\n",
            "Lisa Krump\n", "Gill Bitters\n", "Barbara West\n",
            "Sandra McDonald\n", "Bart Willis\n", "Bucky Zimmerman\n",
            "Richard Vicks\n", "Velma Tarp\n", "Winslow Tunnell\n",
            "Andrew Letterman\n", "Betty Trump\n", "Waldo Smith\n",
            "Kyle Ronno\n", "Vivian West\n", "Wendy Tunnell\n" };
    generateText(textFile, nameArray);

    // Create object of previously created text file
    Scanner pullFile = new Scanner(new File("names.txt"));

    // Create 20 Person Objects and add to ArrayList data structure with
    // name variables assigned to values from text file
    ArrayList<Person> nameFromText = new ArrayList<Person>();
    fillArrayList(nameFromText, pullFile);

    // Sort ArrayList
    Collections.sort(nameFromText);

    // Print ArrayList
    printNamesFromObjects(nameFromText);
}

private static void printNamesFromObjects(ArrayList<Person> namesFromText) {
    for (int i = 0; i < 20; i++) {
        System.out.println(namesFromText.get(i).name);
    }
}

private static void fillArrayList(ArrayList<Person> nameFromText,
        Scanner pullFile) {
    while (pullFile.hasNext()) {
        Person obj = new Person(pullFile.nextLine());
        nameFromText.add(obj);
    }
}

private static void generateText(Writer textFile, String[] nameArray)
        throws IOException {
    for (int i = 0; i < 20; i++) {
        textFile.write(new String(nameArray[i]));
    }
    textFile.close();
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-07T18:28:31.617

[`Collections.sort(List<T>)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)方法期望它正在排序的列表元素具有可比性。元素类型`T`应该实现接口，或者您应该使用采用泛型实例[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)的重载[`sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)方法。[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)

在下面的代码中，您不满足上述两个条件。你的`Person`类都没有实现`Comparable`，你也没有传递任何`Comparator`实例。

```
ArrayList<Person> nameFromText = new ArrayList<Person>();
fillArrayList(nameFromText, pullFile);
// Sort ArrayList
Collections.sort(nameFromText);  // How to sort? 
```

`Comparator`您应该为您的类创建一个`Person`来告诉`sort()`方法如何对其进行排序（可能在存储在 Person 类中的 String 上）

以下是实现通用比较器的方法：

```
public class PersonNameComparator implements Comparator<Person> {
    public int compare(Person p1, Person p2) {
        return p1.getName().compareTo(p2.getName());
    }
} 
```

然后你的`Collections.sort()`方法调用应该是这样的： -

```
Collections.sort(nameFromText, new PersonNameComparator()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T18:45:45.003

或者，您可以直接在 Person 类中实现 Comparable 接口并覆盖“compareTo(Object obj)”方法。在这种情况下，您不需要为比较器创建新类。这就像内置排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-26T18:57:41.553

尝试这个：

```
List<String> inputString =  Arrays.asList("Sijan", "Sudeep", "Parasar", "Raj Kumar");
Collections.sort(inputString);
System.out.println(inputString); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-09T12:52:44.157

如果您使用 Java 8，则使用一个线性**Lambda 表达式**

```
ArrayList<Person> nameFromText = new ArrayList<Person>();
fillArrayList(nameFromText, pullFile);
nameFromText.sort((p1, p2) -> p1.getName().compareTo(p2.getName())); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-21T06:22:49.560

**use Collections.sort(managerNameList);**

```
ArrayList<String> managerNameList = new ArrayList<String>();

    managerNameList.add("antesh");
    managerNameList.add("Lalit");
    managerNameList.add("Gokul");
    managerNameList.add("Ajay");

    System.out.println("Arraylist before sorting");    
    for(String name: managerNameList)
    {    
        System.out.println(name);           
    }

    Collections.sort(managerNameList);

    System.out.println("Arraylist after sorting");    
    for(String name: managerNameList)
    {    
        System.out.println(name);           
    } 
```

# javascript - 如何在 openlayers 标记上创建 onclick 事件？

> ID：12771536
> 
> 赞同：0
> 
> 时间：2012-10-07T18:24:52.173
> 
> 标签：javascript, map, openlayers

这是我当前的代码：

```
journey.path[x].marker = new OpenLayers.Marker(journey.path[x].curpoint,journey.path[x].markerIcon);
journey.path[x].marker.events.register('click', journey.path[x].marker, function(){alert('test');});
layer_device_markers.addMarker(journey.path[x].marker); 
```

标记已添加到地图中，但警报未初始化。

控制台中也没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:48:16.317

尝试这个：

```
journey.path[x].marker.events.register('mousedown', journey.path[x].marker, function(evt){
   alert('test');
   OpenLayers.Event.stop(evt); 
}); 
```

# c++ - 集合类型的变长参数列表

> ID：12771537
> 
> 赞同：5
> 
> 时间：2012-10-07T18:24:55.923
> 
> 标签：c++, c, function, arguments

好吧，我很确定之前已经以某种方式讨论过这个问题，但我显然太愚蠢了，找不到它。

首先：我不是在寻找 va_list 和其他宏。我正在寻找的是类似于 main-function 参数的东西。

众所周知，默认原型是：

```
int main(int argc, char *argv[]); 
```

现在，我想为我的程序提供类似的东西，但不知道具体如何。

假设我们有这个功能：

```
void Function(int argc, unsigned short *args[]) {
    for(int i = 0; i < argc; ++i) printf("%hu ", args[i]);
} 
```

我想要这样的函数调用：

```
Function(5, 1, 2, 3, 4, 5); 
```

那行得通吗？因为我不想要 va_list 的“混乱”，也不想创建：

```
void AnotherFunction() {
    unsigned short Args[] = { 1, 2, 3, 4, 5 };
    Function(5, Args);
} 
```

只是因为在那种情况下我只需要一个简单的指针。有人可以指出我正确的方向吗？非常感谢。

编辑：谢谢大家的宝贵意见。我将满足于“目前不适用于标准 C/C++，并寻找一种不同的方法来解决我的问题。

再次，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T18:36:23.730

由于您还标记了 C: 在 C 中，您可以将宏与所谓的复合文字结合使用

```
#define  FUNCTION(ARGC, ...) (Function((ARGC), (unsigned short[]){ __VA_ARGS__ })) 
```

这比 acient`va_list`函数类型更安全，因为它将列表中的所有表达式转换为`unsigned short`.

现代 C++ 现在`VA_ARGS`在宏预处理阶段也具有此功能。但我不知道您将如何创建一个临时向量，该向量将使用这些值进行初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T18:39:02.463

一个 g++ 特定的解决方案：

```
const size_t MAX_ARGS = 42;

void Function(int argc, const unsigned short (&args)[MAX_ARGS])
{
}

int main()
{
    Function(5, {1,2,3,4,5});
} 
```

如果您实际上不需要该`argc`参数，则可以编写一个模板：

```
template<size_t N>
void Function(const unsigned short(&args)[N])
{
    // use N
} 
```

这适用于 C++03。数组必须是 const，否则你不能像这样传递一个临时初始化列表。如果您需要修改函数内部的元素，则需要进行复制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T18:27:25.400

使用默认参数。

```
Function(int argc, unsigned short *args[], int a = 2, int b = 3, int c = 4) ; 
```

或您想要的任何类型。默认值，如本例中的最后三个，不需要传递给函数。你可以这样调用函数..

```
Function (argc, args, 5, 4, 3) ;  //have to remember the maximum no. of parameters 
```

我不知道你为什么要在你的程序中做这种事情。如果您不需要额外的变量，为什么要将它们包含在您的程序中？但

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T19:22:56.897

这是两个标准的 C++ 解决方案。两者都需要支持 C++11 的编译器：

```
#include <iostream>
#include <algorithm>
#include <vector>
#include <iterator>
#include <utility>

template <typename T, typename... Us>
struct first_of_helper {
    typedef T type;
};

template <typename... Ts>
using FirstOf = typename first_of_helper<Ts...>::type;

template <typename... Ts>
void f(Ts&&... args) {
    typedef FirstOf<Ts...> T;
    std::vector<T> v_args{std::forward<Ts>(args)...};
    std::copy(v_args.begin(), v_args.end(), std::ostream_iterator<T>(std::cout, " "));
    std::cout << "\n";
}

template <typename T>
void g(std::initializer_list<T> args) {
    std::copy(args.begin(), args.end(), std::ostream_iterator<T>(std::cout, " "));
    std::cout << "\n";
}

int main() {
    f(1, 2, 3, 4);
    g({1, 2, 3, 4});
} 
```

在 C++11 之前，唯一可移植的解决方案是 via `va_args`。考虑一下：如果`va_args`不需要因为您可以编写更简单的代码，那么它为什么会首先存在？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-07T18:34:24.390

要在 C 中编写类似的函数，您需要 va_list 和其他宏。这源于从 C 到汇编的转换。在汇编中，您只需“查找”堆栈帧即可查看传递给函数的更多参数。

但是，在 C 中，必须使用 va_list 类型和宏来完成此操作，因为在保持函数原型（参数的数量和类型）的同时，您无法使用其他内置机制。

请参阅[http://www.gnu.org/software/libc/manual/html_node/Variadic-Functions.html](http://www.gnu.org/software/libc/manual/html_node/Variadic-Functions.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-07T18:36:36.097

在 C++ 中，基本上有两种方法可以做变量参数：

1.  从 C 继承的可变参数语法使用 va_list 等。

2.  创建容器以传递参数。此容器可以是数组、std::vector、std::list 等。

您提出的通过直接传递参数并允许编译器构造容器的解决方案非常具有 Java 风格。这就是 Sun/Oracle 决定在 Java 5 中实现 var-args 的方式，结果证明这是一个非常方便的特性。不幸的是，C++ 不支持这种语法 afaik。

# wordpress - .htaccess 在 WordPress 上

> ID：12771538
> 
> 赞同：0
> 
> 时间：2012-10-07T18:25:12.903
> 
> 标签：wordpress, .htaccess

我不确定我的 .htaccess 应该在哪里。我正在开发一个 WordPress 主题。可以将其留在主题文件夹中吗？或者我应该覆盖根文件夹上的原始 WordPress .htaccess 吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:35:01.320

您应该始终将 .htaccess 文件放在 wordpress 文件的根目录中，而不是在主题内。

# objective-c - 如何在 QTCaptureView 上方显示按钮？

> ID：12771539
> 
> 赞同：0
> 
> 时间：2012-10-07T18:25:18.560
> 
> 标签：objective-c, xcode, macos, cocoa, quicktime

如何在 QTCaptureView 上方显示按钮？我试图在 IB 上的 QTCaptureView 上方放置一个按钮，但是当我运行它时，在 QTCaptureView 开始显示 iSight 相机图像后，该按钮隐藏在 QTCaptureView 后面...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T09:12:56.080

尝试`setWantsLayer:YES`在 IB 中同时设置`QTCaptureView`和`NSButton`。非基于图层的视图不支持重叠。

那么在加载xib之后顺序可能不正确，所以在`awakeFromNib:`

```
- (void)awakeFromNib
{
  [self addsubview:qtView]
  [self addsubview:button]
} 
```

我不确定它是否会有所帮助，但它应该会有所帮助。[我在这里](https://stackoverflow.com/questions/8511147/drawing-a-subview-on-top-of-a-google-map-displayed-in-a-webview-on-osx/8516379#8516379)回答了一个类似的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:54:15.287

就像 Davyd 说的，NSButton 和 CALayer 没有关系，你如何尝试改变 QTCaptureView 的框架？请发代码

# python - 在 Python 中窥视 Popen 管道流

> ID：12771540
> 
> 赞同：2
> 
> 时间：2012-10-07T18:25:22.827
> 
> 标签：python, popen, fastq

**背景：**
Linux 上的 Python 2.6.6。DNA 序列分析流程的第一部分。
我想从已安装的远程存储 (LAN) 中读取可能压缩过的文件，如果它是压缩过的；gunzip 将其压缩到一个流中（即使用`gunzip FILENAME -c`），如果流（文件）的第一个字符是“@”，则将该整个流路由到一个过滤程序中，该程序接受标准输入的输入，否则只需将其直接通过管道传输到本地文件磁盘。我想最大限度地减少从远程存储读取/查找文件的次数（只需一次通过文件不应该是不可能的吗？）。

示例输入文件的内容，前四行对应于 FASTQ 格式的一条记录：

```
@I328_1_FC30MD2AAXX:8:1:1719:1113/1                                        
GTTATTATTATAATTTTTTACCGCATTTATCATTTCTTCTTTATTTTCATATTGATAATAAATATATGCAATTCG
+I328_1_FC30MD2AAXX:8:1:1719:1113/1                                        
hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhahhhhhhfShhhYhhQhh]hhhhffhU\UhYWc 
```

不应通过管道传输到过滤程序的文件包含如下所示的记录（前两行对应于 FASTA 格式的一条记录）：

```
>I328_1_FC30MD2AAXX:8:1:1719:1113/1
GTTATTATTATAATTTTTTACCGCATTTATCATTTCTTCTTTATTTTCATATTGATAATAAATATATGCAATTCG 
```

有些人编写了半伪代码来可视化我想要做什么（我知道这不可能像我写的那样）。我希望它有一些意义：

```
if gzipped:
    gunzip = Popen(["gunzip", "-c", "remotestorage/file.gz"], stdout=PIPE)
    if gunzip.stdout.peek(1) == "@": # This isn't possible
        fastq = True
    else:
        fastq = False
if fastq:
    filter = Popen(["filter", "localstorage/outputfile.fastq"], stdin=gunzip.stdout).communicate()
else:
    # Send the gunzipped stream to another file 
```

忽略这样一个事实，即代码不会像我在这里写的那样运行，而且我没有错误处理等，所有这些都已经在我的其他代码中了。我只是想要帮助窥视溪流或找到解决方法。如果可以的话，我会很棒，`gunzip.stdout.peek(1)`但我意识到这是不可能的。

**到目前为止我所尝试的：**
我认为 subprocess.Popen 可能会帮助我实现这一点，并且我尝试了很多不同的想法，其中包括尝试使用某种 io.BufferedRandom() 对象将流写入但我不知道那将如何工作。我知道流是不可搜索的，但也许一种解决方法可能是读取 gunzip-stream 的第一个字符，然后创建一个新流，您首先根据文件内容输入“@”或“>”，然后填充其余部分的 gunzip.stdout-stream 到新的流。然后将这个新流输入过滤器的 Popen 标准输入。

请注意，文件大小可能比可用内存大几倍。我不想从远程存储中对源文件执行一次以上的读取，也不想进行不必要的文件访问。

欢迎任何想法！请问我问题，以便我澄清我是否说得不够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T21:20:30.390

这是您*第一次根据文件内容输入“@”或“>”的实现，然后将 gunzip.stdout-stream 的其余部分填充到新的流*提案中。我只测试了测试的本地文件分支，但应该足以演示这个概念。

```
if gzipped:
    source = Popen(["gunzip", "-c", "remotestorage/file.gz"], stdout=PIPE)
else:
    source = Popen(["cat", "remotestorage/file"], stdout=PIPE)
firstchar = source.stdout.read(1)
# "unread" the char we've just read
source = Popen([r"(printf '\x%02x' && cat)" % ord(firstchar)],
               shell=True, stdin=source.stdout, stdout=PIPE)

# Now feed the output to a filter or to a local file.
flocal = None
try:
    if firstchar == "@":
        filter = Popen(["filter", "localstorage/outputfile.fastq"],
                       stdin=source.stdout)
    else:
        flocal = open('localstorage/outputfile.stream', 'w')
        filter = Popen(["cat"], stdin=source.stdout, stdout=flocal)
    filter.communicate()
finally:
    if flocal is not None:
        flocal.close() 
```

这个想法是从 source 命令的输出中读取单个字符，然后使用 重新创建原始输出`(printf '\xhh' && cat)`，从而有效地实现 peek。替换流指定`shell=True`to `Popen`，将其留给 shell 并`cat`完成繁重的工作。数据始终保留在管道中，永远不会完全读入内存。请注意，shell 的服务仅被请求用于`Popen`实现未读取窥视字节的单个调用，而不是涉及用户提供的文件名的调用。即使在那个时候，字节也会被转义为十六进制，以确保 shell 在调用时不会破坏它`printf`。

可以进一步清理代码以实现名为`peek`返回偷看内容和替换的实际函数`new_source`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T21:28:17.023

在 Python 中包装 shell 命令是没有意义的。您可以在 Python 中实现所需的一切，但无需花费大量精力：

1.  打开输入文件并读取前 3 个字节。如果它们相等`1F 8B 08`，那么它应该是 gzip 文件。
2.  重置文件标记
3.  如果是 gzip 文件或读取文件，则将文件内容传递给 zlib.decompress()
4.  如果需要，传递给过滤函数
5.  将结果写入文件

**编辑**

这不起作用，因为在传递给 zlib 之前需要剥离 gzip 标头。`fh.seek(0)`但是，如果您想确定文件是 gzip（使用 DEFLATE 压缩），则可以检查前 3 个字节，执行 a并将文件传递给 gzip.open()。

将文件传递给 gzip 并捕获文件未压缩时抛出的异常可能更容易：

```
import gzip

try:
    in_file = gzip.open("infile")
    f_contents = in_file.read()
except IOError, e:
    # Re-raise exception if exception message is not "Not a gzipped file"
    # Perhaps it would be safer to check the header!
    if e.__str__() != "Not a gzipped file":
        raise
    in_file = open("infile")
    f_contents = in_file.read()

if f_contents[0] == "@":
    result = filter_function(f_contents)
else:
    result = f_contents

new_file = open("new_file", "w")
new_file.write(result) 
```

# ios - 按下后退按钮后，navigationController 为 NULL

> ID：12771547
> 
> 赞同：1
> 
> 时间：2012-10-07T18:26:32.553
> 
> 标签：ios, uinavigationcontroller

我有一个应用程序，它有一个从情节提要构建的导航控制器。每个视图控制器都有一个表，每次用户从下一个视图返回时都需要刷新，所以假设用户像视图控制器 A->B->C 一样，那么当他返回 BI 时需要刷新视图 B 中表格上的值。

我正在尝试使用 UINavigationControllerDelegate 执行此操作，因此每次用户在导航中来回移动时都会调用 didShowViewController：

```
- (void) navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    // Do some initialization stuff
    // and then get entries from an external database

   [self fetchEntries];

   // Log:
   NSLog(@"View-B: \nself=%@ \nnavigationController=%@\nDelegate:%@\nviewControllers:%@", self, self.navigationController, self.navigationController.delegate, self.navigationController.viewControllers);
} 
```

我在 viewDidLoad 上设置了委托：

```
- (void)viewDidLoad 
{
    [super viewDidLoad];

    // Sets the delegate for Navigation Controller
   [self.navigationController setDelegate:self];   
} 
```

问题是，由于某种原因，navigationController 在某处被设置为 NULL，我找不到它在哪里，因为我没有做任何显式的推送/弹出操作（正如我提到的导航控制器是内置在 Storyboard 中的）。

确切的顺序是：A->B->C->B，这里的 navigationController 为 NULL。以下是一些 NSLog 输出：

1) 当用户从 A->B 出发时

```
2012-10-07 14:50:28.170 MyApp[35765:207] View-B: 
self=<View-B: 0x6a660b0> 
navigationController=<UINavigationController: 0x6823b20>
Delegate:<View-B: 0x6a660b0>
viewControllers:(
    "<View-A: 0x6879e90>",
    "<View-B: 0x6a660b0>"
) 
```

2) B->C

```
2012-10-07 14:50:31.371 MyApp[35765:207] View-C: 
self=<View-C: 0x6a69a10> 
navigationController=<UINavigationController: 0x6823b20>
Delegate:<View-C: 0x6a69a10>
viewControllers:(
    "<View-A: 0x6879e90>",
    "<View-B: 0x6a660b0>",
    "<View-C: 0x6a69a10>"
) 
```

3) 然后 C->B

```
2012-10-07 14:50:37.027 MyApp[35765:207] View-C: 
self=<View-C: 0x6a69a10> 
navigationController=(null)
Delegate:(null)
viewControllers:(null) 
```

我真的不明白为什么 navigationController 会在这里变为 NULL。我发现问题发生在我在 viewDidLoad 中设置委托时。如果我删除该行并将代码从协议过程（didShowViewController）移动到 viewDidLoad 一切正常，除了当用户返回导航堆栈时我无法刷新我的表。

同样奇怪的是，在步骤 (3) 中，didShowViewController 是从 View-C 而不是从 View-B 调用的。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:33:10.983

我相信你应该调用 [self.tableview reloadData]; 在 viewController B 的 viewWillAppear 处。

# ruby-on-rails - Rails：从多个模型创建“所有活动提要”

> ID：12771548
> 
> 赞同：2
> 
> 时间：2012-10-07T18:26:58.780
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个页面有几个“提要”。在我的控制器中，我有这样的东西：

```
def index

 @plays = current_user.plays.includes(:game).order("created_at desc")

 @wants = current_user.wants.includes(:game).order("created_at desc")

 @ratings = current_user.ratings.includes(:game).order("created_at desc") 

end 
```

我在视图中使用这样的代码：

```
 <% @plays.each do |play| %>
          You played <%= play.game.name %></p>
   <% end %> 
```

现在我想在“所有活动”页面上制作第四个提要，该提要在按创建日期（desc）排序的一个提要中显示播放、需求和评级。

任何有关执行此操作的最佳方法的帮助都会很棒。

更新：根据每个模型的请求代码，现在很好很简单：

```
class Play < ActiveRecord::Base
  attr_accessible :game_id, :user_id, :description

  belongs_to :user
  belongs_to :game

end

class Rating < ActiveRecord::Base

  attr_accessible :game_id, :id, :score, :user_id, :description

  belongs_to :user
  belongs_to :game

end

class Want < ActiveRecord::Base
  attr_accessible :game_id, :user_id, :description

  belongs_to :user
  belongs_to :game

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:49:28.183

由于这些来自不同的表，您将无法在数据库查询中对它们进行排序。但是由于您已经拥有每个数组，您可以使用 Ruby 进行组合和排序：

```
@activities = (@plays + @wants + @ratings).sort_by {|a| a.created_at}.reverse 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:52:34.753

我可以想到两种方法来做到这一点，快速简便的方法和重构的方法。

快速简便的方法是从这三个中的每一个中构建一个所有结果的数组，然后按日期对其进行排序。所以你可以有类似的东西：

```
@items = [] << @plays << @wants << @ratings
@items.sort_by { |item| item.created_at } 
```

然后你的视图代码可以询问每个项目它的类是什么来确定使用哪个文本。

重构的方法是注意到您的 3 个类几乎相同 - 事实上，Play 和 Want 除了名称之外是相同的，而 Rating 只添加了一个列。因此，为所有 3 个添加一个超类。您可能需要进行巧妙的迁移以使用 STI 将数据库表合并到一个表中，但这可能是更好的长期解决方案。

# php - Php - 提取 zip 文件并登录 *.csv 文件

> ID：12771554
> 
> 赞同：0
> 
> 时间：2012-10-07T18:27:30.937
> 
> 标签：php, logging, csv, zip, extract

我需要一个 php 脚本来提取文件（带有文件夹和子文件夹）并创建一个日志，其中插入一些有关提取的文件的信息。

现在，下面的脚本提取了一个 zip 文件（包含文件夹和子文件夹），但仅在 csv 文件中插入了最后一个提取的文件信息。如何修复它以创建所有文件提取信息的列表。

感谢帮助。

```
file = "test.zip";
$dir = getcwd();
function Unzip($dir, $file, $destiny="")
{
$dir .= DIRECTORY_SEPARATOR;
$path_file = $dir . $file;
$zip = zip_open($path_file);
$_tmp = array();
$count=0;
if ($zip)
{
    while ($zip_entry = zip_read($zip))
    {
        $_tmp[$count]["filename"] = zip_entry_name($zip_entry);
        $_tmp[$count]["stored_filename"] = zip_entry_name($zip_entry);
        $_tmp[$count]["size"] = zip_entry_filesize($zip_entry);
        $_tmp[$count]["compressed_size"] = zip_entry_compressedsize($zip_entry);
        $_tmp[$count]["mtime"] = "";
        $_tmp[$count]["comment"] = "";
        $_tmp[$count]["folder"] = dirname(zip_entry_name($zip_entry));
        $_tmp[$count]["index"] = $count;
        $_tmp[$count]["status"] = "ok";
        $_tmp[$count]["method"] = zip_entry_compressionmethod($zip_entry);

        if (zip_entry_open($zip, $zip_entry, "r"))
        {
            $buf = zip_entry_read($zip_entry, zip_entry_filesize($zip_entry));
            if($destiny)
            {
                $path_file = str_replace("/",DIRECTORY_SEPARATOR, $destiny . zip_entry_name($zip_entry));
            }
            else
            {
                $path_file = str_replace("/",DIRECTORY_SEPARATOR, $dir . zip_entry_name($zip_entry));
            }
            $new_dir = dirname($path_file);

            mkdir($new_dir);

            $fp = fopen($dir . zip_entry_name($zip_entry), "w");
            fwrite($fp, $buf);
            fclose($fp);

            zip_entry_close($zip_entry);

        }
        echo "\n</pre>";
        $count++;
        $named = zip_entry_name($zip_entry);                            
        $outputfile = "log.csv";
        if (!$outfilefp = fopen($outputfile, "w"))
        die("<br>No write on $outputfile");
        else
        echo "<br>Add lines to csv file";
        $temp = array($path_file,$new_dir,$named);
        fputcsv($outfilefp, $temp, ";");
    }

    zip_close($zip);
}
}
  Unzip($dir,$file); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:01:39.363

实际上它是插入每一个，但你每次都覆盖最后插入的文件，所以你只看到最后一个。[fopen](http://php.net/manual/en/function.fopen.php)的模式应该**不是****w**

> 'w' 只为书写而打开；将文件指针放在文件的开头并将文件**截断为零长度**。如果该文件不存在，请尝试创建它。
> 
> 'a' 只供书写；将文件指针放在文件末尾。如果该文件不存在，请尝试创建它。

# java - Scala 中的 JavaFX 2 和 setCellValueFactory()？

> ID：12771556
> 
> 赞同：4
> 
> 时间：2012-10-07T18:27:35.260
> 
> 标签：java, scala, javafx-2, javafx

我正在尝试遵循此 JavaFX 2 指南：

[http://docs.oracle.com/javafx/2/ui_controls/table-view.htm#CJAGAAEE](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm#CJAGAAEE)

我使用 Scala 而不是 Java，对我来说它看起来像这样：

```
<TableView fx:id="test">
     <columns>
         <TableColumn prefWidth="75.0" text="Message" />
     </columns>
</TableView> 
```

和代码：

```
val c = test.getColumns.get(0) // Get the first column.
c.setCellValueFactory(new PropertyValueFactory[Foo, _]("message")) // Foo is my model with a single SimpleStringProperty called "message".

val observableFoos = FXCollections.observableList(foos)
test.setItems(observableFoos) 
```

我遇到的问题是该`setCellValueFactory`行导致：

> 错误：需要类类型但 javafx.scene.control.cell.PropertyValueFactory[com.myapp.models.Foo, _] 找到 c.setCellValueFactory(new PropertyValueFactoryFoo, _)

我不明白我应该如何使用这种方法。如果我用 替换`_`，`String`那么我得到：

> 错误：类型不匹配；找到：javafx.scene.control.cell.PropertyValueFactory[com.myapp.models.Foo,String] 需要：javafx.util.Callback[javafx.scene.control.TableColumn.CellDataFeatures[com.myapp.models.Foo,?0 ],javafx.beans.value.ObservableValue[?0]] where type ?0 c.setCellValueFactory(new PropertyValueFactoryFoo, String)

如果我删除该行，我可以确认一切正常`setCellValueFactory`——我只是在表格中看不到任何内容——只是空白行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T14:50:27.900

**TL;DR：**在 java 中很容易绕过类型参数的类型安全。Scala 不会让您这样做，除非执行显式转换。此外，使用`Table.getColumns`检索列意味着我们丢失了单元格的类型。解决方案：将您的`TableColumn`实例转换为正确的类型，或手动实例化列。

第一个问题在于签名`Table.getColumns`：它返回一个`ObservableList[TableColumn[S,_]]`（参见[http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableView.html#getColumns](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableView.html#getColumns) ()）。所以你的`c`val 输入为`TableColumn[Foo,_]`. 这意味着您丢失了单元格内容的类型（由第二个类型参数表示）。

这里唯一的解决方案是使用强制类型转换正确键入列 ( `c`)：

```
val c = test.getColumns.get(0).asInstanceOf[TableColumn[Foo, String]]
c.setCellValueFactory(new PropertyValueFactory[Foo, String]("message")) 
```

这是非常合乎逻辑的：您有一个列列表，其中每列可以包含不同类型的对象。对于包含不同类型对象的 scala List，我们将面临同样的困境，所有先验都是未知的：只有强制转换（或类型匹配，这是变相的强制转换）才能让您在编译时返回特定类型时间。

另请注意，在网络上的许多 JavaFx 示例中，人们不会通过`Table.getColumns`. 相反，他们手动实例化它们，然后立即调用`setCellValueFactory`它。这样做可以解决您的问题（不需要强制转换），因为您将自己指定类型参数：

```
val c = new TableColumn[Foo, String] // See ma, no cast!
c.setCellValueFactory(new PropertyValueFactory[Foo, String]("message")) 
```

现在，您可能会查看一些 java 示例，并注意到它们在实例化它们时实际上并没有提供**任何**类型参数`TableColumn`：

```
TableColumn c  = new TableColumn();    
c.setCellValueFactory( new PropertyValueFactory<Foo,String>("name")); 
```

它确实可以编译。怎么会这样？可悲的事实是，上面的代码并不比进行强制转换更安全，因为它依赖于 java 对预泛型感知类的向后兼容性。换句话说，因为`c`它只是类型化`TableColumn` 而不是`TableColumn<?, String>`示例性的，java 编译器将其视为非泛型类，并且不会对`TableColumn`. 将此与如果您明确将类型设置`c`为泛型类型（但使用未知单元类型）会发生的情况进行对比：

```
TableColumn<Foo, ?> name  = new TableColumn("Name");
name.setCellValueFactory( new PropertyValueFactory<Room,String>("name")); 
```

在这种情况下，编译器会发出类型不匹配错误：

```
error: method setCellValueFactory in class TableColumn<S,T> cannot be applied to given types;
... 
```

这就像在 scala`c`中输入为 TableColumn[Foo, _]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:09:09.817

我建议尝试使用长形式`PropertyValueFactory`：（
抱歉，我不熟悉 Scala，所以用 Java 编写）

```
 c.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<Foo, String>,
             ObservableValue<String>>() {
     public ObservableValue<String> call(TableColumn.CellDataFeatures<Foo, String> f) {
         // f.getValue() returns the Foo instance for a particular TableView row
         return f.getValue().messageProperty();
         // or
         return new SimpleStringProperty(p.getValue().getMessage());
         // if you omit messageProperty() in Foo model class.
         // However omitting it, causes the property listener could not be attached resulting 
         // unable to refresh (synchronize) tableview row item value when the backing 
         // Foo's message value is changed.
     }
  }); 
```

请注意，您的 Foo 模型必须类似于：

```
public class Foo {
    private SimpleStringProperty message;

    public SimpleStringProperty messageProperty() {
        return message;
    }

    public String getMessage() {
        return message.get();
    }

    public void setMessage(String message) {
        this.message.set(message);
    }
} 
```

# apache - 主域上的 HTTPS 工作正常，但在子域上给出 404 Not Found

> ID：12771562
> 
> 赞同：0
> 
> 时间：2012-10-07T18:27:49.113
> 
> 标签：apache, ssl, https

我最近在一个站点上安装了 COMODO EssentialSSL 通配符。主站点在 HTTPS 上运行良好，但子域不是。

我在子域上有一个 .htaccess 文件，我删除了它。我在子域内创建了一个测试文件夹，并在其中放置了一个 index.html。

`http://mysubdomain.mywebsite.com/httpstest/index.html`or`http://mysubdomain.mywebsite.com/httpstest/` 工作得很好，但`https://mysubdomain.mywebsite.com/httpstest/`or`https://mysubdomain.mywebsite.com/httpstest/index.html`没有，并给出“404 Not Found”错误。SSL 本身似乎很好。如果我单击挂锁，它会显示正确的信息。关于为什么会发生这种情况以及如何解决它的任何帮助都会非常有帮助。

注意：在进一步调查中，我发现浏览器被重定向到主域。如果我尝试 HTTPS，则来自我所在的任何子域。如果我所在的子域 url 在主域中有对应的 url，它会将我带到那个页面，否则它会给我一个 404 错误。，这意味着它在主站点中找不到相同的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:16:10.030

谢谢大家，看我的问题。我们通过在子域的 httpd.conf 文件中添加另一个虚拟主机条目解决了这个问题。但它确实引发了我们目前正在研究的另一个问题。

# graph - N-Quad 图 - 我如何使用它们？

> ID：12771565
> 
> 赞同：8
> 
> 时间：2012-10-07T18:28:08.657
> 
> 标签：graph, rdf, n-triples

我以 N-Quads、.nq 文件的形式从 Nature 下载了一堆数据。这些包含 RDF 图，对吧？如何访问这些数据，如何将 RDF 图转换为更可用的格式（最好是 R/C++/Python 的 Boost 或 igraph）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T19:02:26.623

典型的工作流程是这样的：

1.  将 N-Quads 转储导入支持 SPARQL 的三重存储，如 OpenLink Virtuoso 或 Apache Fuseki
2.  编写提取所需数据的 SPARQL 查询
3.  将 SPARQL 结果（您可以通过简单的 XML 或 JSON（或 CSV，取决于商店）格式获得）转换为您需要的任何格式

或者，直接从您的应用程序发送 SPARQL 查询并处理需要完成的数据。大多数语言都有 SPARQL 客户端库，但即使您没有，也可以非常简单地对查询进行 % 编码并构造查询 URL。

# macos - 是否有适用于 mac os X 10.8 的 opencl 分析器？

> ID：12771567
> 
> 赞同：2
> 
> 时间：2012-10-07T18:28:16.740
> 
> 标签：macos, opencl, osx-mountain-lion, gpu

我试图在我的 OpenCL 内核中找到瓶颈，是否可以在 mac os X 上分析 OpenCL 程序？[我在http://www.gremedy.com/](http://www.gremedy.com/)上找到了 gDebugger ，但它需要 10.5 或 10.6 才能运行。AMD SDK 仅支持 Linux 和 Windows。

山狮有分析器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:54:03.623

您的分析信息必须有多详细？可以使用内置的内部分析器吗？
可以使用 CL_QUEUE_PROFILING_ENABLE 标志创建 OpenCL 队列。

这样你就可以看到你执行的每个内核
：

*   排队
*   提交给您 OCL-Device
*   开始
*   结束

使用**C++-Bindings**，队列的创建可以如下所示：

```
_queue = new cl::CommandQueue(_context, _device, CL_QUEUE_PROFILING_ENABLE ); 
```

分析信息的提取如下所示：

1) 保存要分析的排队内核提供的事件对象（在数组中）。

```
cl::Event evt;
_queue->enqueueNDRangeKernel( _kernel, cl::NullRange, _range, cl::NullRange, NULL, &evt); 
```

2）队列执行后，提取分析信息

```
std::vector<cl::Event> evts;

//add all events to this vector here
//cl::Event evt;
//_queue->enqueueNDRangeKernel( _kernel, cl::NullRange, _range, cl::NullRange, NULL, &evt); 
//evts.push_back(evt);

uint64_t param;
for (unsigned int i=0; i<evts.size(); i++)
{
    evts[i].getProfilingInfo(CL_PROFILING_COMMAND_QUEUED, &param);
    printf("%u: %llu", i, param);
    evts[i].getProfilingInfo(CL_PROFILING_COMMAND_SUBMIT, &param);
    printf(" %llu", param);
    evts[i].getProfilingInfo(CL_PROFILING_COMMAND_START, &param);
    printf(" %llu", param);
    evts[i].getProfilingInfo(CL_PROFILING_COMMAND_END, &param);
    printf(" %llu\n", param);
} 
```

# javascript - 设置魅力对话框隐藏在主应用程序下方？

> ID：12771570
> 
> 赞同：1
> 
> 时间：2012-10-07T18:28:28.780
> 
> 标签：javascript, html, windows-8, microsoft-metro

嗨，我正在使用 javascript 和 HTML5 开发一个 Win8 应用程序，目前正在为设置魅力添加各种选项卡。现在，当我最初为每个选项卡添加页面时，当您点击选项卡时，它没有显示任何内容。当我将应用程序置于快照模式时，我注意到该特定选项卡的页面显示在屏幕底部。我已经逐行复制了 MSDN 中的[示例](http://msdn.microsoft.com/en-us/library/windows/apps/Hh780611.aspx)。

我确实注意到，当它出现在屏幕底部时，它看起来就像一个没有样式的页面。我在想以某种方式没有应用样式。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:40:57.580

很高兴听到！不要忘记您还可以访问 UI Dark。

```
 <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" /> 
```

href 中的 // 位置告诉 Windows 应用商店应用程序该文件将作为 WinJS 库的一部分自动添加到您的应用程序包中。

必须对 CSS 样式进行故障排除是您会遇到的非常常见的事情。幸运的是。现在 Visual Studio 2012 中内置了一个 DOM Explorer 工具，它允许您跟踪样式并查看单个元素是否继承了正确的样式。

这已经救了我几次了。=) 如果您曾经使用过 IE Dev 工具，它们非常相似。这是 MSDN 上显示跟踪 CSS 样式的链接：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh696632.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh696632.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T19:34:56.373

我有点感觉这是一个样式问题。我正在使用自动生成 VS2012 JavaScript 项目的第三方应用程序。唯一的问题是它没有包含对系统样式表的引用。例如：

```
<link rel="stylesheet" href="//Microsoft.WinJS.1.0/css/ui-light.css" /> 
```

希望这可以帮助某人。

# phpmyadmin - 如何在 PHPmyadmin 中的单元格 CLICK 上禁用内联编辑

> ID：12771577
> 
> 赞同：7
> 
> 时间：2012-10-07T18:28:59.220
> 
> 标签：phpmyadmin

在 phpmyadmin 中，当我浏览表格内容时，单击某个单元格会启动此单元格数据编辑器。

如何避免这种情况？我没有找到任何配置选项！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-06T22:35:52.323

从 phpMyAdmin 4.0.0 开始，`double-click`现在是单元格编辑的新默认值。如果需要，您可以完全禁用单元格编辑或通过添加一行将其更改为单击`config.inc.php`：

```
$cfg['GridEditing'] = 'disabled'; //disabled cell/grid editing completely
$cfg['GridEditing'] = 'click'; //single-click editing
$cfg['GridEditing'] = 'double-click'; //default value. No need to specify this except for maybe readability purposes 
```

资料来源：[$cfg['GridEditing'] 上的 phpMyAdmin 文档](https://phpmyadmin.readthedocs.org/en/latest/config.html#cfg_GridEditing)

**更新：**您还可以通过导航到“设置 > 主面板 > 浏览模式 > 网格编辑：触发操作”从 phpMyAdmin 用户界面中简单地调整 GridEditing

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T22:06:53.717

编辑 js/makegrid.js 并替换`$(c).is(".grid_edit")`为`$(c).is(".grid_edit**_no**")`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-11T13:43:54.080

我知道的旧帖子，但仍在接受访问。只需在 phpmyadmin 中转到您的设置：

```
https://yoursite/3rdparty/phpMyAdmin/prefs_forms.php?form=Features 
```

取消选中页面中的第一个框（启用 Ajax）您要禁用它。

无需编辑 javascript 文件，似乎相当极端。我只能假设这个选项是最近的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-16T16:30:15.377

相关部分是`find("td.data").click(function(c)`，如果您在此处返回 false，则将停止编辑。我在这里发帖是因为我发现这个页面是为了维护这个功能，但是在双击时。

如果您还想在双击时启用此功能，只需替换 `find("td.data").click(function(c)` ： `find("td.data").dblclick(function(c)`

在`/js/makegrid.js.`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T05:04:58.803

请注意，以下不是问题的正确解决方案，而是一种解决方法..

虽然我没有发现它的任何缺点，但它可能会限制*phpmyadmin的其他一些功能*

*   进入你的*phpmyadmin*目录下的*js*目录
**   重命名`makegrid.js`为`mmakegrid.js`*

# openlayers - 在矢量图层中移动几次后特征消失

> ID：12771578
> 
> 赞同：2
> 
> 时间：2012-10-07T18:29:01.933
> 
> 标签：openlayers

我试图通过每隔几秒钟改变它的位置并重新绘制矢量图层来移动一个点。这工作了几次，但随后点消失了——它不在地图之外（它只在几个街区外），甚至 getVisibility() 和 onScreen() 都返回 true——它只是没有显示在屏幕上。

我什至将 zIndex:9999 添加到 StyleMap 中，但这并没有改变行为。

我有一个 feature_point 变量（OpenLayers.Geometry.Point），这就是我改变它的位置（位置来自坐标数组）

```
feature_point.geometry.x = position.lon;
feature_point.geometry.y = position.lat;
vector_layer.redraw(); 
```

为什么会消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:44:23.803

尝试使用本机`move`方法[OpenLayers.Geometry.Point.move](http://dev.openlayers.org/docs/files/OpenLayers/Geometry/Point-js.html#OpenLayers.Geometry.Point.move)

**UPD**

或者改用`drawFeature`方法`redraw();`

```
feature_point.geometry.x = position.lon;
feature_point.geometry.y = position.lat;
vector_layer.drawFeature(feature_point); 
```

# php - 如何在单击时将 MYSQL 值更改为“1”？

> ID：12771579
> 
> 赞同：0
> 
> 时间：2012-10-07T18:29:10.390
> 
> 标签：php, mysql, messages

我目前有一个 php 消息传递系统设置，可以发送消息并且一切正常。消息删除，但只有在手动更新数据库中的变量并将其设置为 1 时才会删除。所以现在我只需要一种方法让用户通过 php.ini 为自己删除消息。

目前，我在每条消息的侧面都有文字“删除”。我想让这个可点击，以便在点击时将数据库中的变量值设置为 0 到 1。

代码：

```
<?php
    $page_title = "Messages";
        include('includes/header.php'); 
        confirm_logged_in();
        include ('includes/mod_login/login_form.php');  
    ?>

<div class="modtitle">
  <div class="modtitle-text">Inbox</div>
</div>

<div class="modcontent">

<strong>Inbox</strong> | <a href="messages_sent.php">Sent Messages</a> | <a href="messages_deleted.php">Deleted</a>
<br /><br />
<table width="100%" border="0" cellpadding="5" cellspacing="0">
  <tr bgcolor="#CCCCCC">
    <td width="30%"><strong>Recieved</strong></td>
    <td width="20%"><strong>From</strong></td>
    <td width="28%"><strong>Subject</strong></td>
    <td width="0%"><strong>Read/Unread</strong></td>
      <td width="0%"><strong>Delete</strong></td>
  </tr>
<?php
        $inbox_set = get_inbox();
        while ($inbox = mysql_fetch_array($inbox_set)) {

?>

<?php
 if ($inbox['read'] == 0) { ?>
  <tr bgcolor="#6666B3">
<?php }
 if ($inbox['read'] == 1) { ?>
    <tr>

<?php }  ?>

    <td><?php 

    $datesent1 = $inbox['date_sent'];

    echo "$datesent1"; ?></td>

    <a href="profile.php?id={$inbox['from_user_id']}"><td><?php echo "<a href=\"profile.php?id={$inbox['from_user_id']}\">{$inbox['display_name']}"; ?></td></a>

    <td><?php echo "<strong><a href=\"read_message.php?msg={$inbox[0]}\">{$inbox['subject']}</a></strong>"; ?></td>

    <td><?php   if ($inbox['read'] == 0)  {
                echo "Unread"; 
                }
                if ($inbox['read'] == 1)  {
                echo "Read";
                }
                ?></td>
                <td>
                <?php 
                if ($inbox['delete'] == 0)  {
                echo "Delete";

                }
                 if ($inbox['delete'] == 1)  {
                echo "$deleted_set;";
                }   

                    ; ?></td>

                </td>

<?php
}

?>

</tr>
</table>

</div>

<?php include('includes/footer.php'); ?> 
```

# android - 添加像连续文本一样的视图

> ID：12771581
> 
> 赞同：0
> 
> 时间：2012-10-07T18:29:42.950
> 
> 标签：android, android-layout, textview

我想知道是否有一个库可以添加像连续文本一样对齐的视图。

例如，如果当前“行”中有 3 个 Views 相邻，而第 4 个 Views 太宽，则会自动结转到下一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:52:28.883

不确定我是否收到您的问题，但请查看 GridLayout [http://developer.android.com/reference/android/widget/GridLayout.html](http://developer.android.com/reference/android/widget/GridLayout.html)

# c++ - C ++在具有O（n）空间的数组中找到第一个非重复整数

> ID：12771582
> 
> 赞同：0
> 
> 时间：2012-10-07T18:29:46.420
> 
> 标签：c++, arrays, algorithm, sorting, find

我想返回数组中的第一个（第一次见面，从左到右）非重复元素。

我提供了一种算法，该算法很容易返回在数组中不重复的最小整数，仅使用数组作为额外空间，长度为数组中的最大整数值：

```
// smallest non repeating integer

int firstNonRepeatingInteger(int* input, int n)
{

     max = std::numeric_limits<int>::min() ;

     for(int i = 0 ; i < n ; i++)
     {
        if(input[i] > max)  
            max = input[i];
     }

     int* count = new int[max];

     for(int i = 0 ; i < n ; i++)
          count[input[i]] += 1 ;

     int j = 0;
     while(count[i] != 1)
       j++ ; 

     if(j < n)
        return input[count[j]] ;
     else
        return -1 ;

} 
```

但是，我找不到找到第一次遇到的算法，除非有另一个 n 数组存储遇到整数的时间。

任何想法 ？第一个算法的任何其他实现？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T19:45:35.983

你几乎拥有它：

```
#include <limits>
#include <iostream>

int firstNonRepeatingInteger(int* input, int n)
{
  int min = std::numeric_limits<int>::max() ;
  int max = std::numeric_limits<int>::min() ;

  // Find min/max values in input array.
  for(int i = 0; i < n; ++i)
  {
    if (input[i] > max)
      max = input[i];
    if (input[i] < min)
      min = input[i];
  }

  int* count;
  if (max - min + 1 > n)
  {
    count = new int[max - min + 1];
    // count has more elements than input, so only initialize
    // those elements which will be used.
    for(int i = 0; i < n; ++i)
      count[input[i] - min] = 0;
  }
  else
  {
    // Just initialize everything which is more efficient if
    // count has less elements than input.
    count = new int[max - min + 1]();
  }

  // Count number of occurrences.
  for(int i = 0; i < n; ++i)
    ++count[input[i] - min];

  // Find first non repeating element and return its index,
  // or -1 if there is none.
  int index = -1;
  for (int i = 0; i < n; ++i)
  {
    if (count[input[i] - min] == 1)
    {
      index = i;
      break;
    }
  }
  delete[] count;
  return index;
}

int main()
{
  int values[5] = {-2, 4, 6, 4, -2};
  int index = firstNonRepeatingInteger(values, 5);
  if (index >= 0)
  {
    std::cout << "Found first non repeating integer " << values[index] <<
      " at index " << index << "." << std::endl;
  }
  else
    std::cout << "Found no non repeating integer in array." << std::endl;
  return 0;
} 
```

请注意，您的代码有几个问题：

*   您从未删除分配的内存。
*   `new int[max]`不使用零初始化数组。你需要`new int[max]()`改用。注意空括号，它将所有元素设置为零（参见 ISO C++03 5.3.4[expr.new]/15）。
*   输入数组中的负值将导致内存访问冲突。

# c++ - g_hash_table 和 OpenMp

> ID：12771591
> 
> 赞同：0
> 
> 时间：2012-10-07T18:31:12.403
> 
> 标签：c++, c, openmp, glib

`g_hash_table_lookup`和`g_hash_table_insert`线程安全吗？我可以使用这样的代码：

```
dict = g_hash_table_new();
for (i = 0; i < N; i++) {
    compute_A();
    find_hash_of_A();
    void *value = g_hash_table_lookup(dict, key);
    struct MyStruct *obj;
    if (!value) {
        obj = (struct MyStruct *)value;
    } else {
        compute_obj
        g_hash_table_insert(dict, key, obj);
    }
    do_something_with_obj
} 
```

，`#pragma omp parallel for`还是我需要使用其他一些 OpenMP 编译指示？有时我在那个循环中遇到错误。一个线程版本工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:01:26.383

否。来自[GLib 参考手册的线程部分](http://developer.gnome.org/glib/stable/glib-Threads.html)：

> GLib 本身在内部是完全线程安全的（所有全局数据都被自动锁定），但出于性能原因，个别数据结构实例不会自动锁定。例如，您必须协调多个线程对同一个[GHashTable的访问。](http://developer.gnome.org/glib/stable/glib-Hash-Tables.html#GHashTable)此规则的两个值得注意的例外是[GMainLoop](http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#GMainLoop)和[GAsyncQueue](http://developer.gnome.org/glib/stable/glib-Asynchronous-Queues.html#GAsyncQueue)，它们是线程安全的，不需要进一步的应用程序级锁定来从多个线程访问。大多数引用计数函数，例如[`g_object_ref()`](http://developer.gnome.org/gobject/unstable/gobject-The-Base-Object-Type.html#g-object-ref)也是线程安全的。

# string - 用等效替换特殊字符

> ID：12771592
> 
> 赞同：4
> 
> 时间：2012-10-07T18:31:25.180
> 
> 标签：string, matlab, replace, diacritics

如何用等效字符替换以下特殊字符？

元音：ÁÉÍÓÚáéíóú 分别由 AEIOUaeiou 组成。和字母Ñ由N。

表达方式：

```
str = regexprep(str,'[^a-zA-Z]',''); 
```

将删除所有非字母表中的字符，但是如何用上面显示的等效字符替换？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T18:40:51.740

您可以编写一系列正则表达式，例如：

```
s = regexprep(s,'(?:À|Á|Â|Ã|Ä|Å)','A')
s = regexprep(s,'(?:Ì|Í|Î|Ï)','I') 
```

对于其余的重音字符，依此类推......（对于大写/小写）

警告：即使是拉丁字母的一小部分也有很多[变化](http://en.wikipedia.org/wiki/Diacritic)

* * *

一个更简单的例子：

```
chars_old = 'ÁÉÍÓÚáéíóú';
chars_new = 'AEIOUaeiou';

str = 'Ámró';
[tf,loc] = ismember(str, chars_old);
str(tf) = chars_new( loc(tf) ) 
```

之前的字符串：

```
>> str
str =
Ámró 
```

后：

```
>> str
str =
Amro 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T15:38:17.510

以下代码规范化所有变音符号，即 ÅÄÖ。

```
function inputWash {
    param(
        [string]$inputString
    )
    [string]$formD = $inputString.Normalize(
            [System.text.NormalizationForm]::FormD
    )
    $stringBuilder = new-object System.Text.StringBuilder
    for ($i = 0; $i -lt $formD.Length; $i++){
        $unicodeCategory = [System.Globalization.CharUnicodeInfo]::GetUnicodeCategory($formD[$i])
        $nonSPacingMark = [System.Globalization.UnicodeCategory]::NonSpacingMark
        if($unicodeCategory -ne $nonSPacingMark){
            $stringBuilder.Append($formD[$i]) | out-null
        }
    }
    $string = $stringBuilder.ToString().Normalize([System.text.NormalizationForm]::FormC)
    return $string.toLower()
}
Write-Host inputWash("ÖÄÅÑÜ");

oaanu 
```

如果您不想要该功能，请省略 .toLower()

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-12T04:15:11.787

万一有人仍然需要这个......我做了，所以我花时间查找所有最常见的变音符号：

```
function [clean_s] = removediacritics(s)
%REMOVEDIACRITICS Removes diacritics from text.
%   This function removes many common diacritics from strings, such as
%     á - the acute accent
%     à - the grave accent
%     â - the circumflex accent
%     ü - the diaeresis, or trema, or umlaut
%     ñ - the tilde
%     ç - the cedilla
%     å - the ring, or bolle
%     ø - the slash, or solidus, or virgule

% uppercase
s = regexprep(s,'(?:Á|À|Â|Ã|Ä|Å)','A');
s = regexprep(s,'(?:Æ)','AE');
s = regexprep(s,'(?:ß)','ss');
s = regexprep(s,'(?:Ç)','C');
s = regexprep(s,'(?:Ð)','D');
s = regexprep(s,'(?:É|È|Ê|Ë)','E');
s = regexprep(s,'(?:Í|Ì|Î|Ï)','I');
s = regexprep(s,'(?:Ñ)','N');
s = regexprep(s,'(?:Ó|Ò|Ô|Ö|Õ|Ø)','O');
s = regexprep(s,'(?:Œ)','OE');
s = regexprep(s,'(?:Ú|Ù|Û|Ü)','U');
s = regexprep(s,'(?:Ý|Ÿ)','Y');

% lowercase
s = regexprep(s,'(?:á|à|â|ä|ã|å)','a');
s = regexprep(s,'(?:æ)','ae');
s = regexprep(s,'(?:ç)','c');
s = regexprep(s,'(?:ð)','d');
s = regexprep(s,'(?:é|è|ê|ë)','e');
s = regexprep(s,'(?:í|ì|î|ï)','i');
s = regexprep(s,'(?:ñ)','n');
s = regexprep(s,'(?:ó|ò|ô|ö|õ|ø)','o');
s = regexprep(s,'(?:œ)','oe');
s = regexprep(s,'(?:ú|ù|ü|û)','u');
s = regexprep(s,'(?:ý|ÿ)','y');

% return cleaned string
clean_s = s;
end 
```

感谢 Amro 的简单解决方案！

# php - Codeigniter 隐藏功能名称但保留功能

> ID：12771595
> 
> 赞同：3
> 
> 时间：2012-10-07T18:31:50.100
> 
> 标签：php, html, apache, codeigniter

我有一个带有默认控制器的站点`home`。主页上有一个登录表单，按下登录按钮调用功能`validate_credentials()`，家庭控制器中的功能。

当用户无法从`validate_credentials`我调用的函数中输入正确的登录信息时：

```
$this->index() 
```

这基本上是重新加载主页，并用以前的信息填写电子邮件地址表格。我会打电话给

```
redirect('home'); 
```

但是除非我创建会话变量，否则我无法预先填写电子邮件地址表单。

用户输入错误信息后，网址显示为：

`http://www.example.com/home/validate_credentials`

我只是想：

`http://www.example.com`

甚至：

`http://www.example.com/home`

但使用路线

```
$route['home'] = 'home/validate_credentials'; 
```

它实际上改变了被调用的函数。我只想更改网址。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:46:26.003

好吧，我会说会话存储（尤其是闪存数据）正是为了这个目的——重定向到某个地方，但传递额外的数据。如果您不想这样做，您可能应该只加载一个视图而不进行重定向，然后在页面中使用 HTML5 历史 API 来修改 url 栏的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T21:45:01.233

将验证过程作为索引函数的一部分，然后创建一个名为 is_logged_in 的会话变量，并在验证凭据通过时将其设置为 1。

然后就像做这样的事情一样简单：

```
if($this->session->userdata('is_logged_in')==1)
{
    load the page here.
} else {
    load the login stuff here.
} 
```

这样，如果他们没有登录，他们会看到登录表单，并且任何表单验证错误都会传回相同的 URL，如果他们登录了，他们只会转到正常页面。

# cakephp - 如何正确使用 cakephp 模型别名

> ID：12771597
> 
> 赞同：0
> 
> 时间：2012-10-07T18:32:02.097
> 
> 标签：cakephp, model, alias

如果您愿意提供一些基本代码来展示如何正确使用模型别名。

我的主要困惑是

1.  当我为模型使用别名时，我应该为这样的别名创建特定的控制器和视图，就像我使用为其创建特定控制器和视图的模型一样，还是应该使用别名作为现有模型的简单扩展？

2.  请提供控制器中别名使用的示例。

很抱歉我没有提供任何代码，但我的困惑是在一个非常抽象和示意性的层面上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T06:02:23.040

1.  不，您不需要为别名模型创建控制器和视图
2.  考虑例如。具有外键 sender_id 和 recipient_id 的消息表，它们都指向用户模型。因此，在您的 Message 模型中，关联声明将如下所示：

```
 public $belongsTo = array(
        'Sender' => array(
            'className' => 'User',
            'foreignKey' => 'sender_id'
        ),
        'Recipient' => array(
            'className' => 'User',
            'foreignKey' => 'recipient_id',
        )
    );
```

在您的消息控制器中，如果您想访问 Sender 然后您使用`$this->Message->Sender`or 为接收者`$this->Message->Recipient`。如果您在消息模型上进行查找，则生成的数组将分别在“发件人”下有发件人，在“收件人”键下有收件人。

# android - Can I use android intent from firefox extention?

> ID：12771599
> 
> 赞同：3
> 
> 时间：2012-10-07T18:32:06.107
> 
> 标签：android, firefox-addon

I need send some data from firefox extension to native android application. How can I use intent for this? Is it an api in firefox for this action? Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-13T07:05:29.877

现在可以使用此[插件中的代码作为示例](https://github.com/cscott/intent-addon)

它以一种非常简洁的方式完成，使用 JNI 通过 Firefoxes C++ 代码访问 Android 意图 Java 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:18:29.233

我不认为你可以。Firefox for Android 由两部分组成：Gecko 浏览器引擎（本机二进制文件，与桌面 Firefox 相同）和基于 Java 的用户界面（Android 专用）。这两个部分在很大程度上是独立的，并且通过消息传递进行通信。扩展在 Gecko 中运行，但是只有基于 Java 的部分可以使用意图。我查看了这两个部分可以交换的消息，它们都是非常具体的并且与特定的浏览器操作相关，没有任何东西允许使用通用意图。

如果本机应用程序已经在运行，您可能能够[通过 TCP 套接字进行通信](https://stackoverflow.com/questions/8525428/whats-the-best-way-to-communicate-with-a-firefox-addon/8531503#8531503)。扩展程序或本机应用程序都需要在对方将连接到的众所周知的端口上打开服务器套接字。

# javascript - DIV填充剩余高度计算

> ID：12771600
> 
> 赞同：1
> 
> 时间：2012-10-07T18:32:16.677
> 
> 标签：javascript, jquery, css

我有以下内容：

```
<div id="modal-container">
  <div id="modal-body"></div>
  <div id="modal-footer"></div>
</div> 
```

我正在编写一段 JS 来调整 #modal-body 以填充剩余的可用空间。这实际上比看起来要多：

```
$('#modal-body').css({
  'height': function() {
    // the amount of vertical space we have to work with.
    // this is the height of the container (modalView)
    var containerHeight = $('#modal-container').height();

    // the amount of vertical space the footer takes up
    var footerOuterHeight = $('#modal-footer').outerHeight();

    // we have to also account for the vertical padding of our div
    var paddingTop = $(this).css('padding-top').replace('px', '');
    var paddingBottom = $(this).css('padding-bottom').replace('px', '');
    var marginTop = $(this).css('margin-top').replace('px', '');
    var marginBottom = $(this).css('margin-bottom').replace('px', '');
    var borderTop = $(this).css('border-top-width').replace('px', '');
    var borderBottom = $(this).css('border-bottom-width').replace('px', '');

    return containerHeight-footerOuterHeight-paddingTop-paddingBottom-marginTop-marginBottom-borderTop-borderBottom;
  }
}); 
```

问题源于我们无法为我们的#modal-body 设置“outerHeight”属性，因此我们必须通过考虑它自己的填充、边框、边距等来计算它。

**无论如何，上面的功能大部分都有效。我的两个问题是：**

1.  有没有更好/更简单的方法来做到这一点？
2.  它似乎是 1px 关闭。因此，#modal-container 有一个滚动条，如果我减去一个额外的 1px，它就可以工作。我错过了什么？除了边距、填充和边框之外，我还有什么需要考虑的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T18:36:08.120

> 有没有更好/更简单的方法来做到这一点？

就在这里。

> 问题源于我们无法为我们的#modal-body 设置“outerHeight”属性，因此我们必须通过考虑它自己的填充、边框、边距等来计算它。

这不一定，最终是真的。您可以使用[`box-sizing: border-box;`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)，这将强制调整大小包括边框和填充，但不包括边距。所以你仍然需要处理边距，但这会为你节省一些工作；

```
#yourElement {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

**编辑：**您可以使用纯 CSS 来做到这一点；不需要 JavaScript。请参阅[此演示](http://jsfiddle.net/Sex7U/)。这是基本大纲，HTML：

```
<div class = "container">
    <div class = "fluid">Glee is very very awesome! I have margins, too!</div>
    <div class = "fixed">Glee is awesome!</div>
</div> 
```

CSS：

```
.container {
    height: 300px; /*whatever you want*/
    position: relative; /*necessary*/
}
.fluid {
    margin: 10px; /*just an example*/
    position: absolute;
    top: 0;
    bottom: 75px; /*equal to height of bottom fixed-height div*/
    right: 0;
    left: 0;
}
.fixed {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 75px; /*whatever you want*/
} 
```

希望有帮助！

# java - 可移植 JPA 应用程序，无需在 persistence.xml 中指定数据库用户名和密码

> ID：12771602
> 
> 赞同：0
> 
> 时间：2012-10-07T18:32:22.223
> 
> 标签：java, jpa, eclipselink, persistence.xml

我正在为我的项目开发 JPA 应用程序。我正在使用eclipselink。我找到了本教程，但它不适合我的应用程序 [链接的复杂性。](http://foobar.lu/wp/2010/12/30/change-jpa-entitymanager-connection-properties-at-runtime/)

我想为数据库的用户名、密码和 url 创建一个外部文件，这样我就不会在每次更改用户名和密码或数据库的主机名时更改persistence.xml 文件。

这是我正在使用的代码

```
Map map = new HashMap();
map.put(PersistenceUnitProperties.JDBC_USER, "root");
map.put(PersistenceUnitProperties.JDBC_PASSWORD, "toor");
map.put(PersistenceUnitProperties.JDBC_URL, "jdbc:mysql://localhost:3306/sad?zeroDateTimeBehavior=convertToNull");
map.put(PersistenceUnitProperties.JDBC_DRIVER, "com.mysql.jdbc.Driver"); 
```

上面的代码抛出异常

这是我的persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="SADPU" transaction-type="RESOURCE_LOCAL">
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
<class>sad.entity.Credential</class>
<class>sad.entity.Customer</class>
<class>sad.entity.Employee</class>
<class>sad.entity.HourlyRate</class>
<class>sad.entity.Item</class>
<class>sad.entity.Product</class>
<class>sad.entity.ProductTransaction</class>
<class>sad.entity.Province</class>
<class>sad.entity.Tax</class>
<class>sad.entity.TransactionParticular</class>
<class>sad.entity.WorkingHours</class>
<class>sad.entity.Zero</class>
</persistence-unit> 
```

设置持久性单元后，我创建了实体管理器

```
Persistence.createEntityManagerFactory("SADPU", map); 
```

我删除了属性标签以测试我是否可以实现我想要的，但它会引发异常

> 异常描述：无法从驱动程序 [null]、用户 [null] 和 URL [null] 获取连接。验证您是否已设置预期的驱动程序类和 URL。检查您的登录、persistence.xml 或 sessions.xml 资源。jdbc.driver 属性应设置为与您的数据库平台兼容的类

我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T16:59:38.143

我设法创建了一个可移植的 Controller 类，如下所示：

```
public class SwagJpaController implements Serializable {

    public static final String PERSISTENCE_UNIT = "MyDBPU";

    public SwagJpaController(String database) {
        Map<String, String> properties = new HashMap<String, String>();
        properties.put("javax.persistence.jdbc.url", 
                "jdbc:mysql://localhost:3306/" + database + "?zeroDateTimeBehavior=convertToNull");
        this.emf = Persistence.createEntityManagerFactory(
                SwagJpaController.PERSISTENCE_UNIT, properties);
    }
    private EntityManagerFactory emf = null;

    public EntityManager getEntityManager() {
        return emf.createEntityManager();
    }
} 
```

我建议将属性键作为硬编码字符串放在 Map.put 调用中，看看是否可行。

# mono - 获取 Gtk.Button 的位置？

> ID：12771605
> 
> 赞同：1
> 
> 时间：2012-10-07T18:33:07.243
> 
> 标签：mono, monodevelop, gtk#

我在用单声道开发应用程序时有点卡住了。所以这是我的问题：是否有可能获得 gtk.Button 的 x / y 位置？我的布局如下：

> *   窗户
>     *   盒子
>         *   HBox
>             *   按钮

我想拥有这个职位，因为我在此按钮下方添加了一个弹出菜单。目前它只显示在鼠标光标的正下方。

谢谢你的帮助 ;）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:07:52.097

您可以使用对象的“分配”成员变量获取任何对象的 x、y 位置。例如，如果按钮被称为“button1”，那么它的 x 位置将是：

```
button1.Allocation.X 
```

它的 y 位置将在：

```
button1.Allocation.y 
```

您还可以在“分配”成员中找到这样的宽度和高度，以及许多其他相关细节。

希望有帮助！

# codeigniter - codeigniter 菜单库

> ID：12771607
> 
> 赞同：0
> 
> 时间：2012-10-07T18:33:13.100
> 
> 标签：codeigniter, menu

我正在为 codeigniter 搜索一个好的菜单库，它可以尽可能快地实现并且应该尽可能简单。有人可以给我一些有用的提示在哪里搜索，如果有一些，选择哪一个？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-07T20:42:12.463

如果您希望在您的应用程序中实现 CRUD 功能，您可以使用 GroceryCRUD。

# c - 为什么 char * malloc 给我一个 scanf 的段错误？

> ID：12771613
> 
> 赞同：0
> 
> 时间：2012-10-07T18:34:29.370
> 
> 标签：c, string, segmentation-fault, scanf

```
char * input = (char*)malloc(256);

scanf("%s", input); 
```

段错误。为什么？我在 C 中使用字符串时遇到了很多麻烦，但我觉得一切都在这里完成。我什至遵循了一个 100k+ SO 用户的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:40:48.187

该错误可能由以下原因引起：

*   malloc() 未能分配任何内存，请对照 NULL 检查结果。
*   由于 scanf 的缓冲区溢出，超过 256 个字符。
*   通过忘记包含`<stdlib.h>`然后对 malloc 的结果进行类型转换。更多信息[在这里](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:40:16.580

您需要确保缓冲区足够大，包括足够的空间用于字符串末尾的尾随 NUL（0 字节）。否则，您会遇到可能导致段错误的缓冲区溢出。

# vb.net - 如何获取网页上显示的所有图像的 URL 列表？

> ID：12771614
> 
> 赞同：3
> 
> 时间：2012-10-07T18:34:30.653
> 
> 标签：vb.net

我正在尝试使用 VB.NET (2010) 来获取出现在特定网页上的每个图像的绝对 URL。到目前为止，我已经弄清楚如何获取图像标签内的所有 URL，就像这样......

```
 For Each SeparateImage As HtmlElement In WebBrowser1.Document.Images
        ListBox1.Items.Add(SeparateImage.GetAttribute("src"))
        Next 
```

这完美无缺。但我不知道如何提取出现在 CSS 样式中的图像 URL。例如...

```
 background-image:url('image.jpg'); 
```

有谁知道一个简单的方法来做到这一点？我不仅需要从内联 CSS 代码中提取图像 URL，还需要从外部样式表中提取图像 URL。

我认为一种方法是获取整个 HTML 页面页面和相关 CSS 样式表的源代码，然后使用一堆字符串拆分和/或正则表达式解析出所有图像 URL。但是，由于我可能会遇到“相对”URL 路径的所有不同可能性，因此找出每个图像的正确*绝对URL 可能会变得相当复杂。*例如...

```
 background-image:url('image.jpg');
    background-image:url('/image.jpg');
    background-image:url('./image.jpg');
    background-image:url('../image.jpg');
    background-image:url('../otherdirectory/image.jpg'); 
```

所以......如果有这样的东西真的很好......

```
 For Each CSS_Style As HtmlElement In WebBrowser1.Document.Styles
        ListBox1.Items.Add(CSS_Style.GetAttribute("background-image"))
        Next 
```

有谁知道我如何能够完成这样的事情？或者有任何其他不涉及令人麻木的正则表达式和逻辑的想法？:)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-14T16:14:54.520

如果您特别想避免“对正则表达式和逻辑感到麻木”，您是否考虑过[HtmlAgilityPack](https://htmlagilitypack.codeplex.com/)？

以下简短代码应显示从 bbc.co.uk 网站下载的 HTML 中包含的所有图像 URL。扩展此代码以解析来自 HTML 文档引用的任何 CSS 文件的图像链接应该不会太难。

```
Imports HtmlAgilityPack

Module Module1

    Sub Main()
        Dim mainUrl As String = "http://www.bbc.co.uk"
        Dim doc As HtmlDocument
        doc = New HtmlDocument()
        Dim sourceString As String = New System.Net.WebClient().DownloadString(mainUrl)
        doc.LoadHtml(sourceString)
        For Each link As HtmlNode In doc.DocumentNode.SelectNodes("//img[@src]")
            Dim linkAddress = GetAbsoluteUrl(link.Attributes("src").Value, mainUrl)
            Console.WriteLine("Image: {0}", linkAddress)
        Next
    End Sub
    '
    Function GetAbsoluteUrl(partialUrl As String, baseUrl As String)
        Dim myUri = New Uri(partialUrl, UriKind.RelativeOrAbsolute)
        If (myUri.IsAbsoluteUri = False) Then
            myUri = New Uri(New Uri(baseUrl), partialUrl)
        End If
        GetAbsoluteUrl = myUri
    End Function

End Module 
```

# python - 将 kwargs 传递给 re.sub()

> ID：12771615
> 
> 赞同：1
> 
> 时间：2012-10-07T18:34:49.280
> 
> 标签：python, regex, ternary

在 Python 中，我试图在模板字符串中实现一个伪三元运算符。如果`kwargs`具有特定键，则将值插入到字符串中。

`re`模块有一种方法可以完全满足我的需求`re.sub()`，您可以传递一个函数以在匹配时调用。我不能做的是传递`**kwargs`给它。代码如下

```
import re

template_string = "some text (pseudo_test?val_if_true:val_if_false) some text"

def process_pseudo_ternary(match, **kwargs):
    if match.groups()[0] in kwargs:
        return match.groups()[1]
    else:
        return match.groups()[2]

def process_template(ts, **kwargs):
    m = re.compile('\((.*)\?(.*):(.*)\)')
    return m.sub(process_pseudo_ternary, ts)

print process_template(template_string, **{'pseudo_test':'yes-whatever', 'other_value':42}) 
```

行`if match.groups()[0] in kwargs:`当然是问题，因为 process_pseudo_ternary`kwargs`是空的。

关于如何通过这些的任何想法？`m.sub(function, string)`不接受争论。

最后的字符串是：（`some text val_if_true some text`因为字典有名为“pseudo_test”的键）。

随意将我重定向到字符串中三元运算符的不同实现。我知道[Python 条件字符串格式](https://stackoverflow.com/questions/9244909/python-conditional-string-formatting)。我需要三元在字符​​串中，而不是在字符串的格式化元组/字典中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:50:03.070

如果我理解正确，您可以使用类似[http://docs.python.org/library/functools.html#functools.partial](http://docs.python.org/library/functools.html#functools.partial)

```
return m.sub(partial(process_pseudo_ternary, custom_1=True, custom_2=True), ts) 
```

编辑：稍作更改，以更好地匹配您的代码。

# java - 如何从 Java 中的 TreeMap 获取根节点？

> ID：12771616
> 
> 赞同：11
> 
> 时间：2012-10-07T18:34:57.307
> 
> 标签：java, map

我有一个扩展 java.util.TreeMap 的类，我想知道是否有人知道我如何获取根节点，以及如果我愿意，我可以如何手动遍历树。当我在[http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/util/TreeMap.java.html](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/util/TreeMap.java.html)查看树图的源代码时，根节点是私有的，因此我不能直接访问它，但是也许有一种方法可以使用树图中已经存在的方法的组合来访问它？

请不要为我编写任何代码，只需将我指向正确的方向/伪代码就可以了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T18:37:43.213

您可以使用反射访问私有成员。但是，这违背了在 OO 语言中封装的目的。[您可以在oracle](http://docs.oracle.com/javase/tutorial/reflect/index.html)的本教程中了解反射。

# c++ - 从链表中删除节点

> ID：12771619
> 
> 赞同：0
> 
> 时间：2012-10-07T18:35:07.183
> 
> 标签：c++, data-structures, linked-list

从最后一个功能中删除不能正常工作。它显示该节点已被删除，但是当我显示它时，它会进入无限循环并显示垃圾。想不出有什么问题！

这是代码：

```
using namespace std;
class List
{
    struct NODE
    {
        int item;
        NODE *next;
    };
    NODE *Head,*Tail;
    public:
    List()
    {
        Head=NULL;
        Tail=NULL;
    }
    ~List()
    {
        while(Head->next!=NULL)
        {
            Delete_At_Head();
        }
        Delete_At_Head();
    }
    void Add_At_First(int);
    void Add_At_Last(int);
    void Delete_At_Head();
    void Delete_At_Tail();
    int Is_Empty();
    void display();
};
void List::Add_At_First(int data)
{
    NODE *temp;
    temp=new NODE;
    if(Head==NULL)
    {
        temp->item=data;
        temp->next=NULL;
        Head=temp;
        Tail=Head;
    }
    else
    {
        temp->item=data;
        temp->next=Head;
        Head=temp;
    }
    cout<<"Node added at first!\n";
}
void List::Add_At_Last(int data)
{
    NODE *temp;
    temp=new NODE;
    temp->item=data;
    temp->next=NULL;
    if(Head==NULL)
    {
        Head=temp;
        Tail=temp;
    }
    else
    {
        Tail->next=temp;
        Tail=temp;
    }
    cout<<"Node added at last!\n";
}
void List::Delete_At_Head()
{
    NODE *temp;
    temp=new NODE;
    temp->item=Head->item;
    temp->next=Head->next;
    delete Head;
    Head=temp->next;
    delete temp;
    cout<<"Node deleted from head!\n";
}
void List::Delete_At_Tail()//Problematic part
{
    NODE *temp,*prev;
    temp=new NODE;
    prev=new NODE;
    temp=Head;
    while(temp->next!=NULL)
    {
        prev=temp;
        temp=temp->next;
    }
    prev->next=NULL;
    delete temp;
    delete Tail;
    Tail=prev;
    delete prev;
    cout<<"Node deleted from tail!\n";
}
int List::Is_Empty()
{
    if(Head==NULL)
        return 1;
    else
    return 0;
}
void List::display()//does not display after delete from tail
{
    NODE *temp;
    temp=new NODE;
    temp->item=Head->item;
    temp->next=Head->next;
    do
    {
        cout<<temp->item<<"-->";
        temp=temp->next;
    }while(temp->next!=NULL);
    cout<<temp->item;
}
int main()
{
    List obj;
    int ch,data;
    do
    {
        cout<<"\n1.Display\n2.Add at first\n3.Add at last\n4.Delete at 
head\n5.Delete at tail\n6.Exit\nEnter your choice: ";
        cin>>ch;
        switch(ch)
        {
            case 1:
            {
                if(obj.Is_Empty())
                    cout<<"List is Empty!\n";
                else
                    obj.display();
                break;
            }
            case 2:
            {
                cout<<"Enter data: ";
                cin>>data;
                obj.Add_At_First(data);
                break;
            }
            case 3:
            {
                cout<<"Enter data: ";
                cin>>data;
                obj.Add_At_Last(data);
                break;
            }
            case 4:
            {
                if(obj.Is_Empty())
                    cout<<"List is Empty!\n";
                else
                    obj.Delete_At_Head();
                break;
            }
            case 5:
            {
                if(obj.Is_Empty())
                    cout<<"List is Empty!\n";
                else
                    obj.Delete_At_Tail();
                break;
            }
            case 6:
            {
                break;
            }
        }
    }while(ch!=6);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:59:30.537

以下应正确删除列表中的最后一项：

```
void List::Delete_At_Tail()
{
    if(Head == NULL) return;

    // If only one item in the list, delete it and empty the list...
    if(Head->next == NULL) {
        delete Head;
        Head = NULL;
        Tail = NULL;
        return;
    }

    // Find the last item in the list
    NODE *temp = Head;
    while(temp->next!=Tail)
    {
        temp=temp->next;
    }

    delete Tail;
    temp->next=NULL;
    Tail=temp;
    cout<<"Node deleted from tail!\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:55:34.597

您肯定删除了太多对象`Delete_At_Tail()`（我假设这是您在编写`delete_from_tail()`或“从最后一个删除”时的意思；当编程精度就是一切！）功能：您想摆脱一个对象，但您正在删除`delete`三个对象，包括已删除对象的前身。您应该只`delete`删除要删除的对象，而不要删除其他对象。除此之外，该功能看起来还可以。

顺便说一句，由于您要维护指向 的指针，因此`Tail`您可以改进查找前任的方法：您可以`next`找到`Tail`. 这避免了在寻找前任的循环中保持两个变量最新的尴尬需要。

# video - 是否可以在 x264 中强制 I_PCM 模式？

> ID：12771631
> 
> 赞同：0
> 
> 时间：2012-10-07T18:35:43.270
> 
> 标签：video, video-encoding, x264, libx264

对于使用 x264 压缩的视频中的某些 I 帧，我需要在所有块中使用 I_PCM 模式。我知道这些帧会占用大量空间，但要求它们尽可能忠实于源，并使它们的编码/解码速度非常快（I_PCM 应该是超快速且无损的）。有没有办法强制 x264 以编程方式执行此操作。我正在使用 libx264 来执行此操作，但我还没有找到在给定帧内指定自定义宏块类型的方法。如果不支持，那么修改库有多难，我应该先在哪里看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:27:05.333

libx264 API 不允许您为帧指定自定义宏块类型。至于 I_PCM 宏块，libx264 很少使用它们（并且根本不使用非零 --psy-rd）。如果你想强制 libx264 使用 I_PCM，你需要在 x264_macroblock_analysis 中强制选择 I_PCM。

# android - 无法为 Android 编译 NME

> ID：12771639
> 
> 赞同：6
> 
> 时间：2012-10-07T18:37:15.143
> 
> 标签：android, haxe, nme, hxcpp

好的，所以我正在尝试将 NME 示例文件的初始版本构建到 Android 设备上。

我可以为 HTML5、Flash 和 Windows 等平台构建，但我无法在 Android 上使用它 - 我总是收到错误消息：

```
Unable to find a javac compiler;
com.sun.tools.javac.Main is not on the classpath.
Perhaps JAVA_HOME does not point to the JDK.
Is is currently set to "C:\Program Files (x86)\Java\jre7" 
```

好的 - 够明显了吧？但我已经检查、重新检查、重新启动、编辑了环境变量，并**绝对**确定该`JAVA_HOME`变量实际上指向 JDK。

有什么解释吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T18:37:15.143

好吧，为了回答我自己的问题，我最终发现`.hxcpp_config.xml`我的用户帐户 ( `C:\Users\James\`) 中有一个文件，它有一个如下所示的 XML 节点：

```
<set name="JAVA_HOME" value="/SDKs//java_jdk" /> 
```

我已将其更改为：

```
<set name="JAVA_HOME" value="C:\Program Files (x86)\Java\jdk1.6.0_29" /> 
```

它有效！

# asynchronous - 读取文件并同步返回（Metro App）

> ID：12771640
> 
> 赞同：1
> 
> 时间：2012-10-07T18:37:16.547
> 
> 标签：asynchronous, microsoft-metro

我正在写一个地铁应用程序。我正在尝试读取文件并从数据中返回一个 float[]。但无论我做什么，该函数似乎都返回null。我已经尝试过类似问题的解决方案，但没有运气。

例如，如果我使用：
float[] floatArray = new ModelReader("filename.txt").ReadModel()
结果将是一个空数组。

但是，如果我使用：
new ModelReader("filename.txt")
正确的数组将打印到控制台，因为“Test”还会在返回数组之前打印数组。这对我来说似乎很奇怪。

请给我一些指导，我不知道出了什么问题。

```
public class ModelReader
{
    float[] array;

    public ModelReader(String name)
    {
        ReadModelAsync(name);
    }

    public float[] ReadModel()
    {
        return array;
    }

    private async Task ReadModelAsync(String name)
    {
        await readFile(name);
    }

    async Task readFile(String name)
    {
        // settings
        var path = @"Assets\models\" + name;
        var folder = Windows.ApplicationModel.Package.Current.InstalledLocation;

        // acquire file
        var file = await folder.GetFileAsync(path);

        // read content
        var read = await Windows.Storage.FileIO.ReadTextAsync(file);
        using (StringReader sr = new StringReader(read))
        {
            Test test = new Test(getFloatArray(sr));
            this.array = test.printArray();
        }
    }

    private float[] getFloatArray(StringReader sr) { ... }

public class Test
{
    public float[] floatArray;

    public Test(float[] floatArray) 
    {
        this.floatArray = floatArray;
    }

    public float[] printArray()
    {
        for (int i = 0; i < floatArray.Length; i++)
        {
            Debug.WriteLine(floatArray[i]);
        }

        return floatArray;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:36:33.960

您试图在异步操作完成之前获得它的结果。我建议您阅读我的[介绍`async`/`await`](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)并跟进[`async`/ `await`FAQ](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)。

特别是，您的构造函数：

```
public ModelReader(String name)
{
  ReadModelAsync(name);
} 
```

在完成之前返回`ReadModelAsync`。由于构造函数不能是异步的，因此我建议您使用我的博客中描述的异步工厂或[异步延迟初始化（也可在我的](http://nitoprograms.blogspot.com/2012/08/asynchronous-lazy-initialization.html)[AsyncEx 库](http://nitoasyncex.codeplex.com/)中找到）。

这是一个使用异步工厂方法的简单示例：

```
public class ModelReader
{
  float[] array;

  private ModelReader()
  {
  }

  public static async Task<ModelReader> Create(string name)
  {
    var ret = new ModelReader();
    await ret.ReadModelAsync(name);
    return ret;
  }

  ...
} 
```

# emacs - 在 org 模式下使用 babel 捕获 shell 命令的输出

> ID：12771642
> 
> 赞同：12
> 
> 时间：2012-10-07T18:37:18.503
> 
> 标签：emacs, org-mode, org-babel

我想了解我的网络硬件。

```
lspci | grep -i net 
```

从终端，此命令提供以下输出：

> > 00:19.0 以太网控制器：英特尔公司 82577LM 千兆网络连接（修订版 06） 02:00.0 网络控制器：英特尔公司迅驰 Advanced-N 6200（修订版 35）

但是当我尝试通过 babel 源代码块从 org-mode 运行它时，我没有得到任何输出。

```
#+BEGIN_SRC sh
lspci | grep -i net
#+END_SRC

#+RESULTS: 
```

是什么赋予了？如何获得与终端相同的输出？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-07T18:54:43.817

您确实得到了结果，只是没有正确处理（很可能暂时显示在 minibuffer 中）。

添加`:results output replace`after`#+begin_src sh`作为**标头参数**（以覆盖默认值），以将**输出**（重新）**放置**在您的 org-mode 缓冲区中。[手册](https://orgmode.org/manual/Results-of-Evaluation.html#Results-of-Evaluation)中描述了它的所有可能值。

# android - 如何获取 ListView 的 FooterView（或最后一项）的位置

> ID：12771643
> 
> 赞同：1
> 
> 时间：2012-10-07T18:37:19.057
> 
> 标签：android, android-listview

我需要获取 FooterView 的位置（或者说列表中的最后一项）`ListView`

我试过`getListView().getCount()`了，但没有帮助。

有人可以帮忙吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T18:41:54.373

你的问题有点含糊，但如果你有一个页脚，这将得到它的索引：

```
int position = getListView().getCount() - 1; 
```

# .net - Visual C++ 编译

> ID：12771644
> 
> 赞同：1
> 
> 时间：2012-10-07T18:37:21.713
> 
> 标签：.net, visual-c++

我所有的商业经验都基于 .NET（VB 和 C#）等高级语言。我有 C 和 C++（大学）的学术经验。

我不完全理解 Visual C++ 如何适应 .NET 方式。我有使用 Cygwin 为 Linux 编译 c++ 程序的经验（在大学）。

我是否正确地说 Visual C++ 将编译成 C# 和 VB.NET 等中间语言？我假设 Visual C++ 由只想针对 Windows 的开发人员使用，而 Cygwin 由想要针对多个环境的 C++ 开发人员使用？

我问的原因是因为我使用 C++ 组件（由另一个开发人员编写）作为 .NET 应用程序的一部分。

我今天在网上阅读了许多 Visual C++ 文章，但我还没有找到我正在寻找的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T18:44:33.957

不。C++ 直接编译为机器代码，没有像 .NET 的 IL 那样的中间步骤，它使用即时编译器在运行时将其转换为机器代码。

如果您需要在 C++ 和 .NET 代码之间进行互操作，那么您可能会想看看 C++/CLI。一种仅*类似于*C++ 但非常擅长弥合原生 C++ 和 .NET 运行时之间差距的语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T18:43:14.970

> 我是否正确地说 Visual C++ 将编译成 C# 和 VB.NET 等中间语言？

是和不是。如果您使用 C++/CLI（这是一种包含在 Visual C++ 中的 Microsoft 专有语言，类似于 C++ 语言但绝对不是一回事），那么是的，它将编译为 .NET 中间代码。如果您关闭 C++/CLI 并使用标准 C++，那么它将编译为本机代码而不使用 .NET 运行时。

> 想要针对多个环境的 C++ 开发人员使用 Cygwin？

如果要针对多个环境，则不需要 Cygwin。然而，用 Cygwin 编译的可移植方式编写的代码也更有可能在其他平台上的 GCC 上编译。您可以使用任何编译器编写可移植代码。

> Cygwin 为 Linux 编译 c++ 程序

我想你在这一点上可能有点困惑。*Cygwin 是一个为Windows*提供 GCC 编译器（和类似 POSIX）环境的包。Cygwin 不在 Linux 上运行，没有必要。

# assembly - 在 LLVM 汇编代码中获取用户输入

> ID：12771646
> 
> 赞同：0
> 
> 时间：2012-10-07T18:37:28.683
> 
> 标签：assembly, input, llvm, bytecode

只是一个关于在 LLVM 汇编代码中接受用户输入的快速问题。它会在主函数的参数中吗？目前我的主要功能如下所示：

```
define i32 @main() nounwind {
factorial.exit:
  %0 = tail call i32 @factorial(i32 3) nounwind   ; <i32> [#uses=1]
  %1 = tail call i32 (i8*, ...)* @printf(i8* getelementptr inbounds ([4 x i8]* @.str, i32     0, i32 0), i32 %0) nounwind ; <i32> [#uses0]
  ret i32 0
} 
```

它现在计算 3 的阶乘，或者我在 3 中放置的任何数字。我目前正在从终端执行此操作，但我将制作一个 makefile 最终执行它。我如何让它从终端获取用户输入，我想我会在将它编译为字节码之后执行它类似于“lli factorial.bc 5”，它会给我5的阶乘。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:13:44.073

所以我能够使用“cin”语句而不是在 main 方法中使用参数来做到这一点。我用 C 对其进行编码并使用 LLVM 网站生成程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T20:38:38.020

编译[llvm.org/demo](http://llvm.org/demo)上的代码会产生以下结果：

```
define i32 @main(i32 %argc, i8** nocapture %argv) nounwind uwtable {
  %1 = getelementptr inbounds i8** %argv, i64 1
  %2 = load i8** %1, align 8, !tbaa !0
  %3 = tail call i64 @strtol(i8* nocapture %2, i8** null, i32 10) nounwind
  %4 = trunc i64 %3 to i32
  %5 = icmp eq i32 %4, 0
  br i1 %5, label %factorial.exit, label %tailrecurse.i

tailrecurse.i:                                    ; preds = %tailrecurse.i, %0
  %X.tr2.i = phi i32 [ %6, %tailrecurse.i ], [ %4, %0 ]
  %accumulator.tr1.i = phi i32 [ %7, %tailrecurse.i ], [ 1, %0 ]
  %6 = add nsw i32 %X.tr2.i, -1
  %7 = mul nsw i32 %accumulator.tr1.i, %X.tr2.i
  %8 = icmp eq i32 %6, 0
  br i1 %8, label %factorial.exit, label %tailrecurse.i

factorial.exit:                                   ; preds = %tailrecurse.i, %0
  %accumulator.tr.lcssa.i = phi i32 [ 1, %0 ], [ %7, %tailrecurse.i ]
  %9 = tail call i32 (i8*, ...)* @printf(i8* getelementptr inbounds ([4 x i8]* @.str, i64 0, i64 0), i32 %accumulator.tr.lcssa.i) nounwind
  ret i32 0
} 
```

特别是您应该查看`%1`(ie `argv+1`) 和`%2`(ie `*(argv+1)`)：当您调用 时`lli factorial.bc 5`，`%2`将包含指向*字符串* `5`的指针。

# c# - 列出相交和连接

> ID：12771647
> 
> 赞同：-1
> 
> 时间：2012-10-07T18:37:29.730
> 
> 标签：c#, asp.net, linq

我为 Intersect 和 Concat 两个列表 TestListA 和 TestListB 写了一些表达式，如下所示：

```
var c= TestListA.Intersect(TestListB)
                .Concat(ListA.Where(a => 
                    ListB.Any(b => b.EndsWith("999") 
                                && b.StartsWith(a.Substring(0, a.Length - 3))))); 
```

我想知道循环和其他条件在幕后的样子，如果我将在 foreach 的帮助下编写所有这些，那么性能会降低吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:04:25.733

您可以访问大多数 .net 框架源。

下面列出了您在此处使用的方法：

```
static IEnumerable<TSource> IntersectIterator<TSource>(IEnumerable<TSource> first, IEnumerable<TSource> second, IEqualityComparer<TSource> comparer) 
{ 
    Set<TSource> set = new Set<TSource>(comparer);
    foreach (TSource element in second) set.Add(element); 
    foreach (TSource element in first)
        if (set.Remove(element)) yield return element;
}

static IEnumerable<TSource> ConcatIterator<TSource>(IEnumerable<TSource> first, IEnumerable<TSource> second) { 
    foreach (TSource element in first) yield return element;
    foreach (TSource element in second) yield return element; 
}

public static bool Any<TSource>(this IEnumerable<TSource> source, Func<TSource, bool> predicate) {
    if (source == null) throw Error.ArgumentNull("source");
    if (predicate == null) throw Error.ArgumentNull("predicate"); 
    foreach (TSource element in source) {
        if (predicate(element)) return true; 
    } 
    return false;
} 
```

一个内部类在哪里`Set`，它的行为类似于某种`HashSet`

`Intersect`和`Concat`方法本身只是对输入参数进行一些验证，然后分别调用`IntersectIterator`和`ConcatIterator`。

`Where`方法也进行验证，然后构造一个`WhereEnumerableIterator<T>`类的实例。当你迭代这个类时，它的行为类似于以下代码：

```
public IEnumerable<T> IterateWhere(IEnumerable<T> source, Funct<T,bool> predicate)
{
    foreach (var element in source)
    {
        if (predicate(element))
        {
            yield return element;
        }
    }
} 
```

# sql - 使用 SQL Server 2008 R2 查询时如何用另一列替换获取的值

> ID：12771648
> 
> 赞同：3
> 
> 时间：2012-10-07T18:37:29.383
> 
> 标签：sql, replace, sql-server-2008-r2, multiple-columns

好吧，让我用例子来解释我的问题

我们有 1 个表 此表包含

```
Id
Name
Number 
```

现在的例子

```
1 House 4
2 Hospital 3
3 Airport 1
4 Station 2 
```

现在当获取为`select * from table`

我想用代表名称的数字替换第三列数字值

所以获取的例子

```
1 House Station
2 Hospital Airport
3 Airport House
4 Station Hospital 
```

我怎样才能做到这一点 ？谢谢你

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T18:40:51.040

```
select t1.id, 
       t1.name,
       t2.name as name2
from your_table t1
left join your_table t2 on t1.number = t2.id 
```

您可以加入同一张表两次以`number`替换`name`. 连接中的`on`条件再次与表匹配，然后您可以`name`从该表中选择 ( `t2`)

## [SQLFiddle 示例](http://sqlfiddle.com/#!3/aa7df/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:41:05.610

您可以使用显式连接来执行此操作：

```
select t.id, t.name, t2.name as otherName
from t left outer join
     t t2
     on t2.number = t.id 
```

# rest - 大规模 REST API

> ID：12771649
> 
> 赞同：6
> 
> 时间：2012-10-07T18:37:32.837
> 
> 标签：rest

我们的 REST API 之一将导致执行一个长时间运行的进程。与其让客户端等待很长时间，我们更愿意立即返回响应。

因此，让我们考虑这个用例：申请人提交申请，最终会有结果。由于这是一个非常大规模的平台，我们不能将应用程序持久化到存储中，而必须将其放入队列中进行处理。

在这种情况下，返回应用程序**最终**将存在的 URI（例如[http://example.com/application/abc123](http://example.com/application/abc123) ）是否可以接受？

类似地，将结果文档的 URI（代表有关应用程序的决定）作为应用程序资源表示的一部分返回是否可以接受？结果文档将在几分钟内不会创建，并且对其 URI（或应用程序的 URI）的 HTTP GET 将导致 404，直到它们被持久化。

在这种情况下，最佳做法是什么？分发资源的“未来”URI 是否可以接受？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T18:50:46.700

我看不出这种设计有什么问题，但请仔细查看[HTTP 状态代码列表以](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)获得更好的响应。恕我直言，第一个请求应返回 202 Accepted：

> 请求已被接受处理，但处理尚未完成。

同时对最终结果的 URL 的请求应返回 204 No Content (?)：

> 服务器成功处理了请求，但没有返回任何内容

当然，当处理完成时，它最终应该返回 200 OK。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T06:46:01.303

来自“ [RESTful Web Services Cookbook](http://shop.oreilly.com/product/9780596801694.do) ”

> 问题
> 
> 您想知道如何为执行计算或验证数据等任务提供资源抽象。
> 
> 解决方案
> 
> 将处理函数视为资源，并使用 HTTP GET 获取包含处理函数输出的表示。使用查询参数为处理函数提供输入。

This entails just GET requests on a URI that represents the processing function. Your example '[http://example.com/application/abc123](http://example.com/application/abc123)' URI. When returning a response you would include what information you have by now and use HTTP codes to indicate the status of the processing as already suggested by Tomasz.

**However..., you should not use this approach, if the subsequent application processing stores or modifies data in any way.**

GET requests should never have side effects. If the submittal of the application leads in anyway (even if only after being processed in from queue) to new information / data being stored, you should use a PUT or a POST request with the application's data in the request's body. See "[Why shouldn't data be modified on an HTTP GET request?](https://stackoverflow.com/questions/705782/why-shouldnt-data-be-modified-on-an-http-get-request)" form more information.

If they application's submittal stores or modifies data, **use the pattern for asynchronous processing: a POST or PUT request with the application's details.**

For example

```
POST http://example.com/applications 
```

which returns "201 Created" with the URI of the new application resource.

or

```
PUT http://example.com/applications/abc123 
```

which returns "201 Created" and

Both would also return any resource information that is already known at that time.

You can then **safely** perform GET requests on the URI of the new resource as they now only retrieve data - the results of the application processing so far - and no data is stored or modified as a result of the GET.

To indicate the application's processing progress, the GET request can either return some specific status code in the response (queued, processing, accepted, rejected), and/or use the HTTP response codes. In either case a "200 OK" should only be returned when the application's processing is complete.

# javascript - 在 Javascript (IE) 中裁剪图像

> ID：12771652
> 
> 赞同：0
> 
> 时间：2012-10-07T18:37:47.830
> 
> 标签：javascript, internet-explorer, crop

有没有办法在 IE 中使用 javascript 来操作图像（裁剪）？我知道我可以使用一些 ActiveX 控件来做到这一点。但是有没有纯javascript方式？可能与过滤器是 Internet Explorer 提供的任何特殊 api 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:59:11.957

这取决于你想要做什么。您可以使用包含`overflow`设置为`hidden`和约束大小的 div 来剪裁图像的任何部分并仅显示所需的裁剪。如果提前知道几何图形，则可以使用纯 HTML/CSS 来完成。如果你需要计算大小，那么可以用javascript设置大小、位置和CSS属性。

演示：http: [//jsfiddle.net/jfriend00/QsHy7/](http://jsfiddle.net/jfriend00/QsHy7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:41:36.650

您可以`Jcrop`与[`jQuery`](http://jquery.com/)库一起使用。（[信息](http://www.webresourcesdepot.com/jquery-image-crop-plugin-jcrop/)，[下载页面](http://code.google.com/p/jcrop/)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-10T09:21:49.763

您还可以查看 iCropper：[http](http://github.com/supnate/icropper) ://github.com/supnate/icropper ，这是一个纯 JavaScript 图像裁剪解决方案。它不依赖于任何使其快速、轻量且易于集成的库。

# javascript - 本地 jQuery.js 文件不起作用

> ID：12771654
> 
> 赞同：3
> 
> 时间：2012-10-07T18:37:51.590
> 
> 标签：javascript, jquery

我从 jQuery.com 下载了 jQuery.js 文件。我已将此文件保存在 3 个位置，包括 JRE/Lib 和桌面（我的 HTML 文件调用它的位置），以确保找到 jQuery.js 文件。我将此 js 文件引用为：

```
<head>
        <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
        $(function(){
            $("#clas").click(function(){
                $(this).hide();
            });
        });
    </script>
</head>

<body>
    <p id="clas"> Hello</p>
    <p>Hi</p>
</body> 
```

当我在 Mozilla 浏览器上运行这个 HTML 文件时，我希望单击它时“Hello”会消失，但它没有。它一如既往地坚固。但是当我使用 jQuery CDN 时：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"> 
```

当我使用名为 Tryit Editor v1.5 的在线 HTML 编辑器时，它工作正常！似乎只有本地 jQuery.js 没有发挥作用。JavaScript 工作正常，只有 $() 部分不行。我正在使用jdk1.6。我想知道为什么会出现这种障碍。如何解决？帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:53:40.327

谢谢！我从一年前在这个论坛上发布的一个类似问题中找到了这个问题的解决方案。链接在这里：

[如果我使用本地 jquery.js 文件，jQuery 代码不起作用，为什么？](https://stackoverflow.com/questions/5926701/jquery-codes-doesnt-work-if-im-using-a-local-jquery-js-file-why?rq=1)

问题似乎是 html 和 js 文件的编码不兼容。所以我将 charset 属性添加到 js 的 script 标签中。问题和“你好”都消失了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:37:01.727

你的代码对我有用。请检查下面的代码，我刚刚修改了 jquery.js 文件的位置，我的文件存储在不同的位置。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<%--<script type="text/javascript" src="jquery.js"></script>--%>
<script type="text/javascript" src="../Scripts/jQuery/jquery-1.7.2.js"></script>
<script type="text/javascript">
    $(function () {
        $("#clas").click(function () {
            $(this).hide();
        });
    });
</script>
</head>

<body>
<p id="clas">Hello</p>
<p>Hi</p>
</body>

</html> 
```

我假设您的 js 的位置不正确。您是否使用与此“html”或 jsp 页面相同的 js 路径？或者你有一个单独的文件夹中的 js 文件？

此外，您可以尝试以下替代方式：

```
$("#clas").live("click", function () {
        $(this).hide();
    }); 
```

请让我知道这可不可以帮你。

# python - 测试时为真的 Django 变量

> ID：12771659
> 
> 赞同：0
> 
> 时间：2012-10-07T18:38:14.663
> 
> 标签：python, django, testing

我想要**一个**在运行应用程序时表现不同的 settings.py 文件

```
./manage.py runserver 
```

并且在测试时

```
./manage.py test myapp 
```

因此，我可以将测试数据库更改为 sqlite，例如：

```
if IS_TESTING:
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.sqlite3', 
            'NAME': 'test_db',                      
        }
    }
else:
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.postgresql_psycopg2', 
            'NAME': DATABASE_NAME,                      
            'USER': DATABASE_USER,                      
            'PASSWORD': DATABASE_PASS,                  
            'HOST': 'localhost',                      
            'PORT': '5432',                      
        }
    } 
```

我可以通过像这样更改 manage.py 脚本来获得这种行为：

```
if __name__ == "__main__":
    os.environ.setdefault('IS_TESTING', 'false')
    print 'off'
    if sys.argv[1] == 'test':
        print 'on'
        os.environ['IS_TESTING'] = 'true'
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "frespo.settings")

    from django.core.management import execute_from_command_line

    execute_from_command_line(sys.argv) 
```

但我认为这仍然不够好，因为当我在 IDE (PyCharm) 中运行测试时，它不会使用我的自定义 manage.py 文件。在 Django 中必须有一个变量。你知道在哪里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T18:58:07.143

如果您仅出于 Django 单元测试的目的需要此条件，则文件中的以下行`settings.py`应该可以工作：

```
if 'test' in sys.argv:
    DATABASES['default']['ENGINE'] = 'django.db.backends.sqlite3'
    SOUTH_TESTS_MIGRATE = False # if you're using south 
```

这假定`DATABASES`始终声明其他标准设置。上面的行只是`sqlite`在单元测试运行的情况下将数据库设置为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:59:00.270

Afaik Django 没有这样的变量。假设您可以编辑 PyCharm 运行的确切命令，您只需在此处添加测试参数，然后在 settings.py 文件中查找它。

```
if "test-argument" in sys.argv:
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.sqlite3', 
            'NAME': 'test_db',                      
        }
    }
else:
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.postgresql_psycopg2', 
            'NAME': DATABASE_NAME,                      
            'USER': DATABASE_USER,                      
            'PASSWORD': DATABASE_PASS,                  
            'HOST': 'localhost',                      
            'PORT': '5432',                      
        }
    } 
```

# jakarta-ee - 验证失败后加载相同的 url

> ID：12771663
> 
> 赞同：0
> 
> 时间：2012-10-07T18:38:32.930
> 
> 标签：jakarta-ee, struts2

验证工作正常。在添加操作时，加载新表单供用户填写。提交后，验证在 processAdd() 上完成。一切皆好。

**问题：**

`http://localhost:8000/Struts2_Spring_Crud/student/add`用户在提交时填写表格，然后通过 处理和验证`http://localhost:8000/Struts2_Spring_Crud/student/processAdd`。如果验证失败，我的 url 是 /processAdd。当验证失败时，我想在 /add 。有没有办法做到这一点？

```
<s:form action="processAdd" method="POST">
    <s:submit method="execute" value="#title"/>
 </s:form>

  public String execute() throws Exception {
        System.out.println("execute() executed");
        //Process form data
        return SUCCESS;
    }

    public String input() throws Exception {
        System.out.println("input() executed");
        //Prepare form data
        return INPUT;
    }

     <default-action-ref name="list"/>
        <action name="list" class="com.myapp.actions.StudentAction" method="getAllStudents">
            <result name="success" type="tiles">/student.list.tiles</result>
        </action>

        <action name="add" class="com.myapp.actions.StudentAction" method="input">
            <result name="input" type="tiles">/student.edit.tiles</result>
            <result name="failure" type="tiles">/student.edit.tiles</result>
        </action>

        <action name="processAdd" class="com.myapp.actions.StudentAction">
            <result name="success" type="redirectAction">list</result>
            <result name="input" type="tiles">/student.edit.tiles</result>
            <result name="failure" type="redirectAction">add</result>
        </action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:49:51.737

试试这个：

```
<action name="processAdd" class="com.myapp.actions.StudentAction">
  <result name="success" type="redirectAction">list</result>
  <result name="input" type="redirectAction">add</result>
  <result name="failure" type="redirectAction">add</result>
</action> 
```

# android - 如何将参数从android应用程序传递到服务器

> ID：12771668
> 
> 赞同：0
> 
> 时间：2012-10-07T18:39:16.503
> 
> 标签：android, webserver, parameter-passing, multipartform-data

谁能告诉我以下代码的问题是什么？

```
outputStream.writeBytes(twoHyphens + boundary + lineEnd);

outputStream.writeBytes("Content-Disposition: form-data; name=\"key\"" + lineEnd);

outputStream.writeBytes(lineEnd);

outputStream.writeBytes("test");

outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:00:29.193

尝试`outputStream.flush()`在最后添加

# compilation - 编译多个 Ocaml 文件

> ID：12771674
> 
> 赞同：5
> 
> 时间：2012-10-07T18:39:55.083
> 
> 标签：compilation, ocaml

我是 Ocaml 的新手，正在尝试编写一些小型示例应用程序。我`ocamlc`在 Linux Ubuntu 10.04 下使用 3.11.2 版本。我想编译两个文件：

```
a.ml
b.ml 
```

文件`b.ml`使用来自`a.ml`. 据我了解，我只能`ocamlc -c`用来执行编译。当我拥有所有文件以将它们链接到可执行文件时，我可以`ocamlc`最后一次调用。`.cmo`此外，在编译使用来自另一个文件的定义的文件时，我必须告诉编译器在哪个`.cmi`文件中找到外部定义。

所以我的想法是使用：

```
ocamlc -i -c a.ml > a.mli
ocamlc -c a.mli b.ml
ocamlc -o b a.cmo b.cmo 
```

第一步工作并生成文件`a.mli`和`a.cmo`，但是在运行第二步时我得到

```
File "b.ml", line 1, characters 28-31:
Error: Unbound value foo 
```

where`foo`是在 中定义`a.ml`和调用的函数`b.ml`。

所以我的问题是：如何分别编译每个源文件并在命令行中指定要导入的接口？我一直在查看文档，据我所知，我必须指定`.mli`要包含的文件，但我不知道如何。

**编辑**

这里有更多细节。文件`a.ml`包含定义

```
let foo = 5;; 
```

文件`b.ml`包含表达式

```
print_string (string_of_int foo) ^ "\n";; 
```

真实的例子更大，但是有了这些文件，我已经有了上面报告的错误。

**编辑 2**

我已经编辑了文件`b.ml`并替换`foo`为并且这有效（即使我有另一个对这个问题并不重要的编译错误，`A.foo`foo 也是可见的）。`b.ml`我想`.mli`明确地编写我自己的文件会更干净，正如所建议的那样

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T18:49:35.097

如果您显示不起作用的代码会更清楚。不过，正如 Kristopher 指出的那样，最可能的问题是您没有指定哪个模块`foo`在其中。您可以明确指定模块，如`A.foo`. 或者您可以`open A`并且只使用名称`foo`。

对于一个小例子没关系，但对于一个大项目你应该注意不要`open`太随意使用。您希望在模块中自由使用好名称，如果打开太多模块，好名称可能会相互冲突。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T19:08:11.803

首先解决`unbound value`问题，正如杰弗里的回答所解释的那样。这是关于您正在使用的命令的评论。

分几个步骤分解编译是了解正在发生的事情的好方法。如果您想编写自己的`a.mli`，很可能隐藏模块的某些值`A`，那么您的命令`ocaml -i -c a.ml > a.mli`是获取此文件的第一个版本然后编辑它的好方法。但是如果你不碰`a.mli`，那么你就不需要生成它：你也可以直接输入

```
ocamlc -o foo a.ml b.ml 
```

这将产生`a.cmo`,`b.cmo`和可执行文件`foo`.

（它还将生成，这是您通过发布 获得`a.cmi`的编译版本。同样，它也会生成）。`a.mli``ocamlc -c a.mli``b.cmi`

请注意，顺序很重要：您需要在命令行上提供`a.ml`before 。`b.ml`这样，在编译时`b.ml`，编译器已经看到`a.ml`并知道在哪里可以找到模块`A`。

* * *

还有一些评论：

*   您在“据我所知”段落中是对的。
*   你并没有真正*包含*一个单独的文件，它更像是 Python 中的*import*：module 的值`A`是可用的，但是在 name 下`A.foo`。的内容`a.ml`没有被复制粘贴到`b.ml`中，而是模块的值`A`，定义在`a.ml`其中，它的编译版本`a.cmo`已被访问。
*   如果您在 中使用此模块`A`，`b.ml`则可以在命令行之前传递以下任何内容`b.ml`：
    *   `a.mli`, 这将被编译成`a.cmi`
    *   `a.cmi`如果你已经编译`a.mli`成`a.cmi`
    *   `a.ml`或者它的编译版本`a.cmo`，如果你不需要编写你自己的`a.mli`，即如果模块的默认接口`A`适合你。（这个接口就是 的每个值`a.ml`）。

# c# - 以编程方式添加开始菜单按钮

> ID：12771679
> 
> 赞同：1
> 
> 时间：2012-10-07T18:40:35.857
> 
> 标签：c#, c++, windows

我正在寻找使用 C# 或 C++ 以编程方式将开始按钮添加到 Windows 8 任务栏的正确方法。我在 MSDN 中搜索过这个问题，但找不到任何有用的东西。你能给我提示一下吗？

# php - Zend 框架：警告：is_readable() [function.is-readable]：open_basedir 限制生效

> ID：12771689
> 
> 赞同：0
> 
> 时间：2012-10-07T18:41:46.713
> 
> 标签：php, zend-framework

> **可能重复：**
> [参考 - 这个错误在 PHP 中意味着什么？](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php)

我在本地网络服务器上进行了 ZF 配置，一切正常。现在我把它放在我的主机上的互联网上，当我加载网站时，我在屏幕上收到许多警告/致命错误。有人知道原因是什么吗？

问候埃里克

例子：

> 警告：is_readable() [function.is-readable]：open_basedir 限制生效。文件（/usr/local/reserved///sites/ericversteeg.nl/www/application/../library/Custom/Zend/Application/Resource/View.php）不在允许的路径中：（/ usr/local/reserved/index.php:/sites/ericversteeg.nl/:/tmp) 在 /sites/ericversteeg.nl/www/library/Zend/Loader.php 第 198 行
> 
> 警告：is_readable() [function.is-readable]：open_basedir 限制生效。文件（/usr/local/reserved///sites/ericversteeg.nl/www/application/../library/Custom/Zend/Application/Resource/View.php）不在允许的路径中：（/ usr/local/reserved/index.php:/sites/ericversteeg.nl/:/tmp) 在 /sites/ericversteeg.nl/www/library/Zend/Loader.php 第 198 行

最后是致命的：

> 致命错误：未捕获的异常“Zend_Controller_Response_Exception”带有消息“无法发送标头；标头已在 /sites/ericversteeg.nl/www/library/Zend/Loader.php 中发送，第 198 行位于 /sites/ericversteeg.nl/www/library/Zend/Controller/Response/Abstract.php:323 堆栈跟踪： #0 /sites/ericversteeg.nl/www/library/Zend/Controller/Response/Abstract.php(341): Zend_Controller_Response_Abstract->canSendHeaders(true) #1 /sites/ericversteeg.nl/www/library/Zend/Controller/ Response/Abstract.php(768): Zend_Controller_Response_Abstract->sendHeaders() #2 /sites/ericversteeg.nl/www/library/Zend/Controller/Front.php(992): Zend_Controller_Response_Abstract->sendResponse() #3 /sites/ ericversteeg.nl/www/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch() #4 /sites/ericversteeg。

我的 index.php ：

```
date_default_timezone_set('Europe/Paris');

// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

/** Zend_Application */
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);
$application->bootstrap()
            ->run(); 
```

我的引导程序

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap {

    public function _initAutoloader() {
        $autoloader = new Zend_Application_Module_Autoloader(array(
            'namespace' => '',
            'basePath' => APPLICATION_PATH,
            'fallbackAutoloader' => true
        ));

        return $autoloader;
    }

    protected function _initConfig() {
        Zend_Registry::set('config', new Zend_Config_Ini(
            APPLICATION_PATH . '/configs/application.ini',
            APPLICATION_ENV,
            array('allowModifications' => true)
        ));
        $router = Zend_Controller_Front::getInstance()->getRouter();
        $router->addConfig(new Zend_Config_Xml(APPLICATION_PATH . '/routes.xml'));
    }

    protected function _initDbAdapter() {
        $this->bootstrap('db');
        $db = $this->getResource('db');
        if (!is_null($db)) {
            Zend_Registry::set('db', $db);
        } else {
            throw new Zend_Exception('Cannot connect to database');
        }
    }

    protected function _initSession() {
        $resource = $this->getPluginResource('session');
        Zend_Session::setOptions($resource->getOptions());
        $ns = new Zend_Session_Namespace('Eric_website');
        Zend_Registry::set('session', $ns);
    }

    protected function _initLog() {
        //Zend_Registry::set('logger', new Custom_Zend_Log());

        // Chrome PhpConsole
        if (APPLICATION_ENV == 'development') {
            Custom_PhpConsole::setEnabledOnServer();
            if (Custom_PhpConsole::isEnabledOnClient()) {
                Custom_PhpConsole::start(true, true, dirname(__FILE__));
                //Custom_PhpConsole::$ignoreRepeatedEvents = true;
            }
        }
        // Dummy debug function in case PhpConsole is not used
        if (!function_exists('debug')) {
            function debug() { }
        }
        $logger = new Zend_Log();

        // firebug writer voor development omgeving
        $writer = new Zend_Log_Writer_Firebug();
        $writer->setEnabled(true);
        $logger->addWriter($writer);

        Zend_Registry::set('logger', $logger);
    }

    protected function _initView() {

        // Initialize view
        $view = new Zend_View();
        $view->addHelperPath(APPLICATION_PATH . '/views/helpers/', 'Custom_Zend_View_Helper');
        $view->addScriptPath(APPLICATION_PATH . '/views/scripts/');
        $view->addScriptPath(APPLICATION_PATH . '/views/partials/');
        //$view->headMeta()->appendHttpEquiv('Content-Language', Zend_Registry::get('language'));

        // Add it to the ViewRenderer
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper('ViewRenderer');
        $viewRenderer->setView($view);
        $view->doctype('XHTML1_STRICT');

        // Return it, so that it can be stored by the bootstrap
        return $view;
    }

} 
```

我的 htaccess 位于根目录中以忽略主机上的公共目录：

```
RewriteEngine On 
RewriteRule ^\.htaccess$ - [F] 
RewriteCond %{REQUEST_URI} =""
RewriteRule ^.*$ /public/index.php [NC,L] 
RewriteCond %{REQUEST_URI} !^/public/.*$
RewriteRule ^(.*)$ /public/$1 
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [NC,L] 
RewriteRule ^public/.*$ /public/index.php [NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:09:32.037

如果您的服务器由 Plesk 或类似面板控制，那么通常会将 open_basedir 选项设置为您的 Web 文件夹（基本上，这些面板的默认行为是限制您的脚本访问您的 Web 文件夹之外的文件）。但是在很多情况下，禁用此限制是有意义的并且不会滥用，例如，在任何虚拟主机文件夹之外有一个框架作为一个副本，供不同主机上的脚本使用。

您需要将以下文本添加到您的 vhost.conf 中（通常位于 /var/www/vhosts/yourdomain.com/httpdocs）：

```
<Directory /var/www/vhosts/yourdomain.com/httpdocs>
    php_admin_value open_basedir "/var/www/vhosts/yourdomain.com" # or /var/www/vhosts etc., depends on where do you want to include your files from, put top level dir here
    php_admin_flag safe_mode off
</Directory> 
```

之后，重新启动您的网络服务器或重建其配置而不重新启动，如下所示：

websrvmng -u –vhost-name=yourdomain.com

# android - 如何阅读表格中的按钮触摸？

> ID：12771697
> 
> 赞同：0
> 
> 时间：2012-10-07T18:42:53.817
> 
> 标签：android, button, touch

在按钮表（自定义键盘）中测试按钮触摸的正确方法是什么？每个按钮的 OnTouch 侦听器似乎很麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:07:33.457

这并不麻烦。但是，我建议对所有这些都使用相同的侦听器。*（这是使用`OnTouchListener`;`OnClickListener`在您的情况下可能会更好。）*

```
public class MyButtonTouchListener implements OnTouchListener {
    @Override
    public boolean onTouch(View v, MotionEvent ev) {
        Button b = (Button) v;
        String buttonText = b.getText().toString();
        // Do whatever, based on buttonText. Example: if (buttonText.equals("#")) { doPound(); }
    }
} 
```

然后，您创建这些项目之一，并将其​​分配给所有项目。

```
MyButtonTouchListener listener = new MyButtonTouchListener();
ArrayList<Button> myButtons = new ArrayList<Button>();
// Add all your Button objects to the ArrayList.
for (Button b : myButtons)
    b.setOnTouchListener(listener); 
```

现在，您的听众只在内存中出现一次，并且每个项目仍然具有独特的功能。

# javascript - 带有 MongoDB 的客户端 jQuery 应用程序

> ID：12771700
> 
> 赞同：5
> 
> 时间：2012-10-07T18:43:02.870
> 
> 标签：javascript, jquery, mongodb

我正在尝试编写一个非常简单的示例应用程序来熟悉使用 MongoDB。本质上，我想要一个查询本地 MongoDB 服务器的网页，使用 jQuery 动态添加和删除内容。我将页面布局和 jQuery 放在一起完全没有问题，但是我对等式中的 MongoDB 部分越来越感到困惑。我知道 MongoDB 是一个*服务器*，并且从客户端远程运行，但对于我的示例，我只是希望能够从客户端浏览器内的 JavaScript 快速轻松地查询：

```
$("#toggle").click(function() {
    if ($(this).is(":checked") {
        // add items from mongodb
        addItems(mongodb.test.find({ age: { $gt: 5 }}));
    } else {
        $("#results").hide();
    }
}); 
```

有没有办法以这种方式与 MongoDB 交互？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T18:48:29.957

您需要一个驱动程序来连接到 MongoDB 服务器。驱动程序列表在这里： [http ://www.mongodb.org/display/DOCS/Drivers](http://www.mongodb.org/display/DOCS/Drivers)

有一个 JS 驱动程序，但仅适用于服务器端 JS - 特别是 node.js

底线，您不能直接从浏览器连接。您需要一个服务器端组件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T07:12:28.120

正如@balafi 所说，您需要一个驱动程序。

MongoDB 确实有一个 REST 接口，实际上有一些驱动程序，例如 Mongoose，旨在为 MongoDB 创建一个功能齐全的 REST 接口。

如果您想使用 MongoDB 而无需设置服务器端的所有麻烦，这可能是您要走的路。这样，您只需使用所需的指定参数从 JQuery ping POST 或 GET 调用。

您可以在此处找到有关 REST 接口的更多信息：[http ://www.mongodb.org/display/DOCS/Http+Interface](http://www.mongodb.org/display/DOCS/Http+Interface)

However I should warn you the built in one for MongoDB is extremely lacking and is only designed for extremely simple queries.

# java - 从java中的数组中删除重复项不能使用hashset

> ID：12771705
> 
> 赞同：0
> 
> 时间：2012-10-07T18:43:30.603
> 
> 标签：java

目前，我无法从给定数组中删除重复项。我写了一个程序，但它只返回全零。我不能使用哈希集。

```
public class Assignment05a 
{
    public static void main(String args[]) 
    {
         int[] sourceArray = {1,4,5,4,1,2,3,5,9,7,12,-5,1,4,-1,-5,12,1};
         java.util.Arrays.sort(sourceArray);
         eliminateDuplicates(sourceArray); 
    }

    public static int[] eliminateDuplicates(int[] list)
    {   
         int[] noDup = new int[list.length]; 

         for (int c = 0; c < list.length-1; c++)
         {
             if (list[c] != list[c+1])
                {
                    list[c] = noDup[c];
                }
         }

         for(int i = 0; i < noDup.length; i++)
         {
             System.out.println(noDup[i]);
         }
         return noDup;
}   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:10:26.550

我想我们可以更新`eliminateDuplicates`方法如下：

```
public static int[] eliminateDuplicates(int[] list){   
     List<Integer> noDup = new ArrayList<Integer>(); 
     noDup.add(list[0]);
     for (int c = 1; c < list.length-1; c++){
         if(!noDup.contains(list[c])){
             noDup.add(list[c]); 
         }
     }
     int[] noDupArray = new int[noDup.size()];
     for(int i = 0; i < noDup.size(); i++){
         noDupArray[i] = noDup.get(i);
         System.out.println(noDup.get(i));
     } 
     return noDupArray;
} 
```

如果您不想使用`List/ArrayList`，我相信您可以更新`eliminateDuplicates`方法如下：

```
public static int[] eliminateDuplicates(int[] list){   
     int[] noDup = new int[list.length]; 
     noDup[0] = list[0];
     int noDupCount = 1;
     for (int c = 1; c < list.length-1; c++){
         boolean bAlreadyAdded = false;
         for (int d = 0; d < noDup.length-1; d++){
           if (noDup[d] == list[c]){
               bAlreadyAdded = true;
            }
         }
         if(!bAlreadyAdded){
             noDup[noDupCount++] = list[c]; 
         }
     }
     int[] newUniques = new int[noDupCount];
     for(int i = 0; i < noDupCount; i++){
         newUniques[i] = noDup[i];
         System.out.println(noDup[i]);
     }
     return newUniques;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:26:08.673

您也许可以将每个字符映射到一个布尔数组，并根据布尔数组索引中该字符的 ascii 值将其设置为 true 或 false。看看这个：

# matlab - Matlab颜色检测

> ID：12771706
> 
> 赞同：2
> 
> 时间：2012-10-07T18:43:58.433
> 
> 标签：matlab, image-processing, computer-vision

我试图始终如一地检测同一场景的图像之间的某种颜色。这个想法是根据颜色配置文件识别一组对象。因此，例如，如果给定一个场景，其中有一个绿球，并且我选择该绿色作为调色板的一部分，我想要一个函数，它有一个反映它检测到球的矩阵。

任何人都可以为这个项目推荐一些matlab函数/插件/起点吗？理想情况下，颜色识别功能将采用一组颜色值，并将它们匹配在某个阈值内。

有点像这样： http: [//www.mathworks.com/matlabcentral/fileexchange/18440-color-detection-using-hsv-color-space-training-and-testing](http://www.mathworks.com/matlabcentral/fileexchange/18440-color-detection-using-hsv-color-space-training-and-testing)

除了它有效（这个没有）

更新：

这就是我选择不使用上述工具包的原因。

我首先在图片中选择一些感兴趣的颜色

![一切进行得都很顺利..](../Images/ac705f132789db1cfb148e027d49fb72.png)

然后要求该功能在以后的图像中识别道路...

![哦哦](../Images/8a60c407198feb13efa2a722a00b13c6.png)

并且绝对不会触发任何有用的东西。所以，是的，除了我在下载和修复的代码中遇到的几个错误之外，这有点令人兴奋。我没有尝试修复识别颜色的代码主体，因为......好吧，我不知道如何，这就是我来这里的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T23:22:20.960

所以，让我首先说带有颜色配置文件的道路检测是一个病态问题。但是，如果道路的颜色是一致的，并且照明不会改变您尝试识别的对象的颜色，那么您可能会拍摄。（如果这是在室外拍摄的，或者使用不同的相机，或者如果出现阴影，或者它发生在任何类型的真实世界环境中，这将非常困难）

这里有几件事可能会有所帮助。

尝试事先对图像进行平滑处理，在第一张图像中得到不好结果的原因可能是道路上的小像素变化。如果你可以模糊它们，或者使用某种分水岭或局部平均，你可能会得到颜色更一致的区域。

您也可以考虑使用 LAB 颜色空间而不是 HSV 或 RGB。

使用边缘检测（参见 matlab 的 canny 边缘检测器）可能能够为您提供一些边界信息。如果你正在寻找一个光滑的物体，它里面不会有很多边。

编辑：我试图以最简单的方式遵守这个建议。这是生成的代码和一些示例。

```
im=rgb2gray(im) %for most basic color capturing.. using another color space is better practice
%imshow(im)
RoadMask=roipoly(im)%create mask 
RoadMask=uint8(RoadMask);%cast to so you can elementwise multiply
im=im.*RoadMask;%apply mask
[x y]=size(im);
for i=1:x
    for j=1:y
        %disp('here')
        if (im(i,j)<160 || im(i,j)>180) %select your values based on your targets range
            im(i,j)=0;                  %replace everything outside of range with 0
            %disp(im(x,y))              %if you'd like to count pixels, turn all values
        end                             %within range to 1 and do a sum at end
    end
end 
```

首先从 RGB 转换为灰度 ![在此处输入图像描述](../Images/36bc5c89184dac29ba5cabe5db13566f.png) 选择与道路灰度大致匹配的区域 ![在此处输入图像描述](../Images/ff8b7e0cbf649d63d603b54856ed73da.png) 注意部分道路没有被捕获并且块状边缘。比如这个------------^

这个实现又快又脏，但我想在忘记之前把它放上来。我将尝试使用实现平滑、采样和 LAB 颜色空间的代码进行更新。

# php - 从多维数组创建嵌套列表

> ID：12771708
> 
> 赞同：11
> 
> 时间：2012-10-07T18:44:19.947
> 
> 标签：php, arrays

我在 PHP 中有一个数组，如下所示：

```
array (
    [0] => array (
        [id] => 1
        [title] => "Title 1"
        [parent_id] => NULL
        [depth] => 0
    )
    [1] => array (
        [id] => 2
        [title] => "Title 2"
        [parent_id] => NULL
        [depth] => 0
    )
    [2] => array (
        [id] => 3
        [title] => "Title 3"
        [parent_id] => 2
        [depth] => 1
    )
    [3] => array (
        [id] => 4
        [title] => "Title 4"
        [parent_id] => 2
        [depth] => 1
    )
    [4] => array (
        [id] => 5
        [title] => "Title 5"
        [parent_id] => NULL
        [depth] => 0
    )
    [5] => array (
        [id] => 6
        [title] => "Title 6"
        [parent_id] => 4
        [depth] => 2
    )
) 
```

我想要做的是遍历这个数组并`<ol>`从中创建一个嵌套列表。所以结果应该是这样的：

```
<ol>
    <li>Title 1</li> // id = 1
    <li>Title 2</li> // id = 2
    <ol>
        <li>Title 3</li> // id = 3 -> parent_id = 2
        <li>Title 4</li> // id = 4 -> parent_id = 2
        <ol>
            <li>Title 6</li> // id = 6 -> parent_id = 4
        </ol>
    </ol>
    <li>Title 5</li> // id = 5
</ol> 
```

我一直在想一种方法来完成这项工作。但到目前为止，每一次尝试都失败了……

任何人都知道我如何`<ol>`从这样的数组创建这样一个嵌套列表？

请注意，我对给定的数据没有任何控制权。我只是调用一个 API，它返回 json 数据，我将其转换为一个数组。该阵列看起来与我描述的完全一样。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-07T19:06:19.233

你应该使用**递归**：

首先是 'php' 语法中的数组：

```
<?php
$a=array (
    '0' => array (
        'id' => 1,
        'title' => "Title 1",
        'parent_id' => 'NULL',
        'depth' => 0
    ),
    '1' => array (
        'id' => 2,
        'title' => "Title 2",
        'parent_id' => 'NULL',
        'depth' => 0
    ),
    '2' => array (
        'id' => 3,
        'title' => "Title 3",
        'parent_id' => 2,
        'depth' => 1
    ),
    '3' => array (
        'id' => 4,
        'title' => "Title 4",
        'parent_id' => 2,
        'depth' => 1
    ),
    '4' => array (
        'id' => 5,
        'title' => "Title 5",
        'parent_id' => 'NULL',
        'depth' => 0
    ),
    '5' => array (
        'id' => 6,
        'title' => "Title 6",
        'parent_id' => 4,
        'depth' => 0
    )
); 
```

这里的**代码**：

```
$level = 'NULL';

function r( $a, $level) {
   $r = "<ol>";
   foreach ( $a as $i ) {
       if ($i['parent_id'] == $level ) {
          $r = $r . "<li>" . $i['title'] . r( $a, $i['id'] ) . "</li>";
       }
   }
   $r = $r . "</ol>";
   return $r;
}

print r( $a, $level );

?> 
```

**结果**：_

```
<ol><li>Title 1<ol></ol></li><li>Title 2<ol><li>Title 3<ol>
</ol></li><li>Title 4<ol><li>Title 6<ol></ol></li></ol></li></ol></li><li>Title 5
<ol></ol></li></ol> 
```

1.  标题 1\n
    1.  标题 2\n
        1.  标题 3\n
            1.  标题 4\n
                1.  标题 6\n
            2.  标题 5\n

                **检查后编辑为解决方案**

                为了避免空叶子：

                ```
                function r( $a, $level) {
                   $r = '' ;
                   foreach ( $a as $i ) {
                       if ($i['parent_id'] == $level ) {
                          $r = $r . "<li>" . $i['title'] . r( $a, $i['id'] ) . "</li>";
                       }
                   }
                   return ($r==''?'':"<ol>". $r . "</ol>");
                } 
                ```

                * * *

                ## 回答 #2

                > 赞同：4
                > 
                > 时间：2012-10-07T19:20:56.527

                您可以尝试以下方法

                ```
                $array = array (
                    "0" => array (
                        "id" => 1,
                        "title" => "Title 1",
                        "parent_id" => NULL,
                        "depth" => 0
                    ),
                    "1" => array (
                        "id" => 2,
                        "title" => "Title 2",
                        "parent_id" => NULL,
                        "depth" => 0
                    ),
                    "2" => array (
                        "id" => 3,
                        "title" => "Title 3",
                        "parent_id" => 2,
                        "depth" => 1
                    ),
                    "3" => array (
                        "id" => 4,
                        "title" => "Title 4",
                        "parent_id" => 2,
                        "depth" => 1
                    ),
                    "4" => array (
                        "id" => 5,
                        "title" => "Title 5",
                        "parent_id" => NULL,
                        "depth" => 0
                    ),
                    "5" => array (
                        "id" => 6,
                        "title" => "Title 6",
                        "parent_id" => 4,
                        "depth" => 0
                    )
                );

                echo(make($array)); 
                ```

                输出

                ```
                <ol>
                    <li>Title 1</li>
                    <li>Title 2</li>
                    <ol>
                        <li>Title 3</li>
                        <li>Title 4</li>
                        <ol>
                            <li>Title 6</li>
                        </ol>
                    </ol>
                    <li>Title 5</li>
                </ol> 
                ```

                使用的功能

                ```
                function make(array $array, $no = 0) {
                    $child = hasChildren($array, $no);
                    if (empty($child))
                        return "";
                    $content = "<ol>\n";
                    foreach ( $child as $value ) {
                        $content .= sprintf("\t<li>%s</li>\n", $value['title']);
                        $content .= make($array, $value['id']);
                    }
                    $content .= "</ol>\n";
                    return $content;
                }

                function hasChildren($array, $id) {
                    return array_filter($array, function ($var) use($id) {
                        return $var['parent_id'] == $id;
                    });
                } 
                ```

                [观看现场演示](http://codepad.viper-7.com/JCBmQJ)

                * * *

                ## 回答 #3

                > 赞同：1
                > 
                > 时间：2014-07-21T20:46:31.007

                以下数组：

                ```
                Array
                (
                    [0] => Content
                    [1] => Array
                        (
                            [0] => International
                            [1] => Array
                                (
                                    [0] => Mexico
                                    [1] => Array
                                        (
                                            [0] => Tamaulipas
                                        )

                                    [2] => USA
                                )

                        )

                ) 
                ```

                使用此功能：

                ```
                function r($element) {
                    foreach ($element as $value) {
                        if (!is_array($value)) {
                            echo "<li>";
                            echo $value;
                        } else {
                            echo "<ul>";
                            r($value);
                            echo "</li>";
                            echo "</ul>";
                        }
                    }
                } 
                ```

                PHP代码：

                ```
                echo "<ul>";
                r($array);
                echo "</ul>"; 
                ```

                回报：

                ```
                <ul>
                    <li>Public</li>
                    <li>User</li>
                    <li>Content
                        <ul>
                            <li>International
                                <ul>
                                    <li>Mexico
                                        <ul>
                                            <li>Tamaulipas</li>
                                        </ul>  
                                    </li>
                                    <li>USA</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul> 
                ```

# python - 如何检查字符串中的字符是否在值字典中？

> ID：12771710
> 
> 赞同：1
> 
> 时间：2012-10-07T18:44:22.833
> 
> 标签：python

我想检查任何给定字符串中的字符是否列在我创建的值字典（作为键）中，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T18:45:53.517

使用`any`或`all`取决于您是否要检查字典中是否有*任何字符，或者**所有*字符都在。这是一些假设您想要的示例代码`all`：

```
>>> s='abcd'
>>> d={'a':1, 'b':2, 'c':3}
>>> all(c in d for c in s)
False 
```

或者，您可能希望获取字符串中的一组字符，这些字符也是字典中的键：

```
>>> set(s) & d.keys()
{'a', 'c', 'b'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:46:34.703

```
string = "hello" 
dictionary = {1:"h", 2:"e", 3:"q"}
for c in string:
    if c in dictionary.values():
        print(c, "in dictionary.values!") 
```

如果您想检查 c 是否在键中，请改用 dictionary.keys()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T18:56:23.950

```
[char for char in your_string if char in your_dict.keys()] 
```

这将为您提供字符串中所有字符的列表，这些字符在字典中作为键出现。

例如。

```
your_dict = {'o':1, 'd':2, 'x':3}
your_string = 'dog'
>>> [char for char in your_string if char in your_dict.keys()]
['d', 'o'] 
```

# r - R中的read.table和评论

> ID：12771711
> 
> 赞同：6
> 
> 时间：2012-10-07T18:44:32.380
> 
> 标签：r, metadata, read.table

我想将元数据作为评论添加到我的电子表格中，然后让 R 忽略这些。

我的数据是形式

```
v1,v2,v3,
1,5,7,
4,2,1,#possible error, 
```

（例外的是它更长。第一个评论实际上出现在前 5 行之外，用于`scan`确定列数）

我一直在尝试：

```
read.table("data.name",header=TRUE,sep=",",stringsAsFactors=FALSE,comment.char="#") 
```

但是`read.table`（而且，就此而言，`count.fields`）认为我比实际拥有的领域多一个。我的数据框以一个名为“X”的空白列结束。我认为这是因为我的电子表格程序在每一行的末尾添加了逗号（如上例所示）。

使用`flush=TRUE`没有效果，即使（根据帮助文件）它“[...] 允许在最后一个字段 [...] 之后放置注释”

使用`colClasses=c(rep(NA,3),NULL)`也没有效果。

之后我可以删除该列，但由于这似乎是一种常见的做法，我想学习如何正确地做到这一点。

谢谢，

安德鲁

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T18:55:38.890

从文档（`?read.table`）：

> **colClasses**字符。为列假定的类向量。根据需要回收，或者如果字符向量被命名，则未指定的值被视为 NA。
> 
> 可能的值是 NA（默认值，当使用 type.convert 时）、“NULL”（当列被跳过时）、原子向量类之一（逻辑、整数、数字、复杂、字符、原始）或“因子"、"日期" 或 "POSIXct"。否则需要有一个 as 方法（来自包方法）用于从“字符”转换为指定的正式类。

请注意，它说的是使用`"NULL"`，而不是`NULL`。确实，这按预期工作：

```
con <- textConnection("
v1,v2,v3,
1,5,7,
4,2,1,#possible error,
")

read.table(con, header = TRUE, sep = ",",
           stringsAsFactors = FALSE, comment.char = "#",
           colClasses = c(rep(NA, 3), "NULL"))
#   v1 v2 v3
# 1  1  5  7
# 2  4  2  1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T21:33:10.357

您关于评论字符和数据列数的问题与 read.table() 无关，但与您的电子表格无关（我使用的是 Excel）。read.table 的默认行为是将 # 视为注释的开头并忽略后面的内容。您收到错误的原因是数据行末尾有一个逗号。这告诉 read.table 应该有更多的数据。阅读您的原始示例：

```
> read.table(text="v1, v2, v3,
+  1,5,7,
+  4,2,1,#possible error,", sep=",", header=TRUE)
  v1 v2 v3  X
1  1  5  7 NA
2  4  2  1 NA 
```

默认情况下会忽略注释，并创建第四列并标记为 X。您可以在事后轻松删除此列或使用@flodel 提到的方法，或者您可以在将文件读入 R 之前删除尾随逗号。在 Excel 中，将文件另存为 csv（逗号分隔变量）时会添加尾随逗号，因为注释出现在第四列中，Excel 无法将其识别为注释。如果您将文件保存为空格分隔，问题就会消失（删除 sep= 参数，因为空格是默认分隔符）：

```
> read.table(text="v1 v2 v3 
+    1 5 7 
+    4 2 1#possible error", header=TRUE)
  v1 v2 v3
1  1  5  7
2  4  2  1 
```

# jquery - 将 TextField 附加到 Div JQuery

> ID：12771724
> 
> 赞同：0
> 
> 时间：2012-10-07T18:45:52.323
> 
> 标签：jquery, jquery-ui, jquery-selectors, append, clone

我有一个 ID 为“task_alignment”的字段，该字段的值是用户将要输入的值，需要添加到下面的范围中。在下面的代码中，跨度的值为 12。我似乎无法让它工作。

```
<tr>
<td> Aligned To </td> 
<td class="task_table_item_last">
<input type='text' size='95' id='task_alignment' name='task_alignment' value='<?php echo $task_alignment; ?>'>
</td>
<td class="edit_taskicon"><img class="edit_icon_trigger" src="img/add.png"></td>
</tr>

<tr>
<td></td> 
<td class="aligncode_start">
    <span>12</span>

</td> 
</tr> 
```

我试过使用下面的代码，但它什么也没做：

```
<script>
$(document).ready(function() {
    var $aligncode_newitem = $('<span id="aligncode_newitem">'#task_alignment '</span>'),
        $('.edit_icon_trigger').click(function() {
            $("#task_alignment").clone(aligncode_newitem);
        });
});​
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:10:10.770

要在跨度中显示输入值，您可以这样做

```
$('.edit_icon_trigger').on('click',function(){
  var value = $('input#task_alignment').val();
  $('.aligncode_start span').html(value);
}); 
```

你可以在这个 jsfiddle 中测试

[http://jsfiddle.net/xBFKU/](http://jsfiddle.net/xBFKU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T19:26:01.237

尝试：

```
$('.edit_icon_trigger').click(doit);
$('#task_alignment').keypress(function() {
    if (event.which == 13) {
        event.preventDefault();
        doit();
    }
});
function doit() {
    $("td.aligncode_start").html($("td.aligncode_start").html() + ' <span>' + $('#task_alignment').val() + '</span>');
    $('#task_alignment').val('').focus();
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/FakH7/4/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T19:28:21.783

如果我的理解对您的要求是正确的，您需要在输入文本中输入的 td 类 aligncode_start 下向 SPAN 添加“n”数字，对吗？如果是这样，请检查以下代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script type="text/javascript" src="../Scripts/jQuery/jquery-1.7.2.js"></script>
<script type="text/ecmascript">
    $(document).ready(function () {
        $(".edit_icon_trigger").live("click", function () {
            $(".aligncode_start").append("<span>" + ($("#task_alignment").val()) + "</span>");
        });
    });
</script> 
```

```
<div>
    <table>
        <tr>
            <td>Aligned To </td>
            <td class="task_table_item_last">
                <input type='text' size='95' id='task_alignment' name='task_alignment'>
            </td>
            <td class="edit_taskicon">
                <img class="edit_icon_trigger" src="img/add.png"></td>
        </tr>

        <tr>
            <td></td>
            <td class="aligncode_start">
                <span>12</span>

            </td>
        </tr>

    </table>
</div>
</form> 
```

# java - 使用反射读出对象的所有字段及其内容

> ID：12771727
> 
> 赞同：2
> 
> 时间：2012-10-07T18:46:28.120
> 
> 标签：java, reflection

> **可能重复：**
> [java：获取类中的所有变量名](https://stackoverflow.com/questions/2126714/java-get-all-variable-names-in-a-class)

如何`Object o`使用反射 api 读出所有字段及其内容。我会开始，`o.getClass().getDeclaredFields()`但不知道如何继续。

有人有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T18:51:24.297

`o.getClass().getDeclaredFields()`[`Field`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/Field.html#get%28java.lang.Object%29)将返回一个实例数组。对于`Field` `f`数组中的每个，您可以使用`f.get(o)`.

* * *

**编辑**感谢@MarkoTopolnik 指出这一点：如果您打算读取非公共字段，请务必`f.setAccessible(true)`在获取它们的值之前先调用。

# iphone - AddThis + iOS + Facebook 崩溃

> ID：12771729
> 
> 赞同：1
> 
> 时间：2012-10-07T18:46:34.507
> 
> 标签：iphone, ios, facebook, addthis

我在 iOS 中使用 AddThis 来共享图像。尽管其他一切正常（Twitter、电子邮件等），但当我尝试与 Facebook 共享图像时，应用程序崩溃了。我根据需要设置了 FB 密钥和秘密，但经过一些调试后，出现了以下错误：

```
[FBRequest initWithSession:graphPath:]: unrecognized selector sent to instance 0x268b10 
```

关于如何解决这个问题的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T12:46:35.890

终于，问题解决了！

我能够通过删除文件夹 ThirdPartyLibs/FBConnect 中的每个 Facebook 文件来解决这个问题，但文件夹 FacebookSDK 除外。问题是此文件夹（ThirdPartyLibs/FBConnect）中的代码“隐藏”了 FacebookSDK 文件夹中的有效代码，并且重复的 FBRequest 标头没有 initWithSession:graphPath：

我希望这可以帮助遇到同样问题的任何人。;)

# php - 计算复选框的数量签入电子邮件

> ID：12771732
> 
> 赞同：1
> 
> 时间：2012-10-07T18:46:47.373
> 
> 标签：php, html, forms, email

这是我的php代码：

```
$tasks = ' ';
$help = $_POST['help'];
if(empty($help))
{
    $tasks = "None selected.";
}
else
{
    $N = count($help);
    $tasks = $N;
} 
```

HTML是：

```
<input type="checkbox" name="help" value="sign"> //with several inputs with different values 
```

在表单提交时，它会通过电子邮件发送并适当地输出除数组计数之外的所有内容。它在电子邮件末尾始终将 $tasks 变量输出为 1，除非未选中任何复选框。选择复选框 (1-6) 的任何组合都以长度为 1 的数组结束。有谁知道为什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:49:17.507

您需要将复选框设为数组。将名称更改为：

```
<input type="checkbox" name="help[]" value="sign"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:49:26.857

您应该将您的 HTML 代码更改为：

```
<input type="checkbox" name="help[]" value="sign"> 
```

所以帮助将是一个数组。如果您只使用`help`,`$_POST['help']`将只包含最后一个值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T18:49:25.873

您必须重命名字段`name="help[]"`，以便可以将其解析为数组。

# magento - 如何在magento类别中显示可配置产品的简单产品？

> ID：12771735
> 
> 赞同：0
> 
> 时间：2012-10-07T18:47:28.960
> 
> 标签：magento

我正在制作一个电子商务网站，我有很多可配置的产品。每个可配置产品都有许多选项（颜色：红色、蓝色...）。

当我在类别页面上时，只显示可配置的产品。我还想看看简单的产品，它的链接是它的可配置产品，带有预先选择的选项。

我怎样才能做到这一点？是原生的吗？你知道它的扩展吗？

如果没有，我将发布一个开源的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T00:47:21.993

在简单的产品菜单中有一个名为“可见性”的选项，您可以在其中更改添加描述等属性。默认情况下，此属性设置为“单独不可见”。您可以将其更改为“目录”或“目录，搜索”，简单产品应显示在指定的类别中。

# java - 在 Postgres 和 Java 中将字符串转换为 UUID

> ID：12771737
> 
> 赞同：26
> 
> 时间：2012-10-07T18:47:57.437
> 
> 标签：java, postgresql, sorting, uuid

我需要将 String ( text ) 转换为 UUID ( Postgres ) 并保持与 String 相同的排序。可能吗？我当时看到了UUID，所以也许不可能？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2016-01-07T10:17:51.173

在 PostgresSQL 的 SQL 语法中使用

```
concat(UUID,'') 
```

得到一个文本结果。使用

```
uuid(text) 
```

得到一个 UUID 结果。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-08-12T08:04:30.223

在 PostgreSQL 中，除了 using 之外`uuid()`，还可以像这样显式指定类型`::uuid`：

```
with myconst (__ef_filter__id_0, __filter_workitemid_0, __filter_projectid_1, __id_2) as (
values ( 'fcb8284c-1bd4-4d50-b5df-09a091b01d8c'::uuid, '9e4b70a7-c222-47dd-87cb-fbbaaf396ccd'::uuid, uuid('2b10c0a5-e35d-425d-a71a-9e473924ac4c'), uuid('3fa85f64-5717-4562-b3fc-2c963f66afa6')) )
select ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-07T18:57:10.393

JDK 中有一个专门用于管理 UUID 的类，称为`java.util.UUID`. 其中有一个静态方法`fromString`应该适合您的目标。据我所知，您可以在 JDBC 插入语句中使用 UUID 的实例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-07T19:21:14.127

在[oVirt](http://www.ovirt.org)开源项目中，我们使用 PostgreSQL uuid 类型来存储我们的主键和外键。
我们构建了一个名为 Guid 的包装器，它使用 java.util.UUID 类来保存从 DB 读取的数据。
在检索 ResultSet（我们使用 spring-jdbc）时，我们使用 getString 方法来获取 UUID 值作为 String，然后使用 java.util.UUID 的 fromString 方法。
您可以 git clone 我们的项目并查看 ovirt-engine/backend/manager/modules/dal（我们的数据访问层）项目以获取更多信息。

# ruby - 合并哈希中的值

> ID：12771738
> 
> 赞同：0
> 
> 时间：2012-10-07T18:47:59.557
> 
> 标签：ruby, hash, merge, inject

```
nodes = {
  :node1 => { 
    :inherits => nil, 
    :variables => { :foo => 1, :bar => 2 } 
  },
  :node2 => { 
    :inherits => :node1, 
    :variables => { :foo => 9, :baz => 4 } 
  }
} 
```

我一直在尝试了解如何返回一个新的节点哈希，其中每个节点的 :variables 哈希与 :inheritance 中指定的节点的 :variables 合并。换句话说， node1 将保持原样，而 node2 以 :variabes => { :foo => 9, :bar => 2, :baz => 4 } 结束

我一直在浏览涉及 Enumerable#inject、Hash#merge 和块等的文档，并认为是时候寻求帮助了。

更新：

想我会提供更新。这段代码当然不是解决方案，但它可能正朝着正确的方向前进......

```
nodes = {
  :node1 => { :inherits => nil, :variables => { :foo => 1, :bar => 2 } },
  :node2 => { :inherits => :node1, :variables => { :foo => 9, :baz => 4 } }
}

new = nodes.inject({}) do |result, (k, v)|
  result.merge k => v.merge({ :variables => { :a => 6, :b => 7 } })
end 
```

返回

```
{:node2=>{:inherits=>:node1, :variables=>{:a=>6, :b=>7}}, :node1=>{:inherits=>nil, :variables=>{:a=>6, :b=>7}}} 
```

所以 v.merge 没有按预期工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:49:46.957

你想要`Hash#merge`：

```
merged_variables = nodes[:node1][:variables].merge(nodes[:node2][:variables]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:52:57.830

```
nodes[:node2][:variables].replace(
  nodes[:node1][:variables]
  .merge(nodes[:node2][:variables])
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T19:53:41.770

```
merged_nodes = {}

nodes.each do |name, node|
  merged_nodes[name] = node.dup
  merged_nodes[name][:variables] = if node[:inherits]
    nodes[node[:inherits]][:variables].merge node[:variables]
  else
    node[:variables].dup
  end
end 
```

会给你

```
{
  :node1=>{:inherits=>nil, :variables=>{:foo=>1, :bar=>2}},
  :node2=>{:inherits=>:node1, :variables=>{:foo=>9, :bar=>2, :baz=>4}}
} 
```

但它不会处理更深层次的嵌套，即如果`:node3`then 继承`:node2`......如果您需要任何如此复杂的东西，这种基于散列的方法将变得非常笨拙。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T20:43:07.800

通过就地合并缩短一点：

```
nodes[:node2][:variables].merge!(nodes[:node1][:variables])

nodes #=> {:node1=>{:inherits=>nil, :variables=>{:foo=>1, :bar=>2}},
      #    :node2=>{:inherits=>:node1, :variables=>{:foo=>1, :baz=>4, :bar=>2}}} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T07:44:13.777

```
new = {}
nodes.each do |e, v|
    v.each do |attribute, value|
        if attribute == :inherits
            new[e] = value.nil? ? v : nodes[value][:variables].merge( v[:variables] )
        end
    end
end

p new  #=> {:node1=>{:inherits=>nil, :variables=>{:foo=>1, :bar=>2}}, :node2=>{:foo=>9, :bar=>2, :baz=>4}} 
```

# r - 错误：在 storage.mode(x) <- "double" 中：强制引入的 NA

> ID：12771745
> 
> 赞同：0
> 
> 时间：2012-10-07T18:49:22.753
> 
> 标签：r

我是 R 新手，但我正在尝试使用`impute.knn()`来自库（估算）的 6 个最近邻来估计大型微阵列数据集中的缺失值。

这是一个例子：

```
seq1 <- seq(1:12)
mat1 <- matrix(seq1, 3)
mat1[2,2] <- "NA"
impute.knn(mat1, k=6) 
```

我收到以下错误：

```
Error in knnimp.internal(x, k, imiss, irmiss, p, n, maxp = maxp) : 
NA/NaN/Inf in foreign function call (arg 1)
In addition: Warning message:
In storage.mode(x) <- "double" : NAs introduced by coercion 
```

我还尝试了以下方法：

```
impute.knn(mat1[2,2], k=6) 
```

我收到以下错误：

```
Error in rep(1, p) : invalid 'times' argument 
```

我的google-fu今天已经关闭了。关于为什么我可能会收到此错误的任何建议？

编辑：我试过

```
mat1[2,2] <- NA 
```

正如詹姆斯建议的那样，但我遇到了分段错误。使用

```
replace(mat1, mat1[2,2], NA) 
```

也无济于事。还有其他建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T23:09:58.793

我不确定为什么`impute.knn`要这样设置，但是其中的示例`?impute.knn`使用`khanmiss`了一个`data.frame`因素，当被强制转换`matrix`为字符时。

您遇到了分段错误，因为您试图用 `K > ncol(mat1)`最近的邻居进行估算。可能值得向包作者报告一个错误，因为这很容易被签入`R`并返回错误，而不是`C`杀死 R 的级别错误。

```
mat1 <- matrix(as.character(1:12), 3)
mat1[2,2] <- NA # must not be quoted for it to be a NA value
# mat1 is a 4 column matrix so
impute.knn(mat1, 1)
impute.knn(mat1, 2)
impute.knn(mat1, 3)
impute.knn(mat1, 4)
# Will all work 
```

# 笔记

尽管有一个奇怪的例子，`mat1`当它是整数或双精度时也会

```
mat1 <- matrix(1:12,3)
mat1[2,2] <- NA
impute.knn(mat1,2)

mat1 <- matrix(seq(0,1,12),3)
mat1[2,2] <- NA
impute.knn(mat1,2) 
```

# 带回家留言

不要尝试使用比您拥有的更多信息来使用估算。

也许包作者应该注意

```
fortunes(15) 
```

> 真的很难预料用户会有多愚蠢。——Brian D. Ripley R-devel（2003 年 10 月）

并内置一些错误检查，因此一个简单的错误不会导致段错误。

# javascript - 是否应该在 Javascript 中的每个属性或数组项之后放置逗号？

> ID：12771752
> 
> 赞同：0
> 
> 时间：2012-10-07T18:49:45.990
> 
> 标签：javascript, syntax

我们应该写

```
var a = [ 'a', 'b', 'c', ];
var b = { '1', '2', '3', }; 
```

或者

```
var a = [ 'a', 'b', 'c' ];
var b = { '1', '2', '3' }; 
```

最正确的方法是什么？

我注意到旧版本的 IE 会引发错误，如果有逗号期望在逗号之后会有另一个数组项（或属性）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T18:51:36.270

> 我注意到如果有逗号，旧版本的 IE 会引发错误

*这就是在最后一个元素后不加逗号的*充分理由！但是，这样做*是* [有效的](http://es5.github.com/#x11.1.4)。

但是请注意，您的第二个示例...

```
var b = { '1', '2', '3', }; 
```

...将引发语法错误。我猜您打算将其设为对象文字，但在编写问题时却犯了一个错误：

```
var b = { x: '1', y: '2', z: '3', }; //Object literal, no syntax error :) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:53:51.973

根据 ECMAScript 5 规范，两者都是*正确的。*

虽然这与 JavaScript、FWIW 无关，但[JSON 中不允许使用](http://json.org)尾随逗号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T19:08:40.067

我只是笑这种情况:)

```
// Firefox and Chrome 
["a", "b",].length // 2

// ie7
["a", "b",].length // 3 :) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T18:51:49.997

最正确的方法是没有尾随逗号，因为这意味着要遵循某些内容。

# asp.net - VS2012 无法从 MasterPage 代码访问 MasterPage 控件

> ID：12771756
> 
> 赞同：1
> 
> 时间：2012-10-07T18:49:51.200
> 
> 标签：asp.net, master-pages, visual-studio-2012

我已将我的 asp.net 升级到 VS2012 并转换为 Web 应用程序。问题是我现在无法从母版页代码访问母版页中的所有控件！

我在 MasterPage.cs 中有：linkReports.Text="My Link";

我收到此错误：错误 CS0103：当前上下文中不存在名称“linkReports”

在我升级到 VS2012 之前它工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:20:48.700

见这里：[@页面](http://msdn.microsoft.com/en-us/library/ydy4x04a%28v=vs.100%29.aspx)

CodeFile 用于网站项目，而 CodeBehind 用于 Web 应用程序项目。

将 CodeFile 更改为 CodeBehind 并确保继承路径正确。无论这是否解决了您的用户控件问题，您都需要为 WAP 执行此操作。

# c++ - 如何使用 C++ 引用交换两个 C 样式字符串？

> ID：12771764
> 
> 赞同：1
> 
> 时间：2012-10-07T18:50:55.553
> 
> 标签：c++, swap, c-strings

下面的代码给了我一个编译错误，但我不明白我做错了什么。抱歉问了这么愚蠢的问题。

```
$ cat swapcstrings.cc
#include <iostream>

void swap(char*& c, char*& d) {
    char* temp = c;
    c = d;
    d = temp;
}

int main() {
    char c[] = "abcdef";
    char d[] = "ghijkl";
    std::cout << "[" << c << "," << d << "]\n";
    swap(c, d);
    std::cout << "[" << c << "," << d << "]\n";
}
$ g++ swapcstrings.cc
swapcstrings.cc: In function ‘int main()’:
swapcstrings.cc:13: error: invalid initialization of non-const reference of type ‘char*&’ from a temporary of type ‘char*’
swapcstrings.cc:3: error: in passing argument 1 of ‘void swap(char*&, char*&)’
$ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T18:55:57.327

数组不能被修改，它们只是*衰减*为临时指针，它们不是真正的指针，不能交换。数组的地址无法更改，当您尝试将从数组获得的临时指针绑定到非`const`引用时，编译器会出错，这违反了语言规则。

声明数组，然后交换两个*指向*它们的指针。

```
char a[] = "abcdef";
char b[] = "defghi";

char* aptr = a, *bptr = b;

std::cout << "[" << aptr << "," << bptr << "]\n";
swap(aptr, bptr);
std::cout << "[" << aptr << "," << bptr << "]\n"; 
```

或者，如果您可以更改函数的原型，`const char*`请首先使用：

```
void swap(const char*& c, const char*& d) {
    const char* temp = c;
    c = d;
    d = temp;
}

const char* c = "abcdef", // These must be const char* because the arrays are
          * d = "ghijkl"; // const char[N]

std::cout << "[" << c << "," << d << "]\n";
swap(c, d);
std::cout << "[" << c << "," << d << "]\n"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T18:59:22.640

`c`并且`d`是数组。它们将自动转换为需要指针的指针。这是你的编译器输出所说的“临时”。这样想：

```
char c[] = "abcdef", d[] = "ghijkl";
char *cp = (char*)c, *dp = (char*)d;
swap(cp, dp); 
```

以上将编译，但仅交换`cp`and `dp`，而不是原始`c`and `d`。由于上面的代码为这些指针命名，您现在也可以引用它们。但是在您的原始代码中，临时对象没有名称，对它们的任何修改都表明可能存在错误。所以编译器不会让你这样做，而是会抱怨。

如果你想在它们的数组中交换 C 风格的字符串，你必须一次换一个字符：

```
template<size_t n> void swap(char (&a)[n], char (&b)[n]) {
  for (size_t i = 0; i != n; ++i)
    std::swap(a[i], b[i]);
} 
```

此模板确保两个参数都是长度相同的数组。

# javascript - 转到上一页时更改文本

> ID：12771765
> 
> 赞同：2
> 
> 时间：2012-10-07T18:50:57.323
> 
> 标签：javascript, html, css

我制作了一个网站，在菜单栏中选择一个项目后，屏幕会移动到页面上的特定位置。然后我做了一个函数，其中文本在两个位置发生变化，“titletext”和“infotext”。例子：

```
<li><a href="#content" onclick='changeText()'>Weeee!</a></li> 
```

它有效，但现在我意识到我有一个问题：当我选择返回上一页时，文本保持不变，直到用户选择刷新页面。

使用 Javascript，我如何告诉网站在（例如）页面打开`#content`时更改文本，并在主页上再次更改文本？我必须对我的代码采取不同的方法吗？

下面是我的 changeText() 代码：

```
function changeText(){
    document.getElementById('titletext').innerHTML = 'Mission Statement';
    document.getElementById('infotext').innerHTML = 'RANDOMTEXT';
} 
```

**编辑**：这是我希望我的网站做的一个例子。

> 当用户点击浏览器上的后退按钮时，文本将变为前一个文本。所以如果它显示“嘿”然后它显示“再见”，当用户点击浏览器的后退按钮时，代码变为“嘿”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:06:18.087

~~看看[这个 jQuery 插件](https://github.com/cowboy/jquery-hashchange)，它允许您监听`#hash`更改事件。基本上，一旦你安装了那个插件，~~你可以有这样的东西：

```
window.onhashchange = function() { //when the hash changes (the '#' part)
    var loc = window.location + ""; //get the current location (from the address bar)
    var curHash = loc.substr(loc.lastIndexOf("#")); //get what's after the '#'
    if(curHash == "#home") { //if it's #home
        //change text to whatever you want
    }
    else if(curHash == "#nav") { //else if it's #nav
        //similarly, change text appropriately
    }
    else if(curHash == "#content") {
        //change text, too
    }
}; 
```

**编辑：**实际上，[当前版本](http://caniuse.com/hashchange)的现代浏览器`onhashchange`已经支持。使用上面相同的代码，但不要介意插件。

可能有一种更简单的方法可以做到这一点；但我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T19:08:26.277

是的，您需要一种不同的方法，这里的问题是，您的函数仅在您单击链接时触发，而 javascript - 或者网络更确切地说 - 在没有变通方法的情况下不会保持状态。因此，请使用 SammyJs 等客户端路由库来处理浏览器历史记录。然后，您将 ChangeText 函数绑定到更改地址的事件，而不是单击链接。

因此，点击链接会更改地址（客户端使用 sammyjs），然后响应更改地址的事件，如果您回击或刷新，您的应用程序状态将保持保留。

# objective-c - 按下按钮时如何更改表格视图中的数据

> ID：12771768
> 
> 赞同：0
> 
> 时间：2012-10-07T18:51:12.430
> 
> 标签：objective-c, ios, tableview

我有一个带有 3 个按钮和一个表格视图的视图。当我按下 button1 时，button1 后面的数据应该被加载到 tableview 中。但是当我按下 button2 时，button2 后面的数据应该进入同一个 tableview。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T19:10:29.010

只需`dataSource`将表格视图的 切换到符合`UITableViewDataSource`.

```
-(void)pressedButton1
{
    self.tableView.dataSource = self.button1DataSource;
    [self.tableView reloadData];
}

-(void)pressedButton2
{
    self.tableView.dataSource = self.button2Source;
    [self.tableView reloadData];
} 
```

# ruby-on-rails - 不理解 RailsCast 教程中的一些代码

> ID：12771769
> 
> 赞同：0
> 
> 时间：2012-10-07T18:51:14.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我观看了关于记住我和重置密码的 RailCast 教程 #274。他添加的代码如下`user.rb`

```
def send_password_reset
  generate_token(:password_reset_token)
  save!
  UserMailer.password_reset(self).deliver
end

def generate_token(column)
  begin
    self[column] = SecureRandom.urlsafe_base64
  end while User.exists?(column => self[column])
end 
```

这里我不明白的是为什么`save!`里面的电话`send_password_reset`？另外，我不熟悉`generate_token`:中的语法`self[column]=`。这是在数据库表中设置列的方法吗？

下面是`create`动作`password_resets_controller`

```
 def create
    user = User.find_by_email(params[:email])
    user.send_password_reset if user
    redirect_to root_path, notice: "Email sent with password reset instructions."
  end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T19:52:54.110

`save!`保存对象并在失败时引发异常。

* * *

`self[column]=`, 是一个轻微的元编程。

通常，当您知道列名时，您会这样做：`self.password_reset_token=`. `self[:password_reset_token]=`与or相同`self["password_reset_token"]=`。

因此很容易将其抽象为将列名作为字符串/符号传递。

更清晰？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:53:52.097

1)`save!`类似于，但如果记录无效则`save`引发`RecordInvalid`异常而不是返回。`false`

我的控制台中的示例：

```
User.new().save  # => false 
User.new().save! # ActiveRecord::RecordInvalid: Validation failed: Password can't be blank,  Email can't be blank 
```

2）`self[column]=`那里用于设置用户列。

# memory-management - 需要基本内存分配器信息 - Hoard 和 SLAB

> ID：12771770
> 
> 赞同：1
> 
> 时间：2012-10-07T18:51:15.317
> 
> 标签：memory-management, hoard

最近我一直在阅读有关内存分配器的信息，例如 Hoard 和 SLAB。但是我没有得到一些东西：

一个。这些分配器是管理物理内存还是虚拟内存。{如果（你的答案是物理内存）请阅读点 b，否则，阅读点 c}

湾。如果他们管理物理内存，因为这两个分配器都使用每个 CPU 的数据结构，他们最终不会将同一物理页面的空间分配给不同的进程。例如，考虑 T1 在 CPU C 上启动并请求一个 int。在此之后，让 T1 被抢占，T2 开始执行，它还要求一个 int。由于我们的结构是每个 CPU 的，我们最终会不会同时满足来自同一物理页面的两个请求。

C。如果它们管理虚拟内存，那么为什么我们说所有数据结构都是每个 CPU 的，而不是我们应该说它们是每个进程的，因为在每次上下文切换时，我们都必须重新填充这些数据结构。

# windows-8 - 如何向可以针对多个平台的商店提交应用程序？

> ID：12771771
> 
> 赞同：5
> 
> 时间：2012-10-07T18:51:16.113
> 
> 标签：windows-8, microsoft-metro, windows-store

我正在准备一个应用程序以提交到使用 Bing 地图 API 的 Windows 应用商店 - 因此，必须编译该应用程序以针对特定架构。虽然有[提交指南](http://blogs.msdn.com/b/windowsstore/archive/2012/02/13/submitting-your-windows-8-apps.aspx)，但不清楚如何提交同一应用程序的 Arm 和 x86 配置。甚至有可能，还是必须在商店里出现两次？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T20:23:25.917

当你从 Visual Studio 商店菜单中选择创建应用包的选项时，你可以选择包体系结构。有 4 个选项：中性、x86、x64、ARM。

如果您选择中性，则它会为“任何 CPU”构建一个包，您可以将其上传到应用商店。如果您选择 x86、x64 和 ARM，它将为这些配置中的每一个构建一个包，并且您必须为您希望支持的架构上传相应的包。

此外，如果您正在构建以提交到商店，请确保始终为每个选定的架构选择发布。

在某些情况下，某些参考不支持使用中性架构进行构建。Microsoft Visual C++ 运行时包就是一个例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T20:37:49.083

取自[这里](http://blogs.msdn.com/b/jasonz/archive/2012/06/12/what-you-need-to-know-about-developing-for-windows-on-arm-woa.aspx)：

> 根据各种运行时和编译器的现有实现细节，每种语言（JavaScript、C++ 和 C#/VB）的 ARM 工程设计过程都不同。
> 
> JavaScript 使用 JIT 编译器，因此在运行时会处理平台定位。因此，使用 JavaScript 的 Metro 风格应用程序是平台中立的，您只需编写一次即可在 x86/x64/ARM 上运行。
> 
> C# 和 Visual Basic 也从硬件差异中抽象出来。它们编译为平台中立的 MSIL。因此，使用 C# 或 Visual Basic 的 Metro 风格应用程序只需编译一次即可在 x86/x64/ARM 上运行。
> 
> C++ 接近于金属，并编译为您所针对的平台的机器语言。这为开发人员提供了完全控制权，但也要求他们指定支持应用程序的硬件。

它的本质是纯 .net 或纯 html/js 可以在任何架构上运行而不会出现问题。如果你想要 C++，那么你需要为每个支持的架构编译一次你的应用程序。我的理解是，在这种情况下，您可以创建一个包含多个架构的安装程序的应用程序包。

[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/hh975357.aspx)的帖子有一些关于为多种架构打包应用程序的详细信息。以下是一些亮点：

> 7.在选择要创建的包和解决方案配置映射部分中，选中要为其创建包的每个构建配置的复选框。
> 
> 构建配置网格列出了包的可能平台架构（即 Neutral、ARM、x64 和 x86）。在每一行中，一个组合框显示与该行架构相关的当前解决方案配置和架构选择的组合。默认平台的复选框设置为当前活动的项目平台。中性行的组合框显示了包含 AnyCPU 作为项目平台的解决方案配置组合。如果没有相关的解决方案配置组合，则该平台的整行都无法选择。为您指定的每个配置生成一个包。
> 
> 8.对于您指定的每个构建配置，选择您要构建的解决方案配置。
> 
> 当您为应用商店打包应用程序时，您可以指定发布或您创建的任何自定义解决方案配置。
> 
> 将为您指定的每个构建配置创建一个包。

从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/br230835.aspx)我们得到这个：

> 7.单击包上传您的应用程序包。

最后来自上一个链接：

> 签署和发布
> 
> 在您的应用通过认证测试后，其包会经过数字签名，以保护它们在发布后不被篡改。此阶段开始时，您无法取消提交。
> 
> ***注意您的应用列表***可能需要一些时间才能出现在搜索结果中。这个是正常的。此外，在将应用程序提交到 Windows 应用商店后，您无法更改发布日期，但您可以取消发布、更新发布日期并重新提交。

概述：在构建过程中，您指定您希望应用程序工作的所有架构，并为每个架构创建一个包。在提交过程中，您选择为该应用程序构建的所有包。以这种方式提交您的应用程序时，商店中只会显示一个版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T17:18:43.873

如果您只构建 HTML5/javascript Windows Store 应用程序，它适用于所有版本（ARM、x86 和 x84）

如果您使用 bing api 创建一些网页。不用担心哪个平台不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T14:43:10.980

答案在这里：http: [//developer.android.com/google/play/publishing/multiple-apks.html](http://developer.android.com/google/play/publishing/multiple-apks.html)

TLDR：

*   转到您的 Google Play 应用开发者控制台
*   选择您的应用
*   选择左侧的APK
*   开启高级模式
*   上传你的 ARM APK
*   上传您的 x86 APK
*   谷歌会找出其余的

# objective-c - Objective-C 声明和初始化 C 数组的正确方法是什么

> ID：12771775
> 
> 赞同：0
> 
> 时间：2012-10-07T18:51:36.113
> 
> 标签：objective-c, arrays

> **可能重复：**
> [初始化作为 C 数组的 Objective-C 类 ivar](https://stackoverflow.com/questions/8530367/initializing-objective-c-class-ivar-that-is-a-c-array)

我试图在我的@interface 中声明一个 C 数组，如下所示：

```
 @interface Path : NSObject{
   float pathPoints[10]={1,2,3,4,5,6,7,8;};
 } 
```

这样我得到“预期；在声明列表的末尾”

然后我尝试

```
@interface Path : NSObject{
  float pathPoints[10];
}

@implementation Path
-(id)init{
 if (self=[super init])
  pathPoints={0.5,1.0,....};//Here I get "Expected expression" warning

 ..............
} 
```

这次我收到“预期表达”警告。现在，将 C 数组作为 ivar、使用预定义数量的元素对其进行初始化并使用它的正确方法是什么？

# php - Magento中的自动切换客户群

> ID：12771777
> 
> 赞同：0
> 
> 时间：2012-10-07T18:52:06.230
> 
> 标签：php, magento

有没有人找到根据特定规则自动切换客户组的方法？例如，如果客户在其一生中订购了 200 多瓶商品，则他们被归为特定客户层并获得特殊定价（批发类型的情况）

我知道如何划分客户群，但这并不能帮助我自动更改他们所属的客户群。

在此先感谢您在正确方向上的任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:31:12.917

[magento connect](http://www.magentocommerce.com/magento-connect/group-change-5742.html)有几个应付扩展，或者您可以使用自定义操作创建简单的模块。[文章](http://www.fontis.com.au/blog/magento/automatically-set-magento-customer-group)为一个良好的开端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T14:21:02.600

如果有人仍在寻找答案，这个扩展（我创建的）可以完全满足您的需求，并且开箱即用：

网站：

[https://plugin.company/magento-extensions/automatic-customer-group-switching.html](https://plugin.company/magento-extensions/automatic-customer-group-switching.html)

在 Magento Connect 上：

[http://www.magentocommerce.com/magento-connect/automatic-customer-group-switching-by-plugin-company.html](http://www.magentocommerce.com/magento-connect/automatic-customer-group-switching-by-plugin-company.html)

但是，如果您想构建自己的自定义功能，我建议您`sales_order_placed_after`通过过滤已下订单的客户 ID 上的订单集合来查看事件并获取订单历史详细信息。

```
Mage::getModel('sales/order')->getCollection()->addFieldToFilter('customer_id', $yourCustomerId); 
```

然后，您可以遍历每个订单并使用该`getAllItems`方法获取所有项目。

或者，您可以检索一个集合，并从表中`sales_order_item`加入相应的订单详细信息。`sales_flat_order`然后您可以过滤客户 ID 和产品 ID，并将结果分组到产品 ID。

然后，您可以将您的客户组切换逻辑基于总订购产品数量的总和。

# playframework - test/resources 目录中的源代码将在 Play 2 中编译

> ID：12771778
> 
> 赞同：6
> 
> 时间：2012-10-07T18:52:12.647
> 
> 标签：playframework, playframework-2.0, sbt

我想将一个 Maven 项目迁移到 Play 2/sbt：

`src/test/resources`我在 Maven 项目中有一些测试资源，我`test/resources/`在 Play 项目中转移到了这些资源（感谢 Schleichardt[对 Stackoverflow 的回答](https://stackoverflow.com/questions/12762969/resource-directory-for-tests-in-a-play-application)）。

这适用于普通文件（文本，二进制数据......），但现在我在目录中的 Java 源文件有问题`test/resources/`（我必须在不同的 java 源文件上测试我的项目中的 Java 解析器）。当我打电话`test`时，这些文件也会被编译，所以我会出错。

如何防止其中的文件`test/resources/`从 Play/sbt 编译？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T20:48:43.663

由于您的测试资源目录位于编译 java 源代码的目录中，因此您可以移动测试资源文件夹。将此添加到您的设置中：

```
resourceDirectory in Test <<= (baseDirectory) apply {(baseDir: File) => baseDir / "testResources"} 
```

例如在 project/Build.scala 中：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
    resourceDirectory in Test <<= (baseDirectory) apply  {(baseDir: File) => baseDir / "testResources"}
) 
```

通过以下方式控制控制台中的更改：

```
play "show test:resource-directory" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:46:25.900

如果您想添加测试资源，您应该修改 project/Build.scala，将以下内容添加到您的 PlayProject .... .settings(

不要忘记在这些行之间留一个空行。不要忘记声明 Eclipse 源文件夹。您还需要在 PlayProject 行之前添加一个导入

```
import com.typesafe.sbteclipse.core.EclipsePlugin._ 

val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(defaultScalaSettings:_*).settings(

    ,resourceDirectory in Test <<= baseDirectory(_ / "test-resources")

    ,EclipseKeys.createSrc := EclipseCreateSrc.Default + EclipseCreateSrc.Resource

) 
```

在这之后你可以做

```
play test
play test-only xxx.yyy.zzz.TheTest
play eclipsify 
```

# c# - 准备好为 Windows 应用程序使用高级选项卡控件

> ID：12771779
> 
> 赞同：0
> 
> 时间：2012-10-07T18:52:12.823
> 
> 标签：c#, winforms, user-controls

是否有任何选项卡控件可以直接在我的 Windows 应用程序中使用，可以使用选项卡上的关闭按钮（就像 Firefox 或其他浏览器一样）关闭，并且将有一个按钮显示打开的选项卡。如果是，请让我知道在哪里获得它以及如何使用它。我不想再浪费时间在最后一小时创建自定义选项卡控件。我搜索了它，但没有找到太多。现在需要专家帮助。

请建议。

# c - 在 Unix shell 中查询孩子的状态

> ID：12771780
> 
> 赞同：0
> 
> 时间：2012-10-07T18:52:20.367
> 
> 标签：c, unix

我正在尝试为一个类项目实现一个 Unix shell，我遇到了一些问题。即这种方法

```
void checkStatus()
{
printf("checking status\n");
job_t* checkStart = first_job;
while(checkStart != NULL)
{
    process_t* processStart = checkStart->first_process;
    while(processStart != NULL)
    {
        int status;
        pid_t test = waitpid(processStart->pid, &status, WUNTRACED | WNOHANG);
        printf("%d\n", processStart->pid);
        printf("%s\n", strerror(errno));
        printf("%d\n", status);
        printf("%d\n", test);

        if(WIFEXITED(status))
        {
            printf("exited\n");
        }
        if(WIFSTOPPED(status))
        {
            printf("stopped\n");
        }
        processStart = processStart->next;
    }
    checkStart = checkStart->next;
}
} 
```

应该查询所有正在运行或已经运行的进程的状态，以便可以更新进程结构（我需要能够打印出每个进程的状态）。当我尝试通过运行前台进程并使用 ctrl+z 暂停它来测试它时，它总是以退出状态返回。此外，如果我使用 ctrl+c 停止它，它会返回一个错误，指出没有可用的子进程，但也返回退出。我查询状态是否错误？这也应该在不使用信号的情况下实现，所以我不能走那条路。

谢谢！

# tinymce - TinyMCE：为什么字体大小、系列、颜色不起作用？

> ID：12771786
> 
> 赞同：3
> 
> 时间：2012-10-07T18:52:55.127
> 
> 标签：tinymce, font-size

我刚开始使用 TinyMCE，到目前为止一切似乎都很好，除了一件事。当我想尝试更改 TinyMCE 中的样式（如颜色、字体系列、字体大小等）时，它只打印标签，就像这样（没有“style= font-size :)

```
<p><span  16px;">test</span></p> 
```

但当然它实际上不能以这种方式改变风格，因为据我所知它应该是这样的：

```
<p><span style='font-size: 16px;">test</span></p> 
```

不应该是这样吗？这是为什么？我将如何改变 TinyMCE 的风格？我错过了什么..？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T06:07:36.853

如果您使用的是 php 框架，则输入可能会被转义以进行 XSS 过滤。尝试禁用 XSS 过滤。

我自己在使用 CodeIgniter php 时遇到了同样的问题。

XSS 启用：

```
$this->input->post('content', true); 
```

XSS 禁用：

```
$this->input->post('content'); 
```

在禁用它之前一定要知道什么是 XSS 攻击。我禁用它作为我的临时解决方案。
希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:49:46.390

您必须按照我接受您所需属性的方式配置 tinymce。您将需要更改[valid_elements](http://www.tinymce.com/wiki.php/Configuration%3avalid_elements)设置。

# javascript - Javascript 在 Safari 和 Chrome 中显示，但在 Firefox 中不显示？

> ID：12771788
> 
> 赞同：0
> 
> 时间：2012-10-07T18:52:58.280
> 
> 标签：javascript, firefox

在这个作业中（我只能使用 javascript），我的页面在 Safari 和 Chrome 中显示良好，但在 Firefox 中却没有。在 Firefox 中，div“bookselection”显示在标题的右侧。知道为什么吗？

```
 <!doctype html>

<html lang="en">

<head> 
 <meta charset="utf-8">

 <title>Armchair Bookstore</title>
 <meta name="description" content="Armchair bookstore, local and online store">
 <meta name="keywords" content="books, special orders, children books">

 <link href="css/armchair.css" rel="stylesheet">

</head>

<body>

  <!-- wrapper  section starts -->
   <div id="wrapper">

  <!-- header  section starts -->
    <div id="header">
          <img src="images/header.jpg" alt="Armchair Bookstore Logo" width="975" height="230" class="floatcenter">
    </div>
  <!-- header  section ends -->

  <!-- menu  section starts -->     
    <div id="menu">
        <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="newrelease.html" id="current" class="first">New Releases</a></li>
                <li><a href="placeholder.html">Special Selection</a></li>
                <li><a href="contact.html">Contact</a></li>
                    <li><a href="placeholder.html">On Sale</a></li>
            </ul>
    </div>
        <!-- menu  section ends -->

        <!--Text starts -->
        <div id="content">
    </div>
   &nbsp;<img src="images/viewcart.jpg" alt="" width="130" height="59" class="floatright" /> 
         <div id="bookselection">
        <script type="text/javascript" src="js/armchair.js"></script>
     </div>
     <!-- Text ends -->

        <!-- footer section starts -->
    <div id="footer">
        <p class="bottom">Copyright &copy; 2012 oo Design | All Rights Reserved | <a href="#">Terms and Conditions</a></p>
    </div>
    <!-- foot section ends -->      

    <!-- wrapper section starts -->

</div>    
</body>
</html> 
```

这是我的 .js 文件。我刚刚开始了关于 javascript 的课程，所以我不能使用除 javascript 之外的任何其他编程代码：

```
var str = "<table>";
var folder ="images/"; 

// Book Title array
var title = new Array();
    title[0] = "The Innocent";
    title[1] = "Zero Day";
    title[2] = "The Bat";
    title[3] = "Mad River";
    title[4] = "Low Pressure";
    title[5] = "Zagreb Cowboy";

// Book author array

var author = new Array();
    author[0] = "Marc Webb";
    author[1] = "Joss Whedon";
    author[2] = "Chris Nolan";
    author[3] = "Joe Johnson";
    author[4] = "Jon Favreau";
    author[5] = "Martin Campbell";

// Release date array

var release = new Array();
    release[0] = "April 2012";
    release[1] = "August 2011";
    release[2] = "October 2012";
    release[3] = "October 2012";
    release[4] = "September 2012";
    release[5] = "October 2012";

// Book Cover array
var cover = new Array();
    cover[0] = "theinnocent.jpg";
    cover[1] = "zeroday.jpg";
    cover[2] = "thebat.jpg";
    cover[3] = "madriver.jpg";
    cover[4] = "lowpressure.jpg";
    cover[5] = "zagrebcowboy.jpg";

// Book Price array
var price = new Array(); 
    price[0] = "18.18";
    price[1] = "9.50";
    price[2] = "15.64";
    price[3] = "18.50";
    price[4] = "15.00";
    price[5] = "14.56";

// Book plot array
var plot = new Array();
    plot[0] = "It begins with a hit gone wrong. Robie is dispatched to eliminate a target unusually close to home in Washington, D.C. But something about this mission doesn't seem right to Robie, and he does the unthinkable. He refuses to kill. Now, Robie becomes a target himself and must escape from his own people. ";
    plot[1] = "John Puller is a combat veteran and the best military investigator in the U.S. Army's Criminal Investigation Division. His father was an Army fighting legend, and his brother is serving a life sentence for treason in a federal military prison. Puller has an indomitable spirit and an unstoppable drive to find the truth." ;
    plot[2] = "Before Harry took on the neo-Nazi gangs of Oslo, before he met Rakel, before The Snowman tried to take everything he held dear, he went to Australia. Harry Hole is sent to Sydney to investigate the murder of Inger Holter, a young Norwegian girl, who was working in a bar. Initially sidelined as an outsider, Harry becomes central to the Australian police investigation when they start to notice a number of unsolved rape and murder cases around the country.";
    plot[3] = "The first person they killed was a highway patrolman. The second was a woman during a robbery. Then, hell, why not keep on going? As their crime spree cuts a swath through rural Minnesota, some of it captured on the killers'cell phones and sent to a local television station.";
    plot[4] = "Bellamy Lyston was only 12 years old when her older sister Susan was killed on a stormy Memorial Day. Bellamy's fear of storms is a legacy of the tornado that destroyed the crime scene along with her memory of what really happened during the day's most devastating moments.";
    plot[5] = "Yugoslavia, 1991\. The State is crumbling, and in the midst of the political chaos secret policeman Marko della Torre has been working both sides of the law, but somewhere along the way he's crossed the line.";

for (var i = 0; i < cover.length; i++)  
{
     str += "<tr><td><img src='" + folder + cover[i] + "' width='75' height='115'></td>";
     str += "<td width='30%'><h3>" + title[i] + "<h5>Buy Now" + "</h3><br />Price: $" + price[i] + "<br />Author: " + author[i] + "<br />Date of release: " + release[i] + "</td>";
     str += "<td><p>" + plot[i] + "</p></td></tr>";
}

str += "</table>";

var elem = document.getElementById("bookselection");
elem.innerHTML = str; 
```

这是.css

```
/*--------------Body-----------------*/

html {background-color: #fff}

body {
   color: #000; background: #fff;
   font-family: "Helvetica Neue",helvetica,arial, sans-serif; 
   font-size: 90%;
   text-align: left;
   width: 976px;
   margin-left: auto;
   margin-right: auto;
}

p {
   margin-left: 10px;
   margin-right: 5px;
   text-align: left;
   font-size: 110%;
}

/*--------------Links formatting------------------*/

a:link { 
   background: #fff; color: #7d890d;
}

a:visited { 
   color: #034769;
}

a:hover {
   color: #034769;  
   text-decoration: none; 
}

a:active{
    background: #63add0; color: #fff;
}

/*Bottom link formatting*/

p.bottom a:link { 
   background: #2d1d06; color: #f9b41f;
}

p.bottom a:visited { 
   color: #fff;
}

p.bottom a:hover {
   color: #7d890d;  
   text-decoration: none; 
}
p.bottom a:active{
    background: #8742d6; color: #fff;
}

/*--------------------Page wrapper----------------*/
#wrapper {
   margin: 0 auto; 
   width: 976px; 
   text-align: left;
}

/*Banner styles*/

#header {

   width: 976px;
   padding-left: 0px;
   padding-bottom: 10px;
   padding-top: 15px;
}

#footer {
   clear: both;
   background: #2d1d06; color: #fff;
   font-family: "Helvetica Neue",helvetica, arial, sans-serif;
   font-size: 90%;
   font-weight: normal;
   width: 976px;
   padding-bottom: 3px;
   padding-top: 3px;
}

#footer p {
   text-align: center;
}

#content
{
   margin-left: 15px;
}

/*---------------Navigation  styles-------------------*/

#menu {
  float: left; 
  margin:0;
  padding-top: 0px;
  width: 100%;
  background: #7d890d; color: #fff;
}  

#menu ul {
  margin: 0px;
  position: relative 
}

#menu ul li {
  display: inline; 
}

#menu ul li a {
  float: left;
  padding: 5px 16px;
  margin-right: 0px;
  background: #7d890d; color: #fff;
  text-decoration: none;
  border-right: 1px solid #e2e2e2;
}

#menu ul li a:hover {
  color: #fff; background: #f9b41f;
  text-decoration: underline;

}

#menu li a#current {
  background: #ba1212; color: #fff;
}

/*-------------Image area--------------*/

img 
{ 
   border: 0px 0px ; 
   padding-top: 30px;
   padding-bottom: 25px;
   border-radius: 0px;
}

.floatcenter {
   float: left;
   margin: 0px;
   padding: 1px; 
   border: none;  
}

.floatcenterb {
   margin: 0px 228px;
   padding: 1px; 
   border: none;  
}

.floatright 
{ 
   float: right; 
   margin: 20px;
   padding: 1px; 
   border: none;
}
.floatright2 
{ 
   float: right; 
   margin: 20px;
   padding: 1px; 
   border: none;
}

/*---------------Headings----------------*/
hr{
  position: relative;
   width: 90%;
   margin-left: 25px;
   margin-right: 25px;
   color: #3ca0d0;
   border: 1px;
   border-style: dotted;
}

h1{
   color: #2d1d06;
   font-size: 140%;
   font-weight: normal;
   margin-left: 10px;

}

h2{
   color: #2d1d06;
   font-weight: normal;
   font-size: 130% ;
   text-align: center;
   text-decoration: underline;
   margin-left: 0px;
}

h3{
   font-size: 120%;
   color: #2d1d06;
   font-weight: bold;
   text-align: left;

}

h4{
   font-size: 120%;
   color: #2d1d06;
   font-weight: bold;
   text-align: center;

}

h5{
   font-size: 110%;
   color: #7d890d; 
   width: 70px;
   margin-bottom: 0px;
   margin-top: 0px;
   font-weight: bold;
   text-align: left;

}

/* Table styling */

table {
    border: 0px;
    border-collapse:collapse;
    width: 100%;
    margin: auto;
    font-size: 90%;
}

th {
    background-color: #000;
    color: #FFF;
}

td {
    padding: 2px 4px;
    text-align: left;
    border-bottom: 0px;
}

/*contact page*/

fieldset
{
  margin: 10px 20px;
  padding: 5px 10px;
  border: 1px solid #3697B5;
  background:#fff;
  text-align: center;
}

legend
{
  font-size: 80%;
  color: #000; background: #fff;
  font-weight:bold;
} 

label
{
  float: left;  /* labels and input fields line up horizontally */
  width: 200px; 
  margin-left: 5px;    
  text-align: center; 
}

textarea
{
  margin: 5px 10px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:11:37.333

该标准规定您只能`float`在块级元素 ( `display:block`) 上使用。显然 Chrome 和 Safari 会自动提升`float`属性设置为`display:block`or的元素`display:inline-block;`。所以适用`display:block`于你的`.floatright`：

```
.floatright 
{ 
   display: block;
   float: right; 
   margin: 20px;
   padding: 1px; 
   border: none;
} 
```

还有一些提示：

1.  您可以在创建数组时初始化它`var myArray = new Array(value0,value1,value2)`
2.  您可以使用`var myArray = [v0,v1,v2...]`而不是`var myArray = new Array(v0,v1,v2...)`. 这使您可以更轻松地创建变量：

    ```
    var title = ["The Innocent", "Zero Day", "The Bat", 
             "Mad River", "Low Pressure", "Zagreb Cowboy"]; 
    ```

3.  您可以使用 对 CSS 选择器进行分组`,`，规则将应用于组中的所有选择器：

    ```
    h1, h2, h3, h4{
       color: #2d1d06;
    }
    h3, h4{
       font-weight: bold;
    } 
    ```

# css - 意外的 Div 动作

> ID：12771789
> 
> 赞同：1
> 
> 时间：2012-10-07T18:53:01.660
> 
> 标签：css, templates, html, behavior

我正在尝试使用 Div 容器进行布局，但我不明白为什么 Div 会以它们的方式行事。我原以为他们会排成一排，但这并没有发生。此外，背景颜色没有正确填充某些 div，导致他相信它们正在继承其他 div 的属性。有人能告诉我们在这个简单的例子中我哪里出错了吗？谢谢你。

HTML

```
<?php
// Inialize session
session_start();
// Check, if username session is NOT set then this page will jump to login page
require_once 'check_login.php';

?>
<!DOCTYPE html>
<html>
<head>
<title>Title of the document</title>
<link href="style_wide.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="container"> 

        <div id="toolbar_top"> </div> <!--end div toolbar-->

        <div id ="content"> 
            <div id = "map_canvas"><div> <!--end div map_canvas-->
            <div id="form_get_date">   <div> <!--end div form_get_date-->       
        </div> <!--end div content-->  

        <div id ="footer"> </div> <!--end div footer-->

    </div> <!--end div container-->
</body>
</html> 
```

CSS

```
 html { height: 100%; }
body, html { min-height: 100%; height: 100%;margin : 0;
    padding : 0; }

body {
    width:100%;
    background : #F5F5FF; 
    }

#container {
    min-height: 100%;
    width : 100%;
    border-style: solid;
    border-width:1px;
    background  #FFFFCC;
    -moz-box-shadow: 10px 10px 5px #888888; /* shadow border */
    box-shadow: 10px 10px 5px #888888;
    }

#toolbar_top {
    border: solid 1px;
    height : 25px;
    background : red;
    }    

#content {
    min-height: 100%; /* need this */
    height: 100%;   /* and this, to get content div to stretch to bottom of page in Firefox */
    margin-bottom : 25px;background : #FFEBCC;
    color : #666;
    border: solid 1px;
    background:blue;
    }

#footer {
    clear:both;
    height:25px;
    position:absolute;
    bottom: 0;
    background : red;
    border: solid 1px;
    } 

#map_canvas {
    margin: 20;
    padding: 0;
    background:white;
    height: 400px;
    border: 1px solid;
    }

#form_get_date  {
    height:100px;
    border:solid;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T18:55:16.513

难道是你想关闭这些DIV

```
 <div id ="content"> 
    <div id = "map_canvas"><div> <!--end div map_canvas-->
    <div id="form_get_date">   <div> <!--end div form_get_date-->       
 </div> <!--end div content--> 
```

这样它们看起来如下：

```
 <div id ="content"> 
        <div id = "map_canvas"></div> <!--end div map_canvas-->
        <div id="form_get_date">   </div> <!--end div form_get_date-->       
 </div> <!--end div content--> 
```

# android - Android仪表板模式作为片段

> ID：12771793
> 
> 赞同：1
> 
> 时间：2012-10-07T18:53:48.680
> 
> 标签：android, android-layout, android-fragments, dashboard

是否可以将 Google I/O 中的 android 仪表板模式用作片段，以便在平板电脑的横向模式下，仪表板显示在左侧，而当前类别的内容显示在右侧？

我尝试了一些看起来像下面的代码但它不起作用的东西。

**主.xml：**

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <!-- Include dashboard -->
    <include layout="@layout/fragment_dashboard"/>

    <!-- Include details -->
    <fragment
        android:id="@+id/fragment_details"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.example.fragments.Details" />
</LinearLayout> 
```

**详细信息.java：**

```
public class Details extends Fragment
{

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                        Bundle savedInstanceState)
        {
                View view = inflater.inflate(R.layout.details, container, false);

                return view;
        }

} 
```

# r - R中的帕累托包

> ID：12771795
> 
> 赞同：0
> 
> 时间：2012-10-05T13:40:46.100
> 
> 标签：r, statistics

我如何在 R 中获得 qpareto 函数？当我输入 时`qpareto(.05/2, 2, 15)`，R 无法识别`qpareto`函数是什么。我试着打字`library(VGAM)`，也没有弹出任何东西。也没有`library(rmutils)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:46:20.027

您必须先安装软件包：

```
install.packages(c("VGAM","rmutils")) 
```

# ios - 如何在 View 的 initWithCoder 方法中访问子视图

> ID：12771798
> 
> 赞同：0
> 
> 时间：2012-10-07T18:54:08.073
> 
> 标签：ios, view, subview

我有一个包含两个 UILabel 的自定义视图。我之前想自定义他们的字体，所以我在 initWithCoder 方法中做到了。

```
@implementation HomeTitleView
@synthesize ticketLabel;
@synthesize monthLabel;

- (id) initWithCoder:(NSCoder *)aDecoder{
    self = [super initWithCoder:aDecoder];
    if (self) {
        [monthLabel setFont:[UIFactory getFontForKey:@"home_month"]];
        [ticketLabel setFont:[UIFactory getFontForKey:@"home_ticket"]];
    }
    return self;
}

@end 
```

不幸的是，这没有奏效。使用调试器，我发现monthLabel 和ticketLabel 都是nil。任何人都知道我该如何解决这个问题？我应该实现什么回调或方法才能访问我的两个标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T18:58:59.430

你不能那样做。视图尚不存在。它们在调用方法时被实例化，这在第一次访问属性`loadView`时自动发生。`view`如果您想在视图加载后对其进行操作，正确的使用方法是`viewDidLoad`.

**编辑：**这是假设您正在与`UIViewController`班级一起工作。如果您正在使用一个`UIView`类，您可以使用`awakeFromNib`或`didAddSubview:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:58:44.063

您是否曾经将monthLabel 和ticketLabel 分配给UILabel？就像是：

```
self.monthLabel = [[[UILabel alloc] init] autorelease];
self.ticketLabel = [[[UILabel alloc] init] autorelease]; 
```

如果是这样，您可以使用代码更新您的帖子吗？

# android - Android：ExpandableListActivity 和支持库

> ID：12771808
> 
> 赞同：0
> 
> 时间：2012-10-07T18:56:14.063
> 
> 标签：android, android-loadermanager, android-support-library

我有一个使用的活动，`ExpandableListActivity`但现在我希望它使用`LoaderManager`. 不幸的是，在旧设备上使用它我需要使用支持库并且......我需要扩展`ActivityCompat`或任何其他子类。据我所知，支持库中没有`ExpandableListActivity`。

在这种情况下我有什么选择？从支持库中获取 LoaderManager 的任何其他方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T19:00:55.870

您可以使用 FragmentActivity 和加载器，但直接膨胀 ExpandableListView，并通过 ExpandableListAdapter 将数据绑定到它

# c# - 访问 Windows LocalStorage (Metro) 中的文件

> ID：12771814
> 
> 赞同：0
> 
> 时间：2012-10-07T18:57:31.843
> 
> 标签：c#, microsoft-metro, windows-runtime

我已将图像文件保存到 Windows.Storage.ApplicationData.Current.LocalFolder。如何获取该文件的路径？我试过了：

```
localFolder + "/filename.ext" 
```

但它似乎没有得到文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:21:57.520

尝试这个：

```
StorageFile file = await StorageFile.GetFileFromApplicationUriAsync("ms-appdata:///local/file.txt") 
```

# python - 模块中不存在视图 - 当它存在时

> ID：12771815
> 
> 赞同：2
> 
> 时间：2012-10-07T18:57:37.230
> 
> 标签：python, django, forms, views

我在 Kubuntu 12.04 上运行 Django 1.4 和 Python 2.7。

我在这里是我的`views.py`

```
from __future__ import unicode_literals
from django.shortcuts import render_to_response
from django.core.context_processors import csrf
from rsb.forms import RegisterForm

def index(request):
    return render_to_response("index.html")

def services(request):
    return render_to_response("services.html")

def login(request):
    return render_to_response("login.html")

def contact(request):
    return render_to_response("contact.html")

def about(request):
    return render_to_response("about.html")

def registerUser(request):
    form = RegisterForm()
    data = {}
    data.update(csrf(request))
    data.update({ 'form' : form })
    return render_to_response("register.html", data)

def addUser(request):
    return render_to_response("added_user.html") 
```

这是我的`urls.py`

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^services/', 'rsb.views.services'),
    url(r'^login/', 'rsb.views.login'),
    url(r'^register/', 'rsb.views.registerUser'),
    url(r'^contact/', 'rsb.views.contact'),
    url(r'^about/', 'rsb.views.about'),
    url(r'^addUser/', 'rsb.views.addUser'),

    url(r'^admin/', include(admin.site.urls)),

) 
```

这是我的`forms.py`

```
class RegisterForm(forms.Form):
    client_type = ('Personal', 'Company')
    countries = Countries.objects.all()
    unitedStates = UnitedStates.objects.all()

    country_choices = []
    for item in countries:
        country_choices.append(countries.name)

    state_choices = []
    for item in unitedStates:
        state_choices.append(unitedStates.name)

    rsb_client_type = forms.ChoiceField(widget = forms.Select(), choices = client_type, required = True)
    rsb_first_name = forms.CharField(max_length = 25, required = True)
    rsb_last_name = forms.CharField(max_length = 25, required = True)
    rsb_company_name = forms.CharField(max_length = 25)
    rsb_address1 = forms.CharField(max_length = 50, required = True)
    rsb_address2 = forms.CharField(max_length = 50)
    rsb_city = forms.CharField(max_length = 50, required = True)
    rsb_country = forms.ChoiceField(widget = forms.Select(), choices = country_choices, required = True)

    if (rsb_country == 'United States'):
        rsb_state = forms.ChoiceField(widget = forms.Select(), choices = state_choices, required = True)
    else:
        rsb_state = forms.CharField(max_length = 50, required = True)

    rsb_zip_code = forms.CharField(max_length = 25, required = True)
    rsb_phone_number = USPhoneNumberField(label = "Phone", widget = USPhoneNumberMultiWidget(), required = True)
    rsb_email = forms.EmailField(required = True) 
```

请注意，这远非完美。我只是无法访问我的视图。我运行`python manage.py runserver`并尝试`http://127.0.0.1:8000/register/`并收到以下错误：

```
Could not import rsb.views.registerUser. View does not exist in module rsb.views. 
```

无论我尝试访问哪个视图，我都会收到类似的错误。

请帮忙。

编辑1：

对不起，这是回溯：

```
Traceback:
File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/core/urlresolvers.py" in resolve
  300\.                     sub_match = pattern.resolve(new_path)
File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/core/urlresolvers.py" in resolve
  209\.             return ResolverMatch(self.callback, args, kwargs, self.name)
File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/core/urlresolvers.py" in callback
  216\.         self._callback = get_callable(self._callback_str)
File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/utils/functional.py" in wrapper
  27\.         result = func(*args)
File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/core/urlresolvers.py" in get_callable
  101\.                     (lookup_view, mod_name))

Exception Type: ViewDoesNotExist at /register/
Exception Value: Could not import rsb.views.registerUser. View does not exist in module rsb.views. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T19:06:22.273

根据[PEP 8](http://www.python.org/dev/peps/pep-0008/)重命名`rsb.views.registerUser`为：`rsb.views.register_user`

> 函数名称应为小写，必要时用下划线分隔单词以提高可读性。

现在来解决问题。你有：

```
country_choices = []
for item in countries:
    country_choices.append(countries.name)

state_choices = []
for item in unitedStates:
    state_choices.append(unitedStates.name) 
```

应该是：

```
country_choices = []
for item in countries:
    country_choices.append(item.name)

state_choices = []
for item in unitedStates:
    state_choices.append(item.name) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:18:44.310

This was due to an underlying problem with how I was using Django's ORM to get some database info. The errors didn't seem to point to it...but I've figured out what went wrong. Thanks for the help!

# c - 这个 rwlock 实现有什么问题吗？

> ID：12771816
> 
> 赞同：1
> 
> 时间：2012-10-07T18:57:38.840
> 
> 标签：c, locking

我刚刚在 C 中实现了一个读写器锁。我想限制读者的数量，所以我使用 'num' 来计算它。我不确定这个实现是否有一些潜在的数据竞争或死锁条件。那么你能帮我弄清楚它们吗？

另一个问题是我可以以某种方式删除 struct _rwlock 中的“spin_lock”吗？谢谢！

```
#define MAX_READER 16; 
typedef _rwlock *rwlock;
struct _rwlock{
    spin_lock   lk;
    unint32_t   num;
};
void wr_lock(rwlock lock){
    while (1){
        if (lock->num > 0) continue;
        lock(lock->lk);
        lock->num += MAX_READER;
        return;
    }
}
void wr_unlock(rwlock lock){
    lock->num -= MAX_READER;
    unlock(lock->lk);
}
void rd_lock(rwlock lock){
    while (1){
        if (lock->num >= MAX_READER) continue;
        atom_inc(num);
        return;
    }
}
void rd_unlock(rwlock lock){
    atom_dec(num);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:35:30.447

在`wr_lock`（和类似的`rd_lock`）：

```
while (1){
    if (lock->num > 0) continue; 
```

这是错误的。如果您不以某种方式同步，则不能保证看到来自其他线程的更改。如果这是唯一的问题，您也许可以获取锁，然后检查计数。

在`rd_lock`：

```
atom_inc(num); 
```

这不适用于非原子函数`+=`和`-=`编写器函数，因为它可能会中断它们。中的减量也是如此`rd_unlock`。

`rd_lock`可以在线程持有锁作为写入器时返回——这不是读写锁的通常语义，这意味着无论您的 rw-lock 应该保护什么，它都不会保护它。

如果您使用的是 pthreads，那么它已经有一个 rwlock。在 Windows 上考虑 SRWlocks（我自己从未使用过它们）。对于可移植代码，使用条件变量（或者可能两个——一个用于读取器，一个用于写入器）构建您的 rwlock。也就是说，只要 C 中的多线程代码*可以*移植。C11 有一个条件变量，如果有一个 C11 之前的线程实现没有，我不想使用它;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T19:11:42.720

简短的回答：是的，这里有严重的问题。我不知道您使用的是什么同步库，但是您没有保护对共享数据的访问，并且您将在 rd_lock() 和 wr_lock() 中的循环上浪费大量 CPU 周期。几乎在所有情况下都应避免自旋锁（但也有例外）。

# c# - 如何将多个图片框图像添加到面板的背景图像？

> ID：12771817
> 
> 赞同：1
> 
> 时间：2012-10-07T18:57:45.467
> 
> 标签：c#, winforms, panel

你好 stackoverflow 社区。

我不想将每个pictureBoxes 图像绘制到Panel1，而是想将每个pictureBox 图像（pictureBox1、pictureBox2、pictureBox3）添加到位图，然后将该位图设置为Panel1 的背景图像。

这可能吗？谢谢 ![在此处输入图像描述](../Images/b0703c247998b32930c3a9fd2e641eca.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T20:51:39.180

这是我发现将多个图像组合成一个位图的方法

```
public static System.Drawing.Bitmap CombineBitmap(Image[] files)
        {
            //read all images into memory
            List<System.Drawing.Bitmap> images = new List<System.Drawing.Bitmap>();
            System.Drawing.Bitmap finalImage = null;

            try
            {
                int width = 0;
                int height = 0;

                foreach (Image image in files)
                {
                    //create a Bitmap from the file and add it to the list
                    System.Drawing.Bitmap bitmap = new System.Drawing.Bitmap(image);

                    //update the size of the final bitmap
                    width += bitmap.Width;
                    height = bitmap.Height > height ? bitmap.Height : height;

                    images.Add(bitmap);
                }

                //create a bitmap to hold the combined image
                finalImage = new System.Drawing.Bitmap(width, height);

                //get a graphics object from the image so we can draw on it
                using (System.Drawing.Graphics g = System.Drawing.Graphics.FromImage(finalImage))
                {
                    //set background color
                    g.Clear(System.Drawing.Color.Black); // Change this to whatever you want the background color to be, you may set this to Color.Transparent as well

                    //go through each image and draw it on the final image
                    int offset = 0;
                    foreach (System.Drawing.Bitmap image in images)
                    {
                        g.DrawImage(image,
                          new System.Drawing.Rectangle(offset, 0, image.Width, image.Height));
                        offset += image.Width;
                    }
                }

                return finalImage;
            }
            catch (Exception ex)
            {
                if (finalImage != null)
                    finalImage.Dispose();

                throw ex;
            }
            finally
            {
                //clean up memory
                foreach (System.Drawing.Bitmap image in images)
                {
                    image.Dispose();
                }
            }
        } 
```

您需要为此创建一组图像，然后您可以试试这个

```
 Image[] Files = new Image[3]; // Create a new array of maximum 3 indices
        Files[0] = pictureBox1.Image;
        Files[1] = pictureBox2.Image;
        Files[2] = pictureBox3.Image;
        panel1.BackgroundImage = CombineBitmap(Files); //Add the combined bitmap to the BackgroundImage 
```

谢谢，

祝你有美好的一天，很抱歉造成误解:)

# php - 将自定义 PHP 源代码添加到 HTML

> ID：12771820
> 
> 赞同：2
> 
> 时间：2012-10-07T18:58:18.727
> 
> 标签：php, html, code-snippets

需要一些帮助才能将 PHP 添加到 HTML 中。我正在尝试在 HTML 中嵌入 PHP 代码片段，但是输出在文本框中显示片段本身而不是对其进行评估。

在 HTML (register.php) 中，添加以下代码行

```
<tr>
    <td>
        <?php utils::addControl('Name','label'); ?>
    </td>
    <td>
        <?php utils::addControl('username','text'); ?>
    </td>
</tr> 
```

这是 utils::addControl() 的来源

```
 public function addControl($ctlName, $type) {

    switch ($type) {
        case 'text':
            echo <<<EOT
            <input type='text' name='$ctlName' value='&lt?php echo htmlspecialchars($ctlName); ?&gt'>
   EOT;
            break;
        case 'label':
            echo "<label for id='lbl$ctlName'>$ctlName</label>";
            break;
    } 
```

输出显示`<?php echo htmlspecialchars(username); ?>`在文本框中。

为了正确评估 PHP 代码段应该做些什么。TIA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T19:02:09.590

服务器通常仅配置为在查找 PHP 时单次通过脚本...</p>

```
Source → PHP → Output 
```

不是双重通行证：

```
Source → PHP → PHP → Output 
```

`<?php`如果它确实执行了双通，那么如果您想在输出中包含序列（或者即使`<?`打开了短标签），您将不得不跳过箍。

编写您的 PHP，以便它首先生成您想要的输出，不要尝试从 PHP 生成 PHP。

```
$htmlCtrlName = htmlspecialchars($ctlName);
echo "<input type='text' name='$htmlCtlName' value='$htmlCtrlName'>" 
```

# php - Ajax 在已创建的 div 中显示结果

> ID：12771821
> 
> 赞同：-4
> 
> 时间：2012-10-07T18:58:23.327
> 
> 标签：php, jquery, ajax

我有 index.php 之类的主页，并且我在 index.php 中包含了 sidebar.php。在 index.php 中，我有 div`id=content`已经加载了一些内容。在 sidebar.php 中，我有

```
<form id="search" method="post" action="" >
      <input type="search" name="search" id="search"> 
      <input type="submit" name="search" id="search" class="btnButton" value="Search"/>
</form> 
```

`id=content`那么当我点击提交时，如何在 div 中显示我的搜索结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:27:30.147

您只需从 jquery 中选择元素，然后执行方法 .ajax{}

例如

```
$('#contentElementId').ajax({options...}) 
```

结果加载到

```
<div id="contentElementId"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T19:23:00.017

使用 Jquery ajax 从主页调用 search.php。确保你引用了 jQuery 库。

```
//Main Page
<form id="search" method="post" action="" >
      <input type="text" name="search" id="search"> 
      <input type="submit" name="search1" id="search1" class="btnButton" value="Search"/>
</form> 

<div id="content"></div>

<script>
$(document).ready(function(){

    //jquery click event
    $("#search").live("click", function(e){

       //disable default form submit postpage
       e.preventDefault();

       //make ajax call to the search.php parsing the search textbox value as query string
       $.get("search.php?s="+$("#search").val(), function(result){

            //Result will be dumped in the div
            $("#content").html(result);

       });

   });

});

</script>

//Search PHP Script search.php
<?php

//Get the search String
$string = $_GET["s"];

//DO search query and echo it on this page.
?> 
```

# mysql - 在 UNION 中显示 JOIN 表中的所有字段？

> ID：12771827
> 
> 赞同：0
> 
> 时间：2012-10-07T18:58:48.120
> 
> 标签：mysql, database

如何`tariff_data`使用 JOIN 显示已包含在 UNION 中的表中的某些字段？

例如：

```
SELECT  X.* FROM
    (
         SELECT phone_id, tariff_id, active  FROM table1 WHERE id = 5
      UNION
          SELECT dgt.phone_id, tns.tariff_id, dgt.active  FROM  table2 AS dgt 
                JOIN tariff_data AS tns ON tns.something = dgt.something
          WHERE id = 5
    ) as X 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:06:16.957

```
SELECT  X.* FROM
(
    SELECT phone_id, tariff_id, active, null as "somefield"  FROM table1 WHERE id = 5
      UNION
    SELECT dgt.phone_id, tns.tariff_id, dgt.active, tns.somefield FROM  table2 AS dgt 
            JOIN tariff_data AS tns ON tns.something = dgt.something
    WHERE id = 5
) as X 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:08:25.817

您需要在两个 Select 语句中包含来自关税数据的字段，将第一个设置为 null 或您喜欢的任何内容：

```
SELECT  X.* FROM
(
    SELECT phone_id, tariff_id, active, null as "somefield"  FROM table1 WHERE id = 5
      UNION
    SELECT dgt.phone_id, tns.tariff_id, dgt.active, tns.somefield FROM  table2 AS dgt 
            JOIN tariff_data AS tns ON tns.something = dgt.something
    WHERE id = 5
) as X 
```

# django - 无法导入名称 get_date_formats - Django 和 Dotcloud 问题

> ID：12771836
> 
> 赞同：0
> 
> 时间：2012-10-07T18:59:33.347
> 
> 标签：django, dotcloud

我正在清理我的 Documents 文件夹并重命名了包含应用程序所有 python/html 文件的文件夹。我编辑了一个 HTML 文件，推送到 dotcloud，但应用程序已关闭。有谁知道为什么要解决这个问题？我已经尝试将包含文件的文件夹重命名为原始文件夹并推送到 dotcloud，但它失败了。

编辑1：我只是尝试从以前的计算机推送旧文件，但它也失败了。（这个解决方案通常有效，那么 dotcloud 的末端有什么改变了吗？）

我的申请在这里：www.hours.lambertnhs.com

# http - 如何使用 HttpListener/HttpListenerResponse 返回带有正文的错误页面

> ID：12771837
> 
> 赞同：4
> 
> 时间：2012-10-07T18:59:33.830
> 
> 标签：http, c#-4.0, http-status-codes, httplistener, httplistenerrequest

我正在使用 .NET (C#) 中的 HttpListener 创建 REST API。这一切都很好，除了一个小问题。

我正在尝试使用 OK (200) 以外的状态代码返回响应，例如 ResourceNotFound (404)。

当我将 HttpListenerResponse 的 StatusCode 设置为 200 以外的值并创建响应正文（使用 HttpListenerResponse.OutputStream）时，它似乎将状态码重置为 200。我无法使用 StatusCode 404 发送响应和消息体。但是，根据 HTTP 规范，这应该是可能的。我正在使用 Fiddler 检查请求和响应，但我无法得到我想要的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-03T14:06:31.127

我遇到了同样的问题并找到了问题的根源：

如果您在`OutputStream` *之前*设置的（或任何其他属性）中写入正文，则将在应用修改**之前**`StatusCode`发送响应！

 **因此，您必须按以下顺序进行：

```
public void Send(HttpListenerContext context, byte[] body)
{
    // First, set a random status code and other stuffs
    context.Response.StatusCode = (int)HttpStatusCode.Unauthorized;
    context.Response.ContentType = "text/plain";

    // Write to the stream IN LAST (will send request)
    context.Response.OutputStream.Write(body, 0, body.Length);
} 
```**

# iphone - 将图像持久保存在 App 中 - iOS

> ID：12771838
> 
> 赞同：2
> 
> 时间：2012-10-07T18:59:41.487
> 
> 标签：iphone, ios, image, ios6, data-persistence

尝试使用照片选择器选择图像并将该图像内部保存在应用程序文件夹中。

```
- (void) imagePickerController: (UIImagePickerController *) pickerdidFinishPickingMediaWithInfo: (NSDictionary *) info {

NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];
UIImage *originalImage, *editedImage, *imageToUse;

// Handle a still image picked from a photo album
if (CFStringCompare ((CFStringRef) mediaType, kUTTypeImage, 0)
    == kCFCompareEqualTo) {

    editedImage = (UIImage *) [info objectForKey:
                               UIImagePickerControllerEditedImage];
    originalImage = (UIImage *) [info objectForKey:
                                 UIImagePickerControllerOriginalImage];

    if (editedImage) {
        imageToUse = editedImage;
    } else {
        imageToUse = originalImage;
    }
    // Do something with imageToUse

    //save it
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *imageName = [documentsDirectory stringByAppendingString:[NSString stringWithFormat:@"%d", myUniqueID]];
    NSString *imagePath = [imageName stringByAppendingPathComponent:@".png"];

    NSData *webData = UIImagePNGRepresentation(editedImage);
    NSError* error = nil;
    bool success = [webData writeToFile:imagePath options:NULL error:&error];
    if (success) {
        // successfull save
        imageCount++;
        [[NSUserDefaults standardUserDefaults] setInteger:imageCount forKey:@"imageCount"];
        NSLog(@"@Success save to: %@", imagePath);
    }
    else if (error) {
        NSLog(@"Error:%@", error.localizedDescription);
    }
}
...
} 
```

我无法弄清楚的是`writeToFile:::`返回`false`但没有返回任何值，`error`所以我无法弄清楚出了什么问题。任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:13:39.620

你错过了一个“/”。该行：

```
NSString *imageName = [documentsDirectory stringByAppendingString:[NSString stringWithFormat:@"%d", myUniqueID]]; 
```

应该：

```
NSString *imageName = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%d", myUniqueID]]; 
```

上面写着：

```
NSString *imagePath = [imageName stringByAppendingPathComponent:@".png"]; 
```

应该：

```
NSString *imagePath = [imageName stringByAppendingPathExtension:@"png"]; 
```

* * *

**更新：**

而且，不应该：

```
NSData *webData = UIImagePNGRepresentation(editedImage); 
```

是以下？

```
NSData *webData = UIImagePNGRepresentation(imageToUse); 
```

# ios - 需要纠正我的应用移动图像的方式

> ID：12771840
> 
> 赞同：0
> 
> 时间：2012-10-07T18:59:57.203
> 
> 标签：ios, xcode

当用户单击某个按钮时，我需要我的应用程序来移动图像。这完美地工作：

视图控制器.m

```
#import "ndpViewController.h"

@interface ndpViewController ()

@property (nonatomic, retain) IBOutlet UIImageView *image;

-(void)movetheball;

@end

@implementation ndpViewController

@synthesize image;
int ballx, bally;

-(void)movetheball {
[UIView beginAnimations: @"MovingTheBallAround" context: nil];
[UIView setAnimationDelegate: self];
[UIView setAnimationDuration: 1.0];
[UIView setAnimationCurve: UIViewAnimationCurveEaseInOut];

image.frame =  CGRectMake(ballx,bally,image.frame.size.width,image.frame.size.height);

[UIView commitAnimations];
}

- (void)viewDidLoad {
   }

- (IBAction)calculatePush:(id)sender {
    ballx = 600; 
    bally = 800; 
    [self movetheball];
}
@end 
```

但是一旦应用程序必须执行其他操作（当用户单击按钮时），例如向标签添加文本，我会这样做：

```
 _lizfwLabel.text=[NSString stringWithFormat:@"%.2f",lizfw]; 
```

然后应用程序将仅在第二次单击按钮时移动图像。

知道为什么会这样吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:02:41.950

尝试使用另一种方法`UIView`在 iOS 中为 's 设置动画。苹果建议使用`[UIView animate...]`而不是旧样式`[UIView begin/commitAnimations];`。

在您的情况下，您应该将方法代码替换`movetheball`为该方法代码：

```
[UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
    CGRect frame = image.frame;
    frame.origin.x = ballx;
    frame.origin.y = bally;
    image.frame = frame;
} completion:nil]; 
```

# yesod - 在 Windows 8 上连接到 hello world yesod 示例时出错

> ID：12771842
> 
> 赞同：1
> 
> 时间：2012-10-07T19:00:06.510
> 
> 标签：yesod

我启动可执行文件（在使用 cabal 构建它之后），它显示“应用程序已启动，正在侦听端口 3000”。接下来，我使用 Web 浏览器连接到它，控制台显示“threadWaitRead 在 Windows 上需要 -threading，或者使用 System.IO.hWaitForInput。” 网络浏览器从不连接。不知道这实际上是建议我做什么来解决问题。

```
{-# LANGUAGE TypeFamilies, QuasiQuotes, MultiParamTypeClasses,
             TemplateHaskell, OverloadedStrings #-}
import Yesod

data HelloWorld = HelloWorld

mkYesod "HelloWorld" [parseRoutes|
/ HomeR GET
|]

instance Yesod HelloWorld

getHomeR :: Handler RepHtml
getHomeR = defaultLayout [whamlet|Hello World!|]

main :: IO ()
main = warpDebug 3000 HelloWorld 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:33:40.820

问题可能已经在这里介绍了：[http ://hdiff.luite.com/cgit/warp/commit?id=1.3.1.1](http://hdiff.luite.com/cgit/warp/commit?id=1.3.1.1)

强制 cabal 使用 1.3.1 版本的 warp，事情应该会按预期工作。根据我的经验，它仍然需要与 -thread 链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:17:01.797

我不确定您如何编译可执行文件，但使用`-threaded`听起来可以解决问题，例如：

```
ghc --make hello-yesod.hs -threaded
hello-yesod.exe 
```

# domain-driven-design - OSGi 应用程序设计和 DDD

> ID：12771844
> 
> 赞同：2
> 
> 时间：2012-10-07T19:00:21.900
> 
> 标签：domain-driven-design, osgi, ddd-repositories

阅读[OSGi 应用程序设计后 - 我是否在滥用服务框架？](https://stackoverflow.com/questions/9469690/osgi-application-design-am-i-abusing-the-service-framework)以及[将 OSGi 捆绑包组合成连贯的“应用程序”的最佳方法是什么](https://stackoverflow.com/questions/11326143/what-is-the-best-way-of-grouping-osgi-bundles-to-make-a-coherent-application)，我现在陷入了如何应用“不要对 OSGi 编程”口号的棘手问题。

假设有界上下文是整个应用程序而不是单个包，我应该可以自由地在 API 包中声明一些聚合根实体，并以 DDD 样式声明用于处理所述实体的存储库。现在，问题的症结在于：显式存储库似乎与 OSGi 风格对立，因为存储库本身就是一个（域对象的）注册表，并且这种设计回避了 OSGi 服务注册表。但是要取消存储库将需要消费者对 OSGi 进行编程，以便执行实体的查找。

据说存储库只是一个门面——这是否意味着我应该创建一个委托给服务注册中心的存储库实现？这似乎不是一个连贯的方法，因为消费者将有两个进入域模型的入口点：存储库和服务注册本身。放弃存储库将不再是 DDD，因为我们回到了以意大利面条式的方式将域逻辑与框架代码混合在一起。

那么这里的要点是什么？领域驱动设计是否与“OSGi 方式”不兼容，还是我遗漏了一些关键概念？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:53:24.880

不依赖于 OSGi 的理由是，作为中间件，代码中的 OSGi 可见性会降低它的凝聚力。域代码和 OSGi 代码不应混合（就像不应与 JMS、Java EE 或任何其他 API 混合一样）。内聚性较低的代码更复杂，因此容易出错。

但是，您总是需要一些将基础结构链接到您的域代码的桥接代码。由于这个桥接代码无论如何都会与某些 API 耦合，因此要充分利用它，从环境中抽象出桥接代码绝对没有用处。

DS（和 Blueprint、iPOJO 等）隐藏业务逻辑的注册表，它们只是提供域注册表的非常方便的方法。因此，使用 OSGi，您几乎不必编写任何代码来拥有一个非常强大的域对象存储库，而您的域对象本身并不知道 OSGi。

是的，如果您将代码从 OSGi 移动到其他地方，您必须重写桥接代码，并且来自 OSGi 世界，编写 OSGi 提供的通用功能非常大。但是，不使用 OSGi 构造，因为如果应用程序被移植，您必须提供功能是浪费金钱。

结论：域不应该与 OSGi 混合，桥代码应该充分利用 OSGi。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T06:09:09.340

我认为您应该简单地将存储库注册为 OSGi 服务。需要存储库的包应该引用服务并且应该只知道存储库接口。当然，这意味着您必须在 Activator 中使用 ServiceTracker，或者在蓝图上下文中使用。我更喜欢蓝图上下文，因为这样你就不会对 OSGi 有真正的 java 级别依赖。

当然，这会以某种方式创建对 OSGi 的依赖，但这是无法避免的。要遵循的基本思想是，您应该将特定于 OSGi 的代码保留在业务代码之外，并将其放在单独的类或蓝图中。

请参阅我的一个教程，它展示了一个带有 UI、模型和持久性实现的简单应用程序。虽然应用程序太小而无法真正执行 DDD，但该方法应该是相当兼容的。您会注意到的一件事是整个应用程序不会导入单个 OSGi 接口。一个很好的副作用是您可以轻松地在 OSGi 之外重用代码，但是当然您必须以不同的方式解决 DI。

[http://www.liquid-reality.de/x/DIBZ](http://www.liquid-reality.de/x/DIBZ)

# python - python通过偏移轮廓/缩小多边形来分离圆形粒子

> ID：12771846
> 
> 赞同：8
> 
> 时间：2012-10-07T19:00:35.747
> 
> 标签：python, opencv, numpy, matplotlib

我是 python 新手并且卡住了..

我想制作一个 python 脚本，允许我在这样的图像上分离相邻的粒子：

![前](../Images/0a506aa8312a4bf831e8fc7907bb75a5.png)

像这样分成不同的区域：

![后](../Images/4223e9c3239fa9c7ffac8ef4c031bb09.png)

有人建议我使用分水岭方法，据我所知，它会给我这样的东西：

![3D 流域](../Images/d80da9e1c44c69591bc088b78d1a5c26.png)

**编辑** *实际上发现这是距离变换而不是分水岭*

然后我可以在哪里使用阈值将它们分开.. 遵循这个[openCV 分水岭指南](https://stackoverflow.com/questions/11294859/how-to-define-the-markers-for-watershed-in-opencv/11438165#11438165)，但它只能去除粒子。无法“转换”代码来做我想做的事。

然后我采取了另一种方法。尝试使用[openCV 轮廓](http://opencvpython.blogspot.in/2012/06/hi-this-article-is-tutorial-which-try.html)，它给了我很好的粒子轮廓。然后我一直在寻找一种简单的方法来执行多边形偏移，以便像这样缩小边缘：

![边缘偏移](../Images/7554d787d86d0f3eec9397e9cd2f3676.png)

使用偏移轮廓（多边形）的中心应该给我粒子的数量。但我只是能够找到一种简单的方法来使用 python 进行边缘偏移/多边形收缩。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T08:31:04.327

这是一个使用 numpy、scipy 和 scikit-image（又名 skimage）的脚本。它利用局部最大值提取和分水岭加标签（即连通分量提取）。

```
import numpy as np
import scipy.misc
import scipy.ndimage
import skimage.feature
import skimage.morphology

# parameters
THRESHOLD = 128

# read image
im = scipy.misc.imread("JPh65.png")
# convert to gray image
im = im.mean(axis=-1)
# find peaks
peak = skimage.feature.peak_local_max(im, threshold_rel=0.9, min_distance=10)
# make an image with peaks at 1
peak_im = np.zeros_like(im)
for p in peak:
    peak_im[p[0], p[1]] = 1
# label peaks
peak_label, _ = scipy.ndimage.label(peak_im)
# propagate peak labels with watershed
labels = skimage.morphology.watershed(255 - im, peak_label)
# limit watershed labels to area where the image is intense enough
result = labels * (im > THRESHOLD) 
```

# maven - 让 Tycho 解决旧式 Eclipse 更新站点的依赖关系

> ID：12771851
> 
> 赞同：1
> 
> 时间：2012-10-07T19:01:02.147
> 
> 标签：maven, eclipse-plugin, tycho

我正在尝试构建一个依赖于的插件`org.apache.uima.runtime`，它是[UIMA Eclipse 更新站点](http://www.apache.org/dist/uima/eclipse-update-site/)上托管的[UIMA Eclipse 插件](http://uima.apache.org/d/uimaj-2.4.0/overview_and_setup.html#ugr.ovv.eclipse_setup)的一部分。这个更新站点是一个旧式（p2 之前）的更新站点，所以我知道[Tycho 不会解决这些依赖关系](https://bugs.eclipse.org/bugs/show_bug.cgi?id=380438)。所以我正在尝试制作 UIMA Eclipse 更新站点的本地副本，将其升级到 p2，然后从那里获取依赖项。这是我尝试过的：

```
$ svn co http://svn.apache.org/repos/asf/uima/uimaj/trunk/uimaj-eclipse-update-site/
...
Checked out revision 1395335.

$ java -jar /.../eclipse/plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar \
  -application org.eclipse.equinox.p2.publisher.UpdateSitePublisher \
  -metadataRepository file:/.../uimaj-eclipse-update-site \
  -artifactRepository file:/.../uimaj-eclipse-update-site \
  -source /.../uimaj-eclipse-update-site
Generating metadata for ..
Generation completed with success [0 seconds]. 
```

如果我查看`uimaj-eclipse-update-site`目录，我现在会看到 an`artifacts.xml`和 a `content.xml`，这似乎是正确的。我还用[p2 存储库浏览器](https://github.com/ifedorenko/p2-browser)检查了它，没有任何东西显示为“PARTIAL”，我可以看到一个`org.apache.uima.runtime.feature.jar 2.4.0`和一个`org.apache.uima.runtime.feature.group 2.4.0`.

我现在将此本地站点添加到我的 Eclipse 插件的 pom.xml 中：

```
<repository>
    <id>uima</id>
    <layout>p2</layout>
    <url>file:/.../uimaj-eclipse-update-site</url>
</repository> 
```

当我`mvn compile`在更新的项目中运行时，Tycho 找到了本地更新站点，但仍然找不到`org.apache.uima.runtime`：

```
...
[INFO] Adding repository file:/.../uimaj-eclipse-update-site
[INFO] Adding repository file:/.../uimaj-eclipse-update-site
[INFO] Resolving dependencies of MavenProject: org.cleartk:org.cleartk.plugin.jcasgen.m2e:0.9.1.qualifier @ /.../jcasgen-m2e-connector/org.cleartk.plugin.jcasgen.m2e/pom.xml
[INFO] Cannot complete the request.  Generating details.
[INFO] Cannot complete the request.  Generating details.
[INFO] {osgi.ws=cocoa, osgi.os=macosx, osgi.arch=x86_64, org.eclipse.update.install.features=true}
[ERROR] Cannot resolve project dependencies:
[ERROR]   Software being installed: org.cleartk.plugin.jcasgen.m2e 0.9.1.qualifier
[ERROR]   Missing requirement: org.cleartk.plugin.jcasgen.m2e 0.9.1.qualifier requires 'bundle org.apache.uima.runtime [2.4.0,3.0.0)' but it could not be found
[ERROR] 
[ERROR] Internal error: java.lang.RuntimeException: "No solution found because the problem is unsatisfiable."
... 
```

我究竟做错了什么？

如果你想复制错误，我`mvn compile`从这个目录运行（在修改 pom.xml 之后）：

[http://cleartk.googlecode.com/git/jcasgen-m2e-connector/](http://cleartk.googlecode.com/git/jcasgen-m2e-connector/)

**编辑：**我确实`org.apache.uima.runtime`在生成的`artifacts.xml`：

```
<artifact classifier='org.eclipse.update.feature' id='org.apache.uima.runtime' version='2.4.0'>
  <properties size='4'>
    <property name='artifact.size' value='9466'/>
    <property name='download.size' value='9466'/>
    <property name='download.md5' value='f9d4f1f8dc54f0a99379dcede2fc2700'/>
    <property name='download.contentType' value='application/zip'/>
  </properties>
</artifact> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:53:57.530

浏览 svn repo 链接，看起来插件目录是空的，只有功能存在。您可能只需要先运行 maven 来“构建”它并填充插件目录。

如果您拥有所有内容，则可以运行[p2 功能并捆绑发布](http://wiki.eclipse.org/Equinox/p2/Publisher#Features_and_Bundles_Publisher_Application)者应用程序以直接生成 p2 存储库。如果要在 Tycho 构建中使用，则不需要生成更新站点的类别端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-05T01:54:54.600

我迟到了，但 Apache UIMA 现在有一个 p2 存储库。

在您的 pom.xml 中添加 uima 存储库：

```
<repositories>
    <repository>
        <id>uima</id>
        <url>http://www.apache.org/dist/uima/eclipse-update-site</url>
        <layout>p2</layout>
    </repository>
</repositories> 
```

# lua - 如何迭代使用 luaL_ref 和 luaL_unref 修改的表？

> ID：12771852
> 
> 赞同：0
> 
> 时间：2012-10-07T19:01:18.150
> 
> 标签：lua, lua-api

我正在使用 Lua 的 C API 来扩展 Lua。在我的模块中，我想使用 填充表`luaL_ref`，并使用 删除字段`luaL_unref`。我也希望能够遍历这个表，希望使用`lua_next`.

遍历表是一个问题，因为`luaL_unref`. 在 Lua 中，通过赋值来“删除”表字段是很常见的`nil`（因为未初始化的表字段评估为`nil`）。该`next`功能足够聪明，可以跳过`nil`。我本来希望`luaL_unref`分配`nil`给未引用的表字段，但它似乎分配了一个整数。这个整数的值似乎没有记录。

考虑以下代码：

```
/* tableDump prints a table: */
/* key: value, key: value, ... */

lua_newtable(L);

lua_pushboolean(L, 0);
int ref1 = luaL_ref(L, -2);

lua_pushinteger(L, 7);
int ref2 = luaL_ref(L, -2);

lua_pushstring(L, "test");
int ref3 = luaL_ref(L, -2);

tableDump(L, -1);

luaL_unref(L, -1, ref1);
tableDump(L, -1);

luaL_unref(L, -1, ref3);
tableDump(L, -1);

luaL_unref(L, -1, ref2);
    tableDump(L, -1);

printf("done.\n"); 
```

输出：

```
1:  false,  2:  7,  3:  `test',  
3:  `test',  2:  7,  0:  1,  
3:  1,  2:  7,  0:  3,  
3:  1,  2:  3,  0:  2,  
done. 
```

这里发生了什么？我该如何解决这个问题？是否有一些技巧可以迭代引用并忽略未引用的？我必须停止使用`luaL_ref`and`luaL_unref`吗？

* * *

**编辑**

首先，感谢您的回复！

也许我问错了问题。

请允许我说得更具体一点。我有一个需要管理许多订阅用户数据的客户端用户数据。订阅由客户端的 subscribe 方法创建。订阅由客户端的取消订阅方法删除。订阅用户数据基本上是一个实现细节，因此它们不会暴露在客户端 API 中。相反，客户端 API 使用订阅引用，因此使用`luaL_ref`来填充订阅表。

```
ref = client:sub(channel, func)
cleint:unsub(ref) 
```

这就是问题所在。我希望客户端自动取消订阅 __gc 上的所有剩余订阅（否则用户将收到段错误）。所以看来我需要遍历订阅。我真的在这里滥用 API 吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:37:17.563

`luaL_ref`和`luaL_unref`函数在 中定义`lauxlib.c`。他们通过跟踪一个免费的参考列表来工作，他们将其存储在他们正在操作的表中。这些函数都比较短，所以我将它们包括在这里。

```
LUALIB_API int luaL_ref (lua_State *L, int t) {
  int ref;
  t = abs_index(L, t);
  if (lua_isnil(L, -1)) {
    lua_pop(L, 1);  /* remove from stack */
    return LUA_REFNIL;  /* 'nil' has a unique fixed reference */
  }
  lua_rawgeti(L, t, FREELIST_REF);  /* get first free element */
  ref = (int)lua_tointeger(L, -1);  /* ref = t[FREELIST_REF] */
  lua_pop(L, 1);  /* remove it from stack */
  if (ref != 0) {  /* any free element? */
    lua_rawgeti(L, t, ref);  /* remove it from list */
    lua_rawseti(L, t, FREELIST_REF);  /* (t[FREELIST_REF] = t[ref]) */
  }
  else {  /* no free elements */
    ref = (int)lua_objlen(L, t);
    ref++;  /* create new reference */
  }
  lua_rawseti(L, t, ref);
  return ref;
}

LUALIB_API void luaL_unref (lua_State *L, int t, int ref) {
  if (ref >= 0) {
    t = abs_index(L, t);
    lua_rawgeti(L, t, FREELIST_REF);
    lua_rawseti(L, t, ref);  /* t[ref] = t[FREELIST_REF] */
    lua_pushinteger(L, ref);
    lua_rawseti(L, t, FREELIST_REF);  /* t[FREELIST_REF] = ref */
  }
} 
```

这些函数非常聪明，因为它们不需要额外的存储空间（除了它们正在操作的表之外）。但是，有时不希望将自由引用列表与引用的值存储在同一个表中，例如当需要迭代引用的值时。

我已经写了`luaX_ref`并`luaX_unref`解决了这个问题。它们的工作方式几乎与 and 相同`luaL_ref`，`luaL_unref`只是它们将免费参考列表存储在单独的表中，`l`用于*list*。（对于我的项目，我将它们放在单独的源文件中，并根据需要包含它们。我不建议修改`lauxlib.c`。）

```
static int abs_index(lua_State * L, int i){
  return i > 0 || i <= LUA_REGISTRYINDEX ? i : lua_gettop(L) + i + 1;
}

LUALIB_API int luaX_ref(lua_State *L, int t, int l){
  int ref;
  t = abs_index(L, t);
  l = abs_index(L, l);
  if(lua_isnil(L, -1)){
    lua_pop(L, 1); /* remove from stack */
    return LUA_REFNIL; /* 'nil' has a unique fixed reference */
  }
  lua_rawgeti(L, l, FREELIST_REF); /* get first free element */
  ref = (int) lua_tointeger(L, -1); /* ref = l[FREELIST_REF] */
  lua_pop(L, 1); /* remove it from stack */
  if(ref != 0){ /* any free element? */
    lua_rawgeti(L, l, ref); /* remove it from list */
    lua_rawseti(L, l, FREELIST_REF); /* (l[FREELIST_REF] = l[ref]) */
  }else{ /* no free elements */
    ref = (int)lua_objlen(L, l);
    ref++; /* create new reference */
  }
  lua_pushboolean(L, 1);
  lua_rawseti(L, l, ref); /* l[ref] = true */
  lua_rawseti(L, t, ref); /* t[ref] = value */
  return ref;
}

LUALIB_API void luaX_unref(lua_State *L, int t, int l, int ref){
  if(ref >= 0){
    t = abs_index(L, t);
    l = abs_index(L, l);
    lua_rawgeti(L, l, FREELIST_REF);
    lua_rawseti(L, l, ref);  /* l[ref] = l[FREELIST_REF] */
    lua_pushinteger(L, ref);
    lua_rawseti(L, l, FREELIST_REF);  /* l[FREELIST_REF] = ref */
    lua_pushnil(L);
    lua_rawseti(L, t, ref); /* t[ref] = nil */
  }
} 
```

现在看看用法：

```
lua_newtable(L); /* 1 */
lua_newtable(L); /* 2 */

lua_pushboolean(L, 0);
int ref1 = luaX_ref(L, 1, 2);

lua_pushinteger(L, 7);
int ref2 = luaX_ref(L, 1, 2);

lua_pushstring(L, "test");
int ref3 = luaX_ref(L, 1, 2);

tableDump(L, 1);
tableDump(L, 2);

luaX_unref(L, 1, 2, ref1);
tableDump(L, 1);
tableDump(L, 2);

luaX_unref(L, 1, 2, ref3);
tableDump(L, 1);
tableDump(L, 2);

luaX_unref(L, 1, 2, ref2);
tableDump(L, 1);
tableDump(L, 2);

printf("done.\n"); 
```

输出：

```
1:  false,  2:  7,  3:  `test',
1:  true,  2:  true,  3:  true,
2:  7,  3:  `test',
3:  true,  2:  true,  0:  1,
2:  7,
3:  1,  2:  true,  0:  3,

3:  1,  2:  3,  0:  2,
done. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T19:41:08.080

为了“确保它返回的键的唯一性”，`luaL_ref`必须维护一个已使用和随后`luaL_unref`删除的键的列表。看起来这个列表从开始`t[0]`并一直持续到索引链导致 a `nil`。此列表与活动参考保存在同一个表中。

如果您想像 Nicol 所观察到的那样继续“滥用 API”，并且依赖于实现定义的行为，您可以按照这个链接列表查看在迭代表时键是否是已删除的引用。或者为了避免依赖于实现定义的行为并提高性能，您可以保留一个单独的已删除引用表并在迭代表时跳过它们，尽管您需要忽略`t[0]`.

如果您确实需要迭代引用，则最好完全使用不同的机制。您可以简单地将所有引用/值对放在一个单独的表中，并将单独表中的值设置为`nil`删除引用时的值。然后你可以简单地迭代单独的表。

# codeigniter - 如何将验证码脚本加载到 CI？

> ID：12771853
> 
> 赞同：0
> 
> 时间：2012-10-07T19:01:20.143
> 
> 标签：codeigniter, codeigniter-2

我有生成图像的验证码脚本（image.php）：

```
<img src="/application/libraries/captcha/image.php" onclick="javascript:reloadCaptcha()" id="captcha" title="Click to reload image" alt="Click to reload image"> 
```

问题：如何加载此图像？

直接访问 example.com/application/libraries/captcha/image.php — 403 错误。

验证码网站：[http ://www.php-help.ro/php-tutorials/math-capcha-image-against-spam/](http://www.php-help.ro/php-tutorials/math-capcha-image-against-spam/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T05:49:23.400

Ci有自己的验证码库......你可以看看这个[http://codeigniter.com/user_guide/helpers/captcha_helper.html](http://codeigniter.com/user_guide/helpers/captcha_helper.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:36:34.360

除了 Pramod 响应之外，如果您仍想在该教程中使用验证码，您可以在 CI 中将外部类作为库加载：

```
this->load->libray('my_captha'); 
```

您需要创建一个包含该类的 php 文件，将其放入 application/libraries 并加载它，一旦您加载了您可以使用的库：

```
this->my_captcha->my_method_to_generate_captcha(); 
```

# zooming - 使用 kineticjs 在点击点缩放图层

> ID：12771855
> 
> 赞同：1
> 
> 时间：2012-10-07T19:01:25.177
> 
> 标签：zooming, kineticjs

我正在使用 kineticjs 并希望在单击图层时放大图层。缩放应该以点击点为中心。
我的代码有效，但前提是我将每次后续点击的点击点都保留在同一个位置。
当我改变点时，图层会向某个方向平移。

```
image_part.on('click', function(evt){
    zoom += 0.1;
    var offset = layer.getOffset();
    layer.setOffset(evt.pageX, evt.pageY);
    layer.setScale(zoom);
    layer.setX(evt.pageX);
    layer.setY(evt.pageY);
    layer.draw();
}); 
```

有谁知道有效的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:45:29.073

我这样做。我正在缩放整个图层，但它适用于任何图像或形状。只需让 setPosition 完成所有工作并针对新的比例因子进行调整。注意1：如果画布不在页面的上角，您还需要获取画布位置并将其从页面X，Y位置移除。这就是函数 getPos() 的作用。我直接从另一个 stackoverflow 主题中提取了它。注意2：使用zP点控制缩放发生的位置（即在鼠标点击位置，或中心而不是缩放等）

动力学JS部分...

```
 layer.on("dblclick",function(ev){
        var d=document.getElementById('photoCnvs');         
        var cnvsPos=getPos(d);

        var R={  //(canvas space)
            x: ev.pageX,
            y: ev.pageY
        };

        var off0=this.getPosition();
        var scl0=this.getScale().x;
        var w=stageM.getWidth();
        var h=stageM.getHeight();

        //desired zoom point (e.g. mouse position, canvas center)
        var zP={
            //use these first two lines to center the image on the clicked point while zooming
            //x: w/2,
            //y: h/2
            //use these next two lines to zoom the image around the clicked point
            x: R.x-cnvsPos.x,
            y: R.y-cnvsPos.y                
        }

    //actual pixel value clicked (image space)
        var xA={
            x:(R.x-off0.x-cnvsPos.x)/scl0,
            y:(R.y-off0.y-cnvsPos.y)/scl0
        }

    //rescale image
        var sclf=scl0*1.10;
        this.setScale(sclf);

    //move clicked pixel to the desired zoom point
        var newR={
            x: zP.x-sclf*xA.x,
            y: zP.y-sclf*xA.y
        }

        this.setPosition(newR.x, newR.y)

        this.draw();

    }) 
```

然后画布位置部分

```
function getPos(el) {
    for (var lx=0, ly=0;
         el != null;
         lx += el.offsetLeft, ly += el.offsetTop, el = el.offsetParent);
    return {x: lx,y: ly};
} 
```

# php - 使用 Google API 检查域索引

> ID：12771857
> 
> 赞同：0
> 
> 时间：2012-10-07T19:01:27.723
> 
> 标签：php, arrays, api, web, indexing

我正在尝试建立一个网站，用户可以在其中输入他的网站并在谷歌中检查他的索引页面。就像我们做的那样`site:domain.com`

我正在使用谷歌 API，这里是 API 的链接（我知道它已被弃用）

[http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=](http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=)

当我使用类似的代码时

```
<?php  

function getGoogleCount($domain) {
    $content = file_get_contents('http://ajax.googleapis.com/ajax/services/' .
        'search/web?v=1.0&filter=0&q=site:' . urlencode($domain));
    $data = json_decode($content);
    return ($data->responseData->cursor->estimatedResultCount);
}

echo getGoogleCount('stackoverflow.com');

?> 
```

就我想知道的结果而言很好但是接下来我想要在我的网站上列出所有结果。我无法获取结果，因为当我们写

```
$data->responseData->cursor->estimatedResultCount 
```

它是直的但是当我们试图得到结果时。我不知道怎么做，只是为了打印这个想法

```
$data->responseData->results->[url & title & content here] 
```

因为这里的结果是一个数组。而且我不知道在这种情况下如何将信息存储在数组中。

找了好久没找到相关的。。。。。。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:15:41.363

最简单的方法是使用：

```
$data = json_decode($content, true); 
```

这会将对象转换为可能更容易处理的普通关联数组。然后，您可以通过以下方式访问您的值：

```
$results = $data['responseData']['results']; //array
$googleCount = $data['responseData']['cursor']['estimatedResultCount']; 
```

然后根据结果，您可以执行以下操作：

```
foreach ($results as $result) {
    echo $result['title'].' -> '.$result['url'] . '<br />';
} 
```

但是当然，如​​果您不喜欢关联数组并且更喜欢对象，您也可以这样做：

```
$data = json_decode($content);
foreach ($data->responseData->results as $result) {
    echo $result->title .' -> '.$result->url.'<br />';
} 
```

如果要检查哪些属性具有 $result，只需使用`print_r`or `var_dump`。

# php - Facebook：如何解析访问令牌字符串

> ID：12771860
> 
> 赞同：2
> 
> 时间：2012-10-07T19:01:41.163
> 
> 标签：php, facebook, facebook-graph-api

当我从 Facebook 请求访问令牌时，它会以字符串形式返回：

```
"access_token=AAABqLmGZAT7sBAJK8llYPWm27lgfRxVZBl************YQZDZD&expires=5182152" 
```

如何`access_token`从新变量中的上述值中获取部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T08:06:02.950

您可以`parse_str()`为此使用：

```
parse_str('access_token=AAAAA***&expires=123', $a);
echo $a['access_token']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:54:58.990

在 PHP 中？

```
$foo = $_GET['access_token']; 
```

根据您的设置，您还需要存储`expires`变量，以便知道令牌的有效期。

# java - 如何在不使用 if 的情况下编写斐波那契 Java 程序

> ID：12771868
> 
> 赞同：3
> 
> 时间：2012-10-07T19:02:35.697
> 
> 标签：java

在不使用“if”的情况下用 int Fibonacci (int n) 编写的代码是什么，就像他们在这里所做的[Java recursive Fibonacci sequence](https://stackoverflow.com/questions/8965006/java-recursive-fibonacci-sequence)一样？我试图写这个，但它是错误的：因为在这个程序中，列表将是 1 1 2 3 5 8 而不是 0 1 1 2 3 5 8

这是我尝试编写的程序：

```
public class Fibonacci
{
    public static void main(String[] args)
    {
        int f = 0;
        int g = 1;

        for(int i = 1; i <= 10; i++)
        {
            f = f + g;
            g = f - g;
            System.out.print(f + " ");
        }

        System.out.println();
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T19:33:05.843

计算斐波那契数的纯公式：

```
public double getFibonacci(int n) {
    double f1 = Math.pow(((1 + Math.sqrt(5)) / 2.0), n);
    double f2 = Math.pow(((1 - Math.sqrt(5)) / 2.0), n);

    return Math.floor((f1 - f2) / Math.sqrt(5));
} 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-07T19:19:44.173

你的程序是完全正确的；您需要更改的只是打印语句的位置：

```
public static void main(String[] args) {
  int f = 0;
  int g = 1;

  for(int i = 1; i <= 10; i++)
  {
    System.out.print(f + " ");
    f = f + g;
    g = f - g;
  } 

  System.out.println();
} 
```

或者，打印`g`而不是`f`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-07T19:08:37.640

这里没有 if 语句：

```
public static void printFib(final int N) { 
    int f0 = 0; 
    int f1 = 1; 

    for (int i = 0; i < N; ++i) { 
        System.out.println(f0);   
        final int temp = f1; 
        f1 += f0; 
        f0 = temp; 
    } 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-07T19:42:52.680

这是我遵循的一个，它很短并且不使用`if`

```
 public class ShortFibboCode{

    public static void main(String a[]) {
        int f = 0;
        int numUpto = 10; // number of series upto - change accordingly
        for(int t = 1; f < numUpto; t = f + (f = t))
            System.out.print((f + " ");
        }
} 
```

# c - 使用单链表更新队列 adt 中的尾指针时遇到问题

> ID：12771869
> 
> 赞同：0
> 
> 时间：2012-10-07T19:02:45.470
> 
> 标签：c, linked-list, queue

我正在尝试制作一个基于我已经制作的链表库的队列库。具体来说，在将新节点添加到链表后，我无法更新队列结构中的尾指针。

链表结构：

```
struct listNode {
    int nodeLength;
    int nodeValue;
    struct listNode *next;
};

typedef struct listNode node; 
```

队列结构：

```
struct QueueRecord {
    node *list;
    node *front;
    node *back;
    int maxLen;
};
typedef struct QueueRecord queue; 
```

所以这是我在队列库中的添加功能

```
void add(queue currentQueue, int data){
    addTail(currentQueue.list, data, data+5);
    currentQueue.back = currentQueue.back->next;

} 
```

和链表库中的 addTail 函数

```
void addTail (node *head, int value, int length) {
    node *current = head;
    node *newNode = (struct listNode *)malloc(sizeof(node));
    newNode = initNode(value, length);

    while (current->next != NULL)   
        current = current->next;

    newNode->next = NULL;
    current->next = newNode;
} 
```

所以我的问题再次是尾指针没有设置到列表中的最后一个节点。它与头指针保持在同一位置。我已经研究了好几个小时，想看看我是不是遗漏了一些小东西，但我找不到。如果需要更多代码或解释来理解我的问题，我可以提供。

如何创建队列：

```
queue createQueue(int maxLen){
    queue newQueue;
    newQueue.list = createList();
    newQueue.front = newQueue.list;
    newQueue.back = newQueue.list;
    newQueue.maxLen = maxLen;
    return newQueue;
}    

node *createList (){
    node *head = NULL;
    head = (struct listNode *)malloc(sizeof(node));
    head->next = NULL;
    return head;
}

node *initNode (int value, int length){
    node *newNode = NULL;
    newNode = (struct listNode *)malloc(sizeof(node));
    newNode->nodeValue = value;
    newNode->nodeLength = length;
    newNode->next = NULL;
    return newNode;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:06:25.240

```
void add(queue currentQueue, int data){ 
```

您将struct的*副本*传递给，因此只有副本的成员被更改。您需要将 a 传递给函数才能更改其自身的成员。`queue``add``queue*``queue`

```
void add(queue *currentQueue, int data){
    if (currentQueue == NULL) {
        exit(EXIT_FAILURE);
    }
    addTail(currentQueue->list, data, data+5);
    currentQueue->back = currentQueue->back->next;
} 
```

并将其称为`add(&your_queue);`

在你的`addTail`函数中，你应该检查是否`head`也是`NULL`。

与

```
node *newNode = (struct listNode *)malloc(sizeof(node));
newNode = initNode(value, length); 
```

，`addTail`你有一个严重的问题。使用 assignment `newNode = initNode(value, length);`，您将丢失对刚刚`malloc`编辑的内存的引用。

如果`initNode` `malloc`一个新的内存块，它“只是”一个内存泄漏，那么你应该删除`malloc`in `addTail`。

否则，我担心`initNode`返回局部变量的地址，à la

```
node * initNode(int val, int len) {
    node new;
    new.nodeValue = val;
    new.nodeLength = len;
    new.next = NULL;
    return &new;
} 
```

如果`initNode`看起来与此相似，那将导致问题，因为一旦函数返回，地址就会变得无效。但是你的编译器应该警告你，如果`initNode`看起来像那样的话。

无论如何，没有看到 的代码`initNode`，我无法诊断原因。

但是如果你改变你`addTail`的

```
void addTail (node *head, int value, int length) {
    if (head == NULL) { // violation of contract, die loud
        exit(EXIT_FAILURE);
    }
    node *current = head;
    node *newNode = malloc(sizeof(node));
    if (newNode == NULL) {
        exit(EXIT_FAILURE); // or handle gracefully if possible
    }
    newNode->nodeValue = value;
    newNode->nodeLength = length;
    newNode->next = NULL;

    while (current->next != NULL)   
        current = current->next;

    current->next = newNode;
} 
```

它应该工作。

但是，由于您有指向列表中第一个和最后一个节点的指针，因此使用`back`指针附加一个新节点会更有效，

```
void add(queue *currentQueue, int data){
    node *newNode = malloc(sizeof *newNode);
    if (newNode == NULL) {
        exit(EXIT_FAILURE); // or handle gracefully if possible
    }
    newNode->nodeValue = data;
    newNode->nodeLength = data+5;
    newNode->next = NULL;
    currentQueue->back->next = newNode;
    currentQueue->back = newNode;
} 
```

因为您无需遍历整个列表即可找到结尾。

* * *

一个简单的示例程序

```
#include <stdlib.h>
#include <stdio.h>

struct listNode {
    int nodeLength;
    int nodeValue;
    struct listNode *next;
};

typedef struct listNode node;

struct QueueRecord {
    node *list;
    node *front;
    node *back;
    int maxLen;
};
typedef struct QueueRecord queue;

node *createList (){
    node *head = NULL;
    head = (struct listNode *)malloc(sizeof(node));
    head->next = NULL;
    return head;
}

void addTail (node *head, int value, int length) {
    if (head == NULL) { // violation of contract, die loud
        exit(EXIT_FAILURE);
    }
    node *current = head;
    node *newNode = malloc(sizeof(node));
    if (newNode == NULL) {
        exit(EXIT_FAILURE); // or handle gracefully if possible
    }
    newNode->nodeValue = value;
    newNode->nodeLength = length;
    newNode->next = NULL;

    while (current->next != NULL)   
        current = current->next;

    current->next = newNode;
}

queue createQueue(int maxLen){
    queue newQueue;
    newQueue.list = createList();
    newQueue.front = newQueue.list;
    newQueue.back = newQueue.list;
    newQueue.maxLen = maxLen;
    return newQueue;
}

void add(queue *currentQueue, int data){
    if (currentQueue == NULL) {
        exit(EXIT_FAILURE);
    }
    addTail(currentQueue->list, data, data+5);
    currentQueue->back = currentQueue->back->next;
}

int main(void) {
    queue myQ = createQueue(10);
    for(int i = 1; i < 6; ++i) {
        add(&myQ, i);
        printf("list:  %p\nfront: %p\nback:  %p\n",
                (void*)myQ.list, (void*)myQ.front, (void*)myQ.back);
    }
    node *curr = myQ.front->next;
    while(curr) {
        printf("Node %d %d, Back %d %d\n", curr->nodeValue,
                 curr->nodeLength, myQ.back->nodeValue, myQ.back->nodeLength);
        curr = curr->next;
    }
    while(myQ.list) {
        myQ.front = myQ.front->next;
        free(myQ.list);
        myQ.list = myQ.front;
    }
    return 0;
} 
```

可以按预期工作，也可以使用替代`add`实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T19:09:17.407

我想你从来没有初始化回来，所以 back->next 是一些随机指针？

# doctrine - Doctrine 2.1 - DAYOFWEEK 功能替代方案？

> ID：12771882
> 
> 赞同：1
> 
> 时间：2012-10-07T19:04:30.373
> 
> 标签：doctrine, doctrine-orm

在 D2.1，querybuilder，我如何使用星期几 mysql 函数，我认为它不可用

```
doctrine but isnt there  a way i could otherwise?

$qb->select('p')
   ->where('YEAR(p.postDate) = :year')
   ->andWhere('MONTH(p.postDate) = :month')
   ->andWhere('DAYOFWEEK(p.postDate) = :dayOfWeek'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-29T22:55:53.740

您可以编写一个学说扩展来完成这项工作：

Xyz\SomeBundle\DoctrineExtension\DayOfWeek.php

```
class DayOfWeek extends FunctionNode
{
    public $date;

    /**
     * @override
     */
    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return "DAYOFWEEK(" . $sqlWalker->walkArithmeticPrimary($this->date) . ")";
    }

    /**
     * @override
     */
    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);

        $this->date = $parser->ArithmeticPrimary();

        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }
} 
```

应用程序/config/config.yml

```
doctrine:
    orm:
        auto_generate_proxy_classes: "%kernel.debug%"
        entity_managers:
            default:
                naming_strategy: doctrine.orm.naming_strategy.underscore
                auto_mapping: true
                dql:
                    datetime_functions:
                        dayofweek: Xyz\SomeBundle\DoctrineExtension\DayOfWeek 
```

更多细节在这里查看：[DoctrineExtensions](https://github.com/beberlei/DoctrineExtensions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:02:39.710

不可能通过查询生成器使用所有 SQL 函数。其中一些已定义（`AVG`,`SUM`等），但大多数未定义（包括`DAY`/ `WEEK`/ `MONTH`）。

您仍然可以编写本机 SQL：

```
// creating doctrines result set mapping obj.
$rsm = new Doctrine\ORM\Query\ResultSetMapping();

// mapping results to the message entity
$rsm->addEntityResult('AppBundle\Entity\Post', 'p');
$rsm->addFieldResult('p', 'id', 'id');
$rsm->addFieldResult('p', 'postDate', 'postDate');

$sql = "SELECT id, postDate
        FROM your_table
        WHERE YEAR(postDate) = ? 
              AND [...]";

$query = $this->_em->createNativeQuery($sql, $rsm);
$query->setParameter(1, $your_year_here);
$query->getResult(); 
```

# javascript - 清理一大段 Javascript 代码

> ID：12771883
> 
> 赞同：1
> 
> 时间：2012-10-07T19:04:31.497
> 
> 标签：javascript, android, optimization, titanium

我正在用 Titanium for Android 编写一个应用程序。我在一个 JS 文件中有很多代码。我想知道是否有像 php 的 include 之类的函数将代码分成多个文件，然后只包含它们。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:28:46.773

使用 CommonJS / RequireJS 方法，特别是`require`命令。这是（强烈）推荐的在 Titanium 中处理大型系统的方法，并且在他们的网站上有很好的记录，以及处理特定于 Titanium 的 JavaScript 模块化的许多最佳实践。[这是来自 Titanium 的文档。](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/CommonJS_Modules_in_Titanium)

例如，要创建一个封装某种“视图”的模块，请将其放在一个`MyCustomView.js`以此内容命名的文件中：

```
// MyCustomView.js
function MyCustomView(message) {
    var self = Ti.UI.createView({
        backgroundColor : 'red'
    });
    var label = Ti.UI.createLabel({
        text : message,
        top : 15,
        .... // Other initialization
    });

    // ... Other initialization for your custom view, event listeners etc.
    return self;
}

module.exports = MyCustomView; 
```

现在你可以很容易地在另一个类中使用这个模块，假设你把它放在你的`/Resources`文件夹中，让我们在里面加载模块`app.js`并将其添加到主窗口。

```
// app.js
var MyCustomView = require('MyCustomView');
var myView = new MyCustomView('A message!');
Titanium.UI.currentWindow.add(myView); 
```

您可以使用这种方法来制作自定义视图、可重用代码库以及您想要的任何其他内容。另一个常见的事情是拥有一个具有许多不同帮助函数的 Utility 类：

```
// Utility.js
exports.cleanString = function(string) {
    // Replace evil characters
    var ret = string.replace(/[|&;$%@"<>()+,]/g, "");
    // replace double single quotes
    return ret.replace(/"/g, "''");
} 
```

这种方法可以像这样轻松使用：

```
// app.js
var Utility = require('Utility.js');
Ti.API.info(Utility.cleanString('He##o W&orld$')); 
```

我使用它的另一种常见方法是实现[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)，因为每个加载的模块都是它自己的功能上下文，所以如果你愿意，你可以拥有持久的值：

```
// ManagerSingleton.js
var SpriteManager = {
   count : 0
};

exports.addSprite = function() {
    SpriteManager.count++;
}

exports.removeSprite = function() {
    SpriteManager.count--;
} 
```

您可以像 Utility 一样加载和使用：

```
// app.js
var ManagerSingleton = require('ManagerSingleton');
ManagerSingleton.addSprite(); 
```

这是一种更优雅的解决方案，而不是使用全局变量。这些方法绝不是完美的，但它们为我节省了大量时间和挫败感，并为我的 Titanium 代码增加了深度、优雅和可读性，适用于各种大小和类型的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:20:47.047

Javascript 世界中有两个主要的模块系统。一个是 CommonJS，第二个是 AMD。关于哪一个是最好的以及用于什么目的有很多讨论。CommonJS 更广泛地用于服务器端 JS，而 AMD 主要用于浏览器 JS。

RequireJS ( [requirejs.org](http://requirejs.org) ) 似乎是最流行的 AMD 系统。

有关 JS 模块系统的信息，请在此处阅读：http: [//addyosmani.com/writing-modular-js/](http://addyosmani.com/writing-modular-js/)

# asp.net - 当我在更新面板更新时按 F5 时出现 PageRequestManagerServerErrorException 错误

> ID：12771884
> 
> 赞同：0
> 
> 时间：2012-10-07T19:04:36.007
> 
> 标签：asp.net, asynchronous, error-handling, updatepanel

我有一个更新面板，每秒钟使用一次计时器更新一次。我还在 javascript 中设置了异步回发错误处理程序，如下所示：

```
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(onEndRequest);

function onEndRequest(sender, args) {
var error = args.get_error();
if (error != null) {
    args.set_errorHandled(true);
    alert(error.message);
} 
```

}

当我手动刷新页面或单击超链接时，我在 endRequest 处理程序中收到以下错误：

> 在服务器上处理请求时发生未知错误。从服务器返回的状态码是：0

我怎样才能防止这种行为？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T21:12:20.417

我想到了。

对于有同样问题的你，这里是确定脚本管理器异步回发当前是否正在运行的代码：

```
Sys.WebForms.PageRequestManager.getInstance().get_isInAsyncPostBack() 
```

取消它调用：

```
Sys.WebForms.PageRequestManager.getInstance().abortPostBack(); 
```

我只是直接调用取消方法。当请求未运行时，它什么也不做。

# java - Java：“非静态方法 drawRect”错误

> ID：12771885
> 
> 赞同：1
> 
> 时间：2012-10-07T19:04:37.263
> 
> 标签：java, drawrect

我真的是Java新手。以为我现在已经弄清楚了一些东西，但是我有一个问题证明并非如此！

行！这里是。我有这段代码（已编辑 - 非原创）：

```
import java.util.*;
import java.awt.*;

public class MyClass extends HisClass
{
    public void drawRectangle(int width, int height)
    {
      int x1 = this.getXPos();
      int y1 = this.getYPos();
      java.awt.Graphics.drawRect(x1, y1, width, height);
    }

    public static void main(String[] args)
    {
      AnotherClass theOther = new AnotherClass();
      MyClass mine = new MyClass(theOther);
      mine.move();
    }
} 
```

它给我的错误是这样的：

```
MyClass.java:66: error: non-static method drawRect(int,int,int,int) cannot be referenced from a static context 
```

你能给我一个解决方案吗？将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:06:37.323

```
java.awt.Graphics.drawRect(x1, y1, width, height); 
```

`drawRect`方法不是静态的。您应该以某种方式获取 Graphics 类的实例来使用它：-

```
(graphicsInstance).drawRect(x1, y1, width, height); 
```

由于`Graphics`class is `abstract`，所以您需要找到合适的方法来实例化您的 Graphics 对象，以获得`graphicsInstance`

你可以用它`GraphicsContext`来绘制任何你想要的东西。GraphicsContext 是一个属于`Graphics`你可以用来`drawRect()`

**看到这些帖子。可能有用：-**

[如何在 Java 中初始化 Graphics 对象？](https://stackoverflow.com/questions/1965347/how-do-i-intialize-a-graphics-object-in-java)

[什么是图形上下文（在 Java 中）？](https://stackoverflow.com/questions/4000961/what-is-a-graphics-context-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:23:03.953

这是一些示例代码，它通过覆盖其方法并将其添加到 上来绘制`Rectangle`using ：`drawRect()``JPanel``paintComponent(Graphics g)``JFrame`

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class DrawRect extends JPanel {

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        //draw our rect
        g.setColor(Color.blue);
        g.drawRect(10, 10, 100, 50);
    }

    //or else we wont see the JPanel
    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 300);
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setTitle("DrawRect");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new DrawRect());
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# jquery - jQuery FullCalendar 插件事件在 IE 和 Firefox 中限制为 3 个

> ID：12771886
> 
> 赞同：0
> 
> 时间：2012-10-07T19:04:51.710
> 
> 标签：jquery, events, fullcalendar

我为我的日历指定了 8 个事件。在 Chrome 中，所有 8 个都显示在当天的日历中。在 IE 和 Firefox 中只有 3 个出现？我尝试更改 css 并搜索 .js 文件无济于事。有任何想法吗？

代码 ：

```
$('#calendar').fullCalendar({
        firstDay : 1,
        events: [
            {
                title  : 'event1',
                start  : '2012-10-01 11:30:00',
                description: 'This is a cool event'
            },
            {
                title  : 'event2',
                start  : '2012-10-01 12:00:00',
                description: 'This is a cool event'
            },
            {
                title  : 'event3 i say i say i say i say',
                start  : '2012-10-01 12:30:00',
                description: 'This is a cool event and I can\t wait to try it',
                allDay : false // will make the time show
            },
            {
                title  : 'event4',
                start  : '2012-10-01 1:30:00',
                description: 'This is a cool event'
            },
            {
                title  : 'event5',
                start  : '2012-10-01 2:30:00',
                description: 'This is a cool event'
            },
            {
                title  : 'event6',
                start  : '2012-10-01 3:30:00',
                description: 'This is a cool event'
            },
            {
                title  : 'event7',
                start  : '2012-10-01 6:30:00',
                description: 'This is a cool event'
            },
            {
                title  : 'event8',
                start  : '2012-10-01 7:30:00',
                description: 'This is a cool event'
            }
        ],

        eventClick: function(calEvent, jsEvent, view) {

            alert('Event: ' + calEvent.title + '\nDesc: ' + calEvent.description);
        },

        dayClick: function(date, allDay, jsEvent, view) {

            if (allDay) {
                alert('Clicked on the entire day: ' + date);
            }else{
                alert('Clicked on the slot: ' + date);
            }
        }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T19:24:14.310

如果小时只有一个数字，则必须使用 24 小时格式并在前面加上零。

[http://jsfiddle.net/mH3pg/](http://jsfiddle.net/mH3pg/)

# jquery - jQuery 使用它们的类（而不是 ID）将多个 DOM 元素移动到其他元素中

> ID：12771891
> 
> 赞同：1
> 
> 时间：2012-10-07T19:05:25.680
> 
> 标签：jquery, class, dom, element, move

我正在处理包含多篇博客文章的页面，并且由于当前平台/模板的限制，无法移动 HTML 中的评论计数。

我想将 .reaction-count 元素从每篇文章的一部分移到另一部分。

我已阅读此线程上的解决方案：[如何将元素移动到另一个元素中？](https://stackoverflow.com/questions/1279957/how-to-move-an-element-into-another-element)但我仍然不确定如何将其转化为我需要的东西。

这是我到目前为止所尝试的。它不太有效，因为它将所有 .reaction-count 元素移动到所有 .post-title 元素中，而不仅仅是该特定文章的 .reaction-count 。

一次尝试：http: [//jsfiddle.net/DanEvans/jbgC4](http://jsfiddle.net/DanEvans/jbgC4)

另一种尝试：http: [//jsfiddle.net/DanEvans/jbgC4/5/](http://jsfiddle.net/DanEvans/jbgC4/5/)

下面是一些模拟这种情况的简化示例 HTML：

```
<div class="entry-content">
    <h2 class="post-title">
        <a href="#">Post #1</a>
    </h2>

    <p>Lots of other text and elements</p>

    <span class="reaction-count">
        <br><a href="#">Post #1 Comments</a>
    </span>
</div>
<hr>
<div class="entry-content">
    <h2 class="post-title">
        <a href="#">Post #2</a>
    </h2>

    <p>Lots of other text and elements</p>

    <span class="reaction-count">
        <br><a href="#">Post #2 Comments</a>
    </span>
</div>​ 
```

我尝试的第一件事是：

```
$('.reaction-count').appendTo('.post-title');​ 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T19:08:50.153

如果您只是想将反应计数移动到相同条目内容的帖子标题中..

```
$('.reaction-count').each(function(){
    $(this).parent().find('.post-title').append($(this));
});  ​  ​ 
```

（我的遍历是错误的）。

会将反应计数移动到其父条目内容中的帖子标题中。

[摆弄你的 CSS](http://jsfiddle.net/ehFH5/)

# iphone - 具有动态内容的自定义 UITableViewCell

> ID：12771892
> 
> 赞同：1
> 
> 时间：2012-10-07T19:05:32.663
> 
> 标签：iphone, ios, uitableview

我正在尝试创建一个从 XIB 加载自定义单元格的 UITableView。我有 EventsCell.xib 以及 .m 和 .h 文件。

单元格的内容和高度是动态的，因为它可以包含未知数量的子视图。

这是加载单元格的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"EventsCellIdentifier";

        EventsCell *cell = (EventsCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil) 
        {
            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"EventsCell" owner:self options:nil];
            cell = [nib objectAtIndex:0];        
        }

        NSDictionary *hour = [[[eventsArray objectAtIndex:[indexPath section]] valueForKey:@"hours"] objectAtIndex:[indexPath row]];

        NSArray *events = [hour valueForKey:@"events"];

        cell.events = events;
        cell.timeLabel.text = [hour valueForKey:@"name"];

        int offset = 0;
        for(NSDictionary *event in events)
        {
            UIView *vvv = [[UIView alloc] initWithFrame:CGRectMake(50, offset, 270, 44)];
            [vvv setBackgroundColor:[UIColor clearColor]];

            UILabel *lab = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 44)];
            lab.text = [event valueForKey:@"name"];
            lab.backgroundColor = [UIColor clearColor];

            [vvv addSubview:lab];

            [cell.contentView addSubview:vvv];

            offset += 44;
        }    

        return cell;
    } 
```

它加载单元格，但在我在表格视图上滚动几次后，内容如下所示：

![在此处输入图像描述](../Images/c45b957845a78545eceb87958b4597c4.png)

我究竟做错了什么？..

谢谢！

**==================== 更新====================**

现在另一件事正在发生。我已经在单独的视图控制器中添加了添加到单元格的子视图的所有元素。像下面这样。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"EventsCellIdentifier";

        EventsCell *cell = (EventsCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil) 
        {
            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"EventsCell" owner:self options:nil];
            cell = [nib objectAtIndex:0];        
        }

        for (UIView *subV in [cell.contentView subviews]){
            [subV removeFromSuperview];
        }    

        NSDictionary *hour = [[[eventsArray objectAtIndex:[indexPath section]] valueForKey:@"hours"] objectAtIndex:[indexPath row]];

        NSArray *events = [hour valueForKey:@"events"];

        cell.events = events;
        cell.timeLabel.text = [hour valueForKey:@"name"];

        int offset = 0;

        for(NSDictionary *event in events)
        {
            EventBoxViewController *ebvc = [[EventBoxViewController alloc] initWithNibName:@"EventBoxViewController" bundle:nil];
            ebvc.nameLabel.text = [event valueForKey:@"name"];

            [ebvc.view setFrame:CGRectMake(50, offset, 270, 44)];
            [cell.contentView addSubview:ebvc.view];

            offset += 44;
        }    

  return cell; 
 } 
```

而且它们没有按应有的方式加载。请看下图。

![在此处输入图像描述](../Images/3081380165b8ecc20db826fcf81a23c2.png)

它们仅在我滚动浏览单元格时才加载，即使那样它们也不会按应有的方式加载。标签的文本也没有被分配。关于我做错了什么的任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T19:40:37.080

在 cell.contentView 上添加了视图，由于单元格是可重复使用的，它仍然保持添加状态，如果我们删除所有子视图，它将起作用

```
for (UIView *subV in [cell.contentView subviews]){
     [subV removeFromSuperview];
} 
```

后面加上上面的代码

```
if (cell == nil) 
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"EventsCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];        
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T11:11:59.100

如果您将 UIVIew* 添加到表格单元格原型并清除它的子视图，它会起作用。像这样：

```
 UIView* editView = (UIView*)[cell viewWithTag:102];
 for (UIView *subV in [editView subviews]){
        [subV removeFromSuperview]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T17:43:37.480

更具可读性的解决方案是每次都创建一个单元，而不是使一个单元出队，但这取决于您最终需要加载多少个单元，因为开销。这个删除的东西看起来很讨厌。

# tsql - 使用左连接命令 SQL Server 2008 r2 查询时如何替换列值

> ID：12771906
> 
> 赞同：0
> 
> 时间：2012-10-07T19:07:08.040
> 
> 标签：tsql, replace, sql-server-2008-r2, left-join

好吧，让我用例子来解释我的问题

我们有一个表，其中包含

```
Id
Name
Number 
```

现在的例子

```
1 House 4
2 Hospital 3
3 Airport 'null'
4 Station 2 
```

* * *

```
 select t1.id, 
       t1.name,
       t2.name as name2
from your_table t1
left join your_table t2 on t1.number = t2.id 
```

好的，如上所述查询时，包含列的“空”值给出错误。所以我想修改上面的查询，使其返回 name2 为 null 并且不会为该行提供错误。

所以我期望的结果应该是：

```
1 House Station
2 Hospital Airport
3 Airport null
4 Station Hospital 
```

这里的 null 是字符串。

我得到的当前错误

> *消息 245，级别 16，状态 1，第 5
> 行将 varchar 值“null”转换为数据类型 smallint 时转换失败。*

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T19:12:41.447

您应该修复您的数据库设计。同时，使用[NULLIF](http://msdn.microsoft.com/en-us/library/ms177562.aspx)来获得您的预期结果：

```
select t1.id, 
       t1.name,
       t2.name as name2
from your_table t1
left join your_table t2 on NULLIF( t1.number, 'NULL' ) = t2.id 
```

# bash - BASH - 使用陷阱 ctrl+c

> ID：12771909
> 
> 赞同：42
> 
> 时间：2012-10-07T19:07:22.243
> 
> 标签：bash

我正在尝试使用 read 在脚本中执行命令，当用户使用`Ctrl`+时`C`，我想停止命令的执行，但不退出脚本。像这样的东西：

```
#!/bin/bash

input=$1
while [ "$input" != finish ]
do
    read -t 10 input
    trap 'continue' 2
    bash -c "$input"
done
unset input 
```

当用户使用`Ctrl`+`C`时，我希望它继续读取输入并执行其他命令。问题是当我使用如下命令时：

```
while (true) do echo "Hello!"; done; 
```

`Ctrl`我输入+`C`一次后它不起作用，但我输入几次后它就起作用了。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-07T19:13:51.240

使用以下代码：

```
#!/bin/bash
# type "finish" to exit

stty -echoctl # hide ^C

# function called by trap
other_commands() {
    tput setaf 1
    printf "\rSIGINT caught      "
    tput sgr0
    sleep 1
    printf "\rType a command >>> "
}

trap 'other_commands' SIGINT

input="$@"

while true; do
    printf "\rType a command >>> "
    read input
    [[ $input == finish ]] && break
    bash -c "$input"
done 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-08T08:24:51.023

您需要在不同的进程组中运行命令，最简单的方法是使用作业控制：

```
#!/bin/bash 

# Enable job control
set -m

while :
do
    read -t 10 -p "input> " input
    [[ $input == finish ]] && break

    # set SIGINT to default action
    trap - SIGINT

    # Run the command in background
    bash -c "$input" &

    # Set our signal mask to ignore SIGINT
    trap "" SIGINT

    # Move the command back-into foreground
    fg %-

done 
```

# clojure - core.logic 的动态类型关系

> ID：12771912
> 
> 赞同：1
> 
> 时间：2012-10-07T19:07:37.793
> 
> 标签：clojure, clojure-core.logic, minikanren

在 core.logic 中定义或使用类型关系的最佳方法是什么？

我尝试了类似这样的方法来获得表单参数类型的简化表示，但是项目使用会导致各种问题

```
(defn typeo
  [form type]
  (project [form]
    (== type (-> form .getClass .getSimpleName .toLowerCase symbol)))) 
```

是否已经存在可用的适当关系，还是我应该以不同的方式表达？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:01:05.097

这当然有效，但在调用这个目标`project`之前`form`绝对必须先接地。

# php - PHP 网页抓取

> ID：12771916
> 
> 赞同：-3
> 
> 时间：2012-10-07T19:08:16.903
> 
> 标签：php, web-scraping

我想要 PHP 字符串变量的所有 url。

```
 $html = '<body>...<a href="foo-1">more</a>...<a href="foo-2">more</a>...<a href="foo-3">more</a>...<a href="foo-4">more</a></body>';
    // ? 
```

一直以来“更多”这个“a”元素的内容。我需要：数组（'foo-1'、'foo-2'、'foo-3'、'foo-4'）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:15:38.253

For web scraping in PHP, I would suggest using [Goutte](https://github.com/fabpot/Goutte).

It's a dedicated PHP screen scraping component. Does all the hard work for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T19:10:52.707

你的问题不是很具体

您可以使用[simplehtmldom抓取网站](http://simplehtmldom.sourceforge.net/)

文档很简单

# java - Android：如何获取已安装应用程序的列表并将其显示给用户

> ID：12771919
> 
> 赞同：1
> 
> 时间：2012-10-07T19:08:28.860
> 
> 标签：java, android, listview, flags, intentfilter

我查看了许多不同的代码变体，了解如何获取已安装应用程序的列表并将它们在 ListView 中显示给用户，但对我来说没有一个成功。我想知道的是如何执行此操作以及如何向其中添加标志（？），以便我可以列出具有不同意图过滤器（例如 LONG_SEARCH_BUTTON）的窗帘应用程序，并能够查看包和启动器该应用程序的类..如果这样做可以吗？

如果有人不介意分享他们的知识，我想要一个完整的 java 类，因为尝试拼凑一些代码变得非常有压力！我已经编写 android 代码几个月了，所以我知道大部分基本的东西（我想……），但以前没有做过这样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T20:07:10.677

我已经编写了一个简短的应用程序，它正是这样做的......在[**这里查看**](http://www.androiddesignpatterns.com/2012/09/tutorial-loader-loadermanager.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T20:05:31.160

这是来自 Android 文档的示例代码。请根据您的要求进行创意。

> /** * 这个类在我们的加载器中保存每个项目的数据。*/ public static class AppEntry { public AppEntry(AppListLoader loader, ApplicationInfo info) { mLoader = loader; mInfo = 信息；mApkFile = 新文件（info.sourceDir）；}
> 
> ```
> public ApplicationInfo getApplicationInfo() {
>     return mInfo;
> }
> 
> public String getLabel() {
>     return mLabel;
> }
> 
> public Drawable getIcon() {
>     if (mIcon == null) {
>         if (mApkFile.exists()) {
>             mIcon = mInfo.loadIcon(mLoader.mPm);
>             return mIcon;
>         } else {
>             mMounted = false;
>         }
>     } else if (!mMounted) {
>         // If the app wasn't mounted but is now mounted, reload
>         // its icon.
>         if (mApkFile.exists()) {
>             mMounted = true;
>             mIcon = mInfo.loadIcon(mLoader.mPm);
>             return mIcon;
>         }
>     } else {
>         return mIcon;
>     }
> 
>     return mLoader.getContext().getResources().getDrawable(
>             android.R.drawable.sym_def_app_icon);
> }
> 
> @Override public String toString() {
>     return mLabel;
> }
> 
> void loadLabel(Context context) {
>     if (mLabel == null || !mMounted) {
>         if (!mApkFile.exists()) {
>             mMounted = false;
>             mLabel = mInfo.packageName;
>         } else {
>             mMounted = true;
>             CharSequence label = mInfo.loadLabel(context.getPackageManager());
>             mLabel = label != null ? label.toString() : mInfo.packageName;
>         }
>     }
> }
> 
> private final AppListLoader mLoader;
> private final ApplicationInfo mInfo;
> private final File mApkFile;
> private String mLabel;
> private Drawable mIcon;
> private boolean mMounted; } 
> ```
> 
> /** * 执行应用程序条目对象的字母比较。*/ public static final Comparator ALPHA_COMPARATOR = new Comparator() { private final Collat​​or sCollat​​or = Collat​​or.getInstance(); @Override public int compare(AppEntry object1, AppEntry object2) { return sCollat​​or.compare(object1.getLabel(), object2.getLabel()); } };
> 
> /** * Helper 用于确定配置是否以有趣的方式更改 * 因此我们需要重建应用程序列表。*/ public static class InterestingConfigChanges { final Configuration mLastConfiguration = new Configuration(); int mLastDensity;
> 
> ```
> boolean applyNewConfig(Resources res) {
>     int configChanges = mLastConfiguration.updateFrom(res.getConfiguration());
>     boolean densityChanged = mLastDensity != res.getDisplayMetrics().densityDpi;
>     if (densityChanged || (configChanges&(ActivityInfo.CONFIG_LOCALE
>             |ActivityInfo.CONFIG_UI_MODE|ActivityInfo.CONFIG_SCREEN_LAYOUT)) != 0) 
> ```
> 
> { mLastDensity = res.getDisplayMetrics().densityDpi; 返回真；} 返回假；} }
> 
> /** * 帮助类查找已安装应用程序的有趣更改 * 以便可以更新加载程序。*/ public static class PackageIntentReceiver extends BroadcastReceiver { final AppListLoader mLoader;
> 
> ```
> public PackageIntentReceiver(AppListLoader loader) {
>     mLoader = loader;
>     IntentFilter filter = new IntentFilter(Intent.ACTION_PACKAGE_ADDED);
>     filter.addAction(Intent.ACTION_PACKAGE_REMOVED);
>     filter.addAction(Intent.ACTION_PACKAGE_CHANGED);
>     filter.addDataScheme("package");
>     mLoader.getContext().registerReceiver(this, filter);
>     // Register for events related to sdcard installation.
>     IntentFilter sdFilter = new IntentFilter();
>     sdFilter.addAction(Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE);
>     sdFilter.addAction(Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE);
>     mLoader.getContext().registerReceiver(this, sdFilter);
> }
> 
> @Override public void onReceive(Context context, Intent intent) {
>     // Tell the loader about the change.
>     mLoader.onContentChanged();
> } } 
> ```
> 
> /** * 加载所有已安装应用程序的自定义加载程序。*/ public static class AppListLoader extends AsyncTaskLoader> { final InterestingConfigChanges mLastConfig = new InterestingConfigChanges(); 最终的 PackageManager mPm；
> 
> ```
> List<AppEntry> mApps;
> PackageIntentReceiver mPackageObserver;
> 
> public AppListLoader(Context context) {
>     super(context);
> 
>     // Retrieve the package manager for later use; note we don't
>     // use 'context' directly but instead the save global application
>     // context returned by getContext().
>     mPm = getContext().getPackageManager();
> }
> 
> /**
>  * This is where the bulk of our work is done.  This function is
>  * called in a background thread and should generate a new set of
>  * data to be published by the loader.
>  */
> @Override public List<AppEntry> loadInBackground() {
>     // Retrieve all known applications.
>     List<ApplicationInfo> apps = mPm.getInstalledApplications(
>             PackageManager.GET_UNINSTALLED_PACKAGES |
>             PackageManager.GET_DISABLED_COMPONENTS);
>     if (apps == null) {
>         apps = new ArrayList<ApplicationInfo>();
>     }
> 
>     final Context context = getContext();
> 
>     // Create corresponding array of entries and load their labels.
>     List<AppEntry> entries = new ArrayList<AppEntry>(apps.size());
>     for (int i=0; i<apps.size(); i++) {
>         AppEntry entry = new AppEntry(this, apps.get(i));
>         entry.loadLabel(context);
>         entries.add(entry);
>     }
> 
>     // Sort the list.
>     Collections.sort(entries, ALPHA_COMPARATOR);
> 
>     // Done!
>     return entries;
> }
> 
> /**
>  * Called when there is new data to deliver to the client.  The
>  * super class will take care of delivering it; the implementation
>  * here just adds a little more logic.
>  */
> @Override public void deliverResult(List<AppEntry> apps) {
>     if (isReset()) {
>         // An async query came in while the loader is stopped.  We
>         // don't need the result.
>         if (apps != null) {
>             onReleaseResources(apps);
>         }
>     }
>     List<AppEntry> oldApps = apps;
>     mApps = apps;
> 
>     if (isStarted()) {
>         // If the Loader is currently started, we can immediately
>         // deliver its results.
>         super.deliverResult(apps);
>     }
> 
>     // At this point we can release the resources associated with
>     // 'oldApps' if needed; now that the new result is delivered we
>     // know that it is no longer in use.
>     if (oldApps != null) {
>         onReleaseResources(oldApps);
>     }
> }
> 
> /**
>  * Handles a request to start the Loader.
>  */
> @Override protected void onStartLoading() {
>     if (mApps != null) {
>         // If we currently have a result available, deliver it
>         // immediately.
>         deliverResult(mApps);
>     }
> 
>     // Start watching for changes in the app data.
>     if (mPackageObserver == null) {
>         mPackageObserver = new PackageIntentReceiver(this);
>     }
> 
>     // Has something interesting in the configuration changed since we
>     // last built the app list?
>     boolean configChange = mLastConfig.applyNewConfig(getContext().getResources());
> 
>     if (takeContentChanged() || mApps == null || configChange) {
>         // If the data has changed since the last time it was loaded
>         // or is not currently available, start a load.
>         forceLoad();
>     }
> }
> 
> /**
>  * Handles a request to stop the Loader.
>  */
> @Override protected void onStopLoading() {
>     // Attempt to cancel the current load task if possible.
>     cancelLoad();
> }
> 
> /**
>  * Handles a request to cancel a load.
>  */
> @Override public void onCanceled(List<AppEntry> apps) {
>     super.onCanceled(apps);
> 
>     // At this point we can release the resources associated with 'apps'
>     // if needed.
>     onReleaseResources(apps);
> }
> 
> /**
>  * Handles a request to completely reset the Loader.
>  */
> @Override protected void onReset() {
>     super.onReset();
> 
>     // Ensure the loader is stopped
>     onStopLoading();
> 
>     // At this point we can release the resources associated with 'apps'
>     // if needed.
>     if (mApps != null) {
>         onReleaseResources(mApps);
>         mApps = null;
>     }
> 
>     // Stop monitoring for changes.
>     if (mPackageObserver != null) {
>         getContext().unregisterReceiver(mPackageObserver);
>         mPackageObserver = null;
>     }
> }
> 
> /**
>  * Helper function to take care of releasing resources associated
>  * with an actively loaded data set.
>  */
> protected void onReleaseResources(List<AppEntry> apps) {
>     // For a simple List<> there is nothing to do.  For something
>     // like a Cursor, we would close it here.
> } } 
> ```

下面是使用上述加载器在列表中显示当前安装的应用程序的片段的示例实现。

> 公共静态类 AppListAdapter 扩展 ArrayAdapter { private final LayoutInflater mInflater;
> 
> ```
> public AppListAdapter(Context context) {
>     super(context, android.R.layout.simple_list_item_2);
>     mInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
> }
> 
> public void setData(List<AppEntry> data) {
>     clear();
>     if (data != null) {
>         addAll(data);
>     }
> }
> 
> /**
>  * Populate new items in the list.
>  */
> @Override public View getView(int position, View convertView, ViewGroup parent) {
>     View view;
> 
>     if (convertView == null) {
>         view = mInflater.inflate(R.layout.list_item_icon_text, parent, false);
>     } else {
>         view = convertView;
>     }
> 
>     AppEntry item = getItem(position);
>     ((ImageView)view.findViewById(R.id.icon)).setImageDrawable(item.getIcon());
>     ((TextView)view.findViewById(R.id.text)).setText(item.getLabel());
> 
>     return view;
> } } 
> ```
> 
> 公共静态类 AppListFragment 扩展 ListFragment 实现 OnQueryTextListener、LoaderManager.LoaderCallbacks> {
> 
> ```
> // This is the Adapter being used to display the list's data.
> AppListAdapter mAdapter;
> 
> // If non-null, this is the current filter the user has provided.
> String mCurFilter;
> 
> @Override public void onActivityCreated(Bundle savedInstanceState) {
>     super.onActivityCreated(savedInstanceState);
> 
>     // Give some text to display if there is no data.  In a real
>     // application this would come from a resource.
>     setEmptyText("No applications");
> 
>     // We have a menu item to show in action bar.
>     setHasOptionsMenu(true);
> 
>     // Create an empty adapter we will use to display the loaded data.
>     mAdapter = new AppListAdapter(getActivity());
>     setListAdapter(mAdapter);
> 
>     // Start out with a progress indicator.
>     setListShown(false);
> 
>     // Prepare the loader.  Either re-connect with an existing one,
>     // or start a new one.
>     getLoaderManager().initLoader(0, null, this);
> }
> 
> @Override public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
>     // Place an action bar item for searching.
>     MenuItem item = menu.add("Search");
>     item.setIcon(android.R.drawable.ic_menu_search);
>     item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM
>             | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
>     SearchView sv = new SearchView(getActivity());
>     sv.setOnQueryTextListener(this);
>     item.setActionView(sv);
> }
> 
> @Override public boolean onQueryTextChange(String newText) {
>     // Called when the action bar search text has changed.  Since this
>     // is a simple array adapter, we can just have it do the filtering.
>     mCurFilter = !TextUtils.isEmpty(newText) ? newText : null;
>     mAdapter.getFilter().filter(mCurFilter);
>     return true;
> }
> 
> @Override public boolean onQueryTextSubmit(String query) {
>     // Don't care about this.
>     return true;
> }
> 
> @Override public void onListItemClick(ListView l, View v, int position, long id) {
>     // Insert desired behavior here.
>     Log.i("LoaderCustom", "Item clicked: " + id);
> }
> 
> @Override public Loader<List<AppEntry>> onCreateLoader(int id, Bundle args) {
>     // This is called when a new Loader needs to be created.  This
>     // sample only has one Loader with no arguments, so it is simple.
>     return new AppListLoader(getActivity());
> }
> 
> @Override public void onLoadFinished(Loader<List<AppEntry>> loader, List<AppEntry> data) {
>     // Set the new data in the adapter.
>     mAdapter.setData(data);
> 
>     // The list should now be shown.
>     if (isResumed()) {
>         setListShown(true);
>     } else {
>         setListShownNoAnimation(true);
>     }
> }
> 
> @Override public void onLoaderReset(Loader<List<AppEntry>> loader) {
>     // Clear the data in the adapter.
>     mAdapter.setData(null);
> } } 
> ```

# db2 - 我们可以通过更新记录的序列号 3 次来编辑一行，同时将这 3 个记录插入到数组中并插入到表中吗？

> ID：12771923
> 
> 赞同：0
> 
> 时间：2012-10-07T19:08:59.233
> 
> 标签：db2, cobol

假设我从表中获取有效行，`marks_colm = '300'`我们得到 100 行

对于每个提取的行，我想：

1.  创建 3 个新行：
2.  将 sequence_column 的最大计数增加 +1 设置标记 ='350'
3.  再次将 sequence_column 的最大计数增加 +1 设置标记 ='351'
4.  再次将 sequence_column 的最大计数增加 +1 设置标记 ='352'
5.  将这三行复制到一个数组..
6.  将整个数组插入表中

示例输入行：

```
Name1 ... RollNo31.... sequence5 ... marks300 
```

对于上面的输入行，输出应该是 3 个输出行

```
Name1 ... RollNo31.... sequence6 ... marks350
Name1 ... RollNo31.... sequence7 ... marks351
Name1 ... RollNo31.... sequence8 ... marks352 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T01:33:42.490

[我相信您可以使用multi-row insert](https://www.ibm.com/docs/en/db2-for-zos/12?topic=statements-insert)实现您的目标。请注意，由于您插入多行可能会遇到多个错误，因此您必须使用[get diagnostics 语句](https://www.ibm.com/docs/en/db2-for-zos/12?topic=statements-get-diagnostics)来检索可能发生的任何错误的详细信息，[DSNTIAR](https://www.ibm.com/docs/en/db2-for-zos/12?topic=dsntiar-)将不足。

# .net - 应用配置不同的项目最佳实践

> ID：12771928
> 
> 赞同：0
> 
> 时间：2012-10-07T19:09:19.787
> 
> 标签：.net, configuration

默认情况下，被加载的 app.config 是项目中包含应用程序入口点的那个。

现在数据访问代码关心 RDBMS（Oracle、SQL 等）。如果我将连接字符串存储在 DAL 项目而不是启动项目中，它将删除 DAL 和启动项目之间的依赖关系。但根据经验，我知道连接字符串始终存储在启动项目中。

存储连接字符串的推荐项目（数据访问层的启动）是什么？如果是启动项目，启动和 DAL 之间产生的依赖关系是否可以接受？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:07:15.190

您好：如果您希望将演示文稿与存储库分离，那么您希望（需要）将此类信息存储在存储库/DAL 项目中。因此，初创项目总是拥有这些信息是不正确的。例如，使用实体框架，您将在该层（通常是存储库或 DAL）中找到 app.config 的连接字符串版本。

将数据库的连接字符串存储在 web.config 文件中是很常见的，但这仅仅是因为您的表示层与存储库之间存在一对一的关系。我倾向于使用数据层或服务层的 app.config 文件，并且在执行单元测试时不需要包含我的表示层。

# string - 在 Go 中生成长随机字符串的最快方法是什么？

> ID：12771930
> 
> 赞同：15
> 
> 时间：2012-10-07T19:09:30.523
> 
> 标签：string, random, go

像 [a-zA-Z0-9] 字符串：

*na1dopW129T0anN28udaZ*

或十六进制字符串：

*8c6f78ac23b4a7b8c0182d*

长我的意思是2K和更多的字符。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-10T00:26:46.503

这在我的盒子上大约 200MBps。有明显的改进空间。

```
type randomDataMaker struct {
    src rand.Source
}

func (r *randomDataMaker) Read(p []byte) (n int, err error) {
    for i := range p {
        p[i] = byte(r.src.Int63() & 0xff)
    }
    return len(p), nil
} 
```

你只需要`io.CopyN`用来产生你想要的字符串。显然，您可以在途中或其他任何地方调整字符集。

这个模型的好处是它只是一个，`io.Reader`所以你可以用它来做任何事情。

测试如下：

```
func BenchmarkRandomDataMaker(b *testing.B) {
    randomSrc := randomDataMaker{rand.NewSource(1028890720402726901)}
    for i := 0; i < b.N; i++ {
        b.SetBytes(int64(i))
        _, err := io.CopyN(ioutil.Discard, &randomSrc, int64(i))
        if err != nil {
            b.Fatalf("Error copying at %v: %v", i, err)
        }
    }
} 
```

在我的 2.2GHz i7 的一个核心上：

```
BenchmarkRandomDataMaker       50000        246512 ns/op     202.83 MB/s 
```

**编辑**

自从我编写了基准，我想我会做明显的改进（不那么频繁地调用随机数）。使用 1/8 的 rand 调用，它的运行速度提高了大约 4 倍，尽管它更丑：

新版本：

```
func (r *randomDataMaker) Read(p []byte) (n int, err error) {
    todo := len(p)
    offset := 0
    for {
        val := int64(r.src.Int63())
        for i := 0; i < 8; i++ {
            p[offset] = byte(val & 0xff)
            todo--
            if todo == 0 {
                return len(p), nil
            }
            offset++
            val >>= 8
        }
    }

    panic("unreachable")
} 
```

新基准：

```
BenchmarkRandomDataMaker      200000        251148 ns/op     796.34 MB/s 
```

**编辑 2**

因为它是多余的，所以去掉了转换为字节的掩码。更快地获得一笔好交易：

```
BenchmarkRandomDataMaker      200000        231843 ns/op     862.64 MB/s 
```

（这比真正的工作要容易*得多*）

**编辑 3**

这出现在 irc 今天，所以我发布了一个库。此外，我的实际基准测试工具虽然对相对速度有用，但其报告不够准确。

我创建了[randbo](https://github.com/dustin/randbo)，您可以在任何需要的地方重复使用它来生成随机流。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-07T20:43:55.160

您可以使用 Go 包[uniuri](https://github.com/dchest/uniuri)生成随机字符串（或查看源代码以了解他们是如何做到的）。你会想要使用：

```
func NewLen(length int) string 
```

> NewLen 返回一个由标准字符组成的具有所提供长度的新随机字符串。

或者，指定使用的字符集：

```
func NewLenChars(length int, chars []byte) string 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-10-07T20:37:38.890

这实际上有点偏向于集合中的前 8 个字符（因为 255 不是 的倍数`len(alphanum)`），但这会让你大部分时间到达那里。

```
import (
    "crypto/rand"
)

func randString(n int) string {
    const alphanum = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"
    var bytes = make([]byte, n)
    rand.Read(bytes)
    for i, b := range bytes {
        bytes[i] = alphanum[b % byte(len(alphanum))]
    }
    return string(bytes)
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T07:57:47.850

在这里，Evan Shaw 的答案重新工作，没有偏向字符串的前 8 个字符。请注意，它使用了许多昂贵的`big.Int`操作，所以可能不是那么快！答案是加密货币强。

它用于`rand.Int`生成一个大小正好合适的整数`len(alphanum) ** n`，然后进行有效的 base 转换为 base `len(alphanum)`。

几乎可以肯定有一个更好的算法来解决这个问题，它需要保留一个小得多的余数，并在必要时向其中添加随机字节。这将摆脱昂贵的长整数运算。

```
import (
    "crypto/rand"
    "fmt"
    "math/big"
)

func randString(n int) string {
    const alphanum = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"
    symbols := big.NewInt(int64(len(alphanum)))
    states := big.NewInt(0)
    states.Exp(symbols, big.NewInt(int64(n)), nil)
    r, err := rand.Int(rand.Reader, states)
    if err != nil {
        panic(err)
    }
    var bytes = make([]byte, n)
    r2 := big.NewInt(0)
    symbol := big.NewInt(0)
    for i := range bytes {
        r2.DivMod(r, symbols, symbol)
        r, r2 = r2, r
        bytes[i] = alphanum[symbol.Int64()]
    }
    return string(bytes)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-19T02:43:29.743

如果你想生成加密安全的随机字符串，我建议你看看[这个页面](https://elithrar.github.io/article/generating-secure-random-numbers-crypto-rand/)。这是一个辅助函数，它从操作系统的随机源中读取`n`随机字节，然后使用这些字节对其进行 base64 编码。请注意，字符串长度会比`n`base64 大。

```
package main

import(
    "crypto/rand"
    "encoding/base64"
    "fmt"
)

func GenerateRandomBytes(n int) ([]byte, error) {
    b := make([]byte, n)
    _, err := rand.Read(b)
    if err != nil {
        return nil, err
    }

    return b, nil
}

func GenerateRandomString(s int) (string, error) {
    b, err := GenerateRandomBytes(s)
    return base64.URLEncoding.EncodeToString(b), err
}

func main() {
    token, _ := GenerateRandomString(32)
    fmt.Println(token)
} 
```

# mysql - 加速 tokudb “alter table ... engine=TokuDB”

> ID：12771932
> 
> 赞同：3
> 
> 时间：2012-10-07T19:09:33.193
> 
> 标签：mysql, tokudb

我正在尝试将 4 亿行的 Innodb 表转换为 tokudb 引擎。当我从一开始`"alter table ... engine=TokuDB"`运行得非常快的事情开始时，（使用 SHOW PROCESSLIST）我看到它每 10 秒读取大约 100 万行。但是一旦我达到大约 19-2000 万行，它就会开始减慢读取速度，并且更像是每隔几秒就有 10k 行。

是否有任何影响`ALTER TABLE`to tokudb 工作速度的 mysql 或 tokudb 变量？我尝试了`tmp_table_size`和其他一些，但似乎无法克服这个障碍。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-24T00:09:35.383

对我来说，解决方案是导出“到 outfile”并导入“load data infile”

这对我来说要快几个数量级（1.1 亿条记录）。每次我修改大型 tokudb 数据库（更改表）时，都需要很长时间（~30k/sec）。完全导出和导入 (~500k/sec) 的速度更快，将更改表时间从几小时缩短到几分钟。

从 innodb 转换或更改本机 tokudb（任何更改表）时都是如此。

```
select a.*,calcfields from table1 a into outfile 'temp.txt';
create table table2 .....<br>
load data infile 'temp.txt' into table table2 (field1,field2,...); 
```

`row_format=tokudb_lzma`ps：用或)尝试创建表`tokudb_uncompressed`。您可以快速尝试 3 种方法（您需要执行操作系统级别的目录 ls 来查看大小）。我发现离线索引也有帮助。

```
set tokudb_create_index_online=off;
create clustering index field1 on table2(field1); (much faster) 
```

当您了解何时使用多个集群索引时，它们可以带来天壤之别。

我正在使用 GUI 工具来更改表以进行索引更改（每次等待数小时）手工这样做会使事情变得更有效率（我花了几天时间通过 GUI 无处可去，在 30 分钟内完成）

使用 5.5.30-tokudb-7.0.1-MariaDB 并且非常开心。

希望这可以在实验时对其他人有所帮助。对于原始提问者来说显然已经很晚了。唯一现有的回应对我来说根本没有建设性。（问题是）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T19:42:56.573

以下是重要变量，请确保在开始操作之前全局设置它们或在执行存储引擎更改的会话中本地设置它们：

*   tokudb_load_save_space ：默认关闭，除非您的磁盘空间不足，否则应该单独放置。
*   tokudb_cache_size ：如果取消设置，TokuDB 将为其自己的缓存机制分配 50% 的 RAM，我们通常建议不要使用此设置。当您在现有服务器上运行时，您需要确保不会在 TokuDB、InnoDB 和 MyISAM 之间过度使用内存。

# c++ - “不能用作函数”错误

> ID：12771933
> 
> 赞同：-2
> 
> 时间：2012-10-07T19:09:40.300
> 
> 标签：c++, cygwin

请看下面的代码

```
#include <iostream>
#include <iomanip>
#include <vector>

using namespace std;

bool multiple(int,int);
void isMul(vector);

vector <int> numbers;
int enterNumber = 0;

int main()
{
    cout << "Enter numbers (-1 to stop entering; -2 to exit)" << endl;

    cin >> enterNumber;

    while(true)
    {
        if(enterNumber==-1)
        {
            isMul(numbers);
            break;
        }
        else
        {
                numbers.push_back(enterNumber);
                cin >> enterNumber;
        }
    }
}

bool multiple(int number1, int number2)
{
    if(number2%number1 == 0)
    {
        return true;
    }
    else
    {
        return false;
    }
}

void isMul(vector numbers)
{
    cout << "First Number" << setw(10) << "Second Number" << setw(10) << "isMultiplication" << endl;

    for(size_t size=0;size<numbers.size();size+2)
    {
        cout << numbers[size] << setw(12) << numbers[size+1] << setw(12) << multiple(size,size+1);
    }
} 
```

运行此代码时出现以下错误

```
"/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
make[1]: Entering directory `/cygdrive/c/Users/yohan/Documents/NetBeansProjects/Excersice 6.1'
"/usr/bin/make"  -f nbproject/Makefile-Debug.mk dist/Debug/Cygwin-Windows/excersice_6.1.exe
make[2]: Entering directory `/cygdrive/c/Users/yohan/Documents/NetBeansProjects/Excersice 6.1'
mkdir -p build/Debug/Cygwin-Windows
rm -f build/Debug/Cygwin-Windows/Multiple.o.d
g++    -c -g -MMD -MP -MF build/Debug/Cygwin-Windows/Multiple.o.d -o build/Debug/Cygwin-Windows/Multiple.o Multiple.cpp
Multiple.cpp:8: error: variable or field `isMul' declared void
Multiple.cpp:8: error: missing template arguments before ')' token
Multiple.cpp: In function `int main()':
Multiple.cpp:26: error: `isMul' cannot be used as a function
Multiple.cpp: At global scope:
Multiple.cpp:51: error: variable or field `isMul' declared void
Multiple.cpp:51: error: redefinition of `int isMul'
Multiple.cpp:8: error: `int isMul' previously defined here
Multiple.cpp:51: error: missing template arguments before "numbers"
Multiple.cpp:52: error: expected `,' or `;' before '{' token
make[2]: *** [build/Debug/Cygwin-Windows/Multiple.o] Error 1
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2
nbproject/Makefile-Debug.mk:71: recipe for target `build/Debug/Cygwin-Windows/Multiple.o' failed
make[2]: Leaving directory `/cygdrive/c/Users/yohan/Documents/NetBeansProjects/Excersice 6.1'
nbproject/Makefile-Debug.mk:59: recipe for target `.build-conf' failed
make[1]: Leaving directory `/cygdrive/c/Users/yohan/Documents/NetBeansProjects/Excersice 6.1'
nbproject/Makefile-impl.mk:39: recipe for target `.build-impl' failed

BUILD FAILED (exit value 2, total time: 1s) 
```

为什么是这样？无论如何，我是 C++ 新手。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T19:13:30.213

```
Multiple.cpp:8: error: variable or field `isMul' declared void
Multiple.cpp:8: error: missing template arguments before ')' token 
```

[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)是模板，不是完整的类型；你必须专门`isMul`化的参数类型：

```
void isMul(vector<int>); 
```

你应该做的*真正*的事情是在书中的“基本”部分中获取任何讨论模板的书，阅读它，然后 - 并且只有这样 - 继续编程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T19:13:45.547

问题是你没有给出向量的类型：

```
void isMul(vector); 
```

如果你想要一个特定的类型，比如 ints，你需要：

```
void isMul(vector<int>); 
```

如果您想对其进行模板化，您应该这样做：

```
template<class T> void isMul(vector<T>); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T19:13:24.000

您可能应该阅读一些示例或文档。没有像`vector`类型这样的东西，它是一个模板。您想`vector<int>`用作参数类型，而不仅仅是`vector`表示整数向量。就像定义向量时所做的一样。

# javascript - $ 在 JavaScript 中是什么意思，如何在 Win8 应用程序中替换它？

> ID：12771940
> 
> 赞同：1
> 
> 时间：2012-10-07T19:10:48.340
> 
> 标签：javascript, windows-8, microsoft-metro

示例：

```
 JsDatePick.prototype.setC = function(obj, aClassName){
        if (this.isie && this.iever > 7){
            $(obj).attr("class", aClassName);
        } else {
            obj.className = aClassName;
        }
    }; 
```

来源：http: [//javascriptcalendar.org/](http://javascriptcalendar.org/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T19:12:24.503

它是一个变量名。它在语言中没有特殊含义。

许多库（包括 jQuery 和 Prototype.js）将它们的主要功能挂在上面。

在您可以替换它之前（在一般范围内），您必须首先确定哪段代码正在为其分配值。

在这种特殊情况下，您可以忘记它，因为所有支持以编程方式设置类属性的浏览器也支持设置`className`属性（else 子句所做的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:16:29.850

Did you read the site?

> Download includes jsDatePick standard full/minified, and jsDatePick for jQuery full/minified.

They already have a non jQuery version.

# payment-gateway - “不允许在保留中执行创建”

> ID：12771942
> 
> 赞同：2
> 
> 时间：2012-10-07T19:10:54.163
> 
> 标签：payment-gateway, balanced-payments

我可以创建一张卡并使用该新卡创建一个帐户，但是当我尝试创建一个保留时，我收到一个 401 错误说`Not permitted to perform create on holds`

我正在使用`balanced.js`创建卡，然后将其发送`card_uri`到我的应用程序。

然后我通过`POST`ing创建一个帐户

```
{
"uri": card_uri,
"email_address":"xxx@yyy.com"
} 
```

`https://api.balancedpayments.com/v1/marketplaces/MYTESTMARKETURI/accounts?MYTESTMARKETSECRETKEY`我收到这样的回复：

```
{
"holds_uri": "/v1/marketplaces/MYTESTMARKETURI/accounts/AC6uOkhFTsOMpvY8zAvjnBtu/holds",
"name": null,
"roles": [],
"created_at": ...,
"uri": ...,
"bank_accounts_uri": ...,
"refunds_uri": ...,
"meta": {},
"debits_uri": ..,
"transactions_uri": ...,
"email_address": "xxx@yyy.com",
"id": "AC6uOkhFTsOMpvY8zAvjnBtu",
"credits_uri": ...,
"cards_uri": ...
} 
```

并且带有新卡的新帐户会显示在我在 balancepayments.com 上的仪表板[中](http://www.balancedpayments.com)。

当我尝试通过`POST`ing创建保留时

```
{
"amount": 200
} 
```

我`https://api.balancedpayments.com/v1/marketplaces/MYTESTMARKETURI/accounts/AC6uOkhFTsOMpvY8zAvjnBtu/holds?MYTESTMARKETSECRETKEY`收到以下错误：

```
{
"status": "Unauthorized",
"category_code": "authentication-required",
"category_type": "permission",
"description": "Not permitted to perform create on holds. Your request id is OHMf82dbd8e10a811e29f5d026ba7d31e6f.",
"request_id": "OHMf82dbd8e10a811e29f5d026ba7d31e6f",
"status_code": 401
} 
```

我究竟做错了什么？如何使用 BalancedPayments.com REST API 创建保留？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T05:32:48.330

**401**表示您在发出创建保留请求时未进行身份验证。

您需要使用[基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)标头，而不是在查询字符串中包含*MYTESTMARKETSECRETKEY*。

我不确定您使用的是哪个平衡客户端（它们为您包含该标头，您只需告诉它您的*MYTESTMARKETSECRETKEY*）但对于 curl 请求将是：

```
curl -u MYTESTMARKETSECRETKEY：https://api.balancedpayments.com/v1/marketplaces
/MYTESTMARKETURI/accounts/AC6uOkhFTsOMpvY8zAvjnBtu/holds -x POST -d amount=200
```

响应如下：

```
{
  "account": {
    "holds_uri": "/v1/marketplaces/MKxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx/accounts/ACxxxxxxxxxxxxxxxxxxxxxx/holds", 
    "name": "xxxx",
    "roles": [
      "buyer"
    ], 
    "created_at": "2012-07-28T23:12:15.859231Z", 
    "uri": "/v1/marketplaces/MKxxxxxxxxxxxxxxxxxxxxxx/accounts/ACxxxxxxxxxxxxxxxxxxxxxx", 
    "bank_accounts_uri": "/v1/marketplaces/MKxxxxxxxxxxxxxxxxxxxxxx/accounts/ACxxxxxxxxxxxxxxxxxxxxxx/bank_accounts", 
    "refunds_uri": "/v1/marketplaces/MKxxxxxxxxxxxxxxxxxxxxxx/accounts/ACxxxxxxxxxxxxxxxxxxxxxx/refunds", 
    "meta": {}, 
    "debits_uri": "/v1/marketplaces/MKxxxxxxxxxxxxxxxxxxxxxx/accounts/ACxxxxxxxxxxxxxxxxxxxxxx/debits", 
    "transactions_uri": "/v1/marketplaces/MKxxxxxxxxxxxxxxxxxxxxxx/accounts/ACxxxxxxxxxxxxxxxxxxxxxx/transactions", 
    "email_address": "xxxxxxxx@xxxxxx.com", 
    "id": "ACxxxxxxxxxxxxxxxxxxxxxx", 
    "credits_uri": "/v1/marketplaces/MKxxxxxxxxxxxxxxxxxxxxxx/accounts/ACxxxxxxxxxxxxxxxxxxxxxx/credits", 
    "cards_uri": "/v1/marketplaces/MKxxxxxxxxxxxxxxxxxxxxxx/accounts/ACxxxxxxxxxxxxxxxxxxxxxx/cards"
  }, 
  "fee": 35, 
  "description": null, 
  "amount": 123, 
  "created_at": "2012-10-08T05:23:20.943961Z", 
  "uri": "/v1/marketplaces/MKxxxxxxxxxxxxxxxxxxxxxx/holds/HLxxxxxxxxxxxxxxxxxxxxxx", 
  "expires_at": "2012-10-15T05:23:20.876214Z", 
  "source": {
    "card_type": "xxxx"
    "hash": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", 
    "country_code": "USA", 
    "expiration_year": xxxx, 
    "created_at": "2012-09-03T01:08:31.530261Z", 
    "brand": "xxxx",
    "uri": "/v1/marketplaces/MKxxxxxxxxxxxxxxxxxxxxxx/accounts/ACxxxxxxxxxxxxxxxxxxxxxx/cards/CCxxxxxxxxxxxxxxxxxxxxxx", 
    "expiration_month": x, 
    "is_valid": true, 
    "meta": {}, 
    "last_four": "xxxx", 
    "postal_code": "xxxxx", 
    "id": "CCxxxxxxxxxxxxxxxxxxxxxx", 
    "street_address": "xxxxxxxxxxx", 
    "name": "xxxxxxxxx"
  }, 
  "transaction_number": "HLxxx-xxx-xxxx", 
  "meta": {}, 
  "is_void": false, 
  "debit": null, 
  "id": "HLxxxxxxxxxxxxxxxxxxxxxx"
} 
```

# php - file_exists() 和 file_get_contents() 在安装的网络驱动器上的文件上失败

> ID：12771944
> 
> 赞同：1
> 
> 时间：2012-10-07T19:10:57.807
> 
> 标签：php, windows, file, filesystems, nfs

很不言自明。例如，文件 (AB.txt) 在我的 C 驱动器和我 (NFS) 安装的 W 驱动器上。Windows 7 x64 操作系统顺便说一句。

```
function fileExists($path){
     return (@fopen($path,"r")==true);
 }

var_dump(fileExists('C:\AB.txt'));
var_dump(fileExists('W:\AB.txt'));
var_dump(file_exists('C:\AB.txt'));
var_dump(file_exists('W:\AB.txt')); 
```

给

> 布尔真
> dir='ltr'>布尔假
> 
> 布尔真
> dir='ltr'>布尔假

我无法在 php wiki 或使用 Google 搜索时找到此行为的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:16:57.713

If you are trying to access a Windows Network Share you have to configure your WebServer with enough permissions for example:

```
$file = fopen("\\siscomx17\c\websapp.log",'r'); 
```

You will get an error telling you that the pathname doesnt exist this will be because Apache or IIS run as LocalSystem so you will have to enter to Services and configure Apache on "Open a session as" Create a new user that has enough permissions and also be sure that target share has the proper permissions.

# mingw - 在 Eclipse CDT 中保存项目（构建）设置

> ID：12771947
> 
> 赞同：1
> 
> 时间：2012-10-07T19:10:41.570
> 
> 标签：mingw, eclipse-cdt

CDT（Juno）中是否有一个选项可以为我的项目设置自定义的“发布”配置？

我现在要做的就是能够创建一个新的 C++ 项目，并且默认情况下具有编译器和链接器的`-std=c++11`和选项，也许还有一些其他优化标志。每次对每个新程序都这样做并不是什么大麻烦，但我只是想知道，因为我一直在创建很多小程序来更好地了解 C++。`-std=gnu11``-s`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:30:46.477

更改默认模板不是一个好主意。
当您基于具有 10 个更改的模板创建一个新的简单项目时，您必须撤消 10 个修改中的许多。现在可能会错过一项或多项重要设置。

可能这将成为有关 stackoverflow 的新问题的基础。无法构建由 c++ Hello world 示例创建的新项目。

它很快就会变得无聊，为每个项目更改默认项目。因此，创建一个模板项目是有意义的，例如，为您使用的每个架构/工具链创建 Hello World 程序，并为每个新项目制作一个副本。复制项目很简单。

将整个项目名称复制并粘贴到**template-c++11-gnu11**并进行所需的所有更改。从现在开始，只需**复制粘贴并将其重命名为真实的项目名称**。

因此，示例模板将保持其预期的方式。

# android - 什么/哪里是 android ActionBar？

> ID：12771950
> 
> 赞同：2
> 
> 时间：2012-10-07T19:12:02.040
> 
> 标签：android

我以前从未真正处理过安卓设备。我已经阅读了这里的大部分讨论：

[http://developer.android.com/guide/topics/ui/actionbar.html#ActionItems](http://developer.android.com/guide/topics/ui/actionbar.html#ActionItems)

从我收集的信息来看，如果我使用的是 Holo 主题并且我的目标至少是 API 级别 11，我应该在我的应用程序中有一个操作栏。

我究竟如何用键盘打开它？我的模拟器有一个自定义尺寸（8" 平板电脑），我不知道如何查看操作栏：

![在此处输入图像描述](../Images/dd3153eefc50af80f77b8d98bd28e246.png)

正如你在屏幕上看到的，我不知道这个酒吧应该在哪里。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T19:14:38.633

它位于顶部的那个栏，其中包含应用程序标题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:38:20.027

正如我们大多数 android 开发人员 - 我认为 - 仍然希望支持 Froyo，我们中的许多人使用

[actionbarsherlock.com](http://actionbarsherlock.com)

它将 Action Bar 降为 API 2.x - 根据我迄今为止的经验，它是一个很棒的库。

只是提示您开始喜欢操作栏的情况...

# python - 使用 binascii 将十六进制字符串转换为字符串

> ID：12771956
> 
> 赞同：0
> 
> 时间：2012-10-07T19:13:08.210
> 
> 标签：python

通过十六进制字符串，它是一个常规字符串，除了每两个字符代表一些字节，它被映射到一些 ASCII 字符。

所以例如字符串

```
abc 
```

将表示为

```
979899 
```

我正在查看[binascii](http://docs.python.org/library/binascii.html)模块，但真的不知道如何获取十六进制字符串并将其转换回 ascii 字符串。我可以使用哪种方法？

注意：我开始`979899`并希望将其转换回`abc`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T19:16:30.240

You can use `ord()` to get the integer value of each character:

```
>>> map(ord, 'abc')
[97, 98, 99]
>>> ''.join(map(lambda c: str(ord(c)), 'asd'))
'979899'
>>> ''.join((str(ord(c)) for c in 'abc'))
'979899' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T19:16:24.827

You don't need binascii to get the integer representation of a character in a string, all you need is the built in function `ord()`.

```
s = 'abc'
print(''.join(map(lambda x:str(ord(x)),s)))  # outputs "979899" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T19:21:50.523

要从十六进制数中取回字符串，您可以使用

```
s=str(616263)
print "".join([chr(int(s[x:x+2], 16)) for x in range(0,len(s),2)]) 
```

见[http://ideone.com/dupgs](http://ideone.com/dupgs)

# python - Python骰子模拟

> ID：12771961
> 
> 赞同：1
> 
> 时间：2012-10-07T19:13:42.923
> 
> 标签：python, random, dice

我有点卡在模拟掷骰子的家庭作业问题上。问题要求创建一个函数，返回一个从 1 到 6 的随机整数值，并创建一个主程序，询问用户要掷多少个骰子（必须限制为 5 个骰子），并调用该函数打印生成的价值观。到目前为止，我有这个：

```
import random

def dice(number_of_dice):
    for i in range(0,number_of_dice):
        return random.randint(1,6)

number_of_dice = input("How many dice would you like to roll? ")
while number_of_dice >5:
    number_of_dice = input("You may only have a limit of 5 dice, enter a number under 5\. " )
print dice(number_of_dice) 
```

运行程序时，无论“number_of_dice”输入是什么，它都只返回一个随机整数值。这里到底有什么问题？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T19:14:50.620

一旦您的`dice`函数执行并`return`第一次遇到该语句，它就会返回而不继续`for`循环的其余部分。

要解决此问题，您可以在内部声明一个局部变量`dice`，其中包含您要返回的多个结果。使用类似的语句

```
retval = []

retval.append(...)

return retval 
```

（我会留给你来填补空白。）

Python 的更高级用法包括使用该语句从一种称为*generator*`yield`的特殊函数返回单个值，该函数会记住它的位置，并且可以稍后重新启动。但是，在使用.*`yield`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T19:15:25.407

```
def dice(number_of_dice):
    for i in range(0,number_of_dice):
        yield random.randint(1,6)  #yield will successivly return as opposed to just return 
```

now you can access dice like a list ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-08T05:19:01.807

你使用这样的while循环

```
import random

from random import randint

while True:

  dice = input("how many dice would you like to roll?")

    prefix, middle, suffix = dice.partition("d") 
```

对于 2d6 中的 d 等

```
 for _ in range (int(prefix)):

      print (random.randint(1, int(suffix))) 
```*

# apache - Magento 多商店重定向循环

> ID：12771965
> 
> 赞同：2
> 
> 时间：2012-10-07T19:13:55.667
> 
> 标签：apache, magento, ssl, vhosts, opensuse

我正在使用 Magento 1.6.2.0.、Apache、Fast CGI、OpenSUSE

我通过使用 vhost.conf 和 vhost_ssl.conf 重定向不同的域，并通过更改“根”域中的 .htaccess 成功设置了 Multi Store。我需要这样做，因为我需要 2 个单独的 IP 地址和 2 个 SSL 证书。重定向有效，我已经能够根据自己的喜好对新域进行皮肤处理。

.ht 访问：

```
SetEnvIf Host .*domain.* MAGE_RUN_CODE=domain_code
SetEnvIf Host .*domain.* SetEnv MAGE_RUN_TYPE=website 
```

vhost_ssl.conf：

```
<IfModule mod_suexec.c>
    SuexecUserGroup "user" "xxxx"
</IfModule>

DocumentRoot "/var/www/vhosts/domain.co.uk/dev.domain.co.uk"

<Directory /var/www/vhosts/domain.co.uk/dev.domain.co.uk>
<IfModule mod_fcgid.c>
    <Files ~ (\.php)>
        SetHandler fcgid-script
        FCGIWrapper /var/www/cgi-bin/cgi_wrapper/cgi_wrapper .php
        Options +ExecCGI
        allow from all
    </Files>
</IfModule>
SSLRequireSSL
Options -Includes -ExecCGI
</Directory> 
```

我担心的是，每当我尝试导航到 https:// 页面时，我都会在浏览器中看到重定向循环。

我没有为此域设置 SSL 证书，但在我看来，这不应该产生这个错误，而是一个“无证书”错误（如果有的话）。

我希望有人能够指出他们过去的解决方案。

感谢任何人为此花费的任何时间。

# gwt - Render Google Chart in GWT 2.5 custom cell (I used UiRenderer)

> ID：12771977
> 
> 赞同：1
> 
> 时间：2012-10-07T19:15:46.070
> 
> 标签：gwt, cell, google-visualization, gwt-celltable

I am using GWT 2.5 RC1 and GAE 1.7.2. I created a custom cell using UiRenderer [Rendering HTML for Cells](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Rendering_HTML_for_Cells).
I want to render a chart using Google Chart Tools API for GWT [Getting Started Using the Google Chart Tools with GWT](http://code.google.com/p/gwt-google-apis/wiki/VisualizationGettingStarted)
Below there is snippet of the render method, which does not work.

**Does anybody know, how to render a google chart in a custom cell?**

I would appreciate it, if he/she give me some directions or sample code. Thanks in advance.

```
 @Override
public void render(com.google.gwt.cell.client.Cell.Context context, Value value, final SafeHtmlBuilder sb) {
    final HTMLPanel test = new HTMLPanel("");
    Runnable onLoadCallback = new Runnable() {
    public void run() {
        //Panel panel = RootPanel.get();

        // Create a pie chart visualization.
        PieChart pie = new PieChart(createTable(), createOptions());

        pie.addSelectHandler(GoogleCharts.createSelectHandler(pie));
        test.add(pie);
        }
    };
    // Load the visualization api, passing the onLoadCallback to be called
    // when loading is done.
    VisualizationUtils.loadVisualizationApi(onLoadCallback, PieChart.PACKAGE);

    sb.appendHtmlConstant(test.getElement().getInnerHTML());
    renderer.render(sb);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T01:23:22.237

看起来你有一个竞争条件。当您调用 sb.appendHTMLConstant 时，测试元素可能为空，因为尚未触发 onLoadCallback。如果您将最后两行移动到回调的末尾，这将删除竞争条件。

```
@Override
public void render(com.google.gwt.cell.client.Cell.Context context, Value value, final SafeHtmlBuilder sb) {
    final HTMLPanel test = new HTMLPanel("");

    Runnable onLoadCallback = new Runnable() {
        @Override
        public void run() {
            // Create a pie chart visualization.
            PieChart pie = new PieChart(createTable(), createOptions());
            pie.addSelectHandler(GoogleCharts.createSelectHandler(pie));
            test.add(pie);

            sb.appendHtmlConstant(test.getElement().getInnerHTML());
            renderer.render(sb);
        }
    };

    // Load the visualization api, passing the onLoadCallback to be called
    // when loading is done.
    VisualizationUtils.loadVisualizationApi(onLoadCallback, PieChart.PACKAGE);
} 
```

# gwtp - Using RequestBuilder with GWTP for batch calls

> ID：12771980
> 
> 赞同：1
> 
> 时间：2012-10-07T19:15:57.577
> 
> 标签：gwtp

What is the best practice to implement batch requests with GWTP using RequestBuilder. I need to get data from php server using JSON.

# html - 在正文中垂直居中div？

> ID：12771982
> 
> 赞同：28
> 
> 时间：2012-10-07T19:16:13.160
> 
> 标签：html, css, centering

我试图将其垂直居中`body`（而不是水平）。另外，我不想指定高度或类似的东西。我尝试添加一个高度为 100% 的包装器和其他东西，但一无所获。你能帮我解决这个问题吗？

[jsFiddle在这里](http://jsfiddle.net/Hunter4854/23NUC/)

```
 <form name="signup" class="signup" action="signup.php" style="border: 1px solid #000; ">
     <input type="text" placeholder="Email"/><br>
     <input type="text" placeholder="Username"/><br>
     <input type="password" placeholder="Password"/><br>
     <button type="submit">Next</button>
 </form>​ 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-07T19:27:03.513

请参阅[您的 jsFiddle 的此编辑版本](http://jsfiddle.net/glee/kj76C/)。

基本上，只需将您的内容包装在 中`<div class = "main"><div class = "wrapper"></div></div>`，然后添加以下 CSS：

```
html, body {
    height: 100%;
}
.main {
    height: 100%;
    width: 100%;
    display: table;
}
.wrapper {
    display: table-cell;
    height: 100%;
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-11-29T14:27:45.130

如果你有可用的 flexbox，你可以不使用`display: table;`

代码示例：

```
html,
body {
  height: 100%;
  width: 100%;
}

.container {
  align-items: center;
  display: flex;
  justify-content: center;
  height: 100%;
  width: 100%;
}
```

```
<html>
  <body>
    <div class="container">
      <div class="content">
        This div will be centered
      </div>
    </div>
  </body>
</html>
```

达达！垂直和水平居中的内容 div。JSFiddle：[https](https://jsfiddle.net/z0g0htm5/) ://jsfiddle.net/z0g0htm5/ 。

主要取自[https://philipwalton.github.io/solved-by-flexbox/demos/vertical-centering/](https://philipwalton.github.io/solved-by-flexbox/demos/vertical-centering/)和[https://css-tricks.com/snippets/css/a-guide-to-flexbox/](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-09-23T01:41:33.000

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-25T01:32:37.000

这对我有用：

**样式.css**

```
div {
    position: relative;
    top: 50%;
    transform: translateY(-50%);
} 
```

[我在这里](http://zerosixthree.se/vertical-align-anything-with-just-3-lines-of-css/)找到了这个代码片段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T19:26:38.267

带有表格扭曲的[JSFiddle示例](http://jsfiddle.net/23NUC/4/)

在上述解决方案中，为 html 和 body 提供 css，`"height: 100%"`然后将要以表格为中心的表单包装起来。

代码示例

```
<html>
<body>    
<table height="100%" width="100%" border="1">
    <tr>
    <td>
    <form name="signup" class="signup" action="signup.php" style="border: 1px solid #000; ">

                <input type="text" placeholder="Email"/><br>

                <input type="text" placeholder="Username"/><br>

                <input type="password" placeholder="Password"/><br>

                <button type="submit">Next</button>

            </form>
        </td>
        </tr>
</table>    
</body>
</html> 
```

​</p>

# scala - scala：使用 curry 修复参数的值

> ID：12771985
> 
> 赞同：3
> 
> 时间：2012-10-07T19:16:29.600
> 
> 标签：scala, functional-programming

我有以下功能

```
scala> def f1 = (prefix: String) => prefix + ".field"
f1: String => java.lang.String 
```

我想从 f1 定义另一个函数，将前缀的值固定为 p1，就像这样

```
def f2: () => String = () => f1("p1") 
```

或更短时间

```
def f2 = () => f1("p1") 
```

我认为使用 Function.curried 或 f.curried 和部分应用函数可以实现相同的目标，但我仍然无法做到......

--

看看[这篇文章](http://sandrasi-sw.blogspot.com.ar/2012/03/understanding-scalas-partially-applied.html)，我发现了一种更详细的定义方式。我想上面的语法对于这种较长的形式来说只是糖...

```
scala> object f2 extends Function0[String] {
     | override def apply = f1("p1")
     | }
defined module f2

scala> f2
res37: f2.type = <function0>

scala> f2()
res38: java.lang.String = p1.field 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T19:22:50.117

您只能“咖喱”具有多个参数的函数。至少使用 Scala 默认提供的方法。使用两个参数，它的工作原理如下：

```
val f2 = (prefix: String, foo:String) => prefix + ".field"
val f1 = f2.curried("p1") 
```

如果你想对 做同样的事情`Function1`，你可以“拉皮条”这个类来添加一个新方法：

```
implicit def addCurry[A,B](f:Function[A,B]) = new Function1WithCurried(f)
class Function1WithCurried[-A,+B](f:Function1[A,B]) {
  def curried:Function1[A,Function0[B]] = (x:A) => { () => f(x) }
}

def f1 = (prefix: String) => prefix + ".field"
val f0 = f1.curried
val f2 = f1.curried("p1") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T20:00:59.523

进一步扩展@Kim Stebel 的答案。你可以这样做：

```
scala> val f2 = (prefix: String, foo:String) => prefix + ".field"
f2: (String, String) => java.lang.String = <function2>

scala> val f1 = f2("p1",_:String)
f1: String => java.lang.String = <function1> 
```

为了清楚起见，我们在这里所做的不是柯里化，而是“部分应用”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T23:03:55.143

如果您正在寻找的是柯里化，您可以像这样更详细地执行它：

```
scala> def f1(f: String => String)(s: String) = f(s)
f1: (f: String => String)(s: String)String

scala> def f2 = () => f1(p => p + ".field")("p1")
f2: () => String

scala> f2()
res4: String = p1.field 
```

# php - PHP AJAX 确认表单提交

> ID：12771987
> 
> 赞同：0
> 
> 时间：2012-10-07T19:16:33.133
> 
> 标签：php, javascript, ajax, forms, validation

我有一个包含名字、姓氏和日期的小表格。单击提交表单时，我希望它检查数据库中是否存在重复条目（使用 Ajax），如果已经有 1 个以上的条目，则显示一个确认窗口以确认另一个提交。如果没有任何条目，确认不应该显示。

由于某种原因，它似乎在没有来自 Ajax PHP 页面的结果的情况下显示确认。如果我在该行之后引入一个警报`xmlHttp.send(null)`，它会从 PHP 中获取文本（根据需要），这让我觉得我误解了代码的执行顺序。这是代码：

Javascript：

```
 function check_duplicates() {
        var first = document.getElementById('first_name').value;
        var last = document.getElementById('last_name').value;
        var date = document.getElementById('event_date').value;

        var xmlHttp = GetXmlHttpObject();
        if (xmlHttp == null) {
            alert ("Your browser does not support AJAX!");
            return;
        }

        var result = "ERROR - Ajax did not load properly";
        var url="check_duplicate.php";
        url=url+"?first="+first;
        url=url+"&last="+last;
        url=url+"&date="+date;

        xmlHttp.onreadystatechange=function() {
            if(xmlHttp.readyState==4) {
                result = xmlHttp.responseText;
                alert("RESULT="+result);
                if(result != "clean") {
                    var validate = confirm(result);
                    return validate;
                }
            }
        }

        xmlHttp.open("GET",url,true);
        var test = xmlHttp.send(null);
    }
    function GetXmlHttpObject() {
        var xmlHttp = null;
        try {
            // Firefox, Opera 8.0+, Safari
            xmlHttp=new XMLHttpRequest();
        }
        catch (e) {
                // Internet Explorer
                try {
                    xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch (e) {
                    xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
        }

        return xmlHttp;
    } 
```

PHP：

```
// DATABASE CONNECTION INFORMATION REMOVED

$first = $_GET['first'];
$last = $_GET['last'];
$date = date('Y-m-d',strtotime($_GET['date']));

$sql = "SELECT COUNT(*) AS count FROM Table WHERE First='$first' AND ".
        "Last='$last' AND Date='$date'";
$result = mysql_query($sql);
$row = mysql_fetch_array($result);

if($row['count'] > 0) {
   if($row['count'] == 1) {
      echo "There is already an entry for ".$first." ".$last." on ".
           date('M jS',strtotime($date)).".\n".
           "Are you sure you want to submit this entry?";
   }
   else { // plural version of the same message
      echo "There are already ".$row['count']." entries for ".$first." ".
        $last." on ".date('M jS',strtotime($date)).".\n".
       "Are you sure you want to submit this entry?";
   }
} else {
   echo "clean";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:34:23.027

这是使用同步 AJAX 的答案。这样，您不必重载默认表单处理即可使其正常工作。但是，在确认请求运行时，**所有 javascript 都将被阻止**，这意味着无论确认请求持续多久，您的网页都可能会突然停止。

如果应该添加记录，此函数将返回 true，否则返回 false。

```
function check_duplicates() {
    var first = document.getElementById('first_name').value;
    var last = document.getElementById('last_name').value;
    var date = document.getElementById('event_date').value;

    var xmlHttp = GetXmlHttpObject();
    if (xmlHttp == null) {
        alert ("Your browser does not support AJAX!");
        return false;
    }

    var result = "ERROR - Ajax did not load properly";
    var url="check_duplicate.php";
    url=url+"?first="+encodeURIComponent(first);
    url=url+"&last="+encodeURIComponent(last);
    url=url+"&date="+encodeURIComponent(date);

    xmlHttp.open("GET",url,false);
    xmlHttp.send(null);

    var validated = true;
    var result = xmlHttp.responseText;

    if (result != 'clean')
        validated = confirm("RESULT="+result);

    return validated;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T20:09:53.563

这行代码返回`undefined`。

```
 var test = xmlHttp.send(null); 
```

您必须了解的是`send()`调用会立即返回并且 Javascript 会继续运行。同时，您的 AJAX 请求正在后台运行。此外，`onreadystatechange`一旦请求完成，您的处理程序就会被调用，无论它需要 10 毫秒还是 100 秒，并且您的其余代码不会收到它的返回值。

我想你想在确认完成后提交表格。您只知道从处理程序内部完成请求的时间`onreadystatechange`。这里的问题是，为了等待 AJAX 请求完成，您必须覆盖表单的默认行为。

您需要调用`preventDefault()`form-submit 事件，然后在确认后手动提交数据。

```
 xmlHttp.onreadystatechange=function() {
        if(xmlHttp.readyState==4) {
            var confirmed = false;
            var result = xmlHttp.responseText;
            if (result == "clean")
                confirmed = true;
            else
                confirmed = confirm("RESULT="+result);

            if (confirmed) {
                var url = "addData.php";
                url=url+"?first="+encodeURIComponent(first);
                url=url+"&last="+encodeURIComponent(last);
                url=url+"&date="+encodeURIComponent(date);
                window.location = url;
            }
        }
    } 
```

此外，当您构建 URL 时，您应该使用 encodeURIComponent。

```
 url=url+"?first="+encodeURIComponent(first);
    url=url+"&last="+encodeURIComponent(last);
    url=url+"&date="+encodeURIComponent(date); 
```

# r - R: qqline connects the first and third quartiles. How do I draw a line between different quantiles (ie 30% and 70%)?

> ID：12771988
> 
> 赞同：1
> 
> 时间：2012-10-07T05:27:10.040
> 
> 标签：r

> **Possible Duplicate:**
> [qqline connects the first and third quartiles. How do I draw a line between different quantiles (ie 30% and 70%)?](https://stackoverflow.com/questions/12766253/qqline-connects-the-first-and-third-quartiles-how-do-i-draw-a-line-between-diff)

I have a qqnorm plot of a data set with 1000+ points. I want to draw a line between two quantiles at a time (say 30% and 70%) just as qqline does with 25% and 75%, but with the freedom of choosing which quantiles to use. I've poked around with ggplot a bit but can't seem to get something that works. What's the best way to do this?

I've found a function that seems to do what I want, called plot.qqline in the package sma. Unfortunately, this is a really old package and is now deprecated. However, that's the type of functionality I'm looking for.

edit: Figured it out!

# ruby-on-rails - 如何在 Heroku 应用程序之间切换（在本地工作）？

> ID：12771994
> 
> 赞同：0
> 
> 时间：2012-10-07T19:17:36.613
> 
> 标签：ruby-on-rails, heroku

我正在开发两个不同的应用程序，并且都部署到了heroku。我想在本地工作，只在 localhost:3000 上查看我的应用程序，但是如何切换 localhost:3000 显示的应用程序？以及如何指定每个项目都提交/部署到正确的 Heroku 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:21:31.007

您可以在不同的端口上启动每个应用程序：

```
$ rails s -p 4000 
```

或者使用像[Pow这样的东西](http://pow.cx/)

当您推送到 Heroku 时，它将使用您当前所在的文件夹（远程存储库作为 Git 配置的一部分存储）。

# javascript - How to get and add the values of two elements by ID

> ID：12771995
> 
> 赞同：0
> 
> 时间：2012-10-07T19:17:37.250
> 
> 标签：javascript, jquery

```
<script type="text/javascript">
$(document).ready(function() {

        var sub_total = $("sub_total").text();
                        alert(sub_total);
        var ship_total = $("ship_total").val()
                        alert(ship_total);

        var new_total = sub_total + ship_total;

        $('#new_total').html( new_total.toFixed(2));
    });

</script> 
```

I'm using alert to test the output and It is not getting the value inside the span ID.

```
$<span id="sub_total"><?php echo $sub_total = number_format($this->cart->total(), 2); ?></span></td> 
```

This does display correctly on the page but the alert is a blank box. Causing the `new_total` value to stat `NaN` not a number.

How do I add the values in these two fields?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:21:26.013

**EDIT:**

You forgot to get the value - you are only getting the element

Since you're already using jQuery you can get the value like

```
var sub_total = parseInt($("#sub_total").text());// this is where you need to use .text()
var ship_total = parseInt($("#ship_total").text()); 
```

or if you want to keep plain js..

```
document.getElementById("sub_total").value 
```

Since you have $ in your text you need to get rid of it before parsing it. You can use regex as @Bubbles stated or whatever method you want to remove the `$` sign.. ex. substring.. split..

```
$.trim($("#sub_total").text().split('$')[1]) 
```

or

```
$.trim($("#sub_total").text()).substring(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T19:27:18.260

wirey gives a good review of part of the problem, but as is I don't believe it's enough. "parseInt" won't work on "$20", you have to remove the dollar sign first. If you're feeling lazy, this is nothing a good regex won't be able to solve in short order:

```
var sub_total = parseInt($("#sub_total").text().match(/[0-9]+/)));
var ship_total = parseInt($("#ship_total").text().match(/[0-9]+/))); 
```

This will just grab the number from the span, then parse it.

# heroku - Django admin static css not found with heroku foreman start local ...但推送远程很好

> ID：12771996
> 
> 赞同：2
> 
> 时间：2012-10-07T19:17:46.940
> 
> 标签：heroku, django-admin, foreman

当我在本地运行**工头启动时**- 我没有从静态加载管理员 css ...

但是当它推到遥控器时，它的一切都按预期工作！多哈。

我希望我的本地工头模仿我的远程实例......

这是我当前用于静态内容的 settings.py ：（有人可以帮忙吗？）

```
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static'

# Additional locations of static files
STATICFILES_DIRS = (
    os.path.join(PROJECT_DIR, 'static'),
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-04T10:53:09.440

尝试修改您的 STATIC_ROOT 让说 project_path/static/ 并运行

```
python manage.py collectstatic 
```

Heroku 自动运行 collectstatic（如果一切设置正确）:)

希望对您有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:37:52.317

在静态文件的 Django 文档中阅读有关[在开发中提供静态文件的信息。](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)它展示了如何让 Django 使用你的 python 应用服务器来提供静态文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-19T13:29:55.547

添加到项目中的*settings.py*中：

```
STATIC_ROOT = 'staticfiles'

STATICFILES_DIRS = (
    os.path.join(BASE_DIR, 'static'),
) 
```

然后在你的项目中添加到*wsgi.py*：

```
from dj_static import Cling
application = Cling(get_wsgi_application()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-07T00:25:29.153

首先，@Evgeny 的答案是正确的答案。点击链接将为您提供答案。但是，我一开始错过了他的回答，因为他没有内联相关部分。所以，我只想在这里内联一个选项（与他的解决方案略有不同 - 一石二鸟）：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

urlpatterns = [
    url(r'^admin/', admin.site.urls),
    # your other urls
]

urlpatterns += staticfiles_urlpatterns() 
```