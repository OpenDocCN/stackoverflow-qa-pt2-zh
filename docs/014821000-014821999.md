# StackOverflow 问答 14821000-14821999

# python - 使用 Python 2.7 的字典/JSON 问题

> ID：14821003
> 
> 赞同：-1
> 
> 时间：2013-02-11T21:17:13.253
> 
> 标签：python, facebook, json, facebook-graph-api, python-2.7

我正在考虑使用 Python 2.7 从 Facebook 抓取一些数据。我的代码基本上通过 1 更改 Facebook 个人资料 ID 来增加，然后捕获页面返回的详细信息。

我希望从中捕获数据的页面示例是 graph.facebook.com/4。

下面是我的代码：

```
import scraperwiki
import urlparse
import simplejson

source_url = "http://graph.facebook.com/"
profile_id = 1

while True:
    try:
        profile_id +=1
        profile_url = urlparse.urljoin(source_url, str(profile_id))
        results_json = simplejson.loads(scraperwiki.scrape(profile_url))
        for result in results_json['results']:
            print result
            data = {}
            data['id'] = result['id']
            data['name'] = result['name']
            data['first_name'] = result['first_name']
            data['last_name'] = result['last_name']
            data['link'] = result['link']
            data['username'] = result['username']
            data['gender'] = result['gender']
            data['locale'] = result['locale']
            print data['id'], data['name']
            scraperwiki.sqlite.save(unique_keys=['id'], data=data)
        #time.sleep(3)
    except:
        continue
        profile_id +=1 
```

我正在使用 scraperwiki 站点执行此检查，但没有数据打印回控制台，尽管 'print data['id'], data['name']*仅用于检查代码是否正常工作*

关于此代码有什么问题的任何建议？如前所述，对于每个返回的配置文件，应捕获唯一数据并将其打印到屏幕上并填充到 sqlite 数据库中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:25:14.840

> 关于此代码有什么问题的任何建议？

是的。你正在吞下你所有的错误。下的块中可能会出现大量问题`try`。如果该块中出现任何问题，您将继续前进而不打印任何内容。

当您希望处理特定错误时，您应该只使用`try`/块。`except`

修改您的代码，使其看起来像这样：

```
while True:
    profile_id +=1
    profile_url = urlparse.urljoin(source_url, str(profile_id))
    results_json = simplejson.loads(scraperwiki.scrape(profile_url))
    for result in results_json['results']:
        print result
        data = {}
        # ... more ... 
```

然后当出现特定问题时，您将收到详细的错误消息。

至于您在评论中的担忧：

> 我进行错误处理的原因是，如果您查看例如 graph.facebook.com/3，此页面不包含用户数据，因此我不想整理此信息并跳到下一个用户，即。没有 4 等

如果你想处理没有数据的情况，那就想办法专门处理这种情况。吞下所有错误是不好的做法。

# ssas - 从 SSAS 表格创建 Power View 工作表时出错

> ID：14821004
> 
> 赞同：5
> 
> 时间：2013-02-11T21:17:14.117
> 
> 标签：ssas, tabular, azure-virtual-machine, excel-2013, powerview

从在云中的 Azure VM 上运行的 Analysis Services (SSAS)**表格**实例创建 Excel 2013 Power View 工作表时，我遇到了一个奇怪的错误。这是错误：

> 抱歉，加载项目或数据源“xxxxxx.cloudapp.net 表格模型”的模型时出现问题。验证连接信息是否正确以及您是否有权访问数据源。

奇怪的是，我可以从中成功创建正常连接的数据透视表；当我尝试制作 Power View 工作表时，我只会收到错误消息。这会让我相信我正在连接到一个多维 SSAS 数据库，但我不是。以下是我已经尝试过的一些事情：

*   转发 Azure 中的默认 SSAS 端口 2383 并在 Windows 防火墙中打开它（这使我可以使用连接的数据透视表浏览多维数据集）
*   确保我的登录名对 SSAS 数据库具有权限（我**没有**使用 Windows 身份验证）
*   检查了 SSAS 表格兼容性版本，它是 1103
*   检查了 SSAS Tabular SSDT 项目兼容性级别，也是 1103
*   确保 SQL Server Browser 正在运行（我在某处读到可能有问题）
*   尝试打开端口 80 和 443 以防万一需要这些端口，但没有帮助...
*   尝试监控 Excel 的端口使用情况，看它是否在尝试其他端口，除了 2383 什么都看不到
*   成功连接到内部网 SSAS 表格数据库（可比性 1101）并从中创建了 Power View 工作表（这意味着我的 Excel 客户端应该没有任何问题）

以下是我的设置的一些细节：

### 服务器

*   视窗服务器 2012
*   SQL Server 2012 SP1
*   SSAS 表格默认实例（兼容性级别 1103）

### 客户

*   视窗 8
*   Excel 2013 (15.0.4426.1017) MSO (15.0.4454.1002) 32 位

**更新（2/12/2013）：**我在服务器上安装了 Excel 2013，并且可以成功创建连接到表格数据库的 Power View 工作表。这意味着我的表格 SSAS 实例设置得很好，但是在尝试通过 Internet 创建工作表时问题仍然存在。

**更新（2013 年 2 月 15 日）：**我使用 Windows 更新将我的 Excel 更新为 15.0.4454.1503，但无济于事。我让一位同事成功连接了稍旧版本的 Excel 2013。我完全被难住了。我还尝试在更新到 v 15.0.4454.1503 的 VM 上安装 Excel 的新副本，它给了我同样的错误。

**更新（2013 年 2 月 20 日）：**我使用 Windows Server 2012、SQL Server 2012 和 SSAS 表格兼容 1103 安装了一个全新的*本地*VM。我仍然无法从该服务器成功生成 Power View 报告。我**坚信**Excel 2013 客户端存在某种错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T05:59:58.837

我遇到了同样的问题。我无法使用与当前登录用户不同的凭据将 powerview 连接到表格多维数据集。与普通数据透视表连接工作正常。在为 SQL 2012 SP1 安装 CU7 及更高版本后，这解决了身份验证问题。然后我更改了表格实例的默认端口，powerview 无法再次连接。我通过安装一个名为 portmapper 的应用程序解决了这个问题。我将默认端口 2383 映射到我的服务器端口。一切正常。似乎 excel 中的 powerview 期望服务器位于默认端口上，并且不使用连接中指定的端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T09:02:33.067

尝试使用不同的用户启动 Excel。我能够以这种方式打开远程 SSAS 表格：

```
runas /netonly /user:SERVERNAME\Administrator "C:\Program Files\Microsoft Office\Office15\EXCEL.EXE" 
```

此问题与 Windows 身份验证有关。也许 Power View 没有相同类型的对话框来询问远程登录 SSAS 的密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T14:43:13.110

根据这篇文章[http://blogs.msdn.com/b/analysisservices/archive/2013/05/31/power-view-connectivity-for-multidimensional-models-released.aspx](http://blogs.msdn.com/b/analysisservices/archive/2013/05/31/power-view-connectivity-for-multidimensional-models-released.aspx)

无法将excel连接到多维模型

# erlang - 如何从 Erlang 中的字符串中提取整数？

> ID：14821005
> 
> 赞同：6
> 
> 时间：2013-02-11T21:17:18.137
> 
> 标签：erlang

我在erlang中有这个变量**代码，它有这个值**`"T00059"`

我想`59`从**Code**中提取这个值。

我尝试用这段代码提取这个值 `"00059"`。

```
NewCode = string:substr(Code, 2, length(Code)), 
```

现在我想知道我们如何消除第一个不为空的整数之前的第一个零。我的意思是我们如何提取 `"59"`？

例如，如果我有这个值`"Z00887"`，我应该在最终的这个值 `887`中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T21:37:40.553

您可以简单地执行（交互式`erl`会话的输出）：

```
1> Code = "Z00887",
1> {NewCode, _Rest} = string:to_integer(string:substr(Code, 2, length(Code))),
1> NewCode.
887 
```

[（我在 erlang 中的循环测试中的](https://stackoverflow.com/questions/14813593/test-with-loop-in-erlang)回答对同一问题进行了更详细的说明）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:51:41.897

此代码将跳过起始零。如果要保存它们，请更改`$1`为`$0`

```
extract_integer([]) -> [];
extract_integer([H|T]) when (H >= $1) and (H =< $9) -> [H] ++ T;
extract_integer([_H|T]) -> extract_integer(T). 
```

# python - Ubuntu Python shebang线不起作用

> ID：14821012
> 
> 赞同：6
> 
> 时间：2013-02-11T21:17:48.823
> 
> 标签：python, linux, ubuntu, python-2.7, ubuntu-12.04

无法让 shebang 行在 Ubuntu 中为 python 脚本工作。我每次只得到一个命令未找到错误。

测试.py

```
#!/usr/bin/env python

print ('!') 
```

冉

```
:which python
/usr/bin/python 
```

在shebang中玩了python的不同位置，但没有运气，包括哪个python提供的东西。有关如何解决此问题的任何提示？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T21:36:42.337

如果您尝试将命令运行为

```
$ test.py 
```

该错误可能与shebang没有任何关系。相反，test.py 所在的目录不在您的`PATH`. 尝试

```
$ ./test.py 
```

绕过`PATH`查找。

（这是为了确保脚本本身是可执行的。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-11T21:22:59.070

在 python[文档页面上](http://docs.python.org/release/2.6/using/unix.html)它说：

> 要在 Unix 上轻松使用 Python 脚本，您需要使它们可执行，例如
> 
> $ chmod +x 脚本并在脚本顶部放置适当的 Shebang 行。一个好的选择通常是
> 
> #!/usr/bin/env python 在整个 PATH 中搜索 Python 解释器。但是，某些 Unices 可能没有 env 命令，因此您可能需要硬编码 /usr/bin/python 作为解释器路径。

我不知道这是否适用于你。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-08T15:40:29.090

除了使用前面的点执行脚本或使其可执行之外，可能还有另一个问题：

如果您尝试使用用 windows 编辑器编写的脚本，它可能包含 windows 行尾。删除这些可以使 shebang 再次工作。

要删除此类行尾，请参阅[How to convert Windows end of line in Unix end of line (CR/LF to LF)](https://stackoverflow.com/questions/3891076/how-to-convert-windows-end-of-line-in-unix-end-of-line-cr-lf-to-lf)例如。

另请参阅我[在其他答案中对失败的 shebang 评估的](https://stackoverflow.com/a/30128006/1150303)一般评论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-03T14:27:18.627

确保“**第一**行”是shebang。不要在文件的开头给出任何换行符。“**开头没有换行符**”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-11T20:52:11.400

这可能是由于内核配置错误。[查看内核的配置](https://superuser.com/a/287372/278221)选项，并检查是否[`CONFIG_BINFMT_SCRIPT`](https://cateee.net/lkddb/web-lkddb/BINFMT_SCRIPT.html)已设置：

```
zcat /proc/config.gz | grep CONFIG_BINFMT_SCRIPT 
```

如果这个命令的输出是**除了 之外** `CONFIG_BINFMT_SCRIPT=y`的任何东西，这意味着你的内核将不允许你使用 shebangs。您将需要获得一个新内核或使用`CONFIG_BINFMT_SCRIPT=y`.

# iphone - xCode iOS 开发 - Apple Mach-O 链接器错误 // Dsymutil 错误

> ID：14821019
> 
> 赞同：1
> 
> 时间：2013-02-11T21:18:11.257
> 
> 标签：iphone, ios, xcode, mach-o, dsymutil

我非常需要帮助。我经历了 3 个不成功的非生产性编码之夜。请有人解决这个错误，让我因为忽略如此简单的事情而感到愚蠢。:)

* * *

[问题 #1]

我不断收到“ **Apple Mach-O Linker Error** ” **链接器命令失败，退出代码为 1（使用 -v 查看调用）**

* * *

[问题 #2]

另外......我不断收到“ **Dsymutil错误**” **错误：无法打开可执行文件'/Users/PsychodelicFuzz/Library/Developer/Xcode/DerivedData/CHH-bmbqxvfwddzaupfaavvipxaqwvfx/Build/Products/Debug-iphonesimulator/CHH.app/CHH'**

* * *

感谢任何愿意伸出援助之手的人<3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-09T11:50:58.220

将调试信息格式从构建设置更改为“DWARF”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:44:58.223

这些可能是相关的。 `dsymutil`出现错误，因为您的可执行二进制文件`CHH.app`不存在。它不存在，因为`ld`失败了。

在 Xcode 中打开 Log Navigator 窗格，在构建失败后单击该窗格中的构建条目，然后如果将鼠标悬停在“”行的右侧，`Link ... CHH.app`您将看到一个披露图标 - 点击它然后您将看到实际的`ld`调用和它打印的实际错误消息。运气好的话，你会找到正确的方向。

# php - PHP IF Else 语句不起作用

> ID：14821022
> 
> 赞同：-1
> 
> 时间：2013-02-11T21:18:14.693
> 
> 标签：php

我的 IF 语句有问题。为什么我的代码总是说**a 不大于 b**我做错了什么？即使数字更大，它也只是说不是？

```
<?php
//vars
$A = '454';
$B = '1001';
?>

<?php
function difference($val3, $val4)
{
    $subtract = ($val3 - $val4);
    return $subtract;
}

// random number generator function
function random($min, $max) 
{
  return rand($min,$max);
}

$ANum = random(1,$A);
$BNum = random(1,$B);
$difference = "-170"; //difference($teamANum, $teamBNum);

function result()
{
    if ($ANum > $BNum) 
        {
            echo "a is greater than b";
        } 
    else 
        {
             echo "a is NOT greater than b";
        }

}

?>

<?php
echo "A: ".$teamANum."\n";
echo "B: ".$teamBNum."\n";
echo "Difference: ".$difference."\n";
echo result()."\n";
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:21:11.347

你超出了范围。

```
function result($ANum, $BNum)
{

    if ($ANum > $BNum) 
        {
            echo "a is greater than b";
        } 
    else 
        {
             echo "a is NOT greater than b";
        }

} 
```

将变量作为参数传递给函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:21:50.640

您的函数`result`不知道变量`$ANum`或`$BNum`.

```
function result($ANum, $BNum)
{
  if ($ANum > $BNum) 
  {
    echo "a is greater than b";
  } 
  else 
  {
    echo "a is NOT greater than b";
  }
} 
```

顺便说一句，最后一个变量`$teamANum`&`$teamBNum`不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:21:42.997

`$ANum $BNum`未定义，`result()`因此它们都始终为 0。这个问题表明您的下一步是实际使用教程并专注于范围和功能。

# jquery - DIV 会在 15 秒后自动消失，除非有人在 DIV 内点击

> ID：14821026
> 
> 赞同：1
> 
> 时间：2013-02-11T21:18:34.063
> 
> 标签：jquery, html

我有一个网站，加载如下：

```
<div class"overlay">
<div id="hideMsg">15 </div>
<div class="mainbox">
</div>
</div> 
```

目前覆盖在 15 秒后消失，但如果有人在 div 主框内单击，我想阻止这种情况发生。（例如 box div 将不再消失。同时，我也希望倒数计时器消失，因为它不再需要了。

我正在使用的代码是：

**使 div 消失**

```
$(document).ready(function()  {
    setTimeout(function() {
        $(".overlay").fadeOut(1500);
    },15000);
        }); 
```

**用于倒数计时器**

```
var sec = 15
var timer = setInterval(function() {
   $('#hideMsg span').text(sec--);
   if (sec == -1) {
  $('#hideMsg').fadeOut('fast');
  clearInterval(timer);
   } 
}, 1000); 
```

我想我需要以某种方式停止该功能，但不知道该怎么做。真的很想看看最好的方法是什么。

谢谢，

斯科特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:21:28.997

尝试清除`onclick`.`mainbox`

```
$(document).ready(function()  {
    var mTimer = setTimeout(function() {
        $(".overlay").fadeOut(1500);
    },15000);

    $('.mainbox').click (function () {
       clearTimeout(mTimer);
       $('#hideMsg').fadeOut(100);
    });
}); 
```

# cuda - OpenCL 和 CUDA 中的持久线程

> ID：14821029
> 
> 赞同：9
> 
> 时间：2013-02-11T21:18:39.090
> 
> 标签：cuda, opencl, gpu, gpgpu

我已经阅读了一些关于 GPGPU 的“持久线程”的论文，但我并不真正理解它。谁能给我一个例子或向我展示这种编程方式的用法？

在阅读和谷歌搜索“持久线程”后，我记住了什么：

> Presistent Threads 它只不过是一个 while 循环，它使线程保持运行并计算大量工作。

这个对吗？提前致谢

参考：[http ://www.idav.ucdavis.edu/publications/print_pub?pub_id=](http://www.idav.ucdavis.edu/publications/print_pub?pub_id=1089) [1089 http://developer.download.nvidia.com/GTC/PDF/GTC2012/PresentationPDF/S0157-GTC2012-Persistent-Threads-Computing .pdf](http://developer.download.nvidia.com/GTC/PDF/GTC2012/PresentationPDF/S0157-GTC2012-Persistent-Threads-Computing.pdf)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-10T17:06:53.367

CUDA 利用单指令多数据 (SIMD) 编程模型。计算线程按块组织，线程块分配给不同的流式多处理器 (SM)。SM 上线程块的执行是通过将线程安排在线程*束*中来执行的`32`：每个束以锁步方式运行，并对不同的数据执行完全相同的指令。

通常，为了填满 GPU，内核启动时会使用更多实际上可以托管在 SM 上的块。由于并非所有块都可以托管在 SM 上，因此工作调度程序会在块完成计算时执行上下文切换。需要注意的是，块的切换完全由调度器在硬件中管理，程序员无法影响块如何调度到 SM 上。这暴露了所有那些不完全适合 SIMD 编程模型并且存在工作不平衡的算法的限制。事实上，一个块`A`不会被`B`同一个 SM 上的另一个块替换，直到块的最后一个线程`A`还没有完成执行。

尽管 CUDA 不向程序员公开硬件调度程序，但*持久线程*样式通过依赖工作队列绕过硬件调度程序。当一个块完成时，它会检查队列是否有更多的工作，并继续这样做，直到没有工作剩下，此时块退休。通过这种方式，内核启动时的块数与可用 SM 的数量一样多。

以下示例可以更好地说明*持久线程*技术，该示例取自演示文稿

[“GPGPU”计算和 CUDA/OpenCL 编程模型](http://www.cs.cmu.edu/afs/cs/academic/class/15869-f11/www/lectures/11_gpgpu.pdf)

论文中提供了另一个更详细的示例

[了解 GPU 上光线遍历的效率](https://mediatech.aalto.fi/~timo/publications/aila2009hpg_paper.pdf)

```
// Persistent thread: Run until work is done, processing multiple work per thread
// rather than just one. Terminates when no more work is available

// count represents the number of data to be processed

__global__  void persistent(int* ahead, int* bhead, int count, float* a, float* b)
{
    int local_input_data_index, local_output_data_index;
while ((local_input_data_index = read_and_increment(ahead)) <   count)
{                                   
        load_locally(a[local_input_data_index]);

        do_work_with_locally_loaded_data();

        int out_index = read_and_increment(bhead);

        write_result(b[out_index]);
    }
}

// Launch exactly enough threads to fill up machine (to achieve sufficient parallelism 
// and latency hiding)
persistent<<numBlocks,blockSize>>(ahead_addr, bhead_addr, total_count, A, B); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-20T07:45:45.897

很容易理解。通常每个工作项处理少量的工作。如果您想节省保存工作组切换时间，您可以让一个工作项使用循环处理大量工作。例如，您有一个图像，它是 1920x1080，您有 1920 个工作项，每个工作项使用循环处理一列 1080 像素。

# jquery - jQuery sortable() 之后调用自定义函数；

> ID：14821033
> 
> 赞同：15
> 
> 时间：2013-02-11T21:19:00.417
> 
> 标签：jquery, jquery-ui

我有这个小插件，它会导致一个元素脉动三次，调用 .blink()。通过 jQuery .sortable(); 拖放后，我试图让它在 LI 元素上工作。但它似乎在这种情况下不起作用。

```
$(function() {
$( "#sortable" ).sortable().blink("update-value", 3, 350);
$( "#sortable" ).disableSelection();
}); 
```

闪烁代码

```
$.fn.blink = function (cls, times, delay) {
var $self = this.removeClass(cls);
clearTimeout($.fn.blink.handler);
! function animate(times) {
    if (times) {
        $self.toggleClass(cls);
        $.fn.blink.handler = setTimeout(function () {
            animate(times - 1);
        }, delay);
    }
}(times * 2);
return this;
}; 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-11T21:30:48.407

如果您正在使用 jQueryUI 可排序插件，并且如果您想要制作一个已拖放（排序）的闪烁元素，那么您应该使用可排序 API 中已经可用的回调：

当你配置你的 sortable 时，你可以给 change 事件一个回调：

```
$( ".selector" ).sortable({
    change: function( event, ui ) {}
}); 
```

API 说：“此事件在排序期间触发，但仅在 DOM 位置发生更改时触发”

您还可以为更新事件提供回调：

```
$( ".selector" ).sortable({
    update: function( event, ui ) {}
}); 
```

API 说：“当用户停止排序并且 DOM 位置发生变化时触发此事件”

在您的情况下，您应该使用更新回调并向您的元素调用 blink 方法。

注意：元素拖放应该在`ui`对象中可用，使用console.debug检查内容`ui`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-03T10:20:39.520

您需要像这样使用更新事件：

```
 $( "#sortable" ).sortable({
       update: function( event, ui ) {
       var data = $( "#sortable" ).sortable( "serialize", { key: "sort" } );
       $.post( "url",{ 'data[]': data});
   }}); 
```

或者像这样获取数组数据：

```
var data = $("#sortable").sortable( "toArray" ); 
```

[见文件](https://api.jqueryui.com/sortable/#method-serialize)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-29T01:25:04.513

对于那些有问题的人，我使用“停止”而不是更改或更新。当我使用更新时，它在删除项目之前运行，所以当我访问 dom 获取订单时，它没有更新它。当我使用更改时，它会随机触发中间拖动。我只能通过使用 stop: function( event, ui ) {} 让它工作

# jquery - 如何在 Fancybox 中为没有链接的图像设置组？

> ID：14821039
> 
> 赞同：1
> 
> 时间：2013-02-11T21:19:13.733
> 
> 标签：jquery, fancybox, fancybox-2

目前，我使用此代码将 Fancybox 应用于一组未由标签包装的图像`<A>`：

```
$("img[alt=lightbox]").each(function(){
   $(this).fancybox({ href : $(this).attr('src') });
}); 
```

现在我想将所有以这种方式添加的图像添加到同一个组中。

我试过：

```
$("img[alt=lightbox]").each(function(){
   $(this).attr("data-fancybox-group", "gallery");
   $(this).fancybox({ href : $(this).attr('src') });
}); 
```

如果没有运气，你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:43:41.933

这个问题的答案**[Fancybox Gallery without a href？](https://stackoverflow.com/questions/9240436/fancybox-gallery-without-a-href)**是为fancybox v1.3.4 编写的。

同样的解决方案同样适用于 fancybox v2.x，但请记住，*fancybox v2.x API 选项是新的，并且与以前的版本不兼容*……因此您实际上必须升级 API 选项以使其与 v2 一起使用。 X

这是 v2.x 更新：

基本的html：

```
 <div id="myContainer">
  <img src="images/01t.jpg" data-href="images/01.jpg" alt=""  />
  <img src="images/02t.jpg" data-href="images/02.jpg" alt=""  />
  <img src="images/03t.jpg" data-href="images/03.jpg" alt=""  />
  <img src="images/04t.jpg" data-href="images/04.jpg" alt=""  />
  <img src="images/05t.jpg" data-href="images/05.jpg" alt=""  />
 </div> 
```

...**请注意**，我们使用 (HTML5) `data-*`( `data-href`) 属性来定位大图像，并让该`src`属性定位缩略图。

然后是 js：

```
// the function we call when we click on each img tag
function fancyBoxMe(e) {
    var numElemets = $("#myContainer img").size();
    if ((e + 1) == numElemets) {
        nexT = 0
    } else {
        nexT = e + 1
    }
    if (e == 0) {
        preV = (numElemets - 1)
    } else {
        preV = e - 1
    }
    var tarGet = $('#myContainer img').eq(e).data('href');
    $.fancybox({
        href: tarGet,
        helpers: {
            title: {
                type: 'inside'
            }
        },
        afterLoad: function () {
            this.title = 'Image ' + (e + 1) + ' of ' + numElemets + ' :: <a href="javascript:;" onclick="fancyBoxMe(' + preV + ')">prev</a>&nbsp;&nbsp;&nbsp;<a href="javascript:;" onclick="fancyBoxMe(' + nexT + ')">next</a>'
        }
    }); // fancybox
} // fancyBoxMe

// bind click to each img tag 
$(document).ready(function () {
    $("#myContainer img").each(function (i) {
        $(this).bind('click', function () {
            fancyBoxMe(i);
        }); //bind      
    }); //each
}); // ready 
```

当然，这里是**[演示](http://www.picssel.com/playground/jquery/galleryIMGtag_11feb13.html)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:31:09.147

根据花式框：

> 注意 - 画廊是从具有相同“rel”标签的元素创建的，例如：

[在此处](http://fancybox.net/howto)查看页面底部

所以尝试设置rel：

```
$("img[alt=lightbox]").each(function(){
  $(this).attr("rel", "gallery");
  $(this).fancybox({ href : $(this).attr('src') });
}); 
```

# xmpp - Google Talk 如何跨设备复制消息？

> ID：14821042
> 
> 赞同：3
> 
> 时间：2013-02-11T21:19:23.333
> 
> 标签：xmpp, google-talk

我想知道（官方）GTalk 客户端如何设法显示收到的**所有**消息 - 即使它最初是由另一个客户端使用的。例如：我在笔记本电脑上登录 gmail.com 上的 GTalk，同时通过我的 Android 设备上的官方 GTalk 应用程序登录。一位朋友给我发了一条消息，该消息同时显示在**gmail.com**客户端和 Android 客户端上。（我认为它最初只转发给任一客户端，但第二个客户端稍后获取消息）

我最近发现有一个非常相似的 XMPP 功能，称为[Carbons](http://xmpp.org/extensions/xep-0280.html)。然而，在一个快速的服务发现请求之后，谷歌的服务器并没有宣传这个功能。XEP-0313 和 XEP-0136 看起来也不错，但服务器也不宣传它们。

可能相关的问题：[使用 XMPPPY 向所有登录的客户端发送 Google Talk 消息](https://stackoverflow.com/questions/12144421/deliver-google-talk-message-to-all-logged-in-clients-using-xmpppy)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:52:11.737

当您发起新的聊天时，您应该将第一条消息发送给用户裸 Jid。这是大多数客户正在做的事情。当 GTalk 服务器将聊天消息检索到裸 Jid 时，它会将消息路由到所有可用资源。对于此对话中的所有后续消息，客户端通常会选择资源并将它们发送给完整的 Jids。那时不应复制这些消息。

许多其他服务器不会将消息路由到所有资源的裸 Jid，而是路由到最可用的资源，即具有最高优先级的客户端。

这是 RFC 的引用：

```
If there is more than one resource with a non-negative presence priority then the
server MUST either
(a) deliver the message to the "most available" resource or
resources (according to the server's implementation-specific algorithm, e.g., treating
the resource or resources with the highest presence priority as "most available") or
(b) deliver the message to all of the non-negative resources. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T13:28:56.453

XEP-0280 定义了这一点。据我了解，它定义了当其中一个用户向任何人发送消息时通知来自同一用户的所有资源的机制。我的意思是，Alice/pda 向 Bob 发送消息，因此 Alice/mobile 和 Alice/PC 将收到 Alice/pda 发送的消息的副本。

希望能帮助到你。我目前正在寻找实现此功能的服务器以及客户端库。如果没有，我将在 jabberd2 和 gloox xmpp 库中自己实现它。

干杯，

# vb.net - 一桌多班

> ID：14821043
> 
> 赞同：0
> 
> 时间：2013-02-11T21:19:26.047
> 
> 标签：vb.net, design-patterns

假设我有一个这样的数据库结构：

```
create table Product(id int not null identity,Name varchar(30))
INSERT INTO Product VALUES ('ProductA')
INSERT INTO Product VALUES ('ProductB') 
```

和这样的类结构：

```
 Imports System.Data.SqlClient

Public Class Product

    Protected ProductName As String

    Public Overridable Sub Display()

    End Sub

End Class

Public Class ProductA
    Inherits Product

    Public Sub New(ByVal product As String)
        ProductName = product
    End Sub

    Public Overrides Sub Display()
        'Specific logic to display product A
    End Sub

End Class

Public Class ProductB
    Inherits Product

    Public Sub New(ByVal product As String)
        ProductName = product
    End Sub

    Public Overrides Sub Display()
        'Specific logic to display product B
    End Sub

End Class

Public Class Form1

    Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim p1 As Product
        Dim p2 As Product

        p1 = New ProductA("ProductA")
        p2 = New ProductB("ProductB")
        p1.Display()
        p2.Display()
    End Sub
End Class 
```

有一个属性（产品）可以标识该类与哪个产品相关。这对我来说看起来不正确。有没有更好的建模方法？这类似于 NHibernate 的鉴别器概念（在这种情况下我没有使用 NHibernate）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:23:03.767

随着您的最新更改，您应该将构造函数移动到基类。除此之外，设计还不错。

```
Public Class Product

    Protected ProductName As String

    Public Sub New(ByVal product As String)
        ProductName = product
    End Sub

    Public Overridable Sub Display()

    End Sub

End Class

Public Class ProductA
    Inherits Product

    Public Overrides Sub Display()
        'Specific logic to display product A
    End Sub

End Class 
```

此外，在您的声明中，您可以使用继承的类：

```
Dim p1 As ProductA
Dim p2 As ProductB 
```

# sql-server - 将 SQL Server 查询的结果复制到 Excel

> ID：14821047
> 
> 赞同：1
> 
> 时间：2013-02-11T21:19:35.747
> 
> 标签：sql-server, postgresql, sql-server-2005

我试图找出一种将 SQL Server 查询结果复制到 Excel 的方法。我知道使用 PostgreSQL，您可以执行以下命令：

```
COPY (SELECT id, summary, description FROM table) TO 'C:/test/table.xls'; 
```

以达到预期的结果。SQL Server 中的等效方法是什么？

我想将它作为查询语句运行，因为我想通过将批处理文件作为计划任务运行查询来自动化这个过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:24:45.860

尝试这个：

```
INSERT INTO
OPENROWSET (
  'Microsoft.ACE.OLEDB.12.0',
  'Excel 8.0;HDR=NO;Database=C:\test\table.xls;',
  [Sheet1$]
) 
SELECT id, summary, description FROM table 
```

一些限制

*   您必须先创建空的 excel 文件。

*   您必须在与插入数据相匹配的第一行中添加列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:42:24.837

我想通了，只需使用 BCP（批量复制程序）来完成这样的工作：

bcp "select * from [databasename].[dbo].[tablename]" queryout "c:\test\table.csv" -c -t"," -r"\n" -S servername -T

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:29:36.623

试试这个： mysql -b -e "$MY_QUERY" > my_data.csv 并查看此 Q 以获取参考和更多详细信息 [将 mysql 查询结果转换为 CSV（复制/粘贴）](https://stackoverflow.com/questions/2066897/convert-mysql-query-results-to-csv-with-copy-paste)

# android - 如何验证编辑文本，以便只能输入有效的电子邮件？

> ID：14821050
> 
> 赞同：-3
> 
> 时间：2013-02-11T21:19:39.253
> 
> 标签：android

我使用eclipse制作了一个android应用程序。我有 editText 框来验证为电子邮件。这个editText 显然是在XML 中，它的id 是“editText1”。我找到了如何验证电子邮件的答案，但我的问题是：我不知道如何将其应用于我的 java 代码中的“editText1”。

```
Below i present the code for email validation that i found:

   public final Pattern EMAIL_ADDRESS_PATTERN = Pattern.compile(
            "[a-zA-Z0-9\\+\\.\\_\\%\\-\\+]{1,256}" +
            "\\@" +
            "[a-zA-Z0-9][a-zA-Z0-9\\-]{0,64}" +
            "(" +
            "\\." +
            "[a-zA-Z0-9][a-zA-Z0-9\\-]{0,25}" +
            ")+"
        );

    private boolean checkEmail(String email) {
        return EMAIL_ADDRESS_PATTERN.matcher(email).matches();
} 
```

当我将此代码粘贴到我的 java 文件中时，我收到以下消息：

“从不在本地使用 MainActivity 类型的方法 checkEmail(string)”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:25:28.937

您必须参考您的 EditText

像这样的东西应该工作：

```
EditText et = (EditText) findViewById(R.id.editText1); 
```

然后你可以像这样从你的 EditText 获取文本：

```
String str = et.getText().toString(); 
```

然后你可以调用你的验证方法

```
if(checkEmail(str)){
  //email is valid
} 
```

但是，根据您提出的问题以及您提出问题的方式，我可以告诉您，在您深入研究 android 之前，您可能会从回去学习纯 java 中受益匪浅。一旦你掌握了 java 语法，你应该从官方 Android 开发者网站上的示例和教程开始，它涵盖了很多你似乎难以理解的基础知识。

最后一点，“editText1”对于您的 EditText 来说不是一个很好的名称，它没有解释有关该对象的任何内容。如果您努力为对象使用更具描述性的名称，您的代码将更容易使用，也许“emailText”可能是更好的选择？

# java - java中的十六进制转义序列匹配

> ID：14821051
> 
> 赞同：0
> 
> 时间：2013-02-11T21:19:41.177
> 
> 标签：java, string-matching

我[在 Java 中使用了这个 \x Escape？](https://stackoverflow.com/questions/3613759/x-escape-in-java)问题并发现 java 中的十六进制转义是 \u0048 但现在我想在 java 中使用 regx 进行十六进制序列匹配。这是我尝试过的，但它不起作用：

模式十六进制 = Pattern.compile("\\u0048([0-9A-Fa-f]+)");

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:21:08.807

也许你想要

```
Pattern hex = Pattern.compile("\\u([0-9A-Fa-f]{4})"); 
```

?

# php - Ajax & MySQL 填充选择下拉框 (3)

> ID：14821052
> 
> 赞同：0
> 
> 时间：2013-02-11T21:19:42.367
> 
> 标签：php, mysql, sql, ajax, database

我对下拉选择框（其中 3 个）有疑问。我使用过 Ajax 和 PHP/MySQL，但遇到了一个问题。:(

如果我（第一个）选择“predmet”，那么另一个选择框让我为所选的“predmet”/“计划”选择“cjelina”（第二个），第三个选择框让我为所选的“cjelina”选择“jedinica” ' 选定的 'predmet'。

如果我选择“predmet”/“plan”，那么它会显示“predmet”中的“naziv”，但我不允许为选定的“predmet”选择“cjelina”，然后为选定的“cjelina”选择“jedinica”。

我无法弄清楚问题所在。

我相信问题出在 SELECT 和 INNER JOIN 中。

如果有人能解决我的问题，我将不胜感激！

谢谢你！

我在这里提供了所有必需的数据：

[从 phpMyAdmin 转储 - MySQL 数据库](http://www.fritexdesigns.com/download/ajax/dump.txt)

[索引.php](http://www.fritexdesigns.com/download/ajax/index.txt)

**查找城市.php**

```
<? $countryId=intval($_GET['country']);
$stateId=intval($_GET['state']);
$link = mysql_connect('localhost', 'root', '');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('db_ajax');
$query="SELECT * FROM stavka_n_j_c WHERE countryid='$countryId' AND stateid='$stateId'";
$result=mysql_query($query);

?>
<select name="city">
<option>Select jedinica</option>
<? while($row=mysql_fetch_array($result)) { ?>
<option value><?=$row['id_jed']?></option>
<? } ?>
</select> 
```

**findState.php**

```
<? $country=intval($_GET['id_plana']);
$link = mysql_connect('localhost', 'root', '');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('db_ajax');
$query="SELECT *
        FROM planovi
        INNER JOIN stavka_n_j_c ON planovi.id_plana = stavka_n_j_c.id_plana
        INNER JOIN nast_cjelina ON stavka_n_j_c.id_cjel = nast_cjelina.id_cjel
        WHERE stavka_n_j_c.id_plana='$country'
        ";
$result=mysql_query($query);

?>
<select name="state" onchange="getCity(<?=$country?>,this.value)">
<option>Select cjelina</option>
<? while($row=mysql_fetch_array($result)) { ?>
<option value=<?=$row['id_cjel']?>><?=$row['naz_cjel']?></option>
<? } ?>
</select> 
```

# javascript - jQuery在悬停时暂停预显示大型菜单

> ID：14821053
> 
> 赞同：0
> 
> 时间：2013-02-11T21:19:44.267
> 
> 标签：javascript, jquery, megamenu

有一个小菜单，需要在悬停短暂暂停后出现一个大型菜单，否则它会随着每只鼠标悬停而立即出现，这有点忙。

超级菜单工作得很好，直到悬停的东西变得非常烦人！

尝试使用`hoverIntent`但无法弄清楚它仅通过链接而不是链接和菜单来停止鼠标“不显示”所需的功能，如果这有意义的话？

我可能的裤子代码是这样的......

```
$("li.view_products a").add('.megamenu').hover(
    function(){
        $('.megamenu').removeClass('no_show');
    },
    function(){
        $('.megamenu').addClass('no_show');
    }
) 
```

我一直在研究以前提出的问题，并看到一些提及`SetTimeOut`等？但我无法确定它的头或尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:24:26.033

您尝试使用 jquery 手风琴吗？

# c++ - 使用一个类作为类型在另一个类中声明一个变量

> ID：14821054
> 
> 赞同：-2
> 
> 时间：2013-02-11T21:19:48.490
> 
> 标签：c++, class, constructor

在 C++ 中，如何使用一个带有参数的类来作为新类型为其构造函数提供参数，以在另一个类中声明一个变量（并使用第二个类的构造函数获取的输入来提供第一个类的构造函数？）

我想要做的是类似于以下内容，但我不知道如何正确执行 Object 类部分并且我不断收到错误（我不想从 Color 类派生 Object 类）

```
enum color_enum {red, blue, green, black};
class color
{
protected:
   color_enum col;
public:
   color(color_enum initval)
   {
      col = initval;
   }
   string str()
   {
      switch (col)
      {
      case red:
         return "red";
      case blue:
         return "blue";
      case green:
         return "green";
      case black:
         return "black";
      default:
         return "N/A";
   }
  }
};

ostream &operator<< (ostream &out, color &inst)
{
  out << inst.str();
  return out;
}

class Object
{
public:
  float objvolume;
  float objmass;
  string objname;
  color objcolor(initval);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:22:42.950

使用初始化列表：

```
class Object {
public:
    Object(color_enum initval) : objcolor(initval){}
                          //   ^^^^^^^^^^^^^^^^^^^ 
                          //initialize objcolor with initval               
    //...
    color objcolor;
};

...

Object o(red); //objcolor will be constructed with red as an argument 
```

在 C++11 中，您可以使用类内初始化并执行以下操作：

```
color objcolor{red}; 
```

但是，这仅适用于默认值，不适用于传递给构造函数的值。

# python - 在 Python 中获取新单词的派生形式

> ID：14821060
> 
> 赞同：0
> 
> 时间：2013-02-11T21:20:18.503
> 
> 标签：python, nltk

我想知道我是否可以获得给定单词的所有派生形式

例如，给定单词“good”，我得到“goodness”和“advantage”等。

特别是，得到一个“形容词”的相关名词

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:49:30.220

It's going to be somewhat difficult to do what you're wanting for a few reasons, especially the problem of ambiguity. This can be alleviated somewhat if you choose the correct sense of the word, or otherwise do automatic [word sense disambiguation](https://en.wikipedia.org/wiki/Word-sense_disambiguation) (WSD).

As an example, for the word 'good', there are 27 senses in WordNet, and 37 unique [lemmas](https://en.wikipedia.org/wiki/Lemma_%28morphology%29) (dictionary forms).

Here is a quick example using NLTK's implementation of WordNet.

```
>>> from nltk.corpus import wordnet
>>> good = wordnet.synsets('good')

>>> lemmas = set()
>>> for synset in good:
    for lemma in synset.lemmas:
        lemmas.add(lemma.name)
>>> lemmas
set(['beneficial', 'right', 'secure', 'just', 'unspoilt', 'respectable', 'good', 'goodness', 'dear', 'salutary', 'ripe', 'expert', 'skillful', 'in_force', 'proficient', 'unspoiled', 'dependable', 'soundly', 'honorable', 'full', 'undecomposed', 'safe', 'adept', 'upright', 'trade_good', 'sound', 'in_effect', 'practiced', 'effective', 'commodity', 'estimable', 'well', 'honest', 'near', 'skilful', 'thoroughly', 'serious'])
>>> len(lemmas)
37

>>> for synset in good:
    print synset
    print synset.lemmas
    print '-' * 79

Synset('good.n.01')
[Lemma('good.n.01.good')]
-------------------------------------------------------------------------------
Synset('good.n.02')
[Lemma('good.n.02.good'), Lemma('good.n.02.goodness')]
-------------------------------------------------------------------------------
Synset('good.n.03')
[Lemma('good.n.03.good'), Lemma('good.n.03.goodness')]
-------------------------------------------------------------------------------
Synset('commodity.n.01')
[Lemma('commodity.n.01.commodity'), Lemma('commodity.n.01.trade_good'), Lemma('commodity.n.01.good')]
-------------------------------------------------------------------------------
Synset('good.a.01')
[Lemma('good.a.01.good')]
-------------------------------------------------------------------------------
Synset('full.s.06')
[Lemma('full.s.06.full'), Lemma('full.s.06.good')]
-------------------------------------------------------------------------------
Synset('good.a.03')
[Lemma('good.a.03.good')]
-------------------------------------------------------------------------------
Synset('estimable.s.02')
[Lemma('estimable.s.02.estimable'), Lemma('estimable.s.02.good'), Lemma('estimable.s.02.honorable'), Lemma('estimable.s.02.respectable')]
-------------------------------------------------------------------------------
Synset('beneficial.s.01')
[Lemma('beneficial.s.01.beneficial'), Lemma('beneficial.s.01.good')]
-------------------------------------------------------------------------------
Synset('good.s.06')
[Lemma('good.s.06.good')]
-------------------------------------------------------------------------------
Synset('good.s.07')
[Lemma('good.s.07.good'), Lemma('good.s.07.just'), Lemma('good.s.07.upright')]
-------------------------------------------------------------------------------
Synset('adept.s.01')
[Lemma('adept.s.01.adept'), Lemma('adept.s.01.expert'), Lemma('adept.s.01.good'), Lemma('adept.s.01.practiced'), Lemma('adept.s.01.proficient'), Lemma('adept.s.01.skillful'), Lemma('adept.s.01.skilful')]
-------------------------------------------------------------------------------
Synset('good.s.09')
[Lemma('good.s.09.good')]
-------------------------------------------------------------------------------
Synset('dear.s.02')
[Lemma('dear.s.02.dear'), Lemma('dear.s.02.good'), Lemma('dear.s.02.near')]
-------------------------------------------------------------------------------
Synset('dependable.s.04')
[Lemma('dependable.s.04.dependable'), Lemma('dependable.s.04.good'), Lemma('dependable.s.04.safe'), Lemma('dependable.s.04.secure')]
-------------------------------------------------------------------------------
Synset('good.s.12')
[Lemma('good.s.12.good'), Lemma('good.s.12.right'), Lemma('good.s.12.ripe')]
-------------------------------------------------------------------------------
Synset('good.s.13')
[Lemma('good.s.13.good'), Lemma('good.s.13.well')]
-------------------------------------------------------------------------------
Synset('effective.s.04')
[Lemma('effective.s.04.effective'), Lemma('effective.s.04.good'), Lemma('effective.s.04.in_effect'), Lemma('effective.s.04.in_force')]
-------------------------------------------------------------------------------
Synset('good.s.15')
[Lemma('good.s.15.good')]
-------------------------------------------------------------------------------
Synset('good.s.16')
[Lemma('good.s.16.good'), Lemma('good.s.16.serious')]
-------------------------------------------------------------------------------
Synset('good.s.17')
[Lemma('good.s.17.good'), Lemma('good.s.17.sound')]
-------------------------------------------------------------------------------
Synset('good.s.18')
[Lemma('good.s.18.good'), Lemma('good.s.18.salutary')]
-------------------------------------------------------------------------------
Synset('good.s.19')
[Lemma('good.s.19.good'), Lemma('good.s.19.honest')]
-------------------------------------------------------------------------------
Synset('good.s.20')
[Lemma('good.s.20.good'), Lemma('good.s.20.undecomposed'), Lemma('good.s.20.unspoiled'), Lemma('good.s.20.unspoilt')]
-------------------------------------------------------------------------------
Synset('good.s.21')
[Lemma('good.s.21.good')]
-------------------------------------------------------------------------------
Synset('well.r.01')
[Lemma('well.r.01.well'), Lemma('well.r.01.good')]
-------------------------------------------------------------------------------
Synset('thoroughly.r.02')
[Lemma('thoroughly.r.02.thoroughly'), Lemma('thoroughly.r.02.soundly'), Lemma('thoroughly.r.02.good')]
------------------------------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T22:23:07.150

我建议查看 NLTK 中的[WordNet 语料库](http://nltk.org/api/nltk.corpus.reader.html#module-nltk.corpus.reader.wordnet)。更多关于 WordNet[的信息](http://en.wikipedia.org/wiki/WordNet)。

# mysql - MySQL 返回具有 DISTINCT 的其他列

> ID：14821062
> 
> 赞同：1
> 
> 时间：2013-02-11T21:20:29.177
> 
> 标签：mysql

在查询方面需要一点帮助。

```
SELECT id,email FROM user_info WHERE username!='' 
     AND email='example@gmail.com' 
     GROUP BY email ORDER BY id DESC LIMIT 1 
```

目前所做的是获取一个不同的电子邮件，但不是该电子邮件下帐户的最新 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:21:39.790

听起来您可以将聚合应用于该`id`字段，它将返回每封电子邮件的最新 ID：

```
SELECT Max(id), email 
FROM user_info 
WHERE username!='' 
  AND email='example@gmail.com' 
GROUP BY email 
```

不幸的是，当您应用`GROUP BY`没有聚合的 a 时，`id`除非您指定选择最大值，否则无法保证将返回什么。

如果要返回与 关联的用户名，`max(id)`则可以使用子查询：

```
SELECT i.MaxId, 
  i.email, 
  u.username
FROM user_info u
inner join
(
  select max(id) MaxId, email
  from user_info
  WHERE username!='' 
    AND email='example@gmail.com' 
  group by email
) i
  on u.id = i.maxid
  and u.email = i.email
WHERE username!='' 
  AND email='example@gmail.com'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T21:53:18.193

如果“最新 id”是指最大值，那么这是一种利用 MySQL 用户变量来保留先前行的值的方法，因此可以进行比较：

```
SELECT IF(u.email=@prev_email,1,0) AS dup_email_ind
     , u.id
     , u.username
     , @prev_email := u.email AS email
  FROM user_info u
 CROSS
  JOIN ( SELECT @prev_email := NULL) i
 WHERE u.username != ''
   AND u.email = 'example@gmail.com'
 GROUP 
    BY u.email    DESC
     , u.id       DESC
     , u.username DESC 
```

这将返回所有行，并指示该行是否被视为较旧的“重复”电子邮件。已`dup_email_ind = 1`被标识为较旧重复的行，`dup_email_ind`= 0 表示该行是给定电子邮件值的最新行（具有最大 id 值的行）。

（通常，当我在寻找这样的重复项时，返回两个或所有“重复”行对我很有帮助。）

要仅返回具有“最新 id”的行，请将上面的查询（作为内联视图）包装在另一个查询中：查询的输出用作外部查询的行源。）

```
SELECT d.*
  FROM (
         -- the query above gets put here
       ) d
 WHERE d.dup_mail_ind = 0 
```

* * *

另一种方法是在 SELECT 列表中使用相关子查询，尽管这实际上只适用于返回小集合。（这种方法在处理大型集合时可能会出现严重的性能问题。）

```
SELECT ( SELECT u1.id
           FROM user_info u1
          WHERE u1.email = e.email
            AND u1.username != ''
          ORDER BY u1.id DESC
          LIMIT 1
        ) AS id
      , ( SELECT u2.username
           FROM user_info u2
          WHERE u2.email = e.email
            AND u2.username != ''
          ORDER BY u2.id DESC
          LIMIT 1
        ) AS username
      , e.email
   FROM ( SELECT u.email
            FROM user_info u
           WHERE u.email = 'example@gmail.com'
             AND u.username != '' 
           GROUP BY u.email
        ) e 
```

# csv - 如何在 d3 中从 csv 加载数据后绘图

> ID：14821063
> 
> 赞同：1
> 
> 时间：2013-02-11T21:20:32.937
> 
> 标签：csv, d3.js

我正在使用以下给出的十六进制分箱示例：http: [//bl.ocks.org/4248145](http://bl.ocks.org/4248145)

我想进行修改以从包含点 x 和 y 列的 csv 读取数据。

想修改这一行：

```
var points = d3.range(2000).map(function() { return [randomX(), randomY()]; }); 
```

这样 points 包含两列数据。

如何从 csv 的两列数据中生成 points 变量？由于十六进制分箱需要整个数组（一次所有行），d3.csv 似乎并没有削减它，因为它是异步的，并且回调函数在数据的每一行上 - 有没有办法设置csv文件中数据的点变量，然后仅在调用完成后绘制？

# r - ggplot2中没有数据时换行

> ID：14821064
> 
> 赞同：35
> 
> 时间：2013-02-11T21:20:34.373
> 
> 标签：r, ggplot2

我正在使用 R 来绘制一些数据。

```
Date <- c("07/12/2012 05:00:00", "07/12/2012 06:00:00", "07/12/2012 07:00:00",
      "07/12/2012 08:00:00","07/12/2012 10:00:00","07/12/2012 11:00:00")
Date <- strptime(Date, "%d/%m/%Y %H:%M")
Counts <- c("0","3","10","6","5","4")
Counts <- as.numeric(Counts)
df1 <- data.frame(Date,Counts,stringsAsFactors = FALSE)
library(ggplot2)
g = ggplot(df1, aes(x=Date, y=Counts)) + geom_line(aes(group = 1))
g 
```

当有时间中断时，我如何要求 R 不要将数据绘制为连​​续线？我通常每小时都有一个数据点，但有时会有一个休息时间（早上 8 点到 10 点之间）。在这些点之间，我不希望线路连接。这在R中可能吗？

**编辑**

非常感谢这里的回复。我的数据现在以 10 秒为间隔，我希望使用这些数据进行同样的分析。

```
df <- structure(list(Date = c("11/12/2012", "11/12/2012", "11/12/2012", 
                     "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012", 
                     "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012"),
                     Time = c("20:16:00", "20:16:10", "20:16:20", "20:16:30", 
                     "20:16:40", "20:16:50", "20:43:30", "20:43:40", 
                     "20:43:50", "20:44:00", "20:44:10"),
                     Axis1 = c(181L, 14L, 65L, 79L, 137L, 104L, 7L, 0L, 0L, 
                     14L, 0L),
                     Steps = c(13L, 1L, 6L, 3L, 8L, 4L, 1L, 0L, 0L, 0L, 0L)),
                .Names = c("Date", "Time", "Axis1", "Steps"),
                row.names = c(57337L, 57338L, 57339L, 57340L, 57341L, 57342L, 
                57502L, 57503L, 57504L, 57505L, 57506L), class = "data.frame") 
```

我想我理解代码试图做什么，当它将列“组”添加到原始数据帧时，但我的问题围绕着我如何让 R 知道数据现在以 10 秒的间隔？当我应用第一行代码来确定数字是否连续或是否存在间隙时（例如 idx <- c(1, diff(df$Time))，我收到以下错误：

r[i1] - r[-length(r):-(length(r) - lag + 1L)] 中的错误：二元运算符的非数字参数

在我的`Time`变量之后，我是否需要添加`as.POSIXct`以确保它正确识别时间？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-11T21:28:18.250

您必须`group`通过为您想要连接的点设置一个通用值来进行设置。在这里，您可以将前 4 个值设置为 say `1`，将后两个值设置为`2`。并将它们作为因素。那是，

```
df1$grp <- factor(rep(1:2, c(4,2)))
g <- ggplot(df1, aes(x=Date, y=Counts)) + geom_line(aes(group = grp)) + 
                     geom_point() 
```

**编辑：**加载后，您`data.frame`可以使用此代码自动生成`grp`列：

```
idx <- c(1, diff(df$Date))
i2 <- c(1,which(idx != 1), nrow(df)+1)
df1$grp <- rep(1:length(diff(i2)), diff(i2)) 
```

**注意：**添加也很**重要**`geom_point()`，因为如果`discontinuous range`恰好是 data.frame 中的最后一个条目，则不会绘制它（因为连接线没有 2 个点）。在这种情况下，`geom_point()`将绘制它。

例如，我将生成一个有更多差距的数据：

```
# get a test data
set.seed(1234)
df <- data.frame(Date=seq(as.POSIXct("05:00", format="%H:%M"), 
                as.POSIXct("23:00", format="%H:%M"), by="hours"))
df$Counts <- sample(19)
df <- df[-c(4,7,17,18),]

# generate the groups automatically and plot
idx <- c(1, diff(df$Date))
i2 <- c(1,which(idx != 1), nrow(df)+1)
df$grp <- rep(1:length(diff(i2)), diff(i2))
g <- ggplot(df, aes(x=Date, y=Counts)) + geom_line(aes(group = grp)) + 
            geom_point()
g 
```

![ggplot2_groups](../Images/8dfe260e9abf67a45aac5fd0bbafca50.png)

**编辑：**对于您的新数据（假设它是`df`），

```
df$t <- strptime(paste(df$Date, df$Time), format="%d/%m/%Y %H:%M:%S")

idx <- c(10, diff(df$t))
i2 <- c(1,which(idx != 10), nrow(df)+1)
df$grp <- rep(1:length(diff(i2)), diff(i2)) 
```

现在用`aes(x=t, ...)`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-11T21:29:04.087

我认为 R 没有办法或`ggplot2`知道某处是否缺少数据点，除了你用`NA`. 这样，例如：

```
df1 <- rbind(df1, list(strptime("07/12/2012 09:00:00", "%d/%m/%Y %H:%M"), NA))
ggplot(df1, aes(x=Date, y=Counts)) + geom_line(aes(group = 1)) 
```

![在此处输入图像描述](../Images/38354a0e3b1e05842f65dfdc993eecda.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-19T20:18:35.977

[朱巴的答案](https://stackoverflow.com/a/14821191/892313)，包括显式`NA`你想要休息的地方，是最好的方法。这是在正确位置引入这些`NA`'s 的另一种方法（无需手动弄清楚）。

```
every.hour <- data.frame(Date=seq(min(Date), max(Date), by="1 hour"))
df2 <- merge(df1, every.hour, all=TRUE)
g %+% df2 
```

![在此处输入图像描述](../Images/78377c66de22b3b42557fa8adc49d66b.png)

`df`在将日期和时间更改为适当的格式后，您可以对后面的示例执行类似的操作

```
df$DateTime <- as.POSIXct(strptime(paste(df$Date, df$Time), 
                                   format="%m/%d/%Y %H:%M:%S"))
every.ten.seconds <- data.frame(DateTime=seq(min(df$DateTime), 
                                             max(df$DateTime), by="10 sec"))
df.10 <- merge(df, every.ten.seconds, all=TRUE) 
```

# c# - 从 CodeBehind 填充 GridView

> ID：14821065
> 
> 赞同：3
> 
> 时间：2013-02-11T21:20:34.377
> 
> 标签：c#, asp.net, webforms

我有以下代码：

```
[WebMethod]
public static string GenerateHtml(string id)
{
    //return id;
    DataView vwMain2;
    try
    {
        DbProviderFactory dbf = DbProviderFactories.GetFactory();
        using (IDbConnection con = dbf.CreateConnection())
        {
            string sSQL;
            sSQL = "select top 20                " + ControlChars.CrLf
                 + " ASSISTING_FILE_ID, DATE_ENTERED, CLIENT_CLAIM_NUM, PRIMARY_INSURED, PRIMARY_CLAIMANT, LOB_ID, FILE_STATUS, BRANCH_NAME," + ControlChars.CrLf
                 + " OWNERS_FIRST_NAME, OWNERS_LAST_NAME, OWNERS_NAME, OWNERS_EMAIL, OWNERS_OFFICE_PHONE, OWNERS_FAX_PHONE, OWNERS_CELL_PHONE" + ControlChars.CrLf
                 + "  from vwFILES_DetailViewWithOwners" + ControlChars.CrLf
                 + " where 1 = 1                    " + ControlChars.CrLf;
            //+ " where 1 = 1 and WEB_USER_ID = '" + Security.USER_ID.ToString() + "'" + ControlChars.CrLf;
            using (IDbCommand cmd = con.CreateCommand())
            {
                cmd.CommandText = sSQL;

                using (DbDataAdapter da = dbf.CreateDataAdapter())
                {
                    ((IDbDataAdapter)da).SelectCommand = cmd;
                    using (DataTable dt = new DataTable())
                    {
                        da.Fill(dt);
                        vwMain2 = dt.DefaultView;
                        GridView2.DataSource = vwMain2;

                            GridView2.DataBind();

                    }
                }
            }
        }
    }
    catch (Exception ex)
    {
        SplendidError.SystemError(new StackTrace(true).GetFrame(0), ex.Message);
        //lblError.Text = ex.Message;
    }

} 
```

我的 ASPX 页面中有以下内容：

```
<asp:GridView ID="GridView2" runat="server">
                </asp:GridView> 
```

当我尝试`GridView2`在后面的代码中引用时，它说：“非静态字段、方法或属性 GridView2 需要对象引用。”

如何解决此问题，以便在`GenerateHtml`调用时创建网格视图，还是**有更好的方法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:36:27.673

调用 WebMethod 时，您不会引用任何页面元素。请记住，您正在调用*静态*方法。要访问代码隐藏中的任何页面级元素，您必须通过 .NET 页面生命周期，所有“魔术”都在此发生。

看看这个 SO 问题，了解如何做你想做的事：[How to update an datagrid with webmethods](https://stackoverflow.com/questions/1764451/how-to-update-an-datagrid-with-webmethods)

# c# - 使用 FieldEditingControls 修改表单域

> ID：14821066
> 
> 赞同：0
> 
> 时间：2013-02-11T21:20:35.230
> 
> 标签：c#, kentico

我正在尝试在我们的联系我们表单中添加一个蜜罐字段。当我通过 Kentico GUI 向表单添加隐藏字段（条件使其不可见）时，它在源代码中不可用，因此我认为它实际上不会起作用。但是，我也尝试通过 GUI 添加表单并尝试在我的表单控件中修改 prerender 的样式也不起作用（下面的代码）。这很奇怪，因为它实际上可以让我更改表单控件中字段的值，但不能更改样式。这是 Kentico 的典型情况吗？是否有尝试实施蜜罐领域的解决方案？我曾建议我们向表单添加更多验证方法，但有人告诉我他们想要与现有表单相同的行为。

这是我正在使用的方法。((CMS.FormControls.EditingFormControl)viewBiz.BasicForm.FieldEditingControls["Pooh"]).Style.Add("display", "none");

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:51:09.817

在字段输入的高级属性下，您应该能够将样式应用于输入。你可以设置 display:none; 在那里向用户隐藏它，但仍然可以在源代码中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:15:53.543

我还将为此创建一个表单控件，以便可以通过一些验证功能轻松地将其应用于另一个表单控件（即重定向到验证码）

# wpf - WPF TabItem OnMouseOver 应触发 TabItem 内 Button 的可见性

> ID：14821067
> 
> 赞同：1
> 
> 时间：2013-02-11T21:20:48.490
> 
> 标签：wpf, triggers, datatemplate

我有一个包含 TabItems 的 TabControl。我覆盖了他们的 ItemTemplate 以包含：

*   显示 TabItem 标题的 TextBlock
*   关闭选项卡的按钮 (X)

现在我想让“X”按钮仅在选择 TabItem 或鼠标悬停时可见。

到目前为止，这是我的 XAML 代码...

```
<TabControl x:Name="tabControl" 
                    ItemsSource="{Binding OpenedItems}">
            <TabControl.ItemTemplate>
                <DataTemplate>
                    <Grid Name="grid" VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="{Binding TabCaption}"  
                                   Grid.Column="0"
                                   Foreground="White"
                                   HorizontalAlignment="Left" 
                                   Margin="3" 
                                   Name="label_TabTitle" 
                                   VerticalAlignment="Center" />
                        <Button Content="X"  
                                Grid.Column="1"
                                Foreground="White"
                                HorizontalAlignment="Right" 
                                Margin="3" 
                                Name="button_close" 
                                VerticalAlignment="Center" 
                                Width="20" 
                                Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" 
                                Visibility="Hidden" 
                                Click="button_close_Click_1">
                        </Button>
                    </Grid>

                    <DataTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True" >
                            <Setter TargetName="button_close" Property="Visibility" Value="Visible"/>
                        </Trigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </TabControl.ItemTemplate>
            <TabControl.ItemContainerStyle>
                <Style TargetType="TabItem">
                    <Setter Property="Background" Value="#1C1C1C" />
                    <Setter Property="Content" Value="{Binding TabContentView}"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type TabItem}">
                                <Grid Name="Grid"
                              Background="{StaticResource GrayBrush}">
                                    <ContentPresenter x:Name="ContentSite"
                                                  VerticalAlignment="Center"
                                                  HorizontalAlignment="Center"
                                                  ContentSource="Header"
                                                  RecognizesAccessKey="True">
                                    </ContentPresenter>
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter TargetName="Grid" Property="Background" Value="{StaticResource BlueBrush}" />
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="Grid" Property="Background" Value="{StaticResource LightBlueBrush}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </TabControl.ItemContainerStyle>
        </TabControl> 
```

使用 DataTemplate 中的触发器，它有点工作.. 但是：您必须将鼠标直接悬停在标签上才能显示按钮。所以基本上，不可能点击按钮，因为它又消失了。

对于这些 WPF 模板，我将不胜感激！

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:02:41.180

看起来好像您的 TabItem 没有设置背景，所以它没有捕捉到`MouseOverEvent`. 由于 TextBlock 具有前景集并具有文本，因此它会捕获 MouseOverEvent。尝试设置to的`Background`子网格，您应该会看到将被捕获并显示关闭按钮。`DataTemplate``Transparent``MouseOverEvent`

```
<TabControl x:Name="tabControl" ItemsSource="{Binding OpenedItems}">
    <TabControl.ItemTemplate>
        <DataTemplate>
             <Grid Name="grid" VerticalAlignment="Center" Background="Transparent">
                ...
             </Grid>
             ...
        </DataTemplate>
    </TabControl.ItemTemplate>
    ...
 </TabControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:57:14.143

如果您设置不透明度而不是可见性，它会起作用。删除了对可见性的所有引用，更改为不透明度：

您可能想检查我的代码编辑。不是 100% 肯定它是你所拥有的东西的副本，但这个想法是有效的。为什么？没有把握。:) 我猜 Hidden-Button 正在吞噬 MouseEnter 事件，但拒绝传递它们，因为它是隐藏的。

```
<TabControl x:Name="tabControl" 
                    ItemsSource="{Binding OpenedItems}">
            <TabControl.ItemTemplate>
                <DataTemplate>
                    <Grid Name="grid" VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="{Binding TabCaption}"  
                                   Grid.Column="0"
                                   Foreground="White"
                                   HorizontalAlignment="Left" 
                                   Margin="3" 
                                   Name="label_TabTitle" 
                                   VerticalAlignment="Center" />
                        <Button Content="X"  
                                Grid.Column="1"
                                Foreground="White"
                                HorizontalAlignment="Right" 
                                Margin="3" 
                                Name="button_close" 
                                VerticalAlignment="Center" 
                                Width="20" 
                                Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" 
                                Opacity="0"
                                Click="button_close_Click_1">
                        </Button>
                    </Grid>

                    <DataTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True" >
                            <Setter TargetName="button_close" Property="Opacity" Value="1"/>
                        </Trigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </TabControl.ItemTemplate>
            <TabControl.ItemContainerStyle>
                <Style TargetType="TabItem">
                    <Setter Property="Background" Value="#1C1C1C" />
                    <Setter Property="Content" Value="{Binding TabContentView}"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type TabItem}">
                                <Grid Name="Grid"
                              Background="{StaticResource GrayBrush}">
                                    <ContentPresenter x:Name="ContentSite"
                                                  VerticalAlignment="Center"
                                                  HorizontalAlignment="Center"
                                                  ContentSource="Header"
                                                  RecognizesAccessKey="True">
                                    </ContentPresenter>
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter TargetName="Grid" Property="Background" Value="{StaticResource BlueBrush}" />
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="Grid" Property="Background" Value="{StaticResource LightBlueBrush}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </TabControl.ItemContainerStyle>
        </TabControl> 
```

# c# - 将字符串转换为？

> ID：14821069
> 
> 赞同：0
> 
> 时间：2013-02-11T21:20:53.030
> 
> 标签：c#, winforms, reflection

我正在构建一个动态计算框架，它将基于这些类型的计算类型和属性构建一个通用 GUI。

例如，我可能有一个简单的加法器计算器（请原谅它的简单性，但是在组合框架时，我喜欢从简单的开始，然后逐步向上），它看起来像这样：

```
[CalculatorAttribute("This calculator add X+Y=Z")]
class AdderCalculator : CalculatorBase
{
    [CalculationValueAttribute(InputOutputEnum.InputValue, "First Input")]
    public int? X 
    {
        set { m_X = value; m_Z = null;}
        get { return m_X; }
    }

    [CalculationValueAttribute(InputOutputEnum.InputValue, "Second Input")]
    public int? Y 
    {
        set{ m_Y = value; m_Z = null;}
        get { return m_Y; }
    }

    [CalculationValueAttribute(InputOutputEnum.OutputValue, "Output")]
    public int? Z 
    {
        get { return m_Z; }
    }

    public AdderCalculator()
    {
        m_X = m_Y = m_Z = null;
    }

    public override Boolean ReadyToCalc()
    {
        return (m_X != null && m_Y != null);
    }

    public override Boolean NeedToCalc()
    {
        return (m_Z == null);
    }

    public override void Calculate()
    {
        if(ReadyToCalc()){ m_Z = m_X + m_Y;}
    }

    private int? m_X, m_Y, m_Z;
} 
```

（请原谅空格，我试图在不牺牲太多可读性的情况下尽可能减小大小）。

我正在使用可为空的类型来区分未设置的值和设置的值

现在，在我的 GUI 中，我使用`TextBox`es 来收集输入信息。从`TextBox`，我只能得到文本（字符串）。使用反射，我知道属性的名称并且可以获取它的设置器（`set_X`或者`set_Y`在这种情况下）。

该字段的类型（当然）是`int?`（可为空的 int），但我可以使用：

```
 PropertyInfo.PropertyType.GetGenericArguments(); 
```

获取`Int32`类型的方法（或`Int64`，视情况而定）。

因此，鉴于我最终可以得到一个`Type`对象的实例，任何人都可以推荐一种通用方法来转换`String`为该类型

我考虑的是：

1.  在我的 AdderCalculator 中实现一个字符串设置方法：`set_X(String s)`
2.  将我的控件类型更改为`NumericUpDown`，因为它将返回一个`Decimal`
3.  将类型更改为`Decimal`，但`Decimal`不能直接从`String`任何一个转换（它可以使用解析，但从通用的角度来看这更难

任何人都可以提供额外的见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:53:42.657

只是为了在可以清楚地看到答案的地方找到答案，我最终得到的代码是：

```
 // collect relevant inputs
            foreach (Control c in fPanelIn.Controls)
            {
                if (c.Tag is PropertyInfo) 
                {
                    PropertyInfo pi = c.Tag as PropertyInfo;

                    if(c.Text.Length>0)
                    {
                        Type ti = pi.PropertyType;

                        if (ti.IsGenericType)
                        {
                            ti = ti.GetGenericArguments()[0];
                        }
                        object o = Convert.ChangeType(c.Text, ti);

                        pi.SetValue(Calculator, o, null);

                        //MethodInfo mi = calcType.GetMethod(ConstructMethodName(pi), new Type[] { typeof(String) });

                        //mi.Invoke(Calculator, new object[] { c.Text });
                    }
                    else
                    {
                        pi.SetValue(Calculator, null, null);
                    }
                }
            } 
```

我仍然需要为无效值添加一些异常保护，但这适用于任何数字类型（字节、短、整数、int32、int64、浮点、双精度、小数等）的属性类型

# .net - 收集磁盘活动统计信息的程序

> ID：14821075
> 
> 赞同：0
> 
> 时间：2013-02-11T21:21:23.110
> 
> 标签：.net, performance, performancecounter

我正在使用各种设置对我们应用程序的数据库性能进行基准测试，以确定哪些值可以为我们提供最佳性能。我需要跟踪的指标`Active Time`在 Windows 7 的资源监视器中调用，位于`Disk`选项卡上的`Storage`. 在资源监视器中为此统计显示的值是即时的。我需要像计算图表中包含的其他统计数据一样计算滚动 1 分钟的平均值。

有没有可以下载的程序可以做到这一点？如果不是，我需要调用哪些 API 才能获得该值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:32:34.727

你只需要在windows中设置性能计数器来记录你想要的。这可以[在您的程序内部](http://www.codeproject.com/Articles/8590/An-Introduction-To-Performance-Counters)完成，也可以让 Windows 从[Performance Monitor](http://technet.microsoft.com/en-us/library/cc749249.aspx) ( `perfmon.exe`) 内部跟踪它（因此您的程序不需要运行即可进行记录，只需设置一个[数据收集器集](http://technet.microsoft.com/en-us/library/cc749337.aspx)，您就可以让它记录在任何您想要的时间表）然后让您的程序在以后解析日志。

# python - 使用python通过字符串在父节点中搜索XML节点

> ID：14821076
> 
> 赞同：0
> 
> 时间：2013-02-11T21:21:28.393
> 
> 标签：python, xml

我正在使用 python xml.dom。我正在寻找一种特定的方法，它接受一个节点和字符串并返回名为字符串的 xml 节点。我在文档中找不到

我想它会像这样工作

`nodeObject =parent.FUNCTION('childtoFind')`

nodeObject 在父级下的位置

或者除非存在这种方法，有没有办法可以使字符串成为节点对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:27:20.573

您正在寻找[`.getElementsByTagname()`功能](http://docs.python.org/2/library/xml.dom.html#xml.dom.Element.getElementsByTagName)：

```
nodeObjects = parent.getElementsByTagname('childtoFind') 
```

它返回一个列表；如果您只需要一个节点，请使用索引：

```
nodeObject = parent.getElementsByTagname('childtoFind')[0] 
```

你真的想改用[ElementTree API](http://docs.python.org/2/library/xml.etree.elementtree.html)，它更容易使用。甚至[`minidom`文档](http://docs.python.org/2/library/xml.dom.minidom.html)也提出了这个建议：

> 尚未精通 DOM 的用户应考虑改用该`xml.etree.ElementTree`模块进行 XML 处理。

ElementTree API 有一个`.find()`函数可以让你找到第一个匹配的后代：

```
element = parent.find('childtoFind') 
```

# html - 水平线和在 html、css 中编码的正确方法

> ID：14821087
> 
> 赞同：136
> 
> 时间：2013-02-11T21:22:01.787
> 
> 标签：html, css

我需要在某个块之后画一条水平线，我有三种方法可以做到：

1）定义一个类`h_line`并向它添加css特性，比如

```
#css
.hline { width:100%; height:1px; background: #fff }

#html
<div class="block_1">Lorem</div> <div class="h_line"></div> 
```

2) 使用`hr`标签

```
#css
hr { width:100%; height:1px; background: #fff }

#html
<div class="block_1">Lorem</div> <hr /> 
```

3) 像`after`伪类一样使用它

```
#css
.hline:after { width:100%; height:1px; background: #fff; content:"" }

#html
<div class="block_1 h_line">Lorem</div> 
```

哪种方式最实用？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2013-02-11T21:25:08.670

```
hr {
    display: block;
    height: 1px;
    border: 0;
    border-top: 1px solid #ccc;
    margin: 1em 0;
    padding: 0;
}
```

```
<div>Hello</div>
<hr/>
<div>World</div>
```

以下是[html5boilerplate](http://html5boilerplate.com/)的工作方式：

```
hr {
    display: block;
    height: 1px;
    border: 0;
    border-top: 1px solid #ccc;
    margin: 1em 0;
    padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-02-11T21:24:23.670

我会使用语义标记，使用`<hr/>`.

除非它只是您想要的边框，否则您可以使用填充、边框和边距的组合来获得所需的边界。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-01-20T14:10:39.783

```
.line {
  width: 53px;
  height: 0;
  border: 1px solid #C4C4C4;
  margin: 3px;
  display:inline-block;
}
```

```
<html>
<body>
<div class="line"></div>
<div style="display:inline-block;">OR</div>
<div class="line"></div>
</body>
</html>
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-02-11T21:25:03.100

> 在 HTML5 中，`<hr>`标签定义了一个主题中断。在 HTML 4.01 中， `<hr>`标签代表水平线。

[http://www.w3schools.com/tags/tag_hr.asp](http://www.w3schools.com/tags/tag_hr.asp)

所以在定义之后，我更喜欢`<hr>`

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-04-24T15:12:40.460

如果您真的想要***主题休息***，请务必使用`<hr>`标签。

* * *

如果你只想要一条设计线，你可以使用类似 css 类的东西

```
.hline-bottom {
    padding-bottom: 10px;
    border-bottom: 2px solid #000; /* whichever color you prefer */
} 
```

并像使用它一样

```
<div class="block_1 hline-bottom">Cheese</div> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-10-12T06:00:10.307

我想要一条长划线，所以我用了这个。

```
.dash{
        border: 1px solid red;
        width: 120px;
        height: 0px;

}
```

```
<div class="dash"></div>
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-26T01:54:46.590

我的简单解决方案是使用 css 设置 hr 样式，使其具有零顶部和底部边距、零边框、1 像素高度和对比背景颜色。这可以通过直接设置样式或定义类来完成，例如：

```
.thin_hr {
margin-top:0;
margin-bottom:0;
border:0;
height:1px;
background-color:black;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-04T17:04:03.533

这取决于要求，但许多开发人员的建议是使您的代码尽可能**简单**。因此，请使用简单的“hr”标签和 CSS 代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-06T00:10:42.993

```
hr {
    display: block;
    height: 1px;
    border: 0;
    border-top: 1px solid #ccc;
    margin: 1em 0;
    padding: 0;
}
```

```
<div>Hello</div>
<hr/>
<div>World</div>
```

*强调文本*

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-27T02:42:28.947

这是一个相对简单的例子，对我有用。

```
hr {
    width: 70%;
    margin-left: auto;
    margin-right: auto;
} 
```

资源：[https ://www.w3docs.com/snippets/css/how-to-style-a-horizo​​ntal-line.html](https://www.w3docs.com/snippets/css/how-to-style-a-horizontal-line.html)

# android - 使用 Android，是否可以为手机和平板电脑提供不同的布局？

> ID：14821091
> 
> 赞同：1
> 
> 时间：2013-02-11T21:22:13.513
> 
> 标签：android, android-layout

好的，我知道根据 Android 的屏幕尺寸，大多数当前的手机和 7 英寸平板电脑都被认为是“大”的。但 480x800 像素的“大”手机和 800x1280 像素的“大”7 英寸平板电脑之间存在很大差异。我已经为这两种尺寸创建了单独的布局，但我仍然没有想到如何让手机看到 480x800 布局并让平板电脑看到 800x1280 布局。`layout-large-hdpi`我已经尝试将 res 文件夹名称调整为and之类的东西`layout-large-mdpi`，并将较小的手机布局保留为`layout`较大的平板电脑布局，`layout-sw600dp`如[Declaring Tablet Layouts for Android 3.2](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)页面所建议的那样，但问题在于 Android 仍在寻找这`drawable-hdpi`对于手机大小的图像。那么问题来了：**我如何声明手机布局，并让手机布局在手机drawables文件夹中查看，并声明平板电脑布局并在平板电脑drawables文件夹中查看布局？**我正在使用这个应用程序以 Android 3.2 为目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T00:33:42.140

听起来你在正确的轨道上。

将您的手机布局粘贴在“布局”中。

在“layout-sw720dp”中粘贴您的 10" 平板电脑布局

然后使用“layout-sw600dp”来定位 7 英寸设备。

您可以对可绘制文件夹使用相同的后缀，因此 drawable-sw600dp 将针对 7" 设备。[[参考](http://android-developers.blogspot.co.uk/2012/07/getting-your-app-ready-for-jelly-bean.html)]。

# powershell - 如何使用 PowerShell 更新 SharePoint 日历？

> ID：14821093
> 
> 赞同：2
> 
> 时间：2013-02-11T21:22:14.447
> 
> 标签：powershell, sharepoint, scripting

我一直在尝试使用 PowerShell 更新 SharePoint 日历（假设我有一个包含日历事件的 .csv 文件）并且没有成功。你能引导我完成这个动作吗？从如何将 SharePoint 相关框架加载到 PowerShell 开始？我是一个完整的 PowerShell 和 SharePoint 初学者......我认为这就是我卡住的地方。如有必要，我可以提供更多详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:04:17.183

我假设您可以访问 Sharepoint 服务器，如果是这种情况，那么第一步将是加载 Sharepoint 库，如下所示：

```
[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.SharePoint") 
```

之后，您可以获得默认的日历列表，如下所示：

```
$Site = New-Object Microsoft.Sharepoint.Spsite("http://localhost")
$Web = $Site.OpenWeb()
$Calendar = $Web.Lists["Calendar"] 
```

我不知道如何从这里开始，因为我以前没有这样做过，但是您可以尝试使用 $Calendar 对象的 AddItem 函数。明天我可以进一步研究，但与此同时，请随意尝试，如果您需要进一步的帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:32:45.667

您应该加载 SharePoint 命令行管理程序或运行

```
Add-PSSnapin Microsoft.SharePoint.PowerShell 
```

将额外的 SharePoint 内容加载到 PowerShell 中，例如`Get-SPSite`和`Get-SPWeb`

除此之外，您几乎只需使用常规的 SharePoint API。

这是 SharePoint 特定 cmdlet 的列表

[http://technet.microsoft.com/en-us/library/ff678226.aspx](http://technet.microsoft.com/en-us/library/ff678226.aspx)

下面是一个如何使用 C# 将列表项添加到列表的示例：

[http://www.c-sharpcorner.com/Blogs/9396/programmatically-add-an-event-to-sharepoint-2010-calendar.aspx](http://www.c-sharpcorner.com/Blogs/9396/programmatically-add-an-event-to-sharepoint-2010-calendar.aspx)

您需要擅长将 C# 转换为 PowerShell。

# android - 在 Android 上等价于 Key-Value Observing

> ID：14821096
> 
> 赞同：12
> 
> 时间：2013-02-11T21:22:31.007
> 
> 标签：android, cocoa-touch

Android 上是否有相当于 Cocoa Touch 的通知中心和[Key-Value Observing](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOCompliance.html#//apple_ref/doc/uid/20002178-BAJEAIEE)的技术？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T21:37:20.590

有[Property Change Listener](http://docs.oracle.com/javase/tutorial/uiswing/events/propertychangelistener.html)。

除此之外，它都是非常标准的 Java，所以你会绑定到一种或另一种风格的 EventListeners 中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T07:28:54.690

可以通过广播和广播接收器实现与 NSNotificationCenter 在 android 上的等效技术。有关更多信息，您应该阅读以下内容：http: [//developer.android.com/guide/faq/commontasks.html#broadcastreceivers](http://developer.android.com/guide/faq/commontasks.html#broadcastreceivers)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-02T13:36:50.707

检查以下库，它可以让您实现这种行为

[https://github.com/ahmed-basyouni/AndroidKVO](https://github.com/ahmed-basyouni/AndroidKVO)

# c - 当我打开 O_NONBLOCK 时，我得到“0”和“I/O 错误”

> ID：14821100
> 
> 赞同：0
> 
> 时间：2013-02-11T21:22:43.447
> 
> 标签：c, linux, tcp, redhat

当我打开`O_NONBLOCK`我的连接 len 返回`0`并且我的 errno 返回`EIO`。我期待 len 是`-1`并且 errno 是 `EAGAIN`。根据我得到的信息，我可以假设初始连接存在问题。我不明白为什么我会得到它。如果我注释掉我打开的位置，`O_NONBLOCK`我根本没有这个问题。我在打开方面错过了什么`O_NONBLCOK`吗？

**我的代码（主（））**

```
long len;

//Var for O_NONBLOCKING
int flags;

printf("R thread - starting\n");

MainTcpipIndex = TcpipIndex = 0;
while ( fMainShutdown == FALSE )
  {

  s_MuxWait(5000, "", &hevTcpipBuffAvail[MainTcpipIndex], 0);
  if ( hevTcpipBuffAvail[MainTcpipIndex] == 0)
     continue;

  len = s_recv( lSocket, TcpipRecord[MainTcpipIndex].TcpipBuffer,
              sizeof(TcpipRecord[MainTcpipIndex].TcpipBuffer));

    //initialize flags var      
  flags = fcntl(lSocket, F_GETFL, 0);

  //turns on O_NONBLOCKING
  fcntl(lSocket, F_SETFL, flags | O_NONBLOCK);

  if (len == -1  ||  len == 0 && errno != EAGAIN)  //0 = connection broken by host
     {
         ReceiveError = errno;
         hevReceiveError = 1;
         printf("R_main - set hevReceiveError ON\n");
         pthread_exit(NULL);
     }
 //catches O_NONBLOCK
 if (len == -1 && errno == EAGAIN)
     {
         LogMessage(&LogStruct, INFO, LOGQUEUE + LOGSCREEN, "Caught the
                     O_NONBLOCKING\n");
         len = 0;
         continue;
     }

  // Record Length
  TcpipRecord[MainTcpipIndex].ulTcpipBufLen = len;

  // Tell T Thread we have a message
  hevTcpipBuffUsed[MainTcpipIndex] = 1;
  hevTcpipBuffAvail[MainTcpipIndex] = 0;

  // Maintain Index
  if ( ++MainTcpipIndex >= MAX_TCPIP_BUFFS )
     MainTcpipIndex = 0;

  }//end while 
```

**编辑**

也许我第一次没有说清楚，我知道errno和len与`s_recv` 我的问题是我打开O_NONBLOCK时得到了不想要的结果；`s_recv`的 errno 是 EIO，它的 len 是 0。如果我关闭，`O_NONBLOCK`那么我的所有问题都会消失；len 为 1 或更大，不需要检查 errno。

以下是我期望的场景示例：

在第一个坏情况下`s_recv`，Len 为 0 或 -1，errno 不是 EAGAIN，连接被重置。

在第二个坏场景`s_recv`中，Len 是-1，errno 是 EAGAIN。这是根据手册页打开 O_NONBLOCK 时的预期场景。

在好的场景`s_recv`中 len 大于 1 不需要检查 errno。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:19:45.293

*在下一次*阅读之前，更改`O_NONBLOCK`为不相关。

 *因此，您必须在调用*之前*检查`len`and 。当然，您必须检查返回值，因为它也可能会失败。`errno` *`fcntl``fcntl`*

 *总而言之，`len == 0`与`errno == EIO`更改为 无关`O_NONBLOCK`，但与`s_recv`之前有关。

此外，请注意您的

```
if (len == -1 || len == 0 && errno != EAGAIN) 
```

是相同的

```
if (len == -1 || (len == 0 && errno != EAGAIN) ) 
```

这是没有意义的，因为如果返回值*不是* `-1`， errno 必须被忽略。如果返回值为`0`，则对等方已关闭连接。

**更新**：

我已经构建了一个简单的回显客户端

```
fd = socket(AF_INET, SOCK_STREAM, 0);
if (fd == -1)
    error("socket");

he = gethostbyname("localhost");
memset(&addr, 0, sizeof(addr));
addr.sin_family = AF_INET;
addr.sin_addr.s_addr = ((struct in_addr*)he->h_addr)->s_addr;
addr.sin_port = htons(7); /* echo */
if (connect(fd, (struct sockaddr*) &addr, sizeof(addr)) == -1)
    error("connect");

while (fgets(buf, sizeof(buf), stdin)) {
    n = strlen(buf);
    printf("fgets=%d, %s", n, buf);
    if (send(fd, buf, n, 0) == -1)
        error("send");

    n = recv(fd, buf, sizeof(buf), 0);
    if (n == -1)
        error("recv");

    printf("recv=%d, %s", n, buf);

    flags = fcntl(fd, F_GETFL, 0);
    printf("flags=%d\n", flags);
    if (fcntl(fd, F_SETFL, flags | O_NONBLOCK) == -1)
        error("fcntl");
} 
```

设置后`O_NONBLOCK`，我收到

> errno=11
> recv: 资源暂时不可用

如果我`fcntl(O_NONBLOCK)`在循环之前移动，一切正常。

因此，在读取或写入套接字之后摆弄非阻塞似乎是不可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:17:50.817

问题是这条线：

```
if (len == -1  ||  len == 0 && errno != EAGAIN) 
```

这相当于

```
if (len == -1  ||  (len == 0 && errno != EAGAIN)) 
```

因此，如果没有可用的数据 ( `len == -1`)，您将不会检查`errno`，只会无条件地标记错误并退出。此外，当存在 EOF ( `len == 0`) 时，不会设置 errno，因此检查它会给出之前调用中发生的任何事情。

你可能想要：

```
if ((len < 0 && errnor != EGAIN) || len == 0) {
    ReceiveError = (len < 0) ? errno : 0; 
```

此外，如果 fcntl 出现错误，则会破坏 errno（尽管我预计不会发生这种情况 - 使用 GETFL/SETFL 可能会看到的唯一失败是 EBADF。）您可能希望在调用 recv 之前执行 fcntl 调用.**

# java - 生成空指针异常的 Java 代码

> ID：14821107
> 
> 赞同：-4
> 
> 时间：2013-02-11T21:23:12.030
> 
> 标签：java, if-statement, nullpointerexception, while-loop, project

我得到这个空指针异常：

```
java.lang.NullPointerException
    at ATM.isItValid(ATM.java:64)
    at ATM.displayGreeting(ATM.java:59)
    at Bank.runATM(Bank.java:90)
    at Bank.displayBank(Bank.java:109)
    at Bank.addAccount(Bank.java:52)
    at Bank.displayBank(Bank.java:105)
    at Bank.addAccount(Bank.java:52)
    at Bank.displayBank(Bank.java:105)
    at BankDriver.main(BankDriver.java:6) 
```

从这段代码：

```
public void displayGreeting() {
    clearScreen();
    System.out.println("Welcome to Bob's Friendly Bank\n");
    do {
        System.out.print("Enter card number: ");
        currentCard = input.next();
        System.out.print("Enter PIN: ");
        currentPIN = input.next();
        System.out.println(currentCard + currentPIN);
    } while (!(isItValid()));
}
public boolean isItValid(){  
   boolean answer = false;
   if(theBank.validCard(currentCard, currentPIN))      //Exception thrown here.
       answer = true;
   return answer;    
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:27:09.917

ATM.theBank 永远不会被设置，因此当您在 isItValid 中访问它时会生成空指针异常

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:25:28.223

当您调用其 validCard 方法时，theBank 有一个 null。在实例化它之前你不能使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:32:31.310

`theBank`为空`ATM`。这是一种初始化它的方法：

```
public Bank() {    
    theATM      = new ATM( this);
...

public class ATM {
   ...
   public ATM( Bank bank ) {
      theBank = bank;
      input = new Scanner(System.in);
      currentCard = "";
      currentPIN = "";
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T21:29:30.870

`theBank`类中的变量`ATM`未初始化。您是否缺少一些代码？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T21:54:21.020

`theBank`未初始化。

如果是静态对象，则`new()`在类级别执行，否则在方法中执行。如果在您进入方法时它需要可用，请将其作为参数传递。

奖励：总是做`null`检查。

```
if(null!=theBank && theBank.validCard(currentCard, currentPIN)) 
```

# ipad - 使用情节提要和自动布局固定纵向和横向的视图宽度？

> ID：14821117
> 
> 赞同：1
> 
> 时间：2013-02-11T21:24:09.700
> 
> 标签：ipad, cocoa-touch, ios6, storyboard, autolayout

我正在开发这个 iPad 应用程序，我正在考虑使用自动布局来让我的生活更轻松。我创建了这个侧栏控件，它允许用户切换到不同的页面（就像标签栏控制器一样，但它位于 iPad 的左侧）。现在在横向我希望这个视图的宽度为 256 像素，但是当 iPad 处于纵向时我希望这个视图的宽度为 100 像素。如何根据界面方向使用自动布局来固定视图的宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:56:32.700

您可以使用**updateViewConstraints**调用来修改方向更改的布局。

下面的示例以编程方式创建了一个视图，但您可以在界面生成器中连接侧栏的宽度约束以实现相同的目的。

例如：

```
//create a custom view using autolayout, this is the equivalent of you side bar
- (void)viewDidLoad{
  [super viewDidLoad];
  //create a custom view
  [self.view setTranslatesAutoresizingMaskIntoConstraints:NO];
  UIView *vw=[[UIView alloc] init];
  self.customView =vw;
  self.customView.backgroundColor = [UIColor blackColor];
  [self.customView setTranslatesAutoresizingMaskIntoConstraints:NO];
  [self.view addSubview:self.customView];

  NSArray *arr;

  //horizontal constraints
  arr = [NSLayoutConstraint constraintsWithVisualFormat:@"|-20-[vw]"
                                                options:0
                                                metrics:nil
                                                  views:NSDictionaryOfVariableBindings(vw)];
  [self.view addConstraints:arr];

  //vertical constraints
  arr = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-20-[vw(200)]"
                                                options:0
                                                metrics:nil
                                                  views:NSDictionaryOfVariableBindings(vw)];
  [self.view addConstraints:arr];

}

- (void)updateViewConstraints{

  [super updateViewConstraints];

  //remove the existing contraint
  if(self.widthConstraint!=nil){
    [self.view removeConstraint:self.widthConstraint];
  }
  //portait set width to 100 
  if(UIInterfaceOrientationIsPortrait(self.interfaceOrientation)){
    self.widthConstraint = [NSLayoutConstraint constraintWithItem:self.customView
                                                        attribute:NSLayoutAttributeWidth
                                                        relatedBy:NSLayoutRelationEqual
                                                           toItem:nil
                                                        attribute:0
                                                       multiplier:1.0
                                                         constant:100.0];
  }
  //landscape set width to 256
  else{
    self.widthConstraint = [NSLayoutConstraint constraintWithItem:self.customView
                                                        attribute:NSLayoutAttributeWidth
                                                        relatedBy:NSLayoutRelationEqual
                                                           toItem:nil
                                                        attribute:0
                                                       multiplier:1.0
                                                         constant:256.0];
  }
  [self.view addConstraint:self.widthConstraint];
} 
```

# javascript - 在 DataBind 之后运行 JavaScript

> ID：14821120
> 
> 赞同：0
> 
> 时间：2013-02-11T21:24:16.930
> 
> 标签：javascript, asp.net

我有一个 ASP.Net 中继器控件，里面有一个表。是否可以在我调用之后直接运行 JavaScript 函数`MyRepeater.DataBind()`？我一直在尝试不同的东西，但没有任何东西触发 JavaScript 函数。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:18:40.130

作为[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)过程的一部分，数据绑定发生在服务器上的回发中。换句话说，不包括部分 postbadks，在这种情况发生时，浏览器中的任何现有 DOM 都会被销毁。在服务器上构建一个全新的页面并传输到浏览器，这样就可以构建和渲染一个新的 DOM。

这意味着您要考虑在页面的 onload 事件中运行 javascript。实现这一点的一种方法是使用[ClientScriptManager](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:32:36.893

可以使用 RegisterStartupScript 和 RegisterClientScriptBlock 方法从服务器端调用 Javascript。

[http://www.mindfiresolutions.com/Register-clientside-startup-script-from-serverside-code-286.php](http://www.mindfiresolutions.com/Register-clientside-startup-script-from-serverside-code-286.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T22:13:49.520

不，在代码隐藏执行并将页面交付给客户端之前，javascript 甚至不会呈现和运行。因此，添加脚本是您在代码隐藏中执行的第一件事还是您执行的最后一件事（或直接在`DataBind()`.

使用[ClientScriptManager 类](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.aspx)时，查看后面的代码，您会看到在结束`</form>`标记之前添加了动态 javascript（尽管它仍然可以完成您想要做的事情，只是使用不同的方法）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T18:45:59.327

好吧，我找到了一个解决方案，不确定它是否是最干净的方法，但是对于我的应用程序的上下文，它可以工作：

我在部分回发后运行了 javascript 代码：`Sys.WebForms.PageRequestManager.getInstance().add_endRequest();`

同样，不是最干净的，但适合我的需求。

感谢您的输入

# c# - Simple.Data 单向连接表两次

> ID：14821129
> 
> 赞同：0
> 
> 时间：2013-02-11T21:24:50.753
> 
> 标签：c#, asp.net-mvc, join, simple.data

我有一个用户表和一个消息表。Messages 表有两个对 Users 表的外键引用，“To_Id”和“From_Id”都指向 User.Id。我想编写一个查询，该查询将返回消息并允许我从由 To 和 From 关系表示的 User 获取 Username 属性。这是我到目前为止所拥有的：

```
dynamic sender;
dynamic recipient;
var messages= db.Messages.All(db.Messages.To_Id == currentUser.Id || db.Messages.From_Id == currentUser.Id)
    .Join(db.Users.As("Sender"), out sender).On(sender.Id == db.Messages.From_Id)
    .Join(db.Users.As("Recipient"), out recipient).On(recipient.Id == db.Messages.To_Id)
return messages; 
```

此查询的结果为我提供了正确的消息计数，但 To_Id 和 From_Id 列消失了，Sender 和 Recipient 列名称也没有出现。我尝试查看文档、github 上的源代码和这里的问题：[Simple.Data - how to bi-drectionally join on同一张桌子两次](https://stackoverflow.com/questions/12110898/simple-data-how-to-bi-drectionally-join-on-the-same-table-twice)但没有任何成功。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:15:17.953

我不知道您的 To_Id 和 From_Id 列会发生什么，但是如果您想预先加载用户行，则需要添加 With 子句：

```
dynamic sender;
dynamic recipient;
var messages= db.Messages.All(db.Messages.To_Id == currentUser.Id || db.Messages.From_Id == currentUser.Id)
    .Join(db.Users.As("Sender"), out sender).On(sender.Id == db.Messages.From_Id)
    .Join(db.Users.As("Recipient"), out recipient).On(recipient.Id == db.Messages.To_Id)
    .With(sender)
    .With(recipient);
return messages; 
```

至于缺少的列，您是否尝试过查看 Trace 以查看正在为查询执行的 SQL？这可能有助于阐明一些观点。

# ruby - 使用 rbenv 安装 ruby

> ID：14821136
> 
> 赞同：1
> 
> 时间：2013-02-11T21:25:17.673
> 
> 标签：ruby, rbenv

我用 rbenv 安装了 Ruby。尝试使用`gem install rails`我安装 Rails 时：

```
ERROR: Failed to build gem native extension. 
```

我怀疑我的 Ruby 版本有冲突。

`rbenv local`并`rbenv global`设置为 1.9.3-p327，但如果我输入`ruby -v`我会得到“ruby 1.8.7”。

如何将其更改为 1.9.3？

```
echo $PATH:
/usr/local/opt/rbenv/shims:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:32:35.147

尝试：

`rbenv local 1.9.3-p327`

接着

`rbenv rehash`只是要确定。

此外，您可以将 1.9.3-p327 设置为默认值：

`rbenv global 1.9.3-p327`

# php - php mysql中的搜索结果

> ID：14821138
> 
> 赞同：-2
> 
> 时间：2013-02-11T21:25:22.993
> 
> 标签：php, mysql

我正在寻求帮助，因为我尝试了几种选择，但最近没有成功。主要问题是结果表的标题始终显示，即使结果的值为“无结果”，我只想在没有表标题的情况下出现“无结果”消息。

```
if (preg_match("/^[  a-zA-Z]+/", $_POST['search'])) {     
    $name=$_POST['search']; 

    $sql="SELECT airport_id, airport_name, region_name, airport_code, island_name FROM airport, region, island WHERE airport_name LIKE '" . $name . "%' AND region_id=airport_region AND island_id=airport_island";   

    $result=mysql_query($sql); 
    $n=0;

    //* here is the table header with echo //should not be visible when $n=0
    while ($row=mysql_fetch_array($result)) {  
        $id_airport=$row['airport_id'];
        extract($row); 

        //*result of table when $n>=0 with the header of the table//
        ++$n;
    }

    if (0 == $n) {
        echo " no result ";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:32:40.607

```
if (mysql_num_rows($result)){
    //there are results
    //echo tale header
    //also start while loop
while($row=mysql_fetch_array($result)){  

$id_airport=$row['airport_id'];

extract($row); 

}
}else{
 echo 'No result';
} 
```

# iphone - 滚动时 UITextField 的不稳定内容作为表格单元格的子视图

> ID：14821144
> 
> 赞同：0
> 
> 时间：2013-02-11T21:25:56.720
> 
> 标签：iphone, ios, uitableview, scroll

我正在尝试将 a`UITextField`作为子视图添加到我的表格单元格中。文本字段的内容很好，直到我开始滚动并且单元格开始被重用。图片说明了问题。

![第一张截图](../Images/4a85756f09136beed5cfe82e2d8f0be0.png) ![第二张截图](../Images/56d9a998911cb70030ebd68c6fa7729a.png) ![第三张截图](../Images/0b320658c283a3d1690bde077ee44877.png)

起初，右边的蓝色值`UITextField`是正确的，即该值对应于行号。向下和向上滚动的第二和第三张图像显示这些值正在以奇怪的方式被重用。

我该如何避免这种情况？使用唯一值`reuseIdentifier`解决了这个问题，但显然它不是很有效。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITextField *numberTextField;
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        numberTextField = [[UITextField alloc] initWithFrame:CGRectMake(200, 10, 95, 30)];
        numberTextField.adjustsFontSizeToFitWidth = YES;
        numberTextField.textColor = [UIColor blueColor];
        numberTextField.placeholder = @"Enter value";
        numberTextField.keyboardType = UIKeyboardTypeDecimalPad;
        numberTextField.tag = ([indexPath row]+1);
        numberTextField.backgroundColor = [cell backgroundColor];
        numberTextField.textAlignment = NSTextAlignmentRight;
        numberTextField.clearButtonMode = UITextFieldViewModeNever;
        numberTextField.clearsOnBeginEditing = YES;
        [numberTextField setEnabled:YES];

        [cell addSubview:numberTextField];

    } else {
        numberTextField = (UITextField *)[cell.contentView viewWithTag:([indexPath row]+1)];
    }

    cell.textLabel.text = [NSString stringWithFormat:@"Row %i",[indexPath row]+1];
    numberTextField.text = [NSString stringWithFormat:@"Value: %i",[indexPath row]+1];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:31:34.350

问题是您只在创建 numberTextField 时将标签分配给它。如果它被重用，它不会重新分配它的标签。

您应该为 UITextField 使用常量标记号，而不是使用 row+1。

# arrays - 将 NSMutableArray 转换为浮点数组

> ID：14821151
> 
> 赞同：0
> 
> 时间：2013-02-11T21:26:24.223
> 
> 标签：arrays, nsmutablearray, parameter-passing

我有一个用“，”分隔的经纬度字符串：

```
 NSArray* coord = [newString componentsSeparatedByString:@","];

 NSMutableArray *lat= [[NSMutableArray alloc] init];
 NSMutableArray *lon = [[NSMutableArray alloc] init];

 for(int i=0;i<[coord count]-1;i=i+2)

    {

          [lat addObject:[coord objectAtIndex:i]];
          [lon addObject:[coord objectAtIndex:i+1]];

    } 
```

我想将它们与此功能一起使用：

```
 int pnpoly(int nvert, float *vertx, float *verty, float testx, float testy)
{
int i, j, c = 0;
for (i = 0, j = nvert-1; i < nvert; j = i++) {
    if ( ((verty[i]>testy) != (verty[j]>testy)) &&
        (testx < (vertx[j]-vertx[i]) * (testy-verty[i]) / (verty[j]-verty[i]) + vertx[i]) )
        c = !c;
}
return c; 
```

}

所以 NSMutableArray 不工作。所以我创建了这个：

```
 //Seperating the string with coordinates by ","
    NSArray* coord = [newString componentsSeparatedByString:@","];

    float *lat = malloc(sizeof(float) * ([coord count]/2));
    float *lon = malloc(sizeof(float) * ([coord count]/2));

    for(int i=0;i<[coord count]-1;i=i+2)

    {

        lat[i]= [[coord objectAtIndex:i] floatValue];
        lon[i]= [[coord objectAtIndex:i+1] floatValue];

    }
   free(lat);
    free(lon); 
```

这给了我一些错误，例如： (5629,0xacc3da28) malloc: ***对象 0x714c490 的错误：已释放对象的校验和不正确 - 对象可能在被释放后被修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:40:59.273

我想你想使用数组中的值
来获得这样的值，你可以使用 objectAtIndex 如下：
`[arrayName objectAtIndex:index];`

如果你真的想给一个 NSMutableArray 作为参数，你应该这样做：
`functionName: (NSMutableArray *) arrayName`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:46:10.607

鉴于其他信息，我认为您想要这个。

考虑到您已经建立了 NSMutableArray *lat 和 NSMutableArray *lon
，其中 lat 和 lon 具有尽可能多的非 nil 或 null 值。

```
for(int i=0;i<lat.count;i++)
{
    pnpoly(lat.count, [lat objectAtIndex:i], [lon objectAtIndex:i], static, static);
} 
```

# android - 如何在 Listview 中对齐 ImageView (Android)

> ID：14821152
> 
> 赞同：0
> 
> 时间：2013-02-11T21:26:27.530
> 
> 标签：android, xml, layout, imageview

我认为快速的一个：

我无法让我的 listView 正确对齐嵌入的 ImageView。

正如您在下面看到的，图像没有正确排列（它们受到相邻 TextView 中文本数量的影响）：

![图像问题](../Images/1a1e86d48387c233b9c04eee5d0db6ad.png)

这是行项目的有问题的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:orientation="horizontal" 
android:gravity="left">

<ImageView
    android:id="@+id/flagIcon"
    android:layout_width="60sp"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_alignParentLeft="true"
    android:layout_weight="0.05"
    android:src="@drawable/orange_flag"/>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:gravity="center_vertical"
    android:orientation="vertical" 
    >

    <TextView
        android:id="@+id/location_row_item_main_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="16sp"/>

    <TextView
        android:id="@+id/location_row_item_secondary_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" 
        android:textSize="12sp"/>

</LinearLayout>

<Button
    android:id="@+id/add_spec_button"
    android:layout_width="60sp"
    android:layout_height="60sp"
    android:layout_gravity="center_vertical"
    android:focusable="false"
    android:text="@string/location_add_spec"
    android:onClick="myClickHandler"/>

</LinearLayout> 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-27T11:10:23.107

![在此处输入图像描述](../Images/f25b2604c8c33ca4da65e5a8e4556a5f.png)

**布局视图**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_play_live" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_play_live" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_toRightOf="@+id/imageView1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:11:02.477

尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:orientation="horizontal" 
    android:gravity="left">

    <ImageView
        android:id="@+id/flagIcon"
        android:layout_width="60dp"
        android:layout_height="wrap_content"
        android:scaleType="centerInside"
        android:src="@drawable/orange_flag"/>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center_vertical|left"
        android:orientation="vertical" 
        >

        <TextView
            android:id="@+id/location_row_item_main_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="16sp"/>

        <TextView
            android:id="@+id/location_row_item_secondary_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" 
            android:textSize="12sp"/>

    </LinearLayout>

    <Button
        android:id="@+id/add_spec_button"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:gravity="center"
        android:focusable="false"
        android:text="@string/location_add_spec"
        android:onClick="myClickHandler"/>

</LinearLayout> 
```

主要问题是由中心垂直的宽度引起的`LinearLayout`。的重量`ImageView`也是无用的，它有一些用于`RelativeLayout`.

`android:gravity`注 1：注意和之间的区别`android:layout_gravity`。

注 2：`sp`大小单位用于文本大小。从文档：

> dp 是与密度无关的像素，对应于 160 dpi 像素的物理尺寸。
> sp 是相同的基本单位，但按用户首选的文本大小（它是与比例无关的像素）进行缩放，因此在定义文本大小时应使用此测量单位（但绝不用于布局大小）。

# css - 无法让 css 'content' 属性在 ie8 中工作

> ID：14821156
> 
> 赞同：0
> 
> 时间：2013-02-11T21:26:37.577
> 
> 标签：css, internet-explorer-8

所以，我已经尝试了所有我能想到的，或者找到了关于如何确保 IE 8 可以与我页面中的“内容”属性一起使用的方法。

不管我尝试什么，当在 IE9 中使用 F12 开发工具在 IE8 标准模式下查看时，页面根本不会加载。在 Adob​​e 的浏览器测试器中查看时，我也会收到“页面错误”。

一旦我从我的 css 中删除我的“内容”属性行，它就可以正常工作，但是当然，我失去了我想在所有其他浏览器中使用的酷阴影。

这是页面：[http](http://saks-jewelers.com) ://saks-jewelers.com （底部的特色产品部分）。

对我所缺少的有什么想法吗？（此站点使用 magento CE 1.7 运行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:47:18.620

除非您指定 doctype，否则 content 属性在 IE8 中将不起作用。这是根据 W3C。

把它放在代码的顶部，让我们知道它是否有效：

```
<!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:36:49.923

IE8 上的两个人都会失望！您是否尝试检查 ie8 中的检查元素以查看错误是否更具体？

您的投影是否在上次加载的 CSS 中定义？

# c# - 如何使用 dapper 每行创建 1 或 2 个对象？

> ID：14821159
> 
> 赞同：5
> 
> 时间：2013-02-11T21:27:01.440
> 
> 标签：c#, sql-server, dapper

我有一排有 4 列数据。我想从第 1-2 列中的数据创建一个对象 A。如果 1-2 列中不存在数据，请使用 3-4 列创建对象 B。在极少数情况下，我们将在所有列中都有数据，但第 2 列和第 4 列中的数据不匹配。在这种情况下，我想返回一个对象 A 和一个对象 B。

有没有办法在 dapper 中使用多重映射来做到这一点？或者我应该返回一个包含所有 4 列的对象 C，然后对数据进行后处理以创建实际想要的对象 A 和 BI？

```
public class A {
  public long ID {get;set;}
  public long Value {get;set;}
}
public class B {
  public long ID {get;set;}
  public long Value {get;set;}
} 
```

对象 A 和 B 彼此不相关（即 A 不包含 B 的列表）。所以我不确定如何进行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T09:21:24.113

如果数据按 分区`Id`，那么如果您使用包装器类型来表示这两个值，它应该已经可以工作了。例如，如果我们使用 a `Tuple<,>`，那么：

```
var data = conn.Query<A, B, Tuple<A, B>>(sql,(a, b) => Tuple.Create(a, b), args); 
```

# reporting-services - SSAS Cube 中数据的 SSRS 线性回归线

> ID：14821161
> 
> 赞同：0
> 
> 时间：2013-02-11T21:27:05.740
> 
> 标签：reporting-services, ssas, mdx, linear-algebra, linear-regression

**最终目标：使用基本最小二乘回归创建包含实际数据（来自 SSAS Cube）和最佳拟合线的散点图。**

目前，我的 MDX 看起来像这样：

```
SELECT NONEMPTY({[Measures].[Invoice Total]}) ON COLUMNS,
NONEMPTY( { [Billed Date].[Date].ALLMEMBERS}) ON ROWS
FROM 
(
SELECT NONEMPTY(StrToMember(@StartDate,CONSTRAINED):StrToMember(@EndDate,CONSTRAINED)) ON COLUMNS,
NONEMPTY( STRTOSET(@Requestor)) ON ROWS
FROM [Task Billing]
WHERE STRTOSET(@Project)
)
WHERE STRTOSET(@Division) 
```

如您所见，有大量参数用于过滤哪些数据应包含在回归中。我正在考虑使用`LinToPoint`，但我无法真正弄清楚，因为我对 MDX 很陌生。

我完全愿意接受解决方法。

关于如何做到这一点的任何想法？当然这是一个普遍的问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:54:15.133

你是 MDX 的新手......而且我已经忘记了我曾经知道的所有高级东西！不是一个很好的组合 - 对不起。我所能提供的只是我曾经用来在真实数据点中显示趋势线的实际 MDX。

```
 with 
 member [Measures].[X] 
    as 'Rank([Time], [Time].[Week].members)' 
 member [Measures].[Trend] 
    as 'LinRegPoint(X, [Time].[Week].members, [Measures].[Gross], X)'  
 select 
    {[Time].[Week].members} on rows, 
    {[Measures].[Gross], Trend} on columns 
 from [Sales] 
```

如果你能得到一个在你的立方体上工作的静态示例，使用我上面给出的基本框架，你可以稍后插入@parameters。我希望这在某种程度上有所帮助。随时发表评论，我会尽力提供建议，但我很生疏。

# c++ - 按字母顺序逐个数组排序

> ID：14821165
> 
> 赞同：0
> 
> 时间：2013-02-11T21:27:28.623
> 
> 标签：c++, sorting, character-arrays

我正在尝试按字母顺序对输入文件中具有相同频率的字符串数组进行排序。我首先遍历整个数组，并将索引设置在单词组具有相同频率的点处。然后我在给定的索引之间插入排序。这是功能：

```
//Insertion sort up the array, checking for same frequencies and moving words alphabetically downwards
int startIdx = 0;
int endIdx = 0;
for(int k = 0; k < freq.length(); k++) {
    if(freq.at(startIdx) == freq.at(k)) {
        endIdx++;
    }
    else { 
        insertionSort(startIdx, endIdx); //Sort the string array at the given indices
        startIdx = endIdx = k;
    }
} 
```

该函数不对数组进行排序......当索引设置为 0 到 length() 或其他一些任意设置的值时它可以工作，否则它不起作用。

# c++ - Makefile、递归编译和静态库

> ID：14821166
> 
> 赞同：2
> 
> 时间：2013-02-11T21:27:30.247
> 
> 标签：c++, makefile

我有一个项目，代码位于多个目录中，我想做的是递归编译每个目录，我可以做到这一点。

我可以创建静态库，以便`.a`使用此 makefile的文件

```
CXX=g++
CXXFLAGS=-std=c++11
PROJECT=admin.a

OBJECTS = Manager.o

all: $(PROJECT)

.cpp.o:
    @echo -e "\033[32m -Building "$*"...\033[0m"
    $(CXX) -c $(CXXFLAGS) $<

$(PROJECT): $(OBJECTS)
    @echo -ne "\033[31m -Creating static library "$*"..."
    @(ar rcs $(PROJECT) $(OBJECTS))
    @echo -e "[DONE] \033[0m"

clean:
    @(rm -rf *.o)

mrproper: clean
    @(rm -rf $(EXEC)) 
```

但我不知道如何将这些与我的主程序联系起来，

任何帮助都会非常有用，

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:04:56.850

`.a`您可以在链接器行中直接包含静态库 ( )：

```
gcc -o executable main.o admin.a 
```

# jquery - 使用 jQuery 附加到 div 的链接不能用作另一个绑定的选择器

> ID：14821167
> 
> 赞同：0
> 
> 时间：2013-02-11T21:27:31.827
> 
> 标签：jquery

我正在尝试实现一项功能，您可以将主要内容区域中的元素固定到较小的 div 中。此功能按预期工作。

```
$('.pin').bind('click', function() {
  $('#sbStar').prepend($(this).parent().parent().parent('.leaf').clone(true));
}); 
```

编辑：根据 Vega 的建议，将 clone() 更改为 clone(true)，解决了我之前的问题（如下），但尚未完全解决。现在我试图让展开按钮根据它是在#sbStar 中还是在主要内容区域中来执​​行不同的行为。不幸的是，这个 ('#sbStar .expand') 仍然不起作用。

```
$('#sbStar .expand').bind('click', function() {
  console.log('expand');
}); 
```

供参考，HTML：

```
<article class="leaf">
  <footer>
    <aside class="left">
      <a href="#" class="expand">E</a>
      <a href="#sbStar" class="pin">P</a>
    </aside>
  </footer>
</article> 
```

原始问题： $('.expand').bind('click', function() { console.log('expand'); });

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:31:01.777

您可以执行以下操作之一来解决您的问题，

一个。使用`clone(true)`- true 指示是否应将事件处理程序和数据与元素一起复制。

湾。在 . 之后绑定事件处理函数`clone`。

```
function myHanlder() {  console.log('expand'); }

.clone().bind('click', myHandler); 
```

C。使用委托事件。

```
$('#sbStar').on ('click', '.expand', function () { ... }); 
```

# ruby-on-rails - 为什么 validates_uniqueness_of 在 before_create 之前运行？

> ID：14821168
> 
> 赞同：2
> 
> 时间：2013-02-11T21:27:31.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的邀请.rb 模型中，我有以下内容：

```
class Invite < ActiveRecord::Base
  before_create :assign_code
  validates_uniqueness_of :code, :case_sensitive => false, :message => "This invite code is taken!"

  protected

  # Create a safe random token and ensuring it's uniqueness for the model
  def assign_code
    begin
      code = SecureRandom.urlsafe_base64
    end while Invite.where(:code => code).exists?
    self.code = code
  end 
```

问题出在日志中，我在下面看到以下内容。为什么 rails 会查询一个为空的代码，这似乎是一个浪费的查询。

```
Invite Exists (0.5ms)  SELECT 1 AS one FROM "invites" WHERE "invites"."code" IS NULL LIMIT 1
Invite Exists (0.3ms)  SELECT 1 AS one FROM "invites" WHERE "invites"."code" = 'mTGCX0yCyTgplGfGQ5hGeA' LIMIT 1 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:38:00.747

您可能想`before_validation :assign_code`改用，这样代码在验证之前就设置好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:38:08.233

第一个查询来自验证回调（在设置代码之前）并检查没有其他`Invite`人有空的`code`. 第二个是从`Invite.where(:code => code).exists?`。

回调的顺序显示[在这里](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)。所以我认为你应该调用`assign_code`回调`before_validation`而不是`before_create`. 然后你也许可以自己跳过检查它`code`是独一无二的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T11:05:27.073

为我的 RESTful API 实现 AccessToken 类时，我遇到了与 validates_presence_of 和 before_creation 回调顺序相同的问题。
如上所述，我使用 before_validation 而不是 _create 但它给了我一个新问题：每次更新时都会调用我的方法，更改我的令牌密钥，然后过时用户设备保存的数据。
通过检查它是否是新记录来解决这个问题：
`self.token = SecureRandom.hex if new_record?`

# mysql - Zend Framework 创建一个sql函数

> ID：14821171
> 
> 赞同：0
> 
> 时间：2013-02-11T21:27:43.723
> 
> 标签：mysql, zend-framework, zend-db, zend-db-table

我想在 Zend Framework 的 Abstract.php 或模型中创建一个 sql 查询？但我很难弄清楚该怎么做。我是zend框架的新手。

我要创建的查询如下所示：

```
delete from users where id not in(select * from(select min(n.id)from users n group by n.email)x); 
```

但是在zend中：

```
$results = $db->query('delete
                from users
                where id not in(
                    select * from(
                        min(n.id)
                        from users n
                        group by n.email
                )x)'); 
```

看起来 $db 有一个未定义的变量，db 应该调用什么样的数据库函数？我的数据库正在 application.ini 中调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:50:03.130

你必须编写这个语法来执行你的自定义查询..

```
$db->getAdapter()->query('delete
                from users
                where id not in(
                    select * from(
                        min(n.id)
                        from users n
                        group by n.email
                )x)'); 
```

# routes - Rails 3 路线中的错误？

> ID：14821172
> 
> 赞同：0
> 
> 时间：2013-02-11T21:27:45.400
> 
> 标签：routes, ruby-on-rails-3.2

我有以下内容`projects_controller`：

```
def edit
  @project = Project.find(params[:id])
  @project.current_step = @project.first_step
  @user = current_user
end 
```

我的以下路线`routes.rb`：

```
resources :users do
 resources :projects
end 
```

在我的`views/users/show.html.erb`我有：

`<%= link_to image_tag('img_blank.png'), edit_user_project_path, :class => "btn_edit_project" %>`

并`rake routes`给我：

```
...
  edit_user_project GET    /users/:user_id/projects/:id/edit(.:format)      projects#edit
... 
```

我仍然收到错误：

```
`Routing Error: No route matches {:action=>"edit", :controller=>"projects"}` 
```

我对此束手无策。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:36:00.873

`edit_user_project_path`期望参数：你`@user`和你的`@project`：

```
<%= link_to image_tag('img_blank.png'), edit_user_project_path(@user, @project), :class => "btn_edit_project" %> 
```

# python - 将数组传递给烧瓶中的视图

> ID：14821174
> 
> 赞同：0
> 
> 时间：2013-02-11T21:27:58.663
> 
> 标签：python, flask

我是python和flask的初学者。我想将一个列表从.py文件传递给视图文件并这样做：

蟒蛇文件：

```
 @app.route('/admin',methods=['GET'])

 def panelSettings():   
     myList = ["gan","dalf"]
     return render_template('admin.html',list=myList) 
```

.html 文件：

```
my list's first eleman is:{{ list[0] }} 
```

但是这段代码不起作用。它说：

```
 myList is not defined 
```

我的目的是将多个或更多变量传递给视图。我该怎么办？

我的追溯是：

```
Traceback (most recent call last):
  File "/Users/ozcan/flask/flask/app.py", line 1823, in __call__
   return self.wsgi_app(environ, start_response)
File "/Users/ozcan/flask/flask/app.py", line 1811, in wsgi_app
  response = self.make_response(self.handle_exception(e))
File "/Users/ozcan/flask/flask/app.py", line 1809, in wsgi_app
  response = self.full_dispatch_request()
File "/Users/ozcan/flask/flask/app.py", line 1482, in full_dispatch_request
  rv = self.handle_user_exception(e)
File "/Users/ozcan/flask/flask/app.py", line 1480, in full_dispatch_request
  rv  = self.dispatch_request()
File "/Users/ozcan/flask/flask/app.py", line 1466, in dispatch_request
  return self.view_functions[rule.endpoint](**req.view_args)
File "/Users/ozcan/Documents/python/app.py", line 104, in panel
  return render_template("panel.html",route=route)
File "/Users/ozcan/flask/flask/templating.py", line 127, in render_template
  context, ctx.app)
File "/Users/ozcan/flask/flask/templating.py", line 109, in _render
  rv = template.render(context)
File "/Users/ozcan/flask/venv/lib/python2.7/site-packages/Jinja2-2.6-  py2.7.egg/jinja2/environment.py", line 894, in render
  return self.environment.handle_exception(exc_info, True)
File "/Users/ozcan/Documents/python/templates/panel.html", line 1, in top-level template code
  {% extends "layout.html" %}
File "/Users/ozcan/Documents/python/templates/layout.html", line 62, in top-level template code
  {%block panel%}{%endblock%}
File "/Users/ozcan/Documents/python/templates/panel.html", line 11, in block "panel"
  {{ list[0]}}
File "/Users/ozcan/flask/venv/lib/python2.7/site-packages/Jinja2-2.6-py2.7.egg/jinja2/environment.py", line 353, in getitem
  return obj[argument]
UndefinedError: 'list' is undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:40:40.980

您不能`list`用作变量的名称，因为`list`它是 Python 中的保留关键字。

# javascript - JQuery：在 Threes 中选择行

> ID：14821175
> 
> 赞同：-1
> 
> 时间：2013-02-11T21:27:59.597
> 
> 标签：javascript, jquery

我有一张这样的桌子：

```
<table>
   <tr>
      <th>h1</th>
      <th>h2</th>
      <th>h3</th>
  </tr>

  <tr>
      some content here
  </tr>

  <tr>
      <td>1</td> <td>2</td> <td>3</td>
  </tr>
  <tr>
      inside this row, I have a table which contains 2 rows
  </tr>

   <tr>
      <td>1</td> <td>2</td> <td>3</td>
  </tr>
  <tr>
      inside this row, I have a table which contains 2 rows
  </tr>

   <tr>
      <td>1</td> <td>2</td> <td>3</td>
  </tr>
  <tr>
      inside this row, I have a table which contains 2 rows
  </tr>
  //it repeats like this

</table> 
```

我想从第 3 行开始使用 jquery 为每 3 行应用替代颜色，即，我希望以下代码部分具有替代颜色。我该怎么做？谢谢

```
 <tr>
         <td>1</td> <td>2</td> <td>3</td>
      </tr>
      <tr>
          inside this row, I have a table which contains 2 rows
      </tr> 
```

基本上，我不想选择标题行和标题行之后的第一行。之后，我想每次选择 3 行，并给它另一种颜色。3 行将是如上所示的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:30:36.927

使用第 n 个子选择器

```
$("table tr:nth-child(3n)") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:34:53.793

```
$('table tr:nth-child(3n) td').css('background-color', 'red');
$('table tr:nth-child(3n+1) td').css('background-color', 'blue');
$('table tr:nth-child(3n+2) td').css('background-color', 'green'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:53:00.637

你可以使用纯css3

```
table tr:nth-child(3n+3) { background:red; } 
```

或者也通过 jquery，比如 kmd97 答案

```
$("table tr:nth-child(3n+3)").css("background","red"); 
```

3n 表示每 3 个元素，+3 表示从第 3 个元素开始。

你可以试试这个[在线 CSS 测试器](http://css-tricks.com/examples/nth-child-tester/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T21:34:50.253

```
var totalOfRows = $('table').find('tr').length;

var rows = $('table').find('tr');

for(var i=0; i<totalOfRows;i++){
 $(rows[i]).attr('bgcolor','red'); //logical here
}

for example, yo can write .css('background-color', 'blue'); .css('background-color', 'pink'); etc 
```

# vb.net - 使用 ToolStripTextBox

> ID：14821187
> 
> 赞同：1
> 
> 时间：2013-02-11T21:28:54.410
> 
> 标签：vb.net, winforms

为了在实际编程中使用 ToolStripTextBox 作为菜单项，我需要清除一些行为与我预期不同的东西。

我的菜单条带有几个菜单条项，其中一个文本框项。

1）使用 ENTER 键终止使用文本框后，我想关闭菜单条，但我不知道如何。

我可以隐藏它：

```
myToolStripMenuItem.HideDropDown() 
```

但是，如果我将鼠标移到上方然后自动打开，它会保持敏感。我想关闭它，再次打开它需要单击。

其次，如果我使用 alt 键激活菜单并在所选项目到达该文本框时向下导航，它会自动将此文本框置于输入模式和这样的块键盘导航。
这是正常行为吗，是否可以避免（例如）SPACE 或 ENTER 需要在输入模式下打开文本框，以便我可以像在任何其他菜单项上一样使用箭头（向上/向下）传递？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T02:24:56.353

我看到了问题。问题是工具条管理器的菜单仍然处于活动状态，因此鼠标悬停将再次打开菜单而不是选择它。解决这个问题非常困难，方法是内部的。您可以使用反射来破解它，如下所示：

```
...
using System.Reflection;

    void box_KeyDown(object sender, KeyEventArgs e) {
        if (e.KeyData == Keys.Enter) {
            e.Handled = e.SuppressKeyPress = true;
            myToolStripMenuItem.HideDropDown();
            var t = typeof(MenuStrip).Assembly.GetType("System.Windows.Forms.ToolStripManager+ModalMenuFilter", true);
            var mi = t.GetMethod("ExitMenuMode", BindingFlags.Static | BindingFlags.NonPublic);
            mi.Invoke(null, null);
        }
    } 
```

我真的不能推荐它。我也不推荐菜单中的文本框。UI 提示很差，只是不太容易被发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:49:37.633

我不会试图“关闭”它。相反，我会使用以下内容：

```
myToolStripMenuItem.Enabled = false;
myToolStripMenuItem.Visible = false; 
```

然后您可以动态地重新启用它，并在以后通过鼠标事件或按键事件使其可见。

# cryptography - 这在密码学上是安全的吗？

> ID：14821192
> 
> 赞同：3
> 
> 时间：2013-02-11T21:29:09.457
> 
> 标签：cryptography

我正在制作一个有趣的聊天程序，我决定添加加密。但是，我对此并不陌生，所以我想知道的是，这在密码学上是否安全，这是一种做事的好方法吗？

**这是登录：**

**开始：**

客户端发送用户名

*如果用户存在，则服务器为用户发送存储的盐*

然后客户端发送 SHA-2 散列（Salt + 明文密码）

*服务器将其与存储的盐 + 密码的散列结果进行比较，如果相同，则用户已成功登录，从那里开始加密是 AES。*

**结尾**

有什么毛病吗？我不认为有，但我不想继续制作程序，只是被告知加密不起作用！另外，有人有任何好的链接来进一步阅读密码学吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T04:07:18.857

这对数据库/服务器的攻击并不安全，实际上似乎违背了使用加盐哈希的目的。如果客户端发回一个加盐哈希来代替他们的密码，那么这与他们的密码基本相同。

如果攻击者破坏了您的数据库，他们不必强制任何人的密码登录，他们只需使用加盐哈希，他们就可以成为他们想成为的任何人。

如果您使用 SSL，您可以通过加密线路发送明文密码，并在服务器上进行哈希处理。然后攻击者必须暴力破解哈希或攻击 SSL 通道。

此外，使用 PBKDF2、bcrypt 或 scrypt 作为您的密码哈希算法，而不是 SHA-2。您想要能够抵抗蛮力攻击的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:39:07.190

确保您的散列传输使用 SSL 加密，因为如果散列被泄露，您的用户帐户就会被泄露。

正如 CodesInChaos 的评论中提到的，在 SSL 中验证服务器的公钥是**重要**且**必要**的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T21:32:27.130

简短的回答是“不，为什么还要碰运气？” 冗长的答案太长而且太复杂了。有太多未知的变量我们无法给出一个好的答案：客户端和服务器之间的链接是否加密？您是否验证要连接的服务器的身份？等等。

一般来说，你不应该重新发明轮子，你应该避免自制密码学。对于密码，考虑使用[scrypt](http://en.wikipedia.org/wiki/Scrypt)并感到高兴。

如果您想验证用户输入的密码，您可能还需要考虑实施质询-响应身份验证系统，或者至少实施一些针对重放攻击的保护。您当前的解决方案是完全不安全的，因为它使加盐哈希*本身*成为密码。攻击者可以在不知道密码的情况下登录该帐户。

同样，不要发明自己的东西。使用由密码学家和整个社区设计和验证的协议。维基百科是您开始研究的好地方。Bruce Schneier 的“应用密码学”一书是一个*很好的*资源，每个软件开发人员都应该在他们的图书馆中拥有它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T21:45:48.700

只要此交换是通过 SSL 进行的，就应该没问题。此外，如果您打算使用 SHA-2 系列的成员，请使用 SHA-512。今天任何少的事情都是不可接受的。

您描述的协议基本上是标准用户/密码网站登录+盐交换。

更好的是在服务器上进行加盐和 SHA 散列。让用户通过 SSL 以纯文本形式传输他们的密码，并且永远不要泄露盐。

[JChatd](http://code.google.com/p/jchatd/)是一个基于 SSL 的点对点聊天客户端示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T21:37:49.047

客户端可以发送 username 和 sha(password) ，服务器可以进行转换和比较，服务器不会为用户发送盐

这是关于密码学的好课程

```
https://class.coursera.org/crypto/class/index 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T21:40:13.553

我不明白你描述的

> 如果用户存在，则服务器为用户发送存储的盐

在这里发送什么？密码的哈希？
如果是，则没有安全性。这个想法是用户向客户端提供密码，客户端将加密的哈希发送到服务器进行比较。如果匹配，则用户已通过身份验证

# sql-server - MS SQL 函数 - 查询参数输入的条件变化

> ID：14821194
> 
> 赞同：0
> 
> 时间：2013-02-11T21:29:14.537
> 
> 标签：sql-server

我正在处理下面的这个 SQL 函数，但不知道如何使代码条件 WHERE 基于标志（@PastDueFlag，0 或 1 传递）工作。

请假设此函数内的整个查询工作正常。我想更改的唯一行就在 WHERE 1 = 1 "AND DATEDIFF("d", InvoiceDueDate, GETDATE()) > 0" 下。

当参数@PastDueFlag = 1 时，我喜欢在查询中包含此条件，否则不要在 WHERE 查询中包含此行。

有没有办法做到这一点？

谢谢，

```
ALTER FUNCTION [dbo].[TotalARDueByCompanyID]
(
    -- Add the parameters for the function here
    @CompanyID AS INTEGER,
    @PastDueFlag AS INTEGER
)
RETURNS Float
AS
BEGIN
    DECLARE @TotalARDue AS Float

     SET @TotalARDue = (
        SELECT SUM(CAST(GrandTotal AS NUMERIC(9,2)) + CAST(ISNULL(LinkedTxnAmount, 0) AS NUMERIC(9,2))) AS TotalARDue
        FROM (
            select i.OrderID, InvoiceID, cp.CustomerPO, o.CompanyID, i.CreditMemo
            , CONVERT(VARCHAR(10),(InvoiceDate + (SELECT TermDays FROM dbo.ERP_CompanyTerms WHERE TermID = i.TermID)), 101) AS InvoiceDueDate
            , (isnull(FreightCost,0) + isnull(TaxState,0) + isnull(TaxCounty, 0) + isnull(TaxCity, 0) )
            +
            (SELECT SUM(ExtQty * UnitSell) FROM ERP_InvoiceDetail WHERE invoiceID = i.InvoiceID) as GrandTotal
                --, isnull(i.FreightCost, 0) as FreightCost, i.ShipVia, i.WhoPays, i.Status
            , CONVERT(VARCHAR(10), i.CreatedDate, 101) AS CreatedDate
            , CONVERT(VARCHAR(10), i.InvoiceDate, 101) AS InvoiceDate
            , (select Name from ERP_Company c where c.CompanyID = o.CompanyID) as CompanyName
            , (select first_name + ' ' + last_name from employee where tech_id = i.createdBy) as CreatedBy
            , (SELECT em2.first_name + ' ' + em2.last_name) AS SalesRep
            , (SELECT em2.tech_id) AS SalesRepID
            , o.SOTypeInt AS SOType, em2.WH_RegionID AS Region, i.Status, qv.SFOppt
            , (
                SELECT 
                    (SELECT CASE
                        WHEN CreditMemo = 1 THEN
                            SUM(qi.LinkedTxnAmount) * -1
                        ELSE
                            SUM(qi.LinkedTxnAmount)
                      END
                ) 
                FROM dbo.ERP_Invoice i2
                LEFT JOIN dbo.QuickBooks_InvoiceLinked qi ON RefNumber = CAST(i2.InvoiceID AS VARCHAR(8))
                WHERE 1 = 1
                AND InvoiceID = i.invoiceID --   305763, 304990
                AND LinkedTxnTxnType <> 
                    CASE
                        WHEN i2.CreditMemo = 1 THEN
                            'CreditMemo'
                        ELSE
                            ''
                    END
                GROUP BY CreditMemo
            ) AS LinkedTxnAmount
            from ERP_Invoice i
            LEFT JOIN ERP_Order o on o.OrderID = i.OrderID
            INNER JOIN ERP_Company c on o.CompanyID = c.CompanyID  
            LEFT JOIN Employee em on em.Tech_ID = i.CreatedBy
            LEFT JOIN Employee em2 ON em2.Tech_ID = o.SalesPersonID
            LEFT JOIN ERP_QuoteVer qv ON qv.QuoteVerID = o.QuoteVerID
            LEFT JOIN dbo.ERP_CustomerPO cp ON cp.CustomerPOID = i.CustomerPOID
            where 1 = 1
        ) a
        WHERE
        1 = 1
        AND DATEDIFF("d", InvoiceDueDate, GETDATE()) > 0
        AND CAST(GrandTotal AS NUMERIC(9,2)) + CAST(ISNULL(LinkedTxnAmount, 0) AS numeric(9,2)) > 0
        AND CompanyID = @CompanyID
        AND Status in ('New', 'Completed')
        AND SOType = 'Production'
    )

    -- Return the result of the function
    RETURN @TotalARDue

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:34:52.757

我认为您所要做的就是将您的参数值集成到您的`where`子句中：

```
WHERE ( (@PastDueFlag =1 and DATEDIFF("d", InvoiceDueDate, GETDATE()) > 0) or 
        (@PastDueFlag = 0) ) and ... 
```

`WHERE`此外，您的子句中不需要 1=1 标准

# python - Django 和 Python 的基本匹配

> ID：14821195
> 
> 赞同：1
> 
> 时间：2013-02-11T21:29:23.557
> 
> 标签：python, django

所以我有一个`Education`附加到`UserProfile`. 这个模型的工作原理和一个假设一样：`User`已经去了不同地区的几所学校。

我正在尝试做的是根据用户的去向进行“评分”。基本上，如果他们上同一所学校，他们会得到 10 分，同一个城市，5 分，同一个州，2 分，依此类推。

我已经做了一些功能来尝试这个，但我失败了。有什么建议吗？

```
info = {}
def edu_info(user1):
    user_1_cities = []
    user_1_schools = []
    user_1_state = []
    first_one = Education.objects.filter(owner=user1)
    for i in first_one:
        user_1_cities.append(str(i.city))
        user_1_schools.append(str(i.school))
        user_1_state.append(str(i.state))
        info[str(i.owner.username)] = {}
        info[str(i.owner.username)]['cities'] = user_1_cities
        info[str(i.owner.username)]['schools'] = user_1_schools
        info[str(i.owner.username)]['state'] = user_1_state
    return info

def check_match(user1, user2):
    match_score = {}    
    first_info = edu_info(user1)
    dict = edu_info(user2)
    for item in dict:
        cities = dict[item]['cities']
        #user2 = item
        #print cities
        for city in cities:
            if city in first_info['jmitchel3']['cities']:
                match_score['user'] = 'jmitchel3'
                match_score['user2'] = str(user2.user.username)
                match_score['city'] = city
                print "here! " + str(city)
            else:
                print "not here! " + str(city)

    return match_score

check_match(j,t) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:18:26.957

这样的事情怎么样？

从收集有关单个用户的信息的函数开始，并为该用户返回单个字典：

```
def edu_info(user1):
    user_1_cities = []
    user_1_schools = []
    user_1_state = []
    first_one = Education.objects.filter(owner=user1)
    for i in first_one:
        user_1_cities.append(str(i.city))
        user_1_schools.append(str(i.school))
        user_1_state.append(str(i.state))
    info = {}
    info['cities'] = user_1_cities
    info['schools'] = user_1_schools
    info['states'] = user_1_state
    return info 
```

然后，有一个单独的函数，为两个用户中的每一个调用一次信息收集函数，并使用该信息计算点数。

```
def check_match(user_1, user_2)
    info_1 = edu_info(user_1)
    info_2 = edu_info(user_2)
    school_points = similarity_points(info_1["schools"], info_2["schools"], 10)
    city_points = similarity_points(info_1["cities"], info_2["cities"], 5)
    state_points = similarity_points(info_1["states"], info_2["states"], 2)
    return school_points + city_points + state_points 
```

该`check_match`函数的核心被卸载到它自己的辅助函数中。此函数查找两个属性列表的交集，并将共享属性的数量乘以某个点值。它通过将属性列表转换为集合然后使用[集合交集运算符](http://docs.python.org/2/library/stdtypes.html#set.intersection)来做到这一点。

因此，`similarity_points(["MN","OR","PA", "NJ"],["AZ","NJ","PA"], 2)`将找到两个匹配项（NJ 和 PA）并因此返回 4。

```
def similarity_points(attr_1, attr_2, points)
    """Award a number of points for each shared attribute.

    attr_1 and attr_2 should be lists to compare. 
    """
    number_shared = len(set(attr_1) & set(attr_2))
    return number_shared * points 
```

然后，您可以像这样调用上面的代码：

```
wilduck_jmitchel3_points = check_match("Wilduck", "jmitchel3") 
```

# boost - 为什么使用 boost regex 库没有得到未解决的外部错误？

> ID：14821200
> 
> 赞同：1
> 
> 时间：2013-02-11T21:29:34.367
> 
> 标签：boost

我只是在玩**boost 的正则表达式库**。在构建过程中，我没有指定*位置*和*库名称*，令人惊讶的是我得到了这个错误：

```
LINK : fatal error LNK1104: cannot open file 'libboost_regex-vc100-mt-gd-1_47.lib' 
```

我只是设置了 boost 库的位置，错误就消失了！（我没有说任何关于它的名字，libboost_regex-vc100-mt-gd-1_47.lib）
通常当我将一个库链接到我的项目并且我忘记指定它的名称和它的位置时，我得到一个**未解决的外部**错误。需要指定库名称及其位置，但是通过使用 boost，情况不再如此。那么是什么原因呢？如何创建一个只需要包含其接口并指定其位置的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:23:46.210

请参阅[自动链接](http://www.boost.org/doc/libs/1_53_0/more/getting_started/windows.html#auto-linking)：

> 大多数 Windows 编译器和链接器都具有所谓的“自动链接支持”，从而消除了第二个挑战。Boost 头文件中的特殊代码检测您的编译器选项并使用该信息将正确库的名称编码到您的目标文件中；链接器从您告诉它搜索的目录中选择具有该名称的库。

# hibernate - 在事务中查询

> ID：14821202
> 
> 赞同：1
> 
> 时间：2013-02-11T21:29:41.527
> 
> 标签：hibernate, postgresql-8.4

我对交易中的交易和查询有疑问。目前我正在使用带有 Hibernate 的 PostgreSQL 8.4。

如果我在同一个事务中执行查询，我不知道是否可以获得最近插入到事务中的数据。

例如。

```
Begin Transaction();
       Save(A);
       Get(A);
End Transaction(); 
```

查询会返回最近保存的行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:09:12.563

是的，它会的。事务上下文使数据对其他数据库事务不可见，直到该事务被提交。

如果您使用的是 Hibernate，save() 调用不会因为会话缓存（缓存）立即将对象写入数据库。但是连续的 get() 会将会话缓存刷新到数据库，然后返回最近创建的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:45:06.227

是的，无论是否将其保存在数据库中，您都将从会话缓存中获取数据。

# java - Perf4j 不分析带注释的接口方法

> ID：14821205
> 
> 赞同：0
> 
> 时间：2013-02-11T21:30:05.790
> 
> 标签：java, spring, annotations, perf4j

我有以下接口和类

```
public interface ServiceA {

    @Profiled
    String getString();
}

public class ServiceAImpl implements ServiceA{
    String getString(){
      System.out.println("getString");
    }

}

<beans ....>    
    <aop:aspectj-autoproxy />
     <bean id="timingAspect" class="org.perf4j.log4j.aop.TimingAspect"/>"
     <bean id="serviceA" class="com.naresh.profiler.service.ServiceAImpl" />
</beans> 
```

当我这样做时`serviceA.getString()`，TimingAspect 没有拦截到呼叫。如果我将注释从接口移动到实现类，它会被拦截。我看到的原因是方法级别的注释没有被继承。如何解决这个问题？通过写一些`CustomBeanAnnotationProcessor`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:40:22.667

即使`@Profiled`使用`@Inherit`它也不起作用，因为继承的注释只会传递给子类而不是接口的实现。

> @Inherited 注释在用于注释类型以外的任何内容时不会被继承。实现一个或多个接口的类型永远不会从它实现的接口继承任何注释。

资料来源： http: [//www.eclipse.org/aspectj/doc/released/adk15notebook/annotations.html#annotation-inheritance](http://www.eclipse.org/aspectj/doc/released/adk15notebook/annotations.html#annotation-inheritance)

更多细节：[http ://www.jroller.com/melix/entry/the_truth_about_annotations_inheritance](http://www.jroller.com/melix/entry/the_truth_about_annotations_inheritance)

您的自定义处理器会做什么，查询服务的接口`@Profiled`？我建议您手动注释服务实现，因为根据我的经验`@Profiled`，仅当您将其与它的`tag`和`message`属性一起使用时才有帮助（我想在每个实现类中都不同）。

[http://perf4j.codehaus.org/devguide.html#Adding_the_Profiled_Annotation_to_Method_Declarations](http://perf4j.codehaus.org/devguide.html#Adding_the_Profiled_Annotation_to_Method_Declarations) -> "@Profiled(tag = "dynamicTag_{$0}")"

# regex - 用正则表达式替换（保留中间文本）

> ID：14821206
> 
> 赞同：0
> 
> 时间：2013-02-11T21:30:08.967
> 
> 标签：regex, replace, phpstorm

我有一个网站需要替换近 400 个此类字符串（跨越数十个或数百个文件）

```
$_POST['some_text_here'] 
```

有了这个

```
mysql_real_escape_string($_POST['some_text_here']) 
```

**这里的关键是我也想添加结束括号，否则这将是一个微不足道的搜索和替换。**

我是正则表达式的新手，所以我什至不知道在替换中间留下文本（特别是'some_text_here'）时是否可以进行搜索和替换。

如果这有所作为，我正在为此使用 PHPStorm。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:45:57.717

像这样的东西应该工作：

```
(\$_POST\['[^']*'\]) 
```

然后用这样的东西替换

```
mysql_real_escape_string($1) 
```

代码：

```
preg_replace ( '($_POST\\[\'[^\']\'\\])', 'mysql_real_escape_string($1)', 'file contents go here' ) 
```

*未测试*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:34:55.833

我认为，正则表达式不是你想要的......你宁愿想要这样的东西：

```
foreach ($_POST as $key => $value) {
    $_POST[$key] = mysql_real_escape_string($value);
} 
```

正则表达式..

```
\$_POST\['([a-zA-Z0-9_-]+)'\] 
```

替换 - 像这样的东西：

```
mysql_real_escape_string\(\$_POST\['$1'\]\) 
```

顺便说一句： mysql_* 已弃用，不应再使用 - 请改用 mysqli_ 或 PDO

# javascript - 我可以使用新的 ZeroClipboard 从剪贴板获取数据吗？

> ID：14821210
> 
> 赞同：7
> 
> 时间：2013-02-11T21:30:32.243
> 
> 标签：javascript, paste, zeroclipboard

我在一个项目中使用这个新版本的 ZeroClipboard：

[https://github.com/jonrohan/ZeroClipboard](https://github.com/jonrohan/ZeroClipboard)

创建按钮以从 HTML 复制内容真的很容易（与 zClip 或“旧”ZeroClipboard 相比）。

但是，我现在想创建一个按钮，该按钮获取剪贴板中的当前值并将其插入输入字段（即“单击以粘贴”）。

不幸的是，我找不到关于该主题的任何内容（从剪贴板获取数据 - 设置输入的值不是问题）。我什至不确定除了使用 ZeroClipboard 之外是否还有其他解决方案。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T20:41:13.157

您可以打开本地基于 file:// 的页面并粘贴调用 ZeroClipboard.state(); 返回的 JSON 对象；从浏览器开发控制台。

也可以尝试但可能不再需要：[https ://github.com/zeroclipboard/zeroclipboard/issues/438#issuecomment-45977023](https://github.com/zeroclipboard/zeroclipboard/issues/438#issuecomment-45977023)

希望这可以帮助！

来源：[https ://www.bountysource.com/issues/3786729-cannot-use-zeroclipboard-over-file-protocol](https://www.bountysource.com/issues/3786729-cannot-use-zeroclipboard-over-file-protocol)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T13:22:11.210

```
 <script type="text/javascript">
        function getClicpboardData(Event){

            alert(window.clipboardData.getData('Text')); //if IE

            // alert(Event.clipboardData.getData('text/plain')); 

        }
    </script>
    <input type="submit" value="pasteClipboardData" onclick="getClicpboardData(event)"> 
```

# apache-flex - Flex 4.6 移动应用程序中的进度事件

> ID：14821217
> 
> 赞同：0
> 
> 时间：2013-02-11T21:31:06.437
> 
> 标签：apache-flex, flex4.5, flexbuilder

我只是在开发一个 Flex 移动应用程序，需要显示一个图像的上传进度。

代码是：

```
protected function upload( ba:ByteArray, fileName:String = null ):void {
            if( fileName == null ) {                
                var now:Date = new Date();
                fileName = "IMG" + now.fullYear + now.month +now.day +
                    now.hours + now.minutes + now.seconds + ".jpg";
            }

            var loader:URLLoader    = new URLLoader();
            loader.dataFormat       = URLLoaderDataFormat.BINARY;

            var wrapper:URLRequestWrapper = new URLRequestWrapper(ba, fileName, null, params);
            wrapper.url = "http://www.the_url_to_upload.com/php_content/upload_image.php";

            loader.addEventListener( Event.COMPLETE,            completeImageHandler );
            loader.addEventListener( ProgressEvent.PROGRESS,    imageProgress);
            loader.addEventListener(IOErrorEvent.IO_ERROR,      errorImageUploading );
            loader.load(wrapper.request);
        }
        private function imageProgress(evt:ProgressEvent):void {
            var pcent:Number=Math.floor(evt.bytesLoaded/evt.bytesTotal*100);
            label_upload.text = pcent+"%";
        } 
```

我有一个名为“label_upload”的标签，它应该显示文件上传时的进度百分比。

事实是一切正常，但进度事件不会改变任何东西。始终显示 0%。

我猜不出我的错。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:36:03.627

Flash 不提供上传文件的进度事件 - 仅下载。

如果您需要进度事件，则必须将文件拆分为多个部分并一次上传每个部分；手动更新进度消息以响应每个部分的完成事件。例如：

```
//assume file to upload stored as ByteArray called "ba"

//setup counters
currentChunk = 0;
totalChunks = Math.ceil(ba.length/CHUNK_SIZE);
//listener
loader.addEventListener(Event.COMPLETE, completeHandler); 
```

此代码将发送一个块：

```
function sendChunk():void
{
    const CHUNK_SIZE:int = 4096;
    var request:URLRequest = new URLRequest(destinationUrl);
    request.method = URLRequestMethod.POST;
    request.contentType = "application/octet-stream";
    request.data = new ByteArray();
    var chunkSize:uint = Math.min(CHUNK_SIZE, ba.bytesAvailable);
    ba.readBytes(request.data as ByteArray, 0, chunkSize);
    loader.load(request);
} 
```

CHUNK_SIZE 是一次性发送的最大字节数。request.contentType=... 将数据格式设置为二进制。

然后：

```
function completeHandler(event:Event):void
{
    //expect a result from server to acknowledge receipt of data
    if (loader.data=="OK")
    {
        if (++currentChunk<totalChunks)
        {
    trace("progress: "+currentChunk+" of "+totalChunks+" sent");
            //send next chunk
            sendChunk();
        }
        else
        {
             trace("finished!");
        }
    }
    else
    {
        trace("OK not receieved from server");
    }
} 
```

这将分段发送整个文件。php 脚本应以“OK”响应（或选择其他适当的响应）——这将显示在 loader.data 中——因此 flash 知道没有出现错误。

我无法在 php 方面为您提供帮助，因为我一直将其留给其他人，但据我所知，它非常简单，因此堆栈上的问题应该可以为您提供答案。

# c++ - FFMPEG 到 OpenGL 纹理

> ID：14821219
> 
> 赞同：5
> 
> 时间：2013-02-11T21:31:15.920
> 
> 标签：c++, opengl, ffmpeg, libavformat

我是来问的，如何将 AVFrame 转换为 opengl 纹理。实际上，我创建了一个渲染器，向我输出音频（音频正在工作）和视频，但视频没有输出。这是我的代码：

**纹理创建：**

```
glGenTextures(1,&_texture);
glBindTexture(GL_TEXTURE_2D,_texture);
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR ); 
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR ); 
```

代码信息：_texture 变量是一个保存纹理 ID 的 GLuint

**获取 AVFrame 并将其转换为 OpenGL 纹理的函数：**

```
int VideoGL::NextVideoFrame(){
// Get a packet from the queue
AVPacket *videopacket = this->DEQUEUE(VIDEO);
int frameFinished;
if(videopacket!=0){
    avcodec_decode_video2(_codec_context_video, _std_frame,&frameFinished,videopacket);

    if(frameFinished){

        sws_scale(sws_ctx, _std_frame->data, _std_frame->linesize, 0, _codec_context_video->height, _rgb_frame->data, _rgb_frame->linesize);

        if(_firstrendering){
        glBindTexture(GL_TEXTURE_2D,_texture);
        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, _codec_context_video->width,_codec_context_video->height,0,GL_RGB,GL_UNSIGNED_BYTE,_rgb_frame->data[0]);

        _firstrendering = false;

        }else{

            glActiveTexture(_texture);
            glBindTexture(GL_TEXTURE_2D,_texture);
            glTexSubImage2D(GL_TEXTURE_2D,0,0,0,_codec_context_video->width,_codec_context_video->height,GL_RGB,GL_UNSIGNED_BYTE,_rgb_frame->data[0]);

        }
        av_free_packet(videopacket);
        return 0;
    }else{

        av_free_packet(videopacket);
        return -1;
    }

}else{
    return -1;
}
return 0;
} 
```

代码信息：有一个线程存储 AVFrames 的队列，这个函数经常被调用来获取 AVFrames，直到它得到一个 NULL 它停止被调用。

这实际上是行不通的。（我试图查看堆栈溢出中的一些问题，它仍然无法正常工作）任何示例，或者帮助我纠正任何错误的人？

*附加数据：*我尝试将 GL_RGB 更改为 GL_RGBA 并开始使用这些格式，但是当我尝试 GL_RGBA 时它会崩溃（因为宽度和高度非常大，无论如何我尝试调整它们的大小）。我试图将大小更改为 2 的幂，但仍然无法正常工作。

**1 编辑：**

线程功能：

```
DWORD WINAPI VideoGL::VidThread(LPVOID myparam){

VideoGL * instance = (VideoGL*) myparam;
instance->wave_audio->Start();

int quantity=0;

AVPacket packet;
while(av_read_frame(instance->_format_context,&packet) >= 0){
    if(packet.stream_index==instance->videoStream){
        instance->ENQUEUE(VIDEO,&packet);
    }
    if(packet.stream_index==instance->audioStream){
        instance->ENQUEUE(AUDIO,&packet);
    }
}

instance->ENQUEUE(AUDIO,NULL);
instance->ENQUEUE(VIDEO,NULL);

return 0;
} 
```

线程创建函数：

```
CreateThread(NULL, 0, VidThread, this, NULL, NULL); 
```

这里指的是包含 NextVideoFrame 和 _texture 成员的类。

**解决了：**

我遵循了一些 datenwolf 提示，现在视频与音频/视频一起正确显示：

![截图](../Images/ba52bf6fa4f8dbebdedd56b18618d3d0.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T22:41:09.420

带有多线程的 OpenGL 有点棘手。每个线程只有一个或没有活动的 OpenGL 上下文，**并且**给定的 OpenGL 上下文一次只能在一个线程中处于活动状态。在线程之间迁移上下文是可能的，但你不应该在线程之间玩热的 OpenGL-context-potato。

有两种可能的方式：

*   使用内存映射的像素缓冲区对象（在一个线程中映射，在另一个线程中更新）

*   使用辅助 OpenGL 上下文，与其他上下文共享其纹理。然后将一个上下文绑定到每个线程（您可以使用相同的drawable，即Windows 上的HDC）。然后您可以在一个线程中更新纹理，而另一个线程绘制它。纹理更新引入了线程之间的同步点，因此您不会在访问纹理进行绘图时意外写入纹理。

# android - Android 3.1 找不到我的 .so

> ID：14821222
> 
> 赞同：0
> 
> 时间：2013-02-11T21:31:31.047
> 
> 标签：android, android-3.1-honeycomb

我有一个使用自定义 .so 库的 android 项目，当我解散我的应用程序时，我查看了 /data/data/"app.name.space"/lib 文件夹，并且有我的 libfoo.so 文件。当应用程序加载时，我得到

错误/AndroidRuntime(2293): 致命异常: main java.lang.ExceptionInInitializerError

引起：java.lang.UnsatisfiedLinkError: /data/data/"app.name.space"/lib/libfoo.so: 无法打开共享对象文件：没有这样的文件或目录

我该如何解决？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:42:44.847

你有你正在测试的 CPU 架构的 .so 文件吗？

常见的架构是 armabi、armabi-v7a 和 x86。

![在此处输入图像描述](../Images/165d08ef1e9efa7d66d814c47c8d28db.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:37:49.170

看起来它不是 Android 3.1，这是它的 Google TV 不支持 NDK 的问题，因此它不会加载我的共享对象文件。code.google.com/p/googletv-issues/issues/detail?id=12

# unit-testing - 播放 2 框架单元测试 - java.lang.RuntimeException: DataSource 用户为空？

> ID：14821223
> 
> 赞同：2
> 
> 时间：2013-02-11T21:31:32.180
> 
> 标签：unit-testing, playframework, playframework-2.0, h2, ebean

我尝试在 MySQL 兼容模式下使用 H2 数据库在 Play 2 应用程序中运行单元测试。我将其配置`@Before`如下：

```
@Before
public void startApp() throws Exception {
    Map<String, String> settings = new HashMap<String, String>();
    settings.put("db.default.driver", "org.h2.Driver");
    settings.put("db.default.user", "sa");
    settings.put("db.default.password", "");
    settings.put("db.default.url", "jdbc:h2:mem:play-test-351881363;MODE=MySQL"); // TODO: use config for url
    settings.put("db.default.jndiName", "DefaultDS");
    app = Helpers.fakeApplication(settings);
    Helpers.start(app);

    databaseTester = new JndiDatabaseTester("DefaultDS");

    IDataSet expectedDataSet = new FlatXmlDataSetBuilder().build(play.Play.application()
            .resourceAsStream("/resources/dataset.xml"));
    databaseTester.setDataSet(expectedDataSet);
    databaseTester.onSetup();
}

@After
public void stopApp() throws Exception {
    databaseTester.onTearDown();
    Helpers.stop(app);
} 
```

但是`java.lang.RuntimeException: DataSource user is null?`当它尝试访问数据库时会导致实际的测试方法：

```
[ERROR] [02/12/2013 01:19:32.085] [application-akka.actor.default-dispatcher-4] [akka://application/user/load_data_task_runner_test/load_record] DataSource user is null?
java.lang.RuntimeException: DataSource user is null?
    at com.avaje.ebeaninternal.server.lib.sql.DataSourcePool.<init>(DataSourcePool.java:184)
    at com.avaje.ebeaninternal.server.lib.sql.DataSourceManager.getDataSource(DataSourceManager.java:200)
    at com.avaje.ebeaninternal.server.lib.sql.DataSourceGlobalManager.getDataSource(DataSourceGlobalManager.java:46)
    at com.avaje.ebeaninternal.server.core.DefaultServerFactory.getDataSourceFromConfig(DefaultServerFactory.java:432)
    at com.avaje.ebeaninternal.server.core.DefaultServerFactory.setDataSource(DefaultServerFactory.java:393)
    at com.avaje.ebeaninternal.server.core.DefaultServerFactory.createServer(DefaultServerFactory.java:169)
    at com.avaje.ebeaninternal.server.core.DefaultServerFactory.createServer(DefaultServerFactory.java:124)
    at com.avaje.ebeaninternal.server.core.DefaultServerFactory.createServer(DefaultServerFactory.java:64)
    at com.avaje.ebean.EbeanServerFactory.create(EbeanServerFactory.java:45)
    at com.avaje.ebean.Ebean$ServerManager.getWithCreate(Ebean.java:206)
    at com.avaje.ebean.Ebean$ServerManager.get(Ebean.java:193)
    at com.avaje.ebean.Ebean$ServerManager.access$200(Ebean.java:128)
    at com.avaje.ebean.Ebean.getServer(Ebean.java:257)
    at play.db.ebean.Model$Finder.server(Model.java:240)
    at play.db.ebean.Model$Finder.byId(Model.java:261)
    at integration.LoadRecordService.onReceive(LoadRecordService.java:50)
    at akka.actor.UntypedActor$$anonfun$receive$1.applyOrElse(UntypedActor.scala:159)
    at akka.actor.ActorCell.receiveMessage(ActorCell.scala:425)
    at akka.actor.ActorCell.invoke(ActorCell.scala:386)
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:230)
    at akka.dispatch.Mailbox.run(Mailbox.scala:212)
    at akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(AbstractDispatcher.scala:502)
    at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:262)
    at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975)
    at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1478)
    at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) 
```

[这里使用dbunit](http://www.dbunit.org/)进行演化和初始化`startApp()`，在方法中抛出异常`@Test`。

我做错了什么？

PS我没有使用`play.test.Helpers.running`，因为它`Runnable`作为参数并且`run()`在runnable中不能抛出异常。因此，要在单元测试中捕获异常，我必须将整个包装`run()`放入`try`，捕获异常，单元测试失败并手动记录消息。它使代码膨胀很多。这是代码`running()`：

```
public static synchronized void running(FakeApplication fakeApplication, final Runnable block) {
    try {
        start(fakeApplication);
        block.run();
    } finally {
        stop(fakeApplication);
    }
} 
```

我在我的`@Before`and中做同样的事情`@After`，也许除了一些可能导致错误的线程内容。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T08:47:07.473

问题是由配置中的`ebean.default`键引起的，在主配置中被注释掉：

```
ebean.default="models.*" 
```

并且不需要为 H2 设置用户名和密码，*没有*它也可以：

```
settings.put("db.default.user", "sa");
settings.put("db.default.password", ""); 
```

# java - ActionListener 如何将处理的结果发送回 JTextArea

> ID：14821228
> 
> 赞同：0
> 
> 时间：2013-02-11T21:31:48.530
> 
> 标签：java, actionlistener, jtextfield, gettext, jtextarea

我的问题有点复杂，因为我的程序有点大，我不能把它都放在这里。无论如何，这里是问题的描述：程序有一个JTextField，和JTextArea。当用户通过 getText 和 addActionListener 搜索单词时，它会将输入的单词发送到动作侦听器，在动作侦听器中搜索结果，然后在命令行中打印出来。但我希望动作侦听器将其发送回有 JTextArea 的上一个类。在文本区域中显示搜索结果。

所以现在在搜索部分，有一个 system.print.out() 代码，但我应该替换一些东西把它发回去。

那么有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:52:59.547

```
public void actionPerformed(ActionEvent e) {
    String result = search(textField.getText());
    textArea.append(result);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:56:44.493

如果你的 actionListener 是一个全新的类，你必须首先给它基类（即包含 guiElements 的类）作为参数（最好在初始化时），然后 actionListener 可以调用这个基类的方法，当事件被触发。

如果你以这种方式声明actionlistener

```
guielement.addsomeactionlistener(new actionlistener{ implementable methods}); 
```

您可以简单地调用基类的方法，而无需在初始化时提供基类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:53:46.893

我认为如果不了解更多关于程序结构的信息，就没有办法回答这个问题，除非说持有 JTextArea 的类需要有一个公共方法，允许你传入一个字符串，然后它会附加到 JTextArea 的字符串。这一切都是为了确保需要引用的类具有对正确对象的有效引用，以便它们可以在需要时对这些对象调用适当的方法。ActionListener 如何再次获得对持有 JTextArea 的类的引用完全取决于程序的结构。

# sql - 将 SQL 2008 mdf 导入 SQL Server 2005？

> ID：14821233
> 
> 赞同：-1
> 
> 时间：2013-02-11T21:32:07.333
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我有我的本地数据库。它是使用 VS 2010 创建的 mdf，使用 SQL Express 2008。

现在，我需要一种将这个数据库导入远程 SQL Server 2005 的方法。

我已经搜索和搜索，找不到这样做的方法。

我需要一种方法来做到这一点，而不必将 mdf 复制到另一台机器上。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:50:13.517

一种选择可能是使用 SQL Server Management Studio 中的“生成脚本”功能。在高级选项中，您可以选择为所有表的架构和数据编写脚本。

这确实带有一些主要的警告——它假定您有权访问适当版本的 SSMS 来创建脚本，并且您有权在远程数据库中运行脚本。但它确实符合无需物理复制 MDF 即可重新创建数据库的标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:03:21.503

您可以使用 SSIS 中的[传输 SQL Server 对象任务](http://technet.microsoft.com/en-us/library/ms142159.aspx)来复制数据库对象和数据。您将需要执行以下操作：

1.  在目标 (SQL 2005) 实例上创建一个空数据库。
2.  创建一个新的 SSIS 解决方案。
3.  在控制流下，创建一个新`Transfer SQL Objects`任务。在任务中指定您的连接和选项。
4.  运行包。

有几种选择，但总的来说我建议复制：

*   数据库用户
*   数据库角色
*   对象级权限
*   所有表格选项

然后，您可能需要协调目标上的服务器登录，修复孤儿。

# google-chrome - window.setTimeout 在 Firefox 18 和 IE10 中不工作（Chrome 和 Safari 工作）

> ID：14821240
> 
> 赞同：1
> 
> 时间：2013-02-11T21:32:29.923
> 
> 标签：google-chrome, firefox, settimeout, internet-explorer-10, document.write

我有这个示例代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta charset="UTF-8">
  </head>
  <body>
    <script>
      var EventHandler = {};
      EventHandler.writeNumber = function(i){
        document.write(i);
      };      

      for(var i=0; i<100; i++) {
        (function(i) {
          window.setTimeout(function() {
            EventHandler.writeNumber(i);
          },100*i);
        }(i));
      }
    </script>
  </body>
</html> 
```

代码每秒在页面上写入一个数字。在 Chrome 26 和 Safari 5 中运行良好！在 Firefox 18 和 IE10 中它只出现一次（0 写在文档上）。

如果我更改`document.write`为`console.log`，那么它适用于所有浏览器。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:39:24.720

这是 Chrome 和 Safari（或更准确地说是 WebKit）中的一个错误。A`document.write`当页面不在中间解析时意味着 a `document.open`，并且 a`document.open`应该清除每个规范的所有超时。这就是 IE 和 Firefox 所做的，但 WebKit 的处理`document.open`是各种各样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:40:38.830

`document.write`应该只在页面加载时工作一次。

从上到下解析一个页面。解析时找到的每个 JavaScript 都会立即执行。当执行结束或被分派（`setTimeout`或任何其他异步内容）时，浏览器会继续解析。

当您执行解析器时，将在结束标记之后直接`document.write("Test")`创建一个文本节点，因为它当前正好在这个位置。如果您将其延迟 1毫秒，则解析器将位于不同的点，在页面下方插入文本节点。`Test``</script>``setTimeout`

如果您等待太久，解析器将完成对页面的解析并且不再接受写入。或者，对于 chrome，解析器会尝试修复程序员的错误并保留对标记位置的引用，从而在实际解析完成后`<script>`仍然可以使用。`document.write`

使用控制台和 Firebug ( `F12`) 看看会发生什么。

笼统地说`document.write`是一种非常糟糕的做法。这非常慢，因为解析器必须为每种 HTML 元素解析给定的字符串。使用`document.createTextNode`或`document.createElement`代替。

# perl - Perl 和评估 Dumper 结果

> ID：14821246
> 
> 赞同：0
> 
> 时间：2013-02-11T21:32:39.313
> 
> 标签：perl

我对第三方进行 API 调用，结果以我命名为 %hash 的哈希值返回给我。

当我使用 Data::Dumper 打印结果时，我得到以下结果：

```
print Dumper %hash;

$VAR1 = '';
$VAR2 = {
     'Field1' => 'first result',
     'Field2' => {},
     'Field3' => 'random value',
     'Field4' => {},
     'Field5' => '102',
     'Field6' => '3600176056428',
     'Field7' => 'AhhRbwSXxIzaSZYuvgXE8AmAXUdy'
}; 
```

我不习惯 Dumper 返回两个值。我打印了结构，以便确定如何访问它所包含的值。我想访问第二个 VAR ($VAR2) 中的哈希数据结构。这究竟是如何完成的？$hash{'Field2'} 不返回任何值（显然）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:41:41.507

您`%hash`包含一个键 - 空字符串和一个值 - 您看到的数据结构表示为`$VAR2`. 当您调用 时`Dumper(%hash)`，该`Dumper`函数将您的散列接收为包含两个元素的扁平列表，因此它输出两个值。

更规范的使用方式`Dumper`是传递对数据结构的引用：

```
print Dumper \%hash; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:44:27.977

您`%hash`只有一个`''`包含 hashref 的键（空字符串）。它看起来像这样：

```
'' => {
     'Field1' => 'first result',
     'Field2' => {},
     'Field3' => 'random value',
     'Field4' => {},
     'Field5' => '102',
     'Field6' => '3600176056428',
     'Field7' => 'AhhRbwSXxIzaSZYuvgXE8AmAXUdy'
}; 
```

返回到您分配它的位置并检查您是否可能需要`$hash`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T21:44:45.903

通常你会通过引用转储一个哈希，所以`print Dumper \%hash`.

就目前而言，`Data::Dumper`将打印哈希键和值的列表，因此看起来您`%hash`有一个以空字符串作为键的元素。

You can access this as `$hash{''}`, so the values are `$hash{''}{Field1}` etc.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T21:44:30.397

您需要将哈希转换为哈希引用：

```
print Dumper \%hash; 
```

否则`%hash`转换为键 => 值对的列表。这是列表上下文中的哈希行为。

要访问值，您需要使用以下内容：

```
$hash{''}{'Field1'} 
```

因为实际上你有散列的散列。

# reporting-services - MDX 查询中带维度的案例语句

> ID：14821248
> 
> 赞同：1
> 
> 时间：2013-02-11T21:32:39.637
> 
> 标签：reporting-services, mdx

在 MDX 查询中，我在 SSRS 报告中使用 with case 语句。它没有返回所需的结果。`[Facility Market]`它应该根据参数的选择进行 过滤`Territory`。

```
with member [Dim Facility].[Facility Market].[Facility Market] as
case  [Dim North Texas Sales].[North Texas Rural Sales Territory].currentmember

when   [Dim North Texas Sales].[North Texas Rural Sales Territory].&[NTXSalesRuralEast] then [Dim Facility].[Facility Market].&[OKLAHOMA] 

end

select...... 
```

我想根据参数选择更改设施市场维度的值并根据该参数过滤数据集

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:03:40.937

[Case 语句](http://msdn.microsoft.com/en-us/library/ms144841.aspx)仅适用于标量值。

你应该使用这样的表达式：

```
IIf([Dim North Texas Sales].[North Texas Rural Sales Territory].CurrentMember IS [Dim North Texas Sales].[North Texas Rural Sales Territory].&[NTXSalesRuralEast],
[Dim Facility].[Facility Market].&[OKLAHOMA],
...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T00:56:49.723

```
with member [Dim Facility].[Facility Market].[Facility Market] as
case  

when  [Dim North Texas Sales].[North Texas Rural Sales Territory].currentmember IS [Dim North Texas Sales].[North Texas Rural Sales Territory].&[NTXSalesRuralEast] then [Dim Facility].[Facility Market].&[OKLAHOMA] 

end

select...... 
```

# routes - 来自链接的嵌套路由触发，而不是来自 URL 更改

> ID：14821250
> 
> 赞同：4
> 
> 时间：2013-02-11T21:32:48.363
> 
> 标签：routes, ember.js

我正在开发一个基本的 ember.js 应用程序，并且对某些行为感到有些困惑。我有一些看起来像这样的路线：

```
this.resource('campaigns', { path: '/campaigns'}, function() {

    this.route('new', { path: '/new' });
    this.route('campaign', { path: '/:campaign_id' });

});

App.CampaignsIndexRoute = Ember.Route.extend({

model: function() {

    App.Keyword.find();
    return App.Campaign.find();

},

renderTemplate: function(controller, model) {

    this.render({outlet: 'page'});

}

});

App.CampaignsCampaignRoute = Ember.Route.extend({

model: function(params) {
    alert("Model Firing");
    console.log(params.campaign_id);
    return App.Campaign.find(params.campaign_id);
},
renderTemplate: function(controller, model) {
    this.render({outlet: 'page'});
    alert("Template Firing");
} 
```

});

...和一个看起来像这样的视图：

```
App.CampaignsCampaignView = Em.View.extend({

templateName: 'templates/campaigns/campaign',

}); 
```

...和一个看起来像这样的主模板：

```
<!-- ================================================== -->
<!-- =================== APP HEADER =================== -->
<!-- ================================================== -->

{{ view App.HeaderView }}

<!-- ================================================== -->
<!-- ======================= APP ====================== -->
<!-- ================================================== -->

<div id="app" class="">

<!-- ================================================== -->
<!-- ==================== SIDEBAR ===================== -->
<!-- ================================================== -->

<div id="sidebar">

    {{ view App.NavigationView }}

    {{ view App.StarredCampaignsView }}

</div>

<!-- ================================================== -->
<!-- ====================== STAGE ===================== -->
<!-- ================================================== -->

<div id="stage" class="">

    <!-- ================================================== -->
    <!-- ================= STAGE SIDEBAR ================== -->
    <!-- ================================================== -->

        <div id="stage-sidebar" class="">

        {{ view App.StageSidebarView }}

    </div>

    <!-- ================================================== -->
    <!-- ====================== PAGE ====================== -->
    <!-- ================================================== -->

    <div id="page" class="">

        {{ outlet page }}

    </div>

</div>

</div> 
```

如您所见，CampaignsCampaign 路线中有 2 个非常简单的警报，只是为了让我知道正在激活什么。

因此，/#/campaigns 返回广告系列列表，/#/campaigns/new 返回创建页面，/#/campaigns/:campaign_id 应显示单个广告系列及其详细信息。

这一切都在系统内部完美运行。当您从 /#/campaigns 视图中单击一个活动时，它会直接链接到详细视图，并加载所有正确的信息。

**问题**

如果您只是输入类似“ [http://mysite.com/#/campaigns/ANY_ID](http://mysite.com/#/campaigns/ANY_ID)并且*不*单击列表视图中的链接，则会出现问题。页面只是加载空白并且没有调用renderTemplate（没有alert). 模型正在加载（收到警报）并且 params.campaign_id 正在成功传递（可以成功登录到控制台）。

我认为这是一个路由器问题，但不知道从哪里开始。任何帮助，将不胜感激。

谢谢参观！我可以发布更多信息，请在评论中告诉我您需要什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T22:22:02.303

直接访问页面所遵循的过程与访问链接时所遵循的过程略有不同。我没有看到您模板中的链接，所以我不能 100% 确定发生了什么，但总的来说，如果您转到链接

```
{{#linkTo myRoute myVar}} A Link {{/linkTo}} 
```

该路线不运行该`model`功能，您只是从`myVar`您的模型开始（但您仍然执行该`setupController`功能）。

因此，要使硬链接工作，您需要一个`model`函数来收集链接变量传递的信息。

# selenium-ide - Sideflow.js GotoIf 我如何使用条件

> ID：14821252
> 
> 赞同：1
> 
> 时间：2013-02-11T21:32:58.943
> 
> 标签：selenium-ide

我一直在研究三种不同的方法来解决这个问题。我所知道的是最简单的方法希望是执行以下操作。

表单字段1（忽略语法，我这里只是设置一个例子） id= 是两个表单字段中的重要部分。

```
<select name="select" id="pick_animal" value="">
  < option="the fast cat" id="1">
  < option="the fast dog" id="2">
</select> 
```

表单域 2

```
 <input type="text" id="some_animal" value="the fast cat from dover"> 
```

我需要检测到 id="some_animal" 包含 cat 以便我可以对字段 1 中的正确选项执行操作。我可以很好地完成第二部分，我只是无法在 id 的输入中检测到“cat” "some_animal" storeTextPresent 只是寻找 cat 是否存在于页面上的任何位置。啊！！我可以看到解决此问题的一种方法是执行以下操作。

```
storeValue | id=some_animal | value_some_animal
gotoIf | ${value_some_animal} contains "cat"   | my_cat_label
runscript | (message here)
goto | end
label | my_cat_label
run some commands here.
label | end 
```

所以在 gotoIf 语句中，我需要做一个条件，基本上想看看它是否包含“ *cat* ”，并且我在 selenium IDE 中使用 HTML 驱动程序，如果我能帮助它，我想避免使用 selenium webdriver。

```
<tr>
    <td>gotoIf</td>
<td> ${value_some_animal} ......</td>
    <td>target2</td>
</tr> 
```

gotoIf 如何使用 javascript 或任何其他方法评估它是否***包含***“cat”？

```
<td> '${value_some_animal}' == 'cat'</td>  <--- doesn't work
<td> '${value_some_animal}' == '*cat*'</td>  <--- doesn't work 
```

等等......在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:11:27.593

商店价值 | id=some_animal | value_some_animal

转到如果 | '${value_some_animal}'=='猫' | 我的猫标签

运行脚本 | （这里留言）

转到 | 结尾

标签 | 我的猫标签

在这里运行一些命令。

标签 | 结尾

像这样试试，觉得会好的。

谢谢你。

# python - PySide 文本编辑器

> ID：14821254
> 
> 赞同：4
> 
> 时间：2013-02-11T21:33:03.350
> 
> 标签：python, qt, pyside

我想在我的 python/pyside 程序中加入一个轻量级的文本编辑器。它应该能够做一些基本的事情，比如显示行号和语法高亮。

是否有一个模块/小部件，或者我必须自己制作一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T23:03:07.003

试试 QScintilla，它是 Eric IDE 使用的组件

[http://www.riverbankcomputing.co.uk/software/qscintilla](http://www.riverbankcomputing.co.uk/software/qscintilla)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T06:05:11.703

自己找这个： [PySide QSyntaxHighlighter](https://deptinfo-ensip.univ-poitiers.fr/ENS/pyside-docs/PySide/QtGui/QSyntaxHighlighter.html#detailed-description)

# c# - 一个项目里面有两个表单，每个表单构建两个单独的exe文件

> ID：14821256
> 
> 赞同：1
> 
> 时间：2013-02-11T21:33:17.580
> 
> 标签：c#, .net, visual-studio-2010

这就是问题，在一个 VS2010 项目中有两个表单，想要为每个表单输出单独的 .exe 文件吗？有什么建议么？
表单共享相同的数据，但具有不同的功能..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:42:20.593

从理论上讲，您可以使用两种不同的构建配置和预处理器定义以及单独的构建配置，但我想不出一个单独的实例可以做到这一点。

相反，您可能希望将代码分成 3 个项目。两个表单应用程序和 1 个库。将它们之间通用的代码放入库中。

# c# - 如何投射到列表 >

> ID：14821258
> 
> 赞同：2
> 
> 时间：2013-02-11T21:33:24.260
> 
> 标签：c#, list, casting, ienumerable, xelement

我首先这样做是为了在 id 等于 1 的父节点下返回一组特定的节点，这非常有效。

```
IEnumerable<XElement> world1 = LevelData.root.
                               Elements("world").
                               Where(element => (int?)element.Attribute("id") == 1); 
```

但是我需要多次执行此操作，并且每个都有自己的实例，所以我想将它们放入一个列表中，但它甚至没有编译并告诉我错误 CS0266：

> 无法将类型“System.Collections.Generic.IEnumerable”隐式转换为“System.Collections.Generic.List>”。存在显式转换（您是否缺少演员表？）

```
List<IEnumerable<XElement>>[] World = new List<IEnumerable<XElement>>[noofworlds];

        foreach (List<IEnumerable<XElement>> wn in World)
        {
            Debug.WriteLine("World: "+w);

            //this will make a list of all the nodes (elements) within the world specified by the id tag
            World[w] =  LevelData.Root.Elements("world").Where(element => (int?)element.Attribute("id") == 1);//with id == to i
            w++;
        } 
```

所以我尝试在`List<IEnumerable<XElement>>`之前添加演员，`LevelData.root.` 但后来我得到了一个无效的演员异常。我在一块砖墙上去哪里。有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T21:36:21.883

该`Where`方法不返回 a `List<>`，它返回 an `IEnumerable<>`，它在枚举时是惰性求值的。

如果您想要一个实际的对象，请在末尾`List<>`粘贴 a ，这样就可以了。`.ToList()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T21:36:11.027

```
var world1 = LevelData.root
                           .Elements("world")
                           .Where(element => (int?)element.Attribute("id") == 1)
                           .ToList(); 
```

您需要使用[ToList()](http://msdn.microsoft.com/en-us/library/bb342261.aspx)将其从[IEnumerable](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)转换，因为[IList](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)接口支持比[IEnumerable](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)接口更多的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T21:37:09.670

您可以通过调用转换`IEnumerable<T>`为`List<T>``ToList()`

```
List<XElement> world1 = LevelData.root
    .Elements("world")
    .Where(element => (int?)element.Attribute("id") == 1)
    .ToList(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T21:55:39.100

您的问题有点令人困惑，您似乎有一个数组，`List<IEnumerable<XElement>>`并且您正在尝试将 a 分配`IEnumerable<XElement>`给它。

如果你只是想要这个应该`List`工作`IEnumerable<XElement>`

```
List<IEnumerable<XElement>> World = new List<IEnumerable<XElement>>();
for (int i = 0; i < noofworlds; i++)
{
    World.Add(LevelData.Root.Elements("world").Where(element => (int?)element.Attribute("id") == i));//with id == to i
} 
```

否则 tou 将不得不创建一个新列表以添加到数组中并将其添加`IEnumerable<XElement>`到该列表中。

```
List<IEnumerable<XElement>>[] World = new List<IEnumerable<XElement>>[noofworlds];
for (int i = 0; i < noofworlds; i++)
{
    World[i] = new List<IEnumerable<XElement>> { (LevelData.Root.Elements("world").Where(element => (int?)element.Attribute("id") == i)) };//with id == to i
} 
```

# powershell - 如何从 Powershell 设置 TeamCity 构建状态？

> ID：14821259
> 
> 赞同：3
> 
> 时间：2013-02-11T21:33:24.893
> 
> 标签：powershell, build, teamcity, status

我正在尝试从 Powershell 设置 Team City 构建的状态。我找到了如何从 Windows cmd 执行此操作：

```
##teamcity[buildStatus status='FAILURE' text='A non-standard URL has been committed to SVN']
EXIT 1 
```

作为 cmd 运行时，它可以完美运行；但是，我需要在 Powershell 脚本中执行此操作。谁能指出我正确的方向？我在 Powershell 中按原样尝试过，但井号就像注释一样。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T07:06:59.700

`#`sing 是单行注释的开头，您必须将其设为常规字符串。只需将其放入引号中：

```
"##teamcity[buildStatus status='FAILURE' text='A non-standard URL has been committed to SVN']"
exit 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:38:41.163

我找到了我的答案。效果很好！我只是错过了整个事情的报价：

[这是我的问题的解决方案](https://stackoverflow.com/questions/3674163/teamcity-command-line-build-runner-how-to-make-the-build-fail)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-22T21:43:59.333

在版本 7.1 之后，您可以使用 buildProblem 来报告失败，它会显示失败文本，而不仅仅是“exit 1”

> "##teamcity[buildProblem description='一个非标准的 URL 已提交给 SVN']"

# sql - SQL Server VIEW 结果与 SELECT 不同

> ID：14821263
> 
> 赞同：4
> 
> 时间：2013-02-11T21:33:50.320
> 
> 标签：sql, sql-server, sql-server-2005, view

我创建了以下简单视图：

```
CREATE VIEW cs.MyTestPO AS
SELECT ttdpur401100.t_orno
, ttdpur401100.t_item
, ttcibd001100.t_dsca
FROM ttdpur401100 
    JOIN ttcibd001100 ON ttcibd001100.t_item = ttdpur401100.t_item 
```

然后`SELECT * FROM cs.MyTestPO`返回 276376 行

如果我自己运行 select 语句

```
SELECT ttdpur401100.t_orno
, ttdpur401100.t_item
, ttcibd001100.t_dsca
FROM ttdpur401100 
     JOIN ttcibd001100 ON ttcibd001100.t_item = ttdpur401100.t_item 
```

它返回 277488 行

谁能建议为什么视图缺少 SELECT 语句返回的 1112 行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T22:29:23.980

如果从视图中选择和临时运行其定义之间确实存在差异，我会：

*   运行[sp_refreshview](http://msdn.microsoft.com/en-us/library/ms187821.aspx)
*   运行[dbcc checkdb](http://msdn.microsoft.com/en-us/library/ms176064.aspx)
*   删除并重新创建视图
*   确保将 SQL 修补到[最新的服务包](http://technet.microsoft.com/en-us/sqlserver/ff803383.aspx)。
*   ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～
*   重新启动 SQL Server 实例（我们现在开始到达）？
*   重启服务器？
*   联系[支持服务](http://support.microsoft.com/ph/1044/en-us)（这会变得很严重）。

不过，在执行任何这些操作之前，看看执行计划、统计 io 等是否存在差异会很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:39:54.970

要查看集合之间的差异，请尝试

```
SELECT d
d.t_orno    , d.t_item    , c.t_dsca
FROM ttdpur401100 d
   inner  JOIN ttcibd001100 c ON 
c.t_item = d.t_item left outer join
cs.MyTestPO t on d.t_item = t.t_item
where
t.t_item is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-25T21:42:22.803

刚刚与 SQL2008 实例有同样的问题。当我右键单击并将视图编写为创建脚本时，我可以清楚地看到视图定义中的硬编码值是“A”。但是，当我右键单击并选择前 1000 行时，没有返回硬代码。看起来，正在执行一组完全不同的代码。奇怪！挑战我所知道的关于数据库的一切。一定是 SQL Server 内部的一些奇怪的错误，或者尽管视图被修改，但奇怪的数据缓存检索......没有 Windows 功能，不涉及事务......我正在处理一组静态数据以进行数据迁移，不是实时系统。

当我从视图中选择 TOP 1000 来合并视图定义时，我收到有关列定义不匹配的错误，因此显然有些东西不同步。

I recompiled the view and the issue went away.

# jquery - JQuery 在每个嵌套部分内收集值的总和

> ID：14821266
> 
> 赞同：0
> 
> 时间：2013-02-11T21:34:05.633
> 
> 标签：jquery, sum, nested-lists

我正在创建一个包含父任务和子任务的任务列表。它们以有序列表的形式排列，并且嵌套了很多层，因此父任务内部也可以有子任务和父任务。

例子：

```
 <div class="item-list">
    <ol>
     <li class="parent">
        <div class="title">Im a task</div>
        <div class="totalhours">total child hours here please</div>
        <ol>
          <li>
            <div class="title">Im a task</div>
            <div class="hours">5</div>
          </li>
          <li>
            <div class="title">Im a task</div>
            <div class="hours">10</div>
          </li>
          <li class="parent">
           <div class="title">Im a task</div>
           <div class="totalhours">total child hours here please</div>
           <ol>
             <li>
               <div class="title">Im a task</div>
               <div class="hours">5</div>
             </li>
             <li>
               <div class="title">Im a task</div>
               <div class="hours">10</div>
             </li>
          </ol>
         </li>
        </ol>
     </li>
     <li>Another task thats not a parent on this level</li>
    </ol>
    </div> 
```

所以每个级别我都想拥有所有嵌套项目。因此，最顶层的父任务包括所有嵌套小时 div 的小时数，然后如果您向下钻取它，每个嵌套父级对其所有嵌套小时数都执行相同的操作，依此类推。

这就是我目前使用的，它只是计算每个小时的 div，而不是只嵌套并在任何地方放置相同的数字。

```
 var totalest = $('li.parent .totalhours');

    var sum = 0;

    $("li .hours").each(function() {
        var val = $.trim( $(this).text() );

        if ( val ) {
            val = parseFloat( val.replace( /^\$/, "" ) );

            sum += !isNaN( val ) ? val : 0;
        }

        totalest.html(sum); 
    }); 
```

我希望这个结果

*   我是家长任务 30 小时
    *   我是一个任务 5 小时
    *   我的任务 10 小时
    *   我是家长任务 15 小时
        *   我是一个任务 5 小时
        *   我的任务 10 小时
*   我是另一个家长任务 20 小时
    *   我是一个任务 5 小时
    *   我是一个任务 5 小时
    *   我是家长任务 10 小时
        *   我是一个任务 5 小时
        *   我是一个任务 5 小时

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:39:43.547

循环遍历每个父级并仅向该父级添加小时数。

```
$(".parent").each(function() {
  var sum = 0;
  $(".hours", this).each(function() {
    var val = $.trim( $(this).text() );

    if ( val ) {
      val = parseFloat( val.replace( /^\$/, "" ) );

      sum += !isNaN( val ) ? val : 0;
    }

  });
  $(this).find('.totalhours').html(sum); 
}); 
```

[http://jsfiddle.net/qqhD6/](http://jsfiddle.net/qqhD6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:39:53.450

诀窍是将其范围扩大到每个父母。

```
$('.parent').each(function(){
    var parent = $(this),
        total = parent.find('.totalHours'),
        sum = 0;

    parent.find('.hours').each(function(){
        var hours = $(this),
            text = $.trim(hours.text()),
            value = parseFloat(value);

        sum += !isNaN(value)?value:0;
    });

    total.html(sum);
}); 
```

# php - PHP 脚本内存泄漏直到最终溢出

> ID：14821267
> 
> 赞同：4
> 
> 时间：2013-02-11T21:34:07.183
> 
> 标签：php, memory

不断遇到 PHP 脚本的奇怪问题。该脚本的想法是从 MySQL 表中获取一堆数据，对其进行处理，比较另一个表中的一些数据，然后将结果打印到 CSV 格式的文件中。

该脚本将运行数十万次迭代才能完成。我遇到的问题是，即使在数组上使用 unset() 并在我的 MySQL 查询上使用 free() ，内存仍会继续使用，直到迭代 350,000 左右，内存不足。

毫无疑问，每次我运行脚本时，memory_get_usage() 报告的内存分配保持不变，直到大约 1050 次迭代。然后它将恰好增加 262,144 字节。通过测试，它也总是在脚本中完全相同的位置递增。在下面的代码块中，它将始终在 b2a 的迭代之一中递增（最多 4 次可能的迭代）。

```
//up here we get the data to run analysis/comparisons on.

echo "{$lineCounter}b:  " . memory_get_usage(TRUE) . "\n"; //27525120
if ($AttResults = $db_cx->query($ObsAttQuery)) {
   echo "{$lineCounter}b1:  " . memory_get_usage(TRUE) . "\n"; //27525120
   $attArray = array();
   echo "{$lineCounter}b2: " . memory_get_usage(TRUE) . "\n"; //27525120
   while ($attRow = $AttResults->fetch_object()) {
      echo "{$lineCounter}b2a {$attRow->attId}: " . memory_get_usage(TRUE) . "\n"; //27787264
      $attArray[$attRow->attId] = $attRow->value;
   }
echo "{$lineCounter}b3: " . memory_get_usage(TRUE) . "\n"; //27787264
$AttResults->free();
if (empty($attArray)) continue;

//down here after it is done I have an unset on the $attArray variable 
```

有什么建议可以尝试吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:59:03.980

在 5.3 版本之前，php 有一个非常愚蠢的垃圾收集器：[PHP 5 中的 Memory Leaks With Objects](http://paul-m-jones.com/archives/262)。有了这个，你甚至无法释放你的记忆`unset()`。您必须在取消设置之前打破循环引用，或者至少使用 php 5.3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:10:32.387

您是否查看了通过以下方式检索的数据：

```
$attRow = $AttResults->fetch_object() 
```

在迭代 1050 之前/前后？

...而且...是的，我会在循环之前更改分配，在循环之前进行一次获取，在结束之前进行一次获取以查看内存是否更改。

# highcharts - 显示 X 轴间隙——Highstocks

> ID：14821269
> 
> 赞同：2
> 
> 时间：2013-02-11T21:34:26.217
> 
> 标签：highcharts, highstock

我在获取我的数据以显示 X 轴上发送的数据的失效时遇到问题。应该被视为行中的间隙只是被合并到同一行中，例如在这个 img 中，由于互联网中断，数据从凌晨 4 点到上午 9 点，但行中没有中断。![在此处输入图像描述](../Images/3f85f660c991c1d2401455ce0698a1f3.png)

这是我目前拥有的示例的代码。

```
$.getJSON('mkjson.php?device=<?echo $device_name;?>&sensor=<?echo $sensor_name;?>&pin=<?echo $pin;?>&user=<?echo $_SESSION['user'];?>', function(data) {
    // Create the chart
    window.chart = new Highcharts.StockChart({
    credits : {
            enabled : false
        },
        chart : {
            renderTo : 'container',
            zoomType: 'x'
        },

        rangeSelector : {
            selected : 1
        },

        title : {

            text : 'Device:<?echo $device_name;?>'
        },
        subtitle : {
            text : 'Sensor:<?echo $sensor_name;?>'

        },

        xAxis: {
        type: 'datetime',
        dateTimeLabelFormats: {
            second: '%m-%d<br/>%l:%M:%S%p',
            minute: '%m-%d<br/>%l:%M%p',
            hour: '%m-%d<br/>%l:%M%p',
            day: '%m-%d',
            week: '%m-%d',
            month: '%Y-%m',
            year: '%Y'
        }
    },

        yAxis : {
            min: <?echo $yaxis_min;?>,
            max: <?echo $yaxis_max;?>,
            title : {               
                text : '<?echo $unit?>'
            },
            <?if(isset($alert1) ||isset ($alert2)){?>
            plotLines: [{
                color: '#FF0000',
                width: 1,
                value: <?echo $alert1;?>
            }, {
                color: '#FF0000',
                width: 1,
                value: <?echo $alert2;?>
            }]
            <?}?>

        },

        rangeSelector : {
            buttons : [{
                type : 'minute',
                count : 10,
                text : '10m'
            }, {
                type : 'hour',
                count : 1,
                text : '1H'
            }, 
            {
                type : 'day',
                count : 1,
                text : '1D'
            },
            {
                type : 'day',
                count : 3,
                text : '3D'
            }],
            selected : 3,
            inputEnabled : false
        },          

        series : [{
            name : '<?echo $unit;?>',
            data : data,
            tooltip: {
            valueDecimals: 2,
        formatter: function() {
            return Highcharts.numberFormat(this.y, 2);
        }},
            dataGrouping: {
            enabled: true
            }
        }]
    });
}); 
```

这也是来自 jsfiddle 中 highstocks 的示例，我试图用它来看看他们是如何完成它的。

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/data-grouping/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/data-grouping/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:02:21.973

要在 Highcharts 中添加间隔，您必须指定间隔结束的时间。为此，您必须将其`null`用作数据点，例如：

```
series: [{
    data: [{ 
        x: Date.UTC(2012,1,1,4,0,0,0),
        y: 24
    },{ 
        x: Date.UTC(2012,1,1,4,0,0,1), //to create a gap
        y: null
    },{ 
        x: Date.UTC(2012,1,1,9,0,0,0), //new data comes
        y: 24
    }]
}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-16T02:02:52.450

[plotOptions.series.gapSize](http://api.highcharts.com/highstock#plotOptions.series.gapSize)是正确答案。

> 定义何时在图表中显示间隙。间隙大小为 5 表示如果两点之间的距离大于两个最近点的距离的五倍，则图形将被破坏

对于每小时时间序列，我使用 6。当数据停止超过 6 小时时。

```
 plotOptions: {
  series: {
    gapSize: 6,
    . . . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-01T01:06:45.350

如果您切换到柱形图（或者可能是散点图），您会更好地看到各个数据点，而 Highstock 不会将它们与线条连接起来。Paweł 表示，Highstock 不知道缺少任何数据——它旨在平滑连接您提供给它的时间序列数据。

# html - CSS 如何使 div 水平居中

> ID：14821277
> 
> 赞同：2
> 
> 时间：2013-02-11T21:34:53.990
> 
> 标签：html, css

我正在将 div 水平居中。我有以下代码将我的 div 垂直和水平地居中于 body 标签中，但似乎只是垂直部分有效。我怎样才能让水平部件也能正常工作。提前致谢。

```
body
{
    background-color: #081418;
    font-size: .75em;
    font-family: Verdana, Helvetica, Sans-Serif;
    margin: 0;
    padding: 0;
    color: #696969; 
    text-align: center;
}

.OuterRim
{
    border:5px solid #99D7C0;
    height: 97%;
    width: 85%;
    /*center aligning*/ 
    display: block;
    text-align: left;
    margin: 0px auto;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:40:10.063

[在此处](http://tutorialzine.com/2010/03/centering-div-vertically-and-horizontally/)查看本教程以了解如何操作。您需要有一个固定宽度的元素。这可以使用 css 或 jquery 来完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T21:41:47.440

```
margin:0px auto; 
```

如果 div 定位为绝对或固定，则使用

```
margin:0px auto;
left:0;
right:0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:42:28.347

[http://jsfiddle.net/persianturtle/jm7vF/1/](http://jsfiddle.net/persianturtle/jm7vF/1/)

如果我理解正确，我相信这可能会解决您的问题。

我在您的 div 周围放置了一个容器 div，并在周围放置了百分比边距。

```
.container {
height: 50%;
margin: 25% 25% 25% 25%;
} 
```

希望这可以帮助！

# java - 视图处理程序对未实现接口 javax.faces.application.ViewHandler 的“com.sun.facelets.FaceletViewHandler”的引用

> ID：14821279
> 
> 赞同：0
> 
> 时间：2013-02-11T21:34:56.313
> 
> 标签：java, jsf, maven, richfaces, seam

我正在将普通项目转换为maven项目，所以我的配置有问题。

Maven 3 Seam 2.2 Richface 3.3 jsf 1.2 jboss 6

日食的警告信息：

> 视图处理程序对未实现接口 javax.faces.application.ViewHandler 的“com.sun.facelets.FaceletViewHandler”的引用

我添加了 jsf-facelets 和 jsf-impl

面孔-config.xml ...

> com.sun.facelets.FaceletViewHandler
> MessageResource_de_DE
> MessageResource_en_US
> ErrorMessageResource_de_DE
> de_DE en_US</default-locale> -->
> en_US ...

pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <parent>
        <groupId>de.openmind</groupId>
        <artifactId>openmind</artifactId>
        <version>1.0-SNAPSHOT</version>
        <relativePath>../pom.xml</relativePath>
    </parent>

    <modelVersion>4.0.0</modelVersion>
    <artifactId>openmind-war</artifactId>
    <packaging>war</packaging>
    <name>${project.artifactId} : ${project.version} WAR</name>

    ....
    ....

    <dependencies>
        <dependency>
            <groupId>de.openmind</groupId>
            <artifactId>openmind-ejb</artifactId>
            <type>ejb</type>
            <scope>provided</scope>
            <exclusions>
                <exclusion>
                    <artifactId>jxl</artifactId>
                    <groupId>net.sourceforge.jexcelapi</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>de.openmind</groupId>
            <artifactId>openmind-datamodel</artifactId>
            <scope>provided</scope>
        </dependency> 

        <dependency>
            <groupId>org.jboss.seam</groupId>
            <artifactId>jboss-seam</artifactId>
            <scope>provided</scope>
            <type>ejb</type>
        </dependency>

        <dependency>
            <groupId>org.jboss.seam</groupId>
            <artifactId>jboss-seam-ui</artifactId>
            <exclusions>
                <exclusion>
                    <groupId>commons-beanutils</groupId>
                    <artifactId>commons-beanutils</artifactId>
                </exclusion>
                <exclusion>
                    <artifactId>jboss-seam-jul</artifactId>
                    <groupId>org.jboss.seam</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.jboss.seam</groupId>
            <artifactId>jboss-seam-mail</artifactId>
        </dependency>

        <dependency>
            <groupId>org.jboss.seam</groupId>
            <artifactId>jboss-seam-debug</artifactId>
        </dependency>

        <dependency>
            <groupId>org.jboss.seam</groupId>
            <artifactId>jboss-seam-pdf</artifactId>
        </dependency>

        <dependency>
            <groupId>org.jboss.seam</groupId>
            <artifactId>jboss-seam-remoting</artifactId>
        </dependency>

        <dependency>
            <groupId>org.jboss.seam</groupId>
            <artifactId>jboss-seam-excel</artifactId>
            <exclusions>
                <exclusion>
                    <artifactId>jxl</artifactId>
                    <groupId>net.sourceforge.jexcelapi</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>com.sun.facelets</groupId>
            <artifactId>jsf-facelets</artifactId>
        </dependency>

        <dependency>
            <groupId>org.richfaces.ui</groupId>
            <artifactId>richfaces-ui</artifactId>
            <scope>provided</scope>
            <exclusions>
                <exclusion>
                    <artifactId>richfaces-api</artifactId>
                    <groupId>org.richfaces.framework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>commons-beanutils</artifactId>
                    <groupId>commons-beanutils</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>${app.context}</groupId>
            <artifactId>richfaces-impl</artifactId>
            <version>3.3.3.Final_FIXED</version>
            <scope>provided</scope>
            <exclusions>
                <exclusion>
                    <groupId>org.richfaces.framework</groupId>
                    <artifactId>richfaces-api</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>commons-beanutils</groupId>
                    <artifactId>commons-beanutils</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>${app.context}</groupId>
            <artifactId>tomahawk12</artifactId>
            <version>1.1.10FIXED</version>
        </dependency>

        <dependency>
            <groupId>apache-oro</groupId>
            <artifactId>jakarta-oro</artifactId>
            <version>2.0.8</version>
        </dependency>
        <dependency>
            <groupId>commons-digester</groupId>
            <artifactId>commons-digester</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
            <exclusions>
                <exclusion>
                    <artifactId>commons-beanutils</artifactId>
                    <groupId>commons-beanutils</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <scope>provided</scope>
        </dependency>
    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:42:16.997

尝试将其添加到您的 faces-config.xml 中：

```
<application> 
  <view-handler>com.sun.facelets.FaceletViewHandler</view-handler> 
</application> 
```

这对您的应用程序的 web.xml ：

```
<context-param> 
  <param-name>javax.faces.DEFAULT_SUFFIX</param-name> 
  <param-value>.xhtml</param-value> 
</context-param> 
```

您必须使用“.xthml”后缀访问您的网页。如果您仍有问题，请查看[此链接！](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Application_Platform/5/html/Seam_Reference_Guide/configuration.html)

# javascript - 在带有颜色框弹出窗口的表单上添加“您确定要离开页面而不保存吗”

> ID：14821285
> 
> 赞同：2
> 
> 时间：2013-02-11T21:35:21.287
> 
> 标签：javascript, jquery, popup, colorbox

我在弹出颜色框上有一个表单，如果用户编辑其中一个文本框然后他们点击取消，我想要一个弹出窗口，显示类似“你确定要离开而不保存吗？”。目前我有弹出窗口显示，但它在弹出颜色框已经关闭后显示

用户表页面

```
 $('a.openDialog').colorbox({
                iframe: true,
                transition: "elastic",
                width: "75%", height: "90%"
            }); 
```

实际表格页面

```
 $(':input', 'form').bind("change", function () {
                setConfirmUnload(true);
             });

function setConfirmUnload(on) {

              window.onbeforeunload = (on) ? unloadMessage : null;
          }

          function unloadMessage() {
              return 'You have entered new data on this page.' +
        ' If you navigate away from this page without' +
        ' first saving your data, the changes will be' +
        ' lost.';
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:41:32.933

如果没有帮助，您可以使用颜色框回调 onCleanup 或 onClose 可以在关闭按钮或 div 上添加侦听器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:00:17.337

我找到了解决方案，你必须调用 colorbox 的 oncomplete 函数，这是代码

```
$("#cboxClose").click(function (e) {

                        // stop any other script from firing
                        e.stopPropagation();

                        if (confirm('You have unsaved changes, are you sure that you want to cancel? All of your changes will be lost.')) {
                            $.colorbox.close();
                            // ensure that the binding is removed when closed
                            $("#cboxClose").unbind();
                        }

                    });

                } // close oncomplete 
```

# python - 我是否在这个生成器函数中过度使用了变量？

> ID：14821291
> 
> 赞同：2
> 
> 时间：2013-02-11T21:35:52.313
> 
> 标签：python, variables, loops, generator

我有这两个功能一起工作。第一个生成下一个素数。第二个将该素数附加到素数列表中。当我基本上说 i = next(n) = nextPrime(primeList) 时，我觉得我在第二个函数中过度使用了变量。有没有更好的方法来写这个？

```
def nextPrime(primeList):
    checkNum = 3
    while True:
        for i in primeList:
            if checkNum % i == 0:
                break
            if i > math.sqrt(checkNum):
                yield checkNum
                break
        checkNum += 2

def primeNumbers(limit):
    primeList = [2]
    i = 0
    n = nextPrime(primeList)
    while i <= limit:
        i = next(n)
        primeList.append(i)
    return primeList

primeList = primeNumbers(200000) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:43:49.570

这行得通吗？

```
def primeNumbers(limit):
    primeList = [2]
    for i in nextPrime(primeList):
        if i > limit:
            break
        primeList.append(i)
    return primeList 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:51:04.663

您可以使用[`itertools.takewhile`](http://docs.python.org/3/library/itertools.html#itertools.takewhile)为您完成大部分工作：

```
import itertools

def primeNumbers(limit):
    primes = nextPrime((2,))

    # Limit to `limit`.
    primes = itertools.takewhile(lambda i: i <= limit, primes)

    # Return a list.
    return list(primes) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T21:54:43.367

这不使用两个函数来做到这一点，但这是使用[Eratosthenes 的 Sieve](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)生成​​最高为 'n' 的素数的一般（我相信是最快的）方法：

```
def prevPrimes(n):
    """Generates a list of primes up to 'n'"""
    from numbers import Integral as types #'Integral' is a class of integers/long-numbers
    if not isinstance(n, types): raise TypeError("n must be int, not " + str(type(n)))
    if n < 2: raise ValueError("n must greater than 2")
    primes_dict = {i : True for i in range(2, n + 1)} # initializes the dictionary
    for i in primes_dict:
        if primes_dict[i]: #avoids going through multiples of numbers already declared False
            num = 2
            while (num * i <= n): #sets all multiples of i (up to n) as False
                primes_dict[num*i] = False
                num += 1
    return [num for num in primes_dict if primes_dict[num]] 
```

正如 Jack J 所指出的，避免使用所有偶数会使这段代码更快。

```
def primes(n):
    """Generates a list of primes up to 'n'"""
    primes_dict = {i : True for i in range(3, n + 1, 2)} # this does not
    for i in primes_dict:
        if primes_dict[i]:
            num = 3
            while (num * i <= n):
                primes_dict[num*i] = False
                num += 2
    primes_dict[2] = True
    return [num for num in primes_dict if primes_dict[num]] 
```

然后运行测试：

```
from timeit import timeit
def test1():
    return primes(1000)

print 'Without Evens: ', timeit(test1, number=1000)
print 'With Evens: ', timeit(stmt='prevPrimes(1000)', setup='from nums import prevPrimes', number=1000) 
```

输出：

```
>>> 
Without Evens:  1.22693896972
With Evens:  3.01304618635 
```

# c# - 识别 Windows Active Directory 连接 - Windows 8

> ID：14821296
> 
> 赞同：1
> 
> 时间：2013-02-11T21:36:04.613
> 
> 标签：c#, windows-8, active-directory

有没有办法从 Windows 8 商店应用程序 (C#) 中识别操作系统是 Windows 8 专业版还是企业版？您是否还可以检查操作系统是否具有连接到 AD 域的能力？

我发现其他帖子说找不到 Windows 的版本，并且帖子建议检查功能。我无法找到有关如何检查用户是否连接到域的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:15:25.563

您可以调用[UserInformation.GetDomainNameAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.userprofile.userinformation.getdomainnameasync.aspx)来确定用户是否属于域。该应用程序必须声明[企业身份验证应用程序功能](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx)。

要确定您是否使用 Pro，您可以调用[GetNativeSystemInfo](http://msdn.microsoft.com/en-us/library/windows/apps/ms724340.aspx)并从处理器架构中找出答案。

# python - SciPy 构建/安装 Mac Osx

> ID：14821297
> 
> 赞同：34
> 
> 时间：2013-02-11T21:36:07.907
> 
> 标签：python, macos, python-2.7, fortran, scipy

我在我的 mac os x 上成功地为 python 2.7.3 构建/安装了 NumPy。现在我也想构建/安装 scipy。我是从 git hub 下载的。进了目录。运行 python setup.py build ，它似乎一直在工作，直到遇到这个错误：

```
customize Gnu95FCompiler
Could not locate executable gfortran
Could not locate executable f95
customize NAGFCompiler
customize AbsoftFCompiler
Could not locate executable f90
Could not locate executable f77
customize IBMFCompiler
Could not locate executable xlf90
Could not locate executable xlf
customize IntelFCompiler
Could not locate executable ifort
Could not locate executable ifc
customize GnuFCompiler
Could not locate executable g77
customize G95FCompiler
Could not locate executable g95
customize PGroupFCompiler
Could not locate executable pgfortran
don't know how to compile Fortran code on platform 'posix'
building 'dfftpack' library
error: library dfftpack has Fortran sources but no Fortran compiler found 
```

我以为我为 NumPy 安装了 Fortran ......你猜不是吗？我将如何下载它？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-02-11T22:37:41.983

您的问题是您需要安装 Fortran 编译器来构建`scipy`.

此外，如果您已经有一个`numpy`禁用 Fortran 支持的构建，您可能需要替换它。一些 Apple 预装的 Python 版本已经`numpy`预装了这样的构建。

* * *

获取 Fortran 的最简单方法是使用[Homebrew](http://brew.sh/)。正如[文档](https://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/Installation.md#installation)所说，您需要先安装 Xcode 及其命令行工具。（安装命令行工具的方式几乎随 Xcode 的每个主要版本而变化，因此请参阅链接文档以获取最新说明。）然后安装 Homebrew。安装 URL 已经更改了几次，因此请参阅 Homebrew 主页或安装说明 ( [http://brew.sh/](http://brew.sh/) )，但会是这样的：

```
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" 
```

然后：

```
brew install gcc 
```

（请注意，直到 2014 年的某个时候，`gfortran`它是一个单独的配方`gcc`，所以命令`brew install gfortran`是：`brew install gcc`“。）

* * *

你真的很想使用[`pip`](https://pip.pypa.io)to install `scipy`，所以如果你没有那个，请先获取它。Apple 预装的 Python，至少在 10.7 和 10.8 中，包括`easy_install`但不包括`pip`，所以最简单的方法是：

```
sudo easy_install pip 
```

但是，您可能需要考虑使用 a[`virtualenv`](http://www.virtualenv.org/en/latest/)而不是全局安装（在这种情况下，您还希望删除`sudo`以下命令中的 ）。

现在你已经有了`gfortran`and `pip`，你所要做的就是：

```
sudo pip install --upgrade numpy
sudo pip install scipy 
```

* * *

注意事项：

*   上述说明适用于 Apple 预装的 Python 版本。如果你使用的是不同版本的 Python，你真的应该考虑不这样做。保持路径、安装的包等同步是一场噩梦。例外情况是如果您想要 Python 3.x 版本，在这种情况下，从 python.org 或 Homebrew 安装它是完全合理的。不会有冲突，因为`python`,`pip2.7`等将用于 Apple 的 Python；`python3`, `pip3.3`, 等用于 3.x 版本。

*   如果您已经有`pip`，但担心它可能已过时，`pip install --upgrade pip`. （除了安全性和鲁棒性的好处之外，这可以让您与某些科学堆栈或其他模块的二进制轮子兼容，从而为您节省大量时间。）

*   对于大多数非 Apple Python安装（甚至可能是 Apple 在 10.9 或 10.10 中的；我还没有检查过），您不*应该*使用. 按照[安装说明](https://pip.pypa.io/en/latest/installing.html)进行操作。但首先要确保你还没有它。`easy_install``pip`[`pip`](https://pip.pypa.io/en/latest/installing.html)

    *   如果您使用`virtualenv`/ `venv`，您的虚拟环境将已经包含`pip`.
    *   Python 3.4 或更高版本可能（并且将，如果来自 python.org 安装程序）包含一个[`pip`bootstrap](https://www.python.org/dev/peps/pep-0453)。如果您的 3.4+ 还没有`pip`，您可能需要`python -m ensurepip`安装它。
    *   一些第三方安装，如 Homebrew 或 ActiveState，包括`pip`.
*   对于 Python 3.3 或更高版本，您可能希望使用内置的[`venv`](http://docs.python.org/dev/library/venv.html)而不是`virtualenv`.

*   如果你正在使用 MacPorts、Fink、gentoo-alt 等，你应该安装`scipy`你的包管理器附带的包，它会拖入它需要的任何其他东西（甚至可能包括重建 Python 和 GCC）。

*   第三方二进制安装，如 Enthought 和 ActiveState 可能已经包含`scipy`您需要的所有其他内容。如果没有，说明与上面基本相同，但您必须猜测要跳过或遵循哪些步骤，是否要执行`sudo`等。

* * *

如果您使用的是 Python 2.7 的非 Apple 版本，并且想要避免 PATH 问题，则必须做两件事：

首先，永远不要`pip`在多个 Python 中安装任何包含脚本或二进制文件（包括其自身）的 Python 包。例如，如果您同时安装`ipython`Apple 2.7 和 Homebrew 2.7，两者都将尝试创建名为`/usr/local/bin/ipython`和的脚本`/usr/local/bin/ipython-2.7`。如果幸运的话，一次安装将失败。否则，它们都会成功，一个最终会覆盖另一个，并且您将无法运行覆盖的版本。

其次，确保备用 Python 脚本和二进制文件的路径位于 Apple 的 PATH 之前。根据您安装的备用 Python 以及您遵循的说明，这可能是：

*   `/usr/local/bin`
*   `/Library/Frameworks/Python.framework/Versions/2.7/bin`
*   `/usr/local/share/python2.7/bin`
*   `/usr/local/Cellar/python/2.7.3/bin`
*   别的东西

无论路径是什么，您都需要编辑 PATH 变量。

如果您想影响 GUI 应用程序（和 LaunchAgent 等），显然不再有支持的方式来执行此操作，但已弃用的[QA1067](http://developer.apple.com/library/mac/#/legacy/mac/library/qa/qa1067/_index.html)似乎仍然可以在 Lion 中使用。这也是 Homebrew [FAQ](https://github.com/mxcl/homebrew/wiki/FAQ)和[Python FAQ](https://github.com/mxcl/homebrew/wiki/Homebrew-and-Python)所建议的。

如果您只关心命令行会话（Terminal.app 和远程 ssh），则可以改为只执行标准 Unix 操作，即编辑相应的配置文件。哪个配置文件适合取决于您想要影响的内容。（所有用户还是只有一个用户？bash 或任何 shell？等等。）如果你不知道你想要哪一个，你真的应该做一些研究。如果你不想费心学习，`~/.profile`那就去做，如果这不是你想要的，就不要抱怨。

无论哪种方式，您都需要确保适当的路径出现`/usr/bin`在 PATH 之前。因此，例如，您可以将以下内容添加到`~/.profile`：

```
PATH=/usr/local/bin:$PATH
export PATH 
```

（您当然需要创建一个新的终端 shell 或获取脚本，然后才能生效。）

如果您正在使用`homebrew`，`brew doctor`会告诉您是否正确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T00:52:58.913

看起来您的实际问题只是 Sourceforge 的间歇性下载失败：

```
curl: (33) HTTP server doesn't seem to support byte ranges. Cannot resume. Error: Download failed: downloads.sf.net/project/machomebrew/Bottles/… 
```

如果您再试一次，Homebrew 应该会自动从此错误中恢复`brew install gfortran`。所以，这是首先要尝试的。

如果这不起作用，请查看是否`brew doctor`发现任何问题，然后`brew install -d gfortran`查看它存储部分下载文件的位置，以便您可以手动删除它并重试。

如果一切都失败了，您可以通过使用强制它不使用瓶子`--build-from-source`。当然，从源代码构建比安装二进制瓶花费的时间要长得多，但它应该给出相同的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-20T16:51:03.650

自 2014 年 5 月 20 日起，如果您使用的是 brew，则 Fortran 将作为 gcc 的一部分安装。不需要单独的 Fortran 包。以下是我安装 numpy 的方法：

1.  根据abamert的回答安装brew（或参见[http://brew.sh/](http://brew.sh/)）
2.  安装 gcc ( `brew install gcc`)
3.  确认 brew 的 gcc 是正确的（`which gcc`应该指向 /usr/local/bin/gcc ）
4.  `export ARCHFLAGS=-Wno-error=unused-command-line-argument-hard-error-in-future`（请参阅[pip install numpy 的问题 - RuntimeError: Broken toolchain: cannot link a simple C program](https://stackoverflow.com/questions/22388519/problems-with-pip-install-numpy-runtimeerror-broken-toolchain-cannot-link-a)）
5.  `pip install numpy`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-18T18:17:12.293

我认为这个问题一点也不复杂。

1）安装点子

cd /Library/Frameworks/Python.framework/Versions/ ln -s 2.7 当前

cd /usr/bin rm -f python ln -s /Library/Frameworks/Python.framework/Versions/Current/bin/python python

2) 从[https://pypi.python.org/pypi/setuptools#files](https://pypi.python.org/pypi/setuptools#files)下载 egg sudo sh setuptools-0.6c11-py2.7.egg

3) 只需从此链接下载并安装 gfotran： [http ://r.research.att.com/tools/](http://r.research.att.com/tools/)

4) 之后，你需要输入： sudo pip install -U scipy sudo pip install -U numpy sudo pip install -U matplotlib

希望你应该拥有你想要的一切。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-01T00:54:11.053

我遇到了同样的问题，使用以下步骤：
1\. brew install gfortran
2\. pip install scipy

那么就可以了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-28T21:26:54.423

我安装了**gfortran**并且二进制文件是***gfortran-4.2***。因此，每次我尝试安装 SciPy 时都找不到编译器，因为它试图使用***gfortran***。

我所做的是创建一个***gfortran-4.2***到***gfortran***的符号链接。

要找到应该创建符号链接的位置，请运行：

```
$ which gfortran-4.2
/usr/local/bin/gfortran-4.2 
```

然后符号链接它：

```
ln -s /usr/local/bin/gfortran-4.2 /usr/local/bin/gfortran 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-14T15:36:44.620

对于 OSX yosemite 和可能更旧的 osx 版本，您可能需要在运行之前下载并安装 fortran 编译器`pip install scipy`。要下载最新的 fortran 编译器，只需转到以下链接：

[https://gcc.gnu.org/wiki/GFortranBinaries#MacOS](https://gcc.gnu.org/wiki/GFortranBinaries#MacOS)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-26T01:10:18.963

我认为您**的 Xcode 和 OSX 版本很重要**。我有 Xcode: 6.4 和 Os X 10.11.1 并且仍然收到相同的错误消息（找不到 gfortran 等）。我尝试了很多东西，包括@abarnert 的彻底回应，但我的解决方案是升级 Xcode（到 7.1.1）。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-02-11T21:40:57.487

我已经安装了 homebree，所以我要试试： $brew install gfortran 希望这有效

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-02-11T21:57:01.297

以下是在 OSX 10.7 上进行全新安装的详细说明。如果我是你，我会走这条路，而不是尝试自己下载和构建源代码。

[http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/](http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/)

# javascript - 在 .NET MVC 中保留 javascript 状态

> ID：14821299
> 
> 赞同：0
> 
> 时间：2013-02-11T21:36:17.283
> 
> 标签：javascript, asp.net-mvc, model-view-controller

我对 .NET MVC 框架的无状态特性有一些疑问。

我有一些 HTML 像

```
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
    <li>7</li>
    <li>8</li>
    <li>9</li>
</ul>
<button id="btnShowMore">Show More</button>
<a href="www.google.com">Google</a> 
```

我的javascript就像

```
var maxDisplay = 5;
var unit = 5;
$("li").slice(maxDisplay).hide();
if ($("li").length <= maxDisplay) $('#btnShowMore').hide();
$('#btnShowMore').click(function () {
    maxDisplay += unit;
    $("li").slice(0, maxDisplay - 1).show();
    if ($("li").length <= maxDisplay) $('#btnShowMore').hide();
}); 
```

现在，如果我展开我的列表，导航到 google，然后单击浏览器中的后退按钮，列表会忘记我所做的，并且只显示前 5 个列表项，这不是我想要的。

我想到了一些选择：

1.  曲奇饼。不是我想要的，因为有很多这样的页面，我需要为每个页面设置 cookie

2.  稍微操纵 url，比如利用 window.location.hash。也不好，因为那将是另一页

有一些传统的方法可以做到这一点吗？

提前致谢

* * *

**更新：**

似乎没有更多的解决方案出来了。我肯定更喜欢 localStorage 而不是 cookie，因为不需要在客户端和服务器之间传输这个变量，但是需要检查页面是第一次加载（清除缓存变量并显示 5 个项目）还是从导航返回加载（读取缓存和显示缓存的项目数）。

也许我应该和哈希一起去......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:46:44.267

您总是可以使用**`localStorage`**来持久化您的应用程序状态。并调整您的脚本，以便它直接读取和写入它。

以下是我常用来从`localStorage`

```
function setStorageItem(key, value) {
    var localStorage = window.localStorage;
    if (localStorage) {
        try {
            localStorage.setItem(key, window.JSON.stringify(value));
        } catch (e) {
        }
    }
    return !!localStorage;
}

function getStorageItem(key, defaultValue) {
    var localStorage = window.localStorage;
    if (localStorage) {
        var value = localStorage.getItem(key);
        if (value) {
            return $.parseJSON(value);
        }
    }
    return defaultValue || undefined;
} 
```

您的代码将是：

```
var maxDisplay = getStorageItem('maxDisplay', 5),
    unit = 5,
    more = $('#btnShowMore');

$("li").slice(maxDisplay).hide();

if ($("li").length <= maxDisplay){
    more.hide();
}

more.click(function () {
    maxDisplay += unit;

    setStorageItem('maxDisplay', maxDisplay); // remember it.

    $("li").slice(0, maxDisplay - 1).show();

    if ($("li").length <= maxDisplay){
        more.hide();
    }
}); 
```

如果 localStorage 不工作，您的代码将照常工作，如果是，它会记住该`maxDisplay`属性。

# 更新

如果您坚持使用 cookie：

```
function setCookie(key, value, expires) {
    var defaults = {
        path: '/',
        expires: 1000 * 60 * 60 * 6 * 24 * 30 // 6 months
    };
    var date = new Date();
    var offset = expires || defaults.expires;
    date.setTime(date.getTime() + offset);
    var json = window.JSON.stringify(value);
    var cookie = '{0}={1}; expires={2}; path={3}'.format(key, json, date.toGMTString(), defaults.path);
    document.cookie = cookie;
}

function getCookie(key, defaultValue) {
    var identifier = '{0}='.format(key);
    var cookies = document.cookie.split(';');
    for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i];
        while (cookie.charAt(0) == ' ') {
            cookie = cookie.substring(1, cookie.length);
        }
        if (cookie.indexOf(identifier) == 0) {
            var value = cookie.substring(identifier.length, cookie.length);
            return $.parseJSON(value);
        }
    }
    return defaultValue;
} 
```

# mysql - 强制mysql以某种方式使用索引

> ID：14821311
> 
> 赞同：0
> 
> 时间：2013-02-11T21:37:16.673
> 
> 标签：mysql

我发现，当对我们的 MySQL DB (5.5.27) 运行查询时，当优化器选择使用索引作为范围时，它会快速响应，但是当它选择 ref_or_null 时，它需要更长的时间。

有没有办法强制索引始终使用范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:38:14.137

如果您确定优化器没有正确使用索引，您可以尝试使用索引提示。

> ```
> SELECT * FROM table1 USE INDEX (col1_index,col2_index)
> WHERE col1=1 AND col2=2 AND col3=3; 
> ```

[文档](http://dev.mysql.com/doc/refman/5.0/en/index-hints.html)

# php - 致命错误：调用用户的成员函数

> ID：14821314
> 
> 赞同：0
> 
> 时间：2013-02-11T21:37:38.933
> 
> 标签：php, symfony, fosuserbundle

我想使用从 FOSUserBundle 继承的 User 类的 get 方法。但我有一个错误：

> 致命错误：在非对象上调用成员函数 getNom()。

我的用户类：

```
<?php
namespace Olr\LoanBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 */
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length=255)
     *
     */
    protected $nom;

    /**
     * @ORM\Column(type="string", length=255)
     *
     */
    protected $prenom;

    /**
     * @ORM\Column(type="string", length=50)
     *
     */
    protected $adresse;

    /**
     * @ORM\Column(type="string", length=50)
     *
     */
    protected $adresse2;

    /**
     * @ORM\Column(type="string", length=5)
     *
     */
    protected $cp;

    /**
     * @ORM\Column(type="string", length=50)
     *
     */
    protected $ville;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set nom
     *
     * @param string $nom
     */
    public function setNom($nom)
    {
        $this->nom = $nom;
    }

    /**
     * Get nom
     *
     * @return string 
     */
    public function getNom()
    {
        return $this->nom;
    }

    /**
     * Set prenom
     *
     * @param string $prenom
     */
    public function setPrenom($prenom)
    {
        $this->prenom = $prenom;
    }

    /**
     * Get prenom
     *
     * @return string 
     */
    public function getPrenom()
    {
        return $this->prenom;
    }

    /**
     * Set adresse
     *
     * @param string $adresse
     */
    public function setAdresse($adresse)
    {
        $this->adresse = $adresse;
    }

    /**
     * Get adresse
     *
     * @return string 
     */
    public function getAdresse()
    {
        return $this->adresse;
    }

    /**
     * Set adresse2
     *
     * @param string $adresse2
     */
    public function setAdresse2($adresse2)
    {
        $this->adresse2 = $adresse2;
    }

    /**
     * Get adresse2
     *
     * @return string 
     */
    public function getAdresse2()
    {
        return $this->adresse2;
    }

    /**
     * Set cp
     *
     * @param string $cp
     */
    public function setCp($cp)
    {
        $this->cp = $cp;
    }

    /**
     * Get cp
     *
     * @return string 
     */
    public function getCp()
    {
        return $this->cp;
    }

    /**
     * Set ville
     *
     * @param string $ville
     */
    public function setVille($ville)
    {
        $this->ville = $ville;
    }

    /**
     * Get ville
     *
     * @return string 
     */
    public function getVille()
    {
        return $this->ville;
    }
} 
```

从我的控制器：

```
public function invitationAction($token)
{
    $em = $this->getDoctrine()->getEntityManager();
    $entity = $em->getRepository('OlrLoanBundle:User')->findBy(array('salt'=>$token));

    return $this->render('OlrLoanBundle:Tribu:invitation.html.twig',
        array('nom'=>$entity->getNom(),
              'prenom'=>$entity->getPrenom(),
            ));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T21:40:57.640

`findBy()`返回 an `array`，因此您不能在其上调用方法。

# java - 使用 java 移动文件有哪些方法？

> ID：14821316
> 
> 赞同：0
> 
> 时间：2013-02-11T21:37:44.003
> 
> 标签：java, deployment, zip, installation, unpack

我正在为我正在制作的程序开发安装程序，它使用 zip 文件，由于某种原因，我找不到从 zip 文件夹解压缩和安装文件的方法。如果有人可以帮助我，我会非常高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:26:34.587

试试这个解压缩你的文件：

```
String zipName = "my.zip";
String installDir = "/home/user/installDir";
try
{
    ZipFile zipFile = new ZipFile(zipName);
    files = zipFile.entries();
    while (files.hasMoreElements())
    {
         ZipEntry zipEntry = files.nextElement();
         if(zipEntry.isDirectory())
         {
                (new File(installDir + zipEntry.getName())).mkdir();
                 continue;
         }
         InputStream in = zipFile.getInputStream(zipEntry);
         File newFile = new File("/home/user/tmp/testdit" + File.separator + zipEntry.getName());

         new File(newFile.getParent()).mkdirs();
         FileOutputStream fos = new FileOutputStream(newFile);
         byte[] buffer = new byte[1024];
         int len;

         while ((len = in.read(buffer)) >= 0)
         {
                fos.write(buffer, 0, len);
         }

         in.close();
         fos.close();
       }
   } catch (IOException ex)
   {
        ex.printStackTrace();
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:35:13.830

虽然`java.util.zip`Apache commons-io 提供了很好的机制来从 Java 中的 zip 文件中读取数据，但如果您真的想将 zip 文件解压到磁盘上并保留目录结构，那么最简单的 Java API 可能是 Apache Ant。

```
Project p = new Project();
p.init();
Expand ex = new Expand();
ex.setProject(p);
ex.setSrc(new File("myArchive.zip"));
ex.setDest(new File("targetDir"));
ex.perform(); 
```

但正如其他评论者所指出的，您可能应该考虑使用现有的安装程序构建工具，例如[IZPack](http://izpack.org)，而不是重新发明轮子。

# c# - 是否可以传入包含方法定义的字符串并在 C# 中执行它？

> ID：14821317
> 
> 赞同：0
> 
> 时间：2013-02-11T21:37:47.810
> 
> 标签：c#, dynamic, methods

我试图弄清楚这样的事情是否可行：

```
string simpleMethod = "public void Hello() { Console.WriteLine(\"Hello\"); }"

ExecuteMethod(simpleMethod);

public void ExecuteMethod(string myMethod) 
{
  //???
} 
```

预期输出：

```
Hello 
```

我知道上面的例子可能是不好的做法，但我很想知道是否有可能以某种方式做到。任何帮助或见解将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:43:24.953

您可以使用 Roslyn 编译器服务。应该是 VS2012 (.Net 4.5) 的一部分，但也可能在 VS2010 中可用，因为为其发布了 CTP [http://blogs.msdn.com/b/visualstudio/archive/2011/10/19/introducing-the-microsoft -roslyn-ctp.aspx](http://blogs.msdn.com/b/visualstudio/archive/2011/10/19/introducing-the-microsoft-roslyn-ctp.aspx)

# ios - 如何创建一个窗口通过一层进入另一层

> ID：14821321
> 
> 赞同：0
> 
> 时间：2013-02-11T21:37:55.057
> 
> 标签：ios, xcode, image, window, layer

我正在寻找一些方向来帮助在我的应用程序中实现特定功能。

这有点难以解释，但在这里。虽然我使用多层隐喻（a la Photoshop）来可视化我的目标，但这只是为了解释我的愿景——我意识到这在实践中可能并不合理。

我设想 3 个“层”

1.  包含图像的底层
2.  顶部的另一层 - 比如说 50% 的灰色 - 但降低了不透明度，因此原始层仍然可见但不再强调。
3.  然后是顶层的两个方形对象，每个对象都充当通过灰色层的“窗口”，一直到原始层等等 - 通过这些窗口，您可以看到完全不透明的原始图像的一部分。

最后，需要能够用手指在屏幕上拖动每个窗口，以独立重新定位每个窗口。

额外的功劳是如果每个窗口都可以调整大小（不是形状 - 仍然是正方形），理想情况下可以使用某种手指手势进行调整。

我不是在寻找代码（尽管我不会反对）。我正在寻找一种在 Objective-C 中执行此操作的方法，理想情况下不需要我深入研究高级主题，例如某些图形框架。

谢谢！托尼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:06:37.247

我会重新安排它。相反，有一个背景图像的平面图像，底部印有 50% 的灰色。然后，您拥有的两个正方形实际上是 UIImageViews，背景图像设置为固定位置，图像视图将该图像剪辑到它们的边界。当您移动两个图像视图时，您只需平移图像的原点。

抱歉，这有点难以解释我的想法。我应该试着画出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T02:14:11.377

这是我将尝试的粗略概述。

我会使用 2 个视图（不是图层）。最底部的视图将是图像视图。

顶视图将是自定义视图。此自定义视图将有两个其他视图作为子视图。这两个子视图将代表两个“洞”。使用自己的手势识别器设置两个子视图来处理平移和缩放。给两个子视图（和容器视图）一个清晰的背景，可能还有一个边框。此自定义视图的主视图需要`drawRect:`实现其方法。该实现将绘制部分透明的灰色背景。在绘制灰色之前，它将使用两个子视图的位置和大小来设置剪切区域。

每次调整或移动 2 个子视图的大小时，您都需要调用`setNeedsDisplay`容器视图，以便调用该`drawRect:`方法以刷新带有孔的灰色背景。

# asp.net-mvc - MVC 4 Web API 配置发送响应的最大大小？

> ID：14821325
> 
> 赞同：0
> 
> 时间：2013-02-11T21:38:12.753
> 
> 标签：asp.net-mvc, asp.net-web-api, queue

我在 C# 4.5 中有一个 MVC 4 Web API。我有一个从队列返回值的 get 方法。

该队列包含一个自定义对象列表。

```
<pre><code>
 Queue<List<MyObject>> mQueue;
</pre></code> 
```

队列的最大值可以是 50。所以基本上队列可以容纳 50 个列表的最大值。这些列表通常包含大约 100 - 400 个实体。所以 50 * 400 = 20,000 <-- 可能大约是最大 +2000，最小的情况是 5000。

现在假设队列有 50 个列表，我点击我的 Web 服务以在 Web 响应中将内容转储给我。响应可能非常大。

我似乎无法让服务返回超过 1.32-1.39 mb 的数据给我。这是由于返回响应的最大大小吗？如果是这样，我该如何解决这个问题？顺便说一句，响应是 json 格式的。我也在 IIS 7 中托管。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:02:23.973

原来我有一个旧版本的代码，其中队列最大大小设置为 5。哦，每个人都在星期一被授予一个 DURP 时刻。

# regex - 不使用正则表达式匹配字符串中的字符串

> ID：14821327
> 
> 赞同：0
> 
> 时间：2013-02-11T21:38:14.550
> 
> 标签：regex

我有一个这样排列的 XML 文件：

```
<xml:head>
    <xml:reportObject>
        <xml:device>
            <device:id>
                <id:value = value />
            </device:id>
            <device:OpAttributes>
                <OpAttributes:value = value />
            <device:OpAttributes>
            <device:Config>
                <Config:NetConfig>
                    <NetIF:ID = value />
                    <NetHost>
                        <NetHost:MAC = value />
                    </NetHost>
                </Config:NetConfig>
            </device:Config>
            <device:Role = value />
            <device:TaggedString name="value" value="value" />
            <device:Addition junk ........ />
        </xml:device>
    </xml:reportObject>
    Lather, Rinse, Repeat for several instances on reportObjects
</xml:head> 
```

我的问题是我试图解析出三个值（特别是“NetHost:MAC”、“device:Role”和“device:TaggedString”值）以转储到数据库列中的位置。

我们使用的程序是一个内部工具，它将根据 RegEx 匹配来执行此操作，但是由于“xml:device”标记之后的 XML 扁平化，我正在寻找一种方法来匹配每个“xml:device”标签继续进一步解析......踢球的是，如果“设备：角色”标签是客户端，我只能继续解析。其他任何东西都会带来太多垃圾和我的解析炸弹。

我最近的尝试（以及随后的失败）看起来像这样：

```
<xml:device([\s\S]+?(\b\w*Client\w*\b))</xml:device> 
```

这适用于我 90% 的匹配项，但在文件中的某个位置 [\s\S]+? 由于缺少较早的匹配，匹配得太远了，并且仍然使我的解析炸弹。

任何帮助都会阻止我把剩下的头发拉到我们的身上。

RegEx 是我目前必须通过我们的内部工具进行此解析的唯一选择。如果你能想到一些不同的东西，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:46:36.650

不要在尝试使用正则表达式时拔掉头发（女孩不喜欢秃头的程序员），而是试试这个`NSXMLParser`类（[Apple 很好地记录了](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)这一点）。设置此任务会容易得多。

# java - Freemarker 和 hashmap。我如何获得键值

> ID：14821329
> 
> 赞同：25
> 
> 时间：2013-02-11T21:38:31.733
> 
> 标签：java, html, freemarker

我有一个如下的哈希图

```
HashMap<String, String> map = new HashMap<String, String>();
map.put("one", "1");
map.put("two", "2");
map.put("three", "3");

Map root = new HashMap();
root.put("hello", map); 
```

我的 Freemarker 模板是：

```
<html><body>
    <#list hello?keys as key> 
        ${key} = ${hello[key]} 
    </#list> 
</body></html> 
```

目标是在我生成的 HTML 中显示键值对。请帮我做。谢谢！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-11T21:49:33.110

**代码：**

```
Map root = new HashMap();
HashMap<String, String> test1 = new HashMap<String, String>();
test1.put("one", "1");
test1.put("two", "2");
test1.put("three", "3");
root.put("hello", test1);

Configuration cfg = new Configuration(); // Create configuration
Template template = cfg.getTemplate("test.ftl"); // Filename of your template

StringWriter sw = new StringWriter(); // So you can use the output as String
template.process(root, sw); // process the template to output

System.out.println(sw); // eg. output your result 
```

**模板：**

```
<body>
<#list hello?keys as key> 
    ${key} = ${hello[key]} 
</#list> 
</body> 
```

**输出：**

```
<body>
    two = 2 
    one = 1 
    three = 3 
</body> 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-07-08T18:46:03.553

从 2.3.25 开始，您可以这样做：

```
<body>
<#list hello as key, value> 
    ${key} = ${value} 
</#list> 
</body> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-06T13:24:13.433

使用保留键值对插入顺序的映射：LinkedHashMap

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-26T15:58:50.137

2.3.25之前，如果key包含对象，可以尝试使用

```
<#assign key_list = map?keys/>
<#assign value_list = map?values/>
<#list key_list as key>
  ...
  <#assign seq_index = key_list?seq_index_of(key) />
  <#assign key_value = value_list[seq_index]/>
  ...
     //Use the ${key_value}
  ...
</#list> 
```

# python - "\b" 在字符串中行为不当

> ID：14821331
> 
> 赞同：1
> 
> 时间：2013-02-11T21:38:41.960
> 
> 标签：python, string, python-2.7, escaping

我有一小段代码似乎运行不正常；我是 Python 新手，想象一下我忽略了一些东西。代码是：

```
bs = ("\b", "\b", "\b", "\b", "\b", "\b", "\b", "\b", "\b");
print "b%ra%rc%rk%rs%rl%ra%rs%rh%r" % bs;
print "b%sa%sc%sk%ss%sl%sa%ss%sh%s" % bs; 
```

当我在 Powershell 中运行它时，输出是：

```
b\x08a\x08c\x08k\x08s\x08l\x08a\x08s\x08h\x08
h 
```

为什么在使用字符串（ ）输出时最后一个`h\b`评估为，而它似乎应该从原始（）输出中删除？`h``%s``%r`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:41:42.153

你不是用;*擦除*字符。`\b`你只支持一个位置。

所以这些字符会被下一个打印的字符覆盖。添加一个空格，它的工作原理：

```
>>> print "b%sa%sc%sk%ss%sl%sa%ss%sh%s " % bs 
```

# c - 将缓冲区内容写入文件

> ID：14821333
> 
> 赞同：0
> 
> 时间：2013-02-11T21:39:00.000
> 
> 标签：c, image-processing

如果我在内存中有一个缓冲区，其中包含 YUV 格式的图像，我如何将缓冲区内容保存到文件中，即我应该使用什么文件格式，以后可以在图像查看器中查看文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:10:12.600

如果您赶时间并且它是专有的，请将其丢弃。这比链接到 PNG 或 TIFF 库并获得正确的支持代码要容易得多。我似乎不记得大多数支持 UYVY 格式的图像查看器。这将用于电视视频，对吗？我过去只使用自己的格式并在 OpenGL 中有一个 Cg 着色器来显示图像。

[编辑] 对于一个非常简单和可移植的图像格式，请阅读： http: [//paulbourke.net/dataformats/ppm/](http://paulbourke.net/dataformats/ppm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:44:37.133

您可以使用一些库，例如

*   [http://www.libpng.org/pub/png/libpng.html](http://www.libpng.org/pub/png/libpng.html)
*   [http://libjpeg.sourceforge.net](http://libjpeg.sourceforge.net)
*   ...

# c# - 如何在 Mono C# 中将 Int64 转换为 BigInteger？

> ID：14821335
> 
> 赞同：0
> 
> 时间：2013-02-11T21:39:36.500
> 
> 标签：c#, mono, biginteger

在 MS C# 中，以下构造函数起作用：

```
Int64 a = 123;
BigInteger bi = new BigInteger(a); 
```

这在 Mono 中不起作用。编译抱怨它无法从 long 转换为 BigInteger（CS1502、CS1503）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:44:14.203

请参阅 Mono 上的 BigInteger 构造函数，[http: //docs.go-mono.com/?link=T%3aMono.Math.BigInteger%2fC](http://docs.go-mono.com/?link=T%3aMono.Math.BigInteger%2fC)

```
BigInteger()    
BigInteger(BigInteger)  
BigInteger(byte[])  
BigInteger(uint)    
BigInteger(uint[])  
BigInteger(ulong)   
BigInteger(BigInteger, uint)    
BigInteger(BigInteger.Sign, uint) 
```

没有构造函数接受`long (which is the same as Int64)`

尝试`BigInteger bi = new BigInteger((ulong)a);`

或者 `BigInteger bi = new BigInteger((uint)a);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:48:50.037

Mono.Math.BigInteger 只有构造函数接受 ulong。不是 System.Numerics.BigInteger 你要使用吗？

[https://github.com/mono/mono/blob/master/mcs/class/System.Numerics/System.Numerics/BigInteger.cs](https://github.com/mono/mono/blob/master/mcs/class/System.Numerics/System.Numerics/BigInteger.cs)

# css - CSS过渡向后/反向

> ID：14821343
> 
> 赞同：2
> 
> 时间：2013-02-11T21:40:13.230
> 
> 标签：css, animation, transition

我想知道是否有任何方法可以使用相同的 CSS 过渡实例来向前移动然后向后/向后移动。例如，假设我有这个过渡：

```
@-webkit-keyframes fade-transition {
    from { opacity: 0; }
    to { opacity: 1; }
} 
```

以及这次过渡的两名跑步者。一个淡入，另一个淡出：

```
.fade-in {
    -webkit-animation: fade-transition .2s linear backwards;
}

.fade-out {
    -webkit-animation: fade-transition .2s linear forwards;
} 
```

我想要完成的是使用相同的过渡来进行淡入和淡出，但我这样做的方式不起作用。

[这是 JSBin 上的示例](http://jsbin.com/aduwif/5/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:42:46.710

使用`percentage`代替`from`和`to`

```
@-webkit-keyframes fade-transition {
    0%, 100% { opacity: 0; }
    50% { opacity: 1; }
} 
```

您可以迭代此次数，也可以将其设置为无限

# string - Excel 近似文本匹配

> ID：14821345
> 
> 赞同：5
> 
> 时间：2013-02-11T21:40:31.843
> 
> 标签：string, excel, match, vlookup, approximate

我正在尝试检查 A 列中有多少字符串与 B 列中的字符串大致匹配。

例子：

如果我在 B 列中有字符串“angry_birds_iph_app”，并且“angry_birds_iph_app”和“angry_birds_adrd_app”出现在 A 列的某处，我希望函数返回 2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T18:25:42.243

查看 Excel 模糊查找加载项。它可以从微软免费下载。该工具实现了 Levenshtein 编辑距离算法以返回行之间的相似度分数。除了其他可自定义的功能外，该工具还允许您设置值必须匹配的阈值才能返回近似结果。

该工具不会像您提到的那样返回计数，而是返回一个在 A 列中相对于 B 列中的每个条目具有最相似匹配的表。从那里您可以简单地使用过滤器并对结果列执行计数。

[http://www.microsoft.com/en-us/download/details.aspx?id=15011](http://www.microsoft.com/en-us/download/details.aspx?id=15011)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-24T05:50:55.487

除了`Excel Fuzzy lookup`加载项之外，还有另一个加载项*（也是免费下载的）*提供了一些可能有用的功能。一个是`pwrVLOOKUP`并提供了模糊 vlookup 功能。另一个是`pwrSIMILARITY`并且会给您一个相似性分数（介于 0 和 1 之间），您可以根据该分数在工作表中进行匹配。`PowerUps`Excel 加载项适用于 Excel 2003 至 2013 。

此处的页面上发布了一个示例： [示例演示](http://officepowerups.com/2013/10/23/fuzzy-vlookup-in-excel/.)

# android - 在应用程序更新之前向用户发出警告（可能自动）

> ID：14821351
> 
> 赞同：0
> 
> 时间：2013-02-11T21:40:47.487
> 
> 标签：android, updates, termination, automatic-updates

在准备应用程序的新版本时，我发现以前的版本在所有情况下都不会将程序状态保存到永久存储中。因此，执行更新时，此信息可能会丢失。

有没有办法警告用户这个错误，并建议他们如何确保在执行更新之前正确保存程序状态？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:56:34.623

在更新之前无法做到这一点。如果您的应用没有实现 c2dm 或自定义通信渠道，则无法向用户发送消息。您可以做的最好的事情是在 google play 应用程序页面中添加警告消息并在新版本的应用程序中显示横幅，并警告用户他们的数据可能已丢失，非常抱歉）

# git - 在 Windows 上使用 Meld 的 Git 合并工具

> ID：14821358
> 
> 赞同：100
> 
> 时间：2013-02-11T21:41:13.230
> 
> 标签：git, meld

在 Linux 中，我最喜欢的合并工具是 Meld，我在使用或配置它以与 Git 一起工作时没有遇到任何问题。但是，在 Windows 中，情况就不同了。

首先，我从在这里找到的捆绑包中安装了 Meld：[https ://code.google.com/p/meld-installer/](https://code.google.com/p/meld-installer/)

然后，我像这样配置了我的 .gitconfig 以支持 Meld 作为默认的合并工具

```
[merge]                                                      
    tool = meld                                                                         

[mergetool "meld"]                                           
    path = C:\\Program Files (x86)\\Meld\\meld\\meld.exe
    keepBackup = false                                   
    trustExitCode = false 
```

因此，当我遇到冲突时，我会使用 git difftool 而 Meld 实际上会打开。但是，Git 写入传递给 diff 工具的文件的路径不正确。例如，即使 Git 在存储库目录（我调用 git mergetool 的位置）中生成 BASE、LOCAL 和 REMOTE 文件，Meld 也会尝试在可执行文件的目录中打开这些文件中的每一个。

Meld 没有打开 C:\repo\roses.txt.LOCAL.2760.txt，而是尝试打开 C:\Program Files (x86)\Meld\meld\roses.txt.LOCAL.2760.txt。

有没有人遇到过这个问题或者知道如何配置 Git / Meld 在 Windows 中正常工作？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2015-03-02T23:50:22.777

为什么你不在 Windows 上使用 git bash？

简单地安装融合后：

```
git config --global merge.tool meld
git config --global mergetool.meld.path "C:\Program Files (x86)\Meld\Meld.exe" <- path to meld here 
```

就这样！

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-25T18:57:21.040

Schuess，小心目录中的空格字符！

```
[merge]
    tool = meld
[mergetool "meld"]
    prompt = false
    keepBackup = false
    keepTemporaries = false
    path = C:/Program Files (x86)/Meld/Meld.exe
    cmd = \"/C/Program Files (x86)/Meld/Meld.exe\" \"$PWD/$LOCAL\" \"$PWD/$BASE\" \"$PWD/$REMOTE\" \"--output=$PWD/$MERGED\" 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-02-26T00:29:08.843

如何使用 meld`git difftool`代替`git diff`（另请参阅下面的 meld 截图）：

## 1\. 窗户：

下载并安装[适用于 Windows 的 Git](https://git-scm.com/download/win)，其中包括一个类似于“Git Bash”的 Linux 终端，一旦您安装了适用于 Windows 的 Git，就可以通过 Windows 资源管理器中任何文件夹中的右键菜单访问。

从这里下载并安装 meld：[https](https://meldmerge.org/) ://meldmerge.org/ 。

然后，`meld`您`git difftool`可以在 Git for Windows bash 终端中使用这两个命令（[如 Arugin 所说](https://stackoverflow.com/a/28821600/4561887)），使用正确的 Meld.exe 路径来制作您的 .

```
git config --global merge.tool meld
git config --global mergetool.meld.path "C:\Program Files (x86)\Meld\Meld.exe" 
```

或者您可以直接编辑您的`C:\Users\YOUR_USER_NAME\.gitconfig`文件并将以下内容添加到它的末尾（注意这里强制使用双反斜杠 [ `\\`] 作为路径分隔符！）：

```
[merge]
  tool = meld
[mergetool "meld"]
  path = C:\\Program Files (x86)\\Meld\\Meld.exe 
```

现在调用`git difftool`你的[Git for Windows](https://git-scm.com/download/win) bash 终端，Meld 将作为你的默认 difftool 查看器打开！如果您还不知道：您可以通过右键单击 Windows 资源管理器中的文件夹并转到 --> "Git Bash" 或其他任何名称来在 Windows 中打开所述终端。

## 2.Linux：

如果没有别的，我也不妨将 Linux 说明也放在这里供我自己参考：

对于 Linux，它更容易：

```
# 1\. install meld
sudo apt update
sudo apt install meld
# 2\. edit your ~/.gitconfig file (gedit GUI editor will open)
gedit ~/.gitconfig 
```

然后在 .gitconfig 文件的底部添加：

```
[diff]
    tool = meld 
```

就是这样！`git difftool`现在可以在 Linux Ubuntu 上运行！

## 3.Mac 操作系统

在 Mac OS 上安装 Meld：[https](https://superuser.com/questions/360007/how-to-install-meld-with-homebrew-on-mac-osx/1177575#1177575) ://superuser.com/questions/360007/how-to-install-meld-with-homebrew-on-mac-osx/1177575#1177575 。

## Meld 的示例屏幕截图

[![https://i.stack.imgur.com/sNR7J.png](../Images/3f9d07c57e9df4995e76d4fdba4615a5.png)](https://i.stack.imgur.com/sNR7J.png)

（[来源](https://upload.wikimedia.org/wikipedia/commons/3/30/Meld_file1.png)） [![在此处输入图像描述](../Images/ad3090cdd2d7a62ee0e44321a6d870ce.png)](https://i.stack.imgur.com/ZyGsF.png)

## Meld的使用

```
# 1\. See changes you've made since your last commit (do this in place of 
# `git diff`)
git difftool

# 2\. Calling meld directly to compare two files:
meld path/to/file1.txt path/to/file2.txt 
```

### 要在您的计算机上本地查看其他人的 GitHub PR，请使用`meld`

*注意：下面的命令假设他们的分支在你的同一个代码仓库中，因为你是队友。如果不是这种情况，您将不得不稍微修改命令以从他们的分叉存储库而不是从您的公共存储库中签出。当在线查看 PR 时，GitHub 将向您展示他们推荐的用于检查其分支的命令。*

1.  仅命令

    ```
    git fetch origin someone_elses_branch
    git checkout someone_elses_branch
    git difftool main...HEAD  # 3 dots, NOT 2! 
    ```

2.  带有详细注释的命令

    ```
    # 1\. Fetch their remote changes to your local machine into your 
    # locally-stored,remote-tracking hidden branch named
    # `origin/someone_elses_branch`
    git fetch origin someone_elses_branch
    # 2\. Check out this branch locally (this creates the locally-stored branch
    # named `someone_elses_branch` from the locally-stored remote-tracking
    # hidden branch named `origin/someone_elses_branch`)
    git checkout someone_elses_branch
    # 3\. Do a difftool comparison (using meld now) to see the changes
    # made on this branch from the point where they last checked out
    # and forked off of `main`. This cmd (using 3 dots) is the equivalent of
    # `git difftool $(git merge-base main HEAD) HEAD`.
    git difftool main...HEAD  # 3 dots, NOT 2! 
    ```

## 有关的：

1.  3 点与 2 点：[Git diff 提交范围中的双点“..”和三点“...”有什么区别？](https://stackoverflow.com/questions/7251477/what-are-the-differences-between-double-dot-and-triple-dot-in-git-dif/7252067#7252067)
2.  [我对我的回答`git blametool`][有没有类似于 bzr qannotate 的 git blame gui？](https://stackoverflow.com/questions/13490544/is-there-git-blame-gui-similar-to-bzr-qannotate/66433627#66433627)
3.  从这里下载并安装 meld：[https ://meldmerge.org/](https://meldmerge.org/)
4.  [我的回答][如何让 Git 使用我选择的编辑器进行提交？](https://stackoverflow.com/questions/2596805/how-do-i-make-git-use-the-editor-of-my-choice-for-commits/48212377#48212377)
5.  [我的仓库] [https://github.com/ElectricRCAAircraftGuy/eRCaGuy_dotfiles](https://github.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles)
6.  在 Mac OS 上安装 Meld：[https ://superuser.com/questions/360007/how-to-install-meld-with-homebrew-on-mac-osx/1177575#1177575](https://superuser.com/questions/360007/how-to-install-meld-with-homebrew-on-mac-osx/1177575#1177575)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-20T01:56:56.247

我遇到了完全相同的问题，并发现我必须以蛮力的方式让它工作。这是我放在 .gitconfig 文件中的内容。（注意我的融合可执行文件在不同的位置）

```
[merge]
    tool = meld
[mergetool "meld"]
        cmd = "/c/Meld/meld/meld.exe $PWD/$LOCAL $PWD/$BASE $PWD/$REMOTE --output=$PWD/$MERGED" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-12T16:02:25.333

我在这个页面上的 meld 安装程序的错误报告中找到了一个解决方案：

[https://code.google.com/p/meld-installer/issues/detail?id=11](https://code.google.com/p/meld-installer/issues/detail?id=11)

据我了解，问题在于 meld.exe 程序（通过 python 解释器运行 meld）不必要地将命令的工作目录设置为 meld.exe 的工作目录。当作为命令行参数传递时，这会导致相对路径被错误地解释。

解决方案是将提供的 meld.exe 替换为使用 AHK2EXe（AutoHotKey 脚本 -> exe）编译 meld.ahk 文件生成的一个。只需下载页面最下方的脚本，因为那里已经发布了几个版本。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-11-18T12:24:47.687

我也遇到过类似的问题。使用的操作系统是 Windows 10，以下更改对我有用。看起来更像是路径问题

```
git config --global mergetool.meld.path "/c/Program Files (x86)/Meld/Meld.exe" <- path to meld here 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-06-26T09:23:11.417

由于某种原因，在 Windows 10 中，PATH 环境变量在安装过程中无法正确设置，因此引发了一个奇怪的异常，说它无法找到“C:\Program Files (x86)/ 下的某些 .dll”融合/bin”目录。

我的一个解决方法是，在 git bash 中执行：

```
export PATH=$PATH:"/C/Program Files (x86)/Meld/lib" 
```

或者添加到windows PATH

```
C:\Program Files (x86)/Meld/bin 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-02-06T13:30:01.290

没有一个答案对我有用。我最终在 .gitconfig 文件中得到了这个：

```
[merge]
  tool = meld
[mergetool "meld"]
  cmd = 'C:/Program Files (x86)/Meld/Meld.exe' $LOCAL $BASE $REMOTE --output=$MERGED
[mergetool]
  prompt = false 
```

在`git merge mybranch`以冲突结束后，您只需键入`git mergetool`并融合即可打开。保存后，您必须在 git 中提交并解决冲突。

出于某种原因，这只适用于 Meld 3.18.x，Meld 3.20.x 给了我一个错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-16T17:55:35.283

在尝试了上述所有方法之后，将 Meld 设置为以管理员身份运行对我有用。

1.  右键单击 Meld.exe
2.  转到**属性**>**兼容性**并选中`Run this program as an administrator`复选框

我收到的错误引用了类似的临时文件`c:\windows\temp\meld-*`，这些文件没有被创建。提升 Meld 的权限似乎可以解决问题，因为它现在可以与这两者一起使用`git difftool`并在 Meld 中手动运行。

# .htaccess - htaccess 在开发文件夹中

> ID：14821361
> 
> 赞同：0
> 
> 时间：2013-02-11T21:41:30.807
> 
> 标签：.htaccess

我有一个工作站点和开发站点。开发站点中的 htaccess 代码以

```
RewriteCond %{HTTP_HOST} ^abc\.co\.uk$
RewriteRule (.*) http://www.abc.co.uk/dev2$1 [NC,R=301,L] 
```

dev2 是根目录下的文件夹名称。但是，每当我单击 dev2 站点的链接时，它都会重定向到实时站点。我认为问题出在第二行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:21:29.530

尝试

```
RewriteCond %{HTTP_HOST} abc\.co\.uk$
RewriteRule (.*) http://www.abc.co.uk/dev2/$1 [NC,R=301,L] 
```

或更详细：

```
RewriteCond %{HTTP_HOST} ^abc\.co\.uk$ [OR]
RewriteCond %{HTTP_HOST} ^www\.abc\.co\.uk$
RewriteRule (.*) http://www.abc.co.uk/dev2/$1 [NC,R=301,L] 
```

# javascript - 如何单击元素并使用 javascripts“复制”事件添加到剪贴板

> ID：14821368
> 
> 赞同：0
> 
> 时间：2013-02-11T21:41:58.963
> 
> 标签：javascript, jquery, copy, clipboard

Javascript 终于有了“复制”事件，我们不再需要使用 flash！（好吧，我们仍然应该使用 flash 作为后备）。

[http://dev.w3.org/2006/webapi/clipops/#x3.1.1-copy-event](http://jsfiddle.net/LkUhM/)

我试图弄清楚如何：单击锚标记（复制）并将（文本输入src /或innerHTML）复制到剪贴板。[这是 HTML/CSS http://jsfiddle.net/LkUhM/](http://jsfiddle.net/LkUhM/)的小提琴

谁能指导我？

:::::HTML::::::

```
<div>
<ul>
    <li><input type="text" class="input" value="This is the next that will be copied!" /><a href="#" id="copy" class="copy">Copy!</a></li>
    <li><input type="text" class="input" value="This is the next that will be copied!" /><a href="#" id="copy" class="copy">Copy!</a></li>
    <li><input type="text" class="input" value="This is the next that will be copied!" /><a href="#" id="copy" class="copy">Copy!</a></li>
    <li><input type="text" class="input" value="This is the next that will be copied!" /><a href="#" id="copy" class="copy">Copy!</a></li>
</ul>

<textarea></textarea> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T03:14:00.190

1.  您正在查看该规范的旧版本。新的在这里：[http ://www.w3.org/TR/clipboard-apis/](http://www.w3.org/TR/clipboard-apis/)
2.  根据当前规范，您**不能**以编程方式模拟任何这些剪贴板事件。我正在尝试与适当的 W3C 工作组合作，将其更改为至少允许在用户单击和/或发出键盘事件时进行模拟（就像您如何使用 Flash 获得对剪贴板的写访问权限一样）。

# php - 类中的 PDO 可能存在语法错误

> ID：14821374
> 
> 赞同：0
> 
> 时间：2013-02-11T21:42:31.053
> 
> 标签：php, class, pdo

我是 PHP 和 PDO 的新人，我遇到了可能非常简单的语法错误，但我不知道如何正确地用谷歌搜索它。我已经尝试了很多方法来做到这一点，但每次我在同一个字符串上都有错误。有没有更好的方法在类中获取基于 PDO 的请求？我想只是将连接部分包含在一个单独的文件中，但 $db 变量仍然出现相同的错误。

```
class prepeared{
    private $_conn = "xxx"; //there is a real value here instead of "xxx"
    private $_user = "xxx";
    private $_pass = "xxx";
    private $_db;
    function __construct(){
        try{
        $this->_db = new PDO ($this->_conn, $this->_user, $this->_pass);
        }catch(PDOException $e){
        echo $e;
        }
    }

    static function loginParams($login, $pass){
        $stmt = $this->_db->prepare("SELECT userid from users where login = ? AND pass = ?"); // <<<---- here comes en error "Fatal error: Using $this when not in object..."
        $stmt->bindParam(1, $login, PDO::PARAM_INT);
        $stmt->bindparam(2, $pass, PDO::PARAM_STR);
        $stmt->execute();
        $row = $stmt->fetch(PDO::FETCH_ASSOC);
        return $row['userid'];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:45:48.230

您`$this`在静态上下文中使用，这是没有意义的。`static`从方法声明中删除或将方法中的内容`$_db` `static`更改`$this->_db->prepare`为`self::$_db->prepare`. 第一个选项可能更适合您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:45:56.260

静态函数不能使用 to，`$this`因为它`$this`指的是使用它的类的实例。静态函数是*静态*调用的，因此它们不需要类实例，这就是您不能使用的原因`$this`

# highstock - 向面积图添加动态不规则数据会导致其移动

> ID：14821377
> 
> 赞同：0
> 
> 时间：2013-02-11T21:42:40.030
> 
> 标签：highstock

背景：我们有在 highstock 图表中显示给用户的盘中数据。我们只想在图表上显示从上午 8 点到下午 4:30 的“交易时间”，因此我们在图表上创建静态分时仓位（在这些时间内每 2 小时）。我们向用户展示 2 天或 5 天的数据。我们使用截至当前日期/时间的所有数据加载图表，并且它可以正确显示。

问题：我们动态地将数据添加到图表中，但是在不是很活跃的图表上（不是每分钟都有刻度），当我们添加一个点时，图表数据会发生变化。我在视频中捕捉到了这一点：

[http://screencast.com/t/gPbrtpHHGN](http://screencast.com/t/gPbrtpHHGN)

你知道这是什么原因造成的吗？在 xAxis 上，我们设置了最小值、最大值和刻度位置。我们还为天之间的“分隔线”设置了 plotLines。

我附上了一个 jsfiddle [http://jsfiddle.net/jdrozd/t99Zk/](http://jsfiddle.net/jdrozd/t99Zk/)来显示发生了什么。

如果您单击“添加数据（+1 分钟）”，它可以正常工作（常规数据间隔）。

如果您单击“添加数据（+10 分钟） - 错误”，它的行为将不符合预期（班次图）。

如果您单击“添加数据（+10 分钟）- 右”，它会按预期运行。为了使它起作用，我添加了“空”数据点以使数据“常规”。我想避免这样做。我假设定位刻度并添加数据将允许数据正确排列。

这是添加插入空值的数据的代码：

```
function addDataFixed (delay) {
    for(i=1; i<= delay;i++){
        var val = null;
        var minutesToAdd = maxMinutes + i;
        if(i === delay){
            val = getRandomArbitary(102.95,103.4);
        }
        var date = new Date(2013,1,11);
        date.setHours(14);
        date.setMinutes(minutesToAdd);
        var pointData = [date.getTime(),val];
        chart.series[0].addPoint(pointData,false);
    }
    chart.redraw();
    maxMinutes += delay;                
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:29:45.687

在 Highstock/Highcharts 中，您不能只获取实际的分组数据并使用该选项设置数据 - 需要大量自定义属性才能工作。您可以简单`chart.series[0].options.data`地获取所有积分然后设置数据，请参阅：http: [//jsfiddle.net/t99Zk/9/](http://jsfiddle.net/t99Zk/9/)

另一种解决方案是（如果您确实需要使用分组数据）遍历所有点，并创建新的 x 和 y 数组（[x, y] 或 {x: x, y: y}）。

# visual-studio-2010 - 您可以将 tfs2010 中的多个变更集压缩为一个变更集吗？

> ID：14821382
> 
> 赞同：1
> 
> 时间：2013-02-11T21:42:47.040
> 
> 标签：visual-studio-2010

我有一个包含多个更改集的分支，我需要对其进行代码审查。我想知道是否有像 git 这样的方法将多个提交压缩为一个包含任务的所有不同文件更改的单个提交？或者不是压缩它们，有没有办法为所有更改集获取不同的更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:39:35.243

变更集是非常基本的项目。它们代表一个时间点，就像它们代表一组变化一样。“压扁”它们是没有意义的。

您可能想尝试免费工具[Code Review Sidekick](http://www.attrice.info/cm/tfs/)。它将允许您找到一组您想要查看的变更集，显示其中包含的单个文件和版本，并轻松执行版本之间的差异（包括与以前版本的差异，即使有超过代码审查中文件的一个版本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:46:19.240

您可以转到特定文件夹，右键单击并选择查看历史记录。

然后通过控制单击选择两个不同的变更集（第一个和最后一个），然后右键单击并选择比较。

这将向您展示这两个变更集之间的所有不同之处。

# php - 具有相关回波的多个 If

> ID：14821387
> 
> 赞同：0
> 
> 时间：2013-02-11T21:43:19.647
> 
> 标签：php, if-statement, upload

我是 php 新手。我已经为这个问题寻找了一个多小时的解决方案，但找不到答案。

示例情况：检查上传的文件扩展名和大小，并为每个失败（如果有）回显错误（在第一次失败时停止）。

到目前为止的代码：

```
$allowedfiletypes = array("image/jpg","image/jpeg","image/png");
if((!in_array($filetype, $allowedfiletypes))) {
    echo "Error, disallowed file type.";
} elseif($filesize > 1048576) {
    echo 'Filesize too large';
} else {
    move_uploaded_file($filetmpname, $uploaddir."/".$filename);
    echo 'The file has the following properties:'." ".$filename.", ".$filesize."kb, ".$filetype.".".'<br><br>';
    echo ' The file is stored in'.$uploaddir.$filename;
} 
```

但如果文件大小超过指定限制，这将不起作用。

我该怎么办`if() {echo 'error1';} || if {echo 'error2'.} else {}`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:45:10.557

为什么不使用标志？

```
$error1 = 1;
$error2 = 1;

if($error1 && $error2) { ... } 
```

或者使用错误计数器，`die`如果它达到特定计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:57:32.667

不是 100% 确定你想要什么，但如果你想向用户显示这两个错误，这应该有效：

```
$allowedfiletypes = array("image/jpg","image/jpeg","image/png");
$fileTypes = true;
$fileSize = true;
if((!in_array($filetype, $allowedfiletypes)))
   $fileTypes = false;

if($filesize > 1048576)
    $fileSize = false;

if ($fileSize && $fileTypes) {
    move_uploaded_file($filetmpname, $uploaddir."/".$filename);
    echo '<p>The file has the following properties:'." ".$filename.", ".$filesize."kb, ".$filetype.".</p>";
    echo '<p>The file is stored in'.$uploaddir.$filename.'</p>';
}
else {
    if (!$fileSize)
        echo '<p>Filesize too large</p>';
    if (!$fileTypes)
        echo "<p>Error, disallowed file type.</p>";
} 
```

# python - 使用通过 TMDB API 检索的 python 对象

> ID：14821390
> 
> 赞同：0
> 
> 时间：2013-02-11T21:43:24.203
> 
> 标签：python, api, object, printing, themoviedb-api

如何使用通过 TMDB API 检索到的一些数据？

这是功能：

```
class Movies(Core):
    def __init__(self, title="", limit=False):
        self.limit = limit
        self.update_configuration()
        title = self.escape(title)
        self.movies = self.getJSON(config['urls']['movie.search'] % (title,str(1)))
        pages = self.movies["total_pages"]
        if not self.limit:
            if int(pages) > 1:                  #
                for i in range(2,int(pages)+1): #  Thanks @tBuLi
                    self.movies["results"].extend(self.getJSON(config['urls']['movie.search'] % (title,str(i)))["results"])

    def __iter__(self):
        for i in self.movies["results"]:
            yield Movie(i["id"])

    def get_total_results(self):
        if self.limit:
            return len(self.movies["results"])
        return self.movies["total_results"]

    def iter_results(self):
        for i in self.movies["results"]:
            yield i 
```

和电话：

```
def search_tmdb(title):
  tmdb.configure(TMDB_KEY)
  movie = tmdb.Movies(title,limit=True) 
```

问题是，我如何查看和使用对象影片的结果？

我很抱歉这个可能很愚蠢的问题，但我现在正在接近 python

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:15:35.150

看起来您可以执行以下操作：

```
movies = tmdb.Movies(title,limit=True)
#if you want to deal with Movie objects
for movieresult in movies:
    #do something with the Movie result (here I'm just printing it)
    print movieresult

#if you want to deal with raw result (not wrapped with a Movie object)
for result in movies.iter_results():
    #do something with the raw result
    print result 
```

`tmdb.Movies(title, limit=True)`创建一个`Movies`对象。由于`__iter__`方法已定义，您可以使用该方法查看对象`for movie in moviesobject`中的结果`Movies`。您还可以`Movie`使用`movielist = list(movies)`.

# iphone - iOS解析：字符串为空

> ID：14821397
> 
> 赞同：0
> 
> 时间：2013-02-11T21:43:43.973
> 
> 标签：iphone, ios, parsing, nsstring

这是我的项目类中召唤我的解析器的方法。这个方法是由我的viewController召唤的。

```
- (NSString*)img
{
if (img!=nil) return img;
   if (_description!=nil)
   { 
 //    NSString* description = [NSString stringWithString:_description];
htmlParser = [[HtmlParser alloc] InitHtmlByString:_description]; 
   }
return img;
} 
```

这是我的解析器的初始化方法......

```
- (HtmlParser *) InitHtmlByString:(NSString *)htmlString {

NSString *description = currentHTMLElement.description;
NSLog(@"%@", description);
NSData *nsData = [[NSData alloc] initWithContentsOfFile:(NSString *)description];
elementArray = [[NSMutableArray alloc] init];

parser = [[NSXMLParser alloc] initWithData:nsData];
parser.delegate = self;
[parser parse];

currentHTMLElement = [ArticleItem alloc];
                  return self;
} 
```

现在我得到这样的输出：

013-02-11 15:26:18.564 DrillDownRSS[9251:c07]（空）

2013-02-11 15:26:18.612 DrillDownRSS[9251:c07]（空）

2013-02-11 15:26:18.662 DrillDownRSS[9251:c07]（空）

2013-02-11 15:26:18.695 DrillDownRSS[9251:c07]（空）

* * *

这是解决方案，感谢以下评论的周到建议。

```
//    NSString *description = [NSString string];
NSData *nsData = [[NSData alloc] initWithContentsOfFile:(NSString *)string];
elementArray = [[NSMutableArray alloc] init];

parser = [[NSXMLParser alloc] initWithData:nsData];
parser.delegate = self;
[parser parse];
NSLog(@"%@", string);

currentHTMLElement = [ArticleItem alloc];
                  return self; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:51:20.110

尽量避免任何自我声明的变量/名为*description*的属性。我有一个奇怪的错误，因为它覆盖了默认描述（每个对象都有。）

# c# - 精灵变得模糊

> ID：14821400
> 
> 赞同：7
> 
> 时间：2013-02-11T21:43:49.870
> 
> 标签：c#, xna-4.0

我开始学习 C# 和 XNA，我想显示一个动画精灵（由我的键盘移动）。

我有这个精灵文件：

![基本精灵](../Images/32844e3e440b6d5a49305ab71a6c3d04.png)

为了只显示我需要的部分，我使用以下代码：

```
Rectangle cuttedSprite = new Rectangle(
    this.W * (int)this.mCurSprite.X, 
    this.H * (int)this.mCurSprite.Y, 
    this.W, 
    this.H
);
spriteBatch.Draw(this.mSpriteTexture, this.mPosition, cuttedSprite, Color.White); 
```

但我的问题是移动后**渲染的图像模糊**：

![模糊问题](../Images/7797d928ba2a7b6d96e14338f120bdcb.png)

我试图通过更改来解决这个问题`SamplerStates`，但没有任何改变。有人有想法可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T22:25:24.347

**将精灵的位置四舍五入到最接近的整数。**

如果精灵的目标矩形偏移小于一个像素，像素着色器中的采样器将通过在相邻像素之间进行插值来计算颜色。

另一种选择是将采样器的[过滤方法](http://en.wikipedia.org/wiki/Texture_filtering)更改为最近邻插值。您可以通过在调用时指定 a`SamplerState.PointWrap`或来做到这一点。`SamplerState.PointClamp`[`SpriteBatch.Begin`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.begin.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T21:31:42.660

最简单的是释放移动按钮时转换为 (int)Position.X 和 (int)Position.Y

# jquery - jQuery 验证插件，在 Twitter Bootstrap 原生元素中放置错误

> ID：14821404
> 
> 赞同：9
> 
> 时间：2013-02-11T21:44:04.973
> 
> 标签：jquery, jquery-validate, validation

我正在使用 Twitter Boostrap 并尝试将 jQuery Validation 插件错误放在正确的元素中，而不是在 HTML 中硬编码每条消息。

请在此处查看 jsfiddle：http: [//jsfiddle.net/yaEaF/1/](http://jsfiddle.net/yaEaF/1/)

```
$('#register').validate({
rules: {
    name: {
        minlength: 2,
        required: true
    },
    lname: {
        minlength: 2,
        required: true
    },
    username: {
        minlength: 2,
        required: true,
        remote: {
            url: '/setup/verify_username/',
            cache: false
        }
    },
    email: {
        required: true,
        email: true,
        remote: {
            url: '/setup/verify_email/',
            cache: false
        }
    },
    password: {
        required: true,
        minlength: 5,
        maxlength: 250
    },
    password2: {
        equalTo: '#password'
    },
    postal_code: {
        required: true,
        minlength: 5
    },
    timezones: {
        required: true
    },
    mp: {
        minlength: 10,
        required: true
    },
    gender: {
        required: true
    },
    dob: {
        required: true,
        date: true
    }
},
messages: {
    name: "Please enter your first name",
    lname: "Please enter your last name",
    username: {
        required: "Please enter a username",
        minlength: "Your username must consist of at least 2 characters"
    },
    email: "Please enter a valid email address",
    password: {
        required: "Please provide a password",
        minlength: "Your password must be at least 5 characters long"
    },
    password2: {
        required: "Please provide a password",
        minlength: "Your password must be at least 5 characters long",
        equalTo: "Please enter the same passwords"
    },
    postal_code: "Please enter a valid zip code",
    timezones: "Please select a time zone",
    mp: "Please enter a valid mobile number. Only numbers please.",
    gender: "Please select a gender",
    dob: "Please enter a valid Date of Birth in mm/dd/yyyy format."
},
highlight: function (element, errorClass, validClass) {
    $(element).closest('.control-group').removeClass('success').addClass('error');
},
unhighlight: function (element, errorClass, validClass) {
    $(element).closest('.control-group').removeClass('error').addClass('success');
},
success: function (label) {
    $(label).closest('form').find('.valid').removeClass("invalid");
},
errorPlacement: function (error, element) {
    error.text(element.closest('.control-group').find('.help-block'));
}
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T21:47:55.260

首先，清空内联代码中的所有消息，但保留`span`'，因为我们不想过多地破坏您的布局。

```
<span class="help-block"></span> 
```

然后修改你的`errorPlacement`回调如下...

```
errorPlacement: function (error, element) {
    element.closest('.control-group').find('.help-block').html(error.text());
} 
```

`.validate()`现在将使用其中定义的所有消息。请注意我如何用自动占位符替换规则的值`{0}`。

```
messages: {
    name: "Please enter your first name",
    lname: "Please enter your last name",
    username: {
        required: "Please enter a username",
        minlength: "Your username must consist of at least {0} characters"
    },
    email: "Please enter a valid email address",
    password: {
        required: "Please provide a password",
        minlength: "Your password must be at least {0} characters long",
        maxlength: "Your password must be less than {0} characters long"
    },
    password2: {
        equalTo: "Please enter the same passwords"
    },
    postal_code: "Please enter a valid zip code",
    timezones: "Please select a time zone",
    mp: "Please enter a valid mobile number. Only numbers please.",
    gender: "Please select a gender",
    dob: "Please enter a valid Date of Birth in mm/dd/yyyy format."
}, 
```

**工作演示：http: [//jsfiddle.net/yaEaF/6/](http://jsfiddle.net/yaEaF/6/)**

# sharepoint - 如何安排对 MS Access 宏的调用？

> ID：14821405
> 
> 赞同：4
> 
> 时间：2013-02-11T21:44:08.640
> 
> 标签：sharepoint, ms-access, windows-7, macros, ms-access-2003

我希望安排对 MS Access 宏的调用。此宏使用 .csv 文件（我每天都会得到）来更新 SharePoint 日历。有人可以解释一下如何安排每日调用以在我的 Windows 7 机器上运行这个宏（我使用 Access 2003，比如 EventsCalendar.accdb 和名为 Run1 的宏）吗？我需要自动化它每天早上运行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:08:49.423

编写一个可以直接从 Windows 运行宏的 VBScript 脚本。为此，您可以先在脚本中创建一个 Access 应用程序对象，然后将此 Access 对象放在脚本中需要它的所有调用之前。例如，

```
' RunMyMacro.vbs

set accessApp = CreateObject("Access.Application")

accessApp.OpenCurrentDatabase "C:\db\mydb.accdb"
accessApp.DoCmd.RunMacro "MyMacroName"
accessApp.CloseCurrentDatabase
accessApp.Quit

set accessApp = nothing 
```

此脚本现在可以从 Windows shell 或命令行运行：

```
C:\db>cscript //B //Nologo  RunMyMacro.vbs 
```

因此，您可以将其安排为 Windows 计划任务。

# objective-c - AFURLConnectionOperation 'start' 方法在它准备好之前被调用，之后再也不会被调用

> ID：14821406
> 
> 赞同：1
> 
> 时间：2013-02-11T21:44:10.730
> 
> 标签：objective-c, afnetworking, nsoperation

我们在我们的应用程序中使用 AFNetworking ( [https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking) ) 和 NSOperationStack ( [https://github.com/nicklockwood/NSOperationStack](https://github.com/nicklockwood/NSOperationStack) ) 来设置依赖关系，以便最后一个操作优先于队列中的其余操作 (堆栈行为）。当调用 AFURLConnectionOperation 的 'start' 方法时，我遇到了一个问题，但是由于依赖关系，操作的 'isReady' 方法返回 NO。这使得“开始”立即退出。在第一次尝试开始操作之后，'start' 方法永远不会被再次调用，因此操作永远不会达到 isFinished 状态，永远不会从队列中删除，最终像这样的操作会阻塞队列。我将不胜感激有关此事的任何想法。谢谢！

更多信息：没有任何操作被取消，我在队列中看不到任何依赖圈。我们在现有 operationQueue 上使用 setLIFODependendenciesForOperation 而不更改 AFNetworking 代码：[self.operationQueue setLIFODependendenciesForOperation:operation];

更新：现在，更多地考虑一下，当 NSOperationQueue 决定操作准备好时，是否有可能在某一时刻有零依赖项并让 isReady 返回 YES，但是到那时， start() 被调用，依赖项的数量变为 1或者更多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T13:54:44.407

这听起来像是`'NS'OperationStack`您正在使用的 Github 项目的问题。

在文档中特别建议不要在将`NSOperation`依赖项添加到之后更改依赖项：`NSOperationQueue`

> **重要**在运行操作或将它们添加到操作队列之前，您应该始终配置依赖项。之后添加的依赖项可能不会阻止给定的操作对象运行。*（来自：[并发编程指南：配置互操作依赖](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW17)）*

我认为更好的方法是在操作队列之外维护自己的`LIFO`堆栈，并使用完成一个操作来触发下一个最重要操作的排队。

或者，如果您不需要严格，也许您可​​以使用`-[NSOperation setPriority:]`将后面的操作优先于早期的操作。

# chef-infra - 我可以为厨师节点设置 fqdn 吗？

> ID：14821408
> 
> 赞同：9
> 
> 时间：2013-02-11T21:44:15.550
> 
> 标签：chef-infra, knife

我有几台服务器设置了自定义内部本地域 - x.local。所以我有服务器 s1.x.local 等。我的刀将 fqdn 报告为 s1.domain.com。我可以在不更改服务器认为他们拥有的名称的情况下更改它吗？还是我需要实际更改服务器名称？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T05:17:57.573

你可以，但它不会保持设置为你给它的值。

FQDN 属性是 Chef 中的[自动属性](http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_automatic.html)。每次 Ohai 运行时，它都是由 Ohai 设置的。

因此，虽然您可以更改 FQDN 属性的值，但下次运行 Ohai 时，它将重新设置为`hostname --fqdn`.

因此，如上所述，如果要永久更改 FQDN 属性，则需要更改主机名。

# menu - 垂直菜单模组

> ID：14821409
> 
> 赞同：0
> 
> 时间：2013-02-11T21:44:15.620
> 
> 标签：menu, modx-revolution

我对 modx 很陌生，我想制作一个侧面菜单。
菜单有 2 个级别。
例如，文件树是：
**第一类**
--park
--hospital
...etc
**第二类**
--houses
--roofs
..etc

事情就是这样。我使用寻路器片段查看菜单
[[!Wayfinder? &startId= `0`&outerClass= `nav nav-list`&level= `0`]]
但我真正想要的是将顶级链接作为标题而不是链接。

有任何想法吗？具体来说，我想制作一个基于引导程序的导航列表菜单或类似的东西。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:12:22.643

看看 wayfinder 文档 - 大约在页面下方的 2/3 处，有用于更改输出模板的选项......我相信您想要使用的是 &parentRowTpl，只需创建一个模板，使顶级项目成为标题而不是链接。（不要忘记 [wf.wrapper] 来获取您的子菜单；））

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:34:23.480

[http://wiki.modxcms.com/index.php/Accordion_menu_with_Wayfinder](http://wiki.modxcms.com/index.php/Accordion_menu_with_Wayfinder) - 这是 Evolution 垂直菜单的示例，但对于 Revolution，没有必要进行任何更改，都是一样的。革命的第二个例子 - [http://creativedev.in/2012/10/accordion-menu-with-modx/](http://creativedev.in/2012/10/accordion-menu-with-modx/)

# ruby-on-rails - 仅为项目中的用户选中复选框

> ID：14821415
> 
> 赞同：0
> 
> 时间：2013-02-11T21:44:45.527
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, checkbox, many-to-many

在我的数据库中，我有两个具有多对多关系的表，因此我创建了一个关系表。

```
Projects
Users
Project_users <-- members of a project 
```

我正在处理用于编辑项目的视图，其中包含一个包含所有项目字段的表单，并且对于项目的成员，我呈现出复选框。这可行，但使用下面的代码，所有复选框都被选中，即使对于不是项目成员的用户也是如此。

那么，我应该如何更改代码以便只检查项目当前成员的复选框？

**编辑项目视图：**

```
<%= form_for @project do |f| %>
    ...
        the rest of the form
    ...
    <div class="checkbox">
        <% @members.each do |user| %>
            <%= check_box_tag "project[members][]", user.id, '1', :id => "user_#{user.id}" %> 
            <%= label_tag "user_#{user.id}", user.first_name + ' ' + user.last_name, :class => "checkbox" %>
        <% end %>
    </div>
    ...
        the rest of the form
    ...
<% end %> 
```

**项目负责人：**

```
...
def edit
    @project = Project.find(params[:id])
    @members = @project.users
end
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:48:43.370

的第三个参数`check_box_tag`是 check(ed) 状态的布尔值：

请参阅文档： [`check_box_tag(name, value = "1", checked = false, options = {})`](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/check_box_tag)

在你的情况下：

```
<% should_be_checked = @project.users.include?(user) %>
<%= check_box_tag "project[members][]", user.id, should_be_checked, :id => "user_#{user.id}" %> 
```

# ajax - 通过 AJAX 部分渲染的 Gmap4Rails.direction

> ID：14821417
> 
> 赞同：0
> 
> 时间：2013-02-11T21:45:07.010
> 
> 标签：ajax, ruby-on-rails-3, google-maps-api-3, gmaps4rails

我有一个列表，其中显示了一些距给定地址的距离的地方。此列表在使用过滤系统时由 ajax 更新。在我的部分 _place.html.haml 我使用这个：

```
- distance = Gmaps4rails.destination({:from => session[:address], :to => place.full_address}, options={}, output='pretty')
    %p= "Distance: #{distance.first["distance"]["text"]} (#{distance.first["duration"]["text"]})" 
```

现在，当我使用 ajax 提交我的过滤器表单（为此使用 pjax）时，ajax 调用已正确完成，但在通过 ajax 渲染部分后，页面在调用函数 Gmaps4rails.destination 后被完全刷新（没有 ajax）。所以它会阻止 ajax 调用/函数。

当我从部分 _place.html.haml 中删除此代码时，ajax 过滤功能运行良好，并且整个页面没有刷新。我应该怎么做/改变才能让它与 ajax 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T18:59:26.723

抱歉，我没有完全解决您的问题，但从描述来看，您似乎正在使用 pjax 并且还显示带有一些过滤条件的地图。

我还在一个应用程序中使用了 pjax 和 google-map。

场景：在单个页面上，我有两个选项卡，在选项卡开关处，我使用 pjax 在相同的 div 中加载内容。在我想显示地图的两个选项卡上，两个选项卡都使用相同的地图容器，所以我面临的问题是，pjax 运行成功，但地图没有加载。（为了加载地图标记，我添加了正在执行但未正确反映的 ajax 调用。）

解决方案：添加 pjax:end 事件

```
$("#your-div").bind 'pjax:end', ->
  # load you markers or call gmap related event 
```

因此，一旦您的 pjax 完成，您的地图相关事件就会发生。

这可能不是您问题的直接解决方案。但希望这会有所帮助。谢谢。

# exception - Lua - “尝试将数字与零进行比较”错误

> ID：14821418
> 
> 赞同：5
> 
> 时间：2013-02-11T21:45:09.310
> 
> 标签：exception, lua, null

```
a={51,31,4,22,23,45,23,43,54,22,11,34}
colors={"white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white"}
function try(f, catch_f)
    local status, exception = pcall(f)
    if not status then
        catch_f(exception)
    end
end
function refreshColors(yellowEndIndex,redIndex,blueIndex)
        for ccnt=1,table.getn(a),1 do
                if ccnt < yellowEndIndex then
                    colors[ccnt] = "yellow"
                elseif ccnt == redIndex then
                    colors[ccnt] = "red"
                elseif ccnt == blueIndex then
                    colors[ccnt] = "blue"
                else
                    colors[ccnt] = "white"
                end
        end
end
try(refreshColors, function(e)
    print("Error Occured - "..e)
end)
refreshColors(1,1,1)
print(colors[1]) 
```

当调用 refreshColors() 函数时，它会抛出异常并且错误消息是“发生错误 - trial.lua:11: 尝试将数字与 nil 进行比较”。尽管 refreshColors() 函数中没有这样的比较，为什么会出现异常？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T21:53:30.810

错误在第 11 行，这意味着：

```
if ccnt < yellowEndIndex then 
```

这是你与一个数字的比较。我们知道 ccnt 是一个数字（它在循环开始时初始化），所以 yellowEndIndex 必须为零。*1 < nil*是胡说八道，所以这是一个错误。

由于错误消息以“发生错误 -”开头，我们知道它一定来自您的*try*函数错误处理程序。这是有道理的。你打电话：

```
try(refreshColors, function(e)
    print("Error Occured - "..e)
end) 
```

尝试然后调用：

```
pcall(f) 
```

其中 f 是 refreshColors。*这会调用没有任何参数*的refreshColours ，即所有参数都初始化为 nil。当然，使用 nil 值调用 refreshColouts 自然会尝试将 1 (ccnt) 与 nil (yellowEndIndex) 进行比较！

您可能想像这样修改您的 try 函数：

```
function try(f, catch_f, ...)
    local status, exception = pcall(f, unpack(arg))
    if not status then
        catch_f(exception)
    end
end 
```

所以你可以这样称呼它：

```
try(refreshColours, function(e)
    print("Error Occured - "..e)
end), 1, 2, 3); 
```

将 1、2 和 3 作为参数传递给 refreshColours。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:51:23.127

发生错误是因为您正在调用：

try(refreshColors, function(e) print("错误发生 - "..e) end)

而且， refreshColors 没有参数，所以它确实是零？

# java - 如何使用 SWT 访问网络摄像头

> ID：14821421
> 
> 赞同：1
> 
> 时间：2013-02-11T21:45:19.120
> 
> 标签：java, swt, webcam, jmf

我打算在 SWT 中访问网络摄像头，但是在 Java 中它需要使用 JMF 来播放视频、音乐或打开网络摄像头，但是这些都可以添加到 Swing 组件中，有没有办法在没有 JMF 的情况下使用 SWT 播放视频？或者在没有或使用 JMF 的情况下在 SWT 中打开网络摄像头？如果有比 JMF 更好的访问网络摄像头的方法，请向我推荐该技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:52:09.893

最简单的选择是使用[`SWT_AWT`bridge](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/awt/SWT_AWT.html)在 SWT 中嵌入 Swing 组件。当我需要在 SWT 中播放视频（不是专门来自网络摄像头，但这不重要）时，我使用[了 Xuggler](http://www.xuggle.com/xuggler/index)并将其生成的图像转换为 SWT 格式，但目前还没有进一步开发。

# javascript - 重叠 div 的点击

> ID：14821425
> 
> 赞同：3
> 
> 时间：2013-02-11T21:45:46.100
> 
> 标签：javascript, html, css

我们如何单击重叠 div 后面的链接。

CSS是

```
#apDiv1 {
position: absolute;
left: 38px;
top: 28px;
width: 221px;
height: 182px;
z-index: 1;
text-align:right;
}
#apDiv2 {
position: absolute;
left: 117px;
top: 13px;
width: 169px;
height: 210px;
z-index: 2;
} 
```

和 html 是

```
<div id="apDiv1"><a href="javascript:alert('link1');">Link 1</a></div>
<div id="apDiv2">
  <p>&nbsp;</p>
<p><a href="javascript:alert('link 2');">Link 2</a></p>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T22:08:00.687

试试这个：

添加`pointer-events:none;`到上面的 div ( `apDiv2`) 然后：

```
#apDiv2 a {
    pointer-events:auto;
} 
```

为上层 div 中的链接重新启用它。

似乎至少在FF中工作。

更新[的小提琴](http://jsfiddle.net/hj9UL/1/)

# c# - 价值总是一样的

> ID：14821428
> 
> 赞同：1
> 
> 时间：2013-02-11T21:45:51.137
> 
> 标签：c#, task-parallel-library, task

为什么下面的值 X 总是 = 值“int.Parse(radTextBoxFloodRequests.Text)”而不是值 i？

**C# 代码**

```
private void radButtonTaskWithStatus_Click(object sender, EventArgs e)
{
    try
    {
        Task<int>[] tasks = new Task<int>[int.Parse(radTextBoxFloodRequests.Text)];

        for (int i = 0; i < int.Parse(radTextBoxFloodRequests.Text); i++)
        {
            tasks[i] = new Task<int>(() =>
            {
                int x = i;
                int result = TaskRequestWithResult(int.Parse(radTextBoxFirstNumber.Text), int.Parse(radTextBoxSecondNumber.Text), int.Parse(radTextBoxFloodDelay.Text), x);
                return result;
            });
        }

        var continuation = Task.Factory.ContinueWhenAll(
                    tasks,
                    (antecedents) =>
                    {

                        int total = 0;
                        for (int i = 0; i < int.Parse(radTextBoxFloodRequests.Text); i++)
                            total = total + tasks[i].Result;
                        Debug.Print("Finished - Sum of all results is: " + total);
                        MessageBox.Show("Finished - Sum of all results is: " + total);                     
                    });

        for (int i = 0; i < int.Parse(radTextBoxFloodRequests.Text); i++)
            tasks[i].Start();
        // Use next line if you want to block the main thread until all the tasks are complete
        //continuation.Wait();

    }
    catch (Exception ex)
    {

        MessageBox.Show(ex.Message.ToString());

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T21:47:33.423

您正在关闭循环值。您需要将临时变量移动到外部范围：

```
 for (int i = 0; i < int.Parse(radTextBoxFloodRequests.Text); i++)
    {
        int x = i; // This was in the wrong scope
        tasks[i] = new Task<int>(() =>
        {
            int result = TaskRequestWithResult(int.Parse(radTextBoxFirstNumber.Text), int.Parse(radTextBoxSecondNumber.Text), int.Parse(radTextBoxFloodDelay.Text), x);
            return result;
        });
    } 
```

有关为什么会发生这种情况的详细信息，请参阅 Eric Lippert 的[Closing over the loop variable considered dangerous](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)。

话虽如此，在这种情况下，您正在为序列中的每个元素执行“任务”。您可能需要考虑使用`Parallel.For`而不是一组任务，因为这在意图方面可能会更清楚。

```
int firstNum = int.Parse(radTextBoxFirstNumber.Text);
int secondNum = int.Parse(radTextBoxSecondNumber.Text);
int delay = int.Parse(radTextBoxFloodDelay.Text);
var task = Task.Factory.StartNew(() =>
{
    int total;
    Parallel.For(0, int.Parse(radTextBoxFloodRequests.Text), 
    () => 0,
    (i, loopState, localState) =>
    {
        return localState + TaskRequestWithResult(firstNum, secondNum, delay, i);
    },
    localTotal => Interlocked.Add(ref total, localTotal);

    return total;
};

var continuation = task.ContinueWith(
                antecedent =>
                {

                    int total = antecedent.Result;
                    Debug.Print("Finished - Sum of all results is: " + total);
                    MessageBox.Show("Finished - Sum of all results is: " + total);                     
                });  // Can use scheduler here if you want to update UI values 
```

# sql-server - 无法查看存储过程的列表

> ID：14821429
> 
> 赞同：0
> 
> 时间：2013-02-11T21:45:51.693
> 
> 标签：sql-server, sql-server-2008

我正在使用 SSMS 2008 R2 访问我的数据库。

这个数据库已经存在了很长时间，但由于某种原因，今天我似乎无法查看任何自定义存储过程。dbo 模式中应该有一个 ~30 的列表，但对象资源管理器只会显示“系统存储过程”的列表。

其中一位 DBA 刚刚针对成功执行的数据库执行了 CREATE SP 脚本……但我们不确定为什么我无法查看它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:22:16.897

**首先，在 SSMS 中试试这个。**

```
SELECT * FROM sys.procedures order by name 
```

如果可行，那么您可能只需要重新启动。

如果这不起作用，它可能会确切地告诉您它不起作用的原因，例如权限问题。

数据库权限已更改或您的用户帐户在网络上以某种方式更改的可能性非常高。

# sql - SQL查询匹配表（分配）

> ID：14821432
> 
> 赞同：0
> 
> 时间：2013-02-11T21:46:00.700
> 
> 标签：sql, phpmyadmin

好的，这是我的数据库提取

```
customers- ID, Fname, LName, Username, Password
Products - ProductsID, Name
Requests - requestid, productsid[fk for products table], cid[fk for customers table],
quantity, matchType
sellers - saleid, productsid[fk for products table], cid[fk for customers table], quantity
price. 
```

所以它们是我的带有 FK 表示外键的表......现在我遇到的问题是说这是从表值中提取的

```
customers=1,John,Smith,js123,123
customers=2,Joe,bloggs,jb555,abc
products=1,Sweets
products=2, chocolate
requests=1, 2, 1, 200, Exact
requests=2, 1, 1, 50, HighQuality
sellers =1,2,2,200,5.00 
```

好的，所以这里发生的事情是我们有 2 个客户和 2 个产品（糖果和巧克力），请求表显示.. requestid [主键]，产品 id，请求产品的客户 id，以克为单位的数量以及他们希望如何显示匹配项。因此，如果我们接受第一个请求，它将如下所示... REquestID 1[pk]，想要 chcolates(2)，想要巧克力的用户是 john smith，他想要与他的请求完全匹配的 200 克价值。 .. 现在我们有一个卖家，即 joe bloggs，他以 5.00 英镑的价格出售 200 克的巧克力......现在我遇到的问题是如何运行一个查询，将该卖家与相应的客户相匹配。即根据客户匹配类型（pre-fences）列出卖家名称这是我尝试过的：

```
select c.Fname, c.Lname, p.Name FROM customers c, Products p, Requests, sellers 
WHERE c.ID=sellers.cid AND p.ProductsID=sellers.productsid 
```

这将列出所有卖家名称和他们销售的产品名称。但是，我希望只显示请求表中单词为 EXACT 的那些产品。因此只匹配确切的数量。所以，我尝试了：

```
select c.Fname, c.Lname, p.Name FROM customers c, Products p, Requests, sellers 
WHERE c.ID=sellers.cid AND p.ProductsID=sellers.productsid  
AND Requests.productsid=sellers.productid AND Requests.matchType ='Exact' 
```

我已经尝试过了，但这并不能正确输出我想要的。我该如何解决它我希望我的输出是：

```
joe,bloggs,choclates 
```

所以这匹配requestid 1 where。但是我无法得到这个输出，有人能帮我吗？当然，通过将 products.id 与 Sellers.productsid 匹配会显示名称，然后通过将 requests.productid 与 Seller.productid 匹配 WHERE requests.matchType='Exact' 它应该可以工作吗？但它没有显示我期望的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:38:51.500

当 matchType 准确时，request.Quantity = Sellers.quantity。所以我想你的 where 子句应该是

```
WHERE c.ID=sellers.cid 
  AND p.ProductsID=sellers.productsid  
  AND Requests.productsid=sellers.productid 
  AND CASE WHEN Requests.matchType ='Exact' THEN sellers.quantity
           ELSE -1 END = CASE WHEN Requests.matchType ='Exact' THEN Requests.quantity
                              ELSE -1 END 
```

或者

```
WHERE c.ID=sellers.cid 
  AND p.ProductsID=sellers.productsid  
  AND Requests.productsid=sellers.productid 
  AND ((Requests.matchType ='Exact' AND sellers.quantity = Requests.quantity)
       OR Requests.matchType != 'Exact') 
```

# objective-c - XCode 4.6 dequeueReusableCellWithIdentifier：forIndexpath：不工作

> ID：14821433
> 
> 赞同：0
> 
> 时间：2013-02-11T21:46:03.727
> 
> 标签：objective-c, xcode, uitableview, ios6

我已经在这个项目上工作了一段时间。一切都很好，今天我升级到 XCode 4.6……突然，崩溃了。如果没有数据（我使用的是 Core Data），它将加载一个空白的 tableview。一旦我尝试在我的另一个视图控制器中添加一些东西，就会崩溃。模拟器和我的设备上的同样问题。启用“所有异常”断点后，调试器将指向这一行：

```
 ReedCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

我得到“UITableview：无法识别的选择器...”作为例外。我的类绝对是 UITableViewController 的子类，因此应该有一个 tableView，不是吗？当我将以下测试代码放入 ViewDidLoad 时，我没有得到确认。换句话说，我的 tableView 不再响应该方法。有没有搞错？如果它已被弃用，我看不到任何文档。

```
if ([self.tableview respondsToSelector:@selector(dequeueReusableCellWithIdentifier:forIndexPath:)]) {
    NSLog(@"RTVC responds to selector dequeueReusableCellWithIdentifier:forIndexPath:");
} 
```

我已经完成清理，从模拟器中删除它，检查故事板中的视图控制器是否仍然是正确的类（它是）。我还尝试将消息发送到“self.tableview”而不是“tableview”。没有修复。同样，这工作正常，我没有改变任何东西，只是升级到 4.6。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:51:34.713

此方法是在 iOS 6 中添加的。因此它不会存在于较旧的模拟器中。

您可以通过查看文档[UITableView来了解何时引入方法](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006943-CH3-SW92)

> **可用性**
> 适用于 iOS 6.0 及更高版本。

# jquery - 什么时候执行不属于 jquery doc/window 处理程序的 JS/jQuery 语句

> ID：14821435
> 
> 赞同：0
> 
> 时间：2013-02-11T21:46:10.703
> 
> 标签：jquery

我在客户端 JS 中有以下 jquery 代码

```
// Following gets executed at document.ready() time

    $(function() {
      prepareCurList();
    });

// When does the following code gets executed as its just a plain JS statement???

    prepareNextList(); 
```

请提供指点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:47:40.407

以下代码在执行后立即执行`$(function() { })`。

`$(function () {})`只是**注册**一个处理程序以在文档准备好时执行，但处理程序本身在文档准备好之前不会执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:57:16.463

Javascript 是独立于 DOM 的。当您的浏览器解析网页时，它将处理 HTML 部分并将其加载到 DOM（在内存中），而 javascript 部分将直接交给浏览器的 Javascript 机器。

javascript机器会直接执行Javascript代码而不等待任何东西（这就是为什么直接代码在解析时会直接执行），除非你问它。这就是为什么你在“加载”等上有一些事件处理程序。（旧的基本方式）

JQuery 帮助我们使用“就绪”方法。

写作：

```
$(function() {

    // SOme of your code

}); 
```

是相同的 ：

```
$(document).ready(function() {

    // Some of your code

}); 
```

只有在加载 DOM 并准备好使用后，您的所有代码才会执行​​。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T21:59:26.763

这是一个快速演示：http: [//jsfiddle.net/PwsPv/](http://jsfiddle.net/PwsPv/)

```
console.log(1);                 // 1
$(function(){
  console.log(5);               // 5
});
$(document).ready(function(){
  console.log(6);               // 6
});
console.log(2);                 // 2
$(window).on("load",function(){
  console.log(7);               // 7
});
console.log(3);                 // 3
$(window).on("load",function(){
  console.log(8);               // 8
});
console.log(4);                 // 4 
```

# javascript - 启动新标签并重新加载原始页面

> ID：14821436
> 
> 赞同：1
> 
> 时间：2013-02-11T21:46:13.820
> 
> 标签：javascript, html

在我的 LAMP 堆栈应用程序中，我以 pdf 格式创建发票。第一个屏幕允许选择包含在发票中的采购项目。我的 pdf 使用 $_POSTed 表单数据在新选项卡中打开，效果很好，但我还想同时重新加载第一页，因为我还更新了为 pdf 发票选择的购买状态，我希望选择屏幕反映这一点. 有什么想法吗？请注意仅使用本机 Javascript 或 PHP 解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T21:55:07.000

也许是这样的：

```
<a onclick="open_in_new_tab_and_reload('./path_to_pdf.pdf')" href="#">PDF</a>

<script>
function open_in_new_tab_and_reload(url)
{
  //Open in new tab
  window.open(url, '_blank');
  //focus to thet window
  window.focus();
  //reload current page
  location.reload();
}
</script> 
```

# c++ - Visual Studio 2012 上的 WildMagic 5.9

> ID：14821439
> 
> 赞同：0
> 
> 时间：2013-02-11T21:46:19.303
> 
> 标签：c++, c, visual-studio

我正在尝试在 Visual Studio 2012 上构建 WildMagic 5.9，但出现以下错误：

```
Error   3   error C2039: 
'greater' : is not a member of 'std'
c:\wildmagic5\libmathematics\intersection\wm5intrellipsoid3ellipsoid3.cpp 142 1
LibMathematics_VC100 
```

为什么？要解决什么问题才能编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:03:09.423

需要包括：

```
 include <functional> 
```

# facebook - Facebook SDK 3.1：使用 pre-IOS6 模拟器的授权过程中出现未知错误

> ID：14821442
> 
> 赞同：1
> 
> 时间：2013-02-11T21:46:29.247
> 
> 标签：facebook, ipad, permissions, authorization

如果我在 iPad 4.3 模拟器中运行应用程序，我在第一次使用 Facebook sdk 3.1 授权应用程序时遇到问题。

这是我的代码：

```
return [FBSession openActiveSessionWithReadPermissions:[NSArray arrayWithObjects:@"user_photos",nil] 
                 allowLoginUI:allowLoginUI
                 completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                          switch (state)
                 {
                     //case FBSessionStateCreated:
                     //case FBSessionStateCreatedTokenLoaded:
                     case FBSessionStateOpen:

                          [[FBSession activeSession] reauthorizeWithPublishPermissions:[NSArray arrayWithObjects:@"publish_stream", nil]
                                      defaultAudience:FBSessionDefaultAudienceFriends
                                      completionHandler:^(FBSession *session, NSError *error) {
                                            [self sessionStateChanged:session
                                                                state:session.state
                                                                error:error
                                                              success:success
                                                              failure:failure];
                                            }];

                         break;
                     default:
                         break;
                  }

         }];

} 
```

应用程序将调用 safari 并要求用户登录。将应用程序添加到 Facebook 后，它会尝试在 safari 上打开一个新页面，我认为这将是 reauthorizeWithPublishPermission 部分。在它加载那个页面之前，我已经从 Safari 跳到 iPad 的主屏幕。此处的代码适用于 IOS6，尽管我在 IOS6 上有另一个问题，所以我已将其作为单独的问题发布。

控制台上的错误是这样的：

> 2013-02-12 10:15:16.012 PG Facebook[911:16b03] 错误 = 操作无法完成。（com.facebook.sdk 错误 2。） 2013-02-12 10:15:17.187 PG Facebook[911:16b03] FBConditionalLog：一旦会话关闭，不应调用 handleOpenURL Facebook[911:16b03] 错误 = 操作无法'没有完成。（com.facebook.sdk 错误 2.）wait_fences：未能收到回复：10004003

这是我在控制台上看到的三个主要错误。有谁知道出了什么问题？

# c++ - 窗口服务停止，但进程继续运行

> ID：14821448
> 
> 赞同：4
> 
> 时间：2013-02-11T21:46:50.817
> 
> 标签：c++, windows, service

我正在开发一个 Windows 服务应用程序，并注意到一个不寻常的问题。首先，我从 Windows 服务窗口运行服务并等待状态变为“已启动”。几分钟后点击停止，20秒左右后服务状态变为空白，表示服务已停止。然而，此服务背后的进程继续运行，并且在状态更新后可以在任务管理器中看到 10-30 秒。我在 Windows 7sp1 上运行。我还检查了事件查看器，它没有显示我的服务中的任何错误。（我提到这个的原因是因为我最初怀疑“在等待来自 x 服务的事务响应时达到超时”形式的超时错误。）

任何想法可能导致进程状态和服务状态之间的差异？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T22:02:08.393

当一个人有其他线程继续运行而与您的服务相关的线程没有关系（或已解除关联）时，就会发生这种情况。

请注意，一个进程可能是多租户并托管多个服务，因此停止命令并不总是意味着所有者进程必须退出，只是该服务应该停止在该进程中运行。

为了进一步调试，当您遇到这种边缘状态时，您应该附加一个调试器并停止所有线程并检查每个线程上的调用堆栈。对于单个服务进程，您可能会发现线程在等待 IO 或其他操作完成时挂起，或者存在空闲线程（例如消息循环线程）正在等待永远不会引发的信号。

# sql - 使用 Group By 时选择最高/最高计数的 SQL

> ID：14821450
> 
> 赞同：3
> 
> 时间：2013-02-11T21:47:07.373
> 
> 标签：sql, count, group-by

任何人都可以帮助我使用 SQL 来返回 App_ID 的最高计数。我正在运行这个返回以下数据集的 SQL。

```
SELECT COMP_ID, APP_ID, count(*) as cnt 
FROM APP_ACCT_VIEW
GROUP BY COMP_ID, APP_ID

COMP_ID APP_ID                    CNT
cpo1000c    AT                    999
cpo1kact    AT                    895
cpo1kact    CPOPYMTS_Administrative    1020
cpo1000c    CPOPYMTS_HighValue           1900
cpo1kact    CPOPYMTS_HighValue           1020
cpo1000c    CPOPYMTS_Internal            1999
cpo1kact    CPOPYMTS_Internal            1020
cpo1kact    IRCDR                     1020
cpo1000c    IRCDR                     50 
```

但我需要 SQL 返回每个 APP_ID 的顶部/最高 cnt，并且需要输出看起来像这样。

```
COMP_ID APP_ID                    CNT
cpo1000c    AT                    999
cpo1kact    CPOPYMTS_Administrative    1020
cpo1000c    CPOPYMTS_HighValue           1900
cpo1000c    CPOPYMTS_Internal            1999
cpo1kact    IRCDR                     1020 
```

谢谢迪彭

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:50:34.667

在大多数数据库中，您可以使用该`row_number()`函数来执行此操作：

```
select comp_id, app_id, cnt
from (select t.*, row_number() over (partition by app_id order by cnt desc) as seqnum
      from (SELECT COMP_ID, APP_ID, count(*) as cnt
            FROM APP_ACCT_VIEW
            GROUP BY COMP_ID, APP_ID
           ) t
     ) t
where seqnum = 1 
```

如果这不可用，则必须以其他方式计算 seqnum，例如相关子查询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T21:52:26.807

如果您使用的是 SQL-Server 2005 或更高版本，则可以将 CTE 与`ROW_Number`or`DENSE_RANK`函数一起使用：

```
WITH CTE AS
(
   SELECT COMP_ID, APP_ID, 
       CNT = COUNT(*) OVER (PARTITION BY APP_ID, COMP_ID) ,
       RN  = ROW_NUMBER() OVER (PARTITION BY APP_ID ORDER BY CNT DESC) 
    FROM APP_ACCT_VIEW
)
SELECT COMP_ID, APP_ID, CNT
FROM CTE
WHERE RN = 1 
```

如果您改为使用，则如果它们具有相同（最高） ，则`DENSE_RANK`每个记录将获得多条记录，这与每组总是返回一个结果不同。`APP_ID``CNT``ROW_NUMBER`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:28:21.163

另一种选择

```
 ;WITH cte AS
 (
  SELECT COMP_ID, APP_ID, COUNT(*) AS cnt,
         ROW_NUMBER() OVER(PARTITION BY APP_ID ORDER BY COUNT(*) DESC) AS rn
  FROM dbo.APP_ACCT_VIEW
  GROUP BY COMP_ID, APP_ID
  )
  SELECT COMP_ID, APP_ID, cnt
  FROM cte
  WHERE rn = 1 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/1ce8d/1/0)上的演示[](http://sqlfiddle.com/#!3/1ce8d/1/0)

# c# - Fluent NHibernate 映射参考

> ID：14821454
> 
> 赞同：2
> 
> 时间：2013-02-11T21:47:24.810
> 
> 标签：c#, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我对 Fluent NHibernate 相当陌生。我想知道是否有人会引导我走向正确的方向。

我有一个 WorkDay 类，它代表一周中的每一天。

```
 Table("WorkDays");
 Id(x => x.ID).GeneratedBy.Identity();
 Map(x => x.Date); 
```

我正在添加一个新表Holidays，它存储了全年的所有假期。

> CREATE TABLE [dbo].[Holidays]([ID] [smalldatetime] NOT NULL, [Description] varchar NULL)

我创建了一个假期类：

```
public class Holiday: Entity<DateTime>
    {
        public virtual string Description { get; set; }
    } 
```

并映射它：

```
public HolidayMap()
   {
      Table("Holidays");
      Id(x => x.ID).GeneratedBy.Assigned();
      Map(x => x.Description);
   } 
```

正确参考和映射工作日中的假期以检查特定日期是否为假期的最佳方法是什么？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:45:02.760

选项 1：如果您只需要知道某天是否为圣日

```
public virtual bool IsHolyDay { get; protected set; }

// in WorkDayMap
Map(x => x.IsHolyDay).Formula("(SELECT 1 FROM Holidays h WHERE h.Id = Date)"); 
```

* * *

选项 2：如果 Holydays 是静态的，则根本不映射它，而是将所有 HolyDays 保存在内存中并使用

```
IDictionary<DateTime, HolyDay> holyDays;

HolyDay holyDay;
if (holyDays.TryGetValue(workDay.Date, out holyDay))
{
    Print(workDay.Date + " is " + holyDay.Description);
}
else
{
    Print(workDay.Date + " is no holyDay");
} 
```

* * *

选项 3：如果您确实需要添加额外的参考，您可以

```
// in WorkDayMap
Reference(x => x.HolyDay, "Date")
    .NotFound.Ignore()  // because not every date is a holyday
    .ReadOnly();        // you already have a property which is responsible for insertion 
```

但这总是必须加载 HolyDay，因为 NH 必须知道 HolyDay 是否存在才能使属性无效或创建代理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:53:36.343

为什么不让你的假期班商店成为它适用的日期呢？

```
public class Holiday
{
    public DateTime Date { get; set; }
    public string Description { get; set; }
    public int Id { get; set; }
} 
```

为“工作日”设置单独的表格似乎不值得。您如何使用这些数据？

# html - PHP：$_POST 字段为空

> ID：14821457
> 
> 赞同：0
> 
> 时间：2013-02-11T21:47:27.770
> 
> 标签：html, php

我正在尝试通过电子邮件提交一个简单的表单，但是当我收到电子邮件时，$_POST 字段未填充，并且消息正文显示为：“名称：电子邮件：组织：角色：”没有数据。有任何想法吗？

HTML 文件：

```
 <form method="post" class="form-horizontal" id="contactForm"     action="submit_contact.php"></div>
        <div class="modal hide fade in" id="contactModal">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">×</a>
                <h3>Submit form</h3>
            </div>
            <div class="modal-body">
                <div style='display:none'></div>

                <fieldset>
                    <div class="control-group">
                        <label class="control-label">Name</label>
                        <div class="controls">
                            <input id="name" type="text" name="name" maxlength="75" />
                            <p class="help-block" id="name_error"></p>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">E-mail</label>
                        <div class="controls">
                            <input id="email" type="text" name="email" maxlength="75" />
                            <p class="help-block" id="email_error"></p>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Organization</label>
                        <div class="controls">
                            <input id="organization" type="text" name="organization" maxlength="75" />
                            <p class="help-block" id="organization_error"></p>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Role</label>
                        <div class="controls">
                            <select name="occupation" id="id_occupation">
<option value="" selected="selected">---------</option>
<option value="MD">Medical Devices - Sales & Marketing</option>
<option value="MO">Medical Devices - Other</option>
<option value="MD">Physician</option>
<option value="OT">Other</option>
</select>
                            <p class="help-block" id="occupation_error"></p>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class="modal-footer" style="height:30px">
                <a name="submit" type="submit" value="submit" id="contactSubmit" class="btn btn-primary pull-right" href="#">
                    Submit
                </a>
                <p style="text-align: left; margin-top:6px;" id="contactFormStatus"></p>
            </div>
        </div>
    </form>
</div>

<script>
$('#contactSubmit').on('click', function(e){
  // We don't want this to act as a link so cancel the link action
    e.preventDefault();

    // Find form and submit it
    $('#contactForm').submit();
});
</script> 
```

submit_contact.php：

```
<?php 
$ToEmail = 'xxx@xxx.com'; 
$EmailSubject = 'Site contact form'; 
$mailheader = "From: ".$_POST["name"]."\r\n"; 
$mailheader .= "Reply-To: ".$_POST["email"]."\r\n"; 
$mailheader .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
$MESSAGE_BODY = "Name: ".$_POST["name"].""; 
$MESSAGE_BODY .= "\nEmail: ".$_POST["email"].""; 
$MESSAGE_BODY .= "\nOrganization: ".$_POST["organization"].""; 
$MESSAGE_BODY .= "\nRole: ".$_POST["occupation"]."";
mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure"); 
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T21:48:27.743

```
<form method="request"> 
```

应该

```
<form method="post"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:48:53.407

将您的 HTML 表单方法更改为发布而不是请求

形成方法=“请求”...

到

形成方法=“发布”...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:50:10.830

据我所知，“方法”应该是“发布”，但您可以使用 $_REQUEST 访问它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T22:18:26.667

```
<form method="post" class="form-horizontal" id="contactForm"     action="submit_contact.php"> </div> 
```

验证您的 HTML，您有一个随机关闭的 div

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T23:20:05.303

将表单标签移动到模态正文中最终解决了这个问题。没想到这是解决方案，但是哦。

# php - 用空格分隔数字

> ID：14821462
> 
> 赞同：0
> 
> 时间：2013-02-11T21:47:51.427
> 
> 标签：php, numbers, space

我想用这样的空格分隔数字：1 200,12 500 或 2 000 000 而不是 2000000 ...

```
function show_price($id) {
    global $currency_a;
    if(get_option("defaultcurrency")) {
        $curr = $currency_a[get_option("defaultcurrency")][2];
    } else {
        $curr = $currency_a[get_post_meta($id, "currency", true)][2];
    }
    $price = get_post_meta($id, "price", true);
    $currpos = get_option("currpos");
    if($currpos == "1" || !$currpos) {
        return $price."".$curr;
    } elseif ($currpos == "2") {
        return $curr."".$price;
    } elseif ($currpos == "3") {
        return $price;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T21:49:52.980

PHP 有它自己的功能：`number_format()`

[http://php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

只需将 $thousands_sep 参数设置为空白而不是默认值。例如：

```
number_format($number, 0, '.', ' '); 
```

# package - Puppet 中基于安装的软件包版本的决定

> ID：14821465
> 
> 赞同：1
> 
> 时间：2013-02-11T21:47:59.533
> 
> 标签：package, version, erb, puppet

我想在 Puppet .erb 文件中做这样的事情：

```
<% if (version_of_apache_package_installed =~ /1.5.82/) then -%>
do one thing
<% else -%>
do a different thing 
<% end -%> 
```

如何将某些已安装包的版本字符串放入变量`version_of_apache_package_installed`中，以便进行上述工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T23:14:10.383

你[在 puppet 中管理那个 apache 包资源](http://docs.puppetlabs.com/references/latest/type.html#package)吗？如果是这样，您可以指定要安装的版本，因此您只需从包资源和此 if/else 块中的相同版本变量中读取。

在您的一个初始化文件中...

```
$package_version = '1.0' 
```

在节点...

```
package { 'your_package':
  ensure => $package_version,
} 
```

这是在 puppet 中思考的正确方式，“让这台机器成为我所期望的”而不是“我需要处理这台机器是什么”。

您可以使用 exec 来处理条件而不管理资源，但这根本不理想。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-21T17:49:07.700

Puppet 是一种声明性语言，可确保某些资源（在本例中为包）处于所需状态。在每个受支持的平台上，可能有不同的包管理器遵循各种约定。最终，当包状态发生变化时，可以执行一些代码，例如：

```
<!-- language: puppet -->
package { "apache2":
  ensure => installed,
  notify => Exec['apache-updated']
}

exec { 'apache-updated'
  command => "/usr/bin/execute_some_script",
  refreshonly => true,
} 
```

[根据文档](https://puppet.com/docs/puppet/5.5/types/package.html#package-attribute-ensure)，属性有几个特殊值`ensure`：

*   `installed`
*   `absent`
*   特定版本，包括补丁版本，例如`3.4.12-2`或`1:9.10.3.dfsg.P4-12.3+deb9u5`
*   等等

您可以使用以下命令从 CLI 获取当前已安装软件包的列表：

```
puppet resource package 
```

这背后的动机主要是性能。检查包版本比较快，而执行自定义脚本会延长`puppet agent`运行时间。

根据包版本做出决策的最佳方法是在某些模块中创建自定义事实`lib/facter/apache_version.rb`：

```
<!-- language: ruby -->
Facter.add(:apache_version) do
  setcode do
    if Facter::Util::Resolution.which('apache2')
      Facter::Util::Resolution.exec('apache2 -v | head -n 1 | awk  '{ print $3}' | cut -d "/" -f 2')
    end
  end
end 
```

这样，应该为所有受支持的操作系统处理版本控制细节。然后你可以在你的代码中写：

```
 <!-- language: puppet -->
  case $::apache_version {
    undef: {
      # during first run the version will be undefined, as the package is hasn't been installed yet
    }
    /^2/: {
      # TODO
    }
    default: {
      # TODO
    }
  } 
```

如果您需要比较版本，请使用[stdlib 的](https://forge.puppet.com/puppetlabs/stdlib)功能`versioncmp`：

```
if versioncmp($::apache_version, '2.0.0') < 0 {
    fail("foobar requires Apache 2.0 or greater, found: \'${::apache_version}\'")
} 
```

# c - C 代码翻译成 MIPS

> ID：14821468
> 
> 赞同：2
> 
> 时间：2013-02-11T21:48:19.163
> 
> 标签：c, assembly, mips

如何将以下代码翻译成 MIPS 汇编语言？

```
# include < stdio .h >
int fibRecursive ( int n )
{
   int answer ;
   if ( n < 2 ) {
   answer = n ;
   }
   else {
     answer = fibRecursive ( n - 1 ) + fibRecursive ( n - 2 ) ;
   }
   return answer ;
}

int main ( int argc , char * argv [] )
{
   int input = 10;
   int result = fibRecursive ( input ) ;
   printf ( " The %d - th Fibonacci number is % d .\ n " , input , result ) ;
   return 0;
} 
```

谢谢你的帮助。我的线路有问题：

```
answer = fibRecursive ( n - 1 ) + fibRecursive ( n - 2 ) ; 
```

这是我到目前为止的 MIPS：

```
fibRecursive:
addi $sp, $sp, -4
sw $ra, 0($sp)
addi $s0, $zero, 0
slti $t0, $a0, 2
beq $t0, $zero, ELSE
add $s0, $a0, $zero
j EXIT

ELSE:
addi $sp, $sp, -4
sw $a0, 0($sp)
addi $a0, $a0, -1
jal fibRecursive

EXIT:
add $v0, $zero, $s0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:52:35.650

我会运行一个带有标志的编译器（如 GCC）来发出汇编代码。（例如，对于 GCC，您可以使用[-S](http://gcc.gnu.org/onlinedocs/gcc/Overall-Options.html#index-S-80)选项）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:56:20.633

```
 // Swapped to MIPs syntax :)
main:
  jal function
  ...

function:
  // if code here
  // return value here
  jal function
  // gather answer into reg.
  jal function
  // add away
  // return value here
  ... 
```

在那里，您现在看到了如何在 main 中调用递归函数两次。清理终端案例留给用户作为练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:10:16.103

编译到 MIPS 我得到这个 .file 1 "c2mips.c"

```
 # -G value = 8, Cpu = 3000, ISA = 1
 # GNU C version cygnus-2.7.2-970404 (mips-mips-ecoff) compiled by GNU C version cygnus-2.7.2-970404.
 # options passed:  -msoft-float
 # options enabled:  -fpeephole -ffunction-cse -fkeep-static-consts
 # -fpcc-struct-return -fcommon -fverbose-asm -fgnu-linker -msoft-float
 # -meb -mcpu=3000

gcc2_compiled.:
__gnu_compiled_c:
    .text
    .align  2
    .globl  fibRecursive
    .ent    fibRecursive
fibRecursive:
    .frame  $fp,40,$31      # vars= 8, regs= 3/0, args= 16, extra= 0
    .mask   0xc0010000,-8
    .fmask  0x00000000,0
    subu    $sp,$sp,40
    sw  $31,32($sp)
    sw  $fp,28($sp)
    sw  $16,24($sp)
    move    $fp,$sp
    sw  $4,40($fp)
    lw  $2,40($fp)
    slt $3,$2,2
    beq $3,$0,$L2
    lw  $2,40($fp)
    sw  $2,16($fp)
    j   $L3
$L2:
    lw  $3,40($fp)
    addu    $2,$3,-1
    move    $4,$2
    jal fibRecursive
    move    $16,$2
    lw  $3,40($fp)
    addu    $2,$3,-2
    move    $4,$2
    jal fibRecursive
    addu    $3,$16,$2
    sw  $3,16($fp)
$L3:
    lw  $3,16($fp)
    move    $2,$3
    j   $L1
$L1:
    move    $sp,$fp         # sp not trusted here
    lw  $31,32($sp)
    lw  $fp,28($sp)
    lw  $16,24($sp)
    addu    $sp,$sp,40
    j   $31
    .end    fibRecursive
    .rdata
    .align  2
$LC0:
    .ascii  " The %d - th Fibonacci number is % d . n \000"
    .text
    .align  2
    .globl  main
    .ent    main
main:
    .frame  $fp,32,$31      # vars= 8, regs= 2/0, args= 16, extra= 0
    .mask   0xc0000000,-4
    .fmask  0x00000000,0
    subu    $sp,$sp,32
    sw  $31,28($sp)
    sw  $fp,24($sp)
    move    $fp,$sp
    sw  $4,32($fp)
    sw  $5,36($fp)
    jal __main
    li  $2,10           # 0x0000000a
    sw  $2,16($fp)
    lw  $4,16($fp)
    jal fibRecursive
    sw  $2,20($fp)
    la  $4,$LC0
    lw  $5,16($fp)
    lw  $6,20($fp)
    jal printf
    move    $2,$0
    j   $L4
$L4:
    move    $sp,$fp         # sp not trusted here
    lw  $31,28($sp)
    lw  $fp,24($sp)
    addu    $sp,$sp,32
    j   $31
    .end    main 
```

# javascript - JavaScript 基础算术

> ID：14821469
> 
> 赞同：0
> 
> 时间：2013-02-11T21:48:23.107
> 
> 标签：javascript

我正在尝试做一个简单的 JavaScript 算术。
用户输入值，算术完成，然后插入“h4”

```
<h4 id="sum1"><h4>
<h4 id="sum2"></h4>
<h4 id="sum3"></h4>
<h4 id="sum4"></h4>

<form name="arithmetic" method="post">
    <fieldset><legend>Enter a Number Here!</legend>
    <label>First Number Here</label>
    <input type="text" name="inPutN1" />
    <br/>
    <label>Second Number Here</label>
    <input type="text" name="inPutN2" />
    <br/>
    <input type="submit" value="enter" onClick="solve(inPutN1,inPutN2)" />
    <input type="reset" value="clear"/>
    </fieldset>
<script> 
    function solve(sum1,sum2,sum3,sum4) {
        var operand1 = parseInt(arithmetic.inPutN1.value); 
        var operand2 = parseInt(arithmetic.inPutN2.value); 
        var sum1= operand1 + operand2; 
            document.getElementById("sum1").innerHTML=sum1;
        var sum2= operand1 - operand2;
            document.getElementById("sum2").innerHTML=sum2;
        var sum3= operand1 * operand2;
            document.getElementById("sum3").innerHTML=sum3;
        var sum4= operand1 / operand2;
            document.getElementById("sum4").innerHTML=sum4;
        }

   </script> 
```

任何帮助将不胜感激为什么这不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:51:46.993

尝试关闭您打开的表单标签。现在它从未关闭过，这可能会破坏逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:57:32.267

您可以尝试使用组件的名称来工作

```
var operand1 = parseInt(document.arithmetic.inPutN1.value); 
var operand2 = parseInt(document.arithmetic.inPutN2.value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:02:01.107

有一个问题，因为您正在使用提交按钮，并且在调用该函数时，提交事件重新加载页面......这有效

```
<h4 id="sum1"><h4>
<h4 id="sum2"></h4>
<h4 id="sum3"></h4>
<h4 id="sum4"></h4>

<form name="arithmetic" method="post">
    <fieldset><legend>Enter a Number Here!</legend>
    <label>First Number Here</label>
    <input type="text" name="inPutN1" />
    <br/>
    <label>Second Number Here</label>
    <input type="text" name="inPutN2" />
    <br/>
    <input type="button" value="enter" onClick="solve(inPutN1,inPutN2)" />
    <input type="reset" value="clear"/>
    </fieldset>
</form>
<script> 
    function solve() {
        var operand1 = parseInt(arithmetic.inPutN1.value); 
        var operand2 = parseInt(arithmetic.inPutN2.value); 
        var sum1= operand1 + operand2; 
            document.getElementById("sum1").innerHTML=sum1;
        var sum2= operand1 - operand2;
            document.getElementById("sum2").innerHTML=sum2;
        var sum3= operand1 * operand2;
            document.getElementById("sum3").innerHTML=sum3;
        var sum4= operand1 / operand2;
            document.getElementById("sum4").innerHTML=sum4;
        }
   </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T22:02:24.407

将您的输入按钮输入类型从“提交”更改为“按钮”。

```
<input type="button" value="enter" onClick="solve(inPutN1,inPutN2)" /> 
```

您无需提交表单即可运行 javascript 代码。

# forms - MS Access VBA以单独的形式从列表框中填充文本框

> ID：14821475
> 
> 赞同：0
> 
> 时间：2013-02-11T21:48:44.330
> 
> 标签：forms, vba, ms-access, listbox

我有一个主表单，当您单击一个按钮时，它会打开另一个表单，其中包含列表框中的值。我想要的是单击其中一个值并让该值以另一种形式填充文本框。

我尝试了几种不同的方法，这就是我目前正在尝试开始工作的方法。

在主窗体中：

```
Private Sub txtFindInvoice_AfterUpdate()
    If IsNull(Me.OpenArgs) = False Then
        txtFindInvoice = strSelectedInvoice
    End If
End Sub 
```

在第二种形式中：

```
Private Sub lstInvoices_Click()
    DoCmd.OpenForm "SummaryByInvoice1", acNormal, , , , , lstInvoices.Value
    Forms!SummaryByInvoice1.Refresh
    DoCmd.Close acForm, "frmSearchByMonth"
End Sub 
```

主窗体是“SummaryByInvoice1”，打开的窗体是“frmSearchByMonth”。文本框是 txtFindInvoice，列表框是 lstInvoices。

我认为，归根结底是，即使我在 SummaryByInvoice1 的代码中引用了我在此处设置的 OpenArgs 值，表单实际上并没有被重新打开，因此 OpenArgs 仍然被读取为空白。

我尝试在打开 frmSearchByMonth 时关闭 SummaryByInvoice1，这解决了问题。然而，这不是一个可行的选择，因为 frmSearchByMonth 从大量数据中提取并且加载速度有点慢。因此，我不能有几秒钟的空白屏幕。如果有办法将关闭延迟几秒钟，那可能会奏效。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:01:31.757

我尝试了很多在表单之间移动数据的方法。openargs 的问题太多了。

当我在表单之间使用信息来提取调用表单名称时，我发现它要容易得多。然后我就可以访问呼叫表格上的几乎所有信息。如果需要更新组合框或列表框、更改文本、重新查询等，我还可以将数据推送回调用表单。

```
Private Sub Form_Load()

    Set frmPrevious = Screen.ActiveForm

    Me.tbText.value = frmPrevious.cbPassTest.value

End Sub 
```

将该代码放入您正在调用的表单的 LOAD() 中，然后您就可以提取您需要的内容。

# ruby-on-rails - 是否可以使用 Rails 生成器将新列添加到现有表的任意位置？

> ID：14821476
> 
> 赞同：1
> 
> 时间：2013-02-11T21:48:45.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3

让我们考虑一下我决定使用 Rails`isbn`向已经存在的表添加一列的情况：`Book`

```
Book name:string (and implicitly, created_at:date, updated_at:date) 
```

据我所见，只要我们对要添加的列将最后出现这一事实感到满意，这是一项容易的任务。但是，例如，如果我更愿意在 之后拥有它`name`怎么办？尽管从 Rails 的角度来看这几乎完全无关紧要，但我还是很好奇，因为我有时会用其他工具直接查看数据库。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:59:55.367

您可以使用以下`after`选项通过 Rails 迁移来做到这一点：

```
add_column :books, :isbn, :string, :after => :name 
```

您也可以说`:first => true`将新列作为第一列插入。

# html - 将 HTML5 视频渲染到 Canvas 会挤压图像

> ID：14821481
> 
> 赞同：4
> 
> 时间：2013-02-11T21:49:02.623
> 
> 标签：html, canvas, getusermedia

我正在尝试使用 getUserMedia 从用户的网络摄像头拍摄照片。

来自摄像头的图像为 640x480（可能是任何尺寸，具体取决于用户的网络摄像头）。

我有一个视频标签，大小为 320x240，带有 css，我将网络摄像头图像渲染到它上面，如下所示：

```
var $video = $('video');
navigator.getUserMedia({ video: true }, function (stream) {
    $video[0].mozSrcObject = stream;
    $video[0].play();
    localMediaStream = stream;
}, function () {
    console.log('sadtrombone.com');
}); 
```

这工作正常。

然后，我像这样拍照/静止帧：

```
var ctx = $canvas[0].getContext('2d');
ctx.drawImage($video[0], 0, 0, $canvas[0].width, $canvas[0].height); 
```

这会将图像绘制到画布上，但看起来有点模糊：/

那么，如果我这样做：

```
$('img).attr('src', $canvas[0].toDataURL('image/png')); 
```

这会将画布渲染为图像元素，但图像被压扁，它的 300x150 ：/

`$canvas[0].width == 300`和`$canvas[0].height == 150`

这是怎么回事？

**更新：**有趣/奇怪 - 如果我这样做：

```
ctx.drawImage($video[0], 0, 0, 320, 240); 
```

我最终还是得到了 300x150 的图像，但它被裁剪了。虽然从源头看它确实是正确的纵横比

**更新 2：**甚至陌生人，如果我这样做：

```
ctx.drawImage($video[0], 0, 0, 640, 480); 
```

我仍然得到一个 300x150 的图像，但它是图像的左上角 :'(

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T22:01:43.140

似乎用 css 调整画布大小是不够的。你所要做的：

```
canvas.width = 320;
canvas.height = 240; 
```

然后

```
ctx.drawImage($video[0], 0, 0, 320, 240); 
```

工作正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T15:08:42.700

画布的高度和宽度可以与视频的高度和宽度一起设置。

```
$canvas[0].height = $video[0].videoHeight;
$canvas[0].width = $video[0].videoWidth; 
```

# angularjs - 如何让我的 ngResource 接受自定义标头？

> ID：14821482
> 
> 赞同：5
> 
> 时间：2013-02-11T21:49:07.837
> 
> 标签：angularjs

我在咖啡脚本中的代码：

```
 resource = $resource GlobalService.apiRoot + "stuffs", {},
    get:
      method: "GET"
      headers:
        "Accept": "application/stuffs;version=3"
        "Authorization": 'Token token="' + $.cookie('token') + '"' 
```

我在 javascript 中的代码：

```
var resource;

resource = $resource(GlobalService.apiRoot + "stuffs", {}, {
  get: {
    method: "GET",
    headers: {
      "Accept": "application/stuffs;version=3",
      "Authorization": 'Token token="' + $.cookie('token') + '"'
    }
  }
}); 
```

然后当我做..

```
resource.get -> 
```

它不会发送那些指定的标头，并且实际上使 CORS 授权失败。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T22:04:13.510

看起来该标头设置仅在 Angular 的最新“不稳定”版本中可用。如果您使用它，请务必将 angular.js 和 angular.resource.js 都升级到 1.1.2（当前不稳定版本）。

*   [http://code.angularjs.org/1.1.2/angular.js](http://code.angularjs.org/1.1.2/angular.js)
*   [http://code.angularjs.org/1.1.2/angular-resource.js](http://code.angularjs.org/1.1.2/angular-resource.js)

# emacs - emacs 方案球拍自动重新加载文件

> ID：14821483
> 
> 赞同：4
> 
> 时间：2013-02-11T21:49:11.463
> 
> 标签：emacs, scheme, racket, reload

我是计划的新手，但能够让它在 emacs 中运行。我喜欢在 emacs 的一个缓冲区中打开文件，并在另一个缓冲区中打开球拍解释器，这样我就可以在编写时进行测试等。问题是每次我想测试某些东西时，我都必须保存文件（没什么大不了的），然后使用（输入！“程序名”）在解释器中重新加载它。

反正每次我保存文件时都会自动重新加载吗？每次更改某些内容时都必须手动重新加载文件真的很乏味，特别是因为我仍在学习方案，所以我必须来回进行大量更改。非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:30:53.153

最有用的选项可能是[Geiser](http://geiser.nongnu.org)。

除了其他出色的功能外，它还允许您通过击键编译当前文件，或仅评估当前的定义。我认为它有据可查，并且是您可以获得的最接近 SLIME for Scheme 的文件。

如果你可以不用 Emacs，DrRacket 也是一个很好的工作环境。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T16:05:23.550

Geiser 和/或 Quack 是 Emacs 非常好的模式。使用 DrRacket 也是一个不错的选择。

但要更从字面上回答您的问题：

您可以添加以下内容`.emacs`并将其绑定到 F5 键，以获得 DrRacket 的*运行*命令的粗略近似：

```
(defun run-roughly-like-dr-racket ()
  (interactive)
  (let ((w (selected-window)))
    (set-buffer-modified-p t)           ;force save buffer so that enter! ...
    (save-buffer)                       ;...will re-evaluate

    (other-window -1)
    (run-scheme)
    (select-window w)

    (comint-send-string (get-buffer-process "*scheme*")
                        (format "(enter! \"%s\")\n" (buffer-file-name)))

    (pop-to-buffer (get-buffer-process "*scheme*") t)
    (select-window w))) 
```

# sql - 执行 SQL 脚本

> ID：14821484
> 
> 赞同：0
> 
> 时间：2013-02-11T21:49:19.723
> 
> 标签：sql, plsql, oracle11g

当我跑步时

```
SQL>execute deactivate_user 
```

我收到错误：

```
SQL> exec deactivate_user
BEGIN deactivate_user; END;

  * 
```

第 1 行出现错误：ORA-06550：第 1 行，第 7 列：PLS-00306：调用“DEACTIVATE_USER”时参数的数量或类型错误 ORA-06550：第 1 行，第 7 列：PL/SQL：语句被忽略

这是我的代码：

```
create or replace procedure deactivate_user 
(
p_username varchar2
)
as
l_username varchar2(30):=upper(p_username);
cnmd varchar2(50);
begin
    for rec in (select privilege, admin_option from dba_sys_privs
            where grantee =l_username) loop
            cnmd := 'REVOKE '||rec.privilege||' from '||l_username;
execute immediate cnmd;
end loop;
end;
/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:52:07.273

```
create or replace procedure deactivate_user 
(
p_username varchar2
) 
```

您的程序需要输入（没有默认值，因此必须提供输入）。

```
SQL> exec deactivate_user 
```

您需要传入您尝试停用的用户 ID。就像是。

```
SQL> exec deactivate_user('USER1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:10:50.450

此外：

```
create or replace procedure deactivate_user 
(
 p_username varchar2 DEFAULT 'USER1'
)
.... 
```

然后您不需要输入 p_username 的值。但默认情况下，您的过程将始终为 'USER1' 执行，除非您像 Rajesh 的示例中那样更改参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T03:48:33.660

是的，您需要在根据您的代码调用存储过程时传递参数。

如下：

```
exec deactivate_user('USERname1'); 
```

但是，如果您不想传递任何输入值，则在调用 sp 时设置参数默认参数，那么它将采用自动默认值。

如下

```
create or replace procedure deactivate_user 
(
 p_username varchar2 DEFAULT 'USERname1'
) 
```

.... 那么您不需要输入 p_username 的值。但默认情况下，除非您更改参数值，否则您的过程将始终为 'USERname1' 执行。

然后您将调用上述过程，例如：

```
exec deactivate_user; 
```

# kinect - Kinect - SkeletonPoint 的 Z 轴方向是什么

> ID：14821492
> 
> 赞同：1
> 
> 时间：2013-02-11T21:49:42.250
> 
> 标签：kinect

关于 a 的 Z 轴，我有一个非常简单的问题`SkeletonPoint`。Z 值是到传感器的直接距离（图像中的左侧 Z？）还是到传感器基线的距离（图像中的右侧 Z？）。

谢谢！

![](../Images/873924d49c08a1bcd47f559b6a7ff54b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:16:33.090

`Z`是到 Kinect 基线的距离（你的右边`Z`）。如果你可以沿着你的`X`轴跟随左/右路径而不增加或减少与 Kinect 的距离，那么`Z`将保持不变。

[坐标系是3 维](http://en.wikipedia.org/wiki/Cartesian_coordinate_system)的标准笛卡尔坐标系。

# algorithm - 自选团队

> ID：14821495
> 
> 赞同：8
> 
> 时间：2013-02-11T21:49:56.230
> 
> 标签：algorithm, combinations, genetic-algorithm, mathematical-optimization

一个由 100 名成员组成的团队将从 1000 名申请人中组成。每位申请者都可以选择他/她希望作为队友的其他 99 名申请者。

每个可能的团队都会获得一个分数，衡量它满足其成员的队友偏好的程度。如果 Lisa 在一个团队中，并且 Lisas 愿望清单上的 11 人也在团队中，则该团队为 Lisa 获得 11 分。所有成员的积分相加。任何可能的团队可以获得的理论最大值是 99*100。最小值为 0。

现在我们要找到得分最高的球队。试图通过计算每个可能组合的分数（≈10^140）来暴力破解这个问题不是一种选择。

是否有一种聪明的算法可以捷径获得最佳答案，还是必须满足于找到一个好答案的算法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T05:27:48.980

我认为，如果你能有效地解决这个问题，你可以有效地解决[http://en.wikipedia.org/wiki/Clique_problem](http://en.wikipedia.org/wiki/Clique_problem) - 两个节点之间有一个链接，将每个节点放在另一个节点的列表中一起工作。看这篇文章，我想你会发现即使是保证好的近似值也很难找到，除非你的问题有一些特殊的结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T22:36:11.033

您可以尝试[爬山](http://en.wikipedia.org/wiki/Hill_climbing_algorithm)算法。从“受欢迎”的成员（最常被其他成员挑选）开始，然后逐步添加增加团队得分最多的新成员。不幸的是，这不能保证找到最佳解决方案，但它可能会找到好的解决方案。要改进您的解决方案，您可以尝试[模拟退火](http://en.wikipedia.org/wiki/Simulated_annealing)。

# mercurial - 在 Mercurial 中，如何检查分支具有的文件版本？

> ID：14821496
> 
> 赞同：0
> 
> 时间：2013-02-11T21:50:00.083
> 
> 标签：mercurial

我只对单个文件的历史感兴趣。我已经尝试过 hg log，它显示了对文件所做的所有更改。但是，如果有一个由整个存储库组成的分支，我如何从日志中知道（在该分支中签出整个存储库，然后查看文件并手动比较头部中的不同签入）哪个版本该分支得到的文件（即在头部的哪一点）？

（我也试过谷歌搜索无济于事。也许我没有使用正确的搜索词，因为我是 Mercurial 的新手。我希望我已经清楚地解释了我的目标。）

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:02:59.413

您正在以“svn”（或 CSV）术语思考。您的问题在 Mercurial（或 git）的上下文中没有意义。单个文件在这些 DVCS 中都没有版本。版本称为修订版，并且是存储库范围内的。您不能像在 svn 中那样“签出”一个文件的修订 X 和另一个文件的修订 Y。

因此，与您类似的问题可能是“最近在分支 Y 中更改文件 X 的修订版本”，而获得该答案的一种方法是：

```
hg log -r 'ancestors(Y)' X 
```

或者

```
hg log -r 'ancestors(default)' TODO 
```

有一些具体的价值观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:15:37.293

您可以使用以下`glog`命令：

```
$ hg glog foo.py 
```

请注意，您需要`graphlog`通过添加`hgext.graphlog =`到`[extensions]`您的标题来启用扩展`~/.hgrc`：

```
$ cat ~/.hgrc
[extensions]
hgext.graphlog =
…
$ 
```

确定何时采用分支的一种简单的手动方法是运行：

```
$ hg glog 
```

然后搜索文件名并查看它更改了哪些变更集。

或者，您可以运行：

```
hg log -r 'ancestors(mybranch)' myfile 
```

要向您显示 mybranch 中和之前的所有变更集，其中包含对 的更改`myfile`，然后查找在执行分支之前修改文件的最后一个变更集：

```
$ hg log -r '祖先（mybranch）' 我的文件
变更集：30:3b2f7243c1ac
用户：David Wolever <david@wolever.net>
日期：2010 年 11 月 15 日星期一 09:47:46 -0500
文件：我的文件
描述：
做事

变更集：31:804257c328ab <-- 分支之前对文件的最后一次更改
用户：David Wolever <david@wolever.net>
日期：2010 年 11 月 18 日星期四 21:44:11 -0500
文件：我的文件
描述：
改变事物

变更集：32:df26ccd32c38 <-- 对分支中的文件进行了更改
分支：我的分支
用户：David Wolever <david@wolever.net>
日期：2010 年 11 月 18 日星期四 23:23:44 -0500
文件：我的文件另一个文件
描述：
启动我的分支

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:16:56.497

不确定这是否是您想要的，但您可以列出包含特定文件名的所有修订版

```
hg log -r "contains(filename)" 
```

或者

```
hg glog -r "contains(filename)" 
```

如果您想要更具体的内容，请查看`hg help revsets`输出，其中显示了该`-r`选项的可能性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T05:54:55.190

对于 Ry4an 的任务 revset for log 文本必须是

```
"max(branch(Y) & contains(X))" 
```

# authentication - ADFS 是否公开了我可以调用的 Web 服务？

> ID：14821497
> 
> 赞同：0
> 
> 时间：2013-02-11T21:50:00.480
> 
> 标签：authentication, adfs

我让 ADFS 与 Dominick Baier 的 IdentityServer 一起工作。但是我想知道是否可以使用 ADFS 对其他 Active Directory 进行身份验证。

例如：公司 1 托管 ADFS1 - 我希望此 ADFS 针对另一个 Active Directory 域对一个人进行身份验证。是否可以修改 ADFS1 的 FormsLogin 页面以与在 ADFS1 中设置为 ClaimsProvider 的另一个 ADFS 实例对话（针对用户进行身份验证）？

希望这是有道理的。如果没有，请告诉我，我会解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:56:28.960

不确定我是否完全理解，但是：

ADFS 的每个实例都可以针对单个 AD 实例进行身份验证。如果您有两个 AD 到两个域中，请在每个域中安装一个 ADFS 实例并将它们联合起来。将询问用户（通过 Home Realm Discovery）他们希望针对哪个 AD 实例进行身份验证。

# iphone - iOS - 在视图控制器之间共享代码

> ID：14821498
> 
> 赞同：1
> 
> 时间：2013-02-11T21:50:00.440
> 
> 标签：iphone, refactoring, uitabbarcontroller, viewcontroller

我有两个视图控制器 - a`UIViewController`和`UITableViewController`.

而且它们都需要相同的代码`barButtonItems`- 完成按钮和设置按钮。我认为方法选择器和 in 具有相同的代码`viewDidLoad`很难看，但是我想不出任何其他方法可以`barButtonItems`使两个控制器具有相同的代码。

共享代码如下所示：

```
- (void)dismissViewController { [self.navigationController dismissViewControllerAnimated:YES completion:nil]; }
- (void)done:(UIBarButtonItem *)sender { [self dismissViewController]; }
- (void)settings:(UIBarButtonItem *)sender { [self performSegueWithIdentifier:SETTINGS_SEGUE sender:sender]; }

- (void)viewDidLoad {
   [super viewDidLoad];

   if (self.navigationController.viewControllers.count == 1)
     self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Settings" style:UIBarButtonItemStyleBordered target:self action:@selector(settings:)];
   self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(done:)];
} 
```

在架构上，我的代码是这样的：

```
UITabBarController -view controllers->
    UINavigationController -root view controller-> UIViewController
    UINavigationController -root view controller-> UITableViewController 
```

那么，有没有办法在`UIViewController`和之间共享代码`UITableViewController`？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:57:11.723

如果你真的想要，你可以创建一个静态方法*initNavigationBar*在其中传入`navigationItem`.

```
+ (void ) initNavigationBar: (UiNavigationItem *) navigationItem 
{
      navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc]
         initWithTitle:@"Settings" style:UIBarButtonItemStyleBordered 
         target:selfaction:@selector(settings:)];

      navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] 

} 
```

但是，如果这有意义，请三思。

# html - 搜索按钮固定不动

> ID：14821502
> 
> 赞同：0
> 
> 时间：2013-02-11T21:50:15.297
> 
> 标签：html, css, css-float, html5-canvas

移动搜索文本按钮和搜索按钮，我给了左边距....但是当我调整浏览器窗口的大小时，搜索按钮保持静止....如何使其相对于标题和 wist....搜索输入框和选择菜单应该在屏幕的右端

[http://jsfiddle.net/nb6WP/1/](http://jsfiddle.net/nb6WP/1/)

Bom 创建表格

```
 <select>
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
    <option value="opel">Opel</option>
    <option value="audi">Audi</option>
  </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:02:54.167

给出`margin -left`百分比`10%`值而不是像素`20px`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:10:48.460

尝试使用`float: right;`它应该将元素一直发送到右侧并在调整大小时正确定位。还要注意搜索按钮顺序的变化。

```
<input name="Finish" value="Search" class="checkout-button searchButton" type="submit" style="width: 107px;padding-left: 0px;padding-right: 0px; background-color: #666; float: right;">
<input class="span2" type="password" style="float: right;">

      <select  style="float: right;">
        <option value="volvo">Volvo</option>
        <option value="saab">Saab</option>
        <option value="opel">Opel</option>
        <option value="audi">Audi</option>
      </select> 
```

# c# - 仍然无法在 silverlight for windows phone 中使用附加属性

> ID：14821505
> 
> 赞同：1
> 
> 时间：2013-02-11T21:50:30.530
> 
> 标签：c#, silverlight, properties

我是一个在 javascript 方面具有基本经验的菜鸟，但我真的很想学习 c#net 编程来制作手机应用程序。我正在尝试做的应用程序需要我能够在某些 xaml 元素上设置自定义属性。

我在 stackoverflow 上发现了一个简单的例子（[将自定义属性添加到 XAML 中的元素？](https://stackoverflow.com/questions/5782864/adding-custom-attributes-to-an-element-in-xaml)）并且没有得到它的工作。然后，我到处阅读了大量文档，感到比以往任何时候都更加困惑......我认为我的概念是正确的，但我的实现不是。例如，如果我只是从我提到的页面复制代码，我会得到：

主页.xaml

```
<phone:PhoneApplicationPage 
x:Class="PhoneApp1.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:local="clr-namespace:MyNamespace" //<--ADDED BY ME
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"

shell:SystemTray.IsVisible="True">

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0"></Grid>
</Grid>
</phone:PhoneApplicationPage> 
```

主页.xaml.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;

namespace PhoneApp1
{
public partial class MainPage : PhoneApplicationPage
{

    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }
 }
namespace MyNamespace
{
    public static class MyClass
    {

        public static readonly DependencyProperty MyPropertyProperty = DependencyProperty.RegisterAttached("MyProperty",
            typeof(string), typeof(MyClass), new FrameworkPropertyMetadata(null));

        public static string GetMyProperty(UIElement element)
        {
            if (element == null)
                throw new ArgumentNullException("element");
            return (string)element.GetValue(MyPropertyProperty);
        }
        public static void SetMyProperty(UIElement element, string value)
        {
            if (element == null)
                throw new ArgumentNullException("element");
            element.SetValue(MyPropertyProperty, value);
        }
    }
}
} 
```

从那里，我无法添加任何视觉元素，因为我有这个错误：

错误 1 ​​找不到类型或命名空间名称“FrameworkPropertyMetadata”（您是否缺少 using 指令或程序集引用？）

现在，如果此代码有效，据我了解，附加属性将仅对我的类的 objetc 可用...您如何绑定 xaml 元素和 ac#class？

如果您看到我想去的地方，您所拥有的任何信息将不胜感激。我已经花了几个小时在这个小细节上......

提前谢谢了！！！！！！！！！！！！！（是的，我是一个菜鸟......我有一些订购的 c#books 即将推出，我检查了许多网站但仍然需要指导......再次感谢）

***编辑：跟进：给我的建议有效，让我编译但是：***

xmlns:local="clr-namespace:MyNamespace" 给了我这个错误：

未定义的 CLR 命名空间。“clr-namespace” URI 指的是程序集中未包含的命名空间“MyNamespace”。我需要那条线吗？

从那里我不能添加任何其他元素。如果我确实删除了那条线，并添加了一个椭圆，例如，我不能给它一个 MyProperty，VS 告诉我：

在椭圆类型中找不到 Property'MyProperty'。

我了解我为 MyClass 注册了“MyProperty”。那么，我如何给 Ellipse 一个“MyClass”类？我应该采取另一种方法吗？我可以在任何我想要的东西上使用“MyProperty”吗？任何提示高度赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:19:39.223

在大多数情况下，一切看起来都很好。您只需要更改`FrameworkPropertyMetadata`为`PropertyMetadata`，代码应该可以正常编译。

**更新：** XAML 命名空间实际上是错误的。您已经在 PhoneApp1 命名空间内定义了 MyNamespace。因此完整的命名空间是 PhoneApp1.MyNamespace

```
xmlns:local="clr-namespace:PhoneApp1.MyNamespace" 
```

[本文详细介绍了 Silverlight 中的 xaml 命名空间](http://msdn.microsoft.com/en-us/library/cc189061%28v=vs.95%29.aspx)

对命名空间进行排序后，应用附加属性就足够简单了。实际上，您已经使用了附加属性

> 外壳：SystemTray.IsVisible="True"

您的附加属性将像这样应用：

```
<Grid local:MyClass.MyProperty="Value" /> 
```

[这篇关于附加属性的文章应该会有所帮助](http://www.silverlightshow.net/items/Attached-Properties-in-Silverlight.aspx)

# javascript - codemirror 在单行上渲染代码

> ID：14821511
> 
> 赞同：5
> 
> 时间：2013-02-11T21:50:41.330
> 
> 标签：javascript, jquery, internet-explorer, codemirror

## [http://fiddle.jshell.net/tLth8/6/show/](http://fiddle.jshell.net/tLth8/6/show/)

在 IE <9 中，代码被突出显示，但新行被忽略，代码都在一行中，如下所示 ![代码在 ie<9 中是如何呈现的](../Images/3eb885d84e8705c412e6154bcce4359b.png)

我怎样才能像下面的源代码一样正确渲染线条

![代码应该如何呈现，（谷歌浏览器）](../Images/1b58968170fd82b508c78f54ae8ed3eb.png)

我试过改变css所以行`display:block;`但是没有区别

我试过的

```
.CodeMirror pre {
    display:block;
}
.CodeMirror-lines div{
    display:block;
} 
```

## jQuery 源代码：

```
$("span.code, div.code").each(function () {

    var $this = $(this),
        isdiv = $this.is("div"),
        $code = (isdiv) ? $this.html().replace(/^(\r\n)|(\n)/, ''):$this.html(),
        $unescaped = (isdiv) ? $('<div/>').html($code).text() : $('<span/>').html($code).text();

    $this.empty();
    if (isdiv) {
        $this.css({
            "display": "block"
        });
        $this.after('<div class="clear"/>');
    }

    var editor = CodeMirror(this, {
        value: $unescaped,
        mode: (isdiv) ? "text/html" : "javascript",
        lineNumbers: (isdiv) ? true : false,
        readOnly: false
    });
    if (isdiv) {
        var linecount = editor.lineCount();
        for (j = 0; j < linecount; j++) {
            editor.indentLine(j);

        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:48:04.830

我一直使用 textarea 标签来初始化 codemirror。这就是它在主站点上的完成方式。

刚刚测试它，它在ie8，ie9中工作。

```
var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
             mode: 'htmlmixed', 
             tabMode: "indent"
}); 
```

# ruby - 传入红宝石条件作为参数

> ID：14821514
> 
> 赞同：2
> 
> 时间：2013-02-11T21:50:59.093
> 
> 标签：ruby, sinatra, parameter-passing, datamapper

我需要传递一个带有字段“ `nombre`”作为参数的条件

目前我做：

```
@xcondicion= {:nombre.like => "%#{params[:qyBusqueda]}%"}
clientes= Cliente.all ( @xcondicion ) 
```

虽然这有效，但我需要类似的东西：

```
@xcondicion= { session[:field_selec].like => "%#{params[:qyBusqueda]}%"} 
clientes= Cliente.all ( @xcondicion ) 
```

做这样的工作可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:12:44.487

也许使：

`session[:field_selec].like`
`session[:field_selec].to_sym.like`

# php - Jquery UI不是类内的样式按钮

> ID：14821515
> 
> 赞同：0
> 
> 时间：2013-02-11T21:51:01.330
> 
> 标签：php, jquery, jquery-ui, jquery-ui-button

我正在用 PHP 编写一个站点，并且我编写了一个交换其内容标签的索引页面。当我在按钮中包含 default.php 时，没有设置样式。

Jquery UI 在站点的其他任何地方都可以正常工作，但是按钮和图标不起作用。

这是切换页面的索引代码

```
<?php
    include_once 'config.php';
    session_start();
?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" >

    <title><?php echo $siteName; ?></title>
    <link href="css/themes/<?php echo $theme; ?>" rel="stylesheet" type="text/css"/>
    <link href="<?php echo $jqCSS;?>" rel="stylesheet" type="text/css"/>
    <script src="<?php echo $jsCommon;?>"></script> 
    <script src="<?php echo $jqJS;?>"></script>
    <script src="<?php echo $jqJSUI;?>"></script>

</head>

<body>

<div class="header">
    <?php include 'menu.php';?>
</div>  
<div class="content" id="main_content"><br/><br/>
    <?php 
        $page = $_SESSION['currentpage'];
        echo $page;
        switch ($page)
        {
            case 'messaging':
                include 'controls/shared/messaging/messaging.php';
                break;
            default:
                include 'pages/default.php';
                break;
        }       
    ?>
</div>

<div class="footer">
</div>
<div id="myLogin" title="Login"></div>
<div id="myForgotPass" title="Forgot Password"></div>
<div id="myReg" title="Register"></div> 
```

这是检查后加载的 Default.php

```
<?php 
 session_start();
$_SESSION['currentpage'] = 'default';

?>
<br/><br/>
<h1>Default</h1>

<button id="button">Test Button</button> 
```

这是我用来确定这是一个按钮的javascript：

```
$('#button').button(); 
```

当我查看 firebug 中的代码时，它显示它在内容类下。我可以使用内容类设置按钮的样式，但是我希望它使用来自 jquery ui 的主题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:45:20.707

我想到了。

最大的问题是在调用 jquery 之前调用了我自己的 custom.js 文件，因此在尝试制作按钮时甚至没有加载 jquery。

一旦我这样做了，我就使用了 $('button').button(); 它开始正常工作。

# wpf - 动画工具的关键帧曲线编辑器控件示例？

> ID：14821517
> 
> 赞同：2
> 
> 时间：2013-02-11T21:51:04.450
> 
> 标签：wpf, animation, user-interface, controls, curve

有没有像动画软件中常见的那样在 WPF 中创建一种关键帧曲线编辑器控件的示例？例如，这是 Gamedev Animation Studio 中的一个，右上角的大控件：

![](../Images/3fb5cb138fa6da7e980efa2b8d8cd123.png)

我怀疑那里有任何现成的控件，但也许有一些可用的东西可以用作基础？

# pandas - 处理系列中的检测限

> ID：14821519
> 
> 赞同：1
> 
> 时间：2013-02-11T21:51:06.103
> 
> 标签：pandas

我有一个 Pandas TimeSeries，其值`<0.1`表示检测限：

```
In [1]: type(ts)
Out[1]: pandas.core.series.TimeSeries

In [2]: ts[55:63]
Out[2]: Date
2006-08-07    0.8809099
2006-08-21     1.027876
2007-07-10    0.5982836
2007-07-26          0.8
2007-08-09         <0.1
2007-08-23     1.013378
2008-07-14    0.6568888
2008-07-29    0.6966623
Name: PO4 uM 
```

我一直在尝试：

```
ts.str.contains('<0.1') 
```

但无法弄清楚如何使用它来替换我的数据值。

如何最好地将这些检测限指标替换为 Pandas 可以处理的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:49:53.303

我认为你最好的选择是**在读**入时删除这些特殊值（这样你`dtype`就会是正确的，`float64`）。
要做到这一点[`read_csv`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html)（和大多数类似的功能）有一个`na_values`参数：

> `na_values`: list-like or dict, default None
>     额外的字符串被识别为 NA/NaN。如果 dict 通过，特定的每列 NA 值

*注意：我已经复制`ts[55:63]`并使用`read_clipboard`了（它也接受了这个参数）。*

```
In [1]: pd.read_clipboard(sep='\s+', header=None, na_values='<0.1')
Out[1]: 
            0         1
0  2006-08-07  0.880910
1  2006-08-21  1.027876
2  2007-07-10  0.598284
3  2007-07-26  0.800000
4  2007-08-09       NaN
5  2007-08-23  1.013378
6  2008-07-14  0.656889
7  2008-07-29  0.696662 
```

进入（时间）系列，您可以使用：

```
ts = pd.read_clipboard(sep='\s+', header=None, na_values='<0.1',
                       index_col=['date'], squeeze=True, names=['date', 'P04'],
                       parse_dates=['date'])

In [3]: ts
Out[3]: 
date
2006-08-07    0.880910
2006-08-21    1.027876
2007-07-10    0.598284
2007-07-26    0.800000
2007-08-09         NaN
2007-08-23    1.013378
2008-07-14    0.656889
2008-07-29    0.696662
Name: P04 
```

*这似乎比使用更清洁：*

```
ts[ts.str.contains('<0.1')] = np.nan 
```

# javascript - 如何在 dojo 1.8 中对嵌套的对象数组进行模板化？

> ID：14821521
> 
> 赞同：3
> 
> 时间：2013-02-11T21:51:11.537
> 
> 标签：javascript, templates, dojo

好的，所以我正在尝试使用 Dojo 1.8 构建一些类似于以下内容的东西......

```
<ul class="groups">
  <li class="group">
    <ul class="items">
      <li class="item"></li>
    </ul>
  </li>
</ul> 
```

我为“项目”制作了一个简单的 TemplatedWidget（我们称之为 TypeAItem，但稍后可能会有不同类型的“项目”需要不同的模板。

我有代表组的 JSON，看起来像这样......

```
[{
  name: "groupName",
  items: [{ title: "Item 1", type: "someRandomType", otherStuff: {} }]
}] 
```

**我的问题是我不确定构建这个嵌套列表的最佳方法是什么。**

最初我只是想在 Mustache 中使用某种循环约定，但 Dojo 的模板似乎不支持这种做法。然后，在阅读了[创建自定义小部件](http://dojotoolkit.org/documentation/tutorials/1.8/recipes/custom_widget/)教程后，我只想使用嵌套的 for 循环，就像这样......

```
var groupHTML="<ul class='groups'>"
for (group in groups) {
  groupHTML += "<li class='group'>";
  for (item in groups.items) {
    ??? 
    // I'm assuming something like var item = new TypeAItem(item);
    //  but I the tutorial only uses the .placeAt(domNode) function
    // So I'm not sure how to get this to work.
  }
  groupHTML += "</li>
}
groupHTML += "</ul> 
```

这很容易，如果我需要一些其他类型的项目类型的列表，那么我可以只更改那一行代码，或者更好的是，将其设置为一个函数并传入代表该项目的小部件。

由于我不知道如何让它工作，我开始想我可能需要将组设置到他们自己的小部件中，然后在 postCreate 方法中创建项目。但是，我需要弄清楚如何将 group.items 数组传递给它，以及如何使其足够灵活，以便以后处理不同的项目类型。

如果有人可以提供帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T03:30:23.450

要以编程方式创建 domNode，请使用 dom-construct 中的 create 方法。

在您的小部件中，要求：“ [dojo/dom-construct](http://dojotoolkit.org/reference-guide/1.8/dojo/dom-construct.html#dojo-dom-construct-create) ”作为 domConstruct

```
// create the groups and place it on the page
var groups = domConstruct.create("ul", {'class':'groups'}, this.someAttachPoint, 'last');
 // loop
 var group = domConstruct.create("li", {'class':'group'}, groups, 'last');
  // loop
  var items= domConstruct.create("ul", {'class':'items'}, group , 'last');
   // loop
   var item= domConstruct.create("li", {'class':'item',innerHTML:'item X'}, items, 'last');
   // or instead of innerHTML:  item.textContent = 'Some text'; // (check browser support) 
```

请注意，domConstruct.create 不需要您在创建节点时放置节点，并且“last”是默认设置。您稍后使用[dojo place](http://dojotoolkit.org/reference-guide/1.8/dojo/dom-construct.html#dojo-dom-construct-place)放置它。此外，您可以使用 dojo 的数组功能进行循环，这使您可以发挥创意并使用辅助函数创建这些节点。

根据这些组和项目的不同程度，您可能仍想采用创建子小部件的想法。

另一种方法是使用 dojox dtl 模板，它允许您在模板中混合循环代码。这些模板像 django 模板一样工作（你需要参考 django 文档来弄清楚）

# asp.net-mvc - 在 ASP MVC3 Html.DisplayFor 控件中使用条件

> ID：14821523
> 
> 赞同：1
> 
> 时间：2013-02-11T21:51:16.450
> 
> 标签：asp.net-mvc, string, asp.net-mvc-3, linq, where

有没有办法在 ASP MVC3`@Html.DisplayFor()`控件中使用条件？下面是我尝试的语法。虽然看起来`partner.TradingPartners`可以使用 `.Where<>`，但根据 Visual Studio 我做错了！

这是我使用的语法

```
 @foreach (var item in Model.Agent.SymNumberToAgentId)
        {
            var gogo = ViewBag.Periscope + item.AgentId.Trim();
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.DisplayAgentId)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CompanyCode)
                </td>
                <td>
                    @foreach (var partner in Model.AgentIdDetails)
                    {
                        @Html.DisplayFor(modelItem => partner.TradingPartners.Where(item => item.AgentId == partner.AgentId))
                    }
                </td>
                <td>
                    @Html.ActionLink("Remove", "Delete", "SymetraNumberToAgentId", new { id = item.SymetraNumber, aid=item.AgentId}, null)
                </td>
                <td>
                    <a href=@gogo target="_blank">View in Periscope</a>
                </td>
            </tr>
        } 
```

这是错误消息

> `CS1928: 'System.Collections.Generic.IList<string>' does not contain a definition for 'Where' and the best extension method overload 'System.Linq.Enumerable.Where<TSource>(System.Collections.Generic.IEnumerable<TSource>, System.Func<TSource,bool>)' has some invalid arguments`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:55:01.047

编辑：问题更新后（foreach 中的代码）：

```
 @foreach (var partner in Model.AgentIdDetails)
                    {
                        @Html.DisplayFor(modelItem => partner.TradingPartners.Where(x => x.AgentId == item.AgentId).XYZProperty)
                    } 
```

* * *

您需要在 where 子句中使用正确的语法。此外，您应该为过滤的贸易伙伴指定属性。

```
<td>
    @foreach (var partner in Model.AgentIdDetails)
    {
        @Html.DisplayFor(modelItem => partner.TradingPartners.Where(item => item.AgentId == partner.AgentId).XYZProperty)
    }
</td> 
```

# yii - Yii 框架的 RBAC 基础

> ID：14821528
> 
> 赞同：1
> 
> 时间：2013-02-11T21:51:27.163
> 
> 标签：yii, rbac

我只是像这样设置我的 RBAC 层次结构（使用 CPhpAuthManager）

```
 $auth = Yii::app()->authManager;

                $auth->createOperation('create', 'add new data');
                $auth->createOperation('read', 'read data');
                $auth->createOperation('update', 'update data');
                $auth->createOperation('delete', 'delete data');

                $teammember = $auth->createRole('teammember');
                $teammember->addChild('create');
                $teammember->addChild('read');
                $teammember->addChild('update');
                $teammember->addChild('delete');

                $auth->save(); 
```

并像这样更新我的 LoginForm 模型类：

```
 public function login()
    {
            if($this->_identity===null)
            {
                    $this->_identity=new UserIdentity($this->username,$this->password);
                    $this->_identity->authenticate();
            }
            if($this->_identity->errorCode===UserIdentity::ERROR_NONE)
            {
                    $duration=$this->rememberMe ? 3600*24*30 : 0; // 30 days
                    Yii::app()->user->login($this->_identity,$duration);
                    ***Yii::app()->authManager->assign('teammember', Yii::app()->user->id);
                    return true;
            }
            else
                    return false;
    } 
```

（查看带**3 星 *****的行）（`Yii::app()->user->id`以整数形式返回用户 ID）

它应该运作良好。我将用户登录到系统（`with Yii::app()->user->login()`），然后（`Yii::app()->authManager->assign()`）

现在我正在检查这个：

```
public function actionTest()
{
        if(Yii::app()->user->checkAccess('create'))
        {
                echo "YOU CAN DO THIS";
        }
        else
        {
                echo "YOU CAN'T DO THIS";
        }
} 
```

但输出是 **你不能这样**做。我错过了什么吗？问题是什么？

**额外的**

的结果

```
var_dump(Yii::app()->authManager->getRoles()); 
```

：

更漂亮的版本[在这里](http://paste.ubuntu.com/1637725/)

```
array(1) { ["teammember"]=> object(CAuthItem)#25 (8) { ["_auth":"CAuthItem":private]=> object(CPhpAuthManager)#20 (10) { ["authFile"]=> string(50) "/var/www/WingSplitDatabase/protected/data/auth.php" ["_items":"CPhpAuthManager":private]=> array(5) { ["create"]=> object(CAuthItem)#21 (8) { ["_auth":"CAuthItem":private]=> *RECURSION* ["_type":"CAuthItem":private]=> int(0) ["_name":"CAuthItem":private]=> string(6) "create" ["_description":"CAuthItem":private]=> string(12) "add new data" ["_bizRule":"CAuthItem":private]=> NULL ["_data":"CAuthItem":private]=> NULL ["_e":"CComponent":private]=> NULL ["_m":"CComponent":private]=> NULL } ["read"]=> object(CAuthItem)#22 (8) { ["_auth":"CAuthItem":private]=> *RECURSION* ["_type":"CAuthItem":private]=> int(0) ["_name":"CAuthItem":private]=> string(4) "read" ["_description":"CAuthItem":private]=> string(9) "read data" ["_bizRule":"CAuthItem":private]=> NULL ["_data":"CAuthItem":private]=> NULL ["_e":"CComponent":private]=> NULL ["_m":"CComponent":private]=> NULL } ["update"]=> object(CAuthItem)#23 (8) { ["_auth":"CAuthItem":private]=> *RECURSION* ["_type":"CAuthItem":private]=> int(0) ["_name":"CAuthItem":private]=> string(6) "update" ["_description":"CAuthItem":private]=> string(11) "update data" ["_bizRule":"CAuthItem":private]=> NULL ["_data":"CAuthItem":private]=> NULL ["_e":"CComponent":private]=> NULL ["_m":"CComponent":private]=> NULL } ["delete"]=> object(CAuthItem)#24 (8) { ["_auth":"CAuthItem":private]=> *RECURSION* ["_type":"CAuthItem":private]=> int(0) ["_name":"CAuthItem":private]=> string(6) "delete" ["_description":"CAuthItem":private]=> string(11) "delete data" ["_bizRule":"CAuthItem":private]=> NULL ["_data":"CAuthItem":private]=> NULL ["_e":"CComponent":private]=> NULL ["_m":"CComponent":private]=> NULL } ["teammember"]=> *RECURSION* } ["_children":"CPhpAuthManager":private]=> array(1) { ["teammember"]=> array(4) { ["create"]=> object(CAuthItem)#21 (8) { ["_auth":"CAuthItem":private]=> *RECURSION* ["_type":"CAuthItem":private]=> int(0) ["_name":"CAuthItem":private]=> string(6) "create" ["_description":"CAuthItem":private]=> string(12) "add new data" ["_bizRule":"CAuthItem":private]=> NULL ["_data":"CAuthItem":private]=> NULL ["_e":"CComponent":private]=> NULL ["_m":"CComponent":private]=> NULL } ["read"]=> object(CAuthItem)#22 (8) { ["_auth":"CAuthItem":private]=> *RECURSION* ["_type":"CAuthItem":private]=> int(0) ["_name":"CAuthItem":private]=> string(4) "read" ["_description":"CAuthItem":private]=> string(9) "read data" ["_bizRule":"CAuthItem":private]=> NULL ["_data":"CAuthItem":private]=> NULL ["_e":"CComponent":private]=> NULL ["_m":"CComponent":private]=> NULL } ["update"]=> object(CAuthItem)#23 (8) { ["_auth":"CAuthItem":private]=> *RECURSION* ["_type":"CAuthItem":private]=> int(0) ["_name":"CAuthItem":private]=> string(6) "update" ["_description":"CAuthItem":private]=> string(11) "update data" ["_bizRule":"CAuthItem":private]=> NULL ["_data":"CAuthItem":private]=> NULL ["_e":"CComponent":private]=> NULL ["_m":"CComponent":private]=> NULL } ["delete"]=> object(CAuthItem)#24 (8) { ["_auth":"CAuthItem":private]=> *RECURSION* ["_type":"CAuthItem":private]=> int(0) ["_name":"CAuthItem":private]=> string(6) "delete" ["_description":"CAuthItem":private]=> string(11) "delete data" ["_bizRule":"CAuthItem":private]=> NULL ["_data":"CAuthItem":private]=> NULL ["_e":"CComponent":private]=> NULL ["_m":"CComponent":private]=> NULL } } } ["_assignments":"CPhpAuthManager":private]=> array(0) { } ["showErrors"]=> bool(false) ["defaultRoles"]=> array(1) { [0]=> string(9) "ziyaretci" } ["behaviors"]=> array(0) { } ["_initialized":"CApplicationComponent":private]=> bool(true) ["_e":"CComponent":private]=> NULL ["_m":"CComponent":private]=> NULL } ["_type":"CAuthItem":private]=> int(2) ["_name":"CAuthItem":private]=> string(10) "teammember" ["_description":"CAuthItem":private]=> string(0) "" ["_bizRule":"CAuthItem":private]=> NULL ["_data":"CAuthItem":private]=> NULL ["_e":"CComponent":private]=> NULL ["_m":"CComponent":private]=> NULL } } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T01:01:56.347

需要保存对身份验证设置的任何更改，因此只需在分配后添加以下行：

`Yii::app()->authManager->save();`

# wpf - 向从控件继承的类添加依赖属性？

> ID：14821530
> 
> 赞同：1
> 
> 时间：2013-02-11T21:51:41.717
> 
> 标签：wpf, dependency-properties

我正在尝试创建一个自定义图像控件，因为我必须根据某些事件来操纵它的源，而且我将拥有大量此类控件。为此，我决定从 Image 继承我的类（“nfImage”），并且我希望有一个 DP（它实际上会反映事件），我可以将它绑定到视图模型。我正在做：

```
class nfImage : Image
{
    public static readonly DependencyProperty TagValueProperty =
        DependencyProperty.Register("TagValue", typeof(int), typeof(nfImage), new UIPropertyMetadata(0));

    public int TagValue
    {
        get { return (int)GetValue(TagValueProperty); }
        set
        {
            SetValue(TagValueProperty, value);
            if (this.Source != null)
            {
                string uri = (this.Source.ToString()).Substring(0, (this.Source.ToString()).Length - 5) + value.ToString() + ".gif";
                ImageBehavior.SetAnimatedSource(this, new BitmapImage(new Uri(uri, UriKind.Absolute)));
            }
        }
    }
} 
```

问题是它不起作用。如果我从后面的代码中设置 TagValue 的值，源代码会更改，但如果我从 xaml（通过 dp）设置它，则不会发生任何事情，绑定也不起作用。我如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:08:04.083

您不能使用 setter，因为 XAML 不会直接调用它：它只是调用 SetValue(DependencyProperty, value) 而不通过您的 setter。您需要处理 PropertyChanged 事件：

```
class nfImage : Image
{

    public static readonly DependencyProperty TagValueProperty =
        DependencyProperty.Register("TagValue", typeof(int), typeof(nfImage), new UIPropertyMetadata(0, PropertyChangedCallback));

    private static void PropertyChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
    {
        var _this = dependencyObject as nfImage;
        var newValue = dependencyPropertyChangedEventArgs.NewValue;
        if (_this.Source != null)
        {
            string uri = (_this.Source.ToString()).Substring(0, (_this.Source.ToString()).Length - 5) + newValue.ToString() + ".gif";
            //ImageBehavior.SetAnimatedSource(this, new BitmapImage(new Uri(uri, UriKind.Absolute)));
        }
    }

    public int TagValue
    {
        get { return (int)GetValue(TagValueProperty); }
        set { SetValue(TagValueProperty, value); }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:09:30.150

DependencyProperty 的包装器属性只是样板文件，除了 GetValue 和 SetValue 之外，它不应该做任何事情。这样做的原因是，在从代码直接调用属性包装器之外设置值的任何东西都不会使用包装器并直接调用 GetValue 和 SetValue。这包括 XAML 和绑定。您可以在 DP 声明中向元数据添加 PropertyChanged 回调，而不是包装器设置器，并在那里做额外的工作。任何 SetValue 调用都会调用它。

# ios - 如何跟踪 iPhone 或 iPad 应用程序的价格变化或检索 App Annie 等应用程序数据？

> ID：14821533
> 
> 赞同：4
> 
> 时间：2013-02-11T21:51:46.003
> 
> 标签：ios, iphone, ipad, app-store

是否有 API 可以索引 iPhone 或 iPad 应用程序的价格变化？

例如，[这家公司](http://applesliced.com/app?n=app-price-drops&cl=3600100)、[这家公司](http://appshopper.com/)和[App Annie](http://www.appannie.com/top/#)如何收集 iOS 价格数据？

刮 iTunes 是唯一的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:13:03.517

使用 Apple 的 Enterprise Partner Feed，正如我们在另一个问题中回答的那样：[抓取网页或调用 API（尤其是 iTunes）的最快服务？](https://stackoverflow.com/questions/14988664/fastest-service-for-crawling-web-pages-or-invoking-apis-itunes-in-particular)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:06:55.127

您是否尝试过这个[Apple Affiliates Api](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)和这个[Search Api](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html#searching) .. 您可以做的是使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)直接在应用程序中轮询服务器，并且有一个简单的 JSON 请求可以将您提供的提要解析为可访问的字典。或者您可以使用 PHP（或您使用的其他语言）预先轮询它以修剪多余的结果并仅显示您需要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T19:31:15.093

您可以使用[AppCorner.it API](http://www.appcorner.it/en/service.html)

# dynamic - 无论查询源如何，动态调用 RavenDB Statistics 方法

> ID：14821540
> 
> 赞同：0
> 
> 时间：2013-02-11T21:52:21.263
> 
> 标签：dynamic, reflection, ravendb, invoke, out

RavenDB 提供 2 个 API 用于查询数据、`IDocumentQuery<T>`高级 lucene 查询和`IRavenQueryable<T>`强类型 linq 提供程序模型。

它们共享一个称为`Statistics(out RavenQueryStatistics stats)`在运行时返回信息的方法。

两种不同的方法签名是：

```
 public interface IRavenQueryable<T> ....
  {
    IRavenQueryable<T> Statistics(out RavenQueryStatistics stats); 
```

和

```
 public interface IDocumentQueryBase<T, out TSelf> 
                          where TSelf : IDocumentQueryBase<T, TSelf>
  {
    TSelf Statistics(out RavenQueryStatistics stats); 
```

我开始

```
 protected override dynamic SetupQuery(IDocumentSession session)
    {
        return session.Advanced.LuceneQuery<Foo>(new FooIndex().IndexName)
               .WhereEquals("Bar", "Baz")
               ;            
    } 
```

目的是该方法能够被其他类替换。

我正试图这样消费它：

```
using (var session = Store.OpenSession())
{
    RavenQueryStatistics stats=null;
    var dynQuery=    SetupQuery(session);
    var dynQuery2 = dynQuery.Statistics(out stats);
    //Results in cannot cast void to object

    //next i tried using reflection
    var refQuery=    SetupQuery(session);
    MethodInfo methodInfo = refQuery.GetType()
            .GetMethod("Statistics", BindingFlags.Public, null, 
            new[] {typeof (RavenQueryStatistics).MakeByRefType()}, null);

    var refQuery2= methodInfo.Invoke(query, new[] {stats});
    //results in NullReferenceException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:06:00.877

您正在查看接口定义，但事实证明，动态调用最终调用 AbstractDocumentQuery.Statistics，它返回 void。返回实例的方法实际上是作为显式接口方法实现的，所以动态调用是调用不了的。

# objective-c - 我如何禁用 touchesBegan: 用于多点触控？

> ID：14821541
> 
> 赞同：7
> 
> 时间：2013-02-11T21:52:26.043
> 
> 标签：objective-c, cocoa-touch, touch, multi-touch

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

我目前正在获取 1 个对象

```
touches 
```

当我同时用两根手指轻按时（按住选项键并单击模拟器）。我相信这是因为我没有启用

```
multipleTouchEnabled 
```

附加视图的属性。我想做到这一点，这样我就不会将此事件注册为多点触控。

调查这个问题，如果我启用multipleTouchEnabled，它似乎会起作用，然后做

```
if ([touches count] > 1) {
    return;
} 
```

在我的

```
touchesBegan: 
```

但是，这对我来说似乎很奇怪，因为我正在启用 multipleTouchEnabled 以禁用多个触摸，并且担心是否会有副作用。有没有更好的方法来解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:25:22.380

您应该能够禁用视图上的多点触控属性，在 IB 中，您必须实际转到侧面板并单击文件所有者旁边的视图以获取它，然后取消选中它，或者您可以这样做它在 viewdidload 的代码中：

self.view.multiTouchEnabled = 否；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T06:13:05.203

首先将手势识别器添加到您的视图中：

```
UITapGestureRecognizer *multipleTouches = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleMultiTap:)];
multipleTouches.numberOfTouchesRequired = 2;
[yourViewName addGestureRecognizer:multipleTouches];
[multipleTouches release]; 
```

希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:29:09.147

您可以使用手势识别器，即使您的代码有效，这也可能比 touches 委托更具可读性：

```
UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(myAction:)];
gestureRecognizer.numberOfTouchesRequired = 2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T00:08:12.280

如果必须使用 NSTouches，那么您可以使用以下方法来实现所需的任务。

> ```
> [view setMultipleTouchEnabled:NO];
> [view setExclusiveTouch:YES]; 
> ```

更多你可以玩

> setMultipleTouchEnabled：

通过保持

> 视图的 setExclusiveTouch 为 YES

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-24T09:22:45.687

您可以使用这条线来避免一次多次触摸，将独占触摸设置为“是”到您的视图。

```
[self.view setExclusiveTouch:YES]; 
```

# iphone - 在自定义单元格中点击 UIButton 不会调用 didSelectRowAtIndexPath

> ID：14821542
> 
> 赞同：0
> 
> 时间：2013-02-11T21:52:26.523
> 
> 标签：iphone, xcode, uibutton, didselectrowatindexpath

我在以编程方式添加的自定义单元格中有一个 UIButton：

```
UIButton *tag = [[UIButton alloc] init];
[tag addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

这是我的按钮处理程序：

```
-(void)buttonClicked:(id)sender
{
    UIButton *clickedButton= (UIButton*)sender;
    NSLog(@"Button tapped!", nil);
    self.tagTapped = YES;
    self.tagSelected = clickedButton.titleLabel.text;
} 
```

按钮点击已注册，但我的主视图控制器中的 didSelectRowAtIndexPath 没有被调用。点击单元格中的其他位置有效，但点击按钮不会调用该方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:28:41.300

> 点击单元格中的其他位置有效，但点击按钮不会调用方法 (didSelectRowAtIndexPath)。

这是设计使然。大多数人使用 UIButtons 来做一些不同于用户选择行时发生的事情。例如，在 Apple 的 Phone 应用程序中浏览语音邮件时，点击该行会启用 Call Back & Delete 按钮，同时点击该行的蓝色 AccessoryDe​​tailDisclosureButton 会显示一个新的 ViewController，其中显示语音邮件的日期和电话号码。

# jquery - 不同元素的相同数据属性（html5 和 jquery）

> ID：14821544
> 
> 赞同：0
> 
> 时间：2013-02-11T21:52:31.357
> 
> 标签：jquery, html, custom-data-attribute

是否可以有两个具有相同数据属性的元素？

HTML

```
<div id="cerchi" class="container">

       <div class="row">

          <div class="col_6 clearleft">
             <div class="blu" data-link="nadir.php">
                <p>1</p>
             </div>
          </div>

          <div class="col_6 omega">
             <div class="arancione" data-link="sole.php">
                <p>2</p>
             </div>
          </div>

       </div>
</div> 
```

JS

```
$("#cerchi .col_6 > div").click(function(){
   alert($("#cerchi .col_6 > div").data("link"));           
}); 
```

如果是，为什么如果我点击第二个“div”，警报会给出结果“nadir.php”？而不是“sole.php”？我有什么问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:55:33.833

因为它正在寻找第一场比赛。改变

```
$("#cerchi .col_6 > div").click(function(){
   alert($("#cerchi .col_6 > div").data("link"));           
}); 
```

到

```
$("#cerchi .col_6 > div").click(function(){
   alert($(this).data("link"));           
}); 
```

# java - RemoteObject 方法返回值

> ID：14821548
> 
> 赞同：0
> 
> 时间：2013-02-11T21:52:47.350
> 
> 标签：java, rmi, remoteobject

RemoteObject 方法的返回对象是否必须是可序列化的？例如，A 是一个远程对象，具有以下功能：

```
SomeObject getMyObject() throws java.rmi.RemoteException 
```

SomeObject 必须是可序列化的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:57:39.293

那么根据文档它应该是：

> 2.6 远程方法调用中的参数传递
> 
> 远程对象的参数或**返回值**可以是**任何可序列化的对象**。**这包括实现 *java.io.Serializable 接口的**原始类型*、*远程对象*和*非远程对象****。有关如何使类可序列化的更多详细信息，请参阅“Java 对象序列化规范”。本地不可用的参数或返回值的类由 RMI 系统动态下载。有关 RMI 在读取参数、返回值和异常时如何下载参数和返回值类的更多信息，请参阅“动态类加载”部分。*

 *[http://docs.oracle.com/javase/1.5.0/docs/guide/rmi/spec/rmi-objmodel7.html](http://docs.oracle.com/javase/1.5.0/docs/guide/rmi/spec/rmi-objmodel7.html)

这是有道理的。对象应该从一个节点传输到另一个节点。为了被传输，它应该被放置在一个套接字中（在某个时候），所以它应该被序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:26:00.783

它必须是原始类型、可序列化类型或导出的远程对象本身。在后一种情况下，它会自动转换为存根。`Registry.lookup()`是一个例子。*

# android - Google Drive Api 的帐户授权

> ID：14821549
> 
> 赞同：4
> 
> 时间：2013-02-11T21:52:48.227
> 
> 标签：android, google-drive-api, google-account

我正在开发一个有可能提供大量统计信息的 android 应用程序。我想将这些数据保存在我的谷歌驱动器上以供以后分析。

但是，我是 Google api 的新手，几乎不知道如何以编程方式授权我的帐户。这是我到目前为止所拥有的。

```
private static Uri driveUri;
private static Drive service;
private GoogleAccountCredential credential;
private Account driveAccount;

//      AccountManager accManager = 
//              (AccountManager) getSystemService(Context.ACCOUNT_SERVICE);
//      accManager.setUserData(driveAccount, ???, ???)

    credential = GoogleAccountCredential.usingOAuth2(this, DriveScopes.DRIVE);
    credential.setSelectedAccountName("myaccount@gmail.com");

    service = getDriveService(credential);

public class UploadToDrive extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... arg0) {
        // TODO Auto-generated method stub
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss", Locale.US).format(new Date());
        File sdcard = new File(Environment.getExternalStorageDirectory().getPath());
        File fileAnalytics = null;
        try {
            fileAnalytics = File.createTempFile("Sessions" + File.separator + "session_" + timeStamp, ".txt", sdcard);
        } catch (IOException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        }

        PrintStream ps = null;
        try {
            ps = new PrintStream(fileAnalytics);
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        ps.println("Count: " + count);
        ps.println("Time: " + (System.currentTimeMillis() - startTime));
        ps.close();
        FileContent content = new FileContent("text/plain", fileAnalytics);

        com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();
        body.setTitle(fileAnalytics.getName());
        body.setMimeType("text/plain");

        try {
            service.files().insert(body, content);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onProgressUpdate(Void... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
    }

} 
```

代码成功运行，文件在设备上创建，但我想将它发送到我的谷歌驱动器。

我认为主要问题是我不知道帐户**名称**凭据应该是什么。我有一种感觉，它不是“myacc@gmail.com”。有什么方法可以获取我自己的 google 帐户的帐户名称字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:10:18.107

问题似乎在于 Google Drive、Dropbox 和其他云服务没有内置支持访问您自己的帐户。

即使我确实得到了我的帐户密钥，它也会每 15 分钟更改一次！

我建议建立一个网站并使用 FTP 上传文件。

# c - 从多个线程写入不同文件后获取 ferror()

> ID：14821552
> 
> 赞同：2
> 
> 时间：2013-02-11T21:53:00.463
> 
> 标签：c, file, file-io

我正在尝试生成多个线程，并为每个线程写入不同的文件（线程 1 写入文件 1，等等......）。但是，在线程执行 ferror() 设置后，阻止我在主进程中进行进一步的文件操作。我尝试清除错误，但没有解决。这是我目前拥有的代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>

void * bla (void *arg) {
    fprintf((FILE *) arg, "Hey, printing to file");
}

int main() {
    FILE *f1 = fopen("out0", "rw");
    FILE *f2 = fopen("out1", "rw");

    pthread_t t[2];
    pthread_create(&t[0], NULL, bla, f1);
    pthread_create(&t[1], NULL, bla, f2);

    pthread_join(t[0], NULL);
    pthread_join(t[1], NULL);
    printf("%d\n", ferror(f2));   // ERROR: ferror() is set to 1 here!

    //fseek(f1, 0, SEEK_END);
    fseek(f2, 0, SEEK_END);
    long pos = ftell(f2);         // This still works
    printf("%ld\n", pos);
    clearerr(f2);                 // Trying to clear the error, flag clears, but further operations fail
    char *bytes = malloc(pos);
    int err = fread(bytes, 1, 4, f2);  // fread returns 0
    printf("%d\n", ferror(f2));
    printf("%d\n", err);
    bytes[pos-1] = '\0';
    printf("%s", bytes);
    free (bytes);

    fclose(f1);
    fclose(f2);

    return 0; 
```

注意线程打开的文件不应该存在，如果存在就应该清除。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:05:33.257

`mode`的参数`fopen`应该是`"r+"`（如果文件应该存在）或`"w+"`（甚至可能`"a+"`）而不是`"rw"`. 字符串`"rw"`，它不是一个有效的模式，可能被解释为`"r"`模式，你不能`fprintf`这样一个`FILE*`.

# javascript - 需要可以打开网页然后填写表格并提交的 Javascript 代码

> ID：14821559
> 
> 赞同：-3
> 
> 时间：2013-02-11T21:53:14.433
> 
> 标签：javascript

正如标题所说，我需要有关打开网页并填写表格然后提交信息的 javascript 代码的帮助。

这是我目前拥有的：

```
var firstName = 'Billy';
var lastName = 'Bob';
var loginWindow = window.open('my website', 'loginWindow');
loginWindow.document.getElementById('fname').value=firstName;
loginWindow.document.getElementById('lname').value=lastName;
loginWindow.document.form.submit(); 
```

（我在另一篇文章中找到它）..但它对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:04:43.850

对此可能存在 XSS（跨站点脚本）限制。但是，有一个解决方案。

浏览所需表单的源代码，找到`form`标记的`action`属性 ( `<form action="THIS STUFF HERE">...</form>`)，然后在页面的脚本中执行以下操作之一：

1.  将其用作`action`new`form`并使用 DOM 添加带有您要提交的数据的s 和s 的`hidden input`元素，然后在按钮上使用 new 。`name``value``.click()``submit``form`

2.  以某种方式浏览到操作 URL，**但**append `?name1=value1&name2=value2&name3=value3...`、 where`name1`和`value1`等是您要提交的表单字段的名称和值。如果 URL 的末尾已经有类似的内容`action`，只需添加新`&name=value`的对而不是附加新的问号。（这可以使用`iframe`with CSS来完成`display: none;`。

希望这可以帮助！！

# iphone - 在 iphone 上设置随机本地通知

> ID：14821564
> 
> 赞同：3
> 
> 时间：2013-02-11T21:53:34.757
> 
> 标签：iphone, ios, objective-c, notifications, uilocalnotification

我正在尝试找到一种在 iphone 上安排随机本地通知的方法。我希望能够在一天中的随机时间每天向用户发送一条随机消息（从消息列表中挑选）。

我可能可以计算出一堆随机时间和消息，然后将其安排在接下来的 30 天或更长时间，但这似乎很混乱，并且不允许用户取消警报的好方法。

我的研究表明 iphone 不支持 cron 作业，所以我似乎不能只安排一个后台进程来保持随机通知，对吧？
我还研究了推送通知作为另一种可能性。

但是，我想把我的问题放在那里，看看各位专家是否有其他想法。

谢谢！

# android - 在 Android 中为未知数据库异常创建唯一索引失败

> ID：14821565
> 
> 赞同：0
> 
> 时间：2013-02-11T21:53:43.220
> 
> 标签：android, android-sqlite

在这个神秘问题出现之前，我的数据库在我的应用程序中运行良好。我想在一个表（listitems）中为两列（list_id 和 item_id）添加一个唯一索引。该表跟踪哪些项目与每个列表相关联，我不希望列表中有重复项。

所以我写了这个从 onUpgrade(...) 调用的数据库升级方法

```
private void upgradeTo3(SQLiteDatabase db) {
    db.execSQL("CREATE UNIQUE INDEX IF NOT EXISTS '"+
        Contract.DATABASE_NAME +"'.list_item_unique_index ON "+ 
        Contract.ListItem.TABLENAME +
        " ( "+ Contract.ListItem.LIST +", " + Contract.ListItem.ITEM + ")");
} 
```

它给了我一个错误`"unknown database 'my_database.db'"`

我正在使用这个构造函数获取我的数据库助手，它使用与上面的 SQL 相同的字符串，但在这里它不会引发错误。我可以访问数据库。

```
public DatabaseHelper(Context context) {
    super(context, Contract.DATABASE_NAME, null, Contract.DATABASE_VERSION);
} 
```

此外，如果我在 Eclipse 中打开 DDMS，我可以看到应用程序文件中有一个名为“my_database.db”的文件。

有人知道为什么该 SQL 执行中似乎不存在数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:05:01.793

回到[http://www.sqlite.org/lang_createindex.html](http://www.sqlite.org/lang_createindex.html)并注意到数据库的名称在命令中是可选的。所以我从命令中删除了它，因为它确实应该已经知道它将运行哪个数据库。现在它可以工作了。

# silverlight - 如何加速 Silverlight（加载 xap 文件后）？

> ID：14821566
> 
> 赞同：0
> 
> 时间：2013-02-11T21:53:44.117
> 
> 标签：silverlight, silverlight-4.0

我们正在开发一些silverlight 4 应用程序。它们是对标准软件 (MS CRM) 的一种定制形式，其中页面不断打开和关闭。所以启动性能对我们来说至关重要。我们已经确保 xap 文件被缓存，因此上传时间不是一个大问题。但是在我们的第一个屏幕出现之前仍然需要几秒钟。与此同时，插件区域只是空白。没有反馈给用户。

这是一种糟糕的用户体验，我们正在寻找如何最大限度地减少“无反馈”时间的可能性。我们可以做些什么来加快 Silverlight 应用程序的启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:14:20.140

在silverlight 应用程序加载时减少无响应时间的一种方法是显示闪屏。启动画面可以是一个简单的 .xaml 文件，其中包含您的应用程序的图像。通常我们会显示全尺寸图像，直到应用程序加载。使用闪屏处理加载时间是一种标准技术。请参阅 msdn 上的[此](http://msdn.microsoft.com/en-us/library/cc903962%28VS.95%29.aspx)URL，了解您可以设置为闪屏的不同选项。

# html5-video - 如何在 html5 视频标签文本轨道中使用结构化提示？

> ID：14821571
> 
> 赞同：0
> 
> 时间：2013-02-11T21:54:11.923
> 
> 标签：html5-video

我看到一个文本轨道文件可以有这样的条目：

```
multicell
00:01:15.200 --> 00:02:18.800
{
"title" : "Multi-celled organisms"
"description" : "Multi-celled organisms have different types of cells that perform specialized functions."
} 
```

我实际上并没有使用文本轨道文件，而是使用 javascript 为不在文件中的文本轨道对象创建“提示”。但问题是，如果我播放的视频具有这样的结构化提示，是否会出现任何字幕？
理想情况下，我会将“描述”字段显示为字幕，并且单独捕获“标题”字段的内容以及其他内容。（我可以在一个事件中做到这一点）。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:00:09.417

我为你整理了一个小[提示示例](http://jsfiddle.net/trixta/tLubr/)。

要回答您的问题：

1.  如何使曲目可见 a) 曲目必须是“字幕”或“字幕”类型。b) 曲目必须处于“显示”模式

    //为视频添加字幕轨道

    var track = $('video').get(0).addTextTrack('subtitles', 'just a test', 'en');

    //使其可见

    track.mode = '显示';

2.  结构化数据

Cue 始终具有文本信息，并将始终显示洞文本。当然，你可以解析一个 JSON 字符串并用它做任何你想做的事情。如果您以编程方式生成提示。您不需要添加 JSON。您可以将描述文本直接传递给 cue 构造函数，然后使用自定义属性简单地扩展生成的 cue。

```
function createStructuredCues(s, e, obj){
    var cue = new TextTrackCue(s, e, obj.description);
    cue.customMetaData = obj;
    return cue;
} 
```

# jquery - 使用 Jquery Draggable Div 在拖动期间设置位置

> ID：14821572
> 
> 赞同：2
> 
> 时间：2013-02-11T21:54:17.860
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我一直在研究一个脚本，它将可拖动 div 的包含限制为一个圆圈（而不是一个矩形父 div）。我找到了这个帖子：[如何限制圆圈区域内的运动](https://stackoverflow.com/questions/8515900/how-to-constrain-movement-within-the-area-of-a-circle)这似乎解决了我的一些问题。我已经准备好适当的函数，当我在拖动函数中调用这些函数时，它将返回 div 的正确 x 和 y 位置。我知道这一点是因为我可以在拖动功能期间检查控制台日志并检查 div 的位置。但是，我的问题是我似乎无法在拖动事件期间设置实际位置。控制台报告了正确的位置值，但 div 实际上从未被限制在圆形边界。例如，如果我将 div 拖到圆的中心，然后将其垂直向上移动到圆的边界之外...... div 不会在圆处停止，但是控制台会将位置钳位到 [0,50]/ /50 是 X 和 Y 轴的圆心。我在其他一些线程上读到我可能必须使用辅助对象，但我似乎没有用这种方法得到任何结果。我发布了一个简化的示例，希望有人可以提供帮助。谢谢你。

```
this.light = document.createElement("div");
this.light.style.position='absolute';
this.light.style.left="20px";
this.light.style.top="40px";
this.light.style.width="20px";
this.light.style.height="20px";

$(parentdiv).append(this.light);

var circle_cenx = 50.0;
var circle_ceny = 50.0;
var circle_radius = 50.0;

$(this.light).draggable({ 
    drag: function( event, ui ){
        var position = $(that.light).position();
        var result = limit(position.left+10, position.top+10, circle_cenx, circle_ceny);
        $(that.light).css({'top': result.y, 'left': result.x});
        position = $(that.light).position();
        console.log(position);
    }
});

function limit(x, y, cenx, ceny) {
    var dist = distance([x, y], [cenx, ceny]);
    if (dist <= circle_radius) {
        return {x: x, y: y};
    } 
    else {
        x = x - circle_cenx;
        y = y - circle_ceny;
        var radians = Math.atan2(y, x);
        return {
           x: Math.cos(radians) * circle_cenx + circle_radius,
           y: Math.sin(radians) * circle_ceny + circle_radius
        }
    } 
}

function distance(dot1, dot2) {
    var x1 = dot1[0],
        y1 = dot1[1],
        x2 = dot2[0],
        y2 = dot2[1];
    return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T00:36:58.483

是的，我终于弄明白了。我原以为 .position 是只读属性……但事实证明，您也可以使用它来设置位置。因此，在上面的代码中，我创建了一个名为 result 的变量，并存储了 limit 函数的返回值（它返回了包含在包含圈内的鼠标的 x 和 y 值）。所以，在那之后你只需要这样称呼：

```
ui.position={'top': result.y-10, 'left': result.x-10}; 
```

您需要删除该行：

```
$(that.light).css({'top': result.y, 'left': result.x}); 
```

这应该是你所需要的。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T09:18:44.493

由于我很确定算法并不完全正确，并且您提供的信息对我非常有帮助，因此我很感激并创建了一个 jsfiddle 演示，供大家查看算法的实际应用。我还提供了一个默认界面来玩。

[http://jsfiddle.net/s7Uy2](http://jsfiddle.net/s7Uy2)

再次感谢。

编码：

CSS：

```
.ui-controlpad {
width:150px;
height:150px;
border:1px solid black;
-moz-border-radius:75px;
border-radius:75px;
z-index:1000;
}
.ui-controlpad-pad {
position:relative;
width:75px;
height:75px;
top:37.5px;
left:37.5px;
border:1px solid black;
-moz-border-radius:37.5px;
border-radius:37.5px;
z-index:1001;
background-color:grey;
} 
```

html:

```
<div id="Controlpad"></div> 
```

Javascript：

```
jQuery.fn.extend({
    controlpad: function (options) {
        $(this[0]).append('<div class="ui-controlpad"></div>');
        $(".ui-controlpad").append('<div class="ui-controlpad-pad"></div>');
        $(".ui-controlpad-pad").draggable({
           drag: options.ondrag,
           revert: true
        });
    }
});
function limit(x, y, cenx, ceny, r) {
    var dist = distance([x, y], [cenx, ceny]);
    if (dist <= r) {
        return { x: x, y: y };
    }
    else {
        x = x - cenx;
        y = y - ceny;
        var radians = Math.atan2(y, x);
        return {
            x: Math.cos(radians) * r + cenx,
            y: Math.sin(radians) * r + ceny
        }
    }
}

function distance(dot1, dot2) {
    var x1 = dot1[0],
        y1 = dot1[1],
        x2 = dot2[0],
        y2 = dot2[1];
    return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));
}
$(document).ready(function(){
    var circle_cenx = 37.5;
    var circle_ceny = 37.5;
    var circle_radius = 37.5;
    $("#Controlpad").controlpad({
        ondrag: function(event, ui){
            var result = limit(ui.position.left, ui.position.top, circle_cenx, circle_ceny, circle_radius);
            ui.position = { 'top': result.y, 'left': result.x };
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:03:59.133

检查是否包含可拖动元素。希望下面的链接对你有帮助

[http://api.jqueryui.com/draggable/#option-containment](http://api.jqueryui.com/draggable/#option-containment)

```
contaiment: [x1, y1, x2, y2]; 
```

您可以抓住光标位置并进行数学运算以相应地设置 x1、y1、x2 和 y2 的值​​。

# javascript - 无法启用或禁用 jquery 菜单栏项

> ID：14821576
> 
> 赞同：0
> 
> 时间：2013-02-11T21:54:24.933
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jquery ui 菜单栏。到目前为止，我取得了不错的成绩，但我正在尝试以编程方式启用和禁用菜单栏项（例如文件-> 退出）。这对我不起作用。

菜单栏的部分html定义是：

```
 <div class="Dashboard">
  <ul id="MainMenubar" class="menubar-icons">
    <li>
      <a href="#File">File</a>
      <ul>
        <li class="ui-state-disabled" id="logout"><a href="#Logout">Logout</a></li>
        <li class="ui-state-disabled"><a href="#LoadUsers">Load users</a></li>
        <li><a href="#Exit">Exit</a></li>
      </ul>
    </li>
  </ul>
</div> 
```

现在，当我调用: 时`$( "#logout" ).menubar( "enable" );` ，出现以下错误：“未捕获的错误：在初始化之前无法调用菜单栏上的方法；试图调用方法‘启用’”。我不明白，因为菜单栏早在加载页面时就已初始化。

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:56:30.333

`#Logout`是代码中 URL 的 HREF，而不是 ID。您需要将 HTML 属性分配`id="Logout"`给某个元素，以便按照您在此处所做的方式引用它。

例如：

```
<li id="logout"><a href="#">Logout</a></li> 
```

```
$("#logout").menubar("enable"); 
```

# ruby-on-rails - Rails 3 数据库并发插入

> ID：14821577
> 
> 赞同：0
> 
> 时间：2013-02-11T21:54:26.360
> 
> 标签：ruby-on-rails, database, deadlock

我有一个将用户输入插入数据库的 Rails 3 应用程序。

每次用户单击提交按钮时，所有字段（姓名、电子邮件、电话号码等）都将插入到数据库中。但是如果两个用户同时提交表单，数据库会不会陷入死锁状态呢？

我发现 rails 3 有一个**线程模式**，可以`config.threadsafe!`在`production.rb`. 但我不确定这是否也会解决数据库死锁问题。

有没有办法解决或避免这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:43:18.270

在数据库级别，不存在数据库进入死锁状态的危险。像 MySQL 这样的数据库非常健壮，即使每秒更新 1000 次也不会导致死锁。

[但是，使用 Active Record 的Optimistic 锁定](http://apidock.com/rails/ActiveRecord/Locking/Optimistic)支持来提醒第二个用户该记录在他们开始编辑后发生了更改可能是值得的。

上述链接文档中的以下示例应有助于解释这一点：

```
p1 = Person.find(1)
p2 = Person.find(1)

p1.first_name = "Michael"
p1.save

p2.first_name = "should fail"
p2.save # Raises a ActiveRecord::StaleObjectError 
```

顺便说一句`config.threadsafe!`，用于配置兼容的服务器，它们可以使用线程并发来服务器请求，而不是更常见的 Rails 进程并发。Aaron Pattrrson 有[一篇关于线程安全的文章！](http://tenderlovemaking.com/2012/06/18/removing-config-threadsafe.html)值得一读。

# php - 如何复制新变量中的资源并销毁旧资源？

> ID：14821578
> 
> 赞同：0
> 
> 时间：2013-02-11T21:54:29.123
> 
> 标签：php, resources, gd

给定以下代码：

```
imagecopyresized($new_image, $product, $dst_x, $dst_y, $src_x, $src_y, $dst_width, $dst_height, $src_width, $src_height);

imagedestroy($product);
$product = $new_image;
imagedestroy($new_image); 
```

最后一行破坏`$product`，不仅仅是`$new_image`，好像`$product`是某种指向`$new_image`. 为什么会发生这种情况？如何在*$product*中有效地创建 *$new_image* 的副本，然后销毁`$new_image`资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:07:26.823

`$product` **是**与 相同资源的标识符`$new_image`。用于`$product = clone $new_image;`获取图像资源的副本。然后你就可以在`imagedestroy($new_image)`不破坏的情况下调用`$product`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:13:36.813

为什么会这样：

PHP 使用写时复制内存管理，即，您不会在内存中为变量分配新空间 --> 只需指向相同的内存位置。

如何避免这种情况：

```
imagecopyresized($new_image, $product, $dst_x, $dst_y, $src_x, $src_y, $dst_width, $dst_height, $src_width, $src_height);

imagedestroy($product);
$product = clone $new_image;
imagedestroy($new_image); 
```

[http://www.php.net/manual/en/language.oop5.cloning.php](http://www.php.net/manual/en/language.oop5.cloning.php)

关于写时复制： [http ://www.research.ibm.com/trl/people/mich/pub/200901_popl2009phpsem.pdf](http://www.research.ibm.com/trl/people/mich/pub/200901_popl2009phpsem.pdf)

# git - 无需分叉即可拉取请求？

> ID：14821583
> 
> 赞同：140
> 
> 时间：2013-02-11T21:54:45.753
> 
> 标签：git, github, repository, branch

以下是主题“[我如何在 GitHub 中为其他人的代码贡献代码？](https://stackoverflow.com/questions/4384776/how-do-i-contribute-to-others-code-in-github) ”的代码贡献步骤。

1.  分叉项目
2.  对存储库进行一个或多个注释良好且干净的提交。如果您要修改多个零件或功能，则可以在此处创建一个新分支。
3.  在 github 的 Web 界面中执行拉取请求。

是否可以在不分叉回购的情况下提出拉取请求？

看到我的帐户中有 20 多个 repo 是为一些 pull request 分叉的，这非常令人难过。他们当时没有活动，零星/追随者。看起来我只是在为一个黑色的日子复制某人的代码。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-02-11T22:03:10.763

如果您无权在该存储库上创建分支，则**没有分叉就无法创建拉取请求**。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-11T22:10:56.670

一旦您的拉取请求被接受，您就可以[安全地删除 repo](https://softwareengineering.stackexchange.com/questions/61577/should-i-keep-my-github-forked-repositories-around-forever)。

之后，只需直接从原始上游 repo 克隆即可。

如果您有其他拉取请求，那么您应该在各自的分支中制作它们，这意味着您可以安全地删除您为管理已接受的拉取请求而创建的分支（如“[我的拉取请求已合并，该怎么办下一个？](https://stackoverflow.com/a/12772000/6309) ”）

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-11T22:11:59.150

根据定义，拉取请求涉及分叉，除非您对目标存储库具有提交访问权限。不过，您可以做几件事：

1.  如果您*确实*具有提交访问权限，请创建一个分支并对新分支发出拉取请求。
2.  在问题正文中发布您的补丁。这不是真正的 GitHub 方式，但它确实有效。
3.  分叉存储库，创建拉取请求，然后在合并或拒绝拉取请求后删除分叉。

如果您只是想避免保留您没有积极使用的存储库，我个人建议选项＃3。它遵循公认的 GitHub 工作流程，而不会弄乱您的仪表板。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-09-16T10:12:26.413

github 支持[共享存储库模型](https://help.github.com/articles/using-pull-requests#shared-repository-model)

> 共享存储库模型在小型团队和组织在私人项目上进行协作时更为普遍。每个人都被授予对单个共享存储库的推送访问权限，并且主题分支用于隔离更改。
> 
> 拉取请求在 Fork & Pull 模型中特别有用，因为它们提供了一种通知项目维护者关于你的 fork 中的更改的方法。但是，它们在共享存储库模型中也很有用，用于在合并到主线分支之前启动代码审查和关于一组更改的一般讨论。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-02T07:49:59.710

你仍然需要那个单行： `hub fork;git push -u $GIT_USER HEAD;hub pull-request`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-02T03:03:27.447

这令人困惑。您可以创建拉取请求，但您可以分叉某个项目，然后上传您自己的项目并在您的分叉中进行更改。选择选项以比较分支。这是方法之一。您应该分叉某人项目并使用最新的 git gui 克隆它（输入 url 和文件夹名称，安装路径将存储您的分叉，默认设置应该是最佳粘贴）。或者使用 soulseek（类似于服务器）、torrents 或 chomikuj（尽管您需要使用 dziellacz 将开源文件拆分为 1MB 以进行合并）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-17T16:12:22.250

作为一种解决方法，您可以仅为 fork repos 创建组织。

# javascript - Jquery 拖放搜索

> ID：14821585
> 
> 赞同：1
> 
> 时间：2013-02-11T21:54:47.420
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-plugins

我想知道是否可以将拖放功能作为一种搜索表格的新颖方式来实现。例如显示天气结果的表格，有太阳、雪、雨、风 4 个图标。当太阳图标被放下时，它只会显示太阳行。

我知道当删除一个项目时，您可以写入 html 或警报，但我想知道是否可以写入一个变量，该变量反过来会搜索表。

通过表格搜索的参考：http: [//www.vijayjoshi.org/2011/01/03/searching-text-in-a-html-table-using-jquery/](http://www.vijayjoshi.org/2011/01/03/searching-text-in-a-html-table-using-jquery/)

任何见解将不胜感激。

谢谢

克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:28:37.967

你的问题的答案是，是的。我不得不承认，这是一种在 DOM 中组织数据列表的新颖方式。

所以你需要的是对 droppable 方法的回调。像这样的东西：

```
 $( "#droppable" ).droppable({
drop: function( event, ui ) {
$(--non-dropped selector or attr--).each(function(){
         $(this).hide();
    }

} 
```

# ios - NSInternalInconsistencyException：无法在包中加载 NIB

> ID：14821586
> 
> 赞同：0
> 
> 时间：2013-02-11T21:54:49.310
> 
> 标签：ios, objective-c, xcode, xcode4.6

2013-02-10 20:35:31.736 spellgate[8771:c07] *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle（已加载）”，名称为“EndRoundVC”*** First throw call stack: (0x212f022 0x1aa7cd6 0x20d7a48 0x20d79b9 0xe2b638 0xcd11fc 0xcd1779 0xcd199b 0xc30401 0xc30a46 0x835e 0x2130e99 0xc0d14e 0xc0d0e6 0xcb3ade 0xcb3fa7 0xcb3266 0xc323c0 0xc325e6 0xc18dc4 0xc0c634 0x22c2ef5 0x2103195 0x2067ff2 0x20668da 0x2065d84 0x2065c9b 0x22c17d8 0x22c188a 0xc0a626 0x2dad 0x2cd5) terminate called throwing an exception(lldb)

我已经验证目标对象是应用程序并且 .xib 是构建的一部分。我相信这与我调用 .xib 的方式有关：

```
EndRoundVC *roundEnded = [[EndRoundVC alloc] init];
[self.view.window setRootViewController:roundEnded]; 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:58:35.740

你为什么不这样创建你的VC：

```
EndRoundVC *roundEnded = [[EndRoundVC alloc] initWithNibName:@"EndRoundVC" bundle:nil]; 
```

希望这有效。

# ios - iOS 应用程序在运行时出现断点

> ID：14821587
> 
> 赞同：3
> 
> 时间：2013-02-11T21:54:56.710
> 
> 标签：ios, command-line, breakpoints, foundation

我是一位经验丰富的开发人员，但对 iOS/Objective C 不熟悉。

下面的应用程序构建正常（以任何错字/剪切'n'粘贴错误为模）。当我运行它时，它会中断打印方法，使其看起来像是有一些错误。我看不到错误是什么或在哪里。可能是一个真正的新错误！

任何人都可以通过解释我做错了什么以及如何解决它来帮助我吗？

这是一个命令行 MacOS 应用程序，带有 Foundation，在 XCode 中构建和运行。

```
@interface DayOfYear : NSObject
- (void) print;
- (id) init : (int) day;
@end // DayOfYear

@implementation DayOfYear

int dayInYr =0;

- (id) init : (int) day {
    self = [super init];
    dayInYr = day;
    return self;
}

- (void) print {
     // NSLog(@"In print with %d", dayInYr);

}    // WHEN RUN THIS IS WHERE IT BREAKPOINTS SAYING "Thread 1, breakpoint 1.1, 2.1

@end

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        // insert code here...
        NSLog(@"Hello, World!");

        DayOfYear *d =[[DayOfYear alloc] init : 2 ];
        [d print];

        NSLog(@"Finished!");

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-11T22:21:44.253

您在该`print`方法上设置了两个断点。断点在左边距中显示为蓝色标志。您可以通过将它们拖出边缘来摆脱它们，如下所示：

![将断点拖出以删除它们](../Images/1348e27c801fa8935c65364085d56e51.png)

# c# - getter setter 文本字段 JAVA GUI

> ID：14821588
> 
> 赞同：2
> 
> 时间：2013-02-11T21:54:56.570
> 
> 标签：c#, java

嗨，什么是 JAVA 等价于用 C# 类 1 编写的代码和平：

```
 public string Password
     {
         get { return password; }
         set { password = value; }
     } 
```

第 2 类：

```
 try
        {

            UserEntity user = new UserEntity();

            user.Password = textBoxPassword.Text;
            user.InsertUser();
            MessageBox.Show("User is registred");

        } 
```

在java中我写了这个：类1：

```
 protected int password ;

    public int getPassword(){
        return password;

    }

    public void setPassword(int password){
        this.password=password;
    } 
```

类 2：

```
 LoginEntity login = new LoginEntity();
      login.getPassword() = pwdTextBox.getText();// here ERROR : required variable , found value 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T21:56:04.720

在 C# 和 Java 中都不能在赋值的左侧调用方法。所以这：

```
login.getPassword() = pwdTextBox.getText(); 
```

在 Java 或 C# 中均无效

也许你想要

```
login.setPassword(pwdTextBox.getText()); 
```

尽管您确实应该避免使用字符串作为密码，因为它们很容易被嗅到，从而使您的密码保护变得很差。

# java - 收藏 AddAll Android

> ID：14821592
> 
> 赞同：0
> 
> 时间：2013-02-11T21:55:14.123
> 
> 标签：java, android, collections

我刚开始使用 java & android。

下面是我的代码，在活动中添加所有按钮然后隐藏它们。问题：他们是否可以自动添加活动中的所有按钮而不必列出每个按钮，我查看了 listA.addall 但不明白如何将活动添加为集合。

这样做的理由是我可能希望更改按钮的数量并且仍然让代码工作。

```
public void setup2(){
    List<Button> listA = new ArrayList<Button>();

    listA.add((Button)findViewById(R.id.button1));
    listA.add((Button)findViewById(R.id.button2));
    listA.add((Button)findViewById(R.id.button3));
    listA.add((Button)findViewById(R.id.button4));
    listA.add((Button)findViewById(R.id.button5));

    for (Button item : listA)
        item.setVisibility(View.INVISIBLE);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:04:50.680

是的，这可能是最干净的方式。但是，如果您的按钮都以类似的 id 命名（button_1、button_2 等），您可以通过字符串而不是直接 ID 引用进行搜索。以下是按字符串获取按钮的示例：

```
int resID = getResources().getIdentifier("button_%i", "id", getPackageName());
Button addButton = (Button) findViewById(resID); 
```

然后你可以循环你所有的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:00:30.250

假设您的按钮位于视图组中，例如`LinearLayout`：

```
for (int i = 0; i < layout.getChildCount(); i++) {
        View v = layout.getChildAt(i);
        if (v.getClass() == Button.class) {
            listA.add(v);
        }
} 
```

`layout`是对包含按钮的布局的引用。

这只是遍历布局中的每个子视图，比较它的类类型`Button`并将其添加到您的集合中。

# java - 如何在 C++ 中实现 Java“扫描仪”？

> ID：14821598
> 
> 赞同：2
> 
> 时间：2013-02-11T21:55:43.800
> 
> 标签：java, c++, visual-studio-2010

请看下面的java代码

```
import java.util.Scanner;

public class Main
{
    static int mul=1;
    static String  convert;
    static  char[] convertChar ;
    static StringBuffer buffer = new StringBuffer("");

    public static void main(String[]args)
    {

        Scanner scan = new Scanner(System.in);

        int number=0;
        int loopValue = scan.nextInt();
       //System.out.println("print: "+loopValue);

        for(int i=0;i<loopValue;i++)
        {
            number = scan.nextInt();
           // System.out.println("print: "+number);

            for(int a=1;a<=number/2;a++)
            {
                if(number%a==0)
                {
                    //System.out.println(a);
                    mul = mul*a;
                    //System.out.println(mul);
                }
            }

           convert  = String.valueOf(mul);
           convertChar = convert.toCharArray();

           if(convertChar.length>4)
            {
               /*System.out.print(convertChar[convertChar.length-4]);
               System.out.print(convertChar[convertChar.length-3]);
               System.out.print(convertChar[convertChar.length-2]);
               System.out.print(convertChar[convertChar.length-1]);
               System.out.println();*/

               buffer.append(convertChar[convertChar.length-4]);
               buffer.append(convertChar[convertChar.length-3]);
               buffer.append(convertChar[convertChar.length-2]);
               buffer.append(convertChar[convertChar.length-1]);

                System.out.println(buffer);

            }
            else
            {
                System.out.println(mul);
            }

            //System.out.println(mul);
            mul = 1;
        }

    }
} 
```

此代码用于计算给定数字的正除数的乘积。我在这里使用了扫描仪，因为我不知道将输入多少个输入。这就是为什么我不能去像

```
int a, b;

cin >> a >> b 
```

在 C++ 中。所有输入将由测试引擎插入到一个单一的，如下所示

> 6 2 4 7 8 90 3456

如何使用 C++ 实现 Java“扫描仪”？有头文件吗？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:07:09.027

您似乎正在使用`Scanner`从标准输入流中一次读取一个整数。这可以通过提取运算符轻松完成，`operator>>`.

替换此代码：

```
 Scanner scan = new Scanner(System.in);

    int number=0;
    int loopValue = scan.nextInt();
   //System.out.println("print: "+loopValue);

    for(int i=0;i<loopValue;i++)
    {
        number = scan.nextInt();
       // System.out.println("print: "+number); 
```

有了这个：

```
 int number=0;
    int loopvalue=0;
    std::cin >> loopvalue;

    for(int i = 0; i < loopValue; i++)
    {
        std::cin >> number; 
```

您应该检查操作`std::cin`后的值`>>`以确保它们成功。

参考：

*   [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)
*   [http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:35:37.567

如果您使用`std::cin >> value;`读取该值，那么您只能在检测到换行后处理整行。

如果要在键入每个数字时对其进行处理，则可以使用如下函数：

```
int nextInt()
{
    std::stringstream s;
    while (true) 
    {
        int c = getch();
        if (c == EOF) break;
        putch(c); // remove if you don't want echo

        if ((c >= '0' && c <= '9') || (c == '-' && s.str().length() == 0)) 
            s << (char)c;
        else if (s.str().length() > 0)
            break;        
    }

    int value;
    s >> value;
    return value;
} 
```

好的，可能有更有效的方法来编写它，但它会逐个字符地读取输入，直到遇到一个数字，并在遇到除数字以外的任何内容时返回读取的任何数字。

例如 1 2 3 4 将在第一次调用时返回 1，在第二次调用时返回 2 等等。

# javascript - 我们是否正在使用 Backbone.js、Angular 等 JavaScript MVC (MVVM) 框架倒退？

> ID：14821599
> 
> 赞同：11
> 
> 时间：2013-02-11T21:55:44.337
> 
> 标签：javascript, model-view-controller, mvvm, accessibility, javascriptmvc

Backbone.js、Angular、Ember.js 等 JavaScript MVC 框架如今风靡一时。我知道它们非常适合防止意大利面条代码和所有内容，但我真的不明白为什么它们会像以前那样起飞。

在这些年来确保使用渐进增强之类的东西可以访问网站之后，当 JavaScript 被禁用时，这种事情无论如何都不起作用。看看[https://app.getblimp.com/](https://app.getblimp.com/)。这是一个很棒的应用程序，但是如果禁用了 JS，那么整个事情都是无用的。还记得几年前 Target 因为网站无法访问而被起诉超过一百万美元吗？

另一件事是 HTML 是如何集成到 JS 中的。将 HTML 与标记分开，将 CSS 与表示分开，将 JS 与行为分开，到底发生了什么？为什么所有这些应该由服务器处理的东西都由 JavaScript 完成？

有人能指出为什么 JavaScript MVC 框架会被用于传统的服务器端 MVC 框架（如 PHP 的 Zend、Ruby on Rails 或 Python）吗？

我就是不明白！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T21:59:07.353

如果有人禁用 JavaScript，整个 Internet 都会为该用户中断。所以，不，BackboneJS 和 Angular 和 Ember 等其他框架正在推动我们前进，它们采用了过去为片段和愚蠢动画保留的浏览器语言，并允许我们以协作友好的方式组织它，以实现可扩展的用户友好应用程序。

在客户端上保持尽可能多的负载是 JS 应用程序真正闪耀的地方。没有必要强迫用户与您的服务器建立不必要的 http 连接，并让您的服务器在没有相同结果的情况下完成工作。

# php - 将 Windows 8 应用程序与 Apache 服务器连接：（Windows 8 中的后台传输）

> ID：14821610
> 
> 赞同：0
> 
> 时间：2013-02-11T21:56:33.310
> 
> 标签：php, windows, web-services, apache, upload

在 Windows 商店应用程序上上传文件时遇到一些问题。我得到了状态 200，但是当我检查服务器时没有上传文件..我使用的是 apache 服务器，我检查了 Microsoft[后台传输示例](http://code.msdn.microsoft.com/windowsapps/Background-Transfer-Sample-d7833f61/)的示例，但它适用于 ASP .Net 服务器。

任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:12:35.820

我需要一次上传一个文件，它对我有用，请告诉我：

**上传.php：**

```
<?php
    $target = "data/"; 
    $target = $target . basename( $_FILES['Filename']['name']) ; 
    if(move_uploaded_file($_FILES['Filename']['tmp_name'], $target)) 
    {
    echo "The file ". basename( $_FILES['Filename']['name']). " has been uploaded";
    } 
    else {
    echo "Sorry, there was a problem uploading your file.";
    }       
?> 
```

**C#代码：**

```
 private async void StartMultipartUpload_Click(object sender, RoutedEventArgs e)
    {
        Uri uri;
        if (!Uri.TryCreate(serverAddressField.Text.Trim(), UriKind.Absolute, out uri))
        {
            rootPage.NotifyUser("Invalid URI.", NotifyType.ErrorMessage);
            return;
        }

        // Verify that we are currently not snapped, or that we can unsnap to open the picker.
        if (ApplicationView.Value == ApplicationViewState.Snapped && !ApplicationView.TryUnsnap())
        {
            rootPage.NotifyUser("File picker cannot be opened in snapped mode. Please unsnap first.", NotifyType.ErrorMessage);
            return;
        }

        FileOpenPicker picker = new FileOpenPicker();
        picker.FileTypeFilter.Add("*");
        IReadOnlyList<StorageFile> files = await picker.PickMultipleFilesAsync();

        if (files.Count == 0)
        {
            rootPage.NotifyUser("No file selected.", NotifyType.ErrorMessage);
            return;
        }

        List<BackgroundTransferContentPart> parts = new List<BackgroundTransferContentPart>();
        for (int i = 0; i < files.Count; i++)
        {
            BackgroundTransferContentPart part = new BackgroundTransferContentPart("Filename", files[i].Name);
            part.SetFile(files[i]);
            parts.Add(part);
        }

        BackgroundUploader uploader = new BackgroundUploader();
        UploadOperation upload = await uploader.CreateUploadAsync(uri, parts);

        String fileNames = files[0].Name;
        for (int i = 1; i < files.Count; i++)
        {
            fileNames += ", " + files[i].Name;
        }

        Log(String.Format("Uploading {0} to {1}, {2}", fileNames, uri.AbsoluteUri, upload.Guid));

        // Attach progress and completion handlers.
        await HandleUploadAsync(upload, true);
    } 
```

我使用了 SDK 示例的相同代码。*data/*文件夹位于**upload.php**的同一文件夹中，我的 Uri 是`http://mySite/myApp/upload.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:17:14.487

好的，所以我找到了一个完整的解决方案。基本上你需要在你的 SDK 示例上作为**多部分**上传（不管它是 C# 还是 C++），关键是 php 文件。这是我处理所有选定文件的 PHP 文件。作为魅力！此外，如果您收到错误 1，则意味着您的 php.ini 中的最大文件上传大小太小！所以也要注意这一点。希望它有所帮助，我确实花了一些精力来完成这项工作。

```
<?php

$myFile = "testFile.txt";
$fh = fopen($myFile, 'w') or die("can't open file");

foreach ($_FILES as $name) {
    if ($_FILES[$name]["error"] > 0){
        fwrite($fh, "Error: " . $_FILES[$name]['error'] . " on file: " . $_FILES[$name]['name']); // log the error
    }
    $target = "data/"; 
    $target = $target . basename( $_FILES[$name]['name']) ; 
    if(move_uploaded_file($_FILES[$name]['tmp_name'], $target)) 
    {
        echo "The file ". basename( $_FILES[$name]['name']). " has been uploaded"; // succes, do whatever you want
    } 
    else {
        fwrite($fh, "File movement error on file: " . $_FILES[$name]['name']); // log the error
    }       
}

fclose($fh); 
```

?>

# php - PHP display_errors = 0 不被尊重

> ID：14821613
> 
> 赞同：4
> 
> 时间：2013-02-11T21:56:36.397
> 
> 标签：php, warnings, ini-set

我正在使用 CodeIgniter，并且在 index.php 中添加了以下几行：

```
error_reporting(E_ALL ^ E_NOTICE); 
ini_set('display_errors', 0);
ini_set('log_errors', 1);
ini_set('error_log', $_SERVER['DOCUMENT_ROOT'] . '/php_errors.log'); 
```

然而，出于某种原因，PHP 总是显示警告/错误，而不是在可写目录中创建日志。我知道上面的代码被点击了，因为如果我删除“^ E_NOTICES”部分并重新提交，我会看到大量的通知。我还在上面的代码之后抛出了一个 die() 语句来验证它是否被命中。最后，我对整个代码库进行了 grep，以验证代码后面没有使用“display_errors”，覆盖了我的值 0。

还有什么我可能会丢失的东西阻止我停止显示错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:12:53.953

您应该在 CodeIgniter 源中搜索“set_error_handler”。看起来他们的错误处理程序尊重`error_reporting`设置而不是`display_errors`设置，这是一个常见的错误。另请参阅：[自定义 PHP 错误处理程序是否尊重 PHP 配置？](https://stackoverflow.com/questions/5699930/does-a-custom-php-error-handler-respect-php-configuration/5700117#5700117)

# java - 提取FirstSuccessful路由消息处理器中不成功的消息处理器抛出的异常

> ID：14821615
> 
> 赞同：1
> 
> 时间：2013-02-11T21:56:43.287
> 
> 标签：java, exception, routing, mule

我正在解决如下故障安全方案。

但是在恢复流中，我无法获取由于 subflow1 或 subflow2 失败而发生的异常或 exceptionPayload。

有什么办法可以让第一个成功的路由处理器中不成功的消息处理器抛出异常。

我查看了 Mule`FirstSuccessful`类代码。从其中的循环中，我可以看到异常被捕获但未保存。

有没有一种方法可以扩展并拥有自己的第一次成功，这也可以为我提供例外？

```
<flow name="main_flow" >
    ....
    ....
    <first-successful>
        <flow-ref  name="subflow_1" />
        <flow-ref  name="recoveryFlow1" />
    </first-successful>
    ....
    ....
    <first-successful>
        <flow-ref  name="subflow_2" />
        <flow-ref  name="recoveryFlow2" />
    </first-successful>
    ....
    ....
</flow>

<sub-flow name="subflow_1">
    ....
    ....
    <out-bound call to web-service />
    ....
    ....
</sub-flow>

<sub-flow name="subflow_2">
    ....
    ....
    <out-bound call to web-service />
    ....
    ....
</sub-flow>

<sub-flow name="revoceryFlow1" >
    <process communication based on the exception thrown by previous unsuccessful sub-flow 1>
    <some more processing so that the remaining main flow is not impacted because of the failue of the subflow 1  >
</sub-flow>

<sub-flow name="revoceryFlow2" >
    <process communication based on the exception thrown by previous unsuccessful sub-flow 2>
    <some more processing so that the remaining main flow is not impacted because of the failue of the subflow 2 >
</sub-flow> 
```

请告知我是否走错了方向。有比我更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:58:12.867

我得到了解决方案。骡子没有直接的解决方案。我已经覆盖了 FirstSuccessful 行为并添加了带有异常详细信息的属性。然后在第一次成功的消息处理器中访问这些属性。

```
catch (Exception ex)
        {
            event.getMessage().setProperty("prevError",  ex.getMessage()  , PropertyScope.INVOCATION);
            event.getMessage().setProperty("prevErrorClass",  ex.getClass()  , PropertyScope.INVOCATION);
            failed = true;
        } 
```

# php - php imgcopyresampled - 更改缩略图的宽度

> ID：14821620
> 
> 赞同：2
> 
> 时间：2013-02-11T21:57:06.970
> 
> 标签：php

我正在使用缩略图脚本，我只能找到 imagecopyresampled 来复制我的图像的一部分并从中制作一个方形缩略图。

对于一个特定的缩略图，我希望宽度大于高度，因为我想采用这种新布局：

![在此处输入图像描述](../Images/537a8f273a9a662889ece0e03489a558.png)

这是我现在拥有的，对于最新的艺术品部分来说宽度太小了：

![在此处输入图像描述](../Images/b90ba59e02d380200dbbb3b1e25b5bd2.png)

我想我可以通过增加宽度来实现这一点，`imagecopyresampled($tmp_img, $img, 0, 0, 0, 0, $new_width+100, $new_height, $width, $height);`......这只会拉伸图像，但保持缩略图框架：

![在此处输入图像描述](../Images/f7c828b10e72a21cf797a64a73387a32.png)

**这就是我想要的……**框架在宽度上更大，所以我在里面放了更多的图像。

![在此处输入图像描述](../Images/139e679d1fab0c7be21078ca90083472.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:05:43.947

根据 imagecopyresampled 的 PHP 文档：

`bool imagecopyresampled ( resource $dst_image , resource $src_image , int $dst_x , int $dst_y , int $src_x , int $src_y , int $dst_w , int $dst_h , int $src_w , int $src_h )`

当从一个纵横比转换到另一个纵横比而不进行裁剪或智能放置时，您将始终拉伸图像，这是不可避免的。如果您不太关心拉伸（或者如果您毕竟没有改变纵横比，那么您的问题就不清楚了），那么这里与我的做法类似。

```
function resize($width,$height,$data) {
       $new_image = imagecreatetruecolor($width, $height);
       imagecopyresampled($new_image, $data, 0, 0, 0, 0, $width, $height,      imagesx($data), imagesy($data));
       $data = $new_image;
    } 
```

# .net - 什么 ECC 证书适用于以下 PKCS7/CMS 代码？

> ID：14821625
> 
> 赞同：4
> 
> 时间：2013-02-11T21:57:12.720
> 
> 标签：.net, encryption, cryptography, pkcs#7, elliptic-curve

我们正在使用 PKCS#7 / CMS 数据格式标准来加密/解密/签名/验证敏感负载。目前，我们正在为我们的 PKCS7 / CMS 及其罚款使用 2048 和 4096 位 RSA 证书（和密钥）（请参阅下面的 RSA 工作代码）。

我们希望添加对 ECC（特别是 secp521 曲线）的支持，但 .NET 4.5 对 ECC 的支持参差不齐，尽管它是[NSA 套件 B](http://www.nsa.gov/ia/programs/suiteb_cryptography/index.shtml)的唯一 PKI 算法（尽管在 256 和 384 主要模数）。

**问题**

> 我可以使用哪些与 .NET 4.5 和以下代码兼容的 EC 证书 + 密钥（可能进行一些编辑）？我正在寻找特定的曲线，事实上，通过 OpenSSL（或其他常见或免费工具）创建证书 + 密钥会得到一个非常具体的答案，我们将不胜感激！

RSA -4096 证书 + 密钥的有效**简化代码**

```
public byte[] Encrypt(byte[] plainBytes, X509Certificate2 recipientCert)
{
    // create ContentInfo
    ContentInfo plainContent = new ContentInfo(plainBytes);

    // EnvelopedCms represents encrypted data
    //Oid encryptAlgoOid = new Oid("2.16.840.1.101.3.4.1.46"); // AES-256-GCM, .NET doesn't have it :(
    Oid encryptAlgoOid = new Oid("2.16.840.1.101.3.4.1.42"); // AES-256-CBC
    EnvelopedCms encryptedData = new EnvelopedCms(plainContent, new AlgorithmIdentifier(encryptAlgoOid));

    // add a recipient
    CmsRecipient recipient = new CmsRecipient(recipientCert);

    // encrypt data with public key of recipient
    encryptedData.Encrypt(recipient);

    // create PKCS #7 byte array
    byte[] encryptedBytes = encryptedData.Encode();

    // return encrypted data
    return encryptedBytes;
} 
```

**使用 ECC 证书 + 密钥时的**异常****

 **```
System.Security.Cryptography.CryptographicException: Unknown error "-1073741637".
   at System.Security.Cryptography.Pkcs.EnvelopedCms.EncryptContent(CmsRecipientCollection recipients)
   at System.Security.Cryptography.Pkcs.EnvelopedCms.Encrypt(CmsRecipientCollection recipients)
   at System.Security.Cryptography.Pkcs.EnvelopedCms.Encrypt(CmsRecipient recipient) 
```

RSA -4096 证书 + 密钥的有效**简化代码**

```
public byte[] Sign(byte[] data, X509Certificate2 signingCert)
{
    // create ContentInfo
    ContentInfo content = new ContentInfo(data);

    // SignedCms represents signed data
    SignedCms signedMessage = new SignedCms(content, detached:true)

    // create a signer
    CmsSigner signer = new CmsSigner(signingCert);

    // sign the data
    signedMessage.ComputeSignature(signer);

    // create PKCS #7 byte array
    byte[] signedBytes = signedMessage.Encode();

    // return signed data
    return signedBytes;
} 
```

**使用 ECC 证书 + 密钥时的**异常****

 **```
System.Security.Cryptography.CryptographicException: Invalid provider type specified.
   at System.Security.Cryptography.Pkcs.PkcsUtils.CreateSignerEncodeInfo(CmsSigner signer, Boolean silent)
   at System.Security.Cryptography.Pkcs.SignedCms.Sign(CmsSigner signer, Boolean silent)
   at System.Security.Cryptography.Pkcs.SignedCms.ComputeSignature(CmsSigner signer, Boolean silent)
   at System.Security.Cryptography.Pkcs.SignedCms.ComputeSignature(CmsSigner signer) 
```

**创建 ECC 证书**

我正在使用[以下批处理文件](https://gist.github.com/sidshetye/4759690)来生成我的 ECC 证书，其中一个有代表性的片段是

```
openssl ecparam -out test-ecparams.pem -name secp521r1
openssl req -newkey ec:test-ecparams.pem -sha512 -keyout test-key.pem -keyform PEM -out test-csr.pem -outform PEM -subj '/C=US/CN=ECC-cert-test' 
openssl x509 -req -days 365 -in test-csr.pem -signkey test-key.pem -out test-cert.pem -sha512 
openssl pkcs12 -export -aes256 -out test.pfx -in test-cert.pem -inkey test-key.pem -name "ECC-cert-test-friendlyname" 
```

**额外细节**

如果您不想（重新）根据上述链接的批处理文件创建证书，这里是证书的转储通过 `openssl asn1parse -in test-cert.pem -i -dump`

```
 0:d=0  hl=4 l= 450 cons: SEQUENCE          
    4:d=1  hl=4 l= 291 cons:  SEQUENCE          
    8:d=2  hl=2 l=   9 prim:   INTEGER           :ECEA16A0348AEAE1
   19:d=2  hl=2 l=  10 cons:   SEQUENCE          
   21:d=3  hl=2 l=   8 prim:    OBJECT            :ecdsa-with-SHA512
   31:d=2  hl=2 l=  37 cons:   SEQUENCE          
   33:d=3  hl=2 l=  11 cons:    SET               
   35:d=4  hl=2 l=   9 cons:     SEQUENCE          
   37:d=5  hl=2 l=   3 prim:      OBJECT            :countryName
   42:d=5  hl=2 l=   2 prim:      PRINTABLESTRING   :US
   46:d=3  hl=2 l=  22 cons:    SET               
   48:d=4  hl=2 l=  20 cons:     SEQUENCE          
   50:d=5  hl=2 l=   3 prim:      OBJECT            :commonName
   55:d=5  hl=2 l=  13 prim:      UTF8STRING        :ECC-cert-test
   70:d=2  hl=2 l=  30 cons:   SEQUENCE          
   72:d=3  hl=2 l=  13 prim:    UTCTIME           :130212015455Z
   87:d=3  hl=2 l=  13 prim:    UTCTIME           :140212015455Z
  102:d=2  hl=2 l=  37 cons:   SEQUENCE          
  104:d=3  hl=2 l=  11 cons:    SET               
  106:d=4  hl=2 l=   9 cons:     SEQUENCE          
  108:d=5  hl=2 l=   3 prim:      OBJECT            :countryName
  113:d=5  hl=2 l=   2 prim:      PRINTABLESTRING   :US
  117:d=3  hl=2 l=  22 cons:    SET               
  119:d=4  hl=2 l=  20 cons:     SEQUENCE          
  121:d=5  hl=2 l=   3 prim:      OBJECT            :commonName
  126:d=5  hl=2 l=  13 prim:      UTF8STRING        :ECC-cert-test
  141:d=2  hl=3 l= 155 cons:   SEQUENCE          
  144:d=3  hl=2 l=  16 cons:    SEQUENCE          
  146:d=4  hl=2 l=   7 prim:     OBJECT            :id-ecPublicKey
  155:d=4  hl=2 l=   5 prim:     OBJECT            :secp521r1
  162:d=3  hl=3 l= 134 prim:    BIT STRING        
      0000 - 00 04 00 3b b5 16 53 81-4a e5 40 3e c3 43 6f 09   ...;..S.J.@>.Co.
      0010 - 19 22 6f f2 45 81 71 41-3f 75 1e 89 74 a0 2a eb   ."o.E.qA?u..t.*.
      0020 - 8b d5 c5 1e 9c 50 6b 2e-2d 3c 69 da 5b 91 55 71   .....Pk.-<i.[.Uq
      0030 - 46 8e ef a7 b2 13 ad e0-9c 26 6d 99 6b d3 42 e1   F........&m.k.B.
      0040 - 3d 7a 21 2c 01 be 7b e8-43 c0 c0 79 ef 1e f4 4d   =z!,..{.C..y...M
      0050 - 7d 7d 52 56 30 17 57 2a-96 05 57 64 7d 8a e1 7a   }}RV0.W*..Wd}..z
      0060 - 3a 40 ff cd d6 03 e0 a2-00 3b 16 a9 26 91 d3 e9   :@.......;..&...
      0070 - d2 d9 db 5e 7f 00 7a ba-61 d3 8b b5 9f c2 8e ba   ...^..z.a.......
      0080 - ef 16 e9 c6 b9 47                                 .....G
  299:d=1  hl=2 l=  10 cons:  SEQUENCE          
  301:d=2  hl=2 l=   8 prim:   OBJECT            :ecdsa-with-SHA512
  311:d=1  hl=3 l= 140 prim:  BIT STRING        
      0000 - 00 30 81 88 02 42 01 53-a8 eb 32 30 84 b6 80 ab   .0...B.S..20....
      0010 - 12 f2 03 2a fb 39 f6 3b-72 54 6e 1b 48 cd 52 0e   ...*.9.;rTn.H.R.
      0020 - a7 64 96 02 52 75 5d bc-5d 85 65 b1 a4 f1 05 1b   .d..Ru].].e.....
      0030 - 7b 9c 5d 7b e2 b3 21 88-f4 f3 d8 04 7f 45 68 ac   {.]{..!......Eh.
      0040 - f3 77 7a fa ff 12 17 fc-02 42 01 8f ab 6d 0a fb   .wz......B...m..
      0050 - dd 70 37 f4 53 03 91 13-97 63 3e 77 37 78 86 e4   .p7.S....c>w7x..
      0060 - e7 4f 1c 06 51 99 2a e0-0b c1 6c ea 44 bd b2 41   .O..Q.*...l.D..A
      0070 - 78 be 67 b6 00 74 fd b2-4d 11 2e a6 58 2e b5 02   x.g..t..M...X...
      0080 - 77 ef 98 b2 ca be 68 b1-d3 27 e2 fb               w.....h..'.. 
```

PS：我之前问过一个问题，试图反过来解决问题；在[通过 BouncyCastle 进行 ECC PKCS7/CMS 时](https://stackoverflow.com/questions/14697469/bouncycastle-ecc-decrypt-aes-keys-off-windows-store-certificates-using-elliptic)，得到的拥抱和仙人掌一样多。这个问题采用了一种截然不同的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-26T20:30:21.117

值得注意的是 TLS 密码套件与 CMS 的关系不是很密切（注意 CMS 的[RFC 没有提及 TLS](https://www.rfc-editor.org/rfc/rfc5652)），所以如果您打算使用 CMS，那么查看 OpenSSL 支持的 TLS 密码套件列表可能不会是正确的地方看。

此外，由于没有 SHA-128，因此使用`ecdsa-with-SHA128`似乎是一项壮举。`ecdsa-with-SHA256`实际上可能是一个更好的起点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-05T19:27:22.940

您的组合：ecdsa-with-SHA512 不是最好的主意 :-) 请改用 ecdsa-with-SHA128。如果它有效，您可以增加到 ecdsa-with-SHA256。

[您是否已经查看过关于椭圆曲线 Diffie-Hellman](http://blogs.msdn.com/b/shawnfa/archive/2007/01/22/elliptic-curve-diffie-hellman.aspx)的 MSDN 博客？

您应该考虑不使用 .NET 默认加密库；最好尝试使用[OpenSSL](http://openssl.org/)和[.NET/OpenSSL Wrapper](http://sourceforge.net/projects/openssl-net/?source=navbar)。

In Detail: OpenSSL provides a list of cyphers: Open SSL ECC TLS 1.2 Cyphers: - TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 ECDH-ECDSA-AES128-SHA256 - TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384 ECDH-ECDSA-AES256-SHA384 - TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256 ECDH-ECDSA-AES128-GCM-SHA256 - TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384 ECDH- ECDSA-AES256-GCM-SHA384

如果您选择 TLS 1.1，列表会发生变化！

.NET 4.5 Cyphers：有点隐藏，并且列表不独立于您的操作系统库：查看类和椭圆曲线数字签名算法 (ECDSA) 类的属性：[MSDN ECDSA](http://msdn.microsoft.com/en-us/library/system.security.cryptography.ecdsa%28v=vs.110%29.aspx)

所以现在只需选择一个工作组合。****

# c# - 检测来电 iphone 5

> ID：14821627
> 
> 赞同：6
> 
> 时间：2013-02-11T21:57:18.073
> 
> 标签：c#, iphone, winforms

我有一个关于在 C# 中创建 Winforms 应用程序的可能性的问题，该应用程序能够检测 iPhone 上的来电。

这是场景：

*   iphone通过USB线连接到电脑。
*   每当电话响起时，我都希望能够执行以下操作：
    1.  找回电话号码。
    2.  使用 winforms 应用程序中的电话号码来搜索 xml 文件管理器。
    3.  通过应用程序接听电话并播放自动语音消息。

这在 C# 中甚至可能吗？如果是这样，如何做到这一点，是否有任何设计用于使用 C# 与 iphone 交互的库？

谢谢并恭祝安康。

安德斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:04:30.213

没有 SDK 允许您开发与 iPhone 进行外部交互的 .NET 应用程序。

如果您想编写一个 iPhone 应用程序，但对学习曲线感到害怕，您可以查看[MonoTouch](https://stackoverflow.com/questions/8153267/do-we-have-net-sdk-for-iphone)。它允许您使用 C# 编写 iPhone\Android 应用程序。

# python - 在 Python 中递归遍历树

> ID：14821630
> 
> 赞同：0
> 
> 时间：2013-02-11T21:57:31.380
> 
> 标签：python, recursion

我要为自定义系统发育树类实现一个长度方法，以便我们可以在其上调用 len(TreeObject)。一棵树的长度取决于它有多少叶子。叶表示该节点没有子节点。'self.children' 等于该节点子节点的元组（节点，权重）列表。我非常接近我相信：

```
 def __len__(self):

# everytime it reaches the base case I should add 1
    if self.isLeaf():
        print('base case - reached leaf!')
        return 1

    for t,w in self.children:  
        print('not leaf so sent through loop')
        numLeaves = len(t)

    return numLeaves 
```

代码以正确的次数到达 if 语句，例如，如果长度为 3，则输出“基本情况 - 到达叶子！” 3次分开。我只需要一种将它们加在一起并将其存储在变量中的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:04:32.173

确实非常接近。您只是在覆盖`numLeaves`而不是对它们求和：

```
numLeaves = 0
for t,w in self.children:  
    print('not leaf so sent through loop')
    numLeaves += len(t) 
```

它也可以以不同的方式实现：

```
sum(len(t) for (t,w) in self.children) 
```

# javascript - d3.js - 确定嵌套深度（或孩子的孩子）

> ID：14821633
> 
> 赞同：1
> 
> 时间：2013-02-11T21:57:33.547
> 
> 标签：javascript, svg, d3.js, nested, depth

我有一个数据可视化，它目前根据对象是否有孩子为对象提供一个类，如下所示：

```
d3.json("skills.json", function(error, root) {
  var node = svg.datum(root).selectAll(".node")
    .data(pack.nodes)
    .enter().append("g")
    .attr("class", function(d) { return d.children ? "node" : "leaf node"; }) 
```

我想做的是根据他们的深度给他们一个不同的班级，或者至少根据他们是否有孩子的孩子，基本上像这样（虽然我不确定语法）：

```
.attr("class", function(d) { return d.children.children ? "node" ? d.children ? "branch" : "leaf node"; }); 
```

有谁知道这样做的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:10:48.563

您可以使用[array.some](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)查看当前节点的任何子节点是否有子节点。

```
node.attr("class", function(d) {
  return d.children ? (d.children.some(function(c) { return c.children; })
      ? "grandparent" 
      : "parent")
      : "child";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T02:59:54.683

D3.js API 包含一个未记录的方法`d.depth`，该方法从根开始跟踪节点的深度。

# iphone - 将应用程序更新到最新版本后文件不再可读

> ID：14821638
> 
> 赞同：1
> 
> 时间：2013-02-11T21:57:58.933
> 
> 标签：iphone, ios, objective-c, ipad, cocoa-touch

我一直在为 iPad 开发企业分布式应用程序大约一年。我们在那段时间发布了 5 个生产版本，从未遇到任何问题。每次我们的用户在旧版本上安装新版本时，我们的核心数据迁移总是运行良好。直到我们将视频录制添加到应用程序中。

我们一直将“媒体”存储在 Core Data Externally Managed 数据类型中。在我们开始允许用户创建大型视频之前，这一直很好。因此，我们随后发现 Core Data 迁移会丢弃任何超过 5mb 的文件。在这一点上，我们推出了自己的文件管理方案。这非常好，我们编写了我们自己的手动将文件从 Core Data 迁移到我们自己的方案中。这是毫无问题地发布的。

然后，当需要推出我们的下一组功能时，突然出现了一个问题。从 Xcode 构建时从来没有任何问题......但是，在使用 Enterprise Deployment 重新部署之后，在之前的构建中写入文件系统的任何文件突然变得不可读。如果将设备插入 XCode，则文件在 Organizer 中清晰可见。但是 NSFileManager/NSFileHandle/NSData 找不到文件。他们总是报告说他们经历过：

```
error: {
    NSFilePath = "/var/mobile/Applications/3CFB07B3-D17F-45D7-A233-4E56930D794C/Documents/ep_binary_data/9465C282-7ED2-428E-B7D3-545BCFE4DFC5";
    NSUnderlyingError = "Error Domain=NSPOSIXErrorDomain Code=2 \"The operation couldn\U2019t be completed. No such file or directory\"";
} 
```

就像我说的，我可以使用 XCode Organizer 验证文件确实存在于该路径中。任何帮助将不胜感激。我整天都在把头从桌子上敲下来，试图弄清楚这一点。

用于读取的代码如下所示：

```
NSError *err = nil;
NSData *data = [[NSData alloc] initWithContentsOfFile:self.thumbnail_url 
                                              options:NSDataReadingMappedIfSafe 
                                                error:&err];
if (err != nil) logger(@"error: %@",[err userInfo]); 
```

并写：

```
NSError *error = nil;
[thumbnail_ep_managed writeToFile:filePath options:NSDataWritingAtomic error:&error];
if(error != nil)
{
    NSLog(@"error writing file to path: %@\nerror: %@",filePath,[[error userInfo]description]);
} 
```

**我很难过**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:22:58.013

我在SomethingAwful 的一些Goons 的帮助下找到了解决方案。问题是我存储的是完整路径，就像包含文档目录一样。这是 iOS 设备上的错误。您不能保证升级后捆绑路径仍然相同。

有时，捆绑标识符（应用程序安装在其中的目录的名称），它是一个散列，在升级应用程序时会更改。因此，如果您存储完整路径，升级可能会破坏存储的路径。解决方案是只保留一个相对路径，从文档目录开始。

然后，当您启动应用程序时，缓存文档目录，并附加您的持久相对路径。

所以从我原来的路径：

```
/var/mobile/Applications/3CFB07B3-D17F-45D7-A233-4E56930D794C/Documents/ep_binary_data/9465C282-7ED2-428E-B7D3-545BCFE4DFC5 
```

这部分可以改变：

```
3CFB07B3-D17F-45D7-A233-4E56930D794C 
```

所以我应该只存储：

```
ep_binary_data/9465C282-7ED2-428E-B7D3-545BCFE4DFC5 
```

并抓住：

```
/var/mobile/Applications/3CFB07B3-D17F-45D7-A233-4E56930D794C/Documents/ 
```

应用程序启动部分。

瞧，文件继续工作。:)

# jquery - 从表中的调用元素中选择第三个

> ID：14821641
> 
> 赞同：0
> 
> 时间：2013-02-11T21:58:08.397
> 
> 标签：jquery, html-table

我知道这可能很容易，但我无法弄清楚。我需要创建级联选择框，但我不知道如何引用距离调用选择超过 3 的目标选择框。我试过了：

```
$(this).next().next().next().html(data) 
```

但这不起作用。我怀疑这与父母的孩子有关。

编辑：这是 HMTL

```
<table id="invoiceTable">
<tr>
    <th></th>
    <th class="productColumn">Product</th>
    <th class="lotColumn">Lot #</th>
    <th class="wheelColumn">Wheel #</th>
    <th class="packageType">Pkg Type</th>
    <th class="quantityField">Weight</th>
    <th class="priceColumn">Price</th>
    <th class="subTotalColumn">Subtotal</th>
    <th class="soldOut">Sold Out</th>
</tr>
<?php
if(!$newInvoice){ $rowNum = 0;
    foreach($details as $detail){ /* @var $detail Creamery_Invoice_details */?>

<tr>
    <td><button type="button" class="delete">D</button></td>
    <td class="productColumn">

        <select name="productInputName[]" class="productSelect" id="cheeseName">
            <option></option>

        </select>

    </td>

    <td>
        <select name="lotNumber[]" class="lotNumber" >
            <option value=0>Lot #</option>

        </select>
    </td>
    <td>
        <select name="wheelNumber[]" class="wheelNumber">
            <option value=0>Wheel</option>

                </select>

            </td>

            <td>
            <select name="packageType[]" class="packageType">
            <option value=0>Pkg Type</option>

        </select>
    </td>

    <td class="quantityField"><input name="quantity[]" type="number"> <?php echo ' value="',$detail->getQuantity(),'"';   ?>></td>
    <td class=priceField><input name="price[]" type="number" step="any">

    </td>
    <td class="subtotalField"><input type="number" step="any" readonly="readonly"></td>
    <td class="soldOut"><input type="checkbox" name="soldOut[]" <?php if($detail->getSoldOut()){echo 'checked="checked"';} ?> ></td>

</tr> 
```

编辑 2：我只是想补充一点，以防其他人遇到这个问题，`$(this).whatever`因为它在 ajax 调用中，所以我需要这样做：

```
$(".productSelect").change(function(){
    var product = this;
    $.get("/path to php file", 'type='+$(this).val(),function(data){
        $(product).closest('tr').find('.lotNumber').html(data);
    })
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:09:09.010

您可以使用第 3 个选择的类，`productSelect`其中 is `packageType`。

见下文，

```
$(this).closest('tr').find('.packageType').html(data) 
```

# java - 是否有任何已知的代表公司的 Java 类包？

> ID：14821642
> 
> 赞同：0
> 
> 时间：2013-02-11T21:58:09.260
> 
> 标签：java, data-modeling, organization

好奇是否有任何预先构建的、众所周知的/标准的数据模型来代表 Java 中的大型公司。显示层次结构以及“虚线”类型关系以及角色的东西。试图避免重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:59:12.203

简单的答案：没有这样的内置数据模型。

使用图进行建模（图节点具有名称和角色）并不是最难的部分。当您想要一个自动布局以使公司图表适合页面时，它变得更加困难。

您可以搜索 Open Source UML Diagramms 如何显示其内容，以及它们是否使用图形库。

# objective-c - Game Center 回合制比赛数据未保存和/或读取

> ID：14821643
> 
> 赞同：2
> 
> 时间：2013-02-11T21:58:12.810
> 
> 标签：objective-c, ios6, game-center

我正计划开发一款回合制游戏，并试图了解如何与 Game Center 通信以及发送和接收马赫数数据。我已经阅读了它并测试了几天，但无法让它按计划工作。

我尝试用下面的代码做的唯一一件事就是能够保存然后读取马赫数据。我正在使用两个沙盒游戏中心帐户进行回合。

轮流通过按“endTurn”按钮发送相同的数据。每次我运行实际用户都经过身份验证并且应用程序设置正确（我相信）。

这是一个测试应用程序，除了测试我所说的之外没有任何其他目的。下面是我用于匹配数据处理的代码。

我真的很感激任何关于我可能做错的想法和提示。在我开始认真测试之前，我确实发布了一个类似的问题，但这并没有解决这个问题，[https://stackoverflow.com/questions/14447392/start-gamecenter-turn-based-match-and-initiate-match-data-for -非常第一次](https://stackoverflow.com/questions/14447392/start-gamecenter-turn-based-match-and-initiate-match-data-for-the-very-first-tim)。

我也尝试捕捉参与者但没有成功，这可能意味着它是处理完成处理程序时的问题。

```
-(IBAction)endTurn:(id)sender {

[_gameDictionary setObject:@"The Object" forKey:@"The Key"];
NSLog(@"_gameDictionary: %@", _gameDictionary);

NSData *data = [NSPropertyListSerialization dataFromPropertyList:_gameDictionary format:NSPropertyListXMLFormat_v1_0 errorDescription:nil];

GKTurnBasedParticipant *nextPlayer;

if (_match.currentParticipant == [_match.participants objectAtIndex:0]) {
    nextPlayer = [[_match participants] lastObject];
} else {
    nextPlayer = [[_match participants]objectAtIndex:0];
}

NSLog(@"_match.currentParticipant: %@", _match.currentParticipant);

[self.match endTurnWithNextParticipant:nextPlayer matchData:data completionHandler:^(NSError *error) {
    if (error) {
        NSLog(@"An error occured updating turn: %@", [error localizedDescription]);
    }
    [self.navigationController popViewControllerAnimated:YES];
}];

}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad {

[super viewDidLoad];

_gameDictionary = [[NSMutableDictionary alloc]init];

[self.match loadMatchDataWithCompletionHandler:^(NSData *matchData, NSError *error) {
    NSDictionary *myDict = [NSPropertyListSerialization propertyListFromData:_match.matchData mutabilityOption:NSPropertyListImmutable format:nil errorDescription:nil];
    [_gameDictionary addEntriesFromDictionary: myDict];

    if (error) {
        NSLog(@"loadMatchData - %@", [error localizedDescription]);
    }
}];

NSLog(@"_gameDictionary: %@", _gameDictionary);

} 
```

输出：

```
"gk-cdx" = "17.173.254.218:4398";
"gk-commnat-cohort" = "17.173.254.220:16386";
"gk-commnat-main0" = "17.173.254.219:16384";
"gk-commnat-main1" = "17.173.254.219:16385";
}
2013-02-11 22:44:11.707 GC_test1[8791:14f03] _gameDictionary: {
}
2013-02-11 22:44:13.894 GC_test1[8791:14f03] _gameDictionary: {
The Object = The Key;
}
2013-02-11 22:44:13.894 GC_test1[8791:14f03] _match.currentParticipant: (null) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:36:02.923

`_match.currentParticipant`评估为的事实`nil`令人不安。我怀疑它`_match`从未被初始化，或者是`nil`，或者它不是从游戏中心设施获得的，例如`loadMatchesWithCompletionHandler:`，`GKTurnBasedMatchmakerViewController`或使用`findMatchForRequest:withCompletionHandler:`。

对于新比赛，如果通过这些设施中的任何一个创建，`currentParticipant`将保证代表本地玩家。不允许您`GKTurnBasedMatch`自己实例化 a 。

为了至少在测试中解决此问题，您可以`_match`从`findMatchForRequest:withCompletionHandler:`. 只有这样你才能被允许按下你的测试按钮。

# objective-c - 无法通过 Bonjour 发送位图

> ID：14821645
> 
> 赞同：0
> 
> 时间：2013-02-11T21:58:28.807
> 
> 标签：objective-c, nsmutablearray, nskeyedarchiver

我通过 Bonjour 发送了一个 NSMutableArray

```
- (void)sendArtwork {
    NSMutableArray *dataArray = [[NSMutableArray alloc] init];
    NSData *imageData = [self PNGRepresentationOfImage:[bHelp getArtwork:[playerPref selectedRow]]];
    [dataArray addObject:songString];
    [dataArray addObject:artistString];
    [dataArray addObject:imageData];
    NSData *finalData = [NSKeyedArchiver archivedDataWithRootObject:dataArray];
    [self.server sendData:finalData error:nil];
}

- (NSData *)PNGRepresentationOfImage:(NSImage *)image {
    [image lockFocus];
    NSBitmapImageRep *bitmapRep = [[NSBitmapImageRep alloc] initWithFocusedViewRect:NSMakeRect(0, 0, image.size.width, image.size.height)];
    [image unlockFocus];

    return [bitmapRep representationUsingType:NSJPEGFileType properties:nil];
} 
```

然后接收并取消归档

```
NSMutableArray *dataArray = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

此代码在模拟器中完美运行。但是一旦我在我的设备上运行，解压器就会抛出这个错误。

`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSKeyedUnarchiver initForReadingWithData:]: incomprehensible archive (0x62, 0x70, 0x6c, 0x69, 0x73, 0x74, 0x30, 0x30)'`

如果我不发送`imageData`可变数组，我不会在设备上收到错误消息。我正在使用 Bill [Dudney 的 iOS 示例](http://bill.dudney.net/roller/objc/resource/NetworkingTesting.zip)和 Brad Larson 的[Mac 示例](http://www.sunsetlakesoftware.com/sites/default/files/MacNetworkingTesting.zip)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:38:48.163

根据我对 Bonjour 的了解，您可以发送任意数据，但是当您阅读它时，您不会直接获得 NSData 对象。我会把这个问题作为参考：

[Cocoa Touch Bonjour如何处理NSNetService地址和uint8_t](https://stackoverflow.com/questions/6721068/cocoa-touch-bonjour-how-to-deal-with-nsnetservice-addresses-and-uint8-t)

因此，当您读取数据时，您将构建一个 NSData 对象，如下所示：

```
NSData* data = [NSData dataWithBytes: buffer length: actuallyRead];
//                              ^                ^
//                            Data read       Number of bytes read 
```

# silverlight - 在 Silverlight iFrame 上显示 Sothink 菜单

> ID：14821646
> 
> 赞同：0
> 
> 时间：2013-02-11T21:58:31.767
> 
> 标签：silverlight, iframe, menu, z-index, windowless

我在网页上有一个 Sothink 菜单，下面是一个 Silverlight iframe 应用程序。目前 iframe 涵盖了一些下拉菜单项。

我尝试使用 z-indexing、无窗口和 wmode 来解决这个问题。我无法更改应用程序的原始代码，但是当我查看 iframe 页面的源代码时，我看到开发人员注释掉了无窗口选项，因为它干扰了程序的另一部分。

我尝试将其插入页面的唯一方法是通过以下代码：

```
<iframe src="iframe-code-url.com" frameborder="0" style="background-color:#FFF;" scrolling="yes" width="940px" height="500px" wmode="opaque" windowless="true"></iframe> 
```

我对任何和所有建议持开放态度。我做了很多研究，但我没有发现任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:13:58.927

您必须在 Silverlight 宿主对象上设置 Windowless=true，而不是在 iFrame 上。如果您无法访问主机对象，则无法启用无窗口模式，因此您无法做您想做的事。

[有关无窗 Silverlight 对象的更多信息，请参见此处](http://msdn.microsoft.com/en-us/library/cc838156%28v=vs.95%29.aspx)

理想情况下，您应该将 Silverlight XAP 文件托管在与您的网页相同的站点中。

# ios - 为 uitableviewcell 内的视图设置动画

> ID：14821652
> 
> 赞同：2
> 
> 时间：2013-02-11T21:58:44.423
> 
> 标签：ios, uitableview, uiviewanimation

我有嵌套的表格视图，这样我就可以在每个表格视图的单元格中都有一个横向滚动的表格视图。我想在第一行添加一个动画，基本上来回移动一个视图。它正在工作，有点：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView willDisplayCell: (BannerCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row == 0){
        [UIView animateWithDuration:3
                         animations:^{
                             [UIView setAnimationRepeatCount: 100];
                             cell.handView.frame = CGRectMake(cell.handView.frame.origin.x-100, cell.handView.frame.origin.y, 32, 32);
                             cell.handView.alpha = 0.0f;

                         }
                         completion:^(BOOL finished){

                         }];
    }
    else cell.handView.hidden = YES;

    return cell;

} 
```

这是有效的，除了第一次加载我的表格视图时，我想要动画的视图甚至不显示，当我滚动到一个新单元格并返回到第一个单元格时，它会显示一个很好的动画。不知道为什么它在第一次加载时不能按预期运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:10:07.173

这个委托方法实际上被调用了吗？因为执行此操作的实际委托方法具有以下签名：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath 
```

您的方法正在返回一个`UITableViewCell`对象。我似乎没有找到这样的 delgate 方法。

# amazon-web-services - 配置 AmazonLinux AMI 实例

> ID：14821653
> 
> 赞同：0
> 
> 时间：2013-02-11T21:58:48.510
> 
> 标签：amazon-web-services, cloud, chef-infra, puppet, ec2-ami

我正在尝试设置一个 AMI，以便在启动时它会在服务器某处使用已定义的“配置”自动配置自己。我遇到了厨师和木偶。考虑到 Puppet，我能够运行他们的示例，但无法从 master 中看到用于自动配置的示例。我发现“Amazon Linux”不支持 Puppet Enterprise。团队选择了 Amazon Linux，并希望保留它，而不是仅仅因为一个工具不支持它而转向其他操作系统。有人可以给我一些关于如何实现这一目标的想法吗？（我试图通过一个良好的行业采用的可维护性工具远离自制的 shell 脚本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:52:02.570

我过去所做的是将/etc/rc.local 复制到/etc/rc.local.orig，然后配置/etc/rc.local 以启动puppet 运行，然后自行铺平。

/etc/rc.local：

```
#!/bin/bash
##
#add pre-puppeting stuff here, I add the hostname in "User-data" when creating the VM so I can set the hostname before checking in
##
/usr/bin/puppet agent --test
/bin/cp -f /etc/rc.local.orig /etc/rc.local
/sbin/init 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:38:59.167

AWS CloudFormation 是 Amazon 推荐的预置服务器（以及其他云资源）的方法之一。您在 JSON 文件中声明所需的所有资源，并通过声明要安装的包、要运行的服务、要创建的文件以及创建服务器时要运行的命令来指定如何配置每个服务器。有关详细信息，请参阅[用户指南](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html)。我还写了几篇关于开始使用它的[博客文章。](http://blog.engelke.com/2012/12/28/provisioning-a-server-with-cloudformation/)

# jquery - 使用 jQuery 在第一个元素之后注入 HTML

> ID：14821655
> 
> 赞同：0
> 
> 时间：2013-02-11T21:58:53.487
> 
> 标签：jquery, html

我正在尝试在两个元素之间插入一些 HTML，我的代码的简化测试用例是：

```
<div class="testing">
<span>1</span>
<span>2</span>
</div> 
```

我想要做的是在两者之间注入“或”这个词，所以：

```
<div class="testing">
<span>1</span>
<p> or </p>
<span>2</span>
</div> 
```

我已经研究过使用 after 和 prepend 方法，但似乎没有办法将其限制为 div 中的第一个跨度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T22:00:41.533

尝试：

```
$('div.testing span:eq(0)').after('<p> or </p>'); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/EWykY/)**

并且如评论中所述，`span:eq(0)`也相当于`span:first`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T22:02:13.547

```
$('.testing span:first').after('<p> or </p>'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T22:08:27.310

```
$('.testing span').first().after('<p> or </p>'); 
```

# jsf - 直接渲染 Style 属性 - JSF

> ID：14821663
> 
> 赞同：0
> 
> 时间：2013-02-11T21:59:13.397
> 
> 标签：jsf, styles

我遇到了 JSF 的问题（如果有的话，我知道的领域很少）。

我需要根据对象属性返回的字符串在 a 内渲染“style='display: none'”。

代码是：

```
 <div class='x' style='#{obj.styleprop}'> 
```

*   styleprop 在类 obj 中定义，带有 getter 和 setter。

*   styleprop 可能包含 "display: block" 或 "display: none"

div 总是以这种方式呈现：

```
 <div class='x' style=''> 
```

必须始终呈现 Div。

我完全不知道该怎么办...

# windows - 部署启用 FIPS 的 Apache/OpenSSL

> ID：14821665
> 
> 赞同：1
> 
> 时间：2013-02-11T21:59:27.463
> 
> 标签：windows, openssl, fips

我已经使用 mod_ssl/OpenSSL 构建了 Apache 以实现 FIPS 合规性（我在 Windows 环境中构建和安装）并且它在本地工作。我可以执行以下操作：

```
openssl md5 C:\path\to\random\file.txt  # this will succeed and spit out hash info

set OPENSSL_FIPS=1

openssl md5 C:\path\to\random\file.txt # this will fail and spit out an error about MD5 being disabled in FIPS mode

openssl sha1 C:\path\to\random\file.txt # this will succeed and spit out hash info 
```

但是，当我将我的 Apache 构建（整个 bin 目录和模块目录）复制到我们尝试运行相同命令的现有内部 SSL 测试平台时，任何使用 openssl 执行哈希（md5 或 sha1）都会给我以下信息错误：

```
1444:error:2D06B06F:FIPS routines:FIPS_check_incore_fingerprint:fingerprint does not match:.\fips\fips.c:232: 
```

当我将它复制到另一台机器时，是什么导致它中断？想法？

# dropbox - Dropbox API 直接帐户访问

> ID：14821666
> 
> 赞同：4
> 
> 时间：2013-02-11T21:59:30.133
> 
> 标签：dropbox, dropbox-api, dropbox-php

我一直在研究 Dropbox API 的文档，但我找不到不经过 OAuth 流程直接访问帐户的方法。有没有办法做到这一点？

我的最终目标是创建一个网页，其中包含来自特定 Dropbox 帐户（我自己的）的文件和文件夹列表，任何人都可以查看和下载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:34:31.770

要通过 API 访问用户的 Dropbox 帐户，您的应用需要获得用户的授权。Dropbox API 当前要求通过 OAuth 流程完成此授权。不过，您只需为每个用户执行一次此步骤，因为您可以为每个用户存储和重复使用访问令牌。

听起来您打算只使用一个帐户（您自己的），因此您可以自己手动处理一次此流程，并以编程方式保存和重用访问令牌。

# java - 强制 JOptionPane 保持打开状态

> ID：14821667
> 
> 赞同：0
> 
> 时间：2013-02-11T21:59:30.093
> 
> 标签：java, swing, user-interface, drop-down-menu, joptionpane

我的应用程序构造如下：

*   主窗口允许用户选择要解析的 CSV 文件
*   JOptionPane 在选择 CSV 文件后出现，并且 JOptionPane 包含一个带有各种选项的下拉菜单；每个都生成一个单独的窗口
*   目前，在从菜单中进行选择并单击“确定”按钮后，JOptionPane 将关闭

我正在寻找一种方法来强制 JOptionPane 保持打开状态，以便用户可以根据需要选择不同的东西。我希望仅通过单击右上角的“X”来关闭 JOptionPane。如果使用 JOptionPane 不是最好的方法，我也愿意接受其他可能性来实现类似的结果。

这是我正在处理的相关代码块：

```
try 
{
    CSVReader reader = new CSVReader(new FileReader(filePath), ',');

    // Reads the complete file into list of tokens.
    List<String[]> rowsAsTokens = null;

    try 
    {
        rowsAsTokens = reader.readAll();
    } 

    catch (IOException e1) 
    {
        e1.printStackTrace();
    }

    String[] menuChoices = { "option 1", "option 2", "option 3" };

    String graphSelection = (String) JOptionPane.showInputDialog(null, 
            "Choose from the following options...", "Choose From DropDown", 
            JOptionPane.QUESTION_MESSAGE, null, 
            menuChoices, // Array of menuChoices
            menuChoices[0]); // Initial choice

    String menuSelection = graphSelection;

    // Condition if first item in drop-down is selected
    if (menuSelection == menuChoices[0] && graphSelection != null)
    {
        log.append("Generating graph: " + graphSelection + newline);

        option1();          
    }

    if (menuSelection == menuChoices[1] && graphSelection != null)
    {

        log.append("Generating graph: " + graphSelection + newline);

        option2();      
    }

    if (menuSelection == menuChoices[2] && graphSelection != null)
    {
        log.append("Generating graph: " + graphSelection + newline);

        option3();
    }

    else if (graphSelection == null)
    {   
        log.append("Cancelled." + newline);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:13:40.650

在这些选项窗格中的任何一个中，我都可以在关闭它之前多次更改我的选择。第三个选项窗格将显示（默认为）在第一个选项中选择的值 - 当前值。

```
import java.awt.*;
import javax.swing.*;

class Options {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                Object[] options = {
                    "Option 1",
                    "Option 2",
                    "Option 3",
                    "None of the above"
                };
                JComboBox optionControl = new JComboBox(options);
                optionControl.setSelectedIndex(3);
                JOptionPane.showMessageDialog(null, optionControl, "Option",
                        JOptionPane.QUESTION_MESSAGE);
                System.out.println(optionControl.getSelectedItem());

                String graphSelection = (String) JOptionPane.showInputDialog(
                        null,
                        "Choose from the following options...", 
                        "Choose From DropDown",
                        JOptionPane.QUESTION_MESSAGE, null,
                        options, // Array of menuChoices
                        options[3]); // Initial choice
                System.out.println(graphSelection);

                // show the combo with current value!
                JOptionPane.showMessageDialog(null, optionControl, "Option",
                        JOptionPane.QUESTION_MESSAGE);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

我认为迈克尔猜对了`JList`。[这是list](https://stackoverflow.com/questions/8364787/how-do-you-import-a-font/8365030#8365030)和[combo](https://stackoverflow.com/questions/6965038/getting-fonts-sizes-bold-etc/6965149#6965149)之间的比较。

![](../Images/03783e3b304d85575780e28388d092cf.png) ![](../Images/49ea3b806a041e122016e395ad6bf0d9.png)

请注意，`JList`&`JComboBox`都可以使用组合中的渲染器。重要的区别在于列表是支持多选的嵌入式组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T22:55:05.623

> 即使在用户选择了一个选项后，我希望带有选项的窗口保持打开状态，以便他们可以根据需要选择另一个选项。如何让 JOptionPane 保持打开状态，而不是在选择下拉值后关闭它的默认行为？

*   这是基本属性，默认情况下`JOptionPane`已处理，如果没有肮脏的黑客，这是不可能的，不要那样做

*   使用`JDialog`（可能，可能未装饰）具有适当的[ModalityType值](http://www.java-tips.org/java-se-tips/javax.swing/dialog-modality.html)

*   你可以使用一些变体`Java & Ribbon`

*   [您可以使用 JMenuItems（非常好的方式）](https://stackoverflow.com/a/9734016/714968)将所需的选择放入JComboBox 或 JMenu 到 JLayer 或 GlassPane

*   我认为这是[JToolBar](https://java2s.com/Tutorial/Java/0240__Swing/0980__JToolBar.htm)`JMenu`的标准工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T23:14:26.033

以下解决方案不会为您提供下拉菜单，但它允许您选择多个值。

您可以使用 a`JList`来存储您的选择并`JOptionPane.showInputMessage`像这样使用：

```
JList listOfChoices = new JList(new String[] {"First", "Second", "Third"});
JOptionPane.showInputDialog(null, listOfChoices, "Select Multiple Values...", JOptionPane.QUESTION_MESSAGE); 
```

使用`getSelectedIndices()`on`listOfChoices`之后的方法`JOptionPane.showInputDialog()`将返回一个整数数组，其中包含从 中选择的索引，`JList`您可以使用 a`ListModel`来获取它们的值：

```
int[] ans = listOfChoices.getSelectedIndices();
ListModel listOfChoicesModel = listOfChoices.getModel();
for (int i : ans) {
    System.out.println(listOfChoicesModel.getElementAt(i));
} 
```

# c# - 表列将枚举和返回值作为字符串

> ID：14821669
> 
> 赞同：0
> 
> 时间：2013-02-11T21:59:32.373
> 
> 标签：c#, asp.net, ado.net-entity-data-model

我有一个带有（EF）数据库的 ASP.NET WebForms 应用程序。

基本上我关心的两个表是用户和角色。在 Roles 中有：Id (pk)、UserId (fk)、Type : String - 其中包含 Admin、User、Moderator、Publisher 等。在 Users 中有：Id (pk)、Email、NameFirst、NameLast、Password、Username。

在设计器中，我将用户与角色连接起来，以便在角色 -> 用户 ID == 用户 ID 中。

现在，在创建一个从 RoleProvider 继承的类之后，在函数 GetRolesForUser(string username) 中，我想获取 id 为用户名的用户的所有角色的枚举。

因此，例如，如果我得到一个用户 Agon，我希望能够获得他所有角色的枚举以供以后使用，并在所述方法中将它们作为 string[] 返回。

因此，经过数小时的令人头晕目眩的尝试，我一直在不断地遇到错误。不知道从这里去哪里：

```
 public override string[] GetRolesForUser(string username)
    {
        using (SMEntities db = new SMEntities())
        {
            User user = db.Users.First(x => x.Username == username);
        }

        //throw new NotImplementedException();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:02:05.493

我不确定枚举在哪里真正发挥作用，但以下情况如何：

```
 using (SMEntities db = new SMEntities())
    {
        User user = db.Users.First(x => x.Username == username);
        return user.Roles.Select(r => r.Type).ToArray();
    } 
```

# php - Yii 中的统计查询

> ID：14821673
> 
> 赞同：1
> 
> 时间：2013-02-11T21:59:57.117
> 
> 标签：php, mysql, yii

我的统计查询尝试不起作用。从 ModelA 的视图中，我试图查询 ModelB 以查找 ModelB 中状态等于“D”且 AttributeB 等于登录用户的属性 Number 的总数。

关系：

![在此处输入图像描述](../Images/f3b7685e5ac0baea609aa8f4e0cb4935.png)

关系查询尝试：

```
'total' => array(self::STAT, 'TableB', 'TableAId', 'select'=>'SUM(Number)', 
            'condition'=>'Status="D" AND AttributeB='.Yii::app()->user->id), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T02:41:30.313

当您指定 时[`relations()`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#relations-detail "http://www.yiiframework.com/doc/api/1.1/CActiveRecord#relations-detail")，请确保任何*关系定义*的第三个参数是关联两个表的**外键。**

在您的情况下，与 TableA 和 TableB 相关的外键是 TableAId(column in TableB) ，而不是 TableBId。因此，将您的*关系定义*更改为：

```
'total' => array(self::STAT, 'TableB', 'TableAId', 'select'=>'SUM(Number)',
    'condition'=>'Status="D" AND AttributeB='.Yii::app()->user->id), 
```

* * *

[该指南](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#statistical-query "http://www.yiiframework.com/doc/guide/1.1/en/database.arr#statistical-query")解释了这一点，以及更多。

# erlang - 无法启动rabbitmq-server

> ID：14821675
> 
> 赞同：12
> 
> 时间：2013-02-11T22:00:00.553
> 
> 标签：erlang, rabbitmq

我使用自制软件安装了rabbitmq。我正在尝试启动rabbitmq服务器，但我总是收到这个错误，我无法弄清楚为什么！

我已经安装了 erlang，并且没有在同一个端口上运行其他应用程序。

```
$rabbitmq 服务器
{error_logger,{{2013,2,11},{22,37,49}},"无法设置短节点名！\n请检查您的配置\n",[]}
{error_logger,{{2013,2,11},{22,37,49}},crash_report,[[{initial_call,{net_kernel,init,['Argument__1']}},{pid,},{registered_name,[ ]},{error_info,{exit,{error,badarg},[{gen_server,init_it,6,[{file,"gen_server.erl"},{line,320}]},{proc_lib,init_p_do_apply,3,[ {file,"proc_lib.erl"},{line,227}]}]}},{ancestors,[net_sup,kernel_sup,]},{messages,[]},{links,[]},{dictionary,[ {longnames,false}]},{trap_exit,true},{status,running},{heap_size,610},{stack_size,24},{reductions,249}],[]]}
{error_logger,{{2013,2,11},{22,37,49}},supervisor_report,[{supervisor,{local,net_sup}},{errorContext,start_error},{reason,{'EXIT',nodistribution} },{offender,[{pid,undefined},{name,net_kernel},{mfargs,{net_kernel,start_link,[[rabbitmqprelaunch1593,shortnames]]}},{restart_type,permanent},{shutdown,2000},{child_type ，工人}]}]}
{error_logger,{{2013,2,11},{22,37,49}},supervisor_report,[{supervisor,{local,kernel_sup}},{errorContext,start_error},{reason,shutdown},{offender,[ {pid,undefined},{name,net_sup},{mfargs,{erl_distribution,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]}]}
{error_logger,{{2013,2,11},{22,37,49}},std_info,[{application,kernel},{exited,{shutdown,{kernel,start,[normal,[]]}}} ,{类型,永久}]}
{"内核 pid 终止",application_controller,"{application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}}"}

崩溃转储被写入：erl_crash.dump
内核 pid 终止 (application_controller) ({application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}})

```

顺便说一句，`erl -sname abc`给出相同的输出

**更新**：

这就是我所拥有的`/etc/hosts`

```
127.0.0.1 本地主机
255.255.255.255 广播主机

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-30T07:30:05.023

检查您的计算机名称和 /etc/hosts 中的短主机名或别名，匹配此

*   检查您的计算机名称`[wendy@nyc123]$`

    nyc123 是您的计算机名称

*   检查您的短主机名

    [wendy@nyc123]$ 主机名 -s

    [wendy@nyc123]$ nyc456

由于您的计算机名称和短主机名不匹配，可能会发生此错误。要匹配此，您可以更改计算机主机名或别名。

*   更改计算机主机名

    [wendy@nyc123]$ 主机名 nyc456

    关闭您的终端并再次打开

    [温迪@nyc456]$

    计算机名称已更改

或者

*   更改 /etc/hosts 中的别名

    127.0.0.1 nyc123.com nyc123

    保存并再次检查

    [wendy@nyc123]$ 主机名 -s

    [wendy@nyc123]$ nyc123

重启你的rabbitmq！

```
[root@nyc123]$ rabbitmq-server start</p>

    RabbitMQ 3.6.0\. Copyright (C) 2007-2015 Pivotal Software, Inc.</p>
##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/</p>
##  ##</p>
##########  Logs: /var/log/rabbitmq/rabbitmq@nyc123.com.log</p>
######  ##        /var/log/rabbitmq/rabbitmq@nyc123.com-sasl.log</p>
##########</p>
          Starting broker... completed with 6 plugins.</p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T22:49:47.283

I looked for a similar error on google, and it looks like it can happen if your `/etc/hosts` file is in the wrong format. Try fixing it and see if that helps.

References:

*   [http://www.ejabberd.im/node/18](http://www.ejabberd.im/node/18)
*   [Explanation on RabbitMQ Mailing list](http://permalink.gmane.org/gmane.comp.networking.rabbitmq.general/16135)

* * *

Edit: For completeness, it seems like setting a long name (of the form `abc@abc`) worked.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-27T01:24:23.533

我昨天也遇到了这个问题，找到了根本原因：我将系统的主机名更改为“长”名称，pm3(hc desktop)。

如果您的服务器的主机名过长或无效，Linux 仍然可以工作，并且不会向您提示错误消息。因为您只需修改 /etc/hostname 文件并重新启动。但是，rabbitmq 服务器可能无法工作，并给您这个“短名称”错误消息。

我将主机名改回“pm3”，重新启动，一切顺利。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-13T07:02:50.270

在这里找到了答案： [控制 rabbitmq 'name' not 'sname'](https://stackoverflow.com/questions/10767037/control-rabbitmq-name-not-sname)

将您的机器名称设置为简单的名称，并使其成为 locahost 的别名

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-25T21:34:46.207

我解决了更改计算机名称的问题（在 Windows 8.1 上）。问题是这个名字有一个奇怪的字符 (é) 西班牙字母。我的计算机名称是 Andrés，我将其更改为 Andres，重新启动计算机，一切正常。我认为兔子无法识别那个奇怪角色的名字（安德烈斯）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-25T15:54:35.533

删除旧式配置文件 /etc/rabbitmq/rabbitmq.config 并使用 rabbitmq.conf`listeners.tcp.default = 5672` 之后再次重新启动 rabbitmq 服务器在我的情况下解决了 ec2 实例中的问题

# php - 正确的语法，仍然给出错误

> ID：14821678
> 
> 赞同：0
> 
> 时间：2013-02-11T22:00:23.063
> 
> 标签：php, sql, syntax-error

我无法让这个工作。mySQL 语句在我直接插入时起作用，并且 $dbc 是正确的，因为它在脚本中较早地提取了它。

我可以帮忙吗？

```
//gets the username from the users table by looking for given id
function findUserNameFromID($userID){
   global $dbc;
   $getUser_query = 'SELECT username FROM forum_users WHERE userID ='.$userID;
   echo $getUser_query;
   //Errors on this line:
   $results = mysqli_query($dbc, $getUser_query) or die("Error: ".mysqli_error($dbc));
   $row = mysqli_fetch_array($results);
   return $row['username'];
} 
```

编辑：忘记错误：错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“>”附近使用正确的语法

编辑：这是整页代码：

```
 //gets the username from the users table by looking for given id
    function findUserNameFromID($userID){
        global $dbc;
        $getUser_query = 'SELECT username FROM forum_users WHERE userID ='.$userID;
        echo $getUser_query;
        $results = mysqli_query($dbc, $getUser_query) or die("Error: ".mysqli_error($dbc)." ".__LINE__);
        $row = mysqli_fetch_array($results);
        return $row['username'];
    }

    function findUserIDFromName($username){
        global $dbc;
        $getUser_query = "SELECT userID FROM forum_users WHERE username = $username";
        $results = mysqli_query($dbc, $getUser_query);
        $row = mysqli_fetch_array($results);
        return $row['userID'];
    }

    $getThreads_query = "SELECT * FROM forum_threads ORDER BY lastTime, id";

    $results = mysqli_query($dbc, $getThreads_query);

    // show the data
    while ($row = mysqli_fetch_array($results))
    {
       echo "<p>";
       echo $row['title']."<br />";
       echo "Created by ".findUserNameFromID($row['creatorUserID']."<br />");
       //echo "Created on ".$row['createDate'];
       echo "</p>";

    }

    mysqli_close($dbc);

    ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:04:02.477

首先，您应该使用绑定变量，而不是像这样在 SQL 中嵌入参数（请参阅[http://bobby-tables.com/](http://bobby-tables.com/)了解为什么不这样做）。

您在问题中输入的错误消息与查询不匹配，除非 $userID 包含“>”，这意味着您的消息或 $userID 是整数的断言不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:08:35.437

我发现了错误。

中的右括号位于`echo "Created by ".findUserNameFromID($row['creatorUserID']."<br />");`错误的位置，导致`"<br />"`被包含在`$userID`.

自我注意：检查你的括号在哪里。

# database - 让 Excel 返回具有两个值的行

> ID：14821681
> 
> 赞同：0
> 
> 时间：2013-02-11T22:00:27.923
> 
> 标签：database, arrays, excel, lookup

我有一个 csv 文件，其中包含 2003 年至 2012 年间足球联赛的所有赛程（位于 Sheet1 中）。我希望 Excel 将包含某些固定装置的行返回到我的工作表中，即当 A 队（在单元格 $B$18 中）与 B 队（在单元格 $D$18 中）主场和客场比赛时。我使用了这个数组公式：

```
=INDEX(Sheet1!$B:$F,SMALL(IF(OR(AND(Sheet1!$C:$C=$B$18,Sheet1!$D:$D=$D$18),AND(Sheet1!$C :$C=$D$18,Sheet1!$D:$D=$B$18)),ROW(Sheet1!2:2)),2)) 

```

表 1 的位置

```
B栏：日期，
C栏：主队，
D栏：客队，
E栏：主场得分，
F栏：客场得分

```

不幸的是，它似乎不起作用。有人可以指出我公式中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:03:00.640

**新答案**

我假设您对数组公式有点熟悉，看起来这就是您正在使用的。

我已经设法让这个公式为我工作，作为数组公式输入

```
=IFERROR(INDEX(Sheet1!$B$2:$F$10,SMALL(IF(((Sheet1!$C$2:$C$10=$B$18)*(Sheet1!$D$2:$D$10=$D$18))+((Sheet1!$C$2:$C$10=$D$18)*(Sheet1!$D$2:$D$10=$B$18)),ROW(Sheet1!$C$2:$C$10)-1),ROW(A1)),F$17),"") 
```

where`F$17`是指您要返回的列，即 2 代表主队，3 代表客队。我使用了参考，因此我可以跨四列复制并获取主客场球队和得分。复制您期望返回的尽可能多的行。

# c++ - 如何使用 boost ublas 理解和修复递归模板实例化错误？

> ID：14821686
> 
> 赞同：0
> 
> 时间：2013-02-11T22:00:45.103
> 
> 标签：c++, boost, ublas

我收到编译器错误

```
/Developer/boost/boost/numeric/ublas/expression_types.hpp:184:16: fatal error: recursive template instantiation exceeded maximum depth of 512 
```

来自 clang++ 或从 g++ 4.2.1 使用 >10GB 内存使用的无限期编译。

我正在尝试创建一个辅助函数，该函数从向量的每个元素中减去一个标量。起初一般考虑，我计划将特定的向量存储类型作为模板参数。话虽如此，我意识到我现在不知道如何使定义同时适用于向量`ublas`和`std`向量（没有专门化）。但我仍然想知道发生了什么/我的编译问题的原因？

当与 boost 库兼容时，下面的代码很容易证明这个问题，例如 `g++ -I/path/boost bug_demo.cpp`

boost 中或我的代码中是否存在错误？

```
// demo code does not compiler, instead error for recursive template instantiation
//---------------------------------------------------------

#include <boost/numeric/ublas/vector.hpp>

namespace ublas = boost::numeric::ublas; // boost ublas will be the implementation for basic vector container
typedef ublas::vector<double>  DVEC; // double vector shorthand

// ********* problem function  ***********
template <typename vec_t, typename scalar_t>
vec_t operator-( const vec_t & vec, scalar_t scalar )
{
    ublas::scalar_vector<scalar_t> scalar_v(vec.size(), scalar);
    return vec - scalar_v;
}

// this non-template version works fine.
/*  DVEC operator-( const DVEC & vec, double scalar )
{
    ublas::scalar_vector<double> scalar_v(vec.size(), scalar);
    return vec - scalar_v;
}
*/

DVEC vectorFunc( const DVEC& x )
{
    double bnew=0.0;
    DVEC x_bnew;
    x_bnew = operator-(x,bnew);
    return x_bnew;
}

int main()
{
    DVEC inputVector(2);
    inputVector[0] = 1.0; inputVector[1] = 2.0;

    DVEC output = vectorFunc( inputVector );
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:10:56.623

您的`operator - ()`函数通过在执行时调用自身来设置无限模板实例化递归`vec - scalar_v`。虽然参数类型的名称是`scalar_t`，但这只是一个名称，它可以匹配任何类型，包括`scalar_vector<scalar_t>`.

因此，该行将`xbnew = operator - (x, bnew)`导致实例化：

```
operator - <DVEC, double>() 
```

该运算符模板中的最后一行将反过来导致实例化：

```
operator - <DVEC, scalar_vector<double>>() 
```

然后，同一运算符模板中的最后一行将导致实例化：

```
operator - <DVEC, scalar_vector<scalar_vector<double>>>() 
```

依此类推，直到编译器达到最大实例化递归深度。

# z3 - 编码返回“未知”

> ID：14821687
> 
> 赞同：1
> 
> 时间：2013-02-11T22:00:47.377
> 
> 标签：z3, cvc4

对于此示例：[http](http://pastebin.com/QyebfD1p) : //pastebin.com/QyebfD1p z3 和 cvc4 作为 check-sat 的结果返回“未知”。两者都不是很详细的原因，有没有办法让 z3 对其执行更详细？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:32:22.753

您的脚本使用该策略

```
s = Then('simplify','smt').solver() 
```

此策略应用 Z3 简化器，然后执行 Z3 中可用的“通用”SMT 求解器。这个求解器对于非线性算术来说是*不*完整的。它基于以下组合：单纯形法、区间算术法和格罗布纳基法。该模块的一大限制是它无法找到包含无理数的模型/解决方案。将来，我们将用 Z3 中可用的新非线性求解器替换此模块。

对于非线性算术，我们通常建议在 Z3 中使用 nlsat 求解器。这是一个完整的过程，通常对于不可满足和可满足的情况非常有效。[您可以在本文](http://research.microsoft.com/en-us/um/people/leonardo/files/IJCAR2012.pdf)中找到有关 nlsat 的更多信息。要使用 nlsat，我们必须使用

```
s = Tactic('qfnra-nlsat').solver() 
```

不幸的是， nlsat 会卡在您的示例中。[计算求解](http://mathworld.wolfram.com/Subresultant.html)过程中产生的非常大多项式的子结果时会卡住..

Z3 还有另一个处理非线性算术的引擎。该引擎将问题减少到 SAT。它只对有理数形式`a + b sqrt(2)`的解`a`的可满足问题有效。`b`使用这个引擎，我们可以在很短的时间内解决您的问题。我在帖子末尾附上了结果。要使用这个引擎，我们必须使用

```
s = Then('simplify', 'nla2bv', 'smt').solver() 
```

**编辑**此外，该策略`nla2bv`将有理数编码`a`为`b`一对位向量。默认情况下，它使用大小为 4 的位向量。但是，可以使用选项指定此值`nlsat_bv_size`。这不是全局选项，而是提供给 tactic 的选项`nla2bv`。因此，`nla2bv`只能找到形式的解决方案，`a + b sqrt(2)`可以`a`使用`b`少量比特进行编码。如果一个可满足的问题没有这种形式的解决方案，这个策略就会失败并返回`unknown`。 **结束编辑**

您的示例还表明我们必须改进 nlsat，并使其作为模型/解决方案查找程序更有效。当前版本在试图表明问题没有解决方案时会卡住。我们知道这些限制，并正在制定新的程序来解决这些限制。

顺便说一句，在 Python 前端，Z3 以十进制表示法显示模型/解决方案。然而，一切都是精确计算的。以获得解决方案的精确表示。我们可以使用方法`sexpr()`。例如，我将您的循环更改为

```
for d in m.decls():
    print "%s = %s = %s" % (d.name(), m[d], m[d].sexpr()) 
```

在新循环中，我以十进制表示法和内部精确表示法显示结果。的含义`(root-obj (+ (* 2 (^ x 2)) (* 12 x) (- 7)) 2)`是多项式的二次根`2*x^2 + 12x - 7`。

**EDIT** Z3 提供了用于创建非平凡求解器的[组合器。](http://rise4fun.com/Z3py/tutorial/strategies)在上面的例子中，我们习惯于`Then`执行不同策略的顺序组合。我们也可能会`OrElse`尝试不同的战术。并且`TryFor(t, ms)`会尝试几毫秒的策略`t`，`ms`如果在给定时间内无法解决问题，则会失败。这些组合器可用于创建使用不同策略来解决问题的策略。 **结束编辑**

```
sat
Presenting results
traversing model...
s_2_p_p = 0.5355339059? = (root-obj (+ (* 2 (^ x 2)) (* 12 x) (- 7)) 2)
s_1_p_p = 0 = 0.0
s_init_p_p = 0.2928932188? = (root-obj (+ (* 2 (^ x 2)) (* (- 4) x) 1) 1)
s_2_p = 0.7071067811? = (root-obj (+ (* 2 (^ x 2)) (- 1)) 2)
s_1_p = 0 = 0.0
s_init_p = 0.2928932188? = (root-obj (+ (* 2 (^ x 2)) (* (- 4) x) 1) 1)
epsilon = 0 = 0.0
p_b2_s2_s_sink = 0.9142135623? = (root-obj (+ (* 4 (^ x 2)) (* 4 x) (- 7)) 2)
p_b2_s2_s_target = 0.0857864376? = (root-obj (+ (* 4 (^ x 2)) (* (- 12) x) 1) 1)
p_b2_s2_s_2 = 0 = 0.0
p_b2_s2_s_1 = 0 = 0.0
p_a2_s2_s_sink = 0 = 0.0
p_a2_s2_s_target = 0.8284271247? = (root-obj (+ (^ x 2) (* 4 x) (- 4)) 2)
p_a2_s2_s_2 = 0.1715728752? = (root-obj (+ (^ x 2) (* (- 6) x) 1) 1)
p_a2_s2_s_1 = 0 = 0.0
sigma_s2_b2 = 1 = 1.0
sigma_s2_a2 = 0 = 0.0
p_b1_s1_s_sink = 1 = 1.0
p_b1_s1_s_target = 0 = 0.0
p_b1_s1_s_2 = 0 = 0.0
p_b1_s1_s_1 = 0 = 0.0
p_a1_s1_s_sink = 1 = 1.0
p_a1_s1_s_target = 0 = 0.0
p_a1_s1_s_2 = 0 = 0.0
p_a1_s1_s_1 = 0 = 0.0
sigma_s1_b1 = 0 = 0.0
sigma_s1_a1 = 1 = 1.0
p_sinit_sink = 0.7071067811? = (root-obj (+ (* 2 (^ x 2)) (- 1)) 2)
p_sinit_target = 0.2928932188? = (root-obj (+ (* 2 (^ x 2)) (* (- 4) x) 1) 1)
p_sinit_2 = 0 = 0.0
p_sinit_1 = 0 = 0.0
s_sink = 0 = 0.0
s_target = 1 = 1.0
s_2 = 0.0857864376? = (root-obj (+ (* 4 (^ x 2)) (* (- 12) x) 1) 1)
s_1 = 0 = 0.0
s_init = 0.2928932188? = (root-obj (+ (* 2 (^ x 2)) (* (- 4) x) 1) 1) 
```

**编辑** 您可以使用该策略解决评论中的问题

```
s = Then('simplify', 'nlsat').solver() 
```

这种策略将在几秒钟内解决问题，并在帖子末尾产生解决方案。正如我上面所说，`nlsat`是完整的，但可能需要很长时间。您的问题处于 Z3 的当前版本可以自动决定/解决的边缘。我们可以将不同的策略与`OrElse`and结合起来`TryFor`，使其更加稳定。例子：

```
s = OrElse(TryFor(Then('simplify', 'nla2bv', 'smt', 'fail-if-undecided'), 1000),
           TryFor(Then('simplify', 'nlsat'), 1000),
           TryFor(Then('simplify', 'nla2bv', 'smt', 'fail-if-undecided'), 10000),
           Then('simplify', 'nlsat')).solver() 
```

上面的策略尝试了`nla2bv`1 秒，然后`nlsat`是 1 秒，然后`nla2bv`是 10 秒，最后`nlsat`没有超时。

我知道这不是一个理想的解决方案，但在下一个非线性算术求解器准备好之前，这样的变体可能是有用的解决方法。此外，Z3 还有许多其他策略可用于在我们调用之前简化/预处理问题`nlsat`。 **结束编辑**

```
s_init = 15/32
s_1 = 7/16
s_2 = 1/2
s_target = 1
s_sink = 0
p_sinit_1 = 1/2
p_sinit_2 = 1/4
p_sinit_target = 1/8
p_sinit_sink = 1/8
sigma_s1_a1 = 1/2
sigma_s1_b1 = 1/2
p_a1_s1_s_1 = 1/2
p_a1_s1_s_2 = 1/4
p_a1_s1_s_target = 1/8
p_a1_s1_s_sink = 1/8
p_b1_s1_s_1 = 1/2
p_b1_s1_s_2 = 1/4
p_b1_s1_s_target = 1/16
p_b1_s1_s_sink = 3/16
sigma_s2_a2 = 1/2
sigma_s2_b2 = 1/2
p_a2_s2_s_1 = 1/2
p_a2_s2_s_2 = 1/4
p_a2_s2_s_target = 11/64
p_a2_s2_s_sink = 5/64
p_b2_s2_s_1 = 3/4
p_b2_s2_s_2 = 1/32
p_b2_s2_s_target = 9/64
p_b2_s2_s_sink = 5/64
epsilon = 1/4
s_init_p = 1649/3520
s_1_p = 797/1760
s_2_p = 103/220
s_init_p_p = 1809/3904
s_1_p_p = 813/1952
s_2_p_p = 127/244 
```

**编辑 2** 您的问题处于 Z3 在合理时间内可以做的事情的边缘。非线性实数算术是可判定的，但是非常昂贵。关于调试/跟踪 Z3 中发生的事情。以下是一些可能性：

*   我们可以使用以下命令启用详细消息：`set_option("verbose", 10)`. 数字是详细程度：0 ==“无消息”，更高的数字==“更多消息”。

*   编译支持跟踪的 Z3。有关更多信息，请参阅[此帖子](https://stackoverflow.com/questions/13102789/printing-internal-solver-formulas-in-z3)。

*   使用命令创建 Python 程序调用的 Z3 API 的日志`open_log("z3.log")`。此命令应在任何其他 Z3 API 调用之前调用。然后`z3`使用`gdb`. 因此，您将能够停止执行并找到 Z3 卡住的位置。`nlsat`求解器通常会卡在两个不同的地方：

    1.  计算子结果（过程`psc_chain`将在堆栈上），以及

    2.  用代数系数隔离多项式的根（该过程`isolate_roots`将在堆栈上）。

在我们用效率更高的[新](http://research.microsoft.com/en-us/um/people/leonardo/blog/2013/02/02/inf-trans.html)代数包替换旧代数包之后，问题 2 将很快得到解决。不幸的是，您的问题似乎停留在子步骤中。

另一个评论：虽然`nla2bv`对您的原始基准有效，但您的新基准不太可能有形式的解，`a + b sqrt(2)`其中`a`和`b`是有理数。所以，使用`nla2bv`只是开销。该策略`nlsat`假定问题出在 CNF 中。因此，对于`pastebin.com/QRCUQE10`，我们必须在调用`tseitin-cnf`之前调用`nlsat`。另一种选择是使用“大”策略`qfnra-nlsat`。它在调用之前调用了许多预处理步骤`nlsat`。但是，其中一些步骤可能会使一些问题更难解决。

**结束编辑 2**

# php - 如何让文本转到csv中的下一行？

> ID：14821688
> 
> 赞同：0
> 
> 时间：2013-02-11T22:00:49.720
> 
> 标签：php, csv

我试图让文本转到 csv 中的下一行。这对 TXT 非常有用，但不适用于 CSV。我需要为 csv 行写一些不同的东西吗？

```
 <?php
   $fp = fopen('wo.csv', 'a'); 
   fwrite($fp, '"' . $_POST['Customer'] . '","' . $_POST['Contact_Name'] . '","' . "\r\n"); 
   fclose($fp);   
   echo "<h1>Thank you for doing business with!</h1>";
   ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:02:19.860

使用内置的 CSV 功能！

```
<?php
    $fp = fopen('file.csv', 'w');
    fputcsv($fp, array($_POST['Customer'], $_POST['Contact_Name']));
    fclose($fp);
?> 
```

**参考**

*   [fputcsv](http://www.php.net/manual/en/function.fputcsv.php)
*   [fgetcsv](http://www.php.net/manual/en/function.fgetcsv.php)

# java - Java MVM 发生了什么？

> ID：14821689
> 
> 赞同：2
> 
> 时间：2013-02-11T22:00:50.217
> 
> 标签：java, security, virtual-machine, isolation

这些是多任务虚拟机，在不信任的组件之间具有非常好的高级（即语言级别）隔离。我能找到的关于它们的信息都可以追溯到 2006 年左右

*   [http://bit.csc.lsu.edu/~gb/csc7700/Reading/OOPSLA01_p125-czajkowski.pdf](http://bit.csc.lsu.edu/~gb/csc7700/Reading/OOPSLA01_p125-czajkowski.pdf)
*   [http://weblogs.java.net/blog/mlam/archive/2006/11/multitasking_th_1.html](http://weblogs.java.net/blog/mlam/archive/2006/11/multitasking_th_1.html)

有很多兴趣，但似乎突然死在那里，然后就再也没有发表过任何东西。他们发生了什么？是否有一个单一的“我们将停止在 MVM 上工作”的决定，或者只是兴趣减弱，项目自然而然地消亡了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:23:32.320

IIRC sun 失去了几个国防部研究合同，因此一些项目被终止。不知道这是否是其中的一部分。

# javascript - 两次声明一个javascript函数

> ID：14821690
> 
> 赞同：2
> 
> 时间：2013-02-11T22:00:51.017
> 
> 标签：javascript, function

我需要用不同的处理方式声明一个函数 2 次，让我更多地解释一下覆盖：

```
function test(var){

    //treatments
}

function test(var){

   alert("something" +var);

} 
```

这是HTML代码：

```
<select name="choices" onchange="test(this)">

    <option value="1">test1</option>
    <option value="2">test2</option>

</select> 
```

我怎样才能使它们同时工作而不使所有功能都集中在一个功能中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T22:03:25.527

javascript 中没有方法/函数覆盖之类的东西。最后定义的函数优先。您可以将逻辑拆分为不同的功能，但您需要某种主要功能来决定使用哪个功能。

Javascript 确实有`switch`语句，所以这可能很适合您的问题。它会比一个大的 if/else 块更整洁一些。像下面这样的东西可能会起作用。

```
function test(el){
  switch(el.value){
  case 1:
    alert('option 1 selected');
    break;
  case 2:
    alert('Option 2 selected');
    break;
  default:
    alert('Another option was selected');
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:12:07.980

想象一下您是 java 脚本运行时...您将如何检测这种歧义？答案是否定的。您不能在同一范围内定义具有相同签名的函数。

但我的建议是使用某种“命名空间”：

```
var yourNamespace1 = {

    test: function(var) {
        //treatments
    }
};

var yourNamespace2 = {

    test: function(var) {
        alert("something" +var);
    }
}; 
```

它是简单的 JS 对象，为关键“测试”定义了函数

`yourNamespace1.test(...)`并通过and访问功能`yourNamespace2.test(...)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:05:16.763

您希望根据下拉列表中的选择具有不同的行为。这是一种方法：

```
<select name="choices" onchange="test(this)">

    <option value="1">test1</option>
    <option value="2">test2</option>

</select> 
```

```
function test(el)
{
   var num = el.options[el.selectedIndex].value;
   if (num == 1)
   {
       // case 1
   }
   else if (num == 2)
   {
       // case 2
   }
} 
```

# objective-c - 如何创建一个可以显示带有文本字段的窗口的纯后台程序

> ID：14821691
> 
> 赞同：0
> 
> 时间：2013-02-11T22:00:52.743
> 
> 标签：objective-c, cocoa

我想创建一个只包含状态栏中的菜单（没有停靠图标或菜单栏）的程序，当用户单击菜单项时，它会打开一个允许用户输入文本的窗口（NSTextField 和 NSTextView）。

我只能通过在我的 Info.plist 文件中将“Application is background only”属性设置为 YES 来制作程序背景，但是，当我这样做并显示一个窗口时，首先该窗口总是出现在其他窗口后面，其次我可以'不要在其中输入任何文本（文本转到最后一个焦点 - 通常是 Xcode 中的源文件！）

这绝对不是没有启用字段那么简​​单的事情。只需将“仅背景”属性更改为 NO 即可解决问题，但随后我得到了一个我不想要的停靠图标和菜单栏。

我正在尝试做的事情是否可能，或者是否存在关于仅后台模式的某些内容，这意味着我的应用程序永远无法接收文本？

如果可能的话，我需要做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:56:32.450

从[文档中`LSBackgroundOnly`](http://developer.apple.com/library/mac/documentation/general/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html#//apple_ref/doc/uid/20001431-109268)：

> 您可以使用此键创建不露面的后台应用程序。如果您的应用程序使用连接到窗口服务器但不打算对用户可见的更高级别的框架，您也应该使用此密钥。

因此，当他们说“仅背景”时，他们的意思是*仅*背景。

你想要的关键是[`LSUIElement`](http://developer.apple.com/library/mac/documentation/general/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html#//apple_ref/doc/uid/20001431-108256). Xcode 将其描述为“应用程序是代理 (UIElement)”。

我个人无法忍受 Xcode 向我展示一些键含义的描述的默认行为。我建议打开“显示原始键/值”；然后，Xcode 将显示字典中使用的真实键。

# javascript - 无法在 IE9 中的 dom 上触发 ajax

> ID：14821694
> 
> 赞同：0
> 
> 时间：2013-02-11T22:01:04.797
> 
> 标签：javascript, ajax, jquery

我有一些代码应该在 dom 就绪时执行，无需任何点击或任何其他操作。以下是代码：

```
if($.browser.msie){
        console.log("Using getJSON");
        $.getJSON(baseUrl,function(){
         alert('hi');
        });
    }else{
        setTimeout(function(){
            $.get(baseUrl, function(data){
                var boardNames = data;
                for (i = 0; i < boardNames.length; i++) {
                    $('.boardSelectmulti').append('<option value="' + boardNames[i].Board + '">' + boardNames[i].Text + '</option>');
                }
                console.log("done");
                $("#boardLinksi").hide();
                $(".boardSelectmulti").val(form_data.showmode);
                $(".boardSelectmulti").show();
            }, "json"); 
        },5000);
    }
  } 
```

在其他浏览器中工作正常，但在 IE 中它永远不会触发。我什至尝试了 getJson 调用仍然没有运气。知道为什么会发生这种情况吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:07:01.193

[在此处免费](http://goo.gl/AM2qX)下载 AJAX 版。查看 IE 的时间轴视图，然后查看 FF，您将很容易发现页面加载期间的差异所在以及导致问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T15:25:26.977

IE 控制台（按 F12）打开时是否有效？如果那样的话，[DroidOS](https://stackoverflow.com/users/1077485/droidos)指出在 IE 中控制台对象是未定义的，直到开发人员控制台至少打开一次（另请参阅[我的问题here](https://stackoverflow.com/questions/19361955/ie9-and-document-ready-dysfunct-except-when-developer-console-is-open/19362039?noredirect=1#comment28725446_19362039)）。

在脚本顶部添加这个小代码：

```
 <!--[if IE]>
    <script type="text/javascript">
        var console = console || {
        log: function() {},
        warn: function() {},
        error: function() {}
    };
    </script>
    <![endif]--> 
```

确保在您包含 JS 文件之前完成此操作。

# android - Spring for Android - 使用 SimpleXML 解析 XML

> ID：14821702
> 
> 赞同：0
> 
> 时间：2013-02-11T22:01:30.843
> 
> 标签：android, spring, xml-parsing

我正在尝试使用[Spring](http://www.springsource.org/spring-android) for Android 来解析 XML 响应。我过去成功地实现了[Spring](http://www.springsource.org/spring-android)来解析 JSON 响应，但由于某种原因我遇到了 XML 问题。

我下载了[Simple](http://simple.sourceforge.net/) jar 并将其添加到我的构建路径中。我没有收到任何编译错误，但是当我运行它时，我遇到了问题。这是我的代码：

```
HttpHeaders requestHeaders = new HttpHeaders();
requestHeaders.setAccept(Collections.singletonList(new MediaType("text","xml")));
HttpEntity<?> requestEntity = new HttpEntity<Object>(requestHeaders);
String url = "MyURL";
RestTemplate restTemplate = new RestTemplate();
restTemplate.getMessageConverters().add(new SimpleXmlHttpMessageConverter());
try{
    ResponseEntity<String> responseEntity = restTemplate.exchange(url, HttpMethod.POST, requestEntity, String.class);
    Log.d(TAG, "response - " + responseEntity.getBody());

}catch(HttpMessageNotReadableException e){
    Log.d(TAG, "message " + e.getMessage());
} 
```

运行此代码时出现的错误如下：

```
02-11 16:49:28.905: E/AndroidRuntime(5454): FATAL EXCEPTION: Thread-126
02-11 16:49:28.905: E/AndroidRuntime(5454): org.springframework.web.client.RestClientException: Could not write request: no suitable HttpMessageConverter found for request type [java.lang.String]
02-11 16:49:28.905: E/AndroidRuntime(5454):     at org.springframework.web.client.RestTemplate$HttpEntityRequestCallback.doWithRequest(RestTemplate.java:632)
02-11 16:49:28.905: E/AndroidRuntime(5454):     at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:473)
02-11 16:49:28.905: E/AndroidRuntime(5454):     at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:438)
02-11 16:49:28.905: E/AndroidRuntime(5454):     at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:414)
02-11 16:49:28.905: E/AndroidRuntime(5454):     at com.rounded.rrbcataloguelibrary.RRBCatalogueActivity.getCategories(RRBCatalogueActivity.java:337)
02-11 16:49:28.905: E/AndroidRuntime(5454):     at com.rounded.rrbcataloguelibrary.RRBCatalogueActivity$7.run(RRBCatalogueActivity.java:395)
02-11 16:49:28.905: E/AndroidRuntime(5454):     at java.lang.Thread.run(Thread.java:856) 
```

此行引发错误：`ResponseEntity<String> responseEntity = restTemplate.exchange(url, HttpMethod.POST, requestEntity, String.class);`

只是为了测试，我使用了这个：`restTemplate.getMessageConverters().add(new StringHttpMessageConverter());`从我的消息转换器中，我得到了作为字符串的正确响应。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:46:55.700

您似乎正在尝试将接受标头设置为邮件正文。这可能不是你想要的...

ResponseEntity 应该包装一个 XML 可序列化的对象（查看转换器代码，好像它正在寻找 @Root 注释）。无论如何，使用 Spring，您（通常）不必担心直接设置接受/内容类型标头，因为这些标头将由 MessageConverters 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:47:27.527

您的返回类型必须不是字符串。我不知道 SimpleXml 想要什么，但如果您使用 JaxB，它将是生成的类

# xml - 如何在处理中保存设置数据，然后稍后加载以供使用

> ID：14821704
> 
> 赞同：0
> 
> 时间：2013-02-11T22:01:56.893
> 
> 标签：xml, save, processing

我正在为一个项目使用[处理](http://processing.org/)和[controlP5](http://www.sojamo.de/libraries/controlP5/)。我有许多用户填写的字段。当用户完成后，我想以某种方式将该数据保存为设置文件，最好是 JSON、XML 或 Plist 文件，以便以后可以重新加载。这样做的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-28T10:32:29.110

对于设置文件，我建议使用[`saveXML()`](https://processing.org/reference/saveXML_.html),[`loadXML()`](https://processing.org/reference/loadXML_.html)和[`parseXML()`](https://processing.org/reference/parseXML_.html)处理功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:30:24.007

对于离线使用，您应该能够 saveStrings() 和 loadStrings()。只要您编写了一个具有 toString() 函数的设置对象，以及可以从那种字符串构建自身的构造函数（因此 t.equals(new Thing(t.toString()) 为真），您就可以编写并将序列化版本读入磁盘。

# java - 我如何将入站和出站肥皂处理程序相互关联

> ID：14821706
> 
> 赞同：1
> 
> 时间：2013-02-11T22:02:00.997
> 
> 标签：java, soap, weblogic

[http://docs.oracle.com/javaee/5/api/javax/xml/ws/handler/soap/SOAPHandler.html](http://docs.oracle.com/javaee/5/api/javax/xml/ws/handler/soap/SOAPHandler.html)

如何将呼入`handleMessage(SOAPMessageContext)`呼叫与呼出关联`handleMessage(SOAPMessageContext)`。

我尝试了一些事情，Weblogic 不重用上下文对象，因此引用检查不起作用。我找不到任何明确指示请求的属性，因此我似乎无法在请求和响应之间创建链接。

或者，是否有更好的方法可以有问题地获取 Web 逻辑上的请求和响应并将它们关联在一起，以便可以将它们转储到数据库中以供将来调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:52:53.973

好的，所以这可能不适用于 JAX-WS 的所有实现，但对于 weblogic 来说确实如此。

我做了什么

```
public final boolean handleMessage(SOAPMessageContext context) {
    // Using `Object` type as we don't have any need to import servlet libraries into a JAX-WS library
    Object o = context.get(MessageContext.SERVLET_REQUEST);
    // o will hold a reference to the request 
    // if inbound.o == outbound.o the request objects are identical and therefor we can associate them.
    return true;
} 
```

我不明白为什么这在其他容器中不起作用，但请在使用此方法之前仔细检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T07:43:58.393

这需要一些样板代码，但它不依赖于应用服务器。

AttachAttributesFilter 将 startTime 和 UUID 添加到属性。然后在 LogSoapHandler 中为入站和出站消息读取这些属性。

日志中的简单搜索将显示特定 UUID 的输入和输出。

```
@WebFilter("/yourwebservice")
public class AttachAttributesFilter implements Filter {

    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {
        request.setAttribute("STARTTIME", System.currentTimeMillis());
        request.setAttribute("UUID",java.util.UUID.randomUUID().toString());
        chain.doFilter(request, response);
    }

} 
```

然后我使用 LogSoapHander 中的属性

```
public class LogSoapHandler implements
        javax.xml.ws.handler.soap.SOAPHandler<SOAPMessageContext> {

    public boolean handleMessage(SOAPMessageContext messagecontext) {
        Boolean outbound = (Boolean) messagecontext.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
        String messageID = (String) httpSR.getAttribute("UUID");
        Object startTime = httpSR.getAttribute("STARTTIME");
        try {
            final SOAPMessage message = messagecontext.getMessage();
            String encoding = getMessageEncoding(message);
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            boolean fault = (message.getSOAPBody().hasFault());

            message.writeTo(baos);
            String body = (baos.toString(encoding));
            log.info(outbound+"|"+messageID+"|"+startTime+"|"+System.currentTimeMillis()+"|"+body+"|"+fault));

        } catch (SOAPException | IOException ex) {
            //handle your error
        }
        return true;
    }
    private String getMessageEncoding(SOAPMessage msg) throws SOAPException {
        String encoding = "utf-8";
        if (msg.getProperty(SOAPMessage.CHARACTER_SET_ENCODING) != null) {
            encoding = msg.getProperty(SOAPMessage.CHARACTER_SET_ENCODING)
                    .toString();
        }
        return encoding;
    } 
```

并完成 HandlerChain 锅炉板：

```
@HandlerChain(file="loghandler.xml")
public class MyWSDL {
..
} 
```

日志处理程序.xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<javaee:handler-chains 
    xmlns:javaee="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <javaee:handler-chain>
        <javaee:handler>
            <javaee:handler-class>xxx.LogSoapHandler</javaee:handler-class>
        </javaee:handler>
    </javaee:handler-chain>
</javaee:handler-chains> 
```

# c# - Windows 上的黑屏

> ID：14821710
> 
> 赞同：-1
> 
> 时间：2013-02-11T22:02:09.550
> 
> 标签：c#

我看到一个关于 Linux 的问题，如果麦克风上的噪音在很长一段时间内变得太高，屏幕就会变黑。提问者想用它让孩子们在玩游戏时保持安静。 [Linux黑屏](https://superuser.com/questions/545329/blank-screen-if-kids-yell-too-much)

如何在 Windows 上使用 C# 完成相同的任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:07:01.387

这是关闭屏幕的方法：

```
using System.Runtime.InteropServices; //to DllImport

public int WM_SYSCOMMAND = 0x0112;
public int SC_MONITORPOWER = 0xF170; //Using the system pre-defined MSDN constants that can be used by the SendMessage() function .

[DllImport("user32.dll")]
private static extern int SendMessage(int hWnd, int hMsg, int wParam, int lParam);
//To call a DLL function from C#, you must provide this declaration .

private void button1_Click(object sender, System.EventArgs e)
{

SendMessage( this.Handle.ToInt32() , WM_SYSCOMMAND , SC_MONITORPOWER ,2 );//DLL function
} 
```

# java - ArrayList类型java制作数组

> ID：14821711
> 
> 赞同：-4
> 
> 时间：2013-02-11T22:02:09.250
> 
> 标签：java, arraylist

```
 ArrayList doscObject=[{id=21},{id=212}]; 
```

我想获得一个包含所有 id 的数组名称 IdArray，如上面的示例输出应该如下所示： IdArray={21,212} 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:11:48.433

考虑到您想要一个普通数组而不是 ArrayList。

```
int[] idList = IDObj[docsObject.size()];
for (int i=0;i<docsObject.size();i++)
{
    idList[i] = docsObject.get(i).getId();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:06:06.857

假设你有一个类`IdObj`：

```
public class IdObj {
   int id;
   public int getId();
} 
```

并且`docsObjects`包含类型的对象`IdObj`，然后`ArrayList` 通过迭代创建`docsObject`：我使用了`forEach`for 循环的类型：

```
 ArrayList<Integer> idList = new ArrayList<Integer>();
   for (IDObj idObj in docsObject) {
       idList.add(idObj.getId()); 
    } 
```

如果 docObjs 是（值 IdObj）的 HashMap，您可以迭代：

```
 ArrayList<Integer> idList = new ArrayList<Integer>();
   for (Map.Entry entry in docsObject.entrySet()) {
        IdObj idObj = entry.getValue();
        idList.add(idObj.getId()); 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:06:57.363

您需要先创建一个足够大的结果数组来保存原始数组中的所有值（因为数组大小是固定的，您需要在使用前声明），然后将每个数组复制到新数组中：

```
int[] idArray = new int[doscObject.size()];
for(int i=0, max = doscObject.size(); i<max; i++){
    idArray[i] = ((Map)doscObject.get(i)).get("id");
} 
```

如果 Java 有一个用于映射数组的二阶函数会容易得多，但它没有，所以你需要手动完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T22:09:04.077

这个问题没有多大意义，但我将简要介绍两种集合类型之间的工作......

数组：

```
int[] idArray = {21, 212}; 
```

数组列表：

```
List<Integer> doscObject = new ArrayList<Integer>();
doscObject.add(21);
doscObject.add(212); 
```

数组列表 -> 数组：

```
Integer[] idArray = doscObject.toArray(new Integer[doscObject.size()]); 
```

数组 -> 数组列表：

```
Collections.addAll(doscObject, idArray); 
```

# ios - iOS UI 自动化元素找不到子元素

> ID：14821713
> 
> 赞同：5
> 
> 时间：2013-02-11T22:02:11.200
> 
> 标签：ios, objective-c, ios-ui-automation

我刚刚开始为我的 iOS 应用程序使用 UI 自动化并且已经遇到了麻烦。我无法附上屏幕截图，所以我会尽力描述我的场景。

我正在为 iOS 6.0 构建并使用故事板。应用程序启动到带有导航控制器的屏幕。根视图控制器包含一个主视图，该主视图具有 1 个占据屏幕底部 60% 的 UIView 子视图和一个位于该子视图上方的分段控件。我能够配置主视图的可访问性（标签“主视图”）。然后我可以在我的测试中找到这个元素没问题。但是，我现在无法找到分段控制器。所以我决定从我的“mainview”元素中注销“elements()”和“segementedControls()”的长度，每个数组的长度为0。所以当测试运行我的应用程序时，它说没有子-我的主要观点上的元素。

需要注意的另一件事是，我在情节提要编辑器的身份检查器中找不到任何可访问性部分，用于分段控件。但是，我暂时在主视图中添加了一个按钮，并使用可访问性标签对其进行了配置，只是为了测试在运行我的测试时，elements() 或 buttons() 调用是否会随后显示主视图的元素，但这些数组仍然返回为空，即使有按钮。

这是我的脚本：

```
var target = UIATarget.localTarget();
var app = target.frontMostApp();

function selectListView() {
var testName = "selectListView";

UIALogger.logStart(testName);

var view = app.mainWindow().elements()["mainview"];
if (!view.isValid()) {
    UIALogger.logFail("Could not locate main view");    
}

UIALogger.logMessage("Number of elements for sub element: " + view.elements().length);

var segmentedControl = view.segmentedControls()[0];
if (!segmentedControl.isValid()) {
    UIALogger.logFail("Could not locate segmented control on physician collection parent view");
}

var listButton = segmentedControl.buttons()[1];
if (!listButton.isValid()) {
    UIALogger.logFail("Could not locate list button on segemented controller on physician collection parent view"); 
}

UIALogger.logMessage("Tapping List button on physician collection view's segmented control");
listButton.tap();

UIALogger.logPass(testName);
}

selectListView(); 
```

非常感谢任何帮助。

编辑：我将此添加到我的脚本中以从主窗口搜索整个视图层次结构，在 initWithCoder 中为我的分段控件设置一个可访问性标签值（因为我似乎无法在情节提要编辑器中为分段控件设置一个，正如我之前所说的）并且仍然找不到元素 - 就好像它不在视图层次结构中，尽管它在屏幕上并且功能很好：

```
function traverse(root, name) {
if (root.name() == name) {
    return root;
}

var elements = root.elements();

for (var i = 0; i < elements.length; i++) {
    var e = elements[i];

    var result = traverse(e, name);
    if(result != null) {
        return result;
    } 
}

return null;
}

function selectListView() {
var testName = "selectListView";

var segmentedControl = traverse(UIATarget.localTarget().frontMostApp().mainWindow(), "mysegementedcontrol");
if (segmentedControl == null) {
    UIALogger.logMessage("Still could not find it");
}

....
} 
```

编辑：添加了对 app.logElementTree() 的调用，但仍然看不到分段控件（“PhysicianCollectionParentView”是我的“主视图” - 你可以看到，那里没有子元素）：

![在此处输入图像描述](../Images/6b694549676c032ea2270a58b560326b.png)

编辑：这是一些屏幕截图。第一个显示我的“主”视图控制器。接下来显示除了分段控件之外还有一个 UIView 子视图。第三个显示了我的故事板中应用程序的基本入口点。

![这表明](../Images/c83b05793fc03e411dcb9be92a68b771.png)

![这说明除了分段控件之外还有一个 UIView 子视图](../Images/e2f39c7b6922586b4cf7baedb17e004e.png)

![这显示了我的故事板文件的基本入口点部分](../Images/f8bf44afe11af6df295845510644e499.png)

这是我的“主”视图控制器的类扩展，显示了分段控件和其他 UIView 子视图的出口：

```
@interface PhysicianCollectionMasterViewController ()
@property (strong, nonatomic) IBOutlet UISegmentedControl *viewSelectionControl;
@property (strong, nonatomic) IBOutlet UIView *physicianCollectionView;
@end 
```

编辑：这里有一些非常有趣的东西——我决定使用在乐器中创建的全新脚本并利用记录功能。当我单击我的分段控件时，它创建的 JavaScript 向我展示了它是如何访问我的分段控件上的一个按钮的：

```
var target = UIATarget.localTarget();

target.frontMostApp().mainWindow().elements()["PhysicianCollectionParentView"].tapWithOptions({tapOffset:{x:0.45, y:0.04}}); 
```

所以，我想在最坏的情况下我可以使用这样的东西，但 UI 自动化认为控件不存在对我来说毫无意义。这么奇怪。一定有一些我遗漏的东西，但我的设置是如此基本，我无法想象它会是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-14T00:52:44.193

当您为元素设置 accessibilityLabel 并标记它`isAccessibilityElement = YES;`时，该元素的子视图将被隐藏。对于自动化，您应该使用accessibilityIdentifier 而不是accessibilityLabel 并设置`isAccessibilityElement = NO;`

在医师CollectionView 渲染后的目标 C 代码中，删除标签和可访问性标志并改为执行以下操作：

```
physicianCollectionView.accessibilityIdentifier = @"PhysicianCollectionParentView";
physicianCollectionView.isAccessibilityElement = NO; 
```

对于元素树中没有子视图的最后一个元素，设置`isAccessibilityElement = YES;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:00:36.937

如果您还没有尝试过，您可以尝试在脚本开头添加延迟：

```
UIATarget.localTarget().delay(3); 
```

我认为您的应用程序可能在您上面发布的 logElementTree() 之前没有完成渲染/动画。我们在自动化测试脚本的开始和每个应用程序转换之间添加延迟，以确保屏幕已完成渲染。

编辑：在测试应用程序中弄乱了您的设置后，我相信您的问题是您在包含分段控件的 UIView 上启用了可访问性。在 UIView 上禁用可访问性后，我可以让 UISegmentedControl 在元素树中显示，但是一旦启用它，UIView 就会开始显示为没有子元素的 UIAElement。我的建议是禁用包含 UIView 的可访问性，并且仅对基本控件（如按钮、表格视图单元格或分段按钮控件）使用可访问性。

# java - (JAVA) 使用命令提示符从多个 .class 文件创建 .jar 文件

> ID：14821715
> 
> 赞同：9
> 
> 时间：2013-02-11T22:02:14.297
> 
> 标签：java, command-line, jar, javac

我编写了一个名为 Main.java 的 .java 文件，并使用 Windows 命令提示符中的 javac 对其进行了编译。编译器正在创建多个 .class 文件（称为 Main.class、Main$1.class 和 Main$2.class——可能是因为我的 Main.java 文件中有匿名内部类）。我正在尝试创建一个可运行的 .jar 文件，这样我就可以双击一个快捷方式来运行这个应用程序（它是一个 Java Swing 应用程序），但是当我导航到三个类文件的目录并键入时我没有成功：

```
jar cfv file.jar Main.class Main$1.class Main$2.class 
```

命令提示符然后输出此文本：

```
added manifest
adding: Main.class(in 4871) (out = 2848)(deflated 41%)
adding: Main$1.class(in 1409) (out = 833)(deflated 40%)
adding: Main$2.class(in 1239) (out = 767)(deflated 38%) 
```

尽管如此，当我在 Windows 资源管理器中双击 file.jar 文件时，简单地说，什么也没有发生。没有打开任何摇摆应用程序。

希望有人可以帮助我解决这个问题。谢谢

最好的...SL

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T22:06:37.283

您需要使用入口点开关`-e`（使用包含`main()`方法的类的名称），如下所示：

```
jar cfve file.jar Main Main.class Main$1.class Main$2.class 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T22:05:39.657

必须告诉 java 应该自动启动哪个类。这就是 Manifest - 请参阅[此处](http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)的描述 您必须将 Manifest.mf 打包到您的 jar 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-02T07:03:27.693

1.  打开命令提示符
2.  cd 转到 jar 文件所在的路径
3.  运行命令`jar xf fileName.jar`
4.  它将生成 com, `META-INF`&`Copyright.mk`文件
5.  转到您要修改类文件的特定包（基本上是 com 目录中的类文件）
6.  从谷歌下载`JAD.exe`（它的 Zip 文件）
7.  提取您将获得的 Zip 文件`jad.exe`
8.  将类文件（您要修改的）放在包含的文件夹中`jad.exe`
9.  转到命令提示符，运行`jad fileName.clas`s（您要修改的类文件名）
10.  `fileName.jad`文件将生成，将其重命名为`fileName.java`
11.  编译`fileName.java`（如果它引用了其他一些类文件，则在eclipse中相应地配置它）
12.  编译后替换步骤 4 中定义的目录中的类文件
13.  转到命令提示符，cd Step 4 path，运行`jar cf fileName.jar`（*代表所有类文件，不考虑目录）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-17T11:09:43.860

1.  打开 cmd (windows+r 键入 cmd)
2.  将命令简单地键入为没有 quatoes 的“jar”
3.  它将提供一些选项和那些用法。
4.  使用你想要的
5.  要创建一个带有类的 jar 文件，请提及 jar cfv filename.jar example.class example2.class 等。
6.  如果您使用 swing 编译它与 javac -deprecation SwingApplication.java 但JDK版本必须大于版本JDK1.1
7.  运行 java SwingApplication
8.  一切顺利

# python - 为什么我的字典中的 Unicode 字符没有打印出来？

> ID：14821718
> 
> 赞同：1
> 
> 时间：2013-02-11T22:02:30.390
> 
> 标签：python, unicode

我有一本包含一些 Unicode 字符的字典，并且我使用的控制台设置为打印 UTF-8，但是当我尝试从字典中打印密钥时，我得到了一个错误。

```
import sys
print u'\xc9'
print sys.stdout.encoding

unicode_dict = {u'a': 3,
                u'b': 4,
                u'c': 5,
                u'\xc9': 1,
                u'\xc8': 2}

for k, v in unicode_dict.iteritems():
    print "{0}: {1}".format(k, v) 
```

当我运行此代码时，我收到以下错误：

```
É
UTF-8
a: 3
Traceback (most recent call last):
  File "unicodetest.py", line 12, in <module>
    print "{0}: {1}".format(k, v)
UnicodeEncodeError: 'ascii' codec can't encode character u'\xc9' in position 0: ordinal not in range(128) 
```

这里发生了什么？为什么 print 给我这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:05:42.473

这一行：

```
print "{0}: {1}".format(k, v) 
```

表示您正在尝试将字符串转换为 ASCII，如错误所示。不要那样做：要么将其保存在 unicode 中，然后根据需要获取输出进行转换：

```
print u"{0}: {1}".format(k, v) 
```

或使用支持这些字符的东西显式转换它，可能是 utf-8：

```
print "{0}: {1}".format(k.encode('utf-8'), v) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T14:42:59.890

如果你从未来的模块中导入 unicode_literals，它应该表现得像你想要的那样。只需添加

```
from __future__ import unicode_literals 
```

作为文件中的最上面一行。然后，您链接的代码将表现得像 Daniel Roseman 的：

```
print u"{0}: {1}".format(k, v) 
```

# python - 将列表精确划分为两组的 Pythonic 方法

> ID：14821719
> 
> 赞同：0
> 
> 时间：2013-02-11T22:02:45.153
> 
> 标签：python, iterator

基本上我想要做的是获取两个对象列表并根据一些测试并将它们分为两个列表，具体取决于结果是`True`还是`False`. `filter()`除了确定它是进还是出之外，它决定了要转到哪个列表/迭代器，而不是确定它是做什么的。我已经尝试使用`itertools.groupby()`：

```
import random
from itertools import groupby

class FooObject(object):
    def __init__(self):
        self.key = random.choice((True, False))

    def __repr__(self):
        return '<Foo: %s>' % self.key

foos = [FooObject() for _ in range(10)]
left, right = [], []

groups = groupby(sorted(foos, key=lambda o: o.key), lambda o: o.key)
for k, group in groups:
    if k:
        right = list(group)
    else:
        left = list(group)

print left
print right 
```

这可以完成工作，但只是想知道是否有更清晰/更简单的方法。我意识到我可以使用`filter()`（或等效的列表理解）并在两遍中完成，但这有什么乐趣呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:16:24.773

这是一个函数，它只使用一次源并返回一个类似字典的对象，它的每个成员都是一个生成器，它尽可能地从源中产生值：

```
def partition(it, fun):

    class x(object):
        def __init__(self):
            self.buf = {}

        def flush(self, val):
            for p in self.buf.get(val, []):
                yield p
            self.buf.pop(val, None)

        def __getitem__(self, val):
            for p in self.flush(val): yield p
            while True:
                try:
                    p = next(it)
                except StopIteration:
                    break
                v = fun(p)
                if v == val:
                    yield p
                else:
                    self.buf.setdefault(v, []).append(p)
            for p in self.flush(val): yield p

    return x() 
```

使用示例：

```
def primes(): # note that this is an endless generator
    yield 2
    p, n = [], 3
    while True:
        if all(n % x for x in p):
            p.append(n)
            yield n
        n += 2

p = partition(primes(), lambda x: x % 3)
# each member of p is endless as well

for x in p[1]:
    print x
    if x > 200: break

for x in p[2]:
    print x
    if x > 200: break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:11:07.910

如果你只有 2 个桶，你可以使用三元：

```
d={'left':[],'right':[]}
for e in (random.random() for i in xrange(50)):
    d['left' if e<0.5 else 'right'].append(e) 
```

如果存储桶超过 2 个，请使用返回已定义键的函数或使用带有列表的默认字典：

```
def f(i):
   return int(i*10)

DoL=defaultdict(list)
for e in (random.random() for i in xrange(50)):
   DoL[f(e)].append(e) 
```

# javascript - 通过 https 的 Ajax 请求仅在 chrome 中挂起 40 秒

> ID：14821725
> 
> 赞同：1
> 
> 时间：2013-02-11T22:03:17.507
> 
> 标签：javascript, ajax, google-chrome, xmlhttprequest

我正在从 https 页面向 https 页面提交 Ajax 请求。在所有其他浏览器中，这会立即完成，但在 Chrome 中，它会挂起很长时间（通常大约 40 秒）。

这可能是什么原因造成的？我如何解决它？

**也会导致挂起的示例 JQuery 代码**

```
<html>
<head>
    <script type="text/javascript" src="jquery-1-9-1.js"></script>
</head>
<body>
<br/>
<a onclick="doit()">go</a>
<script>
    function doit()
    {
        var myData = { "key": "value" };
        $.ajax({
                url: "myhandlepage.php",
                data: myData,
                dataType: 'json',
                type: 'POST',
                contentType: 'application/x-www-form-urlencoded',
                success: function (data) { alert("OK = " + data.eric); },
                error: function (data, status) { alert("FAILED:" + status); }
        });
    }
</script>
</body>
</html> 
```

**示例代码**

```
//Create browser-compliant request object
if( typeof XMLHttpRequest === "undefined" ) XMLHttpRequest = function()
{
    try { return new ActiveXObject("Msxml2.XMLHTTP.6.0"); } catch(e) {}
    try { return new ActiveXObject("Msxml2.XMLHTTP.3.0"); } catch(e) {}
    try { return new ActiveXObject("Msxml2.XMLHTTP"); } catch(e) {}
    try { return new ActiveXObject("Microsoft.XMLHTTP"); } catch(e) {}

    throw new Error( "This browser does not support XMLHttpRequest." );
};

//Create object
var ajax = new XMLHttpRequest();    

//We need to open the object
ajax.open( "post", "/myhandlepage.php", true );

//Now set the callback
ajax.onreadystatechange = function()
{
    //elided, but doesn't matter, I can see the 40+ second delay in chrome developer tools
}.bind( this );

//Send the request
ajax.send( mycontent ); 
```

澄清一下：Chrome 的开发者工具中没有显示任何错误。

**编辑：**这个问题似乎只发生在第一次请求 Chrome 中的选项卡/页面时。在第一个滞后请求之后，同一选项卡/页面中的所有 ajax 请求似乎都会立即通过。

**更多信息** 仅在挂起请求上查看 chrome:net-internals/#events，在所有请求的中间，我看到了这个：

```
t=1360622033867 [st=    4]        HTTP_STREAM_PARSER_READ_HEADERS  [dt=38643]
                              --> net_error = -100 (ERR_CONNECTION_CLOSED) 
```

然后它再次发送整个请求，第二次立即通过。什么可能导致第一个失败的请求？自打开浏览器以来，每次我第一次向该 URL 发出请求时都会发生这种情况。

# ajax - Drupal中openscholar配置文件的ajax错误

> ID：14821728
> 
> 赞同：1
> 
> 时间：2013-02-11T22:03:21.080
> 
> 标签：ajax, drupal, installation

为 OpenScholar 3.x 创建 Drupal 7.19 网站失败并显示消息：“网站在检索 /install.php?profile=openscholar&locale=en&id=1&op=finished 时遇到错误”。

这出现在 Lion 的“安装配置文件”阶段，尽管 php max_execution_time = 240 和 memory_limit = 128 MB，但使用 MAMP；在安装了 >80% 的模块之后，并且就在安装了 Google_Analytics 模块之后。（同样的事情发生了，确切地说，是否存在 .gitignore；并且 max_execution_time = 30）。使用 git 将 OpenScholar 内容放置在 Drupal 配置文件目录中，这似乎是正确的，因为据报道发现并安装了大约 80% 的 OpenScholar 模块。

在我的最后是否有一个修复程序，或者这是 OpenScholar 3.x 中的一个错误（生产版本中尚不可用，但似乎对其他人有用）？

我收到了从 openscholar.info 文件中删除 os_ga 并删除安装文件的建议。在我两个都做了之后（一个人都失败了），安装完成了。然而，出现了许多严格的警告。我还没有尝试独立于 OpenScholar 配置文件方法引入 ga（谷歌分析）模块。

无论如何，这种经验可能对其他人有用。

# ios - iPad Mini 在模态转场上崩溃

> ID：14821729
> 
> 赞同：0
> 
> 时间：2013-02-11T22:03:23.437
> 
> 标签：ios, segue, mfmailcomposeviewcontroller, ipad-mini

我正在开发一个可以在所有部署目标模拟器 (5.0-6.1) 以及我的 iPhone 3GS、4、4S 和第 2 代 iPad 上运行的应用程序。我今天有机会尝试在 iPad Mini 上运行它。我在任何地方工作，除非我尝试使用 MFMailComposeViewController 对象发送电子邮件，这会导致它崩溃并出现异常。

我直接使用 MailComposer 示例项目中的代码，但它在调用 presentModalViewController:animated: 时总是崩溃。所以我尝试了 presentViewController:animated:completion: 因为另一种方法已被弃用，但它仍然不起作用。

我链接到 MessageUI.framework 导入了类：

```
#import <MessageUI/MessageUI.h>
#import <MessageUI/MFMailComposeViewController.h> 
```

委托已设置。这是代码：

```
-(void)displayComposerSheet
{
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    [picker setSubject:@"Contact Email"];

    // Set up recipient
    NSArray *toRecipients = [NSArray arrayWithObject:@"info@foo.bar"];
    [picker setToRecipients:toRecipients];

    //  [self presentModalViewController:picker animated:YES];
    [self presentViewController:picker animated:YES completion:NULL];
} 
```

iPad Mini 中可能存在导致此问题的错误吗？我没有任何其他可以试用的新设备，所以我不确定它是小问题还是更大的问题。任何帮助将不胜感激，因为我已准备好提交给 Apple，但我肯定不想因为崩溃的错误而这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:27:37.070

尝试包装您的 MFMailComposeViewController 代码

```
if ( [MFMailCompseViewController canSendMail]) 
```

我猜该设备上没有邮件设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:27:56.550

可能是尚未设置邮件帐户或由于某些其他原因无法发送电子邮件。

一定`+ (BOOL)canSendMail`要先调用 MFMailComposeViewController 的函数。

# backbone.js - 骨干路由器、pushstate 和相对 url

> ID：14821732
> 
> 赞同：1
> 
> 时间：2013-02-11T22:03:30.457
> 
> 标签：backbone.js, pushstate, backbone-routing

我正在制作我的第一个主干应用程序。我启用了 pushstate。在路由器中，我有两条路线。

```
 'link1(/)' : 'link1Route',              
    'link2(/)' : 'link2Route' 
```

在我的链接 1 页面上，我有一个指向链接 2 的链接，如下所示：

```
 <a href="link2">Link2</a> 
```

我单击链接，路由器接管并按预期转到link2Route。但是，如果我将鼠标悬停在链接上，状态栏会显示链接位于 domain.com/link1/link2 而不是 domain.com/link2。鉴于 link1 页面上的相对 url 结构，这是正确的。不幸的是，如果用户决定在新窗口或选项卡中打开链接，骨干网的路由器将不会生效。这是意料之中的，因为在新窗口或选项卡中打开会导致从服务器加载新页面。问题当然是 domain.com/link1/link2 不存在。

有哪些方法可以处理这种情况？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T18:10:53.580

正如 mateusmaso 所指出的，您需要将链接目标更改为“/link2”（即包括“/”）。

此外，在实现 pushState 时，不要忘记如果用户请求“domain.com/link2” URL，您需要您的服务器响应内容。如果您愿意，响应可以是`index.html`，但服务器必须返回该 URL 的页面。

如果您返回`index.html`所有与 Backbone 相关的 URL，当您的 Backbone 应用程序启动时，将触发路由处理代码并显示正确的数据。

如果您想了解有关路由的更多信息以及如何正确管理路由而无需`trigger: true`在调用时通过`navigate`，请查看此免费示例 pdf 的第 32-46 页：http: [//samples.leanpub.com/marionette-gentle-introduction-sample .pdf](http://samples.leanpub.com/marionette-gentle-introduction-sample.pdf)（完全披露，我是本书作者）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:06:49.860

您必须在服务器级别提供正确的 index.html - 因为这是在 JavaScript 甚至加载到页面之前。

[http://readystate4.com/2012/05/17/nginx-and-apache-rewrite-to-support-html5-pushstate/](http://readystate4.com/2012/05/17/nginx-and-apache-rewrite-to-support-html5-pushstate/)

# java - 如何持久化 EnumSet（使用两个数据库表）？

> ID：14821734
> 
> 赞同：7
> 
> 时间：2013-02-11T22:03:35.143
> 
> 标签：java, hibernate, jpa, enums, persistence

我想将一组选项表示为我的实体中的 EnumSet 和我的数据库中的一对多关系。这是如何正确完成的？我只能找到旧的（预注释）答案或不使用两个表格的答案。

我定义了以下表格：

```
CREATE TABLE Users (
    id                      SERIAL PRIMARY KEY,
    name                    VARCHAR(255) NOT NULL UNIQUE
);

CREATE TABLE User_Options (
    user_id                 INT,
    user_option             VARCHAR(255),
    PRIMARY KEY (user_id, user_option),
    FOREIGN KEY (user_id) REFERENCES Users(id)
                ON DELETE CASCADE
                ON UPDATE CASCADE
); 
```

这个实体类：

```
@Entity(name = "Users")
public final class User {

    @Id
    @GeneratedValue
    private int id;

    @Column(nullable = false, unique = true)
    private String name;

    private final Set<UserOption> options;

    {
        this.options = EnumSet.noneOf(UserOption.class);
    }

    /* plain getter for id included */

    /* plain getter and setter for name included */

    @ElementCollection(fetch = FetchType.EAGER)
    @Enumerated(EnumType.STRING)
    @CollectionTable(name = "User_Options"
            , joinColumns = @JoinColumn(name = "user_id"))
    @Column(name = "user_option", nullable = false)
    public Set<UserOption> getOptions() {
        return this.options;
    }

} 
```

当然还有一个枚举：

```
public enum UserOption {

    OPTION_A,
    OPTION_B,
    OPTION_C;

} 
```

当我启动 Tomcat 时，出现以下异常：

```
org.hibernate.MappingException: Could not determine type for: java.util.Set, at table: Users, for columns: [org.hibernate.mapping.Column(options)] 
```

这个异常是一堆相互导致的异常的根源。它会导致`javax.persistence.PersistenceException`（无法构建EntityManagerFactory），进而导致一些依赖注入异常。

我承认我对 JPA/Hibernate 不够精通，无法理解我做错了什么。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T11:46:28.927

事实证明，答案比我想象的要简单。您不能在实例变量和 getter 上混合使用 JPA 注释。注释本身很好。我按如下方式更改了我的实体类，现在一切正常。

```
@Entity(name = "Users")
public final class User {

    @Id
    @GeneratedValue
    private int id;

    @Column(nullable = false, unique = true)
    private String name;

    @ElementCollection(fetch = FetchType.EAGER)
    @Enumerated(EnumType.STRING)
    @CollectionTable(name = "User_Options"
            , joinColumns = @JoinColumn(name = "user_id"))
    @Column(name = "user_option", nullable = false)
    private final Set<UserOption> options;

    {
        this.options = EnumSet.noneOf(UserOption.class);
    }

    /* plain getter for id included */

    /* plain getter and setter for name included */

    public Set<UserOption> getOptions() {
        return this.options;
    }

} 
```

# javascript - 根据下拉列表更改输入字段的标签

> ID：14821735
> 
> 赞同：1
> 
> 时间：2013-02-11T22:03:36.027
> 
> 标签：javascript

我正在尝试根据下拉列表中的选择更新输入字段上的文本标签。

下面的字段标签默认为“平均值”。如果选择了选项 2，我希望将其替换为“下限”。

```
<simpleLabel for="distLabel">Prior distribution, <i>CFR</i>:</label>
<select id="priorCFRDistType" onchange='changePriorDistType();'>
<option value="1">beta</option>
<option value="2">uniform</option>
</select>
<p>
<simpleLabel for="cfr_1">Mean:</label>
<input id="cfr_1" type="text" value ="0.05" /> 
```

在我的`.js`文件中，我有`changePriorDistType()`. 它目前在引擎盖下做了很多事情。如何让它更新文本字段？这是我迄今为止尝试过的：

```
function changePriorDistType() {
    menuItem = document.getElementById("priorCFRDistType");
    priorCFRDistType = menuItem.options[menuItem.selectedIndex].value;
    if ( priorCFRDistType == 2 ) {
       var tmpThing = document.getElementById("cfr_1").innerText;
       tmpThing = "Lower bound";
    }
} 
```

这行不通。我显然是 Javascript 和 HTML 的新手，所以没有什么太明显可以指出的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:17:05.473

第一个错误（除了不匹配的标签）是`getElementById("cfr_1")`你得到的元素 id`cfr_1`是`input`元素而不是标签。

第二个错误是，`tmpThing = "Lower bound"`您不会更改元素的 innerText 。你需要做例如`document.getElementById('cfr_1_label').innerText = "Lower bound"`（但这需要你将 id 添加`cfr_1_label`到`label`标签中）

# drupal-6 - 限制视图 UI 中的可用窗格

> ID：14821736
> 
> 赞同：3
> 
> 时间：2013-02-11T22:03:35.897
> 
> 标签：drupal-6, drupal-views

我正在尝试配置视图 UI，以便用户只能看到特定的窗格（即只有字段、过滤器和样式设置窗格）。我测试了[SimpleViews](http://drupal.org/project/simpleviews) and [Views UI: Edit Basic Settings](http://drupal.org/project/views_ui_basic)模块，但它并没有那么有用。

使用 jQuery 隐藏窗格也不是一个好方法。

有没有人有办法解决吗？

# c - C中基本数据类型的大小

> ID：14821738
> 
> 赞同：4
> 
> 时间：2013-02-11T22:03:38.700
> 
> 标签：c, types

我有一个从某个网站复制的示例程序。

```
int main(void)
{
   int answer;
   short x = 1;
   long y = 2;
   float u = 3.0;
   double v = 4.4;
   long double w = 5.54;
   char c = 'p';

   typedef enum
   {
      kAttributeInvalid,
      kBooleanAttributeActive,
      kBooleanAttributeAlarmSignal,
      kBooleanAttributeAlign64,
      kBooleanAttributeAutoNegotiationComplete,
   }codes_t;

  /* __DATE__, __TIME__, __FILE__, __LINE__ are predefined symbols */
  #if 0
  printf("Date : %s\n", __DATE__);
  printf("Time : %s\n", __TIME__);
  printf("File : %s\n", __FILE__);
  printf("Line : %d\n", __LINE__);
  #endif

  /* The size of various types */
  printf("The size of int         %zu\n", sizeof(answer));
  printf("The size of short       %zu\n", sizeof(x));
  printf("The size of long        %zu\n", sizeof(y));
  printf("The size of float       %zu\n", sizeof(u));
  printf("The size of double      %zu\n", sizeof(v));
  printf("The size of long double %zu\n", sizeof(w));
  printf("The size of char        %zu\n", sizeof(c));
  printf("The size of enum        %zu\n", sizeof(codes_t));

  return 0;
} 
```

我运行了这个程序，得到的输出如下。

```
The size of int         4
The size of short       2
The size of long        8
The size of float       4
The size of double      8
The size of long double 16
The size of char        1
The size of enum        4 
```

我在运行 64 位 Ubuntu 的 linux PC 上运行它。我的问题是，如果我要在 32 位机器上运行相同的程序，我会看到不同的结果。或者换句话说，基本数据的大小类型取决于

1.  处理器
2.  操作系统
3.  还要别的吗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T22:06:21.057

> 我的问题是，如果我要在 32 位机器上运行相同的程序，我会看到不同的结果吗

也许。或者可能不是。

> 或者换句话说，基本数据类型的大小是否取决于 1) 处理器 2) 操作系统 3) 其他任何东西

1.  是的，2\. 是的，3\. 是的，例如，如果您在 64 位操作系统上以 32 位兼容模式运行 32 位应用程序，那么它很可能会使用 32 位字长（当然，它是这样编译的）。哦，是的，它也可能取决于编译器。

*“还有你的编译器标志......”*（谢谢，凯！）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T22:09:05.670

如果您关心变量的确切大小，请使用

```
#include <stdint.h> 
```

然后使用那里定义的固定宽度类型：

```
uint8_t
uint16_t
uint32_t
uint64_t 
```

或他们签名的表亲

```
int8_t
int16_t
int32_t
int64_t 
```

不要依赖 C 中本机类型的大小。不同的编译器有不同的规则。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T22:32:34.933

如果必须在它的 32 位变体中安装一些库 [可能只是 glibc]，您应该可以使用`gcc -m32 myprog.c`[or `clang -m32 myprog.c`] 自己尝试一下。

但是，如果您使用基于 gcc 的编译器从 64 位 x86 linux 系统迁移到 32 位 x86 linux 系统，列出的项目中唯一会发生变化的是`long`. 请注意 x86、gcc 等的严格限定——编译器有很大的自由度。有人可以为 Linux 编写一个编译器，在 32 位系统上使用 16 位`int`和 64 位，没有太大的困难。`long`使用该编译器编译 Linux 内核和许多 Linux 工具可能会失败 [很可能包括`gcc`使用该编译器进行编译]。但是你不能真的说“在这个架构上”或“在这个操作系统中”或“使用这个编译器”......而不限定其他参数是什么。

恰当的例子：`long`即使在 64 位系统上，Microsoft C/C++ 编译器也有 32 位的。为什么，我听到你问？`long`因为当 Windows 是 Intel 286/386 处理器上的 16 位操作系统时，大量 Windows API 函数用作 32 位值作为遗留值。由于（某些）系统调用在 Windows 中向后兼容很长一段时间，为 16 位系统编写的代码仍然可以在 64 位 Windows 上工作 [除非代码使用一些非常不寻常的系统调用，当然, STYLE 会显得有点古旧]。更改`long`为 64 位值会破坏某些功能，因此 MS 的编译器人员决定坚持使用`long`= 32 位。如果你想要 64 位整数，你必须使用`long long`or`int64_t`或其他东西，而不是`long`. 当然，这会破坏一些假定`sizeof(long) == sizeof(void *)`. 希望大多数这样的代码已经被修复......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T22:08:11.803

是的，在某些情况下，它取决于硬件、操作系统、编译器甚至语言。

但是在 x86 linux 上，long 在 32 位平台上将是 4 个字节，而不是 8 个。我相信其他的都保持不变（不确定 long double）。

轶事：

我在一个字长为 24 位的 24 位系统上工作过，每个本机类型的大小为 1 个字。大小（字符）？1（即：24 位）。大小（整数）？1（即：24 位）。等有趣！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-11T22:18:36.690

大小由编译器在编译时固定设置，因为编译器必须发出特定于大小的指令，在结构中布置成员，并知道所有需要的地址计算的结构大小。

因此，如果您将源代码编译为 64 位二进制文​​件并在一堆不同的系统上运行，如果系统完全支持二进制文件，则每次运行时类型将具有相同的大小。

如果您随后将源代码编译为 32 位二进制文​​件或使用不同的编译器开关，当您在一堆不同的系统上运行它时，数字可能与 64 位的情况不同，但它们在所有不同的情况下都是一致的系统。

# c# - 用于集合的 ASP.NET MVC ViewModel 最佳实践

> ID：14821740
> 
> 赞同：0
> 
> 时间：2013-02-11T22:03:42.977
> 
> 标签：c#, asp.net-mvc, entity-framework, razor

我有 EF 类，我为每个类制作了具有各种 DAL 功能（获取、设置、订购等）的模型（没有从 EF poco 类继承）。BL 将在控制器内部。对于单个模型实例，一切看起来都很好，但现在我需要绑定以查看数据列表。下面是我如何做到的一个例子。我是 MVC 新手，不确定这是否是最佳实践：

**该模型：**

```
public class CustomerWishlistModel
{
    static storeDataEntities db = new storeDataEntities();

    //Some properties of the model
    public int CustomerID { get; set; }

    public int ProductID { get; set; }

    public string ProductName { get; set; }

    public string BrandName { get; set; }

    public CustomerWishlistModel(){}

    //Get wishlists by customer
    public static List<CustomerWishlist> GetCustomerWishLists(int customerID)
    {
         return db.CustomerWishlists.Where(x => x.CustomerID == customerID).ToList();
    }

    //Convert wishlist to model
    public static CustomerWishlistModel GetWishListModel(CustomerWishlist thisWishList)
    {  
        CustomerWishlistModel thisWishListModel = new CustomerWishlistModel()
        {
            CustomerID = thisWishList.CustomerID,
            ProductID = thisWishList.ProductID,
            BrandName = thisWishList.Product.Supplier.BrandName,
            ProductName = thisWishList.Product.Name
       };

       return thisWishListModel;
    }
} 
```

**控制器：**

```
[Authorize]
[HttpGet]
public ActionResult Index(string id)
{
    //Get all wishlists to current customer
    List<CustomerWishlist> thisWishList = CustomerWishlistModel.GetCustomerWishLists(int.Parse(id));

    //Get language from url
    Language thisLanguage = LanguageModel.GetLanguageByCulture(RouteData.Values["language"].ToString());

    if (Session["UserID"] != null && Session["UserID"].ToString() == id && thisWishList != null && thisLanguage != null)
    {
        List<CustomerWishlistModel> thisWishlistModel = new List<CustomerWishlistModel>();

        //Get all wishlists that their status is online and language equals to current
        foreach (CustomerWishlist item in thisWishList)
        {
            if (item.Product.Status == (int)EnumModel.ProductStatus.Online && item.Product.LanguageID == thisLanguage.ID)
            {
                thisWishlistModel.Add(CustomerWishlistModel.GetWishListModel(item));
            }
        }

        return View(thisWishlistModel);
    }
    else
    {
        return RedirectToAction("Login", "Customer");
    }
} 
```

**风景：**

```
@model IEnumerable<Store.Models.CustomerWishlistModel>
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = Resources.Store.WishList;    
}
@using (Html.BeginForm())
{
    <h2>@Resources.Store.WishList</h2>

    foreach (Store.Models.CustomerWishlistModel item in Model.ToList())
    {
         item.BrandName...... and other markup tags
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:39:59.320

最佳实践是从控制器中删除任何业务逻辑，它们只假设处理调用适当的服务并将模型数据传递给视图。您的模型不应该有任何数据访问代码，而是最好将收集数据抽象到另一个类并返回一个干净的模型。例如，最流行的抽象 DAL 模式之一是存储库模式，它通过简单的接口（如`Customer CustomerRepository.GetCustomer(int id)`.

您的所有业务逻辑也应该包含在服务中，这些服务将调用存储库以获取所需的数据并根据您的业务规则处理数据。该服务将返回一个干净的模型对象，您的控制器会将其传递给视图。简单干净。

# c# - 在页面加载期间使用下拉列表自动填充页面

> ID：14821741
> 
> 赞同：0
> 
> 时间：2013-02-11T22:03:50.300
> 
> 标签：c#, asp.net

我是 asp.net 的新手，我的标题可能有点混乱，所以让我解释一下，我也可能以错误的方式这样做，所以如果你有任何建议会很好。

当用户登录我的网站时，他们会得到一个他们的客户和网站的下拉列表。他们可以有多个客户端或站点。一旦他们登录，他们就会被发送到一个显示该站点信息的通用仪表板。

我为名为 Sitepicker 的站点下拉菜单创建了一个用户控件，它使用存储过程填充 2 个下拉列表。许多用户只有一个客户端和站点，所以我希望它自动选择填充在下拉列表中的第一个客户端和站点，并将其用于一般仪表板。

这就是我填充网站下拉列表的方式。

```
 void PopulateSiteList()
    {
            DataAccess da = new DataAccess();
            da.AddParameter("portaluserid", Page.User.Identity.Name, DataAccess.SQLDataType.SQLString, 256);
            da.AddParameter("ClientID", Session["ClientID"], DataAccess.SQLDataType.SQLInteger, 4);
            DataSet SiteList = da.runSPDataSet("Portal_SitePickerSiteList");

            DropDownListSite.DataSource = SiteList;
            DropDownListSite.DataValueField = "SiteID";
            DropDownListSite.DataTextField = "SiteName";
            DropDownListSite.DataBind();
    } 
```

这是站点选择器的页面加载。

```
 protected void Page_Load(object sender, EventArgs e)
    {   
        if (!IsPostBack)
        {       
            if (Session["ClientName"] != null)
                ClientButton.Text = Session["ClientName"].ToString();
            if (Session["SiteName"] != null)
                SiteButton.Text = Session["SiteName"].ToString();

            LoadClientDDL();

            if (DropDownListClient.Items.Count.Equals(1))
            {
                ClientButton.Enabled = false;
                DropDownListClient.Visible = false;
                int ClientID = int.Parse(DropDownListClient.SelectedItem.Value);
                ClientButton.Text = DropDownListClient.SelectedItem.Text;
                ClientButton.Visible = true;
                Session["ClientID"] = ClientID;
                Session["ClientName"] = DropDownListClient.SelectedItem.Text;

                {
                    PopulateSiteList();

                }

                if (DropDownListSite.Items.Count > 0)

                {
                    DropDownListSite.SelectedIndex = 1;
                    DropDownListSite.Visible = false;
                    SiteButton.Visible = true;
                    int SiteID = int.Parse(DropDownListSite.SelectedItem.Value);
                    SiteButton.Text = DropDownListSite.SelectedItem.Text;

                    Session["SiteID"] = SiteID;
                    Session["SiteName"] = DropDownListSite.SelectedItem.Text;

                }
            } 
```

所以一切都很好。我的问题是，一旦我的常规仪表板页面加载，除非我点击刷新，否则所有标签都不会更新。

这是一般仪表板的 page_load

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["SiteID"] != null)
        {
            SiteID = int.Parse(Session["SiteID"].ToString());
             PopulateAccountData();
             PopulateAccountInformation2();
             PopulateSiteNodes();

        }
        else
             LabelSiteName.Text = "No Site Selected";
    }

void PopulateAccountData()
    {

        DataAccess da = new DataAccess();
        da.AddParameter("SiteID", SiteID, DataAccess.SQLDataType.SQLInteger, 4);
        SiteHeader = da.runSPDataSet("Portal_GetDashboardInfo");

        LabelGeneralManagerFirstName.Text = SiteHeader.Tables[0].Rows[0]["FirstName"].ToString();
        LabelGeneralManagerLastName.Text = SiteHeader.Tables[0].Rows[0]["LastName"].ToString();
        LabelSite.Text = SiteHeader.Tables[0].Rows[0]["SiteName"].ToString();
    } 
```

我不确定我是否做得对。用户登录后，他们将被定向到仪表板页面，除非他们刷新，否则它将始终显示“未选择站点”。

关于如何正确执行此操作的任何想法？

站点选择器的 HTML 代码

```
<table>
<tr>
<td><asp:Button ID="ClientButton" runat="server" OnClick="ClientButton_Click" Text="Select Client" /></td>
<td style="vertical-align:top"><asp:DropDownList ID="DropDownListClient" runat="server" AutoPostBack="True" OnSelectedIndexChanged="DropDownListClient_SelectedIndexChanged" Visible="False" Height="36px">
    </asp:DropDownList></td>

<td>&nbsp;&nbsp;</td>    
<td><asp:Button ID="SiteButton" runat="server" OnClick="SiteButton_Click" Text="Select Site" /></td>
<td style="vertical-align:top"><asp:DropDownList ID="DropDownListSite" runat="server" AutoPostBack="True" OnSelectedIndexChanged="DropDownListSite_SelectedIndexChanged" Visible="False" Height="36px">
    </asp:DropDownList></td>

</tr>

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:09:56.640

我想你在想的是一个`postback`

转到您的 xhtml 并确保`AutoPostback="True"`在您的下拉列表中。

这将“ `postback`”并导致您的页面刷新并应用更改。这就是在 asp.net 中客户端和服务器通信的方式。

这可能是为您提供更多信息的好资源：

[http://msdn.microsoft.com/en-us/library/aa720416(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa720416(v=vs.71).aspx)

# php - 将日期插入mysql数据库

> ID：14821743
> 
> 赞同：0
> 
> 时间：2013-02-11T22:03:59.800
> 
> 标签：php, mysql

我有一个简单的表单，它有一个隐藏字段，其值为：

```
<?php echo date('Y-m-d'); ?> 
```

当我通过我的 php 处理脚本提交表单时，除了日期之外，表单上的所有内容都会进入数据库。

这是我的sql：

```
$sql = "INSERT INTO wp_reminders (dateofentry, ipaddress, type) VALUES ('$_POST[dateofentry]','$_POST[ipaddress]' ,'$_POST[type]')"; 
```

当我在处理页面上回显日期时，它显示正常。

我已经在我的数据库中设置了以下列：

```
 dateofentry date NOT NULL 
```

如果上面有什么问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:42:15.533

任何插入 MySQL 的日期都必须符合[MySQL 可以解析的格式之一，](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)否则必须进行转换。[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)通常是首选格式`YYYY-MM-DD HH:MM:SS`。

如果您使用 PDO：

```
$sql = "INSERT INTO wp_reminders (dateofentry, ipaddress, type) VALUES (:dateofentry, :ipaddress, :type)";
$statement = $pdo->prepare($sql);
$statement->bindParam(":dateofentry", strtotime(date("Y-m-d H:i:s")), PDO::PARAM_STR);
$statement->bindParam(":ipaddress", $_POST['ipaddress'], PDO::PARAM_STR);
$statement->bindParam(":type", $_POST['type']), PDO::PARAM_STR);
$statement->execute(); 
```

除非您预计表单需要很长时间来处理，否则在创建查询时提供日期可能是有意义的。如果没有，您可以随时将该`strtotime`调用放入您的表单中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T22:19:25.757

您必须使用此语法来创建您的 sql 查询：

`$sql = "INSERT INTO wp_reminders (dateofentry, ipaddress, type) VALUES ('".addslashes($_POST['dateofentry'])."','".addslashes($_POST['ipaddress'])."' ,'".addslashes($_POST['type'])."')";`

在您的示例中，您没有用双引号将索引键括起来......

而且您真的不应该将php变量放入字符串中，最好将其连接起来。

# c# - 待机模式下的定时器会怎样？

> ID：14821745
> 
> 赞同：14
> 
> 时间：2013-02-11T22:04:00.797
> 
> 标签：c#, .net, timer, sleep

我正在使用来自 Timers 命名空间的 Timer。当 PC 进入睡眠或休眠状态时，计时器会发生什么？

我将计时器设置为延迟 6 小时。

在这些情况下会发生什么。

1) 定时器从 0 小时开始并立即进入睡眠/休眠状态。然后 PC 在 5 小时唤醒。我的计时器会在接下来的 1 小时后还是在接下来的 6 小时后触发？

2) 定时器从 0 小时开始并立即进入睡眠/休眠状态。然后 PC 在 7 小时唤醒。我的计时器会在 PC 唤醒后立即启动，还是会“错过”一次并在接下来的 5 小时内启动？它会从 PC 唤醒或从之前的“错过”事件开始计数到下一个事件吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-11T22:27:25.653

行。我问了我的朋友，这是他的结果：

```
23:21:32 : Timer started
23:21:35 : PC Goes Sleep
23:22:50 : PC Wakes
23:22:50 : Timer fired
23:23:50 : Timer fired

using System;
using System.Collections.Generic;
using System.Text;
using System.Threading;

namespace Test
{
    class Program
    {
        static System.Timers.Timer timer;

        static void Main(string[] args)
        {
            timer = new System.Timers.Timer();
            timer.Interval = 60 * 1000;
            timer.AutoReset = true;
            timer.Elapsed += timer_Elapsed;
            timer.Enabled = true;

            Console.WriteLine(String.Format("{0}:{1}:{2} : Timer started", DateTime.Now.ToLocalTime().Hour, DateTime.Now.ToLocalTime().Minute, DateTime.Now.ToLocalTime().Second));

            timer.Start();

            Thread.Sleep(Timeout.Infinite);
        }

        static void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
        {
            Console.WriteLine(String.Format("{0}:{1}:{2} : Timer fired", DateTime.Now.ToLocalTime().Hour, DateTime.Now.ToLocalTime().Minute, DateTime.Now.ToLocalTime().Second));
        }
    }
} 
```

所以简而言之。睡眠和唤醒计时器后检查它是否错过了任何事件。如果它错过了一个，它将触发从 0 开始计数直到下一个事件。

# sql-server - 当架构不存在时如何从孤立用户中删除架构所有权

> ID：14821749
> 
> 赞同：0
> 
> 时间：2013-02-11T22:04:18.833
> 
> 标签：sql-server, sql-server-2008

我有一种情况，数据库从一个实例恢复到一个新实例，而没有带来主数据库。因此，所有安全信息都会丢失。奇怪的客户端仍然可以通过受信任的连接访问数据，但是在尝试进行用户 ID 管理时，您不能删除帐户，因为它说它是模式的所有者。在用户数据库中，您可以获得几乎每个同名用户帐户的一长串模式列表。sys.schema 的转储显示这些用户模式都不存在（显然它们本来应该在原始实例的主数据库中，但不在新的主数据库中）。由于架构不存在，您如何使用户 ID 不属于不存在的实体，以便反过来将其删除？

我必须为 132 个用户使用这个，所以我也在寻找一个重复的脚本。根据对该站点的研究，我看到了将所有者更改为 dbo 的脚本，但在这种情况下，架构存在。在我的情况下，它没有。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:29:58.953

可能会发生以下两种情况之一：

1.  您可能正在签`sys.schemas`入不同的数据库。模式可能存在于目标数据库中，但如果您从`sys.schemas`in 中选择`master`，您将得到不同的结果。
2.  模式不必与拥有它们的数据库用户同名。

为了清理它，我将使用以下代码/方法：

创建一个包含用户名的 .txt 文件，每个用户位于不同的行。

使用以下 SQL 代码：

```
use [copied_db];

CREATE TABLE #users
(uname varchar(100));

BULK INSERT #users FROM 'C:\test\users.txt';

SELECT 'DROP SCHEMA ' + QUOTENAME(s.name,'[') + ';'
FROM #users u
    JOIN sys.database_principals dp ON (u.uname = dp.name)
    JOIN sys.schemas s ON (dp.principal_id = s.principal_id);

SELECT 'DROP USER ' + QUOTENAME(dp.name,'[') + ';'
FROM #users u
    JOIN sys.database_principals dp ON (u.uname = dp.name); 
```

此代码将为您提供各个操作的删除语句，以便您可以自行决定运行它们。

# javascript - 在 Google 地图中显示多个地址

> ID：14821750
> 
> 赞同：-3
> 
> 时间：2013-02-11T22:04:22.607
> 
> 标签：javascript, google-maps, dynamic-programming

有没有办法（本机）在谷歌地图地图中显示多个地址？我在开发者网站上找不到，当我找到一些东西时，它只是用于静态使用，而不是用于动态网站。

例如在 airbnb.com 上有这样一个“多动态地址实现”（如果你搜索一个城市）。

提前致谢！最好的问候，约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:40:53.273

[Google Maps API v3](https://developers.google.com/maps/documentation/javascript/basics)允许您使用google [-maps-api-3](https://stackoverflow.com/questions/tagged/google-maps-api-3)标签

# sql - 如何将对象继承映射到数据模型？

> ID：14821752
> 
> 赞同：1
> 
> 时间：2013-02-11T22:04:23.757
> 
> 标签：sql, database, oop, inheritance

我有一个具有抽象基类和从该基类继承的 5-6 个类的对象模型。我想设计一个合适的关系数据模型来存储它们。设计数据模型的最佳方法是什么？

这是一个想要跟踪已发送消息的虚构应用程序的快速示例：

**消息**（基类）

*   长身份证
*   创建日期日期
*   字符串文本

**EmailMessage**（扩展消息）

*   字符串收件人列表

**PhoneMessage**（扩展消息）

*   字符串电话号码

我倾向于为每个类创建一个单独的表，其中每个表**email_message**和**phone_message**只包含它们的私有字段。它的美妙之处在于它反映了对象模型并保持了清晰的关注点分离。坏事是数据必须加载两次：一次用于确定混凝土类型，另一次从混凝土表加载剩余数据。

我发现这是一个非常普遍的问题，我还没有找到令人满意的答案。我将不胜感激您的任何建议。你有什么经验？谢谢。

皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:36:30.017

有多种方法可以做到这一点，选择取决于您。常见的解决方案是单表继承 (STI)、多表继承 (MTI)，也称为类表继承 (CTI) 和具体表继承。

使用 STI，父类的所有子类的所有列都定义在一个表中。不使用某些列的类将其值存储为 NULL。类的类型通常存储在附加列中。

使用 MTI，所有超类列都存储在单个父表中，而每个子类的单独表用于保存其唯一字段。子类表上的外键链接回父记录。

Concrete Table Inheritance 更进一步，需要为每个子类创建一个完全独立的表。

有许多文章宣传了各种方法 - STI 通常最容易实现，而 MTI/CTI 可以避免 STI 固有的某些问题（必需的可空字段是常见问题）。

# php - 使用表从数组中构建层次结构 - PHP

> ID：14821753
> 
> 赞同：0
> 
> 时间：2013-02-11T22:04:24.803
> 
> 标签：php, html

我在以下场景中遇到了困难，我有一个包含类别的数组，因此类别可以有子类别，而子类别可以有无限的子类别。现在我想要实现的是以下目标，但我无法实现这一目标。

`$items`我有一个以下结构的数组

```
Array
(
    [0] => Array
        (
            [label] => Main Cat
            [id] => 29
            [parent_id] => 19
        )

    [1] => Array
        (
            [label] => Main Cat
            [id] => 17
            [parent_id] => 19
        )

    [2] => Array
        (
            [label] => Main Cat
            [id] => 20
            [parent_id] => 19
            [items] => Array
                (
                    [0] => Array
                        (
                            [label] => Child Level 1
                            [id] => 21
                            [parent_id] => 20
                        )

                    [1] => Array
                        (
                            [label] => Child Level 1
                            [id] => 22
                            [parent_id] => 20
                            [items] => Array
                                (
                                    [0] => Array
                                        (
                                            [label] => Child Level 2
                                            [id] => 27
                                            [parent_id] => 22
                                            [items] => Array
                                                (
                                                    [0] => Array
                                                        (
                                                            [label] => Child Level 3
                                                            [id] => 28
                                                            [parent_id] => 27
                                                        )

                                                )

                                        )

                                )

                        )

                    [2] => Array
                        (
                            [label] => Child Level 1
                            [id] => 23
                            [parent_id] => 20
                        )

                    [3] => Array
                        (
                            [label] => Child Level 1
                            [id] => 24
                            [parent_id] => 20
                            [items] => Array
                                (
                                    [0] => Array
                                        (
                                            [label] => Child Level 2
                                            [id] => 25
                                            [parent_id] => 24
                                        )

                                    [1] => Array
                                        (
                                            [label] => Child Level 2
                                            [id] => 26
                                            [parent_id] => 24
                                        )

                                )

                        )

                )

        )

) 
```

现在我希望下面的数组显示在一个表格中，每个子级别都缩进，如果它应该从 Child Level 3 上升到 Child Level 2，那么缩进应该再次反转。

例子

```
<table border="2" width="100%">
    <tr>
        <td>Main Cat</td>
    </tr>
    <tr>
        <td>Main Cat</td>
    </tr>
    <tr>
        <td>Main Cat</td>
    </tr>
    <tr>
        <td style="margin-left:20px;">Child Level 1</td>
    </tr>
    <tr>
        <td style="margin-left:20px;">Child Level 1</td>
    </tr>
    <tr>
        <td style="margin-left:40px;">Child Level 2</td>
    </tr>
    <tr>
        <td style="margin-left:60px;">Child Level 3</td>
    </tr>
    <tr>
        <td style="margin-left:20px;">Child Level 1</td>
    </tr>
    <tr>
        <td style="margin-left:20px;">Child Level 1</td>
    </tr>
    <tr>
        <td style="margin-left:40px;">Child Level 2</td>
    </tr>
    <tr>
        <td style="margin-left:40px;">Child Level 2</td>
    </tr>
</table> 
```

到目前为止，我的 PHP 代码看起来像这样，

```
public function renderCategoriesRecursive($items)
        {
                foreach($items as $item)
                {

                        $itemCount = count($item['items']);

                        echo CHtml::openTag('tr');
                            echo CHtml::openTag('td',array('class'=>$class));
                                echo $item['label'];
                            echo CHtml::closeTag('tr');
                        echo CHtml::closeTag('tr');

                        if(isset($item['items']) && $itemCount)
                        {

                                $this->renderCategoriesRecursive($item['items']);

                        }
                }
} 
```

变量**$items**包含上面的数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:24:10.880

我注意到您自己的解决方案引用了变量 $class，因此我也将其合并了。你真的不需要使用 CHtml （除非你这样做，但我从未见过这样的案例）

```
function renderItems( $array, $class, $indent = 0  ) {

    foreach( $items as $item) {
        echo '<tr><td class="'.$class.'">'.$item['label'].'</td></tr>';

        if( isset( $item['items'] && count( $item['items'] )
            renderItems($item['items'],$class,$indent+1);
    }

} 
```

# ios - 通知触发后的 iOS 本地通知列表

> ID：14821754
> 
> 赞同：3
> 
> 时间：2013-02-11T22:04:28.483
> 
> 标签：ios, notifications

我的应用程序在后台运行并监视蓝牙数据。当数据进入时，我会显示用户需要打开应用程序的通知，以便我可以处理刚进入的数据。

我正在写 iOS 5 及更高版本。

我使用以下代码发出通知：

```
 UILocalNotification* alarm = [[[UILocalNotification alloc] init] autorelease];
        if (alarm) {

            alarm.fireDate = [NSDate date];
            alarm.timeZone = [NSTimeZone defaultTimeZone];
            alarm.repeatInterval = 0;
            alarm.soundName = @"alarmsound.caf";
            alarm.alertBody = message;

            [app scheduleLocalNotification:alarm];
        } 
```

正如我希望您可以从该代码中看到的那样，通知会立即触发。

我遇到的问题是我似乎无法检测到通知栏上是否已经有通知。我试过使用：

```
 NSArray *oldNotifications = [app scheduledLocalNotifications];

        // Clear out the old notification before scheduling a new one.
        if ([oldNotifications count] > 0)
            [app cancelAllLocalNotifications]; 
```

但是，这似乎不起作用，因为 oldNotifications 计数始终为 0，即使通知栏上有大量它们也是如此。我认为这是因为通知已经触发？

基本上我只想通知用户一次，除非他们在不打开应用程序的情况下关闭该通知。如果我还可以增加应用程序标记值，这样用户就会知道有多少蓝牙消息进来了，那就太好了。相反，我只是为每条传入消息获得一个全新的通知。

我如何只通知用户一次，然后仅在他们解除通知时才再次通知他们？

# xcode - xcode 4.5.2 头文件搜索路径问题

> ID：14821765
> 
> 赞同：1
> 
> 时间：2013-02-11T22:05:10.787
> 
> 标签：xcode, search, header, path

我已经使用 Xcode 4.5.2 工作了几个星期，发现标头搜索路径是最难解决的问题。目前我正在开发一个 OpenFrameworks 项目，并在 testApp.h 文件中输入“#include "UIImage.h""。Xcode 说它找不到 UIImage.h 文件。我找到了文件的路径并将其添加到标题搜索路径和用户标题搜索路径中：

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/System/Library/Frameworks/

还是找不到文件。我在这里阅读了很多关于这个问题的帖子，并尝试实施一些解决方案，但无济于事。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T00:22:34.520

您的问题与[此](https://stackoverflow.com/questions/18163321/xcodebuild-cannot-find-header-in-embedded-projects/19284935#19284935)类似。尝试使用类似`"#include <Foundation/UIImage.h>"`. 我也一直在与 xCode 搜索路径作斗争。以下是两个观察结果：

1.  如果您需要包含自己的标题，请确保先复制这些标题（有关步骤，请参阅另一篇文章）。
2.  检查“构建阶段”中的顺序，并确保在编译源之前进行复制。

# sql - 多表的SQL连接

> ID：14821767
> 
> 赞同：0
> 
> 时间：2013-02-11T22:05:15.500
> 
> 标签：sql, ibm-midrange, db2-400

我如何选择以显示有贷款但没有 dda 且没有相关 actype 的 custid，除非只有 actype L？寻找没有 dda 关系的记录，即使它们是联合相关的 (cfrela = J)。如下所示，A123 和 B128 符合条件，但相关的 A123 D actype 由于与 DDA 账户的共同关系而被取消资格。L=贷款，D=DDA，S=储蓄

```
SELECT loans.custid, dda.custid, related.custid
FROM data.lnmast lnmast 
EXCEPTION JOIN data.dda dda         
ON loans.custid = dda.custid
JOIN data.related related
ON loans.custid = related.custid

LOANS       
custid(c)   actype(c)   
A123           L    
B128           L    

DDA     
custid(c)   actype(c)   
A125           D    

RELATED     
custid(c)   actype(c) cfrela(c)
A123          D         J
A123          L         P
A123          S         J
B128          L         P
B128          L         P 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:14:33.133

如果我正确理解您的问题，您想显示 dda 表中不存在且仅存在于 actype = L 的相关表中的客户 ID？

```
SELECT L.CustId
FROM Loans L 
   LEFT JOIN Related R ON L.custid = R.custId AND R.actype <> 'L'
   LEFT JOIN DDA D ON L.custid = D.custid
WHERE d.custid IS NULL AND R.custid is NULL 
```

如果必须在相关表中有记录，则再添加一个 INNER JOIN：

```
SELECT DISTINCT L.CustId
FROM Loans L 
   INNER JOIN Related R1 ON L.custid = R1.custId AND R1.actype = 'L'
   LEFT JOIN Related R ON L.custid = R.custId AND R.actype <> 'L'
   LEFT JOIN DDA D ON L.custid = D.custid
WHERE d.custid IS NULL AND R.custid is NULL 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:14:01.180

解决此问题的一种方法是`left outer join`：

```
select l.*
from data.lnmast l left outer join
     (select *
      from data.dda
      where actype <> 'L'
     ) dda
     on l.custid = dda.custid left outer join
     data.related r
     on l.custid = dda.custid
where dda.custid is null and r.custid is null 
```

然后，该`where`子句根据您的逻辑选择不匹配的记录。

# php - 数组第一项特定字符

> ID：14821774
> 
> 赞同：-2
> 
> 时间：2013-02-11T22:05:39.673
> 
> 标签：php, arrays, usort

我有一个包含很多不同组合的数组，现在，我想获取以`_`数组开头的数字/代码。我用 usort 尝试了很多东西，但没有找到最好的解决方法。

示例数组：

```
jhdjfhasjdfh234324
6524kl6j245-68tgh345345
ji43h593408ug8gfsspdkf
_23i490u2458djiofjgoskdgk
4534326jk36hj4j526hkj45t
43u25h6jih245ji3 
```

并输出：

```
_23i490u2458djiofjgoskdgk
jhdjfhasjdfh234324
6524kl6j245-68tgh345345
ji43h593408ug8gfsspdkf
4534326jk36hj4j526hkj45t
43u25h6jih245ji3 
```

而且，不能有更多以 . 开头的代码`_`。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:16:07.420

```
function aux($a, $b) {
    if($a[0] == "_") return -1;
    else if($b[0] == "_") return 1;
    return ($a < $b) ? -1 : 1;
}

usort($data, "aux"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:12:13.413

像这样的东西应该工作

```
$f = false;
$data = array_filter($data, function($var) use(&$f) {
    if (substr($var, 0, 1) == "_") {
        $f = $var;
        return false;
    }

    return true;
});

if ($f) {
    array_unshift($data, $f);
} 
```

# android - TextView 未在用户输入时显示 EditText 字符串

> ID：14821776
> 
> 赞同：1
> 
> 时间：2013-02-11T22:05:43.590
> 
> 标签：android, textview, gettext, tostring

这是场景：

用户在字段中输入团队名称`EditText`，其文本就是 TextView 的新名称（使用`setText()`）。`EditText`如果用户尚未在该字段中输入任何内容，`setText()`则该属性将与 xml 文件中声明的文本属性相同（因此基本上是默认值）。

到目前为止，我有这段代码，但它不起作用。当我在字段中输入任何内容`EditText`并单击其他内容时，`TextView`不会改变。

```
public void teamNameChange(View view)
{
    TextView team1NameScore = (TextView) findViewById(R.id.team1NameScore);
    EditText team1Name = (EditText) findViewById(R.id.team1Name);

    if (team1Name.getText().toString().isEmpty())
    {
        team1NameScore.setText("Team 1 Score:");
    } else {
        team1NameScore.setText("" +team1Name);
    }
} 
```

知道为什么文本没有改变吗？

**编辑-最终工作代码：**

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final TextView team1NameScore = (TextView) findViewById(R.id.team1NameScore);
    final EditText team1Name = (EditText) findViewById(R.id.team1Name);

    team1Name.setOnFocusChangeListener(new OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            String newString = team1Name.getText().toString();
            if (!hasFocus) {
                team1NameScore.setText("" + newString);
            }
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:33:07.723

好吧，您基本上必须在单击按钮或键入内容以动态更改文本时进行操作，这两者都非常简单。这是两种方法

```
public class MainActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

final TextView team1NameScore = (TextView) findViewById(R.id.team1NameScore);
final EditText team1Name = (EditText) findViewById(R.id.team1Name);
Button btn1 =(Button) findViewById(R.id.button1);

btn1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            String text = team1Name.getText().toString();
            team1NameScore.setText(text);

        }
    });

team1Name.addTextChangedListener(new TextWatcher() {
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
        }// do nothing

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        } // do nothing

        @Override
        public void afterTextChanged(Editable s) {
            String text = team1Name.getText().toString();
            team1NameScore.setText(text);
        }
    });
}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T22:17:16.450

你可能应该做这样的事情

```
final EditText editText = (EditText) findViewById(R.id.editText1);
final TextView textView = (TextView) findViewById(R.id.textView1);

editText.setOnFocusChangeListener(new OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if (!hasFocus) {
            textView.setText("changed");
        }
    }
}); 
```

知道，当然，editText1 和 textView1 是可怕的变量名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T23:02:36.700

你不应该让你的成员变量是最终的，它们应该在 OnCreate 方法中初始化。您应该在您正在侦听团队名称更改的地方调用 teamNameChange(View v)。

```
public class Main extends Activity {
private EditText editText;
private TextView textView;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    team1NameScore = (TextView) findViewById(R.id.team1NameScore);
    team1Name = (EditText) findViewById(R.id.team1Name);
    team1Name.setOnFocusChangeListener(new OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (!hasFocus) {
                /*team1NameScore.setText("changed");*/
                teamNameChange(v);
            }
        }
    });

} 
```

# php - Codeigniter activerecord OR 选择语句

> ID：14821778
> 
> 赞同：0
> 
> 时间：2013-02-11T22:05:54.207
> 
> 标签：php, mysql, codeigniter, activerecord

我正在使用最新版本的 codeigniter 并尝试使用 activerecord 类编写一个简单的查询，但不能完全弄清楚如何执行 OR 语句。这是代码：

```
function get_active_trades()
{
    $query = $this->db->get_where('trades', array('trade_status !=' => 2));

    return $query->result();
} 
```

理想情况下，应该是 trade_status != 2 或 user_trade_status != 2。但是，我似乎找不到实现这种情况的方法。我在帮助页面上找到了以下内容，但似乎也无法正常工作：

```
$this->db->or_where(); 
```

关于如何使用 activerecord 完成此操作的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:09:02.243

像这样：

```
function get_active_trades() {
     $this->db->where('trade_status <>', 2);
     $this->db->or_where('user_trade_status <>', 2);
     return $this->db->get('trades')->result();
} 
```

# performance - 使用 Azure VM 作为测试代理来驱动负载测试到 Azure 云之外的站点

> ID：14821780
> 
> 赞同：0
> 
> 时间：2013-02-11T22:05:57.297
> 
> 标签：performance, testing, azure

我正在尝试克服测试站点上的负载平衡问题。有没有人使用 Azure VM 的多个实例作为测试代理来驱动负载测试到 Azure 云之外的站点？在商业数据中心内使用具有 IP 切换功能的虚拟机是可行的，但价格昂贵。我已经在两个数据中心和我们的企业内部设置了代理服务器。我正在寻找是否可以创建一个可以对面向外部的测试站点运行测试的单一解决方案。我欢迎对此的任何其他想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:05:05.567

我已经这样做了。“只有”一个限制 - 每个云服务部署只能获得 1 个（单个）公共 IP 地址。因此，如果您在单个云服务（也称为或称为`hosted`服务）中有 10 个虚拟机，所有这 10 个代理将作为单个 IP 地址访问站点。这是真正值得考虑的事情。

除此之外，您的方案完全有效且可行，但不受简单的堆栈溢出答案的影响。

您可能想看看[这篇文章](http://code.msdn.microsoft.com/windowsazure/How-to-provision-a-Visual-55a3538a#content)，它可能会给出一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T07:11:16.783

Visual Studio Online 已经有一个解决方案可以在这个[http://blogs.msdn.com/b/visualstudioalm/archive/2014/07/08/wip-cloud-load-testing-with-visual-studio中为您提供帮助-在线.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2014/07/08/wip-cloud-load-testing-with-visual-studio-online.aspx)

看看这个。

# php - 从交易数据计算净值

> ID：14821781
> 
> 赞同：0
> 
> 时间：2013-02-11T22:06:05.363
> 
> 标签：php, mysql, codeigniter

我有股票购买交易的清单。我试图从中计算净资产。表定义如下：

```
ID | DATE       | SYMBOL | SHARES | PRICE | CLOSE
-------------------------------------------------
1  | 2010-06-01 | T      |    100 | 24.35 | 24.15
2  | 2010-07-01 | RSO    |     10 |  6.25 |  6.40
...... 
```

从 2010 年至今。所以要计算价值，但我乘以股票*接近=价值。但这仅适用于那一天。我有另一个脚本，可以在任何一天给我收盘价。

```
$history = getClose($symbol, $daterange) 
```

返回一个多维数组，其中符号包含如下日期

```
$history['symbol']['20100601'] = $price
$history['symbol']['20100701'] = $price 
```

我知道这必须很简单，我有拼图的所有部分，我只是不知道如何把它放在一起。我还有一个 SQL 语句，它可以提供我在某一天的所有资产。

```
SELECT symbol, sum(shares) AS shares, sum(shares * close) AS value 
FROM Transactions 
WHERE (action<> 5) AND date <='2010-06-01' 
    GROUP BY symbol
    HAVING (sum(shares) > 0); 
```

但这只是给了我实际购买日期的价值。最终目标是将其放入图表中，显示随时间的增长（或下降）

我有更多的代码给你，但实际上我不知道该怎么做。并不是说它有什么不同，但我正在为网站使用 codeigniter 框架

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:48:47.853

你错过了一块拼图。除非您一直在买入而从不卖出，否则您将需要某种方式来表明您每天的实际持股量。这意味着了解所有的变化——包括买卖。

两种方式（立即想到）：

> 1.  更新持有表以反映每天拥有股票的所有所有权。然后你可以总结一切以获得总价值
> 2.  以某种方式跟踪销售。然后，您将知道要对哪些时间段求和，并且可以循环遍历每个时间段的日期增量并求和。

由于您的第三个查询的标题`Transactions`并包含某种`action`列，因此您必须在某处拥有此数据。现在您只需要获取日期范围，然后将每个值相加即可。

# csv - 在流星中使用 D3 访问 csv 文件

> ID：14821786
> 
> 赞同：3
> 
> 时间：2013-02-11T22:06:33.533
> 
> 标签：csv, d3.js, meteor

我已经使用 D3 成功渲染了一个显示来自 csv 文件的数据的 HTML 表，但是当我将相同的代码移动到一个流星项目中时，我遇到了问题。传递给 d3.csv() 回调的数据对象一次拾取 HTML 文件 1 行，而不是 csv 数据。这只发生在尝试在流星中运行它时。

我的代码是这样设置的：

```
if (Meteor.isClient) {
  d3.csv("data/dataset.csv", function(data) {
    console.dir(data);

    // do stuff
  });
}

if (Meteor.isServer) {
  // do other stuff
} 
```

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-24T02:03:32.170

（只需按照@booyaa 在评论中的要求复制阿什卡特的评论即可：）

尝试将您的 csv 文件放入`public/data/data.csv`

# c++ - 使用命令行参数执行另一个程序的 C++ 程序

> ID：14821787
> 
> 赞同：7
> 
> 时间：2013-02-11T22:06:34.927
> 
> 标签：c++, command-line, command, command-line-arguments

如何使用来自 c++ 程序的参数执行命令行程序？这是我在网上找到的：

[http://www.cplusplus.com/forum/general/15794/](http://www.cplusplus.com/forum/general/15794/)

```
std::stringstream stream;
stream <<"program.exe "<<cusip;
system(stream.str().c_str()); 
```

但它似乎不接受实际的程序位置，所以我不确定如何应用它。我希望有这样的东西：

```
std::stringstream stream;
stream <<"C:\Tests\SO Question\bin\Release\HelloWorld.exe "<<"myargument";
system(stream.str().c_str()); 
```

这给出了与反斜杠相关的几个警告 - 并且该程序不起作用。是否期望您在某个特定位置拥有该程序？

这是我在控制台中得到的输出：

> 'C:\Tests' 不是内部或外部命令、可运行程序或批处理文件。

**附录：**

**所以根据乔恩的回答，对我来说正确的版本是这样的：**

```
#include <iostream>
#include <cstdlib>
#include <sstream>
#include <cstring>
int main(int argc, char *argv[])
{

std::stringstream stream;    
stream << "\"C:\\Tests\\SO Question\\bin\\Release\\HelloWorld.exe\""
       << " " // don't forget a space between the path and the arguments
       << "myargument";
system(stream.str().c_str());

return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T22:15:41.163

首先，当您希望单个反斜杠出现在实际字符串值中时，您应该在文字字符串中使用*双反斜杠。*这是根据语言语法；一个符合标准的编译器可能比简单地*警告*这一点做得更糟。

无论如何，您遇到的问题是由于在 Windows 中包含空格的路径必须用双引号引起来。由于双引号本身需要在 C++ 字符串文字中进行转义，因此您需要编写的是

```
stream << "\"C:\\Tests\\SO Question\\bin\\Release\\HelloWorld.exe\""
       << " " // don't forget a space between the path and the arguments
       << "myargument"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T22:12:43.280

> 这给出了几个与反斜杠相关的警告

我相信`\`在 C++ 中使用转义字符`\\`可能会解决这个问题。

# javascript - 缺少）在参数列表之后 - 我如何在这个简单的代码中修复它我不断改变事情并得到 diff 错误但无法弄清楚这个

> ID：14821788
> 
> 赞同：-2
> 
> 时间：2013-02-11T22:06:35.030
> 
> 标签：javascript

这是我们获得的用于创建程序的代码，但它无法正常工作，有人可以帮忙吗？

```
var rad; var pi,item, total; var area, item, total; var circum, item, total;
rad = readNumber("Please enter the radius of a circle");
pi = 3.1416;
area = rad * rad * pi;
circum = 2 * rad * pi;
printLine ("The radius you entered is"rad);
printLine ("The area of the circle is"area);
printLine ("The circumference is"circum); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:07:21.787

您需要使用串联：

```
printLine("The radius you entered is" + rad); 
```

见`+`。

# jquery - 我如何向这个 jQuery 计数器插件传递一个变量整数并让它随着动画正确更新？

> ID：14821789
> 
> 赞同：0
> 
> 时间：2013-02-11T22:06:35.697
> 
> 标签：jquery, jquery-plugins, counter, updates

我试图找到一种可靠的方法来传递这个 jQuery 计数器插件一个新值（整数）并让它更新：

[http://jsfiddle.net/ucxpr/4/](http://jsfiddle.net/ucxpr/4/)

来自这里的计数器代码： [https ://github.com/sophilabs/jquery-counter](https://github.com/sophilabs/jquery-counter)

我使用插件内置的“data-stop”属性设置了我的代码，该属性当前设置为 10...所以计数器开始...并计数到 10 然后停止...我希望触发当用户单击我的代码中的#incrementCounter 按钮时更新：

```
<button id="incrementCounter">Click here</button>

$('#incrementCounter').click(function($) {

        $('.counter-analog').attr('data-stop', '25');

}); 
```

我认为增加计数器的最佳方法就是修改我的 span 上的 data-stop 属性并重新初始化计数器，但它似乎不起作用：-/？

非常感谢您的帮助！...再次...我只是想找出一种方法使该计数器可靠地计数到我给它的数字然后停止！:)

我也试过这个没有成功：

```
$('.main_counter .counter-analog').counter({startTime: "25"}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:12:07.817

只需重新运行计数器，但传递新的停止变量

[http://jsfiddle.net/Hed9F/1/](http://jsfiddle.net/Hed9F/1/)

```
$('#incrementCounter').click(function() {
    $('.main_counter .counter-analog').counter({'stop': 25});       
}); 
```

# qt - “file.open(QIODevice::ReadOnly)”是什么意思？

> ID：14821792
> 
> 赞同：2
> 
> 时间：2013-02-11T22:06:40.850
> 
> 标签：qt, readonly, writeonly, qiodevice

我是 Qt 的新手，我在它的[入门](https://qt-project.org/doc/qt-4.8/gettingstartedqt.html)页面上学习。我想知道以下语句是什么意思，为什么需要它们？

在打开功能中：

```
if (!file.open(QIODevice::ReadOnly)) {

    QMessageBox::critical(this, tr("Error"), tr("Could not open file"));

    return;
} 
```

* * *

同样在保存功能中：

```
if (!file.open(QIODevice::WriteOnly)) {
            // error message
} 
```

如果没有这些行，我将无法运行这些功能。我尝试阅读文档中的错误处理，但无法准确找到这些语句的含义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:51:16.613

您可以打开文件进行读取和写入。使用`QIODevice::WriteOnly`或`QIODevice::ReadOnly`标志您指定打开特定文件的模式。

但是，这有什么关系呢？

假设您在不同程序的多个实例中打开了一个文件，并且没有指定文件模式之类的东西。现在，如果每个文件都在读取文件——因为它们都有指向文件当前位置的不同指针——这不是问题——因为所有程序都会从​​文件中获取最新和正确的信息。但是，如果只有一个程序将某些内容写入文件 - 您的数据将不一致，因此其他程序可能会读取错误的数据。

直观的方法是向附加在此文件上的所有程序发送消息，以便它们可以自行更新。但是 - 如果文件被删除怎么办？或者如果没有可能在新数据中设置正确的位置？此外，现在每个程序都需要有接口才能收到通知，并且整个消息传递的想法可能非常慢（除了它不起作用）。

所以 - 只是达成共识 - 多个程序可以打开文件进行读取 - 因为它们都将具有相同且一致的数据。但是，如果只有一个程序向操作系统发出它想要获得写入权限的信号 - 文件不能在任何程序中打开 - 也不能用于读取 - 也不能用于写入！根据实现，操作系统可能会阻塞调用者，直到所有文件都关闭，或者它可以简单地忽略调用并将错误信息发送给调用者——这通常是一个更好的主意，因为程序（或用户）可以阻塞自己稍后再试，或者它可以简单地要求用户保存到另一个目的地，或者它可以向我们发送令人毛骨悚然的错误消息 - 但它将无法写入文件。

最后一段描述了所谓的多阅读器-单作者技术，因此您可能需要在 Internet 或并发课程教科书中查找它。

# xaml - Script# 和 WF Xaml 文件在同一个项目中，无法编译

> ID：14821794
> 
> 赞同：1
> 
> 时间：2013-02-11T22:06:41.270
> 
> 标签：xaml, compiler-construction, script#

我们有一个 VS 2010 MVC3 项目，针对 .NET 4.0（机器有 .NET 4.5），该项目包含一个 WF Xaml 文件和相关类。我们需要在服务器端访问 jQueryValidation，所以我们添加了 script# jQueryValidation NuGet 包（v 0.7.5.0），我们甚至没有使用 script# 得到以下编译错误：

错误 1 ​​XC1020：XAML MSBuild 任务中发生构建错误：“无法从程序集“mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089”加载类型“System.Runtime.CompilerServices.ScriptAssemblyAttribute”...... .

Xaml 文件包含对标准 mscorlib 的引用，我们试图通过版本 # 强引用 Xaml 中的 Gac 库......但是它没有成功。只有在我们删除 Script# 库后，该项目才会编译。然后为了缩小问题的范围，我们为 script# 0.7.5.1 安装了 nuget 包，而不是 jQueryValidation 包，并且我们能够编译。之后安装 jqueryvalidation 包会导致和以前一样的错误，这可能与基于 0.7.5.0 的包有关吗？

有什么提示吗？我们真的很想在同一个项目中使用 script# jqueryvalidation 和 WF Xaml。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:35:41.233

Script# 程序集仅供script# 项目使用，即那些包含要编译成javascript 的c# 代码的项目。您的 MVC 项目本身不是脚本# 项目。您可能应该做的是创建一个单独的 script# 项目，以生成部署到/通过您的 MVC 项目的脚本。

特别是 script# 带有自己的 mscorlib，其中 script# 特定类型在桌面 mscorlib 程序集中不存在。

# c# - 如何将图像 URL 保存在数据库中？

> ID：14821799
> 
> 赞同：2
> 
> 时间：2013-02-11T22:07:02.303
> 
> 标签：c#, asp.net, iis

我试图将图像 URL 保存在 SQL 数据库中，但`path.compain()`不起作用，只是文件名保存在数据库中，而不是所有路径。谁能帮我？

```
if (Request.Files.Count > 0)
{
    HttpPostedFileBase file3 = Request.Files[2];
    if (Request.Files.Count > 2 &&
        file3.ContentLength > 0 &&
        (file3.ContentType.ToUpper().Contains("JPEG") ||
        file3.ContentType.ToUpper().Contains("PNG") ||
        file3.ContentType.ToUpper().Contains("GIF")))
    {
        string fileName = Path.Combine(Server.MapPath("~/advertimages/cars/mercedes"), Path.GetFileName(file3.FileName));
        file1.SaveAs(fileName);
        modelcar.Image3Url = fileName;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:11:44.037

您可以从 fileName 创建一个新的 FileInfo 对象

```
FileInfo fi = new FileInfo(fileName); 
```

然后使用 fi.FullName();

# javascript - 是否有一个可靠的 3 文本框 SSN 输入组件，它可以处理连续输入和跳格？

> ID：14821800
> 
> 赞同：1
> 
> 时间：2013-02-11T22:07:05.057
> 
> 标签：javascript, html, input

我在 HTML 表单上有一个 SSN 字段。

我想实现看到 3 个框和中间一个更短的用户体验，因为众所周知的格式 ###-##-#### 随之而来。

一方面，当前一个框包含有效数字时，我可以自动将焦点切换到下一个框。这将允许一次输入...

但是另一方面，如果您是像我这样的人（也许只是我不知道），当我看到多个框时，我自然会按 Tab 键。

我使用过这种*错误*的网站，这是一种糟糕的体验。

有没有人有一个可靠的方法来支持成功的现实世界使用？

# java - 什么是 C++ 中 Java 注释的最佳等价物？

> ID：14821803
> 
> 赞同：2
> 
> 时间：2013-02-11T22:07:10.827
> 
> 标签：java, c++, annotations

我是一名 Java 程序员，我正在学习我非常喜欢的 c++ 11。我真的认为这很棒，但我错过了这种语言中注释的概念。

首先，标准中是否有接近 Java 样式注释的内容？我认为没有经过我的研究。

在 c++ 中“模拟”Java 样式注释的更接近的标准方式（无编译器扩展）是什么？

请不要提及 c++ 11`override`注释。我的意思是用户定义的注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:16:10.153

标准 C++ 中没有像注解这样的东西。对于替代方案，这取决于您为什么要使用注释。

*   Java 中注解的用途之一是用元数据标记某些方法或类，以便可以在运行时通过反射来检索它。但是标准 C++ 中的反射非常有限，所以没有类似的东西。我还没有看过 boost::reflect，也许它对你有用。
*   注释的另一个用途是拥有在编译时进行干预以注入一些代码或进行检查的工具。在 C++ 中做这种事情的工具是预处理器。

# android - 我需要 Google Play 许可吗？

> ID：14821805
> 
> 赞同：5
> 
> 时间：2013-02-11T22:07:18.373
> 
> 标签：android, android-lvl

我有一个想在 Google Play 上推销的应用。最初我想为应用程序收取固定价格。

我习惯于在 Windows Phone Marketplace 上营销应用程序，用户只需付费即可获得该应用程序 - 无需“许可”，因为用户不付费就无法获得该应用程序。

我阅读了有关 Google Play 许可的材料，似乎暗示除非我使用 LVL，否则用户可以免费获得我的应用程序。是对的吗？另一方面，如果 Google Play 不允许他们不付费就拥有该应用程序，我为什么需要使用许可？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T22:11:35.297

正如[文档](http://developer.android.com/google/play/licensing/index.html)所说，这真的是

> 验证当前用户确实为 Google Play 上的应用程序付费

这是为了打击盗版。Google Play 不会在不付费的情况下为他们提供应用程序，但他们可能会在不付费的情况下从其他来源获取应用程序并手动安装。这提供了运行时检查。

# sql - 如何连接具有不同 GROUP BY 级别的两个查询，使一些记录为空

> ID：14821810
> 
> 赞同：2
> 
> 时间：2013-02-11T22:07:42.097
> 
> 标签：sql, ms-access, group-by, inner-join

在 MS Access 中，我使用 SQL 将两个查询与内部联接组合在一起，这两个查询都要求用户输入开始日期和结束日期范围。第一个查询（查询 1）列出了离开程序的人数、离开的情况、离开的月份和年份。它是将 Count 函数首先按年份分组，然后按月份分组，然后是离开情况（可以是 5 个选项中的任何一个），这意味着每个月有多个记录（但每个月的记录数不一定相同） ）。

第二个查询（查询 2）计算我们已录取的人数、月份和年份。它首先按年分组，然后按月分组。因此，使用此查询，每月只有一条记录。

我的内部联接正确地组合了查询，除了它多次重复查询 2 的值，具体取决于查询 1 的每个月有多少记录。有没有办法让查询 2 的值每月只列出一次，从而使该月的其余记录为空？

这是查询1：

```
SELECT Count(clients.ssn) AS CountOfDepartures, clients.[leaving situation], a.monthname, a.year1, a.month1
FROM clients INNER JOIN (SELECT month(clients.[departure date]) AS Month1, year(clients.[departure date]) AS Year1, months.monthname, clients.ssn FROM clients 
INNER JOIN months ON month(clients.[departure date])=months.monthnumber WHERE clients.[departure date] BETWEEN [Enter Start Date] AND [Enter End Date])  AS A 
ON clients.ssn=a.ssn
GROUP BY a.year1, a.monthname, clients.[leaving situation], a.month1
ORDER BY a.year1 DESC , a.month1 DESC; 
```

这是查询2

```
SELECT Count(clients.ssn) AS CountofIntakes, b.monthname, b.year2, b.month2
FROM clients 
INNER JOIN (SELECT month(clients.prog_start) AS Month2, year(clients.prog_start) AS Year2, months.monthname, clients.ssn 
FROM clients INNER JOIN months ON month(clients.prog_start)=months.monthnumber WHERE clients.prog_start BETWEEN [Enter Start Date] AND [Enter End Date])  AS B 
ON clients.ssn=b.ssn
GROUP BY b.monthname, b.year2, b.month2
ORDER BY b.year2 DESC , b.month2 DESC; 
```

这是我组合它们的方式，但它给了我重复的值：

```
SELECT countofdeparturesbyleavingsituationmonth.countofdepartures, countofdeparturesbyleavingsituationmonth.[leaving situation], countofdeparturesbyleavingsituationmonth.monthname, countofdeparturesbyleavingsituationmonth.year1, countofdeparturesbyleavingsituationmonth.month1, countofintakesbymonth.countofintakes
FROM countofdeparturesbyleavingsituationmonth 
INNER JOIN countofintakesbymonth ON (countofdeparturesbyleavingsituationmonth.monthname=countofintakesbymonth.monthname) AND (countofdeparturesbyleavingsituationmonth.year1=countofintakesbymonth.year2) AND (countofdeparturesbyleavingsituationmonth.monthname=countofintakesbymonth.monthname)
ORDER BY year1 DESC , month1 DESC; 
```

CLIENTS 表为每个客户记录了一组不同临床数据的列（我在一家非营利性药物/酒精康复中心工作）。MONTHS 表只是将十二个月写在一列中，第二列中有相应的数字。我使用 MONTHS 表的内部连接来列出月份名称而不是数字（尽管我刚刚意识到我可能只是在我的报告中使用 MonthName 函数来执行此操作......）。任何建议都非常感谢！另外，我问这个问题是因为当我对此查询进行报告时，摄入量的总报告（和每个日历年）的 SUM 值不正确，因为在查询中，每个月都有多个摄入量值。所以 SUM 比它应该的要大得多。除了该问题之外，此查询还会生成正确的报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:19:06.447

您可以使用 DISTINCT 子句：

```
SELECT DISTINCT
  queryA.people,
  Null as situation,
  queryA.[month],
  queryA.[year]
FROM
  queryA INNER JOIN queryB
  ON (queryA.people=queryB.people)
     AND (queryA.[month]=queryB.[month])
     AND (queryA.[year]=queryB.[year]) 
```

# jquery - 重新加载页面后 data-toggle="pill" 不起作用

> ID：14821811
> 
> 赞同：0
> 
> 时间：2013-02-11T22:07:42.690
> 
> 标签：jquery, css, html, twitter-bootstrap, tabs

在下面的代码中，当用户单击锚标记时，会转到 Java 操作类并返回到同一页面，但之前单击的链接未显示为活动选项卡。我们将活动选项卡的值作为 post 参数传递给操作类。我们如何才能在返回的页面上捕获它，并使链接在进入操作类之前保持活动状态。

这是示例代码：

```
<script type="text/javascript">
    function submitTab(type) {
        if(document.myOrderForm.pagetype.value != type) {
            document.myOrderForm.pagetype.value=type;
            // The type is passed from the submitTab method on the anchor onclick event.
            document.myOrderForm.submit();
        }
    }
</script> 
```

表单元素是：

```
<form name="myOrderForm" method=post action="<c:url value="/LoadMyOrder.go" />" >
    <input type="hidden" name="pagetype" value='${requestScope.pagetype}'>
    // this hidden name pagetype gets set by the value from action class and
    // and is equal to one of the list items in the hyperlinks ('OO','CO' or 'CS')
    // if value of the page type equals to one of those above values i want to mark
    // the respective "LI" to class="active"

    // I think we need to do it on the -- $(document).ready(function() { 
    // but not quite sure. If some one donot understand  let me know.

    <div class="row-fluid">
        <div class="span12">
            <div class="pull-left">
            <ul class="nav nav-pills">
                    <li>
                        <a onclick="javascript:submitTab('OO')"; href="#" data-toggle="pill" >
                &nbsp;<b><fmt:message key="myorder.openorder" /></b>
                        </a>
                    </li>
                    <li>
                        <a onclick="javascript:submitTab('CO')"; href="#" *data-toggle="pill"*>
                &nbsp;<b><fmt:message key="myorder.completedorder" /></b>
                        </a>
                    </li>
                    <li>
                        <a onclick="javascript:submitTab('CS')"; href="#" *data-toggle="pill"*>
                            &nbsp;<b><fmt:message key="myorder.current.service" /></b>
                        </a>
                </li>
            </ul>
            </div>
        </div>
     </div>
</form> 
```

我在想这样的事情。我是引导程序和 jQuery 的新手

```
<script type="text/javascript">
    var pageToGo = "${requestScope.pagetype}";
    alert("pageToGo is" +pageToGo);
    $(document).ready( function() {
        $(".nav li a:contains('OO')").parent().addClass('active');
    })
</script> 
```

# html - IE中的样式问题 - 巨大的空间显示

> ID：14821813
> 
> 赞同：0
> 
> 时间：2013-02-11T22:07:58.063
> 
> 标签：html, css, internet-explorer, styling

嘿伙计们，所以我有以下内容：

[http://jsfiddle.net/z3Hr2/](http://jsfiddle.net/z3Hr2/)

这是我用来在 JQuery 中访问的导航、表格……这是一张照片：

![在此处输入图像描述](../Images/54fe065562c67a3ad5a0d4cd43f61c9a.png)

现在，当我单击其中一个链接时，会弹出一个表格，如下所示：

![在此处输入图像描述](../Images/ad3784341e633e129dfc51664ab585a1.png)

问题在于，在 IE 中，顶部和底部之间存在巨大差距，即使它们是`display:none`（单击导航链接时打开的表格）。

这是我在 IE 中的意思：

![在此处输入图像描述](../Images/bfe524f67c0ad7bf71819c9c46831008.png)

这是表容器布局：

```
<div class="csvemployeestools">
   <div class="MemberopenstatusViewer">
      <div class="OpenstatusViewertable">
          table that is opened depending on which link clicked in nav....
      </div>
   <div>
    .....

</div> <!-- after all tables are defined, this closes it out. 
```

CSS：

```
.csvemployeestools{

    margin-top: 2%;
    overflow: hidden;

}

.MemberopenstatusViewer{
    display:block;
    /*float:left;*/
    margin: 0 auto;
    font-family: Helvetica, Arial, Sans-Serif;
    font-weight: bold;
    font-size: .7em;
    width:100%;
    /*overflow-x: scroll;*/

}
.OpenstatusViewertable {
    width:100%; 
    max-height: 300px;
overflow-y: scroll;
margin-bottom: 3%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:31:03.890

我不知道这是否会有所帮助，但是您应该将 div ID 用于布局而不是类。

这要好得多：

```
(class = . )(id = #) 
```

但我不确定这与这个问题有什么关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:31:31.737

嘿伙计们，我想通了....我刚刚删除了桌子周围的 div：

```
<div class="MemberopenstatusViewer">
      <div class="OpenstatusViewertable">

      </div>
   <div> 
```

不过谢谢！

# c++ - 函数返回类型中的“&”符号是什么意思？

> ID：14821818
> 
> 赞同：0
> 
> 时间：2013-02-11T22:08:16.403
> 
> 标签：c++, function, return-type

我正在阅读一本解释以下功能的 C++ 书：

```
istream& read_hw(istream& in, vector<double>& hw) {
    if (in) {
        hw.clear() ;
        double x;
        while (in >> x)
            hw.push_back(x);
        in.clear();
    }
    return in;
} 
```

这本书解释了参数列表中的那些“&”意味着它们是通过引用传递的，但是`istream&`在函数的返回类型中没有关于 : 中的那个符号的解释。
删除它会导致许多编译错误。有人可以澄清吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:09:04.890

该函数也通过引用返回。在这种情况下，您传入的对象是从函数返回的，因此您可以“链式”调用此函数：

```
in.read_hw(hw1).read_hw(hw2); 
```

这是 C++ 中的常见模式，尤其是在使用 IOstreams 库时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:10:09.443

这将返回对 istream 的引用。请注意，这可能与作为参数传递的 istream& 引用相同。

从[learncpp.com](http://www.learncpp.com/cpp-tutorial/74a-returning-values-by-value-reference-and-address/)：

> 通过引用返回通常用于将通过引用传递给函数的参数返回给调用者。在下面的示例中，我们返回（通过引用）一个数组元素，该元素通过引用传递给我们的函数：

```
// This struct holds an array of 25 integers
struct FixedArray25
{
    int anValue[25];
};

// Returns a reference to the nIndex element of rArray
int& Value(FixedArray25 &rArray, int nIndex)
{
    return rArray.anValue[nIndex];
}

int main()
{
    FixedArray25 sMyArray;

    // Set the 10th element of sMyArray to the value 5
    Value(sMyArray, 10) = 5;

    cout << sMyArray.anValue[10] << endl;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T22:12:15.780

在“istream& in”中，& 运算符的意思是“参考”

只要知道你在这里传入的任何变量，原始值都会被修改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T22:09:56.757

这是一个参考。它就像一个指针，但它不能为 NULL。

因此，您的函数正在返回对`istream`对象的引用。请注意，您还将与第一个参数相同的数据类型传递给您的函数。

对流执行此操作很常见，因此您可以使用流测试运算符来检查错误情况：

```
if( !read_hw(in, hw) ) cerr << "Read failed\n"; 
```

# javascript - 从 Pinterest pinit 按钮的页面中抓取图像

> ID：14821821
> 
> 赞同：0
> 
> 时间：2013-02-11T22:08:27.527
> 
> 标签：javascript, pinterest

我正在为我的网站使用 Pinterest 分享按钮。我想要的预期行为是，每当我按下 pin it 按钮时，它都会向我显示页面上的所有图像，并给我一个选项来固定其中一个。

就像在[http://www.dogster.com/the-scoop/minkyu-lee-adam-and-dog-nposed-for-an-oscar上固定按钮一样](http://www.dogster.com/the-scoop/minkyu-lee-adam-and-dog-nominated-for-an-oscar)

但是，在[http://pinterest.com/about/goodies/](http://pinterest.com/about/goodies/)上的 pin it api需要一个硬编码媒体 url 来固定。

我不知道如何从 Pinterest 获取这种行为，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:23:07.330

找到了：

[http://business.pinterest.com/widget-builder/#do_pin_it_button](http://business.pinterest.com/widget-builder/#do_pin_it_button)

它确实给了我想要的行为。它完全隐藏在 Pinterest 的开发人员中

# android - PhoneNumberFormattingTextWatcher 不工作

> ID：14821822
> 
> 赞同：12
> 
> 时间：2013-02-11T22:08:31.660
> 
> 标签：android, formatting, android-edittext, textwatcher

我正在尝试使用 PhoneNumberFormattingTextWatcher 但没有发生任何事情，好像代码不存在

这是代码

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    PreferenceManager.setDefaultValues(this, R.xml.preferences, false);
    EditText PhoneEdit = (EditText) findViewById(R.id.editText1); 
    PhoneEdit.addTextChangedListener(new PhoneNumberFormattingTextWatcher());
} 
```

当输入 002010555666 时它仍然是相同的 no - 或 + 或 ()，只是没有任何格式的相同代码中是否缺少任何内容

帮助

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-04-25T11:08:56.377

有同样的问题，但删除后就`android:digits="1234567890+"`消失了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-03T15:37:22.713

我在 YTerle 的答案中添加了评论，但我想将完整的答案放在下面：

```
<android.support.design.widget.TextInputEditText
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:inputType="phone"
                android:hint="@string/phone_number"
                android:layout_marginBottom="5dp"
                android:ems="10"
                android:maxLength="14"
                android:id="@+id/phone" /> 
```

然后在代码中输入以下内容：

```
phoneView.addTextChangedListener(new PhoneNumberFormattingTextWatcher()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-13T13:03:39.843

即使在添加`android:inputType="phone"`XML 之后我也遇到了问题。

解决方案是**在手机中设置语言**：

> 设置 -> 搜索语言 -> 选择英语（美国）

格式 (999) 999-9999 主要用于美国，因此电话语言应仅设置为该格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-06T13:32:59.513

最终解决方案：该问题仅与您在 XML 中选择的 android:inputType 相关。它不适用于“数字”。您需要选择“电话”或无输入类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-15T17:26:42.710

我在应用程序中使用了它，它在模拟器中运行良好（Android_4.2_Emulator_Smartphone_Nexus_S 使用平台 4.4.2，API 19）但在运行平台 4.1.2，API 17 的三星 Tab 3 设备上运行时完全没有效果. 也许它依赖于设备？文档表明它是在 API 1 中引入的，所以我认为它现在应该已经解决了所有问题，但显然没有。

# vb.net - 如何在 vb 中创建可以更改应用程序本身内容的设置页面？

> ID：14821826
> 
> 赞同：-1
> 
> 时间：2013-02-11T22:08:36.220
> 
> 标签：vb.net, settings

我正在为公司制作一个应用程序，因此他们只需点击一些切换按钮并输入一些文本，就可以在眨眼间制作一份工作报告，该应用程序会制作一份布局精美的电子邮件并将其发送到电子邮件地址

需要的是：一个设置页面，我可以在其中更改它转到的电子邮件地址文本块的文本等等。

我只想制作一个适合用户的应用程序。

我知道我需要使用隔离存储，但我真的不知道如何将它放在 VB 中，以便它可以更改需要更改的内容的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:12:30.107

从表单文本框或其他文件中保存设置后，您可以查看使用 My.Settings 的 Microsoft 文章[http://msdn.microsoft.com/en-us/library/ms379611(VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms379611(VS.80).aspx)输入方法，您可以在表单加载时重新读取设置，并根据用户设置更改应用程序的外观。

# php - Opencart - 类别总是展开

> ID：14821834
> 
> 赞同：-2
> 
> 时间：2013-02-11T22:09:05.860
> 
> 标签：php, javascript, html, module, opencart

如何始终显示子类别？我希望左侧的这个模块始终显示相同的 - 所有父母及其子女类别..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-29T18:33:00.040

在文件`catalog\controller\module\category.php`中，替换以下内容：

```
if ($category_id == $result['category_id']) {
    $children = $this->getCategories($result['category_id'], $new_path);
} 
```

...和：

```
//if ($category_id == $result['category_id']) {
      $children = $this->getCategories($result['category_id'], $new_path);    
//} 
```

来源： http: [//forum.opencart.com/viewtopic.php?f=20 &t=3128&p=25921&#p25921](http://forum.opencart.com/viewtopic.php?f=20&t=3128&p=25921&#p25921)

对于 Opencart 2，这是解决方案

[OpenCart 2：默认显示类别模块中的所有子类别（php）](https://stackoverflow.com/questions/32442713/opencart-2-show-all-subcategories-in-category-module-by-default-php)

# php - 文件上传无法使用 codeigniter。不知道为什么

> ID：14821839
> 
> 赞同：0
> 
> 时间：2013-02-11T22:09:16.357
> 
> 标签：php

我正在尝试添加一个图像，将图像上传到我的根目录中。当我点击添加图像的提交按钮时，它在 if 语句中显示错误，就好像它是错误的一样。我不知道我做错了什么。

看看我有什么现场访问：http: [//travismichael.net/SeniorProject](http://travismichael.net/SeniorProject)

我的根目录中有我的上传文件夹，我使它可写。

这是我的控制器

```
function do_upload() {
$config['upload_path'] = './uploads/';
$config['allowed_types'] = 'gif|jpg|png';
$config['max_size'] = '32';
$config['max_width']  = '200';
$config['max_height']  = '200';

$this->load->library('upload', $config);

if ( !$this->upload->do_upload('userfile'))
{
  echo  '<p>IMAGE NOT WORKING</p>';
}
else
{
  $data = array('upload_data' => $this->upload->data());

  $this->load->view('partials/upload_success', $data);
} 
```

这是我的看法

```
<!DOCTYPE html>
<?php $this->load->view('partials/page_head'); ?> 
<body>
<body class="home">
<div id="container">
<div id="top">
  <div class="topcenter">
    <h2><a class="addbtn">Add Folder</a></h2>
    <h2><a class="deletebtn" href="<?php echo base_url();?>index.php/home/delete">DeleteFolders</a></h2>
  </div>    
  <div class="navdescription"><span>Home</span></div>
</div>

  <div class="projectFolders">
  <?php foreach($foldername as $row) { ?>
    <div class="folder <?php echo $row->folderName; ?>">
      <button class="<?php echo $row->folderName; ?>"><?php echo $row->folderName; ?>    </button>
    </div>
    <script>
        $(function () {
          $('button.<?php echo $row->folderName; ?>').bind('click', 
            function() { $('.open.<?php echo $row->folderName;?>').show() });

          $('.gohome').bind('click', 
            function() { $('.open.<?php echo $row->folderName;?>').hide() });
        });
    </script>
  <?php } ?>

 <?php foreach($foldername as $row) { ?>
    <div class="open <?php echo $row->folderName; ?>">
      <h1><?php echo $row->folderName;?></h1>
      <a class="gohome">Home</a><a class="addimagebtn">Add Image</a>
        <div class="edititable" contenteditable="true" focus="true">
          Your Content Goes Here
        </div>
    </div>
  <?php } ?>
  <div class="uploadimage">
    <?php echo form_open_multipart('home/do_upload');?>
      <input type="file" name="userfile" size="20" />
      <br /><br />
      <input type="submit" value="Add Image" />
     </form>
   </div>
  </div>
  <div id="bottom">
  <div class="formWrapper">
    <form accept-charset="utf-8" method="post" action="<?php echo base_url(); ?>index.php/home/create" id="cf_form">
      <input type="text" name="folderName" placeholder="Enter new Folder" class="required" required/>
    <?php echo form_submit('createFolder', 'Create Folder'); ?>
    <?php echo form_close(); ?>
    <?php echo validation_errors('<p class="error">'); ?>
</div>
</div>  
</div><!-- End of container div -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:29:57.473

某些原因 Codeignitor 忘记更新他们的文档。

您需要在调用上传库的位置正上方添加此行

$this->上传->初始化($config);

# php - php比较php中的YYYY-mm-dd字符串

> ID：14821840
> 
> 赞同：3
> 
> 时间：2013-02-11T22:09:18.880
> 
> 标签：php, date

我在 php 代码中运行过将 YYYY-mm-dd 格式的日期作为字符串进行比较。这行得通吗？它似乎在简单的情况下工作，但我不确定将它们作为字符串进行比较是否有意义。

```
<?php
$today = '2013-02-11';
$start_date = '2013-02-11';
$end_date = '2013-02-12';
$on_promo = (($start_date <= $today) && ($end_date >= $today));

if ($on_promo)
{
    echo 'ON promo';
}
else
{
    echo 'OFF promo';
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T22:11:08.570

你*太*接近了。只需使用[DateTime](http://www.php.net/manual/en/class.datetime.php)。非常适合这个；

```
<?php
$today      = new DateTime('2013-02-11');
$start_date = new DateTime('2013-02-11');
$end_date   = new DateTime('2013-02-12');
$on_promo   = (($start_date <= $today) && ($end_date >= $today));

if ($on_promo)
{
    echo 'ON promo';
}
else
{
    echo 'OFF promo';
}
?> 
```

[看到它在行动](http://codepad.viper-7.com/FUUNrZ)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T22:23:54.137

在 PHP 中使用大于或小于比较字符串时，它会按字母顺序比较它们。

按字母顺序`2013-02-10`排在前面`2013-02-13`

如果我们有：

```
$date1 = '2013-02-10';
$date2 = '2013-02-13';
var_dump($date2 > $date1); // produces true

var_dump('apple' > 'banana'); // produces false 
```

但是，请注意，如果字符串都是数字，它会将它们都转换为整数

```
var_dump('11' > '101'); // produces false
var_dump('a11' > 'a101'); // produces true
var_dump('11a' > '101a'); // produces true 
```

因此，如果使用该格式`YYYY-MM-DD`，您可以很好地比较两个日期，但是我真的不建议依赖这个。有人可能会输入一个日期`2013-2-11`（注意月份没有前导`0`），它会完全摆脱逻辑。采纳 John Conde 的建议并使用会好得多`DateTime`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T22:10:58.960

使用`strtotime`而不是将日期作为字符串进行比较

```
<?php
$today = date('U');
$start_date = strtotime('2013-02-11');
$end_date = strtotime('2013-02-12');
$on_promo = (($start_date <= $today) && ($end_date >= $today));

if ($on_promo)
{
    echo 'ON promo';
}
else
{
    echo 'OFF promo';
}
?> 
```

# c++ - 转换 TIF 作品，Magick++ 读取相同的 TIF，中止

> ID：14821841
> 
> 赞同：1
> 
> 时间：2013-02-11T22:09:20.110
> 
> 标签：c++, imagemagick-convert, magick++

我可以从命令行使用 convert 命令将 some.tif 转换为其他任何东西。但是当我在 Magick++ 程序中使用 read 命令时，它无法读取相同的 TIF 文件，并显示以下消息：

“在抛出 'Magick::WarningCoder' what() 的实例后调用终止：convert1: some.tiff: 遇到标签为 33780 (0x83f4) 的未知字段。'TIFFReadDirectory'@warning/tiff.c/TIFFWarnings/768 **Aborted** ”

`Magick++-config --cppflags --cxxflags --ldflags --libs`我用“c++ -o convert1 convert1.cpp ”编译我的 C++ 程序

你能指出我做错了什么吗？

谢谢，

# c++ - C++ 将浮点值转换为枚举 - 但不是 VS 2010

> ID：14821846
> 
> 赞同：6
> 
> 时间：2013-02-11T22:09:55.593
> 
> 标签：c++, visual-studio-2010, casting, enums, compiler-errors

我有一些模板代码适用于 Xcode 4.5 和 LLVM 3.0，但在 VS 2010 Express C++ 工具链（v 10.0.30319.1）中失败。

我正在使用我无法控制的第三方 API。它为我的代码提供值作为只能由 API 函数解释的黑盒“blob”：

```
// API_Secret is a black-box encapsulation of a floating-point number or a boolean value.
// It is provided by a third-party API, with associated access functions.
// For all intents and purposes, it's a complete black box.
// This enum represents the internal 'type' of a secret value.
enum API_SecretTypeEnum {
  API_Number,
  API_Boolean,
};
// Other API declarations:
API_SecretTypeEnum API_GetType(const API_Secret &value);
double API_AsNumber(const API_Secret &value);
bool API_AsBoolean(const API_Secret &value);

// my code:
template <typename ValueType>
class Extractor {
 public:
  ValueType extract(API_Secret value) {
    if (API_GetType(value) == API_Number) {
      return static_cast<ValueType>(API_AsNumber(value));
    } else if (API_GetType(value) == API_Boolean) {
      return API_AsBoolean(value) ? ValueType(1) : ValueType(0);
    }
    return ValueType();
  }
};

// boolean specialization - not 100% sure it's needed though
template<>
class Extractor <bool> {
 public:
  bool extract(API_Secret value) {
    return API_AsBoolean(value);
  }
}; 
```

然后，稍后：

```
API_Secret API_GetSomeValue(int some_sort_of_handle);

// get some black-box values from the API
API_Secret secret0 = API_GetSomeValue(0);
API_Secret secret1 = API_GetSomeValue(1);
API_Secret secret2 = API_GetSomeValue(2);

// for certain external reasons we expect this to be an integer representation:
Extractor<int> e0;
int v0 = e0.extract(secret0);

// for certain external reasons we expect this to be a double representation:
Extractor<double> e1;
double v1 = e1.extract(secret1);

// for certain external reasons we expect this to be a boolean representation:
Extractor<bool> e2;
bool v2 = e2.extract(secret2); 
```

现在来了解 Xcode、LLVM 和 VS 2010 之间的区别。在 Xcode 和 LLVM 中，将编译以下内容（作为完整程序的一部分）：

```
enum MyEnum {
  Enum0,
  Enum1,
};
Extractor<MyEnum> ee;
MyEnum ve = ee.extract(secret0); 
```

即类模板使用 a`static_cast`从*浮点数转换为枚举*。这似乎工作正常，[本页](http://en.cppreference.com/w/cpp/language/static_cast)的解释部分表明这是有效的：

> 8) 整数、**浮点数**或枚举类型可以转换为任何枚举类型（如果转换为枚举的基础类型的表达式的值不是目标枚举值之一，则结果未指定）

但是使用 VS2010，会遇到以下编译器错误：

> 错误 C2440：“static_cast”：无法从“double”转换为“MyEnum”
> 
> ```
>  Conversions between enumeration and floating point values are no longer allowed 
> ```

这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/c36yw7x9.aspx)似乎通过不提及浮点类型并明确说明“整数”值来证实这一点：

> static_cast 运算符可以将整数值显式转换为枚举类型。如果整数类型的值不在枚举值范围内，则生成的枚举值是未定义的。

因此，VS 2010 和其他编译器之间似乎存在显着差异。我想知道这是否可以在 VS 2010 中绕过？它是 VS 2010 根本不支持的语言的新功能吗？但是，我对此进行了查询，因为错误消息显示“不再允许”，这意味着它被明确禁止。

我知道一种解决方法 -`Extractor<MyEnum>`我可以使用 an`Extractor<int>`而不是强制转换为枚举（使用 ），然后只需将其分配给目标 MyEnum 变量。然而，这个模板实际上用作调用包装函数的更大系统的一部分，在这种情况下，包装函数采用 MyEnum 值。这会阻止模板正确匹配，因为 ValueType 参数实际上是从包装函数的签名中自动提取的。

或者，是否可以编写`enum`仅匹配类型的 Extractor 模板特化？然后我可以先转换为整数类型。或者，也许基本模板总是可以先转换为 int，然后我可以编写一个不这样做的浮点特化 - 但我不确定如何编写一个捕获所有浮点类型的模板（float，双倍的， ...）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:19:04.653

我很确定[Visual Studio-2010 支持`<type_traits>`](http://msdn.microsoft.com/en-us/library/vstudio/bb982077%28v=vs.100%29.aspx). 您可以`std::enable_if`与`std::is_enum`.

```
template <typename ValueType, typename Enable = void>
class Extractor {
 public:
  ValueType extract(API_Secret value);
};

template <typename ValueType>
class Extractor<ValueType, typename std::enable_if<std::is_enum<ValueType>::value>::type>
{
 ...
}; 
```

您可以使用相同的方法来匹配浮点类型`std::is_floating_point`。

# c++ - C++ 使用模板和继承创建函数映射

> ID：14821850
> 
> 赞同：-1
> 
> 时间：2013-02-11T22:09:59.863
> 
> 标签：c++, function, templates, inheritance, map

我正在尝试使用模板创建一个通用函数映射。想法是从这个具有特定函数指针类型的通用模板类继承。我可以在全局工作空间中注册一个函数，但我宁愿将所有函数集中在派生类中，然后在构造函数中注册。我想我快到了，但我得到一个编译错误。这是我的代码的精简版本：

```
#include <iostream>
#include <string>
#include <map>
#include <cassert>
using namespace std; 

int f(int x) { return 2 * x; }
int g(int x) { return -3 * x; }
typedef int (*F)(int);

// function factory
template <typename T>
class FunctionMap {
public: 
    void registerFunction(string name, T fp) {
        FunMap[name] = fp;
    }
    T getFunction(string name) {
        assert(FunMap.find(name) != FunMap.end());
        return FunMap[name];
    }
private:
    map<string, T> FunMap;
};

// specific to integer functions 
class IntFunctionMap : public FunctionMap<F> {
public:
    int f2(int x) { return 2 * x; }
    int g2(int x) { return -3 * x; }
    IntFunctionMap() {
        registerFunction("f", f); // This works
        registerFunction("f2", f2); // This does not
    }
};

int main()
{
     FunctionMap<F> fmap; // using the base template class directly works
     fmap.registerFunction("f", f);
     F fun = fmap.getFunction("f");
     cout << fun(10) << endl; 
     return 0;
} 
```

我得到的错误是：

```
templatefunctions.cpp: In constructor ‘IntFunctionMap::IntFunctionMap()’:
templatefunctions.cpp:33: error: no matching function for call to     ‘IntFunctionMap::registerFunction(const char [3], <unresolved overloaded function type>)’
templatefunctions.cpp:15: note: candidates are: void FunctionMap<T>::registerFunction(std::string, T) [with T = int (*)(int)] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:57:46.473

Juan 的回答是正确的：成员函数有一个隐式的第一个参数，它是指向它们所属类型的指针。您的代码无法编译的原因是您的映射支持具有 type 的函数指针`int (*)(int)`，但 f2 的类型是`int (IntFunctionMap::*)(int)`.

在您在这里展示的特定情况下，您可以使用`std::function`实现类型擦除的 ，将自由函数和成员函数表示为同一类型。然后你可以做你想做的事。注意：这需要 C++11。

```
#include <iostream>
#include <string>
#include <map>
#include <cassert>
#include <function>
#include <bind>

using namespace std; 

int f(int x) { return 2 * x; }
int g(int x) { return -3 * x; }

typedef std::function<int (int)> F;

// function factory
template <typename T>
class FunctionMap {
public: 
    void registerFunction(string name, T fp) {
        FunMap[name] = fp;
    }
    T getFunction(string name) {
        assert(FunMap.find(name) != FunMap.end());
        return FunMap[name];
    }
private:
    map<string, T> FunMap;
};

// specific to integer functions 
class IntFunctionMap : public FunctionMap<F> {
public:
    int f2(int x) { return 2 * x; }
    int g2(int x) { return -3 * x; }

    IntFunctionMap() {
        registerFunction("f", f); // This works
        registerFunction("f2", std::bind(&f2, this, _1)); // This should work, too!
    }
};

int main()
{
     FunctionMap<F> fmap; // using the base template class directly works
     fmap.registerFunction("f", f);
     F fun = fmap.getFunction("f");
     cout << fun(10) << endl; 
     return 0;
} 
```

# arrays - WP_Query 在不同位置回显数组

> ID：14821851
> 
> 赞同：0
> 
> 时间：2013-02-11T22:09:59.530
> 
> 标签：arrays, wordpress, loops

您好，我需要在不同区域回显 WP_Query，以便我可以在每个渲染帖子标题之间添加内容..

所以基本上我想手动突破帖子，这样我就可以将它们放在静态内容周围。希望这是有道理的。

我想做这样的事情。请看我的笔记。

```
$the_query = new WP_Query( $args );

while ( $the_query->have_posts() ) :

    $the_query->the_post();

    echo '<li>' . get_the_title() . '</li>'; // first post title

        //echo 'some static content';

        echo '<li>' . get_the_title() . '</li>'; //second post title

        //echo 'some more static content';

endwhile; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:21:21.433

您可以使用包含所有静态内容的数组：

```
$the_query = new WP_Query( $args );

$static_content = array ('content after first post','content after second post');

$counter = 0;

while ( $the_query->have_posts() ) :

    $the_query->the_post();

    echo '<li>' . get_the_title() . '</li>';

    echo $static_content[$counter];

    $counter++;

endwhile; 
```

# delphi - Delphi 2010安装后找不到项目中用到的组件dcu文件？

> ID：14821855
> 
> 赞同：-1
> 
> 时间：2013-02-11T22:10:18.477
> 
> 标签：delphi, components, dcu

几年前我完成了一个项目。现在我想改进它。因此，我安装了之前在项目中使用的组件。但是当我运行该项目时，它给出了一个错误。编译器找不到某些组件对象的 dcu 文件。我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T22:32:11.710

只是将包编译并安装到 IDE 中并不会更新编译器用来查找`dcu-s`. 您可以通过更新 Delphi 2010 库路径`Tools -> Options -> Library win32 -> Library path`。

# asp.net-mvc - ASP.NET MVC：如何创建将绑定到此 POST 数据的模型？

> ID：14821856
> 
> 赞同：2
> 
> 时间：2013-02-11T22:10:21.837
> 
> 标签：asp.net-mvc, model

我在创建将绑定到以下表单数据的模型时遇到问题。我遇到的主要困难是创建一个将绑定`filter`（即：多维数组）的模型。

这就是我到目前为止所拥有的。谁能帮我让这个模型正确绑定？

```
 public class GetPagedRequest
    {
        public int Start { set; get; }

        public int Limit { set; get; }

        public string dir { set; get; }

        public List<FilterRequest> filter { set; get; } //This won't bind properly

    }

    public class FilterRequest
    {
        public string field { set; get; }

        public DataFilterRequest data { set; get; }
    }

    public class DataFilterRequest
    {
        public string type { set; get; }
        public string value { set; get; }

    } 
```

![发布数据](../Images/0f7c82baa450024d258a4abcc2bc5224.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:41:43.340

### 更新

看了DefaultModelBinder的能力后，在post数据中看到了问题。

在任何事情之前，只需将过滤器属性的类更改为：

```
public IList<FilterRequest> filter { set; get; } //(IList<T> instead of List<T>) 
```

这是 DefaultModelBinder 将正确绑定的查询字符串：

```
start=0&limit=5&dir=ASC&sort=noSort&filter[0].field=CompanyName&filter[0].data.type=string&filter[0].data.value=Telus&filter[1].field=VendorName&filter[1].data.type=string&filter[1].data.value=testtest 
```

但是 js 正在生成这个查询字符串：

```
start=0&limit=5&dir=ASC&sort=noSort&filter[0][field]=CompanyName&filter[0][data][type]=string&filter[0][data][value]=Telus&filter[1][field]=VendorName&filter[1][data][type]=string&filter[1][data][value]=testtest 
```

现在您可以实现自己的 ModelBinder 类，但我认为在客户端序列化对象更容易，只需确保正确设置内容类型即可。这是一个用jquery制作的例子：

```
<script type="text/javascript">
    $(function () {
        $("#btnSendPost").click(function () {
            var filterData = {
                "start": 0, "limit": 5,
                "dir": "ASC", "sort": "noSort",
                "filter": [{ "field": "CompanyName", "data": { "type": "string", "value": "Telus" } },
                           { "field": "VendorName", "data": { "type": "string", "value": "testtest" } }]};
            $.ajax({
                type: "POST",
                url: "/Home/ReceivePostFromJson",
                data: JSON.stringify(filterData),
                dataType: "json",
                contentType: 'application/json; charset=utf-8'
            });
        });
    });
</script> 
```

然后，您只需将此行添加到 global.asax 文件中的 Application_Start 方法：

```
ValueProviderFactories.Factories.Add(new JsonValueProviderFactory()); 
```

这样框架将正确绑定模型，并且在 action 方法中您将收到对象

```
 [HttpPost]
    public ActionResult ReceivePostFromJson(GetPagedRequest g)
    { 
```

### 原始答案

如果您可以在发布过滤器数据之前将控件中的 json 字符串化，那么您可以使用 JavaScriptSerializer 来反序列化对象。

这个例子是用jquery制作的：

```
<script type="text/javascript">
    $(function () {
        $("#btnSendPost").click(function () {
            var filterData = {
                "start": 0, "limit": 5,
                "dir": "ASC", "sort": "VendorName",
                "filter": [{ "field": "CompanyName", "data": { "type": "string", "value": "Telus" } },
                           { "field": "VendorName", "data": { "type": "string", "value": "testtest" } }]};
            $.ajax({
                type: "POST",
                url: "/Home/ReceivePostFromJson",
                data: JSON.stringify(filterData),
                dataType: "application/json"
            });
        });
    });
</script> 
```

然后在控制器中：

```
[HttpPost]
public ActionResult ReceivePostFromJson()
{
    string jsonStringify = new System.IO.StreamReader(Request.InputStream).ReadToEnd();
    var obj = new JavaScriptSerializer().Deserialize<GetPagedRequest>(jsonStringify);

    return View(obj);
} 
```

这样你就有了嵌套的对象： ![Json MVC 测试截图](../Images/1c12077eadb4f033e61651d404741a2b.png)

注意：在此示例中，如果您**删除函数 JSON.stringify** (data: filterData,)，您将在控制器端看到产生问题的查询字符串 (filter[0][field]: CompanyName)。我不知道是否有办法恢复 json，如果可能的话，你不必修改网格控件： ![JS对象制作形式](../Images/53dd0847f5ef8b56035ea1e9eb901536.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:39:35.157

我不支持 jherrera 的解决方案：

```
[HttpPost]
public ActionResult ReceivePostFromJson()
{
    string jsonStringify = new System.IO.StreamReader(Request.InputStream).ReadToEnd();
    var obj = new JavaScriptSerializer().Deserialize<GetPagedRequest>(jsonStringify);

    return View(obj);
} 
```

如果您想从服务器端的客户端接收 json 数据，您应该准备您的客户端对象以具有类似于服务器端视图模型的保存结构。这样，模型绑定器将在提交表单时完美地完成其工作。

代码未测试：

```
public ActionResult DeleteXXX(GetPagedRequest pagedRequestViewModel)
{
   // Use AutoMapper or a UI Service to reshape/map your viewmodel to your domain model
   return EmptyResult();
} 
```

# c# - DataTable 和 ASP.NET 中继器

> ID：14821858
> 
> 赞同：3
> 
> 时间：2013-02-11T22:10:30.833
> 
> 标签：c#, asp.net, data-binding, datatable, repeater

我将 DataTable 绑定到转发器。但是，当我运行我的 aspx 页面时，它不会评估 Eval 语句并将它们显示在页面上

```
<<%# Eval("Name").ToString() %> Posted by: <<%# Eval("UserName").ToString() %>
<<%# Eval("Name").ToString() %> Posted by: <<%# Eval("UserName").ToString() %>
<<%# Eval("Name").ToString() %> Posted by: <<%# Eval("UserName").ToString() %> 
```

它也将其分解为 3 行。这也不是我所期望的。我认为它通常会显示为跨度

我已取出 .ToString 以检查是否是导致问题的原因。但事实并非如此。

下面是我的中继器

```
<asp:Repeater ID="First" runat="server">
        <ItemTemplate>
            <div class="ItemDiv">
                <span class="ItemLeft"></span>
                <span class="ItemCentre">
                    <asp:Label ID="Name" runat="server" Text='<<%# Eval("Name").ToString() %>'></asp:Label>
                </span>
                <span class="ItemRight">
                    <asp:Label ID="UserName" runat="server" Text='<<%# Eval("UserName").ToString() %>'></asp:Label>
                </span>
            </div>
        </ItemTemplate>
    </asp:Repeater> 
```

绑定的代码如下：

```
public void dataLoad()
{
    DataTable Data = loadData(1,1,1);

    if (Data.Rows.Count < 10)
    {
        // Only populate the data from datatable
        First.DataSource = Data;
        First.DataBind();
        Second.Visible = false;
        noData.Visible = true;
    } 
```

我已经更改了上面示例中的一些名称

在调试信息中，我可以看到我的 DataTable 使用了正确的列名，并且这些与我的 eval 语句匹配。

我知道我以一种相当奇怪的方式创建了这个，从我所阅读的内容和在线研究来看，使用表格而不是 Divs/或 Spans 更为常见。所以我知道这可能是它的核心问题。

我不明白为什么会有所不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T22:19:59.927

`<<`从您的 eval 语句中删除。它应该是：

```
<div class="ItemDiv">
    <span class="ItemLeft"></span>
    <span class="ItemCentre">
        <asp:Label ID="Name" runat="server" Text='<%# Eval("Name").ToString() %>'></asp:Label>
    </span>
    <span class="ItemRight">
        <asp:Label ID="UserName" runat="server" Text='<%# Eval("UserName").ToString() %>'></asp:Label>
    </span>
</div> 
```

# r - 如何在 R 中找到对称矩阵（12k X 12k）中前 10,000 个元素的索引

> ID：14821859
> 
> 赞同：9
> 
> 时间：2013-02-11T22:10:31.330
> 
> 标签：r, matrix

我有一个非零对称矩阵'matr'，它是 12000X12000。我需要在 R 中的“matr”中找到前 10000 个元素的索引。我编写的代码需要很长时间——我想知道是否有任何指针可以让它更快。

```
listk <- numeric(0)
for( i in 1:10000) {
    idx <- which(matr == max(matr), arr.ind=T)
    if( length(idx) != 0) {
        listk <- rbind( listk, idx[1,])
        matr[idx[1,1], idx[1,2]] <- 0
        matr[idx[2,1], idx[2,2]] <- 0
    } 
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T22:20:34.933

下面介绍了如何找到`ij`10×10 矩阵中 4 个最大元素的索引 ( ) `m`。

```
## Sample data
m <- matrix(runif(100), ncol=10)

## Extract the indices of the 4 largest elements
(ij <- which(m >= sort(m, decreasing=T)[4], arr.ind=TRUE))
#      row col
# [1,]   2   1
# [2,]   5   1
# [3,]   6   2
# [4,]   3  10

## Use the indices to extract the values
m[ij]
#  [1] 0.9985190 0.9703268 0.9836373 0.9914510 
```

* * *

**编辑：**

对于大型矩阵，执行部分排序将是找到第 10,000 个最大元素的更快方法：

```
v <- runif(1e7)
system.time(a <- sort(v, decreasing=TRUE)[10000])
#    user  system elapsed 
#    4.35    0.03    4.38 
system.time(b <- -sort(-v, partial=10000)[10000])
#    user  system elapsed 
#    0.60    0.09    0.69 
a==b
# [1] TRUE 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-12T19:53:05.200

我喜欢@JoshO'Brien 的回答；部分排序的使用很棒！这是一个 Rcpp 解决方案（我不是一个强大的 C++ 程序员，所以可能会出现愚蠢的错误；欢迎更正......我将如何在 Rcpp 中对其进行模板化，以处理不同类型的输入向量？）

为了方便起见，我首先包含适当的标头并使用命名空间

```
#include <Rcpp.h>
#include <queue>

using namespace Rcpp;
using namespace std; 
```

然后安排将我的 C++ 函数暴露给 R

```
// [[Rcpp::export]]
IntegerVector top_i_pq(NumericVector v, int n) 
```

并定义一些变量，最重要的`priority_queue`是 a 将数值和索引保持为一对。队列是有序的，因此最小值位于“顶部”，较小的值依赖于标准对<>比较器。

```
typedef pair<double, int> Elt;
priority_queue< Elt, vector<Elt>, greater<Elt> > pq;
vector<int> result; 
```

现在我将遍历输入数据，如果 (a) 我还没有足够的值或 (b) 当前值大于队列中的最小值，则将其添加到队列中。在后一种情况下，我弹出最小值，并插入它的替换。这样，优先级队列总是包含 n_max 个最大的元素。

```
for (int i = 0; i != v.size(); ++i) {
    if (pq.size() < n)
        pq.push(Elt(v[i], i));
    else {
        Elt elt = Elt(v[i], i);
        if (pq.top() < elt) {
            pq.pop();
            pq.push(elt);
        }
    }
} 
```

最后，我将优先级队列中的索引弹出到返回向量中，记住转换为基于 1 的 R 坐标。

```
result.reserve(pq.size());
while (!pq.empty()) {
    result.push_back(pq.top().second + 1);
    pq.pop();
} 
```

并将结果返回给 R

```
return wrap(result); 
```

这有很好的内存使用（优先级队列和返回向量相对于原始数据都很小）并且速度很快

```
> library(Rcpp); sourceCpp("top_i_pq.cpp"); z <- runif(12000 * 12000)
> system.time(top_i_pq(z, 10000))
   user  system elapsed 
  0.992   0.000   0.998 
```

此代码的问题包括：

1.  默认比较器的`greater<Elt>`工作原理是，在跨越第 _n_th 元素值的平局的情况下，保留最后一个而不是第一个重复项。

2.  NA 值（和非有限值？）可能无法正确处理；我不确定这是否属实。

3.  该函数仅适用于`NumericVector`输入，但该逻辑适用于定义了适当排序关系的任何 R 数据类型。

问题 1 和 2 可以通过编写适当的比较器来解决；也许对于 2 这已经在 Rcpp 中实现了？我不知道如何利用 C++ 语言特性和 Rcpp 设计来避免为我想要支持的每种数据类型重新实现函数。

这是完整的代码：

```
#include <Rcpp.h>
#include <queue>

using namespace Rcpp;
using namespace std;

// [[Rcpp::export]]
IntegerVector top_i_pq(NumericVector v, int n)
{
    typedef pair<double, int> Elt;
    priority_queue< Elt, vector<Elt>, greater<Elt> > pq;
    vector<int> result;

    for (int i = 0; i != v.size(); ++i) {
        if (pq.size() < n)
            pq.push(Elt(v[i], i));
        else {
            Elt elt = Elt(v[i], i);
            if (pq.top() < elt) {
                pq.pop();
                pq.push(elt);
            }
        }
    }

    result.reserve(pq.size());
    while (!pq.empty()) {
        result.push_back(pq.top().second + 1);
        pq.pop();
    }

    return wrap(result);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-02T20:16:01.043

参加聚会有点晚了，但我想出了这个，这避免了这种情况。

假设您想要 12k x 12k 矩阵中的前 10k 个元素。这个想法是将数据“剪辑”到与该大小的分位数相对应的元素。

```
find_n_top_elements <- function( x, n ){

  #set the quantile to correspond to n top elements
  quant <- n / (dim(x)[1]*dim(x)[2])

  #select the cutpoint to get the quantile above quant
  lvl <- quantile(x, probs=1.0-quant)

  #select the elements above the cutpoint
  res <- x[x>lvl[[1]]]
}

#create a 12k x 12k matrix (1,1Gb!)
n <- 12000
x <- matrix( runif(n*n), ncol=n)

system.time( res <- find_n_top_elements( x, 10e3 ) ) 
```

导致

```
system.time( res <- find_n_top_elements( x, 10e3 ) )
 user  system elapsed
 3.47    0.42    3.89 
```

为了比较，只需在我的系统上对 x 进行排序即可

```
system.time(sort(x))
   user  system elapsed 
  30.69    0.21   31.33 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-10T08:03:50.857

R中的矩阵就像一个向量。

```
mat <- matrix(sample(1:5000, 10000, rep=T), 100, 100)
mat.od <- order(mat, decreasing = T)
mat.od.arr <- cbind(mat.od%%nrow(mat), mat.od%/%nrow(mat)+1)
mat.od.arr[,2][mat.od.arr[,1]==0] <- mat.od.arr[,2][mat.od.arr[,1]==0] - 1
mat.od.arr[,1][mat.od.arr[,1]==0] <- nrow(mat)
head(mat.od.arr)
#      [,1] [,2]
# [1,]   58    5
# [2,]   59   72
# [3,]   38   22
# [4,]   23   10
# [5,]   38   14
# [6,]   90   15

mat[58, 5]
# [1] 5000
mat[59, 72]
# [1] 5000
mat[38, 22]
# [1] 4999
mat[23, 10]
# [1] 4998 
```

# javascript - jQuery: (this) ui.value solution

> ID：14821860
> 
> 赞同：0
> 
> 时间：2013-02-11T22:10:36.480
> 
> 标签：javascript, jquery, sliders

I'm pretty new to jquery, but this is question. From my code below I have made 3 sliders each within a tag. Each of the three has an input field that is changed when the slider is moved to show the current value of the slider (simple jQueryUI plugin sliders). The final line involves another plugin that links all the sliders together so that they all add to 100 total and move when the others move.

The problem I'm having is that when I slide one, its value changes and shows but the others do not. I can get all of the values to change with some extra lines of code, but I don't know how to get (this) ui.value so that I can display the separate values for each of the sliders.

You can see in the third slider I tried to get it to do that, but the way it is set it only takes the same ui.value of the current slider being moved.

Can anyone help me with a solution to get (this) ui.value of the other sliders when i need to change it?

```
($(function() {
    $( "#RedSlider" ).slider({
        orientation: "horizontal",
        range: "min",
        min: 0,
        max: 100,
        value: 1,
        animate: true,
        slide: function( event, ui ) {
        $( "#RedValue" ).val( ui.value );}
    });
    $( "#RedValue" ).val( $( "#RedSlider" ).slider( "value" ) );
});

$(function() {
    $( "#BlueSlider" ).slider({
        orientation: "horizontal",
        range: "min",
        min: 0,
        max: 100,
        value: 1,
        animate: true,
        slide: function( event, ui ) {
        $( "#BlueValue" ).val( ui.value );}
    });
    $( "#BlueValue" ).val( $( "#BlueSlider" ).slider( "value" ) );
});

$(function() 
{
    $( "#EmptySlider" ).slider({
        orientation: "horizontal",
        range: "min",
        min: 0,
        max: 100,
        value: 98,
        animate: true,
        slide: function( event, ui ) 
        {
            $( "#EmptyValue" ).val( ui.value );
                            $( "#RedValue").val(ui.value);
                            $( "#BlueValue").val(ui.value);
        }
    });
    $( "#EmptyValue" ).val( $( "#EmptySlider" ).slider( "value" ) );
            $( "#RedValue").val($("RedSlider)").slider("value"));
            $( "#BlueValue").val($("RedSlider)").slider("value"));
});*/

$('div:gt(2)').slider().linkedSliders({policy: 'last'}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-11T18:58:56.933

Your code will only every be executed once. You need to change the following line:

$( "#BlueValue" ).val( $( "#BlueSlider" ).slider( "value" ) );

To be something different when selecting the value of your slider at whatever time you need it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:03:16.063

This code:

```
$( "#BlueValue" ).val( $( "#BlueSlider" ).slider( "value" ) ); 
```

will only execute once. You need to have that in a value-changed callback for the slider, so the value will be updated continually.

# python - Evernote Web Clipper 是如何很好地解析网页的？

> ID：14821867
> 
> 赞同：8
> 
> 时间：2013-02-11T22:10:57.827
> 
> 标签：python, web-scraping, screen-scraping, evernote

我一直在尝试在 python 中复制 Evernote Web Clipper 的解析功能，用于我自己的网络抓取项目。我只对提取文本的主体感兴趣，没有别的。

我已经使用了 python Arc90 端口：

[https://github.com/buriy/python-readability](https://github.com/buriy/python-readability)

结合 aaronsw 的精彩 html2text 库：

[https://github.com/aaronsw/html2text](https://github.com/aaronsw/html2text)

*这在大多数*情况下都会产生良好的效果，但 Evernote 在抓取文本主体方面要好得多。

有人可以推荐一种更好的方法，或者告诉我 Evernote 在做什么。

谢谢！

# javascript - 如果在页面下方定义，是否可以使用函数/对象

> ID：14821870
> 
> 赞同：2
> 
> 时间：2013-02-11T22:11:01.680
> 
> 标签：javascript, scope

例如，在一个 javascript 文件中，我可以拥有：

```
var cat = null;

function init() {
   cat = new Cat();
   alert(cat.getLegs());
}

function Cat() {
    this.legs = 4;
}

 Cat.prototype.getLegs = function() { return this.legs; } 
```

JSLint 对此抱怨。但是 JSLint 似乎确实抱怨一些看起来并不重要的小事。但它似乎在 Chrome 中对我有用。一些主机，例如网络浏览器会对此抱怨吗？

# c# - 为什么 ThreadPool.SetMinThreads 不改变最小值？

> ID：14821874
> 
> 赞同：3
> 
> 时间：2013-02-11T22:11:18.377
> 
> 标签：c#, performance, threadpool

使用 .NET 4.0 运行时编译和运行，我有这样的代码：

```
int MinWorkerThreads, MaxWorkerThreads;
int MinCompletionPortThreads, MaxCompletionPortThreads;
ThreadPool.GetMinThreads(out MinWorkerThreads, out MinCompletionPortThreads);
ThreadPool.GetMaxThreads(out MaxWorkerThreads, out MaxCompletionPortThreads);
_logger.Info("Default thread pool settings min/max:");
_logger.Info("Worker thread: " + MinWorkerThreads + " / " + MaxWorkerThreads);
_logger.Info("IO thread    : " + MinCompletionPortThreads + " / " + MaxCompletionPortThreads);
_logger.Info("Setting minimum default worker thread count to " + Config.MinWorkerThreads);
if (!ThreadPool.SetMinThreads(Config.MinWorkerThreads, MinCompletionPortThreads))
{
    _logger.Warn("Unable to modify the minimum number of worker threads");
}
ThreadPool.GetMinThreads(out MinWorkerThreads, out MinCompletionPortThreads);
_logger.Info("Worker thread: " + MinWorkerThreads + " / " + MaxWorkerThreads); 
```

我的日志输出如下所示：

```
Default thread pool settings min/max:
Worker thread: 4 / 32767
IO thread    : 4 / 1000
Setting minimum default worker thread count to 50
Worker thread: 50 / 32767 
```

该值会立即更改，但不会永久更改。

我为什么要这样做？ `Timer`s 使用默认的 ThreadPool，我曾见过突然一批任务进入系统线程池，淹没它，导致一些应该每 15 秒触发一次的计时器延迟超过 60 秒。

问题是，当我将相同的信息转储到运行时十五分钟时，使用相同的代码，我得到非常不同的值：

```
Worker thread: 4 / 400
IO thread    : 4 / 400 
```

有没有更好的方法来解决这个问题而不放弃使用`System.Timers.Timer`？什么会在完全不涉及 IIS 的独立 C# 应用程序中重置此值？如果您是自托管 ASP.NET，是否会隐式更改系统线程池的调整？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:28:00.110

我会建议一种替代方法。

消除线程池中的**所有**阻塞代码。这不是它的设计目的。

如果您有 IO-bound 操作，请在每个阶段进行异步操作。

如果您有 CPU-bound 操作，请不要在 ThreadPool 线程中运行它们。

通过严格遵循这些规则，您永远不需要摆弄 ThreadPool 参数。正如您所注意到的，有太多的 .Net API 完全依赖于响应式线程池。如果您只是在吞噬线程，那么无论您选择多少线程，如果您运行程序足够长/足够努力，您将再次达到极限。

按预期使用 ThreadPool... 短暂的逻辑，主要用于将 IO 结果编组到正确的位置。

# javascript - 如何使用 HTML 代码或 javascript 从移动设备上的视频设备捕获视频

> ID：14821875
> 
> 赞同：3
> 
> 时间：2013-02-11T22:11:27.573
> 
> 标签：javascript, html, webcam

理想情况下，我想做的是在我的网站上捕获和录制视频，但要对 iPhone 和移动设备友好，以便使用移动设备的用户可以将视频保存在他们的移动设备上并将其上传到我的网站。我需要能够从任何设备上的摄像头获取网络摄像头输入，因为移动显示实时预览、录制和回放。然后上传它。我认为任何闪存都不会有帮助，因为 iphone 不读取闪存。我尝试了几个 html5 [http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)的示例， 但它不适用于 iphone 或移动设备。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-29T13:31:13.527

该`HTML Media Capture`标准是一个仅适用于所有移动浏览器的 HTML 解决方案。用于录制视频：

`<input type="file" accept="video/*" capture >`

以下是上述代码在 iOS8 上的样子： [![iOs 上的 HTML 媒体捕获](../Images/267ad4b8462ec5ea3de9fe48cb3c1306.png)](https://i.stack.imgur.com/TbsUN.jpg) 图片由[https://addpipe.com/blog/the-new-video-recording-prompt-for-media-capture-in-ios9/提供](https://addpipe.com/blog/the-new-video-recording-prompt-for-media-capture-in-ios9/)

唯一的问题是您将获得来自 iOS 设备的 .mov 视频和来自 Android 设备的 .mp4/.3gp 视频。这些 .mov 文件无法在 Android 上播放。

`HTML Media Capture`是一种仅限移动设备的解决方案，它未在桌面浏览器中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:19:48.303

使用 phonegap 框架，您可以做到

```
http://docs.phonegap.com/en/1.5.0/phonegap_media_capture_capture.md.html#Capture 
```

# node.js - Node.js 限制流

> ID：14821877
> 
> 赞同：2
> 
> 时间：2013-02-11T22:11:37.683
> 
> 标签：node.js, http, stream, express

我正在尝试创建一个 Node.js HTTP 文件流服务器。我想做以下事情：

发送者`--HTTP POST-->`Node.js HTTP 服务器`<--HTTP GET--`接收者

我已经使用以下代码：

```
var app = express();

// ...

app.post('/upload', function (req, res) {

  // Get the `req` and `res` arguments of the HTTP GET request
  var downloadRequest = getDownloadClientRequest();

  // parse a file upload
  var form = new formidable.IncomingForm();
  form.onPart = function (part) {
    if (!part.filename) {
      // let formidable handle all non-file parts
      form.handlePart(part);
      return;
    }

    downloadRequest.res.writeHead(200, {
      'Content-Disposition': 'attachment; filename=' + part.filename
    });

    part.on('data', function(data) {
      downloadRequest.res.write(data);
    });
    part.on('end', function() {
      downloadRequest.res.end();
    });
  };

  form.parse(req, function (err, fields, files) {
    res.writeHead(200);
    res.write('Successfully streamed');
    res.end();
  });
});

app.get('/download', function (req, res) {
  storeDownloadClientRequest(req, res);
}); 
```

显然发生的情况是，如果上传客户端比下载客户端快得多，则上传完成速度非常快，并且我的 Node.js 进程将整个文件保存在内存中，直到下载客户端完成为止。

如何限制上传者的速度？我想我可以不时暂停他的流，但我怎么知道下载器的流/缓冲区是否已满？

PS：`wget --limit-rate=100k`如果有帮助，我用 限制了下载客户端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:54:05.867

`part.pipe(downloadRequest)`缓冲区已满时应自动处理暂停/恢复。

# c++ - Cant fill QImage via setPixel properly

> ID：14821878
> 
> 赞同：0
> 
> 时间：2013-02-11T22:11:40.577
> 
> 标签：c++, qt, qimage

I need to convert QImage to an array where each pixel is represented by three integers(channels). So I'm trying to achieve this with fillowing code:

```
void Processor::init(QImage *image){
QColor* c = new QColor();

int i,j;
int local_ind;

x = image->width();
y = image->height();

if(this->img!=NULL)
    delete [] this->img;
this->img = new int[ x * y * 3];

for( i = 0 ; i < y ; i++ )
    for( j = 0 ; j < x ; j++ ){
        c->setRgb(image->pixel(j, i));
        local_ind = i * x + j * 3;
        this->img[local_ind + 0] = c->red();
        this->img[local_ind + 1] = c->green();
        this->img[local_ind + 2] = c->blue();
    }
delete c;
}

void Processor::flush(QImage *image){

QColor* c = new QColor();
QRgb color;

int i, j;
int local_ind;

for( i = 0 ; i < y ; i++ )
    for( j = 0 ; j < x ; j++ ){

        local_ind = i * x + j * 3;
        color = qRgb(this->img[local_ind + 0],
                     this->img[local_ind + 1],
                     this->img[local_ind + 2]);

        image->setPixel(j, i, color);
    }

delete c;
} 
```

Both functions are seem to work fine, as I can see via debugger, but when I call them one after the other (just copy info from QImage to array and backwards), result is a bit wierd. Whole image consists of three repeated images: a third of original image (blue, green and red channels of source image). I guess I just used setPixel in a wrong way so the format of QImage is not observed or smth.

I use QImage RGB32 format, if it really important here.

PS. Sorry for my English, corrections are welcome)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:03:15.640

The issue is that you are using

```
 local_ind = i * x + j * 3; 
```

But in your buffer each pixel take 3 bytes. So the you need to use instead

```
 ( i * x + j ) * 3 
```

btw: Why are you using `x` for height and `y` for width? This is not intuitive.

# java - 使用具有预定 ID 的 JPA 持久化对象

> ID：14821882
> 
> 赞同：0
> 
> 时间：2013-02-11T22:12:04.063
> 
> 标签：java, sql, hibernate, jpa

我需要`persist()`一个带有 的对象`id`，我可以指定它。但是我不能用不同的注释基类`@GeneratedValue`. 您可以为单个持久性分配一个值生成器吗？我有特定用途，请不要告诉我不应该手动设置id。

有没有办法用 JPA 来完成？感谢任何提示！

[已编辑]`@GeneratedValue`注释存在于基类中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:29:13.217

`@GeneratedValue`精确地用于告诉 JPA 它应该生成 ID。如果您想显式分配 ID 并且不希望 JPA 为您生成一个，只需不要使用`@GeneratedValue`注释，显式分配 ID，然后调用`persist()`.

# c++ - sdl osx eclipse c++显示错误

> ID：14821889
> 
> 赞同：0
> 
> 时间：2013-02-11T22:12:27.813
> 
> 标签：c++, eclipse, macos, opengl, sdl

我在 osx 下的 Eclipse 中运行 SDL 应用程序时遇到问题。

```
#include <SDL/SDL_opengl.h>
#include <SDL/SDL.h>
#include <SDL_ttf/SDL_ttf.h>
#include <SDL_image/SDL_image.h>
#include <iostream.h>

int main(int argc, char* argv[]){
    int error;
    error = SDL_Init(SDL_INIT_EVERYTHING);
    std::cout << "error " << error << std::endl;
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 16);
    SDL_GL_SetAttribute(SDL_GL_RED_SIZE, 8);
    SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE, 8);
    SDL_GL_SetAttribute(SDL_GL_BLUE_SIZE, 8);
    SDL_GL_SetAttribute(SDL_GL_ALPHA_SIZE, 8);

    Uint32 flags;

    flags = SDL_OPENGL | SDL_HWSURFACE | SDL_HWPALETTE| SDL_DOUBLEBUF ;
    drawContext = SDL_SetVideoMode(1024, 768, 16, flags);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0.0f, 1024, 768, 0.0f, 0.0f, 1000.0f);

    glMatrixMode(GL_MODELVIEW);

    while(true){
        glFinish();
        SDL_GL_SwapBuffers();
    }
} 
```

这会得到奇怪的输出。 ![闪烁和分数](../Images/12f35f82c62479c83e5075ee30b85d56.png)

这只发生在使用

> SDL_OPENGL

旗帜。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-07T21:29:08.713

您永远不会费心将默认帧缓冲区清除为已知值，并且不需要 GL 实现为您提供已清除的缓冲区。

[OpenGL 4.3 规范](https://khronos.org/registry/OpenGL/specs/gl/glspec43.core.pdf)，第 254 页，第 1 段（强调我的）：

> 默认帧缓冲区最初用作绘制和读取帧缓冲区，**所有提供的位平面的初始状态为 undefined**。可以按照第 9.2.3 节所述查询绘制和读取帧缓冲区中缓冲区的格式和编码。

在交换之前的某个时间清除帧缓冲区：

```
while(true)
{
    glClear( GL_COLOR_BUFFER_BIT );

    // draw stuff

    SDL_GL_SwapBuffers();
} 
```

# c++ - 使用 Boost 的 pdf 功能

> ID：14821891
> 
> 赞同：3
> 
> 时间：2013-02-11T22:12:35.323
> 
> 标签：c++, boost

愚蠢的问题，但我花了太多时间在网上寻找答案，但没有成功。我有一个 boost::random::gamma_distribution 对象和一个浮点值，我想为其计算 pdf。

我究竟应该包含哪些 Boost 模块以及如何调用为伽玛计算 pdf 的函数？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:38:37.180

我已经看过了`random/gamma_distribution.hpp`，没有返回 pdf 的方法，所以 gamma_distribution 的实例对你没有帮助。但是，[boost::math::gamma_distribution](http://www.boost.org/doc/libs/1_53_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/dists/gamma_dist.html)提供了实现说明和公式（底部的表格）来使用库函数定义 pdf `gamma_p_derivative`。

现在您可以自己组合一个 pdf 函数：

```
#include <boost/math/special_functions/gamma.hpp>

// Makes sense for k, theta, x greater than 0.
double gamma_pdf(double k, double theta, double x) {
    return boost::math::gamma_p_derivative(k, x / theta) / theta;
} 
```

基本上就是这样。由于`gamma.hpp`包含所需的定义，因此您不必在编译期间链接任何其他库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T14:40:26.293

有一个[`pdf`](http://www.boost.org/doc/libs/1_53_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/nmp.html#math.dist.pdf)非成员函数。

```
#include <iostream>
#include <boost/math/distributions/gamma.hpp>

int main() {
    double shape = 2;
    double scale = 1;
    boost::math::gamma_distribution<double> d(shape, scale);
    std::cout << pdf(d, .5) << std::endl;
} 
```

# xaml - 带有禁用键的 ZoomedOutView

> ID：14821892
> 
> 赞同：-1
> 
> 时间：2013-02-11T22:12:40.973
> 
> 标签：xaml, windows-runtime

有谁知道如何重现 ZoomedOutView，如下图所示：

[图片 http://img690.imageshack.us/img690/2981/84364982.png](http://img690.imageshack.us/img690/2981/84364982.png)

我有一个可能有效的解决方案，但我认为我们可以采取不同的方式。

我的解决方案：

*   添加绑定和分组集合中的所有键

*   创建一个转换器 Int32 到 Booleab

*   将启用的属性绑定到 Group.Values.Count 并应用转换器

*   修改 GridViewItem 样式以更改 Background 属性

有没有更简单的方法来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T02:18:39.947

这些步骤听起来很正确，应该是实现您想要的最直接的方法。

您可能会遇到麻烦的一个地方是获取组数。根据您用于分组的内容，您可能会得到一个`IEnumerable`只有`Count()`扩展方法可用而不是`Count`可绑定的真实属性。例如，如果您使用的是 LINQ，就会出现这种情况`GroupBy`。

# java - Java——将数据输入与数据输出相关联？

> ID：14821897
> 
> 赞同：1
> 
> 时间：2013-02-11T22:12:46.657
> 
> 标签：java, design-patterns, polymorphism

我正在寻找有关具有此功能的系统的基本设计的建议。

假设我有一个这样的数据类：

```
Class nodeData
boolean aValue;
boolean bValue;
boolean cValue; 
```

使用一些业务逻辑，我为这个数据所代表的节点定义了相互排斥的标题集。

例如，我定义了这个标题：

```
Singular.YES means Only one of aValue, bValue, cValue is true
Singular.NO means 0 or more than 1 of aValue, bValue, cValue is true 
```

或者这个：

```
aDefined.YES means aValue is true.
aDefined.NO means aValue is false. 
```

或者这个：

```
totalTrue:.0 means 0 of the values are true
totalTrue.1 means 1 of the values are true
etc. 
```

在每种情况下，同一集合中的标题相互排斥，并且集合中的哪个标题适用于该数据是基于一些硬编码的业务逻辑。

然后，每个特定的标题都与一些特定的功能相关联。例如，我可能会说“如果 aDefined.YES，调用 methodX”或“如果 totalTrue.0，调用 methodX 然后调用 methodY”。

如果N是标题集的数量，那么有N！标题和 N! 的组合 相关功能的组合。如何完成：对于每个节点数据，找到与该数据关联的标题集。运行与每个标题相关的功能。

编辑：这不是布尔逻辑问题，这是一个设计问题。我的观点是，我想要一种可靠的方法，将数据集与给定任意业务逻辑的某个名称或子类相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:39:01.017

跳过价值部分
我认为这应该对你有所帮助，但你的问题有点含糊。

```
//checking if one of the 3 bools are true
if((a&&!b&&!c)||(!a&&b&&!c)||(!a&&!b&&c))
    Singular = Singular.YES
else
    Singular = Singular.NO

//checking if one bool is true
if(a)
    aDefined = aDefined.YES
else
    aDefined = aDefined.NO

//checking how many bools are true
int i = 0;
if(a)
    i++;
if(b)
    i++;
if(c)
    i++;
TotalTrue = i; 
```

# 2d - 二维矩形物理。我这样做对吗？

> ID：14821898
> 
> 赞同：1
> 
> 时间：2013-02-11T22:12:50.083
> 
> 标签：2d, physics, game-physics, physics-engine

我正在编写一个 2D 游戏，我希望在其中有类似板条箱的对象。这些物体会四处移动，就像真正的板条箱一样。我对如何实现这一目标有一个假设的想法：

基本上我会将盒子的角坐标与它们的力和速度单位向量一起存储，并且在每次更新中我基本上都会执行以下步骤：
1\. 相应地应用力（重力、碰撞等）。
2\. 根据力修改速度矢量。
3\. 移动盒子的每个角落，像这样：![拖动技术](../Images/c6ff5c787ad4e9f79cd51882b83e0b5e.png)
4\. 我重复 nr 3\. 每个角落，所以我得到了立方体的真实运动。

**我的问题是：**这种方法是否朝着正确的方向发展？这个理论是否正确？如果不是，那么在 2D 环境中基于向量移动框的正确方法是什么？

澄清一下：我只是在图片中拖动角落“A”，但我想用自己的向量重复拖动每个其他角落。“拖动”是指我刚才所说的算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:42:15.050

保持每个角落的坐标和速度是没有意义的，因为您将存储大量冗余信息。盒子是刚性物体，这意味着在任何时刻都必须满足一些约束条件，即任意两个给定角之间的距离是固定的。这也转化为连接所有四个角的速度的约束，因此它们不是独立值。对于刚体，任何点的运动都是两个独立运动的总和 - 质心 (CM) 的线性运动和围绕固定轴的旋转 - 通常但并非总是选择通过厘米。因此，您只需要存储板条箱 CM 的位置和速度（与板条箱的几何中心重合）以及围绕 CM 的旋转角度和旋转速度。

至于运动，重力场是一个恒定的矢量场，因此不能在像那些矩形板条箱这样的对称物体中引起旋转。相反，它只产生 CM 的加速垂直运动。这也是由于所有外力而发生的情况 - 必须将它们的向量和应用于 CM。只有方向不通过 CM 的外力才会产生扭矩，从而导致旋转。这种力是当板条箱相互碰撞或撞击地面/墙壁时产生的任何外部推/拉或反作用力。计算由外力引起的扭矩很容易，但计算反作用力可能是一个相当复杂的过程，因为必须采用受约束的动力学。一旦计算出扭矩，为了获得角加速度，必须将其除以创建的惯性矩。通常使用另一个轴而不是通过 CM 的轴更方便 -在这种情况下，可以使用[施泰纳定理来计算绕该其他轴的转动惯量。](http://en.wikipedia.org/wiki/Parallel_axis_theorem)

总结一下：

*   所有作用在创建上的力首先被加在一起（作为矢量），合力（除以创建的质量）决定了 CM 的线性加速度；
*   计算所有力的扭矩，然后用于确定围绕给定轴的角加速度。

有关刚体运动的一些示例问题以及物理实际是如何计算的，请参见[此处。](http://ocw.mit.edu/courses/physics/8-01sc-physics-i-classical-mechanics-fall-2010/rotation-and-translation/two-dimensional-rotation-and-translation-dynamics/MIT8_01SC_coursenotes27.pdf)

给定您的算法，如果“速度矢量”实际上是指“CM 的速度”，那么 1 将是正确的 - 所有角都沿同一方向移动（CM 的线性运动）。但是 2 并不总是正确的 - 正确的旋转角度取决于施加扭矩的时间（例如模拟时间步长），并且必须考虑杠杆臂长度随着板条箱旋转而在两者之间发生变化。

# jsf - 每次 AJAX 调用后渲染 p:outputPanel

> ID：14821900
> 
> 赞同：0
> 
> 时间：2013-02-11T22:13:01.993
> 
> 标签：jsf, jsf-2

我有 ap:outputPanel，如果我有一个带有数据的 Java 对象，我想渲染它。如果对象为空，我不想渲染面板。

```
<h:form id="treeform">
    <p:outputPanel id="outputComponent" rendered="#{TreeViewController.compProfile}">
        <div>
            .........
        </div>
    </p:outputPanel>
</h:form>

public boolean getCompProfile()
{

    if (cd == null)
    {
        return false;
    }
    else
    {
        return true;
    }
} 
```

我注意到代码工作正常。如果对象为 null，则布尔值为 false 并且不显示面板。但是我发现的问题是，当我再次进行 AJAX 调用时，无论 Java 对象是否为空，布尔值始终为 false。我可以在 AJAX 调用后以某种方式配置 p:outputPanel 以检查`#{TreeViewController.compProfile}`要呈现或不呈现面板的属性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T22:51:47.887

改变

```
<p:outputPanel id="outputComponent" rendered="#{TreeViewController.compProfile}"> 
```

进入

```
<p:outputPanel autoUpdate="true">
    <p:outputPanel  id="outputComponent" rendered="#{TreeViewController.compProfile}">
</p:outputPanel> 
```

或者不要添加包装器并将`treeform`id 添加到您`update`的 ajax 属性中（`p:ajax`或`p:commandButton`）

像这样`update="treeform"`

# c++ - opengl中的棋盘

> ID：14821903
> 
> 赞同：0
> 
> 时间：2013-02-11T22:13:07.507
> 
> 标签：c++, opengl, chess

我正在尝试在 OpenGL 中创建 5x5 棋盘。我已经能够设计 5x6 和 8x8，但代码不适用于 5x5。有人可以查看代码并指出我的错误在哪里，因为宽度不会更改为 5？

这是我似乎有问题的代码部分：

```
void drawScene()
{
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glTranslatef(-2.5*1.5, 0.0, 2.5*1.5);

    for(double j=0.0;j>(-5*1.5);j-=1.5)
    {
        k++;
        for(i=0.0;i<(2.5*3.0);i+=3.0)
        {
            if(k%2!=0)
            {
                glPushMatrix();
                glTranslatef(i,0.0,j);
                glCallList(_displayListId_blackArea);
                glPopMatrix();

            }
            else
            {
                glPushMatrix();
                glTranslatef(i+1.5,0.0,j);
                glCallList(_displayListId_blackArea);
                glPopMatrix();

            }
        }
    }
    for(double j=0.0;j>(-5*1.5);j-=1.5)
    {
        k++;
        for(i=0.0;i<(2.5*3.0);i+=3.0)
        {
            if(k%2!=0)
            {
                glPushMatrix();
                glTranslatef(i,0.0,j);
                glCallList(_displayListId_whiteArea);
                glPopMatrix();

            }
            else
            {
                glPushMatrix();
                glTranslatef(i+1.5,0.0,j);
                glCallList(_displayListId_whiteArea);
                glPopMatrix();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:20:03.317

如果您有奇数列，则黑色与白色的“奇数与偶数”将与偶数列不同。我认为最简单的方法是对所有 Squares 执行一个循环，并在每个循环结束时保留一个`bool white_or_black`设置为的变量。`white_or_black = !white_or_black`

还有大量重复的代码可以通过一个循环而不是两个循环来变得更简单。

[我不是 100% 确定你的代码出了什么问题，所以我不确定这是否真的能解决问题——但我相信这是一个值得改进的地方]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:51:27.970

先了解你的问题。对于黑板和白板，您必须绘制奇数和偶数，这意味着如果您在第一行绘制奇数白板，那么您必须绘制偶数黑板，然后在下一行绘制偶数白板和奇数黑板。为了完成白色和黑色棋盘行的 5*5 棋盘图案，如下所示：

```
3*2
2*3
3*2
2*3
3*2 
```

但是您提供的代码是用于相同数量的白棋盘和黑棋盘，因此您必须更改逻辑。这是我使用我的逻辑绘制 5*5 棋盘的代码部分，它完美地工作。

```
for(float j=0.0;j>(-5*1.5);j-=1.5)
{
k++;
//for(i=0.0;i<(4*3.0);i+=3.0)
//{
if(k%2==0)
{
for(i=0.0;i<(3*3.0);i+=3.0){
 glPushMatrix();
 glTranslatef(i,0.0,j);
 glCallList(_displayListId_blackArea);
 glPopMatrix();
 }

}
else
{
  for(i=0.0;i<(2*3.0);i+=3.0){
glPushMatrix();
glTranslatef(i+1.5,0.0,j);
glCallList(_displayListId_blackArea);
glPopMatrix();
}

}
 //}
}
k=0;
for(float j=0.0;j>(-5*1.5);j-=1.5)
{
k++;
  //for(i=0.0;i<(4*3.0);i+=3.0)
 //{
 if(k%2!=0)
 {
     for(i=0.0;i<(3*3.0);i+=3.0){
glPushMatrix();
glTranslatef(i,0.0,j);
glCallList(_displayListId_whiteArea);
glPopMatrix();
  }

}
  else
 {
    for(i=0.0;i<(2*3.0);i+=3.0){
  glPushMatrix();
  glTranslatef(i+1.5,0.0,j);
  glCallList(_displayListId_whiteArea);
  glPopMatrix();
  }

}
}
k=0;
glutSwapBuffers();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:20:48.530

我怀疑通过“宽度不会更改为 5”，您观察到的宽度为 4 或 6。这是正确的吗？在这种情况下，很可能是由于双精度算术而导致的错误。

你看，你假设你的循环有无限的精度，但很可能这`5*1.5`与添加`1.5`五次不同。

您真正应该做的是有一个从 1 到 5（或 0 到 4）的整数循环，然后将该值乘以您的平方大小以产生坐标。除非您知道自己在做什么以及会发生什么，否则循环双打通常不是一个好主意。

您应该做的另一件事是使用常量而不是文字。与其在代码中添加数字`5`，不如定义：

```
const int BoardWidth = 5;
const int BoardHeight = 5; 
```

那么改变会容易很多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T22:26:03.673

忘记那个代码，它有不好的潜力，你应该使用 int 作为计数器来创建板。例如：

```
const unsigned BOARD_SIZE = 5;

for(unsigned i = 0; i < BOARD_SIZE; ++i){
 for(unsigned j = 0; j < BOARD_SIZE; ++j){
    drawBoardCell(i,j, (i*BOARD_SIZE + j) % 2 == 0);
  }
}

void drawBoardCell(const int row, const int col, const bool isBlack){
  glPushMatrix();
  glTranslatef(col+1.5,0.0,row);
  const int callId = isBlack ? _displayListId_blackArea : _displayListId_whiteArea;
  glCallList(callId);
  glPopMatrix();
} 
```

这可能在第一次尝试时不起作用，但它应该给你一个起点。

# php - PHP $_POST 数据为空

> ID：14821907
> 
> 赞同：0
> 
> 时间：2013-02-11T22:13:39.730
> 
> 标签：php, javascript, html

所以我的网站需要在今晚更新，我是 PHP 菜鸟。我正在尝试通过电子邮件提交一个简单的表格。但是，当我收到电子邮件时，$_POST 字段未填充，并且消息正文显示为：“名称：电子邮件：组织：角色：”，没有数据。有任何想法吗？谢谢。

HTML 文件：

```
 <form method="post" class="form-horizontal" id="contactForm" action="submit_contact.php"></div>
        <div class="modal hide fade in" id="contactModal">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">×</a>
                <h3>Submit form</h3>
            </div>
            <div class="modal-body">
                <div style='display:none'></div>

                <fieldset>
                    <div class="control-group">
                        <label class="control-label">Name</label>
                        <div class="controls">
                            <input id="name" type="text" name="name" maxlength="75" />
                            <p class="help-block" id="name_error"></p>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">E-mail</label>
                        <div class="controls">
                            <input id="email" type="text" name="email" maxlength="75" />
                            <p class="help-block" id="email_error"></p>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Organization</label>
                        <div class="controls">
                            <input id="organization" type="text" name="organization" maxlength="75" />
                            <p class="help-block" id="organization_error"></p>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Role</label>
                        <div class="controls">
                            <select name="occupation" id="id_occupation">
<option value="" selected="selected">---------</option>
<option value="MD">Medical Devices - Sales & Marketing</option>
<option value="MO">Medical Devices - Other</option>
<option value="MD">Physician</option>
<option value="OT">Other</option>
</select>
                            <p class="help-block" id="occupation_error"></p>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class="modal-footer" style="height:30px">
                <a name="submit" type="submit" value="submit" id="contactSubmit" class="btn btn-primary pull-right" href="#">
                    Submit
                </a>
                <p style="text-align: left; margin-top:6px;" id="contactFormStatus"></p>
            </div>
        </div>
    </form>
</div>

<script>
$('#contactSubmit').on('click', function(e){
  // We don't want this to act as a link so cancel the link action
    e.preventDefault();

    // Find form and submit it
    $('#contactForm').submit();
});
</script> 
```

submit_contact.php：

```
<?php 
$ToEmail = 'xxx@xxx.com'; 
$EmailSubject = 'Site contact form'; 
$mailheader = "From: ".$_POST["name"]."\r\n"; 
$mailheader .= "Reply-To: ".$_POST["email"]."\r\n"; 
$mailheader .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
$MESSAGE_BODY = "Name: ".$_POST["name"].""; 
$MESSAGE_BODY .= "\nEmail: ".$_POST["email"].""; 
$MESSAGE_BODY .= "\nOrganization: ".$_POST["organization"].""; 
$MESSAGE_BODY .= "\nRole: ".$_POST["occupation"]."";
mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure"); 
?> 
```

# html - IE 8 和 IE 9 给我的 `textarea` 高度小于 `rows` 属性值所要求的

> ID：14821908
> 
> 赞同：4
> 
> 时间：2013-02-11T22:13:48.510
> 
> 标签：html, css, internet-explorer, cross-browser, textarea

目前致力于跨浏览器兼容性的工作遇到了一系列 IE 的问题。

我需要*这样高度的文本区域，它可以在**没有滚动*的情况下呈现给定的文本。因此，我在服务器端和前端计算此类文本的行数：

```
<textarea rows="15">...</textarea> 
```

到目前为止，它适用于 Chrome、FF 和 Opera：

![铬 24.0.1312.57 m](../Images/5123d53207dd5355c19ddb09b571602e.png)

但是 IE8 没有这样的运气：

![IE8](../Images/82867a61b680d4dcf62c55258541068b.png)

和 IE9：

![IE9](../Images/21f30a567ec49316089a2842d048f144.png)

*除了*JS还有什么办法解决吗？得到`HTML5`doctype 并希望保持我的`font-size`价值不变。

textarea 的计算样式：

```
background-color: rgb(255, 255, 255);
border-bottom-color: rgb(204, 204, 204);
border-bottom-left-radius: 4px;
border-bottom-right-radius: 4px;
border-bottom-style: solid;
border-bottom-width: 1px;
border-left-color: rgb(204, 204, 204);
border-left-style: solid;
border-left-width: 1px;
border-right-color: rgb(204, 204, 204);
border-right-style: solid;
border-right-width: 1px;
border-top-color: rgb(204, 204, 204);
border-top-left-radius: 4px;
border-top-right-radius: 4px;
border-top-style: solid;
border-top-width: 1px;
box-shadow: rgba(0, 0, 0, 0.0745098) 0px 1px 1px 0px inset;
color: rgb(167, 169, 172);
cursor: auto;
display: inline-block;
font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
font-size: 13px;
font-weight: normal;
height: 300px;
letter-spacing: normal;
line-height: 20px;
margin-bottom: 4px;
margin-left: 0px;
margin-right: 0px;
margin-top: 0px;
overflow-x: auto;
overflow-y: auto;
padding-bottom: 4px;
padding-left: 6px;
padding-right: 6px;
padding-top: 4px;
resize: both;
text-align: start;
text-indent: 0px;
text-shadow: none;
text-transform: none;
vertical-align: middle;
white-space: nowrap;
width: 432.546875px;
word-spacing: 0px;
word-wrap: break-word; # changed to «pre» for IE
writing-mode: lr-tb; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:33:00.170

原来这`line-height: 20px`是造成问题的原因。一种跨浏览器对其进行规范化的方法是默认值`line-height: normal`，但如果我需要其他值怎么办？因此，JavaScript 似乎仍然是唯一的解决方案。这是一些jQuery代码：

```
<!--[if IE]><script src="ie.js" type="text/javascript"></script><![endif]-->

$(document).ready(function() {

  var textArea = $('textarea'),
      lineHeight = parseFloat(textArea.css('lineHeight'));

  textArea.height(lineHeight * textArea.attr('rows'))

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:21:22.163

也许尝试计算 CSS 高度并将其添加到框的内联样式中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:55:50.897

我想样式表实际上并不包含，因为这会破坏（尊重换行符）`white-space: pre`的默认呈现。`textarea`除此之外，我不明白为什么问题会出现在标准模式中。

我假设 HTML 标记（未公开）`</textarea>`在最后一个文本行之后立即包含结束标记。否则，浏览器会暗示内容中的第 16 行是空的。（这种浏览器行为违反了 HTML 4.01 规范，该规范规定结束标记之前的换行符应被忽略，但你能做什么？）但如果这是问题所在，它也会出现在例如 Firefox 上。

的`height`属性`textarea`设置为 300 像素（等于行数 (15) 乘以行高（20 像素））的设置是正确的。

但是，在[Quirks Mode](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)中，IE 行为不端：它将`height`属性值解释为指定元素占用的总区域的高度，包括填充和边框。4px 的顶部和底部填充以及 2px 的边框因此需要`height: 310px`. 这反过来又会导致符合标准的浏览器中的间距过大。所以最好在标准模式下工作。`doctype`检查字符串中是否存在拼写错误。在 IE 中，您可以使用 F12 进入开发者工具，在这里您可以查看属性，也可以查看浏览器的模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-02T14:09:10.403

参考jibiel的回答（由于缺乏积分，目前无法发表评论）。

这是用于更正具有 row 属性的所有文本区域的高度的代码：

```
$("textarea[rows]").each( function() {
	$(this).css('height', parseFloat($(this).css('lineHeight')) * $(this).attr('rows') );
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

# android - 是否可以从 Android Google Map 获取路线网络？

> ID：14821911
> 
> 赞同：0
> 
> 时间：2013-02-11T22:13:55.903
> 
> 标签：android, google-maps

我正在尝试找到一种方法来获取当前在屏幕上可见的道路网络地图，同时使用适用于 Android 的 Google Maps API v2。我想在道路上放置一些标记，但我不知道这是否可能？我可以获得地址或两个地址之间的路径（使用路线管理器），但我需要知道我是否可以......所有可见的道路的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:18:24.967

你想要的是将路线作为矢量（作为纬度、经度的折线）坐标。

但是，不，你不能。（虽然有一个非官方的谷歌 API 将路由作为编码和压缩向量，但使用是不合法的。）

这些向量由 TeleAtlas/TomTom “拥有”，它们不是公开的，Google 也无权将它们分发出去。
如果您需要矢量，那么您必须使用 OpenStreetMap 路由服务，它可能提供路线矢量（通过 OpenStreetmap API）

# c++ - OPENGL GLUT 编译器找不到函数

> ID：14821912
> 
> 赞同：0
> 
> 时间：2013-02-11T22:13:56.080
> 
> 标签：c++, opengl, compiler-construction, glut

我对 opengl 很陌生，我收到错误说它找不到函数：glColor3f、glVertex2f 和 pRect。我的包括

```
#include <iostream>
#include <math.h>
#include <stdio.h>
#include <stdlib.h>
#ifdef MAC
#include <GLUT/glut.h>
#else
#include <GL/glut.h>
#endif 
```

有问题的代码是：

```
void display()
{
    // Rotate objects
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    //glMatrixMode(GL_MODELVIEW);
    //glLoadIdentity();

    glBegin(GL_QUADS);   //We want to draw a quad, i.e. shape with four sides
    glColor3F(1, 0, 0); //Set the colour to red
    glVertex2F(0, 0);            //Draw the four corners of the rectangle
    glVertex2F(0, pRect->h);
    glVertex2F(pRect->w, pRect->h);
    glVertex2F(pRect->w, 0);
    glEnd();
    glPopMatrix();

    //glFlush();
} 
```

我想我包含了所有必要的文件，当我编译它时，我使用命令：

```
g++ main.cpp -lgut -IGL -IGLU 
```

但这似乎也不是问题。任何建议都会很棒！太感谢了！

编辑：改变

```
 g++ main.cpp -lgut -IGL -IGLU 
```

至

```
g++ main.cpp -lgut -lGL -lGLU 
```

错误代码是：

```
 glColor3F : not declared in this scope
 glVertex2F : not declared in this scope
 pRect: not declared in this scope 
```

# javascript - 在 URL 请求之前发送什么事件？

> ID：14821914
> 
> 赞同：0
> 
> 时间：2013-02-11T22:13:57.530
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

有没有办法在请求发送到网站之前获取 url 字符串？我在这里找到了一篇关于它的帖子：

[https://forums.mozilla.org/addons/viewtopic.php?f=7&t=11259&p=26111](https://forums.mozilla.org/addons/viewtopic.php?f=7&t=11259&p=26111)

但我在插件 SDK 中找不到任何关于如何“连接到 Browser:OpenLocation 命令”的信息。

基本上我正在做的是这样的：

1.  检查即将被请求的 url 以查看它是否与我的 RegExp 匹配。
2.  如果匹配，请更改发送到网站的 userAgent。（通过设置general.userAgent.override）

因此，在页面开始加载后我无法检查 url，因为请求已经发送，我宁愿不重新加载页面，因为它会延迟浏览。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:57:49.000

是的，请在此处查看文档： [https ://developer.mozilla.org/en-US/docs/XUL/School_tutorial/Intercepting_Page_Loads#HTTP_Observers](https://developer.mozilla.org/en-US/docs/XUL/School_tutorial/Intercepting_Page_Loads#HTTP_Observers)

此代码适用于附加 sdk，它检查 url 是否匹配`mysite`，然后`MyBrowser/1.0`为该站点设置一个用户代理。这仅在检测到时才进行更改，而不是使用 pref userAgent.orverride。

```
var chrome = require("chrome");

chrome.Cc["@mozilla.org/observer-service;1"].getService( chrome.Ci.nsIObserverService ).addObserver({
    observe : function(subject, topic, data) {
            var channel = subject.QueryInterface( chrome.Ci.nsIHttpChannel );
            if ( /mysite/.test( channel.originalURI.host ) ) {
                channel.setRequestHeader("User-Agent", "MyBrowser/1.0", false);
            }
    }
},"http-on-modify-request",false); 
```

# iphone - 推送的 ViewController 是“灰色的”，不能完好无损

> ID：14821919
> 
> 赞同：0
> 
> 时间：2013-02-11T22:14:15.777
> 
> 标签：iphone, ios, objective-c, ipad

我对 iOS 编程比较陌生，并且一直在为 iPad 制作基于食谱的应用程序。我查看了很多答案，但似乎无法解决我的问题，所以我无法解释我的应用程序是如何布局的。

导航控制器 -> ViewController -Modal segue -> PreviewViewController -modal segue -> Navigation Controller -> RecipeViewController

在我的 RecipeViewController 中，我有一个按钮，当按下该按钮时，我希望它返回“主”屏幕，为此目的是“ViewController”。

**这是“RecipeViewController”中按钮操作的代码：**

```
- (IBAction)homeB:(id)sender {
ViewController* viewController = [[ViewController alloc]init];
[self.navigationController pushViewController:viewController animated:YES];
} 
```

但是，当我按下此按钮时，会显示 ViewController，但屏幕是灰色的，我无法与屏幕进行交互。我无法发布屏幕外观的图像，因为我还没有足够的声誉，但我会尽可能更新它。

我尝试了其他显示它的方法，例如在故事板中的按钮和“ViewController”之间连接一个segue，然后在按下按钮时激活segue。但这会弄乱我代码的其他部分，因为我必须重新分配和初始化主屏幕。对于为什么会出现无法交互的灰色屏幕，我们将不胜感激。

还有一些注意事项：

```
self.navigationController 
```

不返回 nil ，因此可以看到，并且按下按钮时不会显示错误。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:23:58.093

如果你真的在做segues，那么我认为这是在故事板中制作的。如果是这种情况，那么您应该使用展开转场返回 ViewController。为此，您可以在 ViewController 中添加一个 IBAction，如下所示：

```
-(IBAction)comingBackFromRecipe:(UIStoryboardSegue*)sender {
    NSLog(@"I'm back");
} 
```

重要的一点是发送者类型是 UIStoryboardSegue。然后在 IB 中，在 RecipeViewController 中，您可以控制从按钮拖动到控制器底部的绿色“退出”图标。当你放手时，你应该会看到你在 ViewController 中编写的方法——将它连接到那个。这将使您回到您开始使用的同一 ViewController 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:29:11.170

感谢大家的回复，不过我发现了我的问题。我的结构是错误的，我意识到我不需要为配方视图控制器设置另一个导航控制器，因为我没有从那里推动任何地方。因此，如果其他人有类似的问题，我的结构现在如下：

Navigation Controller -> View Controller -Modal Segue -> PreviewViewController - ModalSegue -> RecipeViewController

我删除了 PreviewViewController 和 RecipeViewController 之间的导航控制器。这意味着它们都是模态视图控制器。因此，要从 RecipeViewController 回到主屏幕，即“ViewController”，我只需要使用以下代码关闭模态视图的层次结构：

```
UIViewController * parent = self.presentingViewController;
[parent.presentingViewController dismissViewControllerAnimated:YES completion:nil]; 
```

我回到了两个阶段，这样 PreviewViewController 和 RecipeViewController 都被解雇了。

现在很好用，谢谢大家的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:25:38.570

没有看到截图很难说，但据我了解，如果你想回到主屏幕，你不应该推送一个新的视图控制器（除非你真的想把它添加到堆栈中？）

要返回“主”屏幕，您应该尝试以下操作：

```
[self.navigationController popToViewController:viewController animated:YES]; 
```

或者如果您的主屏幕是根，只需使用这个：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

# java - 字符串输入到二进制输出 Java

> ID：14821924
> 
> 赞同：0
> 
> 时间：2013-02-11T22:15:24.020
> 
> 标签：java, binary

大家好，我正在尝试编写一个加密程序，在输出之前将输入的每个字母转换为 7 字节二进制数。我为此使用 .toBinaryString 方法，所以请不要提出其他解决方案，我遇到的问题是它只转换字符串的第一个字符！任何帮助都是我的尝试

```
public static void convert(String h)
{
    int y =0;
    String f =" ";

    for(int i =0; i<h.length(); i++)
    {
         y = (int)h.charAt(i);
        f = Integer.toBinaryString(y);
    }

    System.out.println(y);
    System.out.println(f);
} 
```

我打印出 y,f 看看它是否成功转换它。当我输入单个字符时它可以工作，但是当我输入例如 ben 时，它会转换整个字符串而不是一个字母一个字母！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T22:16:46.077

您正在为每次迭代分配一个新字符串`f`，因此您只剩下最后一个字符。您宁愿每次都更新现有字符串。

所以，使用：

```
f += Integer.toBinaryString(y); 
```

代替：

```
f = Integer.toBinaryString(y); 
```

* * *

除此之外，考虑使用`StringBuilder`, 因为您在 for 循环中操作字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:21:28.730

只是：

```
String h.....
bytes[] bytesArray = h.getBytes(); 
```

# ruby-on-rails - 更新关系表

> ID：14821927
> 
> 赞同：0
> 
> 时间：2013-02-11T22:15:31.180
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, many-to-many

我正在处理用于编辑项目的视图，其中包含一个包含所有项目字段的表单，并且对于项目的成员，我呈现出复选框。

当表单提交并且控制器接管时，我从参数中删除成员数组，以便我可以正确更新项目。但是，我想知道我应该使用什么代码来使用成员更新表 projects_users（现在在数组 @members 中）？

**编辑项目视图：**

```
<%= form_for @project do |f| %>
    ...
        the rest of the form
    ...
    <div class="checkbox">
        <% @members.each do |user| %>
            <%= check_box_tag "project[members][]", user.id, '1', :id => "user_#{user.id}" %> 
            <%= label_tag "user_#{user.id}", user.first_name + ' ' + user.last_name, :class => "checkbox" %>
        <% end %>
    </div>
    ...
        the rest of the form
    ...
<% end %> 
```

**项目负责人：**

```
...
def update
  @project = Project.find(params[:id])
  @members = params[:project].delete(:members)

  if @project.update_attributes(params[:project])

    ... code for updating projects_users? ...

    redirect_to users_projects_path
    flash.now[:success] = 'Projektet redigerades.' # Not quite right!
  else
    render :action => "edit"
  end
end
... 
```

**表项目_用户：**

```
t.integer "project_id"
t.integer "user_id" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:35:37.980

使用 Project 的 user_ids 属性更新其用户：

```
# In the view:
<%= check_box_tag "project[user_ids][]", user.id, '1', :id => "user_#{user.id}" %> 

# In the controller:
@project = Project.find(params[:id])

#@members = params[:project].delete(:members)
# you don't need this line since :
# params[:project][:members] became params[:project][:user_ids]

if @project.update_attributes(params[:project])
  #... 
```

# jquery - 使用 jQuery 验证表单时出错

> ID：14821932
> 
> 赞同：0
> 
> 时间：2013-02-11T22:15:41.903
> 
> 标签：jquery, asp.net-mvc, jquery-validate, unobtrusive-validation

尝试验证我的表单时出现以下错误：

```
'this.0.form' is null or not an object 
```

我正在使用最新的 jQuery 和 jQuery.Validate，以及 jQuery.Validate.Unobtrusive（通过 NuGet）。

这是代码。错误来自哪里？

```
@model URIntake.IntakeFormViewModel

@{
    ViewBag.Title = "Claim Information";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="SubmissionForm">
@using (Html.BeginForm("Save", "UrIntake", FormMethod.Post, new { id = "UrIntakeForm"}))
{
    @Html.TextBoxFor(x => x.FormSubmitter.LastName)
    @Html.TextBoxFor(x => x.FormSubmitter.FirstName)

    <div id="SubmissionButtons" class="right">
        <input type="button" onclick="SubmitForm()" value="Submit" />
        <input type="button" onclick="CancelForm()" value="Cancel" />
    </div>
}
</div>

<script type="text/javascript">
    function CancelForm() {
        document.location = "/";
    }

    function SubmitForm() {
        $("UrIntakeForm").valid();
     }
.
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:19:42.137

你的 jQuery 选择器是错误的

```
 function SubmitForm() {
        $("#UrIntakeForm").valid();
     } 
```

向选择器添加哈希 (#) 以将其标识为 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:19:53.013

表单的 jQuery 选择器省略了`#`符号。[jQuery ID 选择器](http://api.jquery.com/id-selector/)应该包括`#`这样的：

```
function SubmitForm() {
    $("#UrIntakeForm").valid(); // "#UrIntakeForm" instead of "UrIntakeForm"
 } 
```

否则，您将该`valid()`方法应用于一个空的 jQuery 对象，这会导致您指定的错误。

# java - 对象创建的设计模式

> ID：14821934
> 
> 赞同：0
> 
> 时间：2013-02-11T22:15:50.397
> 
> 标签：java, design-patterns

必须创建一个抽象类，比如 Part。但是有两种类型的部分，

Part1：这部分有3个实例变量，inside,outside,middle

Part2：这部分有2个实例变量，top，bottom

最后，两个 Part 都扩展了一个抽象类 Part，所以最后，在 Java 中是这样的

```
abstract Class Object{
   public abstract String toString();
}

abstract class Part{
    abstract void print();
}

Class Part1 extends Part1{
    List <Object> inside = new ArrayList <Object> ();
    List <Object> outside = new ArrayList <Object> ();
    List <Object> medium = new ArrayList <Object> ();
    void print(){
        //go through all the list and print the object
    }
}

Class Part1 extends Part2{
    List <Object> top = new ArrayList <object> ();
    List <Object> bottom = new ArrayList <object> ();
    void print(){
        //go through all the list and print the object
    }
} 
```

我的问题是我可以应用哪种设计模式来创建零件，我仍然是模式的新手，对我来说它的构建者，因为我必须想出具有不同表示的相同类型的对象。但对象并不复杂！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:34:00.743

请参阅[http://en.wikibooks.org/wiki/C%2B%2B_Programming/Code/Design_Patterns#Creational_Patterns](http://en.wikibooks.org/wiki/C%2B%2B_Programming/Code/Design_Patterns#Creational_Patterns)。

我更喜欢工厂模式使用或原型：

原型示例：

```
Class PartsFactory
{
    Part createPart(string partType)
    {
        if (partType.equals("Type1")) return new Part1();
        if (partType.equals("Type2")) return new Part2();
        return null;
    }
} 
```

工厂示例：

```
interface PartsFactory
{
    Part createPart();
}

Class Parts1Factory implements PartsFactory
{
    Part createPart()
    {
        return new Part1();
    }
}

Class Parts2Factory implements PartsFactory
{
    Part createPart()
    {
        return new Part2();
    }
} 
```

# c++ - 什么是 C++ 中的标量对象？

> ID：14821936
> 
> 赞同：36
> 
> 时间：2013-02-11T22:15:53.427
> 
> 标签：c++, types, theory

据我了解，基本类型是标量，数组是聚合的，但是用户定义的类型呢？我会根据什么标准将它们分为两类？

```
struct S { int i; int j };
class C { public: S s1_; S s2_ };
std::vector<int> V;
std::vector<int> *pV = &v; 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-11T22:24:16.883

**简短版本：** C++ 中的类型是：

*   对象类型：标量、数组、类、联合

*   引用类型

*   函数类型

*   （会员类型）[见下文]

*   `void`

* * *

**长版**

*   对象类型

    *   标量

        1.  算术（整数，浮点数）

        2.  指针：`T *`适用于任何类型`T`

        3.  枚举

        4.  指向成员的指针

        5.  `nullptr_t`

    *   数组：`T[]`或`T[N]`任何完整的非引用类型`T`

    *   类：`class Foo`或`struct Bar`

        1.  琐碎的课程

        2.  骨料

        3.  POD 课程

        4.  （等等等等）

    *   工会：`union Zip`

*   引用类型：`T &`，`T &&`对于任何对象或自由函数类型`T`

*   函数类型

    *   免费功能：`R foo(Arg1, Arg2, ...)`

    *   成员函数：`R T::foo(Arg1, Arg2, ...)`

*   `void`

成员类型是这样工作的。成员类型的形式为`T::U`，但您不能拥有成员类型的对象或变量。你只能有成员*指针*。成员指针具有 type ，如果是（自由）对象类型，`T::* U`则它是指向成员对象的指针，如果是（自由）函数类型，则它是指向成员函数的指针。`U``U`

`void`除了未定义大小的数组和声明但未定义的类和联合之外，所有类型都是完整的。除了`void`可以完成的所有不完整类型。

所有类型都可以`const`/`volatile`合格。

标`<type_traits>`头提供了 trait 类来检查这些类型特征中的每一个。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-01-13T02:18:47.493

我认为这将是一个更全面的答案：

![在此处输入图像描述](../Images/caccf8f2b28c6db28f999e86bc4bb490.png)

原始文档：
[http ://howardhinnant.github.io/TypeHiearchy.pdf](http://howardhinnant.github.io/TypeHiearchy.pdf)

**标量是基本的，但它不能为 void，但它可以是指针类型或枚举类型。**

并且**一个基本的语言中有一个关键字**。这么说很容易辨认。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-25T14:22:57.203

有一系列用于测试变量类型的库类。 [`std::is_scalar`](http://www.cplusplus.com/reference/type_traits/is_scalar/)可用于测试对象是否为标量。

> 标*量类型*是一种具有加法运算符的内置功能而没有重载（算术、指针、成员指针、枚举和`std::nullptr_t`）的类型。

还有一张来自[这里](http://www.cplusplus.com/reference/type_traits/)的桌子。

[![C++ 类型类别](../Images/793bce53f47256644041969c83059ea3.png)](https://i.stack.imgur.com/zEuL5.png)

# windows - 为什么引用位置在从 Windows 命令行运行 devenv.com 时很重要？

> ID：14821938
> 
> 赞同：1
> 
> 时间：2013-02-11T22:15:56.593
> 
> 标签：windows, visual-studio-2010, command-line

我一直在整理一个批处理脚本（Windows 命令行），并注意到引用包含空格的路径时出现了一些奇怪的行为。

要使用空格引用位置（例如 c:\Program Files），必须使用引号（“c:\Program Files”）。例如，调用 MSTest.exe，您将使用：

```
"c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\MSTest.exe" 
```

如果您还打算引用该位置的其他程序，您可能会执行以下操作：

```
set VSDIR="c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE"
%VSDIR%\MSTest.exe 
```

对 MSTest.exe 的扩展调用如下所示：

```
"c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE"\MSTest.exe 
```

这按预期工作。引号被去除，系统加载 MSTest.exe。伟大的。现在，如果我对 devenv.com 做同样的事情：

```
set VSDIR="c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE"
%VSDIR%\devenv.com 
```

系统默默地什么也不做。没有输出被发送到标准输出或错误，并且错误级别保持为零。在 devenv.com 之后移动报价会正常加载该过程。

任何人都知道为什么我会看到这种行为？是因为 devenv.com 以实模式运行，还是与进程本身有关？

# ios - NSDictionary 变成 NSCFString

> ID：14821939
> 
> 赞同：1
> 
> 时间：2013-02-11T22:15:59.777
> 
> 标签：ios, objective-c, nsuserdefaults

我遇到了一个奇怪的问题，将 an 存储`NSDictionary`到 the`NSUserDefaults`然后检索它会将其转换为`NSCFString`.

这是我保存数据的地方：

```
- (void)saveProgress
{
    // Save our progress to the user defaults.
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSMutableDictionary *progressDict = [NSMutableDictionary dictionary];
    if ([defaults objectForKey:@"session_progress"] != nil) {
        [progressDict addEntriesFromDictionary:[defaults dictionaryForKey:@"session_progress"]];
    }
    NSMutableDictionary *targetsDict = [NSMutableDictionary dictionary];
    if ([progressDict objectForKey:@"targets"] != nil) {
        [targetsDict addEntriesFromDictionary:[progressDict objectForKey:@"targets"]];
    }
    NSMutableDictionary *trackableDict = [NSMutableDictionary dictionary];
    if ([targetsDict objectForKey:@"mda_sao_ext_04"]) {
        [trackableDict addEntriesFromDictionary:[targetsDict objectForKey:@"mda_sao_ext_04"]];
    }
    [trackableDict setObject:[NSNumber numberWithBool:YES]
                      forKey:@"viewed"];
    NSLog(@"SAVE Trackable %@ %@", [trackableDict class], trackableDict);
    [targetsDict setObject:trackableDict
                    forKey:@"mda_sao_ext_04"];
    NSLog(@"SAVE Targets %@ %@", [targetsDict class], targetsDict);
    [progressDict setObject:targetsDict
                     forKey:@"targets"];
    [defaults setObject:progressDict
                 forKey:@"session_progress"];
    [defaults synchronize];
} 
```

这是我加载数据的地方：

```
- (NSInteger)loadProgress
{
    // Load our progress from the user defaults.
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"session_progress"] == nil) {
        return 0;
    }
    NSDictionary *progressDict = [defaults dictionaryForKey:@"session_progress"];
    if ([progressDict objectForKey:@"targets"] == nil) {
        return 0;
    }
    NSDictionary *targetsDict = [progressDict objectForKey:@"targets"];
    NSLog(@"LOAD Targets %@ %@", [targetsDict class], targetsDict);
    NSInteger viewedCount = 0;
    for (NSDictionary *trackableDict in targetsDict) {
        NSLog(@"LOAD Trackable %@ %@", [trackableDict class], trackableDict);
        if ([[trackableDict objectForKey:@"viewed"] boolValue]) {
            ++viewedCount;
        }
    }

    return viewedCount;
} 
```

该应用程序在`loadProgress`. 这是控制台的输出：

```
LOAD Targets __NSCFDictionary {
    "mda_sao_ext_04" =     {
        scanned = 1;
        viewed = 1;
    };
} 
LOAD Trackable __NSCFString mda_sao_ext_04 
```

您可以从第一个跟踪中看到 `mda_sao_ext_04 是一个字典，但由于某种原因它被转换为一个字符串。

有什么想法或建议吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T22:23:43.640

NSDictionary 的快速枚举返回键，而不是值。

`for (NSDictionary *trackableDict in targetsDict) {`

在这里，您遍历所有键。改变

```
NSLog(@"LOAD Trackable %@ %@", [trackableDict class], trackableDict); 
```

至

```
NSLog(@"LOAD Trackable %@ %@", [trackableDict class], targetsDict[trackableDict]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T22:21:54.310

```
for (NSDictionary *trackableDict in targetsDict) 
```

此`for`构造遍历键，而不是值。所以，要获得价值，你必须要么

```
for (NSDictionary *trackableDict in [targetsDict allValues]) 
```

或者

```
for (NSString *trackableKey in targetsDict)
{
    NSDictionary *trackableDict = targetsDict[trackableKey];
    .....
} 
```

# html - 与浮动内的绝对位置发生溢出冲突

> ID：14821944
> 
> 赞同：0
> 
> 时间：2013-02-11T22:16:08.543
> 
> 标签：html, css

有一个带有溢出的“容器”：自动包含浮动元素组，“值”。在“value”内部，有一个绝对定位元素“popup”，它被溢出截断。我怎样才能让“弹出”出现并仍然保持“容器”不丢失其布局？

HTML

```
<div class="container">
  <div class="group">
    <span class="label">Label</span>
    <span class="value">
      <span class="popup_container">
        <div class="popup">Popup</div>
      </span>
    </span>
  </div>
  <div class="group">
    <span class="label">Label</span>
    <span class="value">
      <span class="popup_container">
        <div class="popup">Popup</div>
      </span>
    </span>
  </div>
</div> 
```

CSS

```
.container {
    overflow: auto;
    background-color: red;
}
.label {
    float: left;
    clear: left;
    width: 100px;
}
.value {
    float: left;
}
.popup_container {
    position: relative;
}
.popup {
    position: absolute;
    height: 200px;
    width: 200px;
    background-color: orange;
} 
```

请参阅[http://jsfiddle.net/KA7AB/2/](http://jsfiddle.net/KA7AB/2/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:20:03.280

将您的 popup_container 设置为绝对：

```
position: absolute; 
```

[http://jsfiddle.net/KA7AB/6/](http://jsfiddle.net/KA7AB/6/)

# android - S3(GT-I9300) 相机预览架错误

> ID：14821950
> 
> 赞同：6
> 
> 时间：2013-02-11T22:16:46.213
> 
> 标签：android, camera

我们创建了一个基于`android.hardware.Camera`类的自定义相机。当我们按下“拍照”按钮时，预期的行为是拍照并在查看屏幕上查看静止拍摄的照片。但是，当我们进入查看屏幕时，相机仍然可以工作/取景器正在显示“实时”拍摄（而不是静止的查看）。看起来支架不起作用。

这已在某些`Samsung Galaxy S3`手机上观察到（`GT-I9300`）；但奇怪的是，在所有其他型号上一切正常（静止图像应出现在查看屏幕中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:20:11.043

到目前为止，我的解决方案是创建一个布局，其中视图占用与表面视图相同的视图。

然后我得到预览的视图边界（在我的情况下它是屏幕的大小）

```
//Get our screen size
    Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE))
            .getDefaultDisplay();
    DisplayMetrics metrics = getResources().getDisplayMetrics();
    Point size = new Point();
    try {
        display.getSize(size);
        w_width = size.x;
        w_height = size.y;
    } catch (NoSuchMethodError e) {
        w_width = display.getWidth();
        w_height = display.getHeight();
    } 
```

然后我将回调设置为：

```
callback = new Camera.PictureCallback() {
            @Override
            public void onPictureTaken(byte[] bytes, Camera camera) {
                //Get the view bounds to determine how to manipulate this image
                BitmapFactory.Options options = new BitmapFactory.Options();
                options.inJustDecodeBounds = true;
                BitmapFactory.decodeByteArray(bytes, 0, bytes.length, options);

                //If the image is smaller than the screen, don't make the image bigger
                int finalWidth = (w_width < options.outWidth) ? w_width : options.outWidth;
                int finalHeight = (w_height < options.outHeight) ? w_height : options.outHeight;
                int inSampleSize = 1;
                options = new BitmapFactory.Options();
                if (finalHeight > w_height || finalWidth > w_width) {

                    // Calculate ratios of height and width to requested height and width
                    final int heightRatio = Math.round((float) finalHeight / (float) w_height);
                    final int widthRatio = Math.round((float) finalWidth / (float) w_width);

                    // Choose the smallest ratio as inSampleSize value, this will guarantee
                    // a final image with both dimensions larger than or equal to the
                    // requested height and width.
                    inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
                }

                options.inSampleSize = inSampleSize;

                //Decode the smaller image
                Bitmap b = BitmapFactory.decodeByteArray(bytes, 0, bytes.length, options);

                //Rotate the image correctly
                Matrix mat = new Matrix();
                mat.postRotate(orientation);
                Bitmap newBitmap = Bitmap.createBitmap(b, 0, 0, options.outWidth, options.outHeight, mat, true);
                imagePreview.setBackgroundDrawable(new BitmapDrawable(newBitmap));
                imagePreview.setVisibility(View.VISIBLE);
            }
        }; 
```

所以基本上表面视图永远不会停止显示预览，但图像视图将其隐藏，因此用户看不到它。

然后，如果用户决定不保留图像，那么我只需重新隐藏视图，surfaceView 将继续显示实时预览。幸运的是，GS3 似乎并不介意有人调用“camera.startPreview();” 即使预览已经开始。

我真的不喜欢这个答案，但这就是我目前在 Galaxy S3 上工作的全部内容。它适用于我尝试过的旧设备（2.3 及更高版本），但它绝对只是一种解决方法。

# jquery - 只有 For-of-Loop 的最后一个值被传递给 JQuery click 函数

> ID：14821951
> 
> 赞同：1
> 
> 时间：2013-02-11T22:16:46.420
> 
> 标签：jquery, coffeescript, closures

我在 CoffeeScript 中有以下 For Of 循环，它遍历对象的属性：

```
for buildingFrame of buildingNames
  $("#bt-#{buildingFrame}").click () => @displayProperties(buildingFrame) 
```

似乎只有 buildingFrame 的最后一个值被传递给每次调用`@displayProperties`. 搜索该站点我发现我认为是这里的原因：[可能的答案](https://stackoverflow.com/questions/1562127/jquery-callback-function-only-working-on-last-loop)

之所以只使用循环中的最后一个值是因为 JavaScript 是一种后期绑定语言，并且循环不会引入新的范围。解决此问题的解决方案在 JavaScript 中的答案中给出，如下所示：

```
for(var i=0; i<barValues.length; i++) function(i){
  ...
}(i); 
```

我已经尝试在上面的 coffeScript 中使用此解决方案来尝试解决问题，如下所示：

```
for buildingFrame of buildingNames => (buildingFrame)
  $("#bt-#{buildingFrame}").click () => @displayProperties(buildingFrame)
(buildingFrame) 
```

但这只是给我的编译器错误。有人请告诉我如何在 CS 中解决这个问题。谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:23:20.190

这样的事情怎么样？

```
for buildingFrame of buildingNames
  do (buildingFrame) =>
    $("#bt-#{buildingFrame}").click => @displayProperties(buildingFrame) 
```

这将编译为以下 JavaScript：

```
_fn = function(buildingFrame) {
  return $("#bt-" + buildingFrame).click(function() {
    return _this.displayProperties(buildingFrame);
  });
};

for (buildingFrame in buildingNames) {
  _fn(buildingFrame);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:23:11.803

您可以使用以下`do`关键字：

```
for buildingFrame in buildingNames
    do (buildingFrame) ->
        $("#bt-#{buildingFrame}").click () => @displayProperties(buildingFrame) 
```

# java - 使用卡片布局更改面板

> ID：14821952
> 
> 赞同：19
> 
> 时间：2013-02-11T22:16:48.823
> 
> 标签：java, swing, jpanel, cardlayout

嗨，如果这已经发布，我很抱歉，但我仔细看了看，发现了其他我不太理解的代码。我是 Java 编程的新手，希望有人指出我如何通过按下按钮更改为所需面板的正确方向。任何帮助将不胜感激。我只是想完全理解这个概念是如何工作的。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;  // Packages used in this program imported    

public class onlineGame extends JFrame implements ActionListener
{

    JPanel cards;
    JButton button1, button2, button3;

    public onlineGame() //This is the CONSTRUCTOR method
    {
        //The entry point into your program
        setLayout(new FlowLayout()); //Use this for now.
        setSize(810, 510); //Set the size of the JFrame
        setTitle("Generic Card Game"); //Put Title on top of JFrame
        setBackground(Color.yellow);
        setResizable(false);

        button1 = new JButton("THIS IS BUTTON 1");
        button2 = new JButton("THIS IS BUTTON 2");
        button3 = new JButton("THIS IS BUTTON 3");

        button1.addActionListener(this);
        button2.addActionListener(this);
        button3.addActionListener(this);    

        //Create the cards

        JPanel card1 = new JPanel();
        card1.add(button1);

        JPanel card2 = new JPanel();
        card2.add(button2);

        JPanel card3 = new JPanel();
        card3.add(button3);

        //Create the panel that contains the "cards".

        cards = new JPanel(new CardLayout());

        cards.add(card1);
        cards.add(card2);
        cards.add(card3);

        getContentPane().add(cards); 
        setVisible(true); //Make JFrame visible
    }

    public void actionPerformed(ActionEvent e)
    {    
        if (e.getSource() == button1){    
            //What do i put here to change to Panel card2 or card3 and so on.
        }
    }
    public static void main(String args[])
    {    
        new onlineGame(); // This calls the constructor and runs it    
    }
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-11T22:23:01.187

要切换到任意面板，请确保在添加卡片组件时指定约束：

```
cards.add(card1, "Card 1");
cards.add(card2, "Card 2");
cards.add(card3, "Card 3"); 
```

然后翻转到不同的组件：

```
CardLayout cardLayout = (CardLayout) cards.getLayout();
cardLayout.show(cards, "Card 2"); 
```

要导航到下一个组件，您可以使用：

```
cardLayout.next(cards); 
```

阅读：[卡片布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

# graphicsmagick - 使用 Graphicsmagick 以 DPX 格式加载原始内存 blob

> ID：14821957
> 
> 赞同：1
> 
> 时间：2013-02-11T22:17:09.320
> 
> 标签：graphicsmagick

我有一个在内存缓冲区中生成 Big Endian 10 位 DPX 图像的库。不过，它只是原始的 10 位 RGB 数据，没有标题。我正在尝试将此数据加载到这样的实例中`Magick::Image`：

```
Magick::Blob blob(dataBuffer, dataBufferSize;
image.read(blob, Magick::Geometry(width, height), 10 /*bits*/, "DPX"); 
```

但是，这会引发以下异常： `Magick: Improper image header ()`

是否可以将原始 DPX 加载到`Magick::Image`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:24:40.227

我不认为你的答案是一个好的答案。它是偶然工作的。您的 blob 数据可能采用 DPX 以外的其他格式。指定“SDPX”（不受支持的格式规范）允许文件格式检测自动工作并选择正确的格式。

使用

```
enter code herMagick::Blob blob(dataBuffer, dataBufferSize);
image.read(blob); 
```

那么应该就足够了。大多数图像文件格式不需要指定格式或深度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:01:23.340

在这里想出了我自己的答案。我查看了 DPX 加载源，并在这种情况下发现了这一行：

```
image.read(blob, Magick::Geometry(width, height), 10 /*bits*/, "DPX"); 
```

应该：

```
image.read(blob, Magick::Geometry(width, height), 10 /*bits*/, "SDPX"); 
```

# entity-framework - 具有动态 DbContext 的实体框架 5.0 存储库

> ID：14821958
> 
> 赞同：0
> 
> 时间：2013-02-11T22:17:11.020
> 
> 标签：entity-framework

正如它在锡上所说，是否可以创建一个适合用作实体框架 5.0 POCO 上下文的 DbContext 实例，其中通常声明为的属性

```
public DbSet<T> Entities { get; set; } 
```

直到运行时才设置/知道？

我想创建一个具有以下方法的存储库

```
public TEntity Find<TEntity>(object key) where TEntity : class
{
    return _context.Set<TEntity>().Find(key);
}

public void Update<TEntity>(TEntity entity) where TEntity : class
{
    if (_context.Entry(entity).State == EntityState.Detached) //entity is detached 
        _context.Set<TEntity>().Attach(entity);
    _context.Entry(entity).State = EntityState.Modified;
}

.... etc 
```

然后像这样使用它们：

```
Widget w = repository.Find<Widget>(123);
repository.SaveChanges(); 
```

如果存储库的上下文设置为包含 a 的类，这是微不足道的`DbSet<Widget> Widgets`，但是可以这样做以使我计划使用的实体类型直到运行时才知道，或者可能直到我实际使用它们才知道？因此，如果我有一个新类 Foo，我可以立即查询我的存储库， `.Find<Foo>(123)`而不必先将 a 添加`DbSet<Foo> Foos`到我的 DbContext 类中？

我认为这应该是可能的，因为 poco 类或持有对它们的引用的 DbContext 实例没有什么特别之处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:48:55.400

你不需要`DbSet<Foo> Foos`财产。这只是讲述`Foo`实体存在的上下文的一种方式。上下文如何发现映射实体有多种方式：

*   通过显式`DbSet<T>`属性
*   通过已发现实体中的导航属性
*   通过指定映射`DbModelBuilder`
    *   覆盖`OnModelCreated`在您的上下文类型中
    *   手动创建`DbModelBuilder`，构建和编译它`DbCompiledModel`可以传递给`DbContext`构造函数
    *   通过声明`EntityTypeConfiguration<T>`每个实体并将其添加到`DbModelBuilder`（在`OnModelCreated`或手动创建`DbModelBuilder`）。

最后一个选项可用于在应用程序启动时发现所有必需的实体（例如，通过搜索所有实体配置类的程序集并将它们注册到模型构建器），但它仍然不是完全动态的解决方案。当第一次使用上下文时，编译模型通常只在每个应用程序运行时构建一次。如果不替换已编译的模型，您将无法在上下文中添加或删除映射的实体类型。

# iphone - 带有 groupBy 的 nspredicate 不喜欢带有 nsdate 的谓词比较

> ID：14821961
> 
> 赞同：-1
> 
> 时间：2013-02-11T22:17:22.033
> 
> 标签：iphone, cocoa, core-data, nspredicate

这段代码：

```
 entity = [NSEntityDescription entityForName:@"PerDestinationsStat" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];
    //NSFetchedPropertyDescription *rateCodeDesc = [entity.propertiesByName objectForKey:@"rateCode"];
    [fetchRequest setPropertiesToGroupBy:[NSArray arrayWithObjects:[entity.propertiesByName objectForKey:@"rateCode"],[entity.propertiesByName objectForKey:@"rateCountry"],[entity.propertiesByName objectForKey:@"rateSpecific"],[entity.propertiesByName objectForKey:@"ratePrice"],[entity.propertiesByName objectForKey:@"allCalls"],[entity.propertiesByName objectForKey:@"acd"],[entity.propertiesByName objectForKey:@"asr"],[entity.propertiesByName objectForKey:@"cost"],[entity.propertiesByName objectForKey:@"duration"],[entity.propertiesByName objectForKey:@"income"],[entity.propertiesByName objectForKey:@"succesefulCalls"],nil]];
    [fetchRequest setResultType:NSDictionaryResultType];
    [fetchRequest setPropertiesToFetch:[NSArray arrayWithObjects:@"rateCode",@"rateCountry",@"rateSpecific",@"ratePrice",@"allCalls",@"acd",@"asr",@"cost",@"duration",@"income",@"succesefulCalls",nil]];
    predicate = [NSPredicate predicateWithFormat:@"(perHourStat.dateFrom > %@) and (perHourStat.dateTo < %@) and (perHourStat.originator.company == %@)",from,to,selected];
    [fetchRequest setPredicate:predicate];
    fetchedObjects = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error]; 
```

找不到对象，但如果我使用：

```
 predicate = [NSPredicate predicateWithFormat:@" (perHourStat.originator.company == %@)",selected]; 
```

找到的对象：

```
> Printing description of fetchedObjects: <_PFArray 0x100664fb0>(
> <PerHourStat: 0x101233810> (entity: PerHourStat; id: 0x10122f310
> <x-coredata://BBDDF3D7-EA50-4290-B03A-05349E74467E/PerHourStat/p1> ;
> data: {
>     acd = "0.03688591122627258";
>     allCalls = 3;
>     asr = 1;
>     cost = "0.1327892804145813";
>     dateFrom = "2013-02-11 21:00:00 +0000";
>     dateTo = "2013-02-11 21:59:59 +0000";
>     duration = "6.639464020729065";
>     income = "0.1991839206218719";
>     originator = "0x101236000 <x-coredata://BBDDF3D7-EA50-4290-B03A-05349E74467E/Originator/p1>";
>     perDestinationsStat = "<relationship fault: 0x104d2b9b0 'perDestinationsStat'>";
>     succesefulCalls = 3;
>     terminator = nil; }) 
```

from/to 在找到的对象中匹配 dateFrom：

```
> description of from: 2013-02-11 22:00:00 +0000
> description of to: 2013-02-12 21:59:59 +0000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:55:20.290

您正在比较同一日期`21:00`> `22:00`。这将清楚地匹配 0 条记录。

# html - 为什么点击后我的表单边框会改变？

> ID：14821968
> 
> 赞同：1
> 
> 时间：2013-02-11T22:17:50.770
> 
> 标签：html, css, forms, border, outline

我正在制作一个表格（它有一个边框和一个轮廓）。它在不活动时看起来是 find ，但一旦它处于活动状态，它就会改变。

不活跃： http: [//gyazo.com/e8a7548efda5ffa161ed241dd1ff2d15](http://gyazo.com/e8a7548efda5ffa161ed241dd1ff2d15)

主动： http: [//gyazo.com/91a8fcabf6ffe1fccb0c5f78085f0353](http://gyazo.com/91a8fcabf6ffe1fccb0c5f78085f0353)

有谁知道这个问题？

HTML：

```
<form id="search" action="http://www.example.com/search.php" method="get">
    <input type="text" size="72" class="inputheight" name="search" />
</form> 
```

CSS：

```
#search {
    position:absolute;
    z-index:5;
    margin-top:63px;
    margin-left:208px;
    }

.inputheight {
    height:31px;
    border:1px solid blue !important;
    outline:2px solid rgb(149,231,255) !important;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:57:30.440

尝试添加`outline-offset:0`到您的 .inputheight 样式：

```
.inputheight {
    height:31px;
    border:1px solid blue !important;
    outline-offset: 0;
    outline:2px solid rgb(149,231,255) !important;
} 
```

这是 Chrome 的默认样式表。当输入具有焦点时，它将轮廓偏移设置为 -2px，使您的 2px 轮廓隐藏您的边框。

# c++ - wxStaticBitmap 构造函数采用 wxGDIImage 而不是 wxBitmap

> ID：14821969
> 
> 赞同：1
> 
> 时间：2013-02-11T22:17:51.550
> 
> 标签：c++, visual-c++, bitmap, wxwidgets, wxformbuilder

我正在尝试创建一个静态位图，但构造函数只接受 wxGDIImages。这是来自 FormBuilder 的代码：

```
wxStaticBitmap* tmtBitmap = new wxStaticBitmap( this, wxID_ANY, wxBitmap( wxT("directory"), wxBITMAP_TYPE_ANY ), wxDefaultPosition, wxDefaultSize, 0 ); 
```

有没有办法将 wxBitmap 转换为 wxGDIImage？或者在给定目录的情况下创建一个 wxGDIImage？

也许还有另一种方法可以做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:22:11.440

`wxStaticBitmap`确实`wxBitmap`在其构造函数中接受（[wx API-Doc](http://docs.wxwidgets.org/stable/wx_wxstaticbitmap.html#wxstaticbitmapconstr)）
编译器产生的错误消息可能有点误导我猜你会看到这样的东西：

```
include/wx/msw/statbmp.h:80: note: candidates are: wxStaticBitmap::wxStaticBitmap(const wxStaticBitmap&)
include/wx/msw/statbmp.h:34: note:                 wxStaticBitmap::wxStaticBitmap(wxWindow*, wxWindowID, const wxGDIImage&, const wxPoint&, const wxSize&, long int, const wxString&)
include/wx/msw/statbmp.h:25: note:                 wxStaticBitmap::wxStaticBitmap() 
```

由于它是唯一取决于上下文的东西，因此您的指针似乎有问题`this`，要么您不在“内部” a ，`wxWindow` 要么您的编译器无法确定静态类型。您可以使用这样的东西来验证：（不要在生产代码中这样做）

```
wxStaticBitmap* tmtBitmap = new wxStaticBitmap( (wxWindow*)NULL, wxID_ANY, wxBitmap( wxT("directory"), wxBITMAP_TYPE_ANY ), wxDefaultPosition, wxDefaultSize, 0 ); 
```

或者

```
wxStaticBitmap* tmtBitmap = new wxStaticBitmap( (wxWindow*)this, wxID_ANY, wxBitmap( wxT("directory"), wxBITMAP_TYPE_ANY ), wxDefaultPosition, wxDefaultSize, 0 ); 
```

# oauth - Thinktecture Implicit Flow with External Identity Providers (facebook, google, adfs etc...)

> ID：14821973
> 
> 赞同：0
> 
> 时间：2013-02-11T22:18:09.833
> 
> 标签：oauth, thinktecture-ident-server

我似乎无法弄清楚这一点。

使用此处使用的 oauth2 方法的隐式流程时，是否有任何可能的方式来选择身份提供者进行登录？除了网络身份登录之外，我似乎什么都没有。

[http://weblogs.thinktecture.com/cweyer/2012/11/oauth2-in-thinktecture-identityserver-v2-implicit-grant-flow-with-javascript.html](http://weblogs.thinktecture.com/cweyer/2012/11/oauth2-in-thinktecture-identityserver-v2-implicit-grant-flow-with-javascript.html)

和这里？

[http://leastprivilege.com/2012/11/06/oauth2-in-thinktecture-identityserver-v2-using-the-implicit-flow-with-windows-store-clients/](http://leastprivilege.com/2012/11/06/oauth2-in-thinktecture-identityserver-v2-using-the-implicit-flow-with-windows-store-clients/)

我想要类似于用于登录的家庭领域发现的东西，不幸的是我不确定这是否是协议、框架的限制，或者它真的只是我必须自己实现的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:43:06.230

目前仅 WS-Federation 支持联合。

# php - 根据自定义字段数据添加图像

> ID：14821979
> 
> 赞同：0
> 
> 时间：2013-02-11T22:18:29.660
> 
> 标签：php, image, custom-fields

我在这里有 PHP，用于根据名为“ecpt_shrating”的自定义字段中的数据将图像添加到 Wordpress 帖子中。

当放置在 PHP 后，它只是显示原始代码，尽管图像是可见的。

有点新手，对不起，非常感谢任何帮助。

```
 $value = get_post_meta( get_the_ID(), 'ecpt_shrating', true );
if( $value == hell ) { <img src='/wp-content/uploads/2013/02/image1.gif'>

    } elseif( $value == poor ) { <img src='/wp-content/uploads/2013/02/image2.gif'>

    } elseif( $value == nice ) { <img src='/wp-content/uploads/2013/02/image3.gif'>

    } elseif( $value == angelic ) { <img src='/wp-content/uploads/2013/02/image4.gif'>

    } elseif( $value == heaven ) { <img src='/wp-content/uploads/2013/02/image5.gif'>

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:21:54.233

您必须确保您的代码放置在`<?php ?>`（PHP 标记）中。您的代码将无法按原样工作：

```
<?php
$value = get_post_meta( get_the_ID(), 'ecpt_shrating', true );
$image = '';
if( $value == 'hell' ){
    echo '<img src="/wp-content/uploads/2013/02/image1.gif">';
} elseif( $value == 'poor' ) {
    echo '<img src="/wp-content/uploads/2013/02/image2.gif">';
} elseif( $value == 'nice' ) {
    echo '<img src="/wp-content/uploads/2013/02/image3.gif">';
} elseif( $value == 'angelic' ) {
    echo '<img src="/wp-content/uploads/2013/02/image4.gif">';
} elseif( $value == 'heaven' ) {
    echo '<img src="/wp-content/uploads/2013/02/image5.gif">';
}?> 
```

或者：

```
<?php
$value = get_post_meta( get_the_ID(), 'ecpt_shrating', true );
$image = '';
switch($value){
    case "hell":
        $image = 'image1.gif';
        break;
    case "poor":
        $image = 'image2.gif';
        break;
    case "nice":
        $image = 'image3.gif';
        break;
    case "angelic":
        $image = 'image4.gif';
        break;
    case "heaven":
        $image = 'image5.gif';
        break;

}
if(!empty($image)){
    echo '<img src="/wp-content/uploads/2013/02/'.$image.'">';
}?> 
```

# ember.js - 对 Ember 数据使用主键

> ID：14821980
> 
> 赞同：14
> 
> 时间：2013-02-11T22:18:33.160
> 
> 标签：ember.js, ember-data

在过去的几天里，我一直在**努力使用****主键**和 Ember Data 的最新版本。

[我首先在 GitHub](https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md)上的 Breaking Changes 文件中阅读了如何做到这一点，但它显然已经过时了。我尝试[了](https://gist.github.com/anonymous/e44b07b142ca046e6b0a) [其他](https://gist.github.com/anonymous/54f9fa49959c593036a8) [几种方法](https://gist.github.com/anonymous/f7d31e0819cf1618abda)（在 IRC 上的 Peter Wagenet 的帮助下），但它们似乎都不起作用。

我想`slug`在我的模型上创建我的主键，而且由于我正在使用 MongoDB，我想使用`_id`而不是`id`.

有没有人想出如何做到这一点？我的根本问题是，当我在模型上执行几次时，模型记录会被加载两次`App.MyModel.find()`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-11T00:30:47.013

从 Ember Data 1.0 beta 开始，您`primaryKey`在相应的序列化程序上定义。

对于整个应用程序

```
App.ApplicationSerializer = DS.RESTSerializer.extend({
  primaryKey: '_id'
}); 
```

对于单一类型

```
App.FooSerializer = DS.RESTSerializer.extend({
  primaryKey: '_id'
}); 
```

您仍将`id`在模型上引用它，但 Ember Data 将`_id`在传输期间对其进行序列化/反序列化。

示例：[http ://emberjs.jsbin.com/OxIDiVU/635/edit](http://emberjs.jsbin.com/OxIDiVU/635/edit)

在此处阅读更多信息：http: [//emberjs.com/api/data/classes/DS.RESTSerializer.html#property_primaryKey](http://emberjs.com/api/data/classes/DS.RESTSerializer.html#property_primaryKey)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T15:07:23.190

> 我想让 slug 成为我模型的主键，而且由于我正在使用 MongoDB，我想使用 _id 而不是 id。

使用适配器的`map`API 指定应该用作主键的属性：

```
App.Adapter.map('App.Person', {
  primaryKey: '_id'
}); 
```

有关详细信息，请参阅[serializer.js api 文档](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/serializer.js#L79)。如果您需要进一步自定义记录 id 的序列化方式，请使用[此处](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/serializer.js#L394)`addId`描述的钩子。

由于 ember-data 仍在积极开发中，因此有关此功能的文档有些有限，并且可能会在 1.0 版本之前更改。与此同时，请参阅 ember-data 测试套件以查看实际操作中的示例。例如：

*   [将记录序列化为 JSON 时尊重映射的主键](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/unit/json_serializer_test.js#L186)演示了保存记录时 _id 属性将如何包含在 json 中
*   [从 JSON 实现记录时会尊重映射的主键，这](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/unit/json_serializer_test.js#L205)显示了带有 _id 属性的 JSON 将如何转换为具有正确 id 的记录

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T09:03:45.650

如果 Nikita 建议的解决方案不起作用（对我来说没有使用 ember-data 的修订版 11），以下是我在使用 RESTAdapter 时更改主键的方式：

```
App.Adapter = DS.RESTAdapter.extend({
    serializer: "App.MySerializer"
});

// notice we extend the RESTSerializer, not Serializer!
App.MySerializer = DS.RESTSerializer.extend({
    primaryKey: function(type) {
        return '_id'; // you get it...
    }
}); 
```

我知道这可能不会再帮助 OP，但我仍然发布它，因为它可能对你们中的某些人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T12:35:26.707

尝试像这样扩展您的适配器：

```
 App.RESTSerializer = DS.RESTSerializer.extend({
      init: function() {
        this._super();

        this.map('App.MyModel', {
          primaryKey: "_id"
        });
      }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-16T07:10:41.997

我在我的应用程序中使用[MongoDB](http://www.mongodb.org/)和[Ember-Data 1.0.0-beta.6](http://builds.emberjs.com/tags/v1.0.0-beta.6/ember-data.prod.js)，并且 _id 在[Ember 1.4.0](http://emberjs.com/)中也给我带来了问题。这是我为解决问题所做的工作，假设返回的 JSON 数组嵌套在根属性“people”中：

```
App.ApplicationSerializer = DS.RESTSerializer.extend({
    normalizeHash: {
        people: function(hash) {
            hash.id = hash._id;
            delete hash._id;
            return hash;
        }
    }
}); 
```

当然，这是一个应用程序范围的序列化程序，但您可以将其限制为特定路径，例如`App.MyPathSerializer = DS.RESTSerializer.extend({ ... });`

# mysql - Mountain Lion：无法通过套接字“/tmp/mysql.sock”连接到本地 MySQL 服务器

> ID：14821982
> 
> 赞同：1
> 
> 时间：2013-02-11T22:18:37.853
> 
> 标签：mysql, macos, osx-mountain-lion, homebrew

我通过自制软件安装了 mysql。我运行了 brew 建议的两个命令：

```
unset TMPDIR

mysql_install_db --verbose --user=`whoami` --basedir="$(brew --prefix mysql)" --datadir=/usr/local/var/mysql --tmpdir=/tmp 
```

当我尝试运行 mysql_secure_installation 脚本时，我收到此错误：

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) 
```

一个单独的线程让我相信它与权限有关：[通过套接字连接到本地 MySQL 服务器](https://stackoverflow.com/questions/6525917/connect-to-local-mysql-server-through-socket)

我运行了建议的命令，将他们的 mysql 目录替换为

```
/usr/local/var/mysql 
```

然而，问题依然存在。帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:31:31.133

您的套接字可能是在非标准位置创建的。例如，我的 Homebrew 安装会创建它`/tmp/mysql.sock`。

如果您可以通过 TCP/IP 套接字连接到服务器，请运行以下命令：

```
SHOW VARIABLES LIKE '%sock%'; 
```

否则，请尝试在系统上的某个位置查找它：

```
find / -name mysql.sock 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-11T22:22:32.227

/etc/php.ini 中定义的默认套接字是什么？

尝试运行

```
cat /etc/php.ini | grep "mysql.default_socket" 
```

# android - Android中DialogFragment和FragmentActivity之间的通信

> ID：14821983
> 
> 赞同：4
> 
> 时间：2013-02-11T22:18:39.280
> 
> 标签：android, android-listview, android-dialog, android-fragmentactivity, android-dialogfragment

作为 Android Dev 的新手，我很难把这些点联系起来。我经常被困在如何从不同的片段、活动、类中获取特定的 id ——无论哪个。

例如。

我有一个`DialogFragment`包含一个`EditText`字段。我想在该字段中添加文本，然后单击将该字符串发送到`ListView`parent 中的a `FragmentActivity`。

这是`FragmentActivity`where 的代码`ListView`。

```
public class NewActivity extends FragmentActivity implements AddSiteDialog.AddSiteClick {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.add_site);

    Button b = (Button) findViewById(R.id.addSiteButton);
    b.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            showDialog();
        }
    });

    ListView siteListView = (ListView) findViewById(R.id.siteList);

}

public void showDialog() {

    DialogFragment newFragment = new AddSiteDialog();
    newFragment.show(getSupportFragmentManager(), "Dialog");

}

public void onSignIn(DialogFragment dialog) {

}

} 
```

这里是生活的`DialogFragment`地方`EditText`

```
public class AddSiteDialog extends DialogFragment {

public interface AddSiteClick {
    public void onSignIn(DialogFragment dialog);
}
AddSiteClick addSiteClick;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    Rect displayRectangle = new Rect();
    Window window = getDialog().getWindow();

    getDialog().requestWindowFeature(Window.FEATURE_NO_TITLE);
    window.getDecorView().getWindowVisibleDisplayFrame(displayRectangle);

    LayoutInflater layoutInflater = getActivity().getLayoutInflater();

    final View view;
    view = layoutInflater.inflate(R.layout.main, null);

    view.setMinimumWidth((int) (displayRectangle.width() * 0.95f));
    view.setMinimumHeight((int) (displayRectangle.height() * 0.88f));

    final EditText editText = (EditText) view.findViewById(R.id.siteEditText);

    editText.setHint("Enter URL");

    editText.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            editText.setCursorVisible(true);
            editText.setHint("");
           }
    });

    ((Button) view.findViewById(R.id.sign_in_button)).setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            addSiteClick.onSignIn(AddSiteDialog.this);
        }
    });

    ((Button) view.findViewById(R.id.cancel_button)).setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            getDialog().dismiss();

        }
    });
    return view;
} 
```

对事物如何相互通信的一个很好的解释将是一个很大的帮助。这个特定任务如何协同工作的代码示例也很棒。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T22:35:45.280

理想情况下，活动不需要知道任何有关 Fragment 实现方式的具体信息。出于这个原因，片段/活动的通信方式是通过接口和片段的公共方法。所有这些都在[开发人员指南的本节中介绍](http://developer.android.com/training/basics/fragments/communicating.html)。

简而言之，您将在对话框中使用单个方法（例如 onUserDataEntered）定义一个接口，并在 Activity 上实现它。当用户单击对话框中的按钮时，调用`onUserDataEntered(theData)`.

# javascript - Kendo UI Grid 上的分页不起作用

> ID：14821988
> 
> 赞同：5
> 
> 时间：2013-02-11T22:19:14.733
> 
> 标签：javascript, kendo-ui, kendo-grid

我正在显示一个带有远程数据的网格，如果我不添加分页，则会显示完整的数据集，当然这是不希望的。

以下是我用来在网格上显示数据的代码：

```
var ds = new kendo.data.DataSource({
    transport: {
        read: {
            url: "http://127.0.0.1:81/SismosService.svc/usuario/index",
            dataType: "json"
        }
    },
    schema: {
        data: "Response"
    },
    pageSize: 5
});
$("#usuariosGrid").kendoGrid({
    pageable: {
        refresh: true
    },
    columns: [
        { field: "UsuarioId", title: "ID", width: "100px" },
        { field: "Nombre", title: "Nombre", width: "100px" },
        { field: "ApellidoP", title: "Apellido Paterno", width: "100px" },
        { field: "ApellidoM", title: "Apellido Materno", width: "100px" },
        { command: [{ text: "Editar", click: editFunction }, { text: "Eliminar", click: deleteFunction }], title: " ", width: "200px" }
    ],
    dataSource: ds
}); 
```

这会呈现一个包含 5 个项目的网格，但仅此而已，我无法浏览其余条目。要显示的页面和项目数标记为零，禁用导航控件。

我在我的配置中遗漏了什么吗？感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T22:52:25.523

在服务器中完成分页时（检查[serverpaging](http://docs.kendoui.com/api/framework/datasource#serverpaging-booleandefault)），您需要返回记录总数。有关[`total`](http://docs.kendoui.com/api/framework/datasource#schematotal-functionstring)信息，请参阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-16T21:10:12.357

我有同样的问题，因为我误解了 serverPaging。如果将 serverPaging 设置为 true，则还必须修改服务器返回的内容。

以前，我让服务器返回所有数据。为了解决这个问题，我曾经`ToDataSourceResult`修改我的服务器返回的内容。

请参阅： [如何在 asp.net mvc 中的客户端 Kendo UI 网格中实现服务器端分页](https://stackoverflow.com/questions/12928744/how-to-implement-server-side-paging-in-client-side-kendo-ui-grid-in-asp-net-mvc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T01:29:15.890

在这个小问题上花一天时间，您所要做的就是返回记录总数，如果您的服务没有返回记录总数，请执行以下操作

```
schema: {
        data: "Response"
    },

total: function(response)
      {
        return response."your method name".length;
      } 
```

# spring - 带有 Maven 的 Spring MVC - java.lang.ClassNotFoundException: org.springframework.web.servlet.DispatcherServlet

> ID：14821991
> 
> 赞同：-1
> 
> 时间：2013-02-11T22:19:35.093
> 
> 标签：spring, maven, spring-mvc

我只是想在eclipse中设置一个简单的spring mvc项目（使用maven），但似乎不能。我收到以下异常：

```
SEVERE: Error loading WebappClassLoader
context: /BetPicker
delegate: false
repositories:
/WEB-INF/classes/
----------> Parent Classloader:
org.apache.catalina.loader.StandardClassLoader@95c083
org.springframework.web.servlet.DispatcherServlet
java.lang.ClassNotFoundException: org.springframework.web.servlet.DispatcherServlet
at    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1128)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Feb 11, 2013 9:58:10 PM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /BetPicker threw load() exception
java.lang.ClassNotFoundException: org.springframework.web.servlet.DispatcherServlet
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1128)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

对于这个问题，我遇到了许多向其他人建议的解决方案，但似乎都没有奏效。

我的 pom 中有 spring-mvc，它在 Maven Dependecies 中。

我的 web.xml 看起来像：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>BetPicker</display-name>

  <!-- Processes application requests -->
  <servlet>
    <servlet-name>betpicker</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>betpicker</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

 </web-app> 
```

我的 servlet-context.xml 看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Scans within the base package of the application for @Components to configure as beans -->
<!-- @Controller, @Service, @Configuration, etc. -->
<context:component-scan base-package="org.rory.betpicker" />

<!-- Enables the Spring MVC @Controller programming model -->
<mvc:annotation-driven /> 
```

我现在有点不知所措。任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T04:53:59.820

您的服务器在运行时没有解析 Spring Jars。请检查您的 WEB-INF/lib 以查看 jars 是否可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T03:20:10.263

需要：

```
<dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.2.3.RELEASE</version>
    </dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-12T10:23:55.103

1.  右键单击项目并选择属性
2.  选择/单击**部署程序集**并单击**添加**按钮
3.  选择**Java Build Path Entries**并单击**Next**
4.  选择**Maven 依赖项**

# css - CSS 浮动 div 元素问题

> ID：14821993
> 
> 赞同：1
> 
> 时间：2013-02-11T22:19:38.890
> 
> 标签：css, html, floating

我已经对我的网站进行了一些编码，但我注意到我必须进行愚蠢的大调整才能让事情很好地融合在一起，我相信这是因为我有 2 个浮动元素并且浮动正在携带到下一组 div即使没有嵌套！！

有谁知道为什么会发生这种情况以使事情变得更简单到目前为止我已经使它生效了我在这个例子中所做的事情你会注意到（如果你的显示器足够宽）文本“你有特殊要求吗？” “Do”在页面的一半左右吗？

我认为问题在于 div 标签“bannerleft”和“bannerright”之后我认为浮动继续并破坏了一切？我可能是错的

这是现场示例[Here](http://jordan.xronn.co.uk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:27:15.253

这是因为您还没有清除浮动（有问题的两个 div）.. 只需添加

```
<div style="clear: both;"></div> 
```

在bannerright/bannerleft div之后清除浮动并允许文档的其余部分尊重这些浮动元素..当您浮动某些东西时，您会将其从“流程”中取出

[阅读](https://developer.mozilla.org/en-US/docs/CSS/clear)MDN 的此链接以获取有关清除浮动的更多信息。

PS（清除浮动有很多不同的方法，比我提供的方法更干净一些，我只是为了简单起见）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:26:41.667

尝试：

```
.clearfix {
clear: both;
} 
```

在最后一个浮动元素上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:31:58.660

Nat，这在 Firefox 中没有发生。尝试在你的身体标签上放置一个最大或最小宽度，可能是 980 像素，并且还包括溢出：隐藏在身体标签上。

# scala - 在 Lift 中发出 Ajax 请求

> ID：14821994
> 
> 赞同：0
> 
> 时间：2013-02-11T22:19:41.967
> 
> 标签：scala, lift, lift-json

我正在尝试 Lift Web 框架，但我很难理解一个基本方面。

我的 localhost:8080 上运行了电梯 2.5 M4。如何使用某些参数发出 CURL 请求，例如 localhost:8080?category=apples&name=flowers，在 Scala 中获取这些参数，基于这些参数执行 Mongo 查询并为 Ajax 客户端显示 JSON 输出？

创建页面并获取请求标头和参数的非常基本的示例会很棒。

该页面必须是 REST 服务类型。这意味着它没有使用 Lift 的模板系统来生成按钮等，如 Lift Cookbook 示例所示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T00:47:03.960

Simply Lift 上有一个[示例](http://simply.liftweb.net/index-5.2.html#toc-Section-5.2)，它应该可以工作并为您提供 JSON / XNK 输出，而无需涉及模板系统。

如果您需要在回调中获取参数，只需使用`net.liftweb.http.S.param(name)`，它会给您一个`Box[String]`，其中保存参数（如果存在）。

# php - 翻译日期（“d FY（H：i）函数php

> ID：14821998
> 
> 赞同：16
> 
> 时间：2013-02-11T22:19:49.477
> 
> 标签：php, wordpress, date

我是巴西人，有一个 wordpress 插件使用

```
" . date("d F Y (H:i)",$date) . " 
```

输出：**2013 年 1 月 16 日 (00:54)**

但它应该是 16 Janeiro 2013 (00:54)，在葡萄牙语中......我该如何更改它？

PS：我认为日期可能是由插件创建者提供的外部文件设置的：p 我不确定

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-12T07:54:45.587

WordPress 必须[`date_i18n`](https://developer.wordpress.org/reference/functions/date_i18n/)根据时间戳以本地化格式检索日期。

尝试：

```
echo date_i18n("d F Y (H:i)", $timestamp); 
```

WordPress 有一个关于如何[格式化日期和时间](https://wordpress.org/support/article/formatting-date-and-time/)的详细页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-07T20:41:36.457

对于法语我使用这个

```
setlocale(LC_ALL, 'fra');

echo strftime("%A %d %B %Y",time()); 
```

对于葡萄牙语

```
setlocale(LC_ALL, 'ptg');  //

echo strftime("%A %d %B %Y",time()); 
```

请参阅[语言字符串国家/地区字符串](http://msdn.microsoft.com/en-us/library/cdax410z(v=vs.90).aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T22:22:17.283

的文档[`date`](http://php.net/manual/en/function.date.php)已经回答了这个问题：

> 要格式化其他语言的日期，您应该使用 setlocale() 和 strftime() 函数而不是 date()。

并`strftime`说做事的方法是使用[`setlocale`](http://www.php.net/manual/en/function.setlocale.php)：

> 根据区域设置格式化时间和/或日期。月份和工作日名称以及其他与语言相关的字符串尊重使用 setlocale() 设置的当前语言环境。

也就是说，C 语言环境感知函数没有为[具有 case](http://en.wikipedia.org/wiki/Grammatical_case)的语言提供足够的功能。在这种情况下（即大部分时间），您需要自己动手。