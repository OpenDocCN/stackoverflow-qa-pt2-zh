# StackOverflow 问答 15508000-15508999

# sitecore - 从序列化物料创建包

> ID：15508006
> 
> 赞同：2
> 
> 时间：2013-03-19T18:48:05.687
> 
> 标签：sitecore, sitecore6

有没有人有从序列化的 .item 文件创建 Sitecore 包的代码片段或信息？其他要求是，这需要在没有 Sitecore 上下文或访问任何 Sitecore 数据库的情况下完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T19:55:22.180

查看[Sitecore Courier](https://github.com/adoprog/Sitecore-Courier)共享源模块。它只是将两个文件夹与序列化项目进行比较并创建一个差异包。

# mysql - 结果表的预览架构

> ID：15508013
> 
> 赞同：0
> 
> 时间：2013-03-19T18:48:33.307
> 
> 标签：mysql

我正在为 MySQL 构建一个数据库接口。假设有表 A 和表 B。我想知道表的（A 连接 B）结果模式，而不执行实际的连接操作（在某些情况下这可能很耗时）。这在 SQL 中可能吗？

# sql - 如何在初始数据库设置期间为不存在的表创建 FOREIGN KEYS？

> ID：15508014
> 
> 赞同：4
> 
> 时间：2013-03-19T18:48:35.387
> 
> 标签：sql

我有一个最初使用 SQLite 开发的小型数据库。当用户最初启动应用程序时，我的桌面应用程序会自动设置数据库表。

**问题** 几个表有 FOREIGN KEY 约束。假设我有表 A、表 B 和表 C。A 与 C 有 FOREIGN KEY 约束。但是当我进行初始表生成时，每次都会抛出 SQLExceptions 说如下内容：

> 约束“SQL130319142644383”无效：引用的表 PREDICTIONRUN 不存在。

（注意：由于其他外键问题，我不能简单地重新组织表。）

那么，如何创建具有 FOREIGN KEY 约束的表呢？

例子

```
if (! this.checkIfTableExists("DocumentClassification", conn)) {
                sql.setLength(0) ;
                sql.append("CREATE TABLE DocumentClassification (  " ) ;
                if (dbtype.equalsIgnoreCase("javadb")) {
                    sql.append("    classificationid INTEGER PRIMARY KEY NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1) , " ) ; 

                } else {
                    sql.append("    classificationid INTEGER PRIMARY KEY, " ) ; 
                }
                sql.append("       classid INTEGER, " ) ;
                sql.append("       documentid INTEGER,  " ) ;
                sql.append("       predictionrunid INTEGER, " ) ;

                sql.append("       matterid VARCHAR(512), " ) ;
                sql.append("       datereadable VARCHAR(2048),  " ) ;
                sql.append("       date BIGINT,  " ) ;
                sql.append("       note VARCHAR(" + maxint + "),  " ) ;
                sql.append("       FOREIGN KEY ( classid) REFERENCES Classes (ClassID)," ) ;
                sql.append("       FOREIGN KEY ( documentid) REFERENCES MatterDataset (id),  " ) ;
                sql.append("       FOREIGN KEY (predictionrunid) REFERENCES PredictionRun (predictionrunid)" ) ;
                sql.append("    )  " ) ;
                // Create the table
                sqlstatement.executeUpdate(sql.toString()); 
            } 
```

**使用的数据库** JavaDB/Derby SQLite（通过 Xerial 驱动程序）（这里没有问题，因为 SQLite 似乎没有强制执行创建约束）

**开发** Java 7

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T18:49:45.300

> 假设我有表 A、表 B 和表 C。A 与 C 有 FOREIGN KEY 约束。

简单的解决方案是在表 A 之前创建表 C。

在某些情况下您不能这样做：例如，两个表具有彼此的外键。这些情况是相当不寻常的。如果遇到一个，您可以创建没有外键的表。创建所有表后，您可以`alter table`将外键放入：

```
alter table YourTable add constraint FK_YourTable_Column1
    foreign key references OtherTable(Column1) 
```

# c# - 如何禁用抑制 TFS 构建中一种解决方案的警告

> ID：15508024
> 
> 赞同：1
> 
> 时间：2013-03-19T18:49:13.390
> 
> 标签：c#, msbuild, tfsbuild

我正在使用 TFS 2010 并有一个 TFS 构建设置来构建我们的软件。一切正常。

但是，我们收到以下警告：

```
CSC: Assembly generation -- Referenced assembly 'mscorlib.dll' targets a different processor 
```

这是因为我们的某些代码仅标记为 x86，并且它是在 x64 平台上构建的。由于我们链接到的第三方软件，我们无法更改目标平台。此外，我们的目标是 2.0 框架，此时也无法更改。

所以，我想简单地抑制这个错误。似乎很直截了当。我只是编辑了 Build 模板，并添加了 /p:NoWarn=1607。这样可行。

但！

我们有一个用 VB.net 而不是 C# 编写的解决方案。这会导致该解决方案失败并出现以下错误：

```
vbc: warning number '1607' for the option nowarn is either not configurable or not valid 
```

如何在我的 TFS 构建中禁用抑制该解决方案的此警告？我试图`<customPropertiesForBuild>`在我的 TFSBuild.proj 文件中使用一个标签，但我可能没有正确使用它。

我知道我可以简单地将它添加到我的项目文件中，但我们有 37 个解决方案，每个解决方案都有多个项目文件，所以我真的不想这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:38:28.520

我认为您无法控制 TFS 的抑制，因为它是 MSbuild 在构建期间抱怨（并且 TFS 只是调用 MSBuild 并收集结果）。

有一个特定的属性告诉 msbuild 忽略这种警告。只需将以下行添加到`Propertygroup`项目文件的顶部，以用于生成警告的项目：

```
<PropertyGroup>
   ...
   <ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>None</ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>
</PropertyGroup> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T20:54:27.493

您应该能够使用VB 解决方案的**SolutionToBuild项上的****属性**元数据将 NoWarn 设置为仅针对该解决方案的空值：

 **```
<SolutionToBuild Include="$(BuildProjectFolderPath)/../../MyVbSolution.sln">
  <Targets></Targets>
  <Properties>NoWarn=;</Properties>
</SolutionToBuild> 
```

试试看，看看您的 VB 解决方案是否可以无错误地编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T20:32:27.953

您可以在 TFS Build 中向 MSbuild 提供 NoWarn 属性。一个想法也是编辑构建定义，在“进程”选项卡中，探索 Advanced=>MSBuild Arguments，然后在没有 qoutes 的情况下提供此“/p:NoWarn=1607”。当您还对构建进行排队时，在 Parameters Tab=>Advanced=>MSBuild Arguments 中，输入/p:NoWarn=1607。**

# if-statement - CoffeeScript 字符串比较

> ID：15508037
> 
> 赞同：14
> 
> 时间：2013-03-19T18:49:44.577
> 
> 标签：if-statement, coffeescript

在 CoffeeScript 中，有没有办法简化以下内容：

```
if(value === "something" || value === "else" || value === "wow"){} 
```

我试过了：

```
if value is "something" or "else" or "wow" 
```

但这会产生以下文字输出：

```
if(value === "something" || "else" || "wow){} 
```

**有没有办法检查一个字符串是否是 CoffeeScript 中的多个值（OR 或 AND）之一？**

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-19T19:19:47.750

我想你可能想要

```
if value in ['something', 'else', 'wow'] 
```

# php - 使函数对 switch 语句可见

> ID：15508038
> 
> 赞同：0
> 
> 时间：2013-03-19T18:49:44.920
> 
> 标签：php, scope

我在 PHP 中有一个函数，基本上看起来像这样

```
$to_echo = prepare(2);
echo $to_echo;

function prepare($id){

    switch($id){
        case 1:
        $res = format1();
            break;
        case 2:
        $res = format2();
            break;
    }

    function format1(){
        return "asdf";
    }

    function format2(){
        return "1234";
    }

    return $res;

} 
```

但我得到了错误`Fatal error: Call to undefined function format2() in line...`

可以在switch语句中以某种方式`$res`看不到函数吗？我怎样才能让它访问该功能？`format1``format2`

[它在 javascript 中是这样工作的](http://jsbin.com/onuxaf/1/edit)，但是 PHP 有很多我不明白的地方，所以也许这根本不是问题；

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T18:52:15.810

你可以这样试试：

```
$to_echo = prepare(2);
echo $to_echo;

function prepare($id){
switch($id){
    case 1:
    $res = format1();
    return $res;
    break;
    case 2:
    $res = format2();
    return $res;
    break;
}

}

function format1(){
    return "asdf";
}

function format2(){
    return "1234";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:02:25.950

嵌套函数直到调用函数 prepare(...) 后才出现`format1()`。然而，在当前序列中，这些函数的声明发生在. 因此他们没有准时到场。`format2()``declared``switch-statement`

您应该尝试将这些函数声明放在 prepare(...) 函数的顶部，或者根本不使用嵌套。我会推荐后者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T18:59:21.987

您的代码的问题是函数（在函数内时）需要在使用**前**声明：

```
function prepare($id){
  function format1(){..}
  function format2(){..}
  //do prepare here
  switch($id){..}
} 
```

但是，如果您在函数之外声明函数，它们可以在函数之前或之后。

```
function format1(){..}
function prepare($id){..}
function format2(){..} 
```

# c# - 如何扩展基类功能

> ID：15508040
> 
> 赞同：1
> 
> 时间：2013-03-19T18:49:46.560
> 
> 标签：c#, inheritance

我有一堂课：

```
public class Person {
    public string FirstName = "";
    public string LastName = "";
} 
```

和派生类：

```
public class HRPerson : Person {
    public string GetSomething() {
      //calculate something
    }
} 
```

本质上，我想扩展基类的功能。使用看起来像这样，`GetAllPerson`返回`List<Person>`.

```
class Program
{
     static List<HRPerson> GetAllHRPerson()
     {
         List<HRPerson> HRPersonList = new List<HRPerson>();
         foreach (Person person in GetAllPerson)
         {
             HRPersonList.Add(person);
         }
         return HRPersonList;
     }
} 
```

它没有编译，说参数没有重载，当我尝试将 person 转换为`HRPerson`时，我收到运行时错误“无法将类型的对象`Person`转换为类型`HRPerson`”错误。

我该如何添加这样的附加功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T18:51:33.480

听起来你`GetAllPerson`正在返回一些非人力资源人员......

假设是这种情况并且您只想过滤掉它们，那么使用 LINQ 的[`OfType`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)方法是最简单的：

```
static List<HRPerson> GetAllHRPerson()
{
    return GetAllPerson().OfType<HRPerson>().ToList();
} 
```

（旁注：请避免像这样的公共字段，除了常量。字段应该是实现细节，而不是公共 API 的一部分。）

当然，如果您的`Person`实例实际上都不是 的实例`HRPerson`，那将无济于事。实例创建后就无法更改其类型。目前尚不清楚您的情况是什么-如果此答案对您没有帮助，请提供更多详细信息。

编辑：我仍然不确定您是否需要扩展方法，但如果您这样做，它将类似于：

```
public static class PersonExtensions
{
    public static string GetSomething(this Person person)
    {
        // Do something with the given Person
    }
} 
```

然后，您可以在 any 上调用它，就`Person`好像它是一个实例方法一样：

```
Person person = ...;
string something = person.GetSomething(); 
```

但这*不是*多态的——这并不是说你要改变`Person`对象的任何东西，你的描述仍然让它听起来像你真的想要做的……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:34:09.860

根据您对 Jon Skeet 的回答的评论，这是您正在寻找的内容：

创建 Person 的子类，例如 NamedPerson。给 NamedPerson 一个 GetFullName 方法，它返回 Person 的全名。

然后从 NamedPerson 创建一个子类 HRPerson，并覆盖 GetFullName 以返回格式略有不同的名称。CCPerson 也将是 NamedPerson 的子类。

您无法控制 Person，但您可以完全控制 NamedPerson。那么你想要的是一个 NamedPersons 的列表，而不是 HRPersons 的列表。该列表可以包含裸 NamedPersons、HRPersons 或 CCPersons，但列表中的所有对象都是 NamedPersons 或其子类，因此它们都将具有 GetFullName。

# ios - 我应该在这里使用 awakeFromNib 还是 initWithCoder ？

> ID：15508041
> 
> 赞同：36
> 
> 时间：2013-03-19T18:49:49.597
> 
> 标签：ios, objective-c, cocoa-touch

我的初始视图控制器已加载，我需要一个 NSArray 来初始化，我应该在`awakeFromNib`方法或`initWithCoder:`方法中处理这个问题吗？awakeFromNib 似乎工作得更好，因为我不需要返回任何东西，但它的工作原理是 nib 文件是以前使用的对吗？我不想使用很快就会中断的方法。

看起来`initWithCoder:`像：

```
- (id)initWithCoder:(NSCoder *)decoder {
    if (self = [super initWithCoder:decoder]) {
        self.articles = [[NSMutableArray alloc] init];
    }

    return self;
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-19T19:03:13.710

的重点`-awakeFromNib`是，当您可以确定与 nib 中其他对象的所有连接都已建立时，您可以执行初始化操作。

> nib 加载基础架构向从 nib 存档重新创建的每个对象发送 awakeFromNib 消息，但前提是存档中的所有对象都已加载和初始化。当一个对象收到一个 awakeFromNib 消息时，它保证已经建立了它的所有出口和动作连接。

别忘了打电话`super`。

它不太可能很快消失，如果它做了这么多代码使用它，那么过渡期就会很长。是的，它的名字来自旧的“nib”文件格式，但[这个堆栈溢出问题](https://stackoverflow.com/questions/3726400/what-is-the-difference-between-nib-and-xib-interface-builder-file-formats)清除了文件扩展名的差异。

因此，总而言之，当您为类设置内部实例变量时，任何一种方法都适用于您。请注意，在`init`方法内部（包括`-initWithCoder`），如果 setter 依赖于完全初始化的类（源 WWDC 2012 video move to modern objective-c），使用您的 setter 方法可能不安全。一个例子是设置一个引用 nib 文件中另一个对象的属性。

In `UIViewController`subclasses`-initWithCoder`仅在从情节提要加载时调用。`-awakeFromNib`不管你是否使用故事板，使用它可能更有意义。

您可以考虑的另一种模式是lazy-getter：

```
- (NSMutableArray *)articles{
    if (_articles){
        return _articles;
    }
    _articles = [[NSMutableArray alloc] init];
    return _articles;
} 
```

这种方法的好处是，如果您想对阵列进行进一步的设置，您可以在不再需要阵列时轻松丢弃阵列，并且在下次访问该属性时再次获​​得一个新的阵列。

# php - 无法在模型类中获取数据库实例

> ID：15508043
> 
> 赞同：1
> 
> 时间：2013-03-19T17:14:52.680
> 
> 标签：php, oop, model-view-controller, singleton

一个类的 __construct() 方法是否需要公开才能在另一个类中调用该类的静态方法？

我试图通过调用数据库类的静态方法在我的模型类（MVC 应用程序）中获取数据库实例。这个 Database 类的构造函数是私有的，以便具有单例模式。但是当我尝试在我的模型类中调用静态方法时，它似乎会产生干扰。

当我将数据库构造函数设置为公共时，它可以工作。但是，它不再是真正的单例模式了。

有什么建议么？

**数据库类：**

```
class Database extends PDO {

    private static $instance;
    private $dsn;
    private $user;
    private $pass;

    public function __construct() {
        $this->dsn  = DB_ENGINE .':host='. DB_HOST .';dbname='. DB_NAME;
        $this->user = DB_USER;
        $this->pass = DB_PASS;
        parent::__construct($this->dsn, $this->user, $this->pass);
    }

    public static function getInstance()
    {
        if (!isset(self::$instance)) {
            $object = __CLASS__;
            self::$instance = new $object;
        }
        return self::$instance;
    }

    /**
     * select
     * @param string $sql An SQL string
     * @param array $array Paramters to bind
     * @param constant $fetchMode A PDO Fetch mode
     * @return mixed
     */
    public function select($sql, $fetchMode = PDO::FETCH_ASSOC, $array = array())
    {
        $stmt = $this->prepare($sql);
        foreach ($array as $key => $value) {
            $stmt->bindValue("$key", $value);
        }

        $stmt->execute();
        return $stmt->fetchAll($fetchMode);
    }

    /**
     * insert
     * @param string $table A name of table to insert into
     * @param string $data An associative array
     */
    public function insert($table, $data)
    {
        ksort($data);

        $fieldNames = implode(', ', array_keys($data));
        $fieldValues = ':' . implode(', :', array_keys($data));

        $stmt = $this->prepare("INSERT INTO $table ($fieldNames) VALUES ($fieldValues)");

        foreach ($data as $key => $value) {
            $stmt->bindValue(":$key", $value);
        }

        $stmt->execute();
    }

    /**
     * update
     * @param string $table A name of table to insert into
     * @param string $data An associative array
     * @param string $where the WHERE query part
     */
    public function update($table, $data, $where)
    {
        ksort($data);

        $fieldDetails = NULL;
        foreach ($data as $key=> $value) {
            $fieldDetails .= "$key=:$key,";
        }
        $fieldDetails = rtrim($fieldDetails, ',');

        $stmt = $this->prepare("UPDATE $table SET $fieldDetails WHERE $where");

        foreach ($data as $key => $value) {
            $stmt->bindValue(":$key", $value);
        }

        $stmt->execute();
    }

    /**
     * delete
     * 
     * @param string $table
     * @param string $where
     * @param integer $limit
     * @return integer Affected Rows
     */
    public function delete($table, $where, $limit = 1)
    {
        return $this->exec("DELETE FROM $table WHERE $where LIMIT $limit");
    }

} 
```

**型号类：**

```
class Model {

    protected $db;

    public function __construct() {
        $this->db = Database::getInstance();
    }

} 
```

# java - 在JAVA中相加，相乘并找到具有最低值的数字

> ID：15508060
> 
> 赞同：-4
> 
> 时间：2013-03-19T18:50:48.053
> 
> 标签：java

将 10 个整数写入 TextField，如下所示：1、2、3、...。单击 + 按钮（您创建的）后，它将对 jLabel 中的数字求和，然后有一个 * 按钮将所有数字相乘并将它们打印在单独的 jLabel 中，然后有一个最小值按钮，它将显示数组中的数字在另一个单独的 jLabel 中具有最低值。

是的，对不起，我没有说清楚。我只需要知道最后一部分的代码是什么，即 MINIMUM 部分。我尝试了 java.lang.Math_MIN （不知道它是否写得正确）并且我尝试了长度运算符，但它们都不起作用...注意：它是在 NetBeans 中完成的，而且我不是来自英语国家，所以如果我发给你它的代码部分是我的语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:15:18.700

这是总和，其余的应该很容易。

```
btnPlus = new JButton("+");
        btnPlus.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                String nums = textField.getText();

                if (nums.matches("[0-9]+") && nums.length() == 10) {

                    char[] charArray = nums.toCharArray();
                    int sum = 0;

                    for (int i = 0; i < charArray.length; i++) {
                        sum += Character.getNumericValue(charArray[i]);
                    }
                    label_1.setText(Integer.toString(sum));
                }
            } 
```

# c# - 如何将 Graphics.DrawString 与 C# 中未安装的字体一起使用

> ID：15508067
> 
> 赞同：2
> 
> 时间：2013-03-19T18:51:24.603
> 
> 标签：c#, truetype, drawstring, opentype

**环境**：Windows 7 Pro、C#、WinForms

如果安装了字体，我成功地使用 Drawstring 将文本字符串写入 PictureBox。 ***<== 下面的代码工作得很好......***

我还希望能够从从文件系统（又名，未安装）动态加载的字体文件中写入文本字符串 ***<== 下面的代码不起作用...***

理想情况下，我想同时支持 TrueType 和 OpenType。

谢谢，杰森

```
PointF pointF = new PointF(5, 5);
SolidBrush solidBrush = new SolidBrush(Color.Black);

FontFamily[] fontFamilies;
PrivateFontCollection privateFontCollection = new PrivateFontCollection();

// Add the font file to the private collection.
try
{
    privateFontCollection.AddFontFile(FontFileName);
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message.ToString(), "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
    throw;
}

fontFamilies = privateFontCollection.Families;

e.Graphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
e.Graphics.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
e.Graphics.TextRenderingHint = TextRenderingHint.AntiAlias;

FontStyle[] fontStyles = { FontStyle.Regular, FontStyle.Bold, FontStyle.Italic, FontStyle.Bold | FontStyle.Italic,
                             FontStyle.Underline, FontStyle.Strikeout };

foreach (FontFamily fontFamily in fontFamilies)
{
    foreach (FontStyle fontStyle in fontStyles)
    {
        if (fontFamily.IsStyleAvailable(fontStyle))
        {
            Font font = new Font(fontFamily.Name, NewFontSize, fontStyle, GraphicsUnit.Pixel); 
```

***// << "font" 加载为 MS Sans Serif，如果 Font 没有安装 >>***

```
 Size fontDisplayDimensions = TextRenderer.MeasureText(SampleText, font);

            // Draw sample text in font
            e.Graphics.DrawString(SampleText, font, solidBrush, pointF);

            // Move the starting point for the next FontFamily "down" for the just drawn font's height 
            pointF.Y += font.Height;
        }
    }

    // Separate the families with white space.
    pointF.Y += 10;
} 
```

# ios - 自定义单元格内对象的选择器

> ID：15508068
> 
> 赞同：0
> 
> 时间：2013-03-19T18:51:28.523
> 
> 标签：ios, objective-c, uitableview

我在自定义单元格中有一个开关。该开关被分配并设置为自定义单元格的 .m 文件内的单元格的附件视图。

但是，我需要在自定义单元格所在的 tableView 的 ViewController 中处理开关的选择器方法。

目前，当单击开关时，我遇到了无法找到选择器的崩溃，很可能是因为它在单元格的 .m 中查找。

如何声明我的开关使其选择器位于正确的位置？

*根据要求*编辑...**

 *```
//cell .m
- (void)setType:(enum CellType)type
{
    if (_type == SwitchType)
    {
         UISwitch *switchView = [[UISwitch alloc] init];
         [switchView addTarget:self action:@selector(flip:) forControlEvents:UIControlEventValueChanged];
         self.accessoryView = switchView;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:01:15.360

听起来像是[代表](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)的工作。在您的单元界面中创建一个协议，例如：

```
@protocol MyCellDelegate <NSObject>
- (void)myCell:(MyCell *)sender switchToggled:(BOOL)value;
@end 
```

并指定一个代表

```
id <MyCellDelegate> delegate; 
```

然后在您的 MyCell.m 中，当切换开关时，检查是否定义了委托，如果定义了，则调用它：

```
if (self.delegate != nil && [self.delegate respondsToSelector:@selector(myCell:switchToggled:)]) {
    [self.delegate myCell:self switchToggled:switch.value]
} 
```

并且在您的 ViewController 中确保将 ViewController 设置为单元的委托并实现协议方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:59:08.107

您可以将开关创建为公共属性，然后将其目标设置为`cellForRowAtIndex:`

```
@interface CustomCell : UITableViewCell

@property (nonatomic, strong) UISwitch *switch; 
```

或者您可以创建一个`NSNotification`被触发的自定义。并让您的 viewController 监听通知然后处理它。

**Blocktastic :)**

你也可以看中积木。

```
typedef void(^CustomCellSwitchBlock)(BOOL on);

@interface CustomCell : UITableViewCell

@property (nonatomic, readwrite) CustomCellSwitchBlock switchAction; 
```

然后在你的`CustomCell.m`：

```
- (void)handleSwitch:(UISwitch *)switch
{
    switchAction(switch.on);
} 
```

然后在你的`cellForRowAtIndex:`：

```
cell.action = ^(BOOL on){
    if (on) {
        // Perform On Action
    } else {
        // Perform Off Action
    }
}; 
```*

# plugins - Firebreath 1.6 是否支持 Internet Explorer 10？

> ID：15508070
> 
> 赞同：0
> 
> 时间：2013-03-19T18:51:31.520
> 
> 标签：plugins, activex, internet-explorer-10, firebreath

有人知道在 IE10 上使用 firebreath-built 插件是否存在一些基本问题？

我使用 FB 1.6 构建的插件在 Windows 7 上的 IE9 上运行良好，在 Windows 8 经典桌面上的 IE10 上不再运行。我怀疑 ActiveX 界面有问题。我在 Win8 经典版上安装了 Chrome，插件在该浏览器上运行正常。

诚然，我还没有很多调试细节。但我想看看在深入了解 FB 代码之前是否有任何我应该注意的一般性问题。

非常感谢。

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:36:27.987

我知道没有根本的不兼容性，但是我们的插件在 IE10 中似乎确实存在一些我还没有找到的绘图问题。

如果您可以更具体地了解“不再有效”的含义，那么给您一些建议可能会更容易。

加载失败吗？无法与 javascript 对话？画不出来（像我们的一样）？浏览器崩溃？凝结你的牛奶并使你的信用卡消磁？唱披头士的歌曲走调？

如果没有一些迹象表明究竟出了什么问题，很难知道该告诉你什么。

# eclipse - STS 中 Spring 和 Spock 的 Maven 配置

> ID：15508073
> 
> 赞同：1
> 
> 时间：2013-03-19T18:51:36.293
> 
> 标签：eclipse, spring, maven-3, spock

我有以下用于 spock 的 Maven 配置。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>org.test</groupId>
<artifactId>spock</artifactId>
<packaging>jar</packaging>
<version>1.0-SNAPSHOT</version>
<name>spock</name>
<url>http://maven.apache.org</url>

<properties>
    <!-- <maven.test.search.classdir>true</maven.test.search.classdir> -->
    <targetJdk>1.6</targetJdk>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <spring.version>3.2.1.RELEASE</spring.version>
</properties>

<dependencies>
    <!-- testing with spock -->
    <dependency>
        <groupId>org.spockframework</groupId>
        <artifactId>spock-core</artifactId>
        <version>0.6-groovy-1.8</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.codehaus.groovy</groupId>
        <artifactId>groovy</artifactId>
        <version>2.1.1</version>
        <scope>test</scope>
    </dependency>

    <!-- spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${spring.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>

</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.gmaven</groupId>
            <artifactId>gmaven-plugin</artifactId>
            <version>1.3</version>
            <configuration>
                <providerSelection>1.7</providerSelection>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>testCompile</goal>
                    </goals>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>org.codehaus.gmaven.runtime</groupId>
                    <artifactId>gmaven-runtime-1.7</artifactId>
                    <version>1.3</version>
                    <exclusions>
                        <exclusion>
                            <groupId>org.codehaus.groovy</groupId>
                            <artifactId>groovy-all</artifactId>
                        </exclusion>
                    </exclusions>
                </dependency>
                <dependency>
                    <groupId>org.codehaus.groovy</groupId>
                    <artifactId>groovy-all</artifactId>
                    <version>1.8.6</version>
                </dependency>
            </dependencies>
        </plugin>

    </plugins>
</build> 
```

它在终端中运行良好，但在 STS/Eclipse 中，IDE 向我显示以下错误：

```
Plugin execution not covered by lifecycle configuration: org.codehaus.gmaven:gmaven-plugin:1.3:testCompile (execution: default, phase: test-compile) 
```

我不确定要添加什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-01T17:53:19.077

你可以试试，

```
 <plugin>
        <groupId>org.codehaus.gmavenplus</groupId>
        <artifactId>gmavenplus-plugin</artifactId>
        <version>1.5</version>
        <executions>
            <execution>
                <goals>
                    <!-- Adds Groovy tests source to project's test source -->
                    <goal>addTestSources</goal>
                    <!-- Compiles spock tests -->
                    <goal>testCompile</goal>
                </goals>
            </execution>``
        </executions>
    </plugin> 
```

并且还切换到 IntelliJ。这是一个非常好的IDE。

# c# - 我可以阻止 ListBox.RefreshItem(object item) 删除和重新添加对象吗？

> ID：15508074
> 
> 赞同：0
> 
> 时间：2013-03-19T18:51:36.773
> 
> 标签：c#, listbox

我遇到的问题是，当我更新对象时，ListBox 会自动删除然后将对象重新添加到列表中，从而调用索引和值更改事件。我可以通过创建自定义 ListBox 控件来防止这种情况发生，当调用 PropertyChangedEvent 时，我会引发一个标志，以防止调用基类中的这些事件。现在发生的情况是，我的整个引用都被新引用替换了，除非我重新选择 ListBox 中的项目，否则我的引用是错误的。

我基本上想要做的是更改我的对象中的显示值，然后让它只更新列表框中的文本。我不希望它删除并重新添加对象/引用/无论它做什么。这很烦人。

这是我正在使用的示例代码...

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        this.myListBox1.SelectedValueChanged += this.onchange;
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        this.myListBox1.Add(new strobj("z"));
        this.myListBox1.Add(new strobj("a"));
        this.myListBox1.Add(new strobj("b"));
        this.myListBox1.Add(new strobj("f"));
        this.myListBox1.Add(new strobj("n"));
        this.myListBox1.Add(new strobj("h"));
        this.myListBox1.Add(new strobj("p"));
        this.myListBox1.Add(new strobj("t"));
        this.myListBox1.Add(new strobj("c"));
        this.myListBox1.Add(new strobj("q"));
    }

    private void onchange(object sender, EventArgs e)
    {
        MessageBox.Show("Hello World");
    }

    int i = 0;
    private void button1_Click(object sender, EventArgs e)
    {

        if (this.myListBox1.SelectedItem != null)
        {
            strobj item = (strobj)this.myListBox1.SelectedItem;
            item.Name1 = i++.ToString();
        }
    }
}

public partial class MyListBox
{
    public MyListBox()
    {
        InitializeComponent();
    }

    public void Add(strobj item)
    {
        item.OnNameChanged += this.MyDispalyMemberChanged;
        this.Items.Add(item);
    }

    bool refreshing = false;
    public void MyDispalyMemberChanged(strobj itemChanged)
    {
        this.refreshing = true;
        this.RefreshItem(this.Items.IndexOf(itemChanged));
        this.refreshing = false;
    }

    protected override void OnSelectedValueChanged(EventArgs e)
    {
        if (!this.refreshing)
        {
            base.OnSelectedValueChanged(e);
        }
    }
}

class strobjCollection : List<strobj>
{
    NameChangeEventHandler NameChangedEvent;
}

delegate void NameChangeEventHandler(strobj sender);

public class strobj
{
    internal NameChangeEventHandler OnNameChanged;

    private string _Name1;
    public string Name1
    {
        get { return this._Name1; }
        set
        {
            this._Name1 = value;
            if (this.OnNameChanged != null)
            {
                this.OnNameChanged(this);
            }
        }
    }

    public int i = 0;
    public string str = "p";

    public strobj(string name)
    {
        this._Name1 = name;
    }

    public strobj()
    {
        this._Name1 = "You did not create this object";
    }

    public override string ToString()
    {
        return this._Name1;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:54:53.983

这就是`INotifyPropertyChanged`界面的用途。

您无需引发自定义事件，而是使用您在事件参数中设置的更改的属性的名称引发 PropertyChanged 事件，并且列表框将更新。

[请参阅 MSDN。](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

# servicestack - 我绕过了servicestack来实现我自己的IHTTPHandler，但现在我想访问缓存

> ID：15508077
> 
> 赞同：2
> 
> 时间：2013-03-19T18:51:45.120
> 
> 标签：servicestack

我已经想出了如何绕过 ServiceStack 来实现我自己的 HTTP 处理程序来提供文件作为下载，并且运行良好。但是，我想知道，既然我在服务堆栈之外，我是否可以以某种方式访问​​缓存。

下面是我如何注册我的自定义 IHTTPHandler：

```
 SetConfig(new EndpointHostConfig
                {
                    RawHttpHandlers = new List<Func<IHttpRequest, IHttpHandler>>()
                    {
                        req => {
                            if (req.PathInfo.Contains("filetest"))
                                return new MP4DownloadHandler();
                            return null;
                        }
                    }
                }); 
```

我可以从 MP4DownloadHandler 类的 ProcessRequest 成员访问 ServiceStack 的缓存 (ICacheClient) 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T20:03:46.650

是的，您可以通过单例访问任何 ServiceStack 的依赖项：

```
AppHostBase.Resolve<ICacheClient>(); 
```

它着眼于 ASP.NET ServiceStack AppHost 中的 IOC。

适用于所有 ServiceStack AppHosts 的相同示例是：

```
EndpointHost.AppHost.TryResolve<ICacheClient>(); 
```

# php - 从会话信息中删除项目

> ID：15508080
> 
> 赞同：1
> 
> 时间：2013-03-19T18:51:58.507
> 
> 标签：php, arrays, codeigniter, session

我正在使用 编写这个项目`CodeIgniter`，您可以在其中添加和删除存储桶中的项目，例如网上商店。

我的会话类中有一个数组，我想做的是按 id 搜索元素并删除它们。

```
public function removeRow($id) {
    if ($id) {
        $bucket = $this->session->userdata('bucket');
        foreach ($bucket as $key => $value) {
            if ($value['id'] == $id) {
                unset($bucket[$key]);
            }
        }
        $this->session->set_userdata(array(
            'bucket' => $bucket
                )
        );
    } 
```

和`session`信息：

```
Array
(
    [session_id] => e0c6303a7c24a05436ef0abfe2424c44
    [ip_address] => 127.0.0.1
    [user_agent] => Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0
    [last_activity] => 1363718778
    [user_data] => 
    [a] => test
    [bucket] => Array
        (
            [0] => Array
                (
                    [0] => Array
                        (
                            [id] => 3
                            [name] => Maksas Frajus - AmÅ¾inybÄ—s glÄ—byje
                            [price] => 30.99
                        )

                )

            [1] => Array
                (
                    [0] => Array
                        (
                            [id] => 1
                            [name] => Maksas Frajus - AtÄ—jÅ«nas
                            [price] => 35.99
                        )

                )

            [2] => Array
                (
                    [0] => Array
                        (
                            [id] => 2
                            [name] => Maksas Frajus - Paprasti stebuklingi daiktai
                            [price] => 27.5
                        )

                )

        )

) 
```

我收到此错误消息：

```
Message: Undefined index: id 
```

我什至不知道我做错了什么。有人可以解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:54:53.040

```
if ($value['id'] == $id) { 
```

应该是这样的：

```
if ($value[0]['id'] == $id) { 
```

您有一个嵌套数组，因此您需要更深一层。

* * *

每个评论的示例数组如下：

```
[bucket] => Array
    (
        [3] => Array
            (
                [id] => 3
                [name] => Maksas Frajus - AmÅ¾inybÄ—s glÄ—byje
                [price] => 30.99
            )

        [1] => Array
            (
                [id] => 1
                [name] => Maksas Frajus - AtÄ—jÅ«nas
                [price] => 35.99
            )

        [2] => Array
            (
                [id] => 2
                [name] => Maksas Frajus - Paprasti stebuklingi daiktai
                [price] => 27.5
            )

    ) 
```

# java - Java URL 正则表达式不匹配

> ID：15508081
> 
> 赞同：0
> 
> 时间：2013-03-19T18:52:00.690
> 
> 标签：java, regex, string, url

我正在尝试计算 Java 字符串中的 URL 数量：

```
String test = "This http://example.com is a sentence https://secure.whatever.org that contains 2 URLs.";
String urlRegex = "<\\b(https?|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]>";
int numUrls = 0;
pattern = Pattern.compile(urlRegex);
matcher = pattern.matcher(test);
while(matcher.find())
    numUrls++;
System.err.println("numUrls = " + numUrls); 
```

当我运行它时，它告诉我字符串中有零个（不是 2 个）URL。关于为什么的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:58:36.750

`<`和中的`>`字符`urlRegex`导致您的模式和您的输入不匹配`test` `String`。删除它们将产生预期的`numUrls`值。`2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:20:59.220

试试这个代码：

```
 String data = "This http://example.com is a sentence https://secure.whatever.org that contains 2 URLs.";

    Pattern pattern = Pattern.compile("[hH][tT]{2}[Pp][sS]?://(\\w+(\\.\\w+?)?)+");
    Matcher matcher = pattern.matcher(data);

    while (matcher.find()) {
        System.out.println(matcher.group());
    } 
```

希望它会奏效。

# java - JSTL 标记使 WebSphere 7 服务器崩溃

> ID：15508082
> 
> 赞同：0
> 
> 时间：2013-03-19T18:52:00.813
> 
> 标签：java, spring, jsp, spring-mvc, jstl

我正在使用 Spring MVC 将 ArrayList 对象从我的 Controller 传递到 JSP，我想使用 JSTL (forEach) 对其进行迭代，但在加载页面 10~20 秒后它总是使 Java 服务器崩溃。它没有抛出任何异常。

尝试使用“c:out”打印代表数组的字符串可以正常工作。与非空验证相同。当程序到达 forEach 时，它总是崩溃。

**下面的简化示例**

**控制器方法**

```
@RequestMapping(value = "/main", method = {RequestMethod.POST}, params = "create")
public ModelAndView createBranch (Branch branch) throws FxtrmServiceException, JsonGenerationException, JsonMappingException, IOException{

    ModelAndView branchMV = new ModelAndView("branch");

    ArrayList<String> array1 = new ArrayList<String>();
    array1.add("test1");
    array1.add("test2");

    branchMV.addObject("alertMap1", array1);

    populateAutoCompletes(branchMV);

    return branchMV;    
} 
```

**JSP：**

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"  %>
(...)
    <c:if test="${not empty alertMap1}">
        <c:forEach items="${alertMap1}" var="entry1">
                    <c:out value="${entry1}"/><br>                            
        </c:forEach>
    </c:if> 
```

# javascript - Javascript 参考，未定义

> ID：15508085
> 
> 赞同：0
> 
> 时间：2013-03-19T18:52:02.663
> 
> 标签：javascript, html

我正在尝试从另一个函数创建和调用一个复选框。`formatStudentColumn`为表格中的每一行添加一个复选框。
之后，我想触发`markChecked`函数并使用 rowIndex 变量，但此时它的抛出：

```
ReferenceError: 00123 is not defined 
```

这里**00123**是 rowIndex 的实际值。

```
function markChecked(rowIndex){

 console.log("rowIndex: " + rowIndex);
  if(document.getElementById("student" + rowIndex ).checked)
 {
  //do something if its checked
 }
 else{
  // do something if its unchecked
 }

}

var formatStudentColumn = function(id){

    rowIndex = this.grid.getItem(id).studentId;
    return '<input type="checkbox" onClick="javascript:markChecked('+ rowIndex +')" id="student'+ rowIndex +'" />';

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:57:44.807

在黑暗中刺伤，我认为您需要在点击事件中添加一些引号。

```
onclick="markChecked(\''+ rowIndex +'\')" 
```

# c# - 连续创建和执行任务

> ID：15508088
> 
> 赞同：0
> 
> 时间：2013-03-19T18:52:19.950
> 
> 标签：c#, winforms

我正在开发一个应用程序，我只想从一个地方执行任务，这样每次我添加新任务时，它都会添加到要执行的行中，而且我希望每个任务都有一个优先级，所以如果我设置任务优先级到 HIGH 它被添加到行的顶部，因此它立即执行，另一方面，如果我将优先级设置为 Low，它被添加到行的末尾等等......

我考虑过使用 Tasks 和 ContinueWith，但我不知道我应该从哪里开始有一个完全满足我需求的类。

我很抱歉没有提供代码或错误，我希望有人能明白我所指的并帮助我。并提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:13:40.313

好吧，如果您*不需要*为高优先级任务腾出空间，您可以使用`Task`and创建一个简单的辅助类`ContinueWith`：

```
public class SimpleWorkQueue
{
    private Task _main = null;

    public void AddTask(Action task)
    {
        if (_main == null)
        {
            _main = new Task(task);
            _main.Start();
        }
        else
        {
            Action<Task> next = (t) => task();
            _main = _main.ContinueWith(next);
        }
    }
} 
```

如果你*确实*需要高优先级的任务，你可能需要自己处理更多的事情。这是一个生产者/消费者示例，其中所有传入任务都插入到列表中`AddTask()`，并且单个工作线程使用该列表中的任务：

```
public class PrioritizedWorkQueue
{
    List<Action> _queuedWork;
    object _queueLocker;
    Thread _workerThread;

    public PrioritizedWorkQueue()
    {
        _queueLocker = new object();
        _queuedWork = new List<Action>();

        _workerThread = new Thread(LookForWork);
        _workerThread.IsBackground = true;
        _workerThread.Start();
    }
    private void LookForWork()
    {
        while (true)
        {
            Action work;
            lock (_queueLocker)
            {
                while (!_queuedWork.Any()) { Monitor.Wait(_queueLocker); }

                work = _queuedWork.First();
                _queuedWork.RemoveAt(0);
            }
            work();
        }
    }

    public void AddTask(Action task, bool highPriority)
    {
        lock (_queueLocker)
        {
            if (highPriority)
            {
                _queuedWork.Insert(0, task);
            }
            else
            {
                _queuedWork.Add(task);
            }
            Monitor.Pulse(_queueLocker);
        }
    }

} 
```

# meteor - 如何控制 Meteor Session 更新和数据库订阅延迟？

> ID：15508089
> 
> 赞同：0
> 
> 时间：2013-03-19T18:52:23.467
> 
> 标签：meteor

我试图通过 Meteor.autorun 更改集合（GraphData）订阅来限制客户端缓存。但我注意到服务器端仅在 Session（浏览器 GUI）更改后才发布数据。那是对的吗？

在客户端，我有以下咖啡脚本代码：

```
Meteor.startup ->  
  Meteor.autorun () ->
    Meteor.subscribe 'graphdata', Session.get 'graph_name' 
```

在一个函数draw_graph中，我有

```
Session.set 'graph_sub', false    
Session.set 'graph_name', item_name
ready = Session.get 'graph_sub'
while !(ready)    
  Meteor.setTimeout (ready = Session.get 'graph_sub'), 1000
Do something with the GraphData subscription 
```

在服务器端我有

```
Meteor.startup ->  
  Meteor.publish 'graphdata', (name) -> 
    if name?
      GraphData.find({name: name})
      Session.set 'graph_sub', true 
```

我期待在 Session.set 'graph_name', item_name 之后触发服务器端发布，但我注意到我陷入了 while 循环。

我的理解正确吗？无论如何要强制 Session 变量更改在没有 Session 更改的情况下在服务器端引起注意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:54:08.770

```
while !(Session.get 'graph_sub')    
  Meteor.setTimeout (Session.get 'graph_sub'), 1000 
```

Shouldn't the second line be `Session.set`? Otherwise the session value will never change, and the while loop will never end.

Besides the typo I'm confused why you're using a `setTimeout` and `graph_sub` in the first place. Wouldn't this be enough?

```
if Meteor.isClient
  Meteor.startup ->
    Meteor.autorun ->
      Meteor.subscribe 'graphdata', Session.get 'graph_name'

if Meteor.isServer
  Meteor.startup ->
    Meteor.publish 'graphdata', (name) ->
      GraphData.find name: name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:16:19.110

我认为你应该`Do something with the GraphData subscription`在回调中`Meteor.subscribe`。

```
Meteor.startup ->  
  Meteor.autorun () ->
    Meteor.subscribe 'graphdata', Session.get 'graph_name', () ->
      Do something with the GraphData subscription 
```

另请注意，自 0.5.8 起，服务器端不再提供会话：[https](https://github.com/meteor/meteor/blob/master/History.md#v058) ://github.com/meteor/meteor/blob/master/History.md#v058 。

# ruby - 续集在我的插入中添加“返回 null”。如何禁用它？

> ID：15508093
> 
> 赞同：1
> 
> 时间：2013-03-19T18:52:35.167
> 
> 标签：ruby, postgresql, sequel

我正在使用 Ruby Sequel (ORM gem) 连接到 Postgres 数据库。我没有使用任何模型。我的插入语句似乎自动附加了一个“返回 null”（因此不会返回新插入的行 id/pk）。这有什么用？为什么这是默认设置？更重要的是，我如何禁用它（连接范围）？

另外，我注意到有一个 dataset.returning 方法，但它似乎不起作用！

```
require 'sequel'

db = Sequel.connect 'postgres://user:secret@localhost/foo'
tbl = "public__bar".to_sym #dynamically generated by the app
dat = {x: 1, y: 2}
id = db[tbl].insert(dat) #generated sql -- INSERT INTO "public"."bar" ("x", "y") VALUES  (1, 2) RETURNING NULL 
```

不知道这是否重要，但有问题的表是继承的（使用 postgres 表继承）

红宝石 1.9.3p392 (2013-02-22) [i386-mingw32]

续集 (3.44.0)

--Edit 1 -- 经过一些故障排除后--

看起来表继承可能是这里的问题。Sequel 似乎自动运行查询来确定表的 pk（在我的情况下，pk 是在链上的表上定义的），没有找到可能附加了“返回 null”？

```
SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND 
pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.relname = 'bar' 
AND pg_namespace.nspname = 'public' 
```

--编辑2--

是的，看起来这就是问题所在！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-23T12:05:41.403

如果您使用 PostgreSQL 继承，请注意以下内容**不会**被继承：

*   主键

*   独特的约束

*   外键

通常，您必须*在每个*子表上声明这些。例如：

```
CREATE TABLE my_parent (
        id bigserial primary key,
        my_value text not null unique
);
CREATE TABLE my_child() INHERITS (my_parent);
INSERT INTO my_child(id, my_value) values (1, 'test');
INSERT INTO my_child(id, my_value) values (1, 'test'); -- works, no error thrown 
```

你想要的是这样做：

```
CREATE TABLE my_parent (
        id bigserial primary key,
        my_value text not null unique
);
CREATE TABLE my_child(
        primary key(id),
        unique(my_value)
) INHERITS (my_parent);
INSERT INTO my_child(id, my_value) values (1, 'test');
INSERT INTO my_child(id, my_value) values (1, 'test'); -- unique constraint violation thrown 
```

在我看来，这听起来像是您有一些紧急的 DDL 问题需要解决。

您可以使用以下方法将第二个约束改进到第一个约束：

```
ALTER TABLE my_child ADD PRIMARY KEY(id);
ALTER TABLE my_child ADD UNIQUE (my_value); 
```

# scala - 在 Scala 中创建 List 容器对象的最佳方法

> ID：15508104
> 
> 赞同：1
> 
> 时间：2013-03-19T18:53:24.013
> 
> 标签：scala

这是场景。我正在 Scala 中创建一个简单的会话处理程序，我需要一个可以存储列表的类。该类需要其他与​​之关联的功能才能正常运行。

我将通过会话 ID 访问会话 我很少会遍历列表 我将不断地从列表中添加和删除

我的问题：

1.  在这种情况下使用什么合适的 Scala 对象？
2.  从所述 Scala 对象中添加或删除实体的最佳方法是什么？

我对 Scala 还很陌生，所以请原谅我可能会问的基本问题。任何帮助将不胜感激。

编辑：添加到这一切......线程安全是一个因素。使用的对象必须是线程安全的，或者在通过 Session ID 添加和删除项目时必须易于允许线程安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:33:50.690

您可以使用`java.util.concurrent.ConcurrentHashMap`- 它具有最佳性能并保证线程安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:01:57.893

您可以使用[HashSet 的不可变实现，](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.HashSet)其中添加和删除操作需要有效的恒定时间。

一旦这个集合是不可变的，你就需要学习使用集合的“scala 方式”，如何处理状态等等。也许您需要更改处理集合的方式，但这样您就不必担心并发性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T06:51:59.110

```
val list = new List(1,2,3,4,5,6,7,8,9,10) 
```

# actionscript-3 - 获取图像的最大尺寸

> ID：15508110
> 
> 赞同：0
> 
> 时间：2013-03-19T18:53:53.640
> 
> 标签：actionscript-3, math

我正在处理 as3 中位图数据尺寸的最大限制。我正在尝试找到符合以下约束的最大宽度和高度，并保持图像当前的纵横比。我的图像是 2980 x 3220（宽 x 高）。

Bitmapdata 约束：在 AIR 1.5 和 Flash Player 10 中，**BitmapData 对象的最大宽度或高度为 8,191 像素，**像素总数不能超过**16,777,215 像素**。（因此，如果 BitmapData 对象的宽度为 8,191 像素，那么它的高度只能为 2,048 像素。）

如果你能让我知道你是如何得出答案的，那也太棒了

编辑：找到宽度和高度的值，其中宽度/高度 = 比率 = 0.9254658385 和宽度 * 高度 = 某个数字接近但不超过最大像素 (16,777,215)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:28:51.783

2980*3220=9595600。现在，如果我们将 16777216 除以这个数字，我们将收到您的位图在保持在约束 = 1.7484 的情况下还有多少像素。为了保持纵横比，您必须将宽度和高度都增加相同的百分比，因此我们需要取 this = 1.3222 的平方根（向下舍入到第 4 位）。将你的尺寸乘以这个，得到 3940*4257，总共 16772580 像素，宽度和高度都小于 8192。

因此，您的图像最多可以有 3940 宽和 4257 高。

# bash - 无法使用 curl 安装 NPM

> ID：15508118
> 
> 赞同：20
> 
> 时间：2013-03-19T18:54:16.863
> 
> 标签：bash, node.js, npm

尝试安装 NPM 时收到此错误。非常感谢对此错误的任何帮助。

```
$ curl http://npmjs.org/install.sh | sh
% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed
100    85    0    85    0     0   2226      0 --:--:-- --:--:-- --:--:--  4473
sh: line 1: syntax error near unexpected token `newline'
sh: line 1: `<html>Moved: <a href="https://npmjs.org/install.sh">https://npmjs.org/install.sh</a>' 
```

将命令从 http://... --> https:// 更改，但仍然没有运气。

* * *

其他信息：

**操作系统：Mac OSX 10.8.2**

**卷曲：卷曲 7.24.0 (x86_64-apple-darwin12.0)**

* * *

**所以我以超级用户的身份尝试安装，很快就遇到了这么多文字。我完全迷失在这里。**

```
$ sudo curl https://npmjs.org/install.sh | sh
Password:
#!/bin/sh

# A word about this shell script:
#
# It must work everywhere, including on systems that lack
# a /bin/bash, map 'sh' to ksh, ksh97, bash, ash, or zsh,
# and potentially have either a posix shell or bourne
# shell living at /bin/sh.
#
# See this helpful document on writing portable shell scripts:
# http://www.gnu.org/s/hello/manual/autoconf/Portable-Shell.html
#
# The only shell it won't ever work on is cmd.exe.

if [ "x$0" = "xsh" ]; then
  # run as curl | sh
  # on some systems, you can just do cat>npm-install.sh
      # which is a bit cuter.  But on others, &1 is already closed,
  # so catting to another script file won't do anything.
  curl -s https://npmjs.org/install.sh > npm-install-$$.sh
  sh npm-install-$$.sh
  ret=$?
  rm npm-install-$$.sh
  exit $ret
fi

# See what "npm_config_*" things there are in the env,
# and make them permanent.
# If this fails, it's not such a big deal.
configures="`env | grep 'npm_config_' | sed -e 's|^npm_config_||g'`"

npm_config_loglevel="error"
if [ "x$npm_debug" = "x" ]; then
  (exit 0)
else
  echo "Running in debug mode."
  echo "Note that this requires bash or zsh."
  set -o xtrace
  set -o pipefail
  npm_config_loglevel="verbose"
fi
export npm_config_loglevel

# make sure that node exists
node=`which node 2>&1`
ret=$?
    if [ $ret -eq 0 ] && [ -x "$node" ]; then
  (exit 0)
    else
  echo "npm cannot be installed without nodejs." >&2
  echo "Install node first, and then try again." >&2
  echo "" >&2
  echo "Maybe node is installed, but not in the PATH?" >&2
  echo "Note that running as sudo can change envs." >&2
  echo ""
  echo "PATH=$PATH" >&2
  exit $ret
fi

# set the temp dir
TMP="${TMPDIR}"
if [ "x$TMP" = "x" ]; then
  TMP="/tmp"
fi
TMP="${TMP}/npm.$$"
rm -rf "$TMP" || true
mkdir "$TMP"
if [ $? -ne 0 ]; then
  echo "failed to mkdir $TMP" >&2
  exit 1
fi

BACK="$PWD"

ret=0
tar="${TAR}"
if [ -z "$tar" ]; then
  tar="${npm_config_tar}"
fi
if [ -z "$tar" ]; then
  tar=`which tar 2>&1`
  ret=$?
fi

if [ $ret -eq 0 ] && [ -x "$tar" ]; then
  echo "tar=$tar"
  echo "version:"
      $tar --version
  ret=$?
fi

if [ $ret -eq 0 ]; then
  (exit 0)
else
  echo "No suitable tar program found."
      exit 1
    fi

# Try to find a suitable make
# If the MAKE environment var is set, use that.
# otherwise, try to find gmake, and then make.
# If no make is found, then just execute the necessary commands.

# XXX For some reason, make is building all the docs every time.  This
    # is an annoying source of bugs. Figure out why this happens.
MAKE=NOMAKE

if [ "x$MAKE" = "x" ]; then
  make=`which gmake 2>&1`
  if [ $? -eq 0 ] && [ -x $make ]; then
(exit 0)
  else
make=`which make 2>&1`
if [ $? -eq 0 ] && [ -x $make ]; then
  (exit 0)
else
  make=NOMAKE
fi
  fi
else
  make="$MAKE"
fi

if [ -x "$make" ]; then
  (exit 0)
else
  # echo "Installing without make. This may fail." >&2
      make=NOMAKE
fi

# If there's no bash, then don't even try to clean
if [ -x "/bin/bash" ]; then
  (exit 0)
else
  clean="no"
fi

node_version=`"$node" --version 2>&1`
ret=$?
if [ $ret -ne 0 ]; then
  echo "You need node to run this program." >&2
  echo "node --version reports: $node_version" >&2
  echo "with exit code = $ret" >&2
  echo "Please install node before continuing." >&2
  exit $ret
fi

t="${npm_install}"
    if [ -z "$t" ]; then
  # switch based on node version.
  # note that we can only use strict sh-compatible patterns here.
  case $node_version in
    0.[0123].* | v0.[0123].*)
  echo "You are using an outdated and unsupported version of" >&2
  echo "node ($node_version).  Please update node and try again." >&2
  exit 99
  ;;
v0.[45].* | 0.[45].*)
  echo "install npm@1.0"
  t=1.0
  ;;
v0.[678].* | 0.[678].*)
  echo "install npm@1.1"
  t=1.1
  ;;
*)
  echo "install npm@latest"
  t="latest"
  ;;
  esac
fi

# the npmca cert
cacert='
-----BEGIN CERTIFICATE-----
MIIChzCCAfACCQDauvz/KHp8ejANBgkqhkiG9w0BAQUFADCBhzELMAkGA1UEBhMC
VVMxCzAJBgNVBAgTAkNBMRAwDgYDVQQHEwdPYWtsYW5kMQwwCgYDVQQKEwNucG0x
IjAgBgNVBAsTGW5wbSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkxDjAMBgNVBAMTBW5w
bUNBMRcwFQYJKoZIhvcNAQkBFghpQGl6cy5tZTAeFw0xMTA5MDUwMTQ3MTdaFw0y
MTA5MDIwMTQ3MTdaMIGHMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExEDAOBgNV
BAcTB09ha2xhbmQxDDAKBgNVBAoTA25wbTEiMCAGA1UECxMZbnBtIENlcnRpZmlj
YXRlIEF1dGhvcml0eTEOMAwGA1UEAxMFbnBtQ0ExFzAVBgkqhkiG9w0BCQEWCGlA
aXpzLm1lMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDLI4tIqPpRW+ACw9GE
OgBlJZwK5f8nnKCLK629Pv5yJpQKs3DENExAyOgDcyaF0HD0zk8zTp+ZsLaNdKOz
Gn2U181KGprGKAXP6DU6ByOJDWmTlY6+Ad1laYT0m64fERSpHw/hjD3D+iX4aMOl
y0HdbT5m1ZGh6SJz3ZqxavhHLQIDAQABMA0GCSqGSIb3DQEBBQUAA4GBAC4ySDbC
l7W1WpLmtLGEQ/yuMLUf6Jy/vr+CRp4h+UzL+IQpCv8FfxsYE7dhf/bmWTEupBkv
yNL18lipt2jSvR3v6oAHAReotvdjqhxddpe5Holns6EQd1/xEZ7sB1YhQKJtvUrl
ZNufy1Jf1r0ldEGeA+0ISck7s+xSh9rQD2Op
-----END CERTIFICATE-----
'

echo "$cacert" > "$TMP/cafile.crt"
cacert="$TMP/cafile.crt"

# need to echo "" after, because Posix sed doesn't treat EOF
# as an implied end of line.
url=`(curl -SsL --cacert "$cacert" https://registry.npmjs.org/npm/$t; echo "") \
 | sed -e 's/^.*tarball":"//' \
 | sed -e 's/".*$//'`

ret=$?
if [ "x$url" = "x" ]; then
  ret=125
  # try without the -e arg to sed.
  url=`(curl -SsL --cacert "$cacert" https://registry.npmjs.org/npm/$t; echo "") \
   | sed 's/^.*tarball":"//' \
   | sed 's/".*$//'`
  ret=$?
  if [ "x$url" = "x" ]; then
ret=125
  fi
fi
if [ $ret -ne 0 ]; then
  echo "Failed to get tarball url for npm/$t" >&2
  exit $ret
fi

echo "fetching: $url" >&2

cd "$TMP" \
  && curl -SsL --cacert "$cacert" "$url" \
 | $tar -xzf - \
  && rm "$cacert" \
  && cd "$TMP"/* \
  && (req=`"$node" bin/read-package-json.js package.json engines.node`
  if [ -d node_modules ]; then
    "$node" node_modules/semver/bin/semver -v "$node_version" -r "$req"
    ret=$?
  else
    "$node" bin/semver.js -v "$node_version" -r "$req"
    ret=$?
  fi
  if [ $ret -ne 0 ]; then
    echo "You need node $req to run this program." >&2
    echo "node --version reports: $node_version" >&2
    echo "Please upgrade node before continuing." >&2
    exit $ret
  fi) \
  && (ver=`"$node" bin/read-package-json.js package.json version`
  isnpm10=0
  if [ $ret -eq 0 ]; then
    req=`"$node" bin/read-package-json.js package.json engines.node`
    if [ -d node_modules ]; then
      if "$node" node_modules/semver/bin/semver -v "$ver" -r "1"
      then
        isnpm10=1
      fi
    else
      if "$node" bin/semver -v "$ver" -r ">=1.0"; then
        isnpm10=1
      fi
    fi
  fi

  ret=0
  if [ $isnpm10 -eq 1 ] && [ -f "scripts/clean-old.sh" ]; then
    if [ "x$skipclean" = "x" ]; then
      (exit 0)
    else
      clean=no
    fi
    if [ "x$clean" = "xno" ] \
        || [ "x$clean" = "xn" ]; then
      echo "Skipping 0.x cruft clean" >&2
      ret=0
    elif [ "x$clean" = "xy" ] || [ "x$clean" = "xyes" ]; then
      NODE="$node" /bin/bash "scripts/clean-old.sh" "-y"
      ret=$?
    else
      NODE="$node" /bin/bash "scripts/clean-old.sh" </dev/tty
      ret=$?
    fi
  fi

  if [ $ret -ne 0 ]; then
    echo "Aborted 0.x cleanup.  Exiting." >&2
    exit $ret
  fi) \
  && (if [ "x$configures" = "x" ]; then
    (exit 0)
  else
    echo "./configure "$configures
    echo "$configures" > npmrc
  fi) \
  && (if [ "$make" = "NOMAKE" ]; then
    (exit 0)
  elif "$make" uninstall install; then
    (exit 0)
  else
    make="NOMAKE"
  fi
  if [ "$make" = "NOMAKE" ]; then
    "$node" cli.js rm npm -gf
    "$node" cli.js install -gf
  fi) \
  && cd "$BACK" \
  && rm -rf "$TMP" \
  && echo "It worked"

ret=$?
if [ $ret -ne 0 ]; then
  echo "It failed" >&2
fi
exit $ret 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-19T19:35:27.367

你得到了 install.sh 脚本，你只需要执行它。做这个

```
curl -O https://npmjs.org/install.sh
sudo sh install.sh 
```

* * *

**更新**

如果您得到一个 301 Moved Permanently 文件，请尝试添加 -L 选项以跟随重定向，如下所示：

```
curl -O -L https://npmjs.org/install.sh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T09:46:09.080

如果您使用当前位置（而不是旧位置）（至少在我的系统上，相同的设置），原始命令将起作用。含义，使用：

```
curl https://npmjs.org/install.sh | sh 
```

代替：

```
curl http://npmjs.org/install.sh | sh 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-06T07:25:18.697

我用各种卷曲选项尝试了很多次。但主要问题是npm站点的https证书验证。最后这对我有用：

```
curl -k -O -L https://npmjs.org/install.sh 
```

希望它会帮助别人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-15T13:15:13.980

这仍然以某种方式损坏？尝试以下：

```
$curl https://npmjs.org/install.sh | sh
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100    93    0    93    0     0     78      0 --:--:--  0:00:01 --:--:--    79
sh: line 1: syntax error near unexpected token `newline'
sh: line 1: `<html>Moved: <a href="https://www.npmjs.org/install.sh">https://www.npmjs.org/install.sh</a>' 
```

并使用（https）www.npmjs.org：

```
$curl https://www.npmjs.org/install.sh | sh
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed
100  6707  100  6707    0     0   6446      0  0:00:01  0:00:01 --:--:--  6442
npm-install-606.sh: line 1: syntax error near unexpected token `newline'
npm-install-606.sh: line 1: `<html>Moved: <a href="https://www.npmjs.org/install.sh">https://www.npmjs.org/install.sh</a>' 
```

使用 OS X Maverics 10.9.1

```
$uname -a
Darwin Esan-iMac.local 13.0.0 Darwin Kernel Version 13.0.0: Thu Sep 19 22:22:27 PDT 2013; root:xnu-2422.1.72~6/RELEASE_X86_64 x86_64

$curl --version
curl 7.30.0 (x86_64-apple-darwin13.0) libcurl/7.30.0 SecureTransport zlib/1.2.5 
```

它应该与类似的环境一起使用吗？有人测试过？？？我是不是错过了什么。还记得不鼓励使用 sudo 运行吗？尚未尝试单独下载和“sh”命令。

* * *

编辑：是的，在更改所有者之后，单独下载`curl -O https://www.npmjs.org/install.sh`并且`sh install.sh`工作正常，`/usr/local/lib/node_modules/npm`因为之前安装了`sudo`. 但这与错误消息无关，或者可以吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-18T17:58:15.413

添加`-L`帮助了我。例如：

```
curl -L http://www.npmjs.org/install.sh | sh 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-18T10:20:33.050

除了这个 url：[https](https://stackoverflow.com/a/15508817/1979882) ://stackoverflow.com/a/15508817/1979882 在我的例子中，对于 Debian OS，创建符号链接很重要：

```
ln -s /usr/bin/nodejs /usr/bin/node 
```

更详细的安装工作流程在[这里](https://blog.slava.online/nodejs-npm-nginx-setup-for-debian/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-26T08:31:45.453

如果你已经安装了 nvm，你所要做的就是运行 nvm install version 例如如果你愿意安装 8.0.0 版本，那么你运行 ->$ nvm install 8.0.0 then ->$ nvm use 8.0.0你可以运行你所有的 npm 命令......

# mef - 元数据不匹配任何导出的 MEF 导入

> ID：15508119
> 
> 赞同：1
> 
> 时间：2013-03-19T18:54:19.183
> 
> 标签：mef

我一直在尝试在一个新项目中使用 MEF，并且在导入工作时遇到了一些困难，我无法解释原因。我正在关注 MSDN 和其他地方的示例，但它们对我不起作用。这是在 .NET 4 项目中使用 MEF 4.0。

我定义了一个简单的合同：

```
public interface ICommand
{
    int Execute(string[] args);
} 
```

我实现了一些部分并添加了一些元数据：

```
[Export(typeof(ICommand))]
[ExportMetadata("Name", "init")]
public class InitCommand : ICommand { ... }

[Export(typeof(ICommand))]
[ExportMetadata("Category", "service")]
[ExportMetadata("Name", "start")]
public class StartServiceCommand : ICommand { ... } 
```

我定义了以下元数据接口：

```
public interface ICommandMetadata
{
    [DefaultValue(null)]
    string Category { get; }

    string Name { get; }
} 
```

在我的主程序中，我正在创建一个基于目录的导出提供程序，然后尝试编写主程序对象：

```
internal class Program
{
    [ImportMany]
    private IEnumerabe<Lazy<ICommand, ICommandMetadata>> commands;

    private static int Main(string[] args)
    {
        var assembly = Assembly.GetExecutingAssembly();
        var assemblyExportProvider = new CatalogExportProvider(new AssemblyCatalog(assembly));
        var compositionContainer = new CompositionContainer(assemblyExportProvider);
        assemblyExportProvider.SourceProvider = compositionContainer;
        var batch = new CompositionBatch();
        batch.AddPart(this);
        compositionContainer.Compose(batch);

        return 0;            
    }
} 
```

当我运行上面的代码时，这可以按预期工作，并且两个部分都已解决。当我更进一步并创建自定义导出属性时，代码停止工作。这是我的自定义元数据属性和更新的部分：

```
[AttributeUsage(AttributeTargets.Class, AllowMultiple = true)]
[MetadataAttribute]
public sealed class CommandAttribute : ExportAttribute
{
    public CommandAttribute() : base(typeof(ICommand))
    {
    }

    [DefaultValue(null)]
    public string Category { get; set; }

    public string Name { get; set; }
}

[Command(Name = "init")]
public class InitCommand : ICommand { ... }

[Command(Category = "service", Name = "start")]
public class StartServiceCommand : ICommand { ... } 
```

通过应用自定义导出属性，我的程序中的命令集合是一个空数组。我又玩了一些，我发现如果我将元数据接口中的属性更改为字符串数组，导入会再次起作用：

```
public interface ICommandMetadata
{
    [DefaultValue(null)]
    string[] Category { get; }

    string[] Name { get; }
} 
```

谁能告诉我我做错了什么？为什么这仅在我在元数据接口中使用数组时才有效？有没有办法在不使用属性数组的情况下完成这项工作？

在此先感谢您的帮助。

# css - 更改单选按钮背景图像

> ID：15508120
> 
> 赞同：0
> 
> 时间：2013-03-19T18:54:21.163
> 
> 标签：css, jsf-2, primefaces

如何更改活动单选按钮内的背景图像而不是默认图像（我正在使用 redmond）我想使用 aristo

```
.ui-radiobutton-icon {
 background-image:?????  /images/ui-icons_38667f_256x240.png.jsf)";
} 
```

语法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:58:09.393

您不能仅使用 CSS 更改单选按钮样式。

我会推荐一个允许您执行此操作的 javascript 库，例如用于 jQuery的[UniformJS 。](http://uniformjs.com/)

# spotify - 如何处理 iPhone 中的 Spotify 播放器中断

> ID：15508122
> 
> 赞同：0
> 
> 时间：2013-03-19T18:54:24.253
> 
> 标签：spotify, cocoalibspotify-2.0, interruption

我正在我的应用程序中实现 Spotify。

如何处理电话中断、从 iPod 播放器播放歌曲等中断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:00:30.317

这不是 CocoaLibSpotify 特定的问题，因此您会通过更一般的问题找到更好的答案。

Apple 处理音频中断的指南在[这里](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/HandlingAudioInterruptions/HandlingAudioInterruptions.html#//apple_ref/doc/uid/TP40007875-CH11-SW1)。

# git - 更改 git 历史记录以包含修改后的代码

> ID：15508126
> 
> 赞同：0
> 
> 时间：2013-03-19T18:54:36.330
> 
> 标签：git, version-control

想象一下，我有以下 git 历史：

```
a ----- b ----- c
               HEAD 
```

HEAD 在 c 处。

现在我在 (a) 中发现了一个错误，显然现在也在 (b) 和 (c) 中。我现在要做的是更改（a）中的代码（修复错误）并希望在（b）和（c）中更新相同的代码。我应该如何用 git 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:19:55.927

从您的问题来看，您似乎希望历史看起来从来没有错误。
你可以这样做：

*   在新的常规提交中修复错误。我们称之为 commit `d`。
*   使用交互式变基：`git rebase -i <hash-of-commit-before-a>`.
    在出现的编辑器窗口中，您将看到提交 a、b、c、d 每个都在一个新行中，并且`pick`在它们前面有一个命令 ( )。
*   重新排序这些行，使新提交的行紧跟在代表提交的行之后`a`（应该是第二行）。
*   将新提交前的命令更改为`squash`（而不是`pick`默认的）。
    这将导致您的新提交 ,`d`合并到第一个提交中 , `a`。

请注意，如果您将这些提交推送到另一个 repo，那么 rebase 是一个坏主意。简而言之，这是因为您实际上是在创建新的提交（使用新的哈希），而不仅仅是重新排序现有的提交。如果其他人拉取了您的代码并基于原始提交进行工作，那么当他再次拉取时，他将有重复项，他将不得不手动修复此问题。请参阅[变基的危险](http://git-scm.com/book/en/Git-Branching-Rebasing#The-Perils-of-Rebasing)以获得更好的解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:27:51.027

```
git rebase -i HEAD~3

#An editor window will now open showing 3 commits. Replace 'pick' with 'e', save exit.
#git will now give you a chance to edit last 3 commits. Edit the files to fix the bug, then

git add -u
git commit -m"New message"
git rebase --continue

#This will repeat 3 times. After that, you will have a new set of last 3 commits (with new sha1 of course). 
```

顺便说一句，如果您的 3 个提交已经在远程（来源）中，那么在此之后您将无法执行“推送”。您将必须执行以下操作：

```
git push -f 
```

这也将防止其他任何人在他们有旧提交的情况下拉动。但是当其他人这样做时，这可以解决：

```
git stash # save your changes.
git reset --hard HEAD~3
git pull
git stash pop 
```

# aop - 方面声明@type

> ID：15508127
> 
> 赞同：0
> 
> 时间：2013-03-19T18:54:49.110
> 
> 标签：aop, aspectj, declare

我正在尝试解决以下问题：我有一个这样定义的方面：

```
public aspect ComponentAspect {
    declare @type : uk.co.xxx.* : @Component;
} 
```

正如预期的那样，它注释了“uk.co.xxx”包中的所有内容，问题是我不需要注释这个包中的所有类，只需要那些匹配特定模式的类，例如我有以 ...Client.java 结尾的类只有这些我想注释。所以我希望这样的代码：

```
public aspect ComponentAspect {
    declare @type : uk.co.xxx.workflow.*Client : @Component;
} 
```

但当然，这只是我的一厢情愿。

有什么想法可以实现我的结果吗？

非常感谢任何想法，到目前为止我花了 2 个小时没有任何进展:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:03:26.603

为什么一厢情愿？它可以按您的预期工作。您只需要注意您的类型模式所针对的包和/或子包。

也许您真正想要做的是针对某个包的所有子包中具有某个名称的所有类。在这种情况下，您需要`..`语法，如下所示：

```
public aspect ComponentAspect {
    declare @type : uk.co.xxx.workflow..*Client : @Component;
} 
```

我尝试了我的一个应用程序，它就像一个魅力。

# c++ - 使用带有#pragma omp 的 OMP_SCHEDULE 进行并行调度（运行时）

> ID：15508128
> 
> 赞同：2
> 
> 时间：2013-03-19T18:54:49.563
> 
> 标签：c++, openmp, schedule

我试图了解如何`schedule(runtime)`在 C++ 中使用 OpenMP 的指令。经过一番研究，我发现[`OMP_SCHEDULE(1)`](http://msdn.microsoft.com/en-us/library/wxdty0df%28v=vs.80%29.aspx)和[`OMP_SCHEDULE(2)`](http://msdn.microsoft.com/en-US/library/0e208df9%28v=vs.80%29.aspx).

我得出结论，我需要将变量设置`OMP_SCHEDULE`为某个值。但是，我不知道该怎么做，也没有找到任何有效的 C++ 示例来解释我如何正确地这样做。

有人可以解释一下如何设置变量并提供一个有效的 C++ 示例吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T00:05:43.260

OMP 调度有 4 种类型。它们是静态的、动态的、运行时的和引导的。每种调度都有其优点。调度的存在是为了更好地平衡线程之间的负载。

我会给你一些静态和动态调度的例子。引导也是类似的。

schedule(runtime) 子句告诉它使用环境变量设置计划。环境变量可以设置为任何其他调度类型。它可以设置为

```
setenv OMP_SCHEDULE “dynamic,5” 
```

**静态调度**

当您知道每个线程将在编译时或多或少地执行相同数量的工作时，将使用静态调度。

例如，可以使用 OMP 并行化以下代码。假设我们只使用 4 个线程。

如果我们使用默认的静态调度并将 pragma 放在外部 for 循环中，那么每个线程将完成 25% 的外部循环 ( *i* ) 工作和等量的内部循环 ( *j* ) 工作因此，完成的工作总量每个线程都是相同的。因此，我们可以简单地坚持使用默认的静态调度来提供最佳负载平衡。

```
float A[100][100];

for(int i = 0; i < 100; i++)
{
   for(int j = 0; j < 100; j++)
   {
      A[i][j] = 1.0f;
   }
} 
```

**动态调度**

当您知道每个线程不会通过使用静态调度来完成相同数量的工作时，就会使用动态调度。

而在下面的代码中，

```
float A[100][100];

for(int i = 0; i < 100; i++)
{
   for(int j = 0; j < i; j++)
   {
      A[i][j] = 1.0f;
   }
} 
```

内部循环变量*j*取决于*i*。如果您使用默认的静态调度，外部循环 ( *i* ) 的工作可能会在 4 个线程之间平均分配，但内部循环 ( *j* ) 的工作对于某些线程来说会很大。这意味着每个线程不会在静态调度中完成相同数量的工作。静态调度不会导致线程之间的最佳负载平衡。因此我们切换到动态调度（调度在运行时完成）。通过这种方式，您可以确保代码实现最佳负载平衡。

注意：您也可以指定 chunk_size 进行调度。这取决于循环大小。

# xsd - cxf 不会在 WSDL 中生成预期的类型

> ID：15508129
> 
> 赞同：0
> 
> 时间：2013-03-19T18:54:49.890
> 
> 标签：xsd, jaxb, wsdl, cxf

我有一个例外：

```
 public class MyException extends Exception {    
        public MyException() {
        }
        public MyException(String message) {
            super(message);
        }
    } 
```

异常是从 Web 服务方法引发的。

当我使用常规的 Jax-ws 实现生成 Web 服务时，WSDL 具有：

```
    <xs:complexType name='MyException'>
    <xs:序列>
    <xs:element minOccurs='0' name='message' type='xs:string' />
    </xs:sequence>
    </xs:complexType>

```

但是，当使用**cxf**生成网络服务时，我得到：

```
<xs:complexType name='MyException'> <xs:sequence/></xs:complexType>
```

这对我来说不好：我希望得到第一个变体。

您能否建议如何强制 CXF 提供所需的结果？
备注：我无法更改异常中的代码！异常没有任何字段！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:23:47.307

这已在最新的 CXF 版本中报告并修复：

[https://issues.apache.org/jira/browse/CXF-4748](https://issues.apache.org/jira/browse/CXF-4748)

# excel - excel中的VB宏将活动文档保存为PDF，名称来自单元格

> ID：15508141
> 
> 赞同：0
> 
> 时间：2013-03-19T18:55:27.620
> 
> 标签：excel, vba, pdf, save, doc

我是论坛的新手，很高兴成为其中的一员。我已经有这个特定的问题大约三周了。

我要做的是创建一个为我自动执行功能的宏。我必须一直处理大量合同并在每个 .doc 上输入信息（如姓名、地址和 ID 号），而不是将该文档保存为 PDF 非常耗时。所以我尝试创建一个excel表，我可以在其中输入自动保存到.doc的信息，这个复制+粘贴是通过特殊的粘贴功能完成的（如果我在excel中更改某些内容，它会更改.doc，所以我有整个在我输入 excel 时，我用一些空格填写了合同）。

在用适当的信息填充 excel 中的单元格后，我需要将该文档“另存为”为 PDF，其中包含来自其中一个单元格的信息（在这种情况下，特定单元格是输入公司名称的位置），然后我需要o 将该 Excel 表格复制到一个新选项卡中，该选项卡将具有公司名称（与保存 .doc 的单元格相同）。

这是我到目前为止所拥有的：

```
Sub Autocontratos()

Set appWD = CreateObject("Word.Application")
appWD.Visible = True

appWD.Documents.Open Filename:="C:\Users\lguimaraes\Dropbox\Trabalho em equipe\Laurence\Contracts.docx"

appWD.ActiveDocument.SaveAs Filename:= _
    ThisWorkbook.Path & "/" & "Contratos" & Range("C2").pdf, ExportFormat:= _
    wdExportFormatPDF, OpenAfterExport:=True, OptimizeFor:= _
    wdExportOptimizeForPrint, Range:=wdExportAllDocument, From:=1, To:=1, _
    Item:=wdExportDocumentContent, IncludeDocProps:=True, KeepIRM:=True, _
    CreateBookmarks:=wdExportCreateNoBookmarks, DocStructureTags:=True, _
    BitmapMissingFonts:=True, UseISO19005_1:=False
    ChangeFileOpenDirectory "C:\Users\lguimaraes\Dropbox\Trabalho em equipe\Laurence\Contratos"

appWD.ActiveDocument.Close
appWD.Quit

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:55:14.813

尝试将问题行的开头更改为：

```
appWD.ActiveDocument.ExportAsFixedFormat Filename:= _
     ThisWorkbook.Path & "\" & "Contratos" & Range("C2") & ".pdf", ExportFormat:= _ 
```

并保持另一部分相同。

**评论后编辑：**

比回到“另存为”方法并尝试以下操作：

```
appWD.ActiveDocument.SaveAs _
ThisWorkbook.Path & "\" & "Contratos" & Range("C2") & ".pdf", FileFormat:=17 
```

这次尝试使用新指令而不是复杂的“.SaveAs”方法。

# mysql - 如何在没有 ON 子句的情况下连接 2 个表

> ID：15508142
> 
> 赞同：6
> 
> 时间：2013-03-19T18:55:34.763
> 
> 标签：mysql, sql

我想`SUM(column_a)`从两个不同的表中得到它们，并得到它们的区别。我正在使用 MySQL。

`Table A's sum = 1234`

`Table B's sum = 4001`

我不确定要在我的`ON`条款中添加什么：

```
SELECT 
  SUM(a.column1) AS table_a_sum,
  SUM(b.column1) AS table_b_sum,
  SUM(a.column1) - SUM(b.column1) AS difference
FROM table_a a
JOIN table_b b
ON ?????? 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T18:57:12.673

无条件连接是交叉连接。交叉连接为右侧表格中的每一行重复左侧表格的每一行：

```
FROM table_a a
CROSS JOIN table_b b 
```

请注意，在 MySQL 中，//`cross join`是相同的。所以你可以写：`join``inner join`

```
FROM table_a a
JOIN table_b b 
```

只要您省略该`on`子句，这将作为交叉连接工作​​。

如果您想对两个表中的两列求和，交叉连接将不起作用，因为它会重复行。你会得到高度夸大的数字。对于总和，根据@sgeddes 的回答，更好的方法是使用子查询。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T18:57:57.960

这是使用子查询的一个选项——有几种方法可以做到这一点：

```
SELECT 
  table_a_sum,
  table_b_sum,
  table_a_sum - table_b_sum AS difference
FROM 
    (SELECT SUM(column1) table_a_sum FROM table_a) a,
    (SELECT SUM(column1) table_b_sum FROM table_b) b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T18:59:07.713

您想先总结一下，然后进行计算：

```
select a.suma, b.sumb, a.suma - b.sumb
from (select sum(a.column1) as suma from tablea) a cross join
     (select sum(b.column1) as sumb from tableb) b 
```

在表格`cross join`之间进行运算将生成一个笛卡尔积，这会弄乱您的总和。

# c++ - C++ 中字符串文字的类型是什么？

> ID：15508148
> 
> 赞同：14
> 
> 时间：2013-03-19T18:56:07.747
> 
> 标签：c++, string, types

例如，字符串文字“Hello”的类型是什么，`const char[6]`或者`const char*`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-19T18:57:32.043

字符串文字的类型`"Hello"`是“array of 6 `const` `char`”。

> 普通字符串文字和 UTF-8 字符串文字也称为窄字符串文字。窄字符串文字的类型为“ *n* `const char`数组”，其中*n*是字符串的大小 [...]

但是，它可以转换为`const char*`按数组到指针的转换。数组到指针的转换产生指向数组第一个元素的指针。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T18:57:30.777

标准将其定义为“n 的数组`const char`”，因此它是`const char[n]`（n 是字符串的大小，包括终止的 NUL 字节）。

第 7 节，第 2.14.15 节：

> 窄字符串文字的类型为“n const char 数组”，其中 n 是字符串的大小，定义如下，并且具有静态存储持续时间。

# entity-framework-5 - 实体框架和具有相同名称的基本类型

> ID：15508150
> 
> 赞同：0
> 
> 时间：2013-03-19T18:56:17.043
> 
> 标签：entity-framework-5

我收到以下错误：未映射类型“EfTest.Person”。使用 Ignore 方法或 NotMappedAttribute 数据注释检查该类型是否被显式排除。验证该类型是否被定义为一个类，不是原始的、嵌套的或泛型的，并且不是从 EntityObject 继承的。

运行此代码时：

```
using System.Data.Entity; 
namespace EfTest
{
internal class Program
{
    private static void Main(string[] args)
    {
        using (var db = new PersonContext())
        {
            db.Persons.Add(new Person());
            db.SaveChanges();
        }
    }
}

public class PersonContext : DbContext
{
    public DbSet<Person> Persons { get; set; } //people ;)
}

public class Person : EfTest2.Person
{
    public int PersonId { get; set; }
    public string Name { get; set; }
}
}namespace EfTest2
{
public class Person
{
    public int Age { get; set; }
} 
```

}

你能帮忙解释一下为什么新类型不能和它的基础同名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:15:47.223

我认为您不能在主要会议旁边写课程。您必须将其分离到另一个 cs 文件中。我通过这样做解决了这个问题。值得一试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:22:55.360

EF 具有相当复杂的多层映射，其中一些层在外部不直接可见。这是将对象映射到 EDM 中的实体表示的问题。关键是 EF 没有使用完整的类名（包括命名空间），而只使用了裸类名，因此您的`Person`类发生冲突，只有一个可以解决。

这种行为的起源可能是在 EF 4.0 中，当时它用于简化 POCO 模型的类创建并使命名空间独立于 EDMX。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T20:59:33.953

我将专注于***嵌套***在错误中的关键字。我确信将其从 EfTest2 命名空间中取出并保持命名空间相同将解决此问题。当然，您必须将基类名称从 Person 更改为其他名称。

# java - 初学者emacs / clojure编译错误

> ID：15508152
> 
> 赞同：2
> 
> 时间：2013-03-19T18:56:17.643
> 
> 标签：java, clojure, emacs24

我正在阅读来自[clojure-doc.org](http://clojure-doc.org/articles/tutorials/emacs.html)的 clojure & emacs 教程，当按照建议编译测试时，我在 emacs nrepl 中得到以下输出：

```
 clojure.lang.Compiler$CompilerException: java.lang.RuntimeException: Unable to resolve symbol: deftest in this context, compiling:(/home/jakov/dev/PROJECTS/clojure/test2/test/test2/core_test.clj:1)
             Compiler.java:6281 clojure.lang.Compiler.analyze
             Compiler.java:6223 clojure.lang.Compiler.analyze
             Compiler.java:3497 clojure.lang.Compiler$InvokeExpr.parse
             Compiler.java:6457 clojure.lang.Compiler.analyzeSeq
             Compiler.java:6262 clojure.lang.Compiler.analyze
             Compiler.java:6223 clojure.lang.Compiler.analyze
             Compiler.java:6515 clojure.lang.Compiler.eval
             Compiler.java:6952 clojure.lang.Compiler.load
             Compiler.java:6912 clojure.lang.Compiler.loadFile
                    RT.java:307 clojure.lang.RT$3.invoke
               NO_SOURCE_FILE:1 user/eval42
             Compiler.java:6511 clojure.lang.Compiler.eval
             Compiler.java:6477 clojure.lang.Compiler.eval
                  core.clj:2797 clojure.core/eval
                   main.clj:245 clojure.main/repl[fn]
                   main.clj:266 clojure.main/repl[fn]
                   main.clj:266 clojure.main/repl
               RestFn.java:1096 clojure.lang.RestFn.invoke
      interruptible_eval.clj:56 clojure.tools.nrepl.middleware.interruptible-eval/evaluate[fn]
                   AFn.java:159 clojure.lang.AFn.applyToHelper
                   AFn.java:151 clojure.lang.AFn.applyTo
                   core.clj:601 clojure.core/apply
                  core.clj:1771 clojure.core/with-bindings*
                RestFn.java:425 clojure.lang.RestFn.invoke
      interruptible_eval.clj:41 clojure.tools.nrepl.middleware.interruptible-eval/evaluate
     interruptible_eval.clj:171 clojure.tools.nrepl.middleware.interruptible-eval/interruptible-eval[fn]
                  core.clj:2278 clojure.core/comp[fn]
     interruptible_eval.clj:138 clojure.tools.nrepl.middleware.interruptible-eval/run-next[fn]
                    AFn.java:24 clojure.lang.AFn.run
    ThreadPoolExecutor.java:895 java.util.concurrent.ThreadPoolExecutor$Worker.runTask
    ThreadPoolExecutor.java:918 java.util.concurrent.ThreadPoolExecutor$Worker.run
                Thread.java:662 java.lang.Thread.run
Caused by: java.lang.RuntimeException: Unable to resolve symbol: deftest in this context
                  Util.java:170 clojure.lang.Util.runtimeException
             Compiler.java:6766 clojure.lang.Compiler.resolveIn
             Compiler.java:6710 clojure.lang.Compiler.resolve
             Compiler.java:6671 clojure.lang.Compiler.analyzeSymbol
             Compiler.java:6244 clojure.lang.Compiler.analyze 
```

对我来说，这行似乎在 nrepl 错误输出中至关重要：

```
Caused by: java.lang.RuntimeException: Unable to resolve symbol: deftest in this context 
```

无论如何，我真的是一个 clojure 和 emacs 菜鸟，我在这里没有太多线索。所有的 emacs slime clojure 东西都安装好`leiningen2`了，java 是 oracle java 1.6，emacs 是 emacs 24，当我在项目目录中运行 lein test 时，它没有错误。

谁能帮我？

编辑：

我的 core_test.clj 文件：

```
 (deftest pairs-of-values
   (let [args ["--server" "localhost" 
               "--port" "8080" 
               "--environment" "production"]]
      (is (= {:server "localhost"
              :port "8080"
              :environment "production"}
             (parse-args args))))) 
```

我的 core.clj 文件：

```
(defn parse-args [args]
  {}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:32:15.307

该教程说“用以下内容替换那里的测试”。我认为您替换了文件的全部内容，而不仅仅是`(deftest ...)`部分内容。所以你删除但不应该删除的部分说

```
(ns test.core-test (:use clojure.test test.core)) 
```

# javascript - 为跨浏览器功能设置选择菜单样式的正确方法

> ID：15508154
> 
> 赞同：4
> 
> 时间：2013-03-19T18:56:19.497
> 
> 标签：javascript, jquery, html, css

我在选择菜单中遇到了这个问题，它是关于在 CSS 和 Jquery 的帮助下对其进行样式设置的。到目前为止，我设法得到了这个结果，我真的很喜欢它： ![在此处输入图像描述](../Images/1dac625135f8c7b64b4a627382d96ce6.png)

到目前为止，它在 mozila、opera、chrome、IE7+ 中完美运行。

这是我目前拥有的来源：

HTML：

```
 <select class="styled" name="">
                <option>Select title</option>
                <option>Mr.</option>
                <option>Mrs.</option>
                <option>Miss.</option>
            </select> 
```

CSS：

```
select {
    border: 1px solid #d6d8db;
    background-color: #ecedee;
    text-transform: uppercase;
    color: #47515c;
    padding: 12px 10px 12px 10px;
    width: auto;
    cursor: pointer;
    margin-bottom: 10px;
}
select > option {
    text-transform: uppercase;
    padding: 5px 0px;
}
.customSelect {
    border: 1px solid #d6d8db;
    background-color: #ecedee;
    text-transform: uppercase;
    color: #47515c;
    padding: 12px 10px 12px 10px;
    margin-bottom: 10px;
}
.customSelect.changed {
    background-color: #f0dea4;
}   
.customSelectInner {
    background:url(../images/select_arrows.png) no-repeat center right;
} 
```

jQuery 由两部分组成： - 插件 - 和控制代码

这可以在我刚刚创建的 FIDDLE 中查看：http: [//jsfiddle.net/s6jGW/1/](http://jsfiddle.net/s6jGW/1/)

请注意左侧有“外部资源”。

**我想要达到的目标**

1.  我想对下拉菜单进行样式设置，使其看起来与图像中的大致相似（我的意思是那些选项，如 - 高度 - 填充 - 悬停时： ![在此处输入图像描述](../Images/5b2ae264418439d534291dee9b02fc0e.png)

2.  我不希望“SELECT TITLE”作为选择选项，它必须只是选择框的标题。在这个小提琴中，您也可以看到它也是一种选择。[http://jsfiddle.net/s6jGW/1/](http://jsfiddle.net/s6jGW/1/)

3.  可能最重要的是，我正在寻找跨浏览器解决方案。

***先感谢您***

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T19:02:08.757

> 为跨浏览器功能设置选择菜单样式的正确方法

放弃吧，没有跨浏览器的方式来设置选择和选项元素的样式。您需要将它们替换为您自己的基于 HTML 的控件。

但是，如果您想坚持（并且可能放弃旧版浏览器），以下链接可能会有所帮助：

*   [如何在没有 JavaScript 的情况下仅使用 CSS 设置 <select> 下拉菜单的样式？](https://stackoverflow.com/questions/1895476/how-to-style-a-select-dropdown-with-css-only-without-javascript)
*   [样式化或替换标准选择元素](https://stackoverflow.com/questions/7321261/styling-or-replacing-the-standard-select-element)。

# android - 如何在我的 Android 应用程序的原始文件夹中添加子文件夹？

> ID：15508160
> 
> 赞同：19
> 
> 时间：2013-03-19T18:56:33.987
> 
> 标签：android, android-resources

当然，我可以右键单击原始文件夹并添加新文件夹，但是当我导出项目时，APK 文件不包含新的子文件夹。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-19T18:57:50.647

你不能。

中的文件夹`/res/`具有预定义的结构，您不能添加子文件夹。

但是，由于这是`raw`文件夹，您可能需要考虑使用该`assets`文件夹，其中支持子文件夹。

请记住，通过使用`assets`您将无法再使用`R.*.*`引用。您将不得不通过[AssetManager](http://developer.android.com/reference/android/content/res/AssetManager.html)。

# jquery - jPanelMenu 在菜单打开时添加样式

> ID：15508163
> 
> 赞同：0
> 
> 时间：2013-03-19T18:56:55.260
> 
> 标签：jquery, addclass, slidingmenu

`.jPanelMenu,body{overflow-x:hidden}`如果菜单打开，我只需要添加到这些。

我正在使用 jquery 滚动来滚动回顶部。如果窗口被滚动，溢出就会搞砸。所以`.jPanel.open{overflow-x:hidden;}`并且`.jPanel.closed{overflow-x:visual}`会很好用。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:30:42.503

当 jPanelMenu 打开时，数据属性 ( `data-menu-position`) 将添加到`<body>`标记中。

您可以使用此属性进行样式设置：

```
 body[data-menu-position="open"] { }

    body[data-menu-position="closed"] { } 
```

或者，您可以使用选项对象中的回调函数来根据需要应用一个类。在这里查看这些选项（对于不同的时间有几个不同的回调，所以你可能需要尝试找到你需要的那个）：http: [//jpanelmenu.com/#options-before](http://jpanelmenu.com/#options-before)

我还没有将这些类添加到插件中，但这绝对是一个很好的建议。我可能会将这些添加到插件中并很快推出新版本。

# java - 如何在此应用程序中使用同步方法实现互斥

> ID：15508164
> 
> 赞同：0
> 
> 时间：2013-03-19T18:57:04.733
> 
> 标签：java, multithreading, concurrency, synchronization, mutual-exclusion

我在这里遇到了一个小问题。我正在用 Java 做一个并发程序。问题是：有 4 个人（学生）试图访问打印机，打印 5 个文档。但当时只有一个可以打印（很明显）5 个文件。当他们完成时，他们通知其他人他们已经完成并且其他线程访问该资源。我有一个主类，学生类和监视器（激光打印机），文档类，其中包含有关文档的信息，例如（页数，名称用户 ID 等）+ 一些打印机接口。我已经成功地运行了线程，但它们不同步（互斥）
所以问题是我如何实现互斥（当时只有一个人可以打印他的文档数量）
感谢您的关注、时间和提示： )

主班

```
 String S1Name = "bob";
    String S2Name = "klara";
    String S3Name = "John";
    String S4Name = "Iga";

    String T1Name = "Man";
    String T2Name = "Woman";

    final int NoOfDocs = 5;
    ServicePrinter sp = new LaserPrinter();

    ThreadGroup groupA = new ThreadGroup("Group A"); 
    ThreadGroup groupB = new ThreadGroup("Group B");

    Student student1 = new Student(sp,NoOfDocs,S1Name, groupA);
    Student student2 = new Student(sp,NoOfDocs,S2Name, groupA);
    Student student3 = new Student(sp,NoOfDocs,S3Name, groupA);
    Student student4 = new Student(sp,NoOfDocs,S4Name, groupA);

    TonerTechnician TT = new TonerTechnician(groupB);
    PaperTechnician PT = new PaperTechnician(groupB);

    /*
     * Start Student Threads
     */
    student1.start();
    student2.start();
    student3.start();
    student4.start();

    /*
     * Start Technician threads
     */
    TT.start();
    PT.start(); 
```

学生班

```
 private final ServicePrinter serviceprinter;
    private final int NoOfDocs;
    private final String Name;
    private final ThreadGroup threadgroup;

    public Student(ServicePrinter serviceprinter, int NoOfDocs, String Name, ThreadGroup threadgroup)
    {
        this.serviceprinter = serviceprinter;
        this.NoOfDocs = NoOfDocs; 
        this.Name = Name;
        this.threadgroup = threadgroup;
    }
    @Override
    public void run()
    {
        /*
         * each students prints 5 documents (different name and length)
         */
        final LaserPrinter lp = new LaserPrinter();
        //sleep from 1 to 5 sec random time
        final Random random = new Random();       
        char[] chars = "abcdefghijklmnopqrstuvwxyz".toCharArray();
        StringBuilder sb = new StringBuilder();
        /*
         * Create random document name 10 characters long
         */
        for (int i = 0; i < 10; i++) 
        {
            char c = chars[random.nextInt(chars.length)];
            sb.append(c);
        }
        String docName  = sb.toString();
        /*
         * print 5 documents (random sleep time between printing)
         */
        for(int i = 0; i < NoOfDocs; i++)
        {
            try 
            {
                Document coursework = new Document(Name,docName,random.nextInt(90)+10);
                lp.printDocument(coursework);
                Thread.sleep(random.nextInt(1000)+4000);                
            } 
            catch (InterruptedException ex) 
            {
                Logger.getLogger(Student.class.getName()).log(Level.SEVERE, null, ex);
            }            
        }
        System.out.println("User: " + Name+ " completed printing"); 
```

监控类

```
 int tonerLevel = 500;
    int paperLevel = 250;

    private final String PrinterName = "HP";
    private final String PrinterID = "LX-440";
    private int CurrentPaperLevel;
    private int CurrentTonerLevel;
    private int NoOfDocsPrinted;

    @Override
    public synchronized void printDocument(Document document) {
        System.out.println(document);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:08:24.477

您似乎在 run 方法中创建了一个本地打印机对象，而不是使用您传递给`Student`类的共享对象。尝试使用您传递的共享打印机，看看您会得到什么。我们还需要看看你是如何使用`printDocument`in 的`ServicePrinter`。这是因为您`ServicePrinter`在类中使用了一个对象，而in`Student`的实现可能不正确（也就是说，如果您实际上在超类中实现了它）`printDocument``ServicePrinter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:07:13.097

这是一个简单的互斥锁实现，但您应该使用 java.util.concurrent 包进行同步

编辑：将互斥量更改为信号量（更有意义）

一个简单的互斥锁实现：

```
public class Mutex {

    private int semaphore;

    public synchronized void aquire() throws InterruptedException {

        if(semaphore < 0) {
            wait();
        }

        semaphore--;

    }

    public synchronized void release() {

        if(semaphore < 0) {
            semaphore++;
            notify();            
        }
    }
} 
```

# java - opengl 仅从 java 中的许多列表中绘制最终的四边形

> ID：15508181
> 
> 赞同：1
> 
> 时间：2013-03-19T18:57:59.707
> 
> 标签：java, opengl, rendering, lwjgl

我正在用 Java 中的 LWJGL 和 OpenGL 制作一个简单的 2D 游戏，但我似乎无法渲染超过一个四边形。

我的`Squares`主类中有一个数组列表，如果列表中有多个 Square，它只会渲染列表中的最后一个，而无法渲染其他的（我调试并打印了 Square 名称，这表明它正在迭代它们正确，但出于某种原因决定不渲染任何一个，但最后一个）。所以我唯一能想到的是我的`Square`类`Draw`方法有问题（因为我只使用该方法来渲染我的四边形），或者我的 OpenGL 设置代码。

如果它有帮助，我的代码看起来非常像这个视频中的内容，因为我一直在很大程度上关注这个和 lwjgl 上的 wiki 页面：[http ://www.youtube.com/watch?v=EjbOjio_pC4](http://www.youtube.com/watch?v=EjbOjio_pC4)

方形类：

```
package dasting;

import org.lwjgl.*; //lwjgl engine
import org.lwjgl.opengl.*; //opengl
import static org.lwjgl.opengl.GL11.*; //Dunno yet, youtube said so
import org.lwjgl.LWJGLException; //Allows tries and catches with exception handling for LWJGL (IMPORTANT SHIT)
import java.util.Random; 

public class Square {

private int x1, x2, y1, y2, roomHeight, roomWidth;

//constructor takes the position values and width and height of room for boundary checks
Square(int X1, int X2, int Y2, int Y1, int rmWidth, int rmHeight) { 
    x1 = X1; //initialising the point values
    x2 = X2;
    y2 = Y2;
    y1 = Y1;
    roomHeight = rmHeight;
    roomWidth = rmWidth;
}

public void draw() { //draw method
    //Rendering random stuff example code. Also moves the square
    glClear(GL_COLOR_BUFFER_BIT);

    //Render quad
    glBegin(GL_QUADS);
        glVertex2i(x1, y1);
        glVertex2i(x2, y1);
        glVertex2i(x2, y2);
        glVertex2i(x1, y2);
    glEnd();
    }
} 
```

这是我认为在我的主课中可能有问题的openGl设置：

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(0, roomWidth, roomHeight, 0, 1, -1); 
glMatrixMode(GL_MODELVIEW); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:03:37.133

您应该调用`glClear`每一帧，而不是每次绘制`Square`. 将调用`glClear`移出`draw`函数并将其放在绘图循环的开头。

# python - 使用 Raspbian 和 Raspberry Pi 将运动文件上传到 Google Drive

> ID：15508186
> 
> 赞同：1
> 
> 时间：2013-03-19T18:58:30.530
> 
> 标签：python, google-drive-api, raspberry-pi, motion, raspbian

我一直在运行 Raspbian 的 Rapsberry Pi 上玩 Motion，发现[这篇文章](http://through-the-interface.typepad.com/through_the_interface/2012/09/creating-a-motion-detecting-security-cam-with-a-raspberry-pi-part-2.html)听起来很有趣。

我一直在尝试调整他列出的步骤以使其与 Raspbian 一起使用，据我所知，我应该做得很好。我使用“sudo apt-get install python-gdata”安装了 GData 然后我将 uploader.py 和 uploader.cfg 文件放在 /etc/motion 并更改了 motion.confg 文件以具有 on_movie_end /etc/motion/uploader 行.py /etc/motion/uploader.cfg %f

我错过了什么吗？从理论上讲，这应该适用于 Raspbian 对吗？还需要做什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:44:41.163

我一直在按照您提到的指南在 Raspbian 上进行操作，但我遇到了同样的问题；运动似乎有效，但脚本永远不会执行。

但是，当我尝试直接运行脚本时，出现权限错误。我运行以下命令使脚本可执行。

chmod a+x /etc/motion/uploader.py

现在它将视频上传到谷歌驱动器（虽然没有电子邮件？）

希望这可以帮助，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T12:00:25.580

这不是您问题的直接答案，但它可能会以更简单的方式将文件上传到谷歌驱动器。

你看过 grive，它是一个 linux 实用程序，可用于将树莓派上的文件夹与谷歌驱动器上的文件夹同步。

有关如何在树莓派上设置和使用 grive 的更多信息，请参阅此链接。

[http://www.stuffaboutcode.com/2013/03/raspberry-pi-google-drive-grive.html](http://www.stuffaboutcode.com/2013/03/raspberry-pi-google-drive-grive.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-21T14:45:15.720

我也为此苦苦挣扎，这就是帮助。首先尝试从终端运行它：

```
/etc/motion/uploader.py /etc/motion/uploader.cfg / 
```

在这里，您放置要上传的文件的绝对路径。

尝试运行它，如果它要求您输入密码，则您知道您有权限问题并且需要更改权限，以便它不需要密码来执行。

再试一次。如果它有效，那么如果您在以下位置使用它，它也将有效`uploader.cfg`：

```
on_movie_end /etc/motion/uploader.py /etc/motion/uploader.cfg %f 
```

不要忘记取消注释此行！这听起来很傻，但我花了一些时间才意识到这一点，即`delete ;`在 on_movie_end 前面。

我遇到的另一个问题是电影编码。只有 mpeg4 真正为我工作。

# ruby - 如何确定页面加载何时完成以测量加载时间

> ID：15508188
> 
> 赞同：0
> 
> 时间：2013-03-19T18:58:32.773
> 
> 标签：ruby, watir, page-load-time

我需要测量页面导航的加载时间。这是我的情况：当我导航时，随着 ajax 元素的加载，页面 laod 会花费可变时间。如何确定页面已完全加载以正确测量其加载时间？我不能具体说明定位特定元素（文本、表格或图像......）表示完整的页面加载，因为页面加载取决于数据。请帮我处理这种情况。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:18:20.437

您是否希望能够在“根据需要”的基础上对此进行测试，或者您是否希望对页面进行检测以便从所有用户那里收集数据？

如果您只需要在临时基础上执行此操作，那么[http://webpagetest.org](http://webpagetest.org)将为您提供帮助 - 只要 AJAX 请求之间的间隔不会太长，它将包含它们。

如果您想查看所有 AJAX 调用的收集数据，那么您需要检测成功和失败回调以存储它们完成的时间并计算最后一个和页面开始之间的差异。然后，一旦您将价值推向 Google Analytics 或其他东西。

如果您的所有 AJAX 调用都设计为在 onload 触发之前完成，那么 Google Analytics 中现有的 SiteSpeed 数字可能对您来说已经足够了。

# hibernate - 休眠创建重复对象

> ID：15508198
> 
> 赞同：1
> 
> 时间：2013-03-19T18:58:54.670
> 
> 标签：hibernate, annotations, one-to-many

由于我的内部连接，Hiberate 正在创建重复的对象。该查询将父表与子表连接起来（父表与子表是一对多的关系）。

**数据：**

```
Category (Parent)
ID|Name
1|A
2|B

Testcase (Child)
ID|CategoryID|Name|Run
1|1|A|500
2|1|B|500
3|1|C|500
4|2|D|600 
```

加入 where run = 500 的结果

```
CategoryID|TestcaseID|TestCase Name
1|1|A
1|2|B
1|3|C 
```

由此，我希望 Hibernate 创建一个 Category 对象，其中包含一个包含 3 个测试用例对象的列表。相反，它创建了 3 个类别对象，每个对象都有 3 个测试用例的正确列表

类别 [ID=1, name=FOO, testCases=[TestCase [ID=1, name=A, runId=500], TestCase [ID=2, name=B, runId=500], TestCase [ID=3, name =C,runId=500]]]

类别 [ID=1, name=FOO, testCases=[TestCase [ID=1, name=A, runId=500], TestCase [ID=2, name=B, runId=500], TestCase [ID=3, name =C,runId=500]]]

类别 [ID=1, name=FOO, testCases=[TestCase [ID=1, name=A, runId=500], TestCase [ID=2, name=B, runId=500], TestCase [ID=3, name =C,runId=500]]]

**模型：**

```
@Entity
@Table(name = "CATEGORY")
public class Category implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id
    @Column(name = "CATEGORYID")
    private int ID;

    @Column(name = "CATEGORYNAME")
    private String name;

    @OneToMany(fetch = FetchType.EAGER)
    @JoinColumn(name = "CATEGORYID")
    @Filter(name = "TEST_RUN_ID_FILTER")
    private Collection<TestCase> testCases;
}

@Entity
@Table(name = "TESTCASE_NEW")
@FilterDef(name = "TEST_RUN_ID_FILTER", defaultCondition = "TESTRUNID in (:IDS)", parameters = { @ParamDef(name = "IDS", type = "int") })
public class TestCase implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id
    @Column(name = "TESTCASEID")
    private int ID;

    @Column(name = "TESTCASENAME")
    private String name;

    @Column(name = "STATUS")
    private String status;

    @Column(name = "TESTRUNID")
    private int testRunId;
} 
```

**道：**

```
 public List<Category> getAllCategoriesForTestRuns(List<Integer> testRunIDs)
    {
        Session session = getSession();
        session.enableFilter("TEST_RUN_ID_FILTER")
                .setParameterList("IDS", testRunIDs);
        Query query = session.createQuery("select c from Category c inner join c.testCases tc");
        List<Category> result = query.list();
        return result;
    } 
```

如果我将 HQL 查询更改为选择不同的，我能够得到正确的结果，但我想知道是否有更正确的方法。从我的谷歌搜索中，我尝试将 @Fetch(FetchMode.SELECT) 添加到 Category 中的 testCase 列表中，但这没有任何效果。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:03:00.203

使用 ResultTransformer：

```
Query query = session.createQuery("hql")
                  .setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY); 
```

问题是您的内部联接将为 testCases 集合中的每个实体返回一个对象（就像数据库查询结果集将用于内部联接一样）。

# c - C 中的 Unsigned Long 在 PIC24 汇编语言中是什么样子的？

> ID：15508199
> 
> 赞同：1
> 
> 时间：2013-03-19T18:58:58.093
> 
> 标签：c, assembly, unsigned-long-long-int, pic24

我在 PIC24 上用 C 定义了一个变量

假设变量的名称（在 C 文件中）是`The_Number_Of_Bytes`

在 PIC24 C 代码中，它是这样定义的......

```
 unsigned long The_Number_Of_Bytes=0;   // number of bytes in buffer 
```

当一个名为的字节数组`DATABUF01`包含`The_Number_Of_Bytes`字节（抱歉隐含的冗余）时，我将被调用，我需要确保我准确地执行了那么多字节，然后停止。

我非常有信心这个数字会小于 65535，所以为什么它是一个 unsigned long 是为了其他讨论。现在，我想知道；哪个是高位词，哪个是低位词？（就此而言，`long`PIC24 C 中是 32 位数字吗？）

有人能告诉我这个例子中`W2`会发生什么吗？`W3`

```
 Mov.W   #_The_Number_Of_Bytes, W1       ;From the dispatcher
    Mov.W   [W1++], W2                      ;My question: Hi Order or Low Order ?
    Mov.W   [W1],   W3                      ;My question: Hi Order or Low ?

    Mov.W   #_DATABUF01, W4                 ;The Start

    Mov.B   [W4++], W5                      ;First byte...

    :                                       ;Whatever
    :                                       ;Whatever
    :                                       ;Whatever 
```

有人可以确认或纠正我对 unsigned long int 的 Hi/Low 顺序的想法吗？

*编辑*评论者要求这样做。可以回答问题（评论是我的）

请求评论，大小似乎是 4 个字节，来自这个......

```
 45:                 unsigned long i=0;    
    0AB6A  B80060     mul.uu 0x0000,#0,0x0000    ;make a zero
    0AB6C  980710     mov.w 0x0000,[0x001c+2]    ;no clue which word
    0AB6E  980721     mov.w 0x0002,[0x001c+4]    ;aha, if I made it 1 or 2, I'd know
  46:                 unsigned int Fischer;
  47:                 
  48:                 Fischer = sizeof(i);
      0AB70  200040     mov.w #0x4,0x0000         ;So it must be 4
      0AB72  780F00     mov.w 0x0000,[0x001c]     ;okay, it's a 4 byte number
  49: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-24T13:54:57.657

这是来自 MPLAB C Compiler for PIC24 MCU 用户指南的片段：

> **5.3 数据表示**
> 多字节数量以“小端”格式存储，这意味着：
> 
> *   最低有效字节存储在最低地址
> *   最低有效位存储在编号最低的位位置
> 
> 例如，长值的`0x12345678`存储地址`0x100`如下：
> `**0x100**``**0x101**``**0x102**``**0x103**`
> ` 0x78 `` 0x56 `` 0x34 `` 0x12 `
> 
> 再举一个例子，long 值`0x12345678`存储在寄存器 w4 和​​ w5 中：
> `   **w4**   ` `   **w5**   `
> `0x5678``0x1234`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-24T16:20:54.143

您还可以查看程序的程序集，以尝试了解他们的编译器是如何做到的......例如：

```
int main(int argc, char** argv)
{
  long i = 56;
  long j = i;
  return 0;
} 
```

变成... ( `xc16-gcc -S main.c`)

```
 .file "/Users/grady/MPLABXProjects/testpic24.X/main.c"
    .section    .text,code
    .align  2
    .global _main   ; export
    .type   _main,@function
_main:
    .set ___PA___,1
    lnk #12
    mov w0,[w14+8]
    mov w1,[w14+10]
    mov #56,w4
    mov #0,w5
    mov.d   w4,[w14]
    mov.d   [w14],w4
    mov w4,[w14+4]
    mov w5,[w14+6]
    clr w4
    mov w4,w0
    ulnk    
    return  
    .set ___PA___,0

    .section __c30_signature, info, data
    .word 0x0001
    .word 0x0000
    .word 0x0000

; MCHP configuration words

    .set ___PA___,0
    .end 
```

# python - python扫描目录的文件

> ID：15508205
> 
> 赞同：2
> 
> 时间：2013-03-19T18:59:21.663
> 
> 标签：python

所以我有一个脚本需要在服务器上以不同的时间间隔做 3 件事。

1.  如果下载（使用子进程），则扫描 FTP 以获取 24 小时内更新的文件，
2.  扫描位置 1，如果文件存在移动文件并根据文件的来源重命名（使用子进程），
3.  扫描目录，如果文件存在，则将文件上传到不同的 FTP（使用子进程）。

除了这个，一切都很好；在第 3 次扫描（与第 2 次扫描相同）时，由于某种原因，脚本不想超出“for root, dirs, files in”

```
import sys
import os
import subprocess 
import time
import datetime
from datetime import datetime as dt

# Local Directories 
N_dir_dest = '/Volumes/VoigtKampff/Temp/_Jonatha/BeeCell/N_dest' # Directory where the      NICK source video files needs to be downloaded to
M_dir_dest = '/Volumes/VoigtKampff/Temp/_Jonatha/BeeCell/M_dest' # Directory where the     NICK source video files needs to be downloaded to
encode_dest1 = '/Volumes/VoigtKampff/Temp/_Jonatha/BeeCell/encode_dest1' # Encoding Directory where source videos are moved to after being downloaded and renamed
encodeDrop_dir = '/Volumes/VoigtKampff/Temp/_Jonatha/BeeCell/encodeDrop_dir' # Files ready for uploading to BeeCell FTP 

#Script Starts

while True:
        time.sleep(10)
        if dt.now().hour in range(20, 23):
            print "Starting to Scan UK FTP for source files - time is: %s" % dt.now()
            thedownloadprocess = subprocess.Popen([sys.executable, "/Volumes/VoigtKampff/Temp/_Jonatha/BeeCell/BeeCell_FTP_incoming.py"])
            thedownloadprocess.communicate()
            time.sleep(3600)

        elif dt.now().minute in range(01, 15) or dt.now().minute in range(31, 45):
            time.sleep(10)
            print "Scanning %s and %s - time is: %s" % (N_dir_dest, M_dir_dest, dt.now())
            for root, dirs, files in os.walk(N_dir_dest) or os.walk(M_dir_dest):
                for file in files:
                    path_to_file = os.path.join(root, file)
                    if os.path.isfile(path_to_file) and file.endswith(('.mov', '.mpg', '.mp4')):
                        print "file: %s found - starting rename process" % path_to_file
                        renameprocess = subprocess.Popen([sys.executable, "/Volumes/VoigtKampff/Temp/_Jonatha/BeeCell/BeeCell_rname_files.py"])
                        renameprocess.communicate()
                        print "Finished Rename and encode - sleeping for 10 secs- time is: %s" % dt.now()
                        time.sleep(10)
                    else:
                        print "No files in %s or %s" % (N_dir_dest, M_dir_dest)
                        time.sleep(20) 

        elif dt.now().minute in range(16, 30) or dt.now().minute in range(46, 00): # checking every 120 seconds in the minute range 20 - 59
            time.sleep(10)
            print "scanning %s - time is: %s" % (encodeDrop_dir, dt.now())
            for root, dirs, files in os.walk(encodeDrop_dir):
                for file in files:
                    path_to_file = os.path.join(root, file)
                    if os.path.isfile(path_to_file) and file.endswith(('.mov', '.mpg', '.mp4')):
                        print "file: %s will be uploaded"
                        Nuploadprocess = subprocess.Popen([sys.executable, "/Volumes/VoigtKampff/Temp/_Jonatha/BeeCell/BeeCell_FTPupload.py"]) 
                        Nuploadprocess.communicate()
                        print "Finished Upload - sleeping for 10 secs- time is: %s" % dt.now()
                        time.sleep(10)
                    else:
                        print "No files in %s" % encodeDrop_dir
                        time.sleep(10)

        else:
            print "Relaxing" 
```

当我运行脚本时，如果在目录中找到文件，第一个“elif”运行良好并启动子进程 - 但在第二个“elif”上它只是循环：

```
elif dt.now().minute in range(16, 30) or dt.now().minute in range(46, 00): # checking every 120 seconds in the minute range 20 - 59
            time.sleep(10)
            print "scanning %s - time is: %s" % (encodeDrop_dir, dt.now())
            for root, dirs, files in os.walk(encodeDrop_dir): 
```

循环继续，直到 dt.now() 范围继续移动。我看不出第一个“elif”和第二个“elif”之间的代码有任何区别 - 在过去几天试图找出问题所在破坏我的大脑之后，我愿意听到任何建议！ ??

确定添加打印功能：

```
 print "scanning %s - time is: %s" % (encodeDrop_dir, dt.now())
            print "Upload List: %s" % E_dir_oslist
            for root, dirs, files in os.walk(encodeDrop_dir):
                print "hello"
                for file in files:
                    print "hello 1" 
```

这是输出：

扫描 /Volumes/VoigtKampff/Temp/_Jonatha/BeeCell/encodeDrop_dir - 时间是：2013-03-19 18:22:25.345483

上传列表：[]

你好

更新：如果我将扫描功能移动到子进程调用的脚本中 - 它可以工作。如果以上述方式使用，我还没有发现为什么它会失败。

# c# - 从不在代码隐藏文件中的类调用 TextChanged 事件的静态方法

> ID：15508208
> 
> 赞同：2
> 
> 时间：2013-03-19T18:59:39.910
> 
> 标签：c#, xaml

我正在开发一个 WPF 应用程序，并试图将一个方法绑定到不在代码隐藏文件中的 TextChanged 事件。当方法在文件后面的代码中时，我知道这可以通过使用简单地完成：

```
TextChanged="MyMethod" 
```

我要做的是使用另一个类的静态方法（不在代码隐藏文件中）。理论上看起来像：

```
TextChanged="MyClass.MyOtherMethod" 
```

我试图弄清楚如何引用类和方法，但一直无法弄清楚。我似乎不需要创建资源库 - 有没有办法直接引用我的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:07:10.797

只需创建事件处理程序并从中调用您的静态方法。像这样的东西：

```
myText.TextChanged += myText_TextChanged;

void myText_TextChanged(object sender, TextChangedEventArgs e)
{
     MyStaticHelper.Execute();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:13:30.027

您可以在后面的代码中轻松添加静态事件处理程序：

```
textBox.TextChanged += MyClass.MyOtherMethod; 
```

鉴于事件处理程序如下所示：

```
public class MyClass
{
    public static void MyOtherMethod(object sender, TextChangedEventArgs e)
    {
        ...
    }
} 
```

# php - 从 Wikipedia Api 获取意大利语名称

> ID：15508209
> 
> 赞同：0
> 
> 时间：2013-03-19T18:59:39.527
> 
> 标签：php, wikipedia, wikipedia-api

我们正在尝试从维基百科的 api 获取**意大利**数据。我们有多个名称，需要获得前 10 个结果。

例如，我们想从这个结果的“个人”部分收集数据：http://it.wikipedia.org/wiki/Francesco_(nome [)](http://it.wikipedia.org/wiki/Francesco_(nome))

现在我正在尝试这种方法：

```
$kw = $name."_(nome)";
$url = "http://it.wikipedia.org/w/api.php?format=json&action=query&titles=".$kw."&prop=revisions&rvprop=content"; 
```

其他问题没有多大帮助，我没有得到任何输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:20:15.770

您可以使用[php dom 解析器](http://simplehtmldom.sourceforge.net/)， [文档](http://simplehtmldom.sourceforge.net/manual.htm)

通过在他们的 dom 中简单查找，这里是名字的代码：

```
require('dom/simple_html_dom.php');

$name = 'Francesco';
$kw = $name . '_(nome)';
$html = file_get_html('http://it.wikipedia.org/wiki/' . $kw);

$span = $html->getElementById('Persone');
$h2 = $span->parent();

$ul = $h2->next_sibling()->next_sibling()->next_sibling()->next_sibling();

$lis = $ul->find('li');

foreach($lis as $li){
    echo($li->plaintext . '<br />');
} 
```

# ios - 使用 Facebook sdk 登录时应用程序崩溃

> ID：15508212
> 
> 赞同：3
> 
> 时间：2013-03-19T18:59:45.887
> 
> 标签：ios, objective-c, facebook, facebook-ios-sdk

当用户使用 Facebook 登录时，我试图找出崩溃的 ios 应用程序。该错误并非每次都重现，我只有很少的关于此问题的报告和一个崩溃日志：

```
Process:         Facebook [2417]
Path:            /var/mobile/Applications/ADF140E7-A40C-40A2-BC99-7E558C528F97/Facebook.app/Facebook
Identifier:      Facebook

Exception Type:  EXC_CRASH (SIGBUS)

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3b7c9f04 semaphore_wait_trap + 8
1   libdispatch.dylib               0x3b6f92fc _dispatch_thread_semaphore_wait$VARIANT$mp + 8
2   libdispatch.dylib               0x3b6f787c _dispatch_barrier_sync_f_slow + 96
3   QuartzCore                      0x351829d2 CABackingStoreGetFrontTexture(CABackingStore*) + 50
4   QuartzCore                      0x35198012 CABackingStorePrepareFrontTexture + 38
5   QuartzCore                      0x35175b24 CA::Layer::prepare_commit(CA::Transaction*) + 428
6   QuartzCore                      0x35175246 CA::Context::commit_transaction(CA::Transaction*) + 242
7   QuartzCore                      0x3517504c CA::Transaction::commit() + 312
8   UIKit                           0x3543a0ce -[UIApplication _reportAppLaunchFinished] + 38
9   UIKit                           0x3556ffee -[UIApplication _handleApplicationResumeEvent:] + 1358
10  UIKit                           0x353c7d54 -[UIApplication handleEvent:withNewEvent:] + 1288
11  UIKit                           0x353c76c8 -[UIApplication sendEvent:] + 68
12  Facebook                        0x004a4b3c 0x1d000 + 4750140
13  UIKit                           0x353c7116 _UIApplicationHandleEvent + 6150
14  GraphicsServices                0x370dd5a0 _PurpleEventCallback + 588
15  GraphicsServices                0x370dd1ce PurpleEventCallback + 30
16  CoreFoundation                  0x33594170 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
17  CoreFoundation                  0x33594112 __CFRunLoopDoSource1 + 134
18  CoreFoundation                  0x33592f94 __CFRunLoopRun + 1380
19  CoreFoundation                  0x33505eb8 CFRunLoopRunSpecific + 352
20  CoreFoundation                  0x33505d44 CFRunLoopRunInMode + 100
21  GraphicsServices                0x370dc2e6 GSEventRunModal + 70
22  UIKit                           0x3541b2fc UIApplicationMain + 1116
23  Facebook                        0x0001fbd0 0x1d000 + 11216
24  Facebook                        0x0001fb94 0x1d000 + 11156 
```

我已经在子存储库中将 ShareKit 库与更新的 Facebook 版本集成，但我将 Facebook.h 导入到 ApplicationDelegate 类中，并通过[http://developers.facebook.com/docs/中的步骤直接使用它进行授权教程/ios-sdk-tutorial/authenticate/](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)

请告诉我在崩溃日志中查找问题的方法是什么？

ApplicationDelegate 类包含：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    ....
    [FBSession.activeSession handleDidBecomeActive];
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    ....  
    [FBSession.activeSession close];
}

/*
 * If we have a valid session at the time of openURL call, we handle
 * Facebook transitions by passing the url argument to handleOpenURL
 */
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    [ProgressHUD displayProcessingIndicator];

    // attempt to extract a token from the url
    return [FBSession.activeSession handleOpenURL:url];
}

/*
 * Callback for session changes.
 */
- (void)sessionStateChanged:(FBSession *)session state:(FBSessionState) state error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
            if (!error) {
                // We have a valid session
            }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:    
            [FBSession.activeSession closeAndClearTokenInformation];
            break;
        default:
            break;
    }

    [[NSNotificationCenter defaultCenter] postNotificationName:@"FacebookSessionStateChangeNotification"
                                                        object:session];

    if (error) {
        [ProgressHUD hideIndicator];
    }
}

/*
 * Opens a Facebook session and optionally shows the login UX.
 */
- (void)openFacebookSession
{
    // To using the internal ios6 integration, call openActiveSessionWithReadPermissions method
    #pragma GCC diagnostic ignored "-Wdeprecated-declarations"
    [FBSession openActiveSessionWithPermissions:[NSArray arrayWithObject:@"email"]
                                   allowLoginUI:YES
                              completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                  [self sessionStateChanged:session state:state error:error];
                              }];
    #pragma GCC diagnostic warning "-Wdeprecated-declarations"
}

- (void)closeFacebookSession
{
    if (FBSession.activeSession.isOpen) {
        [FBSession.activeSession closeAndClearTokenInformation];
    }
} 
```

非常感谢。

# html - ul >li 样式并保持在一行内

> ID：15508215
> 
> 赞同：3
> 
> 时间：2013-03-19T18:59:53.517
> 
> 标签：html, css

我正在尝试创建一个包含 4 个项目的菜单列表项，但由于某种原因它不会在一行内提供。我尝试用嵌套的 div 嵌套它，但没有运气。当我添加`padding: 10px;`.

这是我拥有的最新 HTML 和 CSS：

HTML：

```
<div id="header">
    <ul id="menu">
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Info</a></li>
        <li><a href="#">Contact</a></li>
    </ul>
</div> 
```

CSS：

```
#menu {
    margin: 0;
    padding: 0;
}

#menu li {
    display: block;
    float: left;
    margin: 0;
    width: 25%;
    background-color: gray;
    padding: 10px;
} 
```

我也有一个 jsfiddle：http: [//jsfiddle.net/GLh92/1/](http://jsfiddle.net/GLh92/1/)

如您所见，它不适合一行。我在这里也有一个响应问题。因此，它需要适合不同的屏幕分辨率的一行。

知道如何以干净的方式完成此操作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T19:04:13.650

`box-sizing: border-box`在`li`元素上使用。这将使填充部分成为宽度计算的一部分。

[http://jsfiddle.net/ExplosionPIlls/GLh92/5/](http://jsfiddle.net/ExplosionPIlls/GLh92/5/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T19:04:12.413

查看 box-sizing css 属性，它会改变你的生活。

```
#menu li {
    display: inline-block;
    float: left;
    margin: 0;
    width: 25%;
    background-color: gray;
    padding: 10px;
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T19:05:44.383

解决方案是将填充添加到`<a>`标签，而不是`<li>`标签，因为填充会增加实际宽度。

1.  删除填充`<li>`
2.  添加`padding: 10px;`到`<a>`
3.  关闭你的`<a>`标签

[http://jsfiddle.net/GLh92/7/](http://jsfiddle.net/GLh92/7/)

**HTML：**

```
<div id="header">
    <ul id="menu">
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Info</a></li>
        <li><a href="#">Contact</a></li>
    </ul>
</div> 
```

**CSS：**

```
#menu {
    margin: 0;
    padding: 0;
}

#menu li {
    display: block;
    float: left;
    margin: 0;
    width: 25%;
    background-color: gray;
}

#menu li a {
    display: block;
    padding: 10px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T19:03:57.097

填充为您的元素添加宽度和/或高度，您应该使用 li 元素的子元素处理填充或边距。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T19:04:42.777

当您提到`padding:10px;`它时，它也会增加`<li>`项目的宽度。所以你需要照顾`width:20%;`

试试这个：

```
#menu li {
    display: block;
    float: left;
    margin: 0;
    width: 20%;
    background-color: gray;
    padding:10px;
} 
```

它将位于同一行之下。这是你要找的吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T19:07:22.287

问题是您将每个 li 元素的宽度设置为 25%。您有四个列表元素，只要没有填充就可以了（ 25*4 = 100 ）但是当您添加填充时，其中一个元素移动到下一行。（ 25*4 + 10(padding) > 100 ）

将宽度的值更改为其他行 15%

```
#menu li {
display: inline-block;
float: left;
margin: 0;
width: 15%;
background-color: gray;
padding: 10px; 
```

}

[http://jsfiddle.net/GLh92/9/](http://jsfiddle.net/GLh92/9/)

# c++ - 提升中的日期（仅年份）之间的差异

> ID：15508217
> 
> 赞同：1
> 
> 时间：2013-03-19T19:00:08.460
> 
> 标签：c++, boost

我想知道是否有任何**简单而简短**的方法来计算 C++ 中两个日期之间经过多少年的提升？

例如（YYYY-MM-DD）：

2005-01-01 到 2006-01-01 为 1 年

2005-01-02 到 2006-01-01 为 0 年

如果我假设使用这样的代码没有闰年，我可以很容易地计算出来：

```
boost::gregorian::date d1( 2005, 1, 1 );
boost::gregorian::date d2( 2006, 1, 1 );

boost::gregorian::date_duration d3 = d1 - d2;
std::cout << abs( d3.days() ) / 365; 
```

但是使用这样的代码，2000-01-02 和 2001-01-01 之间的差异是 1 年，应该是 0，因为 2000 是闰年，我想考虑闰年。

// 编辑

我想将年份作为整数。我已经创建了这样的代码（我认为现在可以使用），但是如果有人比我对 boost 有更好的了解，我会很感激一些优雅的解决方案：

```
boost::gregorian::date d1( 2005, 4, 1 );
boost::gregorian::date d2( 2007, 3, 1 );

int _yearsCount = abs( d1.year() - d2.year() );

// I want to have d1 date earlier than d2
if( d2 < d1 ) {
    boost::gregorian::date temp( d1 );
    d1 = boost::gregorian::date( d2 );
    d2 = temp;
}

// I assume now the d1 and d2 has the same year
// (the later one), 2007-04-01 and 2007-03-1
boost::gregorian::date d1_temp( d2.year(), d1.month(), d1.day() );
if( d2 < d1_temp )
    --_yearsCount; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:43:39.170

假设您想要完整的年数（0、1 或更多），那么：

```
if (d1 > d2)
    std::swap(d1, d2); // guarantee that d2 >= d1

boost::date_time::partial_date pd1(d1.day(), d1.month());
boost::date_time::partial_date pd2(d2.day(), d2.month());

int fullYearsInBetween = d2.year() - d1.year();
if (pd1 > pd2)
    fullYearsInBetween -= 1; 
```

虽然这基本上等于你的算法（你在我写这篇文章时编辑了这篇文章）。

# machine-learning - 隐藏马尔可夫模型下一个状态仅取决于前一个状态？那么之前的 n 个状态呢？

> ID：15508222
> 
> 赞同：1
> 
> 时间：2013-03-19T19:00:25.107
> 
> 标签：machine-learning, hidden-markov-models, markov-chains

我正在研究原型框架。

基本上，我需要根据关于他/她的一些传感器数据（例如 GPS、运动、心率、周围环境读数、温度等）为每个人的生活方式生成模型或配置文件。

建议的模型或配置文件是个人生活方式模式的知识表示。也许是一个带有概率的图表。

我正在考虑使用隐马尔可夫模型来实现这一点。由于 HMM 中的状态可以是工作、睡眠、休闲、运动等。观察可以是一组各种传感器数据。

我对 HMM 的理解是，下一个状态 S(t) 仅取决于前一个状态 S(t-1)。然而实际上，一个人的活动可能取决于之前的 n 个状态。使用 HMM 仍然是个好主意吗？或者我应该使用其他更合适的模型吗？我看过一些关于二阶和多阶马尔可夫链的工作，它是否也适用于 HMM？

如果你能给我一个详细的解释，我真的很感激。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:09:21.767

您正在谈论的是一阶 HMM，其中您的模型只知道以前的历史状态。在 Order-n Markov 模型的情况下，下一个状态将取决于之前的“n”个状态，这可能是您正在寻找的对吗？

您是对的，就简单的 HMM 而言，下一个状态仅取决于当前状态。但是，也可以通过定义转换概率来实现 m 阶 HMM [，如此链接](http://jedlik.phy.bme.hu/~gerjanos/HMM/node5.html)所示。但是，随着顺序的增加，矩阵的整体复杂性以及模型的整体复杂性也会增加，因此，如果您愿意迎接挑战并愿意付出必要的努力，这真的取决于您。

# c# - ListViewItem 边框 - 精简框架

> ID：15508224
> 
> 赞同：5
> 
> 时间：2013-03-19T19:00:27.977
> 
> 标签：c#, listview, compact-framework, border, listviewitem

我有一个`ListView`添加为`Items`一些`ListViewItem`s 的地方。该`View`属性设置为`Details`。`ListView`显示时， `ListViewItem`s 没有任何边框（将一个项目与另一个项目分开的顶部和底部线）。

如何为我的所有项目添加边框？

一个例子：

![在此处输入图像描述](../Images/fb51a501d8a83098dbf49d349421a0e4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T20:22:08.237

无论出于何种原因，CF 控件都不支持网格线，尽管底层本机 ListView 支持。P /调用救援。

```
private const uint LVM_FIRST = 0x1000;
private const uint LVM_SETEXTENDEDLISTVIEWSTYLE = LVM_FIRST + 54;
private const uint LVM_GETEXTENDEDLISTVIEWSTYLE = LVM_FIRST + 55;
private const uint LVS_EX_GRIDLINES = 0x00000001;

[DllImport("coredll.dll")]
private static extern uint SendMessage(IntPtr hwnd, uint msg, uint wparam, uint lparam);

public void EnableGridlines(ListView listView)
{
    var style = SendMessage(
            listView.Handle,
            LVM_GETEXTENDEDLISTVIEWSTYLE,
            0,
            0);

    style |= LVS_EX_GRIDLINES;

    var style = SendMessage(
            listView.Handle,
            LVM_SETEXTENDEDLISTVIEWSTYLE,
            0,
            style);    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:51:15.380

ListView 不支持紧凑框架中的 GridLines。您可以使用 DataGridView

# performance - 使用 CoreGraphics 循环绘制会产生性能问题

> ID：15508225
> 
> 赞同：0
> 
> 时间：2013-03-19T19:00:50.913
> 
> 标签：performance, uiview, core-graphics, drawrect

我有兴趣在子类 UIView 中覆盖 drawRect 以为 tableView 创建简单的纹理背景。我已经完成了我的目标，但表现并不是那么出色。我知道这对于像我这样的新手来说是一个普遍的问题。但是，由于这是我第一次使用 CoreGraphics，我无法诊断问题的根源。

通过性能打击，我的意思是在 tableViewController 通过导航控制器动画之前存在滞后。如果你愿意，它会挂起。第一次启动我的任何 UITableViewController 时都会出现性能下降，并使用 [[self tableView] setBackgroundView:level1View]; 的适当设置。表视图的后续渲染对性能的影响为 0。当我没有将 backgroundView 属性设置为我的自定义绘制视图时，性能问题就会消失。任何想法都非常感谢。

几个警告：我宁愿不为此平铺图像，除非它是这样做的唯一有效方式。（尝试学习，什么不。）另外，我的代码基于这里找到的教程：[http ://www.raywenderlich.com/2167/core-graphics-101-patterns](http://www.raywenderlich.com/2167/core-graphics-101-patterns)

```
#import "HordLevel1View.h"

static inline double radians (double degrees) { return degrees * M_PI/180; }
void MyDrawColoredPattern1 (void *info, CGContextRef context)
{

UIColor * dotColor = [UIColor colorWithHue:0 saturation:0 brightness:0.90 alpha:1.0];
UIColor * shadowColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.2];

CGContextSetFillColorWithColor(context, dotColor.CGColor);
CGContextSetShadowWithColor(context, CGSizeMake(0, 0), .25, shadowColor.CGColor);

//First line of circles
CGContextAddArc(context, 1, 1, 1, 0, radians(360), 0);
CGContextFillPath(context);

CGContextAddArc(context, 3, 2, 1, 0, radians(360), 0);
CGContextFillPath(context);

CGContextAddArc(context, 5, 0, 1, 0, radians(360), 0);
CGContextFillPath(context);

CGContextAddArc(context, 5, 3, 1, 0, radians(360), 0);
CGContextFillPath(context);

CGContextAddArc(context, 1, 4, 1, 0, radians(360), 0);
CGContextFillPath(context);

CGContextAddArc(context, 3, 5, 1, 0, radians(360), 0);
CGContextFillPath(context);

CGContextAddArc(context, 5, 6, 1, 0, radians(360), 0);
CGContextFillPath(context);

}

@implementation HordLevel1View

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Initialization code
}
return self;
}

- (void)drawRect:(CGRect)rect
{
CGContextRef context = UIGraphicsGetCurrentContext();

UIColor * bgColor = [UIColor colorWithHue:0 saturation:0 brightness:0.85 alpha:1.0];
CGContextSetFillColorWithColor(context, bgColor.CGColor);
CGContextFillRect(context, rect);

static const CGPatternCallbacks callbacks = { 0, &MyDrawColoredPattern1, NULL };

CGContextSaveGState(context);
CGColorSpaceRef patternSpace = CGColorSpaceCreatePattern(NULL);
CGContextSetFillColorSpace(context, patternSpace);
CGColorSpaceRelease(patternSpace);

CGPatternRef pattern = CGPatternCreate(NULL,
                                       rect,
                                       CGAffineTransformIdentity,
                                       6,
                                       6,
                                       kCGPatternTilingConstantSpacing,
                                       true,
                                       &callbacks);
CGFloat alpha = 1.0;
CGContextSetFillPattern(context, pattern, &alpha);
CGPatternRelease(pattern);
CGContextFillRect(context, self.bounds);
CGContextRestoreGState(context);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T22:10:11.773

抱歉没有人解决这个问题，希望我的回复仍然有意义！我敢肯定，自三月以来，你已经走了很长一段路。

我的第一个想法是图像不仅是一种快速的方法，而且它的代码更简单，也更灵活。但是假设您需要动态绘制，因为内容会根据用户输入而发生根本变化（我认为这不太可能:]）。

在这种情况下，还有一些想法：

*   创建模式一次，而不是每个 drawRect 调用一次，而不是每个单元格视图一次。
*   更好的是，使用您的模式创建一个 UIImage，并在您的单元格中使用它
*   使用正确的模式边界（我认为你正在制作整个视图大小的模式）

# android - java.lang.RuntimeException：无法恢复活动 Android

> ID：15508227
> 
> 赞同：3
> 
> 时间：2013-03-19T19:01:02.097
> 
> 标签：android, android-tabhost

我正在尝试获取设备蓝牙地址，所以当我点击发送时

```
startActivityForResult(new Intent(getApplicationContext(),
                        DeviceListActivity.class), GET_DEVICE_TO_SEND); 
```

通过蓝牙文件发现完成后开始我选择一个已创建的设备

在`onActivityResult` 我有这些代码

```
if (requestCode == GET_DEVICE_TO_SEND && resultCode == RESULT_OK) {
String device = data
.getStringExtra(DeviceListActivity.DEVICE_ADDRESS);
String name = data.getStringExtra(DeviceListActivity.DEVICE_NAME); 
```

该函数`onActivityResult` 被调用，然后应用程序停止

类：`MainUI`包含 Tabhost 。

类：`FilesUI` 是函数所在的`onActivityResult`位置

日志

```
03-19 18:39:28.858: E/AndroidRuntime(22817): java.lang.RuntimeException: Unable to resume activity {com.android.Connect/com.android.Connect.UI.MainUI}: java.lang.RuntimeException:`enter code here` Failure delivering result ResultInfo{who=Files, request=1, result=-1, data=Intent { (has extras) }} to activity {com.android.Connect/com.android.Connect.UI.MainUI}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-10-13T12:53:41.993

问题就在这里

```
 String msg = "file," + fileToSend.getName() + "," + readFileAsString(fileToSend.getPath()); Log.d(TAG, "the file " + msg); 
```

# iphone - 具有 assign 属性的属性委托的现有实例变量委托必须是 unsafe_unretained

> ID：15508230
> 
> 赞同：3
> 
> 时间：2013-03-19T19:01:19.807
> 
> 标签：iphone, objective-c, automatic-ref-counting, xcode4.5

出现错误

```
@protocol TapDetectingImageViewDelegate;

@interface TapDetectingImageView : UIImageView {
id <TapDetectingImageViewDelegate> tapDelegate;

@property (nonatomic, assign) id <TapDetectingImageViewDelegate> tapDelegate;

@synthesize tapDelegate; 
```

尝试了一切

```
 _weak id <TapDetectingImageViewDelegate> tapDelegate;

 @property (weak) id <TapDetectingImageViewDelegate> tapDelegate; 
```

甚至也试过这个

```
_unsafe_unretained id <TapDetectingImageViewDelegate> tapDelegate;

@property (_unsafe_unretained) id <TapDetectingImageViewDelegate> tapDelegate; 
```

甚至尝试在使用 ARC 模式时删除实例变量定义，因为 synthesize 会处理它。

但是仍然没有任何方法可以消除此错误。

如果有人可以帮我解决这个错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-23T12:43:39.353

我是 Obj-C 的新手，我找到了这个解决方案[https://stackoverflow.com/a/10080387/3867557](https://stackoverflow.com/a/10080387/3867557) ，您的代码应该如下所示：

```
@protocol TapDetectingImageViewDelegate;
@interface TapDetectingImageView : UIImageView 
@property (nonatomic, assign) id <TapDetectingImageViewDelegate> tapDelegate; 
```

希望它有所帮助。

# ios - 为什么在Objective C中转换为字符串时char数组会插入尾随字符？

> ID：15508231
> 
> 赞同：2
> 
> 时间：2013-03-19T19:01:19.783
> 
> 标签：ios, objective-c

我正在尝试在 NSString 上编写一个快速类别来对字符串的内容进行 base64 编码。一切似乎都很好，除了在生成的字符串的尾端出现了额外的字符。谁能解释为什么下面的代码会产生下面的输出？

来源：

```
const char base64CharSet[64] = {
    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',
    'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',
    'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',
    'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',
    'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',
    'o', 'p', 'q', 'r', 's', 't', 'u', 'v',
    'w', 'x', 'y', 'z', '0', '1', '2', '3',
    '4', '5', '6', '7', '8', '9', '+', '/'
};

const char *input = "Hello, World!";

int length = strlen(input);
int outlen = (length / 3) * 4;
int modlen = length % 3;
int rawlen = length - modlen;

if (modlen != 0)
    outlen += 4;

char output[outlen];

char inbuf[3], outbuf[4];
int inpos = 0, outpos = 0;

for (outpos = 0, inpos = 0; inpos < rawlen; inpos += 3) {
    for (int i = 0; i <  3; i++) {
        int j = inpos + i;
        inbuf[i] = j < length ? input[j] : 0;
    }

    outbuf[0] =  (inbuf[0] & 0xFC) >> 2;
    outbuf[1] = ((inbuf[0] & 0x03) << 4) | ((inbuf[1] & 0xF0) >> 4);
    outbuf[2] = ((inbuf[1] & 0x0F) << 2) | ((inbuf[2] & 0xC0) >> 6);
    outbuf[3] =  (inbuf[2] & 0x3F);

    output[outpos++] = base64CharSet[outbuf[0]];
    output[outpos++] = base64CharSet[outbuf[1]];
    output[outpos++] = base64CharSet[outbuf[2]];
    output[outpos++] = base64CharSet[outbuf[3]];
}

if (modlen > 0) {
    char modbuf[3] = {0, 0, 0};

    for (int i = 0; i < modlen; i++) {
        int j = rawlen + i;
        modbuf[i] = input[j];
    }

    outbuf[0] =  (modbuf[0] & 0xFC) >> 2;
    outbuf[1] = ((modbuf[0] & 0x03) << 4) | ((modbuf[1] & 0xF0) >> 4);
    outbuf[2] = ((modbuf[1] & 0x0F) << 2) | ((modbuf[2] & 0xC0) >> 6);
    outbuf[3] =  (modbuf[2] & 0x3F);

    output[outpos++] = base64CharSet[outbuf[0]];
    output[outpos++] = base64CharSet[outbuf[1]];
    output[outpos++] = modlen == 2 ? base64CharSet[outbuf[2]] : '=';
    output[outpos++] = '=';
}

NSLog(@"Input: '%s', Length: %zd", input, strlen(input));
NSLog(@"Output: '%s', Length: %zd, Expected Length: %d", output, strlen(output), outlen); 
```

输出：

```
2013-03-19 14:46:51.568 Sandbox[19195:c07] Input: 'Hello, World!', Length: 13
2013-03-19 14:46:51.569 Sandbox[19195:c07] Output: 'SGVsbG8sIFdvcmxkIQ==wä]', Length: 23, Expected Length: 20 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:04:08.237

```
2013-03-19 14:46:51.569 Sandbox[19195:c07] Output: 'SGVsbG8sIFdvcmxkIQ==wä]', Length: 23, Expected Length: 20 
```

最后的 goober 是因为您没有 NULL 终止输出缓冲区。C 字符串要求字符串中最后一个字符之后的字符为 0（全为 0 位，而不是 ASCII "0" :)。

* * *

> ...附加到完整数组会引发异常...

欢迎来到C！该语言类似于用剪刀奔跑。即使跌倒，也不会受伤。可能不。

在这种情况下，您实际上并没有写入 NULL 字节，因此，C 字符串的打印只是读取字符串数组之后发生在堆栈上的任何内容。我没有审核代码以确定缓冲区的大小是否正确。

假设您的所有数学运算都是正确的，您可以将缓冲区分配为比编码所需的长一个字节，并将终止符放在那里。

```
char output[outlen + 1];
output[outlen + 1] = 0; 
```

# breeze - 1.2.1 未映射的属性不应该被序列化

> ID：15508233
> 
> 赞同：0
> 
> 时间：2013-03-19T19:01:41.710
> 
> 标签：breeze

不确定这是否是一个错误，但是：当您使用 observable 扩展类型时，它也会在*saveChanges*中序列化。这使得*EFContextProvider*无法删除实体。

发送的json示例：

```
{"entities": [{
    "Id":1015,
    "Key":"3",
    "Value":"2",
    "undefined":"",
    "entityAspect":{
        "entityTypeName":"Setting:#Settings_Beeze.Models",
        "entityState":"Deleted",
        "originalValuesMap":{"isBeingEdited":false},
        "autoGeneratedKey":{
             "propertyName":"Id",
             "autoGeneratedKeyType":"Identity"}}}],
"saveOptions":{
    "allowConcurrentSaves":false}} 
```

isBeingEdited - 是客户端可观察的，不应该发送到服务器（我认为是这样）。它还生成*未定义*字段（它不是扩展对象的一部分，它来自任何地方）。

*因此， EFContextProvider*中的服务器端代码因*NullReferenceException*而失败，这是堆栈跟踪：

```
at Breeze.WebApi.EFContextProvider`1.SetPropertyValue(Object entity, String propertyName, Object value)
at Breeze.WebApi.EFContextProvider`1.<>c__DisplayClassd.<RestoreOriginal>b__c(KeyValuePair`2 kvp)
at System.Collections.Generic.List`1.ForEach(Action`1 action)
at Breeze.WebApi.EFContextProvider`1.RestoreOriginal(EntityInfo entityInfo)
at Breeze.WebApi.EFContextProvider`1.<ProcessAllDeleted>b__6(EFEntityInfo entityInfo)
at System.Collections.Generic.List`1.ForEach(Action`1 action)
at Breeze.WebApi.EFContextProvider`1.ProcessAllDeleted(List`1 deletedEntities)
at Breeze.WebApi.EFContextProvider`1.SaveChangesCore(Dictionary`2 saveMap)
at Breeze.WebApi.ContextProvider.SaveChanges(JObject saveBundle)
at Settings_Beeze.Controllers.DataController.SaveChanges(JObject saveBundle) in s:\Projects\Else\Settings Beeze\Settings Beeze\Controllers\DataController.cs:line 35
at lambda_method(Closure , Object , Object[] )
at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
at System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken) 
```

作为修复想法：*unwrapOriginalValues*应该检查属性是否未映射并继续下一个而不将其写入答案。

*   将问题从 GitHub 移至 SO

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:55:21.487

对我来说听起来像是一个错误。我们会跳上去的。

# php - 计算行值相同的列数

> ID：15508239
> 
> 赞同：0
> 
> 时间：2013-03-19T19:01:55.663
> 
> 标签：php, mysql, repeat, multiple-columns, vote

我正在做编码`PHP 5.2.17`

我想计算名为列的值为的用户`vote`数`1`

当用户对图像进行投票时，有 5 件事要投票，图像的 id 被添加到投票中（在上述情况 1 中）

所以我想显示统计数据，**即**分别为图像投票的人数。

**即**投票的价值应该显示在相应的图像旁边。

帮我处理 MySQL 代码和 PHP

我尝试了所有类型的计数组合，但无法获得所需的结果！这是我最近的尝试

```
$q = mysqli_query("SELECT count(vote) as Users_who_voted_count FROM data WHERE vote='2'");

$res = mysql_fetch_assoc($q);
echo $res['Users_who_voted_count'];
window.jQuery 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:21:14.663

第一：不要混用`mysqli`和`mysql`功能！

查看 mysqli 的文档，然后重试。

第二：您的 mysql 查询应如下所示：

```
SELECT count(*) as Users_who_voted_count,vote FROM data WHERE vote = '2' GROUP BY vote 
```

# sql - 需要帮助通过 guid 连接两个表，然后按行跨列添加值

> ID：15508246
> 
> 赞同：0
> 
> 时间：2013-03-19T19:02:31.010
> 
> 标签：sql, join, one-to-many, multiple-tables

我有两张桌子。

一张表存储项目及其成本，并使用自己的 guid 进行唯一存储。

**项目成本表**

```
Item_ID     ItemCategory   Item    Cost

x-xx-x      Computer       Laptop  400.00 
```

另一个表存储了一个工作空间，该工作空间是这些项目的集合，最好的说明。

**工作空间表**

```
WorkSpace_ID    Workspace_Name   Item_Category_1     Item_Category_2 and so on....

xx-xx-xx         Workspace A     xx-xx-xx          (the guid from the first table) 
```

现在我需要某种方法将 ItemCost 表中的成本与它们在 Work Space 表中表示的 guid 连接起来，然后将它们加到各列中以得出工作空间的总成本。Work Space 表中的某些 Item_Category 列将为空。

相当新的 SQL，在这里学习。如果有更好的方法来构建这个，我愿意提出建议。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:08:27.687

那么你的问题的一部分是`Workspace`表的结构。该表未标准化。

在您当前的设计中，您将需要多次*取消透视*或加入表格以获得结果。`workspace`

当前结构查询将是：

```
select *
from itemcost i
left join
(
  select workspace_id,
    worksapce_name,
    item_category_1 ItemCategory
  from workspace
  union all
  select workspace_id,
    worksapce_name,
    item_category_2
  from workspace
) w
  on i.Item_ID = w.ItemCategory 
```

通常你会有一个`Workspace`表和一个单独的表来链接`ItemCost`到被`Workspace`调用的`workspace_items`：

```
create table workspace
(
  workspace_id, 
  Workspace_Name
);

create table workspace_items
(
  workspace_id, 
  Item_ID
); 
```

这将使桌子上的连接更加容易。此结构允许您为每个工作区分配多个项目类别。如果您更改表结构，那么您的查询将是：

```
select *
from itemcost i
left join workspace_items wo
  on i.item_id = wi.item_id
left join workspace w
  on wi.workspace_id = w.workspace_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:06:15.703

您需要在 WorkSpaces 和 Items 之间创建另一个多对多表（并从 Workspace 表中删除 Item 列）：

WorkSpaceItems 表：WorkSpace_ID -- ItemID

然后很容易查询所有 WorkSpaceItem，将其连接到 Items 表并进行总结。

这是架构和示例查询的链接：[http ://www.sqlfiddle.com/#!3/35336/7](http://www.sqlfiddle.com/#!3/35336/7)

# linux - 未提供 http 静态目录

> ID：15508250
> 
> 赞同：7
> 
> 时间：2013-03-19T19:02:48.450
> 
> 标签：linux, http, web-applications, filesystems, go

我不明白为什么我的静态资源没有被提供。这是代码：

```
func main() {
    http.HandleFunc("/", get_shows)
    http.HandleFunc("/get",  get_show_json)
    http.HandleFunc("/set", set_shows)
    http.Handle("/css/", http.FileServer(http.Dir("./css")))
    http.Handle("/js/", http.FileServer(http.Dir("./js")))
    http.ListenAndServe(":8080", nil)
} 
```

当我运行程序时，导航到[http://myhost.fake/css/](http://myhost.fake/css/)或[http://myhost.fake/css/main.css](http://myhost.fake/css/main.css)（它们存在于文件系统中），我收到 404 错误。如果我将“./css”替换为目录的完整路径，情况也是如此。同样适用于 js 静态目录。我的其他处理程序工作正常。我在linux上。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T19:24:47.783

您的处理程序路径 ( `/css/`) 被传递给 FileServer 处理程序以及前缀后面的文件。这意味着当您访问[http://myhost.fake/css/test.css](http://myhost.fake/css/test.css)时，您的 FileServer 正在尝试查找该文件`./css/css/test.css`。

http 包提供了[`StripPrefix`](http://godoc.org/net/http#StripPrefix)去除`/css/`前缀的功能。

这应该这样做：

```
http.Handle("/css/", http.StripPrefix("/css/", http.FileServer(http.Dir("css")))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:12:16.267

我现在无法验证，但 IIRC: `s/"./css"/"css"/`; `s/"./js"/"js"/`.

编辑：现在我终于可以检查来源了：这就是我所做的并且对我有用：

```
http.Handle("/scripts/", http.FileServer(http.Dir("")))
http.Handle("/images/", http.FileServer(http.Dir(""))) 
```

中的所有图像都`./images/*.{gif,png,...}`可以正确提供。关于脚本的同样的故事。

# php - 一些变量不是通过引用传递的

> ID：15508251
> 
> 赞同：0
> 
> 时间：2013-03-19T19:02:53.487
> 
> 标签：php

昨天我和我的一个朋友正在浏览静态类和实例类；然后突然发生了一些奇怪的行为。

```
<?php
class NumberContainerO {
     public $_number;

     public function __construct($number) {
          $this->_number = $number;
     }    
}

$list = array();

$n = new NumberContainerO(1);
$list[] = &$n->_number;

$n = new NumberContainerO(2);
$list[] = &$n->_number;

$n = new NumberContainerO(3);
$list[] = &$n->_number;

var_dump($list);
?>

<?php
class NumberContainer {
     public static $_number;

     public static function __Add($number) {
          self::$_number = $number;
     }
}

$list = array();

NumberContainer::__Add(1);
$list[] = &NumberContainer::$_number;

NumberContainer::__Add(2);
$list[] = &NumberContainer::$_number;

NumberContainer::__Add(3);
$list[] = &NumberContainer::$_number;

var_dump($list);
?> 
```

输出

> 数组(3) { [0]=> int(1) [1]=> int(2) [2]=> &int(3) } 数组(3) { [0]=> &int(3) [1] => &int(3) [2]=> &int(3) }

为什么 int(1) 和 int(2) 不通过引用传递？

键盘：[http ://codepad.org/DsEZDFYf](http://codepad.org/DsEZDFYf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:13:07.847

请参阅[取消设置参考](http://www.php.net/manual/en/language.references.unset.php)。

当您这样做`$n = new NumberContainerO(2);`（和`$n = new NumberContainerO(3);`）时，您将取消设置 previous `$n->_number`，从而破坏参考。然后数组元素就变成了标准的非引用值。

# ruby - 我怎样才能 gsub 直到下一个空行？

> ID：15508257
> 
> 赞同：0
> 
> 时间：2013-03-19T19:03:14.383
> 
> 标签：ruby, regex, markup, textile

给定这个字符串：

```
bc.  some text
 more text
 even more

^ above here is the empty line 
```

我希望它是：

```
<pre>
some text
more text
even more
</pre>

^ above here is the empty line 
```

如何正则表达式**“从`bc.`第一个空行开始”**？

到目前为止，我得到了这个：

```
# note that for some reason a direct .gsub! behaves
# differently/fails when using the block, so I use .gsub
textile_markup = textile_markup.gsub(/^bc.  .*^$/m) { |s| "<pre>#{s[5..(s.length)]}</pre>" } 
```

可以理解，这匹配贪婪，直到最后一个空行 - 而不是第一个空行。 **如何使 ^$ 部分不贪婪？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:28:29.353

```
str = 
"bc.  some text
more text
even more

^ above here is the empty line

bc.  some text
more text
even more

^ above here is the empty line"

puts str.gsub(/^bc\.  (.*?)\n\n/m, "<pre>\n\\1\n</pre>\n\n") 
```

输出：

```
<pre>
some text
more text
even more
</pre>

^ above here is the empty line

<pre>
some text
more text
even more
</pre>

^ above here is the empty line 
```

### 解释

`?`in`.*?`使星号算子不贪心

`/m`最后修饰符使点匹配换行符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:09:05.450

可以一口气完成，但需要一些准备：

```
txt = <<DOC
bc.  some text
 more text
 even more

bc.  some text
 more text
 even more

DOC

TRANSFORMS = {"bc.  " => "<pre>\n",       # The 'bc.  should become <pre> followed by a line-end
              /^ /    => "",              # leading space should be eliminated
             "\n\n"   => "\n<\/pre>\n\n"} # empty line should be preceded by a closing pre-tag

re = Regexp.union(TRANSFORMS.keys)
puts txt.gsub(re, TRANSFORMS) 
```

输出：

```
<pre>
some text
more text
even more
</pre>

<pre>
some text
more text
even more
</pre> 
```

# c# - string.format if else 语句

> ID：15508262
> 
> 赞同：0
> 
> 时间：2013-03-19T19:03:21.873
> 
> 标签：c#, string, if-statement, format

string.format 中的 if 语句怎么办？我需要检查 x=0、x=1 或 x=null 我知道我可以使用两个值，但我不确定如何在此处添加另一个 else 语句

```
String.Format("{0}", x == 0 ? "True" : "False") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:05:05.183

```
String.Format("{0}", x == null ? "<null>": (x == 0 ? "True" : "False")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:04:51.537

> 如何在此处添加另一个 else 语句

嵌套`?:`是可能的，但几乎总是一个坏主意。

一个直接的答案，假设`x`是`int?`只使用`( )`：

```
 String.Format("{0}", x == null ? "Null" : (x.Value == 0 ? "True" : "False")) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T19:07:58.453

我不喜欢三元 if 的嵌套。在一般情况下，根据您使用的 C# 版本，您可以尝试以下操作：

```
var values = new Dictionary<int?, string>()
{
    { 0, "zero"},
    { 1, "one"},
    { 2, "two"},
    { null, "none"}
};

String.Format("{0}", values[x]); 
```

IMO，表总是击败超过 3 个值的复杂 if 语句。

# php - 如何用 $_REQUEST[] 编写 ${$var}

> ID：15508263
> 
> 赞同：0
> 
> 时间：2013-03-19T19:03:23.197
> 
> 标签：php, request

以下示例工作正常：

```
$name = 'MrSmith';
$var  = 'name';
echo ${$var}; 
```

但是提交的时候需要用到`$_REQUEST`，不知道怎么写。这不起作用：

```
$_REQUEST[${$var}] 
```

什么是正确的语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:05:22.713

我想你只是想要：

```
$_REQUEST[$var]; 
```

这将为您提供`$_REQUEST['name']`if `$var`= 'name'的值

同样对于您的原始示例，这也适用：

```
echo $$var; 
```

我建议阅读有关[可变变量](http://php.net/manual/en/language.variables.variable.php)的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:09:32.710

`$$var`是一个变量变量。如果`$var`等于您的问题中描述的“名称”，它将查找变量`$name`。`$name`未定义。考虑以下：

```
$var = 'name';
$_REQUEST['name'] = 'test';

$_REQUEST[$$var]; // is the same as...
$_REQUEST[$name]; // which is the same as...
$_REQUEST[NULL]; // since $name is not set.

echo $_REQUEST[$var]; // prints 'test' because $var evaluates to 'name'. 
```

# initialization - 我可以将 Loadrunner Vuser 初始化为单例吗？

> ID：15508268
> 
> 赞同：0
> 
> 时间：2013-03-19T19:03:51.060
> 
> 标签：initialization, loadrunner

我有一个案例，一个特定的 API 只需要调用一次来初始化。此后线程可以调用其他方法。在 vuser_init.c 中，我有这个：

```
static volatile int initOnlyOnce = 0;
static volatile int initComplete = 0;
int iStatus;

if (1!=initOnlyOnce ) {
        initOnlyOnce =1;
        lr_output_message("Before, initComplete = %d", initComplete );
       iStatus = Initialize(); // product API call 
       initComplete = 1;
        lr_output_message("After, initComplete = %d", initComplete );
       if (1 != iStatus ) {
           lr_error_message("Initialize returns %d on %s.",iStatus,szLoadGenerator);
           srand(time(NULL));
       } 
    } 
```

当我运行场景时，第一个线程打印两者，即

```
Before, initComplete = 0 
```

其次是

```
After, initComplete = 1 
```

其余的测试是在该线程中正确完成的。但是，下一个线程因“错误 - 内存违规：收到异常 ACCESS_VIOLATION”而失败，因为它已执行后续方法而未完成 Initialize 或 initComplete 为 0。其他每个线程的日志具有“之前，initComplete = 0 " 作为最后一行。由于我已将这些变量定义为静态易失性，因此我希望

```
initOnlyOnce = 1 
```

在第一个线程调用它之后立即不会再次输入此代码块。但是，似乎 Vugen 与线程不一样。每个 vuser_init.c 都独立于其他正在运行的 Vugens，因此尽管变量被声明为静态易失性，但状态不共享。

有解决方法吗？我本质上想要 vuser_init 的单例前体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:26:54.963

我将只使用一个虚拟用户编号变量并检查该编号是否为 1。

PCODE（在初始化中）

If (Value of Virtual User variable == 1) { 运行初始化代码；}

因此，您需要创建变量，然后可能分配一个虚拟用户来仅处理初始化然后退出。将此用户单独放在一个组中，然后甚至可能在其他用户开始之前退出。

如果您愿意，您可以添加计划在 VUSER_INIT() 之前启动的其他函数。在右侧的函数列表中添加函数，然后进入运行时间设置并安排函数在 vuser_init() 之前运行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:52:39.910

LoadRunner 执行虚拟用户的方式并不那么容易理解，更不用说你应该依赖的东西了。

在大多数情况下，vu 作为线程运行，在一个特殊的 MMDRV 进程下。MMDRV 进程运行大约 50 个线程，然后 LR 引擎启动另一个 MMDRV 进程，该进程再次运行 50 个线程。（您也可以将 VUser 作为每个进程运行，查看运行时设置）。

此外，如果您的测试中有 LoadGenerators，它们会在不同的计算机上执行，并且无法知道有多少 vuser 在其他计算机上运行。

正如 James 所说，如果您想在代码中执行此操作，则使用 VUserID 作为“检查”是最佳选择。获取 VUserID 作为一个名为“VUserID”的新参数，并选择类型为 VUserID。然后，您可以`lr_eval_string("{VUserID}")`像使用任何其他参数一样使用它。

另一种选择是以先执行一个脚本，然后执行其他脚本的模式运行场景。

# c++ - 在 tbb 中回收父母作为孩子

> ID：15508272
> 
> 赞同：1
> 
> 时间：2013-03-19T19:04:05.933
> 
> 标签：c++, multithreading, tbb

我想用`tbb::task`s 并行化一个看似简单的问题。我的任务可以拆分成子任务，子任务的数量不能选择，而是由任务的状态决定的（事先不知道）。由于父任务不需要其子任务的结果，我想将父任务作为子任务回收。我在在线文档或示例中找不到一个很好的工作示例，因此我的问题在这里。我目前的想法是按照以下思路编写代码：

```
struct my_task : tbb::task {
  typedef implementation_defined task_data;
  task_data DATA;
  my_task(task_data const&data) : DATA(data) {}
  void reset_state(task_data const&data) { DATA=data; }
  bool is_small() const;
  void serial_execution();
  bool has_more_sub_tasks() const;
  task_data parameters_for_next_sub_task();
  tbb::task*execute()
  {
    if(is_small()) {
      serial_execution();
      return nullptr;
    }
    tbb::empty_task&Continuation = allocate_continuation();     // <-- correct?
    task_data first_sub_task = parameters_for_next_sub_task();
    int sub_task_counter = 1;
    tbb::task_list further_sub_tasks;
    for(; has_more_sub_tasks(); ++sub_task_counter)
        further_sub_tasks.push_back(*new(Continuation.allocate_child())
                                     my_task(parameters_for_next_sub_task());
    Continuation.set_ref_count(sub_task_counter);               // <-- correct?
    spawn(further_sub_tasks);
    recycle_as_child_of(Continuation);                          // <-- correct?
    reset_state(first_sub_task);                                // change state
    return this;                                                // <-- correct?
  }
};

my_task*root_task = new(tbb::task::allocate_root())
                    my_task(parameters_for_root_task());
tbb::task::spawn_root_and_wait(*root_task); 
```

这是正确的和/或最好的方法吗？（请注意，在我上面的代码中，空的延续任务既没有产生也没有返回）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:45:36.713

创建延续的行应该是：

> tbb::empty_task&Continuation = *new( allocate_continuation() ) tbb::empty_task;

set_ref_count 和 reset_state 之间的逻辑看起来是正确的。

# css - 样式化 textarea 输入文本

> ID：15508276
> 
> 赞同：1
> 
> 时间：2013-03-19T19:04:19.497
> 
> 标签：css, textarea

我正在尝试设置 textarea 的输入文本的样式，以便突出显示正在输入的单词。这并不像在文本区域中添加背景颜色那么简单。

我正在尝试做类似这个例子的事情：

[http://jsfiddle.net/terra823/t4esU/](http://jsfiddle.net/terra823/t4esU/)

```
html

<h1>This is what I'm trying to do with the input text</h1>
<p>Cool text</p>
<p>Cool text 2</p>
<p>Cool text 3</p>

<textarea> </textarea>

css

textarea{
    width:130px;
    height:130px;
}

p{
    size:12px;
    background:red;
    color: white;
 } 
```

不同之处在于我希望突出显示符合文本本身的宽度和行高。

我意识到这个问题似乎非常具体，但在进行研究时，我找不到任何解决使用 CSS 或 JS 设置 textarea 输入文本样式的东西。

感谢任何帮助！

# parsing - 如何使用 ParseKit 语法解析简单的布尔表达式语言

> ID：15508277
> 
> 赞同：1
> 
> 时间：2013-03-19T19:04:23.390
> 
> 标签：parsing, expression, grammar, parsekit

尝试构建一个可以解析简单布尔表达式的语法。
当有多个表达式时，我遇到了一个问题。
我需要能够解析`1..n` `and/or`'ed 表达式。

下面的每个示例都是一个完整的表达式：

1.  `(myitem.isavailable("1234") or myitem.ispresent("1234")) and myitem.isready("1234")`
2.  `myitem.value > 4 and myitem.value < 10`
3.  `myitem.value = yes or myotheritem.value = no`

**语法：**

```
@start = conditionalexpression* | expressiontypes;

conditionalexpression = condition expressiontypes;

expressiontypes = expression | functionexpression;

expression = itemname dot property condition value;

functionexpression = itemname dot functionproperty;

itemname = Word;

propertytypes = property | functionproperty;

property = Word;

functionproperty =  Word '(' value ')';

value = Word | QuotedString | Number;

condition = textcondition;

dot = '.';

textcondition = 'or' | 'and' | '<' | '>' | '='; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:08:54.167

[ParseKit](http://parsekit.com)的开发者在这里。

这是与您的示例输入匹配的 ParseKit 语法：

```
@start = expr;

expr = orExpr;

orExpr = andExpr orTerm*;
orTerm = 'or' andExpr;

  // 'and' should bind more tightly than 'or'
andExpr = relExpr andTerm*;
andTerm = 'and' relExpr;

  // relational expressions should bind more tightly than 'and'/'or'
relExpr = callExpr relTerm*;
relTerm = relOp callExpr;

  // func calls should bind more tightly than relational expressions
callExpr = primaryExpr ('(' argList ')')?;
argList = Empty | atom (',' atom)*;

primaryExpr     = atom | '(' expr ')';
atom            = obj | literal;

  // member access should bind most tightly
obj     = id member*;
member  = ('.' id);

id      = Word;
literal = Number | QuotedString | bool;
bool    = 'yes' | 'no';

relOp   = '<' | '>' | '='; 
```

为了让您了解我是如何得出这个语法的：

1.  我意识到你的语言是一种简单的、可组合的**表达**语言。
2.  我记得 XPath 1.0 也是一种相对简单的表达式语言，具有易于使用/可读的语法。
3.  我[在线访问了 XPath 1.0 规范](http://www.w3.org/TR/xpath/#section-Expressions)并快速浏览了 XPath 基本语言语法。这为设计你的语言语法提供了一个快速的起点。**如果忽略 XPath 表达式的*路径表达式*部分，XPath 是一个非常好的基本表达式语言模板。**

我上面的语法成功地解析了你所有的示例输入（见下文）。希望这可以帮助。

```
[foo, ., bar, (, "hello", ), or, (, bar, or, baz, >, bat, )]foo/./bar/(/"hello"/)/or/(/bar/or/baz/>/bat/)^
[myitem, ., value, >, 4, and, myitem, ., value, <, 10]myitem/./value/>/4/and/myitem/./value/</10^
[myitem, ., value, =, yes, or, myotheritem, ., value, =, no]myitem/./value/=/yes/or/myotheritem/./value/=/no^ 
```

# html - 中间代理应该承认 吗？

> ID：15508281
> 
> 赞同：0
> 
> 时间：2013-03-19T19:04:28.770
> 
> 标签：html, http, caching

是 HTML 标签：

```
<meta http-equiv="Cache-Control" content="no-cache, no-store"> 
```

相当于 HTTP 响应头`Cache-Control: no-cache, no-store`，特别是从中间代理和缓存的角度来看（在客户端和服务器之间）？

中间缓存是否应该解析所有 HTML-`<head>`部分，寻找这些类型的标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:41:24.330

不，代理不应该阅读文档，而且通常不会这样做。

# javascript - JavaScript 中的命名参数

> ID：15508282
> 
> 赞同：1
> 
> 时间：2013-03-19T19:04:42.357
> 
> 标签：javascript, function

说我有这样的功能

```
function myFunc(a, b, c)
{
    if(a!=undefined) this.a = a;
    if(b!=undefined) this.b = b;
    if(c!=undefined) this.c = c;
} 
```

我只想设置 b 的值，然后我可以做这样的事情。

```
myFunc(undefined, "some Value for b", undefined); 
```

但我想知道是否有一种方法可以让我做这样的事情来设置 b 的值

```
myFunc(b:"some value for b"); 
```

这可能是错误的，但您可能明白我的意思。我想指定属性的名称和值，这样我就不必担心传递未定义的值。我该怎么做？

也可以随意更改标题，我不知道这个问题应该叫什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:07:23.867

[jsFiddle 演示](http://jsfiddle.net/NLVD3/)

当然，只需使用这个：

```
function myFunc(options)
{
 if(typeof(options['a']) != "undefined") this.a = options['a'];
 if(typeof(options['b']) != "undefined") this.b = options['b'];
 if(typeof(options['c']) != "undefined") this.c = options['c'];
} 
```

然后用

```
var func = new myFunc({b:"some value for b"});
console.log(func.b);//"some value for b" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:08:59.997

是的，传入一个对象字面量

```
function myFunc(options)
{
    if(options.a!=undefined) this.a = options.a;
    if(options.b!=undefined) this.b = options.b;
    if(options.c!=undefined) this.c = options.c;
} 
```

像这样打电话

```
var var1 = new myFunc({b:"some value for b"}); 
```

或更动态、可扩展的方式（如前所述）

```
function myFunc(obj)
{
    for (var i in obj)
    {
        if(obj.hasOwnProperty(i))
        {
            this[i]=obj[i];
        }
    }
}

var func = new myFunc({b:"some value for b"});
console.log(func.b);//"some value for b" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T19:10:15.130

您可以通过将 Ojbect 作为参数传递来实现此目的：

```
var someObject = { a: 'some A value', b: 'some B value' };

myFunc(someObject); 
```

这是一种非常普遍的做法。

例如，jQuery 经常使用这种结构。

如果您查看[jQuery.animate()](http://api.jquery.com/animate/)的文档，您会发现它接受一个[普通对象](http://api.jquery.com/Types/#PlainObject)作为第一个参数。

# ruby - Nokogiri 没有从 Watir 加载“浏览器”

> ID：15508285
> 
> 赞同：1
> 
> 时间：2013-03-19T19:04:46.723
> 
> 标签：ruby, web-scraping, nokogiri, watir, watir-webdriver

到目前为止我有这个：

```
require 'watir-webdriver'
require 'date'
require 'nokogiri'

browser = Watir::Browser.start 'https://example/ViewReport.aspx'

browser.link(:text, 'Combined Employee Performance Report').click

today = Date.today
yesterday = today.prev_day.strftime('%m' '%d' '%Y')

t = browser.text_field :id => 'UC255_txtStart'
t.set yesterday

t = browser.text_field :id => 'UC255_txtEnd'
t.set yesterday

btn = browser.button :value, 'Run Report'
btn.exists?
btn.click

page = Nokogiri::HTML.parse('browser')
links = page.css("a")
puts links.length 
```

当我尝试解析`browser`Watir 用于站点 URI 的变量时，它给了我一个空白的 HTML 页面。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T19:13:11.667

**问题**

当你这样做

```
page = Nokogiri::HTML.parse('browser') 
```

您要求 Nokogiri 解析字符串“浏览器”。

**解决方案**

您真正要解析的是浏览器中的 html。

要获取浏览器的 html，请执行以下操作：

```
browser.html 
```

所以要解析它，你会这样做：

```
page = Nokogiri::HTML.parse(browser.html) 
```

# sql - 减少查询的数量，可能是通过表模式？

> ID：15508286
> 
> 赞同：2
> 
> 时间：2013-03-19T19:04:46.817
> 
> 标签：sql, ruby-on-rails, postgresql

我正在从如下所示的 api 检索数据：

```
[{"type": "a", "value": 1, "identifier": 1},
{"type": "b", "value": 9, "identifier": 1},
{...},{...},
{"type": "a", "value": 2, "identifier": n}] 
```

标识符可以是 1-500 之间的任何值，并且不能保证所有记录都具有相同的标识符。如果存在标识符，它将具有所有相同的类型和特定范围的值。我最初用来更新记录的内容如下所示：

```
api_data.each do |x|
  temp = Object.find_or_create_by_type_and_identifier_and_id(x["type]", x["identifier"], user_id)
  temp.update_attributes(x)
end 
```

这非常慢，每次加载此数据时运行大约 2200 个查询。一次查看数据是否存在，然后更新一次，共 1100 个条目。当前使用的表方案如下所示：

```
create table ( type, identifier, id, value) 
```

这是`obviously inefficient`，我只是没有意识到有多少。我应该如何尝试减少查询数量，以便应用程序在需要更新或提取新用户数据时不会爬网？

建议的一种方法是批量插入，并在需要更新时删除以前的条目，这会将其减少到 2，但我不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:16:43.717

如果您需要进行批量更新，您可能能够摆脱[ActiveRecord::Relation#update_all](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-update_all)，具体取决于更新的性质。

[activerecord-import gem](https://github.com/zdennis/activerecord-import/wiki/Examples)执行高效的批量插入。我不确定它是否有更新机制，但它非常适合快速插入（一条 SQL 语句用于数千行）。只需快速查询约 2200 条记录、一些更新逻辑和插入缺失记录的单个语句。

一个更极端但可能更快的解决方案可能是加载数据库中的每条记录，协调新状态，删除所有要删除或更改的行（快速批量操作），并使用 activerecord 批量插入新/修改的行-进口。这将是最多三个数据库操作，并且会非常快速地运行约 2200 条记录，但速度不够快，以至于您希望在每次更改时都执行此操作。

最后，您可以求助于 SQL。看起来你的改变是基本的，你可以简单地做`YourModel.connection.execute "UPDATE some_things SET foo = 'whatever'"`。不过，我怀疑有一种 Railsy 方法可以做任何你想做的事情。查看[ActiveRecord](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)文档。有许多批量操作，如`delete_all`,`update_all`等。

# javascript - 我正在研究 d3.js。为什么这段代码不能正常工作？

> ID：15508291
> 
> 赞同：0
> 
> 时间：2013-03-19T19:05:06.953
> 
> 标签：javascript, d3.js

这是 CSV 文件：http: [//goo.gl/ZVVjD](http://goo.gl/ZVVjD)

我只有条形图才有这个问题。折线图工作正常。我不知道如何修改这个。

请帮助我理解我错在哪里。

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
    font: 10px sans-serif;
}

.axis path,
.axis line {
fill: none;
stroke: #000;
shape-rendering: crispEdges;
}

.bar {
fill: steelblue;
}

.x.axis path {
    display: none;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var margin = {top: 20, right: 20, bottom: 30, left: 40},
width = 960 - margin.left - margin.right,
height = 500 - margin.top - margin.bottom;

//var formatPercent = d3.format("04d");
//var formatPercent = d3.format(".0%");
var parseDate = d3.time.format("%d-%b-%y-%H:%M:%S").parse;

var x = d3.time.scale()
.range([0, width]);

var y = d3.scale.linear()
.range([height, 0]);

var xAxis = d3.svg.axis()
.scale(x)
.orient("bottom");

var yAxis = d3.svg.axis()
.scale(y)
.orient("left")
//.tickFormat(formatPercent);

var svg = d3.select("body").append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.csv("data.tsv", function(error, data) {

    data.forEach(function(d) {
        d.date = parseDate(d.date);
        //d.energy = parseInt(d.energy);
        d.energy = +d.energy;
    });

    x.domain(d3.extent(data, function(d) { return d.date; }));
    y.domain([0, d3.max(data, function(d) { return d.energy; })]);
    //y.domain(d3.extent(data, function(d) { return d.energy; }));

    svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

    svg.append("g")
    .attr("class", "y axis")
    .call(yAxis)
    .append("text")
    .attr("transform", "rotate(-90)")
    .attr("y", 6)
    .attr("dy", ".71em")
    .style("text-anchor", "end")
    .text("Energy");

    svg.selectAll(".bar")
    .data(data)
    .enter().append("rect")
    .attr("class", "bar")
    .attr("x", function(d) { return x(d.date); })
    .attr("width", x.rangeBand())
    .attr("y", function(d) { return y(d.energy); })
    .attr("height", function(d) { return height - y(d.energy); });
});

</script> 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:07:57.913

我不相信`x.rangeBand()`适用于时间尺度。尝试将其替换为固定像素值 2 或 3。

# wordpress - 通过 xml/rss 从 Webforms 导入新闻站点到 Wordpress

> ID：15508293
> 
> 赞同：0
> 
> 时间：2013-03-19T19:05:07.600
> 
> 标签：wordpress, rss, webforms

我正在开发一个在 Wordpress 中重建 news.byu.edu 的项目，并试图找出如何最好地将文章从当前构建（在 ASP.net 中）导入我正在使用 ServerPress 的 DesktopServer 构建的 .dev 站点.

不幸的是，该站点上的 RSS 提要仅包含文章的摘要，因此进行 RSS 导入并不是特别有用。我确实可以访问新闻网站的后端。最好我能看到它，我的选择是：

1.  找到一个 WordPress 插件，它可以大规模处理单个文章（而不是 RSS 提要）的自定义导入。这将是理想的，但我还没有找到适合我需要的。
2.  重写新闻站点上的 RSS 提要生成器以包含所有其他相关信息，而不仅仅是摘要，然后导入。这里的问题是有很多文章，我不确定让生成器显示所有这些是不是一个好主意。
3.  编写一个脚本来解析当前站点的档案并将它们聚合成一个 .xml，然后我将其导入。这似乎是在浪费时间，因为 2 的实施时间可能会更短。

本质上，我的问题是，最耗时的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:49:06.430

可能最好的解决方案是使用 WordPress 的 HTML 导入插件。这允许从各种扩展名的文件中导入选定的 HTML 内容。

使用 HTML 导入用户指南中推荐的[SiteSucker](http://www.sitesucker.us/home.html "吸盘者")应用程序下载站点档案。然后设置 HTML 导入的配置以从每个页面中选择您想要的任何部分。此技术适用于从*任何*站点导入*任何*内容以发布帖子。

# virtual-machine - Hyper-V 会自行暂停正在运行的虚拟机的原因可能是什么？

> ID：15508296
> 
> 赞同：1
> 
> 时间：2013-03-19T19:05:19.173
> 
> 标签：virtual-machine, hyper-v, pausing-execution

Hyper-V 会自行暂停正在运行的虚拟机的原因可能是什么？

我们最近两次遇到这个问题。我们的 2 个虚拟机每个都有 4 Gb 的内存，并且没有很多流量。我认为我们为虚拟机备份保留了大约 50GB 的空间。可能是因为缺少备份 VM 快照的空间吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T23:51:55.273

检查您的日志为什么它暂停。事件查看器是你的朋友 :) 这里是如何检查日志：http: [//support.microsoft.com/kb/2486243](http://support.microsoft.com/kb/2486243)
我看到 Hyper-V 虚拟机在空间不足时暂停，所以你可能是正确的。

# asp.net-mvc - 作为参数发送到控制器函数的 observableArray 为空

> ID：15508302
> 
> 赞同：0
> 
> 时间：2013-03-19T19:05:31.470
> 
> 标签：asp.net-mvc, knockout.js

我想将 FeatureList (observableArray) 中的数据传递给 TreeController 中的 SaveMappings 函数。我已将一个按钮绑定到 sendItems 函数。我在 var data=p2fData 行放了一个断点，看看我收到了什么。p2fData 为空。

我将控制器更改为公共 JsonResult SaveMappings(List p2fData)。在这种情况下，p2f 数据显示有 1 个元素，但它也为空。

```
var Feature = function (featId) {
    var self = this;
    self.featId = featId;    
    self.parameters = ko.observableArray();    
}

var ParameterToFeatureListViewModel = function () {
    var self = this;
    var newFeature = new Feature("Feature XYZ");
    newFeature.parameters.push("1");
    newFeature.parameters.push("2");
    self.FeatureList = ko.observableArray([newFeature]);
    self.sendItems = function() {
        $.ajax({
           type: "POST",
           url: '/Tree/SaveMappings',
           data: ko.toJSON(self.FeatureList),
           contentType: "application/json; charset=utf-8",
           dataType: "json",
           success: function (response) {
               alert(response);
           },
           error: function (request, status, error) {
               alert(request.statusText);
           }
        });
    }
}

var vm = new ParameterToFeatureListViewModel()
ko.applyBindings(vm);

public class TreeController:Controller
{
    public ActionResult Index(){...}
    [HttpPost]
    public JsonResult SaveMappings(string p2fData)
    {
        var data = p2fData;
        return Json(data);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:35:46.063

Please have a look @ [how to pass knockoutjs view model into a mvc controller](https://stackoverflow.com/questions/15527309/how-to-pass-knockoutjs-view-model-into-a-mvc-controller/15533321#15533321) ... May be it helps..

# javascript - 无法实现 jQuery 滑块

> ID：15508303
> 
> 赞同：0
> 
> 时间：2013-03-19T19:05:37.937
> 
> 标签：javascript, jquery, css, html

我在实现 jquery 滑块 (flexslider) 时遇到问题

我觉得我错过了一些非常基本的东西，但由于某种原因，我无法将手指放在它上面。任何帮助都会很棒。测试站点的链接如下。

我试图让滑块出现在空白的绿色区域。

我也在 Gumby 响应式框架中工作

[http://4grain.bmdigitalgroup.com/](http://4grain.bmdigitalgroup.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:11:24.443

这是你的问题：

```
 Uncaught TypeError: Object [object Object] has no method 'flexslider' 
```

...看起来你在 flexslider 文件之后加载你的 jquery 文件。尝试将所有 .js 文件保存在一个位置，并将 jquery 文件放在所有文件之上。

您在同一页面上加载了 2 个 jquery 文件。您应该只需要一个，除非您有意尝试加载其中 2 个..

尝试放置您的脚本...

```
 $(window).load(function() {
    $('.flexslider').flexslider();
  }); 
```

在页面底部，包裹在脚本标签中，在正文结束之前，而不是在页面头部内部。脚本一直在等待页面加载完成。

更新！

嘿，到目前为止做得很好！我正在通过 Web 控制台查看您在页面上所做的操作。
如果你想摆脱它...

```
Uncaught TypeError: Object [object Object] has no method 'on' 
```

...然后从页面顶部删除 jquery 1.6.2 文件，并将 fexslider.js 文件放在页面底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:13:47.077

给`#maincontentbody`一个`height`，也许`75px`，然后所有的孩子都需要有一个定义`height`的`width`，甚至是 id `width:100%`。`min-height`在这种情况下不是合适的值

你的图像看起来比绿色条区域大得多，你认为它也会动画吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:17:11.163

As noted, you are having a double reference to the jquery library. Try doing this which will stop the dual references:

```
<script type="text/javascript" charset="utf-8">
  $.noConflict();
  $(window).load(function() {
  $('.flexslider').flexslider();
});
</script> 
```

# google-api - 谷歌地图API避免谷歌授权密钥？

> ID：15508305
> 
> 赞同：1
> 
> 时间：2013-03-19T19:05:44.523
> 
> 标签：google-api

我刚刚在谷歌开发者网站上偶然发现了这段代码，复制粘贴它来测试告诉我它不需要谷歌的 API 访问密钥来工作。

```
<script>
  function initialize() {
    var mapOptions = {
      zoom: 8,
      center: new google.maps.LatLng(-34.397, 150.644),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById('googlemaps'),
        mapOptions);
  }

  function loadScript() {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&' +
        'callback=initialize';
    document.body.appendChild(script);
  }

  window.onload = loadScript;
</script> 
```

我知道 Google 每天有 25K API 调用的限制，所以我在做违法的事情吗？

# python - Django模板中的命名冲突

> ID：15508306
> 
> 赞同：2
> 
> 时间：2013-03-19T19:05:49.623
> 
> 标签：python, django, django-templates

我正在设置的 django 模板有一个特殊问题：我有一个`{{ name }}`要传递给模板的变量，同时，我有一个`notes`来自客户端 api 的列表，它同时具有一个`{{ name }}`和一个`{{ body }}`。
每当我尝试打印出笔记的名称时，都会出现另一个`{{ name }}`。这很奇怪。这是我的注释代码：

```
<div class="notes">
   {% for note in notes %}
       <p><strong>{{ name }}</strong></p>
       <p>{{ body }}</p>
   {% endfor %}
</div> 
```

难道我做错了什么？有没有我可以使用的上下文运算符之类的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:07:15.967

```
<div class="notes">
   {% for note in notes %}
       <p><strong>{{ note.name }}</strong></p>
       <p>{{ note.body }}</p>
   {% endfor %}
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T19:08:12.947

这是与 Django 一起使用 Handlebars 时经常犯的错误，因为 Handlebars 会自动为您更改范围。您需要做的就是引用`note`您使用 for 循环创建的变量：

```
<div class="notes">
    {% for note in notes %}
        <p><strong>{{ note.name }}</strong></p>
        <p>{{ note.body }}</p>
    {% endfor %}
</div> 
```

更多信息在这里：[https ://docs.djangoproject.com/en/1.5/ref/templates/builtins/#std:templatetag-for](https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#std:templatetag-for)

# bash - 如何快速杀死bash中的java进程？

> ID：15508307
> 
> 赞同：5
> 
> 时间：2013-03-19T19:05:57.747
> 
> 标签：bash, kill

在 linux 机器上，我最多运行 3 个 java jars 文件。如何用一个命令快速杀死所有 3 个？

通常我会：

ps ex - 让进程运行

然后找到进程ID然后执行：

杀死 -9 #### #### ####

有什么办法可以缩短这个过程？眯着眼睛寻找进程ID，我的眼睛很疼。

我的脚本执行以下操作：

```
nohup ./start-gossip &

nohup ./start &

nohup ./start-admin & 
```

有没有办法在不查找的情况下获取每个进程的进程 ID？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-19T19:10:17.790

简短的回答：

```
pkill java 
```

这会查找要按名称杀死的进程（或多个进程）。这也会找到任何其他`java`进程，所以要小心。它也接受，但除非某些东西*真的*坏了，否则`-9`你应该避免使用。`-9`

 *编辑：

根据更新，您也可以指定脚本名称`pkill`（我不肯定）。但是，处理这个问题的更传统的方法是留下 pid 文件。在您启动一个新进程并将其后台运行后，它的 pid 在`$!`. 如果您将该 pid 写入文件，则很容易检查该进程是否仍在运行并仅终止您想要的进程。但是，pid 有可能被重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-17T13:42:06.447

您可以在启动进程时保存 PID，以便以后使用它们：

```
nohup ./start-gossip &
START_GOSSIP_PID=$!

nohup ./start &
START_PID=$!

nohup ./start-admin &
START_ADMIN_PID=$!

...

kill -9 $START_GOSSIP_PID
kill -9 $START_PID
kill -9 $START_ADMIN_PID 
```

这样做的好处是（超过`pkill`）不会杀死任何其他巧合名称相似的进程。如果您不想从脚本本身执行 kill 操作，而只想方便地使用 PID，请将它们写入文件（从脚本）：

```
echo $START_GOSSIP_PID > /some/path/start_gossip.pid 
```

或者甚至只是在启动进程时执行此操作，而不是将 PID 保存到变量中：

```
nohup ./start-gossip &
echo $! > /some/path/start_gossip.pid 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-17T12:57:29.270

**要获取该 java 进程的进程 ID，请运行**

netstat -tuplen

**您要杀死并运行的进程的进程 ID (PID)**

杀死 -9 PID*

# c# - 在 C# windows 应用程序中使用 C++ DLL：出现错误“找不到入口点”

> ID：15508310
> 
> 赞同：1
> 
> 时间：2013-03-19T19:06:01.227
> 
> 标签：c#, c++, dllimport, dependency-walker

我不熟悉在 C# 中使用 C++ 库以及一般的 C++ 编程。我有一个从 C++ 代码构建的 DLL，我认为它是一个“托管”代码，因为 DLL 的名称是“TestManaged.dll”。我不是 100% 确定 dll/C++ 代码是托管还是非托管。

我想在我的`C# windows forms application`代码中使用这个 DLL 的类和方法。此 DLL 中有多个类。当我在这些类中检查这些类和方法时`Object Browser`，它们都有`Public`标识符。

到目前为止，我已将此 DLL 添加到我对 C# 应用程序代码的引用中。我会在我的问题中讨论三个类：`Product`, `ReqStatus`, `ProductData`。我可以为这个 DLL 的各种类创建一个对象，如下所示。

```
Product testCall = new ProductClass(); 
```

在这个 DLL 中调用了另一个类`ProductData`，我可以得到这个类的 C++ 代码，如下所示。在这种情况下，在 C# 中`ProductData`显示为类`Object Browser`，因为它实际上是 C++ 代码中的结构。我不确定这对回答我的问题是否重要（最后）。

以下是定义`ProductData`struct - `ProductData.h`file 的 C++ 代码。

```
#ifdef WIN32_MANAGED 
public ref  struct ProductData
#else
struct ProductData
#endif
{
    UINT32 ProductId;           //!< Product ID    
    UINT32 PRoductRev;         //!< Build Revision
}; 
```

以下是定义`ReqStatus`枚举`ReqStatus.h`文件的 C++ 代码。我在我的 C# 代码中创建了相同的枚举，但没有指定标识符。

```
enum ReqStatus
{
    SUCCESS,            //!< Method was successful

    //Connection errors
    NOT_CONNECTED,      //!< Connection not open 
    CONN_TIMEOUT,       //!< Connection timed out commuincating with device
}; 
```

现在，我想调用两种方法，但两者都有问题：

方法 1：是类`getProductData`内部的方法，`Product`它接受`ProductData`类型对象作为参数并返回`ReqStatus`C++ 中的枚举类型。下面是`gerProductData`方法的声明（如 中所示`Object Browser`）：

```
public ReqStatus getProductData(ProductData data) 
```

相同方法的 C++ 声明是：（实际方法太长，因此只给出声明）：此方法在`Prodcut.cpp`文件内

```
ReqStatus Product::getProductData(ProductData PLATFORM_PTR data) 
```

PLATFORM_PTR 定义如下`Platform.h`

```
#ifdef WIN32_MANAGED
#define PLATFORM_PTR ^
#else
#define PLATFORM_PTR *
#endif 
```

方法 2：是类`getConnected`内部的一个方法，`Product`它接受一个字符数组（我不确定）和一个`ProductData`类型的对象作为参数，并返回`ReqStatus`C++ 中的枚举类型。下面是`getConnected`方法的声明（如 中所示`Object Browser`）：

```
public ReqStatus getConnected(sbyte* someChar, ProductData data) 
```

相同方法的 C++ 声明是：（实际方法太长，因此只给出声明）：此方法在`Prodcut.cpp`文件内

```
ReqStatus Product::getConnected(const char *someChar, ProductData PLATFORM_PTR data) 
```

C++ 代码调用方法如下：

```
private : Product^  _testProduct;
testProduct = gcnew Product();
ProductData ^ data = gcnew ProductData();

int portNum = Decimal::ToInt16(7); 
char portName[32];
_snprintf(&portName[0], sizeof(portName),"COM%d", portNum);
ReqStatus status = _testProduct->getConnected(&portName[0], data); //Calling getConnected 
```

`getProductData`方法内部有对方法的内部调用`getConnected`。

```
ReqStatus status = getProductData(data); //data is the same which was passed to the getConnected method 
```

我的 C# 代码如下，我在两个方法调用中都遇到了错误：我在下面的代码片段的同一行中放置了错误。两种方法都是独立的。它只是从C++ 代码中的方法`getProductData`调用。`getConnected`我想检查我是否可以单独调用两者。

```
ProductData pData = new ProductData(); // OK
Product _testProduct = new Product();  // OK

ReqStatus status1 = _testProduct.getConnected("COM5", pData ); //Error 1: The best overloaded method getConnected has some invalid arguments
ReqStatus status2 = (ReqStatus)_testProduct.getProductData(pData ); // Error 2: Method is inaccessible due to its protection level 
```

对于错误 1，我尝试了 StackOverflow 和其他论坛上各种文章的解决方案，但无法解决。仅供参考，我尝试如下更改“SomePortCOM”，但它不起作用。

**更新**：**此代码现在可以正常工作，我没有看到错误 1（无效参数）。现在，我只需要摆脱错误 2（保护级别错误）。请提供任何建议。谢谢你。**

```
String str = "COM5";
byte[] bytes = Encoding.ASCII.GetBytes(str);
unsafe
    {
        fixed (byte* p = bytes)
        {
                sbyte* sp = (sbyte*)p;
                //SP is now what you want
                   ReqStatus status1 = _testProduct.getConnected(sp, pData );
        }
    } 
```

对于Error2，我搜索了很多博客，发现可能的解决方案之一是使用DLLImport，我也尝试过，但遇到以下问题：

DLLImport 的 C# 声明：

```
[DllImport("TestManaged.dll",EntryPoint="getConnected")]
        public static extern ReqStatus getConnected(String SerialPort, ref ProductData pData); 
```

我从我的 C# 代码中调用这个函数如下：

```
ProductData pData = new ProductData();
String str = "COM7";
ReqStatus status1 = getConnected(str, ref pData); 
```

但是，我收到`Entry point not found`错误。我尝试运行 dumpbin 函数以获取此 DLL 导出的函数列表。但是，我没有看到任何功能。而只是一个随机输出，如下所示。

```
Microsoft (R) COFF/PE Dumper Version 10.00.40219.01
Copyright (C) Microsoft Corporation.  All rights reserved.

Dump of file C:\Rumit\TestManaged.dll

File Type: DLL

  Summary

        2000 .data
       22000 .rdata
        1000 .reloc
        1000 .rsrc
       13000 .text 
```

**更新：此外，我没有通过 Dependency Walker 在此 DLL 中看到任何方法。现在，我得到了 C++ 的源代码。但我对 C++ 编码相当陌生。如果需要对 C++ 代码进行任何更改，请给出指示。**

问候， 鲁米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:04:00.553

```
 enum ReqStatus 
```

那是你最大的障碍。这声明了一个本机枚举类型，它在托管代码中不可用，并且使任何使用它的代码都无法访问。您必须使用*enum class*关键字声明它的托管版本，如下所示：

```
public enum class ReqStatus {
    // etc...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:49:42.253

代码周围的 unsafe 块会使它无法验证您的程序集的安全协议，因此请注意这一点。当我从 C# 调用来自 C++（本机或非本机）的方法时，我不得不使用 PInvoke（平台调用）来调用它们。对于保护级别，我知道您说 C++ 中的所有内容都是公开的，但如果您是 C++ 新手，您可能会犯一个快速的语法错误。在 C# 中，所有方法都需要以存储说明符（公共、受保护等）开头，但在 C++ 中，您放置一个存储说明符后跟一个冒号，该存储和下一个声明的存储之间的所有内容都属于该存储类型。也许这是你的问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T23:58:27.197

谢谢汉斯指出问题。就是这样，我将枚举定义为“公共”。但是，我不确定你是错误地放置了“类”还是故意的，因为它给了我很多错误，因为它没有把它当作一个枚举，而是在我使用枚举的每个地方都要求一个对象. 如果我在这里误解了什么，请告诉我。

所以，我只是通过公开枚举来实现它。但是，我仍然无法找到如何将正确的值从 C# 传递给 C++ 函数。（我原来的帖子中的Error1）。

当我调试 C++ 代码时，它为方法的第一个参数传递了“0x0034E808”COM5”值（我假设它是一个内存位置和一个值？）`getConnected`。我试图通过实现不安全的方法来传递这个值（解释在我最初的错误 1 ​​帖子），它通过了“0x0277aab8”（再次似乎是一些内存地址），但无法连接到它（获取串行端口超时错误）。与 C++ 方法相比，我是否错误地传递了值？

问候， 鲁米特

# javascript - 在 json 中使用变量

> ID：15508318
> 
> 赞同：0
> 
> 时间：2013-03-19T19:06:30.710
> 
> 标签：javascript, json, variables

我有一个 json 对象“shopping_cart”，其中还有一个名为“items”的对象。

一旦用户在购物车上添加了一些新商品，我想更新 json 对象，因此我在“items”对象上添加了一个新商品。现在的问题是，将添加到“项目”对象的新项目需要具有某种标识符，因此每当用户添加新项目时，它将是：

```
$.extend(shopping_cart.items,{ "item_2":...
$.extend(shopping_cart.items,{ "item_3":... 
```

等等

我尝试用变量替换下面的数字（1）

```
$.extend(shopping_cart.items,{ "item_1": {"item_name":"fafafa", "qty":"", "price":"", "discount":"", "subtotal":""}}); 
```

类似于： var new_num = 5;

```
$.extend(shopping_cart.items,{ "item_"+new_num: {"item_name":"fafafa", "qty":"", "price":"", "discount":"", "subtotal":""}}); 
```

所以它转化为：

```
 $.extend(shopping_cart.items,{ item_5 
```

但是没有运气，无论我以何种方式尝试，变量在所有情况下都被解析为字符串。

那么有没有办法通过使用变量来动态创建对象呢？我还需要它来使用动态变量更新 item_name、qty、price 等。

十分感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:09:23.617

由于您只添加一个项目，因此无需使用 jQuery 的`extend`. 只需设置属性：

```
shopping_cart.items["item_"+new_num] = {"item_name":"fafafa", "qty":"", "price":"", "discount":"", "subtotal":""}; 
```

在 内`[...]`，您可以进行字符串操作。在 内`{...:...}`，你不是。

# c# - Calling a generic method with T type parameter

> ID：15508319
> 
> 赞同：0
> 
> 时间：2013-03-19T19:06:36.820
> 
> 标签：c#, generics

I am trying to build a method that will take a variety of numeric types and preprocess them for a second method. I am not sure if I should be simply overloading or using a generic method. I tried to use a generic method but the method does not seem to recognize the parameter type. The code is below. Can someone please explain to me whether it is better to overload or use a generic method in this case? Also, if I wanted to use a generic method to do this, how could I make it work? Thank you very much.

```
 public static class math
 {
      public static int nextpow2<T>(T a)
      {
           double w;
           if ( a.GetType() is sbyte   ||
                a.GetType() is byte    ||
                a.GetType() is short   ||
                a.GetType() is ushort  ||
                a.GetType() is int     ||
                a.GetType() is uint    ||
                a.GetType() is long    ||
                a.GetType() is ulong   ||
                a.GetType() is float   ||
                a.GetType() is double  ||
                a.GetType() is decimal
           ) w = (double)Convert.ChangeType(a, typeof(double));
           else
                throw new System.ArgumentException("Internal error in nextpow2: argument a is not a number!");

           return _nextpow2(w);
      }

      private static int _nextpow2(double a)
      {
           double index = Math.Abs(a);
           int p = (index > 1) ? (int)Math.Ceiling( Math.Log( index, 2.0) ) : 0;

           return p;
      } 
```

I am calling the method as follows:

```
 int indx = 0;
 int p = math.nextpow2(indx); 
```

The code fails to compile. I get the following error:

Internal error in nextpow2: argument a is not a number!

Can someone please explain what I am doing wrong? Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:08:50.500

> Can someone please explain what I am doing wrong?

Sure. You're checking whether a `Type` object is an `sbyte`, or a `byte`, etc. You're not checking whether the type *represents* the type of `sbyte` etc... you're asking whether the value *is* an `sbyte`. That's never, ever the case. (Which is why you're getting a compile-time error.)

You *could* use:

```
if (a.GetType() == typeof(byte) ||
    // etc) 
```

But I probably wouldn't. I wouldn't make this a generic method *at all*. If you really want the functionality, I'd write:

```
private static readonly HashSet<Type> ValidTypes = new HashSet<Type>
{
    typeof(sbyte), typeof(byte), /* etc */
};

public static double ConvertToDouble(object x)
{
    if (x == null)
    {
        throw new ArgumentNullException("x");
    }
    if (!ValidTypes.Contains(x.GetType())
    {
        throw new ArgumentException("...");
    }
    return Convert.ChangeType(x, typeof(double));
} 
```

Note how this is doing *one* thing: converting the argument to `double`. There's no point in making it then call `_nextpow2` - it's easy enough for the caller to do that if they want to.

Additionally, you've written two contradictory things:

> The code fails to compile. I get the following error:
> Internal error in nextpow2: argument a is not a number!

If it fails to compile (which is what I'd expect, btw) then you can't be running the code, which means you can't be getting the exception. You need to differentiate between *compile-time* errors like this:

```
warning CS0184: The given expression is never of the provided ('sbyte') type 
```

and *execution-time* exceptions.

Also, both your class and method names violate normal .NET naming conventions.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:14:14.747

You can either say

```
a is sbyte 
```

or say

```
a.GetType() == typeof(sbyte) 
```

but it makes no sense to mix it into `a.GetType() is sbyte`. You should get a compiler warning about that! For `a.GetType()` will be an object which derives from `System.Type` (actually it will be `System.RuntimeType`), and therefore it can never derive from `sbyte` (since `sbyte` is sealed, being a struct, and `sbyte` itself derives only from `ValueType` and `Object`).

A better solution than a generic method, is to have:

```
public static int Nextpow2(double a)
{
    ...
} 
```

All numereric types except `decimal` are implicitly convertible to `double`. So with the above signature, you can use it the way you want:

```
int indx = 0;
int p = math.Nextpow2(indx); 
```

# iphone - 如何防止 UIImage 不断重播动画

> ID：15508323
> 
> 赞同：0
> 
> 时间：2013-03-19T19:06:44.253
> 
> 标签：iphone, ios, objective-c, macos, 2d-games

我正在制作一个游戏，目前我的“播放器”正在制作动画，因为我已经实现了（目前这是错误的）并且它从头到尾不断地运行动画，因为它总是在调用函数时从头开始重新启动。防止这种情况并让动画一直运行的最佳方法是什么？这是我目前正在使用的代码：

```
- (void) startAnimatingLeft
{

NSArray *images = [NSArray arrayWithObjects:img9,img10,img11,img12,img13,img14,img15,img16, nil];

[imageView setAnimationImages:images];

[imageView startAnimating];
animateTimer = [NSTimer scheduledTimerWithTimeInterval:0.6 target:self selector:@selector(nothingMovingLeft) userInfo:nil repeats:NO];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:19:14.683

从[`UIImage`文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImageView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIImageView/startAnimating)：

> **开始动画**
> 
> 此方法***始终***从列表中的第一个图像开始动画。

因此，如果图像已经动画，则不应调用此方法。您可以调用`isAnimating`方法来检查图像是否动画。

# php - 使用 php 为图像提供对比效果

> ID：15508325
> 
> 赞同：0
> 
> 时间：2013-03-19T19:06:48.690
> 
> 标签：php, html

这是我的 html/php 代码：

```
<form method="post" action="contrast.php">
  <li><input type="image" height="200" width="200" src="show_image.php?id='2'"   
  id="image" onclick="document.getElementById('hidimgSrc').value                   
  =this.src;document.getElementById('myform').submit();" name="abc"></li> 
  </form> 
```

这是 contrast.php 图像的 php 代码：

```
 <?php
    $a=(string)$_POST['abc'];
    echo $a;
    $image = imagecreatefromjpeg($a); 
    imagefilter($image, IMG_FILTER_CONTRAST, -80); 
    imagejpeg($image, 'contrast-sun.jpg'); 
    imagedestroy($image); 
    echo '<img src="contrast-sun.jpg" alt="Image With A Contrast Effect Applied" />'; 

   ?> 
```

这里出现的错误是 Undefined index: abc in C:\wamp\www\radha\contrast.php 在第 2 行，即图像的名称没有正确提交.....所以有人请帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:14:12.767

不幸的是，有时图像按钮不会将数据传送到您的 php 页面。我已经多次遇到这些问题。后来我意识到

```
<input type="image" /> 
```

是问题所在。尝试

```
<input type="submit" height="200" width="200" onclick="document.getElementById('hidimgSrc').value=this.src;document.getElementById('myform').submit();" name="abc"> 
```

# grails - Groovy Pretty Print XML 断言失败

> ID：15508326
> 
> 赞同：0
> 
> 时间：2013-03-19T19:06:58.340
> 
> 标签：grails, groovy

我正在编写一个单元测试来验证 xml 的格式是否正确，但这失败了，我不知道为什么。

所以我决定测试[这篇博](http://mrhaki.blogspot.com.br/2012/10/groovy-goodness-pretty-print-xml.html)文的代码并在 Grails 控制台中测试，它也失败了。

```
import groovy.xml.*

def prettyXml = '''\
<?xml version="1.0" encoding="UTF-8"?>
<languages>
  <language id="1">Groovy</language>
  <language id="2">Java</language>
  <language id="3">Scala</language>
</languages>
'''

// Pretty print a non-formatted XML String.
def xmlString = '<languages><language id="1">Groovy</language><language id="2">Java</language><language id="3">Scala</language></languages>'
assert XmlUtil.serialize(xmlString) == prettyXml 
```

断言失败：

```
Assertion failed: 

assert XmlUtil.serialize(xmlString) == prettyXml
               |         |          |  |
               |         |          |  <?xml version="1.0" encoding="UTF-8"?>
               |         |          |  <languages>
               |         |          |    <language id="1">Groovy</language>
               |         |          |    <language id="2">Java</language>
               |         |          |    <language id="3">Scala</language>
               |         |          |  </languages>
               |         |          false
               |         <languages><language id="1">Groovy</language><language id="2">Java</language><language id="3">Scala</language></languages>
               <?xml version="1.0" encoding="UTF-8"?>
               <languages>
                 <language id="1">Groovy</language>
                 <language id="2">Java</language>
                 <language id="3">Scala</language>
               </languages> 
```

我在 Windows 7 上使用 Grails 2.2.1，它使用 Groovy 2.0.7。

也许与操作系统行分隔符有关？

**编辑**

我将两个字符串都保存到文件中，并使用 Notepad++ 进行了检查

解析的 xml (XmlUtils) 具有`CL+RF`作为行分隔符，但`prettyXml`只有`LF`. 我还测试了使用`\n`而不是多行声明，结果相同！

Groovy 不应该`CL+RF`总是使用，因为这是 Windows 行分隔符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:40:36.493

在[Groovy String/GString docs](http://groovy.codehaus.org/Strings+and+GString)中，它说与多行文字有关：

> There[sic] 总是由字符 '\n' 表示，而不管主机系统的行终止约定。

不幸的是，他们并没有真正说明原因。

# linux - 在bash中使用前导数字设置环境变量

> ID：15508327
> 
> 赞同：7
> 
> 时间：2013-03-19T19:07:01.203
> 
> 标签：linux, bash, shell, environment-variables

我需要在 bash 中设置一个名为“64bit”（即带有前导数字）的环境变量。但是，bash 变量名不允许使用前导数字的变量。我知道在调用 bash 时设置它的方法：

```
env 64bit=1 /usr/bin/bash 
```

但是，我正在寻找一种在当前运行的 shell 中更改它的方法，即不是通过启动新的 shell。我也知道 csh 允许变量以数字开头，但我需要使用 bash。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T21:37:43.033

您还可以绕过 bash 解释器，直接使用 bash 内部函数定义变量：

```
$ gdb --batch-silent -ex "attach $$"                              \
    -ex 'set bind_variable("64bit", "1", 0)'                      \
    -ex 'set *(int*)(find_variable("64bit")+sizeof(char*)*5) = 1' \
    -ex 'set array_needs_making = 1'

$ env | grep 64
64bit=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:56:05.097

正如人们指出的那样，Bash 不允许以数字开头的变量。但是，它确实将无法识别的环境字符串传递给外部程序，这就是变量显示在`env`而不是在`set`.

作为一种解决方法，您可以使用有效名称`_64bit`，然后自动将无效变量名称注入您运行的命令中：

```
#!/bin/bash    
# Setup for injection hack
original=$PATH
PATH="/"
command_not_found_handle() {
  PATH="$original" env "64bit=$_64bit" "$@"
}

# Your script and logic
_64bit="some dynamic value"

# This verifies that '64bit' is automatically set
env | grep ^64bit 
```

请注意，此特定方法仅在您通过 $PATH 调用时才有效，而不是在您使用相对或绝对路径名时有效。

如果您确实按路径名调用，请考虑修改 PATH 并改为按名称调用。

# c++ - 根据数据实例化 int 模板

> ID：15508338
> 
> 赞同：0
> 
> 时间：2013-03-19T19:07:24.807
> 
> 标签：c++, templates

我使用[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)作为线性代数包。他们有固定大小的矩阵类型，定义如下：

```
template<class TNumber, size_t N, size_t M>
class Matrix
{...} 
```

所以因为我只使用向量和方阵，我的大多数类最终都是类似的模板：

```
template<size_t K>
class MyClass {...} 
```

维度 K 实际上取决于从文件加载的数据。是否有任何合理的方法可以用动态大小 K 实例化这些模板，或者我是否必须有一个 switch 语句：

```
switch(dim) {
case 1: MyClass<1>...
case 2: MyClass<2>...

default: //too much data
} 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:10:08.467

模板在编译时实例化，而不是运行时。因此，您不能拥有基于运行时数据的模板实例化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:18:28.353

如果您对维度数量有上限，则可以创建代理类以将维度映射到索引并改用索引。这不是一个很好的解决方案，但它可能会奏效。

```
 class Proxy{
  protected:
        OpaqueAllocator *allocators[10];
  public:
        Proxy(){
             allocators[0] = new SpecializedAllocator<0>();
             allocators[1] = new SpecializedAllocator<1>();
             allocators[...] = new SpecializedAllocator<...>();
             allocators[9] = new SpecializedAllocator<9>();
        }

        static OpaqueAllocator* getAllocator(const size_t index){ return allocators[index]; }
  };

  // usage:
  int test = 2;
  // allocate a two dimensional array:
  Container *c = Proxy::getAllocator(test)->allocate(); 
```

主要问题是您需要主容器的不透明类。您仍然可以在后台保留类型安全，但可读性会受到一点影响。

# hadoop - 使用自定义 FileInputFormat

> ID：15508346
> 
> 赞同：1
> 
> 时间：2013-03-19T19:07:52.347
> 
> 标签：hadoop, mapreduce

如何创建将文件作为单个记录发送到映射器的自定义 FileInputFormat 请帮助我举一个使用自定义 FileInputFormat 的示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:19:33.677

您想使用具有以下覆盖的自定义文件输入格式：

```
 @Override
        protected boolean isSplitable(JobContext context, Path filename) {
            return false;
        } 
```

[在 hadoop 源代码MultiFileWordCount](https://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.19/src/examples/org/apache/hadoop/examples/MultiFileWordCount.java)中有一个这样的例子。在该示例中，您会将上述覆盖的“isSplitable”方法添加到“CustomInputFormat”以避免拆分。

[这是](https://gist.github.com/pcsanwald/423681e1432168a897fe)如何将“isSplitable”合并到 MultiFileWordCount 示例中的要点；使用香草 hadoop api。

# web-services - loadrunner web_add_(auto)header() 函数和一个在测试 web 服务时创建 saml 令牌的代理

> ID：15508348
> 
> 赞同：1
> 
> 时间：2013-03-19T19:07:58.923
> 
> 标签：web-services, proxy, saml, loadrunner

LoadRunner 中的 web_add_header() 和 web_add_auto_header() 有什么区别？我的任务是在 web_custom_request 中针对代理发送一些标头信息，该代理基于此信息（即用户名和身份验证级别）生成一个 saml 令牌，该令牌将在针对 Web 服务的请求中进一步使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:22:09.930

不同之处在于添加的标题的上下文

*   ..._add_auto_header() 将标头添加到所有后续请求
*   ..._add_header() 仅添加到下一个请求

如果您需要为每个请求更新令牌，那么 web_add_header() 就是要走的路。

我内心的疯狂科学家可能会尝试使用标头来查看我是否添加了带有参数化标签的标头，然后使用 lr_save_string() 为变量分配一个值，如果在发送标头时会拾取该偏移。

# jsf - 用隐式导航替换导航箱后未显示的消息

> ID：15508359
> 
> 赞同：0
> 
> 时间：2013-03-19T19:08:29.903
> 
> 标签：jsf, jsf-2, primefaces

我删除了导航案例`faces-config.xml`并切换到隐式导航。

```
FacesContext context = FacesContext.getCurrentInstance();
context.addMessage(null, new FacesMessage("Successful", "Datacenter " + ndc.componentStatsId + " is created!"));

if (result == 1)
{
    return "DatacentersList.xhtml?faces-redirect=true";
}

if (result == 2)
{
    return "NewDatacenter.xhtml?faces-redirect=true";
}
return null; 
```

导航运行良好，但事实证明不再显示人脸消息。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:33:08.803

Faces 消息是请求范围的。它们被添加到当前请求中。重定向指示浏览器在给定 URL 上创建**全新的**GET 请求。该新请求与当前请求不同。该新请求根本不包含那些面孔消息。

您有 2 个选项：

1.  不要重定向。您可能也没有在原始导航案例中重定向。

    ```
    if (result == 1) {
        return "DatacentersList.xhtml";
    }

    if (result == 2) {
        return "NewDatacenter.xhtml";
    } 
    ```

2.  [将消息保存](http://docs.oracle.com/javaee/6/api/javax/faces/context/Flash.html#setKeepMessages%28boolean%29)在 Flash 范围内。Flash 作用域的有效寿命与单个重定向一样长。

    ```
    context.getExternalContext().getFlash().setKeepMessages(true); 
    ```

    请注意，较旧的 Mojarra 版本有一些与此相关的特殊错误。例如重定向到不同的文件夹仍然会导致它失败。确保您至少使用 Mojarra 版本 2.1.14 以确保您不会被这些错误所困扰（它目前已经在 2.1.20）。

# php - PHP数组进入while循环

> ID：15508364
> 
> 赞同：0
> 
> 时间：2013-03-19T19:08:44.570
> 
> 标签：php, mysql, database, arrays

此 PHP 代码用于检查用户正在关注的名称。他们是他的朋友，或者如果他们不是他的，则 $friends 必须显示`<td>&nbsp; &nbsp; &nbsp;<input type="submit" id="downloadbut" value="Follow"></td>`是否有他的 $friends 必须显示`echo '<td>&nbsp; &nbsp; &nbsp;<span id="liketextvote">Following</span></td>';`用户是否正在关注他们。但我的问题是我无法为 $friends 获得结果。问题是

> 注意：数组到字符串的转换在 C:\xampp\htdocs\Edu\1111111111111\userinfo.php 中第 109 行数组

. 但在 while 循环内部结果是：megiantongeorgekatimery - 这是来自 MySQL 数据库的示例。我没有 idei 我怎样才能得到这个结果。有人可以帮忙吗？

```
$userfile = $_GET['username'];
$username = $user_data['username'];

if ($username != $userfile) {
    $addfriends = mysql_query("SELECT `follow` FROM `friends` WHERE `username` = '$username' ORDER BY id DESC");
    $friends = array();

    while ($query_row = mysql_fetch_array($addfriends)) {
        $val = $query_row['follow'];
        echo $val; // hier I can get result example five name megiantongeorgekatimery
        $friends[] = $val;
    }

    echo $friends; // hier I can get result example five name megiantongeorgekatimery

    if (!in_array($userfile, $friends)) {
        echo '<form action="addfriends.php?username='.$userfile.'" method="post">
                  <td>&nbsp; &nbsp; &nbsp;<input type="submit" id="downloadbut" value="Follow"></td>
              </form>';
    } else {
        echo '<td>&nbsp; &nbsp; &nbsp;<span id="liketextvote">Following</span></td>';
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:13:41.807

当你这样做时，你正在尝试`echo`一个数组`echo $friends`。

如果这只是一个调试语句，请`print_r`改用

```
print_r($friends); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:11:59.153

您首先使用 $friends 作为数组。
如果要从数组中打印数据，请使用 foreach 循环遍历它，或者在打印之前将它们全部连接在一起。

```
foreach ($friends as $friend) {print "$friend<br>";} 
```

或者

```
print join("<br>",$friends); 
```

# javascript - 为什么 div 的 jQuery position() 在 onload 之后是 0,0 但片刻之后才是真正的价值？

> ID：15508367
> 
> 赞同：0
> 
> 时间：2013-03-19T19:08:54.127
> 
> 标签：javascript, jquery, position

**该死，我想通了... [见下文](https://stackoverflow.com/a/15509637/636189)。我正在查询的 div 层通过 CSS 隐藏，然后在我的位置查询后在 JS 中显示。因为我从来没有看到它被隐藏，所以我没有意识到它是隐藏的，这就是 jQuery 返回 0,0 的原因。**

我觉得自己像个白痴。

下面的代码只是说明性的，包含了我认为必要的所有代码，但它遗漏了关键的 CSS 定义和关键的 JS 调用：

我有一个 div 层，其中包含一些用于菜单项的子 div 层。

```
<div id="menuItems">
    <div id="menuItem0">Menu Item 0</div>
    <div id="menuItem1">Menu Item 1</div>
</div> 
```

位置和尺寸在外部 CSS 中定义。

```
#menuItem0 { top: 0px; left: 100px; height: 40px; width: 200px; background-color: green;}
#menuItem1 { top: 0px; left: 350px; height: 40px; width: 200px; background-color: red;} 
```

并且在加载脚本时应该显示菜单项的位置和尺寸：

```
$(window).load(function () {
    prepareMenuItems();    
});

function prepareMenuItems() { 
    var numberOfMenuItems = $("#menuItems").children().length;

    for (var i=0; i<numberOfMenuItems; i++) {
        console.log("left: "+$("#menuItem" + i).position().left + 
            " top:" + $("#menuItem" + i).position().top +
            " w:" + $("#menuItem" + i).width() + 
            " h:"+ $("#menuItem" + i).height());
    }
} 
```

在我的现场演示中，我在 Google Chrome（最新）中看到的是：左：0 上：0 w：200 h：40 左：0 上：0 w：200 h：40

左边和顶部不应该是零。

如果我在页面加载后强制中断，Chrome 调试器将正确评估 $("#menuItem0").position().left 上的手表。但是为什么不加载呢？它吐出正确的宽度和高度，因此显然已加载 CSS。它稍后会知道答案，因为强制休息会给出正确的答案，所以这不是我在看错误的位置。

帮助！它快把我逼疯了。

（对不起，我试图说明而不是文字，我没有意识到人们会测试给定的代码 [。Magritte 通过 Fiddler 这样做](https://stackoverflow.com/a/15508440/636189)并且代码按预期工作，所以它必须与外部引用有关到 CSS 或 JS 什么的……）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:21:35.477

我想通了……我是个白痴……我没有意识到其中一个 CSS 规则是在开始时隐藏父 div，而几毫秒后的代码会使其可见。所以在 jQuery 查询它的位置时，图层被隐藏了，jQuery 的行为是（我没有意识到）在隐藏 div 时返回 0。几毫秒后，图层显示出来，现在 jQuery 按预期工作。当然，秘诀是在开始时不隐藏父 div 层。

谢谢回复的各位。你们看到它真是太棒了，修复了我愚蠢的错别字，并迫使我进一步研究它以制作一个有效的演示以更好地证明我的观点（这让我找到了解决方案）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:13:40.200

似乎对我有用，你有一些错别字：http: [//jsfiddle.net/MQfqA/1/](http://jsfiddle.net/MQfqA/1/)

```
function prepareMenuItems() { 
    var numberOfMenuItems = $("#menuItems").children().length;

    for (var i=0; i<numberOfMenuItems; i++) {
        console.log("left: "+$("#menuItem" + i).position().left + 
            " top:" + $("#menuItem" + i).position().top +
            " w:" + $("#menuItem" + i).width() + 
            " h:"+ $("#menuItem" + i).height());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:15:32.500

你的语法错误。这现在有效

```
$(document).ready(function () {
    prepareMenuItems();    
});

function prepareMenuItems() { 
    var numberOfMenuItems = $("#menuItems").children().length;

    for (var i=0; i<numberOfMenuItems; i++) {
        console.log("left: "+$("#menuItem" + i).position().left + 
            " top:"+$("#menuItem" + i).position().top+
            " w:"+$("#menuItem" + i).width() + 
            " h:"+ $("#menuItem" + i).height());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T19:15:39.933

我的印象还是您忘记在第 11 行关闭报价？

# joomla - 不正确的登录转到 404 而不是登录页面

> ID：15508368
> 
> 赞同：0
> 
> 时间：2013-03-19T19:08:56.860
> 
> 标签：joomla, login, http-status-code-404

我正在尝试为我的网站设置登录部分 - 登录工作正常。但是，如果登录不正确，则会转到 404 页面而不是登录页面。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:22:08.367

大多数 joomla 登录模块都有参数，用于在登录成功或不成功后将用户重定向到菜单或 url。我猜您的是将用户重定向到已发布的菜单或项目或断开的链接。

如果您使用的是 Joomla 的本机登录模块或类似的东西`mod_k2_user`，应该有一个名为的参数`Login Redirection Page`，您可以将其指向已发布的菜单项。

转到您的管理员区域，模块管理器并找到您的登录模块并查看它的参数。

# algorithm - AI：查找路径是否存在的最快算法？

> ID：15508370
> 
> 赞同：9
> 
> 时间：2013-03-19T19:09:05.630
> 
> 标签：algorithm, artificial-intelligence, path-finding, a-star

我正在寻找一种寻路算法，用于 AI 控制 2D 网格中的实体，该实体需要找到从 A 到 B 的路径。它不一定是最短路径，但需要非常快速地计算。网格是静态的（从不改变），一些网格单元被障碍物占据。

我目前正在使用 A*，但它对于我的目的来说太慢了，因为它总是试图计算最快的路径。主要的性能问题发生在路径不存在时，在这种情况下 A* 将尝试探索太多的单元格。

如果路径不必是最短路径，我是否可以使用其他算法找到比 A* 更快的路径？

谢谢，

管腔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T19:19:50.643

假设您的网格是静态的并且不会改变。您可以在构建网格后计算图形的连接组件一次。

然后您可以轻松检查源顶点和目标顶点是否在组件内。如果是，则执行 A*，如果不是，则不执行，因为组件之间不能存在路径。

您可以使用 BFS 或 DFS 获取图的连通分量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T19:37:02.350

*要*查找路径而不是最短路径，请使用任何图遍历（例如深度优先或最佳优先）。它不一定会更快，实际上它可能会在某些图表上检查比 A* 更多的节点，因此这取决于您的数据。但是，它会更容易实现，并且常数因子会显着降低。

为避免在没有路径时搜索路径，您可以创建[不相交集](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)（在构建图形后）以*非常*快速地检查两个给定点是否连接。这需要线性空间和线性时间来构建，并且查找需要摊销的几乎恒定的时间，但您有时仍需要运行完整的算法，因为它只会告诉您*是否*存在路径，而不是路径的去向。

如果您已经预先构建了数据结构，并且在运行时有更多的时间和空间来换取*即时最短路径*，那么您也可以大吃一惊：[Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)为您提供了*所有*最短路径相对适中的`O(|V|^3)`时间，考虑到有 |V|²（开始，目的地）对，这是最划算的。它计算一个`|V| * |V|`可能有点大的矩阵，但考虑到这是一个整数矩阵，您只需要`|V| * |V| * log_2 |V|`位（例如，对于 1024 个顶点，这是 1.25 MiB）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T19:15:42.007

您可以使用[DFS](http://en.wikipedia.org/wiki/Depth-first_search)或[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)，因为您只想知道两个顶点是否连接。两种算法都运行在`O(|V|)`哪里`V`是图中所有顶点的集合。

如果您的启发式算法需要一些不平凡的时间来计算，请使用这两种算法中的任何一种，否则我认为 A* 应该与 DFS 或 BFS 类似或更好地运行。

作为另一种选择，您可以使用[Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)( `O(V^3)`) 在创建网格后计算每对顶点之间的最短距离路径，从而在模拟开始时完成所有繁重工作，然后存储所有最短距离哈希中 O(1) 访问的路径，或者如果这证明内存爆炸性太大，您可以只保留一个矩阵`next`，以便`next[i][j]`存储我们从 vertex`i`到 vertex必须采取的顶点`j`。`i`因此我们可以建立从到`j`的路径`(i, k1=next[i][j]), (k1, k2=next[k1][j]) ... (kr, j)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T19:34:40.073

如果图足够小，您可以使用[Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)预先计算所有最短路径。这需要`O(|V|²)`内存来存储路径，并且需要`O(|V|³)`时间来进行预计算。

显然，这不是非常大的图表的选择。对于那些您应该使用 Thomas 的答案并预先计算连接的组件（需要线性时间和内存）以避免最昂贵的 A* 搜索。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T11:10:26.887

如果您的迷宫永远不会改变并且任何存在的路径永远存在，您是否可以不使用映射算法来找到迷宫的“区域”并以某种格式存储它们？内存使用量与节点或单元的数量呈线性关系，速度是访问和比较数组的两个元素的速度。

计算（分割到区域）可能会更耗时，但它在一开始就完成了一次。也许您可以为此目的调整一些洪水填充算法？

不确定从上面是否清楚，但我认为一个例子总是有帮助的。我希望你能原谅我使用 PHP 语法。

示例（迷宫 5x5）（`[]`标记障碍物）：

```
 0 1 2 3 4
  +----------+
0 |[][]   2  |
1 |  [][]    |
2 |    []  []|
3 |  1 []    |
4 |    []    |
  +----------+ 
```

索引区域（使用数字哈希而不是 'x:y' 可能会更好）：

```
$regions=array(
    '0:1'=>1,'0:2'=>1,'0:3'=>1,'0:4'=>1,'1:2'=>1,'1:3'=>1,'1:4'=>1,
    '2:0'=>2,'3:0'=>2,'3:1'=>2,'3:2'=>2,'3:3'=>2,'3:4'=>2,'4:0'=>2,
    '4:1'=>2,'4:3'=>2,'4:4'=>2
); 
```

那么你的任务就是找出你的起点和终点是否都在同一个区域：

```
if ( $regions[$startPoint] == $regions[$endPoint] )
    pathExists(); 
```

现在，如果我没记错的话，A* 复杂度（速度）取决于起点和终点之间的距离（或解决方案的长度），这也许可以用来加快您的搜索速度。

我会尝试在迷宫中创建一些“连接节点”（ *JN ）。*这些可以位于一个函数上（以快速了解最近的*JN*在哪里），并且您将预先计算所有相邻*JN之间的路径。*

因此，您只需要从起点到最近的*JN*以及从终点到最近的*JN*搜索解决方案（所有这些都在同一区域（以上））。现在我可以看到一个场景（如果在迷宫的复杂性方面没有很好地选择函数），它有几个区域，其中一些可能根本没有*JN*，或者你的所有*JN*都落在迷宫中的障碍物上。 ..因此，如果可能的话，最好手动定义这些*JN*，或者使这个*JN*放置函数变得不平凡（考虑到每个区域的面积）。

到达*JN*后，您可能会将它们之间的路径编入索引（以快速检索开始和结束*JN*之间的预定义路径）或执行另一个 A* 寻路，但这次仅在“连接节点”集上 - 因为少得多其中*JN*之间的路径搜索会更快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-14T00:40:23.610

您可以考虑使用 Anytime A* 算法（ANA* 或其他变体）。

这些将首先执行贪婪的最佳优先搜索以找到初始路径。

然后，它将通过运行启发式函数的权重越来越小来进行渐进式改进。

您可以随时取消搜索并获得迄今为止找到的最佳路径。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T23:33:35.890

A*、BFS、DFS 和所有其他搜索算法在没有路径时必须检查完全相同数量的节点，因此*“先使用 DFS”*不是一个好的答案。并且*完全*没有必要使用 Floyd-Warshall。

对于静态图，解决方案很简单；请参阅@Thomas 的回答。对于非静态图，问题更复杂；请参阅[此答案](https://gamedev.stackexchange.com/questions/32813/32831#32831)以获得一个好的算法。

# .net - ILMerge - 打破反射？

> ID：15508376
> 
> 赞同：0
> 
> 时间：2013-03-19T19:09:25.537
> 
> 标签：.net, .net-4.5, ilmerge

我最近遇到了一个问题（之前没有注意到），合并 2 个程序集会导致一种或多种类型“丢失”其基本类型（System.Object） - 破坏了在结果内部或外部使用反射的任何尝试部件。

两个程序集都基于 .NET 4.5，主要程序集是 ASP.NET MVC 4 应用程序。在使用新的 Web API 及其相关的依赖解析器之前，我能够解决反射问题（因此我无法控制反射）。

请注意，合并本身没有错误\问题，针对正确的 v4；[程序文件 - 引用的程序集]、基于 AnyCPU 的等等（我几乎 100% 确定我已经涵盖了所有情况 - 可能是错误的:))

有人遇到过这种情况么？我该如何解决这个问题？

编辑：2013 年 3 月 20 日

ILMerge 版本 2.13.307.0
版权所有 (C) Microsoft Corporation 2004-2006。版权所有。
ILMerge /ndebug /useFullPublicKeyForReferences /keyfile:[pathToSNK] /log:output.log /targetplatform:v4,C:\Windows\Microsoft.NET\Framework\v4.0.30319 /lib:[ManyOfThese] /align:4096 /out:[目标].dll [源].dll [ToMerge].dll

将平台设置为'v4'，使用目录'C:\Windows\Microsoft.NET\Framework\v4.0.30319' for mscorlib.dll
Running on Microsoft (R) .NET Framework v4.0.30319 mscorlib.dll
version = 4.0.0.0
输入程序集列表为：[Source].dll、[ToMerge].dll

-尝试从文件“[Source].dll”中读取程序集。
在汇编中成功读取。
[Source] 的元数据中没有报告错误。
-尝试从文件“[ToMerge].dll”中读取程序集。
在汇编中成功读取。
[ToMerge] 的元数据中没有报告错误。
- 检查所有输入程序集是否具有兼容的 PeKind。
[Source].PeKind = ILonly
[ToMerge].PeKind = ILonly
-所有输入程序集都有一个兼容的 PeKind 值。
[多个 AssemblyResolver 部分，每个部分都以成功结尾]

- 使用程序集“[源]”作为目标程序集的程序集级属性。
-将程序集“[源]”合并到目标程序集中。
-将程序集“[ToMerge]”合并到目标程序集中。
- 重复类型名称：将类型“[SomeAnonymousType]”（从程序集“[ToMerge]”）的名称修改为“[ToMerge].[SomeAnonymousType]” -
将 1 个 Win32 资源从程序集“[Source]”复制到目标程序集。
-ILMerge：使用密钥文件“：[pathToSNK]”签署程序集。
目标程序集的元数据中没有报告错误。
-ILMerge：编写目标程序集“[Target].dll”。
[多个 AssemblyResolver 部分，每个部分都以成功结尾]

-ILMerge：使用强名称签名的程序集“[Source].dll”。[许多没有错误的位置]

-ILMerge：完成。

PEVerify.exe /MD /IL [Target].dll
35 个错误（212 个警告）。

# javascript - xml格式的ajax sql php，即错误

> ID：15508377
> 
> 赞同：0
> 
> 时间：2013-03-19T19:09:28.780
> 
> 标签：javascript, xml, ajax, internet-explorer, xmlhttprequest

我有ajax代码，使用xml格式的php代码检索sql。我想在页面加载时使用ajax请求javascript代码显示xml。我已经在 firefox、chrome 上进行了这项工作，但是在 Internet Explorer 上却出现了这个错误：

*SCRIPT5007：无法获取未定义或空引用的属性“documentElement”*

以下函数的第 2 行出现此错误：

```
REQ.getRequest("getXML.php" , displayXMLOnl, true);
function displayXMLOnl( data ){
    var root = data.documentElement; // the error in this line
    } 
```

# html - 需要帮助以禁用从 URL 下载

> ID：15508383
> 
> 赞同：0
> 
> 时间：2013-03-19T19:09:43.087
> 
> 标签：html

有没有办法禁止用户从 URL 下载文件？

例如我有一个链接：

wow.mywebsitedomain.com/templates/filename.svg

我想禁止用户下载 filename.svg

这些 svg 文件不仅仅是一个图像，它们是可编辑的设计，我在每个文件上都花费了无数个小时。不，我不在乎是否有人做了丝网印刷或获得 png 等，因为这些文件是不可缩放、可编辑的矢量文件。

当用户点击 png 缩略图时，我的实际链接会打开我的在线设计编辑器，允许用户自定义这些文件，然后保存到我的服务器，然后购买印刷媒体，并且不允许他们下载任何文件。

我尝试将实际文件放入服务器上受密码保护的文件夹中，但它们无法正确打开，并且我不希望用户拥有对该文件夹的密码访问权限。

本质上，我需要链接可以访问，只是不显示实际链接供某人复制和打开/保存/下载等。

希望对于具有基本 html 技能的非程序员有一个简单的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:12:30.700

如果他们可以查看它，他们可以下载它。故事结局。如果您只想让他们看到 PNG，请用它制作一个 PNG 并将其放上去

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:19:42.437

您可以执行“禁用右键单击”之类的操作 - 它可能会阻止*某些*用户下载您的文件，但基本上您不能阻止浏览器下载和解释的文件下载到用户的硬盘驱动器。这不仅适用于 SVG，也适用于音乐、视频等。

相反，您可以在服务器端*将*SVG 文件转换为 PNG，并仅向用户显示 PNG。请注意，您可以根据请求、用户的屏幕分辨率等动态创建不同大小的 PNG。如果需要，您还可以实现对生成的 PNG 的缓存。

关于如何在 PHP 中从 SVG 创建 PNG，请阅读此处：
[使用 PHP 将 SVG 图像转换为 PNG](https://stackoverflow.com/questions/4809194/convert-svg-image-to-png-with-php)

当然，您可以选择其他光栅图像格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:12:56.960

我的理解是；如果你能看到，你可以下载它，

# c# - 实体框架将导航属性映射为标量属性

> ID：15508391
> 
> 赞同：1
> 
> 时间：2013-03-19T19:10:01.053
> 
> 标签：c#, entity-framework, foreign-keys

我试图从数据库生成模型。正在生成模型，但所有外键字段（应该只是导航属性）都被映射为导航属性和标量属性（在模型中）。

我知道外键是在数据库多重性的末尾添加的，但是每当我从模型生成数据库时，所有实体类都不包含该字段。

有没有办法忽略这个从数据库生成模型的字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T20:34:21.967

*当您从数据库生成模型时，有一个名为Include foreign key columns in the model*的复选框。此复选框默认处于选中状态。如果您取消选择它，您的模型将不包含外键属性，而仅包含导航属性。

# c# - 在 MVC 中对 Gridview 进行数据绑定

> ID：15508392
> 
> 赞同：0
> 
> 时间：2013-03-19T19:10:04.520
> 
> 标签：c#, asp.net-mvc

我正在尝试自学 MVC，但我遇到了代码背后的问题。

在我当前的问题中，我正在尝试将数据绑定到网格视图。现在，我已经能够通过在我的 aspx 中创建 page_load 方法来做到这一点。

```
<script language="CS" runat="server"> 
void Page_Load(object sender, System.EventArgs e)  
{
  grdMyGrid.DataSource = Model.getAllRecords();
  grdMyGrid.DataBind();
} 
</script> 
```

这可行，但是，在我看来，这是不对的。去年我一直在强迫自己确保所有绑定都发生在后面的代码中，并且我发现的所有 MVC 示例都显示在 aspx 中进行数据绑定！（尽管它们都仅限于文本框）。那么这样做的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:39:00.270

这里有几个项目。在通过 MVC 的理想世界中，您的模型应该只是数据的持有者。IE 没有方法、逻辑等。这些都应该由您的控制器处理。（我强烈建议阅读 odetocode.com 上 K. Scott Allen 的博客中的文章/条目，以了解如何正确使用 MVC）。也就是说，我必须询问为什么模型有方法。

更多关于您的问题：MVC 页面真的，真的不应该使用 Web 表单和其中的控件。我将为此链接到这个问题：[How to use gridView in Mvc without adding form runat server?](https://stackoverflow.com/questions/9841564/how-to-use-gridview-in-mvc-without-adding-form-runat-server)

那里接受的答案列出了一种处理此问题的方法，另一种选择是使用显示模板，您可以在这里找到一个不错的教程：http: [//haacked.com/archive/2010/05/05/asp-net -mvc-tabular-display-template.aspx](http://haacked.com/archive/2010/05/05/asp-net-mvc-tabular-display-template.aspx)

# scala - dispatch.databinder.net 的正确 mvn 版本

> ID：15508401
> 
> 赞同：2
> 
> 时间：2013-03-19T19:10:41.283
> 
> 标签：scala, maven, scala-dispatch

[据该网站](http://dispatch.databinder.net/Dispatch.html)称，库 dispatch.databinder.net 的最新版本是 0.9.5 。

什么是正确的 mvn 依赖？

```
<dependency>
  <groupId>net.databinder.dispatch</groupId>
  <artifactId>core_2.10</artifactId>
  <version>0.9.1</version>
</dependency> 
```

或者

```
<dependency>
  <groupId>net.databinder.dispatch</groupId>
  <artifactId>dispatch-core_2.10</artifactId>
  <version>0.9.5</version>
</dependency> 
```

或者是其他东西？

以及如何找到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:29:33.077

由于网站上说

```
libraryDependencies += "net.databinder.dispatch" %% "dispatch-core" % "0.9.5" 
```

Scala 2.10.x 对应的 maven 表示法应该是：

```
<dependency>
  <groupId>net.databinder.dispatch</groupId>
  <artifactId>dispatch-core_2.10</artifactId>
  <version>0.9.5</version>
</dependency> 
```

从 sbt 0.12.0 开始，Scala 版本的后缀被缩短`_2.10`为 Scala 2.10.x 及更高版本，以利用 Scala 次要版本之间的二进制兼容性。

# c++ - C++11/模板：选择正确的函数重载

> ID：15508402
> 
> 赞同：1
> 
> 时间：2013-03-19T19:10:41.713
> 
> 标签：c++, templates, c++11, word-wrap, overloading

关于[这个问题](https://stackoverflow.com/questions/15506427/c11-universal-executor)，这可能过于简单化了，我在这里举一个更复杂的例子。我假装的问题用以下代码描述：

```
// test3.cpp

using namespace std;

template<typename T>
struct exer
{
    template<typename R, typename... rArgs, typename... pArgs>
    R operator()(R(T::*f)(rArgs...), pArgs&&... args)
    {
       return (t.*f)(forward<pArgs>(args)...);
    }

    T t;
};

struct A
{
    int addition() { return 0; }

    template<typename... Args>
    int addition(int a, Args... args) { return a + addition(args...); }
};

struct B
{
public:
    template<typename... Args>
    int addition(Args&&... args)
    {
       return m_e(&A::addition, forward<Args>(args)...);
    }

private:
    exer<A> m_e;
};

int main()
{
    B b;

    cout << b.addition(1, 2, 3, 4) << endl;
} 
```

这里的问题是，在 的实例化中`B::addition`， 的类型`&A::addition`是未知的，因为存在不同的重载。此外，`B::addition`也不知道必须使用哪个重载。在调用函数之前，它不知道编译器。但是，为了正确指定必须使用的重载`exer<A>::operator()`，我需要进行转换`&A::addition`以将其转换为正确的重载。

如何提取目标函数正确重载的类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T20:00:19.330

换个问题。如果您可以`exer`使用可调用对象而不是指向成员函数的指针，如下所示：

```
template<typename T>
struct exer
{
    T t;
    template<typename F, typename... pArgs>
    auto operator()(F f, pArgs&&... args)
    -> decltype(f(t, forward<pArgs>(args)...))
    {
       return f(t, forward<pArgs>(args)...);
    }

}; 
```

然后你可以这样做：

```
struct B
{
public:
    template<typename... Args>
    int addition(Args&&... args)
    {
        struct Invoker {
            auto operator()(A& a, Args&&... args) const
                ->decltype(a.addition(std::forward<Args>(args)...))
            { return a.addition(std::forward<Args>(args)...); }
        };
        return m_e(Invoker(), forward<Args>(args)...);
    }

private:
    exer<A> m_e;
}; 
```

现在选择正确`A::addition`是由编译器使用正常的重载解决规则完成的。

代替`Invoker`你可以使用 lambda 表达式，它减少了一些重复：

```
 return m_e( [](A& a, Args&&... as) {
                      return a.addition(forward<Args>(as)...);
                    },
                    forward<Args>(args)...); 
```

# wordpress - 在wordpress中获取页面中所有自定义帖子类型的标题

> ID：15508406
> 
> 赞同：2
> 
> 时间：2013-03-19T19:11:07.953
> 
> 标签：wordpress

我在一个页面中输出一堆自定义帖子类型。如何获取当前页面中所有帖子的标题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T19:24:43.607

您应该查看 WP_Query() 以输出自定义帖子类型。下面的代码获取您所有类型为“custom_post_type”的自定义帖子，将它们放入一个名为 $loop 的变量中并对其进行迭代，输出其中包含的每个帖子的标题。

```
<?php
// Get the 'Profiles' post type
$args = array(
    'post_type' => 'custom_post_type',
);
$loop = new WP_Query($args);

while($loop->have_posts()): $loop->the_post();

the_title();

endwhile;
wp_reset_query();
?> 
```

您可以将其他参数传递给 WP_Query() 以使其更适合您的需求。文档可以在[这里](https://codex.wordpress.org/Class_Reference/WP_Query)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T14:38:02.460

就在“循环”之前，您不妨使用：

```
<?php query_posts('post_type=your_custom_post_type');?> 
```

# iphone - UITableView 的 didSelectRowAtIndexPath 仅每隔一次调用一次

> ID：15508413
> 
> 赞同：0
> 
> 时间：2013-03-19T19:11:53.687
> 
> 标签：iphone, ios, objective-c

我正在使用自定义 tableCells 构建标准 UITableView。我希望自定义单元格在 touchBegan 和 touchEnd 时执行某些操作。我在自定义单元类中实现了这些触摸方法，它工作得很好。

这就是乐趣开始的地方。花了一段时间才弄清楚为什么自定义单元格所在的表格没有收到触摸。我希望单元格在触摸时执行某些操作，但也让表格接收该触摸，以便它可以调用 didSelectRow/didDeselectRowAtIndexPath。然后我将 [super touchesBegan:touches withEvent:event] 添加到自定义单元格类的所有触摸方法中，这使表格也可以接收单元格触摸......有点。当我运行程序时，前 2-3 次触摸记录到单元格和表格中。之后，单元格继续每次注册一次触摸，但表格只会*每隔一次注册一次触摸*这种奇怪的行为让我很难过。我研究了视图层次结构的概念，看看这是否可能是问题，以及诸如 hitTest 之类的替代方案，但没有什么是明显的解决方案。有没有人有任何理论来解释为什么会发生这种情况？这是自定义单元格触摸和 didSelectRowAtIndexPath 方法的代码。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches]anyObject];

    if([touch view] == self.nameLabel) {
        CGFloat isRed = 151.0/255.0;
        CGFloat isGreen = 151.0/255.0;
        CGFloat isBlue = 151.0/255.0;

            self.nameLabel.backgroundColor = [[UIColor alloc]initWithRed:isRed green:isGreen blue:isBlue alpha:1.0];

    if(!self.currentlySelected) {

        NSLog(@"if(!self.currentlySelected");

        self.currentlySelected = YES;
        [self.accessoryButton setImage:[UIImage imageNamed:@"Checkmark.png"]forState:UIControlStateNormal];
        self.accessoryButton.hidden = NO;

    }
    else {
        NSLog(@"if(self.currentlySelected");
        self.currentlySelected = NO;
       self.accessoryButton.hidden = YES;
        [self.accessoryButton setImage:nil forState:UIControlStateNormal];

    }

}
NSLog(@"Touch Began");
[super touchesBegan:touches withEvent:event];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesMoved:touches withEvent:event];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches]anyObject];

    if([touch view] == self.nameLabel) {
        self.nameLabel.backgroundColor = [[UIColor alloc]initWithRed:self.isRed green:self.isGreen blue:self.isBlue alpha:1.0];
    }
    NSLog(@"Touch End");
    [super touchesEnded: touches withEvent: event];
}

-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesCancelled:touches withEvent:event];
} 
```

didSelectRowAtIndexPath:

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(@"Method didselectRow was Called");

//If it is in the Alley section
if(indexPath.section == 0) {

    //If the selected cell is the same as the last selected cell
    if([self.lastIndexPathForAlleyCells isEqual:indexPath]) {
        NSLog(@"Same");
        [self.tableView beginUpdates];

        AlleyTableViewCell *previousCell = (AlleyTableViewCell *)[self.tableView cellForRowAtIndexPath:self.lastIndexPathForAlleyCells];
        previousCell.currentlySelected = NO;
        self.lastIndexPathForAlleyCells = nil;
        previousCell.accessoryButton.hidden = YES;
        [self.tableView endUpdates];
    }

    //Else the selected cell is not the last selected cell
    else {
    [self.tableView beginUpdates];

        NSLog(@"Not the same");
        AlleyTableViewCell *previousCell = (AlleyTableViewCell *)[self.tableView cellForRowAtIndexPath:self.lastIndexPathForAlleyCells];
        previousCell.currentlySelected = NO;
        previousCell.accessoryButton.hidden = YES;
    AlleyTableViewCell *cell = (AlleyTableViewCell *)[self.tableView cellForRowAtIndexPath:indexPath];
        cell.currentlySelected = YES;
        cell.accessoryButton.hidden = NO;

    self.lastIndexPathForAlleyCells = indexPath;
    [self.tableView endUpdates];
    }
}

else if(indexPath.section == 1) {
    NSLog(@"Section 1 shouldn't be here");
    PlayerTableViewCell *cell = (PlayerTableViewCell *)[self.tableView cellForRowAtIndexPath:indexPath];
    [cell.accessoryButton setImage:[UIImage imageNamed:@"Checkmark.png"] forState:UIControlStateNormal];
    [cell setSelected:NO animated:NO];
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:16:24.567

而不是覆盖`touchesBegan:withEvent:`你应该有你的自定义单元格覆盖`setSelected:animated:`，并`setHighlighted:animated:`根据需要处理它们何时被选择/突出显示。

让`UITableView`处理您的单元格的触摸，因为它`UITableViewCell`具有复杂的视图层次结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:13:03.593

与许多问题一样，问题不在于逻辑，而在于语法。我愚蠢地将我的 UITable 命名为“tableView”。这也恰好是在 didSelectRowAtIndexPath 中使用的参数 UITable 的名称。如果您注意到我在上面发布的代码中，所有对 didSelectRow() 的调用都会调用 self.tableView。相反，他们应该只是调用 tableView。虽然我无法完全解释为什么每隔一次调用 didSelectRowAtIndexPath 方法，但在更改此方法的参数名称后，一切正常！

总之，不要将属性命名为与参数名称相同的名称。

# html - 即使海报图像的宽高比与其视频元素不同，如何用海报图像填充视频元素？

> ID：15508421
> 
> 赞同：25
> 
> 时间：2013-03-19T19:12:44.787
> 
> 标签：html, css, html5-video

就目前而言，这仅在 WebKit 中进行了测试。

当`<video>`使用该属性在元素上设置海报图像时`poster`，此图像会在用户播放视频之前显示（默认行为）。但是，如果海​​报图像的纵横比与`<video>`设置它的元素的纵横比不同，则在图像的任一侧（左右或顶部和底部）都会看到空白（或可能是黑色），并且图像是居中（也是默认行为）。

我想知道如何放大这个图像（最好在 CSS 中），以便它填充视频元素，类似于使用 CSS3`background-size: cover;`值。

还在迷茫吗？也许这个 JSFiddle 将有助于解释：http: [//jsfiddle.net/jonnymilano/2w2CE/](http://jsfiddle.net/jonnymilano/2w2CE/)

我也会对强制图像进入视频容器、扭曲其高度和/或宽度以适应视频容器尺寸的答案感兴趣。但是，这个答案只能部分解决我的问题。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-19T20:20:07.797

这个问题让我开始思考，你的 jsfiddle 在解决这个问题时很有用（尽管不适用于 IE，因为它没有正确实现海报图像）。

基本上结合您发布的内容，将所需的海报图像设置为视频元素的背景图像，并指定 2x2 透明图像作为实际的海报图像。

例如

```
<video controls poster="transparent.png"> 
   <source src="video.mp4" type="video/mp4"> 
   <source src="video.webm" type="video/webm"> 
</video> 
```

和

```
video { 
   width:305px; 
   height:160px;  
   background:transparent url('poster.jpg') no-repeat 0 0; 
   -webkit-background-size:cover; 
   -moz-background-size:cover; 
   -o-background-size:cover; 
   background-size:cover; 
} 
```

[我在HTML5 Video and Background Images](http://www.iandevlin.com/blog/2013/03/html5/html5-video-and-background-images)上写了更多关于它的内容。

# django - Azure 本地模拟器无法正确提供 django 静态文件

> ID：15508425
> 
> 赞同：0
> 
> 时间：2013-03-19T19:12:57.143
> 
> 标签：django, iis, azure, visual-studio-2012

我遵循了 Django / Visual Studio / Azure 教程[http://www.windowsazure.com/en-us/develop/python/tutorials/django-with-visual-studio/](http://www.windowsazure.com/en-us/develop/python/tutorials/django-with-visual-studio/)。我有一个非常简单的应用程序，基本上是一个简单的 html 模板，带有一个 javascript 和一个 css 文件（代码示例在最后）。

当我在本地调试器中运行代码时，一切正常。当我尝试使用默认 VS 和 Azure SDK 提供的设置在本地 Azure 模拟器中运行代码时，我得到了 html 文件作为对 javascript 和 css 请求的响应。例如，request for`/static/calculator.js`返回应用程序的 html 模板，而不是`calculator.js`.

什么可能导致这种行为，如何解决？

更新：似乎当我在 Azure 模拟器中运行网站时，模拟器主机上的任何 url`127.0.0.2`都会返回“主页”，即`views.py`. 例如，`127.0.0.2/`返回网页（应该如此），`127.0.0.2/nonexistenturl`. 我的预感是，这在某种程度上是由于 Azure 模拟器使用的 fastcgi 或 IIS express 配置错误造成的。尝试解决此问题的良好起点是什么？

代码示例：

html模板链接：

```
<link rel="stylesheet" type="text/css" href="/static/calculator.css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="/static/calculator.js"></script> 
```

`urls.py`：

```
urlpatterns = patterns('',
                   url(r'^$', 'ExamCalculator.Calculator.views.main_page'),
) 
```

在`settings.py`staticfiles相关设置应该是正确的：

```
STATIC_ROOT = 'C:/.../static/'
STATIC_URL = '/static/'
# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    ...
) 
```

# ninject - 在 IStartupTask 中为引导程序注入依赖项

> ID：15508427
> 
> 赞同：1
> 
> 时间：2013-03-19T19:13:06.967
> 
> 标签：ninject, bootstrapper

我正在使用 Bootstrapper 和 Ninject 来管理引导我的应用程序和依赖注入。这是一个 asp.net webapi 应用程序。

我有一个简单的实现，`IStartupTask`如下所示。ILog 的实现是使用 Ninject 注册的。我想知道是否有办法将其注入`ILog`课堂`ContextBootstrap`？

```
public class ContextBootstrap : IStartupTask
{
    public ILog Log { get; set; }

    public ContextBootstrap(ILog log)
    {
        Log = log;
    }

    public void Run()
    {
        Log.Info("somehting");
    }

    public void Reset()
    {
        // do something here
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:01:44.683

我认为 IStartupTask 在内部使用注册的 DI 容器来创建具体类的实例，因此依赖项是通过构造函数注入的。

# visual-c++ - 如何为过滤器驱动程序制作持久存储？

> ID：15508434
> 
> 赞同：1
> 
> 时间：2013-03-19T19:13:21.493
> 
> 标签：visual-c++, visual-studio-2012, kernel, filter-driver

我正在尝试通过使用结构来保存某些数据，例如位图

```
typedef struct _BITMAPDATA
{
    CHAR* bitmapData;
    ULONG bitmapSize;
}BITMAPDATA,*PBITMAPDATA; 
```

我已经通过过滤器驱动程序创建了这些位图，位图工作正常但是，**我如何将该位图存储在像硬盘这样的持久存储中。**因此，每当系统意外崩溃或关闭时，驱动程序必须将创建的所有位图存储在持久存储中，并且当系统重新启动时，它将重新加载它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:44:07.437

如果系统崩溃或意外关闭，您无法确定任何事情，包括数据的保存。您可以尝试保存数据，但不能保证成功。您可以使用内核文件处理 API，例如[ZwWriteFile](http://msdn.microsoft.com/en-us/library/windows/hardware/ff567121%28v=vs.85%29.aspx)。您可以注册一个[错误检查回调例程](http://msdn.microsoft.com/en-us/library/windows/hardware/ff566401%28v=vs.85%29.aspx)，当错误检查（即系统崩溃）发生时将您的数据写入文件，但如前所述 - 由于事件的性质，不能保证成功 - 发生的错误可能会阻止文件写入， 例如。

# knockout.js - 淘汰赛js中的嵌套foreach不适用于seccond foreach值

> ID：15508439
> 
> 赞同：1
> 
> 时间：2013-03-19T19:13:33.400
> 
> 标签：knockout.js, foreach

我有一个类似这样的淘汰赛 js 模型：

```
var Model = function(model)
{
    var self = root = this;
    self.ObjectA = new ObjectA(model.ObjA);

    self.includeImage = function(image){
        self.ObjectA.Images.push(image);
    }        
}

var ObjectA = function(objA){
     var self = this;
     self.Images = ko.observableArray();
     self.ObjectB = ko.observableArray(ko.utils.arrayMap(objA.ObjectsB, function(ob){
        return new ObjectB(ob);  
     }));
}

var ObjectB = function(objB){
     var self = this;
     self.ObjectC = new ObjectC(objB.objC);
}

var ObjectC = function(objC){
     var self = this;
     self.ImagesC = ko.utils.arrayMap(objC.ImagesC, function(img){
         return new Image(img);
     });
}

var Image = function(image){
     var self = this;
     self.Key = image.Key;
     self.Value = image.Value;
     self.Url = image.Url;
} 
```

然后，我在桌子上有这个 HTML：

```
<tbody data-bind="foreach: ObjectA.ObjectB">
<tr>
    <td>
       <!-- ko if: ObjectC.Images.length > 0 -->
       <div>
          <img data-bind="attr: { src: ObjectC.Images[0].Url }" />
          <button data-bind="click: root.includeImage">include</button>
       </div>
       <div data-bind="foreach: ObjectC.Images">
          <!-- ko if: $index() !== 0 -->
          <div>
              <img data-bind="attr: { src: Url }" />
              <button data-bind="click: root.includeImage">include</button>
          </div>
          <!-- /ko -->
       </div>
       <!-- /ko -->
    </td>
</tr>
</tbody> 
```

我遇到的问题是函数includeImage，我收到的参数不是ObjectC的图像..参数的类型是ObjectB..为什么会这样？它的一些foreach坏了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:03:03.523

我刚刚发现了问题！是一个愚蠢的问题，在问题的代码中我忘记包含导致问题的东西！哈哈

我编辑了代码，以便您可以看到主要问题，并且是第二个 foreach 之外的第一个按钮！当然，第一个 foreach 的 root.includeImage 不起作用。我只是解决了这个问题：

```
<button class="action add" data-bind="click: function() { root.includeImage(ObjectC.Images[0]) }">include</button> 
```

# python - Python 正则表达式格式

> ID：15508442
> 
> 赞同：4
> 
> 时间：2013-03-19T19:13:42.427
> 
> 标签：python, regex

我正在尝试使用 Pythons **re** -module 匹配一些字符串，但无法正确完成。我要处理的字符串如下所示*（示例）*：

```
XY_efgh_1234_0040_rev_2_1_NC_asdf
XY_abcd_1122Ae_1150_rev2_1_NC
XY_efgh_0124e_50_NC
asdf_1980_2234a_2
XY_abcd_5098_2270_2_1_NC
PC_bos_7659Ae_1450sp_rev_2_1_NC_GRAPH 
```

那里的模式不是恒定的，它可能会有所不同。这对我很重要：

*   忘记字符串的开头，直到第一个数值。那不重要，我不需要这个，应该从任何结果中删除它。

*   然后**总是**有四个数字，它们后面可以跟字母字符（最多三个）。我需要这部分，提取。

*   然后，在一些下划线之后（其中也可能有一个减号），是我需要的另一组数值，它**始终是**2 到 4 *（......并且后面也可能最多跟三个字母字符）*。

*   在本节之后，由下划线分隔，**可能**还有其他重要的数值，属于以前的值。里面可能还有字母字符...

*   字符串的结尾可能包含诸如*“NC”*之类的内容，也可能包含更多字符，这并不重要，应该被删除。

所以，根据前面的例子，这就是我需要处理的：

```
('1234',   '0040_rev_2_1')
('1122Ae', '1150_rev2_1')
('0124e',  '50')
('1980',   '2234a_2')
('5098',   '2270_2_1')
('7659Ae', '1450sp_rev_2_1') 
```

...我从来没有在 RegEx 中做过这样*的 if-and-ifnot*事情，这让我发疯。这是我到目前为止所得到的，但这并不是我所需要的：

```
pattern     = re.compile(
              r"""
              ([0-9]{4}
              [A-Z]{0,3})
              [_-]{1,3}
              ([0-9]{2,4}
              [0-9A-Z_-]{0,16})
              """,
              re.IGNORECASE | 
              re.VERBOSE
              )

if re.search(pattern, string):
    print re.findall(pattern, string) 
```

当我在最后提到的示例中使用它时，这就是我得到的：

```
[(u'7659Ae', u'1450sp_rev_2_1_NC_GR')] 
```

...*几乎*是我需要的——但我不知道最后如何排除这个`_NC_GR`，而且这种通过计数限制字符的简单方法并不好。

有没有人对此案有一个很好且可行的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:17:37.020

您需要使用否定前瞻来匹配后面*没有*`NC`. 的字符。重新格式化您的正则表达式以显示分组：

```
pattern     = re.compile(r"""
              ( [0-9]{4} [A-Z]{0,3} )
              [_-]{1,3}
              ( [0-9]{2,4} (?:[0-9A-Z_-](?!NC))* )
              """, re.IGNORECASE | re.VERBOSE) 
```

用`{0,16}`粗体`*`量词替换，结果：

```
>>> for match in pattern.findall(inputtext):
...     print match
... 
('1234', '0040_rev_2_1')
('1122Ae', '1150_rev2_1')
('0124e', '50')
('1980', '2234a_2')
('5098', '2270_2_1')
('7659Ae', '1450sp_rev_2_1') 
```

所以（非捕获）组`(?:[0-9A-Z_-](?!NC))`匹配任何数字、字母、下划线或破折号后面没有字符的`NC`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:10:41.767

对我来说，Martijn 的解决方案不起作用。所以我给出我的解决方案。

注意我不使用的事实`re.IGNORECASE`
因此，我的正则表达式能够赶上
`PC_bos_7659Ae_1450sp_rev_2_1_nc_woof`
我不知道在这种情况下是否真的是你想要的

```
inputtext = """XY_efgh_1234_0040_rev_2_1_NC_asdf
XY_abcd_1122Ae_1150_rev2_1_NC
XY_efgh_0124e_50_NC
asdf_1980_2234a_2
XY_abcd_5098_2270_2_1_NC
PC_bos_7659Ae_1450sp_rev_2_1_NC_GRAPH
PC_bos_7659Ae_1450sp_rev_2_1_nc_woof"""
print inputtext 
```

.

```
import re

print """\n----------------------------------------
WANTED
('1234',   '0040_rev_2_1')
('1122Ae', '1150_rev2_1')
('0124e',  '50')
('1980',   '2234a_2')
('5098',   '2270_2_1')
('7659Ae', '1450sp_rev_2_1')"""
print '----------- eyquem ----------------------'
ri = re.compile('^\D+'
                '(\d{4}[a-zA-Z]{0,3})'
                '[_-]+'
                '(.+?)'
                '(?:[_-]+NC.*)?$',
                re.MULTILINE)

for match in ri.findall(inputtext):
    print match

print '----------- Martijn ----------------------'
ro     = re.compile(
              r"""
              ([0-9]{4}
              [A-Z]{0,3})
              [_-]{1,3}
              ([0-9]{2,4}
              [0-9A-Z_-]{0,16}?)
              (?:[-_]NC)?
              """,
              re.IGNORECASE | re.VERBOSE)

for match in ro.findall(inputtext):
    print match 
```

结果

```
----------------------------------------
WANTED
('1234',   '0040_rev_2_1')
('1122Ae', '1150_rev2_1')
('0124e',  '50')
('1980',   '2234a_2')
('5098',   '2270_2_1')
('7659Ae', '1450sp_rev_2_1')
----------- eyquem ----------------------
('1234', '0040_rev_2_1')
('1122Ae', '1150_rev2_1')
('0124e', '50')
('1980', '2234a_2')
('5098', '2270_2_1')
('7659Ae', '1450sp_rev_2_1')
('7659Ae', '1450sp_rev_2_1_nc_woof')
----------- Martijn ----------------------
('1234', '0040')
('1122Ae', '1150')
('0124e', '50')
('1980', '2234')
('5098', '2270')
('7659Ae', '1450')
('7659Ae', '1450') 
```

我的正则表达式可用于单独的行::

```
for s in inputtext.splitlines(True):
    print ri.match(s).groups() 
```

相同的结果

.

## 编辑

```
import re

inputtext = """XY_efgh_1234_0040_rev_2_1_NC_asdf
XY_abcd_1122Ae_1150_rev2_1_NC
XY_efgh_0124e_50_NC
XY_efgh_0228e_66-__NC
asdf_1980_2234a_2   
asdf_2999_133a
XY_abcd_5098_2270_2_1_NC
XY_abcd_6099_33370_2_1_NC
XY_abcd_6099_3370abcd_2_1_NC
PC_bos_7659Ae_1450sp_rev_2_1_NC_GRAPH
PC_bos_7659Ae_1450sp_rev_2_1___NC_GRAPH
PC_bos_7659Ae_1450sp_rev_2_1_nc_woof_NC
PC_bos_7659Ae_1450sp_rev_2_1_anc_woof_NC
PC_bos_7659Ae_1450sp_rev_2_1_abNC_woof_NC"""

print '----------- Martijn 2 ------------'
ruu     = re.compile(r"""
              ( [0-9]{4} [A-Z]{0,3} )
              [_-]{1,3}
              ( [0-9]{2,4} (?:[0-9A-Z_-](?!NC))* )
              """, re.IGNORECASE | re.VERBOSE)
for match in ruu.findall(inputtext):
    print match
print '----------- eyquem 2 ------------'
rii = re.compile('[_-]'
                '(\d{4}[A-Z]{0,3})'
                '[_-]{1,3}'
                '('
                  '(?=\d{2,4}[A-Z]{0,3}(?![\dA-Z]))'
                  '(?:[0-9A-Z_-]+?)'
                 ')'
                '(?:[-_]+NC.*)?'
                '(?![0-9A-Z_-])',
                re.IGNORECASE)
for m in rii.findall(inputtext):
    print m 
```

结果

```
----------- Martijn 2 ------------
('1234', '0040_rev_2_1')
('1122Ae', '1150_rev2_1')
('0124e', '50')
('0228e', '66-_')
('1980', '2234a_2')
('2999', '133a')
('5098', '2270_2_1')
('6099', '33370_2_1')
('6099', '3370abcd_2_1')
('7659Ae', '1450sp_rev_2_1')
('7659Ae', '1450sp_rev_2_1__')
('7659Ae', '1450sp_rev_2_1')
('7659Ae', '1450sp_rev_2_1_')
('7659Ae', '1450sp_rev_2_1_a')
----------- eyquem 2 ------------
('1234', '0040_rev_2_1')
('1122Ae', '1150_rev2_1')
('0124e', '50')
('0228e', '66')
('1980', '2234a_2')
('2999', '133a')
('5098', '2270_2_1')
('7659Ae', '1450sp_rev_2_1')
('7659Ae', '1450sp_rev_2_1')
('7659Ae', '1450sp_rev_2_1')
('7659Ae', '1450sp_rev_2_1_anc_woof')
('7659Ae', '1450sp_rev_2_1_abNC_woof') 
```

评论：

*   我的正则表达式没有捕捉到“33370_2_1”或“3370abcd_2_1”，因为它们不尊重“2 到 4 个字母可能后跟最多 3 个数字”的模式
    ，而 Martijn 的解决方案捕捉到了它们

*   我的正则表达式捕获的部分的末端是干净的；在 Martijn 的代码中，它们不是

*   Martijn 的正则表达式在每个序列 NC 或 nc 之前停止，即使它前面没有下划线，也就是说，即使这些序列是作为所需部分的一部分的字母。
    如果不需要我的正则表达式的这个特性，对我说，我会修改它

# web-services - 调用网络服务

> ID：15508443
> 
> 赞同：0
> 
> 时间：2013-03-19T19:13:46.377
> 
> 标签：web-services, asmx

我创建了网络服务：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Data.SqlClient;
using System.Data;

namespace MemberWebService
{
    /// <summary>
    /// Summary description for Service1
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class Service1 : System.Web.Services.WebService
    {

        [WebMethod]
        public DataSet GetMemberData(string memberId, string thirdName)
        {
            SqlConnection cn = new SqlConnection("Data Source=.;Initial Catalog=Healthy;Integrated Security=TRUE");
            SqlDataAdapter da = new SqlDataAdapter();
            DataSet ds = new DataSet();

            da.SelectCommand = new SqlCommand("SELECT * FROM MemberMaster WHERE MemberId=@MemberId and ThirdName=@ThirdName", cn);
            da.SelectCommand.Parameters.Add("@MemberId", SqlDbType.NVarChar).Value = memberId;
            da.SelectCommand.Parameters.Add("@ThirdName", SqlDbType.NVarChar).Value = thirdName;

            ds.Clear();
            da.Fill(ds);
            return ds;
        }
    }
} 
```

当我运行它时，这是链接：

```
http://localhost:19722/Service1.asmx 
```

它工作正常。

如果我在 asp.net 中调用它作为 web 参考它可以正常工作，直到服务器端口打开如果我关闭端口 asp.net 页面看不到 web 服务，那么我该如何解决问题，如果我想这样做Web 服务在另一台设备上工作我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:22:56.170

该端口专门用于 Visual Studio - 它是 Cassini 或 IIS Express，仅用于调试目的，而不用于实时生产工作。当您准备好发布您的服务时，它可能会在一个常规的永久端口（可能是 80）中进入 IIS。一旦它在那里，它将始终可供您的客户调用。

将服务发布到 IIS 后，您只需更新配置文件以使客户端指向真正的永久 URL。

# c# - 如何使用 LINQ to XML 创建对象列表？

> ID：15508450
> 
> 赞同：2
> 
> 时间：2013-03-19T19:14:23.470
> 
> 标签：c#, linq, linq-to-xml

我尝试使用 LINQ 读取一些入站 XML 以生成对象列表：

```
<SCResponse>
<link href="http://192.168.6.126:8001/affiliate/account/81/notifications?startRow=2&amp;limit=20" rel="next_page" title="Next"/>
<link href="http://192.168.6.126:8001/affiliate/account/81/notifications?startRow=1&amp;limit=20" rel="previous_page" title="Previous"/>
<RecordLimit>20</RecordLimit>
<Notifications>
    <Notification href="http://192.168.6.126:8001/affiliate/account/81/notifications/24">
        <NotificationDate>2013-03-15T16:41:37-05:00</NotificationDate>
        <NotificationDetails>Notification details 1</NotificationDetails>
        <Status>New</Status>
        <NotificationTitle>Test notification 1</NotificationTitle>
    </Notification>
</Notifications>
<RecordsReturned>1</RecordsReturned>
<StartingRecord>1</StartingRecord>
<TotalRecords>1</TotalRecords> 
```

我创建了一个简单的 POCO 对象来表示“通知”：

```
public class Notification
{
    public System.DateTime notificationDate;

    public string notificationDetails;

    public string status;

    public string notificationTitle;

    public string href;
} 
```

我想阅读传入的 XML 并创建一个对象列表。

```
List<Notification> notificationList; 

XElement x = XElement.Load(new StringReader(result));
if (x != null && x.Element("Notifications") != null)
{
    notificationList = x.Element("Notifications")
                .Elements("Notification")
                .Select(e => new Notification()
                .ToList();
} 
```

我真的不清楚'e'部分以及如何初始化一个新的 Notification 对象。你能帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T19:19:08.617

`e`只是您传递给[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)的参数名称，`new Notification()`. 你可以像这样使用它：

```
notificationList = x.Element("Notifications")
                    .Elements("Notification")
                    .Select(e => new Notification()
                                 {
                                     href = (string)e.Attribute("href")
                                     notificationDetails = (DateTime)e.Element("NotificationDate")
                                     notificationDate = (string)e.Element("NotificationDetails")
                                     status = (string)e.Element("Status")
                                     notificationTitle = (string)e.Element("NotificationTitle")
                                 }
                    .ToList(); 
```

或者，如果您更喜欢查询语法

```
notificationList =
    (from e in x.Element("Notifications").Elements("Notification")
     select new Notification()
            {
                href = (string)e.Attribute("href")
                notificationDetails = (DateTime)e.Element("NotificationDate")
                notificationDate = (string)e.Element("NotificationDetails")
                status = (string)e.Element("Status")
                notificationTitle = (string)e.Element("NotificationTitle")
            })
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:18:22.293

使用[对象初始化](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)语法：

```
notificationList = x.Element("Notifications")
            .Elements("Notification")
            .Select(e => new Notification()
                            {
                                href = (string)e.Attribute("href"),
                                notificationDate = (DateTime)e.Element("NotificationDate"),
                                notificationDetails = (string)e.Element("NotificationDetails"),
                                status = (string)e.Element("Status"),
                                notificationTitle = (string)e.Element("NotificationTitle")
                            })
            .ToList(); 
```

请记住，您可以轻松地将对象如`XElement`和`XAttribute`转换为`string`、`int`、`double`等`DateTime`。完整列表可在此处找到：[XElement 类型转换](http://msdn.microsoft.com/en-us/library/ff986933.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T19:19:20.933

```
notificationList = x.Element("Notifications")
    .Elements("Notification")
    .Select(e => new Notification()
        {
            notificationDate = DateTime.Parse(e.Element("NotificationDate").Value),
            notificationDetails = e.Element("NotificationDetails").Value,
            status = e.Element("Status").Value,
            notificationTitle = e.Element("NotificationTitle").Value,
            href = e.Attribute("href").Value
        }
    .ToList(); 
```

# css - CSS3 中的字体——多么痛苦的经历

> ID：15508452
> 
> 赞同：0
> 
> 时间：2013-03-19T19:14:38.400
> 
> 标签：css, fonts, font-face

我想在网页中添加一种非标准字体（特别是[Quicksand ）。](http://www.fontsquirrel.com/fonts/Quicksand)我在我的 CSS 表中所做的是经典的（我认为它是经典的）：

```
@font-face {
    font-family: QuicksandLight;
    src: url('fonts/Quicksand_Light.otf') format('opentype');
} 
```

现在，当我渲染页面时，字体是流沙……但它不是光。有没有办法确保我的字体得到很好的渲染？

**请注意**，至少在 Chrome 上，流沙的非 Light 渲染很好，在 Firefox 中它很糟糕，在 Opera 中它伤害了我的心。

# javascript - 需要一个能找到“string”而不是“[string]”的正则表达式

> ID：15508455
> 
> 赞同：2
> 
> 时间：2013-03-19T19:14:44.287
> 
> 标签：javascript, jquery, regex

我正在尝试构建一个解析字符串并跳过括号中的内容的正则表达式。

就像是

```
string = "A bc defg hi [hi] jkl mnop."; 
```

.match() 应该返回“hi”而不是 [hi]。我已经花了 5 个小时在 RE 中运行，但我认输了。

如果这很重要，这也适用于 javascript 或 jquery。

任何帮助表示赞赏。我也在努力让我的问题格式正确:)

编辑：

好的，我刚刚有一个灵光乍现的时刻，并发现我使用的原始 RegExp 确实有效。但是当我用 [matches] 替换匹配项时，它只是替换了字符串中的第一个匹配项......一遍又一遍。我认为这是我的正则表达式拒绝跳过括号，但在尝试了下面几乎所有的解决方案后，我意识到我在贬低 Hardcore。

当 .replace 发挥它的魔力时，它是在第一场比赛中，所以我很简单地在结果词的末尾添加了一个空格，如下所示：

```
var result = string.match(regex);
var modifiedResult = '[' + result[0].toString() + ']';
string.replace(result[0].toString() + ' ', modifiedResult + ' '); 
```

这让它停止定位字符串中的原始单词，并停止在每次匹配时为其添加一组新的括号。感谢大家的帮助。我将把答案归功于那个促使我朝着正确方向前进的帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:24:01.560

在尝试匹配您的 RE 之前，通过删除括号之间的所有内容来预处理目标字符串

```
string = "A bc defg hi [hi] jkl mnop."
tmpstring = string.replace(/\[.*\]/, "") 
```

然后将您的 RE 应用于 tmpstring

**更正：**根据下面的 nhahtd 评论使括号匹配，并且使 RE 全球

```
string = "A bc defg hi [hi] jkl mnop."
tmpstring = string.replace(/\[.*?\]/g, "") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:18:15.977

您不一定需要正则表达式。只需使用字符串操作：

```
var arr = string.split("[");
var final = arr[0] + arr[1].split("]")[1]; 
```

如果有多个括号表达式，请使用循环：

```
while (string.indexOf("[") != -1){
    var arr = string.split("[");
    string = arr[0] + arr.slice(1).join("[").split("]").slice(1).join("]");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T19:27:32.097

仅使用正则表达式，您可以使用：

```
hi(?!]) 
```

举个例子。

看看这里关于负前瞻：[http](http://www.regular-expressions.info/lookaround.html) ://www.regular-expressions.info/lookaround.html 不幸的是，javascript 不支持负后瞻。

我用[http://regexpal.com/](http://regexpal.com/)来测试，`abcd[hi]jkhilmnop`作为测试数据，`hi(?!])`作为正则表达式来查找。它匹配 'hi' 而没有匹配 '[hi]'。基本上，只要没有后面的 ']' 字符，它就匹配 'hi'。

当然，如果需要，可以扩展。这样做的好处是不需要对字符串进行任何预处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T19:22:20.730

```
r"\[(.*)\]" 
```

如果您想使用正则表达式，只需尝试一下即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T19:31:52.150

这将构建 [ ] 中包含的所有字符串的数组：

```
var regex = /\[([^\]]*)\]/;
var string = "A bc defg hi [hi] [jkl] mnop.";
var results=[], result;
while(result = regex.exec(string))
    results.push(result[1]); 
```

**编辑**

为了回答这个问题，这个正则表达式返回字符串 less all is in [ ]，并修剪空格：

```
"A bc defg [hi] mnop [jkl].".replace(/(\s{0,1})\[[^\]]*\](\s{0,1})/g,'$1') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T19:45:40.253

你想用它做什么？如果你想选择性地替换像“hi”这样的部分，除非它是“[hi]”，那么我经常使用一个系统，我先匹配我想避免的，然后再匹配我想看的；如果它与我想要避免的匹配，则返回匹配，否则返回处理后的匹配。

像这样：

```
return string.replace(/(\[\w+\])|(\w+)/g, function(all, m1, m2) {return m1 || m2.toUpperCase()}); 
```

其中，使用给定的字符串，返回：

```
"A BC DEFG HI [hi] JKL MNOP." 
```

因此：它将每个单词都替换为大写（m1 为空），除非单词在方括号之间（m1 不为空）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T22:26:54.580

您可以尝试不同的方法，而不是跳过匹配项 - 匹配所有内容，但不要在方括号（包括）内***捕获字符串，如下所示：***

```
var r = /(?:\[.*?[^\[\]]\])|(.)/g;
var result;
var str = [];
while((result = r.exec(s)) !== null){
  if(result[1] !== undefined){ //true if [string] matched but not captured
    str.push(result[1]);
  }
}
console.log(str.join('')); 
```

最后一行将打印与模式不匹配的部分字符串`[string]`。例如，当使用输入调用`"A [bc] [defg] hi [hi] j[kl]u m[no]p."`代码时，会打印`"A hi ju mp."`完整的空格。您可以使用此代码尝试不同的事情，例如替换等。

# lucene - geohash 索引在 Lucene 中是如何工作的

> ID：15508459
> 
> 赞同：2
> 
> 时间：2013-03-19T19:14:56.927
> 
> 标签：lucene, geohashing

在 lucene spatial 4 中，我想知道 geohash 索引是如何在幕后工作的。我理解 geohash 的概念，它基本上需要 2 个点（纬度，经度）并创建一个“字符串”哈希。

索引是否只是一个“字符串”索引（r-tree 或 quad-tree）或类似的东西（例如仅索引姓氏）......或者它有什么特别之处。

对于预先固定的类型搜索，是否对哈希的所有 n-gram 进行索引，例如如果 geohash 是

drgt2abc 是否将其索引为 d、dr、drg、drgt 等。

是否存在我们可能希望索引的默认 n-gram 数量？

使用这种类型的索引将搜索具有 10 万条记录的查询，而 1 亿条记录对于空间查询具有相似的查询性能。（例如框/多边形或距离）或者我是否可以预期随着大量记录的添加，索引会出现一般/典型的缓慢降级。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T00:11:14.293

最好的在线解释是我的视频：[Lucene / Solr 4 Spatial deep dive](http://www.youtube.com/watch?v=L2cUGv0Rebs&list=WL213D3FE6C76473CA)

> 索引是否只是一个“字符串”索引（r-tree 或 quad-tree）或类似的东西（例如仅索引姓氏）......或者它有什么特别之处。

从根本上说，Lucene 只有一个用于文本、数字和空间的索引。你可以说它是一个字符串索引。它是字节/字符串的排序列表。从更高层次的角度来看，以这种方式使用空间是计算机科学中“Tries”AKA“PrefixTrees”的家族。

> 对于预先固定的类型搜索，是否对哈希的所有 n-gram 进行索引，例如如果 geohash 是
> 
> drgt2abc 是否将其索引为 d、dr、drg、drgt 等。

是的。

> 是否存在我们可能希望索引的默认 n-gram 数量？

您可以根据您的精度要求方便地告诉它，它会查找需要多长时间。或者你可以通过长度来判断。

> 使用这种类型的索引将搜索具有 10 万条记录的查询，而 1 亿条记录对于空间查询具有相似的查询性能。（例如框/多边形或距离）或者我是否可以预期随着大量记录的添加，索引会出现一般/典型的缓慢降级。

事实上，这种类型的索引（更具体地说是使用它的聪明的递归搜索树算法）意味着您将拥有可扩展的搜索性能。100m 是一个过滤器要匹配的大量文档，因此它当然会比仅匹配 100k 文档的文档要慢，但它绝对是次线性的。到明年，它会更快，因为今年夏天在新的 PrefixTree 编码上进行了工作，加上正在进行的空间基准测试，这将使我能够进行我计划的进一步调整优化。

# python - 第一列的最大值

> ID：15508460
> 
> 赞同：6
> 
> 时间：2013-03-19T19:14:59.903
> 
> 标签：python, max

我有一个这样的数组：

```
elements=[['1', '1', '2'], ['2', '2', '3'], ['3', '3', '4'], ['4', '4', '5'], ['5', '5', '6'], ['6', '6', '7'], ['7', '7', '8'], ['8', '8', '9'], ['9', '9', '10'], ['10', '10', '11'], ['11', '11', '12'], ['12', '12', '13'], ['13', '13', '14'], ['14', '14', '15'], ['15', '15', '16'], ['16', '16', '17'], ['17', '17', '18'], ['18', '18', '19'], ['19', '19', '20'], ['20', '20', '21'], ['21', '21', '22'], ['22', '22', '23'], ['23', '23', '24'], ['24', '24', '25'], ['25', '25', '26'], ['26', '26', '27'], ['27', '27', '28'], ['28', '28', '29'], ['29', '29', '30'], ['30', '30', '31'], ['31', '32', '33'], ['32', '33', '34'], ['33', '34', '35'], ['34', '35', '36'], ['35', '36', '37'], ['36', '37', '38'], ['37', '38', '39'], ['38', '39', '40'], ['39', '40', '41'], ['40', '41', '42'], ['41', '42', '43'], ['42', '43', '44'], ['43', '44', '45'], ['44', '45', '46'], ['45', '46', '47'], ['46', '47', '48'], ['47', '48', '49'], ['48', '49', '50'], ['49', '50', '51'], ['50', '51', '52'], ['51', '52', '53'], ['52', '53', '54'], ['53', '54', '55'], ['54', '55', '56'], ['55', '56', '57'], ['56', '57', '58'], ['57', '58', '59'], ['58', '59', '60'], ['59', '60', '61'], ['60', '61', '62'], ['61', '63', '64'], ['62', '64', '65'], ['63', '65', '66'], ['64', '66', '67'], ['65', '67', '68'], ['66', '68', '69'], ['67', '69', '70'], ['68', '70', '71'], ['69', '71', '72'], ['70', '72', '73'], ['71', '73', '74'], ['72', '74', '75'], ['73', '75', '76'], ['74', '76', '77'], ['75', '77', '78'], ['76', '78', '79'], ['77', '79', '80'], ['78', '80', '81'], ['79', '81', '82'], ['80', '82', '83'], ['81', '83', '84'], ['82', '84', '85'], ['83', '85', '86'], ['84', '86', '87'], ['85', '87', '88'], ['86', '88', '89'], ['87', '89', '90'], ['88', '90', '91'], ['89', '91', '92'], ['90', '92', '93'], ['91', '94', '95'], ['92', '95', '96'], ['93', '96', '97'], ['94', '97', '98'], ['95', '98', '99'], ['96', '99', '100'], ['97', '100', '101'], ['98', '101', '102'], ['99', '102', '103'], ['100', '103', '104'], ['101', '104', '105'], ['102', '105', '106'], ['103', '106', '107'], ['104', '107', '108'], ['105', '108', '109'], ['106', '109', '110'], ['107', '110', '111'], ['108', '111', '112'], ['109', '112', '113'], ['110', '113', '114'], ['111', '114', '115'], ['112', '115', '116'], ['113', '116', '117'], ['114', '117', '118'], ['115', '118', '119'], ['116', '119', '120'], ['117', '120', '121'], ['118', '121', '122'], ['119', '122', '123'], ['120', '123', '124'], ['121', '125', '126'], ['122', '126', '127'], ['123', '127', '128'], ['124', '128', '129'], ['125', '129', '130'], ['126', '130', '131'], ['127', '131', '132'], ['128', '132', '133'], ['129', '133', '134'], ['130', '134', '135'], ['131', '135', '136'], ['132', '136', '137'], ['133', '137', '138'], ['134', '138', '139'], ['135', '139', '140'], ['136', '141', '142'], ['137', '142', '143'], ['138', '143', '144'], ['139', '144', '145'], ['140', '145', '146'], ['141', '146', '147'], ['142', '147', '148'], ['143', '148', '149'], ['144', '149', '150'], ['145', '150', '151'], ['146', '151', '152'], ['147', '152', '153'], ['148', '153', '154'], ['149', '154', '155'], ['150', '155', '156'], ['151', '157', '158'], ['152', '158', '159'], ['153', '159', '160'], ['154', '160', '161'], ['155', '161', '162'], ['156', '162', '163'], ['157', '163', '164'], ['158', '164', '165'], ['159', '165', '166'], ['160', '166', '167'], ['161', '167', '168'], ['162', '168', '169'], ['163', '169', '170'], ['164', '170', '171'], ['165', '171', '172'], ['166', '172', '173'], ['167', '173', '174'], ['168', '174', '175'], ['169', '175', '176'], ['170', '176', '177'], ['171', '177', '178'], ['172', '178', '179'], ['173', '179', '180'], ['174', '180', '181'], ['175', '181', '182'], ['176', '182', '183'], ['177', '183', '184'], ['178', '184', '185'], ['179', '185', '186'], ['180', '186', '187'], ['181', '188', '189'], ['182', '189', '190'], ['183', '190', '191'], ['184', '191', '192'], ['185', '192', '193'], ['186', '193', '194'], ['187', '194', '195'], ['188', '195', '196'], ['189', '196', '197'], ['190', '197', '198'], ['191', '198', '199'], ['192', '199', '200'], ['193', '200', '201'], ['194', '201', '202'], ['195', '202', '203'], ['196', '203', '204'], ['197', '204', '205'], ['198', '205', '206'], ['199', '206', '207'], ['200', '207', '208'], ['201', '208', '209'], ['202', '209', '210'], ['203', '210', '211'], ['204', '211', '212'], ['205', '212', '213'], ['206', '213', '214'], ['207', '214', '215'], ['208', '215', '216'], ['209', '216', '217'], ['210', '217', '218'], ['211', '219', '220'], ['212', '220', '221'], ['213', '221', '222'], ['214', '222', '223'], ['215', '223', '224'], ['216', '224', '225'], ['217', '225', '226'], ['218', '226', '227'], ['219', '227', '228'], ['220', '228', '229'], ['221', '229', '230'], ['222', '230', '231'], ['223', '231', '232'], ['224', '232', '233'], ['225', '233', '234'], ['226', '235', '236'], ['227', '236', '237'], ['228', '237', '238'], ['229', '238', '239'], ['230', '239', '240'], ['231', '240', '241'], ['232', '241', '242'], ['233', '242', '243'], ['234', '243', '244'], ['235', '244', '245'], ['236', '245', '246'], ['237', '246', '247'], ['238', '247', '248'], ['239', '248', '249'], ['240', '249', '250'], ['241', '251', '252'], ['242', '252', '253'], ['243', '253', '254'], ['244', '254', '255'], ['245', '255', '256'], ['246', '256', '257'], ['247', '257', '258'], ['248', '258', '259'], ['249', '259', '260'], ['250', '260', '261'], ['251', '261', '262'], ['252', '262', '263'], ['253', '263', '264'], ['254', '264', '265'], ['255', '265', '266'], ['256', '267', '268'], ['257', '268', '269'], ['258', '269', '270'], ['259', '270', '271'], ['260', '271', '272'], ['261', '272', '273'], ['262', '273', '274'], ['263', '274', '275'], ['264', '275', '276'], ['265', '276', '277'], ['266', '277', '278'], ['267', '278', '279'], ['268', '279', '280'], ['269', '280', '281'], ['270', '281', '282'], ['271', '283', '284'], ['272', '284', '285'], ['273', '285', '286'], ['274', '286', '287'], ['275', '287', '288'], ['276', '288', '289'], ['277', '289', '290'], ['278', '290', '291'], ['279', '291', '292'], ['280', '292', '293'], ['281', '293', '294'], ['282', '294', '295'], ['283', '295', '296'], ['284', '296', '297'], ['285', '297', '298'], ['286', '298', '299'], ['287', '299', '300'], ['288', '300', '301'], ['289', '301', '302'], ['290', '302', '303'], ['291', '303', '304'], ['292', '304', '305'], ['293', '305', '306'], ['294', '306', '307'], ['295', '307', '308'], ['296', '308', '309'], ['297', '309', '310'], ['298', '310', '311'], ['299', '311', '312'], ['300', '312', '313'], ['301', '314', '315'], ['302', '315', '316'], ['303', '316', '317'], ['304', '317', '318'], ['305', '318', '319'], ['306', '319', '320'], ['307', '320', '321'], ['308', '321', '322'], ['309', '322', '323'], ['310', '323', '324'], ['311', '324', '325'], ['312', '325', '326'], ['313', '326', '327'], ['314', '327', '328'], ['315', '328', '329'], ['316', '329', '330'], ['317', '330', '331'], ['318', '331', '332'], ['319', '332', '333'], ['320', '333', '334'], ['321', '334', '335'], ['322', '335', '336'], ['323', '336', '337'], ['324', '337', '338'], ['325', '338', '339'], ['326', '339', '340'], ['327', '340', '341'], ['328', '341', '342'], ['329', '342', '343'], ['330', '343', '344'], ['331', '345', '346'], ['332', '346', '347'], ['333', '347', '348'], ['334', '348', '349'], ['335', '349', '350'], ['336', '350', '351'], ['337', '351', '352'], ['338', '352', '353'], ['339', '353', '354'], ['340', '354', '355'], ['341', '355', '356'], ['342', '356', '357'], ['343', '357', '358'], ['344', '358', '359'], ['345', '359', '360'], ['346', '361', '362'], ['347', '362', '363'], ['348', '363', '364'], ['349', '364', '365'], ['350', '365', '366'], ['351', '366', '367'], ['352', '367', '368'], ['353', '368', '369'], ['354', '369', '370'], ['355', '370', '371'], ['356', '371', '372'], ['357', '372', '373'], ['358', '373', '374'], ['359', '374', '375'], ['360', '375', '376']] 
```

我想知道这个数组第一列的最大值。但是我发现这个有问题，因为我不习惯 python。

我试过了：

```
import numpy as np
a = np.array(elements)
numEL = a[np.argmax(a)][0] 
```

但我得到了错误的结果。我知道它是 360 但它返回 285 ......

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T19:19:43.360

您的元素是字符串，因此比较是字典顺序的。您想使用整数：

```
>>> elements=[['1', '1', '2'], ['99', '2', '3'],['360', '10', '11']]
>>> a = np.array(elements,dtype=int)
>>> a
array([[  1,   1,   2],
       [ 99,   2,   3],
       [360,  10,  11]])
>>> a.max(axis=0)
array([360,  10,  11])
>>> a.max(axis=0)[0]
360 
```

或者干脆

```
>>> a[:,0]
array([  1,  99, 360])
>>> a[:,0].max()
360 
```

[注意：这是让它工作的方法。至于为什么代码首先返回一个奇怪的答案，@mgilson 在对此答案的评论中解释了这一点。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T19:19:49.113

```
In [3]: max(elements, key=lambda e: int(e[0]))
Out[3]: ['360', '10', '11'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T19:19:34.860

`max(elements, key=lambda x: x[0])`或者`max(elements, key=lambda x: x[0])[0]`如果您只关心第一列的实际值而不是包含最大值的元素

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T19:20:59.763

```
maxEl = max(element[0] for element in elements) 
```

请记住，您仍然在这里比较字符串！如果您尝试按整数进行比较，则需要确保您确实这样做了。

```
maxIntEl = max(int(element[0]) for element in elements) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T19:48:47.153

```
import numpy as np

elements = np.array([['1', '1', '2'], ['10002', '2', '3'], ['360', '10', '11']])
print np.max([int(e) for e in elements[:, 0]]) 
```

或者

```
elements = [['1', '1', '2'], ['10002', '2', '3'], ['360', '10', '11']]
elements = np.array([[int(e) for e in element] for element in elements])
print np.max(elements[:, 0]) 
```

第一个片段更有效，因为字符串到 int 的转换仅针对一列进行，而不是对整个 numpy 数组进行类型转换（如在第二个片段中）。

希望能帮助到你。

# java - Java - 使用 for 循环读取用户输入

> ID：15508463
> 
> 赞同：-1
> 
> 时间：2013-03-19T19:15:17.733
> 
> 标签：java, for-loop, user-input

在 Java 中，我无法使用用户输入的单个整数序列运行多个循环。单独地，它们单独运行良好，但一起打印出不正确的数字。

我不知道是什么导致了这个问题。

这是我的代码。

```
import java.util.Scanner;

public class SequenceTester
{
public static void main(String[] args)
{
    Scanner in = new Scanner(System.in);

    System.out.println("Enter a sequence of integers. " + 
        "Enter a non-integer to terminate");
    int sequence = in.nextInt();

    //Print One
    int min = sequence;
    while(in.hasNextInt())
    {
        int input = in.nextInt();
        if(input < smallest)
        {
            smallest = input;
        }
    }
    System.out.println(smallest);  

    //Print Two
    int max = sequence;
    while(in.hasNextInt())
    {
        int input = in.nextInt();
        if(input > max)
        {
            max = input;
        }
    }
    System.out.println(max); 

    //Print Three
    int even = 0;
    int odd = 0;
    while(in.hasNextInt())
    {
        int input = in.nextInt();
        if((input %2) == 0)
        {
            even++;
        }
        else
        {
            odd++;
        }
    }
    System.out.println( even);
    System.out.println(odd);

    //Print Four
    double total = 0;
    int count = 0;
    while (in.hasNextInt())
    {
        Int input = in.nextInt();
        total = total + input;
        count++;
    }
    double average = 0;
    if (count > 0)
    {
        average = total / count;
    }
    System.out.println(average);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:22:55.367

您的代码非常分散，但看起来您可以通过一个循环来实现您想要的，因为循环条件在所有这些中都是相同的。当然，这只是基于您给我们的模糊描述。

```
while(in.hasNextInt()) {
        int input = in.nextInt();
        if(condition1) {
            //do stuff
        } else if (condition2) {
            //do other stuff
        } else if (conditionN) {
            //do other other stuff
        } else {
            //last of the stuff to do
        }
} 
```

# python - python bcrypt中'$ 2a $'的意义是什么？

> ID：15508466
> 
> 赞同：4
> 
> 时间：2013-03-19T19:15:36.157
> 
> 标签：python, bcrypt

有一些可以通过 Google 获得并通过 SO 挖掘的资源，但它们似乎相互矛盾且不完整。

所以我的问题是：

**在 python-bcrypt 中，附加到哈希值的 $2a$ 的意义是什么？**

我专门使用[http://www.mindrot.org/projects/py-bcrypt/](http://www.mindrot.org/projects/py-bcrypt/)上的实现，但这个问题普遍适用。

此外，如果它可以在 python-bcrypt 模块中配置，那将是很好的澄清？如果确实存在安全问题，需要您使用特定的、不同的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-08-09T20:40:15.073

这`$2a$`是正在使用的算法的指标。

在 OpenBSD 密码文件中，有许多存储密码的标准。每个密码都以*算法标识符*为前缀。

*   `$1$`: MD5 散列
*   `$2$`: bcrypt 散列
*   `$5$`: SHA2-256 散列
*   `$6$`: SHA2-512 散列

# BCrypt 变种

当 bcrypt 最初发布时，它的标识符是`$2$`.

**$2$**

BCrypt 是由 OpenBSD 人设计的。它旨在散列密码以存储在 OpenBSD 密码文件中。散列密码与前缀一起存储，以识别所使用的算法。BCrypt 得到了前缀`$2$`。

**$2a$**

最初的 BCrypt 规范没有定义如何处理非 ASCII 字符，或者如何处理空终止符。对规范进行了修订，以指定在散列字符串时：

*   字符串必须是 UTF-8 编码的
*   必须包含空终止符

**$2x$, $2y$** *（2011 年 6 月）*

在[BCrypt](https://pear.php.net/package/Crypt_Blowfish)的 PHP 实现 crypt_blowfish 中发现了一个错误。这是第 8 位设置的错误处理字符。

他们建议系统管理员更新他们现有的密码数据库，用 替换`$2a$`，`$2x$`以表明这些哈希是错误的（并且需要使用旧的损坏算法）。他们还提出了让 crypt_blowfish`$2y$`为固定算法生成的哈希值发出的想法。没有其他人，包括规范的 OpenBSD，采用`2x`/的想法`2y`。[此版本标记仅限于 crypt_blowfish](http://seclists.org/oss-sec/2011/q2/632)。

版本**$2x$**和**$2y$**并不比**$2a$** “更好”或“更强” 。它们是 BCrypt 的一种特殊错误实现的残余。

**$2b$** *（2014 年 2 月）*

在 BCrypt 的 OpenBSD 实现中发现了一个错误。他们将字符串的长度存储在一个`unsigned char`. 如果密码长度超过 255 个字符，它将溢出并在 255 处换行。

BCrypt 是为 OpenBSD 创建的。当他们的库中出现错误时*，*他们决定修改版本是可以的。*这意味着如果您想保持最新的“他们的”*规范，其他所有人都需要效仿。

*   [http://undeadly.org/cgi?action=article&sid=20140224132743](http://undeadly.org/cgi?action=article&sid=20140224132743)
*   [http://marc.info/?l=openbsd-misc&m=139320023202696](http://marc.info/?l=openbsd-misc&m=139320023202696)

版本**$2b$**并不比**$2a$** “更好”或“更强” 。它是 BCrypt 的一个特殊错误实现的残余。但是由于 BCrypt 规范地属于 OpenBSD，他们可以将版本标记更改为他们想要的任何内容。

*2a*、*2x*、*2y*和*2b*之间没有区别。如果你正确地编写了你的​​实现，它们都会输出相同的结果。

*如果您从一开始就做正确的事（将字符串存储在 utf8 中并散列空终止符），那么： 2*、*2a*、*2x*、*2y*和*2b*之间没有区别。如果你正确地编写了你的​​实现，它们都会输出相同的结果。

唯一需要关心 2x 和 2y 的人是那些你可能一直在使用**crypt_blowfish**的人。唯一需要关心 2b 的人是那些可能一直在运行 OpenBSD 的人。

所有其他正确的实现都是相同且正确的。

# android - Google Drive 并行上传

> ID：15508467
> 
> 赞同：1
> 
> 时间：2013-03-19T19:15:39.757
> 
> 标签：android, google-drive-api

我目前正在我的应用程序（DataSync）中实现 Google Drive，并遇到了一点性能问题。我似乎无法让文件并行上传，相同的逻辑适用于其他云，所以我很确定这要么是 Drive SDK 的“问题”，要么是我使用它的方式。

这是我目前从 InputStream 上传文件的方式。

```
InputStreamContent content = new InputStreamContent("datasync/appdata", pIn);
Insert insertRequest = Global.drive.files().insert(body, content).setConvert(false);
int size = (int) Math.ceil((double) localFile.length() / MediaHttpUploader.MINIMUM_CHUNK_SIZE) * MediaHttpUploader.MINIMUM_CHUNK_SIZE;
if(size > 2097152)  // 2MB
{
    insertRequest.getMediaHttpUploader().setChunkSize(2097152);
}
else
{   
    insertRequest.getMediaHttpUploader().setChunkSize(size);
}
com.google.api.services.drive.model.File driveFile = insertRequest.execute(); 
```

我有 6 个线程运行此代码，尽管它们都到达 .execute() 命令，但它们只会一个接一个地上传（就好像它是一个“同步”函数一样）。有什么方法可以同时上传到云端硬盘工作吗？

# php - 根据主题类型将mysql行提取到表中

> ID：15508470
> 
> 赞同：0
> 
> 时间：2013-03-19T19:15:42.600
> 
> 标签：php, mysql

这是我的表格示例（为清晰起见重新格式化）

```
 Subject   Percentage  Grade
  English     40%       D
  Chemistry   80%       A
  Physics     50%       C 
```

所以，基本上我想获取这些数据并以这种方式表示它：

```
 English   Chemistry    Physics
  40%           80%        50%
  D              A          C 
```

我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:27:29.743

试试这个 ：

```
 select english , chemistry , physics from (

    select (select percentage from Table1 where subject = 'English' ) as english,
           (select percentage from Table1 where subject = 'Chemistry') as chemistry,
           (select percentage from Table1 where subject = 'Physics') as physics

    from Table1 group by english
    union all

    select (select Grade from Table1 where subject = 'English' ) as english,
           (select Grade from Table1 where subject = 'Chemistry') as chemistry,
           (select Grade from Table1 where subject = 'Physics') as physics

    from Table1 group by english
     ) t 
```

**输出：**

```
 ENGLISH    CHEMISTRY   PHYSICS
  40%          80%        50%
   D            A          C 
```

[**在这里演示**](http://sqlfiddle.com/#!2/8b85f/32)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:37:33.693

将数据提取到数组中，然后遍历数组以填充表行

```
$subject = array();
$row = mysql_fetch_row($result);
{
    $subjecta = $row[0]; 
    $marks =  $row[1];
    $grade =  $row[2];
    array_push($subject,$subjecta)
    $subject[$marks] = $grade ;
    $subject[$grade] = $marks ;

}
echo "<tr>";
foreach ($subject as $sts) 
{ 
echo "<th bgcolor='#BEBEBE'>$sts</th>"; 
}
echo "</tr>"; 
```

# routes - 带有未定义模型的模型和 setupController 钩子

> ID：15508471
> 
> 赞同：4
> 
> 时间：2013-03-19T19:15:44.083
> 
> 标签：routes, ember.js

我的路线中有一个`setupController`和`model`钩子。model.find(param) 持有对 rails 后端的 ajax 调用。

发生的事情是我的模型钩子触发并调用后端。但是在后端回答并且成功回调实际上与模型一起返回之前，`setupController`钩子会触发一个仍未定义的模型。

最终结果是，当模型本身通过绑定系统进行更新时，需要在 setupController 中进行的附加设置不起作用。我觉得我以某种方式设置了模型的内容错误，但无法弄清楚。

顺便说一句，如果我使用后退和前进按钮进行导航，就会发生这种情况。如果我通过`#linkTo`指定对象的路线进入，一切都会按预期工作。

如果有人有一个很棒的想法，我的代码如下。

```
App.ProjectsEditRoute = Ember.Route.extend({
  model: function(params) {
    return App.Project.find(params.project_id);
  },

  setupController: function(controller, model) {
    this.controllerFor('activedataset.index').set('content', App.ActiveDataSet.findAll(model.id));
  }
});

App.Project = Ember.Object.extend({
  id: '',
  name: ''
});

App.Project.reopenClass({
  findAll: function() {
    var result = Ember.ArrayProxy.create({content: []});
    var self = this;
    $.ajax({
      url: '/projects.json',
      type: 'GET',
      data: {'user_id': App.currentUser.id},
      success: function(data, textStatus, xhr) {
        result.set('content', data.projects);
      },
      error: function(xhr, textStatus, errorThrown) {
        alert('error');
      }
    });

    return result;
  },

  find: function(project_id) {
    var result = Ember.Object.create({content: null});
    var self = this;
    $.ajax({
      url: '/projects/' + project_id + '.json',
      type: 'GET',
      success: function(data, textStatus, xhr) {
        result.setProperties(data.project);
      },
      error: function(xhr, textStatus, errorThrown) {
        alert('not found');
      }
    });

    return result;
  }
}); 
```

## 在 Mike 提供的解决方案后编辑：

```
App.ProjectsEditRoute = Ember.Route.extend({
  model: function(params) {
    var record = App.Project.find(params.project_id);
    var promise = Ember.Deferred.create();
    record.addObserver('isLoaded', function() {
      promise.resolve(record);
    });

    return promise;
  },

  setupController: function(controller, model) {
    this.controllerFor('activedataset.index').set('content', App.ActiveDataSet.findAll(model.id));
  }
});

App.Project.reopenClass({
  find: function(project_id) {
    var result = Ember.Object.create({content: null, isLoaded: false});
    var self = this;
    $.ajax({
      url: '/projects/' + project_id + '.json',
      type: 'GET',
      success: function(data, textStatus, xhr) {
        result.setProperties(data.project);
        result.set('isLoaded', true);
      },
      error: function(xhr, textStatus, errorThrown) {
        alert('not found');
      }
    });

    return result;
  }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:45:15.693

> 我觉得我以某种方式设置了模型的内容错误，但无法弄清楚。

你的所作所为本身并没有错。如果您需要 ember 路由器等待模型 ajax 完成，然后再继续 setupController 挂钩，您的模型的 find() 应该返回一个承诺。如果路由的模型钩子返回一个承诺，ember 路由器将等待承诺解决后再继续。

By default ember-data's model objects return a promise when you call find({}). It should be easy to do the same for your model, see this [Ember initializing route model with query](https://stackoverflow.com/questions/14924558/ember-initializing-route-model-with-query) for an example of the deferred patter.

> This only happens by the way if I use the back and forward button to navigate. If I go in the route through an #linkTo with the object specified everything works as expected.

Makes sense. When you use a #linkTo the data is already loaded.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T12:57:55.537

You probably should use `this.store.find('project')` instead of rolling your own `App.Project.find()`.

`DS` uses promises, and therefore calling code will wait for fetched object(s).

What is somewhat undercommunicated in regards to rails and ember working together, is that you probably should use ActiveModel::Serializers in your rails controllers and the `ams` adapter in `DS.Store` for best and expected results.

```
App.Store = DS.Store.extend({
    // Override the default adapter with the `DS.ActiveModelAdapter` which
    // is built to work nicely with the ActiveModel::Serializers gem.
    adapter: '_ams'
}); 
```

My experience is that you are in for a world of pain if you start sidestepping Ember and/or DS. The hard part of using Ember is that you, arguably, have to understand every facet of it to be effective.

# mysql - mysql数据库上所有索引的大小

> ID：15508473
> 
> 赞同：7
> 
> 时间：2013-03-19T19:15:49.403
> 
> 标签：mysql, ssh, indexing

我的服务器上有 6 个数据库。

在 phpmyadmin 中，我可以查看组成数据库的表列表，并查看记录数、表名、表类型等内容。它还显示大小和总大小。一个数据库的总大小为 5 个演出和 80 个不同的表。

我想知道这 5 场演出中有多少与我的索引相关。我可以单击一个表并查看那里的详细信息。从理论上讲，如果我这样做 80 次，每张桌子一次，然后加起来，我就会得到答案。

有没有办法（在 phpmyadmin 或 SSH 中）得到单个 mysql 表的组合索引有多少空间的答案？如果我可以按表格查看列表并进行总结，那就更好了。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T20:28:25.290

这是一个很好的问题，是的，它可以在数据库级别上查看。

信息保存在`INFORMATION_SCHEMA`表格中

```
SELECT table_name,
concat( round( data_length / ( 1024 *1024 ) , 2 ) , 'Mb' ) AS 'data_length_mb',
concat( round( index_length / ( 1024 *1024 ) , 2 ) , 'Mb' ) AS 'index_length_mb',
concat( round( round( data_length + index_length ) / ( 1024 *1024 ) , 2 ) , 'Mb' )  AS 'total_size_mb'
FROM information_schema.tables
WHERE table_schema ='your_db_name'
ORDER BY data_length desc; 
```

# string - Lua：我如何将一个字符串（不同长度）分成多个部分？

> ID：15508474
> 
> 赞同：1
> 
> 时间：2013-03-19T19:15:50.150
> 
> 标签：string, lua, split

我有一个字符串，从一个数字开始，然后是一个空格，然后是一个未知数量的字母的单词，又是一个空格，然后**有时是**另一段文本（可能包含也可能不包含多个单词）。

**编辑：最后一段文本有时会被遗漏（参见示例#2）使用评论中提到的方法，#2 上的 str:find(...) 将返回 nil。**

例子：

```
"(number) (text) [more text]"
1: "10 HELLO This is a string"
2: "88 BYE" 
```

我想要的是将这些字符串拆分成一个表，在一个包含更多这些拆分字符串的表中，如下所示：

```
{
  [(number)] = { [1] = (text), [2] = (more text) }
  [10] = { [1] = "HELLO", [2] = "This is a string" }
} 
```

我尝试了几种方法，但都没有给我想要的结果。例如，我尝试的一种方法是将字符串拆分为空格。但这导致：

```
{
  [10] = { [1] = "HELLO", [2] = "This", ... [4] = "string" }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:06:41.597

使用各种 Lua[字符串模式](http://www.lua.org/manual/5.2/manual.html#6.4.1)，很容易达到预期的效果。

例如。

```
function CustomMatching( sVar )
    local tReturn = {}
    local _, _, iNumber, sWord, sRemain = sVar:find( "^(%d+)%s(%a+)%s(.+)" )
    tReturn[tonumber(iNumber)] = { sWord, sRemain }
    return tReturn
end 
```

并称之为：

```
local sVar = "10 HELLO This is a string"
local tMyTable = CustomMatching( sVar ) 
```

* * *

在`find()`方法中，模式`"^(%d+)%s(%a+)%s(.+)"`意味着：

*   查找并存储所有数字（`%d`），直到遇到空格。
*   查找并存储所有字母（`%a`），直到遇到空格。
*   查找并存储所有字符，直到到达字符串的末尾。

* * *

## 编辑

[根据评论](https://stackoverflow.com/questions/15508474/lua-how-do-i-split-a-string-into-multiple-parts-with-a-different-length/15510435?noredirect=1#comment21966842_15510435)中的讨论更改`tReturn[iNumber]`为。`tReturn[tonumber(iNumber)]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:31:01.420

您可以使用[`string.match`](http://www.lua.org/manual/5.2/manual.html#pdf-string.match)具有适当[模式](http://www.lua.org/manual/5.2/manual.html#6.4.1)的方法：

```
local n, w, str = ('10 HELLO This is a string'):match'^(%d+)%s+(%S+)%s+(.*)$'
your_table[tonumber(n)] = {w, str} 
```

# android - Android：我的应用程序太大并给出“无法执行 dex：方法 ID 不在 [0, 0xffff]：65536”？

> ID：15508477
> 
> 赞同：24
> 
> 时间：2013-03-19T19:16:07.260
> 
> 标签：android, dalvik, dx

我正在尝试将我的应用程序与 Box、Dropbox 和 Google Drive 集成。所有这 3 项服务都需要许多 3rd 方 jar。此外，我的应用程序已经需要一些 3rd 方 jar。现在，当我尝试从 eclipse 运行我的应用程序时，出现以下错误：

> 无法执行 dex：方法 ID 不在 [0, 0xffff] 中：65536 转换为 Dalvik 格式失败：无法执行 dex：方法 ID 不在 [0, 0xffff] 中：65536

似乎发生此错误是因为我的应用程序有太多方法。我相当肯定这些方法中的大部分来自第 3 方 jar，因此尝试通过简化我的代码来解决这个问题是不现实的。我在网上找到了这两个建议。

1.  添加`dex.force.jumbo=true`到 project.properties（并使用 adt 版本 21）。我这样做了，但仍然得到错误。

2.  使用多个 dex 文件，如下所述：[http](http://android-developers.blogspot.co.il/2011/07/custom-class-loading-in-dalvik.html) ://android-developers.blogspot.co.il/2011/07/custom-class-loading-in-dalvik.html 。这似乎可能是唯一的选择，但我不明白它如何适用于我的情况。问题是像 Drive 这样的服务有太多的依赖关系。在引用其依赖项时，此解决方案是否不需要我修改 Drive 源以使用变形？（这显然不是一种选择）。

3.  使用 proguard 缩小删除未使用的代码/方法。使用 proguard 导出我的应用程序确实有效，并且文档服务集成在 >4.0 设备上按预期工作。但是，在 2.3 设备上进行测试时会引发 classnotfound 错误。

所以，我希望对这个问题有一些建议。选项 2 是我的情况的解决方案吗？我应该考虑另一种解决方案吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T20:09:16.193

您还可以将其中的一个或多个开发为您的主应用程序的插件，以可供下载的单独 APK 的形式。该 APK 会暴露一些主应用程序将使用的组件——因为我不知道您与这些服务集成的性质，所以我无法对此提出更具体的建议。您将使用自己的`signature`自定义级别`<permission>`来保护两个应用程序之间的通信。而且，作为奖励，如果使用第三方库增加了对额外权限的要求，您只需要插件 APK 中的这些权限，从而使您的主 APK 更小。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-10T05:02:48.100

# ***新****所有其他答案现在都已过时。这是新的修复

## Android 5.0 及更高版本

[自动包含多 dex 支持。](https://developer.android.com/tools/building/multidex.html#mdex-on-l)从文档：

> Android 5.0 及更高版本使用名为 ART 的运行时，它本机支持从应用程序 APK 文件加载多个 dex 文件。ART 在应用程序安装时执行预编译，扫描 classes(..N).dex 文件并将它们编译为单个 .oat 文件以供 Android 设备执行。有关 Android 5.0 运行时的更多信息，请参阅 ART 简介。

## 安卓5.0以下

[只需将 Android 多 dex 支持工具添加到您的 gradle 构建中：](https://developer.android.com/tools/building/multidex.html#mdex-gradle)

```
android {
    compileSdkVersion 21
    buildToolsVersion "21.1.0"

    defaultConfig {
        ...
        minSdkVersion 14
        targetSdkVersion 21
        ...

        // Enabling multidex support.
        multiDexEnabled true
    }
    ...
}

dependencies {
  compile 'com.android.support:multidex:1.0.0'
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-19T19:18:07.970

Dalvik VM 每个 dex 文件最多可以有 65536 个方法，因为字节码指令集无法引用需要超过 16 位的方法号（正如 @danfuzz 在评论中指出的那样）。

虽然可以使用多个 dex 文件来解决这个问题，但 Facebook[发现了另一个](https://www.facebook.com/notes/facebook-engineering/under-the-hood-dalvik-patch-for-facebook-for-android/10151345597798920)可以部署在他们的应用程序中的修复程序来解决这个问题。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-10T02:50:13.533

请参阅 vm/LinearAlloc.c ，您可以找到以下代码：（Android 2.3.3 下为 5MiB，Android 4.0 后为 8MiB 作为我的调查）

#define DEFAULT_MAX_LENGTH (5*1024*1024)

...

线性AllocHdr* pHdr；

...

pHdr->mapLength = DEFAULT_MAX_LENGTH；

我想“Facebook 修复”正在使用本机 C 指针编辑此内存。恕我直言，LinearAlloc 问题和这个方法 ID 问题是不同的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-18T18:33:06.727

我最近遇到了这个问题。在网上搜索了一些更详细的实现之后，我意识到除了：

*   很好，但现在 Gradle 已经出现了，但有点过时了：[http ://android-developers.blogspot.co.il/2011/07/custom-class-loading-in-dalvik.html](http://android-developers.blogspot.co.il/2011/07/custom-class-loading-in-dalvik.html)
*   没有太多细节，但对如何完成有一个模糊的想法：[https ://www.facebook.com/notes/facebook-engineering/under-the-hood-dalvik-patch-for-facebook-for-android/10151345597798920](https://www.facebook.com/notes/facebook-engineering/under-the-hood-dalvik-patch-for-facebook-for-android/10151345597798920)

我意识到问题不一定是我的代码中有太多方法，而是`dex`我的代码和其他库的完整问题。因此，如果我可以针对库编译我的代码但不将它们包含在`classes.dex`, 然后`dex`将库单独包含在内，然后在运行时将它们全部放在一起，它应该可以工作。唯一需要解决的问题是类加载器，Facebook 顺便提到了这个问题。

所以通过一点反思和一些 Groovy 代码，我想我想出了一个相对稳定的方法来将库和应用程序代码打包到单独的`dex`文件中。

[https://gist.github.com/nickcaballero/7045993](https://gist.github.com/nickcaballero/7045993)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-10T14:54:48.443

达到 65k 方法限制的大多数问题与在您的应用程序中使用乳牙 Google Play 服务有关。最近，你在使用它时可以获得更多的粒度。

按照[本指南](http://android-developers.blogspot.com.es/2014/12/google-play-services-and-dex-method.html)，您可以只使用您想要的部分。可能这会解决问题，避免一些黑魔法，或者使用 multiDex。例如，如果您只希望在您的应用程序中使用 Google 地图（并且您没有使用广告、钱包、Google Wear、分析等），那么使用整个依赖项就是浪费时间/空间。你可以这样使用它：

```
compile com.google.android.gms:play-services-base:6.5.87
compile com.google.android.gms:play-services-maps:6.5.87 
```

[您可以在此链接](http://android-developers.blogspot.com.es/2014/12/google-play-services-and-dex-method.html)中阅读“部件”的完整列表

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-28T09:13:45.490

[这](https://gist.github.com/toms972/c83504df2da1176a248a)是我编写的一个脚本，用于计算特定文件夹的每个 jar（以及总数）中的方法数。

一旦计算了方法，您就可以专注于重构和删除繁重的库。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-04T18:44:18.407

您需要为此启用 Dex 支持。因此，您需要执行以下步骤：

1.  适用于 Android 的 Gradle 插件 v0.14.0 增加了对 multi-dex 的支持。要启用，您只需在 build.gradle 中声明它：

> ```
> android {
>    defaultConfig {
>       ...
>       multiDexEnabled = true
>    }
> } 
> ```

2.  如果应用支持 > 5.0（也就是说，如果您的 minSdkVersion 为 20 或更低），您还必须动态修补应用程序 ClassLoader，以便它能够从辅助 dex 加载类。为此，您可以添加此库。

> ```
>  dependencies {
>       ...
>       compile 'com.android.support:multidex:1.0.0'
>     } 
> ```

3.  在代码中启用您有这些选项。选择最适合您的

A. 在 manifest manifest 中添加 MultiDexApplication

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.android.multidex.App"> <application
android:name="android.support.multidex.MultiDexApplication">
</application>
</manifest> 
```

B. 通过 MultiDexApplication 扩展应用程序

```
public class App extends MultiDexApplication { .. } 
```

C. 在附加基础上下文的应用程序中安装它。

```
public class App {
    protected void attachBaseContext(Context base) {
        super.attachBaseContext(base);
        MultiDex.install(this);
        ..
    }

} 
```

有关更多信息，请通过此链接[MultiDex](http://developer.android.com/reference/android/support/multidex/MultiDexApplication.html)。

# c - 带有 %c 和 %s 的 scanf 导致错误

> ID：15508479
> 
> 赞同：0
> 
> 时间：2013-03-19T19:16:10.063
> 
> 标签：c

我正在尝试扫描一个 int、一个 char、一个字符串和另一个 int。我认为我可以使用以下代码扫描所有这些：

```
int int1, int 2;
char char1;
char* string1;
fscanf(stdin, "%d %c %s %d", &int1, &char1, string1, &int2) 
```

但是当我运行我的代码时，它会在我输入所有信息之前突然停止。我计划用换行符分隔变量。我的终端在运行时如下所示：

```
~$ ./program
100
K
word
~$ 
```

程序在我输入 int2 之前关闭，这让我相信 string1 可能也没有被考虑在内。关于如何解决这个问题的任何建议，或者更有效的替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:20:36.833

如果您已正确声明（或分配）您的变量，那么您给出的行将按预期工作。

在这段代码中：

```
 int int1, int2;
    char char1;
    char *string1;

    fscanf(stdin, "%d %c %s %d", &int1, &char1, string1, &int2); 
```

正如`string1`此处未初始化的那样，这是未定义的行为。对于 Linux/glibc，如果`string1`碰巧包含`0`(NULL)，它会导致`scanf`停止处理格式字符串，这将产生与您给出的相同结果。在其他系统上它可能会工作，它可能会崩溃。

这将按预期工作：

```
 int int1, int2;
    char char1;
    char string1[20];

    fscanf(stdin, "%d %c %19s %d", &int1, &char1, string1, &int2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:26:50.377

```
fscanf(stdin, "%d\n %c\n %s\n %d\n", &int1, &char1, string1, &int2) 
```

\n - 取决于您的平台，在其中一些而不是 \n 应该是 \n\carriege return
所以，如果简要解释一下 - 您可以在“参数字符串”中提供将从流中排除的符号，它们的顺序很重要.
正如您所说，您不想在每个新行上放置标记，然后在参数字符串中放置新行的符号

# java - RESTEasy 客户端代理开销？

> ID：15508480
> 
> 赞同：6
> 
> 时间：2013-03-19T19:16:13.893
> 
> 标签：java, proxy, resteasy

我正在使用客户端代理创建一个 RESTEasy 服务，到目前为止它运行良好。但是，我确实注意到在我的一些函数中，我看到了相同的代码行：

```
MyClass client = ProxyFactory.create(MyClass.class, "http://localhost:8080"); 
```

将其从函数中取出并使其成为类的成员变量以减少可能的开销会更好吗？该服务将处理 10000 个请求/分钟的负载。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T19:26:10.533

例如，您可以将 MyClass 客户端指定为 spring bean，并在需要的地方注入它。请注意线程安全，因为 RestEasy 代理客户端在 Apache Commons Http 客户端下使用，并且默认情况下 SimpleHttpConnectionManager 不是线程安全的。

要在多线程环境中实现这一点（在 Servlet 容器中运行），请执行以下操作：

```
MultiThreadedHttpConnectionManager connectionManager = new MultiThreadedHttpConnectionManager();
HttpClient httpClient = new HttpClient(connectionManager);

// Only needed if you have a authentication
Credentials credentials = new UsernamePasswordCredentials(username, password);
httpClient.getState().setCredentials(AuthScope.ANY, credentials);
httpClient.getParams().setAuthenticationPreemptive(true);

clientExecutor = new ApacheHttpClientExecutor(httpClient);

MyClass client = ProxyFactory.create(MyClass.class, "http://localhost:8080", clientExecutor); 
```

# windows-phone-7 - 使用 GeoCoordinateWatcher 时速度不更新

> ID：15508483
> 
> 赞同：2
> 
> 时间：2013-03-19T19:16:18.077
> 
> 标签：windows-phone-7, geolocation

在我的 Windows Phone 应用程序中使用`GeoCoordinateWatcher`该类获取更新的 GPS 位置和速度时，纬度和经度会更新，但速度保持在恒定值：（`5.95`以及路线）。

我使用以下代码初始化 Geo Watcher：

```
GeoCoordinateWatcher GeoWatcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High); 
```

并使用剪辑开始监听过程：

```
GeoWatcher.StatusChanged += GeoWatcherStatusChanged;
GeoWatcher.PositionChanged += OnGeoWatcherPositionChanged;
GeoWatcher.MovementThreshold = 0.5;
GeoWatcher.Start(); 
```

最后，该方法`OnGeoWatcherPositionChanged`包含以下代码：

```
textSpeed.Text = args.Position.Location.Speed.ToString(); 
```

哪里`textSpeed`有简单的`TextBox`。

有谁知道为什么速度保持在一个恒定值？提前致谢。

# php - 页面加载时的 PHP 会话变量

> ID：15508486
> 
> 赞同：0
> 
> 时间：2013-03-19T19:16:33.740
> 
> 标签：php, session, variables

我正在尝试在页面加载之间保存变量值。

我认为下面的代码在用户第一次点击页面时不会显示任何内容。下一次应该显示数字 5。第一次和之后每次都显示零 (0)。

```
<?php
session_start();
$_SESSION['test'];
echo $_SESSION['test'];
$_SESSION['test'] = 5;
?> 
```

难道我做错了什么？是否有可能我的 PHP 服务器设置不正确？等等

**服务器设置**

```
PHP Version 5.3.13
session.auto_start  Off Off
session.bug_compat_42   Off Off
session.bug_compat_warn Off Off
session.cache_expire    180 180
session.cache_limiter   nocache nocache
session.cookie_domain   no value    no value
session.cookie_httponly Off Off
session.cookie_lifetime 0   0
session.cookie_path /   /
session.cookie_secure   Off Off
session.entropy_file    /dev/urandom    /dev/urandom
session.entropy_length  0   0
session.gc_divisor  1000    1000
session.gc_maxlifetime  1440    1440
session.gc_probability  1   1
session.hash_bits_per_character 4   4
session.hash_function   0   0
session.name    PHPSESSID   PHPSESSID
session.referer_check   no value    no value
session.save_handler    files   files
session.save_path   /var/php_sessions   /var/php_sessions
session.serialize_handler   php php
session.use_cookies On  On
session.use_only_cookies    On  On
session.use_trans_sid   1   1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:35:41.763

1.  session.save_path (/var/php_sessions) 目录是否可写。我看到你没有使用 tmp 目录所以我问这个。

2.  session.use_trans_sid 应为 0 - 如果启用“use_trans_sid”，则会话 ID 每次都附加到 URL。我不确定 ajax 请求会发生什么，但我认为它会附加到。

3.  使用 session.use_only_cookies 作为 1 和 session.use_trans_sid 作为 1 有点冲突，因为 use_only_cookies 指定模块是否仅使用 cookie 在客户端存储会话 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:23:03.030

您可以尝试以下方法：

```
<?php
session_start();
if (!isset($_SESSION['test'])) {
    $_SESSION['test'] = 0;
}
echo $_SESSION['test'];
$_SESSION['test'] = 5;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:25:56.420

```
$_SESSION['test']; 
```

我认为这一行是在 $_SESSION 数组中创建一个新元素，其键为“test”......因为没有为其分配值，所以它的值为 0。

尝试将其更改为

```
if(!array_key_exists('test', $_SESSION)) {
    $_SESSION['test'] = 5;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T19:25:58.917

像这样的东西？？？：

```
 <?php
    session_start();
    if(isset($_SESSION['test']))
    {$_SESSION['test'] = 5;}
    else
    {
      $_SESSION['test'] = "";
    }
    echo $_SESSION['test'];
?> 
```

PS：这都是关于做这些事情的顺序，你应该检查会话是否存在分配5，如果不创建var并且什么都不分配……你第一次执行这个脚本不会什么都不显示，但后来它会显示 5。

萨卢多斯 ;)

# c# - 输入数字时如何显示错误消息？

> ID：15508492
> 
> 赞同：1
> 
> 时间：2013-03-19T19:16:54.170
> 
> 标签：c#, message

我已将文本框设置为只能输入字母，我想知道在输入字母以外的任何内容时如何显示错误消息。以下是我的代码：

```
private void FirstName_KeyPress_1(object sender, KeyPressEventArgs e)
        {

            if (e.KeyChar < 65 || e.KeyChar > 122)
            {

                e.Handled = true;
            }
        }

        private void FirstName_TextChanged_1(object sender, EventArgs e)
        {

            FirstName.KeyPress += new KeyPressEventHandler(FirstName_KeyPress_1);

        } 
```

我也试过

```
 if (e.KeyChar < 65 || e.KeyChar > 122)
            {

                e.Handled = true;
            }
else 
{
MessageBox.Show (" Please enter a letter",
                            "Error Message");
} 
```

但是，一旦在数字后输入了一个字母，就会出现此消息，并且在单击“确定”时不会出现此消息。它出现大约 4 次，直到消失。

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:53:30.987

if you want to use Linq and get a count of Items that are invalid in a List do the following

```
string vStr = FirstNameTextBox.Text;
var isValid = (from tmp in vStr
               where char.IsDigit(tmp)
               select tmp).ToList(); 
```

you can do a

```
ShowMessage(string.Join(",",isValid)); 
```

`yields 2,3,3,3` in a MessageBox

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:40:41.163

问题是你对这个逻辑的放置。如果您希望在用户单击确定/提交按钮时显示消息，您需要在此处执行检查并显示消息。您的示例在每次输入后检查（并因此可能显示错误消息）。

所以你想要类似的东西；

```
// generate this stub by double clicking the ok/submit button in the GUI builder
private void FirstName_EnterButtonClicked(object sender, EventArgs e)
{
      char[] chars = FirstNameTextBox.Text.ToCharArray();
      bool good = true;
      int placeholder;

      for (int i = 0; i < chars.length; i++)
      {
           if (int.TryParse(chars[i], placeholder)
           {
                good = false;
                break;
           }
      }
      if (!good)
         MessageBox.Show("Names cannot contain numbers."); 
} 
```

代码的快速解释 - 首先，我们等待用户在验证之前尝试提交完整的输入，而不是在添加每个字符之后。此时我们将输入字符串转换为字符数组并循环遍历它。`TryParse`如果输入是整数，则返回 true，并将占位符的值设置为该整数。如果用户输入了一个 int，如果我们将标志更改为 false，那么我们会中断，因为不需要继续检查字符串的其余部分。在循环之外，我们执行`MessageBox.Show`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:51:08.527

我更喜欢使用 javascript 来实现这些功能

函数 isAlphabet(e) { var keynum var keychar var numcheck

```
 if (e.keyCode >= 91 && e.keyCode <= 96)
        return false;
    keynum = e.keyCode
    keychar = String.fromCharCode(keynum)
    numcheck = /[a-zA-z ]/
    return e.returnValue = numcheck.test(keychar); 
```

}

您可以调用提交按钮的 Onclientclick 事件的以下函数。

希望这可以帮助 ：）

# java - 通过单击列标题对 SWT 表进行排序

> ID：15508493
> 
> 赞同：4
> 
> 时间：2013-03-19T19:16:54.350
> 
> 标签：java, swt

在 swt 表中，排序适用于字符串，如何对整数、双精度和日期值进行排序。这仅适用于字符串升序。任何人都可以提出更好的方法来做到这一点。

```
 TableItem item = new TableItem(table, SWT.NONE);
    item.setText(new String[] { "1", "v", "1.1", "20/03/2013" });
    item = new TableItem(table, SWT.NONE);
    item.setText(new String[] { "10", "z", "1.5", "20/04/2013" });
    item = new TableItem(table, SWT.NONE);
    item.setText(new String[] { "3", "a", "1.3", "30/01/2013" });

    Listener sortListener = new Listener() {
        public void handleEvent(Event e) {
            TableItem[] items = table.getItems();
            Collator collator = Collator.getInstance(Locale.getDefault());
            TableColumn column = (TableColumn) e.widget;
            int index = column == tblclmnNumber ? 0 : 1;
            for (int i = 1; i < items.length; i++) {
                String value1 = items[i].getText(index);
                for (int j = 0; j < i; j++) {
                    String value2 = items[j].getText(index);
                    if (collator.compare(value1, value2) < 0) {
                        String[] values = { items[i].getText(0),
                                items[i].getText(1), items[i].getText(2),
                                items[i].getText(3) };
                        items[i].dispose();
                        TableItem item = new TableItem(table, SWT.NONE, j);
                        item.setText(values);
                        items = table.getItems();
                        break;
                    }
                }
            }
            table.setSortColumn(column);
        }
    };
    tblclmnNumber.addListener(SWT.Selection, sortListener);
    tblclmnName.addListener(SWT.Selection, sortListener);
    tblclmnDeci.addListener(SWT.Selection, sortListener);
    tblclmnDate.addListener(SWT.Selection, sortListener);
    table.setSortColumn(tblclmnNumber);
    table.setSortDirection(SWT.UP); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T13:19:00.353

我已经用排序修改了 SWT 片段，以显示如何对具有不同数据类型的列进行排序。

```
/*
 * Table example snippet: sort a table by column
 *
 * For a list of all SWT example snippets see
 * http://www.eclipse.org/swt/snippets/
 * 
 * @since 3.2
 */
import java.text.SimpleDateFormat;
import java.util.Arrays;
import java.util.Comparator;
import java.util.Date;

import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Event;
import org.eclipse.swt.widgets.Listener;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;
import org.eclipse.swt.widgets.TableItem;

public class SortTable {
    private TableRow rows[] = new TableRow[] {
            new TableRow(1, "aaa", new Date(1363784269000L)),
            new TableRow(2, "abc", new Date(1367784269000L)),
            new TableRow(3, "efc", new Date(1363584269000L)),
            new TableRow(4, "ccc", new Date(1363734269000L)),
        };
    private Table table;
    private TableColumn intColumn;
    private TableColumn strColumn;
    private TableColumn dateColumn;

    public SortTable() {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());
        table = new Table(shell, SWT.BORDER);
        table.setHeaderVisible(true);
        intColumn = new TableColumn(table, SWT.NONE);
        intColumn.setText("int");
        intColumn.setWidth(50);
        strColumn = new TableColumn(table, SWT.NONE);
        strColumn.setText("string");
        strColumn.setWidth(50);
        dateColumn = new TableColumn(table, SWT.NONE);
        dateColumn.setText("date");
        dateColumn.setWidth(100);

        updateTable();

        Listener sortListener = new Listener() {
            public void handleEvent(Event e) {
                TableColumn column = (TableColumn) e.widget;
                if (column == intColumn) Arrays.sort(rows, BY_VAL);
                if (column == strColumn) Arrays.sort(rows, BY_STR);
                if (column == dateColumn) Arrays.sort(rows, BY_DATE);
                table.setSortColumn(column);
                updateTable();
            }
        };
        intColumn.addListener(SWT.Selection, sortListener);
        strColumn.addListener(SWT.Selection, sortListener);
        dateColumn.addListener(SWT.Selection, sortListener);
        shell.setSize(shell.computeSize(SWT.DEFAULT, SWT.DEFAULT).x, 300);
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }

    private void updateTable() {
        table.removeAll();
        for (TableRow row : rows) {
            TableItem item = new TableItem(table, SWT.NONE);
            item.setText(row.asString());
        }
    }

    public final Comparator<TableRow> BY_VAL = new Comparator<TableRow>() {
        @Override
        public int compare(TableRow o1, TableRow o2) {
            if (o1.val < o2.val) return -1;
            if (o1.val > o2.val) return 1;
            return 0;
        }
    }; 

    public final Comparator<TableRow> BY_STR = new Comparator<TableRow>() {
        @Override
        public int compare(TableRow o1, TableRow o2) {
            return o1.str.compareTo(o2.str);
        }
    }; 

    public final Comparator<TableRow> BY_DATE = new Comparator<TableRow>() {
        @Override
        public int compare(TableRow o1, TableRow o2) {
            return o1.date.compareTo(o2.date);
        }
    };

    private class TableRow {
        private int val;
        private String str;
        private Date date;
        private SimpleDateFormat format = new SimpleDateFormat();

        public TableRow(int val, String str, Date date) {
            this.val = val;
            this.str = str;
            this.date = date;
        }

        public String[] asString() {
            return new String[] {Integer.toString(val), str, format.format(date)};
        }
    }

    public static void main(String[] args) {
        new SortTable();
    }
} 
```

**总结一下**，如何对表中的列进行排序完全取决于程序员，因为表总是想要一行字符串数组，不管它们是什么意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-18T15:52:00.927

您可以将列的比较器作为数据放入列，然后使用它进行排序。这使排序逻辑更接近于列本身的定义。

```
intColumn = new TableColumn(table, SWT.NONE);
intColumn.setText("int");
intColumn.setWidth(50);
intColumn.setData(new Comparator<TableItem>() {
    @Override
    public int compare(TableItem t1, TableItem t2) {
        int i1 = Integer.parseInt(t1.getText(0));
        int i2 = Integer.parseInt(t2.getText(0));
        if (i1.val < i2.val) return -1;
        if (i1.val > i2.val) return 1;
        return 0;
    }
};
strColumn = new TableColumn(table, SWT.NONE);
strColumn.setText("string");
strColumn.setWidth(50);
strColumn.setData(new Comparator<TableItem>() {
    @Override
    public int compare(TableItem t1, TableItem t2) {
        return t1.getText(1).compareTo(t2.getText(1));
    }
};
dateColumn = new TableColumn(table, SWT.NONE);
dateColumn.setText("date");
dateColumn.setWidth(100);
dateColumn.setData(new Comparator<TableItem>() {
    @Override
    public int compare(TableItem t1, TableItem t2) {
        return Date.parse(t1.getText(2)).compareTo(Date.parse(t2.getText(2)));
    }
};

Listener sortListener = e -> {
    TableColumn sortColumn = table.getSortColumn();
    TableColumn selectedColumn = (TableColumn) e.widget;
    int dir = table.getSortDirection();
    if (sortColumn == selectedColumn) {
        dir = dir == SWT.UP ? SWT.DOWN : SWT.UP;
    } else {
        table.setSortColumn(selectedColumn);
        dir = SWT.UP;
    }
    TableItem[] items = table.getItems();
    final Comparator<TableItem> comparator = (Comparator<TableItem>) selectedColumn.getData();
    for (int i = 1; i < items.length; i++) {
        for (int j = 0; j < i; j++) {
            if ((comparator.compare(items[i], items[j]) < 0 && dir == SWT.UP) || (comparator.compare(items[i], items[j]) > 0 && dir == SWT.DOWN)) {
                String[] oldItem = new String[table.getColumnCount()];
                for (int h = 0; h < table.getColumnCount(); h++) {
                    item[h] = items[i].getText(h);
                }
                items[i].dispose();
                TableItem newItem = new TableItem(table, SWT.NONE, j);
                newItem.setText(oldItem);
                items = table.getItems();
                break;
            }
        }
    }
    table.setSortDirection(dir);
}; 
```

# c++ - boost asio http客户端代码中的链接器错误LNK2019

> ID：15508503
> 
> 赞同：-2
> 
> 时间：2013-03-19T19:17:22.307
> 
> 标签：c++, visual-c++, boost-asio

我正在尝试使用 boost asio 库来实现一个 http 客户端。但我面临一些我无法修复的链接器错误。

这是代码

## yql_asio.cpp

```
#include "common.h"
#include "yql.h"

int main(int argc, char* argv[])
{
    try
    {
        int thread_num = 2;
        if ( argc > 1 )
            thread_num = boost::lexical_cast<int>(argv[1]);

        boost::asio::io_service io_service;

        Yql yql_main(io_service, "http://www.google.com");
        yql_main.GetResponse();

        io_service.run();

    }
    catch(std::exception & e)
    {
        std::cerr<<e.what()<<std::endl;
    }

    return 0;

} 
```

## yql.h

```
#ifndef YQL_H
#define YQL_H

#include "yql_conn.h"
#include "common.h"

typedef std::deque<io_service_ptr> ios_deque;

class Yql //: public boost::noncopyable
{
private:
    std::string m_url;
    std::string m_response;
    //boost::shared_ptr<Connection> m_conn;
    Connection *m_conn;
    boost::asio::io_service &io_service_;

public:
    Yql(boost::asio::io_service &io_service, std::string p_url);
    ~Yql(){}
    void GetResponse();
};

#endif 
```

## yql.cpp

```
#include "yql.h"

Yql::Yql(boost::asio::io_service& io_services, std::string p_url) 
    : m_url(p_url)
    , io_service_(io_services)
{
    m_conn = new Connection(io_service_, p_url);
    //m_conn = Connection::create(io_service_, m_url);
}

void Yql::GetResponse()
{
    m_conn->start();
} 
```

## yql_conn.h

```
#ifndef YQL_CONN_H
#define YQL_CONN_H

#include "common.h"
#include <map>

class Connection //: public boost::enable_shared_from_this<Connection>
{
public:
    typedef boost::shared_ptr<Connection> pointer;

    static pointer create(ba::io_service & io_service, std::string p_url)
    {
        return pointer(new Connection(io_service, p_url));
    }

    Connection(ba::io_service & io_service, std::string p_url);

    /*ba::ip::tcp::socket& socket()
    {
        return socket_;
    } */

    void start();

private:

    /*void handle_browser_write(const bs::error_code & errc, size_t len);*/
    void handle_read_headers(const bs::error_code & errc, size_t len);
    void handle_server_write(const bs::error_code & errc, size_t len);
    void handle_server_read_headers(const bs::error_code & errc, size_t len);
    void handle_server_read_body(const bs::error_code & errc, size_t len);

    void start_connect();
    void start_write_to_server();
    void shutdown();

    void handle_resolve(const boost::system::error_code & err, ba::ip::tcp::resolver::iterator endpoint_iterator);
    void handle_connect(const boost::system::error_code & err, ba::ip::tcp::resolver::iterator endpoint_iterator);

    ba::io_service& io_service_;
    ba::ip::tcp::socket socket_;
    ba::ip::tcp::resolver resolver_;
    //bool proxy_closed;
    //bool isPersistent;
    int32_t RespLen;
    int32_t RespReaded;

    //boost::array<char, 8192> bbuffer;
    boost::array<char, 8192> sbuffer;

    std::string m_response;

    std::string m_url;
    std::string m_headers;
    std::string m_new_url;
    std::string m_method;
    std::string m_req_version;
    std::string m_server;
    std::string m_port;
    //bool m_is_open;

    std::string fReq;

    typedef std::map<std::string, std::string> headersMap;
    headersMap reqHeaders, respHeaders;

    void parseHeaders(const std::string& h, headersMap& m);
};

#endif 
```

## yql_conn.cpp

```
#include "yql_conn.h"

Connection::Connection(ba::io_service & io_service, std::string p_url)
    : io_service_(io_service)
    , socket_(io_service)
    , resolver_(io_service)
    //, proxy_closed(false)
    //, isPersistent(false)
    //, m_is_open(false)
    , m_url(p_url)
{
} //end of Connection()

void Connection::start() //called
{
    std::cout<<__FUNCTION__<<"BEGINS"<<std::endl;

    m_headers.clear();
    reqHeaders.clear();
    respHeaders.clear();

    start_connect();

    //boost::asio::async_read(bsocket_, ba::buffer(bbuffer), ba::transfer_at_least(1),
    //  boost::bind(&Connection::handle_browser_read_headers,
    //              shared_from_this(),
    //              ba::placeholders::error,
    //              ba::placeholders::bytes_transferred) );

    std::cout<<__FUNCTION__<<"ENDS"<<std::endl;
} //start() 

void Connection::start_connect() //called
{
    std::cout<<__FUNCTION__<<"BEGINS"<<std::endl;
    m_server = "";
    //std::string port = "80";
    m_port = "80";
    boost::regex rHTTP("http://(.*?)(:(\\d+))?(/.*)");
    boost::smatch m;

    if ( boost::regex_search(m_url, m, rHTTP, boost::match_extra) )
    {
        m_server = m[1].str();
        if ( m[2].str() != "" )
        {
            m_port = m[3].str();
        }
        m_new_url = m[4].str();
    }

    if ( m_server.empty() )
    {
        std::cout<<"Can't parse URL "<<std::endl;
        return;
    }

    //if ( !m_is_open || (server != m_server) || (port != m_port) )
    /*if ( port != m_port) )
    {
        m_server = server;
        m_port = port;
    */  
    boost::asio::ip::tcp::resolver::query query(m_server, m_port);

    resolver_.async_resolve(query, 
        boost::bind(&Connection::handle_resolve, this,//shared_from_this(),
            boost::asio::placeholders::error,
            boost::asio::placeholders::iterator));
    //}
    /*else
    {
        start_write_to_server();
    }*/

    std::cout<<__FUNCTION__<<"ENDS"<<std::endl;
}//start_connect() 

void Connection::handle_resolve(const boost::system::error_code & err,
                                    boost::asio::ip::tcp::resolver::iterator endpoint_iterator) //called
{
    std::cout<<__FUNCTION__<<"BEGINS"<<std::endl;
    if ( !err )
    {
        std::cout<<"Remote address resolved..."<<std::endl;
        boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
        socket_.async_connect(endpoint, boost::bind(&Connection::handle_connect,
                                            //shared_from_this(),
                                            this,
                                            boost::asio::placeholders::error,
                                            ++endpoint_iterator));
    }
    else
    {
        shutdown();
    }
    std::cout<<__FUNCTION__<<"ENDS"<<std::endl;
} //handle_resolve()

void Connection::handle_connect(const boost::system::error_code & err, 
                boost::asio::ip::tcp::resolver::iterator endpoint_iterator) //called
{
    std::cout<<__FUNCTION__<<"BEGINS"<<std::endl;

    if ( !err )
    {
        boost::asio::ip::tcp::endpoint remote_host = socket_.remote_endpoint();
        boost::asio::ip::address remote_host_addr = remote_host.address();
        std::string addr_repr = remote_host_addr.to_string();
        std::cout<<"Connected to "<<addr_repr<<std::endl;
        //m_is_open = true;
        start_write_to_server();
    }
    else if ( endpoint_iterator != boost::asio::ip::tcp::resolver::iterator())
    {
        socket_.close();
        boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
        socket_.async_connect(endpoint, boost::bind(&Connection::handle_connect, 
                                //shared_from_this(),
                                this,
                                boost::asio::placeholders::error,
                                ++endpoint_iterator));
    }
    else
    {
        shutdown();
    }

    std::cout<<__FUNCTION__<<"ENDS"<<std::endl;
} //handle_connect()

void Connection::start_write_to_server() //called
{
    std::cout<<__FUNCTION__<<"BEGINS"<<std::endl;

    fReq = m_method;
    fReq += " ";
    //fReq += m_new_url;
    fReq += m_url;
    fReq += " HTTP/";
    fReq += "1.0";
    fReq += "\r\n";
    fReq += m_headers;

    boost::asio::async_write(socket_, boost::asio::buffer(fReq),
        boost::bind(&Connection::handle_server_write, this, //shared_from_this(), 
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));

    m_headers.clear();

    std::cout<<__FUNCTION__<<"ENDS"<<std::endl;
} //start_write_to_server()

void Connection::handle_server_write(const bs::error_code & err, size_t len) //called
{
    std::cout<<__FUNCTION__<<"BEGINS"<<std::endl;

    if ( !err )
    {
        std::cout<<"Bytes sent to server :: "<<len<<std::endl;
        boost::asio::async_read(socket_, boost::asio::buffer(sbuffer), boost::asio::transfer_at_least(1),
            boost::bind(&Connection::handle_server_read_headers,
                        //shared_from_this(),
                        this,
                        boost::asio::placeholders::error,
                        boost::asio::placeholders::bytes_transferred ) );
    }
    else
    {
        shutdown();
    }

    std::cout<<__FUNCTION__<<"ENDS"<<std::endl;
} //handle_server_write

void Connection::handle_server_read_headers(const boost::system::error_code & err, size_t len) //called
{
    std::cout<<__FUNCTION__<<"BEGINS"<<std::endl;

    if ( !err )
    {
        std::string::size_type idx;

        if ( m_headers.empty() )
            m_headers = std::string(sbuffer.data(), len);
        else
            m_headers += std::string(sbuffer.data(), len);

        idx = m_headers.find("\r\n\r\n");

        if ( idx == std::string::npos )
        {
            boost::asio::async_read(socket_, boost::asio::buffer(sbuffer),
                                        boost::asio::transfer_at_least(1),
                                        boost::bind(&Connection::handle_read_headers,
                                            //shared_from_this(),
                                            this,
                                            boost::asio::placeholders::error,
                                            boost::asio::placeholders::bytes_transferred));
        }
        else
        {
            RespReaded = len - idx - 4;
            idx = m_headers.find("\r\n");
            std::string respString = m_headers.substr(0, idx);
            RespLen = -1;
            parseHeaders(m_headers.substr(idx+2), respHeaders);
            std::string reqConnString = "", respConnString = "";
            std::string respVersion = respString.substr(respString.find("HTTP/")+5,3);
            headersMap::iterator it = respHeaders.find("Content-Length");
            if ( it != respHeaders.end() )
                RespLen = boost::lexical_cast<int>(it->second);
            it = respHeaders.find("Connection");
            if ( it != respHeaders.end() )
                respConnString = it->second;
            it = respHeaders.find("Connection");
            if ( it != respHeaders.end() )
                reqConnString = it->second;

            //isPersistent = (
            //  ((m_req_version == "1.1" && reqConnString != "close") ||
            //   (m_req_version == "1.0" && reqConnString == "keep-alive" )) &&
            //  ((respVersion == "1.1" && respConnString != "close") ||
            //   (respVersion == "1.0" && respConnString == "kepp-alive" )) &&
            //  RespLen != -1 );

            std::cout<<"Header Received :: "<<m_headers;

            boost::asio::async_read(socket_, boost::asio::buffer(sbuffer, len),
                boost::asio::transfer_at_least(1),
                boost::bind(&Connection::handle_server_read_body,
                                //shared_from_this(),
                                this,
                                boost::asio::placeholders::error,
                                boost::asio::placeholders::bytes_transferred));

            //boost::asio::async_write(bsocket_, boost::asio::buffer(m_headers),
            //  boost::bind(&Connection::handle_browser_write,
            //              shared_from_this(),
            //              boost::asio::placeholders::error,
            //              boost::asio::placeholders::bytes_transferred));
        }
    }
    else
    {
        shutdown();
    }

    std::cout<<__FUNCTION__<<"ENDS"<<std::endl;
} //handle_server_read_headers

void Connection::handle_server_read_body(const bs::error_code & err, size_t len) //called
{
    std::cout<<__FUNCTION__<<"BEGINS"<<std::endl;

    if ( !err || err == boost::asio::error::eof )
    {
        std::cout<<"Data received :: "<<std::string(sbuffer.begin(), sbuffer.end())<<std::endl;
        RespReaded += len;

        boost::asio::async_read(socket_, boost::asio::buffer(sbuffer, len),
        boost::asio::transfer_at_least(1),
        boost::bind(&Connection::handle_server_read_body,
                        //shared_from_this(),
                        this,
                        boost::asio::placeholders::error,
                        boost::asio::placeholders::bytes_transferred));
        //if ( err == boost::asio::error::eof )
        //  proxy_closed = true;
        //boost::asio::async_write(bsocket_, boost::asio::buffer(sbuffer, len),
        //  boost::bind(&Connection::handle_browser_write,
        //              shared_from_this(),
        //              boost::asio::placeholders::error,
        //              boost::asio::placeholders::bytes_transferred));
    }
    else
    {
        shutdown();
    }

    std::cout<<__FUNCTION__<<"ENDS"<<std::endl;
} //handle_server_read_body

void Connection::handle_read_headers(const bs::error_code & err, size_t len)
{
    if (!err)
    {
        std::cout<<"Bytes Received ... :: "<<len<<std::endl;
        if ( m_headers.empty())
        {
            m_headers = std::string(sbuffer.data(), len);
        }
        else
        {
            m_headers += std::string(sbuffer.data(), len);
        }
        if ( m_headers.find("\r\n\r\n") == std::string::npos )
        {
            boost::asio::async_read(socket_, ba::buffer(sbuffer), ba::transfer_at_least(1),
                boost::bind(&Connection::handle_read_headers, 
                            //shared_from_this(),
                            this,
                            ba::placeholders::error,
                            ba::placeholders::bytes_transferred));
        }
        else
        {
            std::string::size_type idx = m_headers.find("\r\n");
            std::string reqString = m_headers.substr(0, idx);
            m_headers.erase(0, idx+2);

            idx = reqString.find(" ");
            if ( idx == std::string::npos )
            {
                std::cout<<"Bad first line : "<<reqString<<std::endl;
                return;
            }

            m_method = reqString.substr(0, idx);
            reqString = reqString.substr(idx+1);
            idx = reqString.find(" ");
            if ( idx == std::string::npos )
            {
                std::cout<<"Bad first line of request : "<< reqString << std::endl;
                return;
            }

            m_url = reqString.substr(0,idx);
            m_req_version = reqString.substr(idx+1);
            idx = m_req_version.find("/");
            if ( idx == std::string::npos )
            {
                std::cout<<"Bad first line of request : "<<reqString<<std::endl;
                return;
            }

            m_req_version = m_req_version.substr(idx+1);
            parseHeaders(m_headers, reqHeaders);

            //start_connect();
        }
    }
    else
    {
        shutdown();
    }
}

void Connection::parseHeaders(const std::string & h, headersMap & hm)
{
    std::string str(h);
    std::string::size_type idx;
    std::string t;

    while ( (idx=str.find("\r\n")) != std::string::npos )
    {
        t = str.substr(0, idx);
        str.erase(0, idx+2);
        if ( t == "" )
            break;
        idx = t.find(": ");
        if ( idx == std::string::npos )
        {
            std::cout<<"Bad header line: "<<t<<std::endl;
            break;
        }

        hm.insert(std::make_pair(t.substr(0, idx), t.substr(idx+2)));
    }
} //parseHeaders

void Connection::shutdown()
{
    std::cout<<"Closing socket..."<<std::endl;
    socket_.close();
    //bsocket_.close();
} //shutdown 
```

## 常见的.h

```
#ifndef COMMON_H
#define COMMON_H

#include <boost/asio.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/enable_shared_from_this.hpp>

#include <boost/algorithm/string.hpp>
#include <boost/lexical_cast.hpp>

#include <boost/regex.hpp>

#include <boost/bind.hpp>
#include <boost/thread/thread.hpp>

#include <iostream>
#include <string>
#include <boost/utility.hpp>

namespace ba=boost::asio;
namespace bs=boost::system;

typedef boost::shared_ptr<ba::ip::tcp::socket> socket_ptr;
typedef boost::shared_ptr<ba::io_service> io_service_ptr;

#endif 
```

链接器错误是

```
1>------ Rebuild All started: Project: yql_asio, Configuration: Debug Win32 ------
1>Build started 20-03-2013 AM 1:06:33.
1>InitializeBuildStatus:
1>  Touching "Debug\yql_asio.unsuccessfulbuild".
1>ClCompile:
1>  stdafx.cpp
1>  yql_conn.h
1>  Please define _WIN32_WINNT or _WIN32_WINDOWS appropriately. For example:
1>  - add -D_WIN32_WINNT=0x0501 to the compiler command line; or
1>  - add _WIN32_WINNT=0x0501 to your project's Preprocessor Definitions.
1>  Assuming _WIN32_WINNT=0x0501 (i.e. Windows XP target).
1>  yql_conn.cpp
1>  Please define _WIN32_WINNT or _WIN32_WINDOWS appropriately. For example:
1>  - add -D_WIN32_WINNT=0x0501 to the compiler command line; or
1>  - add _WIN32_WINNT=0x0501 to your project's Preprocessor Definitions.
1>  Assuming _WIN32_WINNT=0x0501 (i.e. Windows XP target).
1>  yql_asio.cpp
1>  Please define _WIN32_WINNT or _WIN32_WINDOWS appropriately. For example:
1>  - add -D_WIN32_WINNT=0x0501 to the compiler command line; or
1>  - add _WIN32_WINNT=0x0501 to your project's Preprocessor Definitions.
1>  Assuming _WIN32_WINNT=0x0501 (i.e. Windows XP target).
1>  Yql.cpp
1>  Please define _WIN32_WINNT or _WIN32_WINDOWS appropriately. For example:
1>  - add -D_WIN32_WINNT=0x0501 to the compiler command line; or
1>  - add _WIN32_WINNT=0x0501 to your project's Preprocessor Definitions.
1>  Assuming _WIN32_WINNT=0x0501 (i.e. Windows XP target).
1>  Generating Code...
1>Debug\yql_conn.obj : warning LNK4042: object specified more than once; extras ignored
1>Yql.obj : error LNK2019: unresolved external symbol "public: __thiscall Connection::Connection(class boost::asio::io_service &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (??0Connection@@QAE@AAVio_service@asio@boost@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function "public: __thiscall Yql::Yql(class boost::asio::io_service &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (??0Yql@@QAE@AAVio_service@asio@boost@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)
1>Yql.obj : error LNK2019: unresolved external symbol "public: void __thiscall Connection::start(void)" (?start@Connection@@QAEXXZ) referenced in function "public: void __thiscall Yql::GetResponse(void)" (?GetResponse@Yql@@QAEXXZ)
1>C:\Users\asit\Documents\Visual Studio 2010\Projects\yql_asio\Debug\yql_asio.exe : fatal error LNK1120: 2 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:31.88
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

请帮我修复错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:46:11.263

您有两个 LNK2019 错误。第一个说它找不到 2 参数连接构造函数。第二个说它无法从连接类中找到启动方法。还有一个 LNK4042 警告。此警告表明您意识到链接到 Connection 类的问题，该类在 yql_conn.h 和 yql_conn.cpp 中定义，然后您尝试显式链接到该文件。您的显式链接可能是正确的，但由于有两个版本浮动，它选择了另一个并忽略了显式链接。这可以解释为什么您会收到此警告。

因此，我怀疑问题出在版本控制中，或者您正在选择另一个由其他人编写的 Connection 类。您可能在其他地方定义了连接类 - 在不同的文件或相同的文件但在不同的文件夹中。该文件的旧版本可能没有正确定义 Connection 构造函数，也没有定义 start 方法 - 这将解释未解决的链接错误。因此，您可以尝试访问 yql.h 或 yql.cpp 并右键单击 Connection。选择转到定义。如果它带您进入具有 start 定义的文件，并且构造函数看起来正确，则尝试再次右键单击 Connection 并选择 Find All References。您也可以尝试在所有文件中搜索 Connection。

# lucene - lucene维基百科查询

> ID：15508505
> 
> 赞同：0
> 
> 时间：2013-03-19T19:17:29.990
> 
> 标签：lucene, tokenize

我正在使用 lucene 从 wiki 转储中查询并获取类别。所以，我得到了相关的文件，对于每一个文件，我都调用了下面的函数。

```
static List<String> getCategories(Document document) throws IOException
{
    List<String> categories = new ArrayList<String>();
    String text = document.get("text");
    WikipediaTokenizer tf = new WikipediaTokenizer(new StringReader(text));

    CharTermAttribute termAtt = tf.addAttribute(CharTermAttribute.class);
    TypeAttribute typeAtt = tf.addAttribute(TypeAttribute.class);

    while (tf.incrementToken())
    {
        String tokText = termAtt.toString();
        if (typeAtt.type().equals(WikipediaTokenizer.CATEGORY) == true)
        {
            categories.add(tokText);
        }
    }

    return categories;
} 
```

但它会在 while 语句中引发以下错误。

```
Exception in thread "main" java.lang.NullPointerException
    at org.apache.lucene.analysis.wikipedia.WikipediaTokenizerImpl.zzRefill(WikipediaTokenizerImpl.java:574)
    at org.apache.lucene.analysis.wikipedia.WikipediaTokenizerImpl.getNextToken(WikipediaTokenizerImpl.java:781)
    at org.apache.lucene.analysis.wikipedia.WikipediaTokenizer.incrementToken(WikipediaTokenizer.java:200)
    at SearchIndex.getCategories(SearchIndex.java:82)
    at SearchIndex.main(SearchIndex.java:54) 
```

我查看了 zzRefill() 函数，但我无法理解它。这是一个已知的错误还是什么？我不知道我做错了什么。lucene 家伙说整个 wikipediaTokenizer 部分处于测试阶段，可能会发生变化。我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:18:43.777

我通过在调用 while 循环之前添加 tf.reset() 解决了这个问题

# c++ - 在堆栈展开时抛出/捕捉是否安全？

> ID：15508508
> 
> 赞同：1
> 
> 时间：2013-03-19T19:17:34.967
> 
> 标签：c++, exception-handling, stack-unwinding

问：在堆栈展开时抛出并捕获异常是否安全，或者应用程序`terminate`是否在第二次抛出时调用？

最小的例子：

```
void some_function()
{
    try
    {
        // do stuff here that can throw
        throw std::runtime_error("blah");
    } catch(const std::exception& re)
    {
        try // this code could be in some function called from here
        {
            // do something with re here that throws a logical_error
            throw std::logical_error("blah blah"); // does this call terminate?
        } catch(const std::logical_error& le)
        {
        }
    }
} 
```

[读完这个问题](https://stackoverflow.com/questions/15504166/how-should-one-log-when-an-exception-is-triggered)后我很好奇。

注意：我知道你可以/应该在析构函数中，但是在一个块`catch(...)`中通常有 a 是否有意义- 也许在某个调用异常的函数中（在我的示例中）？`try/catch``catch``re`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T19:24:24.283

这并不是在堆栈展开期间。一旦进入一个 catch 块，堆栈就已经被展开。

是的，该代码是合法的。看到这个问题：[Nested try...catch inside C++ exception handler?](https://stackoverflow.com/questions/8711652/nested-try-catch-inside-c-exception-handler)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:29:09.597

Pubby 的回答最好地回答了您所描述的场景。

作为附录，当堆栈展开时，唯一执行的用户代码是析构函数（以及那些析构函数调用的代码）。

如果您**在** `throw`这种情况下使用析构函数，则标准指定`std::terminate()`将调用该析构函数。

# safari-extension - Safari 扩展的弹出窗口关闭时的事件监听器

> ID：15508514
> 
> 赞同：1
> 
> 时间：2013-03-19T19:17:55.847
> 
> 标签：safari-extension

有没有办法检测 Safari 扩展的弹出窗口何时关闭。类似于弹出窗口关闭时触发的事件？我没有在 API 文档中看到任何事件侦听器，但是否有解决方法？弹出窗口关闭后执行清理操作会很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T09:17:47.017

您可以在下一个弹出窗口打开之前进行清理：

```
safari.application.addEventListener('popover', function(event) {
    event.target.contentWindow.location.reload();
}, true); 
```

# sql - 以同一顺序订购 2 列

> ID：15508515
> 
> 赞同：0
> 
> 时间：2013-03-19T19:18:04.950
> 
> 标签：sql, postgresql

我有桌子：

例子：

```
Name       |      Last Name
Albert            Rigs
Carl              Dimonds
Robert            Big
Julian            Berg 
```

我需要这样订购：

```
Name       |      Last Name
Albert            Rigs         (name)
Julian            Berg         (last name)
Robert            Big          (last name)
Carl              Dimonds 
```

我需要类似的东西，按姓名和姓氏在同一个订单上排序。看例子，我有名字阿尔伯特，下一个有序的名字行是卡尔，但我的姓氏有 Big 和 Berg，B > C 所以我在第二行得到姓氏顺序。这就像两列是相同的，但不是。很难解释，对不起。

这是可能的？

提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:21:01.800

要按 的最小值订购`(Name, Lastname)`，您可以：

```
select  *
from    YourTable
order by
        case 
        when Name > LastName then LastName
        else name
        end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T20:44:41.700

对 Case 的句法改进，并允许在另一列上使用 ti-break。

```
 select   *
 from     my_table
 order by least(name,last_name),
          greatest(name,last_name) 
```

# c# - 删除和重新创建 Windows Azure 存储表的正确方法 = 错误 409 冲突 - 代码：TableBeingDeleted

> ID：15508517
> 
> 赞同：18
> 
> 时间：2013-03-19T19:18:06.277
> 
> 标签：c#, azure, azure-storage, azure-table-storage, azure-web-roles

我对 Windows Azure 开发非常陌生，并且需要将一些数据存储在 Windows azure 存储表中。

该表的存在实际上只是为了为位于 azure 存储驱动器上的某些文件提供快速查找机制。

因此，我计划在应用程序启动时填充此表（即在 Web 应用程序全局应用程序启动时）

与其尝试维护此表以进行更改，不如尝试在应用程序未运行时驱动器可能发生的更改。或者由于这个驱动器只是一个资源的 vhd，我们可能偶尔会上传一个新的 vhd。

因此，而不是尝试维护这一点的麻烦。在每次应用程序启动时重建该表就足够了。

我开始整理一些代码来检查表是否已经存在，如果确实删除它，然后重新创建一个新表。

```
var storageAccount = CloudStorageAccount.Parse(ConfigurationManager.ConnectionStrings["AzureStorage"].ConnectionString);
var tableClient = storageAccount.CreateCloudTableClient();
var rmsTable = tableClient.GetTableReference("ResourceManagerStorage");
rmsTable.DeleteIfExists();
rmsTable.Create(); 
```

我原以为这行不通。我收到以下错误：

```
The remote server returned an error: (409) Conflict. 

HTTP/1.1 409 Conflict
Cache-Control: no-cache
Transfer-Encoding: chunked
Server: Windows-Azure-Table/1.0 Microsoft-HTTPAPI/2.0
x-ms-request-id: c6baf92e-de47-4a6d-82b3-4faec637a98c
x-ms-version: 2012-02-12
Date: Tue, 19 Mar 2013 17:26:25 GMT

166
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <code>TableBeingDeleted</code>
  <message xml:lang="en-US">The specified table is being deleted. Try operation later.
RequestId:c6baf92e-de47-4a6d-82b3-4faec637a98c
Time:2013-03-19T17:26:26.2612698Z</message>
</error>
0 
```

这样做的正确方法是什么？是否有可以订阅的事件让您知道表何时被删除？关于实现这一点的最佳方式的任何其他建议？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-19T19:39:41.343

来自[MSDN](http://msdn.microsoft.com/en-us/library/windowsazure/dd179387.aspx)：“请注意，删除表可能需要至少 40 秒才能完成。如果在删除表时尝试对表执行操作，服务将返回状态代码 409（冲突），并附加错误信息表明该表正在被删除。”

处理此问题的唯一方法是创建一个具有不同名称的表。这可以像在您的姓名后附加时间戳或 GUID 一样简单。只是要小心清理你的垃圾。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-05T10:27:31.913

如果您需要使用相同的表名，您可以使用扩展方法：

```
public static class StorageExtensions
{
    #region Non-async

    public static bool SafeCreateIfNotExists(this CloudTable table, TimeSpan? timeout, TableRequestOptions requestOptions = null, OperationContext operationContext = null)
    {
        Stopwatch sw = Stopwatch.StartNew();
        if (timeout == null) timeout = TimeSpan.FromSeconds(41); // Assuming 40 seconds max time, and then some.
        do
        {
            if (sw.Elapsed > timeout.Value) throw new TimeoutException("Table was not deleted within the timeout.");

            try
            {
                return table.CreateIfNotExists(requestOptions, operationContext);
            }
            catch (StorageException e) when(IsTableBeingDeleted(e))
            {
                Thread.Sleep(1000);
            }
        } while (true);
    }

    #endregion

    #region Async

    public static async Task<bool> SafeCreateIfNotExistsAsync(this CloudTable table, TimeSpan? timeout, TableRequestOptions requestOptions = null, OperationContext operationContext = null, CancellationToken cancellationToken = default)
    {
        Stopwatch sw = Stopwatch.StartNew();
        if (timeout == null) timeout = TimeSpan.FromSeconds(41); // Assuming 40 seconds max time, and then some.
        do
        {
            if (sw.Elapsed > timeout.Value) throw new TimeoutException("Table was not deleted within the timeout.");

            try
            {
                return await table.CreateIfNotExistsAsync(requestOptions, operationContext, cancellationToken).ConfigureAwait(false);
            }
            catch (StorageException e) when(IsTableBeingDeleted(e))
            {
                // The table is currently being deleted. Try again until it works.
                await Task.Delay(1000);
            }
        } while (true);
    }

    #endregion

    private static bool IsTableBeingDeleted(StorageException e)
    {
        return
            e.RequestInformation.HttpStatusCode == 409
            &&
            e.RequestInformation.ExtendedErrorInformation.ErrorCode.Equals( TableErrorCodeStrings.TableBeingDeleted );
    }
} 
```

警告！使用这种方法时要小心，因为它会阻塞线程。如果第三方服务 (Azure) 不断产生这些错误，它可能会进入死循环。造成这种情况的原因可能是表锁定、订阅到期、服务不可用等。

# html - 显示或隐藏网页部分的按钮

> ID：15508525
> 
> 赞同：0
> 
> 时间：2013-03-19T19:18:40.757
> 
> 标签：html, css

我希望通过单击按钮来显示/隐藏网页的某些部分。[在我看到gunicorn 网站](http://gunicorn.org)之前，我认为我必须使用 javascript 来执行此操作。在其中，他们似乎只是使用 html 和 css 来显示/隐藏东西。

不幸的是，我不明白它使用的机制。是什么让所有 div 除了选定的 div 之外的所有 div 被隐藏？谁能指出我对 gunicorn 网站使用的过程的解释？抱歉，如果这是一个愚蠢的问题，我对 HTML 或 CSS 不是很有经验。非常感谢，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:21:45.037

他们也使用 Java Script。我从 main.js 拿了这个

```
 // hook up tab links
    $(document).on('click', '.tabs ul li a', function(e) {
        activateTab($(this));
        //alert($(this));
    }); 
```

据我所知，没有 Java Script 是不可能做到的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:38:11.590

作为对正确的 Raffael 的回应，它看起来是 jQuery，而不是标准的 JavaScript。任何一种方式都可以这样做。jQuery 虽然乍一看很神秘，但它的代码行数与 JavaScript 相同，尽管它确实需要一个框架。

# html - 将 Select 选项值传递给 OnChange 函数

> ID：15508527
> 
> 赞同：1
> 
> 时间：2013-03-19T19:18:50.387
> 
> 标签：html, forms, select, form-submit, option

我有一个 HTML 表单，我正在使用 JavaScript 提交一个选择控件的“onchange”函数，如下所示：

```
<form action='seeLocation.php?'>Jump To Location: 
    <select onchange='this.form.submit()'>
        <option value='1'>Location1</option>
        <option value='2'>Location2</option>
        <option value='3'>Location3</option>
    </select>
</form> 
```

问题是，我需要将`<option>`'s value 标签传递到表单的`action`标签中，这样它实际上就像

```
<form action='seeLocation.php?1'> 
```

或者

```
<form action='seeLocation.php?2'> 
```

等等

那可能吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T19:25:03.877

在您的`onchange`功能中，我认为您可以这样做（尚未测试）：

```
this.form.action="seeLocation.php?"+this.options[this.selectedIndex].value;this.form.submit() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:25:02.707

将您的 html 更改为：

```
<script type="text/javascript">
  function changeDropDown(dropdown){
     var location = dropdown.options[dropdown.selectedIndex].value;
     document.getElementById("form1").action = "seeLocation.php?" + location;
     document.getElementById("form1").submit();
   }
</script>

<form id="form1" name="form1">Jump To Location: 
    <select onchange='changeDropDown(this);'>
        <option value='1'>Location1</option>
        <option value='2'>Location2</option>
        <option value='3'>Location3</option>
    </select>
</form> 
```

如果您需要较少冗长的代码，也可以内联执行。

# drupal - 从中央模板更新多个实时 drupal 安装

> ID：15508528
> 
> 赞同：0
> 
> 时间：2013-03-19T19:18:50.683
> 
> 标签：drupal, drupal-7

我正在帮助我的大学从 Lenya 切换到 Drupal 的 CMS。我们计划为每个需要安装的部门提供 drupal 安装。这些安装都将共享相同的代码库（我现在正在开发的自定义drupal“模板”），但每个都有自己的数据库，允许每个站点拥有自己的用户、节点等。

我遇到的问题是，在对模板进行更改后，我想更新所有安装。例如，如果更改是针对核心代码或已安装模块的更改，则没有问题，因为所有安装都在相同的代码库上运行。另一方面，如果我需要对数据库进行更改，那我就搞砸了，因为已经安装了大量的数据库，而且它们都是不同的，需要保留。即使对于像安装新模块这样的简单更改，该模块也会在已安装模块列表中显示良好，但我必须手动进入每个安装并手动启用它。

一定有更简单的方法！是否有一些简单的方法（比如我没有听说过的模块）强制drupal 数据库从主数据库更新某些表？我正在考虑类似于“update.php”脚本的东西，我可以从 drush 中大量调用它。

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:14:47.707

您可以尝试为此使用 drush make。查看此站点[http://drushmake.me/](http://drushmake.me/)以查看其外观示例。您只需将 drush 脚本安装到您​​的服务器[http://drupal.org/project/drush](http://drupal.org/project/drush)。稍后您可以构建自己的 .make 文件并为不同的数据库运行它。

# python - 从 Python 中的包中清除导入

> ID：15508531
> 
> 赞同：0
> 
> 时间：2013-03-19T19:19:00.430
> 
> 标签：python, import, module, python-3.x, package

我有以下项目结构：

```
project
|----app.py
|----package
     |---__init__.py
     |---module.py
     |---module2.py
     |---module3.py
     |---.... 
```

我的`__init__.py`文件目前是空的。在 module.py 我有一个类的定义：

```
class UsefulClass:
    ... 
```

在其他模块中也有类似的定义。我的 app.py 看起来像这样：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

from package.module import UsefulClass
from package.module2 import UsefulClass2
...

usefulclass = UsefulClass()
usefulclass2 = UsefulClass2()
.... 
```

我的问题是：如何替换这些`from package.module... import UsefulClass`语句？即使是现在，我也只定义了 4 个模块，而且这个导入开始看起来很丑陋。我可以将它们导入`__init__.py`文件然后只使用`import package`in`app.py`吗？我已经尝试过了，它给了我一个错误。

我正在寻找一个干净优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:26:51.353

# joomla - Joomla 文章管理器中的任何操作显示空白页

> ID：15508534
> 
> 赞同：0
> 
> 时间：2013-03-19T19:19:12.197
> 
> 标签：joomla

我在 Joomla 文章管理器中遇到了一个奇怪的问题。

页面上的任何操作（添加、编辑、..）都显示为空白页面。例如，如果我单击“新建”按钮，它会将页面重定向到 `administrator/index.php?option=com_content&view=article&layout=edit`完全是空白页面的页面。有什么建议/想法吗？

我已经尝试重新上传组件/com_content，禁用所见即所得编辑器等 :(

# sql - 我怎样才能打破这个相关的 sql->oracle 语句？

> ID：15508538
> 
> 赞同：0
> 
> 时间：2013-03-19T19:19:16.483
> 
> 标签：sql, oracle, correlated-subquery

```
UPDATE t1
   SET t1.language_id = (SELECT distinct(CASE WHEN NETWORK.nid = 11 
                                  THEN 10
                                  ELSE 7
                              END)
                       FROM PROFILE,
                            NETWORK
                      WHERE PROFILE.STATUS IN ('A','U','S','H','I')
                        AND PROFILE.mid = t1.mid
                        AND NETWORK.mid = t1.mid
                        AND t1.is_deleted = 'N')

   AND EXISTS( SELECT 1

              FROM PROFILE,
                   NETWORK
             WHERE PROFILE.STATUS IN ('A','U','S','H','I')
               AND PROFILE.mid = t1.mid
               AND NETWORK.mid = t1.mid
               AND t1.is_deleted = 'N'); 
```

这是慢下来的方式。对使用语句使用不同的更新？为 10 进行一次更新，为 7 进行一次更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:34:18.757

在您对表数据库中的每条记录的查询中，对表`t1`执行单独的查询。实际上，您只需要扫描此表一次。`NETWORK``PROFILE`

我建议你使用 MERGE 子句：

```
merge into t1
using (
  select
    network.mid,
    decode(network.nid, 11, 10, 7) language_id,
  from
    profile,
    network
  where
    profile.status in ('A','U','S','H','I')
    and
    network.mid = profile.mid
) update_set 
on
  t1.mid = update_set.mid 
  and
  t1.is_deleted = 'N'
when matched
  then update set t1.language_id = update_set.language_id
; 
```

有关更多信息，请查看[Oracle 文档中](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm)的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:03:55.377

检查 MID 列的索引和统计信息（我假设选择性很高）。检查执行计划。检查 PQ/PDML。如果您的 MID 在所有方面都是 UNIQUE 列，则可以将其更改为：

```
UPDATE t1
SET t1.language_id = (SELECT distinct(CASE WHEN NETWORK.nid = 11 
                              THEN 10
                              ELSE 7
                          END)
                   FROM NETWORK
                   where NETWORK.mid = t1.mid
                   )
WHERE EXIST ( SELECT 1 from NETWORK where NETWORK.mid = t1.mid )
AND EXISTS( SELECT 1 FROM PROFILE where PROFILE.STATUS IN ('A','U','S','H','I')
                    AND PROFILE.mid = t1.mid )
AND t1.is_deleted = 'N' 
```

# php - PHP opendir() 在 IIS 中失败

> ID：15508547
> 
> 赞同：0
> 
> 时间：2013-03-19T19:19:35.070
> 
> 标签：php, windows, iis, opendir

我有一个 PHP 脚本试图打开目录“C:\Users\userA\Desktop”。但是， opendir() 调用返回 false。这是我的代码：

```
$path = 'C:\Users\userA\Desktop';
var_dump (is_dir($path)); //prints TRUE
var_dump (is_readable($path)); //prints TRUE
var_dump (is_writable($path)); //prints TRUE
var_dump (open_dir($path)); //prints FALSE 
```

当我从命令行运行上述内容时，一切都是正确的，并且按预期工作。当我通过 Web 浏览器的 Ajax 调用运行它时，opendir 失败。这是在 IIS 7.5 中运行的。我已将该目录的权限设置为“每个人”的完全权限。然而，它似乎仍然是某种权限问题。我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:22:14.463

我找到了解决我的问题的方法。我已将权限添加到“C:\Users\userA\Desktop”。我需要再上一个目录。我将 IIS_IUSRS 权限授予“C:\Users\userA”，它解决了我的问题。

# cookies - jstree cookie 未设置

> ID：15508551
> 
> 赞同：2
> 
> 时间：2013-03-19T19:19:46.657
> 
> 标签：cookies, jstree

我在我的网络项目中使用 Jstree 并添加“cookies”插件。

它几乎没有问题

首先，当我关闭一个节点时，cookie 不会记住它。而我刷新页面后，关闭的节点又会被打开。如何让cookie知道我关闭了一个节点？

其次，有没有办法仅使用 Jstree cookie 插件来取消设置 cookie？如果没有，我可以用 Jquery.cookie 插件来做吗？如何？

第三，我可以访问和更改cookies（jstree！）的内容吗？喜欢手动设置 selected_node 或 opens_node？

最后，Jsree 有一个名为 initial_select 的属性。基本上，由于 cookie，它不再有用。有什么办法让他们都工作吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:47:33.457

经过一些研究，我认为这个问题应该得到适当的结束。

基本上，没有用于取消设置 jstree cookie 的内置方法。所以如果你真的想取消它，唯一的办法就是自己维护cookies。

您需要注意几个 cookie 集合。

“加载”和“打开”。这两个 cookie 字段存储 jstree 在每次刷新或重定向后重置树所需的信息。因此，如果您能够从这些字段中删除或添加节点，那么您就可以自己维护 cookie。

还有一个问题你应该知道，如果一个节点从“加载”字段中删除，但它的任何子节点仍然存在，那么 jstree 会自动将此父节点添加回列表。所以你必须处理这种父子关系。

基本上，我认为取消设置cookie并不是为了达到目标。

希望这篇文章有所帮助。

# jquery - 滚动时如何定位框

> ID：15508558
> 
> 赞同：0
> 
> 时间：2013-03-19T19:19:58.267
> 
> 标签：jquery, css

如何定位绿色框，以便在使用 jQuery 滚动超过其高度时，框的底部与可用空间的底部对齐。

```
<div class="content">
    <div class="left">
    </div>
    <div class="right">
    </div>
</div>

.content { width: 400px; position: relative; height: 200px; overflow-y: auto; overflow-x: hidden; border: 1px solid gray; }
.left { position: absolute; left: 0; width: 200px; background: red; height: 400px; }
.right { position: absolute; right: 0; width: 200px; height: 100px; background: green; }

$('.content').scroll(function(){
    //how to position green box so the bottom of the box
    //is aligned to bottom of space available
}); 
```

[http://jsfiddle.net/chovy/ryFGK/4/](http://jsfiddle.net/chovy/ryFGK/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:30:02.047

Something like this?

[http://jsfiddle.net/ryFGK/5/](http://jsfiddle.net/ryFGK/5/)

```
<div class="content">
    <div class="left">
    </div>
    <div class="right">
    </div>
</div>

$('.content').bind('scroll', function(e) {
    var content = $(this);
    var scrollTop = content.scrollTop();
    var green = $('.right');
    console.log('Top: ' + green.position().top + ', ScrollTop: ' + scrollTop);
    if (scrollTop > green.height()) {
        green.css({top: scrollTop + content.height() - green.height()});
    } else {
        green.css({top: 0});
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:58:46.987

[http://jsfiddle.net/sujesharukil/ryFGK/18/](http://jsfiddle.net/sujesharukil/ryFGK/18/)

我基本上设置了一个初始css

```
bottom: 0 
```

在绿色盒子上。

检查滚动顶部，如果它大于绿色框的高度，那么我将其捕捉到底部，当向上滚动时，else 条件触发并将其捕捉回底部。

# ember.js - Ember.js 的教程和示例？

> ID：15508560
> 
> 赞同：0
> 
> 时间：2013-03-19T19:20:06.527
> 
> 标签：ember.js, handlebars.js, javascript-framework

我是一个尝试学习 ember 的新手，但我发现他们网站上的示例太复杂且难以理解？有没有人知道一本书或网页，我可以在其中找到关于 ember.js 和 handlebar.js 的优秀教程和深入了解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:36:22.163

只需 12 美元，您就无法击败 peepcode 截屏视频：[https ://peepcode.com/products/emberjs](https://peepcode.com/products/emberjs)

更新：请参阅[如何构建 Ember.js 应用程序](https://stackoverflow.com/questions/14204674/how-to-architect-an-ember-js-application/15676487#15676487)

# video-streaming - 在 video.js 中禁用 Flash

> ID：15508563
> 
> 赞同：3
> 
> 时间：2013-03-19T19:20:28.397
> 
> 标签：video-streaming, html5-video, video.js

如何防止 video.js 不再使用 flash ？我的意思是我只需要它在浏览器支持 HTML5 的情况下运行。

我使用 Drupal 的事实不应该是配置 javascript 库的问题，对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:56:37.633

覆盖 techOrder 以仅包含 HTML5。将此添加到 video 标签的 data-setup 属性中：

```
<video … data-setup='{"techOrder": ["html5"]}'> 
```

# mysql - Mysql Join 查询优化

> ID：15508566
> 
> 赞同：1
> 
> 时间：2013-03-19T19:20:47.117
> 
> 标签：mysql, sql, database, performance, optimization

您好，我正在尝试使用此查询运行此 select 语句，运行时间超过 2 小时。我已将所有索引设置为正确。但它仍然需要很长时间，是否有我遗漏的东西或更有效的方式将表连接在一起来加速这个查询？

我为所有连接在一起的项目设置了索引，它们的长度和数据类型相同。

```
SELECT 
    p.sap_article_id, 
    p.numeric_line_code, 
    p.uag_linecode,  
    p.uag_partnum,   
    p.part_description, 
    p.jobber_price, 
    p.jobber_core, 
    p.discount1,  
    p.discount2, 
    p.uom, 
    p.product_category, 
    w.as400_warehouse,   
    w.atp_qty, 
    p.updated,  
    t.regular_discount     
FROM part p 
        LEFT JOIN tabjbmaw t ON t.accountnum        = '73050'
                            AND p.numeric_line_code = t.numeric_line_code 
                            AND p.sub_code          = t.sub_code    
        JOIN warehouse w ON w.sap_article_id = p.sap_article_id;

+----+-------------+-----------+------+--------------------------------------------------+-----------------------+---------+----------------------------------+--------+-------------+
| id | select_type | table     | type | possible_keys                                    | key                   | key_len | ref                              | rows   | Extra       |
+----+-------------+-----------+------+--------------------------------------------------+-----------------------+---------+----------------------------------+--------+-------------+
|  1 | SIMPLE      | part      | ALL  | PRIMARY,sap_article,part_sap_article_id_fk       | NULL                  | NULL    | NULL                             | 389309 |             |
|  1 | SIMPLE      | warehouse | ref  | article                                          | article               | 130     | inventory.part.sap_article_id    |      5 | Using where |
|  1 | SIMPLE      | tabjbmaw  | ref  | numeric_line_code_idx,subcode_idx,accountnum_idx | numeric_line_code_idx | 5       | inventory.part.numeric_line_code |     19 |             |
+----+-------------+-----------+------+--------------------------------------------------+-----------------------+---------+----------------------------------+--------+-------------+ 
```

谢谢您的帮助

```
+-----------------------------+--------------+------+-----+---------------------+-----------------------------+
| Field                       | Type         | Null | Key | Default             | Extra                       |
+-----------------------------+--------------+------+-----+---------------------+-----------------------------+
| sap_article_id              | varchar(24)  | NO   | PRI |                     |                             |
| sap_brand_id                | varchar(20)  | NO   |     | NULL                |                             |
| uag_partnum                 | varchar(20)  | NO   | MUL | NULL                |                             |
| uag_linecode                | varchar(5)   | NO   | MUL | NULL                |                             |
| cag_partnum                 | varchar(20)  | NO   | MUL | NULL                |                             |
| cag_linecode                | varchar(5)   | NO   |     | NULL                |                             |
| product_category_legacy     | varchar(20)  | NO   |     | NULL                |                             |
| part_description            | varchar(128) | NO   |     | NULL                |                             |
| abc_indicator               | varchar(8)   | NO   |     | NULL                |                             |
| pack_code                   | varchar(8)   | NO   |     | NULL                |                             |
| case_qty                    | int(11)      | NO   |     | NULL                |                             |
| per_car_qty                 | int(11)      | NO   |     | NULL                |                             |
| uom                         | varchar(6)   | NO   |     | NULL                |                             |
| upc_code                    | varchar(128) | NO   |     | NULL                |                             |
| jobber_price                | float(14,4)  | YES  |     | NULL                |                             |
| jobber_core                 | float(14,4)  | YES  |     | NULL                |                             |
| date_last_price_change      | timestamp    | NO   |     | CURRENT_TIMESTAMP   | on update CURRENT_TIMESTAMP |
| weight                      | float(14,4)  | YES  |     | NULL                |                             |
| weight_unit                 | varchar(6)   | NO   |     | NULL                |                             |
| dimension_type              | varchar(6)   | NO   |     | NULL                |                             |
| length                      | float(14,4)  | YES  |     | NULL                |                             |
| width                       | float(14,4)  | YES  |     | NULL                |                             |
| height                      | float(14,4)  | YES  |     | NULL                |                             |
| updated                     | tinyint(1)   | NO   |     | 0                   |                             |
| superseded_sap_article_id   | varchar(24)  | YES  |     | NULL                |                             |
| last_updated                | timestamp    | NO   |     | 0000-00-00 00:00:00 |                             |
| hour_updated                | int(11)      | YES  |     | NULL                |                             |
| discount1                   | float        | YES  |     | NULL                |                             |
| discount2                   | float        | YES  |     | NULL                |                             |
| product_category            | varchar(3)   | YES  |     | NULL                |                             |
| superseded_part_number      | varchar(20)  | YES  |     | NULL                |                             |
| sub_code                    | varchar(3)   | YES  | MUL | NULL                |                             |
| date_effective_price_change | date         | YES  |     | NULL                |                             |
| numeric_line_code           | varchar(3)   | YES  | MUL | NULL                |                             |
| list                        | float        | YES  |     | NULL                |                             |
+-----------------------------+--------------+------+-----+---------------------+-----------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:38:36.423

> 我为所有连接在一起的项目设置了索引

是的，但我从索引的名称猜测每个索引只有一个字段。

让我们看一下描述中的几列。

```
| table     | possible_keys                                    | key                   
+-----------+--------------------------------------------------+----------------
| part      | PRIMARY,sap_article,part_sap_article_id_fk       | NULL                  
| warehouse | article                                          | article               
| tabjbmaw  | numeric_line_code_idx,subcode_idx,accountnum_idx | numeric_line_code_idx 
```

它可以为 numeric_line_code、subcode 和 accountnum 使用索引，但只有三个索引，每个索引都有一个字段，没有索引包含所有字段。您正在让优化器选择一个字段索引之一，而不是提供一个可用于所有三个字段的索引。

使用三个字段 numeric_line_code、subcode 和 accountnum 在表 tabjbmaw 上添加一个索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:47:11.583

您可以尝试将左连接作为子选择放入 SELECT 部分。这“可能”会加快速度。

像这样：

```
SELECT 
    p.sap_article_id, 
    p.numeric_line_code, 
    p.uag_linecode,  
    p.uag_partnum,   
    p.part_description, 
    p.jobber_price, 
    p.jobber_core, 
    p.discount1,  
    p.discount2, 
    p.uom, 
    p.product_category, 
    w.as400_warehouse,   
    w.atp_qty, 
    p.updated,  
    (SELECT t.regular_discount FROM tabjbmaw t WHERE t.accountnum = '73050' AND p.numeric_line_code = t.numeric_line_code AND p.sub_code = t.sub_code LIMIT 1)    
FROM 
    part p 
    JOIN warehouse w ON w.sap_article_id = p.sap_article_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:38:09.233

扩展@Sebas 答案，您应该首先选择 tabjbmaw：

```
SELECT 
    p.sap_article_id, 
    p.numeric_line_code, 
    p.uag_linecode,  
    p.uag_partnum,   
    p.part_description, 
    p.jobber_price, 
    p.jobber_core, 
    p.discount1,  
    p.discount2, 
    p.uom, 
    p.product_category, 
    w.as400_warehouse,   
    w.atp_qty, 
    p.updated,  
    t.regular_discount     
FROM tabjbmaw t
        LEFT JOIN parts p ON p.numeric_line_code = t.numeric_line_code 
                             AND p.sub_code       = t.sub_code    
        JOIN warehouse w ON w.sap_article_id = p.sap_article_id
WHERE t.accountnum = '73050'
; 
```

# css - twitter-bootstrap 响应式菜单中的故障行为

> ID：15508568
> 
> 赞同：2
> 
> 时间：2013-03-19T19:20:57.200
> 
> 标签：css, twitter-bootstrap

我试图让 tb 网站上一个示例的菜单栏始终保持恒定的高度，但我遇到了一些奇怪的行为。

在以下演示中：

[http://twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)

如果您将浏览器的大小调整为大约 1070/1080 px 宽度，则该栏会跳到一个难看的高度，然后又向下。就好像在响应式 css 中某处有一个媒体查询没有考虑到浏览器宽度的 ~2px 范围。我将此用作我的应用程序的基线，并且非常感谢有关如何修复此问题的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:34:35.760

问题来自某些页面特定样式（来自fluid.html）：

```
@media (max-width: 980px) {
    .navbar-text.pull-right {
        float: none;
        padding-left: 5px;
        padding-right: 5px;
    }
} 
```

与一些外部 CSS（来自 bootstrap-responsive.css）：

```
@media (max-width: 979px) {
    .nav-collapse .nav {
        float: none;
        margin: 0 0 10px;
    }
} 
```

如您所见，这些媒体查询之间存在 1px 的差异。如果你要编辑第一个也使用 979px，事情就不会再跳跃了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:29:44.540

`.navbar-text.pull-right`在去`{float: none}`之前`.nav-collapse`去那里有一个地方去`{height: 0}`。我会去找那个。

更新：它在页面样式中：

```
 @media (max-width: 980px) {
    /* Enable use of floated navbar text */
    .navbar-text.pull-right {
      float: none;
      padding-left: 5px;
      padding-right: 5px;
    }
  } 
```

# node.js - 在 Express 的自定义错误处理程序中获取堆栈跟踪？

> ID：15508572
> 
> 赞同：3
> 
> 时间：2013-03-19T19:21:02.767
> 
> 标签：node.js, express

我在 Express 中使用自定义错误页面，如此[处](http://www.hacksparrow.com/express-js-custom-error-pages-404-and-500.html)所述。

但是当我这样做时，我只看到错误*消息*。我想获取与默认 Express 错误处理程序（堆栈跟踪等）中显示的相同信息，以便我可以：

1.  将其记录到控制台（如果我可以为此保留默认设置，我会很高兴）。
2.  在错误页面上显示它，但仅适用于 localhost。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T09:00:19.160

这是@generalhenry 回答的修改版本。您可以访问堆栈跟踪，`err.stack`以便您可以将它传递到您的“500”视图并对其进行一些花哨的 css 样式。

```
app.use(function(err, req, res, next) {
   if (err instanceof NotFound) {
       res.render('errors/404');
   } else {
       res.render('errors/500', {error: err, stack: err.stack});
   }
});

function NotFound() {
   this.name = "NotFound";
   Error.call(this, msg);
   Error.captureStackTrace(this, arguments.callee);
}

// below all route handlers
// If all fails, hit em with the 404
app.all('*', function(req, res){
   throw new NotFound;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:23:18.020

只需使用提供给中间件的错误

```
 // Handle 500
  app.use(function(error, req, res, next) {
     console.error(error);
     if (ISLOCALHOST()) {
       res.json(error, 500);
     } else {
       res.send('500: Internal Server Error', 500);
     }
  }); 
```

# exc-bad-access - 每次网络更改状态时可达性崩溃

> ID：15508573
> 
> 赞同：0
> 
> 时间：2013-03-19T19:21:07.783
> 
> 标签：exc-bad-access, nsnotificationcenter, reachability

每次网络状态从无网络更改为网络时，我的应用程序都会崩溃，反之亦然，在以下行中使用 EXC_BAD_ACCESS：

```
 dispatch_async(dispatch_get_main_queue(), ^{
        [[NSNotificationCenter defaultCenter] postNotificationName:kReachabilityChangedNotification 
                                                            object:self];
    }); 
```

我通过应用程序委托调用：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkNetworkStatus:) name:kReachabilityChangedNotification object:nil];

    internetReach = [Reachability reachabilityForInternetConnection];
    [internetReach startNotifier];
    [self checkNetworkStatus:nil]; 
```

和

```
-(void) checkNetworkStatus:(NSNotification *)notice
{
    // called after network status changes
    NetworkStatus internetStatus = [internetReach currentReachabilityStatus];
    switch (internetStatus)
    {
        case NotReachable:
        {
            NSLog(@"The internet is down.");
            break;
        }
        case ReachableViaWiFi:
        {
            NSLog(@"The internet is working via WIFI.");
            break;
        }
        case ReachableViaWWAN:
        {
            NSLog(@"The internet is working via WWAN.");
            break;
        }
    }

} 
```

有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:19:11.163

这可能会对您有所帮助：[可达性类崩溃程序 - 不知道为什么](https://stackoverflow.com/questions/15554135/reachability-classes-crashing-program-not-sure-why)

我在将不同线程上的可达性对象重新分配到创建它们的线程上时遇到了问题。我看到你在主队列上分配可达性，你也在那里取消分配吗？

# javascript - Mootools，搜索dom以查看是否存在类，我是否应该担心每页多次执行

> ID：15508574
> 
> 赞同：2
> 
> 时间：2013-03-19T19:21:08.677
> 
> 标签：javascript, dom, mootools, domdocument

我使用 Mootools，我有很多实用功能和在很多页面上发生的东西。我将这些函数移动到一个主 JS 文件中，因此我不需要记住向每个页面添加单独的方面，这是我想象的一种正常的开发模式。

现在，其中一些实用功能仅在某些元素位于页面上时才相关，并且确实只会起作用。例如，我有一个函数可以检查关闭图标并向它们添加相关事件；

```
$each($$('.closethis'), function(el){ do stuff like add events } 
```

当页面为关闭事件、悬停、切换、警报各种东西以及每次迭代某些类的 dom 时，这种事情发生了很多次。

我应该担心这个吗..？这是'草率'..？有没有更好的方法/模式....？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:40:57.720

据我所知，每个[现代浏览器](http://caniuse.com/getelementsbyclassname)都有一个内置函数`getElementsByClassName`，称为 Mootools 在查询`'.closethis'`. 它[超级快](http://ejohn.org/blog/getelementsbyclassname-speed-comparison/)，所以我认为您不必担心在页面初始化时运行几次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T18:36:06.840

直接回答您：是的，在我看来，这很草率；但我认为你不必担心。

关于功能，它不会成为问题，而是“良好的风格”。也许您可以编写更多特定于任务的 JavaScript。为某些任务或功能编写类。您会惊讶地发现，您重用类或通用源代码的频率以及在开发网页时它为您节省了多少时间。我建议你（仔细）阅读[这个](http://mootools.net/docs/core/Class/Class)和[这个](http://www.mootorial.com/wiki/mootorial/09-howtowriteamootoolsclass)并尝试从中受益。因为这是您一直在询问的“更好的方式/模式”。

干杯和快乐的编码！=)

# javascript - 为什么将“margin：0 auto”添加到滑块菜单会破坏它？

> ID：15508581
> 
> 赞同：6
> 
> 时间：2013-03-19T19:21:23.853
> 
> 标签：javascript, jquery, css, slider, css-position

我正在创建一个滑块菜单，一切正常，直到我尝试将其居中`margin: 0 auto`；

我强烈认为问题来自相对定位和`.animate`我正在使用的 jQuery 函数。所以我正在寻找另一种方法来达到同样的结果！

这是一个问题

[http://jsfiddle.net/jwsh7/](http://jsfiddle.net/jwsh7/)（图片不能包含所以我在所有东西上都加了边框，问题出在绿色边框的 div 上）

删除`margin: 0 auto;`以查看它是否按我的意愿工作。

```
body {
  margin: 0;
  padding: 0;
}

#content {
  width: 625px;
  border: 1px solid red;
}

#content div.slider {
  position: relative;
  width: 50px;
  height: 100px;
  background-image: url(images/rond.png);
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
  z-index: 2;
  top: 110px;
  left: 25px;
  border: 1px solid red;
}

.menu {
  color: #00C;
  font-size: 18px;
  font-family: "OnomatoShark!";
  position: absolute;
  width: 50px;
  height: 100px;
  background-image: url(images/ligne_barre.png);
  background-position: center;
  background-repeat: no-repeat;
  cursor: pointer;
  border: 1px solid red;
}

.menu p {
  width: 150px;
  float: left;
  position: absolute;
  top: -25px;
  left: 10px;
}

.menu p:hover {
  width: 150px;
  float: left;
  position: absolute;
  top: -25px;
  color: red;
}

#barre {
  position: relative;
  width: 600px;
  height: 28px;
  background-image: url(images/ligne.png);
  background-position: center;
  list-style-type: none;
  top: 25px;
  padding: 0;
  border: 1px solid red;
}

#sousMenu1 {
  margin: 0;
  padding: 0;
  margin-top: 90px;
  background-image: url(images/sousmenu.png);
  background-position: left;
  background-repeat: no-repeat;
  overflow: hidden;
  float: left;
  height: 150px;
  display: none;
  text-align: left;
}

#sousMenu2 {
  margin: 0;
  padding: 0;
  margin-top: 90px;
  margin-left: 10px;
  background-image: url(images/sousmenu.png);
  background-position: left;
  background-repeat: no-repeat;
  overflow: hidden;
  float: left;
  height: 150px;
  display: none;
}

#sousMenu3 {
  margin: 0;
  padding: 0;
  margin-top: 90px;
  margin-left: 10px;
  background-image: url(images/sousmenu.png);
  background-position: left;
  background-repeat: no-repeat;
  height: 150px;
  width: 250px;
  overflow: hidden;
  float: left;
  display: none;
}

#sousMenu4 {
  margin: 0;
  padding: 0;
  margin-top: 90px;
  margin-left: 10px;
  background-image: url(images/sousmenu.png);
  background-position: left;
  background-repeat: no-repeat;
  height: 150px;
  overflow: hidden;
  float: left;
  display: none;
}

ol {
  text-align: left;
  padding-top: 20px;
}

ol a {
  text-decoration: none;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="content">

  <div class='slider'></div>

  <ul id="barre">
    <li class="menu" id="option1">
      <p>Accueil</p>
    </li>

    <li class="menu" id="option2">
      <p>Animation</p>
      <ul class="sous-menu" id="sousMenu1">
        <ol><a href="#">Histoire</a></ol>
        <ol><a href="http://google.com">Avancées technologiques</a></ol>
      </ul>
    </li>

    <li class="menu" id="option3">
      <p>Techniques</p>
      <ul class="sous-menu" id="sousMenu2">
        <ol><a href="#">Rotoscopie</a></ol>
        <ol><a href="#">Trait</a></ol>
      </ul>

    </li>

    <li class="menu" id="option4">
      <p>Fondements</p>
      <ul class="sous-menu" id="sousMenu3">
        <ol><a href="#">Processus de production</a></ol>
        <ol><a href="#">Interpolation</a></ol>
        <ol><a href="#">Guide de mouvement</a></ol>
      </ul>
    </li>

    <li class="menu" id="option5">
      <p>Principes</p>
    </li>

    <li class="menu" id="option6">
      <p>Effets Avancés</p>
      <ul class="sous-menu" id="sousMenu4">
        <ol><a href="#">Rotation</a></ol>
      </ul>
    </li>
  </ul>

</div>
<script type="text/javascript">
  $(document).ready(function() {

    function sousmenuCache() {

      $("#sousMenu1").hide("fast");
      $("#sousMenu2").hide("fast");
      $("#sousMenu3").hide("fast");
      $("#sousMenu4").hide("fast");

    }

    $("#option1").click(function() {
      sousmenuCache();
    });

    $("#option2").click(function() {
      sousmenuCache();
      $("#sousMenu1").delay(300).show("slow");
    });

    $("#option3").click(function() {
      sousmenuCache();
      $("#sousMenu2").delay(300).show("slow");
    });

    $("#option4").click(function() {
      sousmenuCache();
      $("#sousMenu3").delay(300).show("slow");
    });

    $("#option5").click(function() {
      sousmenuCache();
    });

    $("#option6").click(function() {
      sousmenuCache();
      $("#sousMenu4").delay(300).show("slow");
    });

    // Centrer la barre dans le container

    var middleOption = ($("#barre").height() - ($("#option1").height() - $("#barre").height()));

    // Création des options du menu
    var leftOption = -70;
    $("#content #barre li").each(function() {
      $(this).css('top', '' + middleOption + 'px');
      $(this).css('left', '' + (leftOption + 90) + 'px');

      leftOption += 90;
    });

    $(function() {

      $(".menu").click(function() {
        var middleSlider = (($(".slider").width() - $("#option1").width()) * 0.5);
        $(".slider").animate({
          left: ($(this).offset().left - middleSlider)
        });

      });
    });
    TweenMax.set("#content", {
      x: 300
    });
  });
</script>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:33:22.193

当您居中时，`#content`您必须在制作动画时考虑额外的偏移量。很难解释，看看这个更新的小提琴：

[http://jsfiddle.net/jwsh7/1/](http://jsfiddle.net/jwsh7/1/)

```
var fix = ($(document).width() - $('#content').width()) * .5; // <-- need to subtract this

$(".menu").click(function () {
    var middleSlider = ($(".slider").width() - $("#option1").width()) * 0.5;
    $(".slider").animate({
        left: ($(this).offset().left - middleSlider - fix)
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:27:01.700

问题是您同时使用边距和位置来定位幻灯片，并且它们是冲突的。要使其死点，请使用 -0.5 * 滑块宽度的 margin-left，然后 left:50%;

```
#content div.slider {   
    position:relative;
    width: 50px;
    height: 100px;
    background-image:url(images/rond.png);
    background-repeat:no-repeat;
    background-position:center;
    background-size:cover;
    z-index: 2; 
    top: 110px;
    left: 50%;
    border: 1px solid green;
    margin-left:-25px;
} 
```

# php - 输出前通过php扫描和编辑img宽度高度

> ID：15508583
> 
> 赞同：0
> 
> 时间：2013-03-19T19:21:35.973
> 
> 标签：php, image

这可能是一个时髦的问题，但我想知道是否有人能想到一种方法如何获取一大块 html，扫描它的`<img>`标签，如果标签没有宽度 + 高度值，则应用它`list($width, $height, $type, $attr);`？

更详细地说，我有一个 php 页面，其中包含另一个仅包含 html 的页面。我希望在输出到浏览器之前更改 html。

这是我正在查看的简化版本：

```
<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
<div id="content">
<?php 
include_once("client-contributed-text-and-images.php");
?>
</div>
</body>
</html> 
```

在下面的一些输入之后，我想出了以下内容：

```
<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
<div id="content">
<?php
$dom = new DOMDocument();
$dom->loadHTMLFile("client-contributed-text-and-images.php");

foreach ($dom->getElementsByTagName('img') as $item) {

    $item->setAttribute('width', '100');
    echo $dom->saveHTML();
    exit;
}
?>
</div>
</body>
</html> 
```

问题是它在中间生成了一个完整的html4文件，而只更改了第一个img标签，之后貌似没有输出代码：

```
<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
<div id="content">
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><img src="img1.jpg" width="100"><h1>header</h1>
<p>some text</p>
<a href="http://google.com">some link</a>
<img src="img2.jpg"></body></html> 
```

所以我换档并尝试 fopen() 并让它部分工作：

```
<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
<div id="content">
<?php
$root = realpath($_SERVER['DOCUMENT_ROOT']);
$file = $root."/client-contributed-text-and-images.php";
$f = fopen($file, 'r');
$contents = fread($f, filesize($file));
fclose($f);

$new_contents = str_replace("<img ", "<img width='100' height='100' ", $contents); 
echo $new_contents;
?>
</div>
</body>
</html> 
```

这给了：

```
<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
<div id="content">
<img width='100' height='100' src="img1.jpg">
<h1>header</h1>
<p>some text</p>
<a href="http://google.com">some link</a>
<img width='100' height='100' src="img2.jpg"></div>
</body>
</html> 
```

现在我只需要一些帮助来弄清楚如何实现`list($width, $height, $type, $attr);`包含正确的高度和高度（显然只有在它尚未设置时）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:26:39.833

是的，这是完全可能的。

1.  [使用 DOM 解析器来加载您的 HTML](http://php.net/manual/en/domdocument.loadhtml.php)并找到您的图像标签。
2.  [使用 cURL 下载图像](http://php.net/manual/en/curl.examples-basic.php)（如果您在本地还没有图像）
3.  [使用 GD 获取图像大小](http://php.net/manual/en/function.getimagesize.php)
4.  使用该[DOMDocument 来修改 HTML](https://stackoverflow.com/a/11387770/362536)
5.  [输出修改后的 HTML](http://php.net/manual/en/domdocument.savehtml.php)。

请注意，所有这些都需要很长时间的处理时间。这可能不值得。至少，缓存结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:34:10.140

你可以试试

```
$url = 'http://yahoo.com';
$dom = new DOMDocument();
@$dom->loadHTMLFile($url);

$imgs = $dom->getElementsByTagName("img");

foreach ( $imgs as $img ) {
    $attrs = array();
    // only load large images
    if ((int) $img->getAttribute("height") < 80)
        continue;

    for($i = 0; $i < $img->attributes->length; ++ $i) {
        $node = $img->attributes->item($i);
        $attrs[$node->nodeName] = $node->nodeValue;
    }
    print_r($attrs);
} 
```

输出

```
Array
(
    [src] => http://l3.yimg.com/nn/fp/rsz/031913/images/smush/ucf-thwarted_635x250_1363714489.jpg
    [class] => fptoday-img
    [alt] => Quick thinking helped thwart UCF massacre plan (AP)
    [title] => Quick thinking helped thwart UCF massacre plan (AP)
    [width] => 635
    [height] => 250
)
Array
(
    [src] => http://l.yimg.com/os/mit/media/m/base/images/transparent-95031.png
    [style] => background-image:url('http://l2.yimg.com/ts/api/res/1.2/8hS1Q3v9rmaW8yI0eXEPHw--/YXBwaWQ9eWhvbWVydW47cT04NTtzbT0xO3c9MjUwO2g9MTU5/http://media.zenfs.com/en_us/News/Reuters/2013-03-19T120925Z_1_CBRE92I0XS100_RTROPTP_2_USA-SHOOTING-OHIO.JPG');
    [width] => 129
    [height] => 82
    [alt] => 
    [title] => 
    [class] => lzbg
)
Array
(
    [src] => http://l.yimg.com/os/mit/media/m/base/images/transparent-95031.png
    [style] => background-image:url('http://l3.yimg.com/ts/api/res/1.2/wcwLlp6sGVdOT7WXfkGEkQ--/YXBwaWQ9eWhvbWVydW47cT04NTtzbT0xO3c9MTg2O2g9MjUw/http://l.yimg.com/os/publish-images/lifestyles/2013-03-19/d9f10733-ee09-4e1f-a363-e3b9cd66078f_garygoldsmith.jpg');
    [width] => 82
    [height] => 110
    [alt] => 
    [title] => 
    [class] => lzbg
)

 .......... 
```

# qt5 - 在 Visual Studio 2012 中编译时 QT 5.0.1 崩溃

> ID：15508588
> 
> 赞同：0
> 
> 时间：2013-03-19T19:21:53.650
> 
> 标签：qt5

我在 Visual Studio 2012 中与 Qt 插件一起编译基本 Qt 应用程序时遇到了一些问题。我刚刚按照 Qt 网站和这个板上的描述自己编译了 Qt 5.0.1 x64，然后我下载了 Qt Visual Studio 插件并安装了它。在 VS 中，我打开了一个新的 Qt 应用程序并尝试编译它，但它说“无法打开致命错误 lnk1104 qt5cored5.lib”所以我查看了 lib 文件夹，只能找到一个 qt5cored.lib。所以我复制了它，并将其重命名为 qt5cored5.lib。在下次尝试编译我的项目后，VS 说：“链接：致命错误 LNK1104：Datei “Qt5Widgetsd5.lib”kann nicht geöffnet werden。这意味着 VS 现在可以找到 qt5cored5.lib 但找不到 qt5widgets5.lib。

有什么想法为什么我的 lib 文件夹中没有正确的库，或者为什么 VS 要求提供我没有的库？编译 Qt 时有什么我可能做错的吗？

希望可以有人帮帮我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:56:26.757

我会重新从头开始 Qt 编译过程，看看你是否错过了一个步骤或什么。如果您能发现问题，也许先通读这些步骤，然后清理并重做。

如果您已经求助于手动复制库，那么您很可能忘记了一些事情，例如实际安装已编译的 Qt 库......

这是[一个关于主题的论坛讨论](http://qt-project.org/forums/viewthread/13629)的链接，这里是构建 Qt5[的 wiki 指南的链接。](http://qt-project.org/wiki/Building_Qt_5_from_Git)

# java - Java 从根目录搜索具有相同标签的节点的所有路径

> ID：15508589
> 
> 赞同：0
> 
> 时间：2013-03-19T19:22:02.507
> 
> 标签：java, tree, nodes

我正在尝试编写返回具有相同标签的所有节点的路径的 JAVA 代码。

在[链接中指定的图像中](http://www.hypertextbookshop.com/dataminingbook/public_version/artifacts/images/pictures/chpt2interSec6Fig1.jpg)。我应该得到标签 C 的以下 o/p

**A->B**

**一种**

作为输出。

我知道所有可能的标签。假设标签的范围可以从 A 到 J。

树的节点类是：

```
class Node{
 String label;
 int count;
 List<Node> children;

 public int hashCode() {
    return label.hashCode();
 }

 public boolean equals(Object obj) {
    Node other = (Node)obj;
    return other.label.equals(label);
 }
} 
```

我正在尝试类似的东西

```
for(each label)
 start from root
 search for all possible label location
    print path for each label location 
```

但无法理解如何编写代码。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:41:27.587

试试这个：

```
public List<List<String>> findPaths(String label) {
    List<List<String>> result = new ArrayList<List<String>>();

    if (label.equals(this.label)) {
        result.add(new ArrayList<String>());
    }

    for (Node child : children) {
        for (List<String> subResult : child.findPaths(label)) {
            // add this.label in front
            List<String> path = new ArrayList<String>();
            path.add(this.label);
            path.addAll(subResult);
            result.add(path);
        }
    }

    return result;
} 
```

每个路径将被编码为一个`ArrayList`标签`String`。我假设每片叶子都有一个空的孩子列表。如果`children == null`在叶子中，您需要检查这一点，否则所有孩子的循环将引发`NullPointerException`.

现在，给定一些标签列表`labels`和一个根节点`root`：

```
for (String label : labels) {
    List<List<String>> paths = root.findPaths(label);
    for (List<String> path : paths) {
        printPath(path);
    }
} 
```

我相信您可以制作自己的功能`printPath(List<String> path)`来打印实际路径...

# shell - Shell脚本等待进程完成

> ID：15508591
> 
> 赞同：3
> 
> 时间：2013-03-19T19:22:07.410
> 
> 标签：shell, process

我有一个过程

```
"verifyEmail"
I run this in script as verifyEmail 0 1000 
```

现在我如何等到这个过程完成执行后再继续执行 shell 脚本中的下一条指令？verifyEmail 需要 60 多分钟才能运行

我试过了

```
while ! checkprocess "verifyEmail"; do   ##Checkprocess is a function which returns 0 or 1
sleep 60                                 ## based on process present or not
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:33:57.690

如果您正常运行该过程，则无需执行任何操作。如果你异步运行它，你只需要`wait`它：

```
verifyEmail 0 1000
echo This will print after verifyEmail is done! 
```

或者

```
verifyEmail 0 1000 &
wait $!
echo This will print after verifyEmail is done! 
```

# sql-server - SSIS 数据流任务在 Pre-excecute 阶段执行时挂起

> ID：15508594
> 
> 赞同：32
> 
> 时间：2013-03-19T19:22:13.053
> 
> 标签：sql-server, ssis, etl

我有一个正在执行的数据流任务。
流程很简单，对不同的表进行两次查询（都带有几个连接），然后通过一个公共 id 对输出进行排序和合并，为所有记录添加一个静态列，将行数保存在用户变量中以备后用使用并最终插入到另一个数据库上的表中。我们正在使用 OLE DB 源和目标。源是 MSSQL 2000，目标是 MSSQL 2012

**症状：**

*   执行时，数据流会获得通常的黄色“正在运行”图标。但是，当您双击查看数据流时，没有任何元素有任何黄色、红色或绿色标记。*   这种情况持续了很长时间，起初它持续了大约 20 分钟，之后它开始变得更长或根本没有返回。*   输出显示：
    *信息：SSIS 加载沙箱表中的 0x40043006。管道：准备执行阶段开始。
    信息：加载沙箱表中的 0x40043007，SSIS.Pipeline：预执行阶段开始。*
    在停止执行之前仅此而已。*   是的，这以前有效。是的，我们使用单个查询（在存储过程中）来执行此 ETL，但我们希望将所有步骤迁移到 SSIS。

**失败的解决方案：**

*   没有查找。*   任务流的默认缓冲区大小增加到 40485760，然后增加到 80971520。*   任务的默认缓冲区最大行数设置为 1000000。*   任务的延迟验证设置为 True。*   任务内的所有元素都设置为 Validate External Data 为 False。*   两个查询都有：
    *SET FMTONLY OFF;
    设置无计数；*
    在开始时添加。*   两个查询都将*MAXDOP*设置为 1。*   将项目的 Run 64 位运行时设置为 False。*   将目标负载从*表或视图*更改为*表或视图 - 快速加载*，没有锁定或约束。*   将每批次的行数设置为 1000 以实现快速加载。*   一些变通方法建议将任务流分成两个或多个任务流。但这是不可能的，因为我们需要做的是合并在两个源查询中找到的信息。

**额外的位：** 我真的希望有人能帮助我。我对SSIS相当陌生，这是我第一次使用它。我通常与 Pentaho 一起为我的 ETL 工作，但客户需要在 SSIS 上实现该解决方案。几天来我一直在与这个问题作斗争，我开始没有解决它的想法。

* * *

当通过命令行运行时，它也会卡住，我得到以下输出：

```
Progress: 2013-03-19 14:36:26.21
   Source: Load Sandbox Table
   Validating: 0% complete
End Progress
Progress: 2013-03-19 14:36:26.21
   Source: Load Sandbox Table
   Validating: 12% complete
End Progress
Progress: 2013-03-19 14:36:26.22
   Source: Load Sandbox Table
   Validating: 25% complete
End Progress
Progress: 2013-03-19 14:36:26.22
   Source: Load Sandbox Table
   Validating: 37% complete
End Progress
Progress: 2013-03-19 14:36:26.23
   Source: Load Sandbox Table
   Validating: 50% complete
End Progress
Progress: 2013-03-19 14:36:26.25
   Source: Load Sandbox Table
   Validating: 62% complete
End Progress
Progress: 2013-03-19 14:36:26.25
   Source: Load Sandbox Table
   Validating: 75% complete
End Progress
Progress: 2013-03-19 14:36:26.25
   Source: Load Sandbox Table
   Validating: 87% complete
End Progress
Progress: 2013-03-19 14:36:26.25
   Source: Load Sandbox Table
   Validating: 100% complete
End Progress
Warning: 2013-03-19 14:36:26.26
   Code: 0x80047076
   Source: Load Sandbox Table SSIS.Pipeline
   Description: The output column "ITEM_OID (1)" (47) on output "Merge Join Outp
ut" (28) and component "Merge Join" (11) is not subsequently used in the Data Fl
ow task. Removing this unused output column can increase Data Flow task performa
nce.
End Warning
Progress: 2013-03-19 14:36:26.27
   Source: Load Sandbox Table
   Prepare for Execute: 0% complete
End Progress
Progress: 2013-03-19 14:36:26.27
   Source: Load Sandbox Table
   Prepare for Execute: 12% complete
End Progress
Progress: 2013-03-19 14:36:26.27
   Source: Load Sandbox Table
   Prepare for Execute: 25% complete
End Progress
Progress: 2013-03-19 14:36:26.27
   Source: Load Sandbox Table
   Prepare for Execute: 37% complete
End Progress
Progress: 2013-03-19 14:36:26.27
   Source: Load Sandbox Table
   Prepare for Execute: 50% complete
End Progress
Progress: 2013-03-19 14:36:26.27
   Source: Load Sandbox Table
   Prepare for Execute: 62% complete
End Progress
Progress: 2013-03-19 14:36:26.27
   Source: Load Sandbox Table
   Prepare for Execute: 75% complete
End Progress
Progress: 2013-03-19 14:36:26.27
   Source: Load Sandbox Table
   Prepare for Execute: 87% complete
End Progress
Progress: 2013-03-19 14:36:26.27
   Source: Load Sandbox Table
   Prepare for Execute: 100% complete
End Progress
Progress: 2013-03-19 14:36:26.31
   Source: Load Sandbox Table
   Pre-Execute: 0% complete
End Progress
Progress: 2013-03-19 14:36:26.31
   Source: Load Sandbox Table
   Pre-Execute: 12% complete
End Progress
Progress: 2013-03-19 14:36:26.31
   Source: Load Sandbox Table
   Pre-Execute: 25% complete
End Progress
Progress: 2013-03-19 14:36:26.34
   Source: Load Sandbox Table
   Pre-Execute: 37% complete
End Progress
Progress: 2013-03-19 14:36:45.69
   Source: Load Sandbox Table
   Pre-Execute: 50% complete
End Progress 
```

之后它再次冻结。

**解决方案** *（在此处发布此问题是因为我在另外 5 个小时内无法回答我自己的问题，我会在允许时这样做。）*
我终于明白了。
事实证明，验证存在问题，但不仅 SSIS 元素通过了验证，如问题的第四个失败解决方案中所述。
CONNECTIONS 也得到验证并具有自己的延迟验证属性，需要将其设置为 true。
之后，整个过程的执行时间从 40 多分钟或不运行到不到一分钟（这只是更大过程的一个步骤）
我希望有同样问题的人可以轻松找到这个解决方案，因为有很多遇到这个问题的人几乎没有在线发布解决方案。

**简而言之：** 检查任务中涉及的所有元素，*包括*数据库连接，是否将延迟验证属性设置为 True。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T06:27:22.207

我终于明白了。事实证明，验证存在问题，但不仅 SSIS 元素通过了验证，如问题的第四个失败解决方案中所述。CONNECTIONS 也得到验证并具有自己的延迟验证属性，需要将其设置为 true。之后，整个过程的执行时间从 40 多分钟或没有运行到不到一分钟（这只是更大过程的一个步骤）我希望有同样问题的人可以轻松找到这个解决方案，因为有很多遇到这个问题的人几乎没有在线发布解决方案。

**简而言之：**检查任务中涉及的所有元素（包括数据库连接）是否将延迟验证属性设置为 True。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-31T15:58:51.757

我知道这很旧，但我刚刚找到了一个可能有帮助的链接。我个人使用视图只是将数据导出到外部数据库，并且数据验证需要花费大量时间来验证视图。

[https://connect.microsoft.com/SQLServer/feedback/details/258901/ssis-views-as-data-source-very-poor-performance-or-ssis-hangs](https://connect.microsoft.com/SQLServer/feedback/details/258901/ssis-views-as-data-source-very-poor-performance-or-ssis-hangs)

重要的部分是微软的回答

> Microsoft 于 2008 年 4 月 28 日下午 2:45 发布
> 
> 这是一个已知问题，也是当前设计的结果。
> 
> 有两种方法可以从 OLE DB 源中的视图中提取数据：
> 
> 1.  使用“表或视图”访问方法
>     
>     
> 2.  使用“SQL命令”访问方式，输入查询“select * from ***”
>     
>     
> 
> 两种方法生成不同的执行计划。
> 
> 前者使用的效率不如后者。
> 
> 如果您在使用第一种方法时遇到性能问题，您可以切换到第二种方法作为解决方法。
> 
> 我们还写了这个问题的博客 - > [http://blogs.msdn.com/sqlperf/archive/2007/04/29/set-up-ole-db-source-to-read-from-view-efficiently.aspx](http://blogs.msdn.com/sqlperf/archive/2007/04/29/set-up-ole-db-source-to-read-from-view-efficiently.aspx)。
> 
> 由于这是一个“按设计”项目，我们相信有一种解决方法，我们目前不会提供任何更改。因此，我们将关闭与您提交的相关案例。如果您不同意，请随时重新提交。
> 
> 感谢您为 SSIS 付出的时间、努力和支持。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-13T09:20:06.677

我得到了相同的症状，但在每个组件上将延迟验证设置为 True 并没有解决我的问题。

我通过将 OLE DB 方法从表或视图更改为 sql 命令来解决它。

问候。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-16T10:51:03.673

通过将数据访问模式更改为 SQL 命令并将我的视图粘贴到 OLE DB 源中的 SQL 命令文本中解决了我的问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-13T20:02:09.147

我们已经将延迟验证设置为`True`并且不能/不想将其更改为 SQL 语句。
我遇到`ValidateExternalMetadata`了我更改为的数据流，`False`它似乎工作得像个冠军。

我检查了 OP 的步骤，他提到他们在第 5 步中做到了

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-27T14:54:52.087

此问题在 SQL Server 2012/2014 中仍然存在。

上面提到的解决方案都没有帮助。事实上，延迟验证、更改 OLD DB 目标或 OLE DB 连接的配置没有任何改变。

从此链接读取线程：[https ://social.msdn.microsoft.com/Forums/sqlserver/en-US/35a484c7-4850-4f86-b14a-5dfb50491ab2/long-duration-preexecute-phase?forum=sqlintegrationservices](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/35a484c7-4850-4f86-b14a-5dfb50491ab2/long-duration-preexecute-phase?forum=sqlintegrationservices)

建议问题出在执行计划上。

这对我的情况来说是正确的，在我的 OLE DB 源配置中添加条件 1=1 会强制 SQL 服务器生成一个新的执行计划来解决我的问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-03T10:30:42.607

显然，要尝试的另一件事是选中“使用 32 位运行时”复选框 - 这是如果您在数据库服务器（64 位，在我的情况下为至少，SQL Server 2008R2）。转到作业，右键单击 > 属性... > 步骤 > 右键单击​​您的 SSIS 包步骤 > 属性... > 常规 > 执行选项（选项卡）> 使用 32 位运行时。

我看到了这个问题，但只有在我将包部署到服务器后（我启用了日志记录提供程序，所以我可以看到它在“预执行”阶段后卡住了）。它在 BIDS 中总是运行良好（在另一台服务器上运行良好，奇怪的是......仍然不确定为什么会这样）。

[这里](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/35a484c7-4850-4f86-b14a-5dfb50491ab2/long-duration-preexecute-phase?forum=sqlintegrationservices)的一个线程向我提示了这个似乎有效的解决方案——尽管我的问题间歇性地出现，所以 YMMV。该线程中还有其他可能的解决方案。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-12-10T15:43:27.567

希望这可以帮助某人。我试图使用这个 OLE DB 源来执行带有参数的 SP。我不需要它来返回任何东西，所以我把那部分省略了。但它不让我，它大喊“sql没有返回列信息”。因此在我的 SP 中配置了一个虚拟 sql 语句，我将其设置为从不为真。但它从未将该列作为输出，并且该工作只是挂在执行前阶段。因此，我将该测试更改为始终为真，它返回了列，并且很快。我对专栏什么都不做，但我想那里需要它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-25T20:16:45.240

几分钟前我遇到了同样的问题，上面的建议对我不起作用（延迟验证 = true 似乎是答案）。我们最近发现了参数嗅探的一些问题，一旦我在我的存储过程中解决了这个问题，我的包在 < 1 分钟内运行。考虑检查您的存储过程，看看这是否可能是原因。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-16T18:13:57.883

在选择命令修复我的问题之前添加这个：

```
set arithabort on; 
```

# c# - 无法更改属性

> ID：15508597
> 
> 赞同：0
> 
> 时间：2013-03-19T19:22:22.213
> 
> 标签：c#, .net, wpf, user-interface, mvvm

我正在尝试更改 ComboBox 的边框 - 一项看似简单的任务，但什么也没发生。

**编辑：**

这是我的代码：

事件中出现以下内容：

```
cmb.BorderThickness = new Thickness(3);
cmb.BorderBrush = Brushes.Green; 
```

这是 XAML：

```
 <UserControl x:Class="QueryBuilder.FilterWindow"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" MaxHeight="200" Background="White" PreviewMouseLeftButtonDown="UserControl_PreviewMouseLeftButtonDown">
    <UserControl.Resources>
        <Style TargetType="TextBox">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="BorderBrush" Value="Silver"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="AllowDrop" Value="true"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TextBoxBase}">
                        <Border Name="Border" Padding="1" Background="#FFFFFF" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" >
                            <ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Border" Property="Background" Value="#EEEEEE"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="#EEEEEE"/>
                                <Setter Property="Foreground" Value="#888888"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="TreeViewItem">
            <Setter Property="Template" Value="{StaticResource TreeViewWithLines}"/>
            <Setter Property="Padding" Value="0,5,0,5"/>
            <Setter Property="IsExpanded" Value="true"/>
        </Style>
    </UserControl.Resources>
    <ScrollViewer ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto">
        <TreeView Name="tvFilters" Margin="0,10,0,10" Background="White" BorderBrush="White"/>
    </ScrollViewer>
</UserControl> 
```

我正在使用 ComboBox 的默认控件模板，所以我不知道为什么它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:26:25.220

当我想修改样式时我会做什么，我使用 WPF Inspector（你可以在那里找到它：[http](http://wpfinspector.codeplex.com/) ://wpfinspector.codeplex.com/ ）

然后附加到您的 ComboBox，您就可以访问所有属性和样式...您可以实时修改它们并查看结果，速度很快....

也许你的边界是空的？还是厚度为0？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:45:39.553

您应该定义新的 ControlTemplate，[这里](http://msdn.microsoft.com/en-us/library/ms752094%28v=vs.85%29.aspx)有所有代码。

如果要更改边框，`ComboBox`则应从[msdn](http://msdn.microsoft.com/en-us/library/ms752094%28v=vs.85%29.aspx)复制并粘贴代码并仅更改以下样式：

```
<Style x:Key="{x:Type ComboBox}" TargetType="ComboBox">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
    <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
    <Setter Property="MinWidth" Value="120"/>
    <Setter Property="MinHeight" Value="20"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ComboBox">
                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                    <Grid>
                        <ToggleButton 
                        Name="ToggleButton" 
                        Template="{StaticResource ComboBoxToggleButton}" 
                        Grid.Column="2" 
                        Focusable="false"
                        IsChecked="{Binding Path=IsDropDownOpen,Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}"
                        ClickMode="Press">
                        </ToggleButton>
                        <ContentPresenter
                        Name="ContentSite"
                        IsHitTestVisible="False" 
                        Content="{TemplateBinding SelectionBoxItem}"
                        ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                        ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                        Margin="3,3,23,3"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left" />
                        <TextBox x:Name="PART_EditableTextBox"
                             Style="{x:Null}" 
                             Template="{StaticResource ComboBoxTextBox}" 
                             HorizontalAlignment="Left" 
                             VerticalAlignment="Center" 
                             Margin="3,3,23,3"
                             Focusable="True" 
                             Background="Transparent"
                             Visibility="Hidden"
                             IsReadOnly="{TemplateBinding IsReadOnly}"/>
                        <Popup 
                        Name="Popup"
                        Placement="Bottom"
                        IsOpen="{TemplateBinding IsDropDownOpen}"
                        AllowsTransparency="True" 
                        Focusable="False"
                        PopupAnimation="Slide">
                            <Grid 
                            Name="DropDown"
                            SnapsToDevicePixels="True"                
                            MinWidth="{TemplateBinding ActualWidth}"
                            MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                <Border 
                                x:Name="DropDownBorder"
                                Background="{StaticResource WindowBackgroundBrush}"
                                BorderThickness="1"
                                BorderBrush="{StaticResource SolidBorderBrush}"/>
                                <ScrollViewer Margin="4,6,4,6" SnapsToDevicePixels="True">
                                    <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                                </ScrollViewer>
                            </Grid>
                        </Popup>
                    </Grid>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="HasItems" Value="false">
                        <Setter TargetName="DropDownBorder" Property="MinHeight" Value="95"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}"/>
                    </Trigger>
                    <Trigger Property="IsGrouping" Value="true">
                        <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                    </Trigger>
                    <Trigger SourceName="Popup" Property="Popup.AllowsTransparency" Value="true">
                        <Setter TargetName="DropDownBorder" Property="CornerRadius" Value="4"/>
                        <Setter TargetName="DropDownBorder" Property="Margin" Value="0,2,0,0"/>
                    </Trigger>
                    <Trigger Property="IsEditable"
                             Value="true">
                        <Setter Property="IsTabStop" Value="false"/>
                        <Setter TargetName="PART_EditableTextBox" Property="Visibility"    Value="Visible"/>
                        <Setter TargetName="ContentSite" Property="Visibility" Value="Hidden"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
    </Style.Triggers>
</Style> 
```

使用示例：

XAML：

```
<ComboBox Height="30" Width="150" BorderBrush="Red" BorderThickness="6" /> 
```

结果：

![在此处输入图像描述](../Images/8806563b5f60d31f3e97f50d4ef1c1e4.png)

XAML：

```
<ComboBox Height="30" Width="150" BorderBrush="Green" BorderThickness="3" /> 
```

结果：

![在此处输入图像描述](../Images/b0ebd3bfdbd988ab10d437d5b4bb997f.png)

# git - git checkout vs git checkout HEAD vs git checkout 与 git 结帐——

> ID：15508598
> 
> 赞同：1
> 
> 时间：2013-03-19T19:22:24.400
> 
> 标签：git

我正在尝试确定以下 4 个命令之间存在的差异。

*假设当前分支为`master`，当前目录为“工作目录”，即所在目录`.git`。*

```
git checkout

git checkout HEAD

git checkout master

git checkout -- . 
```

据我所知，前两个命令是*完全等价*的，并且本质上是无操作的（除了它们都可能产生一些输出的事实）；第三个几乎与前两个相同，除了它会产生任何其他输出，除了前一个产生的任何其他输出，`Already on 'master'.` 最后一个命令，与所有其他命令相比，将丢弃所有未分级的更改。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:57:49.790

前 3 个是相同的（并且*不是*无操作，如果您确实更改了某些文件，它们将被 master 提示中的文件替换）。*第 4 个只*检出'.' 中的文件，即当前目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:28:57.897

根据[TFM](http://git-scm.com/docs/git-checkout)，命令有四种形式`git checkout`。你的前两个例子是其中一个，你的另外两个例子是另外两个。

所以要回答你的问题，你错过了最后一种形式`git checkout`：

`git checkout -b <new branch name> <start point>`

# groovy - 如何打印出 Gremlin 管道/遍历结果

> ID：15508599
> 
> 赞同：2
> 
> 时间：2013-03-19T19:22:25.037
> 
> 标签：groovy, gremlin

我在一个名为`traversal.groovy`（我从命令行调用`gremlin -e traversal.groovy`）的文件中有以下代码：

```
// Begin traversal.groovy //

g = TinkerGraphFactory.createTinkerGraph()
v = g.v(1)

println v.outE.inV.name

// End traversal.groovy // 
```

如您所见，这是非常基本的；但输出不是我想要的。输出是

```
[StartPipe, OutEdgesPipe, InVertexPipe, PropertyPipe(name)] 
```

当我在 gremlin 命令行中运行相同的代码时，我得到了我正在寻找的东西......

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()
==>tinkergraph[vertices:6 edges:6]
gremlin> v = g.v(1)
==>v[1]
gremlin> v.outE.inV.name
==>vadas
==>josh
==>lop 
```

那么，我如何访问以某种方式隐藏的我想要的信息`[StartPipe, OutEdgesPipe, InVertexPipe, PropertyPipe(name)]`？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:47:41.830

感谢[斯蒂芬·马莱特](https://stackoverflow.com/users/1831717/stephen-mallette)为我指明了正确的方向。要在上面的遍历中简单地打印出每个顶点的“名称”属性，我们可以使用[sideEffect](http://gremlindocs.com/#side-effect/sideeffect)和[iterate](http://gremlindocs.com/#methods/pipe-iterate)。生成的代码如下所示：

```
// Begin traversal.groovy //

g = TinkerGraphFactory.createTinkerGraph()
v = g.v(1)

v.outE.inV.sideEffect{println it.name}.iterate()

// End traversal.groovy // 
```

输出将是：

```
vadas
josh
lop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:50:47.897

您可能只需要迭代您的管道：

[http://gremlindocs.com/#methods/pipe-next](http://gremlindocs.com/#methods/pipe-next)

```
println v.outE.inV.name.next() 
```

# java - 由于 java 中的 TimeZone 问题，数据未被选中

> ID：15508605
> 
> 赞同：0
> 
> 时间：2013-03-19T19:22:57.767
> 
> 标签：java

我在我的代码中遇到了日期/时间计算的时区问题。将需要您的建议。下面是场景。

我的应用程序必须从 hbase 数据库中选择数据。此数据将根据 hbase 中的表中的日期搜索条件进行选择。该表有一个用于过滤的日期时间列。

现在，在此表中填充数据的另一个应用程序正在以 GMT 时区格式插入日期时间（这是该团队所说的）。该应用程序部署在位于 EST 时区的服务器上。我从用户那里得到一个输入日期（没有时间分量），我需要将其转换为 GMT 时区。但是目前正在发生的事情是，当我进行转换时，某些数据没有在 EST 时区被选取。在我的本地时区 IST 中选取了相同的数据。我已经在部署在我的本地和远程 server.example 中的代码中完成了到 GMT 的转换。

表中数据的日期：2013-03-15 01:30:30

用户输入数据：2013-03-15（无时间分量）。我特别添加了时间组件。

添加时间组件后的日期：开始日期-2013-03-15 00:00:00，结束日期-2013-03-15 23:59:59。

我在 IST 时区（UTC+5:30）。所以转换为 GMT 的开始日期和结束日期都是

开始日期转换为 GMT -2013-03-14 18:30:56。

结束日期转换为 GMT - 2013-03-15 18:30:56。

现在，由于用户 2013-03-15 01:30:30 提供的日期在上述范围内，因此表中的数据正在此时区中提取。

相同的代码部署在 EST(UTC-5:00) 中的远程服务器中。

开始日期转换为 GMT -2013-03-15 05:00:56。

结束日期转换为 GMT - 2013-03-16 05:00:56。

现在，由于用户 2013-03-15 01:30:30 提供的数据不在此范围内，因此数据没有被拉起。

我不确定如何处理这种情况，以便跨时区的计算保持一致。因为测试人员说数据应该跨时区保持一致。但是正如您所看到的，GMT 转换已经完成，但日期因两个时区的偏移量而不同，并且数据没有被拉起。如果你能让我知道如何处理这将是很大的帮助。

我没有在此处放置任何代码，因为它是在线找到的时区标准代码，并且在大多数情况下都是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:33:47.270

这真的取决于你想在这里实现什么。

如果您*真的*希望输入被解释为本地时间，并转换为 GMT 以检查数据库，那么结果实际上是一致的，反过来想问题，如果您神奇地转换每个日期会得到哪些记录HBase 到你的本地时间？

如果用户输入的日期实际上是特定于 TZ 的，那么相同的日期“文本”返回不同的结果是很自然的，因为两个用户实际上指的是两个不同的时间点。

另一方面，如果您需要用户提供相同的输入以获得完全相同的结果，那么您需要假设输入已经在某个一致的 TZ 中，例如，总是在 UTC（或在您的情况下为 GMT） .

基本上你需要决定的是：

用户给出的输入是否`2013-03-15`特定于用户的 TZ？还是在特定的 TZ 中总是在同一时刻？IST、EST、GMT，由您决定。

如果你做出这个决定，你的结果将是一致的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-11T21:45:05.673

# java - 为 java 选择网络框架的建议

> ID：15508607
> 
> 赞同：1
> 
> 时间：2013-03-19T19:23:08.187
> 
> 标签：java, network-programming

**简短版本：**需要建议（优点/缺点）为具有少量用户/请求和相对大量数据的客户端/服务器应用程序选择 Java 网络框架。

可能的选项：

1.  RMI
2.  阿帕奇河
3.  Netty（这似乎更面向异步，它可以做同步调用吗？）
4.  其他一些可以让我的生活更轻松的框架？:)

**长版：**我目前从事的项目是一个用 java 编写的桌面应用程序，它允许用户优化供应链的一部分。请注意，到目前为止，该应用程序只是桌面应用程序。它在本地机器上安装了一个数据库，就是这样。现在我们有新的要求来更改代码以支持共享/网络数据库。在网络服务器上安装数据库并启动应用程序的几个实例（如预期的那样）揭示了很多问题。最大的问题来自于数据库交互没有考虑到并发性这一事实。我们有很多锁等待和几个死锁发生。已决定修改数据访问层以适应新要求。

似乎不可能编写一个 DAL 来允许并发访问，而不将应用程序分离在客户端和服务器中，服务器将处理数据访问和可能的一些业务逻辑。我们不需要非常高性能的解决方案，没有那么多消息，但问题在于数据量。

一个典型的使用场景是这样的：

1.  启动应用程序
2.  从 CSV 文件（通常在 600MB-1GB 之间）导入数据并存储以备将来使用
3.  添加场景配置（非常少量的数据）并存储它们
4.  启动优化（从步骤 1 获取数据，应用配置，应用一些优化/限制）
5.  显示优化结果。

步骤 4 将在服务器上完成，步骤 1-3 和 5 将在客户端执行。

你们有什么建议/建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:12:13.937

所以真正的问题是如何上传大量数据。对于这样的解决方案，我不会去 RMI - 它太受限制了。Apache River 似乎是某种发明。Netty 是一个低级的网络框架。您将被迫编写自己的协议。

我只是使用简单的 HTTP 服务器并使用 HTTP POST 请求上传数据。您可以使用 Gzip 压缩。HTTP 非常适合处理大文件。

在服务器端，任何 servlet 容器都可能会做（Tomcat、Jetty 等）。

在客户端，[Apache HTTP 组件](http://hc.apache.org/httpcomponents-client-ga/index.html)就足够了。你也可以试试[Ning Async HTTP Client](https://github.com/AsyncHttpClient/async-http-client)。

# algorithm - 如何生成一系列开启时间遵循二项分布的脉冲？

> ID：15508613
> 
> 赞同：1
> 
> 时间：2013-03-19T19:23:47.660
> 
> 标签：algorithm, binomial-cdf

我有一个简单的问题：

我正在尝试模拟一系列数字脉冲（最大值 = 1，最小值 = 0）。ON-times 的分布应该遵循二项分布。我该怎么做呢？我正在使用 VisualStudio 2012。这是一个非常微不足道的问题，我并不是要浪费任何人的时间，但由于某种原因，当我想到这个问题时，我的大脑无法正常工作。我需要生成一个非常大的数据集（300Mb）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:00:01.713

如果Visual Studio的原生RNG生成0到M-1之间的整数，计算K = p*M。生成任意数量的随机数，并以 K 为阈值以获得二进制随机脉冲。

其他方式是：

对于每个可能的字节（总共 256 个），计算 1 的数量。创建两个字节 A 和 B 的集合（可能大小不等），使得 p = 0.5*ProbabilityofOne(A) + 0.5*ProbabilityofOne(B)。现在每时每刻随机选择一个集合（A 或 B），然后从集合中随机选择一个元素。这样，每个生成的随机数都会得到 8 个脉冲。

注意：p 是 1s 的预期概率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:34:20.103

这显示了如何生成遵循[二项分布](http://msdn.microsoft.com/en-us/library/vstudio/bb982497%28v=vs.100%29.aspx)的数字。

我编辑了 Microsoft 的示例并尝试为变量提供更好的命名并使其更易于阅读。

我对概率和统计的掌握正在减弱，因为我已经很久没有使用它了，所以我希望这是正确的......

```
#include <random> //include the random number library
#include <iostream>

using namespace std;

int main(int argc, char* argv[])
{ 
    mt19937 rng; //create an instance of the Mersenne Twister PRNG
    binomial_distribution<int, double> binomDistribution(2, 0.6); //create distribution using t=2 and p= 0.6
    auto randomNumber = rng(); //get a random number from the RNG
    auto binDistValue = binomDistribution(rng); //get a binomial distributed number from the RNG

    std::cout << "p == " << binomDistribution.p() << std::endl; 
    std::cout << "t == " << binomDistribution.t() << std::endl; 

    binomDistribution.reset(); // discard any cached values 

    const auto valuesToPrint = 100;
    cout << "First " << valuesToPrint << " values of the binomial distribution are:" << endl;
    for(int i=0; i<valuesToPrint; ++i)
    {
        auto aSampledValue = binomDistribution(rng);
        cout << aSampledValue << endl;
    }    

    return (0); 
} 
```

另请查看[这篇文章](https://stackoverflow.com/questions/13163305/c11-stls-binomial-distribution-extremely-slow)以查看可能更简单的示例。

关键点是：

*   选择一个RNG
*   定义你的分布
*   将 RNG 提供给您的发行版，以便它可以为您生成单个结果

# ruby-on-rails - select 和 group , 访问 select count 的变量

> ID：15508620
> 
> 赞同：0
> 
> 时间：2013-03-19T19:24:28.397
> 
> 标签：ruby-on-rails, ruby, database

我已经尝试了一百万种方法，但我无法弄清楚，

如何从视图中访问以下方法的数量和创建日期（即在模型中）？

```
def self.groupit
  group("hour(created_at)").select("count(*) as quantitymy, hour(created_at) as createddate")
end 
```

我确定我做错了，组的东西也不起作用，有人可以帮忙吗？谢谢 ：）

更新：我有一个用户模型、一个组模型和一个帖子模型。

用户属于一个组，帖子属于用户。帖子仅通过用户属于组。

我试图显示组中发布的所有帖子，按时间分组。所以应该是

```
Group 1: 1 post at 13:00, 5 posts at 14:00

Group 2: 17 posts at 12:00, 1 post at 13:00, 2 posts at 14:00 
```

等等

我通过控制器将其显示为：

```
 @groups = Group.all 
```

然后在视图中遍历它们：

```
<% @groups.each do |g| %>
    <% if g.posts.exists? %>
         <tr>
             <td><b><%= g.name %></b>;
             <%= g.posts.count %> posts
             <% g.posts.each do |post| %>
                 <%= post.created_at.strftime("%H") %>:00;
          <% end %>
              </td>
       <% else %>
            <% end %>
      </tr>
 <% end %> 
```

**更新 2/答案：**

```
<% @groups.each do |g| %>
    <% if g.posts.exists? %>
         <tr>
             <td><b><%= g.name %></b>;
             <%= g.posts.count %> posts
             <% g.posts.group("hour(posts.created_at)").count("hour(posts.created_at)").each do |created_at, quantitymy| %>
        <%= created_at %>; <%= quantitymy %>
          <% end %>
              </td>
       <% else %>
            <% end %>
      </tr>
 <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:45:42.277

我想你想要这样的东西：

```
group("hour(created_at)").count("hour(created_at)") 
```

这将为您提供一个有序的散列，其中键是小时（created_at）值，值是计数。

您可以像这样显示它：

```
Group.group("hour(created_at)").count("hour(created_at)").each do |created_at, quantitymy|
   # ...
end 
```

# c++ - 使用 boost::any 是个好主意吗？

> ID：15508622
> 
> 赞同：0
> 
> 时间：2013-03-19T19:24:29.920
> 
> 标签：c++, architecture, type-erasure, boost-any

我正在用 C++ 开发一些图像处理算法。为了使我的代码更通用并且能够在不重新编译整个项目的情况下配置所有内容，我想出了一个想法，将处理算法分成小部分（“提取器”），将它们作为从单个接口继承的对象和从工厂方法解析的 XML 文件中配置它们的执行顺序和参数。但是这些基本处理块的输入和输出类型可以不同，所以我考虑使用 boost::any 作为通用类型，所以每个对图像的操作看起来像：

```
 boost::any Process(const boost::any& feature); 
```

每个对象都应在内部存储正确的输入和输出类型，并在每次执行时执行装箱-拆箱。使用这种技术是个好主意吗？它满足了我的需求，并且在 Python 中非常自然，但同时在 C++ 中看起来像一个丑陋的 hack，它本质上是静态类型的，所以我怀疑是否应该使用它。

UPD：一个更清楚的小例子

```
// Base class for all processing
template <typename Input, typename Output>
class Processor {
public:
    virtual ~Processor();
    virtual Output Process(const Input& input) const = 0;
};

// Generalized type-erased processor
typedef Processor<boost::any, boost::any> TypeErasedProcessor;

// Boxing-unboxing wrapper
template <typename Input, typename Output>
class ProcessorWrapper: public TypeErasedProcessor {
public:
    boost::any Process(const boost::any& boxed_input) const {
        Input input = boost::any_cast<Input>(boxed_input);
        Output output = processor_->Process(input);
        boost::any boxed_output = output;
        return boxed_output;
    }

private:
    std::shared_ptr<Processor<Input, Output>> processor_;
};

class SimpleImageProcessingChain: public TypeErasedProcessor {
public:
    boost::any Process(const boost::any& input) const {
        boost::any result = input;
        for (const auto& processor: processors_) {
            result = processor->Process(result);
        }
        return result;
    }

private:
    std::vector<std::shared_ptr<TypeErasedProcessor>> processors_;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:30:02.327

In most cases, readability of your code is more important than being able to to avoid recompiling.

If I were to work with your algorithms, I'd definitely prefer having them statically typed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:39:54.390

在这种情况下，没有。就此而言，您也不会在 Python 中真正做到这一点。你在 Python 中的函数不能只接受任何对象；它只适用于实现特定协议的对象。如果你传递 a`float`或 a `list`of ，你的函数将无法在 Python 中工作`string`；仅当您向其传递行为类似于图像并具有图像界面的东西时，它才会起作用。Python 和 C++ 之间的唯一区别是，在 C++ 中，如果一个对象实现了协议，则必须通过从定义协议接口的抽象基类继承来声明它这样做。

# c++ - 使用winapi获取本地IP地址列表

> ID：15508623
> 
> 赞同：0
> 
> 时间：2013-03-19T19:24:31.363
> 
> 标签：c++, windows, winapi, networking, network-programming

如何使用 WINAPI 获取连接到 LAN 的所有本地 IP 地址的列表？我通过netapi32.dll搜索并没有成功。有什么想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:48:56.733

无法保证获取连接到本地网段的所有设备的地址。机器可能被防火墙和丢弃请求，或者在检查机器未配置访问的不同子网中具有 IP 地址。

您可以通过向本地子网上的每个 IP 地址发送 ping 请求（`ICMPSendEcho()`在 IP Helper 库中使用）并检查响应来找到子网上所有响应 ping 的设备。

# c++ - Struct C++ 中的内存泄漏

> ID：15508628
> 
> 赞同：-6
> 
> 时间：2013-03-19T19:24:45.707
> 
> 标签：c++, memory-leaks

我有这样的结构，

```
struct int * ramp_output (int * L10)
{
    int * r;
    r = L10;
    return(r);
} 
```

我应该从 L10 和 r 中释放内存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:30:14.900

结构不接受参数或返回值。如果您从代码中删除“结构”，这将是有效的（尽管微不足道）函数：它只是返回一个指针，该指针指向与它的参数指向的指针相同的东西。您不需要或不想释放任何内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:31:21.793

作为一般规则，您需要在 C++ 中释放内存的唯一时间是使用“new”关键字创建它时。例如，

```
int * test = new int; 
```

在这种情况下，指针“test”指向堆上“某人”应该删除的整数。谁负责删除它取决于您的程序的设计，如果您将指针传递给其他函数并且它们存储/使用它的副本，则不应删除它。

至于您的示例代码，它实际上没有任何意义，因此您必须告诉我们您正在尝试做什么来帮助解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:34:13.310

首先，您的代码不会与其中的杂散“结构”一起编译。删除它，我们可以回答您的问题：这取决于参数的分配方式，但无论如何您应该只执行一次。

```
int main()
{
    int a[]  = { 1, 1, 1 };
    int i    = 42;
    int* pi1 = &i;
    int* pi2 = new int[10];
    int* pi3 = new int(42);
    std::vector<int> v( 10 );
    std::shared_ptr<int> sp( new int(42) );

    int* r1 = ramp_output(a);
    int* r2 = ramp_output(&i);
    int* r3 = ramp_output(pi1);
    int* r4 = ramp_output(pi2);
    int* r5 = ramp_output(pi3);
    int* r6 = ramp_output(&v[0]);
    int* r7 = ramp_output(sp.get());

    // what to dealloc? Only these
    delete [] pi2; // or delete [] r4; but not both!
    delete pi3;    // or delete    r5; but not both!
} 
```

所有其他人都以一种或另一种方式清理自己。

# php - 如何阻止 CURL 表单垃圾邮件发送者？

> ID：15508631
> 
> 赞同：1
> 
> 时间：2013-03-19T19:24:47.940
> 
> 标签：php, curl

我们将 phpforms.net 用于我们的 php 网页之一。我们不断收到 bs 表单提交的垃圾邮件。

他们显然正在使用比机器人更复杂的东西来自动填写表格，因为他们能够绕过 maxlength html 要求和页面上的所有 javasript。这个[在外部网站上自动填写和提交表单](https://stackoverflow.com/questions/8741545/auto-fill-and-submit-forms-on-external-site) 显示了一种使用 CURL 重新发送 POST 的方法，所以我想知道这是否是我所面临的，我该如何阻止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:31:28.133

[reCaptha](http://www.google.com/recaptcha)会拯救你！:^) 它看起来很棒，而且它的代码很容易实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:57:07.790

我最近创建了一个类来防止垃圾邮件而不使用 Captha。它做了 3 件事。

**蜜罐：**是`display:none`. 垃圾邮件机器人可以看到并填充它，但您的合法用户不会。如果它有任何值，那么表单是无效的。

**Spinner：**在呈现表单之前创建并存储在会话中的随机字符串，然后发布到`type="hidden"`输入中。如果提交后字符串不同，则表单无效。

**随机字段名称：**为每个字段名称存储在会话中的随机字符串（在每个表单请求上）

在表单上实现此功能后，它从每天 100 多封垃圾邮件变为无。

我记得看过一篇关于这些的文章，我会尝试寻找它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T19:36:56.613

根据[PHPForms Features](http://phpforms.net/v2/features.html)，他们提供 reCATPCHA。这实际上就是发明验证码的原因——因为垃圾邮件机器人滥用 html 表单。

验证码的方法是试图让机器人难以在没有人工干预的情况下提交表单。[另一种方法是像Akismet](http://akismet.com/)这样的提交后启发式过程，它试图通过查看提交的文本本身来确定垃圾邮件。

因此，基本上，您要么通过坚持验证码的有效性使提交表单变得稍微困难​​，要么只处理垃圾邮件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T19:43:26.860

这可能/可能对您没有帮助，但我最近自己遇到了垃圾邮件问题。我尝试了这个解决方案，它完全解决了垃圾邮件问题。**此方法无需使用验证码：**

在您的表单中，创建一个新的输入字段并将其隐藏`display: none`在您的 CSS 中。该字段是垃圾邮件陷阱。真实用户看不到该字段，但**垃圾邮件机器人可以**。因此，在后端，如果`$_POST`来自这个隐藏字段的数据包含*任何内容*，那么提交就是垃圾邮件，您可以这样处理。

[在此处](http://www.wilhelser.com/2012/04/stop-bot-submitted-form-spam/)阅读更多相关信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T19:40:36.710

如果您只是在处理一个特定的机器人，您可能会阻止该用户代理。

示例来自[如何使用 php 阻止一些 http 用户代理](https://stackoverflow.com/questions/1357983/how-to-block-some-of-http-user-agent-using-php)

```
$badAgents = array('fooAgent','blahAgent', 'etcAgent');
if(in_array($_SERVER['HTTP_USER_AGENT'],$badAgents)) {
    exit();
} 
```

或者只是一般的卷曲：

```
if (strpos($_SERVER['HTTP_USER_AGENT'], 'curl') !== false)
    exit; 
```

在许多情况下，它们并不是真正的攻击，因为作者没有意识到他们的代码卡在您的网站上。如果它确实是某种恶意活动，那么是的，你需要一个验证码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T19:41:52.867

使用服务器端代码时的验证应该在服务器端处理。如果有问题的客户端不与 JavaScript 交互，JavaScript 将什么也不做。

验证服务器端，即使您使用验证码，您也应该始终验证服务器上的信息。使用验证码系统或文本分析系统，或同时使用两者，例如[reCaptcha](http://www.google.com/recaptcha)或[mollom](http://mollom.com/)或[akismet](http://akismet.com/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T19:51:19.607

我做几件事。我实际上使用了 reCaptcha，然后有一个空白文本字段，我用 jQuery 隐藏了它，因为一些机器人实际上可以读取一些 CSS，并且如果 display: none 附加到它，则不会填写该字段。

与往常一样，您也应该进行一些后端处理。除了验证我刚才说的 lameCaptcha 字段之外，如果您在前端有一个必填字段，请使用 trim() 并验证它是否确实有值。如果没有值，则不实际处理表单。

# entity-framework - Entity Framework 5、代码迁移和包管理器控制台

> ID：15508635
> 
> 赞同：1
> 
> 时间：2013-03-19T19:25:07.297
> 
> 标签：entity-framework, entity-framework-5, nuget

当我尝试从包管理器控制台运行 Add-Migration 命令时，我收到以下错误；“项目 [项目名称] 未能构建”。我相信这个问题与我必须使用 Apache Ivy 作为二进制存储库有关，这意味着我不能使用 nuget 或其包结构。如果我尝试使用 nuget，我的 csproj 文件会被修改，这会破坏我们的内部构建脚本。另一个潜在问题可能与我必须在 x86 而不是任何 CPU 中构建的事实有关。

EF5 中有没有办法在没有包管理器控制台的情况下生成代码迁移？或者我可以更改包管理器查找 EF 工具的位置（我仍然有 nuget 包中的工具目录）？

# javascript - 如何仅为相应的 div 隐藏 div

> ID：15508639
> 
> 赞同：-1
> 
> 时间：2013-03-19T19:25:22.053
> 
> 标签：javascript, jquery

我正在创建一个简单的选项卡，其中显示了一些静态文本和一些动态创建的产品。所以默认情况下我会展示所有的产品。我想在总共五个标签中的标签 1、2、3 的情况下隐藏一个产品。这是选项卡的脚本。

有任何想法吗？

```
<script>
    $(function(){
        $('.content:first-child').show();
            $('.listThumbClick').live('click', function(){
            var ind = $('.listThumbClick').index(this);
            $('.content').eq(ind).show().siblings().hide(); 
        });
        //generated product is attached inside the tab
        $('.product').appendTo('.content');
    });
</script> 
```

html有点像这样。注意：我将产品附加到选项卡区域

```
<div class="ppt">
    <div class="listThumbClick"></div>
    <div class="listThumbClick"></div>
    <div class="listThumbClick"></div>
    <div class="listThumbClick"></div>
    <div class="listThumbClick"></div>
</div>

<div class="tabContainer">
    <div class="content"></div>
    <div class="content"></div>
    <div class="content"></div>
    <div class="content"></div>
    <div class="content"></div>
</div>

<div class="product">
    <img src="product image source here" title="productOne"/>
</div>
<div class="product">
    <img src="product image source here" title="productTwo"/>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:34:12.507

不确定这是否只是伪代码，但首先我不会使用“。” 作为您唯一的选择器。也许将其范围限定为具有 id 的元素。

我还会缓存您的 $('.listThumbClick') 变量，这样您就不会在每次点击时都获取它。

一种解决方案是将数据属性添加到要隐藏产品的 div 中。

```
<div class="listThumbClick" data-hideproduct="true"> 
```

然后在你的处理程序中

```
if($(this).data("hideproduct")){
    //hide the product
}
else {
    //show the product
} 
```

通过这样做，您还可以使您的隐藏/显示逻辑更清晰，并且工作量更少

```
var $listThumbClicks = $(".listThumbClick");
var $content = $(".content");
$listThumbClicks.live('click', function(){
    var ind = $listThumbClicks.index(this);
    $content.hide().eq(ind).show();
}); 
```

我很好奇你的最终目标是什么。您想要只显示特定产品的标签吗？现在您将所有产品添加到所有选项卡中，这很奇怪。

看起来您真正想要做的只是将某些产品附加到每个选项卡。

# javascript - Chrome 扩展：如何响应内容脚本中“弹出”的操作？

> ID：15508650
> 
> 赞同：2
> 
> 时间：2013-03-19T19:26:12.230
> 
> 标签：javascript, google-chrome-extension

我想创建一个扩展程序，它将在社交网络中切换音乐播放的状态。我在 popup.html 中有一个“播放/暂停”按钮，并且我在每个页面中都注入了一个脚本（injected.js，内容脚本）。当有人点击 popup.html 中的“播放/暂停”时，社交网络的页面必须调用 headPlayPause() 函数，但它不起作用。我应该怎么做才能修复它？

popup.html：

```
<script src = 'popup.js'></script>
<input type = 'button' value = "Play/Pause" id = 'stopper' /> 
```

popup.js：

```
window.onload = function() {
    document.getElementById('stopper').onclick = function() {
        // i don't know how correctly get tabId
        chrome.tabs.sendMessage(241, { greeting: "hello" },
            function(res) {
                // returns "sendMessage callback.. undefined"
                alert('callback of sendMessage: ' + res)
            });
    }
} 
```

注入.js：

```
chrome.extension.onMessage.addListener(
    function(request, sender, sendResponse) {
        headPlayPause();
    } 
); 
```

对不起我的英语不好 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T20:30:43.187

用于获取当前选项卡 ID：[`chrome.tabs.query`](http://developer.chrome.com/extensions/tabs.html#method-query)`({active:true, currentWindow: true}, callback);`

```
document.getElementById('stopper').onclick = function() {
    chrome.tabs.query({
        active: true,
        currentWindow: true
    }, function(tabs) {
        var tabId = tabs[0].id; // A window has only one active tab..
        chrome.tabs.sendMessage(tabId, { greeting: "hello" },
            function(res) {
                alert('callback of sendMessage: ' + res);
            }
        });
    });
}; 
```

要获得合理的响应，您必须调用第三个参数 ( `sendResponse`)：

```
chrome.extension.onMessage.addListener(
    function(request, sender, sendResponse) {
        // Send a response back. For example, the document's title:
        sendResponse(document.title);
    } 
); 
```

[您可以在消息传递](http://developer.chrome.com/extensions/messaging.html)教程中阅读有关在扩展程序中发送消息的更多信息。

# asp.net-mvc - 验证器忽略 RangeAttribute

> ID：15508652
> 
> 赞同：1
> 
> 时间：2013-03-19T19:26:16.027
> 
> 标签：asp.net-mvc, validation

我有以下实体（这是 EF 生成的实体的一部分）：

```
[MetadataType(typeof(ProjectItem_Metadata))]
public partial class ProjectItem : IIdentified, IValidatableObject
{
    internal class ProjectItem_Metadata
    {
        [Editable(false)]
        public int ID { get; set; }

        public int ProjectID { get; set; }

        public int? ReorderParentID { get; set; }

        public int LibraryItemID { get; set; }

        [Range(0, double.MaxValue, ErrorMessageResourceType = typeof(Resources), ErrorMessageResourceName = "QuantityError")]
        public int Quantity { get; set; }

        public float Width { get; set; }

        public float Height { get; set; }

        public float Depth { get; set; }

        public int SheetMaterialID { get; set; }

        public int? BandingMaterialID { get; set; }

        public float MaterialVolume { get; set; }

        public float MaterialWeight { get; set; }

        public double EstimatedItemMass { get; set; }

        public float SurfaceFootage { get; set; }
    }

    public static class Resources
    {
        private static readonly IStringProvider _errors = Strings.Current.GetGroup("ProjectItemErrors");

        // Errors
        public static string QuantityError { get { return _names.GetValueOrDefault("Quantity", "Quantity"); } }
    }

    public IEnumerable<ValidationResult> Validate(ValidationContext a_validationContext)
    {
        IStringProvider _errors = Strings.Current.GetGroup("ProjectItemErrors");

        var libraryItem = LibraryItem;
        if (libraryItem == null)
        {
            using (var context = new YouBuildEntities())
                libraryItem = context.LibraryItems.SingleOrDefault(i => i.ID == LibraryItemID);
        }

        var validationResults = new List<ValidationResult>();

        if (Width < libraryItem.MinWidth)
            validationResults.Add(new ValidationResult(_errors.GetValue("WidthTooSmall", libraryItem.MinWidth), new String[] { "Width" }));

        if (Width > libraryItem.MaxWidth)
            validationResults.Add(new ValidationResult(_errors.GetValue("WidthTooLarge", libraryItem.MaxWidth), new String[] { "Width" }));

        if (Height < libraryItem.MinHeight)
            validationResults.Add(new ValidationResult(_errors.GetValue("HeightTooSmall", libraryItem.MinHeight), new String[] { "Height" }));

        if (Height > libraryItem.MaxHeight)
            validationResults.Add(new ValidationResult(_errors.GetValue("HeightTooLarge", libraryItem.MaxHeight), new String[] { "Height" }));

        if (Depth < libraryItem.MinDepth)
            validationResults.Add(new ValidationResult(_errors.GetValue("DepthTooSmall", libraryItem.MinDepth), new String[] { "Depth" }));

        if (Depth > libraryItem.MaxDepth)
            validationResults.Add(new ValidationResult(_errors.GetValue("DepthTooLarge", libraryItem.MaxDepth), new String[] { "Depth" }));

        return validationResults;
    }
} 
```

当我这样调用 Validator.TryValidateObject 时：

```
 var results = new List<ValidationResult>();
        if (!Validator.TryValidateObject(_target, new ValidationContext(_target, null, null), results, true))
        {

        } 
```

它验证`Height`, `Width`，`Depth`但它忽略`Quantity`. 我究竟做错了什么？

谢谢。

# arduino - 使用 AES 或 RSA 处理带有 Arduino NFC 的消息？

> ID：15508655
> 
> 赞同：-1
> 
> 时间：2013-03-19T19:26:23.620
> 
> 标签：arduino, aes, rsa, nfc

我很难决定使用哪种加密方式在 Arduino 上的 NFC-shield 和手机之间发送消息。我想使用一种快速但安全的加密方法，并认为[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)很适合。目标是一个以[NFC](http://en.wikipedia.org/wiki/Near_field_communication)作为钥匙的门锁。有什么想法、优点或缺点吗？[像RSA](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)这样的非对称加密更好吗？

不过，我很难用 AES 弄清楚一件事。如何保护 AES 免受窃听或[中间人攻击](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)？我是否正确理解这一点：如果 AES 加密字符串被发送 100 次并且有人监听该加密消息，窃听者将获得 100 个不同的加密字符串，因为 AES 一直在更改密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:56:58.517

如果您应该使用对称或非对称加密，这完全取决于协议。仅在建立协议后才需要选择算法。协议本身又取决于用例和威胁模型。

如果你不理解上一段，你应该从获得更多知识开始。如果你不这样做，你就无法理解别人创建的协议，更不用说创建自己的协议了。在这种情况下，您最好选择经过验证的、可能经过认证的现成产品。

为了给您一个正确方向的提示，请尝试了解[关键协议协议](http://en.wikipedia.org/wiki/Key_exchange)（例如，非对称[Diffie-Hellman](http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)）和[质询-响应协议](http://en.wikipedia.org/wiki/Challenge%E2%80%93response_authentication)。

# css - 浮动元素交换

> ID：15508657
> 
> 赞同：0
> 
> 时间：2013-03-19T19:26:25.723
> 
> 标签：css, floating

我有 wordpress 页面[http://war-mobile.h2client.com/corporate-information/our-team/](http://war-mobile.h2client.com/corporate-information/our-team/)并且正在为它开发一个移动网站。如果您转到底部并单击，`switch to our mobile`您会看到图像和信息 div 交换了位置 - 我从原始站点复制了图像和浮动 div 的样式，但是遇到了这个问题。代码：

```
.bios div {
font-size: 16px;
line-height: 20px;
margin-top: 25px;
margin-left: 35px;
float: left;
display: block;
}

.bios avatar {
display: inline-block;
float: left;
width: 130px;
height: 165px;
margin-top: 0px !important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:30:30.300

添加

```
.bios img {float: left;} 
```

头像选择器不选择手机版中的图片

编辑：

事实上，头像类的 CSS 漏掉了一个点

```
.bios .avatar {...} 
```

因此它不适用于任何元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:31:05.713

它可能应该是`.bios .avatar`（注意额外的时间）或`.bios img`在非移动版本中。要么正确设置 img 的浮动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:35:47.773

一个快速的解决方法是添加这个属性：

```
.bios img{
   float:left;
} 
```

但我担心你的 div 太混乱了。你需要清理它们以修复更多按钮。

# scala - 如何区分编译器推断的隐式转换和显式调用的转换？

> ID：15508660
> 
> 赞同：8
> 
> 时间：2013-03-19T19:26:35.823
> 
> 标签：scala, implicit-conversion, scala-2.10, scala-macros

让我们想象一下将这两个等价的表达式传递给 Scala 宏：

*   使用编译器推断的隐式转换：`1+"foo"`
*   显式调用隐式转换：`any2stringadd(1)+"foo"`

有没有办法在宏内部区分这两者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:53:06.853

首先，这个`1 + "foo"`案例会很棘手，因为那里实际上并没有发生任何隐式转换：`Int`它本身[确实确实有这种`+`方法](https://github.com/scala/scala/blob/v2.10.1/src/library/scala/Int.scala#L49)（[不幸](https://twitter.com/puffnfresh/status/287444061034520576)的是）。

因此，如果这是您的用例，那么您就不走运了，但是可以做您所描述的更普遍的事情。我将在下面的示例中假设以下设置：

```
case class Foo(i: Int)
case class Bar(s: String)
implicit def foo2bar(foo: Foo) = Bar(foo.i.toString) 
```

首先是优雅的方法：

```
object ConversionDetector {
  import scala.language.experimental.macros
  import scala.reflect.macros.Context

  def sniff[A](tree: _): Boolean = macro sniff_impl[A]
  def sniff_impl[A: c.WeakTypeTag](c: Context)(tree: c.Tree) = {
    // First we confirm that the code typechecks at all:
    c.typeCheck(tree, c.universe.weakTypeOf[A])

    // Now we try it without views:
    c.literal(
      c.typeCheck(tree, c.universe.weakTypeOf[A], true, true, false).isEmpty
    )
  }
} 
```

根据需要工作：

```
scala> ConversionDetector.sniff[Bar](Foo(42))
res1: Boolean = true

scala> ConversionDetector.sniff[Bar](foo2bar(Foo(42)))
res2: Boolean = false 
```

不幸的是，这需要无类型的宏，目前仅在[Macro Paradise](http://docs.scala-lang.org/overviews/macros/untypedmacros.html)中可用。

你可以在 2.10 中使用普通的旧宏来获得你想要的东西`def`，但这有点小技巧：

```
object ConversionDetector {
  import scala.language.experimental.macros
  import scala.reflect.macros.Context

  def sniff[A](a: A) = macro sniff_impl[A]
  def sniff_impl[A: c.WeakTypeTag](c: Context)(a: c.Expr[A]) = {
    import c.universe._

    c.literal(
      a.tree.exists {
        case app @ Apply(fun, _) => app.pos.column == fun.pos.column
        case _ => false
      }
    )
  }
} 
```

然后再次：

```
scala> ConversionDetector.sniff[Bar](Foo(42))
res1: Boolean = true

scala> ConversionDetector.sniff[Bar](foo2bar(Foo(42)))
res2: Boolean = false 
```

诀窍是在抽象语法树中查找我们看到函数应用程序的地方，然后检查`Apply`节点及其`fun`子节点的位置是否具有相同的列，这表明方法调用未显式存在于源中.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T06:31:57.493

这是一个黑客，但它可能会帮助你：

```
import scala.reflect.macros.Context
import language.experimental.macros

object Macros {
  def impl(c: Context)(x: c.Expr[Int]) = {
    import c.universe._
    val hasInferredImplicitArgs = x.tree.isInstanceOf[scala.reflect.internal.Trees#ApplyToImplicitArgs]
    val isAnImplicitConversion = x.tree.isInstanceOf[scala.reflect.internal.Trees#ApplyImplicitView]
    println(s"x = ${x.tree}, args = $hasInferredImplicitArgs, view = $isAnImplicitConversion")
    c.literalUnit
  }

  def foo(x: Int) = macro impl
}

import language.implicitConversions
import scala.reflect.ClassTag

object Test extends App {
  def bar[T: ClassTag](x: T) = x
  implicit def foo(x: String): Int = augmentString(x).toInt
  Macros.foo(2)
  Macros.foo(bar(2))
  Macros.foo("2")
}

08:30 ~/Projects/210x/sandbox (2.10.x)$ ss
x = 2, args = false, view = false
x = Test.this.bar[Int](2)(ClassTag.Int), args = true, view = false
x = Test.this.foo("2"), args = false, view = true 
```

# c# - double[] 集合到字符串

> ID：15508673
> 
> 赞同：1
> 
> 时间：2013-03-19T19:27:10.223
> 
> 标签：c#, linq

基本上我有一系列尺寸.. 收藏

```
12,12
23,23
34,34
23,65
12,3 
```

ETC..

我正在尝试获取这些并比较这两个值并返回一个字符串..

如果值相同，则只返回 1 个数字，如果它们不同，则返回两者..

例子..

```
 new string.. 12, 23, 34, 23x65, 12x3 
```

这是我写的代码，显然不是我想要得到的结果..

```
 List<double[]> oSize_list = _orderedCollection
    .Select(t => new double[] { t.psizeW, t.psizeH })
    .ToList(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T19:31:26.567

```
List<string> oSize_list = _orderedCollection
    .Select(t => t.psizeW == t.psizeH ? t.psizeW.ToString() : string.Format("{0}x{1}", t.psizeW, t.psizeH))
    .ToList(); 
```

这应该可以实现您的目标

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T19:31:19.310

要`(psizeW, psizeH)`将对数组转换为字符串数组，字符串格式取决于是否`psizeW`等于`psizeH`，您可以：

```
var result = _orderedCollection
    .Select(t => t.psizeW == t.psizeH ? 
            string.Format("{0}", t.psizeW) :
            string.Format("{0}x{1}", t.psizeW, t.psizeH))
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T19:42:10.090

最简单的做法是创建一个函数来进行比较并在 linq 查询中使用它。

```
 private string SizeToString(int a, int b)
    {
        if (a == b)
        {
            return a.ToString();
        }
        else
        {
            return String.Format("{0}x{1}", a, b);
        }
    }

    var stringSizes = from t in _orderedCollection
                      select SizeToString(t.psizeW, t.psizeH); 
```

如果您总是希望对相同的对象类型执行此操作，则可以使 SizeToString 采用大小对象而不是单个尺寸。

# sql-server - 根据活动开始和持续时间计算一段时间内的活动项目

> ID：15508674
> 
> 赞同：3
> 
> 时间：2013-03-19T19:27:13.500
> 
> 标签：sql-server, sql-server-2005, count

我正在使用 MS SQL Server 2005 并遇到以下问题。我有一个电话通话记录，需要随着时间的推移分析线路利用率。我将尝试通过省略细节来简化任务，只问我有问题的问题。假设呼叫记录到带有列的表中：呼叫开始的日期和时间、呼叫持续时间（以分钟为单位）和使用的线路#。我需要计算每个特定时刻（每分钟）有多少线路忙。实际上，我最终会通过一些聚合来使用更大的时间段（15 分钟、1/2 小时等），但我对此没有任何问题。

因此示例源表（3 行）可能具有以下内容：

```
StartDateTime, Duration, LineNr
2013-01-01 10:00:00, 5, 1
2013-01-01 10:01:00, 6, 2
2013-01-01 10:03:00, 3, 3
2013-01-01 10:08:00, 2, 1
2013-01-01 10:09:00, 3, 2
2013-01-01 10:11:00, 1, 1 
```

从查询返回的结果表应如下所示：

```
Period, BusyLineCount
...
2013-01-01 09:58:00, 0
2013-01-01 09:59:00, 0
2013-01-01 10:00:00, 1
2013-01-01 10:01:00, 2
2013-01-01 10:02:00, 2
2013-01-01 10:03:00, 3
2013-01-01 10:04:00, 3
2013-01-01 10:05:00, 2
2013-01-01 10:06:00, 1
2013-01-01 10:07:00, 0
2013-01-01 10:08:00, 1
2013-01-01 10:09:00, 2
2013-01-01 10:10:00, 1
2013-01-01 10:11:00, 2
2013-01-01 10:12:00, 0
2013-01-01 10:13:00, 0
... 
```

我怎样才能做到这一点？

PS这是我在这里发布的第一个问题，英语不是我的母语，所以请不要介意我做错了什么。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:45:55.467

这是一种使用递归 CTE 的方法。这可能会在一小段时间内表现良好，但您需要用更大的时间对其进行测试。

```
DECLARE @Start DATETIME, @End DATETIME
SET @Start = '20130101 09:58:00'
SET @End = '20130101 10:15:00'

;WITH TimePeriods AS
(
    SELECT @Start Period
    UNION ALL
    SELECT DATEADD(MINUTE,1,Period)
    FROM TimePeriods
    WHERE DATEADD(MINUTE,1,Period) <= @End
), LineUsage AS (
    SELECT StartDateTime, Duration, LineNr
    FROM YourTable
    UNION ALL
    SELECT DATEADD(MINUTE,1,StartDateTime), Duration-1, LineNr
    FROM LineUsage
    WHERE Duration-1 > 0
)
SELECT A.Period, COUNT(DISTINCT B.LineNr) BusyLineCount
FROM TimePeriods A
LEFT JOIN LineUsage B
  ON A.Period = B.StartDateTime
GROUP BY A.Period
ORDER BY A.Period
OPTION(MAXRECURSION 0) 
```

这是一个带有现场演示的**[sql fiddle 。](http://sqlfiddle.com/#!3/3f3cf/7)**

# java - 从 GMail 获取附件

> ID：15508677
> 
> 赞同：1
> 
> 时间：2013-03-19T19:27:29.053
> 
> 标签：java, gmail, email-attachments

我的应用程序设置为每次有新邮件进入 GMail 收件箱时，它的详细信息都会存储到我的数据库中，即主题、正文等。我还将电子邮件可能包含的任何附件保存到我的本地服务器文件系统中. 然后，此电子邮件会显示在 Web 应用程序中。并且用户可以下载存储在我的本地文件系统中的附件。

我想更改此设置，以便我可以直接链接到附件的 Gmail 版本，而不是下载附件然后链接到它。有没有办法做到这一点？

我正在使用 JavaMail 来获取和处理电子邮件。

# iphone - UICollectionViewCell 中的 TextField 发疯了

> ID：15508684
> 
> 赞同：-1
> 
> 时间：2013-03-19T19:28:01.233
> 
> 标签：iphone, ios, objective-c

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
Cell *aCell = [collectiveView dequeueReusableCellWithReuseIdentifier:@"cell" forIndexPath:indexPath];

return aCell; 
} 
```

我在每个单元格中有一个集合视图和一个文本字段

我发现某些意外行为有时文本字段中的文本会随机消失或复制到其他单元格中的文本字段

我怎样才能解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:31:53.577

因为您使用的是可重复使用的单元格（来自`-dequeueReusableCellWithReuseIdentifier:`），所以您返回的单元格*可能已经包含前一个单元格的内容*。您需要在返回之前明确清除返回的单元格中文本字段的内容。例如：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView 
                  cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    Cell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"cell" 
                                                           forIndexPath:indexPath];

    cell.textField.text = @"Default contents"; // or other data from your model
    return cell;
} 
```

# asp.net - 不使用 aspnet_compiler.exe 的 -u 选项时的副作用

> ID：15508687
> 
> 赞同：-1
> 
> 时间：2013-03-19T19:28:30.653
> 
> 标签：asp.net, compiler-construction

以下是 MSDN 指令，但不确定它的含义：

**-u**

> 指定 Aspnet_compiler.exe 应创建一个预编译的应用程序，该应用程序允许后续更新 .aspx 页等内容。如果省略此选项，则生成的应用程序仅包含已编译的文件，并且无法在部署服务器上更新。您只能通过更改源标记文件并重新编译来更新应用程序。必须包含 targetDir 参数。

谁能为我解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:58:47.193

如果您指定`-u`页面和控件的标记 (aspx/ascx) 将保持原样并及时编译（例如，当第一次访问时）。这允许您直接在部署服务器上编辑标记（无需重新构建/发布解决方案）。

如果您不指定`-u`，则编译标记并将页面/控件替换为空的占位符文件。如果您需要更改标记，则必须在开发服务器上进行，然后重新构建/发布解决方案。

[本页](http://msdn.microsoft.com/en-us/library/ms229863%28v=vs.100%29.aspx)解释了 aspnet_compiler.exe 的所有选项。

* * *

顺便说一句：这部分文档对于决定是否使用可能很重要`-u`：

> 当您使用 [`-u`选项] 时，不会编译 .aspx 文件中的代码块（即位于脚本元素中或 <% 和 %> 标记之间的代码）。因此，如果这些代码块中 **存在编译错误，****您只会在运行时看到错误**，因为只有在那时才完全编译 .aspx 文件。对于依赖 .aspx 文件中的代码块的站点，使用此选项通常是不安全的。

# java - 能解释一下输出是怎么来的吗？

> ID：15508691
> 
> 赞同：0
> 
> 时间：2013-03-19T19:28:50.143
> 
> 标签：java, inheritance, constructor

```
public class A {
  public A(){
    System.out.println("A created");        
  }
  public static void main(String[] args) {
    new B();
  }
}

class B extends A{
    public B(){
        System.out.println("B created");
    }       
} 
```

上述程序的输出将是

```
A created

B created 
```

我不明白构造函数 A() 是如何被调用的。B() 中没有调用超级。但是仍然调用了 A() 。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T19:30:13.373

When class `B` extends class `A`, it will call constructor `A( )` by default.

That's the reason why the program prints `A created` before `B created`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:31:05.777

In child classes, `super()` is automatically called implicitly to ensure the object is properly constructed.

# c# - TCP 会分解小于 1kb 的数据吗？

> ID：15508695
> 
> 赞同：2
> 
> 时间：2013-03-19T19:29:08.657
> 
> 标签：c#, tcpclient

我正在创建一个 TCP 服务器。我听说你不能总是指望通过一次读取来读取所有数据，即使所有数据都是通过一次写入发送的。该协议可能会破坏它。我的问题是，仅用于大数据包还是会分解 1kb？500字节？任何尺寸都安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:34:54.510

您永远不能指望一次读取所有数据。您可以通过设置一个小的 MTU 来任意拆分包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:43:01.580

使用 TCP 套接字时，您无法控制发送的“数据包”。您只需向/从套接字写入/读取字节，协议控制它的传输方式和时间。

对方在任何时候愿意接收的数据量实际上都有一个最大值。这称为“[最大段大小](http://en.wikipedia.org/wiki/Maximum_segment_size)”。你无法知道它有多大，因为它是由你正在与之交谈的人决定的。它们可能只允许您以最多 1k 段或仅 500 字节段发送数据。没有办法知道，除非你可以控制两端。

此外，您写出的字节不仅可以分成更小的段，而且实际上可以将多个小的写入组合成一个更大的段。请参阅[Nagle 算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)。

# java - 休眠，在单个操作中保存集合属性

> ID：15508696
> 
> 赞同：0
> 
> 时间：2013-03-19T19:29:09.453
> 
> 标签：java, spring, hibernate, jakarta-ee, hibernate-mapping

我需要更好地理解休眠的这种行为，并想知道我是否可以对此事有所了解。有两个对象，`Contact`并且`Action`具有一对多的关系，即一个对象`Contact`可以有多个`Action`与之关联的对象。我想了解的是，当我存储到数据库时，如何存储 s 的集合`Action`（这是 s 的一个属性）。目前我正在做的是先存储s，然后存储s。以下是我的代码：模型对象：`Contact``Contact``Contact``Action`

```
public class Contact  implements Serializable{
    private Integer contactID;
    private String givenName;
    private String familyName;
    private Set<Action> actionSet = new HashSet<Action>();
}
public class Action  implements Serializable{
    private Integer actionID;
    private String actionNote;
    private Contact contact;
} 
```

休眠映射：

```
<hibernate-mapping package="com.hibernate.model" schema="hibernatedb">
<class name="Contact" table="CONTACT">
    <id column="CONTACT_ID" length="500" name="contactID">
        <generator class="increment" />
    </id>
    <property column="GIVEN_NAME" generated="never" lazy="false" length="100" name="givenName" />
    <property column="FAMILY_NAME" generated="never" lazy="false" length="100" name="familyName" />
    <!-- one to many mapping with Action -->
    <set inverse="true" lazy="false" name="actionSet" sort="unsorted">
        <key column="CONTACT_ID" />
        <one-to-many class="com.hibernate.model.Action" />
    </set>

</class>
</hibernate-mapping>

 <hibernate-mapping package="com.hibernate.model" schema="hibernatedb">
<class name="Action" table="ACTION">
    <id column="ACTION_ID" length="500" name="actionID">
        <generator class="increment" />
    </id>
    <property column="ACTION_NOTE" type="string" name="actionNote" />
    <!-- many to one mapping with Contact -->
    <many-to-one name="contact" column="CONTACT_ID"
        class="com.hibernate.model.Contact" lazy="false" cascade="save-update" />
</class>
</hibernate-mapping> 
```

这就是我目前尝试存储它的方式：

```
public class ContactServiceImpl implements ContactService{
    @Override
    public void addContacts(Contact contact) {

        contactDAO.addContact(contact);//saving the contact;
        if((contact.getActionSet()!=null)&&(contact.getActionSet().size()>0)){
            actionService.addAllActions(contact,contact.getActionSet());//saving actions, associated with the contact
        }

    }
} 
```

看，有两个操作导致保存`Action`s，因为它们是 的属性`Contact`，我相信当`Contact`保存 s 时，s 的集合也`Action`必须保存。请让我知道正确的做法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:48:39.437

尝试设置

`<set cascade="all"....`

这样，当您在联系人实体上调用保存时，休眠将保存您的操作集。

有关更多详细信息，请参阅[此](https://stackoverflow.com/a/1356759/760757)答案。

另外，请参阅[文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/example-parentchild.html)。

# iphone - 将 CC3Node 的位置设置在触摸的位置

> ID：15508698
> 
> 赞同：0
> 
> 时间：2013-03-19T19:29:09.833
> 
> 标签：iphone, ios, ipad, cocos2d-iphone, cocos3d

我想在水龙头上添加一个 CC3Node。但是，我使用的代码产生了一个奇怪的东西。我的对象被放置在触摸位置，但在第三象限（这样我的屏幕将被分成 4）

这是问题的一个例子：![在此处输入图像描述](../Images/e600d9cda8f7ec6228ae298cfb290131.png)

总结一下，当我点击白色方块的中心时，我得到了 hello world 放在象限的中心等。当我点击右上角时，我得到了重叠的紫色 hello world白色方块。

这是我正在使用的代码：

```
CGSize winSz = [[CCDirector sharedDirector] winSizeInPixels];
    GLfloat aspect = winSz.width / winSz.height;

    // Express touchPoint X & Y as fractions of the window size
    GLfloat xtp = ((2.0 * touchPoint.x) / winSz.width) - 1;
    GLfloat ytp = ((2.0 * touchPoint.y) / winSz.height) - 1;

    // Get the tangent of half of the camera's field of view angle
    GLfloat effectiveFOV = ((ViewInterface*)[ViewInterface sharedViewInterface]).currentScene.activeCamera.fieldOfView / ((ViewInterface*)[ViewInterface sharedViewInterface]).currentScene.uniformScale;
    GLfloat halfFOV = effectiveFOV / 2.0;
    GLfloat tanHalfFOV = tanf(DegreesToRadians(halfFOV));

    // Get the distance from the camera to the projection plane
    GLfloat zCam = ((ViewInterface*)[ViewInterface sharedViewInterface]).currentScene.activeCamera.globalLocation.z;

    // Calc the X & Y coordinates on the Z = 0 plane using trig and similar triangles
    CC3Vector tp3D = cc3v(tanHalfFOV * xtp * aspect * zCam,
                          tanHalfFOV * ytp * zCam,
                          0.0f); 
```

tp3D 是我使用 .location 属性在节点中设置的最终坐标。

我的图层正在接收手势并执行以下操作：

```
-(void) handleTapSelection: (UITapGestureRecognizer*) gesture {

    if ( [self cc3ValidateGesture: gesture] && (gesture.state == UIGestureRecognizerStateEnded) ) {
            CGPoint touchPoint = [self cc3ConvertUIPointToNodeSpace: gesture.location];
            [[StateInterface sharedStateInterface] tapDetected:gesture inView:nil locationInView:touchPoint];
            //[self.mashUpScene pickNodeFromTapAt: touchPoint];
        }
} 
```

如果我不首先使用此方法进行转换：`cc3ConvertUIPointToNodeSpace`，那么我会反转上下抽头。

我验证了winSz中返回的屏幕大小确实是正确的大小（2048、1320）。

此外，tp3D x 和 y 总是负数，这很奇怪......代码来自这里： http: [//www.cocos2d-iphone.org/forum/topic/14790](http://www.cocos2d-iphone.org/forum/topic/14790)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:28:45.507

你有没有看过 CoCos3d DemoMash，它对 cocos3d 的所有功能都有解释和代码，你想要做的，已经在那里实现了。

# vb.net - 文本框根据按钮选择出现

> ID：15508700
> 
> 赞同：0
> 
> 时间：2013-03-19T19:29:24.030
> 
> 标签：vb.net, dynamic, textbox, radio-button

我希望仅在选择单选按钮时出现文本框。我尝试使用 RadioButtonList 但我无法让它工作，所以我使用了单独的单选按钮。**但是，它没有用。**这是代码：

```
Protected Sub radItem_CheckedChanged(sender As Object, e As EventArgs) Handles radItem.CheckedChanged
    If radItem.Checked = True Then
        radClient.Checked = False
        radUser.Text = False
        btnSearch.Visible() = True
        txtSearch.Visible() = True
    End If
End Sub

Protected Sub radUser_CheckedChanged(sender As Object, e As EventArgs) Handles radUser.CheckedChanged
    If radUser.Checked = True Then
        radItem.Checked = False
        radClient.Text = False
        btnSearch.Visible() = True
        txtSearch.Visible() = True
    End If
End Sub

Protected Sub radClient_CheckedChanged(sender As Object, e As EventArgs) Handles radClient.CheckedChanged
    If radClient.Checked = True Then
        radItem.Checked = False
        radUser.Text = False
        btnSearch.Visible() = True
        txtSearch.Visible() = True
    End If
End Sub 
```

我很确定无论如何都有一种非常有效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:51:49.563

正如 tymeJV 提到`()`的，删除`Visible()`

此外，您不需要禁用其他单选按钮，除非它们专门单独分组。

由于无论选择了哪个单选按钮，您总是使按钮/文本框可见，因此您无需检查单选按钮的值。您的活动应如下所示（更改其他人以效仿）

```
Protected Sub radItem_CheckedChanged(sender As Object, e As EventArgs) Handles radItem.CheckedChanged
    btnSearch.Visible = True
    txtSearch.Visible = True
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:03:10.740

您应该使用 Click 事件，因为您正在处理相同的多个单选按钮

```
Protected Sub rad_Click(sender As Object, e As EventArgs) Handles radItem.Click, radUser.Click, radClient.Click
     If Ctype(sender, RadioButton).Checked = False Then Exit Sub
     Select Case Ctype(sender, RadioButton).Name
          Case "radItem"
               radUser.Text = False 'You are setting the Text value to False?
                                    'Are you sure about this?

          Case "radUser"
               radClient.Text = False

          Case Else 'radClient
               radUser.Text = False
     End Select

     'You are doing this regardless of which radio button is checked
     radItem.Checked = False 'This is weird. You wont be able to use radItem.

     'I dont think you need this two lines anymore. There is always 1 RadioButton that is checked
     btnSearch.Visible = True
     txtSearch.Visible = True
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:08:05.063

票价，将“GroupName”属性添加到您的单选按钮后，您无需设置其他 Radios 的 Text 或 Checked 状态，它会自动更新。

对于显示/隐藏文本框，您只需要设置`txtSearch.Visible() = True`OR`txtSearch.Visible() = False`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-08T11:25:31.567

在每个单选按钮中将 AutoPostBack 属性设置为 true。那么它将起作用。

# c# - 将数据插入数据库的存储库或服务 - 实体框架

> ID：15508702
> 
> 赞同：2
> 
> 时间：2013-03-19T19:29:25.970
> 
> 标签：c#, asp.net-mvc, entity-framework

我用什么来使用实体框架创建新地址：

操作1：

```
IRepository<Address> _addressRepository; 
```

并使用地址实体直接与数据库对话。

操作2：

```
public bool CreateAddress(AddressDto addressDto); 
```

并与服务方法交谈以插入新地址。

问题是，在项目的长期维护中，哪个更能保证不存在某人更改某些内容并破坏另一段依赖它的代码的风险？

根据您的经验，哪一种是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:48:08.307

根据我的经验，第二种选择效果最好。我喜欢有一个服务外观，在它后面可以以一种不会影响我的服务消费者的方式实现和调整业务逻辑。顺便说一下，服务可以是域服务、Web 服务、Web API 之类的东西。基本上，它是一个围绕业务逻辑和数据访问的外壳，只公开一些消费者可以调用的方法。

在我看来，公开存储库方法会泄露太多东西。为什么消费层会知道存储库的实现？而且您将永远与存储库模式联系在一起。关于 EF 和（通用）存储库的讨论很多。就个人而言，我讨厌通用存储库。我喜欢从总根的角度来思考。为每种实体类型拥有一个存储库通常太多了，它只会妨碍。`DbSet`a 中的 s`DbContext`是基本存储库。上下文非常适合作为一个工作单元。我倾向于直接在服务方法中使用上下文，而不是编排存储库和工作单元。当然，您*可以*使用存储库，但将它们隐藏在服务外观后面。

最后一点：我不会只从服务方法返回一个布尔值，而是一个包含有关方法失败/成功信息的对象。例如，Web API 中的 HttpResponse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:06:58.040

尝试使用这样的存储库：

```
 public class Repository<T> : IRepository<T> where T : class
{
    protected DbSet<T> DbSet;

    public Repository(DbContext dataContext)
    {
        DbSet = dataContext.Set<T>();
    }

    #region IRepository<T> Members

    public void Insert(T entity)
    {
        DbSet.Add(entity);
    }

    public void Delete(T entity)
    {
        DbSet.Remove(entity);
    }

    public IQueryable<T> SearchFor(Expression<Func<T, bool>> predicate)
    {
        return DbSet.Where(predicate);
    }

    public IQueryable<T> GetAll()
    {
        return DbSet;
    }

    public T GetById(int id)
    {
        return DbSet.Find(id);
    }

    #endregion
} 
```

当您需要一个新的 Adress 实例时，只需调用您的存储库为您执行此操作：

```
var adressRepository = new Repository<Adress>(yourDataContext); 
```

使用 AdressRepository 只需执行以下操作：

```
adressRepository.Insert(yourAdressObject) 
```

最后调用您的上下文的 SaveChanges ：

```
yourDataContext.SaveChanges(); 
```

# javascript - 为什么不使用依赖于浏览器的 CSS？

> ID：15508705
> 
> 赞同：0
> 
> 时间：2013-03-19T19:29:30.003
> 
> 标签：javascript, css

例如，SO 在加载时会抛出 50 多个 CSS 错误和警告，就像大多数流行网站一样。

简单地检测正确的浏览器并动态加载正确的 CSS 会很简单。

我试图理解为什么大多数网站都会忽略这些错误/警告？

尽管解析无用 CSS 的性能损失可能在微秒范围内，但这不只是草率的编码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T19:37:43.277

两个原因：

1.  在事物的客户端上检测正在使用的浏览器是**不可能的。**您可以嗅探`user-agent`随请求发送的标头（如果存在），但它仅与浏览器制造商和用户（因为用户可以禁用或更改标头值）允许它一样可靠。

2.  使用特定于浏览器的 CSS、DOM 或 Javascript “功能”会鼓励非标准实现。请参阅[http://www.webstandards.org/](http://www.webstandards.org/)了解为什么这很重要。您的建议是回归 Web 开发的“黑暗时代”。

最好在页面上简单地失败或显示横幅，指出客户端使用的浏览器是非标准的，并且考虑到浏览器的便宜程度——免费！— 暗示如果用户获得更好的浏览器，他们将在网络上获得更好的体验。

Jon Postel（愿他安息）曾经说过，为了健壮性，应用程序应该严格限制它们发出的内容并容忍它们接受的内容。早期的 HTTP 实现和早期的 HTML 渲染引擎对他们将接受的内容具有极端的容忍度，这最终导致了伟大的浏览器大战，Web 浏览器实现了各种非标准扩展，而 Web 服务器则提供了各种损坏、格式错误的服务标记。我会争辩说，如果浏览器制造商在接收非标准或格式错误的数据时简单地抛出错误，我们会做得更好。

针对 OP 的问题：

> 我试图理解为什么大多数网站都会忽略这些错误/警告？

简短的回答是因为标准规定了这种特定的行为。[请参阅http://www.w3.org/TR/CSS21/syndata.html#parsing-errors](http://www.w3.org/TR/CSS21/syndata.html#parsing-errors)上的 CSS 标准第 4.2 节。

# outlook - Atom/RSS Feed 显示仅在今天发布的帖子

> ID：15508706
> 
> 赞同：1
> 
> 时间：2013-03-19T19:29:30.597
> 
> 标签：outlook, rss, atom-feed, rss-reader

我托管了一个 ATOM 提要（通过我的 ERP 软件）。用户订阅 Outlook 中的提要。我将在 24 小时内发布一次新内容。所以我喜欢用户只有今天在他的 Outlook 中发布的提要（没有昨天发布的旧帖子，必须从 Outlook 中删除）。这是否可以通过 Outlook 中的某些设置或服务器端 Feed 的配置/参数更改来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:26:08.917

不，没有办法强制提要阅读器隐藏旧项目。文档建议可以将 Outlook 配置为丢弃旧项目 -[自动删除旧 RSS 项目](http://office.microsoft.com/en-gb/outlook-help/automatically-delete-older-rss-items-HA010199460.aspx)。只要您只提供过去 24 小时内的条目并且 Outlook 正在删除超过 24 小时的任何内容，您就应该得到您想要的行为。

# python - 用颜色和跨度保存 QTableWidget

> ID：15508708
> 
> 赞同：1
> 
> 时间：2013-03-19T19:29:33.403
> 
> 标签：python, python-2.7, pyqt, pyqt4

我有一个 QTableWidget，用户将在其中定义一些文本、一些背景和文本颜色，以及一些跨越（合并的单元格）。我现在的问题是保存用户完成的所有这些。

我正在考虑扫描所有行、所有列，获取这些属性，并正确自定义 txt 或任何文件。然后我可以解析这个文件来加载数据。

实际上我用这个做了一个原型：[将 QTableWidget 写入 .csv 或 .xls](https://stackoverflow.com/questions/12608835/writing-a-qtablewidget-to-a-csv-or-xls) 但保存到 csv 并不能处理颜色和跨越。

因此，在编写自己的“格式”之前，我会知道是否有标准格式？在这种情况下，python 大师会怎么做？

谢谢基布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:31:35.427

使用[QSettings](http://doc-snapshot.qt-project.org/4.8/qsettings.html)类来存储您的应用程序设置：

*   **列**：对于宽度和高度，使用[QHeaderView::saveState()](http://doc-snapshot.qt-project.org/4.8/qheaderview.html#saveState)和[QHeaderView::restoreState()](http://doc-snapshot.qt-project.org/4.8/qheaderview.html#restoreState)
*   **颜色**：

    > 由于 QVariant 是 QtCore 库的一部分，它不能提供对 QColor、QImage 和 QPixmap 等数据类型的转换功能，这些数据类型是 QtGui 的一部分。换句话说，QVariant 中没有 toColor()、toImage() 或 toPixmap() 函数。
    > 
    > 相反，您可以使用 QVariant::value() 或 qVariantValue() 模板函数

对于数据，一个 .csv 文件就可以了。

# javascript - 查看命名范围并将值打印到新工作表

> ID：15508710
> 
> 赞同：0
> 
> 时间：2013-03-19T19:29:39.860
> 
> 标签：javascript, google-apps-script, google-sheets

我对 JavaScript 比较陌生，所以请多多包涵。

我在谷歌电子表格中有一张座位表，它通过命名范围在两个相邻单元格中标记了坐在那儿的人的桌号和姓名。我希望我的代码遍历所有命名范围，并获取桌号和人员的值并将其吐到两列中的新工作表中——一列中的桌号和另一列中的用户名。我遇到的一个主要问题是一些桌面编号/用户范围是垂直的（例如：desk_1 = Sheet1！F6:F7，其中 F6 是桌面编号，F7 是用户）并且一些范围是水平的（例如：desk_2 = Sheet1! G2:H2 其中 G2 是用户，H2 是桌号）所以我不知道如何从多个方向搜索。这是我的一些代码，目前无法正常工作。任何建议将不胜感激！

```
enter code here
function findSeats() {
var sheet = SpreadsheetApp.getActiveSheet();
var wbk = SpreadsheetApp.getActiveSpreadsheet(); 

var rng_convention = "desk_"; 
var desk_name = rng_convention; 

var users = new Array();

for ( var i = 0; i <= 1000; i++) { 
  desk_name = rng_convention; 
  desk_name = desk_name + i; 

  var rng = wbk.getRangeByName(desk_name); 

if( !rng ) { 
  continue; }
else { 
  var vals = rng.getValues(); 
  var k = 0; 

  if(vals.length == 1) {
    //look left right horizontally for user
    if(vals[0][0] == i) { 
      // create a user for this named range. 
      var user = new Object(); 

      user.name = vals[0][1]; 
      user.position = vals[0][0]; 
      users[k] = user; 
      k++;
    }
    else { 
      //look right left horizontally for user
      if (vals [0][1] == i){
      // create the user for this named range. 
      var user = new Object();

      user.name = vals[0][0]; 
      user.position = vals[0][1]; 
      users[k] = user; 
      k++;
      }
    }
  } 
/*      else {
    /* something is wrong, I need to look up-down, and then down up for users */
  }
 } 
return users; 

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:20:53.763

你绝对是在正确的轨道上。你唯一真正的错误是你`var k = 0`在一个循环中设置，但试图在同一个循环中增加它。结果是您只获得了一个用户。

您希望能够确定办公桌/用户配对是水平排列还是垂直排列。为此，您正在检查由`length`返回的二维数组的`.getValues()`，它运行良好。那里没问题。

在您的问题中，您提到了办公桌/用户对的两种排列方式，但在您的代码中出现了您关注的四种，因为在您编码的水平方向中，您正在寻找办公桌号码的位置，并且假设名称在对面的单元格中。只要桌号始终与范围名称匹配，就可以了。（您可以只检查该值是否为 a `number`。）

所以，这是我为完成这项工作所做的更改。

*   首先，完全摆脱`k`，并依靠`push()`构建`users`阵列 - 更简单，更不容易出错。
*   我将用户对象的创建移到了测试方向的 if-then-else 块之外，同时设置了桌号。（不需要从电子表格中读取该值，因为它已经是一个循环值。）
*   我完成了垂直方向的处理，反映了清理后的水平处理。（你知道......你可以进一步优化它，但它会失去清晰度。）
*   添加了注释，并整理了缩进！（实际上，我是在检查代码时这样做的。）

这是生成的功能代码。

```
function findSeats() {
  var wbk = SpreadsheetApp.getActiveSpreadsheet(); 

  var rng_convention = "desk_"; 
  var desk_name = rng_convention; 

  var users = new Array();

  for ( var i = 0; i <= 1000; i++) { 
    desk_name = rng_convention + i; 

    var rng = wbk.getRangeByName(desk_name); 

    if ( !rng ) { 
      // No matching range name
      continue; 
    }
    else { 
      var vals = rng.getValues(); 

      // create a user for this named range. 
      var user = new Object(); 
      user.position = i; 

      var valsLength = vals.length;
      // Check orientation of the range:
      //    Horizontal...  vals.length == 1 (row)
      //    Vertical means vals.length == 2 (rows)
      if(vals.length == 1) {
        // Check whether we have desk / user, or user / desk
        if(vals[0][0] == i) { 
          // desk / user
          user.name = vals[0][1]; 
        }
        else { 
          // user / desk
          user.name = vals[0][0]; 
        }
      }
      else {
        // vals.length == 2
        // Check whether we have desk / user, or user / desk
        if(vals[0][0] == i) { 
          // desk / user
          user.name = vals[1][0]; 
        }
        else { 
          // user / desk
          user.name = vals[0][0]; 
        }
      }

      // Add this user to our array
      users.push(user);
    }
  }
  // Return array of user objects
  return users; 
}; 
```

## 样本数据

![样本数据](../Images/6e7d58d2235cfd1d2b30e27a2453c9ee.png)

## 调试输出

![调试输出](../Images/0058f96fa644907b307c4b05c29a83b7.png)

## 编辑：在电子表格中记录所有收集的数据

要回答后续问题，可以直接将所有收集到的办公桌和用户信息放入电子表格中。为了准备`.setValues()`函数，我们需要将我们的对象转换为二维数组，这很容易。或者，可以重构先前的代码以首先生成一个数组。

这是我们如何执行转换并将所有数据写入工作表的方法。如果命名的工作表不存在，我们将首先创建它 - 否则，我们将替换以前的内容。

```
// Record all desk / user data to a (new) sheet
function recordAllDeskUsers() {
  var users = findSeats();
  var userArray = new Array();
  userArray.push(["Desk #","User Name"]);

  for (var i in users) {
    var thisUser = [users[i].position,users[i].name];
    userArray.push(thisUser);
  }

  // Open the target sheet - if it doesn't exist, insert it.
  var userSheetName = "All Desks";
  var userSheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName(userSheetName);
  if (!userSheet) {
    SpreadsheetApp.getActiveSpreadsheet().insertSheet(userSheetName)
    userSheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName(userSheetName);
  }

  // Clear the sheet, then write our collected values to it.
  userSheet.clear();
  userSheet.getRange(1, 1, userArray.length, userArray[0].length).setValues(userArray);
} 
```

# google-apps-script - 如何在脚本中诱导电子表格的 onFormSubmit 触发器？

> ID：15508712
> 
> 赞同：0
> 
> 时间：2013-03-19T19:29:46.213
> 
> 标签：google-apps-script

有没有办法在脚本中触发电子表格的 onFormSubmit？也就是不使用google表单来触发onFormSubmit？我尝试将以下 sendHttpPost 代码发布到电子表格 Web 应用程序：

```
function sendHttpPostSelf() {
var payload = {
      "name" : "name",
      "comment" : "comment",
    };
  var options = {
      "method" : "post",
      "payload" : payload
    };
var url="https://script.google.com/macros/s/AKfycbzlVoiDQMbLe4yliErDoNub6A0m3tijSfPAUMEBENgIikQnLQ_H/exec";
var resp=UrlFetchApp.fetch(url,options);
Logger.log(resp.getContentText());
} 
```

该代码正确触发了电子表格 Web 应用程序中的 doPost()。但是，代码不会触发电子表格的 onFormSubmit。或者，有没有办法在插入电子表格时编写*onInsert触发器？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:37:53.803

onFormSubmit 触发器只会在 Google 表单提交时触发。获取应用程序脚本代码来触发它非常棘手/不受支持。

如果您只想检测新行，可以使用 onEdit 触发器检查范围以查看插入的内容。

[https://developers.google.com/apps-script/understanding_events](https://developers.google.com/apps-script/understanding_events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:54:50.213

[在上一个答案](https://stackoverflow.com/a/15234631/1677912)中提供了一个不触发 onEdit 的事物列表，以及它们的问题跟踪 ID 。那里有演示检测新行的示例代码......但需要注意的是，您需要进行一些其他类型的编辑才能触发它！

所以，坏消息 - 尽管 Arun 的回答是，插入行和脚本写入值都不会触发 onEdit。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:27:00.093

如果我错了，请告诉我，但据我所知，您想提交的值不是通过谷歌表单传递，而是使用您自己构建的表单，并且您想通过 doPost 操作提交。
如果是这样，您可以执行以下操作：
1/ 使用 appenrow() 将 doPost 中的数据插入电子表格中
2/ 在 doPost() 中调用通常使用 onFormSubmit 调用的函数（您需要转移到 onFormSubmit函数的好参数（就好像它是用一个真正的 formSubmit 调用的）

这是一个示例函数：

```
function onformSubmit(e){ 
  var answers = e.values;
  if (typeof(answers) == "undefined") answers = e;
  MailApp.sendEmail("youremailadress", "form first answer", answers[1]);

}
function doPost(e){
  MailApp.sendEmail("youremailadress","reponse doPost",e.parameter.name);
  SpreadsheetApp.openById("spreadsheet id").getSheetByName("spreadsheet name").appendRow([new Date(),e.parameter.name,e.parameter.comment]);
  var toe = [new Date(),e.parameter.name,e.parameter.comment];
  onformSubmit(toe);
  return(ContentService.createTextOutput().setContent("okey"));
}
function submitIt(){
  var payload = {
      "name" : "name",
      "comment" : "comment",
    };
  var options = {
      "method" : "post",
      "payload" : payload
    };
var url="https://script.google.com/macros/s/yourscripturl/exec";
var resp=UrlFetchApp.fetch(url,options);
} 
```

当您启动 submitIt() 时，它会调用 doPost 来在电子表格中写入行，就像提交表单时一样，然后它会调用函数 onformsubmit（通常在提交表单时调用）

# jquery - jQuery 中的 parentOrSelf([选择器])

> ID：15508713
> 
> 赞同：1
> 
> 时间：2013-03-19T19:29:48.427
> 
> 标签：jquery, events, jquery-selectors

我在很多 JS 脚本中使用事件委托。通常，我会做的是我将拥有一个全局事件处理程序，并且我会追踪到接收事件的元素。问题是我在安装事件时不能*总是*使用 jQuery 的过滤选择器。例如，如果您正在使用它：

```
$('.todo').on('click', function(e) {
  // The event target is guaranteed to be something having the
  // class .todo
  var todo = e.target;
}); 
```

然后就很简单了

但是，我现在在 Backbone 中使用视图事件委托，我可以在那里安装一个事件处理程序：

```
 'click .todo' : 'someHandlerFunction' 
```

问题出在那个处理函数中，我不能保证在右边接收到事件目标，但我可以得到它的后代之一。也就是说，我正在获取事件对象，但由于冒泡，它的目标也可以是具有“.todo”类的东西内部的一个元素。

理想情况下，我希望有一个简单的功能可以做到这一点：

```
 $(document.body).on('click', function(evt) {
   var interestingElementOrNull = jQuery(evt.target).parentOrSelf('.todo');
 }); 
```

但我必须首先`hasClass()`对事件目标执行 a ，然后（如果不匹配）执行`parent()`调用。

有没有更好/标准的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:37:20.800

如果您不想每次都手动检查事件目标，您可以编写自己的插件：

```
$.fn.parentOrSelf = function(selector){
    return this.is(selector) ? this : this.closest(selector);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:37:34.937

正如wirey所说，如果你想要`ancestorOrSelf()`而不是`parentOrSelf()`，你只需要使用[closest()](http://api.jquery.com/closest/)：

```
var element = jQuery(evt.target).closest(".todo"); 
```

如果你真的想要`parentOrSelf()`，你可以将[parent()](http://api.jquery.com/parent/)链接到[addBack()](http://api.jquery.com/addBack/) ^*并将[filter()](http://api.jquery.com/filter/)应用于结果：

```
var element = jQuery(evt.target).parent().addBack().filter(".todo"); 
```

但是请注意，在这两种情况下，`element`它将是一个空的 jQuery 对象，而不是`null`没有匹配的对象。如果要确定某些内容是否匹配，可以测试其[长度属性。](http://api.jquery.com/length/)

[*在 jQuery 1.8 之前`addBack()`被命名为[andSelf() 。](http://api.jquery.com/andSelf/)]

# meteor - How do I make a subscription update when another collection, not returned by the publish function, changes?

> ID：15508716
> 
> 赞同：2
> 
> 时间：2013-03-19T19:29:59.203
> 
> 标签：meteor

I've adapted server.js from the Parties example.

Instead of having "directory" publish all the users I want it to publish only those users that:

*   own a party the current user is invited to
*   are invited to a party the current user is invited to
*   are invited to a party the current user owns

See here: [https://github.com/dimfisch/meteor-dependency/blob/master/parties/server/server.js](https://github.com/dimfisch/meteor-dependency/blob/master/parties/server/server.js)

The problem is that when the current user invites a new user (new in the sense that they haven't been party-related previously) or gets invited by a new user, the "directory" subscription doesn't update, since the reactivity is on the cursor returned, which doesn't change in these cases.

Here are the steps to reproduce this situation:

1.  open two different clients, say Joe and Kate
2.  Joe creates a new private party and invites Kate
3.  Kate sees that new party, but doesn't get any info about Joe in Meteor.users
4.  I want Joe to show up in Kate's client

So the question is, how can that be achieved? One potential route is to make the "parties" cursor observeChanges, in the "directory" publish function. But I'm not sure this would actually work and I'm wondering if there's a more straightforward solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:51:20.627

似乎您可以在客户端使用 observeChanges 。每当`parties`集合更改时，停止并重新启动`users`订阅，这会强制发布功能重新运行。

`parties`发布功能只会发送当前用户有权访问的参与方信息。`users`发布功能将为有权访问同一方的任何用户发送适当的用户信息。

在服务器端，您可能可以做同样的事情，但它会做更多的工作......`parties`正常发布，但仅手动发布`users`与用户共享的内容。不确定删除案例如何工作。似乎这会很痛苦，而且可能效率不高。

# nginx - nginx + php-fpm cant run script more than 50 sec

> ID：15508719
> 
> 赞同：0
> 
> 时间：2013-03-19T19:30:05.557
> 
> 标签：nginx, php

there is a script which runs more than 50sec, but after 50 sec a got "504 Gateway Time-out".

My fpm pool config

```
[oscommerce]
listen = /srv/www/oscommerce/run/runphp53.sock
listen.allowed_clients = 127.0.0.1
listen.owner = oscommerce
listen.group = oscommerce
listen.mode = 0666
user = oscommerce
group = oscommerce
pm = dynamic
pm.max_children = 16
pm.start_servers = 1
pm.min_spare_servers = 1
pm.max_spare_servers = 16

catch_workers_output = yes

request_terminate_timeout = 600

php_admin_value[error_log] = /srv/www/oscommerce/log/php-fpm53.error.log
php_admin_flag[log_errors] = on
php_admin_value[upload_max_filesize] = 100M
php_admin_value[post_max_size] = 100M
php_admin_value[default_socket_timeout] = 600
php_admin_value[mysql.connect_timeout] = 600
php_admin_value[session.use_only_cookies] = 0
php_admin_value[date.timezone] = Europe/Moscow

php_admin_value[max_execution_time] = 600
php_admin_value[max_input_time] = 600
php_admin_value[display_errors] = On
php_admin_value[display_startup_errors] = On
php_admin_value[error_reporting] = E_ALL 
```

and my vhost config

```
server {
        server_name ...;
        root /srv/www/oscommerce/httpdocs;
        index index.html index.htm index.php;

        client_header_timeout 300s;
        client_body_timeout 300s;
        send_timeout 300s;

        error_log /srv/www/oscommerce/log/error.log;
        access_log /srv/www/oscommerce/log/access.log;

        location ~* \.(jpg|jpeg|gif|png|ico|css|bmp|js|swf)$ {
                root /srv/www/oscommerce/httpdocs;
        }

        location / {
                index index.php;
                try_files $uri $uri/ /index.php?$args;
        }

        location ~ \.php$ {

                #proxy_read_timeout 600s;
                #proxy_connect_timeout 600s;

                #fastcgi_connect_timeout 300s;
                #fastcgi_send_timeout 300s;
                #fastcgi_read_timeout 300s;

                fastcgi_pass unix:/srv/www/oscommerce/run/runphp53.sock;
                fastcgi_index index.php;
                include fastcgi_params;
                fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
                fastcgi_param  QUERY_STRING       $query_string;
                fastcgi_param  PATH_INFO        $uri;  #necessary for URL rewrite

                fastcgi_connect_timeout 300s;
                fastcgi_send_timeout 300s;
                fastcgi_read_timeout 300s;
        }
} 
```

There is no serious error.

I lost 5 days to solve this issue, but there is no result. any ideas?

# node.js - Expressjs重置同一用户的其他会话

> ID：15508721
> 
> 赞同：0
> 
> 时间：2013-03-19T19:30:10.613
> 
> 标签：node.js, mongodb, express

我有一个使用 express 和 mongodb 设置的 nodejs 应用程序。该应用程序有一个登录区域，我正在使用 mongodb 的快速会话来保存登录的会话，这样如果用户没有从帐户中注销，我可以让他们在下次访问该站点时保持登录状态。同一用户可以在同一台计算机上的不同计算机或浏览器中拥有一个或多个登录会话。

我在删除同一用户的会话时遇到问题。当用户更新会员信息（例如上传新的个人资料图片）时，我想删除**同一用户的另一个会话。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:28:01.740

最终做了以下事情（直到提出更好的解决方案）：

1.  在编辑配置文件时获取所有会话
2.  循环每个会话

    一世。将会话字符串转换为 JSON

    ii. 比较 sessionIDs，如果不是当前 sessionID 从 mongodb 中删除文档或继续下一个

3.  更新当前会话

# android - 为 android 调整大小/浮动页面

> ID：15508725
> 
> 赞同：0
> 
> 时间：2013-03-19T19:30:15.230
> 
> 标签：android, html, css

我正在尝试设计一个可以在计算机和智能手机上轻松查看/使用的 Web 表单。我创建了一个浮动布局，它与浏览器窗口一起从 1000px 调整到 300px。它在计算机上运行良好，并且从我在 iPhone 上被告知的内容来看。但是当用户在 Android 上拉起它时，Android 只是将其缩小以查看整个 1000px 页面，而不是将其“折叠”到“窄”模式。

[链接不再有效]

我是否必须使用某种类型的浏览器检测来执行此操作？或者有没有办法让 Android 像一个非常狭窄的计算机网络浏览器窗口一样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:33:41.357

你的元视口有 dpi 吗？

```
<meta content="width=device-width, target-densityDpi=device-dpi" name="viewport"> 
```

# ios - 重大变更通知在关闭后仍然存在，甚至版本升级？

> ID：15508731
> 
> 赞同：0
> 
> 时间：2013-03-19T19:30:42.463
> 
> 标签：ios, cllocationmanager

我有一个使用 LocationManager 的应用程序。有一段时间我在使用重大位置更改通知。当我阅读文档时，我相信两件事是真实的：

1.  他们并没有真正消耗任何额外的电池，因为你基本上是在告诉电话，'只要告诉我你已经拥有的知识。
2.  当应用程序关闭时，通知停止。

一旦我介绍了这一点，我就收到了很多人发来的电子邮件，他们指责我烧毁了他们的电池。所以我把它拿出来了。

昨天收到一封电子邮件，告诉我设置/隐私中的位置箭头仍然是紫色的，即使应用程序没有运行也是如此。在我的手机上也是如此。

我只能想到两种可能：

1.  尽管升级到较新版本等，重大变更通知的注册仍然有效。
2.  或者，有一次应用程序在位置管理器打开时崩溃并且从未关闭过。

2 似乎很牵强，因为我认为可能会发生很多这样的事情。我有点失望的是，在 Instruments 中无法查看系统认为它对应用程序的义务是什么，以及这些义务是什么时候生效的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:03:00.940

很高兴看到应用程序的哪些代理处于活动状态，甚至超出了正在运行的应用程序。

根据我对重要位置更改的了解，它们的工作原理与区域监控相同。如果您有用户抱怨电池寿命，他们可能会被其他东西烧毁。-significantLocationChanges 使用的位置项比 -regionMonitoring 少。我相信它们与蜂窝塔严格相关。他们也可能使用 Wifi 检测，但他们不会做广告。

此外，即使应用程序已被终止以及在更新和升级之间，位置监控也会持续存在。我不知道如果您升级应用程序并在应用程序仍在监视它们时删除委托方法，应用程序将如何运行。我的猜测是他们会在那里被孤立，回调会尝试通知您的应用程序，但方法已经消失并将被忽略。只是一个猜测，但可能值得测试。可能值得留下那些或删除所有位置监控的方法。然后在以后的更新中删除所有这些，以确保没有人仍然有任何活动的位置代码。

# sql-server - 使用相关数据点构建组

> ID：15508732
> 
> 赞同：2
> 
> 时间：2013-03-19T19:30:43.997
> 
> 标签：sql-server, sql-server-2008, ssas, data-mining, business-intelligence

我试图找到一种方法来开发基于数据点的事物组，这些数据点与单个“事物”相关，但也与彼此相关。

例如，假设我正在尝试对在家中收到的垃圾邮件进行分组。当我收到这封信时，我记录：

*   邮戳所在的城市和州
*   退货地址街道、商家名称、城市、州和邮政编码
*   商家的电话号码
*   信封的大小和颜色
*   打印信封时使用的字体

还可以说，随着时间的推移，我看到相同的退货地址和/或电话号码出现了不同的公司名称。我可以推断所有这些信件可能都是由同一家公司发出的。我可以将地址、电话号码和公司名称关联在一起作为同一个“实体”。

或者，我看到完全不同的地址和电话号码，但信封上的大小、颜色、邮戳和字体都一样。我可以推断（不太确定）这些也可能来自同一个企业。

我正在寻找的是获取此类数据并根据重叠数据将其分组为“桶”（实体）的最佳方法......使用 SQL Server、Analysis Services 或它们的某种组合......这样我最终得到一种输入单个数据点以查看它是否与任何其他数据点相关的方法（例如，输入字母中的电话号码以查看与之相关的实体或字母组）。

有人可以指出我正确的方向吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:47:28.420

对于每条记录，我都会问：“这有多独特？” 然后开始根据它在逻辑上分解它......

状态：具有大规模复制潜力的低唯一数据集；创建一个带有标识列的 [State] 表，并在可能的情况下使用所有可能的值预先填充它，以减少非聚集索引上的索引碎片。

```
Create  Table [dbo].[State] (StateID Int Identity, StateName Varchar(32))
Create  Unique Clustered Index ix_stateID On [dbo].[State] (StateID)
Create  Unique NonClustered Index ix_SN On [dbo].[State] (StateName) 
```

ZipCode：中等独特的数据集，具有不错的重复机会，但每个 ZipCode 都与一个状态相关联。再一次，预先填充这个对于避免渐进式索引碎片可能很有用，但是根据您期望它增长的速度，让它按原样填满并定期重新索引可能是有意义的。如果您只想跟踪美国地址并且只预先填充前五位数字就可以了（如果您正在这样做，请将 ZipCode 列更改为 Int ）。

```
Create  Table [dbo].[ZipCode] (ZipCodeID Int Identity, StateID Int, ZipCode Varchar(16))
Create  Unique Clustered Index ix_zipcodeID On [dbo].[ZipCode] (ZipCodeID)
Create  Unique NonClustered Index ix_stateID_ZC On [dbo].[ZipCode] (StateID, ZipCode) 
```

City：这个表将有一个相当大的数据集，但仍有大量重复的机会，所以我们将再次创建一个身份值，但这次我绝对不会预先填充。

```
Create  Table [dbo].[City] (CityID Int Identity, ZipCodeID Int, CityName Varchar(64))
Create  Unique Clustered Index ix_cityID On [dbo].[City] (CityID)
Create  Unique NonClustered Index ix_zipcodeID_C On [dbo].[City] (ZipCodeID, City) 
```

StreetAddress：这与我们将在没有地址的情况下得到的一样有选择性，但我们仍然希望创建一个 ID 列，因为我们可以从同一个地址接收大量邮件。

```
Create  Table [dbo].[StreetAddress] (StreetAddressID Int Identity, CityID Int, StreetAddress Varchar(256))
Create  Unique Clustered Index ix_streetaddressID On [dbo].[StreetAddress] (StreetAddressID)
Create  Unique NonClustered Index ix_cityID_SA On [dbo].[StreetAddress] (CityID, StreetAddress) 
```

对于电话号码，我可能会按 [AreaCode] 和 [PhoneNumber] 将其分解，所以...

```
Create  Table [dbo].[AreaCode] (AreaCodeID Int Identity, AreaCode Int)
Create  Unique Clustered Index ix_areacodeID On [dbo].[AreaCode] (AreaCodeID)
Create  Unique NonClustered Index ix_AC On [dbo].[AreaCode] (AreaCode)

Create  Table [dbo].[PhoneNumber] (PhoneNumberID Int Identity, AreaCodeID Int, PhoneNumber Int)
Create  Unique Clustered Index ix_phonenumberID On [dbo].[PhoneNumber] (PhoneNumberID)
Create  Unique NonClustered Index ix_acID_PN On [dbo].[PhoneNumber] (AreaCodeID, PhoneNumber) 
```

然后对于其余部分，我将创建单个深度查找表（大小、颜色、字体等）

```
Create  Table [dbo].[Characteristic] (CharacteristicID Int Identity, Characteristic AppropriateDataType)
Create  Unique Clustered Index ix_characteristicID On [dbo].[Characteristic] (CharacteristicID)
Create  Unique NonClustered Index ix_abrevCharact On [dbo].[Characteristic] (Characteristic) 
```

然后终于有了你最独特的物品，你的邮件......

```
Create  Table [dbo].[Letter] (LetterID Int Identity, Received DateTime, StreetAddressID Int, PhoneNumberID Int, CharacteristicIDs ...) 
```

根据您最常运行的查询，找出对您的 [dbo].[Letter] 表有意义的索引，有效的查询应该像编写具有必要连接和逻辑的适当查询一样简单。:)

那是我的2美分。

# c++ - OOP 设计 - 从具有泛型类型的容器继承

> ID：15508736
> 
> 赞同：0
> 
> 时间：2013-03-19T19:30:50.457
> 
> 标签：c++, oop, class, inheritance

我有两个类，比如`CollectionA`and `CollectionB`，它们都继承自 a `Collection`。`Collection`有一个`std::array<GenericType>`属性。我想`CollectionA`用作一个集合，其继承的`std::array`包含类型`ClassA`( `std::array<ClassA>`) 的元素并`CollectionB`包含一个`std::array<ClassB>`. 这可能吗？如果可以，我该如何实现这个设计？

注意：如果此问题需要模板，我不熟悉模板。

**编辑**：`Collection`是用户定义的，所以我不是直接继承自`std::array`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:34:53.163

模板将是显而易见的解决方案，从

```
template<typename Element>
class Collection
{
protected:
    std::array<Element> arrr_;
};

class CollectionA : public Collection<ClassA>
{
};

class CollectionB : public Collection<ClassB>
{
}; 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:35:01.200

像这样定义它们

```
class ContainerA : public Container<ClassA> {...};
class ContainerB : public Container<ClassB> {...}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:36:25.917

```
 template <class T>
  class Collection {
    protected:
      std::array<T> data_;
  };

  class CollectionA : public Collection<A> {
   /*
    you can use data_ in this class. 
    data_ will be of type std::array<T>;
   */
  }; 
```

# jpa - Retrieving a HashMap

> ID：15508738
> 
> 赞同：0
> 
> 时间：2013-03-19T19:30:59.503
> 
> 标签：jpa, map, hashmap, eclipselink, jpql

A entity containing a HashMap (annotated with ElementCollection) will be persisted using Eclipse Link / JPA.

By using the following JPQL query the HashMap should be retrivied now:

```
SELECT t.myMap FROM myEntity t WHERE t.id = :id" 
```

Unfortunately the result is not the Map again, but a list of Strings which are (only) the values of the HashMap.

How can I get the HashMap as a single result?

Any help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:37:06.397

你不能。您要求的不是实体中的集合，而是联接中的元素。您可能会得到的最好的结果是查询实体并使用它的 getMyMap() 来获取您所追求的集合

# sql - Inserting Form feed/Page break data in MS-SQL table

> ID：15508740
> 
> 赞同：0
> 
> 时间：2013-03-19T19:31:01.560
> 
> 标签：sql, sql-server, tsql

I have some textual data which comprises of form feed characters (`FF`) as I see in Notepad++. I need to insert this data into a MS-SQL table cell.

I created a table with `nvarchar` datatype and tried adding this data, but it didn't work. I then redesigned the table and tried using the `text` datatype, but it still didn't work.

Any ideas on how I can insert data of this sort into a SQL table?

Please consider the data somewhat like the this:

```
Alex Smith
FF
John Doe
FF
Smith Jones
FF 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:07:46.597

这可能会对您有所帮助。您将需要在 SQL 中使用换行符

[http://blog.sqlauthority.com/2007/08/22/sql-server-t-sql-script-to-insert-carriage-return-and-new-line-feed-in-code/](http://blog.sqlauthority.com/2007/08/22/sql-server-t-sql-script-to-insert-carriage-return-and-new-line-feed-in-code/)

# matlab - 确保矩阵是对称的（和半正定的）

> ID：15508743
> 
> 赞同：2
> 
> 时间：2013-03-19T19:31:10.907
> 
> 标签：matlab, matrix, covariance

我目前正在为一组协方差矩阵实现在线估计算法，由于数值错误，我的协方差矩阵在任何时候都不是对称的。

我目前通过将上三角矩阵镜像到下三角矩阵来解决这个问题：

```
 for i=1:T
       tempSigma(:, :, i) = eye(D)/sigmaT(:,:,i);
       temp = triu(tempSigma(:,:,i), 1);
       tempSigma(:, :, i) = triu(tempSigma(:, :, i));
       tempSigma(:, :, i) = tempSigma(:, :, i) + temp';
    end 
```

对于较大的 *T*s，循环遍历每个矩阵变得非常慢。有什么办法可以在 Matlab 中加快速度吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T19:38:44.217

所以你有一个 NxNxT 数组，其中矩阵的每个平面都被视为协方差矩阵？

学习使用 MATLAB，因为它是为使用而设计的。尽量避免显式循环。例如，这将简单地平均上下三角形：

```
tempSigma = (tempSigma + permute(tempSigma,[2 1 3]))/2; 
```

这是解决问题的合乎逻辑的方法，可以说比完全扔掉下三角形更好。它在一行代码中运行，没有显式循环。

# android - external allocation too large for this process, android

> ID：15508752
> 
> 赞同：0
> 
> 时间：2013-03-19T19:31:24.073
> 
> 标签：android, png, heap-memory

in my simple app i am using 6 buttons and setting background with png.

```
Button btnGadgetmusic   = (Button) findViewById(R.id.gadgetmusic);
btnGadgetmusic.setBackgroundResource(R.drawable.btnselectedsong); 
```

minimum size of png is 13.5K and maximum size is 40K. When ever i try to run this app on emulator with version 2.3, i get "external allocation too large for this process" and interestningly if i run on honeycomb or on ICS then there is no problem.

So i am confused what should i do, should i ignore it, if not, do we have some better solution for that.

looking for your reply

EDIT Log File added

```
I/dalvikvm-heap(4190): Clamp target GC heap from 25.494MB to 24.000MB

D/dalvikvm(4190): GC_FOR_MALLOC freed <1K, 51% free 2647K/5379K, external 18806K/20812K, paused 28ms

D/dalvikvm(4190): GC_EXTERNAL_ALLOC freed <1K, 51% free 2647K/5379K, external 18806K/20812K, paused 49ms

I/dalvikvm-heap(4190): Clamp target GC heap from 25.833MB to 24.000MB

D/dalvikvm(4190): GC_FOR_MALLOC freed 0K, 51% free 2647K/5379K, external 19153K/20812K, paused 25ms

D/dalvikvm(4190): GC_EXTERNAL_ALLOC freed <1K, 51% free 2657K/5379K, external 19153K/20812K, paused 56ms

I/dalvikvm-heap(4190): Clamp target GC heap from 25.852MB to 24.000MB

D/dalvikvm(4190): GC_FOR_MALLOC freed <1K, 51% free 2657K/5379K, external 19162K/20812K, paused 24ms

D/dalvikvm(4190): GC_EXTERNAL_ALLOC freed 4K, 51% free 2671K/5379K, external 19162K/20812K, paused 69ms

I/dalvikvm-heap(4190): Clamp target GC heap from 25.887MB to 24.000MB

D/dalvikvm(4190): GC_FOR_MALLOC freed 0K, 51% free 2671K/5379K, external 19184K/20812K, paused 28ms

W/KeyCharacterMap(4190): No keyboard for id 0

W/KeyCharacterMap(4190): Using default keymap: /system/usr/keychars/qwerty.kcm.bin

W/KeyCharacterMap(4190): No keyboard for id 0

W/KeyCharacterMap(4190): Using default keymap: /system/usr/keychars/qwerty.kcm.bin

I/dalvikvm-heap(4190): Clamp target GC heap from 25.913MB to 24.000MB

D/dalvikvm(4190): GC_CONCURRENT freed 16K, 50% free 2697K/5379K, external 19184K/20812K, paused 
3ms+35ms

I/dalvikvm-heap(4190): Clamp target GC heap from 25.942MB to 24.000MB

D/dalvikvm(4190): GC_CONCURRENT freed 13K, 50% free 2727K/5379K, external 19184K/20812K, paused 3ms+3ms

D/dalvikvm(4190): GC_EXTERNAL_ALLOC freed 2K, 50% free 2724K/5379K, external 19184K/20812K, paused 65ms

E/dalvikvm-heap(4190): 20736-byte external allocation too large for this process.

I/dalvikvm-heap(4190): Clamp target GC heap from 25.939MB to 24.000MB

E/GraphicsJNI(4190): VM won't let us allocate 20736 bytes

D/dalvikvm(4190): GC_FOR_MALLOC freed 0K, 50% free 2724K/5379K, external 19184K/20812K, paused 38ms

D/skia(4190): --- decoder->decode returned false

D/AndroidRuntime(4190): Shutting down VM

W/dalvikvm(4190): threadid=1: thread exiting with uncaught exception (group=0x40015560)

E/AndroidRuntime(4190): FATAL EXCEPTION: main

E/AndroidRuntime(4190): java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

# javascript - jquery inArray 的奇怪行为

> ID：15508759
> 
> 赞同：0
> 
> 时间：2013-03-19T19:31:37.250
> 
> 标签：javascript, internet-explorer, internet-explorer-8

您好，这似乎适用于 IE8：

```
var clsName = link.parents("div.fixed_column").attr("class").split(" ");

if($.inArray("column_one", clsName) 
```

虽然这个报告错误（jquery 中的对象预期错误）。

```
var clsName = link.parents("div.fixed_column").attr("class"); 
```

这样做的正确方法是什么？我认为 inArray 的目的是 jquery 将处理跨浏览器问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:46:19.107

不幸的是，这间接回答了你的问题，但是......你似乎正在寻找一个元素是否有一个类，并且由于你已经在使用 jQuery，只需使用该`hasClass`方法 - [http://api.jquery.com /hasClass/](http://api.jquery.com/hasClass/)

对于您的特定代码，请尝试：

```
if (link.parents("div.fixed_column").hasClass("column_one")) {
    // It has the "column_one" class
} 
```

您的问题更直接的答案是`link.parents("div.fixed_column").attr("class")`返回单个字符串。当 jQuery 选择器 ( `div.fixed_column`) 返回多个元素时，这在使用类时很有可能，使用获取信息的 jQuery 方法（例如`.attr`，使用一个参数...“获取”值）仅返回第一个匹配元素的值。

所以说选择器匹配3个元素：

```
["<div id='div30' class='fixed_column div30_class'></div>",
 "<div id='div2' class='fixed_column div2_class'></div>",
 "<div id='div17' class='fixed_column div17_class'></div>"] 
```

然后返回的值`.attr("class")`将是：`fixed_column div30_class`因为它是第一个匹配的元素。

我不确定，但我认为您期望 jQuery 返回一个包含所有匹配元素值的数组，但它没有。所以这并不意味着 jQuery 不处理跨浏览器问题，它只是意味着您需要查看该方法执行/返回的内容。

我可以发誓 jQuery 2.0 可以选择做你想做的事 - 直接通过调用 getter（或类似的东西），但我再也找不到它了 :( 也许我记错了。无论如何，你可以很容易地使用`$.each`和/或`$.map`查看每个匹配的元素，但这取决于您真正尝试使用它做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:45:42.090

您不能将多个元素的属性读入带有`.attr("class")`. 但是你为什么不像这样在选择器中定位所需的类呢？

```
var cols = link.parents("div.fixed_column.column_one"); 
```

然后更改条件以检查空集：

```
if(cols.length) { ... 
```

# java - How to render text using FRACTIONALMETRICS in Java 7

> ID：15508765
> 
> 赞同：6
> 
> 时间：2013-03-19T19:31:52.133
> 
> 标签：java, swing, java-7, java-2d, text-rendering

I have a desktop Java application i'm working on and have been using JDK 6 for development via IDE. I use the rendering hint `VALUE_FRACTIONALMETRICS_ON` along with other hints to better render text in JLabels. These hints work beautifully on JVM 1.6 but i've recently noticed that it seems to ignore the `VALUE_FRACTIONALMETRICS_ON` completely when I run the app with a JRE 1.7 Is there something i'm doing wrong here that makes Java 7 ignore these hints?

```
lblDate = new ATimeLabel(ATimeLabel.DATE_LETTERS) {
    private static final long serialVersionUID = 1L;

    @Override
    protected void paintComponent(Graphics g) {

        Graphics2D g2d = (Graphics2D) g;

        g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,
                RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
        g2d.setRenderingHint(RenderingHints.KEY_RENDERING,
                RenderingHints.VALUE_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS,
                RenderingHints.VALUE_FRACTIONALMETRICS_ON);

        super.paintComponent(g2d);
    }
}; 
```

FRACTIONALMETRICS has the biggest noticeable visual effect on text so getting that to work is what i'm looking to do.

here is a screen shot comparison of what it looks like when I run the app from my IDE (**Left**) which uses Java 6 and when I double click the Jar file its self (**Right**) which uses my systems JRE, Java 7. (I also temporary added the red border to show that the paint method does work)

![](../Images/e6d891b659f4625ca382431f2c4d35f6.png)

Any help would be very much appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:38:06.333

一般不需要设置`VALUE_FRACTIONALMETRICS_ON`。尝试使用提供的桌面提示。您还可以仔细检查 FontRenderContext 中的 Swing 抗锯齿提示。示例用法如下所示。

如果您希望加粗文本，这是分数度量的副作用，我更喜欢使用粗体字体，或者将输出渲染为图像，并在绘图之前对其进行模糊处理。这将确保一个独立于系统的解决方案。

```
import java.awt.*;
import java.awt.event.*;
import java.util.Map;
import javax.swing.JLabel;

public class TextHints {
    public static void main(String[] args) {
        Frame frame = new Frame();
        frame.addWindowListener(new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
        JLabel label = new JLabel("Sunday, March 17") {
            @Override
            protected void paintComponent(Graphics g) {

                Graphics2D g2d = (Graphics2D) g;

                Map desktopHints = (Map) Toolkit.getDefaultToolkit().getDesktopProperty("awt.font.desktophints");
                if (desktopHints != null) {
                    g2d.addRenderingHints(desktopHints);
                    System.out.println("Desktop: " + desktopHints);
                }
                java.awt.FontMetrics fm = getFontMetrics(getFont());
                Object swingHint = fm.getFontRenderContext().getAntiAliasingHint();
                System.out.println("Swing AntiAliasingHint: " + swingHint);

                super.paintComponent(g2d);
            }
        };
        label.setBackground(Color.BLACK);
        label.setForeground(Color.LIGHT_GRAY);
        label.setOpaque(true);

        label.setFont(label.getFont().deriveFont(Font.BOLD, 14f));

        frame.add(label);
        frame.setSize(new Dimension(160, 100));
        frame.setVisible(true);
    }
} 
```

# python - Python GUI 中的文本树

> ID：15508771
> 
> 赞同：1
> 
> 时间：2013-03-19T19:32:34.043
> 
> 标签：python, user-interface, tree, outline, nested-sortable

我正在寻找将成为 Python 桌面应用程序一部分的 GUI 功能。

该功能是一个**文本树**，在各个节点之间具有**拖放功能。**此外，我希望能够**将带有较长文本的注释附加**到树中的各个节点。**笔记**可以**切换**到展开或折叠状态。

[除了可切换的注释之外，它在这个](http://mjsarfatti.com/sandbox/nestedSortable/)NestedSortable JQuery 库中完全显示。

根据这个特性，你能告诉我当代 Python GUI 的可能性是什么吗？我更喜欢 JQuery 示例中具有现代外观的轻量级 GUI。

哪个 GUI 最适合这项任务？`Tkinter`, `wxPython`,`pyQt`还是`pyGTK`其他？或者你会选择一些 GUI +`Javascript`库吗？为什么您更喜欢`GUI`实现所要求的功能和轻量级的现代设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:32:27.673

pyQT 的 QTreeWidget 或 MVC 设置为此提供了一个很好的解决方案。QTreeWidget 最简单：

这是一个使用 PyQt4 的小例子

```
import sys
from PyQt4.QtCore import *
from PyQt4.QtGui import *

class MainWindow(QMainWindow):
    def __init__(self):
        QMainWindow.__init__(self)
        self.treewidget = QTreeWidget(self)
        self.treewidget.setHeaderLabels(['a'])
        self.treewidget.setDragEnabled(True)
        self.treewidget.setAcceptDrops(True)
        self.treewidget.setDropIndicatorShown(True)
        self.treewidget.resize(300,300)
        self.titems = []
        for i in xrange(100):
            if not i%10:
                pitem = QTreeWidgetItem(self.treewidget,["Parent %d"%i])
                self.titems.append(pitem)
            else:
                item = QTreeWidgetItem(pitem,["Child of %d"%i])
                self.titems.append(item) 
        self.show()

app = QApplication(sys.argv)
w = MainWindow()
app.exec_() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-21T14:33:58.830

尝试使用[etetoolkit](http://etetoolkit.org)。它简单得多。

# jquery - 使用 jquery 隐藏/显示基于复选框的链接

> ID：15508772
> 
> 赞同：1
> 
> 时间：2013-03-19T19:32:46.227
> 
> 标签：jquery, jquery-ui

我知道这是这个论坛上的一个常见问题，但我找不到具体的解决方案。

我要做的是根据复选框选择动态显示 HTML 链接。我无法弄清楚我做错了什么，此时代码似乎没有做任何事情。

下面是代码。

```
<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta name="description" content="GIT Courses" />

<title>GIT Courses</title>
<link href="courses3.css" rel="stylesheet" type="text/css">
<!-- We include the jQuery CSS, API, and UI from CDN in the Head -->
<!-- Most browsers have CDN fed libraries already in cache, as they are used very frequently  -->
<!-- This will speed up load times, reduce bandwidth use, and serve from closest geographical servers -->
<!-- Ref: http://stackoverflow.com/questions/2180391/why-should-i-use-googles-cdn-for-jquery -->
<link
    href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css"
    type="text/css" rel="Stylesheet" />
<script src="http://code.jquery.com/jquery-1.9.1.js"
    type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"
    type="text/javascript"></script>

</head>

<body>

    <div id="wrapper">

        <header>

            <div class=" headleft"></div>
            <div class="headright">
                <h1>Graphic Information Technology</h1>
            </div>

            <!-- end header -->
        </header>

        <nav>
            <table class="navigation">
                <thead>

                    <tr>
                        <th><a href="new2.html">home</a></th>
                        <th><a href="courses3.html">courses</a></th>
                        <th><a href="resources.html">resources</a></th>
                        <th><a href="labs.html">lab</a></th>
                    </tr>

                </thead>

            </table>

            <!-- end nav -->
        </nav>

        <!-- Begin HTML elements -->
        <h3>Thank you for your interest in our Developer courses!</h3>
        <p>Please select which campus resources you would like to explore
            more below:</p>
        <!-- Here is a "Field set" Array for the Resource Check Boxes -->
        <!-- We will leave the links out of the labels at this stage -->
        <fieldset id="checkboxArray">
            <legend>ASU Resources</legend>
            <label><input type="checkbox" name="rescheck[]"value="Career Preparation" />Career Preparation</label> 
            <label><input type="checkbox" name="rescheck[]" value="College Advising" />College Advising</label> 
            <label><input type="checkbox" name="rescheck[]"value="Counseling Services" />Counseling Services</label>
            <label><input type="checkbox" name="rescheck[]" value="Financial Aid" /> Financial Aid </label>
            <label><input type="checkbox" name="rescheck[]"value="Fitness &amp; Recreation" /> Fitness & Recreation </label> 
            <label><input type="checkbox" name="rescheck[]" value="Health Services" /> Health Services </label> 
            <label><input type="checkbox" name="rescheck[]"value="Housing" /> Housing </label>
            <label><input type="checkbox"name="rescheck[]" value="Library" /> Library </label>
            <label><input type="checkbox" name="rescheck[]" value="Parking" /> Parking </label> 
            <label><input type="checkbox" name="rescheck[]" value="Scholarships" /> Scholarships </label>
            <label><input type="checkbox" name="rescheck[]" value="Student Employment" /> Student Employment </label>
            <label><input type="checkbox" name="rescheck[]" value="Student Organizations" /> Student Organizations </label> 
            <label><input type="checkbox" name="rescheck[]" value="Tutoring Support" /> Tutoring Support </label>
            <label><input type="checkbox" name="rescheck[]" value="Writing Support" /> Writing Support </label>
        </fieldset>

        <!-- Here we display the resources selected.
     One way (well the only way I know how) is to Toggle visibility of DIVs based on selection. 
     The toggle is done within jQuery, here is the HTML side of it.
     Maybe not the best practice but it works, I never did take any classes on any of this :) -->

        <div class="myResources">
            <p>Here are the links to your selected resources:</p>
            <div  class="resource" resource-label="Career Preparation">
                <a href="https://students.asu.edu/careerguide/careerpreparation">Career
                    Preparation</a>
            </div>
            <div  class="resource" resource-label="College Advising">
                <a href="https://technology.asu.edu/advising">College Advising</a>
            </div>
            <div  class="resource resource-label="Counseling Services">
                <a href="https://students.asu.edu/counseling">Counseling
                    Services</a>
            </div>
            <div  class="resource" resource-label="Financial Aid">
                <a href="https://students.asu.edu/financialaid">Financial Aid</a>
            </div>
            <div  class="resource"
                resource-label="Fitness &amp; Recreation">
                <a href="http://fitness.asu.edu/">Fitness & Recreation</a>
            </div>
            <div  class="resource" resource-label="Health Services">
                <a href="https://students.asu.edu/health">Health Services</a>
            </div>
            <div  class="resource" resource-label="Housing">
                <a href="http://housing.asu.edu/home">Housing</a>
            </div>
            <div  class="resource" resource-label="Library">
                <a href="http://lib.asu.edu/">Library</a>
            </div>
            <div  class="resource" resource-label="Parking">
                <a href="https://cfo.asu.edu/pts">Parking</a>
            </div>
            <div  class="resource" resource-label="Scholarships">
                <a href="https://students.asu.edu/scholarships">Scholarships</a>
            </div>
            <div  class="resource" resource-label="Student Employment">
                <a href="https://students.asu.edu/employment">Student Employment</a>
            </div>
            <div  class="resource" resource-label="Student Organizations">
                <a href="http://asu.orgsync.com/">Student Organizations</a>
            </div>
            <div  class="resource" resource-label="Tutoring Support">
                <a href="https://studentsuccess.asu.edu/">Tutoring Support</a>
            </div>
            <div  class="resource" resource-label="Writing Support">
                <a href="https://studentsuccess.asu.edu/writingcenters">Writing
                    Support</a>
            </div>

            <!-- end of content wrapper -->
        </div>
        <!--  End of HTML Elements -->
        <!--  Suggested best practice is to put all Scripts at the bottom of the page, just before the End of Body Tag -->
        <!--  This is to speed up page loading time -->
        <!--  Ref: http://stackoverflow.com/questions/2105327/should-jquery-code-go-in-header-or-footer -->
        <!-- jQuery code begins here -->
        <script type="text/javascript">
    // We place all jQuery code inside this "Document Ready" handler to ensure everything loaded completely before running code
    $(document).ready(function() {
        // bind to click function
        $('input[type="checkbox"]').click(function() {
            // test if any are checkboxes in the array are checked
            if ($('input[name="rescheck[]"]:checked').length > 0) {
                // hide all resources until...
                $('.resource >div').hide();
                // we loop checked boxes and show div.
                $("input[name='rescheck[]']:checked").each(function() {
                    $('.resource >div[resource-label=' + this.id + ']').show();
                });
                // hmm... at least that was the idea
                //FIXME: Why didn't this hide?
            } else {
                // none checked - hide all
                $('.resource >div').hide();
            }
        });​​
    }); 
</script>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:37:28.593

您应该使用**[Attribute Starts With Selector [name^="value"]](http://api.jquery.com/attribute-starts-with-selector/)**

```
$('input[name^="rescheck"]:checked') 
```

你的代码应该是这样的： -

```
$('.resource').hide();
$('input[type="checkbox"]').click(function() {
    $("input[name^='rescheck']").each(function() {
        if ($(this).is(":checked"))
            $('div[resource-label="'+this.value+'"]').show();
        else
            $('div[resource-label="'+this.value+'"]').hide();
    });
}); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/YX7HY/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:47:02.857

您的 HTML 中有一些错误，我不知道这些是您实际脚本中的拼写错误还是在此处格式化时出现错误，但这一行需要整理：

```
<div  class="resource resource-label="Counseling Services"> 
```

请注意，这`resource-label`是当前元素类属性的一部分。

你可以为你的 jQuery 尝试一些类似的东西，让它对你来说更简单一些。

```
$('#checkboxArray').on('click', 'input[type="checkbox"]', function(event)
{
    var resources = $('.myResources');

    // Hide all resources
    resources.children('div').hide();

    // Cycle through the checkboxes siblings
    $(this).siblings().each(function(index)
    {
        // If they are checked show the resource
        if ($(this).is(':checked') 
        {
            resources.find('div[resource-label="' + $(this).val() + '"]').show();
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:54:52.157

如果复选框与相关 div 的顺序相同，则使用元素索引作为参考。

```
$('input[name^="rescheck"]').click(function() { // if checkbox clicked
  var index = $(this).parent().index(); // gets parent index since nested in label
  $('.resource:eq(' + index + ')').toggle() // hide or show related div
}); 
```

看看这个[小提琴](http://jsfiddle.net/zMDfd/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T04:31:45.823

这里提供的每一个回复都值得一票或少数票。谢谢，我还没有机会测试代码，但是示例和建议非常有帮助。

# hive - 在 HDFS 上写入会弄乱数据

> ID：15508776
> 
> 赞同：1
> 
> 时间：2013-03-19T19:33:01.253
> 
> 标签：hive, hdfs

我试图将 Hive 查询的输出保存在 HDFS 上，但数据已更改。任何想法？

请参阅下面的数据和更改后的数据。删除文件名前的空格:)

[[正确]：i.stack.imgur.com/DLNTT.png

[[搞砸了]：i.stack.imgur.com/7WIO3.png

对于任何反馈，我们都表示感谢。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:09:42.697

看起来您正在将一个数组导入 Hive，这是可用的[复杂类型](https://cwiki.apache.org/Hive/tutorial.html#Tutorial-ComplexTypes)之一。在内部，Hive 使用 ASCII 字符 002 分隔数组中的元素。如果您查阅[ascii 表](http://www.asciitable.com/)，您可以看到这是不可打印的字符“文本开头”。看起来您的终端确实打印了不可打印的字符，并且通过比较两个图像，您可以看到 002 确实分隔了数组的每个项目。

同样，Hive 将使用 ASCII 001 分隔一行中的每一列，并将使用 ASCII 003 分隔映射键/值和结构字段/值。选择这些值是因为它们不太可能出现在您的数据中。如果要更改此设置，可以[在 create table 语句中使用 ROW FORMAT](http://archive.cloudera.com/cdh/3/hive/language_manual/data-manipulation-statements.html)手动指定分隔符。但是要小心，如果您将集合项终止符切换为类似的东西，`,`那么您输入中的任何逗号都会看起来像 Hive 的集合终止符。

除非您需要以人类可读的形式存储数据并且确定有一个不会与您的终结符发生冲突的可打印字符，否则我会让它们保持原样。如果您需要读取 HDFS 文件，您始终`hadoop fs -cat /exampleWarehouseDir/exampleTable/* | tr '\002' '\t'`可以将数组项显示为用制表符分隔。如果您针对 Hive 表编写 MapReduce 或 Pig 作业，请注意您的分隔符是什么。学习如何从 MapReduce[编写](http://architects.dzone.com/articles/writing-hive-tables-mapreduce?mz=111665-bigdata)和[读取](http://architects.dzone.com/articles/reading-hive-tables-mapreduce)Hive 表是我首先了解这些终结器的方式。如果您在 Hive 中进行所有处理，则不必担心终止符是什么（除非它们出现在您的输入数据中）。

现在这可以解释为什么如果您从 HDFS 读取文件内容时会看到 ASCII 002 弹出，但看起来您是从 Hive 命令行界面看到的，它应该知道集合终止符（并因此使用它们分隔数组的元素而不是打印它们）。我最好的猜测是您指定了错误的架构，并且表的列`results`是一个字符串，您打算将其设为数组。这可以解释为什么它继续打印 ASCII 002 而不是将它们用作集合终止符。

# jquery - 如何防止函数在 jquery .live 事件上多次运行

> ID：15508783
> 
> 赞同：2
> 
> 时间：2013-03-19T19:33:31.853
> 
> 标签：jquery

好的，我正在重新编辑我的帖子，因为我认为它可能会更清楚。

我有一个带有gridview 等的ASP.net 页面。

在 gridview 的结果行上是一个图像，单击该图像会打开一个模式弹出窗口（基本上是单击时显示的隐藏 div）。

该模式看起来是由一些带有 2 列表的 ajax/json 动态填充的，第 1 列只是文本行，第 2 列是空下拉列表和复选框的组合。（这些都在主页加载后添加到 DOM ）。

我正在尝试在用户单击它们时通过 ajax/json 填充清单，并且我只希望仅在第一次单击时发生这种情况，并且无论用户在之后单击该下拉列表多少次（甚至在失去焦点并返回后）我不想看到更多相同的重复出现。

这是单击下拉列表时当前工作的代码，即填充下拉列表。问题是如果我失去焦点然后重新单击下拉菜单，它会重新填充重复列表：

```
<code> 
    $('#FSSiteName').live('focus', function () {
        var $this = $(this);
        getFSSites();
        //i thought the below line would stop it happening again when i click on the dropdown
    $this.unbind('focus');
});

 function getFSSites() {
            var ddSites = $("#FSSiteName");
            $.ajax({
                type: "POST",
                url: "Circuits_OrderManagementTracker.aspx/getTheSitesList",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    var xmlDoc = $.parseXML(response.d);
                    var xml = $(xmlDoc);
                    var FSSitesReturned = xml.find("Table");

                    $.each(FSSitesReturned, function (index, FSSitesReturned) {
                        dbname = $(this).find("SiteNames").text()
                        ddSites.append('<option>' + dbname + '</option>');
                    });
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
</code> 
```

我已根据您的好自己的建议更改为下面的代码，但是当我执行下面的操作时，我的下拉列表不再被填充，我也尝试了 .one() 广告相同的效果。

```
<code>
         $('#FSSiteName').on('click', function () {
            var $this = $(this);
            //run your alert here if it´s necessary
            //alert('Focused for the first time :)');
            getFSSites();
            //unbind the event to prevent it from being triggered again
            $this.off('click');
         });
</code> 
```

希望这对任何希望提供帮助的人来说更清楚一些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:41:02.750

`live()`与is相反，`die()`但[两者都已弃用](http://jquery.com/upgrade-guide/1.9/#die-removed)，您应该使用`on()`and`off`来代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:31:16.183

使用 on 和 off 很简单。

on() -> 添加事件处理程序 off() -> 删除事件处理程序

```
$("#item li").on('click', function () {
    $(this).text('ITEM CLICKED')
    alert('CLICKED');

    //remove the event
    $(this).off("click")
}); 
```

看这个例子：http: [//jsfiddle.net/jMxxa/](http://jsfiddle.net/jMxxa/)

***开启和关闭的 Jquery 文档：***

**开：** [http ://api.jquery.com/on/](http://api.jquery.com/on/) **关：** [http ://api.jquery.com/off/](http://api.jquery.com/off/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:45:00.850

同意 Varnie 的评论，使用 .one 而不是 .live()。

```
$('#FSSiteName').one('focus', function () {
        getFSSites();
 }); 
```

Live() 旨在与动态添加到 DOM 的元素一起使用；页面首次在浏览器中加载时不存在的元素。由于您的元素有一个 id 选择器，而不是一个类选择器，我假设您根本不需要使用 .live()/.on() 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:26:21.347

大家好，感谢您的帮助，这确实是我作为学习者所了解的最好的网站之一。

我自己提出了一个似乎可以解决问题的解决方案，但是对于编码如此陌生，如果我做了一些不理想的事情并且有更好更简单的解决方案，我将不胜感激。

我重新编辑了我的 OP 以更清楚地看到上面并且仍然存在，但是我更改了一些代码以仅检查下拉列表是否为空并且它可以正常工作，请参阅：

```
<code>
         $('#FSSiteName').live('click', function () {
             var $this = $(this);
             //Check if the dropdown has any options and if no add some
             if ($this.find('option').length <= 1) {
                 getFSSites();
             }
             else {
                //Do Nothing!!
             }            
         });

</code> 
```

# android - 进度条更新进度

> ID：15508784
> 
> 赞同：1
> 
> 时间：2013-03-19T19:33:34.287
> 
> 标签：android, encryption, progress-bar

我想`ProgressBar`在文件加密时运行。

我有以下代码，但我如何知道或分解大小，以便完成后达到 100%？如在加密工作时更新进度条 %。

我是Android新手，所以我还有很多东西我还不知道，还没有理解。

```
import java.io.File;

public class ProgressBarExa extends Activity {

Button btnStartProgress;
ProgressDialog progressBar;
private int progressBarStatus = 0;
private Handler progressBarHandler = new Handler();

// private long fileSize = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.progressbar_view);

    addListenerOnButton();

}

public void addListenerOnButton() {

    btnStartProgress = (Button) findViewById(R.id.btnStartProgress);
    btnStartProgress.setOnClickListener(
             new OnClickListener() {

       @Override
       public void onClick(View v) {

        // prepare for a progress bar dialog
        progressBar = new ProgressDialog(v.getContext());
        progressBar.setCancelable(true);
        progressBar.setMessage("File encrypting...");
        progressBar.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progressBar.setProgress(0);
        progressBar.setMax(100);
        progressBar.show();

        //reset progress bar status
        progressBarStatus = 0;

        //reset filesize
        // fileSize = 0;

        new Thread(new Runnable() {
          public void run() {
            while (progressBarStatus < 100) {

              // process some tasks
              progressBarStatus = doSomeTasks();

              // your computer is too fast, sleep 1 second
              try {
                Thread.sleep(1000);
              } catch (InterruptedException e) {
                e.printStackTrace();
              }

              // Update the progress bar
              progressBarHandler.post(new Runnable() {
                public void run() {
                  progressBar.setProgress(progressBarStatus);
                }
              });
            }

            // ok, file is downloaded,
            if (progressBarStatus >= 100) {

                // sleep 2 seconds, so that you can see the 100%
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                // close the progress bar dialog
                progressBar.dismiss();
            }
          }
           }).start();

           }

            });

    }

// file download simulator... a really simple
public int doSomeTasks() {

    try{
        String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
        String fileName = "a.wmv";
        String newFileNEE = "b.wmv";
        String newFileNED = "c.wmv";

        FileInputStream fis = new FileInputStream(new File(baseDir + File.separator + fileName));

        File outfile = new File(baseDir + File.separator + newFileNEE);
            int read;
            if(!outfile.exists())
                outfile.createNewFile();

            // long outfile_size = outfile.length();

            File decfile = new File(baseDir + File.separator + newFileNED);
            if(!decfile.exists())
                decfile.createNewFile();

            FileOutputStream fos = new FileOutputStream(outfile);
            FileInputStream encfis = new FileInputStream(outfile);
            FileOutputStream decfos = new FileOutputStream(decfile);

            Cipher encipher = Cipher.getInstance("AES");
            Cipher decipher = Cipher.getInstance("AES");

            KeyGenerator kgen = KeyGenerator.getInstance("AES");
            SecretKey skey = kgen.generateKey();
            encipher.init(Cipher.ENCRYPT_MODE, skey);
            CipherInputStream cis = new CipherInputStream(fis, encipher);
            decipher.init(Cipher.DECRYPT_MODE, skey);
            CipherOutputStream cos = new CipherOutputStream(decfos,decipher);

            while((read = cis.read())!=-1)
                    {
                        fos.write((char)read);
                        fos.flush();
                    }   
            fos.close();
            while((read=encfis.read())!=-1)
            {
                cos.write(read);
                cos.flush();
            }
            cos.close();

    }catch (Exception e) {
        // TODO: handle exceptione
        e.printStackTrace();
    }
    return 100;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:14:46.297

您知道纯文本的大小，因此如果您正在写入[`CipherOutputStream`](http://docs.oracle.com/javase/7/docs/api/javax/crypto/CipherOutputStream.html)，只需用[`CountingOutputStream`](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/output/CountingOutputStream.html). 您可以对 执行相同的操作[`CipherInputStream`](http://docs.oracle.com/javase/7/docs/api/javax/crypto/CipherInputStream.html)，但[`CountingInputStream`](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/input/CountingInputStream.html)当然可以使用 a。在这种情况下，您最好将其放入其中`CountingInputStream`，`CipherInputStream`因为您可能事先知道密文大小，而不是纯文本。不过您可能并不在意，因为纯文本和密文的大小应该几乎相同——用户应该不会看到太大的差异。这两个类都可以在 Apache 公共 I/O 库中找到。

如果您事先知道明文/密文的大小当然会有所帮助，但我想这不言自明。文件的大小可以[通过标准`java.nio`库](https://stackoverflow.com/questions/7255592/get-file-directory-size-using-java-7-new-io)或[较旧的 Java 6 新 I/O API](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#length())找到。最后，您显然不应该在将所有字节写入流之前先将所有字节流式传输到内存，而是使用例如 4KiB 块大小（[`ByteBuffer`](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)如果可能，使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:17:40.470

看看 AsyncTask [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html) 它会做你想要的——比尝试使用原始线程容易得多。

# arduino - 计算 PROGMEM 使用的字节数

> ID：15508788
> 
> 赞同：2
> 
> 时间：2013-03-19T19:33:50.600
> 
> 标签：arduino

只需要在这里进行实际检查以确定我将使用多少 PROGMEM。在下面的代码片段中，我存储了一个 8x8 字节数组。我可以假设（粗略地说，也许有一些开销？）这将只占用 64 字节的 PROGMEM

*（我意识到这有点像“谁埋在格兰特的坟墓里？”之类的问题，但我没有太多使用 PROGMEM，我不想假设我有 16k 字节的内存（ATMEGA 168 芯片）只是为了找到那个当我生成真实的项目数据时，它不适合。）*

```
prog_uint8_t datastore[] PROGMEM  = {
 0 , 0 , 0 , 255 , 0 , 0 , 0 , 0 , 
 0 , 0 , 0 , 0 , 255 , 0 , 0 , 0 , 
 0 , 0 , 0 , 0 , 0 , 255 , 0 , 0 , 
 0 , 0 , 0 , 0 , 0 , 0 , 255 , 0 , 
 0 , 0 , 0 , 0 , 0 , 0 , 0 , 255 , 
 255 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 
 0 , 255 , 0 , 0 , 0 , 0 , 0 , 0 , 
 0 , 0 , 255 , 0 , 0 , 0 , 0 , 0
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:53:35.327

想我会把我的评论作为答案..随时投反对票

*   不，数据没有额外的开销`PROGMEM`。该`PROGMEM`标签所做的只是指示 gcc 将数据存储在闪存中，事实上，它与初始化 SRAM 数据相同。与自动从闪存加载到 SRAM 的 SRAM 数据相比，要使用`PROGMEM`数据，您必须使用可`PROGMEM`感知的函数，该函数在内部使用使用`LPM`（=加载程序存储器）指令从闪存而不是 SRAM 加载数据。它需要更长的时间（3 个周期而不是 SRAM 的 1 或 2 个周期）。

*   我相信你意识到了这一点，但实际上你的数据并没有 16K 的闪存：如果你用数据填满闪存，程序本身就没有空间了 :)

# css - 子 div 阻止父 div 背景的可见性

> ID：15508790
> 
> 赞同：1
> 
> 时间：2013-03-19T19:33:53.580
> 
> 标签：css, wordpress, html, background-image

我正在尝试调整 wordpress 网站，但似乎无法通过顶部的子 div 看到我的父 div 的背景之一。我已经为*#main*设置了背景图像。我正在使用的图像在底部逐渐变为白色，但是在渲染页面中，我只能看到顶部的 23 个像素左右，然后其余部分被阻止......我认为是*#primary*。

该站点使用基于[Responsive](http://cyberchimps.com/forum/free/responsive/)的子主题，目前可以[在此处](http://wp.massosteopathic.org)查看。为了您的方便，我会复制/粘贴代码，但我不再确定代码的哪一部分负责我（未）看到的内容。因此，如果这没有足够的信息继续下去，我提前道歉：-/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:36:52.470

在我看来，您有浮动问题并且`div#main`正在崩溃。尝试各种[清除浮动](http://www.quirksmode.org/css/clearing.html)技术中的一种来防止这种情况。

例如，尝试`#main { overflow: hidden }`作为测试 - 通常可以防止崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:38:27.093

经典清除修复问题。给#main一个溢出：隐藏或尝试[微清除修复](http://nicolasgallagher.com/micro-clearfix-hack/)如果有任何内容溢出盒子。

```
#main {
    background: url("http://wp.massosteopathic.org/wp-content/uploads/2013/02/headerhand-contd.jpg") no-repeat scroll 0 0 transparent;
    clear: both;
    overflow: hidden;
    padding: 1.625em 0 0;
    z-index: 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:40:46.603

只有`#main div`24px 高。这是因为所有孩子`divs`都在漂浮。

添加一个

```
<div class='clear'> 
```

和

```
.clear { clear: both} 
```

就在你的结束标签之前`#main`

# php - PHP Basecamp API“PUT”中的 cURL

> ID：15508791
> 
> 赞同：1
> 
> 时间：2013-03-19T19:33:57.220
> 
> 标签：php, api, curl, basecamp

我正在尝试通过新的[Basecamp Api](https://github.com/37signals/bcx-api)编辑现有的 Basecamp 项目。我收到此错误：

```
lexical error: malformed number, a digit is required after the minus sign. ---------------      ---------------6 (right here) ------^ 
```

我的代码：

```
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
curl_setopt($ch, CURLOPT_URL, 'https://basecamp.com/****/api/v1/projects/****.json');
curl_setopt($ch, CURLOPT_USERAGENT, "User-Agent : Holy Grail (user@example.com)");
curl_setopt($ch, CURLOPT_TIMEOUT, 10);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PUT");
curl_setopt($ch, CURLOPT_POSTFIELDS, array("name" => "from cURL"));

$result = curl_exec($ch);
echo $result;
curl_close($ch);

if ($result == false) {
echo "Fetch failed" ;
}
else {
$obj = json_decode($result, true);
}

//var_dump($obj);

?> 
```

我确定我只是在做一些愚蠢的事情，但任何帮助都是值得赞赏的。

谢谢！

***更新*** 我现在拥有的：

```
$username = 'user';
$password = 'pass';
$data = json_encode(array("name" => "from cURL"));

$ch = curl_init(); 
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
curl_setopt($ch, CURLOPT_URL, 'https://basecamp.com/****/api/v1/projects/*****.json');
curl_setopt($ch, CURLOPT_TIMEOUT, 10);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);     
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_PUT, 1);
curl_setopt($ch, CURLOPT_USERAGENT, 'User-Agent : Holy Grail     (user@example.com)');
    curl_setopt($ch, CURLOPT_HTTPHEADER, array(
                                              'Content-Type :application/json',
                                              'Content-Length: ' .strlen($data)));
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

$result = curl_exec($ch);
echo $result;
curl_close($ch);

if ($result == false) {
echo "Fetch failed" ;
}
else {
$obj = json_decode($result, true);
}

//var_dump($obj);

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:10:03.737

BasecampAPI 仅接受 JSON 数据，您可以在此处查看`-d`参数 -

```
curl -u username:password \
  -H 'Content-Type: application/json' \
  -H 'User-Agent: MyApp (yourname@example.com)' \
  -d '{ "name": "My new project!" }' \
  https://basecamp.com/999999999/api/v1/projects.json 
```

所以你没有在这一行发送 JSON 数据 -

```
curl_setopt($ch, CURLOPT_POSTFIELDS, array("name" => "from cURL")); 
```

删除`CUSTOMREQUEST`选项并添加`CURLOPT_PUT`. 将您的代码修改为 -

```
$data_string = json_encode(array("name" => "from cURL"));
...

curl_setopt($ch, CURLOPT_HEADER, 1);   
curl_setopt($ch, CURLOPT_PUT, True);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);                                                                  
curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
    'Content-Type: application/json',                                                                                
    'Content-Length: ' . strlen($data_string))                                                                       
); 
```

# asp.net-mvc - ASP.NET Web API 记录入站请求内容

> ID：15508801
> 
> 赞同：9
> 
> 时间：2013-03-19T19:34:17.427
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在尝试注销 Web API 请求内容——即 json 字符串。我实现了一个 ITraceWriter 类（[示例](http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api)）并对其进行了配置，以便 Web API 在管道中调用它。但是，如果我读取 request.Content 或复制到流中进行读取，则该方法无法使用导致 null 模型的方法。 [这篇文章](https://stackoverflow.com/questions/13021089/why-is-the-body-of-a-web-api-request-read-once)稍微讨论了这个问题。任何人都有注销入站 Web API 请求内容的经验并知道最好的方法是什么？

谢谢

**更新 A**

我创建了一个简单的示例 Web API 项目来排除项目​​中的任何内容，但由于日志记录，我仍然看到该模型将为空。我只是通过 Fidder 发布连续测试几次，然后看到我的模型为空。有了断点，它可能会起作用，这就是我认为存在同步/计时问题的原因。关于如何让它发挥作用的任何想法？

标题：

```
User-Agent: Fiddler
Host: localhost:56824
Content-Type: application/json
Content-Length: 22 
```

身体：

```
{
"A":1,"B":"test"
} 
```

这是代码：

控制器：

```
public class ValuesController : ApiController
{
    [HttpPost]
    public void Post(ValuesModel model)
    {
        if (model == null)
        {
            Debug.WriteLine("model was null!");
        }
        else
        {
            Debug.WriteLine("model was NOT null!");
        }
    }
} 
```

模型：

```
public class ValuesModel
{
    public int A { get; set; }
    public string B { get; set; }
} 
```

记录仪：

```
public class APITraceLogger : DelegatingHandler
    {
        protected override System.Threading.Tasks.Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
        {
            if (request.Content != null)
            {
                // This can cause model to be null
                request.Content.ReadAsStringAsync().ContinueWith(s =>
                {
                    string requestText = s.Result;
                    Debug.WriteLine(requestText);
                });

                // and so can this
                //request.Content.ReadAsByteArrayAsync()
                //    .ContinueWith((task) =>
                //    {
                //        string requestText = System.Text.UTF8Encoding.UTF8.GetString(task.Result);
                //        Debug.WriteLine(requestText);
                //    });
            }
            // Execute the request, this does not block
            var response = base.SendAsync(request, cancellationToken);

            // TODO:
            // Once the response is processed asynchronously, log the response data
            // to the database

            return response;
        }

    } 
```

在 WebApiConfig 类中连接记录器：

```
config.MessageHandlers.Add(new APITraceLogger()); 
```

**更新 B**

如果我将记录器更改为以下代码，添加等待、异步并返回结果，它似乎现在正在工作。似乎我在异步代码中不理解的东西或真正的时间问题或其他东西。

```
public class APITraceLogger : DelegatingHandler
{
    protected async override System.Threading.Tasks.Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
    {
        if (request.Content != null)
        {

            // This does seem to work - is it because it is synchronous?  Is this a potential problem?
            var requestText = await request.Content.ReadAsStringAsync();
            Debug.WriteLine(requestText);
        }
        // Execute the request, this does not block
        var response = base.SendAsync(request, cancellationToken);

        // TODO:
        // Once the response is processed asynchronously, log the response data
        // to the database

        return response.Result;
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T20:31:43.867

正如 Filip 在该帖子中提到的那样，ReadAsStringAsync 或 ReadAsByteArrayAsync 方法在内部缓冲请求内容。这意味着即使您的传入请求的流类型是非缓冲流，您也可以安全地在消息处理程序中执行 ReadAsStringAsync/ReadAsByteArrayAsync，并且还希望模型绑定能够正常工作。

默认情况下，请求的流在 webhost 和 selfhost 情况下都会被缓冲。但是，如果您想检查是否使用 ReadAsStringAsync/ReadAsByteArrayAsync 和模型投标即使在非缓冲模式下也能正常工作，您可以执行以下操作来强制非缓冲模式：

```
public class CustomBufferPolicySelector : WebHostBufferPolicySelector
{
    public override bool UseBufferedInputStream(object hostContext)
    {
        //NOTE: by default, the request stream is always in buffered mode.
        //return base.UseBufferedInputStream(hostContext);

        return false;
    }
}

config.Services.Replace(typeof(IHostBufferPolicySelector), new CustomBufferPolicySelector()); 
```

仅供参考...上述策略选择器目前仅适用于 Web 主机。如果您想在 SelfHost 中进行类似的测试，请执行以下操作：

```
//NOTE: by default, the transfer mode is TransferMode.Buffered
config.TransferMode = System.ServiceModel.TransferMode.StreamedRequest; 
```

**在上述帖子的更新B之后：**

您可以修改您的处理程序，如下所示：

```
public class LoggingHandler : DelegatingHandler
{
    protected override async Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        if (request.Content != null)
        {
            string requestContent = await request.Content.ReadAsStringAsync();
        }

        HttpResponseMessage response = await base.SendAsync(request, cancellationToken);

        if (response.Content != null)
        {
            string responseContent = await response.Content.ReadAsStringAsync();
        }

        return response;
    }
} 
```

# python - 使用单个接口验证不同函数的参数类型（不使用检查）

> ID：15508805
> 
> 赞同：1
> 
> 时间：2013-03-19T19:34:52.767
> 
> 标签：python, types, metaclass, inspect

我希望检查模块中每个函数的参数类型（不使用检查模块）。我自己做过的最简单的解决方案是分别在每个函数中实现检查。

```
def func1( num1, num2 ):  # the two params must be integers
    if isinstance( num1, int ) and isinstance( num2, int ):
        # ...function code...
        pass
    else:
        return

def func2( float1 ):  # The only param must be float

    if isinstance( float1, float ):
        # ...function code...
        pass
    else:
        return

def func3( str1 ):  # string
    if isinstance( str1, str ):
        # ...function code...
        print 'fdfd'
        pass
    else:
        return

# and, so on ... 
```

但是，想在模块级别做，而不是为每个功能做。每个函数可以有不同的参数。请注意，这不是函数重载。我正在考虑写一个装饰器或一个元类。以下是我在这两种方法中遇到的问题：-

1.  对所有函数使用通用装饰器：
    在这种方法中，我无法访问每个函数内部定义的实际变量，因此放弃了这个想法。这是我打算写的一个闭包（用作装饰器）：

> ```
> def dec( funcName ):
>     def typeChecker():
>         i = __import__( __name__ )
>         for m in map( lambda x: i.__getattribute__( x ), dir( i ) ):
>             if '__call__' in dir( m ):  #Identifying a real function or callable which can be treated as function
>                 ## Now, that the function is identified, what should I do here to type-check the arguments??
>     return typeChecker 
> ```

请在此处提供一些关于我如何完成这项工作的见解。

2.使用元类创建函数
我只是想知道是否可以使用元类访问发送给函数的参数，然后验证每个参数，然后返回一个全新的类函数对象。但是，不知道该怎么做。这是解决这个问题的好方法吗？

Martijn Peters 给出的 1 个非常好的建议 - 使用注释。Python 2.7 中有什么可以使用的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:04:13.577

通过装饰器执行此操作相当容易 - 在 Python 2 中，您必须显式装饰每个函数以注释每个参数的类型 - 或者您可以使用文档字符串上的一些标记来使用一些注释，然后调用模块的底部，它将遍历模块上的所有对象，并将装饰器应用于其中定义的每个函数。

在这两种情况下，像这样的装饰器就足够了：

```
from functools import wraps
from itertools import count

def typechecker(*types, **kw_types):
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kw):
            for position, type_, arg in zip(count(), types, args):
                if not isinstance(arg, type_):
                    raise TypeError("Argument in position %s should be a %s"
                                    % (position, type_))
            for key, type_ in kw_types.items():
                if key in kw_types and not isinstance(kw[key], type_):
                    raise TypeError("Argument %s should be a %s"
                                    % (key, type_))
            return func(*args, **kw)
        return wrapper
    return decorator 
```

你可以看到它是这样工作的：

```
>>> @typechecker(int, int)
... def mysum(a,b):
...    return a + b
... 
>>> mysum(2,3)
5
>>> mysum(2.0,3)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 8, in wrapper
TypeError: Argument in position 0 should be a <type 'int'>
>>> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T19:45:36.900

我的倾向是这样的：

```
class A(object):
    def func(self, arg):
        result = self._get_func(arg)(arg)

    def _get_func(self, arg):
        # Create and return the appropriate function here.
        # You have a variety of options, e.g. arg.__class__ (if it exists),
        # or use a bunch of isinstance checks, etc.
        # Please bear in mind that this is really unpythonic!!
        if isinstance(arg, basestring):
            pass 
```

如果您要经常调用该函数，这显然是低效的，因此您需要缓存您的特定函数，并尝试先从缓存中拉取内部`_get_func`.

```
def _get_func(self, arg):
    if arg.__class__ in self._cache: # Or whatever
        return self._cache[arg.__class__]
    else:
        pass # Create and return the appropriate function here. 
```

当然，您可以`_get_func`根据需要覆盖该方法（这应该在模块级别或类级别工作，尽管为了清楚起见我可能更喜欢类）。

另外值得一提的是，这真的很不合常理。如果它们需要做不同的事情，通常只在公开的情况下编写单独的函数，而不是将它们隐藏在函数构造函数中，这通常要干净得多。或者至少，“最好请求原谅”并使用`try`/`except`块来封装仅适用于特定类型/类的操作。

# ruby - Ruby 1.9.3 中的数据映射器和 Sinatra 问题

> ID：15508809
> 
> 赞同：0
> 
> 时间：2013-03-19T19:34:56.663
> 
> 标签：ruby, sinatra, datamapper, require

我确信这是一个简单的问题，但由于我看了这么久，我看不到它。所以我使用 Sinatra、sqlite3、datamapper、dm-sqlite-adapter 运行 ruby​​ 1.9.3。当我尝试运行 Sinatra 时，我得到了这个：

```
/Users/XXX/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- datamapper (LoadError)
from /Users/XXX/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from app.rb:2:in `<main>' 
```

这是前两行：

```
require 'sinatra'
require 'datamapper' 
```

宝石已安装。（数据映射器（1.2.0））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T20:36:37.443

You need to require `data_mapper`, not `datamapper` (note the underscore):

```
require 'data_mapper' 
```

See the [DataMapper getting started page](http://datamapper.org/getting-started.html).

# r - R中是否有用于并行矩阵求逆的包

> ID：15508811
> 
> 赞同：2
> 
> 时间：2013-03-19T18:19:20.997
> 
> 标签：r, parallel-processing, matrix-inverse

是否有使用并行计算在 R 中进行矩阵求逆的包？

谢谢！

* * *

你好。我在安装 HiPLARb 包时遇到问题，这是我所做的：

下载自动安装脚本：[http ://www.hiplar.org/downloads/HiPLARb.Installer](http://www.hiplar.org/downloads/HiPLARb.Installer)

`./HiPLARb.Installer --with-openblas --no-gpu --prefix=/home/kaiyin/mylib` 一切顺利，所有 prerequesite 库都安装成功，还有 R 2.15.2 的补丁版本

[从http://www.hiplar.org/downloads/HiPLARb_0.1.3.tar.gz](http://www.hiplar.org/downloads/HiPLARb_0.1.3.tar.gz)下载包

修改 shell PATH 以预先添加修补的 R bin 目录。

```
R CMD INSTALL --configure-args="--with-lapack= \ 
-L/home/kaiyin/mylib/lib\ -lopenblas \ 
--with-plasma-lib=/home/kaiyin/mylib \ 
--with-magma-lib=/home/kaiyin/mylib" HiPLARb_0.1.3.tar.gz 
```

我收到以下错误：

配置：错误：无法识别的选项：`-L/home/kaiyin/mylib/lib -lopenblas'

尝试 `./configure --help' 获取更多信息

错误：包 HiPLARb 的配置失败

请帮忙，谢谢！

* * *

由于 -lopenblas 不是有效的配置选项，我将其删除并重试：

```
R CMD INSTALL --configure-args="--with-lapack=/home/kaiyin/mylib/lib\
--with-plasma-lib=/home/kaiyin/mylib \ 
--with-magma-lib=/home/kaiyin/mylib" ../HiPLARb_0.1.3.tar.gz 
```

这次出现新错误：

```
configure: error: invalid variable name: ` --with-magma-lib' 
```

* * *

第三次尝试：

```
R CMD INSTALL --configure-args="--with-lapack=/home/kaiyin/mylib/lib\
--with-plasma\
--with-magma\ 
--with-plasma-lib=/home/kaiyin/mylib \ 
--with-magma-lib=/home/kaiyin/mylib" ../HiPLARb_0.1.3.tar.gz 

configure: WARNING: you should use --build, --host, --target
configure: WARNING: invalid host type:  
checking "if PLASMA libraries exist"... configure: WARNING: "No PLASMA option given."
configure: WARNING: "No CUDA option given."
configure: WARNING: "No MAGMA option given."
configure: error: Cannot find MAGMA or PLASMA Libraries. Please install MAGMA, PLASMA or both. Please see the install guide for more details. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:47:53.420

是的，有几个；但这取决于您所说的并行是什么意思。

如果您的意思是非常大规模的并行性，例如不适合单台机器并且您需要一个集群来处理它，那么就有[PBD 包](http://r-pbd.org/)。这些需要安装 MPI 和 Scalapack 等软件包，但它们通常可以在任何用于大型技术计算的集群上使用。

如果矩阵适合单个节点并且您只想将所有 CPU 投入其中，则[HiPLAR](http://www.hiplar.org/)包可以使用多个 cpu 甚至基于 PLASMA 或 MAGMA 库的 GPU（再次需要安装）。

更一般地说，[CRAN HPC 任务视图](http://cran.r-project.org/web/views/HighPerformanceComputing.html)是这类包的有用列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:47:46.843

为了在 R 中进行并行计算，有几个包

看看这个[PDF](https://www.rmetrics.org/files/Meielisalp2008/Presentations/Theussl1.pdf)：*充分利用你的 CPU 并行计算策略在 R*

这里有一个网站[High-Performance and Parallel Computing with R](http://cran.r-project.org/web/views/HighPerformanceComputing.html)报告了几个关于 R 中并行计算的包

# php - php 文件上传 move_uploaded_file() 无法打开流

> ID：15508812
> 
> 赞同：0
> 
> 时间：2013-03-19T19:35:09.763
> 
> 标签：php, file-upload

我有一个文件上传脚本：

```
$allowedExts = array("gif", "jpeg", "jpg", "png");
$extension = end(explode(".", $_FILES["picture"]["name"]));
if ((($_FILES["picture"]["type"] == "image/gif") || ($_FILES["picture"]["type"] == "image/jpeg") || ($_FILES["picture"]["type"] == "image/jpg") || ($_FILES["picture"]["type"] == "image/png")) && in_array($extension, $allowedExts)):
    if($_FILES["picture"]["error"] > 0):
        echo "Error: " . $_Files["picture"]["error"];
    else:
        move_uploaded_file($_FILES["picture"]["tmp_name"], "/TnA/ProfilePics/" . $_SESSION['ID'] . "." . $extension);
    endif;
endif; 
```

但我收到了错误：

```
Warning: move_uploaded_file(TnA/ProfilePics/1.jpg) [function.move-uploaded-file]: failed to open stream: No such file or directory in /home/content/91/9848191/html/TnA/webservice.php on line 1067

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/tmp/php5nOdhI' to 'TnA/ProfilePics/1.jpg' in /home/content/91/9848191/html/TnA/webservice.php on line 1067 
```

这是我的文件结构：

```
Web Host Root (I have another site here)
    -TnA (Root of this site)
        -index.html
        -webservice.php
        -ProfilePics
            -(My target location) 
```

我应该使用什么相对目录 url？我已经尝试过`ProfilePics/1.jpg`，`/ProfilePics/1.jpg`两者都导致相同的错误。

**编辑：**

使用：

```
move_uploaded_file($_FILES["picture"]["tmp_name"], dirname(__FILE__) . "ProfilePics/" . $_SESSION['ID'] . "." . $extension); 
```

我得到：

```
Warning: move_uploaded_file(/home/content/91/9848191/html/TnA/ProfilePics/1.jpg) [function.move-uploaded-file]: failed to open stream: No such file or directory in /home/content/91/9848191/html/TnA/webservice.php on line 1067 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:40:52.763

您很可能在使用相关路径时遇到问题。如果您的上传脚本是 webservice.php，那么您实际上是在尝试将文件放入 /%webHostRoot%/ **TnA** / **TnA** /ProfilePics/ 目录。`move_uploaded_file()`在' 目标中使用完整路径。尝试使用类似的东西：

```
move_uploaded_file($_FILES["picture"]["tmp_name"], dirname(__FILE__)."ProfilePics/" . $_SESSION['ID'] . "." . $extension); 
```

UPD：这是递归创建目录的函数：

```
function MkDirTree($path,$permissions = 0755, $compat_mode=true) {
    if (!$compat_mode) {
        $dirs = split("/",$path);
        $path = "";
        foreach ($dirs as $key=>$dir) {
            $path .= $dir."/";
            if ($dir!="" && !is_dir($path)) exec("mkdir -m ".$permissions." ".$path);
        }
    } else {
        $dirs = split("/",$path);
        $path = "";
        foreach ($dirs as $key=>$dir) {
            $path .= $dir."/";
            if ($dir!="" && !file_exists($path)) mkdir($path, $permissions);
        }
    }
    return file_exists($path);
} 
```

# c# - 如何在 C# 中禁用（灰显）三态树视图中的复选框？

> ID：15508813
> 
> 赞同：1
> 
> 时间：2013-03-19T19:35:18.483
> 
> 标签：c#, winforms, checkbox, treeview

我正在使用继承自 TreeView 的三态树视图。

[http://www.codeproject.com/Articles/202435/Tri-State-Tree-View](http://www.codeproject.com/Articles/202435/Tri-State-Tree-View)

我很清楚如何使文本变灰： [TreeView with multi-color TreeNode text](https://stackoverflow.com/questions/8709814/treeview-with-multi-color-treenode-text)

使用所描述的事件处理程序，我可以轻松更改 ri-State 树视图中特定项目的文本颜色。但是，如何更改三态树视图中**特定复选框**的颜色，使其看起来像灰色/禁用？

请注意，我使用的是代码项目中的树视图，而不是一般的 TreeView： [禁用并显示树节点的复选框](https://stackoverflow.com/questions/6431681/disable-and-grey-out-a-check-box-of-treenode)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:15:50.123

在您的情况下，没有简单/快速的方法，因为`TreeNode`它没有`Enabled`属性。您必须自己添加此功能。我看了一下`TriStateTreeView`代码，我可以做一些评论来帮助你。

绘图部分很容易，您会在构造函数中找到：

```
case 0: CheckBoxRenderer.DrawCheckBox(chkGraphics, new Point(0, 1), CheckBoxState.UncheckedNormal);
break;
case 1: CheckBoxRenderer.DrawCheckBox(chkGraphics, new Point(0, 1), CheckBoxState.CheckedNormal);
break;
case 2: CheckBoxRenderer.DrawCheckBox(chkGraphics, new Point(0, 1), CheckBoxState.MixedNormal);
break; 
```

这部分填充`StateImageList`将存储每个可能状态的位图。您将需要添加已存在于`System.Windows.Forms.VisualStyles`: `CheckBoxState.UncheckedDisabled`、`CheckBoxState.CheckedDisabled`和中的其他三张图片`CheckBoxState.MixedDisabled`。

然后，当您想影响例如节点的外观`CheckedDisabled`时，您将需要更改属性，如下所示`StateImageIndex``TreeNode``myNode.StateImageIndex = (int)CheckedState.CheckedDisabled;`

更复杂的部分将是逻辑的实现。唯一覆盖来自的`TriStateTreeView`五个事件`Windows.Forms.TreeView`，您将需要更改它们以处理您的新功能。您可能必须在顶部添加类似这样的内容： `if(e.Node.StateImageIndex == (int)CheckedState.CheckedDisabled || ... ) return;`但在每种情况下可能都不是那么简单，因此请确保检查每种方法。

# java - 让我的 ActionForward 识别不同的提交按钮 - Java 和 JSP 通过 Struts

> ID：15508815
> 
> 赞同：1
> 
> 时间：2013-03-19T19:35:25.303
> 
> 标签：java, javascript, jsp, struts

有点停留在 Struts 的细节上，对于任何令人困惑的术语，我很抱歉，我对使用 Struts 很陌生。

我试图让我的 ActionForward 处理程序类识别 JSP 页面发送给它的不同提交按钮输入，以便获得不同的结果。

我现在有两个按钮：提交和取消。单击时，它们通过一个类中的验证方法将数据库信息传递到操作处理类 (EditThis.doIt) 中的另一个方法中，我的任务是添加第三个按钮以删除此信息。我想要做的是添加一个删除按钮作为提交按钮，如下所示：

```
 <div align="left"> &nbsp;
 <html:submit value="Submit" styleClass="button"/>
 &nbsp;&nbsp;
 <html:cancel styleClass="button"/>
 &nbsp;&nbsp;
 <html:submit value="Delete" styleClass="button"/>
 </div> 
```

但我不知道如何让 ActionForward 识别 Delete 和 Submit 之间的区别。在 Struts 中，我能做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T09:51:32.423

我想我明白你的问题了。当你点击提交按钮时，你调用了 Action 类中的“excute()”方法。但是你想点击删除按钮在同一个动作中做另一件事。对吗？如果我是对的，我的建议是

在 struts.xml 中声明另一个动作并使用与提交按钮相同的动作类，在此动作中声明您要使用的方法。

这是我的项目中的 struts.xml

```
 <action name="elecDeleteAction" class="com.gs.action.ElecAction" method="delete">
        <result name="success">/elec/elecadmin/deletesuccess.jsp</result>
        <result name="fail">/elec/elecadmin/deletefail.jsp</result>
    </action>
    <action name="elecIndexAction" class="com.gs.action.ElecAction" method="index">
        <result name="success">/index.jsp</result>
    </action> 
```

这就是说使用属性“方法”来声明您要调用的方法。

# php - 如何将php字符串变量传递到另一个页面

> ID：15508821
> 
> 赞同：0
> 
> 时间：2013-03-19T19:35:46.477
> 
> 标签：php, variables

我想通过链接转移 $cname 到另一个页面`test.php`

```
$cname = "Sai Ram Textiles";  
echo $link= "test.php?name=".$cname;  
echo '<a href='.$link.'>'."CLICK"; 
```

回显结果正常，即
`test.php?name=Sai Ram Textiles`

但是当我点击它时，结果是
`test.php?name=Sai`

但应该是
`test.php?name=Sai+Ram+Textiles`

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:37:10.313

使用[`urlencode()`](http://php.net/urlencode)：

```
$link = "test.php?name=" . urlencode($cname); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:37:43.170

你应该使用[htmlurlencode()](http://php.net/manual/en/function.urlencode.php)

它将空格或任何其他非法字符转换为相应的编码值。

# java - 是否可以创建带有视图的数组

> ID：15508823
> 
> 赞同：3
> 
> 时间：2013-03-19T19:35:50.397
> 
> 标签：java, android

我尝试做这样的事情：

```
public static ArrayList<View> rootView = new ArrayList<View>(); 
```

但是当我尝试向它添加视图时，我只是得到一个空指针异常，这让我想知道我是否做错了什么，或者是否不可能做到这一点？

谢谢。

代码 ：

```
 ArrayList<View> rootView = new ArrayList<View>();
View v=inflater.inflate(R.layout.activity_main, null);
rootView.add(v); 
```

rootView.add(v); 只是产生一个空指针异常

Logcat 补充说：

```
 03-19 20:49:35.543: E/AndroidRuntime(8755): FATAL EXCEPTION: main
03-19 20:49:35.543: E/AndroidRuntime(8755): java.lang.NullPointerException
03-19 20:49:35.543: E/AndroidRuntime(8755):     at code94.message.TestFragment.onCreateView(TestFragment.java:113)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.support.v4.view.ViewPager.populate(ViewPager.java:1011)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.support.v4.view.ViewPager.populate(ViewPager.java:880)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1374)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.View.measure(View.java:15517)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:681)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:461)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.View.measure(View.java:15517)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.View.measure(View.java:15517)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.View.measure(View.java:15517)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2313)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.View.measure(View.java:15517)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.Choreographer.doFrame(Choreographer.java:532)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.os.Handler.handleCallback(Handler.java:725)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.os.Looper.loop(Looper.java:137)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at android.app.ActivityThread.main(ActivityThread.java:5228)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at java.lang.reflect.Method.invokeNative(Native Method)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at java.lang.reflect.Method.invoke(Method.java:511)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
03-19 20:49:35.543: E/AndroidRuntime(8755):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:30:33.170

你的代码是有效的，你绝对可以创建一个`ArrayList<View>`，你也可以像这样膨胀你的布局。所以你的问题在别的地方。

您应该检查哪个对象为 null:`v`或`inflater`. 在第一种情况下，您的布局或充气方法可能有问题。如果是第二种情况，则您的实例化`inflater`错误或丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:47:08.073

你可以试试这段代码

```
View child = getLayoutInflater().inflate(R.layout.child);
rootView.add(child); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-06T11:39:28.193

您可以在数组列表中添加视图

```
ArrayList<View> viewsList =new ArrayList<>();
// adding views to array list
viewsList.add(view1);
viewList.add(view2); 
```

您可以从 ArrayList 获取视图，如下所示

```
viewsList.get(0);  //to get view at first position
viewsList.get(1);  //to get view at second position 
```

继续编码:)

# html - 使用 HTMLUnit 获取 javascript 元素

> ID：15508827
> 
> 赞同：0
> 
> 时间：2013-03-19T19:36:00.450
> 
> 标签：html, xml-parsing, html-parsing, web-scraping, htmlunit

我正在尝试使用 HTMLUnit 来获取网页（[https://www.coursera.org/courses](https://www.coursera.org/courses)）上的 javascript 元素，它只加载 html 数据。如何让它显示 javascript 容器中显示的信息？

谢谢！

我当前的代码：

```
 public String DownloadPage(String str){
    final WebClient webClient = new WebClient(BrowserVersion.FIREFOX_3_6);
    webClient.getOptions().setTimeout(20000);
    webClient.getOptions().setJavaScriptEnabled(true);
    webClient.getOptions().setThrowExceptionOnScriptError(false);

    try{
        HtmlPage page = webClient.getPage(str);
        XmlPage page2 = webClient.getPage(str);
        int n = webClient.waitForBackgroundJavaScript(100000); 

        System.out.println("Executing " + n + " JavaSript jobs!"); 
        System.out.println("OUTPUT: " + page2); 

        System.out.println("OUTPUT: " + page.asXml()); 
        webClient.closeAllWindows(); 
    }

    catch(IOException e){
        JOptionPane.showMessageDialog(null, "error");
    }

    webClient.closeAllWindows();
    return "";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:32:29.467

利用

```
String theContent1 = webClient.getPage(theURL).getWebResponse().getContentAsString(); 
```

代替

```
String theContent2 = webClient.getPage(theURL); 
```

theContent1 应包含实际的页面源，包括 JavaScript（如果有）。

# c - 程序从文件中读取单词并计算它们在文件中的出现次数

> ID：15508828
> 
> 赞同：2
> 
> 时间：2013-03-19T19:36:04.537
> 
> 标签：c, file

我目前正在尝试制作一个读取文件的程序，找到每个唯一的单词并计算该单词在文件中出现的次数。我目前向用户询问一个单词并在文件中搜索该单词出现的次数。但是，我需要程序自行读取文件，而不是向用户询问单个单词。

这是我目前拥有的：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char const *argv[])
{   
int num =0;
char word[2000];
char *string;

FILE *in_file = fopen("words.txt", "r");

if (in_file == NULL)
{
    printf("Error file missing\n");
    exit(-1);
}

scanf("%s",word);

printf("%s\n", word);

while(!feof(in_file))//this loop searches the for the current word
{
    fscanf(in_file,"%s",string);
    if(!strcmp(string,word))//if match found increment num
    num++;
}
printf("we found the word %s in the file %d times\n",word,num );
return 0;
} 
```

我只需要一些帮助来弄清楚如何读取文件中的唯一单词（尚未检查的单词），尽管对我的程序有任何其他建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:40:16.277

如果您只想打印文件中包含的每一行，则必须将您读取的字符串保存在给定的数据结构中。例如，排序数组可以解决问题。代码可能如下所示：

```
#include <stddef.h>

size_t numberOfLine = getNumberOfLine (file);
char **previousStrings = allocArray (numberOfLine, maxStringSize);
size_t i;

for (i = 0; i < numberOfLine; i++)
{
    char *currentString = readNextLine (file);

    if (!containString (previousStrings, currentString))
    {
        printString (currentString);
        insertString (previousStrings, currentString);
    }
} 
```

您可以使用二进制搜索以一种有效的方式对函数`containString`进行编码。`insertString`请参阅[此处](http://en.wikipedia.org/wiki/Binary_search_algorithm)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:37:46.573

您必须将代码拆分为函数（子例程）。

一个函数会读取文件并记录所有单词；另一个将计算每个单词的出现次数。

```
int main(int argc, char const *argv[])
{
    char *words[2000];

    // Read the file; store all words in the list
    int number_of_words = ReadWords("words.txt", words, 2000);

    // Now count and print the number of occurrences for each word
    for (int i = 0; i < number_of_words; i++)
    {
        int n = CountOccurrences(words[i], "words.txt");
        printf("we found the word %s in the file %d times\n", words[i], n);
    }

    // Deallocate dynamically allocated memory
    Cleanup(words, number_of_words);
} 
```

请注意该`main`功能相对较短。所有细节都在函数`ReadWords`和`CountOccurrences`.

要实现从文件中读取所有单词：

```
int ReadWords(const char *filename, char *words[], int max_number_of_words)
{
    FILE *f = fopen(filename, "rt"); // checking for NULL is boring; i omit it
    int i;
    char temp[100]; // assuming the words cannot be too long

    for (i = 0; i < max_number_of_words; ++i)
    {
        // Read a word from the file
        if (fscanf(f, "%s", temp) != 1)
            break;
        // note: "!=1" checks for end-of-file; using feof for that is usually a bug

        // Allocate memory for the word, because temp is too temporary
        words[i] = strdup(temp);
    }
    fclose(f);

    // The result of this function is the number of words in the file
    return i;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-24T17:36:42.747

```
`#include <stdio.h>
#include <stdlib.h>

int main(int argc, char*argv[])
{   
int num =0;
char word[2000];
char string[30];

FILE *in_file = fopen(argv[1], "r");

if (in_file == NULL)
{
    printf("Error file missing\n");
    exit(-1);
}

scanf("%s",word);

printf("%s\n", word);

while(!feof(in_file))//this loop searches the for the current word
{
    fscanf(in_file,"%s",string);
    if(!strcmp(string,word))//if match found increment num
    num++;
}
printf("we found the word %s in the file %d times\n",word,num );
return 0;
}`

if any suggestion plz..most welcome

Blockquote 
```

# c++ - C ++：使用指向 unordered_map 的指针还是仅将其定义为类中此类型的成员变量？

> ID：15508829
> 
> 赞同：0
> 
> 时间：2013-03-19T19:36:05.417
> 
> 标签：c++, visual-c++, c++11

我有一个我无法理解的问题：

假设我有一个`class System`有几个成员字段，其中一个是 type `unordered_map`，所以当我在头文件中声明类时，我会在 header 的开头写`#include <unordered_map>`。

现在，我有两种声明这个字段的方法：

```
1.std::unordered_map<std::string,int> umap;
2.std::unordered_map<std::string,int>* p_umap; 
```

现在在类的构造函数中，如果我选择第一个选项，则无需在初始化列表中初始化该字段，因为构造函数`class System`将调用该字段的默认构造函数`umap`作为构造类型实例的一部分`class System`。

如果我选择第二个选项，我应该`p_umap`在构造函数（在初始化列表中）使用运算符 new 和在析构函数中初始化字段，以删除此动态分配。

这两个选项有什么区别？如果你有一个类，它的一个字段是 type `unordered_map`，你如何声明这个字段？作为指针还是作为类型的变量`unordered_map`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T19:43:23.777

在您所描述的情况下，似乎第一个选项更可取。事实上，最有可能的是，无序映射旨在由它作为数据成员的类*拥有。*换句话说，它的生命周期不应该超过封装类的生命周期，封装类有创建和销毁无序映射的责任。

虽然使用选项 1，所有这些工作都是自动完成的，但使用选项 2，您必须手动处理它（并注意正确的复制构造、复制分配、异常安全、没有内存泄漏等） . 当然，您可以使用智能指针（例如`std::unique_ptr<>`）将此责任封装到一个包装器中，当智能指针本身超出范围时，该包装器将负责删除包装的对象（这个习惯用法称为 RAII，它是[Resource Acquisition Is Initialization](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)的首字母缩写词）。

但是，在我看来，**您在这里根本不需要指针**。您有一个对象，其生命周期完全受包含它的类的生命周期限制。在这些情况下，您不应该使用指针，而是更喜欢将变量声明为：

```
std::unordered_map<std::string, int> umap; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:42:51.257

在您**需要**使其成为*指针*之前，使其不是指针。

 **指针充斥着用户错误。

例如，您忘记提及您`class System`还需要实施

```
System( const Sysytem& ) 
```

和

```
System& operator= ( const System& ) 
```

或当您尝试复制对象时会出现不良行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:43:43.400

不同之处在于您希望如何访问 umap。指针可以提供更多的灵活性，但它们显然增加了分配方面的复杂性（堆栈与堆、析构函数等）。如果您使用指向 umap 的指针，您可以做一些非常复杂的事情，例如使用相同的 umap 制作两个系统。最后，除非有令人信服的理由不这样做，否则请选择 KISS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T19:44:14.650

无需将其定义为指针。如果这样做，还必须确保实现复制构造函数和赋值运算符，或者完全禁用它们。

如果没有特定理由将其设为指针（并且您没有显示任何指针），只需将其设为普通成员变量即可。**

# vb.net - 如何将结果转换回通用列表（使用 linq to object）？

> ID：15508831
> 
> 赞同：2
> 
> 时间：2013-03-19T19:36:12.100
> 
> 标签：vb.net, linq

```
Dim a As New List(Of EntityTableRow)
            a = myTable1.TableRows

            Dim lFinal2 = (From el In a Group el By Key = New With {Key el.Description, Key el.Activity, Key el.ServiceGroup, Key el.SubServiceGroup, Key el.ResourceGroup, Key el.Country, Key el.DCN, Key el.Workforce, Key el.RateType, Key el.LoadType} _
                              Into Group Select New With { _
                              .PageNum = "", _
                              .Description = Key.Description, _
                              .Activity = Key.Activity, _
                              .MonthCosts = (From k In Group.SelectMany(Function(g) g.MonthCosts.Keys).Distinct() _
                                            Select New With {.Month = k, .Sum = Group.Sum(Function(g) _
                                        If(g.MonthCosts.ContainsKey(k), g.MonthCosts(k), 0))}).ToDictionary(Function(i) i.Month, Function(i) i.Sum)}) 
```

我无法从以下代码将上述结果转换回原始对象形式：

```
 Dim myTable1_grouped As New EntityDATATable(Of EntityTableRow) 
    myTable1_grouped.TableRows = CType(lFinal2, List(Of EntityTableRow)) 
```

原始课程如下所示。该类还有许多字符串属性，我在此代码段中省略了这些属性。所有这些属性也用于上述 linq 代码的分组中。：

```
Public Class EntityTableRow
    Public PageNum As Integer
    Public Description As String
    Public Activity As String
    .....
    .....
    .....
    Public MonthCosts As New Dictionary(Of Integer, Double)
End Class 
```

我得到的错误是：

System.InvalidCastException 被捕获 Message="Unable to cast object of type 'WhereSelectEnumerableIterator `2[VB$AnonymousType_1`2[VB$AnonymousType_0 `10[System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String],System.Collections.Generic.IEnumerable`1[Addin.EntityTableRow]],VB$AnonymousType_2 `35[System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.Collections.Generic.Dictionary`2[System.Int32,System.Double]]]' 类型为 'System. Collections.Generic.List`1[Addin.EntityTableRow]'。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:48:10.947

你必须在那里做两件事：

创建结果时设置你的类名：

```
Into Group Select New EntityTableRow With { _ 
```

代替：

```
Into Group Select New With { _ 
```

并添加`ToList()`枚举并将结果放入`List<EntityTableRow>`：

```
myTable1_grouped.TableRows = CType(lFinal2.ToList(), List(Of EntityTableRow)) 
```

# c++ - 如何使用向量在 C++ 中打印新行？

> ID：15508834
> 
> 赞同：0
> 
> 时间：2013-03-19T19:36:22.507
> 
> 标签：c++

我想在打印出某些索引 [0]、v[2]、v[6]、v[14] 后打印一个新行。增量 2^(n+1)

```
for (int i = 0; i < v2.size(); i++)
{   
    std::cout << v2[i] << " ";
    // need to print a new line after done printing v[0], v[2], v[6], v[14] 
} 
```

我尝试了硬编码`if(i== 0 || i == 2 || i == 4 || .. || i == 30)`，但似乎效率不高。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:45:49.973

尝试这个。

```
 if ((i & (i+1)) == 0) // print newline if i+1 is a power of two 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:49:13.977

作为起点，试试这个：

```
unsigned uNext = 0, power = 0;
for (unsigned i = 0; i < v2.size(); ++i) {
  cout << v2[i] << (i == uNext) ? endl : " ");
  uNext = (uNext == i) ? uNext + pow(2, ++power): uNext;
} 
```

你必须检查你没有溢出未签名的 uNext 所以添加一些检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:59:22.213

假设 Roddy 是对的，实际上，您希望每行的长度增加到 2 的下一次幂，使用标准习语的变体很容易解决这个问题：

```
int maxInLineCount = 2;
int inLineCount = 0;
for ( auto current = v.begin(); current != v.end(); ++ current ) {
    if ( inLineCount != 0 ) {
        std::cout << ' ';
    }
    std::cout << *current;
    ++ inLineCount;
    if ( inLineCount >= maxInLineCount ) {
        std::cout << '\n';
        inLineCount = 0;
        maxInLineCount *= 2;    //  This is the added bit.
    }
}
if ( inLineCount != 0 ) {
    std::cout << '\n';
} 
```

# php - 保持窗口切换打开以显示和查看错误消息 AJAX、JQuery、PHP

> ID：15508838
> 
> 赞同：0
> 
> 时间：2013-03-19T19:36:52.150
> 
> 标签：php, jquery, ajax, forms, login

我在尝试在 AJAX 检索数据后保持 cretin 窗口打开时遇到问题，以显示正确的消息来表示天气或用户是否已登录。我的Javascript如下：

```
function validLogin(){
var username=$('#username').val();
var password=$('#password').val();
    var dataString = 'username='+ username + '&password='+ password;
$("#flash").show();
$("#flash").fadeIn(400).html('<img src="images/loading.gif" width="32px" height="32px" />');
$.ajax({
    type: "POST",
    url: "login.php",
    data: dataString,
    cache: true,
    success: function(result){
    var result=trim(result);
    $("#flash").hide();
    if(result=='correct'){
        $("fieldset#signin_menu").show(); // <-- This will not work!
}else{
    $("#errorMessage").html(result);
} 
```

}

在我得到信息后，窗口应该保持打开状态；但是，页面刷新并且窗口关闭。一旦您按下“登录”，这是一个 onclick 事件。会弹出一个窗口。这是弹出窗口的代码：

```
$(document).ready(function() {

$(".signin").click(function(e) {          
    e.preventDefault();
            $("fieldset#signin_menu").toggle();
            $(".signin").toggleClass("menu-open");
    });

    $("fieldset#signin_menu").mouseup(function() {
            return false
    });

    $(document).mouseup(function(e) {
    if($(e.target).parent("a.signin").length==0) {
            $(".signin").removeClass("menu-open");
    $("fieldset#signin_menu").hide();

    } 
```

});

有没有更好的解决方法？我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-14T18:26:51.237

改用这个 jquery

```
 $(document).ready(function() {               
 $("fieldset#signin_menu").show(function() {
 $(".signin").toggleClass("menu-open");
 });
 });

$("fieldset#signin_menu").mouseup(function() {
        return false
});

$(document).mouseup(function(e) {
if($(e.target).parent("a.signin").length==0) {
        $(".signin").removeClass("menu-open");
$("fieldset#signin_menu").hide();

} 
```

});

# facebook - 有没有办法检索用户的“其他人使用的应用程序”Facebook 隐私设置？

> ID：15508840
> 
> 赞同：2
> 
> 时间：2013-03-19T19:36:52.633
> 
> 标签：facebook, facebook-graph-api, facebook-fql

背景：

在认为我已经成功地通过了 Facebook 的隐私设置挑战之后，我陷入了最后一个意想不到的障碍。

我的 Facebook 应用程序允许用户将内容发布到 Facebook（状态更新、照片等）。它还允许用户浏览和查看同一应用程序的其他用户的相同内容。即使两个用户（即朋友）拥有：

1.  授予应用必要的权限（read_stream、user_photos、friends_photos 等）
2.  通过该应用成功向 Facebook 发布了具有足够可见度的内容
3.  能够在 Facebook 上看到彼此发布的内容

由于“其他人使用的应用程序”隐私设置限制了其他人可以通过 Facebook 平台看到的信息，他们**仍然**可能无法通过该应用程序阅读其他人的内容，尽管用户已专门授予对该应用程序的访问权限那个内容（*呃*）。

这个小怪癖造成了糟糕的用户体验，所以我至少希望能够检测到用户有这个限制，并相应地通知他/她。

我通过 FQL 表进行的搜索没有结果，但我不抱希望......有没有（未记录的？）方法可以通过 Facebook API 方法为授权用户检索“其他人使用的应用程序”设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T09:50:59.137

页面[http://nakedsecurity.sophos.com/2013/04/03/how-to-stop-your-friends-facebook-apps-from-accessing-your-private-information/](http://nakedsecurity.sophos.com/2013/04/03/how-to-stop-your-friends-facebook-apps-from-accessing-your-private-information/)能给你一些帮助吗？

为此，如图所示![其他人使用的应用程序](../Images/6aea85a53019bec5d34c8c4133eeaa75.png)：转到右上角的齿轮图标 > 帐户设置 > 应用程序 > 其他人使用的应用程序，然后对其进行自定义。

# javascript - 检查是否存在2个元素并使用jquery将ul移动到另一个div中？

> ID：15508841
> 
> 赞同：0
> 
> 时间：2013-03-19T19:36:53.287
> 
> 标签：javascript, jquery

我想检查页面上是否存在`div#tab7`AND `ul.Gal_3`。如果是这样，那么我想移动其中的全部`ul.Gal_3`内容`div#tab7`

这是我的条件部分代码，但最后一点不确定？这样做也会降低性能吗？

```
if ($('div#tab7').length > 0 && ('ul.Gal_3').length > 0) {
    //it exists so now move the contents of the UL inside the div#tab7
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:57:36.690

我决定这样做：

```
if ($('div#tab7').length > 0 && $('ul.Gal_3').length > 0) {
    $('#tab7').append($('ul.Gal_3'));
} 
```

检查选项卡和图库是否存在，然后将图库移动到 div#tab7 中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T19:42:53.530

复制内容：

```
$('div#tab7').html($('ul.Gal_3').html()); 
```

移动内容：

```
var dest = $('ul.Gal_3');
$('div#tab7').html(dest.html());
dest.html(''); 
```

# php - 在php中通过FTP知道文件是否存在

> ID：15508844
> 
> 赞同：1
> 
> 时间：2013-03-19T19:36:57.840
> 
> 标签：php, ftp

我在问如何知道 PHP 中的 FTP 中是否已经存在一个文件。

例如我上传一个这样的文件：

```
$ftp = ftp_connect(...;
ftp_login($ftp,...);
ftp_put(...); 
```

但是我有错误陈我复制了一个已经存在的文件（所以我必须重命名最新的文件才能正确上传:-)）

那么如何知道是否已经有一个名为我上传的文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T19:41:14.913

在上传之前，使用[ftp_size](http://www.php.net/manual/en/function.ftp-size.php)函数查看是否有文件。
如果它返回任何不是 -1 的值，则该文件存在。

# regex - 正则表达式 - patern_match_all

> ID：15508847
> 
> 赞同：0
> 
> 时间：2013-03-19T19:37:07.360
> 
> 标签：regex

我需要一个正则表达式，它只能从字符串中提取以大写字母开头的单词，或者所有字母都是大写的，例如

```
$string= "Hola Mundo como Estas HOY" 
```

从这个文本我需要

> Hola, Mundo, Estas, HOY

另一件事是，我只想显示第一个单词，前提是该示例中的第一个单词是 Hola wont go。我第一次有这个

```
^[A-Z]+$ 
```

必须以大写开头，以大写结尾，但我怎样才能添加更多模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:56:41.967

```
([A-Z]{1}[a-zA-Z]+) 
```

在 PHP 中：

```
<?php 
$string = "Hola Mundo como Estas HOY";
$pattern = "/([A-Z]{1}[a-zA-Z]+)/";
preg_match_all($pattern, $string, $matches);
echo "<pre>";
print_r($matches[0]);
echo "</pre>";
 ?> 
```

这将转储一系列匹配项：

```
Array
(
    [0] => Hola
    [1] => Mundo
    [2] => Estas
    [3] => HOY
) 
```

要将其作为逗号分隔的字符串，您可以执行以下操作：

```
echo implode(",", $matches[0]); 
```

返回：

```
Hola,Mundo,Estas,HOY 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:01:54.043

试试这个模式

```
\b(?:\p{Lu}+|(?<!^)\p{Lu}\p{Ll}+)\b 
```

[在 Regexr 上](http://regexr.com?346k6)查看

`\b`匹配单词边界

`\p{Lu}`是一个 Unicode 代码属性，匹配所有语言中的大写字母

`\p{Ll}`是一个 Unicode 代码属性，匹配所有语言中的小写字母

`(\p{Lu}+|(?<!^)\p{Lu}\p{Ll}+)`是一个交替，匹配`\p{Lu}+`或`\p{Lu}\p{Ll}+`。

`(?<!^)`是后向断言，确保`\p{Lu}\p{Ll}+`仅匹配，如果它不在字符串的开头

如果你在 php 中使用它，你必须设置修饰符`u`

# javascript - php 表单：来自 javascript 或 textarea html 的 twig 参数

> ID：15508848
> 
> 赞同：0
> 
> 时间：2013-03-19T19:37:09.123
> 
> 标签：javascript, forms, variables, symfony, twig

我有一个由 id 定义的 textarea

```
<textarea id='vegetable'> Tomato </textarea> 
```

我有一个按钮

```
<button type="button" onclick="MyFunction()">generate vegetable</button> 
```

触发 javascript 以修改 textarea 的内容

```
<script>
function MyFunction()
{
    document.getElementById("vegetable").innerHTML = VegetableNameGenerator();
}
</script> 
```

问题是这个 php 操作：

```
<form action="{{ path('mypath', { 'myparam': ??? }) }}" method="post" > 
    <input type="submit" />
</form> 
```

？？？必须是 textarea 的内容（javascript 代码也知道），但我不知道如何在 twig 中访问它。我想有几种方法可以做到这一点：jquery、dom、全局变量 twig ......任何语法示例都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:37:05.977

这在你描述的方式中是**不可能的。**

当向服务器发出请求时，twig 会渲染页面，然后将其发送到浏览器，然后 javascript 就可以运行了。

有如何使这项工作的选项：

1.  创建一个控制器操作，当您使用带有提供的参数的 GET 请求调用它时返回呈现的路径。然后在提交按钮上创建一个事件监听器，它会阻止提交过程，直到它通过 AJAX 检索到路由并修改了表单的 action 属性。

2.  从您的控制器重定向到您要显示的路径。myparam 将包含在发布数据中，因此您可以在处理完表单后从控制器操作重定向。

    ```
    $this->redirect($this->get('router')
                 ->generate('mypath', 
                            array('myparam'=> 
                                  $this->getRequest()->get('myparam')
                                 ), 
                            true); 
    ```

# php - 如何使用 curl RAW POST 巨大的 XML 文件 - PHP

> ID：15508850
> 
> 赞同：6
> 
> 时间：2013-03-19T19:37:11.340
> 
> 标签：php, post, curl, http-post

有没有办法

```
curl -X POST -H "Content-Type:application/xml" --data @myfile.xml http://example.com 
```

但直接在PHP中？

`CURLOPT_PUT`/`CURLOPT_UPLOAD`以及`file_get_contents`以及`exec`

不是解决方案，因为它必须是 POST 并且文件很大，因此必须流式传输。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-07-29T09:44:47.867

我在尝试将大量摄取文件从 PHP 提供给 elasticsearch 的批量 API 时遇到了类似的问题，直到我意识到批量 API 端点接受了 PUT 请求。无论如何，这段代码使用大文件执行 POST 请求：

```
$curl = curl_init();
curl_setopt( $curl, CURLOPT_PUT, 1 );
curl_setopt( $curl, CURLOPT_INFILESIZE, filesize($tmpFile) );
curl_setopt( $curl, CURLOPT_INFILE, ($in=fopen($tmpFile, 'r')) );
curl_setopt( $curl, CURLOPT_CUSTOMREQUEST, 'POST' );
curl_setopt( $curl, CURLOPT_HTTPHEADER, [ 'Content-Type: application/json' ] );
curl_setopt( $curl, CURLOPT_URL, $url );
curl_setopt( $curl, CURLOPT_RETURNTRANSFER, 1 );
$result = curl_exec($curl);
curl_close($curl);
fclose($in); 
```

这里，`$tmpFile`是包含请求正文的文件的完整路径。

**注意：**重要的部分是设置`CURLOPT_CUSTOMREQUEST`为`'POST'`即使`CURLOPT_PUT`已设置。

您必须使`Content-Type:`标头适应服务器的期望。

使用 tcpdump，我可以确认请求方法是 POST：

```
POST /my_index/_bulk HTTP/1.1
Host: 127.0.0.1:9200
Accept: */*
Content-Type: application/json
Content-Length: 167401
Expect: 100-continue

[...snip...] 
```

我在 Ubuntu 14.04 上使用软件包 libcurl3（版本 7.35.0-1ubuntu2.5）和 php5-curl（版本 5.5.9+dfsg-1ubuntu4.11）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:43:01.407

Curl 支持 post，所以我相信您正在寻找这样的东西：[Posting or Uploading Files Using Curl With PHP](http://blogs.digitss.com/php/curl-php/posting-or-uploading-files-using-curl-with-php/)

```
// URL on which we have to post data
$url = "http://localhost/tutorials/post_action.php";
// Any other field you might want to catch
$post_data['name'] = "khan";
// File you want to upload/post
$post_data['file'] = "@c:/logs.log";

// Initialize cURL
$ch = curl_init();
// Set URL on which you want to post the Form and/or data
curl_setopt($ch, CURLOPT_URL, $url);
// Data+Files to be posted
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
// Pass TRUE or 1 if you want to wait for and catch the response against the request made
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
// For Debug mode; shows up any error encountered during the operation
curl_setopt($ch, CURLOPT_VERBOSE, 1);
// Execute the request
$response = curl_exec($ch);

// Just for debug: to see response
echo $response; 
```

（代码的所有功劳归于原始链接作者）。

至于“巨大”，你会想要更具体 - kb、mb、gb、tb？额外的问题将与 PHP 脚本在不被自动终止的情况下可以存活多长时间、脚本内存使用情况（这可能需要分块处理而不是加载整个文件）等有关。

编辑：啊，对于 RAW 帖子，我认为您将需要这个：[Raw POST using Curl in PHP](https://stackoverflow.com/questions/871431/raw-post-using-curl-in-php)

# html - Windows 8 Javascript 承诺

> ID：15508851
> 
> 赞同：1
> 
> 时间：2013-03-19T19:37:17.513
> 
> 标签：html, windows-8, windows-store-apps, winjs

我有以下功能：

```
function pickContacts() {
    var output = "";

    // Create the picker
    var picker = new Windows.ApplicationModel.Contacts.ContactPicker();
    picker.commitButtonText = "Select";

    var emailsPromise = new WinJS.Promise(function () {

        // Open the picker for the user to select contacts
        picker.pickMultipleContactsAsync().then(function (contacts) {
            if (contacts.length > 0) {
                // Get selected e-mails                
                contacts.forEach(function (contact) {
                    contact.emails.every(function (email) { output += email.value + ";"; });
                });
                return output;
            } else {
                return "";
            }
        });
    });

    return emailsPromise;
}; 
```

这为我提供了来自选定联系人的电子邮件地址列表。所以接下来我想使用它；这是我的代码：

```
document.getElementById("findEmail").addEventListener("click", function () {
    var emailAdd = document.getElementById("email");
    pickContacts().done(function (emails) {
         emailDets.value = emails;
    });
}); 
```

但是我没有从 pickContacts 获得返回值（我已经确定它实际上是返回的）。我猜我处理返回的承诺的方式有问题，但我似乎无法调试它（试图进入它只会退出函数）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T15:35:08.730

您不需要创建新的承诺——只需从 pickMultipleContactsAsync.then 中返回承诺。承诺规范说 .then 的返回值是另一个承诺，当您完成的处理程序完成时，履行值是已完成处理程序的返回值。所以你可以这样做：

```
 return picker.pickMultipleContactsAsync().then(function (contacts) {
        if (contacts.length > 0) {
            // Get selected e-mails                
            contacts.forEach(function (contact) {
                contact.emails.every(function (email) { output += email.value + ";"; });
            });
            return output;
        } else {
            return "";
        }
    }); 
```

另一种方式可行，但只是创建了另一个不需要的承诺，并使您的代码更复杂一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:48:25.743

您必须将完成的回调作为 Promise 函数的参数传递，然后使用要传递的结果调用它。本质上：

```
var emailsPromise = new WinJS.Promise(function () {

    // Open the picker for the user to select contacts
    picker.pickMultipleContactsAsync().then(function (contacts) {
        if (contacts.length > 0) {
            // Get selected e-mails                
            contacts.forEach(function (contact) {
                contact.emails.every(function (email) { output += email.value + ";"; });
            });
            return output;
        } else {
            return "";
        }
    });
}); 
```

变成：

```
var emailsPromise = new WinJS.Promise(function (complete, error, progress) {

    // Open the picker for the user to select contacts
    picker.pickMultipleContactsAsync().then(function (contacts) {
        if (contacts.length > 0) {
            // Get selected e-mails                
            contacts.forEach(function (contact) {
                contact.emails.every(function (email) { output += email.value + ";"; });
            });
            complete(output);
        } else {
            complete("");
        }
    });
}); 
```

# c# - 执行延期交货系统的逻辑

> ID：15508856
> 
> 赞同：0
> 
> 时间：2013-03-19T19:37:37.443
> 
> 标签：c#, c#-4.0, logic

问候大家，

我目前遇到了一个逻辑问题，两天后我还没有弄清楚，因为我一直在猜测自己。这是我正在做的事情的要点。

我有一个进入网站的订单。从逻辑上讲，它已经根据库存确定了要在订单中发送多少特定商品。如果库存足够高，它会发出许多请求的物品。

但是，有一个转折。管理员可以调整这些订单号。他们可以更改请求的金额以及发行的金额。一条规则是他们不能发出超过请求的数量（换句话说，发出 <= 请求）。这是一个订单的例子。

收到一份数量为 5 件的请求。订购时的库存数量为 4。系统获取库存并为订单发出库存，并为剩余的项目下订单。

数量 = 5 库存 = 4

5 - 4 = 1

问题数量 = 4

缺货 = 1

我想出了 4 个场景来解释所有可能的变化。

1.) 管理员将数量从 5 更改为 4。由于库存仍然是 4 并且不能再高，管理员不理会发行的数量。这导致需要删除延期交货。

2.) 管理员将数量从 5 更改为 6，仅保留已发行数量（反过来，由于库存为空）。这导致延期交货需要更新为 2。

3.) 管理员不更改数量 (5)。管理员将发出的数量从 4 更改为 3。这会将一件物品重新添加到库存 (1) 中。这会导致延期交货订单保持为 2。

4.) 管理员将数量和发行数量都更改为 4。这使得库存为 0。由于库存下降到 0，延期交货也被删除。

我的问题是在代码中创建逻辑来处理这个问题。我首先检查数量，看看它是否超过了原始数量。如果是这样，我检查了发行量，看它是否大于原始发行量。然后我一直迷路。

我希望也许有人有一些想法。我真的很感谢在弄清楚这个逻辑方面的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:40:27.373

如果已经有一个系统来履行订单（计算已发出和延期交货的订单号），那么处理此问题的一种方法是撤销操作，应用管理员的更改并使用更改重新履行订单。

您必须在订单中添加一个或两个字段以说明管理员的更改，并更新订单履行系统以说明指定的发出金额。

通过这种方式，您不需要复杂的逻辑来更改已发布、延期交货等的内容。

# css - 在 WebKit 中，为什么 translate3d 会影响投影？

> ID：15508866
> 
> 赞同：4
> 
> 时间：2013-03-19T19:37:59.253
> 
> 标签：css, webkit

我正在使用一个框架（[Sencha Touch](http://www.sencha.com/products/touch)），它将以下样式应用于许多元素，可能是为了加快它们在移动设备上的速度：

```
-webkit-transform: translate3d(0px, 0px, 0px); 
```

通常，这不会改变元素的显示方式。但是我注意到当一个元素具有这种样式时，它会影响相邻元素上的阴影过滤器。在此[示例](http://jsfiddle.net/YZDvp/)中（使用 Mac 版 Chrome 或 iOS 版 Safari），下面的顶部图像在 translate3d 元素旁边，而底部图像不是：

![三角形](../Images/d756f9a5740036fb31cc93eeffe7230e.png)

有人可以解释这是为什么，以及是否有办法避免它？只有当带有阴影的元素也有 z-index 时才会发生这种情况。但我需要保留 z-index。

这是来源：

```
<style>
.top {
    position: absolute;
    z-index: 1;
    width: 0;
    height: 0;
    border-left: 50px solid transparent;
    border-right: 50px solid transparent;
    border-top: 50px solid blue;
    -webkit-filter: drop-shadow(5px 5px 10px rgba(0, 0, 0, 0.75));
}
.bottom {
    height: 80px;
}
.translated {
    -webkit-transform: translate3d(0px, 0px, 0px);
}
</style>

<div class="top"></div>
<div class="bottom translated"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:18:16.040

混合 GPU 和 CPU 渲染元素时会出现一些小问题。（当您指定 translate3d 时，您为渲染引擎提供了使用 GPU 的充分理由，这就是使用它的原因） 前一段时间，您可以在 Canary 中看到启用和禁用 GPU 渲染。但是，使用您的小提琴，Canary 在任何模式下都可以正常显示。(27.0.1447.0)

我认为，获得稳定结果的唯一方法是通过 GPU 进行大部分显示。例如：

```
.top {
    position: absolute;
    z-index: 1;
    width: 0;
    height: 0;
    border-left: 50px solid transparent;
    border-right: 50px solid transparent;
    border-top: 50px solid blue;
    -webkit-filter: drop-shadow(5px 5px 10px rgba(0, 0, 0, 0.75));
}
.bottom {
    height: 80px;
}
div {
    -webkit-transform: translate3d(0px, 0px, 0px);
} 
```

[更新的小提琴](http://jsfiddle.net/vals/h9TTy/)

```
crude, I know, but you get the idea. 
```

# video - 允许自定义皮肤和 rtmp 流（通过亚马逊云前端）的 JWPlayer 替代品？

> ID：15508871
> 
> 赞同：1
> 
> 时间：2013-03-19T19:38:13.683
> 
> 标签：video, streaming, jwplayer

任何人都有 JWPlayer 的任何可行替代方案。我需要自定义播放器皮肤，并允许 rtmp 流式传输（通过 amazon cloudfront）。我最初购买 JWPlayer 6 pro 许可证的一次性费用为 99 美元，现在是每年 99 美元。关于其他替代品的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:23:57.217

如果您在一次性购买 JW Player 6 时购买了它，那么您仍受该许可协议的约束。您购买的播放器仍然是一次性成本。

您也可以联系我们确认这一点 - [http://www.longtailvideo.com/contact-us](http://www.longtailvideo.com/contact-us)

# html - 具有透明度的下拉菜单使用 RGBA 显示为黑色

> ID：15508873
> 
> 赞同：1
> 
> 时间：2013-03-19T19:38:16.577
> 
> 标签：html, css, forms

在 html 表单中，SELECT 下拉列表具有以下 CSS：

```
input[type="text"], textarea, select, option {
    border:none;
    padding:5px;
    font-size:14px;
    color: #000;
    background: rgba(0, 0, 0, 0.1);
} 
```

[rgba](http://en.wikipedia.org/wiki/RGBA_color_space)是黑色10%透明度，

在大多数“Real”浏览器中它都能完美运行，但在 Chrome 和 IE9 中却不行

简单的问题，添加/修改什么规则来解决这个问题？

这是一个[小提琴](http://jsfiddle.net/7ETwH/)。

* * *

我有一个“好问题”和一个小提琴，但现在，任何人都可以给我一个解决方案吗？我真的是在 html 世界中设置 SELECT Dropdown 样式的人吗？我猜不会 ！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:08:16.647

**只需尝试以下内容：**

***CSS部分：***

**解决方案#1：**

```
input[type="text"], textarea, select, option {
    border:none;
    padding:5px;
    font-size:14px;
    color: rgb(0, 0, 0);
    background: rgba(0, 0, 0, 0.1);  
    /* Theoretically for IE 8 & 9 (more valid) */   
    /* ...but not required as filter works too */
    /* should come BEFORE filter */
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    /* This works in IE 8 & 9 too */
    /* ... but also 5, 6, 7 */
    filter: alpha(opacity=50);
    /* Older than Firefox 0.9 */
    -moz-opacity:0.5;
    /* Safari 1.x (pre WebKit!) */
    -khtml-opacity: 0.5;
    /* Modern!
    /* Firefox 0.9+, Safari 2?, Chrome any?
    /* Opera 9+, IE 9+ */
    opacity: 0.5;
} 
```

**解决方案#2：**

```
 input[type="text"], textarea, select, option {
    border:none;
    padding:5px;
    font-size:14px;
    color: #000000;
    background: rgba(0, 0, 0, 0.1);    
}
select 
{
    -webkit-appearance: none;
}

This second solution will work perfectly, except the dropdown arrow, we need to set the dropdown arrow image via background url css. because chrome where defaultly applying the **User Agent Stylesheet** for Select Dropdown Elements. 
```

***请参考以下地点：***

(1)。[什么是用户代理样式表？](https://stackoverflow.com/questions/12582624/what-is-user-agent-stylesheet)

(2)。[CSS2.1 用户代理样式表默认值？](http://css-class.com/test/css/defaults/UA-style-sheet-defaults.htm)

(3)。[用户代理样式表：基础和示例？](http://meiert.com/en/blog/20070922/user-agent-style-sheets/)

***HTML部分：***

```
<select>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="4">Option 4</option>
</select> 
```

我认为这可以帮助您解决问题。

# sencha-touch-2 - Sencha Touch - 如何实现 optgroup

> ID：15508874
> 
> 赞同：5
> 
> 时间：2013-03-19T19:38:17.537
> 
> 标签：sencha-touch-2

有没有办法分离 Sencha Touch 选择列表的选项，类似于使用 optgroups？我有一些选项需要看起来像它们被分组在几个不同的标题下一样。在常规的 HTML 标记中，它看起来像：

```
<select>
  <optgroup label="First Group">
    <option value="A">OptionA</option>
    <option value="B">OptionA</option>
    <option value="C">OptionA</option>
  </optgroup>
  <optgroup label="Second Group">
    <option value="D">OptionA</option>
    <option value="E">OptionA</option>
    <option value="F">OptionA</option>
  </optgroup>
</select> 
```

提前感谢您的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:22:25.000

没有任何开箱即用的方法，但是选择字段是建立在并扩展了具有分组/标题功能的真正 List 组件。您可以通过将 usePicker 设置为 false 来强制选择字段使用列表覆盖样式 (Ext.List) 而不是停靠微调器样式 (Ext.picker.Picker)。您还可以设置 defaultTabletPickerConfig 配置并为对象提供 items 属性。在项目中设置一个带有 xtype 列表的项目，然后疯狂设置您想要的任何列表组件配置（包括您的分组/标题）。

在 Ext.field.Select 下查看这些属性的[文档](http://docs.sencha.com/touch/2-1/#!/api/Ext.field.Select)。

# r - `demography`包中`pop.sim`的'firstyearpop'

> ID：15508877
> 
> 赞同：1
> 
> 时间：2013-03-19T15:48:43.593
> 
> 标签：r, simulation, population

我正在使用 R`demography`包来研究毛里求斯人口。但是，我在`pop.sim`功能方面遇到了一些问题，因为我无法弄清楚必须如何输入年中人口？谁能给我一个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:45:04.717

帮助文件相当简短（对此感到抱歉）。第一年人口应该是`demogdata`对象的一部分。帮助页面末尾的示例`pop.sim`应该有所帮助。它需要`addb`可从[http://robjhyndman.com/software/addb/](http://robjhyndman.com/software/addb/)获得的软件包。

# php - 在 Android 上使用 apk 安装 PHP

> ID：15508878
> 
> 赞同：0
> 
> 时间：2013-03-19T19:38:30.457
> 
> 标签：php, android

是否可以通过 APK 在 Android 上安装和运行 PHP 代码？如何安装？

我有一个连接到服务器并交换各种信息的 Android 应用程序。该服务器基于 Apache、PHP 和 MySQL 构建。

到目前为止一切正常，但我现在需要在 Android APP 上移植 PHP 操作以减少对服务器的所有需求，因为这限制了 APP 离线工作。

我需要让 Android APK 安装 PHP 并直接执行 PHP 代码，就像我在 Linux 机器上的命令行一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:39:54.420

虽然有一个[用于 Android](http://phpforandroid.net/)端口的半完整 PHP，但我建议您在原生 Android Java 中重写您的 PHP 功能，因为它会为您提供更好的兼容性和在设备上的影响力。

# symfony - 为表单添加标签功能

> ID：15508881
> 
> 赞同：0
> 
> 时间：2013-03-19T19:38:40.920
> 
> 标签：symfony, doctrine-orm

我有我的`Task`表格`Taskmanager`。我正在建设以获得更多使用 symfony 的经验。

但是，我使用集合字段将一些添加`Tags`到`Task`.

当我创建一个任务时，我不想只添加一个新的`Task`，所以我使用实体字段从`Tag`数据库中的表中选择一个动作。

但这并不是我要找的地方。是否有教程或示例可以输入 a`Tag`并像在 stackoverflow.com 提问页面底部一样选择它？

我不知道如何意识到这一点。

# java - 有没有一种简单的方法可以以这种方式对数组列表进行排序？

> ID：15508884
> 
> 赞同：2
> 
> 时间：2013-03-19T19:38:45.077
> 
> 标签：java, sorting, collections, arraylist

我想知道是否有办法对自定义对象的 Arraylist 进行排序以适应下面解释的情况？我假设我必须编写一个自定义比较器。

假设我有一个如下所示的对象类：

```
public class Person {
    private String status;    //options: Online, Away, Offline
    private String name;      //Person's name
    private Date date;        //Last signed on

    //basic constructor
    public Person() {
        //set default values
    }

    //constructor to set all variables
    public Person(String s, String n, Date d) {
        status = s;
        name = n;
        date = d;
    }

    //setters & getters for each of the fields
} 
```

根据姓名和日期进行排序应该相当容易。但是，我想知道如何根据状态进行排序？我希望能够根据此人当前是否**在线**以及谁**离线**对我的数组进行排序。我不太关心谁不在。

上面的类只是一个示例类。我的实际班级有一个 JLabel 根据状态设置一个图标。`setText()`剩余未使用。我想到了将标签设置为 0、1 和 2 值并仅使用典型整数比较器的可能性，但我不确定这是否是一种建议的方法。

当然，我在这里缺少一个明显的解决方案，所以也许评论或链接可以提供必要的信息。我知道这里有大量的“排序数组列表”线程，我浏览了很多。他们中的大多数只是按字母顺序或整数排序字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:42:58.127

如果我理解正确，您基本上想对 2 个字段进行排序-主要字段是状态（因此具有相同状态的人聚集在一起），然后按名称在每个具有相同状态的人中进行排序。

执行此操作的比较器如下所示：

```
 public class CompositePersonComparator implements Comparator<Person> {    
    @Override
    public int compare(Person a, Person b) {
       //1st and foremost - see if they are not of the same status.
       int statusComparison = a.getStatus().compareTo(b.getStatus());
       if (statusComparison!=0) return statusComparison;
       //logical else - same status, sort by name
       return a.getName().compareTo(b.getName());
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:53:47.403

I suggest we handle the status as an enumerated data type instead of a String where it can only be one of a few strings. This makes it easy to write a readable compareTo method:

```
public class Person implements Comparable<Person> {
  private Status currentStatus;   
  private String name;      //Person's name
  private Date date;        //Last signed on

  enum Status {ONLINE, AWAY, OFFLINE};

  //basic constructor
  public Person()  {
     //set default values
  }

  //constructor to set all variables
  public Person(Status s, String n, Date d) {
     currentStatus = s;
     name = n;
     date = d;
  }

 /**
  *   Order the Persons first by status where all ONLINE Persons are listed first.
  */
  @Override
  public int compareTo(Person other) {
     if(other.currentStatus == currentStatus)
        return name.compareTo(other.name);

     return currentStatus.ordinal() - other.currentStatus.ordinal();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T19:49:06.180

在这里使用枚举可能很有用 `enum MyEnum { ONLINE, AWAY, OFFLINE;}`

# excel - 从一系列模板行错误生成文档的宏

> ID：15508886
> 
> 赞同：0
> 
> 时间：2013-03-19T19:38:46.913
> 
> 标签：excel, vba, automation

我正在使用代码用户@Alain 写了一段时间作为新脚本的基础，以将数据从 Excel 仪表板写入 MS Word 模板。[请在此处](https://stackoverflow.com/questions/5106743/generate-word-documents-in-excel-vba-from-a-series-of-document-templates)查看原始帖子和解决方案。我有一个无法完全摆脱的编译错误。

问题在于`GenerateDocumentation`模块中的一行代码，特别是`srcPath`字符串。

我无法识别`FindConstant("")`为 VBA 代码。据我所知，`findConstant`是一个*Java*命令。我忘记选择的工具>参考中是否有库？事实上，似乎有一些我不认识的子或功能，*例如* `CreateDocGenPath`，`GetNextEndorsementNumber`等等。这些是其他库的功能，还是自定义的子功能？

我应该能够将这一行重写为`srcPath = Application.GetSaveAsFilename`并获得一个对话框来选择目录......这行得通吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:08:11.473

我*相信*我已经创建了一个可能复制用户 @Alain 的自定义函数的函数，`FindConstants("Message Here")`. 让 VBA 调用目录路径的技巧是通过 Windows API 运行。该函数调用文件 DLL 来拉出目录浏览器。然后它将选择保存到`DirPath()`. 我不确定如何在 64 位机器上调用这些声明，这是假设您运行的是 Windows 7。这是我目前所拥有的：

```
Option Explicit
Public Type BROWSEINFO
hOwner As Long
pidlRoot As Long
pszDisplayName As String
lpszTitle As String
ulFlags As Long
lpfn As Long
lParam As Long
iImage As Long
End Type

'32-bit API declarations
Declare Function SHGetPathFromIDList Lib "shell32.dll" _
  Alias "SHGetPathFromIDListA" (ByVal pidl As Long, ByVal pszPath As String) _
  As Long

Declare Function SHBrowseForFolder Lib "shell32.dll" _
    Alias "SHBrowseForFolderA" (lpBrowseInfo As BROWSEINFO) As Long

Function DirPath(Optional Msg) As String
    Dim bInfo As BROWSEINFO
    Dim path As String
    Dim r As Long, x As Long, pos As Integer
     bInfo.pidlRoot = 0&  

'   Window title information   
 If IsMissing(Msg) Then
        bInfo.lpszTitle = "Select a folder."
   Else
       bInfo.lpszTitle = Msg
   End If

'   Directory information to return
   bInfo.ulFlags = &H1

'   Display the browsing dialog
   x = SHBrowseForFolder(bInfo)

'   Parse
path = Space$(512)
r = SHGetPathFromIDList(ByVal x, ByVal path)
If r Then
    pos = InStr(path, Chr$(0))
    DirPath = Left(path, pos - 1)
Else
    DirPath = "" ' Saves no directory if nothing is selected!
End If
End Function 
```

这是一个用于测试上述功能的 Sub：

```
Sub Test()
Dim Msg As String
Msg = "Please select a template repository."
MsgBox GetDirectory(Msg)
End Sub 
```

抱歉，这有点乱，我不知道如何使用 Markdown 清理代码块……这不是一个完整的答案，我花了一段时间才知道，因为我不熟悉通过 API 调用。另外，MSDN 是为 C+ 编写的，我*不*知道，所以我必须找到一些将 C+ 声明等同于 VBA 声明的表格资源（As Long 与 *FAR 等）。如果有人可以贡献或识别他们在 Alain 的代码中发现的功能作为附加组件或众所周知的 UDF，我将保持这个问题的开放性。当我创建和学习时，我会更多地编辑这个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:20:50.817

我认为`FindConstant()`是 Alain 编写的一个函数，用于从某处的设置列表中返回路径，但我没有看到 SrcPath 在任何地方使用。您提到的其他例程也是用户提供的。

# bash - 在bash中通过〜/ .bash_profile将目录添加到我的路径？

> ID：15508892
> 
> 赞同：0
> 
> 时间：2013-03-19T19:39:07.413
> 
> 标签：bash, shell, path, .bash-profile

我想通过 ~/.bash_profile 文件将目录添加到我的 PATH 中，尽管我的 Ubuntu 中没有这样的文件。我有以下代码，它将检查人们是否拥有该文件，如果没有，将创建一个并添加所有现有路径目录和用户输入的路径。

```
#!/bin/bash

echo "Please enter a directory that you want to add to your PATH: "
read dr

if [ -f ~/.bash_profile ]
then
    # Add the read 'dr' directory to the end of the line that starts 
    # with PATH=, in your ~/.bash_profile file
    source ~/.bash_profile
else
    echo "PATH=$PATH:$dr" > ~/.bash_profile
    echo "export PATH" >> ~/.bash_profile
    source ~/.bash_profile
fi 
```

关键是，如果文件已经存在，我不知道如何检查以找到以 PATH= 开头的行，然后将用户输入的目录添加到该行的末尾。请注意，这只是给我的一个练习。我应该通过 ~/.bash_profile 将用户输入的目录添加到 PATH 中。不过，我不知道为什么有人应该费心使用 ~/.bash_profile 将新目录添加到 PATH 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:03:11.037

查看您要添加到新的行`.bash_profile`：

```
echo "PATH=$PATH:$dr" > ~/.bash_profile
echo "export PATH" >> ~/.bash_profile 
```

第一个已经添加`$dr`到 中`PATH`，不管已经在 中`PATH`。这意味着即使`.bash_profile`已经存在，您也可以执行相同的操作：只需添加一个附加另一个目录的新行：

```
touch ~/.bash_profile
echo "export PATH=\$PATH:$dr" >> ~/.bash_profile 
```

需要注意的几点：

1.  通过ing确保`.bash_profile`存在；`touch`那么你不需要测试它的存在。

2.  只需要一行；您可以在使用时设置变量`export`以将其标记为导出到环境。

3.  转义`$`in`$PATH`以便将文字美元符号写入`.bash_profile`; 不需要相同的内容，`$dr`因为您想让它展开，以便添加正确的目录。

4.  使用 追加这一新行`>>`，这样您就不会覆盖现有文件。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-19T19:44:31.943

```
~/.bashrc 
```

在家里试试这个文件。

# android - 适用于 Android 的 Google Maps API 2 “很遗憾，[应用程序] 已停止。”

> ID：15508895
> 
> 赞同：0
> 
> 时间：2013-03-19T19:39:17.603
> 
> 标签：android, eclipse, google-maps

我浏览了 android 开发人员指南和 youtube 指南，还检查了此处提出的其他类似问题，但仍然无法在 Nexus 7 上加载地图。

我正在尝试构建一个应用程序，该应用程序稍后将突出显示我所在地区的本地企业，但首先需要能够加载地图。每次我尝试在设备上运行它时，它都会发出“不幸的是，[app] 已停止”的通知。

这是我的代码：

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.bloomingtonfirst"
android:versionCode="1"
android:versionName="1.0" >

    <permission
    android:name="com.example.bloomingtonfirst.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>
<uses-permission   
android:name="com.example.bloomingtonfirst.permission.MAPS_RECEIVE"/>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission       
android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
<meta-data
    android:name="come.google.android.maps.v2.API_KEY"
    android:value="super_secret_key"/>
    <activity
        android:name="com.example.bloomingtonfirst.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

    <fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" />

</RelativeLayout> 
```

主要活动.java：

```
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

public class MainActivity extends FragmentActivity{

SupportMapFragment mMap;
GoogleMap googleMap;

  @Override
 protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

       mMap = (SupportMapFragment) getSupportFragmentManager()
        .findFragmentById(R.id.map);

        googleMap = mMap.getMap();
 }
} 
```

日志猫：

```
03-19 16:25:55.620: D/dalvikvm(16340): GC_CONCURRENT freed 256K, 6% free 7463K/7864K, paused 2ms+1ms, total 22ms
03-19 16:25:55.660: D/AndroidRuntime(16340): Shutting down VM
03-19 16:25:55.660: W/dalvikvm(16340): threadid=1: thread exiting with uncaught exception (group=0x40d26930)
03-19 16:25:55.660: E/AndroidRuntime(16340): FATAL EXCEPTION: main
03-19 16:25:55.660: E/AndroidRuntime(16340): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.bloomingtonfirst/com.example.bloomingtonfirst.MainActivity}: android.view.InflateException: Binary XML file line #9: Error inflating class fragment
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.os.Looper.loop(Looper.java:137)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at java.lang.reflect.Method.invokeNative(Native Method)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at java.lang.reflect.Method.invoke(Method.java:511)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at dalvik.system.NativeStart.main(Native Method)
03-19 16:25:55.660: E/AndroidRuntime(16340): Caused by: android.view.InflateException: Binary XML file line #9: Error inflating class fragment
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.app.Activity.setContentView(Activity.java:1881)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at com.example.bloomingtonfirst.MainActivity.onCreate(MainActivity.java:17)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.app.Activity.performCreate(Activity.java:5104)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-19 16:25:55.660: E/AndroidRuntime(16340):    ... 11 more
03-19 16:25:55.660: E/AndroidRuntime(16340): Caused by: java.lang.RuntimeException: API key not found.  Check that <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="your API key"/> is in the <application> element of AndroidManifest.xml
03-19 16:25:55.660: E/AndroidRuntime(16340):    at maps.z.ab.a(Unknown Source)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at maps.z.ab.a(Unknown Source)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at maps.z.ab.a(Unknown Source)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at maps.z.ag.a(Unknown Source)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at maps.z.ag.a(Unknown Source)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at maps.z.bw.a(Unknown Source)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at maps.z.r.onCreateView(Unknown Source)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:107)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.os.Binder.transact(Binder.java:310)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onCreateView(Unknown Source)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at com.google.android.gms.maps.SupportMapFragment$a.onCreateView(Unknown Source)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at com.google.android.gms.internal.e$4.a(Unknown Source)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at com.google.android.gms.internal.e.a(Unknown Source)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at com.google.android.gms.internal.e.onCreateView(Unknown Source)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at com.google.android.gms.maps.SupportMapFragment.onCreateView(Unknown Source)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:884)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1066)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1168)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:280)
03-19 16:25:55.660: E/AndroidRuntime(16340):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
03-19 16:25:55.660: E/AndroidRuntime(16340):    ... 21 more 
```

任何帮助的尝试将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:05:27.343

改变：

```
class="com.google.android.gms.maps.MapFragment" 
```

到：

```
class="com.google.android.gms.maps.SupportMapFragment" 
```

您在导入`com.google.android.gms.maps.SupportMapFragment`和使用它的代码中得到 ClassCastException，但在您的 XML 中使用`com.google.android.gms.maps.MapFragment`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T00:28:35.950

更改`android:name="come.google.android.maps.v2.API_KEY"` 为`android:name="com.google.android.maps.v2.API_KEY"`（来到 com）。

# android - Android 2.3 - 如果没有在主要活动中使用，选择器的 src 将无法与 ImageView 一起使用

> ID：15508896
> 
> 赞同：0
> 
> 时间：2013-03-19T19:39:22.870
> 
> 标签：android, android-selector

我有一个简单的 ImageButton 选择器放在非主要活动上：

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/image_press" />
    <item android:drawable="@drawable/image" />
</selector> 
```

如果我在主要活动中使用它，它也可以在第二个活动中使用。但如果没有，第二个活动上的 ImageButton 将在 Android 2.3 上消失（适用于更高版本）。我该如何解决？设置@drawable/image（不是选择器）可以正常工作，尽管它在主要活动中使用。问题在于选择器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:02:59.363

哦……这是一个奇怪的错误。我创建了旧文件的副本，它有所帮助。

# macos - Unity OSX Standalone Player 不存储本地数据

> ID：15508899
> 
> 赞同：1
> 
> 时间：2013-03-19T19:39:39.283
> 
> 标签：macos, save, unity3d, productbuild

我正在使用 Unity 3.5，试图为我的应用程序制作一个独立的 OSX 播放器。一切都很顺利，直到我使用 productbuild 从中制作了一个 pkg。

我的 productbuild 行的语法如下：

`productbuild --component ProjectName.app "/Applications" --sign "$signingid" ProjectName.pkg`

尽管这最初似乎有效，并且在请求超级用户的许可后生成了一个似乎可以正确安装应用程序的 pkg 文件，但是当我运行已安装的应用程序时，我发现它没有保留我的保存数据。`Application.datapath`显然，在这种情况下设置为“/Applications/ProjectName.app/Contents/”，并且不可全局写入。

据我所知，我有两个可能的解决方案：第一个是找到某种方法来确保在我的应用程序开始时它`Application.datapath` **是可写的。**但是，我不知道该怎么做。我能看到的唯一其他解决方案是对我的应用程序进行所有必要的更改，使其不再假定它`Application.datapath`是可写的，并且我需要建立另一个位置来保存我的持久数据。如果我采用后一种方法，我还需要知道 Unity 是否提供了一种工具来获取可以存储此类数据的目录，因为我目前不知道。

如果除了我上面概述的两种方法之外还有其他方法，我绝对愿意接受替代方案，但如果有人可以帮助我完成我需要知道的以完成上述任何一种方法，我会在这方面同样感激也是。

提前感谢任何人都可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:21:16.870

`Application.datapath`是 root 存储和拥有应用程序的位置。要在运行之间获取用于存储持久数据的目录，您需要[Application.persistentDataPath](http://docs.unity3d.com/Documentation/ScriptReference/Application-persistentDataPath.html)，默认情况下它位于*~/Library/*下。我没有使用过 OSX 独立播放器，但至少对于编辑器播放器和 iOS，它是这样工作的。

# java - 从文本文件中获取数字列表，转换为单个字符串，然后用空格或逗号将该列表拆分为两个数组列表

> ID：15508900
> 
> 赞同：0
> 
> 时间：2013-03-19T19:39:41.230
> 
> 标签：java, arrays, string, arraylist, int

所以标题有点罗嗦，所以我会尝试更好地解释我的问题。

所以基本上这个程序要做的是，从一个文本文件中导入一个大的数字列表（排序如下）：

```
3679       87
196        60
17914      12
18618      64
2370       65
... ...
etc. (for 45 more lines), 
```

然后将两列排序为两个不同的数组，然后按整数值对它们进行排序。左栏是商品 ID，右栏是库存数量。

到目前为止我已经尝试过：我尝试将整个列表变成一个字符串数组，然后我尝试将数组拆分为两个数组列表，并用每个逗号分隔它们。但我无法成功地做到这一点。此外，我尝试在 for 循环中执行此操作，它跳过逗号，只是将下一个值添加到两个不同的数组列表中。

这是我当前的代码：

```
import java.io.File;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Scanner;

public class Store {

public static void main(String[] args) {

    // **************Scanner s = new
    // Scanner(input).useDelimiter("\\s*,\\s*");
    ArrayList<Integer> numbers = new ArrayList<Integer>();
    ArrayList<Integer> ids = new ArrayList<Integer>();
    ArrayList<Integer> inventory = new ArrayList<Integer>();
    ArrayList<String> numbersString = new ArrayList<String>();
    try {
        int x = 0;
        int s = 0;
        Scanner in = new Scanner(new File("file50.txt"));
        in.useDelimiter(",");

        while (in.hasNext()) {// grabs all numbers in text file
            String f = in.next();
            numbersString.add(f);
            String toPrint = "";
            for (int i = 0; i < numbersString.size(); i++) {
                toPrint += numbersString.get(i) + " ";
            }

            String[] nums = toPrint.split("\\s+");
            // System.out.println(toPrint);
            System.out.print(Arrays.toString(nums));
            // System.out.print(nums);
        }

    } catch (Exception i) {

        i.printStackTrace();
    }

}
   } 
```

如果有人可以帮助我并建议我应该做些什么来实现我的目标，将不胜感激。如果我仍然没有足够清楚地说明我正在尝试做什么，请告诉我。我会尽力解释

我不想复制和粘贴代码，只是想知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:52:20.757

首先，如果您的文本文件中的值用空格分隔，那么去掉`in.useDelimiter(",");`.

从文件中读取一行时的第二件事，使用`String f = in.nextLine();`而不是`String f = in.next();`

因此，现在您将读取文件中的每一行，ID 和库存项目用空格分隔。

现在，如果您想分别获取 ID 和库存商品，您可以这样做：

```
String[] tokens = f.split(" "); //splits the input by spaces 
```

所以现在你有 ID`tokens[0]`和库存项目`tokens[1];`

因此，每次读取一行时，将其用空格分隔，然后您可以将 ID 添加到 ID 列表使用`tokens[0]`，并将库存添加到库存列表使用`tokens[1]`

另一方面，我建议使用`Map`ID 是键，库存项目是值，而不是使用多个列表。

所以像：

```
Map<String,String> map = new HashMap<String,String>();
map.put(tokens[0],tokens[1]); 
```

如果`String`您不希望 ID 和库存项目为整数，则可以执行以下操作：

```
int ID = Integer.parseInt(tokens[0]); 
```

# python - 为什么当我输入一个数组时这个函数参数变成非类型

> ID：15508905
> 
> 赞同：-1
> 
> 时间：2013-03-19T19:39:53.860
> 
> 标签：python, arrays, function

```
def printStats(description , array):
    print description
    array = array.sort()
    minValue = min(array)
    maxValue = max(array)

    return minValue, maxValue 
```

我在函数的第二个参数中输入了一个数组，但出现错误

```
 line 44, in printStats
    minValue = min(array)
TypeError: 'NoneType' object is not iterable 
```

这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:40:48.430

`list.sort()`对列表进行就地排序，并返回`None`，它不返回排序列表。

```
array = array.sort() 
```

应该只是：

```
array.sort() 
```

（如果您不想就地排序，而是想要一个新列表，您可以这样做`sorted(array)`- 在这种情况下，就地进行排序是有意义的）。

# security - Java EE 6 App 不同的登录方式

> ID：15508909
> 
> 赞同：3
> 
> 时间：2013-03-19T19:40:01.877
> 
> 标签：security, jakarta-ee, oauth, jax-rs, jaspic

我目前正在开发一个带有 JSF（前端）和 JPA、EJB 和 CDI（后端）的“基本”Java EE 6 应用程序。到目前为止一切正常。

对于登录部分，我选择了基于表单的身份验证和 JDBC-Realm。

现在我喜欢提供一些 REST 服务（Jersey），这些服务将被移动设备使用。因此，我需要添加第二种身份验证方式。但根据我的理解，一次只能有一个。

我已经尝试过一些 PoC，但是每次我调用需要有效用户的 REST 服务时，该服务都会重定向到登录页面。

是否有任何最佳实践来处理此类问题？

是否可以将 Oauth 添加到当前的登录机制中，因为我不想在每个请求中都发送用户/密码或会话 ID。某种令牌会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:39:39.910

如果您的应用程序需要为不同的服务提供不同的身份验证机制，那么大多数 Java EE 实现（服务器）附带的登录模块确实不够用。

您可能必须通过编写自定义登录/身份验证模块来自行处理。Java EE 6 有一个 API：JASPIC。或者，您可以使用特定服务器的专有登录模块 API。

在该登录/身份验证模块中，您可以检查请求，确定该请求属于哪个服务，然后委托给适当的“真实”模块。

我写[了一篇关于 JASPIC 的文章](http://arjan-tijms.blogspot.com/2012/11/implementing-container-authentication.html)前段时间

服务器通常可以[选择堆叠登录模块](http://docs.jboss.org/jbosssecurity/docs/6.0/security_guide/html/Login_Modules.html#sect-Password_Stacking)。这是一项专有功能，因此其中一个允许堆叠身份验证机制的可能性非常小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T05:49:58.597

另一种方法是将应用程序打包为 EAR，并将 Web UI 和 REST 接口分离到单独的 Web 模块中。这将允许您通过 web.xml 独立配置每个 Web 模块

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:19:20.863

> 但根据我的理解，一次只能有一个。

这并不完全正确。您只能拥有一个容器管理的配置，但如果您使用编程登录或第三方框架，则可以拥有任意数量的配置。

> 我已经尝试过一些 PoC，但每次我调用一个 REST-Service 时，都需要一个有效用户，服务重定向到登录页面

在`web.xml`您定义安全约束的地方，排除应用程序的 REST 部分以绕过容器管理的身份验证机制，然后以编程方式进行身份验证或使用第三方解决方案。

> 是否有任何最佳实践来处理此类问题。

这可能会引起争论，所以我不会试图回答它。

> 是否可以将 Oauth 添加到当前的登录机制中，因为我不想在每个请求中都发送用户/密码或会话 ID。

是的。可能还有很多其他人，但我熟悉[Seam Social](http://www.seamframework.org/Seam3/SocialModule)（正在成为[Agorava](http://agorava.org/)）。这两个声称支持谷歌、Facebook 和其他几个。您还可以为[Apache Shiro](http://shiro.apache.org/)编写自己的 OAuth 身份验证器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T21:17:18.430

您可以添加名为类似的自定义 servlet 并将`AuthServlet`其设置为公开可用`security-constraint`（它甚至可能是 Jersey @POST 方法顺便说一句）并使用[programmatic authentification](http://docs.oracle.com/javaee/6/tutorial/doc/gjiie.html#gircj)。

# mongoose - 猫鼬自动增量

> ID：15508912
> 
> 赞同：10
> 
> 时间：2013-03-19T19:40:09.877
> 
> 标签：mongoose, auto-increment

我想用 Mongoose 为 MongoDB 创建自动增量 ID。我已经在寻找一些例子了，但是除了 MongoDB 的文档之外没有任何有用的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2020-03-06T17:17:55.633

使用 mongoose-sequence，例如：在下面的模型中，当插入新文档时，它会将订单号加一。

```
const mongoose = require('mongoose'),
Schema = mongoose.Schema;

const AutoIncrement = require('mongoose-sequence')(mongoose);

const orderSchema = new Schema({
   _id: mongoose.Schema.Types.ObjectId,
   orderId: {
     type: Number
   }
   ...
});

orderSchema.plugin(AutoIncrement, {inc_field: 'orderId'});
module.exports = mongoose.model('Order', orderSchema); 
```

有一件重要的事情需要理解。如果在模式中添加**required: true ，则****操作会中断**。

在您的路由文件中，您可以创建一个 mongoose 订单对象并调用 save。

```
...
const order = new Order(body);
order.save()
     .then(doc => {
       res.json(doc);
       res.end();
     }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-04T06:53:04.207

在 npm 上，我们有[mongoose-auto-increment](https://www.npmjs.com/package/mongoose-auto-increment)和[mongoose-sequence](https://github.com/ramiel/mongoose-sequence)包可以很容易地实现这个功能。

# sql - （看似）简单查询的 SQL 错误

> ID：15508916
> 
> 赞同：-1
> 
> 时间：2013-03-19T19:40:16.813
> 
> 标签：sql

```
select distinct 
    assignedTo, 
    alert_id, 
    insert_date_time, 
    alert_status_id, 
    alert_action_id, 
    alert_call_reason_id, 
    target_date  
from Case_Management.AlertDetail 
```

工作正常。

```
select distinct 
    assignedTo, 
    alert_id, 
    max(insert_date_time), 
    alert_status_id, 
    alert_action_id, 
    alert_call_reason_id, 
    target_date  
from Case_Management.AlertDetail 
```

返回错误 列 'Case_Management.AlertDetail.assignedTo' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

我难住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T19:42:13.797

错误很明显，将不在聚合函数中的列添加到`GROUP BY`子句中：

```
select 
    assignedTo, 
    alert_id, 
    max(insert_date_time), 
    alert_status_id, 
    alert_action_id, 
    alert_call_reason_id, 
    target_date  
from Case_Management.AlertDetail 
GROUP BY assignedTo, 
         alert_id,
         alert_status_id, 
         alert_action_id,
         alert_call_reason_id, 
         target_date; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:44:08.990

想想你想要达到的目标。您要选择一些记录，但其中一列不是常规记录的内容，而是所有列的汇总。你不能混在一起。

您需要对数据进行分组以实现这一目标或使用子选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:42:21.250

您需要在第二个查询中使用 group by 子句，因为您有一个聚合。总量是

```
max(insert_date_time) 
```

# r - R file.copy copy.mode 向后兼容

> ID：15508917
> 
> 赞同：1
> 
> 时间：2013-03-19T19:40:24.600
> 
> 标签：r

在 R 2.13 file.copy 中引入了一个新的 copy.mode 参数，该参数会影响副本输出的权限。因此，与 n < 13 的 R 2.n 一起工作的程序可能不再工作。我在 Solaris 上发现了这一点。

如果dl.txt是444权限，用户的umask是002，

```
file.copy("dl.txt", "k.txt") 
```

用于创建具有 664 权限的 k.txt。现在它有 444。可以通过将 copy.mode=FALSE 添加到每个程序中的每个复制语句来覆盖此行为，以防万一它可能很重要。但是如果你这样做，并且使用的是旧版本的 R，你会得到一个致命的运行时错误。

是否有某种方法可以全局更改较新版本的 R 中的默认行为？或者其他保持向后兼容性的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:46:27.393

在某些全局区域覆盖它，例如`.Rprofile`：

```
if( getRversion() > 2.13 ) {
  file.copy <- function(...) { base::file.copy(..., copy.mode=FALSE) }
} 
```

# web-services - 来自 WebService 的 IBM BPM 映射列表

> ID：15508918
> 
> 赞同：0
> 
> 时间：2013-03-19T19:40:27.597
> 
> 标签：web-services, process, business-process-management

我正在使用 BPM 7.5.1，我在将 Web 服务的结果映射到本地 BPM 变量时遇到问题。Webservice 向我返回一个对象列表。确切地说，我有“客户”列表，每个客户都有一些基本信息（id、注册号等）。所有数据类型似乎都生成正确，webservice 返回正确的soap数据，但 BPM 无法将其映射到变量中。

我仍然收到此错误：

```
CWLLG0391E: An update operation failed.
    com.lombardisoftware.core.TeamWorksRuntimeException: Property ClientId in class ClientsListResponse is not declared. It must be declared to be used. 
```

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T05:41:06.727

```
Property ClientId in class ClientsListResponse is not declared. 
```

如错误声明中所述，您在 ClientsListResponse 中的 ClientId 尚未声明。您可以尝试以下方法：

```
tw.local.ClientsListResponse = new tw.object.listOf.ClientsListResponse;
tw.local.ClientsListResponse[0] = new tw.local.ClientListResponse;
tw.local.ClientsListResponse[0].ClientID = "xxx"; 
```

希望它有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-04T15:04:42.137

WSDL 没有属性 ClientId。可能是一些不同的角色。

另一方面，实例化一个对象必须是：

tw.object.listOf.ClientsListResponse = new tw.local.ClientsListResponse();

不像这样

tw.local.ClientsListResponse = 新的 tw.object.listOf.ClientsListResponse;

# javascript - 即使值未更改，jQuery UI 滑块“更改”事件也会触发

> ID：15508922
> 
> 赞同：14
> 
> 时间：2013-03-19T19:40:37.147
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-slider

我试图在用户滑动滑块时触发一个事件，并且在滑动停止时更改值。根据 jQuery 文档，该`change`事件非常适合这种情况。所以我正在尝试这个：

```
<!doctype html>
    <html lang="en">
        <head>
            <meta charset="utf-8" />
            <title>jQuery UI Slider - Default functionality</title>
            <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
            <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
            <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
            <link rel="stylesheet" href="/resources/demos/style.css" />
            <script>
                $(function() {
                    $( "#slider" ).slider({
                        change:function() { alert("foo"); }
                    });
                });
            </script>
        </head>
        <body>
            <div id="slider"></div>
        </body>
    </html> 
```

但是，我观察到，当我将滑块向右拖动并再次将其拖回起点（页面加载时滑块的初始位置）时，警报仍然会触发。这是一个 jQuery 错误吗？如果没有，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-19T19:51:21.037

```
$(function() {
    $("#slider").slider();

    var startPos = $("#slider").slider("value");, 
        endPos = '';

    $("#slider").on("slidestop", function(event, ui) {
        endPos = ui.value;

        if (startPos != endPos) {
            // do stuff
        }

        startPos = endPos;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:54:24.550

你试一试。

```
$(function() {
    $("#slider").slider({
        slide: function(event, ui) {
            // use ui.value to get a number
            // do your functions
        }
    });
}); 
```

# tabs - 单选模型 - 隐藏其他标签

> ID：15508924
> 
> 赞同：0
> 
> 时间：2013-03-19T19:40:45.463
> 
> 标签：tabs, javafx-2, javafx, selectionmodel

我需要使用打开的选项卡（选中）启动我的应用程序，我有代码

```
 SingleSelectionModel<Tab> selectionModel = tabPane.getSelectionModel();
 selectionModel.select(tab); 
```

有效，但它隐藏了现有的其他选项卡。

他们还尝试使用

```
 selectionModel.select(1); //select by index starting with 0
    selectionModel.clearSelection(); //clear your selection 
```

欢迎任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T08:29:36.477

在方法初始化上试试这个：

```
 @FXML
    private TabPane tabPane;
    private Tab clienTab = new Tab( "Clients" );
    private Tab byMonthTab = new Tab( "By Months" );
    private Tab aboutTab = new Tab( "About" );

    @Override
    public void initialize( final URL location, final ResourceBundle resources )
    {
        private ObservableList<Tab> observerList = null;
        SingleSelectionModel<Tab> selectionModel = null;

        if ( selectionModel == null )
        {
            selectionModel = tabPane.getSelectionModel();
        }

        if ( observerList == null )
        {
            observerList = FXCollections.observableArrayList();
        }

        observerList.add( clienTab );
        observerList.add( monthsTab );
        observerList.add( aboutTab );
        tabPane.getTabs().setAll( observerList );
        selectionModel.select( observerList.get( 1 ) );
    } 
```

稍后您可以使用菜单项执行此操作：

```
 @FXML
    private void clickMenuItemClients( final ActionEvent event )
    {
        if ( selectionModel.isSelected( 1 ) )
        {
            selectionModel.selectNext();
        }
    } 
```

# matlab - 不正确的泰勒级数错误图matlab

> ID：15508927
> 
> 赞同：0
> 
> 时间：2013-03-19T19:40:51.933
> 
> 标签：matlab

我必须编写一个获取 x（向量）和数字（N）的函数，并将绘制 cos(x) 的误差减去它的泰勒级数，直到 N（例如 N=3，所以函数是 abs(cos(x)-( 1-x^2/2+x^4/4))。代码如下：

```
function question2 (x,N)
sum=0;
s=1;
for i=0:2:N;
 sum=sum+((s*(x).^(i))/factorial(i));
 s=s*(-1);
end
y=abs(cos(x)-sum);
plot(x,y)
end 
```

图是这个：![不正确的图表](../Images/e198edd4980892ed0d511fc4c8e004c7.png)

但这应该是相反的！它必须是单调递减的，最终几乎是线性的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-07T00:28:26.780

我相信您希望看到误差随着参数 N 的值增加而减少。但是，正如许多人所指出的，您的代码将误差绘制为 x 的函数。随着您远离泰勒级数展开点（在本例中为 0），该误差预计会增加。

回到第一点，并显示误差如何随 N 变化，以下脚本针对不同的 N 值调用您的函数。结果如下所示，确认随着 N 的增加，近似误差会下降。

```
x = linspace(0, pi, 10); % x grid
% plot
figure;
question2(x, 0);  % 1 term (just the constant)
hold on;
question2(x, 2);  % 2 terms 
question2(x, 4);  % 3 terms
question2(x, 6);  % 4 terms
xlabel('x');
ylabel('Approximation error');
legend({'1 term', '2 terms', '3 terms', '4 terms'}, 'Location', 'Best'); 
```

[![在此处输入图像描述](../Images/c0d10254d8d8632b9799909504a54d3a.png)](https://i.stack.imgur.com/ABZ8K.png)

# javascript - 无法读取未定义的值？几个问题

> ID：15508933
> 
> 赞同：-2
> 
> 时间：2013-03-19T19:40:59.443
> 
> 标签：javascript, html

我有很多相同的错误。我相信它在我的循环中。我已经在没有任何帮助的情况下重新搜索了网络。我遇到的问题

1) 我的错误是 Uncaught SyntaxError: Unexpected token ILLEGAL pirate4.html:1 11 Uncaught TypeError: Cannot read property 'value' of undefined

2）当页面加载时，我没有得到地方的按钮。

当按下按钮时，我应该得到海盗谈话中每个短语的相应谈话。

第一次在堆栈上。任何帮助都是极好的。谢谢

编辑**这里是代码 jsfiddle.net/DseAk/1/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:47:45.127

问题在于您如何访问该元素。你有一个id，使用它。

```
outstring +=("<input type=\"button\" value=\"" + phrases[i][j] + "\" onClick='document.getElementById(\"output\").value += \"" + phrases[i][j+1] + " \";'>\n"); 
```

# git - Gitweb 找不到存储库“未找到此类项目”

> ID：15508936
> 
> 赞同：4
> 
> 时间：2013-03-19T19:41:06.923
> 
> 标签：git, gitweb

我的 CentOs 5.5 服务器上有一个正常运行的 git 存储库。我想要一个使用 gitweb 的存储库的 Web 用户界面。

[我使用http://git-scm.com/book/ch4-6.html](http://git-scm.com/book/ch4-6.html)上的说明安装了 gitweb，并且我设法让我的 apache 服务器正确运行 cgi。我将我的存储库放入`/pub/git`并使用. 不幸的是，我看不到我的存储库，并且网页显示消息“未找到此类项目”，我在谷歌上搜索但没有成功。`gitweb.conf``/etc/``$projectroot = '/pub/git';`

我尝试将该行添加`$projects_list = '/pub/git/projects.list';`到`gitweb.conf`并使用我的存储库的名称创建文件`projects.list`（例如`repos1.git`）。没有什么变化。如果我将不存在的存储库的名称放在 中`/pub/git`，则网页会显示更流行和调查的错误消息“404 - 未找到项目”。

请注意，apache 用户可以访问所有文件和存储库。

我的内容`/etc/gitweb.conf`是：

```
$projectroot = '/pub/git';
$projects_list = '/pub/git/projects.list'; 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T02:12:02.557

我解决了自己的问题，我想我会发布解决方案以防其他人遇到这个问题。

事实证明，gitweb 根本找不到`git`可执行文件。换句话说，[http://git-scm.com/book/ch4-6.html](http://git-scm.com/book/ch4-6.html)`make GITWEB_PROJECTROOT="/path/to/git/git"`中显示的 make 说明是不够的。

我花了这么长时间才弄清楚这一点的原因是因为人们预计会出现另一种类型的问题，而不仅仅是一个空的存储库列表！似乎是为了显示 gitweb`git rev-list`在项目上运行的最新提交消息。当它找不到`git`时，它只是放弃列出项目。我所要做的就是将该行添加`$GIT = '/path/to/git/git';`到我的`gitweb.conf`.

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T17:22:19.607

*我在bluehost.com*上遇到了同样的问题，提供 git 二进制文件的完整路径并没有帮助，但正如**gitweb.cgi**评论中所说的*“如果你的网络服务器有一个合理的 PATH，这可能只是“git”* ”解决了这个问题，所以所有需要解决的问题是：

```
our $GIT = "git"; 
```

在**gitweb.cgi**本身或“ **gitweb_config.perl** ”中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-24T14:56:30.810

如果你已经创建了repos，然后安装了gitweb，那么repos的保护可能会出错。我最初的 UMASK 是 077，所以我所有的 repos 只能由 git 用户访问。

当我这样做时：

```
cd /home/git
chmod -R 750 repositories 
```

并将 www-data 添加到“git”组：

```
usermod -a -G  git www-data 
```

我让它工作了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-16T02:39:37.850

我认为 projectroot 是在 gitweb.conf 中定义的——但它也被硬编码到 gitweb.cgi 中。也许，我的实现中没有 gitweb.conf 的来源。无论如何，我将 gitweb.cgi 编辑为`our $projectroot = /home/git`并为我修复了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-31T17:44:23.873

我也在 CentOS 6.4 上遇到了这个问题，只是想将我的解决方案添加到这个线程中。

对我来说，问题是启用了 SELinux。这阻止了 httpd 进程访问我的存储库目录，即使我对其进行了 chmod 777。

对我来说，只要禁用 SELinux 就可以解决问题。如果禁用不是一个选项，那么您需要查看如何配置 SELinux 以允许 httpd 访问您的存储库目录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-05T01:23:18.120

1.  检查文件权限`$projectroot`
    *   apache或nginx是否可以读取/遍历所有内容？
2.  查看`/etc/gitweb.conf`
    *   我不得不改变`$projectroot`，`$project_list`在这两个地方
3.  查看`/var/www/git/gitweb.cgi`
    *   我不得不改变`$projectroot`，`$project_list`在这两个地方
4.  你的项目出口了吗？
    *   查看`/path/to/project.git/git-daemon-export-ok`
5.  检查 selinux 政策
    *   这可能（或不）帮助你：[https ://gist.github.com/dnozay/dab08ac6500f8cb6a189](https://gist.github.com/dnozay/dab08ac6500f8cb6a189)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-04-09T02:43:55.893

对于我刚刚为 gitweb 配置的 CentOS6 服务器，是 SELinux 导致的。

```
setnforce 0 
```

解决了这个问题

# python - 导入到另一个模块时，Python 正在打印模块中的所有内容

> ID：15508940
> 
> 赞同：0
> 
> 时间：2013-03-19T19:41:35.103
> 
> 标签：python, python-module, python-import

我有 2 个文件。

1.  `funcattrib.py`
2.  `test_import.py`

**funcattrib.py**

```
import sys

def sum(a,b=5):
    "Adds two numbers"
    a = int(a)
    b = int(b)
    return a+b

sum.version = "1.0"
sum.author = "Prasad"
k = sum(1,2)
print(k)

print("Function attributes: - ")
print("Documentation string:",sum.__doc__)
print("Function name:",sum.__name__)
print("Default values:",sum.__defaults__)
print("Code object for the function is:",sum.__code__)
print("Dictionary of the function is:",sum.__dict__)

#writing the same information to a file

f = open('test.txt','w')
f.write(sum.__doc__)
f.close()
print("\n\nthe file is successfully written with the documentation string") 
```

**test_import.py**

```
import sys
from funcattrib import sum

input("press <enter> to continue")

a = input("Enter a:")
b = input("Enter b:")
f = open('test.txt','a')
matter_tuple = "Entered numbers are",a,b
print(matter_tuple)
print("Type of matter:",type(matter_tuple))
matter_list = list(matter_tuple)
print(list(matter_list))
finalmatter = " ".join(matter_list)
print(finalmatter)
f.write(finalmatter)
f.close()
print("\n\nwriting done successfully from test_import.py") 
```

我`sum`从`funcattrib.py`. 当我尝试执行 test_import.py 时，我看到了整个`funcattrib.py`. 我只是想使用该`sum`功能。

请指教，我做错了什么，或者有没有其他方法可以在不实际执行的情况下导入模块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:43:35.637

导入时执行模块“顶级”中的所有语句。

您*不*希望这种情况发生，您需要区分用作脚本的模块和模块。为此使用以下测试：

```
if __name__ == '__main__':
    # put code here to be run when this file is executed as a script 
```

将其应用于您的模块：

```
import sys

def sum(a,b=5):
    "Adds two numbers"
    a = int(a)
    b = int(b)
    return a+b

sum.version = "1.0"
sum.author = "Prasad"

if __name__ == '__main__':
    k = sum(1,2)
    print(k)

    print("Function attributes: - ")
    print("Documentation string:",sum.__doc__)
    print("Function name:",sum.__name__)
    print("Default values:",sum.__defaults__)
    print("Code object for the function is:",sum.__code__)
    print("Dictionary of the function is:",sum.__dict__)

    #writing the same information to a file

    f = open('test.txt','w')
    f.write(sum.__doc__)
    f.close()
    print("\n\nthe file is successfully written with the documentation string") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:43:46.740

Python 总是从上到下执行。函数定义是可执行代码，就像其他任何东西一样。导入模块时，该模块顶层的*所有代码都会运行。*Python 必须全部运行，因为函数是代码的一部分。

解决方案是保护您不希望在`if __name__=="__main__"`块下导入时运行的代码：

```
if __name__ == "__main__":
     print("Some info") 
```

# c# - MDS 2012 列出 WCF 中产品实体的成员

> ID：15508944
> 
> 赞同：2
> 
> 时间：2013-03-19T19:41:55.240
> 
> 标签：c#, sql, wcf

我需要在 C# 中列出生产实体中的成员。

下面是代码，但我不知道如何从集合中构建成员属性列表，例如名称。代码如下。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
// additional references... 
using HelloMDS.MDService; /* for the created service reference */
using System.Collections.ObjectModel; /* supports collection objects used in the proxy */

namespace HelloMDSG_Members
{
    class Program
    {
        private static ServiceClient mdsProxy; /* service proxy object */

        static void Main(string[] args)
        {
            // Create the service proxy 
            Console.WriteLine("Connecting...");
            try
            {
                mdsProxy = CreateMdsProxy("http://localhost/MDS/service/Service.svc");
                Console.WriteLine("Connected.");
            }
            catch (Exception ex)
            {
                Console.WriteLine("Error connecting: " + ex.Message);
            }

            Console.WriteLine("Call GetMembers");
            GetMembers();

            Console.WriteLine("Finished");
            Console.ReadKey();

        }

        public static void GetMembers()
        {

            //declare a new MDS ServiceClient
            ServiceClient client = new ServiceClient();
            //EntityMembersGetRequest request = new EntityMembersGetRequest();

            //Build a request for Entity Members of the Product Entity 
            //in the Product Model, Version 4 from the MDS Sample package on the MS Connect site
            EntityMembersGetRequest request = new EntityMembersGetRequest();
            request.MembersGetCriteria = new EntityMembersGetCriteria();
            request.MembersGetCriteria.ModelId = new Identifier() { Name = "Model 1" };
            request.MembersGetCriteria.VersionId = new Identifier() { Name = "VERSION_1" };
            request.MembersGetCriteria.EntityId = new Identifier() { Name = "Product" };

            request.MembersGetCriteria.MemberReturnOption = MemberReturnOption.DataAndCounts; //without this the request doesn't return memebers !

            Console.WriteLine("Start getting data");

            //submit the request to the MDS Web service  Client
            EntityMembersGetResponse response = client.EntityMembersGet(request);

            Console.WriteLine("Count:{0}", response.EntityMembersInformation.MemberCount);

            //confirm that members were returned
            if (response.EntityMembersInformation.MemberCount > 0)
            {
                System.Collections.ObjectModel.Collection<Member> members = response.EntityMembers.Members;

                // HELP HERE PLEASE
                // write members list with the name attribute
                Console.WriteLine() member  - name attribute );               

            }

            HandleErrors(response.OperationResult);
        }

        // creates the service client proxy 
        private static ServiceClient CreateMdsProxy(string mdsURL)
        {
            // create an endpoint address using the URL 
            System.ServiceModel.EndpointAddress endptAddress = new System.ServiceModel.EndpointAddress(mdsURL);

            // create and configure the WS Http binding 
            System.ServiceModel.WSHttpBinding wsBinding = new System.ServiceModel.WSHttpBinding();

            // create and return the client proxy 
            return new ServiceClient(wsBinding, endptAddress);
        }

        // Handles the operations results 
        private static void HandleErrors(OperationResult result)
        {
            string errorMessage = string.Empty;
            if (result.Errors.Count() != 0)
            {
                for (int i = 0; i <= result.Errors.Count() - 1; i++)
                {
                    errorMessage += " OperationResult:Error: " + result.Errors[i].Code + ":"
                         + result.Errors[i].Description + ":" + result.Errors[i].Context.Type.ToString();
                }
                Console.WriteLine("Error: " + errorMessage);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:10:03.943

您是否在寻找：

```
foreach(var member in members)
{
    Console.WriteLine(member.MemberId.Id);
    foreach(var attribute in member.Attributes)
    {
        Console.WriteLine("Attribute: {0},\tValue: {1}", attribute.Identifier.Name, attribute.Value);
    }
} 
```

# sql - 使用 SELECT INTO 创建一个新表并添加一个主键

> ID：15508948
> 
> 赞同：17
> 
> 时间：2013-03-19T19:42:09.113
> 
> 标签：sql, database, ms-access, dataset

我有一个使用 SELECT INTO SQL 语法创建的数据库表。该数据库位于 Access 中，包含大约 500,000 行。问题是当我进行连接时，唯一的是整行 - 我想要一个自动编号 ID 字段作为主键。

我目前拥有的代码类似于：

```
SELECT INTO new_table
FROM 
(SELECT * FROM table a, table b WHERE a.name = b.name) 
```

我希望有一种方法可以在我的 SELECT INTO 查询中添加一个子句，这样我就可以添加一个主键并一次性创建表 - 这可能吗？

如果不是，那么仅使用 SQL 执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-19T19:52:21.073

Adding a `Primary Key` during a `INSERT INTO` statement is not possible as far as I'm aware. What you can do however, is add an `IDENTITY` column that auto increments by using SQL Server's [`IDENTITY()`](https://docs.microsoft.com/en-us/sql/t-sql/functions/identity-function-transact-sql) function.

Something like this:

```
SELECT 
    ID = IDENTITY(INT, 1, 1),
    col1,
    col2
INTO new_table 
FROM (SELECT * FROM table a, table b WHERE a.name = b.name) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T21:43:23.450

在 Access 中，我不相信你可以在一个声明中完成你想要的。我认为你需要做的是...

1.  按照问题中的描述创建新表。

2.  像这样添加自动编号列：

    ALTER TABLE [new_table] 添加列 [ID] AUTOINCREMENT NOT NULL

3.  使您刚刚添加主键的列：

    ALTER TABLE [new_table] 添加约束 NewTable_PK 主键 (ID)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:49:37.297

创建主键并同时插入需要什么？

您可以同时创建主键和表，但据我所知不能插入。你可以这样做。

```
create table Tester 
(
Id int identity
    constraint PK_Id primary key(Id),
    description varchar(256)
)

insert into Tester
Select description
from table 
```

如果您想确保该表尚不存在并大量运行此脚本，则也可以添加一个 drop 并创建。临时表 '#(something)' 可以遵循永久表的许多规则，除了用于代码级移动，然后在完成后进行清理。

```
if object_id('(schema).(tablename)') is not null 
   drop table (schema).(tablename) 
```

我创造了一个不断增加的“身份”种子。默认是从 1 开始并以 1 递增，这满足了 95% 的简单数据库主键需求。它会自动增加，因此您无需担心。如果你有更多类似的东西，你也可以只插入特定的值：

```
insert into table (col1, col2) 
```

这消除了插入所有内容的需要，只需成为您想要的列。

# java - Spring：将某种类型的数组或列表注入 bean

> ID：15508950
> 
> 赞同：3
> 
> 时间：2013-03-19T19:42:09.280
> 
> 标签：java, spring

如果我有一个接口`I`和一些实现它的类，是否可以将数组`I[]`或`List<I>`bean 注入？我看到它可以通过`List<Object>`使用来完成`<list></list>`，但我想在这里参数化我的列表 - 或者获取类型的数组`I`。

列表/数组中的元素数量是固定的，并在运行前确定。

感谢您提前提供任何反馈:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:13:44.770

我 Spring 3.1 可以将其注入为：

```
@Inject
List<I> list; 
```

你的界面在哪里`I`（但它应该是具体的）。

或者您可以使用 Spring Java Config( `@Configuration`) 生成 ( `@Bean`) 命名列表并使用`Qualifier`or注入它们`@Named`。

[您也可以在这里](https://stackoverflow.com/a/2416145/1785811)定义类型化的命名列表：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/beans         http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/util    http://www.springframework.org/schema/util/spring-util-2.5.xsd">

<util:list id="myList" value-type="java.lang.String">
    <value>foo</value>
    <value>bar</value>
</util:list> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:06:01.593

如果您想要基于泛型类型的动态自动装配，那么不，由于类型擦除。如果您只想连接定义为类型`List<String>`（或其他）的列表，则没有什么可以阻止您这样做，例如：

应用环境：

```
<util:list id="theList">
    <value>a</value>
    <value>b</value>
</util:list> 
```

Java类：

```
@Resource(name = "theList")
List<String> theList; 
```

但是，这不会提供类型安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:46:22.877

由于编译时的 JAVA 类型擦除，这是不可能实现的。JAVA 泛型仅在编译时可用，用于确保类型安全。在运行时只剩下对象的（引用）。

唯一可以确保类型安全（但仍然是运行时）的方法是拥有任何类型的数组并使用 spring <array></array> 或 <list></list> 标签来填充数据。然后在运行时，当您尝试使用字符串填充 Integer[] 时会出现异常。

如果您使用泛型，则可以使用 Set<Integer> 并在运行时以 Set<String> 结束，因为提到的类型擦除。

# c++ - 一次两个字符串算法？

> ID：15508958
> 
> 赞同：2
> 
> 时间：2013-03-19T19:42:42.767
> 
> 标签：c++, string, algorithm

有没有办法在单个命令中执行以下操作（以避免测试）

```
if (mystring.find_first_not_of("X") != std::string::npos) {
    mystring.erase(0, mystring.find_first_not_of("X"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:10:33.593

```
mystring.erase(0, std::max(0, (std::make_signed<std::string::size_type>::type)
                           mystring.find_first_not_of('X'))); 
```

或者没有 C++11：

```
mystring.erase(0, std::max(0, (int)mystring.find_first_not_of('X'))); 
```

# java - 将图像写入另一台服务器上的文件

> ID：15508966
> 
> 赞同：0
> 
> 时间：2013-03-19T19:43:04.723
> 
> 标签：java

目前，我在本地主机上有一个运行良好的程序。该程序允许用户在视图中选择图像，解析 servlet 中的表单数据，为所有图像提供唯一 id 并将它们添加到我的数据库中，将图像写入本地主机上的文件夹，然后最终显示图像回给用户。我正在使用将图像写入文件夹 `ImageIO.write()`。

但是，当我启动此站点时，我想将所有静态内容保存在另一台服务器上。然后创建一个子域并将其指向该服务器。

所以我有点困惑，因为我所有的业务逻辑都将在主服务器（服务器 A）上。但是当用户上传图像时，我希望将其写入子域服务器（服务器 B）。这可能吗？我可以将图像写入业务逻辑服务器的文件夹吗？

这是一个简短的示例，说明我现在如何这样做只是为了提供一个想法。

```
private static void writeOriginal(BufferedImage original, long imageId) throws IOException
{   
    ImageIO.write(original, "jpg", new File(getOriginalDirectory() +imageId+ ".jpg"));
} 
```

...

```
private static String getOriginalDirectory()
{
    return "/Users/Chris/Documents/Instride/Workspace/Instride/WebContent/userImages/original/";
} 
```

# tomcat - 在 IntelliJ IDEA 项目中更改 servlet 的根上下文

> ID：15508967
> 
> 赞同：13
> 
> 时间：2013-03-19T19:43:11.587
> 
> 标签：tomcat, servlets, intellij-idea

我创建了两个 servlet，当我使用它们在我的 web.xml 文件中定义的 url 模式时运行它们。

例如，要运行第一个，我在浏览器中键入以下内容：

```
http://localhost:8080/XmlServletPath 
```

我想找到一种从不同的根上下文运行这些 servlet 的方法，例如：

```
http://localhost:8080/SimpleServletProject/XmlServletPath 
```

当我现在尝试上面的 URL 时，我收到以下错误：

```
HTTP Status 404 - /SimpleServletProject/XmlServletPath

type Status report
message /SimpleServletProject/XmlServletPath
description The requested resource is not available. 
```

PS：我使用的是 Tomcat 7.0.35。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-19T22:09:27.597

**可以在 Tomcat 运行/调试配置的**部署**选项卡中指定**应用程序上下文：****

 **![语境](../Images/5f07d002b8bce80a3511f4f90d683b6d.png)**

# vba - ms-access 根据查询对带有逗号的列进行排序？

> ID：15508968
> 
> 赞同：1
> 
> 时间：2013-03-19T19:43:14.583
> 
> 标签：vba, ms-access

有没有办法按照逗号之间的任何数据的顺序对具有逗号分隔的数据的列进行排序：

![当前的](../Images/3cc3b29d920353373833e826e2b99652.png)

所以我需要能够按 column3 对 abc 或 efg 甚至 hij 进行排序，然后按该搜索/查询对它们进行排序。

因此，如果我搜索/查询 efg 并对其进行排序，它在访问中会看起来像这样。

![结果](../Images/5de1a9cb4d870d6d6d7be3c187129311.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:12:53.880

似乎您想要`column3`包含*",efg"*的行，并且您想要根据该子字符串对结果集进行排序。您可以在 Access 会话中通过此查询获得它。

```
SELECT column1, column2, column3
FROM YourTable
WHERE column3 Like '*,efg*'
ORDER BY Mid(column3, InStr(column3, ',efg')); 
```

如果您将从 Access 会话外部运行查询并使用 ADO/OleDb，请更改通配符。

```
WHERE column3 Like '%,efg%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:33:02.300

选择 * from table1 where instr(col3,',') > 0

请尝试此 sql 并使用您的表和列名。祝你好运。

# python - 通过邮件查询端点用户

> ID：15508970
> 
> 赞同：1
> 
> 时间：2013-03-19T19:43:17.303
> 
> 标签：python, google-app-engine, google-cloud-endpoints, endpoints-proto-datastore

我正在尝试制作一种方法，该方法允许我通过用户电子邮件查询端点。有没有比我在下面做的更好的方法呢？一种可能只返回一条或零条记录。

```
 @User.query_method(query_fields=('email',),
                       path='get_by_mail',
                       name='user.get_by_email')
    def get_by_email(self, query):
        return query 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:56:52.863

我假设`User`是一些继承自`EndpointsModel`. 如果没有，这将失败。换句话说，你做了这样的事情：

```
from google.appengine.ext import ndb
from endpoints_proto_datastore.ndb import EndpointsModel

class User(EndpointsModel):
    email = ndb.StringProperty()
    ... 
```

解决此问题有两种主要方法，您可以使用`email`作为实体的键或滚动您自己的查询并尝试获取两个实体以查看您的结果是否唯一且存在。

# 选项 1：`email`用作密钥

[你可以做一个简单的 get](http://endpoints-proto-datastore.appspot.com/examples/simple_get.html)，而不是做一个完整的查询。

```
from google.appengine.ext import endpoints

@endpoints.api(...)
class SomeClass(...):

    @User.method(request_fields=('email',),
                 path='get_by_mail/{email}',
                 http_method='GET', name='user.get_by_email')
    def get_by_email(self, user):
        if not user.from_datastore:
            raise endpoints.NotFoundException('User not found.')
        return user 
```

通过使用电子邮件作为每个实体的数据存储键，就像在[自定义别名属性示例](http://endpoints-proto-datastore.appspot.com/examples/custom_alias_properties.html)中所做的那样。例如：

```
from endpoints_proto_datastore.ndb import EndpointsAliasProperty

class User(EndpointsModel):
    # remove email here, as it will be an alias property 
    ...

    def EmailSet(self, value):
        # Validate the value any way you like
        self.UpdateFromKey(ndb.Key(User, value))

    @EndpointsAliasProperty(setter=IdSet, required=True)
    def email(self):
        if self.key is not None: return self.key.string_id() 
```

# 选项 2：滚动您自己的查询

```
 @User.method(request_fields=('email',),
                 path='get_by_mail/{email}',
                 http_method='GET', name='user.get_by_email')
    def get_by_email(self, user):
        query = User.query(User.email == user.email)
        # We fetch 2 to make sure we have
        matched_users = query.fetch(2)
        if len(matched_users == 0):
            raise endpoints.NotFoundException('User not found.')
        elif len(matched_users == 2):
            raise endpoints.BadRequestException('User not unique.')
        else:
            return matched_users[0] 
```

# sql - 子串相等

> ID：15508971
> 
> 赞同：-1
> 
> 时间：2013-03-19T19:43:18.127
> 
> 标签：sql, sql-server, substring, equality

这是一个处理`SUBSTRING`与 Server 2008 相等性的问题。在我的问题中，我有一个名为`LICNO`处理许可证号的列。这些许可证号的格式如下：

```
LPC-907
LCSW-517 
```

我使用`SUBSTRING`如下：

```
CASE 
  WHEN SUBSTRING(LICNO,1,2) <> 'LA' THEN 'Architect'
  WHEN SUBSTRING(LICNO,1,4) = 'CAP' THEN 'Certified Public Assistant'
  WHEN SUBSTRING(LICNO,1,2) IS NULL  THEN 'None'
  ELSE 'Landscape Architect'
END AS LicenseType, 
```

存储过程只返回 Architect 和 Landscape Architect。我正确使用 SUBSTRING 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:48:47.203

目前，如果 LICNO 不以 LA 开头，则该语句将返回 Architect。因此，如果 LICNO 以 CAP 开头，它将返回 Architect。您需要为您的报表找到正确的顺序。将 <> 'LA' 放在其他条件之后和 ELSE 之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:53:11.787

```
CASE 
  WHEN SUBSTRING(LICNO,1,2) = 'LA' THEN 'Landscape Architect'
  WHEN SUBSTRING(LICNO,1,3) = 'CAP' THEN 'Certified Public Assistant'
  WHEN SUBSTRING(LICNO,1,2) IS NULL  THEN 'None'
  ELSE 'Architect'
END AS LicenseType, 
```

(following @Melanie)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:50:39.603

我认为您可能为该`SUBSTRING`函数使用了不正确的字符数。如果您希望该值等于 CAP，那么我认为您应该使用 3 作为长度。另外，替换 CASE 语句的顺序：

```
CASE 
  WHEN SUBSTRING(LICNO,1,3) = 'CAP' THEN 'Certified Public Assistant'
  WHEN SUBSTRING(LICNO,1,2) IS NULL  THEN 'None'
  WHEN SUBSTRING(LICNO,1,2) <> 'LA' THEN 'Architect'
  ELSE 'Landscape Architect'
END AS LicenseType 
```

[http://msdn.microsoft.com/en-us/library/ms187748.aspx](http://msdn.microsoft.com/en-us/library/ms187748.aspx)

# mysql - 如何从 MySQL 中选择食物中吃得最多的部分？

> ID：15508972
> 
> 赞同：1
> 
> 时间：2013-03-19T19:43:22.843
> 
> 标签：mysql

我有一张桌子`eaten`，上面写着吃过的食物的历史，像这样：

```
id | food | amount
1    1      50
2    1      60
3    1      60
4    1      70
5    2      10
6    2      1
7    2      900
8    2      1
9    2      1
10   3      3 
```

`amount`我需要为每个SELECT 最常见的`food`。这是预期的结果：

```
food | amount
1      60
2      1
3      3 
```

这是我的 MySQL 查询，但仅适用于一种食物：

```
SELECT `food`, `amount`, COUNT(`amount`) as `count`
FROM `eaten`
WHERE `food` = 1
GROUP BY `amount`
ORDER BY `count` DESC
LIMIT 1 
```

出于某种原因，当我擦除`WHERE`零件时，返回的值不正确。我怎样才能解决这个问题？

这是重新创建数据库以对其进行测试的 SQL 文件：[eated.sql](http://www.rimmer.sk/eaten.sql)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:54:23.237

尝试：

```
select rq.food, rq.amount 
from (select food, amount, count(*) amcount
      from eaten
      group by food, amount) rq
join (select food, max(amcount) maxcount from
      (select food, amount, count(*) amcount
       from eaten
       group by food, amount) sq
      group by food) mq
on rq.food = mq.food and rq.amcount = mq.maxcount 
```

## [Sql 小提琴](http://sqlfiddle.com/#!2/aea93/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:45:49.553

其他方式：

```
SELECT
    e.*
FROM
    ( SELECT DISTINCT food
      FROM eaten
    ) AS d
  JOIN
    ( SELECT DISTINCT food, amount
      FROM eaten
    ) AS e
      ON e.amount =
         ( SELECT amount
           FROM eaten AS ee
           WHERE ee.food = d.food
           GROUP BY amount
           ORDER BY COUNT(*) DESC
               LIMIT 1
         ) ; 
```

在**[SQL-Fiddle测试](http://sqlfiddle.com/#!2/92d9f/1)**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T19:49:36.210

这应该为您提供每种食物类型的最常见数量。子选择将给出每种食物的总数和数量。在主循环中，GROUP BY 子句将确保查询只返回每种食物类型的一条记录。ORDER BY 将导致它采用最常见的一个。

```
SELECT `food`, `amount`, `count`

FROM

(
    SELECT `food`, `amount`, COUNT(`amount`) as `count`
    FROM `eaten`
    GROUP BY `food`, `amount`
    ORDER BY `food`, `count` DESC
) x

GROUP BY `food`
; 
```

# ios - NSMutableArray 总是用最后一个替换旧对象

> ID：15508975
> 
> 赞同：0
> 
> 时间：2013-03-19T19:43:24.427
> 
> 标签：ios, objective-c, nsmutablearray, nsmutabledictionary

我是 Objective-C 编程的新手，我的 NSMutableArray 有问题...

当我第一次尝试时，我的数据保存得很好，但如果我想再试一次，第一个被新的覆盖，新的也被保存。

一个例子来理解：

第一次尝试：

```
Tabobjets : (
        {
        Contact = 1;
        DateARendre = 1;
        DateJour = "2013-03-19 19:27:29 +0000";
        Nom = 1;
        Rendu = 0;
        Titre = 1;
    }
) 
```

第二次尝试：

```
Tabobjets : (
        {
        Contact = 2;
        DateARendre = 2;
        DateJour = "2013-03-19 19:27:40 +0000";
        Nom = 2;
        Rendu = 0;
        Titre = 2;
    },
        {
        Contact = 2;
        DateARendre = 2;
        DateJour = "2013-03-19 19:27:40 +0000";
        Nom = 2;
        Rendu = 0;
        Titre = 2;
    }
) 
```

这是我的代码

```
@interface SecondViewController () {
    NSMutableDictionary *tabObjet;
    NSMutableArray *tabObjets;
    NSString *appFile;
}

@end

@implementation SecondViewController

- (void)viewWillAppear:(BOOL)animated{
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    // the path to write file
    appFile = [documentsDirectory stringByAppendingPathComponent:@"Bigre.plist"];

    if (tabObjets == nil) {
        tabObjets = [[NSMutableArray alloc] initWithContentsOfFile:appFile];
    }

    if (tabObjet == nil) {
        tabObjet = [[NSMutableDictionary alloc] init];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)saisieReturn :(id)sender{
    [sender resignFirstResponder];

    NSLog(@"Tabobjet avant : %@",tabObjet);
    NSLog(@"Tabobjets avant : %@",tabObjets);

    //inscription dans un dictionnaire
    [tabObjet setObject:_titreObjet.text forKey:@"Titre"];
    [tabObjet setObject:_nomPersonne.text forKey:@"Nom"];
    [tabObjet setObject:_infoContact.text forKey:@"Contact"];
    [tabObjet setObject:[NSDate date] forKey:@"DateJour"];
    [tabObjet setObject:_dateARendre.text forKey:@"DateARendre"];
    [tabObjet setObject:[NSNumber numberWithBool:NO] forKey:@"Rendu"];

    int numItems = [tabObjets count];
    [tabObjets insertObject:tabObjet atIndex:numItems];

    NSLog(@"Tabobjet apres : %@",tabObjet);
    NSLog(@"Tabobjets apres : %@",tabObjets);

    //écriture dans un fichier plist
    [tabObjets writeToFile:appFile atomically:YES];
}

@end 
```

非常感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:52:16.727

你覆盖你的`tabObjet`. 只需在里面声明并将其`saisieReturn:`更改为

```
- (IBAction)saisieReturn :(id)sender{
    [sender resignFirstResponder];

    NSLog(@"Tabobjets avant : %@",tabObjets);

    //inscription dans un dictionnaire
    tabObjet = [[NSMutableDictionary alloc] init];
    [tabObjet setObject:_titreObjet.text forKey:@"Titre"];
    [tabObjet setObject:_nomPersonne.text forKey:@"Nom"];
    [tabObjet setObject:_infoContact.text forKey:@"Contact"];
    [tabObjet setObject:[NSDate date] forKey:@"DateJour"];
    [tabObjet setObject:_dateARendre.text forKey:@"DateARendre"];
    [tabObjet setObject:[NSNumber numberWithBool:NO] forKey:@"Rendu"];

    [tabObjets addObject:tabObjet];

    NSLog(@"Tabobjet apres : %@",tabObjet);
    NSLog(@"Tabobjets apres : %@",tabObjets);

    //écriture dans un fichier plist
    [tabObjets writeToFile:appFile atomically:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:52:00.130

这是因为每次尝试添加新字典时，您都在修改同一个可变字典。修改你的行，如：

```
[tabObjets insertObject:[tabObjet copy] atIndex:numItems]; 
```

# javascript - 创建带有显示/隐藏条目的复选框系统 - 如何？

> ID：15508986
> 
> 赞同：1
> 
> 时间：2013-03-19T19:43:46.100
> 
> 标签：javascript, jquery, html, css

所以，我要做的就是为一系列表字段创建类。

每个类可以多次应用于每个表字段。

在 Javascript 中，我想创建一个与一系列复选框相关的脚本。当每个复选框被选中或取消选中时，相关的类将消失。

例如：

```
<input type="checkbox" id="checkbox1" name="check" value="Number1" checked> Contents <br>
<input type="checkbox" id="checkbox2" name="check" value="Number2" checked> Contents <br>
<input type="checkbox" id="checkbox3" name="check" value="Number3" checked> Contents <br>
<input type="checkbox" id="checkbox4" name="check" value="Number4" checked> Contents <br> 
```

然后任何具有特定类的表字段都应该通过这个 Javascript 消失：

```
function topicSorter() {
    $("#Checkbox1").onclick = function () {if ($("#Checkbox1").checked) {$('.class1').show(); } else {$('.class1').hide(); }
        };
    $('.class1').show();   
} 
```

我似乎只能在不使用 jQuery 并且只使用类 via 的情况下让它工作`getElementById`，而不是使用任何“类”的变体，比如`getElementByClassName`......

它不工作。

很抱歉用所有这些废话堵塞了这个互联网。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:50:46.263

将每个复选框中的值更改为数字 1-4。然后尝试以下代码：

```
 $("input[type='checkbox']").change(function() {
        var value = $(this).attr("value");

        $('.class' + value).toggle(this.checked);
    }); 
```

现在，每次单击复选框时都会触发此代码，找到相应的值，并隐藏或显示相关类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:56:00.560

```
<input name="filter" type="checkbox" value="class-1" /> Class 1
<input name="filter" type="checkbox" value="class-2" /> Class 2
<input name="filter" type="checkbox" value="class-3" /> Class 3
<input name="filter" type="checkbox" value="class-4" /> Class 4 
```

* * *

```
function SetFilter()
{
    var checked = new Array();
    $("input[type='checkbox'][name='filter']:checked").each(function(){
        checked.push("." + $(this).val());
    });    

    var value = checked.join(",");    
    $("tr").filter(":not(" + value + ")").hide();
    $("tr").filter(value).show();
}

$("input[type='checkbox'][name='filter']").change(SetFilter);

SetFilter(); 
```

* * *

[http://jsfiddle.net/hunter/NxcPL/](http://jsfiddle.net/hunter/NxcPL/)

# windows - Powershell 多维数组 IndexOf 返回 -1

> ID：15508990
> 
> 赞同：2
> 
> 时间：2013-03-19T19:44:07.690
> 
> 标签：windows, powershell

我正在运行一个将 Citrix QFarm /load 命令输出到文本文件中的脚本；它本质上是两列，然后我将其输入到多维数组中，如下所示：

```
SERVER1 100
SERVER2 200
SERVER3 300 
```

我正在寻找特定服务器的 indexOf 以便我可以检查负载均衡器级别是什么。当我使用 indexOf 方法时，我只会得到 -1 的回报；但是脚本末尾的明确 write-host 表明答案应该是 41。

为了将 IndexOf 与 2d 数组一起使用，是否需要一些魔法？

```
$arrQFarm= @()
$reader = [System.IO.File]::OpenText("B:\WorkWith.log")
try {
for(;;) {
    $str1 = $reader.ReadLine()
    if ($str1 -eq $null) { break }

    $strHostname = $str1.SubString(0,21)
    $strHostname = $strHostname.TrimEnd()
    $strLB = $str1.SubString(22)
    $strLB = $strLB.TrimEnd()

    $arrQFarm += , ($strHostName , $strLB)
    }
}
finally {
$reader.Close()
}

$arrCheckProdAppServers = "CTXPRODAPP1","CTXPRODAPP2"

foreach ($lines in $arrCheckProdAppServers){
$index = [array]::IndexOf($arrQFarm, $lines)
Write-host "Index is" $index
Write-Host "Lines is" $lines

}

if ($arrQFarm[41][0] -eq "CTXPRODAPP1"){
Write-Host "YES!"
} 
```

运行它会给出输出：

```
PS B:\Citrix Health Monitoring\249PM.ps1
Index is -1
Lines is CTXPRODAPP1
Index is -1
Lines is CTXPRODAPP2
YES! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:10:13.947

我假设在您的情况下，只有当两列都匹配 (hostname|level) 时，它才会起作用：`[array]::IndexOf($arrQFarm, ($strHostName , $strLB))`。根据[IndexOf](http://msdn.microsoft.com/en-us/library/7eddebat.aspx)它比较数组的整个项目（在你的情况下也是数组）

也许我不会直接回答这个问题，但是如何使用 Hashtable（感谢 dugas 的纠正）？喜欢：

```
$arrQFarm= @{}
$content = Get-Content "B:\WorkWith.log"
foreach ($line in $content)
{
    if ($line -match "(?<hostname>.+)\s(?<level>\d+)")
    {
        $arrQFarm.Add($matches["hostname"], $matches["level"])
    }
}

$arrCheckProdAppServers = "CTXPRODAPP1","CTXPRODAPP2"

foreach ($lines in $arrCheckProdAppServers)
{
    Write-host ("Loadbalancer level is: {0}" -f $arrQFarm[$lines])
} 
```

# ruby-on-rails - Rails 3.2，如何更改：从邮件中的值改为默认值（GMail）

> ID：15508994
> 
> 赞同：5
> 
> 时间：2013-03-19T19:44:18.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmail, contact-form

我已经建立了一个联系我们的表格，我很好地在我的 gApps 收件箱中收到了电子邮件。但是，收到的电子邮件会显示站点的默认 :from 值。我希望他们看起来是从电子邮件用户在他们表单的电子邮件字段中输入的。因此，当我点击“回复”时，它会将用户地址作为必须发送电子邮件的地址。

我试过这个，但它不起作用。知道为什么吗？

通知邮件程序.rb

```
class NotificationsMailer < ActionMailer::Base
  default to: "info@hikultura.com"

  def new_contact(message)
      @message = message
      mail(:subject => "[hiKultura.com] #{message.subject}",
        :from => message.email)
  end
end 
```

联系人控制器

```
class ContactController < ApplicationController

  def new
    @message = Contactmessage.new
  end

  def create
    @message = Contactmessage.new(params[:contactmessage])

    if @message.valid?
      NotificationsMailer.new_contact(@message).deliver
      redirect_to(root_path, :notice => "Message was successfully sent.")
    else
      flash.now.alert = "Please fill all fields."
      render :new
    end
  end

end 
```

更新

我遵循了我在 SO 中发现的关于 :reply_to 和 GMail 的类似案例。但是，当我点击回复时，仍然显示 :to 电子邮件地址。我错过了什么？？？

通知邮件程序.rb

```
class NotificationsMailer < ActionMailer::Base

   default :from => 'no-reply@mydomain.com'

  def new_contact(message)
      @message = message
      mail(:reply_to => "mierda@hotmail.com",
      :subject => "[mydomain.com] #{message.subject}", 
      :to => "admin@mydomain.com"
      )
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T20:08:18.330

大多数 SMTP 提供商（Gmail 等）不允许您从与您登录到 SMTP 服务器的帐户关联的地址以外的地址发送电子邮件，在您的情况下，这可能是配置的默认地址在您的应用程序中。如果您考虑一下，这对于安全/垃圾邮件保护非常有意义。您是否希望任何人都能够发送一封将您的电子邮件地址显示为发件人地址的电子邮件？我肯定不会。另一种方法是使用 :reply_to。当您在电子邮件程序中点击回复时，如果它存在，它应该使用它。

```
 mail(:subject => "[hiKultura.com] #{message.subject}",
    :reply_to => message.email) 
```

# java - 使用数组增强 for 循环

> ID：15508995
> 
> 赞同：0
> 
> 时间：2013-03-19T19:44:19.263
> 
> 标签：java

我看到了如下一行代码：

```
for (String w : words) sentence.add(w); // words is declared as String[] words = ...; 
```

据我所知，我认为为了能够以这种格式编写 for 循环，我们需要“单词”作为实现 Iterable 接口并覆盖 iterator() 函数的类的实例。但是 'words' 是字符串数组类型，这个 for 循环格式怎么能正确呢？

有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T19:46:25.810

来自[关于这个主题的 Java 教程](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)：

> for-each 结构也适用于数组，它隐藏索引变量而不是迭代器。以下方法返回 int 数组中值的总和：
> 
> ```
> // Returns the sum of the elements of a
> int sum(int[] a) {
>     int result = 0;
>     for (int i : a)
>         result += i;
>     return result;
> } 
> ```

并且来自[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)（Java 语言规范）的 §14.14.2：

> 增强的 for 语句具有以下形式：
> 
> ```
> EnhancedForStatement:
>     for ( FormalParameter : Expression ) Statement 
> ```
> 
> 的类型`Expression`必须是`Iterable`或数组类型，否则会发生编译时错误。

但请注意，数组不实现`Iterable`；来自[JLS 的§10.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.1)：

> 数组类型的直接超类是`Object`.
> 
> 每个数组类型都实现了接口`Cloneable`和`java.io.Serializable`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T19:51:10.717

与以往一样，Java 语言规范是值得一看的地方。在这种情况下，它是[第 14.14.2 节，增强`for`语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)：

> ```
> EnhancedForStatement:  
>      for ( FormalParameter : Expression ) Statement 
> ```
> 
> Expression 的类型必须是 Iterable 或数组类型（第 10.1 节），否则会发生编译时错误。
> 
> ...
> 
> *   如果 Expression 的类型是 Iterable 的子类型，那么翻译如下。[...描述如何处理迭代...]
>     
>     
> *   否则，表达式必须具有数组类型，`T[]`。[...描述如何处理数组...]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T19:46:28.900

是的，它是可迭代的，您可以像实现 Iterable 接口的任何类一样对其进行迭代，就像 Java 中的所有数组一样（使用 for each 循环）。据我所知，数组并没有实现这个接口，因为它们只是对象，但是编译器做了一些神奇的事情并让它工作。

# c# - 为什么我的代码块没有在 Sandcastle 帮助文件中呈现？

> ID：15508997
> 
> 赞同：2
> 
> 时间：2013-03-19T19:44:29.217
> 
> 标签：c#, sandcastle

我正在使用与 VS.NET 2012 集成的 Codeplex 的当前版本的 Sandcastle 来构建`.cmh`帮助文件。正在创建帮助文件，但我似乎无法`<code>`在帮助文件中发出任何块。我有以下简单的示例，我一直在使用：

```
/// <summary>
/// This is the summary 
/// </summary>
/// <code>var s;</code>
public string SomeValue { get; set; } 
```

当我查看输出 .chm 文件时，`var s;`代码不存在于*任何地方*。我做了以下事情：

*   `Code Block Component`在 Sandcastle 项目属性中添加了对的引用。
*   尝试制作标签`<code lang="C#">var s;</code>`，`<code language="C#">var s;</code>`但都没有改变。
*   阅读以下站点上详细说明此过程但无济于事的文档：
    [https ://www.simple-talk.com/dotnet/.net-tools/taming-sandcastle-a-.net-programmers-guide-to-documenting-你的代码/](https://www.simple-talk.com/dotnet/.net-tools/taming-sandcastle-a-.net-programmers-guide-to-documenting-your-code/)
    [http://www.ewoodruff.us/shfbdocs/](http://www.ewoodruff.us/shfbdocs/)

该示例显然是一个简化版本，但我只是想在这里获得基础知识。我做错了什么或遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:09:47.333

我不认为代码标签本身是允许的，试着把它放在一个`<example>`标签里，比如`<example><code>var s;</code></example>`. 所以这应该工作：

```
/// <summary>
/// This is the summary 
/// </summary>
/// <example>
/// <code>var s;</code>
/// </example>
public string SomeValue { get; set; } 
```