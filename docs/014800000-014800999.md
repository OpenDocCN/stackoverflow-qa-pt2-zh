# StackOverflow 问答 14800000-14800999

# cuda - 如何从活动 CUDA 设备获取属性？

> ID：14800009
> 
> 赞同：7
> 
> 时间：2013-02-10T16:44:06.113
> 
> 标签：cuda, nvidia

从 CUDA 设备（！）获取属性的众所周知的代码是枚举所有设备，并从那时获取属性。然后我看到这样的作品，它激活了给定的设备。

我有相反的问题——假设设备已经被选中，我想获取它的属性（活动的），而不是系统中存在的所有设备。

*我希望我以正确的方式写了这个，因为我是 CUDA 的新手。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-10T17:07:18.663

只需调用`cudaGetDevice()`以获取活动上下文的设备号，然后调用`cudaGetDeviceProperties`以获取该设备的属性。在类似于以下的代码中：

```
int device;
cudaGetDevice(&device);

struct cudaDeviceProp props;
cudaGetDeviceProperties(&props, device); 
```

[免责声明：用浏览器编写，从未编译或测试过。使用风险自负]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-11T13:05:22.437

我在这里有一个脚本，它可以识别所有活动设备，并且每个设备都会在屏幕上返回一些有用的信息。

```
#include <stdio.h>

int main() {

  int nDevices;
  cudaGetDeviceCount(&nDevices);

  printf("Number of devices: %d\n", nDevices);

  for (int i = 0; i < nDevices; i++) {
    cudaDeviceProp prop;
    cudaGetDeviceProperties(&prop, i);
    printf("Device Number: %d\n", i);
    printf("  Device name: %s\n", prop.name);
    printf("  Memory Clock Rate (MHz): %d\n",
           prop.memoryClockRate/1024);
    printf("  Memory Bus Width (bits): %d\n",
           prop.memoryBusWidth);
    printf("  Peak Memory Bandwidth (GB/s): %.1f\n",
           2.0*prop.memoryClockRate*(prop.memoryBusWidth/8)/1.0e6);
    printf("  Total global memory (Gbytes) %.1f\n",(float)(prop.totalGlobalMem)/1024.0/1024.0/1024.0);
    printf("  Shared memory per block (Kbytes) %.1f\n",(float)(prop.sharedMemPerBlock)/1024.0);
    printf("  minor-major: %d-%d\n", prop.minor, prop.major);
    printf("  Warp-size: %d\n", prop.warpSize);
    printf("  Concurrent kernels: %s\n", prop.concurrentKernels ? "yes" : "no");
    printf("  Concurrent computation/communication: %s\n\n",prop.deviceOverlap ? "yes" : "no");
  }
} 
```

**注意**：将代码片段放在`.cu`文件中并使用`nvcc`.

例如，在我的带有一个 GPU 的桌面上，屏幕上的消息是：

```
Number of devices: 1
Device Number: 0
  Device name: Quadro K5200
  Memory Clock Rate (MHz): 2933
  Memory Bus Width (bits): 256
  Peak Memory Bandwidth (GB/s): 192.3
  Total global memory (Gbytes) 7.4
  Shared memory per block (Kbytes) 48.0
  minor-major: 5-3
  Warp-size: 32
  Concurrent kernels: yes
  Concurrent computation/communication: yes 
```

# linux - 快速测试 Linux 内核

> ID：14800011
> 
> 赞同：2
> 
> 时间：2013-02-10T16:44:17.350
> 
> 标签：linux, kernel, grub

我想学习 linux 内核编程，所以我从 www.kernel.org 下载了 Linux kernel 3.7.6 源代码。然而，在编辑任何东西之前，我尝试使用在线教程对其进行编译。

编译需要很多时间，`make`我还没有完全完成。有什么快速的方法可以更改源代码并进行测试吗？因为我读过内核编译大约需要一个小时。

另外，是否可以在 USB 驱动器上复制和测试修改后的内核？是否可以在 USB 驱动器上安装 GRUB，在 USB 上复制内核，在 USB 上配置 GRUB 然后运行它？如果是这样，请给我任何具有相同步骤的资源。我的笔记本电脑上也安装了 GRUB。如何在 USB 上设置新的 GRUB 而不会干扰笔记本电脑上的配置？

谢谢.. ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T17:33:29.663

你提到你想学习 Linux 内核编程，所以我想我有一个更好的建议给你，因为你是这一切的新手。

对于初学者，你为什么不尝试做一些内核编程，比如引入非常简单的驱动程序或与 netfilter 相关的东西（你几乎可以使用它来控制整个 TCP/IP），甚至都不需要编译内核？

[内核模块](http://linux.die.net/lkmpg/x40.html)是您的朋友 :)
它们是一段简单的代码，您可以**单独**编译，然后要求**正在运行**的内核（使用`insmod`Linux 命令）将此代码附加到正在运行的内核，然后就可以了！您有自己的代码在内核空间中运行。

我确实意识到这并不能完全回答你的问题，但我真的认为这样开始对你来说更容易，而且可能更有用；一旦您对可以在此处找到的许多东西更加熟悉，请尝试继续实际修改现有的内核代码。

让您知道您可以使用内核模块做什么： -驱动 程序-向内核添加新功能- 我亲自将它与 netfilter（内核中的一组函数和钩子）一起使用以修改处理网络流量
- 您可以还修补你的内核（修改源代码，编译，运行整个东西）然后使用内核模块来编辑通常需要重新编译的东西，比如编辑系统调用；虽然**不推荐这种方法，**但它可以延长您的测试时间，每次您想要进行测试时，您都不必编译和重新启动。 -多得多..

 **让我知道我是否在某些时候感到困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T17:05:44.943

如果要引导它，则需要将内核构建到最后。然而，在只对代码进行少量更改后，第二次应该会更快，只需要重建内核的一部分。

[通过向grub.cfg](https://wiki.archlinux.org/index.php/GRUB2#Notes_for_current_GRUB_Legacy_users)（对于[grub2](https://help.ubuntu.com/community/Grub2) ）添加新条目，很容易拥有多个引导选项（使用不同的内核）。但是，我不能在这里重复多页文档。**

# haskell - Haskell 中的函数类型

> ID：14800012
> 
> 赞同：1
> 
> 时间：2013-02-10T16:44:17.980
> 
> 标签：haskell

我正在尝试学习 Haskell 的基础知识，但我很难理解为什么`doubleMe`类型声明会导致“非法运算符”错误，而`addThree`根本不会导致错误？

```
doubleMe :: Int -> Int -> Int
doubleMe x = x + x

addThree :: Int -> Int -> Int -> Int
addThree x y z = x + y + z 
```

我感谢任何澄清。

提前谢谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T16:48:17.350

声明需要每个参数的类型，以及结果的类型。由于`doubleMe`只有一个参数，因此声明应该是`doubleMe :: Int -> Int`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T16:59:24.880

您的 doubleMe 类型签名指定了两个参数。

如果您只提供一个（`doubleMe x`），那么右侧应该返回一个函数（`Int -> Int`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T19:59:28.057

对于此类类型的问题`ghci`是一个很好的工具。用于`:t`询问表达式的类型：

```
Prelude> let doubleMe x = x + x
Prelude> :t doubleMe
doubleMe :: Num a => a -> a 
```

所以类型是`a -> a`- 正如其他答案已经指出的那样，您只有一个论点，而不是两个论点。

你没有得到`Int`，因为 Haskell 试图派生*最通用*的类​​型签名。这就是你得到的原因`Num a =>`，这意味着它适用于作为类型类实例的`doubleMe`所有类型（在哪里定义），这反过来意味着适用于, , （至少如果你没有指定更严格的类型，比如)...`a``Num``(+)``doubleMe``Int``Integer``Double``Int -> Int`

# javascript - IE 7 & 8 不会加载脚本

> ID：14800013
> 
> 赞同：0
> 
> 时间：2013-02-10T16:44:19.243
> 
> 标签：javascript

我正在使用以下代码为我的小部件加载所需的 JS 库：

```
function loadScrip(url, callback) {
    var script = document.createElement("script")
    script.type = "text/javascript";

    if (script.readyState) { //IE
        script.onreadystatechange = function () {
            if (script.readyState == "loaded" || script.readyState == "complete") {
                script.onreadystatechange = null;
                callback();
            }
        };
    } else { //Others
        script.onload = function () {
            callback();
        };
    }
    script.src = url;
    document.getElementsByTagName("head")[0].appendChild(script);
}

loadScrip("http://code.jquery.com/jquery-1.8.3.js", function () {
    loadScrip("http://code.jquery.com/ui/1.9.2/jquery-ui.js", function () {
        alert("Loaded");
        js13 = jQuery.noConflict(true);
        main();
    });
}); 
```

这在所有浏览器和 IE9 中都可以正常工作。

但是在 IE 7 和 8 中由于某种原因 jquery-ui.js 不会加载并且我得到错误：

```
Line: 563
Character: 4
Code: 0
Error Message: Object doesn't support this property or method
URL: http://code.jquery.com/jquery-1.8.3.js 
```

任何想法如何解决这一问题？我用这个问题把头撞在墙上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:31:09.747

完全跨浏览器测试的脚本：

```
var CFLoad = {
    fScript : null,
    isFileReady : function ( v ) {
        return ( ! v || v == "loaded" || v == "complete" || v == "uninitialized" );
    },
    js : function(src,cb,attrs) {
        var s = document.createElement( "script" ),
            done = !1, i;
        s.src = src;
        s.type = "text/javascript";
        for ( i in attrs ) {
            s.setAttribute( i, attrs[ i ] );
        }
        s.onreadystatechange = s.onload = function () {
            if ( ! done && CFLoad.isFileReady( s.readyState ) ) {
                done = !0;
                if(cb) cb(s);
                s.onload = s.onreadystatechange = null;
            }
        };
        window.setTimeout(function() {
            if( !done) {
                done = !0;
                if(cb) cb(s,1);
            }
        }, 5000);
        if(this.fScript===null) this.init();
        this.fScript.parentNode.insertBefore( s, this.fScript );
    },
    css : function(href,cb,attrs) {
        var l = document.createElement("link"),i;
        l.href = href;
        l.rel = "stylesheet";
        l.type = "text/css";
        for ( i in attrs ) {
            l.setAttribute( i, attrs[i]);
        }
        if(this.fScript===null) this.init();
        this.fScript.parentNode.insertBefore(l,this.fScript);
        if(cb) window.setTimeout(cb, 0);
    },
    init : function() {
        this.fScript = document.getElementsByTagName( "script" )[ 0 ];
    }
}; 
```

**用法**

```
CFLoad.js("http://code.jquery.com/jquery-1.8.3.js", function (script_tag, failed) {
    if(!failed) {
        CFLoad.js("http://code.jquery.com/ui/1.9.2/jquery-ui.js", function(s, f) {
            if(!f) {
                alert("Loaded");
                js13 = jQuery.noConflict(true);
                main();
            }
        })
    }
}); 
```

# python - Linux 上的 Python SQLAlchemy 内存泄漏

> ID：14800018
> 
> 赞同：3
> 
> 时间：2013-02-10T16:44:57.077
> 
> 标签：python, sqlalchemy, psycopg2

我编写了一个遍历大型数据库表的脚本。（~150K 行。）为了避免使用太多内存，我使用了这个[windowed_query 方法](http://www.sqlalchemy.org/trac/wiki/UsageRecipes/WindowedRangeQuery)。我的脚本是这样的：

```
query = db.query(Table)

count = 0
for row in windowed_query(query, Table.id, 1000):

    points = 0

    # +100 points for a logo
    if row.logo_id:
        points += 100

    # +10 points for each image
    points += 10 * len(row.images) #images is a SQLAlchemy one-to-many relationship

    #...The script continues with much of the same...

    row.points = points
    db.add(row)

    count += 1
    if count % 100 == 0:
        db.commit()
        print count

request.db.commit() 
```

当试图在 CentOS 服务器上运行它时，它会在被内核杀死之前通过 9000 行，**因为它正在使用 ~2GB 的内存**。

在我的 Mac 开发环境中，它就像一个魅力，即使它运行在完全相同版本的 Python (2.7.3)、SQLAlchemy (0.7.8) 和 psycopg2 (2.4.5) 上。

使用 memory_profiler 进行一些简单的调试：在 Linux 上，每条查询数据库的代码都会少量增加内存，而且增长从未停止。在 Mac 上，也发生了同样的事情，但在增长了 ~4MB 之后，它趋于平稳。就好像在 Linux 上没有任何东西被垃圾收集一样。（我什至尝试每 100 行运行一次 gc.collect()。什么也没做。）

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-24T15:01:59.627

事实证明 Pyramid 的调试工具栏已启用，这就是高内存使用的原因。我禁用了它，脚本就像一个魅力。

# r - 带有插入符号的多个模型的预测统计

> ID：14800021
> 
> 赞同：0
> 
> 时间：2013-02-10T09:42:49.807
> 
> 标签：r, roc, r-caret

我正在尝试使用包[caret](http://caret.r-forge.r-project.org/)获取各种训练模型的预测统计信息。下面是一个说明我需要的例子：

```
library(caret)

# Training:
# ... Get X and Y for training a binary classification problem. 
# ... X is input (2000, 5) Y is output (2000,1) ... 

tmp <- createDataPartition(Y, p = 3/4, times = 3, list = TRUE, groups = min(5, length(Y)))

myCtrl <- trainControl(method = "boot", index = tmp, timingSamps = 2, classProbs = TRUE, summaryFunction = twoClassSummary)

RFmodel <- train(X,Y,method='rf',trControl=myCtrl,tuneLength=1, metric="ROC")
SVMmodel <- train(X,Y,method='svmRadial',trControl=myCtrl,tuneLength=3, metric="ROC")
KNNmodel <- train(X,Y,method='knn',trControl=myCtrl,tuneLength=10, metric="ROC")
NNmodel <- train(X,Y,method='nnet',trControl=myCtrl,tuneLength=3, trace = FALSE, metric="ROC")

# resamps reports ROC, Sens, Spec for all models
resamps <- resamples(list(RF = RFmodel, KNN = KNNmodel, NN = NNmodel, SVM = SVMmodel))

# Prediction:
# ... Collect X_pred (7000, 5) and Y_pred  (7000,1) ... 
testPred <- predict(list(RF = RFmodel, KNN = KNNmodel, NN = NNmodel, SVM = SVMmodel), Xtst, type="prob") 
```

如何从 X_kand Y_`pred`为我的 4 个模型获取预测统计信息（ROC 等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T12:14:46.933

```
#Make a list of all the models
all.models <- list(model1, model2, model3, model4, model5, model6)
names(all.models) <- sapply(all.models, function(x) x$method)
sort(sapply(all.models, function(x) min(x$results$RMSE))) 
```

如果我没记错的话，上面的代码不是我的。

```
# Table

# CORRELATIONS 
correlations = c(
cor(predict(model1,newdata=TD),Y),
cor(predict(model2,newdata=TD),Y),
cor(predict(model3,newdata=TD),Y),
cor(predict(model4,newdata=TD),Y),
cor(predict(model5,newdata=TD),Y),

RMSE = as.numeric(sapply(all.models, function(x) min(x$results$RMSE)))

names=c('General Linear Model','Random Forests','Artificial Neural Networks','Logistic/multinomial regression','K nearest neighbors', 'Support Vector Machines')

matrix(c(names,correlations,RMSE),ncol=3) 
```

希望这可以帮助。我知道这不是 ROC，但这些是预测的一些统计数据。

# java - 如何放置一个ignoreCase

> ID：14800023
> 
> 赞同：1
> 
> 时间：2013-02-10T16:45:31.663
> 
> 标签：java

我想忽略大写/小写、标点符号和空格。这是我要调用它的代码：

```
public static boolean isPal(String s)
{
    if(s.length() == 0 || s.length() == 1)
        return true;
    if(s.charAt(0) == s.charAt(s.length()-1))
        return isPal(s.substring(1, s.length()-1));
    return false;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T16:48:58.827

您可以尝试添加以下行：

```
s = s.toLowerCase().replaceAll("[\\p{Punct}\\s]", ""); 
```

在方法的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T16:48:25.900

最简单的方法是将字符串转换为小写或大写并进行所有比较，例如

```
public static boolean isPal(String s)
    {

        s = s.toLowerCase().replaceAll("[^a-z]", "");

        // Or if you want to allow digits
        //s = s.toLowerCase().replaceAll("[^\\w]", "");

        // Do all your comparisons
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T16:55:37.750

您可以将字符串转换为任何一种情况并将其用于处理 -

```
public static boolean isPal(String s) {
    s = s.toLowerCase(); // or  s.toUpperCase()

    if(s.length() == 0 || s.length() == 1)
        return true;
    if(s.charAt(0) == s.charAt(s.length()-1))
        return isPal(s.substring(1, s.length()-1));
    return false;
} 
```

并且忽略标点符号的使用可以使用下面给出的正则表达式。添加更多您需要忽略的字符并使用反斜杠对其进行转义`\`

```
[?:\\/\.] 
```

将其添加到`replaceAll()` 方法中以替换为空。

# ios - 同时为两个 UIView 设置动画（粘在一起）

> ID：14800024
> 
> 赞同：0
> 
> 时间：2013-02-10T16:45:43.737
> 
> 标签：ios, objective-c, cocoa-touch, animation, uiview

我在这里搜索了很多，但似乎找不到我的问题的答案......

我有一个叫 SubView 的类，这个类有一个简单的能力，它可以显示或消失动画

它是这样的：

```
-(void)showAnimated:(BOOL)animated {

self.active = YES;

//Make topmost
[self.parentView bringSubviewToFront:self];

if (animated) {

    [UIView animateWithDuration:0.5
                          delay:0.0f
                        options:UIViewAnimationCurveEaseInOut | UIViewAnimationOptionBeginFromCurrentState
                     animations:^{
                         self.frame = self.originalFrame;
                         if (self.panningBlock) {
                             self.panningBlock(self.contentView.frame);
                         }
                     }
                     completion:^(BOOL finished){
                     }];

}

else {
    self.frame = self.originalFrame;
    if (self.panningBlock) {
        self.panningBlock(self.contentView.frame);
    }
} 
```

self.originalFrame 存储了 View 位置的原始值，如果真的相似，则隐藏部分

```
-(void)hideAnimated:(BOOL)animated {

self.active = NO;

//Store the frame
CGRect _frame = self.frame;

//Set the view starting point
switch (self.showingLocation) {
    case SubViewShowingLocationRight:
        _frame.origin = CGPointMake(_frame.size.width, _frame.origin.y);
        break;
    case SubViewShowingLocationBottom:
        _frame.origin = CGPointMake(_frame.origin.x, _frame.size.height);
        break;
    case SubViewShowingLocationLeft:
        _frame.origin = CGPointMake(-_frame.size.width, _frame.origin.y);
        break;

    default:
        break;
}

if (animated) {
    [UIView animateWithDuration:0.5
                          delay:0.0f
                        options:UIViewAnimationCurveEaseInOut | UIViewAnimationOptionBeginFromCurrentState
                     animations:^{
                         self.frame = _frame;
                         if (self.panningBlock) {
                             self.panningBlock(self.contentView.frame);
                         }
                     }
                     completion:^(BOOL finished){
                     }];

}
else {
    self.frame = _frame;
    if (self.panningBlock) {
        self.panningBlock(self.frame);
    }
}

[self.delegate didDismissSubView:self]; 
```

}

//// 所以动画发生在self.frame = _frame和self.frame = self.originalFrame

我也有self.panningBlock，这是父视图可以提供的块（它可以工作，所以它可以调整自己以适应子视图的帧变化。即子视图有一个选择器，它从底部出现，我需要调整表格视图，使其不会被选择器遮挡）

我所做的一个例子是

```
__weak MapViewController * weakSelf = self;
[weakSelf.placesView setPanningBlock:^(CGRect _frame){

    if (weakSelf.placesView.isActive) {
        CGRect mapFrame = weakSelf.mapView.frame;
        mapFrame.origin.x = _frame.origin.x + _frame.size.width;
        weakSelf.mapView.frame = mapFrame;
    }
    else {
        CGRect mapFrame = weakSelf.mapView.frame;
        mapFrame.origin.x = 0;
        weakSelf.mapView.frame = mapFrame;
    }
}]; 
```

如果子视图看起来像动画一样推送，则父视图向右移动

这就是需要理解的所有代码（这是我的第一个问题，所以请原谅这里的任何漫无边际）

关键是动画不会同时发生，发生的情况是进入的视图比它们不粘在一起的父视图慢一点，我真的不知道该怎么办...

顺便说一句：动画第一次出现时它们确实粘在一起，但之后就没有了……

有什么建议么？

**编辑** 我现在给出一些图像来解释发生了什么

![截图 1](../Images/8f17f01bf72f96447e84e4c3d0a14a90.png) ![截图 2](../Images/83bb68e7125f019892c985c4b6e29a4b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:00:16.133

我把这个作为答案实际上没有达到......

这里的问题是......视图的总大小......

MAPVIEW 的大小为 100%，而 tableview 的大小为 80%……我把它们放在同一个动画上……所以它们会以不同的方式移动，因为它们必须为整个动作覆盖 1.0 秒左右的动画……

这个问题是通过做一个显式动画来解决的......那里有一些库......我使用了一个破坏了我的项目的库......所以我最终放弃了它......并采取了更多......补丁解决方案。 ..设置背景颜色，使其掩盖运动...

这个问题的解决方案是使用显式动画并且对于每一帧......将两个视图移动到同一点......

我希望这个“解决方案”对社区有所帮助..

# objective-c - UIScrollview scrollViewShouldScrollToTop - 减慢滚动速度

> ID：14800025
> 
> 赞同：1
> 
> 时间：2013-02-10T16:45:45.060
> 
> 标签：objective-c, cocoa-touch, uiscrollview

当状态栏被触摸时，默认情况下， UIScrollview 会滚动到顶部。有谁知道我如何控制自动向上滚动的速度。我想放慢滚动速度，使其更加平滑和渐进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:53:33.273

尝试在 UISCrollView 上设置 decelerationRate 属性。

# windows-phone-7 - 如何在 xaml 文件中使用动态变量？

> ID：14800031
> 
> 赞同：0
> 
> 时间：2013-02-10T16:46:16.073
> 
> 标签：windows-phone-7

我的 Windows Phone 7 应用程序的 xaml 文件中的绑定存在一些问题，我不确定问题出在哪里。我从一个应该通过文本参数的按钮开始：

```
<Button Content="More Info" Height="60" HorizontalAlignment="Center" Name="top40button" VerticalAlignment="Top" Width="216" FontSize="11" Click="top40button_click" /> 
```

这是单击按钮的方法：

```
 private void top40button_click(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/views/songpage.xaml?songname=test", UriKind.Relative));
    } 
```

然后我在 songpage.xaml 文件的 cs 文件中有这个：

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);
        string songname = NavigationContext.QueryString["songname"];
    } 
```

而且我不确定如何在此处继续，我尝试将其绑定到页面标题中，但没有奏效，我如何将变量（此时测试）实际获取到我的 xaml 文件中？

```
<TextBlock x:Name="PageTitle" Text="{Binding songname}" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:24:03.563

如果你想绑定它，你的变量 songname 应该在 ViewModel 中。它应该是该 ViewModel 的属性。

在您的代码中，现在最好的办法是直接设置标题：

```
PageTitle.Text = songname; 
```

# emacs - ido-completing-read - 如何将 Cj 绑定到另一个动作？

> ID：14800033
> 
> 赞同：2
> 
> 时间：2013-02-10T16:46:21.757
> 
> 标签：emacs, elisp, ido

我正在使用 ido-completing-read 从数据库中选择歌曲。

```
(song (ido-completing-read "Play: " db)) 
```

如何使用`C-j`此处的键以不同的方式选择歌曲。我只需要知道是否通过按`RET`或选择了歌曲`C-j`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:56:55.533

如果我正确理解了这个问题，您可以`last-command-event`在致电后立即检查`ido-completing-read`：它将是`10`( `?\n`) for `C-j`，`13`( `?\r`) for `RET`。

# android - 在图像移动/调整大小/旋转操作中在图像周围放置一些指示符

> ID：14800037
> 
> 赞同：29
> 
> 时间：2013-02-10T16:46:50.163
> 
> 标签：android, android-image, image-editing

我想缩放、移动、调整图像大小。我想用指示器包围图像，指导用户这些指示器执行什么操作，即移动、旋转、缩放。

![在此处输入图像描述](../Images/6900ccbc2b259d3c2620bbc0704d77ff.png)

我试过了

*   缩放 - 但它只会减少。没有机会增加图像的长度和高度。
*   旋转 - 实现但通过插入手动度数。这不是一个好的选择。
*   移动 - 因为我正在实现 Api < 11 的阻力。所以有点困难。在这里仍然没有希望。

是否有任何库可以让我进行简单的图像编辑[移动、缩放、旋转]？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T16:57:26.670

您可以使用矩阵变换来实现旋转、缩放和移动....希望对您有所帮助....

用于旋转

```
Matrix matrix = new Matrix();
    matrix.postRotate(90); 
```

用于缩放

```
 matrix.postScale(scaleWidth, scaleHeight); 
```

在不更改原始位图的情况下创建新位图...像这样

```
Bitmap bmp2 = Bitmap.createBitmap(bmp1, 0, 0, pow2, pow2, matrix, true); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T09:18:13.533

只需查看此图像裁剪参考：

[http://www.londatiga.net/featured-articles/how-to-select-and-crop-image-on-android/](http://www.londatiga.net/featured-articles/how-to-select-and-crop-image-on-android/)

图像旋转，参考这个例子即可；此示例代码动态表示图像的旋转：

[http://android-er.blogspot.in/2010/07/rotate-bitmap-image-using-matrix.html](http://android-er.blogspot.in/2010/07/rotate-bitmap-image-using-matrix.html)

此链接对于图像裁剪、旋转和缩放也很有用：

[https://github.com/Yalantis/uCrop](https://github.com/Yalantis/uCrop)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-19T14:41:29.137

**使用库：[StickerView](https://github.com/nimengbo/StickerView)**

它是一个第 3 方图书馆，它提供了我正在寻找的东西。

**解决方法：**

这些答案仍然是我在 OP 中要求的一半。表示它没有被某些特定指标包围。我仍在寻找如何`ImageView`用指标包装并将它们用于翻译和调整大小。

`Activity`初始化对翻译和调整大小很重要的变量`ImageView`

```
public static final int DRAG = 1;
public static final int NONE = 0;
private static final String TAG = "Touch";
public static final int ZOOM = 2;
public static PointF mid = new PointF();
public static int mode = 0;
float d = 0.0F;
Matrix savedMatrix = new Matrix();
Matrix matrix = new Matrix();
PointF start = new PointF(); 
```

* * *

设置`ImageView`为 scaleType -`Matrix`

```
iv = new ImageView(this);
iv.setPadding(10, 10, 25, 25);
iv.setScaleType(ImageView.ScaleType.MATRIX);

iv.setOnTouchListener(t); 
```

* * *

添加使用的 onTouch 监听`ImageView`器

*   1 指翻译 - 拖动
*   2 指缩放 - 调整大小 {Pinch To Zoom}

    ```
    View.OnTouchListener t = new View.OnTouchListener()
    {
    public boolean onTouch(View paramView, MotionEvent event)
    {
      ImageView view = (ImageView)paramView;
      switch (event.getAction() & MotionEvent.ACTION_MASK)
      {
      case MotionEvent.ACTION_DOWN:

          savedMatrix.set(matrix);
          start.set(event.getX(), event.getY());
          Log.d(TAG, "mode=DRAG" );
          mode = DRAG;
          break;
      case MotionEvent.ACTION_POINTER_DOWN:

          oldDist = spacing(event);
          Log.d(TAG, "oldDist=" + oldDist);
          if (oldDist > 10f) {

              savedMatrix.set(matrix);
              midPoint(mid, event);
              mode = ZOOM;
              Log.d(TAG, "mode=ZOOM" );
          }
          break;

      case MotionEvent.ACTION_MOVE:

          if (mode == DRAG) {

              matrix.set(savedMatrix);
              matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
          }
          else if (mode == ZOOM) {

              float newDist = spacing(event);
              Log.d(TAG, "newDist=" + newDist);
              if (newDist > 10f) {

                  matrix.set(savedMatrix);
                  float scale = newDist / oldDist;
                  matrix.postScale(scale, scale, mid.x, mid.y);
              }
          }
          break;

      case MotionEvent.ACTION_UP:
      case MotionEvent.ACTION_POINTER_UP:

          mode = NONE;
          Log.d(TAG, "mode=NONE" );
          break;
      }  
      view.setImageMatrix(matrix);
      return true;

    }

     private void midPoint(PointF point, MotionEvent event) {

        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }

          private float spacing(MotionEvent event) {
          float x = event.getX(0) - event.getX(1);
          float y = event.getY(0) - event.getY(1);
          return FloatMath.sqrt(x * x + y * y);
          }
         }; 
    ```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-19T01:00:05.690

我最近尝试了同样的事情，但最终使用了一个库，因为它涵盖了更多的边缘情况。这是一个很棒且使用非常广泛的库：

[http://code.google.com/p/android-multitouch-controller/](http://code.google.com/p/android-multitouch-controller/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-18T08:14:10.127

我想我可以在轮换部分为您提供帮助。我最近制作了一个 android 轮菜单库。它跟踪用户的手部动作并相应地旋转图像视图。你可以查看源代码，看看我是怎么做到的：

[https://github.com/anupcowkur/Android-Wheel-Menu](https://github.com/anupcowkur/Android-Wheel-Menu)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-20T07:57:50.167

我知道这不是一个答案，但值得一提。

看看[这个项目](http://www.mediafire.com/download.php?zfd35b5xcsb27g2)。我打算把它放在 GitHub 上，但它还没有完成（根本）。

有一个按钮可以旋转图像。我仍在努力“保存”。[由于Lorenzo Villani 的项目](https://github.com/lvillani/android-cropimage)，许多类都取自 Android 源代码

添加到项目的清单中：

```
 <activity
        android:name="mobi.sherif.camera.CropImage"
        android:hardwareAccelerated="false"
        android:screenOrientation="portrait" > 
```

使用以下方式调用活动：

```
Intent intent = new Intent(mContext, CropImage.class);
intent.setData(uri);
startActivityForResult(intent, S.request.cropimage); 
```

![在此处输入图像描述](../Images/8ede5356e177338e6ac7a00d5cb831a8.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-19T08:30:20.073

**位图旋转**

```
Bitmap targetBitmap = Bitmap.createBitmap(targetWidth, targetHeight, config);
Canvas canvas = new Canvas(targetBitmap);
Matrix matrix = new Matrix();
matrix.setRotate(mRotation,source.getWidth()/2,source.getHeight()/2);
canvas.drawBitmap(source, matrix, new Paint()); 
```

**图像缩放** [缩放](https://stackoverflow.com/questions/3930421/moving-an-image-from-one-point-to-another-in-android-on-canvas)

```
AssetManager assetManager = context.getAssets();
InputStream imageIn;
String imgPath = "test.png";
Bitmap image;
try {
    imageIn = assetManager.open(imgPath, AssetManager.ACCESS_BUFFER);
    image = BitmapFactory.decodeStream(imageIn);
} catch (IOException e) {

}
//TODO: calculate width and height to fill or fit screen
image = Bitmap.createScaledBitmap(image, width, height, true); 
```

**[带有触摸事件的画布中的](https://stackoverflow.com/questions/5743328/image-in-canvas-with-touch-events/5747233#5747233)**图像移动图像****

 **```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.drawable.BitmapDrawable;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.View;

public class ImgView extends View {

private static final int INVALID_POINTER_ID = -1;

    private Drawable mImage;
    private float mPosX;
    private float mPosY;

    private float mLastTouchX;
    private float mLastTouchY;
    private int mActivePointerId = INVALID_POINTER_ID;

    private ScaleGestureDetector mScaleDetector;
    private float mScaleFactor = 1.f;

    public ImgView(Context context) {
        this(context, null, 0);
    mImage = getResources().getDrawable(R.drawable.imagename);

        mImage.setBounds(0, 0, mImage.getIntrinsicWidth(), mImage.getIntrinsicHeight());
    }

    public ImgView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public ImgView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        // Let the ScaleGestureDetector inspect all events.
        mScaleDetector.onTouchEvent(ev);

        final int action = ev.getAction();
        switch (action & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN: {
            final float x = ev.getX();
            final float y = ev.getY();

            mLastTouchX = x;
            mLastTouchY = y;
            mActivePointerId = ev.getPointerId(0);
            break;
        }

        case MotionEvent.ACTION_MOVE: {
            final int pointerIndex = ev.findPointerIndex(mActivePointerId);
            final float x = ev.getX(pointerIndex);
            final float y = ev.getY(pointerIndex);

            // Only move if the ScaleGestureDetector isn't processing a gesture.
            if (!mScaleDetector.isInProgress()) {
                final float dx = x - mLastTouchX;
                final float dy = y - mLastTouchY;

                mPosX += dx;
                mPosY += dy;

                invalidate();
            }

            mLastTouchX = x;
            mLastTouchY = y;

            break;
        }

        case MotionEvent.ACTION_UP: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }

        case MotionEvent.ACTION_CANCEL: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }

        case MotionEvent.ACTION_POINTER_UP: {
            final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) 
                    >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
            final int pointerId = ev.getPointerId(pointerIndex);
            if (pointerId == mActivePointerId) {
                // This was our active pointer going up. Choose a new
                // active pointer and adjust accordingly.
                final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
                mLastTouchX = ev.getX(newPointerIndex);
                mLastTouchY = ev.getY(newPointerIndex);
                mActivePointerId = ev.getPointerId(newPointerIndex);
            }
            break;
        }
        }

        return true;
    }

    @Override
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        canvas.save();
        Log.d("DEBUG", "X: "+mPosX+" Y: "+mPosY);
        canvas.translate(mPosX, mPosY);
        canvas.scale(mScaleFactor, mScaleFactor);
        mImage.draw(canvas);
        canvas.restore();
    }

    private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            mScaleFactor *= detector.getScaleFactor();

            // Don't let the object get too small or too large.
            mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 10.0f));

            invalidate();
            return true;
        }
    }

} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-08T11:00:55.637

您可以[https://github.com/siddhpuraamitr/MultitouchWithDynamicAddandRemove](https://github.com/siddhpuraamitr/MultitouchWithDynamicAddandRemove)在您的项目中尝试此代码**

# android - 来自 Android 应用程序的 Strace 命令写入空文件

> ID：14800043
> 
> 赞同：0
> 
> 时间：2013-02-10T16:47:25.383
> 
> 标签：android, shell, strace

我正在尝试从 android 应用程序执行 PID 的 strace 命令。代码段如下：

```
Runtime.getRuntime().exec("strace -p 20436 -o /mnt/sdcard/sampleTrace11.txt"); 
```

文件*sampleTrace11.txt*已创建但为空。当我从 shell 命令提示符执行相同的命令时，文件会写入数据。谁能帮帮我吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:46:32.063

我希望它与权限相关。一个好方法是使用`run-as`from `adb shell`。例如，假设您的应用程序是`com.srooth.fancyapp`，请执行以下操作：

`adb shell run-as com.srooth.fancyapp strace -p 20436 -o /mnt/sdcard/sampleTrace11.txt`

如果这不起作用，您知道这与 的权限有关`com.srooth.fancyapp`，并且您可以期望在从 Java 中运行时获得相同的结果。

一些可能的权限问题：

*   您的应用无权写入 SD 卡。此功能将由以您的用户身份运行的所有其他应用程序继承，因此确保您`AndroidManifest.xml`指定权限很重要：

    `<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`

*   如果有问题的进程不是您的应用程序的一部分，它将以不同的用户身份运行。因此，您的应用程序将无权检查它。对此您无能为力，除了使用有根电话并添加`su -c`到命令行之前。

其他几个想法：

*   如果可以，请尝试启动该进程而不是附加到它。这应该没有任何区别，但可以帮助您调试问题。
*   `Runtime.getRuntime().exec()`尝试使用`ProcessBuilder`类，而不是 using 。这将使您能够做各种有用的事情：

    *   等到该过程完成
    *   看看它的标准输出
    *   看看它的标准误
    *   获取它的返回码。

# r - 如何在 R 中检索向量的键？

> ID：14800046
> 
> 赞同：2
> 
> 时间：2013-02-10T16:47:49.963
> 
> 标签：r, quantmod

我试图在标准普尔 500 指数中找到收益率超过 x% 的月份。以下代码查找此类实例：

```
getSymbols('^GSPC', from='2010-01-01')
G <- monthlyReturn(Cl(GSPC))
names(G) <- 'RET.M'
G[G$RET.M>.05] 
```

现在，我想知道这种情况的年回报率是多少？我知道我可以按如下方式计算年度回报：

```
G$RET.Y <- yearlyReturn(Cl(GSPC)) 
```

但现在，我想查询 G$RET.Y 以获得收益率为 5% 或更多的月份的年回报率。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:07:51.703

您可以合并它们，使用with*向后*填充，然后正常子集`na.locf``fromLast=TRUE`

```
G$RET.Y <- yearlyReturn(Cl(GSPC))
G$RET.Y <- na.locf(G$RET.Y, fromLast=TRUE)
G$RET.Y[G$RET.M > 0.05]
#                   RET.Y
#2010-03-31  0.1100186233
#2010-07-30  0.1100186233
#2010-09-30  0.1100186233
#2010-12-31  0.1100186233
#2011-10-31 -0.0000318056
#2013-01-31  0.0643252302 
```

或者，您可以将索引格式化为年份的字符表示形式`format(index(G[G$RET.M > 0.05]), "%Y")`-- 然后只需将年度数据作为子集

```
do.call(rbind, lapply(format(index(G[G$RET.M > 0.05]), "%Y"), function(x) {
  yearlyReturn(Cl(GSPC))[x]
}))
#           yearly.returns
#2010-12-31   0.1100186233
#2010-12-31   0.1100186233
#2010-12-31   0.1100186233
#2010-12-31   0.1100186233
#2011-12-30  -0.0000318056
#2013-02-08   0.0643252302 
```

# java - Java 剪贴板：在 Linux 上从 Firefox 粘贴 HTML

> ID：14800053
> 
> 赞同：14
> 
> 时间：2013-02-10T16:48:35.770
> 
> 标签：java, html, linux, firefox, clipboard

在将 HTML 从 Firefox 粘贴到 Linux 上的 Java6 应用程序（仅限！）时，我遇到了一个奇怪的问题。这是一个最小的例子：

```
import java.awt.Toolkit;
import java.awt.datatransfer.Clipboard;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.io.Reader;
import java.nio.ByteBuffer;

class ClipboardPrinter {
    public static void main( String args[] ) throws Exception
    {
        Clipboard systemClipboard = Toolkit.getDefaultToolkit()
                .getSystemClipboard();
        Transferable transferData = systemClipboard.getContents(null);
        if (transferData == null) {
            System.out.println("no content");
            return;
        }

//      final DataFlavor htmlFlavorString = new DataFlavor("text/html;class=java.lang.String");
//      String html = (String)transferData.getTransferData(htmlFlavorString);
//      System.out.println("html = '" + html + "'");

        final DataFlavor htmlFlavor = new DataFlavor("text/html;class=java.nio.ByteBuffer;charset=US-ASCII");
        if (!transferData.isDataFlavorSupported(htmlFlavor)) {
            System.out.println("no text/html reader content");
            return;
        }

        ByteBuffer bb = (ByteBuffer)transferData.getTransferData(htmlFlavor);
        byte[] bytes = bb.array();
        for (byte b: bytes)
        {
            System.out.format("%02x", b);
        }
        System.out.println();
        final int cutoff = 2;
        byte[] bytes2 = new byte[bytes.length - cutoff];
        for (int i = cutoff; i < bytes.length; i++)
            bytes2[i-cutoff] = bytes[i];
        final String htmlContent = new String(bytes2, "UTF-16LE");

        System.out.println("htmlContent = '" + htmlContent + "'");
    }
} 
```

首先我尝试使用`new DataFlavor("text/html;class=java.lang.String")`, （代码在上面的代码片段中注释掉），但这会导致一个不可用的字符串，其中包含 2 个字符，开头的值为 65533（并且它无助于切断这两个字符）。

接下来我使用了 ByteBuffer 数据风格`charset=US-ASCII`（我故意使用 ASCII！）：（`charset=UTF-16LE`或 UTF-16 或 UTF-16BE）根本不起作用。使用上述`charset=US-ASCII`解决方案（连同`new String(bytes2, "UTF-16LE")`），7 位字符可以工作（但例如变音符号不起作用，而是打印一个“？”）。

我切断了两个字节，因为开头似乎有两个 bom（不确定，可能是别的）？

我得到了一个类似的结果，数据风格为`charset=UTF-8`and cutoff=6（两个三字节的“替换字符” 0xEFBFBD 在开头，变音符号编码为两个错误的字符）。在这两种情况下，我都使用了`new String(bytes2, "UTF-16LE")`.

**您对如何：**

*   在此解决方案中支持非 ASCII 字符（或找到更好的解决方案）？
*   确定是 UTF-16LE 还是 UTF-16BE？

**谢谢！任何提示表示赞赏！**

顺便说一句：这是我的（Linux）系统上支持的数据风格（来自`transferable.getTransferDataFlavors()`）：

```
[java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.io.Reader]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.lang.String]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.nio.CharBuffer]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=[C]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.io.InputStream;charset=UTF-16]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.nio.ByteBuffer;charset=UTF-16]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=[B;charset=UTF-16]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.io.InputStream;charset=UTF-8]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.nio.ByteBuffer;charset=UTF-8]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=[B;charset=UTF-8]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.io.InputStream;charset=UTF-16BE]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.nio.ByteBuffer;charset=UTF-16BE]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=[B;charset=UTF-16BE]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.io.InputStream;charset=UTF-16LE]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.nio.ByteBuffer;charset=UTF-16LE]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=[B;charset=UTF-16LE]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.io.InputStream;charset=ISO-8859-1]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.nio.ByteBuffer;charset=ISO-8859-1]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=[B;charset=ISO-8859-1]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.io.InputStream;charset=US-ASCII]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=java.nio.ByteBuffer;charset=US-ASCII]
java.awt.datatransfer.DataFlavor[mimetype=text/html;representationclass=[B;charset=US-ASCII]
java.awt.datatransfer.DataFlavor[mimetype=application/x-java-serialized-object;representationclass=java.lang.String]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.io.Reader]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.lang.String]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.nio.CharBuffer]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=[C]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.io.InputStream;charset=unicode]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.nio.ByteBuffer;charset=UTF-16]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=[B;charset=UTF-16]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.io.InputStream;charset=UTF-8]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.nio.ByteBuffer;charset=UTF-8]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=[B;charset=UTF-8]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.io.InputStream;charset=UTF-16BE]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.nio.ByteBuffer;charset=UTF-16BE]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=[B;charset=UTF-16BE]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.io.InputStream;charset=UTF-16LE]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.nio.ByteBuffer;charset=UTF-16LE]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=[B;charset=UTF-16LE]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.io.InputStream;charset=ISO-8859-1]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.nio.ByteBuffer;charset=ISO-8859-1]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=[B;charset=ISO-8859-1]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.io.InputStream;charset=US-ASCII]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=java.nio.ByteBuffer;charset=US-ASCII]
java.awt.datatransfer.DataFlavor[mimetype=text/plain;representationclass=[B;charset=US-ASCII]
java.awt.datatransfer.DataFlavor[mimetype=text/x-moz-url-priv;representationclass=java.io.InputStream]
java.awt.datatransfer.DataFlavor[mimetype=text/_moz_htmlinfo;representationclass=java.io.InputStream]
java.awt.datatransfer.DataFlavor[mimetype=text/_moz_htmlcontext;representationclass=java.io.InputStream]
java.awt.datatransfer.DataFlavor[mimetype=text/x-moz-url-priv;representationclass=java.nio.ByteBuffer]
java.awt.datatransfer.DataFlavor[mimetype=text/_moz_htmlinfo;representationclass=java.nio.ByteBuffer]
java.awt.datatransfer.DataFlavor[mimetype=text/_moz_htmlcontext;representationclass=java.nio.ByteBuffer]
java.awt.datatransfer.DataFlavor[mimetype=text/x-moz-url-priv;representationclass=[B]
java.awt.datatransfer.DataFlavor[mimetype=text/_moz_htmlinfo;representationclass=[B]
java.awt.datatransfer.DataFlavor[mimetype=text/_moz_htmlcontext;representationclass=[B]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-18T06:49:04.283

我相信这个问题与他有关`read from clipboard as US-ASCII`，然后转换为 unicode 并期望保持德语变音符号完好无损。由于 US-ASCII 是 7 位字符集，因此不包括德语变音符号，并且在将剪贴板读取为 US-ASCII 后已经丢失。

```
public class CharsetDemo {
    public static void main(String[] args) throws Exception {
        byte[] bytes;

        // convert the German umlaut to bytes in US-ASCII charset
        bytes = "ö".getBytes("US-ASCII");
        System.out.println("US-ASCII");
        System.out.println("bytes : " + asHexString(bytes));
        System.out.println("string: " + new String(bytes, "US-ASCII"));
        System.out.println();

        // create a unicode string from the US-ASCII bytes
        String utf8String = new String(bytes, "UTF-8");
        bytes = utf8String.getBytes("UTF-8");
        System.out.println("UTF-8");
        System.out.println("bytes : " + asHexString(bytes));
        System.out.println("string: " + utf8String);
        System.out.println();

        // convert the German umlaut to bytes in ISO-8859-1 charset
        bytes = "ö".getBytes("ISO-8859-1");
        System.out.println("ISO 8859-1");
        System.out.println("bytes : " + asHexString(bytes));
        System.out.println("string: " + new String(bytes, "ISO-8859-1"));
        System.out.println();

        // create a unicode string from the ISO-8859-1 bytes
        utf8String = new String(bytes, "UTF-8");
        bytes = utf8String.getBytes("UTF-8");
        System.out.println("UTF-8");
        System.out.println("bytes : " + asHexString(bytes));
        System.out.println("string: " + utf8String);
        System.out.println();

        // bytes of the "REPLACEMET CHARACTER"
        System.out.println("replacement character bytes: " 
            + asHexString("\uFFFD".getBytes("UTF-8")));

    }

    static String asHexString(byte[] bytes) {
        StringBuilder sb = new StringBuilder();
        for (byte b : bytes) {
            sb.append(String.format("%X ", b));
        }
        return sb.toString();
    }
} 
```

**输出**

```
US-ASCII
bytes : 3F 
string: ?  <--- the question mark represents here the "REPLACEMENT CHARACTER"

UTF-8
bytes : 3F 
string: ?

ISO 8859-1
bytes : F6 
string: ö

UTF-8
bytes : EF BF BD  <-- the "REPLACEMENT CHARACTER", as "F6" is not a valid UTF-8 codepoint
string: �

replacement character bytes: EF BF BD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T02:20:22.577

[不再支持 Java 6。](http://www.oracle.com/technetwork/java/eol-135779.html)所以，问题已经过时了。

# android - 如何使用android HttpRequest在Android onPause中保存状态

> ID：14800054
> 
> 赞同：3
> 
> 时间：2013-02-10T16:48:37.077
> 
> 标签：android, http, android-lifecycle, onpause

我对 Android 生命周期模型的理解是，当`onPause()`被调用时，我应该保存任何需要保存的状态，因为我的应用程序可以在我返回后的任何时候终止。我的目标是姜饼，所以`onStop`可能永远不会被调用。

但是在我的应用程序中，某些状态被保存在远程服务器上。我会定期刷新此状态，但如果调用 onPause 我不确定正确的做法，因为我的理解是一旦 onPause 返回我的应用程序可能会被杀死。由于我必须在另一个线程中运行 android http 请求，这似乎有问题：如果我在 onPause 中启动请求然后返回，那么我的应用程序可能会在保存状态的远程请求完成（甚至启动！）之前被终止。

我在想我应该在睡觉的地方进行某种同步并等待请求工作，但首先我不确定我什至可以在 onPause 中做到这一点，其次，onPause 不应该花费很长时间完成，所以如果有网络延迟，这也可能导致问题。

当需要将状态刷新到远程服务器或通常通过某种需要单独线程的方法时，是否有一些推荐的方法在 onPause 中保存状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:54:54.017

不完全确定你在做什么，但是

您可以将 HttpRequest 放入[Service](http://developer.android.com/reference/android/app/Service.html)中，当您从此处生成 Thread 时，当您的活动点击 onPause 时，它​​不会被杀死。

[然后，您可以使用BroadcastReciever](http://developer.android.com/reference/android/content/BroadcastReceiver.html)回调您的应用程序，如果尚未启动，这将启动您的 Activity。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T16:56:17.687

当状态需要刷新到远程服务器时，推荐在 onPause 中保存状态的方法：

在 OnPause 中启动一个服务（Android 服务）并将您的状态从该服务刷新到服务器，并在完成所需任务后关闭该服务。

# javascript - this.variable = NaN 在 jquery 的 click() 中

> ID：14800056
> 
> 赞同：2
> 
> 时间：2013-02-10T16:48:46.460
> 
> 标签：javascript, jquery

html:

```
<div id="mydiv">lol</div> 
```

javascript:

```
var oWM = new WM();
oWM.Add("mydiv");
oWM.Initialize();

function WM() {
    this.ZIndex = 1000;
    this.Windows = [];
    this.Add = function(id) {
        this.Windows.push(id);
    }
    this.Initialize = function() {
        for (var i = 0; i < this.Windows.length; i++) {
            $("#" + this.Windows[i]).click(function () {
                alert("#"+this.id + ":" + this.ZIndex++);
                $("#" + this.id).css("z-index", this.ZIndex++);
            });
        }
    }
} 
```

当用户单击 div 时，我得到**this.ZIndex**的“Nan” ，因此我的 change-zindex-on-click 功能不起作用。为什么它没有得到认可，我怎样才能让它发挥作用？

我认为它与 jquery 的 $() 函数有关，因为**this.Windows[i]**在该块内也是未定义的。

[http://jsfiddle.net/79sM8/](http://jsfiddle.net/79sM8/)

点击“lol”div，看看会发生什么

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T16:51:30.897

因为在您的点击事件内部，`this`是您点击的元素，而不是 WM 对象。

最简单的解决方法是提前`bind`设置 click 函数的`this`值：

```
$("#" + this.Windows[i]).click(function () {
    alert("#"+this.id + ":" + this.ZIndex++);
    $("#" + this.id).css("z-index", this.ZIndex++);
}.bind(this); 
```

* * *

**编辑**- 结果你想从`id`被点击的元素中读取属性，所以上面的方法在这种情况下可能不起作用，因为你仍然需要`this.id`引用 dom 元素的 id。

绝对要学习如何使用function.bind，但是对于这个问题，下面的解决方案就是你想要的

* * *

当然，这在 IE8 中不起作用（没有 shim），所以如果这是一个问题，您可以`this`提前保存 WM 对象的值并在点击处理程序中使用*它：*

```
this.Initialize = function() {
    var self = this;
    for (var i = 0; i < this.Windows.length; i++) {
        $("#" + this.Windows[i]).click(function () {
            alert("#"+ this.id + ":" + self.ZIndex++);
            $("#" + this.id).css("z-index", self.ZIndex++);
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T16:53:34.253

单击处理程序中的变量“this”的作用域是单击的元素，而不是 WM 对象。您应该在点击处理程序之外缓存 WM 对象。这样您就可以在点击处理程序的范围内使用它。

```
var oWM = new WM();
oWM.Add("mydiv");
oWM.Initialize();

function WM() {
    this.ZIndex = 1000;
    this.Windows = [];
    this.Add = function(id) {
        this.Windows.push(id);
    }
    this.Initialize = function() {
        var that = this;
        for (var i = 0; i < this.Windows.length; i++) {
            $("#" + this.Windows[i]).click(function () {
                alert("#"+this.id + ":" + that.ZIndex++);
                $("#" + this.id).css("z-index", that.ZIndex++);
            });
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T16:52:28.997

jQuery 事件处理程序中的`this`上下文设置为触发事件的 DOM 元素。因此，`this`在您的点击处理程序内部将引用您的`Window`元素之一。

为了解决这个问题，您应该保留一个引用原始`this`范围的局部变量并在处理程序中使用它：

```
this.Initialize = function() {
    var self = this;
    for (var i = 0; i < this.Windows.length; i++) {
        $("#" + this.Windows[i]).click(function () {
            alert("#"+this.id + ":" + self.ZIndex++);
            $(this).css("z-index", self.ZIndex++);
        });
    }
} 
```

或者，您可以使用 强制`this`在事件处理程序上设置正确的上下文[`Function.prototype.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)，尽管该方法是 ECMA-262 中的新方法，并且尚未出现在所有浏览器中。链接的 MDN 页面提供了更多详细信息。

# php - Zend Framework 2 - PHPUnit - 单元测试 - 没有执行的测试加上想法

> ID：14800063
> 
> 赞同：1
> 
> 时间：2013-02-10T16:49:44.583
> 
> 标签：php, phpunit, zend-framework2

首先，我对 Zend 框架非常陌生。实际上在范围内只有大约 1 天。我对 PHPUnit 也很傻。如果没有单元测试，我认为使用 Zend Framework 是不切实际的，我需要在短时间内了解如何使用。如果你能帮我解决这个问题，我将不胜感激。这就是我所做的。

我正在浏览文档，我发现很难理解。我不知道是我自己还是未处理的文档。我觉得有些东西不见了。

我还安装了作曲家。

这是我所做的，我在安装 PEAR 后安装了 PHPUnit。现在，当我把`phpunit`一些放在哪里时，它会给出一个选项列表。所以我认为它做得很好。

我`Zend Skeleton Application`从 GitHub 得到的。熬过去`Zend Framework`了`Composer`。

我浏览了文档。我感觉我的头要炸了！！！我的问题尤其是**单元测试**。问题在于 [http://framework.zend.com/manual/2.1/en/user-guide/unit-testing.html](http://framework.zend.com/manual/2.1/en/user-guide/unit-testing.html)的内容。

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit bootstrap="Bootstrap.php">
    <testsuites>
        <testsuite name="zf2tutorial">
            <directory>./ApplicationTest</directory>
        </testsuite>
    </testsuites>
</phpunit> 
```

该文件位于`zf2-tutorial/module/Application/test`. 我的问题是，不是`Bootstrap.php`驻留的文件`zf2-tutorial/module/Application/test`吗？

文档说要创建一个 Bootstrap.php 但在`{Application Folder}/test`. 当我运行它时`phpunit`，`zf2-tutorial/module/Application/test`它说文件`zf2-tutorial/module/Application/test/Bootstrap.php`无法打开。

然后我`Bootstrap.php`将 XML 更改为`/../../../test/Bootstrap.php`（根据要沿 XML 文件创建的文档的建议），这解决了错误。但测试计数为零：`No tests executed!`

这是测试类：

```
<?php
namespace ApplicationTest\Controller;

use Zend\Test\PHPUnit\Controller\AbstractHttpControllerTestCase;
//use PHPUnit_Framework_TestCase;
//I also tried PHPUnit_Framework_TestCase instead of AbstractHttpControllerTestCase
class IndexControllerTest extends AbstractHttpControllerTestCase
{
    public function setUp()
    {
        $this->setApplicationConfig(
            //include '/path/to/application/config/test/application.config.php'
            include __DIR__ . '/../../../../config/application.config.php'
        );

        parent::setUp();
    }
    /**
     * @test
     */
    public function testIndexActionCanBeAccessed(){
        $this->dispatch('/');
        $this->assertResponseStatusCode(200);
        $this->assertModule('application');
        $this->assertControllerName('application_index');
        $this->assertControllerClass('IndexController');
        $this->assertMatchedRouteName('home');
    }
} 
```

`include '/path/to/application/config/test/application.config.php'`？？？我重命名为`include __DIR__ . '/../../../../config/application.config.php'`.

该文件位于 test 文件夹`zf-tutorial/module/Application/test/ApplicationTest/Controller`中。

归根结底，这`No tests executed!`就是 PHP 单元要说的全部内容。

我做错了什么？我该怎么做才能让它正确。

我还想参加该主题的速成课程（链接到博客或类似的东西），我知道即使是亚马逊也没有 ZF2 的书。如果你能帮我一把，我会很高兴。真的很紧急！

先感谢您！

**Additions::** 我错过了测试文件夹中Bootstrap.php 的制作。

新的XML是这样的

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit bootstrap="Bootstrap.php">
    <testsuites>
        <testsuite name="zf2tutorial">
            <directory>./ApplicationTest</directory>
        </testsuite>
    </testsuites>
</phpunit> 
```

Bootstrap.php 看起来像这样

```
<?php

chdir(dirname(__DIR__));
include __DIR__ . '/../../../init_autoloader.php'; 
```

`init_autoloader.php`修改为找到zendframework库。

但 PHPUnit 仍然说`No tests executed!`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:52:50.070

更改 phpunit.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit bootstrap="Bootstrap.php">
    <testsuites>
        <testsuite name="zf2tutorial">
            <directory>./</directory>
        </testsuite>
    </testsuites>
</phpunit> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T14:48:38.850

[使用用户指南](http://framework.zend.com/manual/2.0/en/user-guide/unit-testing.html)中提供的 Evan Coury 编写的 Bootstrap.php ：

```
<?php
namespace HelloworldTest; //Change this namespace for your test

use Zend\Loader\AutoloaderFactory;
use Zend\Mvc\Service\ServiceManagerConfig;
use Zend\ServiceManager\ServiceManager;
use Zend\Stdlib\ArrayUtils;
use RuntimeException;

error_reporting(E_ALL | E_STRICT);
chdir(__DIR__);

class Bootstrap
{
    protected static $serviceManager;
    protected static $config;
    protected static $bootstrap;

    public static function init()
    {
        // Load the user-defined test configuration file, if it exists; otherwise, load
        if (is_readable(__DIR__ . '/TestConfig.php')) {
            $testConfig = include __DIR__ . '/TestConfig.php';
        } else {
            $testConfig = include __DIR__ . '/TestConfig.php.dist';
        }

        $zf2ModulePaths = array();

        if (isset($testConfig['module_listener_options']['module_paths'])) {
            $modulePaths = $testConfig['module_listener_options']['module_paths'];
            foreach ($modulePaths as $modulePath) {
                if (($path = static::findParentPath($modulePath)) ) {
                    $zf2ModulePaths[] = $path;
                }
            }
        }

        $zf2ModulePaths  = implode(PATH_SEPARATOR, $zf2ModulePaths) . PATH_SEPARATOR;
        $zf2ModulePaths .= getenv('ZF2_MODULES_TEST_PATHS') ?: (defined('ZF2_MODULES_TEST_PATHS') ? ZF2_MODULES_TEST_PATHS : '');

        static::initAutoloader();

        // use ModuleManager to load this module and it's dependencies
        $baseConfig = array(
            'module_listener_options' => array(
                'module_paths' => explode(PATH_SEPARATOR, $zf2ModulePaths),
            ),
        );

        $config = ArrayUtils::merge($baseConfig, $testConfig);

        $serviceManager = new ServiceManager(new ServiceManagerConfig());
        $serviceManager->setService('ApplicationConfig', $config);
        $serviceManager->get('ModuleManager')->loadModules();

        static::$serviceManager = $serviceManager;
        static::$config = $config;
    }

    public static function getServiceManager()
    {
        return static::$serviceManager;
    }

    public static function getConfig()
    {
        return static::$config;
    }

    protected static function initAutoloader()
    {
        $vendorPath = static::findParentPath('vendor');

        if (is_readable($vendorPath . '/autoload.php')) {
            $loader = include $vendorPath . '/autoload.php';
        } else {
            $zf2Path = getenv('ZF2_PATH') ?: (defined('ZF2_PATH') ? ZF2_PATH : (is_dir($vendorPath . '/ZF2/library') ? $vendorPath . '/ZF2/library' : false));

            if (!$zf2Path) {
                throw new RuntimeException('Unable to load ZF2\. Run `php composer.phar install` or define a ZF2_PATH environment variable.');
            }

            include $zf2Path . '/Zend/Loader/AutoloaderFactory.php';

        }

        AutoloaderFactory::factory(array(
            'Zend\Loader\StandardAutoloader' => array(
                'autoregister_zf' => true,
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/' . __NAMESPACE__,
                ),
            ),
        ));
    }

    protected static function findParentPath($path)
    {
        $dir = __DIR__;
        $previousDir = '.';
        while (!is_dir($dir . '/' . $path)) {
            $dir = dirname($dir);
            if ($previousDir === $dir) return false;
            $previousDir = $dir;
        }
        return $dir . '/' . $path;
    }
}

Bootstrap::init(); 
```

请记住，在 Bootstrap.php 上定义的命名空间必须在 phpunit.xml.dist 上提供：

```
<?xml version="1.0" encoding="UTF-8"?>

<phpunit bootstrap="Bootstrap.php">
    <testsuites>
        <testsuite name="zf2tutorial">
        <directory>./HelloworldTest</directory>
        </testsuite>
    </testsuites>
</phpunit> 
```

# c++ - Map.erase() 抛出错误，为什么？

> ID：14800067
> 
> 赞同：0
> 
> 时间：2013-02-10T16:50:09.267
> 
> 标签：c++, caching, map, sfml

我一直在为 SFML2 精灵制作一个简单的精灵缓存。我有一个管理器类，其中包含指向精灵的指针映射。而且我还有一个精灵类，它包含对其所有者地图的引用。现在问题在于精灵的析构函数。它看起来像这样：

```
~ActualSprite()
{
    if(m_iteratorLocation != m_ownerMap.end())
    {
        m_ownerMap.erase(m_iteratorLocation);
    }
} 
```

m_iteratorLocation 应该是精灵地图中精灵的当前位置。它在精灵构造函数中初始化，这是精灵管理器的精灵创建方法

```
SpritePtr getSprite(SpriteId name)
    {
        if(!spriteMap[name])
        {
            spriteMap[name] = std::tr1::make_shared< ActualSprite >(spriteMap, spriteMap.find(name));
            clipSprite(name);
            return spriteMap[name];
        }
        else
            return spriteMap[name];

    } 
```

基本上，当我退出程序时，我会收到一条异常/错误消息，说明：`Expression: map/set iterator outside range`.

起初我认为发生这种情况是因为`spriteMap.find(name)`找不到名称并返回`spriteMap.end()`。但我不明白，不是第一次提到`spriteMap[name]`将`name`密钥添加到地图吗？无论如何，然后我添加了 if 语句，仅在迭代器不等于 .end() 时才删除映射条目，但它仍然会弹出。

基本上现在我使用名称枚举而不是迭代器进行擦除并且它可以工作，但我仍然想知道为什么我会收到错误消息。

这是当前工作版本的完整代码，以及引发错误的注释迭代器版本。

```
#include <SFML/Graphics.hpp>
#include <memory>
#include <map>

enum SpriteId
{
    ITEM1,
    ITEM2,
    ITEM3,
    ITEM4,
    ITEM5
};

const int WIDTH = 100;
const int HEIGHT = 100;

class ActualSprite;

typedef std::tr1::shared_ptr< ActualSprite > SpritePtr;
typedef std::map< SpriteId, SpritePtr > SpriteMap;

class ActualSprite : public sf::Sprite
{
private: 
    //SpriteMap::iterator m_iteratorLocation;
    SpriteMap &m_ownerMap;
    SpriteId &m_name;
public:
    //ActualSprite(SpriteMap &ownerMap, SpriteMap::iterator iteratorLocation) : m_ownerMap(ownerMap), m_iteratorLocation(iteratorLocation)
    //{}

    ActualSprite(SpriteMap &ownerMap, SpriteId &name) : m_ownerMap(ownerMap), m_name(name)
    {}

    ~ActualSprite()
    {
        m_ownerMap.erase(m_name);
    }

    //~ActualSprite()
    //{
    //  if(m_iteratorLocation != m_ownerMap.end())
    //  {
    //      m_ownerMap.erase(m_iteratorLocation);
    //  }
    //}
};

class SpriteManager
{
private:
    SpriteMap spriteMap;
    sf::Texture& m_texture;
    void clipSprite(SpriteId name)
    {
        spriteMap.at(name)->setTexture(m_texture);
        switch(name)
        {
        case ITEM1: spriteMap.at(name)->setTextureRect(sf::IntRect(0,0,WIDTH,HEIGHT));break;
        case ITEM2: spriteMap.at(name)->setTextureRect(sf::IntRect((1*WIDTH),0,WIDTH,HEIGHT));break;
        case ITEM3: spriteMap.at(name)->setTextureRect(sf::IntRect((2*WIDTH),0,WIDTH,HEIGHT));break;
        case ITEM4: spriteMap.at(name)->setTextureRect(sf::IntRect((3*WIDTH),0,WIDTH,HEIGHT));break;
        case ITEM5: spriteMap.at(name)->setTextureRect(sf::IntRect((4*WIDTH),0,WIDTH,HEIGHT));break;
        //default: exception or somethin'
        }
    }
public:
    SpriteManager(sf::Texture& texture) : m_texture(texture)
    {}
    SpritePtr getSprite(SpriteId name)
    {
        if(!spriteMap[name])
        {
            spriteMap[name] = std::tr1::make_shared< ActualSprite >(spriteMap, name);
            /*spriteMap[name] = std::tr1::make_shared< ActualSprite >(spriteMap, spriteMap.find(name));*/
            clipSprite(name);
            return spriteMap[name];
        }
        else
            return spriteMap[name];

    }
};

int main()
{
    sf::RenderWindow window(sf::VideoMode(800,600), "Test", sf::Style::Titlebar | sf::Style::Close);

    sf::RectangleShape background(sf::Vector2f(800.0f,600.0f));

    window.setFramerateLimit(30);

    sf::Texture spriteSheet;

    if(!spriteSheet.loadFromFile("SpriteSheet.png"))
    {
        return 1;
    }

    SpriteManager sprites(spriteSheet);

    SpritePtr sprite = sprites.getSprite(ITEM2);
    SpritePtr sprite2 = sprites.getSprite(ITEM4);

    sprite->setPosition(100,100);
    sprite2->setPosition(200,100);

    while(window.isOpen())
    {
        sf::Event event;
        while( window.pollEvent(event))
        {
            if(sf::Mouse::isButtonPressed(sf::Mouse::Left))
            {
                sf::Vector2i currentPos = sf::Mouse::getPosition(window);
                sprite->setPosition((static_cast<float>(currentPos.x) - (WIDTH/2)), (static_cast<float>(currentPos.y) - (HEIGHT/2)));
            }
            if(event.type == sf::Event::Closed)
            {
                window.close();
            }
        }

        window.clear();
        window.draw(background);
        window.draw(*sprite);
        window.draw(*sprite2);
        window.display();
    }

    return 0;
} 
```

**注意：**这只是一个测试，所以这就是为什么所有内容都在一个 .cpp 文件中以及为什么项目名称不是描述性的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:59:43.337

问题很可能在于嵌入在`SpriteManager`对象中的地图的析构函数遍历其所有元素以删除它们。在删除/销毁存储的共享指针时，如果这些是指向您的对象的最后一个共享指针，则会`Sprite`调用您的析构函数。

反过来，这将尝试使用存储的迭代器从地图中删除相应的元素。但是，此迭代器指向的元素刚刚从映射的析构函数中的循环中删除，因此无效。将迭代器作为参数传递`erase()`最终会导致未定义的行为（在您的情况下幸运地表现为崩溃）。

即使从映射中删除共享指针不会直接导致`Sprite`调用你的析构函数（因为还有其他指向它的共享指针），问题当然也会出现：在这种情况下，事实上，地图中的元素必须*已经*被删除，并且您留下了一个无效的迭代器。当调用 的析构函数时`Sprite`，它会将无效的迭代器传递给`erase()`，再次导致未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:36:11.087

shared_ptr 的映射将在擦除对象时调用对象的析构函数。

在您的情况下，包含对象的析构函数会删除该对象。

这样做你会遇到各种奇怪的问题。使用weak_ptr 也不能解决问题。充其量可能会隐藏它。

此外，此代码不会像您认为的那样做：

```
if(!spriteMap[name])
    { 
```

如果`std::map`对象不存在，则容器会使用该键创建对象。如果您想测试是否存在，您想要使用的是`find`.

碰巧你已经幸运地落在了你所包含的对象的一些好的后果上。shared_ptr 将被初始化为零，并且在使用 bool 运算符时，空 shared_ptr 测试为 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:05:31.197

问题是您的`SpriteMap`, 包含 a是它包含`shared_ptr<Sprite>`的对象的（共享）所有者。`Sprite`因此 a`Sprite`只能在从包含`SpriteMap`. 此时，用于在地图中指向 this 的迭代器`Sprite`已失效。

在您的代码中，当@Andy Prowl 解释`SpriteManager`的最后被销毁时，就会发生这种情况。`main()`如果您`Sprite`在任何其他时间有处理 s 的操作，也会发生同样的情况。

如果您希望`Sprite`生命周期由 管理，则`SpriteManager`不需要`Sprite`析构函数中的自注销代码。如果您希望`Sprite`生命周期仅取决于外部使用情况`SpriteMap`，则可以`SpriteMap`保留`weak_ptr<Sprite>`。在这种情况下，您可以保留该自注销代码 - 或将过期指针留在映射中，直到下一次访问尝试。

# php - 您的 PHP 安装似乎缺少 WordPress 所需的 MySQL 扩展

> ID：14800076
> 
> 赞同：2
> 
> 时间：2013-02-10T16:50:55.393
> 
> 标签：php, iis-7.5

我试图让我的第一个 WordPress 安装在 Windows IIS 7.5 下运行，我遇到了常见的“您的 PHP 安装似乎缺少 WordPress 所需的 MySQL 扩展”。错误。

我使用了 Web Matrix Installer，它安装了：PHP 5.3.19 Wordpress 3.4 MySQL 5.1

我已经毫无问题地运行了 PHPinfo.php 页面，所以我知道 PHP 正在运行。

MySQL 服务正在运行（尽管我不确定如何测试它是否实际工作）。

大概 WordPress 已正确安装，但无法与 mySQL “对话”。我从其他文章中尝试了以下关于此相同错误的内容：

1.  更改了主机文件，因此 IPv6 被注释掉，就像这样，

    127.0.0.1 本地主机

    # ::1 本地主机

之后重新启动IIS。也重启了。

1.  确保我的 php.ini 文件中未注释 extension=php_mysql.dll 和 extension=php_mysqli.dll

2.  授予对整个 WP 目录和 PHP 目录的 IIS_IUSRS 和 NETWORK SERVICE 权限。

3.  确认已经创建了一个指向 PHP 安装目录的环境变量，即 C:\Program Files (x86)\PHP\v5.3\

仅供参考，如果这很重要，我将在 Windows 2008R2 的 Amazon EC2 实例上运行它。

任何帮助将不胜感激 - 这让我有点疯狂，我找不到任何其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T12:12:57.840

此错误的另一个常见原因是扩展目录已注释或未在您的 php.ini 中正确设置（ php.ini-production 带有 2 个设置，均已注释掉）。打开你的 php.ini。并搜索 extension_dir。根据您的操作系统取消注释相应的行（在 Windows 上，ext dir 是“ext”）并重新启动您的 Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-25T11:12:19.040

就我而言，我的 php.ini 中有两个问题。首先，extension_dir 没有设置（当我在 Windows 上运行时，我只需要取消注释默认的 'ext' 行）。其次，未启用 mqsql 的 dll。同样在这里，我只是取消了这两行的注释，并且在重新启动万维网发布服务后它工作了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-09T13:11:29.750

I put PHP in c:\PHP. I have added C:\PHP and C:\PHP\ext into my PATH env variable. Therefore, there is not necessary to copy all dll's from C:\PHP and C:\PHP\ext into C:\windows\system32

# wpf - WPF ListBox 在 PreviewMouseButton 事件后不选择

> ID：14800078
> 
> 赞同：1
> 
> 时间：2013-02-10T16:50:57.827
> 
> 标签：wpf, listbox, selection

我正在使用 PreviewMouseButton 事件来验证是否可以选择项目，因为我希望验证仅在用户手动选择而不是自动选择时发生。

作为验证的一部分，我显示 MessageBox 以确认用户是否真的想要更改选择。一旦用户说“是”，我应该让选择发生，否则，选择不应该发生。

问题是，即使在我选择“是”之后，在 MessageBox 确认中，它也不让我选择项目。

你能告诉我我错过了什么吗？

```
 private void ListBox_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        if(!ParentViewModel.CanChangeList())
        {
            e.Handled = true;
        }
    }

    public bool CanChangeTree()
    {
        if (someCondition)
        {
            MessageBoxResult objResult = MessageBox.Show("Are You sure You want to change?", "Confirmation", MessageBoxButton.YesNo);
            if (objResult == MessageBoxResult.Yes)
            {
                return true;
            }else
            {
                return false;
            }
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:08:50.167

导致此问题的原因是显示消息框（尽管我不确定为什么会这样）。

如果要坚持消息框，则需要在显示消息之前检索正在单击的 ListBoxItem；然后，如果允许，请自行设置所选项目。

# google-app-engine - 谷歌应用引擎负载均衡

> ID：14800079
> 
> 赞同：2
> 
> 时间：2013-02-10T16:51:02.950
> 
> 标签：google-app-engine

我在谷歌应用引擎上有一个付费应用。众所周知，Google 会按您的实例小时数向您收费。

我唯一无法理解的是，导致谷歌加热另一个实例的逻辑是什么，或者他们如何决定如何对这些实例之间的流量进行负载平衡。

正如您从 appengine 实例屏幕的屏幕[截图](http://i.imgur.com/dQREl2Z.png)中看到的那样（抱歉链接，我是 stackoverflow 的新手，并且不允许发布实际图像），以确保我的用户不会长期遭受加载请求，我一直有一个实例驻留。

有趣的是，似乎没有流量到达常驻实例，所有流量实际上都流向了动态实例之一。此外，我们假设根据他们的负载平衡算法，动态实例不堪重负，而不是将流量引导到常驻实例，而是预热另一个似乎也没有获得那么多流量的动态实例。

如果我不为三倍实例时间付费，我不会在意。不幸的是，我需要为这些时间付费 :)

如果有人能就以下内容分享更多信息，我将不胜感激：
1\. GAE 的负载平衡如何工作？
2\. 我能做些什么来更好地分配我的实例上的流量（并以此减少给定时间的动态实例数量）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-17T22:13:19.793

[本文档页面](https://cloud.google.com/appengine/docs/standard/python/how-instances-are-managed#scaling_dynamic_instances)介绍了 App Engine 调度程序的工作原理。[这个其他页面](https://cloud.google.com/appengine/docs/standard/python/console/managing-resources#change_auto_scaling_performance_settings)教导了可以更改哪些参数来控制性能。

但是，我们正在努力改进调度行为。请继续关注[Google Cloud Platform 博客](https://cloudplatform.googleblog.com/)。（我在 App Engine 上工作）

# twitter4j - 是否可以将位置定义为 double[][]

> ID：14800081
> 
> 赞同：0
> 
> 时间：2013-02-10T16:51:17.407
> 
> 标签：twitter4j

我在使用 QueryFilter 类的地方使用 Twitter4j，它说

[http://twitter4j.org/javadoc/twitter4j/FilterQuery.html#locations](http://twitter4j.org/javadoc/twitter4j/FilterQuery.html#locations) private double[][] 位置

我尽了最大努力，但找不到如何将位置定义为双精度的方法，或者我只是不知道如何使用这个位置。

请不要因为这个问题而禁止我。

我已经花了一整天的时间搜索这件事，但找不到答案。

任何帮助，将不胜感激。

再见，

萨拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:25:12.510

好的，我找到了如下答案，

实际上，您必须将边界框 SW 和 NE 定义为如下

双[][] bbox = {{51.282534682474655, 3.153076171875}, {53.8460456413833, 7.327880859375}};

第一对是 SW，第二对是 NE

希望它会有所帮助。

# node.js - 在函数中使用多个回调结果的更优雅的方法？

> ID：14800082
> 
> 赞同：0
> 
> 时间：2013-02-10T16:51:19.527
> 
> 标签：node.js, asynchronous, callback

我对异步编程还有些陌生，我一直想知道是否有更好的方法来完成我正在尝试做的事情。

```
exports.content = function(req, res){
  OPID = req.params.id;

  titles.findOne({postID: OPID}, function (err, post) { //function #1
    if (err) throw(err); 

    readComment(OPID, function(comment){ //function #2

      branchFilter.getBranches(function(branches){ //function #3

        res.render('content', {title: post.title, content: post.body, OPID: post.postID, comments: comment, branches: branches});
      })
    });
  });
}; 
```

在这个例子中，我有三个嵌套函数，它们使用回调从其他模块中检索数据。我需要在 res.render 语句中包含所有这些数据。我想如果我继续使用这种方法，我将需要更多的嵌套函数。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:46:55.783

例如，有一个只获取数据的函数

```
exports.content = function(req, res){
   getData(req, function(err, data) { 
   // trivial error handling
   if (err) {
      console.dir('error getting your data', err);
      return res.redirect('/');
   }
   res.render('content', data)
}

// cb is a callback function
function getData(req, cb) {
  OPID = req.params.id;
  titles.findOne({postID: OPID}, function (err, post) { //function #1
    if (err) { return cb(err); }
    readComment(OPID, function(err, comment){ //function #2 (with error handling)
      if (err) { return cb(err); }
      branchFilter.getBranches(function(err, branches){ //function #3
        if (err) { return cb(err); }
        var output = {
          title: post.title, 
          content: post.body, 
          OPID: post.postID, 
          comments: comment, branches: branches
        }
        return cb(null, output);
      });
    });
  });
} 
```

* * *

看看[http://callbackhell.com/](http://callbackhell.com/)对如何使用回调编写干净的代码提供了一个很好的概述。以下是从该站点复制的

# 命名你的函数

这是一些（混乱的）浏览器 javascript，它使用浏览器请求向服务器发出 AJAX 请求：

```
var form = document.querySelector('form')
form.onsubmit = function(submitEvent) {
  var name = document.querySelector('input').value
  request({
    uri: "http://example.com/upload",
    body: name,
    method: "POST"
  }, function(err, response, body) {
    var statusMessage = document.querySelector('.status')
    if (err) return statusMessage.value = err
    statusMessage.value = body
  })
} 
```

这段代码有两个匿名函数。让我们给他们起个名字吧！

```
var form = document.querySelector('form')
form.onsubmit = function formSubmit(submitEvent) {
  var name = document.querySelector('input').value
  request({
    uri: "http://example.com/upload",
    body: name,
    method: "POST"
  }, function postResponse(err, response, body) {
    var statusMessage = document.querySelector('.status')
    if (err) return statusMessage.value = err
    statusMessage.value = body
  })
} 
```

如您所见，命名函数非常简单，并且可以为您的代码做一些好事：

*   使代码更易于阅读
*   当发生异常时，您将获得引用实际函数名称而不是“匿名”的堆栈跟踪
*   让你的代码保持浅层，或者不深度嵌套，这让我想到了下一点：

# 保持你的代码浅

在最后一个示例的基础上，让我们更进一步，摆脱代码中正在进行的三层嵌套：

```
function formSubmit(submitEvent) {
  var name = document.querySelector('input').value
  request({
    uri: "http://example.com/upload",
    body: name,
    method: "POST"
  }, postResponse)
}

function postResponse(err, response, body) {
  var statusMessage = document.querySelector('.status')
  if (err) return statusMessage.value = err
  statusMessage.value = body
}

document.querySelector('form').onsubmit = formSubmit 
```

像这样的代码看起来不那么可怕，并且以后更容易编辑、重构和破解。

# 模块化！

这是最重要的部分：任何人都可以创建模块（AKA 库）。引用 Isaac Schlueter（node.js 项目的）的话：“编写每个做一件事的小模块，然后将它们组装成做更大事情的其他模块。如果你不去那里，你就不会陷入回调地狱。”

让我们从上面取出样板代码，然后通过将其拆分为几个文件将其转换为一个模块。由于我在浏览器和服务器上都编写了 JavaScript，因此我将展示一种在两者中都有效但仍然很好且简单的方法。

这是一个名为 formuploader.js 的新文件，其中包含我们之前的两个函数：

```
function formSubmit(submitEvent) {
  var name = document.querySelector('input').value
  request({
    uri: "http://example.com/upload",
    body: name,
    method: "POST"
  }, postResponse)
}

function postResponse(err, response, body) {
  var statusMessage = document.querySelector('.status')
  if (err) return statusMessage.value = err
  statusMessage.value = body
}

exports.submit = formSubmit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:03:37.683

正如 JohnnyHK 建议的那样，一个好的异步库将帮助您解决这个问题。我还建议[Caolan 的 async](https://github.com/caolan/async)。`auto`您可以使用和的组合解决几乎任何异步问题`forEach`，尽管如果运行时是一个问题，`async`则可能不是最佳选择。我会重写你的代码如下：

```
exports.content = function(req, res){
  OPID = req.params.id;

  async.auto({
    post: function(next) {
      titles.findOne({postID: OPID}, next);
    },
    comment: function(next) {
      readComment(OPID, function(comment){ next(null, comment); });
    },
    branches: function(next) {
      branchFilter.getBranches(function(branches){ next(null, branches); });
    }
  }, function(err, results) {
    if(err) throw(err);
    res.render('content', {title: results.post.title, content: results.post.body, OPID: results.post.postID, comments: results.comment, branches: results.branches});
  });
}; 
```

所做的是`auto`获取一个函数字典（对字典中的其他函数具有可选的依赖关系 - 有关更多信息，请参见异步自述文件）并将结果作为字典传递给第二个参数，即“最终”函数。

如果任何函数将非空值传递`err`给其回调（第一个参数），它将停止调用其他函数并立即将结果传递`err`给`null`“最终”函数。

请注意我必须如何在`branches`and函数中传递匿名`comment`函数。这是因为`auto`，与此`async`库中的其他函数一样，期望其回调的第一个参数是错误值，第二个参数是结果。

# php - 如果结果存在然后更新并且不插入？

> ID：14800083
> 
> 赞同：-1
> 
> 时间：2013-02-10T16:51:24.853
> 
> 标签：php, mysql

我正在尝试调整此代码，以便如果结果已存在于数据库中，则改为更新它而不是插入？

有人可以告诉我如何做到这一点。我对mysql和php真的很陌生。

```
<?php

    require_once('includes/session.php');
    require_once('includes/functions.php');
    require('includes/_config/connection.php');

    session_start();

        confirm_logged_in();

        if (isset ($_GET['to'])) {
        $user_to_id = $_GET['to'];

    }

    if (!isset($_GET['to']))
        exit('No user specified.');

    $user_id = $_GET['to'];

    $result = mysql_query("SELECT * FROM ptb_likes WHERE liked_id ='".$user_to_id."' ");

    mysql_query("INSERT INTO ptb_likes (user_id, liked_id) VALUES (".$_SESSION['user_id'].", ".$user_to_id.")"); 

    if($result) 
    { 
    mysql_query("UPDATE ptb_likes SET user_id_has_liked='1' WHERE user_id=".$_SESSION['user_id']."") 
    or die(mysql_error());

    mysql_query("UPDATE ptb_likes SET likes='1' WHERE liked_id=\"$profile_id\"") 
    or die(mysql_error());

    header("Location: {$_SERVER['HTTP_REFERER']}");

    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:55:14.773

您应该尝试使用一个 MySQL 语句。

**重复密钥更新**

在这里查看更多信息：http: [//dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# c# - 从配置文件强制应用程序管理

> ID：14800089
> 
> 赞同：3
> 
> 时间：2013-02-10T16:52:27.077
> 
> 标签：c#, elevated-privileges

有没有办法可以在配置文件中添加设置，以便该应用程序始终以管理员身份启动？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T16:53:52.380

不是来自配置文件，而是在 .manifest 中。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
    <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
        <security>
            <requestedPrivileges>
                <requestedExecutionLevel level="requireAdministrator" uiAccess="false"/>
            </requestedPrivileges>
        </security>
    </trustInfo>
</assembly> 
```

[http://blogs.msdn.com/b/nikhiln/archive/2007/04/19/embed-a-manifest-to-make-an-application-elevate-in-vista.aspx](http://blogs.msdn.com/b/nikhiln/archive/2007/04/19/embed-a-manifest-to-make-an-application-elevate-in-vista.aspx)

# jquery - 如何在 jquery 插件中正确实现选项/更新方法？

> ID：14800095
> 
> 赞同：2
> 
> 时间：2013-02-10T16:53:01.820
> 
> 标签：jquery, jquery-plugins, attributes, options

我正在尝试创建一个能够在初始化后更新选项的插件。我从简单的插件开始，这将帮助我理解插件的逻辑。所以这里是：

```
;(function($) {

    var defaults = {
        message: 'This is default message'
    };

    var options = {};

    var methods = {
        init : function( options ) { 
            options = $.extend(defaults, options);

            return this.each(function() {

                $(this).click(function(){
                    alert(options.message);
                });

            });
        },

        option: function( key, value ){
                    if (val) {
                        options[key] = val;
                    } else {
                        return options[key];
                    }
                }
        };  

    $.fn.clickAlert = function( method ) {
        if ( methods[method] ) {
            return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        } else {
            //some error that method doesnt exist
        }    
    };

})(jQuery); 
```

如您所见，此插件仅显示带有定义文本的警报消息。另外，我有带有 2 个链接的 HTML 页面（其中包括 jquery 库和这个插件）：

```
<a href="#" class="show">SHOW ALERT</a>
<a href="#" class="change">CHANGE ALERT MESSAGE</a> 
```

我在与“show”类的链接上创建了一个“clickAlert”插件的实例。当我单击它时，它会按我的预期显示默认消息。但我想（例如）单击带有“更改”类的链接并更新早期创建的实例的“消息”属性。但有些事情是错误的。我在 HTML 页面上的 jquery 代码：

```
<script type="text/javascript">
jQuery(document).ready(function($) {

        $('.show').clickAlert();

        $('.change').click(function(){

            $('.show').clickAlert('option', 'message', 'Updated message');

        });

});
</script> 
```

1) 如何在这个 jquery 插件中正确实现选项/更新方法？
2）我还有一个问题，但它与主要问题无关。例如，我将使用这种模式创建插件。除了 init 和 option 方法外，插件还有 10 个（例如）负责动画的方法。在我的 init 方法中，我需要检查（使用 SWITCH 语句）我应该调用哪个动画方法并调用它。因为我需要多次执行此操作，所以最好创建一个函数以避免代码重复。创建这样的功能的最佳位置在哪里？我应该将它创建为一个新方法（如 init、option 和其他动画方法）还是我可以简单地在 init 的“return this.each()”函数中创建它并在那里调用它几次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:14:47.540

这是一个范围问题，您需要更改选项的范围 - 通常您不会，但在这种情况下您会这样做，因此您更改以修改 中的原始选项`$.extend(`，并给它一个参考：

```
;(function ($) {

    var self = this;
    self.defaults = {
        message: 'This is default message'
    };
    self.options = {};
    var methods = {
        init: function (options) {
            options = $.extend(self.options, self.defaults, options);
            return this.each(function () {
                $(this).click(function () {
                    alert(options.message);
                });
            });
        },
        option: function (key, myvalue) {
            if (myvalue) {
                self.options[key] = myvalue;
            } else {
                return self.options[key];
            }
        }
    };
    $.fn.clickAlert = function (method) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            //some error that method doesnt exist
        }
    };
})(jQuery);
jQuery(document).ready(function ($) {
    $('.show').clickAlert();
    $('.change').click(function () {
        $('.show').clickAlert('option', 'message', 'Updated message');
    });
}); 
```

# c - char *string [] 声明错误

> ID：14800099
> 
> 赞同：5
> 
> 时间：2013-02-10T16:53:21.637
> 
> 标签：c, pointers, char

这个声明有什么问题？

```
char *add_element[] = {"1","S"}; 
```

编译时出现此错误-

```
warning: initialization discards qualifiers from pointer target type 
```

我究竟做错了什么？

这个问题与[为什么我得到不同；用“const char *”类型的表达式初始化“char *”会丢弃限定符吗？](https://stackoverflow.com/questions/13005762/why-i-get-initializing-char-with-an-expression-of-type-const-char-disca). 这可以通过下面写的评论来验证。谢谢你的回答。

可能的重复问题是相关的，但不相同。这是关于为什么 void func(const char *ptr) { char *local = ptr; ... } 引发警告，而不是像这里那样处理初始化程序。我认为这个问题不应该作为该问题的副本而关闭

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T16:54:07.843

您似乎正在使用 GCC 并已`-Write-strings`打开。这使得编译器对这种情况发出警告。它将字符串文字变成`const char`数组而不是`char`数组，从而使您的初始化丢弃`const`. 采用：

```
const char *add_element[] = { "1", "S" }; 
```

或关闭`-Wwrite-strings`。

从 GCC 手册：

> **`-Wwrite-strings`**
> 
> 编译 C 时，给字符串常量指定类型**`const char[length]`**，以便将 1 的地址复制到非`const` **`char *`**指针中会收到警告。这些警告将帮助您在编译时找到可以尝试写入字符串常量的代码，但前提是您必须非常小心地`const`在声明和原型中使用。否则，只会造成麻烦。这就是我们没有**`-Wall`**提出这些警告的原因。
> 
> 编译 C++ 时，警告从字符串文字到**`char *`**. C++ 程序默认启用此警告。

# php - 检查数组是否包含 $_GET['id']

> ID：14800105
> 
> 赞同：0
> 
> 时间：2013-02-10T16:53:56.203
> 
> 标签：php, mysql, arrays, get

所以我正在查询数据库，它会返回一个 id 数组。

```
$val = $db->prepare("SELECT x FROM xx WHERE x_id='$xx'");
$val->execute();
$res = $val->fetchAll(PDO::FETCH_COLUMN, 0); 
```

然后，我将用逗号分隔数组，

```
$x= join('', $res); 
```

并呼应它会返回`1,18,32`。

然后我想检查是否`$_GET['id']`是这些数字之一

```
if($_GET['id] contains one of these){ // so here lies the problem, how do I check that it contains 1/18 or 32?
//continue...
}
else{
echo "You have no right to view this.";
} 
```

但是怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:56:55.393

使用`in_array(val, array)`.

```
if(in_array($_GET['id'], $res)) echo "Welcome";
else echo "You have no business here."; 
```

参考： http: [//php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php)

# php - 在数据库中插入数据时没有结果？

> ID：14800110
> 
> 赞同：0
> 
> 时间：2013-02-10T16:54:31.530
> 
> 标签：php, html, mysqli

我有这个表格：

```
<form action="index.php?type=add_lesson&type=add" method="post">
                <?php echo $lesson_title; ?><br/><input type="text" name="title" style="width:450px;" /><br/>
                <?php echo $lesson_url; ?><br/><input type="text" name="url" style="width:450px;" /><br/>
                <?php echo $keywords; ?><br/><input type="text" name="kewyords" style="width:450px;" />
                    <br/><br/><br/>
                    <input type="submit" value="<?php echo $submit;?>" class="button"  /></form> 
```

这个 index.php 代码：

```
if($_GET['type'] == "add_lesson"){
        include_once(fls."add_lesson.php");
    } 
```

这个 add_lesson.php 代码：

```
if($_GET['type'] == 'add'){
    $title    = htmlspecialchars($_POST['title']);
    $url      = htmlspecialchars($_POST['url']);
    $kewyords = htmlspecialchars($_POST['kewyords']);
        $sql = $mysqli->query("INSERT INTO LESSONS(L_TITLE,L_URL,L_COMMENTS,L_VIEWS,L_KEYWORDS)
                                VALUES('".$title."','".$url."','0','0','".$kewords."') ");
        echo $added_sucessfully;
} 
```

但是当我点击提交时我得到白页
是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:57:31.480

您的代码中有错误： include_once(fls."add_lesson.php"); 可能你提到了 include_once($fls."add_lesson.php");

还要确保您的 php 安装显示 php 错误。可能您有未显示的致命 PHP 错误。

这是确保您看到 php 错误的简单教程： [http ://www.wallpaperama.com/forums/how-to-display-php-errors-in-my-script-code-when-display-errors- is-disabled-t453.html](http://www.wallpaperama.com/forums/how-to-display-php-errors-in-my-script-code-when-display-errors-is-disabled-t453.html)

另一件事..你有

`<form action="index.php?type=add_lesson&type=add" method="post">`

所以你只在 PHP 中得到 type=add :)

# php - 函数名中的类导致 500 错误？

> ID：14800112
> 
> 赞同：0
> 
> 时间：2013-02-10T16:54:48.703
> 
> 标签：php, apache, naming-conventions

试图理解为什么我的本地服务器（Ubuntu 上的 apache）开始发出 500 消息时，我几乎失去了理智。

原来，问题是由一个名为`classView()`. 我将其重命名为500，`classTemplateView()`但仍然是 500。然后我尝试了`stupidView()`（我累了），它再次起作用。

我已经搜索了一段时间，但我没有找到任何说函数名称中的类是“禁止”的，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:58:35.407

不，没关系：“类”本身是一个保留字，但当它是另一个词的一部分时则不是。

快速测试脚本：

```
<?php

function classView()
{
    echo 'test';
}

classView(); 
```

正如预期的那样回声“测试”。

# android - 带边框的 ImageView 的奇怪视图

> ID：14800116
> 
> 赞同：0
> 
> 时间：2013-02-10T16:55:30.900
> 
> 标签：android, imageview, border

我想为这个图像添加一个 4dp 填充的边框，但是当我将背景设置为我想要的颜色时，我会在顶部和底部得到所有黑色边框。我怎样才能摆脱它，以便正确设置边界？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:10:18.513

据我了解你的问题不知道我是否真的得到了你想要的

采用线性布局并将图像视图包装在线性布局内，然后为线性布局提供任何您想要的背景颜色，并在图像视图中为边框提供您想要的任何宽度的边距

```
 <ScrollView>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:padding="10dip"
android:layout_width="fill_parent"
android:layout_height="wrap_content">
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dip"
    android:text="@string/dealer_picker" />

<Spinner
    android:id="@+id/spinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:prompt="@string/dealer_picker" />
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
 android:background="#1E1E1E">
<ImageView
    android:id="@+id/mapView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:MARGINHERE SAY 10 dp or whatever />
</LinearLayout>

<TextView
    android:id="@+id/adresa"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dip" />  
</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:10:37.520

解决方法是添加：`android:adjustViewBounds="true"`到 ImageView

# javascript - 在 yepnope.js 中测试媒体查询 - 误报还是...？

> ID：14800117
> 
> 赞同：0
> 
> 时间：2013-02-10T16:55:33.210
> 
> 标签：javascript, media-queries, modernizr, yepnope, browser-feature-detection

我正在使用此代码来测试媒体查询支持，因为我想为例如 IE8 加载 polyfill。

```
yepnope({
    test : Modernizr.mq('(only all)'),
    nope : ['scripts/respond.js']
}); 
```

它可以工作（=respond.js 在 oder IE 中加载），但现在我刚刚发现 response.js 也在 Safari 中加载。

阅读[完文档](http://modernizr.com/docs/#mq)后，我相信 response.js 已加载，因为 Safari*不*支持某些媒体查询。这是真的？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:17:12.473

问题不在于 Safari 不支持某些媒体查询，而是那`(only all)`不是有效的媒体查询。`only`关键字或媒体类型周围不应有括号`all`：

```
yepnope({
    test : Modernizr.mq('only all'),
    nope : ['scripts/respond.js']
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:14:32.297

我也在使用modernizr，但发现为IE7和IE8添加媒体查询支持的最简单方法就是在页眉中使用类似这样的东西

```
<!--[if lt IE 9]>
  <script src="js/respond.js"></script>
<![endif]--> 
```

确保在 CSS 文件加载后调用 respond.js。

这对我来说效果很好。

祝你好运！

# c# - 你如何在 1-100 之间创建一个包含 1000 个随机整数的数组

> ID：14800120
> 
> 赞同：0
> 
> 时间：2013-02-10T16:55:42.680
> 
> 标签：c#, arrays

你如何编程 c# 来制作一个包含 1000 个 1-100 之间的随机整数的数组。

那么当一个人输入一个数字时你如何得到，例如 68，你如何让程序说 68 出现如此多次或根本不起作用！

我不是要完整的答案，我只需要提示从哪里开始。

这是我所知道的：

我必须使用随机函数和 if 但我不知道在哪里放什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:58:41.553

```
int[] iArray = new int[1000];
int counter = 0;
Random random = new Random();
for(int i = 0; i < 1000; i++){
   iArray[i] = random.Next(1, 101); //1 - 100, including 100
}
int number = Convert.ToInt32(Console.ReadLine());
foreach(int i in iArray){
  if(i == number)count++;
}
Console.WriteLine("The number "+ number+" appears "+count+" times!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:59:27.010

从 a 开始`for loop`，在每次迭代中调用 the`random function`并将结果放入 a 中`public list`。之后，您创建一个对话框让用户键入一个数字。您可以`lambda expression`在列表中搜索以查看您获得了多少匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T17:26:36.163

> 在 1-100 之间创建一个包含 1000 个随机整数的数组，当一个人输入一个数字（例如 68）时，如何让程序说 68 出现这么多次

我认为您正在寻找这样的方法：

```
private static Random rnd = new Random();

public static IEnumerable<int> getRandomNumbers(int count, int lowerbound, int upperbound, int specialNumber = int.MinValue, int specialNumberCount = int.MinValue)
{
    List<int> list = new List<int>(count);
    HashSet<int> specialNumPositions = new HashSet<int>();

    if (specialNumberCount > 0)
    {
        // generate random positions for the number that must be create at least n-times
        for (int i = 0; i < specialNumberCount; i++)
        {
            while (!specialNumPositions.Add(rnd.Next(0, count)))
                ;
        }
    }

    while (list.Count < count)
    {
        if (specialNumPositions.Contains(list.Count))
            list.Add(specialNumber);
        else
            list.Add(rnd.Next(lowerbound, upperbound + 1));
    }
    return list;
} 
```

您可以通过这种方式使用它：

```
// ensure that 68 is generated at least 10 times
var list = getRandomNumbers(1000, 1, 100, 68, 10); 
```

[**演示**](http://ideone.com/oYhQkp)

如果您只想知道一个数字在列表中出现的频率，您可以使用 Linq：

```
int count = list.Count(i => i == 68); 
```

# sql - 如何处理通过复制保存 AMOUNT 值的列

> ID：14800122
> 
> 赞同：0
> 
> 时间：2013-02-10T16:55:43.517
> 
> 标签：sql, sql-server-2008

我们使用的是 SQL Server 2008 SP 2，并且在 6 个站点之间存在复制

问题是：

我们将金额值保存在一列中（例如：500$），这可能会同时在两个站点中更改，然后如果复制当时关闭，那么我们在两个站点中都有两个不同的值，如果我使用最近更新或发布者作为获胜者我会得到错误的金额值

是否有任何复制策略来合并这两个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:09:30.720

你的问题有些奇怪。如果您在*事务数据库上使用事务复制（参见*[此处](http://technet.microsoft.com/en-us/library/ms151176.aspx)），则不会发生这种情况。

 *问题是您的数据库设计不正确。您允许“增量”更改进入字段，而不存储增量（事务）。您的问题有点模棱两可，因为您没有解释真正应该发生的事情。为什么最近的值不够？

您应该将数据库更改存储为事务：

*   起始价值：500美元
*   交易1：加$100
*   交易 2：减去 $200

而不是作为绝对值：

*   起始价值：500美元
*   交易 1：将价值更改为 600 美元
*   交易 2：将价值更改为 400 美元

在第一种情况下，您可以按任一顺序应用事务以迎头赶上。在第二种情况下，您最终将只应用其中一个。

汇总值（例如余额）应从事务中派生，可能使用触发器或存储过程。*

# php - 多个表单下拉列表的单个 jquery 自动完成

> ID：14800124
> 
> 赞同：0
> 
> 时间：2013-02-10T16:55:53.220
> 
> 标签：php, jquery, codeigniter

如何将单个 jquery 自动完成用于多个表单下拉列表？

这是我的视图页面（标题）：

```
$("#full_name").autocomplete({
   source: "<?php echo site_url('autocomplete/get_names');?>"
});  

$("#department").autocomplete({
   source: "<?php echo site_url('autocomplete/get_dept');?>"
});  

*** and other like these for subjects, zip and country. 
```

控制器页面：

```
public function get_names(){
 $this->load->model('autocomplete_model');
    if (isset($_GET['term'])){
    $q = strtolower($_GET['term']);
    $this->autocomplete_model->get_fullnames($q);
 }
}  
*** and other functions... 
```

型号页面：

```
function get_fullnames($q)
{
$match = $q;
$this->db->select('full_name');
$this->db->like('full_name', $match,'after');
$query = $this->db->get('employee_list');

    if($query->num_rows > 0){
      foreach ($query->result_array() as $row){
        $row_set[] = htmlentities(stripslashes($row['full_name'])); 
        }
        echo json_encode($row_set); 
    }

} 
```

如何实现可用于多个条件的单个搜索词？
提前谢谢你们..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:42:38.243

这不会扩大规模；随着您的数据库表的增长，此实现将变得非常缓慢。您需要做的是使用索引引擎来允许[全文搜索](http://en.wikipedia.org/wiki/Full_text_search)。

MySQL 不允许对 InnoDB 表进行全文搜索（实际上，它刚刚在最新版本中发布，但仍处于起步阶段）。考虑使用[Elastic Search](http://www.elasticsearch.org/)、[Sphinx](http://sphinxsearch.com/)或[Solr](http://lucene.apache.org/solr/)。

查看 StackOverflow 以找到最适合您的引擎 - 过去曾针对此问题提出过许多有用的问题。希望这能让你走上正确的道路。

# php - WordPress循环包含页面内容而不是帖子

> ID：14800126
> 
> 赞同：0
> 
> 时间：2013-02-10T16:56:02.397
> 
> 标签：php, wordpress, loops

我正在开发一个单页 WordPress 主题，不需要显示任何帖子，它只是信息页面，我正在考虑使用静态内容，但结果我需要使用动态主题才能进行搜索去工作。在 WordPres 的“页面”部分，我创建了一个新页面，其中包含我需要的所有内容，我试图找出一个循环来包含该页面的内容，但失败了。经过研究，我只能找到用于显示帖子内容的循环。那么是否有相同的循环，但要显示页面的内容？另外，我将如何在页面中包含这些内容，例如
`<?php something();?>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:05:26.227

只需指定参数的`post_type`内部`query_posts()`。例如，如果你想输出每个页面的内容，你可以这样做：

```
query_posts(array('post_type' => 'page'));
while(have_posts()) 
{ 
    echo the_content();
} 
```

作为参考，您可能需要查看[`query_posts()`](http://codex.wordpress.org/Template_Tags/query_posts).

# php - 获取json编码数据到ajax成功

> ID：14800132
> 
> 赞同：0
> 
> 时间：2013-02-10T16:56:18.883
> 
> 标签：php, jquery, ajax, json

我有一个带有编码 json 的 php 文件。我想做的是从编码的json中获取每个数据（maxVote和Id）

这是我的名为 results.php 的 php 文件

```
<?php
    $result = array();     
    array_push($result,array("maxVote"=>300,"id"=>"li_2"),array("maxVote"=>200,"id"=>"li_1"));
    echo json_encode($result);
?> 
```

因为我是 ajax 和 json 的新手，所以要成功的代码是什么，这样我才能得到每个 maxVote 和每个 id

```
$.ajax({
    url: "results.php",
    success: function(){
      ...         
    }
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:57:18.970

您可以使用：

```
$.ajax({
  dataType: "json",
  url: 'results.php',
  success: function(data){
    var items = [];
    $.each(data, function(key, val) {
      items.push(key + ' : ' + val + '</br>');
    });
    $('body').append(items.join(''));
  }
}); 
```

或者

```
$.getJSON('results.php', function(data) {

  var items = [];

  $.each(data, function(key, val) {
    items.push(key + ' : ' + val + '</br>');
  });

  $('body').append(items.join(''));

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:06:56.150

将`data`参数添加到您的`success`函数中：

```
$.ajax({
    url: "results.php",
    success: function(data){
      $.each(data, function(id, elt) {
          // use data[id].maxVote or elt.maxVote
      }
    }
}); 
```

# size - jTransforms 中的 FFT 大小

> ID：14800134
> 
> 赞同：0
> 
> 时间：2013-02-10T16:56:46.767
> 
> 标签：size, signal-processing, fft, resolution, frequency

我需要在 Android 项目中计算音频数据的 FFT，我使用 jTransforms 来实现这一点。

音频数据的样本长达几秒钟，并以 11025 赫兹的采样率记录。

我不确定如何在 jTransforms 中设置 FFT 的长度。我真的不需要高频率分辨率，所以 1024 的大小就足够了。

但是根据我对 FFT 的了解，如果我减小 FFT 大小 F 并使用长度为 N > F 的样本，则仅转换原始样本的前 F 值。

这是真的还是我理解错了？

如果是真的，是否有一种有效的方法来转换整个信号并在之后减小 FFT 大小？

我需要它来使用支持向量机对不同的信号进行分类，而 FFT-Sizes > 1024 会给我太多的输出特征，所以我必须将 FFT 的结果减少到更紧凑的向量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:26:28.020

我对jTransform库不熟悉，但是你真的在计算之前设置了变换的大小吗？时域信号的幅度值和采样频率（11.025 kHz）足以计算 FFT（注意 FFT 假设采样率恒定）

频域分辨率由奈奎斯特定理确定；信号中的最大可解析频率将等于采样率的一半。换句话说，以 11.025 kHz 对信号进行采样，您可以期望频率图包含 0 Hz - 5.5125 kHz 之间的频率值（和相应的幅度）。

更新：

如果您的输入信号较长，FFT 的分辨率（频率区间的窄度）将增加/改善，因此如果您需要区分频率的非常小的变化，1024 个样本可能不是一个足够长的序列。如果这对您的应用程序来说不是问题，并且您的数据的性质没有快速变化，并且您有处理时间，那么平均 3-4 次 FFT 估计将大大减少噪声并改善估计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:13:29.690

如果您只想要 FFT 幅度结果，则对连续 1024 个数据块长度重复使用 FFT，并对所有连续幅度结果进行矢量求和，以获得整个更长信号的估计。

请参阅[Welch 的](http://en.wikipedia.org/wiki/Welch%27s_method)关于估计谱密度的方法，以了解为什么这可能是一种有用的技术。

# regex - 剪切和复制粘贴文本的给定位置

> ID：14800135
> 
> 赞同：0
> 
> 时间：2013-02-10T16:56:55.603
> 
> 标签：regex, perl, text, sed, awk

我的虚拟文本文件（一条实线）如下所示：

```
AAChvhkfiAFAjjfkqAPPMB 
```

我想要：

1.  删除部分文字（具体范围）；
2.  在文件中复制粘贴（特定范围的字符）。

我是怎么做的：

要在想要的位置（从 5 到 7 个字符和从 10 到 14 个字符）剪切部分文本，我使用`cut`

```
echo 'AAChvhkfiAFAjjfkqAPPMB' | cut --complement -c 5-7,10-14  
AAChfifkqAPPMB 
```

但我真的不知道如何复制粘贴文本。例如：复制 15 到 18 个字符的文本并将其粘贴到字符 1 之后（也使用之前的剪切命令）。要获得这样的最终结果：

```
fkqAAAChfifkqAPPMB 
```

所以我确实有问题：

1.  如何使用 perl、awk 或 sed 读取给定范围的文本（从 .. 到）并将此文本粘贴到特定位置。
2.  如何将此文本粘贴与先前的剪切命令结合起来，因为剪切后的文本将移动到左侧，因此将复制错误的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:12:33.320

也许是这样的：

```
$ echo AAChvhkfiAFAjjfkqAPPMB | awk '{ print(substr($1, 0, 14) substr($1, 18) substr($1, 15, 3)) }'
AAChvhkfiAFAjjAPPMBfkq 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:13:40.603

在[perl](/questions/tagged/perl "显示标记为“perl”的问题")中，您可以通过将*字符串*拆分为*数组来使用**数组切片*：

 **```
my $string = "AAChvhkfiAFAjjfkqAPPMB1";
my @arr = split //, $string; 
```

和*切片*（打印元素 5 到 7 和 10 到 14）：

```
 print @array[5..7,10..14]; 
```

您也可以使用[splice()](http://perldoc.perl.org/functions/splice.html)重新排列数组。

perldoc 说：

> 从数组中删除由 OFFSET 和 LENGTH 指定的元素，并将它们替换为 LIST 的元素（如果有）。

请参阅[http://perldoc.perl.org/perldata.html#Slices](http://perldoc.perl.org/perldata.html#Slices)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T17:19:39.227

在 Perl 中，我认为 substr 是一个不错的选择，例如。

```
$a = '1234567890';
#from pos 2, replace 3 chars with nothing, return the 3 chars
$b=substr($a,2,3,''); 
print "$a\t$b\n"; #1267890    345
#in posistion 0 (first), replace 0 characters (ie pure insert)
#with the content of $b
substr($a,0,0,$b);
print "$a\t$b\n"; #3451267890    345 
```

有关详细信息，请参阅[http://perldoc.perl.org/functions/substr.html 。](http://perldoc.perl.org/functions/substr.html)splice() 也可能是候选者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T17:28:57.420

awk 非常简单：

```
kent$  echo "AAChvhkfiAFAjjfkqAPPMB"|awk  '
{for(i=5;i<=7;i++)$i="";
 for(i=10;i<=14;i++)$i="";
 for(i=15;i<=18;i++)t=sprintf("%s%s",t,$i);
 $0=t""$0}1' OFS="" FS=""
fkqAAAChfifkqAPPMB 
```

**编辑**

要反转文本的一部分，您只需要交换`t`和`$i`：

```
kent$  echo "AAChvhkfiAFAjjfkqAPPMB"|awk  '
{for(i=5;i<=7;i++)$i="";
 for(i=10;i<=14;i++)$i="";
 for(i=15;i<=18;i++)t=sprintf("%s%s",$i,t);
 $0=t""$0}1' OFS="" FS=""
AqkfAAChfifkqAPPMB 
```**

# c# - 在 WCF 中写入文件时流式传输文件

> ID：14800138
> 
> 赞同：1
> 
> 时间：2013-02-10T16:57:10.810
> 
> 标签：c#, wcf, file, stream, contract

我有一个服务器应用程序，它执行另一个应用程序，第二个应用程序构建一个日志文件，我希望服务器通过 WCF 将它发送到客户端。

我希望客户端在 EXEC 应用程序更新日志时读取日志。

我使用了一个返回流（日志文件）的操作合同。问题是当我第一次发送流时，日志仍然是空的，客户端看不到服务器 EXEC 写入的“更新”。

这是服务器代码：

```
 public Stream GetLog()
    {
        Stream stream = new FileStream(@"Log.txt", FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
        return stream;
    } 
```

来自服务器的 EXEC 只是写入“Log.txt”文件

这是客户端代码：

```
 public void SaveLog()
    {
        Stream stream = ServerProxy.GetLog();
        StreamWriter writer = new StreamWriter("NEWLog.txt");
        writer.AutoFlush = true;
        StreamReader reader = new StreamReader(stream);
        char[] buf = new char[100];
        int count = 0;
        while (count = reader.ReadBlock(buf, 0, 100) > 0)
        {
            writer.Write(buf, 0, count);
        }
        stream.Close();
        writer.Close();
    } 
```

如何使用实时登录更新客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:10:52.823

我认为你的绑定是错误的。你应该设置你的`transferMode="Streamed"`

在那里你可以找到一个例子：

[http://msdn.microsoft.com/en-us/library/ms751463.aspx](http://msdn.microsoft.com/en-us/library/ms751463.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:20:50.953

有几种可能性。可以修改合同吗？如果您可以使用像 netTcpBinding 这样的会话感知绑定，您可以修改您的合约以使用回调合约，其中回调用于发布新的日志数据。

```
[ServiceContract]
public interface ILogCallback
{
    [OperationContract(IsOneWay = true)]
    void NewLog(string logString);
}

[ServiceContract(CallbackContract = typeof(ILogCallback))]
public interface ILog
{
    /// Call this method to sign up for future log messages, 
    /// which will be sent to the callback NewLog.
    [OperationContract]
    void SignMeUpForLogs();
} 
```

你可以使用什么样的绑定？会话是可行的替代方案还是必须使用 PerCall？

问候，弗雷德里克

# mysql - 如何从 xls 将数据插入 MySQL

> ID：14800139
> 
> 赞同：0
> 
> 时间：2013-02-10T16:57:13.600
> 
> 标签：mysql

我是数据库新手。我在 xls 表中有数据，我想将该数据插入表中。我在 xls 表中只有一列数据。该表在 MySQL 数据库中。请帮我怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:00:59.337

启动 MySQL 命令提示符并输入

```
 LOAD DATA LOCAL INFILE ‘C:\\path\\yourfile.csv’ INTO TABLE database.table FIELDS TERMINATED BY ‘;’ ENCLOSED BY ‘”‘ LINES TERMINATED BY ‘\r\n’ (field1, field2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:02:48.427

您可以将其导出为 .csv 文件，然后上传：请参阅[此链接](http://blog.tjitjing.com/index.php/2008/02/import-excel-data-into-mysql-in-5-easy.html)

我相信excel也有直接连接你的mysql表的工具，也许excel也有内置的导出工具？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:23:26.420

或者您可能想尝试最近发布的“MySQL for Excel”模块，它是“MySQL 安装程序”软件包的一部分。它提供了本地实用程序，用于将数据导入/导出 MySQL 表到 Excel 中。

它位于此处 - [http://dev.mysql.com/downloads/installer/](http://dev.mysql.com/downloads/installer/)

# c# - 为什么我的 EF 分离不够？

> ID：14800140
> 
> 赞同：3
> 
> 时间：2013-02-10T16:57:18.887
> 
> 标签：c#, entity-framework, caching

我尝试分离类型的实体`group`。

实际上，我将它保存在我的缓存中，并在响应客户端之前将其分离。

在下一个请求中，我`group`从缓存中获取并重新附加一个新的 objectContext。

但是我得到`An entity object cannot be referenced by multiple instances of IEntityChangeTracker`

我知道附加包括所有相关实体，但分离不包括。在那里我必须分离每个相关实体。

我的分离中缺少什么？

**这是我的实体层次结构：**

```
public partial class App
{
    public App()
    {
        this.Pairs = new HashSet<Pair>();
    }

    public string AppName { get; set; }
    public System.Guid AppGuid { get; set; }
    public string ClientAppID { get; set; }
    public bool IsDeleted { get; set; }
    public Nullable<System.DateTime> CreatedDate { get; set; }
    public Nullable<System.DateTime> UpdatedDate { get; set; }

    public virtual AppsData AppsData { get; set; }
    public virtual ICollection<Pair> Pairs { get; set; }
}

public partial class AppsData
{
    public System.Guid AppGuid { get; set; }
    public string Url { get; set; }
    public string DisplayName { get; set; }
    public string AppDesc { get; set; }
    public string PrivacyPolicyUrl { get; set; }
    public string TermsOfUseUrl { get; set; }
    public string LocalizationKey { get; set; }
    public string Compatibility { get; set; }
    public bool HiddenApp { get; set; }
    public bool IsExperimental { get; set; }

    public virtual App App { get; set; }
}

public partial class Browser
{
    public Browser()
    {
        this.BrowserVersions = new HashSet<BrowserVersion>();
    }

    public int BrowserID { get; set; }
    public string BrowserName { get; set; }
    public string BrowserCode { get; set; }

    public virtual ICollection<BrowserVersion> BrowserVersions { get; set; }
}

public partial class BrowserVersion
{
    public BrowserVersion()
    {
        this.BrowserVerToCriterias = new HashSet<BrowserVerToCriteria>();
    }

    public System.Guid BrowserVersionID { get; set; }
    public int BrowserID { get; set; }
    public string Version { get; set; }
    public System.DateTime CreatedDate { get; set; }
    public System.DateTime UpdatedDate { get; set; }
    public Nullable<int> Group_Id { get; set; }

    public virtual Browser Browser { get; set; }
    public virtual ICollection<BrowserVerToCriteria> BrowserVerToCriterias { get; set; }
}

public partial class BrowserVerToCriteria
{
    public System.Guid CriteriaID { get; set; }
    public System.Guid BrowserVersionID { get; set; }
    public string ConditionBrowserVersion { get; set; }

    public virtual BrowserVersion BrowserVersion { get; set; }
    public virtual Criterion Criterion { get; set; }
}

public partial class CommonConfig
{
    public int ID { get; set; }
    public string NAME { get; set; }
    public string VALUE { get; set; }
    public System.DateTime CREATED_DATE { get; set; }
    public System.DateTime UPDATED_DATE { get; set; }
    public byte GROUP_ID { get; set; }
    public string DESCRIPTION { get; set; }
}

public partial class Country
{
    public Country()
    {
        this.Criteria = new HashSet<Criterion>();
        this.Criteria1 = new HashSet<Criterion>();
    }

    public int CountryID { get; set; }
    public string CountryCode { get; set; }
    public string CountryName { get; set; }

    public virtual ICollection<Criterion> Criteria { get; set; }
    public virtual ICollection<Criterion> Criteria1 { get; set; }
}

    public Criterion()
    {
        this.BrowserVerToCriterias = new HashSet<BrowserVerToCriteria>();
        this.Countries = new HashSet<Country>();
        this.CountriesExceptions = new HashSet<Country>();
        this.Pairs = new HashSet<Pair>();
    }

    public System.Guid CriteriaID { get; set; }
    public string Domains { get; set; }
    public System.DateTime CreatedDate { get; set; }
    public System.DateTime UpdatedDate { get; set; }
    public string DomainsExclude { get; set; }

    public virtual ICollection<BrowserVerToCriteria> BrowserVerToCriterias { get; set; }
    public virtual ICollection<Country> Countries { get; set; }
    public virtual ICollection<Country> CountriesExceptions { get; set; }
    public virtual ICollection<Pair> Pairs { get; set; }
}

public partial class CTID
{
    public string CTID1 { get; set; }
    public string AppVersion { get; set; }
}

public partial class CtidPgPastExistence
{
    public string Ctid { get; set; }
}

public partial class Group
{
    public Group()
    {
        this.Pairs = new HashSet<Pair>();
    }

    public System.Guid GroupId { get; set; }
    public int TestId { get; set; }
    public int IdInTest { get; set; }
    public bool WelcomeExperienceEnabledByDefault { get; set; }

    public virtual MamConfiguration MamConfiguration { get; set; }
    public virtual ICollection<Pair> Pairs { get; set; }
}

public partial class MamConfiguration
{
    public MamConfiguration()
    {
        this.Groups = new HashSet<Group>();
        this.MamConfigurationCTIDs = new HashSet<MamConfigurationCTID>();
    }

    public int TestID { get; set; }
    public string TestName { get; set; }
    public string Description { get; set; }
    public int StatusId { get; set; }
    public System.DateTime CreatedDate { get; set; }
    public System.DateTime UpdatedDate { get; set; }
    public bool IsProd { get; set; }
    public int TestTraffic { get; set; }

    public virtual ICollection<Group> Groups { get; set; }
    public virtual MamConfigurationStatus MamConfigurationStatus { get; set; }
    public virtual ICollection<MamConfigurationCTID> MamConfigurationCTIDs { get; set; }
}

public partial class MamConfigurationCTID
{
    public int TestID { get; set; }
    public string CTID { get; set; }

    public virtual MamConfiguration MamConfiguration { get; set; }
}

public partial class MamConfigurationStatus
{
    public MamConfigurationStatus()
    {
        this.MamConfigurations = new HashSet<MamConfiguration>();
    }

    public int StatusId { get; set; }
    public string Status { get; set; }

    public virtual ICollection<MamConfiguration> MamConfigurations { get; set; }
}

public partial class Pair
{
    public Pair()
    {
        this.Groups = new HashSet<Group>();
    }

    public System.Guid PairID { get; set; }
    public System.Guid CriteriaID { get; set; }
    public System.Guid AppGuid { get; set; }

    public virtual App App { get; set; }
    public virtual Criterion Criterion { get; set; }
    public virtual ICollection<Group> Groups { get; set; }
}

public partial class SettingsServicesConfig
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string URL { get; set; }
    public int Interval { get; set; }
    public System.DateTime UPDATED_DATE { get; set; }
    public System.DateTime CREATED_DATE { get; set; }
    public int GROUP_ID { get; set; }
} 
```

**这是我的分离功能：**

```
public void Detach<T>(MaMDBEntities maMdbEntities, T item) where T : class, new()
{
    switch (typeof (T).Name.ToLower())
    {
        case "group":
            {
                var group = item as Group;

                if (group == null)
                {
                    mApplicationLogger.Error(string.Format("Couldn't cast item to type 'Group'"));

                    throw new InvalidCastException(string.Format("Couldn't cast item to type 'Group'"));
                }

                DetachState(maMdbEntities, group.MamConfiguration);

                foreach (var pair in group.Pairs.ToList())
                {
                    DetachState(maMdbEntities, pair.App);

                    DetachState(maMdbEntities, pair.App.AppsData);

                    foreach (var country in pair.Criterion.Countries.ToList())
                    {
                        DetachState(maMdbEntities, country);
                    }

                    foreach (var country in pair.Criterion.CountriesExceptions.ToList())
                    {
                        DetachState(maMdbEntities, country);
                    }

                    foreach (var browserVerToCriterias in pair.Criterion.BrowserVerToCriterias.ToList())
                    {
                        DetachState(maMdbEntities, browserVerToCriterias.BrowserVersion.Browser);

                        DetachState(maMdbEntities, browserVerToCriterias.BrowserVersion);

                        DetachState(maMdbEntities, browserVerToCriterias);
                    }

                                                DetachState(maMdbEntities, pair.Criterion);

                    DetachState(maMdbEntities, pair);

                }

                break;
            }
    }
    maMdbEntities.Entry(item).State = EntityState.Detached;
}

private static void DetachState(MaMDBEntities maMdbEntities, object item)
{
    maMdbEntities.Entry(item).State = EntityState.Detached;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:54:18.313

我相信您需要确保没有保留在您的上下文中的实体引用任何已分离的实体。因此，如果说其他东西引用了 Pair 的分离实例，上下文会很高兴地找到它，遍历它的导航属性并将全部添加回去。

您是否尝试过设置 State 属性，而不是设置：

```
((IObjectContextAdapter)maMdbEntities).ObjectContext.Detach(item); 
```

除了项目本身之外，这应该分离到要分离的项目的任何链接。

编辑

好的，让我们看看“分离任何链接到被分离的项目......”，ObjectContext.Detach最终调用了这个方法：

```
// System.Data.Objects.EntityEntry
internal void Detach()
    {
    base.ValidateState();
    bool flag = false;
    RelationshipManager relationshipManager = this._wrappedEntity.RelationshipManager;
    flag = (base.State != EntityState.Added && this.IsOneEndOfSomeRelationship());
    this._cache.TransactionManager.BeginDetaching();
    try
        {
        relationshipManager.DetachEntityFromRelationships(base.State);
        }
    finally
        {
        this._cache.TransactionManager.EndDetaching();
        }
    this.DetachRelationshipsEntries(relationshipManager);
    IEntityWrapper wrappedEntity = this._wrappedEntity;
    EntityKey entityKey = this._entityKey;
    EntityState state = base.State;
    if (flag)
        {
        this.DegradeEntry();
        }
    else
        {
        this._wrappedEntity.ObjectStateEntry = null;
        this._cache.ChangeState(this, base.State, EntityState.Detached);
        }
    if (state != EntityState.Added)
        {
        wrappedEntity.EntityKey = entityKey;
        }
    } 
```

DetachEntityFromRelationships 分解所有链接。ObjectContext.Detach 上的文档没有具体说明链接的拆除[http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.detach.aspx](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.detach.aspx)它确实说“在 Detach 方法之后被调用时，系统将不再保留指向该对象的引用，并且它可以被垃圾收集器收集”，这意味着所有 LinkDescriptor 也将被删除。

关于您的第三条评论“您认为 IObjectContextAdapter 会启用完全分离吗？或者在上下文中总会有其他对象我会错过而不分离？” 这里有两件事；有对象的属性和上下文用来跟踪关系的 LinkDescriptor。分离只是通过分离 LinkDescriptor 来停止跟踪对象的关系，它不会分离关系另一端的对象。它也不会将此类属性设置为 null，如果您在分离后检查对象，它仍将设置这些属性。

这是最好的方法吗？分离和重新连接很难正确。如果您需要分离和重新连接，我建议您将深度分离例程移到类本身而不是通用方法中。

That said, you wrote "On the next request I get the group from the cache..." which leads to me wonder what would be the longest period of time between two requests? Could you be introducing concurrency issues by caching? Are you hosting your WCF service in IIS? Could you use IIS's caching if concurrency will not be a problem? Are you handling all requests on the same thread? You might not be aware that ObjectContext instance methods are not thread safe.

# django - Django模板中的日期时间

> ID：14800144
> 
> 赞同：0
> 
> 时间：2013-02-10T16:57:44.177
> 
> 标签：django, datetime, django-templates

从这个[答案](https://stackoverflow.com/a/3376435/1690081)

在我的模板中，我需要`1255992517000`设置一个日期时间。我试过了`{{note.created|date:"U"}}`，`1255992517000|date:"U"`但没有用。如何让它工作？从[django docs](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#std:templatefilter-date)可以看到它应该可以工作，但是如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:25:01.090

您误解了`{{ value|date }}`过滤器的功能。它不会将整数转换为日期对象，您必须将其传递给现有的日期对象。

您可以编写自己的模板过滤器，先将值转换为日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:14:42.020

应用过滤器`date:"U"`是告诉模板显示自 Unix 纪元（1970 年 1 月 1 日 00:00:00 UTC）以来的秒数。

如果要显示可读的日期/时间，请尝试以下操作：

```
{{ note.created|date:"D d M Y" }} 
```

# mysql - 按值在 MySQL 中查找行的最佳方法

> ID：14800146
> 
> 赞同：0
> 
> 时间：2013-02-10T16:58:01.353
> 
> 标签：mysql

数据库：

```
+----+------------+
| 编号 | 一些价值 |
+----+------------+
| 1 | 1000 |
+----+------------+
| 2 | 1001 |
+----+------------+
| 3 | 1002 |
+----+------------+
| 4 | 10021 |
+----+------------+

```

问题：

通过包含“somevalue”的字符串查找行的最佳方法是什么？
1\. 假设字符串是 1002123456。所以在这种情况下，我必须找到 ID 为 4
的行。 2\. 假设字符串是 1002345678。所以在这种情况下，我必须找到 ID 为 3 的行。

“MySQL LIKE”会在这种情况下工作吗？

**更新：**
数据库有 60k 行，“somevalue”应该从前面匹配。因为一块“somevalue”可能包含不同的行，例如：

```
+----+------------+
| 编号 | 一些价值 |
+----+------------+
| 1 | 1000 |
+----+------------+
| 27 | 371000 |
+----+------------+

```

我正在寻找一种方法来使这个过程尽可能快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:00:17.967

```
SELECT * FROM `db`.`table` WHERE 'someval' LIKE CONCAT('%',`field` , '%') ; 
```

RLIKE 允许您匹配字段中的正则表达式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:12:44.273

SELECT * FROM 'table' WHERE 'searchNumber' LIKE CONCAT('%', somevalue, '%')

# vb6 - 数据同时到达的 Winsock 数组停止向客户端发送数据

> ID：14800149
> 
> 赞同：1
> 
> 时间：2013-02-10T16:58:14.410
> 
> 标签：vb6, client-server, winsock

我已经在网上搜索了好几天，但找不到任何与 VB6 Winsock 有同样问题的人。所以这是我的问题，我有一个服务器，阵列中有两个winsocks。然后我有两个客户端，每个客户端都有一个winsock控件。现在我设置的是服务器首先向客户端 A 发送数据。然后客户端 A 接收该数据并将自己的数据发送回服务器。然后服务器向客户端 B 发送数据，客户端 B 收到数据后，将自己的数据发送回服务器。因此数据从客户端发送到服务器，然后从服务器发送到另一个客户端，然后返回到服务器，然后再发送到另一个客户端。我这样做是因为当我尝试按照我真正想要的方式进行操作时，我遇到了问题。所以我必须以这种方式进行设置，以确保任何时候只有一个客户端向服务器发送数据。这个过程完美地工作，但是我希望它以不同的方式工作，因为你可以想象，客户端越多，每个客户端和服务器之间的数据传输延迟就越长。

因此，我真正想做但无法工作的事情是让客户端在需要时向服务器发送和接收数据。也就是说，客户端 A 向服务器发送数据，然后服务器将数据发回，而客户端 B 也在做同样的事情。当我这样做时，即使我在服务器上有一个 winsock 数组，我也会遇到问题。当客户端 A 第一次连接时，它开始向服务器发送和接收数据。但是一旦客户端 B 连接到服务器，客户端 A 和服务器之间的所有通信都停止了，只有客户端 B 向服务器发送和接收数据。现在我已经做了一些测试，客户端 A 一直保持连接到服务器。但是由于某种原因，如果两个客户端同时向服务器发送数据，即使每个 winsock 位于不同的端口上，也只会触发一个数据到达事件。

所以我真的希望有人能读到这篇文章并向我解释我不理解什么或者我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:04:22.543

如果您搜索有关 Winsock 控件的 Microsoft KB 文章，您会发现历史悠久的缺陷和错误修复。在尝试使用 VB6 之前，绝对没有理由*不安装 SP6，因为随着时间的推移，大量问题得到了解决。*

一旦你做到了（而且只有那时），真的值得谈论你描述的那种问题。至少它消除了大量已知问题，然后可能值得讨论您的代码。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-10T17:03:30.240

您是否使用非阻塞套接字？我想你应该。您可能应该为每个传入连接创建一个线程。所以主循环应该不阻塞并为每个传入连接创建一个线程，接收数据并发送答案。

# nhibernate - 休眠。使用 2 个查询和合并加载实体

> ID：14800152
> 
> 赞同：1
> 
> 时间：2013-02-10T16:58:37.447
> 
> 标签：nhibernate

我有一个复杂的实体，其中包含很多子对象集合，这些对象也很复杂：

```
public class Order : AdvancedBaseOrder, ICheckable
{
    public virtual ICollection<RouteUnit> RouteUnits
    public virtual ICollection<Invoice> Invoices
    public virtual ICollection<Call> Calls;
    public virtual ICollection<Payment> Payments;
    ......
} 
```

我的支付类聚合了很多其他对象

```
public class Payment:  ICheckable
{
    public virtual A A;
    public virtual B B;
    public virtual C C;
    public virtual D D;
    ......
} 
```

我想通过 2 个查询获得订单：

1.  加载没有付款的订单实体 (FetchMode.Lazy)
2.  通过加入其对象按顺序加载付款
3.  结合\合并订单及其付款

我不希望 nhib 延迟加载支付，因为我想覆盖支付对象的获取策略。

所以我的问题是如何将两个查询结果合并到一个聚合中。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:44:37.640

在这种情况下，`batch-size="25"`设置可以为您完成这项工作。在文档中阅读更多内容：[19.1.5。使用批量获取](http://nhforge.org/doc/nh/en/index.html#performance-fetching-batch)。

批量大小可以应用于*类*或*集合*映射：

支付类

```
<class name="Payment" batch-size="10">...</class> 
```

收款

```
<class name="Order">
    <set name="Payments" batch-size="3">
        ...
    </set>
</class> 
```

简而言之，批处理是如何工作的：NHibernates 加载所有`Orders`. 然后基于批量大小设置（例如 25）创建几个调用来`Payments`过滤`ID`刚刚加载的*Orders*：

> WHERE OrderId in (@o1, @o2, @O3...@o25)

合并将在 NHibernate 会话中为您完成。根据我的经验，这是最强大的映射... Lazy & Batching。

# r - 按组选择前 N 个值

> ID：14800161
> 
> 赞同：63
> 
> 时间：2013-02-10T16:59:27.717
> 
> 标签：r, aggregate

[这是对 r-help 邮件列表中提出的问题](http://r.789695.n4.nabble.com/top-10-n-values-for-each-classes-tt4658074.html#a4658095)的回应。

[这里有*很多*](https://stackoverflow.com/search?q=top+value+by+group)关于如何通过使用来按组查找最高值[的示例](https://stackoverflow.com/search?q=top+value+by+group)，所以我想通过使用 R包`sql`来转换这些知识很容易。`sqldf`

一个例子：当`mtcars`被 分组时`cyl`，这里是每个不同值的前三个记录`cyl`。请注意，在这种情况下不包括关系，但最好展示一些不同的方式来处理关系。

```
 mpg cyl  disp  hp drat    wt  qsec vs am gear carb ranks
Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1   2.0
Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2   1.0
Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1   2.0
Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4   3.0
Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4   1.0
Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4   1.5
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4   1.5
Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4   3.0 
```

如何找到每组的顶部或底部（最大或最小）N条记录？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-10T17:09:59.547

这似乎更直接，`data.table`因为它在设置密钥时执行排序。

所以，如果我要按排序（升序）获得前 3 条记录，那么，

```
require(data.table)
d <- data.table(mtcars, key="cyl")
d[, head(.SD, 3), by=cyl] 
```

可以。

And if you want the descending order

```
d[, tail(.SD, 3), by=cyl] # Thanks @MatthewDowle 
```

**Edit:** To *sort out ties* using `mpg` column:

```
d <- data.table(mtcars, key="cyl")
d.out <- d[, .SD[mpg %in% head(sort(unique(mpg)), 3)], by=cyl]

#     cyl  mpg  disp  hp drat    wt  qsec vs am gear carb rank
#  1:   4 22.8 108.0  93 3.85 2.320 18.61  1  1    4    1   11
#  2:   4 22.8 140.8  95 3.92 3.150 22.90  1  0    4    2    1
#  3:   4 21.5 120.1  97 3.70 2.465 20.01  1  0    3    1    8
#  4:   4 21.4 121.0 109 4.11 2.780 18.60  1  1    4    2    6
#  5:   6 18.1 225.0 105 2.76 3.460 20.22  1  0    3    1    7
#  6:   6 19.2 167.6 123 3.92 3.440 18.30  1  0    4    4    1
#  7:   6 17.8 167.6 123 3.92 3.440 18.90  1  0    4    4    2
#  8:   8 14.3 360.0 245 3.21 3.570 15.84  0  0    3    4    7
#  9:   8 10.4 472.0 205 2.93 5.250 17.98  0  0    3    4   14
# 10:   8 10.4 460.0 215 3.00 5.424 17.82  0  0    3    4    5
# 11:   8 13.3 350.0 245 3.73 3.840 15.41  0  0    3    4    3

# and for last N elements, of course it is straightforward
d.out <- d[, .SD[mpg %in% tail(sort(unique(mpg)), 3)], by=cyl] 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-07-12T10:04:27.677

`dplyr` does the trick

```
mtcars %>% 
arrange(desc(mpg)) %>% 
group_by(cyl) %>% slice(1:2)

 mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
  <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>
1  33.9     4  71.1    65  4.22 1.835 19.90     1     1     4     1
2  32.4     4  78.7    66  4.08 2.200 19.47     1     1     4     1
3  21.4     6 258.0   110  3.08 3.215 19.44     1     0     3     1
4  21.0     6 160.0   110  3.90 2.620 16.46     0     1     4     4
5  19.2     8 400.0   175  3.08 3.845 17.05     0     0     3     2
6  18.7     8 360.0   175  3.15 3.440 17.02     0     0     3     2 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-02-10T17:45:13.777

Just sort by whatever (mpg for example, question is not clear on this)

```
mt <- mtcars[order(mtcars$mpg), ] 
```

then use the by function to get the top n rows in each group

```
d <- by(mt, mt["cyl"], head, n=4) 
```

If you want the result to be a data.frame:

```
Reduce(rbind, d) 
```

**Edit:** Handling ties is more difficult, but if all ties are desired:

```
by(mt, mt["cyl"], function(x) x[rank(x$mpg) %in% sort(unique(rank(x$mpg)))[1:4], ]) 
```

Another approach is to break ties based on some other information, e.g.,

```
mt <- mtcars[order(mtcars$mpg, mtcars$hp), ]
by(mt, mt["cyl"], head, n=4) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-10-29T10:00:50.920

There are at least 4 ways to do this thing, however,each has some difference. We using u_id to group and using lift value to order/sort

**1 dplyr traditional way**

```
library(dplyr)
top10_final_subset1 = final_subset %>% arrange(desc(lift)) %>% group_by(u_id) %>% slice(1:10) 
```

and if you switch the order of arrange(desc(lift)) and group_by(u_id) the result is essential the same.And if there is tie for equal lift value,it will slice to make sure each group has no more than 10 values, if you only have 5 lift value in the group, it will only gives you 5 results for that group.

**2 dplyr topN way**

```
library(dplyr)
top10_final_subset2 = final_subset %>% group_by(u_id) %>% top_n(10,lift) 
```

this one if you have tie in lift value, say 15 same lift for the same u_id, you will got all 15 observations

**3 data.table tail way**

```
library(data.table)
final_subset = data.table(final_subset,key = "lift")
top10_final_subset3 = final_subset[,tail(.SD,10),,by = c("u_id")] 
```

It has the same row numbers as the first way, however, there are some rows are different, I guess they are using diff random algorithm dealing with tie.

**4 data.table .SD way**

```
library(data.table)
top10_final_subset4 = final_subset[,.SD[order(lift,decreasing = TRUE),][1:10],by = "u_id"] 
```

This way is the most "uniform" way,if in a group there are only 5 observation it will repeat value to make it to 10 observations and if there are ties it will still slice and only hold for 10 observations.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-10T18:34:04.197

If there were a tie at the fourth position for mtcars$mpg then this should return all the ties:

```
top_mpg <- mtcars[ mtcars$mpg >= mtcars$mpg[order(mtcars$mpg, decreasing=TRUE)][4] , ]

> top_mpg
                mpg cyl disp  hp drat    wt  qsec vs am gear carb
Fiat 128       32.4   4 78.7  66 4.08 2.200 19.47  1  1    4    1
Honda Civic    30.4   4 75.7  52 4.93 1.615 18.52  1  1    4    2
Toyota Corolla 33.9   4 71.1  65 4.22 1.835 19.90  1  1    4    1
Lotus Europa   30.4   4 95.1 113 3.77 1.513 16.90  1  1    5    2 
```

Since there is a tie at the 3-4 position you can test it by changing 4 to a 3, and it still returns 4 items. This is logical indexing and you might need to add a clause that removes the NA's or wrap which() around the logical expression. It's not much more difficult to do this "by" cyl:

```
 Reduce(rbind,  by(mtcars, mtcars$cyl, 
        function(d) d[ d$mpg >= d$mpg[order(d$mpg, decreasing=TRUE)][4] , ]) )
#-------------
                   mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Fiat 128          32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
Honda Civic       30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
Toyota Corolla    33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
Lotus Europa      30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
Mazda RX4         21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Hornet 4 Drive    21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Ferrari Dino      19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Merc 450SE        16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
Merc 450SL        17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
Pontiac Firebird  19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2 
```

Incorporating my suggestion to @Ista:

```
Reduce(rbind,  by(mtcars, mtcars$cyl, function(d) d[ d$mpg <= sort( d$mpg )[3] , ]) ) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-06-15T16:33:04.193

You can write a function that splits the database by a factor, orders by another desired variable, extract the number of rows you want in each factor (category) and combine these into a database.

```
top<-function(x, num, c1,c2){
sorted<-x[with(x,order(x[,c1],x[,c2],decreasing=T)),]
splits<-split(sorted,sorted[,c1])
df<-lapply(splits,head,num)
do.call(rbind.data.frame,df)} 
```

**x** is the dataframe;

**num** is the number of number of rows you would like to see;

**c1** is the column *number* of the variable you would like to split by;

**c2** is the column *number* of the variable you would like to rank by or handle ties.

Using the mtcars data, the function extracts the **3** heaviest cars (mtcars$wt is the **6**th column) in each cylinder class (mtcars$cyl is the **2**nd column)

```
 top(mtcars,3,2,6)
                         mpg cyl  disp  hp drat    wt  qsec vs am gear carb
 4.Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
 4.Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
 4.Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
 6.Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
 6.Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
 6.Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
 8.Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
 8.Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
 8.Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4 
```

You can also easily get the lightest in a class by changing **head** in the lapply function to **tail** OR by removing the decreasing=T argument in the **order** function which will return it to its default, decreasing=F.

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-06-14T16:24:58.610

Since `dplyr 1.0.0`, the `slice_max()`/`slice_min()` functions were implemented:

```
mtcars %>%
 group_by(cyl) %>%
 slice_max(mpg, n = 2, with_ties = FALSE)

    mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
  <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>
1  33.9     4  71.1    65  4.22  1.84  19.9     1     1     4     1
2  32.4     4  78.7    66  4.08  2.2   19.5     1     1     4     1
3  21.4     6 258     110  3.08  3.22  19.4     1     0     3     1
4  21       6 160     110  3.9   2.62  16.5     0     1     4     4
5  19.2     8 400     175  3.08  3.84  17.0     0     0     3     2
6  18.7     8 360     175  3.15  3.44  17.0     0     0     3     2 
```

The documentation on `with_ties` parameter:

> Should ties be kept together? The default, TRUE, may return more rows than you request. Use FALSE to ignore ties, and return the first n rows.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-09-22T14:20:46.703

I prefer @Ista solution, cause needs no extra package and is simple.
A modification of the `data.table` solution also solve my problem, and is more general.
My data.frame is

```
> str(df)
'data.frame':   579 obs. of  11 variables:
 $ trees     : num  2000 5000 1000 2000 1000 1000 2000 5000 5000 1000 ...
 $ interDepth: num  2 3 5 2 3 4 4 2 3 5 ...
 $ minObs    : num  6 4 1 4 10 6 10 10 6 6 ...
 $ shrinkage : num  0.01 0.001 0.01 0.005 0.01 0.01 0.001 0.005 0.005 0.001     ...
 $ G1        : num  0 2 2 2 2 2 8 8 8 8 ...
 $ G2        : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ qx        : num  0.44 0.43 0.419 0.439 0.43 ...
 $ efet      : num  43.1 40.6 39.9 39.2 38.6 ...
 $ prec      : num  0.606 0.593 0.587 0.582 0.574 0.578 0.576 0.579 0.588 0.585 ...
 $ sens      : num  0.575 0.57 0.573 0.575 0.587 0.574 0.576 0.566 0.542 0.545 ...
 $ acu       : num  0.631 0.645 0.647 0.648 0.655 0.647 0.619 0.611 0.591 0.594 ... 
```

The `data.table` solution needs `order` on `i` to do the job:

```
> require(data.table)
> dt1 <- data.table(df)
> dt2 = dt1[order(-efet, G1, G2), head(.SD, 3), by = .(G1, G2)]
> dt2
    G1    G2 trees interDepth minObs shrinkage        qx   efet  prec  sens   acu
 1:  0 FALSE  2000          2      6     0.010 0.4395953 43.066 0.606 0.575 0.631
 2:  0 FALSE  2000          5      1     0.005 0.4294718 37.554 0.583 0.548 0.607
 3:  0 FALSE  5000          2      6     0.005 0.4395753 36.981 0.575 0.559 0.616
 4:  2 FALSE  5000          3      4     0.001 0.4296346 40.624 0.593 0.570 0.645
 5:  2 FALSE  1000          5      1     0.010 0.4186802 39.915 0.587 0.573 0.647
 6:  2 FALSE  2000          2      4     0.005 0.4390503 39.164 0.582 0.575 0.648
 7:  8 FALSE  2000          4     10     0.001 0.4511349 38.240 0.576 0.576 0.619
 8:  8 FALSE  5000          2     10     0.005 0.4469665 38.064 0.579 0.566 0.611
 9:  8 FALSE  5000          3      6     0.005 0.4426952 37.888 0.588 0.542 0.591
10:  2  TRUE  5000          3      4     0.001 0.3812878 21.057 0.510 0.479 0.615
11:  2  TRUE  2000          3     10     0.005 0.3790536 20.127 0.507 0.470 0.608
12:  2  TRUE  1000          5      4     0.001 0.3690911 18.981 0.500 0.475 0.611
13:  8  TRUE  5000          6     10     0.010 0.2865042 16.870 0.497 0.435 0.635
14:  0  TRUE  2000          6      4     0.010 0.3192862  9.779 0.460 0.433 0.621 
```

By some reason, it does not order the way pointed (probably because ordering by the groups). So, another ordering is done.

```
> dt2[order(G1, G2)]
    G1    G2 trees interDepth minObs shrinkage        qx   efet  prec  sens   acu
 1:  0 FALSE  2000          2      6     0.010 0.4395953 43.066 0.606 0.575 0.631
 2:  0 FALSE  2000          5      1     0.005 0.4294718 37.554 0.583 0.548 0.607
 3:  0 FALSE  5000          2      6     0.005 0.4395753 36.981 0.575 0.559 0.616
 4:  0  TRUE  2000          6      4     0.010 0.3192862  9.779 0.460 0.433 0.621
 5:  2 FALSE  5000          3      4     0.001 0.4296346 40.624 0.593 0.570 0.645
 6:  2 FALSE  1000          5      1     0.010 0.4186802 39.915 0.587 0.573 0.647
 7:  2 FALSE  2000          2      4     0.005 0.4390503 39.164 0.582 0.575 0.648
 8:  2  TRUE  5000          3      4     0.001 0.3812878 21.057 0.510 0.479 0.615
 9:  2  TRUE  2000          3     10     0.005 0.3790536 20.127 0.507 0.470 0.608
10:  2  TRUE  1000          5      4     0.001 0.3690911 18.981 0.500 0.475 0.611
11:  8 FALSE  2000          4     10     0.001 0.4511349 38.240 0.576 0.576 0.619
12:  8 FALSE  5000          2     10     0.005 0.4469665 38.064 0.579 0.566 0.611
13:  8 FALSE  5000          3      6     0.005 0.4426952 37.888 0.588 0.542 0.591
14:  8  TRUE  5000          6     10     0.010 0.2865042 16.870 0.497 0.435 0.635 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-11-02T04:15:39.540

`data.table` way for picking the lowest 3 mpg per group:

```
data("mtcars")
setDT(mtcars)[order(mpg), head(.SD, 3), by = "cyl"] 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-10T16:59:27.717

```
# start with the mtcars data frame (included with your installation of R)
mtcars

# pick your 'group by' variable
gbv <- 'cyl'
# IMPORTANT NOTE: you can only include one group by variable here
# ..if you need more, the `order` function below will need
# one per inputted parameter: order( x$cyl , x$am )

# choose whether you want to find the minimum or maximum
find.maximum <- FALSE

# create a simple data frame with only two columns
x <- mtcars

# order it based on 
x <- x[ order( x[ , gbv ] , decreasing = find.maximum ) , ]

# figure out the ranks of each miles-per-gallon, within cyl columns
if ( find.maximum ){
    # note the negative sign (which changes the order of mpg)
    # *and* the `rev` function, which flips the order of the `tapply` result
    x$ranks <- unlist( rev( tapply( -x$mpg , x[ , gbv ] , rank ) ) )
} else {
    x$ranks <- unlist( tapply( x$mpg , x[ , gbv ] , rank ) )
}
# now just subset it based on the rank column
result <- x[ x$ranks <= 3 , ]

# look at your results
result

# done!

# but note only *two* values where cyl == 4 were kept,
# because there was a tie for third smallest, and the `rank` function gave both '3.5'
x[ x$ranks == 3.5 , ]

# ..if you instead wanted to keep all ties, you could change the
# tie-breaking behavior of the `rank` function.
# using the `min` *includes* all ties.  using `max` would *exclude* all ties
if ( find.maximum ){
    # note the negative sign (which changes the order of mpg)
    # *and* the `rev` function, which flips the order of the `tapply` result
    x$ranks <- unlist( rev( tapply( -x$mpg , x[ , gbv ] , rank , ties.method = 'min' ) ) )
} else {
    x$ranks <- unlist( tapply( x$mpg , x[ , gbv ] , rank , ties.method = 'min' ) )
}
# and there are even more options..
# see ?rank for more methods

# now just subset it based on the rank column
result <- x[ x$ranks <= 3 , ]

# look at your results
result
# and notice *both* cyl == 4 and ranks == 3 were included in your results
# because of the tie-breaking behavior chosen. 
```

# ssis - 200-300 个表的 SSIS 2012 增量负载

> ID：14800164
> 
> 赞同：0
> 
> 时间：2013-02-10T16:59:33.530
> 
> 标签：ssis

我的项目开始于 2 个月前，我已经将运行的每个进程的 100 多个表传输到数据仓库。

我可能很快就会达到 200-300 张桌子，并且不相信我目前的开发方法会扩展。

我仍然有 3 周的版本（产品开发冲刺），并且表仍在更改其结构（数据类型、列名、新列等），这让我非常头疼，所以我在最初的几周内忽略了它。

我怎么忽略了它？

1.  在我将它们带到 ODS（操作数据存储）/MRR 层之前截断所有表
2.  将所有数据从源系统完全带到 MRR 层
3.  仅创建维度“增量”表（每周仍会随着新列和更改的数据类型而变化）
4.  动态创建和填充临时表和仓库表。

现在我的模型已经开始形成，所以我必须处理增量负载

1.  这似乎很容易，因为我对每条记录都有更新时间，但我的源系统中也有删除，我该如何处理？
2.  我考虑过 CDC，但这会很耗时，因为我必须逐个表格地放置它
3.  对于从 100-200 张桌子开始的人有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:47:08.093

我尽可能长时间地遵循类似于您的“忽略它”设计的风格。完全刷新使您的设计保持敏捷，并且可以达到每分钟 100 万行的速度。

当这最终用完并且源系统中存在删除时，我按照与数据专家的约定在某个日期范围（例如 3 个月）内删除我的所有数据。您可能必须每天将删除分成几块。我还尝试完全刷新这些数据，例如每个周末（因为数据专家经常被误导）。

# jquery - 有什么方法可以预先计算元素在 Ctrl+ 上的换行吗？

> ID：14800167
> 
> 赞同：0
> 
> 时间：2013-02-10T16:59:45.127
> 
> 标签：jquery, css, user-interface, word-wrap

我有一个网页，其中某个`DIV`（称为`content`）内的 HTML 被转换为 PDF。`content`div 中可以有更多的div，每个 div 都包含文本，并且绝对定位。这些中的每一个`divs`都称为“文本框”

问题是 PDF**结果**与`content`. 有时文本会在 PDF 中换成两行，尽管在 HTML 中并非如此。当满足以下条件时会发生这种情况：

*   包含`textbox`文本在当前视图中似乎很好，但如果用户要放大（使用 Ctrl+），则文本将换行到其 div 中的下一行。

所以我需要做的是以某种方式检测*如果 HTML 被放大，会有一个 text-wrap*，如果是这样，那么将元素的宽度扩大一点，这样 PDF 就不会最终换行到一个新队。

有什么方法可以检测到吗？或者其他任何达到相同效果的东西？

# mysql - 如何将函数的空行返回值转换为mysql中的空表？

> ID：14800170
> 
> 赞同：0
> 
> 时间：2013-02-10T16:59:51.300
> 
> 标签：mysql

我有一个返回字符串或 NULL 的函数。为了得到一个空表而不是空行，我做了以下事情：

```
SELECT destination
FROM (
  SELECT dynamicAlias(
    'teststring'
  ) AS destination
) AS d2
WHERE destination IS NOT NULL
LIMIT 1 
```

有没有更好的办法？如果有帮助，我可以更改*dynamicAlias()*以返回一个空字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:03:21.887

关于什么：

```
SELECT dynamicAlias(
    'teststring'
  ) AS destination
HAVING destination IS NOT NULL
LIMIT 1 
```

# php - 使用 html、jquery 和 php 消失的注销按钮

> ID：14800175
> 
> 赞同：0
> 
> 时间：2013-02-10T17:00:28.170
> 
> 标签：php, jquery, logout

我是一个非常环保的程序员，在网络上的任何地方都找不到我的问题的答案。感谢您向我发送的任何帮助！我正在尝试为允许上传并允许用户注销的用户创建一个基本的登录页面。在登录期间，我开始一个会话。有用。对于上传和注销，我使用 jquery.form.js 库来利用表单功能。对于我的代码的上传部分，一切正常。用户可以上传任何类型的图片，按钮在上传过程中被禁用，然后在成功后重新激活以进行新的上传。但是，对于注销部分，在单击注销按钮并销毁会话后，注销按钮就消失了。我认为这可能与会话销毁有关，但即使在我的 php 中没有它，按钮也消失了。我按照 html、js 和 php 的顺序复制了下面代码的注销部分。有任何想法吗？谢谢！

```
<html>
    <head>
        <title>Sample</title>
        <meta http-equiv= "Content-Type" content="text/html; charset=UTF-8">
            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
            <script type = "text/javascript" src = "js/jquery.form.js"></script>    
            <script type = "text/javascript" src = "js/xmlRequest.js"></script>
            <script>xmlRequest = new xmlRequest();</script>
            <script type = "text/javascript" src = "js/fileUpload.js"></script>
            <script>fileUpload = new fileUpload();</script>
    </head>
    <body>
        <div id = 'userLogout'>
            <form action="php/logout.php" id = "logoutSection" enctype = "multipart/form-data" method = "post" >
                <button type="submit" id="logoutButton">Close!</button>
            </form>
        </div>

        <div id = 'logOutOutput'>
        </div>
    </body>
</html>

function fileUpload()
{   
$(document).ready(function()
    {   
        $('#logoutSection').on('submit',function(a){

                //prevent default action of going to new page.
                a.preventDefault();
                $('#logoutButton').attr('disabled','');
                $(this).ajaxSubmit({
                    target: '#userLogout',
                    success: afterLogout//output a thank you message
                });
                $('#loginForm').show();
                $('#logOutOutput').append("<br>Thanks for checking us out!<br>");
            });
    });

    function afterLogout()
    {
        $('#logoutSection').resetForm();
        $('#logoutButton').removeAttr('disabled');
    }
}

<?php
    echo "<br>Goner<br>";
    session_start();//always required for sessions
    session_destroy();//logs out
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:58:23.167

我相信虽然我不确定登录后按钮消失的原因是因为您使用`ajaxSubmit`的选项`target`设置为`#userLogout`指向表单的父 div。

ajaxSubmit 成功后，会将`<div id='userLogout'> ... </div>`ajax 操作的结果替换为 的内容。

我会这样： `<div id='output'></div> <div id = 'userLogout'> <form action="php/logout.php" id = "logoutSection" enctype = "multipart/form-data" method = "post" > <button type="submit" id="logoutButton">Close!</button> </form> </div>`

并将 ajaxSubmit 目标更改为`target: 'output'`

阅读此 [http://www.justwebdevelopment.com/blog/ajaxform-and-ajaxsubmit-options/](http://www.justwebdevelopment.com/blog/ajaxform-and-ajaxsubmit-options/) 目标 标识页面中要使用服务器响应更新的元素。该值可以指定为 jQuery 选择字符串、jQuery 对象或 DOM 元素。默认值：空

# indexeddb - IndexedDB 按 id 更新

> ID：14800180
> 
> 赞同：0
> 
> 时间：2013-02-10T17:01:17.590
> 
> 标签：indexeddb

我正在尝试更新我的 indexedDB 记录，但出现此错误

> DataError：提供给操作的数据不符合要求。源文件

我已经尝试过[了，](https://stackoverflow.com/questions/11217309/how-to-update-an-html5-indexeddb-record?answertab=active#tab-top)但没有奏效

这是我的功能：

```
function updNotes(text, timestamp, blob)
{
var obj = {text: text, timestamp: timestamp};
if (typeof blob != 'undefined')
obj.image = blob;
store = getObjectStore("notes", 'readwrite');
objKeyRange = IDBKeyRange.only(+objtoedit);
req = store.openCursor(objKeyRange);
req.onsuccess = function(evt){
  var cursor = evt.target.result;
  console.log(cursor.key);
  //do the update
  var objRequest = cursor.update(obj);
  objRequest.onsuccess = function(ev){
    console.log('Success');
    };
  objRequest.onerror = function(ev){
    console.log('Error');
    };
  };
  req.onerror = function(evt){
    console.log('Error');
  }; 
```

任何人都可以帮我解决这个问题吗？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:33:39.593

我想出了如何做到这一点。这个功能解决了我的问题。

```
function updNotes(id, text, timestamp, blob)
{
console.log(id);
store = getObjectStore("notes", 'readwrite');
req = store.get(+id);
req.onsuccess = function(evt){
  var data = evt.target.result;
  data.text = text;
  data.timestamp = timestamp;
  if (typeof blob != 'undefined')
  data.image = blob;
  //do the update
  var objRequest = store.put(data);
  objRequest.onsuccess = function(ev){
    console.log('Success in updating record');
    };
  objRequest.onerror = function(ev){
    console.log('Error in updating record');
    };
  };
  req.onerror = function(evt){
    console.log('Error in retrieving record');
  };

} 
```

# c# - 将字符串 [] 的输出参数作为 IEnumerable

> ID：14800185
> 
> 赞同：4
> 
> 时间：2013-02-10T17:01:47.120
> 
> 标签：c#, ienumerable, out

假设我们有一个方法：

```
public void SomeMethod(out string[] someArray) { // ... } 
```

有没有办法做类似的事情：

```
IEnumerable<string> result;

SomeMethod(out result); 
```

**编辑：**重点是，我不想将输出值绑定到`string[]`，即使方法声明更改为 ，我也希望代码能够工作`SomeMethod(out List<string> outputValue)`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T19:52:59.087

不允许更改 out 参数的类型，因为无法保证类型安全。这在[Eric Lippert 的博客](http://blogs.msdn.com/b/ericlippert/archive/2009/09/21/why-do-ref-and-out-parameters-not-allow-type-variation.aspx)中有详细解释。

这是一个代码示例，如果允许的话，如何破坏类型安全：

```
IEnumerable<string> result;

public void Test()
{
   SomeMethod(out result);
}

public void SomeMethod(out string[] someArray)
{
   someArray = new string[];
   ChangeTheType();

   int n = someArray.Length;    // BANG!! - someArray is now a List<string>
}

public void ChangeTheType()
{
    result = new List<string>();
} 
```

显然，如果结果与对 SomeMethod 的调用不在同一范围内，这只是一个问题，但编译器不会对此进行检查。这是不允许的。

将方法签名更改为`public void SomeMethod(out IEnumerable<string> someStrings)`. 您可以将 a 分配`string[]`给`someStrings`inside `SomeMethod`，如果您以后决定使用 a `List<string>`，您也可以在不中断呼叫的情况下分配它。

就我个人而言，我会首先避免使用 out 参数：`public string[] SomeMethod()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T17:24:50.627

我确定这不是最好的方法，但是您可以编写另一种方法来为您完成这项工作：

```
public class ClassA
    {
        private void SomeMethod(out IEnumerable<string> result)
        {
            string[] res;
            SomeMethod(out res);
            result = res;
        }

        public void SomeMethod(out string[] someArray)
        {
            someArray = new string[2];
        }

        void Test()
        {
            IEnumerable<string> result;
            SomeMethod(out result);
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T19:46:24.150

你不能这样做，也没有办法解决。原因之一是 CLR 不支持`out`，仅支持`ref`. So`out`实际上表示为`ref`，并带有一些由 C# 编译器添加的特殊规则。

最简单（也是显而易见）的方法是创建一个单独的变量：

```
string[] resultArray;

SomeMethod(out resultArray);
IEnumerable<string> result = resultArray; 
```

您可以创建一个辅助方法来为您执行该转换：

```
public delegate void ActionWithOut<T>(out T result);

public static void ConvertOut<TBase, TDerived>(
    ActionWithOut<TDerived> method, out TBase result)
    where TDerived : TBase
{
    TDerived derived;
    method(out derived);
    result = derived;
} 
```

用法：

```
IEnumerable<string> result;
ConvertOut<IEnumerable<string>, string[]>(SomeMethod, out result); 
```

但是对于每个数量的参数，您都需要一个单独的重载（和委托类型），并且代码实际上看起来并没有好多少。（类型参数是必需的，类型推断似乎不适用于此代码。）

# c# - 在 1000 万行中查找记录

> ID：14800186
> 
> 赞同：0
> 
> 时间：2013-02-10T17:01:49.910
> 
> 标签：c#, sql-server, tsql, large-data

我有一个逗号分隔格式的文本文件。每行有两列，每列都有整数值。喜欢

```
12334,23433
23234,45663
234422,324545
324543,23433
143233,23433
..... 
```

重复第二列中的值。我需要完成的是找到第一列中第二列具有相同值的所有值并将它们表示为一行。就像上面的数据：

```
23433 12334,324543,143233
45663 23234
324545 234422 
```

我所做的如下：

1.  使用逗号 (,) 作为分隔符将文本文件导入 SQL Server 表。
2.  从每行代码中读取文本文件。
3.  在逗号(,) 的基础上分割行并使用第二列值将查询发送到 SQL 表。
4.  将结果存储在字典数据结构中，其中键是第二列，并将所有结果连接到第一列值。
5.  全部处理完毕，遍历字典，写入文件。

这肯定需要太多时间。我已经用 C# 编写了代码。T-SQL 中的任何解决方案都可以使用。

任何帮助优化它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T17:23:54.427

只要数据很小，在纯 C# 中执行此操作应该又快又容易。无需将 CSV 文件拉入 SQL 数据库。

只要文件适合您的 RAM，最大的成本应该是 IO，而不是处理。如果有 1000 万行，该文件应该有大约 100 MB，并且可能需要一秒钟的时间来处理。

```
var lines = File.ReadLines(inputFilename);

var table = lines.Select(line => line.Split(','));
var groups = table.GroupBy(columns => columns[1]);
var output = groups.Select(g => g.Key + " " + string.Join(",", g.Select(columns=>columns[0])));

File.WriteAllLines(outputFilename, output); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:15:03.007

只需使用 order by 一次处理一个 col2

```
select col1, col2 
from table  
order by col2, col1 
```

然后当您获得 col2 的新值时，只需写出该行

```
Int col2Last = 0;  // assume 0 is not a valid value
StringBuilder sb = new string builder();

    while (rdr.read());
    {
        col1 = rdr.GetInt(0);
        col2 = rdr.GetInt(1);
        if(col2 != col2Last and col2Last !=0)
        {
             Console.WriteLine(col2Last.ToString() + " " + sb.ToString());
             sb.clear();
        }
        if (sb.Lenght > 0) sb.Append(",");
        sb.Append(col1.ToString());
        col2Last = col2;
    }
    Console.WriteLine(col2Last.ToString() + " " + sb.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:21:19.120

如果您已经将数据导入到表中，为什么不尝试这种方式：

```
declare @t table(c1 int, c2 int)
insert into @t values
(12334,23433),
(23234,45663),
(234422,324545),
(324543,23433),
(143233,23433)

select c2, replace((select cast(c1 as varchar) as 'data()' from @t where c2=t.c2 for xml path('')),' ',', ')
from 
@t t
group by c2 
```

# hardware - 为什么这个伪随机数生成器 (LFSR) 的输出如此可预测？

> ID：14800189
> 
> 赞同：0
> 
> 时间：2013-02-10T17:02:08.773
> 
> 标签：hardware, verilog, fpga, hdl

最近我在这里问，如何在硬件中生成随机数，并被告知使用 LFSR。这将是随机的，但会在某个值后开始重复。

问题是生成的随机数是如此可预测，以至于下一个值很容易被猜到。例如检查下面的模拟：

![在此处输入图像描述](../Images/494e40ab54fd9b21dc607a5b17e51bea.png)

下一个“随机”数字可以通过将前一个数字与自身 +1 相加来猜测。有人可以验证这是否正常且可以预期。

这是我用于 LFSR 的代码：

```
 module LFSR(
    input clock,
    input reset,
     output [12:0] rnd 
    );

wire feedback = rnd[12] ^ rnd[3] ^ rnd[2] ^ rnd[0]; 

reg [12:0] random;

always @ (posedge clock or posedge reset)
begin
    if (reset)
        random <= 13'hF; //An LFSR cannot have an all 0 state, thus reset to FF
    else
        random <= {random[11:0], feedback}; //shift left the xor'd every posedge clock
end

assign rnd = random;

endmodule 
```

异或位的位置取自这里：[表格第 5 页](http://www.xilinx.com/support/documentation/application_notes/xapp052.pdf)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T17:50:17.793

LFSR每个时钟只产生**一个随机位。**它不会在每个周期生成一个新的（在您的情况下）13 位数字。中的其他 12 位`rnd`只是旧的随机值，因此不会显得很随机。

如果您需要一个 13 位随机数，那么您必须每 13 个周期对 LFSR 进行一次采样，或者将 13 个 LFSR 与不同的种子并行放置，并使用 13 个零位作为您的随机数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-10T22:17:05.803

LFSR 绝对不是任何真正意义上的“随机”。引用冯诺依曼的话：“任何考虑产生随机数字的算术方法的人，当然都处于一种罪恶状态。” 我没有查看您选择的反馈项是否最大，这意味着它们将提供长度等于 LFSR 中的位数的序列，但这是您能做的最好的。

所以是的，你的 LFSR 中的下一个值是非常可预测的。如果您需要更安全“随机”的东西，则需要研究加密方法，这些方法当然取决于密钥，并且计算量也比 LFSR 高得多。不过，你“得到你所支付的”。

顺便说一句，一个你可以得到可预测的“随机”数字的系统本身就非常有用。通常用于模拟目的。

# python - 带有参数的 ajax.py 中的 Dajax/Dajaxice 保存对象

> ID：14800191
> 
> 赞同：1
> 
> 时间：2013-02-10T17:02:31.267
> 
> 标签：python, django, jquery, dajaxice, dajax

我已经完成了设置，并且 dajaxproject.com 上的所有示例都运行良好，但是我现在在使用我在更复杂的用例中学到的知识时遇到了问题。我想将几个参数与表单中的文本一起传递给 ajax 函数，并使用这些数据创建一个对象。

如果有人可以帮助我，将不胜感激。

我正在使用 jquery 和 jquery.ba-serializeobject.min.js。

**阿贾克斯.py：**

```
@dajaxice_register
def save_comment(req, form, user_username, other_username):
    dajax = Dajax()
    comment_form = CreateCommentForm(deserialize_form(form))
    if comment_form.is_valid():
        text = comment_form.cleaned_data['text']
        user = User.objects.get(username=user_username)
        other_user = User.objects.get(username=other_username)
        other_profile = Profile.objects.get(user=other_user)
        comment = other_profile.comments.objects.create(owner=user, text=text)
        comment.save()
        return dajax.json() 
```

**JS：**

```
<script type="text/javascript">
        function add_comment(){
          var user = '{{ person.user.username }}';
          var other = '{{ other.user.username }}';
          var data = $('#comment_form').serialize(true);
          Dajaxice.profiles.save_comment(Dajax.process, {'form': data, 'user_username': user, 'other_username': other });
          return false;
        }
    </script> 
```

**HTML：**

```
<div><h4>Post Comment:</h4>
                <div id="comment_form_errors"></div>
                <form action="" id="comment_form" accept-charset="utf-8" method="post">
                    {% csrf_token %}

                    {{ commentform.as_p }}

                    <p><input class="btn profile-comment-submit" id="submit_profile_comment" onclick="add_comment()" type="submit" alt="register" /></p>
                <form>
            </div> 
```

在 Chrome 的调试控制台中，我得到的唯一错误是 Dajaxice：出了点问题。

如果我遗漏了任何可能重要的内容，请告诉我。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:13:27.037

您发送表单的方式对于 Dajax 的工作至关重要。我已成功使用[http://benalman.com/projects/jquery-misc-plugins/#serializeobject](http://benalman.com/projects/jquery-misc-plugins/#serializeobject)和以下 javascript：

```
jQuery('form').submit(function(e) {
  e.preventDefault()
    var data = jQuery(this).serializeObject();
    Dajaxice.app.app_name.function_name(Dajax.process,{'form':data});
    return false;
}); 
```

当我没有看到您的表格时，要全面了解问题有点困难。但我建议您创建一个表单 CommentForm 并在表单初始化的隐藏字段中填充 user 和 other_user 。这将使代码不那么复杂

您的保存功能将非常简单：

```
@dajaxice_register
def function_name(request, form):
   dajax = Dajax()

   form = CommentForm(form)

   if form.is_valid():
      form.save()
   return dajax.json() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T04:43:58.163

我发现没有办法让它工作。我认为这是 Dajaxice 的问题，您可以做的是避免 request.POST QueryDict 而是使用 request.raw_post_data。您需要执行与 urlparse 相反的操作：

```
data = urlparse.parse_qs(request.raw_post_data) 
```

然后你需要反序列化它。

```
data = json.loads(data.get('argv')) 
```

这将返回一个参数列表，使用列表中的第一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:01:08.237

对我来说唯一突出的（而且我不是专家，所以谁知道......）是在你的 ajax.py 中。我认为应该是：

```
@dajaxice_register
def save_comment(req, form, user_username, other_username):
    dajax = Dajax()
    comment_form = CreateCommentForm(deserialize_form(form))
    if comment_form.is_valid():
        text = comment_form.cleaned_data['text']
        user = User.objects.get(username=user_username)
        other_user = User.objects.get(username=other_username)
        other_profile = Profile.objects.get(user=other_user)
        comment = Comment(owner=user, text=text)
        comment.save()
        other_profile.comments.add(comment)
        # I don't think you need to other_profile.save(), but you can if you want
        return dajax.json() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T03:33:39.820

我可以在这里看到一些东西，但是看不到`CreateCommentForm()`它为其中一些创建表单的模型可能是基于假设的。还假设表单的序列化没有任何问题。

```
@dajaxice_register
def save_comment(req, form, user_username, other_username):
    dajax = Dajax()

    user = User.objects.get(username=user_username)
    other_user = User.objects.get(username=other_username)
    other_profile = Profile.objects.get(user=other_user)

    # Required fields of a form must be checked before calling is_valid() or is_valid fails.
    comment = Comments(owner=user)
    comment_form = CreateCommentForm(deserialize_form(form), instance=comment)
    if comment_form.is_valid():
        comment_form.save()
        dajax.alert('Form is valid')
    else:
        dajax.alert('Form is invalid')
        for error in comment_form.errors:
            dajax.add_css_class('#id_%s' % error, 'error')

    # Dajax needs something added to it before the dajax.json() can be returned.
    return dajax.json() 
```

表单片段可以在这里参考：[Django using a subset of fields on the form](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form) and the dajax return pieces can be more detail in this dajax example: [Dajax form validation example](http://www.dajaxproject.com/fullform/)

# android - 'IllegalStateException: Activity 已被销毁'当 Activity 重启后调用'getSupportFragmentManager()'

> ID：14800192
> 
> 赞同：10
> 
> 时间：2013-02-10T17:02:37.117
> 
> 标签：android, android-fragments, android-viewpager, illegalstateexception

我有一个父片段活动，它有一个包含子 ViewPager 的 ViewPager。子 ViewPager 包含每个页面的片段。我使用回调接口在这些子页面片段和顶级父片段活动之间进行通信，例如

```
public interface Callbacks {
    public void onItemSelected(Link link);
} 
```

在父片段活动中，我监听`onItemSelected`事件，例如

```
@Override
public void onItemSelected(Link link) {
    Bundle argumentsFront = new Bundle();
    argumentsFront.putParcelable(FragmentComments.ARG_ITEM_ID, link);
    fragmentComments = new FragmentComments();
    fragmentComments.setArguments(argumentsFront);
    getSupportFragmentManager().beginTransaction().replace(R.id.post_container, fragmentComments).commitAllowingStateLoss();
} 
```

现在，当应用程序首次启动时，这可以正常工作。

如果您转动设备以更改方向，则 Activity 会重新启动。所有片段都会在我使用时重新初始化`setRetainInstance(true);`（我不在子 ViewPager 的页面片段中调用 setRetainInstance(true)，因为它不受支持）。但是，如果我单击子 ViewPager 的片段中的列表项，则会收到此异常：

```
FATAL EXCEPTION: main
java.lang.IllegalStateException: Activity has been destroyed
at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1342)
at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:595)
at android.support.v4.app.BackStackRecord.commitAllowingStateLoss(BackStackRecord.java:578) 
```

有谁知道为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T04:02:37.307

当您旋转设备时，Android 会保存、销毁并重新创建您`Activity`的`ViewPager`. `Fragments`由于`ViewPager`使用了`FragmentManager`您的`Activity`，它会为您保存和重用那些`Fragments`（并且不会创建新的），因此它们将保存对您（现在已销毁）原始的旧引用`Activity`，并且您得到了`IllegalStateException`.

在你的孩子`Fragments`中，尝试这样的事情：

```
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    Log.v(TAG, "onAttach");

    // Check if parent activity implements our callback interface
    if (activity != null) {
        try {
            mParentCallback = (Callbacks) activity;
        }
        catch (ClassCastException e) {
        }
    }
} 
```

然后发生选择时：

```
if(mParentCallback != null) {
    mParentCallback.onItemSelected(selectedLink);
} 
```

由于`onAttach`作为`Fragment`生命周期的一部分被调用，您`Fragments`将在轮换时更新它们的回调引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:14:18.643

我有一个类似的问题，我认为这是因为片段被保留并保留对已销毁活动的引用，我的解决方案是在活动中保留对片段的引用，例如 Fragment myfragment = null。然后在 MyFragment 中使用以下代码：

```
 public void onAttach(Activity activity) {
        super.onAttach(activity);
        ((TestActivity)activity).contentFragment = this;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T19:49:51.500

有类似的问题。基本上，如果 ViewPager 只有几个片段，则在当前活动中存储对它们的引用。不要调用 pagerAdapter 的 getItem()，因为它会创建一个新片段并且它没有附加到任何活动，这就是我们看到“活动已被破坏”异常的原因。如果不想保留片段引用，则可以使用 findViewWithTag() 方法获取片段对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-20T14:04:55.833

在 OnPostResume 回调中提交事务为我解决了这个问题。感谢以下博文 [http://www.androiddesignpatterns.com/2013/08/fragment-transaction-commit-state-loss.html](http://www.androiddesignpatterns.com/2013/08/fragment-transaction-commit-state-loss.html)

```
@Override
protected void onPostResume() {
    super.onPostResume();
    // Commit your transactions here.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-09T00:13:39.063

我遇到了嵌套片段的问题，并且没有一个 stackoverflow 解决方案对我有用。看起来，支持库存在一个错误，当被解雇的片段仍然存储指向先前活动的指针时（因此 getFragmentManager() 只返回 null，因为它在已经销毁的活动上被调用），这就是为什么您需要自己管理指针的原因。我最终得到了以下解决方案：
1\. 在第一级片段中，我保存了指向方法中活动的指针

```
public void onAttach(Activity activity) {
        super.onAttach(activity);
        parentActivity = activity; // parentActivity is static variable
} 
```

2.在处理片段的活动中，我最终得到了以下代码：

```
private void launchFragment(Fragment fragment, Activity parent) {
            FragmentTransaction transaction;
            if(parent == null)
                transaction = mFragmentManager.beginTransaction();
            else    // for nested child fragments, workaround for Android parent pointer bug
                transaction = parent.getFragmentManager().beginTransaction();
            transaction.replace(R.id.container, fragment);
            transaction.addToBackStack(null);
            transaction.commit();
} 
```

只有当您调用二级（嵌套）片段时，您才应该传递一级片段的 parentActivity，因为在您将应用程序从前台带入后，这个错误似乎只存在于嵌套片段中。

# javascript - 似乎无法从我的脚本中的另一个谷歌电子表格中读取单元格数据

> ID：14800195
> 
> 赞同：0
> 
> 时间：2013-02-10T17:02:54.697
> 
> 标签：javascript, google-apps-script, google-sheets

这是我的脚本。它返回文件夹“我的文件夹”中每个工作表的 url，但不返回我要求的单元格值。任何人都可以看到有什么问题吗？我检查了电子表格以确保引用的单元格中有值。
`function onOpen() { var folder = DocsList.getFolder("我的文件夹"); var 内容 = 文件夹.getFiles();

```
 var file;
  var data;

  var sheet = SpreadsheetApp.getActiveSheet();
  sheet.clearContents(); 
  sheet.appendRow(["link to sheet", "Name", "Type", "Primary Contact"]); 
for (var i = 0; i < contents.length; i++) { 
  file = contents[i];
  var cellValue; 
  if (file.getFileType() === "SPREADSHEET") { 
    var sheet = SpreadsheetApp.openById(file.getId()).getSheetByName("Site Demographics");
    var value1 = sheet.getRange('B7').getValue();
    var value2 = sheet.getRange('C7').getValue();
    var value3 = sheet.getRange('H9').getValue();
    cellValue = ""+value1 + value2 + value3;
  } else {
    cellValue = null; // No Data
  }
  data = [ file.getUrl(),cellValue ]
  sheet.appendRow(data);
}
};` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:45:59.903

您似乎应该通过这样做来检查文件是否属于给定类型

```
if (file.getFileType()==DocsList.FileType.SPREADSHEET) 
```

此外，您正在重用变量`sheet`. 考虑将它的第二种用法重命名为`otherSheet`.

# android - 应用程序启动期间的android片段飘动

> ID：14800196
> 
> 赞同：0
> 
> 时间：2013-02-10T17:03:05.043
> 
> 标签：android, android-fragments, android-tabhost, android-tabs

为什么我的 Fragment 在应用程序启动时会抖动？！？

```
02-10 11:41:34.699: D/SessionDetailFragment(19272): onResume() 99
02-10 11:41:34.699: D/MPQAudioFragment(19272): onResume() 00
02-10 11:41:34.699: D/MPQAudioFragment(19272): onResume() 99
02-10 11:41:34.699: D/SessionDetailFragment(19272): onPause() 00
02-10 11:41:34.699: D/MPQAudioFragment(19272): onStop() 00 bound_flag: false
02-10 11:41:34.699: D/MPQAudioFragment(19272): onStop() 05 mAudioService: null
02-10 11:41:34.699: D/SessionDetailFragment(19272): onStop() 00 bound_flag: false
02-10 11:41:34.699: D/SessionDetailFragment(19272): onStop() 05 mAudioService: null
02-10 11:41:34.709: D/SessionDetailFragment(19272): onDetach() 00
02-10 11:41:34.709: D/SessionDetailFragment(19272): onAttach() 00
02-10 11:41:34.709: D/SessionDetailFragment(19272): onAttach() 10 activity:MPQMainTabActivity 
```

请注意，一旦`SessionDetailFragment`完成`onResume()`（就像它的子 Fragment 一样`MPQAudioFragment`），它们会立即运行`onPause()`？！？！那么片段一拆掉就又开始`onAttach()`套路了？

幸运的是，这种摆动似乎只发生一次，但它使维持状态更具挑战性（我想了解正在发生的事情和原因）。

* * *

### 更新：

现在，我正在通过`static`对关键数据使用成员属性来解决抖动问题。

此 SO 帖子指出了`onSaveInstanceState()`未调用的情况以及潜在的解决方法：[https ://stackoverflow.com/a/2909211/1742657](https://stackoverflow.com/a/2909211/1742657)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:12:48.200

### 更新/关闭 2013-03-24：

重复的 Fragments 似乎是由 parent/wrapper`TabHost`和对`updateTab`方法的多次调用引起的。第一个调用来自用户按下按钮和菜单，第二个调用来自`onTabChanged()`监听器触发。

两个调用都会检查现有的片段，但由于实例化尚未完成，最终都创建了一个新的片段。

# heroku - Heroku / 主域和子域

> ID：14800197
> 
> 赞同：1
> 
> 时间：2013-02-10T17:03:14.303
> 
> 标签：heroku, subdomain, cname

玩heroku；

假设我的网站正在我们的一台服务器上生产；在**www.something.com**。

我想让**updrage-dev-version.something.com**指向我的 heroku 堆栈。

这是可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:11:24.763

是的，绝对可以做到。您只需要为指向`CNAME`的子域设置一个条目。`updrage-dev-version``myapp.herokuapp.com`

[这是配置域记录的一个很好的例子](https://devcenter.heroku.com/articles/route-53?utm_source=dlvr.it&utm_medium=twitter)。

# go - 在模板中，如何在“with”或“range”范围内访问外部范围？

> ID：14800204
> 
> 赞同：54
> 
> 时间：2013-02-10T17:03:47.177
> 
> 标签：go, go-templates

在 a `with`or内`range`时，范围`.`会改变。你如何访问调用范围？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-02-10T22:21:31.930

```
{{with .Inner}}
  Outer: {{$.OuterValue}}
  Inner: {{.InnerValue}}
{{end}} 
```

`$`记录在[文本/模板](https://golang.org/pkg/text/template/)文档中：

> 开始执行时，$ 设置为传递给 Execute 的数据参数，即设置为 dot 的起始值。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-10T17:03:47.177

您可以使用变量保存调用范围：

```
{{ $save := . }}
{{ with .Inner }}
  Outer: {{ $save.OuterValue }}
  Inner: {{ .InnerValue }}
{{ end }} 
```

# c# - LINQ 查询概念

> ID：14800208
> 
> 赞同：0
> 
> 时间：2013-02-10T17:04:34.897
> 
> 标签：c#, sql, linq, entity-framework-4

我很难理解我需要的查询的这个要求。

这是我在表格中的数据：

```
row1  row2
A     B
A     C
A     D
A     E
E     B
E     C
E     A
E     D 
```

我想要所有行

```
where row1 IN ('A', 'E') 
```

但我不想要***row1 = E 和 row2 = A***的行。

我认为在直接 SQL 中，我可以做一个别名表，如***SELECT....AS Table1***，然后只选择在**Table1**中找不到**row2**的行，但我不知道如何在 LINQ 中解决这个问题。

 **有任何想法吗 ？

编辑：抱歉我的问题含糊不清，但我事先不知道**row1 in ('A', 'E')**的标准。基本上，如果我在**row1**中检索到具有特定值的记录（ **record1** ），如果我在另一条记录（**record2 ）中的****row2**中找到相同的特定值，我不想要**record2**。

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:58:02.223

更新后仍然不完全清楚，但我认为这会让你走上正确的轨道：

```
var rows = new[] {
Tuple.Create("A", "B"),
Tuple.Create("A", "C"),
Tuple.Create("A", "D"),
Tuple.Create("A", "E"),
Tuple.Create("E", "B"),
Tuple.Create("E", "C"),
Tuple.Create("E", "A"),
Tuple.Create("E", "D"),
};
var reference = Tuple.Create("A", "E");

var result = rows.Where(r => (r.Item1 == reference.Item1 || r.Item1 == reference.Item2)
                          && r.Item2 != reference.Item1
                          && r.Item1 != reference.Item2); 
```

更新后，我不确定是否应包括最后一个条件。目前它返回：

```
Item1 Item2 
A     B 
A     C 
A     D 
A     E 
```

如果仍然没有达到目标，也许您可​​以显示所需的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:48:07.017

我将假设您要创建一个 PIVOT 查询。

因此，通过您的输入，您希望获得表单的输出

核心价值

A - B,C,D,E

B - B,C,A,D

其中 Key 是字符串类型，Value 是 IEnumerable 类型

在这种情况下，你想要： -

```
var output = allRows.ToLookup(x => x.row1, x => x.row2); 
```********

# iphone - 具有多个结果的 TextView

> ID：14800213
> 
> 赞同：0
> 
> 时间：2013-02-10T17:04:42.810
> 
> 标签：iphone, xcode, ios6, textview, multiple-results

我有类似的东西：

```
for(MKMapItem *mapItem in response.mapItems){
        MKPlacemark *placeMark = mapItem.placemark;
        NSLog(@"showSearchResponse: mapItem = %@ coordinate = %g,%g \nname = %@\naddressDictionary = %@",
              mapItem,
              placeMark.coordinate.latitude,
              placeMark.coordinate.longitude,
              mapItem.name,
              placeMark.addressDictionary);

        [self.mapView addAnnotation:placeMark];

        scrollText.editable=NO;
        scrollText.scrollEnabled = YES;
        scrollText.text = [NSString stringWithFormat:@"%@",placeMark.addressDictionary]; 
```

我想在 TextView 中列出所有结果，这段代码只显示了最后一个结果

谢谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:08:20.563

问题出在循环的末尾：

```
scrollText.text = [NSString stringWithFormat:@"%@",placeMark.addressDictionary]; 
```

您正在将文本重置为最后一个条目。

所以你有两个选择。其中一次只是将一个字符串与您的结果连接起来，并将其设置为您的 scrollText 的文本，或者像这样在 scrollText 上连接字符串

```
scrollText.text = [NSString stringWithFormat:@"%@%@",scrollText.text, placeMark.addressDictionary]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:18:55.477

您每次都在重新设置 scrollText 的值。所以试试这个：

```
NSMutableString *resultString = [[NSMutableString alloc]init];

for(MKMapItem *mapItem in response.mapItems){
        MKPlacemark *placeMark = mapItem.placemark;
        NSLog(@"showSearchResponse: mapItem = %@ coordinate = %g,%g \nname = %@\naddressDictionary = %@",
              mapItem,
              placeMark.coordinate.latitude,
              placeMark.coordinate.longitude,
              mapItem.name,
              placeMark.addressDictionary);

        [self.mapView addAnnotation:placeMark];

        [resultString appendFormate:@"%@\n",placeMark.addressDictionary];

}

scrollText.editable=NO;
scrollText.scrollEnabled = YES;
scrollText.text = resultString; 
```

我希望这会有用。

# linux - Linux 内核驱动程序：IRQ 触发或超时

> ID：14800214
> 
> 赞同：3
> 
> 时间：2013-02-10T17:04:46.633
> 
> 标签：linux, timeout, kernel, driver, irq

在 linux 内核驱动程序中，我想无限重复以下序列：

*   在时间 T，启用硬件 IRQ
*   在时间 T 和 T +“大约”15ms 之间，如果触发了 IRQ，则可以到达 IRQ 回调。我这么说是因为我没有使用 RT 内核，如果它是 14 或 16 毫秒，那很好。在 IRQ 回调中，我需要写下 get cpu_clock(0) 并调用 wake_up_interruptible。超时需要被杀死。整个过程需要在 5ms 内重新启动。
*   如果通过 T + "大约" 15ms，IRQ 没有被触发，我需要执行一些其他代码。然后应该禁用 IRQ。整个过程需要在 5ms 内重新启动。

因此，通过 T+“大约”20ms，在最坏的情况下，需要重新启动整个过程。

请注意，如果 IRQ 在 18 毫秒时被物理触发，那太糟糕了，“我错过了火车”。我将在下一个序列中捕获另一个硬件触发器。

在测试时，我正在按照以下伪代码做一些事情：

```
INIT_DELAYED_WORK(&priv->work, driver_work);
INIT_DELAYED_WORK(&priv->timeout, driver_timeout);
request_irq(priv->irq, driver_interrupt, IRQF_TRIGGER_RISING, "my_irq", priv); 
```

然后：

```
queue_delayed_work(priv->workq, &priv->work, 0ms);

static void driver_work(struct work_struct *work) {
    queue_delayed_work(priv->workq, &priv->timeout, 15ms);
    priv->interruptCalled = 0;
    enable_irq(priv->irq);
} 
```

然后：

```
static irqreturn_t driver_interrupt(int irq, void *_priv) {
    disable_irq_nosync(priv->irq);
    priv->interruptCalled = 1;
    cancel_delayed_work(&priv->timeout);
    priv->stamp = cpu_clock(0);
    wake_up_interruptible(&driver_wait);
    queue_delayed_work(priv->workq, &priv->work, 5ms);
    return IRQ_HANDLED; 
```

}

和：

```
static void driver_timeout(struct work_struct *work) {
    if (priv->interruptCalled == 0) {
        disable_irq_nosync(priv->irq);
        //Do other small cleanup
        queue_delayed_work(priv->workq, &priv->work, 5ms);
    }
} 
```

我正在尝试编写一个强大但简单的驱动程序。这是一个正确的实现吗？我怎样才能改进这个实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:13:20.290

回答我自己的问题：问题是 queue_delayed_work 是基于 jiffies 的。或者 5ms 是不可能的，因为 HZ=100 (1 jiffy = 10ms)。HR timer 带来了很好的解决方案。

# python - Numpy 安装/构建 Mac Osx

> ID：14800217
> 
> 赞同：1
> 
> 时间：2013-02-10T17:05:16.287
> 
> 标签：python, xcode, macos, numpy, python-2.7

所以我按照这个网站[http://www.scipy.org/Installing_SciPy/Mac_OS_X](http://www.scipy.org/Installing_SciPy/Mac_OS_X)上的指示，下载了 Xcode 和 Fortran Gcc，然后从终端运行以下命令：

```
Megans-MacBook-Pro:~ MeganRCunninghan$ export CC=clang
Megans-MacBook-Pro:~ MeganRCunninghan$ export CXX=clang
Megans-MacBook-Pro:~ MeganRCunninghan$ export FFLAGS=-ff2c
Megans-MacBook-Pro:~ MeganRCunninghan$ git clone https://github.com/numpy/numpy.git
fatal: destination path 'numpy' already exists and is not an empty directory.
Megans-MacBook-Pro:~ MeganRCunninghan$ python setup.py build
/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python: can't open file 'setup.py': [Errno 2] No such file or directory
Megans-MacBook-Pro:~ MeganRCunninghan$ ls
Desktop     Dropbox     Pictures    my_new_env  virtualenv.pyc
Django      Library     Public      numpy
Documents   Movies      Sync Folder pip
Downloads   Music       git     virtualenv.py
Megans-MacBook-Pro:~ MeganRCunninghan$ cd numpy
Megans-MacBook-Pro:numpy MeganRCunninghan$ python setup.py build
Running from numpy source directory.
non-existing path in 'numpy/distutils': 'site.cfg'
F2PY Version 2
numpy/core/setup_common.py:86: MismatchCAPIWarning: API mismatch detected, the C API version numbers have to be updated. Current C api version is 8, with checksum f4362353e2d72f889fda0128aa015037, but recorded checksum for C API version 8 in codegen_dir/cversions.txt is 17321775fc884de0b1eda478cd61c74b. If functions were added in the C API, you have to update C_API_VERSION  in numpy/core/setup_common.py.
  MismatchCAPIWarning)
blas_opt_info:
  FOUND:
    extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']
    define_macros = [('NO_ATLAS_INFO', 3)]
    extra_compile_args = ['-msse3', '-I/System/Library/Frameworks/vecLib.framework/Headers']

lapack_opt_info:
  FOUND:
    extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']
    define_macros = [('NO_ATLAS_INFO', 3)]
    extra_compile_args = ['-msse3']

running build
running config_cc
unifing config_cc, config, build_clib, build_ext, build commands --compiler options
running config_fc
unifing config_fc, config, build_clib, build_ext, build commands --fcompiler options
running build_src
build_src
building py_modules sources
creating build
creating build/src.macosx-10.6-intel-2.7
creating build/src.macosx-10.6-intel-2.7/numpy
creating build/src.macosx-10.6-intel-2.7/numpy/distutils
building library "npymath" sources
customize Gnu95FCompiler
Could not locate executable gfortran
Could not locate executable f95
customize NAGFCompiler
customize AbsoftFCompiler
Could not locate executable f90
Could not locate executable f77
customize IBMFCompiler
Could not locate executable xlf90
Could not locate executable xlf
customize IntelFCompiler
Could not locate executable ifort
Could not locate executable ifc
customize GnuFCompiler
Could not locate executable g77
customize G95FCompiler
Could not locate executable g95
customize PGroupFCompiler
Could not locate executable pgfortran
don't know how to compile Fortran code on platform 'posix'
C compiler: clang -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3

compile options: '-Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -Inumpy/core/include -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c'
clang: _configtest.c
sh: clang: command not found
sh: clang: command not found
failure.
removing: _configtest.c _configtest.o
Traceback (most recent call last):
  File "setup.py", line 214, in <module>
    setup_package()
  File "setup.py", line 207, in setup_package
    configuration=configuration )
  File "/Users/MeganRCunninghan/numpy/numpy/distutils/core.py", line 184, in setup
    return old_setup(**new_attr)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/Users/MeganRCunninghan/numpy/numpy/distutils/command/build.py", line 37, in run
    old_build.run(self)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/command/build.py", line 127, in run
    self.run_command(cmd_name)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/Users/MeganRCunninghan/numpy/numpy/distutils/command/build_src.py", line 152, in run
    self.build_sources()
  File "/Users/MeganRCunninghan/numpy/numpy/distutils/command/build_src.py", line 163, in build_sources
    self.build_library_sources(*libname_info)
  File "/Users/MeganRCunninghan/numpy/numpy/distutils/command/build_src.py", line 298, in build_library_sources
    sources = self.generate_sources(sources, (lib_name, build_info))
  File "/Users/MeganRCunninghan/numpy/numpy/distutils/command/build_src.py", line 385, in generate_sources
    source = func(extension, build_dir)
  File "numpy/core/setup.py", line 644, in get_mathlib_info
    raise RuntimeError("Broken toolchain: cannot link a simple C program")
RuntimeError: Broken toolchain: cannot link a simple C program 
```

我已经为此工作了几个小时，所以现在迷路了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T17:55:32.380

下载 Xcode 4 后，您需要让它安装其`Command Line Tools`组件。启动`Xcode`，然后选择`Xcode`-> `Preferences`-> `Downloads`-> `Components`。这将安装`clang`和其他构建工具，因此它们可以从命令行获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:39:48.210

我最近遇到了类似的问题。我推荐使用[Homebrew](http://mxcl.github.com/homebrew/)的 numpy 和 scipy 公式。它们将从源代码构建，但我对它们没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T17:37:41.070

我没有问题`pip install numpy`。虽然你应该先[安装 pip](http://guide.python-distribute.org/installation.html#installing-pip)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T18:08:46.703

我面临同样的问题！我通过`g95`使用 macports 安装 Fortran 编译器来解决！
使用[macports](http://www.macports.org/install.php)将其安装为`sudo port install g95 @0.92`

# java - Java 初学者 - 使用参数和扫描器

> ID：14800221
> 
> 赞同：-5
> 
> 时间：2013-02-10T17:05:44.957
> 
> 标签：java

编写一个名为的方法，该方法`inputBirthday`接受控制台的 Scanner 作为参数并提示用户输入出生年月日，然后以合适的格式打印出生日期。这是与用户的示例对话：

```
On what day of the month were you born? 8
What is the name of the month in which you were born? May
During what year were you born? 1981
You were born on May 8, 1981\. You're mighty old! 
```

所以这就是我所做的：

```
import java.util.Scanner;

public static void inputBirthday(int month,String day,int year){
    Scanner sc=new Scanner(System.in);
    System.out.print("On what day of the month were you born?");
    month=sc.nextInt();

    System.out.print("What is the name of the month in which you were born?");
    day=sc.nextLine();

    System.out.print("During what year were you born?");
    year=sc.nextInt();  
} 
```

我的代码编译失败。有人可以给我一些提示，我会自己尝试一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:07:43.657

类需要声明。Java 是一种`OO`语言，因此必须使用类：

```
class MyClass {
   public static void inputBirthday(int month, String day, int year) {
      ...
   }
} 
```

您`inputBirthday`可以替换为一种`main`方法，该方法将为您的类提供一个运行程序的入口点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T17:09:18.020

你需要把你的方法封装在`inputBirthday(...)`里面`class`

喜欢：

```
class Birthday{
     public static void inputBirthday(int month, String day, int year) {
      // .... rest of the code ....
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T17:12:44.270

在`Java`每一件事上都需要在课堂上。

例如

```
import java.util.Scanner;
public class BirthdayClass{
  public static void inputBirthday(){
    Scanner sc=new Scanner(System.in);
    System.out.print("On what day of the month were you born?");
    int month=sc.nextInt();

    System.out.print("What is the name of the month in which you were born?");
    int day=sc.nextLine();

    System.out.print("During what year were you born?");
    int year=sc.nextInt();

  }
 // This is main method which is called when class is loaded
 public static void main(String[] args){
   BirthdayClass.inputBirthday();
 }
} 
```

使用编译程序`javac BirthdayClass.java`，然后使用`java BirthdayClass`.

此外，您不需要传递`day`,`month`和`year`作为参数，因为您在方法中输入。相反，您应该在方法中声明它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T19:09:11.243

我的建议是回去阅读你书中的第一章，你需要知道这些基本的东西才能做任何事情。每个程序在某个地方都需要一个 main 方法，通常在一个类中，几乎没有其他东西。减轻调试的痛苦。但是，如果您只是为学校做一些小练习，只需使用这个基本结构。

如果练习这么说，显然把它放在一个方法中，并在 main 方法中调用该方法。如果你在一个类中拥有它，你只会构建它的对象，但你可能在课堂上还不够了解 OOP 部分。

```
className {

    public static void main(String[] args) {
        // your code here.    
    }

} // end of class. 
```

# jqgrid - jqgrid 删除最后一列后的空标题单元格

> ID：14800223
> 
> 赞同：3
> 
> 时间：2013-02-10T17:05:49.433
> 
> 标签：jqgrid, header

我的 jqgrid 中有一个奇怪的行为。我突然注意到在我的最后一列之后有一个空白标题单元格，我想摆脱它。知道怎么做吗？

![在此处输入图像描述](../Images/dfaa0ec6c12cb77c42be53596101e0cb.png)

这是我的 jqgrid 的定义：

```
myGrid.jqGrid({
    colNames: ['Order Id', 'a', b', 'c', 'd', 'e', 'f', 'g', 'h', 'i',
      j', 'k', 'l', 'm'],
    colModel: [
      { name: 'OrderId', index: 'OrderId', width: 58, editable: false, align: 'center' },
      { name: 'a', index: 'a', width: 68, editable: false, align: 'center', sortable: false },
      { name: 'b', index: 'b', width: 43, editable: false, align: 'center', sortable: false },
      { name: 'c', index: 'c', width: 48, editable: false, align: 'center', sortable: false },
      { name: 'd', index: 'd', width: 63, editable: false, align: 'center', sortable: false },
      { name: 'e', index: 'e', width: 123, editable: false, align: 'center', sortable: false },
      { name: 'f', index: 'f', width: 73, editable: false, align: 'center', sortable: false },
      { name: 'g', index: 'g', width: 123, editable: false, align: 'center', sortable: false },
      { name: 'h', index: 'h', width: 73, editable: false, align: 'center', sortable: false },
      { name: 'i', index: 'i', width: 78, editable: false, align: 'center', sortable: false },
      { name: 'j', index: 'j', width: 117, editable: false, align: 'center', sortable: false },
      { name: 'k', index: 'k', width: 53, editable: false, align: 'center', sortable: false },
      { name: 'l', index: 'l', width: 73, editable: false, align: 'center', sortable: false},
      { name: 'm', index: 'm', width: 43, editable: false, align: 'center', sortable: false}        ],
    pginput: false,
    pgbuttons: false,
    hidegrid: false,
    pager: '#divPager',
    gridview: true,
    rownumbers: true,
    rownumWidth: 20,
    caption: 'Trading Positions',
    loadonce: true,
    viewrecords: true,
    recordtext: "",
    emptyrecords: "No trading positions to display",
    shrinkToFit: false
  }); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-10T20:09:31.617

空白空间是为可能的垂直滚动条保留的。如果您放置`height: "auto"`或`height: "100%"`如果您将使用`scrollOffset: 0`它，则网格中不会显示额外的空白空间。

# php - 如何在 CSV 上传时跳过标题名称或列

> ID：14800230
> 
> 赞同：-1
> 
> 时间：2013-02-10T17:06:43.280
> 
> 标签：php, mysql

在我的 csv 上传脚本中，包含在 csv 文件中的标题或列名数据总是相同的，但是会被重复、空格、斜杠、井号、连字符等弄乱。列的顺序也总是一样的。

每当我使用这些 csv 文件之一使用上传脚本时，我都没有收到任何错误，也没有真正发生任何事情，也没有数据进入数据库。但是，如果我更改标题或列名，一切正常。这意味着我必须格式化 csv 文件的标题（列名）并删除所有空格、特殊字符等，一切似乎都很好。

有没有办法只添加 csv 文件中的数据而不会妨碍标题或列名？

这是我正在使用的：

```
 <?php

 include '_inc/include.php';
 if ($_FILES[csv][size] > 0) {

//get the csv file
$file = $_FILES[csv][tmp_name];
$handle = fopen($file,"r");
fgets($handle);

//loop through the csv file and insert into database
do {
    if ($data[0]) {
        $mysql_query = mysql_query("INSERT INTO extrusiondata_01 (COL1, COL2, COL3, COL4, COL5, COL6, COL7, COL8, COL9, COL10, COL11, COL12, COL13, COL14, COL15, COL16, COL17, COL18, COL19, COL20, COL21, COL22, COL23, COL24, COL25, COL26, COL27, COL28, COL29, COL30, COL31, COL32, COL33, COL34, COL35, COL36, COL37, COL38, COL39, COL40, COL41, COL42, COL43, COL44, COL45, COL46, COL47, COL48, COL49, COL50, COL51, COL52, COL53, COL54, COL55, COL56, COL57, COL58, COL59, COL60, COL61, COL62, COL63, COL64, COL65, COL66, COL67, COL68, COL69, COL70, COL71, COL72, COL73, COL74, COL75, COL76, COL77, COL78, COL79, COL80, COL81, COL82, COL83, COL84, COL85, COL86, COL87, COL88, COL89, COL90, COL91, COL92, COL93, COL94, COL95, COL96, COL97, COL98, COL99, COL100, COL101, COL102, COL103, COL104, COL105, COL106, COL107, COL108, COL109, COL110, COL111, COL112, COL113, COL114, COL115, COL116, COL117, COL118, COL119, COL120, COL121, COL122, COL123, COL124, COL125, COL126) VALUES
            (
                '".addslashes($data[0])."',
                '".addslashes($data[1])."',
                '".addslashes($data[2])."',
                '".addslashes($data[3])."',
                '".addslashes($data[4])."',
                '".addslashes($data[5])."',
                '".addslashes($data[6])."',
                '".addslashes($data[7])."',
                '".addslashes($data[8])."',
                '".addslashes($data[9])."',
                '".addslashes($data[10])."',
                '".addslashes($data[11])."',
                '".addslashes($data[12])."',
                '".addslashes($data[13])."',
                '".addslashes($data[14])."',
                '".addslashes($data[15])."',
                '".addslashes($data[16])."',
                '".addslashes($data[17])."',
                '".addslashes($data[18])."',
                '".addslashes($data[19])."',
                '".addslashes($data[20])."',
                '".addslashes($data[21])."',
                '".addslashes($data[22])."',
                '".addslashes($data[23])."',
                '".addslashes($data[24])."',
                '".addslashes($data[25])."',
                '".addslashes($data[26])."',
                '".addslashes($data[27])."',
                '".addslashes($data[28])."',
                '".addslashes($data[29])."',
                '".addslashes($data[30])."',
                '".addslashes($data[31])."',
                '".addslashes($data[32])."',
                '".addslashes($data[33])."',
                '".addslashes($data[34])."',
                '".addslashes($data[35])."',
                '".addslashes($data[36])."',
                '".addslashes($data[37])."',
                '".addslashes($data[38])."',
                '".addslashes($data[39])."',
                '".addslashes($data[40])."',
                '".addslashes($data[41])."',
                '".addslashes($data[42])."',
                '".addslashes($data[43])."',
                '".addslashes($data[44])."',
                '".addslashes($data[45])."',
                '".addslashes($data[46])."',
                '".addslashes($data[47])."',
                '".addslashes($data[48])."',
                '".addslashes($data[49])."',
                '".addslashes($data[50])."',
                '".addslashes($data[51])."',
                '".addslashes($data[52])."',
                '".addslashes($data[53])."',
                '".addslashes($data[54])."',
                '".addslashes($data[55])."',
                '".addslashes($data[56])."',
                '".addslashes($data[57])."',
                '".addslashes($data[58])."',
                '".addslashes($data[59])."',
                '".addslashes($data[60])."',
                '".addslashes($data[61])."',
                '".addslashes($data[62])."',
                '".addslashes($data[63])."',
                '".addslashes($data[64])."',
                '".addslashes($data[65])."',
                '".addslashes($data[66])."',
                '".addslashes($data[67])."',
                '".addslashes($data[68])."',
                '".addslashes($data[69])."',
                '".addslashes($data[70])."',
                '".addslashes($data[71])."',
                '".addslashes($data[72])."',
                '".addslashes($data[73])."',
                '".addslashes($data[74])."',
                '".addslashes($data[75])."',
                '".addslashes($data[76])."',
                '".addslashes($data[77])."',
                '".addslashes($data[78])."',
                '".addslashes($data[79])."',
                '".addslashes($data[80])."',
                '".addslashes($data[81])."',
                '".addslashes($data[82])."',
                '".addslashes($data[83])."',
                '".addslashes($data[84])."',
                '".addslashes($data[85])."',
                '".addslashes($data[86])."',
                '".addslashes($data[87])."',
                '".addslashes($data[88])."',
                '".addslashes($data[89])."',
                '".addslashes($data[90])."',
                '".addslashes($data[91])."',
                '".addslashes($data[92])."',
                '".addslashes($data[93])."',
                '".addslashes($data[94])."',
                '".addslashes($data[95])."',
                '".addslashes($data[96])."',
                '".addslashes($data[97])."',
                '".addslashes($data[98])."',
                '".addslashes($data[99])."',
                '".addslashes($data[100])."',
                '".addslashes($data[101])."',
                '".addslashes($data[102])."',
                '".addslashes($data[103])."',
                '".addslashes($data[104])."',
                '".addslashes($data[105])."',
                '".addslashes($data[106])."',
                '".addslashes($data[107])."',
                '".addslashes($data[108])."',
                '".addslashes($data[109])."',
                '".addslashes($data[110])."',
                '".addslashes($data[111])."',
                '".addslashes($data[112])."',
                '".addslashes($data[113])."',
                '".addslashes($data[114])."',
                '".addslashes($data[115])."',
                '".addslashes($data[116])."',
                '".addslashes($data[117])."',
                '".addslashes($data[118])."',
                '".addslashes($data[119])."',
                '".addslashes($data[120])."',
                '".addslashes($data[121])."',
                '".addslashes($data[122])."',
                '".addslashes($data[123])."',
                '".addslashes($data[124])."',
                '".addslashes($data[125])."'
            )
        ");
    }
} while ($data = fgetcsv($handle,100000,",","'"));
//

//redirect

}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Import a CSV File with PHP & MySQL</title>
</head>

<body>

<?php if (!empty($_GET[success])) { echo "<b>Your file has been imported by import 55.</b><br><br>"; } //generic success notice ?>

<form action="" method="post" enctype="multipart/form-data" name="form1" id="form1">
  Choose your file: <br />
  <input name="csv" type="file" id="csv" />
  <input type="submit" name="Submit" value="Submit" />
</form>
    <P> Display Data Contents <a href ='Data-Display-test.php'>here</a></P>
</body>
</html> 
```

我知道这在 sql 注入或安全性方面可能不是最好的，所以任何建议都会很棒。我只是还没走到那一步。

提前致谢

好的，我已经回到 LOAD DATA INFILE 但我遇到了问题。请原谅我没有可靠的参考来正确地看到这项工作，也没有任何成功让它工作。我从未听说过 fseek，也从未见过它的用途。根据我阅读的内容，我认为 fseek 可能是我想要完成的。我只想将数据上传到数据库。你有 fseek 工作的例子吗？

我已经尝试了 LOAD DATA INFILE 但无法弄清楚错误在哪里

```
 if ($data[0]) {
    LOAD DATA INFILE '$file' INTO TABLE 'tabledata_01' (COL1, COL2, COL3, COL4, COL5, COL6, COL7, COL8, COL9, COL10, COL11, COL12, COL13, COL14) VALUES
    $mysql_query = mysql_query("INSERT INTO tabledata_01 (COL1, COL2, COL3, COL4, COL5, COL6, COL7, COL8, COL9, COL10, COL11, COL12, COL13, COL14) VALUES
            (
                '".addslashes($data[0])."',
                '".addslashes($data[1])."', 
```

我将两个旧查询都留在了 LOAD DATA INFILE 下方，并试图查看出现错误的原因或位置。如果您有 fseek 的示例，这可能是一个更好的解决方案，从我阅读的内容来看，它肯定看起来更快。谢谢你

由于我的托管，我能够使用 LOCAL，我使用 @VAR 跳过不需要的字段/列。使用 MULTIPLE SET 很痛苦，但我确实明白了。

```
$sqlstatement="LOAD DATA LOCAL INFILE '$temp' INTO TABLE 000_datetest FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES (id, @sdate, name, @anotherdate, color, 1moredate) SET anotherdate = IF(LENGTH(@anotherdate)=7,STR_TO_DATE(@anotherdate,'%m/%d/%Y'),STR_TO_DATE(@anotherdate,'%m/%d/%y')), sdate = IF(LENGTH(@sdate)=7,STR_TO_DATE(@sdate,'%m/%d/%Y'),STR_TO_DATE(@sdate,'%m/%d/%y'))"; 
```

我不知道为什么 DATE 格式不起作用，所以我在数据库中将其更改为 varchar 并且不需要使用 SET 我只是希望以后在我运行查询时它不会成​​为问题不同的日期并尝试计算其间的天数。

这是决赛：

```
<?php
if (isset($_POST['load']))
{
include '_inc/include.php';
$temp = $_FILES['myfile']['tmp_name'];
$sqlstatement="LOAD DATA LOCAL INFILE '$temp' INTO TABLE 000_datetest FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES(@COL1, @COL2, @COL3, @COL4, @COL5, @COL6, @COL7, @COL8, @COL9, @COL10, @COL11, @COL12, @COL13, listdate, closedate, contractdate, @COL17, status, statuschangedate, withdrawdate, canceldate, @COL22, @COL23, @COL24, listprice, soldprice, @COL27, @COL28, @COL29, @COL30, @COL31, @COL32, @COL33, @COL34, @COL35, @COL36, @COL37, @COL38, @COL39, @COL40, @COL41, @COL42, @COL43, @COL44, @COL45, @COL46, @COL47, @COL48, @COL49, @COL50, @COL51, gla, @COL53, @COL54, @COL55, built, @COL57, @COL58, @COL59, @COL60, @COL61, @COL62, @COL63, @COL64, @COL65, @COL66, @COL67, @COL68, @COL69, @COL70, @COL71, @COL72, @COL73, @COL74, @COL75, @COL76, @COL77, @COL78, @COL79, @COL80, @COL81, @COL82, owner, @COL84, @COL85, @COL86, @COL87, @COL88, @COL89, @COL90, @COL91, @COL92, @COL93, @COL94, fore, @COL96, @COL97, shortsale, @COL99, @COL100, @COL101, @COL102, @COL103, @COL104, @COL105, @COL106, @COL107, @COL108, @COL109, @COL110, @COL111, @COL112, @COL113, @COL114, @COL115, @COL116, @COL117, @COL118, @COL119, @COL120, @COL121, @COL122, @COL123, @COL124, @COL125, @features)";
mysql_query($sqlstatement) or die(mysql_error());
echo "It worked";
echo "<p><a href='upload-display2.php'>go to page</a></p>";
} 

?>

<form method="post" action="upload2.php" enctype="multipart/form-data">
<input name="myfile" type="file" />
<input name="load" type="submit" value="submit" /></form> 
```

希望这可以帮助某人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:10:57.817

为什么不直接使用[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)？

但是，要跳过标题行，您可以使用[fseek](http://php.net/manual/en/function.fseek.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:55:47.523

使用循环。

```
<?php

$row = 0;
while (($values = fgetcsv($handle)) !== false) {
    $row++;
    if ($row === 1) {
        $keys = $values;
        continue;
    }
    $row = array_combine($keys, $values);
} 
```

这将使用第一行作为标题，然后组合任何后续行的值，为您提供标题名称与单元格值的关联数组。

# c# - 如何更新网格中单元格中的值

> ID：14800232
> 
> 赞同：1
> 
> 时间：2013-02-10T17:06:55.820
> 
> 标签：c#, infragistics, ultrawebgrid

我有一个网格，我有 4 行，我需要根据第 1、第 2 和第 3 行值中的输入更新第 4 行。例子 ：

1st 当您输入 1 时，第 4 行中的总数应该是 1 当您在第 1 行中输入 1 时，在第 2 行中输入 2 时，总数应该是 3 。当我们点击页面上的弹出窗口时，我们是否应该使用 java 脚本，因为这些行在网格中。让我知道我是否遗漏了什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T14:09:43.193

这个问题已经在 IG 论坛中讨论过：http: [//www.infragistics.com/community/forums/t/77638.aspx](http://www.infragistics.com/community/forums/t/77638.aspx)

这是我在那里写的：

> 您可以处理 AfterCellUpdateHandler。它会在单元格的值发生更改后触发，因此您可以在其中查看单元格值并计算总和。之后，您可以更改最后一个单元格的值。例如：
> 
> ```
> function UltraWebGrid1_AfterCellUpdateHandler(gridName, cellId){
> 
>     var cell = igtbl_getCellById(cellId);
>     var totalCell = cell.Row.getCellFromKey("Total");
>     var sum = 0;
>     for (var i = 1; i < cell.Row.cells.length-1; i++) {
>         sum += cell.Row.getCell(i).getValue();
>     }
>     cell.Row.getCellFromKey("Total").setValue(sum);
> } 
> ```
> 
> 请参考所附样本。如果您更改任何单元格中的值，则“总计”列中相关单元格的值将根据新值计算。
> 
> 如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:26:12.730

你可以做类似的事情

```
dataGridView1.Rows[0].Cells[0].Value = Convert.ToInt32(dataGridView1.Rows[1].Cells[0].Value) + Convert.ToInt32(dataGridView1.Rows[2].Cells[0].Value) ; 
```

在 [ ] 中，您必须输入所需的行或列索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:32:47.550

您可以使用未绑定字段，请参阅此示例[未绑定字段](http://www.infragistics.com/products/wpf/sample/data-grid/unbound-fields)

在这里您可以看到小计、SalesTax 和 Total 的未绑定字段以及在 InitializeRecord 事件中在 c 端完成的代码。

# ios - 用其他字符替换字符串中的字符（唯一的然后是通配符值）

> ID：14800240
> 
> 赞同：0
> 
> 时间：2013-02-10T17:07:22.667
> 
> 标签：ios, objective-c, nsstring, append, wildcard

我有一个 NSString，比方说“H，L，K，P”如何检测特定字符而不是通配符...例如，检查“，*”将返回“，L”“， K" 和 ",P" 因为它们都有特定的 ","，然后它们后面都有一个字符。然后我想用它本身加上一个“句点”来替换那个字符串。

所以“H,L,K,P”会变成“H,L.,K.,P”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:15:01.623

使用正则表达式。搜索模式将是：

```
,(.) 
```

替换模式将是：

```
,$1. 
```

示例代码：

```
NSString *string = @"H,L,K,P";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@",(.)"
                                    options:0
                                    error:&error];
NSString *modifiedString = [regex stringByReplacingMatchesInString:string
                                    options:0
                                    range:NSMakeRange(0, [string length])
                                    withTemplate:@",$1."]; 
```

# java - JSF 1.2 的内部工作

> ID：14800244
> 
> 赞同：0
> 
> 时间：2013-02-10T17:07:43.620
> 
> 标签：java, jsf-1.2, mojarra

我试图了解 JSF 1.2 sun 实现的内部工作原理。

我有以下问题。

1.  据说 Lifecycle 类管理特定 JavaServer Faces 请求的整个生命周期的处理。它具有执行和渲染方法，但它是一个抽象类。它是如何真正实施的？

2.  在[这篇](http://zachxu.blogspot.in/2011/10/how-jsf-restore-view-phase-restores.html)博客中，他指出 ViewHandler 最终会调用以下内容： `stateManager.saveView(context);` 这是正确的吗？我在任何地方都找不到这行代码。

3.  我会在哪个类中找到解析 JSF 标记并创建组件树（xml -> 树）的代码？

4.  我将在哪个类中找到与 (3) 相反的代码，即呈现组件树。（树-> xml）？

如果有人可以向我指出任何提供有关 JSF 1.2 实现的解释的资源，那也将是无限的好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:20:35.990

自从我进入 JSF 1.2 的胆量以来已经有几年了，但是如果内存服务于实现 Lifecycle 的类总是 LifecycleImpl。

关于 xml->tree 和 tree->xhtml 之间的转换（对我来说，无论如何），我一直认为这是由组件/渲染器/转换器完成的。基于标签，组件被创建并填充到树中。附加到组件的渲染器（基于标签定义）负责渲染输出（默认情况下为html，但您可以根据所需的输出将多个渲染器附加到一个组件），转换器负责字符串< -> 对象转换。

我总是很幸运地阅读了源代码（可以在[http://javaserverfaces.java.net/download.html](http://javaserverfaces.java.net/download.html)找到），尽管我花了一些时间来理解其中的一些内容。

希望这可以帮助

# php - php无法授权

> ID：14800254
> 
> 赞同：1
> 
> 时间：2013-02-10T17:08:33.120
> 
> 标签：php, authentication

试图实现一个非常简单的保护区。我有两个 php 文件：

首先：`secure.php`

```
<?php
  $username = 'user';
  $password = 'password';

  if (!isset($_SERVER['PHP_AUTH_USER']) || !isset($_SERVER['PHP_AUTH_PW']) ||
    ($_SERVER['PHP_AUTH_USER'] != $username) || ($_SERVER['PHP_AUTH_PW'] != $password)) {
    header('HTTP/1.1 401 Unauthorized');
    header('WWW-Authenticate: Basic realm="Secure Area"');
    exit('You are not authorized'); 
  }
?> 
```

第二个：`hello.php`

```
<?php

require_once('secure.php');

?>
<doctype! html>
<head>
</head>

<body>
<p>hello</p>
</body>

</html> 
```

访问 hello.php 时，系统会按预期提示我输入用户名/密码。但我没想到的是不断被拒绝访问。

```
You are not authorized
Authorization Required

This server could not verify that you are authorized to access the document requested. Either you supplied the wrong credentials (e.g., bad password), or your browser doesn't understand how to supply the credentials required. 
```

铬和野生动物园。我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:43:42.763

该代码对我来说很好，所以它可能是服务器配置问题，也许这个 - [PHP_AUTH_USER 未设置？](https://stackoverflow.com/questions/3663520/php-auth-user-not-set)

# iphone - 在 UIDocumentController 中禁用某些服务

> ID：14800255
> 
> 赞同：0
> 
> 时间：2013-02-10T17:08:46.473
> 
> 标签：iphone, ios, objective-c, ipad

我有以下代码可以将照片发布到 Instagram：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES);
    NSString* homePath = [paths objectAtIndex:0];
    NSString* basePath = @"integration/instagram";
    NSString* tmpFileName = @"jumpto.ig";

    NSString* dirPath = [NSString stringWithFormat:@"%@/%@", homePath, basePath];
    NSString* docPath = [NSString stringWithFormat:@"%@/%@", dirPath, tmpFileName];

    //clear it out and make it fresh
    [[NSFileManager defaultManager] removeItemAtPath:docPath error:nil];
    if ([[NSFileManager defaultManager] createDirectoryAtPath:dirPath withIntermediateDirectories:YES attributes:nil error:nil]) {

        NSData* imgData = [self generateImageData:img];
        [[NSFileManager defaultManager] createFileAtPath:docPath contents:imgData attributes:nil];
        NSURL* url = [NSURL fileURLWithPath:docPath isDirectory:NO ];

        NSURL *instagramURL = [NSURL URLWithString:@"instagram://camera"];
        if ([[UIApplication sharedApplication] canOpenURL:instagramURL]) {
            //imageToUpload is a file path with .ig file extension
            self.documentInteractionController = [UIDocumentInteractionController interactionControllerWithURL:url];
            self.documentInteractionController.UTI = @"com.instagram.exclusivegram";
            self.documentInteractionController.delegate = self;
            self.documentInteractionController.annotation = [NSDictionary dictionaryWithObject:@"Caption Test" forKey:@"InstagramCaption"];
            [self.documentInteractionController presentOptionsMenuFromBarButtonItem:self.navigationItem.rightBarButtonItem animated:YES];
        }
    } 
```

问题是，当我打开弹出窗口时，我看到了其他服务，例如 facebook/twitter/mail/print/assign to contact/copy/etc。如何使我只有一个选项，即在 Instagram 中打开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:52:07.430

Instagram 会同时收听 .jpg/.ig 文件以及名为`.igo`（仅限 Instagram）的特殊扩展名。通过将文件名更改为 .igo，列表中应仅显示 instagram：

```
NSString* tmpFileName = @"jumpto.igo"; 
```

资料来源：[Instagram iPhone 挂钩](http://instagram.com/developer/iphone-hooks/)

编辑：我认为您编写文件的方式存在逻辑问题。而不是使用 NSFileManager 写出这一行的内容：

```
[[NSFileManager defaultManager] createFileAtPath:docPath contents:imgData attributes:nil]; 
```

尝试使用 NSData 对象本身将其写入到位：

```
[imgData writeToFile:docPath atomically:NO]; 
```

我不确定这会导致不同的文件，但我想知道`NSFileManager`使用数据创建文件的方式是否与`NSData`直接写入数据的方式不同。

# android - 充气 GUI 只能工作一次，怎么会？

> ID：14800257
> 
> 赞同：0
> 
> 时间：2013-02-10T17:08:53.573
> 
> 标签：android, android-layout, layout-inflater

我是 Android 开发的新手。

我有 Activity，我希望向其中添加一些 GUI 元素。

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_dial_details);
    if (android.os.Build.VERSION.SDK_INT >= 11)
        // Show the Up button in the action bar.
        getActionBar().setDisplayHomeAsUpEnabled(true);

    inflateNewRow();
    inflateNewRow();
}

private void inflateNewRow()
{
    LinearLayout thisLayout = (LinearLayout) findViewById(R.id.dial_details_layout);
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            // Before edit!
    //inflater.inflate(R.layout.dialitem_details, thisLayout);
            // After edit, which works!
            inflater.inflate(R.layout.dialitem_details, null);
            thisLayout.addView(ll);
} 
```

第一次调用 inflateNewRow 添加行，很好。第二次调用，好像什么都没做！也不例外，没有添加任何行。

我添加了 setVisibility 调用，只是为了确保。没有什么不同的。

调用两次 inflateNewRow 可能看起来很奇怪，但实际上只是为了这个例子。它将在 onCreate 中调用一次，然后从菜单单击事件中调用。这个简单的例子虽然重现了这个问题。

这是要添加的小视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:ems="10"
    android:inputType="number" >

    <requestFocus />
</EditText>

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

进入这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/dial_details_layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".DialDetailsActivity" >

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="number" >

    <requestFocus />
</EditText>

</LinearLayout> 
```

任何想法为什么只出现/添加第一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:20:54.603

当您在创建一次 LinearLayout ll 后调用此函数但再次调用时，它已经存在不是吗？所以如果你不创建 ll 而只是写

```
inflater.inflate(R.layout.dialitem_details, thisLayout); 
```

代替

```
LinearLayout ll = (LinearLayout) inflater.inflate(R.layout.dialitem_details, thisLayout); 
```

你应该得到想要的结果

并且不需要为每个项目设置可见性为真

# google-apps-script - 用于发送电子邮件并记录已发送电子邮件总数的 Google 电子表格脚本

> ID：14800261
> 
> 赞同：0
> 
> 时间：2013-02-10T17:09:08.317
> 
> 标签：google-apps-script, google-sheets, google-apps

我仍然在这里学习绳索，希望有人能提出最好的解决方法（我已经寻找解决方案但没有成功！）：

我有非常简单的电子表格：

A栏：电子邮件地址；B 列：要发送的消息。（A 列是使用从 Sheet2 中较长的地址列表中获取一些电子邮件地址的公式生成的。）

Sheet2 包含所有电子邮件地址的“主”列表。- A 列：名称；B 列：电子邮件地址

我使用下面的代码作为起点。它将电子邮件发送到 Sheet1 中的地址，并在发送电子邮件时（或者更确切地说，当脚本处理完该行时）用“EMAIL_SENT”标记 C 列中的单元格。

我想在Sheet2的C列中计算发送给每个人的电子邮件总数，但是我不知道解决这个问题的最佳方法是什么，或者如果我说实话，在哪里开始！

```
function sendEmails() {

  var sheet = SpreadsheetApp.getSheetByName('Sheet1');
  var EMAIL_SENT = "EMAIL_SENT";
  var startRow = 1;  // First row of data to process
  var dataRange = sheet.getDataRange()
  var data = dataRange.getValues();

  for (var i = 0; i < data.length; ++i) {
    var row = data[i];
    var emailAddress = row[0];  // First column
    var message = row[1];       // Second column
    var emailSent = row[2];     // Third column

    if (emailSent != EMAIL_SENT) {  // Prevents sending duplicates

      var subject = "Sending emails from a Spreadsheet";

      MailApp.sendEmail(emailAddress, subject, message);
      sheet.getRange(startRow + i, 3).setValue(EMAIL_SENT);
      // Make sure the cell is updated right away in case the script is interrupted
      SpreadsheetApp.flush();  
}
}
} 
```

如前所述，我想统计 Sheet2 中的每个人，因为它包含每个人的电子邮件地址（而 Sheet1 只有少数几个，并且此列表每天都会更改）。

任何人都可以对此有所了解吗？任何建议将不胜感激。

非常感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:25:13.550

第 1 步：在 Sheet2 中找到该电子邮件所在的行。

```
var sheet2 = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet2");
var numRows = sheet2.getDataRange().getNumRows();
var emailList = sheet2.getRange(1,2,numRows,1).getValues();
var emailRow = -1;
for (var j=0; j<numRows; j++) {        
  if (emailList[j][0]==WHATEVER_EMAIL_YOU_ARE_LOOKING_FOR) {
    emailRow = j;
    break;
  }
}
if (emailRow==-1) { /*ERROR! Couldn't find email.*/ } 
```

第 2 步：获取电子邮件的旧计数。

```
var oldValue = sheet2.getRange(emailRow+1,3).getValue(); 
```

第 3 步：写入新值 + 1。

```
sheet2.getRange(emailRow+1,3).setValue(oldValue+1); 
```

注意：emailRow 是从零开始的，而 getRange() 是从一开始的。

# html - 在css中将div元素转换为内联

> ID：14800262
> 
> 赞同：0
> 
> 时间：2013-02-10T17:09:08.253
> 
> 标签：html, css

你好朋友我在css中遇到问题我想将div标签转换为内联

```
<div id="menu1">
 <ul>
 <a href="#"> <li>  one</li> </a>
 <a href="#"> <li>  two</li> </a>
 <a href="#"> <li>  three</li> </a>
 <a href="#"> <li> four </li> </a>
 <a href="#"> <li> five</li> </a>
 <a href="#"> <li>six </li> </a>
 <a href="#"> <li> seven </li> </a>
 <a href="#"> <li> eight </li> </a>
 </ul>
 </div>

<div id="menu2">
<ul>
<a href="#"> <li>  one</li> </a>
<a href="#"> <li>  two</li> </a>
<a href="#"> <li>  three</li> </a>
<a href="#"> <li> four </li> </a>
<a href="#"> <li> five</li> </a>
<a href="#"> <li>six </li> </a>
<a href="#"> <li> seven </li> </a>
<a href="#"> <li> eight </li> </a>
</ul>
</div> 
```

现在我希望菜单 1 显示在左侧，菜单 2 显示在右侧 iam 使用显示内联但它不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:16:45.030

我建议：

```
div {
    width: 48%;
    float: left;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qTY3h/6/)。

或者，如果您的用户有一个兼容的浏览器，您可以将 to 设置`width`为`50%`，用于在元素的定义中`box-sizing`包含`padding`and ：`border-width``width`

```
div {
    width: 50%;
    float: left;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -o-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qTY3h/5/)。

类似地，给定兼容的浏览器，您可以改为使用该`column-count`属性来定义特定数量的列，浏览器会将内容放入其中。为此，我将您当前的（非常无效的）html 包装在另一个元素中，并带有一个`id`“包装器”：

```
#wrapper {
    -moz-column-count: 2;
    -ms-column-count: 2;
    -o-column-count: 2;
    -webkit-column-count: 2;
    column-count: 2;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qTY3h/4/)。

如果您可以选择只需要 Webkit 和 Opera 支持，并且您的用户可能在他们的 Firefox 安装中启用了 flex-box 支持，那么使用 CSS flex-box 模型就成为一种选择，尽管再次需要一个包装元素来包含这两者菜单元素，具有以下 CSS：

```
#wrapper {
    display: -webkit-flex;
    -webkit-flex-direction: row;
    -webkit-flex-wrap: nowrap;
}

#wrapper > div {
    display: -webkit-flex-inline;
    -webkit-flex: 1 1 auto;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qTY3h/7/)。

> 注意：WebKit 实现必须以`-webkit`;为前缀 Gecko 实现是无前缀的，但在偏好之后（除非您使用 Nightly）；Internet Explorer 实现了旧版本的规范，带有前缀；Opera 12.10 实现了最新版本的规范，没有前缀。

* * *

### 无效加价

```
<div id="menu1">
 <ul>
       <a href="#"> <li>  one</li> </a>
       <a href="#"> <li>  two</li> </a>
       <a href="#"> <li>  three</li> </a>
       <a href="#"> <li> four </li> </a>
       <a href="#"> <li> five</li> </a>
       <a href="#"> <li>six </li> </a>
       <a href="#"> <li> seven </li> </a>
       <a href="#"> <li> eight </li> </a>
    </ul>
</div> 
```

a （或 an ）*唯一*有效的子元素是 an ：a or中不允许有其他元素，*除非*它们被包装在一个元素中。因此，要更正您的 HTML，它应该是：`ul``ol``li``ul``ol` *`li`*

 *```
<div id="menu1">
 <ul>
       <li><a href="#">one</a></li>
       <li><a href="#">two</a></li>
       <li><a href="#">three</a></li>
       <li><a href="#">four</a></li>
       <li><a href="#">five</a></li>
       <li><a href="#">six</a></li>
       <li><a href="#">seven</a></li>
       <li><a href="#">eight</a></li>
    </ul>
</div> 
```

`li`如果用 an包裹的目的`a`是使`a`元素的可点击区域填充`li`，那么只需使用`a { display: block; }`

参考：

*   [CSS Flexbox 请！（Flexbox 游乐场/演示）](http://demo.agektmr.com/flexbox/)。
*   [CSS 灵活框布局模块 (W3.org)](http://www.w3.org/TR/css3-flexbox/)。
*   [`box-sizing`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing).
*   [`float`](https://developer.mozilla.org/en-US/docs/CSS/float).
*   ['使用 CSS 灵活框' (MDN)](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:14:06.487

可以试试[`float: left`](https://developer.mozilla.org/en-US/docs/CSS/float)2s`<div>`吗？

见**[演示](http://jsfiddle.net/pkZ6e/)**。

```
#menu1, #menu2 {
    float:left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T17:17:23.057

使用 CSS`float`属性，您可以获得所需的内容。

```
#menu1 {
    float: left;
}
#menu2 {
    float: left;
} 
```

你可以看看[这个小提琴](http://jsfiddle.net/tB9kq/1/)作为一个例子。

### 也可以看看

*   [CSS-Tricks - 关于浮点数](http://css-tricks.com/all-about-floats/)
*   [W3Schools - CSS 浮动](http://www.w3schools.com/css/css_float.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T14:36:15.130

我认为你应该在 inline-block 中显示你的列表（使用 inline-block 你保持初始宽度）。

```
#menu1, #menu2 {
   display:inline-block;
} 
```

奥利维尔*

# html - CSS最小高度不起作用

> ID：14800264
> 
> 赞同：5
> 
> 时间：2013-02-10T17:09:29.207
> 
> 标签：html, css

我有一个 parent`#out`和一个 child `#in`div。父级是绝对定位的，它的最小高度是 100%。它有效，但如果我也将 min-height: 100% 设置为孩子，那么它没有结果。

HTML：

```
<div id="out"><div id="in">foo<br/>bar</div></div> 
```

CSS：

```
#out {
    position: absolute;
    min-height: 100%;
    background-color: green;
    width: 100%;
}
#in {
    min-height: 100%;
    background-color: red;
} 
```

**它仅适用于 Opera** JSfiddle 链接：http: [//jsfiddle.net/TPyKS/](http://jsfiddle.net/TPyKS/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T17:15:38.533

绝对定位元素不会与 DOM 中的其他元素一起计算。它们被视为自己的浮动元素。其他元素的高度/宽度对它们没有任何意义。因此，您无法在它们上设置基于百分比的最小高度/最小宽度。您需要明确设置高度/宽度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T17:14:23.710

添加`height: 100%;`到`#out`

```
#out {
    position: absolute;
    min-height: 100%;
    background-color: green;
    width: 100%;
    height: 100%;
} 
```

工作演示：http: [//jsfiddle.net/enve/TPyKS/1/](http://jsfiddle.net/enve/TPyKS/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T17:17:23.690

改变`min-height :100% to height :100% on #out`意志工作...

更新小提琴：http: [//jsfiddle.net/TPyKS/2/](http://jsfiddle.net/TPyKS/2/)

# magento - Magento：按两个类别过滤的产品集合

> ID：14800266
> 
> 赞同：0
> 
> 时间：2013-02-10T17:09:39.597
> 
> 标签：magento, filter, categories

我正在编写一个为我加载特色产品列表的模块。所有特色产品都位于自己的类别 + 隐藏类别“特色”中。该脚本返回一个错误。

在类别视图（list.phtml）上，我要求`gettopproducts.phtml`（效果很好）：

```
<?php $currentCategory = Mage::registry('current_category'); ?>
<?php $_products = $this->getTopProducts($currentCategory); ?>
<?php echo $this->__('Available products: ').$_products->count(); ?> 
```

从`gettopproducts.phtml`我调用一个传递当前类别的函数`getTopProducts()`。`Gettopproducts.php`在`Gettopproducts.php`我有这个：

```
public function getTopProducts($currentCategory)
{
    $_productCollection = Mage::getResourceModel('reports/product_collection')
    ->addAttributeToSelect('*')
    ->addCategoryFilter($currentCategory)
    ->addAttributeToFilter('category_ids',array('finset'=>'87'));
    $_productCollection->load();
    return $_productCollection;
} 
```

此行：`->addAttributeToFilter('category_ids',array('finset'=>'87'));`应添加第二个类别过滤器（“特色”类别的 ID）。但是当我使用它时，我得到一个错误。当我删除这一行时：`->addAttributeToFilter('category_ids',array('finset'=>'87'));`它工作得很好。

我正在使用 Magento 1.7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:47:35.230

我找到了原因。对于 Magento 1.4+，类别 ID 不是报告/产品集合的成员。

这是如何获得它的方式：替换`->addAttributeToFilter('category_ids',array('finset'=>'87'));` 为：

```
$_productCollection->joinField('category_id', 'catalog/category_product', 'category_id', 'product_id = entity_id', null, 'left');
$_productCollection->addAttributeToFilter('category_id', array('in' => array('finset' => '87'))); 
```

所以代码看起来像这样：

```
$_productCollection = Mage::getResourceModel('reports/product_collection');
$_productCollection->addAttributeToSelect('*');
$_productCollection->addCategoryFilter($currentCategory);
$_productCollection->joinField('category_id', 'catalog/category_product', 'category_id', 'product_id = entity_id', null, 'left');
$_productCollection->addAttributeToFilter('category_id', array('in' => array('finset' => '87')));        
$_productCollection->load();
return $_productCollection; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-18T14:20:42.733

对于 magento 1.7，这对我有用：

```
$collection = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToSelect('id')        
    ->addAttributeToFilter('visibility', 4)
    ->addAttributeToFilter('home_slider', array('neq' => ''))
    ->addAttributeToFilter('home_slider_value', $slide_num)
    ->addStoreFilter();
    //here pass an array() of CATEGORY IDs
    $catids = array('id_1,id_2, etc..'); 

    $statements = array();
    foreach ($catids as $categoryId){
        if (is_numeric($categoryId)){
         $statements[] = "{{table}}.category_id = $categoryId";
        }
    }

    $collection->distinct(true)
    ->joinField('category_id','catalog/category_product', null,'product_id = entity_id', implode(" OR ",$statements),'inner'); 
```

# algorithm - 在三元搜索树中查找最长的公共前缀

> ID：14800267
> 
> 赞同：1
> 
> 时间：2013-02-10T17:09:40.907
> 
> 标签：algorithm, sorting, dictionary, data-structures, ternary-search-tree

我为 20000 个单词实现了三元搜索树。我想知道一种算法来找到最长的公共前缀（至少由 2 个单词共享的前缀）？无论如何要在树中找到最长的公共前缀？（没有三元搜索树）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:40:48.507

有一个非常简单的解决方案，它是线性复杂度，你知道[Rabin-Karp](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)是一种字符串匹配算法，它使用散列来做到这一点。想法是创建一个哈希表。您遍历所有单词，并在每个长度 1、2、..len(word) 处将键（该子字符串的哈希值）放入表中，并且当表中已经有了该键时，这意味着您有具有该哈希值的 2 个单词（至少）。然后你只需要找到具有该属性的最长索引。

# android - 单击时被键盘阻止的EditText

> ID：14800268
> 
> 赞同：0
> 
> 时间：2013-02-10T17:09:46.647
> 
> 标签：android, android-layout

问题标题可能具有误导性，但我认为对于 Android 新手来说是一个常见问题：我有一个带有 a 的活动`LinearLayout`，并且`EditText`屏幕底部有一个。当我单击它时，键盘出现在 上`EditText`，在键入时将其隐藏。有没有办法实现大多数用户的期望，即活动向下滚动直到`EditText`再次可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:11:51.937

您可以使用 a`ScrollView`来实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:13:08.393

您可以`ScrollView`用作顶视图。并`RelativeLayout`在其中定义。

定义为

```
<Scrollview.......>
   <RelativeLayout .....>
         //other view.
   </RelativeLayout >
</Scrollview> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T17:26:25.493

将您的内容添加`LinearLayout`到 a中`Scrollview`，当`EditText`视图获得焦点时`manually scroll`，`ScrollView`. 就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T04:41:14.160

您是否尝试过`android:windowSoftInputMode="stateVisible|adjustResize"`在清单中添加您的活动？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-15T23:31:55.330

如果 adjustResize 仍然无法完全显示您想要的视图，您可以尝试此操作。无论您关注什么视图，都可以创建一个 onTouchListener，然后执行以下操作：

```
 setOnTouchListener(new OnTouchListener()  {

        Runnable shifter=new Runnable(){
            public void run(){
                try {
                    int[] loc = new int[2];                 
                    //get the location of someview which gets stored in loc array
                    findViewById(R.id.someview).getLocationInWindow(loc);
                    //shift so user can see someview
                    myscrollView.scrollTo(loc[0], loc[1]);   
                }
                catch (Exception e) {
                    e.printStackTrace();
                }   
            }}
        };

        Rect scrollBounds = new Rect();
        View divider=findViewById(R.id.someview);
        myscollView.getHitRect(scrollBounds);
        if (!divider.getLocalVisibleRect(scrollBounds))  {
            // the divider view is NOT  within the visible scroll window thus we need to scroll a bit.
            myscollView.postDelayed(shifter, 500);
        }

    }); 
```

//本质上，我们制作了一个可滚动到您希望在屏幕上可见的某个视图的新位置的可运行对象。仅当它不在滚动视图范围内（不在屏幕上）时，您才执行该可运行文件。通过这种方式，它将滚动视图转移到引用的视图（在我的例子中，'someview' 是一个行分隔符）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-17T09:14:56.393

最简单的方法是在清单中添加`android:windowSoftInputMode="adjustPan"`到您的目标活动。

# java - 没有渐变的android纯白色背景

> ID：14800276
> 
> 赞同：4
> 
> 时间：2013-02-10T17:10:31.187
> 
> 标签：java, android, android-manifest

我已将我的 Android 应用程序的背景设置为白色，并使用浅色主题来尝试获得白色背景。我通过在清单中设置以下属性来做到这一点：

```
android:background="@android:color/white"
android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen" 
```

这给了我一个白色的背景，但也有一个从浅灰色到白色的颜色渐变。我希望背景是纯白色，没有渐变。有什么方法可以轻松实现这一目标吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T17:15:27.847

你有很多不同的方法来做到这一点。不过，随便挑**一个**。

### 选项1

将每个布局的背景设置为`android:background="@android:color/white"`或`android:background="#ffff"`。

### 选项 2

如果您不想在您的应用程序中维护它，您可以使用`android:background="@color/background"`然后使用`<color name='background'>#ffff</color>`.

### 选项 3

另一种选择是制作一个`FrameLayout`您始终使用的文件，`setContentView()`并且该文件具有您的背景颜色（根据选项 1），然后在其中填充您的其他布局。

### 选项 4

您可以通过 Java 代码使用`layout.setBackgroundColor(Color.rgb(255, 255, 255));`.

### 选项 5

扩展主题并更改其背景：

```
<style name="AppTheme" parent="android:Theme.Light.NoTitleBar.Fullscreen">
  <item name="android:background">@android:color/white</item>
  <item name="android:windowBackground">@android:color/white</item>
  <item name="android:colorBackground">@android:color/white</item>
</style> 
```

然后，在你的清单中，

```
android:theme="@style/AppTheme" 
```

# c# - 使用 new 时的数组初始化

> ID：14800281
> 
> 赞同：5
> 
> 时间：2013-02-10T17:11:14.593
> 
> 标签：c#, c++, arrays, initialization

在 C# 中，我可以这样做：

```
char[] a = new char[] {'a', 'a', 'a'}; 
```

但是我可以在 C++ 中做类似的事情吗？我试过：

```
char *a = new char [] {'a', 'a', 'a'}; 
```

但它不编译。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T17:13:00.553

为什么不这样做呢？：

```
char a[] = {'a', 'a', 'a'}; 
```

还要完全避免使用数组。采用`std::vector`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-10T17:27:17.973

这是 C++ 规范中的一个错误（它不允许这个简单的构造编译）。您需要提供尺寸

```
char *a = new char [3] {'a', 'a', 'a'}; 
```

见[http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1469](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1469)。请注意，如果您给类型名称加上括号，则它是*类型 ID*而不是*新类型 ID*，因此在语法上允许您省略大小表达式。所以你也许可以找到一个允许你说的实现

```
char *a = new (char[]){'a', 'a', 'a'}; 
```

尽管很明显，这不是可能的明确意图（并且`new`段落中的某些规则可以解释为禁止它）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-10T17:14:44.970

您可能不想在 C++ 中使用数组。改用 a [`std::vector`](http://en.cppreference.com/w/cpp/container/vector)。

您甚至可以将其初始化为 3'a's。

```
std::vector<char> vectorOfChars(3, 'a'); 
```

如果你的编译器支持 C++11，你甚至可以使用初始化列表。

```
std::vector<char> vectorOfChars{'a', 'a', 'a'}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-10T17:12:28.033

我想你想要的是这样的：

```
 const char a[] = {'a', 'a', 'a'}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-10T17:13:15.540

是的，你可以这样做；

```
char a[] = {'a', 'a', 'a'}; 
```

[`Arrays (C++)`](http://msdn.microsoft.com/en-us/library/7wkxxx2e.aspx)从*MSDN 签*出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-10T18:09:55.103

字符串 a = "aaa"; a[0] , a[1] ..etc 如果你想制作字符串的二维数组..etc 这会容易得多

# c# - Why isn't my image displaying in my view?

> ID：14800282
> 
> 赞同：1
> 
> 时间：2013-02-10T17:11:22.027
> 
> 标签：c#, asp.net-mvc, entity-framework, razor

I am storing images as byte arrays inside a SQL database.

Here is my Index method (inside the controller):

```
public ActionResult Index()
{
    var list = db.UserProfiles.ToList();

    Dictionary<int, ActionResult> picture = list.ToDictionary(item => item.CarID, item => CarPic(item.Picture));

    ViewBag.CarPictures = picture;

    return View(list);
} 
```

Here is my CarPic method:

```
public ActionResult CarPic(byte[] imageBytes)
{
    return imageBytes == null ? null : File(imageBytes, "image/jpeg");
} 
```

Here is how I am trying to display the image inside my view:

```
foreach(var item in Model)
{
    <img src="@ViewBag.CarPictures[item.CarID]"/>
} 
```

This is what shows up in the web browser:

![Image](../Images/4cb29b7ac919577c711443dc6e320a60.png)

Here is a screenshot of Intellisense:

![Intellisense](../Images/a95bd3f4d533fd4e4bbb81ccb482dae2.png)

So **Picture** is not null, it is a byte array. The image itself is a JPEG. Here is the code I am using to convert the image to a byte array to store it in the database:

```
[Authorize]
[HttpPost]
public ActionResult Create(Stock stock, HttpPostedFileBase file)
{
    if (file != null)
    {
        if (file.ContentType.Contains("image"))
        {
            using (var inputStream = file.InputStream)
            {
                var memoryStream = inputStream as MemoryStream;
                if (memoryStream == null)
                {
                    memoryStream = new MemoryStream();
                    inputStream.CopyTo(memoryStream);
                }

                var data = memoryStream.ToArray();

                stock.Picture = data;
            }
        }
    }

    if (ModelState.IsValid)
    {
        db.UserProfiles.Add(stock);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    return View(stock);
} 
```

I have checked the Database and the field is indeed populated. Here is my Stock model:

```
[Table("Stock")]
public class Stock
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int CarID { get; set; }

    public byte[] Picture { get; set; }
    //etc etc
} 
```

I am tearing my hair out here trying to work out why this isn't working, as I think I have done everything right. What am I doing wrong?

Thanks very much

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T17:15:09.077

You're misunderstanding the `<img>` tag.

`<img src="..." />` allows you to display an image **from a URL**.
The `src` attribute must specify a URL that returns the actual image.

If you want to embed the image in the page, you can use a `data:` URI.

# jquery - 为什么我的 .on('change') 不起作用？

> ID：14800285
> 
> 赞同：5
> 
> 时间：2013-02-10T17:11:28.360
> 
> 标签：jquery, jquery-on

我正在将输入动态添加到我的页面中，因此需要使用`.on`将事件附加到它们。

我正在尝试将`change`事件附加到 a `type="file"` `input`，但它不起作用。

我试过两种方法，第一种：

```
$('.container').on('change', '.file-input-hidden' , function(){ 
```

其中输入有一个类`file-input-hidden`。

第二个：

```
$('.container').on('change', 'input[type="file"]' , function(){ 
```

但是当使用`input`.

怎么了？

**编辑：**

在此处查看页面：[链接](http://ry-design.co.uk/image-upload-test.php)

和js：

```
$('.container').on('click', '.file-browse' , function(){
    var thisone = $(this).attr('id');
    $('input[name="input-'+ thisone+'"]').click();
});

$('.file-input-hidden').on('change', function(){
    var thetext = $(this).val();
    var thetextsplit = thetext.split('\\').pop();
    var thisone = $(this).attr('name').split('-').pop();
    if($('.file-info').text() == thetextsplit){
        alert('you have already selected this file');
        $(this).replaceWith( $(this).val('').clone( true ) );
    }
    else{
        $('#info-'+ thisone).text(thetextsplit);
        $('#clear-'+ thisone).fadeIn(100);
        var emptyinputs = $('.file-info:empty').length;
        if(emptyinputs <1){
            var filledinputs = $(".file-info:contains('.')").length;
            var thisnumber = filledinputs + 1;
            var filecontainer = $('<div>').addClass('file-container');
            var fileinfo = $('<div>').addClass('file-info').attr('id','info-file'+thisnumber);
            var filebrowse = $('<div>').addClass('file-browse').attr('id','file'+thisnumber).text('Browse');
            var fileclear = $('<div>').addClass('file-clear').attr('id','clear-file'+thisnumber).text('X');
            var newinput = $('<input>').attr({'type':'file','name':'input-file'+thisnumber}).addClass('file-input-hidden');
            var thebody = $('.container');
            (filecontainer).append(fileinfo,filebrowse,fileclear);
            filecontainer.appendTo(thebody);

            var theform = $('#hidden-inputs');
            newinput.appendTo(theform);
        }
    }

    if($(this).val() == ''){
    $('#clear-'+thisone).fadeOut(100);
    }
});

$('.container').on('click', '.file-clear' , function(){
    var thisone = $(this).attr('id').split('-').pop();
    $('input[name="input'+ thisone +'"]').replaceWith( $('input[name="input'+ thisone +'"]').val('').clone( true ) );
    $('#info-'+ thisone).text('');
    $(this).fadeOut(100);
}); 
```

HTML：

```
 <div class="container">
    <div class="file-container">
      <div class="file-info" id="info-file1"></div>
      <div class="file-browse" id="file1">Browse</div>
      <div class="file-clear" id="clear-file1">X</div>
    </div>
    </div>

    <form action="" method="POST" enctype="multipart/form-data" id="hidden-inputs">
  <input type="submit" style="clear:both; float:left;"/>
  <input type='file' name="input-file1" class="file-input-hidden" />
    </form> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-10T17:25:06.773

**你的代码...**

**jQuery** :

```
$('.container').on('change', 'input[type="file"]' , function(){ 
```

**HTML**：

```
<div class="container">...</div>

<form>
    <input type='file' name="input-file1" class="file-input-hidden" />
</form> 
```

它不起作用*，*因为`input[type="file"]`不在.*`.container`*

 *把它放在里面`div.container`或试试这样的东西..

```
$(document).on('change', 'input[type="file"]' , function(){ 
```

[请参阅`.on()`](http://api.jquery.com/on/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:20:49.873

如果您在页面加载后添加元素，则必须在生成新输入的代码之后再次调用 change 方法，您可以像这样使用：

```
$('.file-input-hidden').on("change", function(){

}) 
```*

# android - onIabPurchaseFinished 从未调用过。

> ID：14800286
> 
> 赞同：112
> 
> 时间：2013-02-10T17:11:40.973
> 
> 标签：android, in-app-billing

我一直在尝试为我的第一个应用设置应用内计费，并且一直在使用 android.test.purchased sku。购买成功了，我设法将 SKU 放入我的库存中，但是，正如标题所说，onIabPurchaseFinished 从未被调用。

我认为这可能与此日志有关：“无法保存哪个视图具有焦点，因为焦点视图 com.android.internal.policy.impl.PhoneWindow$DecorView@406743d0 没有 id”。就在进入 Google Play 之前，它会弹出。虽然我不太确定那是什么意思...

启动购买：

```
mHelper.launchPurchaseFlow(this, sku, 10001, mPurchaseFinishedListener, ""); 
```

和听众：

```
IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener = new IabHelper.OnIabPurchaseFinishedListener() {

    @Override
    public void onIabPurchaseFinished(IabResult result, Purchase info) {
        System.out.println("Purchase Finish heard something");

        if (result.isFailure()) {
             Log.d(TAG, "Error purchasing: " + result);
             return;
        } else{
                Log.d(TAG,"Success!");
             }

    }
}; 
```

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2013-02-19T21:53:39.110

尝试将此添加到调用的 Activity 中`mHelper.launchPurchaseFlow(..)`：

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.d(TAG, "onActivityResult(" + requestCode + "," + resultCode + "," + data);

    // Pass on the activity result to the helper for handling
    if (!mHelper.handleActivityResult(requestCode, resultCode, data)) {
        // not handled, so handle it ourselves (here's where you'd
        // perform any handling of activity results not related to in-app
        // billing...
        super.onActivityResult(requestCode, resultCode, data);
    }
    else {
        Log.d(TAG, "onActivityResult handled by IABUtil.");
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-10T11:08:34.677

我刚刚发现了另一个重要的事情：用于启动购买流程的 requestCode 必须 >= 0！

我使用“new Random().nextInt()”来生成一个随机的 requestCode，有时它有效，有时它没有。现在我在以下文档中发现 requestCode 不应该是负数：

[http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-09T14:53:38.787

我有同样的问题，也没有调用 **onActivityResult 。**
受到[@Ghulam 回答的](https://stackoverflow.com/a/48599182/2317116)启发，我意识到活动**onActivityResult**不会自动调用片段的**onActivityResult**，因此我必须手动进行。

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if(mCurrentFragment!= null){
            mCurrentFragment.onActivityResult(requestCode, resultCode, data);
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-03T15:52:34.127

您需要调用 protected void onActivityResult(); 在您的父 Activity 而不是 MainActivity(Trivial Drive) 中，您从那里调用 MainActivity，即 Trivial Drive Activity。

如果购买成功，您将收到结果代码值 -1，否则为 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-29T12:42:34.290

我遇到了同样的问题，并且已经实施了公认的解决方案，但不知道是什么原因造成的。迁移到新的**Google Play 结算库 1.0** *（2017 年 9 月 19 日发布）*为我解决了这个问题！

我希望以下链接可以帮助想要实现新库的人：

[谷歌关于发布的博客文章](https://android-developers.googleblog.com/2017/09/google-play-billing-library-10-released.html)

[谷歌的 youtube 视频](https://www.youtube.com/watch?v=y78ugwN4Obg)

[玩计费库培训班](https://developer.android.com/training/play-billing-library/index.html)

[Google 的 Trivial Drive v2 示例](https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive_v2)

[在 Google I/O 2017 期间发布的 Play Billing Library codelab](https://codelabs.developers.google.com/codelabs/play-billing-codelab/#0)

[播放结算库文档](https://developer.android.com/google/play/billing/billing_library.html)

[类和方法的官方参考](https://developer.android.com/reference/com/android/billingclient/classes.html)

[发布说明](https://developer.android.com/google/play/billing/billing_library_releases_notes.html)

# c# - 如何获取数组中元素的数量，扩展方法 Count() 和 Length 给出了数组的大小。

> ID：14800288
> 
> 赞同：0
> 
> 时间：2013-02-10T17:11:43.213
> 
> 标签：c#, arrays, loops

嗨，我试图找到数组中的元素数

```
byte[] salt = new byte[32]; 
```

现在我只提到了大小 32 所以数组的**Length**属性和 Enumerable 的**计数**方法会给我**32**。

即使我将使用 for 或 foreach 或任何其他循环构造迭代此数组**盐**，它也会迭代 32 次，并且每个索引上的值为 0（即字节的默认值）

现在假设我这样做：

```
for (int i = 0; i < 5 ; i++)
        {
            salt[i] = 4-i;
        } 
```

而且我想知道从索引 0 开始在 Array 中顺序插入了多少个元素，在这里你可能会说你是在欺骗你迭代它 5 次并且你知道数字是 5 ，但是我有繁重的循环和其他逻辑（附加前置到另一个字节数组）。**我的问题是否有任何其他内置函数可以给我这个数字 5 ？**即使我迭代并检查第一个默认值并在那里中断循环并获取计数，但可能插入的最后一个值是 0 就像上面的 salt[4] 是 0 这样迭代会给我计数 4 这是不正确的. 如果我没记错的话，我认为当我们声明大小为 32 的数组时，保留 32 个连续内存字节以上，您可以在 0-31 的任何索引处自由插入，并且您有责任跟踪元素的位置、方式和数量被分配给 Array 。我希望你明白我的意思并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:24:19.987

数组是一个数组，在.NET 中是在分配时初始化的。一旦它被初始化，给定值是未初始化还是只是 0 的问题是无法检查的。一个 0 就是一个 0。

但是，您可以通过多种方式绕过它。您可以`List<int>`像@SLaks 建议的那样使用 a 来获得一个动态分配的列表，该列表仅使用您想要的元素进行初始化。

您也可以使用，而不是数组`int`和数组`int?`，因此`null`值与 0 不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T17:21:39.300

简短的回答是您不能，该数组包含 32 个整数，.net 框架不关心其中一些是否为 0，因此您可以创建自己的函数来计算数组中有多少个整数不同于 0，或者保留当您为数组元素或类似的东西分配值时的“计数”。

或者您可以使用另一个容器，例如一个[列表](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)，并从中动态添加或删除整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T17:21:25.260

好的，当您将数组定义为 int[] myArray = int[32]; 你是说，我有 32 个整数。不，为我稍后将填写的 32 个整数创建空间。这就是 count 给你 32 的原因。

如果您想要可以真正添加和调整大小的东西，则需要使用 List （或其中一个亲戚。

如果您想为列表设置“上限”，我发现了这个：[C# 中的最大容量集合](https://stackoverflow.com/questions/1213317/maximum-capacity-collection-in-c-sharp)

# c - 使用管道分叉过程中的程序崩溃

> ID：14800293
> 
> 赞同：0
> 
> 时间：2013-02-10T17:12:02.067
> 
> 标签：c, fork, execv, broken-pipe, write-error

我正在为课程作业编写一个基本的 shell，它将在给定的路径列表中找到一个命令，并执行该命令。它也用于处理管道。但是，当我派生一个子进程时，我在 gdb 中收到“写入错误：管道损坏”消息，并且程序突然终止。

我似乎无法理解为什么会发生这种情况，因为我一直对打开和关闭正确的管道持谨慎态度，并且进程分叉似乎可以按预期工作。有更多 C 和 unix 编程经验的人可以帮我诊断问题吗？我的 fork 实现/管道实现在逻辑上是否不正确？

```
//commands is of the format {"ls -al", "more", NULL}
//it represents commands connected by pipes, ex. ls -al | more
char **commands = parseArgv(consoleinput, SPECIAL_CHARS[4]);

int numcommands = 0;

while( commands[numcommands]!=NULL )
{
    numcommands++;
}

const int  numpipes = 2*(numcommands-1);

int pipefds[numpipes];

int i=0;
for(i=0; i<numpipes;i=i+2)
{
    pipe(pipefds+i);
}

int pipe_w = 1;
int pipe_r = pipe_w - 3;
int curcommand = 0;

while(curcommand < numcommands)
{
    if(pipe_w < numpipes)
    {
        //open write end
        dup2(pipefds[pipe_w], 1);
    }

    if(pipe_r > 0)
    {
        //open read end
        dup2(pipefds[pipe_r], 0);
    }

    for(i=0;i<numpipes;i++) //close off all pipes
    {
        close(pipefds[i]);
    }

    //Parse current command and Arguments into format needed by execv

    char **argv = parseArgv(commands[curcommand], SPECIAL_CHARS[0]);

    //findpath() replaces argv[0], i.e. command name by its full path ex. ls by /bin/ls
    if(findPath(argv) == 0)
    {
        int child_pid = fork();

        //Program crashes after this point
        //Reason: /bin/ls: write error, broken pipe

        if(child_pid < 0)
        {
            perror("fork error:");
        }
        else if(child_pid == 0)     //fork success
        {
            if(execv(argv[0], argv) == -1)
            {
                perror("Bad command or filename:");
            }

        }
        else
        {
            int child_status;
            child_pid = waitpid(child_pid, &child_status, 0);
            if(child_pid < 0)
            {
                perror("waitpid error:");
            }
        }
    }
    else
    {
        printf("Bad command or filename");
    }
    free(argv);

    curcommand++;
    pipe_w = pipe_w + 2;
    pipe_r = pipe_r + 2;
}

//int i=0;
for(i=0;i<numpipes;i++) //close off all pipes
{
    close(pipefds[i]);
}

free(commands); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:51:02.013

在 fork() 调用之后（即在子进程中）复制文件描述符是正确的方法。此外，waitpid() 调用使一个子进程等待另一个子进程，并且 shell 挂起。wait() 调用应该移到循环之后，即父母应该等待所有的孩子。

# iphone - 无法通过其标签获取 UIButton

> ID：14800294
> 
> 赞同：0
> 
> 时间：2013-02-10T17:12:20.110
> 
> 标签：iphone, ios, objective-c, uibutton, uidatepicker

我有 4 个`UIButton`，分别命名为 morningbutton、下午按钮、晚上按钮和 nightbutton，它的标签号为 1、2、3、4 ..并且分配在`viewDidLoad`. 我正在调用 userTimepickerValuechanged 方法，`viewDidLoad`它正在为 datepicker 调用，并且 notificationbuttonchanged 方法由`UIButton`s 调用。

> 更新 - selectedButton 是一个 NSInteger

用户点击 4 个标记按钮中的 1 个（调用 notifyButtonChanged）

用户更改日期选择器的值（调用 userTimePickerValueChanged）

当我点击一个基于标签 notificationButtonChanged 的​​按钮时，当我在 datepicker 中选择一个时间时，将调用具有自定义时间显示的 datepicker，该时间应该存储在 usertimepickerchanged 方法中..但是 selectedButton 返回 0。

如果我把 selectedButton = meadowButton.tag ..then 第二种情况执行，那么所有 4 种情况应该怎么做。

我哪里错了？

```
 -(IBAction)notificationButtonChanged:(UIButton *)control
    {
    if (control.tag == 1)
    {
        [userTimePicker reloadInputViews];

        [components setHour:6];;
        [components setMinute:00];

        NSDate *date1 = [gregorian dateFromComponents:components];

        [components setHour:10];
        [components setMinute:00];

        NSDate *date2 = [gregorian dateFromComponents:components];

        [userTimePicker setDatePickerMode:UIDatePickerModeTime];

        [userTimePicker setMinimumDate:date1];
        [userTimePicker setMaximumDate:date2];

    }

    if (control.tag == 2)
    {
        [userTimePicker reloadInputViews];

        [components setHour:12];
        [components setMinute:00];

        NSDate *date1 = [gregorian dateFromComponents:components];

        [components setHour:14];
        [components setMinute:00];

        NSDate *date2 = [gregorian dateFromComponents:components];

        [userTimePicker setDatePickerMode:UIDatePickerModeTime];

        [userTimePicker setMinimumDate:date1];
        [userTimePicker setMaximumDate:date2];

    }

    if (control.tag == 3)
    {
        [userTimePicker reloadInputViews];

        [components setHour:15];
        [components setMinute:00];

        NSDate *date1 = [gregorian dateFromComponents:components];

        [components setHour:18];
        [components setMinute:00];

        NSDate *date2 = [gregorian dateFromComponents:components];

        [userTimePicker setDatePickerMode:UIDatePickerModeTime];

        [userTimePicker setMinimumDate:date1];
        [userTimePicker setMaximumDate:date2];

    }

    if (control.tag == 4)
    {
        [userTimePicker reloadInputViews];

        [components setHour:19];
        [components setMinute:00];

        NSDate *date1 = [gregorian dateFromComponents:components];

        [components setHour:22];
        [components setMinute:00];

        NSDate *date2 = [gregorian dateFromComponents:components];

        [userTimePicker setDatePickerMode:UIDatePickerModeTime];

        [userTimePicker setMinimumDate:date1];
        [userTimePicker setMaximumDate:date2];

    }
}

-(void) userTimePickerValueChanged:(UIButton *)sender
{
    selectedButton = [sender tag];

       switch (selectedButton)
    {
case 1:
    {
        NSUserDefaults *userSelectedMorningTime = [NSUserDefaults standardUserDefaults];

        NSDate *selectedMorningTime = [userTimePicker date];

        NSLog (@"SETTING: morningTimeKey");

        [userSelectedMorningTime setObject:selectedMorningTime forKey:@"morningTimeKey"];
        [userSelectedMorningTime synchronize];
    }
    break;
    case 2:
        {

            NSUserDefaults *userSelectedAfternoonTime = [NSUserDefaults standardUserDefaults];

            NSDate *selectedAfternoonTime = [userTimePicker date];

            NSLog (@"SETTING: afternoonTimeKey");

            [userSelectedAfternoonTime setObject:selectedAfternoonTime forKey:@"afternoonTimeKey"];
            [userSelectedAfternoonTime synchronize];

        }break;
        case 3:
        {

            NSUserDefaults *userSelectedEveningTime = [NSUserDefaults standardUserDefaults];

            NSDate *selectedEveningTime =[userTimePicker date];

            NSLog (@"SETTING: eveningTimeKey");

            [userSelectedEveningTime setObject:selectedEveningTime forKey:@"eveningTimeKey"];
            [userSelectedEveningTime synchronize];

        }break;
        case 4:
        {

            NSUserDefaults *userSelectedNightTime = [NSUserDefaults standardUserDefaults];

            NSDate *selectedNightTime =[userTimePicker date];

            NSLog (@"SETTING: nightTimeKey");

            [userSelectedNightTime setObject:selectedNightTime forKey:@"nightTimeKey"];
            [userSelectedNightTime synchronize];

        }
            break;
        default:
            break;
    }

} 
```

viewDidLoad

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    userTimePicker = [[UIDatePicker alloc]init];
    [userTimePicker addTarget: self
                   action: @selector(userTimePickerValueChanged:)forControlEvents: UIControlEventValueChanged];

    morningButton = [[UIButton alloc]init];
    morningButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];

    afternoonButton = [[UIButton alloc]init];
    afternoonButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];

    eveningButton = [[UIButton alloc]init];
    eveningButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];

    nightButton =[[UIButton alloc]init];
    nightButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];

 }

    -(IBAction)settingsButtonChanged:(UIButton *)sender
{

    settingsView.frame = CGRectMake(25.0, 60.0, 280.0, 400.0);

    morningButton.tag = 1;
    morningButton.frame = CGRectMake(25.0, 20.0, 80.0, 40.0);
    morningButton.backgroundColor = [UIColor brownColor];
    [morningButton setTitle:@"Morning" forState:UIControlStateNormal];

    afternoonButton.tag =2;
    afternoonButton.frame = CGRectMake(185.0, 20.0, 80.0, 40.0);
    afternoonButton.backgroundColor = [UIColor grayColor];
    [afternoonButton setTitle:@"Afternoon" forState:UIControlStateNormal];

    eveningButton.tag = 3;
    eveningButton.frame = CGRectMake(25.0, 70.0, 80.0, 40.0);
    eveningButton.backgroundColor = [UIColor greenColor];
    [eveningButton setTitle:@"Evening" forState:UIControlStateNormal];

    nightButton.tag = 4;
    nightButton.frame = CGRectMake(185.0, 70.0, 80.0, 40.0);
    nightButton.backgroundColor = [UIColor orangeColor];
    [nightButton setTitle:@"Night" forState:UIControlStateNormal];

    userTimePicker.frame = CGRectMake(60.0, 194.0, 150.0, 180.0);
    userTimePicker.datePickerMode = UIDatePickerModeTime;

    [morningButton addTarget:self action:@selector(notificationButtonChanged:) forControlEvents:UIControlEventTouchUpInside];
    [afternoonButton addTarget:self action:@selector(notificationButtonChanged:) forControlEvents:UIControlEventTouchUpInside];
    [eveningButton addTarget:self action:@selector(notificationButtonChanged:) forControlEvents:UIControlEventTouchUpInside];
    [nightButton addTarget:self action:@selector(notificationButtonChanged:) forControlEvents:UIControlEventTouchUpInside];

    [self.view addSubview:remedyViewBackButton];
    [settingsView addSubview:morningButton];
    [settingsView addSubview:afternoonButton];
    [settingsView addSubview:eveningButton];
    [settingsView addSubview:nightButton];

    [settingsView addSubview:userTimePicker];
    [remedyView addSubview:remedyViewBackButton];
    [remedyView addSubview:settingsView];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:18:23.780

因为您没有为此设置标签，所以默认情况下将其分配为 0。如果您已为其分配标签，则在代码中的某处您将标签 0 重新分配给它，检查它重新分配的位置。分配超过 1000 个标签然后尝试。表示为它们分配 1000,1001,1002,1003 仅用于检查。

将您的代码更改为此

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    userTimePicker = [[UIDatePicker alloc]init];
    [userTimePicker addTarget: self
                   action: @selector(userTimePickerValueChanged:)forControlEvents: UIControlEventValueChanged];

    morningButton = [[UIButton alloc]init];
    morningButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];

morningButton.tag=1;
    afternoonButton = [[UIButton alloc]init];
    afternoonButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
afternoonButton.tag=2;

    eveningButton = [[UIButton alloc]init];
    eveningButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];

 eveningButton.tag=3;

    nightButton =[[UIButton alloc]init];
    nightButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
nightButton.tag=4;

 } 
```

还初始化所有按钮`initWithFrame`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T17:19:05.867

当`-(void)userTimePickerValueChanged:(UIButton *)sender`被调用时，发送者是日期选择器，并且您错误地将其转换为 UIButton*。该标签每次都是相同的值，日期选择器本身的标签，可能为 0。

不确定您要在该方法中使用什么功能，但开关可能基于日期选择器的*值*，即选择的日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T17:19:59.520

如果我正确理解您在做什么，`userTimePickerValueChanged`则由时间选择器调用，因此

```
-(void) userTimePickerValueChanged:(UIButton *)sender 
```

发件人将是时间选择器，而不是您的任何按钮。这就解释了为什么它不起作用。

要解决此问题，您需要在类中定义一个属性，在其中存储实际触发日期选择器显示的按钮。然后你会这样做：

```
-(IBAction)notificationButtonChanged:(UIButton *)control
{
if (control.tag == 1)
{
   self.pressedButtonTag = control.tag;
   ... 
```

和：

```
-(void) userTimePickerValueChanged:(UIButton *)sender
{
   switch (self.pressedButtonTag)
  { 
```

如果您觉得“懒惰”并且不想创建特定属性来跟踪按下的按钮，则可以动态重新分配`datePicker.tag`：

```
-(IBAction)notificationButtonChanged:(UIButton *)control {
  if (control.tag == 1) {
    userTimePicker.tag = control.tag;
    ... 
```

和：

```
-(void) userTimePickerValueChanged:(UIDatePicker *)sender {
   switch (sender.tag)
  { 
```

请记住，第二个选项更像是一个 hack，所以我让你决定你喜欢做什么，但在第二种情况下，添加注释来解释事情是如何工作的。

# c++ - C++ 空白屏幕“帮助”

> ID：14800299
> 
> 赞同：-8
> 
> 时间：2013-02-10T17:12:33.203
> 
> 标签：c++

我的程序给了我一个空白屏幕和这个错误

“错误 1 ​​错误 C1075：在左大括号 '{' 之前找到文件结尾”请帮助！

这是代码：

```
#include "stdafx.h"
#include<iostream>
#include<ctime>
#include <cstdlib>
#include <time.h>
using namespace std;

int randomnumber();
int main(void)
{
int iGuesses;
int iUser1;
int iUserguess;

char cDoagain;

while(true)

    system("CLS");
    system("COLOR 2");

    iGuesses = rand() % 100 +1;

cout << "NumberGuesser"
 << endl;
do
{
  cout << "The Number is " << iGuesses << endl;

  std::cout << "Press ENTER to continue...";
   std::cin.ignore( std::numeric_limits<std::streamsize>::max(), '\n' );
    system("PAUSE");
    return 0;
    } 
```

感谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T17:24:19.240

你有**几个**错误，它们都可以通过一致的缩进被发现

这是具有合理格式的相同代码：

```
#include "stdafx.h"
#include<iostream>
#include<ctime>
#include <cstdlib>
#include <time.h>
using namespace std;

int randomnumber();
int main(void)
{
    int iGuesses;
    int iUser1;
    int iUserguess;   
    char cDoagain;

    while(true)
        system("CLS");

    system("COLOR 2");
    iGuesses = rand() % 100 +1;   
    cout << "NumberGuesser" << endl;

    do
    {
        cout << "The Number is " << iGuesses << endl;

        std::cout << "Press ENTER to continue...";
        std::cin.ignore( std::numeric_limits<std::streamsize>::max(), '\n' );
        system("PAUSE");
        return 0;
    } 
```

1.  您可能希望您`while(true)`的范围更大
2.  你的`main`功能永远不会完成。

# stata - 以更短的语法使用 if ()

> ID：14800312
> 
> 赞同：1
> 
> 时间：2013-02-10T17:14:15.210
> 
> 标签：stata

有没有办法用更简洁的语法来表达这一点

```
if (`avgInc' > 0) {
    loc avgIncDec = "increased"
}
else {
    loc acgIncDec = "decreased"
} 
```

类似 InlineIf (iif) 的东西：

```
loc avgInc = iif((`avgInc' > 0), "increased", "decreased") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:28:10.993

尝试`cond`

`var = if cond(a="value","1","another value")`

if a="value" var ="1" else var = "另一个值"

还有其他三元运算符：`inrange() inlist()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T20:51:41.887

以前的答案有帮助，`cond()`但包含一些小错误。

```
 loc avgIncDec = cond(`avginc' > 0, "increased", "decreased") 
```

请注意，Stata 与许多其他语言一样，使用`=`赋值和`==`测试相等性。

# javascript - Adobe Edge 移动图像库

> ID：14800326
> 
> 赞同：0
> 
> 时间：2013-02-10T17:15:00.413
> 
> 标签：javascript, html, css, image-gallery, adobe-edge

我正在使用 Adob​​e Edge Animate 创建我网站的大部分内容，但我也想制作一个移动版本，因此显然我想使用 onTouch 事件而不是 onClick 事件。我似乎找不到任何关于如何使用触摸事件的好信息，因为我以前从未使用过它们。

我想做一个简单的图片库，当你向左滑动时向前播放，向右滑动时向后播放。

这里最大的问题是，我如何告诉触摸事件根据滑动的方向做不同的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:09:10.550

首先，你是对的，你想使用三个事件处理程序：touchstart、touchmove、touchend

您可能采取的一种方法是将用户手指的起始位置与结束位置进行比较。尽管代码会根据您要检测的手指数量而有所不同，但我将概述一种您可以适应的基本方法。为了检测一根手指，请在“touchstart”事件处理程序中输入以下内容：

```
var xStart = e.originalEvent.touches[0].pageX;
sym.setVariable('xStart', xStart); 
```

这会将第一根手指的起始 x 位置存储在一个变量中，然后使其可由其他事件处理程序全局访问。然后可能在“touchend”事件处理程序中做同样的事情。使用一些逻辑来比较两个值。

```
xStart = sym.getVariable('xStart');
var xEnd = e.originalEvent.touches[0].pageX;

if (xEnd > xStart)
{
    sym.playReverse();
}
else if (xEnd < xStart)
{
    sym.play();
} 
```

然后你会有一些停止帧来保存这些图像。

这只是一个例子，但希望它会帮助你开始。祝你好运！

# couchdb - stackoverflow 上有没有人成功地将 CouchDB 用于 web 应用程序并部署到生产环境中？

> ID：14800328
> 
> 赞同：1
> 
> 时间：2013-02-10T17:15:07.487
> 
> 标签：couchdb

stackoverflow 上有没有人成功使用过 CouchDB 和 couchapp 并部署到生产环境中？当您的网络应用程序获得大量流量时，您会看到什么类型的 QPS？您是否必须使用额外的 CouchDB 实例来扩展流量和吞吐量？您是否在 Amazon EC2 实例上使用过 CouchDB？将 CouchDB 用于 Web 应用程序/移动应用程序后端时，需要注意哪些事项？

# android - 从我手机上的 Android 应用程序中提取源文件

> ID：14800330
> 
> 赞同：2
> 
> 时间：2013-02-10T17:15:18.533
> 
> 标签：android

去年，我为我的手机开发了一个 Android 应用程序并加载了它，从那时起就一直在使用它。不幸的是，我不得不重新格式化我的电脑并且丢失了这个安卓应用程序的源文件。如果应用程序是在调试模式下加载的，是否有任何可能的方法可以将应用程序及其源文件提取到我的计算机上进行编辑？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:57:45.023

1.  获取[APKTool](http://code.google.com/p/android-apktool/)，将其可执行文件放在一个文件夹中

2.  运行`adb pull /data/app/<your_app_name>.apk`，现在你得到了apk文件，将它放在与apktool相同的文件夹中

3.  运行`./apktool d <apk_file_name> <output_folder>`，apk 源将在输出文件夹中重建。

# jsp - JSP 中的立即 (${}) 和延迟 (#{}) 评估之间有区别吗？

> ID：14800338
> 
> 赞同：2
> 
> 时间：2013-02-10T17:16:17.503
> 
> 标签：jsp, el, deferred, evaluation

在 Java 统一表达式语言中有两种基本类型的 EL 语法：

```
${expression for immediate evaluation}
#{expression for deferred evaluation} 
```

我在 JaveServer Faces 中理解这两者之间的区别：JSF 有一种变化的生命周期的感觉，即时表达式总是在页面渲染时评估，而延迟表达式可以在页面渲染、回发或两者兼而有之时评估。

但是，对于 JavaServer Pages，我并不清楚区别。据我所知，JSP 没有 JSF 所具有的生命周期意识。事实上，当得知延迟语法在 JSP 中甚至是合法的时，我有些惊讶。但是，我现在知道确实如此，因为`<jsp-config>`部署描述符中提供了向后兼容性设置，以禁用对将该语法用于其他目的的 pre-JUEL JSP 的延迟语法检测：

```
<deferred-syntax-allowed-as-literal> 
```

所以，问题是，有什么区别？延迟语法在 JSP 中的含义显然与在 JSF 中的含义不完全相同，但是我在任何地方都找不到任何描述如何为 JSP 使用延迟语法的文档。

它们只是 JSP 中的同义词吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:41:36.770

我在其他论坛上找到的，希望对你有帮助。

查看 JSP2.1 规范的前言部分。延迟表达式仅真正适用于您已指定延迟属性的自定义标记。在大多数情况下，我不理会他们。

基本上如果你在模板文本中使用#{deferredSyntax}，它会触发一个翻译错误（它们在标签属性之外没有意义）

如果在标签属性中使用#{deferredSyntax}，它取决于标签库支持的JSP 版本的tld 声明。- 支持的 JSP 版本 < 2.1 == 视为文字 - 支持的 JSP 版本 >= 2.1 ：视为延迟属性 - 只要它被标记为这样。

您可以设置页面属性：

```
<%@page deferredSyntaxAllowedAsLiteral="true"%> 
```

# java - 将函数作为参数发送到另一个函数中时，我是否使用第一个功能键（同步）

> ID：14800341
> 
> 赞同：1
> 
> 时间：2013-02-10T17:16:27.437
> 
> 标签：java, multithreading, function, synchronization

我的问题是：假设我有以下几行：

```
Person p, q;
p.go(q.getAddress()); 
```

现在，函数 go() 和 getAdress() 是同步的。假设函数 getAddress() 将需要一些时间才能返回，在那个时候，go() 函数会被锁定吗？含义：p 会得到 go() 函数同步的“密钥”吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:28:32.017

附注：作为一种语言功能，`synchronized`可以让您认为您锁定了部分*代码*。您应该抵制这种诱惑：您不是锁定代码，而是*保护您的数据*，以确保某些*不变量*在任何地方都是正确的，除了您暂时破坏它们的某些部分。

现在让我们看看计算表达式时会发生什么：

```
q.getAddress entered
q.getAddress returns
p.go entered
p.go returns 
```

两个“同步”都不会发生在另一个中，并且在两个同步之间都有一个*窗口*，在这个窗口中，两个同步都不能保护任何东西。那是你想知道的吗？`q.getAddress``p.go`

# c# - 多线程设计

> ID：14800342
> 
> 赞同：0
> 
> 时间：2013-02-10T17:16:32.680
> 
> 标签：c#, .net, multithreading, parallel-processing

我有一个程序可以存储来自某些服务器的一些网络活动数据。为了速度，我将设计应用程序以在单独的线程中发出每个请求，并将结果放入通用字典中，其中键是服务器 ID，对象是结果类。

但是，来自服务器的响应应该每 10 分钟保存一次到 DB。我不知道我是否有任何好主意如何解决这个问题。所以一些输入会很棒。

我的想法是锁定结果字典并对结果进行深度克隆，然后开始在另一个线程中分析结果，然后将其放入数据库中。

我怎样才能最大限度地减少阻塞，`request threads`以便他们可以尽快开始添加新结果但仍然从字典中读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:39:26.187

这个想法是在持久逻辑触发时将当前状态放在一边，同时将新输入引导到新存储中。这是此任务的基本模式：

```
class PeriodicPersist{

    // Map must be volatile, persist may look at a stale copy
    private volatile Map<String, String> keyToResultMap = new HashMap<String, String>();

    public  void newResult(String key, String result) {
        synchronized(keyToResultMap) {  // Will not enter if in the beginning of persist
            keyToResultMap.put(key,result);
        }
    }

    public void persist(){
        Map<String, String> tempMap;
        synchronized (keyToResultMap) { // will not enter if a new result is being added just now.
            if(keyToResultMap.size() == 0) {
                return;
            }

            tempMap = keyToResultMap;
            keyToResultMap = new HashMap<String, String>();
        }

        // download freshMap to the DB OUTSIDE the lock
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:15:31.390

[您可以使用ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)避免处理锁定字典。使用基于计时器的事件每 10 分钟运行一个线程，该事件将检查字典的内容并将当前计数项目保存到您的数据库中，删除相同的项目，然后开始对保存的内容进行分析。

```
// myCD is your concurrent dictionary
// every 10 mins
var myCDClone = myCD.MemberwiseClone();
// save to DB using myCDClone 
// using myCDClone.Keys delete everything saved up from myCD
// myCDClone.Clear(); 
```

# jquery - 如何在 jQuery 中使用“this”？

> ID：14800343
> 
> 赞同：2
> 
> 时间：2013-02-10T17:16:36.120
> 
> 标签：jquery

这是我的 HTML 代码：

```
<div id="staticlinks">
<a class="thumb" href="https://www.facebook.com/" target="_blank"><img src="images/facebook.png"/></a>
<a class="thumb" href="https://www.twitter.com/" target="_blank"><img src="images/twitter.png" /></a>
<a class="thumb" href="https://www.youtube.com/" target="_blank"><img src="images/youtube.png" /></a>
<a class="thumb" href="https://www.youtube.com/" target="_blank"><img src="images/feed.png" /></a>
<a class="thumb" href="https://www.google.com/" target="_blank"><img src="images/google.png" /></a>

</div> 
```

这是jQuery代码：

```
$(document).ready(
function(){
  $('.thumb').hover(
    function(){
      $(".thumb img", this).animate({height: '80px' , width:'80px'}, 'slow');
    }, function(){
      $(".thumb img", this).animate({height: '60px', width: '60px'}, 'slow');
    }
  );
}
); 
```

问题是当我从中删除“this”时，`$(".thumb img", this)`所有图像都会被动画化。如果我把它放在这里，那么动画就不会发生。我没有得到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:19:15.880

`$(".thumb img", this)`意思是“找到`.thumb`中的所有元素`this`，然后找到它们的所有后代`img`元素”。您只想找到 中的所有元素`img`，`this`因为`this` **是**`.thumb`元素。

你需要做的就是`$('img', this)`。

请注意，使用它会更直观（而且*速度*更快！）`find`。

```
$(this).find('img') 
```

这意味着完全相同的东西，但我认为更容易阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T17:20:18.773

```
$(function(){
  $('.thumb').on('mouseenter mouseleave', function( e ){
      var size = e.type=='mouseenter' ? 80 : 60 ;
      $("img", this).animate({height: size , width: size }, 800);
  });
}); 
```

您的处理程序已经指向`.thumb`哪些`<a>`元素，而不是您再次指向任何不再相关的`".thumb img", this`地方。 现在，通过这样做，您实际上是在说哪个会按预期工作。 上面是实现相同目标的好方法。`this`
`"img", this``"img", children of THIS hovered`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T17:21:27.750

```
$(document).ready(
function(){
  $('.thumb').hover(
    function(){
      $(this).animate({height: '80px' , width:'80px'}, 'slow');
    }, function(){
      $(this).animate({height: '60px', width: '60px'}, 'slow');
    }
  );
}
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T17:19:34.817

使用`$("img", this);`而不是`$(".thumb img", this)`它会占用每个`img`under `this`，这是悬停的`.thumb`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-10T17:19:44.187

试试这个：

```
$("img", this) 
```

你正在悬停，`.thumb`所以你应该这样做。

或者这样：

```
$(this).find('img').animate({....}) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-10T17:22:22.887

**这是什么”？**

> 在许多面向对象的编程语言中，this（或 self）是一个关键字，可以在实例方法中使用，以引用当前正在执行的方法已被调用的对象。

（来自[维基百科](http://en.wikipedia.org/wiki/This_%28computer_programming%29)）

在 jQuery 中，`this`引用一个 DOM 元素：

```
$('.thumb').hover(function() {
    // $(this) refer to $('.thumb')
}); 
```

或一个对象：

```
function foo(element) {
    this.a = 'a'; // Refer to object

    element.each(function() {
         $(this).css('color', 'red');

        // now this refer to current element of each, which is a DOM element
    })
} 
```

# java - 关于java中的方法重载

> ID：14800344
> 
> 赞同：2
> 
> 时间：2013-02-10T17:16:38.143
> 
> 标签：java

我正在通过java中的方法重载，我在eclipse中尝试下面程序的输出，程序是..

```
public class OverloadingTest {

    public static void main(String args[]){
       List abc = new ArrayList();
       List bcd = new LinkedList();

       ConfusingOverloading co = new ConfusingOverloading();
       co.hasDuplicates(abc); //should call to ArryList overloaded method
       co.hasDuplicates(bcd); //should call to LinkedList overloaded method
    }

}

class ConfusingOverloading{

    public boolean hasDuplicates (List collection){
        System.out.println("overloaded method with Type List ");
        return true;
    }

    public boolean hasDuplicates (ArrayList collection){
        System.out.println("overloaded method with Type ArrayList ");
        return true;
    }

    public boolean hasDuplicates (LinkedList collection){
        System.out.println("overloaded method with Type LinkedList ");
        return true;
    }

} 
```

输出是..

```
Output
overloaded method with Type List
overloaded method with Type List 
```

现在在解释中被告知..方法重载是在编译时使用Java中的静态绑定解决的，所以请告知我如何通过方法覆盖来实现相同的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:26:41.037

`abc`，即使您使用 . 对其进行初始化，`bcd`两者都是类型，因此结果`List``subclass`

BaseClass like`List`可以帮助您编写可以与它的任何子类（*ArrayList 或 LinkedList*）一起使用的方法。所以，

```
public ArrayListLinkedListCanCallMe(List lst)
{
 //now imagine if this method was called with bcd as parameter
 //still lst would be of type List not LinkedList
 //and if lst were allowed to be of type LinkedList then how could List know any
 //of the methods of LinkedList.Therefore lst would always be of type List NOT LinkedList
} 
```

* * *

您可以尝试

```
co.hasDuplicates((ArrayList)abc);
co.hasDuplicates((LinkedList)bcd); 
```

但是`(ArrayList)abc`如果 abc 是类型，则可以抛出强制转换异常`LinkedList`。您可以使用`instanceof`运算符检查 abc 是否是类型`ArrayList`，然后将其强制转换..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:33:43.753

在这种特殊情况下，如果 hasDuplicates 意味着它所说的，我将有一种方法以 List 作为参数。它只会创建一个使用 List 内容初始化的 HashSet，并将其大小与 List 大小进行比较。

如果您确实需要特殊情况代码，例如 ArrayList，您可以在 List 参数方法中使用 instanceof。

但是，当您使用接口类型时，最好找到适用于所有接口实现的通用方法。如果你不能这样做，你必须允许传递一个实现接口的类的对象，但它不是你有特殊情况代码的类之一。如果您需要 java.util.ArrayList 的特殊情况代码，为什么不需要 Arrays.asList 用于其结果的私有类的实例的特殊情况代码？

当问题是您自己代码中的不同类时，您通常可以扭转问题并将方法放在当前的参数类中，以便常规覆盖工作。

# android - 在使用相机时画出人物的轮廓

> ID：14800347
> 
> 赞同：0
> 
> 时间：2013-02-10T17:17:09.897
> 
> 标签：android, android-camera

我不知道这是否可能。我想在用户使用相机的那一刻添加一个人的轮廓，以便人们更容易为应用程序的海豚拍摄正确的照片（按真实面孔的顺序放置不同的面孔）。有人知道我该怎么做吗？

# javascript - Javascript 一次获取多个 id

> ID：14800349
> 
> 赞同：1
> 
> 时间：2013-02-10T17:17:11.500
> 
> 标签：javascript, getelementbyid

我只是想知道是否可以在不使用 JQuery 的情况下在 javascript 中一次获取多个 id。我正在检查动态创建的表格中每个单元格的背景颜色。例如，我有这个代码：

```
var black = "rgb(0, 0, 0)";
if(document.getElementById("cell1").style.backgroundColor == black &&
   document.getElementById("cell2").style.backgroundColor == black)
{
  alert("Two cells are black!");
} 
```

有没有可能做这样的事情：

```
var black = "rgb(0, 0, 0)";
if(document.getElementById("cell1","cell2").style.backgroundColor == black)
{
  alert("Two cells are black!");
} 
```

我试图完全不使用 JQuery，因为我不太熟悉它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:20:17.983

`querySelectorAll`使用现代浏览器，您可以使用([兼容性矩阵](http://caniuse.com/#feat=queryselector))做类似的事情，但您仍然需要遍历结果`NodeList`：

```
var nodes = document.querySelectorAll("#cell1, #cell2");
var count = 0;
for (var index = 0; index < nodes.length; ++index) {
    if (nodes[index].style.backgroundColor == black) {
        ++count;
     }
}
if (nodes.length === count) {
    alert("Both are black");
} 
```

真的不会给你买任何东西，说：

```
var cells = ["cell1", "cell2"];
var count = 0;
for (var index = 0; index < cells.length; ++index) {
    if (document.getElementById(cells[index]).style.backgroundColor == black) {
        ++count;
    }
}
if (cells.length === count) {
    alert("All cells are black");
} 
```

简而言之：不，没有什么比你能做的更有用的了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:20:28.983

不，不使用 jQuery 或其他 javascript 帮助程序库。

IE7 及以下不支持 querySelector 仍然占流量的相当大比例[http://caniuse.com/#feat=queryselector](http://caniuse.com/#feat=queryselector)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T17:21:01.080

不是原生的。不过，您可以相当轻松地编写自己的代码：

```
function getElementsById(elements)
{
    var to_return = [ ];
    for(var i = 0; i < elements.length; i++)
    {
        to_return.push(document.getElementById(elements[i]));
    }
    return to_return;
} 
```

这将接受一个 ID 数组作为参数，并返回数组中的元素。您可能还想研究该[`document.querySelector`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T17:43:27.757

我赞成@BenM 的回答，但我想建议另一种选择。

你的问题：

> 我正在检查每个单元格的背景颜色

在这种情况下，将 id 附加到表本身会更有意义。您的选择器变为（假设没有嵌套表）：

```
var cells = document.getElementById("myTable").getElementsByTagName("td"); 
```

或对于最近的浏览器：

```
var cells = querySelectorAll("#myTable>tbody>tr>td"); 
```

作为记录，如果您的所有单元格都具有相似的 id “cellxxx”，这是另一种方式：

```
var cells = querySelectorAll("td[id^='cell']"); 
```

# c++ - 如何访问此自动变量？

> ID：14800351
> 
> 赞同：0
> 
> 时间：2013-02-10T17:17:17.003
> 
> 标签：c++, c++11, auto

我声明了一个自动类型的测试变量，但现在我不知道如何访问它。我知道如何使这个程序在没有的情况下工作，`auto`但在这里我想知道如何访问该`auto`变量。

```
int main() {
auto test = {'1','S'};
std::cout<<test; //error no match for operator... i tried using *test or *test[0] but no solution.  
cin.get();
return 0;
} 
```

编译器日志：

```
Compiler: mingw
Executing  g++.exe...
g++.exe "C:\Users\Arpit\Desktop\delete.cpp" -o "C:\Users\Arpit\Desktop\delete.exe"   -std=c++11   
C:\Users\Arpit\Desktop\delete.cpp: In function 'int main()':
C:\Users\Arpit\Desktop\delete.cpp:5:12: error: cannot bind 'std::ostream {aka std::basic_ostream<char>}' lvalue to 'std::basic_ostream<char>&&'
In file included from c:\program files\codeblocks\mingw\bin\../lib/gcc/mingw32/4.7.1/include/c++/iostream:40:0,

                 from C:\Users\Arpit\Desktop\delete.cpp:1:
c:\program files\codeblocks\mingw\bin\../lib/gcc/mingw32/4.7.1/include/c++/ostream:600:5: error:   initializing argument 1 of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&&, const _Tp&) [with _CharT = char; _Traits = std::char_traits<char>; _Tp = std::initializer_list<char>]'

Execution terminated 
```

如何打印`test`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:25:56.077

你得到这个错误，因为`auto variable = { ... }`声明了一个`std::initializer_list`，它没有重载`operator<<`for `std::ostream`。例如，您可以使用基于范围的 for 来访问列表中的值。

```
int main()
{
    auto test = {'1','S'};
    for(const auto& elem: test)
        std::cout << elem << ' ';
    std::cout << std::endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T17:26:17.770

变量`test`的类型为[`std::initializer_list`](http://en.cppreference.com/w/cpp/utility/initializer_list)。您必须使用迭代器从中获取值，或者使用新[的基于范围的 for 循环](http://en.cppreference.com/w/cpp/language/range-for)：

```
auto test = { '1', 's' };
for (const auto& i : test)
    std::cout << i << '\n'; 
```

# magento - 如何在类别视图（MAGENTO）中隐藏基本价格？

> ID：14800355
> 
> 赞同：2
> 
> 时间：2013-02-10T17:17:22.913
> 
> 标签：magento, categories, options, configurable

我已经设置了一个带有自定义选项的简单产品，但我想从类别页面（列表或网格模式）中隐藏基本价格。我怎样才能做到这一点 ？

我突出显示了我想删除的“价格”：http: [//i.stack.imgur.com/VBMzs.png](http://i.stack.imgur.com/VBMzs.png)

**这里有我的 price.phtml 代码：[http ://pastebin.com/JGjSQDB7](http://pastebin.com/JGjSQDB7)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T08:27:19.267

```
jQuery(document).ready(function () {
    jQuery('.price-box').each(function () {
        if (jQuery(this).find(jQuery('.minimal-price-link')).length > 0) {
            jQuery(this).find('.regular-price').hide();
        }
    })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:14:33.687

Since you have jQuery installed, you can do the following:

```
jQuery(document).ready(function () {
    jQuery('.price-box').each(function () {
        if (jQuery(this).find(jQuery('.minimal-price-link')).length > 0) {
            jQuery(this).find('.regular-price').hide();
        }
    })
}) 
```

This loops through `.price-box` individually and will conditionally hide `.regular-price` depending on the availability of `.minimal-price-link` in that given box.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:55:31.650

我会使用 CSS 隐藏它，这可能是隐藏价格的最简单方法。我不确定你的选择器叫什么。如果您包含指向该网站的链接，我相信您会得到帮助！

# ios - UITextField - 防止用户输入非标准字符（如表情符号）

> ID：14800357
> 
> 赞同：3
> 
> 时间：2013-02-10T17:17:23.647
> 
> 标签：ios, uitextfield, uikeyboard, nscharacterset

我的应用程序创建并存储`EKEvents`到标准日历数据库中，但是，我发现如果我使用表情符号作为事件的“注释”，它会在尝试从日历中读取事件时导致崩溃。

我*不想*或*不需要*在`event.notes`. 我只是碰巧在测试，当它让我保存事件时有点震惊。（表情符号甚至出现在日历本身）

所以我认为我的问题可以通过两种方式之一来解决，但我都无法弄清楚。

**1) 我可以禁用或隐藏自定义键盘按钮吗？**<--我更喜欢这个解决方案

![在此处输入图像描述](../Images/b2e75b1be043ad60851c721b25fee8f6.png)

**2）如果不是，我如何创建一个字符集，其中包含所有标准键盘中所有可能的字符，以在确保用户没有键入表情符号时进行检查？**

我尝试使用一些标准字符集来检查，例如`alphanumericCharacterSet`，但使用它，我无法输入空格。

这是我目前使用的代码，用于检查用户输入的字符：

```
- (BOOL)textField:(UITextField *)theTextField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if (string.length == 0) {
        return YES;
    }

    NSCharacterSet *myCharSet = [NSCharacterSet alphanumericCharacterSet];
    for (int i = 0; i < [string length]; i++) {
        unichar c = [string characterAtIndex:i];
        if ([myCharSet characterIsMember:c]) {
            return YES;
        }
    }

    UIAlertView *av = [[UIAlertView alloc] initWithTitle:@"Invalid Input" message:@"Oops! You can't use that character." delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [av show];
    return NO;
} 
```

***编辑：澄清错误***

没有错误，只有崩溃。我的应用程序保存日历事件，并将它们显示在列表中给用户。然后，用户可以将事件标记为“付费”或“未付费”，此时我将一个字符串附加到`.notes`事件的属性“-付费”。因此，当我重新加载表格时，如果事件已付费，它会向用户显示特定图标。当保存的甚至具有表情符号作为`.notes`属性时，就会发生崩溃，我尝试将`.notes`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T17:29:03.693

您可以`NSCharacterSet`使用联合来组合 s 以添加更多允许的字符：

```
 NSMutableCharacterSet *myCharSet = [[NSCharacterSet alphanumericCharacterSet] mutableCopy];
    [myCharSet formUnionWithCharacterSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]; 
```

以下是可供选择的可用字符集列表：

```
controlCharacterSet
whitespaceCharacterSet
whitespaceAndNewlineCharacterSet
decimalDigitCharacterSet
letterCharacterSet
lowercaseLetterCharacterSet
uppercaseLetterCharacterSet
nonBaseCharacterSet
alphanumericCharacterSet
decomposableCharacterSet
illegalCharacterSet
punctuationCharacterSet
capitalizedLetterCharacterSet
symbolCharacterSet
newlineCharacterSet 
```

此外，您的代码正在检查以确保**任何**字符都不在集合之外；我认为您的意图是检查**所有**角色是否不在集合之外。（这仅适用于用户一次输入多个字符时 - 考虑复制和粘贴）。

考虑调整你的循环看起来更像这样：

```
NSCharacterSet *myCharSet = [NSCharacterSet alphanumericCharacterSet];
for (int i = 0; i < [string length]; i++) {
    unichar c = [string characterAtIndex:i];
    if ([myCharSet characterIsMember:c] == NO) {
        // add your user alert here
        return NO;
    }
} 
```

这样你的循环不会简单地在它找到的第一个好字符上退出；相反，它将在第一个坏字符处退出。

# php - MySQL 错误与 /index.php?=page 但不在 memberlist.php

> ID：14800358
> 
> 赞同：-1
> 
> 时间：2013-02-10T17:17:24.583
> 
> 标签：php, mysql

当我添加 php 分页并转到此链接 /index.php?page=memberlist 时，我收到此错误：

```
Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource in /home/a4398909/public_html/memberlist.php on line 312 
```

但是当我去 memberlist.php 它工作正常。所以我不知道出了什么问题，这是我的代码：

```
 <?php
/*
    Place code to connect to your DB here.
*/
    // include your code to connect to DB.

$tbl_name="users";      //your table name
// How many adjacent pages should be shown on each side?
$adjacents = 3;

/* 
   First get total number of rows in data table. 
   If you have a WHERE clause in your query, make sure you mirror it here.
*/
$query = "SELECT COUNT(*) as num FROM $tbl_name";
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages = $total_pages['num'];

/* Setup vars for query. */
$targetpage = "/index.php?page=memberlist";     //your file name  (the name of this file)
$limit = 2;                                 //how many items to show per page
$page = $_GET['page'];
if($page) 
    $start = ($page - 1) * $limit;          //first item to display on this page
else
    $start = 0;                             //if no page var is given, set start to 0

/* Get data. */
$sql = "SELECT * FROM $tbl_name LIMIT $start, $limit";
$result = mysql_query($sql);

/* Setup page vars for display. */
if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
$prev = $page - 1;                          //previous page is page - 1
$next = $page + 1;                          //next page is page + 1
$lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
$lpm1 = $lastpage - 1;                      //last page minus 1

/* 
    Now we apply our rules and draw the pagination object. 
    We're actually saving the code to a variable in case we want to draw it more than once.
*/
$pagination = "";
if($lastpage > 1)
{   
    $pagination .= "<div class=\"pagination\">";
    //previous button
    if ($page > 1) 
        $pagination.= "<a href=\"$targetpage&page_num=$prev\">� previous</a>";
    else
        $pagination.= "<span class=\"disabled\">� previous</span>"; 

    //pages 
    if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
    {   
        for ($counter = 1; $counter <= $lastpage; $counter++)
        {
            if ($counter == $page)
                $pagination.= "<span class=\"current\">$counter</span>";
            else
                $pagination.= "<a href=\"$targetpage&page_num=$counter\">$counter</a>";                 
        }
    }
    elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
    {
        //close to beginning; only hide later pages
        if($page < 1 + ($adjacents * 2))        
        {
            for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage&page_num=$counter\">$counter</a>";                 
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage&page_num=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage&page_num=$lastpage\">$lastpage</a>";       
        }
        //in middle; hide some front and some back
        elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
        {
            $pagination.= "<a href=\"$targetpage&page_num=1\">1</a>";
            $pagination.= "<a href=\"$targetpage&page_num=2\">2</a>";
            $pagination.= "...";
            for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage&page_num=$counter\">$counter</a>";                 
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage&page_num=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage&page_num=$lastpage\">$lastpage</a>";       
        }
        //close to end; only hide early pages
        else
        {
            $pagination.= "<a href=\"$targetpage&page_num=1\">1</a>";
            $pagination.= "<a href=\"$targetpage&page_num=2\">2</a>";
            $pagination.= "...";
            for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage&page_num=$counter\">$counter</a>";                 
            }
        }
    }

    //next button
    if ($page < $counter - 1) 
        $pagination.= "<a href=\"$targetpage&page_num=$next\">next �&lt;/a>";
    else
        $pagination.= "<span class=\"disabled\">next �&lt;/span>";
    $pagination.= "</div>\n";       
} ?>

<?php
    while($row = mysql_fetch_array($result))
    {?>

         <div style="float: left; width: 300px; margin-left: 11px; margin-top: 10px; margin-bottom: 10px; border: 1px solid #CCC; border-radius:7px; background-color:#666;padding:5px 5px 5px 5px;">
<div id="memberlist_top">
    <div id="memberlist_avatar">
        <img src="<?php echo $row['avatar'] ?>" style="border: 1px solid #CBCBCB; padding: 3px; width: 100px; height: 100px;" />
    </div>
    <div id="memberlist_top_right">
        <p id="memberlist_username"><a href="/index.php?page=user&id=<?php echo $row['user_id'] ?>"><?php echo $row['user_name'] ?></a></p>
        <p style="text-align: center;"><img src="<?php echo$row['site_rank_image']?>"</p>
        <p style="text-align: center;" id="ml_rep"> Reputation: 0 </p>
        <p id="ml_posts">Post count: <?php echo $row['post'] ?></p>
    </div>
    <div class="clearfix" style="height: 5px;">&nbsp;</div>
</div>
<div id="memberlist_bottom">
    <p id="ml_bottom_p"><img src="template/images/layout/icon.png" style="vertical-align: middle" /> Date Registered: <span id="ml_bottom_span"><?php echo date(" F j, Y, g:i A", strtotime($row['user_date']))?> </span></p>
    <p id="ml_bottom_p"><img src="template/images/layout/icon.png" style="vertical-align: middle" /> Last online: <span id="ml_bottom_span"><?php echo date(" F j, Y, g:i A", strtotime($row['dt']))?> </span></p>
    <p id="ml_bottom_p" style="width: 284px; height: 30px; overflow-x: hidden; cursor: pointer;" title="Coming Soon"><img src="template/images/layout/icon.png" style="vertical-align: middle;" /> Last Activity: <span id="ml_bottom_span" style="text-decoration: underline;">Coming Soon</span></p>
    <p id="ml_bottom_p"><img src="template/images/layout/icon.png" style="vertical-align: middle" /> Is online now: <span id="ml_bottom_span"> <? if($row

['online'] == 1) {  // checks to see if the user allows their email to be shown, where '1' means they allow it to be shown
echo'Yes';
} else { echo'No'; // if they allow it, it displays their email } ?> </span></p>
</div> 
```

```
 <? }
?> 
```

有谁知道出了什么问题，因为我找不到。我是 php 新手。

我从[http://phpeasystep.com/phptu/29.html得到这段代码](http://phpeasystep.com/phptu/29.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:36:34.827

您的查询中有错误。尝试将您的查询行更改为：

```
$result = mysql_query($sql) or die ('Error: '.mysql_error ()); 
```

# c# - ScrollViewer 中的网格不会水平滚动

> ID：14800361
> 
> 赞同：2
> 
> 时间：2013-02-10T17:18:03.400
> 
> 标签：c#, windows-store-apps, scrollviewer

我想我在这里遗漏了一些简单的东西......我如何让一个`Grid`内部`ScrollViewer`水平滚动？我已经启用`HorizontalScrollMode`，内容肯定足够长，可以在屏幕外运行，但不会滚动。这是有问题的代码（这`ScrollViewer`是 LayoutRoot 的一行的唯一内容`Grid`）：

```
<ScrollViewer Grid.Row="1" VerticalScrollMode="Disabled"
              VerticalScrollBarVisibility="Hidden"
              HorizontalScrollMode="Enabled">
    <Grid Margin="120,0,0,100">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="240"/>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="240"/>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="240"/>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="240"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <TextBlock Text="Download" HorizontalAlignment="Center" Margin="0,0,0,10"/>
        <local:BandwidthMeter Grid.Row="1" x:Name="PolicyDown" Grid.Column="0"/>
        <TextBlock Grid.Column="2" Text="Upload" HorizontalAlignment="Center"/>
        <local:BandwidthMeter Grid.Row="1" x:Name="PolicyUp" Grid.Column="2"/>
        <TextBlock Grid.Column="4" Text="Download" HorizontalAlignment="Center"/>
        <local:BandwidthMeter x:Name="ActualDown" Grid.Row="1" Grid.Column="4"/>
        <TextBlock Grid.Column="6" Text="Upload" HorizontalAlignment="Center"/>
        <local:BandwidthMeter x:Name="ActualUp" Grid.Row="1" Grid.Column="6" />
        <TextBlock Grid.Column="7" Text="Campus-wide bandwidth usage" HorizontalAlignment="Center"/>
        <Image Grid.Column="7" Grid.Row="1" Margin="80,0,0,0" Source="[image URL]" Stretch="UniformToFill"/>
    </Grid>
</ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T17:55:47.823

将属性添加`HorizontalScrollBarVisibility="Auto"`到您的`ScrollViewer`.

# ember.js - 将内容传递给内部视图 {{outlet}}

> ID：14800362
> 
> 赞同：-1
> 
> 时间：2013-02-10T17:18:04.460
> 
> 标签：ember.js

我有一个带有 Ember Data 的简单 Ember 应用程序（由 Rails 提供支持）。我创建了这些路线：

```
App.Router.map(function () {
    this.resource('bands', function () {
        this.route('new');
        this.resource('band', {path: ':band_id'}, function() {
            this.route('edit');
        });
    });
}); 
```

然后，当我转到 时`http://localhost:3000/#/bands/23/edit`，我想查看 ID 为 23 的对象的值，如下所示：

```
<div>name: {{name}}</div>
{{! should output "name: Pavel" }} 
```

但是，当我将该代码放入`band/edit.hbs`时，应用程序仅显示“名称：”，没有任何值。我发现这是因为内容没有传递给内部视图。当我将同一段代码直接放入时`band.hbs`，一切都按预期工作。我在哪里做错了？如何将内容对象传递给控制器​​？（如果可能的话，我希望生成尽可能多的控制器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:46:44.837

您必须至少定义 BandEdit 的路线：

```
App.BandEditRoute = Ember.Route.extend({
  model: function(params) {
    return this.modelFor('band'));
  }
}); 
```

如果需要，您始终可以在返回之前将模型添加到事务中。

您也可以通过从 BandEdit 控制器中引用 parentController 来做到这一点，但这似乎是一种不太优雅的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:49:06.657

这是因为`context`已被您的内部视图更改*（上下文现在将是视图本身）*，但视图将可以访问`BandEditController`及其关联的模型，因此如果您**始终**引用第`model`一个，那么 Ember 将知道您在追求什么：`{{model.name}}`/ `{{model.genre}}`。

见 JSFiddle：http: [//jsfiddle.net/JZ84L/](http://jsfiddle.net/JZ84L/)

（与安德烈的答案一起使用，因为如果你甚至没有通过`model`你的，`outlet`那么它就无法使用。）

# vbscript - 使用 VBscript 枚举子文件夹属性

> ID：14800367
> 
> 赞同：1
> 
> 时间：2013-02-10T17:18:34.620
> 
> 标签：vbscript, directory, filesystemobject

这与 Microsoft System Center Configuration Manager 2007 有点相关，但实际上与 VBScript、FileSystemObject API 和读取子文件夹属性有关。

我正在尝试运行一个脚本来枚举我们的一个分发点（包共享下的每个文件夹）上的文件夹和文件夹大小。我正在使用带有 VBscript 的 FileSystemObject API，我可以抓取大约 60% 的子文件夹，并获取它们的名称和大小，但其余的返回“错误 70 / Permission Denied”。我以什么帐户执行脚本并不重要，我尝试在每个子文件夹对象引用之间添加一个 Sleep() 延迟。它仍然不会得到他们所有。

如果我手动浏览这些文件夹，我可以毫无问题地查看它们的属性。这是 FSO 还是 Windows 脚本主机的已知问题？我在下面附上了脚本代码。蒂亚！

```
'****************************************************************
' Filename..: fso_subfolder_sizes.vbs
' Author....: skatterbrainz
' Date......: 02/10/2013
' Purpose...: enumerate package folders and tally disk space
'****************************************************************
Option Explicit

Const rootFolder = "\\SERVER123\ShareName$"

Dim time1, folderCount, totalSpace
Dim objFSO, objFolder, objSub
Dim GBsize, folderName, folderSIze

time1 = Timer

Set objFSO = CreateObject("Scripting.FileSystemObject")

folderCount = 0
totalSpace = 0

On Error Resume Next
Set objFolder = objFSO.GetFolder(rootFolder)

If err.Number = 0 Then

    wscript.echo "<folders>"

    For each objSub in objFolder.SubFolders

        folderName = objSub.Name
        folderSize = objSub.Size

        GBsize = FormatNumber(Bytes2Gbytes(folderSize), 2) & " GB"

        wscript.echo "<folder name=""" & folderName & """ size=""" & GBsize & """/>"

        folderCount = folderCount + 1
        totalSpace = totalSpace + folderSize

    Next

    Set objFolder = Nothing

    wscript.echo "</folders>"

    wscript.echo "--------------------------"
    wscript.echo "sub-folders: " & folderCount
    wscript.echo "total space: " & FormatNumber(Bytes2GBytes(totalSpace),2) & " GB"
Else
    wscript.echo "root folder not found"
End If

Set objFSO = Nothing

wscript.echo "runtime: " & FormatNumber(Timer - time1, 2) & " Msecs"

Function Bytes2Gbytes(n)
    If n > 0 Then
        Bytes2Gbytes = (n / 1024 / 1024 / 1024)
    Else
        Bytes2Gbytes = 0
    End If
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:08:07.400

是的，这是一个已知问题，在存在安全问题的文件夹（例如您的 c:\windows 文件夹）上，当您在文件夹上使用 .count of .size 时会出现错误。而是枚举每个文件并将计数和大小相加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-08T23:06:40.483

尝试从共享中获取每个 UserProfile 的配置文件大小时，我遇到了同样的问题。我使用 excel 并循环使用我知道在共享中有个人资料的用户名的行，如下所示：

```
strUserName = ActiveCell.Value
objP = "\\SERVER\SHARE$\" & strUserName & "\UPM_Profile"
ActiveCell.Offset(0, 1).Value = (FormatNumber(objFSO.GetFolder(objP).Size, 0, , , 0) / 1024) / 1024 
```

当我将共享映射到驱动器号时，只有数千个文件夹中的一些给出了“找不到路径”：

```
objP = "Z:\" & strUserName '& "\UPM_Profile" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:54:41.667

我在这个主题中发现了一个有趣但可重现的行为。至少在我们的生产环境中：如果我将根路径指定为根隐藏共享（即“\SERVER\Share$”），它就会真正陷入困境。但是，如果我更深一层，例如“\SERVER\Share$\Apps”），它似乎运行得更好。我还修改了脚本以先打印子文件夹名称，然后查询 .Size 属性，这似乎指向性能瓶颈。请注意下面更新示例中语句顺序的变化......

```
 For each objSub in objFolder.SubFolders

    folderName = objSub.Name

    wscript.echo vbTab & "<folder>"
    wscript.echo vbTab & vbTab & "<folderName>" & folderName & "</folderName>"

    folderSize = objSub.Size
    GBsize = FormatNumber(Bytes2Gbytes(folderSize), 2) & " GB"

    wscript.echo vbTab & vbTab & "<folderSize>" & GBsize & "</folderSize>"
    wscript.echo vbTab & "</folder>"

    folderCount = folderCount + 1
    totalSpace = totalSpace + folderSize

Next 
```

# php - PHP 选项组

> ID：14800368
> 
> 赞同：-4
> 
> 时间：2013-02-10T17:18:42.700
> 
> 标签：php, mysql

我有一个使用 PHP 构建的选项组。一切都很好，直到我不得不获取 DetailID 而不是 DetailName 的值来查找记录。我仍然需要显示 DetailName 但不需要显示 DetailID，我需要将 DetailID 添加到此。我该怎么做？

```
<?php
include("config.php");
$sql = "SELECT DetailType AS type, DetailID, GROUP_CONCAT(DISTINCT DetailName
          ORDER BY DetailName ASC   
          SEPARATOR '|') AS DetailName FROM tblDetails GROUP BY DetailType"; 
$result = mysql_query($sql) or die(mysql_error());  

while ($row = mysql_fetch_assoc($result)) { 
    echo "<optgroup label='{$row['type']}'>"; 
    $DetailNames = explode('|', $row['DetailName']); 
    foreach($DetailNames as $DetailName) { 
        echo '<option value='.$DetailID.'>'.$DetailName.'</option>';
    } 
    echo "</optgroup>";
}  
?> 
```

表。tblLocDet LocationID 1,1,2,3 DetailID 1,2,3,4

tblDetails DetailType Feature, Meal Period, Service, Type DetailID 1,2,3,4 DetailName Buffet, Fireplace, WiFi, Waterfront

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:08:31.847

这工作......

```
$sql = "SELECT DISTINCT DetailType AS type, DetailID, DetailName FROM tblDetails
            ORDER BY DetailType, DetailName";
                     $result = mysql_query($sql) or die(mysql_error());
                     $prev='';
                     while ($row = mysql_fetch_assoc($result)) { 
                     if ($prev != $row['type']) {
                         if ($prev) echo "</optgroup>";
                         echo "<optgroup label='{$row['type']}'>";
                         $prev = $row['type'];
                         }
                         echo "<option value='".$row['DetailID']."'>".$row['DetailName']."</option>";                            }
                         echo "</optgroup>"; 
```

# glib - 重定向使用 glib 启动的外部应用程序的输出

> ID：14800369
> 
> 赞同：1
> 
> 时间：2013-02-10T17:18:46.940
> 
> 标签：glib, output, vala

我正在尝试使用 vala 使用带有 spawn_command_line_sync() 的 GLib 启动外部应用程序。根据文档（[http://valadoc.org/#!api=glib-2.0/GLib.Process.spawn_sync](http://valadoc.org/#!api=glib-2.0/GLib.Process.spawn_sync)），您可以传递一个字符串来存储外部应用程序的输出。

虽然这在启动打印几行的脚本时效果很好，但我需要调用一个程序来打印二进制文件的内容。（例如“cat /usr/bin/apt-get”）

有什么方法可以接收外部程序的输出，而不是在字符串中，而是在 DataStream 或类似的东西中？

我打算将外部程序的输出写入文件，因此只需调用“cat /usr/bin/apt-get > outputfile”将是一种替代方法（不是很好），但它似乎不起作用.

无论如何，我希望它获得某种输出流。我将不胜感激任何帮助。

我使用的代码：

```
using GLib;

static void main(string[] args) {
    string execute = "cat /usr/bin/apt-get";
    string output = "out";

    try {
        GLib.Process.spawn_command_line_sync(execute, out output);
    } catch (SpawnError e) {
        stderr.printf("spawn error!");
        stderr.printf(e.message);
    }

    stdout.printf("Output: %s\n", output);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:19:06.787

[GLib.Process.spawn_async_with_pipes](http://valadoc.org/#!api=glib-2.0/GLib.Process.spawn_async_with_pipes)会让你做到这一点。它生成进程并为每个`stdout`、`stderr`和`stdin`. ValaDoc 中有一个关于如何设置`IOChannel`s 来监视输出的代码示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:58:55.163

谢谢你，我必须重读 spawn_async_with_pipes() 返回整数而不是字符串。

这样做有什么问题吗？（除了缓冲区大小为 1）

```
using GLib;

static void main(string[] args) {

    string[] argv = {"cat", "/usr/bin/apt-get"};
    string[] envv = Environ.get();
    int child_pid;
    int child_stdin_fd;
    int child_stdout_fd;
    int child_stderr_fd;

    try {
        Process.spawn_async_with_pipes(
            ".",
            argv,
            envv,
            SpawnFlags.SEARCH_PATH,
            null,
            out child_pid,
            out child_stdin_fd,
            out child_stdout_fd,
            out child_stderr_fd);

    } catch (SpawnError e) {
        stderr.printf("spawn error!");
        stderr.printf(e.message);
        return;
    }

    FileStream filestream1 = FileStream.fdopen(child_stdout_fd, "r");
    FileStream filestream2 = FileStream.open("./stdout", "w");

    uint8 buf[1];
    size_t t;
    while ((t = filestream1.read(buf, 1)) != 0) {
        filestream2.write(buf, 1);
    }
} 
```

# javascript - 如何在元素附近的适当位置显示提示？

> ID：14800371
> 
> 赞同：0
> 
> 时间：2013-02-10T17:18:53.747
> 
> 标签：javascript, jquery, html, css, hover

我在页面上有以下 div：

```
<div id="tip">
  Tip text here...
</div> 
```

以及以下一个：

```
 <div class="element">
   Element text here...
 </div> 
```

还遵循js代码：

```
$(document).ready(function() {
    $('.element').hover(function() {
        $('#tip').css('top', $('.element').position().top);
        $('#tip').css('left', $('.element').position().left);
        $('#tip').fadeIn();
    }, function() {
        $('#tip').fadeOut();
    });
}); 
```

它在页面的左上角显示提示。如何修复此代码以在与元素相同的位置显示提示？（我不能将提示和元素放在代码上彼此靠近。）

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:27:25.990

**为 Div 标签赋予标题显示工具提示**...... 尝试如下....

```
<div title="ToolTip for Hello World">

Hello World

</div> 
```

看到这个小提琴：http: [//jsfiddle.net/TPyKS/5/](http://jsfiddle.net/TPyKS/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:00:53.187

这就是我将如何做一个工具提示：

**html**

```
<div class="tip" title="Title here">
   Element text here...
 </div> 
```

**jQuery**

```
$(document).ready(function() {
    $('.tip').each(function(i, e) {
       var $this = $(e),

           originalTitle = $this.attr('title'),

       //Keep the title
           $title = $('<p class="tooltip" />').html(originalTitle);

       //Remove initial one
       $this.attr('title', '');

       $title.appendTo($this);

    });
    $('.tip').hover(function() {
        $(this).find('.tooltip').fadeIn();
    }, function() {
        $(this).find('.tooltip').fadeOut();
    });
}); 
```

**CSS**

```
.tip {
    position:relative;
}

.tooltip {
    position:absolute;
    display:none;
} 
```

只需使用 css 设置工具提示的位置即可。title 属性允许禁用 javascript 的用户也可以看到它们。

见[小提琴](http://jsfiddle.net/soyuka/upaya/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T20:43:55.907

您可以尝试使用以下函数来帮助您确定 domElement 的绝对坐标。可以提供 left 和 top 参数来获取从元素左上角相对偏移的位置。

```
var findAbsolutePosition = function(domElement, left, top) {
    if (!parseInt(left)) {
        left = 0;
    } else {
        left = parseInt(left);
    }
    if (!parseInt(top)) {
        top = 0;
    } else {
        top = parseInt(top);
    }

    var box = domElement.getBoundingClientRect();
    var body = document.body;
    var docElem = document.documentElement;
    var scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;
    var scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;

    var clientTop = docElem.clientTop || body.clientTop || 0;
    var clientLeft = docElem.clientLeft || body.clientLeft ||0;

    var position = {};
    position.y = box.top +  scrollTop - clientTop + top*Settings.get('scale'); 
    position.x = box.left + scrollLeft - clientLeft + left*Settings.get('scale');
    position.width=box.width;
    position.height=box.height;

    return position;
} 
```

另一种方法是将tip元素动态插入到需要tip的元素附近的DOM中。使用哪种方法取决于您

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T18:05:04.693

.position 是相对于父级的，试试 .offset，他是相对于文档的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T17:50:50.993

尝试这个：

**HTML**

```
<div class="element">
   Element text here...
 </div>
<div id="tip">
  Tip text here...
</div> 
```

**CSS**

```
#tip{
    position: absolute;
    display: none;
    background: #ccc;
    padding: 10px;
}
.element:hover + #tip{
    display: block;
}
div{
    float: left;
} 
```

演示：http: [//jsfiddle.net/enve/TPyKS/10/](http://jsfiddle.net/enve/TPyKS/10/)

# c# - Sharepoint Webpart 中的 JScript 运行时错误

> ID：14800375
> 
> 赞同：1
> 
> 时间：2013-02-10T17:19:18.120
> 
> 标签：c#, jquery, sharepoint

我正在尝试设计一个查看新闻项目列表的 Web 部件，并最初按日期顺序打印所有行。如果用户选择一种新闻项目，那么只会显示那些新闻项目（同样，按日期排序）。问题是当我尝试调试它时，我的 webpart 不断抛出这个错误：

Microsoft JScript 运行时错误：未知的运行时错误

而这个烂摊子在它背后突然出现：

```
 RTE.RteUtility.$1n = function($p0, $p1) {
if (RTE.RteUtility.isInternetExplorer() && $p0.tagName === 'TABLE') {
    var $v_0 = document.createElement('DIV');
    $v_0.innerHTML = '<table>' + $p1 + '</table>';
    while ($p0.childNodes.length > 0) {
        $p0.removeChild($p0.childNodes[0]);
    }
    RTE.RteUtility.$1E($v_0.firstChild, $p0);
}
else {
    $p0.innerHTML = '<div>RTE</div>' + $p1;
    $p0.removeChild($p0.firstChild);
}
} 
```

这行：“$p0.innerHTML = 'RTE' + $p1”似乎是导致问题的原因。好吧，否则，这是一个非常具体的错误消息，谢谢微软。：/

该错误似乎发生在 NewsFeed.cs 调用 CreateChildControls 之后。我现在最好的理论可能是 NewsFeedUserControl.ascx.cs 中的某些东西导致了错误，但由于我是 SharePoint 的新手，我不知道这可能是什么。是因为 Page_Load 中的这段代码吗？

`protected void Page_Load(object sender, EventArgs e) { list = web.Lists["NewsFeedLI"];`

 ````
 query.Query = "<Where><IsNotNull><FieldRef Name='Headline' /></IsNotNull></Where></Query>" +
               "<OrderBy<FieldRef Name='Article_x0020_Date' Ascending='True' /></OrderBy>";

         SPListItemCollection result = list.GetItems(query);

        foreach (SPListItem item in result)
        {
            newsList.Text = newsList.Text + item["Headline"].ToString() + Environment.NewLine;
            newsList.Text = newsList.Text + item["Summary"].ToString() + Environment.NewLine + Environment.NewLine;
        }
    } 
````  `看，我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:42:19.730

尝试预定义您在循环中返回的文本。如果 Web 部件的基本文本（例如“Hello World”）看起来不错，但没有更高级的值，那么它就是您的问题所在。

您需要确保将适当的编码应用于要呈现到屏幕的任何输出，因为这可能会导致您出现问题。`

# javascript - 使用 jquery 将值相加

> ID：14800379
> 
> 赞同：0
> 
> 时间：2013-02-10T17:19:43.877
> 
> 标签：javascript, jquery, html

我有 3 个跨度标签，用于保存每件商品的价格和运费。我需要将三个跨度标签加在一起，以使用 jQuery 得出总价。这是我的代码：

```
<div id="relative">
    <div id="absolute">
        Widget 1: <span id="widget_1_price">$99.99</span><br />
        Widget 2: <span id="widget_2_price">$14.99</span><br />
        Shipping Fee: <span id="shipping_price">$10.00</span><br />
        <b>Total: <span id="total_price"></span></b>
    </div>
</div> 
```

我尝试了几种方法，但似乎没有一个对我有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:23:53.747

循环遍历元素并解析其中的文本，然后将它们相加：

```
var sum = 0;
$('#widget_1_price,#widget_2_price,#shipping_price').each(function(){
  sum += parseFloat($(this).text().substr(1));
});
$('#total_price').text('$' + Math.round(sum * 100) / 100); 
```

演示：http: [//jsfiddle.net/QTMsE/](http://jsfiddle.net/QTMsE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:27:53.380

```
var val1 = parseFloat($("#widget_1_price").text().substring(1));
var val2 = parseFloat($("#widget_2_price").text().substring(1));
var shipping = parseFloat($("#shipping_price").text().substring(1));

var all = val1 + val2 + shipping;
$("#total_price").text("$"+all); 
```

尝试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T17:28:48.563

尝试这个：

```
total = parseFloat($('#widget_1_price').text().slice(1))+
        parseFloat($('#widget_2_price').text().slice(1))+
        parseFloat($('#shipping_price').text().slice(1));

$('#total_price').text('$'+total); 
```

# php - mod_rewrite 后 POST 不工作

> ID：14800383
> 
> 赞同：0
> 
> 时间：2013-02-10T17:19:47.630
> 
> 标签：php, html, .htaccess

这是我的 htaccess

```
Options -Indexes
<IfModule dir_module>
DirectoryIndex in.php
</IfModule>
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteRule \.(css|jpe?g|gif|png|js|css|htm|html|mp3|wav|ico)$ - [L]
RewriteBase /
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{THE_REQUEST} ^[A-Z]+\ /([^/]+/)*[^.#?\ ]+\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(([^/]+/)*[^.]+)\.php http://www.example.com/$1 [R=301,L]

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^some/(.*)/(.*)/$ test.php?z=$1&n=$2 [NC,L]
RewriteRule ^some/(.*)/(.*)$ test.php?z=$1&n=$2 [NC,L]
RewriteRule ^some/(.*)/$ test.php?z=$1 [NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !.*test.php$ [NC]
RewriteRule ^([^\.]+)$ $1.php [NC,L] 
```

实施 mod_rewrite 后，具有相对路径的 $_POST 都不起作用。

**注意：我已经设置了 <base href="http://example.com/"/> 和 RewriteBase / 如上所述**

我已经在 SO 上解决了其他问题，但没有运气！

感谢您的意见！

对不起..在某种意义上不起作用，POST变量可能在htaccess重定向期间丢失了？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:13:22.427

我会验证您用于构建表单操作的代码。我同意上述评论者的观点，即您由于重定向而丢失了 POST 变量。

为什么会发生这种情况？

首先，从非 www 重定向到 www 的重写规则应该只发生在有人第一次访问您的网站而没有 www 的情况下。你应该相应地编程。

即——有人输入“example.com”——你的重写会将他们带到“www.example.com”

从那时起，如果您必须在表单中引用您的完整域，请使用整个 WWW 版本。

```
<form action="http://www.example.com/processForm.php" method="POST"> 
```

或者，您可以停止使用完整域。

我见过这种情况发生的一个常见地方是程序员使用定义配置对象的插件。也许该配置对象意外地指向了非 www 版本。想象一下这段代码：

```
$config = array('domain'=>'example.com', 'othersettings'=>'more here'); 
```

有时会这样创建表单：

```
<form action="<?php echo $config['domain'] ?>/processForm.php" method="POST"> 
```

看，那会被翻译成非 www 版本，丢失你的 POST 值。

祝你好运！

# android - 键盘显示时调整布局

> ID：14800385
> 
> 赞同：0
> 
> 时间：2013-02-10T17:19:58.753
> 
> 标签：android, android-layout

在我的布局中，我有一个 admob 广告`EditText`在布局中显示。当我专注于编辑文本以键入内容时，键盘会出现并将 admob 广告移动到编辑文本上，您看不到您正在输入的内容。

这是我的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:isScrollContainer="false" >

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/wood_floor" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <com.tyczj.bowling.adapters.RobotoThinTextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="40dp"
            android:layout_marginTop="30dp"
            android:text="Add Bowler"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#33b5e5"
            android:textSize="40dp" />

        <FrameLayout
            android:id="@+id/line"
            android:layout_width="fill_parent"
            android:layout_height="2dp"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/textView2"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:layout_marginTop="8dp"
            android:background="@drawable/ab_solid_custom_blue_inverse_holo" >
        </FrameLayout>

        <com.tyczj.bowling.adapters.RobotoThinTextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/line"
            android:layout_below="@+id/line"
            android:layout_marginTop="20dp"
            android:text="@string/bNameTV"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/textView1"
            android:layout_below="@+id/line"
            android:layout_marginLeft="30dp"
            android:layout_marginRight="20dp"
            android:layout_toRightOf="@+id/textView1"
            android:inputType="textCapSentences" >

            <requestFocus />
        </EditText>

        <EditText
            android:id="@+id/editText2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/textView3"
            android:layout_below="@+id/editText1"
            android:layout_marginLeft="30dp"
            android:layout_marginRight="20dp"
            android:layout_toRightOf="@+id/textView3"
            android:inputType="textCapSentences" >

            <requestFocus />
        </EditText>

        <com.tyczj.bowling.adapters.RobotoThinTextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/line"
            android:layout_below="@+id/textView1"
            android:layout_marginTop="20dp"
            android:text="@string/lNameTV"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <RadioButton
            android:id="@+id/radioButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/textView3"
            android:layout_below="@+id/textView3"
            android:layout_marginTop="15dp"
            android:checked="true"
            android:text="Right Handed" />

        <RadioButton
            android:id="@+id/radioButton2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/line"
            android:layout_below="@+id/radioButton1"
            android:text="Left Handed" />

        <Button
            android:id="@+id/done"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/line"
            android:layout_alignParentBottom="true"
            android:layout_below="@+id/radioButton2"
            android:onClick="onDoneClick"
            android:text="@string/done" />
    </RelativeLayout>
</ScrollView>

<com.google.ads.AdView
    android:id="@+id/ad"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    ads:adSize="IAB_BANNER"
    ads:loadAdOnCreate="true" />

</RelativeLayout> 
```

在我的清单中，我`android:windowSoftInputMode="stateVisible|adjustResize"`在活动中设置但没有任何效果

当键盘出现时，如何阻止广告移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:24:36.260

你试过模式adjustPan吗？这可能对你更有效。由于您有一个相对于屏幕底部对齐的元素的 RelativeLayout，因此 adjustResize 将始终将该元素保持在屏幕底部。您可以通过将广告放置在滚动视图下方而不是与底部对齐来调整布局来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:51:00.447

尝试使用 a`LinearLayout`而不是 outmost`RelativeLayout`并添加`ScrollView`with`android:layout_weight="1"`和`AdView`with `android:layout_weight="0"`：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

  <ScrollView
    android:layout_width="fill_parent"
    android:layout_height="0"
    android:layout_weight="1"
    ...
    />
    ...
  </ScrollView>

  <com.google.ads.AdView
    android:layout_width="fill_parent"
    android:layout_height="0"
    android:layout_weight="0"
    .../>

</LinearLayout> 
```

# ajax - 为什么 ajax 和 jsf 可以很好地协同工作？Ajax 生命周期如何插入正常的 JSF 生命周期？

> ID：14800398
> 
> 赞同：0
> 
> 时间：2013-02-10T17:21:03.520
> 
> 标签：ajax, jsf-2

我使用过 JSF 1.2 但对 JSF 2.0 是新的。似乎 JSF 2.0 通过无缝支持 ajax 功能，`<f:ajax>` 但我还不清楚如何？我想了解是什么让这两种强大的技术如此完美地协同工作？两个生命周期如何交互？

PS：我熟悉ajax和javascript。所以你可以在这个前提下做出你的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:30:18.363

这个问题非常广泛，我建议搜索适当的标签以了解其在实际情况中的用法。BalusC 在 stackoverflow 上做出了很多贡献，并且还编写了 Xtreme Biker 参考的优秀教程。

由于没有答案，我将提供一个关于 ajax 如何在 JSF 中工作的基本观点。JSF 中有一个特殊的 Javascript 库，可以使用`jsf.ajax.request(...)`. 为了简化开发，您可以将 ajax 行为附加到某些组件。通常，您将`<f:ajax>`在您选择的组件上使用标签，例如`<h:commandButton>`，为其添加 ajax 功能。

在过去，我们会`XMLHttpRequest`通过 get 或 post 向服务器发送异步消息，然后等待服务器向我们发送回发数据，我们通常会以 JSON 或 XML 格式获取这些数据，以供客户端处理并通过`document.getElementById(...)`或更方便的方法更新视图由现代 Javascript 库引入。我认为最终这就是 JSF 在幕后所做的。

在 JSF 2.0`<f:ajax>`中引入了标签，它有助于部分提交数据、在服务器上处理数据并部分更新您的视图。为此，ajax 标记具有以下最重要的特性/属性：`<f:ajax execute="..." render="..." event="..." listener="..." onevent="..." />`. 让我们仔细看看它们。

1.  `execute`属性通过指定元素 ID 列表告诉 JSF 在此请求期间应该在服务器上更新/处理哪些元素；
2.  `render`属性告诉 JSF 在 ajax 调用完成后应替换哪些组件 - 在服务器上呈现的新元素应在部分页面更新后替换具有指定 id 的旧元素；
3.  `event`属性定义将发生 ajax 调用的事件，例如，在命令按钮的情况下，事件可能是单击事件，在输入文本字段的情况下，事件可能是按键或模糊事件；
4.  `listener`属性定义了对类型的托管 bean 方法的绑定，该方法`public void processAjaxRequest (AjaxBehaviorEvent event) { }`将在 ajax 请求上触发并在部分页面更新完成之前在服务器上执行；
5.  `onevent`属性定义了在 ajax 请求的不同阶段调用的 javascript 函数。

[您可以在此处](http://courses.coreservlets.com/Course-Materials/pdf/jsf/jsf2/JSF2-Ajax.pdf)查阅 Marty Hall 编写的关于 ajax 的另一个优秀教程。

我不打算对 JSF 2.0 中的 ajax 特性做一个概述，而是做一个简短的介绍来获得对 ajax 功能的基本掌握。

# c++ - 在解构器中删除指针后执行中的双释放错误

> ID：14800399
> 
> 赞同：-1
> 
> 时间：2013-02-10T17:21:12.977
> 
> 标签：c++, memory-management, vector, double-free

我有一个包含成员指针的类，该指针在其构造函数中动态分配，如下所示：

```
class Record {
public:
    Record(unsigned short numBytes, char* bufRecord);
    ~Record();

    unsigned short size() {return m_numBytes;}
private:
    unsigned short m_numBytes;
    char* m_bufRecord;
};

Record::Record(unsigned short numBytes, char* bufRecord) {
    m_numBytes = numBytes;
    m_bufRecord = new char[numBytes];

    for(unsigned short i=0; i<numBytes; i++)
        m_bufRecord[i] = bufRecord[i];
}

Record::~Record() {
    delete m_bufRecord;
} 
```

它基本上将输入缓冲区复制到动态分配的成员缓冲区中。我继续在另一个类的构造函数中使用这个类：

```
class File {
public:
    File(const char* fileName);
    ~File();

    unsigned int numRecords() {return m_records.size();}
    Record getRecord(unsigned int numRecord) {return m_gdsRecords[numRecord];}
private:
    std::ifstream           m_file;
    std::vector<Record>     m_records;
};

File::File(const char* fileName) : m_file(fileName, ios::in | ios::binary) {
    while(!m_file.eof()) {
        char bufNumBytes[2];
        char* bufRecord;
        unsigned short numBytes;

        m_file.read(bufNumBytes, 2);
        numBytes = (bufNumBytes[0] << 8) + bufNumBytes[1] - 2;
        bufRecord = new char[numBytes];
        m_file.read(bufRecord, numBytes);

        Record record(numBytes, bufRecord);
        m_records.push_back(record);

        delete bufRecord;
    }
} 
```

但是，当我实例化此类时，出现以下错误，这似乎表明我正在双重释放`m_bufRecord`：

```
*** Error in `./a.out': double free or corruption (fasttop): 0x0000000001cb3280 *** 
```

我猜问题在于插入了一个包含指向`vector`元素的指针的类，并且在同一个指针上调用了两次析构函数，但我不确定这是怎么发生的。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:35:36.930

这是[三法则的](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)一个例子。如果您的类需要在析构函数中释放资源，它通常需要声明一个复制构造函数（和复制赋值运算符），以复制拥有的资源、管理共享所有权或防止被复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:26:29.967

```
Record getRecord(unsigned int numRecord) {return m_gdsRecords[numRecord];} 
```

此函数返回`Record`. 所以现在你有两个`Record`s 包含相同的`m_bufRecord`指针。在这些`Record`s 上运行析构函数将尝试删除相同的指针值两次。

# css - 是否可以为儿童一步一步（一个接一个）运行 CSS3 动画？

> ID：14800403
> 
> 赞同：2
> 
> 时间：2013-02-10T17:21:32.147
> 
> 标签：css, animation, css-transitions

在带有 html 的简单 CSS3 动画中（[示例](http://jsfiddle.net/AE7tj/)）

```
<div class="parent">
    <a href="#">First</a>
    <a href="#">Second</a>
    <a href="#">Third</a>
</div> 
```

和 CSS

```
@-webkit-keyframes anim{
    0% {color:blue}
    10% {color:red}
}
.parent a {
    color:black;
    -webkit-animation: anim 3s infinite;
} 
```

所有颜色的变化同时适用于所有孩子。是否可以为每个孩子一个一个改变颜色？

换句话说，我们需要暂停其他孩子并为单个孩子运行动画，然后暂停并运行下一个孩子。这意味着一次只有一个孩子在制作动画。

请注意，孩子的数量是未知的，我们需要为单个孩子而不是整个周期分配动画持续时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:29:08.200

这对于 CSS 来说是不可能的。（尽管将来可能会提供 CSS 变量。但今天它们只是实验性的）

但是您可以使用 LESS 或 SASS（下面的示例）创建一些东西（不是很漂亮）。注意：只有当您知道可能存在的最大数量时，您才能执行此操作。

```
@for $i from 1 through 19 {
    .parent a:nth-child(#{$i}) { -webkit-animation-duration: $1s; }
} 
```

**建议的解决方案：** 如果您不想这样做，请使用 Javascript。它很简单：

```
$.each($('.parent a'), function(index, elem) {
    $(elem).css('-webkit-animation-duration', index + 's');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:26:20.850

[http://jsfiddle.net/AE7tj/](http://jsfiddle.net/AE7tj/)这是带有动画延迟的变体。

正如@mddw 所说，可以这样做，但有已知数量的孩子。动画应该应用于每个孩子，因为每个人都需要自己的动画延迟。

此外，如果您希望动画无限运行，您实际上需要动画持续时间来覆盖整个时间。Animation-delay 仅适用于动画的第一次运行，不会在迭代之间应用。

我有：

```
0% {color:blue}
33% {color:red}
66% {color: black}
100% {color: black} 
```

动画持续时间为 9 秒。这意味着从开始到大约。第 3 秒颜色会从蓝色变为红色，然后从第 3 到第 6 色将由红色变为黑色，并保持黑色直到动画结束。

# c - 使用 C99 进行 C 结构初始化 - 混合命名和未命名成员是否有效？

> ID：14800406
> 
> 赞同：5
> 
> 时间：2013-02-10T17:21:49.610
> 
> 标签：c, c99, designated-initializer

鉴于以下情况：

```
struct example_struct
{
  char c;
  int i;
}; 
```

以下任何初始化语法在 C99 中是否有效？

语法示例 #1

```
struct example_struct example = { 'a', .i = 1}; 
```

语法示例 #2

```
struct example_struct example = { .c = 'a', 1}; 
```

我正在编写一个简单的结构解析器，在我的测试中，这不会导致使用 XCode 4.2 的编译器错误。我希望我的解析器符合 C99。我的理解（没有标准参考）是结构初始化程序应该具有所有未命名或命名（即指定）成员。

语法示例 #1 和 #2 应该是编译器错误吗？

如果示例有效，初始化语法的规则是什么？

更新的问题示例

```
struct example_struct_3
{
  char c;
  int i;
  float f;
};

struct example_struct_3 example = { .i = 1, 1.0}; 
```

在同一个主要问题中，示例三将如何工作？我主要对指定初始值设定项与标准初始值设定项的任意顺序感到困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T17:23:24.313

您的初始化示例 1 和 2 都是有效的 C99/C11 初始化。您可以在初始值设定项列表中混合指定初始值设定项和非指定初始值设定项。

**编辑：**关于您的新示例 3，初始化也是有效的。初始化后，`example.c`has value `0`，`example.i`has value`1`和`example.f`has value `(float) 1.0`。

# c++ - 为什么这个 C++ 函数返回一个值？

> ID：14800407
> 
> 赞同：1
> 
> 时间：2013-02-10T17:22:05.197
> 
> 标签：c++, function, for-loop

为什么这段代码会打印出 n-100？

```
 int hello(int n)
    {
        for(int i = 0; i < n-100; i++)
        {
        }
    }

    int main()
    {
            int h = hello(12);
        cout << hello(12) << " " << h << endl;
    } 
```

然而，这两个函数都返回垃圾（分别为 2665092 和 0）

```
 int hello1(int n)
    {
          for(int i = 0; i < 12; i++);
    }

    int hello2(int n)
    {
         (n - 100);
    } 
```

我在 cygwin 环境中使用 g++ 编译了这段代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T17:23:14.393

您只是看到**未定义行为**的结果。

始终编​​译`-Wall -Werror`以防止这种错误潜入您的代码。

# java - 如何从Java中的嵌套类访问父类成员？

> ID：14800410
> 
> 赞同：38
> 
> 时间：2013-02-10T17:22:39.630
> 
> 标签：java

Java程序员的简单问题-我不确定是否可以直接使用-请提供解决方法。

我想访问父变量来初始化嵌套类成员，但不知道执行它的 Java 语法（如果可能的话）。如何使用父 ID 设置子 ID。

```
public class Parent {
    final String id = "parent";

    class Child {
        // it is invalid since scope hide parent id?
        final String id = id;
    }
} 
```

我发现的最佳解决方案非常难看，请参见此处：

```
public class Parent {
    final String id = "parent";

    // ugly clone
    String shadow = id;

    class Child {
        final String id = shadow;
    }
} 
```

请帮助语法 - 我不知道如何表达它。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-02-10T17:23:33.967

您可以使用其完全限定名称来访问它：

```
final String id = Parent.this.id; 
```

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2015-10-04T09:33:45.823

如果您更改其中一个字符串 id 怎么样。

```
public class Parent {
  final String id = "parent";

  class Child {
    // it is invalid since scope hide parent id?
    // Instead of using id use ID
    final String ID = id;
  }
} 
```

这样你就不会有字符串 id = id，这是没有意义的。

# wordpress - Wordpress $wpdb->get_results() 查询

> ID：14800411
> 
> 赞同：11
> 
> 时间：2013-02-10T17:22:42.630
> 
> 标签：wordpress

我正在尝试通过 Wordpress 运行 mysql_fetch_array。我发现最好的方法在这里解释：http: [//codex.wordpress.org/Class_Reference/wpdb#SELECT_Generic_Results](http://codex.wordpress.org/Class_Reference/wpdb#SELECT_Generic_Results)

以下是我的查询：

```
$sql = "SELECT * FROM wp_reminders WHERE reminder LIKE '$today'";
$result = $wpdb->get_results($sql) or die(mysql_error());

    foreach( $result as $results ) {

        echo $result->name;
    } 
```

即使数据确实存在，上述内容也根本没有得出任何结果。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-10T17:33:54.520

问题如下：

```
echo $result->name; 
```

应该：

```
echo $results->name; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-07T01:54:08.957

'foreach' 循环和 'result = $wpdb->...' 的初始 var 语句应该是结果。

```
$sql = "SELECT * FROM wp_reminders WHERE reminder LIKE '$today'";
$results = $wpdb->get_results($sql);

    foreach( $results as $result ) {

        echo $result->name;

    } 
```

这背后的逻辑是，您将从 get_results() 函数收集所有结果，然后像这样循环它们：（大声朗读 - 强制执行逻辑）

```
foreach ( $ofTheMassiveList as $aSingleResult ) {

        echo $aSingleResult->name;

} 
```

# php - php中的xml登录脚本和会话

> ID：14800412
> 
> 赞同：0
> 
> 时间：2013-02-10T17:23:01.263
> 
> 标签：php, xml, session, session-variables

我有一个存储登录详细信息的 xml(mydata.xml) 文件，如下所示

```
<?xml version = "1.0" encoding="Windows-1252" standalone="yes"?>
<MYData>
    <login_details>
        <unique_ref>1-61</unique_ref>
    <login_name>tomme</login_name>
        <login>me</login>
        <password>me</password>
        <file1>Test</file1>
        <file2/>
        <file3/>
        <file4/>
    </login_details>
    <login_details>
        <unique_ref>1-61</unique_ref>
    <login_name>tony</login_name>
        <login>tony</login>
        <password>tony</password>
        <file1>Test1</file1>
        <file2/>
        <file3/>
        <file4/>
    </login_details>
</MYData> 
```

我有一个登录文件来输入详细信息

```
<html>
<head>
<title>Administrator Login Page</title>
<style type="text/css">
@import "style.css";
</style>
</head>
<body>
<h1>Administrator Login Page</h1>
</br></br></br></br></br></br></br>
<form action="admin_verify.php" method="post">
User Name: <input type="text" name="admin_name" />
</br></br>
Password:&nbsp;&nbsp; <input type="password" name="admin_password" />
</br></br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="submit" value="Login"/>
<input type="reset" value="Reset"/>
</form>
</body>
</html> 
```

我还有一个 admin_verify 文件

```
<?php
    session_start();
    $mydata = simplexml_load_file("xml/mydata.xml");

    $login = "";
    $password = "";
    $loginname = "";

    for($i = 0; $i < count($mydata); $i++){

        $login = $mydata->login_details[$i]->login;
        $password = $mydata->login_details[$i]->password;
        $loginname = $mydata->login_details[$i]->login_name;

    if(empty($_POST["admin_name"]))
    {
        header("Location:login.php");
        return false;
    }

    if(empty($_POST["admin_password"]))
    {
        $this->HandleError("Password is empty!");
        return false;
    }

        if(($_POST["admin_name"] == $login) && ($_POST["admin_password"] == $password)){
            $_SESSION['name'] = "$loginname";
            header("Location:admin_panel.php");
        }
    }

    //as we have exited for loop (and therefore not been directed) we have a invalid login
    echo "invalid username or password";
 ?> 
```

问题在于 admin_panel 中的会话，因为我试图从 xml 文件获取 $loginname 到 admin_verify 文件，它传递了“tomme”，但 admin_panel 文件是我迷路的地方我也想传递“ tomme' 在 xml 文件中显示 file1 的内容 如果我在所有会话页面中将 $loginname 硬编码给管理员，那么它工作正常但我想动态传递信息 admin_panel 如下所示

```
<html>
<head>
<title>Administrator Panel</title>
<style type="text/css">
@import "style.css";
</style>
</head>
<body>
<h1>Administrator Panel</h1>
<?php
session_start();
$mydata = simplexml_load_file("xml/mydata.xml");

     for ($i=0; $i < count($mydata);++$i)
     $loginname = $mydata->login_details[$i]->login_name;

if($_SESSION['name']=="$loginname")
{
echo "Welcome ".$_SESSION['name'];
echo "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
echo "<a href='logout.php'>Logout</a>";
}
else
{
header("Location:login.php");
}
echo "&nbsp;&nbsp;&nbsp;";

echo "</br></br></br>";

?>
</body>
</html> 
```

任何帮助都会得到满足

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:04:12.933

首先，无论如何将纯文本密码存储在任何文件中都不是一个好主意。无论如何

您可以对 simpleXML 对象进行 json_encode 并将其插入到您的会话中，然后将值传递给管理面板。

查看所有 3 个文件的编辑，希望对您有所帮助。

登录：

```
<?php session_start();
//already logged in
if(isset($_SESSION['logged_in']) && $_SESSION['logged_in']==true){
    exit(header("Location: ./admin_panel.php"));
}
?>
<html>
<head>
<title>Administrator Login Page</title>
<style type="text/css">
@import "style.css";
</style>
</head>
<body>
<h1>Administrator Login Page</h1>

<?php echo (isset($_SESSION['error'])?'<span style="color:red">'.$_SESSION['error'].'</span>':null);?>
<div>
    <form action="admin_verify.php" method="post">
        <label for="admin_name">User Name:</label> <input type="text" name="admin_name" />
        </br>
        <label for="admin_password">Password:</label> <input type="password" name="admin_password" />
        </br>
        <input style="margin-left:30px" type="submit" value="Login"/>
        <input type="reset" value="Reset"/>
    </form>
</div>

</body>
</html>
<?php 
//unset error as its only required once
unset($_SESSION['error']);
?> 
```

admin_veryify

```
<?php
session_start();
$mydata = simplexml_load_file("mydata.xml");

$login = "";
$password = "";
$loginname = "";

for($i = 0; $i < count($mydata); $i++){

    $login = $mydata->login_details[$i]->login;
    $password = $mydata->login_details[$i]->password;
    $loginname = $mydata->login_details[$i]->login_name;

    if(empty($_POST["admin_name"]) || empty($_POST["admin_password"]))
    {
        $_SESSION['error']='Please fill in both username and password';
        exit(header("Location:login.php"));
    }

    if(($_POST["admin_name"] == $login) && ($_POST["admin_password"] == $password)){
        //set logged in
        $_SESSION['logged_in'] = true;
        //unset password no need to include that
        unset($mydata->login_details[$i]->password);

        //json encode the user stuff from the xml
        $_SESSION['user_details'] = json_encode($mydata->login_details[$i]);

        //goto admin
        exit(header("Location: ./admin_panel.php"));
    }
}

//as we have exited for loop (and therefore not been directed) we have a invalid login
$_SESSION['error']='Invalid username or password';
exit(header("Location:login.php"));
?> 
```

管理面板

```
<?php
session_start();
//logout
if(isset($_GET['logout'])){unset($_SESSION['logged_in']);session_destroy();}

//check login
if(isset($_SESSION['logged_in']) && $_SESSION['logged_in']==true){
    //json decode user details from session into an array
    $user_details = json_decode($_SESSION['user_details'],true);

    //debug your values
    echo '<pre>'.print_r($user_details,true).'</pre>';
    /*
    Array
    (
        [unique_ref] => 1-61
        [login_name] => tomme
        [login] => me
        [file1] => Test
        [file2] => Array
            (
            )

        [file3] => Array
            (
            )

        [file4] => Array
            (
            )

    )
    */

    echo '<a href="?logout">logout</a>';
}else{
    exit(header("Location: ./login.php"));
}
?> 
```

# c - 如何获取 unsigned char* 数组中的元素数？

> ID：14800413
> 
> 赞同：1
> 
> 时间：2013-02-10T17:23:12.553
> 
> 标签：c

我有一个函数，它接收指向不同数组的指针，如下所示：

```
 unsigned char *arr[] = {0x34, 0x10, 0x3f, 0x00, 0x00 } 
```

我想知道我的函数正在获取的每个数组中有多少元素（字节）。例如，我需要一种方法来找到这个数组有 5 个字节。我将它传递给一个函数来打印数组的值。Sizeof(arr) 没有给我正确的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:25:25.137

除非您使用“数组以空值终止”之类的约定（名义上是 C 字符串），否则您无法在运行时确定数组的大小。那时你所拥有的只是一个指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T17:25:17.680

这是 C。在 C 中这不存在。您必须在某个地方记住/存储元素的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T17:54:47.787

```
sizeof(arr)/sizeof(unsigned char*) 
```

您可以很容易地将其宏观化为

```
#define ARRAY_LENGTH(_array_)    (sizeof(_array_) / sizeof(_array_[0]) 
```

顺便说一句，这仅在您在与数组相同的范围内使用时才有效。如果将数组传递给函数（并且数组降级为指针），这将不起作用。如果将数组传递给函数，则需要传递数字元素，可能还需要传递每个元素的大小。

# mysql - 有问题的规范化

> ID：14800421
> 
> 赞同：1
> 
> 时间：2013-02-10T17:23:54.247
> 
> 标签：mysql, sql, database, forms, normalize

我是设计数据库和 MySQL 的新手

所以为了简短起见，我所拥有的信息是`AppId, Last Name, First Name, Gender, Age, DoB, Relation, School Name, School Address, School Phone Number, Teachers, Councilers, If they are in childcare` （AppID 是正在提交的应用程序 ID）

基本上这就是我如何看待所有事情的确定以及应该创建哪些表以最规范化

```
AppID -> Child ID
childID -> Last Name, FirstName, Gender, Age, DoB, Relation, School Name, Grade, Child Care
School Name -> Address School, School Phone Number, teacherID,counselorID
teacherID -> First Name, Last Name, Course
CounselorID -> First Name, Last Name, Counselor type 
```

但是我不确定尝试完全标准化这是否是一个好主意，因为这是我正在帮助的一个相当小的组，这可能会导致加入表格比常规分组查找花费更长的时间并且可能占用更多空间。

另一个问题是 MySQL 只允许 1 个自动增量变量，我可以在查询中定义类似的东西，但如果可能的话，我宁愿不必这样做。2 个增量将是teacherID 和 CouncelorID

所以任何输入将不胜感激

编辑：这是基本结构，稍后还会添加修改属性，暂时放弃课程。谢谢

```
 CREATE TABLE `Client_Child_Info` (
      `FirstName` varchar(15) NOT NULL,
      `LastName` varchar(15) NOT NULL,
      `Gender` tinyint(1) NOT NULL,
      `Age` tinyint(4) NOT NULL,
      `DoB` date NOT NULL,
      `Relation` varchar(15) NOT NULL,
      `Grade` varchar(3) NOT NULL default 'NA',
      `ChildCare` tinyint(1) NOT NULL default '0',
      `ChildID` int(11) NOT NULL auto_increment,
      PRIMARY KEY  (`ChildID`),
      KEY `Age` (`Age`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Basic Child Information' AUTO_INCREMENT=1 ;

    CREATE TABLE `Client_Child_Schoolinfo` (
      `SchoolID` int(11) NOT NULL,
      `SchoolName` varchar(50) NOT NULL,
      `SchoolAddress` varchar(50) default NULL,
      `SchoolPhone` varchar(15) default NULL,
      PRIMARY KEY  (`SchoolID`),
      KEY `SchoolName` (`SchoolName`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='School Information for a given ID ';

    CREATE TABLE `Client_child_teacher` (
      `TeacherID` int(11) NOT NULL,
      `FirstName` varchar(15) NOT NULL,
      `LastName` varchar(15) NOT NULL,
      `Guidance` tinyint(1) NOT NULL COMMENT 'determines if the person is a guidance councilor or teacher',
      PRIMARY KEY  (`TeacherID`),
      KEY `Guidance` (`Guidance`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Teacher information';

    CREATE TABLE `Client_RTchild` (
      `AppID` int(11) NOT NULL,
      `ChildID` int(11) NOT NULL auto_increment,
      PRIMARY KEY  (`ChildID`),
      KEY `AppID` (`AppID`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Reference Table Applicant to Client' AUTO_INCREMENT=1 ;

    CREATE TABLE `Client_RTteacher` (
      `SchoolID` int(11) NOT NULL,
      `TeacherID` int(11) NOT NULL,
      PRIMARY KEY  (`TeacherID`),
      KEY `SchoolID` (`SchoolID`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Reference Table for teacher to school ';

    CREATE TABLE `Client_RTschool` (
      `ChildID` int(11) NOT NULL,
      `SchoolID` int(11) NOT NULL auto_increment,
      PRIMARY KEY  (`SchoolID`),
      KEY `ChildID` (`ChildID`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Reference Table Child to SchoolID it is attending' AUTO_INCREMENT=1 ;

ALTER TABLE `Client_Child_Info`
  ADD CONSTRAINT `Client_Child_Info_ibfk_1` FOREIGN KEY (`ChildID`) REFERENCES `Client_RTchild` (`ChildID`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `Client_Child_Schoolinfo`
  ADD CONSTRAINT `Client_Child_Schoolinfo_ibfk_1` FOREIGN KEY (`SchoolID`) REFERENCES `Client_RTschool` (`SchoolID`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `Client_child_teacher`
  ADD CONSTRAINT `Client_child_teacher_ibfk_1` FOREIGN KEY (`TeacherID`) REFERENCES `Client_RTteacher` (`TeacherID`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `Client_RTschool`
  ADD CONSTRAINT `Client_RTschool_ibfk_1` FOREIGN KEY (`ChildID`) REFERENCES `Client_RTchild` (`ChildID`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `Client_RTteacher`
  ADD CONSTRAINT `Client_RTteacher_ibfk_1` FOREIGN KEY (`SchoolID`) REFERENCES `Client_RTschool` (`SchoolID`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-09T12:24:21.480

...一个旧的，评论正朝着一个方向发展。

让我们为陈述添加一些理由：

共享表格等结构化信息的基准是来自任何其他供应商的 MS Excel 或 Office 软件。不幸的是，这些客户端应用程序不适合由多个作者进行近乎同时的编辑，但足以将信息从一个作者分发给多个读者。因此，如果工作模式是第二种，那么将数据和数据概念传输到数据库系统是没有用的，因为 MS Excel 字面上是常识，分发/培训工作量很低。

但是，如果需要多个作者几乎同时进行编辑，并且您可以负担服务器硬件和应用程序开发的费用，那么服务器上的数据库将是存储数据的最佳位置。

好的，鉴于已经做出了数据库的决定：进行规范化或非规范化是一个设计决策。维护、设置工作和硬件支持等因素对设计决策起着重要作用。软件功能设计取决于数据模型设计，并且软件功能设计必须支持您的情况是处理应用程序的业务逻辑。不幸的是，根据业务逻辑，非规范化通常建立在假设之上（在您对规范化模型也有的那些基本假设之上），在未来的发展中经常会被修改，其丑陋的后果是软件功能到那时也必须改变. 如果软件没有时间限制的范围，那么从那里非规范化有一些好处。

# firefox-addon - XUL 中的通知框定位

> ID：14800422
> 
> 赞同：1
> 
> 时间：2013-02-10T17:24:02.257
> 
> 标签：firefox-addon, xul

目前，当我正在开发 Firefox 插件时，会显示一个 XUL 通知框。目前通知框只会显示在浏览器底部，找不到任何关于将位置更改为浏览器顶部的信息。我知道您可以使用priority_high 等......但它似乎只是在浏览器底部再次添加它。

代码：

```
<notificationbox flex="0.1">
<browser src="http://www.mozilla.org"/> 
<notification type="warning" label="Test"/> 
</notificationbox> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:04:32.610

我已经用 XUL Explorer 进行了测试，我可以成功更改位置。这是代码：

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

    <!-- your code here -->
<stack>
<hbox flex="1" left="100" right="10" top="50" bottom="10"> 
<notificationbox flex="0.1" >
<browser src="http://www.mozilla.org"/>
<notification type="warning" label="Test" />
</notificationbox>
</hbox> 
</stack>
</window> 
```

![在此处输入图像描述](../Images/cd5412272b1a1774f3dbe677928c1234.png)

# javascript - 嵌入式 SVG 上的 Javascript 事件

> ID：14800423
> 
> 赞同：0
> 
> 时间：2013-02-10T17:24:04.463
> 
> 标签：javascript, html, svg

我正在使用对象标签来嵌入 svg。我希望能够设置单击事件以及更改鼠标悬停和鼠标悬停时的填充颜色等内容。我知道我可以从 svg 中设置事件，但是当 svg 是导航系统等的一部分时，这是非常不切实际的。

```
<a id="{{id}}DatePickerBtn">
    <object data="images/date-icon.svg" type="image/svg+xml" style="height: 100%;"></object>
    <span class="block">Change Date</span>
</a> 
```

在“a”标签上设置事件仅在单击跨度文本时触发，在 btn.getElementsByTagName('object')[0] 上设置事件也不起作用。

我在互联网上搜索了关于从 javascript 与 svg 交互的教程，但没有运气。**请不要使用 jQuery**，我更喜欢 vanilla JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:18:09.760

您可以制作一个透明的 div 覆盖以捕获所有鼠标事件。

```
<div style="margin: 0px; padding: 0px; position: absolute; width: 100px; height: 100px; background-color: rgba(128, 128, 128, 0.0);" id="clickableDiv"></div> 
```

要查找 SVG 元素的任何像素坐标，您可以使用这两个函数

```
 ...getScreenCTM();
    matrixTransform(...); 
```

可以在此处找到任何详细信息： [获取 Rect 元素的屏幕像素坐标](https://stackoverflow.com/questions/5834298/getting-the-screen-pixel-coordinates-of-a-rect-element)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-10T17:48:05.173

**似乎使用 getSVGDocument() 是这里的关键**。我对鼠标事件的设置稍有不同，所以忽略那部分，但我相信其他人可以弄清楚如何将这些示例实现到他们自己的东西中。

```
sb.addEvent(datePickerBtn, 'mouseover', function() {
    var path = this.getElementsByTagName('object')[0].getSVGDocument().getElementById('icon');
    path.style.setProperty('fill', '#ffffff');
});

sb.addEvent(datePickerBtn.getElementsByTagName('object')[0].getSVGDocument(), 'mousedown', datePickerBtnClick); 
```

上面的代码在鼠标悬停时将填充设置为白色，并在单击时触发一个函数。请记住，当您的 svg 仅包含一个命名元素时，您必须命名您的 svg 元素，并且最容易执行此操作，否则您必须为 svg 中的每个单独元素重复此过程。

需要注意的另一个注意事项是，由于某种原因（至少在 Firefox 中，可能还有其他原因，但我只在 FF 中测试过）**单击事件未使用 svg 注册，请改用 mousedown**。

# javascript - 用 sinon 监视 javascript 中的构造函数

> ID：14800428
> 
> 赞同：24
> 
> 时间：2013-02-10T17:24:21.220
> 
> 标签：javascript, mocha.js, sinon

我正在尝试在构造函数上创建一个间谍，看看它是否被调用——下面是我的测试。我使用的是 sinon-chai，所以语法是有效的，但是两个测试都失败了。

```
var foo = function(arg) {
};

var bar = function(arg) {
    var baz = new foo(arg);
};

it('foo initialized inside of this test', function() {
    var spy = sinon.spy(foo);
    new foo('test');
    expect(spy).to.be.called;
    expect(spy).to.be.calledWith('test');
});
it('foo initialized by bar()', function() {
    var spy = sinon.spy(foo);
    bar('test');
    expect(spy).to.be.called;
    expect(spy).to.be.calledWith('test');
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T17:48:26.860

问题是Sinon 不知道要监视什么引用，因此解决方案是使用对象ie`sinon.spy(namespace, 'foo')`或自己覆盖引用`foo = sinon.spy(foo)`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-23T08:10:34.627

考虑到您的构造函数绑定到“窗口”，这意味着如果您在浏览器上打开开发者控制台，您应该能够通过使用相关的函数/构造函数来实例化对象：

```
var temp = new FunctionName(); 
```

如果是这样，实际的工作代码可能是：

```
var jamesBond = sinon.spy(window, 'FunctionName');
var temp = new FunctionName(args);

expect(jamesBond.called).to.be.equal(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-17T15:19:54.910

如果您想在 Node 上使用它，假设您知道 @billy 提到的构造函数的命名空间，则可以调整@stckvflw 的答案。对于 JS 内置类，您可能会认为它们存在于`global`.

`chai-spies`一个用于冻结对象的具体示例`Date`（相当于`stub`用 Sinon 创建一个）：

```
const moment = new Date();
chai.spy.on(global, 'Date', () => moment); 
```

# ios - 添加新图像并从图像视图中删除旧图像

> ID：14800430
> 
> 赞同：0
> 
> 时间：2013-02-10T17:24:34.957
> 
> 标签：ios, xcode, ipad, cocoa-touch

在我的 ipad 应用程序中，我有 200 张图像，我将这些图像添加到一个数组中。
然后通过循环将此数组添加到图像视图中。然后，我将此图像视图添加为滚动视图的子视图。

当我打开应用程序时，我的应用程序崩溃了。
我尝试减小图像大小。但是，它没有用。

我的一个朋友首先告诉我应该只添加 image1 和 image2。
当用户滚动 image1 时，它会显示 image2。
之后 image1 从图像视图中删除。
并将 image3 添加到图像视图。

他告诉它可以保持内存使用。
但是，我不知道我该怎么做？:D
请给我一些例子。
提前致谢。

我的代码在这里，

```
- (void)viewDidLoad
{
[super loadView];
self.view.backgroundColor = [UIColor grayColor];

UIScrollView *ScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 44, self.view.frame.size.width, self.view.frame.size.height)];
ScrollView.pagingEnabled = YES;

// Create a UIImage to hold Info.png
UIImage *image1 = [UIImage imageNamed:@"Image-001.jpg"];
UIImage *image2 = [UIImage imageNamed:@"Image-002.jpg"];
UIImage *image200 = [UIImage imageNamed:@"Image-200.jpg"];

NSArray *images = [[NSArray alloc] initWithObjects:image1,image2,...,image200,nil];

NSInteger numberOfViews = 200;
for (int i = 0; i < numberOfViews; i++) 
{
CGFloat xOrigin = i * self.view.frame.size.width;

UIImageView *ImageView = [[UIImageView alloc] initWithFrame:CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height-44)];
[ImageView setImage:[images objectAtIndex:i]];

[ScrollView addSubview:ImageView];
}
ScrollView.contentSize = CGSizeMake(self.view.frame.size.width * numberOfViews, self.view.frame.size.height);
[self.view addSubview:ScrollView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:28:21.083

看起来您正在访问索引为 0..200 的图像数组，但它只包含三个元素。设置`numberOfViews = 3;`或索引到数组中，如下所示：

```
ImageView.image = images[i%3]; 
```

模索引将导致您以重复顺序添加三个图像中的每一个，并且仍然允许您使用更多的滚动视图子视图进行测试。我怀疑你的崩溃与只有 200 张图像的内存有关，除非它们是超大的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:04:38.197

您应该使用表格视图来显示图像。您不想创建所有这些图像的数组，因为这会将所有这些图像放入内存 - 这不是一件好事。您甚至不需要创建一个数组来保存名称，因为它们具有您可以从整数轻松构造的名称（您可以从 tableView:cellForRowAtIndexPath: 方法中的 indexPath.row 获得）。像这样的东西：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 200;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    NSString *imageName = [NSString stringWithFormat:@"Image-%.3d.jpg",indexPath.row +1];
    UIImage *image = [UIImage imageNamed:imageName];
    cell.imageView.image = image;
    return cell;
} 
```

这个例子只是使用单元格的默认 imageView 来显示图像，它非常小。您可能希望创建一个自定义单元格，其中包含更大的图像视图（如果您希望每行有多个图像，则可以并排创建几个）。

# java - 调用未知类的静态工厂方法

> ID：14800432
> 
> 赞同：0
> 
> 时间：2013-02-10T17:24:48.897
> 
> 标签：java

嗨，我有一个抽象类，它有很多子类。我想让这个抽象类的构造函数私有并创建工厂方法。这个方法应该如何在每个子类中以相同的方式工作？如果我做：

```
return new AbstractClass(); 
```

我收到错误消息：类是抽象的，不能是实例......我应该使用反射吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:39:57.537

`super`您可以使用关键字从子类访问抽象类的构造函数。

```
public SubClass() {
    super(); // this will call AbstractClass()
    // something else that you want to do for this subclass
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:42:30.807

正如评论中已经指出的那样，您不能将`new`关键字与抽象类一起使用。当你使用new时，你需要知道真正的类型。

您可以在抽象基类中实现工厂方法，并使其根据传递给 create 方法的参数和/或某些内部逻辑来决定返回哪个非抽象子类。

或者您可以使工厂方法本身抽象并在每个非抽象子类中实现它以返回该类型的对象。

# vim - 每次在vim中调用一个键时如何插入样板文件？

> ID：14800436
> 
> 赞同：0
> 
> 时间：2013-02-10T17:25:02.017
> 
> 标签：vim

当我在 C/C++ 中编码时，当我输入“{”时，我通常希望接下来的几个字符是换行符、制表符、换行符，并以“}”结尾。这对于自上而下的编程特别方便，因此您可以制作函数的格式并继续，只是稍后再回来，它已经为您制作了原型。

因此，为了澄清，我希望将 '{' 替换为

`{\n\t\n}`

这在vim中是否可能，如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:01:15.660

你可以吗？

```
inoremap { {<cr>}<esc>O<tab> 
```

使用此映射，如果您`foo``{`在 INSERT 模式下键入，它将更改为：

```
foo {
    I
} 
```

*   `I`是光标位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:16:08.577

您可能有兴趣尝试一些可用的“自动关闭”插件。我使用[DelimitMate](http://www.vim.org/scripts/script.php?script_id=2754)但您可以尝试[AutoClose](http://www.vim.org/scripts/script.php?script_id=2009)或[AutoPair](http://www.vim.org/scripts/script.php?script_id=3599)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:22:11.243

你有一堆 yank 寄存器。也许最简单的解决方案是将其拉到指定的寄存器中，然后在每次需要时从该寄存器中放入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:56:39.940

对于那种带有“自动原型”的“自上而下”编码，片段插件非常棒。

使用片段插件，您可以进行更广泛的“自上而下”编码，而不仅仅是扩展括号。

[Ultisnips](http://www.vim.org/scripts/script.php?script_id=2715)是一个很棒的片段插件。如果你的 vim 中没有 python 支持，那么[Ultisnips](http://www.vim.org/scripts/script.php?script_id=2540)的前身 SnipMate 也很强大，但没有那么先进。

使用 Ultisnips，您可以使用以下三个片段中的任何一个：

**1）**创建括号并将光标放在它们后面

```
snippet {
{

}
$1
endsnippet 
```

**2）**创建括号并将光标放在其中

```
snippet {
{
    $1
}
endsnippet 
```

**3）**创建括号并将光标放在其中，然后`Ctrl-j`将光标放在括号后面

```
snippet {
{
    $1
}
$2
endsnippet 
```

*但是*除了像这三个这样的简单片段之外，您还可以变得更加复杂，在片段中定义整个函数/类/等模板，这些模板可以快速扩展和跳转。

# asp.net-mvc - 模型对象中的函数

> ID：14800438
> 
> 赞同：0
> 
> 时间：2013-02-10T17:25:08.473
> 
> 标签：asp.net-mvc

调用模型对象的方法来检索视图中的数据是否可以接受？

示例：假设我有一个搜索屏幕，允许用户按公司搜索记录。

公司列表可能是动态的并且受每个用户的限制。

还是在 Controller 中执行此操作更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:01:19.413

感谢您的链接@Oded

> “在 ASP.NET MVC 中，输入模型可以设想为一个类的集合，这些类对通过 HTTP 请求传入的任何数据进行建模。 **'*输入模型由简单的数据传输对象组成——只有属性，没有方法。* '**输入控制器方法使用模型类作为接收发布的数据参数或在查询字符串或 HTTP 标头上传递的数据的一种方式。这是利用输入模型中的类的控制器方法的示例：

因此，如果我们希望遵守 MVC 模式，我们不应该在模型中使用方法来动态检索数据。

# python-2.7 - 是否可以将 raw_input() 的输出用作新文件名？

> ID：14800442
> 
> 赞同：0
> 
> 时间：2013-02-10T17:25:31.000
> 
> 标签：python-2.7, createfile, raw-input

我想知道是否可以使用返回`raw_input()`来创建文件名？

到目前为止我所拥有的：

```
import os
from Tkinter import Tk
from tkFileDialog import askopenfilename
Tk().withdraw()
ttnum=str(raw_input('Please enter ticket number: '))
ttnum
filename=askopenfilename()
abspath = os.path.abspath(filename) 
dname = os.path.dirname(abspath)    
os.chdir(dname)                     
f=open(filename)
contents=f.read()
file_len(filename)
file_scan(filename) 
```

调用 ttnum 的部分代码：

```
def file_len(filename):
#Count the number of line in the Text File
    f1 = open(("WiFi Logs report for tt " + ttnum,'w'))
    with open(filename) as f:
        for i, l in enumerate(f):
            pass     
    f1.write('Total number of lines in file: ' + str(i+1) + '\n' + '\n')
    f1.close()  

def file_scan(filename):
#List of issues to Scan For
    f1 = open(("WiFi Logs report for tt " + ttnum,'a')) 
```

我可以输入输入没有问题（在本例中为 12345），但是一旦输入代码，我会得到以下信息：

```
Traceback (most recent call last):
  File "M:\WiFi Log Scanner\WiFi_Log_Scanner.py", line 153, in <module>
    file_len(filename)
  File "M:\WiFi Log Scanner\WiFi_Log_Scanner.py", line 4, in file_len
    f1 = open(("WiFi Logs report for tt " + ttnum,'w'))
TypeError: coercing to Unicode: need string or buffer, tuple found 
```

我认为一开始的 str() 会确保它是一个字符串而不是一个元组？

任何见解将不胜感激。

谢谢，

乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:30:18.400

从 中删除一层括号`open(("WiFi Logs report for tt " + ttnum,'a'))`：

```
open("WiFi Logs report for tt " + ttnum,'a') 
```

使用额外的括号，您将*一个*参数传递给`open`，这个参数是一个*元组*：一对值，这不是`open`它的第一个参数所期望的。

`chdir`附注（与您的错误无关）：在读取文件之前您不必这样做（并且您的实际代码仅在`filename`已经是绝对的情况下才有效，结果`tk_getOpenFile` *is* .`chdir`在这里没有任何帮助）。并且*在* `chdir`必要时，它很容易出错（它引入了隐藏状态）和线程不安全。

# angularjs - AngularJS element.innerHTML 在指令内未定义

> ID：14800443
> 
> 赞同：15
> 
> 时间：2013-02-10T17:25:40.190
> 
> 标签：angularjs, innerhtml, angularjs-directive

假设我有：

```
directives.directive('foo', function () {
    return {
        restrict:'A',
        scope: true,
        link:function (scope, element, attr) {

            console.log('innerHTML is ' + element.innerHTML);

            scope.$watch('update', function (newValue) {
                console.log('innerHTML is... ' + element.innerHTML);
            });

        }
    }
}); 
```

...然后innerHTML 是未定义的。我想这是由于 Angular 处理 DOM 的方式。获取innerHTML的正确方法是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-10T20:03:37.110

`element`传递给函数的变量`link`是 jqLit​​e 对象，而不是 DOM 对象。您可以使用（就像在 jQuery 中一样）获取 DOM 对象`element[0]`，但 jqLit​​e 为您提供了一个方法：`element.html()`. 查看[文档](http://docs.angularjs.org/api/angular.element)。

# asp.net - 当付款从 ASP.NET 记录到数据库时发送自动电子邮件

> ID：14800447
> 
> 赞同：0
> 
> 时间：2013-02-10T17:25:58.227
> 
> 标签：asp.net, web-applications, asp.net-web-api, email

好的，这就是正在发生的事情：我正在为我父亲的小企业开发一个 ASP.NET 中的物业管理 Web 应用程序。当他输入租户的付款时，他希望网络应用程序通过电子邮件自动发送收据/余额/通知。他还希望它在特定日期每月发送一封电子邮件，其中包含每个租户的余额。

是否有第三方 API 或类似的东西具有这些功能？我已经实现了 Twilio 来发送自动短信，我现在只需要让电子邮件自动发送。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:39:43.343

使用**[Quartz.net](http://quartznet.sourceforge.net/)**

[此链接](https://stackoverflow.com/questions/3245975/quartz-net-setup-in-an-asp-net-website)也将有所帮助。

使用 Quart.net，您可以每月发送邮件。我做了一些研究，现在有了 quart.net，我可以每 7 天发送一次邮件。

# java - 客户端java中的服务器地址

> ID：14800452
> 
> 赞同：0
> 
> 时间：2013-02-10T17:26:36.973
> 
> 标签：java, webserver, ip-address, hostname

我正在尝试获取客户端访问我的服务器的地址。

*   如果客户端访问服务器，`http://localhost:8890`那么服务器应该准确读取`http://localhost:8890`。

*   如果客户端访问服务器，`http://127.0.0.1:8890`那么服务器应该准确读取`http://127.0.0.1:8890`。

*   如果客户端访问服务器，`http://mywebsite.com:8890` 那么服务器应该准确读取`http://mywebsite.com:8890`。

我通过以下功能部分获得了它：`[SOCKET].getInetAddress().getHostName()`

但是客户端访问`http://127.0.0.1:8890`函数`[SOCKET].getInetAddress().getHostName()`返回它`localhost`而不是`127.0.0.1`.

我需要服务器获取地址作为发送数据的客户端，因为`COOKIES`不会丢失任何重定向发生的机会（`302 Found`或`301 Moved Permanently`）。

我到处搜索，尤其是在操作系统中，但我不知道要使用什么搜索词（如果有人已经问过这个问题），如果这是重复的，请原谅。

我的代码：

```
package com.[PACKAGE];

/*web server*/
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Locale;

/*Err*/
//import java.io.IOException;

public class miniWebServer {
    private int port;
    private ServerSocket mySocket;
    private Socket remote;
    private Thread trd;

    public miniWebServer(int _port) {
        port = _port;
        initServer();
    }

    private void initServer(){
        trd = new Thread(new Runnable(){
            @Override
            public void run(){
                try {
                    //Criar socket
                    mySocket = new ServerSocket(port);
                    System.out.println("Conected!");
                    OK();
                } catch (Exception e) {
                    String st = e.toString().toLowerCase(Locale.US);
                    if(st.indexOf("address already in use")!=-1){
                        System.out.println("Server ");
                        OK();
                    } else {
                        System.err.println("Erro ao tentar conectar com a port " + port + ": "+ e);
                    }
                    return;
                }
                listen();
            }
        });
        trd.start();
    }

    public void OK(){}//Override

    private void listen(){
        String addressClient = "";
        String portClient = "";
        PrintWriter outServer;

        for (;;) {
            try {
                //Esperando uma conexão (um cliente)
                remote = mySocket.accept();
                System.out.println("remote: "+remote.toString());
                System.out.println("getLocalAddress: "+remote.getLocalAddress().toString());
                System.out.println("getHostName: "+remote.getInetAddress().getHostName().toString());
                System.out.println("getLocalSocketAddress: "+remote.getLocalSocketAddress().toString());
                addressClient = remote.getInetAddress().getHostName().toString();
                portClient = Integer.toString(remote.getLocalPort());
                System.out.println("http://"+addressClient+":"+portClient);

                outServer = new PrintWriter(remote.getOutputStream());

                outServer.println("HTTP/1.0 200 OK");
                outServer.println("Content-type: text/html");
                outServer.println("");
                outServer.println("<html>");
                outServer.println("<body>");
                outServer.println("<p>You address: http://"+addressClient+":"+portClient+"</p>");
                outServer.println("</body>");

                outServer.print("</html>");//last line

                outServer.flush();

                remote.close();
            } catch (Exception e) {
                //System.out.println("loop::Error: " + e);
            }

            try {
                //Thread.currentThread();
                Thread.sleep(10);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
} 
```

如何使用：

```
new miniWebServer(8890){
    @Override
    public void OK(){
        System.out.println("OK!");
    }
}; 
```

**解决方案：**

假设我使用浏览器 GoogleChrome，我的 java 服务器将返回：

```
GET /folder/page.html HTTP/1.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US;q=0.6,en;q=0.4
Cache-Control: max-age=0
Connection: keep-alive
Host: localhost:8890
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11 
```

要获取标头和请求： `inServer = new BufferedReader(new InputStreamReader(remote.getInputStream()));`

然后只需提取`Host:`与`.slit(":")`或的地址`new StringTokenizer(currentLine)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T18:04:37.923

我认为您需要使用 HTTP 提供的完整 GET 请求路径。较低级别的网络不会区分您的客户端是否指定了主机名或地址（因为客户端本身会将主机名映射到地址 - 如果您的客户端配置了服务器没有的主机/地址映射会发生什么情况没有？）

# java - 一种快速线程安全的方法来识别源自超类的方法调用

> ID：14800454
> 
> 赞同：2
> 
> 时间：2013-02-10T17:26:43.677
> 
> 标签：java, multithreading, performance, inheritance

`A`让我们考虑一个具有以下特征的第三方类：

1.  它的大部分实现是私有的并且相当复杂，因此可以扩展但*不能*合理修改。

2.  `A`有一个*非常*昂贵的构造函数，*永远不*应该被不必要地调用——在我的例子中，它构建了一个*巨大*的数据查找表供以后使用。

    这意味着创建一个[装饰器类](http://en.wikipedia.org/wiki/Decorator_pattern)作为替代`A`是不可能的，因为任何装饰器都必须继承`A`并调用它的构造函数。

3.  `A`由第三方代码使用，因此不能在其位置使用[代理类](http://en.wikipedia.org/wiki/Proxy_pattern)`A`- 其他代码需要实例，这就是它应该得到的。

4.  `A`提供了一堆*非常*昂贵的报告方法，这些方法可以*解决*很多问题*来*生成一堆报告。

    这些方法不会产生任何本地使用的结果——*理论上*它们可以是异步的，但不幸的是它们不是。

5.  `A`互相调用的方法- 很多。

6.  该`A`实现是不透明的并且不断变化 - 像使用反射后实例化来例如缩小事物这样的黑客是不可能的。

7.  `A`不是线程安全的 - 不是真的......

我达到了成为我项目中的瓶颈的地步`A`，所以我创建了一个子类`B`，希望将实际的*乱码**推*到一个单独的线程中。我覆盖了所有公共方法，`A`只将`Runnable`对象提交给单线程执行器服务。然后每个从工作线程`Runnable`执行适当的方法。`super`

不幸的是，它调用*了很多*`A`自己的公共方法。通常这不会是一个问题，但在我的情况下，超类是从. 这*是*一个主要问题，因为这些方法会*延迟*实际执行并将新任务提交给执行器服务，从而导致性能和正确性问题。*`B`*`B`**

 ***我的解决方案是检查[`Thread.currentThread()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#currentThread%28%29)所有方法的结果，`B`以便来自工作线程的调用将直接委托给该`super`方法，而不是作为新任务提交。

所以现在我正处于它已经成为一个性能问题的地步`Thread.currentThread()`，可能是因为它是一种经常被调用的本机方法。

*   是否有更快的方法以线程安全的方式检查源自超类和/或工作线程的方法调用？

*   是否有替代设计可以让我将`A`' *sfrabbling* of *wrabbles*推到另一个线程？在我看来，由于`A`是第三方代码，我大多被困......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:09:57.320

> 是否有更快的方法以线程安全的方式检查源自超类和/或工作线程的方法调用？

您可以替换`Thread.currentThread`为[ThreadLocal](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)。只需设置例如 a和 if 设置（`Boolean`在`ThreadLocal`输入方法时检查它），不要产生新线程，而是在同一个线程上执行。

**更新**
使用哈希图来跟踪方法调用。进入方法后，检查它是否存在于哈希图中（方法的名称作为键）。
如果它不存在，则放入 hashmap 并使用后台线程调用该方法。
如果它存在，那么您必须已经在后台线程中。所以在同一个线程中调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:32:43.397

如果您的运行时环境允许使用自定义类加载器，您应该能够将第三方类 A 替换为使用反射调用原始类 A 的自定义委托类。

这是委托类 A 的示例：

```
package fi.test;

import java.io.IOException;
import java.io.InputStream;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public class ClassA {
    private static final Class<?> clazz;
    private static final Method doSomething;
    private Object instance;

    static {
        ClassLoader classLoader = new ClassLoader(ClassA.class.getClassLoader()) {
            @Override
            public synchronized Class<?> loadClass(String name)
                    throws ClassNotFoundException {
                if (!name.equals(ClassA.class.getName())) {
                    return super.loadClass(name);
                }
                Class<?> clazz = findLoadedClass(name);
                if (clazz == null) {
                    // The original class A is stored as ClassA.class.orig
                    InputStream inputStream = getParent().getResourceAsStream(
                            "fi/test/ClassA.class.orig");
                    try {
                        byte[] buffer = new byte[100000];
                        int length = inputStream.read(buffer);
                        clazz = defineClass(name, buffer, 0, length);
                    } catch (IOException exception) {
                        throw new ClassNotFoundException("", exception);
                    } finally {
                        try {
                            inputStream.close();
                        } catch (IOException exception) {
                        }
                    }
                }
                return clazz;
            }
        };
        try {
            // Class A
            clazz = classLoader.loadClass(ClassA.class.getName());
            // Do something
            doSomething = clazz.getMethod("doSomething", new Class<?>[0]);
        } catch (Exception exception) {
            throw new Error(exception);
        }
    }

    public ClassA() {
        try {
            instance = clazz.newInstance();
        } catch (InstantiationException exception) {
            throw new RuntimeException(exception);
        } catch (IllegalAccessException exception) {
            throw new RuntimeException(exception);
        }

    }

    public void doSomething() {
        try {
            doSomething.invoke(instance, new Object[0]);
        } catch (IllegalAccessException exception) {
            throw new RuntimeException(exception);
        } catch (InvocationTargetException exception) {
            throw new RuntimeException(exception);
        }
    }
} 
```

这是原来的 A 类：

```
package fi.test;

public class ClassA {
    public void doSomething() {
        System.out.println("This is magic!");
    }
} 
```

这是我用来测试委托的类：

```
package fi.test;

public class Tester {
    public static void main(String[] args) {
        ClassA instance = new ClassA();
        instance.doSomething();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:09:09.413

由于`A`不是线程安全的，因此用不同的线程调用它不是……安全的。

想法：

*   您可能正在池化 的实例`A`，即每当一个线程需要 A 时，它会从池中获取一个（如果池为空，则创建一个），使用它，然后将其放回池中。这样，您将同时拥有所需数量的 A 实例。
*   您可以修补`A`以跨实例缓存“巨大的查找表”（当然，这要求它是线程安全的，但是如果仅在构造后读取该表，则情况很简单），并使用`A`in的新实例每个线程。***

# android - 键盘隐藏时调用的方法

> ID：14800457
> 
> 赞同：1
> 
> 时间：2013-02-10T17:26:54.623
> 
> 标签：android, android-layout

当我正在写入`EditText`并且设备具有柔软的主页/后退按钮时，后退按钮会变成一个向下的箭头，意思是“隐藏键盘”。按下该按钮时会调用什么方法？我试过`Activity.onBackPressed`了，但这不是我正在寻找的方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-10T17:28:01.190

没有什么。没有隐藏键盘的通知。

# ruby-on-rails - 预期 /...path.../projects_users.rb 来定义 Projects_users

> ID：14800461
> 
> 赞同：0
> 
> 时间：2013-02-10T17:27:02.473
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, model, seed

我想要做的是在一个名为“projects_users”的关系表中使用种子创建帖子，但是在“rake db:seed”之后会引发以下错误：

```
Expected /...path.../projects_users.rb to define Projects_users 
```

**项目_用户.rb：**

```
class ProjectsUsers < ActiveRecord::Base
    // no code yet
end 
```

（“projects_users”也有一个控制器和视图（也没有使用））

**projects_users 表：**

```
project_id
user_id 
```

**项目型号：**

```
class Project < ActiveRecord::Base
  has_and_belongs_to_many :users, :class_name => 'User'
  belongs_to :user

  has_many :tickets, :dependent => :destroy

  attr_accessible :user_id, :title, :description, :start_date, :end_date
end 
```

**用户型号：**

```
class User < ActiveRecord::Base
  attr_accessible :first_name, :last_name, :email, :password

  has_and_belongs_to_many :projects
  has_many :tickets

  before_save :create_remember_token

  def create_remember_token
    self.remember_token = SecureRandom.urlsafe_base64
  end

end 
```

**种子.rb：**

```
pu5 = Projects_users.create(:user_id => 12, :project_id => 6) 
```

错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:48:18.743

您的模型必须是单数的。您需要将模型从**projects_users.rb**重命名为**projects_user.rb** 类定义也应该说：

```
class ProjectsUser < ActiveRecord::Base
  // no code yet
end 
```

因此，在您的种子文件中，您应该像这样调用它：

```
pu5 = ProjectsUser.create(:user_id => 12, :project_id => 6) 
```

# java - 我怎样才能缩短这个？

> ID：14800462
> 
> 赞同：-2
> 
> 时间：2013-02-10T17:27:08.100
> 
> 标签：java

我得到了一种根据用户输入定义季节的方法。例如：1/6 = Winter 它可以工作，但似乎应该有一种更简单的方法来做到这一点，而不是拥有所有这些代码。有什么建议么？

```
public String getSeason()
    {
        String result = "UNKNOWN";

        if (month == 1 && day >= 1)
        {
            result = "WINTER";
        }
        else if (month == 2 && day >= 1)
        {
            result = "WINTER";
        }
        else if (month == 3 && day <= 20)
        {
            result = "WINTER";
        }
        else if (month == 3 && day >= 21)
        {
            result = "SPRING";
        }
        else if (month == 4 && day >= 1)
        {
            result = "SPRING";
        }
        else if (month == 5 && day >= 1)
        {
            result = "SPRING";
        }
        else if (month == 6 && day <= 20)
        {
            result = "SPRING";
        }
        else if (month == 6 && day >= 21)
        {
            result = "SUMMER";
        }
        else if (month == 7 && day >= 1)
        {
            result = "SUMMER";
        }
        else if (month == 8 && day >= 1)
        {
            result = "SUMMER";
        }
        else if (month == 9 && day <= 22)
        {
            result = "SUMMER";
        }
        else if (month == 9 && day >= 23)
        {
            result = "FALL";
        }
        else if (month == 10 && day >= 1)
        {
            result = "FALL";
        }
        else if (month == 11 && day >= 1)
        {
            result = "FALL";
        }
        else if (month == 12 && day <= 20)
        {
            result = "FALL";
        }
        else if (month == 12 && day >= 21)
        {
            result = "FALL";
        }
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:39:50.567

使用`switch`.

```
switch (month) {
    case 1: case 2: /* Winter */; break;
    case 3: if (day <= 20) {/* Winter */} else {/* Spring */} break;
    case 4: case 5: /* Spring */; break;
    case 6: if (day <= 21) {/* Spring */} else {/* Summer */} break;
    // Continue the pattern...
    default: /* Unknown */; break;
} 
```

这比`if-else`梯子好得多，因为它很简单。这些`break;`语句使程序不会“失败”并执行每个案例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T17:32:58.793

您可以通过丢弃不必要的`day >= 1`（还能是什么？）并将几个月与相同的结果相结合来缩短它：

```
if (month <= 2 || (month == 3 && day <= 20) || (month == 12 && day >= 21)) {
    // Winter
} else if (month <= 5 || (month == 6 && day <= 21)) {
    // Spring
} else if (month <= 8 || (month == 9 && day <= 22)) {
    // Summer
} else {
    // Fall
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:31:07.590

这是使用Java Calendar 类来看待问题的另一种方式。例如（未经测试的代码）它有点复杂，因为您需要检测闰年，但正如我所说，这是一种考虑问题的不同方式。

```
public String testSeason(int year, int month, int day) {
    //month is 0 based!

    int FIRST_DAY_OF_SPRING = 31 + 28 + 21; // might need leap year detection to be completely accurate.
    int FRIRST_DAY_OF_SUMMER = FRST_DAY_OF_SPRING + 10 + 31 + 30 +31; 
// define FALL and WINTER similarly.

     Calendar testDate = new Calendar();
    testDate.set(year,month,day);

    if (testDate.get(Calendar.DAY_OF_YEAR) < FIRST_DAY_OF_SPRING)  return "Winter";
    if (testDate.get(Calendar.DAY_OF_YEAR) < FIRST_DAY_OF_SUMMER)  return "Spring";
// continue for rest of seasons.
} 
```

# string - div 背景图像 url 作为字符串

> ID：14800466
> 
> 赞同：0
> 
> 时间：2013-02-10T17:27:29.807
> 
> 标签：string, image, url, html, background

如何让 div 背景图像读取字符串 url？我正在尝试从我的 Shoutcast 源中获取代码，并且我已经使用 rtrim 代码从文件右侧获取最后一个 x 字符，然后让代码使其成为自己的字符串，然后从原始字符串中删除。现在我希望将第二个字符串放在图像格式（.jpg）的前面，并将图像作为背景图像读取到我的 div 对象中。

```
<head>
$song2 = $song
.a-art {background-image: url('.$song2.'.jpg);}
</head><body>

<div class="a-art"></div>
</body> 
```

来自完整来源

```
 <?php

include('config_radio.php');

$scfp = fsockopen("$scip", $scport, &$errno, &$errstr, 30);

 if(!$scfp) {

  $scsuccs=1;

echo''.$scdef.' is Offline'; 

 }

if($scsuccs!=1){

 fputs($scfp,"GET /admin.cgi?pass=$scpass&mode=viewxml HTTP/1.0\r\nUser-Agent: SHOUTcast Song Status (Mozilla Compatible)\r\n\r\n");

 while(!feof($scfp)) {

  $page .= fgets($scfp, 1000);

 }

######################################################################################################################

/////////////////////////Teil 1 \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

//definieren der xml elemente

 $loop = array("STREAMSTATUS", "BITRATE", "SERVERTITLE", "CURRENTLISTENERS", "MAXLISTENERS", "BITRATE");

 $y=0;

 while($loop[$y]!=''){

  $pageed = @ereg_replace(".*<$loop[$y]>", "", $page);

  $scphp = strtolower($loop[$y]);

  $$scphp = @ereg_replace("</$loop[$y]>.*", "", $pageed);

  if($loop[$y]==SERVERGENRE || $loop[$y]==SERVERTITLE || $loop[$y]==SONGTITLE || $loop[$y]==SERVERTITLE)

   $$scphp = urldecode($$scphp);

  $y++;

 }

//ende intro der xml elemente

######################################################################################################################

######################################################################################################################

/////////////////////////Teil 2\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

//Song Info und History holen.

 $pageed = @ereg_replace(".*<SONGHISTORY>", "", $page);

 $pageed = @ereg_replace("<SONGHISTORY>.*", "", $pageed);

 $songatime = explode("<SONG>", $pageed);

 $r=1;

 while($songatime[$r]!=""){

  $t=$r-1;

  $playedat[$t] = @ereg_replace(".*<PLAYEDAT>", "", $songatime[$r]);

  $playedat[$t] = @ereg_replace("</PLAYEDAT>.*", "", $playedat[$t]);

  $song[$t] = @ereg_replace(".*<TITLE>", "", $songatime[$r]);

  $song[$t] = @ereg_replace("</TITLE>.*", "", $song[$t]);

      if (strlen($song[$t]) > 50)       {                   $song[$t] = substr($song[$t], 0, 50) . '...';       }
     $song2 = substr($song[$t], -5);
     <?php $file = "$song2"; ?>
      $song[$t] = urldecode($song[$t]);
     $stemp = explode("[", $song[$t]);
     $song[$t] = $stemp['0'];
     $dj[$t] = @ereg_replace(".*<SERVERTITLE>", "", $page);

  $dj[$t] = @ereg_replace("</SERVERTITLE>.*", "", $pageed);

$r++;

 }

//end song info

fclose($scfp);

}

//Anzeige

if($streamstatus == "1"){

echo'

<html> <head> <title>Radiostatus</title> <meta http-equiv="refresh" content="20; URL=radiostatus.php">  <link href="http://fonts.googleapis.com/css?family=Francois+One" rel="stylesheet" type="text/css"> <style type="text/css"> body {font-weight: bold; font-size: 11px; font-family: Arial, Verdana; color: #911c15; text-shadow: 1px 1px 0px #ee9955;} .inlineimg {position: absolute; right: 22px; top: 11px;} .playerid {position: absolute; right: 40px; top: 8px;} .header-subfont {color: #FFF; text-transform: capitalize; font-size: 14px; font-weight: normal; text-shadow: 1px 1px 0px #d34715; font-family: "Francois One",sans-serif;} .connect {color: #FFF; font-size: 11px; font-weight: normal; text-shadow: 1px 1px 0px #d34715; /* font-family: "Francois One",sans-serif;*/ font-family: Arial, Verdana; } .help {position: absolute; right: 2px; top: 8px;}  .radio-content {font-size: 11px; height: 40px; margin-right: 15px; font-weight: bold; font-family: Arial, Verdana; /* background: url(x2/images/literecords/misc/literadio-icon.png) no-repeat center left; padding-left: 37px; */ color: #911c15; text-shadow: 1px 1px 0px
#ee9955;} span.question {   cursor: pointer;   width: 16px;   height: 16px;   background-color: #9F3422;   color: White;   font-size: 13px;  font-weight: bold;   border-radius: 8px;   text-align: center; } span.question:hover { background-color: #3D6199; } div.tooltip {   background-color: #333;   color: White;   position: absolute;   left: 25px;   top: -25px;   z-index: 1000000;   width: 250px;   border-radius: 5px; } div.tooltip:before {   border-color: transparent
#333 transparent transparent;   border-right: 6px solid #333;   border-style: solid;   border-width: 6px 6px 6px 0px;   content: "";   display: block;   height: 0;   width: 0;   line-height: 0;   position: absolute;   top: 40%;   left: -6px; } div.tooltip p {   margin: 10px;  color: White; } .song-links a, .song-links { font-size: 8px; text-decoration: none; font-weight: normal; text-shadow: none; color:
#fff;} .song-bg {background-image: url(blackgrad.png); background-size: 100% 100%; position: fixed; right: 6px; font-weight: normal !important; text-transform:capitalize; box-shadow: 0px 0px 1px 1px #cccccc; border-radius: 8px; margin-top: 4px; margin-bottom: 4px; margin-right: 4px; padding: 8px; color: #ffffff; text-shadow: 1px 1px 0px #494949; width: 150px; height: 26px;} .a-art {position: fixed; box-shadow: 0px 0px 1px 1px #cccccc; border-radius: 8px; margin-top: 4px; margin-bottom: 4px; margin-right: 4px; color: #ffffff; text-shadow: 1px 1px 0px #494949; width: 45px; height: 42px; background-image: url('<?php echo '/albumart/'. $file.'.jpg'; ?>'); background-size: 100% 100%; background-repeat: no-repeat;}

.header-font {color: #FFF; text-transform: uppercase; font-size: 15px; font-weight: normal; text-shadow: 1px 1px 0px #d34715; font-family: "Francois One",sans-serif; margin-left: 40px; margin-top: -27px;} .lst-bg {font-weight: normal !important; text-transform:capitalize; box-shadow: 0px 0px 1px 1px #cccccc; border-radius: 8px; margin-top: 0px; margin-bottom: 10px; width: 45px; color: #ffffff; text-shadow: 1px 1px 0px #494949;} .lstnrs {align: center; font-weight: normal; margin-top: -13px; text-align: center; float: left; margin-left: 5px; width: 35px; color: #ffffff; text-shadow: 1px 1px 0px #494949;

</style> <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> <script src="http://literecords.com/drop.js"></script> </head>

<div class="radio-content"> <div class="lst-bg"><span title="Online"><img src="on.png" /></span><span align="center" class="lstnrs">&nbsp;&nbsp;'.$currentlisteners.'</span></div> <div class="header-font">&nbsp;&nbsp; LRR</div> <div class="a-art"></div> <div class="song-bg"> '.$song[0].' . '.$song2.'</div></div> <center><table border="0" cellspacing="0" cellpadding="0" style="display: none;">

<tr> <td align="center"><font color="#33ff00" size=1.5 face="verdana, geneva, lucida"><b>Server is Online</b></font></td> </tr> <tr>

<tr> <td align="center"><font color="#000000" size=1.5 face="verdana, geneva, lucida">Online with: '.$currentlisteners.' / '.$maxlisteners.' listeners</font><br><br></td> </tr> <tr> <td align="center"><b><font color="#000000" size=1.5 face="verdana, geneva, lucida">'.$song[0].'</font></b></td> </tr> <tr> <td align="center"><font color="#000000" size=1.5 face="verdana, geneva, lucida"><a href="http://lazyrecords.net:8020" target="_blank">http://lazyrecords.net:8020</a></font></td> </tr> <tr> <td align="center"><a href="http://lazyrecords.net:8020/listen.pls"><font color="#000000" size=1.5 face="verdana, geneva, lucida">iPhone</font></a> - <a href="listen.asx" target="_blank"><font color="#000000" size=1.5 face="verdana, geneva, lucida">Windows</font></a> - <a href="listen_qt.php" target="_blank"><font color="#000000" size=1.5 face="verdana, geneva, lucida">Mac</a></font></td> </tr> <tr> <td align="center"><a href="http://lazyrecords.net/network/content.php?131-How-to-tune-in" target="_blank"><font color="#000000" size=1.5 face="verdana, geneva, lucida">Cant Tune-In?</font></a></td> </tr> <tr> </table></center>

</body> </html>';

}

if($streamstatus == "0") {

//Offlinestatus

echo'

<html>

<head> <title>Radiostatus</title> <meta http-equiv="refresh" content="20; URL=radiostatus.php">  <link href="http://fonts.googleapis.com/css?family=Francois+One" rel="stylesheet" type="text/css"> <style type="text/css"> body {font-weight: bold; font-size: 11px; font-family: Arial, Verdana; color: #911c15; text-shadow: 1px 1px 0px #ee9955;} .inlineimg {position: absolute; right: 22px; top: 11px;} .playerid {position: absolute; right: 40px; top: 8px;} .header-font {color: #FFF; text-transform: uppercase; font-size: 15px; font-weight: normal; text-shadow: 1px 1px 0px #d34715; font-family: "Francois One",sans-serif; margin-left: 40px; margin-top: -27px;} .header-subfont {color: #FFF; text-transform: capitalize; font-size: 14px; font-weight: normal; text-shadow: 1px 1px 0px #d34715; font-family: "Francois One",sans-serif;} .connect {color: #FFF; font-size: 11px; font-weight: normal; text-shadow: 1px 1px 0px
#d34715; /* font-family: "Francois One",sans-serif;*/ font-family: Arial, Verdana; } .help {position: absolute; right: 2px; top: 8px;}  .radio-content {font-size: 11px; height: 40px; margin-right: 15px; font-weight: bold; font-family: Arial, Verdana; /* background: url(x2/images/literecords/misc/literadio-icon.png) no-repeat center left; padding-left: 37px; */ color: #911c15; text-shadow: 1px 1px 0px
#ee9955;} span.question {   cursor: pointer;   width: 16px;   height: 16px;   background-color: #9F3422;   color: White;   font-size: 13px;  font-weight: bold;   border-radius: 8px;   text-align: center; } span.question:hover { background-color: #3D6199; } div.tooltip {   background-color: #333;   color: White;   position: absolute;   left: 25px;   top: -25px;   z-index: 1000000;   width: 250px;   border-radius: 5px; } div.tooltip:before {   border-color: transparent
#333 transparent transparent;   border-right: 6px solid #333;   border-style: solid;   border-width: 6px 6px 6px 0px;   content: "";   display: block;   height: 0;   width: 0;   line-height: 0;   position: absolute;   top: 40%;   left: -6px; } div.tooltip p {   margin: 10px;  color: White; } .song-links a, .song-links { font-size: 8px; text-decoration: none; font-weight: normal; text-shadow: none; color:
#fff;} .song-bg {font-weight: normal !important; text-transform:capitalize; box-shadow: 0px 0px 1px 1px #ee9955; border-radius: 8px; margin-top: 4px; margin-bottom: 4px; padding: 8px; color: #ffffff; text-shadow: 1px 1px 0px #494949;}

.lst-bg {font-weight: normal !important; text-transform:capitalize; box-shadow: 0px 0px 1px 1px #ee9955; border-radius: 8px; margin-top: 0px; margin-bottom: 10px; width: 35px; color: #ffffff; text-shadow: 1px 1px 0px #494949;} .lstnrs {font-weight: normal; margin-top: -13px; text-align: center; float: left; margin-left: 5px; width: 35px; color:
#ffffff; text-shadow: 1px 1px 0px #494949;

</style> <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> <script src="http://literecords.com/drop.js"></script> <title>Radio Server is Offline</title>

</head>

<div class="radio-content"> <div class="lst-bg"><img src="off.png" /></div> <div class="header-font">Lite Radio</div> <div class="song-bg">We are down for maintenance.<br />Check back soon!</div> </div> <center><table border="0" cellspacing="0" cellpadding="0" style="display: none;">

</body>

</html>';

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:34:51.723

先试试纯HTML，假设文件名是`song`这样的

```
<head>
<style>
.clipper {background-image: url('./albumart/song.jpg');}
</style>
</head><body>

<div class="clipper"></div>
</body> 
```

检查这是否适合您，然后尝试（所有这些都在 PHP 标记内）

```
 <head>
    <style>
    $file = "song";
    .clipper {background-image: url(\'/albumart/'. $file.'.jpg''\');}
    </style>
    </head><body>

    <div class="clipper"></div>
    </body> 
```

或者你可以做下一个

```
<body>    
  <div class="clipper">
   <img src="<?php echo '/albumart/'. $file.'.jpg'; ?>">
  </div>
</body> 
```

# xcode - xcode 在构建之前和之后查找源的方式有什么不同？

> ID：14800477
> 
> 赞同：0
> 
> 时间：2013-02-10T17:28:22.223
> 
> 标签：xcode, restkit, code-completion, xcode4.6, codesense

我在通过可可豆荚安装的库（RestKit）上获得代码意义时遇到问题。但我会尽量让这个问题更笼统地说明 xcode 如何在下面工作。

情况是我可以始终如一地执行以下操作来修复代码完成：

清理 (cmd+opt+shift+k) -> 关闭项目 -> 删除派生数据 -> 重新启动 xcode

当我重新打开工作区时，代码完成工作正常。但是，一旦我构建 (cmd+b) 代码完成中断，并且我的标头导入失败。

所以我的问题是，Xcode 在构建之前和之后如何解析这些标头有什么不同？

非常感谢。

# jstl - 如何暴露 JSTL 自定义标签值

> ID：14800479
> 
> 赞同：0
> 
> 时间：2013-02-10T17:28:37.480
> 
> 标签：jstl

下面的类是自定义标签的实现。

```
公共类 TextColorTag 扩展 TagSupport {

    私有字符串变量；
    //getter 和 setter

    公共 int doStartTag() 抛出 JspException {
         字符串颜色 = "#eee";
         设置值（变量，颜色）；
         JspWriter out = pageContext.getOut();
         out.print（颜色）；
    }

```

后来在我的 jsp 中，当我尝试使用 textColor 时，我发现它是空的

```
颜色是：<bv:textColor var="textColor" /> <!-- 好的！，显示 #eee -->

颜色是：${textColor} <!-- Ko!，为空。为什么？-->

```

当然，在 tld 中我已经声明了一个属性 var。

如何暴露自定义标签的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:44:37.397

我在 javax.servlet.jsp.jstl.core.ConditionalTagSupport 中找到了响应

要公开变量，请替换以下内容：

```
设置值（变量，颜色）；

```

经过

```
pageContext.setAttribute(var, color);

```

# c# - 如何按标准获取组的最大对象（整个对象，而不是它的属性）

> ID：14800480
> 
> 赞同：3
> 
> 时间：2013-02-10T17:28:39.693
> 
> 标签：c#, linq

根据某些标准，我想获得 a 的最大对象`IGrouping`，但是到目前为止，我似乎找不到允许我返回组内的整个对象的重载

```
List<Player> players = new List<Player>() 
{ 
     new Player() { Name = "Peyton Manning", Age = 36, Position = "QB", Salary = 19000000 },
     new Player() { Name = "Tom Brady", Age = 35, Position = "QB", Salary = 18400000 },
     new Player() { Name = "Drew Brees", Age = 34, Position = "QB", Salary = 21000000 },
     new Player() { Name = "Randy Moss", Age = 35, Position = "WR", Salary = 7000000 },
     new Player() { Name = "Marvin Harrison", Age = 38, Position = "WR", Salary = 11000000 },
     new Player() { Name = "Demaryius Thomas", Age = 23, Position = "WR", Salary = 5000000 },
     new Player() { Name = "Ryan Clady", Age = 26, Position = "OT", Salary = 10000000 },
}; 
```

我想编写一个返回结果集的查询，我可以像这样枚举它：

```
foreach(Player player in highestPaidPlayers) 
{
      Console.WriteLine("The highest paid {0} is {1}, who is being paid {2}", player.Position, player.Name, player.Salary);
} 
```

到目前为止，这是我得到的：

```
var playersGroupedByPosition = players
    .GroupBy(p => p.Position)
    .Select(g => g.Max(p => p.Salary)); 
```

但这只会给我一个最高薪水的列表（例如整数列表）。似乎没有重载，因为`Max`它让我`Player`从一个`IGrouping`以外的对象返回一个对象`Max()`，它依赖于一个对象来实现`IComparable`。

我的 LINQ 有点弱，所以我还没有想出如何编写子查询来获取组的最大条目并将其返回给外部选择，但是有没有更直接的方法来做到这一点？

我已经看到使用第三方库[MoreLINQ](http://code.google.com/p/morelinq/wiki/OperatorsOverview)（及其自定义运算符`MaxBy`）引用的解决方案，但我不想走那条路（还），除非不可能使用现有的查询运算符集 - 如果不是，我想了解现有运算符的限制，阻止在查询中完成此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:46:45.943

我认为你`ToList`可以避免`OrderBy`使用第三方代码：

```
IEnumerable<Player> highestPaidPlayers = players.GroupBy(p => p.Position)
    .Select(g => g.ToList().OrderBy(p => p.Salary).Last()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T22:20:45.037

*使用嵌套“子选择”的解决方案*

**表达式语法解决方案：**

```
var highestPaidPlayers = players.GroupBy(p => p.Position)
                                 .Select(x => x.Where(p => p.Salary == x.Max(m => m.Salary)).First()); 
```

**查询语法解决方案：**

```
var highestPaidPlayers = from pl in players
                         group pl by pl.Position
                         into g
                             let max = g.Max(x => x.Salary)
                             let maxPl = g.Where(x => x.Salary == max).First()
                             select maxPl; 
```

试试[Ideone](http://ideone.com/I2Aftm)。

# cron - 使用 crontab 中的 URL 运行 php 文件

> ID：14800482
> 
> 赞同：1
> 
> 时间：2013-02-10T17:28:45.083
> 
> 标签：cron, crontab, cpanel

我想使用 cron 选项卡从 url 运行 php 文件。我正在使用虚拟主机，我给出了这样的命令

```
9 11 9 2 * wget -O /dev/null http://www.domainname.com/cronfile.php 
```

但它不起作用请告诉我为什么这不起作用。我认为这个命令必须运行“cronfile.php”，我不想收到来自 cron 的任何电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:31:11.910

尝试：

```
9 11 9 2 * wget -O /dev/null 'php -f /path/to/cronfile.php' 
```

或添加到“cronfile.php”

```
#!/usr/bin/php 
```

并赋予它运行权限：

```
chmod +x 'cronfile.php' 
```

有关从命令行运行 PHP 的完整详细信息，请参阅[手册](http://www.php.net/manual/en/features.commandline.php)

**更新 1**

路径有问题吗？如果您尝试编辑文件`vi path/to/file.php`，您可以打开它吗？如果是这样，请尝试手动运行`php -f /path/to/cronfile.php`，您是否产生错误？如果没有，请将以下内容添加到您的 php 文件中：

```
error_reporting(E_ALL);
ini_set('display_errors', 'On'); 
```

**更新 2**

我觉得你有点困惑。**你为什么通过 URL 运行它？你想达到什么目的？**

通过“执行” [http://www.domainname.com/cronfile.php](http://www.domainname.com/cronfile.php)文件将不会在本地运行，PHP 服务器端 HTML 嵌入式脚本语言，这意味着当您将运行[http://www.domainname。 com/cronfile.php](http://www.domainname.com/cronfile.php) vi 您的本地 crontab，该文件将在远程服务器 (www.domainname.com) 上运行，而不是在本地运行，就像您在浏览器中打开此 URL 一样。

只要它是静态脚本，最好在本地运行它。一旦你通过 URL 运行，你将很容易受到使用[URL 劫持的](https://www.google.co.il/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC0QFjAA&url=http://en.wikipedia.org/wiki/Typosquatting&ei=NS8ZUY-hOoHbtAbiiYHACQ&usg=AFQjCNGR_k1RGETIXPDq6HKE00BM_J2C3A&sig2=MZLTCYcS4RDL8TUFqQk3Ew&bvm=bv.42080656,d.Yms)[代码注入](http://en.wikipedia.org/wiki/Code_injection)。我建议你阅读它。

**更新 3**

添加参数使用[`$argv`](http://php.net/manual/en/reserved.variables.argv.php)：

```
php -f /path/to/cronfile.php hello_world 
```

并在 php 文件中：

```
echo $argv[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:33:34.077

这取决于您的目标页面是否是本地的。如果是，您可以使用命令`php5 /path/to/php/file.php`。如果不是，则 wget 方法是正确的，尽管我会这样称呼它：`/usr/bin/wget --quiet --output-document=/dev/null http://www.server.com/page.php`. 希望这可以帮助。（可能重复[此](https://serverfault.com/questions/96427/cron-job-to-open-a-webpage)）

# c - 使用#define 初始化数组以及作为C 中函数的参数时出现语法错误？

> ID：14800493
> 
> 赞同：1
> 
> 时间：2013-02-10T17:29:51.137
> 
> 标签：c, c-preprocessor

## 在初始化数组时使用#define

```
#include <stdio.h>

#define TEST 1;

int main(int argc, const char *argv[])
{
        int array[] = { TEST };

        printf("%d\n", array[0]);

        return 0;                                                                                                                                                                                                                 
} 
```

编译器抱怨：

```
test.c: In function ‘main’:
test.c:7: error: expected ‘}’ before ‘;’ token
make: *** [test] Error 1 
```

## 使用 #define 作为函数输入参数

```
#include <stdio.h>

#define TEST 1;

void print_arg(int arg)
{
        printf("%d", arg);
}

int main(int argc, const char *argv[])
{
        print_arg(TEST);
        return 0;                                                                                                                                                                                                                 
} 
```

编译器抱怨：

```
test.c: In function ‘main’:
test.c:12: error: expected ‘)’ before ‘;’ token
make: *** [test] Error 1 
```

如何解决这两个问题？我以为**C**只是对源文件进行搜索和替换，替换`TEST`为`1`，不是吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T17:30:57.177

问题是因为您的`#define TEST 1;`.

有了这个，程序转换为：

```
int array[] = { 1; }; /*this is illegal!*/ 
```

补救措施：删除它，使其看起来像：

```
#define TEST 1 
```

翻译为：

```
int array[] = {1}; /*legal*/ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T17:30:41.893

消除 ; 定义后。

```
#define TEST 1 
```

# mysql - 数据库中的三元关系

> ID：14800497
> 
> 赞同：2
> 
> 时间：2013-02-10T17:30:22.060
> 
> 标签：mysql, sql, database, database-design

假设我想为一个包含员工和项目的系统建模。每个员工可以是 0 到 n 个项目的一部分，一个项目可以有 0 到 n 个员工参与其中。为了对此建模，我创建了 3 个表，`employee`,`project`并`work`具有以下关系

| `employee`| (0..n) <----> (1..1) | `work`| (1..1) <----> (0..n) | `project`|

到目前为止一切顺利，表`work`只有两个属性（来自员工条目的 id 和来自项目的 id），这很好用。

每个项目还必须有一个公共“聊天”和一个私人“聊天”。公众允许公司中的每个人查看该项目的聊天并将消息发送到该项目。另一方面，在私人项目中，只有属于该特定项目的员工才能看到和发送消息。

公共聊天很容易建模，因为每个人都可以看到消息。我的怀疑是关于私人的。我想将私人消息的条件强制输入数据库，以便私人消息与属于该特定项目的员工相关。我发现这样做的方法是`id`在表中添加一个`work`并将这个 id 用作`private_message`表中的外键。所以这两个表之间的关系是：

| `private_message`| (1..1) <----> (0..n) | `work`|

这是模拟这种情况的好方法吗？如果没有，我该如何改进这个模型？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:20:28.360

根据您的描述，消息与创建它的员工具有一对一的关系，与它所属的项目具有一对一的关系。鉴于此，我会将这两个关系存储为消息本身的一部分，并将`private_message`表建模为：

`id, employee_id, project_id, message, whatever other field you need`

然后，您可以使用现有`work`表来确定任何单个员工应该能够根据他们分配到的项目使用如下查询来查看哪些消息：

```
SELECT private_message.*
FROM private_message
INNER JOIN
  (SELECT project_id
   FROM [work]
   WHERE employee_id = <employee_id of user you need messages for>) assigned_projects
         ON private_message.project_id = assigned_projects.project_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:54:30.727

我不会那样做。我会按照您最初设计的方式保留工作表，但添加一个连接两个 ID 的字段。然后我会从 private_message 表中引用这个字段。

添加一个 id 字段以使您可以重复记录。

# android - 无法安排短信发送 Android

> ID：14800502
> 
> 赞同：1
> 
> 时间：2013-02-10T17:30:49.320
> 
> 标签：android, broadcastreceiver, alarmmanager, telephonymanager, smsmanager

我正在开发一个需要设置以某种频率发送的短信时间表的android应用程序。无论出于何种原因，我似乎无法让消息开始发送。

这是计划类：

```
public class SmsAlarm extends BroadcastReceiver {
private int hour1, minute1, hour2, minute2, frequency;

@Override
public void onReceive(Context context, Intent intent) {
    SmsManager manager = SmsManager.getDefault();
    TelephonyManager tMgr =(TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
    String phoneNumber = tMgr.getLine1Number();
    Calendar c = Calendar.getInstance();
    int currentHour = c.get(Calendar.HOUR_OF_DAY);
    int currentMinute = c.get(Calendar.MINUTE);
    if (currentHour >= hour1 && currentHour <= hour2 && currentMinute >= minute1 && currentMinute <= minute2) {
        String[] messages = context.getResources().getStringArray(R.array.messages);
        manager.sendTextMessage(phoneNumber, null, messages[(int)(Math.random() * messages.length)], null, null);
    }
}

public void SetAlarm(Context context) {
    AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
    Intent i = new Intent(context, SmsAlarm.class);
    PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
    am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000 * 60 * frequency, pi); //millisecond * second * minutes
}

public void CancelAlarm(Context context) {
    Intent intent = new Intent(context, SmsAlarm.class);
    PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
    AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    alarmManager.cancel(sender);
}

} 
```

我从我的 mainactivity 在这个类的顶部设置了所有私有变量，并且我还创建了这个类的一个序列化对象，我可以使用它来为每次使用保留警报。

如果我没有使用正确的权限，我将发布我的清单文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.myapp"
android:versionCode="1"
android:versionName="1.0" >
<uses-permission android:name="android.permission.SEND_SMS"></uses-permission>
<uses-permission android:name="android.permission.WRITE_SMS"></uses-permission>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"></uses-permission>
<uses-permission android:name="android.permission.GET_TASKS"></uses-permission>
<uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission> 
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"
    android:debuggable="true" >
    <activity
        android:name="com.example.myapp.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>

</manifest> 
```

谁能看到我为什么无法发送消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:36:06.420

您似乎缺少在清单文件中注册您的接收器，并使用适当的操作字符串。如下所示。

```
 <receiver android:name=".SmsAlarm" > 
           <intent-filter>
              <action android:name="com.android.whatever.WHAT_EVER_NAM_YOU_WANNA_GIVE" />
            </intent-filter>// can change name/action string as par ur requirement.
    </receiver> 
```

`BroadcastReceiver`并为您的班级创建一个不同的 .java 文件

你需要在你的意图中设置相同的动作字符串，记住动作字符串在 Manifest 中必须是相同的，这里的意图.setAction("com.android.whatever.WHAT_EVER_NAM_YOU_WANNA_GIVE"); 在java中也是。那么只有它会触发接收器。

您的代码可以更改如下。

```
Intent intent = new Intent(getApplicationContext(), to_call_when_alarm_goes_off.class);
intent.setAction("com.android.whatever.WHAT_EVER_NAM_YOU_WANNA_GIVE");// added line

PendingIntent pIntent = PendingIntent.getBroadcast(getApplicationContext(),0, intent, 0);

AlarmManager alarms = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

alarms.cancel(pIntent);

alarms.setRepeating(
        AlarmManager.RTC_WAKEUP,
        System.currentTimeMillis()+1000, 
        AlarmManager.INTERVAL_DAY, 
        pIntent); 
```

# javascript - Javascript：获取子元素的宽度

> ID：14800509
> 
> 赞同：1
> 
> 时间：2013-02-10T17:31:12.957
> 
> 标签：javascript, jquery, html, css, width

我有两个堆叠的 div。

外部 div 具有固定宽度，并且隐藏了溢出。

内部 div 的内容总共可以大于外部 div。

如何获得内部 div 内容的总宽度？

```
<div id='outer' style='width:100px'>
    <div id='inner'>
        content
    </div>
</div> 
```

当我尝试*$('#inner').width()*并且内容大于外部时，它将返回外部 div 的宽度。

我正在使用 Chrome。

[http://jsfiddle.net/4syEJ/](http://jsfiddle.net/4syEJ/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:35:31.050

你可以得到`.scrollWidth`父母的，这将返回你想要的。

`document.getElementById('outer').scrollWidth`

[http://jsfiddle.net/4syEJ/3/](http://jsfiddle.net/4syEJ/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:37:05.327

尝试 ：

```
<div id="outer" style="width:100px">
    <div id="inner">
        <p id="content">content</p>
    </div>
</div> 
```

和

```
$('#content').width(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T17:37:53.347

您可以`.children()`像这样使用 jquery 选择器：

```
$('#info').html($('#box1').children().width(); 
$('#box2').children().width(); 
$('#box3').width()); 
```

[http://jsfiddle.net/4syEJ/2/](http://jsfiddle.net/4syEJ/2/)

# azure-storage - Microsoft.WindowsAzure.StorageClient.dll 中发生 System.OutOfMemoryException

> ID：14800514
> 
> 赞同：0
> 
> 时间：2013-02-10T17:32:39.543
> 
> 标签：azure-storage

从 Azure 表存储中检索数据时，我收到此错误。之前有没有收到过这种错误

Microsoft.WindowsAzure.StorageClient.dll 中出现“System.OutOfMemoryException”类型的异常，但未在用户代码中处理

-马亨德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:41:01.990

找到内存不足问题的原因，这是因为从 Azure 表存储客户端获取的集合数据过多。通过在 lINQ 查询的 select 语句中仅从表中提取所需的列来解决。

# linux - 未知 arm linux 内核镜像格式

> ID：14800515
> 
> 赞同：2
> 
> 时间：2013-02-10T17:32:46.237
> 
> 标签：linux, kernel, arm

我有一个 ARM linux 内核映像文件。但我不确定它到底是什么格式...

“文件”命令告诉我它是纯数据。

首先，我以为是vmlinuz，然后尝试解压。

我搜索了“gzip”标头签名并从那里解压缩。

但我得到的只是遵循 makefile 脚本。

```
#
# Automatically generated make config: don't edit
# Linux/arm 2.6.38.7 Kernel Configuration
# Sat Apr 28 17:29:46 2012
#
CONFIG_ARM=y
CONFIG_SYS_SUPPORTS_APM_EMULATION=y
CONFIG_HAVE_SCHED_CLOCK=y
CONFIG_ARCH_SCHED_CLOCK=y
# CONFIG_ARCH_USES_GETTIMEOFFSET is not set
CONFIG_GENERIC_CLOCKEVENTS=y
CONFIG_GENERIC_CLOCKEVENTS_BROADCAST=y
CONFIG_KTIME_SCALAR=y
CONFIG_STACKTRACE_SUPPORT=y
CONFIG_LOCKDEP_SUPPORT=y
CONFIG_TRACE_IRQFLAGS_SUPPORT=y
CONFIG_HARDIRQS_SW_RESEND=y
CONFIG_GENERIC_IRQ_PROBE=y
CONFIG_RWSEM_GENERIC_SPINLOCK=y
CONFIG_ARCH_HAS_CPU_IDLE_WAIT=y
CONFIG_GENERIC_HWEIGHT=y
CONFIG_GENERIC_CALIBRATE_DELAY=y
CONFIG_NEED_DMA_MAP_STATE=y
CONFIG_VECTORS_BASE=0xffff0000
# CONFIG_ARM_PATCH_PHYS_VIRT is not set
CONFIG_DEFCONFIG_LIST="/lib/modules/$UNAME_RELEASE/.config"
CONFIG_CONSTRUCTORS=y
CONFIG_HAVE_IRQ_WORK=y
CONFIG_IRQ_WORK=y

#
# General setup
#
CONFIG_EXPERIMENTAL=y
CONFIG_LOCK_KERNEL=y
CONFIG_INIT_ENV_ARG_LIMIT=32
CONFIG_CROSS_COMPILE=""
CONFIG_LOCALVERSION=""
# CONFIG_LOCALVERSION_AUTO is not set
CONFIG_HAVE_KERNEL_GZIP=y
CONFIG_HAVE_KERNEL_LZMA=y
CONFIG_HAVE_KERNEL_LZO=y
CONFIG_KERNEL_GZIP=y
# CONFIG_KERNEL_LZMA is not set
# CONFIG_KERNEL_LZO is not set
CONFIG_SWAP=y
CONFIG_SYSVIPC=y
CONFIG_SYSVIPC_SYSCTL=y
# CONFIG_BSD_PROCESS_ACCT is not set
CONFIG_HAVE_GENERIC_HARDIRQS=y

#
# IRQ subsystem
#
CONFIG_GENERIC_HARDIRQS=y
# CONFIG_GENERIC_HARDIRQS_NO_DEPRECATED is not set
CONFIG_HAVE_SPARSE_IRQ=y
CONFIG_GENERIC_IRQ_SHOW=y
# CONFIG_GENERIC_PENDING_IRQ is not set
# CONFIG_AUTO_IRQ_AFFINITY is not set
# CONFIG_IRQ_PER_CPU is not set
CONFIG_SPARSE_IRQ=y

#
# RCU Subsystem
#
CONFIG_TREE_RCU=y
# CONFIG_PREEMPT_RCU is not set
# CONFIG_RCU_TRACE is not set
CONFIG_RCU_FANOUT=32
# CONFIG_RCU_FANOUT_EXACT is not set
# CONFIG_TREE_RCU_TRACE is not set
CONFIG_IKCONFIG=y
CONFIG_IKCONFIG_PROC=y
CONFIG_LOG_BUF_SHIFT=14
CONFIG_CGROUPS=y
# CONFIG_CGROUP_DEBUG is not set
# CONFIG_CGROUP_NS is not set
# CONFIG_CGROUP_FREEZER is not set
# CONFIG_CGROUP_DEVICE is not set
CONFIG_CPUSETS=y
CONFIG_PROC_PID_CPUSET=y
# CONFIG_CGROUP_CPUACCT is not set
# CONFIG_RESOURCE_COUNTERS is not set
# CONFIG_CGROUP_SCHED is not set
# CONFIG_BLK_CGROUP is not set
CONFIG_NAMESPACES=y
# CONFIG_UTS_NS is not set
# CONFIG_IPC_NS is not set
# CONFIG_USER_NS is not set
# CONFIG_PID_NS is not set
# CONFIG_HAVE_GET_CYCLES is not set
# CONFIG_HAVE_TRACE_CLOCK is not set
CONFIG_HAVE_TRACE_CLOCK_GENERIC=y
CONFIG_HAVE_TRACE_CLOCK_32_TO_64=y
# CONFIG_HAVE_UNSYNCHRONIZED_TSC is not set
# CONFIG_SCHED_AUTOGROUP is not set
# CONFIG_SYSFS_DEPRECATED is not set
# CONFIG_RELAY is not set
CONFIG_BLK_DEV_INITRD=y
CONFIG_INITRAMFS_SOURCE=""
CONFIG_RD_GZIP=y
CONFIG_RD_BZIP2=y
CONFIG_RD_LZMA=y
CONFIG_RD_XZ=y
CONFIG_RD_LZO=y
# CONFIG_CC_OPTIMIZE_FOR_SIZE is not set
CONFIG_SYSCTL=y
CONFIG_ANON_INODES=y
# CONFIG_EXPERT is not set
# CONFIG_EMBEDDED is not set
CONFIG_UID16=y
CONFIG_SYSCTL_SYSCALL=y
CONFIG_KALLSYMS=y
# CONFIG_KALLSYMS_ALL is not set
# CONFIG_KALLSYMS_EXTRA_PASS is not set
CONFIG_HOTPLUG=y
CONFIG_PRINTK=y
CONFIG_BUG=y
CONFIG_ELF_CORE=y
CONFIG_BASE_FULL=y
CONFIG_FUTEX=y
CONFIG_EPOLL=y
CONFIG_SIGNALFD=y
CONFIG_TIMERFD=y
CONFIG_EVENTFD=y
CONFIG_SHMEM=y
CONFIG_AIO=y
CONFIG_HAVE_PERF_EVENTS=y
CONFIG_PERF_USE_VMALLOC=y

#
# Kernel Performance Events And Counters
#
CONFIG_PERF_EVENTS=y
# CONFIG_PERF_COUNTERS is not set
# CONFIG_DEBUG_PERF_USE_VMALLOC is not set
CONFIG_VM_EVENT_COUNTERS=y
CONFIG_SLUB_DEBUG=y
CONFIG_COMPAT_BRK=y
# CONFIG_SLAB is not set
CONFIG_SLUB=y
CONFIG_PROFILING=y
# CONFIG_MARKERS is not set
CONFIG_OPROFILE=y
CONFIG_HAVE_OPROFILE=y
# CONFIG_KPROBES is not set 
```

我用 hexdump 彻底查看了二进制文件。我认为这是一个纯 ARM 二进制文件。

前几个字节被反汇编如下

```
 msr    CPSR_c, #211    ; 0xd3
 mrc    15, 0, r9, cr0, cr0, {0}
 bl 0x000148e0
 movs   sl, r5
 beq    0x00014924
 add    r3, pc, #44 ; 0x2c
 ldm    r3, {r4, r8}
 sub    r4, r3, r4
 add    r8, r8, r4
 bl 0x00000154
 bl 0x0000018c
 bl 0x00000050
 ldr    sp, [pc, #12]   ; 0x00000044
 add    lr, pc, #4
 mov    r8, r4
 add    pc, sl, #16
 b  0x00014894
 andhi  r8, r0, r8, ror #3
 andhi  r8, r0, r8, asr #32
 andhi  r0, r0, r0
 add    r4, r8, #16384  ; 0x4000
 mov    r0, r4
 mov    r3, #0
 add    r6, r0, #16384  ; 0x4000
 str    r3, [r0], #4
 str    r3, [r0], #4
 str    r3, [r0], #4
 str    r3, [r0], #4
 teq    r0, r6
 bne    0x00000060
 ldr    r7, [sl, #8]
 add    r0, pc, #196    ; 0xc4
 ldm    r0, {r3, r5, r6}
 sub    r0, r0, r3
 add    r5, r5, r0
 add    r6, r6, r0
 lsr    r5, r5, #20
 lsr    r6, r6, #20
 orr    r3, r7, r5, lsl #20
 str    r3, [r4, r5, lsl #2]
 cmp    r5, r6
 addcc  r5, r5, #0
 bcc    0x00000098
 mov    r3, pc
 lsr    r3, r3, #20
 orr    r3, r7, r3, lsl #20
 add    r0, r4, #8192   ; 0x2000
 str    r3, [r0, #0]!
 ldr    r6, [pc, #124]  ; 0x00000144
 add    r0, r0, #4
 add    r6, r4, r6, lsr #18
 cmp    r0, r6
 add    r3, r3, #1048576    ; 0x100000
 strls  r3, [r0], #4
 bls    0x000000cc
 lsr    r0, r2, #20
 lsls   r0, r0, #20
 moveq  r0, r8
 sub    r3, r0, r8
 add    r3, r3, #-2147483648    ; 0x80000000
 add    r3, r4, r3, lsr #18
 orr    r6, r7, r0
 str    r6, [r3]
 mov    r7, #36864  ; 0x9000
 orr    r3, r7, #-134217728 ; 0xf8000000
 orr    r7, r7, #268435456  ; 0x10000000
 lsr    r3, r3, #20
 lsl    r3, r3, #2 
```

……

这是用于 ARM 模拟器（SoC 设计器）启动过程的内核映像文件。它工作正常。

我想要的是这个内核的 ELF 文件，我可以用 IDA 之类的反汇编程序打开它。

但我无法从此内核映像中检索原始 ELF 格式的文件...

一些帮助将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T12:15:56.890

ARM Linux 内核通常是自加载的普通二进制文件，通过从原始 ELF 中提取 code+rdata 部分并附加“piggy”加载程序而生成。它们由引导加载程序在内存中的某个位置加载，然后从那里运行。piggy loader 将主要有效载荷解包/复制到最终地址并跳转到它。

从二进制文件中恢复 ELF 是可能的（最终运行时地址通常固定为 0xC0008000，您可以通过分析引导代码找出 .data/.bss 范围），但符号表比较棘手。最近的内核不按原样使用 ELF 符号表，而是采用压缩来节省空间。如果您可以启动内核，最简单的方法是读取`/proc/ksyms`或`/proc/kallsyms`因为它将具有未压缩格式的符号。否则，您必须在二进制文件中找到压缩表并[手动解压缩](https://reverseengineering.stackexchange.com/a/1928/60)。

# ms-access - 将 mdb 文件转换为 csv

> ID：14800517
> 
> 赞同：2
> 
> 时间：2013-02-10T17:32:48.763
> 
> 标签：ms-access, csv, batch-file

我有数百个包含气候数据的 .mdb 文件，需要一种方便和/或编程的方式将它们转换为 txt 或 csv 文件。我尝试了许多脚本，但几乎没有编程经验，很难调试它们。我正在尝试使用 TransferText 方法使用脚本，但我没有做对。谁能指出我的大致方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-10-12T04:05:02.157

使用**mdbtools** (CLI)，您可以将 MDB 数据库转换为 CSV：

1) 在 Linux 上安装 mdbtools：

```
$ apt-get install mdbtools 
```

或在 Mac 上：

```
$ brew install mdbtools 
```

2) 将您想要的表格导出为 CSV 文件：

```
$ mdb-export {databbase-name} {table-name} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T20:49:05.430

做到这一点的最好方法涉及大量的编程。我知道你说你没有太多的编程经验，所以我不确定你是想花时间学习每一步，还是只雇别人来做。但这里是步骤：

创建一个新的 Access 数据库，并在其中为代码创建一个新模块。
该代码将执行以下操作：

*   在目录中搜索所有 .mdb 文件。如果它们位于多个子文件夹中，则必须对每个文件夹和子文件夹进行递归搜索。
*   对于每个文件，您需要一次链接一个表。
*   然后使用 TransferText 方法将其导出为 .csv 文件。
*   删除该链接并移至下一个表。
*   然后移动到下一个 .mdb 文件。

您可以通过过滤名称来控制要导出的 .mdb 文件和表，以及每个 .csv 文件的保存位置和名称。

如果您决定雇用，一个优秀的程序员可以在几个小时内完成并准备好为您服务。如果您决定自己做这件事，没有太多编程经验，预计至少需要几天时间，并且这里会发布更多问题。抱歉，希望我能更轻松地为您提供建议。祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T13:35:07.727

这是一个将 mdb 转换为 csv的[Windows 控制台程序。](http://mdbtocsv.codeplex.com/releases/view/82346)使用它，您可以使用简单的 for 循环将目录中的所有 mdb 文件转换为 csv。

```
@echo off
setlocal
for %%I in (*.mdb) do (
    if not exist "%%~nI\" mkdir "%%~nI"
    MDBtoCSV.exe "%%I" "%%~nI\"
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-02T22:13:40.483

我正在从 MDB 数据库迁移到 MySQL，正在做一些转换和数据验证，现在对我来说最好的工具是[Pentaho Kettle](http://community.pentaho.com/projects/data-integration/)（社区版）。它是免费的，您可以将 MDB 数据库作为输入加载、浏览表、对数据进行转换并输出为 CSV、SQL、TXT...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-30T02:13:36.140

这可以在 Java 中完成。此处提供了一个完整的示例：

[https://github.com/NACHC-CAD/access-to-csv-tool](https://github.com/NACHC-CAD/access-to-csv-tool)

AccessToCsvUtil 提供了客户端将直接使用的大部分功能，集成测试提供了如何访问该功能的示例（尤其是 WriteToCsvIntegrationTest）

# spring-mvc - Spring security - org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为“springSecurityFilterChain”的bean

> ID：14800523
> 
> 赞同：4
> 
> 时间：2013-02-10T17:33:09.043
> 
> 标签：spring-mvc, spring-security, tomcat7, web.xml

我已经阅读了大多数已经发布的类似问题，但仍然找不到解决方案。请注意，常规 CRUD 应用程序运行良好。当我尝试通过 spring-security 添加登录功能时出现此错误。

我的工作环境如下；

**1.Tomcat 7.0.35**

**2.Spring 3.2.0**

**3.弹簧安全**

spring-security-config-3.1.3.RELEASE.jar

spring-security-core-3.1.3.RELEASE.jar

spring-security-taglibs-3.1.3.RELEASE.jar

spring-security-web-3.1.3.RELEASE.jar

**4.我的web.xml（/src/main/webapp/WEB-INF/web.xml）**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee  
            http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:spring/root-context.xml</param-value>
</context-param>

<filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            classpath:spring/conf/*-context.xml
        </param-value>
    </init-param>
    <!-- 
    <load-on-startup>1</load-on-startup>
     -->
</servlet>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

**5.我的security-context.xml (/src/main/resources/spring/conf/security-context.xml)**

```
 <?xml version="1.0" encoding="UTF-8"?>

   <beans:beans xmlns="http://www.springframework.org/schema/security"
     xmlns:beans="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xmlns:p="http://www.springframework.org/schema/p" 
     xmlns:util="http://www.springframework.org/schema/util"
     xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/security 
    http://www.springframework.org/schema/security/spring-security-3.1.xsd
    http://www.springframework.org/schema/util 
    http://www.springframework.org/schema/util/spring-util-3.1.xsd">

<http pattern="/resources" security="none" />

<http auto-config="true"  use-expressions="true">
    <intercept-url pattern="/login" access="permitAll"/>
    <intercept-url pattern="/logout" access="permitAll"/>
    <intercept-url pattern="/denied" access="hasRole('ROLE_USER')"/>
    <intercept-url pattern="/" access="hasRole('ROLE_USER')"/>
    <intercept-url pattern="/user" access="hasRole('ROLE_USER')"/>
    <intercept-url pattern="/admin" access="hasRole('ROLE_ADMIN')"/>

    <form-login login-page="/login" 
        authentication-failure-url="/login/failure" 
        default-target-url="/"/>

    <access-denied-handler error-page="/denied"/>

    <logout invalidate-session="true" 
        logout-success-url="/logout/success" 
        logout-url="/logout"/>
</http>

<authentication-manager>
        <authentication-provider user-service-ref="customUserDetailsService">
                <password-encoder hash="md5"/>
        </authentication-provider>
</authentication-manager> 
```

**6.错误**

```
INFO: Initializing Spring root WebApplicationContext
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Sun Feb 10 22:17:40 IST 2013]; root of context hierarchy
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [spring/root-context.xml]
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@58d51a54: defining beans []; root of factory hierarchy
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 353 ms
10-Feb-2013 22:17:40 org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter springSecurityFilterChain
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'springSecurityFilterChain' is defined
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:549)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1096)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:278)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
    at  org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1121)
    at org.springframework.web.filter.DelegatingFilterProxy.initDelegate(DelegatingFilterProxy.java:326)
    at org.springframework.web.filter.DelegatingFilterProxy.initFilterBean(DelegatingFilterProxy.java:236)
    at org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:194)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:262)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:107)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4656)
    at  org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5312)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:657)
    at  org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1637)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

请帮我...谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T06:29:39.843

您已经配置了两个`contextConfigLocation`元素。

您需要`contextConfigLocation`从元素中删除定义`appServlet`并添加`classpath:spring/conf/security-context.xml`到基本`contextConfigLocation`元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T10:04:40.073

我有同样的错误。

我将安全 bean (?) 的配置移到了 root-context.xml 之上：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <!-- Root Context: defines shared resources visible to all other web components -->

    <security:authentication-manager>
        <security:authentication-provider>
            <security:user-service>
                <security:user name="jimi" password="jimispassword"
                    authorities="ROLE_USER, ROLE_ADMIN" />
                <security:user name="bob" password="bobspassword"
                    authorities="ROLE_USER" />
            </security:user-service>
        </security:authentication-provider>
    </security:authentication-manager>

    <security:http auto-config='true'>
        <security:intercept-url pattern="/**" access="ROLE_USER" />
    </security:http> 
```

--

现在它停止给予

> org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为“springSecurityFilterChain”的bean

启动时出现异常。（尚未测试网页:)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-31T12:58:58.323

提供最小的 spring-security 配置

http://www.springframework.org/schema/beans/spring-beans-3.0.xsd [http://www.springframework.org/schema/security](http://www.springframework.org/schema/security) [http://www.springframework.org/schema/security/spring-安全-3.0.3.xsd](http://www.springframework.org/schema/security/spring-security-3.0.3.xsd) ">

```
<http auto-config='true'>
    <intercept-url pattern="/**" access="ROLE_USER" />
</http> 
```

# android - 如何在 vmware Windows guest 中将 nexus 7 连接到 ADT

> ID：14800541
> 
> 赞同：4
> 
> 时间：2013-02-10T17:34:55.267
> 
> 标签：android, vmware, adt, nexus-7

我已经在 Ubuntu 12.04 和 Windows 7 PC 上成功设置了 Android 开发者工具（基于 eclipse 的最新软件包），并连接了 Nexus 7 并使用 phonegap 运行了一个 hello world 示例。

现在我想做同样的事情，但使用 Vmware Workstation 9 运行带有 ADT 的 Win 7 来宾。我能够设置环境并将 Nexus 7 连接为 vmware win 7 来宾中的可移动设备，但 Nexus 7 未出现在 ADT 中附加的真实设备列表中。我已经按照 ADT 软件管理器的要求安装了谷歌 USB 驱动程序。

我基本上遵循了与独立 Win 7 电脑相同的步骤。但似乎以 VMware 客户身份运行 win 7 会导致一些问题。

我所有的环境都是 64 位操作系统。

# uml - 视觉范式子活动图图标

> ID：14800542
> 
> 赞同：4
> 
> 时间：2013-02-10T17:35:16.667
> 
> 标签：uml, activity-diagram, visual-paradigm

在 UML 活动图中，表示子活动图的动作可以用“三叉戟”图标表示，如下图所示：

![在此处输入图像描述](../Images/ecf68cc44dc08f63923093e1d2a38498.png)

我使用 Visual Paradigm 作为 UML 编辑器，我需要在一些活动图中使用这个图标。但我还没有意识到我该怎么做。

在此先感谢任何帮助者。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T15:28:44.903

创建一个动作，右键单击该动作并打开规范：

![在此处输入图像描述](../Images/f1d6ec994f46fc3b951fc175bc9a547c.png)

在规范中选择“Call Behavior Action”，在行为中选择“Create Activity”，如下图：

![在此处输入图像描述](../Images/bc4bda9d661ad43b5cae786f8dbaf9e7.png)

这将打开一个活动定义对话框，在填写所有详细信息并单击所有对话框上的应用后，您的操作将具有分叉：

![在此处输入图像描述](../Images/ee6acf9d3251468d942906ed7cf7803f.png)

享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-19T09:13:58.723

现在有一种更简单的方法可以做到这一点；

*   右键单击要添加活动的节点
*   将鼠标悬停`Behaviour`并单击`Create Activity`选项

之后，它只是填写名称并创建活动。

[![在此处输入图像描述](../Images/5161bb8583b452b6fa76185d7f4b31a8.png)](https://i.stack.imgur.com/Zqrt4.jpg)

# jquery - 如何设置 jPanelMenu 的样式？

> ID：14800543
> 
> 赞同：0
> 
> 时间：2013-02-10T17:35:30.757
> 
> 标签：jquery, css

我了解 jPanelMenu ( [http://jpanelmenu.com](http://jpanelmenu.com) ) 旨在轻松设计和定制。

我尝试向 HTML 添加一个 jPanelMenu-panel 类，如下所示：

```
<div class="section group jPanelMenu-panel">       
     <div class="menu-trigger">Click Me</div>
     <ul id="menu" style="display: none;">
         <li><a href="/">Overview</a></li>
         <li><a href="#usage">Usage</a></li>
         <li><a href="#inner-workings">Inner-Workings</a></li>
         <li><a href="#animation">Animation</a></li>
         <li><a href="#options">Options</a></li>
         <li><a href="#api">API</a></li>
         <li><a href="#tips">Tips &amp; Examples</a></li>
         <li><a href="#about">About</a></li>
     </ul>                                
</div> 
```

并将 .jPanelMenu-panel 类添加到 CSS 中，如下所示：

```
.jPanelMenu-panel {
    background-color: black;
} 
```

看看有没有什么变化。我尝试添加自己的课程，看看是否有任何变化。

好消息是我有了最新版本的 jQuery，这要归功于 h5bp，并且我已经包含了以下标签：

```
<script type="text/javascript" src="js/jquery.jpanelmenu.js"</script> 
```

正确，因为滑块菜单在我的页面上确实有效。我单击“单击我”文本，滑块菜单按预期显示，根本没有样式。

我的目标是让样式与 jpanelmenu.com 上的菜单类似，并从那里开始。

我知道这应该是一件简单的事情，但我迷路了。

我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:12:27.857

您缺少开始`<script>`标签末尾的 > 。

```
<script type="text/javascript" src="js/jquery.jpanelmenu.js"></script>
------------------------------------------------------------^ 
```

你是对的，因为菜单按预期工作，你的浏览器可能会自动修复这个问题......我认为问题可能是如果默认样式覆盖了你添加的额外样式......尝试更改主 CSS 文件。

**编辑**

您对下面的 CSS 片段是正确的

```
.jPanelMenu-panel {
    background-color: black;
} 
```

但是，这可能会在您可能已经链接的默认 CSS 文件中被覆盖（使用网络检查器时您将能够看到这一点）。如果是这样，请尝试更改此主文件中的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:53:40.500

jPanelMenu 使用[SASS](http://sass-lang.com/)（一种 css 预处理器）进行样式设置。在最新版本的 jPanelMenu (1.3.0) 中有一个名为“Sass”的文件夹，您可以在其中找到各种 .scss 文件。文件名以下划线开头的称为部分，它们以样式导入。**scss**文件，稍后编译为样式。**css**（链接到您的 html 文件的那个）

从部分文件名中可以​​看出，每个文件名都代表“footer”、“content”、“jPanelMenu”、“reset”。您可以简单地编辑这些部分并将生成的 style.css 链接到您的 html。

有关 sass 的更多信息，请查看我在上面提供的链接以及[Sass 参考](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html)。如果您熟悉 CSS，应该不难理解它。

体验和设计您的 jPanelMenu 的乐趣！

# sql - (VB) SQL 没有更新我的数据库

> ID：14800545
> 
> 赞同：0
> 
> 时间：2013-02-10T17:35:36.153
> 
> 标签：sql, vb.net

我的程序中有 2 个更新 SQL，一个用于学生表，一个用于用户表。我的学生表的 SQL 工作正常，并将新数据保存到数据库中，但将我的数据输入用户表的 SQL 却没有。当我运行程序时它没有给我任何错误，但是当我结束程序并检查我的数据库时，什么都没有改变。

```
Dim UpdateComm As New OleDb.OleDbCommand
Dim dbAdap As New OleDb.OleDbDataAdapter

ConnectToDB()

Dim sqlUpdateUser As String = "UPDATE usersTable SET usersTable.[Password] = " & _
  Chr(39) & txtNewPass.Text & Chr(39) & _
  ", usersTable.Username = " & Chr(39) & Username & Chr(39) & _
  " WHERE (((userTable.UserID) = " & Chr(39) & CurrentUID & Chr(39) & "));"

UpdateComm = New OleDb.OleDbCommand(sqlUpdateUser, dbConn)
UpdateComm.Parameters.AddWithValue("@p1", txtNewPass.Text)
UpdateComm.Parameters.AddWithValue("@p2", Username)
UpdateComm.ExecuteNonQuery() 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:32:08.630

尝试这个

```
Dim connection As New SqlConnection(connectionInfo)
Dim sqlUpdateUser As String = "UPDATE usersTable SET [Password] = @pwd, Username=        @userName WHERE UserID = @currentUID;"
Dim UpdateComm  As SqlCommand(sqlUpdateUser , connection)

 With UpdateComm .Parameters
   .AddWithValue("@pwd", txtNewPass.Text)
   .AddWithValue("@userName", Username)
   .AddWithValue("@currentUID", CurrentUID)
   .ExecuteNonQuery()
 End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:24:50.837

如评论中所述，您应该参数化您的 SQL 命令以避免 SQL 注入攻击。它们通常还消除了由不正确的字符串连接引起的错误。您的代码应如下所示：

```
Dim UpdateComm As New OleDb.OleDbCommand
Dim dbAdap As New OleDb.OleDbDataAdapter

ConnectToDB()

Dim sqlUpdateUser As String = "UPDATE usersTable SET [Password] = @pwd, Username = @userName WHERE UserID = @currentUID;"

UpdateComm = New OleDb.OleDbCommand(sqlUpdateUser, dbConn)
UpdateComm.CommandType = CommandType.Text;
UpdateComm.Parameters.AddWithValue("@pwd", txtNewPass.Text)
UpdateComm.Parameters.AddWithValue("@userName", Username)
UpdateComm.Parameters.AddWithValue("@currentUID", CurrentUID)
UpdateComm.ExecuteNonQuery() 
```

您似乎没有将第三个添加`CurrentUID`到您的命令参数中。我还删除了您应用于列名的别名 - 它们不是必需的，因为您只处理 1 个表。

# phpstorm - PHPStorm 同步与部署的键盘快捷键

> ID：14800547
> 
> 赞同：2
> 
> 时间：2013-02-10T17:36:06.187
> 
> 标签：phpstorm

刚开始使用 PHPStorm，我喜欢内置的 FTP 同步功能。有没有办法让我使用键盘快捷键弹出“与已部署的 mywebsite.com 同步”屏幕？如果没有，我可以为这个任务绑定一组键吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T18:53:14.683

无法直接为特定于服务器的同步操作分配键盘快捷键，只能为`Sync with Deployed to...`显示配置服务器列表的弹出窗口的通用操作分配键盘快捷键。如果您只有一台服务器，只需用`Enter`或 数字确认即可。

但是，您可以录制宏：

1.  `Edit`| `Macros`| `Start Macro Recording`.
2.  `Tools`| `Deployment`| `Sync with Deployed to <server name>`, 关闭同步窗口。
3.  `Edit`| `Macros`| `Stop Macro Recording`.
4.  将宏名称设置为类似`Sync with <server name>`.
5.  前往`File`| `Settings`| `Keymap`，在`Macros`节点下右键单击您刚刚录制的新同步宏，然后`Add keyboard shortcut`。

# asp.net - 部署 ASP.NET 应用程序时出现解析器错误

> ID：14800550
> 
> 赞同：25
> 
> 时间：2013-02-10T17:36:12.037
> 
> 标签：asp.net, parsing, deployment

我已经完成了简单的 asp.net web 应用程序项目，编译它，并尝试在本地 IIS 上进行测试。我已经创建了虚拟目录，将其映射到物理目录，然后将所有必要的文件放在那里，包括带有所有 .dll 的 bin 文件夹在项目设置的构建部分中，输出路径是 bin\ 所以当我尝试浏览我的应用程序时，我得到了：

```
Server Error in '/' Application.
--------------------------------------------------------------------------------

Parser Error 
Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: Could not load type 'AmeriaTestTask.Default'.

Source Error: 

Line 1:  <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="AmeriaTestTask.Default" %>
Line 2:  
Line 3:  <%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="ajaxToolkit" %>

Source File: /virtual/default.aspx    Line: 1 
```

![在此处输入图像描述](../Images/2b1aacf6d0539f3b1899d9d0cc19f6fa.png)

已阅读类似的问题帖子，解决方案是将输出路径设置为 bin\，但这对我的项目来说是默认的。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-01-23T08:46:29.560

我知道我来不及回答，但它可以帮助其他人并节省时间。

以下可能是其他解决方案。

`Solution 1:`有关为您的应用程序创建虚拟目录的详细说明，请参阅为您的应用程序创建虚拟目录。

`Solution 2:`您的应用程序的 Bin 文件夹丢失或应用程序的 DLL 文件丢失。有关详细说明，请参阅将应用程序文件复制到生产服务器。

`Solution 3:`您可能已部署到 Web 根文件夹，但尚未更改 Web.config 文件中的某些设置。有关详细说明，请参阅部署到 Web 根目录。

在我的情况下`Solution 2`，在部署到服务器`DLL's`时，`bin`目录中的一些内容尚未成功上传到服务器。我已经**重新上传了所有的 DLL**，它可以工作了！！

[这是解决 asp.net 解析器错误](https://www.aspneto.com/parser-error-when-deploying-asp-net-application.html)的参考链接。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-13T06:20:59.537

我遇到过同样的问题。进行 5 或 6 个小时的研究。一个简单的解决方案似乎正在奏效。我只需要将我的文件夹从 iis 转换为应用程序。它工作得很好。（这是我从服务器 2003 迁移到服务器 2008 R2 的场景）

（1）打开IIS，选择需要转换的网站和相应的文件夹。右键单击并选择转换为应用程序。

[![在此处输入图像描述](../Images/ca2270be35b4a1ec0905d4cb9e408fa8.png)](https://i.stack.imgur.com/oXNLE.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-06-16T06:39:38.237

尝试更改`CodeBehind="Default.aspx.cs"`为`CodeFile="Default.aspx.cs"`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-09-14T15:00:19.560

有时，如果您：

1.  清洁解决方案/构建或，
2.  重建解决方案/构建。

如果它在此之后“突然”发生，并且您的代码有**构建**时错误，那么请先尝试修复这些错误。

发生的情况是，在构建您的解决方案时，会创建 DLL 文件并将其存储在项目 bin 文件夹中。如果您的代码在构建时出现错误，则 DLL 文件没有正确创建，这会导致错误。

“快速修复”是修复所有错误或将它们注释掉（如果它们不会影响其他网页。）然后重建项目/解决方案

如果这不起作用，请尝试更改： *CodeBehind="blahblahblah.aspx.cs"*

至： *CodeFile="blahblahblah.aspx.cs"*

注意：将“blahblahblah”更改为页面真实姓名。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-10T19:07:56.257

我已经解决了这个问题。解决方案是不要手动创建虚拟目录，然后在此处复制应用程序文件，而是使用“添加应用程序...”选项。这是帮助我的帖子[http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/7ad2acb0-42ca-4ee8-9161-681689b60dda/](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/7ad2acb0-42ca-4ee8-9161-681689b60dda/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-09-19T09:15:34.807

我已经通过这种方式解决了。

转到您的项目文件，比如说 project/name/bin 并删除 bin 文件夹中的所有内容。（这会给你另一个错误，你可以通过这种方式解决）

然后在您的 Visual Studio 中右键单击项目的 References 文件夹，打开 NuGet 包管理器。

转到浏览并安装“DotNetCompilerPlatform”。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-10-05T16:17:50.730

当我在其中一个 ASHX 文件中出现编程错误时遇到了同样的错误：它是通过复制另一个文件创建的，并在代码隐藏语句中继承了它的类名。当所有 ASPX 和 ASHX 文件在 IIS Express 本地运行时没有错误，但一旦部署到服务器，它们就停止工作（全部）。

一旦我找到了一个 ASHX 页面并修复了类名以反映它自己的类名，所有 ASPX 和 ASHX 文件就开始在 IIS 中正常工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-16T20:05:05.073

这里是一个非常老的问题，但我遇到了同样的错误，提供的答案都没有解决这个问题。

我的问题发生是因为我在初始创建后手动更改了项目的命名空间和程序集名称。让我注意到`Inherits`属性中的命名空间与更新后的命名空间不匹配。

更新 Global.asax 标记中的命名空间以匹配应用程序命名空间为我修复了错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-31T09:53:11.010

IIS 7 或 IIS 8 或 8.5 版本 - 如果您要从 2003 迁移到 2012/2008，请确保 Web 服务处于应用程序类型而不是虚拟目录

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-27T14:02:42.010

在我的例子中，有新的代码分支和旧的代码分支部署在 IIS 本地。所以它指向不可用的旧分支代码。所以我已经将我的代码部署到带有新分支的 IIS，它现在正在工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-30T10:24:39.233

就我而言，我错过了 .csproj 文件中的编译标记

```
<Compile Include="Global.asax.cs">
  <DependentUpon>Global.asax</DependentUpon>
  <CopyToOutputDirectory>Always</CopyToOutputDirectory>
</Compile> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-04-04T23:54:43.090

有趣的所有不同的场景..

就我而言...我已将我的网站上传到 GoDaddy 并收到解析器错误。

`compilers`我通过在`system.codedom`web.config 中注释掉它来解决它。并且还添加了一个用于发布的自定义配置文件，该配置文件将在发布期间进行预编译。

```
 <system.codedom>
    <!--GoDaddy does not compile!-->
    <!--<compilers>
      <compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.CSharpCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:default /nowarn:1659;1699;1701" />
      <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.VBCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:default /nowarn:41008 /define:_MYTYPE=\&quot;Web\&quot; /optionInfer+" />
    </compilers>-->
  </system.codedom> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-31T05:32:52.370

当您在子文件夹中添加子文件夹和文件时，Bin 文件夹中的 DLL 文件也可能已更改。当我在 Bin 文件夹中上传更新的 DLL 文件时，它解决了这个问题。感谢建议或暗示的 Mayank Modi。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-03-22T15:08:18.157

查看错误消息，您的部分代码`Default.aspx`是：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="AmeriaTestTask.Default" %> 
```

但`AmeriaTestTask.Default`不存在，因此您必须更改它，最有可能更改为 Default.aspx.cs 中定义的类。例如对于 web api 应用程序，在 Global.asax.cs 中定义的类是：`public class WebApiApplication : System.Web.HttpApplication`并且在 asax 页面中你有：

```
<%@ Application Codebehind="Global.asax.cs" Inherits="MyProject.WebApiApplication" Language="C#" %> 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2015-09-21T06:14:08.037

我为时已晚，但让我解释一下我是如何解决这个问题的。

这个问题基本上是因为不正确的文件夹/解决方案结构。

出现此问题的原因可能是 1\. 如果您从其他位置复制项目并尝试运行该项目。

因此，要解决此问题，请转到原始位置并再次交叉检查文件夹和文件。

这对我有用。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2020-05-19T18:20:02.733

经过大量搜索，**我发现问题出在我的项目 dll 文件中。当出现编译错误时，我清理并重建了我的项目......** 简单的解决方案是通过删除内容或注释行来删除所有页面中的所有编译错误，然后清理并重建您的项目...这将解决您的问题..

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2015-09-20T11:08:50.413

当 Debug 和 Release 文件夹中的文件未正确创建时会发生这种情况（它们的引用错误或被多次覆盖）。我遇到了同样的问题，当我们构建解决方案时，我一切正常，但是当我发布网站时，它给了我同样的错误。我已经通过以下方式解决了这个问题：

1.  转到 Visual Studio 中的解决方案资源管理器，然后单击显示隐藏文件（如果它们没有显示！）
2.  你会找到一个名为 obj 的文件夹，打开它。
3.  这里又有 2 个文件夹，分别命名为 Debug 和 Release。现在，从这两个文件夹中删除内容，确保不要删除文件夹 Debug 和 Release。仅删除 Debug 和 Release 文件夹中的文件和文件夹。
4.  现在构建并发布您的解决方案，一切都会像魅力一样工作。

# php - 选择不包含任何给定节点的节点

> ID：14800554
> 
> 赞同：0
> 
> 时间：2013-02-10T17:36:34.453
> 
> 标签：php, xml, xpath

这是我正在处理的 XML

```
<root>
<person>
<name>Bob</name>
<age>23</age>
</person>
<person>
<name>Dina</name>
<age>19</age>
</person>
<person>
<name>John</name>
<age>31</age>
</person>
<person>
<name>Tim</name>
</person>
</root> 
```

在这里我可以得到所有具有年龄属性的人名

```
/person[age]/name 
```

这将选择 Bob、Dina 和 John

但是我如何选择蒂姆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:40:27.633

```
/root/person[not(age)]/name 
```

那应该行得通。

# python - Python多线程 - Blender中的关闭线程

> ID：14800556
> 
> 赞同：0
> 
> 时间：2013-02-10T17:36:38.523
> 
> 标签：python, multithreading, blender, python-3.2, python-multithreading

我有一个小问题，在搅拌机游戏引擎中有一个多线程 python 脚本。它工作正常，但是当我停止游戏时，它会引发一些异常并且有时会崩溃。

```
from bge import logic
import time
from threading import Thread

def init():

    if not hasattr(logic, 'init'):
        logic.init = 0
        logic.thread = new()
        logic.thread.start()

    logic.thread.restart()

class new(Thread):
    def __init__(self):
        self.Thread = Thread
        self.Thread.__init__(self)
    def run(self):
        number = 0
        while 1:
            number += 1
            print(number)
            try:
                main()
                time.sleep(0.1)
            except:
                break

    def restart(self):
        self.Thread.__init__(self)

def main(): #this part isn't important now ...
    cam = bge.logic.getCurrentScene().active_camera
    obj = bge.logic.getCurrentController().owner
    obj.worldPosition.x = cam.worldPosition.x
    obj.worldPosition.y = cam.worldPosition.y 
```

控制台写道：

```
Unhandled exception in thread started by <bound method new._bootstrap of <new(Th
read-80, initial)>>
Traceback (most recent call last):
  File "C:\Program Files (x86)\Blender Foundation\Blender\2.64\python\lib\thread
ing.py", line 709, in _bootstrap
    self._bootstrap_inner()
  File "C:\Program Files (x86)\Blender Foundation\Blender\2.64\python\lib\thread
ing.py", line 784, in _bootstrap_inner
    with _active_limbo_lock:
AttributeError: __exit__ 
```

如果有人能找出问题所在，我会很高兴。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:46:57.307

这是[Blender 中 Python 脚本的一个众所周知的限制](http://www.blender.org/documentation/blender_python_api_2_64_1/info_gotcha.html#strange-errors-using-threading-module)。

问题是 Blender 在你的线程之前拆掉了 Python。您可以尝试做的是以某种方式注册 Blender（或您的游戏）正在退出，通知您的线程，并[`join`](http://docs.python.org/3/library/threading.html#threading.Thread.join)从主线程通知它。

# javascript - .animate() 适用于 Firefox、Chrome 和 IE9，但不适用于 IE10（Jquery 1.8.3 和 1.9.1）

> ID：14800557
> 
> 赞同：-3
> 
> 时间：2013-02-10T17:36:43.033
> 
> 标签：javascript, jquery, html, css

编辑：固定：感谢大家的帮助。

问题原来是 CSS 代码中的这条孤行：

*   { 过渡：所有 0.2s 缓动；}

删除此行解决了问题

原帖：

在中断了 10 年之后，我才刚刚开始编码。我正在尝试获取一些代码来为从页面中间到顶部的菜单设置动画。它适用于 Firefox、Chrome 和 IE9，但在 IE10 中被破坏。我试过 JQuery 1.6.3 和 1.9.2 都没有解决。

编辑：菜单悬停在 IE10 中工作正常。破碎，我的意思是菜单在 IE10 中没有动画。IE10 的控制台中没有 javascript 错误。点击确实在 IE10 中被很好地捕获，因为 window.location.href 确实正确地更改为约会.html。

片段：

```
<header id="menubar" style="top: 496px; left: 80px; width: 1360px;">
  <ul id="surnav">
    <li class="menu-hover"> <a href=
      "index.html">Home</a> </li>
    <li id="appointments" class="menu-hover"> <a href=
      "#">Appointments</a> <img src="norwood_files/snav-arrow.png" width="10" height="5" />
      <ul class="submenu">
        <li>Emergencies</li>
      </ul>
    </li>
  </ul>
</header> 
```

JavaScript：

```
$(document).ready(function () {

if (document.URL.indexOf("index.html") >= 0) {
    $("#menubar").css("top", "496px");
    $(".menu-hover").on({
        click: function () {
            $("#menubar").animate({
                top: '50px'
            }, "easing:swing");
        },
        mouseenter: function () {
            $(this).children(".submenu, img").fadeIn(250);
        },
        mouseleave: function () {
            $(this).children(".submenu, img").fadeOut(250);
        }
    });

    $("#appointments").on({
        click: function () {
            $("#appointments-bkg").animate({
                top: '-14px'
            }, "easing:swing", function () {
                window.location.href = "appointments.html"
            });
        }
    });

    $("#financial").on({
        click: function () {
            $("#financial-bkg").animate({
                top: '-14px'
            }, "easing:swing", function () {
                window.location.href = "financial.html"
            });
        }
    });
}
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T18:17:31.750

也许尝试`if(window.location.href.match(/index\.html/i)`而不是`if(document.URL.indexOf("index.html") >= 0)`除此之外，考虑到所有其他浏览器都很好，我不明白为什么它在 IE10 中不起作用。

# web-services - RSS 提要可以被视为 Web 服务吗

> ID：14800558
> 
> 赞同：0
> 
> 时间：2013-02-10T17:36:52.387
> 
> 标签：web-services, rss

我目前正在学习网络服务。

最有趣的是，它以 XML 形式提供输出。可用于在两个服务器之间进行交互。

所以我的问题是可以将 RSS 和 Atom 提要视为 Web 服务。如果不是，那为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:35:09.743

简单回答是不。因为 Web 服务需要一个服务，所以仅仅涉及 XML 并不能使它成为一个 Web 服务。有了经验你就会明白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:58:12.957

作为一个。sam 说，web service 是一个概念。我们必须在 java 或 asp.net 上构建相互通信的构建程序。RSS/ATOM 是一种方式，只是数据源而不是服务。

# php - 从 $.ajax 调用运行 PDO 语句的问题

> ID：14800559
> 
> 赞同：0
> 
> 时间：2013-02-10T17:36:53.277
> 
> 标签：php, ajax, jquery, pdo

嘿伙计们，我有以下 ajax 调用：

```
function sendUserfNotes()
{
    $.ajax({
    type: "POST",
    dataType: "json",
    url: '/pcg/popups/getNotes.php',
    data:
    {
        'nameNotes': notes_name.text(),
    },
    success: function(response) {
        $('#notes_body').text(response.the_notes);
        alert(response.the_notes);
        //$('#notes_body').html(data);
    }
}); 
```

一旦它运行并进入这个文件：.......

```
try {  
  # MySQL with PDO_MYSQL  
  $DBH = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);  
  $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

}  
catch(PDOException $e) { 
    echo "I'm sorry, I'm afraid I can't do that.";  
    file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);   
}

$username_notes = $_POST['nameNotes'];

$sql = "SELECT notes FROM csvdata WHERE username = :username";
$getmeminfo = $DBH->prepare($sql);
$getmeminfo->execute(array(':username' => $username_notes));
$row = $getmeminfo->fetch(PDO::FETCH_ASSOC);
$notes = $row['notes'];

$returnArray = array( 'the_notes' => $row['notes']);

echo json_encode($returnArray);
$DBH = null; 
```

现在在这里，一旦返回 json 数组，`$('#notes_body').text(response.the_notes);`将使用返回的响应更改 div，但我的问题是我无法让它返回。它总是为空？

我不确定出了什么问题，所以如果你能这么好心，给我一些时间:)

大卫

更新：

所以一件事是我自己测试了 pdo 语句并且它有效。

如果我只是给 $username_notes 一个像“BillCosby”这样的直接名称，它会为那个人返回正确的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T17:43:38.033

There is no such thing like "issue with PDO in $.ajax". PDO is server side while $.ajax is client side.

> It's like the pdo statement does not even run?

Nobody knows.
Nobody have access to your code but you.
So, you have to answer yourself. Debug your code.

For the client-side debugging Firebug is priceless.
Open it's Net tab and see if there was an HTTP call at all. If it was - did it return anything?
Open Console and see if there are any errors.

# java - 在 Wicket 中通过 AJAX 更新表列

> ID：14800560
> 
> 赞同：1
> 
> 时间：2013-02-10T17:36:53.800
> 
> 标签：java, ajax, wicket

我有一个 AjaxFallbackDefaultDataTable 表，其中包含一些文本列（PropertyColumn）。该表还包含一个带有可编辑文本字段的列。我想通过 AJAX 更新 PropertyColumn 之一，但我不想更新整个表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:19:46.167

如果您使用 Wicket 6，您可以使用组件间事件。

首先创建一个包含`AjaxRequestTarget`如下内容的事件：

```
public class AjaxUpdateEvent {
    private final AjaxRequestTarget target;

    public AjaxUpdateEvent(AjaxRequestTarget target) {
        this.target = target;
    }
    public AjaxRequestTarget getAjaxRequestTarget() {
        return target;
    }
} 
```

您可以使用该方法发送任何`Component`您想要的事件表单。`send()`你发送这样的事件：

`send(getPage(), Broadcast.DEPTH, new AjaxUpdateEvent(target));`

然后在`AjaxFallbackDefaultDataTable`我将尝试覆盖 newCellItem 并在某个时间从某个地方触发时在那里监听事件，并将所需的单元格项目添加到 AjaxRequestTarget。像这样的东西：

```
 AjaxFallbackDefaultDataTable table =
            new AjaxFallbackDefaultDataTable("table", null, null, FLAG_RESERVED1) {
        @Override
        protected Item newCellItem(String id, int index, IModel model) {
            Item item;
            if (index == indexOfColumnYouWant){
                item = new Item(id, index, model) {
                    @Override
                    public void onEvent(IEvent<?> event) {
                        super.onEvent(event); 
                        if ((event.getPayload() instanceof AjaxUpdateEvent) ){
                            ((AjaxRequestTarget)event.getPayload()).add(item);
                        }
                    }
                };
            } else {
                item = super.newCellItem(id, index, model);
            } 

            return item;
        }
    }; 
```

此外，您还可以将项目添加到目标，如果它是`isVisible()`.

# java - 为什么我们在 Java 7 中需要菱形运算符？

> ID：14800562
> 
> 赞同：0
> 
> 时间：2013-02-10T17:37:15.887
> 
> 标签：java, java-7

我很好奇为什么我们需要 Java7 中的菱形运算符？我们可以使用一个简单的静态泛型方法来模拟这种行为，该方法可以添加到集合 API 中：

HashMap的方法代码：

```
public static <R, S> HashMap<R, S> getInstance() {
    return new HashMap<R, S>();
} 
```

我们可以这样使用它：

```
Map<String, List<String>> m = HashMap.getInstance(); 
```

并在您可以尝试此行为时编写代码：

```
import java.util.HashMap;
import java.util.Map;
import java.util.List;
import java.util.Arrays;

public class Diamond {
    public static void main(String... args) {
        Map<String, List<String>> m = getInstance();
        m.put("Hello", Arrays.asList("Peter", "Robert"));
        System.out.println(m.toString());
    }
    public static <R, S> HashMap<R, S> getInstance() {
        return new HashMap<R, S>();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T17:49:53.243

虽然您是正确的，可以使用泛型工厂方法来避免在创建泛型对象时重复类型参数，但这种方法有几个缺点：

*   您需要为每个泛型类的每个构造函数编写一个工厂方法，复制其参数列表和参数文档。
*   使用构造函数，很明显正在创建一个新对象。使用方法，必须以非正式的方式传达这些知识。
*   调用者需要知道在哪里可以找到工厂方法。特别是，如果它不是被实例化的泛型类的一部分，不同的人可能会将它们放在不同的实用程序类中，从而进一步增加代码重复......

# css - 使用 CSS 媒体查询防止主容器拉伸到 1680 像素以上

> ID：14800563
> 
> 赞同：0
> 
> 时间：2013-02-10T17:37:16.573
> 
> 标签：css, responsive-design, media-queries

谁能帮我解决这个问题？

我一直在设计一个流体响应网站，但我需要将主容器的宽度限制在 1680 像素以上（大多数 Mac 屏幕），因为任何超过这个大小的东西都会使网站变得过度拉伸。

我试过像这样设置主容器：

```
.container-fluid {
  padding-left: 1.0%!important;
  padding-right: 1.0%!important;
  *zoom: 1;
  max-width: 1680px;
} 
```

这样做的问题是网站的主要内容区域没有保留在页面的中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:49:18.230

尝试添加`margin: auto;`到您的 .container-fluid 元素。这应该让它集中在大型显示器上。

# c - 为 c 中的一组趋势线分配不同的权重

> ID：14800566
> 
> 赞同：0
> 
> 时间：2013-02-10T17:37:38.820
> 
> 标签：c, combinations, trendline

我有一个包含 12 条不同趋势线的图表。我想通过将所有 12 条趋势线的值相加来生成一条趋势线，如下所示：

```
for (i = 0, cumulativeTrendValue = 0; i < 12; ++i)
{
     cumulativeTrendValue += trendLine[i];
} 
```

然后我将这个累积趋势线的值输入另一个函数。这很简单。但是现在我想通过为 12 条趋势线中的每一条分配 3 种不同权重中的 1 种来添加变化。例如，将通过为每条趋势线分配权重 1 来创建第一条累积趋势线；下一个将通过为第一条趋势线分配权重 2 来创建，为其余趋势线分配 1 权重，等等，令人作呕。

现在我确定之前已经在这里问过并回答了这个问题，但是我花了 2 个小时试图在 c 中找到一个实现，但找不到。（顺便说一句，这不是家庭作业，如果你想知道的话。你可以看看我过去几年的其他问题来确认这一点。）

所以，我的问题是：我可以使用哪些关键字来查找以前回答过这个问题的位置。或者，如果您今天特别乐于奉献，您能否在 SO 上提供指向问题/答案的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:44:39.050

The most obvious solution to me is to add another array for the weights, to match the `tredLine` array.

However if you want to do it algorithmically as outlined in the question, you could have another loop outside the current, and a counter in the old inner loop that counts down. Something like this:

```
for (weight = 1; weight < 12; weight++)
{
    int currentWeight = weight;

    for (i = 0, cumulativeTrendValue = 0; i < 12; i++)
    {
        cumulativeTrendValue += trendLine[i] * currentWeight;

        if (currentWeight > 1)
            currentWeight--;
    }

    /* Use cumulativeTrendValue someway */
} 
```

# ruby-on-rails - 使用 2 个不同的服务器将 Rails 应用程序与数据库分离？

> ID：14800567
> 
> 赞同：0
> 
> 时间：2013-02-10T17:37:39.840
> 
> 标签：ruby-on-rails, database, postgresql, scaling, system-administration

将数据库与实际的 Rails 应用程序分离可能是每个人想要扩展其应用程序时要做的第一件事，但我仍然无法找到有关如何做到这一点的教程。有人可以给我一个链接，指向书中解释如何处理这个问题的页面或章节吗？

谢谢。

PS：我可能会使用 Nginx 作为 Web 服务器，使用 PostgreSQL 作为 RDBMS，所以如果教程将它们用作示例会更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:43:06.490

1.  像往常一样设置应用程序服务器，但不安装数据库。

2.  设置数据库服务器并确保应用程序服务器能够连接。

3.  在中指定数据库服务器和凭据`config/database.yml`

主要是这样。

# java - AspectJ - 获取带注释的方法参数的值

> ID：14800569
> 
> 赞同：9
> 
> 时间：2013-02-10T17:37:51.607
> 
> 标签：java, aspectj

我创建了自定义注释`@MyAnn`。我会用它来注释方法参数。

例如：`public static call(@MyAnn String name){...}`

使用 AspectJ，我如何访问和更新所有带有注释的参数的值？

我在这里找到了一些示例代码，展示了如何创建针对自定义注释的[切入点](https://stackoverflow.com/questions/4922561/aspectj-pointcut-with-annotation-parameters)。

所以现在，我用切入点创建了一个切面。但我不知道如何获取带有注释的参数值`MyAnn`。

```
@Aspect
public class MyAnnAspect {

    @Around("execution(@my.package.test.MyAnn") // I hope this pointcut will work
    public void changeParameter(final ProceedingJoinPoint pjp) throws Throwable {
        // How I can there get parameter value (and chage it)? 
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-10T18:01:50.067

我认为切入点不起作用，因为它不是注释的方法，顺便说一句，你可以这样做：

```
MethodSignature ms = (MethodSignature) pjp.getSignature();
Method m = ms.getMethod();
Annotation[][] pa = m.getParameterAnnotations(); 
```

现在你可以遍历注解，找到合适的注解，如果存在的话，通过调用`pjp.getArgs()`.

# c++ - Prime 发电机溢出？C++

> ID：14800571
> 
> 赞同：2
> 
> 时间：2013-02-10T17:38:26.027
> 
> 标签：c++, arrays, overloading, generator

我正在使用eratosthenes的筛子编写一个素数生成器。我已经让它生成低于 521102 的素数，但任何更高的数字都会导致程序崩溃。这是我的代码。

```
#include <iostream>
using namespace std;

int main ()
{
    int long MAX_NUM = 1000000;
    int long MAX_NUM_ARRAY = MAX_NUM+1;
    int Num_Array [MAX_NUM_ARRAY];
    std::fill_n(Num_Array, MAX_NUM_ARRAY, 3);
    int long sieve_prime = 2;
    int long sieve_prime_constant = 0;
    Num_Array [0] = 1;
    Num_Array [1] = 1;

    while (sieve_prime_constant <= MAX_NUM_ARRAY)
    {
        if (Num_Array [sieve_prime_constant] == 1)  
        {

            sieve_prime_constant++;
        }

        else
        {
        Num_Array [sieve_prime_constant] = 0;  
        sieve_prime=sieve_prime_constant; 
            while (sieve_prime<=MAX_NUM_ARRAY - sieve_prime_constant)  
            {
                sieve_prime = sieve_prime + sieve_prime_constant;
                Num_Array [sieve_prime] = 1;
            }

            if (sieve_prime_constant <= MAX_NUM_ARRAY)
            {
                sieve_prime_constant++;
                sieve_prime = sieve_prime_constant;
            }
        }
    } 
return 0;
} 
```

我将 MAX_NUM 设置为 1000000，但它不起作用。但正如我之前所说，低于 521102 的数字确实有效。我需要能够测试更高的数字。我的问题是什么，我该如何解决？

非常感谢！

感谢您的回复。我尝试了动态分配数组的解决方案。在某种程度上，它运作良好。将 MAX_NUM 设置为 5 亿左右后，我在运行程序时收到此错误...

在抛出 'std::bad_alloc' what() 的实例后调用终止：std::bad_alloc

此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。

拥有 5 亿的屋顶已经接近可接受，但更高还是更好？还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T17:42:42.093

假设您在 Windows 上，您的堆栈太小（默认为 1MB），无法在堆栈帧中容纳以下变量：

`int Num_Array [MAX_NUM_ARRAY];`

您应该在堆中分配它：

```
int *Num_Array = new int[MAX_NUM_ARRAY];
...
delete[] Num_Array; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:42:26.147

也许是因为你正在破坏堆栈。将数组移出`main()`函数怎么样？

```
#define MAX_NUM = 1000000;
#define MAX_NUM_ARRAY (MAX_NUM + 1)
int Num_Array[MAX_NUM_ARRAY];

int main()
{
    // etc.
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T17:45:23.663

The fact that you're using `std::fill_n` indicates you're actually writing C++, not C.

You can drastically reduce the memory consumption of your program by using a real bool array instead of an int array. Since you're using C++, you can get a Boolean array using `std::vector<bool>`. Unlike `bool[n]`, `std::vector<bool>(n)` only takes up n bits (`bool[n]` takes up maybe 8n bits, or whatever the smallest alignment is on your machine/compiler, and your `Num_Array[n]` actually takes up 32n bits since you're using 32-bit integers to store Boolean values).

The other comments suggest you store this value on the heap instead of on the stack. `std::vector<bool>` will do that for you automatically.

# java - 如何正确联合Hashmap > 和 HashMap

> ID：14800572
> 
> 赞同：0
> 
> 时间：2013-02-10T17:38:45.060
> 
> 标签：java, arraylist, hashmap

我想让我的代码干净添加有以下麻烦。我要加

`HashMap<String,Object> currentItem;`

到我的仓库

`HashMap<String, ArrayList<Object>> storage;`

通过以下方式：

根据键添加所有`Object`的`currentItem`到`ArrayList<Object>`的`storage`（它们都是相同的）。

这是我的变体如何根据键将 currentItem 添加到存储中

```
if (storage.containsKey("article_link")) 
{Object tmpObj;
    ArayList<Object> listTemp;
            tmpObj = currentItem.get("article_link");
        listTemp = storage.get("article_link");
        listTemp.add(tmpObj);
        storage.put("article_link", listTemp);

        tmpObj = o.get("image");
        listTemp = storage.get("image");
        listTemp.add(tmp);
        storage.put("image", rrr);
} 
```

这适用于每个哈希映射键。我可以为重复代码编写特殊功能，但我希望它可以更容易解决。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:43:17.590

这里要注意的一件事是，一旦你修改它，你不需要再次为新的arraylist 放置映射。更改将`Map`自动反映在，因为您所拥有的是对实际`ArrayList`对象的引用。

其次，你不需要做所有这些`hard-coding`。您可以简单地遍历您的`currentItem`地图，并为每一`key-value`对检查`key`in的存在`storage`，如果找到，只需更新相应的`List`.

这是你如何做到的： -

```
for (Entry<String, Object> entry: currentItem.entrySet()) {
    if (storage.containsKey(entry.getKey()) {
        storage.get(entry.getKey()).add(entry.getValue());

    } else {
        List<Object> newEntry = new ArrayList<Object>();
        newEntry.add(entry.getValue());
        storage.put(entry.getKey(), newEntry);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:44:30.027

```
for (Entry<String, Object> entry: currentItem.entrySet()) {
    if (!storage.containsKey(entry.getKey()) {
        storage.put(new ArrayList<Object>());
    }
    storage.get(entry.getKey()).put(entry.getValue());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T17:48:12.087

```
Set<Entry<String,Object> entries = currentItem.entrySet();
Iterator<Entry<String,Object>> i = entries.iterator();
while(i.hasNext()) {
    Entry<String,Object> e = i.next();
    if(storage.containsKey(e.getKey()) { 
        storage.get(e.getKey()).add(e.getValue());
    }
    else {
        ArrayList l = new ArrayList();
        l.add(e.getValue());
        storage.put(e.getKey(),l);
    }
} 
```

# python - 如何绘制曲线可能重叠的图？

> ID：14800585
> 
> 赞同：3
> 
> 时间：2013-02-10T17:40:01.133
> 
> 标签：python, matlab, matplotlib, plot, legend

我正在尝试制作与此类似的情节

![在此处输入图像描述](../Images/b93aaa825be9248eabdd67bd7edecd7e.png)

因为有完全重叠的曲线，我喜欢他把图例放在曲线上的方式，所以他可以绘制这么多曲线而不会造成混乱，并且有一个单独的图显示这些图例所代表的含义。

当我试图在 Matlab 中制作这个情节时，但我不知道如何制作这样的图例。带有网格的双对数也是一团糟。

如何使用 matplotlib 或 Matlab 制作此图？matplotlib 更灵活吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:32:52.193

只需使用`annotate`，这应该可以让你达到 90%：

```
x = np.linspace(0,1000)
y = x ** -2

figure()
ax = gca()
ax.loglog(x,y)
ax.grid(True)
ax.grid(True, which='minor')

ax.annotate('a1', (x[15], y[15]),
            backgroundcolor='w',
            color='b',
            va='center',
            ha='center',
            bbox=dict(boxstyle="round", color='b'),) 
```

[`annotate`文档](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.annotate)和[示例](http://matplotlib.org/users/annotations_guide.html#plotting-guide-annotation)。获得圈子可能会很棘手。如果你真的想使用圆圈，我建议在 github 上提交功能请求。（看起来像几个小时的挖掘 mpl 胆量来添加椭圆边界框）。

# xml - 未在 Visual Studio 2010 中加载 XML 嵌入式资源？

> ID：14800586
> 
> 赞同：0
> 
> 时间：2013-02-10T17:40:21.483
> 
> 标签：xml, vb.net, visual-studio-2010

以下是我的完整代码。我想要做的是随机读取 Button10_Click 上的标签的 XML 资源文件行，但程序没有从嵌入的 xml 文件中识别任何信息，资源流是否在某处“丢失”？

```
Imports System.IO
Imports System
Imports System.Reflection
Imports System.Xml
Imports System.Security.Permissions

Public Class Form1

    Dim asm = Assembly.GetExecutingAssembly()
    Dim var = asm.GetManifestResourceStream("WindowsApplication2.british-english-dictionary.xml")

    Private Sub Button10_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button10.Click

          Dim rand = New Random()
          Dim myXml = New XDocument()

          Dim lexemeList = myXml.Descendants("lexeme").ToList()
          Dim randomLexeme = lexemeList(rand.Next(0, lexemeList.Count - 1))

          Label1.Text = randomLexeme

    End Sub
End Class 
```

编辑：XML 文件的示例如下：

```
<?xml version="1.0" encoding="UTF-8"?>  
<root>
<lexeme><grapheme>A</grapheme>  <phoneme>'eI</phoneme></lexeme>
<lexeme><grapheme>A'asia</grapheme>  <phoneme>a'eIZi@</phoneme></lexeme>
<lexeme><grapheme>A's</grapheme>     <phoneme>'eIz</phoneme></lexeme>
<lexeme><grapheme>AOL</grapheme>     <phoneme>'eI0l</phoneme></lexeme>
<lexeme><grapheme>AOL's</grapheme>   <phoneme>'eI0lz</phoneme></lexeme>
<lexeme><grapheme>Aaberg</grapheme>  <phoneme>'A:b3:g</phoneme></lexeme>
<lexeme><grapheme>Aaberg's</grapheme>    <phoneme>'A:b3:gz</phoneme></lexeme>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:59:30.043

您需要调用[XDocument.Load](http://msdn.microsoft.com/en-us/library/cc838349.aspx)来加载清单流：

```
Dim myXml = XDocument.Load(var)
var.Close() 
```

# javascript - 如何设置元素的位置等于另一个元素的位置？

> ID：14800589
> 
> 赞同：0
> 
> 时间：2013-02-10T17:40:55.867
> 
> 标签：javascript, jquery

简单的问题。如何通过jquery或javascript设置元素的位置等于另一个元素的位置？

以下代码不起作用：

```
$('#credit_tip').css('top', $('.credit').position().top);
$('#credit_tip').css('left', $('.credit').position().left); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:22:55.487

这对我有帮助：

```
$('#credit_tip').css('top', $('.credit').offset().top);
$('#credit_tip').css('left', $('.credit').offset().left); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:03:06.833

仅当您的特定元素位于或已定位时，`left, top, bottom, right`这些位置才会起作用。`relatively``absolutely`

如果您的代码没有以这种方式影响，那么您的 div 的 id of`credit_tip`的位置更有可能没有`relative`or `absolute`。

因此，您可以做的是将 div 定位到`relative`或`absolute`位于`css`：

```
#credit_tip{
     position:relative;
 } 
```

或与`jquery`：

```
$('#credit_tip').css({'top' : $('.credit').position().top, 
                      'left' : $('.credit').position().left,
                      'position':'relative'}); 
```

[在这里看小提琴](http://jsfiddle.net/PJB8N/)

并且可能存在您没有在文档中调用 jquery 库的可能性，或者可能是一些路径错误。因此，为此您可以尝试使用`CDN Hosted`jQuery 库。

[链接到cdn主机](https://developers.google.com/speed/libraries/devguide#jquery)

# php - php - 加一到 xml 节点值

> ID：14800590
> 
> 赞同：-3
> 
> 时间：2013-02-10T17:41:03.777
> 
> 标签：php, html, xml

我在服务器上保存了一个 XML 文件，如下所示。然后，我有一个带有按钮的 HTML 文件，当按下该按钮时，我的 XML 节点值之一必须加一 (+1)。

我对 php 不太了解，所以任何帮助都会很棒。但我需要一个存储在服务器上的简单脚本，它将接收一个 html 请求并将 1 添加到我选择的 XML 节点值。

```
<?xml version="1.0" encoding="UTF-8"?>

<object1>
    <value>10</value>
</object1>

<object2>
    <value>6</value>
</object2> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:21:28.177

尝试这样的事情：

```
$objectX = "2"; // You get this value with $_POST or $_GET ...
$xmlFileName = 'my.xml'; // You're XML file

$xmlFile = file_get_contents($xmlFileName); // Saving the XML contents in a variable
$objects = new SimpleXMLElement($xmlFile);

$objectX = "object".$objectX; // The object name
$objects->$objectX->value++; // Incrementing the value
$objects->asXML($xmlFileName); // Saving the XML

echo $objects->$objectX->value; // echo the value 
```

您必须添加`<objects></objects>`到您的 XML 文件中：

```
<?xml version="1.0" encoding="UTF-8"?>
<objects>
    <object1>
        <value>10</value>
    </object1>
    <object2>
        <value>6</value>
    </object2>
</objects> 
```

# android - 为特定屏幕尺寸设置的图像

> ID：14800593
> 
> 赞同：3
> 
> 时间：2013-02-10T17:41:23.500
> 
> 标签：android, size, screen, drawable

我正在制作一个 android 应用程序，我想使用高度约为屏幕高度 28% 的图像视图（例如，115dp 用于小，127dp 用于正常等）。我应该在我的 res 文件夹中放多少张图片？我应该为 drawable-[size]-[density] 的每个组合制作一个单独的图像，还是只为每个密度制作一个单独的图像？

# php - 将数值数组转换为关联数组

> ID：14800595
> 
> 赞同：-1
> 
> 时间：2013-02-10T17:41:29.427
> 
> 标签：php, json

以下 JSON 结构：

```
{
    "details":
    [
        {"specific_exercise.distance" : "14",},
        {"specific_exercise.avg_pace" : "7.5"}
    ]
} 
```

使用 json_decode() 时转换为此：

```
stdClass Object
(
    [details] => Array
        (
            [0] => stdClass Object
                (
                    [specific_exercise.distance] => 14
                )

            [1] => stdClass Object
                (
                    [specific_exercise.avg_pace] => 7.5
                )
        )
) 
```

相反，我想将其转换为：

```
stdClass Object
(
    [details] => Array
        (
            [specific_exercise.distance] => 14
            [specific_exercise.avg_pace] => 7.5
        )

) 
```

从 json_decode() 结构转换为更有效的 PHP 结构的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:44:18.903

例如，如果您可以控制它，更改您的 JSON 可能会是更好的解决方案

```
{
    "details":
    {
        "specific_exercise.distance" : "14",
        "specific_exercise.avg_pace" : "7.5"
    }
} 
```

**编辑：**

然后你可以使用这个方法：

```
function parseJsonFormat($json)
{
    $json_object = json_decode($json);
    $details_result = array();
    foreach($json_object['details'] as $detail)
    {
         $details_result = array_merge($details_result, get_object_vars($detail));
    }
    $json_object['details'] = $details_result;
    return $json_object;
} 
```

您可以进一步修改该方法以适用于每个数组，而不仅仅是详细信息键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T17:55:45.970

要将多个关联子数组拼凑在一起，请使用：

```
 call_user_func_array("array_merge", (array)$subarray) 
```

在您的情况下，哪里`$subarray`意味着`details`您将结果分配回去。

仅适用于数组，不适用于对象，因此最好先`json_decode`使用第二个参数进行指示。

# c# - 将 3 路径发送到另一个 wpf 窗口

> ID：14800596
> 
> 赞同：0
> 
> 时间：2013-02-10T17:41:29.380
> 
> 标签：c#, wpf, variables, button, binding

我是 WPF 的新手，不管我开始自己的项目是为了每天学习更多。

在我问这个问题之前，我将向您解释我到目前为止所做的事情。

`Mainwindow.xaml`有：

```
"Button" =

private void ModifyButton_Click(object sender, RoutedEventArgs e)
        {
            Window1 win2 = new Window1();
            win2.ShowDialog();
        } 
```

`Window1.xaml`有：

```
"image"
"Buttonlink1" "Buttonlink2" 
```

好的，就是这样。

我现在想做的是：

从`Mainwindow.xaml`“按钮”的按钮单击中，我想发送 3 个路径（变量），用于位于`Window1.xaml`.

这个想法是有许多按钮，`Mainwindow.xaml`每个按钮都代表一个软件错误的修复，这些按钮将保留不同的数据。在“图像”中，我必须发送`.jpg`将显示错误对话框的路径。在“buttonlink1”中，我必须发送`.bat`修复问题的路径。在“buttonlink2”中，我必须发送`.bat`将远程解决问题的路径。

所以我的问题是：我如何将这 3 个变量（路径）从`Mainwindow.xaml`to发送到`window1.xaml`？以及“image”“buttonlink1”“buttonlink2”将如何读取并执行它？

提前感谢您的帮助，对于最终的语法错误，我深表歉意。如果有不清楚的地方，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:40:52.587

在 Window1 中创建 custrom 构造函数，它将接受 3 个变量，如下所示：

```
public Window1(String image, String buttonlink1, String buttonlink2)
{
    //Do something
} 
```

（据我所知，路径是一个字符串？）然后像这样创建新对象：

```
Window1 win2 = new Window1(var1, var2, var3); 
```

# java - 在 Java 中获取系统正常运行时间

> ID：14800597
> 
> 赞同：6
> 
> 时间：2013-02-10T17:41:32.537
> 
> 标签：java, system

如何确定计算机已开机多长时间（以毫秒为单位）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T18:04:47.033

在 Windows 中，您可以执行`net stats srv`命令，在 Unix 中，您可以执行`uptime`命令。必须解析每个输出以获取正常运行时间。该方法通过检测用户的操作系统自动执行必要的命令。

请注意，这两个操作都不会以毫秒精度返回正常运行时间。

```
public static long getSystemUptime() throws Exception {
    long uptime = -1;
    String os = System.getProperty("os.name").toLowerCase();
    if (os.contains("win")) {
        Process uptimeProc = Runtime.getRuntime().exec("net stats srv");
        BufferedReader in = new BufferedReader(new InputStreamReader(uptimeProc.getInputStream()));
        String line;
        while ((line = in.readLine()) != null) {
            if (line.startsWith("Statistics since")) {
                SimpleDateFormat format = new SimpleDateFormat("'Statistics since' MM/dd/yyyy hh:mm:ss a");
                Date boottime = format.parse(line);
                uptime = System.currentTimeMillis() - boottime.getTime();
                break;
            }
        }
    } else if (os.contains("mac") || os.contains("nix") || os.contains("nux") || os.contains("aix")) {
        Process uptimeProc = Runtime.getRuntime().exec("uptime");
        BufferedReader in = new BufferedReader(new InputStreamReader(uptimeProc.getInputStream()));
        String line = in.readLine();
        if (line != null) {
            Pattern parse = Pattern.compile("((\\d+) days,)? (\\d+):(\\d+)");
            Matcher matcher = parse.matcher(line);
            if (matcher.find()) {
                String _days = matcher.group(2);
                String _hours = matcher.group(3);
                String _minutes = matcher.group(4);
                int days = _days != null ? Integer.parseInt(_days) : 0;
                int hours = _hours != null ? Integer.parseInt(_hours) : 0;
                int minutes = _minutes != null ? Integer.parseInt(_minutes) : 0;
                uptime = (minutes * 60000) + (hours * 60000 * 60) + (days * 6000 * 60 * 24);
            }
        }
    }
    return uptime;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-26T18:59:42.850

使用适用于 Windows、Linux 和 Mac OS的[OSHI 库。](https://github.com/oshi/oshi/blob/master/oshi-core/src/main/java/oshi/hardware/CentralProcessor.java)

```
new SystemInfo().getOperatingSystem().getSystemUptime() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-05T02:25:11.987

您可以使用[OSHI](https://github.com/oshi/oshi)库。这是示例代码

```
System.out.println("Uptime: "+FormatUtil.formatElapsedSecs(new oshi.SystemInfo().getOperatingSystem().getSystemUptime())); 
```

为了让它工作，需要添加以下依赖项。

```
<dependency>
    <groupId>com.github.oshi</groupId>
    <artifactId>oshi-core</artifactId>
    <version>4.0.0</version>
</dependency>
<dependency>
    <groupId>net.java.dev.jna</groupId>
    <artifactId>jna-platform</artifactId>
    <version>5.4.0</version>
</dependency>
<dependency>
    <groupId>net.java.dev.jna</groupId>
    <artifactId>jna</artifactId>
    <version>5.4.0</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-10T17:48:59.587

我真的想不出一种不依赖操作系统的方法来做到这一点。一个选项是使用`ManagementFactory.getRuntimeMXBean().getUptime();` which 返回您的 JVM 正常运行时间，因此不完全是您正在寻找的，但已经朝着正确的方向迈出了一步。

你到底想用数据完成什么？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-10T19:36:33.943

对于 Windows，您可以`uptime`通过查询获得毫秒精度`windows WMI`

要运行以下代码，您需要下载[Jawin](http://heanet.dl.sourceforge.net/project/jawinproject/jawinproject/Jawin-2.0-alpha1/jawin-2.0-alpha1.zip)库并添加`jawin.dll`到您的 Eclipse 项目根目录

```
 public static void main(String[] args) throws COMException {
    String computerName = "";
    String userName = "";
    String password = "";
    String namespace = "root/cimv2";

    String queryProcessor = "SELECT * FROM Win32_OperatingSystem";

    DispatchPtr dispatcher = null;

    try {

        ISWbemLocator locator = new ISWbemLocator(
                "WbemScripting.SWbemLocator");
        ISWbemServices wbemServices = locator.ConnectServer(computerName,
                namespace, userName, password, "", "", 0, dispatcher);
        ISWbemObjectSet wbemObjectSet = wbemServices.ExecQuery(
                queryProcessor, "WQL", 0, null);
        DispatchPtr[] results = new DispatchPtr[wbemObjectSet.getCount()];
        IUnknown unknown = wbemObjectSet.get_NewEnum();
        IEnumVariant enumVariant = (IEnumVariant) unknown
                .queryInterface(IEnumVariant.class);

        enumVariant.Next(wbemObjectSet.getCount(), results);

        for (int i = 0; i < results.length; i++) {
            ISWbemObject wbemObject = (ISWbemObject) results[i]
                    .queryInterface(ISWbemObject.class);

            System.out.println("Uptime: "
                    + wbemObject.get("LastBootUpTime"));
        }
    } catch (COMException e) {
        e.printStackTrace();
    } 
```

# c# - Windows 8/C# 应用程序转 PDF

> ID：14800598
> 
> 赞同：0
> 
> 时间：2013-02-10T17:41:56.523
> 
> 标签：c#, pdf, windows-8, drawing

我想做一个应用程序：easypaint。我知道如何将图像（作为原始图层）添加到网格/画布或如何在其上绘图。我的问题是如何将我的网格/画布的内容保存到 pdf 中？有什么方法可以将这样的东西保存为任何流行的格式吗？

如果不可能，我如何在网格上实现“绘图”元素（图像、形状）并将工作导出为 pdf。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:25:38.320

第三方控件是目前要走的路（除了自己实现 PDF 规范）。我已经看到[Foxit SDK for Windows 8 Store apps](http://www.foxitsoftware.com/mswin8metro/)取得了一些成功。

# c++ - 在 C++ 中使用分隔符有效解析多个数字的函数

> ID：14800599
> 
> 赞同：0
> 
> 时间：2013-02-10T17:41:57.297
> 
> 标签：c++, string, error-handling, delimiter

下面的这个函数简单地接受一个用 64 位整数填充的字符串，每个值由一个分隔符分隔，它将被放入向量中。

```
vector<unsigned long long int> getAllNumbersInString(string line, char delim){
    vector<unsigned long long int> v;

    string word;
    stringstream stream(line);
    unsigned long long int num;

    while(getline(stream, word, delim))
        num = atol(word.c_str());
        v.push_back(num);
    }

    return v;
} 
```

例如，当我们将 ',' 作为分隔符时，此函数可以正常工作，但是，如果字符串变量“line”中的数据如下所示，则分隔符将失败：

```
 432   12332    2234   12399 
```

虽然数据似乎使用空格作为分隔符，但使用上面的代码，整个代码将在逻辑上失败。例如，空白之间的空白是未定义的，atol 将返回 0，并将这些零放入向量中。

为了更好地防范这些异常，我应该在这段代码中采取哪些措施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T17:45:24.880

Is there some reason you can't/won't just use something like this?:

```
while (stream >> num)
   v.push_back(num); 
```

or just:

```
vector<unsigned long long int> getAllNumbersInString(string line) { 
    istringstream stream(line);  
    typedef unsigned long long int T;

    vector<T> v((istream_iterator<T>(stream)), istream_iterator<T>());
    return v;
} 
```

If you have to deal with delimiters other than whitespace, you can create a ctype facet to specify what else should be treated as delimiters.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:44:32.960

You can let the iostreams library take care of whitespace for you:

```
unsigned long long int num;
while(stream >> num)
    v.push_back(num); 
```

# java - InvocationTargetException：由 NullPointerException 引起

> ID：14800604
> 
> 赞同：1
> 
> 时间：2013-02-10T17:42:24.053
> 
> 标签：java, android, nullpointerexception

我的应用程序崩溃了。我有错误，我刚刚完成调试，正如标题所说，这就是问题所在。

在调试时，我发现了导致问题的行：

```
listView.setAdapter(arrayAdapter2); 
```

向着底部。[我在这里](https://stackoverflow.com/questions/14678657/arrayadapter-possibly-causes-app-to-crash)之前有一个类似的 nullpointerException 。这次不同了，因为我在正确的区域声明了我的 arrayadapter。在调试进入数组适配器的结果不是 NULL。

我搜索了论坛并找到了这些：

[为什么我会收到 InvocationTargetException？安卓2D游戏](https://stackoverflow.com/questions/8958882/why-am-i-getting-an-invocationtargetexception-android-2d-game)

[另一个空指针异常](http://forums.bukkit.org/threads/java-lang-nullpointerexception-probably-a-stupid-error.8204/)

这些 NullPointerExceptions 在 android 中似乎很常见，但它们是特定于代码的。

在阅读其他信息时，如果我错了，请纠正我，null 可以是的唯一地方是如果`arrayAdapter2`是`NULL`。

```
public class ByZipcode extends Activity{ 
Button btngetLObyzipcode;
Spinner spinner1;
ProgressBar progressBar1;
EditText textinput4byzip;
UserFunctions userFunctions  = new UserFunctions();
ArrayAdapter<String> arrayAdapter2;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.byzipcodepage);
    arrayAdapter2 = new ArrayAdapter<String>(ByZipcode.this,android.R.layout.simple_list_item_1);

    // Initializing spinner with predetermined results
    spinner1 = (Spinner) findViewById(R.id.spinner1);
    progressBar1 = (ProgressBar) findViewById(R.id.progressBar1);
    textinput4byzip = (EditText) findViewById(R.id.textinput4byzip);
    ArrayAdapter<CharSequence> spinnerAdapter = ArrayAdapter.createFromResource(this,
            R.array.byzipspinner, android.R.layout.simple_spinner_item);
    spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner1.setAdapter(spinnerAdapter);

    btngetLObyzipcode = (Button) findViewById(R.id.btngetLObyzipcode);
    btngetLObyzipcode.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if (textinput4byzip.getText() != null & textinput4byzip.getText().toString().length() == 5 ){
                progressBar1.setVisibility(View.VISIBLE);
                new DownloadDataTask().execute();
                }
            }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main_screen, menu);
    return true;
}

private class DownloadDataTask extends AsyncTask<JSONArray, JSONArray, ArrayList<String> > {

        @Override
        protected ArrayList<String> doInBackground(JSONArray... params) {
            String spinValue = spinner1.getSelectedItem().toString();
            //if(textinput4byzip.getText() != null)
            JSONArray json = userFunctions.getCustomerbyZipCode((textinput4byzip.getText().toString()), spinValue);
            ArrayList<String> customers = new ArrayList<String>();
            for(int i=0; i < json.length() ; i++) {
                JSONObject jarray;
                try {
                    jarray = json.getJSONObject(i);
                    String zip = jarray.getString("CustomerName");
                    customers.add(zip);
                    Log.d(zip,"Output");
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            return customers;
        }   
        protected void onPostExecute(ArrayList<String> result){
            ListView listView = (ListView) findViewById(R.id.listView1);
            arrayAdapter2.addAll(result);
            listView.setAdapter(arrayAdapter2);
            progressBar1.setVisibility(View.GONE);
            Intent viewCustomers = new Intent(getApplicationContext(), StoreListView.class);
            viewCustomers.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(viewCustomers);
        }
 } 
```

}

以防万一您感兴趣，失败如下：

```
02-10 17:39:36.976: E/AndroidRuntime(7686): FATAL EXCEPTION: main
02-10 17:39:36.976: E/AndroidRuntime(7686): java.lang.NullPointerException
02-10 17:39:36.976: E/AndroidRuntime(7686):     at     com.example.lo.ByZipcode$DownloadDataTask.onPostExecute(ByZipcode.java:93)
02-10 17:39:36.976: E/AndroidRuntime(7686):     at com.example.lo.ByZipcode$DownloadDataTask.onPostExecute(ByZipcode.java:1)
02-10 17:39:36.976: E/AndroidRuntime(7686):     at android.os.AsyncTask.finish(AsyncTask.java:631)
02-10 17:39:36.976: E/AndroidRuntime(7686):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
02-10 17:39:36.976: E/AndroidRuntime(7686):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
02-10 17:39:36.976: E/AndroidRuntime(7686):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-10 17:39:36.976: E/AndroidRuntime(7686):     at android.os.Looper.loop(Looper.java:137)
02-10 17:39:36.976: E/AndroidRuntime(7686):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-10 17:39:36.976: E/AndroidRuntime(7686):     at java.lang.reflect.Method.invokeNative(Native Method)
02-10 17:39:36.976: E/AndroidRuntime(7686):     at java.lang.reflect.Method.invoke(Method.java:511)
02-10 17:39:36.976: E/AndroidRuntime(7686):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-10 17:39:36.976: E/AndroidRuntime(7686):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-10 17:39:36.976: E/AndroidRuntime(7686):     at dalvik.system.NativeStart.main(Native Method) 
```

根据上述活动的 xml 页面的要求：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/textinput4byzip"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal|center_vertical"
    android:contentDescription="@string/zipcodefielddescription"
    android:ems="10"
    android:gravity="center_vertical|center_horizontal"
    android:inputType="number"
    android:maxLength="@integer/zipcodelength"
    android:textSize="@dimen/LargeFont" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical|center_horizontal"
    android:text="@string/entrzip"
    android:textAlignment="center"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="@dimen/MediumFont" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center_vertical|center_horizontal"
    android:orientation="vertical"
    android:paddingLeft="@dimen/MediumFont"
    android:paddingTop="@dimen/MediumFont" >

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="285dp"
        android:layout_height="308dp"
        android:layout_gravity="center_horizontal|center_vertical"
        android:visibility="gone" />

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal|center_vertical"
        android:entries="@array/byzipspinner"
        android:textAlignment="center" />

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/restaurants"
        android:textSize="@dimen/LargeFont" />

    <CheckBox
        android:id="@+id/checkBox2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="CheckBox"
        android:textSize="@dimen/LargeFont" />

    <CheckBox
        android:id="@+id/checkBox3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="CheckBox"
        android:textSize="@dimen/LargeFont" />

    <CheckBox
        android:id="@+id/checkBox4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="CheckBox"
        android:textSize="@dimen/LargeFont" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center_vertical|center_horizontal"
        android:orientation="vertical"
        android:paddingRight="@dimen/MediumFont" >

        <Button
            android:id="@+id/btngetLObyzipcode"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/getlo"
            android:textSize="@dimen/LargeFont" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T17:53:59.917

```
ListView listView = (ListView) findViewById(R.id.listView1); 
```

您正在寻找`byzipcodepage.xml`带有`ListView`ID的`listView1`。不存在这样的观点；事实上，这种布局根本没有`ListView`。

如果您想要该视图中的列表（供适配器使用），则需要添加它；如果您`ListView`在不同的活动中，您可能需要以不同的方式处理整个情况，以将数据从该活动传递到该活动（可能通过 a `Bundle`）。

# c++ - Git将更新的master合并到一个分支中

> ID：14800606
> 
> 赞同：0
> 
> 时间：2013-02-10T17:42:28.373
> 
> 标签：c++, git, testing, merge

在某个时候，我决定开始对我的 C++ 类进行测试。所以我去了我的主分支并从它分支到一个名为“测试”的新分支。我创建了一个包含一些基本测试的 /tests 文件夹，并在我的 Automake.am 文件中的 check_PROGRAMS 下添加了测试程序名称（我使用 GNU 构建系统，又名 Autotools，作为我的构建系统）。

由于我的项目仍处于早期阶段，因此没有稳定版本。大多数接口仍在构建中，所以现在为所有接口编写完整的测试还为时过早，因为接口会改变，无论如何我都必须重写许多测试。但是我有一个分支，我在其中开发了一些我想测试的或多或少的独立算法。我的 GUI 不完整，但我确实想在编写使用它们的 GUI 之前测试这些算法。

所以我看到的选项是：1.将“测试”合并到master，然后将“master”合并到算法分支2.将“测试”合并到算法分支3.只需在算法分支中创建一个/tests文件夹而不进行任何合并目前

一些分支有一些文件被重命名或删除，因为它是一个早期阶段，所以如果我将 testing/master 合并到算法分支中，我会得到一个包含不相关测试的测试文件夹。但是算法接口是项目的第一部分，完全准备好测试并变得稳定并可以使用，所以如果我不合并，我会得到一个“干净”的测试文件夹，其中现在唯一的测试是一个测试算法，这是第一个具有现成接口的部分，所以我不希望那里发生变化，只是修复我检测到的测试错误。

这里最好的合并/不合并策略是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:02:45.830

为什么要在不同的分支中进行测试？git 中的分支通常用于在项目的并行版本之间切换，例如“稳定”和“开发”。在“有测试的版本”和“没有测试的版本”之间切换的目的是什么？

最有意义的是在所有分支中进行测试。然后你的主分支中的测试不需要工作，因为你的代码还没有完成，你可以让你的算法分支中的测试在主分支之前工作。当你最终让主测试工作时，你可以合并算法分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:46:21.507

我可以想到两个选择：

1.  如果您已经在“测试”分支上进行了一些配置以使测试正常工作，请选择选项 2：

    ```
    Merge "testing" to the "algorithm" branch 
    ```

    这样，您就不会浪费时间再次配置所有内容。

    至于你称之为不相关的测试，如果它们真的不相关，你可以在执行合并之前简单地删除它们。但是检查测试配置是否有效的测试并不是无关紧要的。我不知道这是不是你的情况。

2.  第二种选择是从“算法”创建一个新分支，我们称之为“**算法**2 ”。

    ```
    Merge "testing" into "algorithm2" 
    ```

    如果一切都按您的预期工作，那么您可以删除“算法”分支。这将是一种向您的算法分支引入新更改的安全方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:21:28.867

最好的一般策略是制作持有稳定版本或将成为稳定版本的主分支。1.0, 2.0 ..etc 然后为每个测试或特性创建一个叫做特性分支的东西。删除文件没什么大不了的，因为 git rm 文件将在合并中完成。始终通过拉取请求与主分支 (2.0) 合并

玩得开心。

# sublimetext2 - Sublime Text 2 将光标移出括号、引号或方括号

> ID：14800608
> 
> 赞同：39
> 
> 时间：2013-02-10T17:42:36.273
> 
> 标签：sublimetext2

我需要一种快速的方法来使光标跳到自动换行 qoutes 或其他语法元素之外。我不想每次都必须向下按箭头键，并且绝对不想去我的鼠标。

![在此处输入图像描述](../Images/7496163ad502cf6c4e0f97c8887d55f7.png)

有没有一种快速简便的方法可以为我的工作流程解决这个问题？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-10T18:15:26.790

您可以使用快捷方式（`shift`+`space`或任何您喜欢的方式）来移动光标。

在你的`Key Bindings - User`：

```
{ "keys": ["shift+space"], "command": "move", "args": {"by": "characters", "forward": true} } 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-12-29T07:46:47.427

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-10T19:54:15.523

最好的解决方案是在 Sublime Text 上**录制宏**，然后将其分配给键盘快捷键。按着这些次序：

1.  创建一行如 alert('hello') 并将光标留在字母 'o' 之后。
2.  然后转到*工具 > 录制宏*开始录制。
3.  按`Command`+`→</kbd> to go to the end of line.`
4.  按下`;`并击中`Enter`
5.  通过转到*工具 > 停止录制宏来停止录制宏*
6.  您现在可以通过*工具 > 播放宏*（可选）测试您的宏
7.  通过转到*工具 > 保存宏来保存您的宏*（例如：EndOfLine.sublime-macro）
8.  通过在您的首选项 > 键绑定 - 用户文件中的方括号之间添加此快捷方式来创建快捷方式：

    ```
    {
    "keys": ["super+;"], "command": "run_macro_file", "args": {"file": "Packages/User/EndOfLine.sublime-macro"}
    } 
    ```

9.  现在，每次你点击`Command`+`;`时，它都会神奇地将分号放在当前行的末尾并将光标移动到下一行。

快乐编码！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-14T18:59:31.977

进行键绑定的更完整方法是：

```
 { "keys": ["shift+space"], "command": "move", "args": {"by": "characters", "forward": true}, "context":
        [
            { "key": "following_text", "operator": "regex_contains", "operand": "^[)\"\\]]", "match_all": true },
            { "key": "auto_complete_visible", "operator": "equal", "operand": false }
        ]   
    }, 
```

假设您想要 `shift`+`space`作为快捷方式。或者您也可以将其更改 `tab`为

如在[http://www.sublimetext.com/forum/viewtopic.php?f=3&t=5174#p23086](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=5174#p23086)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-11T22:15:59.450

继 Riccardo Marotti 的帖子之后；

如果您想绕过下一行的括号，可以在 args 部分将“characters”替换为“lines”。

```
{ "keys": ["shift+space"], "command": "move", "args": {"by": "lines", "forward": true} } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-02T01:03:22.543

在戴尔 XPS 上，Ctrl Enter 对我有用

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-03T21:50:54.507

*我只是在名为 run_multiple_commands.py 的插件*的帮助下部分实现了这个功能（见下文）

（**仅在 ST3 上测试过，**但该插件早于 ST3 的第一个版本，应该也可以在 ST2 上运行）。

快捷方式配置如下：

```
{
    "keys": ["shift+space"],
    "command": "run_multiple_commands",
    "args": {
        "commands": [
            {"command": "move", "args": {"by": "characters", "forward": true} }
        ]
    },
    "context":
    [
        { "key": "preceding_text", "operator": "regex_contains", "operand": "[)\\]}'\"]$", "match_all": true},
        { "key": "auto_complete_visible", "operator": "equal", "operand": false }
    ]
},

{
    "keys": ["shift+space"],
    "command": "run_multiple_commands",
    "args": {
        "commands": [
            {"command": "move", "args": {"by": "characters", "forward": true} },
        ]
    },
    "context":
    [
        { "key": "following_text", "operator": "regex_contains", "operand": "^[)\\]}'\"]", "match_all": true },
        { "key": "auto_complete_visible", "operator": "equal", "operand": false }
    ]
},

{
    "keys": ["shift+space"],
    "command": "run_multiple_commands",
    "args": {
        "commands": [
            {"command": "move_to", "args": {"to": "brackets"} },
        ]
    },
    "context":
    [
        { "key": "following_text", "operator": "regex_contains", "operand": "^[(\\[{]", "match_all": true },
        { "key": "auto_complete_visible", "operator": "equal", "operand": false }
    ]
},

{
    "keys": ["shift+space"],
    "command": "run_multiple_commands",
    "args": {
        "commands": [
            {"command": "move_to", "args": {"to": "brackets"} },
            {"command": "move", "args": {"by": "characters", "forward": true} },
        ]
    },
    "context":
    [
        { "key": "following_text", "operator": "not_regex_contains", "operand": "^[)\\]}'\"]", "match_all": true },
        { "key": "preceding_text", "operator": "not_regex_contains", "operand": "[)\\]}'\"]$", "match_all": true},
        { "key": "following_text", "operator": "not_regex_contains", "operand": "^[(\\[{]", "match_all": true },
        { "key": "auto_complete_visible", "operator": "equal", "operand": false }
    ]
}, 
```

`shift+space`四个条件的一个快捷方式 ( )：

1.  光标就在引号或右括号/括号之后：

    向前移动一个字符

2.  光标就在引号或右括号/括号之前：

    向前移动一个字符

3.  光标就在打开括号/括号之前：

    移动到右括号/括号

4.  ！`1`&& ！`2`&& ！`3`：

    移动到右括号/括号

    再向前移动一个角色

`run_multiple_commands.py`要在你的ST中使用这个配置，首先要在你的目录下添加一个名为的文件`.../Package/User/`，其内容是本文第二段*[代码](http://www.sublimetext.com/forum/viewtopic.php?f=5&t=8677 "Run Multiple Commands.. Command")*

该解决方案适合日常使用，但并不完美，因为：

1.  光标无法跳出引号（当光标直接跟随一个时，只需跳过它）。
2.  注释代码块时，光标无法跳出最近的括号、引号或方括号。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-04-18T06:39:45.653

Ctrl + M 是我在 Windows 机器上的默认设置。去做就对了

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-10T18:07:25.840

也许`home`和`end`键就在您的手指附近。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-05-16T07:43:31.530

我使用`ctrl`+`f`将光标向前移动一格。此外，在 mac 上，我`caps lock`与`ctrl`. `caps lock`+`f`更容易到达。它对我来说效果很好。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-06-12T02:12:30.507

我发现了另一种方式，它位于崇高的键绑定本身。基本上，我只是修改了自动关闭括号的键绑定，也就是说，我`"contents": "($0)"`用`"contents": "($1)$0"`. 然后只需点击`Tab`即可摆脱括号。所以我在我的键绑定中添加了以下内容：

```
{ "keys": ["("], "command": "insert_snippet", "args": {"contents": "($1)$0"}, "context":
    [
      { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
      { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
      { "key": "following_text", "operator": "regex_contains", "operand": "^(?:\t| |\\)|]|;|\\}|$)", "match_all": true }
    ]
}, 
```

方括号、大括号以及单引号和双引号也类似。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-06-11T03:05:12.600

```
Ctrl + PgUp Cycle up through tabs

Ctrl + PgDn Cycle down through tabs 
```

这可以到括号的末尾

# ruby - phusion 乘客 nginx 模块在 ubuntu 服务器（12.04.2）上安装错误 64 位由于 g++ --> 内部编译器错误

> ID：14800609
> 
> 赞同：2
> 
> 时间：2013-02-10T17:42:40.517
> 
> 标签：ruby, linux, ubuntu, g++, passenger

**sudo 乘客安装 nginx 模块**

```
--------------------------------------------

Where do you want to install Nginx to?

Please specify a prefix directory [/opt/nginx]:

--------------------------------------------

Compiling Passenger support files...
# /usr/bin/ruby1.8 /usr/local/bin/rake nginx:clean nginx RELEASE=yes
rm -rf ext/common/libboost_oxt.a ext/common/libboost_oxt
rm -rf ext/common/libpassenger_common.a ext/common/libpassenger_common
rm -f agents/PassengerWatchdog agents/PassengerLoggingAgent
rm -rf agents/nginx/PassengerHelperAgent
mkdir -p ext/common/libboost_oxt
g++ -Iext  -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_ALLOCA_H -DHAS_SFENCE -DHAS_LFENCE -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-long-long -Wno-missing-field-initializers -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS -o ext/common/libboost_oxt/aggregate.o -c ext/common/libboost_oxt/aggregate.cpp
In file included from ext/boost/src/pthread/thread.cpp:27:0,
                 from ext/common/libboost_oxt/aggregate.cpp:6:
ext/boost/src/pthread/timeconv.inl: In function âvoid {anonymous}::to_time(int, boost::xtime&)â:
ext/boost/src/pthread/timeconv.inl:22:9: warning: variable âresâ set but not used [-Wunused-but-set-variable]
ext/boost/src/pthread/timeconv.inl: In function âvoid {anonymous}::to_timespec_duration(const boost::xtime&, timespec&)â:
ext/boost/src/pthread/timeconv.inl:59:9: warning: variable âresâ set but not used [-Wunused-but-set-variable]
ext/boost/src/pthread/timeconv.inl: In function âvoid {anonymous}::to_duration(boost::xtime, int&)â:
ext/boost/src/pthread/timeconv.inl:90:9: warning: variable âresâ set but not used [-Wunused-but-set-variable]
ext/boost/src/pthread/timeconv.inl: In function âvoid {anonymous}::to_microduration(boost::xtime, int&)â:
ext/boost/src/pthread/timeconv.inl:112:9: warning: variable âresâ set but not used [-Wunused-but-set-variable]
mkdir -p ext/common/libboost_oxt
rm -rf ext/common/libboost_oxt.a
ar cru ext/common/libboost_oxt.a ext/common/libboost_oxt/aggregate.o
ranlib ext/common/libboost_oxt.a
mkdir -p ext/common/libpassenger_common
g++ -Iext -Iext/common -Iext/libev  -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_ALLOCA_H -DHAS_SFENCE -DHAS_LFENCE -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-long-long -Wno-missing-field-initializers -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS -o ext/common/libpassenger_common/aggregate.o -c ext/common/libpassenger_common/aggregate.cpp
g++: internal compiler error: Killed (program cc1plus)
Please submit a full bug report,
with preprocessed source if appropriate.
See <file:///usr/share/doc/gcc-4.6/README.Bugs> for instructions.
rake aborted!
Command failed with status (4): [g++ -Iext -Iext/common -Iext/libev  -D_REE...]
/var/lib/gems/1.8/gems/passenger-3.0.19/build/cplusplus_support.rb:31:in `compile_cxx'
/var/lib/gems/1.8/gems/passenger-3.0.19/build/common_library.rb:126:in `define_common_library_task'
Tasks: TOP => nginx => agents/nginx/PassengerHelperAgent => ext/common/libpassenger_common.a => ext/common/libpassenger_common/aggregate.o
(See full trace by running task with --trace) 
```

**操作系统**

Ubuntu 服务器 64 位操作系统版本 - 12.04.2（最新更新）

**红宝石-v**

ruby 1.8.7 (2011-06-30 补丁级别 352) [x86_64-linux]

**导轨-v**

导轨版本 - 2.3.16

**乘客--版本**

Phusion 乘客版本 3.0.19

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T12:23:35.760

将 RAM 大小从 256 MB 增加到**1 GB 解决了这个问题**，最初我正在运行一个具有 256 MB RAM 的云实例，这使得 g++ 没有足够的内存来编译。

# c# - 在 C# 中使用 Web 服务

> ID：14800614
> 
> 赞同：0
> 
> 时间：2013-02-10T17:43:08.313
> 
> 标签：c#, web-services, asmx

我刚开始在 C# 中使用一些 API。在我的表单中，我添加了一个服务参考[http://wsf.cdyne.com/WeatherWS/Weather.asmx](http://wsf.cdyne.com/WeatherWS/Weather.asmx)。一切都很好，我可以利用它的图书馆。现在我正在尝试使用例如[http://free.worldweatheronline.com/feed/apiusage.ashx?key=(key](http://free.worldweatheronline.com/feed/apiusage.ashx?key=(key)在这里)&format=xml。[我有钥匙] 现在当我尝试将其用作服务参考时，我无法使用。

我必须在我的表单中调用它而不是引用它吗？或进行某种转换？它的 xml 或 json 类型也有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:01:30.630

ASMX 是一项古老的技术，在底层使用 SOAP。SOAP 不倾向于使用查询字符串参数，它将参数作为消息的一部分。

ASHX 是不同的（它可以是任何东西，它是在 .NET 中编写原始 HTML/XML 页面的一种方式），因此您不能将调用一个方法的方法转移到另一个。它也没有服务引用，很可能您通过原始 HTTP 请求请求它。您需要查阅服务文档以了解如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:20:42.040

`worldweatheronline`不返回 WebService 客户端可使用的 SOAP-XML。因此，您应该像使用许多 REST 服务一样下载响应并对其进行解析。

```
string url = "http://free.worldweatheronline.com/feed/apiusage.ashx?key=" + apikey;

using (WebClient wc = new WebClient())
{
    string xml = wc.DownloadString(url);

    var xDoc = XDocument.Parse(xml);
    var result = xDoc.Descendants("usage")
                    .Select(u => new
                    {
                        Date = u.Element("date").Value,
                        DailyRequest = u.Element("daily_request").Value,
                        RequestPerHour = u.Element("request_per_hour").Value,
                    })
                    .ToList();
} 
```

> ***它的 xml 或 json 类型也有关系吗？***

不，最后你必须自己解析响应。

```
string url = "http://free.worldweatheronline.com/feed/apiusage.ashx?format=json&key=" + apikey;

using (WebClient wc = new WebClient())
{
    string json = wc.DownloadString(url);
    dynamic dynObj = JsonConvert.DeserializeObject(json);
    var jArr  = (JArray)dynObj.data.api_usage[0].usage;
    var result = jArr.Select(u => new
                     {
                         Date = (string)u["date"],
                         DailyRequest = (string)u["daily_request"],
                         RequestPerHour = (string)u["request_per_hour"]
                     })
                    .ToList();
} 
```

PS：我使用[Json.Net](http://json.codeplex.com/)解析json字符串

# mongodb - 在 mongo 数据库中使用用户名作为“主/唯一键”有好处/坏处吗？

> ID：14800615
> 
> 赞同：0
> 
> 时间：2013-02-10T17:43:08.360
> 
> 标签：mongodb, unique-key, bigdata, database

```
User1 {
  _id: "my_user1",
  name: "john smith",
  email: "blah@test.com,
  friends: [
    "my_user2",
    "my_user3",
    "my_user4",
  ]
} 
```

这将是一个例子。我的网站布局是 blah.com/user/。似乎只使用用户名作为数据库的唯一键会更容易。这是否会导致减速或这是错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:45:52.560

通常，您会看到人们使用固定 ID 而不是用户名，原因如下：

*   通常，用户名可能会更改（例如，将我的用户名从“bob”更改为“robert”）
*   ID，尤其是数字 ID，通常可以更有效地存储和索引

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T17:51:37.020

在用户名不经常更改的前提下，使用用户名作为密钥是有好处的。

当您查看用户的个人资料时，您当然希望看到他们的朋友列表。当您将朋友存储为可读名称时，您可以显示此列表而无需额外的数据库查询。但是，当您将它们存储为 ID 时，需要使用附加查询来查找每个朋友的姓名，这可能需要一段时间。

# c# - C# 输出不知何故是程序名和类名

> ID：14800616
> 
> 赞同：1
> 
> 时间：2013-02-10T17:43:13.243
> 
> 标签：c#, string.format

我正在尝试做老师给我的疯狂的格式化指令。经过大概一个小时的阅读（这是我的第一个 C# 程序），我想出了这行代码。

```
`Console.WriteLine(String.Format("{0," + -longestTitle + "} | {1," + -longestAlbumTitle + "} | {2," + -longestArtist + "} | {3:0.00, 8} | {4," + -longestYearAndRating + "} |", songArray[arraySearcher].title, songArray[arraySearcher].albumTitle, songArray[arraySearcher].artist, songArray[arraySearcher].length, songArray[arraySearcher].yearAndRating));` 
```

longX 是一个 int，包含`longestX`( `where x = title`、专辑等) 的字符数。

我想要的输出如下所示：

```
Stuff | morestuff | extrastuff |   5.92 | 1992:R  |
Stuf  | est       | sfafe      | 232.44 | 2001:PG |
S uf  | e         | sfe        |    .44 | 2001:G  | 
```

（所有填充都是根据用户或文件输入的最长标题动态确定的）。

我得到的输出如下所示：

```
Program_Example.ClassName
Program_Example.ClassName 
```

（或者，特别是 Tyler_Music_Go.Song）

我用`songArray[arraySearcher]`同样的方法打印了 .title ，效果很好。

有人可以帮我吗？

完整的相关代码：

```
class Song {
    public string title, albumTitle, yearAndRating, artist;
    public float length;

    public Song(string titl, string albumTitl, string art, float leng, string yrNRating) 
    {
        title = titl;
        albumTitle = albumTitl;
        yearAndRating = yrNRating;
        length = leng;
        artist = art;
    }
}

//This class contains a Song array (with all Songs contained within), an array index, a search index, and ints to determine the longest of each category.
class SongList 
{
    Song[] songArray;
    private int arrayKeeper, longestTitle, longestArtist, longestAlbumTitle, longestYearAndRating, checker;
    int arraySearcher = 0;

    public SongList() 
    {
        songArray = new Song[10000];
        arrayKeeper = 0; 
        longestTitle = 0;
        longestArtist = 0;
        longestAlbumTitle = 0;
        longestYearAndRating = 0;
    }

    public void AddSong(string title, string albumTitle, string artist, float length, string yearAndRating)
    {
        songArray[arrayKeeper] = new Song(title, albumTitle, artist, length, yearAndRating);
        arrayKeeper++;
        checker = 0;

        //This section of code is responsible for formatting the output. Since the longest values are already known, the list can be displayed quickly. 
        //Once a song is deleted, however, previously calculated longest lengths still stand.
        foreach (char check in title)
        {
            checker++;
        }
        if (checker > longestTitle)
        {
            longestTitle = checker;
        }

        foreach (char check in albumTitle)
        {
            checker++;
        }
        if (checker > longestAlbumTitle)
        {
            longestAlbumTitle = checker;
        }

        foreach (char check in artist)
        {
            checker++;
        }
        if (checker > longestArtist)
        {
            longestArtist = checker;
        } 

        foreach (char check in yearAndRating)
        {
            checker++;
        }
        if (checker > longestYearAndRating)
        {
            longestYearAndRating = checker;
        } 

    }

    //public bool RemoveSong(string title)
   // {
    //}

    public void DisplayData()
    {
        Console.WriteLine("|          Title          |          Album Title          |          Artist          |          Length           |          Year and Rating          |");
        for (arraySearcher = 0; arraySearcher < arrayKeeper; arraySearcher++)
        {
            //This line for testing purposes. (works)
            Console.WriteLine(songArray[arraySearcher].title);
            Console.WriteLine(songArray[arraySearcher].ToString());
        }
    }

    public override string ToString() 
    {
        //This line for testing purposes. (works)
        Console.WriteLine(songArray[arraySearcher].title);
        return String.Format("{0," + -longestTitle + "} | {1," + -longestAlbumTitle + "} | {2," + -longestArtist + "} | {3:0.00, 8} | {4," + -longestYearAndRating + "} |", songArray[arraySearcher].title, songArray[arraySearcher].albumTitle, songArray[arraySearcher].artist, songArray[arraySearcher].length, songArray[arraySearcher].yearAndRating);
    }
} 
```

`

编辑：

好吧，现在我觉得所有庄园的愚蠢。我正在覆盖 SongList 的 tostring() 方法，然后为 Song 调用 tostring 方法。回答的人让我意识到了这一点。不过感谢所有给我建议的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:51:48.233

您必须直接访问一个属性 ( `songVariable.Title`) 或`ToString()`在您的歌曲类中覆盖以输出标题。

```
public class Song
{
    public string Title {get; set;}

    public override string ToString()
    {
        return Title;
    }
} 
```

# xcode - Cocos2d Spritesheet 未加载（spriteWithSpriteFrameName）

> ID：14800620
> 
> 赞同：2
> 
> 时间：2013-02-10T17:43:34.760
> 
> 标签：xcode, cocos2d-iphone, ccsprite, ccspritebatchnode

我是 cocos2d 的菜鸟，在开发过程中不断学习。我在 cocos2d 文档和 Ray Wenderlich 教程中阅读过，我尝试创建精灵表，但到目前为止，我无法从我创建的精灵表中加载任何我的精灵。当我直接使用普通的 CCSprite spriteFromFile: 时，精灵显示得很好。无论如何，我在 Zwoptex 中创建了 spritesheet。我选择 png 文件和坐标作为 Cocos2d .plist。将两个文件（png 和 plist）拖放到我的项目资源组中，并在 init 方法中编写以下代码。

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"piece.plist"];
CCSpriteBatchNode *pieceSpriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"piece.png"];
[self addChild:pieceSpriteSheet];

CCSprite *block = [CCSprite spriteWithSpriteFrameName:@"pieceB1.png"]; 
```

我已经检查了文件的名称，大小写，甚至多次重新制作了spritesheet，但是cocos2d仍然无法加载pieceB1.png，即使它在plist和png中。这是 plist 文件的屏幕截图：

![在此处输入图像描述](../Images/84894f85e2f61b78bc2c486742dac732.png)

我得到的错误：

```
2013-02-11 01:33:04.808 sequence[5787:12203] cocos2d: CCSpriteFrameCache: Trying to use file 'piece.png' as texture 
2013-02-11 01:33:04.815 sequence[5787:12203] cocos2d: CCSpriteFrameCache: Frame 'pieceB1.png' not found 
2013-02-11 01:33:04.818 sequence[5787:12203] cocos2d: Frame interval: 1 
2013-02-11 01:33:04.822 sequence[5787:12203] Application windows are expected to have a root view controller at the end of application launch 
2013-02-11 01:33:04.822 sequence[5787:12203] cocos2d: surface size: 640x960 
2013-02-11 01:33:07.044 sequence[5787:12203] cocos2d: CCSpriteFrameCache: Frame 'pieceG1.png' not found 
2013-02-11 01:33:07.045 sequence[5787:12203] *** Assertion failure in +[CCSprite spriteWithSpriteFrameName:] 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T18:13:25.710

您是否确认您的文件在目标中？另外，您的游戏是否支持高清？如果是，您的 plist 和 png 文件都应适当添加后缀。如果找不到文件，“addSpriteFramesWithFile”调用会静默失败。

# python - Python Error Typerror in first script (NEW request at bottom)

> ID：14800623
> 
> 赞同：0
> 
> 时间：2013-02-10T17:43:39.353
> 
> 标签：python

The point of the script is to tell you what day of the week it will be after 'X' amount of days from a given day.

I've been learning how to code for a few hours so bear with me.

```
 # Prompt the user for input
print("This scipt is useful in finding out what day of the week it \
will be after 'X' ammount of days in relation to the current date.")
sunday = Sunday = 0
monday = Monday = 1
tuesday = Tuesday = 2
wednesday = Wednesday = 3
thursday = Thursday = 4
friday = Friday = 5
saturday = Saturday = 6
print(" ")
todaysDate = input("Enter todays date: ")
daysFromToday = int(input("Enter a integer for days from today: "))

# Compute equasion

daysFromDate = ((todaysDate + daysFromToday) % 7)

# Display results
print(" ")
print("Today is", todaysDate, "and in", daysFromToday, "days it will be", daysFromDate)
print("  ")
print("Sunday = 0, \
Monday = 1, \
Tuesday = 2, \
Wednesday = 3, \
Thursday = 4, \
Friday = 5,   \
Saturday = 6")
input("Press enter to close: ") 
```

My error is

```
Traceback (most recent call last):
  File "C:\Desktop\daysfromdate.py", line 18, in <module>
    daysFromDate = ((todaysDate + daysFromToday) % 7)
TypeError: Can't convert 'int' object to str implicitly 
```

I fixed by using

```
todaysDate = eval(input("Enter todays date: ")) 
```

now my script runs fine, but last question is how do I make it answer with the word version of the variables?

Current output is

```
Today is 0 and in 100 days it will be 2 
```

I would like it to be

```
Today is Sunday in 100 days it will be Tuesday 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:47:04.047

我认为您使用的是 Python 3.x？如果是这样，那么

```
todaysDate = input("Enter todays date: ") 
```

将返回一个字符串 ( `str`) 对象，您应该像对`daysFromToday`. IE，

```
todaysDate = int(input("Enter todays date: ")) 
```

（在较旧的 Python 版本中，`input`会为您执行此转换。）

**编辑**：好的，我明白你在做什么。请考虑*不要*为此使用`eval`，因为这`eval`是一个非常不安全的结构，允许用户执行任意代码。更清洁的解决方案是：

```
weekdays = {"sunday": 0,
            "monday": 1,
            ...
            "saturday": 6}
dayoftheweek = weekdays[input("Enter the day of the week: ")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:50:46.393

您的代码实际上在我的 python 版本上运行，但是您的问题可能与您的变量“todaysDate”有关，您尚未将其转换为 int。尝试改变：

```
todaysDate = input("Enter todays date: ") 
```

至：

```
todaysDate = int(input("Enter todays date: ")) 
```

看看是否有帮助。

# azure - How to perform a Windows Azure Backup?

> ID：14800626
> 
> 赞同：0
> 
> 时间：2013-02-10T17:43:51.843
> 
> 标签：azure, azure-sql-database, azure-storage, azure-table-storage, azure-blob-storage

I'm starting using Windows Azure to manipulate my azure databases. I don't have experienced in IT world, I'm just looking a way to backup my database (preferibly in a local computer) and restore it.

I started reading from here: [http://msdn.microsoft.com/en-us/library/jj650016.aspx#copy](http://msdn.microsoft.com/en-us/library/jj650016.aspx#copy)

And I ran this code:

```
CREATE DATABASE destination_database_name 
AS COPY OF [source_server_name].source_database_name 
```

But I'm not sure if it's working, in the next image, `contoso2` is my original database and the another is the copy, and this one does not have any table from the original source.

![enter image description here](../Images/81c7e5aba9712105bcc446d9e7fd1979.png)

So, please guide about how to backup my datases not using commercial products. If you need additional data, please let me know.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:25:44.733

您有可用的第三方产品；其中一些不需要您购买任何东西。[这是一个很好的总结](http://blogs.msdn.com/b/davidmcg/archive/2011/09/29/data-backup-strategies-for-windows-and-sql-azure.aspx)，仍然有效。您还可以使用 Windows Azure 管理门户提供的导出/导入功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:58:55.850

我建议阅读[Windows Azure SQL 数据库中的业务连续性，](http://msdn.microsoft.com/en-us/library/windowsazure/hh852669.aspx)它解释了可供您使用的底层基础架构以及两种主要的备份机制 - ocpy 数据库和导出/导入

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T13:43:28.413

好吧，如果您使用的是 Sql Server 2012，这很容易。如果您不是，那么您可以安装 express 版本。

1.  [在 windows azure 的新门户https://manage.windowsazure.com](https://manage.windowsazure.com)中选择要备份的数据库
2.  在页脚中，您可以选择导入/导出。点击导出。这将打开一个模式弹出窗口。选择要使用的存储帐户并键入适当的名称以保存 *.bacpac 文件。
3.  文件保存到存储后，下载到本地，打开 sql server 2012 management studio。选择数据库服务器。右键单击它，在上下文菜单中您将找到 Import Data-Tier Application。从您本地选择 bacpac 文件并按照设置进行操作。

最后，您的数据将驻留在本地计算机上。

# c++ - read memory of another process using address of variable

> ID：14800627
> 
> 赞同：1
> 
> 时间：2013-02-10T17:43:52.167
> 
> 标签：c++, multithreading, c++builder, access-violation, ram

I want to read memory of process A but when the process A is disposed. I have run A, it displays address of some variable, I closed it.

I have run B where I input address of A's variable. It causes error "Access violation...".

I use Borland C++ builder and Windows 7\.

Is there any way to watch ram when process is closed? Maybe some tools will help me. Could you give me names of tools to read memory by absolute address after memory deallocation?
Maybe it should be some sort of leak detectors?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:46:04.387

我不知道它关闭后，但在运行时，你可以使用`ReadProcessMemory()`with`CreateRemoteThread`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T17:46:27.143

在大多数系统上，独立的进程存在于完全独立的*虚拟地址空间*中。您在一个进程中看到的指针在另一个进程中完全没有意义。

因此，如果你想这样做，你必须明确地共享内存；我不是 Windows 专家，但我相信这[`CreateSharedMemory()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa374778%28v=vs.85%29.aspx)可能是您需要的。

# xml - R XML 包没有获取页面上的所有信息

> ID：14800628
> 
> 赞同：0
> 
> 时间：2013-02-10T17:43:53.980
> 
> 标签：xml, r, parsing

我在导入包含使用（我怀疑的）javascript 填充的表的网站的 html 时遇到问题。如果我将网站作为源代码保存在我的 HD 上，我可以使用 R 中的 XML 包轻松地做我想做的事；如果我尝试直接使用阅读该网站

```
doc <- htmlTreeParse(url) 
```

表中的数据丢失。我怀疑这是因为 htmlTreeParse 不处理并发请求。有没有办法让 xml 包请求“完整”网站？

我已经能够使用 Python 和 urllib2 库获得完整的 html

```
req = urllib2.Request('http://www.theURL.com')
response = urllib2.urlopen(req)
the_page = response.read() 
```

但我更愿意坚持使用 R。

我一直在搞乱的网站是[http://bigcharts.marketwatch.com/reports/bigmovers.asp?date=20130104&data=1&start=1&report=1&report_country_code=US](http://bigcharts.marketwatch.com/reports/bigmovers.asp?date=20130104&data=1&start=1&report=1&report_country_code=US)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:15:30.983

使用 Gsee 评论我得到了这个，

```
url.xml <- 'http://bigcharts.marketwatch.com/reports/bigmovers.asp?date=20130104&data=1&start=1&report=1&report_country_code=US'
dat <- readHTMLTable(url.xml)
  dat[[1]]
   Rank                      Company Name Symbol Go to: % Increase in Price     Volume Closing Price Price Change P/E Ratio
1     1             US Airways Group Inc.    LCC                      7.83% 12,049,183         14.73        +1.07       N/A
2     2                         Yelp Inc.   YELP                      6.80%  1,966,749         21.52        +1.37       N/A
3     3  Arcos Dorados Holdings Inc. Cl A   ARCO                      6.69%  2,613,174         13.72        +0.86       N/A
4     4 Thompson Creek Metals Co. Inc. Un  TC.PT                      6.21%     30,188         22.05        +1.29       N/A
5     5 Nationstar Mortgage Holdings Inc.    NSM                      6.13%  3,054,272         33.23        +1.92       N/A
6     6        Consolidated Graphics Inc.    CGX                      6.05%     60,052         36.31        +2.07       N/A
7     7         Bonanza Creek Energy Inc.   BCEI                      5.95%  1,268,468         30.10        +1.69       N/A
8     8                    Huntsman Corp.    HUN                      5.72%  9,176,196         17.74        +0.96       N/A
9     9             Assured Guaranty Ltd.    AGO                      5.54%  1,853,300         15.62        +0.82       N/A
10   10              Dollar General Corp.     DG                      5.36%  8,772,419         44.60        +2.27       N/A 
```

也许您需要强制`Volume`转换为数字。

```
as.numeric(gsub("[^0-9.-]+","",dat[[1]]$Volume))
 [1] 12049183  1966749  2613174    30188  3054272    60052  1268468  9176196  1853300  8772419 
```

# php - Jquery pass parameter from script tag

> ID：14800632
> 
> 赞同：0
> 
> 时间：2013-02-10T17:44:19.857
> 
> 标签：php, javascript, jquery, variables, parameter-passing

Hi guys I just want to know is there any possibility to pass variables from

```
<script src="js/scripts.js"></script> 
```

this tag? I mean something like this:

```
<script src="js/scripts.js">$par = "hello world"</script>
or
<script src="js/scripts.js" par="hello world"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:53:55.677

你绝对可以两者都做（为什么你想要这是另一个问题）。

[关于第一个选项，您将在John Resig](http://ejohn.org/blog/degrading-script-tags/)的这篇文章中找到更详细的解释。

至于第二个选项，看看[dojo 工具包](http://dojotoolkit.org)，他们经常使用它（他们称之为声明式方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:49:21.617

不需要或使用像您一样定义变量。

尝试这个：

```
<script>var par = "<?php echo $par; ?>"</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T17:52:17.323

```
<script type="text/javascript">
    /* <![CDATA[ */
    var par = "<?php echo $par; ?>";
    /* ]]> */
</script>
<script src="js/scripts.js"></script> 
```

然后可以在脚本中访问变量“par”。

# java - Origin of Java.awt.component for MouseEvent.getX()

> ID：14800633
> 
> 赞同：0
> 
> 时间：2013-02-10T17:44:21.197
> 
> 标签：java, swing, mouseevent, mouselistener

I am trying to calculate the distance I move a mouse within a box, I am using the MouseEvent.getX() and MouseEvent.getY() to calculate the start position of the mouse and then I have another method saving the position and calculating the distance the mouse has moved. Here is some code I wrote to demonstrate this.

```
BlankArea.addMouseMotionListener(new MouseMotionListener(){
            @Override
            public void mouseMoved(MouseEvent mm){
                System.out.println("Position (" + mm.getX() + ", " 
                                                + mm.getY() + ")");
                savePosition(mm.getX(), mm.getY());
            }

            @Override
            public void mouseDragged(MouseEvent md) {
                System.out.println("Position (" + mm.getX() + ", " 
                                                + mm.getY() + ")");
                savePosition(mm.getX(), mm.getY());
            }
        }); 
```

My Question is: The Java API states that getX() & getY() returns the horizontal & vertical coordinate relative to the source component respectively. What is the source component? What unit is the output coordinate measured in?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:48:19.280

欢迎来到 Stack Overflow... 源组件实际上是您为其编写侦听器的组件，输出坐标以像素为单位...

我希望这会有所帮助...如果您仍有疑问，请询问他们...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:17:51.907

要回答您的问题：

1）什么是源组件？

就像 Mr.777 说的那样，它是您添加侦听器的组件，所以在您的示例中它是`BlankArea`.

2) 输出坐标的测量单位是什么？

正如 777 先生所说，它们以像素为单位，原点 (0, 0) 位于组件的左上角。

我建议在线阅读一些 Java 教程。这是查看 Java 坐标系[Coordinates (Java Tutorial)](http://docs.oracle.com/javase/tutorial/2d/overview/coordinate.html)的好页面。

# spring - JPA with Spring MVC Configured via Annotations

> ID：14800640
> 
> 赞同：5
> 
> 时间：2013-02-10T17:45:01.263
> 
> 标签：spring, jpa, spring-mvc

I am trying to create a Spring MVC application leveraging JPA for its persistence layer. Unfortunately, I was getting a NullPointerException when accessing the EntityManager as Spring does not appear to be injecting it. My configuration is all annotation-based with @EnableWebMvc. After some searching, I added @Transactional on my DAO and @EnableTransactionManagement on my @Configuration class. Then I got an error about not having a DataSource. Supposedly, a class with @EnableTransactionManagement needs to implement TransactionManagementConfigurer. However, I am having problems figuring out how to create the DataSource as well as why it cannot get it from my persistence.xml.

I would greatly appreciate any help in trying to get the EntityManager injected into my DAO.

**My @Configuration class**

```
@Configuration
@EnableWebMvc
@EnableTransactionManagement
@ComponentScan("com.example.myapp")
public class MvcConfig extends WebMvcConfigurerAdapter 
        implements TransactionManagementConfigurer {

private static final boolean CACHE_ENABLED = true;
private static final String TEMPLATE_PATH = "/WEB-INF/freemarker";
private static final String TEMPLATE_SUFFIX = ".ftl";

private static final Logger LOG = Logger.getLogger( MvcConfig.class );

@Override
public void addResourceHandlers( ResourceHandlerRegistry registry ) {
    registry.addResourceHandler( "/stylesheets/**" ).addResourceLocations( "/stylesheets/" );
}

@Bean
public FreeMarkerConfigurer configureFreeMarker() {
    final FreeMarkerConfigurer configurer = new FreeMarkerConfigurer();
    configurer.setTemplateLoaderPath( TEMPLATE_PATH );
    return configurer;
}

@Bean
public ViewResolver configureViewResolver() {
    final FreeMarkerViewResolver resolver = new FreeMarkerViewResolver();
    resolver.setCache( CACHE_ENABLED );
    resolver.setSuffix( TEMPLATE_SUFFIX );
    return resolver;
}

@Bean
@Override
public PlatformTransactionManager annotationDrivenTransactionManager() {
    return new DataSourceTransactionManager();
}

} 
```

**My DAO**

```
@Component
@Transactional
public class MyDAO {

    private static final Logger LOG = Logger.getLogger( MyDAO.class );

    @PersistenceContext
    private EntityManager entityManager;

    public MyClass getMyClass() {
        LOG.debug( "getMyClass()" );
        final CriteriaQuery<MyClass> query = criteriaBuilder.createQuery( MyClass.class );
        // more code here, but it breaks by this point
        return myData;
    }

} 
```

**My Updated Code**

I have reached the point in which it almost all works. The EntityManager is being injected properly. However, transactions are not working. I get errors if I try to use a RESOURCE_LOCAL approach so I am looking at JTA managed transactions. When I add @Transactional on any of my DAO methods, I get a "Transaction marked for rollback" error with no further details in any log files to assist troubleshooting. If I remove the annotation from a basic read-only select, the select will work perfectly fine (not sure if I should even be putting the annotation on select-only methods). However, I obviously need this working on methods which perform db writes. If I debug through the code, it seems to retrieve the data perfectly fine. However, as it returns from the method, the javax.transaction.RollbackException gets thrown. From my understanding of everything, it seems as if the exception occurs in the AOP post-method processing.

**My @Configuration class**

```
@Configuration
@EnableWebMvc
@EnableTransactionManagement
@ComponentScan("com.example.myapp")
public class MvcConfig extends WebMvcConfigurerAdapter {

private static final boolean CACHE_ENABLED = true;
private static final String TEMPLATE_PATH = "/WEB-INF/freemarker";
private static final String TEMPLATE_SUFFIX = ".ftl";

private static final Logger LOG = Logger.getLogger( MvcConfig.class );

@Override
public void addResourceHandlers( ResourceHandlerRegistry registry ) {
    registry.addResourceHandler( "/stylesheets/**" ).addResourceLocations( "/stylesheets/" );
}

@Bean
public FreeMarkerConfigurer configureFreeMarker() {
    final FreeMarkerConfigurer configurer = new FreeMarkerConfigurer();
    configurer.setTemplateLoaderPath( TEMPLATE_PATH );
    return configurer;
}

@Bean
public ViewResolver configureViewResolver() {
    final FreeMarkerViewResolver resolver = new FreeMarkerViewResolver();
    resolver.setCache( CACHE_ENABLED );
    resolver.setSuffix( TEMPLATE_SUFFIX );
    return resolver;
}

@Bean
public PlatformTransactionManager transactionManager() {
    return new JtaTransactionManager();
}

@Bean
public AbstractEntityManagerFactoryBean entityManagerFactoryBean() {
    LocalEntityManagerFactoryBean factory = new LocalEntityManagerFactoryBean();
    factory.setPersistenceUnitName( "my_db" );
    return factory;
}

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T18:31:21.553

在我的应用程序中，我没有实现 TransactionManagerConfigurer 接口。我使用下一个代码来配置 JPA（使用 Hibernate 实现）。您可以在配置类中执行相同的操作。

```
 @Bean
    public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean() {
        LocalContainerEntityManagerFactoryBean factoryBean = 
                new LocalContainerEntityManagerFactoryBean();

        factoryBean.setDataSource(dataSource());
        factoryBean.setPackagesToScan(new String[] {"com.dimasco.springjpa.domain"});

        HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();
        vendorAdapter.setShowSql(true);
        //vendorAdapter.setGenerateDdl(generateDdl)

        factoryBean.setJpaVendorAdapter(vendorAdapter);

        Properties additionalProperties = new Properties();
        additionalProperties.put("hibernate.hbm2ddl.auto", "update");

        factoryBean.setJpaProperties(additionalProperties);

        return factoryBean;
    }

    @Bean
    public DataSource dataSource() {
        final ComboPooledDataSource dataSource = new ComboPooledDataSource();

        try {
            dataSource.setDriverClass(driverClass);
        } catch (PropertyVetoException e) {
            throw new RuntimeException(e);
        }

        dataSource.setJdbcUrl(jdbcUrl);
        dataSource.setUser(user);
        dataSource.setPassword(password);
        dataSource.setMinPoolSize(3);
        dataSource.setMaxPoolSize(15);
        dataSource.setDebugUnreturnedConnectionStackTraces(true);

        return dataSource;
    }

    @Bean
    public PlatformTransactionManager transactionManager() {
        JpaTransactionManager transactionManager = new JpaTransactionManager();
        transactionManager.setEntityManagerFactory(entityManagerFactoryBean().getObject());

        return transactionManager;
    }

    @Bean
    public PersistenceExceptionTranslationPostProcessor exceptionTranslation(){
        return new PersistenceExceptionTranslationPostProcessor();
    } 
```

希望对你有帮助）

**编辑：**

您可以使用 JNDI 查找来获取数据源：

```
@Bean
public DataSource dataSource() throws Exception {
   Context ctx = new InitialContext();
   return (DataSource) ctx.lookup("java:comp/env/jdbc/datasource");
} 
```

您可以[在本文](http://www.swiftmind.com/de/2011/06/22/spring-3-1-m2-testing-with-configuration-classes-and-profiles/)中找到更多详细信息。有 JndiDatasourceConfig 类的示例。

**编辑 2：** 我在我的项目中使用了 persistence.xml，但它是空的：

```
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="JPA_And_Spring_Test">
    </persistence-unit>
</persistence> 
```

而且我没有在我的 java 配置中指定任何持久单元名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:37:02.223

以下可能会有所帮助，即使它使用基于 XML 的配置：

[https://github.com/springinpractice/sip13/blob/master/helpdesk/src/main/resources/spring/beans-repo.xml](https://github.com/springinpractice/sip13/blob/master/helpdesk/src/main/resources/spring/beans-repo.xml)

它使用 Spring Data JPA，但您不必这样做。利用

```
 @PersistenceContext private EntityManager entityManager; 
```

（但请考虑 Spring Data JPA，因为它提供了非常强大的开箱即用的 DAO。）

旁注：对于 DAO，`@Repository`支持`@Component`. 两者都适用于组件扫描，但`@Repository`更好地描述了预期用途。

# android - Custom XML attributes without custom View in Fragment

> ID：14800642
> 
> 赞同：6
> 
> 时间：2013-02-10T17:45:01.670
> 
> 标签：android, android-fragments, android-view, android-xml, android-custom-attributes

I'm trying to add custom XML attributes in existing View

Adding them to a custom View is not a big deal but I don't know how to access those attributes in a "basic" View (e.g. TextView, LinearLayout, ImageView ...)

And this is more difficult when there are Fragment and / or Library project involved

So far here is my code

Customs attributes definitions and XML (attrs.xml and the layout):

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<declare-styleable name="StarWars">
    <attr name="jedi" format="string" />
    <attr name="rank" format="string" />
</declare-styleable> 
```

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:sw="http://schemas.android.com/apk/res-auto"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

<TextView
    android:id="@+id/name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="28dp"
    android:gravity="center_horizontal"
    sw:jedi="Obiwan" />

<TextView
    android:id="@+id/rank"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="28dp"
    android:gravity="center_horizontal"
    sw:rank="Master" /> 
```

Since I inflate this on an Fragment (so no onCreate with attrs arg !), the only way to try to get the 2 sw custom attributes is to :

1.  Set a custom LayoutInflater.Factory to the Fragment LayoutInflater in onCreateView

    ```
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
      super.onCreateView(inflater, container, savedInstanceState);

      LayoutInflater layoutInflater = inflater.cloneInContext(inflater.getContext());
      layoutInflater.setFactory(new StarWarsLayoutFactory());

      View fragmentView = layoutInflater.inflate(R.layout.jedi, container, false);
      ((TextView) fragmentView.findViewById(android.R.id.jedi)).setText("Yep");

      return fragmentView;
    } 
    ```

2.  Trying to get the custom attributes on the custom LayoutInflater.Factory :

    ```
    public class StarWarsLayoutFactory implements Factory {
      @Override
      public View onCreateView(String name, Context context, AttributeSet attrs) {
                  *** What to do here ? ***

          return null;
      }
    } 
    ```

Anyone have had this kind of question ?

What I'm missing here ?

Thx in advance !

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:37:09.240

我终于做到了：）

您必须像我在 OP 上所做的那样创建一个新`LayoutInflater.Factory`的，但由于工厂用于所有膨胀的布局视图，并且您必须在您的`Factory.onCreateView`（让 Android 处理膨胀）上返回 null，您必须在某处缓存您的自定义 XML 属性

所以这里的解决方案：

*   您的布局 XML 视图必须具有和 android:id

*   创建将保留您的自定义属性的类：

```
 public class AttributeParser {

    private AttributeParserFactory mFactory;
    private Map<Integer, HashMap<Integer, String>> mAttributeList;

    private class AttributeParserFactory implements LayoutInflater.Factory{
        @Override
        public View onCreateView(String name, Context context, AttributeSet attrs) {
            String id = attrs.getAttributeValue("http://schemas.android.com/apk/res/android", "id");

            if(id != null){
                // String with the reference character "@", so we strip it to keep only the reference
                id = id.replace("@", "");

                TypedArray libraryStyledAttributeList = context.obtainStyledAttributes(attrs, R.styleable.NewsHubLibrary);
                HashMap<Integer, String> libraryViewAttribute = new HashMap<Integer, String>();
                int i = 0;

                for(int attribute : R.styleable.NewsHubLibrary){
                    String attributeValue = libraryStyledAttributeList.getString(i);

                    if(attributeValue != null)
                        libraryViewAttribute.put(attribute, attributeValue);

                    i++;
                }

                if(!libraryViewAttribute.isEmpty())
                    mAttributeList.put(Integer.valueOf(id), libraryViewAttribute);

                libraryStyledAttributeList.recycle();
            }

            return null;
        }

    }

    public AttributeParser(){
        mAttributeList = new HashMap<Integer, HashMap<Integer, String>>();
        mFactory = new AttributeParserFactory();
    }

    public void clear() {
        mAttributeList.clear();
    }

    public LayoutInflater getLayoutInflater(LayoutInflater inflater) {
        clear();
        LayoutInflater layoutInflater = inflater.cloneInContext(inflater.getContext());
        layoutInflater.setFactory(mFactory);

        return layoutInflater;
    }

    public void setFactory(LayoutInflater inflater){
        inflater.cloneInContext(inflater.getContext()).setFactory(mFactory);
    }

    public void setViewAttribute(Activity activity) {
        for(Entry<Integer, HashMap<Integer, String>> attribute : mAttributeList.entrySet())
            if(activity.findViewById((Integer) attribute.getKey()) != null)
                activity.findViewById((Integer) attribute.getKey()).setTag(attribute.getValue());

    }

    public void setViewAttribute(View view) {
        for(Entry<Integer, HashMap<Integer, String>> attribute : mAttributeList.entrySet())
            if(view.findViewById((Integer) attribute.getKey()) != null)
                view.findViewById((Integer) attribute.getKey()).setTag(attribute.getValue());
    }

    public Map<Integer, HashMap<Integer, String>> getAttributeList() {
        return mAttributeList;
    }

    public void setAttributeList(Map<Integer, HashMap<Integer, String>> attributeList) {
        this.mAttributeList = attributeList;
    }
    } 
```

*   当您使用 AttributeParser 时，您的自定义属性将存储在每个 View 标记中：

```
 LayoutInflater layoutInflater = mAttributeParser.getLayoutInflater(inflater);
    View view = layoutInflater.inflate(R.layout.jedi, null);
    mAttributeParser.setViewAttribute(view); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:58:00.780

标准`TextView`等不会访问这些属性。您可以扩展它并提供包括读取这些自定义属性的功能。

```
TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.StarWars, 0, 0);

String jedi = a.getText(R.styleable.StarWars_jedi);
String rank = a.getText(R.styleable.StarWars_rank);

a.recycle(); 
```

记得总是`recycle()`在最后打电话。

# android - Get elements from BaseAdapter

> ID：14800649
> 
> 赞同：0
> 
> 时间：2013-02-10T17:45:25.820
> 
> 标签：android, android-gridview, baseadapter

I'd like to get elements added in a GridView with a BaseAdapter.

Here is my code :

```
GridView grid_ordi = (GridView)findViewById(R.id.grid_ordi);
CaseAdapter casesOrdi = new CaseAdapter(this, newWidth);
grid_ordi.setAdapter(casesOrdi);
System.out.println(casesOrdi.getItem(x)); 
```

And my class CaseAdapter :

```
import java.util.Vector;

import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;

public class CaseAdapter extends BaseAdapter {
private Context mContext;
private int largeur;
private Vector<Case> lesCases;

public CaseAdapter(Context c, int w) 
{
    this.lesCases = new Vector<Case>();
    mContext = c;
    largeur = w;
}

public View getView(int position, View convertView, ViewGroup parent) 
{
    Case c;
    boolean AJOUTER_ECOUTEUR = true;

    if (convertView == null)
    {
        int i = position/11;
        int j = position%11;

        if(i == 0 && j == 0) // Case haut gauche => Vide
            c = new Case(mContext, !AJOUTER_ECOUTEUR, "");
        else if(i == 0 && j > 0) // Première ligne sans case haut gauche
            c = new Case (mContext, !AJOUTER_ECOUTEUR, Integer.toString(j-1));
        else if(j == 0 && i > 0) // Première colonne
            c = new Case(mContext, !AJOUTER_ECOUTEUR, Character.toString((char)(65+(i-1))));
        else // Toutes les autres cases
            c = new Case(mContext, AJOUTER_ECOUTEUR, "");

        c.setWidth(largeur/11);
        c.setHeight(largeur/11);

        this.lesCases.add(c);
        System.out.println(this.lesCases.size());
    }
    else
        c = (Case) convertView;

    return c;
}

public int getCount() 
{
    return 121;
}

public Case getItem(int position) 
{
    return this.lesCases.get(position);
}

public long getItemId(int position) 
{
    return 0;
}
} 
```

When I do :

```
System.out.println(casesOrdi.getItem(x)); 
```

The application stops and "System.out.println(this.lesCases.size());" isn't executed. So I can't get my Object.

How to solve the problem ?

PS : Sorry for variables names and comments, I'm French, but it's not important for solving the problem :)

EDIT : Here is the LogCat stack trace : (I tested for x = 32)

```
02-10 19:02:17.068: W/dalvikvm(25525): threadid=1: thread exiting with uncaught exception (group=0x41cb4930)
02-10 19:02:17.078: E/AndroidRuntime(25525): FATAL EXCEPTION: main
02-10 19:02:17.078: E/AndroidRuntime(25525): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test2/com.example.test2.Jeu}: java.lang.ArrayIndexOutOfBoundsException: length=0; index=32
02-10 19:02:17.078: E/AndroidRuntime(25525):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at android.os.Looper.loop(Looper.java:137)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at java.lang.reflect.Method.invokeNative(Native Method)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at java.lang.reflect.Method.invoke(Method.java:511)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at dalvik.system.NativeStart.main(Native Method)
02-10 19:02:17.078: E/AndroidRuntime(25525): Caused by: java.lang.ArrayIndexOutOfBoundsException: length=0; index=32
02-10 19:02:17.078: E/AndroidRuntime(25525):    at java.util.Vector.arrayIndexOutOfBoundsException(Vector.java:907)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at java.util.Vector.elementAt(Vector.java:328)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at java.util.Vector.get(Vector.java:442)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at com.example.test2.CaseAdapter.getItem(CaseAdapter.java:60)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at com.example.test2.Jeu.onCreate(Jeu.java:42)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at android.app.Activity.performCreate(Activity.java:5104)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-10 19:02:17.078: E/AndroidRuntime(25525):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-10 19:02:17.078: E/AndroidRuntime(25525):    ... 11 more 
```

# c# - Parallel.For 错误

> ID：14800650
> 
> 赞同：0
> 
> 时间：2013-02-10T17:45:35.323
> 
> 标签：c#, datetime, task-parallel-library, parallel.foreach

我试图在 Parallel.For 中削减 DateTime：

部分代码：

```
 public void LoadLogFile(String fileName) {
        //Thread.CurrentThread.Priority = ThreadPriority.Lowest;

        String currentFile = "";
        if (fileName.Contains("Compass")) {
            currentFile = "Compass";
            CompassLogLoadCompleted = false;
            compassLogCollection.Clear();
            compassLogCollection.AsParallel();
        } else if (fileName.Contains("")) {
            currentFile = "CoreService";
            CoreServiceLogLoadCompleted = false;
            coreServiceLogCollection.Clear();
            ;
            compassLogCollection.AsParallel();
        } else {
            Console.Out.WriteLine("Wrong File");
        }

        if (fileName.Contains("CoreService") ||
            fileName.Contains("Compass")) {
            int numberOfSingleLineLog = 0;
            int numberOfmultipleLineLog = 0;
            String[] lines = new string[] {};

            String temp = "";
            string[] parts;
            DateTime dateTime = new DateTime();
            LoggingLvl loggingLvl = new LoggingLvl();
            LoggingLvl.ELoggingLvl eLoggingLvl = new LoggingLvl.ELoggingLvl();
            int id = 0;
            char[] delimiters = new[] {' '};
            string threadId = "";
            string loggingMessage;
            string loggingMessage2 = "";
            //string dateAndTimestamp = "";
            int ff = 0;

            // Read the File and add it to lines string
            try {
                swCompass.Start();
                lines = File.ReadAllLines(fileName);
                swCompass.Stop();
            } catch (Exception e) {
                CompassLogLoadCompleted = true;
                CoreServiceLogLoadCompleted = true;
                Console.WriteLine("The file could not be read:");
                Console.WriteLine(e.Message);
            }

            swCompass.Reset();
            swCompass.Start();
            // Adding the objects to the collections

            //compassLogCollection.EnableNotify = false;

            Parallel.For(0, lines.Count(), j => {
                                               //for (int i = 0; i < lines.Count(); i++) {
                                               string dateAndTimestamp = "";
                                               if (!CompassLogLoadCompleted || !CoreServiceLogLoadCompleted) {
                                                   try {
                                                       if (SingleLined(ref lines, j)) {
                                                           parts = lines[j].Split(delimiters,
                                                                                  StringSplitOptions.
                                                                                      RemoveEmptyEntries);
                                                           numberOfSingleLineLog++;
                                                           foreach (string t in parts) {
                                                               switch (ff) {
                                                                   case 0:
                                                                       dateAndTimestamp = t;
                                                                       break;
                                                                   case 1:
                                                                       dateAndTimestamp += " " + t.Replace(",", ".");
                                                                       dateTime = DateTime.Parse(dateAndTimestamp);
                                                                       //dateTime = new DateTime();
                                                                       dateAndTimestamp = "";
                                                                       break;
                                                                   case 2:
                                                                       eLoggingLvl = loggingLvl.ParseLoggingLvl(t);
                                                                       break;
                                                                   case 3:
                                                                       threadId = t;
                                                                       break;

                                                                   default:
                                                                       temp += t;
                                                                       break;
                                                               }

                                                               ff++;
                                                           }

                                                           loggingMessage = temp;

                                                           temp = "";
                                                           ff = 0;
                                                           id++;
                                                           loggingLvl = new LoggingLvl(eLoggingLvl);

                                                           if (fileName.Contains("Compass")) {
                                                               //CompassLogLoadPercent = ((double) numberOfSingleLineLog/lines.Count())*100;

                                                               CompassLogData cLD =
                                                                   new CompassLogData(
                                                                       (numberOfSingleLineLog +
                                                                        numberOfmultipleLineLog),
                                                                       dateTime,
                                                                       loggingLvl, threadId,
                                                                       loggingMessage);

                                                               //await addRoCompassLogCollectionAsync(cLD);
                                                               compassLogCollection.Add(cLD);
                                                           } else if (fileName.Contains("CoreService")) {
                                                               CoreServiceLogData cSLD =
                                                                   new CoreServiceLogData(
                                                                       (numberOfSingleLineLog +
                                                                        numberOfmultipleLineLog),
                                                                       dateTime,
                                                                       loggingLvl,
                                                                       threadId,
                                                                       loggingMessage);
                                                               //await addRoCoreServiceCollectionAsync(cSLD);
                                                               coreServiceLogCollection.Add(cSLD);
                                                           } else {
                                                               Console.Out.WriteLine("File Not recognizable ");
                                                           }

                                                           //Console.Out.WriteLine(loggingMessage);
                                                           //loggingMessage = "";
                                                       } else {
                                                           loggingMessage2 += lines[j];
                                                           loggingMessage2 += "\n";
                                                           //parts[i] += lines[i];
                                                           //parts[i] += "\n";

                                                           if (NextLineIsANumber(ref lines, j)) {
                                                               numberOfmultipleLineLog++;
                                                               //Console.Out.WriteLine(loggingMessage2);
                                                               parts = loggingMessage2.Split(delimiters,
                                                                                             StringSplitOptions.
                                                                                                 RemoveEmptyEntries);
                                                               foreach (string t in parts) {
                                                                   switch (ff) {
                                                                       case 0:
                                                                           dateAndTimestamp = t;
                                                                           break;
                                                                       case 1:
                                                                           dateAndTimestamp += " " +
                                                                                               t.Replace(",", ".");
                                                                           //dateTime = DateTime.Parse(dateAndTimestamp);
                                                                           dateTime = new DateTime();
                                                                           dateAndTimestamp = "";
                                                                           break;
                                                                       case 2:
                                                                           eLoggingLvl =
                                                                               loggingLvl.ParseLoggingLvl(t);
                                                                           break;
                                                                       case 3:
                                                                           threadId = t;
                                                                           break;

                                                                       default:
                                                                           temp += t;
                                                                           break;
                                                                   }

                                                                   ff++;
                                                               }

                                                               loggingMessage = temp;

                                                               temp = "";
                                                               ff = 0;
                                                               id++;
                                                               loggingLvl = new LoggingLvl(eLoggingLvl);

                                                               if (fileName.Contains("Compass")) {
                                                                   CompassLogData cLD =
                                                                       new CompassLogData(
                                                                           (numberOfSingleLineLog +
                                                                            numberOfmultipleLineLog),
                                                                           dateTime,
                                                                           loggingLvl, threadId,
                                                                           loggingMessage);

                                                                   //await addRoCompassLogCollectionAsync(cLD);
                                                                   compassLogCollection.Add(cLD);
                                                               } else if (fileName.Contains("CoreService")) {
                                                                   CoreServiceLogData cSLD =
                                                                       new CoreServiceLogData(
                                                                           (numberOfSingleLineLog +
                                                                            numberOfmultipleLineLog),
                                                                           dateTime,
                                                                           loggingLvl,
                                                                           threadId,
                                                                           loggingMessage);

                                                                   //await addRoCoreServiceCollectionAsync(cSLD);
                                                                   coreServiceLogCollection.Add(cSLD);
                                                               } else {
                                                                   Console.Out.WriteLine("File Not recognizable ");
                                                               }

                                                               loggingMessage2 = "";
                                                           }
                                                       }
                                                   } catch (Exception e) {
                                                       Console.Out.WriteLine("Shit Happens");
                                                       Console.Out.WriteLine(e.StackTrace);
                                                   }

                                                   if (currentFile == "Compass") {
                                                       //CompassLogLoadPercent =
                                                       //    ((double)
                                                       //     i
                                                       //     /lines.Count())*100;

                                                       CompassLogLoadPercent = ((double)
                                                                                j
                                                                                /lines.Count())*100;
                                                   } else if (currentFile == "CoreService") {
                                                       CoreServiceLogLoadPercent =
                                                           ((double)
                                                            j
                                                            /lines.Count())*100;
                                                   }
                                               }
                                           });
            //}
            //compassLogCollection.EnableNotify = true;
            //compassLogCollection.notifyAll();

            if (currentFile == "Compass") {
                Console.Out.WriteLine("Compass TIME: " + swCompass.Elapsed);
            } else {
                Console.Out.WriteLine("CoreSevice TIME: " + swCompass.Elapsed);
            }

            if (currentFile == "Compass") {
                CompassLogLoadCompleted = true;
                Console.Out.WriteLine("Compass LOADING DONE");
            } else if (currentFile == "CoreService") {
                CoreServiceLogLoadCompleted = true;
                Console.Out.WriteLine("CoreService LOADING DONE");
            }
            //CoreServiceLogLoadCompleted = true;
            Console.Out.WriteLine("numberOfSingleLineLog: " +
                                  numberOfSingleLineLog);
            Console.Out.WriteLine("numberOfmultipleLineLog: " +
                                  numberOfmultipleLineLog);
            Console.Out.WriteLine("numberOfLogs: " +
                                  (numberOfSingleLineLog +
                                   numberOfmultipleLineLog));
            Console.Out.WriteLine("");
            //}
        }
    } 
```

但我得到以下异常：

```
 at System.DateTimeParse.Parse(String s, DateTimeFormatInfo dtfi, DateTimeStyles styles)
   at System.DateTime.Parse(String s)
   at LogViewerV1.LogSession.<>c__DisplayClass3.<LoadLogFile>b__0(Int32 i) in                 c:\Users\Reza\Documents\Visual Studio 2012\Projects\Pallas informatik\LogViewerV1\LogViewerV1\src\LogSession.cs:line 169
   A first chance exception of type 'System.FormatException' occurred in mscorlib.d 
```

如果我在普通的 for 循环中运行它，我不会得到任何异常并且一切正常。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:53:44.327

FormatException 表示输入的 DateTime 不是预期的格式。您应该使用 DateTime.Parse 的重载，它允许您指定 DateTypeStyle。

请参阅[http://msdn.microsoft.com/en-us/library/system.datetime.parse.aspx#Parse1_Example](http://msdn.microsoft.com/en-us/library/system.datetime.parse.aspx#Parse1_Example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:38:07.673

我认为问题在于您以某种方式设置了主线程的文化。但是文化不会复制到任何其他线程，因此运行（部分）`Parallel.For()`循环的后台线程具有不同的文化。

您应该做的是明确指定要使用的文化：

```
DateTime.Parse(dateAndTimestamp, theCorrectCulture) 
```

# azure - 如果我向 Azure VM 添加新存储，我会丢失驱动器 D：吗？

> ID：14800651
> 
> 赞同：-1
> 
> 时间：2013-02-10T17:45:39.237
> 
> 标签：azure, storage, azure-storage

当我尝试将我的虚拟机从较小的尺寸提升到较大的尺寸时，我的经历很糟糕，在这种情况下，我丢失了“临时驱动器 D：”上的所有数据。现在我需要向我的虚拟机添加一个永久驱动器，这个添加会导致取消驱动器 D: 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:21:30.590

驱动器 D 应被视为易失性。每当您重新启动服务器时（或者如果服务器因故障转移而重新启动/移动到另一个实例），您可能会丢失在驱动器 D 上找到的内容。添加永久驱动器不需要重新启动 VM，因此添加驱动器不会不会导致您自己丢失 D 上的数据。

# c++ - 四边形上的输出纹理不正确

> ID：14800667
> 
> 赞同：2
> 
> 时间：2013-02-10T17:47:05.843
> 
> 标签：c++, opengl, glut, freetype

我正在尝试使用 freetype 在我的应用程序中显示文本。起初我认为这个内置函数（这对于打算绘制文本的库来说是很自然的）。但是只有一个显示符号的功能。然后我决定将字符一个一个地放入纹理中。但在这里我再次感到失望：所有指南一个纹理使用单个图像（可能 glTexSubImage2D 可以帮助我？）。现在我在纹理和纹理上放了一个符号到 opengl 元素。这是我的代码（它很乱，但现在我'我只是想了解它是如何工作的）：

```
//init:

    if (FT_Init_FreeType(&ft)) {
        fprintf(stderr, "Could not init freetype library\n");
        return 0;
    }
    if (FT_New_Face(ft, fontfilename, 0, &face)) {
        fprintf(stderr, "Could not open font %s\n", fontfilename);
        return 0;
    }
    FT_Set_Pixel_Sizes(face, 0, 48);    FT_GlyphSlot g = face->glyph; 
```

并从显示（）：

```
 void display()
 {
glClear(GL_COLOR_BUFFER_BIT);
glClearColor(1.0 ,1.0, 1.0, 0.0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glLoadIdentity();//load identity matrix
std::string s = "QWERTYOG0l  ";

for(int i = 0; i < s.size(); i++){
    FT_Load_Char( face, s[i], FT_LOAD_RENDER );
    FT_GlyphSlot g = face->glyph;
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,GL_LINEAR); // Linear Filtering
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,GL_LINEAR); // Linear Filtering
    //glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    gluBuild2DMipmaps( GL_TEXTURE_2D, 
          GL_RED, 
          g->bitmap.width, 
          g->bitmap.rows, 
          GL_RED, 
          GL_UNSIGNED_BYTE, 
          g->bitmap.buffer );
    glBegin(GL_QUADS);
      glTexCoord2f(0.0f, 0.0f);glVertex3f(0.1f*i-0.1,0.07f,0.0f); //top left
      glTexCoord2f(0.0f, 1.0f);glVertex3f(0.1f*i,0.07f,0.0f); //top right
      glTexCoord2f(1.0f, 1.0f);glVertex3f(0.1f*i,-0.07f,0.0f); // bottom right
      glTexCoord2f(1.0f, 0.0f);glVertex3f(0.1f*i-0.1,-0.07f,0.0f); //bottom left
    glEnd();
} 
```

![代码结果](../Images/c7967a9a1e96fd2c6dfb8117353a7e7d.png)

如您所见，“O”和“T”是正确的（如果我更改纹理的左下角和右上角，那将是绝对正确的）。但其他符号似乎移动了（例如“E”从上到下从左移动）。

完整代码：

```
#include <math.h>
#include <iostream>
#include <GL/glew.h>
#include <GL/glut.h>

#include <ft2build.h>
#include FT_FREETYPE_H

FT_Library ft;
FT_Face face;
const char *fontfilename = "LucidaTypewriterBold.ttf";
GLuint      texture[10];  

GLint uniform_mytexture;
int setup() { 
    if (FT_Init_FreeType(&ft)) {
        fprintf(stderr, "Could not init freetype library\n");
        return 0;
    }
    if (FT_New_Face(ft, fontfilename, 0, &face)) {
        fprintf(stderr, "Could not open font %s\n", fontfilename);
        return 0;
    }
    FT_Set_Pixel_Sizes(face, 0, 48);
    FT_Load_Char( face, 'O', FT_LOAD_RENDER );
    FT_GlyphSlot g = face->glyph;

    glGenTextures(1, &texture[0]);    // Create The Texture
    glBindTexture(GL_TEXTURE_2D, texture[0]);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,GL_LINEAR); // Linear Filtering
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,GL_LINEAR); // Linear Filtering
    //glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    gluBuild2DMipmaps(GL_TEXTURE_2D,  GL_RGBA, g->bitmap.width, g->bitmap.rows,  GL_RED, GL_UNSIGNED_BYTE, g->bitmap.buffer);
    return 1;
 }
void display()
{
    glClear(GL_COLOR_BUFFER_BIT);
    glClearColor(1.0 ,1.0, 1.0, 0.0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();//load identity matrix
    std::string s = "QWERTYOG0l  ";

    for(int i = 0; i < s.size(); i++){
        FT_Load_Char( face, s[i], FT_LOAD_RENDER );
        FT_GlyphSlot g = face->glyph;
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,GL_LINEAR); // Linear Filtering
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,GL_LINEAR); // Linear Filtering
        //glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
        gluBuild2DMipmaps( GL_TEXTURE_2D, 
              GL_RED, 
              g->bitmap.width, 
              g->bitmap.rows, 
              GL_RED, 
              GL_UNSIGNED_BYTE, 
              g->bitmap.buffer );
        glBegin(GL_QUADS);
          glTexCoord2f(0.0f, 0.0f);glVertex3f(0.1f*i-0.1,0.07f,0.0f); //top left
          glTexCoord2f(0.0f, 1.0f);glVertex3f(0.1f*i,0.07f,0.0f); //top right
          glTexCoord2f(1.0f, 1.0f);glVertex3f(0.1f*i,-0.07f,0.0f); // bottom right
          glTexCoord2f(1.0f, 0.0f);glVertex3f(0.1f*i-0.1,-0.07f,0.0f); //bottom left
        glEnd();
    }

    //glActiveTexture(GL_TEXTURE0);
    //glBindTexture(GL_TEXTURE_2D, texture[0]);               // Select Our Texture

 // glUniform1i(uniform_mytexture, /*GL_TEXTURE*/0);
    glutPostRedisplay();
    glutSwapBuffers();
}
void TimerFunction(int value)
{

}
int main(int argc, char *argv[])
{
       glutInit(&argc, argv);
       glutInitDisplayMode(GLUT_RGB | GLUT_DEPTH | GLUT_DOUBLE);
       glutInitWindowSize(800,600);
       glutCreateWindow("Hello World");
        //glutTimerFunc(30, TimerFunction, 1);
       glewInit();
       glEnable (GL_TEXTURE_2D);

       setup();
       glutDisplayFunc(display);

       glutMainLoop();

       return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:23:30.627

我一直在研究这个问题，虽然这个答案可能不完整，但也许它可以帮助你弄清楚。

## 初步说明

在我找到我发现的东西之前，我需要指出你的纹理坐标有问题。你有这个：

```
glTexCoord2f(0.0f, 0.0f);glVertex3f(0.1f*i-0.1,0.07f,0.0f); //top left
glTexCoord2f(0.0f, 1.0f);glVertex3f(0.1f*i,0.07f,0.0f); //top right
glTexCoord2f(1.0f, 1.0f);glVertex3f(0.1f*i,-0.07f,0.0f); // bottom right
glTexCoord2f(1.0f, 0.0f);glVertex3f(0.1f*i-0.1,-0.07f,0.0f); //bottom left 
```

什么时候应该是这样的：

```
glTexCoord2f(0.0f, 0.0f);glVertex3f(0.1f*i-0.1,0.07f,0.0f); //top left
glTexCoord2f(1.0f, 0.0f);glVertex3f(0.1f*i,0.07f,0.0f); //top right
glTexCoord2f(1.0f, 1.0f);glVertex3f(0.1f*i,-0.07f,0.0f); // bottom right
glTexCoord2f(0.0f, 1.0f);glVertex3f(0.1f*i-0.1,-0.07f,0.0f); //bottom left 
```

请注意左上角如何对应于纹理坐标中的 0、0，而 1、1 对应于右下角。这是因为（这里有点猜测）freetype puts 将左上角视为其原点。

## 可能有帮助的东西

Freetype 不会生成尺寸必须是二次幂的位图，这通常是 mipmapping 所必需的（参见：[https](https://gamedev.stackexchange.com/a/7929) ://gamedev.stackexchange.com/a/7929 ）。

所以如果你想测试这个（**注意：不要在你的代码中实际使用它；这只是为了说明**）你可以用以下替换你的`gluBuild2DMipmaps`调用`display`（一定要`#include <cstring>`：

```
int pitch = g->bitmap.pitch;
if (pitch < 0) {
    pitch = -pitch;
}

unsigned char data[4096] = {0};
for (int row = 0; row < g->bitmap.rows; ++row) {
    std::memcpy(data + 64 * row, g->bitmap.buffer + pitch * row, pitch);
}

gluBuild2DMipmaps(
    GL_TEXTURE_2D, 
    GL_RGBA, 
    64, 
    64, 
    GL_RED, 
    GL_UNSIGNED_BYTE, 
    data
); 
```

它所做的是将位图缓冲区复制到不同的 64x64 字节缓冲区的左上角，然后从中构建 mipmap。这是结果：

![结果](../Images/677be1a767ee9b6140f285b020aefd6d.png)

## 进一步说明

我的插图代码很糟糕，因为它每次重绘都会复制每个字形的位图数据，并且它没有考虑位图缓冲区的实际大小，或者如果间距大于 64。你也可能不想成为（重新) 每次重绘都会生成你的 mipmap，但是如果你只是想学习如何将单词输入 OpenGL，请不要担心 :)

编辑：我不得不使用与您不同的字体，因为我没有您的字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T23:18:51.787

正如 tecu 所说，正确的解决方案是使用具有两倍大小的纹理。

同样在那个答案之前我找到了另一个解决方案： `glPixelStorei( GL_UNPACK_ALIGNMENT, 1 );`之前`gluBuild2DMipmaps`。但是在这里您会遇到更多问题，例如纹理周围的灰色边框。

对于那些提出类似目标的人，我想分享我的经验：

**在透明背景上变黑：**

```
GLfloat swizzleMask[] = { 0,0,0, GL_RED}; 
glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_SWIZZLE_RGBA, swizzleMask); 
```

**UPD**有一个使用 OpenGL 扩展的更简单和明显的解决方案。 `gluBuild2DMipmaps( GL_TEXTURE_2D, GL_ALPHA, g->bitmap.width, g->bitmap.rows, GL_RGBA, GL_UNSIGNED_BYTE, g->bitmap.buffer )`

**连接单个纹理中的所有字母**

我认为这对性能更好，但不确定我是否改变了正确的方式。

```
 if(text[i] == ' ') left += 20; else
    for (int row = 0; row < g->bitmap.rows; ++row) {
        std::memcpy(data + left + 64*(strSize*(row + 64 -  g->bitmap_top))
            , g->bitmap.buffer + pitch * row, pitch);
    }
    left += g->advance.x >> 6; 
```

如果在连接数据数组之前计算宽度和高度（并四舍五入）会更好。

如果您想要**字距调整**，您应该编写自己的较慢的 memcpy 实现，您将在其中添加（不完全更改）值并检查超过`UCHAR_MAX`.

我的最终结果：![在此处输入图像描述](../Images/5fd7f7cfe03888638da426ce3ba395a4.png)

# git - Git：创建 repo 作为子模块

> ID：14800669
> 
> 赞同：19
> 
> 时间：2013-02-10T17:47:18.323
> 
> 标签：git, git-submodules

我想创建一个新的存储库作为我项目的子模块。

通常，我创建一个 Github 存储库，然后使用命令将其添加为子模块 `git submodule add url_to_repo.git`

有没有办法直接创建一个新的 repo 作为子模块，而无需先在其他地方创建 repo（既不是本地也不是远程，例如在 Github 上）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-09-20T08:18:37.703

简单的！Say`submodule_dir`是您希望子模块化的目录的名称（假设它尚未在 git 控制下）。

```
cd submodule_dir
git init
git add .
git commit
# on github, create the new repo, then:
git remote add origin git@github.com:your_username/your_repo_name.git
git push -u origin master
cd ..
mv submodule_dir submodule_dir_delete_me
git submodule add git@github.com:your_username/your_repo_name.git submodule_dir 
```

稍后（一旦你高兴）

```
rm -rf submodule_dir_delete_me 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-27T14:24:38.980

如果我理解正确，这就是我经常为 Eclipse 项目和工作区做的事情。让我们从这个结构开始：

```
$ find .
.
./projekt.txt
./sub1
./sub1/sub1.txt
./sub2
./sub2/sub2.txt 
```

首先初始化子模块和主模块：

```
$ cd sub1
$ git init
$ git add *
$ git commit -m "init sub1"
$ cd ../sub2
$ git init
$ git add *
$ git commit -m "init sub2"
$ cd ..
$ git init
$ git status
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   projekt.txt
#   sub1/
#   sub2/ 
```

要将这些文件夹添加为子模块而不是常规文件夹，只需执行以下命令，并使用相对路径`./sub`而不是仅仅`sub`

```
$ git submodule add ./sub1
$ git submodule add ./sub2 
```

现在它应该看起来像

```
$ git status
# On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use "git rm --cached <file>..." to unstage)
#
#   new file:   .gitmodules
#   new file:   sub1
#   new file:   sub2
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   projekt.txt 
```

最后在父文件夹上做一个`git add *`and`git commit -m "init parent"`就可以了！

如果您现在更改其中一个子模块中的文件，则必须先提交子模块，然后再提交父存储库，以便在有人克隆您的父存储库时获得子模块的最新版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-10T18:00:48.337

我看不出你怎么能：一个子模块定义为来自另一个 repo 的 SHA1（即父 repo 必须存在另一个 repo 才能提取所说的 SHA1）：你必须在你保存的[`.gitmodules`文件](http://git-scm.com/docs/gitmodules.html)中引用它的地址在父回购。

> 子模块由主存储库中所谓的[gitlink 树条目](https://stackoverflow.com/questions/12078365/how-exactly-does-git-submodule-work/12078816#12078816)组成，该条目引用内部存储库中完全独立的特定提交对象。

```
submodule.<name>.url 
```

> 定义可以从中克隆子模块存储库的 URL。这可能是准备好传递给 git-clone(1) 的绝对 URL，或者（如果它以`./`或开头`../`）相对于超级项目的原始存储库的位置。

因此，您可以在本地创建子模块 repo，但无论如何您都必须创建它。

# user-interface - 实时保持服务器和 GUI 之间的状态同步

> ID：14800671
> 
> 赞同：1
> 
> 时间：2013-02-10T17:47:21.320
> 
> 标签：user-interface, sync, distributed-caching

我正在寻找一个库，它可以帮助我在我的服务器和我的 GUI 之间“实时”保持一些状态同步。我对消息传递和中间件进行了排序（推送更新等），但我需要的是一个协议，它可以保证数据在某个合理的有限时间内保持同步 - 错误/丢弃的消息/异常可能会导致数据失去同步几秒钟，但它应该重新同步或至少知道它在几秒钟内不同步。

这似乎应该是以前已经解决的问题，但我似乎找不到任何合适的东西 - 非常感谢任何帮助

更多细节 - 我有一个由 JMS 类型中间件提供服务的富客户端（Silverlight，但可能很快会迁移到 Javascript/C# 或 Java）GUI。我希望将一些数据交互重新设计为如下所示

每个用户对几个相当小的数据集都有自己的看法，例如：

*   权利（要显示的 GUI 元素）
*   GUI 数据（例如填充下拉菜单等）
*   业务数据网格（例如订单网格）
*   首选项（例如 GUI 的布局方式）

所有这些数据集都可以在服务器上随时更改，数据应尽快在客户端更新。数据通过服务器更改——客户端请求更改（例如取消请求），服务器根据权利和业务规则对其进行验证，并更新其内部数据集，然后将更改发送回 GUI。为了提供用户反馈，可以在 gui（取消提交或类似）上设置中间状态，该状态被服务器响应覆盖。

目前的工作流程是：

*   用户认证
*   GUI 从服务器下载初始数据集（从数据库或它缓存的其他一些业务对象加载它们）
*   GUI 呈现
*   GUI 下载业务数据的快照
*   GUI 订阅业务数据的更新
*   随着 GUI 中的更新更新模型和屏幕上的视图

我正在寻找一个可以改进这一点的通用库

*   应该是使用有效载荷格式的跨语言（例如 Java 后端、C# 前端、protobuf 数据格式）
*   应该与传输无关（我们使用 JMS 样式的中间件，我们现在不想替换）
*   当服务器端数据集发生更改时，应向客户端发送更新
*   客户端和服务器应该能够检查更改以确保它们是最新的
*   发送的数据应该是最小的（最小增量）
*   客户端和服务器应该处理多个版本不同步
*   客户端应该能够在会话之间缓存到磁盘，然后在登录时获取增量。

我认为理想的解决方案将使用类似

*   任何对象（或对象树）都可以使用库代码注册（这应该适用于通过 Hibernate 加载的数据/对象）
*   当对象更改时，库会使用更改增量通知侦听器/回调
*   侦听器使用我的 JMS 将该增量发送到客户端
*   客户端获取更新并可以将其返回给库的客户端版本，这将更新对象的客户端版本
*   客户端应该从更新中获得足够的信息，以便能够决定需要采取哪些 UI 操作（通知用户、更新网格等）
*   客户端和服务器会定期检查它们是否在同一版本的对象上（例如，服务器将版本号发送给客户端），并且可以在必要时通过服务器发送增量或在必要时完全刷新来进行补救。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T20:29:57.937

哇，这么多！

我有一个项目正在进行，它在前端的 Javascipt 中处理同步方面的问题。有一个用 Node.JS 编写的测试服务器（一旦客户端确定下来，它实际上很容易）。

基本上数据是通过密钥存储在数据集中的，并且每个单独的密钥都是版本化的。服务器拥有所有数据的所有版本，客户端可以从服务器获取更改。在客户端和服务器上修改某些内容时的版本冲突由冲突解决回调处理。

它并不完整，事实上它目前只有内存存储，但会在新的一周左右发生变化。

实际的通知/下载和上传超出了库的范围，但您可以为此使用 Sockets.IO。

它目前适用于 jQuery、Dojo 和 NodeJS，实际上它几乎没有任何依赖项。

该项目（带有演示）位于[https://github.com/forbesmyester/SyncIt](https://github.com/forbesmyester/SyncIt)

# regex - 通过正则表达式进行不区分大小写的有序词搜索

> ID：14800672
> 
> 赞同：5
> 
> 时间：2013-02-10T17:47:41.397
> 
> 标签：regex, string, perl, search

我刚开始使用 perl 中的正则表达式。在玩过各种在线教程之后，我想写一个匹配顺序指定不区分大小写的单词匹配的正则表达式。

我正在尝试确定字符串“A”是否由一个单词或字符串“B”的单词序列组成，并且我想不区分大小写地执行此操作。

例如，如果字符串“B”是“John Von Neumann”，那么“JOhn”、“Von NeumaNn”、“VoN”、“john neuMann”将是一个**匹配**项，但是像“Joh”、“NeuMann VoN”这样的字符串， “Vonn”**不会**匹配。

我不确定如何使用正则表达式来做到这一点，知道吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T18:25:07.763

让我们暂时忽略大小写。

```
John Von Neumann 
```

可以匹配

```
John Von Neumann    1 1 1
John Von            1 1 0
John     Neumann    1 0 1
John                1 0 0
     Von Neumann    0 1 1
     Von            0 1 0
         Neumann    0 0 1 
```

所以你正在寻找的正则表达式模式是

```
/^(?:John Von Neumann|John Von|John Newmann|John|...)\z/i 
```

以下是构建列表的方法：

```
sub true_indexes {
   my ($n) = @_;
   my $i = 0;
   my @indexes;
   while ($n) {
      push @indexes, $i if $n & 1;
      ++$i;
      $n >>= 1;
   }
   return @indexes;
}

my @words = split(' ', 'John Von Neumann');

my @patterns;
unshift @patterns, join ' ', @words[ true_indexes($_) ]
   for 1 .. (2**@words)-1; 
```

最后，我们可以生成模式：

```
my $pat = join '|', map quotemeta, @patterns;
my $re = qr/$pat/i; 
```

你会像这样使用它：

```
if ($input =~ /^$re\z/) {
   print "match\n";
} else {
   print "no match\n";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T11:21:06.220

ikegami的解决方案会占用指数空间for来存储字符串在变成正则之前（每个单词会出现2 ^(n - 1)次，其中n是单词的个数，所以总空间至少是2 ^(n - 1) * Sum （字长））。这与正则表达式引擎**无关**- 因为问题出在字符串转换为正则表达式之前。

* * *

与 ikegami 的解决方案等效的正则表达式构造（就其匹配的字符串集而言）将是：

```
^(?=[^ ])(?:(?: |^)John(?= |\z))?+(?:(?: |^)Von(?= |\z))?+(?:(?: |^)Neumann(?= |\z))?+\z 
```

就单词数和所有单词的总长度而言，这只占用线性空间。

为了清楚起见：

```
^
(?=[^ ])
(?:(?: |^)John(?= |\z))?+
(?:(?: |^)Von(?= |\z))?+
(?:(?: |^)Neumann(?= |\z))?+
\z 
```

前瞻断言`(?=[^ ])`有两个目的：防止空字符串被匹配，并确保第一个字符不是空格字符。

注意`?+`，它使量词*具有所有格*（或*原子*），因为我们在这里不需要回溯。***为什么？***如果我们要正常执行此操作，我们将遍历单词列表并将其与输入中最左边的单词进行比较。找到匹配项后，我们将继续循环以将其与输入中的下一个单词进行比较，直到找到输入中的所有单词或我们完成了单词列表的循环。

*所有格*量词还可以防止回溯地狱的发生。如果一个词被认为是匹配的，它将永远不会被重新考虑。

对于每个单词，它们前面可以有一个空格，或者它是字符串的开头。前瞻断言`(?= |\z)`的目的是确保具有相同前缀的单词在第一次尝试时不会被错误地匹配（例如`"John Von Vone"`，尝试匹配`"John Vone"`）。

由于没有回溯，因此最坏情况下的性能在所有单词的长度和输入字符串的长度方面是线性的（与没有正则表达式的情况相同）。

* * *

我们可以稍微改变一下正则表达式以允许灵活的间距：

```
^(?= *+[^ ])(?: *+John(?= |\z))?+(?: *+Von(?= |\z))?+(?: *+Neumann(?= |\z))?+ *+\z 
```

为清楚起见（前导空格很重要）：

```
^
(?= *+[^ ])
(?: *+John(?= |\z))?+
(?: *+Von(?= |\z))?+
(?: *+Neumann(?= |\z))?+
 *+
\z 
```

`(?= *+[^ ])`开头的前瞻确保输入字符串不只包含空格。

正则表达式已更改为允许在单词前有任意数量的空格（所有格量词不允许回溯）。使用0 个或多个量词`*`，因为单词正好在字符串的开头。由于前瞻断言，两个单词没有发生冲突的机会`(?= |\z)`。

在构造字符串时（在将其输入到正则表达式引擎之前），它仍然占用线性空间。最坏情况下的性能也是线性的。

* * *

**极端情况**

1.  原话：

    ```
    aaaaaaaaaaaaaaaaaaa0 aaaaaaaaaaaaaaaaaaa1 ... aaaaaaaaaaaaaaaaaaa9 aaaaaaaaaaaaaaaaaaaa ... aaaaaaaaaaaaaaaaaaaz aaaaaaaaaaaaaaaaaaaA ... aaaaaaaaaaaaaaaaaaaZ 
    ```

    （每个单词20个字符，最后一个字符由`0-9`、then `a-z`、then变化`A-Z`）

    要搜索的字符串（不匹配）：

    ```
    aaaaaaaaaaaaaaaaaaaz aaaaaaaaaaaaaaaaaaay 
    ```

    （`y`只能先来`z`）

2.  原话：

    ```
    patterns used in Perl pattern matching evolved from those supplied 
    ```

    （一些普通话）

    要搜索的字符串（不匹配）：

    ```
    patterns used in Perl pattern matching evolved from those suppliedd 
    ```

    （`d`最后补充）

3.  原话：

    ```
    aaaaaaaaaaaa aaaaaaaaaaa aaaaaaaaaa aaaaaaaaa aaaaaaaa aaaaaaa aaaaaa aaaaa aaaa 
    ```

    （Word 仅包含`a`，长度不同。）

    要搜索的字符串（不匹配）：

    ```
    aaaaaaaaaaaa aaaaaaaaaaa aaaaaaaaaa aaaaaaaaa aaaaaaaa aaaaaaa aaaaaa aaaaa aaaaa 
    ```

    （`a`最后补充）

4.  原话：

    ```
    performance abc xyz performance 456 !@# performance 
    ```

    （同一个词出现多次）

    要搜索的字符串（不匹配）：

    ```
    performance performance performance performance 
    ```

# php - 我将如何停止多个电子邮件或用户名？

> ID：14800674
> 
> 赞同：-1
> 
> 时间：2013-02-10T17:47:46.313
> 
> 标签：php, mysql

我的注册表中有以下代码，以防止创建多个用户名：

```
connect_db();
    $check = mysql_query("SELECT username FROM school_users WHERE username = '$username'") or die(mysql_error());
    $check2 = mysql_num_rows($check);

if ($check2 != 0) {
    respond("error", "Sorry, the username ".$_POST['username']." is already in use. Please choose a different username.");} 
```

但是，我还想在同一个语句中检查电子邮件：

```
 connect_db();
        $check = mysql_query("SELECT username, email FROM school_users WHERE username = '$username' or email = '$email'") or die(mysql_error());
        $check2 = mysql_num_rows($check);

    if ($check2 != 0) {
if (???username???){
        respond("error", "Sorry, the username ".$_POST['username']." is already in use. Please choose a different username.");}}
else if (???email???) {
    respond("error", "Sorry, the username ".$_POST['username']." is already in use. Please choose a different username.");}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:00:18.767

你可以尝试这样做：

```
connect_db();
$check = mysql_query("SELECT 'User' validation
                        FROM school_users 
                       WHERE username = '$username' 
                       UNION ALL
                      SELECT 'Email' 
                        FROM school_users 
                       WHERE email = '$email'") or die(mysql_error());
$row = mysql_fetch_assoc($check);

if($row)
{
    if ($row["validation"] == 'User') {
            respond("error", "Sorry, the username ".$_POST['username']." is already in use. Please choose a different username.");}}
    else if ($row["validation"] == 'Email') {
        respond("error", "Sorry, the email ".$_POST['email']." is already in use. Please choose a different email.");}}
} 
```

或者你可以单独做......

```
//Validate UserName
connect_db();
$check = mysql_query("SELECT username FROM school_users WHERE username = '$username'") or die(mysql_error());
$check2 = mysql_num_rows($check);

if ($check2 != 0) {
    respond("error", "Sorry, the username ".$_POST['username']." is already in use. Please choose a different username.");}

//Validate Email
connect_db();
$checkEmail = mysql_query("SELECT email FROM school_users WHERE email = '$email'") or die(mysql_error());
$checkEmail2 = mysql_num_rows($check);

if ($checkEmail2 != 0) {
    respond("error", "Sorry, the email ".$_POST['email']." is already in use. Please choose a different email.");} 
```

此外，您的代码容易受到 SQL 注入攻击，并且您正在使用已弃用的 MySQL php 函数。如果您确实想让您的代码变得更好，更不易受到攻击，请查看以下链接：

[为什么我不应该在 PHP 中使用 mysql_* 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

[我可以用什么来代替 mysql_ 函数？](http://php.net/mysqli)

[准备好的陈述](http://en.wikipedia.org/wiki/Prepared_statement)

[使用 MySQLi 准备的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:04:18.183

您也可以在一个语句中执行此操作：

```
SELECT username
FROM school_users
WHERE username = '$username' or  email = '$email' 
```

如果这样做，您需要将消息更改为 user 。. . “您的用户名或电子邮件（或两者）已在使用中”。

要在一个语句中自定义消息，您可以使用聚合：

```
select (case when max(username = '$username') = 1 and max(email = '$email' = 1
             then 'both'
             when max(username = '$username') = 1
             then 'username'
             when max(email = $email) = 1
             then 'email'
        end) as WherePresent
from school_users
WHERE username = '$username' or  email = '$email' 
```

如果一切正常，这将返回 0 行。否则，它返回一行，其中包含“both”、“username”、“email”之一，指示哪个是重复的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T18:21:26.723

原始代码与您可能认为的解决方案相距不远。

```
$check = mysql_query("SELECT username, email FROM school_users WHERE username = '$username' or email = '$email' LIMIT 1") or die(mysql_error()); //Limit one reduces the time mysql searches the db since it stops on the first occurence
        $check2 = mysql_fetch_assoc($check); //we do not only want to know the count of matching rows, but the values return in email and username field

//trimming makes sure we do not have any spaces at the beginning or end
//strtolower makes sure we set UserName == usERnaME == username etc.pp.
if (strtolower(trim($row['username'])) == strtolower(trim($_POST['username']))){ // check the result
        respond("error", "Sorry, the username ".$_POST['username']." is already in use. Please choose a different username.");}
}
else if (strtolower(trim($row['email'])) == strtolower(trim($_POST['email']))) { // and again for email adress
    respond("error", "Sorry, the email ".$_POST['email']." is already in use. Please choose a different email.");}
} 
```

# android - 新手对 Android 的 findViewById() 函数感到困惑？

> ID：14800678
> 
> 赞同：3
> 
> 时间：2013-02-10T17:48:11.450
> 
> 标签：android, eclipse

在 android 开发方面我是一个新手，所以请多多包涵。我目前使用的是 Windows 8 / Eclipse。

我的问题是，该`findViewById`功能似乎已经发疯了，尽管我很可能错误地使用它。

该应用程序运行良好，然后我`TextView`在页面上“删除”了一些新的 s，这似乎完全混淆了它。

该 `findViewById`函数现在要么完全找到错误的控件，要么根本找不到任何东西（并将返回 null）。我检查了我的`activity_main.xml`文件，id 仍然正确。

任何人都可以帮忙吗？

这是我使用的一个典型例子：

```
public void toggleButtonNetwork_Click(View v) {
  ToggleButton tb = (ToggleButton) this.findViewById(R.id.toggleButtonNetwork);//did work, now does not work!
} 
```

我可以补充的唯一见解是我的 R.java 文件在工作时看起来像这样：

```
...
    public static final class id {
      public static final int menu_settings=0x7f070004;
      public static final int textViewGPS=0x7f070003;
      public static final int textViewNetwork=0x7f070001;
      public static final int toggleButtonGPS=0x7f070002;
      public static final int toggleButtonNetwork=0x7f070000;
    }
... 
```

现在看起来像这样（坏了）：

```
public static final class id {
    public static final int menu_settings=0x7f070006;
    public static final int textView1=0x7f070004;
    public static final int textView2=0x7f070005;
    public static final int textViewGPS=0x7f070002;
    public static final int textViewNetwork=0x7f070003;
    public static final int toggleButtonGPS=0x7f070000;
    public static final int toggleButtonNetwork=0x7f070001;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T17:54:35.063

这是一个相当普遍的问题。`Project/Clean...`尝试在您的项目上调用。有时会发生`R`类的自动生成出错，这将迫使它们被重建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T17:56:01.083

一切都很好。

总是只是去**project -> clean** 而**不是 run**。就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T18:02:02.817

这不能回答你的问题。我怀疑 A--Cs 的评论是正确的。

但是，没有什么可混淆的。 `findViewById`真的很简单。

当您编译您的应用程序时，编译器会生成 R.java 并为布局 XML 中的每个视图添加一行（以及字符串、可绘制对象、颜色等 - 任何“资源”），并为其提供唯一 ID。

```
public static final int toggleButtonNetwork=0x7f070001; 
```

ID 会随着您更改资源而更改，但这并不重要。当你使用 时`findViewById`，你给它一个“友好的名字”，在这种情况下`R.id.toggleButtonNetwork`，它被编译成`0x7f070001`因为`public static final int toggleButtonNetwork`是一个静态常量。

当您从 XML 扩展视图时，通常使用 setContentView，构建对象的视图层次结构。每个对象的 id 是在 R.java 中找到的 id。

`findViewById`返回对 type 对象的引用，`View`然后将其转换为 View 的任何类型，这就是您使用的原因

```
= (Button)findViewById(R.id.toggleButtonNetwork); 
```

# mysql - 如何从 MySQL 数据库中获取最后一批更新

> ID：14800679
> 
> 赞同：0
> 
> 时间：2013-02-10T17:48:11.900
> 
> 标签：mysql, date, sorting

我在名为的 MySQL 数据库表中有以下数据`MyTable`：

```
+----------+------------+---------------------+
|    my_id | country_gb | date_updated        |
+----------+------------+---------------------+
|       10 |        224 | 2013-02-07 00:00:00 |
|       30 |        224 | 2013-02-07 00:00:00 |
|       40 |        299 | 2013-02-07 00:00:00 |
|       60 |        277 | 2013-02-09 00:00:00 |
|       70 |        222 | 2013-02-09 00:00:00 |
|      100 |        349 | 2013-02-09 00:00:00 | 
```

如何查询数据库以便只返回最新日期的行？

我知道我可以做到`SELECT * from 'MyTable' WHERE 'date_updated'="2013-02-09 00:00:00"`，但是如果我现在不具体`date_updated`（因为我不这样做）怎么办？我以为我可以在一个命令中按 date_updated DESC 对表进行排序（类似于`SELECT date_updated FROM 'MyTable' ORDER BY date_updated DESC LIMIT 1`），然后使用该`date_updated`值进行另一次搜索，但我不知道如何在一个命令中完成这一切，或者即使有办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:54:07.237

使用子查询

```
SELECT * from 'MyTable' WHERE 'date_updated'=(
    SELECT date_updated FROM 'MyTable' ORDER BY date_updated DESC LIMIT 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T17:55:15.890

```
SELECT * FROM MyTable WHERE date_updated = (SELECT MAX(date_updated) FROM MyTable) 
```

# c - 使用C中的读取系统调用在缓冲区中读取可变大小的数据

> ID：14800685
> 
> 赞同：2
> 
> 时间：2013-02-10T17:48:50.060
> 
> 标签：c, ipc, pipe

我有一个应用程序将数据（控制数据、访问信息等）写入父进程的管道一端。在子进程中，我想按原样读取该数据。

父进程在许多位置执行许多 write() 操作。为了将数据读入缓冲区，我们需要指定数据的长度

```
read(int fd, buffer, len). 
```

我的问题是，父进程每次都会写入可变大小的数据。那么子进程如何知道数据的长度。

我试图读取单个字符并将其添加到 buff 中，

```
char ch;
int n = 0;
while(n >= 0)
{
    n = read(int fd, ch, 1);
    *buff = ch; buff++;
} 
```

但它似乎没有办法做到这一点

请告诉我如何在子进程中读取可变大小的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:52:08.880

嘿，你问了最古老的问题之一。多年来已经开发了许多答案......

*   写入按行组织的格式化数据，然后一次读取一行并解析尽可能多的数据
*   写二进制数据，但先写一个记录类型
*   如上所述，但在两个级别中，使用二进制数据，包装在带有类型字段的记录中，所有这些都以记录长度字开头。这允许您将阅读器分层构建，较低的 I/O 层可以轻松读取记录并将其长度返回到负责应用程序特定逻辑的较高层。
*   按行写入格式化数据，但使用前导标识符标识“记录类型”
*   创建一种语言并为其编写解析器；解析器可能将输入作为文本逐字节读取
*   将数据组织为[XML](http://en.wikipedia.org/wiki/XML)
*   将数据组织为[YAML](http://en.wikipedia.org/wiki/YAML)
*   将数据组织为[JSON](http://en.wikipedia.org/wiki/JSON)

所有这些技术都有一个共同点：读者必须已经知道编码类型，并且必须使用程序逻辑准备好根据其结构有条件地读取数据。当然，已经编写了可以读取 XML、YAML 和 JSON 的库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T17:53:31.087

您需要将格式化的数据放入管道中，这些数据可以在读取端进行解码。也就是说，您必须指定格式/协议才能理解输出的数据。您可以指定长度，或使用以`\n`or`\0`字符结尾的行，无论您的数据如何。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T17:54:22.333

两种最常见和最简单的方法是先以固定大小写入长度，或者使用特殊的记录终止符来告知记录已结束。

# java - Android：扩展 Linearlayout，但对于 RelativeLayout 需要相同。重复代码不可避免？

> ID：14800686
> 
> 赞同：8
> 
> 时间：2013-02-10T17:48:56.300
> 
> 标签：java, android, inheritance, android-linearlayout, android-relativelayout

我有这个代码：

```
public class CopyOfLinearLayoutEntry extends LinearLayout implements Checkable {
    private CheckedTextView _checkbox;
    private Context c;

    public CopyOfLinearLayoutEntry(Context context) {
        super(context);
        this.c = context;
        setWillNotDraw(false);
    }

    public CopyOfLinearLayoutEntry(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.c = context;
        setWillNotDraw(false);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        Paint strokePaint = new Paint();
        strokePaint.setARGB(200, 255, 230, 230);
        strokePaint.setStyle(Paint.Style.STROKE);
        strokePaint.setStrokeWidth(12);
        Rect r = canvas.getClipBounds();
        Rect outline = new Rect(1, 1, r.right - 1, r.bottom - 1);
        canvas.drawLine(r.left, r.top, r.right, r.top, strokePaint);
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        // find checked text view
        int childCount = getChildCount();
        for (int i = 0; i < childCount; ++i) {
            View v = getChildAt(i);
            if (v instanceof CheckedTextView) {
                _checkbox = (CheckedTextView) v;
            }
        }
    }

    @Override
    public boolean isChecked() {
        return _checkbox != null ? _checkbox.isChecked() : false;
    }

    @Override
    public void setChecked(boolean checked) {
        if (_checkbox != null) {
            _checkbox.setChecked(checked);
        }
    }

    @Override
    public void toggle() {
        if (_checkbox != null) {
            _checkbox.toggle();
        }
    }
} 
```

现在我还需要一个RelativeLayout 版本，所以我会复制类文件并将“扩展LinearLayout”替换为“扩展RelativeLayout”。我认为那会很糟糕，因为我不想要任何重复的代码。

看到 Java 不允许多重继承，我将如何实现我的目标？

我读了一些关于组合设计模式的东西，但我不知道如何实现它。

也许有人可以给我一个关于如何最优雅地解决这个问题的起点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:40:20.670

您无需扩展两者以避免重复代码。你可以这样做：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.view.View;
import android.view.ViewGroup;
import android.widget.CheckedTextView;

public class GenericLayout extends ViewGroup{

    private CheckedTextView _checkbox;

    public GenericLayout(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onDraw(Canvas canvas) {
        Paint strokePaint = new Paint();
        strokePaint.setARGB(200, 255, 230, 230);
        strokePaint.setStyle(Paint.Style.STROKE);
        strokePaint.setStrokeWidth(12);
        Rect r = canvas.getClipBounds();
        Rect outline = new Rect(1, 1, r.right - 1, r.bottom - 1);
        canvas.drawLine(r.left, r.top, r.right, r.top, strokePaint);
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        // find checked text view
        int childCount = getChildCount();
        for (int i = 0; i < childCount; ++i) {
            View v = getChildAt(i);
            if (v instanceof CheckedTextView) {
                _checkbox = (CheckedTextView) v;
            }
        }
    }

    public boolean isChecked() {
        return _checkbox != null ? _checkbox.isChecked() : false;
    }

    public void setChecked(boolean checked) {
        if (_checkbox != null) {
            _checkbox.setChecked(checked);
        }
    }

    public void toggle() {
        if (_checkbox != null) {
            _checkbox.toggle();
        }
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        // TODO Auto-generated method stub

    }

}

public class Linear extends LinearLayout {

    GenericLayout generic;

    public Linear(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        generic = new GenericLayout(context);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        generic.onDraw(canvas);
    }

        ...

}

public class Relative extends RelativeLayout{

    GenericLayout generic;

    public Relative(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        generic.onDraw(canvas);
    }

        ...

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:33:59.907

你必须重新考虑你的方法。

好像您正在使用布局来控制 VIEW 逻辑。不幸的是，您的问题没有太多关于您要达到的目标的信息。

你的可能性很小：

*   使用自定义逻辑实现 LAYOUT 代理/委托（坏方法 IMO）
*   制作一个专用的 HANDLER 类来控制您的 VIEW 对象......这些将独立于 LAYOUT
*   制作您的 VIEW 对象并使用 VIEW 对象而不是 LAYOUT （可能是要走的路）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:56:10.853

在我学习和使用的东西中，有两种方法：

1.  你可以做你试图避免的事情（复制类文件并将“扩展线性布局”替换为“扩展相对布局”）

2.  您可以创建2个接口和1个类：一个扩展LinearLayout的接口，另一个扩展RelativeLayout的接口以及实现扩展接口的方法和变量的类。

我希望这会有所帮助

# html - Chrome中伪元素的CSS过渡

> ID：14800691
> 
> 赞同：0
> 
> 时间：2013-02-10T17:49:10.803
> 
> 标签：html, css, webkit

如何使 CSS 过渡对伪元素起作用？

样本：

```
<div class="foo" data-foo='baz'>bar</div>
<div>hover below for the working (non-pseudo) effect</div>
<div class="tar" data-foo='arrr'>nyan</div> 
```

款式：

```
.foo {
    margin: 20px;
    padding: 6px;
    background-color: #fcc;
}

.foo:after {
    margin-left: 4px;
    content: 'hoot';
    font-weight: bold;
    opacity: 0;
    -webkit-transition: opacity 1s ease;
}

.foo:hover:after {
    opacity: 1;
}

.tar {
    margin: 20px;
    padding: 6px;
    background-color: #fcc;
}

.tar {
    margin-left: 4px;
    content: 'hoot';
    font-weight: bold;
    opacity: 0;
    -webkit-transition: opacity 1s ease;
}

.tar:hover {
    opacity: 1;
} 
```

小提琴：

**[http://jsfiddle.net/sdzUp/1/](http://jsfiddle.net/sdzUp/1/)**

这似乎仅适用于 firefox（带有适当的前缀）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:07:54.443

你可以试试这个方法

**HTML**

```
<div class="foo" data-foo='baz'>bar <font>hoot</font></div>
<div>hover below for the working (non-pseudo) effect</div>
<div class="tar" data-foo='arrr'>nyan</div> 
```

**CSS**

```
.foo {
    margin: 20px;
    padding: 6px;
    background-color: #fcc;
    -webkit-transition: all 1s ease;
    -moz-transition: all 1s ease;
    transition: all 1s ease;
}
.foo font{
    font-weight: bold;
    opacity: 0;
    -webkit-transition: opacity 1s ease;
    -moz-transition: all 1s ease;
    transition: all 1s ease;
}
.foo:hover font{
    opacity: 1;
}
.foo:hover:after {
    opacity: 1;
}
.tar {
    margin: 20px;
    padding: 6px;
    background-color: #fcc;
}
.tar {
    margin-left: 4px;
    content: 'hoot';
    font-weight: bold;
    opacity: 0;
    -webkit-transition: opacity 1s ease;
    -moz-transition: opacity 1s ease;
    transition: opacity 1s ease;
}
.tar:hover {
    opacity: 1;
} 
```

演示：http: [//jsfiddle.net/enve/sdzUp/5/](http://jsfiddle.net/enve/sdzUp/5/)

# c++ - 非原子对象在所有线程中是否具有相同的修改顺序？（在没有数据竞争的情况下）

> ID：14800695
> 
> 赞同：2
> 
> 时间：2013-02-10T17:49:52.307
> 
> 标签：c++, c++11, atomic, lock-free, memory-model

1.10/6：

> 对特定原子对象 M 的所有修改都以某个特定的总顺序发生，称为 M 的修改顺序。

非原子对象在所有线程中也有相同的修改顺序吗？我对正确同步的案例（没有数据竞争等）感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T18:33:04.480

您需要在所有参与线程之间进行同步。

如果您有一个（或多个）线程更新一个非原子值（在它们的组之间进行任何数量的同步操作）并且另一个线程读取该值（不与任何更新线程同步），您甚至不能保证您将读取其他线程已存储的值之一。

通常，如果一个线程**更新**了一个非原子变量，而另一个线程**访问**（更新或读取）它，而这两个操作之间没有适当的同步，那么就会发生*数据竞争*。数据竞争会导致未定义的行为。

如果您“正确同步”对非原子变量的访问，您将在任何修改和另一个（或当然相同的）线程中的任何访问之间具有*发生前的*关系。这包括任何两个修改之间的关系。

这种发生前的关系在所有线程中都是有效的，并且在修改之间产生了一个总顺序。所以，是的：正确同步的使用为您提供了一个完整的修改顺序（甚至对于使用相同同步操作同步的所有变量也是相同的）。

# .htaccess - RewriteRule - 只有两个目录和一个文件

> ID：14800699
> 
> 赞同：0
> 
> 时间：2013-02-10T17:50:18.937
> 
> 标签：.htaccess, mod-rewrite

*我正在尝试通过 .htaccess 重写 URL，我想要的是仅当 URL 类似于"www.mysite.com/basedir/directory/file.htm"*时才考虑规则。我不想要*"www.mysite.com/basedir/file.htm"*或*"www.mysite.com/basedir/directory/directory/file.htm"*，我想要确切描述的结构。目前我正在尝试这样做：

```
RewriteRule ^(basedir)/([^/\.]+)/(.*)\.(htm)$    /template.php?&page=$3   [L] 
```

但它不起作用。它接受 basedir 之后的任意数量的目录。
谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:16:51.547

您的第二个匹配区域需要像第一个一样具有字符排除：

```
RewriteRule ^(basedir)/([^/\.]+)/([^/]*)\.(htm)$    /template.php?&page=$3   [L] 
```

这样你就不允许匹配额外的斜线，只有模式中前面的两个显式斜线。

另外，你到底想匹配`$3`什么？您只需要在需要匹配的内容周围使用括号。如果`$3`应该匹配`file.htm`，那么您可以改为编写：

```
RewriteRule ^basedir/[^/\.]+/([^/]*\.htm)$    /template.php?&page=$1   [L] 
```

或者如果它应该只匹配“文件”，那么：

```
RewriteRule ^basedir/[^/\.]+/([^/]*)\.htm$    /template.php?&page=$1   [L] 
```

# c - 性能预测时间方程的误差

> ID：14800702
> 
> 赞同：1
> 
> 时间：2013-02-10T17:50:40.933
> 
> 标签：c, performance, architecture, cpu-architecture, cpu-cache

我使用这个等式来获得执行时间：

```
Execution time = Cpu time + memory time 
```

然后，

```
Execution time = (#instructions * average instruction execution time) +
                 (Misses Cache l1 * latency L2) +
                 (Misses Cache l2 * latency access memory). 
```

我开发了一个简单的程序来检查这个方程，伪代码是下一个：

```
 ini_time = get_cepu_time();
  Init_Papi_counters;

  //intesive computation code (matrix mult)

  End_Papi_counters();
  end_time = get_cepu_time();
  end_time = end_time - ini_time. 
```

获得的值如下：

```
Execution time: 194,111 sec
Cycles: 568949490685
Instructions: 676850501790
Misses L1: 30666388828
Misses L2: 1743525419 
```

英特尔手册中获得的延迟是：

```
Acces L2: 4,8 ns
Acces main memory: 110 ns 
```

然后，如果我应用等式：

```
Misses L1 * Latency l2 = 147 sec
Misses L2 * memory access time =   193 sec 
```

我们可以看到，内存时间分量的总和大于总执行时间：

```
194 < 147 + 193 ERRORRRRR 
```

您能否帮助我了解如何估算执行时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:52:15.570

你是怎么想出这些“方程式”的？对于任何现代 CPU，它们几乎完全不正确，这就是它们产生垃圾结果的原因。

> 执行时间=cpu时间+内存时间

所有现代 CPU 都能够*在进行计算*时访问内存。因此，这两个测量值之间存在显着重叠。此外，在任何不平凡的环境中，可能会发生许多其他需要可测量的“执行时间”的事情——磁盘访问或网络访问停止、服务中断等......

> 执行时间 = (#instructions * 平均指令执行时间) + (未命中缓存 l1 * 延迟 L2) + (未命中缓存 l2 * 延迟访问内存)

撇开缓存未命中不谈，现代 CPU 是流水线和超标量的；数十到数百条指令同时运行，`instructions * average execution time`要捕捉情况的真实复杂性远非简单的模型。 `instructions / (average instructions retired per time unit)`是一个更准确的模型，但对于大多数用途来说仍然严重不足，因为实现的退休率非常依赖于正在执行的代码的细节。

正如 Mystical 在他的评论中指出的那样，处理器可以同时处理多个缓存未命中，因此您也不能简单地通过线性模型来解释它们。除了绝对最简单的设计之外，现代 CPU 非常复杂，无法用这种形式的任何模型准确描述。获得准确性能数据的唯一方法是在相关部件上实际运行计算，或者使用周期精确的模拟器，该模拟器实际上对每个执行阶段所涉及的所有依赖项和资源进行建模（现代 CPU 非常少）此类模拟器很容易获得，因为它们很难正确执行）。

# python - PyScripter - 为什么会这样？

> ID：14800708
> 
> 赞同：0
> 
> 时间：2013-02-10T17:51:16.083
> 
> 标签：python, python-2.7, pyscripter

我正在使用 PyScripter 集成开发环境并使用 Python 2.7 学习课程。

为什么`number = input("some input text")`程序运行时会立即显示python输入对话框？我们不需要执行它吗？因为实际上，它只是将变量设置为 python 输入。它从来没有说要执行它？是`number`不是随便什么变数？

我去的网站有一个小论坛，但是5天没收到回复，所以就来了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:57:10.747

确实`number`是可变的，仅此而已。请参阅[有关 input() 的文档](http://docs.python.org/release/3.2/library/functions.html#input)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:01:28.103

python 只是一种简单的语言，例如它不需要变量声明。但最好它自动询问您的输入，而不是您必须编写启动变量的代码

# c# - 制作系统，使通过调试编写代码成为可能

> ID：14800709
> 
> 赞同：1
> 
> 时间：2013-02-10T17:51:24.037
> 
> 标签：c#, .net, debugging, compilation

对于我的大学课程，我想制作学习编程的系统。主要思路是通过debug写代码，看图（来自Bret Victor视频）：

![在此处输入图像描述](../Images/4c954371a9d9c4169be9031f67ac4448.png)

我不想制作自己的编译器（只是因为它非常复杂和困难，尤其是对于 C# 语言），所以我想使用 .NET 和其他库的所有功能。我看到有两种方法：

*   通过将分配替换为分配并将调试信息发送到主程序来重写代码
*   编译代码并调试它 -> ...

无论如何，我需要一些起点。我必须搜索哪些类和库，我可以在哪些手册中阅读有用的信息，实现它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:58:26.897

我认为可行的是，如果您只是将 C# 视为一种脚本语言。有很多关于如何在 C# 中使用 C# 作为脚本语言的教程，比如[这个](http://www.mattephraim.com/blog/2009/01/02/treating-c-like-a-scripting-language/)。因此，您只需在预定义的条件下（如换行符）再次启动“脚本”编译器，如果编译成功，您将在第二个窗格中返回结果。这只是一个基本的想法。

# c - OpenMP 任务和线程创建

> ID：14800717
> 
> 赞同：4
> 
> 时间：2013-02-10T17:51:48.290
> 
> 标签：c, multithreading, parallel-processing, task, openmp

我想在 OpenMP 程序中获取不同线程的 ID。为什么我得到以下代码的相同线程 ID？

```
#pragma omp task untied
     id1 = omp_get_thread_num(); printf("TID:%d\n",id1);
     foo_par(A);
#pragma omp task untied
     id2 = omp_get_thread_num(); printf("TID:%d\n",id2);
     foo_par(B);
 .... 
```

为什么我得到 '0'`id1`和`id2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:37:41.243

使用您的代码：

```
#pragma omp task untied
     id1 = omp_get_thread_num(); printf("TID:%d\n",id1);
     foo_par(A);
#pragma omp task untied
     id2 = omp_get_thread_num(); printf("TID:%d\n",id2);
     foo_par(B); 
```

因为，您不只使用`{}`这条指令`omp_get_thread_num();`将成为一项任务。

顺便说一句，请记住`task pragma`是可用的`OpenMP 3.0`，因此如果您的 GCC 是 4.4 的旧版本，则任务指令将被忽略。

尝试以下操作：

```
#pragma omp parallel region
{
  #pragma omp single
  {
   #pragma omp task untied
   {
     id1 = omp_get_thread_num(); printf("TID:%d\n",id1);
     foo_par(A);
   }

   #pragma omp task untied
   {
     id2 = omp_get_thread_num(); printf("TID:%d\n",id2);
     foo_par(B);
   }
 }
} 
```

需要单个构造，以便仅由一个线程创建任务。否则，每个任务将被创建 N 次（N == 线程数）。

请注意，如果一个线程“X”能够完成他们的工作并请求池中的另一个任务，它可能会在团队中的另一个线程之前启动。换句话说，即使您定义了 2 个不同的任务（例如），这些任务也可能由同一个线程执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:54:12.587

尝试

```
#pragma omp task untied
if (omp_get_thread_num() == 1)
  foo_par(A);
else
  foo_par(B); 
```

GDB 可用于[调试具有多个线程的程序](http://sourceware.org/gdb/onlinedocs/gdb/Threads.html#Threads)。使用它来逐步执行代码以了解`omp_get_thread_num()`每个线程的值；但是，在调试时会很明显。

# javascript - 围绕空元素创建元素

> ID：14800718
> 
> 赞同：2
> 
> 时间：2013-02-10T17:51:48.920
> 
> 标签：javascript, dom

我试图找到一个解决方案来创建一个新元素并将其附加到一个空元素（如 IMG、INPUT）周围，我可以轻松地在 IMG 或 INPUT 周围添加一个父元素，但我宁愿只通过 DOM 进行。到目前为止，我能够做到这一点的唯一方法是使用 cloneNode 并将其附加到新创建的元素中。

示例通过 DOM 在已经存在的 IMG 周围添加一个 DIV

前：

```
<input type="text" /> 
```

后：

```
 <div><input type="text" /></div> 
```

这是我创建和工作的，但是因为它删除了节点，所以默认值被擦除了我希望有一种更简单的方法来创建和元素并在 INPUT 周围附加

```
<input id="ic706" type="text" /> 
```

.

```
var e = document.getElementById("ic706")
var cloned = e.cloneNode(false);

e.parentNode.removeChild(e);

var c = document.createElement("div");
c.id = "container";

document.body.appendChild(c);
document.getElementById("container").appendChild(cloned); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:56:36.727

我建议：

```
function wrapElem(el, wrapWith) {
    var newElem = document.createElement(wrapWith);
    el.parentNode.insertBefore(newElem, el);
    newElem.appendChild(el);
}

wrapElem(document.getElementsByTagName('input')[0], 'div'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/hDDZu/)。

并且似乎[保留了 event-binding](http://jsfiddle.net/davidThomas/hDDZu/1/)。

这通过创建一个新元素，将其插入到要包装的元素之前，然后将要包装的元素移动到包装*器*中，而不是删除并重新创建；所以这*应该*保留绑定到元素的任何事件和属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:02:25.933

一个相当原始的解决方案（但易于遵循）：

```
var elem = document.getElementById('test');
elem.outerHTML = '<ul><li>' + elem.outerHTML + '</li></ul>'; 
```

# javascript - 拖动 div 在 IE 7 和 8 中不起作用

> ID：14800719
> 
> 赞同：0
> 
> 时间：2013-02-10T17:51:55.130
> 
> 标签：javascript

我正在使用以下函数通过句柄拖动 div：

```
function enableDragging(ele) {
    var dragging = dragging || false,
        x, y, Ox, Oy,
        current;
        enableDragging.z = enableDragging.z || 1;
    var grabber = document.getElementById("myHandelDiv");
    grabber.onmousedown = function(ev) {
        current = ev.target.parentNode;
        dragging = true;
        x = ev.clientX;
        y = ev.clientY;
        Ox = current.offsetLeft;
        Oy = current.offsetTop;
        current.style.zIndex = ++enableDragging.z;
        console.log(dragging);

        window.onmousemove = function(ev) {
            pauseEvent(ev);         
            if (dragging == true) {
                var Sx = ev.clientX - x + Ox,
                    Sy = ev.clientY - y + Oy;
                current.style.top = Sy + "px";
                current.style.left = Sx + "px";
                document.body.focus();
                // prevent text selection in IE
                document.onselectstart = function () { return false; };
                // prevent IE from trying to drag an image
                ev.ondragstart = function() { return false; };                  
                return false;   
            }
        };
        window.onmouseup = function(ev) {
            dragging && (dragging = false);
        }
    };
}    

function pauseEvent(e){
    if(e.stopPropagation) e.stopPropagation();
    if(e.preventDefault) e.preventDefault();
    e.cancelBubble=true;
    e.returnValue=false;
    return false;
} 
```

> 我有两个问题：
> 
> 1.  在 IE 7 和 8 中不起作用，由于某种原因，我没有收到任何错误。
> 2.  拖动时在某些浏览器上选择了文本，导致拖动出现滞后

我像这样启动拖动：

```
var ele = document.getElementById("divDragWrapper");
enableDragging(ele); 
```

> 更新，我现在在 IE 中收到此错误：
> 
> SCRIPT5007：无法获取属性“目标”的值：对象为空或未定义
> 
> 在这一行： current = ev.target.parentNode;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:58:20.197

您需要添加`ev = ev || window.event`到所有事件处理函数。较旧的 IE 不会在参数中传递事件对象。在那些浏览器中也是`target`如此。`srcElement`

例如：

```
grabber.onmousedown = function(ev) {
    ev = ev || window.event;
    var target = ev.target || ev.srcElement;
    current = target.parentNode;
        ...
} 
```

另一件事是，较旧的 IE 无法附加`onmousemove`到`window`. 您可以使用`document`or`document.body`代替。

请参阅[jsFiddle](http://jsfiddle.net/6zxuk/1/)的实际代码。

# windows - 用于将某些文件类型从一个地方复制到另一个地方的 DOS 命令

> ID：14800720
> 
> 赞同：0
> 
> 时间：2013-02-10T17:51:56.310
> 
> 标签：windows, batch-file, automation, copy, command

我有**5 个不同的 VPS，**上面安装了不同的操作系统（虽然都是 Windows 版本），当我在这些不同的服务器上工作时，我通常将我的工作、想法和重要的东西以任何一种格式保存到`.txt`桌面`.xls`。并且新的业务联系人电子邮件地址会自动以`.csv`格式导出到桌面（我为此制作了一个机器人）。

现在到我的问题/问题：

不久前我在使用 WinAutomation (WA)，但我无法弄清楚如何使用批处理命令在 WA 中执行以下操作（比 WA 中的普通复制功能更快）：

我想将所有`*.txt`,`*.xls`并`*.csv`从所有 5 个服务器上的桌面（位置取决于 Win OS）复制到一个 dat 文件（`%SpecialFolder%`在此处使用 WA）所以我希望它（所有具有这些扩展名的文件来自不同的桌面位置）被复制进入`%SpecialFolder%\myfiles.dat`（稍后将通过电子邮件发送给我，*我*设法做到了）。

我很擅长批处理命令，而且我是 WA 的新手，也许是为了确保它在所有 5 台服务器上都能正常工作（尽管放置了这个，但我想获得桌面），`"%USERPROFILE%\desktop\"`但我不确定....所以

你是 WinAutomation/batch pro，请尽快帮助我，这样我就可以和我心爱的家人共度更多美好时光；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:59:47.887

要将 fileA 和 fileB 连接到 fileC，请输入：“copy fileA + fileB fileC”

您可以将更多文件一起添加，以添加编写批处理文件所需的所有 *.txt 文件。

一个简单的替代方法是：“type *.txt >> newfile.dat”，它也适用于二进制文件。

# jquery - 如何防止 jQuery.dialog 将对话框节点移动到 DOM 树的末尾？

> ID：14800726
> 
> 赞同：0
> 
> 时间：2013-02-10T17:52:35.463
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我在作为 HTML 表单一部分的自定义小部件中使用了一些 jquery 对话框。

问题是 jquery 从表单中删除对话框节点并将它们附加到最后的正文节点！结果，对话框中的所有表单字段都在提交的结果中丢失。

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:43:02.487

为了将来参考，这就是我解决这个问题的方法：

*   将表单设置为对话框的 appendTo 选项
*   给对话节点一个大于覆盖层的 z-index

# javascript - Javascript 原型建议

> ID：14800727
> 
> 赞同：3
> 
> 时间：2013-02-10T17:52:37.203
> 
> 标签：javascript, prototype

开始研究 Javascript 中的原型。我想知道是否可以更改（改进\以不同的方式）该代码。对不起我的英语（shell提示符）。那只是为了我。我会欢迎任何建议。没有意义的代码功能。它的主要结构（继承，对象的交互）。我正在以正确的方式前进？

第一的

```
function extend(Child, Parent) {
    var F = function() { }
    F.prototype = Parent.prototype;
    Child.prototype = new F();
    Child.prototype.constructor = Child;
    Child.superclass = Parent.prototype;
}
function Human() {
}
Human.prototype = {
  can_speak: true,
  gender: 'sex',
  say_hello: function() {
    console.log(this.name+' say hello!');
  },
  constructor: function(name,age) {
    this.name = name;
    this.age = age;
  },
  whoami: function() {
    console.log('My name - '+this.name+'. My gender - '+this.gender+'. My age - '+this.age);
  }
}
function Man(name,age) {
  this.gender = 'male';
  this.power = 50;
  this.poke = function() {
    console.log(this.name+' - I`m a man!!!');
  }
  Man.superclass.constructor.call(this, name,age);
}
function Woman(name,age) {
  this.gender = 'female';
  this.power = 30;
  this.give = function() {
    console.log(this.name+' - I`m give to someone(((');
  }
  Woman.superclass.constructor.call(this, name,age);
}
function Boy(name,age, main) {
  Boy.superclass.constructor.call(this, name,age);
  this.main = main;
}
function Oldman(name,age) {
  Oldman.superclass.constructor.call(this, name,age);
}
function Girl(name,age) {
  Girl.superclass.constructor.call(this, name,age);
}
function Oldwoman(name,age) {
  Oldwoman.superclass.constructor.call(this, name,age);
}
extend(Man, Human);
extend(Woman, Human);
extend(Boy, Man);
extend(Oldman, Man);
extend(Girl, Woman);
extend(Oldwoman, Woman);

Stella = new Girl('Stella', 17);
John = new Boy('John', 18, 'trolling');
John.poke();
console.log(John); 
```

第二

```
function Man(name) {
  this.name = name;
  this.age = 20;
  this.band_name = '';
  this.band = '';
  console.log(this.name+' was created');
}
Man.prototype = {
  say_hello: function() {
    return 'Hello from '+this.name;
  },
  rename_band: function(new_name) {
    console.log(this.name+' was renamed his band '+this.band_name+' to '+new_name);
    this.band.name = new_name;
    this.band.members.forEach(function(e) {
      e.band_name = new_name;
    });
  },
  rename: function(new_name) {
    console.log(this.name+' was renamed to '+new_name);
    this.name = new_name;
  }
}
function band(name) {
  this.name = name;
  this.members = new Array();
}
band.prototype = {
  add: function() {
    c = arguments.length;
    for(i=0; i<c;i++) {
      arguments[i].band_name = this.name;
      arguments[i].band = this;
      console.log(arguments[i].name+' was invited to '+this.name);
      this.members.push(arguments[i]);
    } 
  },
  change_name: function(new_name) {
    console.log('Band '+this.name+' was renamed to '+new_name);
    this.name = new_name;
    this.members.forEach(function(e) {
      e.band_name = new_name;
    });
  },
  remove_member: function(member_name) {
    c = this.members.length;
    for(i=0; i<c; i++) {   
      n = this.members[i].name;
      if(n == member_name) {
        console.log(n+' was remove from the '+this.name);
        this.members[i].band_name = '';
        this.members[i].band = '';
        this.members.splice(i, 1);
        return;
      }
    }
    console.log(member_name+" wasn't found in "+this.name);
  },
  split: function(reason) {
    c = this.members.length;
    this.members.forEach(function(e) {
      e.band = '';
      e.band_name = '';
    });
    this.members.splice(0, c);
    console.log('Band '+this.name+' was splited. Reason - '+reason);
  },
  print: function() {
    str = 'Band - '+this.name+'. Members:';
    this.members.forEach(function(e) {
      str += e.name+'('+e.age+'); ';
    });
    console.log(str);
  }
}

var Davy = new Man('Davy');
var John = new Man('John');
var Alex = new Man('Alex');
var hardcore = new band('hardcore');
hardcore.add(Davy, John, Alex);
hardcore.change_name('deathcore');
hardcore.print();
hardcore.remove_member('Davy');
John.rename_band('lol');
hardcore.add(Davy);
Davy.rename('Joshua');
hardcore.print();
hardcore.split('bad guitarist'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:43:57.203

这是一个很好的堆栈溢出答案，它应该可以帮助您使用[Javascript Duck Typing 的代码示例？](https://stackoverflow.com/questions/12762550/example-of-javascript-duck-typing/12763070#12763070)- 尝试将小组件组合在一起来创建事物，而不是严格使用继承来建模事物。你会明白我在那个答案中的意思。

祝你好运死核！#deskmosh

# ocr - 正方体运行错误

> ID：14800730
> 
> 赞同：106
> 
> 时间：2013-02-10T17:53:15.400
> 
> 标签：ocr, tesseract

我在 linux 上运行 tesseract-ocr 引擎时遇到问题。我已经下载了 RUS 语言数据并将其放入 tessdata 目录 (/usr/local/share/tessdata)。当我尝试使用 command 运行 tesseract 时`tesseract blob.jpg out -l rus`，它显示一个错误：

```
Error opening data file /usr/local/share/tessdata/eng.traineddata

Please make sure the TESSDATA_PREFIX environment variable is set to the parent directory of your "tessdata" directory.

Failed loading language eng
Tesseract couldn't load any languages!

Could not initialize tesseract. 
```

根据[**编译指南**](http://code.google.com/p/tesseract-ocr/wiki/Compiling)，我曾经`export TESSDATA_PREFIX='/usr/local/share/'` 指向我的 tessdata 目录。也许我应该编辑任何配置文件？Tesseract 尝试加载“eng”数据文件而不是“rus”。

截图：http: [***//i.stack.imgur.com/I0Guc.png***](http://i.stack.imgur.com/I0Guc.png)

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2014-04-02T04:58:28.490

你可以抓取`eng.traineddata`Github：

```
wget https://github.com/tesseract-ocr/tessdata/raw/master/eng.traineddata 
```

查看[https://github.com/tesseract-ocr/tessdata](https://github.com/tesseract-ocr/tessdata)以获取经过训练的语言数据的完整列表。

当您抓取文件时，将它们移动到`/usr/local/share/tessdata`文件夹中。警告：某些 Linux 发行版（例如 openSUSE 和 Ubuntu）可能会使用它`/usr/share/tessdata`。

```
# If you got the data from Google, unzip it first!
gunzip eng.traineddata.gz 
# Move the data
sudo mv -v eng.traineddata /usr/local/share/tessdata/ 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2016-03-30T12:49:12.617

最简单的方法是安装所需的包：

```
sudo apt-get install tesseract-ocr-eng  #for english
sudo apt-get install tesseract-ocr-tam  #for tamil
sudo apt-get install tesseract-ocr-deu  #for deutsch (German) 
```

如您所见，它打开了通向其他语言的道路（即 tesseract-ocr-fra）。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2017-09-10T20:15:29.170

我在 Windows 机器上也遇到了这个错误。

我的解决方案。

[1) 从https://github.com/tesseract-ocr/tessdata/tree/3.04.00](https://github.com/tesseract-ocr/tessdata/tree/3.04.00)下载您的语言文件

例如，对于 eng，我下载了所有带有 eng 前缀的文件。

2）将它们放入某个文件夹内的*tessdata*目录中。*将此文件夹作为TESSDATA_PREFIX*添加到系统路径变量中。

结果将是 System env var: TESSDATA_PREFIX=D:/Java/OCR 并且 OCR 文件夹包含带有语言文件的*tessdata 。*

这是目录的截图：

[![在此处输入图像描述](../Images/983a52835f49d5d84b2faf3eed72cdde.png)](https://i.stack.imgur.com/Qbmpm.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-11-28T09:56:47.860

```
tesseract  --tessdata-dir <tessdata-folder> <image-path> stdout --oem 2 -l <lng> 
```

就我而言，我所犯的错误或未成功的尝试。

*   我克隆了 github repo 并将文件从那里复制到
    *   /usr/local/share/tessdata/
    *   /usr/share/tesseract-ocr/tessdata/
    *   /usr/share/tessdata/
*   `TESSDATA_PREFIX`与上述路径一起使用
*   sudo apt-get install tesseract-ocr-eng

前 2 次尝试没有奏效，因为来自`git clone`我不知道的原因的文件没有奏效。我不确定为什么#3 尝试对我有用。

最后，

1.  我使用下载了 eng.traindata 文件`wget`
2.  复制到某个目录
3.  `--tessdata-dir`与目录名称一起使用

对我来说，要**好好学习并利用它**，而不是依赖包管理器安装和目录

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-08T05:21:59.047

以前没有解决方案对我有用。

我已经安装`apt-get`并手动下载了tessdata，四处移动`/usr`等等，即使我将变量导出了一千次，也没有人工作。

最后，在开始哭泣之前的最后一次尝试中，我尝试将路径直接传递给 Tesseract() 的实例。

在 Python 中：`tr = Tesseract("/usr/local/share/tesseract-ocr/")`现在它可以工作了。为了澄清，我正在使用`tesserwrap`模块。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-13T12:32:47.220

您可以从 C 代码调用 tesseract API 函数：

```
#include <tesseract/baseapi.h>
#include <tesseract/ocrclass.h>; // ETEXT_DESC

using namespace tesseract;

class TessAPI : public TessBaseAPI {
    public:
    void PrintRects(int len);
};

...
TessAPI *api = new TessAPI();
int res = api->Init(NULL, "rus");
api->SetAccuracyVSpeed(AVS_MOST_ACCURATE);
api->SetImage(data, w0, h0, bpp, stride);
api->SetRectangle(x0,y0,w0,h0);

char *text;
ETEXT_DESC monitor;
api->RecognizeForChopTest(&monitor);
text = api->GetUTF8Text();
printf("text: %s\n", text);
printf("m.count: %s\n", monitor.count);
printf("m.progress: %s\n", monitor.progress);

api->RecognizeForChopTest(&monitor);
text = api->GetUTF8Text();
printf("text: %s\n", text);
...
api->End(); 
```

并构建此代码：

```
g++ -g -I. -I/usr/local/include -o _test test.cpp -ltesseract_api -lfreeimageplus 
```

（我需要 FreeImage 来加载图片）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-03-26T05:13:33.337

对于 Windows 用户：

在环境变量中，在系统变量中添加一个名为“TESSDATA_PREFIX”的新变量，值为“C:\Program Files (x86)\Tesseract-OCR\tessdata”

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-07-29T15:18:44.513

对我来说，问题在于我如何下载火车数据文件。确保您获得原始链接。

最初我使用的是：

```
wget https://github.com/tesseract-ocr/tessdata_best/blob/master/eng.traineddata 
```

当我将其更改为：

```
wget https://github.com/tesseract-ocr/tessdata_best/raw/master/eng.traineddata 
```

有效

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-04-06T08:32:48.060

对于 Ubuntu，只需运行以下命令，环境变量错误就会消失。

命令：

```
export TESSDATA_PREFIX=Path_of_your_tessdata_folder 
```

命令示例：

```
export TESSDATA_PREFIX=/home/amar/Desktop/OCR/tesseract-4.1.1/tessdata 
```

此命令会将 tessdata 文件夹的路径设置为名为 TESSDATA_PREFIX 的环境变量，上述错误将得到解决。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-04-18T22:04:12.493

我正在使用 Windows 操作系统，我尝试了上述所有解决方案，但都没有工作。

最后，我将 Tesseract-OCR 安装在 D 驱动器（我从其中运行我的 python 脚本）而不是 C 驱动器上，并且它可以工作。

因此，如果您使用的是 Windows，请在与 Tesseract-OCR 相同的驱动器中运行您的 python 脚本。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-12-27T20:03:34.017

我正在使用 Visual Studio 2017 社区版。 我通过在项目的 Debug 目录中
创建一个名为**tessdata的目录解决了这个问题。**然后我将**eng.traineddata**文件放入所述目录。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-05-08T13:49:56.490

在 Windows 上工作的 C# 开发人员在这里。对我有用的只是从以下 URL下载文件*eng.traineddata ：*

[https://github.com/tesseract-ocr/tessdata/blob/master/eng.traineddata](https://github.com/tesseract-ocr/tessdata/blob/master/eng.traineddata)

并将其复制到我的控制台应用程序项目中的以下目录：

[项目目录]\bin\Debug\tessdata

我确实在上面手动创建了*tessdata*文件夹。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-05-18T08:03:51.037

截至 2021 年，我对 Ubuntu 的解决方案是从 下载 zip 文件`https://github.com/tesseract-ocr/tessdata_best/releases/tag/4.1.0`，提取并复制必要的`.traineddata`文件到`/usr/local/share/tessdata`. 这是 tesseract 4.1.1 搜索训练数据的默认文件夹。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-01-17T20:56:48.623

将此添加到您的代码中：

```
instance.setDatapath("C:\\somepath\\tessdata");

instance.setLanguage("eng"); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-01-04T11:02:40.473

**如果您有 Windows 操作系统，请将您的 TesseractOCR 添加到系统变量中。例如..

1.  在您的 C 驱动器中找到 Tesseract 的安装路径（在我的情况下为 r"C:\Program Files\Tesseract-OCR\tesseract.exe"）** 2）确保您拥有所需的文件，即 tessdata，如果没有则为 tessdata从[https://github.com/tesseract-ocr/tessdata](https://github.com/tesseract-ocr/tessdata) [https://github.com/tesseract-ocr/langdata](https://github.com/tesseract-ocr/langdata)下载它 （至少那些你想要转换的语言）
2.  在我的情况下，将它传递到主目录 C:\Program Files\Tesseract-OCR 4) 将目录的路径添加到系统环境变量中，以便
    在开始栏中的搜索环境变量转到环境变量单击系统环境变量中的路径（不在用户环境变量中）经过 tesseractocr 的路径

就这样...

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-09-11T22:38:01.980

我在 macOS 上对 DEU 语言有同样的问题。我可以通过安装所有其他语言来解决它，如下所示：

```
brew install tesseract-lang 
```

正如[https://formulae.brew.sh/formula/tesseract上的建议](https://formulae.brew.sh/formula/tesseract)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-03-19T21:25:54.127

我如何在 Manjaro Xfce 中解决问题：

消息“TesseractError: (1, 'Error opening data file /home/julio/snap/tesseract/common/eng.traineddata 请确保将 TESSDATA_PREFIX 环境变量设置为您的“tessdata”目录。加载语言“eng”Tesseract 无法'不加载任何语言！无法初始化 tesseract。'）”</p>

然后，在我的 Manjaro 中，我输入： sudo pacman -S tesseract 然后系统安装了“tesseract”和一个包名“leptonica”</p>

在这一步之后，我认为一切正常，并尝试运行我的简单脚本。但是，错误消息变成了这样的内容（它将以前的“/home”位置更改为其他类似“/usr”的位置）：“”请确保将 TESSDATA_PREFIX 环境变量设置为您的“tessdata”目录。加载语言 'eng' 失败 Tesseract 无法加载任何语言！无法初始化 tesseract。')"”</p>

然后我意识到当我用 pacman 安装“tesseract”时出现了这个消息：“You must install one of tesseract-data-* packages or whole tesseract-data group”</p>

于是，我尝试了命令：“sudo pacman -S tesseract-data”，系统为我提供了很多语言选项。所以我选择了一些语言，安装如下，模块开始像魅力一样工作：

sudo pacman -S tesseract-data-eng

sudo pacman -S tesseract-data-por

sudo pacman -S tesseract-data-fra

sudo pacman -S tesseract-data-spa

我尝试了一些葡萄牙语特殊字符（如“ão”），仅当我在 pytesseract.image_to_string(img,lang='por') 中使用参数“lang='por'”时才有效

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-10-20T21:38:09.143

```
tessdata_dir_config = r'--tessdata-dir "/usr/local/Cellar/tesseract/4.1.1/share/tessdata"'
pytesseract.image_to_string(imgCrop,lang='eng',config=tessdata_dir_config) 
```

# c# - 代码生成 UpperEmail 属性

> ID：14800732
> 
> 赞同：1
> 
> 时间：2013-02-10T17:53:24.760
> 
> 标签：c#, nhibernate

如果我在我的域实体`User`中有财产

```
public virtual string UpperEMail { get; protected set; } 
```

它是这样映射的

```
Property(x => x.UpperEmail, m =>
{
    m.Length(150);
    m.NotNullable(true);
    m.UniqueKey("UniqueUpperEmail");
    m.Access(Accessor.Field);
}); 
```

如何使用测试数据生成此 UpperEmail 属性。

```
Account account = new Account()
{
   Id = Guid.NewGuid(),
   Email = "somemail@gmail.com",
   UpperEmail = "SOMEMAIL@GMAIL.COM"
}; 
```

当然，我收到以下错误（我无法设置值，因为设置访问器无法访问）

> 非空属性引用空值或临时值 Account.UpperEmail

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:23:59.600

您是否认为只需要 UpperEmail 作为获取访问器

```
public virtual string UpperEMail { get Email.ToUpper(); } 
```

# javascript - jQuery 1.9 将 html 附加到页面中，然后附加一个脚本，两者都依赖于准备好的文档

> ID：14800744
> 
> 赞同：0
> 
> 时间：2013-02-10T17:54:06.517
> 
> 标签：javascript, jquery, html, ajax

正在从 jQuery 1.8 升级到 1.9 并遇到问题。我们有某些页面可以加载到任何给定页面的模式中。我们使用 ajax 执行此操作，然后`script`从返回的 html 中解析出元素。然后我们将 html 附加到页面，然后将脚本附加到`head`. 它看起来像这样：

```
controller_element = $( html )
body_scripts = $( controller_element, "script" ).remove()
$( ".modal-body" ).append controller_element
$("head").append body_scripts 
```

这在 1.8 之前是有效的，但我们现在在 1.9 中遇到了问题。问题似乎围绕文档就绪事件展开。该 html 有一些内联 javascript 需要在准备好的文档上运行，它在 append 之后运行，根据文档似乎是正确的。真正需要发生的是它需要在将 javascript 脚本附加到`head`. 而且我们不能只切换这两行的顺序，因为js需要在加载完html后运行才能绑定事件到dom。真的，关于 1.8 和 1.9 之间可能发生的事情的一些想法会非常有帮助。或者，如果其他人成功地实现了通过 ajax 将新页面加载到模式中，我想听听实现。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:01:21.273

好的，所以我相信我只是想通了。我们一直在像这样从正文中解析脚本`body_scripts = $( controller_element, "script" ).remove()`，而`controller_element = $( html )`. 将解析更改为`body_scripts = $( "script", controller_element ).remove()`已为我解决了问题。1.8 的方法应该有效吗？

所以本质上，你需要`script`从你的 html 中删除所有包括内联在内的内容。附加 html，然后附加脚本。html 现在可以绑定到任何事件，并且内联脚本可以在加载所有内容的情况下运行。

# xml - 需要从xml中删除

> ID：14800746
> 
> 赞同：32
> 
> 时间：2013-02-10T17:54:10.733
> 
> 标签：xml, xslt, xpath, xslt-1.0

嗨，我正在通过将 xsl 应用于 xml 输入来生成 xml。我需要没有这部分的输出`"<?xml version="1.0" encoding="utf-16"?>"`

输入--xml

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<CreateResponse xmlns="http://jerseytelecom.com/">
    <CreateResult>
        <ISD_XMLGateway>
            <Entity>RIM_BPS</Entity>
         </ISD_XMLGateway>
    </CreateResult>
   </CreateResponse>
</soap:Body>
</soap:Envelope> 
```

我的 xsl

```
 <?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:JT="http://jerseytelecom.com/" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" exclude-result-prefixes="JT">
         <xsl:output method="xml" indent="yes"/>
         <xsl:template match="/">
           <xsl:element name="Entity">
            <xsl:value-of select="soap:Envelope/soap:Body/JT:CreateResponse/JT:CreateResult/JT:ISD_XMLGateway/JT:Entity"/>  
            </xsl:element>
            </xsl:template>
            </xsl:stylesheet> 
```

电流输出

```
 <?xml version="1.0" encoding="utf-16"?>
    <Entity>RIM_BPS</Entity> 
```

预期产出

```
 <Entity>RIM_BPS</Entity> 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-10T18:00:43.873

尝试将`omit-xml-declaration="yes"`属性添加到您的`xsl:output`标签。

然后它应该是这样的：

```
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes" /> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-10T18:01:13.180

把它放在你的 xslt

```
<xsl:output method="xml" omit-xml-declaration="yes"/> 
```

或者

极力推动

```
<xsl:output method="text" /> 
```

应该解决症状...

尽管取决于处理器，但最后一个可能会产生重大影响。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-05T06:50:38.120

使用此 XSLT 从使用 XSLT 的 xml 文档中删除 encoding=“UTF-8”。在 Cdaata 部分您可以根据需要添加编码。干杯：）

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" omit-xml-declaration="yes"/>
    <xsl:template match="/">
        <xsl:text disable-output-escaping="yes"><![CDATA[<?xml version="1.0"?>]]></xsl:text>
        <xsl:copy-of select="node()"/>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T01:07:19.970

**这个完整的转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
 xmlns:JT="http://jerseytelecom.com/" exclude-result-prefixes="soap JT">
<xsl:output omit-xml-declaration="yes" indent="yes"
     encoding="utf-8"/>
 <xsl:template match="/">
  <Entity>
   <xsl:value-of select=
   "soap:Envelope/soap:Body/JT:CreateResponse
              /JT:CreateResult/JT:ISD_XMLGateway/JT:Entity"/>
  </Entity>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope
 xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<CreateResponse xmlns="http://jerseytelecom.com/">
    <CreateResult>
        <ISD_XMLGateway>
            <Entity>RIM_BPS</Entity>
         </ISD_XMLGateway>
    </CreateResult>
   </CreateResponse>
</soap:Body>
</soap:Envelope> 
```

**产生想要的正确结果：**

```
<Entity>RIM_BPS</Entity> 
```

# android - 令牌上的文件复制操作 Android 语法错误

> ID：14800748
> 
> 赞同：0
> 
> 时间：2013-02-10T17:54:12.410
> 
> 标签：android, file, copy, action, directory

以下代码在我用 标记的地方给了我一个错误`~~~~ ~~~~`。它说：

> 标记的语法错误，错误的构造

有人可以帮我吗？

如果您帮助我解决此错误，我将非常感激，或者给我另一个文件夹复制代码！

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        File srcFolder = new File(Environment.getExternalStorageDirectory()
                + "/folder/");
        File destFolder = new File(
                "/data/data/folder");

        Button button1 = (Button) findViewById(R.id.button1);
        button1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                ~~~~public void~~~~ copyFolder(srcFolder, destFolder);
                {

                    if(src.isDirectory()){

                        //if directory not exists, create it
                        if(!dest.exists()){
                           dest.mkdir();
                           Log.i("Status : ", "Directory copied from " 
                                          + srcFolder + "  to " + destFolder);
                        }

                        //list all the directory contents
                        String files[] = src.list();

                        for (String file : files) {
                           //construct the src and dest file structure
                           File srcFile = new File(src, file);
                           File destFile = new File(dest, file);
                           //recursive copy
                           copyFolder(srcFile,destFile);
                        }

                    }else{
                        //if file, then copy it
                        //Use bytes stream to support all file types
                        InputStream in = new FileInputStream(src);
                            OutputStream out = new FileOutputStream(dest); 

                            byte[] buffer = new byte[1024];

                            int length;
                            //copy the file content in bytes 
                            while ((length = in.read(buffer)) > 0){
                               out.write(buffer, 0, length);
                            }

                            in.close();
                            out.close();
                            Log.i("Status : ","File copied from " + srcFolder + " to " + destFolder);
                    }
                }
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:06:10.123

在该行中，您应该调用该函数。并且该函数应该在整个 onCreate 方法之后构造：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    File srcFolder = new File(Environment.getExternalStorageDirectory()
            + "/folder/");
    File destFolder = new File(
            "/data/data/folder");
    Button button1 = (Button) findViewById(R.id.button1);
    button1.setOnClickListener(new OnClickListener() {    
        @Override
        public void onClick(View v) {
           copyFolder(srcFolder, destFolder);
        }
    });
}

public void copyFolder(String srcFolder,String  destFolder) {    
                if(src.isDirectory()){    
                    //if directory not exists, create it
                    if(!dest.exists()){
                       dest.mkdir();
                       Log.i("Status : ", "Directory copied from " 
                                      + srcFolder + "  to " + destFolder);
                    }

                    //list all the directory contents
                    String files[] = src.list();

                    for (String file : files) {
                       //construct the src and dest file structure
                       File srcFile = new File(src, file);
                       File destFile = new File(dest, file);
                       //recursive copy
                       copyFolder(srcFile,destFile);
                    }

                }else{
                    //if file, then copy it
                    //Use bytes stream to support all file types
                    InputStream in = new FileInputStream(src);
                        OutputStream out = new FileOutputStream(dest); 

                        byte[] buffer = new byte[1024];

                        int length;
                        //copy the file content in bytes 
                        while ((length = in.read(buffer)) > 0){
                           out.write(buffer, 0, length);
                        }

                        in.close();
                        out.close();
                        Log.i("Status : ","File copied from " + srcFolder + " to " + destFolder);
                }
            }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:07:37.487

该错误是因为您的 onClick 方法中有一个方法。

你应该只带指令和运行方法，而不是定义新的方法。

一个解决方案可能是将 copyFolder 方法定义到您的类中，并在您的 onClick 方法中运行它。

# wpf - F# WPF VS2012 项目中的 printfn 和调试输出

> ID：14800751
> 
> 赞同：1
> 
> 时间：2013-02-10T17:54:29.827
> 
> 标签：wpf, f#, visual-studio-2012

我正在 F# 中试验 WPF。Visual Studio 2012 有几个在线项目模板：

*   F# 和 C# 混合 MVVM。用于视图的标准 C# WPF 可执行文件和用于其余部分的 f# 库。
*   纯 F# MVVM
*   纯 F# 空

我从第一个选项开始，但后来切换到纯 f# 解决方案。还有一个问题我无法解决。

我不再在 VS 输出窗口中看到 printfn 结果。虽然如果我放一个断点，我会看到代码到达。

这是一个示例：

```
module MainApp
open System
open System.Windows
open System.Windows.Controls
open FSharpx

type MainWindow = XAML<"MainWindow.xaml">

let loadWindow() =
    let window = MainWindow()

    printfn "%s" "Test"

    window.Root

[<STAThread>]
(new Application()).Run(loadWindow()) |> ignore 
```

这就是模板创建的 App.fs，只需添加一个 - printfn。输出 - 没有。

我想知道是什么让它与众不同。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T17:56:59.530

您可以使用[System.Diagnostics.Debug.WriteLine](http://msdn.microsoft.com/en-gb/library/system.diagnostics.debug.writeline.aspx)写入 VS 输出窗口。必须定义[TRACE](http://msdn.microsoft.com/en-us/library/aa983575%28v=vs.71%29.aspx)常量，它在 Debug 中是默认的。

printfn写入标准输出，标准输出是控制台应用程序中的控制台窗口[。](http://msdn.microsoft.com/en-us/library/ee370571.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T21:03:52.810

或者，您可以将项目设置为控制台应用程序，这样您将拥有一个控制台窗口以及 WPF 窗口，并且您可以像往常一样使用 printfn。

# python - 带有来自 QtDesigner 的自定义 UI 的 Qt mdi 应用程序

> ID：14800754
> 
> 赞同：0
> 
> 时间：2013-02-10T17:54:36.147
> 
> 标签：python, qt, qt-designer

假设我有两个来自 Qt Designer 的 UI 文件：mainform.ui 存储 mdiArea，figureslist.ui 存储 listView。

现在我想创建一个 mdi 应用程序，它可以打开多个 figureList 窗口。

```
import sys
from PyQt4 import QtGui
#from PyQt4.QtGui import *
from PyQt4 import QtCore, QtGui, uic

class HelloWorldApplication(QtGui.QApplication):
    def __init__(self, args):
        QtGui.QApplication.__init__(self, args)
        self.maindialog = MainUI(None)

class MainUI(QtGui.QMainWindow):
    def __init__(self, parent):
        QtGui.QMainWindow.__init__(self, parent)

        self.ui = uic.loadUi("mainform.ui")
        self.ui.show()

        # create child and show it
        child = self.createFiguresListView()

        # problem here (*)
        child.show()

    def createFiguresListView(self):
        child = FiguresListView()
        self.ui.mdi.addSubWindow(child)
        return child

class FiguresListView(QtGui.QWidget):
    def __init__(self):
        super(FiguresListView, self).__init__()
        self.ui = uic.loadUi("figureslist.ui")

app = HelloWorldApplication(sys.argv)
sys.exit(app.exec_()) 
```

但不幸的是，我的子窗口显示为折叠而没有在figureslist.ui中描述的布局，但就像mdi child，但是如果我将标有（*）的代码替换为child.ui.show（）它显示实际布局，但不采取行动像mdi的孩子。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:26:58.990

您忘记为 ui 设置父级（另外，如果您没有在 Designer 中指定最小尺寸，则需要在此处进行）：

```
class FiguresListView(QtGui.QWidget):
    def __init__(self):
        super(FiguresListView, self).__init__()
        self.ui = uic.loadUi("figureslist.ui", self)
        #self.setMinimumSize(400, 200) 
```

# nuget - 当同时存在可移植类库和不可移植类库时，NuGet 如何解析引用？

> ID：14800755
> 
> 赞同：5
> 
> 时间：2013-02-10T17:54:42.003
> 
> 标签：nuget, portable-class-library

我正在开发一个可移植类库，并想了解 NuGet 使用的策略来确定它是否应该使用 PCL 或特定于平台的库（如果存在）。

我构建了一个引用 JSON.NET 的示例项目，它支持各种平台以及可移植类库。以下是 NuGet 提供的 JSON.NET：

*   净20
*   网35
*   净40
*   sl3-wp
*   SL4
*   sl4-windowsphone71
*   winrt45
*   便携-net40+sl4+wp7+win8

首先，我创建了一个面向 NET 4.0 的库，并使用 NuGet 添加了对 JSON.NET 的引用。它添加了对 net40 库的引用。好的，我认为这是因为存在精确的目标平台匹配。然后我针对 NET 4.0.3。仍然引用了net40版本。然后我尝试了 Silverlight 5，它在非便携式库中没有完全匹配。但是选择了一个 sl4 库。并且针对 Windows Phone 8 导致了 sl4-windowsphone71 库的选择。

所以看起来只要目标平台有一个不可移植的兼容库，它就会被优先考虑。在 JSON.NET 的情况下，仅当另一个可移植库引用 PCL 时才会选择它。如果是这样，我很困惑以下情况将如何解决：

库 A 有两个版本：

*   净40
*   便携-net40+sl4+wp7+win8

库 B 引用 A 并有一个版本：

*   便携-net40+sl4+wp7+win8

最后，库 C 引用 A 和 B 并且有一个版本：

*   净40

将如何引用为 C 解析的库 A？由于 C 直接引用 A，它应该获得 A 的 net40。但由于 C 还引用了可移植的 B，它还应该获得 A 的可移植版本。因此，必须为 C 部署库 A 的可移植版本和 net40 版本解决其依赖关系。我对么？

**更新**。我创建了几个测试项目，看起来只要库 C 包含对不可移植库 A 的直接引用，这个版本的库就会获胜并覆盖 A 的 PCL 版本。所以看起来像这样的场景不允许 - 如果库也间接引用了它的不同（便携）版本，则它不能直接引用非便携库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T23:22:15.200

NuGet will use the "most specific", or the "narrowest" match possible when deciding which version of a library to reference.

The portable versions of your library should be compatible with the platform-specific versions of your library. I think of this as just the more general case of compatibility between different versions of a framework. In your example, replace net40 and portable with net45 and net40\. In that case, NuGet should use the .NET 4.5 version of a dependency, but if you have another dependency compiled against the .NET 4 version, it should work if at runtime it has the .NET 4.5 version instead.

To be compatible, the different versions of your library should have the same identity (name, version number, and (if applicable) strong name key), and should be API compatible, which means that a version of your library for a specific platform should have all the same APIs as a portable version that can run on that platform (the platform specific version can add additional APIs, however).

# java - 在java中调用二维数组的方法

> ID：14800756
> 
> 赞同：-4
> 
> 时间：2013-02-10T17:54:42.677
> 
> 标签：java, arrays, syntax, methods, 2d

我正在为一门涉及骑士之旅的启发式编程课程做作业。目前，我有一种方法，旨在用“棋盘”对象填充 8x8 棋盘数组，这些对象知道棋盘上该空间的“可访问性”，以及该棋盘是否曾经被实际访问过。但是，当我创建 8x8 数组并尝试为此数组调用我的“填充”方法时，我收到一条错误消息，告诉我该数组在我正在使用的包中不存在......我在这里做错了什么？不应该像声明数组和调用方法一样简单吗

```
Board [][] chessboard = new Board [8][8];
chessboard.fill(); 
```

还是我的语法错误？这里的参考是我的代码，它创建了我的 Board 对象、我的可访问性矩阵，然后将这些可访问性值复制到我的 8x8 数组上的每个 Board 对象。谢谢！

```
public class Board {

/*
 * Initialize array that emulates chessboard. Will be 8x8, each space will 
 * contain the number of squares from which that space can be reached. The 
 * knight will start at a new space each tour and choose each move based on
 * the "accessability" of each square within its "move pool". The knight 
 * will move to the square with least accesibility each time. When the 
 * Knight is moved to a square, this square will be marked as visited so 
 * that it cannot be visited again. Also, any space that could have been 
 * moved to but was not will have its accesability reduced by 1\.     
 */

private boolean visited;
private int accessValue;
private Board [][] chess = new Board[8][8];

public Board(int acessability, boolean beenVisited)
{
    visited = beenVisited;
    accessValue = acessability;  
}

int [][] accessMatrix = {{2,3,4,4,4,4,3,2},
                        { 3,4,6,6,6,6,4,3 },
                        { 4,6,8,8,8,8,6,4 },
                        { 4,6,8,8,8,8,6,4 },
                        { 4,6,8,8,8,8,6,4 },
            { 4,6,8,8,8,8,6,4 },
            { 3,4,6,6,6,6,4,3 },
            { 2,3,4,4,4,4,3,2}};

public void fill()
{

for (int i = 0 ; i < accessMatrix.length ; i++)
{
    chess[0][i].changeAccess(accessMatrix[0][i]);
}
for (int i = 0 ; i < accessMatrix.length ; i++)
{
    chess[1][i].changeAccess(accessMatrix[1][i]);
}
for (int i = 0 ; i < accessMatrix.length ; i++)
{
    chess[2][i].changeAccess(accessMatrix[2][i]);
}
for (int i = 0 ; i < accessMatrix.length ; i++)
{
    chess[3][i].changeAccess(accessMatrix[3][i]);
}
for (int i = 0 ; i < accessMatrix.length ; i++)
{
    chess[4][i].changeAccess(accessMatrix[4][i]);
}
for (int i = 0 ; i < accessMatrix.length ; i++)
{
    chess[5][i].changeAccess(accessMatrix[5][i]);
}
for (int i = 0 ; i < accessMatrix.length ; i++)
{
    chess[6][i].changeAccess(accessMatrix[6][i]);
}
for (int i = 0 ; i < accessMatrix.length ; i++)
{
    chess[7][i].changeAccess(accessMatrix[7][i]);
}

}   

public int getAccess()
{
return accessValue;
}

public int changeAccess(int newAccess)
{
int accessNew;
accessNew = newAccess;
return accessNew;    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:01:38.090

在这段代码中：

```
Board [] chessboard = new Board [8][8]; 
```

a 的类型`Board[8][8]`是`Board[][]`

所以应该这样写来编译：

```
Board [][] chessboard = new Board [8][8]; 
```

（然后你必须在你的数组中创建每个 Board() 对象，我把它留给你作为练习）

在这段代码中：

```
chessboard.fill(); 
```

您正在调用 Board 的方法。您只能在 Board 对象上执行此操作，而不能在数组上执行此操作。如果要在数组中的每个板对象上调用此方法，则必须执行以下操作：

```
for (int i = 0; i <8; i ++) {
    for (int j = 0; j < 8; j ++){
         chessboard[i][j].fill();
    }
} 
```

但我觉得还有更多，因为有一些混乱。我认为棋盘是棋盘，而不是棋盘阵列。您可能想要创建一个棋盘并填充一次。正确的？然后只需执行以下操作：

```
 Board chessboard = new Board();
 chessboard.fill(); 
```

# c#-4.0 - 对象引用未设置为对象的实例 - storyboard.begin()

> ID：14800759
> 
> 赞同：0
> 
> 时间：2013-02-10T17:54:54.163
> 
> 标签：c#-4.0

我有这个*代码。*我想`x:Key = "CardAnimation1"`在完成以前的故事板后开始另一个故事板。

```
private void Storyboard_Completed_2(object sender, EventArgs e)
{
    Storyboard sb = new Storyboard();            
    sb= (Storyboard)this.Resources["CardAnimation1"];
    sb.Begin();

} 
```

我在 sb.begin() 中遇到了这个异常。不知道为什么？任何帮助都将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:56:26.800

`this.Resources["CardAnimation1"]`为空/不存在。

您正在为 分配一个`null`值`sb`，替换您初始化它的值。

然后调用`.Begin`此`null`值，导致异常。

解决方案：

确保`this.Resources["CardAnimation1"]`其中包含正确的值。

# bash - 使用 Putty 退出 Bash

> ID：14800768
> 
> 赞同：-1
> 
> 时间：2013-02-10T17:56:14.687
> 
> 标签：bash, ssh, putty

我正在尝试 ssh 进入服务器。我输入我的密码（被接受），然后它带我进入：

```
using username "####".
##hostname## password: ##This is correct
Last lgin: Sun Feb 10 11:47:27 2013 from ####
-bash-3.2$ 
```

如何退出 bash？我试过注销并退出，他们都退出了腻子。当我再次打开 Putty 并登录时，我需要再次访问 -bash-3.2$。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T18:31:59.083

你看到的是提示，这意味着服务器让你与它互连的方式。

如果你想通过服务器“导航”，你将不得不使用`cd`（更改目录）、`ls`（列表）、`cp`（复制）等命令。例如尝试键入`pwd`，您将看到您所在的当前目录（pwd 代表打印工作目录）。

这方面的教程有数百万，谷歌它找人。例如，我找到了这个：[http ://www.gamexe.net/other/beginner-guide-ssh/](http://www.gamexe.net/other/beginner-guide-ssh/)

# c++ - 如何通过重载 << 运算符打印出向量中的对象？

> ID：14800771
> 
> 赞同：0
> 
> 时间：2013-02-10T17:56:22.970
> 
> 标签：c++, class, visual-c++, vector, operator-overloading

好的，所以我对所有这些运算符重载的东西感到困惑，语法对我来说很奇怪，而且我也不是很擅长编程。因此，显然在互联网上环顾四周，我认为我打印出对象的唯一方法`cout <<`是重载它。所以我有一个对象向量，通常如果我只有一个整数或字符串的常规向量，那么我只需使用一个迭代器并遍历每个对象，然后取消引用它以打印出其中的内容，但我不认为该技术适用于对象：-/这是我到目前为止所拥有的......帮助！

```
BarOne.h   //my header file
#include <string>
#include <vector>

using namespace std;

class BarOne
{
private:
    string name;
    string type;
    string size;
    vector<BarOne> bar;   //vector of BarOne objects
    vector<BarOne>::iterator it;  //iterator for bar
public:
    BarOne();    //constructor
    void addBottle(string, string, string);  //adds a new bottle to bar
    void revealSpace();
    void printInventory();
    friend ostream& operator<<(ostream& os, const BarOne& b);
}; 
```

我的实现看起来像：

```
BarOne.cpp    //implementation
#include "BarOne.h"
#include <iostream>
#include <string>

using namespace std;

BarOne::BarOne()
{
    //adding 4 default bottles
}

void BarOne::addBottle(string bottleName, string bottleType, string bottleSize)
{
    name = bottleName;
    type = bottleType;
    size = bottleSize;
}

void BarOne::printInventory()
{
    for (it = bar.begin(); it != bar.end(); ++it)
    {
        cout << *it << endl;
    }
}

ostream& operator<<(ostream& os, const BarOne& b)
{
    os << b.name << "\t\t\t" << b.type << "\t\t\t" << b.size;
    return os;
} 
```

那么，当我在 main 中调用 printInventory 时，它什么也没做呢？我做错了超载吗？语法错误？

好的，这也是主要的：

```
#include "BarOne.h"
#include <iostream>
#include <string>

using namespace std;

int main()
{

    string Tiqo, Peruvian, Wellington, Smooze;
    string vodka;
    string rum;
    string whiskey;
    string small;
    string medium;
    string large;

    //default bottles
    vector<BarOne> bar;   //vector of BarOne objects
    vector<BarOne>::iterator it;  //iterator for bar

    BarOne Inventory;   //BarOne object
    Inventory.addBottle(Tiqo, vodka, large);
    bar.push_back(Inventory);
    Inventory.addBottle(Peruvian, rum, medium);
    bar.push_back(Inventory);
    Inventory.addBottle(Wellington, vodka, large);
    bar.push_back(Inventory);
    Inventory.addBottle(Smooze, whiskey, small);
    bar.push_back(Inventory); 
```

^^^这只是其中的一部分...其余的只是格式化程序运行时的显示方式和内容。好吧，我会尝试像有人建议的那样将课程分开。AddBottle 在向量中添加该对象的信息对吗？它获取信息，然后将其添加到变量名称、类型和大小中，然后将其放入向量“bar”中。或者没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:22:22.507

你没有向我们展示你的`main()`程序。该代码以及将条形内容与条形混淆的类设计导致您看到的行为。

对于`operator <<`输出瓶子的数据实际上是可以的。但我确信`BarOne`它被调用的有一个空`bar`向量。您`addBottle()`不会在任何地方添加任何东西（特别是不会添加到包含的`bar`）。`BarOne`相反，它只是设置外部对象 的属性（数据成员） 。

这种混乱的根源是你的类设计，其中 a`BarOne`显然是为了作为瓶子和酒吧（包含瓶子）。

我建议您重新启动并尝试使用单独的`Bar`和`Bottle`类。

顺便说一句：将您在本地循环中使用的迭代器保留为类成员不是一个好主意。这种方法迟早会遇到重入问题。循环迭代器应该是局部变量，最好限定在循环范围内。

# apache - mod_rewrite，我想重写：index.php?page=contact 联系方式

> ID：14800773
> 
> 赞同：-1
> 
> 时间：2013-02-10T17:56:26.857
> 
> 标签：apache, mod-rewrite, url-rewriting

我希望使用我网站的人在浏览器地址栏中看到 site.com/contact，而不是 site.com/index.php?page=contact。

我是 mod_rewrite 的新手，到目前为止，我来到了这个规则。

我现在的代码是：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?page=$1 
```

我将如何做到这一点？

编辑：问题是我的联系页面的 URL 仍然显示：site.com/index.php?page=contact。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:59:36.420

最后一部分，RewriteRule，应该是这样的：

```
RewriteRule ^(contact)/?$ index.php?page=$1 
```

这意味着如果用户键入“mysite.com/contact”，他们实际上正在被提供“mysite.com/index.php?page=contact”。

括号创建捕获组，转换为`$1`. 对于每个连续的括号，捕获组变量递增 - `$2`、`$3`等。

# java - 应用程序不断崩溃

> ID：14800775
> 
> 赞同：1
> 
> 时间：2013-02-10T17:56:42.503
> 
> 标签：java, android

我现在已经获得了所有代码，但一直在崩溃。基本上，代码是一个按钮，单击该按钮时，会在金额中添加一个数字。因此，单击一次时，它将为 1；再次单击将变为 2，然后是 3，以此类推，就像一个股票行情一样。

```
package com.example.counter;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;

public class MainActivity extends Activity {
// Private member field to keep track of the count
private int mCount = 0;

public static final String PREFS_NAME = "com.example.myApp.mCount";
private SharedPreferences settings = null;
private SharedPreferences.Editor editor = null;

/** ADD THIS METHOD **/
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);  // Always call the superclass method first
  settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
}

@Override
public void onPause() {
  super.onPause();  // Always call the superclass method first
  mCount = settings.getInt("mCount", 0);
}

@Override
public void onResume() {
  super.onResume();  // Always call the superclass method first
  editor = settings.edit(); /** ADD THIS LINE **/
  editor.putInt("mCount", mCount);
  editor.commit();
}
} 
```

xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/TextViewCount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />

<Button
    android:id="@+id/ButtonCount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/TextViewCount"
    android:layout_alignRight="@+id/TextViewCount"
    android:layout_marginBottom="22dp"
    android:text="Count" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:05:19.100

您应该在中创建`SharedPreferences`对象`onCreate()`；在此之前，它不能保证被创建。

此外，您应该调用`edit()`每个`onResume()`; 否则，您可能会在其中获得旧数据`Editor`。

```
public class MainActivity extends Activity {
    // Private member field to keep track of the count
    private int mCount = 0;

    public static final String PREFS_NAME = "com.example.myApp.mCount";
    private SharedPreferences settings = null;
    private SharedPreferences.Editor editor = null;

    /** ADD THIS METHOD **/
    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);  // Always call the superclass method first
      settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
    }

    @Override
    public void onPause() {
      super.onPause();  // Always call the superclass method first
      mCount = settings.getInt("mCount", 0);
    }

    @Override
    public void onResume() {
      super.onResume();  // Always call the superclass method first
      editor = settings.edit(); /** ADD THIS LINE **/
      editor.putInt("mCount", mCount);
      editor.commit();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:01:45.717

始终检查您的变量 ( `settings`, `editor`) 是否不为空...

```
@Override
public void onPause() {
  super.onPause();  // Always call the superclass method first
  SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
  mCount = settings.getInt("mCount", 0);
}

@Override
public void onResume() {
   super.onResume();  // Always call the superclass method first
   SharedPreferences.Editor editor = getSharedPreferences(PREFS_NAME, MODE_PRIVATE).edit();
  editor.putInt("mCount", mCount);
 editor.commit();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:04:24.307

尝试将 getSharedPreferences 移动到 Activity.onCreate 我认为在此之前无法完成。

```
// Private member field to keep track of the count
private int mCount = 0;

public static final String PREFS_NAME = "com.example.myApp.mCount";
private SharedPreferences settings;
private SharedPreferences.Editor editor; 

@Override
public void onCreate(Bundle savedInstanceState) {        
    super.onCreate(savedInstanceState);
    settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
    editor = settings.edit();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T18:04:45.937

看这里

这样做。我希望它会帮助你。

```
 public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.layout);
   ..some code.
   SharedPreferences settings = getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);
   Editor editor = settings.edit();
 } 
```

# spring - spring MVC hibernate crud 示例应用程序

> ID：14800784
> 
> 赞同：1
> 
> 时间：2013-02-10T17:58:09.043
> 
> 标签：spring, maven, spring-transactions, hibernate3

> 现在我收到此错误....仍然我不知道如何解决....请至少尝试解决此错误...但是我无法提前处理..!!!!!!! ！！
> 
> HTTP 状态 500 -
> 
> * * *
> 
> 类型异常报告
> 
> 信息
> 
> 描述 服务器遇到一个内部错误 () 阻止它完成这个请求。
> 
> 例外
> 
> org.springframework.web.util.NestedServletException：请求处理失败；嵌套异常是 java.lang.ClassCastException: java.lang.Integer 不能转换为 java.lang.Long org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:656) org.springframework.web.servlet.FrameworkServlet .doGet(FrameworkServlet.java:549) javax.servlet.http.HttpServlet.service(HttpServlet.java:617) javax.servlet.http.HttpServlet.service(HttpServlet.java:717) org.springframework.web.filter.CharacterEncodingFilter .doFilterInternal(CharacterEncodingFilter.java:88) org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) org.springframework.web 。筛选。
> 
> 根本原因
> 
> java.lang.ClassCastException：java.lang.Integer 无法转换为 java.lang.Long com.os.springjpa.controller.BookController.listPaging(BookController.java:102) sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) sun .reflect.NativeMethodAccessorImpl.invoke(Unknown Source) sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) java.lang.reflect.Method.invoke(Unknown Source) org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod( HandlerMethodInvoker.java:176) org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426) org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414) org.springframework.web.servlet。DispatcherServlet.doDispatch(DispatcherServlet.java:790) org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719) org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644) org.springframework。 web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549) javax.servlet.http.HttpServlet.service(HttpServlet.java:617) javax.servlet.http.HttpServlet.service(HttpServlet.java:717) org.springframework。 web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88) org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.爪哇：76）
> 
> note Apache Tomcat/6.0.20 日志中提供了根本原因的完整堆栈跟踪。
> 
> * * *
> 
> Apache Tomcat/6.0.20

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:17:21.960

它找不到您的实体。将此添加到您的 sessionFactory bean 声明中

```
<property name="annotatedClasses">
<list>
<value>com.os.springjpa.entity.Book</value>             
</list>
</property> 
```

在创建更多注释实体时根据需要添加更多值

# algorithm - 解决多源多目的图游戏

> ID：14800788
> 
> 赞同：1
> 
> 时间：2013-02-10T17:58:49.827
> 
> 标签：algorithm, graph, artificial-intelligence, game-theory

我正在尝试对下面的图形问题进行分类或找到其解决方案的提示。

有一个（邻接）矩阵可以包含 3 种类型的元素：单位、点和简单地形。

地形没有特定的含义。

单位有一个位置（x,y 由矩阵定义）和它们可以获取的点数。
点有一个位置（x,y 由矩阵定义）。
获取一个点的成本是一个点和一个单位之间的曼哈顿距离。
每个点只能由一个单位获得。

问题是：如何找到单位获取点的最小成本配置，使得单位的所有资源都被耗尽？

示例：
u1 可以获得 3 分
u2 可以获得 2 分

```
p1 n n p2  
n u1 n p3  
p4 n n n  
n n u2 p5 
```

最佳解决方案之一是：

```
u1 = p1, p2, p4  
cost(u1)=2+3+2=7  
u2 = p3, p5  
cost(u2)=3+1=4  
Total cost = 11 
```

（此配置的最低要求）

注意：我已经尝试使用统一成本搜索和 A*（使用简单的启发式算法）来解决这个问题，但即使对于小尺寸的矩阵，我也会得到非常多的状态并且内存不足。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:15:03.467

我可以将其简化为[最小成本最大流量](http://en.wikipedia.org/wiki/Minimum-cost_flow_problem)问题。

让我们做一个网络。为每个单元和每个点分配一个顶点。对于每一对（单位、点），添加一条容量为 1 且成本等于相应曼哈顿距离的有向边。添加一个接收器，将其连接到所有单元。添加一个陷阱并将所有点连接到它。

分配以下成本和容量值：
**cap( u, v ) = 1**，如果从 u 到 v
**cost( u, v ) = 0**，如果 u = sink 或 v = trap；否则它等于从单元 u 到点 v 的曼哈顿距离。

现在，如果我们在这个网络中找到 min-cost-max-flow，它将成为您问题的解决方案。为什么 ？因为我们找到了将一个单元流从每个“单元”顶点移动到某个“点”顶点的最小成本方式，这相当于原始问题。

# c# - 组合框重复条目

> ID：14800791
> 
> 赞同：3
> 
> 时间：2013-02-10T17:59:07.443
> 
> 标签：c#, combobox

我正在使用`comboBox.Items.Add(entry);`. 但是如何避免组合框中的重复条目（即同名条目）。有没有lib函数

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T18:01:28.777

添加前检查项目：

```
if (!comboBox.Items.Contains(entry))
    comboBox.Items.Add(entry); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T18:03:05.553

`Items`集合有一个`Contains`方法

```
if (!comboBox.Items.Contains(entry)) {
    comboBox.Items.Add(entry);
} 
```

* * *

`ComboBox.Items`属性是 type `System.Windows.Forms.ComboBox.ObjectCollection`，它声明了这样的`Contains`方法

```
public bool Contains(object value) 
```

* * *

如果要使用`AddRange`，则必须提供数组中的项目。因此，您必须确保该数组不包含重复项。此外，如果`ComboBox`已经包含项目，则必须确保此数组不包含相同的项目。

让我们首先假设`ComboBox`是空的，并且您的项目是由一些枚举给出的（`List<T>`例如，这可能是一个或一个数组）：

```
comboBox.Items.AddRange(
    itemsToAdd
        .Distinct()
        .ToArray()
); 
```

`using System.Linq;`您的代码顶部必须有一个。此外，您可能想要订购这些物品。我假设它们是`string`类型：

```
comboBox.Items.AddRange(
    itemsToAdd
        .Distinct()
        .OrderBy(s => s)
        .ToArray()
); 
```

* * *

如果 ComboBox 已包含项目，则必须将它们从添加的项目中排除

```
comboBox.Items.AddRange(
    itemsToAdd
        .Except(comboBox.Items.Cast<string>())
        .Distinct()
        .OrderBy(s => s)
        .ToArray()
); 
```

（再次假设这`itemsToAdd`是字符串的枚举。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T18:04:57.987

使用[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)类绑定控件，具体如何取决于表示技术，或者使用 LINQ 的[Distinct](http://msdn.microsoft.com/en-us/library/bb338049.aspx)方法过滤重复项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T16:14:43.180

将物品投射到`String`

```
var check = comboBox1.Items.Cast<string>().Any(c => c.ToString() == "test"); 
```

# vb.net - 读取 REG_Binary

> ID：14800798
> 
> 赞同：0
> 
> 时间：2013-02-10T18:00:12.003
> 
> 标签：vb.net

我有这段代码来读取注册表值，替换其中的一些部分，然后将其存储到文本文件中：

```
Dim key As Object = My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\\APP", "KEY", Nothing
Dim Number1 As String
Dim output As String
Output = key
Number1 = "12345"
output = Replace(output, "1", Number1)
My.Computer.FileSystem.WriteAllText("C:/value.txt", output, True) 
```

现在它可以完美地适用于除键之外的所有类型的注册表键`REG_BINARY`......当我尝试读取 REG_BINARY 键时，我收到此错误：

> 从类型`Byte()`到类型`String`的转换无效。

换句话说，我可以将`REG_BINARY`注册表项——例如`C5 A2 A3 C1` ——读入字符串（文本），然后从文本中替换数字 1 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:14:06.200

您正在寻找`BitConverter.ToString()`，它将字节数组转换为十六进制数字字符串。

# mongodb - 例外：无法从 BSON 类型 OID 转换为字符串

> ID：14800800
> 
> 赞同：1
> 
> 时间：2013-02-10T18:00:22.333
> 
> 标签：mongodb

我是 mongo db 的新手，所以这是我在尝试通过控制台在 mongodb 中将名称更改为大写时遇到以下错误的问题。这是查询：

```
t.aggregate([{$project:{name:{$toUpper:"$_id"} , _id:0}}]) 
```

另外，我手动插入了所有以“_id”为名称的字段，例如“_id”：“joe”

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:29:03.520

您的语法看起来是正确的，因此您应该尝试查找不是字符串的文档。在 shell 中输入：

```
db.t.find({}).forEach(function(item) { if(typeof item._id !== 'string') { print(item._id); }) 
```

这将输出任何不是字符串的 ID。

# windows - 在 MSMQ 等队列中发送电子邮件

> ID：14800807
> 
> 赞同：2
> 
> 时间：2013-02-10T18:01:18.213
> 
> 标签：windows, asp.net-mvc-3, azure, smtp

我有 asp.net MVC 3 应用程序，可以发送各种电子邮件，例如客户端注册、激活等

目前使用 smtpclient 和 smtp server authsmtp.com。在过去的 3 个月中，有多次应用程序在发送电子邮件时挂起并且 smtp 没有响应。

我现在需要审查流程并通过以下改进进行改进。

1.) 当 smtp 服务器没有响应时，应用程序不应该挂起。2.) 如果 smtp 服务器不可用，则将电子邮件排队等待稍后发送。在接下来的 24 小时内重新尝试发送 3.) 为排队、发送或失败的电子邮件添加额外的日志记录（24 小时后）

我想知道实现上述要求的最佳选择。

该应用程序托管在 Windows azure 环境中。

我想使用 MSMQ 提供消息队列，一旦每个任务开始和完成，我就可以记录详细信息。

参考：[http ://dotnetslackers.com/articles/aspnet/Sending-email-from-ASP-NET-MVC-through-MVC-and-MSMQ-Part1.aspx](http://dotnetslackers.com/articles/aspnet/Sending-email-from-ASP-NET-MVC-through-MVC-and-MSMQ-Part1.aspx)

问题是 Windows azure 不支持 MSMQ。

请指教 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:34:46.157

WindowsAzure.com 上有一个示例，其中包含与此[http://www.windowsazure.com/en-us/develop/net/tutorials/multi-tier-web-site/1-overview/类似的主题](http://www.windowsazure.com/en-us/develop/net/tutorials/multi-tier-web-site/1-overview/)

# ios - UIPopoverController setting frame size

> ID：14800820
> 
> 赞同：1
> 
> 时间：2013-02-10T18:02:10.390
> 
> 标签：ios, xcode

I am creating a popover in this way:

```
popoverController = [[UIPopoverController alloc]initWithContentViewController:browser];
[popoverController presentPopoverFromRect:CGRectMake(44, 400, 600, 800) inView:self.view permittedArrowDirections:0 animated:YES]; 
```

for some strange reason whatever CGRectMake size I put, the result is the same, the popover takes all the hight of my view and half of the width. Why is this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T18:04:36.007

You may have to set [contentSizeForViewInPopover](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/contentSizeForViewInPopover) property for your content view controller before presenting the popover.

# ember.js - 某些页面状态不可收藏

> ID：14800824
> 
> 赞同：0
> 
> 时间：2013-02-10T18:02:44.797
> 
> 标签：ember.js

[此 JSBin](http://jsbin.com/erafor/3#/companies)具有模型的`new`、`edit`、`list`页面状态`Company`。

除一个之外的所有页面状态`edit`都是可收藏的，即页面重新加载会根据 URL 将页面恢复到相同的状态。

不知道为什么在页面重新加载时编辑状态没有恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:34:54.903

此错误是由[此处](https://github.com/emberjs/ember.js/issues/2026)和[此处](https://github.com/emberjs/ember.js/issues/2052)记录的已知 Ember 问题引起的。

解决方法是[这个](http://jsbin.com/erafor/10/edit)

如果您也遇到此问题，请 +1 以引起注意。

# freetype - 在单色 FreeType 字形缓冲区中索引像素

> ID：14800827
> 
> 赞同：0
> 
> 时间：2013-02-10T18:02:50.517
> 
> 标签：freetype

我想将单色 FreeType 字形转换为 RGBA 无符号字节 OpenGL 纹理。像素 (x, y) 处的纹理颜色为 (255, 255, alpha)，其中

```
alpha = glyph->bitmap.buffer[pixelIndex(x, y)] * 255 
```

我使用加载我的字形

```
FT_Load_Char(face, glyphChar, FT_LOAD_RENDER | FT_LOAD_MONOCHROME | FT_LOAD_TARGET_MONO) 
```

目标纹理的尺寸为`glyph->bitmap.width * glyph->bitmap.rows`. 我已经能够索引一个灰度字形（使用 just 加载`FT_Load_Char(face, glyphChar, FT_LOAD_RENDER)`）

```
glyph->bitmap.buffer[(glyph->bitmap.width * y) + x] 
```

不过，这似乎不适用于单色缓冲区，并且我的最终纹理中的字符被打乱了。

在单色字形缓冲区中获取像素 (x, y) 值的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T01:28:10.227

基于[我在 Gamedev.net 上开始的这个线程](http://www.gamedev.net/topic/638764-indexing-pixels-in-monochrome-freetype-glyph/)，我提出了以下函数来获取 (x, y) 处像素的填充/空状态：

```
bool glyphBit(const FT_GlyphSlot &glyph, const int x, const int y)
{
    int pitch = abs(glyph->bitmap.pitch);
    unsigned char *row = &glyph->bitmap.buffer[pitch * y];
    char cValue = row[x >> 3];

    return (cValue & (128 >> (x & 7))) != 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T00:54:52.627

前段时间我有一个类似的问题。所以我会尽力帮助你。

> 目标纹理的尺寸为`glyph->bitmap.width * glyph->bitmap.rows`

这是 OpenGL 非常具体的维度。如果你把它四舍五入到二的幂会更好。

通常，您会在循环中获得每个字形。然后循环从 0 到 的每一行`glyph->bitmap.rows`。然后循环`unsigned char`从 0 到`glyph->pitch`. 通过处理获得字节的`glyph->bitmap.buffer[pitch * row + i]`位置（i 是内部循环的索引，row 是外部的索引）。例如：

```
if(s[i] == ' ') left += 20; else
    for (int row = 0; row < g->bitmap.rows; ++row) {
             if(kerning)
            for(int b = 0; b < pitch; b++){
                if(data[left + 64*(strSize*(row + 64 -  g->bitmap_top)) + b] + g->bitmap.buffer[pitch * row + b] < UCHAR_MAX)
                    data[left + 64*(strSize*(row + 64 -  g->bitmap_top)) + b] += g->bitmap.buffer[pitch * row + b];
                else
                    data[left + 64*(strSize*(row + 64 -  g->bitmap_top)) + b] = UCHAR_MAX;
            } else
        std::memcpy(data + left + 64*(strSize*(row + 64 -  g->bitmap_top)) , g->bitmap.buffer + pitch * row, pitch);
    }
    left += g->advance.x >> 6; 
```

此代码与 8 位位图（标准`FT_Load_Char(face, glyphChar, FT_LOAD_RENDER)`）相关。现在我尝试使用单色标志，这给我带来了麻烦。所以我的回答不能解决你的问题。如果您只想显示这封信，那么您应该看到我的[问题](https://stackoverflow.com/questions/14800667/incorrect-output-texture-on-quad)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T14:18:54.337

以下 Python 函数将`FT_LOAD_TARGET_MONO`字形位图解压缩为更方便的表示形式，其中缓冲区中的每个字节映射到一个像素。

我在我的博客上有更多关于使用 Python 和 FreeType 进行单色字体渲染的信息以及其他示例代码：http: [//dbader.org/blog/monochrome-font-rendering-with-freetype-and-python](http://dbader.org/blog/monochrome-font-rendering-with-freetype-and-python)

```
def unpack_mono_bitmap(bitmap):
    """
    Unpack a freetype FT_LOAD_TARGET_MONO glyph bitmap into a bytearray where each
    pixel is represented by a single byte.
    """
    # Allocate a bytearray of sufficient size to hold the glyph bitmap.
    data = bytearray(bitmap.rows * bitmap.width)

    # Iterate over every byte in the glyph bitmap. Note that we're not
    # iterating over every pixel in the resulting unpacked bitmap --
    # we're iterating over the packed bytes in the input bitmap.
    for y in range(bitmap.rows):
      for byte_index in range(bitmap.pitch):

        # Read the byte that contains the packed pixel data.
        byte_value = bitmap.buffer[y * bitmap.pitch + byte_index]

        # We've processed this many bits (=pixels) so far. This determines
        # where we'll read the next batch of pixels from.
        num_bits_done = byte_index * 8

        # Pre-compute where to write the pixels that we're going
        # to unpack from the current byte in the glyph bitmap.
        rowstart = y * bitmap.width + byte_index * 8

        # Iterate over every bit (=pixel) that's still a part of the
        # output bitmap. Sometimes we're only unpacking a fraction of a byte
        # because glyphs may not always fit on a byte boundary. So we make sure
        # to stop if we unpack past the current row of pixels.
        for bit_index in range(min(8, bitmap.width - num_bits_done)):

          # Unpack the next pixel from the current glyph byte.
          bit = byte_value & (1 << (7 - bit_index))

          # Write the pixel to the output bytearray. We ensure that `off`
          # pixels have a value of 0 and `on` pixels have a value of 1.
          data[rowstart + bit_index] = 1 if bit else 0

    return data 
```

# domain-driven-design - 在遵循 DDD 实践时，拥有值对象工厂是否有意义？

> ID：14800836
> 
> 赞同：1
> 
> 时间：2013-02-10T18:04:12.233
> 
> 标签：domain-driven-design, factory-pattern, value-objects

最近，我在考虑过去在尝试设计特定领域模型时遇到的一些问题，比如说地址，它可以在给定的上下文中编辑，但在另一个上下文中不可编辑。我目前的思维方式是，我将同时拥有地址的值对象版本和地址的实体，可能附加到客户帐户之类的东西上，以获取它的身份。

现在我意识到，如果我要创建一个新地址，例如当用户输入一个新地址时，我很可能还需要能够继续编辑该地址，也许还需要编辑任何预先存在的地址在相同的有界上下文中。出于这个原因，我可以假设在这个上下文中，地址应该被建模为实体而不是值对象。这引出了我的主要问题，即如果您在修改现有数据集或创建新数据时始终使用实体，那么拥有一个工厂来创建任何值对象是否有意义？

当我遵循这种思路时，对我来说开始出现的规则是，值对象应该只被创建来表示对应用程序来说是静态的东西，或者已经持久化到数据库中的东西，而不是暂时的东西在当前域上下文中。因此，我唯一应该创建任何类型的值对象的地方是当它们在聚合根存储库中或代表它们被重新水化/物化时，用于持久值或在静态值的情况下在服务中。这开始对我来说似乎很清楚，但是让我担心的是，我还没有在其他任何地方读到有人得出相同的结论。不管怎样，我希望有人能证实我的结论或让我直截了当。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:57:18.787

> 可以在给定的上下文中编辑，但在另一个上下文中不可编辑

不同上下文中实体的可变性设置差异也可以在应用程序层中表示。这是一个操作问题，可能涉及身份验证和授权，并且应用程序服务是此逻辑的方便位置。VO 和实体之间的区别并没有直接解决这些问题。仅仅因为 VO 应该是不可变的，并不意味着实体不能更改它引用的 VO 的值。例如，用户可以引用不可变的地址值，但是编辑操作可以更新用户以引用新值。允许用户在一个上下文中而不是在另一个上下文中编辑地址可以表示为与相应上下文相关联的权限值。

> 这引出了我的主要问题，即如果您在修改现有数据集或创建新数据时始终使用实体，那么拥有一个工厂来创建任何值对象是否有意义？

拥有一个用于创建 VO 实例的工厂当然是有意义的。这可以是 VO 类的静态方法或专用对象，具体取决于您的偏好。但是，不应该使用 VO 来解决域模型的可变性要求。相反，如上所述，这应该在应用层处理。

# java - 如何访问从另一个类中的函数返回的数组中的值

> ID：14800845
> 
> 赞同：-2
> 
> 时间：2013-02-10T18:04:37.283
> 
> 标签：java, jfreechart

我在另一个类中有一个函数，它产生值并将所有这些值存储在一个数组中。然后我返回了这个数组，因为我需要返回一个项目。我在函数的末尾做了一个 println ，它看起来像是`System.out.println(outputArray[1]);`在查看值是否被存储并且它确实返回了正确的值。该值为 3.68。

但是，当我尝试从另一个类访问数组时，我只是得到 1 个 0 值，而不是存储在数组中的所有值。我`System.out.println(outputArray[1]);`在另一个班级里又做了一次，结果是 0 而不是 3.68。

为什么它不访问并返回存储在来自函数的索引处的数组中的值？

我认为这与我没有从该函数访问返回的数组有关。一旦我解决了这个问题，我将在这个其他类中使用这些值来绘制图表。

```
public class GetResults{

public double[] tableOfresults() {
    double[] outputArray = new double[100];

    for(int i = 0; i<100; i++) {

       //At this point I calculate results and store them in the array using i as the index of the array

    }
    System.out.println(outputArray[1]); // produces 3.68 here
    return outputarray;

public class graph{
    getResults gr
    public XYSeries inputOutputGraph() {
        XYSeries graph = new XYSeries("My graph");
        XYDataset xyDataset = new XYSeriesCollection(graph);
        System.out.println(GetResults.outputArray[1];) //Its produces 0 here
        JFreeChart chart = ChartFactory.createXYLineChart(
            "Graph", "Time", "results",
            xyDataset, PlotOrientation.VERTICAL, true, true, false);
        ChartFrame graphFrame = new ChartFrame("XYLine Chart", chart);
        graphFrame.setVisible(true);
        graphFrame.setSize(300, 300);
        return graph;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:29:17.123

我看到至少三个错误：

1.  花括号不正确

2.  `getResults gr`可能应该是`GetResults gr`（复制粘贴时的错字？这很奇怪......）

3.  您调用`GetResults.outputArray[1];`but`outputArray`是在方法内部定义的。如果您的代码编译，这意味着`static`您的类中还有一个同名的变量，这解释了行为。

我假设你想要做的是

```
gr.tableOfresults()[1]; 
```

请注意，您必须更改`getResults gr`为

```
GetResults gr = new GetResults(); 
```

让它工作

* * *

另一种可能性是您希望将`tableOfresults`函数定义为`static`，并按如下方式调用它

```
 GetResults.tableOfresults()[1]; 
```

在这种情况下，`getResults gr`不需要该行，但您应该更改`public double[] tableOfresults() {`为

```
public static double[] tableOfresults() { 
```

`tableIfresults`请注意，如果您从函数中访问非静态变量，这将不会编译。

* * *

第三种情况，我认为有点奇怪，是如果你想从另一个类中调用一个静态变量。在这种情况下，您应该保持`GetResults.outputArray[1];`原样，但进行以下更改：

`getResults gr`应该成为

```
(new GetResults).tableOfresults(); 
```

并且`return outputarray;`应该成为

```
GetResults.outputarray = outputarray; 
```

在 GetResults 类中添加 outputArray 的声明

```
public static double[] outputArray 
```

* * *

第四种可能是你想调用一个静态变量，并且也使静态变量`tableOfresults()`。在这种情况下，您希望`GetResults.outputArray[1];`保持不变，但您需要：

`getResults gr`应该成为

```
GetResults.tableOfresults(); 
```

并且`return outputarray;`应该成为

```
GetResults.outputarray = outputarray; 
```

`public double[] tableOfresults() {`应该成为

```
public static double[] tableOfresults() { 
```

在 GetResults 类中添加 outputArray 的声明

```
public static double[] outputArray 
```

# php - 在输入字段旁边显示错误

> ID：14800850
> 
> 赞同：-1
> 
> 时间：2013-02-10T18:04:54.007
> 
> 标签：php

我想在输入字段旁边显示错误。我尝试回显错误，但它只显示单词 Array。如何在输入字段旁边显示错误？另外我想让用户上传5张照片，只需要第一张照片。我的意思是用户可以上传 5 张照片，但所有 5 张照片并不是只需要一张。那可能吗？谢谢

```
 <?php
$out['error'][]=''; //this is what I added
function uploadFile ($file_field = null, $check_image = false, $random_name = false) {

//Config Section    
//Set file upload path
$path = 'productpic/'; //with trailing slash
//Set max file size in bytes
$max_size = 2097152;
//Set default file extension whitelist
$whitelist_ext = array('jpg','png','gif');
//Set default file type whitelist
$whitelist_type = array('image/jpeg', 'image/png','image/gif');

//The Validation
// Create an array to hold any output
$out = array('error'=>null);

if (!$file_field) {
$out['error'][] = "Please specify a valid form field name";           
}

if (!$path) {
$out['error'][] = "Please specify a valid upload path";               
}

if (count($out['error'])>0) {
return $out;
}

//Make sure that there is a file
if((!empty($_FILES[$file_field])) && ($_FILES[$file_field]['error'] == 0)) {

// Get filename
$file_info = pathinfo($_FILES[$file_field]['name']);
$name = $file_info['filename'];
$ext = $file_info['extension'];

//Check file has the right extension           
if (!in_array($ext, $whitelist_ext)) {
  $out['error'][] = "Invalid file Extension";
}

//Check that the file is of the right type
if (!in_array($_FILES[$file_field]["type"], $whitelist_type)) {
  $out['error'][] = "Invalid file Type";
}

//Check that the file is not too big
if ($_FILES[$file_field]["size"] > $max_size) {
  $out['error'][] = "We are sorry, the image must be less than 2MB";
}

//If $check image is set as true
if ($check_image) {
  if (!getimagesize($_FILES[$file_field]['tmp_name'])) {
    $out['error'][] = "The file you trying to upload is not an Image, we only accept images";
  }
}

//Create full filename including path
if ($random_name) {

  // Generate random filename
  $tmp = str_replace(array('.',' '), array('',''), microtime());

  if (!$tmp || $tmp == '') {
    $out['error'][] = "File must have a name";
  }     
  $newname = $tmp.'.'.$ext;                                
} else {
    $newname = $name.'.'.$ext;
}

//Check if file already exists on server
if (file_exists($path.$newname)) {
  $out['error'][] = "The image you trying to upload already exists, please upload only once";
}

if (count($out['error'])>0) {
  //The file has not correctly validated
  return $out;
} 

if (move_uploaded_file($_FILES[$file_field]['tmp_name'], $path.$newname)) {
  //Success

  $out['filepath'] = $path;
  $out['filename'] = $newname;
  return $out;
} else {
  $out['error'][] = "Server Error!";
}

} else {
$out['error'][] = "Please select a photo";
return $out;
}      
}
?>

<?php

if (isset($_POST['submit'])) {

$file = uploadFile('file', true, false);
if (is_array($file['error'])) {
$message = '';
foreach ($file['error'] as $msg) {
  $message .= '<p>'.$msg.'</p>';    
}
} else {
$message = "File uploaded successfully";
$sub=1;
}
echo $message;
}
?>
<form action="" method="post" enctype="multipart/form-data" name="form1" id="form1">
<?php
ini_set( "display_errors", 0);
if($sub==0)
{
?>
<input name="file" type="file" size="20" /><span><?php echo $out['error'] ;?></span> //It displays here just the word Array
<input name="submit" type="submit" value="Upload" />
<?php
}
?>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:09:14.197

因为`$out['error']`是一个数组，`echo`所以它会输出`Array`，正如您所注意到的。要将其输出为字符串，您需要先将其转换；一种选择是使用`implode`. 我建议`<br>`用作“胶水”，这样每个错误都会显示在不同的行上。

所以，

```
<input name="file" type="file" size="20" /><span><?php echo implode('<br>', $out['error']) ;?></span> 
<input name="submit" type="submit" value="Upload" /> 
```

但是，也许更好的解决方案是将错误存储为字符串（`$out['error'] = 'There was an error'`而不是`$out['error'][] = 'There was an error'`）并使用适当的控制结构来确保一旦发现错误，验证检查就会结束并输出带有错误消息的表单。

对于控制结构，您可以执行以下操作：

```
if ($first_check)
{
    $out['error'] = 'First error message';
}

elseif ($second_check)
{
    $out['error'] = 'Second error message';
}

else
{
    $out['success'] = 'Success message';
} 
```

# bash - 在“其他”中寻找正确的值

> ID：14800855
> 
> 赞同：1
> 
> 时间：2013-02-10T18:05:04.540
> 
> 标签：bash, shell, osx-mountain-lion

以下是检查磁盘 SMART 状态的每日报告脚本的片段。

但是，我希望将 $STATUS 的全部值打印在“else”子句中，但是现在它只将其截断为第一个单词（$3）。

我该如何克服呢？

```
echo "SMART STATUS" >> $LOGS
echo "--------------------------" >> $LOGS
DISKS=( 0 1 2 3 4 5 6 7 )

for i in "${DISKS[@]}" ;

do

STATUS=`diskutil info /dev/disk$i | grep SMART | awk '{ print $3 }'`

if [ "$STATUS" = "Verified" ]; then
        echo "SMART STATUS OK FOR DISK $i" >> $LOGS
else

        echo "** SMART STATUS $STATUS FOR DISK $i **" >> $LOGS
fi
done

echo " " >> $LOGS
echo " " >> $LOGS 
```

例如：

```
$ diskutil info /dev/disk8 | grep SMART                     
   SMART Status:             Not Supported
$ diskutil info /dev/disk2 | grep SMART 
   SMART Status:             Verified 
```

理想情况下，对于像 disk8 这样的情况，脚本会回显“不支持”。我认为“SMART Status：”的值可能会在一个词​​和几个词之间变化。我没有在手册页上看到所有可能性，所以我对此没有明确的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:19:20.340

您可以保存`grep`, 并将所有内容放入 awk 中：

试试这个：

```
STATUS=$(diskutil info /dev/disk$i|awk -F': *' '/SMART/{print $2}') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:16:15.277

这符合您的需求吗？

```
disks="0 1 2 3 4 5 6 7"

for i in $disks; do
    status=$(diskutil info /dev/disk$i | awk '/SMART/{$1=$2="";print}')

    if [[ $status == *Verified* ]]; then
            echo "SMART status OK for disk $i"
    else
            echo "** SMART status $status for disk $i **"
    fi
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:16:32.787

# `cut`解决方案

如果您可以依靠 打印的空格数`diskutil`，您可以从状态的第一个字符开始切割：

```
STATUS=`diskutil info /dev/disk$i | grep SMART | cut -c 30-` 
```

# `awk`解决方案

单词`Supported`被捕获为`$4`，因此我们可以使用 if 语句来检查单词是否被填充：

```
STATUS=`diskutil info /dev/disk$i | grep SMART | awk '{ if($4 != "") print $3,$4; else print $3; }'` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T18:27:39.590

如果你有 GNU grep，你可以这样做：

```
STATUS=$(diskutil info /dev/disk$i | grep -oP '(?<=SMART Status:).*') 
```

变量的内容将包含前导空格。但是，您的 if 条件可以适应：

```
shopt -s extglob
if [[ ${STATUS##*([[:space:]])} == Verified ]]; then 
```

# asp.net - 我想要我的控件值。单击按钮时只插入一次

> ID：14800856
> 
> 赞同：0
> 
> 时间：2013-02-10T18:05:07.533
> 
> 标签：asp.net

我的页面中有一个 DropDownlist 和一个文本框，当我单击按钮时，Button1_Click 事件触发并获取值 od 文本框和 droppdownlist 并将它们发送到我在数据库中的表，它会显示结果（在我的表中添加新行数据库）在gridview中。我的问题是单击按钮后，如果我刷新页面我的意思是单击重新加载当前页面，我的下拉列表值和文本框值再次插入我的表中。不知道怎么解决？我的 gridview 使用 sqldatasource，这是我的代码：

```
 protected void Button1_Click(object sender, EventArgs e)
  {
    int brandid = Convert.ToInt32(BrandDropDownList.SelectedValue);
    String catname = TextBox2.Text;
    SqlConnection cn = new SqlConnection();
    cn.ConnectionString = "server = . ; database = mobile_store ; Trusted_Connection=true";
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = cn;
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.CommandText = "FirstInitialiseCategories";
    cmd.Parameters.AddWithValue("@brandid ", brandid);
    cmd.Parameters.AddWithValue("@catname ", catname);
    try
    {
        cn.Open();
        cmd.ExecuteNonQuery();
        Label1.ForeColor = System.Drawing.Color.Green;
        Label1.Text = "با موفقیت ثبت شد!";
        SqlDataSource2.DataBind();

        GridView1.DataBind();
    }

    catch (Exception ex)
    {
        Label1.Text = ex.ToString();
        Label1.ForeColor = System.Drawing.Color.Red;
        Label1.Text = "خطا در ثبت!";
    }
    finally
    { cn.Close(); }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:10:11.923

完成第一次插入后，您可以执行 HTTP 重定向（到同一页面），它应该可以解决问题：

```
Response.Redirect("samePage.aspx"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:20:38.067

下拉列表中的第一项是什么？您可以为第一项设置空值，当您将值插入数据库时​​，您可以添加代码以清除文本框和下拉列表。

最后 { cn.Close(); 标签1.Text =“”；ddl.SelectedIndex = 0; }

# android - 从 Service.onBind() 中调用 Service.startService() 可以吗？

> ID：14800859
> 
> 赞同：9
> 
> 时间：2013-02-10T18:05:31.780
> 
> 标签：android, android-service

我有一项服务，我想确保当不再有任何活动绑定时它不会停止（）。

我知道 startService() 用于实现此目的，但是可以从服务的 onBind() 方法中调用它吗？

从活动中调用它对我来说似乎是一种黑客行为，因为服务最清楚它是否想在 onUnbind() 之后闲逛。

活动指示服务的当前状态并提供一些控制，因此 bindService() 似乎是在这里使用的合适方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T14:31:59.770

`startService()`从内部调用应该没问题`onBind()`。如果您有逻辑`onBind()`可以确定即使客户端未绑定服务也需要保持正常运行，那么这似乎是执行此操作的合乎逻辑的地方。

我不同意声称不建议这样做的答案。您描述的架构正在有效地利用封装。客户只想绑定/取消绑定，他们不必知道服务是如何（内部）实现的。服务应该控制自己的生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:20:11.780

不建议调用`startService()`from 。是为了连接到客户端，你不应该改变行为。`onBind()``onBind()`

在客户端想要连接之前，让它调用`startService()`，如果服务已经在运行，它没有任何作用，然后客户端对象可以绑定。当客户端解除绑定时，服务仍将运行。如果服务知道什么时候不在身边，它可以安全地调用`stopSelf()`自己并退出。

# javascript - 如何使用 Angular 过滤器对数据进行分组？

> ID：14800862
> 
> 赞同：137
> 
> 时间：2013-02-10T18:06:08.073
> 
> 标签：javascript, filter, angularjs, grouping

我有一个属于一个组的玩家列表。如何使用过滤器列出每个组的用户？

```
[{name: 'Gene', team: 'team alpha'},
 {name: 'George', team: 'team beta'},
 {name: 'Steve', team: 'team gamma'},
 {name: 'Paula', team: 'team beta'},
 {name: 'Scruath of the 5th sector', team: 'team gamma'}]; 
```

我正在寻找这个结果：

*   团队阿尔法
    *   基因
*   团队测试版
    *   乔治
    *   保拉
*   团队伽玛
    *   史蒂夫
    *   第五部门的斯克鲁斯

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2014-07-22T05:28:24.863

您可以使用 angular.filter 模块的[groupBy](https://github.com/a8m/angular-filter)。
所以你可以做这样的事情：

**JS：**

```
$scope.players = [
  {name: 'Gene', team: 'alpha'},
  {name: 'George', team: 'beta'},
  {name: 'Steve', team: 'gamma'},
  {name: 'Paula', team: 'beta'},
  {name: 'Scruath', team: 'gamma'}
]; 
```

**HTML：**

```
<ul ng-repeat="(key, value) in players | groupBy: 'team'">
  Group name: {{ key }}
  <li ng-repeat="player in value">
    player: {{ player.name }} 
  </li>
</ul> 
```

**结果：**
组名：alpha
* 选手：Gene
组名：beta
* 选手：George
* 选手：Paula
组名：gamma
* 选手：Steve
* 选手：Scruath

**更新：** [jsbin](http://jsbin.com/weyov/45/edit?html,js,output)请记住使用的基本要求`angular.filter`，特别注意您必须将其添加到模块的依赖项中：

> (1) 您可以使用 4 种不同的方法安装 angular-filter：
> 
> 1.  克隆并构建此存储库
> 2.  通过 Bower：通过从终端运行 $ bower install angular-filter
> 3.  通过 npm：从终端运行 $ npm install angular-filter
> 4.  通过cdnjs [http://www.cdnjs.com/libraries/angular-filter](http://www.cdnjs.com/libraries/angular-filter)
> 
> (2) 在包含 Angular 本身之后，在 index.html 中包含 angular-filter.js（或 angular-filter.min.js）。
> 
> (3) 将 'angular.filter' 添加到主模块的依赖项列表中。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-05-27T06:43:08.263

除了上面接受的答案之外，我还使用 underscore.js 库创建了一个通用的“groupBy”过滤器。

JSFiddle（更新）：http: [//jsfiddle.net/TD7t3/](http://jsfiddle.net/TD7t3/)

**过滤器**

```
app.filter('groupBy', function() {
    return _.memoize(function(items, field) {
            return _.groupBy(items, field);
        }
    );
}); 
```

注意'memoize'调用。这种下划线方法缓存函数的结果并阻止 angular 每次都评估过滤器表达式，从而防止 angular 达到摘要迭代限制。

**html**

```
<ul>
    <li ng-repeat="(team, players) in teamPlayers | groupBy:'team'">
        {{team}}
        <ul>
            <li ng-repeat="player in players">
                {{player.name}}
            </li>
        </ul>
    </li>
</ul> 
```

我们将我们的 'groupBy' 过滤器应用到 teamPlayers 范围变量的 'team' 属性上。我们的 ng-repeat 接收到 (key, values[]) 的组合，我们可以在接下来的迭代中使用它。

**2014 年 6 月 11 日更新** 我通过过滤器扩展了组，以考虑使用表达式作为键（例如嵌套变量）。角度解析服务非常方便：

**过滤器（支持表达式）**

```
app.filter('groupBy', function($parse) {
    return _.memoize(function(items, field) {
        var getter = $parse(field);
        return _.groupBy(items, function(item) {
            return getter(item);
        });
    });
}); 
```

**控制器（带有嵌套对象）**

```
app.controller('homeCtrl', function($scope) {
    var teamAlpha = {name: 'team alpha'};
    var teamBeta = {name: 'team beta'};
    var teamGamma = {name: 'team gamma'};

    $scope.teamPlayers = [{name: 'Gene', team: teamAlpha},
                      {name: 'George', team: teamBeta},
                      {name: 'Steve', team: teamGamma},
                      {name: 'Paula', team: teamBeta},
                      {name: 'Scruath of the 5th sector', team: teamGamma}];
}); 
```

**html（带有 sortBy 表达式）**

```
<li ng-repeat="(team, players) in teamPlayers | groupBy:'team.name'">
    {{team}}
    <ul>
        <li ng-repeat="player in players">
            {{player.name}}
        </li>
    </ul>
</li> 
```

JSFiddle：http: [//jsfiddle.net/k7fgB/2/](http://jsfiddle.net/k7fgB/2/)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-02-10T18:06:08.073

首先使用一个只返回唯一球队的过滤器执行一个循环，然后是一个返回每个当前球队的所有球员的嵌套循环：

[http://jsfiddle.net/plantface/L6cQN/](http://jsfiddle.net/plantface/L6cQN/)

html:

```
<div ng-app ng-controller="Main">
    <div ng-repeat="playerPerTeam in playersToFilter() | filter:filterTeams">
        <b>{{playerPerTeam.team}}</b>
        <li ng-repeat="player in players | filter:{team: playerPerTeam.team}">{{player.name}}</li>        
    </div>
</div> 
```

脚本：

```
function Main($scope) {
    $scope.players = [{name: 'Gene', team: 'team alpha'},
                    {name: 'George', team: 'team beta'},
                    {name: 'Steve', team: 'team gamma'},
                    {name: 'Paula', team: 'team beta'},
                    {name: 'Scruath of the 5th sector', team: 'team gamma'}];

    var indexedTeams = [];

    // this will reset the list of indexed teams each time the list is rendered again
    $scope.playersToFilter = function() {
        indexedTeams = [];
        return $scope.players;
    }

    $scope.filterTeams = function(player) {
        var teamIsNew = indexedTeams.indexOf(player.team) == -1;
        if (teamIsNew) {
            indexedTeams.push(player.team);
        }
        return teamIsNew;
    }
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-04-07T16:05:13.563

我最初使用 Plantface 的答案，但我不喜欢我认为的语法。

我对其进行了重新设计，以使用[$q.defer](http://docs.angularjs.org/api/ng.$q)对数据进行后处理并返回独特团队的列表，然后将其用作过滤器。

[http://plnkr.co/edit/waWv1donzEMdsNMlMHBa?p=preview](http://plnkr.co/edit/waWv1donzEMdsNMlMHBa?p=preview)

### 看法

```
<ul>
  <li ng-repeat="team in teams">{{team}}
    <ul>
      <li ng-repeat="player in players | filter: {team: team}">{{player.name}}</li> 
    </ul>
  </li>
</ul> 
```

### 控制器

```
app.controller('MainCtrl', function($scope, $q) {

  $scope.players = []; // omitted from SO for brevity

  // create a deferred object to be resolved later
  var teamsDeferred = $q.defer();

  // return a promise. The promise says, "I promise that I'll give you your
  // data as soon as I have it (which is when I am resolved)".
  $scope.teams = teamsDeferred.promise;

  // create a list of unique teams. unique() definition omitted from SO for brevity
  var uniqueTeams = unique($scope.players, 'team');

  // resolve the deferred object with the unique teams
  // this will trigger an update on the view
  teamsDeferred.resolve(uniqueTeams);

}); 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-10-23T09:23:49.297

两个答案都很好，所以我将它们移到一个指令中，以便它可以重用，并且不必定义第二个范围变量。

如果您想看到它的实现，[这里是小提琴](http://jsfiddle.net/S3vaj/1/)

以下是指令：

```
var uniqueItems = function (data, key) {
    var result = [];
    for (var i = 0; i < data.length; i++) {
        var value = data[i][key];
        if (result.indexOf(value) == -1) {
            result.push(value);
        }
    }
    return result;
};

myApp.filter('groupBy',
            function () {
                return function (collection, key) {
                    if (collection === null) return;
                    return uniqueItems(collection, key);
        };
    }); 
```

然后可以按如下方式使用：

```
<div ng-repeat="team in players|groupBy:'team'">
    <b>{{team}}</b>
    <li ng-repeat="player in players | filter: {team: team}">{{player.name}}</li>        
</div> 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-10-20T03:18:28.890

# 更新

我最初写这个答案是因为 Ariel M. 建议的旧版本解决方案[在与其他`$filter`s](http://plnkr.co/edit/Mo4PdOd3s0VQlhc68VvH?p=preview)结合时触发了[“*无限 $diggest 循环错误*”（`infdig`）](https://docs.angularjs.org/error/$rootScope/infdig)。[幸运的是，最新版本的angular.filter](https://github.com/a8m/angular-filter)已经解决了这个问题。

我建议了以下实现，[没有那个问题](http://plnkr.co/edit/Trr3dIEplKxODk4WpqTr?p=preview)：

```
angular.module("sbrpr.filters", [])
.filter('groupBy', function () {
  var results={};
    return function (data, key) {
        if (!(data && key)) return;
        var result;
        if(!this.$id){
            result={};
        }else{
            var scopeId = this.$id;
            if(!results[scopeId]){
                results[scopeId]={};
                this.$on("$destroy", function() {
                    delete results[scopeId];
                });
            }
            result = results[scopeId];
        }

        for(var groupKey in result)
          result[groupKey].splice(0,result[groupKey].length);

        for (var i=0; i<data.length; i++) {
            if (!result[data[i][key]])
                result[data[i][key]]=[];
            result[data[i][key]].push(data[i]);
        }

        var keys = Object.keys(result);
        for(var k=0; k<keys.length; k++){
          if(result[keys[k]].length===0)
            delete result[keys[k]];
        }
        return result;
    };
}); 
```

但是，此实现仅适用于 Angular 1.3 之前的版本。（我将很快更新此答案，提供适用于所有版本的解决方案。）

实际上，我已经[写了一篇文章，介绍了我为开发它所采取的步骤、`$filter`遇到的问题以及从中学到的东西](http://sobrepere.com/blog/2014/10/14/creating-groupby-filter-angularjs/)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-04-10T19:34:36.763

除了接受的答案之外，如果您想按**多列**分组，您可以使用它：

```
<ul ng-repeat="(key, value) in players | groupBy: '[team,name]'"> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-04T09:37:32.650

如果您在 js 代码中需要它。您可以使用 angula-filter lib 的注入方法。像这样。

```
function controller($scope, $http, groupByFilter) {     

   var groupedData = groupByFilter(originalArray, 'groupPropName');

} 
```

[https://github.com/a8m/angular-filter/wiki/Common-Questions#inject-filters](https://github.com/a8m/angular-filter/wiki/Common-Questions#inject-filters)

# ios - RegEx - 在不是那些字符串的任何内容之前检测特定字符串

> ID：14800867
> 
> 赞同：0
> 
> 时间：2013-02-10T18:06:20.133
> 
> 标签：ios, objective-c, regex

如果我有一些特定的字符串，如“Δ”“¢”“∑”和“£”，我想检测这些字符在字符串中的任何位置，并且在它们后面有一个不是这些字符之一的字符，然后添加他们之后的一个新角色与那些原始角色有关我该怎么做..

示例... 找到 Delta (Δ)，然后是普通字符，然后将其替换为“Delta1”，然后是该普通字符，然后是“Delta2”……

所以字符串：“你好，你好吗？”
会变成：“ **Hello H** *Delta1* **o** *Delta2* **w are you？** ”

或者如果我想一次做多个......

例如，将 ∆ 替换为 "Delta1"*"Delta2" AND ∑ 替换为 "Sigma1"*"Sigma2"

所以：“ **HE** Δ∑ΔΔ **LLO** ”
变为：**He** *Delta1* *Sigma1* *Delta1* *Delta1* **L** *Delta2* *Sigma2* *Delta2* *Delta2* **LO**

所以基本上我有一组字符......我想搜索它们的位置，直到它们后面的第一个字符不在我的字符集中......（“43ΔΔΔ52”搜索将返回“ΔΔΔ5”，因为 5 不在我的字符集中，但 delta 是）然后我想用另一组字符替换所有字符（“Δ”变为“Delta1”），然后在搜索结束时字符串 我添加了与被替换的字符相对应的下一组字符（在本例中为“Delta2”），因此整个字符串“ΔΔΔ5”变为“ *Delta1Delta1Delta1* **5** *Delta2Delta2Delta2* ”

# macos - 在 OSX 中从 R 复制并粘贴或拖放图为 PDF？

> ID：14800868
> 
> 赞同：1
> 
> 时间：2013-02-10T18:06:59.537
> 
> 标签：macos, r, user-interface, graphics

是否有任何设备或 OSX 软件允许复制/粘贴为 PDF，例如 Mathematica？

我可以在标准 GUI 和 RStudio 中（以任意分辨率）从 Quartz 设备将绘图复制为位图，但经常需要矢量图形。

## 编辑：

我知道 PDF 导出和设备，但对更快的工作流程感兴趣。这里的目的是用于课堂讲义，我主要只是希望这些打印输出没有明显的锯齿。这不明智，我知道（毕竟只有课堂笔记），但这让我发疯。出于这个原因，我非常喜欢`Copy As PDF`Mathematica 的功能。它可以很好地将相同的情节放在笔记和主题演讲中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:31:37.620

RStudio 会做到这一点（看看 Export -> Save Plot as PDF as Arun 上面说的）。或者，您可以将某些内容导出为图像，但选择 .svg 作为文件类型。

您可以在基础 R 中执行此操作，具体取决于您的图形设备和 R 外部的其他内容。如果您键入：

```
> capabilities(what = "cairo")
 cairo 
  TRUE 
```

然后您可以在 RStudio 之外导出为 PDF 或 svg。有关函数和参数的说明，请参阅`help("svg")`。

编辑：

如果您想*直接*从 x11 设备复制到剪贴板，您可以从 R 中的“编辑”菜单执行此操作。我认为您不能直接从 x11 设备拖动到非 x11 应用程序（因为剪贴板不同） . 但是 Edit -> Copy 应该可以按预期工作，然后您可以使用 Command + V（在 Mac 上）将其粘贴到您喜欢的任何应用程序中。您可以通过运行 R（而不是 RStudio）并绘制一些琐碎的东西来测试这一点，例如`plot(1:10, 1:10)`然后将如上所述的输出复制到应用程序中。它应该保存为 pdf 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:36:11.293

石英设备允许复制到剪贴板并粘贴到 Preview.app 中，“从剪贴板新建”会生成 PDF 文件。所以我想我真的不明白问题是什么。

# asp.net - ExtensionlessUrlHandler 和带点的路径

> ID：14800872
> 
> 赞同：3
> 
> 时间：2013-02-10T18:07:43.703
> 
> 标签：asp.net, asp.net-mvc, iis, iis-7.5

无扩展 URL（带有`ExtensionlessUrlHandler-Integrated-4.0`）在我的 MVC 4 应用程序中运行良好，但其中带有点的路径除外，例如

`/tags`工作正常

`/tags/.net`不工作

为了使第二个 URL 工作，我必须设置`runAllManagedModulesForAllRequests="true"`或删除模块和需要为该 URL 运行的任何其他模块的`managedHandler`先决条件，这意味着我回到原点，所有这些模块都将为静态请求运行（对`UrlRoutingModule-4.0`？）。

有没有办法在路径中使用带点的无扩展 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T14:39:45.797

在我的情况下，当我添加一个具有我想要处理的特定扩展名的处理程序副本时，它工作正常：

```
<add name="ExtensionlessUrl-Integrated-4.0-webdav-xml" path="*.xml" verb="PUT" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="0" /> 
```

这处理了我需要允许使用 PUT 动词将文件上传到 WCF 服务的情况。

如果您需要处理多个扩展，您可以尝试将处理程序的路径设置`*`为`*.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-06T00:42:15.157

将路径属性更改为星号，如`path="*"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-25T20:04:10.787

*从“ .”*更改路径属性 *到“/* ”

# git - git commit 没有出现在 github

> ID：14800874
> 
> 赞同：3
> 
> 时间：2013-02-10T18:07:53.880
> 
> 标签：git, github

我是 git newbee，我有一个非常简单的 github 存储库，我想对其进行更改，所以我这样做了......

1）启动“Git Bash”（我在Windows系统上）2）执行......

```
$ git clone https://github.com/redcricket/simple_flashlight.git 
```

3) 将我的更改从 eclipse 导出到 simple_flashlight/flashlight/ 4) cd 到那个...

```
$ cd simple_flashlight/flashlight/ 
```

5）做一个差异......

```
$ git diff AndroidManifest.xml
diff --git a/flashlight/AndroidManifest.xml b/flashlight/AndroidManifest.xml
index a57b2c1..59d5fc5 100644
--- a/flashlight/AndroidManifest.xml
+++ b/flashlight/AndroidManifest.xml
@@ -4,6 +4,7 @@
       android:versionCode="1"
       android:versionName="1.0">
     <uses-sdk android:minSdkVersion="8" />
+
<!-- Allows access to the flashlight -->
<uses-permission android:name="android.permission.CAMERA"></uses-permission>
<uses-permission android:name="android.permission.WAKE_LOCK"></uses-permission>
@@ -16,7 +17,12 @@

     <application android:icon="@drawable/icon" android:label="@string/app_name"
+    <!--
+      - to prevent "flashing" when orientation changes I added the line
+      - android:configChanges="orientation"
+      -->
         <activity android:name=".FlashlightActivity"
+                         android:configChanges="orientation"
                   android:label="@string/app_name">
             <intent-filter>
                 <action android:name="android.intent.action.MAIN" />
warning: LF will be replaced by CRLF in flashlight/AndroidManifest.xml.
The file will have its original line endings in your working directory. 
```

6）我做“分期”......我认为......通过这样做......

```
$ git add AndroidManifest.xml
warning: LF will be replaced by CRLF in flashlight/AndroidManifest.xml.
The file will have its original line endings in your working directory.
$ git status
warning: LF will be replaced by CRLF in flashlight/AndroidManifest.xml.
The file will have its original line endings in your working directory.
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   AndroidManifest.xml
# 
```

7）像这样做我的承诺......

```
$ git commit -m "do not flash light on orientation change"
[master warning: LF will be replaced by CRLF in flashlight/AndroidManifest.xml.
The file will have its original line endings in your working directory.
361f69b] do not flash light on orientation change
warning: LF will be replaced by CRLF in flashlight/AndroidManifest.xml.
The file will have its original line endings in your working directory.
1 file changed, 6 insertions(+) 
```

然后我在[https://github.com/redcricket/simple_flashlight/commits/master](https://github.com/redcricket/simple_flashlight/commits/master)中查看我的存储库 ，但我没有看到我的更改。我这里是我的 git 配置...

```
$ git config --global -l
user.name=redcricket
user.email=red.cricket.blog@gmail.com 
```

... 我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T18:09:24.240

您将该更改提交到存储库的**本地**克隆。

如果您想在 GitHub 上查看该提交，则需要`git push`先到那里。

# wcf - 服务出错 ServiceHost 仅支持类服务类型

> ID：14800876
> 
> 赞同：1
> 
> 时间：2013-02-10T18:08:04.580
> 
> 标签：wcf, web-services, iis

我正在尝试发布一项服务并让它使用 Windows 身份验证，当我什至尝试发布它时出现错误，所以我还没有得到足够的提示输入用户名。

这是我的错误：

```
[ArgumentException: ServiceHost only supports class service types.]
   System.ServiceModel.Description.ServiceDescription.GetService(Type serviceType) +16602430
   System.ServiceModel.ServiceHost.CreateDescription(IDictionary`2& implementedContracts) +80
   System.ServiceModel.ServiceHostBase.InitializeDescription(UriSchemeKeyedCollection baseAddresses) +174
   System.ServiceModel.ServiceHost..ctor(Type serviceType, Uri[] baseAddresses) +475
   System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(Type serviceType, Uri[] baseAddresses) +43
   System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses) +530
   System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath) +1413
   System.ServiceModel.HostingManager.ActivateService(String normalizedVirtualPath) +50
   System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) +1172

[ServiceActivationException: The service '/subservice/ISubService.svc' cannot be activated due to an exception during compilation.  The exception message is: ServiceHost only supports class service types..]
   System.Runtime.AsyncResult.End(IAsyncResult result) +901424
   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +178638
   System.Web.CallHandlerExecutionStep.OnAsyncHandlerCompletion(IAsyncResult ar) +136 
```

我已经对此进行了一百次研究，但我对发布服务的经验很少。一旦它们建成，我就与他们合作过，只是从未发布过。

这是我从另一个发布良好的 web.config 修改的 web.config：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <appSettings>
    <add key="log4net.Internal.Debug" value="true" />
  </appSettings>
  <system.web>
    <compilation targetFramework="4.0" debug="true">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <caching>
      <outputCacheSettings>
        <outputCacheProfiles>
          <add name="DefaultCache" duration="60" varyByParam="none" />
        </outputCacheProfiles>
      </outputCacheSettings>
    </caching>
  </system.web>
  <system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" />
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpEndpointBinding">
          <security mode="None">
            <!-- Basic <security mode="Transport"> -->
            <!-- To use Basic auth, just comment Windows and use this, but you need to configure basic in IIS as well -->
            <!-- <transport clientCredentialType="Basic" /> -->
            <transport clientCredentialType="None" />
          </security>
        </binding>
      </basicHttpBinding>
      <webHttpBinding>
        <binding name="default">
          <security mode="None">
            <!-- Basic <security mode="Transport"> -->
            <!-- To use Basic auth, just comment Windows and use this -->
            <!-- <transport clientCredentialType="Basic" /> -->
            <transport clientCredentialType="None" />
          </security>
        </binding>
      </webHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="restBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <services>
      <service name="subservice.ISubService">
        <endpoint binding="basicHttpBinding" bindingConfiguration="BasicHttpEndpointBinding" contract="subservice.ISubService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="rest" binding="webHttpBinding" bindingConfiguration="default" behaviorConfiguration="restBehavior" contract="subservice.ISubService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
      </service>
    </services>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <httpProtocol>
      <customHeaders>
        <add name="p3p" value="CP=&quot;CAO PSA OUR&quot;" />
      </customHeaders>
    </httpProtocol>
  </system.webServer>

</configuration> 
```

我的 web.release.config 中没有任何内容：

```
<?xml version="1.0"?>

<!-- For more information on using web.config transformation visit http://go.microsoft.com/fwlink/?LinkId=125889 -->

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">

  <system.web>
    <compilation xdt:Transform="RemoveAttributes(debug)" />
  </system.web>

</configuration> 
```

这是我的应用程序的样子：

![在此处输入图像描述](../Images/62417c804bffd965a65d7617949b589c.png)

有人看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T18:26:52.837

该错误表明您正在使用 Interface 类型来构造一个主机，而不是实现您的服务接口的类类型`ISubService`。

例如。

```
ServiceHost host = new ServiceHost(
                       typeof(subservice.ISubService), new Uri("someuri")); 
```

如果这是您的用法，请将其更改为使用已实现的服务类类型`ISubService`

```
ServiceHost host = new ServiceHost(
                       typeof(subservice.SubService), new Uri("someuri")); 
```

如果在 .svc 中配置服务，则：

```
<%@ServiceHost Service="subservice.SubService"%> 
```

同样在您的配置文件中，将服务名称更改为服务而不是服务合同：

```
 <services>
          <service name="subservice.SubService">
          ... 
```

# html - 如何在填充上添加背景图像或颜色

> ID：14800880
> 
> 赞同：0
> 
> 时间：2013-02-10T18:08:29.727
> 
> 标签：html, css, twitter-bootstrap

```
<body>
<div class="container">
    <div class="navbar1 navbar navbar-inverse">
        <div class="navbar-inner">
            <ul class="nav pull-right">
                <li><a href="#">sign in</a></li>
            </ul>
        </div>
    </div>
</div><!--/container NAVBAR-->

<div class="container">
    <div class="row-fluid">
        <div class="header">
            <div class="span12">
                <h1> Hello World</h1>
            </div>
        </div><!--/inner-wrapper-->
    </div><!--/row-fluid-->
</div><!--/container-->
</body> 
```

**编辑**

在此类中，如 span**、navbar、row-fluid、container 创建默认填充。

看看这个页面：http: [//jsfiddle.net/SjYyj/1/](http://jsfiddle.net/SjYyj/1/)

“标题”类和“导航栏”之间存在差距！如何在不调整填充的情况下删除它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:12:42.657

**编辑 - 更新：**
嗯，您基本上希望填充区域具有背景颜色，而不更改填充。
我能想到的最简单的解决方案是：
用一个固定器类包裹整个“后端”，并给它一个背景色。
**html:**

```
<!DOCTYPE html>
<hhttp://jsfiddle.net/SjYyj/#forktml lang="en">

    <head>
        <title>Home</title>
        <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css"
        rel="stylesheet">
    </head>

    <body>
        <div class="fixpadding"><!--Fixer-->
            <div class="container">
                <div class="navbar1 navbar navbar-inverse">
                    <div class="navbar-inner">
                        <ul class="nav pull-right">
                            <li><a href="#">sign in</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--/container-->
            <div class="container">
                <div class="row-fluid">
                    <div class="header">
                        <div class="span12">
                                <h1> Hello World</h1>

                        </div>
                    </div>
                    <!--/inner-wrapper-->
                </div>
                <!--/row-fluid-->
            </div>
            <!--/container-->
        </div>
        <!--End Fixer-->
        <script src="./js/jquery.min.js"></script>
        <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
    </body>

    </html> 
```

**CSS：**

```
.header {
    background-color: grey;
}
.fixpadding {
    background-color: grey;
    border-radius:4px 4px 0 0; /* Fine-tuning with nav bar */
} 
```

[试试看](http://jsfiddle.net/SjYyj/4/)。

**编辑 2：**

您可能会看到，如果您调整窗口大小，背景颜色将“展开”。为了解决这个问题，我用一个容器扭曲了所有的身体，并设置了更多的 css:
**html:**

```
<div class="container">
        <div class="fixpadding">
        ...
        </div>
<!--End Fixer-->
</div> 
```

**CSS：**

```
.header {
    background-color: grey;
}
.fixpadding {
    background-color: grey;
    background-size: contain;
    border-radius:4px 4px 0 0;/* Fine-tuning with nav bar*/
} 
```

[看看这个。](http://jsfiddle.net/SjYyj/5/)

**编辑3：**

您不能专门为填充区域着色。
我做了一些更改以向您展示您可以做什么：
[在此处尝试。](http://jsbin.com/awayeq/3/)
红色和绿色在那里，所以你可以看到影响。
我已将 css 硬编码到 html 中，因此您无需为选择器而烦恼。
**HTML：**

```
<!DOCTYPE html>
<hhttp://jsfiddle.net/SjYyj/#forktml lang="en">
<head>
    <title>Home</title>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
</head>

<body>
  <div class="container" style="background-color:red;border-radius:4px 4px 0 0;">
    <div class="navbar1 navbar navbar-inverse">
        <div class="navbar-inner">
            <ul class="nav pull-right">
                <li><a href="#">sign in</a></li>
            </ul>
        </div>
    </div>
</div><!--/container-->

<div class="container" style="background-color:green;">
    <div class="row-fluid">
        <div class="header">
            <div class="span12">
                <h1> Hello World</h1>
            </div>
        </div><!--/inner-wrapper-->
    </div><!--/row-fluid-->
</div><!--/container-->
<script src="./js/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>

</body>

</html> 
```

# google-chrome-extension - “不允许加载本地资源：chrome://favicon/”

> ID：14800881
> 
> 赞同：4
> 
> 时间：2013-02-10T18:08:40.713
> 
> 标签：google-chrome-extension

我正在尝试使用 chromes favicon url 加载 url 的 favicon：

```
<img class='icon' src='chrome://favicon/yahoo.com' /> 
```

但我得到了错误：

```
"Not allowed to load local resource: chrome://favicon/yahoo.com" 
```

在清单中我有：

```
 "permissions": [
    "chrome://favicon/"
], 
```

网上没有太多关于这个话题的资料。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T06:18:09.843

# 代码中的问题

*   `"permissions": ["chrome://favicon/"]`, 是清单文件中的无效模式

如果您想`favicon`在扩展页面中使用标签的 URL，请使用 chrome.tabs API。

# 示范

### 清单.json

注册后台页面并添加必要的权限。

```
{
    "name": "Fav Icon",
    "description": "http://stackoverflow.com/questions/14800881/not-allowed-to-load-local-resource-chrome-favicon",
    "version": "1",
    "manifest_version": 2,
    "background": {
        "scripts": [
            "background.js"
        ]
    },
    "permissions": [
        "tabs",
        "<all_urls>"
    ]
} 
```

### 背景.js

```
chrome.tabs.query({
    "active": true,//fetch active tabs
    "currentWindow": true,//fetch tabs in current window
    "status": "complete",//fetch completely loaded windows
    "windowType": "normal"//fetch normal windows
}, function (tabs) {
    for (tab in tabs) {
        console.log(tabs[tab].favIconUrl);// Use this URL as needed
    }
}); 
```

chrome.tabs.query 将在扩展页面中工作，如果您想在内容脚本中使用，请使用消息传递来传达 URL。

# 参考

*   [chrome.tabs API](https://developer.chrome.com/extensions/tabs.html)
*   [消息传递](https://developer.chrome.com/extensions/messaging.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:13:59.223

URL 也需要包含方案：

```
<img src="chrome://favicon/http://www.yahoo.com"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-23T23:28:39.497

刚遇到这个问题，两者

`"permissions": ["chrome://favicon/"]`和`"permissions": ["chrome://favicon/*"]`

按预期工作。

Chrome 版本 52.0.2743.116

# mysql - MySQL - 将字段值设置为另一个表中的值

> ID：14800883
> 
> 赞同：0
> 
> 时间：2013-02-10T18:08:44.530
> 
> 标签：mysql, sql, join, where

我想知道哪个是从表中获取值并将它们插入到另一个表中的正确查询语句，其方式类似于使用 WHERE 子句

例子 -

表 1 包含字段：registrynumber - name

表 2 包含字段：id - firstname - lastname

查询必须设置 Table1.name = Table2.firstname，其中 Table1.registrynumber 和 Table2.id 在 Table1.name 和 Table2.firstname 的行中具有相同的值。

我希望我说得足够清楚。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:17:40.737

```
UPDATE Table2 tb2
SET tb2.firstname = ( SELECT name FROM Table1 WHERE registryname = tb2.id ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-18T12:24:50.850

```
INSERT INTO Table1 (registrynumber, name)
SELECT id, firstname FROM Table2; 
```

# python - numpy数组中相邻值的加权和

> ID：14800892
> 
> 赞同：1
> 
> 时间：2013-02-10T18:09:42.250
> 
> 标签：python, numpy, python-3.x, scipy, weighted

在 numpy 数组中取加权和的最简单/最快的方法是什么？

示例：使用欧拉法求解热方程

```
length_l=10
time_l=10
u=zeros((length_l,length_l))# (x,y)
u[:, 0]=1
u[:,-1]=1
print(u)
def dStep(ALPHA=0.1):
    for position,value in ndenumerate(u):
        D2u= (u[position+(1,0)]-2*value+u[position+(-1, 0)])/(1**2) \
            +(u[position+(0,1)]-2*value+u[position+( 0,-1)])/(1**2)
        value+=ALPHA*D2u()
while True:
    dStep()
    print(u) 
```

`D2u`应该是二维的第二个中心差异。如果我可以添加像`(1,4)+(1,3)=(2,7)`. 不幸的是，python 将它们添加为`(1,4)+(1,3)=(1,4,1,3)`.

请注意，计算`D2u`等效于使用以当前位置为中心的内核进行点积：

```
 0, 1, 0
 1,-4, 1
 0, 1, 0 
```

这可以向量化为点积吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T18:45:14.870

我想你想要这样的东西：

```
import numpy as np
from scipy.ndimage import convolve

length_l = 10
time_l = 10
u = np.zeros((length_l, length_l))# (x,y)
u[:,  0] = 1
u[:, -1] = 1

alpha = .1
weights = np.array([[ 0,  1,  0],
                    [ 1, -4,  1],
                    [ 0,  1,  0]])

for i in range(5):
    u += alpha * convolve(u, weights)
    print(u) 
```

您可以通过以下方式减少一点：

```
weights = alpha * weights
weights[1, 1] = weights[1, 1] + 1

for i in range(5):
    u = convolve(u, weights)
    print(u) 
```

# node.js - Heroku Buildpack Multi - 没有检测到支持 Cedar 的应用程序

> ID：14800896
> 
> 赞同：2
> 
> 时间：2013-02-10T18:09:58.523
> 
> 标签：node.js, heroku, phantomjs

我试图在 Heroku 的工作进程中使用 PhantomJS 和 NodeJS，但是当我切换到 buildpack-multi 时，当我推送时 Heroku 给了我这个：

```
-----> Fetching custom git buildpack... done
 !     Heroku push rejected, no Cedar-supported app detected 
```

这是我的.buildpack：

```
http://github.com/heroku/heroku-buildpack-nodejs.git
http://github.com/stomita/heroku-buildpack-phantomjs.git 
```

我的根目录中也有一个 package.json。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T19:17:20.970

你的 buildpacks 文件应该被调用`.buildpacks`，而不是`.buildpack`. 请参阅中的[`detect`](https://github.com/ddollar/heroku-buildpack-multi/blob/master/bin/detect)脚本[`ddollar/heroku-buildpack-multi`](https://github.com/ddollar/heroku-buildpack-multi)以了解成功检测所需的内容。

# ruby-on-rails - 如何在可搜索的太阳黑子模型块中调用实例方法？

> ID：14800904
> 
> 赞同：0
> 
> 时间：2013-02-10T18:11:01.460
> 
> 标签：ruby-on-rails, solr, eval, sunspot

我有一个 Solr 索引的 RoR 模型（通过 Sunspot）。

如何在可搜索块中调用实例方法？

我想做这个：

```
searchable
  string :name
  self.address.each do |a|
    eval 'string :address_' + a.id.to_s do ' + a.value + ' end'
  end
end 
```

鉴于 Sunspot 在这里重新定义了 DSL 中的 self，我该怎么做？

# android - SQLite 返回：错误代码 = 1

> ID：14800907
> 
> 赞同：0
> 
> 时间：2013-02-10T18:11:29.963
> 
> 标签：android, android-sqlite

我在资产文件夹中有一个预填充的数据库，我在第一次运行时将其移至内部存储。它在某些设备上运行良好，但在某些设备上出现以下错误：`sqlite returned: error code = 1, msg = no such table: FTSgesla, db=/data/data/com.example.enigmar/databases/gesla` 提到的表肯定存在，所以我不知道问题出在哪里。

**SQLiteOpenHelper 代码：**

```
public static class DictionaryOpenHelper extends SQLiteOpenHelper 
{

    private final Context mHelperContext;
    private SQLiteDatabase mDatabase;

    //private static String DB_PATH="/data/data/com.example.enigmar/databases/";
    private static String DB_PATH="";
    private static final String DB_NAME = "gesla";

    DictionaryOpenHelper(Context context) 
    {
        super(context, DB_NAME, null, 1);
        //
        DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
        //
        this.mHelperContext = context;

    }

    @Override
    public void onCreate(SQLiteDatabase db)
    {

    }

    public void createDataBase() throws IOException
    {

        boolean mDataBaseExist = checkDataBase();

        if(!mDataBaseExist)
        {
            this.getReadableDatabase();
            this.close();
            new Thread(new Runnable() 
            {
                public void run()
                {
                    try 
                    {
                        copyDataBase();
                        Log.e(TAG, "createDatabase database created");
                        BAZA_NAREJENA=true;
                    } 
                    catch (IOException e) 
                    {
                        throw new RuntimeException(e);
                    }
                }
            }).start();

        }

    }

    private boolean checkDataBase()
    {

        File dbFile = new File(DB_PATH + DB_NAME);
        return dbFile.exists();

    }

    private void copyDataBase() throws IOException
    {

        InputStream mInput = mHelperContext.getAssets().open(DB_NAME);
        //final Resources resources = mHelperContext.getResources();

        String outFileName = DB_PATH + DB_NAME;

        OutputStream mOutput = new FileOutputStream(outFileName);
        //InputStream mInput = resources.openRawResource(R.raw.gesla);

        byte[] mBuffer = new byte[1024];
        int mLength;
         while ((mLength = mInput.read(mBuffer))>0)
         {
             mOutput.write(mBuffer, 0, mLength);
         }
         mOutput.flush();
         mOutput.close();
         mInput.close();

        }

    public boolean openDataBase() throws SQLException
    {

        String mPath = DB_PATH + DB_NAME;
        mDatabase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        return mDatabase != null;
    }

    @Override
    public synchronized void close() {

    if(mDatabase != null)
        mDatabase.close();

    super.close();

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

} 
```

}

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:36:51.473

在您的 `public void createDataBase()`中，您正在使用 Thread 复制数据库。您确定在尝试访问之前已完成复制吗？这是我的代码工作副本，与您可能希望[看到](https://github.com/wtsang02/DbAssetHelper/blob/master/AssetDatabaseHelper)的代码非常相似。另一件事是

```
byte[] mBuffer = new byte[1024]; 
```

尝试 4096 ，我之前遇到过 1024 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:24:23.783

检查该表是否*确实*存在于数据库中。最有可能的是，实际的数据库是空的，因为您在函数中没有做*任何事情*`onCreate`（应该初始化数据库）。相反，您可能是以下之一：

与其传递`SQLiteDatabase.CREATE_IF_NECESSARY`给`openDatabase`，不如调用您的（当前未使用的）函数`createDataBase`。

或者，`onCreate`通过复制默认数据库的数据来创建数据库。为此，您需要另一个函数来将现有的资产内数据库转换为 SQL 命令。

# sql - 具有唯一名称的热门文章

> ID：14800908
> 
> 赞同：0
> 
> 时间：2013-02-10T18:11:36.057
> 
> 标签：sql, dql

我需要选择具有唯一名称的评价最高的文章。我有这个文章表：

```
id     name   
---------------
1    Article 1 
2    Article 1
3    Article 2 
```

和投票表：

```
article_id   rating
-------------------- 
   1           3
   1           2
   3           1 
```

当我按名称对文章进行分组时，即使是同名文章，它也会从评分中计算平均值。

```
SELECT article.name, AVG(vote.rating) rating
FROM article
LEFT JOIN vote ON vote.article_id = article.id
GROUP BY article.name 
```

但我想获得评分最高的文章的平均评分。有谁知道如何做到这一点？谢谢你的任何建议。

编辑：我想得到这个结果：

```
 name       average_rating
   --------------------------
   Article 1   2.5
   Article 2   1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:18:17.117

这就是我一直在寻找的：

```
SELECT result.id, result.name, result.rating
FROM (
    SELECT article.id AS id, article.name AS name, AVG(vote.rating) AS rating
    FROM article 
    LEFT JOIN vote ON vote.article_id = article.id
    GROUP BY article.id
    ORDER BY rating DESC
) AS result
GROUP BY result.name 
```

可能，它可以处理得更好，但这只是工作。谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:14:02.410

您是否尝试过按 article_id 分组？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:39:08.353

您应该改为按文章 ID 进行分组，因为每个 ID 都是唯一的

```
SELECT article.name, AVG(vote.rating) rating
FROM article
LEFT JOIN vote ON vote.article_id = article.id
GROUP BY article.id 
```

# ios - 获取设备位置而不在单点触控上显示蓝点

> ID：14800909
> 
> 赞同：1
> 
> 时间：2013-02-10T18:11:39.010
> 
> 标签：ios, iphone, xamarin.ios, mkmapview

有时需要您将地图中心设置在用户当前位置但不显示蓝点。假设您只想拥有该区域，但您不希望该用户专注于他在地图上的位置。你想让他们专注于地图的其他对象。

我们如何获取用户位置但不显示蓝点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T20:24:28.753

相当于 Tim 的答案的 Monotouch 是：

```
mapView .ShowsUserLocation =true ;
        mapView.DidUpdateUserLocation += (sender, e) => {
            if (mapView.UserLocation != null) {
                CLLocationCoordinate2D location;
                location.Latitude  = mapView.UserLocation .Coordinate .Latitude ;
                location.Longitude  = mapView.UserLocation .Coordinate.Longitude;
                mapView .CenterCoordinate =location ;
                mapView .ShowsUserLocation =false ;

            }
        }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:26:42.453

您可以通过以下方式获取位置

```
mapView.userLocation 
```

所以，`mapView`用它来设置 ' 中心：

```
MKCoordinateRegion region;
MKCoordinateSpan span;
span.latitudeDelta=0.02 / 10; // zoom level
span.longitudeDelta=0.02 / 10; 

CLLocationCoordinate2D location;
location.latitude = mapView.userLocation.coordinate.latitude;
location.longitude = mapView.userLocation.coordinate.longitude;

region.span=span;
region.center=location; 

[mapView setRegion:region animated:TRUE];
[mapView regionThatFits:region]; 
```

然后，您可以使用以下命令隐藏蓝点：

```
[mapView setShowUserLocation:NO]; 
```

不确定与此 Objective-C 代码等效的实际 MonoTouch 是什么，但应该以类似的方式命名。

# php - php文件上传脚本不起作用

> ID：14800912
> 
> 赞同：0
> 
> 时间：2013-02-10T18:12:32.753
> 
> 标签：php, mysql, upload

我编辑了这个问题，因为它很长！

我现在尝试使用 php 简单地读取输入到 input type="file" 的文件信息：

```
if(isset($_FILES['input-file'])){

$file_name = $_FILES['input-file']['name']; 
$file_size =$_FILES['input-file']['size']; 
$file_tmp =$_FILES['input-file']['tmp_name']; 
$file_type=$_FILES['input-file']['type'];

echo($file_name);
echo($file_size);
echo($file_tmp);
echo($file_type);
} 
```

使用 html 表单：

```
<form enctype="multipart/form-data" name="theform" method="post" action="image-upload-test2.php">
      <div id="container">
                <div id="input_template" style="display:none;">
                    <div class="file-container">
                        <div class="file-info"></div>
                        <div class="file-browse">Browse</div>
                        <div class="file-clear">X</div>
                    </div>
                    <input type='file' name="input-file" class="file-input-hidden" />
                </div>
      </div>
<input type="submit" name="submit" value="submit" />
</form> 
```

但我只得到'0'的回显，我设法通过消除找出 $file_size 变量。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:34:17.597

而不是开

```
$_FILES['files']['tmp_name'] 
```

你应该循环

```
$_FILES['files'] 
```

要不就

```
$_FILES 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:42:39.693

是的，只需 print_r/var_dump $_FILES 看看里面是否有东西。此外，检查您的 HTML 表单是否包含 enctype="multipart/form-data" 。

# javascript - 根据数据属性值获取元素数量

> ID：14800915
> 
> 赞同：0
> 
> 时间：2013-02-10T18:12:53.440
> 
> 标签：javascript, jquery

应该是一件简单的事情，但我不知道在哪里。

我想获取具有给定数据属性值的元素数量。

我有一些带有各种 data-size='values' 的 html 元素。需要获取每个值的项目数。

如果您查看下面的代码，我想获取“p”尺寸和“l”尺寸的数量

```
$('.overview li img').each(function () {

var s = $(this).data('size');

switch (s) {
    case 'p':
        r = 0.66667
        break;
    case 'l':
        r = 1.5
        break;
}

var imgW = $(this).css({
    width: h * r + 'px'
}); 
```

})

非常感谢任何帮助

干杯戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:22:04.473

您可以创建一个选择器来查找 data-size='p' 或 data-size='l'

```
var pCount = $(".overview li img[data-size='p']").length
var lCount = $(".overview li img[data-size='l']").length 
```

此外，您可以使用选择器来消除 switch 语句，以仅循环使用 data-size='p' 或 data-size='l' 的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T18:23:54.257

使用一些计数器：

```
 var pCount = 0 
     ,lCount = 0;

 $('.overview li img').each(function () {
    //-----------
    case 'p':
        r = 0.66667; 
        pCount++;        //counter of 'p'
        break;
    case 'l':
        r = 1.5;
        lCount++;        //counter of 'l'
        break;
    //----

 });

 console.log( pCount, lCount ); 
```

# javascript - 在文本框中显示提示弹出的内容？

> ID：14800917
> 
> 赞同：1
> 
> 时间：2013-02-10T18:13:01.750
> 
> 标签：javascript, input, textbox, popup, prompt

我试图让用户输入他们的姓名，然后将其显示在文本框中。我有困难，相信我只是错过了一些小东西？

我的编码 HTML 是：

```
Name <input type="text" value=myFunctioning/> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:41:23.733

这是有效的。我测试了它。

```
<!Doctype html>
<html>
<head>
<script>

function myFunctioning()
{
var x;
var name=prompt("Please enter your name","");

if (name!=null)
{
x=name;
document.getElementById("demo").value=x;
}
}
</script>
</head>
<body onload="myFunctioning()">
<input type="text" id="demo"/>
</body>
</html> 
```

# c# - 我需要在一天的几个小时内尽可能快地发送大量网络请求。最有效的方法是什么？

> ID：14800918
> 
> 赞同：1
> 
> 时间：2013-02-10T18:13:24.650
> 
> 标签：c#, .net, http, asynchronous, httprequest

我有一个脚本，它在 while 循环中执行大量 HttpRequst，如下所示。它在 BackgroundWorker 中运行。

```
CookieContainer cookieJar = new CookieContainer();
string searchURL = "http://blablabla.com/";
bool shouldRun = true; //this is set elsewhere

while (shouldRun)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(searchURL);
    request.ContentType = "application/json";
    request.Method = "POST";
    request.ServicePoint.Expect100Continue = false;
    request.CookieContainer = cookieJar;
    request.Headers.Add("X-HTTP-Method-Override: GET");
    request.Timeout = 1000;

    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    // Get the stream containing content returned by the server.
    Stream responseStream = response.GetResponseStream();
    // Open the stream using a StreamReader for easy access.
    StreamReader reader = new StreamReader(responseStream);
    // Read the content.
    string responseFromServer = reader.ReadToEnd();

    JObject o = JObject.Parse(responseFromServer);

    //Do something with the JObject
} 
```

运行脚本会占用大约 10% 的 CPU（Intel i5 @ 2.5GHz），我想探索其他方法，看看它是否能够在不减少每秒请求数的情况下减少 CPU 负载（当前速率大约是 3 到 4 个请求/秒）或者是否有可能增加每秒的请求数。

我一直在研究异步请求，但它能给我上面提到的两个改进之一吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T18:21:29.553

执行 HTTP 请求不是很占用 CPU，您可以在不使用 10% 的 cpu 的情况下执行其中的 20 多个。什么是 CPU 密集型是您对这些数据所做的事情。解析它（以及您对解析后的数据所做的任何事情）是占用您大部分 CPU 的原因。您应该研究处理该数据的其他方法以节省处理能力。例如，可能不是在获取数据时处理数据，而是可以保存该数据，然后每分钟使用一些脚本一次处理所有保存的数据。

# ios - NSMutableArray 以编程方式？

> ID：14800920
> 
> 赞同：-2
> 
> 时间：2013-02-10T18:13:47.117
> 
> 标签：ios, nsmutablearray

我试图让用户在 NSMutableArrays 中拥有多组数据。我不想限制他们可以创建的数组的数量，但我不知道如何制作具有不同名称的多个数组，这样它们就不会一直覆盖相同的数据。例如：

```
-(void)viewDidLoad {
mutableArray = [[NSMutableArray alloc]init];
} 
```

和

```
-(IBAction)createNewArray {
[array addObject:first.text];
[array addObject:second.text];
[array addObject:third.text];
[array addObject:fourth.text];
//Add this set of data to a larger group which is all the arrays
[allArrays addObject:array];

} 
```

问题是它会不断添加具有相同名称的不同数据，这将变得无用，因为 1\. 我相信它会继续覆盖同一个对象和 2\. 没有办法区分对象。

我的问题：有没有可能的方法来创建多个具有不同名称的数组，而不必先将它们放在 .h 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:19:10.160

NSMutableArrays 的 NSDictionary

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:37:38.963

如果您不想担心名称冲突，您可以使用数组数组，

或者 - 如果您想生成没有冲突的唯一名称 - 请尝试：

```
NSString *uniqueName = [[NSUUID UUID] UUIDString]; 
```

# ruby - 我有哪些缓存获取的网页的选项？

> ID：14800921
> 
> 赞同：2
> 
> 时间：2013-02-10T18:13:57.293
> 
> 标签：ruby, http, postgresql, caching, mechanize

我的应用程序做了很多页面抓取，例如获取历史天气数据。获取特定页面后，我想将其缓存在我的 PostgreSQL 数据库中，这样我就不必为该特定请求再次访问远程服务器。

由于历史数据永远不会改变，我想“永远”缓存它们——这需要将缓存的页面存储在长期持久存储中，例如数据库。

我编写了一个基本的缓存机制，它围绕着 Mechanize。它有效，但似乎有比我更好的编码能力的人已经实现了这个。

是否有任何宝石或图书馆已经这样做了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:13:01.790

所以我想了又想，看了 Mechanize 和 VCR 的源代码，我决定我真的只是在想这个问题。以下内容可以满足我的需要。（我正在使用 DataMapper，但将其转换为 ActiveRecord 模型会很简单）：

```
class WebCache
  include DataMapper::Resource

  property :id, Serial
  property :serialized_key, Text
  property :serialized_value, Text
  property :created_at, DateTime
  property :updated_at, DateTime

  def with_db_cache(akey)
    serialized_key = YAML.dump(akey)
    if (r = self.all(:serialized_key => serialized_key)).count != 0
      # cache hit: return the de-serialized value
      YAML.load(r.first.serialized_value)
    else
      # cache miss: evaluate the block, serialize and cache the result
      yield(akey).tap {|avalue| 
        self.create(:serialized_key => serialized_key, 
                    :serialized_value => YAML.dump(avalue))
      }
    end
  end
end 
```

示例用法：

```
def fetch(uri)
  WebCache.with_db_cache(uri) {|uri| 
    # arrive here only on cache miss
    Net::HTTP.get_response(URI(uri))
  }
end 
```

### 评论

我以前认为，一个适当的网络缓存方案会观察和尊重像 Cache-Control、If-Modified-Since 等头字段，以及自动处理超时和其他网络问题。但是对实际网页的检查清楚地表明，真正的静态数据经常被标记为缓存时间短。因此，让调用者决定缓存多长时间以及何时重试失败的查询更有意义。

那时，代码变得非常简单。

道德：不要过度思考你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:35:25.800

[VCR](https://rubygems.org/gems/vcr)可能是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T21:19:17.640

也许您应该只使用代理缓存，例如[squid](http://www.squid-cache.org/)。它会比尝试自己做更快、更容易、更可靠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-25T12:30:53.473

您可以查看[Open-URI-Cache](https://github.com/tigris/open-uri-cached)或[Faraday-HTTP-Cache](https://github.com/plataformatec/faraday-http-cache)。第一个可能更接近您的需要。既不记录到数据库，但也许您可以编写自己的存储层。我没有使用 Heroku 的经验，但文件系统似乎适合这种缓存。

# photoshop - Photoshop 吸管自动复制颜色

> ID：14800926
> 
> 赞同：8
> 
> 时间：2013-02-10T18:14:18.973
> 
> 标签：photoshop

是否有一个选项或我可以做的事情来自动复制从 CS6 中的吸管中挑选的颜色（十六进制）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-06T11:44:05.650

请找到以下步骤，基本上你需要定义键盘快捷键

1.  使用吸管选择颜色，它将显示为前景色

2.  转到编辑>键盘快捷键>“快捷键”选择下拉菜单，选择“面板菜单”

3.  向下滚动到面板菜单命令以打开“颜色”

4.  在复制颜色十六进制代码中，您可以指定快捷方式示例`Shift + Ctrl + 1`按 OK

5.  现在按该快捷方式并`ctrl + v`在记事本或喜欢的文本编辑器中点击

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-01T08:58:31.257

使用吸管工具右键单击并从上下文菜单中选择“复制颜色的 HEX 代码”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:21:31.470

这取决于您尝试将颜色复制到哪里？一旦你使用了颜色滴管，十六进制数字就会显示出来，可以复制和粘贴吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T08:25:38.653

用吸管选择你想要的颜色，然后双击*颜色选择器*。在那里你会找到你选择的颜色的 RGB、CMYK、HSB...等值。在底部，您会找到颜色的十六进制值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-11T07:45:38.590

您单击颜色采样器工具以选择颜色。然后你可以在Info中看到CMYK、RGB、Greyscale、HSB、Total Ink、Hex code for website等所需的颜色（你需要按下`F8`激活信息）

# dialog - 潮汐dk自定义对话框

> ID：14800931
> 
> 赞同：4
> 
> 时间：2013-02-10T18:14:55.163
> 
> 标签：dialog, window, tidesdk

我正在开发一个 TideSDK 项目，我想为我的应用程序创建一个配置设置窗口，但我没有在网站或任何随附文档上看到任何关于如何执行此类操作的文档。

我熟悉 Web 开发，在浏览器中我会使用 target=new （或类似的东西）来标记我希望 url 在新窗口中打开，但我还没有看到类似的东西。

我也尝试过使用潮汐对话框功能，但看起来窗口只与位于应用程序目录中的 html 文件有关（这意味着它不会内置或与应用程序一起打包）。

tidsdk 中是否提供此功能，还是我必须找到另一种方法来制作设置/配置窗口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T18:58:42.997

我查看了对话框功能，并找到了一种方法来做你想做的事！API文档对此不是很清楚，我不得不尝试...

## 示例代码

在主窗口中：

```
//Example function to apply configuration
function applyConfig(configObject){
    setSomething(configObject.field);
    ...
}
//Create a dialog, and give it the above function as an `onclose` callback:
var dialog=Ti.UI.showDialog({url:"app://config.html",onclose:applyConfig}); 
```

在`config.html`：

```
//An example of an object that could hold your config data
var config={field:0,example:"hello",...};
//Function to call in order to pass that object back to the main window callback:
Ti.UI.getCurrentWindow().close(config); 
```

## 解释

所以...在您的主窗口中，您创建一个对话窗口`Ti.UI.showDialog`并传递一个回调（`params.onclose`见上文）。在对话框窗口中，一旦用户通过html接口设置了他的配置选项，就可以将配置数据保存在一个对象中，并传递给窗口的close方法，然后传递给主窗口中的回调.

## 笔记

`Ti.UI.showDialog`实际调用`Ti.UI.createWindow`，并返回一个`Ti.UI.UserWindow`对象，添加了一些与对话框的参数、结果和 onclose 回调相关的字段和方法。

使用或传递的对话框参数`Ti.UI.showDialog({url:"...",parameters:{...}})`可以从对话框窗口内部访问。`Ti.UI.getCurrentWindow().getDialogParameter("name")``Ti.UI.getCurrentWindow()._dialogParameters["name"]`

# java - 基于 ModelClass 的调用钩子。更好的解决方案然后铸造？

> ID：14800938
> 
> 赞同：0
> 
> 时间：2013-02-10T18:15:50.327
> 
> 标签：java, android, design-patterns, casting, listener

我在抽象类中有一个监听器方法：

```
public void AsyncTaskListener(AbstractModel result){ 
```

和一堆钩子：

```
protected void RecieveModelAHook(ConcreteModelA){}
protected void RecieveModelBHook(ConcreteModelB){}
protected void RecieveModelCHook(ConcreteModelC){} 
```

现在当 AsyncTaskListener 被调用时，它应该决定调用哪个钩子。目前我这样解决它：

```
public void AsyncTaskListener(AbstractModel result){}
    if(result instanceof ConcreteModelA){
         RecieveModelAHook((ConcreteModelA) result);
    }
    if(result instanceof ConcreteModelB){
         RecieveModelBHook((ConcreteModelB) result);
    }
} 
```

有更好的解决方案吗？或者也许是这样的模式？

AsyncTask 读取不同的 JSON 字符串并从中创建模型，例如 ConcreteModelA、ConcreteModelB。由于每个客户都应该能够处理不同的结果，因此我需要挂钩。

在 AsyncTask 我有一个请求类型。请求类型 1 创建 ConcreteModelA 请求类型 2 创建 ConcreteModelB

它现在有效，但我对丑陋的演员表不满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:08:59.637

Sounds like you have use for the [strategy pattern](https://en.wikipedia.org/wiki/Strategy_pattern). Rather then having such a switch in your code that requires updating whenever you have a new case, try to make use of polymorphism by encapsulating the part that changes and moving it out of the class by usage of composition.

# jquery - 删除属性按钮后仍然在 jQuery 中执行操作

> ID：14800939
> 
> 赞同：1
> 
> 时间：2013-02-10T18:16:11.143
> 
> 标签：jquery

这是一段简单的代码，所以我不会解释它的作用。

这里的问题是在我单击`.likes.1`div 然后单击`.likes.2`div 然后`.likes.1`它再次向我显示`.article-info`div 之后。

因此，即使属性 surname 删除它仍然执行它的任务。

为什么呢 ？

```
$(document).ready(function() {

    $(".likes.1[surname|='first']").click(function() {
        generate('information');
        $(this).removeAttr('surname');
        $(".article-info").show();
    });

    $(".likes.2").click(function() {
        $(".article-info").hide();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:29:32.680

click 事件的绑定发生在页面加载时，或者更准确地说是在 DOM 就绪时发生。

```
$(".likes.1[surname|='first']").click(function() { ... }) 
```

这会将事件绑定到在页面加载时与该选择器匹配的任何和所有元素，稍后删除与该选择器相关的属性、类、ID 或任何其他内容不会改变这一点，因为该事件已被绑定。

您需要取消绑定事件或使用委托事件处理程序，因为委托处理程序将在每次单击时检查选择器：

```
$(document).on("click", ".likes.1[surname|='first']", function() { ... }) 
```

您应该使用最接近目标元素的可用父级而不是文档（并且仅由数字组成的类通常不是一个好主意）。

或类似的东西：

```
$(".likes.1[surname|='first']").on('click', function() {
    generate('information');
    $(this).off('click');
    $(".article-info").show();
}); 
```

# scala - 停止异步 Actor？

> ID：14800942
> 
> 赞同：0
> 
> 时间：2013-02-10T18:16:19.790
> 
> 标签：scala

是否可以在 scala 中停止异步 Actor（即使用反应/不接收）？

我进行了搜索，这回答了同步 Actor？

[Scala Actors：有没有内置的方法来停止/打断演员？](https://stackoverflow.com/questions/8117334/scala-actors-is-there-a-built-in-way-to-stop-interrupt-an-actor)

注意：Akka 演员也有停止机制。但这个问题是针对 Scala 演员的。

谢谢。

# mysql - 加盐密码哈希而不保存盐

> ID：14800944
> 
> 赞同：4
> 
> 时间：2013-02-10T18:16:30.597
> 
> 标签：mysql, crypt, dovecot

我有一个邮件服务器，它使用以下 sql 将邮箱密码存储在 mysql 数据库中：

```
ENCRYPT([PASSWORT], concat(_utf8"$1$", right(md5(rand()), 8), _utf8"$")) 
```

但是数据库中没有存储盐。

现在我需要围绕这个数据库构建一个登录过程，但由于缺少盐，很难比较存储的密码。我注意到，密码哈希以以下形式将盐保存在其中：

```
$1$[SALT]$[PASSWORD-HASH] 
```

如何创建可比较的密码哈希来构建登录？

Dovecot 能够使用存储的密码登录用户，但如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T20:03:14.733

[MySQL`ENCRYPT()`函数](http://dev.mysql.com/doc/refman/5.6/en/encryption-functions.html#function_encrypt)调用[crypt(3) Unix 库函数](http://en.wikipedia.org/wiki/Crypt_%28C%29)，它实现了多种密码散列算法。使用的具体算法由`salt`参数选择，该参数应以美元符号包围的算法标识符开头；例如，以 开头的盐`$1$`对应于[Poul Henning-Kamp 的旧的基于 MD5 的散列方案](http://en.wikipedia.org/wiki/Crypt_%28C%29#MD5-based_scheme)。

（选择算法的这种相当奇怪的方式的原因是历史；1976 年基于 DES 的原始 crypt(3) 设计不支持替代散列算法，因此指定它们的方法必须硬塞到现有接口中为了保持与旧密码数据库的兼容性。事实证明，生成的系统非常漂亮和灵活，即使乍一看有点奇怪。）

无论如何，所有 crypt(3) 散列算法（包括[原始的基于 DES 的](http://en.wikipedia.org/wiki/Crypt_%28C%29#Traditional_DES-based_scheme)算法）总是在输出的开头包含盐（以及嵌入其中的算法标识符），并忽略附加到末尾的任何额外数据盐输入。因此，要验证密码哈希，您只需将原始哈希`ENCRYPT()`作为盐输入，并检查它是否等于输出：

```
SELECT user_id,
  password_hash = ENCRYPT('password', password_hash) AS password_is_correct
FROM user_table WHERE user_id = 12345; 
```

# ruby - 加密/解密图像（无临时文件）

> ID：14800950
> 
> 赞同：1
> 
> 时间：2013-02-10T18:17:00.323
> 
> 标签：ruby, image, encryption, offline

例如，我有 10 张图片。我希望它们都在一个文件中（比如将它们压缩到一个文件中，或者以某种方式将它们放入一个 .dat 文件中）。加密不需要通过 ruby​​ 完成，因为我只需要在发布应用程序之前执行一次。但是在我的（Ruby）应用程序中，我想打开加密文件并只检索我需要显示的图像（作为位图）。无需先将其提取到硬盘驱动器。所以我希望它直接加载到我的程序中。

我知道，例如在 C# 中，我可以直接从“IO 流”加载位图。然后我会解密内存中的整个 package/.dat 文件，然后从 IO 流创建一个位图，然后将包释放到内存中。

有没有可用的库或方法？（最好有样品）

请注意，加密不需要很强。足以阻止普通用户。而且我的应用程序是离线应用程序（与 SSL/server-client/etc 无关）

# javascript - 如何检查是否所有复选框都未选中

> ID：14800954
> 
> 赞同：29
> 
> 时间：2013-02-10T18:17:31.390
> 
> 标签：javascript, html

我正在尝试创建一个功能来检查是否所有复选框都未选中。我对文本框有类似的功能。由于我以前没有过多使用复选框，因此我不确定如何调整它，除非更改`input[type=text]`为`input[type=checkbox]`.

谁能帮我吗？谢谢。

```
var textinputs = document.querySelectorAll('input[type=text]'); 
var empty = [].filter.call( textinputs, function( el ) {
     return !el.value
});

    if (textinputs.length == empty.length) {
        alert("None filled");
        return false;
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-10T18:35:05.620

以下应该可以解决问题：

```
var textinputs = document.querySelectorAll('input[type=checkbox]'); 
var empty = [].filter.call( textinputs, function( el ) {
   return !el.checked
});

if (textinputs.length == empty.length) {
    alert("None filled");
    return false;
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-10T18:44:17.977

你可以简化一点，因为你可以使用`querySelectorAll()`：

```
var checked = document.querySelectorAll('input:checked');

if (checked.length === 0) {
    // there are no checked checkboxes
    console.log('no checkboxes checked');
} else {
    // there are some checked checkboxes
    console.log(checked.length + ' checkboxes checked');
} 
```

[JS Fiddle（没有选中复选框）](http://jsfiddle.net/davidThomas/UYBTL/3/)。

[JS Fiddle（选中了一些复选框）](http://jsfiddle.net/davidThomas/UYBTL/2/)。

或者，如果您只需要一个布尔值来指示是否选中了任何复选框，以便在函数中使用：

```
var isChecked = document.querySelectorAll('input:checked').length === 0 ? false : true;
return isChecked; 
```

[概念验证演示](http://jsfiddle.net/davidThomas/UYBTL/4/)。

当然，您可以避免创建变量并简单地返回三元的结果；我只是使用该变量来尝试明确我正在返回/测试的内容。

参考：

*   [`:checked`伪类](http://www.w3.org/TR/selectors/#checked)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-30T09:25:09.367

在这里，一个简短且非常简单的示例（Vanilla Javascript）：

```
if (document.querySelectorAll('input[type="checkbox"]:checked').length === document.querySelectorAll('input[type="checkbox"]').length) {
    console.log('All checkboxes are checked');
} else {
    console.log('Some checkboxes are not checked');
} 
```

在 jQuery 语法中：

```
if ($('input[type="checkbox"]:checked').length === $('input[type="checkbox"]').length) {
    console.log('All checkboxes are checked');
} else {
    console.log('Some checkboxes are not checked');
} 
```

另一种方法是使用[:not() 伪选择器](https://caniuse.com/#feat=css-not-sel-list)：

```
if (document.querySelectorAll('input[type="checkbox"]:not(:checked)').length) {
    console.log('Some checkbox are not checked');
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-12-13T21:53:29.703

我建议使用 class 或 id 命名间距

```
var checked = document.querySelectorAll('input.myClassName:checked');

//or

var checked = document.querySelectorAll('input#myIdName:checked');

if (checked.length === 0) {

    console.log('no checkboxes checked');
} else {

    console.log(checked.length + ' checkboxes checked');
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-18T09:21:21.693

伪类 input[type="checkbox"]:not(":checked") 应该在 jquery 中完美工作：

```
var checkboxes = { id:"hello", value:"value", checked:"false" }

$('.post-text').append('<div id="wrappingcheckboxes"></div>'); for (var i = 0; i<= 10; i ++){ $('#wrappingcheckboxes').append("<input type='checkbox' value='"+checkboxes.value + i + "' id='"+checkboxes.id + i+"'/>");}
$('#wrappingcheckboxes input[type="checkbox"]:not(":checked")') 
```

[使用此页面的控制台](https://i.stack.imgur.com/PwVHc.jpg)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-07T16:00:48.067

这对我有用，然后给所有复选框一个类名：

```
 if ($('.ClassName:checked').length == 0) {
            // do your job
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-10T17:33:53.780

以下是如何遍历多个输入字段并获取每个选中的字段。我通常使用它来将选定的元素添加到自己的数组中

```
let els = document.querySelectorAll("input[type=checkbox]");

els.forEach((v) => {
    if(v.checked) {
        //checked

    }

}); 
```

如果您不想遍历每个复选框，则可以通过将查询选择器从更改为来仅遍历选定的`input[type=checkbox]`复选框`input[type=checkbox]:checked`

# asp.net - 具有多个局部视图剃刀页面的剃刀视图页面

> ID：14800957
> 
> 赞同：1
> 
> 时间：2013-02-10T18:17:34.817
> 
> 标签：asp.net, razor, asp.net-mvc-4, viewmodel, asp.net-mvc-viewmodel

我对此有点陌生，我无法显示包含部分视图的页面，我希望有人查看我的结构并指出我做错了什么。

这是我的主页，我将在其中显示其他剃须刀页面内容。

个人资料页：

```
@model Project.Models.PasswordModel
@{ ViewBag.Title = "Profile Page"}

//right column
@if(ViewBag.HasLocalPassword)

{ @Html.Partial("passwordChange") }

else { @Html.Partial("passwordSet")}

//left column

@Html.Partial("username")
@Html.Partial ("biography") 
```

当我创建用户名和传记剃刀视图页面时，这就是我在“添加视图”框中的内容：

视图引擎：Razor(cshtml) 仅选中了“使用布局或母版页：”，下面的框为空（如果在 Razor _viewstart 文件中设置，则留空）

当我渲染整个页面时，会显示所有不同的部分，但用户名和传记区域应该填充数据库中的数据，而数据库中并没有这样做。只有当我将 url 更改为实际指向`username`显示来自数据库的正确信息的页面时。

当我在输入新密码信息后单击更改密码按钮时，我收到以下错误消息：

`The model item passed into the dictionary is of type 'Project.Models.PasswordModel', but this dictionary requires a model item of type 'Project.Models.UserNameModel'.`

有关如何将不同的剃刀视图页面正确显示到一个或正确的结构中的任何帮助，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T03:17:18.423

我通常使用对控制器的 ajax 调用来获取部分视图，例如[如何在单击按钮 MVC 时使用 Json 结果填充视图中的表](https://stackoverflow.com/questions/19391736/how-to-populate-a-table-in-view-with-json-results-on-click-of-button-mvc/19392340#19392340)

对于您的代码，您可以在调用中将模型传递给部分

```
@Html.Partial("_passwordSet", Model.passwordSet) 
```

如果您有视图模型，则可以将视图模型的一部分传递给部分模型，也可以传递完整模型。无论什么效果最好。

# java - 错误信息 java? 从字符串转换到另一个类？

> ID：14800958
> 
> 赞同：0
> 
> 时间：2013-02-10T18:17:35.387
> 
> 标签：java

我收到一条错误消息，无法从字符串转换为电影。为什么我会收到此错误消息，我应该在第一个 if 语句中返回什么。我应该调用电影类吗？

```
public Movie findMovieByName(String inTitle) {
    for (Movie movies : movieArray)
        if (inTitle == movies.getTitle())
            return movies.getTitle();
        else
            return null; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T18:21:41.573

你可以这样做：

```
public Movie findMovieByName(String inTitle) {
    for (Movie movie : movieArray) {
       if (inTitle.equals(movie.getTitle()) {
         return movie;
       }
    }

    return null;
} 
```

变化：

*   用于`String.equals`比较`String`内容。`==`比较对象引用
*   *在检查完所有*`null`内容之前不要返回 *`Movie`*

 **旁注：*`Map<String, Movie>`如果查找频繁，可以在此处使用A。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:22:52.237

您已返回标题而不是电影

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T18:28:11.400

您的代码有两个主要问题：

第一个在这里：

```
if (inTitle == movies.getTitle()) 
```

== 运算符将 String inTitle 的实例与 movies.getTitle() 返回的 String 的实例进行比较。但是您要做的是比较两个实例中包含的字符，看看它们是否相同。为此，您应该编写：

```
if (inTitle.equals(movies.getTitle())) 
```

第二个问题是您的 findMovieByName 方法应该返回一个 Movie 实例，但您返回的是一个字符串：

```
return movies.getTitle(); 
```

您应该改为执行以下操作：

```
return movies; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T18:31:57.057

假设`movies.getTitle()`返回一个字符串，您可以（并且应该）使用：

```
inTitle.compareTo(movies.getTitle()) == 0 
```

而且，当然，返回您输入的相同标题有什么意义？您可以返回一个`true`值，表示`inTitle`找到 的值，或者返回电影（这是您的过程定义所说的。因此，您的过程将如下所示：

```
public Movie findMovieByName(String inTitle) {
   for(Movie movies : moviesArray) {
       if (inTitle.compareTo(movies.getTitle()) == 0)
           return movies;
       else
           return null;
   }
} 
```

`compareToIgnoreCase`如果您希望比较不区分大小写，也可以使用。

请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#compareTo(java.lang.String)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#compareTo(java.lang.String))和[http://docs.oracle.com/javase/ 1.4.2/docs/api/java/lang/String.html#compareToIgnoreCase(java.lang.String)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#compareToIgnoreCase(java.lang.String))

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T18:21:26.587

```
public Movie findMovieByName(String inTitle) {
    for (Movie movies : movieArray){
        if (inTitle.equals(movies.getTitle())){
            return movies.getTitle();
        }
    }
    return null;
} 
```

正如我从您的代码中看到的那样，`movies.getTitle()`要么返回一个对象，要么返回`Movie`一个`String`对象。

但是根据您的错误消息，我很确定您的意思`return movies`是`return movies.getTitle()`*

# javascript - 页面更改时更新功能？

> ID：14800962
> 
> 赞同：1
> 
> 时间：2013-02-10T18:18:04.773
> 
> 标签：javascript, jquery, google-chrome-extension

我正在为 twitter 开发 chrome 扩展程序，我遇到的唯一问题是，当您在 twitter 上向下滚动时，它会添加到页面中，对吗？好吧，当这种情况发生时，我需要更新我的 jquery 函数，否则点击函数将无法在新加载的推文上工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T18:20:44.777

您可能需要优先使用 jQuery 函数[live()](http://api.jquery.com/live/)或[on()](http://api.jquery.com/on/)。

像这样的东西：

```
$(document).on('click', '.yourClass', function() {
    //doSomething
}); 
```

这将确保新生成的内容也会受到影响。

# android - SharedPreferences - 首选项连接可能吗？

> ID：14800969
> 
> 赞同：1
> 
> 时间：2013-02-10T18:18:54.653
> 
> 标签：android, sharedpreferences, preferences

假设我有一个 Preference XML 文件和另一个 SharedPreference（公共范围）

有没有办法将偏好 XML 文件链接到我的共享偏好对象？

就像给我的偏好 xml 文件一个对共享偏好对象的引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:20:35.573

好的，我终于使用了替代方法，而不是加载了类变量，并在更改侦听器上使用了首选项

# python - 正则表达式删除直到特定字符的新行

> ID：14800970
> 
> 赞同：0
> 
> 时间：2013-02-10T18:18:55.340
> 
> 标签：python, regex, fasta

我在格式的文件中有一系列字符串：

```
>HEADER_Text1
Information here, yada yada yada
Some more information here, yada yada yada
Even some more information here, yada yada yada
>HEADER_Text2
Information here, yada yada yada
Some more information here, yada yada yada
Even some more information here, yada yada yada
>HEADER_Text3
Information here, yada yada yada
Some more information here, yada yada yada
Even some more information here, yada yada yada 
```

我正在尝试找到一个正则表达式模式，它将删除`>`下一个字符之间的字符下方的换行符`>`。所以最终结果看起来像：

```
>HEADER_Text1
Information here, yada yada yada Some more information here, yada yada yada Even some more information here, yada yada yada
>HEADER_Text2
Information here, yada yada yada Some more information here, yada yada yada Even some more information here, yada yada yada
>HEADER_Text3
Information here, yada yada yada Some more information here, yada yada yada Even some more information here, yada yada yada 
```

有谁知道我怎么能想出一个正则表达式模式来做到这一点？

旁注：这种格式作为 FASTA 格式在计算科学中很常见。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:04:25.357

如评论中所述，您最好的选择是使用现有的 FASTA 解析器。为什么不？

以下是我将如何加入基于领先大于的行：

```
def joinup(f):
    buf = []
    for line in f:
        if line.startswith('>'):
            if buf:
                yield " ".join(buf)
            yield line.rstrip()
            buf = []
        else:
            buf.append(line.rstrip())
    yield " ".join(buf)

for joined_line in joinup(open("...")):
    # blah blah... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:27:42.987

鉴于 > 总是被认为是新行的第一个字符

"\n([^>])" 与 "\1"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:29:06.567

这也应该有效。

sampleText=""">HEADER_Text1 这里有信息，yada yada yada 这里有更多信息，yada yada yada 这里还有更多信息，yada yada yada

> HEADER_Text2 这里有信息，yada yada yada 这里有更多信息，yada yada yada 这里还有更多信息，yada yada yada HEADER_Text3 这里有信息，yada yada yada 这里有更多信息，yada yada yada 这里还有更多信息，yada yada yada"" “”

cleartext = re.sub ("\n(?!>)", "", sampleText)

打印明文

> HEADER_Text1这里有信息，yada yada yada这里有更多信息，yada yada yada这里有更多信息，yada yada yada HEADER_Text2这里有信息，yada yada yada这里有更多信息，yada yada yada这里有更多信息，yada yada yada HEADER_Text3这里有信息，yada yada yada更多信息这里, yada yada yadaEven 更多信息在这里, yada yada yada

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T23:29:34.133

你真的不想要正则表达式。而对于这项工作，python 和 biopython 是多余的。如果这实际上是 FASTQ 格式，只需使用`sed`：

```
sed '/^>/ { N; N; N; s/\n/ /2g }' file 
```

结果：

```
>HEADER_Text1
Information here, yada yada yada Some more information here, yada yada yada Even some more information here, yada yada yada
>HEADER_Text2
Information here, yada yada yada Some more information here, yada yada yada Even some more information here, yada yada yada
>HEADER_Text3
Information here, yada yada yada Some more information here, yada yada yada Even some more information here, yada yada yada 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T18:54:49.983

您不必使用正则表达式：

```
[ x.startswith('>') and x or x.replace('\n','') for x in f.readlines()] 
```

应该管用。

```
In [43]: f=open('test.txt')

In [44]: contents=[ x.startswith('>') and x or x.replace('\n','') for x in f.readlines()]                                                                                   

In [45]: contents
Out[45]: 
['>HEADER_Text1\n',
 'Information here, yada yada yada',
 'Some more information here, yada yada yada',
 'Even some more information here, yada yada yada',
 '>HEADER_Text2\n',
 'Information here, yada yada yada',
 'Some more information here, yada yada yada',
 'Even some more information here, yada yada yada',
 '>HEADER_Text3\n',
 'Information here, yada yada yada',
 'Some more information here, yada yada yada',
 'Even some more information here, yada yada yada'] 
```

# matplotlib - matplotlib 刻度标签相对于轴的位置

> ID：14800973
> 
> 赞同：8
> 
> 时间：2013-02-10T18:19:09.640
> 
> 标签：matplotlib

我将 matplotlib 设置为将刻度线放在绘图区域之外，但现在它们在相应的标签上重叠。tick_params 方法不提供任何选项来设置相应的标签位置。所以我想我将不得不使用 text() 方法编写自己的函数。同时有没有人有更好的建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T18:23:18.133

要相对于刻度移动刻度标签，请使用 pad。比较

```
ax.tick_params(direction='out', pad=5)
plt.draw() 
```

和

```
ax.tick_params(direction='out', pad=15)
plt.draw() 
```

# macos - 编程 ATtiny84

> ID：14800976
> 
> 赞同：0
> 
> 时间：2013-02-10T18:19:16.227
> 
> 标签：macos, usb, avr, atmel

我正在围绕[Attiny84 微控制器](https://www.sparkfun.com/products/11232)设计一个移动设备，当我查找对其进行编程并使其运行的方法时，我发现我需要一个 JTAG 编程器。Attiny84 可以通过 USB 用 6 针头之类的东西进行编程吗？Attiny84 还可以通过哪些其他方式进行编程？

PS没有arduino，我在我的mac上使用雪豹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:47:19.557

ATtiny84 可以通过 SPI 进行编程。[有关详细信息，请参见数据表](http://www.atmel.com/Images/doc8006.pdf)的第 19.5 节（第 163 页）。

为此，您需要一个 AVR 程序员（**不是**JTAG 程序员；那是完全不同的东西）。一种便宜的选择是[USBtinyISP](http://www.adafruit.com/products/46)。

# macos - 使用 .bashrc 的命令添加字符串

> ID：14800979
> 
> 赞同：0
> 
> 时间：2013-02-10T18:19:43.277
> 
> 标签：macos, bash, shell, terminal

我正在尝试创建一个别名，`.bashrc`如下所示：

```
alias www="open http://localhost/~Sites/;basename $(pwd)" 
```

例如，如果我在终端中执行以下操作：

```
cd ~/Sites/project1
www 
```

我希望浏览器使用该地址打开，`http://localhost/~Sites/project1`但我无法`basename $(pwd)`运行。

语法有什么问题？如何将字符串和简单命令添加到单个别名中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T18:24:07.760

试试这个：

```
alias www='open "http://localhost/~Sites/$(basename $PWD)"' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T18:25:08.657

改用函数，别名不是很有特色。

```
www() {
  open "http://localhost/~Sites/$(basename $PWD)"
} 
```

或者更好的是，让函数同时执行以下操作：

```
www() {
  dir=$1
  cd ~/Sites/"$1"
  open "http://localhost/~Sites/$1"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T18:23:39.070

我不认为你想要一个`;`. 您希望`basename`在该命令行上的输出：

```
alias www='open http://localhost/~Sites/$(basename $(pwd))' 
```

# javascript - 如何测试 transitionProperty (et. al.) 是采用供应商前缀样式属性名称还是规范化属性名称？

> ID：14800981
> 
> 赞同：0
> 
> 时间：2013-02-10T18:20:21.403
> 
> 标签：javascript, css, html, vendor-prefix

这是设置 CSS 的 JS 代码的摘录：

```
function hyphen_style(style) {
    return style.replace(/([A-Z])/g, function(str,m1){ return '-' + m1.toLowerCase(); }).replace(/^ms-/,'-ms-');
}

var css = "#debug_element_highlighter_container * {"+
hyphen_style(Modernizr.prefixed('transitionDuration')) + ": 2s, 2s;" + 
hyphen_style(Modernizr.prefixed('transitionProperty')) + ": transform, opacity;" + 

... 

// append a style tag to head 
var head = document.getElementsByTagName("head")[0];
var style = document.createElement("style");
style.type = "text/css";
if (style.styleSheet){
    style.styleSheet.cssText = css;
} else {
    style.appendChild(document.createTextNode(css));
} 
```

现在这确实有效，但我确实记得不久前我有浏览器拒绝合作而不`transitionProperty`使用样式属性的供应商前缀版本`transform`，即需要读取 CSS 以`-webkit-transition-property: -webkit-transform, opacity;`使浏览器以我的方式行事想。

显然，这在今天仍然适用于同样支持`-webkit-transition-property: transform, opacity;`. 不难想象，在未来的某个时候，某些 webkit 浏览器会突然停止检查`-webkit-`前缀。

Modernizr（和 Modernizr 文档）为我们提供了`prefixed()`用于在它们之间进行转换的原语（等等），但我不清楚如何稳健地测试时尚之后的样式是否`transitionProperty`需要设置前缀样式属性名称。通过简单地分配不带前缀的样式并查看它是否“需要”来测试样式本身以查看它们是否需要添加前缀是非常简单的。但我不太确定这种方法是否适用于指定样式属性名称的特殊情况。

当然，我可以使用超便携的矫枉过正的方法，即在出现这种情况时设置所有四种 CSS 声明组合，如果浏览器支持任何样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:25:01.697

我对您的应用程序了解得不够多，不知道这是否适合您，但是[http://prefixr.com/](http://prefixr.com/)等网站提供了一个 API，您可以通过该 API 运行 CSS必需的。

# javascript - Javascript按算法排序，jquery可能

> ID：14800987
> 
> 赞同：1
> 
> 时间：2013-02-10T18:20:52.433
> 
> 标签：javascript, jquery, algorithm, sorting

好的，我正在尝试创建一个排序应用程序，但它有点让我心烦意乱。可能是因为想太多。

**我想要的**

1.  我想对数组中的值进行排序，可能使用冒泡排序
2.  我想将每次迭代推送到`<tr>`一个表
3.  并且能够知道哪些值已被替换

**必须发生什么**

1.  每次迭代，我都会得到一个值列表
2.  每个列表都会突出显示受影响的值

**我目前拥有的**

```
var sort = {
    init : function() {
        sort.vars.$oldList = [6,4,7,1,8];
        sort.play.bubble();
    }
}

sort.vars =  {
    $oldList : new Array(),
    $newList : new Array()
}

sort.play = {
    bubble : function() {
        var list = sort.vars.$oldList;
        var n = list.length;
        var isSorted = false;
        while(!isSorted) {
            var tmp, i;
            isSorted = true;
            for (i = 0; i < n; i++) {
                if (list[i] > list[i+1]) {
                    tmp = list[i];
                    list[i] = list[i+1];
                    list[i+1] = tmp;
                    isSorted = false;
                }
                sort.ui.pushtToTable(list);
            }
        }        
    }
}

sort.ui = {
    pushtToTable : function(list) {
        $.each(list, function(n, val){
            $('tr').append('<td>' + val);
        })
    }
}

$(document).ready(function(){
    sort.init();
}) 
```

如果可能的话，我想一个一个地显示值，也许设置一个超时，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T22:28:36.583

是的，`setTimeout`如果您想“查看”算法的进度，这是一个好主意。但是，`setTimeout`只接受函数作为参数，因此排序算法的每次迭代都必须在单独的函数中执行。有关示例，请参见以下代码（该代码不会在每次迭代中产生输出，而是“动画”交换动作 - 但我相信您可以轻松调整它以满足您的需要）。

[**演示**（JSFiddle）](http://jsfiddle.net/Aletheios/VZ92p/)

```
var SORT = function(type, list, selector){
    var container, containerTr, animSteps = [];
    // Show all elements in the container
    var printArray = function(list){
        var str = ["<table>"], i = 0, l = list.length;
        for (i; i < l; ++i) {
            str.push("<tr><td>", list[i], "</td></tr>");
        }
        str.push("</table>");
        container.html(str.join(""));
    };
    // This is the interesting part... ;)
    var swap = function(list, i1, i2) {
        var tmp = list[i1];
        list[i1] = list[i2];
        list[i2] = tmp;
        // Add 3 functions for each swapping action:
        // 1\. highlight elements, 2\. swap, 3\. remove highlight
        animSteps.push(function(){
            containerTr.eq(i1).add(containerTr.eq(i2)).addClass("highlight");
        }, function(){
            var tmp = containerTr.eq(i1).text();
            containerTr.eq(i1).text(containerTr.eq(i2).text());
            containerTr.eq(i2).text(tmp);
        }, function(){
            containerTr.eq(i1).add(containerTr.eq(i2)).removeClass("highlight");
        });
    };
    var animation = function(){
        // Execute all iteration functions one after another
        if (animSteps.length) {
            setTimeout(function(){
                animSteps.splice(0,1)[0]();
                animation();
            }, 250);
        }
    };

    // Collection of sorting algorithms
    var algorithms = {
        bubblesort: function(list) {
            for (var n = list.length; n > 1; --n) {
                for (var i = 0; i < n-1; ++i) {
                    if (list[i] > list[i+1]) {
                        swap(list, i, i+1);
                    }
                }
            }
        }
        // Add more algorithms using "swap" here...
    };

    if (algorithms[type] != undefined) {
        container = $(selector);
        printArray(list);
        containerTr = container.find("tr");
        algorithms[type](list);
        this.sorted = list;
        animation();
    }
};

// Usage:
var s = new SORT("bubblesort", [5,8,2,4,1,9,7,3,0,6], "#container");
console.log(s.sorted);    //the sorted array 
```

# c# - 创建一个线程来处理特定类的事件

> ID：14800989
> 
> 赞同：1
> 
> 时间：2013-02-10T18:20:56.580
> 
> 标签：c#, .net, wpf, multithreading

我有一个 WPF 应用程序，我需要在某个类的应用程序生命周期内监听和处理事件。

创建包装类，创建它的静态实例并调用“StartListening()”是不好的做法吗？如果在这个静态实例上发生了未经处理的异常怎么办？它会像在 ASP.NET 应用程序中那样拆毁整个应用程序吗？

我应该使用 QueueUserWorkItem、创建类、附加事件，然后放置某种 while(true){} 语句来保持线程处于活动状态吗？

最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:46:08.703

对我来说，这似乎是一个经典的发布者/听众问题。

我将创建一个接口：`IMyClassNameEventListener`并将`MyClass`其实例作为构造函数参数。然后在构造函数中我会调用`Attach(MyClass obj)`接口实例上的方法。当然，监听器会有一个单例生命周期，它不需要是静态的。

更好的方法是使用工厂创建实例，`MyClass`然后执行附加，因此`Attach`调用和依赖项不在构造函数中。

应用程序是否会失败将取决于您如何启动侦听器。您可以查看`TaskFactory`该类，它提供了处理异常传播的选项。如果侦听器失败，您希望应用程序如何运行？

当然，在侦听器对象本身中，您只需要在有事情要处理时运行代码。所以，当你收到一个事件时，你就启动了一个线程。如果您只想运行一个线程，则可以使用一组操作。

在侦听器类中，您可能希望具有以下内容：

```
private Queue<Action> ActionQueue = new Queue<Action>();
private object LockObj = new Object();
private volatile bool IsRunning;

public void Attach(Class1 obj)
{
   obj.SomeEvent += this.HandleEvent;
}

private void HandleEvent(object sender, EventArgs e)
{
    lock(this.LockObj)
    {
        this.ActionQueue.Enque(() => this.Handle(sender, e));

        if (!this.IsRunning)
        {
           Task.Factory.StartNew(() => this.Loop() );
        }
    }
}

private void Loop()
{
    this.IsRunning = true;

    while ((Action action = this.DequeueAction()) != null)
        action();

    this.IsRunning = false;
}

private Action DequeueAction()
{
    lock (this.LockObj)
    {
        return this.ActionQueue.Count > 0 ? this.ActionQueue.Dequeue() : null;
    }
}

private void Handle(object sender, EventArgs e)
{
//handling code
} 
```

# javascript - 无法从外部 js 访问 getElementsByTagName

> ID：14800992
> 
> 赞同：0
> 
> 时间：2013-02-10T18:21:24.880
> 
> 标签：javascript, getelementsbytagname

这件事让我发疯......我有一个简单的 js 脚本，它检查页面中的所有链接标签 () 并检查其中两个链接是否至少对应于给定的 href 属性。如果我将脚本作为内联脚本放在主页中，效果会很好。如果我将它放在同一页面上的外部 .js 脚本中，它不会找到任何元素。就像它只扫描内部文档而不扫描父文档一样。脚本是这样的

```
 var as,i,islink,l1,l2;
        l1 = false
        l2 = false
        as=document.getElementsByTagName('a');
        for(i=0;i<as.length;i++)
        {
            islink=as[i].href;
alert(islink);

            if(islink == 'http://www.linktocheck.com/')
            {
                if(!as[i].getAttribute('rel')) {l1 = true;}
            }
            if(islink == 'http://www.linktocheck.com/somedir/somepage.asp')
            {
                if(!as[i].getAttribute('rel')) {l2 = true;}
            }
        }
        if(!l1 || !l2) {alert('links not found in the page');} 
```

我放了警报（islink）；出于调试目的，查看是否在页面中找到了某些链接元素。调用页面的 HTML 是这样的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1"><title>page a</title>
<meta name="robots" content="noarchive" />
<meta content="text/html; charset=iso-8859-1" http-equiv="content-type" /></head>
<body>
<script src="externaljstochecklinks.js?PARAMETER=somevalue" id="uniqueid" type="text/javascript"></script><div style="margin-top: 6px;margin-bottom: 4px;text-align: center;"><a href="http://www.linktocheck.com/somedir/somepage.asp" title="" target="_blank">[...]</a>&nbsp;&nbsp;&nbsp;<a href="http://www.linktocheck.com/" title="" target="_blank"><img src="http://www.linktocheck.com/skins/some/images/some.gif" alt="" style="border: none;vertical-align: middle;" /></a></div> 
```

为什么如果我将链接检查脚本内联，它会找到元素，如果我把它放在外部它不会？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:24:30.400

您必须等待 DOM 完成加载，然后才能查询它以查找 DOM 元素。

您的脚本似乎位于该`<body>`部分的开头，这意味着它将在 DOM 被解析和加载之前执行。因此，还没有加载任何东西可以找到。

最简单的解决方法是将您的`<script>`标签移动到标签之前的正文末尾`</body>`。您还可以使用事件侦听器并仅在事件触发表明 DOM 已准备好时才执行您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:26:40.380

假设 external.js 文件的 url 是正确的，问题可能在于 js 文件的同步加载。

js文件一下载，就开始运行了。如果这发生在 DOM 完成加载之前，它会找不到任何`<a>`标签，因为它们还不存在。

`<BODY>`要测试假设，请在标记末尾包含您的外部 js 文件并查看它是否有效。

要永久解决此问题（并且您不想在正文末尾包含 JS 文件，您可以通过以下任一方式延迟加载：

1.  使用外部库（如 jquery）并将代码放入其中`$(document).ready()`
2.  将您的代码放在`window.onload`事件中
3.  触发你自己的“就绪”事件