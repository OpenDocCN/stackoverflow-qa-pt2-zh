# StackOverflow 问答 14417000-14417999

# php - 在 PHP 中捕获脚本执行时间

> ID：14417008
> 
> 赞同：0
> 
> 时间：2013-01-19T17:42:31.997
> 
> 标签：php, time, execution

以下脚本是创建 1 个缺少 html 按钮。

```
<?php 
for($i=1; $i<=100000;$i++)
{
    echo "<button>".$i."</button>";
}
?> 
```

我需要捕捉/记录时间。最后，结果应该显示： **Script take "x" minutes, "x" seconds and "x" milliseconds**。实际上，我正在克隆一个虚拟机，大约需要 4 到 5 分钟，具体取决于磁盘的大小。所以这就是我需要自定义输出的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T17:50:02.187

直接关闭[PHP 的文档](http://php.net/manual/en/function.microtime.php)：

```
function microtime_float()
{
    list($usec, $sec) = explode(" ", microtime());
    return ((float)$usec + (float)$sec);
}

$time_start = microtime_float();

for ($i = 1; $i <= 100000; $i++)
{
    echo "<button>".$i."</button>";
}

$time_end = microtime_float();
$time = $time_end - $time_start;

echo "Time taken = $time seconds\n"; 
```

如果您的 PHP 脚本需要几分钟才能执行，我会非常关心您的硬件规格；）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-19T18:21:21.127

从开始时间减去结束时间：

```
<?php
$start = microtime(true);
//du stuff there like this
sleep(1);
//and print time in sec
echo microtime(true) - $start; 
```

对于您的情况：

```
$start = microtime(true);

for($i=1; $i<=100000;$i++){
    echo "<button>".$i."</button>";
}

$sec = (microtime(true) - $start);
$mil = explode('.', (string)$sec);
$mil = number_format($mil[1], 3);
$min = $sec / 60;

echo "Script take '$min' minutes, '$sec' seconds and '$mil' miliseconds"; 
```

# html - 使用 html 和 css 粘贴在页面右侧的面板

> ID：14417010
> 
> 赞同：1
> 
> 时间：2013-01-19T17:42:43.687
> 
> 标签：html, css

我需要使用 HTML 和 CSS 做一些事情，而不需要 javascript。

![小样](../Images/8cff1e120f7bce0a9470a76d541886ab.png)

我需要帮助来定义“外部 Div”的 css。它必须一直到页面底部。高度必须为 100% - 90px。标头具有固定的高度。Inner Div 的高度必须是 Outer Div 高度的 60%。

谁能帮我？如果需要，我可以使用 html5 或 css3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:28:56.720

如果所有尺寸都以 % 为单位，那么在没有 JavaScript 的情况下很容易做到这一点，但是由于标题的高度必须为 90 像素，请尝试以下步骤：

1）给**Header**一个`z-index`大于**Outer-Div**的值，例如：

```
.header{z-index:10;}
.outer-div{z-index:0;} 
```

2) 现在，为**Header**赋予以下样式：

```
.header{height:90px;min-height:90px;max-height:90px;} 
```

**3）并且， Outer-Div**的以下样式：

```
.outer-div{height:100%;} 
```

4）因为您希望**Inner-Div**始终可见，首先您必须将其从**Header**中取出，因为**Header**高于**Outer-Div**，所以：`z-index`

 **```
.inner-div{margin-top:90px;} 
```

5）然后给它一个合适的高度，我建议在这个**Inner-Div**使用像素内部的 % ：

```
.inner-div{height:50%;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T17:53:17.130

要使 Outer Div 的高度为 100%-90px，请使用：

```
#outerdiv {
    height: 100%;
    margin-bottom: 90px;
} 
```

要使 Inner Div 的高度为 60%，请使用：

```
#innerdiv {
    height: 60%;
} 
```

两者都是您正常样式的补充。将#outerdiv 和#innerdiv 替换为您的外层和下层div 的ID 或类。

如果您想让面板在用户滚动时沿页面向下移动，请[在 SO 上使用此方法](https://stackoverflow.com/a/1638909/1979005)。这是简单的 CSS。只需添加`position: fixed`到 Outer Div 的 CSS。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T18:00:28.580

在 javascript 中，您应该捕获 body resize 事件，在这种情况下，您必须计算 Outer DIV 的高度。以下代码对您来说是一个好的开始：

```
function onBodyResize(e) {
    setProperty("OuterDIV", "height", (getDocHeight() - parseInt(getProperty("HeaderDIV","height"))) + "px");
}
function getDocHeight() {
    var r = document.getElementsByTagName('html')[0].getClientRects();
    return r[0].height;
}
function setProperty(id,prop,value) {
    document.getElementById(id).style.setProperty(prop,value,null);
}
function getProperty(id,prop) {
    var p;
    if (document.getElementById(id).currentStyle)
        p = document.getElementById(id).currentStyle[prop];
    else if (window.getComputedStyle)
        p = document.defaultView.getComputedStyle(document.getElementById(id),null).getPropertyValue(prop);
    return p;
} 
```**

# javascript - 在struts中为一个输入表单多次调用动作类

> ID：14417014
> 
> 赞同：1
> 
> 时间：2013-01-19T17:43:49.220
> 
> 标签：javascript, struts-1

我有 3 个屏幕，其中 screen2 上有一个后退按钮通向 screen1，下一个按钮通向 screen3。现在又多了一个按钮 Add ，它为不同的用户输入导致相同的 screen2 。问题是如果用户单击“添加”提交按钮，然后单击上一个，那么首先它应该转到 Screen2 和以前的条目，然后如果单击返回 Screen1。我如何在struts1.1中实现这个先前的屏幕流程

# haskell - 临时类型变量的范围

> ID：14417028
> 
> 赞同：5
> 
> 时间：2013-01-19T17:45:44.493
> 
> 标签：haskell, monads

我有大量类型的[向量](http://hackage.haskell.org/package/vector-0.10.0.1)函数

```
f :: (M.MVector v r, PrimMonad m) => 
     v (PrimState m) r -> v (PrimState m) r -> m () 
```

这些函数大多在原地工作，因此将它们的参数设置为可变向量很方便，以便我可以组合、迭代等。但是，在顶层，我只想使用不可变的“Haskell”/纯向量.

这是问题的一个例子：

```
{-# LANGUAGE TypeFamilies, 
             ScopedTypeVariables, 
             MultiParamTypeClasses, 
             FlexibleInstances #-}

import Data.Vector.Generic as V hiding (eq)
import Data.Vector.Generic.Mutable as M
import Control.Monad.ST
import Control.Monad.Primitive

f :: (M.MVector v r, PrimMonad m) => 
     v (PrimState m) r -> v (PrimState m) r -> m ()
f vIn vOut = do val <- M.read vIn 0
                M.write vOut 0 val

applyFunc :: (M.MVector v r, PrimMonad m, V.Vector v' r, v ~ Mutable v') => 
             (v (PrimState m) r -> v (PrimState m) r -> m ()) -> v' r -> v' r
applyFunc g x = runST $ do
                    y <- V.thaw x
                    g y y -- LINE 1
                    V.unsafeFreeze y

topLevelFun :: (V.Vector v r) => r -> v r
topLevelFun a =
    let x = V.replicate 10 a
    in applyFunc f x -- LINE 2 
```

编写的代码导致第 1 行出现错误：

```
Could not deduce (m ~ ST s)
   Expected type: ST s ()
   Actual type: m ()
   in the return type of g, LINE 1 
```

注释掉第 1 行会导致第 2 行出现错误：

```
Ambiguous type variable `m0' in the constraint:
    (PrimMonad m0) arising from a use of `applyFun' 
```

我尝试了各种显式类型（使用 ScopedTypeVariables、显式 foralls 等），但还没有找到解决第一个错误的方法。对于 LINE 1 错误，似乎`m`应该简单地推断为，`ST s`因为我在`runST`.

对于第 2 行错误（第 1 行注释掉），我想出的唯一可行的方法是

```
class Fake m v where
    kindSig :: m a -> v b c

instance Fake m v

topLevelFun :: forall m v v' r . (V.Vector v' r, M.MVector v r, PrimMonad m, Fake m v, v ~ Mutable v') => r -> v' r
topLevelFun a =
    let x = V.replicate 10 a
    in applyFunc (f::Transform m v r)  x -- LINE 2 
```

这显然不能令人满意：我必须创建一个假类，使用更无意义的方法，其唯一工作是演示类参数的种类。然后我为所有内容创建一个通用实例，以便我可以`m`在范围内`topLevelFun`，以便我可以添加一个约束和强制转换`f`。必须有更好的方法。

我可能在这里做错了各种各样的事情，所以任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:35:46.203

以下类型`applyFunc`适合您吗？

```
applyFunc :: (Vector v a) => 
  (forall s. Mutable v s a -> Mutable v s a -> ST s ()) 
  -> v a -> v a 
```

只要您拥有`Rank2Types`扩展名，就应该可以毫无问题地编译，因为您使用的函数必须适用于*所有*ST monad。原因是 is 的类型`runST`，`(forall s. ST s a) -> a`所以之后的代码主体`runST`需要为所有人工作`s`，因此`g`需要为所有人工作`s`。

（您可以改为使用适用于所有功能的功能，`PrimMonads`但其中的功能要少得多）。

GHC 无法推断出更高等级的类型。有很好的理由不进行推断`RankNTypes`（这是无法确定的），尽管`Rank2`理论上是可推断的，但 GHC 人员决定“推断当且仅当原理类型是 Hindley-Milner 类型”的规则，这对于像我这样的人来说是很容易推理，并使编译器编写者的工作不那么难。

在评论中，您询问有关获取元组的信息。具有多态类型的元组需要`ImpredicativeTypes`并且可以像这样完成

```
applyFuncInt :: (Vector v a) => 
   ((forall s. Mutable v s a -> Mutable v s a -> ST s ()),Int)
   -> v a -> v a
applyFuncInt (g,_) x = runST $ do
                            y <- V.thaw x
                            g y y
                            V.unsafeFreeze y 
```

不过，通常最好将数字作为单独的参数简单地传递。

# javascript - 当我发送数据时，Ajax 给我一个错误

> ID：14417030
> 
> 赞同：0
> 
> 时间：2013-01-19T17:45:50.530
> 
> 标签：javascript, ajax, forms, jquery

我正在尝试通过 Ajax 提交表单，但我无法提交。我有多个表格，我正在使用 (this) 提交数据。我收到错误`From error:0 error`消息。警报消息显示我拥有价值。

```
<script type="text/javascript">
$(document).ready(function() {

    $(".submitform").click(function (){
        alert ($(this).parent().serialize());
        $.ajax({
                type: "POST",
                url: "reply_business.php",
                timeout:5000,
                data: $(this).parent().serialize(),
                beforeSend: function(xhr){
                    $('#load').show();
                },
                success: function(response){
                    $(this).parent().find('.sentreply').append(response);
                    $('.sentreply div:last').fadeOut(10).fadeIn(2000);
                    //uncomment for debugging purposes
                    //alert(response);
                },
                error: function(jqXHR) {
                   alert ('From error:' + jqXHR.status + ' ' +jqXHR.statusText);
                },
                complete: function(jqXHR, textStatus){
                    //uncomment for debugging purposes
                    //alert ('From complete:' + jqXHR.status + ' ' +jqXHR.statusText + ' ' + textStatus);
                    $('#load').hide();
           }
        });

    });
}); 

    </script> 
```

我正在通过 PHP 代码创建下面的表单

```
foreach ($array['business_ids'] as $business) 
                  {              

                        ?>
<form >
  <input type="hidden" name="b_id" value="<?php echo $business ; ?>" />
  <input type="hidden" name="c_id" value="<?php echo $sqlr['conversation_id']; ?>" />
  <input type="hidden" name="q_id" value="<?php echo $sqlr['query_id']; ?>" />
  <input type="hidden" name="u_id" value="<?php echo $sqlr['u_id']; ?>" />
  &nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;
  <textarea  name="reply">Type the reply here.</textarea>
  <input type="submit"  class="submitform" value="Submit">
</form>
<?php

                  } 
```

我不明白为什么 Ajax 不能发送数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:22:50.840

在没有看到标记或网络流量的情况下，我们只能猜测。也许 $(this).parent() 不是形式？

附加通常`$(form).submit()`比`$(button).click()`这个原因更安全，因为`$(button).click()`它不会通过按 enter 键捕获表单提交。

**编辑**这是一个例子：

```
<form id="theform">
    <input type="text" id="thetext" name="thetext" />
    <input type="submit" value="send" />
</form>
<form id="anotherform">
    <input type="text" id="anothertext" name="anothertext" />
    <input type="submit" value="save 2" />
</form>
<script>
    $(document).ready(function () {
        $("#theform").submit(function (e) {
            var data = {
                thetext: $("#thetext").val()
            };
            $.ajax("/the/server/url", {
                type: "POST",
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify(data),
                success: function (r) {
                    alert("done");
                }
            });
            // Technically you need only one or the other
            e.preventDefault();
            return false;
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:07:41.203

您似乎在启动 Ajax 请求后提交了表单 - 当页面被卸载时，请求被取消。由于您的表单没有`action`，提交只会重新加载当前页面，因此您可能不会注意到它。

为了防止这种情况，您将需要`preventDefault()`捕获的事件。此外，您不应仅处理`click`提交按钮上的事件，而应处理`submit`其`<form>`本身的事件。

# ruby-on-rails - 无法更改 rake 任务

> ID：14417035
> 
> 赞同：0
> 
> 时间：2013-01-19T17:46:37.613
> 
> 标签：ruby-on-rails, rake

我在更改我所做的 rake 任务时遇到了一些麻烦。当我更改 .rb 文件中的代码时，它仍然运行，就好像我没有进行这些更改一样。（例如，我添加了一个 puts，没有输出；我注释掉所有内容，它仍然执行它最初的操作。）

我需要在某处重置缓存吗？我试过重新启动我的机器和一切。

这是 rake 任务的大部分代码： [pastebin.com/RCgkbsPt](http://pastebin.com/RCgkbsPt)

它由运行`$ rake db:permissions`

# directshow - 具有多个输入引脚的 DirectShow 复用器过滤器应如何实现 IMediaSeeking 传递？

> ID：14417041
> 
> 赞同：2
> 
> 时间：2013-01-19T17:47:13.587
> 
> 标签：directshow

我正在使用自定义音频混合器过滤器（我有源）处理一个错误，其中输入音频流在使用某些输入源（我没有这些源）进行任何搜索后似乎不同步，当更多多于一个输入连接。

在寻找时间戳等之后看起来是正确的，但流中的实际数据与时间戳不同步。

音频混合器有一个自定义的 IMediaSeeking 实现，它将 IMediaSeeking::SetPositions 调用传递给每个输入引脚。这似乎是正确的方法。如果有多个源过滤器，则需要将 SetPosition 调用传递给每个源。然后由源过滤器仅在其一个引脚上实现搜索（如 MSDN 中所述）。

从 CPosPassThru 继承传递实现以便它也支持 IMediaPosition 会更好吗？一些过滤器似乎使用 IMediaPosition 调用而不是 IMediaSeeking。

复用器过滤器是否需要做任何特定的事情才能将寻求调用传递给多个输入引脚。有什么好的示例源代码吗？关于编写复用器过滤器的 Monogram 博客似乎没有涵盖搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:11:34.433

为了未来读者的利益，以下似乎工作正常。同步错误在别处。

音频混合器有一个自定义的 IMediaSeeking 实现，它将 IMediaSeeking::SetPositions 调用传递给每个输入引脚。

如果有多个源过滤器，则需要将 SetPosition 调用传递给每个源。然后由源过滤器仅在其一个引脚上实现搜索（如 MSDN 中所述）。

似乎没有必要向上游转发 IMediaPosition。

# c++ - HashTable 键与取值的复杂性

> ID：14417042
> 
> 赞同：3
> 
> 时间：2013-01-19T17:47:16.363
> 
> 标签：c++, hashmap, hashtable

我刚刚阅读了一个面试问题，该问题询问了哈希键与哈希值的获取复杂性。我总是认为两者是相同的，在 O(1 + n/k) （其中 k 是桶数）。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T17:50:52.363

获取哈希*键*的长度为 O(lk)，因为您必须对其进行哈希处理，但`n/k`对于任何给定的哈希表都应该是恒定的。这通常被称为 O(1)，因为它不依赖于`n`，但它不是*严格*的O(1)，除非密钥大小是固定的。

但是获取一个哈希*值*需要遍历整个表来寻找它，假设你没有预先订购它（你可以设计哈希表，它也可以支持 O(log(n)) 的二进制查找，但这并不常见） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T17:49:59.883

哈希值是初始查找位置。如果所需的数据未存储在该索引处，则通过迭代获得哈希键，直到找到所需的数据。

# c# - 在 WCF 中返回 xml 文件而不读取内存

> ID：14417047
> 
> 赞同：0
> 
> 时间：2013-01-19T17:47:56.727
> 
> 标签：c#, xml, wcf

我有一个 XML 文件（大小为 10MB~），我想在我的 WCF 服务中将其作为`XmlDocument`类型返回，但之前没有将其加载到内存中，因为请求此文件的人很多，所以服务器会出现`OutOfMemory`异常.

有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T17:51:22.570

如果是 wcf，您可以使用流式传输（作为二进制数据返回），它旨在处理大数据：

详情[在这里](http://msdn.microsoft.com/en-us/library/ms733742.aspx)

# javascript - 类型错误：document.on 不是函数

> ID：14417049
> 
> 赞同：3
> 
> 时间：2013-01-19T17:48:03.557
> 
> 标签：javascript, ruby-on-rails, fullcalendar

ROR 新手在这里。我正在尝试在 Ubuntu 12[上将 FullCalendar](http://arshaw.com/fullcalendar/docs/usage/)与 ROR 3.2.11 一起使用。我已经下载了一个[工作示例](https://github.com/bokmann/rails3_fullcalendar)并验证了日历确实显示在示例应用程序中。但是，它不在我的应用程序中。我安装了 Firebug 来查看是否有任何 JavaScript 错误，有 2 个：

```
TypeError: document.on is not a function   <location rails.js:128>
TypeError: $(...).fullCalendar is not a function   <location calendar.js:48> 
```

我不明白错误是什么意思。请记住，我没有编写这些 JavaScript，所以我不理解它们。

希望遇到此错误和解决方案的人可以提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T18:33:31.633

`$(document).on()`是一个 jQuery 构造（参见[http://api.jquery.com/on/](http://api.jquery.com/on/)）。 `$(...).fullCalendar()`也闻起来像一个 jQuery 插件。在您的页面前面引用 jQuery（请参阅[https://developers.google.com/speed/libraries/devguide#jquery](https://developers.google.com/speed/libraries/devguide#jquery)），它应该会亮起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T09:48:58.303

检查您的 jquery 版本， $(document).on() 至少应该是 1.7 才能工作。

# ruby-on-rails - rails ajax_pagination 找不到文件“历史”

> ID：14417056
> 
> 赞同：3
> 
> 时间：2013-01-19T17:48:50.947
> 
> 标签：ruby-on-rails, ajax, pagination, history.js

我已经从[https://github.com/ronalchn/ajax_pagination安装了 ajax_pagination gem](https://github.com/ronalchn/ajax_pagination)

当我重新启动服务器时，我收到此消息

> 找不到文件“历史记录”（在 /Users/user/.rvm/gems/ruby-1.9.3-p362/gems/ajax_pagination-0.6.3/lib/assets/javascripts/ajax_pagination.js.erb:3 中）

并在资产清单中插入调用，rails 版本为 3.2.8

我曾尝试安装历史 gem ( [https://github.com/philostler/historyjs-rails](https://github.com/philostler/historyjs-rails) ) 或将 history.js 添加到资产但没有任何帮助

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-09T17:04:45.520

我有同样的问题，你需要做的就是：

*   添加`gem 'jquery-historyjs'`到您的 Gemfile，
*   跑`bundle install`
*   然后`rails generate historyjs:install`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:24:25.717

这似乎是ajax_pagination 依赖的[jquery-historyjs gem 中的一个错误。](https://github.com/wweidendorf/jquery-historyjs)您可能想在他们的 github 存储库上报告问题。

作为一种解决方法，您可以在 app/assets/javascripts 中创建一个空白的 history.js 文件并尝试引入[historyjs-rails](https://github.com/philostler/historyjs-rails)。

# php - 是否可以将 mongoDB 中的更新查询限制为特定限制？

> ID：14417057
> 
> 赞同：1
> 
> 时间：2013-01-19T17:48:52.027
> 
> 标签：php, sql, mongodb, updates

我想将 mongoDB 集合中的记录更新到固定限制。有没有办法在 PHP/mongoDB 中做到这一点？

我对`'multi'`国旗很了解。`multi`设置时`true`它将更新所有匹配的记录，否则只更新一条记录。

但我需要的是我想将集合中的记录更新到 SQL 中的固定限制。

前任。`UPDATE table SET x=10 wher x=1 LIMIT 10`

我想知道mongoDB是否有可能？

希望我对我的问题很清楚。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:10:47.920

当前无法从您的应用程序将更新查询（仅查找查询）限制为 MongoDB。

目前最好的方法是将这十个（或其他）拉到客户端，在您的 PHP 应用程序中，并在那里对它们进行更新：

```
$cursor = $db->col->find(array('x' => 1))->limit(10)
foreach($cursor as $row){
    $row['x'] = 10;
    $db->col->save($row); // Update with set can be used too
} 
```

如果它是一个小数字，您也可以像@nw90 所说的那样，将`ObjectId`s 取出，然后使用 atomic 在一个查询中完成所有操作`$set`。

您需要注意这一点：[https ://jira.mongodb.org/browse/SERVER-1599](https://jira.mongodb.org/browse/SERVER-1599)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T17:55:38.500

据我所知，没有这样的功能。您可以采取一种解决方法：只需获取要更新的文档的 _id 并使用这些 _id 更新所有文档

# html - HTML 内容 div 间距

> ID：14417058
> 
> 赞同：-1
> 
> 时间：2013-01-19T17:49:05.403
> 
> 标签：html, margins

我正在研究我在网上找到并遇到问题的代码。当我将文本添加到名为内容的主 div 时，我没有边距，文本太靠近侧边栏。我应该如何解决它？这是代码：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="mystyle.css">
</head>
<body>
    <div id="outer">
        <div id="header"></div>
        <div id="inner">
            <div id="sidebar"></div>  
            <div id="content">
        </div>  
    </div>
</html> 
```

CSS

```
#outer {width:1000px;margin:0 auto;}
#inner {overflow:hidden;}
#header {min-height:40px;background:#bbb}
#content {width:900;min-height:900px;float:left;background:#ccc;clear:}
#sidebar{width:100px;min-height:250px;float:left;background:#ddd} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:19:18.043

您是否尝试过诸如

```
#content{box-sizing:border-box, width:900;min-height:900px;float:left;background:#ccc; padding:10px;} 
```

使用“box-sizing”应该确保它不会弄乱你的页面。

编辑：是的，关闭那个html，这真的很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:36:38.463

在内容 div 内添加另一个 div 并在其上使用边距。

您还可以使用段落标签并在其上使用相同的边距，这不会破坏您的布局。

此外，您还缺少一个结束标签，这肯定需要修复。

尝试：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="mystyle.css">
</head>
<body>
    <div id="outer">
        <div id="header"></div>
        <div id="inner">
            <div id="sidebar"></div>  
            <div id="content">
               <div class="box">
                all text and content comes here
                </div>
             </div>
        </div>  
    </div>
</html> 
```

附加CSS：

```
.box {
margin:50px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T18:27:50.790

不知道你具体需要什么。但尝试添加 `padding-left`或`margin-left`

```
#content {width:900;min-height:900px;float:left;background:#ccc;padding-left:20px;margin-left:10px;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T17:53:11.930

在 CSS 中的内容和/或侧边栏 div 上使用填充和/或边距

[http://www.htmldog.com/guides/cssbeginner/margins/](http://www.htmldog.com/guides/cssbeginner/margins/)

# c - virtualKeycode ToUnicode

> ID：14417059
> 
> 赞同：1
> 
> 时间：2013-01-19T17:49:08.173
> 
> 标签：c, windows, unicode, keyboard, keycode

我一直在尝试获取给定键码的 unicode 字符，但我无法弄清楚为什么我必须提供这么多参数。来自 MSDN：

```
int WINAPI ToUnicode(
  _In_      UINT wVirtKey,
  _In_      UINT wScanCode,
  _In_opt_  const BYTE *lpKeyState,
  _Out_     LPWSTR pwszBuff,
  _In_      int cchBuff,
  _In_      UINT wFlags
); 
```

我有一个 VirtualKeycode 可以使用，但为什么我还需要给它一个扫描码呢？如果您还需要键盘上的扫描码，那么拥有 virtualKeycode 有什么意义？

到目前为止我已经尝试过：

```
const unsigned int BUFFER_LENGTH = 3;
WCHAR string[BUFFER_LENGTH];
const BYTE* keyboard = new BYTE[256]; 
unsigned int x = 0x50; //P virtualkeycode
ToUnicode(x,0,keyboard,string,1,0) 
```

ToUnicode 返回一个 0，表示它无法转换为 Unicode。

# winapi - 开始组装 x86 - MASM

> ID：14417061
> 
> 赞同：1
> 
> 时间：2013-01-19T17:49:28.250
> 
> 标签：winapi, assembly, architecture, x86, masm

好吧，我对 C/C++ 和 winAPI 的了解相当中级，我对汇编并不陌生。

但是，我想更深入地了解汇编中的实际编程，并在较低级别了解某些功能并了解它们的工作原理：

我感兴趣的事情：堆栈、PE 如何映射到内存、中断、内核和驱动程序等。

我想真正深入了解围绕 Windows 的体系结构。

你建议我从哪里开始？如果您能提供书名或链接供我参考，我将很高兴。

非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:15:42.297

这是英特尔架构软件手册的链接：

[http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)

这是一个很好的起点，学习操作码和注册表，流程

# java - NullPointerException 写入文件以创建 JAR

> ID：14417064
> 
> 赞同：0
> 
> 时间：2013-01-19T17:49:40.850
> 
> 标签：java, file, jar, nullpointerexception

我正在尝试写入文件以创建 JAR。但我有问题`NullPointerException`。我的文件在类路径中。

（我使用`getClass()`是因为我将创建一个 JAR 文件。）

有什么理由我会在`NullPointerException`这里得到一个？谢谢你的帮助。

这是代码：

```
package Library;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.URISyntaxException;

public class WriteJARSample {
public WriteJARSample() throws URISyntaxException, FileNotFoundException,    FileNotFoundException, IOException{
    write();
}
public void write() throws URISyntaxException, FileNotFoundException, IOException{
    try{
        File Mf=new File(getClass().getClassLoader().getResource("AllBookRecords.txt").toURI());
        File Tf=new File(getClass().getClassLoader().getResource("Boutput.txt").toURI());
        BufferedReader Bbr=new BufferedReader(new InputStreamReader(getClass().getResourceAsStream("AllBookRecords.txt")));
        PrintWriter Bpw=new PrintWriter(Mf);
        String Bs;
        while( (Bs=Bbr.readLine()) != null ){
                Bpw.println(Bs);
        }
        Bpw.close();
        Bbr.close();
        Mf.delete();
        Tf.renameTo(Mf);
    }
    catch(IOException ioe){

    }
    catch(URISyntaxException urise){

    }
}
public static void main(String[] args) throws URISyntaxException, FileNotFoundException, IOException{
    new WriteJARSample();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T18:28:27.293

`getClass().getResourceAsStream("AllBookRecords.txt")`对于“AllBookRecords.txt”的先前访问有所不同，也许它也应该是：

```
getClass().getClassLoader().getResourceAsStream("AllBookRecords.txt") 
```

或者干脆

```
getClass().getResourceAsStream("/AllBookRecords.txt") 
```

`getClass().getResource(AsStream)`相对于类包（子目录）起作用。

# iphone - 在 UITableView 中实现 UIScrollViewDelegate 方法

> ID：14417071
> 
> 赞同：2
> 
> 时间：2013-01-19T17:50:07.097
> 
> 标签：iphone, ios, objective-c, xcode

我正在使用符合这些协议的自定义 UITableView：

*   UITableView 数据源
*   UIScrollViewDelegate

我的应用程序中的许多地方都使用了这个表格视图。我已经在后台实现了图像下载。当用户滚动时，会下载额外的图像——这就是我需要实现 UIScrollViewDelegate 方法的原因。我绝对希望在这个类中而不是在视图控制器中拥有它，因为这些自定义表视图中的每一个都使用相同的方法实现。

这是问题所在。在我的视图控制器中，我需要从 UITableViewDelegate 实现 didSelectRowAtIndexPath 方法，因为我需要执行 segue。但是当我这样做（并将委托设置为 self）时，UIScrollViewDelegate 方法会被此视图控制器捕获并且不会传播到表视图，因为 UITableView 扩展了 UIScrollView （和他的委托方法）。

我已经通过将它添加到我的每个视图控制器来“解决”它：

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    [self.bookTableView scrollViewDidEndDragging:scrollView willDecelerate:decelerate];
} 
```

但是在整个应用程序的许多地方都有相同的代码块（仅供参考，这只是其中一个，还有更多）并不是很好。你有什么想法我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:02:10.380

> 我绝对希望在这个类中而不是在视图控制器中拥有它，因为这些自定义表视图中的每一个都使用相同的方法实现。

你不可以。`UITableView`是一种看法。它不应该与网络对话。那是模型（或者可能是模型控制器）的功能。您正在讨论的功能与显示信息无关。它与获取信息有关。

您想要的是将滚动视图委托方法转换为自定义`UITableViewController`并从中继承您的其他表视图控制器。但是，实际下载应由您的模型管理。你的视图控制器应该观察模型并随着它的变化而更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:05:21.243

我通过使用 iOS 6 中的新功能——嵌入式视图控制器解决了这个问题。在我使用此表视图控制器的每个视图控制器中，我执行以下操作：

```
self.tableViewController.tableView = self.bookTableView;
[self addChildViewController:self.tableViewController]; 
```

self.bookTableView 在我看来是 UITableView 。

要从此子 TVC 执行转场，您可以使用以下命令：

```
[self.parentViewController performSegueWithIdentifier:@"Book Details" sender:selectedBook]; 
```

# java - Java/groovy反射读取方法内容

> ID：14417072
> 
> 赞同：0
> 
> 时间：2013-01-19T17:50:11.890
> 
> 标签：java, reflection, methods, groovy, reverse

我想分析我的代码、类和方法：我的目标是通过反转我的代码来创建一个序列图但是，我想在不运行应用程序的情况下分析它

所以，我已经得到了我的类和方法名称我现在正在寻找的是**读取/获取方法的内容**，而不使用正则表达式来解析我的整个文件有没有简单的方法来获取它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:28:40.340

我认为您可以使用 Groovy 的[Global AST Transforms](http://groovy.codehaus.org/Global+AST+Transformations)来分析您的代码。它将使您可以访问抽象语法树。从那里您可以进入代码的树节点。这是 Groovy 编译过程中的“挂钩”。

我不确定它是否适用于 Java 代码。Java 是 Groovy 代码，所以理论上它可以工作，但编译器不会遍历`.java`文件。

# python - 防止请求在 python SocketServer 中关闭

> ID：14417080
> 
> 赞同：2
> 
> 时间：2013-01-19T17:50:45.783
> 
> 标签：python, sockets

我正在使用与 Android 连接并定期发送消息的 python 套接字服务器。我有一个问题，请求在每条发送的消息上都关闭，我需要它保持打开状态，直到 Android 决定关闭它。

目前它看起来像这样：

```
class SingleTCPHandler(SocketServer.StreamRequestHandler):
    def handle(self):
    try:
        while True:
            message = self.rfile.readline().strip()  # clip input at 1Kb            
            my_event = pygame.event.Event(USEREVENT, {'control':message})
            pygame.event.post(my_event)
    except KeyboardInterrupt:
        sys.exit(0)
    finally:
        self.request.close() 
```

我通过`while True`在我的`handle()`定义中添加 a 解决了这个问题，但是，这被批评为一个糟糕的解决方案，正确的方法是覆盖`process_request`and`shutdown`方法。

**解决方案的尝试**

我`while`从代码中删除了，用netcat本地连接到服务器，发送了一条消息，然后去看看什么时候关闭连接。

我想看看关闭连接以找出我必须覆盖的方法是什么。

我已经通过调试器逐步完成`serve_forever()`并跟随它到这部分代码：

```
> /usr/lib/python2.7/threading.py(495)start()
    494         try:
--> 495             _start_new_thread(self.__bootstrap, ())
    496         except Exception: 
```

通过第 495 行后（我无法进入它），连接将关闭。

我不知何故怀疑通过套接字维持连接是否如此忙碌，这基本上是我们选择通过套接字进行通信的原因，以建立连续连接而不是“每个发送消息一个连接”系统。

关于实施的想法或链接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T07:51:14.980

`handle`为每个客户端连接调用该方法，并在返回时关闭连接。使用`while`循环很好。当客户端关闭连接时退出循环。

示例（Python 3 语法）：

```
class EchoHandler(socketserver.StreamRequestHandler):

    def setup(self):
        print('{}:{} connected'.format(*self.client_address))

    def handle(self):
        while True:
            data = self.request.recv(1024)
            if not data: break
            self.request.sendall(data)

    def finish(self):
        print('{}:{} disconnected'.format(*self.client_address)) 
```

# javascript - 如何制作一个从 AJAX 返回数据的 JavaScript 函数？

> ID：14417084
> 
> 赞同：1
> 
> 时间：2013-01-19T17:51:00.840
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何从函数的 AJAX 调用返回响应？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function)

我曾尝试在 Google Chrome 的开发者控制台中进行调试，但无论如何我都无法得到我想要的结果。我想创建一个 javascript 函数，它将通过 AJAX 从外部文件返回一个值。我试过这个脚本：

```
var site = {
    token: function(){
        $.get('auth.php',function(data){
            return data;
        });
    }
}; 
```

...当我调用该`site.token()`函数时，它应该从**auth.php**返回获取的内容。但事实并非如此。它总是`undefined`。我也试过这个：

```
var site = {
    token: function(){
        var token = null;
        $.get('auth.php',function(data){
            token = data;
        });
        return token;
    }
}; 
```

但它仍然是一样的。我还通过这样做找到了解决方法：

```
var token = $.get('auth.php',function(data){
    return data;
});
token.responseText; 
```

使用这些代码，我现在可以获得预期的结果。但是当我把它放在一个函数中时：

```
var site = {
    token: function(){
        var token = $.get('auth.php',function(data){
            return data;
        });
        return token.responseText;
    }
}; 
```

...它再次失败。

> *PS：我不知道也许我只是在编程中真的很紧张，为什么我不能把它做好。-_-”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:02:16.390

`$.post()`是 的简写`$.ajax()`，两者都是异步的（除非你做了非常糟糕的事情）。您不想在对 php 页面的请求期间冻结浏览器的 GUI 线程。因此`site.token()`无法用数据回复。

但是，`$.ajax()`确实返回了一个承诺（请参阅[http://www.erichynds.com/jquery/using-deferreds-in-jquery/](http://www.erichynds.com/jquery/using-deferreds-in-jquery/)以及[jquery 的 promise 方法如何真正起作用？](https://stackoverflow.com/questions/6080050/how-does-jquerys-promise-method-really-work)）。本质上，它说的是“我保证我完成后会给你回电话。” 因此，您可以像这样构造类：

```
var site = {
    token: function(){
        var promise = $.get('auth.php',function(data){
            return data;
        });
        return promise;
    }
}; 
```

并这样称呼它：

```
var promise = site.token();
promise.done(function (data) {
    alert('got the data');
    console.dir(data);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T17:54:47.547

如果这是可能的，那么函数的想法可以被丢弃，语法可以是：

```
var data = $.post("url"); 
```

然而这是不可能的，因为 AJAX 是异步的。在收到响应之前需要一段时间。在这种情况下，将调用您的函数。这就是传递函数的想法。

没有办法使这个同步以便使用`return`. 你可以使用`$.ajax`with`async: false`但它会被弃用。您可以做的最好的事情是`return $.post(...)`然后使用`.done(...)`结果来使用响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T17:59:00.563

Ajax 调用是异步的，因此您可以在获取数据之前使用它。考虑使用延迟对象。 [http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

# php - 在 CodeIgniter 中编辑表单

> ID：14417085
> 
> 赞同：0
> 
> 时间：2013-01-19T17:51:05.727
> 
> 标签：php, jquery, html, css, codeigniter

我是新手 `CodeIgniter`。我有一个`table`数据显示的地方。每个`row`都有一个`edit button`. 单击时`edit button`，`modal popup`将弹出一个，然后您可以对其进行编辑。我的问题是，我不知道如何附加我`controller`背后的链接，`image`以便我可以`row id` 将`controller`. 我将我的图像（编辑）链接到`modalpopup`..`href`所以我怎样才能同时执行这两个操作..

这是我在`form view`. 如您所见，在`href`标签中，我链接到显示`myModal`的位置`edit form`，但我希望它`edit form`显示在`row`. 所以我必须将它链接到`controller`，我不知道该怎么做。

有没有办法将链接附加到图像或有另一种方式？

```
 <a data-toggle="modal" href="#myModal">  
  <img src="images/32/edit.png" alt="Edit"></a></td>

     <div class="modal hide" id="myModal">
      //here all the form fields are displaying 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:39:50.173

按照以下步骤创建这样的链接

```
<a data-toggle="modal" href="<?php echo site_url('controllername/methodname/'.$id);?>">  
  <img src="images/32/edit.png" alt="Edit">
</a> 
```

现在看到控制器类的方法将在点击时被调用。id 应该通过循环提供。

控制器方法

```
function methodname(){
    $id = $this->uri->segment(3);
    $this->load->model('modelname');
    $data['result'] = $this->modelname->getResord($id);
    $this->load->view('editform',$data);
} 
```

并且模型方法应该以 where 条件获取数据

```
function modelmethod($id)
{
    return $this->db->where('id',$id)->get('tablename')->row();
} 
```

# c# - 弹出窗口的 10% 保证金

> ID：14417091
> 
> 赞同：-6
> 
> 时间：2013-01-19T17:51:46.367
> 
> 标签：c#, html, ajax, ajaxcontroltoolkit, modalpopupextender

我怎样才能让这个模态弹出窗口在 x 和 y 方向上填充 80% 的屏幕。即每边10%的边距

**标记**

```
<!-- Add Files Modal Form -->
            <asp:HiddenField ID="AddFilesForModal" runat="server" />
            <ajaxToolkit:ModalPopupExtender runat="server" ID="AddFilesModal" BehaviorID="modalPopupExtenderAddFiles"
                TargetControlID="dummyButtonAddToPendingList" PopupDragHandleControlID="PanelAddFilesOuter" PopupControlID="PanelAddFilesOuter"
                OkControlID="dummyButtonAddToPendingList" BackgroundCssClass="ModalTreeviewBackgroundz" DropShadow="false"
                Drag="true">
            </ajaxToolkit:ModalPopupExtender>
            <ajaxToolkit:RoundedCornersExtender ID="RoundedCornersExtender4" runat="server" TargetControlID="PanelAddFilesInner">
            </ajaxToolkit:RoundedCornersExtender>
            <asp:Panel ID="PanelAddFilesOuter" runat="server" BackColor="Transparent" Style="display: none;">
                <asp:Panel ID="PanelAddFilesInner" runat="server" BackColor="White"  >
                 <ContentTemplate>
                    <div id="AddFilesContainer">
                        <br />
                        <div style="max-height:800px;overflow:auto;">
                                    <asp:TreeView ID="TreeViewAddItems" runat="server" BorderStyle="Solid" ShowCheckBoxes="Leaf"
                                        Width="99%" ImageSet="XPFileExplorer" NodeIndent="15" PathSeparator="\" ShowExpandCollapse="true"
                                        EnableClientScript="true" OnTreeNodeCheckChanged="OnTreeNodeCheckChanged" OnAdaptedTreeNodeCheckChanged="OnTreeNodeCheckChanged" ShowLines="True">
                                        <HoverNodeStyle Font-Underline="True" ForeColor="#6666AA" />
                                        <NodeStyle Font-Names="Tahoma" Font-Size="8pt" ForeColor="Black" HorizontalPadding="2px"
                                            NodeSpacing="0px" VerticalPadding="2px" />
                                        <ParentNodeStyle Font-Bold="False" />
                                        <SelectedNodeStyle BackColor="#B5B5B5" Font-Underline="False" HorizontalPadding="0px"
                                            VerticalPadding="0px" />
                                    </asp:TreeView>
                                    </div>
                        <br />
                        <div class="base">
                        <asp:LinkButton ID="lnkAddToPendingList" runat="server" OnClick="BtnAddToPendingList_Click" BorderStyle="Solid" BackColor="#CCCCCC">Add selected items to list</asp:LinkButton>
                        <asp:Button CssClass="Button" ID="dummyButtonAddToPendingList" runat="server" Style="display: none;" />
                        <asp:Button CssClass="Button" ID="CancelAddFiles" runat="server" Text="Cancel" OnClientClick="$find('modalPopupExtenderAddFiles').hide(); return false;" />
                        </div>
                        </div>
                        </ContentTemplate>
                </asp:Panel>
            </asp:Panel>
            <!-- End Add Files Modal Form --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:05:07.780

查看生成的 HTML，并使用 CSS 对其进行样式设置。CSS 可能看起来像这样：

```
.modal {
    display: block;
    width: 90%;
    height: 90%;
    margin: auto;
} 
```

# java - 如何将枚举类型添加到具有普通实例变量的类中？

> ID：14417096
> 
> 赞同：0
> 
> 时间：2013-01-19T17:52:29.000
> 
> 标签：java, enums

```
public class Car
{

    public enum User { "user", "computer", "na" };

    private char car;
    private final User user;
    private boolean call;

    public Car(char object, User user, boolean call)
    {
        this.car = car;
        this.user = user;
        this.call = call;
    }

        public User getUser()
        {
        return user;
        }

    public void setUser(User user)
    {
        this.user = user;
    }

} 
```

当我尝试编译时，我得到以下信息：

错误：预期

错误：',', '}' 或 ';' 预期的

错误：“}”预期

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T17:54:00.673

不要使用引号：

```
public enum User { user, computer, na }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T17:56:25.767

你可以使用：

```
private enum User { USER, COMPUTER, NA } 
```

此外，要允许分配，请`final`从 的声明中删除关键字`user`：

```
private User user; 
```

要创建一个新的`Car`，您可以使用：

```
new Car('A', User.COMPUTER, true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T17:55:04.097

问题是双引号：

```
public enum User { "user", "computer", "na" }; 
```

删除它们：

```
public enum User { user, computer, na }; 
```

# macos - Mac OS X 10.8 添加启动命令

> ID：14417103
> 
> 赞同：0
> 
> 时间：2013-01-19T17:53:11.107
> 
> 标签：macos, osx-mountain-lion

如何添加多个终端命令以在每次启动 Mac OS X 10.8 时运行？

示例命令（启动 MySQL）：

“sudo /usr/local/zend/bin/zendctl.sh start-mysql”

有什么工具可以简化这些任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:57:14.360

通常，这将使用[launchd](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLaunchdJobs.html)守护程序来完成。有一个 gui 界面可以帮助您在此处进行设置，称为[lingon](http://sourceforge.net/projects/lingon/files/)

# java - Android中未解决的NoClassDefFoundError

> ID：14417106
> 
> 赞同：2
> 
> 时间：2013-01-19T17:53:30.697
> 
> 标签：java, android, noclassdeffounderror

我已经花了一个多星期的时间来研究这个问题，并且我已经尝试了几乎所有可以在 SO 和谷歌上找到的解决方案，但这对我来说仍然没有解决。

我有一个外部库 gdx-audio.jar，我通过将它放在我的 libs 文件夹中并将其添加到构建路径中来导入它。

我正在使用最新版本的 Eclipse Juno。

所以我的设置如下所示：

![蚀](../Images/d4ed06b524b8d52062b36060b45ac04b.png)

请注意带有我的 jar 的 libs 文件夹，以及它显示在 Android Dependencies 和 Referenced 库中。此外，在构建路径窗口的顺序和导出选项卡中检查了所有内容，这对某些人来说是一种解决方案，但对我来说不是。

带有异常的错误消息也会显示在 logcat 窗口中。（试图将所有内容都放在一个屏幕截图中）。

我有点不确定订单和出口的正确顺序，但我尝试了无数次订购都无济于事。我已阅读其他人的帖子以确保 gen 在 src 之前，并且我已将 jar 文件设置为首先制作。

任何人都可以提供的帮助将不胜感激。

我的清单文件中有什么特别需要的吗？还是我只是错过了一些小东西？

编辑：这是 LogCat 输出：

```
01-23 14:37:20.917: I/dalvikvm(6699): Failed resolving Lcom/badlogic/gdx/audio/analysis/KissFFT; interface 79 'Lcom/badlogic/gdx/utils/Disposable;'
01-23 14:37:20.917: W/dalvikvm(6699): Link of class 'Lcom/badlogic/gdx/audio/analysis/KissFFT;' failed
01-23 14:37:20.917: E/dalvikvm(6699): Could not find class 'com.badlogic.gdx.audio.analysis.KissFFT', referenced from method ubicomp.signalproccesor.SignalProcessorDemo.<init>
01-23 14:37:20.917: W/dalvikvm(6699): VFY: unable to resolve new-instance 65 (Lcom/badlogic/gdx/audio/analysis/KissFFT;) in Lubicomp/signalproccesor/SignalProcessorDemo;
01-23 14:37:20.917: D/dalvikvm(6699): VFY: replacing opcode 0x22 at 0x0009
01-23 14:37:20.917: I/dalvikvm(6699): Failed resolving Lcom/badlogic/gdx/audio/analysis/KissFFT; interface 79 'Lcom/badlogic/gdx/utils/Disposable;'
01-23 14:37:20.917: W/dalvikvm(6699): Link of class 'Lcom/badlogic/gdx/audio/analysis/KissFFT;' failed
01-23 14:37:20.917: D/dalvikvm(6699): DexOpt: unable to opt direct call 0x0186 at 0x0d in Lubicomp/signalproccesor/SignalProcessorDemo;.<init>
01-23 14:37:20.917: D/AndroidRuntime(6699): Shutting down VM
01-23 14:37:20.917: W/dalvikvm(6699): threadid=1: thread exiting with uncaught exception (group=0x40efd300)
01-23 14:37:20.917: E/AndroidRuntime(6699): FATAL EXCEPTION: main
01-23 14:37:20.917: E/AndroidRuntime(6699): java.lang.NoClassDefFoundError: com.badlogic.gdx.audio.analysis.KissFFT
01-23 14:37:20.917: E/AndroidRuntime(6699):     at ubicomp.signalproccesor.SignalProcessorDemo.<init>(SignalProcessorDemo.java:41)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at java.lang.Class.newInstanceImpl(Native Method)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at java.lang.Class.newInstance(Class.java:1319)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at android.os.Looper.loop(Looper.java:137)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at java.lang.reflect.Method.invokeNative(Native Method)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at java.lang.reflect.Method.invoke(Method.java:511)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-23 14:37:20.917: E/AndroidRuntime(6699):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T03:44:58.670

只是为了验证，我使用您尝试使用的库文件加载了一个默认项目并验证了相同的问题。这不是您的 IDE 配置；JAR库`gdx-audio`并不意味着独立，它是更大`gdx`框架中的扩展，并且依赖于其他 JAR 中的其他类作为该库包的一部分。如果没有`KissFFT`（引发错误的类）导入的类，也无法加载该类。

诚然，这个错误有点误导，它应该告诉你它找不到的类是`com.badlogic.gdx.utils.Disposable`and `com.badlogic.gdx.utils.SharedLibraryLoader`。事实证明，该`com.badlogic.gdx.utils`包位于文件内，因此除了使用该库扩展名之外`gdx.jar`，您还必须包括在内。`gdx.jar``gdx-audio.jar`

作为参考，您的 libs 目录（至少）需要如下所示： ![在此处输入图像描述](../Images/703b8908c5bfb3b9e281d3bd4b9addef.png)

如果您还没有它，这里是该框架官方网站的链接。我不能肯定地说，但一些必需的依赖项有望在他们的文档中的某个地方：http: [//libgdx.badlogicgames.com/](http://libgdx.badlogicgames.com/)

**旁注：**您永远不需要使用 Eclipse 手动将 JAR 文件添加到 Android 项目的构建路径中。ADT 负责从您的`libs/`目录中获取所有内容并将其构建为依赖项。添加它所做的只是创建重复，最终会导致更多问题，如果您曾经使用除 Eclipse 内部的构建系统之外的构建系统，这些问题将同样难以跟踪。

这就是为什么您必须在项目列表中设置依赖项的原因。“引用库”是由 Eclipse 创建的，不应该存在。“Android Dependencies”是 ADT 创建的，应该是唯一列出的库集（除了“Android xx”，它是您的框架 SDK）。

希望有帮助！

# c# - 表之间的关系

> ID：14417108
> 
> 赞同：3
> 
> 时间：2013-01-19T17:53:38.080
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, ef-code-first

我使用`sqlmembership provider`并创建了一些表。我需要它的`user`桌子。

我的应用程序有三种类型的用户`teachers`：`students`和`other users`。所以我想了三张桌子给他们。

他们每个人都有一个`username`由会员提供者注册并保存在自己的表中。

现在我不知道如何使用实体框架来建立保存在成员资格表中的用户名之间的关系`teachers`或表。`students`

我想我可以在成员提供者创建的表和我的表之间添加一对一的关系，`users`然后逆向工程创建表以首先编码，但似乎不允许更改这些表。

**有人可以告诉我如何将教师或学生与他们的用户名建立关系*（我的意思是他们的会员信息）*吗？**

**更多详细信息：这里是代码优先表**

```
public class aspnet_Users
{
    public aspnet_Users()
    {
        this.aspnet_PersonalizationPerUser = new List<aspnet_PersonalizationPerUser>();
        this.aspnet_Roles = new List<aspnet_Roles>();
    }

    public System.Guid ApplicationId { get; set; }
    public System.Guid UserId { get; set; }
    public string UserName { get; set; }
    public string LoweredUserName { get; set; }
    public string MobileAlias { get; set; }
    public bool IsAnonymous { get; set; }
    public System.DateTime LastActivityDate { get; set; }
    public virtual aspnet_Applications aspnet_Applications { get; set; }
    public virtual aspnet_Membership aspnet_Membership { get; set; }
    public virtual ICollection<aspnet_PersonalizationPerUser> aspnet_PersonalizationPerUser { get; set; }
    public virtual aspnet_Profile aspnet_Profile { get; set; }
    public virtual ICollection<aspnet_Roles> aspnet_Roles { get; set; }
}

public class Techer
{
    [Key]
    public int TeacherId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string NationalNumber { get; set; }
    public string PhoneNumber { get; set; }
    public string Description { get; set; }
    public int OfficeId { get; set; }
    public virtual Office Office { get; set; }
}

public class Student
{
    public int StudentId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int OfficeId { get; set; }
    public virtual Office Office { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:18:56.453

我遇到过类似的情况，我最终做的是从我的用户配置文件表到成员资格表创建一个外键。因此，例如，Teacher 表将有一个名为 MembershipId 的列，并且它将外键到成员资格表中的 Id 列。然后，在我的 AccountController 的注册操作中，我有这样的事情：

```
if (db.Memberships.Any(x => x.UserName == model.UserName) 
{
    // handle error here
    // return view with error message "user name already in use"
}

var token = WebSecurity.CreateUserAndAccount(model.UserName, model.Password, null, true);
var membership = db.Memberships.SingleOrDefault(x => x.UserName == model.UserName);
if (membership != null) 
{
    var newProfile = new Teacher
    {
        Membership = membership
        // add other properties here if required
    }
    db.Teachers.Add(newProfile);
    db.SaveChanges();
} 
```

*此代码未经测试，因为我目前没有可用的 VS，但应该足以让您走上正轨。

# javascript - 使用 javascript 添加更多下拉框菜单

> ID：14417109
> 
> 赞同：0
> 
> 时间：2013-01-19T17:53:46.923
> 
> 标签：javascript, drop-down-menu

每次单击“添加”按钮时，我都需要在 html 上添加更多下拉框的副本，而我只能这样做 5 次。

* * *

```
function AddVCD()
{
    var cdcounter = 0;
    var opt = document.createElement('option');

    document.getElementById("vcdchoice").innerhtml("Pitch Perfect");
    document.getElementById("vcdchoice").innerhtml("500 Days of Summer");
    document.getElementById("vcdchoice").innerhtml("The Notebook");
    document.getElementById("vcdchoice").innerhtml("The Vow");
    document.getElementById("vcdchoice").innerhtml("Lincoln");

    cdcounter++;
} 
```

这是我在单击按钮时复制下拉框的代码

* * *

```
<select id = "vcdchoice">
      <option value="movie1">Movie1</option>
      <option value="movie2">Movie2</option>
      <option value="movie3">Movie3</option>
      <option value="movie4">Movie4</option>
      <option value="movie5">Movie5 </option>
    </select> 
```

这是我的按钮的代码。

* * *

```
 <button type = "button" id = "addVCD" onclick="AddVCD()"> ADD ANOTHER VCD     </button> 
```

我认为我的 javascript 有问题。是的，当然。

# php - PHP 非阻塞套接字

> ID：14417110
> 
> 赞同：1
> 
> 时间：2013-01-19T17:53:50.670
> 
> 标签：php, sockets, nonblocking

在 PHP 中使用非阻塞套接字时如何等待数据？

一切正常，直到我需要从套接字读取数据，这就是我需要正确等待数据的地方。我不确定如何检查是否有要读取的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T18:08:05.760

如果 PHP 有非阻塞套接字，它应该有 select。

[socket_select](http://php.net/manual/en/function.socket-select.php)看起来是正确的使用方法。

# command - 三星 Galaxy S 和超级终端

> ID：14417117
> 
> 赞同：1
> 
> 时间：2013-01-19T17:54:45.250
> 
> 标签：command, galaxy, at-command, hyperterminal

通过 USB 将三星 Galaxy S 连接到超级终端时，我无法检索任何消息或发送消息。命令“AT”、“AT+CMGF=1”有效，“AT+CMPI=?” 返回可用的不同记忆。但是当我尝试执行以下命令时： AT+CMPI="SM" （或任何其他内存）我得到一个错误。此外，当我尝试 AT+CMGS="..." 时，它也会出错。会是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:40:24.090

好吧，我降落在这里..如果这对未来的谷歌人有帮助，还没有答案

[http://www.developershome.com/sms/howToSendSMSFromPC.asp](http://www.developershome.com/sms/howToSendSMSFromPC.asp)是一个很好的参考。

```
AT
OK
AT+CMGF=1
OK
AT+CMGW="+21291234567"
> A simple demo of SMS text messaging.
+CMGW: 1

OK
AT+CMSS=1
+CMSS: 20

OK 
```

在三星s3上测试...

# units-of-measurement - 同情单位转换

> ID：14417120
> 
> 赞同：0
> 
> 时间：2013-01-19T17:55:20.883
> 
> 标签：units-of-measurement, sympy

我对 sympy 中的单位有一点问题。如果我执行以下表达式：

```
import sympy.physics.units as u
print u.kg + u.kg 
```

我得到结果：

```
2*kg 
```

这不是我想要的，我只想拥有公斤。有什么问题？

//edit 我看到有人在[https://github.com/sympy/sympy/pull/1389](https://github.com/sympy/sympy/pull/1389)中解决这个问题，有人知道更多吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T19:35:35.837

一公斤加一公斤等于两公斤。我不明白你为什么又想要公斤。

# asp.net-mvc-3 - 为什么 mvc4 中的下拉列表会在 mvc3 运行良好的情况下抛出错误

> ID：14417124
> 
> 赞同：0
> 
> 时间：2013-01-19T17:56:00.300
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, html-select

你能告诉我MVC4有不同的下拉列表然后mvc3吗？

**我在 mvc4 和 mvc 3 中做了同样的测试项目：**

在事务控制器中

```
public ActionResult Create()
{           
   var listme=db.Transacts.ToList();
   ViewBag.TransactId = new SelectList(listme, "TransactId", "TransactionName");
   return View();
} 
```

**在创建视图中**

```
@model HomeAccounting.Domain.Transaction

...some code

@using (Html.BeginForm())

...some code

@Html.DropDownList("TransactId",String.Empty)

...some code

< input type="submit" value="Create" /> 
```

**提交表单时，结果** 下拉列表在 mvc4 中提供错误。但是MVC3完美运行是什么原因呢？如果 mvc4 和 mvc3 助手不同，如何找出差异？F12？但是几乎相同..我每次都必须调查这种差异，不舒服吗？

****错误*** *没有类型为“IEnumerable< SelectListItem >”的 ViewData 项，其键为 «TransactId »* *

***信息**

公共类事务

```
{

    public virtual int Id { get; set; }

    public int TransactId { get; set; }

    public virtual Transact Transact { get; set; }

} 
```

公共类交易

```
{

    [Key]

    public virtual int TransactId { get; set; }

    public virtual string TransactionName { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:35:52.647

尝试使用`@Html.DropDownListFor(model => model.Field)`然后传入您的模型而不是字符串 id。

# vb.net - 在 VB.net（Windows 应用商店）中将图像绑定到 ListView

> ID：14417136
> 
> 赞同：0
> 
> 时间：2013-01-19T17:57:35.517
> 
> 标签：vb.net, listview, windows-8, windows-runtime, windows-store-apps

我在 VB.net 中将图像绑定到 ListView 时遇到问题。我正在构建一个将调整图像大小、转换和压缩图像的应用程序，但我希望所选图像与图像名称一起显示在 ListView 中。

这是 ListView 的 XAML 代码：

```
<ListView x:Name="ListView" ItemsSource="{Binding Image}" HorizontalAlignment="Left" Height="481" Margin="10,275,0,0" VerticalAlignment="Top" Width="1069" BorderBrush="#FF003859" Foreground="White" Background="#42FFFFFF" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" BorderThickness="6,0,6,6" FontSize="16" SelectionMode="Multiple">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="vertical">
                        <Grid Height="160" Margin="6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Border Width="160" Height="160">
                                <Image HorizontalAlignment="Center" VerticalAlignment="Center" Source="{Binding ImageID}" Stretch="Uniform" />
                            </Border>
                            <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="10,0,0,0">
                                <TextBlock Text="{Binding Title}" Style="{StaticResource TitleTextStyle}" TextWrapping="NoWrap"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView> 
```

这是 Image 类的代码：

```
Imports System.Collections.ObjectModel

Public Class Image</code>

    Private _Title As String
    Private _ImageID As BitmapImage

    Public ReadOnly Property Title() As String
        Get
            Return _Title
        End Get
    End Property
    Public ReadOnly Property Image() As BitmapImage
        Get
            Return _ImageID
        End Get
    End Property

    Public Sub New(ByVal Title As String, ByVal ImageID As BitmapImage)
        _Title = Title
        _ImageID = ImageID
    End Sub

End Class 
```

这是在 ListView 中添加图像的按钮的代码：

```
Private Async Sub AddImage_Click(sender As Object, e As RoutedEventArgs) Handles AddImage.Click

        Dim picker As New FileOpenPicker()

        picker.SuggestedStartLocation = PickerLocationId.Desktop
        picker.ViewMode = PickerViewMode.Thumbnail
        picker.FileTypeFilter.Add(".jpg")
        picker.FileTypeFilter.Add(".jpeg")
        picker.FileTypeFilter.Add(".bmp")
        picker.FileTypeFilter.Add(".gif")
        picker.FileTypeFilter.Add(".png")
        picker.FileTypeFilter.Add(".tiff")
        picker.FileTypeFilter.Add(".tga")

        Dim files As IReadOnlyList(Of StorageFile) = Await picker.PickMultipleFilesAsync

        Dim imagearray(10000000) As BitmapImage
        Dim i = 0
        If files.Count > 0 Then
            For Each file In files
                imagearray(i) = New BitmapImage(New Uri(file.Path))
                i += 1
            Next
            Dim j = 0
            For Each file In files
                ListView.Items.Add(New Image(file.Name, imagearray(j)))
                j += 1
            Next
        End If

    End Sub 
```

这个你能帮我吗。

编辑：

列表视图 XAML 代码：

```
<ListView x:Name="ListView" HorizontalAlignment="Left" Height="481" Margin="10,275,0,0" VerticalAlignment="Top" Width="1069" BorderBrush="#FF003859" Foreground="White" Background="#42FFFFFF" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" BorderThickness="6,0,6,6" FontSize="16" SelectionMode="Multiple">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="vertical">
                        <Grid Height="160" Margin="6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Border Width="160" Height="160">
                                <Image HorizontalAlignment="Center" VerticalAlignment="Center" Source="{Binding ImageID}" Stretch="Uniform" />
                            </Border>
                            <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="10,0,0,0">
                                <TextBlock Text="{Binding Title}" Style="{StaticResource TitleTextStyle}" TextWrapping="NoWrap"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView> 
```

图像类：

```
Imports System.Collections.ObjectModel

Public Class Image

    Private _Title As String
    Private _Image As BitmapImage

    Public ReadOnly Property Title() As String
        Get
            Return _Title
        End Get
    End Property
    Public ReadOnly Property ImageID() As BitmapImage
        Get
            Return _Image
        End Get
    End Property

    Public Sub New(ByVal Title As String, ByVal ImageID As BitmapImage)
        _Title = Title
        _Image = ImageID
    End Sub

End Class 
```

按钮：

```
Dim ImageCollection As New Collection(Of Image)

     Private Async Sub AddImage_Click(sender As Object, e As RoutedEventArgs) Handles AddImage.Click

            Dim picker As New FileOpenPicker()

            picker.SuggestedStartLocation = PickerLocationId.Desktop
            picker.ViewMode = PickerViewMode.Thumbnail
            picker.FileTypeFilter.Add(".jpg")
            picker.FileTypeFilter.Add(".jpeg")
            picker.FileTypeFilter.Add(".bmp")
            picker.FileTypeFilter.Add(".gif")
            picker.FileTypeFilter.Add(".png")
            picker.FileTypeFilter.Add(".tiff")
            picker.FileTypeFilter.Add(".tga")

            Dim files As IReadOnlyList(Of StorageFile) = Await picker.PickMultipleFilesAsync

            Dim imagearray(10000000) As BitmapImage
            Dim i = 0
            If files.Count > 0 Then
                For Each file In files
                    imagearray(i) = New BitmapImage(New Uri(file.Path))
                    i += 1
                Next
                Dim j = 0
                For Each file In files
                    ImageCollection.Add(New Image(file.Name, imagearray(j)))
                    j += 1
                Next
                For Each file In files
                    ListView.ItemsSource = ImageCollection
                Next

            End If

        End Sub 
```

这是我现在拥有的代码，但图像仍未显示。怎么了？

**这是新的编辑：**

**列表视图 XAML 代码：**

```
<ListView x:Name="ListView" DataContext="{Binding Image}" HorizontalAlignment="Left" Height="481" Margin="10,275,0,0" VerticalAlignment="Top" Width="1069" BorderBrush="#FF003859" Foreground="White" Background="#42FFFFFF" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" BorderThickness="6,0,6,6" FontSize="16" SelectionMode="Multiple">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="vertical">
                        <Grid Height="160" Margin="6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Border Width="160" Height="160">
                                <Image HorizontalAlignment="Center" VerticalAlignment="Center" Source="{Binding ImageProperty}" Stretch="Uniform" />
                            </Border>
                            <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="10,0,0,0">
                                <TextBlock Text="{Binding TitleProperty}" Style="{StaticResource TitleTextStyle}" TextWrapping="NoWrap"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView> 
```

**图像类：**

```
Imports System.Collections.ObjectModel

Public Class Image

    Implements INotifyPropertyChanged

    Private ImageX As BitmapImage
    Private TitleX As String

    Public ReadOnly Property ImageProperty() As BitmapImage
        Get
            Return ImageX
        End Get
    End Property

    Public ReadOnly Property TitleProperty() As String
        Get
            Return TitleX
        End Get
    End Property

    Public Sub New(ByVal ImageTitle As String, ByVal ImageID As BitmapImage)
        TitleX = ImageTitle
        ImageX = ImageID
    End Sub

    Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged

    Public Sub NotifyPropertyChanged(ByVal propertyName As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(propertyName))
    End Sub

End Class 
```

**以及带有 ImageCollection 类的按钮：**

```
 Dim ImageCollection As New ImageCollectionClass

    Private Async Sub AddImage_Click(sender As Object, e As RoutedEventArgs) Handles AddImage.Click

        Dim picker As New FileOpenPicker()

        picker.SuggestedStartLocation = PickerLocationId.Desktop
        picker.ViewMode = PickerViewMode.Thumbnail
        picker.FileTypeFilter.Add(".jpg")
        picker.FileTypeFilter.Add(".jpeg")
        picker.FileTypeFilter.Add(".bmp")
        picker.FileTypeFilter.Add(".gif")
        picker.FileTypeFilter.Add(".png")
        picker.FileTypeFilter.Add(".tiff")
        picker.FileTypeFilter.Add(".tga")

        Dim files As IReadOnlyList(Of StorageFile) = Await picker.PickMultipleFilesAsync

        Dim imagearray(10000000) As BitmapImage
        Dim i = 0
        If files.Count > 0 Then
            For Each file In files
                imagearray(i) = New BitmapImage(New Uri(file.Path))
                i += 1
            Next
            Dim j = 0
            For Each file In files
                ImageCollection.AddImage(file.Name, imagearray(j))
                j += 1
            Next
            For Each file In files
                ListView.ItemsSource = ImageCollection
            Next

        End If

    End Sub

Public Class ImageCollectionClass

    Public ImageCollectionClass As New ObservableCollection(Of Image)

    Public Sub AddImage(ByVal ImageTitleInClass As String, ByVal ImageIDInClass As BitmapImage)
        ImageCollectionClass.Add(New Image(ImageTitleInClass, ImageIDInClass))
    End Sub

End Class 
```

**但它不起作用。请告诉我现在怎么了！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:02:57.440

您的原始循环相当复杂（认为这不是程序的直接原因）。所有这些代码：

```
 Dim imagearray(10000000) As BitmapImage
    Dim i = 0
    If files.Count > 0 Then
        For Each file In files
            imagearray(i) = New BitmapImage(New Uri(file.Path))
            i += 1
        Next
        Dim j = 0
        For Each file In files
            ImageCollection.AddImage(file.Name, imagearray(j))
            j += 1
        Next
        For Each file In files
            ListView.ItemsSource = ImageCollection
        Next
    End If 
```

可以折叠成：

```
 For Each file In files
        ImageCollection.AddImage(file.Name, New BitmapImage(New Uri(file.Path)))
    Next
    ListView.ItemsSource = ImageCollection.ImageCollectionClass 
```

注意你需要`ImageCollectionClass`作为你的`ItemsSource`.

从那里，您可以合并[XAML 图像示例](http://code.msdn.microsoft.com/windowsapps/0f5d56ae-5e57-48e1-9cd9-993115b027b9)的方案 2 中的代码并修改以通过[SetSourceAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.bitmapsource.setsourceasync.aspx)获取图像：

```
 Dim fileStream As IRandomAccessStream
    For Each file In files
        fileStream = Await file.OpenAsync(Windows.Storage.FileAccessMode.Read)

        Dim bitmapImage As New BitmapImage()
        Await bitmapImage.SetSourceAsync(fileStream)

        ImageCollection.AddImage(file.Name, bitmapImage)
    Next
    ListView.ItemsSource = ImageCollection.ImageCollectionClass 
```

# actionscript-3 - 尝试标题...根据鼠标的 X/Y 轴生成影片剪辑并更改每个 MC 副本的帧位置

> ID：14417143
> 
> 赞同：0
> 
> 时间：2013-01-19T17:58:17.180
> 
> 标签：actionscript-3

这很难解释。

我的目标是每次单击时根据鼠标的 X/Y 轴放置绵羊（符号）...。我希望它生成绵羊的副本但我也希望每个副本都是不同的图像..（每次单击鼠标时，它都会更改绵羊符号内的图像（放置在不同的框架上）。

如果有人可以提供帮助，我将非常感激！

这是代码：

```
stage.addEventListener (MouseEvent.CLICK, makeABox);

var i:Number = 1;

function makeABox(e:Event):void {

    var newSheep:myMC = new myMC();

    addChild(newSheep);

    newSheep.x = stage.mouseX;

    newSheep.y = stage.mouseY;

    i++;

}

var numPressed:Number = 0;
stage.addEventListener(MouseEvent.CLICK, countUp);

function countUp(evt:MouseEvent):void {
numPressed++;

if (numPressed == 1) {
    sheep.gotoAndPlay(1);
}

else if (numPressed == 2) {
    sheep.gotoAndPlay(2);
}

else if (numPressed == 3) {
    sheep.gotoAndPlay(3);
}

else if (numPressed == 4) {
    sheep.gotoAndPlay(4);
}

else if (numPressed == 5) {
    sheep.gotoAndPlay(5);
}

else if (numPressed == 6) {
    sheep.gotoAndPlay(6);
}

else if (numPressed == 7) {
    sheep.gotoAndPlay(7);
}

if(numPressed >= 7) numPressed = 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:07:09.910

将您在问题中发布的所有代码替换为：

```
stage.addEventListener (MouseEvent.CLICK, addSheep);

var sheepCounter:int = 1;

function addSheep(event:MouseEvent):void {
    //create new sheep
    var newSheep:myMC = new myMC();
    //position it at mouse click
    newSheep.x = stage.mouseX;
    newSheep.y = stage.mouseY;
    //set frame of sheep to display
    newSheep.gotoAndStop(sheepCounter);
    //add sheep to display list
    addChild(newSheep);
    //update counter
    sheepCounter++;
    if (sheepCounter==8)
    {
        sheepCounter = 1;
    }
} 
```

# iphone - 通过蓝牙同步音频流

> ID：14417144
> 
> 赞同：0
> 
> 时间：2013-01-19T17:58:34.993
> 
> 标签：iphone, ios, bluetooth, audio-streaming

我正在开发一个 iPhone 应用程序，该应用程序需要将音频文件流式传输到通过蓝牙连接的多个设备 (iPhone) 并以同步方式播放，即所有设备同时开始播放音频文件。我能够建立连接并流式传输音频数据包，甚至播放音频文件，但我面临的唯一问题是延迟。所有设备在不同的时间开始播放音频文件，我希望它们一起播放相同的音频包。有什么办法可以让他们同步播放音频文件？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-21T11:48:13.903

我记得浏览过蓝牙规范中的音频广播选项。不知道iphone是否支持..

# javascript - 我无法让我的 javascript 更改页面上的文本

> ID：14417148
> 
> 赞同：1
> 
> 时间：2013-01-19T17:58:50.527
> 
> 标签：javascript, html

Edit2：一位朋友告诉我，我忘了提到这个脚本将通过 Greasemonkey 加载

我对 Javascript 还很陌生，我正在尝试自学它。

我一直在尝试使用这行代码来更改页面上的文本：

```
document.getElementById("gamepage_header").innerHTML = '<h1>Test</h1>' 
```

而不是做我想做的事，它似乎只是坐在那里什么都不做。是的，我在很多地方都找过工作。

谢谢

编辑：这是我要编辑的页面。[http://www.kongregate.com/games/kChamp/shellshock-live](http://www.kongregate.com/games/kChamp/shellshock-live) 我真正的想法是在 HTML 中获取一个链接，然后将 gamepage_header 设置为链接，这样我就可以简单地右键单击并下载 .swf。

根据要求，这是我的整个“代码”，如果你可以这样称呼的话。

```
// ==UserScript==
// @name         SWFLinkage for KH
// @namespace   tag://kongregate
// @description SWF Link getter
// @version     1
// @grant           none
// @author          SimpleAOB
// @date            12.7.2012
// ==/UserScript==
document.onload = function(){
   document.getElementById("gamepage_header").innerHTML = '<h1>Test</h1>' 
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:07:11.333

Matt Ball 的评论显示您需要等到页面加载。

代码可能在`gamepage_header`加载之前运行。要解决此问题，请使用：

```
window.onload = function(){
    // Code goes here.
}; 
```

这会等到页面加载完毕，然后运行代码。不用担心语法；随着您在 JS 中获得更多技能，您将很快学会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:25:20.730

您必须确保页面在运行脚本之前已加载，因为您尝试在完全加载之前访问 DOM，无论您是在头部添加脚本还是在结束正文标记之前添加脚本由您决定，但在您之前添加关闭 body 标记将有一个微小的性能改进，只要它被包裹`window.onload = function(){};`，你就可以了。

## [http://jsfiddle.net/G58KY/](http://jsfiddle.net/G58KY/)

从您的编辑中，您想要[http://jsfiddle.net/YsnJv/](http://jsfiddle.net/YsnJv/)之类 的内容，指定您尝试访问的链接作为“链接”最有可能不起作用，除非链接具有相同的 id

```
window.onload = function () {
    var link = document.getElementById("link").href;
    document.getElementById("gamepage_header").innerHTML = '<h1><a href="'+link+'">Test</a></h1>';
} 
```

# node.js - 猫鼬嵌套文档

> ID：14417150
> 
> 赞同：2
> 
> 时间：2013-01-19T17:58:58.353
> 
> 标签：node.js, mongoose

我在猫鼬中设置了 2 个模式：

```
var Job = new mongoose.Schema({
    title: String,
    budget: Number
});

var JobModel = mongoose.model('Job', Job);

var Customer = new mongoose.Schema({
    name: String,
    jobs: [Job]
});

var CustomerModel = mongoose.model('Customer', Customer); 
```

Customer 模型有一系列工作模型。

我正在添加一个新工作，如下所示：

```
app.post('/api/jobs', function(req, res){

    var job = new JobModel({
        title: req.body.title,
        budget: req.body.budget
    });

    job.save(function(err){
        if(!err){
            CustomerModel.findById(req.body.customerId, function(err, customer){
                if(!err){
                    customer.jobs.push(job);
                    customer.save(function(err){
                        if(!err){
                            return console.log('saved job to customer');
                        }
                    });
                }
            });
            return console.log('created job');

        } else {
            return console.log(err);
        }
    });

    return res.send(job);
}); 
```

当我添加一份新工作并获得所有我认为是正确的客户时：

```
[{
    "__v": 1,
    "_id": "50f85695771aeeda08000001",
    "name": "Customer1",
    "jobs": [
      {
        "_id": "50fad6985edd968840000002",
        "budget": 100,
        "title": "job1"
      }
    ]
  }, ...] 
```

现在，如果我更新 job1 并获取所有工作，则工作 1 已更新（预算现在为 500）

```
[{
    "title": "job1",
    "budget": 500,
    "_id": "50fad6985edd968840000002",
    "__v": 0
  }, ...] 
```

但是客户作业数组中的 job1 保持不变。

```
 [{
        "__v": 1,
        "_id": "50f85695771aeeda08000001",
        "name": "Customer1",
        "jobs": [
          {
            "_id": "50fad6985edd968840000002",
            "budget": 100,
            "title": "job1"
          }
        ]
      }, ...] 
```

因此，我是否需要搜索 Customer1 的作业数组并找到 job1 作业并在每次更新或删除时更新它，还是我完全以错误的方式做整个嵌套？

我知道客户中的作业数组是一个对象数组，但我认为它们可能只是作业的参考副本而不是副本？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-19T20:51:48.180

如果您在这里使用嵌入的`Job`文档数组，它们是完全独立的副本，您可以让它们与单独的`jobs`集合保持同步。

另一种方法是让`jobs`字段包含一个引用`Customer`数组，然后根据需要使用 Mongoose 的[查询](http://mongoosejs.com/docs/populate.html)填充来按需填充它们。`ObjectId``'Job'`

```
jobs: [{type: Schema.Types.ObjectId, ref: 'Job'}] 
```

# android - Hashmaps 的 ArrayList 未在 Android 列表视图中显示

> ID：14417152
> 
> 赞同：0
> 
> 时间：2013-01-19T17:59:03.863
> 
> 标签：android, arraylist, hashmap, adapter

我正在尝试使用哈希图（字符串，整数）的数组列表填充列表视图。我没有收到任何错误，但是列表没有显示任何内容。我已经查看了与此类似的其他问题，但在这些情况下，他们的数组列表中没有任何数据。从 logcat 我可以看到列表存在，但视图未显示。知道如何解决这个问题吗？

代码 ：

```
public class JsonActivity extends ListActivity{

 private ProgressDialog progressDialog;

    // JSON Node names

    private static final String TAG_ID = "id";
    private static final String TAG_ARTISTNAME = "artistname";

 // chartItemList is the array list that holds the chart items 
    ArrayList<HashMap<String, Integer>> chartItemList = new ArrayList<HashMap<String, 
        Integer>>();
    JsonParser Parser = new JsonParser();
 // JSONArray
    JSONArray chartItems = null;

    /** Called when the activity is first created. */    
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.progressdialog);

        //url from where the JSON has to be retrieved
        String url = "http://web.com/test.php";

        //Check if the user has a connection

        ConnectivityManager cm = (ConnectivityManager) 
            getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo info = cm.getActiveNetworkInfo();
        if (info != null) {
            if (!info.isConnected()) {
                Toast.makeText(this, "Please check your connection and try again.", 
             Toast.LENGTH_SHORT).show();
            }

            //if positive, fetch the articles in background
            else new getChartItems().execute(url);
        }

        //else show toast
        else {
            Toast.makeText(this, "Please check your connection and try again.", 
            Toast.LENGTH_SHORT).show();
        }

    }

    class getChartItems extends AsyncTask<String, String, String> {

        // Shows a progress dialog while executing background task
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            progressDialog = new ProgressDialog(JsonActivity.this);
            progressDialog.setMessage("Loading chart...");
            progressDialog.setIndeterminate(false);
            progressDialog.setCancelable(false);
            progressDialog.show();
        }

        //Gets the json data for chart items data and presents it in a list view
        @Override
        protected String doInBackground(String... args) {
            String url = "http://web.com/test.php";
            String json = Parser.getJSONFromUrl(url);

            int id;

            String artistname;

            try{

            chartItems = new JSONArray(json);

            JSONObject json_data=null;

             for(int i=0;i<chartItems.length();i++){

                json_data = chartItems.getJSONObject(i);

                artistname=json_data.getString("artistname");
                id=json_data.getInt("id");

                 HashMap<String, Integer> hashMap = new HashMap<String, Integer>();
                 // adding each child node to HashMap key => value
                    hashMap.put(artistname,id);

                 // adding HashMap to ArrayList
                    chartItemList.add(hashMap);

             }

              ;
            }

            catch (JSONException e) {
                e.printStackTrace();
            }

            runOnUiThread(new Runnable() {
                public void run() {
                     System.out.println(chartItemList);
                  //updating list view with the parsed items

                    ListAdapter adapter = new SimpleAdapter(JsonActivity.this, chartItemList,
                            R.layout.listview,
                            new String[] {TAG_ARTISTNAME,TAG_ID }, new int[] 

                         {R.id.artistname,R.id.id });
                    setListAdapter(adapter);
                }
            });
            return null;
        }

        //Removes the progress dialog when the data has been fetched
        protected void onPostExecute(String args) {
            progressDialog.dismiss();
        }
    }

 } 
```

看法 ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal">  
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="#eee">
    <!-- Name Label -->
    <TextView
        android:id="@+id/id"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#ff0a0a"
        android:textSize="16sp"
        android:textStyle="bold"
        android:paddingTop="6dip"
        android:paddingBottom="2dip" />
    <TextView
        android:id="@+id/artistname"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#000"
        android:textSize="10sp"
        android:paddingTop="6dip"
        android:paddingBottom="2dip" />
  </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:55:46.333

Change this line :

```
// adding each child node to HashMap key => value
 hashMap.put(artistname,id); 
```

**with this,**

```
// adding each child node to HashMap key => value
 hashMap.put(TAG_ARTISTNAME, artistname);
 hashMap.put(TAG_ID, id); 
```

**HashMap** will store values in **key=>value** pairs only.

# php - PHP应用程序数据库逻辑有缺陷

> ID：14417154
> 
> 赞同：0
> 
> 时间：2013-01-19T17:59:19.147
> 
> 标签：php, mysql, logic

我的应用程序上有一个页面应该跟踪学生。一旦辅导员接受学生参加现实生活中的课程。这样做之后，学生的记录会被放入一个名为 support 的表中。我的问题是，一旦由于任何原因发生这种情况，如果辅导员需要将会话减半并将它们放回队列，如果另一位辅导员接受会话，那么我将拥有相同数据的两倍、三倍、四倍（等等）写到桌子上。例子 ：

![图片](../Images/f82f76096553fd1e80c5fd35f64ccf85.png)

有没有办法让我拥有它，所以如果会话已经存在于称为支持的数据库表中，那么当辅导员点击会话开始时，而不是插入它更新？所以一个例子是：

1.  工作人员约翰接受学生鲍比
2.  工作人员 john 有家庭紧急情况，需要结束课程，让学生回到队列中。
3.  工作人员 Sara 在 que 看到学生并接受了学生
4.  而不是会话开始按钮再次插入相同的会话ID（示例60）它只会更新已经完成的内容？

我想到的是设置一个完成学生按钮，它只会更新支持表，而不是只重写表。

这个解决方案看起来可行吗？- 如果不是，我该怎么办？对不起，我问这个问题的方式我试图尽可能具体。

编辑：更多示例的新图片：

![在此处输入图像描述](../Images/5b75e63cf8f0d464ebabe1f4c363a59f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:06:35.540

您可以更改表格以添加新属性 - “会话已完成”，默认情况下为 0，如果学生被接受且当前正在会话中，则为 1，如果已完成，则为 2。当一个学生被接受时，0 变为 1，如果学生完成，议员单击确定，会话完成可以更改为 2（每隔一段时间，所有 2 的学生都将被删除，以免过度填充表格）。如果发生紧急情况，议员点击取消，1 变回 0...

# r - 如何在 R 代码中优化功能

> ID：14417158
> 
> 赞同：1
> 
> 时间：2013-01-19T17:59:38.707
> 
> 标签：r, optimization

优化问题：

```
 x <- c(1,2,3,4,5,8,4,5)
    y <- c(-2,-5,-3,1,5,3,-17,1)
    alpha0 <- 0.01
    Q <- function(alpha, x, y){

        n <- length(x)
        mu <- sum(x)
        xi <- sum(y)
        L1 <- (alpha-1)*xi-alpha*mu
              -n*log(gamma(alpha))+n*alpha*log(alpha)
        return(-L1)
    }

      Qaf <- nlm(Q, alpha0, x, y, hessian=T)
      Qaf <- nlminb(alpha0, Q, x=x, y=y, hessian=T)
      Qaf <- optim(alpha0, Q, x=x, y=y, hessian=T, method="CG")
      Qaf <- optim(alpha0, Q, x=x, y=y, hessian=T, method="BFGS")
      Qaf <- optim(alpha0, Q, x=x, y=y, hessian=T, method="SANN")
      Qaf <- optim(alpha0, Q, x=x, y=y, hessian=T) 
```

每次优化都会给出不同的参数结果和不同数量的 NaN 警告（）。我可以重新参数化参数空间来解决这个问题吗？如何重新参数化参数空间并使用 R 代码解决这个问题？

# iphone - AVQueuePlayer 视频图像冻结，静音通知

> ID：14417161
> 
> 赞同：1
> 
> 时间：2013-01-19T18:00:15.070
> 
> 标签：iphone, ios, avqueueplayer

我正在从 s3 存储桶上的一组编码视频构建 AVQeueue 播放器，使用 AVPlayerActionAtItemEndAdvance 按顺序播放视频；

*   视频都以相同的分辨率和编解码器编码
*   他们都经过测试很好玩
*   在某些设备上，以下解决方案可以正常工作
*   在 IOS 5.x 和 6.x 上都注意到以下问题
*   一直在尝试检查主线程中的所有操作。（很可能是问题）

问题：在模拟器和某些设备上（在 4s 和 5 上注意到）在 x 数量的视频（x 有时不可预测，但通常是 3、4）之后，视频仅以声音播放并终止队列并且不会抛出“playerItemDidReachEnd “ 通知。应用程序不会崩溃或冻结。没有从“AVPlayerItemStatusFailed”或“AVPlayerItemStatusUnknown”收到错误

如果有人有这个问题的经验，请分享。

代码：-(void)addObservers {

```
dispatch_async(dispatch_get_main_queue(),
    ^{

for(int i = 0; i < [self.videodata count]; i++) { 
                [[NSNotificationCenter defaultCenter] addObserver:self
                                                         selector:@selector(playerItemDidReachEnd:)
                                                             name:AVPlayerItemDidPlayToEndTimeNotification
                                                           object:[self.videodata objectAtIndex:i]];

                [[self.videodata objectAtIndex:i] addObserver:self forKeyPath:@"status" options:NSKeyValueObservingOptionNew context:nil];
                [[self.videodata objectAtIndex:i] addObserver:self forKeyPath:@"playbackBufferEmpty" options:NSKeyValueObservingOptionNew context:nil]; 
                [[self.videodata objectAtIndex:i] addObserver:self forKeyPath:@"playbackLikelyToKeepUp" options:NSKeyValueObservingOptionNew context:nil];

            }
     }); 
```

}

```
 - (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *) change context:(void *)context
        {

            if ([object isKindOfClass:[AVPlayerItem class]])
            {
                AVPlayerItem *item = (AVPlayerItem *)object;

                if ([keyPath isEqualToString:@"status"])
                {   //yes->check it...
                    switch(item.status)
                    {
                        case AVPlayerItemStatusFailed:
                        {

                            [TestFlight passCheckpoint:@"AV FAILED"];
                            NSError *error = [item error];
                            NSLog(@"playback error is %@", error);
                            break;
                        }
                        case AVPlayerItemStatusReadyToPlay:

                            NSLog(@"player item status is ready to play");

                            break;
                        case AVPlayerItemStatusUnknown:
                        {
                            [TestFlight passCheckpoint:@"AV STATUS UNKNOWN"];

                            break;
                        }
                    }
                }
                else if (item == [self.queuePlayer currentItem] && [keyPath isEqualToString:@"playbackBufferEmpty"])
                {
                    if (item.playbackBufferEmpty)
                    {
                        [loadingView show:YES];

                    } 
                }     
                else if(item == [self.queuePlayer currentItem] && [keyPath isEqualToString:@"playbackLikelyToKeepUp"])
                {
                        [self.queuePlayer play];
                        [loadingView hide:YES];

                }
            }
        }

    - (void)playerItemDidReachEnd:(NSNotification *)notification {

        NSLog(@"ended video %i " , (int)self.currentItem);

        AVPlayerItem *p = [notification object];
        [p seekToTime:kCMTimeZero];

    } 
```

# objective-c - 模拟在测试用例中调用其方法的类

> ID：14417167
> 
> 赞同：3
> 
> 时间：2013-01-19T18:01:00.760
> 
> 标签：objective-c, unit-testing, ocmock

所以我有一堂课，我写了一些测试用例。这个类有这两个方法：

```
- (void)showNextNewsItem {
    self.xmlUrl = self.nextNewsUrl;
    [self loadWebViewContent];
}

- (void)showPreviousNewsItem {
    self.xmlUrl = self.previousNewsUrl;
    [self loadWebViewContent];
} 
```

可以重构，这是非常原始的，但是我只想确保下一个加载下一个和上一个加载之前。所以我使用 OCMock`OCMockObject`为我的 SUT 类实例化一个，如下所示：

```
- (void)testShowNextOrPreviousItemShouldReloadWebView {

    id mockSut = [OCMockObject mockForClass:[NewsItemDetailsViewController class]];

    [[[mockSut expect] andReturn:@"http://www.someurl.com"] nextNewsUrl];
    [[mockSut expect] loadWebViewContent];

    [[[mockSut expect] andReturn:@"http://www.someurl.com"] previousNewsUrl];
    [[mockSut expect] loadWebViewContent];

    [mockSut showNextNewsItem];
    [mockSut showPreviousNewsItem];

    [mockSut verify];
} 
```

问题在于这两行实际上调用了要验证的方法。OCMock 现在告诉我，调用`showNextNewsItem`并且`showPreviousNewsItem`不是预期的。当然，这不是预期的，因为我正在测试中，我只希望在生产代码本身中发生某些事情。

我没有正确理解嘲笑概念的哪一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:09:17.433

模拟被测类通常会令人困惑，但如果你想这样做，你需要一个“部分模拟”，这样你就可以调用方法而不用存根它们并让它们执行正常的方法。

[根据文档](http://ocmock.org/)，这似乎在 OCMock 中得到支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T18:13:15.730

我找到了解决方案。在对象上使用 partialMock 正是我想要的。这样，我明确定义的调用会被模拟，并且我会在“未模拟”对象上调用正在测试的方法。

```
- (void)testShowNextOrPreviousItemShouldReloadWebView {

    NewsItemDetailsViewController *sut = [[NewsItemDetailsViewController alloc] init];

    id mockSut = [OCMockObject partialMockForObject:sut];

    [[[mockSut expect] andReturn:@"http://www.someurl.com"] nextNewsUrl];
    [[mockSut expect] loadWebViewContent];

    [[[mockSut expect] andReturn:@"http://www.someurl.com"] previousNewsUrl];
    [[mockSut expect] loadWebViewContent];

    [sut showNextNewsItem];
    [sut showPreviousNewsItem];

    [mockSut verify];
} 
```

# apache - 为什么 apache 接受这个无效的范围请求？

> ID：14417168
> 
> 赞同：2
> 
> 时间：2013-01-19T18:01:16.157
> 
> 标签：apache, http, curl

我正在尝试在我的应用程序中调试远程请求问题，所以我一直在使用 curl 查看标头。如果我这样做`curl -v -H "Range: bytes=200-100" THEURL`，服务器会响应：

```
< HTTP/1.1 206 Partial Content
< Date: Sat, 19 Jan 2013 17:46:52 GMT
< Server: Apache
< Content-Range: bytes 200-100/1096985137
< Etag: --REDACTED BY OP--
< Transfer-Encoding: chunked
< Content-Type: application/x-zip-compressed 
```

返回 206 是否意味着内容范围有效并且将提供该范围？

我注意到的另一件事是，即使我使用有效但很小的内容范围（如`Range: bytes=0-100`），服务器也会响应`206`但发送的数据多于 100 字节。难道我做错了什么？

编辑：似乎无论我发送这个服务器的范围是什么，我总是能得到完整的下载。奇怪的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:11:42.440

我会继续回答我自己的问题，即使答案不令人满意。原来这只是服务器上运行的 Apache 版本的一个错误。更新服务器后，问题就解决了。

# mysql - 优化innodb表：yes or no？

> ID：14417171
> 
> 赞同：1
> 
> 时间：2013-01-19T18:01:32.893
> 
> 标签：mysql, wordpress, optimization, innodb

我一直`MyISAM`在我的博客中使用表`Wordpress`，但是，最近我从标准 MySQL 转移到`Percona Server`并开始使用`InnoDB`for 表。

每次我运行优化时，我都会看到`InnoDB`表没有优化：
*“表不支持优化，而是重新创建 + 分析”*。

1.  我搜索了一下，发现一些帖子说优化`InnoDB`表不利于性能。这是真的吗？
2.  我可以继续`Wordpress InnoDB`每月优化我的表格吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:15:10.953

除了您不太可能遇到的一些边缘情况之外，InnoDB 表不需要优化。我不会打扰。

# gnuplot - 关于创建针对大输入的频率分布

> ID：14417172
> 
> 赞同：0
> 
> 时间：2013-01-19T18:01:49.030
> 
> 标签：gnuplot, frequency-distribution

最近我需要创建一个直方图来显示大型数据集的频率分布。如果数据集很小，这应该是一项简单的工作。但是，我需要绘制的数据集包含大约 800000000 个数字（假设每个数字占用 4 个字节），它们都存储在一个文本文件中，每行一个数字。文本文件大约 4 GB。我尝试了 GNUPLOT，但它抱怨没有足够的内存来处理这个数据集。有人可以建议如何解决这个问题，或任何其他工具来完成这项工作吗？

谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:54:19.277

I'd use `python`. It's as easy as building a dictionary. Assuming your file contains integers:

```
from collections import defaultdict

d = defaultdict(int)
with open('datafile') as fin:
    for line in fin:
        d[int(line)] += 1

for item,number_of_occurances in sorted(d.items()):
    print item,number_of_occurances 
```

If you're on a newer version of python, this can be even easier with a `Counter`:

```
from collections import Counter
with open('datafile') as fin:
    d = Counter(int(line) for line in fin)

for item,number_of_occurances in sorted(d.items()):
    print item,number_of_occurances 
```

# javascript - KineticJS，我可以只重绘一个形状吗？（画在画布上）

> ID：14417175
> 
> 赞同：0
> 
> 时间：2013-01-19T18:02:03.160
> 
> 标签：javascript, animation, canvas, kineticjs

在 KineticJS 中，我想向图层添加一个形状，并且只重绘最近添加的形状，而不是该图层中的所有形状。这可能吗？或者也许有一些解决方法？

（.draw() 函数重绘图层上的所有子节点）

关于我的情况的更多详细信息：

我有一个图层，我想在上面画一条线，在动画期间跟踪形状在屏幕上的移动。

```
 //create my shapes first
       var myShape = new Kinetic.Circle({config});
       //myShape gets its own layer, shapeLayer
       var traceLine= new Kinetic.Line({x: myShape.getX() , y: myShape.getY()});
       //traceLine gets its own layer, traceLayer 
```

在动画期间，我执行此代码来更新和重绘线：

```
 //during animation loop
       var points = traceLine.getPoints();
       points.push({x: myShape.getX() , y: myShape.getY()});
       traceLine.setPoints(points);   // this is currently the most efficient method I can think of
       traceLayer.draw();  // redraw the line
       shapeLayer.draw(); // the shape gets redrawn as well 
```

这在短时间内效果很好，但随着时间的推移，我得到了大量的点，重画线的时间越来越长。

我想做的是在动画的每个循环期间在图层上画一条新线，使其分段。像这样：

```
 var traceLine= new Kinetic.Line({x: myShape.getX() , y: myShape.getY(), x: myShape.getX()+1, y: myShape.getY()+1}); // draw as a point
       traceLayer.add(traceLine);
       traceLayer.draw();  //this slows it down as all lines get redrawn. 
```

但是 .draw() 函数会重绘图层上的所有子节点，这并没有提高效率或速度。

抱歉，我没有提出 jsfiddle，因为我的代码很长，但是如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:07:14.803

这个问题与不想擦除屏幕上任何以前的对象的想法有关，但不想重绘它们中的任何一个，基本上只是绘制一个新项目并显示图层。我通过直接在图层上绘制解决了这个问题。

```
 var traceLayerDraw = traceLayer.getCanvas();
 var context = traceLayerDraw.getContext('2d'); 
 context.beginPath();
 context.moveTo(xBefore, yBefore);
 context.lineTo(newX, newY);
 context.stroke(); 
```

所以我只是拿了图层并使用要在新位置绘制的对象的值之前和之后绘制到它上面。

我还必须将图层设置为“clearBeforDraw：false”作为图层的属性。

# javascript - 不在网页上动态附加输入字符串

> ID：14417181
> 
> 赞同：0
> 
> 时间：2013-01-19T18:02:21.633
> 
> 标签：javascript, html

我是 Javascripting 语言的新手。我试图构建一个应用程序，其中有一个 HTML 页面，我通过使用从中获取单个输入条目`Submit button`，并存储在容器（数据结构）中，`dynamically show that list`即字符串列表，在同一页面上

> 意味着每当我单击提交按钮时，该条目将自动附加到同一页面上的现有列表中。

**HTML 文件：-**

```
<html>
    <head>
        <script type = "text/javascript" src = "operation_q_2.js"></script>
    </head>
    <body>
        Enter String : <input type= "text" name = "name" id = "name_id"/>
        <button type="button"   onClick = "addString(this.input)">Submit</button>
    </body>
</html> 
```

**JAVASCRIPT代码**

```
var input = [];

function addString(x) {
    var s = document.getElementById("name_id").value;//x.name.value;
    input.push(input);
    var size = input.length;
    //alert(size);
    printArray(size);
}

function printArray(size){
    var div = document.createElement('div');
    for (var i = 0 ; i < size; ++i) {
        div.innerHTML += input[i] + "<br />";
    }
    document.body.appendChild(div);
    //alert(size);
} 
```

此处将字符串存储在 中`input Array`，但无法在网页上显示。请需要帮助。

再告诉我一件事[，给定链接上](http://www.roseindia.net/javascript/method-createelement.shtml)有一个代码。它也没有给出想要的答案。请帮助我克服这个问题。

```
<html>
<body>
    <script>
       function addValue(a) {
            var element1 = document.createElement('tr');
            var element2 = document.createElement('td');
            var text = document.createTextNode(a);
            var table = document.getElementById('t');
            element2.appendChild(text);
            element1.appendChild(element2); 
            table.tBodies(0).appendChild(element1);
       }
   </script>
   Name: <input type="text" name="a">
   <input type="button" value="Add" onClick='javascript:addValue(a.value)'>
   <table id="t" border="1">
       <tr><th>Employee Name</th></tr>
   </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T20:29:49.007

在您将项目推送到输入数组末尾的代码中，您尝试将数组而不是值推送到数组。因此，如果您的问题是您的值没有被附加到页面上，那是因为您试图将最初为空的数组附加到自身上。

所以而不是

```
input.push(input); 
```

它应该是

```
input.push(s); 
```

从“s”开始，您已经声明为文本字段中的值。

如果你不打算使用你传入的那个参数，我会去掉它。

参考：[Javascript Array.Push()](http://www.w3schools.com/jsref/jsref_push.asp "Javascript Array.Push()")

# sql-server - 显示许多措施的地图

> ID：14417183
> 
> 赞同：0
> 
> 时间：2013-01-19T18:02:35.483
> 
> 标签：sql-server, ssrs-2008-r2

我需要在地图中创建一个包含许多度量的 SSRS 报告。

例如，如何以颜色显示总销售额和以项目符号显示价格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:00:19.277

SSRS 有一个地图组件，但您需要一个空间数据集来定义您希望度量映射到的点或形状。它附带了一堆以美国为中心的产品，也许是国家层面的世界产品。

我不确定您可以在注释中添加多少信息，但您也可以将传统的报告技术与地图结合起来，并为您的指标提供一个侧边栏。

需要注意的是，我认为地图组件的最大尺寸为 36 英寸（反正我上次使用它），如果您正在寻找更大的尺寸，您可能需要使用一些 GIS 软件。

# android - ACTION_PICK 的问题，可以用什么代替？

> ID：14417185
> 
> 赞同：0
> 
> 时间：2013-01-19T18:02:59.930
> 
> 标签：android

我对 ACTION_PICK 有疑问。下面的代码在我的 Galaxy mini 上运行良好，当我选择照片时，它会打开仅包含照片的画廊，当我选择视频时，它会仅打开包含视频的画廊。然而，在 htc legend 上，第一个选项会打开我的画廊，其中包含电影和图像，第二个选项会导致我的应用程序崩溃，因为它正试图打开 com.htc.music 进程。我想知道如何用 acion_pick 解决这个问题，或者可以用什么来代替这个问题？

<

```
code>
case ATT_GALLERY_PHOTO : { 
Intent i = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI );
startActivityForResult(i, ACTIVITY_GALLERY_PHOTO ); 
break;
} 

case ATT_GALLERY_MOVIE : {
Intent movieIntent = new Intent(Intent.ACTION_PICK, MediaStore.Video.Media.EXTERNAL_CONTENT_URI );
startActivityForResult(movieIntent, ACTIVITY_GALLERY_MOVIE ); 
break;
}
</code> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:14:16.573

您可以尝试`ACTION_GET_CONTENT`代替，`ACTION_PICK`看看它是否有帮助。

# c# - 在表单中打开/关闭连接

> ID：14417191
> 
> 赞同：0
> 
> 时间：2013-01-19T18:03:34.130
> 
> 标签：c#, sql

我对打开和关闭 SQL 连接有疑问。哪一个更好：

1.  在事件中打开连接并在`form_load`事件中关闭它`form_closing`。
2.  打开和关闭每个呼叫的连接。

当然有时我需要经常读取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:05:41.517

通常，您应该尽可能短时间地保持数据库连接打开。

因此，在一个`using`块中为每个调用打开和关闭每个连接以确保处理。

我要补充一点，这一切**都不**应该发生在表单中——表单应该关注处理 UI 和 UI 事件——打开和关闭连接应该发生在您的[数据访问层](http://en.wikipedia.org/wiki/Data_access_layer)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T10:13:15.037

我建议你最好选择方法2，如果你选择1，可能会导致其他问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T18:20:41.597

您绝对应该选择 2 号。尤其是在您不知道用户将占用连接多长时间的表单中。

请记住在声明连接时使用 Using 语句，这样您就可以确定无论发生什么，连接都会再次关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T18:05:37.477

这取决于您要如何/何时使用连接。但是，您应该启用连接池，这应该通过在池中为您保持可用连接来减少打开和关闭多个连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T18:42:39.057

最佳做法是尽快关闭您的 sqlconnection，因此使用 sqlconnection 和 using（它实现 IDisposable 接口），如下所示：

```
using (SqlConnection con = new SqlConnection(connectionString))
    {
        //
        // Open the SqlConnection.
        //
        con.Open();
              //do your process
            } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-19T18:05:53.517

我会选择第二个，因为并不总是需要与数据库进行交互。通常我们加载数据和保存数据。当与数据库的交互很激烈并且打开和关闭连接的成本很高时，长时间打开连接很有用。与数据库交互的代码应该从UI中分离出来，放在[数据访问层](http://en.wikipedia.org/wiki/Data_access_layer)。您可以创建一个单独的类库来执行数据库操作，或者至少在同一个项目中为数据库创建类。

> 打开连接的一般准则是尽可能晚地打开打开连接并尽快关闭连接

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-19T18:05:57.903

我绝对建议按需打开和关闭连接。由于连接池打开连接相当便宜，这意味着您不必每次使用它时都检查连接以确保它仍然打开。

# heroku - 如何在两个或多个 Heroku 测功机上运行流星应用程序？

> ID：14417193
> 
> 赞同：3
> 
> 时间：2013-01-19T18:03:46.653
> 
> 标签：heroku, scalability, meteor

我有使用 1 个测功机在 Heroku 平台上运行的 Meteor 应用程序。当我增加测功机的数量时，它会停止工作，并在客户端报告 XHR（错误 404）的一些问题。

有人在两个或更多 Heroku 测功机上成功运行 Meteor 应用程序吗？如果是这样，我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T23:28:10.317

不，不幸的是 Meteor 不能在 Heroku 上使用多个测功机。Meteor 需要会话亲和性，而 Heroku 目前不提供。

Meteor 需要会话亲和性：[在集群中运行流星并实时更改](https://stackoverflow.com/questions/13201269/running-meteor-in-a-cluster-and-real-time-changes/13716069)

Heroku 不支持会话亲和性：[https ://devcenter.heroku.com/articles/intro-for-java-developers](https://devcenter.heroku.com/articles/intro-for-java-developers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T04:47:37.567

如果您想要一个支持 Meteor 并且可以使用会话亲和性扩展到多个 dyno 的 SaaS 托管提供商，那么现在有一个看起来很有前途的 CloudBees buildpack：

[https://github.com/CloudBees-community/meteor-clickstart](https://github.com/CloudBees-community/meteor-clickstart)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-03T18:50:40.437

Heroku 现在支持会话亲和性，这允许它与 Meteor 一起工作。在撰写本文时它还在实验室中，因此您必须启用它。

[https://devcenter.heroku.com/articles/session-affinity](https://devcenter.heroku.com/articles/session-affinity)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T14:53:30.670

好吧，至少，会话亲和力（或类似的东西）似乎在路线图中。因此，开发人员希望在发布 1.0 版时解决该问题。

[https://trello.com/board/meteor-roadmap/508721606e02bb9d570016ae](https://trello.com/board/meteor-roadmap/508721606e02bb9d570016ae)

# grand-central-dispatch - dispatch_io 很好地解决了哪些本地存储 I/O 模式？

> ID：14417195
> 
> 赞同：4
> 
> 时间：2013-01-19T18:04:21.663
> 
> 标签：grand-central-dispatch

我是 Grand Central Dispatch 的忠实粉丝，最近我一直在看`dispatch_io_*`电话系列。很容易看出这个 API 如何对网络 I/O 有用（慢，高延迟）。也就是说，`dispatch_io_create_with_path`排序的存在意味着在本地文件系统上使用。（是的，我知道路径也可以指向远程网络文件系统上的资源，但无论如何......）在玩弄它时，我观察到`dispatch_io_*`与使用简单阻塞相比，使用似乎会带来相当大的开销I/O 调用 ( `read`,`write`， ETC。）。这种减速似乎主要来自用作块的内核同步原语在队列之间来回编组。在我一直在使用的示例工作负载中（非常受 I/O 限制），减速可能高达 10 倍。一方面，它看起来`dispatch_io`永远不会成为健谈（小颗粒）I/O 的胜利。

我假设在具有单个本地物理存储卷的单台机器的常见情况下，I/O 请求将在设备级别有效地序列化。从那里，我发现自己有这两个想法：

*   如果您的工作负载受 CPU 限制，那么根据定义，您已经可以比处理数据更快地读取/写入数据。
*   如果您的工作负载受 I/O 限制（在这种情况下 - 一个本地物理卷），则使用`dispatch_io`无法使您的磁盘更快地为您提供数据。

从那里开始，我认为这个 API 的最佳点可能在中间——一个在 CPU 密集型和 I/O 密集型之间摇摆不定的工作负载，但在这一点上，我有点认为自己陷入了困境，所以我想我会问 StackOverflow。

我将接受第一个描述具有这些先决条件（即单台机器、单个本地物理磁盘）的“真实世界”工作流的答案，使用这些前提条件`dispatch_io`会产生显着的性能改进。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T01:24:43.113

从本地文件系统调度 I/O 的主要用例是大文件的异步 IO，或同时读取/写入的许多文件（特别是如果文件的内容可以增量处理）。

来自本地文件系统的调度 I/O 针对延迟上的吞吐量进行了优化（例如，它在实际 IO 系统调用之前执行分块和咨询读取，以优化通过内核和驱动程序的 IO 路径上的流水线和吞吐量）。

鉴于 IO 系统调用在后台线程上异步执行，调度 IO 永远不会超过使用阻塞系统调用执行的小文件 IO 的延迟，特别是当没有其他 IO 活动正在进行时。

来自 WWDC11 的 GCD 会话详细介绍了调度 I/O，并通过示例比较了通过直接 read() 系统调用实现的吞吐量改进，以读取许多不同大小的文件。

# ruby-on-rails - 如何在设计中自动记住用户

> ID：14417201
> 
> 赞同：14
> 
> 时间：2013-01-19T18:04:49.117
> 
> 标签：ruby-on-rails, devise

我正在构建一个应用程序，我希望用户在他们的计算机上自动被记住，而不需要“记住我”复选框。

我读到我可能需要调用`@user.remember_me!`，但由于设计控制器是隐藏的，所以不确定在哪里调用它。

我正在考虑在 sign_in 表单中添加一个隐藏的复选框字段，该复选框默认标记为复选框，但我希望我可以在控制器端执行此操作。

知道如何做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-07-13T00:21:28.687

如果您在设计中阅读此拉取请求：[https://github.com/plataformatec/devise/issues/1513](https://github.com/plataformatec/devise/issues/1513)，默认情况下要记住的认可方式似乎只是在您的 User 类上定义：

```
class User
   def remember_me
     (super == nil) ? true : super
   end
end 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-19T19:27:34.347

我认为定制你的设计控制器是去这里的方式。

目标：自动为每个人设置记住我。

首先，创建一个设计会话控制器。让我们告诉 Rails 路线吧

**配置/路由.rb**

```
devise_for :users, :controllers => {:sessions => 'sessions'} 
```

**应用程序/控制器/sessions_controller.rb**

```
class SessionsController < Devise::SessionsController

  def create
    params[:user].merge!(remember_me: 1)
    super
  end

end 
```

这样，用户的记住我将始终设置为 true。耶！

然后，您需要编辑登录表单以不显示 remember_me 复选框。

此外，在初始化程序中将其更改为遥远的东西：

```
#config.remember_for = 2.weeks
config.remember_for = 1.year 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T18:11:20.127

这应该是一个持久选项，因此您可以在用户的​​创建后挂钩上执行此操作，因为您希望它是一个永久选项。

# python - 如何通过request.user过滤django-tastypie的ToManyField？

> ID：14417202
> 
> 赞同：4
> 
> 时间：2013-01-19T18:04:51.723
> 
> 标签：python, django, rest, tastypie

我正在为基于用户的数据的 django 应用程序构建一个带有美味派的 API。资源是这样的：

```
class PizzaResource(ModelResource):
    toppings = fields.ToManyField(
                'project.app.api.ToppingResource', 
                'topping_set'
            )

    class Meta:
        authentication = SessionAuthentication()
        queryset = Pizza.objects.all()

    def apply_authorization_limits(self, request, object_list):
        return object_list.filter(users=request.user)

class ToppingResource(ModelResource):
    pizza = fields.ForeignKey(PizzaResource, 'pizza')

    class Meta:
        authentication = SessionAuthentication()
        queryset = Topping.objects.filter() 
```

相应的模型是这样的：

```
class Pizza(model):
    users = ManyToManyField(User)
    toppings = ManyToManyField(Topping)
    # other stuff

class Topping(Model):
    used_by = ManyToManyField(User)
    # other stuff 
```

现在我要做的是按字段过滤`toppings`列出的内容。我刚刚找到[了如何通过请求不相关的数据来过滤这个字段](https://stackoverflow.com/questions/11557790/tastypie-filtering-many-to-many-relationships)。`pizza``Topping.used_by`

如何`tastypie`按请求数据过滤关系字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T00:48:26.597

最后我通过单步执行tastepie的代码找到了答案。事实证明，`ToMany`关系定义中的模型字段（`topping_set`此处）可以设置为可调用的。

在可调用文件中，您将获得`bundle`用于对结果数据进行脱水的数据作为唯一参数。在这里面`bundle`总是请求，所以`user`我想用来过滤的实例。

所以我所做的就是改变这个：

```
toppings = fields.ToManyField(
    'project.app.api.ToppingResource', 
    'topping_set'
) 
```

对此：

```
toppings = fields.ToManyField(
    'project.app.api.ToppingResource', 
    lambda bundle: Topping.objects.filter(
        pizza=bundle.obj, 
        used_by=bundle.request.user
    )
) 
```

就是这样！

# android - 获取运行时崩溃日志说明您的内容必须有一个 ID 属性为“android.R.id.list”的 ListView，不知道为什么？

> ID：14417211
> 
> 赞同：1
> 
> 时间：2013-01-19T18:05:53.563
> 
> 标签：android

我收到运行时异常 java.lang.RuntimeException：您的内容必须有一个 ID 属性为“android.R.id.list”的 ListView。不知道这里出了什么问题。我查看了其他一些答案，似乎将 ListView id 更改为 list 是问题所在，但这似乎不起作用。

活动搜索.xml

```
 <ListView
            android:id="@+id/list"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >
        </ListView>

    </LinearLayout> 
```

list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!--  Single List Item Design -->
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="10dip"
        android:textSize="16dip"
        android:textStyle="bold" >
</TextView> 
```

SearchActivity.java

```
package com.chance.squat;

import com.chance.squat.R;
import java.util.ArrayList;
import java.util.HashMap;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ImageView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class SearchActivity extends ListActivity {

    // url to make request
    private static String url = "http://192.168.1.115:3000/bathrooms/nearby.json/?lat=45.580639&lon=-122.677682";

    // JSON Node names
    private static final String TAG_BATHROOMS = "bathrooms";
    private static final String TAG_ID = "ID";
    private static final String TAG_NAME = "name";
    private static final String TAG_DISTANCE = "distance";

    // contacts JSONArray
    JSONArray bathrooms = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
        setContentView(R.layout.activity_search);

        // Hashmap for ListView
        ArrayList<HashMap<String, String>> bathroomList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts
            bathrooms = json.getJSONArray(TAG_BATHROOMS);

            // looping through All Contacts
            for(int i = 0; i < bathrooms.length(); i++){
                JSONObject c = bathrooms.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String name = c.getString(TAG_NAME);
                String distance = c.getString(TAG_DISTANCE);
                String distanceTrimmed = distance.substring(0,4) + " " + "miles away";

                System.out.println(name);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);
                map.put(TAG_NAME, name);
                map.put(TAG_DISTANCE, distanceTrimmed);

                // adding HashList to ArrayList
                bathroomList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        /**
         * Updating parsed JSON data into ListView
         * */

        ListAdapter adapter = new SimpleAdapter(this, bathroomList,
                R.layout.list_item,
                new String[] { TAG_NAME}, new int[] {
                         R.id.name });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        // Launching new screen on Selecting Single ListItem
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                //String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                //String distance = ((TextView) view.findViewById(R.id.distance)).getText().toString();

                // Starting new intent
                //Intent in = new Intent(getApplicationContext(), SeachActivity.class);
                //in.putExtra(TAG_NAME, name);
                //in.putExtra(TAG_DISTANCE, distance);
                //startActivity(in);

            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:10:04.683

将 ListView id 更改为，`android:id="@android:id/list"`因为当您扩展时，`ListActivity`您必须拥有 ListView id android.R.id.list

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >
</ListView> 
```

# matlab - 从结构矩阵中提取数据矩阵

> ID：14417215
> 
> 赞同：1
> 
> 时间：2013-01-19T18:06:31.733
> 
> 标签：matlab, matrix, struct, extract

我有一个结构矩阵。我试图从该矩阵中提取一个大小相同的矩阵，其中只有一个字段作为值。

我一直在尝试使用 struct2cell 和类似的功能，但没有成功。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:37:03.107

如果我理解正确，你有一个`struct`像这样的数组

```
s(1:2,1:3) = struct('a',1,'b',2); 
```

现在您想要一个仅具有该字段的不同结构`b`

```
[newS(1:2,1:3).b] = deal(s.b); 
```

**编辑**

如果您只需要输出（并且如果字段值是标量），则可以执行以下操作：

```
out = zeros(size(s));
out(:) = cat(1,s.b) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T18:46:52.233

我会借用乔纳斯的例子。您可以使用`[]`来收集特定字段。

```
% Create structure array
s(1:2,1:3) = struct('a',1,'b',2);

% Change values
for idx = 1:prod(size(s))
    s(idx).a = idx;
    s(idx).b = idx^2;
end

% Gather a specific field and reshape it to the size of the original matrix
A = reshape([s.a],size(s));
B = reshape([s.b],size(s)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T11:00:45.300

我有一个类似的问题，但是我的结构数组中字段的内容是我用来标记数据的变长字符串，所以当我提取字段的内容时，我想要一个变长字符串的单元格。

这段代码使用[getfield](http://www.mathworks.co.uk/help/matlab/ref/getfield.html)和[arrayfun](http://www.mathworks.co.uk/help/matlab/ref/arrayfun.html)完成了这项工作，但我认为它比它需要的更复杂。

```
sa = struct('name', {'ben' 'frank', 'betty', 'cybil', 'jack'}, 'value', {1 1 2 3 5})
names = arrayfun(@(x) getfield(x, 'name'), sa, 'UniformOutput', false) 
```

任何人都可以建议更清洁的替代品吗？[映射工具箱中的extractfield](http://www.mathworks.co.uk/help/map/ref/extractfield.html)似乎可以完成这项工作，但它不是基本 MATLAB 系统的一部分。

更新：我已经回答了我自己的嵌入式问题。

```
names = {sa.name} 
```

# algorithm - 寻找存储大整数的最有效基的算法

> ID：14417218
> 
> 赞同：2
> 
> 时间：2013-01-19T18:07:02.980
> 
> 标签：algorithm, math, storage, bignum, radix

非常大的整数通常[作为可变长度的数字数组存储](http://en.wikipedia.org/wiki/Bignum)在内存中，这与 Java 或 C 中大多数原始“int”或“long”类型的直接二进制表示相反。考虑到这一点，我很想知道可以计算的算法：

1.  *整数必须达到多少计数*才能将其存储为 BigInteger（或等效的任意精度算术构造）并具有给定的整数位基数；

2.  *哪个基数*最有效地存储这个大整数的数字。

我提到了“效率”；这样，我的意思是我主要关心 BigInteger 将消耗的*空间*量，尽管我也有兴趣听到有关处理速度或时间复杂度的任何评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:11:08.263

如果以原始二进制格式存储，整数应该占用最少的空间（除非它可能是一个小整数并且数据类型对它来说太宽 - 以 128 位存储 1 `long long`）。以不同方式存储不会节省任何内存，并且用于使使用此类整数的工作更容易。

如果逐个字节，这将转换为 256'ecimal radix - 256 个可能的值，尽可能多的字节可以容纳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:12:39.090

1.  BigInt 永远不会比硬件直接支持的整数类型之一更有效。如果您可以直接使用受支持的内容，请使用它。
2.  硬件最有效地支持什么，可能是 2 的幂，或者通常等效地是二进制。

# python - 如何使用 pydev 在 Eclipse 中导出 python 文件？

> ID：14417225
> 
> 赞同：0
> 
> 时间：2013-01-19T18:07:30.113
> 
> 标签：python, eclipse, export

我目前在 eclipse 中有一个项目，我正在使用 Pydev，我正在尝试导出所有源代码。我知道如何将 java 文件导出到 jar 文件中，但我的问题是如何在 eclipse 中导出 python 文件？或者你能做到吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:17:57.620

Python 不像 Java - 它是从源文件解释的。您的`*.py`文件是您需要的唯一人工制品。

您可能已经看过`*.pyc`和`*.pyo`文件，但这些不是*必需*`.py`的，并且本质上并不比普通文件运行得更快。[在这里](http://www.network-theory.co.uk/docs/pytut/CompiledPythonfiles.html)阅读更多。

如果您希望公开发布您的 python 代码，您可能需要查看[python 打包文档。](http://guide.python-distribute.org/)

# ajax - node.js 表达 ajax 会话

> ID：14417226
> 
> 赞同：8
> 
> 时间：2013-01-19T18:07:31.287
> 
> 标签：ajax, node.js

我遇到了 express 和 ajax 会话的问题。我的应用程序通过 Ajax（POST 和 GET）接收请求并设置会话变量。如果请求不是来自 ajax，虽然会话可以正常工作，但在相反的情况下，它们就无法正常工作。例如 ：

```
if (typeof req.session.id == 'undefined'){
req.session.id = 1; 
```

}

```
else {
req.session.id++;
 } 
res.send({session:req.session.id}); 
```

现在当我做 localhost:3000/ 一切都很好时，它每次都会增加。如果我通过 $http 从 Angular 做同样的事情，我会一直得到 1。我在 PHP 中尝试了相同的操作，以防 Angular 出现问题，但它工作得很好。请注意，ajax 调用来自 localhost:80

我的快速设置：

```
app.use(express.bodyParser());
app.use(express.cookieParser('secret'));
app.use(express.cookieSession({secret:'mySecret'}));
app.use(express.session({store:new express.session.MemoryStore(),maxAge : new Date(Date.now() + 3600000)}));
app.use(app.router) 
```

编辑

通过执行 console.log(req); 我注意到，当不是来自 AJAX 时，我得到：

```
 cookies: 
```

{ PHPSESSID: 'jm2p2kn7etmofrp48s8sv4pu47', ZDEDebuggerPresent: 'php', '': 'phtml', user_admin: 'MTUzOnJvb3Q6U2ptaHJpZmllaG8=', 'connect.sess': 's:j:{"id":7}.oIAoC356/z4fQ+ +iH44N7YxWZWEP49bTHp1h/gpAELY' }

但是当来自 AJAX 我得到 {}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T09:28:24.030

在 node.js 上：

```
res.header('Access-Control-Allow-Credentials', 'true'); 
```

在 ajax 上：

```
xhr.withCredentials = true; 
```

# joomla - 链接到新的 Joomla 2.5 控制器

> ID：14417230
> 
> 赞同：0
> 
> 时间：2013-01-19T18:07:55.887
> 
> 标签：joomla, joomla2.5

众所周知，Joomla 2.5 中的控制器从

```
// Create the controller
$classname  = 'mycomponentController'.$controller;
$controller = new $classname( );

// Perform the Request task
$controller->execute( JRequest::getVar('task'));

// Redirect if set by the controller
$controller->redirect(); 
```

类似于

```
// Get an instance of the controller prefixed by the component
$controller = JController::getInstance('mycomponent');

// Perform the Request task
$controller->execute(JRequest::getCmd('task'));

// Redirect if set by the controller
$controller->redirect(); 
```

现在在 Joomla 1.5 中以及通过使用表格，您可以通过运行链接来运行任务

```
index.php?option=com_mycomponent&controller=specificcontroller&task=randomtask 
```

然而，这种链接样式不适用于新控制器 - 如果您使用新控制器，有谁知道如何在 Joomla 2.5 中格式化此链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:31:42.970

您可以结合任务和控制器，以便它会调用指定控制器的任务。这些将被`.(dot)`分开。试试这个-

```
index.php?index.php?option=com_mycomponent&view=viewname&task=specificcontroller.randomtask 
```

阅读更多 - [http://docs.joomla.org/JController_and_its_subclass_usage_overview](http://docs.joomla.org/JController_and_its_subclass_usage_overview)

# javascript - 糖果 OpenFire Jboss Apache

> ID：14417231
> 
> 赞同：0
> 
> 时间：2013-01-19T18:07:56.350
> 
> 标签：javascript, apache, jboss, xmpp, openfire

我安装了 Openfire，根据糖果文档中的文档设置所有内容。

在 Jboss 和 Openfire 前面设置 apache 服务器。

编辑 etc/httpd/conf/httpd.conf 文件：

```
ProxyRequests Off

ProxyPass /http-bind http://ip_of_machine:7070/http-bind
ProxyPassReverse /http-bind http://ip_of_machine:7070/http-bind

ProxyPass /myjavawebapp http://ip_of_machine:8080/myjavawebapp
ProxyPassReverse /myjavawebapp http://ip_of_machine:8080/myjavawebapp 
```

跑

```
/usr/sbin/setsebool httpd_can_network_connect true 
```

在此之后，如果我浏览浏览器

```
http://ip_of_machine/myjavawebapp 
```

我看到我的应用程序，如果我去

```
http://ip_of_machine/http-bind/ 
```

我得到这个页面

```
 Openfire HTTP Binding Service 
```

我的糖果初始化代码是这样的

```
 Candy.init('http-bind/', {
                            core: { debug: false },
                            view: { resources: '../res/' }
                    });

                    Candy.Core.connect(); 
```

我不知道如何与我的用户/通行证连接到 openfire。我尝试了不同的用户/密码组合，我尝试使用不同的 Candy.Core.connect 配置，但没有运气。

我可以从 pidgin 和任何其他客户端连接到 OpenFire，但为此我使用端口 5222

当我在 Candy.Core.connect 中输入一些值（只有一个参数）时，我只被要求输入用户名，我输入它，然后它看起来像对 http-bind 的无限循环请求，每次都返回相同事物

```
 Openfire HTTP Binding Service 
```

我不确定我是否错过了 OpenFire 的某些设置，或者 Apache 的设置有问题，或者 javascript 代码有问题，或者其他什么。

任何想法，建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:38:14.803

找到解决方案。我的 apache 设置和 javascript 代码有错误

首先我像这样设置apache conf

```
ProxyPass /myjavawebapp http://ip_of_machine:8080/myjavawebapp
ProxyPassReverse /myjavawebapp http://ip_of_machine:8080/myjavawebapp

AddDefaultCharset UTF-8
Options +MultiViews
RewriteEngine On
RewriteRule http-bind/ http://ip_of_machine:7070/http-bind/ [P] 
```

在此之后我修改了这样的javascript糖果代码

```
Candy.init('/http-bind/', {
            core: { debug: true ,autojoin: ['muc@conference.ip_of_machine']}
            ,
            view: { resources: '../res/' }
  });

Candy.Core.connect(); 
```

我使用用户名作为

```
myusername@ip_of_machine 
```

和我的用户的密码，一切正常:)

# c# - C# 对 JSON 字符串键进行排序

> ID：14417235
> 
> 赞同：8
> 
> 时间：2013-01-19T18:08:18.490
> 
> 标签：c#, .net, json, string, sorting

我想转换 JSON 字符串

```
"{ \"birthday\": \"1988-03-18\", \"address\": { \"state\": 24, \"city\": 8341, \"country\": 1 } }" 
```

到

```
"{ \"address\": { \"city\": 8341, \"country\": 1, \"state\": 24 }, \"birthday\": \"1988-03-18\" }" 
```

注意：我没有使用排序版本进行通信（因为密钥顺序并不重要），我需要一个排序版本来执行本地测试（通过比较 JSON 字符串）。

* * *

**编辑：** I4V 指出了一个使用[Json.Net](http://json.codeplex.com/)的解决方案，我宁愿使用不需要包含任何 3rd 方库的解决方案（实际上我在我的应用程序中使用内置 System.Json）

* * *

[我在此处](https://gist.github.com/4575133)发布了 I4V + 一些测试提供的解决方案的要点。谢谢你们。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-19T18:23:49.500

我将为此使用[Json.Net](http://json.codeplex.com/)

```
string json = @"{ ""birthday"": ""1988-03-18"", ""address"": { ""state"": 24, ""city"": 8341, ""country"": 1 } }";
var jObj = (JObject)JsonConvert.DeserializeObject(json);
Sort(jObj);
string newJson = jObj.ToString(); 
```

* * *

```
void Sort(JObject jObj)
{
    var props = jObj.Properties().ToList();
    foreach (var prop in props)
    {
        prop.Remove();
    }

    foreach (var prop in props.OrderBy(p=>p.Name))
    {
        jObj.Add(prop);
        if(prop.Value is JObject)
            Sort((JObject)prop.Value);
    }
} 
```

**编辑**

尝试一下，`System.Json`但我不确定`OrderByDescending`（或`OrderBy`）。

```
var jObj = (System.Json.JsonObject)System.Json.JsonObject.Parse(json);
Sort2(jObj);
var newJson = jObj.ToString(); 
```

* * *

```
void Sort2(System.Json.JsonObject jObj)
{
    var props = jObj.ToList();
    foreach (var prop in props)
    {
        jObj.Remove(prop.Key);
    }

    foreach (var prop in props.OrderByDescending(p => p.Key))
    {
        jObj.Add(prop);
        if (prop.Value is System.Json.JsonObject)
            Sort2((System.Json.JsonObject)prop.Value);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-11T03:06:05.163

我知道这可能有点晚了，但是如果您也需要对内部数据数组进行排序（我只需要它）：

```
static void Sort(JObject jObj)
{
    var props = jObj.Properties().ToList();
    foreach (var prop in props)
    {
        prop.Remove();
    }

    foreach (var prop in props.OrderBy(p => p.Name))
    {
        jObj.Add(prop);
        if (prop.Value is JObject)
            Sort((JObject)prop.Value);
        if (prop.Value is JArray)
        {
            Int32 iCount = prop.Value.Count();
            for (Int32 iIterator = 0; iIterator < iCount; iIterator++)
                if (prop.Value[iIterator] is JObject)
                    Sort((JObject)prop.Value[iIterator]);
        }
    }
} 
```

干杯!

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-19T19:15:08.537

通过使用[这种方法，您可以使用 json 数据检索动态对象](https://stackoverflow.com/a/7485047/340760)

在`DynamicJsonConverter`创建一个`SortedDictionary`而不是

```
var d = new SortedDictionary<string, object>(dictionary);
// TODO: code to sort inner objects
return new DynamicJsonObject(d); 
```

然后你可以使用

```
string jsonStr = "{\"B\":\"2\",\"A\":\"1\"}";
JavaScriptSerializer jss = new JavaScriptSerializer();
jss.RegisterConverters(new JavaScriptConverter[] { new DynamicJsonConverter() });

dynamic json = jss.Deserialize(jsonStr, typeof(object)) as dynamic;

string result = new JavaScriptSerializer().Serialize((json as DynamicJsonObject).Dictionary); 
```

并且`result`会有预期的输出。

# python - setup.py：将 src 包重命名为项目名称

> ID：14417236
> 
> 赞同：57
> 
> 时间：2013-01-19T18:08:21.033
> 
> 标签：python, python-2.7, distutils

假设您有一个名为的项目`proj`，并且在该项目中您具有以下结构：

```
proj/
  dists/
  doc/
  src/
    __init__.py
    xyz.py
    abc.py
  test/
  setup.py 
```

如您所见，项目的所有内容都在`src`子文件夹中。如何从`src`文件夹中制作 distutils 分发包？

[按照教程](http://docs.python.org/2/distutils/setupscript.html)，我的天真想法是这样写`setup.py`：

```
#omitting basics
setup(
   name='proj',
   packages=['src'],
   package_dir={'proj':'src'}
) 
```

但是在将生成的包安装到我的系统后，我仍然需要 import`src.xyz`而不是`proj.xyz`，这将是目标和预期结果。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-20T02:37:52.020

您可以通过将 Python 包文件放入`proj/`目录来修复它：

```
proj/
  src/
    proj/
      __init__.py
      xyz.py
      abc.py
  setup.py 
```

并更改`setup.py`为：

```
# ...
setup(
   name='proj',
   packages=['proj'],
   package_dir={'':'src'}
) 
```

distutils 不需要它，但其他工具可能期望`__init__.py`文件的父目录名称与 Python 包名称相同，即`proj`在这种情况下。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-03-15T13:33:20.267

这是由于此处报告的 setuptools 中的错误：[https ://github.com/pypa/setuptools/issues/250](https://github.com/pypa/setuptools/issues/250)

基本上，它确实可以工作，但不能在开发模式下工作。现在你有3个解决方案：

*   `src`将包符号链接为`proj`（并在提交时忽略它），它将开箱即用但很脏
*   从 更改`src`为`proj`
*   `proj`在其中创建一个子目录`src`并使用以下选项：

```
包= ['项目']，
package_dir={'proj': 'src/proj'},

```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-11-05T13:32:01.277

正确的设置是：

```
#omitting basics
setup(
   name='proj',
   packages=['proj'],
   package_dir={'proj':'src'}
) 
```

src 文件夹应包含`__init__.py`（如果文件为空，则默认导出所有内容）

在另一个项目中：requirements.txt：

`../relativePathToProject`或姓名`package:version`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-07-08T15:32:37.780

您可以先使用`find_packages`查找所有包名`src`，然后手动将它们重命名为所需的名称。最后，使用该`package_dir`选项指定包约定。

```
import re

from setuptools import find_packages, setup

PACKAGE_NAME = 'proj'
SOURCE_DIRECTORY = 'src'
SOURCE_PACKAGE_REGEX = re.compile(rf'^{SOURCE_DIRECTORY}')

source_packages = find_packages(include=[SOURCE_DIRECTORY, f'{SOURCE_DIRECTORY}.*'])
proj_packages = [SOURCE_PACKAGE_REGEX.sub(PACKAGE_NAME, name) for name in source_packages]

setup(
    name=PACKAGE_NAME,
    packages=proj_packages,
    package_dir={PACKAGE_NAME: SOURCE_DIRECTORY},
    ...
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-14T21:30:51.593

基于[Jfs 的 Answer](https://stackoverflow.com/a/14421176/4028718)，如果您像我一样已经建立了一个您不想/由于其他原因无法更改的目录结构，一种解决方案是临时复制所有要打包的代码，然后构建它。

这是一个带有目标的生成文件，它将 src 中的所有文件复制到一个临时位置，然后调用 setup.py 来构建包，最后自行清理。

```
SRC_DIR='src'
TEMP_PACKAGE_DIR='your_shiny_package'

package: prepare_package_dir build_package deploy_package remove_package_dir

# I'm using gemfury, your deployment will probably look different
deploy_package:
    twine upload --repository fury dist/* --verbose

clean_package:
    rm -r dist || echo 'dist removed'
    rm -r ${TEMP_PACKAGE_DIR}.egg-info || echo 'egg-info removed'

build_package: clean_package
    python setup.py sdist

prepare_package_dir:
    mkdir ${TEMP_PACKAGE_DIR}
    cp -R ${SRC_DIR}/* ${TEMP_PACKAGE_DIR}/
    mv ${TEMP_PACKAGE_DIR} ${SRC_DIR}/${TEMP_PACKAGE_DIR}

remove_package_dir:
    rm -rf ${SRC_DIR}/${TEMP_PACKAGE_DIR} 
```

然后一个 setup.py 看起来有点像这样：

```
 setup(
    name='your_shiny_package',
    version=version,
    description='some great package...',
    long_description=readme,
    url='https://whereever',
    author='you',
    packages=['src/your_shiny_package'],
    install_requires=parse_all_requirements(),
    zip_safe=False,
    include_package_data=True) 
```

可能不是最有效的，但可以避免您永久重组整个回购。

用法：只需`make package`作为构建管道的一部分或手动调用。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2013-01-20T01:52:11.850

您可以在调用函数之前尝试将`src`文件夹添加到：`PYTHONPATH``setup`

```
import sys, os
src_path = os.path.join(os.path.realpath(os.path.dirname(__file__)), 'src')
sys.path.append(src_path) 
```

而且，为了安全起见，您可以更改工作目录：

```
os.chdir(src_path) 
```

在那之后，它应该一切都好。

~~用于打包应用程序的其他一些工具从内部支持这一点。我以为是 setuptools，结果是 PyInstaller。但基本上，这就是应该做的，足以让你的包直接导入。~~

原来 distutils 有这个`package_dir`指令。那是你应该使用的，但它*可能*只通过将你的包添加到`PYTHONPATH`.

# android - 无法从 Activity 移动到 TabActivity

> ID：14417247
> 
> 赞同：0
> 
> 时间：2013-01-19T18:09:13.630
> 
> 标签：android, android-tabhost

我无法从`mainactivity.class`to移动`main.class`。当我单击图像视图时，它会崩溃并不幸地告诉我该应用程序已停止。

这是运行良好的主要活动：

```
package com.example.eateqadat;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

         ImageView i = (ImageView)findViewById(R.id.imageView1);
            i.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    Intent explicitIntent = new Intent(MainActivity.this,main.class);
                    startActivity(explicitIntent);
                }
            });
    }
} 
```

这是主要课程。我不知道出了什么问题，但它一直在崩溃：

```
package com.example.eateqadat;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class main extends TabActivity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tabHost = getTabHost(); 

        // Android tab
        Intent intentabout = new Intent().setClass(main.this, about.class);
        TabSpec tabSpecabout = tabHost
          .newTabSpec("Úä ÇáÈÑäÇãÌ")
          .setContent(intentabout);
        tabHost.addTab(tabSpecabout);

        tabHost.setCurrentTab(1);

    }
} 
```

这是日志猫

```
01-21 17:43:23.506: E/Trace(1203): error opening trace file: No such file or directory (2)
01-21 17:43:24.117: D/dalvikvm(1203): GC_FOR_ALLOC freed 32K, 3% free 10769K/11075K, paused 42ms, total 43ms
01-21 17:43:24.126: I/dalvikvm-heap(1203): Grow heap (frag case) to 10.968MB for 376016-byte allocation
01-21 17:43:24.186: D/dalvikvm(1203): GC_FOR_ALLOC freed <1K, 3% free 11136K/11463K, paused 30ms, total 30ms
01-21 17:43:24.226: D/dalvikvm(1203): GC_FOR_ALLOC freed 0K, 3% free 11136K/11463K, paused 37ms, total 37ms
01-21 17:43:24.236: I/dalvikvm-heap(1203): Grow heap (frag case) to 11.604MB for 667348-byte allocation
01-21 17:43:24.316: D/dalvikvm(1203): GC_CONCURRENT freed 0K, 4% free 11787K/12167K, paused 18ms+3ms, total 77ms
01-21 17:43:24.316: D/dalvikvm(1203): WAIT_FOR_CONCURRENT_GC blocked 6ms
01-21 17:43:24.576: D/gralloc_goldfish(1203): Emulator without GPU emulation detected.
01-21 17:43:26.936: D/AndroidRuntime(1203): Shutting down VM
01-21 17:43:26.936: W/dalvikvm(1203): threadid=1: thread exiting with uncaught exception (group=0x2bc9a300)
01-21 17:43:26.956: E/AndroidRuntime(1203): FATAL EXCEPTION: main
01-21 17:43:26.956: E/AndroidRuntime(1203): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.eateqadat/com.example.eateqadat.main}: java.lang.IllegalArgumentException: you must specify a way to create the tab indicator.
01-21 17:43:26.956: E/AndroidRuntime(1203):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at android.os.Looper.loop(Looper.java:137)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at java.lang.reflect.Method.invokeNative(Native Method)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at java.lang.reflect.Method.invoke(Method.java:511)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at dalvik.system.NativeStart.main(Native Method)
01-21 17:43:26.956: E/AndroidRuntime(1203): Caused by: java.lang.IllegalArgumentException: you must specify a way to create the tab indicator.
01-21 17:43:26.956: E/AndroidRuntime(1203):     at android.widget.TabHost.addTab(TabHost.java:217)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at com.example.eateqadat.main.onCreate(main.java:21)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at android.app.Activity.performCreate(Activity.java:5008)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-21 17:43:26.956: E/AndroidRuntime(1203):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-21 17:43:26.956: E/AndroidRuntime(1203):     ... 11 more
01-21 17:43:29.846: I/Process(1203): Sending signal. PID: 1203 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T11:09:49.770

@user1967751 这是给你的样本

显示选项卡.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

 <LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </TabWidget>

      <FrameLayout  
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:id="@android:id/tabcontent" >

  </FrameLayout>

   </LinearLayout>

</TabHost> 
```

下面是AfterLoginTabActivity的代码（要调用的标签活动）

```
 public class AfterLoginTabActivity extends TabActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.afterloginview);
        @SuppressWarnings("deprecation")
        TabHost tabHost =getTabHost();

        Intent i = new Intent(AfterLoginTabActivity.this,ProfileClass.class);
        TabSpec profileSpec = tabHost.newTabSpec("profile").setIndicator("Profile").setContent(i);

        Intent j = new Intent(AfterLoginTabActivity.this,GroupClass.class);
        TabSpec groupSpec = tabHost.newTabSpec("group").setIndicator("group").setContent(j);

        tabHost.addTab(profileSpec);
        tabHost.addTab(groupSpec);

        tabHost.setCurrentTab(1);

    }
    } 
```

我在 button.setOnClickListener 中使用的代码

```
 if(msg == "success")
    {
        System.out.println("Inside button");
        try {
            Intent intent = new Intent(MainActivity.this,AfterLoginTabActivity.class);
              startActivity(intent);
              finish(); 
          } catch (Exception e) {
               // TODO: handle exception
              System.out.print("tHIS IS EXCCEPTION" + e);
        }

    } 
```

# javascript - 我可以检测到跨域 iframe 包含 404 响应吗？

> ID：14417255
> 
> 赞同：1
> 
> 时间：2013-01-19T18:10:35.350
> 
> 标签：javascript, html, iframe, cross-domain

我有一个向我的页面注入 iframe 的脚本，在极少数情况下服务已关闭并且 iframe 内容是 404 页面内容。

我能以某种方式检测到跨域页面（in-iframe）的响应是 404 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T18:37:04.730

简单的答案是“不”，而不是没有[CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)或服务器端的帮助。同源策略的全部意义在于您无法获取有关从其他地方提供的内容的信息。

尝试使用服务器端脚本向相关站点发出 HEAD 请求并确保它已启动。

另一种可能的解决方法：在他们的网站上找到一张图片，然后尝试先加载它。当图像加载时，加载 iframe。如果一段时间后无法加载，您可以假设服务器已关闭，并显示自定义“oops”消息。可能会或可能不会工作，具体取决于该服务器的实际情况。

# qt - Qt Creator 找不到可执行文件，请指定一个

> ID：14417262
> 
> 赞同：4
> 
> 时间：2013-01-19T18:11:19.420
> 
> 标签：qt, qt-creator

我正在尝试使用 Qt Creator 运行目录`texteditor.pro`中的文件。`QtSDK\Examples\4.7\tutorials\gettingStarted\gsQml`当我尝试构建项目时，我得到一个窗口，上面写着

> 找不到可执行文件，请指定一个

三个字段来加载文件。[对话框的快照](http://imageshack.us/photo/my-images/849/46621546.jpg/)。

我正在使用 Qt Creator 2.4.1 运行 Windows 7 64 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:41:50.763

我已经解决了它是**缺少 dll 文件**的问题，但可执行文件没有要求它，所以我将**Qtcreator -> bin**中的所有 dll 与 *.exe 文件放在同一个文件夹中，然后我删除了文件后另一个，直到我弄清楚需要哪些文件。*这是一种蛮力的方式，但它完成了工作。* 这是丢失的文件 ( **libEGL.dll** )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:17:32.133

该项目不是以正常的“Qt-executable”类型格式创建的。相反，它是一个“插件”类项目。所以你不能像其他项目一样直接运行它。

*[如果您打开项目文件，您将找不到 main() 函数！这通常应该是 C++ 应用程序的入口点。你所拥有的只是几个 C++ 类。以此为提示]*

关于这个例子，他们在[这里](http://doc.qt.digia.com/qt/gettingstartedqml.html)给出了完整的细节。我引用：

> 我们需要在文本编辑器运行之前编译文件对话框 C++ 插件。要编译，进入 gsQml 目录，然后运行 ​​qmake 并使用 make 或 nmake 编译，具体取决于您的平台。要运行，启动 qmlviewer 并打开 texteditor.qml 文件。

别的：

1.  您创建自己的项目。
2.  将这些类文件和相应的 qml 文件添加到该项目中。
3.  添加一个 main 并创建所需的相应对象。
4.  制作一个应用程序查看器并将“texteditor.qml”路径作为其源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T18:42:31.387

我`could not find executable`在 Ubuntu 12.10 中弹出了窗口。

这是我得到“错误”的方式：

*   创建了一个名为 Project 的文件夹；
*   在其中，我运行“qmake -project”，然后运行“qmake”；
*   在文件夹内创建了一个 main.cpp 文件；
*   使用 Qt Creator 打开 Project.pro 文件，并在其中添加“SOURCES += main.cpp”行；
*   按 Ctrl + R 构建并运行项目。

后来我删除了该文件夹并再次创建它，但这次在尝试运行任何命令之前创建了一个 main.cpp 文件。我用 Qt Creator 打开了 .pro 文件，在 main.cpp 文件中创建了一个 main 函数，然后按 Ctrl + R，它就构建并运行了！

# ios - 未找到 xcode 4.6 dp cfnetwork.h

> ID：14417264
> 
> 赞同：0
> 
> 时间：2013-01-19T18:11:20.557
> 
> 标签：ios, xcode

我搬到了 xcode 4.6 dp4。我的应用程序在模拟器（从 5.0 到 6.1 的任何版本）上运行良好，但无法在设备上编译（运行 iOS 5.1）。

错误是：

![在此处输入图像描述](../Images/065125de5cfc89e59a9b53dc776844ef.png)

帮助表示赞赏。

最大限度

# ember.js - 如何观察当前路线的变化？

> ID：14417266
> 
> 赞同：15
> 
> 时间：2013-01-19T18:11:29.480
> 
> 标签：ember.js, ember-router

每当位置（路线）发生变化时，我想更新`<title>`页面的标签。我对观察`App.Router`当前路由的变化特别感兴趣——然后我想访问与该路由关联的视图并`<title>`根据视图的属性更新观察者的标记。

例如，如果去`/about`

1.  我设置观察者观察什么？我很难找到`currentState`要观察的属性或等价物。
2.  在观察者中，我如何访问`App.AboutView`与路由关联的？

我正在使用`1.0.0pre4`

* * *

我的目标是在观察者将使用的每个视图上都有一个`title`属性和一个属性。我想使用该属性来更新，并且该属性对象来检查我当前的用户是否可以访问该路由。`authorization``currentPath``title``document.title``authorization`

既然我这么说并且@Michael Grassotti 的回答，也许这些属性属于**控制器**而不是视图。目标是访问与当前路由的上下文关联的这些属性，以修改`document.title`并检查我的`App.CurrentUserController` *（存储`User`登录用户的对象模型）*是否被授权访问当前路由。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-19T21:25:21.153

> 1.  我设置观察者观察什么？我无法找到要观察的 currentState 属性或等效项。

你可以观察到`ApplicationController.currentPath`。例如：

```
App.ApplicationController = Ember.Controller.extend({
  currentPathDidChange: function() {
    path = this.get('currentPath');
    console.log('path changed to: ', path);
    window.document.title = path;
  }.observes('currentPath')
}); 
```

> 1.  在 Observer 中，如何访问与路由关联的 App.AboutView？

试图`App.AboutView`从这个观察者那里访问会很棘手，而且可能不是一个好主意。我不清楚为什么视图的属性在这种情况下会有用。你能详细说明吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-19T22:17:57.957

因此，我尝试使用的属性属于路由的**控制器，而不是视图。**

给定一些`contactUs`路线，它的控制器可能看起来像

```
App.ContactUsController = App.AppController.extend({
  title: "Contact Us"
}); 
```

我的`App.ApplicationController`罐子现在看起来像

```
App.ApplicationController = Ember.Controller.extend({
  updateTitle: function() {
    window.document.title = this.controllerFor(this.currentPath).get('title');
  }.observes('currentPath')
}); 
```

所以我正在寻找的 API 方法/属性是

*   `App.ApplicationController.get('currentPath')` *（目前似乎在网站上没有记录）*
*   `controllerFor` *（也似乎没有记录，但在`reopen`实现中找到`Ember.ControllerMixin`）*

# c# - 一次更改命名空间

> ID：14417268
> 
> 赞同：1
> 
> 时间：2013-01-19T18:11:52.330
> 
> 标签：c#, visual-studio, resharper

有没有办法一次更改目录中所有类/解决方案中所有类的命名空间？

如果我现在决定`refactor`稍微移动一个目录中的几个类，那么`Resharper`会警告我命名空间与目录不同步。

我只能选择一一浏览所有移动的类并相应地更改命名空间。这有点像猴子的工作，我想知道是否有更简单的方法可以一次完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T18:15:53.307

在 ReSharper 中很容易完成。

右键单击您的解决方案，转到`Refactor .. Adjust Namespaces`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T18:13:52.950

> 有没有办法一次更改目录中所有类/解决方案中所有类的命名空间？

为此，您不需要 resharper - Visual Studio 具有全面的[查找和替换](http://msdn.microsoft.com/en-us/library/ms165349.aspx)功能，可让您对解决方案中的所有文件执行此操作。

该功能还允许您使用通配符或正则表达式（尽管某些语法特定于 Visual Studio）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T18:14:52.017

你不需要`Resharper`。Visual Studio 有[**`Search and Replace`**](http://msdn.microsoft.com/en-us/library/ms165349.aspx)这方面的选项。`Resharper`也有搜索和替换选项看起来像这样`Ctrl`+`F`

![在此处输入图像描述](../Images/12d14cbc9a9da7445f475290e574b4e0.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T20:49:52.823

一个简单的方法是使用`Find and Replace`功能。但是，`Refactor`也可以正常工作。

# ruby-on-rails-3 - 如何使用 rspec 和 factory girl 设置我的身份验证数据？

> ID：14417273
> 
> 赞同：1
> 
> 时间：2013-01-19T18:12:18.770
> 
> 标签：ruby-on-rails-3, authentication, testing, rspec, factory-bot

我有一个简单的用户工厂，如下所示：

```
FactoryGirl.define do
  factory :user do
    name "jeff"
    email "jeff@lint.com"
    password "foobar"
    password_confirmation "foobar"
  end
end 
```

我正在尝试`authenticate`像这样测试内置方法：

```
 describe "return value of authenticate method", focus: true do

    before do
      create(:user)
    end

    let(:found_user) { User.find_by_email(:email) }

    it "can return value of authenticate method" do
      expect(:user).to eq found_user.authenticate(:password)
    end

  end 
```

我得到的错误是

```
NoMethodError:
       undefined method `authenticate' for nil:NilClass 
```

这可能意味着`found_user`返回零。但我不明白为什么。当我在控制台上尝试这段代码时，它工作得很好。那么我做错了什么？我对工厂女孩很陌生。

我也在寻找的是在不使用实例变量的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:04:28.433

```
 describe "return value of authenticate method", focus: true do

    before do
      @user = FactoryGirl.create(:user)
    end

    let(:found_user) { User.find_by_email(@user.email) }

    it "can return value of authenticate method" do
      expect(:user).to eq found_user.authenticate(:password)
    end

  end 
```

有人可以建议一种更好的 RSpec 方法来执行此操作，但它会让您的测试正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:24:16.170

试试这个

```
describe "return value of authenticate method", focus: true do

   before do
     @user = FactoryGirl.create(:user)
   end

   let(:found_user) { User.find_by_email(@user.email) }

   it "can return value of authenticate method" do  
     expect(@user).to eq found_user.authenticate(@user.password)
   end
end 
```

# python - 为包含多个 \n 的文本编写正则表达式

> ID：14417274
> 
> 赞同：-1
> 
> 时间：2013-01-19T18:12:19.053
> 
> 标签：python, regex, regex-negation, regex-greedy

此正则表达式`<li>.*end`不适用于以下文本，我做错了什么？

文本

```
 <li>asdsadasd
adssadasdasdasdas
asdasdasdasdasdad
adsasdasdasdasd
dasdadadsadadasdasdasdasda
end 
```

有人可以帮我写一个正则表达式来获取所有文本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T18:15:40.067

默认情况下，`.`不匹配换行符。你必须通过`DOTALL`国旗...

```
regex = re.compile('<li>.*end', re.DOTALL) 
```

或者等价地，

```
regex = re.compile('<li>.*end(?S)') 
```

**编辑：**不是`re.MULTILINE`标志——改变`$`and的行为`^`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T18:15:13.307

您必须从以下选项中选择多行选项`re`：

```
import re
expr = re.comile("<li>.*end", re.M) 
```

考虑到评论和迪特里希的回答，如果您需要 和 的行为`$`相同`^`，请使用`re.DOTALL`代替`re.M/re.MULTILINE`.

# ios - NSString 到 NSDate 转换的问题

> ID：14417276
> 
> 赞同：1
> 
> 时间：2013-01-19T18:12:28.217
> 
> 标签：ios, objective-c, cocoa-touch, nsstring, nsdate

我正在将 NSString 转换为 NSDate 并遇到最终转换中年份错误的问题。

我的输入日期是`2013-05-27 03:38:20 +0000`（在下面的代码中列为 lastEntry.date）

我的转换代码如下：

```
//Convert String to NSDate

NSDateFormatter *originalDateFormat = [[NSDateFormatter alloc] init];

[originalDateFormat setDateFormat:@"YYYY-MM-dd hh:mm:ss Z"];
[originalDateFormat setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];

NSDate *originalEndDate = [originalDateFormat dateFromString:lastEntry.date];

NSLog(@"Converted End Date = %@", [originalDateFormat stringFromDate:originalEndDate]); 
```

我得到的最终输出是：`Converted End Date = 2012-05-27 03:38:20 +0000`

我不知道为什么我在这次转换中损失了一年。到目前为止，在我的所有研究中，似乎这个转换过程中最难的部分是确保格式正确，并且由于我的输出日期格式正确，我觉得还有其他问题。我有什么遗漏或做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T18:42:01.897

将日期格式从 更改 `YYYY`为`yyyy`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:40:18.520

日期格式化程序相关的东西。

d: 1~31 (0 填充的日期) D: 1~366 (0 填充的日期)

e：1~7（0 填充星期几） E~EEE：周日/周一/周二/周三/周四/周五/周六 EEEE：周日/周一/周二/周三/周四/周五/周六

M/MM: 1~12 (0 填充月) MMM: 一月/二月/三月/四月/五月/六月/七月/八月/九月/十月/十一月/十二月 MMMM: 一月/二月/三月/四月/五月/六月/七月/八月/九月/十月/十一月/十二月

y/yyyy：（全年） yy/yyy：（2 位数年份） Y/YYYY：（全年，从一年中第一周的星期日开始） YY/YYY：（2 位数年份，从一年的第一周）

# google-maps - 获取FragmentManager时的GoogleMap FATAL EXCEPTION

> ID：14417285
> 
> 赞同：0
> 
> 时间：2013-01-19T18:13:26.700
> 
> 标签：google-maps, android-fragmentactivity, google-maps-android-api-2

我有一个完美运行的地图活动，但是当我添加标记时出现错误并且没有找到解决问题的任何方法。

> 公共类 MapActiv 扩展 FragmentActivity {

```
//private GoogleMap map;

@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_fragment);
    GoogleMap mGMap = ((MapFragment) 
            getFragmentManager().findFragmentById(R.id.map)).getMap();
    mGMap.addMarker(new MarkerOptions().position(new LatLng(46.24801, 26.76173))
    .title("Title").draggable(false));
} 
```

}

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"
    map:cameraTargetLat="46.24801"
    map:cameraTargetLng="26.76173"
    map:cameraTilt="30"
    map:cameraZoom="18"
    map:uiCompass="false"
    map:uiRotateGestures="true"
    map:uiScrollGestures="true"
    map:uiTiltGestures="true"
    map:uiZoomControls="false"
    map:uiZoomGestures="true"/> 
```

> 01-19 19:48:15.805：E/AndroidRuntime(16616)：致命异常：主要 01-19 19:48:15.805:E/AndroidRuntime(16616)：java.lang.NoSuchMethodError:com.ex.myschoolapp.MapActiv。 getFragmentManager 01-19 19:48:15.805: E/AndroidRuntime(16616): 在 com.ex.myschoolapp.MapActiv.onCreate(MapActiv.java:23) 01-19 19:48:15.805: E/AndroidRuntime(16616):在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 01-19 19:48:15.805: E/AndroidRuntime(16616): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623) 01-19 19 :48:15.805: E/AndroidRuntime(16616): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675) 01-19 19:48:15.805: E/AndroidRuntime(16616): 在 android.app.ActivityThread。访问 $1500(ActivityThread.java:121) 01-19 19:48:15.805: E/AndroidRuntime(16616): 在 android.app。ActivityThread$H.handleMessage(ActivityThread.java:943) 01-19 19:48:15.805: E/AndroidRuntime(16616): 在 android.os.Handler.dispatchMessage(Handler.java:99) 01-19 19:48: 15.805: E/AndroidRuntime(16616): 在 android.os.Looper.loop(Looper.java:123) 01-19 19:48:15.805: E/AndroidRuntime(16616): 在 android.app.ActivityThread.main(ActivityThread .java:3701) 01-19 19:48:15.805: E/AndroidRuntime(16616): 在 java.lang.reflect.Method.invokeNative(Native Method) 01-19 19:48:15.805: E/AndroidRuntime(16616) : 在 java.lang.reflect.Method.invoke(Method.java:507) 01-19 19:48:15.805: E/AndroidRuntime(16616): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit .java:862) 01-19 19:48:15.805: E/AndroidRuntime(16616): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620) 01-19 19:48:15.805: E /Android 运行时（16616）：在 dalvik.system.NativeStart.main（本机方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:53:32.570

试试这个（请记住，如果您使用的是 < 3.0 的版本，则必须使用 android 支持库）

```
import android.os.Bundle;
import android.support.v4.app.FragmentManager;
import android.view.LayoutInflater;
import android.view.View;

    import com.google.android.gms.maps.GoogleMap;
    import com.google.android.gms.maps.GoogleMap.InfoWindowAdapter;
    import com.google.android.gms.maps.GoogleMap.OnMapClickListener;
    import com.google.android.gms.maps.GoogleMap.OnMapLongClickListener;
    import com.google.android.gms.maps.GoogleMap.OnMarkerClickListener;
    import com.google.android.gms.maps.SupportMapFragment;
    import com.google.android.gms.maps.model.LatLng;
    import com.google.android.gms.maps.model.Marker;
    import com.google.android.gms.maps.model.MarkerOptions;
    public class MainActivity extends android.support.v4.app.FragmentActivity implements OnMapClickListener, OnMapLongClickListener{
        private GoogleMap myMap;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            FragmentManager myFragmentManager = getSupportFragmentManager();
            SupportMapFragment myMapFragment 
               = (SupportMapFragment)myFragmentManager.findFragmentById(R.id.map);
              myMap = myMapFragment.getMap();
              myMap.setOnMapLongClickListener(this);
              myMap.setOnMapClickListener(this);
              myMap.setInfoWindowAdapter(new MiInfoWindowAdapter());
              myMap.setOnMarkerClickListener(new OnMarkerClickListener() {

                @Override
                public boolean onMarkerClick(Marker marker) {
                    // TODO Auto-generated method stub
                    marker.hideInfoWindow();
                    return false;
                }
            });

        }

         @Override
         public void onMapLongClick(LatLng point) {

             myMap.addMarker(new MarkerOptions().position(point).title(point.toString()));
         }

        @Override
        public void onMapClick(LatLng point) {
            // TODO Auto-generated method stub
            myMap.addMarker(new MarkerOptions().position(point).title(point.toString()));

        }

        public class MiInfoWindowAdapter implements InfoWindowAdapter{

            @Override
            public View getInfoContents(Marker marker) {
                LayoutInflater inflater = getLayoutInflater().from(getApplicationContext());
                View view = inflater.inflate(R.layout.info, null);
                marker.setDraggable(true);
                return view;
            }

            @Override
            public View getInfoWindow(Marker marker) {
                LayoutInflater inflater = getLayoutInflater().from(getApplicationContext());
                View view = inflater.inflate(R.layout.info, null);
                marker.setDraggable(true);
                return view;
            }

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T06:25:42.443

当应用程序使用外部库时，可能会引发 NoSuchMethodError 错误。假设您的应用程序是使用特定版本的外部库编译和执行的。在某些时候，外部库发生了变化，一些方法被删除或更新。如果您的应用程序的类路径未更新并且您的代码未使用最新版本的外部库编译，那么在运行时您将调用一个不再存在的方法并且将引发 NoSuchMethodError 错误。

所以我更新了 Google Map API

来自：com.google.android.gms:play-services-maps:7.5.0

至：com.google.android.gms:play-services-maps:7.8.0

# javascript - D3：附加圈不起作用 - 一定是遗漏了一些东西

> ID：14417290
> 
> 赞同：0
> 
> 时间：2013-01-19T18:13:52.793
> 
> 标签：javascript, d3.js

编辑：这个问题可以简化，这里是：

我正在添加 tryign 以向 SVG 添加“圆圈”。事实证明，添加的圆圈被添加到 DOM 中，但没有添加到 svg 中，并且也不适合比例。

```
<svg width="400" height="400">
    <g class="x axis" transform="translate(0,200)" fill="none" stroke="black" stroke-width="1" font-size="10px">
    <g class="y axis" transform="translate(200,0)" fill="none" stroke="black" stroke-width="1" font-size="10px">
    <circle fill="#008000" r="10" cy="56" cx="56">
    <circle fill="#008000" r="10" cy="56" cx="128">
    <circle fill="#008000" r="10" cy="56" cx="164">
</svg>
<circle fill="#ffff00" r="10" cy="344" cx="340.4"></circle> 
```

我想要完成的可以在这里看到：http: [//jsfiddle.net/eNe3U/13/](http://jsfiddle.net/eNe3U/13/)

在jsfiddle中它可以工作！这就是我想要的！

它从索引 0 到 2 的数据数组中的 3 个绿色圆圈开始。然后使用另一个数据集（索引 1 到 3）对其进行更新。这就是删除第一个圆圈并在 D3 中添加最后一个圆圈的方式（对吗？）

1.  移动+变红

2.  添加一个黄色圆圈

3.  删除第一个（绿色）圆圈。完美的！

现在，当我尝试在我的视觉工作室项目中使用它时，添加黄色圆圈不起作用。我已经卡住了很长一段时间，也许我忽略了一些东西或者没有完全理解 D3 的方式。

所以，这是我的代码： http: [//pastecode.org/index.php/view/66925872](http://pastecode.org/index.php/view/66925872)

与小提琴中的几乎相同，只是分为 2 个功能。错误在哪里？

```
 circle.enter().append("circle") // .data(mydata2, function(d) { return d.i; })
      .transition().delay(1000).duration(500)
      .attr("cx", function (d) { return xScale(d.x); })
      .attr("cy", function (d) { return yScale(d.y); })
      .attr("r", 10).attr("fill", "yellow"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:06:03.927

circle.enter().... circle 不指向 svg circle 元素吗？不应该是 svg.enter().append("circle") 以便将圆圈附加到 svg 吗？

# mongodb - Mongodb 没有在 Ubuntu 上运行，不知道为什么

> ID：14417295
> 
> 赞同：0
> 
> 时间：2013-01-19T18:14:24.043
> 
> 标签：mongodb, ubuntu, ubuntu-12.04

问题是不言自明的 - 无法启动 MongoDB，并且任何地方都没有记录任何内容，因此我可以弄清楚发生了什么：

```
[10:10:23][root@my-server:~]$ start mongodb
mongodb stop/waiting
[10:10:28][root@my-server:~]$ ls /var/log/mongodb
[10:10:34][root@my-server:~]$ ls /var/lib/mongodb
[10:10:39][root@my-server:~]$ 
```

如您所见，mongodb 立即停止/等待，并且不会将任何内容记录到 /var/log/mongodb。/var/lib/mongodb 中也没有任何内容。两者都没有什么用处`/var/log/upstart`。我在哪里可以找到关于这个新贵在做什么的信息，以及为什么它似乎无法启动 MongoDB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:24:05.803

用另一个问题回答我自己的问题：[Mongo does not run when installed via mongodb-10gen package on Ubuntu 12.04](https://stackoverflow.com/questions/14417954/mongodb-10gen-package-on-ubuntu-12-04)。在这种情况下，该`mongodb-10gen`软件包似乎没有安装正确的可执行文件供 upstart 使用，并且当它期望存在的可执行文件不存在时，upstart 不会记录任何内容。所以我问了一个后续问题，关于 10gen 包的交易是什么。

# android - tabhost 的好例子

> ID：14417299
> 
> 赞同：2
> 
> 时间：2013-01-19T18:14:54.197
> 
> 标签：android, android-tabhost

我在哪里可以找到 TabHost 的好例子？我找到了很多示例，但所有示例都已弃用或不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T18:21:38.627

他们现在希望您使用带有标签的片段，而不是活动。这可能是由于性能原因。

[这个例子](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)看起来不错，虽然它比最低要求更复杂。您需要删除三分之二的代码，然后才能在剩下的基础上构建自己的代码。否则，它工作得很好，值得推荐。

# tfs - 敏捷环境中的 TFS 报告

> ID：14417312
> 
> 赞同：1
> 
> 时间：2013-01-19T18:16:38.893
> 
> 标签：tfs, report, agile

我刚刚在我的 TFS 2012 上设置了报告功能，并希望向其中添加报告，最好与我们的敏捷流程相关。

我记得在 TFS2008 的日子里，微软提供了一些开箱即用的报告。但是对于 2012 版本，默认情况下没有安装任何内容，我也无法在网络上找到任何可供下载的报告包。

是否没有任何报告可供下载（管理报告除外）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:57:12.823

我猜您正在使用 Scrum 流程模板，我猜您还谈论 SharePoint 仪表板报告，您不是在谈论报告服务器上存在的报告，如果这是真的.....

SharePoint 仪表板的 Scrum 流程模板不包含报告，但如果您使用 MSF-For-Agile 或 MSF-For-CMMI 创建团队项目，您会发现很多报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:22:15.543

我与 Urban Turtle 团队合作，我们目前正在开发一个直接嵌入 TFS 的敏捷仪表板。我们将在本月底（2 月）发布 Dashboard 的第一个版本。

它将包含许多有用的报告来跟踪您的敏捷项目。如果您想了解更多信息：[http ://urbanturtle.com/tfs-agile-dashboard/](http://urbanturtle.com/tfs-agile-dashboard/)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T05:58:29.517

尝试替代方案我不确定它是否会起作用。

采用

[http://tech.lds.org/wiki/LDS_.NET_Stack/TFS_Reports_using_Excel](http://tech.lds.org/wiki/LDS_.NET_Stack/TFS_Reports_using_Excel)

用于手动报告..

# delphi - 相当于 Delphi 中的 WebBrowser.Navigated 事件？

> ID：14417313
> 
> 赞同：1
> 
> 时间：2013-01-19T18:16:45.070
> 
> 标签：delphi, delphi-xe3

本机delphi（XE3）中的[WebBrowser.Navigated Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigated.aspx)等价于什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T18:25:20.530

将是[OnNavigateComplete2](http://docwiki.embarcadero.com/Libraries/XE2/en/SHDocVw.TWebBrowser.OnNavigateComplete2)：

> 编写 OnNavigateComplete2 事件处理程序以在 Web 浏览器成功导航到新资源时执行特定操作。该事件可以在文档完全下载之前发生，但是当它发生时，必须至少接收部分文档并创建文档的查看器。

[WebBrowser.Navigated 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigated.aspx)：

> 当 WebBrowser 控件导航到新文档时，处理 Navigated 事件以接收通知。当发生 Navigated 事件时，新文档已开始加载，这意味着您可以通过 Document、DocumentText 和 DocumentStream 属性访问加载的内容。处理 DocumentCompleted 事件以在 WebBrowser 控件完成加载新文档时接收通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T18:28:36.593

事件[`TWebBrowser.OnNavigateComplete2`](http://docwiki.embarcadero.com/Libraries/XE3/en/SHDocVw.TWebBrowser.OnNavigateComplete2)。

# doctrine - 如何在多对多关系中获取没有与 DQL 和 Doctrine 对应的链接实体的实体？

> ID：14417315
> 
> 赞同：1
> 
> 时间：2013-01-19T18:17:03.833
> 
> 标签：doctrine, many-to-many, dql

我建立了标准**的多对多**关系。实体 A 可以拥有多个实体 B，*反之亦然*。

我正在尝试获取没有任何相应实体 B 的所有实体 A 的列表。在 SQL 中，我将运行如下查询：

```
SELECT a.* FROM entity_a a LEFT JOIN a_b r ON r.AID = a.id WHERE r.BID IS NULL 
```

在此查询中，a_b 是链接表。

我正在尝试编写 DQL 语句（或使用其他方法）以获得相同的结果，但以下方法不起作用：

```
SELECT s FROM VendorMyBundle:EntityA s LEFT JOIN VendorMyOtherBundle:EntityB u WHERE u IS NULL 
```

我怎样才能实现我想要做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T14:54:50.543

首先，我必须强调，通常你应该加入实体的属性（即**s**），例如，而不是：

```
SELECT s FROM VendorMyBundle:EntityA s 
  LEFT JOIN VendorMyOtherBundle:EntityB u WHERE u IS NULL 
```

你应该有类似的东西：

```
SELECT s FROM VendorMyBundle:EntityA s 
  LEFT JOIN s.mylistofb u WHERE u IS NULL 
```

我假设在实体 A 中，您已将您的关系定义为：

```
class A{
    // ...

    /**
     * @ManyToMany(targetEntity="Vendor\MyBundle\Entity\EntityB")
     * @JoinTable(name="as_bs",
     *      joinColumns={@JoinColumn(name="a_id", referencedColumnName="id")},
     *      inverseJoinColumns={@JoinColumn(name="b_id", referencedColumnName="id", unique=true)}
     *      )
     **/
    private $mylistofb; 
```

这说明，如果查询尚未工作，请尝试以下操作：

```
SELECT s FROM VendorMyBundle:EntityA s
  WHERE SIZE(s.mylistofb) < 1 
```

它比前面的更简单，也来自[官方文档](http://docs.doctrine-project.org/en/2.1/reference/dql-doctrine-query-language.html)（即参见“电话号码示例”）。

# c# - 使用 numericUpDown 更改文本框值中的小数位

> ID：14417317
> 
> 赞同：0
> 
> 时间：2013-01-19T18:17:28.097
> 
> 标签：c#, winforms, textbox, numericupdown

使用此代码，我可以使用`numericUpDown`. 如果我`initialize` *`myDecimal`*可变，则此代码有效。但我需要将`decimal`place 修改为输入的值`textbox`。

换句话说`myDecimal = tbxConvertito.Text`。但在这种情况下，代码不起作用。

请检查此页面中的屏幕截图：[使用 numericUpDown 更改文本框中的小数位](https://stackoverflow.com/questions/14414138/change-decimal-place-in-textbox-using-numericupdown/14414478#comment20061224_14414478)

```
public partial class Form1 : Form
{
    public decimal myDecimal = 3755.25012345M;

    public Form1()
    {
        InitializeComponent();
        tbxConvertito.Text = myDecimal.ToString();
        numericUpDown1_ValueChanged(this, EventArgs.Empty);
    }

    private void numericUpDown1_ValueChanged(object sender, EventArgs e)
    {          
        int decimalPlace = (int)numericUpDown1.Value;
        string[] numbers = myDecimal.ToString().Split(new char[] { '.', ',' });
        string tmp = string.Empty;
        if (decimalPlace <= numbers[1].Length)
        {
            tmp = "," + numbers[1].Substring(0, decimalPlace);

            if (tmp.EndsWith(","))
                tmp = string.Empty;
        }
        else
            tmp = "," + numbers[1];

        tbxConvertito.Text = numbers[0] + tmp;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:44:19.603

您可以`Text`从`tbxConvertito`.

此外，当 TextBox 中的文本发生更改时，您必须调用`numericUpDown1_ValueChanged`以限制 NumericUpDown 中的设置。

```
 public partial class Form1 : Form
    {
        public decimal myDecimal = 3755.25012345M;

        public Form1()
        {
            InitializeComponent();
            tbxConvertito.Text = myDecimal.ToString();                        
            numericUpDown1_ValueChanged(this, EventArgs.Empty);
        }

        private void numericUpDown1_ValueChanged(object sender, EventArgs e)
        {          
            int decimalPlace = (int)numericUpDown1.Value;                        

            string[] numbers = tbxConvertito.Text.Split(new char[] { '.', ',' });

            string tmp = string.Empty;
            if (numbers.Length != 1)
            {
                if (decimalPlace <= numbers[1].Length)
                {
                    tmp = "," + numbers[1].Substring(0, decimalPlace);

                    if (tmp.EndsWith(","))
                        tmp = string.Empty;
                }
                else
                    tmp = "," + numbers[1];                
            }
            tbxConvertito.Text = numbers[0] + tmp; 
            tbxConvertito.Select(tbxConvertito.Text.Length, 0);
        }

        private void tbxConvertito_TextChanged(object sender, EventArgs e)
        {
            numericUpDown1_ValueChanged(this, EventArgs.Empty);
            decimal.TryParse(tbxConvertito.Text.Replace(',', '.'), out myDecimal);
        }
    } 
```

不丢失数据：

```
public partial class Form1 : Form
    {
        public decimal myDecimal = 0;

        public Form1()
        {
            InitializeComponent();
            // init value
            tbxConvertito.Text = myDecimal.ToString();
            numericUpDown1_ValueChanged(this, EventArgs.Empty);
        }

        private void numericUpDown1_ValueChanged(object sender, EventArgs e)
        {
            int decimalPlace = (int)numericUpDown1.Value;

            string[] numbers = myDecimal.ToString().Split(new char[] { '.', ',' });

            string tmp = string.Empty;
            if (numbers.Length != 1)
            {
                if (decimalPlace <= numbers[1].Length)
                {
                    tmp = "," + numbers[1].Substring(0, decimalPlace);

                    if (tmp.EndsWith(","))
                        tmp = string.Empty;
                }
                else
                    tmp = "," + numbers[1];
            }
            tbxConvertito.Text = numbers[0] + tmp;

            tbxConvertito.Select(tbxConvertito.Text.Length, 0);
        }

        private void tbxConvertito_TextChanged(object sender, EventArgs e)
        {
            if (keyValue == 188) return;
            if (keyPressed)
            {
                string stringValue = tbxConvertito.Text;
                if ((stringValue.Contains(',') && stringValue.Split(new char[] { ',' })[1].Length <= (int)numericUpDown1.Value) || !stringValue.Contains(','))
                    decimal.TryParse(tbxConvertito.Text.Replace(',', '.'), out myDecimal);
                keyPressed = false;
            }
            numericUpDown1_ValueChanged(this, EventArgs.Empty);
            Console.WriteLine("Displayed value: {0}", tbxConvertito.Text);
            Console.WriteLine("Actual value: {0}", myDecimal);
        }

        bool keyPressed = false;
        int keyValue;

        private void tbxConvertito_KeyDown(object sender, KeyEventArgs e)
        {
            keyValue = e.KeyValue;
            keyPressed = true;
        }
    } 
```

场景：

1.  [小数位数 = 0] 您可以输入例如 [1]、[1234]、[12345]
2.  [小数位数 = 1]
    如果您将 NumericUpDown 中的值更改为 0 ，您可以键入例如 [1,1]、[1234]、[12345,3]，
    如果您将 NumericUpDown 中的值更改为 1 再次显示的值将是 [1,1], [1234], [12345,3]
3.  [小数位数 = 1] 与步骤 2 相同的情况

现在我们不会丢失任何数据。只有当用户在我们的文本框中输入内容时，我们才会更新原始数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:56:18.747

试试看

```
 private void numericUpDown1_ValueChanged(object sender, EventArgs e)
    {
        //var ix = tbxConvertito.Text.IndexOf(',');
        decimal myDecimal = 0;
        bool IsDecimal = decimal.TryParse(tbxConvertito.Text, out myDecimal);
        if (IsDecimal)
        {
            decimal letDivide = myDecimal / 100;
            int decimalPlace = (int)numericUpDown1.Value;
            tbxConvertito.Text = letDivide.ToString().Replace(".", "");

            var index = tbxConvertito.Text.Length - decimalPlace;
            if (index > -1)
                tbxConvertito.Text = tbxConvertito.Text.Insert(index, ",");
            else
                tbxConvertito.Text = tbxConvertito.Text.Insert(1, ",");
        }
        else
        {
            tbxConvertito.Text = tbxConvertito.Text.ToString().Replace(",", "");
        }

    } 
```

# cuda - CUDA 新删除

> ID：14417318
> 
> 赞同：17
> 
> 时间：2013-01-19T18:17:41.200
> 
> 标签：cuda, dynamic-memory-allocation

如果从CUDA 4.2 中调用`__device__`或编码，有人可以清楚地解释 new 和 delete 关键字的行为吗？`__global__`

内存在哪里分配，如果它在设备上是本地的还是全局的？

它就我试图在 GPU 上创建神经网络的问题的上下文而言，我想要一个链接表示（就像一个链接列表，但每个神经元都存储一个链接的链接列表，其中包含权重和指向其他神经元的指针），我知道我可以`cudaMalloc`在内核启动之前分配使用，但我希望内核控制网络的创建方式和时间。

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-19T18:31:50.477

C++`new`并`delete`在设备堆内存上进行操作。该设备允许以这种方式分配一部分全局（即板载）内存。 `new`并`delete`以与[device`malloc`和`free`](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#dynamic-global-memory-allocation-and-operations).

[您可以使用运行时 API 调用](http://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__DEVICE.html#group__CUDART__DEVICE_1g05956f16eaa47ef3a4efee84563ccb7d)调整堆可用的设备全局内存量。

您可能还对[C++ 新建/删除示例代码感兴趣。](http://docs.nvidia.com/cuda/cuda-samples/index.html#newdelete)

这些功能需要 CC 2.0 或更高版本。

# android - Android 边框围绕 textview 仅在底座上，部分在左右墙壁上

> ID：14417321
> 
> 赞同：0
> 
> 时间：2013-01-19T18:18:17.707
> 
> 标签：android, android-layout

我需要在我的 android 文本视图的基础上设置一个边框，它应该看起来像倒计时 -1:29 计时器。我知道我可以创建一个图像并将其放在背景上，但我需要它是一个布局 xml 有点东西，以便它可以根据所有手机中的文本大小进行调整。

![出租车预订请求](../Images/b06c7e6c0fe627b7572cbee5da7143a2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:21:37.020

使用可以水平拉伸的 9-patch 图像并将其放置为背景。这就是你所需要的。

# django - Heroku 的 Django collectstatic 每次都推送到 S3

> ID：14417322
> 
> 赞同：11
> 
> 时间：2013-01-19T18:18:27.357
> 
> 标签：django, heroku, django-storage

我将 django-storages 用于 S3（和 S3BotoStorage）的静态文件。当我从本地机器收集静态时，行为与预期一致，仅将修改后的文件推送到 S3。这个过程需要 python-dateutils 1.5 来检查修改时间。

但是，在 Heroku 上执行相同操作会导致每个文件都被推送，尽管设置是相同的。然后我查看了 Heroku 本身文件的修改时间，看起来 os.stat(static_filename).st_mtime 与上次推送的时间相同。

这是预期的行为吗？即使 git 没有变化，heroku 是否会复制文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-25T16:57:40.717

尝试设置`DISABLE_COLLECTSTATIC=1`为您的应用程序的环境设置 - 这应该禁止它在每次推送时运行。

有关详细信息，请参阅本文 - [https://devcenter.heroku.com/articles/django-assets](https://devcenter.heroku.com/articles/django-assets)：

```
> Sometimes, you may not want Heroku to run collectstatic on your behalf.
> You can disable collectstatic by enabling user-env-compile as well:

$ heroku labs:enable user-env-compile
$ heroku config:set DISABLE_COLLECTSTATIC=1 
```

我发现简单地设置配置就可以了——不需要也启用`user-env-compile`——可能是这已经从实验室转移到生产中了？

注意部署由 Heroku python buildpack 管理，您可以在此处查看 - [https://github.com/heroku/heroku-buildpack-python/](https://github.com/heroku/heroku-buildpack-python/)

**编辑 1**

我刚刚对此进行了一系列测试，并且可以确认`DISABLE_COLLECTSTATIC`确实禁用了 collectstatic，无论`user-env-compile`设置如何 - 我认为现在在主干线中（但这是猜测）。似乎并不关心设置是什么 - 如果`DISABLE_COLLECTSTATIC`作为配置变量存在，则使用它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-03T17:25:34.510

我强烈建议将[collectfast 包](https://github.com/antonagestam/collectfast)用于任何到 s3 的 django 静态部署，无论是本地的还是来自您的 heroku 服务器。它忽略修改日期并利用 md5 哈希，s3 api 将非常快速地提供这些哈希，以及（可选）缓存以使您的静态部署缩放。我的静态部署从大约 10-15 分钟到不到 2 分钟，并且只部署了实际更改的文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-22T16:49:28.993

我刚刚遇到了同样的问题，并联系了 Heroku 的支持人员以了解发生了什么。我对他们的问题是

> 我在进行一些部署时遇到了一个时髦的问题。似乎在每次推送时，所有文件的修改日期都会更新为新的部署/git推送发生的时间。这是预期的行为吗？
> 
> 考虑到 Django 的`collectstatic`命令仅在评估文件是否应复制到静态资产的最终存储后端时检查文件的修改日期，这意味着在每次新推送时，首先从远程存储中删除所有文件（在此案例S3），然后重新上传。就带宽消耗和请求而言，这是一个非常缓慢和浪费的过程。

我今天从 Heroku 的支持人员之一“Caio”那里得到的答案是

> 嗨，这就是它目前的工作方式，是的。我正在将您的反馈发送给我们的运行时团队，看看我们是否可以使用原始日期打包文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-11T14:37:47.257

为什么不从本地机器运行 collectstatic？

```
python manage.py collectstatic --noinput --settings=settings.[prod] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T12:45:54.420

正如 Alen 所证实的，Heroku 在部署时会更改文件的修改日期。但是，Amazon S3 还有一个名为 etag 的属性，它是文件内容的 md5 哈希。可以使用它来检查文件是否已更改而不是修改日期，如在[此 Django 片段](http://djangosnippets.org/snippets/2889/)中实现的那样。

我拿了那个代码，打包它并修复了我发现的一些错误，并将它作为[django-s3-collectstatic](https://github.com/AGoodId/django-s3-collectstatic)放在 Github 上。它包括一个`fasts3collectstatic`只上传新文件的新管理命令。检查 Github 页面以获取安装说明。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T20:12:38.560

我同意这很烦人——你可以做几件事。我覆盖了 collectstatic 命令并将其连接到我的生产设置中。以下是我使用的命令：

```

```
from django.core.management.base import BaseCommand
class Command(BaseCommand):
    args = '< none >'
    help = "disables collectstatic cmd in contrib"
    def handle(self, *args, **kwargs):
        print 'collectstatic disabled' 
```

```

我把它保存在 mysite/disablecollectstatic/management/commands 然后在生产设置中：

```
INSTALLED_APPS += ('mysite.disablecollectstatic',) 
```

或者，您可以使用 Heroku 在实际调用命令之前先进行空运行的事实。如果它失败了，它将不会运行它，这意味着您可能会制造错误（例如，通过删除设置中的静态根目录），但这种方法让我感到紧张：

[https://devcenter.heroku.com/articles/django-assets#detection](https://devcenter.heroku.com/articles/django-assets#detection)

# jquery - 所有 jQuery Deferred/Promise 可能的用途

> ID：14417326
> 
> 赞同：1
> 
> 时间：2013-01-19T18:18:49.607
> 
> 标签：jquery, jquery-deferred, promise

我一直在玩`$.Deferred`and `promise()`，注意到几乎所有的 jQuery 方法都有一个`promise`方法，所以我想知道在哪里可以使用 promise。到目前为止，我知道它可以用于：

*   动画（`animate`, `fadeIn`, `fadeOut`, `fadeTo`, `hide`, `show`, 等）
*   AJAX ( `$.ajax`, `$.post`, `$.get`, `$.getJSON`, 等)
*   setTimeout 函数（`resolve`在其中一个函数中手动调用）
*   类似队列的实现（按顺序执行命令，可以动态插入其他回调）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:01:32.517

我查看了源代码。看起来你唯一错过的是`$.ready.promise()`. 这似乎将 JQuery 的主要就绪事件视为一个承诺，因此从一开始您可以编写：

```
$.ready.promise()
 .then(function() { return $.ajax({ ... }); })
 .then(function(data)
     {
         // do something with data
     })
 .fail(function()
     {
         // handle errors
     }); 
```

# haskell - 你如何在记事本++上编译和运行haskell

> ID：14417327
> 
> 赞同：6
> 
> 时间：2013-01-19T18:18:52.370
> 
> 标签：haskell, notepad++, ghc

你如何在记事本++上编译和运行 Haskell 我安装了插件 NppExec 然后按**F6** 我将 Haskell 文件保存到`C:\Users\Sam\Desktop\haskell files\new 3.hs`

因此，在按**F6**后的命令中，我尝试输入一些不同的内容：

```
C:\Users\Sam\Desktop\haskell files\new 3.hs`
ghc.exe new 3.hs
haskell new 
```

但我得到了这些回应：

```
C:\Users\Sam\Desktop\haskell files\new 3.hs
CreateProcess() failed with error code 2:
The system cannot find the file specified.

ghc.exe new 3.hs
Process started >>>
target `new' is not a module name or a source file
<<< Process finished.

haskell new 3
CreateProcess() failed with error code 2:
The system cannot find the file specified.

================ READY ================ 
```

在记事本++上的haskell文件中编译和执行的正确方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-19T19:01:28.190

您需要将 NppExec 设置为在当前目录中工作，因此在 Plugins、NppExec 中，勾选`Follow $(CURRENT_DIRECTORY)`。

`ghc new3.hs`按 F6 时使用该命令（文件名中没有空格）。

![关注当前目录](../Images/d2d23f125aa73fc53090fc5aaad4c543.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-20T06:46:14.940

如果您将 Haskell 与堆栈一起使用，我发现了一种使用 NppExec 快速运行事物的好方法。这是一个比看起来更简单的过程，一旦你这样做了，你就可以开始了：

假设您在名为的文件中有这样的文件`yourFileName.hs`：

```
main :: IO ()
main = putStrLn "Hello world!" 
```

1.  按 F6 开始 NppExec。（见下文注 1。）

2.  将以下内容粘贴到窗口中。

```
cd "$(FULL_CURRENT_PATH)"
stack ghci
// This is a comment you can delete. Note 2 below. 
```

（见下文注 3。）

3.  按下 OK 按钮后，Notepad++ 控制台将运行 Haskell 解释器。

4.  现在，再次按 F6。将弹出一个警告菜单。

5.  在菜单中输入：`:cmd return $ unlines [":l yourFileName", ":main"]`然后按 ENTER。该文件将执行。按 F6+ENTER 将再次加载并运行该文件。下次打开 Notepad++ 时，它仍然存在。每当您想使用新文件时，您`yourFileName`当然必须进行更改。

    说明：`:cmd return " . . . "`允许您将一个字符串作为多个 ghci 命令执行，以 . 分隔`\n`。`unlines`获取一个字符串列表并将它们与`\n`. 如果您不了解`$`，您将很快了解它，因为它是基本 Haskell 的一部分。

    如果您的文件中没有 main 函数，请改用`:cmd return $ unlines [":l yourFileName"]`.

* * *

注 1：为方便起见，我使用 将`Settings > ShortCutMapper > Plugin Commands`Execute 从 F6 更改为 F1。

注意 2：如果你以这种方式运行多种语言（比如 Lisp？），那么你可以`// This is a comment...`用 just 替换该行，`// :cmd return $ unlines [":l yourFileName", ":main"]`以便以后切换回 Haskell 时使用。

注意 3：不是粘贴`cd "$(FULL_CURRENT_PATH)" stack ghci`到 NppExec 窗口，一个更简单的方法是粘贴`stack runghc "$(FULL_CURRENT_PATH)"`，不需要做任何其他事情。但是我发现在这种情况下，控制台需要更长的时间来加载和运行文件，所以上面的方法就是我使用的方法。

# mysql - Innerjoins 的一对多关系？

> ID：14417328
> 
> 赞同：0
> 
> 时间：2013-01-19T18:18:54.863
> 
> 标签：mysql

在 PHP 查询中隐含 INNERJOIN 之前是否需要建立数据库关系？

此外，当我通过 PMA 导出数据库时；我已经创建的关系不会被导出。所以我不得不在每次导入时重新建立我的关系。

是否可以通过关系导出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:20:55.713

No. 优化时首选关系，但关系不需要使用`JOIN`.

导出数据库时，请确保使用**自定义 - 显示所有可能的选项**方法。您可能会错过不包含这些约束的选项。另一个可能的原因是如果您没有使用**InnoDb**作为表引擎，否则这些约束将被**MyISAM**丢弃。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/296730/disappearing-foreign-keys-in-phpmyadmin)。

# php - 无法使用 cronjob 触发 PHP Codeigniter

> ID：14417330
> 
> 赞同：1
> 
> 时间：2013-01-19T18:18:57.890
> 
> 标签：php, mysql, codeigniter, cron

我在 Codeigniter 网站上有一个电子邮件解析脚本，我想每天用 cronjob 触发它。我对 cronjobs 或远程服务器上的命令行没有太多经验。

我在 mysite.com/public_html/application/controllers/cronJobs 有一个 cronJobs 控制器。其中有一个 parseMail 方法。我还使用 mod_rewrite 从 URLS 中删除 index.php。

当我通过浏览器在 MYSITE.com/cronJobs/parseMail 上“正常”点击控制器时，parseMail 方法**确实有效。**有一个数据库插入关闭。

但是要使用 cronjob 触发它，我已经尝试过 >>>

```
wget http://MYSITE.com/cronJobs/parseMail 
```

我确实收到了一封通知电子邮件.. 但我不知道如何解释它。是找剧本吗？有没有错误？无论如何， parseMail 不会触发。

```
--2013-01-19 12:00:02-- http://MYSITE.com/cronJobs/parseMail
Resolving MYSITE.com... xx.xx.xx.xxx
Connecting to MYSITE.com|xx.xx.xx.xxx|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 0 [text/html]
Saving to: `parseMail.203'

0K 0.00 =0s

2013-01-19 12:00:03 (0.00 B/s) - `parseMail.203' saved [0/0] 
```

我也试过

```
-q wget http://MYSITE.com/cronJobs/parseMail 
```

并收到“/bin/sh: get: command not found”

然后我也尝试了这个变化..

```
/usr/local/bin/php -q /public_html/index.php cronJobs parseMail
/usr/local/bin/php -q /public_html/ cronJobs parseMail
/usr/local/bin/php -q home/myusername/public_html/index.php cronJobs parseMail
/usr/local/bin/php -q home/myusername/public_html/ cronJobs parseMail 
```

使用这些方法，我什至无法击中控制器。我的电子邮件通知只是说“无法打开输入文件”。

我只是对这些错误中的任何一个都不熟悉..所以我不知道如何磨练解决方案。

谁能给我任何提示如何前进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T21:19:38.970

**解决了**

经过多次谷歌搜索，我找到了适合我的解决方案。这是我使用的（我在第一次尝试中非常接近......只是没有使用绝对路径。然后当我开始使用下面评论中的一些建议时，php路径不同，我做到了不注意）

这是正确的版本。

```
/usr/local/bin/php /home/myusername/public_html/index.php cronJobs parseMail 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T18:38:29.253

你的路径都不是真正的路径。所有都是无效的（`/public_html`个）或相对的（`home/myusername`个）。以下应该做。

```
/usr/bin/env php  /home/myusername/public_html/index.php cronJobs parseMail 
```

您可能需要先将目录更改为文档根目录。在这种情况下使用这个，

```
(cd /home/myusername/public_html/ &&  /usr/bin/env php index.php cronJobs parseMail) 
```

# asp.net-mvc - 位置文本框查找 MVC

> ID：14417331
> 
> 赞同：0
> 
> 时间：2013-01-19T18:18:59.017
> 
> 标签：asp.net-mvc

我正在寻找允许用户在文本框中键入位置的服务/控件。该控件将以用户可以从中选择的下拉样式提供建议列表。

理想情况下，会有一个回调提供所选位置的 gps 位置。

这是针对 .net MVC 应用程序的。

有人知道这样的控件吗？我认为 iphone 上的新谷歌地图应用程序使用了与此类似的系统。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:17:58.593

我发现这个 jquery 插件很有效....

[http://ubilabs.github.com/geocomplete/](http://ubilabs.github.com/geocomplete/)

# c++ - 如何更改 QLineEdit 中部分文本的颜色？

> ID：14417333
> 
> 赞同：23
> 
> 时间：2013-01-19T18:19:27.673
> 
> 标签：c++, qt, user-interface

我想为 QLineEdit 中编写的文本添加一些语法突出显示，但它不支持富文本格式，我无法将 QlineEdit 更改为其他内容，所以我应该找到如何在此小部件中设置文本颜色。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-20T11:26:17.647

刚刚找到了一个巧妙的技巧。

```
static void setLineEditTextFormat(QLineEdit* lineEdit, const QList<QTextLayout::FormatRange>& formats)
{
    if(!lineEdit)
        return;

    QList<QInputMethodEvent::Attribute> attributes;
    foreach(const QTextLayout::FormatRange& fr, formats)
    {
        QInputMethodEvent::AttributeType type = QInputMethodEvent::TextFormat;
        int start = fr.start - lineEdit->cursorPosition();
        int length = fr.length;
        QVariant value = fr.format;
        attributes.append(QInputMethodEvent::Attribute(type, start, length, value));
    }
    QInputMethodEvent event(QString(), attributes);
    QCoreApplication::sendEvent(lineEdit, &event);
}

static void clearLineEditTextFormat(QLineEdit* lineEdit)
{
    setLineEditTextFormat(lineEdit, QList<QTextLayout::FormatRange>());
}

// Usage example:
QLineEdit* lineEdit = new QLineEdit;
lineEdit->setText(tr("Task Tracker - Entry"));

QList<QTextLayout::FormatRange> formats;

QTextCharFormat f;

f.setFontWeight(QFont::Bold);
QTextLayout::FormatRange fr_task;
fr_task.start = 0;
fr_task.length = 4;
fr_task.format = f;

f.setFontItalic(true);
f.setBackground(Qt::darkYellow);
f.setForeground(Qt::white);
QTextLayout::FormatRange fr_tracker;
fr_tracker.start = 5;
fr_tracker.length = 7;
fr_tracker.format = f;

formats.append(fr_task);
formats.append(fr_tracker);

setLineEditTextFormat(lineEdit, formats); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T04:36:35.960

您可以使用[样式表](https://doc.qt.io/Qt-5/stylesheet-reference.html)更改颜色。

```
 QLineEdit* myLineEdit = new QLineEdit("Whatever");

 //for whatever case you want to change the color
 if(syntax_needs_to_highlighted)
      myLineEdit->setStyleSheet("QLineEdit#myLineEdit{color:blue}"); 
```

您可能要考虑`QTextBrowser`在这种情况下使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T16:27:51.953

您可以像这样更改文本的颜色：

```
QLineEdit *line = new QLineEdit();
line->setText("this is a test");
line->setStyleSheet("foreground-color: blue;"); 
```

如果它不起作用，请将最后一行替换为以下内容：

```
line->setStyleSheet("color: blue;"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-17T23:42:09.423

`QLabel`我可以通过在 a上覆盖 a`QLineEdit`然后将行的文本颜色编辑为白色来实现这一点。当`textEdited`信号发出时，用它来更新`QLabel`. `QLabel`接受富文本，因此您可以处理 中的文本并将`QLineEdit`关键字替换为所需的 HTML，以便以您想要的方式显示文本。我确定您可以修改代码以更改当前选择的文本颜色。

```
class LabelEditPair(QLineEdit):
    """
    QLineEdit that changes the color of the word 'blue' to blue and
    the changes the font weight of the word 'bold' to bold.
    """
    def __init__(self):
        super().__init__()

        self.label = QLabel("starting out")
        self.label.setParent(self)
        self.label.move(3, 0)
        self.label.setAttribute(Qt.WA_TransparentForMouseEvents)
        self.setStyleSheet("QLineEdit{color: white}")

        self.textEdited.connect(self.text_edited)

    def resizeEvent(self, event):
        self.label.setFixedHeight(self.height())
        self.label.setFixedWidth(self.width())
        super().resizeEvent(event)

    def text_edited(self, text):
        text = text.replace("blue", "<span style='color: blue'>blue</span>")
        text = text.replace("bold", "<span style='font-weight: bold'>bold</span>")
        self.label.setText(text) 
```

[![在此处输入图像描述](../Images/acc33d3f128cadc1f758821ef71e16f3.png)](https://i.stack.imgur.com/t1fTj.png)

### 编辑

前面的示例在文本从小`QLineEdit`部件溢出的情况下效果不佳。这是一个更全面的小部件，它使用相同的想法，但不是制作`QLineEdit`小部件的子类，而是`QFrame`使用 a`QLineEdit`和 two的子类`QLabels`，一个在光标之前，一个在光标之后。该小部件将正则表达式匹配替换为 HTML 以更改这些字符的样式。

```
class LabelEditPair(QFrame):
    """
    QLineEdit that changes the color of the word 'blue' to blue and
    the changes the font weight of the word 'bold' to bold.
    """
    def __init__(self, initial_text: str):
        super().__init__()

        self.stylized_regex: List[Tuple[str, str]] = []

        self.setFixedHeight(22)
        self.setObjectName("frame")
        self.setStyleSheet("QFrame#frame{background-color: white; border: 1px solid gray}"
                           "QFrame:hover#frame{border: 1px solid black}"
                           "QFrame:selected#frame{border: 1px solid blue}")
        self.setFrameStyle(QFrame.Box)
        self.line_edit = QLineEdit(initial_text)
        self.line_edit.setParent(self)
        self.line_edit.move(0, 2)
        self.line_edit.setStyleSheet("border: 0px solid white; background-color:transparent")

        self.line_edit.setFixedWidth(2**16)

        self.left_label = QLabel()
        self.left_label.setParent(self.line_edit)
        self.left_label.move(1, 1)
        self.left_label.setAlignment(Qt.AlignRight)
        self.left_label.setAttribute(Qt.WA_TransparentForMouseEvents)

        self.right_label = QLabel()
        self.right_label. setParent(self.line_edit)
        self.right_label.move(5, 1)
        self.right_label.setAlignment(Qt.AlignLeft)
        self.right_label.setAttribute(Qt.WA_TransparentForMouseEvents)
        self.right_label.setFixedWidth(2**16)
        self.offset = 0

        self.line_edit.textEdited.connect(self.text_edited)
        self.line_edit.cursorPositionChanged.connect(self.apply_shift)
        self.line_edit.selectionChanged.connect(self.set_text_to_update)
        self.update_text_needed = True

        self.placeholder = ""
        self.color = (0, 0, 0)

    def text(self):
        return self.line_edit.text()

    def setReadOnly(self, read_only: bool):
        self.line_edit.setReadOnly(read_only)
        self.line_edit.setAttribute(Qt.WA_TransparentForMouseEvents, read_only)
        self.line_edit.end(False)

    def set_placeholder_text(self, text: str):
        self.placeholder = text

    def set_text_color(self, color: Tuple[int, int, int]):
        self.color = color

    def set_text_to_update(self):
        self.update_text_needed = True

    def text_edited(self, text: str):
        if len(text) == 0:
            self.left_label.setText(self.placeholder)
            self.left_label.setStyleSheet("color: gray")
            return
        self.left_label.setStyleSheet(f"color: rbg{self.color}")
        new = self.line_edit.cursorPosition()
        left_text = text[:new]
        right_text = text[new:]
        self.left_label.setText(left_text)
        self.right_label.setText(right_text)
        for style, regex in self.stylized_regex:
            matches = findall(regex, left_text)
            for match in matches:
                left_text = left_text.replace(match, f"<span style='{style}'>{match}</span>")
                self.left_label.setText(left_text)
            matches_right = findall(regex, right_text)
            for match in matches_right:
                right_text = right_text.replace(match, f"<span style='{style}'>{match}</span>")
                self.right_label.setText(right_text)
        self.update_text_needed = False

    def add_style_for_regex(self, style: str, regex: str):
        self.stylized_regex.append((style, regex))

    def apply_shift(self, old=None, new=None):
        text = self.line_edit.text()
        rect = self.line_edit.cursorRect()
        x_pos = rect.x()
        if x_pos + self.offset > self.width() - 8 and new == old + 1:
            self.offset = -1*(x_pos - (self.width()-8))
        elif new + 1 == old and x_pos + self.offset < self.width() * 1/2:
            self.offset += 5
        self.offset = min(0, self.offset)
        if len(text) == 0:
            self.offset = 0
        self.line_edit.move(self.offset, 2)
        self.left_label.setFixedWidth(x_pos + 4)
        self.right_label.move(x_pos + 5, 1)
        if self.update_text_needed:
            self.text_edited(text=text)
        self.update_text_needed = True 
```

###### 示例用法

```
self.color_edit = LabelEditPair("")
self.color_edit.add_style_for_regex("color: blue", "(?:HI|HELLO)")
main_layout.addWidget(self.color_edit) 
```

[![在此处输入图像描述](../Images/bef51b963f4ffd600f2ece612965c117.png)](https://i.stack.imgur.com/9EGNZ.png)

# go - 使用子/子包构建包结构

> ID：14417334
> 
> 赞同：6
> 
> 时间：2013-01-19T18:19:35.287
> 
> 标签：go, package

我正在尝试在 Go 中制作一个简单的计算器。我正在以这样一种方式设计它，即我可以先构建一个命令行界面并轻松地在 GUI 界面中交换。项目位置是`$GOPATH/src/gocalc`（以下所有路径均相对于项目位置）。命令行界面逻辑存储在一个文件中`gocalc.go`。计算器逻辑存储在文件`calcfns/calcfns.go`和`operations/operations.go`. 所有文件的包名与其文件名（无扩展名）相同，但主程序 ,`gocalc.go`位于`package main`

`calcfns.go``operations.go`通过进口`import "gocalc/operations"`; 通过`gocalc.go`进口`calcfns.go``import "gocalc/calcfns"`

总结一下：

*   `$GOPATH/src/gocalc/`
    *   `gocalc.go`
        *   `package main`
        *   `import "gocalc/calcfns"`
    *   `calcfns/`
        *   `calcfns.go`
            *   `package calcfns`
            *   `import "gocalc/operations"`
    *   `operations/`
        *   `operations.go`
            *   `package operations`

当我尝试`go build operations`（从项目目录）时，我得到响应：`can't load package: package operations: import "operations": cannot find package` 当我尝试`go build gocalc/operations`时，我得到`can't load package: package gocalc/operations: import "gocalc/operations": cannot find package` 当我尝试`go build operations/operations.go`时，它编译得很好

当我尝试`go build calcfns`or`go build gocalc/calcfns`时，我收到`can't load package...`消息，类似于操作中的消息；但是，当我尝试构建`calcfns/calcfns.go`它时，import 语句会阻塞：`import "gocalc/operations": cannot find package`

最后，当我`go build .`从项目目录尝试时，它与上一段类似：`import "gocalc/calcfns": cannot find package`

`go build`我应该如何以不会失败的方式构建我的子包和/或导入语句？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T18:46:38.690

愚蠢的是，我忘记导出我的 GOPATH 变量，所以`go env`显示`""`为`GOPATH`. （感谢 jnml 建议打印`go env`；+1）。

完成此操作（并将主程序移动到其自己的文件夹`{project-dir}/gocalc/gocalc.go`）后，我可以通过`go install gocalc/gocalc`.

故事的寓意，请确保您键入`export GOPATH=...`而不是仅`GOPATH=...`在设置 $GOPATH 环境变量时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T18:28:30.893

请尝试添加输出`$ go env`以提供更多线索。否则，目录结构和（**显示**的）导入语句看起来都不错。

然而这句话

> 当我尝试进行构建操作（从项目目录）时，我得到响应：无法加载包：包操作：导入“操作”：找不到包

听起来很奇怪。这似乎表明你有

```
package operations

import "operations" 
```

在“operations.go”中，那将是罪魁祸首......？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-21T17:06:30.520

# 很容易：

假设我有一个名为：`golang-playground`

1.  `GOPATH/src/`在我的情况下，将您的根目录放在下面`GOPATH=~/go/src`（运行命令`go env`以获取您的`GOPATH`）。所以我的应用程序的完整路径是`~/go/src/golang-playground` [![在此处输入图像描述](../Images/148795527f6abd42eb4bec3de8e2382d.png)](https://i.stack.imgur.com/SO8YR.png)

2.  假设您想`Index()`在文件中使用函数：`router.go`来自我的`main.go`文件（当然位于根目录上）。所以在 main.go 中：

    ```
    import (
        ...
        "golang-playground/router"
    )

    func main() {
        foo.Bar("/", router.Index) // Notice caps means its public outside of file
    } 
    ```

# c# - C# 缩短分配给重置值的按钮

> ID：14417336
> 
> 赞同：0
> 
> 时间：2013-01-19T18:19:40.293
> 
> 标签：c#, wpf, visual-studio-2012

我刚刚开始编程，这意味着我是新手……我使用 else if 语句制作了一个井字游戏。

下面的代码将在我的游戏中重置某些值，我确定有但我找不到答案 - 如何缩短此代码块？

```
 btn1.Enabled = true;
        btn2.Enabled = true;
        btn3.Enabled = true;
        btn4.Enabled = true;
        btn5.Enabled = true;
        btn6.Enabled = true;
        btn7.Enabled = true;
        btn8.Enabled = true;
        btn9.Enabled = true;

        btn1.Text = "";
        btn2.Text = "";
        btn3.Text = "";
        btn4.Text = "";
        btn5.Text = "";
        btn6.Text = "";
        btn7.Text = "";
        btn8.Text = "";
        btn9.Text = "";

        btn1.BackColor = default(Color);
        btn2.BackColor = default(Color);
        btn3.BackColor = default(Color);
        btn4.BackColor = default(Color);
        btn5.BackColor = default(Color);
        btn6.BackColor = default(Color);
        btn7.BackColor = default(Color);
        btn8.BackColor = default(Color);
        btn9.BackColor = default(Color); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T18:25:16.287

你应该使用一个**[数组](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx)**，或者更好的是，一个**[通用的列表](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)**来保存你的所有按钮。

例如：

```
 List<Button> buttonList = new List<Button>();

 // Add buttons to list...
 buttonList.Add(btn1);
 buttonList.Add(btn2);
 ... 
```

然后，您可以像这样迭代列表：

```
foreach (Button btn in buttonList)
{
     btn.Text = "";
     btn.BackColor = default(Color);
} 
```

上面的代码将在列表中的所有按钮上运行，并为每个按钮清除文本并设置背景颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T18:27:44.420

这应该使用数组来完成，而不是 btn1，您将拥有 btn[]，然后您可以使用 for 循环访问它们：

```
for (i=0; i<9; i++) {
btn[i].Enabled = true;
btn[i].Text = "";
btn[i].Color = default(Color);
} 
```

这 5 行代码包含了您上面的所有代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T18:48:37.957

重置控制中的所有按钮

```
foreach(var item in this.Controls)
{
    if (item is Button)
    {
        item.Enabled = true;
        item.Text = "";
        item.BackColor = default(Color);
    }
} 
```

# ios - 线程安全只读属性

> ID：14417337
> 
> 赞同：0
> 
> 时间：2013-01-19T18:19:43.310
> 
> 标签：ios, thread-safety, readonly

我有一个家长班和`Networking`两个孩子。网络有公共和. 我需要从子类中访问它们，但是以线程安全的方式，因为操作将在单独的线程中进行。`Upload : Networking``Download : Networking``@property (readonly) BOOL isExecuting;``@property (readonly) BOOL isDone;`

什么是优雅的实现方式？谢谢！

编辑：所以我得到它正确吗？这是 Upload.m 的示例

```
#import "Upload.h"
#import "Networking.h"

@interface Upload ()

@property (assign) BOOL isExecuting;

@end

@implementation Upload

- (void) setIsExecuting:(BOOL)isExecuting{
    @synchronized (self) {
        _isExecuting = isExecuting;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:47:56.620

由于您的属性是只读的，因此没有线程会继续更改其值。所以在任何线程的任何时候，你都会得到相同的值。

因此无需担心。

# c++ - 如何将可以是任何类型函数的参数传递给方法？

> ID：14417338
> 
> 赞同：-1
> 
> 时间：2013-01-19T18:19:46.133
> 
> 标签：c++

我必须创建一个库作为在 linux 终端上实现类似菜单的功能的任务。因此，我必须为每个子菜单启用一个位置，使其成为另一个子菜单或对某些功能的调用。

我想知道如何实现这样的调用。由于它是一个库，它可以用于十几种不同类型的函数，采用不同数量和类型的参数。

如何实现这样的方法调用另一个函数，这些函数不会假设任何关于这些函数的任何东西都可以调用它们？我应该以某种方式使用模板还是有另一种方法？或者我应该以另一种方式实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:42:23.623

您可以使用具有虚拟方法的对象来执行此操作。然后应用程序可以决定将哪些参数放入回调对象中。

```
class MenuItem;

// Callback Interface
struct MenuCallback
{
    virtual void activated(MenuItem* sender) = 0;
    virtual ~MenuCallback(){}
};

// Application Code
struct ConcretMenuCallback: MenuCallback
{
    ConcretMenuCallback(int parameter1);

    void activated(MenuItem* sender)
    {
        // do something with the data stored in this object
    }
};

// Example Item
class MenuItem
{
    MenuItem(MenuItem*parent, std::string caption, MenuCallback* cb);
    void notify();
}

MenuItem::notify()
{
    // call the callback-Object
    if(m_callback)
        m_callback->activated(this);
} 
```

# android - Android 2.3 上的 manageQuery 错误：java.lang.RuntimeException

> ID：14417339
> 
> 赞同：0
> 
> 时间：2013-01-19T18:19:51.410
> 
> 标签：android, android-camera

我有一个只发生在某些手机上的错误。例如，它发生在 android 2.3 版本的手机中（在我的情况下是三星 Galaxy mini）。在我的设备中，它运行良好（三星 Galaxy S2 Android v 4.0.4）当我拍照并尝试将其用于布局时，我在使用 manageQuery 的行中出现错误。这是我正在使用的代码：

```
 public String getRealPathFromURI(Uri contentUri) {
    String[] proj = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(contentUri, proj, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

private Bitmap decodeFile(File f){
    try {
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //The new size we want to scale to
        final int REQUIRED_SIZE=70;

        //Find the correct scale value. It should be the power of 2.
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=(int) 0.9;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) { 
    super.onActivityResult(requestCode, resultCode, data); 
    switch(requestCode) { 
    case ChooseImageInputDialog.ACTIVITY_SELECT_PHOTO:
        if(resultCode == RESULT_OK){  
            Log.d("resultcode pea pick", "result ok");
            Uri selectedImageUri=data.getData();
            actualPath=getRealPathFromURI(selectedImageUri);
            File file=new File(actualPath);
            bmp=decodeFile(file); //this is new bitmap which you can use for your purpose 

            ByteArrayOutputStream os = new ByteArrayOutputStream();
            //bmp.compress(Bitmap.CompressFormat.PNG, 65, os);
            photoByteArray = os.toByteArray();
            ivPhoto.setImageBitmap(bmp);
        }else{
            Log.d("resultcode pea pick", "result not ok");
        }
        break;
    case ChooseImageInputDialog.ACTIVITY_CAMERA_PHOTO:
        if(resultCode == RESULT_OK){
            Bundle extras = data.getExtras();
            //bmp = (Bitmap)extras.get("data");
            Uri selectedImageUri=data.getData();
            actualPath=getRealPathFromURI(selectedImageUri);
            File file=new File(actualPath);
            bmp=decodeFile(file);
            ByteArrayOutputStream os = new ByteArrayOutputStream();
            //bmp.compress(Bitmap.CompressFormat.PNG, 65, os);
            photoByteArray = os.toByteArray();
            ivPhoto.setImageBitmap(bmp);
            actualPath = getRealPathFromURI(data.getData());
            Log.d("take pic actual path", actualPath);

        }
        break;
    } 
```

错误如下：

```
 01-19 19:16:57.389: E/AndroidRuntime(3024): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1111, result=-1, data=Intent { act=inline-data (has extras) }} to activity {com.play.playwithme/com.play.playwithme.PhotoEditingActivity}: java.lang.NullPointerException
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2536)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2578)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at android.app.ActivityThread.access$2000(ActivityThread.java:117)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:965)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at android.os.Handler.dispatchMessage(Handler.java:99)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at android.os.Looper.loop(Looper.java:130)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at android.app.ActivityThread.main(ActivityThread.java:3687)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at java.lang.reflect.Method.invokeNative(Native Method)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at java.lang.reflect.Method.invoke(Method.java:507)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at dalvik.system.NativeStart.main(Native Method)
        01-19 19:16:57.389: E/AndroidRuntime(3024): Caused by: java.lang.NullPointerException
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at android.content.ContentResolver.acquireProvider(ContentResolver.java:743)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at android.content.ContentResolver.query(ContentResolver.java:256)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at android.app.Activity.managedQuery(Activity.java:1550)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at com.play.playwithme.PhotoEditingActivity.getRealPathFromURI(PhotoEditingActivity.java:133)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at com.play.playwithme.PhotoEditingActivity.onActivityResult(PhotoEditingActivity.java:193)
        01-19 19:16:57.389: E/AndroidRuntime(3024):     at android.app.Activity.dispatchActivityResult(Activity.java:3908) 
```

# php - 为什么我不能在 mysqli_multi_query 之后运行 mysqli_query？

> ID：14417341
> 
> 赞同：-1
> 
> 时间：2013-01-19T18:19:58.837
> 
> 标签：php, mysqli, mysqli-multi-query

我有一个问题`mysqli_multi_query`。我试图执行代码，但`mysqli_query`之后 `mysqli_multi_query`不起作用。`$query1`更新值并且没有返回结果。

```
if(mysqli_multi_query($con,$query1))
{
    $query2="insert into tablename values (1,2,3);";
    mysqli_query($con,$query2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-31T07:37:55.850

因为你必须先用`mysqli_next_result()`和别人。见： http: [//php.net/manual/es/mysqli.multi-query.php#102837](http://php.net/manual/es/mysqli.multi-query.php#102837)

# php - xml属性名称错误？

> ID：14417344
> 
> 赞同：1
> 
> 时间：2013-01-19T18:20:39.320
> 
> 标签：php, xml, xml-parsing

我试图解析一个包含基本属性的简单 xml 字符串

```
<hash>
<engine-type>
I4 DI
</engine-type>
<body-style>
SAV 4D
</body-style>
<year>
2012
</year>
</hash> 
```

当我试图打印出 xdebug 给出的这 2 个属性 engine-type 和 body-style 时，问题发生了

```
$result = simplexml_load_string($query);
$enginetype = $result->engine-type;
$bodystyle = $result->body-style ;
echo $enginetype .'<br />'. $bodystyle ; 
```

这些是来自xdebug的错误

```
Notice: Use of undefined constant type - assumed 'type'
Notice: Use of undefined constant style - assumed 'style 
```

当我尝试将它们保存到我的数据库中时，
其他属性值 0 就可以正常工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T18:27:30.943

使用[curly complex 语法](http://php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)来表示带有特殊字符的标识符。

```
$enginetype = $result->{'engine-type'};
$bodystyle = $result->{'body-style'} ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T18:37:01.300

`engine-type`不是 PHP 中的有效标签名称，因此不能直接用于引用对象的属性。

PHP 允许使用花括号语法的“变量属性”，它接受属性名称作为某个表达式的结果：该表达式可以像字符串一样简单。

```
$result->{'engine-type'}; 
```

这允许人们动态地构造属性名称（在这种情况下不需要），例如

```
$var = 'bar';
$result->{'foo-'.$var}; 
```

我们有一个这种语法的示例，处理与问题中完全相同的场景，目前在[SimpleXML Basic Usage](http://php.net/simplexml.examples-basic)手册页上作为**示例 #3提供。**

> **示例 #3 获取`<line>`**
> 
> ```
> <?php
> include 'example.php';
> 
> $movies = new SimpleXMLElement($xmlstr);
> 
> echo $movies->movie->{'great-lines'}->line;
> ?> 
> ```
> 
> 上面的示例将输出：
> 
> > PHP 解决了我所有的网络问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T18:26:58.243

问题是您的表达式被解释为 variable `$result->engine`minus constant `type`。试试这个：

`var_dump($result->{'engine-type'});`

# ios - 如何将 UISearchbar 和 Searchdisplaycontroller 与多个 tableview 一起使用？

> ID：14417349
> 
> 赞同：0
> 
> 时间：2013-01-19T18:21:04.070
> 
> 标签：ios, xcode, cocoa-touch, uitableview

我目前正在尝试向我的应用程序添加一些搜索功能，但是在配置时存在一些问题。我有一个带有 3 个表视图的基于选项卡的应用程序，我想**为所有表视图添加一个搜索**栏。但设置起来似乎并不容易。

出现的第一个问题是，在 Storyboard-Editor 中，我只能为每个 tableview 添加单独的搜索栏，但无法将搜索栏添加到 tabBarController 本身。这样相同的搜索栏在所有 3 个表格视图中都可见。

那么第二个问题是，如果我知道它是如何工作的，我必须设置一个带有 3 个不同表视图的 searchDisplayController，但我可以只用一个表视图初始化一个 searchDisplayController。

在 iPhone 上使用一个搜索栏搜索 3 个不同类别的最佳方法是什么？那里有教程吗？我也在看一些其他的应用程序，比如 facebook，他们也在一个 tableview 中搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:50:17.550

您可以使用三个搜索显示控制器，如下所示：让每个选项卡上的每个 vc 实现一个方法（并公开声明），如下所示：

```
- (void)searchFor:(NSString *)string {
    [self.searchDisplayController setActive:YES];
    self.searchDisplayController.searchBar.text = string;
} 
```

每个都应该实现这个方法：

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString {

    // do the search logic for my table
    // set a badge on my tab indicating how many results I found

    // then perform it on the other vcs:
    NSMutableArray *otherVCs = [[self.tabBarController viewControllers] mutableCopy];
    [otherVCs removeObject:self];

    for (MyViewController *otherVC in otherVCs) {
        [otherVC searchFor:searchString];
    }
} 
```

您可能需要确保已加载所有其他选项卡 vcs（如果您启动应用程序，请仅访问一个选项卡并尝试此操作，其他 vcs 可能尚未准备好。为此，只需在循环中插入此行以强制查看加载： `(void)[otherVC view];`

（注意 - 这个答案假定 ARC）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:46:14.470

这个解决方案有一点问题。它会导致无限循环。解决方案是我们必须证明视图是否可见。

```
-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    [self setUpFilteredEndlessScrollingWithUrl:kGetAllTours];
    [self loadFilteredDataWithPath:kGetAllTours];
    if (self.isViewLoaded && self.view.window) {
        NSMutableArray *otherVCs = [[self.tabBarController viewControllers] mutableCopy];
        [otherVCs removeObject:self];

        for (BaseTableViewController *otherVC in otherVCs) {
            [otherVC searchFor:searchString];
        }
    }
    return YES;
} 
```

# sql - sql server 无法访问触发器中的插入表

> ID：14417350
> 
> 赞同：0
> 
> 时间：2013-01-19T18:21:13.767
> 
> 标签：sql, sql-server, triggers

我正在尝试创建一个简单的插入触发器，该触发器从表中获取计数并将其添加到另一个像这样

```
CREATE TABLE [poll-count](
id VARCHAR(100),
altid BIGINT,
option_order BIGINT,
uip VARCHAR(50),
[uid] VARCHAR(100),
[order] BIGINT
PRIMARY KEY NONCLUSTERED([order]),
FOREIGN KEY ([order]) references ord ([order]  
)
GO

CREATE TRIGGER [get-poll-count]
ON [poll-count]
FOR INSERT 
AS 
    BEGIN
        DECLARE @count INT
        SET @count = (SELECT COUNT (*) FROM [poll-count] WHERE option_order = i.option_order)
        UPDATE [poll-options] SET [total] = @count WHERE [order] = i.option_order
    END
GO 
```

当我尝试运行它时，我得到了这个错误：

> 无法绑定多部分标识符“i.o​​ption_order”

问题是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T00:28:06.573

您的触发器当前假定总是会有单行插入。你试过这样的触发器吗？

```
INSERT dbo.[poll-options](option_order --, ...)
  VALUES(1 --, ...),
        (2 --, ...); 
```

此外，您说 SQL Server“无法访问插入的表” - 但您的声明是这样说的。你在哪里引用`inserted`（即使这是一个有效的子查询结构）？

```
SET @count = (SELECT COUNT (*) FROM [poll-count] 
  WHERE option_order = i.option_order)
-----------------------^ "i" <> "inserted" 
```

这是一个正确引用`inserted`并正确处理多行插入的触发器：

```
CREATE TRIGGER dbo.pollupdate
ON dbo.[poll-options]
FOR INSERT
AS
BEGIN
    SET NOCOUNT ON;

    ;WITH x AS 
    (
      SELECT option_order, c = COUNT(*)
       FROM dbo.[poll-options] AS p
       WHERE EXISTS 
       (
        SELECT 1 FROM inserted 
        WHERE option_order = p.option_order
       )
       GROUP BY option_order
    )
    UPDATE p SET total = x.c
      FROM dbo.[poll-options] AS p
      INNER JOIN x 
      ON p.option_order = x.option_order;
END
GO 
```

但是，为什么要在每一行上存储这些数据？您始终可以在运行时导出计数，知道它是最新的，并且完全不需要触发器。如果它是关于在运行时推导计数的性能方面，那么在 DML 期间以大约相同的维护成本实现这种预写优化的一种更简单的方法是创建一个索引视图：

```
CREATE VIEW dbo.[poll-options-count]
WITH SCHEMABINDING
AS
  SELECT option_order, c = COUNT_BIG(*)
    FROM dbo.[poll-options]
    GROUP BY option_order;
GO
CREATE UNIQUE CLUSTERED INDEX oo ON dbo.[poll-options-count](option_order);
GO 
```

现在为您维护了索引，您可以非常快速地得出任何给定（或所有）`option_order`值的计数。当然，您将测试查询时间的改进是否值得增加维护（尽管您已经为触发器付出了这个代价，除了它可以影响任何给定插入中的更多行，所以......） .

最后的建议是，不要`-`在对象名称中使用特殊字符。它只是迫使你总是把它包裹起来，`[square brackets]`这对任何人来说都没有乐趣。

# c# - 可空列的动态 OrderBy 失败

> ID：14417353
> 
> 赞同：1
> 
> 时间：2013-01-19T18:21:26.477
> 
> 标签：c#, linq, dynamic, nullable

有一个`Customers`可以为空的`cstCredit`列的表。以下工作正常，可以迭代。

```
var query = _oContext.Customers.OrderBy(cst => cst.cstCredit); 
```

但是，迭代时以下将失败。

```
public IQueryable<Customer> AllSorted(Expression<Func<Customer, object>> orderby)
{
   return _oContext.Customers.OrderBy(orderby);
}

void test()
{
   var query = AllSorted(cst => cst.cstCredit);
   foreach (Customer oCustomer in query)
   {
   }
} 
```

消息（从德语翻译）是

> “System.Nullable 类型无法转换为 System.Object。LINQ to Entities 仅支持转换原始类型或枚举类型”。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:38:19.937

尝试编写这样的`AllSorted`方法：

```
public IQueryable<Customer> AllSorted<TKey>(Expression<Func<Customer, TKey>> orderby)
{
   return _oContext.Customers.OrderBy(orderby);
} 
```

它不起作用，因为像`int?`值类型这样的可空类型不是从对象派生的（并且是`System.Nullable`结构的实例），因此`Expression<Func<Customer, object>> orderby`不能与它们一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:36:59.137

尝试这个

```
public IQueryable<Customer> AllSorted<T>(Expression<Func<Customer, T>> orderby)
{
   return _oContext.Customers.OrderBy(orderby);
} 
```

# github - 比特币和隐私

> ID：14417358
> 
> 赞同：-5
> 
> 时间：2013-01-19T18:21:54.040
> 
> 标签：github, bitbucket

我在 BitBucket.org 上创建了一个帐户，并准备在上面上传我的代码。现在，想知道如果您使用免费帐户，它是否会允许公众访问像 GitHub 这样的代码。

有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:52:31.953

[文档很清楚](https://confluence.atlassian.com/display/BITBUCKET/Making+a+Repository+Private+or+Public)

有人根本没有做任何尝试。

# database - 如果过程可以做所有事情，那么数据库中需要什么功能

> ID：14417359
> 
> 赞同：-3
> 
> 时间：2013-01-19T18:21:55.260
> 
> 标签：database, oracle, plsql

数据库中函数的需求是什么，就像函数所做的一切一样，也可以通过数据库中的过程来实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T19:24:16.057

在 Oracle 中，它们非常相似。主要区别在于函数返回结果，过程不返回。（不要与两者都可能具有的输出参数混淆......）

这种差异使得在 SQL 语句中使用函数成为可能，例如

```
select user_name, myFunction( some_attribute ) from ... 
```

或者

```
select ... where fn2(col1)=something 
```

您可以将其视为某种转换。

当然，为了在 SQL 语句中有效使用，它们应该很快，因为可以对输出中的每一行或每个检查的行执行多次。（和/或确保行数不会太大）。

此外，在最近的版本中，可以使用 return 作为实时 dbms_output（搜索管道行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T20:19:00.793

您还可以在基于函数的索引中使用函数。并且这些索引也可以是唯一索引。使用基于函数的唯一索引，您可以构建复杂的唯一约束。

```
create unique index UK_MYINDEX
 on TBL_MYTABLE (case when IS_ACTUAL(MY_COLUMN_2) then MY_COLUMN_1 end); 
```

在此示例中，我在唯一索引中使用 IS_ACTUAL 函数，以便仅对实际记录强制执行唯一 MY_COLUMN_1 约束。

# r - 用于组合 P 值的 Stouffer-Liptak 方法

> ID：14417363
> 
> 赞同：-1
> 
> 时间：2013-01-19T18:22:42.590
> 
> 标签：r

我需要使用 Stouffer-Liptak 方法组合 P.values 进行荟萃分析。我的数据由一个数据框组成，其中行是基因，列包含 P.values。下面的模拟图。

```
Gene  Study 1  Study 2  Study 3
a     0.03     0.001    0.3
b     0.2      0.1      0.02
c     0.04     0.05     0.03 
```

总共有 25000 个基因，我需要一段代码，使用 Stouffer-Liptak 方法生成所有 25,000 个基因的组合 P.values，每行一个。任何有关如何使用 R 和 Bioconductor 应用此方法的指针将不胜感激。

干杯，安库尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T02:57:15.690

中的`MetaDE.rawdata`函数`MetaDE`有 Stouffer。

# javascript - 如何获取图像的高度？

> ID：14417366
> 
> 赞同：1
> 
> 时间：2013-01-19T18:22:55.600
> 
> 标签：javascript, jquery, image, height

我写这个是为了向我展示图像的高度：

```
alert($("img.my_pic").height()); 
```

但是，它告诉我图像的高度是 0.9090919494628906，这是不正确的。

我应该怎么做才能获得正确的高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:21:05.260

```
$("img.my_pic").on('load', function() { alert( this.height ); }); 
```

这是 rlemon 对我有用的答案。由于他将其作为评论而不是答案来回答，因此我只是为他回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:24:31.167

尝试

```
$("img.my_pic").prop('height') 
```

当然，图像必须完全加载。

* * *

您可以使用该`complete`属性来检查图像是否已加载。

```
if ($("img.my_pic").prop('complete') === false){
    $("img.my_pic").on('load', function(){
        alert($(this).prop('height'));
    });
}
else{
    alert($("img.my_pic").prop('height'));
} 
```

[**演示**](http://jsfiddle.net/mowglisanu/KFVAH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T18:29:24.783

您必须等到图像加载到 DOM

```
function imageSize(img){
  var theImage = new Image();
  $(theImage).load(function() {
    var imgwidth = this.width;
    var imgheight = this.height;

    alert(imgwidth+'-'+imgheight);
  });
  theImage.src = img.attr('src');
} 
```

[jsFiddle 演示](http://jsfiddle.net/bvBKD/2/)

# mysql - mysql中未使用复合索引

> ID：14417368
> 
> 赞同：1
> 
> 时间：2013-01-19T18:23:09.280
> 
> 标签：mysql, indexing, composite-key, composite-primary-key

根据 MySQL 文档，如果最左边的字段是标准的一部分，则仍将使用复合索引。但是，此表将无法与主键正确连接；我必须添加左侧两个字段的另一个索引，然后使用。

其中一个表是内存，我知道默认情况下内存使用不能用于组/订单的哈希索引。但是我使用的是内存表的所有行而不是索引，所以我认为这与问题无关。

我错过了什么？

```
mysql> show create table pr_temp;
| pr_temp | CREATE TEMPORARY TABLE `pr_temp` (
`player_id` int(10) unsigned NOT NULL,
`insert_date` date NOT NULL,
[...]
PRIMARY KEY (`player_id`,`insert_date`) USING BTREE,
KEY `insert_date` (`insert_date`)
) ENGINE=MEMORY DEFAULT CHARSET=utf8  |

mysql> show create table player_game_record;
| player_tank_record | CREATE TABLE `player_game_record` (
`player_id` int(10) unsigned NOT NULL,
`game_id` smallint(5) unsigned NOT NULL,
`insert_date` date NOT NULL,
[...]
PRIMARY KEY (`player_id`,`insert_date`,`game_id`),
KEY `insert_date` (`insert_date`),
KEY `player_date` (`player_id`,`insert_date`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 DATA DIRECTORY='...' INDEX DIRECTORY='...' |

mysql> explain select pgr.* from player_game_record pgr inner join pr_temp on   pgr.player_id = pr_temp.player_id and pgr.insert_date = pr_temp.date_prev;                      
+----+-------------+---------+------+---------------------------------+-------------+---------+-------------------------------------------------------------------------+--------+-------+
| id | select_type | table   | type | possible_keys                   | key         | key_len | ref                                                                     | rows       | Extra |
+----+-------------+---------+------+---------------------------------+-------------+---------+-------------------------------------------------------------------------+--------+-------+
|  1 | SIMPLE      | pr_temp | ALL  | PRIMARY                         | NULL        | NULL    | NULL                                                                    | 174683   |       |
|  1 | SIMPLE      | pgr     | ref  | PRIMARY,insert_date,player_date | player_date | 7       | test_gamedb.pr_temp.player_id,test_gamedb.pr_temp.date_prev |     21 |       |
+----+-------------+---------+------+---------------------------------+-------------+---------+-------------------------------------------------------------------------+--------+-------+
2 rows in set (0.00 sec)

mysql> explain select pgr.* from player_game_record pgr force index (primary) inner join pr_temp on pgr.player_id = pr_temp.player_id and pgr.insert_date = pr_temp.date_prev;
+----+-------------+---------+------+---------------+---------+---------+-------------------------------------------------------------------------+---------+-------+
| id | select_type | table   | type | possible_keys | key     | key_len | ref                                                                       | rows    | Extra |
+----+-------------+---------+------+---------------+---------+---------+-------------------------------------------------------------------------+---------+-------+
|  1 | SIMPLE      | pr_temp | ALL  | PRIMARY       | NULL    | NULL    | NULL                                                                    |  174683 |       |
|  1 | SIMPLE      | pgr     | ref  | PRIMARY       | PRIMARY | 7       | test_gamedb.pr_temp.player_id,test_gamedb.pr_temp.date_prev | 2873031 |       |
+----+-------------+---------+------+---------------+---------+---------+-------------------------------------------------------------------------+---------+-------+
2 rows in set (0.00 sec) 
```

我认为主键应该可以工作，使用左两列（player_id，insert_date）。但是，默认情况下它将使用 player_date 索引，如果我强制它使用主索引，它看起来只使用一个字段而不是两个字段。

Update2：Mysql version 5.5.27-log Update3：（注意这是在尝试其他一些测试时删除 player_date 索引之后）

```
mysql> show indexes in player_game_record;
+--------------------+------------+-------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table              | Non_unique | Key_name    | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+--------------------+------------+-------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| player_game_record |          0 | PRIMARY     |            1 | player_id   | A            |        NULL |     NULL | NULL   |      | BTREE      |         |               |
| player_game_record |          0 | PRIMARY     |            2 | insert_date | A         |        NULL |     NULL | NULL   |      | BTREE      |         |               |
| player_game_record |          0 | PRIMARY     |            3 | game_id     | A         |   576276246 |     NULL | NULL   |      | BTREE      |         |               |
| player_game_record |          1 | insert_date |            1 | insert_date | A         |       33304 |     NULL | NULL   |      | BTREE      |         |               |
+--------------------+------------+-------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
4 rows in set (1.08 sec)

mysql> select count(*) from player_game_record;
+-----------+
| count(*)  |
+-----------+
| 576276246 |
+-----------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:54:27.653

我同意您`MEMORY`对其中一张表的存储引擎的使用在这里根本不是问题，因为我们正在谈论另一张表。

我也同意索引的最左边前缀可以完全按照您尝试使用它的方式使用，并且我想不出为什么不能以与任何其他索引完全相同的方式使用主键的任何原因。

这是一个令人头疼的问题。您创建的新索引“应该”与主键的左侧相同，那么为什么它们的行为方式不同呢？我有两个想法，尽管我不像对 InnoDB 那样熟悉 MyISAM 的内部结构，但两者都使我得到了相同的建议。（顺便说一句，我会推荐 InnoDB 而不是 MyISAM。）

当您开始插入数据时，主键上的索引可能在表上，而新索引是在大部分或所有数据已经​​存在时添加的。这表明您的新索引很好并且内部组织干净，而您的主键索引可能是高度碎片化的，是在加载数据时构建的。

优化器显示的行数基于索引统计信息，由于插入顺序，这可能在您的主键上不准确。

碎片理论可以解释为什么使用主键作为索引查询没有那么快；索引统计理论可以解释为什么优化器会产生如此不同的行数*，*也可以解释为什么优化器可能一直选择全表扫描而不是使用该索引（这只是一个猜测，因为我们没有可用的解释）。

基于这两个想法，我建议的事情正在`OPTIMIZE TABLE`你的桌子上运行。如果构建新索引需要 12 个小时，那么[优化表](http://dev.mysql.com/doc/refman/5.5/en/optimize-table.html)很可能需要那么长或更长的时间。

可能有帮助：[http ://www.dbasquare.com/2012/07/09/data-fragmentation-problem-in-mysql-myisam/](http://www.dbasquare.com/2012/07/09/data-fragmentation-problem-in-mysql-myisam/)

# iphone - Pop to root 然后在 iPhone 上执行 segue

> ID：14417370
> 
> 赞同：1
> 
> 时间：2013-01-19T18:23:30.620
> 
> 标签：iphone, ios, uinavigationcontroller, storyboard, uistoryboardsegue

我正在启用 iOS 6.0 故事板

我有一个链接到 TableViewController 的 NavController。这个 TableView 可以 segue 到 AViewController 或 BViewController。

当我在 A 中时，我想弹回根目录并使用以下行对 B 执行 segue：

```
UINavigationController *nav = self.navigationController;
[nav popToRootViewControllerAnimated:YES];
[nav performSegueWithIdentifier:@"GoToB" sender:self]; 
```

我检查了故事板，GoToB 确实存在并且从 TableViewController 链接到 BViewController

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Receiver (<NavMainViewController: 0xb921fa0>) has no segue with identifier 'GoToB'' 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:31:05.330

segue 将附加到您弹出的视图控制器，而不是`nav`包含它的容器视图控制器。所以这会更接近：

```
UINavigationController *nav = self.navigationController;
[nav popToRootViewControllerAnimated:YES];

UIViewController *rootVC = [nav.viewControllers objectAtIndex:0];
[rootVC performSegueWithIdentifier:@"GoToB" sender:self]; 
```

但是，我认为这里的问题是 pop 动画会与 segue 冲突。使用 ...Animated:NO 进行弹出可能会修复它，但我认为从 rootVC 执行 segue 会更正确（并且对动画更健壮）。

rootVC 将实现 viewDidAppear 如下：

```
- (void)viewDidAppear:(BOOL)animated {

    [super viewDidAppear:animated];
    if (!self.isBeingPresented && /* any other condition that makes you want this */) {
        [self performSegueWithIdentifier:@"GoToB" sender:self];
    }
} 
```

# php - 齿轮工工人没有收到输入

> ID：14417372
> 
> 赞同：0
> 
> 时间：2013-01-19T18:23:55.567
> 
> 标签：php, gearman

**机器 1 -**使用 PHP api 的客户端

```
$client = new \GearmanClient();
$client->addServer(..);
$client->doBackground('demotask', 'hello world'); 
```

**机器 2 - 工人**-*不*使用 PHP api，直接在 bash 中：
`gearman -w -f demotask -- php -f taskexecutor.php`

taskexecutor 正在运行，**但`$argv`不包含`hello world`预期**的 .

*PS 对 PHP 的 API 和第二台机器上的永远 while 循环不感兴趣。我希望 gearman 在需要时启动我的脚本*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:19:19.600

我真的不推荐这个实现。如果您的 php 脚本出现任何问题，您将无法重新提交作业，或与 gearman 沟通。

Anwyays，问题是当[gearman 客户端](http://gearman.org/getting_started#client_and_worker_api)抓取作业时，作业工作负载被传递给您的 php 进程的 STDIN。所以这意味着 $argv*总是*为空的。您传入的参数可以像这样从 STDIN 读取；

> $params = fgets(STDIN);

我建议您将参数作为 JSON 字符串传递，这样您就可以使用简单的函数，例如`json_encode`and `json_decode`，而不必过多担心结构或编码等。

# xcode4.5 - stpncpy.c:33：尝试在 Mac OSX MT Lion 上编译 dc3dd 时出错

> ID：14417376
> 
> 赞同：2
> 
> 时间：2013-01-19T18:24:25.270
> 
> 标签：xcode4.5

我正在尝试编译从 sourceforge.net 下载的 dc3dd。我正在运行 Mac OS X MT Lion。我已经安装了 Xcode v4.5.2 并安装了命令行工具。我还安装了 MacPorts 2.1.2。我按照指示运行了“sudo ./configure”，似乎成功完成。当我运行“sudo make”时。我收到以下错误：

```
sudo make
Password:
make  all-recursive
Making all in lib
make  all-am
depbase=`echo stpncpy.o | sed 's|[^/]*$|.deps/&|;s|\.o$||'`;\
gcc -std=gnu99  -I.      -O2 -DDEFAULT_HASH_MD5 -MT stpncpy.o -MD -MP -MF $depbase.Tpo           -c -o stpncpy.o stpncpy.c &&\
    mv -f $depbase.Tpo $depbase.Po
stpncpy.c:33: error: expected declaration specifiers or '...' before numeric constant
stpncpy.c:33: error: expected ')' before '!=' token
stpncpy.c:33: error: expected ')' before '?' token
make[3]: *** [stpncpy.o] Error 1
make[2]: *** [all] Error 2
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

我无法在互联网上找到任何有用的东西。我不是经验丰富的开发人员，也不知道出了什么问题。我的计算机上有以前版本的 XCode（旧的 /Developer 目录仍然存在）。我真的不知道从这里去哪里。有人有一些我可以尝试的建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T02:39:13.177

在文件中：`./lib/stpncpy.c`

改变：

```
__stpncpy (char *dest, const char *src, size_t n) 
```

至：

```
__stpcpy (char *dest, const char *src, size_t n) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:01:27.207

如果您已经安装了 MacPorts，那么为什么不安装 MacPorts 版本呢？

```
$ sudo port install dc3dd 
```

任务完成。

# vb.net - 从 SQL Server 拆分字符串

> ID：14417378
> 
> 赞同：-1
> 
> 时间：2013-01-19T18:24:38.390
> 
> 标签：vb.net, string, sql-server-2008

我想拆分数据库中的 Birthdate 列..

```
Returned String from database : dd/mm/yyyy 
```

我想在单独的字符串上获取每个值，

```
date = dd
month = mm
year = yyyy 
```

我尝试过这样的事情..但这并不总是有效，因为某些日期只有一个字符？前任。2012 年 4 月 5 日

```
Birthdate.ToString.Substring(0, 2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:33:04.863

或者，您能否不将从数据库返回的字符串转换为日期？您随后可以使用`Date.Month`等访问每个组件部分。

```
Dim mydate As Date = Convert.ToDateTime("21/05/2012")

Console.WriteLine(mydate.Day)
Console.WriteLine(mydate.Month)

Console.WriteLine(mydate.Year) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T18:34:06.840

(a) 你不应该使用像`4/5/2012`4 月 5 日还是 5 月 4 日这样的区域格式？如果我不知道，SQL Server 怎么知道？

（b）如果将任何内容存储为日期，您真的不需要拆分任何内容（您将日期存储为日期，而不是字符串，对吧）？因此，如果您想从 SQL Server 执行此操作，您可以说：

```
SELECT 
  [day]   = DAY(date_column), 
  [month] = MONTH(date_column),
  [year]  = YEAR(date_column)
FROM
(
  SELECT CONVERT(DATETIME, date_column, 103)
  FROM
  (
    SELECT '04/05/2012'
    UNION ALL SELECT '4/5/2012'
  ) AS x(date_column)
) AS y; 
```

结果：

```
day  month  year
---  -----  ----
4    5      2012
4    5      2012 
```

如果您的专栏是，`DATE`那么您应该只能说：

```
SELECT 
  date_column,
  [day]   = DAY(date_column), 
  [month] = MONTH(date_column),
  [year]  = YEAR(date_column)
FROM
  dbo.tablename; 
```

# python - Python - 在for循环中删除列表的元素并重新分配列表

> ID：14417379
> 
> 赞同：0
> 
> 时间：2013-01-19T18:24:44.317
> 
> 标签：python, python-2.7

我试图一次将列表分成 2 折（10 次）并对每个分区执行操作。我想一次以 1:9 的比例在列表上执行此操作。这意味着我已将列表划分为 10 折，在第一次迭代中，我将对第一次折叠和剩余的 9 次执行操作，在第二次迭代中，我将在第二次折叠和剩余的 9 次上执行操作，依此类推。现在，为了做到这一点，我决定保留原始列表的副本并将其中一个折叠分配给一个临时变量，将其从列表中删除并将其余部分作为第二个分区。然后将列表的副本重新分配给它以进行下一次迭代。但是，似乎副本和原始文件在整个 for 循环中始终相同，因此我得到一个索引超出范围错误。这是问题的一个简单示例：

```
>>> a = ['a', 'b', 'c', 'd', 'e', 'f']
>>> b = a
>>> b
['a', 'b', 'c', 'd', 'e', 'f']
>>> for i in xrange (len(a)):
    del (b [i])
    b = a

Traceback (most recent call last):
  File "<pyshell#22>", line 2, in <module>
    del (b [i])
IndexError: list assignment index out of range 
```

似乎 a 和 b 都指向内存中的相同位置，并且只有一个位置存储列表的实际内容。你能告诉我这里有什么问题以及如何解决我的问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:26:40.120

您可以通过更改行来制作列表的副本

```
b = a 
```

至

```
b = a[:] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T18:31:48.297

`b = copy.deepcopy(a)`使用代替复制列表`b = a`。它将递归地复制列表中的每个元素。但这也意味着它将比以下三个替代方案慢。

备择方案：

```
b = a[:]
b = 列表（一）
b = copy.copy(a)

```

所有替代方案都进行浅拷贝，这意味着如果原始列表的元素是对象，则它们被引用。`copy`并且`deepcopy`可以推广到任何对象，而不仅仅是列表。

问题`=`在于它创建了对同一对象的新引用。这是您在 pythontutor 中的代码的可视化 - [http://goo.gl/3UN3T](http://goo.gl/3UN3T)。

# ios - OpenCV 在 iOS 中检测圆圈

> ID：14417380
> 
> 赞同：0
> 
> 时间：2013-01-19T18:24:51.187
> 
> 标签：ios, opencv

我正在尝试检测图像中的圆圈（包含一个空盘子）。

我曾尝试使用 HoughCircles 和 minEnclosureCircle，但在我的 iOS 应用程序中使用代码没有运气。

我尝试移植到 iOS 的代码位于[http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html#hough-circle](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html#hough-circle)

有人可以指出我如何将此代码转换为Objective C的正确方向。

# properties - Fluent NHibernate 错误：“无法解析属性”

> ID：14417381
> 
> 赞同：1
> 
> 时间：2013-01-19T18:25:05.940
> 
> 标签：properties, fluent-nhibernate, mapping

这是（编辑的）域类：

```
public class Patient : IntegerKeyEntity
{
  ...
  public virtual string LastName
  {
      get
      {
          return Encoding.Unicode.GetString(encryptionService.Decrypt(LastNameEncrypted));
      }
      set
      {
          LastNameEncrypted = encryptionService.Encrypt(value);
      }
  }
  /// <summary>
  /// Contains the encrypted last name. Access via LastName for unencrypted version.
  /// </summary>
  public virtual byte[] LastNameEncrypted { get; set; }
  ...
} 
```

这是 Fluent 映射：

```
public class PatientMap : ClassMap<Patient>
{
  public PatientMap()
  {
    ...
    Map(x => x.LastNameEncrypted, "LastName")
      .Not.Nullable();
    ...
  }
} 
```

我没有在 Patient 中映射 LastName。该表有一个 LastName 列（一个 varbinary）并且没有 LastNameEncrypted 列。

这是查询：

```
public virtual IQueryable<TResult> SatisfyingElementsFrom(IQueryable<T> candidates, int start, int limit, string sort, string dir)
{
    if (this.MatchingCriteria != null)
    {
        return candidates.Where(this.MatchingCriteria).OrderBy(sort + " " + dir).Skip(start).Take(limit).ToList().ConvertAll(this.ResultMap).AsQueryable();
    }

    return candidates.ToList().ConvertAll(this.ResultMap).AsQueryable();
} 
```

返回（在 if 块内）是触发错误的地方。错误显示“无法解析患者的姓氏属性”。

我正在使用 NHibernate (v2.1.2.4000)、Fluent NHibernate (v1.1.0.685) 和 NHibernate.Linq (v1.1.0.1001)。我无法更新这些 DLL。

是因为我没有 Patient.LastName 的映射吗？我没有，也不需要。如果这是问题所在，我如何映射/告诉 Fluent NHibernate 忽略该属性？

PS：我没有使用 AutoMapping，只使用显式映射。它们的加载方式如下。在我的应用程序中，只有 cfg（一个 NHibernate.Cfg.Configuration 对象）和 mappingAssemblies（指向具有映射的一个 DLL）有一个值。

```
private static ISessionFactory CreateSessionFactoryFor(string[] mappingAssemblies, AutoPersistenceModel autoPersistenceModel, Configuration cfg, IPersistenceConfigurer persistenceConfigurer)
{
    FluentConfiguration fluentConfiguration = Fluently.Configure(cfg);

    if (persistenceConfigurer != null)
    {
        fluentConfiguration.Database(persistenceConfigurer);
    }

    fluentConfiguration.Mappings(m =>
    {
        foreach (var mappingAssembly in mappingAssemblies)
        {
            var assembly = Assembly.LoadFrom(MakeLoadReadyAssemblyName(mappingAssembly));

            m.HbmMappings.AddFromAssembly(assembly);
            m.FluentMappings.AddFromAssembly(assembly).Conventions.AddAssembly(assembly);
        }

        if (autoPersistenceModel != null)
        {
            m.AutoMappings.Add(autoPersistenceModel);
        }

    });

    return fluentConfiguration.BuildSessionFactory();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:40:19.207

执行查询时会发生此错误。查看您的代码，我只看到可能导致问题的一件事 - 即 MatchingCriteria：

```
return candidates.Where(this.MatchingCriteria)... 
```

this.MatchingCriteria 中存储的是什么类型？

尝试用内联条件替换它：in

```
..Where(<put_inline_criteria_here>).. 
```

# bundling-and-minification - 禁用特定文件扩展名的捆绑缩小

> ID：14417388
> 
> 赞同：1
> 
> 时间：2013-01-19T18:26:15.973
> 
> 标签：bundling-and-minification, dotless

我正在将我的网站切换到 less 并且我想继续使用`Web.Optimization`但是，它在编译 less 时失败了。有没有办法为此注册`.less{}`为处理器，或者只是告诉它捆绑，但不通过`.less`扩展来缩小任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:06:54.813

看看这个[捆绑和缩小](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)指南。它包含一个捆绑 LESS 文件的示例。

本质上，您创建一个实现的类`IBundleTransform`

```
using System.Web.Optimization;

public class LessTransform : IBundleTransform
{
    public void Process(BundleContext context, BundleResponse response)
    {
        response.Content = dotless.Core.Less.Parse(response.Content);
        response.ContentType = "text/css";
    }
} 
```

有了这个，`CssMinify`您就可以创建一个捆绑包。

```
var lessBundle = new Bundle("~/My/Less").IncludeDirectory("~/My", "*.less");
lessBundle.Transforms.Add(new LessTransform());
lessBundle.Transforms.Add(new CssMinify());
bundles.Add(lessBundle); 
```

# java - 我无法获得 Java 正则表达式匹配的最后一组

> ID：14417389
> 
> 赞同：0
> 
> 时间：2013-01-19T18:26:16.210
> 
> 标签：java, regex

这是我的字符串：

```
 Kết quả xổ số đài  Bình Phước ngày 05/01/2013 Tên Giải Bình Phước - Ký hiệu: bp-05-01 Giải tám 08 Giải bảy 028 Giải sáu 3137-1907-5049 Giải năm 2026 Giải tư 25982-96941-33495-24133-42882-60030-16818 Giải ba 15685-66788 Giải nhì 20283 Giải nhất 46475 Giải đặc biệt 207984 
```

这是我的模式：

```
.*?(Giải tám([\\s\\d-]*?))?Giải bảy([\\s\\d-]*?)Giải sáu([\\s\\d-]*?)Giải năm([\\s\\d-]*?)Giải tư([\\s\\d-]*?)Giải ba([\\s\\d-]*?)Giải nhì([\\s\\d-]*?)Giải nhất([\\s\\d-]*?)Giải đặc biệt([\\s\\d]*?).*? 
```

我尝试从字符串中获取 10 组数字。但我不能得到最后一组。它始终为空。我还测试了这个[http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)，我得到了相同的结果，没有最后一组。

请告诉我我的模式错在哪里。

更新：输出有10组如下：

```
01-20 01:32:23.013: I/System.out(11368): group 0 : Kết quả xổ số đài  Bình Phước ngày 05/01/2013 Tên Giải Bình Phước - Ký hiệu: bp-05-01 Giải tám 08 Giải bảy 028 Giải sáu 3137-1907-5049 Giải năm 2026 Giải tư 25982-96941-33495-24133-42882-60030-16818 Giải ba 15685-66788 Giải nhì 20283 Giải nhất 46475 Giải đặc biệt 207984
01-20 01:32:23.013: I/System.out(11368): group 1 : Giải tám 08 
01-20 01:32:23.014: I/System.out(11368): group 2 :  08 
01-20 01:32:23.014: I/System.out(11368): group 3 :  028 
01-20 01:32:23.015: I/System.out(11368): group 4 :  3137-1907-5049 
01-20 01:32:23.015: I/System.out(11368): group 5 :  2026 
01-20 01:32:23.015: I/System.out(11368): group 6 :  25982-96941-33495-24133-42882-60030-16818 
01-20 01:32:23.015: I/System.out(11368): group 7 :  15685-66788 
01-20 01:32:23.016: I/System.out(11368): group 8 :  20283 
01-20 01:32:23.016: I/System.out(11368): group 9 :  46475 
01-20 01:32:23.017: I/System.out(11368): group 10 : 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:31:56.740

删除`?`最后一个匹配组中的量词。每个通配符表达式都是不情愿的，因此不会消耗字符串中的所有字符。*至少有*一个贪心表达式可以确保最后一组可以匹配。

```
.*?(Giải tám([\\s\\d-]*?))?Giải bảy([\\s\\d-]*?)Giải sáu([\\s\\d-]*?)Giải năm([\\s\\d-]*?)Giải tư([\\s\\d-]*?)Giải ba([\\s\\d-]*?)Giải nhì([\\s\\d-]*?)Giải nhất([\\s\\d-]*?)Giải đặc biệt([\\s\\d]*).*? 
```

# php - 如何通过合并数组继承父类数组属性？

> ID：14417391
> 
> 赞同：7
> 
> 时间：2013-01-19T18:26:23.537
> 
> 标签：php, cakephp, cakephp-2.2

我经常在我的类中使用存储一系列选项的属性。我希望能够以某种方式将这些选项与父类中声明的默认值合并。

我用一些代码进行了演示。

```
class A
{
    public $options = array('display'=>false,'name'=>'John');
}

class B extends A
{
    public $options = array('name'=>'Mathew');
} 
```

现在，当我创建时`B`，我想`$options`包含一个来自的合并数组`A::options`

现在发生的事情是这样的。

```
$b = new B();
print_r($b);
array('name'=>'Mathew'); 
```

我想要这样的东西使用`array_merge_recursive()`。

```
array('display'=>false,'name'=>'Mathew'); 
```

*   也许这是我可以在构造函数中做的事情？
*   是否有可能使它成为一种行为`class A`？这样我就不必总是在所有子类中实现相同的代码。
*   我可以使用反射在两个类中自动查找数组属性并将它们合并吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-22T05:44:11.543

除了前面的答案之外，另一种可能适合某些情况的方法是使用 PHP 反射或内置类函数。这是使用后者的基本示例：

```
class Organism
{
    public $settings;
    public $defaults = [
        'living' => true,
        'neocortex' => false,
    ];
    public function __construct($options = [])
    {
        $class = get_called_class();
        while ($class = get_parent_class($class)) {
            $this->defaults += get_class_vars($class)['defaults'];
        }
        $this->settings = $options + $this->defaults;
    }
}
class Animal extends Organism
{
    public $defaults = [
        'motile' => true,
    ];
}
class Mammal extends Animal
{
    public $defaults = [
        'neocortex' => true,
    ];
}

$fish = new Animal();
print_r($fish->settings); // motile: true, living: true, neocortex: false
$human = new Mammal(['speech' => true]);
print_r($human->settings); // motile: true, living: true, neocortex: true, speech: true 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T18:56:50.103

我意识到我将您的接口从公共变量更改为方法，但也许它对您有用。`setOps($ops)`请注意，如果您允许继续合并父操作，则添加天真的方法可能会出乎意料。

```
class A
{
    private $ops = array('display'=>false, 'name'=>'John');
    public function getops() { return $this->ops; }
}
class B extends A
{
    private $ops = array('name'=>'Mathew');
    public function getops() { return array_merge(parent::getOps(), $this->ops); }
}
class c extends B
{
    private $ops = array('c'=>'c');
    public function getops() { return array_merge(parent::getOps(), $this->ops); }
}

$c = new C();
print_r($c->getops()); 
```

出去：

```
Array
(
    [display] => 
    [name] => Mathew
    [c] => c
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T18:42:35.050

您可以使用这样的简单模式：

```
abstract class Parent {

    protected $_settings = array();

    protected $_defaultSettings = array(
        'foo' => 'bar'
    );

    public __construct($settings = array()) {
        $this->_settings = $settings + $this->_defaultSettings;
    }

} 
```

通过这种方式，很容易修改子类中应用的默认值：

```
class Child extends Parent {

    protected $_defaultSettings = array(
        'something' => 'different';
    );

} 
```

或者应用更复杂的东西：

```
class OtherChild extends Parent {

    function __construct($settings = array()) {
        $this->_defaultSettings = Configure::read('OtherChild');
        return parent::__construct($settings);
    }

} 
```

## 合并变量

Cake 确实带有[合并变量的功能](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Core/Object.php#L179)。它用于控制器属性，例如组件、助手等。但要小心将此函数应用于非平凡的数组 - 您可能会发现它并不能完全满足您的需求/期望。

# twitter-bootstrap - 下拉列表选项元素上的引导弹出框和工具提示

> ID：14417403
> 
> 赞同：4
> 
> 时间：2013-01-19T18:28:19.227
> 
> 标签：twitter-bootstrap, tooltip, popover, html-select

受以下关于[Twitter Bootstrap Popovers 和 Listbox Option Elements 上的工具提示](https://stackoverflow.com/questions/13126144/twitter-bootstrap-popovers-and-tooltips-on-listbox-option-elements-showing-in-th)的讨论的启发，我想使用答案中显示的技术并将其用于简单的下拉列表，即。没有属性的`select`元素or 。`size``size="1"`

虽然它继续在最新版本的 Firefox (V18) 上工作，但它不再在 MacOS X 和 Windows 7 上基于 Webkit 的浏览器（Chrome V24 或 Safari V6）上工作。

有没有办法让它在 Chrome 和 Safari 中运行？

分叉的演示代码为[http://jsfiddle.net/ryZ9q/](http://jsfiddle.net/ryZ9q/)

# html - 动态调整样式表中的css变量？

> ID：14417408
> 
> 赞同：-1
> 
> 时间：2013-01-19T18:28:24.970
> 
> 标签：html, css, variables, dynamic, colors

我目前正在构建一个模板，并遇到了以下问题。我希望用户能够根据他们的主题将具有的十六进制数字选择一种颜色，任何颜色。它目前被硬编码到我的 style.css 文件中的许多地方。我想知道的是最好的方法是什么？我研究了less.js，这是我最好的选择吗？我还必须将大量的 css 重新编码到其中。所以问题是对我来说最好的选择是什么？我不想将 style.css 转换为 php，这样我就可以完成这个......因为我确信有更好的方法。这最终也将成为一个 wordpress 主题，所以我想知道如何根据用户设置来实现它。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:14:51.133

您可以在选项表中保留用户颜色或主题设置，并根据它生成 css 文件。如果配置选项不是太大，请考虑将其作为内联 css 动态放入文件本身。它将覆盖来自外部 css 的规则。

如果主题有预定义的配色方案，请将 css 文件中的主题规则分开并将其作为备用样式表放置在 html 中。使用 js 根据用户颜色选择切换样式表文件。

# mysql - mysql更新查询中的'AND'

> ID：14417413
> 
> 赞同：4
> 
> 时间：2013-01-19T18:28:33.253
> 
> 标签：mysql

我错误地在mysql上运行了以下查询，mysql运行它没有错误：

```
UPDATE table SET col1='value1' AND col2='value2' WHERE ID='id' 
```

这个查询应该是

```
UPDATE table SET col1='value1', col2='value2' WHERE ID='id' 
```

所以我的问题是：第一个带有“AND”的查询实际上做了什么？出于某种原因，它似乎设置了 col1='0'，这似乎很奇怪。这只是一个错误还是这真的是一个有效的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T18:35:08.710

这就是查询实际所做的：

```
UPDATE table SET col1=('value1' AND col2='value2') WHERE ID='id' 
```

# java - 如何在 JSP 中调试 HTTP 错误 400

> ID：14417414
> 
> 赞同：0
> 
> 时间：2013-01-19T18:28:35.467
> 
> 标签：java, jsp

我有以下代码在页面上打印一些链接，并且应该在单击图像时调用控制器方法（启动）。但是，单击按钮时出现错误 400。生成的链接对我来说看起来是正确的。代码在第一个块中。实际的 View-Source 在第二个。

不幸的是，我的服务器日志中没有任何错误，所以我不知道从哪里开始调试它。

有没有人看到我的代码有什么问题。

```
<div id="links">
    <ul>
        <c:forEach items="${listAppURLForm}" var="appURLForm">
            <li>
                <h2>${appURLForm.link}</h2>
                <p>
                    <span>
                        <form method="post" action='<c:url value="launch"/>'>
                            <input type="hidden" name="id" value="${appURLForm.link}"/>
                            <input type="image" src='<c:url value="/images/rocket-thumbnail.png"/>'/>
                        </form>
                    </span>
                </p>
            </li>
        </c:forEach>
    </ul>
</div> 
```

呈现的页面：

```
<form method="post" action='launch;jsessionid=40d63cd386e5d01ef8c6dc1c1b76'>
    <input type="hidden" name="id" value="http://www.cnn.com"/>
    <input type="image" src='/services/images/rocket-thumbnail.png;jsessionid=40d63cd386e5d01ef8c6dc1c1b76'/>
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:34:48.807

400 表示服务器无法理解浏览器发送的内容

你的 action='launch;jsessionid=40d63cd386e5d01ef8c6dc1c1b76' 可能是 ?launch;jsessionid=40d63cd386e5d01ef8c6dc1c1b76

```
 <form method="post" action='?launch;jsessionid=40d63cd386e5d01ef8c6dc1c1b76'>
        <input type="hidden" name="id" value="http://www.cnn.com"/>
        <input type="image" src='/services/images/rocket-thumbnail.png;jsessionid=40d63cd386e5d01ef8c6dc1c1b76'/>
     </form> 
```

# javascript - 为什么我不能包装一系列 在带有 javascript 的标签中？

> ID：14417420
> 
> 赞同：0
> 
> 时间：2013-01-19T18:29:15.307
> 
> 标签：javascript, html, dom

我知道如何用 jQuery 做到这一点，但我想用 vanilla javascript 来学习它，我觉得它会更快。这是 jsFiddle 的链接，其中包含我正在尝试做的精简版本。[http://jsfiddle.net/yramagicman/MyM2B/](http://jsfiddle.net/yramagicman/MyM2B/)以下是有问题的脚本。

```
<script>
var id = 'ul';
var tag = 'li';
var wrapTag = 'span';
var wrapper = document.createElement(wrapTag);
var z = document.getElementById(id);
var y = z.getElementsByTagName(tag);
var count = y.length;
for (var i = 0; i < count; i++) {
    y[i].setAttribute("class", "red"); //so I can see the result
    wrapper.appendChild(y[i].cloneNode(true));
    y[i].parentNode.replaceChild(wrapper, y[i]);
    wrapper.setAttribute('class', 'hi'); //so I can see the result
}</script>
<!-- and the html-->
<ul id="ul" class="ul">
    <li class="li">1</li>
    <li class="li">2</li>
    <li class="li">3</li>
    <li class="li">4</li>
    <li class="li">5</li>
    <li class="li">6</li>
    <li class="li">7</li>
    <li class="li">8</li>
</ul> 
```

我可以将整个 Ul 包装在一个 div 或 span 或其他任何东西中，但是当我尝试包装每个列表项时，我收到错误“HIERARCHY_REQUEST_ERR：DOM 异常 3：节点被插入到它不属于的地方。” 有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T01:45:52.837

弗莱姆的回答不正确。尽管元素在任何版本的 HTML 中`<li>`都不能作为元素的子`<span>`元素，但它不应该成为 DOM 的问题，事实上并非如此。

您需要了解两个关键信息。首先是返回的节点列表`getElementsByTagName`是一个附加到 DOM 文档的活动列表。如果 JS 循环更改了 DOM 文档，那么列表就会更新。

第二个是您创建了一次包装器元素，但每次在循环中都将其与 replaceChild 一起使用。

所以第一次在循环中一切正常。第二次循环时，克隆的元素被添加到包装器中，它现在位于 DOM 文档中，因此成为`y`节点列表中的第二个元素。

所以`y[i]`不再是源`<li>`，而是克隆元素，因此`y[i].parentNode`是包装元素。

这意味着在 replaceChild 行上，您的代码正试图使包装元素成为其自身的子元素。这是不可能的，因此 HIERARCHY_REQUEST_ERR

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:32:17.407

您正在构建一个无效的 DOM。`<li>`必须属于`<ul>`或`<ol>`但您正试图将其放在`<span>`. 因此出现错误：*“一个节点被插入到它不属于的地方”*。

# android - 如何分析应用在 Android 中的使用情况？

> ID：14417421
> 
> 赞同：0
> 
> 时间：2013-01-19T18:29:21.437
> 
> 标签：android, profiling, root

我想在 Android 系统中收集 App 激活序列。

例如

如果用户先打开 Youtube App，然后切换到 Gmail App，再切换回 Youtube App 等等，那么顺序是这样的：

```
Youtube Gmail Youtube ... 
```

Google Play 或其他地方是否有可用的应用程序来实现这一目标？

实施起来简单吗？纯App解决方案能否实现目标？

是否需要root设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:10:27.667

您需要定期轮询此函数。您可以进一步编写逻辑以删除随后重复的应用程序标签。

```
private string getActiveApplicationLabel(){
  String appLabel = null;
  ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
  List l = am.getRunningAppProcesses();
  Iterator i = l.iterator();
  PackageManager pm = this.getPackageManager();
  while(i.hasNext()) {
  ActivityManager.RunningAppProcessInfo info = (ActivityManager.RunningAppProcessInfo)(i.next());

  try {
    CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(info.processName,  
     PackageManager.GET_META_DATA));
     appLabel = c.toString();
    }catch(Exception e) {
      //Name Not FOund Exception
    }

 }
 return appLabel;
} 
```

# mysql - MySQL-Query 太慢

> ID：14417429
> 
> 赞同：0
> 
> 时间：2013-01-19T18:30:52.583
> 
> 标签：mysql, performance, optimization, select

我在我的 MySQL 数据库中使用以下表：

```
--
-- Table structure for table `company`
--

CREATE TABLE IF NOT EXISTS `company` (
  `numb` varchar(4) NOT NULL,
  `cik` varchar(30) NOT NULL,
  `sNumber` varchar(30) NOT NULL,
  `street1` varchar(255) NOT NULL,
  `street2` varchar(255) NOT NULL,
  `city` varchar(255) NOT NULL,
  `state` varchar(100) NOT NULL,
  `zip` varchar(100) NOT NULL,
  `phone` varchar(255) NOT NULL,
  `name` varchar(255) NOT NULL,
  `dateChanged` varchar(30) NOT NULL,
  `name2` varchar(255) NOT NULL,
  `seriesId` varchar(30) NOT NULL,
  `symbol` varchar(10) NOT NULL,
  `exchange` varchar(20) NOT NULL,
  PRIMARY KEY (`cik`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `company` (`numb`, `cik`, `sNumber`, `street1`, `street2`, `city`, `state`, `zip`, `phone`, `name`, `dateChanged`, `name2`, `seriesId`, `symbol`, `exchange`) VALUES
('6798', 'abc', '953551121', '701 AVENUE', '', 'GLENDALE', 'CA', '91201-2349', '818-244-8080', '', '', 'Public Store', '', 'PSA', 'NYSE')

--
-- Table structure for table `data`
--

CREATE TABLE IF NOT EXISTS `data` (
  `id` int(100) NOT NULL AUTO_INCREMENT,
  `number` varchar(100) NOT NULL,
  `elementname` mediumtext NOT NULL,
  `date` varchar(100) NOT NULL,
  `elementvalue` longtext NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=18439;

INSERT INTO `data` (`id`, `number`, `elementname`, `date`, `elementvalue`) VALUES
(1, '0001393311-10-000004', 'StockholdersEquityIncludingPortionAttributableToNoncontrollingInterest', '2009-12-31', '3399777000')

--
-- Table structure for table `filing`
--

CREATE TABLE IF NOT EXISTS `filing` (
  `number` varchar(100) NOT NULL,
  `file_number` varchar(100) NOT NULL,
  `type` varchar(100) NOT NULL,
  `amendment` tinyint(1) NOT NULL,
  `date` varchar(100) NOT NULL,
  `cik` varchar(30) NOT NULL,
  PRIMARY KEY (`accession_number`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `filing` (`number`, `file_number`, `type`, `amendment`, `date`, `cik`) VALUES
('0001393311-10-000004', '001-33519', '10-K', 0, '2009-12-31', '0000751653'),
('0000751652-10-000006', '001-08796', '10-K', 0, '2009-12-31', '0000751652') 
```

数据表有大约 22.000 个条目，归档和公司表各有大约 400 个条目。我想在将来使用更多条目来操作数据库。

我执行以下查询，它选择具有给定类型的最新项目：

```
SELECT data.elementname, data.elementvalue, company.name2 FROM data
JOIN filing ON data.number = filing.number
JOIN company ON filing.cik = company.cik
WHERE elementname IN ('Elem1', 'Elem2', 'Elem3', 'Elem4', 'Elem5', 'ElemN')

 AND number IN (
  SELECT number
   FROM filing
   WHERE filing.cik IN ('cik1', 'cik2', 'cikN')
   AND filing.type = '1L'
   GROUP BY filing.cik
) 
```

完成大约需要 0.28 到 0.4 秒，这似乎很慢。

当我在没有以下行的情况下执行查询时

```
WHERE filing.cik IN ('cik1', 'cik2', 'cikN') 
```

只需约 0.035 秒。

知道如何加快查询速度或优化表结构，因为表正在快速增长并且已经太慢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:20:13.447

首先，您发布的表结构`filing`不正确，因为您指定的主键不正确。我假设你的意思是`number`。此外，您没有为 指定表定义`company`，这使得尝试为此提供建议有些困难。

但是，这两个评论都是正确的。你需要一些索引。根据查询，您可能应该有一些以下索引。

> 更改表 `company`添加索引 ( `cik`)
> 更改表 `data`添加索引 ( `number`)

我还建议看一下 data.elementname 是否真的需要成为 MEDIUMTEXT，这是一个非常大的列。如果其余数据看起来像您提供的示例数据，您可能应该将其更改为 varchar。由于 TEXT 列的存储方式，它们可能会导致一些严重的性能损失。

此外，您的 PRIMARY KEY 数字列（当前是字符串）看起来好像可以重新格式化为实际上是 INT 类型的不同列。请记住，VARCHAR PRIMARY KEY 列的效率不如 INT，只是因为它们要大得多。

最后，22k 行并不是那么多数据。你应该看看你的 my.cnf 设置。您的 key_buffer 值可能太小而无法完全适应内存中的索引。此外，您可能需要考虑对这些表使用 INNODB，并结合将所有内容保存在内存中的 innodb_buffer_pool 值。

# c++ - 使用 int 作为模板参数，直到运行时才知道

> ID：14417430
> 
> 赞同：7
> 
> 时间：2013-01-19T18:30:59.640
> 
> 标签：c++, templates, constexpr

我正在尝试使用整数作为类的模板参数。这是代码示例：

```
template< int array_qty > 
class sample_class {

    public:
        std::array< std::string, array_qty > sample_array;

} 
```

如果我这样做，它会起作用：

```
sample_class< 10 > sample_class_instance; 
```

但是，假设我在编译时不知道array_qty（模板参数）的值，只会在运行时知道。在这种情况下，我基本上将传递一个 int 变量作为模板参数。为了演示，下面的代码不起作用：

```
int test_var = 2;
int another_test_var = 5;
int test_array_qty = test_var * another_test_var;

sample_class< test_array_qty > sample_class_instance; 
```

尝试上述操作时，在编译时出现以下错误：

```
the value of ‘test_array_qty’ is not usable in a constant expression 
```

我尝试将 test_array_qty 转换为 const，同时将其作为模板参数传递，但这似乎也不起作用。有什么办法可以做到这一点，还是我滥用模板参数？也许他们需要在编译时知道？

目标不是解决这个特定的方法，而是找到一种方法将数组的长度设置为一个 int 变量，该变量可以在实例化类时声明。如果有办法通过模板参数做到这一点，那将是理想的。

请注意，我必须为此使用一个数组，而不是一个我可能最终作为建议的向量。此外，array_qty 将始终是 0 到 50 之间的值——以防万一。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T18:58:32.723

这可以有效地完成。但是，当我说您问错问题时，请相信我。因此，接下来的内容回答了您的问题，即使几乎总是认为这样做是一个坏主意。

实际上，您可以做的是创建 50 个不同的程序，为 50 种可能的大小中的每一种创建一个，然后有条件地跳转到您想要的那个。

```
template<int n>
struct prog {
  void run() {
    // ...
  }
};

template<int n>
struct switcher {
  void run(int v) {
    if(v==n)
      prog<n>::run();
    else
      switcher<n-1>::run(v);
  }
};

template<>
struct switcher<-1> {
  void run(int v){
  }
}; 
```

调用`switcher<50>::run( value );`，如果值为 0 到 50，`prog<value>::run()`则调用。在`prog::run`模板参数中是一个编译时间值。

可怕的黑客攻击，你可能会更好地使用另一种解决方案，但这是你所要求的。

这是一个基于 C++14 表的版本：

```
template<size_t N>
using index_t = std::integral_constant<size_t, N>; // C++14

template<size_t M>
struct magic_switch_t {
  template<class F, class...Args>
  using R=std::result_of_t<F(index_t<0>, Args...)>;
  template<class F, class...Args>
  R<F, Args...> operator()(F&& f, size_t i, Args&&...args)const{
    if (i >= M)
      throw i; // make a better way to return an error
    return invoke(std::make_index_sequence<M>{}, std::forward<F>(f), i, std::forward<Args>(args)...);
  }
private:
  template<size_t...Is, class F, class...Args>
  R<F, Args...> invoke(std::index_sequence<Is...>, F&&f, size_t i, Args&&...args)const {
    using pF=decltype(std::addressof(f));
    using call_func = R<F, Args...>(*)(pF pf, Args&&...args);
    static const call_func table[M]={
      [](pF pf, Args&&...args)->R<F, Args...>{
        return std::forward<F>(*pf)(index_t<Is>{}, std::forward<Args>(args)...);
      }...
    };
    return table[i](std::addressof(f), std::forward<Args>(args)...);
  }
}; 
```

`magic_switch_t<N>{}( f, 3, blah1, blah2, etc )`将调用`f(index_t<3>{}, blah1, blah2, etc)`.

一些 C++14 编译器会阻塞包含 lambda 的可变包扩展。这不是必需的，您可以做一个解决方法，但解决方法很丑陋。

C++14 的特性都是可选的：你可以在 C++11 中实现它，但又是丑陋的。

传递的`f`基本上应该是一个函数对象（一个`auto`作为第一个参数的 lambda，或者一个手动的）。直接传递函数名不会很好，因为当第一个参数成为编译时值时，上面的方法最有效。

您可以使用 lambda 或函数对象包装函数模板以提供帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-19T18:43:18.633

对于 C++ 11，非类型模板参数仅限于以下内容 (§14.3.2/1)：

> 非类型、非模板模板参数的模板参数应为以下之一：
> 
> *   对于整数或枚举类型的非类型模板参数，模板参数类型的转换常量表达式（5.19）；或者
>     
> *   非类型模板参数的名称；或者
>     
> *   一个常量表达式 (5.19)，它指定具有静态存储持续时间和外部或内部链接的对象或具有外部或内部链接的函数的地址，包括函数模板和函数模板 ID，但不包括非静态类成员，表示（忽略括号）作为 & id 表达式，除了如果名称引用函数或数组，则 & 可以省略，如果相应的模板参数是引用，则应省略；或者
>     
> *   计算结果为空指针值的常量表达式（4.10）；或者
>     
> *   一个常量表达式，计算结果为空成员指针值 (4.11)；或者
>     
> *   指向成员的指针，如 5.3.1 中所述。

在 C++ 98 和 03 中，该列表受到更多限制。底线：不允许您尝试做的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-19T18:32:33.427

模板参数必须是编译时常量，也就是“常量表达式”或`constexpr`简称 s。所以没有办法使用模板。

您可以使用动态大小的数组并将其大小存储在`int`.

或者干脆使用`vector`. 请务必通过将所需大小传递给向量的构造函数来在构造函数中初始化其大小！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T18:34:04.173

抱歉，这是不可能的。模板参数必须是编译时已知的常量表达式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-12T01:03:12.733

我有点晚了，但这是我的建议。我猜你的向量的主要问题是它们分配的容量比你需要的容量更大，以支持动态增长。那么，就不能自己编写简单的数组类吗？

```
template <typename T>
class Array {
    private: 
        T* data; 
        unsigned size; 
    public: 
        Array(unsigned size) {
            data = new T[size]; 
            this->size = size; 
        }
        T& operator[](int i) {
            return data[i]; 
        }
        T operator[](int i) const {
            return data[i]; 
        }

        // Depending on your needs, maybe add copy constructor and assignment operator here.
        ...

        unsigned size() {
            return size; 
        }

        ~Array() {
            delete [] data; 
        }
} 
```

据我所知，我相信这应该和 STL 数组类一样快。此外，您可以创建大小未知的数组，直到运行时，数组的内存在销毁时会自动处理，并且您不必每次创建具有不同大小的新数组时都实例化新类（例如你必须为 STL 数组做）。

# css - 如何在不移动其他元素的情况下放大 div

> ID：14417433
> 
> 赞同：4
> 
> 时间：2013-01-19T18:31:45.907
> 
> 标签：css, html, scale

如何停止此 div 以将所有元素移动到您选择特定价格的位置以下？

要查看我在说什么，请查看此链接：[检查下面的价格表样式 3](http://www.dreamtemplate.com/dreamcodes/documentation/pricingtables.html) ，您可以看到当您选择某个价格表时，由于弹出窗口，下面的所有元素都在移动。我希望能够使用此功能，但当然无需移动下面的所有元素。

我怎样才能做到这一点？

这是 Javascript 的链接：[JS](http://www.dreamtemplate.com/dreamcodes/pricingtables/js/tsc_pricingtables.js)

编辑：

我正在发布相关的 HTML：

```
<!-- DC Pricing Tables:3 Start -->
  <div class="tsc_pricingtable03 tsc_pt3_style1">
    <div class="caption_column">
      <ul>
        <li class="header_row_1 align_center radius5_topleft"></li>
        <li class="header_row_2">
          <h2 class="caption">Choose plan</h2>
        </li>
        <li class="row_style_4"><span>Web Space</span></li>
        <li class="row_style_2"><span>Bandwidth</span></li>
        <li class="row_style_4"><span>E-mail accounts</span></li>
        <li class="row_style_2"><span>MySQL databases</span></li>
        <li class="row_style_4"><span><a href="#" class="tooltip" rel="Web-based control panel system">CPANEL</a></span></li>
        <li class="row_style_2"><span><a href="#" class="tooltip" rel="24/7 Support via Phone, Email, Web.">24/7 Support</a></span></li>
        <li class="footer_row"></li>
      </ul>
    </div>
    <div class="column_1">
      <ul>
        <li class="header_row_1 align_center">
          <h2 class="col1">starter</h2>
        </li>
        <li class="header_row_2 align_center">
          <h1 class="col1">$<span>5</span></h1>
          <h3 class="col1">per month</h3>
        </li>
        <li class="row_style_3 align_center"><span><a href="#" class="tooltip" rel="Lorem ipsum dolor sit amet, consectetur adipiscing elit.">10GB</a></span></li>
        <li class="row_style_1 align_center"><span><a href="#" class="tooltip" rel="Lorem ipsum dolor sit amet, consectetur adipiscing elit.">100GB</a></span></li>
        <li class="row_style_3 align_center"><span><a href="#" class="tooltip" rel="Tooltip info.">1</a></span></li>
        <li class="row_style_1 align_center"><span><a href="#" class="tooltip" rel="Lorem ipsum dolor sit amet, consectetur adipiscing elit.">1</a></span></li>
        <li class="row_style_3 align_center"><span class="pricing_no"></span></li>
        <li class="row_style_1 align_center"><span class="pricing_yes"></span></li>
        <li class="footer_row"><a href="" class="tsc_buttons2 grey">sign up!</a></li>
      </ul>
    </div>
    <div class="column_2">
      <ul>
        <li class="header_row_1 align_center">
          <h2 class="col2">basic</h2>
        </li>
        <li class="header_row_2 align_center">
          <h1 class="col2">$<span>10</span></h1>
          <h3 class="col2">per month</h3>
        </li>
        <li class="row_style_4 align_center"><span><a href="#" class="tooltip" rel="Lorem ipsum dolor sit amet, consectetur adipiscing elit.">30GB</a></span></li>
        <li class="row_style_2 align_center"><span><a href="#" class="tooltip" rel="Lorem ipsum dolor sit amet, consectetur adipiscing elit.">200GB</a></span></li>
        <li class="row_style_4 align_center"><span><a href="#" class="tooltip" rel="Tooltip info.">10</a></span></li>
        <li class="row_style_2 align_center"><span><a href="#" class="tooltip" rel="Lorem ipsum dolor sit amet, consectetur adipiscing elit.">10</a></span></li>
        <li class="row_style_4 align_center"><span class="pricing_yes"></span></li>
        <li class="row_style_2 align_center"><span class="pricing_yes"></span></li>
        <li class="footer_row"><a href="" class="tsc_buttons2 grey">sign up!</a></li>
      </ul>
    </div>
    <div class="column_3">
      <ul>
        <li class="header_row_1 align_center">
          <h2 class="col3">pro</h2>
        </li>
        <li class="header_row_2 align_center">
          <h1 class="col3">$<span>29</span></h1>
          <h3 class="col3">per month</h3>
        </li>
        <li class="row_style_3 align_center"><span><a href="#" class="tooltip" rel="Lorem ipsum dolor sit amet, consectetur adipiscing elit.">100GB</a></span></li>
        <li class="row_style_1 align_center"><span><a href="#" class="tooltip" rel="Lorem ipsum dolor sit amet, consectetur adipiscing elit.">500GB</a></span></li>
        <li class="row_style_3 align_center"><span><a href="#" class="tooltip" rel="Tooltip info.">50</a></span></li>
        <li class="row_style_1 align_center"><span><a href="#" class="tooltip" rel="Lorem ipsum dolor sit amet, consectetur adipiscing elit.">50</a></span></li>
        <li class="row_style_3 align_center"><span class="pricing_yes"></span></li>
        <li class="row_style_1 align_center"><span class="pricing_yes"></span></li>
        <li class="footer_row"><a href="" class="tsc_buttons2 grey">sign up!</a></li>
      </ul>
    </div>
    <div class="column_4">
      <ul>
        <li class="header_row_1 align_center radius5_topright">
          <h2 class="col4">biz</h2>
        </li>
        <li class="header_row_2 align_center">
          <h1 class="col4">$<span>39</span></h1>
          <h3 class="col4">per month</h3>
        </li>
        <li class="row_style_4 align_center"><span><a href="#" class="tooltip" rel="Lorem ipsum dolor sit amet, consectetur adipiscing elit.">Unlimited</a></span></li>
        <li class="row_style_2 align_center"><span><a href="#" class="tooltip" rel="Lorem ipsum dolor sit amet, consectetur adipiscing elit.">1000GB</a></span></li>
        <li class="row_style_4 align_center"><span><a href="#" class="tooltip" rel="Tooltip info.">Unlimited</a></span></li>
        <li class="row_style_2 align_center"><span><a href="#" class="tooltip" rel="Lorem ipsum dolor sit amet, consectetur adipiscing elit.">Unlimited</a></span></li>
        <li class="row_style_4 align_center"><span class="pricing_yes"></span></li>
        <li class="row_style_2 align_center"><span class="pricing_yes"></span></li>
        <li class="footer_row"><a href="" class="tsc_buttons2 grey">sign up!</a></li>
      </ul>
    </div>
  </div>
<!-- DC Pricing Tables:3 End -->
<div class="tsc_clear"></div> <!-- line break/clear line --> 
```

和CSS：

```
div.tsc_pricingtable03 div.column_1,
div.tsc_pricingtable03 div.column_2,
div.tsc_pricingtable03 div.column_3,
div.tsc_pricingtable03 div.column_4 { /* transitions */ -webkit-transition:box-shadow 0.1s ease; -moz-transition:box-shadow 0.1s ease; -o-transition:box-shadow 0.1s ease; -ms-transition:box-shadow 0.1s ease; transition:box-shadow 0.1s ease;}
div.tsc_pricingtable03 div.column_1:hover,
div.tsc_pricingtable03 div.column_2:hover,
div.tsc_pricingtable03 div.column_3:hover,
div.tsc_pricingtable03 div.column_4:hover { position:relative; z-index:100; left:-5px; top:-15px; /* shadow */ box-shadow:5px 0px 30px rgba(0, 0, 0, 0.5); -webkit-box-shadow:5px 0px 30px rgba(0, 0, 0, 0.5); -moz-box-shadow:5px 0px 30px rgba(0, 0, 0, 0.5);} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T18:48:32.947

请参阅下面更正后的 css 规则。

```
div.tsc_pricingtable03 div.column_1:hover, 
div.tsc_pricingtable03 div.column_2:hover, 
div.tsc_pricingtable03 div.column_3:hover, 
div.tsc_pricingtable03 div.column_4:hover {

position: relative;
z-index: 100;
left: -5px;
top: -15px;
box-shadow: 5px 0px 30px rgba(0, 0, 0, 0.5);
-webkit-box-shadow: 5px 0px 30px rgba(0, 0, 0, 0.5);
-moz-box-shadow: 5px 0px 30px rgba(0, 0, 0, 0.5);
margin-bottom: -30px; /// Note the added removal of the bottom margin that all "non" active elements have
} 
```

这是必需的，因为您为包装器提供了 100% 的高度，因此它将始终保持 24 像素的填充。但是，为了防止`:hover`元素改变包装器的高度，您需要让该元素专门删除包装器添加的所有填充以有效地忽略它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-19T19:03:04.173

您还可以考虑使用 CSS`transform`属性，该技术也用于您的第四个表中。例如：

```
.some_table .some-table-column:hover {
    -webkit-transform: scale(1.1);
    -moz-transform: scale(1.1);
    -ms-transform: scale(1.1);
    -o-transform: scale(1.1);
} 
```

CSS 转换非常适合这种情况，因为它们[“允许在不破坏正常流程的情况下更改受影响内容的位置”](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transforms)。

# ios - ARC 语义问题：“UIStoryboard”没有可见的@interface 声明选择器

> ID：14417438
> 
> 赞同：1
> 
> 时间：2013-01-19T18:31:58.520
> 
> 标签：ios, objective-c, uistoryboard

我得到的错误是：

> ''UIStoryboard' 没有可见的@interface 声明选择器 instantiateInitialViewControllerWithIdentifier：'

谢谢您的帮助。

```
#import "initViewController.h"
#import "ECSlidingViewController.h"
#import "MenuViewController.h"

@interface initViewController ()

@end

@implementation initViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.topViewController = [self.storyboard instantiateInitialViewControllerWithIdentifier:@"Main"];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:42:26.120

[UIStoryboard](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIStoryboard_Class/Reference/Reference.html)没有实现该名称的方法。它确实实现`instantiateViewControllerWithIdentifier:`了，这看起来像你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:43:19.397

(1) 添加`#import <UIKit/UIKit.h>`到文件顶部并确保您拼写正确的方法。

(2) 类名应大写。

# php - 使用 PHP 声明页面 url

> ID：14417443
> 
> 赞同：0
> 
> 时间：2013-01-19T18:32:36.413
> 
> 标签：php, mysql

我正在做一个允许我创建客户数据库的项目。我已经创建了一个 Create.php 和 Delete.php，但是在编辑页面的基本结构方面遇到了问题。

我最初的想法是创建一个填充的下拉框（我可以这样做），点击它会将用户带到 domain.com/Customer.php?Customer_name="JohnD"

我对此有一些问题，因为它正在做两件事。

1.  它正在将我表中的所有数据打印到回声中。
2.  它没有从 URL 中获取值，但是我知道我错过了一些东西，但不确定我需要搜索什么。

到目前为止，这是我的片段：

```
 <h2>
                <?Php
                $sql="SELECT id,customer_name FROM Customers";
                $result =mysql_query($sql);
                while ($data=mysql_fetch_assoc($result)){
                ?>
                <?Php echo $data['customer_name']; } ?>
                </h2> 
```

到目前为止，我在标题中得到了这个：

John Doe Jimmy Timmy 测试

这些是我的表客户行中的所有值。

抱歉，如果问题似乎无处不在。如果不容易理解，我会纠正。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:36:41.737

您需要使用`$_GET`从 URL 中获取参数。

```
<?php

  //customer.php?Customer_name=JohnD (no quotes)

  echo $_GET[Customer_name];

?> 
```

然后，您将使用`mysqli_`or`PDO`来绑定`$_GET[Customer_name]`和执行查询。如果您在 SQL 查询中不绑定参数，您将容易受到 SQL 注入的攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T18:41:40.940

您需要使用 where 子句将 SQL 选择限制为特定客户。您可能会从请求中获取该客户 ID。我建议您在下拉框中使用客户 ID 而不是名称。这样 URL 将是：

```
 domain.com/Customer.php?id=1 
```

在 Customer.php 页面上，您可以使用`$id = $_GET['id'];`

现在对于您的 SQL，您应该使用一些更安全的方法来查询数据库说：

```
 $dsn = 'mysql:host=localhost;dbname=mydb';
   $username = 'myun';
   $password = 'mypw';
   $options = array(
       PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8',
   ); 
   $dbh = new PDO($dsn, $username, $password, $options);
   $stmt = $dbh->prepare("select id, Customer_name from customers where id = :id");
   $stmt->bindParam(':id', $id);
   $stmt->execute();

   while($c = $stmt->fetch()){
          echo $c['customer_name'];
   } 
```

这样只会显示所选客户的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T18:46:04.310

使用这个网址

```
domain.com/Customer.php?CID=1 
```

并且代码应该看起来像

```
<?php

            $customer_id = (int) $_GET['CID'];

            $query = "SELECT id, customer_name FROM Customers 
                           WHERE id = {$customer_id}";

            $result = mysql_query($query) or die('<p>' . $query . '</p><div>' . 
                                   mysql_error() . '</div>');

            $customer = mysql_fetch_assoc($result);  

?>
 <h2><?php echo $customer['customer_name'] ?></h2> 
```

# java - 在 Eclipse 中无法解析导入的 org.apache.wicket

> ID：14417444
> 
> 赞同：0
> 
> 时间：2013-01-19T18:32:40.727
> 
> 标签：java, eclipse, m2e

我刚刚**为 Eclipse 安装了 wicket 插件，**并且还设置了所有环境变量。但是当我`mvn -version`在命令提示符下运行时，它会显示正确的版本。

但是在 Eclipse 中，当我导入包时，它会显示`import org.apache.wicket`无法解决的错误。

任何人都可以提出解决方案或建议吗？

# java - 从接口调用一些方法而不覆盖JAVA中的所有方法

> ID：14417450
> 
> 赞同：2
> 
> 时间：2013-01-19T18:33:31.727
> 
> 标签：java, class, design-patterns, interface, dependency-injection

朋友们，我在 Java 中遇到了一个问题：我想实现一个结构，但我在做这件事时遇到了一些困难，谁能帮助我。

```
interface samp1{
    method1()
    method2()
    method3()
}

interface samp2{
    method4()
    method5()
}
class Samp implements samp1,samp2
{
  // this class needs only method1 from interface samp1 and method 4 from interface samp2
  // I don't want to override all the methods from interface 
} 
```

任何人都可以为此提出一些解决方案吗？

有没有可用的设计模式？如果是这样，请提供参考链接。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T18:37:08.263

一个接口就是一个*契约*。它说“我的班级实现*了所有*这些方法”。

请参阅：[http ://docs.oracle.com/javase/tutorial/java/concepts/interface.html](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)

如果您不希望那样，请不要使用接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-03T16:22:55.243

Java 8 allows default methods in an interface, that are used if the particular method is not overridden when the interface is implemented. For example:

```
interface MyInterface{
    //if a default method is not provided, you have to override it 
    public int Method1(); 
    public default int Method2(){
        return 2;
    }
}

public class MyClass{
    public static void main(String args[]){
        MyInterface in = new MyInterface(){
            public int Method1(){
                return 0;
            }
        };
        //uses the implemented method
        System.out.println(in.Method1()); //prints 0
        //uses the default method
        System.out.println(in.Method2()); // prints 2
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T19:02:54.617

实现接口时，除了实现接口中的所有方法之外别无他法。在上面的“samp”类中，您正在实现“samp1”和“samp2”接口，因此您必须在 samp 类中实现 samp1 和 samp2 中的所有方法。

你说从接口覆盖方法。您不会覆盖接口中的方法，您只需实现方法。

您可以使用抽象类来解决您的问题。

```
abstract class AbstractSamp implement samp1,samp2{

 method1(){...}
 method4(){...}
} 
```

您可以在您的 samp 类中扩展 Abstractsamp，如下所示

```
class samp extends AbstractSamp{

// here you can extend method1() and method4() by inheritence and you can also    override   them as you want

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T18:36:30.527

如果没有更多关于您要实现的目标的背景信息，我建议您这样做：

```
interface BaseSamp {
    void method1();
    void method4();
}

interface Samp1 extends BaseSamp {
     void method2();
     void method3();
}

interface Samp2 extends BaseSamp {
    void method5();
}

class YourClass implements BaseSamp {
 ....
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T18:40:25.987

```
interface MySpecializedInterface{
   public void method1();
   public void method4();
}

class YourClass implements MySpecializedInterface{

  // now you can implement method1 and method4... :|
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-19T18:34:44.470

将类声明为`abstract`，您将不需要实现所有方法。但是，请注意抽象类不能被实例化。

# ios - 在 Xcode 4.6 中使用 Base SDK iOS 6.0.2

> ID：14417451
> 
> 赞同：2
> 
> 时间：2013-01-19T18:33:32.677
> 
> 标签：ios, xcode

我已经安装了 Xcode 4.6 beta（包括 iOS 6.1 beta SDK），但还不想在我的（开发）iPhone 上安装 iOS 6.1。我宁愿继续使用 iOS 6.0.2 进行开发（或者改用 iPhone 模拟器）。

因此，我尝试将 iOS 6.0.2 下载并安装到 XCode 4.6 中：确实，在其管理器窗口中，iOS 6.1（默认）和 iOS 6.0.2（通过此操作）现在都显示出来了。然而，当我尝试更改我的项目的基本 SDK（在其构建设置下）时，Xcode 似乎仍然没有意识到第二个选择：唯一可用的与 iOS 相关的选择是 iOS 6.1 和最新的 iOS（即 iOS 6.1）。

如何将（已安装的）iOS 6.0.2 SDK 添加到该列表，以便我可以选择它作为我项目的基础 SDK？

PS我目前的理解是，这与[其他](https://stackoverflow.com/questions/3856807/debug-for-ios-3-x-in-xcode-with-sdk-4-1)（常见）问题不同。

PSS 大概这些都不是 Xcode 4.6 所特有的，而不是早期版本。因此，我觉得即使在保密协议之外也有权提及它，因为它的存在本身是众所周知的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:44:29.177

尝试将目标设置为较低版本！

![设定目标](../Images/fe0899b164dc32402cf1f467975377c5.png)

# iphone - 将照片导出到 Instagram

> ID：14417459
> 
> 赞同：0
> 
> 时间：2013-01-19T18:34:19.307
> 
> 标签：iphone, ios, xcode, instagram, uidocument

我正在尝试使用以下代码将照片从我的应用程序导出到 Instagram：

```
// Capture Screenshot
UIGraphicsBeginImageContextWithOptions(self.view.frame.size,self.view.opaque,0.0);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
NSData *imageData = UIImageJPEGRepresentation(image, 1.0);
NSString  *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/test.igo"];
NSURL *igImageHookFile = [[NSURL alloc] initWithString:[[NSString alloc] initWithFormat:@"file://%@", jpgPath]];
dic = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:igImageHookFile]];
dic.UTI = @"com.instagram.photo";
dic.annotation = [NSDictionary dictionaryWithObject:@"my caption" forKey:@"InstagramCaption"];
NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];
if ([[UIApplication sharedApplication] canOpenURL:instagramURL]) {
  [[UIApplication sharedApplication] openURL:instagramURL];
} else {
  NSLog(@"No Instagram Found");
} 
```

但它不起作用。它崩溃并出现以下错误：

> 2013-01-19 20:40:41.948 Ayat[12648:c07] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[NSURL initFileURLWithPath:]: nil string parameter”

我不确定我是否正确：

1-将 jpgpath 保存为我拍摄的屏幕截图。

2- 将“dic”文档传递给 Instagram。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-19T18:52:13.247

在我的应用程序中，我还将照片导出到 Instagram。（图像必须大于 612x612 尺寸）试试这个代码：

```
-(void)shareImageOnInstagram:(UIImage*)shareImage
{
    //Remember Image must be larger than 612x612 size if not resize it.   

    NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];

    if([[UIApplication sharedApplication] canOpenURL:instagramURL])
    {
        NSString *documentDirectory=[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
        NSString *saveImagePath=[documentDirectory stringByAppendingPathComponent:@"Image.ig"];
        NSData *imageData=UIImagePNGRepresentation(shareImage);
        [imageData writeToFile:saveImagePath atomically:YES];

        NSURL *imageURL=[NSURL fileURLWithPath:saveImagePath];

        UIDocumentInteractionController *docController=[[UIDocumentInteractionController alloc]init];
        docController.delegate=self;
        [docController retain];
        docController.UTI=@"com.instagram.photo";

        docController.annotation=[NSDictionary dictionaryWithObjectsAndKeys:@"Image Taken via @App",@"InstagramCaption", nil];

        [docController setURL:imageURL];

        [docController presentOpenInMenuFromBarButtonItem:self.navigationItem.rightBarButtonItem animated:YES];  //Here try which one is suitable for u to present the doc Controller. if crash occurs

    }
    else
    {
        NSLog (@"Instagram not found");

    }

} 
```

我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T18:56:43.243

在这条线上

```
dic = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:igImageHookFile]]; 
```

你在打电话`fileURLWithPath:`。首先，这需要一个`NSString`，而不是一个`NSURL`，但从您的错误消息来看，它看起来`igImageHookFile`像`nil`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T04:03:41.593

花了很多研究，但我终于在这个网站上找到了这个有帮助的。我只是把它修整了一下，不包括标题，因为那是他原来的问题……但如果你只是把图片放进去，这里是：

```
-(void)shareImageOnInstagram
{
//Remember Image must be larger than 612x612 size if not resize it.
 NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];
if ([[UIApplication sharedApplication] canOpenURL:instagramURL]){
    NSString *urlString = [[NSString alloc] initWithFormat:@"file://%@", blendedImageURL];
    NSURL *imageUrl = [[NSURL alloc] initWithString: urlString];
    self.docController = [self setupControllerWithURL:imageUrl usingDelegate:self];
    self.docController.UTI = @"com.instagram.exclusivegram";
   // self.docController.annotation = [NSDictionary dictionaryWithObject:@"I want to     share this text" forKey:@"InstagramCaption"];
    [self.docController presentOpenInMenuFromRect: self.view.frame inView: self.view     animated: YES ];}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T11:53:16.957

我尝试了以下代码并且它有效：

```
- (void) shareImageWithInstagram
{
    NSURL *instagramURL = [NSURL URLWithString:@"instagram://"];
    if ([[UIApplication sharedApplication] canOpenURL:instagramURL])
    {
        UICachedFileMgr* mgr = _gCachedManger;
        UIImage* photoImage = [mgr imageWithUrl:_imageView.image];
        NSData* imageData = UIImagePNGRepresentation(photoImage);
        NSString* captionString = [NSString stringWithFormat:@"%@%@",self.approvedData.approvedCaption,self.approvedData.tag];
        NSString* imagePath = [UIUtils documentDirectoryWithSubpath:@"image.igo"];
        [imageData writeToFile:imagePath atomically:NO];
        NSURL* fileURL = [NSURL fileURLWithPath:[NSString stringWithFormat:@"file://%@",imagePath]];

        self.docFile = [[self setupControllerWithURL:fileURL usingDelegate:self]retain];
        self.docFile.annotation = [NSDictionary dictionaryWithObject: captionString
                                                         forKey:@"InstagramCaption"];
        self.docFile.UTI = @"com.instagram.photo";

        // OPEN THE HOOK
        [self.docFile presentOpenInMenuFromRect:self.view.frame inView:self.view animated:YES];
    }
    else
    {
        [UIUtils messageAlert:@"Instagram not installed in this device!\nTo share image please install instagram." title:nil delegate:nil];
    }
} 
```

# ios - iOS DDMathParser 获取数字“块”

> ID：14417462
> 
> 赞同：1
> 
> 时间：2013-01-19T18:34:35.300
> 
> 标签：ios, nsstring, numbers, expression, calculator

我正在使用 DDMathParser 为 iOS 构建一个计算器应用程序。**我想知道如何将表达式 ( `NSString`)分开`5+900/32`为其单独的数值：`5`、`900`和`32`.** 我宁愿将这些放在一个`NSArray`或其他相对有用的列表对象中。我听说有一种简单的方法可以做到这一点`DDMathParser`- 这就是我从`GCMathParser`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:47:20.650

DDMathParser 作者在这里。

是的，这很容易，并且有几种方法可以解决。如果您只是想要数字是什么而不关心运算符，则可以使用[标记](https://github.com/davedelong/DDMathParser/wiki/Tokenizing)化API：

```
NSError *tokenizingError = nil;
DDMathStringTokenizer *tokenizer = [DDMathStringTokenizer tokenizerWithString:@"5+900/32" error:&tokenizingError];
NSArray *tokens = [tokenizer tokens];

NSMutableArray *numbers = [NSMutableArray array];
for (DDMathStringToken *token in tokens) {
  if ([token tokenType] == DDTokenTypeNumber) {
    [numbers addObject:[token numberValue]];
  }
}

// numbers now is @[ @5, @900, @32 ]; 
```

然而，这种方法有一个警告，最好用这个例子来说明： `@"-42"`. DDMathParser 中的标记总是被解析为*无符号*数字，因为前面的减号实际上是一个运算符，并且根据其他运算符的应用不同。这意味着如果您对字符串进行标记`@"-42"`，您将看到它包含*两个*标记：一个否定运算符和数字 42。

# javascript - JavaScript DRY 对象构造函数

> ID：14417463
> 
> 赞同：0
> 
> 时间：2013-01-19T18:34:37.963
> 
> 标签：javascript, prototype, dry, factory

我有一个看起来像这样的对象：

```
var myObj = {
  _fooCon: function(f) {
             if (typeof f != 'function') throw new TypeError('Bad Foo');
             this.fn = f;
           },

  _barCon: function(f) {
             if (typeof f != 'function') throw new TypeError('Bad Bar');
             this.fn = f;
           },

  someFoo: function(v) {
             return new this._fooCon(function(x) {
               return x + ' Foo ' + v;
             });
           },

  someBar: function(v) {
             return new this._barCon(function(x) {
               return x + ' Bar ' + v;
             });
           }
}; 
```

这样做的原因是我可以`instanceof`高效地使用（即，我可以区分在不同场景中使用的两个对象，尽管它们在结构上是相同的）。`someFoo`（忽略和`someBar`相似的事实！）

有没有办法可以抽象构造函数，所以如果我需要创建，比如说，`_bazCon`我不需要重复自己；或者，如果有错误，我不必修复每个构造函数定义？

我试着做一个工厂成员，像这样：

```
_factory: function(type, f) {
            if (typeof f != 'function') throw new TypeError('Bad ' + type);
            this.fn = f;
          } 
```

...然后：

```
_fooCon: function(f) { return new this._factory('Foo', f); } 
```

即使不尝试这个，我也可以看到它不起作用！关于如何实现我正在寻找的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:49:09.857

如果你的函数真的做同样的事情，那么它就像这样简单：

```
var myObj = {
  _factory: function(err) {
                return function(f) {
                    if (typeof f != 'function') throw new TypeError('Bad ' + err);
                    this.fn = f;
                };
            },
  someFoo: function(v) {
             return new this._fooCon(function(x) {
               return x + ' Foo ' + v;
             });
           },

  someBar: function(v) {
             return new this._barCon(function(x) {
               return x + ' Bar ' + v;
             });
           }
};

myObj._fooCon = myObj._factory("Foo");
myObj._barCon = myObj._factory("Bar"); 
```

如果还有其他行为可以区分它们，那么您可能会`_factory`收到一个在构造函数中调用的函数参数。该函数可以使用`.call`或`.apply`设置`this`正在构造的对象的值。

* * *

另一种方法是使用构造函数来创建`myObj`，并利用变量范围，这样您就不需要公开`_xxxCon`构造函数。

这使用匿名函数作为构造函数，因为我们不再需要它。

```
var myObj = new function() {
    var _factory = function(err) {
                return function(f) {
                    if (typeof f != 'function') throw new TypeError('Bad ' + err);
                    this.fn = f;
                };
            };

    var _fooCon = _factory("Foo");
    var _barCon = _factory("Bar");

    this.someFoo = function(v) {
             return new _fooCon(function(x) {
               return x + ' Foo ' + v;
             });
           },

    this.someBar = function(v) {
             return new _barCon(function(x) {
               return x + ' Bar ' + v;
             });
           }
}; 
```

您不一定需要将外部函数用作构造函数，但您确实需要一个将对象返回到`myObj`.

如果您*确实*想公开这些`_xxxCon`功能，请更改`var`为`this.`, 并将`this.`后面放入`someFoo`and `someBar`。

# python - 如何从句子的开头匹配一个特定的单词并在 Python 中得到不匹配的部分？

> ID：14417470
> 
> 赞同：0
> 
> 时间：2013-01-19T18:35:12.897
> 
> 标签：python, regex

我是 Python 新手，我不知道 Python 中的正则表达式。这是问题。我在标准输出中有一个像“总成本：37”这样的句子，我想提取成本信息是 37。当我在特定行中匹配“总成本：”这个词时，我应该如何获得该行的其余部分我感兴趣的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T18:37:16.747

使用`regex`：

`Total Cost:\s?`解释：

“总成本”：匹配字面量`Total Cost:`

`\s?`：`1 to 0 times Whitespace [\t \r\n\f]`

捕获组`([-+]?\d+)`：

`[-+]?`：`1 to 0 times matches one of the following chars: -+`

`\d+`：`infinite to 1 times Digit [0-9]`

```
In [121]: strs="some text Total Cost: 37 some more more Total Cost: -100"

In [122]: re.findall(r"Total Cost:\s?([-+]?\d+)",strs)
Out[122]: ['37', '-100'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:06:26.620

虽然您说这个问题与“正则表达式”有关，但我专注于您所说的关于输出的内容。您的标准输出为：

```
Total Cost: 37 
```

假设这个输出存储在一个名为`output_string`. 我使用 Python 解释器：

```
In [11]: output_string = "Total Cost: 37"

In [13]: (total_text_string, total_numeric_string) = 
         output_string.split(':')

In [14]: total_text_string
Out[14]: 'Total Cost'

In [15]: total_numeric_string
Out[15]: ' 37'

In [16]: float(total_numeric_string)
Out[16]: 37.0 
```

我们取字符串，使用`split`方法，用“:”作为分隔符。我们最终得到两个字符串，一个用于文本部分，一个包含数字部分。由于您可能希望成本包含小数，因此您可以通过“float”将其“转换”为浮点数。然后，您可以决定要如何处理这些值。

# wpf - 发生 XamlParseException - 为椭圆设置动画

> ID：14417472
> 
> 赞同：0
> 
> 时间：2013-01-19T18:35:14.577
> 
> 标签：wpf, xaml, wpf-controls

我有以下代码可以永远为椭圆的宽度设置动画，直到窗口关闭。但是，它会抛出`XamlParseExceptionError`. 有人能指出我在哪里犯了错误吗？

`

```
 </TextBlock>

        <TextBlock x:Uid="ProductName" Localization.Attributes="$Content(Readable Unmodifiable)">
            <TextBlock.ToolTip>
                <TextBlock x:Uid="ProductNameTip" Localization.Attributes="$Content(ToolTip Readable Modifiable)">
                    A photo editor that will make everyone look beautiful
                </TextBlock>
            </TextBlock.ToolTip>
            Amazing Photo Editor
        </TextBlock>

        <Ellipse Name="Circle" 
                 Width="100" 
                 Height="100" 
                 Fill="Red">
            <Ellipse.Triggers>
                <EventTrigger RoutedEvent="Ellipse.Loaded">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.Target="Circle" 
                                             Storyboard.TargetProperty="Width" 
                                             From="1" 
                                             To="100" 
                                             Duration="0:0:5" 
                                             AutoReverse="True" 
                                             RepeatBehavior="Forever">

                            </DoubleAnimation>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Ellipse.Triggers>
        </Ellipse>
    </StackPanel>
</Grid> 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:44:11.610

使用[`Storyboard.TargetName Attached Property`](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard.targetname.aspx)而不是`Storyboard.Target`.

```
<DoubleAnimation Storyboard.TargetName="Circle" 
```

# javascript - 页面加载后出现 jQuery 页面预加载器

> ID：14417473
> 
> 赞同：0
> 
> 时间：2013-01-19T18:35:18.933
> 
> 标签：javascript, jquery, html, dom

因此，在我的一个网站上，我添加了一个 jQuery 预加载器，它在除主页面之外的所有页面上都可以正常工作。导致问题的页面还有一个滑块 jQuery 插件，它似乎也不起作用（起初）。基本上，出于某种原因，jQuery 插件似乎只在页面完全加载后才会启动。它发生一次，一旦页面至少加载一次（缓存）一切正常。我尝试将脚本放置在 head 标签中和关闭 body 标签之前，没有区别。

您可以在这里看到问题（单击左侧红色按钮，之后您将被重定向到 /main.php 页面，这是导致问题的页面。） [http://freshbeer.lv](http://freshbeer.lv)

我不认为我需要在这里发布任何代码，因为我几乎可以肯定这与 jQuery 文件的定位有关（您可以通过检查页面看到），但是如果您认为它是不同的，并且您'希望我在这里发布代码，请随时提问，我会更新我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:52:39.023

你有这些：

```
<script src="js/placeholder.js"></script>
<script> $('input[placeholder], textarea[placeholder]').placeholder(); </script> 
```

在这之前：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

导致这些

```
Uncaught ReferenceError: jQuery is not defined   
Uncaught ReferenceError: $ is not defined 
```

忘了这个

```
GET http://freshbeer.lv/img/loading.gif 404 (Not Found) 
```

这些都在开发工具控制台中。在这种情况下，在 chrome 中，但其他浏览器也有。

# python - 尝试除了不从类中捕获 IOError

> ID：14417474
> 
> 赞同：2
> 
> 时间：2013-01-19T18:35:21.523
> 
> 标签：python, exception, try-catch

我有一个类可以读取特定格式的文件。这些文件的大小往往大于 8Gb，因此通常被压缩。在读取文件时，我想捕捉文件未压缩但既不`except IOError:`也不`except:`会这样做的错误，出于某种我不明白的原因。

在文件**VCF.py**中一起定义了几个类，尽管有问题的类是`vcfReader()`. 实例化对象的文件位于**test.py**下面，最后是 Traceback。

任何人都知道为什么它不起作用？

**VCF.py**

```
import gzip
import sys

class Call():
    '''
    Class to handle the sample genotypes and associated information
    '''

    def __init__(self,site,sample,format,data):
        #do stuff here#

class Variant():
    '''
    Class for a single row from a VCF file.
    '''
    def __init__(self, entry, samples):
       #do other stuff here

class vcfReader():
    '''
    read a compressed vcf file ignoring the meta-information, but parsing the header             for sample names
    '''  
    def __init__(self, file):
        try:
            self.vcfFile = gzip.open(file, 'rb')
        except IOError:
            print "Not a gzipped file"
            sys.exit()

        self.samples = self.readHeader()

    def readHeader(self):
        line = self.vcfFile.next()
        while line.startswith('#'):
            if line[1]!='#':
                #lines that start with ##, i.e. meta tags are ignored. Header line starting with '#', sample names are extracted.
                return line.rstrip().rsplit('\t')[9:]
            else:           
                line = self.vcfFile.next()

    def __iter__(self):
        return self

    def next(self):
        row =  self.vcfFile.next()
        return Variant(row, self.samples) 
```

然后**test.py**

```
import VCF
from collections import Counter

if __name__=='__main__':
    vcfreader = VCF.vcfReader('all_samples.vcf')

    filters = []
    for i in vcfreader:
        filters.extend(i.FILTERS)

    filters = Counter(filters)

    for k,v in filters.iteritems():
        print "{0}: {1}".format(k,v) 
```

这是回溯：

```
Traceback (most recent call last):
  File "C:\Users\Davy\Documents\Programming\VCF_stuff\src\test.py", line 10, in <module>
    vcfreader = VCF.vcfReader('all_samples.vcf')
  File "C:\Users\Davy\Documents\Programming\VCF_stuff\src\VCF.py", line 95, in __init__
    self.samples = self.readHeader()
  File "C:\Users\Davy\Documents\Programming\VCF_stuff\src\VCF.py", line 98, in readHeader
    line = self.vcfFile.next()
  File "C:\Python27\lib\gzip.py", line 450, in readline
    c = self.read(readsize)
  File "C:\Python27\lib\gzip.py", line 256, in read
    self._read(readsize)
  File "C:\Python27\lib\gzip.py", line 291, in _read
    self._read_gzip_header()
  File "C:\Python27\lib\gzip.py", line 185, in _read_gzip_header
    raise IOError, 'Not a gzipped file'
IOError: Not a gzipped file 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T18:38:21.530

您的`except`块没有捕获异常的原因是它发生在`try`块之外：

```
def __init__(self, file):
    try:
        self.vcfFile = gzip.open(file, 'rb')
    except IOError:
        print "Not a gzipped file"
        sys.exit()

    self.samples = self.readHeader() # <<<<<<<< exception is raised here 
```

# android - 解析的 XML 数据未在 android 中检索

> ID：14417475
> 
> 赞同：-1
> 
> 时间：2013-01-19T18:35:26.313
> 
> 标签：android, xml, parsing

> **可能重复：**
> [如何创建一个 xml api 将数据提供给我的 android 应用程序](https://stackoverflow.com/questions/14416159/how-to-create-an-xml-api-that-will-give-data-to-my-android-app)

我以前也问过这个问题，但这次我做了一些研究并回来了，因为我没有得到任何关于我的问题的答案。

我有一个 data.xml 文件，其中包含我想提供给我的 android 应用程序的数据。我已经完成了 android-end 编码，我认为它完美无缺。但是数据没有从文件中检索到我的应用程序中。我的文件结构是这样的：

(a)data.xml (b)Main (c)HandlingXMLStuff (d)XMLDataCollected

(a)data.xml

```
<?xml version="1.0" encoding="utf-8"?>
  <document version="first">
    <stuff code="firststuff">
      <item1 build="first">This is first item.</item1>
      <item2 build="second">This is second item.</item2>
      <item3 build="third">This is third item.</item3>
    </stuff>
    <stuff code="secondtstuff">
      <item1 build="first">This is first item.</item1>
      <item2 build="second">This is second item.</item2>
      <item3 build="third">This is third item.</item3>
    </stuff>
    <stuff code="thirdstuff">
      <item1 build="first">This is first item.</item1>
      <item2 build="second">This is second item.</item2>
      <item3 build="third">This is third item.</item3>
    </stuff>
  </document> 
```

(b)主要

```
package com.xyz.xmlpar1;
import java.net.URL;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Main extends Activity implements OnClickListener {
  static final String BaseURL="http://www.xyz.com/data.xml?code=";
  Button b;
  TextView tv;
  EditText et1;
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    et1=(EditText) findViewById(R.id.editText1);
    b=(Button) findViewById(R.id.button1);
    tv=(TextView) findViewById(R.id.textView1);
    b.setOnClickListener(this);
  }
  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
  }
  @Override
  public void onClick(View v) {
    // TODO Auto-generated method stub
    String item=et1.getText().toString();
    StringBuilder URL=new StringBuilder(BaseURL);
    URL.append(item);
    String fullURL=URL.toString();
    try{
      URL website=new URL(fullURL);
      SAXParserFactory spf=SAXParserFactory.newInstance();
      SAXParser sp=spf.newSAXParser();
      XMLReader xr=sp.getXMLReader();
      HandlingXMLStuff doingWork=new HandlingXMLStuff();
      xr.setContentHandler(doingWork);
      xr.parse(new InputSource(website.openStream()));
      String information=doingWork.getInformation();
      tv.setText(information);
    }catch(Exception e){
      tv.setText("error");
    }
  }
} 
```

(c)处理XMLStuff

```
package com.xyz.xmlpar1;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class HandlingXMLStuff extends DefaultHandler {
  XMLDataCollected info=new XMLDataCollected();
  public String getInformation(){
    return info.datatoString();
  }
  @Override
  public void startElement(String uri, String localName, String qName,
    Attributes attributes) throws SAXException {
    // TODO Auto-generated method stub
    if(localName.equals("code")){
      String element=attributes.getValue("build");
      info.setData(element);
    }
  }
} 
```

(d)XMLDataCollected

```
package com.xyz.xmlpar1;
public class XMLDataCollected {
  String datac=null;
  public void setData(String c){
    datac=c;
  }
  public String datatoString(){
    return datac;
  }
} 
```

因此，当我键入第一个或第二个或第三个时，它应该检索数据。但事实并非如此。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:27:25.177

看起来问题出在您的处理程序上。您只是添加一个`startElement`功能，但实际上您至少需要处理开始和结束标签。

此外，您`localName.equals("code")`实际上应该寻找标签的名称，即`localName.equals("stuff")`

这里有一个完整的例子：[http](http://www.mysamplecode.com/2011/11/android-parse-xml-file-example-using.html) ://www.mysamplecode.com/2011/11/android-parse-xml-file-example-using.html和大量的帖子在这里[http://stackoverflow.com](http://stackoverflow.com)让你使用 SAX 的完全工作的解析器。

我肯定会建议尝试调试您的代码以查看运行它时实际发生的情况。您可以通过在 IDE 中使用调试模式或简单地在其中抛出一些`System.out.println()`或`Log.d()`语句来做到这一点。

# objective-c - 目标C正则表达式？

> ID：14417478
> 
> 赞同：1
> 
> 时间：2013-01-19T18:35:41.097
> 
> 标签：objective-c, regex

我正在尝试从页面的源代码中解析一个 7 位数字，而我寻找的模式是

/nnnnnnn"

其中“n”是一个数字。我正在尝试使用以下正则表达式，并且在正则表达式测试站点中它可以工作，但在 obj-c 中却不行。是否有可能我传递了错误的选项或其他什么？

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"/\d\d\d\d\d\d\d\">" options:NSRegularExpressionSearch error:nil];
NSUInteger numberOfMatches = [regex numberOfMatchesInString:contents
                                                    options:0
                                                      range:NSMakeRange(0, [contents length])]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:38:29.767

您应该将`d`s 前面的反斜杠加倍，如下所示：

```
@"/\\d\\d\\d\\d\\d\\d\\d\">" 
```

反斜杠是字符串文字中的一个特殊字符：它后面的字符有不同的解释。为了让正则表达式引擎看到反斜杠，您需要在文字中使用两个斜杠。

# firefox-addon - 无法从内容脚本中的 main.js 接收端口消息

> ID：14417479
> 
> 赞同：1
> 
> 时间：2013-01-19T18:35:50.333
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在尝试通过端口从我的 main.js 向我的面板的内容脚本发送一条消息。我已经尝试了很多没有运气的事情，但是从内容脚本向 main.js 发送消息效果很好。

这是我的 main.js 的样子：

```
var data = require("self").data;
var setting = require("panel").Panel({
  width: 250,
  height: 130,
  contentURL: data.url("www.google.com"),
  contentScriptFile: data.url("script.js")
});
require("widget").Widget({
  id: "sorter1",
  label: "Search Result Sorting",
  contentURL: data.url("icon.ico"),
  panel: setting
});
setting.port.emit("message"); 
```

这是我的内容脚本：

```
self.on("message", function(addonMessage) {
  document.innerHTML = "Got Message"
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:48:50.073

几天前就想通了，只是没有时间在这里发帖。

使用面板时需要注意的几点：

*   面板页面在加载扩展时加载，而不是在显示时加载。
*   面板页面的内容脚本在页面显示时被注入到面板页面中。（当 contentScriptWhen 属性为默认时）
*   内容脚本无权访问附加 SDK 资源。

这就是我实现它的方式

在 main.js

```
panel.on("show", function() {
     panel.port.emit("message");
}); 
```

在面板内容脚本中

```
self.port.on("message", function() {
    //doThings
}); 
```

port.emit() 不需要第二个参数，尽管第二个参数将传递给内容脚本

```
function(secondArg) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:24:55.783

[更新]对不起，我没有完全阅读代码。

首先，您实际上需要向面板发送消息，例如

```
setting.port.emit('message', someData); 
```

对于第二部分：我想你想要：

```
self.port.on("message", function(addonMessage) {
    document.innerHTML = "Got Message"
}); 
```

相关文档在这里：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/using-port.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/using-port.html)

# php - 如何在 PHP 中检查 URL 是否重定向到另一个页面？

> ID：14417481
> 
> 赞同：0
> 
> 时间：2013-01-19T18:36:00.197
> 
> 标签：php, redirect, curl, boolean

我想看的是用户输入的url是否重定向到PHP中的另一个页面。我不想看到它重定向到哪里，而只想看到它是否重定向到另一个页面。

这是我目前正在尝试使用的：

```
<?php
  echo "Redirect check";
  $ch = curl_init('http://www.google.com/');
  curl_exec($ch);
  $code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
  if ($code === 301 || $code === 302 || $code === 303 || $code === 307) {
    $redirect = true;
  }else{
    $redirect = false;
  }
?> 
```

但是，当我运行它时，它会在显示“重定向检查”片刻后将我重定向到 yahoo.com。

任何帮助，将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:45:37.617

当您只检查标题时，您不需要 BODY。只需发送`HEAD`请求。你也不需要重定向。所以在`curl_exec`.

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);
curl_setopt($ch, CURLOPT_NOBODY, true); 
```

查看[示例](http://codepad.viper-7.com/HcLcTk)

# c++ - 为什么我会收到 E_OUTOFMEMORY？

> ID：14417482
> 
> 赞同：4
> 
> 时间：2013-01-19T18:36:00.927
> 
> 标签：c++, winapi, visual-studio-2012, direct3d

出于某种原因，下面的代码会给我一个内存不足的错误。我错过了什么？

```
 for(int n = 0; n < 512; ++n)
    {               
        D3D11_TEXTURE2D_DESC texture_desc = {};
        texture_desc.Width                = 1920;
        texture_desc.Height               = 1080;
        texture_desc.MipLevels            = 1;
        texture_desc.ArraySize            = 1;
        texture_desc.Format               = DXGI_FORMAT_R8G8B8A8_UNORM;
        texture_desc.SampleDesc.Count     = 1;
        texture_desc.Usage                = D3D11_USAGE_DEFAULT;
        texture_desc.BindFlags            = D3D11_BIND_RENDER_TARGET | D3D11_BIND_SHADER_RESOURCE;

        ID3D11Texture2D* target_d3d_ptr;
        HRESULT hr = this->device_ptr->CreateTexture2D(&texture_desc, nullptr, &target_d3d_ptr);
        if(FAILED(hr))
            throw runtime_error(_com_error(hr).ErrorMessage());

        target_d3d_ptr->Release();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:57:48.247

只是一个想法，但您是否考虑过：1920 * 1080 * 32 位 = 8294400 字节现在，8294400 字节 x 485 个纹理 = 3.836 GB 内存。这正好是 32 位机器的极限。我不知道您是在编写 32 位还是 64 位程序，但如果它是 32 位，那么您可以寻址的最大虚拟内存略低于 4GB，并且 512 个纹理会让您超过这个限制。考虑到 Release 不会立即释放此内存，并且*如果*您实际上是在 32 位编码，那么应该清楚为什么您会耗尽内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-29T16:57:50.083

事实证明，catflier 在评论中提供了这个问题的答案：

> release 不会立即发布，因为在代码上没有调用它永远不会这样做。调用 devicecontext`Flush`方法或存在的一些交换链（这将刷新设备）将导致资源删除

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-29T15:26:32.857

也许不是你的情况，但是，例如，Microsoft 的 COM 方法[`CComObject::CreateInstance`](http://msdn.microsoft.com/en-us/library/9e31say1.aspx)可以返回`E_OUTOFMEMORY`（至少在我可以在我的环境中找到的实现中，即 Visual Studio 2012）并且在我看来它可能会产生误导。

COM 方法类似于以下（在`atlcom.h`）

```
ATLPREFAST_SUPPRESS(6387)
template <class Base>
_Success_(return == S_OK) HRESULT WINAPI CComObject<Base>::CreateInstance(
    _Deref_out_ CComObject<Base>** pp) throw()
{
    // code omitted

    HRESULT hRes = E_OUTOFMEMORY;
    CComObject<Base>* p = NULL;
    ATLTRY(p = new CComObject<Base>())
    if (p != NULL)
    {
        // code omitted
    }
    *pp = p;    
    return hRes;
}
ATLPREFAST_UNSUPPRESS() 
```

在我看来，`E_OUTOFMEMORY`即使您还有很多可用内存，上面的代码也可以返回：宏`ATLTRY`只是将调用包装`new`在 try-catch(...) 块中，因此如果构造函数`Base`失败抛出异常，*任何*类型的异常，即使与内存问题无关，`p`也会出现`NULL`并且函数将返回`E_OUTOFMEMORY`。

# php - 使用js和或php查找xml节点之间的关系

> ID：14417484
> 
> 赞同：0
> 
> 时间：2013-01-19T18:36:27.790
> 
> 标签：php, xml, relationship, traversal, similarity

这更像是一个推测性的问题，关于你们都认为是解决我遇到的特定问题的最佳方法或最聪明的方法。

我目前正在开发一个 Web 应用程序，它主要由一个巨大的 XML 树驱动。该应用程序的重点是根据节点之间的关系随机生成适当的节点序列。

节点的分类非常好，但初始选择需要很大程度上是随机的，接下来的选择需要基于第一个节点。选择应该是随机的，但每个选择之间不应有明显的逻辑相似性。

例如给定以下树：

```
<things>
    <foods>
        <fruits>
            <fruit>apple</fruit>
            <fruit>orange</fruit>
            <fruit>melon</fruit>
            <fruit>banana</fruit>
            <fruit>grape</fruit>
        </fruits>
        <vegetables>
            <vegetable>potato</vegetable>
            <vegetable>carrot</vegetable>
            <vegetable>onion</vegetable>
            <vegetable>leek</vegetable>
        </vegetables>
    </foods>
    <animals>
        <birds>
            <bird>penguin</bird>
            <bird>ostrich</bird>
            <bird>parrot</bird>
            <bird>crow</bird>
            <bird>emu</bird>
        </birds>
        <fish>
            <fish>cod</fish>
            <fish>plaice</fish>
            <fish>salmon</fish>
            <fish>shark</fish>
            <fish>tuna</fish>
        </fish>
    </animals>
</things> 
```

...如果选择的第一个项目是鲨鱼，那么金枪鱼是近亲，尽管鸟类类别中的一个项目也可以访问，因为它具有一定的相似性 - 它是一种生物。但是，蔬菜是完全不相关的，不应选择。

考虑到我的 xml 树绝对巨大的事实，我需要一种智能的方式来执行相似性检查。

非常感谢任何想法、意见或指导。我已经为此寻找了解决方案，但到目前为止几乎没有。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:39:07.340

相当大，一个 8.5 MB 的文件！...您打算即时使用它吗？这就是为什么我说数据映射/属性标记并将其全部存储在数据库中会更有效。

我看到每个`<synset>`都有一个`wnid`和单词，并包含所有`<synset>`标签，这些标签是它的一个子集。建议就是这样来的。说，`Shark`被选中...然后我们可以搜索`sysnet`在其属性中包含该单词的最顶层节点（`gloss`？），然后从该`sysnet`标签内的标签中选择所有单词...可以用作“相似项”.. .

# linux - 通过 apache 运行 perl 文件

> ID：14417494
> 
> 赞同：-1
> 
> 时间：2013-01-19T18:37:08.513
> 
> 标签：linux, perl, apache

我刚刚获得了一个新的 Cent OS 虚拟服务器来设置一个运行 Apache 2.2 的 Web 应用程序。我有一个需要通过浏览器运行的 perl 脚本，当我尝试运行它时，我的浏览器中出现错误 500。
我设置了一个简单的 helloworld 测试来简单地让 perl 向浏览器输出一些信息。

我将此添加到 httpd.conf

```
<Directory "/var/www/my_main_dir/testperl">
AddHandler cgi-script .cgi .pl
AllowOverride All
Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
Order allow,deny
Allow from all
</Directory> 
```

我创建了一个只包含两行的 hello.pl 文件：

```
print "Content-type: text/html\n\n";
print "Hello, world!\n"; 
```

尝试在浏览器 ( [http://mydomain.com/testperl/hello.pl](http://mydomain.com/testperl/hello.pl) ) 中提取它会导致 500 内部服务器错误。

同时，我创建了 hello.html：

```
print <HTML><BODY>
Hello, world!
</BODY></HTML> 
```

这在我的浏览器中很好（[http://mydomain.com/testperl/hello.html](http://mydomain.com/testperl/hello.html)）

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:17:04.163

评论是对的，你需要一个 shebang，所以知道如何处理你的 Perl 脚本。假设 Perl 是 /usr/bin/perl，添加`#!/usr/bin/perl`为第一行。

如果它仍然不起作用，请确保 Perl 脚本是可执行的，并且运行 Apache 的用户有权执行它。

# image - 查找矩阵中元素的索引

> ID：14417497
> 
> 赞同：2
> 
> 时间：2013-01-19T18:37:30.933
> 
> 标签：image, matlab, image-processing, matrix, indexing

我是 MatLab 的新手。我正在尝试在图像处理方面做一些工作。我想在矩阵中找到元素的索引。如果这是我的矩阵：

```
A =

92    99     1     8    15    67    74    51    58    40
98    80     7    14    16    73    55    57    64    41
 4    81    88    20    22    54    56    63    70    47
85    87    19    21     3    60    62    69    71    28
86    93    25     2     9    61    68    75    52    34
17    24    76    83    90    42    49    26    33    65
23     5    82    89    91    48    30    32    39    66
79     6    13    95    97    29    31    38    45    72
10    12    94    96    78    35    37    44    46    53
11    18   100    77    84    36    43    50    27    59 
```

然后我想找到大于的元素的索引`50`。我知道一种方法是循环，但如果我在 512 X 512 或更大的图像上这样做，那将非常昂贵。

还有其他方法吗？实际上我想找到它，因为我有一张图片，其中有一个简单的背景，里面有一个人。所以我想找到那个简单的背景发生变化的点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T18:41:12.787

您可以`find`用于您的任务

```
[r c] = find( A > 50 ); % now you have the row. column indices of all elements greater than 50 
```

# php - php在我按下提交按钮时删除所有文件夹但必须只删除一个文件夹

> ID：14417498
> 
> 赞同：0
> 
> 时间：2013-01-19T18:37:38.190
> 
> 标签：php, directory

```
 <?php
        function remove_directory($directory) {
            if (is_dir($directory) === true) {
                $contents = scandir($directory);
                unset($contents[0], $contents[1]);

                foreach($contents as $object) {
                    $current_object = $directory.'/'.$object;
                    if (filetype($current_object) === 'dir') {
                        remove_directory($current_object);
                        } else {
                        unlink($current_object);    
                        }
                    }
                    rmdir($directory);
                }
            }

        ?>
        <h1>DELETE</h1>
        <form action="" method="get">
           <?php if (isset($_GET['delete']) === true) {
               remove_directory('files/folder'); / when I click that submit button must delete only 'folder' not all 'folder1' and 'folder2'
                }
            ?>
            <input type="submit" name="delete"/>
        </form>
        <form action="" method="get">
           <?php if (isset($_GET['delete']) === true) {
               remove_directory('files/folder1'); // when I click that submit button must delete only 'folder1'
                }
            ?>
            <input type="submit" name="delete"/>
        </form>
        <form action="" method="get">
           <?php if (isset($_GET['delete']) === true) {
               remove_directory('files/folder2');  // when I click that submit button must delete only 'folder2'
                }
            ?>
            <input type="submit" name="delete"/>
        </form> 
```

当我单击提交按钮时，我只想删除提交的文件。但是当我现在单击提交按钮时，它会删除目录中的所有文件，而不是提交...当我单击第一个按钮时，我必须只删除“文件/文件夹”而不是全部...我怎么能得到那个？？？？我有一个函数remove_directory。我知道我的程序带有 $_GET 变量，但我不知道如何修复它。但是现在当我单击一个提交按钮时，删除所有文件夹 - 文件夹、文件夹 1 和文件夹 2 问题出在哪里或如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:51:16.777

PHP 代码在服务器上执行，创建的 HTML 被发送到客户端。将 PHP 代码放入表单并不意味着该代码将在表单提交时执行。事实上，它根本与表单无关。

相反，您需要使用`<input type="hidden">`.

我还建议使用 POST 而不是 GET。

```
 <?php
    function remove_directory($directory) {
        if (!is_dir($directory)) return;

        $contents = scandir($directory);
        unset($contents[0], $contents[1]);

        foreach($contents as $object) {
            $current_object = $directory.'/'.$object;
            if (filetype($current_object) === 'dir') {
                remove_directory($current_object);
            } else {
                unlink($current_object);    
            }
        }

        rmdir($directory);
    }

    if ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['dir'])) {
        $dir = basename($_POST['dir']);
        if ($dir[0] != '.') remove_directory("files/$dir");
    }

    ?>
    <h1>DELETE</h1>
    <form action="" method="post">
        <input type="hidden" name="dir" value="folder" />
        <input type="submit" name="delete"/>
    </form>
    <form action="" method="post">
        <input type="hidden" name="dir" value="folder2" />
        <input type="submit" name="delete"/>
    </form>
    <form action="" method="post">
        <input type="hidden" name="dir" value="folder1" />
        <input type="submit" name="delete"/>
    </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:44:46.357

将`IF`语句更改为如下内容：

```
if (isset($_GET['delete']) === 'folder') 
```

您还需要以每种形式传递所需的文件夹名称：

```
<input type="hidden" name="delete" value="folder"> 
```

那应该可以解决问题。

# java - 一个游戏有多少个init方法？

> ID：14417500
> 
> 赞同：0
> 
> 时间：2013-01-19T18:37:53.380
> 
> 标签：java, image, applet, initialization

`init( )`一个游戏小程序中可以有多个方法吗？`init( )`如果没有，如果方法只是在主类中，如何分别在每个类文件中加载图像？

# matlab - MatLab 的 Cuda API

> ID：14417503
> 
> 赞同：2
> 
> 时间：2013-01-19T18:38:02.333
> 
> 标签：matlab, image-processing, cuda, parallel-processing, gpu

我最近参与了实现基于 GPU 的图像配准技术。cpu 代码是用 MatLab 编写的，这就是我可以从密集搜索中得到的，所以我坚持使用 MatLab。我有夹克或 matlab ptx 文件的两种选择。

最近 mathwork 收购了夹克，所以我唯一的选择是将我的内核编写为 CU 文件并用于`nvcc -ptx filename.cu`生成[ptx 文件](http://www.mathworks.com/help/distcomp/executing-cuda-or-ptx-code-on-the-gpu.html)。我担心的是，我错过了很好的机会，因为我没有使用 Cuda API 或引入的库来解决 GPU 上的一些基本矩阵运算，比如 CUBLAS。

那么有没有办法使用 MatLab 中的 Cuda API，mex 文件呢？是否有一个用 C/C++ 编写的好的图像注册框架，我可以在我的研究中使用，而不是我正在使用的 MatLab 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:49:40.447

[这篇文章](http://www.mathworks.com/matlabcentral/newsreader/view_thread/261866)提供了一个关于如何编译 CUDA c/c++ mex 代码的教程。

您的问题类似于 [在 linux 中编写 CUDA+MEX 代码的一种处理方式吗？](https://stackoverflow.com/questions/14404189/way-to-handle-to-write-cudamex-code-in-linux) 那里的答案可能会对您有所帮助。

有关 CUDA API 和 CUDA 库的参考手册，请参阅[CUDA 工具包文档。](http://docs.nvidia.com/cuda/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:48:33.007

虽然工作量更大，但您可以通过创建[MEX 函数](http://www.mathworks.com/help/matlab/creating-c-c-and-fortran-programs-to-be-callable-from-matlab-mex-files.html)直接使用 CUDA 源代码。

[OpenCV](http://opencv.org/)是一个很好的通用计算机视觉库，用 C++ 编写。根据您正在进行的注册类型，它可能会有所帮助。

# python - 如何使用scrapy为爬虫创建规则

> ID：14417512
> 
> 赞同：3
> 
> 时间：2013-01-19T18:38:58.447
> 
> 标签：python, web-crawler, scrapy

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from manga.items import MangaItem

class MangaHere(BaseSpider):
    name = "mangah"
    allowed_domains = ["mangahere.com"]
    start_urls = ["http://www.mangahere.com/seinen/"]

    def parse(self,response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//ul/li/div')
        items = []
        for site in sites:
            rating = site.select("p/span/text()").extract()
            if rating > 4.5:
                item = MangaItem()
                item["title"] = site.select("div/a/text()").extract()
                item["desc"] = site.select("p[2]/text()").extract()
                item["link"] = site.select("div/a/@href").extract()
                item["rate"] = site.select("p/span/text()").extract()
                items.append(item)

        return items 
```

我的目标是抓取 www.mangahere.com/seinen 或该网站上的任何内容。我想浏览每一页并收集评分高于 4.5 的书籍。我最初是一名 basespider，并尝试复制和阅读 scrapy 教程，但它几乎让我无法理解。我在这里问我要做什么来创建我的规则，以及如何。我似乎也无法让我的条件正常工作，代码要么只返回第一个项目并且不管条件如何都停止，或者抓住一切，再次不管条件。我知道它的代码可能很混乱，但我仍在努力学习。随意修改代码或提供其他建议

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T00:59:56.730

严格来说，这并没有回答问题，因为我的代码使用 a`BaseSpider`而不是 a `CrawlSpider`，但它确实满足了 OP 的要求，所以......

**注意事项：**

1.  由于所有的分页链接都不可用（你得到前九个，然后是最后两个），我采用了一种有点 hacktastic 的方法。使用`parse`回调中的第一个响应，我搜索具有“下一个”类的链接（只有一个，所以看看它对应于哪个链接），然后找到它的前一个兄弟。这让我掌握了 seinen 类别的总页数（目前为 45）。
2.  接下来，我们为要由`parse_item`回调处理的第一页生成一个 Request 对象。
3.  然后，假设我们已经确定总共有 45 个页面，我们为“./seinen/2.htm”生成一系列请求对象，一直到“./seinen/45.htm”。
4.  由于`rating`是一个列表并且它的值是浮点数（基于条件是 4.5，我应该已经意识到这一点），修复遇到的错误的方法是循环遍历评级列表并将每个项目转换为浮点数。

不管怎样，看看下面的代码，看看它是否有意义。理论上，您应该能够轻松地扩展此代码以抓取多个类别，尽管这留给 OP 练习。:)

```
from scrapy.spider import BaseSpider
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from scrapy.http import Request
from tutorial.items import MangaItem
from urlparse import urlparse

class MangaHere(BaseSpider):
    name = "mangah2"
    start_urls = ["http://www.mangahere.com/seinen/"]
    allowed_domains = ["mangahere.com"]

    def parse(self, response):
        # get index depth ie the total number of pages for the category
        hxs = HtmlXPathSelector(response)
        next_link = hxs.select('//a[@class="next"]')
        index_depth = int(next_link.select('preceding-sibling::a[1]/text()').extract()[0])

        # create a request for the first page
        url = urlparse("http://www.mangahere.com/seinen/")
        yield Request(url.geturl(), callback=self.parse_item)

        # create a request for each subsequent page in the form "./seinen/x.htm"
        for x in xrange(2, index_depth):
            pageURL = "http://www.mangahere.com/seinen/%s.htm" % x
            url = urlparse(pageURL)
            yield Request(url.geturl(), callback=self.parse_item)

    def parse_item(self,response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//ul/li/div')
        items = []
        for site in sites:
            rating = site.select("p/span/text()").extract()
            for r in rating:
                if float(r) > 4.5:
                    item = MangaItem()
                    item["title"] = site.select("div/a/text()").extract()
                    item["desc"] = site.select("p[2]/text()").extract()
                    item["link"] = site.select("div/a/@href").extract()
                    item["rate"] = site.select("p/span/text()").extract()
                    items.append(item)
        return items 
```

# c++ - 列表 在 C++ 中

> ID：14417513
> 
> 赞同：9
> 
> 时间：2013-01-19T18:39:07.190
> 
> 标签：c++, arrays, string, list

我对 C# 很熟悉，但对 C++ 很陌生。我搜索但发现了很多不同的解决方案，这些解决方案大多不起作用，可能是因为 C++ 的版本不同。

我正在使用 turbo C++ 4.5，我想要类似 C# 的字符串列表

```
List<string> s = new List<string>();
s.Add("1"); 
```

我对 C++ 数组有所了解，但我不知道声明时的项目数，这就是为什么我想要类似 List 的解决方案，以便我可以声明一次并稍后添加项目。

有人告诉我我应该用指针来做，但我不知道怎么做。可能吗？或者有什么办法吗？

**如果您有答案，请解释一下，因为我真的很想学习，谢谢。**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-19T18:41:30.990

与 C# 等效的`List<T>`是[`std::vector<T>`](http://en.cppreference.com/w/cpp/container/vector). 对应于您的 C# 代码的 C++ 代码是这样的：

```
using namespace std;
....
vector<string> s;
s.push_back("1"); 
```

您不应该接受建议为自己编写这样的课程。在适当的地方，始终使用标准容器。

# c# - 已加载浏览器文档

> ID：14417514
> 
> 赞同：0
> 
> 时间：2013-01-19T18:39:10.607
> 
> 标签：c#, .net

我正在尝试使用从linkedin中提取的一些数据填充网格，我只是想让它为我自己的学习曲线工作，但是如果我删除了这条线

```
MessageBox.Show("asdfasdfasdf") 
```

列表“消息”只有 1 项，如果我包含上面的行，它会达到预期的效果，我会收到 15 条消息

有人可以解释吗？

```
public void extract_messages_received(object sender, RoutedEventArgs e)
{
    triggered = false;
    System.Windows.Forms.WebBrowser browser = new System.Windows.Forms.WebBrowser();
    browser.Navigate(new Uri(@"http://www.linkedin.com/inbox/messages/received"));
    browser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(browser_DocumentCompleted);
}

private void LoadMessages(string url)
{
    txtOutput.Text = @"http://www.linkedin.com" + url.Substring(6, url.Length - 6);
    if (!urls.Contains(url))
    {
        urls.Add(url);
        WebBrowser browser = new WebBrowser();
        browser.Navigate(new Uri(txtOutput.Text);

        loaded_message = false;
        browser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(ReadMessages);
    }
}

private void ReadMessages(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    if (loaded_message == false)
    {        
        string url = ((WebBrowser)sender).Url.ToString();
        int loc1 = url.IndexOf("itemID") + 7;
        int loc2 = url.IndexOf("&", loc1);
        IEnumerable<string> name = null;
        IEnumerable<string> odate = null;
        IEnumerable<string> photo = null;
        IEnumerable<string> subject = null;
        IEnumerable<string> headline = null;
        string body = "";
        string id = url.Substring(loc1, loc2 - loc1);
        //System.Windows.MessageBox.Show("READ");
        foreach (HtmlElement element in ((WebBrowser)sender).Document.GetElementsByTagName("div"))
        {
            if (element.GetAttribute("classname").Equals("inbox-item-body"))
            {
                body = element.InnerText;
            }
            if (element.GetAttribute("classname").Equals("inbox-item-header"))
            {
                var doc = new HtmlAgilityPack.HtmlDocument();
                doc.LoadHtml(element.InnerHtml);
                name = from foo in doc.DocumentNode.SelectNodes("//a[@class='fn']") select foo.InnerText;
                odate = from foo in doc.DocumentNode.SelectNodes("//p[@class='date']") select foo.InnerText;
                photo = from foo in doc.DocumentNode.SelectNodes("//img[@class='photo']") select foo.Attributes["src"].Value;
                subject = from foo in doc.DocumentNode.SelectNodes("//h3") select foo.InnerText;
                headline = from foo in doc.DocumentNode.SelectNodes("//span[@class='headline']") select foo.InnerText;
            }
        }

        // ****
        MessageBox.Show("asdfasdfasdf");
        // ****

        messages.Add(new Messages()
        {
            ID = id,
            Subject = subject.First().ToString(),
            Headline = headline.First().ToString(),
            Sender = name.First().ToString(),
            Photo = photo.First().ToString(),
            SendDate = odate.First().ToString(),
            Body = body
        });

           // dataMessages.ItemsSource = messages;
    }
    loaded_message = true;
}

void browser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    if (!triggered)
    {
        triggered = true;
        System.Windows.Forms.WebBrowser web = sender as System.Windows.Forms.WebBrowser;
        foreach (HtmlElement element in web.Document.GetElementsByTagName("ol"))
        {
            if (element.GetAttribute("classname").Contains("inbox-list "))
            {
                WebBrowser browser = new WebBrowser();
                browser.Navigate("about:blank");
                browser.Document.Write(element.InnerHtml);
                HtmlElementCollection hrefTags = null;
                hrefTags = browser.Document.GetElementsByTagName("a");
                foreach (HtmlElement a in hrefTags)
                {
                    if (a.OuterHtml.Contains("displayMBox"))
                    {
                        LoadMessages(a.GetAttribute("href"));
                    }
                }
            }
        }
    }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:04:02.053

这是一个时间问题。

当您在那里有消息框时，直到您关闭消息框后才会`loaded_message`设置为`true`，因此其他事件也在处理直到消息框，`loaded_message`在您关闭第一条消息之前，它们都没有设置为 true盒子。

如果您足够快地关闭消息框，您可能会在 1 和 15 之间看到一些数字。

让我们举一个更简单的例子：

```
 private void Form1_Load(object sender, EventArgs e)
    {

        for (int i = 0; i < 5; i++)
        {
            WebBrowser wb = new WebBrowser();
            wb.DocumentCompleted += wb_DocumentCompleted;
            wb.Navigate("http://www.stackoverflow.com");
        }
    }

    bool shown = false;
    void wb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        if (!shown)
        {
            Console.WriteLine(shown);
            MessageBox.Show(shown.ToString());
            shown = true;
        }
    } 
```

现在，如果您查看控制台，您会看到在`false`显示第一个消息框之前出现了一些。当我关闭消息框时，我会看到另外 4 个消息框，因为它们已经排队等待显示，然后`shown`才设置为 true。如果我注释掉消息框，那么我只会看到一个消息框和一个`false`在控制台中。

现在，问题变成了，为什么要添加并且需要检查`loaded_message`布尔变量。

我的猜测是您只想加载每条消息一次。如果是这种情况，请在字典中跟踪每个 URL，并为每个 URL 维护一个布尔值：

```
 Dictionary<string, bool> loadedUrls = new Dictionary<string, bool>();
    private void Form1_Load(object sender, EventArgs e)
    {

        for (int i = 0; i < 5; i++)
        {
            WebBrowser wb = new WebBrowser();
            wb.DocumentCompleted += wb_DocumentCompleted;
            string url = "http://stackoverflow.com/" + i;

            loadedUrls.Add(url, false);
            wb.Navigate(url);
        }
    }

    bool shown = false;
    void wb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {

        if (loadedUrls.ContainsKey(e.Url.OriginalString) && loadedUrls[e.Url.OriginalString] == false)
        {
            loadedUrls[e.Url.OriginalString] = true;
            Console.WriteLine(shown);
            shown = true;
        }
    } 
```

我离开`shown`那里是为了证明这种新方法现在适用于文档完成事件中的每次传递。您的输出窗口应该有 a`false`后跟 4 `true`。

# python - 用于 Jenkins/本地构建的 PyPI 本地缓存

> ID：14417515
> 
> 赞同：5
> 
> 时间：2013-01-19T18:39:25.137
> 
> 标签：python, django, jenkins, virtualenv, pip

我有一个 Jenkins 实例，它使用来自[requirements.txt](http://www.pip-installer.org/en/latest/requirements.html)的伴随[PyPI](http://pypi.python.org/pypi)包构建我的项目。然而，与[TravisCI](https://travis-ci.org/)构建一样，每次从头开始构建都非常耗时，这意味着构建需要 > 4-5 分钟，这比理想情况要慢得多。

我正在寻找一种在本地缓存下载包的方法，因此当启动具有相同依赖项的构建时，不必从 PyPI 获取，它可以在本地获取，当版本发生更改时，它可以获取像现在一样的上游包。

有没有这样的项目，因为今晚谷歌搜索并没有透露太多信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T20:06:39.590

pip 开箱即用地支持这个

```
pip install --download-cache=DIR 
```

如果请求现有文件，则从缓存中读取。这也可以通过环境变量来完成`PIP_DOWNLOAD_CACHE`；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:47:36.050

你可以像鸡蛋代理缓存一样

[http://pypi.python.org/pypi/collective.eggproxy](http://pypi.python.org/pypi/collective.eggproxy)

这就像所有下载的鸡蛋的本地代理一样，使 Jenkins 更加健壮，例如针对 PyPI 经常发生的超时。

除此之外，您还可以使用 setuptools 的 PYCACHE 功能。看

[什么是 Python 鸡蛋缓存 (PYTHON_EGG_CACHE)？](https://stackoverflow.com/questions/2192323/what-is-the-python-egg-cache-python-egg-cache)

# c# - 我们需要检查 Exchange 上的哪些设置以避免抛出 ServiceRequestException？

> ID：14417516
> 
> 赞同：3
> 
> 时间：2013-01-19T18:39:25.470
> 
> 标签：c#, exchangewebservices, exchange-server-2010, ews-managed-api

我们以编程方式（使用 Microsoft Exchange Web Services Managed API 2.0）访问用户的日历（在 Exchange 2010 SP1 上）。

我们已经能够通过我们的开发环境中的自动发现成功地与 EWS 通信，我们不必在 Exchange 上进行任何特定设置（我们使用默认的开箱即用设置）。

不幸的是，这在客户端的环境中不起作用。客户端没有测试环境。我们应该与他们的实时 Exchange 服务器进行通信。

最初，自动发现在客户端环境中不起作用。我们收到以下错误：

```
Microsoft.Exchange.WebServices.Data.AutodiscoverLocalException: The Autodiscover service couldn't be located.
   at Microsoft.Exchange.WebServices.Autodiscover.AutodiscoverService.InternalGetLegacyUserSettings[TSettings](String emailAddress, List`1 redirectionEmailAddresses, Int32& currentHop)
   at Microsoft.Exchange.WebServices.Autodiscover.AutodiscoverService.GetLegacyUserSettings[TSettings](String emailAddress)
   at Microsoft.Exchange.WebServices.Autodiscover.AutodiscoverService.InternalGetLegacyUserSettings(String emailAddress, List`1 requestedSettings)
   at Microsoft.Exchange.WebServices.Autodiscover.AutodiscoverService.GetUserSettings(String userSmtpAddress, UserSettingName[] userSettingNames)
   at Microsoft.Exchange.WebServices.Data.ExchangeService.GetAutodiscoverUrl(String emailAddress, ExchangeVersion requestedServerVersion, AutodiscoverRedirectionUrlValidationCallback validateRedirectionUrlCallback)
   at Microsoft.Exchange.WebServices.Data.ExchangeService.AutodiscoverUrl(String emailAddress, AutodiscoverRedirectionUrlValidationCallback validateRedirectionUrlCallback) 
```

所以现在我们明确指定 EWS 的 URL。这给了我们以下错误：

```
Microsoft.Exchange.WebServices.Data.ServiceRequestException: The request failed. The remote server returned an error: (401) Unauthorized. ---> System.Net.WebException: The remote server returned an error: (401) Unauthorized.
       at System.Net.HttpWebRequest.GetResponse()
       at Microsoft.Exchange.WebServices.Data.ServiceRequestBase.GetEwsHttpWebResponse(HttpWebRequest request)
       --- End of inner exception stack trace ---
       at Microsoft.Exchange.WebServices.Data.ServiceRequestBase.GetEwsHttpWebResponse(HttpWebRequest request)
       at Microsoft.Exchange.WebServices.Data.SimpleServiceRequestBase.InternalExecute()
       at Microsoft.Exchange.WebServices.Data.MultiResponseServiceRequest`1.Execute()
       at Microsoft.Exchange.WebServices.Data.ExchangeService.BindToFolder(FolderId folderId, PropertySet propertySet)
       at Microsoft.Exchange.WebServices.Data.ExchangeService.BindToFolder[TFolder](FolderId folderId, PropertySet propertySet)
       at Microsoft.Exchange.WebServices.Data.CalendarFolder.Bind(ExchangeService service, FolderId id) 
```

异常在以下代码的第 5 行引发：

```
ServicePointManager.ServerCertificateValidationCallback = this.CertificateValidationCallBack;
ExchangeService exchangeWebService = new ExchangeService(ExchangeVersion.Exchange2010_SP1);

exchangeWebService.Credentials = new WebCredentials("username@domain.local", "myPassword");
exchangeWebService.AutodiscoverUrl("username@domain.local", this.RedirectionUrlValidationCallback);

**CalendarFolder calendarFolder = CalendarFolder.Bind(exchangeWebService, new FolderId(WellKnownFolderName.Calendar, userName));**

CalendarView calendarView = new CalendarView(startDate, endDate);
calendarView.PropertySet = new PropertySet(BasePropertySet.IdOnly, AppointmentSchema.Subject, AppointmentSchema.Start, AppointmentSchema.IsRecurring, AppointmentSchema.AppointmentType, AppointmentSchema.End, AppointmentSchema.Duration);

FindItemsResults<Appointment> findResults = calendarFolder.FindAppointments(calendarView); 
```

我们不介意自动发现不起作用，因为我们可以明确指定 EWS 的 URL。我们想知道的是什么设置、权限等，我们需要检查客户端的 Exchange 实例以确定引发上述异常 (ServiceRequestException) 的原因。

我们已请求在客户端 Exchange 实例上的 Exchange 命令行管理程序上执行以下命令：

```
Test-OutlookWebServices –Identity username
Get-OrganizationConfig 
```

我们还没有收到结果。请让我们知道是否还有其他需要检查的地方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T07:47:49.153

我们知道客户端有一个代理地址。我们不知道的是，我们在使用 EWS 进行身份验证时需要使用域地址 (username@domain.local)，而在调用 AutodiscoverUrl 和访问邮箱时需要使用代理地址 (username@domain.com)。

所以上面的代码应该是：

```
ServicePointManager.ServerCertificateValidationCallback = this.CertificateValidationCallBack;
ExchangeService exchangeWebService = new ExchangeService(ExchangeVersion.Exchange2010_SP1);

exchangeWebService.Credentials = new WebCredentials("username@domain.local", "myPassword");
exchangeWebService.AutodiscoverUrl("username@domain.com", this.RedirectionUrlValidationCallback);

CalendarFolder calendarFolder = CalendarFolder.Bind(exchangeWebService, new FolderId(WellKnownFolderName.Calendar, "username@domain.com")); 
```

我们使用的是域地址或代理地址。我们从未尝试过上述组合，直到我们不小心忘记更改上述代码第 3 行的组合。:)

感谢所有查看问题并尝试回答的人。我希望有一天这会对某人有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-09T15:43:06.530

我建议您启用 Traces，以实现以下目的：

```
 Service.TraceEnabled = true; 
```

我遇到了同样的问题，然后当我启用跟踪时，这些跟踪将指导您到底发生了什么。在我的情况下，SSL 证书问题可以解决它，我遵循以下[帖子](http://msdn.microsoft.com/EN-US/library/dd633677%28v=exchg.80%29.aspx)

可能有很多问题，例如：

*   可以阻止用户。

*   DSN 找不到 autodiscover.domain.com

# php - 将多个文本框值传递给 CodeIgniter 中的控制器

> ID：14417519
> 
> 赞同：0
> 
> 时间：2013-01-19T18:39:47.563
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我想将多个文本框值发送到 CodeIgniter .. 我不知道为什么这段代码不起作用..

这是我的看法

```
 <th>Items:</th>
 <th>Price:</th>
 <th>quantity:</th>
 <th>total:</th>
    </tr>

<?php for ($i = 0; $i < 5; $i++) {?>
    <tr>
<td><?php echo form_dropdown('cat_id[]', $records2, '#', 
         "id='category_".$i."'     onchange='getItems(this.value,".$i.")' ");?>
                        </td>
     <!-- Items -->

  <td> <?php echo form_dropdown('item_id[]', $records3, '#', "id='items_".$i."'"); ?>

    </td> 
```

项目下拉选项针对类别..意味着如果我从类别中选择一些东西，那么项目将针对该类别显示

```
 <td><input type="text" name =<?php echo $price;?> id = "price_"<?php echo $i ?>>
</td>

<td><input type="text" name =<?php echo quantity;?> id = "price_"<?php echo $i ?> 
```

我已将价格和数量的字段名称设置为“价格”和“数量”

这是我的控制器..

```
$data3 = array(

            'item_id' => $this->input->post('item_id'),
            'price' => $this->input->post('price'),
            'quantity' => $this->input->post('quantity'),

    ); 

    $data4 = array();
    for($i = 0; $i < 5; $i++)
    {
        $data4 = array (

                'item_id' => $data3['item_id'][$i],
                'price' => $data3['price'][$i],
                'quantity' => $data3['quantity'][$i],

        );
    }

    $this->load->model('salesModel');
    $this->salesModel->addSoldItemtoDB($data4); 
```

问题是价格值“null”将进入数据库，并且数量相同，并且就 item_id 而言，无论我在 item 中选择什么，它都会在数据库中保存 id '1'。

我的 java 脚本，用于上面两个下拉框的功能。类别和项目

```
 <script type="text/javascript">

function getItems(category_id,index) {

       $("#items_" + index + " > option").remove(); 

    $.ajax({
        type: "POST",
        url: "stockInController/get_Items/"+category_id, 
        success: function(items) 
        {
            $.each(items,function(item_id,item_name) 
            {
                var opt = $('<option />'); 
                opt.val(item_id);
                opt.text(item_name);
                $('#items_'+ index).append(opt); 
            });
        }

    });
}
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:29:06.567

您正在创建具有相同名称的文本框

```
<input type="text" name =<?php echo $price;?> id = "price_<?php echo $i ?>" >
<input type="text" name =<?php echo quantity;?> id = "price_<?php echo $i ?>" > 
```

这意味着它只会采用最后一行的文本框值。应该是这样的

```
<input type="text" name="prince_<?php echo $i;?>" id="price_<?php echo $i ?>" >
<input type="text" name="quantity_<?php echo $i;?>" id="quantity_<?php echo$i?>"> 
```

另一种方法是在文本框中创建数组

```
<input type="text" name="price[]" id = "price_<?php echo $i ?>" >
<input type="text" name="quantity[]" id = "quantity_<?php echo $i ?>" > 
```

并且当您想要获取这些数组的值时。

```
$prices = $this->input->post('price');    
$quantity= $this->input->post('quantity'); 
```

价格和数量是数组

# trigger.io - Trigger.io 中的地理定位双重提示

> ID：14417522
> 
> 赞同：1
> 
> 时间：2013-01-19T18:40:01.603
> 
> 标签：trigger.io

本质上，我遇到了这个问题：

[如何防止 Phonegap 应用程序中的地理定位双重提示？](https://stackoverflow.com/questions/13857165/how-to-prevent-double-prompt-for-geolocation-in-phonegap-app)

但是在 Trigger.io 内部而不是 Phonegap。

为了让事情更有趣，我没有直接调用 navigator.geolocation.getCurrentPosition - 我正在使用 navigator.geolocation.watchPosition 创建一个地理位置观察器。

在 Trigger 的 API 中似乎没有此功能的替代品：

[http://docs.trigger.io/en/v1.4/modules/geolocation.html](http://docs.trigger.io/en/v1.4/modules/geolocation.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:08:04.527

正如您所注意到的，我们很遗憾没有该`watchPosition`功能的本机版本，但我们确实提供了一个`getCurrentPosition`不会提示用户的功能。在我们支持之前，`watchPosition`您最好定期监控用户的位置`getCurrentPosition`。`setInterval`

# swift - 如何在移动行后再次调用 cellForRowAtIndexPath？

> ID：14417524
> 
> 赞同：0
> 
> 时间：2013-01-19T18:40:14.587
> 
> 标签：swift, uitableview

移动行后，我更改了与单元格关联的 biz 的 lineandPin 编号。如果 cellForRowAtIndexpath 再次被调用，那么事情就会顺利进行。

![在此处输入图像描述](../Images/a050be59fca104eeb40d20557dbcdfa8.png)

这是我的代码

```
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath
{
    NSMutableArray *  mutableBusinessBookmarked= self.businessesBookmarked.mutableCopy;
    Business *bizToMove = mutableBusinessBookmarked[sourceIndexPath.row];
    [mutableBusinessBookmarked removeObjectAtIndex:sourceIndexPath.row];
    [mutableBusinessBookmarked insertObject:bizToMove atIndex:destinationIndexPath.row];
    self.businessesBookmarked=mutableBusinessBookmarked;
    [self rearrangePin];
    [tableView moveRowAtIndexPath:sourceIndexPath toIndexPath:destinationIndexPath];
    [self.table reloadData];
} 
```

1.  我不确定我做得对。我更新了数据模型并调用`moveRowAtIndexPath`
2.  `[tableView moveRowAtIndexPath...`似乎什么也没做。无论我是否调用，行都会移动。
3.  我不认为调用 self.table reloadData 是明智的。但是，我想更新左侧的数字。`cellForRowAtindexpath`尽管调用了，但仍然没有调用`self.table reloadData`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T02:22:38.197

我建议将您的单元配置逻辑移动到一个单独的方法中。然后在 中`moveRowAtIndexPath`，可以直接调用这个方法来更新可见单元格。例如：

```
- (void)configureCell:(UITableViewCell *)cell
{
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    // Get data for index path and use it to update cell's configuration.
}

- (void)reconfigureVisibleCells
{
    for (UITableViewCell *cell in self.tableView.visibleCells) {
        [self configureCell:cell];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyCellIdentifier"];
    [self configureCell:cell];
    return cell;
}

- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath
{
    // Update data model. Don't call moveRowAtIndexPath.
    [self reconfigureVisibleCells];
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self configureCell:cell];
} 
```

一些额外的评论：

1.  `cellForRowAtIndexPath`仅在表格视图需要显示新单元格时调用。永远不会为可见的单元格调用它。
2.  `moveRowAtIndexpath`当您的数据模型更改并且您需要将该更改传播到 UI 时调用是合适的。您的情况与此相反，即 UI 正在传播对您的数据模型的更改。所以你不会打电话`moveRowAtIndexPath`。
3.  我总是重新配置单元格，`willDisplayCell`因为在某些情况下表格视图会在`cellForRowAtIndexPath`.

# javascript - 从javascript中的多个复选框更新值

> ID：14417526
> 
> 赞同：0
> 
> 时间：2013-01-19T18:40:27.400
> 
> 标签：javascript, checkbox

我基本上想做的是：单击复选框并更新总价值为 5000 美元。所以如果我点击这两个，它将是 5110 美元，如果我取消选中 60 美元，它将下降到 5050 美元。

![](../Images/34a6379fbcd0f897069315cd8a26c4a7.png).

我无法超越我的代码的全部进度，所以我将它包含在我的网页中的一个 css 文件中： http: [//adroid.cl/js_problem.css](http://adroid.cl/js_problem.css)。

我几乎完成了这段代码，但它有一些错误，我非常感谢我收到一些关于这个的指导，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:54:59.233

## [http://jsfiddle.net/zmJ3k/](http://jsfiddle.net/zmJ3k/)

如果不包含 html，您将不得不更改一些属性

```
var input = document.getElementsByTagName("input");
var total = document.getElementById("total");
for(i=0;i<input.length;i++){
    input[i].onchange = function(){
        if(this.checked){
             total.innerHTML = parseFloat(total.innerHTML) + parseFloat(this.value);
        }else{
             total.innerHTML = parseFloat(total.innerHTML) - parseFloat(this.value);
        }
    }
} 
```

## [http://jsfiddle.net/zmJ3k/1/](http://jsfiddle.net/zmJ3k/1/)

忘了$

```
var input = document.getElementsByTagName("input");
var total = document.getElementById("total");
for(i=0;i<input.length;i++){
    input[i].onchange = function(){
        if(this.checked){
             total.innerHTML = "$" + (parseFloat(total.innerHTML.split("$")[1]) + parseFloat(this.value));
        }else{
             total.innerHTML = "$" + (parseFloat(total.innerHTML.split("$")[1]) - parseFloat(this.value));
        }
    }
} 
```

# .net - .NET 属性与 Func 范围

> ID：14417527
> 
> 赞同：1
> 
> 时间：2013-01-19T18:40:29.120
> 
> 标签：.net, methods, delegates, attributes, func

我知道这已经出现了很多次，就像在[这个](https://stackoverflow.com/questions/10951378/lambda-in-a-attribute-parameter)或[这个](https://stackoverflow.com/questions/8463657/how-do-you-put-a-func-in-a-c-sharp-attribute-annotation)问题中一样，并且它清楚地写在[MSDN](http://msdn.microsoft.com/en-us/library/aa664615%28v=vs.71%29.aspx)上，但是如果我不能将函数作为参数传递给属性，那么[System.ComponentModel.DataAnnotations.ValidationAttribute](http://msdn.microsoft.com/en-us/library/vstudio/cc679238%28v=vs.90%29.aspx)怎么能做到呢？

我在这里想念什么？这个内置属性是否只能有一个 Func< TResult > 作为参数？如果可能的话，它也可以是带有输入参数的 Func 吗？

我的最终目标是能够定义用于序列化属性的函数。整个事情就是运行时代码生成魔法，所以我真的不需要琐碎的替代品来做到这一点。我确实有一个解决方法，但使用 Func 会容易得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:50:53.150

您可以将委托用作属性构造函数的参数 - 您不能以*声明*方式这样做。

现在在这种情况下，无论如何它只是一个受保护的构造函数 - 所以它打算从派生类中调用，例如[`RangeAttribute`](http://msdn.microsoft.com/en-us/library/vstudio/system.componentmodel.dataannotations.rangeattribute.aspx)，这可能会为基构造函数提供一个适当的委托。

# c++ - 指向c ++中同一块内存的数组？

> ID：14417528
> 
> 赞同：2
> 
> 时间：2013-01-19T18:40:57.697
> 
> 标签：c++, arrays, memory, memory-management, dynamic-programming

我有一个奇怪的问题。我在 C++ 中有以下代码：

```
int grid[h][w]; int dp[h][w]; int p[h][w];

for(int y = 0; y < h; y++)
    for(int x = 0; x < w; x++)
        cin >> grid[y][x];

// base case
for(int y = 0; y < h; y++) dp[y][0] = grid[y][0];

// fill rest
for(int x = 1; x < w; x++)
{
    for(int y = 0; y < h; y++)
    {
        dp[y][x] = min(dp[y][x-1], min(dp[(y-1)%h][x-1], dp[(y+1)%h][x-1])) + grid[y][x];
    }
}

cout << "dp: " << endl;
for(int y = 0; y < h; y++) cout << dp[y][w-1] << endl; 
```

如您所见，在最后几行中，我正在打印 dp 数组的最后一列（我对此感兴趣）。当我添加以下语句时，就在 // 基本情况下方：

```
p[0][0] = 3; 
```

我的 dp 数组发生了变化，我不知道为什么。我只添加了该语句，我想知道为什么 dp 数组会发生变化以及如何防止这种情况发生。

有人可以向我解释为什么会这样吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T18:45:41.217

您的代码具有未定义的行为。考虑以下循环中发生的情况`y = 0`：

```
for(int y = 0; y < h; y++)
{
    dp[y][x] = min(dp[y][x-1], min(dp[(y-1)%h][x-1], dp[(y+1)%h][x-1])) + grid[y][x];
                                   ^^^^^^^^^^^ out of bounds since -1%h equals -1 
```

你的意思是说`(y+h-1)%h`代替`(y-1)%h`？

# jpa - JPA 父/子 MySQL 插入数据

> ID：14417529
> 
> 赞同：0
> 
> 时间：2013-01-19T18:40:59.293
> 
> 标签：jpa, jboss, ejb, one-to-many

问题是将数据插入数据库。使用 JPA、JBoss、MySQL。我做错了什么？这是一对多。我想在用户表中插入一些“用户”，并给他一些角色。我在 MySQL 5.2 Workbench 中创建了两个表，并在 Eclipse 中使用 JPA 生成了这个表。

表用户角色：

```
CREATE  TABLE IF NOT EXISTS `virtual_trainer`.`user_roles` (
  `role_name` VARCHAR(45) NOT NULL ,
  `users_id` INT NOT NULL ,
  `name` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`users_id`) ,
  CONSTRAINT `fk_user_roles_users1`
    FOREIGN KEY (`users_id` )
    REFERENCES `virtual_trainer`.`users` (`id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB 
```

User.java 父实体：

```
@Entity
@Table(name="users")
public class User implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(insertable=false, updatable=false)
    private int id;

    private String name;

    private String password;

    //bi-directional many-to-one association to UserRole
        @OneToMany(mappedBy="user", cascade={CascadeType.ALL})
        private Set<UserRole> userRoles;

//getter,setter 
```

UserRole.java 子实体：

```
@Entity
@Table(name="user_roles")
public class UserRole implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="users_id")
    private int usersId;

    @Column(insertable=false, updatable=false)
    private String name;

    @Column(name="role_name")
    private String roleName;

    //bi-directional many-to-one association to User
    @ManyToOne(cascade={CascadeType.ALL}, fetch=FetchType.LAZY)
    @JoinColumn(name="users_id", insertable=false, updatable=false)

private User user;

//getter,setter 
```

RegseterBeanService：（插入数据）

```
@ManagedBean(name="bean")
@Stateful
@LocalBean
public class RegisterUserService implements RegisterUsersInterface{
    @PersistenceContext(unitName="virtual.trainer.entities")
    private EntityManager em;

    @Transactional
    public void addUser() {
        // TODO Auto-generated method stub
        User u = new User();
    u.setName("wojtek");
    u.setPassword("jajco");
    UserRole ur = new UserRole();
    ur.setRoleName("user");
    ur.setName("wojtek");
    u.getUserRoles().add(ur);

                em.persist(u);

                em.close();

    }
} 
```

这是控制台中的错误：

```
19:35:06,666 WARNING [javax.enterprise.resource.webcontainer.jsf.lifecycle] (http-localhost-127.0.0.1-8080-1) #{bean.addUser}: java.lang.NullPointerException: javax.faces.FacesException: #{bean.addUser}: java.lang.NullPointerException
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.UICommand.broadcast(UICommand.java:315) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:397) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_01]
Caused by: javax.faces.el.EvaluationException: java.lang.NullPointerException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102) [jsf-impl-2.1.7-jbossorg-2.jar:]
    ... 22 more
Caused by: java.lang.NullPointerException
    at virtual.trainer.bean.RegisterUserService.addUser(RegisterUserService.java:30) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_01]
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_01]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_01]
    at java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.7.0_01]
    at org.apache.el.parser.AstValue.invoke(AstValue.java:262) [jbossweb-7.0.13.Final.jar:]
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278) [jbossweb-7.0.13.Final.jar:]
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    ... 23 more

19:35:06,724 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/VirtualTrainer123].[Faces Servlet]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet Faces Servlet threw exception: java.lang.NullPointerException
    at virtual.trainer.bean.RegisterUserService.addUser(RegisterUserService.java:30) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_01]
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_01]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_01]
    at java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.7.0_01]
    at org.apache.el.parser.AstValue.invoke(AstValue.java:262) [jbossweb-7.0.13.Final.jar:]
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278) [jbossweb-7.0.13.Final.jar:]
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.UICommand.broadcast(UICommand.java:315) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:397) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_01] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:10:46.110

伙计，你的用户角色集合是空的，你正在调用它，并试图添加到它。您需要将声明更改为：

```
@OneToMany(mappedBy="user", cascade={CascadeType.ALL})
    private Set<UserRole> userRoles = new HashSet<UserRole>(); 
```

那将解决它。

# regex - 从 gcc/g++ 编译结果中删除文件名

> ID：14417531
> 
> 赞同：1
> 
> 时间：2013-01-19T18:41:27.420
> 
> 标签：regex, linux, gcc, g++

我想从 gcc/g++ 编译错误消息中删除文件名。

当我运行`gcc myfolder/temp.c`时，结果是：

```
myfolder/temp.c:5:1: error: unknown type name ‘voi’
myfolder/temp.c:87:6: error: conflicting types for ‘max’
myfolder/temp.c:5:5: note: previous declaration of ‘max’ was here 
```

但我想要这个：

```
5:1: error: unknown type name ‘voi’
87:6: error: conflicting types for ‘max’
5:5: note: previous declaration of ‘max’ was here 
```

有 gcc 标志吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T18:45:50.157

我怀疑是否有此选项，但您可以使用标准实用程序获得相同的结果。例如与`cut(1)`

```
 gcc -c myfolder/temp.c 2>&1 | cut -d: -f2- 
```

# java - 如何从静态上下文中引用枚举变量？

> ID：14417532
> 
> 赞同：3
> 
> 时间：2013-01-19T18:41:27.530
> 
> 标签：java, enums

```
 if(array[3][3].getCall() == false && array[3][3].getUser() == Car.user.NONE )
    {
        array[3][3] = new Car('s', Car.user.USER, false);
        aCounter++;

        System.out.println("everything is fine");

    } 
```

这段代码给了我：错误：不能从静态上下文中引用非静态变量用户。

```
public class Car
{

    public enum User { USER, COMP, NA };

    private char object;
    public User user;
    private boolean call;

    public Car(char object, User user, boolean call)
    {
        this.object = object;
        this.user = user;
        this.call = call;
    }
} 
```

枚举是公开的，因为否则我会得到“用户有私人访问错误”。我知道枚举是在构造函数中声明的非静态变量，所以我认为这是错误的来源，但我不知道如何修复它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T18:44:26.570

该问题与枚举变量无关，与静态字段和类与非静态字段和类有关。请注意，当你写

```
Car.user.NONE 
```

`Car.user`指的是在类上命名的*字段*——但它是一个实例变量，而不是静态变量。因此，错误：`user``Car``Car.user`

> `non-static variable user cannot be referenced from a static context`

要解决此问题，只需更改`Car.user`为`Car.User`使表达式引用`enum User`而不是`User user`字段。

```
if(array[3][3].getCall() == false && array[3][3].getUser() == Car.User.NONE )
{
    array[3][3] = new Car('s', Car.User.USER, false);
    aCounter++;

    System.out.println("everything is fine");
} 
```

# python - 带有通知 Python 的管道 sdt 输出

> ID：14417535
> 
> 赞同：1
> 
> 时间：2013-01-19T18:41:39.490
> 
> 标签：python, notifications, pipe

我正在玩 python 并编写了一个应用程序，它生成大量文本并将其打印到标准输出。（我在控制台（bash）中运行应用程序并且不想使用 GUI 或外部工具
）进程占用了大量时间，我可以计算出它已经完成了多少。
应用程序的输出总是从正在运行的脚本中传输出来的。

我想不时向用户显示完成了多少文本生成的通知..（我无法打印到标准输出，因为它被重定向到其他进程..）
有什么办法吗这个？

非常感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:44:49.083

这是`stderr`为了什么。

看一下这个示例程序：

```
import sys
print >> sys.stderr, "Starting..."
print "Done!" 
```

如果您使用`>`（例如， ）重定向其输出，则不会包含`python test.py > test.txt`任何打印到的内容。`stderr`

`test.txt`只会`Done!`在里面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:44:51.063

您可以在记录应用程序状态的地方生成其他文件。在 UNIX 平台上，用户可以`tail`在另一个控制台中使用它。发送带有状态的电子邮件是另一种选择。

# python - python win32com如何设置winhttp选项值

> ID：14417539
> 
> 赞同：2
> 
> 时间：2013-01-19T18:42:01.370
> 
> 标签：python, win32com, winhttp

```
from win32com.client import Dispatch

winhttp = Dispatch('winhttp.winhttprequest.5.1')

print winhttp.Option(6) #True

winhttp.Option(6) = False #SyntaxError  <----------------how to set Option(6) to false

print winhttp.Option(6)

winhttp.Open('GET', 'http://google.com', False)
winhttp.Send()

print winhttp.responsetext 
```

> ============================================
> 
> 输出：
> 
> 无效语法：winhttp.py，第 13 行，pos 11 文件“c:\Users\***\Desktop\winhttp.py”，第 13 行，在？设置 winhttp.Option(6) = False
> 
> 怎么做？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:08:20.513

这应该有效：

```
winhttp.SetOption(6, False) 
```

除非您有使用 winhttprequest 的真正充分理由，否则我会使用 Python 标准库中的某些内容，或者最好安装[requests](http://docs.python-requests.org/en/latest/)库。你会发现这些选项更容易处理。

# javascript - 在 HTML 中编写 JavaScript 变量

> ID：14417544
> 
> 赞同：0
> 
> 时间：2013-01-19T18:42:28.867
> 
> 标签：javascript, html, geolocation

对不起，我缺乏知识，但我正在尝试从 javascript 打印出 html 代码中的 vars（如果有人可以清理 JS，那将是一个奖励）。我尝试添加 document.write 但从未奏效。基本上我需要街道和国家在地图下打印出来。

```
 <!DOCTYPE HTML>
<html>
<head>
<script src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position){
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var coords = new google.maps.LatLng(latitude, longitude);
        var mapOptions = {
            zoom: 15,
            center: coords,
            mapTypeControl: true,
            navigationControlOptions: {
                style: google.maps.NavigationControlStyle.SMALL
            },
            mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(
                document.getElementById("mapContainer"), mapOptions
                );
            var marker = new google.maps.Marker({
                    position: coords,
                    map: map,
                    title: "Your current location!"
            });

        });
    }else {
        alert("Geolocation API is not supported in your browser.");
    }
</script>

<script type="text/javascript"> 
  var geocoder;

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
} 
//Get the latitude and the longitude;
function successFunction(position) {
    var lat = position.coords.latitude;
    var lng = position.coords.longitude;
    codeLatLng(lat, lng)
}

function errorFunction(){
    alert("Geocoder failed");
}

  function initialize() {
    geocoder = new google.maps.Geocoder();

  }

  function codeLatLng(lat, lng) {

    var latlng = new google.maps.LatLng(lat, lng);
    geocoder.geocode({'latLng': latlng}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
      console.log(results)
        if (results[1]) {
         //formatted address
         alert(results[0].formatted_address)
        //find country name
             for (var i=0; i<results[0].address_components.length; i++) {
            for (var b=0;b<results[0].address_components[i].types.length;b++) {

            //there are different types that might hold a city admin_area_lvl_1 usually does in come cases looking for sublocality type will be more appropriate
                if (results[0].address_components[i].types[b] == "administrative_area_level_1") {
                    //this is the object you are looking for
                    city= results[0].address_components[i];
                    break;
                }
            }
        }
        //city data
        alert(city.short_name + " " + city.long_name)

        } else {
          alert("No results found");
        }
      } else {
        alert("Geocoder failed due to: " + status);
      }
    });
  }
</script> 

<style type="text/css">
#mapContainer {
    height: 500px;
    width: 800px;
    border:10px solid #eaeaea;
}
</style>
</head>
<body onload="initialize()"> 
    <div id="mapContainer"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:52:14.227

您可以使用以下构造代替 document.write

```
var x= document.getElementById("mapContainer");
x.innerHTML="your content goes here"; 
```

# php - 插入数据 PHP/PDO 用于用户注册

> ID：14417547
> 
> 赞同：0
> 
> 时间：2013-01-19T18:42:36.430
> 
> 标签：php, mysql, pdo

我试图使用 PDO 创建一个用户注册页面，我之前从未使用过这个，所以我无法理解这些值是如何插入到我的表中的。

任何人都可以看到我的代码出了什么问题吗？

```
<?php

include_once ('/_includes/classes/connection.class.php');

$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
$email = $_POST['email'];
$password = $_POST['password'];
$accounttype = $_POST['accounttype'];

$query = "INSERT INTO users(firstname,lastname,email,password,accounttype) VALUES ($firstname,$lastname,$email,$password,$accounttype)";
echo $query;
$count = $dbh->exec($query);
$dbh = null;

?> 
```

* * *

```
<?php

$dsn = 'mysql:host=localhost;dbname=site.co.uk';
$username = 'access@site.co.uk';
$password = 'password';
$options = array(
    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8',
); 
$dbh = new PDO($dsn, $username, $password, $options);

$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
$email = $_POST['email'];
$userpassword = $_POST['password'];
$accounttype = $_POST['accounttype'];

$query = "INSERT INTO users(firstname,lastname,email,password,accounttype) VALUES (:firstname,:lastname,:email,:password,:accounttype)";
$stmt = $dbh->prepare($query);
$stmt->bindParam(':firstname', $firstname);
$stmt->bindParam(':lastname', $lastname);
$stmt->bindParam(':email', $email);
$stmt->bindParam(':password', $userpassword);
$stmt->bindParam(':accounttype', $accounttype);
$stmt->execute();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:44:24.313

永远不要像以前那样做，导致[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)

使用准备好的语句。

[http://php.net/manual/de/pdo.prepared-statements.php](http://php.net/manual/de/pdo.prepared-statements.php)

```
<?php

require_once ('_includes/classes/connection.class.php');

$stmt = $dbh->prepare('INSERT INTO users (firstname,lastname,email,password,accounttype) VALUES (:firstname,:lastname,:email,:password,:accounttype)');
$stmt->execute(array($_POST)); 
```

出了什么问题，你忘记了你的价值观的引号。但在准备好的陈述的情况下，您不需要引号。

[http://www.w3schools.com/sql/sql_insert.asp](http://www.w3schools.com/sql/sql_insert.asp)

并且请不要将纯文本密码保存到数据库中，使用哈希

[PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

如果您确实需要包含文件，最好使用“require”或“require_once”。

[http://php.net/manual/en/function.require.php](http://php.net/manual/en/function.require.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T18:48:24.583

1.  `include_once ('/_includes/classes/connection.class.php');`永远不会包括任何东西。本地文件系统的根目录下没有 _includes 目录
2.  由于您没有提及任何错误 - 因此，您没有设置适当的错误报告。

> 任何人都可以看到我的代码出了什么问题吗？

可能还有其他错误，但观看代码不是要走的路。必须**运行**代码、**调试**它并观察发生的错误。

我唯一需要补充的是 - 你的代码就像洪水一样湿。看看它：你把每个字段名都写了六次！

*   `$firstname = $_POST['firstname'];`- 2x
*   （名字）值（：名字）` - 2x
*   `bindParam(':firstname', $firstname);`- 2x

总共6次重复

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T18:47:44.587

您需要绑定值而不是使用字符串连接。

```
 $dsn = 'mysql:host=localhost;dbname=mydb';
  $username = 'myun';
  $password = 'mypw';
  $options = array(
      PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8',
  ); 
  $dbh = new PDO($dsn, $username, $password, $options);
  $query = "INSERT INTO users(firstname,lastname,email,password,accounttype) VALUES
        (:firstname,:lastname,:email,:password,:accounttype)";
  $stmt = $dbh->prepare($query);
  $stmt->bindParam(':firstname', $firstname);
  $stmt->bindParam(':lastname', $lastname);
  //etc
  $stmt->execute(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T19:08:20.350

你真的应该使用准备好的语句。你应该做更多这样的事情，假设：

*   $dbh 是一个 PDO 对象
*   您已检查 $_POST 数组以确保它包含您认为应该包含的所有字段
*   你修复你的包含语句
*   您选择将散列密码保存在数据库中，而不是以明文形式存储它们

你的代码会更像这样。

```
<?php

error_reporting(E_ALL);

include_once ('_includes/classes/connection.class.php');

$_POST['password'] = hash('md5', $_POST['password']);

$statement = $dbh->prepare("INSERT INTO 
    users(firstname,lastname,email,password,accounttype) 
    VALUES (:firstname, :lastname, :email, :password, :accounttype)");
if ($statement->execute($_POST) !== true) {
    // there was some kind of error
    // perhaps $statement->errorInfo() will tell you something
} 
```

# android - AS3 Shoutcast 流在 AIR 3.2 中不起作用

> ID：14417550
> 
> 赞同：0
> 
> 时间：2013-01-19T18:42:48.943
> 
> 标签：android, actionscript-3, audio, air, streaming

我正在使用 Adob​​e Flash CS6 和 ActionScript 3 制作一个简单的移动无线电应用程序。下面的代码在针对 Flash Player 11.2 时工作得非常好，但在适用于 iOS、Android 和桌面的 AIR 3.2 上却失败了。听不到声音，但也没有错误发生。

```
var channel:SoundChannel;
var sound:Sound = new Sound();

sound.load(new URLRequest("http://groove.wavestreamer.com:9579/"));

channel = sound.play(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:38:55.077

在您的 sound.load 之后设置 true 例如

```
 sound = new Sound();
     sound.loadSound ("http://groove.wavestreamer.com:9579/;",true); 
```

也看看[这个](http://www.wavestreaming.com/player/free-shoutcast-flash-player/?)

# dependency-injection - 为什么 Windsor 不解决我注册的每个装饰器？

> ID：14417551
> 
> 赞同：0
> 
> 时间：2013-01-19T18:43:15.407
> 
> 标签：dependency-injection, castle-windsor

我有一门课，我想装饰两次。但是，当我解决这个类时，Windsor 只装饰它一次，而不是使用我的 2 个装饰器。我不确定为什么会这样，因为我在我要解决的课程之前注册了两个装饰器，这就是我理解装饰器与 Windsor 一起工作的方式。

这是我的代码。

```
public interface IQueryExecuter
{
    TReturn Execute<TReturn>(IQuery<TReturn> query);
}

public class QueryLoggingDecorator : IQueryExecuter
{
    private ILogger _logger = NullLogger.Instance;

    public ILogger Logger
    {
        set { _logger = value; }
    }

    public TReturn Execute<TReturn>(IQuery<TReturn> query)
    {
        _logger.Info("Before query execute");
        var queryResults = query.Execute();
        _logger.Info("After query execute");

        return queryResults;
    }
}

public class QueryTransactionDecorator : IQueryExecuter
{
    public TReturn Execute<TReturn>(IQuery<TReturn> query)
    {
        try
        {
            Console.WriteLine("Beginning transaction");
            var queryResults = query.Execute();
            Console.WriteLine("Comitting transaction");

            return queryResults;
        }
        catch (Exception)
        {
            Console.WriteLine("Rolling back transaction");
            throw;
        }
    }
}

public interface IQuery<out TReturn>
{
    TReturn Execute();
}

public class Query : IQuery<string>
{
    public string Execute()
    {
        Console.WriteLine("Executing query");

        var queryResults = Path.GetRandomFileName();

        return queryResults;
    }
} 
```

这是我的温莎注册码。

```
public class DefaultInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(Component
            .For<IQueryExecuter>()
            .ImplementedBy<QueryLoggingDecorator>()
            .LifestyleTransient());
        container.Register(Component
            .For<IQueryExecuter>()
            .ImplementedBy<QueryTransactionDecorator>()
            .LifestyleTransient());
        container.Register(Component
            .For<IQueryExecuter>()
            .ImplementedBy<QueryExecuter>()
            .LifestyleTransient());
    }
} 
```

最后，这是我的调用代码。

```
var container = new WindsorContainer();

container.Install(FromAssembly.This());

var queryExecuter = container.Resolve<IQueryExecuter>();
var queryResults = queryExecuter.Execute(new Query()); 
```

我错过了什么？

我希望当我解决`IQueryExecuter`温莎会用`QueryLoggingDecorator`然后装饰`QueryTransactionDecorator`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T23:50:10.897

问题是这些不是装饰器；它们只是同一接口的不同实现。装饰器需要一些东西来实际装饰，这是它们正在实现的同一接口的一个实例，因此它们可以调用链中的下一个装饰器。

您需要设置对 IQueryExecuter 的可注入引用。之后，Windsor 处理剩下的事情，按照注册的顺序注入装饰器链（至少，根据文档）。

例如：

```
public class QueryLoggingDecorator : IQueryExecuter
{
    private ILogger _logger = NullLogger.Instance;
    private IQueryExecuter innerExecuter;

    public QueryLoggingDecorator(IQueryExecuter innerExecuter)
    {
        this.innerExecuter = innerExecuter;
    }

    public ILogger Logger
    {
        set { _logger = value; }
    }

    public TReturn Execute<TReturn>(IQuery<TReturn> query)
    {
        _logger.Info("Before query execute");
        var queryResults = innerExecuter.Execute(query);
        _logger.Info("After query execute");

        return queryResults;
    }
} 
```

我承认不会直接尝试这个，但[这个博客](http://mikehadlow.blogspot.com/2010/01/10-advanced-windsor-tricks-4-how-to.html)表明它会起作用。

# asp.net - 在 Site.Master 中形成背景图像

> ID：14417556
> 
> 赞同：3
> 
> 时间：2013-01-19T18:43:34.267
> 
> 标签：asp.net, image, background, master-pages

我已经尽一切努力让图像显示为背景。我让它在我的本地 Visual Studio Express 安装上运行，但是当我上传到 Internet 主机服务器时，它不会正确呈现。我在标题背景图像上遇到了同样的问题，但找到了一个可行的解决方案，但同样的解决方案不适用于表单背景。

如果我在 中放置相同的背景图像样式标签 `div class="page"`，它将在我的开发环境和 Internet 主机服务器上呈现，但我希望我的页面位于此图像之上（即我的应用程序代码页位于此背景图像之上。

有什么想法或建议吗？

Site.Master 代码片段

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="MyApp.SiteMaster" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server">
    <title><%=Page.Title %></title>
    <link href="~/Styles/site.css" rel="stylesheet" type="text/css" />
    <link id="Link1" runat="server" rel="shortcut icon" href="~/favicon.ico" type="image/x-icon"/>
    <link id="Link2" runat="server" rel="icon" href="~/favicon.ico" type="image/ico"/>
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
    <style type="text/css">
        .style1
        {
            text-align: center;
        }
    </style>

    <script runat="server">

    protected void Page_Load(object sender, EventArgs e)
    {

    }
     /* this code statement below is what I used to solve the header banner issue 
        but does not work for form background
     */
    public string imgHeaderPath = System.Web.VirtualPathUtility.ToAbsolute("~/Images/water-banner.jpg");

</script>
</head>
<body >
 <form runat="server" style="background-position: left top;  background-repeat: repeat; background-attachment: fixed; background-image: url('/Images/willnotdisplay.jpg')">

    <div class="page">

          <div class="header" style="background-image: url('<%= imgHeaderPath %>')">     
            <div class="title">                
                    <h1>&nbsp;<asp:Localize ID="Localize1" runat="server"  Text="<%$ Resources:Resource, Title %>" /></h1>
            </div>
.
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:49:27.707

你应该能够做到

```
<div class="header" style="background-image: url('/Images/water-banner.jpg')"> 
```

没有使用**imgHeaderPath的开销**

这可能不会显示在您的开发机器上

或者，您可以将以下内容添加到您的 site.css 文件中

```
div.header {background-image: url('/Images/water-banner.jpg');} 
```

并删除 div 上的 style 属性，该属性应该适用于 Dev 和 Production

# c++ - 从文件中获取某个字节块

> ID：14417559
> 
> 赞同：0
> 
> 时间：2013-01-19T18:43:46.560
> 
> 标签：c++

对于作业，我必须通过 xml 通过使用 base64 对其进行编码来发送文件。我必须分多个部分发送文件。为此，我想从该文件中获取一个字节块。我希望我可以使用 blocksize 和 blocknumber 参数来做到这一点。

但我并不总是得到字节回来，我猜我做错了什么或者只是错过了一些愚蠢的事情。

我创建了以下代码：

```
// int blocknumber (the blocknumber thats requested)
// int blocksize (by default we want to use 1024)

//Content of the block
ifstream is;
is.open(fullPath.c_str(), ios::binary);

// get length of file:
is.seekg(0, ios::end);
int length = is.tellg();

char* buffer = new char [blocksize];
//test if file is bigger then size
if (length >= blocknumber * blocksize) {
    //skip to relevent part
    is.seekg(blocknumber * blocksize, ios::beg);
    is.read(buffer, blocksize);
} 
```

这是我取回数据时得到的结果

```
blocknumber 0
GkXfo6NChoEBQveBAULygQRC84EIQoKIbWF0cm9za2FCh4ECQoWBAhhTgGcB 
```

但是对于第 3 个区块，我什么也得不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:38:18.157

它解决了......确实非常非常愚蠢......

问题毕竟不是代码，而是它之后的编码部分。

块大小 512 块 5
=

这将轻描淡写地留下历史上最大的面部痕迹。

感谢您的支持

# c++ - C++ 字节字符串转换为字节数据类型并计算字节数

> ID：14417560
> 
> 赞同：-1
> 
> 时间：2013-01-19T18:43:50.240
> 
> 标签：c++, c, string, types, byte

正如标题所说，我尝试将 C++ 字节字符串转换为字节数据类型并计算字节数。我从文本框中获得的字符串将包含一系列单字节十六进制数字，但我需要将其作为字节发送。

```
char packet_data[200];
HWND hTextBox2 = GetDlgItem(TabOneDlg,IDC_EDIT3);

SendMessageA(hTextBox2, WM_GETTEXT, (WPARAM)200, (LPARAM)packet_data); 
```

这就是我获取输入值的方式（我使用的是 win32 API - 非托管表单）

输入字符串示例（十六进制）

```
AA BB CC DD - 4 bytes ! 
```

简而言之，我想这样做：得到一个包含十六进制数字的文本表示的字符串，我想将十六进制数字的每个文本表示转换为“正常”数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:33:55.757

如果您确定十六进制数字用空格分隔（如问题所示），那么提取它们是一个简单的问题。C++ 中最简单的方法是使用[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)和普通输入运算符`>>`：

```
std::istringstream istr(packet_data);
std::vector<uint8_t> data;

uint8_t i;
while (istr >> std::hex >> i)
    data.push_back(i); 
```

在上面的代码之后，向量`data`将包含字符串中的所有数据。如果您需要通过套接字（或类似方式）发送数据，您可以使用[`std::vector::data`](http://en.cppreference.com/w/cpp/container/vector/data)获取指向数据的原始指针（或`&data[0]`在`data`函数不存在时使用），并且字节数可从[`std::vector::size`](http://en.cppreference.com/w/cpp/container/vector/size).

# perl - 想为我的 Perl 生成的 RSS 提要中的项目添加图像/缩略图

> ID：14417561
> 
> 赞同：0
> 
> 时间：2013-01-19T18:43:53.780
> 
> 标签：perl, rss

我使用 Perl 脚本来执行各种自动化功能，并且正在使用 XML::RSS 创建日志输出的 RSS 提要。我将 RSS2.0 用于提要，因为 XML::RSS 创建的默认 1.0 无法正常工作。

在整个提要的顶部添加图像似乎相当简单。但我想做的是为每个项目（绿色勾号/红十字）添加一个图像（或一个小缩略图）。RSS 标准表明这应该使用`<media:thumbnail>`or`<Media:content>`标记来完成，但我不知道如何使用 XML::RSS 模块来实现这一点。

有没有人有任何想法。我的提要更新程序目前看起来像这样。

```
my $rss = new XML::RSS (version => '2.0');
$rss->parsefile($localFeed) or die;
pop(@{$rss->{'items'}}) if (@{$rss->{'items'}} == 15);
$rss->add_item(title => "$_[0]",
    description  => "$_[1]",
    pubDate => "$dtString",
    mode  => 'insert'
);
$rss->save($localFeed); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:55:04.267

好的，我会很高兴地描述我最终是如何解决它的。我不确定这是否是最好的方法，但它似乎有效。我从另一个互联网帖子中无耻地撕掉了这个，但我一生都记不起在哪里，所以不幸的是，我无法在应得的地方给予信任。

我在解析命令之前使用以下语句添加了“媒体”模块：

```
$rss->add_module(prefix=>'media', uri=>"http://search.yahoo.com/mrss");
$rss->parsefile($myFeed) or die("could not parse feed"); 
```

现在，我的 add item 语句可以包含以下语法，并且 XML::RSS 只会将其添加到提要中而不会抱怨

```
$rss->add_item(
title => "My Title",
    description  => "This describes what the item is about",
    pubDate => "2012-12-012, 13:13 GMT",
    media => {
        thumbnail => {
            width => "66",
            height => "49",
            url => "path/to/my/image.jpg",
            type => 'image/jpeg'
        }
    },
    mode  => 'insert'
); 
```

不忘初心

```
$rss->save($myFeed); 
```

陈述。现在我只需要找到一个像样的浏览器和移动 RSS 阅读器，它实际上可以将 media:thumbnail 标签显示为图像

希望这可以帮助其他试图达到类似结果的人。

# r - 如何将文本文件读入列表数组？

> ID：14417567
> 
> 赞同：4
> 
> 时间：2013-01-19T18:44:25.713
> 
> 标签：r

我刚开始用 R-Lang 编码，我想知道阅读计划文本文件的最佳方法是什么？我正在寻找类似这样的伪代码：

```
data = new List();
data = file.readall("myfile.txt")
close

foreach (a in data) {
  print(a)
} 
```

非常简单的文本，我阅读了教程，但不了解 R 的文件访问是如何工作的，它看起来与我以前使用的任何东西都大不相同。我不确定要使用什么 args。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T19:01:14.163

您的 R 风格伪代码：

```
dat = readLines("file.txt") 
```

现在`dat`是一个向量，其中文件中的每一行都是向量中的一个元素。R 是一种面向功能的语言，因此它对每个元素执行给定的功能：

```
l = lapply(dat, process_line) 
```

`process_line`处理每一行的函数在哪里。结果是已处理行的列表。将它们放入`data.frame`：

```
do.call("rbind", l) 
```

或者使用`ldply`包`plyr`中的一次性完成此操作：

```
require(plyr)
ldply(dat, process_line) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T18:59:22.480

试试这个

```
 test.txt <- read.table("d:/test.txt", header=T) 
```

# python - 将一行python分成多行？

> ID：14417571
> 
> 赞同：17
> 
> 时间：2013-01-19T18:44:45.993
> 
> 标签：python, syntax

在 C++ 中，如果代码行太长，或者如果其中有很多检查，我喜欢拆分我的代码行。

```
if (x == 10 && y < 20 && name == "hi" && obj1 != null) 
    // Do things 

// vs

if (x == 10
    && y < 20
    && name == "hi"
    && obj1 != null)
{
    // Do things
}

AddAndSpawnParticleSystem(inParticleEffectName, inEffectIDHash, overrideParticleSystems, mAppliedEffects[inEffectIDHash], inTagNameHash);
// vs
AddAndSpawnParticleSystem(inParticleEffectName, inEffectIDHash, overrideParticleSystems, 
    mAppliedEffects[inEffectIDHash], inTagNameHash); 
```

在 Python 中，代码块由选项卡定义，而不是由“;” 在行尾

```
if number > 5 and number < 15:
    print "1" 
```

python中可以多行吗？喜欢...

```
if number > 5 
and number < 15:
    print "1" 
```

我不认为这是可能的，但它会很酷！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-19T18:47:17.317

风格指南 ( [PEP-8](https://www.python.org/dev/peps/pep-0008/#:%7E:text=the%20preferred%20way%20of%20wrapping%20long%20lines%20is%20by%20using%20python%27s%20implied%20line%20continuation%20inside%20parentheses%2C%20brackets%20and%20braces.%20long%20lines%20can%20be%20broken%20over%20multiple%20lines%20by%20wrapping%20expressions%20in%20parentheses.%20these%20should%20be%20used%20in%20preference%20to%20using%20a%20backslash%20for%20line%20continuation.) ) 说：

> 包装长行的首选方法是在括号、方括号和大括号内使用 Python 的隐含行继续。通过将表达式括在括号中，可以将长行分成多行。这些应该优先使用反斜杠来继续行。确保适当缩进续行。打破二元运算符的首选位置是在运算符之后，而不是在它之前。

方法一：使用括号

```
if (number > 5 and
        number < 15):
    print "1" 
```

方法 2：使用反斜杠

```
if number > 5 and \
number < 15:
    print "1" 
```

方法 3：使用反斜杠 + 缩进以获得更好的可读性

```
if number > 5 and \
        number < 15:
    print "1" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-19T18:47:28.317

如果用括号括起来，则可以将表达式分成多行：

```
if (x == 10
    and y < 20
    and name == "hi"
    and obj1 is not None):
    # do something 
```

用于创建列表或字典的方括号或花括号也是如此：

```
mylist = [1, 2, 3, 4,
          5, 6, 7, 8]

mydict = {1: "a", 2: "b",
          3: "c", 4: "d"} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-19T20:22:48.397

pep8 标准指南似乎为括号中的内容列表缩进了新行，而对于长行，他们建议在行尾使用反斜杠。

[缩进新行](http://www.python.org/dev/peps/pep-0008/#indentation)

[行尾的反斜杠](http://www.python.org/dev/peps/pep-0008/#maximum-line-length)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T18:46:50.000

您可以放置`\`​​符号来转义行尾：

```
if number > 5 \
   and number < 15:
    print '1' 
```

在某些情况下（例如在括号内），您不需要特殊符号来转义行尾。

[在有关 python 词法分析](http://docs.python.org/2/reference/lexical_analysis.html)的文档中查看更多信息：

> 逻辑行的结尾由记号 NEWLINE 表示。语句不能跨越逻辑行边界，除非语法允许 NEWLINE（例如，复合语句中的语句之间）。一条逻辑线路由一条或多条物理线路按照显式或隐式线路连接规则构建而成。

# android - 带有 Listview 活动的片段追加

> ID：14417576
> 
> 赞同：0
> 
> 时间：2013-01-19T18:45:03.373
> 
> 标签：android, android-layout, android-intent

我已经将视图实现为带有片段的拆分视图，当单击任何列表视图项目时，拆分视图的另一部分应显示特定视图，请检查我的代码以创建视图并建议我在单击列表视图时做错了什么项目多次，webview 水平附加

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle saved) {
    int n;
    Context c = getActivity().getApplicationContext();

    LinearLayout l = new LinearLayout(c);

    LayoutInflater inflater1= (LayoutInflater)c.getSystemService (Context.LAYOUT_INFLATER_SERVICE);     
    View view=inflater1.inflate(R.layout.webview,container,false);  
    l.addView(view);

    return l;
} 
```

# java - 如何在 Servlet 中下载同名文件并使用 html 和 javascript

> ID：14417585
> 
> 赞同：0
> 
> 时间：2013-01-19T18:45:40.470
> 
> 标签：java, javascript, html, servlets

我正在使用 servlet 制作下载程序。

```
enter code here package com.lara;
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class HelloWorld extends HttpServlet
 {
  public void doGet(HttpServletRequest request, HttpServletResponse response)
  throws ServletException,IOException
   {

 // new code -- start
   String filename = request.getParameter("ojdbc");
    filename = filename + ".jar";
    response.setHeader("Content-Disposition","attachment;filename=\"" + filename +        "\"");

   ServletContext ct = getServletContext();
 InputStream in = ct.getResourceAsStream("/bookCode.jar");
 int read=0;
   byte[] bytes = new byte[1024];
  OutputStream os = response.getOutputStream();
  while((read=in.read(bytes))!=-1)
  {
   os.write(bytes,0,read);
  }
 os.flush();
   os.close();
 }
} 
```

//我想在html中使用锚标签..所以通过单击它我可以获得相同的文件名称，在我的情况下为null..但可以使用..使用其他方法...总之我想要代码。通过锚链接的 jar 名称 任何人都可以帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:39:17.073

这可能有效...尝试添加：

```
response.setContentType("application/x-download"); 
```

# css - 如何更改靠近左边缘的元素的左边距

> ID：14417587
> 
> 赞同：0
> 
> 时间：2013-01-19T18:45:52.673
> 
> 标签：css, margin

这是我想要做的：我有一个包装盒`.box-body`，我想更改`margin-left`靠近`0`左边缘的所有元素。

在我在[http://jsfiddle.net/8NXMq/6/](http://jsfiddle.net/8NXMq/6/)`views.py`上的示例中，我想要带有和`context_processors.py`to have的盒子`margin-left: 0`，但其余的保持不变，我想创建额外的类并覆盖这个属性，但这不是我想要的要做，因为我不知道我将拥有的盒子数量可能是 7 个，可能是 20 个....加上如果你调整窗口的大小，一行中的盒子数量会改变。

这是CSS：

```
.box-body {
    background: #ddd;  
    width: 700px;
    height: 300px
}

.app-file {
    position: relative;
    float: left;
    margin: 10px 0 0 14px;
    display: inline-block;
    padding: 10px 18px 10px 18px;
    text-align: center;
    font-size: 16px;
    cursor: pointer;
    background: rgba(255,255,255, 0.9);
    color: rgb(68,68,68);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:58:17.320

您可以在框体左侧添加一个负边距。像这样的东西：http: [//jsfiddle.net/8NXMq/7/](http://jsfiddle.net/8NXMq/7/)

CSS：

```
.box-body {
    background: #ddd;  
    width: 714px;
    height: 300px;
    margin-left: -14px;
} 
```

This will cause the entire body box to move 14px to the left. Since it is outside the viewport, this will not be visible. Note that i also added 14px to the width to keep the visible size of the box at 700px.

# android - Android（eclipse）PNG透明度显示为黑色（带有图片示例）

> ID：14417589
> 
> 赞同：2
> 
> 时间：2013-01-19T18:45:57.193
> 
> 标签：android, eclipse, image, png, transparency

我在使透明 PNG 在 android/eclipse 中看起来透明时遇到问题。

我有这个：

```
<ImageView
        android:id="@+id/someid"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/theimage" /> 
```

在 imageview 中使用此图像时，XML 图形布局将图像透明度显示为黑色：

[http://s7.directupload.net/file/d/3140/ehqd3yhm_png.htm](http://s7.directupload.net/file/d/3140/ehqd3yhm_png.htm)

如果我使用以下图像，则透明度显示良好：

[http://s7.directupload.net/file/d/3140/dc5aco6n_png.htm](http://s7.directupload.net/file/d/3140/dc5aco6n_png.htm)

您将看到图像图标在 Windows 桌面墙纸的前面是透明的。您也可以手动验证图像，看看它们实际上都是透明的。

这是一个错误还是发生了什么？我无法创建将在 eclipse/android 中显示的透明 PNG。所以我从网上截了第二张图给大家看……

编辑：我需要使很多图像透明，目前我正在使用 irfanview。还有什么程序适合？

**编辑2：**

另外要注意的一件事是我把

```
android:theme="@android:style/Theme.Light" 
```

进入我的清单，因为我想要白色主题而不是黑色。不知道这是否有任何影响。

整个XML文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/beleg_imagegesperrt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:src="@drawable/ic_schloss_zu"/>

    <!-- this is the imageview I test with, i added  android:background="#FF0000" but does not help -->
    <ImageView
        android:id="@+id/beleg_imageabgeschlossen"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="onClickBarauslagen"
        android:src="@drawable/dddd" 
         />

    <ImageView
        android:id="@+id/beleg_imageeinsatzberichtvorhanden"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:src="@drawable/ic_notizbuch_unselected" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/beleg_textbelegid"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/textbelegid" />

        <TextView
            android:id="@+id/beleg_belegid"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="@dimen/abstand_liste"
            android:text="@string/belegid" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/beleg_textbelegvonbis"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/textbelegvonbis" />

        <TextView
            android:id="@+id/beleg_belegvon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="@dimen/abstand_liste"
            android:text="@string/belegvon" />

        <TextView
            android:id="@+id/beleg_belegbis"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="@dimen/abstand_liste"
            android:text="@string/belegbis" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/beleg_textbelegabgeschlossen"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/textbelegabgeschlossen" />

        <TextView
            android:id="@+id/beleg_belegabgeschlossen"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="@dimen/abstand_liste"
            android:text="@string/belegabgeschlossen" />

        <TextView
            android:id="@+id/beleg_textbeleggesperrt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/textbeleggesperrt" />

        <TextView
            android:id="@+id/beleg_beleggesperrt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="@dimen/abstand_liste"
            android:text="@string/beleggesperrt" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/beleg_textbelegsummestunden"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/textbelegsummestunden" />

        <TextView
            android:id="@+id/beleg_belegsummestunden"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="@dimen/abstand_liste"
            android:text="@string/belegsummestunden" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:04:09.027

很可能您的图像显示为透明，但您的布局的某些部分实际上是黑色背景，并且由于图像的部分是透明的，因此背景是透明的。

尝试将背景设置为`ImageView`某种颜色，看看它是否会改变。

您可以将此行添加到`ImageView`部分中的 xml 中：

`android:background="#FF0000"`（红色）或其他一些十六进制值，看看是否显示出来。

你能发布整个xml文件吗？

编辑：我使用 Paint.net 处理图像，它是免费的，并且非常适合创建透明背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:02:29.210

***OK 确认这是一个 IrfanView 错误。***

但是，如果我使用 IrfanView 插件 pngout.dll（感谢上帝存在）来保存 png（您可以在保存对话框中选择是否使用该插件），则 png 不会“损坏”。

谁曾想到？

编辑：在此处下载插件[http://www.irfanview.com/plugins.htm](http://www.irfanview.com/plugins.htm)（在其中一个 zip 文件中）

编辑2：好的也可能是日食的错误。任何程序写入或读取 PNG non-standardconform，即

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T10:11:09.587

尝试使用 null 作为 xml 布局中图像视图的背景。

```
android:background="@null" 
```

# node.js - Node.js：req.query[] 和 req.params 之间的区别

> ID：14417592
> 
> 赞同：169
> 
> 时间：2013-01-19T18:46:33.793
> 
> 标签：node.js, query-string

`req.query[myParam]`通过和获取 QUERY_STRING 参数有区别`req.params.myParam`吗？如果是这样，我应该什么时候使用哪个？

* * *

## 回答 #1

> 赞同：329
> 
> 时间：2013-01-24T18:27:20.560

Given this route

```
app.get('/hi/:param1', function(req,res){} ); 
```

and given this URL `http://www.google.com/hi/there?qs1=you&qs2=tube`

You will have:

req.**query**

```
{
  qs1: 'you',
  qs2: 'tube'
} 
```

req.**params**

```
{
  param1: 'there'
} 
```

[Express req.params >>](http://expressjs.com/api.html#req.params)

* * *

## 回答 #2

> 赞同：187
> 
> 时间：2013-01-19T19:37:21.820

[`req.params`](http://expressjs.com/en/api.html#req.params)包含路由参数（在 URL 的路径部分中），并[`req.query`](http://expressjs.com/en/api.html#req.query)包含 URL 查询参数（在`?`URL 的后面）。

您还可以使用[`req.param(name)`](http://expressjs.com/en/api.html#req.param)在两个位置（以及`req.body`）查找参数，但此方法现在已弃用。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2019-05-17T10:06:12.353

假设您已经像这样定义了您的路线名称：

```
https://localhost:3000/user/:userId 
```

这将成为：

```
https://localhost:3000/user/5896544 
```

在这里，如果你要打印： **request.params**

```
{
userId : 5896544
} 
```

所以

```
request.params.userId = 5896544 
```

所以**request.params**是一个包含命名路由属性的对象

**request.query**来自 URL 中的查询参数，例如：

```
https://localhost:3000/user?userId=5896544 
```

**请求查询**

```
{

userId: 5896544

} 
```

所以

```
request.query.userId = 5896544 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-08-24T14:48:52.527

您现在应该能够使用点表示法访问查询。

如果你想访问说你正在接收一个**GET**请求`/checkEmail?type=email&utm_source=xxxx&email=xxxxx&utm_campaign=XX`并且你想获取使用的*查询*。

```
var type = req.query.type,
    email = req.query.email,
    utm = {
     source: req.query.utm_source,
     campaign: req.query.utm_campaign
    }; 
```

**参数**用于接收请求的自定义参数，例如（示例）：

```
router.get('/:userID/food/edit/:foodID', function(req, res){
 //sample GET request at '/xavg234/food/edit/jb3552'

 var userToFind = req.params.userID;//gets xavg234
 var foodToSearch = req.params.foodID;//gets jb3552
 User.findOne({'userid':userToFind}) //dummy code
     .then(function(user){...})
     .catch(function(err){console.log(err)});
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-08T19:42:20.503

`req.query`我想提一个关于`req.query`.

例子：

```
// Fetching patients from the database
exports.getPatients = (req, res, next) => {

const pageSize = +req.query.pageSize;
const currentPage = +req.query.currentPage;

const patientQuery = Patient.find();
let fetchedPatients;

// If pageSize and currentPage are not undefined (if they are both set and contain valid values)
if(pageSize && currentPage) {
    /**
     * Construct two different queries 
     * - Fetch all patients 
     * - Adjusted one to only fetch a selected slice of patients for a given page
     */
    patientQuery
        /**
         * This means I will not retrieve all patients I find, but I will skip the first "n" patients
         * For example, if I am on page 2, then I want to skip all patients that were displayed on page 1,
         * 
         * Another example: if I am displaying 7 patients per page , I want to skip 7 items because I am on page 2,
         * so I want to skip (7 * (2 - 1)) => 7 items
         */
        .skip(pageSize * (currentPage - 1))

        /**
         * Narrow dont the amound documents I retreive for the current page
         * Limits the amount of returned documents
         * 
         * For example: If I got 7 items per page, then I want to limit the query to only
         * return 7 items. 
         */
        .limit(pageSize);
}
patientQuery.then(documents => {
    res.status(200).json({
        message: 'Patients fetched successfully',
        patients: documents
    });
  });
}; 
```

你会注意到`+`前面的标志`req.query.pageSize`和`req.query.currentPage`

为什么？如果你`+`在这种情况下删除，你会得到一个错误，并且会抛出这个错误，因为我们将使用无效的类型（错误消息'limit'字段必须是数字）。

**重要提示**：默认情况下，如果您从这些查询参数中提取某些内容，它将**始终是一个字符串**，因为它来自 URL 并且被视为文本。

如果我们需要处理数字，并将查询语句从文本转换为数字，我们可以简单地在语句前面添加一个加号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-18T09:21:36.597

我只想补充一点，如果您来自`axios`, (GET/POST)，您可以通过配置使用`query/url params`(可读)：`req.query`

```
axios.post('/users', {...data}, {
  headers: {...anyHeaders},
  params: {uid: `${uid}`}
})
```

并且您通过以下路径使`path/route variables`（可读）可用：`req.params`

```
axios.get(`/users/${uid`}, {
  headers: {...anyHeaders}
})
```

我还要补充一点，用于在服务器上读取查询参数的名称必须与来自客户端的名称匹配。对于可以在服务器上使用任何名称的路径变量，情况并非如此，前提是该部分路径/路由可用（基本上是进行替换 - 有点像`react-router`它是如何做到的：） `/path/:variable`。

# php - php从子数组键创建一组子数组

> ID：14417595
> 
> 赞同：0
> 
> 时间：2013-01-19T18:46:38.927
> 
> 标签：php, arrays

我有一个如下数组，其中包含不同数量的顶级数组：

```
Array
(
    [1534] => Array
        (
            [userid] => 1534
            [a1] => 3
            [a2] => 6
            [a3] => 5
            [groupID] => 2
            [total] => 109
        )

    [1535] => Array
        (
            [userid] => 1535
            [a1] => 6
            [a2] => 4
            [a3] => 1
            [groupID] => 2
            [total] => 125
        )
) 
```

除了 foreach 之外，还有其他选择吗：

```
Array
{
    [userid] => Array
        (
            [1534] => 1534
            [1535] => 1535
        )

    [a1] => Array
        (
            [1534] => 3
            [1535] => 6
        )

    [a2] => Array
        (
            [1534] => 6
            [1535] => 4
        )

    [a3] => Array
        (
            [1534] => 5
            [1535] => 1
        )

    [groupID] => Array
        (
            [1534] => 2
            [1535] => 2
        )

    [total] => Array
        (
            [1534] => 109
            [1535] => 125
        )
) 
```

? 目的是遍历输出中表的每一行的新数组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T19:00:24.953

You dont need to change layout just to traverse it. It can be done without changing it.

```
$keys = array_keys(current($array));
$len = count($array);

foreach($keys as $key){
// Access the key first 
    for($i=0;$i<$len; $i++){
    // access the row later
        echo $array[$i][$key];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:04:51.917

> 除了foreach还有其他选择吗

## 并不真地

你想做的任何看起来像迭代的事情都意味着使用 for/foreach 循环。

即，如果您确实需要（注意shiplu.mokadd.im 的回答）重新格式化数组，您将需要一些如下代码：

```
$result = array();
foreach($input as $i => $row) {
    foreach($row as $key => $value) {
        $result[$key][$i] = $value;
    }
} 
```

# java - Android admob 横幅

> ID：14417600
> 
> 赞同：0
> 
> 时间：2013-01-19T18:47:02.933
> 
> 标签：java, android, admob

如何设置 admob android 广告横幅的宽度、高度、左侧像素和顶部像素？我绑定使用此代码：

```
 RelativeLayout layout = (RelativeLayout) findViewById(R.id.optionslayout);
    adView = new AdView(this, AdSize.BANNER, "...ID...");

    layout.addView(adView);

    adView.setTop(layout.getHeight()/2 - adView.getHeight()/2);
    adView.setLeft((int) (100*density));

    adView.loadAd(new AdRequest()); 
```

但是，当我尝试运行此 Activity 时，它会意外停止。这个问题有什么解决办法吗？我也试过 setX() 和 setY()！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:58:20.090

在 Layout xml 中定义 adView，并仅在此处设置这些参数。

在你的活动中这样做 `adView = (AdView) findViewByID(R.id.adX);`

代替

```
adView = new AdView(this, AdSize.BANNER, "...ID..."); 
```

# javascript - 对多个变量使用 HighCharts setData？

> ID：14417601
> 
> 赞同：1
> 
> 时间：2013-01-19T18:47:12.357
> 
> 标签：javascript, highcharts

高图表 API [http://api.highcharts.com/highcharts#Series.setData](http://api.highcharts.com/highcharts#Series.setData) ()

javascript

……

```
 $('#button').click(function() {
            chart.series[0].setData(   //How can I use this method to add the data?                  
                    ['Firefox',   55.0],
                    ['IE',       16.8],
                    ['Safari',    7.5],
                    ['Opera',     7.2],
                    ['Others',   0.7]
 ); 
```

请参阅 jfiddle [http://jsfiddle.net/bK7fh/上的完整代码和示例](http://jsfiddle.net/bK7fh/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T20:38:30.993

您忘记了 set data 需要一个数据数组，而不是很多数组。

这是一个例子：

```
$('#button').click(function () {
        chart.series[0].setData([
            ['Firefox', 55.0],
            ['IE', 16.8],
            ['Safari', 7.5],
            ['Opera', 7.2],
            ['Others', 0.7]
        ]);
 }); 
```

这是你的小提琴，正在工作：http: [//jsfiddle.net/bK7fh/2/](http://jsfiddle.net/bK7fh/2/)

# ios - iOS应用内购买不起作用

> ID：14417602
> 
> 赞同：1
> 
> 时间：2013-01-19T18:47:14.047
> 
> 标签：ios, in-app-purchase

基本上我正在尝试使应用内购买工作，但没有运气。这是我请求购买产品的代码

```
- (void)requestProductData
{
    NSSet *productIdentifiers=[NSSetsetWithObject:productid];
     request5= [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject: productIdentifiers]];
    request5.delegate = self;
    [request5 start];
}

- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    myProducts = response.products;
    for (NSString *invalidProductId in response.invalidProductIdentifiers)
    {
        NSLog(@"Invalid product id: %@" , invalidProductId);
    }
    SKProduct *selectedProduct = [myProducts objectAtIndex:0];
    SKPayment *payment = [SKPayment paymentWithProduct:selectedProduct];
    [[SKPaymentQueue defaultQueue] addPayment:payment];
} 
```

奇怪的是 response.products 和 response.invalidProductId 都有 0 个对象。我已经尝试过检查 Provisioning Profile、appID、bundle ID 等。此外，自从我在 iTunes Connect 中添加应用内购买后，已经过去了将近 24 小时。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:31:46.180

检查发出请求的代码。你有：

```
NSSet *productIdentifiers = [NSSet setWithObject:productid];
request5 = [[SKProductsRequest alloc] initWithProductIdentifiers: [NSSet setWithObject: productIdentifiers]]; 
```

它应该是：

```
NSSet *productIdentifiers = [NSSet setWithObject:productid];
request5 = [[SKProductsRequest alloc] initWithProductIdentifiers: productIdentifiers]; 
```

您正在创建一个包含一个对象的集合 - 另一个具有产品 ID 的集合。

# ruby-on-rails - 限制模板将在 Rails 中呈现的 MIME 类型

> ID：14417605
> 
> 赞同：0
> 
> 时间：2013-01-19T18:47:22.357
> 
> 标签：ruby-on-rails, actionview

鉴于：

*   一个动作`FooController`_`bar`
*   `custom`扩展的 ActionView 模板处理程序
*   一个模板在`app/views/foo/bar.custom`

有没有办法让 Rails 只为 HTML 请求呈现该模板而不将模板重命名为`bar.html.custom`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T01:14:01.777

我想出了如何使用自定义来做到这一点`ActionView::Responder`。请参阅[https://github.com/netzpirat/haml_coffee_assets/issues/80](https://github.com/netzpirat/haml_coffee_assets/issues/80)了解为什么需要这样做以及我如何解决它的详细信息。

# php - 自定义 jQuery 验证

> ID：14417607
> 
> 赞同：-1
> 
> 时间：2013-01-19T18:47:32.870
> 
> 标签：php, jquery, jquery-validate

我正在尝试 jQuery 验证。我的代码是：

```
jQuery.validator.addMethod("isOnlyEmail", function(value, element,param) { 
  var emailVal;
    $.getJSON('get/getAllData.php?operation=email&email='+value, null, function(data) {
       alert(data);
       if(data==0)
          emailVal true;
       else
          emailVal false;
    });
    return emailVal;
  }, "My message"); 
```

我想显示我的消息，如果只有返回值是真的。但是这段代码是错误的。我的消息不断显示。

如果我按如下方式更改我的代码：

```
jQuery.validator.addMethod("isOnlyEmail", function(value, element,param) { 

        return false;

      }, "My message"); 
```

显示我的消息。

如果我按如下方式更改我的代码：

```
jQuery.validator.addMethod("isOnlyEmail", function(value, element,param) { 

            return true;

          }, "My message"); 
```

我的消息没有显示。

任何想法？

**HTML 代码：**

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/jquery.js"><\/script>')</script>
        <script language="javascript" type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>

        <!-- Bootstrap jQuery plugins compiled and minified -->
        <script type="text/javascript" src="./js/jquery.validate.js"></script>
        <script>
            $(document).ready(function(){

                jQuery.validator.addMethod("isOnlyEmail", function(value, element,param) { 
                    var emailVal;

                    $.getJSON('get/getAllData.php?operation=email&email='+value, null, function(data) {
                        alert(data);
                        if(data==0)
                            emailVal true;
                        else
                            emailVal false;
                    });
                    return emailVal;
                }, "My Message");

                $("#signupform").validate({
                    rules:{
                        email:"isOnlyEmail"
                    },

                    highlight: function(label) {
                        $(label).closest('.control-group').removeClass('success');
                        $(label).closest('.control-group').addClass('error');
                    },
                success: function(label) {
                    label
                    .text('OK!').addClass('valid')
                    .closest('.control-group').removeClass('error')
                    .closest('.control-group').addClass('success');
                }
            });
        });
        </script>

    </head>
    <body>
        <input id="email" type="email" name="email" placeholder="email@site.com" />
    </body>
</html> 
```

**PHP代码**：

```
<?php

    require_once("../db/dbconnect.php");

    $operation = $_GET['operation'];

    if($operation == "email"){

        $mail=$_GET['email'];
        $query = "SELECT * FROM ACCOUNT WHERE email='".$mail."'";
        $result = execute_query($query);
        echo mysql_num_rows($result);
    }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:19:04.917

我的问题解决了。

我将代码更改如下：

```
jQuery.validator.addMethod("isOnlyEmail", function(value, element) { 
   var emailVal=true;
   $.ajax({
       url: 'get/getAllData.php?operation=email&email='+value,
       type:'GET',
       dataType: 'json',
       async: false,
       success: function (data) {
            if(data==0)
               emailVal=true;
            else
               emailVal=false;
            },

        });   
   return emailVal;
}, "My Message"); 
```

通常，ajax 调用是在异步模式下运行的。还有就是由于异步模式，它不起作用。如果在我的代码中添加“async: false”，问题就解决了。

# javascript - 如何隐藏和显示表格行中的元素以允许内联编辑

> ID：14417610
> 
> 赞同：0
> 
> 时间：2013-01-19T18:47:50.510
> 
> 标签：javascript, jquery, html, show-hide

我正在尝试实现通过 php 生成的表数据的内联编辑。

这是生成一行的php代码

```
<tr class="zipCodeRow">
<td>
    <a class="hideOnEdit zipCodeFormSubmit" name="' . $rowZipCodes['id'] . '" href="#">Edit</a>
    <input type="submit" class="hideOnLoad submitEditZipCodeRow zipCodeFormSubmit" id="submitEditZipCodeRow-' . $rowZipCodes['id'] . '" value="Save Edits" /><br />
    <input type="submit" class="hideOnLoad cancelEditZipCodeRow zipCodeFormSubmit" value="Cancel Edit" />
</td>
<td>
    <input type="checkbox" class="chkDeleteZipCodeRow zipCodeFormSubmit" name="deleteZipCodeRow[]" value"' . $rowZipCodes['id'] . '" />
</td>
<td>
    <label class="hideOnEdit">' . $rowZipCodes['state'] . '</label>
    <input type="text" class="hideOnLoad" size="20" maxlength="50" value="' . $rowZipCodes['state'] . '"
</td>
<td>
    <label class="hideOnEdit">' . $rowZipCodes['county'] . '</label>
    <input type="text" class="hideOnLoad" size="15" maxlength="50" value="' . $rowZipCodes['county'] . '"
</td>
<td>
    <label class="hideOnEdit">' . $rowZipCodes['city'] . '</label>
    <input type="text" class="hideOnLoad" size="20" maxlength="50" value="' . $rowZipCodes['city'] . '"
</td>
<td>
    <label class="hideOnEdit">' . $rowZipCodes['zipCodes'] . '</label>
    <textarea class="hideOnLoad">' . $rowZipCodes['zipCodes'] . '</textarea>
</td> 
```

您可以通过类看到我希望某些元素在页面加载时隐藏，并且这些元素将显示在编辑中。这行 jQuery 正确地隐藏了“hideOnLoad”类元素：

```
$('.hideOnLoad').hide(); 
```

然后，我有 javascript 来检测何时单击编辑链接并调用此函数：

```
function EditTableRow(linkClicked) {

var id = linkClicked.attr('name');

$('a.hideOnEdit').fadeOut(500);
$('input.hideOnEdit').fadeOut(500);
$('textarea.hideOnEdit').fadeOut(500);

$('input.hideOnLoad').fadeIn(500);
$('textarea.hideOnLoad').fadeIn(500);
} 
```

我一写函数就知道它看起来不正确，但我不确定如何实现我需要做的事情。

我将不胜感激任何人就如何按照描述进行这项工作的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:01:08.860

首先，您不想`$('.hideOnLoad').hide();`在页面加载时调用。您冒着用户在短时间内看到这些字段的风险。而是添加以下 CSS。这更有可能在用户看到任何东西之前生效（但除非它是内联的，否则不能保证）。

```
.hideOnLoad { display: none; } 
```

至于您的`EditTableRow`方法，您是在所有内容上运行它，而不是在给定行的范围内。尝试这样的事情：

```
function EditTableRow(linkClicked) {
    var row = linkClicked.closest('tr');

    tr.find('.hideOnEdit').fadeOut(500);
    tr.find('.hideOnLoad').fadeIn(500);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:04:09.843

```
HTML
<td>
    <label>value</label>
    <input id="val1" type="text" value="value">
</td>

JS
$('td').on('click', function(){
     $('input',$(this)).show();
     $('label',$(this)).hide();
});

$('input').on('blur', function(){
    var val = $(this).val();
    $(this).previous('label').html(val).show();
    $(this).hide();
}) 
```

# r - R用名称替换id值

> ID：14417612
> 
> 赞同：3
> 
> 时间：2013-01-19T18:47:51.593
> 
> 标签：r

我有一个包含 id 和结果的数据框：

```
df <- data.frame(id=c(1,4,3,3,2,1),result=c(90,75,45,56,78,66))
df 
```

我还有一个键，其中包含每个 id 的名称：

```
key <- data.frame(id=c(1:4),name=c("Jon","Fred","Jane","Jim"))
key 
```

如何用键中的名称值替换 df 中的 id 值？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T18:54:29.593

您可以简单地使用`merge`：

```
merge(df, key)[-1] 
```

（`-1`删除合并数据框中的 ID 列。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T19:04:07.893

```
> df[["id"]] <- key[ match(df[['id']], key[['id']] ) , 'name']
> df
    id result
1  Jon     90
2  Jim     75
3 Jane     45
4 Jane     56
5 Fred     78
6  Jon     66 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T19:15:50.380

```
 df$id <- ave(df,df$id,
        FUN = function(x)  as.character(key$name[key$id==unique(x$id)]))[1]

df
    id result
1  Jon     90
2  Jim     75
3 Jane     45
4 Jane     56
5 Fred     78
6  Jon     66 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-19T18:53:25.070

你可以

```
merge(df,key,by="id" ,all = TRUE) 
```

然后根据需要删除或更改列的名称。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-07T18:23:25.337

您也可以使用*连接*功能：

```
df1 <- df %>%
  full_join(key, by = 'id') %>%
  select(-id) 
```

# android - OpenGL ES GL_DEPTH_TEST 性能问题

> ID：14417615
> 
> 赞同：1
> 
> 时间：2013-01-19T18:48:03.527
> 
> 标签：android, opengl-es, opengl-es-2.0, galaxy-nexus

我正在用 C++ 编写一个在多个（移动）平台上运行的 OpenGL ES 2.0 游戏。在 IOS、Android 上，.. 基本上一切都运行良好，除了一台设备：

在 HTC Desire 上，特定场景中一帧的计算大约需要 8 毫秒。另一款更新得多的设备三星 Galaxy Nexus 需要 18-20 毫秒。

我深入研究了这个问题，发现它与启用/禁用 GL_DEPTH_TEST 有关。

*   如果我注释掉所有 glEnable(GL_DEPTH_TEST)/glDisable(GL_DEPTH_TEST) 调用，Nexus 上一帧所需的时间下降到 1-2 毫秒。
*   所以我优化了 glEnable()/glDisable() 调用，使其仅在绝对需要时发生。我的场景中有 3d 和 2d 部分，因此需要在不使用 depth_test 的情况下渲染 2d，在使用深度测试的情况下渲染 3d。
*   目前我启用深度测试，绘制 3d，禁用深度测试，绘制 2d
*   但仍然计算需要 18-20 毫秒的连接
*   我还检查了深度缓冲区是否被清除超过需要。但它只是在帧开始时被清除。

深度测试的切换是否可能需要这么长时间？

有没有人有其他想法可以检查什么？

**更新**

我发现我渲染的 3d 对象在某种程度上是导致计算缓慢的原因。

*   如果我删除 3d 对象，则性能很好
*   但是在另一个场景中使用相同的 3d 对象而不会造成这样的麻烦
*   最奇怪的是：Nexus 运行 Android 4.2，它在开发人员选项中有一个选项可以将 cpu 负载可视化为覆盖。如果我启用这个设置并开始游戏，计算时间是 5-6ms 而不是 18-20ms。这怎么可能相关？

# javascript - NodeJS - TCP - 发送 HTTP 请求

> ID：14417617
> 
> 赞同：4
> 
> 时间：2013-01-19T18:48:08.800
> 
> 标签：javascript, node.js, http, networking, tcp

我正在尝试通过 TCP 套接字发送 HTTP 请求。

但我根本没有从 www.google.com 得到任何回应。不知道我做错了什么。

* * *

这是代码：

```
var client, net, raw_request;

net = require('net');

raw_request = "GET http://www.google.com/ HTTP/1.1\nUser-Agent: Mozilla 5.0\nhost: www.google.com\nCookie: \ncontent-length: 0\nConnection: keep-alive";

client = new net.Socket();

client.connect(80, "www.google.com", function() {
  console.log("Sending request");
  return client.write(raw_request);
});

client.on("data", function(data) {
  console.log("Data");
  return console.log(data);
}); 
```

* * *

希望可以有人帮帮我。

* * *

只是为了澄清......请求缺少两个结束换行符，所有换行符都必须采用/r/n的格式。

谢谢大家！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:56:43.027

如果您安装了 google chrome，您可以看到发送给 google 的确切获取请求。这是我的样子：

```
GET https://www.google.com/ HTTP/1.1
:host: www.google.com
accept-charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
accept-encoding: gzip,deflate,sdch
accept-language: en-US,en;q=0.8
user-agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17
:path: /
accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
:version: HTTP/1.1
cache-control: max-age=0
cookie: <lots of chars here>
:scheme: https
x-chrome-variations: CMq1yQEIjLbJAQiYtskBCKW2yQEIp7bJAQiptskBCLa2yQEI14PKAQ==
:method: GET 
```

在第一个视图中，我可以看到 chrome 正在向**https://www.google.com**发送请求，而您正在向**http://www.google.com发送请求**

另一件事是您正在使用“\n”并且您需要使用“\r\n”，并且请求必须以“\r\n\r\n”结尾。

如果您仍然无法得到任何响应，请尝试使用`http://77.214.52.152/`而不是`http://google.com`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:04:40.463

```
 GET / 
```

你写它的方式，你试图得到类似[http://www.google.com/http://www.google.com/](http://www.google.com/http://www.google.com/)

最后你需要*两个*换行符，所以网络服务器知道你已经完成了。这就是为什么你什么也得不到——它还在等着你。

总是先用 telnet 试试这些东西：

```
$ telnet www.google.com 80
GET http://www.google.com/ HTTP

HTTP/1.0 400 Bad Request
Content-Type: text/html; charset=UTF-8
Content-Length: 925
Date: Sat, 19 Jan 2013 19:02:06 GMT
Server: GFE/2.0

<!DOCTYPE html>
<html lang=en>
  <meta charset=utf-8>
  <meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width">
  <title>Error 400 (Bad Request)!!1</title>
  <style>
    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}
  </style>
  <a href=//www.google.com/><img src=//www.google.com/images/errors/logo_sm.gif alt=Google></a>
  <p><b>400.</b> <ins>That’s an error.</ins>
  <p>Your client has issued a malformed or illegal request.  <ins>That’s all we know.</ins>
Connection closed by foreign host. 
```

# c# - 确定我在数组中的位置

> ID：14417626
> 
> 赞同：1
> 
> 时间：2013-01-19T18:49:21.553
> 
> 标签：c#, .net, arrays, stringbuilder

我在 C# 中有一个字符串数组，如下所示：

```
string[] sites = new string[] {
    "http://foobar.com",
    "http://asdaff.com",
    "http://etc.com"
}; 
```

我在 a 中使用这个数组，`foreach`我希望能够添加 1、2 或 3 的“类型”值，具体取决于我当前正在迭代的站点。我将数据与`StringBuilder`来自这些站点的数据连接起来。现在，我可以将站点存储为`varchar`，但它会非常简洁，因为该数组永远不会更改为将数字与字符串关联并以这种方式构建它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T18:52:24.013

使用`for`循环代替`foreach`：

```
for(int i = 0; i < sites.Length; i++)
{
    // use sites[i]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T18:55:24.973

LINQ 的[Select](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.select.aspx)可用于将索引投影到集合上。

```
sites.Select((x, n) => new { Site = x, Index = n }) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T18:53:27.880

您可以为此使用字典 - `Dictionary<int, string>`（或`Dictionary<string, int>`）。

```
var sitesWithId = new Dictionary<string, int>
{
  new { "http://foobar.com", 1},
  new { "http://asdaff.com", 2},
  new { "http://etc.com", 3}
} 
```

另一种选择是只使用 a`List<string>`并[`IndexOf`](http://msdn.microsoft.com/en-us/library/8bd0tetb.aspx)找出索引。

```
var sites = new List<string> {
    "http://foobar.com",
    "http://asdaff.com",
    "http://etc.com"
};

var foobarIndex = sites.IndexOf("http://foobar.com"); 
```

第三种选择，使用的静态[`IndexOf`](http://msdn.microsoft.com/en-us/library/system.array.indexof.aspx)方法，`Array`根本不改变你的数组：

```
var foobarIndex = Array.IndexOf(sites, "http://foobar.com"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T18:55:04.973

尝试[`for`](http://msdn.microsoft.com/en-us/library/ch45axte.aspx)循环；

```
for(int i = 0; i < sites.Length; i++)
{
    Console.WriteLine(sites[i]);
} 
```

`sites[]`像这样使用数组的元素；

```
sites[1]
sites[2]
sites[3] 
```

或者您可以`Dictionary<TKey, TValue>`按照 Oded 的[建议](https://stackoverflow.com/a/14417664/447156)使用。

# c - python中参数/变量的存储限制

> ID：14417627
> 
> 赞同：-1
> 
> 时间：2013-01-19T18:49:28.207
> 
> 标签：c, assembly, python-3.x

对于以下程序

```
def sum_naturals(n):
    total, k = 0, 1
    while k <= n:
        total, k = total + k, k + 1
    return total

sum_naturals(5000000000000000000000) 
```

从过去的 20 分钟开始，我正在等待处理器 intel t1400 1.83 ghz 的输出。

我的问题是，

python如何处理这么大的数据，因为我的处理器只有32位寄存器？C程序会很早就给出错误？

假

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:55:25.430

Python 的 int 类型支持任意大的数字。在内部，有两种表示形式：用于小数字的单个机器 int，以及用于较大数字的 int 数组（以及单独存储的符号）。该数组表示大基数中的数字的位数。

# c# - 添加第二个表关系时的可视化效果不佳

> ID：14417635
> 
> 赞同：0
> 
> 时间：2013-01-19T18:50:11.507
> 
> 标签：c#, datagridview

当我将第二个`Columnheader`关系添加到`DataSet`.

问题是该列在我第一次打开窗口时消失了，但是（不关闭应用程序）如果我单击另一个选项卡并返回到我遇到问题的选项卡，它将出现。

我知道问题来自第二个关系，因为当我评论这一行时，它工作得很好： `DataSetGenerico.Relations.Add(relation2);`

第一张图显示了第一次打开窗口时发生的情况，第二张图显示了单击另一个选项卡并返回有问题的选项卡时发生的情况（不关闭应用程序）。![第一次](../Images/189f86a5acb97aa77ab61e5a96d18b28.png)

![第二次](../Images/8ea8f2cd502d53ac8bb16a488d61db9b.png)

您可以在第一张图片中看到“Tipo de Local”，但宽度非常小（介于“Dni Propietario”和“DNI propietario”之间），第二次显示完美。

与`AutoSizeColumnsMode` ，`DataGridViewAutoSizeColumnsMode.AllCells`我已经尝试了所有其他`DataGridViewAutoSizeColumnsMode`可能性，但没有运气。也`DataGridViewAutoSizeRowsMode`。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:49:06.460

经过反复试验，我找到了解决方案。

要解决这个问题，应该首先创建所有想要的**关系**，然后添加您需要或想要的所有**DataGridViewComboBoxColumn 。**如果在创建 DataGridViewComboBoxColumn 之后创建**关系**，**即使**关系和 DataGridViewComboBoxColumn 没有任何共同点，您也会**遇到**此**问题**。

# java - 一次到 ArrayList，还是每次都到 ArrayList？

> ID：14417637
> 
> 赞同：1
> 
> 时间：2013-01-19T18:50:17.713
> 
> 标签：java, arraylist, hierarchy

我有一个具有这样结构的程序。

```
Document which contains (up to 20)
Chapters which contain (up to 100) 
Pages which contain (up to 20)
Elements 
```

这种结构在我的程序中由 JPanel 表示。这意味着这个结构必须在视觉上表示，我宁愿不制作一个完整的 ArrayList 复杂（除非绝对必要），因为每个 JPanel 都有一个 ZOrder 组件和一个 getParent() 方法。

这种结构是一维的，这意味着父级具有其子级的一维数组（当我说数组时，它纯粹是描述性的，我不是指 ArrayList 或类似的东西）。每个单独的元素都有一个索引，表示它在（on？）它的父元素中的位置。一页的元素个数和一章的页数不一致。

在它的父母中很容易获得孩子的索引，但是它的祖父母呢？

由于元素可以（并且通常是）编号，每章有一个编号列表，我必须知道章节中元素的索引，因此我可以在将新元素添加到列表时调整数字（它不必最后添加）。

这可以通过两种方式解决（据我所知，即）：

1.  每章都有一个 ArrayList 来保存所有元素。这将要求我每次向任何页面添加新元素时，也将其添加到章节数组中。为了实现这一点，我必须浏览所有以前的页面，将它们上的所有元素相加，并将当前页面上新元素的索引添加到该数字，结果是本章中新元素的索引，因此，在数组中。每次我添加一个新元素时都这样做。

2.  每次我需要获取章节中元素的顺序时重新创建arrayList。这再次意味着要浏览每一页并一个接一个地添加每个元素，直到我到达本章的末尾。每次添加新元素时我都需要它。

所以问题是，这两种方法中哪一种更好（更高效的内存或处理器时间）？哪个更符合 Java 和编程的精神？有没有我不知道的第三种选择？

章节示例：

```
Page one {
1\. something
2\. more something
3\. nothing
.
.
.
16\. still nothing
}

Page two {
17\. maybe something
18\. nope, still nothing
.
.
.
21\. giberish
}
etc. 
```

问题是：哪种方式更好？如果您有更好的想法，可以告诉我，但我想知道以上两种方式中哪种方式更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:56:19.423

You need to make a tree. For some reason, programmers want to flatten everything out into tabular structures. You are talking about a tree, you need to either use one or make one.

Sadly, there is nothing in the Java Collections for implementing Trees. You can make them fairly easily.

If you have things that are different contained in the tree, but that need to be treated similarly (as nodes), then do a simple implementation of the [Composite Pattern](http://en.wikipedia.org/wiki/Composite_pattern). A good example is a filesystem tree: each node is either a Folder or a File. If you both have them implement an interface called FilesystemItem, then you can put them into their tree structure.

Since you are doing a Document, I would recommend Composite.

# javascript - JavaScript 对象克隆

> ID：14417645
> 
> 赞同：2
> 
> 时间：2013-01-19T18:51:51.700
> 
> 标签：javascript, object, cloning

谁能解释为什么`obj`退货`{a:2}`而不是`{a:1}`在这种情况下？

```
var obj = {a:1};
var data = {b:obj};
data.b.a = 2;

console.log(obj); // {a:2} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T18:54:46.070

javascript 中的对象是通过引用的，因此当您更改一个引用时，您就更改了它们。这个的意思是你刚刚创建了一个浅拷贝，你需要做一个深克隆。

可以通过这种方式使用 jQuery 进行深度复制：

```
// Deep copy
var newObject = jQuery.extend(true, {}, obj); 
```

阅读我使用 jQuery 的原因： [在 JavaScript 中深度克隆对象的最有效方法是什么？](https://stackoverflow.com/q/122102/601179)
[（这是 Stackoverflow 上的 John Resig ......）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T16:32:11.263

如果使用像 FF 这样的 NS 派生浏览器：

```
var data = { b: eval ( obj . toSource ( ) ) } ; 
```

或者

```
var data = { b: eval ( uneval ( obj ) ) } ; 
```

如果不：

```
Object . function . deepClone = function(){ 
/*
     highly non-trivial to accommodate objects like:
              animal=123; animal.beastly=432;                                        ie. object "overloading"
              monster = new ( function ( ) { this . this = this } ) ( )            ie. self-referential / recursive
      Note: JSON cannot do these  but  toSource () can handle recursive structures
      alert ( new ( function ( ) { this . this = this } ) ( )  . toSource ( )  );
                                                                                                                   ie.    #1={this:#1#}
      alert ( new ( function ( ) { this [ this ] = this } ) ( )  . toSource ( )  );
                                                                                                                   ie.     #1={'[object Object]':#1#}
      alert ( new ( function ( ) { this [ this . toSource ( )  ] = this } ) ( )  . toSource ( )  );
                                                                                                                   ie.     #1={'({})':#1#}
      alert (    (     #1 = { '({})' : #1# }      )   . toSource ( )  );
                                                                                                                   ie.     #1={'({})':#1#}
*/
 }

var data = { b: obj . deepClone ( )  } ; 
```

在 SO 中发布了很多很多**尝试**进行 deepClone 以及
[结构化克隆算法 - Web 开发人员指南 | MDN](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/The_structured_clone_algorithm#Another_way.3A_deep_copy.E2.80.8E)

提示：皇帝没有衣服

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T18:56:24.247

In this case you're not cloning objects but rather setting additional references to the same variable. data.obj.a and obj.a point to the exact same memory location. Line 3 sets this memory value to 2.

To do a deep clone, try this:

```
var data = JSON.parse(JSON.stringify(obj)); 
```

# android - Nullpointer 试图添加 textview alertdialog

> ID：14417646
> 
> 赞同：0
> 
> 时间：2013-01-19T18:51:57.960
> 
> 标签：android, textview, settext

我正在尝试使用动态文本制作警报对话框。问题是我要编辑的文本视图位于膨胀的布局中。在我的代码的最上面是

```
 TextView tv; 
```

所以我可以从课堂上的所有方法中获得它。下面的代码片段：

```
public class EditNameDialog extends DialogFragment {

    public EditNameDialog() 
        {
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        LayoutInflater factory = LayoutInflater.from(getActivity());
        View textEntryView = factory.inflate(R.layout.fragment_dialog, null);

        this.setStyle(DialogFragment.STYLE_NORMAL, android.R.style.Theme_Holo_Light_Dialog);

        return new AlertDialog.Builder(getActivity())                
        .setTitle("Skapa profil")
        .setView(textEntryView)
        .setNegativeButton(R.string.cancel,
                new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {

            }
        }
                )
                .setPositiveButton(R.string.ok,
                        new      DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) 
                    {

                    }
                }
                        ).create();
    } 
```

布局文件“fragment_dialog.xml”如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
    android:id="@+id/error_dialog"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="top"
    android:padding="10dp"
    android:text="@string/error_connecting"
    android:textSize="20sp" />

</LinearLayout> 
```

我想编辑位于“textEntryView”中的 TextView。为此，我尝试过

```
tv = (TextView) textEntryView.findViewById(R.id.error_dialog); 
```

然后当我调用我的方法时：

```
public void attemptLogin(View v) 
{
System.err.println(tv.getText());
} 
```

它给了我一个空指针。我不明白为什么在 textEntryView 视图中找不到 id error_dialog。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T11:32:29.143

您的问题比看起来要复杂一些。当您这样做时，您将丢失对小部件的引用，因为 View-Object 没有保持正确的视图。我有同样的问题，我花了一段时间才弄清楚。

我通过保持 View-reference 更新并将 -value 的检索外包`textView`给一个在生命周期后期称为方法的方法来解决它`onActivityCreated()`

我发布了我的示例，它确实有一个 editText 和一个按钮。

**我的例子：**

```
public class EnterNumberFragment extends DialogFragment implements OnClickListener{

private EditText editText = null;
private Button acceptButton = null;
private View mContentView = null;

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflator= getActivity().getLayoutInflater();
    mContentView = inflator.inflate(R.layout.dialog_number, null);
    builder.setView(mContentView);

    return builder.create();
}

@Override
public void onActivityCreated(Bundle arg0) {
    super.onActivityCreated(arg0);
    acceptButton = (Button) mContentView.findViewById(R.id.accept_change);
    editText = (EditText) mContentView.findViewById(R.id.et_number);

    acceptButton.setOnClickListener(this);      
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
        case R.id.accept_change:
            String num = editText.getText().toString();

            SharedPreferences sPrefs = getActivity().getSharedPreferences("PanicPrefs",0);
            SharedPreferences.Editor prefEditor = sPrefs.edit();
            prefEditor.putString("NumberToCall", num).commit();
            dismiss();
            break;

         default:
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T12:30:15.963

这一行存在问题： -

```
 LayoutInflater factory = LayoutInflater.from(getActivity()); 
```

您没有活动参考。您可以做的是传递活动上下文，然后获取活动：-

LayoutInflater 工厂 = LayoutInflater.from(mContext.getActivity());

或者您可以使用以下代码：-

```
LayoutInflater factory = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:03:07.113

我看不到您的变量 tv 的声明，例如：

```
TextView tv = (TextView) findViewById(R.id.error_dialog); 
```

如果你没有声明它，你的框架（eclipse？）应该给你一个提示。
那么，您是否在课堂的其他部分声明了它？

# delphi - 基于规则的物业管理

> ID：14417647
> 
> 赞同：3
> 
> 时间：2013-01-19T18:52:08.630
> 
> 标签：delphi, properties

如果查看 html 和 dfm 的层次结构，他会发现相似之处（嵌套结构、属性（属性）等）。下一步是询问 Delphi 世界中是否有类似 css（Cascade 样式表）的东西。所以例如像这样的规则

```
TPanel TPanel BorderWidth=2 
```

可以定义对于放置在另一个面板中的任何 TPanel，属性 BorderWidth 应始终为 2。

或者

```
TPanel.MyPanel TLabel Font.Style=[fsBold] 
```

对于名为 MyPanel 的 TPanel，里面的任何标签都应该加粗（类似于 css 的特定名称（MyPanel）可以等同于 html 的 id 属性）

那么是否有为此开发的库/单元？

我想应该有一些挑战

*   在设计时实现这一点可能会与 Delphi 的内部表单设计器产生一些兼容性问题（可能这个库可能更面向运行时）

*   在 html 世界中，它主要与视觉有关，因此错误可能只会导致视觉特性，但在 Delphi 中，有时旨在由程序员明确设置并使其成为大规模管理的对象的属性可能会带来安全性和稳定性威胁。

尽管如此，我认为我们过于拘泥于手动更改属性。即使是复制粘贴，任何属性更改的根源都是专门的鼠标单击。

# jsf-2 - jsf转换器getAsString方法调用了两次

> ID：14417650
> 
> 赞同：0
> 
> 时间：2013-01-19T18:52:13.293
> 
> 标签：jsf-2, commandbutton

我这里有情况。我使用托管 bean 作为转换器从数据库中预填充 SelectManyCheckBox 并且效果很好。这是我的转换器类

```
@ManagedBean
@RequestScoped
public class RoleConverter implements Converter{
    @EJB
    private UserRoleSingleton userRoleSingleton;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        if(value == null){
            return null;
        }
        return userRoleSingleton.getUserRoleById(Integer.parseInt(value));
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        if(!(value instanceof Userrole) || ((Userrole) value).getRoleId() == null){
            return null;
        }
        Userrole role = (Userrole) value;
        return String.valueOf(role.getRoleId());
    }

    public RoleConverter() {
    }
} 
```

在它预选复选框后，我选择或取消选择复选框或什么都不做，然后单击表单中的提交按钮。然后按钮的第一次单击只是再次执行转换器的 getAsString 方法并重新加载页面。在第二次单击时，它按预期执行 getAsObject 方法，然后执行操作。

这是我的 SelectManyCheckBox：

```
<p:selectManyCheckbox id="orgpermission"
    value="#{adminView.selectedrolesorg}" layout="pageDirection">
    <f:selectItems value="#{adminView.allRolesRelatedToOrgInfo}"
        var="citrole" itemValue="#{citrole}"
        itemLabel="#{citrole.roledescription}" converter="#{roleConverter}" />
</p:selectManyCheckbox> 
```

为什么它再次执行 getAsString 方法以及如何解决它以在第一次单击时触发动作方法？

# javascript - 使用 Jetty/Firefox 发布 CORS Ajax

> ID：14417658
> 
> 赞同：0
> 
> 时间：2013-01-19T18:52:43.730
> 
> 标签：javascript, jquery, cross-domain, cors

我正在尝试使用 CORS 使用 jQuery 进行跨域 POST，但是在发送（并响应）OPTIONS 请求之后，POST 不会发生。我的请求/响应过滤器如下所示。还显示了我的 jQuery 邮政编码。看起来响应具有正确的 CORS 响应标头，所以我不确定为什么这不起作用。

```
var params = {};
params.data = myPostData;
params.headers = {
  'x-pingother' : 'pingpong'
};
$.ajax(params); 
```

请求标头

```
OPTIONS /my/service/url HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:17.0) Gecko/20100101 Firefox/17.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Origin: http://localhost:9876
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type,x-pingother
Pragma: no-cache
Cache-Control: no-cache 
```

响应标头：

```
HTTP/1.1 200 OK
Access-Control-Allow-Origin: http://localhost:9876
Access-Control-Allow-Methods: POST,GET,OPTIONS
Access-Control-Allow-Headers: x-pingother
Content-Length: 703
Content-Type: application/vnd.sun.wadl+xml
Allow: OPTIONS,POST
Last-Modified: Sat, 19 Jan 2013 13:46:51 EST
Server: Jetty(6.1.25) 
```

我正在从本地服务器 (JSTestDriver) 运行自动化测试，该服务器连接到在不同端口上运行的 Web 服务器。Web 服务器在 8080 上运行，发出请求的页面在 9876 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:19:11.247

这是通过添加指定的响应头来解决的

[发送范围请求时jQuery CORS请求不起作用](https://stackoverflow.com/questions/9822709/jquery-cors-request-not-working-when-sending-range-request)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T19:59:29.870

您是否尝试明确告诉 jQuery 启用 cors？

```
$.support.cors = true; 
```

# java - 用循环切换

> ID：14417660
> 
> 赞同：0
> 
> 时间：2013-01-19T18:52:55.990
> 
> 标签：java, eclipse, switch-statement

我正在尝试使用 switch 语句创建一个循环。如果用户未在 1 和 4 之间输入，则会再次出现“您输入的选项不正确”的消息。我正在制作 Lynda 视频。我不确定在哪里放置循环。我目前找不到让它循环的方法。是在 switch 中还是在 getInput 方法中。是否有可能做到这一点？如果有人知道，请提前感谢。我正在使用eclipse，java 7。

```
 public static void main(String[] args) {
    String s1 = getInput("Enter a numeric value: ");
    String s2 = getInput("Enter a numeric value: ");

  double result = 0;
   do  { 
           String op = getInput("Enter 1=Add, 2=Subtract, 3=Multiply, 4=Divide");
           int opInt = Integer.parseInt(op);
           switch (opInt) 
           {
             case 1:
             result = addValues(s1, s2);
             break;
           }
        } while(opInt<1 || opInt >4); 
```

编辑...的错误消息

此行有多个标记 - opInt 无法解析为变量

*   opInt 无法解析为变量

    //在其他数学运算符中，我有一个名为 addValues 的方法

    ```
    private static double addValues(String s1, String s2)
    throws NumberFormatException {
    double d1 = Double.parseDouble(s1);
    double d2 = Double.parseDouble(s2);
    double result = d1 + d2;
    return result;
    }

    private static String getInput(String prompt) {
    BufferedReader stdin = new BufferedReader(
            new InputStreamReader(System.in));

    System.out.print(prompt);
    System.out.flush();

    try {
        return stdin.readLine();
    } catch (Exception e) {
        return "Error: " + e.getMessage();
    }
    } 
    ```

    **编辑** 我对 Tal 和 Quoi 给我的解决方案有疑问。使用 Quoi 我得到 opInt 的错误无法解析为变量，因为使用 Tal 没有任何反应。

所以我做了以下...

```
String s1 = getInput("Enter a numeric value: ");
    String s2 = getInput("Enter a numeric value: ");
    String op = getInput("Enter 1=Add, 2=Subtract, 3=Multiply, 4=Divide");

//convert opInt into integer
    int opInt = Integer.parseInt(op);

    if (opInt <1 || opInt >4) // used a if statement
     {
      getInput("Enter 1=Add, 2=Subtract, 3=Multiply, 4=Divide");
     }

    double result = 0;
    {
         switch (opInt)
         {
           ...........
           ...........
         }
    } 
```

使用 if 语句，该方法会回调 switch 语句，但在选择正确的选项后，会显示“您输入的选项不正确”和“答案是 0.0”的打印行，因此不进行计算。我不确定这是一个简单的解决方案还是什么？

**编辑** 我现在试图在开关外做一个while循环。发生的事情是，当我在 1 或 4 之外选择时，无论我是否输入有效选项，我都会收到“输入 1=加，2=减，3=乘，4=除”的消息。

```
do 
{
  getInput("Enter 1=Add, 2=Subtract, 3=Multiply, 4=Divide");
 } while (opInt <1 || opInt >4);

    double result = 0;
    {
       switch (opInt)
       {
           case 1:
            result = addValues(s1, s2);
            break;
             ...........
             ...........
         }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:56:12.013

放入`switch-case`循环内。

```
do{
   String op = getInput("Enter 1=Add, 2=Subtract, 3=Multiply,  
       4=Divide");
   int opInt = Integer.parseInt(op);

   switch(opInt){
      case 1: ... break;
      case 2: ... break;
      case 3: ... break;
      case 4: ... break;
   }
}while(opInt<1 || opInt >4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T18:58:16.450

将它放在最后一个 getInput 调用周围，即读取用户选项的调用。

乐：

这就是我最初的意思。

```
 String s1 = getInput("Enter a numeric value: ");
 String s2 = getInput("Enter a numeric value: ");

 int opInt = 0;
 do {
   String op = getInput("Enter 1=Add, 2=Subtract, 3=Multiply, 4=Divide");
   try {
     opInt = Integer.parseInt(op); 
   }catch(Exception e) {
     //whatever you need to do
   }
 } while (opInt < 1 || opInt > 4);

 switch(opInt) [...] 
```

这里发生了什么：用户输入 2 个数字，然后它会被要求输入他的选项，直到它介于 1 和 4 之间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:21:10.703

如果您不更改 opInt 变量：

```
while(opInt < 1 || opInt > 4)
{
    switch (opInt)
    {
        case 1:
        break;
        case 2:
        break;
        default:
    }
} 
```

# gwt - 与 Excel 相比，Google 电子表格的日期/时间错误？

> ID：14417665
> 
> 赞同：1
> 
> 时间：2013-01-19T18:53:31.250
> 
> 标签：gwt, google-apps-script

为另一个与日期/时间相关的帖子道歉。我还没有弄清楚这个问题，所以欢迎任何评论。**执行摘要**：Excel 可用于处理较小的经过时间（体育赛事时间等），但表格不能，因为您需要编写一个脚本来显示较小的时间，而脚本会搞砸一些东西，以便表格不再将单元格视为稍后手动更改时间的时间。

我需要的时间通常很短，大约几分钟，秒到小数点后 2 位。我必须对这些时间进行算术运算（通常只与另一个时间进行比较）。

我们目前将所有内容都存储在 Excel 中，效果很好。如果您在某个范围内定义自定义显示格式，然后输入类似`2:43.02`（2 分钟，43.02 秒）的时间，则单元格仍然包含时间，Excel 可以对这些时间进行算术运算。

然后我上传 Excel 电子表格，并在表格中打开它。没有内置的格式扩展，就像在 Excel 中一样，所以我必须使用扩展函数来显示时间`2:43.02`，例如（见下文；函数调用`setNumberFormat`）。在文档的新表格版本中，Excel 时间仍然是时间，并且比较有效，并且一切看起来都正确。

这就是问题所在。只有在您手动在表格单元格中输入新时间之前，一切都有效。例如，如果我输入`2:41.05`，则单元格不再包含时间对象，并且所有算术都被破坏了。所以，我不能用表格来代替 Excel。我必须将所有内容保存在 Excel 中并偶尔上传，将表格版本保持为只读。

表格中有一些魔法可以确定单元格是否包含日期。如果我使用内置的时间格式，那么 Sheets 就会知道这是一个时间，并且如果手动更改时间，它就可以进行算术运算。[如果我使用下面的函数（从这里](http://productforums.google.com/forum/#!category-topic/docs/formatting/Nmptr8VsPbw)）更改时间格式，那么魔法就会丢失，我无法手动更改时间。

```
function EditFormat() {
  var oldname = SpreadsheetApp.getActiveRange().getNumberFormat();
  var name = Browser.inputBox("Current format (blank = no change):\r\n"+ oldname);
  SpreadsheetApp.getActiveRange().setNumberFormat((name=="")?oldname:name);
} 
```

问：`setNumberFormat`坏了？有没有更好的方法来完成这一切？我可以在脚本中做一些其他的事情来保持细胞的魔法状态吗？还是我必须回到 Excel？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T20:49:48.293

这是由于（可悲的是长期存在的）Sheets 错误导致解析器在两个方面失败：

1.  格式 2:43.02 未成功强制转换为时间值，但格式 0:02:43.02（或 0:2:43.02）可以。
2.  即便如此，对于直接输入的值，百分之一秒都会被忽略。

这两点适用于电子表格中的所有值，但只有第 2 点适用于直接输入的值。因此，一种解决方法是通过公式输入：

`=VALUE("0:2:43.02")`

or you could have an input column that is formatted as plain text, and then have a display column that similarly converts to a time value via formula (and this display column would be custom formatted). Or, you could have a helper script that presents an input box for the active cell, where you enter the split time, and then creates a formula like above and populates it in the cell (the set number format could be built in to this script as well).

I wish these workarounds were unnecessary.

# c - 使用 strlen 时出现分段错误

> ID：14417667
> 
> 赞同：3
> 
> 时间：2013-01-19T18:54:07.813
> 
> 标签：c, arrays, segmentation-fault

过去两天我一直在研究这个问题，但似乎无法找出问题所在。

我正在从文件中读取并将其作为字符串保存到 char 数组中，但是当我尝试`strlen()`在字符串上使用时，它会因分段错误而崩溃。

这就是我正在做的事情。

```
char read_string[25];
fscanf(file, "%s", &read_string);
int length = strlen(read_string); 
```

另一个问题是，当我将 的内容复制`read_string`到另一个 char 数组中时，它会在末尾添加随机字符。

这是我正在做的

```
char input[25];
for(i=0; i<25; i++)
{
    if (read_string[i] == '.')
        break;
    else
        input[i] = read_string[i];
} 
```

我需要在句点将字符串读入输入数组之前复制所有内容。

PS我正在使用`fscanf()`，因为该文件结构良好。

如果需要，这是我的代码。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

main()
{
//variables
FILE *rFile; 
int num_states;                 //number of states
int num_alphabet;               //number of alphabets
int num_acstates;               //number of accepting states
int ac_state;                   //the accepting state
char alphabet[num_alphabet];    //alphabet
char read_string[25];   //assuming the input will be maximum of 25 character
char input[25];
int i,j,x;                      //indexes for the loop

//open the file to read
rFile = fopen("dfa11", "r");

if (rFile != NULL)
{
    //do the program here

    //read number of states and number of alphabets
    fscanf(rFile, "%d %d", &num_states, &num_alphabet);

    //read the alphabet
    fscanf(rFile, "%s", &alphabet); 

    //read the state transition table (matrix)
    int value = num_states*num_alphabet;
    char table[num_states][num_alphabet];

    for(i=0; i<num_states; i++)
    {
        for(j=0; j<num_alphabet; j++)
        {
            fscanf(rFile, "%d", &table[i][j]);
        }
    }

    //read number of accepting states and accepting state
    fscanf(rFile, "%d", &num_acstates);
    fscanf(rFile, "%d", &ac_state);

    //read the input string from the file
    fscanf(rFile, "%s", &read_string);

    for(i=0; i<25; i++)
    {
        if (read_string[i] == '.')
            break;
        else
            input[i] = read_string[i];
    }

    //strncpy(input, read_string, j);

    printf("%d\n", strlen(read_string));
    printf("%d\n", strlen(input));
    printf("%s\n", read_string);
    printf("%s\n", input);

    //close the file
    fclose(rFile);
}

else
{
    printf("File could not be found");
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T18:55:31.480

> Im reading from a file and saving it into the char array as a string but when i try using stelen on the string, it crashes with a segmentation fault.

You don't need to take the address of `read_string` in `fscanf`, because `read_string` decays already to a pointer. Anyway, since `&read_string == read_string` in the case of an array (except for types), it shouldn't cause segmentation fault.

Therefore the problem comes from elsewhere. Among other, check that the line in your file is not larger than 25 characters.

> Another problem is when i copy contents of read_string into another char array, it adds radom characters at the end.

Don't forget to add a `'\0'` at the end of your string.

```
input[i] = '\0'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:16:29.037

尝试

```
fscanf(file, "%24s", read_string); 
```

如果您的崩溃不再重现，则意味着您的文件包含超过 24 个字符的行。在这种情况下，您可以使缓冲区更大以避免此问题

***编辑：***

尝试`input[i] = '\0';`在for循环之后添加

```
for(i=0; i<25; i++)
{
    if (read_string[i] == '.')
        break;
    else
        input[i] = read_string[i];
}
input[i] = '\0'; 
```

# android - Popoverview android 按钮 OnClickListener

> ID：14417668
> 
> 赞同：0
> 
> 时间：2013-01-19T18:54:09.140
> 
> 标签：android, android-layout, android-intent

我已经实现了 popoverview 以在其中显示三个按钮，popoverview 是从一些基本活动中显示的，现在我想实现 popoverview 按钮的功能来对显示它的活动进行一些更改，我已经实现了显示 popoverview 使用以下链接

```
 https://github.com/lupidan/PopoverView 
```

请建议我如何为 popoverview 实现 onclicklistener，实现方法如下：

```
 popoverViewWillShow
            popoverViewDidShow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:11:55.677

这是一个简单的自定义视图。调用后，`showPopoverFromRectInViewGroup`只需`findViewById`在`Popover`实例上使用即可找到您的`Buttons`.

# java - 我的 Java Slick 游戏 Jar 文件无法打开

> ID：14417669
> 
> 赞同：1
> 
> 时间：2013-01-19T18:54:09.737
> 
> 标签：java, lwjgl, buildpath

我使用 slick 和 lwjgl 制作了一个简单的 GUI，我正在使用 eclipse 并将我的 jars、natives 和图像导入到我的 Java 构建路径中，我将我的代码导出为 jar 文件并在我的桌面上获取一个 jar 文件，我尝试打开它与 SE Binary 一起加载并加载了一会儿然后什么也没有发生。

这可能与我将它们导入构建路径的方式有关，我将尝试解释一下，我在 Java 项目中创建了两个额外的文件夹，它们是 lib 和 res，res 包含我所有的图像和 lib包含另外两个名为 jars 和 natives 的文件夹，jars 包含两个 jar 文件（slick 和 lwjgl），natives 包含 4 个其他文件夹（windows、linux、mac、solaris natives），我使用添加 jar 将我的 2 个 jar 文件导入到构建路径中选项，然后我使用添加类文件夹选项导入我的 res 文件，然后使用相同的选项导入 lib 文件夹，然后导出它，现在它没有打开。

值得一提的是，在我从 eclipse 导出我的 jar 文件之前，我收到以下弹出消息：该操作重新打包引用的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:24:19.147

似乎 lwjgl 在 jar 存档中时无法使用本机库。

解决方案是将您的 natives 文件夹解压缩到某个安装目录或临时目录中。然后，在您使用任何 lwjgl 函数之前，您需要设置本地人的新路径。例如，在“lib/native”中解压的文件我使用

```
System.setProperty("org.lwjgl.librarypath", (new File("lib/native")).getAbsolutePath());
System.setProperty("java.librarypath", (new File("lib/native")).getAbsolutePath());
System.setProperty("net.java.games.input.librarypath", (new File("lib/native")).getAbsolutePath()); 
```

这似乎是最简单的解决方案。例如，我的世界（使用 lwjgl）将原生解包到“%appdata%.minecraft\bin\natives”（在 Windows 上，〜而不是 linux 上的 %appdata%）。

编辑：一个非常相关的 wiki 页面：[http ://lwjgl.com/wiki/index.php?title=Distributing_Your_LWJGL_Application](http://lwjgl.com/wiki/index.php?title=Distributing_Your_LWJGL_Application)

# c++ - 具有多文件的 C++ 链表

> ID：14417678
> 
> 赞同：0
> 
> 时间：2013-01-19T18:54:53.070
> 
> 标签：c++, file, linked-list

我对使用多文件有点陌生。我有这个非常简单的链表代码，但是当我调试时，它“停止工作”。

这个问题我之前已经发生过好几次了。我想知道我的“链表”代码有问题吗？还是多文件组织有问题？

任何帮助将不胜感激。

=======================================

```
//linkedListMAIN.cpp

#include "linkedlist.cpp"

void main()
{
linkList<int> l;

l.append(5);
l.traverse();
} 
```

=======================================

```
//linkedList.h    

#include<iostream>
using namespace std;

template <class T>
class linkList
{
private:
struct node
{
    T data;
    node *next;
};
node *head;
node *tail;
int noOfEl;
public:
linkList()
{
    noOfEl = 0;
    head=tail=NULL;
}

void traverse();
int length();
void insertAt(T, int);
T delAt(int);
void append(T);
void clear();
}; 
```

=======================================

```
//linkedList.cpp    
#include "linkedlist.h"

template <class T>
void linkList<T>:: traverse()
{
node<T> *current=head;

if(head == NULL)
{
    cout<<"List empty."<<endl;
}

while(current != NULL)
{
    cout<<current->data;
    current = current->next;
}
}

template <class T>
void linkList<T>::append(T data)
{
node< *newNode= new node;

newNode->next = NULL;
tail->next = newNode;
tail = newNode;

noOfEl++;  
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:57:09.847

您不应该`.cpp`在 inkedListMAIN.cpp 中包含标题 ( `.h`)。此外，除非您正在使用，否则您`c++11`必须将模板类的类定义放在标题中。

# java - 初始化 C3P0 连接池需要 2 分钟

> ID：14417692
> 
> 赞同：9
> 
> 时间：2013-01-19T18:55:32.447
> 
> 标签：java, hibernate, c3p0

我无法理解为什么在我的 Hibernate 应用程序中初始化 c3p0 连接池需要 2 分钟。

这是在我的 Hibernate.cfg.xml 中：

```
<hibernate-configuration>
    <session-factory>
        <property name="connection.driver_class">org.postgresql.Driver</property>
        <property name="connection.url"/>
        <property name="connection.default_schema"/>
        <property name="connection.username"/>
        <property name="connection.password"/> 

        <property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property>
        <property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property>
        <property name="current_session_context_class">thread</property>

        <property name="hibernate.c3p0.acquire_increment">1</property>
        <property name="hibernate.c3p0.min_size">3</property>
        <property name="hibernate.c3p0.max_size">10</property>
        <property name="hibernate.c3p0.timeout">300</property>
        <property name="hibernate.c3p0.max_statements">50</property>
        <property name="hibernate.c3p0.idle_test_period">3000</property>
        <property name="hibernate.c3p0."></property>

        <property name="show_sql">true</property>
        <property name="format_sql">false</property>

        <property name="hbm2ddl.auto">create</property>
 </session-factory>
</hibernate-configuration> 
```

连接设置是在构建会话工厂时在我的 HibernateUtil 文件中设置的。

当我的测试中的第一个事务是 openend 时，池被初始化。之后连接和查询数据库就可以正常工作了，它只会在下一行挂起一段时间，然后才会开始。我对输出进行了一些格式化，因为我认为问题可能与此处提到的设置之一有关：

```
INFO: Initializing c3p0 pool... 
com.mchange.v2.c3p0.PoolBackedDataSource@30670080 [
  connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@ecfec4d0 [
    acquireIncrement -> 1,
    acquireRetryAttempts -> 30,
    acquireRetryDelay -> 1000,
    autoCommitOnClose -> false,
    automaticTestTable -> null,
    breakAfterAcquireFailure -> false,
    checkoutTimeout -> 0,
    connectionCustomizerClassName -> null,
    connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester,        
    debugUnreturnedConnectionStackTraces -> false,
    factoryClassLocation -> null,
    forceIgnoreUnresolvedTransactions -> false,
    identityToken -> I-REMOVED-THIS,
    idleConnectionTestPeriod -> 3000,
    initialPoolSize -> 3,
    maxAdministrativeTaskTime -> 0,
    maxConnectionAge -> 0,
    maxIdleTime -> 300,
    maxIdleTimeExcessConnections -> 0,
    maxPoolSize -> 10,
    maxStatements -> 50,
    maxStatementsPerConnection -> 0,
    minPoolSize -> 3,
    nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@b17e5c65 [
      description -> null,
      driverClass -> null,
      factoryClassLocation -> null,
      identityToken -> I-REMOVED-THIS,
      jdbcUrl -> jdbc:postgresql://URL-TO-MY_DB,
      properties -> {user=******, password=******, default_schema=}
    ],
    preferredTestQuery -> null,
    propertyCycle -> 0,
    testConnectionOnCheckin -> false,
    testConnectionOnCheckout -> false,
    unreturnedConnectionTimeout -> 0,
    usesTraditionalReflectiveProxies -> false;
    userOverrides: {}
  ],
  dataSourceName -> null,
  factoryClassLocation -> null,
  identityToken -> I-REMOVED-THIS,
  numHelperThreads -> 3
] 
```

这是我第一次使用 Hibernate 和 c3p0，我希望在启动池时它会更快？难道是我的错觉？

使用远程数据库和本地 PostgreSQL 实例没有区别。

（编辑：这不是真的。在比较本地和远程数据库服务器时我犯了一个错误。在本地，初始化几乎是立即的，远程大约需要 2 分钟。）

Edit2：[这](https://gist.github.com/6cba1ae8b2982cec2afa "日志")是连接过程的日志。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-08T14:01:47.437

在会话工厂的配置中将属性 Hibernate.temp.use_jdbc_metadata_defaults 设置为 false。这将指示 Hibernate 使用元数据方言而不是连接，这会导致启动缓慢。您还必须为您的驱动程序配置适当的方言。

# c# - 移动信息有问题

> ID：14417697
> 
> 赞同：0
> 
> 时间：2013-01-19T18:56:16.337
> 
> 标签：c#

我似乎在我试图为学校制作的一个项目中遇到了一些障碍。我想创建一个新类来接收数据并获得总数以发送到新屏幕。好吧，我做了我们在课堂上做的同样的事情，但不同的是，这是来自一个文本框，这次我需要移动的数据没有文本框，所以我尝试的方式给了我一个错误。这是我到目前为止得到的：

```
 public StudentSelection()
    {
        InitializeComponent();
    }
    public decimal firstCounter;
    public decimal secondCounter;
    public decimal finalCounter;

    struct StudentScores
    {
        public string StuId;
        public decimal TestOne;
        public decimal TestTwo;
        public decimal Final;  
    }
    StudentScores[] allStudentScores = new StudentScores[10]; 
    // class level array to hold 10 products - read in from a file

    private void StudentSelection_Load(object sender, EventArgs e)
    {
        // read products file into products structure array
        try
        {

            // ALWAYS initialize a structure array before using the array
            //  before adding, changing, etc.
            for (int x = 0; x < 10; x++)
            {
                allStudentScores[x].StuId = "";
                allStudentScores[x].TestOne = 0;
                allStudentScores[x].TestTwo = 0;
                allStudentScores[x].Final = 0;
            }

            int arrayIndex = 0; // needed for incrementing index value of the array
            // when reading file into array

            // now read file into the array after initialization
            StreamReader inputFile;

            string lineofdata; // used to hold each line of data read in from the file
            string[] ProductStringArray = new string[4]; // 6 element string array to hold 
            // each "field" read from every line in file

            inputFile = File.OpenText("StudentScores.txt"); // open for reading

            while (!inputFile.EndOfStream) //keep reading until end of file
            {
                lineofdata = inputFile.ReadLine(); // ReadLine() reads an entire row of data from file
                ProductStringArray = lineofdata.Split(','); //each field is separated by ';'
                allStudentScores[arrayIndex].StuId = ProductStringArray[0]; // add first element of array to first column of allProducts
                allStudentScores[arrayIndex].TestOne = decimal.Parse(ProductStringArray[1]);
                firstCounter += allStudentScores[arrayIndex].TestOne;
                allStudentScores[arrayIndex].TestTwo = decimal.Parse(ProductStringArray[2]);
                secondCounter += allStudentScores[arrayIndex].TestTwo;
                allStudentScores[arrayIndex].Final = decimal.Parse(ProductStringArray[3]);
                finalCounter += allStudentScores[arrayIndex].Final;
                StudentListView.Items.Add(ProductStringArray[0]);
                arrayIndex++; // increment so NEXT row is updated with next read

            }

            //close the file
            inputFile.Close(); 
        }
        catch (Exception anError)
        {
            MessageBox.Show(anError.Message);

        }
    }
    private void NextButton_Click(object sender, EventArgs e)
    {
        decimal firstResult, secondResult, finalResult, stuOne, stuTwo, stuThree;
        string stuName;

        // call the method in our datatier class
        decimal.TryParse(firstCounter, out firstResult);
        decimal.TryParse(secondCounter, out secondResult);
        decimal.TryParse(finalCounter, out finalResult);

        DataTier.AddOurNumbers(firstResult, secondResult, finalResult);
        DataTier.StudentData(stuName, stuOne, stuTwo, stuThree);

        // now hide this window and display a third window with the total
        this.Hide();
        // display third window
        ScoreScreen aScoreScreen = new ScoreScreen();
        aScoreScreen.Show();
    }

} 
```

和我的新课

```
class DataTier
{
    // public static variable available to all windows
    public static decimal firstTotal, secondTotal, finalTotal, stuTestOne, stuTestTwo, stuTestThree;
    // static is not associated with any object

    public static string stuIDCode;

    // create a public method to access from all windows
    public static void AddOurNumbers(decimal NumOne, decimal NumTwo, decimal numThree)
    {
        // devide to get an average
        firstTotal = NumOne / 10;
        secondTotal = NumTwo / 10;
        finalTotal = numThree / 10;
    }

    public static void StudentData(string name, decimal testOne, decimal testTwo, decimal testThree)
    {
        stuIDCode = name;
        stuTestOne = testOne;
        stuTestTwo = testTwo;
        stuTestThree = testThree;
    }
} 
```

错误出现在小数点后三位。TryParse 部分，我不知道为什么它不起作用，除了错误说“无法从十进制转换为字符串”。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:01:10.747

将其更改为：

```
 decimal.TryParse(firstCounter, out firstResult);
    decimal.TryParse(secondCounter, out secondResult);
    decimal.TryParse(finalCounter, out finalResult);

    DataTier.AddOurNumbers(firstResult, secondResult, finalResult); 
```

到：

```
 DataTier.AddOurNumbers(firstCounter, secondCounter, finalCounter); 
```

问题是您试图调用[`decimal.TryParse(string s, out decimal result)`](http://msdn.microsoft.com/en-us/library/9zbda557.aspx)为 decimal.TryParse(decimal s, out decimal result)。

您的输入已经`decimal`并且不需要任何转换。

* * *

附带说明一下，代码

```
 decimal.TryParse(someString, out someOutputDecimal); 
```

如果没有适当的*if 语句*，它将静默失败（它不会通知任何有关失败的信息）。事实上，输出值设置为 0，就好像没有接收到错误输入一样。如果输入应始终有效，则应[`decimal.Parse(someString)`](http://msdn.microsoft.com/en-us/library/cafs243z.aspx)改为使用。但是，在某些情况下，如果输入无效，则默认为 0 可能是所需的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:02:50.043

该`decimal.TryParse()`方法将字符串作为其第一个参数并尝试将其转换为`decimal`值。在您的情况下，您传递给的变量`TryParse()`已经是`decimal`变量，无需解析它们。如果您只想将类变量复制到局部变量，您需要做的就是：

```
firstResult = firstCounter;
secondResult = secondCounter;
finalResult = finalCounter; 
```

或者在这种特殊情况下，您可以直接将类变量传递给`AddOurNumbers`：

```
DataTier.AddOurNumbers(firstCounter, secondCounter, finalCounter); 
```

这里要注意的一件事是，值类型（例如`decimals`C# 中的其他原语）在您将它们从一个值分配给另一个值或将它们传递给方法时都会被复制。这意味着即使调用 后 、 或 的值发生变化`firstCounter`，`secondCounter`您的数据层已经收到的值也不会发生变化。`thirdCounter``DataTier.AddOurNumbers()`

# java - Sending email, via javamail smtp, results in messagePartiallyDelivered on a completely successful send

> ID：14417701
> 
> 赞同：0
> 
> 时间：2013-01-19T18:56:22.587
> 
> 标签：java, smtp, jakarta-mail

Sending email, via javamail smtp, with 2 addresses listed in MIME headers but only 1 address used in send function seems to result in a messagePartiallyDelivered, regardless of the fact that the 'one' address provided to the send function successfully received the message.

Is this the expected behaviour ?

The javadocs for javamail are not very well filled out, so it is hard to tell if this is the behaviour I can expect with any implementation of javamail (be it sun/oracle, or gnu).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:27:11.897

你有 mail.smtp.reportsuccess 设置吗？如果是这样，那就是预期的行为。

[否则，查看协议跟踪和调试](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)会很有帮助。

# php - PHP - 如何在类中定义“静态”变量

> ID：14417706
> 
> 赞同：1
> 
> 时间：2013-01-19T18:56:35.600
> 
> 标签：php, class

我试图在一个类中调用一些*“全局/静态”*变量（$agent，$version），但我不知道如何将它们插入到类本身中。基本上我声明了类 "$myclass = new myClass($agent, $version) 但我不知道如何在类中调用这些变量（例如在 getProducts 函数中使用它们）。我知道这些问题听起来很愚蠢，但我只是不明白。

**索引.php：**

```
$myclass = new myClass($agent, $version);

$agent = "firefox";
$version = "234";

$catalog = $myClass->$getProducts("http://amazon.com", "red"); 
```

**myclass.class.php ：**

```
class myClass {
    function getXML ($agent, $version) {
        //do something 
        return $
    }

    function getProducts ($url, $color) {
        $product = $this->getXML($agent, $version);
        $catalog =  str_replace("asus", "", $product);
        return $catalog
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:04:03.190

听起来静态变量不是您要寻找的，最好避免使用，除非您知道自己在做什么（它们不是真正面向对象的，在 PHP 5.3+ 中根本不需要）。从您提供的代码看来，您希望将参数传递给对象实例化 ( `new`)，因此您应该为接受参数的类创建一个构造函数，并将它们分配给要在方法中使用的实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:05:36.703

您可以使用 static 关键字声明它们。

来自[http://php.net/manual/en/language.oop5.static.php](http://php.net/manual/en/language.oop5.static.php)：

```
class Foo
{
    public static $my_static = 'foo';

    public function staticValue() {
        return self::$my_static;
    }
}

print Foo::$my_static . "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:04:13.893

我想你的意思不是“静态”变量而是“属性”：

```
class myClass {
    // Declare the properties
    private $agent, $version;

    public function __construct($agent, $version) {
        // Copy the arguments to the class members
        $this->agent = $agent;
        $this->version = $version;
    }

    public function getProducts($url, $color) {
        $product = $this->getXML();
        // ...
    }

    private function getXML() {
        // Use the values stored in $this->agent etc.
        $agent = $this->agent;
        // ...
    }
} 
```

用法：

```
$agent = "firefox";
$version = "234";
$instance = new myClass($agent, $version);
$catalog = $instance->getProducts("http://amazon.com", "red"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T19:11:32.543

这也是错误的：

```
function getProducts ($url, $color){
  $product = $this->getXML($agent, $version);
  $catalog =  str_replace("asus", "", $product);
  return $catalog
} 
```

您不能在 getXML 方法中传递 $agent 和 $version 变量，除非您不先构造它们，或者在 getProducts 方法中传递它们。

# android - Android椭圆溢出优先级

> ID：14417710
> 
> 赞同：0
> 
> 时间：2013-01-19T18:56:43.990
> 
> 标签：android, textview, ellipse

我在两行上的每个水平线性布局行有 2 个文本视图。所有视图都设置为 0dp 宽度和重量 1。它们都具有相同的字体和文本大小等。左侧的视图是重力左对齐的，右侧的两个视图是重力右对齐的。

当两个文本视图文本长度溢出时，android总是优先考虑右侧的文本视图并省略左侧的视图。

当同一行上的两个视图都不适合时，是否有一种方法可用于控制哪个视图椭圆。

理想情况下，我希望右边的观点偏向左边的观点。或者失败使它们每行均匀椭圆。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:48:19.633

我不认为视图的顺序功能可以管理它们的测量方式。

您可以通过扩展它来自定义 linearLayout 以支持此功能，但这对于此任务来说太硬核了。

我建议将有问题的视图（那些占用太多空间并且您不使用它们占用太多空间的视图）放入新布局中，并将其宽度设置为 match_parent 。

这样，它应该在其他视图的测量结束时占用剩余空间，

# java - JPA -Hibernate 教程：显式持久性提供程序错误 - 无法创建配置

> ID：14417711
> 
> 赞同：1
> 
> 时间：2013-01-19T18:56:45.070
> 
> 标签：java, hibernate, jpa

我正在尝试通过此站点 [https://schuchert.wikispaces.com/JPA+Tutorial+1+-+Getting+Started](https://schuchert.wikispaces.com/JPA+Tutorial+1+-+Getting+Started)中提到的一个非常简单的示例来学习 JPA-Hibernate （我也尝试过备用链接，但最终都结束了有同样的问题）

在我在这里简要描述我的例子之前，我已经列出了重要的例外 -

```
Explicit persistence provider error(s) occurred for "examplePersistenceUnit" after trying the following discovered implementations: org.hibernate.ejb.HibernatePersistence from provider: org.hibernate.ejb.HibernatePersistence
Caused by: org.hibernate.HibernateException: Unable to build the default ValidatorFactory
Caused by: javax.validation.ValidationException: Could not create Configuration.
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:175)
Caused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0 
```

项目配置如下 persistence.xml {inside src folder directory META-INF}

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">
    <persistence-unit name="examplePersistenceUnit" 
                      transaction-type="RESOURCE_LOCAL">     
       <properties>
            <property name="hibernate.show_sql" value="false" />
            <property name="hibernate.format_sql" value="false" />

            <property name="hibernate.connection.driver_class" 
                      value="org.hsqldb.jdbcDriver" />
            <property name="hibernate.connection.url" 
                      value="jdbc:hsqldb:mem:mem:aname" />
            <property name="hibernate.connection.username" value="sa" />

            <property name="hibernate.dialect" 
                      value="org.hibernate.dialect.HSQLDialect" />
            <property name="hibernate.hbm2ddl.auto" value="create" />
        </properties>
    </persistence-unit>
</persistence> 
```

然后我有一个简单的junit类，它执行以下操作

```
@Before
    public void init(){
         BasicConfigurator.configure();
            Logger.getLogger("org").setLevel(Level.TRACE);
        emf= Persistence.createEntityManagerFactory("examplePersistenceUnit");
        em = emf.createEntityManager();

    } 
```

谁能帮我解决这个问题我试图在论坛上搜索并用反编译器调试它但没有用

完整的异常跟踪

```
javax.persistence.PersistenceException: Explicit persistence provider error(s) occurred for "examplePersistenceUnit" after trying the following discovered implementations: org.hibernate.ejb.HibernatePersistence from provider: org.hibernate.ejb.HibernatePersistence
    at javax.persistence.Persistence.createPersistenceException(Persistence.java:244)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:186)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:72)
    at entity.PersonTest.init(PersonTest.java:22)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: examplePersistenceUnit] Unable to build EntityManagerFactory
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:915)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:152)
    ... 26 more
Caused by: org.hibernate.HibernateException: Error applying BeanValidation relational constraints
    at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.applyRelationalConstraints(BeanValidationIntegrator.java:219)
    at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.integrate(BeanValidationIntegrator.java:126)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:303)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1750)
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
    ... 29 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.applyRelationalConstraints(BeanValidationIntegrator.java:208)
    ... 34 more
Caused by: org.hibernate.HibernateException: Unable to build the default ValidatorFactory
    at org.hibernate.cfg.beanvalidation.TypeSafeActivator.getValidatorFactory(TypeSafeActivator.java:524)
    at org.hibernate.cfg.beanvalidation.TypeSafeActivator.applyDDL(TypeSafeActivator.java:119)
    ... 39 more
Caused by: javax.validation.ValidationException: Could not create Configuration.
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:175)
    at javax.validation.Validation.buildDefaultValidatorFactory(Validation.java:50)
    at org.hibernate.cfg.beanvalidation.TypeSafeActivator.getValidatorFactory(TypeSafeActivator.java:521)
    ... 40 more
Caused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at java.util.ArrayList.rangeCheck(ArrayList.java:571)
    at java.util.ArrayList.get(ArrayList.java:349)
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:173)
    ... 42 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:19:50.930

Hibernate 验证器是否在您的类路径中？

如果您使用的是 Maven，只需添加相应 Hibernate 版本的[依赖项 ()。](http://mvnrepository.com/artifact/org.hibernate/hibernate-validator)

# java - 从数组列表中提取数据

> ID：14417715
> 
> 赞同：1
> 
> 时间：2013-01-19T18:57:10.383
> 
> 标签：java, arrays, arraylist

**我有这个来自文件的样本列表**

```
firstname, lastname, age
anne, smith, 6
dougie, miller, 8 
```

现在我被arraylist困住了

```
ArrayList<String[]> rows = new ArrayList<>();
     while ((line = reader.readLine()) != null) {
        String[] row = line.split(",");
        rows.add(row);
    }

    for (String[] row : rows) {
        System.out.println(Arrays.toString(row));
    } 
```

我得到了这些输出：

```
[firstname,lastname,age]
[anne,smith,6]
[dougie,miller,8] 
```

我试过这样做：

```
String[] x1 = new String[rows.size()+1];
     for(int i=0;i<rows.size();i++){
     String[] lastname = (String[]) rows.get(i+1);
        System.out.println(lastname[1]);
        //x1[i]=lastname[1];
     } 
```

但我似乎无法将姓氏放在一个数组中。它会给我这个错误：

线程“AWT-EventQueue-0”中的异常 java.lang.IndexOutOfBoundsException：索引：227，大小：227

我想要这个输出：

```
名
安妮
道吉

姓
史密斯
磨坊主

年龄
6
8

```

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:05:19.977

我考虑过使用更简单的解决方案，使用`Scanner`：

```
File file = new File(filePath);
try {
    Scanner content = new Scanner(file).useDelimiter("\n");
    while (content.hasNext()) {
        String[] line = content.next().split(",\\s");
        for (String s : line) {
            System.out.println(s);
        }
    }
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T00:49:04.537

如果 StringArrays 大小相同，这个应该可以正常工作：

```
int cols = rows.size() > 0 ? rows.get(0).length : 0;
for (int i = 0; i < cols; i++) {
  for (int j = 0; j < rows.size(); j++) {
    System.out.println(rows.get(j)[i]);
  }
} 
```

# c# - 如何获取 Amazon 对象的公共路径？

> ID：14417720
> 
> 赞同：0
> 
> 时间：2013-01-19T18:57:29.310
> 
> 标签：c#, amazon-web-services, amazon-s3

我目前将我的根对象列为：

```
var files = new List<string>();
var request = new ListObjectsRequest();
request.WithBucketName(bucketName);

try
{
    using (AmazonS3 client = Amazon.AWSClientFactory.CreateAmazonS3Client(this.accessKey, this.secretAccessKey))
    using (ListObjectsResponse r = client.ListObjects(request))
        foreach (var o in r.S3Objects)
            //o.ETag, o.Key, o.StorageClass, o.Size
            if (o.Size > 0)
                files.Add(o.Key); 
}
catch (Exception ex)
{
    // log exception
} 
```

里面有`o.Key`文件名，但**我想获取**该文件名的公共路径，并且我不会寻找有关获取对现有文件的此类引用的帮助。

我通常在配置文件中使用**公共存储桶**url，但我想知道是否可以避免这样的配置，并在检索时从对象本身获取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:09:41.360

发现这更容易一些，因为 Amazon S3 遵循约定：

```
string path = String.Format("http://{0}.s3.amazonaws.com/", originBucketName); 
```

这将是公共路径。

# php - Get data from json array PHP

> ID：14417722
> 
> 赞同：0
> 
> 时间：2013-01-19T18:57:44.160
> 
> 标签：php, json

i decoded the json data using php json_decode here is my output with print_r

```
stdClass Object ( 
[uv] => stdClass Object ( 
[current] => stdClass Object ( 
[class_name] => delta-positive 
[display] => 668 [value] => 668 ) 
[yoy_perc] => stdClass Object ( 
         [class_name] => delta-negative 
         [display] => -21.23% 
         [value] => -21.23 ) 
[mom_perc] => stdClass Object ( 
         [class_name] => delta-negative 
         [display] => -8.87% [value] => -8.87 ) 
[yoy] => stdClass Object ( 
         [class_name] => delta-negative 
         [display] => -180 [value] => -180 ) 
[mom] => stdClass Object ( 
         [class_name] => delta-negative 
         [display] => -65 
         [value] => -65 ) ) 
[page_title] => example.com 668 UVs for December 2012 | Compete 
[rank] => stdClass Object ( 
        [current] => stdClass Object ( 
           [class_name] => delta-positive 
             [display] => 1,398,481 
            [value] => 1398481 ) [yoy] => stdClass Object ( [class_name] => delta-negative [display] => -187,667 [value] => -187667 ) [last_month] => stdClass Object ( [class_name] => delta-positive [display] => 1,246,200 [value] => 1246200 ) [mom] => stdClass Object ( [class_name] => delta-negative [display] => -152,281 [value] => -152281 ) [last_year] => stdClass Object ( [class_name] => delta-positive [display] => 1,210,814 [value] => 1210814 ) ) ) 
```

i need to get

```
[display] => 668 [value] => 668 ) 
```

**668**

of this i tried using foreach but no luck. anyone know how to do that using php an efficient way i mean without a loop thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:00:23.003

Try this:

```
object->uv->current->display;
object->uv->current->value; 
```

or use [json_decode](http://php.net/manual/es/function.json-decode.php) PHP function.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:01:33.613

```
$obj->uv->current->value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:02:44.960

尝试使用`json_decode()`第二个参数集以使其输出数组而不是对象结构。

```
`$outputArray = json_decode($inputString, true); 
```

这将允许您使用`foreach()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T19:02:54.553

如果您对对象不满意，您可以简单地将“true”放在 json_decode() 的第二个参数中。

```
json_decode($jsondata, true); 
```

因此，您可以将它们作为数组访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T19:03:34.317

使用 json_decode($json, true) 获取关联数组。

[http://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

# mysql - MySQL：行之间的时间

> ID：14417729
> 
> 赞同：1
> 
> 时间：2013-01-19T18:58:30.403
> 
> 标签：mysql, datetime, select, datediff

我是 MySQL 新手，我试图弄清楚如何计算日志表中行之间传递的时间。

该表是具有 ID 、 Hostname 、 Info 、 Timestamp 的基本表，其数据如下：

```
+---+----------+-------------------+---------------------+
|ID | Hostname | Info              | Timestamp           |
+---+----------+-------------------+---------------------+
|445| switch1  | "port 1 inserted" | 2013-01-19 19:51:40 |
|446| switch1  | "port 2 inserted" | 2013-01-19 19:59:41 |
|447| Router2  | "alarm fan speed" | 2013-01-19 20:00:40 |
|448| switch1  | "alarm fan speed" | 2013-01-19 20:12:20 |
|449| Router2  | "alarm fan speed" | 2013-01-19 21:42:41 |
+---+----------+-------------------+---------------------+ 
```

所以基本上我想获得具有相同主机名的行之间的时间差，在这种情况下，在第 445 行和第 446 行之间，它将导致 8 分 1 秒。并且在 446 和 448 之间会产生 12 分 39 秒。等等...

对此的任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:12:28.543

这将为您提供行之间的时间差（以秒为单位）：

```
SELECT c.info, 
       CASE 
         WHEN f.`timestamp` IS NOT NULL THEN 
         Timestampdiff(second, f.`timestamp`, 
         c.`timestamp`) 
         ELSE NULL 
       end AS time_diff 
FROM   (SELECT @rowa := @rowa + 1 AS id, 
               a.hostname, 
               a.info, 
               a.`timestamp` 
        FROM   sparkles a 
               JOIN (SELECT @rowa := 0) b 
        WHERE  a.hostname = 'switch1') c 
       LEFT JOIN (SELECT @rowb := @rowb + 1 AS id, 
                         d.hostname, 
                         d.info, 
                         d.`timestamp` 
                  FROM   sparkles d 
                         JOIN (SELECT @rowb := 0) e 
                  WHERE  d.hostname = 'switch1') f 
              ON f.id = c.id - 1 
```

**结果**（对于*switch1*作为`hostname`）

```
| 信息 | TIME_DIFF |
-------------------------------------------
| 插入端口 1 | (空) |
| 端口 2 已插入 | 481 |
| 风扇转速报警| 第759章
```

## [查看演示](http://sqlfiddle.com/#!2/db6ca/1)

**结果**（对于*Router2*作为`hostname`）

```
| 信息 | TIME_DIFF |
-------------------------------------------
| 风扇转速报警| (空) |
| 风扇转速报警| 6121 |
```

## [查看演示](http://sqlfiddle.com/#!2/db6ca/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:23:15.710

试试这个：

```
SELECT id, IF(@lastdate = '', NULL, TIMESTAMPDIFF(SECOND, TIMESTAMP, @lastdate)), 
       @lastdate:=TIMESTAMP 
FROM tablename, (SELECT @lastdate:='') a; 
```

# arrays - When reading from a file into a 2d array

> ID：14417735
> 
> 赞同：0
> 
> 时间：2013-01-19T18:59:21.370
> 
> 标签：arrays, vb.net, streamreader, streamwriter

I want to know how to read out of a file and display the data on different labels. If anybody can suggest an efficient way of doing this `100` items for diffident file locations, that will appropriated .

```
 Private Sub BtnSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnSave.Click         If RadFriday.Checked = True Then
            Select Case Row 
                Case 0 
                    Customer(0, 0) = New StreamWriter("D:\theater seats\friday\A1Seat.txt") 
                    Customer(0, 0).Write(ArrayFS(0, 0, 0) & (" ") & ArrayFS(0, 0, 1) & (", ") & ArrayFS(0, 0, 2) & (", ") & ArrayFS(0, 0, 3) & (", ") & ArrayFS(0, 0, 4) & (", ") & ArrayFS(0, 0, 5) & (", ") & ArrayFS(0, 0, 6) & (", ") & ArrayFS(0, 0, 7))
                    MsgBox("Data has been stored.") 
                    Customer(0, 0).Close() 
            End Select 
  End If

    End Sub
Private Sub BtnRead_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnRead.Click 
            Select Case Row 
                Case 0 
                    LblName.Text = "" 
                    CustomerLoad(0, 0, 0) = New StreamReader("D:\theater seats\friday\A1Seat.txt")
                    LblName.Text = CustomerLoad(0, 0, 0).ReadToEnd
                    If LblName.Text = "" Then
                        MsgBox("There is no data stored for this seat!")
                    Else
                        CustomerLoad(0, 0, 0).Close()
                    End If
            End Select
        ElseIf RadSaturday.Checked = True Then

        End If
End Sub 
```

# android - how to test rooted application on adt emulator?

> ID：14417737
> 
> 赞同：0
> 
> 时间：2013-01-19T18:59:30.407
> 
> 标签：android

As you can understand from title, I have made an application which uses sudo command in its one method. I, now, want test this application on Android. As I understand, emulator is not rooted. Thus, I have some questions;

*   In ADT, is there a way to make ADT emulator as being rooted? If yes, how?
*   If no, without needing to use physical device, how can I test my application?

Note: can you give your answer step by step ? (first do then ... )

Thanks

# macos - Rendering NSString to monochrome texture on OSX

> ID：14417739
> 
> 赞同：0
> 
> 时间：2013-01-19T18:59:42.773
> 
> 标签：macos, opengl

I want to render an NSString to a monochrome OpenGL texture. I found many examples on how to to that on iOS, but I'm struggling to find a code snippet that works on OSX.

I know how to do the last bit, uploading a texture to the GPU, but how do I get the raw (8 bit per pixel) data?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:35:18.903

查看Apple 的[Cocoa OpenGL 代码示例中的](https://developer.apple.com/library/mac/#samplecode/CocoaGL/Introduction/Intro.html)[GLString.m](http://developer.apple.com/library/mac/#samplecode/CocoaGL/Listings/GLString_m.html)。您可以轻松修改它以生成单色纹理。相关修改导致代码如下所示：

```
NSBitmapImageRep *bitmap = [[NSBitmapImageRep alloc] initWithBitmapDataPlanes:NULL pixelsWide:frameSize.width pixelsHigh:frameSize.height
    bitsPerSample:8 samplesPerPixel:1 hasAlpha:NO isPlanar:NO colorSpaceName:NSDeviceWhiteColorSpace bitmapFormat:0 bytesPerRow:frameSize.width bitsPerPixel:8];

NSGraphicsContext *context = [NSGraphicsContext graphicsContextWithBitmapImageRep:bitmap];
[NSGraphicsContext saveGraphicsState];
[NSGraphicsContext setCurrentContext:context];

…    

[string drawAtPoint:NSMakePoint(marginSize.width, marginSize.height)]; // draw at offset position

…

[NSGraphicsContext restoreGraphicsState];

if (0 == texName)
    glGenTextures (1, &texName);

glBindTexture (GL_TEXTURE_RECTANGLE_EXT, texName);
glTexSubImage2D(GL_TEXTURE_RECTANGLE_EXT, 0, 0, 0, texSize.width, texSize.height, GL_LUMINANCE, GL_UNSIGNED_BYTE, [bitmap bitmapData]); 
```

关键部分是：

1.  使用所需的格式分配您自己的 NSBitmapImageRep。
2.  分配一个 NSGraphicsContext 写入您的 NSBitmapImageRep。
3.  画出你的绳子。
4.  将图形上下文恢复到其原始状态。
5.  使用与您初始化 NSBitmapImageRep 的格式兼容的像素格式调用 glTexSubImage2D。

# c# - build gridview with variable column number

> ID：14417740
> 
> 赞同：1
> 
> 时间：2013-01-19T19:00:00.503
> 
> 标签：c#, asp.net, sql, datatable

I have data in a sql table that looks like this:

```
Name    colno    remark
----    -----    ------
bill    col 1    good
bill    col 2    ok
bill    col 3    triff
bill    col 4    A1
bob     col 1    poor
bob     col 2    excellent
bob     col 3    ok
bob     col 4    B+
bert    col 1    
bert    col 2    no info
bert    col 3    pass
bert    col 4    C- 
```

and I want a gridview (?) with databinding that's laid out like this:

```
Name     col 1    col 2      col 3    col 4
Bill     good      ok        triff     A1
Bob      poor     excellent  ok        B+
bert              no info    pass      C- 
```

So I can edit/insert data as needed.

The killer is that the number of columns can vary, eg I've 4 in the first example above, but it can be any number between 10 - 15\. Hence on a second extract the data might look like this:

```
Name    colno    remark
----    -----    ------
brenda  col 1    ok
brenda  col 2    ok
brenda  col 3    excellent
boris   col 1    poor
boris   col 2    ok
boris   col 3    ok
baz     col 1    great
baz     col 2    no info
baz     col 3    ok 
```

Giving a table like this:

```
Name     col 1    col 2      col 3
brenda   ok        ok        excellent
boris    poor      ok          ok
baz      great    no info      ok 
```

I've explored sql pivot but I don't want the data summarised in any way, it's just a single field of text per record. So I don't think this kind of query will work:

```
select * from myData
pivot (someAggregateFunctionThatIDontNeed(colNo) for colNo_ButNotBeingAggregated in (variableNoOfColumns)) as notAnAvergageJustText 
```

I've tried to build a DataTable piecemeal from multiple sql-extracts-into-datatables-then-loop (that works, kinda, but I can't figure out how to bind the data after)

Any ideas? I've caned this for four days and I'm stumped. The offer of the wifey coming round to cook your Sunday dinner is still on...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:03:04.517

您是否尝试过在 SQL 语句中使用 ISNULL 来检查没有数据的列？如果没有数据，您可以在语句本身中设置默认设置。

```
ISNULL([YOUR FIELD],'Whatever you want to display here') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:31:27.193

你需要一个支点。查找 SQL 的“pivot”MSDN，或谷歌它。准备花一点时间了解它，语法并不简单。

# ios - QuickBlox iOS SDK按给定键的子集合过滤QBCOCustomObjects？

> ID：14417741
> 
> 赞同：2
> 
> 时间：2013-01-19T19:00:01.773
> 
> 标签：ios, quickblox

前任。有 2 个实体：“父母”-->> 具有一对多关系的“孩子”。
“孩子”具有属性 NSString *myKey。
QuickBlox 文档提供了一个关于不同 QBCOCustomObject [（QuickBlox：获取相关记录）](http://quickblox.com/developers/Custom_Objects#Get_related_records)之间关系的示例，但仅适用于简单的情况：如何使用给定的“父”实例获取“子”实例。

是否有可能获得与“孩子”相关的所有“父母”，其中每个“孩子”实例都有一个给定的“myKey”和一个请求？
或者我必须为每个实体使用两个单独的请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:52:47.100

给特定父母的所有孩子：

```
https://api.quickblox.com/data/Child?_parent_id=<your_Parent_class_instance_id> 
```

给出与“孩子”相关的所有“父母”ID，其中每个“孩子”实例都有一个给定的“myKey”：

```
https://api.quickblox.com/data/Child?myKey=<some_value> 
```

然后每个孩子都有 _parent_id 字段

# ruby-on-rails-3 - nil 的未定义方法：NilClass

> ID：14417749
> 
> 赞同：0
> 
> 时间：2013-01-19T19:01:09.720
> 
> 标签：ruby-on-rails-3, undefined, has-many, belongs-to

上传控制器

```
def create
@upload = @order.uploads.build(params[:uploadtwo]) 
   respond_to do |format|
    if @upload.save
    format.html { redirect_to root_path, :notice => 'File was successfully uploaded.' }
    format.json { render :json => @upload, :status => :created, :location => @upload }
  else
    format.html { render :action => "new" }
    format.json { render :json => @upload.errors, :status => :unprocessable_entity }     
end 
```

结尾

上传模型

```
belongs_to :order 
```

订单模型

```
has_many :uploads 
```

我收到错误 [NoMethodError in UploadtwosController#create]，[未定义的方法 `uploads' for nil:NilClass]

有人知道我没有做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:03:21.743

仅`belongs_to :order`在您的 Upload 模型中声明*并不*意味着`@order`它将在控制器中自动定义。也许你想要的是`before_filter`控制器中的一个设置`@order`？

# android - 支持不同的定制颜色和样式

> ID：14417752
> 
> 赞同：0
> 
> 时间：2013-01-19T19:01:18.857
> 
> 标签：android, eclipse

我对 Android 比较陌生。我已经建立了一个应用程序。并经常为每个代码设置背景颜色。我也可能将 XML 部分更改为代码，因为我希望用户可以选择在红色和绿色布局之间进行选择（如色盲模式）

我将在静态类中定义值，然后静态类将返回 Color.rgb(100,200,100) 或 Color.rgb(50,50,150) 例如，这取决于我将从 decive 获得的设置或仅临时设置在静态类上。

我找不到任何关于此的内容（也许我使用了错误的关键字）。这是正确的方法吗？或者是否有不同的指导方针（比如多语言支持）？

# ios - UINavigationBar 只调用一些委托

> ID：14417760
> 
> 赞同：1
> 
> 时间：2013-01-19T19:02:20.030
> 
> 标签：ios, objective-c, ios6, delegates

我`UINavigationItem`在右侧添加了一个保存按钮，在左侧添加了一个后退按钮到我的`UINavigationBar`. 我将我的视图控制器设置为委托，并且导航栏正在调用一些委托函数，但不是`-(BOOL)navigationBar:(UINavigationBar *)navigationBar shouldPopItem:(UINavigationItem *)item`。

在 ISStudioReviewViewController.h 中：

```
@interface ISStudioReviewViewController : UIViewController <UINavigationBarDelegate, UITextViewDelegate>
    @property (weak, nonatomic) IBOutlet UINavigationBar *header;
@end 
```

在 ISStudioReviewViewController.m 中：

```
-(void)viewDidLoad {
    [super viewDidLoad];
    ...
    ...
    UINavigationItem *navHeader = [[UINavigationItem alloc] initWithTitle:@"Compose Review"];
    [navHeader setHidesBackButton:NO];
    UIBarButtonItem *actionButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemSave
                                                                              target:self
                                                                              action:@selector(saveReview)];
    [navHeader setRightBarButtonItem:actionButton];
    [header setDelegate:self];
    [header pushNavigationItem:navHeader animated:NO];
}

-(BOOL)navigationBar:(UINavigationBar *)navigationBar shouldPopItem:(UINavigationItem *)item
{
    NSLog(@"Popping item");
    ....
    return YES;
}
-(BOOL)navigationBar:(UINavigationBar *)navigationBar shouldPushItem:(UINavigationItem *)item
{
    NSLog(@"Should push item");
    return YES;
}
-(void)navigationBar:(UINavigationBar *)navigationBar didPushItem:(UINavigationItem *)item
{
    NSLog(@"Pushing item!");
} 
```

在我的日志中，我可以看到 shouldPush 和 didPush 委托方法被正确调用，并且我的后退按钮正在显示。但是，单击后退按钮不会调用委托方法，并且`Popping item`永远不会被记录。

我应该注意到，保存按钮`actionButton`确实正确地调用了它的目标，没有问题。我试过不添加这个按钮，看看这是否会导致后退按钮失败，但没有运气。

我正在使用 ARC 并针对 iOS 6.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T11:35:32.737

[Apple 文档](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html)声明不允许您执行此委托。

> 此外，导航控制器对象会自动将自己指定为其 UINavigationBar 对象的委托，并防止其他对象更改该关系。

一个/那个？做你想做的事的方法是放入你自己的后退按钮。在该方法中，您进行测试并调用

```
[self.navigationController popViewControllerAnimated:true]; 
```

如果允许用户返回。

# git - 如何在子目录中正确提交带有 repos 的 git repo？

> ID：14417762
> 
> 赞同：0
> 
> 时间：2013-01-19T19:02:29.480
> 
> 标签：git, nested

我在一个目录下克隆了几个 github 存储库。现在我想在所有这些存储库之上创建一个存储库。

我怎样才能正确地做到这一点？我应该使用子模块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:45:06.110

简短的回答：是的，您应该使用子模块，因为您已经确定这些部分应该单独发展。

可能最简单的方法是创建一个空文件夹，将“一个目录向上”内容（不在子模块中的任何内容）复制到其中，提交，然后拉入子模块。这是因为很容易意外地提交子模块的代码而不是引用子模块。

# java - 二维数组的空指针异常

> ID：14417763
> 
> 赞同：-2
> 
> 时间：2013-01-19T19:02:33.037
> 
> 标签：java, multidimensional-array, 2d

> **可能重复：**
> [对象类和数组 - 为什么它返回 'null' ？[爪哇]](https://stackoverflow.com/questions/4178358/objects-classes-and-arrays-why-is-it-returning-null-java)

其他标题相似的问题都有答案，我已经完成了他们的数据需要初始化，但我仍然得到一个空指针异常。谁能告诉我为什么？

```
 public class grid{
private Node [][] board = new Node [9][9];

public boolean add(int x, int y, char label) {
    boolean valid=true;

    System.out.println("enter add");
    if(label==' '){
        System.out.println("enter if 1");
        board[x][y].setValue('0');
    }
    else if(label<='9'&&label>'0'){
        System.out.println("enter if 2");
        board[x][y].setValue(label);
    }
    else{
        valid=false;
    }
    if(valid)
        System.out.println("valid");
    return valid;
} 
```

我在 setValue 行（10 和 14）上遇到错误

```
 public class Node{
public char value;
public char []  possibleValues = {1,2,3,4,5,6,7,8,9};
public boolean correct=false;
    } 
```

编辑：我想通了，如果其他人有同样的问题，这似乎可以解决它。

```
 if(label==' '){
        System.out.println("enter if 1");
        board[x][y]= new Node(' ');
    }
    else if(label<='9'&&label>'0'){
        System.out.println("enter if 2");
        board[x][y]= new Node(label);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:05:18.247

数组不会初始化数组的元素。因此，每个`board[x][y]`最初都是`null`.

# node.js - 如何在 npm 模块中引用本地文件？

> ID：14417764
> 
> 赞同：9
> 
> 时间：2013-01-19T19:02:36.623
> 
> 标签：node.js, npm

在使用 django 压缩器对一些客户端组件进行后处理时，我编写了一个简单的 npm 模块来预编译我的车把模板，并发现我需要在 npm 模块中附带一些 js 文件。

目前我只是假设没有人使用全局标志安装它，因为我已经在 npm 模块本身中“硬编码”了这些依赖项的路径

*我的 npm 模块的示例布局*

/
* /bin
* /lib/main.js
* /vendor/ember.js

现在在 main.js 我想使用 ember.js 文件......目前我的硬编码方法看起来像这样

```
var emberjs = fs.readFileSync('node_modules/django-ember-precompile/vendor/ember.js', 'utf8'); 
```

再次 - 这只是因为我假设你将它安装在本地但我想认为 node.js 有一种更合法的方式来获取本地嵌入的文件

任何人都知道我可以如何改进它以使其更加“全球”友好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T04:46:45.027

您可以做的是获取当前文件的目录并使您的文件路径相对于该目录。

```
var path = require('path')
, fs = require('fs');

var vendor = path.join(path.dirname(fs.realpathSync(__filename)), '../vendor');
var emberjs = fs.readFileSync(vendor + '/ember.js', 'utf8'); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T19:53:37.217

Node.js 的一大优势是您可以多快地启动和运行。这种方法的缺点是您被迫适应它所构建的设计模式。

这是一个示例，您的方法与 Nodes 方法有很大不同。Node 期望模块中的所有内容都从模块导出中公开，包括模板。

将 移动`readFileSync`到`django-ember-precompile`模块中，然后通过模块导出来公开返回的值`lib/main.js`。

例子：

```
package.json
    { 
    "name": "django-ember-precompile",
    "main": "lib/main.js"
    }
lib/main.js
    module.exports.ember = readFileSync('vendor/ember.js')
vendor/ember.js 
```

您通过以下方式获取模板

```
var template = require('django-ember-precompile').ember 
```

这个例子可以细化，但核心思想是一样的。

# c++ - “显式”阻止自动类型转换？

> ID：14417765
> 
> 赞同：-3
> 
> 时间：2013-01-19T19:02:39.307
> 
> 标签：c++

> **可能重复：**
> [C++ 中的显式关键字是什么意思？](https://stackoverflow.com/questions/121162/what-does-the-explicit-keyword-in-c-mean)

我不明白以下内容。如果我有：

```
class Stack{
    explicit Stack(int size);
} 
```

如果没有关键字`explicit`，我将被允许这样做：

```
Stack s;
s = 40; 
```

如果没有提供明确的内容，为什么我会被允许执行上述操作？是因为这是堆栈分配（没有构造函数）并且 C++ 允许将任何东西分配给变量，除非`explicit`使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T19:07:34.627

这条线

```
s = 40; 
```

相当于

```
s.operator = (40); 
```

哪个尝试匹配默认值`operator = (const Stack &)`。如果`Stack`构造函数不是显式的，则尝试以下转换并成功：

```
s.operator = (Stack(40)); 
```

如果构造函数是`explicit`，则不尝试此转换并且重载决议失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:57:00.673

嘿它很简单。显式关键字仅阻止编译器将任何数据类型自动转换为用户定义的类型。它通常与具有单个参数的构造函数一起使用。所以在这种情况下，你只是阻止编译器进行显式转换

```
#include iostream
 using namespace std;
class A
{
   private:
     int x;
   public:
     A(int a):x(a)
      {}
}
 int main()
{
A b=10;   // this syntax can work and it will automatically add this 10 inside the 
          // constructor
return 0;
}
but here

class A
{
   private:
     int x;
   public:
    explicit A(int a):x(a)
      {}
}
 int main()
{
A b=10;   // this syntax will not work here and a syntax error
return 0;
} 
```

# php - 使用 Laravel Paginate 时检索表的 ID 列

> ID：14417775
> 
> 赞同：0
> 
> 时间：2013-01-19T19:03:28.277
> 
> 标签：php, laravel

我有以下 Laravel Fluent 查询从博客返回分页结果。我试图`id`在输出中包含来自 Posts 表的列，但`$post->id`在视图中返回分页结果中该帖子的数字键。例如，如果它是第三个帖子，则`$post->id`返回 3，即使表中的 ID 类似于 24。

这是查询 -

```
$posts = DB::table('posts')
    ->join('blog_categories', 'blog_categories.id', '=', 'posts.blog_category_id')
    ->order_by('created_at', 'desc')
    ->paginate(10); 
```

如何在不破坏分页的情况下检索`id`列？`postID`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:19:05.177

帖子和 blog_categories 都有自己的 id 字段，所以它只是默认为第一条记录，通常只是“1”。我会考虑使用 Eloquent ORM 来解决这个问题。

```
http://laravel.com/docs/database/eloquent 
```

然后你可以做这样的事情：

```
$posts = Post::order_by('created_at', 'desc')->paginate(10); 
```

并且从观点来看：

```
@foreach($posts as $post)
    {{ $post->id }}
    {{ $post->blog_cat->.... }}
@endforeach 
```

我不知道您项目的确切要求，但这应该会让您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:12:30.207

这是一个工作版本：

**迁移/数据库**

```
 // Blog Categories
    Schema::create('categories', function($table) {

        $table->engine = 'InnoDB';      
        $table->increments('id');
        $table->string('name', 255);
        $table->timestamps();   

    });

    // Posts
    Schema::create('posts', function($table) {

        $table->engine = 'InnoDB';
        $table->increments('id');
        $table->integer('category_id')->unsigned();
        $table->string('title', 255);
        $table->text('body');
        $table->timestamps();   

        $table->foreign('category_id')->references('id')->on('categories');

    }); 

    // Fake Data
    $category = new Category;
    $category->name = 'Category 1';
    $category->save();

    $category = new Category;
    $category->name = 'Category 2';
    $category->save();      

    $post = new Post;
    $post->title = 'Blog Post 1';
    $post->body = 'Lorem Ipsum';
    $post->category_id = 2;
    $post->save();

    $post = new Post;
    $post->title = 'Blog Post 2';
    $post->body = 'Lorem Ipsum';
    $post->category_id = 1;
    $post->save(); 
```

**后模型**

```
class Post extends Eloquent {
    public function Category()
    {
        return $this->belongs_to('Category','category_id');
    }               
} 
```

**类别模型**

```
class Category extends Eloquent {   
} 
```

**取出数据...**

```
foreach (Post::with('Category')->order_by('created_at', 'desc')->take(10)->get() as $post)
{
    echo $post->title."<br/>";
    echo $post->body."<br/>";
    echo $post->category->name."<br/>";
    echo "<br/>\n\n";
} 
```

# node.js - 如何使用大型数据集填充猫鼬

> ID：14417788
> 
> 赞同：2
> 
> 时间：2013-01-19T19:04:27.720
> 
> 标签：node.js, mongodb, mongoose

我正在尝试使用 Node.js (0.8.18) 和 Mongoose (3.5.4) 将商店目录加载到 MongoDb (2.2.2) 中——所有这些都在 Windows 7 64 位上。该数据集包含大约 12,500 条记录。每个数据记录都是一个 JSON 字符串。

我最近的尝试是这样的：

```
var fs = require('fs');
var odir = process.cwd() + '/file_data/output_data/';
var mongoose = require('mongoose');
var Catalog = require('./models').Catalog;

var conn = mongoose.connect('mongodb://127.0.0.1:27017/sc_store');

exports.main = function(callback){
    var catalogArray = fs.readFileSync(odir + 'pc-out.json','utf8').split('\n');
    var i = 0;

    Catalog.remove({}, function(err){
        while(i < catalogArray.length){
            new Catalog(JSON.parse(catalogArray[i])).save(function(err, doc){
                if(err){
                    console.log(err);
                } else {
                    i++;                    
                }
            });
            if(i === catalogArray.length -1) return callback('database populated');
        }
    });
}; 
```

我在尝试填充数据库时遇到了很多问题。在以前的场景（和这个场景）下，节点与处理器挂钩并最终耗尽内存。请注意，在这种情况下，我试图让 Mongoose 保存一条记录，然后在记录保存后迭代到下一条记录。

但是 Mongoose 保存函数内部的迭代器永远不会增加。此外，它从不抛出任何错误。但是如果我将迭代器 (i) 放在对 Mongoose 的异步调用之外，它会起作用，前提是我尝试加载的记录数不是太大（我已经成功加载了 2,000 条这种方式）。

所以我的问题是：为什么 Mongoose 保存调用中的迭代器没有增加？而且，更重要的是，使用 Mongoose 将大型数据集加载到 MongoDb 的最佳方法是什么？

抢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T19:23:59.483

`i`是您从 in 中提取输入数据的位置的索引`catalogArray`，但您也在尝试使用它来跟踪已保存的数据数量，这是不可能的。尝试像这样单独跟踪它们：

```
var i = 0;
var saved = 0;
Catalog.remove({}, function(err){
    while(i < catalogArray.length){
        new Catalog(JSON.parse(catalogArray[i])).save(function(err, doc){
            saved++;
            if(err){
                console.log(err);
            } else {
                if(saved === catalogArray.length) {
                    return callback('database populated');
                }
            }
        });
        i++;
    }
}); 
```

**更新**

如果您想为流程添加更严格的流程控制，您可以使用`async`模块的[`forEachLimit`](https://github.com/caolan/async#foreachlimitarr-limit-iterator-callback)功能将未完成`save`操作的数量限制为您指定的任何数量。例如，要将其限制为一次未完成`save`的：

```
Catalog.remove({}, function(err){
    async.forEachLimit(catalogArray, 1, function (catalog, cb) {
        new Catalog(JSON.parse(catalog)).save(function (err, doc) {
            if (err) {
                console.log(err);
            }
            cb(err);
        });
    }, function (err) {
        callback('database populated');
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T19:06:52.610

抢，

简短的回答：

您创建了一个无限循环。您正在同步思考和阻塞，Javascript 函数异步且没有阻塞。你想要做的就像试图直接把饥饿感变成三明治一样。你不能。最接近的是你用饥饿的感觉来激励你去厨房做饭。不要试图让 Javascript 阻塞。它行不通。现在，学习 async.forEachLimit。它适用于您想要在这里做的事情。

您可能应该查看异步设计模式并更深入地理解它的含义。回调不仅仅是返回值的替代方案。它们在执行方式和执行时间上有根本的不同。这是一个很好的入门：[http ://cs.brown.edu/courses/csci1680/f12/handouts/async.pdf](http://cs.brown.edu/courses/csci1680/f12/handouts/async.pdf)

长答案：

这里有一个潜在的问题，那就是您对非阻塞 IO 和异步的含义缺乏了解。我不确定您是否正在进入节点开发，或者这只是一个一次性项目，但如果您确实打算继续使用节点（或任何异步语言），那么值得花时间了解同步和异步之间的区别设计模式，以及它们的动机。所以，这就是为什么你有一个逻辑错误，将循环不变增量放在异步回调中，这会创建一个无限循环。

在非计算机科学中，这意味着你对 i 的增量永远不会发生。原因是 Javascript 在调用任何异步回调之前执行单个代码块来完成。因此，在您的代码中，您的循环将一遍又一遍地运行，而我永远不会增加。而且，在后台，您一遍又一遍地将相同的文档存储在 mongo 中。循环的每次迭代都开始向 mongo 发送索引为 0 的文档，直到循环结束，回调才能触发，并且循环外的所有其他代码都运行完成。因此，回调排队。但是，您的循环再次运行，因为 i++ 从未执行（请记住，回调排队直到您的代码完成），再次插入记录 0，在您的循环完成后排队另一个回调以执行。

一般来说，如果不做一些非常糟糕的事情，就没有办法让 Javascript 阻塞。例如，最重要的事情是让你的厨房着火，为我在“简短回答”中谈到的那个三明治煎鸡蛋。

我的建议是利用像 async 这样的库。[https://github.com/caolan/async](https://github.com/caolan/async) JohnnyHK 在这里提到了它，他这样做是正确的。

# php - MySQL Query - 根据当前日期获取记录

> ID：14417792
> 
> 赞同：1
> 
> 时间：2013-01-19T19:04:44.953
> 
> 标签：php, mysql

我正在设置一个 Cron，我想在与当天匹配的记录上执行各种功能

**我的`users`桌子：**

```
Username      registration_date    expiration_date
behz4d        2012-01-19 21:55:44  2013-01-23 11:15:24
test          2012-05-24 17:42:13  2013-04-12 17:23:19
... 
```

现在我想获取他们的用户，`expiration_date`我`TODAY` 只需查询表，将他们`expiration_date`放入数组中，然后将该日期与今天的日期进行比较，例如：

```
$current_date = date("Y-m-d");
$query = mysql_query("SELECT username FROM users");
while($row = mysql_fetch_array($query)){
    $users_array[] = $row['username'] . "->" . substr($row['expiration_date'], 0, 10);// since I don't care about the exact time, I need to get the users who their expiration DAY is today 
}
foreach($users_array $username as $expiration_date){
    if($expiration_date == $current_date)
         $my_target_users[] = $username;
} 
```

但这似乎有点奇怪，我的意思是应该有另一种方法......

反正有什么我可以说的`expiration_date = TODAY`吗？

有人可以帮我解决这个问题吗？提前致谢

* * *

**更新：**

如何让用户的到期日是从今天起 3 天？我想给他们发送一封电子邮件，让他们知道他们的帐户将在 3 天后过期......我应该这样做：

```
... WHERE expiration_date >= CURRENT_DATE AND expiration_date < CURRENT_DATE + INTERVAL 3 DAYS 
```

！？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T19:06:36.153

```
SELECT username FROM users WHERE DATE(expiration_date) = CURRENT_DATE 
```

但是，这需要（n 个低效的）全表扫描。如果你有一个索引`expiration_date`，你应该改用：

```
SELECT username
FROM   users
WHERE  expiration_date >= CURRENT_DATE
   AND expiration_date <  CURRENT_DATE + INTERVAL 1 DAY 
```

# regex - Django RegexField 验证 6 位数字

> ID：14417801
> 
> 赞同：0
> 
> 时间：2013-01-19T19:05:50.637
> 
> 标签：regex, django, django-forms

我有时间验证一个 6 位数字：

```
# forms.py
class TheForm(forms.Form):
    code = forms.RegexField(regex=r'^\d{6}$')

# tests.py
class TheFormTestCase(TestCase):
    def test_the_form(self):
        form = TheForm(initial={'code': '123456'})
        self.assertTrue(form.is_valid(),
            'Form should accept a string of 6 characters '
            'that are digits') 
```

我的测试用例返回无效。有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:20:47.053

初始数据不用于验证。您应该传递`data`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:22:18.870

如[Django 文档中所述](https://docs.djangoproject.com/en/dev/ref/forms/fields/#initial)：

> 如果未给出特定字段的值，则初始值不会用作验证中的“备用”数据。初始值仅用于初始表单显示

你应该使用`data`参数：

```
form = TheForm(data={'code': '123456'}) 
```

# jquery - 如何在内容头内容之前加载主头内容

> ID：14417803
> 
> 赞同：0
> 
> 时间：2013-01-19T19:06:04.860
> 
> 标签：jquery, asp.net, html, head, master

我有这样的东西。。

在母版页上

```
<head runat="server">
    <link href="../StyleSheets/Main_Master.css" rel="stylesheet" type="text/css" />
    <%--<script type="text/javascript" src="../../Scripts/jquery-1.8.3.js"></script>--%>
    <script src="../../Scripts/Mainmenu.js" type="text/javascript"></script>
    <link href="../../Misc/Plugins/OrbitSlider/orbit-1.2.3.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../Misc/Plugins/OrbitSlider/jquery.orbit-1.2.3.min.js"></script>
</head> 
```

内容页

```
<asp:Content ContentPlaceHolderID="LeftBarHeadContent" runat="server">
    <script src="../../Scripts/jquery-1.8.3.js"></script>
    <link href="../StyleSheets/Home_Content.css" rel="stylesheet" type="text/css" />
    <link href="../StyleSheets/Content_Common.css" rel="stylesheet" />
    <script src="../../Scripts/Contents_Common.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.cycle.all.js" type="text/javascript"></script>
</asp:Content> 
```

现在，这在浏览器上呈现

```
<head>
<script src="../../Scripts/jquery-1.8.3.js"></script>
        <link href="../StyleSheets/Home_Content.css" rel="stylesheet" type="text/css" />
        <link href="../StyleSheets/Content_Common.css" rel="stylesheet" />
        <script src="../../Scripts/Contents_Common.js" type="text/javascript"></script>
        <script src="../../Scripts/jquery.cycle.all.js" type="text/javascript"></script>
        <link href="../StyleSheets/Main_Master.css" rel="stylesheet" type="text/css" />
        <%--<script type="text/javascript" src="../../Scripts/jquery-1.8.3.js"></script>--%>
        <script src="../../Scripts/Mainmenu.js" type="text/javascript"></script>
        <link href="../../Misc/Plugins/OrbitSlider/orbit-1.2.3.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="../../Misc/Plugins/OrbitSlider/jquery.orbit-1.2.3.min.js"></script>
    </head> 
```

现在，您可以看到内容元素在主内容之前呈现。我需要先加载主内容，因为如果在插件出现之前不包含 jquery，我的一些插件会抛出未定义的 jquery 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T19:17:23.983

`LeftBarHeadContent`您的母版页在哪里？

您需要在母版页中放置类似`<asp:contentplaceholder id="LeftBarHeadContent" runat="server" />`的内容...`<head>`

# android - 从包名中获取应用程序信息

> ID：14417805
> 
> 赞同：23
> 
> 时间：2013-01-19T19:06:24.617
> 
> 标签：android

我有一个应用程序包名称。有什么方法可以获取此应用程序的图标、名称吗？包名示例：com.example.name

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-19T19:14:43.283

尝试类似：

```
 try {
        ApplicationInfo app = this.getPackageManager().getApplicationInfo("com.example.name", 0);        

        Drawable icon = packageManager.getApplicationIcon(app);
        String name = packageManager.getApplicationLabel(app);
        return icon;
    } catch (NameNotFoundException e) {
        Toast toast = Toast.makeText(this, "error in getting icon", Toast.LENGTH_SHORT);
        toast.show();
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-19T14:30:51.550

```
Drawable icon =getPackageManager().getApplicationIcon("ur_package");

Strign label = context.getPackageManager().getApplicationLabel("ur_package"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-01T21:09:56.267

```
String PackgeNameApp = "com.test.icon";
            String name="NULL";
            try
            {
                ApplicationInfo app = this.getPackageManager().getApplicationInfo(PackgeNameApp, 0);
                Drawable icon = getPackageManager().getApplicationIcon(app);
                 name = getPackageManager().getApplicationLabel(app).toString();

            }
            catch (PackageManager.NameNotFoundException e)
            {
                //
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-19T12:06:50.080

如果您想获取已安装的应用程序包名称，那么此代码将对您有所帮助。

```
 Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
                mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
                List<ResolveInfo> pkgAppsList = MainActivity.this.getPackageManager().queryIntentActivities( mainIntent, 0);
                Log.i("InstalledAPK",pkgAppsList.toString());

              for(int i=0;i<pkgAppsList.size();i++){
                  list.add(pkgAppsList.get(i).toString());
                  Log.e("PACKAGENAME",""+MainActivity.this.getPackageManager().getInstalledPackages(i).get(i).packageName);
              }

                ArrayAdapter<String> adapter=new ArrayAdapter<String>(MainActivity.this,android.R.layout.simple_list_item_1,list);
                listView.setAdapter(adapter); 
```

# concurrency - POSIX 的 read() 和 write() 系统调用是原子的吗？

> ID：14417806
> 
> 赞同：8
> 
> 时间：2013-01-19T19:06:25.987
> 
> 标签：concurrency, posix, b-tree, database-indexes

我正在尝试基于Lehman 和 Yao 在[本文中建议的数据结构（B](http://www.cs.cornell.edu/courses/cs4411/2009sp/blink.pdf)^(链接)树）和算法来实现数据库索引。在第 2 页中，作者指出：

> 磁盘被划分为固定大小的部分（物理页；在本文中，这些对应于树的节点）。**这些是唯一可以被进程读取或写入的单元。**[强调我的]（...）
> 
> (...) 允许进程锁定和解锁磁盘页面。该锁赋予该进程对该页面的独占修改权限；此外，进程*必须*锁定页面才能修改该页面。(...)**锁 *不会*阻止其他进程读取锁定的页面。**[强调我的]

我不完全确定我的解释是否正确（我不习惯阅读学术论文），但我认为可以从强调的句子中得出结论，作者的意思是读取和写入页面的操作被假定为“原子” ，从某种意义上说，如果进程 A 已经开始读取（相应地写入）页面，则另一个进程 B 可能不会开始写入（相应地读取）同一页面，直到 A 完成其读取（相应地写入）操作. 多个进程同时读取同一个页面当然是合法的条件，因为多个进程同时在完全不同的页面上执行任意操作（页面 P 上的进程 A，页面 Q 上的进程 B，页面 R 上的进程 C 等）也是如此。 ）。

1.  我的解释正确吗？

2.  我可以假设 POSIX'`read()`和`write()`系统调用在上述意义上是“原子的”吗？我是否可以依靠这些具有一些内部逻辑的系统调用来根据文件描述符的位置和要读取或写入的块的指定大小来确定是否应该暂时阻止特定`read()`或调用？`write()`

3.  如果上述问题的答案是“否”，我应该如何推出自己的锁定机制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T20:04:12.367

我不相信你引用的文字暗示了任何类似的东西。它甚至没有提到`read()`或`write()`或POSIX。事实上，`read()`并`write()`不能指望它是原子的。POSIX 唯一说的是，`write()`如果写入的大小小于`PIPE_BUF`字节，则它必须是原子的，即使这仅适用于管道。

我没有阅读您引用的论文部分的上下文，但听起来您引用的段落是在说明必须放在实现上的约束，以便算法正常工作。换句话说，它表明该算法的实现需要锁定。

如何进行锁定取决于您（实施者）。如果我们正在处理一个常规文件和多个独立进程，您可以尝试`fcntl(F_SETLKW)`-style 锁定。如果您的数据结构在内存中，并且您正在处理同一进程中的多个线程，那么其他可能是合适的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-07T17:26:08.083

答案：

2.  根据操作系统、文件系统以及您打开文件时使用的标志，并发读取到写入*可能会看到写入损坏。*下面是标志、操作系统和文件系统的快速摘要。

3.  您可以使用 POSIX 上的 fcntl() 或 Windows 上的 LockFile() 来锁定文件中的字节范围，然后再访问它们。

* * *

## 没有 O_DIRECT/FILE_FLAG_NO_BUFFERING：

带有 NTFS 的 Microsoft Windows 10：更新原子性 = 1 字节

带有 ext4 的 Linux 4.2.6：更新原子性 = 1 字节

带有 ZFS 的 FreeBSD 10.2：更新原子性 = 至少 1Mb，可能是无限的 (*)

## O_DIRECT/FILE_FLAG_NO_BUFFERING：

带有 NTFS 的 Microsoft Windows 10：更新原子性 = 仅在页面对齐时最多 4096 字节，否则如果 FILE_FLAG_WRITE_THROUGH 关闭，则为 512 字节，否则为 64 字节。请注意，这种原子性可能是 PCIe DMA 的一个特性，而不是在 (*) 中设计的。

带有 ext4 的 Linux 4.2.6：更新原子性 = 至少 1Mb，可能是无限的 (*)。请注意，带有 ext4 的早期 Linux 肯定不会超过 4096 字节，XFS 肯定曾经有自定义锁定，但看起来最近的 Linux 终于修复了这个问题。

带有 ZFS 的 FreeBSD 10.2：更新原子性 = 至少 1Mb，可能是无限的 (*)

* * *

[您可以在https://github.com/BoostGSoC13/boost.afio/blob/master/fs_probe/fs_probe_results.yaml](https://github.com/BoostGSoC13/boost.afio/blob/master/fs_probe/fs_probe_results.yaml)查看原始经验测试结果。结果是由在所有平台上使用异步文件 i/o 编写的程序生成的。请注意，我们仅在 512 字节倍数上测试撕裂的偏移量，因此我不能说 512 字节扇区的部分更新是否会在读取-修改-写入周期内撕裂。

# linux - awk 不打印分隔符

> ID：14417807
> 
> 赞同：0
> 
> 时间：2013-01-19T19:06:30.773
> 
> 标签：linux, bash, awk

我正在运行这个 awk 程序：

```
awk -F: '{if($1=="waheed") {$2=1;print $0}}' /etc/passwd 
```

输出是：

```
mysql 1 118 129 MySQL Server,,, /nonexistent /bin/false 
```

没有`:`分隔符，如何使它在这种情况下用分隔符打印行？注意：这发生在写表达式之后`$2=1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:41:26.060

您可以像这样直接使用 awk 命令：

```
awk 'BEGIN{OFS=":"} {your code here}' 
```

开始引号中的所有代码只运行一次

-v 选项用于将参数转换为脚本。喜欢：

```
awk '{print $pid_doc}' -v pid_doc="$Param" 
```

这个 $Param 可以从你的 shell 脚本中给出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:12:12.350

在 awk 中，输出由 OFS（输出字段分隔符）变量的内容分隔，默认情况下是空格。这可以用 -v OFS=':' 来设置

```
awk -F : -v OFS=':' '{ cmds}' file 
```

# mootools - el 每个函数中的子级

> ID：14417813
> 
> 赞同：0
> 
> 时间：2013-01-19T19:06:51.333
> 
> 标签：mootools, el, var, css-selectors

我有一个问题。我为这些寻找解决方案。想将 el 与子功能一起使用。但到目前为止没有工作。如果我清除 el 它可以工作，但我最后拥有所有元素类。

**Mootools 脚本**

```
 $$('ul#portfolio li, .ce_id').each(function(el) {  
                    if(!el.hasClass(filterVal)) {  
                        el.fade('out').setStyle('display', 'none').addClass('hidden');

                    } else {  
                      el.setStyle('display', 'block').fade('in').removeClass('hidden');
                      $$(el':nth-last-child((4n+4)').addClass('last');
                    } 
```

希望你们能帮助我。还是不能将 el 或 VAR 与 :nth-last-child 一起使用？

**更新：**但是没有用。

```
 else {  
               el.setStyle('display', 'block').fade('in').removeClass('hidden');
               el.getElements(':nth-last-child(4n+4)').addClass('last');
             } 
```

**更新 2：**

这里是代码所以我希望当我点击打印时，每 4 li 女巫都没有隐藏并且让女巫点击的班级最后获得班级。 [http://jsfiddle.net/6whd9/1/](http://jsfiddle.net/6whd9/1/)

最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:57:54.617

我稍微减少了代码，但你不能只`el`在选择器中。相反，您应该使用`el.getChildren`or `el.getElements`。这是一个例子：

```
$$('#parent > div').each(function(el){
    el.getChildren(':nth-last-child(4n+4)').addClass('last');
}); 
```

这是一个工作示例：http: [//jsfiddle.net/ZxMUh/](http://jsfiddle.net/ZxMUh/)

编辑：从你的问题中很难理解什么有效，什么无效。但是，如果您尝试制作动画，则不能只是将其淡入。您需要先将其隐藏。

```
$$('#parent div.hidden').fade('hide');

$$('#parent > div').each(function (el) {
    el.removeClass('hidden').fade('in');
    el.getChildren(':nth-last-child(4n+4)').addClass('last');
}); 
```

这是示例：http: [//jsfiddle.net/ZxMUh/2/](http://jsfiddle.net/ZxMUh/2/)

编辑（得到小提琴之后）：在我的例子中，我认为你在哪里改变了“li”中的第 n 个孩子。问题是你不能在每个语句中做到这一点。分开做。

这是使用时的小提琴：nth-​​last-child：http: [//jsfiddle.net/6whd9/2/](http://jsfiddle.net/6whd9/2/)

但是，不太可能会做你想做的事，在这种情况下使用 :nth-child 是不可能的。你必须自己做出选择。

```
 var visable = $$('ul#portfolio li:not(.hidden)').reverse();
 visable.each(function (item, index) {
     // same as 4n + 4
     if (index % 4 == 3) {
         item.addClass('last');
     }
 }); 
```

这是一个演示它的小提琴：http: [//jsfiddle.net/6whd9/4/](http://jsfiddle.net/6whd9/4/) （我将最后一个类添加到带有纯红色边框的样式中，因此它是可见的）

我希望我终于明白了你的问题...

# scala - 当我尝试运行此代码时，为什么会出现 java.lang.NoClassDefFoundError？

> ID：14417814
> 
> 赞同：15
> 
> 时间：2013-01-19T19:06:55.110
> 
> 标签：scala, classnotfoundexception

我想映射字符串中的字符，但出现运行时错误。

例子：

```
object Hello {
    def hello(c: Char) {
        print(c)
    }

    def main(args: Array[String]) {
        "Hello World!".map(hello)
    }
} 
```

痕迹：

```
scalac Hello.scala
java Hello
Exception in thread "main" java.lang.NoClassDefFoundError: scala/LowPriorityImplicits
    at Hello.main(Hello.scala)
Caused by: java.lang.ClassNotFoundException: scala.LowPriorityImplicits
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 1 more
make: *** [test] Error 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-01-25T11:46:14.863

我认为您的问题是 scala 库不在您的运行时类路径中。您必须手动手动添加。

如果您使用的是 maven 或 sbt 等工具，则依赖项可能被标记为已提供而不是已编译。

如果您不使用这些工具，请将“scala-library.jar”添加到您的库目录

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-21T13:52:19.580

也看到了这个问题，因为我没有正确版本的 Scala。对于使用 IntelliJ 的用户，您可以在**File** > **Project Structures** > **Global Libraries**下添加/更改 scala SDK ：

[![在此处输入图像描述](../Images/2cd3a70ce9393df9e6bea225f44dd773.png)](https://i.stack.imgur.com/iQZ0m.png)

如果您在命令行中编译和运行项目，请确保您也安装了正确版本的 Scala。例如：

检查安装的 Scala 版本：

```
$ scala -version
Scala code runner version 2.11.8 -- Copyright 2002-2016, LAMP/EPFL 
```

检查**build.sbt**以获得正确版本的 Scala：

```
scalaVersion := "2.11.8" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-29T19:12:41.697

我可以确认修复是验证依赖项。或者更确切地说，我的测试库中包含的内容。

对我来说，我升级了我的 SpringBoot 版本，它改变了我`spring-kafka-test`的实习生版本，其中包括 kafka 2.13.x，它最终包括了 scala 库。

我`mvn dependency:tree`在项目的构建文件中使用并搜索“2.12”以查找旧依赖项的来源。示例依赖树（删除了不相关的依赖）。`org.apache.kafka:kafka_2.11:jar:0.10.0.0`包含在其中的通知，`my.company.riptide.api:ness-logger:jar:1.0.0`但`org.springframework.kafka:spring-kafka-test:jar:2.7.9`包含较新的版本`org.apache.kafka:kafka_2.13:jar:2.7.2`

我的解决方案是从我的 ness-logger 依赖项中排除 kafaka_2.11，如下所示：

```
<dependency>
  <groupId>my.company.riptide.api</groupId>
  <artifactId>ness-logger</artifactId>
  <version>1.0.0</version>
  <exclusions>
    <exclusion>
      <groupId>org.apache.kafka</groupId>
      <artifactId>kafka_2.11</artifactId>
    </exclusion>
  </exclusions>
</dependency> 
```

的截断输出`mvn dependency:tree`：

```
[INFO] +- my.company.riptide.api:ness-logger:jar:1.0.0:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter-validation:jar:2.5.7:compile
[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:9.0.55:compile
[INFO] |  |  \- org.hibernate.validator:hibernate-validator:jar:6.2.0.Final:compile
[INFO] |  |     \- jakarta.validation:jakarta.validation-api:jar:2.0.2:compile
[INFO] |  +- commons-io:commons-io:jar:2.7:compile
[INFO] |  +- my.company.eis:ness-logging-package:jar:4.0.1:compile
[INFO] |  |  +- org.apache.avro:avro:jar:1.8.2:compile
[INFO] |  |  |  +- org.codehaus.jackson:jackson-core-asl:jar:1.9.13:compile
[INFO] |  |  |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.13:compile
[INFO] |  |  |  +- com.thoughtworks.paranamer:paranamer:jar:2.7:compile
[INFO] |  |  |  \- org.tukaani:xz:jar:1.5:compile
[INFO] |  |  +- org.apache.avro:avro-compiler:jar:1.8.2:compile
[INFO] |  |  |  +- org.apache.velocity:velocity:jar:1.7:compile
[INFO] |  |  |  \- joda-time:joda-time:jar:2.7:compile
[INFO] |  |  +- org.apache.kafka:kafka_2.11:jar:0.10.0.0:compile
[INFO] |  |  |  +- com.101tec:zkclient:jar:0.8:compile
[INFO] |  |  |  \- org.scala-lang.modules:scala-parser-combinators_2.11:jar:1.0.4:compile
[INFO] |  |  \- com.netflix.hystrix:hystrix-core:jar:1.5.18:compile
[INFO] |  |     +- com.netflix.archaius:archaius-core:jar:0.4.1:compile
[INFO] |  |     \- io.reactivex:rxjava:jar:1.3.8:compile
[INFO] |  +- org.springframework.boot:spring-boot-loader-tools:jar:2.5.7:compile
[INFO] |  |  \- org.apache.commons:commons-compress:jar:1.21:compile
[INFO] |  \- my.company.riptide.springboot:graceful-shutdown:jar:1.0.2:compile

[INFO] +- org.springframework.kafka:spring-kafka:jar:2.7.9:compile
[INFO] |  +- org.springframework:spring-messaging:jar:5.3.13:compile
[INFO] |  +- org.springframework:spring-tx:jar:5.3.13:compile
[INFO] |  +- org.springframework.retry:spring-retry:jar:1.3.1:compile
[INFO] |  |  \- javax.annotation:javax.annotation-api:jar:1.3.2:compile
[INFO] |  +- org.apache.kafka:kafka-clients:jar:2.7.2:compile
[INFO] |  |  +- com.github.luben:zstd-jni:jar:1.4.5-6:compile
[INFO] |  |  +- org.lz4:lz4-java:jar:1.7.1:compile
[INFO] |  |  \- org.xerial.snappy:snappy-java:jar:1.1.7.7:compile
[INFO] |  \- com.google.code.findbugs:jsr305:jar:3.0.2:compile
[INFO] +- junit:junit:jar:4.13.2:test
[INFO] |  \- org.hamcrest:hamcrest-core:jar:2.2:compile
[INFO] +- io.cucumber:cucumber-spring:jar:7.0.0:test
[INFO] |  \- org.apiguardian:apiguardian-api:jar:1.1.2:test
[INFO] +- io.cucumber:cucumber-core:jar:7.0.0:test
[INFO] |  +- io.cucumber:cucumber-gherkin:jar:7.0.0:test
[INFO] |  +- io.cucumber:cucumber-gherkin-messages:jar:7.0.0:test
[INFO] |  +- io.cucumber:messages:jar:17.1.1:test
[INFO] |  +- io.cucumber:tag-expressions:jar:4.0.2:test
[INFO] |  +- io.cucumber:cucumber-expressions:jar:13.0.1:test
[INFO] |  +- io.cucumber:datatable:jar:7.0.0:test
[INFO] |  +- io.cucumber:cucumber-plugin:jar:7.0.0:test
[INFO] |  +- io.cucumber:docstring:jar:7.0.0:test
[INFO] |  +- io.cucumber:html-formatter:jar:17.0.0:test
[INFO] |  \- io.cucumber:create-meta:jar:6.0.1:test

[INFO] +- org.springframework.kafka:spring-kafka-test:jar:2.7.9:test
[INFO] |  +- org.apache.kafka:kafka-clients:jar:test:2.7.2:test
[INFO] |  +- org.apache.kafka:kafka-streams:jar:2.7.2:test
[INFO] |  |  +- org.apache.kafka:connect-json:jar:2.7.2:test
[INFO] |  |  |  \- org.apache.kafka:connect-api:jar:2.7.2:test
[INFO] |  |  \- org.rocksdb:rocksdbjni:jar:5.18.4:test
[INFO] |  +- org.apache.kafka:kafka-streams-test-utils:jar:2.7.2:test
[INFO] |  +- org.apache.kafka:kafka_2.13:jar:2.7.2:test
[INFO] |  |  +- org.apache.kafka:kafka-raft:jar:2.7.2:test
[INFO] |  |  +- com.fasterxml.jackson.module:jackson-module-scala_2.13:jar:2.12.5:test
[INFO] |  |  +- com.fasterxml.jackson.dataformat:jackson-dataformat-csv:jar:2.12.5:test
[INFO] |  |  +- net.sf.jopt-simple:jopt-simple:jar:5.0.4:compile
[INFO] |  |  +- com.yammer.metrics:metrics-core:jar:2.2.0:compile
[INFO] |  |  +- org.scala-lang.modules:scala-collection-compat_2.13:jar:2.2.0:test
[INFO] |  |  +- org.scala-lang.modules:scala-java8-compat_2.13:jar:0.9.1:test
[INFO] |  |  +- org.scala-lang:scala-library:jar:2.13.3:compile
[INFO] |  |  +- org.scala-lang:scala-reflect:jar:2.13.3:test
[INFO] |  |  +- com.typesafe.scala-logging:scala-logging_2.13:jar:3.9.2:test
[INFO] |  |  +- org.apache.zookeeper:zookeeper:jar:3.5.9:compile
[INFO] |  |  |  +- org.apache.zookeeper:zookeeper-jute:jar:3.5.9:compile
[INFO] |  |  |  +- org.apache.yetus:audience-annotations:jar:0.5.0:compile
[INFO] |  |  |  \- io.netty:netty-transport-native-epoll:jar:4.1.70.Final:compile
[INFO] |  |  \- commons-cli:commons-cli:jar:1.4:test
[INFO] |  +- org.apache.kafka:kafka_2.13:jar:test:2.7.2:test
[INFO] |  \- org.junit.jupiter:junit-jupiter-api:jar:5.7.2:test
[INFO] |     +- org.opentest4j:opentest4j:jar:1.2.0:test
[INFO] |     \- org.junit.platform:junit-platform-commons:jar:1.7.2:test 
```

# ibm-mobilefirst - 用于开发静态网站的 IBM Worklight

> ID：14417816
> 
> 赞同：0
> 
> 时间：2013-01-19T19:07:12.197
> 
> 标签：ibm-mobilefirst

我是 Worklight 的新手，目前正在做概念验证，以了解该平台的功能和优势，以创建移动 Web 应用程序、混合应用程序和本机应用程序。

IBM Worklight 是否也可以用于为多个移动设备开发静态信息网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:56:13.297

即使您想要做的只是将动态内容从您的服务器提供给移动设备，使用 Worklight 也有一些优势，例如，通过将您的网站包装在一个混合外壳中，您可以在应用程序商店（Apple iTunes 和 Google Play ）。

您可以查看“Module 45.1 – Worklight App as a Container For Server Generated Pages” [ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_45_1_-_Worklight_App_as_a_Container_for_Server_Generated_Pages.pdf](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_45_1_-_Worklight_App_as_a_Container_for_Server_Generated_Pages.pdf)了解更多信息怎么做。

如果您不使用静态站点作为内容资源，而是使用 Worklight 应用程序，那么您将有一些优势 1) 可以离线工作 2) 更快的响应时间（无需往返（HTTP 请求）即可获取整个 HTML， CSS，JavaScript，图像）

归根结底，Worklight 应用程序适用于后端和客户端之间的交互以及设备功能（如位置、相机等）的使用，而不仅仅是静态内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:39:52.553

它可以用来创建静态网站吗？是的。这是对软件许可证的良好使用吗？可能不是。Worklight 的功能远不止创建一个静态站点。我建议真正了解响应式网页设计并使用它来创建您的移动友好网站。

# wpf - 如何在不指定新的情况下防止使用全局 DataTemplate

> ID：14417817
> 
> 赞同：0
> 
> 时间：2013-01-19T19:07:21.513
> 
> 标签：wpf, datatemplate, itemscontrol, itemtemplate

```
<DataTemplate DataType="{x:Type MyType}">
    ...
</DataTemplate> 
```

我有一个 MyType 的默认 DataTemplate。想要防止在下面使用它而不必指定真正的 DataTemplate

```
<ItemsControl ItemsSource="{whateverList of MyType}" ItemTemplate="{x:Null}"/> 
```

`ItemTemplate="{x:Null}"`没有完成工作 -> 显示默认 DataTemplate 会对“ToString()”显示感到满意

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:17:12.300

如果要覆盖该类型的默认数据模板，则必须指定一个不同的模板：

```
<ItemsControl ItemsSource="{listOfMyType}">
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <!-- Whatever -->
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

[这里](https://stackoverflow.com/a/4076893/84873)有更多关于这种方法的讨论，包括另一个人尝试使用`{x:Null}`模板。

如果您的模板需要`ToString()`为您的类型绑定到 （并且类型中不存在为您执行此操作的属性），您将需要使用`IValueConverter`，如此[处](https://stackoverflow.com/a/2925799/84873)所述。

# java - Heisenbug：没有系统输出，线程无法运行

> ID：14417822
> 
> 赞同：1
> 
> 时间：2013-01-19T19:07:46.023
> 
> 标签：java, multithreading

我在编写一个简单的游戏时遇到了奇怪的行为。基本上，我创建了一个无限循环的线程，每隔几秒钟在我的游戏中触发一个事件。使用 Sysout(runAnimation) 一切正常。然而，一旦我删除它，甚至停止发生。

似乎 system.out calll 正在影响程序的行为，有没有人知道为什么会发生这种情况

这是循环：

```
private void run(){
            long lastTime = -1;
            while(true){
                int timePerStep = (int) Math.ceil(ANIM_TIME/frequency);
                System.out.println(runAnimation);
                if(runAnimation && System.currentTimeMillis() - lastTime > timePerStep){
                    lastTime = System.currentTimeMillis();
                    controller.step();
                    try {
                        Thread.sleep(timePerStep);
                    } catch (InterruptedException e) {
                        Thread.currentThread().interrupt();
                    }
                }
            }
    } 
```

它是在我的班级建设期间开始的，如下所示：

```
animThread = new Thread(new Runnable() {
            @Override
            public void run() {
                GUIView.this.run();
            }
        });
animThread.start(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T19:10:22.990

`System.out.println()`调用是`synchronized`（大多数方法调用是） ，`PrintWriter`所以我怀疑您的代码内部有一些东西没有同步。我想知道这个`runAnimation`领域。难道是它设置在另一个线程中？也许它需要`volatile`？在一个线程中修改并在另一个线程中读取的任何字段都需要是`synchronized`or `volatile`。阅读有关[同步的 Java 线程教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)可能会有所帮助。

在没有看到更多代码的情况下，很难指出它，但我怀疑这个答案无论如何都会有所帮助。

最后，你*真的*希望你的线程一直*旋转*到`runAnimation`is`true`吗？这是一个非常糟糕的做法。`runAnimation`也许你也应该在循环中睡一段时间`false`。另一个想法是使用一个`CountDownLatch`或其他信号机制来暂停你的线程，直到它需要做动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T09:26:35.260

如果您的字段不是易失性的，JIT 可以假定它不会更改并将其放在寄存器中，甚至可以将其内联到代码中。在这个紧密循环中放置系统调用可以

*   阻止 JIT 以这种方式优化代码，因为它无法假设线程是否修改了字段。
*   减慢循环，使其不会运行 10,000 次（这是 JIT 启动的点）

有关更多详细信息，这是我写的一篇关于[Java 内存模型和优化的文章。](http://vanillajava.blogspot.co.uk/2013/01/java-memory-model-and-optimisation.html)

# c# - 使用 Visual Studio 事后调试 C# 应用程序

> ID：14417824
> 
> 赞同：2
> 
> 时间：2013-01-19T19:07:53.677
> 
> 标签：c#, visual-studio-2010, visual-studio, windbg, postmortem-debugging

我正在努力调试`.dmp`包含 .NET 代码 (C#) 的文件，它还包含调用本机代码的托管 C++

该`.dmp`文件是“完整转储”

如果我`.pdb`使用 SOS 在 WinDBG 中加载，生活会很好 - 但是如果我加载到 Visual Studio 2010 中，我无法获得 CLR 堆栈？感觉 VS 没有将应用识别为托管应用

有诀窍吗？我应该改用windbg吗（我真的更喜欢VS）

VS2012性能更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:11:55.310

试试这个链接，但我更喜欢使用带有源路径的 Windbg [http://msdn.microsoft.com/en-us/library/windows/hardware/ff551063%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551063%28v=vs.85%29.aspx)

# file - 批量回收站脚本

> ID：14417825
> 
> 赞同：1
> 
> 时间：2013-01-19T19:08:04.720
> 
> 标签：file, input, batch-file

我在 Windows Server 2008 R2 上。

我的脚本验证我输入的文件是否存在，然后验证我要移动的文件在`recycleBin.dir`. 还可以选择是否覆盖文件；如果您选择“是”，则脚本会移动它们。

我的问题是我需要能够输入多个文件，而不仅仅是一个。

我做了什么：

```
@echo off
set param = "%*"
set corb_path=c:\corbeille.dir
set rep_courant = %cd%
:debut
if "%*" == "" goto error
goto path
goto end
:path
cd %corb_path%|| del %corb_path%
if not exist %corb_path%/nul mkdir %corb_path%
cd c:\
if exist %rep_courant%%* goto something 
  ) else ( 
goto end )
:something
if exist %corb_path%\"%*" goto choice
 ) else ( 
 goto 1 )
:choice 
choice /t 10 /d n /c on /cs /m "fichier "(%*)" file exist in corbeille.dir"
if errorlevel 2 goto 2
if errorlevel 1 goto 1 
:1
move %* %corb_path%
shift
goto debut 
:2
echo the file has beed deleted
goto end
:error
echo "You need to input something"
:end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:38:28.703

您希望您的脚本处理作为命令行参数传入的每个文件吗？

根据我对蝙蝠的观察，您需要更改几行。主要问题是使用`%*`. 这将一次提取所有参数，而不是一次提取一个。你会想要使用`%1`.

更改第 6 行：

```
if "%1" == "" goto error 
```

更改第 13 行：

```
if exist %rep_courant%%1 goto something 
```

更改第 17 行：

```
if exist %corb_path%\"%1" goto choice 
```

更改第 21 行：

```
choice /t 10 /d n /c on /cs /m "fichier "(%1)" file exist in corbeille.dir" 
```

更改第 25 行：

```
move %1 %corb_path% 
```

`%1`由于该命令，将始终具有下一项`shift`。

我稍后可能会在更新的答案中解决关于字符串、引号和空格的其他一些更改，但上面的更改应该可以满足您的要求。

顺便说一句：第 2 行和第 8 行在脚本中没有做任何有用的事情。它们可以被移除。

# javascript - 如何使用 jQuery UI 对话框将关闭按钮与打开按钮绑定？

> ID：14417829
> 
> 赞同：0
> 
> 时间：2013-01-19T19:08:30.080
> 
> 标签：javascript, jquery-ui, dialog, bind

我正在尝试使用 5 个 jQuery 对话框模式创建类似向导的体验。我想从第一个打开第二个但关闭第一个的新模态。第三、第四、第五也是一样。

我可以很好地打开嵌套在其他模态中的模态，但是当下一个打开时，前一个不会关闭。最后，我打开了 5 个窗口。

这是我用来打开 5 个模态中的两个的代码（其余的将使用相同的逻辑按顺序排列：

```
<script>
  $(function() {
   $( "#modal_1" ).dialog({position:['middle',60],
        open: function(event, ui) {  
        dialogClass: 'ui-widget-shadow',
        modal: true,    
        autoOpen: false,
        width: '950px',
        close: function(ev, ui) {$(this).close();}
        });

    $( ".modal_1open" ).click(function() {
      $( "#modal_1" ).dialog( "open" );
        return false;
        });

    $( ".btnNext" ).click(function(){
      $('.ui-dialog-content').dialog( "close" );
        })
    });
</script>
<script>
  $(function() {
   $( "#modal_2" ).dialog({position:['middle',60],
        open: function(event, ui) {  
        dialogClass: 'ui-widget-shadow',
        modal: true,    
        autoOpen: false,
        width: '950px',
        close: function(ev, ui) {$(this).close();}
        });

    $( ".modal_2open" ).click(function() {
      $( "#modal_2" ).dialog( "open" );
        return false;
        });

    $( ".btnNext" ).click(function(){
      $('.ui-dialog-content').dialog( "close" );
        })
    });
</script> 
```

这是一个html示例：

```
<a class="button btnNext">Continue</a> <!--this is the button inside the modal that is supposed to fire the next modal-->

<div style="display:none" id="modal_1" title="Login">
  <!--#include file="modal_1.asp"-->
</div>
<div style="display:none;" id="modal_2" title="Page Two Title">
  <!--#include file="modal_2.asp"-->
</div> 
```

我想我可以将关闭功能与下一个打开绑定，但我不知道如何。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T01:22:19.083

我节食您的代码以提供线索并进行了一些测试。IMO 你错过了分配的选项。close：用于事件处理程序，而不是按钮。使用按钮字段定义按钮。当单击关闭对话框并打开下一个...

```
 $(this).dialog("close");
 $("#modal_2").dialog("open"); 
```

我的简单版本如下：

```
$(function() {
$("#modal_1").dialog({
    modal: true,
    autoOpen: true,
    buttons: [{text: "Next",click: function() {
                $(this).dialog("close");
                $("#modal_2").dialog("open");
            }
        }]
});

$("#modal_2").dialog({
    modal: true,
    autoOpen: false,
    buttons: [{text: "Next",click: function() {
                $(this).dialog("close");
                $("#modal_1").dialog("open");
            }}]
});
}); 
```

我在这里测试过：http: [//jsfiddle.net/JmgKS/8/](http://jsfiddle.net/JmgKS/8/)

# asp.net-mvc - 如何将 jQuery 不显眼的验证应用于 DropDownList 编辑器模板？

> ID：14417831
> 
> 赞同：0
> 
> 时间：2013-01-19T19:08:44.150
> 
> 标签：asp.net-mvc, asp.net-mvc-4, jquery-validate, unobtrusive-validation

太多人告诉我申请该`required`课程以使该领域成为必填项。我不想要好的 ol'`required`属性；我想要新的属性集进行验证。这是我尝试过但没有成功的方法：

这是我的编辑器模板：

```
@using Comair.RI.UI.Core
@{
    var list = this.GetModelSelectList();
    var listWithSelected = new SelectList(list.Items, list.DataValueField, list.DataTextField, Model);
}
@if (ViewData.ModelMetadata.IsRequired)
{
    //var att = "data-val-required=\"string.Format("The {0} field is required", ViewData.ModelMetadata.DisplayName)
    var att = string.Format("The {0} field is required.", ViewData.ModelMetadata.DisplayName);
    @Html.DropDownListFor(m => Model, listWithSelected, " - select - ", 
    new Dictionary<string, object> {{"data-val-number=", "The field " + ViewData.ModelMetadata.DisplayName + " must be a number."}, {"data-val", true}, {"data-val-required", att}})
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:04:57.253

只需使用所需的验证属性装饰相应的视图模型属性。例如：

```
public class Core
{
    [Required]
    public int? Id { get; set; }
} 
```

接着：

```
@using Comair.RI.UI.Core
@{
    var list = this.GetModelSelectList();
    var listWithSelected = new SelectList(list.Items, list.DataValueField, list.DataTextField, Model);
}
@if (ViewData.ModelMetadata.IsRequired)
{
    @Html.DropDownListFor(m => m.Id, listWithSelected, " - select - ")
} 
```

另请注意，您传递给`DropDownListFor`帮助程序的第一个参数必须表示指向简单标量属性类型（例如整数或字符串）的 lambda 表达式。这就是为什么在我的示例中，我已经说明了如何将 Required 属性应用于视图模型上的相应 Id 属性，然后简单地将 DropDownList 绑定到它。然后，助手将注意生成所有必要的属性，以使不显眼的验证正常工作。在您的示例中，您将下拉列表绑定到`m => Model`首先是不正确的 lambda 表达式的模型，因为您正在`Model`从外部捕获值，更糟糕的是，它是一种与帮助程序不太兼容的复杂类型。

你应该注意一件事。如果此模板未在表单 (`Html.BeginForm`或`Ajax.BeginForm`) 中调用，则助手将不会发出客户端验证属性，例如`data-required`等等。如果不存在，您可以通过实例化 FormContext 来解决此问题：

```
@if (ViewContext.FormContext == null)
{
    ViewContext.FormContext = new FormContext();
}
@Html.DropDownListFor(m => m.Id, listWithSelected, " - select - ") 
```

这将确保助手始终发出验证属性。

# javascript - JavaScript 布尔值作为值返回，而不是引用

> ID：14417832
> 
> 赞同：0
> 
> 时间：2013-01-19T19:08:49.433
> 
> 标签：javascript, pass-by-reference

我正在尝试将我的一个中型 JavaScript API 从“大量全局变量和函数”转换为更类似于 jQuery 和其他经过深思熟虑的 JavaScript 库中使用的命名空间封装的东西。为了实现这一点，我使用了匿名函数。

这是代码的片段：

```
(function(window, undefined) {
    var MyLib = (function() {
        var AbortProgram = true;
        function DisplayAbortProgram() { alert('AbortProgram inside=' + AbortProgram); }
        return { AbortProgram: AbortProgram, DisplayAbortProgram: DisplayAbortProgram }
    } ())
    window.MyLib = MyLib;
})(window);

MyLib.AbortProgram = false;
alert('AbortProgram outside=' + MyLib.AbortProgram);
MyLib.DisplayAbortProgram(); 
```

运行时，AbortProgram 的外部值为 false，但内部值为 true。这篇文章是为了确认发生这种情况的原因？我相信这是因为 return 语句返回的是 DisplayAbortProgram 的值，而不是对它的引用。根本原因是 JavaScript 返回原始类型的值而不是引用 - 对象是通过引用传递的。

我已经阅读了这一点，并相信没有办法返回对该布尔变量的引用，因此我必须实现一个名为 SetAbortProgram(value) 的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:12:12.693

您是正确的，它是按值传递而不是引用。创建一个参数对象。这将通过引用传递：

```
 var args = { AbortProgram: true }; 
```

绕过`args`而不是`AbortProgram`. 您可以通过访问您的布尔值`args.AbortProgram`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T19:13:42.207

`AbortProgram`被关闭隐藏，你不能改变它。这通常是您使用的模式的目标。

您所做`MyLib.AbortProgram = false;`的不是更改现有的隐藏变量，而是添加一个新`AbortProgram`变量。

如果您想`AbortProgram`修改，请将您的代码简化为

```
var MyLib = {
        AbortProgram: true,
        DisplayAbortProgram: function DisplayAbortProgram() { alert('AbortProgram inside=' + this.AbortProgram); }
};

MyLib.AbortProgram = false;
MyLib.DisplayAbortProgram(); 
```

或者在现有代码中添加一个 setter：

```
(function(window, undefined) {
    var MyLib = (function() {
        var AbortProgram = true;
        function DisplayAbortProgram() { alert('AbortProgram inside=' + AbortProgram); }
        function setAbortProgram(v) {AbortProgram=v}
        return { AbortProgram: AbortProgram, DisplayAbortProgram: DisplayAbortProgram, setAbortProgram:setAbortProgram}
    } ())
    window.MyLib = MyLib;
})(window);

MyLib.setAbortProgram(false);
alert('AbortProgram outside=' + MyLib.AbortProgram);
MyLib.DisplayAbortProgram(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T19:14:15.967

> 根本原因是 JavaScript 返回某些原始类型的值而不是引用。

不只是一些。所有原始类型都将作为值传递。只有对象是对其属性的引用。

> 我已经阅读了这一点，并相信没有办法返回对该布尔变量的引用，因此我必须实现一个名为 SetAbortProgram(value) 的函数。

是的，如果你想改变变量。然而，你可以在任何地方使用你的对象的属性。

# grails - Grails 服务注入集成测试

> ID：14417833
> 
> 赞同：0
> 
> 时间：2013-01-19T19:08:52.553
> 
> 标签：grails, service

我有一个非常简单的 Grails 服务：

```
class UserService {
    def returnHi() { return "Hi" }    
} 
```

我正在尝试在集成测试中访问该服务，如下所示：

```
def testService() {
  UserService userService
  assertEquals( "Hi", userService.returnHi() )
} 
```

为什么我会失败：java.lang.NullPointerException：无法在 null 对象上调用方法 returnHi()？

谢谢你的时间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T21:26:28.220

将“def userService”作为您的类字段而不是放在方法内部就足够了。在集成测试中，bean 的注入与控制器、服务和其他 bean 中的相同。

执行以下操作：

```
class MyTests {
    def userService

    void serviceTest(){
        assert userService.returnHi(), 'Hi'
    }        
} 
```

*PS 确保服务名称正确且以驼峰形式书写。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:22:38.250

将以下行添加到集成测试文件中：

```
import org.codehaus.groovy.grails.commons.ApplicationHolder as AH
def userService = AH.application.mainContext.userService 
```

如此处所述：[Service is not getting injection into Grails domain class , Grails 2.0.0 and 2.0.3](https://stackoverflow.com/questions/10321059/service-is-not-getting-injected-into-grails-domain-class-grails-2-0-0-and-2-0)

# mysql - MySql 字符到日期格式转换返回 null

> ID：14417834
> 
> 赞同：2
> 
> 时间：2013-01-19T19:08:57.137
> 
> 标签：mysql, sql, date, select

我有一个 char 字段，其中的日期为**'26-Nov-2011'** 我希望以**YYYY-MM-DD**格式打印此日期。

我使用了以下日期转换，这是不允许的。

```
select date_format('26-Nov-2011','%d-%b-%y') 
```

> 返回空值。

我知道 date_format 函数可以接受 YYYY-DD-MM 格式的日期，但
请告诉我如何将字符转换为所需的日期格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:34:13.943

试试这个：

```
SELECT STR_TO_DATE('26-Nov-2011', '%d-%b-%Y') dte; 
```

输出：

```
2011-11-26 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:12:40.600

```
You can use STR_TO_DATE() to convert your strings to MySQL date values and ORDER BY the result

STR_TO_DATE(datestring, '%d/%m/%Y') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T19:29:52.657

[STR_TO_DATE](http://www.w3resource.com/mysql/date-and-time-functions/mysql-str_to_date-function.php)可以与这种格式一起使用`'%d-%M-%Y'`，它将匹配您当前日期字符串的格式。否则它将返回`null`。还要检查[日期格式](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)。

```
select str_to_Date('26-Nov-2011','%d-%M-%Y')
from table1
; 
```

输出：

```
| STR_TO_DATE('26-NOV-2011','%D-%M-%Y') |
-----------------------------------------
|       November, 26 2011 00:00:00+0000 | 
```

*   ## [SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/9403a/1)

# android - 平板电脑有语音搜索功能，但代码显示没有语音识别功能

> ID：14417835
> 
> 赞同：-1
> 
> 时间：2013-01-19T19:09:07.147
> 
> 标签：android

我在清单中添加了 Internet 权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

我运行这是我的 onCreate：

```
 PackageManager pm = getPackageManager();
    List<ResolveInfo> activities = pm.queryIntentActivities(
            new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
    CanRecog=0;
    if (activities.size() != 0)
    {
        CanRecog=1;
    } 
```

但是，当代码运行时，它报告没有能力（CanRecog=0）。我还需要做什么才能使用代码中的语音识别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:59:57.300

我试过你的代码，它工作正常。但是当我删除应用程序“语音搜索”时，它返回了一个“0”值。

你安装了谷歌提供的这个应用程序吗？ [https://play.google.com/store/apps/details?id=com.google.android.voicesearch&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5nb29nbGUuYW5kcm9pZC52b2ljZXNlYXJjaCJd](https://play.google.com/store/apps/details?id=com.google.android.voicesearch&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5nb29nbGUuYW5kcm9pZC52b2ljZXNlYXJjaCJd)

# mysql - 客户端数据存储的可能架构

> ID：14417836
> 
> 赞同：1
> 
> 时间：2013-01-19T19:09:10.490
> 
> 标签：mysql, mongodb, data-mapping, database

我们是一家 SaaS 公司，从他们选择的存储解决方案中提取客户客户数据，并在我们的服务器上处理数据，让客户登录以查看具有我们增值功能的客户数据。

**多个客户**

当我们通过各种 API 和源进行拉取时，我们将数据的本地副本存储在我们的 MySQL 服务器上。我们当前（公认有缺陷）的架构是将检索到的数据存储在各个客户端表中，这些表除了名称之外的所有内容都相同。这是 a) 意外增长的结果，b) 最初尝试完全隔离客户数据，以便一个客户从共享客户表中看到另一个客户的数据的可能性正好为 0%（我们的客户通常是竞争对手）。所以我们有：

```
table client_ABC
 - field A
 - field B
 - ...
 - field N

table client_XYZ
 - field A
 - field B
 - ...
 - field N 
```

随着我们的扩展，上面的内容可以预见地落在了它的脸上——我们正在添加几十个相同的客户端表，对模式的任何更改都是一场噩梦。我倾向于将数据组合到一个表中并添加一个“客户”列，但这个问题的第二部分可能会使事情复杂化......

**不一致/唯一的客户数据**

我们的第二个问题是，我们提取的数据在客户端之间几乎没有共同点。每个客户的数据都有一些共同的元素（姓名、电子邮件），但其余的数据是不同的，因为一些客户的数据有关联的地址信息，一些有详细的购买记录等。

我们当前的解决方案是让我们的客户表在每个上方都包含许多通用的“元”字段，然后我们逐个客户映射这些字段，这样当我们的业务逻辑显示客户 ABC 的客户时，我们就有：

```
customer ABC
 - name -> name
 - email -> email
 - street -> meta_1
 - city -> meta_2 
```

对于客户 XYZ，我们可能有：

```
customer XYZ
 - name -> name
 - email -> email
 - last purchase -> meta_1 
```

当我们添加客户时，我们发现那些客户数据不完整（即完整的销售记录），上述解决方案失败了，因为我们现在需要添加自定义的二级客户表来存储额外的数据。

请记住，所有这些都通过共享代码/业务逻辑向所有客户端公开。

一种想法是将单个客户数据存储在一个二级结构中，比如 JSON，在一个通用的“数据列”中，这样​​我们就有了类似的东西：

```
table client
 - name = "Bill Smith"
 - email = "bsmith@example.com"
 - data = { "street": "123 Fake St", "city": "Big City"} 
```

这里的问题是我们如何进行全文搜索、索引等。

任何有关如何开始解决这两个相关问题的建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:45:08.390

根据[jsoft](https://stackoverflow.com/users/1036143/jsoft)的建议，我们将使用 Mongo - 满足我们可变客户端架构要求的完美解决方案。

使用 Mongo 的一些原因包括：

*   [没有强制文档结构的灵活模式](http://docs.mongodb.org/manual/core/data-modeling/)；
*   [灵活的数据版本控制](https://stackoverflow.com/questions/4185105/ways-to-implement-data-versioning-in-mongodb)

# java - 在java中的arraylist中通过特定字段查找对象的出现次数最多

> ID：14417841
> 
> 赞同：3
> 
> 时间：2013-01-19T19:09:54.620
> 
> 标签：java, algorithm

我有一个对象数组列表，其中包含有关对特定目标号码的呼叫的信息。我一直在尝试找出搜索此列表并返回出现次数最多的数字以及这些出现次数的最佳方法（从链接类中的另一个方法调用）。

例如：

我有这种方法，它通过调用地址簿中的随机数将调用添加到列表中

```
public void makeCall(Phonecall call)
    {
     call = new Phonecall();
     call.setDestination(anyNumber());
     call.setDuration(0 + (int)(Math.random() * (((balance/25) * 60) - 0) + 1));
     double cost = (call.getDuration()/60 * 25);
     balance = getBalance() - cost;
     updateCallHistory(call);
    } 
```

然后我需要能够搜索它正在更新的arraylist callHistory 并找到被调用次数最多的目的地并返回该数字和计数。

然后我将为一个人拥有的每个“电话”调用这些值，并打印所有“电话”中计数最高的目的地以及它的计数。

我一直在环顾四周，找到了有关查找特定对象出现的信息，但无法弄清楚如何检查该对象中的特定字段而不是对象本身。

抱歉，如果这听起来令人费解，但我很困惑并且已经没有想法了，我的哈希映射还不是很强大，我无法调整我找到的示例来做我想做的事。

根据下面的评论，我有

```
public void mostCalled(String[] args) 
    {
        Map<Phonecall,Integer> map = new HashMap<Phonecall, Integer>();  
        for(int i=0;i<callHistory.size();i++){              
            Integer count = map.get(callHistory.get(i));         
            map.put(callHistory.get(i), count==null?1:count+1);  
        }  
        System.out.println(map);
    } 
```

但我不知道如何使用 Phonecall 的目标字段而不是对象本身。

这样的事情会更合适吗：

```
public void mostCalled(String[] args) 
    {
        Map<String,Integer> map = new HashMap<String, Integer>();  
        for(Phonecall call : callHistory)
        {
            Integer count = map.get(call.destination);         
            map.put(call.destination, count==null?1:count+1);  
        }  
        System.out.println(map);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:14:33.463

一种解决方案是声明 a `Map<String, Integer> phoneCount`，它将电话号码作为键，并将对该号码的呼叫次数作为值。

`ArrayList`然后，您将遍历`PhoneCall`对象并构建地图。具有最大价值的记录是您正在寻找的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:55:43.807

对于其他想要这样做的人，这就是我最终得到的。

```
public void mostCalled() 
    {
        Map<String,Integer> map = new HashMap<String, Integer>();  
        for(Phonecall call : callHistory)
        {
            Integer count = map.get(call.destination);         
            map.put(call.destination, count==null?1:count+1);  
        }  
        List<String> maxKeyList=new ArrayList<String>();
        Integer maxValue = Integer.MIN_VALUE; 
        for(Map.Entry<String,Integer> entry : map.entrySet()) 
        {
             if(entry.getValue() > maxValue) 
             {
                 maxValue = entry.getValue();
                 maxKeyList.add(entry.getKey());
             }
        }
        System.out.println("Phone numbers called the most : "+maxKeyList);
    } 
```

# database - 我找不到我的 ObjectDB odb 文件

> ID：14417842
> 
> 赞同：2
> 
> 时间：2013-01-19T19:09:55.943
> 
> 标签：database, spring, web-applications, object-oriented-database, objectdb

我最近完成了这个教程，

```
http://www.objectdb.com/tutorial/jpa/eclipse/spring/run 
```

它说 .odb 文件是在 Tomcat 目录下创建的，但我找不到 Tomcat 目录。我在我的 Mac OSX 机器上进行了搜索，但找不到任何 .odb 文件。我搜索了我的项目，但找不到它。我前一阵子下载了Tomcat，然后搜索了eclipse指向的文件夹。它必须存在于某个地方，因为当我在 eclipse 中停止 tomcat 服务器并重新启动它时，数据会返回并持续存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T07:48:24.507

您可以在[步骤 2](http://www.objectdb.com/tutorial/jpa/eclipse/spring/entity)中指定首选 ObjectDB 数据库文件路径的完整路径。

编辑文件`javax.persistence.jdbc.url`中的属性`persistence.xml`。

您机器上具有适当权限的任何路径都是有效值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T09:54:55.057

尽管我正在使用 jetty:run (Ubuntu/Eclipse/Spring) 运行本教程，但我在不知道 .odb 文件在哪里时遇到了类似的问题。经过一番寻找，我发现它是在本地 maven repo 中创建的：

```
$ locate *.odb
~/.m2/db/guests.odb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T10:16:38.523

我在应用程序本身的 WEB-INF/db 文件夹中找到了它。

# python - 为什么redis-py的bgsave()命令执行成功后返回False？

> ID：14417846
> 
> 赞同：1
> 
> 时间：2013-01-19T19:10:23.423
> 
> 标签：python, redis

当我触发 redis-py 的`bgsave()`命令时，返回值为`False`，但我很确定执行成功，因为我检查了`lastsave()`.

但是，如果我使用`save()`返回值将`True`在成功执行之后。

谁能解释一下是什么`False`意思`bgsave()`？不确定它是否与`bgsave()`在后台执行有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:05:26.817

感谢 Pavel Anossov，在阅读了 client.py 的代码后，我发现来自 2 个命令（BGSAVE 和 BGREWRITEAOF）的响应没有从字节转换为 str，这导致了 Python 3 中的问题。

要解决此问题，只需将这两个命令更改`lambda r: r ==`为.`lambda r: nativestr(r) ==``RESPONSE_CALLBACKS`

# android - 使用 POST 方法上传 Android 文件

> ID：14417849
> 
> 赞同：2
> 
> 时间：2013-01-19T19:10:35.493
> 
> 标签：android

我如何编写一个使用 POST 方法上传到 PHP 服务器的简单 Android 文件

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T19:24:40.163

请下载[HttpComponents](http://hc.apache.org/downloads.cgi)并将其添加到您的 Android 项目中。如果要使用 POST 方法上传文件，则必须使用 Multipart。

```
 private DefaultHttpClient mHttpClient;

    public ServerCommunication() {
        HttpParams params = new BasicHttpParams();
        params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
        mHttpClient = new DefaultHttpClient(params);
    }

    public void uploadUserPhoto(File image) {

        try {

            HttpPost httppost = new HttpPost("some url");

            MultipartEntity multipartEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);  
            multipartEntity.addPart("Title", new StringBody("Title"));
            multipartEntity.addPart("Nick", new StringBody("Nick"));
            multipartEntity.addPart("Email", new StringBody("Email"));
            multipartEntity.addPart("Description", new StringBody(Settings.SHARE.TEXT));
            multipartEntity.addPart("Image", new FileBody(image));
            httppost.setEntity(multipartEntity);

            mHttpClient.execute(httppost, new PhotoUploadResponseHandler());

        } catch (Exception e) {
            Log.e(ServerCommunication.class.getName(), e.getLocalizedMessage(), e);
        }
    }

    private class PhotoUploadResponseHandler implements ResponseHandler {

        @Override
        public Object handleResponse(HttpResponse response)
                throws ClientProtocolException, IOException {

            HttpEntity r_entity = response.getEntity();
            String responseString = EntityUtils.toString(r_entity);
            Log.d("UPLOAD", responseString);

            return null;
        }

    } 
```

来源：[使用 Android SDK 发布多部分请求](https://stackoverflow.com/questions/2017414/post-multipart-request-with-android-sdk)

另请阅读[本](http://gargidas.blogspot.nl/2012/01/hello-all-as-promised-in-one-of.html)教程以获取 AsyncTask 示例。AsyncTask 编码有点困难，但如果您不使用它，您的应用程序将在主线程中上传文件。您的应用程序将在上传文件时冻结，如果超过 5 秒 Android 会说您的应用程序没有响应。如果您使用 AsyncTask 下载/上传文件，Android 会创建一个新线程并且您的应用程序不会冻结。

请注意，如果您使用多个 AsyncTasks，Android 将同时执行一个 AsyncTasks，您不能同时运行多个 AsyncTasks，但在大多数情况下您不必这样做。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-19T19:38:03.617

```
URL url = new URL("your url destination");
HttpURLConnection httpconn = (HttpURLConnection)url.openConnection();
httpconn.setRequestMethod("POST"); 
```

# php - 我无法在模型上查询数据库

> ID：14417851
> 
> 赞同：0
> 
> 时间：2013-01-19T19:10:37.857
> 
> 标签：php, mysql, codeigniter

我尝试查询模型，但它给出了错误。如果我将查询放在控制器中，它工作正常。这是我的控制器（Home.php）：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Home extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        $this->load->helper('form');
        $this->load->helper('asset');
        $this->load->database();
        $this->load->library('table');
    }

    public function index()
    {   
        $this->load->model('News');
        $resultNews = $this->News->queryNews();
        $data['resultNews'] = $resultNews;
        $this->load->view('front/index',$data);

    }
}

/* End of file welcome.php */
/* Location: ./application/controllers/welcome.php */ 
```

这是我的模型（News.php）：

```
<?php
if( !defined('BASEPATH')) exit('No direct script access allowed');
class News extends CI_Model {

    function __construct(){
        parent::__construct();
        $this->load->database();
    }

    function queryNews(){
        $this->db->query("SELECT * FROM  `news` WHERE news_show_date >= CURDATE() ORDER BY news_show_date DESC LIMIT 0 , 2");
        $query = $this->db->get();
        return  $query;

    }   
}

/* End of file welcome.php */
/* Location: ./application/controllers/welcome.php */
?> 
```

然后它吐出一个错误：

```
A Database Error Occurred
Error Number: 1096
No tables used
SELECT *
Filename: C:\AppServ\www\hijet\system\database\DB_driver.php
Line Number: 330 
```

我是否在做错事而我错过了它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T19:13:44.427

`$this->db->query`足够的。你应该删除`$query = $this->db->get();` 所以代码将变为

```
 function queryNews(){
    $query = $this->db->query("SELECT * FROM  `news` WHERE news_show_date >= CURDATE() ORDER BY news_show_date DESC LIMIT 0 , 2");
    return  $query;

} 
```

编辑：如果你想得到你应该使用`$query->result()`返回对象数组或`$query->result_array()`返回数组的结果。更多信息在这里 - [http://ellislab.com/codeigniter/user-guide/database/results.html](http://ellislab.com/codeigniter/user-guide/database/results.html)

# php - PHP 错误：30711 没有说明问题是什么

> ID：14417857
> 
> 赞同：-2
> 
> 时间：2013-01-19T19:11:56.677
> 
> 标签：php, email

我`PHP Error : 30711`对问题所在没有任何解释。

如何查看错误消息？通常会显示错误消息，但不是为此。我正在尝试使用`mail()`发送电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:55:49.843

在 PHP 中（至少在 PHP 3.5 中），数字 30711 是`E_ALL`错误代码的幻数。

PHP 没有理由输出这个数字，或者你不需要知道它。

我的猜测是您的`error_reporting`设置是`E_ALL`，并且您正在运行的程序有一行如下所示：

```
print "PHP Error: ".error_reporting(); 
```

换句话说，这是程序员故意放在那里的一条消息，告诉他们错误设置是什么。可能它在代码的调试部分？我不知道。

鉴于此，我相当确定该`mail()`功能与问题无关。

# ios - 我无法使用“圆形矩形按钮”或标签等对象正确滚动滚动视图

> ID：14417858
> 
> 赞同：0
> 
> 时间：2013-01-19T19:11:58.730
> 
> 标签：ios, xcode, uiscrollview

当我在界面构建器的滚动视图上没有任何对象时，它滚动得很好，但是一旦我开始向视图添加按钮或标签，它只会向下滚动大约 50 个额外像素。任何人都知道为什么会发生这种情况或如何解决它？这是我的卷轴的代码。我使用 xcode 4.5.2

```
@interface ViewController : UIViewController{

IBOutlet UIScrollView *scrollview;

}

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];

[scrollview setScrollEnabled:YES];
[scrollview setContentSize:CGSizeMake(320, 1200)];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:47:44.360

尝试将您的代码移动到 viewDidAppear: 而不是 viewDidLoad:。当视图加载到内存中时，View did load 被调用，但可能还没有在视图层次结构中。

这应该会更好：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    [scrollview setScrollEnabled:YES];
    [scrollview setContentSize:CGSizeMake(320, 1200)];
} 
```

# php - Ajax 之后的 Javascript

> ID：14417862
> 
> 赞同：-2
> 
> 时间：2013-01-19T19:12:15.780
> 
> 标签：php, javascript, jquery, ajax

> **可能重复：**
> [在 AJAX 请求之前使用 JavaScript 获取日期](https://stackoverflow.com/questions/14416443/obtain-dates-with-javascript-before-ajax-request)

我有一个这样的 Ajax 请求：

```
function ajaxrequest(str){

    var aircraft = $("#resultdiv");
        aircraft.load("./other_file.php?icao="+str, function(){
        });
    } 
```

如果我将 Javascript 放在 other_file.php 中不起作用。我不知道为什么？但是如果直接使用 javascript 代码就很有趣！但我需要这个功能。如何使用 Javascript 将函数更改为结果？

例如：

如果 other_file.php 有这个：

```
<script>
function example(){

        var id = document.getElementById('id').value;
                $("div2").text(id);
    }
</script> 
```

这不起作用，因为它需要获取 var id，但如果元素的值是 2365。获取它的 javascript 代码`document.getElementById('id').value;`不起作用，因为 javascript 不起作用。但是如果我直接这样做而不是通过函数 ajaxrequest 一切正常。

这是 other_file.php 的真正包含

```
<script>
    $(function() {
        $("#editaircraft")
            .button()
            .click(function editForm() {
        });
    });

    function editForm(){

        var icao = document.getElementById('icao').value;
        var name = document.getElementById('name').value;
        var weightempty = document.getElementById('weightempty').value;
        var weightfull = document.getElementById('weightfull').value;
        var cargofull = document.getElementById('cargofull').value;
        var cruisespeed = document.getElementById('cruisespeed').value;
        var range = document.getElementById('range').value;
        var price = document.getElementById('price').value;
        var firstclassseats = document.getElementById('firstclassseats').value;
        var businessclassseats = document.getElementById('businessclassseats').value;
        var economyclassseats = document.getElementById('economyclassseats').value;
        ajax.open("POST","edit_aircraft_process.php",true);
        ajax.onreadystatechange=function(){
            if(ajax.readyState==4)
            {
            refreshTable(function(){$("#loadingdialog").dialog('close');});

            refreshTable(function(){$("#result").fadeIn(); document.getElementById("result").innerHTML=ajax.responseText;});
            setTimeout(function() { $("#result").fadeOut() }, 5000);
            }
        }
    ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    ajax.send("icao="+icao+"&name="+name+"&weightempty="+weightempty+"&weightfull="+weightfull+"&cargofull="+cargofull+"&cruisespeed="+cruisespeed+"&range="+range+"&price="+price+"&firstclassseats="+firstclassseats+"&businessclassseats="+businessclassseats+"&economyclassseats="+economyclassseats);
    $("#editaircraftdialog").dialog('close');
    $("#loadingdialog").dialog('open');
    }
</script>

<?php
require_once ('../../config.php');
$icao = $_REQUEST["icao"];

$query = "SELECT * FROM aircrafts WHERE ICAO = '$icao'";

$result = mysql_query($query);
if (!$result)
{
die (mysql_error());
}

?>
<form action="javascript:editForm();" method="post" enctype="application/x-www-form-urlencoded"> 
<?php
echo '<table border="0">';
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){

echo '<tr><td class="forms">ICAO:</td><td><input type="text" id="icao" name="icao" size="30" value=';
echo $row["ICAO"] . "></td></tr>";

echo '<tr><td class="forms">Name:</td><td><input type="text" id="name" name="name" size="30" value=';
echo $row["Name"] . "></td></tr>";

echo '<tr><td class="forms">Weight Empty:</td><td><input type="text" id="weightempty" name="weightempty" size="30" value=';
echo $row["WeightEmpty"] . "></td></tr>";

echo '<tr><td class="forms">Weight Full:</td><td><input type="text" id="weightfull" name="weightfull" size="30" value=';
echo $row["WeightFull"] . "></td></tr>";

echo '<tr><td class="forms">Cargo Full:</td><td><input type="text" id="cargofull" name="cargofull" size="30" value=';
echo $row["CargoFull"] . "></td></tr>";

echo '<tr><td class="forms">Cruise Speed:</td><td><input type="text" id="cruisespeed" name="cruisespeed" size="30" value=';
echo $row["CruiseSpeed"] . "></td></tr>";

echo '<tr><td class="forms">Range:</td><td><input type="text" id="range" name="range" size="30" value=';
echo $row["Range"] . "></td></tr>";

echo '<tr><td class="forms">Price:</td><td><input type="text" id="price" name="price" size="30" value=';
echo $row["Price"] . "></td></tr>";

if($row["FirstClassSeats"] != NULL && $row["FirstClassSeats"] != 0){
echo '<tr><td class="forms">First Class Seats:</td><td><input type="text" id="firstclassseats" name="firstclassseats" size="30" value=';
echo $row["FirstClassSeats"] . "></td></tr>";}

if($row["BusinessClassSeats"] != NULL && $row["BusinessClassSeats"] != 0){
echo '<tr><td class="forms">Business Class Seats:</td><td><input type="text" id="businessclassseats" name="businessclassseats" size="30" value=';
echo $row["BusinessClassSeats"] . "></td></tr>";}

if($row["EconomyClassSeats"] != NULL && $row["EconomyClassSeats"] != 0){
echo '<tr><td class="forms">Economy Class Seats:</td><td><input type="text" id="economyclassseats" name="economyclassseats" size="30" value=';
echo $row["EconomyClassSeats"] . "></td></tr>";}

echo '<tr><td><input id="editaircraft" type="submit" value="Edit Aircraft"></td></tr>';

}
echo "</table>";
?>

</form> 
```

vars 的获取是不确定的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:21:18.510

```
var aircraft = $("#resultdiv");

function ajaxrequest(str){
    $.get("other_file.php?icao="+str, function(result){
          aircraft.append(result);
    });
} 
```

other_file.php

```
...

    <script>
            $("#editaircraft")
                .find('button') /* ??? */
                .click(editForm);

        function editForm(){

            var icao = document.getElementById('icao').value;
            var name = document.getElementById('name').value;
            var weightempty = document.getElementById('weightempty').value;
            var weightfull = document.getElementById('weightfull').value;
            var cargofull = document.getElementById('cargofull').value;
            var cruisespeed = document.getElementById('cruisespeed').value;
            var range = document.getElementById('range').value;
            var price = document.getElementById('price').value;
            var firstclassseats = document.getElementById('firstclassseats').value;
            var businessclassseats = document.getElementById('businessclassseats').value;
            var economyclassseats = document.getElementById('economyclassseats').value;
            ajax.open("POST","edit_aircraft_process.php",true);
            ajax.onreadystatechange=function(){
                if(ajax.readyState==4)
                {
                refreshTable(function(){$("#loadingdialog").dialog('close');});

                refreshTable(function(){$("#result").fadeIn(); document.getElementById("result").innerHTML=ajax.responseText;});
                setTimeout(function() { $("#result").fadeOut() }, 5000);
                }
            }
        ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        ajax.send("icao="+icao+"&name="+name+"&weightempty="+weightempty+"&weightfull="+weightfull+"&cargofull="+cargofull+"&cruisespeed="+cruisespeed+"&range="+range+"&price="+price+"&firstclassseats="+firstclassseats+"&businessclassseats="+businessclassseats+"&economyclassseats="+economyclassseats);
        $("#editaircraftdialog").dialog('close');
        $("#loadingdialog").dialog('open');
        }
    </script> 
```

# ios - 苹果会拒绝只有登录的应用程序

> ID：14417863
> 
> 赞同：1
> 
> 时间：2013-01-19T19:12:18.463
> 
> 标签：ios, iphone, ipad

我有一个应用程序，可以让用户为客户（公司）下载员工联系人。我给每个客户（公司）一个用户名和密码，以便将其分发给他的员工，以下载他公司的员工联系方式。所以我没有注册屏幕，只有我有登录屏幕才会苹果拒绝它，它会考虑锁定功能并使用外部应用内购买。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T23:17:42.117

没问题！我让你将你的应用程序发送给 Apple，你需要给他们一个测试登录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T23:36:09.343

根据您的评论和问题，Apple 可能会根据以下条款拒绝您的应用程序（来自评论指南）：

> 2.12 不是很有用、不独特、只是捆绑为应用程序的网站或不提供任何持久娱乐价值的应用程序可能会被拒绝。

或者

> 2.22 任意限制哪些用户可以使用应用程序的应用程序，例如位置或运营商，可能会被拒绝。

由于您没有提供创建帐户的可能性，甚至在外部网站上也没有（您说您已经分发了凭据），因此没有向公众提供任何可行的内容。

除此之外，没有理由拒绝只显示登录屏幕的应用程序。但这只是猜测，它也可以毫无问题地通过。

你考虑过[企业计划](https://developer.apple.com/programs/ios/enterprise/)吗？

# c# - 如何将 Request.Querystring 值赋予 .net 中的 ImageURL？

> ID：14417865
> 
> 赞同：1
> 
> 时间：2013-01-19T19:12:21.917
> 
> 标签：c#, asp.net, .net

我的页面中有许多超链接。如果我单击超链接，它将带我到相应的页面。我给`Request.QueryString`超链接赋予了价值。现在我想将该`Request.QueryString`值作为我的 ImageURL

我给了喜欢

```
<asp:Image ID="NewsImage" runat="server"  
     ImageUrl='<%# GetImageURL() %>'   Width="100px" Height="100px"  /> 
```

然后在编码方面我给出了喜欢

```
public string GetImageURL()  
{  
     string imagename = Request.QueryString["News"] as string;    
     return "~/Images/" + imagename;  
} 
```

但我没有在我的输出中得到图像。
当我给出`<asp:ImageButton`而不是那样时，我在放置 ImageButton 的地方 `< asp:Image`收到类似**提交查询的错误。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:17:19.827

而不是`ImageUrl='<%# GetImageURL() %>'`在 Page_Load() 中尝试这个：

```
this.NewsImage.ImageUrl = "~/Images/" + Request.QueryString["News"] 
```

请注意，您也适合使用这种方法进行 XSS。请参阅[http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

# jquery-mobile - 垂直滑动的事件是什么

> ID：14417868
> 
> 赞同：4
> 
> 时间：2013-01-19T19:12:49.820
> 
> 标签：jquery-mobile

我查看了 jquerymobile 文档并看到： event for`swipe`和`swipeleft``swiperight`

是否有**swipevertical** 事件或类似事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T19:30:06.387

不幸的是，jQuery mobile 中不存在 swipeup 和 swipedown，它们也没有计划用于 1.3 版。这里有一个第 3 方插件：http: [//developingwithstyle.blogspot.com/2010/11/jquery-mobile-swipe-up-down-left-right.html](http://developingwithstyle.blogspot.com/2010/11/jquery-mobile-swipe-up-down-left-right.html)。像使用普通事件一样使用它们：**swipedown**和**swipeup**。

如果你需要这个实现，你也可以使用这个插件：http: [//www.netcu.de/jquery-touchwipe-iphone-ipad-library](http://www.netcu.de/jquery-touchwipe-iphone-ipad-library)。它也适用于安卓设备。这是一个最坏的情况解决方案，因为与官方事件不同，这些事件在桌面浏览器上不起作用。

这是一个工作示例，仅在移动设备上进行测试：http: [//jsfiddle.net/Gajotres/WYnnk/](http://jsfiddle.net/Gajotres/WYnnk/)

```
 $("#wrapper").touchwipe({
         wipeLeft: function() { 
             $("#carousel").trigger("next", 1);
         },
         wipeRight: function() { 
             $("#carousel").trigger("next", 1);        
         },
         min_move_x: 20,
         min_move_y: 20,
         preventDefaultEvents: true
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T16:35:47.837

通过将以下代码添加到[pageshow](http://api.jquerymobile.com/pageshow/)处理程序，我能够模拟页面标题上的**拉动刷新**功能......

```
 // Set aside the thresholds so they can be reset later.
  var _scrollSupressionThreshold = $.event.special.swipe.scrollSupressionThreshold;
  var _horizontalDistanceThreshold = $.event.special.swipe.horizontalDistanceThreshold;
  var _verticalDistanceThreshold = $.event.special.swipe.verticalDistanceThreshold;

  // Adjust the thresholds for a vertical swipe.
  $.event.special.swipe.scrollSupressionThreshold = 5;
  $.event.special.swipe.horizontalDistanceThreshold = 1;
  $.event.special.swipe.verticalDistanceThreshold = 128;

  // Listen for the swipe event...
  $('#my_jqm_page div[data-role="header"]').on("swipe", function() {

    // Reset thresholds.
    $.event.special.swipe.scrollSupressionThreshold = _scrollSupressionThreshold;
    $.event.special.swipe.horizontalDistanceThreshold = _horizontalDistanceThreshold;
    $.event.special.swipe.verticalDistanceThreshold = _verticalDistanceThreshold;

    // Take action...
    console.log('Vertical swipe!');

  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:16:46.137

[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

我认为有一个 vmouseover，这是一个虚拟鼠标悬停

# html - 在 Gumby 框架中使用带有固定 CSS 标头的“跳过链接”

> ID：14417869
> 
> 赞同：1
> 
> 时间：2013-01-19T19:13:10.833
> 
> 标签：html, css

我正在尝试查看是否有任何方法可以使用 CSS 和 Gumby Frameworks 的“跳过链接”锚链接解决方案来调整固定位置标题。

我尝试以负边距向下推图层，并尝试使用 CSS 定位数据类型属性，但无济于事。到目前为止，我尝试过的所有操作也都在页面本身上移动了 div。

我的标题的固定高度为 682 像素，我想找到一种方法将所有内容保持在该高度以下并让跳过链接功能仍然有效。

任何建议将不胜感激！

[示例链接](http://portfolioprep.suissamesser.com)

标题 CSS：

```
body {
    padding-top:268px !important;
}

.fixed_header {
    width: 100%;
    height: 268px;
    background: url(../img/green_header_grad.png) repeat-x;
    ;
    position: fixed;
    text-align: center;
    z-index: 999;
    border-bottom: 1px solid #FEFEF4;
    -moz-box-shadow: 3px 3px 6px rgba(0,0,0,0.3);
    -webkit-box-shadow: 3px 3px 6px rgba(0,0,0,0.3);
    box-shadow: 3px 3px 6px rgba(0,0,0,0.3);
    top: 0px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:00:33.027

更改正文的边距值或插入偏移量以匹配固定的标题高度只是第一步。

似乎可行的方法是将数据类型属性移动到您要跳到的图层内的跨度内。然后跨度需要一个绝对位置，然后需要应用一个负值或偏移量来匹配标题（-286px）：

HTML：

```
<div class="four columns sidebar"">
<span class="anchor" id="founder" data-type="skiplink_3"></span>
</div>
<div class="eleven columns main_col"></div>
</div> 
```

CSS：

```
span.anchor {
position:absolute;
top: -268px;
display: block;
visibility: hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:05:52.090

`margin-top: -268px;`从`span.anchor`（style.css 第 149 行）中删除，例如：

```
span.anchor {
    display: block;
    height: 268px;
    visibility: hidden;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T02:47:39.700

```
body {
    padding-top:234px;
} 
```

# python - Python中的每个项目长度

> ID：14417870
> 
> 赞同：1
> 
> 时间：2013-01-19T19:13:17.740
> 
> 标签：python, search

我试图定义一个函数，如果列表中的每个项目都小于 2，则返回 true，否则返回 false。项目的类型可以是与列表不同的整数、浮点数、str 或某物。我应该检查清单。

```
def ifeveryitems(lst):
    for items in lst:
        if isinstance(items,list) and len(items) <= 2:
           return True and ifeveryitem(????)  # '????' should be the items other than the item that has been searched #
        else:
           return False 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T19:14:41.003

从您的描述来看，您根本不需要递归调用：

```
def ifeveryitems(lst):
    for items in lst:
        if isinstance(items, list) and len(items) > 2:
           return False

    return True 
```

或者，或者：

```
def ifeveryitems(lst):
    return all(len(items) <= 2 for items in lst if isinstance(items, list)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:24:02.620

解决了您的问题后，我将一般解释循环与尾递归的概念，因为尾递归通常是一种有用的技术。
尽管 Python 中的循环和列表理解意味着您不太可能需要尾递归，但最好有它的想法。

* * *

递归调用函数的技术称为尾递归。使用尾递归和循环可以实现相同的目的，但您不需要两者。

要执行您想要的操作，您可以使用循环：

```
def ifeveryitems(lst):
    for items in lst:
        if not isinstance(items,list) or len(items) > 2:
            return False
    return True 
```

或尾递归：

```
def ifeveryitems(lst):
    if isinstance(items,list) and len(lst)==0:
        return True
    return isinstance(lst[0],list) and len(lst[0]) <= 2 and ifeveryitems(lst[1:]) 
```

此函数检查第一项`lst`是否为列表且长度为 2 或更短，然后`lst[1:]`使用函数本身检查列表的其余部分 ( )。最终，它要么通过快捷方式返回 False（何时`isinstance(lst[0],list) and len(lst[0]) <= 2`为 False），要么达到整个列表用尽的基本情况，当它返回 True 时。

* * *

再举一个例子：实现`len(L)`自己。
假设`L`总是一个列表，您可以`len`使用循环来实现：

```
def len(L):
    i = 0
    for item in L:
        i += 1
    return i 
```

（注意：使用这样的循环也称为累加）

或尾递归。

```
def len(L):
    if L==[]:
        return 0
    return 1 + len(l[1:]) 
```

它删除列表的第一项，并将列表其余部分的长度加 1。最终，它会到达 L 耗尽并减少到空列表的点，在这种情况下它只会返回 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T19:20:56.693

您可以尝试以下方法：

```
def ifeveryitems(lst):
    return all(map(lambda x: x < 2, lst)) 
```

# asp.net - 内联 IIF 表达式和 DataBinder.Eval 未按预期运行

> ID：14417875
> 
> 赞同：1
> 
> 时间：2013-01-19T19:14:11.453
> 
> 标签：asp.net, vb.net, codeblocks

我正在尝试使用`.tostring.remove(n)`. 使用语句下面的代码`IIf`确认字符串是 ISNullOrEmpty 并返回`True`or `False`。如果`true`返回的字符串`""`放置在 aspx 页面中（这工作正常），则问题出现在 IsNullOrEmpty 返回时触发的第二部分`False`。

根据一个`False`值检查字符串长度，如果字符串长度等于或超过 17 个字符，则返回一个值，并且使用如果返回一个值`True`来截断字符串，则该字符串保持不变。`.ToString.Remove(n)``False`

问题是，如果字符串是 1 个字符或 20 个字符长，则会不断发生以下错误： `startIndex must be less than length of string`

这是代码块：

```
<%# IIf(String.IsNullOrEmpty(Convert.ToString(DataBinder.Eval(Container.DataItem, "SponsorEmail"))),
"",
IIf(Convert.ToString(DataBinder.Eval(Container.DataItem, "SponsorEmail")).Length > 17,
Eval("SponsorEmail").ToString.Remove(17),
Eval("SponsorEmail")))%> 
```

数据绑定器从中提取数据的数据库表确实允许 NULLS，并且仅当任何给定记录存在 NULL 或空字符串时才会发生。

请帮助，这让我发疯了！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:28:48.993

您遇到的问题`iif`是每次都会评估整个语句，而不仅仅是真假部分。这意味着`Remove(17)`无论条件评估为什么，每次都会触发。

您可以使用以下代码证明这一点：

```
 Dim sValue = IIf(Nothing, DoEval("true"), DoEval("false"))
    Console.WriteLine("Final " & sValue)

Private Function DoEval(value As String) As String
    Console.WriteLine(value)
    Return value
End Function 
```

在这种情况下，您将看到 true 和 false 都写入输出窗口。

我们通过使用引入了很多问题，`iif`以至于我们禁止在我们的应用程序中使用它。

`if then else`切换到传统条款会更好。

# java - 时间和日期到变量

> ID：14417878
> 
> 赞同：0
> 
> 时间：2013-01-19T19:14:27.463
> 
> 标签：java, android

希望这是一个简单的。

我需要设置一些变量来保存从我的时间选择器和微调器中选择的值。

目前我正在尝试使用“时间”对象设置选择的时间，但我收到一个错误，即我的参数与构造函数的参数不匹配：

当前代码：

```
//Error on the constructor.
Time setTime = new Time(dobHour, dobMinute); 
```

我的第二个问题是我试图将选定的选项从我的微调器设置为一个变量。有人可以告诉我如何将选定的微调器项目设置为变量（这样我就可以将其插入到我的数据库中）。

如图所示：

```
\\I realize this is the wrong format. Could someone 
\\tell me what I need to set it as?
String typeToSet =  setType.getText().toString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:20:28.750

首先回答你的第二个问题......如果 setType 是你的 Spinner 那么你想要`setType.getSelectedItem().toString();`

至于你的第二个问题，[Time](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Time.html)似乎没有一个只需要一小时一分钟的构造函数（以及需要一小时、一分钟、一秒的构造函数）已被弃用。

你从哪里得到这些值？根据它们是什么，有多种方法可以获取反映该时刻的 Date 对象。

我可能会选择[日历](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)

```
Calendar c = Calendar.getInstance(); 
```

然后使用它的`set`方法将它移动到你想要的日期。然而，再一次，如果没有更多关于你在这里实际尝试做什么的细节，很难提供有意义的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:20:50.993

您可以通过以下方式将选定的微调器项获取到变量中：

```
fve_txt = (Spinner) findViewById(R.id.fvetxt);
String spinVal = fve_txt.getSelectedItem().toString(); 
```

要设置时间，您可以这样做：

```
Time time = new Time();
time.set(second, minute, hour, monthDay, month, year); 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:21:15.317

您在构造函数上遇到错误，因为它被错误地使用。[根据文档](http://developer.android.com/reference/java/sql/Time.html#Time%28int,%20int,%20int%29)，您需要三个参数（小时、分钟和秒）。尝试：

```
Time setTime = new Time(dobHour, dobMinute, 0); 
```

请记住，此构造函数现在已弃用，您应该传递毫秒值而不是单个值。

要将小时和分钟转换为毫秒，请尝试：

```
long milli = (dobHour * 1000 * 60 * 60) + (dobMinute * 1000 * 60) + 0; 
```

另外，假设`setType`是您的微调器，您必须使用

```
String typeToSet =  setType.getSelectedItem().toString(); 
```

代替

```
String typeToSet =  setType.getText().toString(); 
```

# javascript - bind() 会改变函数引用吗？| 如何永久设置？

> ID：14417890
> 
> 赞同：11
> 
> 时间：2013-01-19T19:15:33.097
> 
> 标签：javascript

> **可能重复：**
> [删除使用绑定添加的事件侦听器](https://stackoverflow.com/questions/11565471/removing-event-listener-which-was-added-with-bind)

我需要动态添加和删除事件监听器。我还需要设置`this`.

这会改变函数引用吗？

```
element.addEventListener('click', funcA);
newFunc = funcA.bind(this);
element.removeEventListner('click', newFunc); 
```

removeEventListener 会知道我要删除 funcA 吗？

还是它认为我正在一起删除一个新功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T19:17:41.890

> 还是它认为我正在一起删除一个新功能？

是的，`.bind()`返回一个新的函数对象。

# package - 无法安装 Meteorite 包

> ID：14417894
> 
> 赞同：1
> 
> 时间：2013-01-19T19:16:04.110
> 
> 标签：package, meteor, router

我已经从 NPM 安装了 Meteorite

```
npm install -g meteorite 
```

现在当我跑

```
mrt add router

Installing Meteor

  branch: https://github.com/meteor/meteor.git#master

Installing smart packages

node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: ENOENT, no such file or directory '/Users/myusername/.meteorite/meteors/meteor/meteor/4d98d8cb4e5a95e9e98953f44c872c9332a042a3'
    at Object.mkdirSync (fs.js:373:18)
    at Object.mkdirSyncRecursive (/usr/lib/node_modules/meteorite/node_modules/wrench/lib/wrench.js:361:12)
    at [object Object]._load (/usr/lib/node_modules/meteorite/lib/sources/git.js:125:12)
    at /usr/lib/node_modules/meteorite/lib/sources/git.js:73:18
    at /usr/lib/node_modules/meteorite/lib/sources/git.js:89:5
    at /usr/lib/node_modules/meteorite/lib/sources/git.js:216:5
    at ChildProcess.exithandler (child_process.js:281:7)
    at ChildProcess.emit (events.js:70:17)
    at maybeExit (child_process.js:361:16)
    at Socket.<anonymous> (child_process.js:458:7) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:54:32.903

看起来这个问题之前已经[报告过](https://github.com/oortcloud/meteorite/issues/67)了。在该线程中，[这种解决方法](https://github.com/oortcloud/meteorite/issues/67#issuecomment-11067125)显然是成功的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T22:05:19.767

[https://github.com/oortcloud/meteorite#installing-meteorite](https://github.com/oortcloud/meteorite#installing-meteorite)上的安装说明提到这`sudo -H npm install -g meteorite`是​​正确的安装命令。

可能，现在您的目录结构中有一些根用户拥有的文件夹（查看`~.npm/`），`mrt`或者 Meteor 没有足够的权限来安装软件包。

有关解释和修复您的情况，请参阅[https://github.com/oortcloud/meteorite#permission-woes](https://github.com/oortcloud/meteorite#permission-woes)上的说明。它帮助了我。

# android - 设置 gdb 和 eclipse 以从 Android 应用程序调试共享库后无法访问地址 0X1 的内存

> ID：14417895
> 
> 赞同：13
> 
> 时间：2013-01-19T19:16:15.950
> 
> 标签：android, eclipse, android-ndk

我有两个 Android 项目：一个是库，另一个是使用该库的常规应用程序。我的目标是从 android 应用程序调试共享库。我遵循了本指南：

[http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/)

我注释掉了最后一行

```
##$GDBCLIENT -x `native_path $GDBSETUP` 
```

但是下面一行

```
##cp -f $GDBSETUP_INIT $GDBSETUP 
```

抱怨消息：

`it cannot stat ./libs/armeabi-v7a/gdb.setup`

所以我把它注释掉了，因为我认为 Eclipse 会为我上传它。除此之外，我确保：

*   在两个 Android.mk 中我都放了 LOCAL_CFLAGS := -Wall –g

*   我在应用程序的 libs 库中获取 .so

*   我在应用程序中使 debuggable true

*   修改了 gdb2.setup 路径，以便使用 solib-search-path ./libs/armeabi-v7a/ 引用 .so 并使用目录引用源

在执行 System.LoadLibrary 指令后，我执行了 ndk-build-eclipse 并且没有产生错误，当我开始本地调试时，我得到了：

> 无法访问地址 0x1 处的内存

在 Cygwin 上我得到了：

> 从主机 0.0.0.0 远程调试

这是运行 ndk-gdb-eclipse 命令的输出：

```
$ ./ndk-gdb-eclipse --adb=/cygdrive/c/Utilities/adt-bundle-windows/adt-bundle-windows/sdk/platform-tools/adb --project=/cygdrive/c/Projects/IDSmart/IDSmartApp/IDSmart  --force --port=5039 --verbose
Android NDK installation path: /cygdrive/c/Utilities/android-ndk-r8c-windows/android-ndk-r8c/.
Using specific adb command: /cygdrive/c/Utilities/adt-bundle-windows/adt-bundle-windows/sdk/platform-tools/adb
ADB version found: Android Debug Bridge version 1.0.31
Using ADB flags:
Using specified project path: /cygdrive/c/Projects/IDSmart/IDSmartApp/IDSmart
Found package name: uk.co.idscan.idsmart
ABIs targetted by application: armeabi-v7a
Device API Level: 15
Device CPU ABIs: armeabi-v7a armeabi
Compatible device ABI: armeabi-v7a
Using gdb setup init: ./libs/armeabi-v7a/gdb.setup
Using toolchain prefix: /cygdrive/c/Utilities/android-ndk-r8c-windows/android-ndk-r8c/./toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/arm-linux-androideabi-
Using app out directory: ./obj/local/armeabi-v7a
Found debuggable flag: true
Found device gdbserver: /data/data/uk.co.idscan.idsmart/lib/gdbserver
Found data directory: '/data/data/uk.co.idscan.idsmart'
Found running PID: 7922
7922
Killing existing debugging session
## COMMAND: adb_cmd shell kill -9 7864
/system/bin/sh: kill: 7864: Operation not permitted
Launched gdbserver succesfully.
Setup network redirection
## COMMAND: adb_cmd shell run-as uk.co.idscan.idsmart lib/gdbserver +debug-socket --attach 7922
## COMMAND: adb_cmd forward tcp:5039 localfilesystem:/data/data/uk.co.idscan.idsmart/debug-socket
Attached; pid = 7922
Listening on Unix socket debug-socket
## COMMAND: adb_cmd pull /system/bin/app_process obj/local/armeabi-v7a/app_process
1373 KB/s (9848 bytes in 0.007s)
Pulled app_process from device/emulator.
## COMMAND: adb_cmd pull /system/bin/linker obj/local/armeabi-v7a/linker
2147 KB/s (39592 bytes in 0.018s)
Pulled linker from device/emulator.
## COMMAND: adb_cmd pull /system/lib/libc.so obj/local/armeabi-v7a/libc.so
2576 KB/s (282316 bytes in 0.107s)
Pulled libc.so from device/emulator. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:40:07.127

```
Cannot access memory at address 0x1 
```

发布您的 gdb2.setup 文件，与您在 Eclipse 中使用的文件相同。

通常，这些无法访问内存是由于 solib-search-path 不正确。尝试在 gdb2.setup 文件中输入项目 lib 文件夹的绝对路径。例如，我将其设置为：

```
set solib-search-path D:/android/android-ndk-r8d/samples/hello-jni/obj/local/armeabi 
```

让我知道是否有帮助。

# sql - SQLCipher ATTACH 具有自定义 cipher_page_size 的加密数据库

> ID：14417898
> 
> 赞同：0
> 
> 时间：2013-01-19T19:16:33.907
> 
> 标签：sql, sqlite, sqlcipher

我正在使用 SQLCipher 加密 SQLite 数据库。我似乎在使用自定义 cipher_page_size（不同于默认值 1024）附加加密数据库时遇到了麻烦。

这是我的代码

```
- (void) database:(sqlite3*) database execute:(NSString*) sql {
    if (sqlite3_exec(database, [sql UTF8String], NULL, NULL, NULL) == SQLITE_OK) {
        NSLog(@"\"%@\" successfully executed", sql);
    } else {
        NSLog(@"Could not execute \"%@\" (%s)", sql, sqlite3_errmsg(database));
    }
}

- (void)test {

    sqlite3 *database1;
    sqlite3 *database2;

    NSString *path1 = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]
                        stringByAppendingPathComponent:@"database1.sqlite"];
    NSString *path2 = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]
                        stringByAppendingPathComponent:@"database2.sqlite"];

    if (sqlite3_open([path1 UTF8String], &database1) == SQLITE_OK) {
        NSLog(@"database1 opened successfully");
        [self database:database1 execute:@"PRAGMA key = 'password1';"];
        //[self database:database1 execute:@"PRAGMA cipher_page_size = 2048;"];
        [self database:database1 execute:@"CREATE TABLE IF NOT EXISTS table1 (id INTEGER PRIMARY KEY, name TEXT);"];
        [self database:database1 execute:@"INSERT INTO table1 (name) VALUES ('bob');"];
        sqlite3_close(database1);
    } else {
        sqlite3_close(database1);
        NSLog(@"Failed to open database1 with message '%s'.", sqlite3_errmsg(database1));
    }

    if (sqlite3_open([path2 UTF8String], &database2) == SQLITE_OK) {
        NSLog(@"database2 opened successfully");
        [self database:database2 execute:@"PRAGMA key = 'password2';"];
        //[self database:database2 execute:@"PRAGMA cipher_page_size = 2048;"];
        [self database:database2 execute:@"CREATE TABLE IF NOT EXISTS table2 (id INTEGER PRIMARY KEY, name TEXT);"];
        [self database:database2 execute:@"INSERT INTO table2 (name) VALUES ('john');"];

        [self database:database2 execute:[NSString stringWithFormat:@"ATTACH DATABASE '%@' AS database1 KEY 'password1';", path1]];
        [self database:database2 execute:@"DETACH DATABASE database1;"];

        sqlite3_close(database2);
    } else {
        sqlite3_close(database2);
        NSLog(@"Failed to open database2 with message '%s'.", sqlite3_errmsg(database2));
    }
} 
```

当有关更改 cipher_page_size 的行被注释时，代码按预期工作。当它们被注释掉时，我收到错误 SQLITE_NOTADB（数据库已加密或不是数据库文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:02:07.847

您应该在附加数据库后立即显式设置附加数据库的页面大小，即：

```
ATTACH DATABASE 'db1.db' AS database1 KEY 'password1';
PRAGMA database1.cipher_page_size = 2048; 
```

# matlab - 并行化程序

> ID：14417900
> 
> 赞同：3
> 
> 时间：2013-01-19T19:16:56.027
> 
> 标签：matlab, parallel-processing, parfor

我有几个`.m`文件的程序组合。程序运行调用其中一个（main）命名`tests.m`，然后从那里我调用另一个`optFun.m`计算不同参数的地方。这些参数在一个`while`循环内计算，当它们的值多次（例如 4500）没有变化时结束。该程序运行良好，但我必须执行 200 次才能获得 200 组不同的值。此外，我可以使用具有>12 个内核的计算机，因此我对`.m`包含语句的主文件进行了一些更改`parfor`，以部署 12 个 matlab 工作人员。我的目标是在一轮中获得 12 个不同的解决方案（初始程序的执行）。

```
function [] = tests(Num)
matlabpool open local 12;  
y = zeros(itermax,15);  
z = zeros(itermax,9);
parfor i = 1:itermax   
    [iternum tTot SolOpt ImpCostMAX minABFmax ABFmax ImportCosteABS] =...
             optFun(N, K, AntNum,...  
                    q, eps, Rt, Rs, theta, maxiter,...
                    strcat(particad,num2str(i)));   
     y(i,:) = [ i; iternum; tTot; SolOpt; ImpCostMAX(1); ImpCostMAX(2);...
                q; eps; N; K; AntNum; maxiter;...
                SolOpt/ImpCostMAX(1); SolOpt/ImpCostMAX(2); SolOpt/N];  
     z(i,:) = [ i; minABFmax(1); minABFmax(2); minABFmax(3); ABFmax(1);...
                ABFmax(2); ABFmax(3);...
                ImportCosteABS(1); ImportCosteABS(2)];   
end %parfor

matlabpool close;  
dlmwrite(nombre, y, 'delimiter', ' ','precision', '%9.5f');  
dlmwrite(b, z, 'delimiter', ' ','precision', '%9.5f'); 
```

我已经运行了 matlab 的 12 名工作人员，但现在**程序似乎在达到最佳或正确结果之前就停止了**。似乎我的程序的参数解决方案是在达到 while 循环的 4500 次迭代之前输出的。虽然我获得了 12 种不同的解决方案，但似乎 12 名工作人员共享一些变量的值，因此当其他工作人员对解决方案进行了足够改进或其中几个人的总和被认为是正确的解决方案时，他们就会停止。你能帮我理解发生了什么吗？

非常感谢您的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:50:11.493

我过去也遇到过类似的问题。您确定 for 循环的“独立”评估不会通过他们都使用的公共变量交换有关解决方案收敛性的信息吗？比如说，您`convergence=zeros(1);`在 the 之外定义 a `parfor`，然后让 optFun.m 的所有后续调用使用相同的变量。这也可能适用于在数组中存储中间值的函数。

虽然我不能说这是否确实是您的问题（没有代码示例），但它可能只是。在这种情况下，我建议为每个评估创建一个独立的容器（例如，一个`zeros(NoEvals,NoThingsToStore)`矩阵，它们将彼此独立地保存数据）。

# bash - Telnet/Send/Expect - 自动从远程主机拉取日志

> ID：14417904
> 
> 赞同：1
> 
> 时间：2013-01-19T19:17:19.707
> 
> 标签：bash, tcl, send, telnet, expect

我有一个简单的 BASH 脚本，用于将`.esh`脚本发送到远程主机。例如，我知道主机的用户名和密码是什么，所以我的脚本执行以下操作：

```
expect login:
send root\n
expect Password:
send abc123\n
expect "# " 
```

因此，这将自动以用户身份登录远程主机`root`密码`abc123`。

我现在正在尝试发送 BASH 样式的单行 for 循环以从主机上的某些日志文件中提取一些指标，即：

```
send 'for i in /var/log/example/*.txt; do echo $i; cat $i | grep error ; done \n' 
```

但是，这失败了：

```
# can't read "i": no such variable
    while executing
send 'for i in /var/log/example/*.txt; do echo $i; cat $i | grep error ; done \n' 
```

我读过一些类似的帖子，但我没有发现任何类似的案例。一旦我弄清楚如何实现这一点，我可能会包含更多命令行命令来优化日志文件的输出（即：更多 bash 临时变量、通过管道输出`awk`等）。

谁能帮我解决这个问题？

谢谢你。

* * *

编辑：根据提供的答案，我将脚本更改为以下内容，它就像一个魅力：

```
expect login:
send root\n
expect Password:
send abc123\n
expect "# "
send { for i in /var/log/example/*.txt; do echo $i; cat $i | grep error ; done }
send "\n"
send exit 
```

这会登录到远程主机，将一些有价值的指标打印到控制台，然后退出 telnet。我现在可以在本地主机上使用 bash 脚本，通过包含主机名/IP 列表的文本文件循环访问多个远程主机。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:46:11.847

单引号不用于[Tcl](http://www.tcl.tk/man/tcl8.6/TclCmd/Tcl.htm)中的引用，它们是普通字符。如果需要反斜杠、命令和变量扩展，请使用双引号，如果不需要，请使用花括号。

将第一个替换为`'`，`{`最后一个替换为`}`。

# c++ - 固定大小的unordered_map，如何定义？

> ID：14417907
> 
> 赞同：7
> 
> 时间：2013-01-19T19:17:24.763
> 
> 标签：c++, unordered-map, fixed-size-types

是否可以定义固定大小`unordered_map`？

查看成员函数，没有`resize()`类似于`std::vector`and `std::list`。此外，谷歌没有帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T19:19:28.273

是的，这是可能的，但 STL 中没有这样的映射。您可以做的是编写自己的类，其中包含一个并使用您自己`std::array< std::pair<Key, Value>, N>`提供大部分功能。如果您使用 a作为数据成员，您甚至可以拥有一个仅显式扩展表的函数，而不是在.`find()``insert()``std::hash``std::vector< std::pair<Key, Value> >``resize()``insert()`

要实现的重要一点是，您还需要提供一种迭代各种元素的方法，以满足所有**容器要求**。通常这是通过在所有存储元素上实现链接列表的辅助数据来完成的。

但是，您需要解决的一个问题是，如果您的阵列已满，您使用哪种**替换策略来替换项目。**使用`std::unorderd_map`所谓的链接，每个条目都有一个动态大小的**桶**（至少有前向迭代，所以至少相当于`forward_list`）。大多数[国际象棋程序](https://web.archive.org/web/20180713065452/http://chessprogramming.wikispaces.com/Hash+Table)都有一个固定大小的哈希表和一个替换策略，如果一个特定的表条目已经被占用，则总是替换一个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:29:18.180

如果您的目标是将 map 调整为已知大小以避免进一步可能低效的重新散列，您可以使用[`std::unordered_map:: reserve`](http://en.cppreference.com/w/cpp/container/unordered_map/reserve). 它将设置桶的数量，因此地图可以根据负载因子包含给定的元素数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:21:01.217

从逻辑上讲，map 不可能`resize()`像其他序列容器那样具有成员函数。这是一张地图，它的每一个键都必须是*唯一的*。如果您将其调整到某个大小，则它必须用一些（默认）值填充*新*创建的条目。它应该为键生成什么值？它将如何确保密钥的唯一性？该决定不能由地图做出，因此它没有`resize()`成员函数。

# vim - 如何在 Vim 中引用当前打开的文件？

> ID：14417908
> 
> 赞同：3
> 
> 时间：2013-01-19T19:17:27.710
> 
> 标签：vim

在 vim 中，如何引用我当前正在编辑的文件？我希望能够映射一个键以`:!java`在我当前正在处理的文件上运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T19:43:52.643

您可以使用`%`来引用当前缓冲区的文件名；修饰符（cp. `:help filename-modifiers`）之类`:p`的可以创建完整的绝对路径，或削减扩展名。

请注意，解决方案`!java`仅适用于默认包中的简单类，*不*推荐使用。除非你只是为了快速原型设计和一次性的东西，我建议你使用像*Ant*或*Maven*这样的构建系统，并在那里定义一个像*run*这样的目标。然后，通过`'makeprg'`在 Vim 中正确设置，您可以通过

```
:make run 
```

# google-drive-api - 建立一个公用文件夹作为我的 html 网站文件夹

> ID：14417909
> 
> 赞同：0
> 
> 时间：2013-01-19T19:17:33.403
> 
> 标签：google-drive-api

如何建立一个公用文件夹作为我的 html 网站文件夹？我已经阅读了有关 webViewLink 的信息，但我不知道如何在没有编程的情况下找到该名称/字符串！

谢谢，

克里斯托弗·安德森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:43:13.343

查看有关 Google 网站托管的 Google Developers Live 介绍性会议的录音以获取说明：[https](https://www.youtube.com/watch?v=fwyZqyGEPNk#) ://www.youtube.com/watch?v=fwyZqyGEPNk# ！

# seo - mathjax 方程如何影响 seo？插入我的方程的图像会更好吗？

> ID：14417911
> 
> 赞同：0
> 
> 时间：2013-01-19T19:17:48.940
> 
> 标签：seo, mathjax, inline-code

从 SEO 的角度来看，最好只上传方程的图像而不是使用 mathjax 来显示该方程。我问的原因是因为我在我的网站上使用 mathjax 渲染了一个方程，并发现生成了大量带有大量内联 css 的代码来表示该方程：

```
<p style="text-align:center;"><span class="MathJax_Preview"></span><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-1-Frame" style=""><nobr><span class="math" id="MathJax-Span-1"><span style="display: inline-block; position: relative; width: 95px; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(19.7px 20880px 68.8px -7.9px); top: -51px; left: 0px;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Math; font-style: italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 3.9px;"></span></span><span class="mo" id="MathJax-Span-4" style="font-family: MathJax_Main; padding-left: 5.8px;">=</span><span class="mfrac" id="MathJax-Span-5" style="padding-left: 8.3px; padding-right: 2.5px;"><span style="display: inline-block; position: relative; width: 13.5px; height: 0px;"><span style="position: absolute; clip: rect(33.9px 20880px 54px -8.4px); top: -65.1px; left: 50%; margin-left: -5.5px;"><span class="mn" id="MathJax-Span-6" style="font-family: MathJax_Main;">4</span><span style="display: inline-block; width: 0px; height: 51px;"></span></span><span style="position: absolute; clip: rect(34.1px 20880px 54.5px -8.1px); top: -36.7px; left: 50%; margin-left: -5.5px;"><span class="mn" id="MathJax-Span-7" style="font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 51px;"></span></span><span style="position: absolute; clip: rect(17.7px 20880px 25px -9px); top: -26.6px; left: 0px;"><span style="border-left-width: 13.5px; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.3px; vertical-align: 0px;"></span><span style="display: inline-block; width: 0px; height: 22px;"></span></span></span></span><span class="mi" id="MathJax-Span-8" style="font-family: MathJax_Math; font-style: italic; padding-left: 3.5px;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.1px;"></span></span><span class="msubsup" id="MathJax-Span-9"><span style="display: inline-block; position: relative; width: 18.6px; height: 0px;"><span style="position: absolute; clip: rect(38.8px 20880px 54.2px -8.6px); top: -51px; left: 0px;"><span class="mi" id="MathJax-Span-10" style="font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 51px;"></span></span><span style="position: absolute; top: -59.6px; left: 9px;"><span class="texatom" id="MathJax-Span-11"><span class="mrow" id="MathJax-Span-12"><span class="mn" id="MathJax-Span-13" style="font-size: 70.7%; font-family: MathJax_Main;">3</span></span></span><span style="display: inline-block; width: 0px; height: 51px;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 51px;"></span></span></span><span style="border-left-width: 0px; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 45px; vertical-align: -15.8px;"></span></span></nobr></span></div><script type="math/tex;  mode=display" id="MathJax-Element-1">V = \frac{4}{3}\pi r^{3}</script></p> 
```

这是代码量的图像（它基本上是字体大小为 11 的 word 文件上的一页）：

![在此处输入图像描述](../Images/e414b548bf69f38a30cbc76799f092ef.png)

我认为上面的 seo 不好，而且我最好只包含方程式的图像，但我找不到太多关于此事的来源（只有一个：[http ://www.frihost.com/forums /vt-127057.html](http://www.frihost.com/forums/vt-127057.html)），我想知道你们的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:59:25.980

就我个人而言，我不认为你应该担心你的数学代码会影响 SEO。

首先，如果代码是由 JavaScript 库生成的，Googlebot 可能不会执行它。Google 说 ( [Matt Cutts](http://www.searchnewz.com/topstory/news/sn-2-20100315SEOInterviewwithMattCutts.html) ) 他们可以执行**一些**JavaScript 但**不是全部**。

> **Matt Cutts**：“*有一段时间，我们在 JavaScript 中进行扫描，我们一直在寻找链接。谷歌在 JavaScript 方面变得更加智能，可以执行一些 JavaScript。我不会说我们执行所有 JavaScript，所以有一些条件我们不执行 JavaScript。当然有一些常见的、众所周知的 JavaScript 东西，比如 Google Analytics，你甚至不想执行它们，因为你不想尝试从 Googlebot 生成幻像访问到你的 Google Analytics* ”。

关于“*大量代码*”，Google 搜索结果列表包括搜索关键字位于距页面开头（[链接）不超过](http://www.sitepoint.com/indexing-limits-where-bots-stop/)**520 KB**的页面。您提供的代码约为**3.2 KB**。因此，即使谷歌正在索引动态生成的内容（我怀疑它们是，上面的解释），你仍然会有很多“空间”。

 **我希望这会有所帮助。**

# hibernate - 当属性存在时，org.hibernate.Query 无法解析属性 [Hibernate JPA]

> ID：14417914
> 
> 赞同：0
> 
> 时间：2013-01-19T19:18:27.787
> 
> 标签：hibernate, jpa

我想加载吸烟者并被诊断出心跳高于 120。我不断收到此错误 org.hibernate.Query 无法解决财产吸烟问题。如果我将属性更改为其他 fe id，我会收到相同的错误。我尝试了不同的查询，结果相同。所有实体都在单独的文件中。我的代码有什么问题？

询问：

```
Query q = em.createQuery("select p from Patient p join p.visits v join v.data d WHERE d.smoking　= 'yes' and d.heartrate > 120"); 
```

代码：

```
import javax.persistence.Query;
[...]

@Entity
public class Patient extends Person implements Serializable {
     private static final long serialVersionUID = 1L;
     private int id;
     @OneToMany
     private List<Visit> visits = new ArrayList<>();
[...]
}
@Entity
public class Visit implements Serializable {
     private static final long serialVersionUID = 1L;
     private int id;
     @OneToOne
     private Data data;
[...]
}
@Entity
public class Data implements Serializable {
     private static final long serialVersionUID = 1L;
     private int id;
     private String smoking;
     private int heartrate;
[...]
} 
```

堆栈跟踪：

```
java.lang.IllegalArgumentException: org.hibernate.QueryException: could not resolve property: palacy　 of: odwzorowania.Wywiad [select p from odwzorowania.Pacjent p join p.wizyty w join w.wywiad wy WHERE wy.palacy　= 'tak' AND wy.tetno > 120]
at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:624)
at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:96)
at ntbd.Przychodnia.jButtonZnajdzPacjentowTetnoActionPerformed(Przychodnia.java:904)
at ntbd.Przychodnia.access$1100(Przychodnia.java:23)
at ntbd.Przychodnia$18.actionPerformed(Przychodnia.java:682)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2713)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:680)
at java.awt.EventQueue$4.run(EventQueue.java:678)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Caused by: org.hibernate.QueryException: could not resolve property: palacy　 of: odwzorowania.Wywiad [select p from odwzorowania.Pacjent p join p.wizyty w join w.wywiad wy WHERE wy.palacy　= 'tak' AND wy.tetno > 120]
    at org.hibernate.persister.entity.AbstractPropertyMapping.propertyException(AbstractPropertyMapping.java:44)
    at org.hibernate.persister.entity.AbstractPropertyMapping.toType(AbstractPropertyMapping.java:38)
    at org.hibernate.persister.entity.AbstractEntityPersister.toType(AbstractEntityPersister.java:1358)
    at org.hibernate.hql.ast.tree.FromElementType.getPropertyType(FromElementType.java:279)
    at org.hibernate.hql.ast.tree.FromElement.getPropertyType(FromElement.java:386)
    at org.hibernate.hql.ast.tree.DotNode.getDataType(DotNode.java:566)
    at org.hibernate.hql.ast.tree.DotNode.prepareLhs(DotNode.java:241)
    at org.hibernate.hql.ast.tree.DotNode.resolve(DotNode.java:188)
    at org.hibernate.hql.ast.tree.FromReferenceNode.resolve(FromReferenceNode.java:94)
    at org.hibernate.hql.ast.tree.FromReferenceNode.resolve(FromReferenceNode.java:90)
    at org.hibernate.hql.ast.HqlSqlWalker.resolve(HqlSqlWalker.java:728)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.expr(HqlSqlBaseWalker.java:1216)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.exprOrSubquery(HqlSqlBaseWalker.java:4041)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.comparisonExpr(HqlSqlBaseWalker.java:3525)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1762)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1687)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.whereClause(HqlSqlBaseWalker.java:776)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:577)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:281)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:229)
    at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:228)
    at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:160)
    at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:111)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:77)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:56)
    at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:72)
    at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:133)
    at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:112)
    at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1623)
    at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:93)
    ... 39 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T20:10:21.443

请注意，您的查询包含`U+3000 IDEOGRAPHIC SPACE`而不是常规空格：

```
... WHERE wy.palacy　= 'tak' AND wy.tetno > 120
                   ^ here 
```

Hibernate 将其视为属性名称的一部分。

# javascript - 离开回调函数

> ID：14417915
> 
> 赞同：0
> 
> 时间：2013-01-19T19:18:33.433
> 
> 标签：javascript, node.js

```
app.get("/", function(req, res) {
          if( some_func() == 0 ) {
                res.send("some_func() returned zero!");
                /* leave function(req, res) */
          } 

          res.send("Everything OK.")

}); 
```

这将如何在 Node.js 中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T19:19:44.673

[您正在`return`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/return)寻找[声明](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/return)。

```
app.get("/", function(req, res) {
      if( some_func() == 0 ) {
            res.send("some_func() returned zero!");
            return;
      } 

      res.send("Everything OK.")
}); 
```

或者只是使用`else`：

```
app.get("/", function(req, res) {
      if( some_func() == 0 ) {
            res.send("some_func() returned zero!");
      } else {
          res.send("Everything OK.")
      }
}); 
```

* * *

**NB** [Perl`last`](http://perldoc.perl.org/functions/last.html)*不像*`return`; _ _ [它类似于`break`](https://stackoverflow.com/questions/303216/how-do-i-break-out-of-a-loop-in-perl)C 类语言（[C](http://msdn.microsoft.com/en-us/library/wt88dxx6%28v=vs.80%29.aspx)、[C#](http://msdn.microsoft.com/en-us/library/adbctzc4%28v=vs.80%29.aspx)、[Java](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)、[JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/break)等），用于退出循环和开关——而不是函数。

# ios - 取消 NSOperation 并立即将其从队列中删除

> ID：14417921
> 
> 赞同：3
> 
> 时间：2013-01-19T19:19:30.260
> 
> 标签：ios, objective-c, uitableview, nsoperation, nsoperationqueue

所以这几天我一直在思考这个问题，我似乎找不到一个好的方法来让它工作。

我有一个一次`NSOperationQueue`只允许一个操作。我从文档中了解到：

> 在 OS X v10.6 及更高版本中，取消操作会导致操作忽略它可能具有的任何依赖项。这种行为使队列可以尽快执行操作的 start 方法。反过来， start 方法将操作移动到完成状态，以便可以将其从队列中删除。

当我发送取消它会设置`isCancelled`为YES，但我的问题是：

假设我有 20 个`NSOperation`在队列中，我刚刚取消了第 18 个，它会一直停留在`NSOperationQueue`它可以运行并说它已经完成（我的`NSOperation`检查正确`isCancelled`）但是因为它停留在队列中，它也停留在`UITableView`我设置`dataSource`的位置喜欢`myOperationQueue.operations`。

这就是困扰我的地方，用户将单击`Cancel`哪个将调用该`cancel`方法，`NSOperation`但该操作仍将显示，因为它仍在队列中。

我想过`start`在`cancel`方法中调用，但不允许只有队列可以`start`。

编辑：我也试图`isFinished`覆盖`cancel`：

```
[self willChangeValueForKey:@"isFinished"];
_isFinished = YES;
[self didChangeValueForKey:@"isFinished"]; 
```

它可以工作，但它也会发送`start`到队列中的下一个`NSOperation`，它可能导致同时拥有 2 个`NSOperation`，而我只想要一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T19:32:08.173

因此，如果我理解正确，未完成操作的列表就是您的 UITableView 的数据源。

一种解决方案是过滤操作列表以删除已取消的操作。表视图的数据源将是这个过滤列表，而不是原始操作列表。

# ruby - 如何比较不同模型的不同值？

> ID：14417927
> 
> 赞同：0
> 
> 时间：2013-01-19T19:20:18.430
> 
> 标签：ruby, ruby-on-rails-3

我有两个模型 Appointment 和 Schedule，在 Appointment 中我有一个名为 adate 的时间字段，在 schedule 中我有 start_time 和 end end_time 字段。

我想将 adate 中的值与 start_time 和 end_time 中的值进行比较，看看是否可以在那个时间进行约会。

我如何比较这些值？

```
 create_table "appointments", :force => true do |t|
    t.integer  "doctor_id"
    t.date     "adate"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.time     "atime"
  end

  create_table "schedules", :force => true do |t|
    t.string   "day"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "doctor_id"
    t.time     "start_time"
    t.time     "end_time"
  end 
```

这应该是一个验证，但我应该实施这个吗？

模型

```
class Appointment < ActiveRecord::Base
  attr_accessible :adate, :atime, :doctor_id  
  validates :adate, :presence => true     
  belongs_to :doctor
  validates_date :adate, :after => lambda { Date.current }  
end

class Schedule < ActiveRecord::Base
  attr_accessible :doctor_id, :day, :end_time, :start_time  
  belongs_to :doctor
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:04:35.623

从[http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-methods](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-methods)，您可以看到如何编写任意方法进行验证。

在你的情况下，你可能会写一些这种形式的东西。

```
class Appointment < ActiveRecord::Base
    # ... All the other stuff
    validate :appointment_time_is_valid_for_day

    def appointment_time_is_valid_for_day
        # TODO: Get the schedule for that day/doctor.
        unless schedule.start_time <= atime and
          atime <= schedule.end_time
            errors.add(:atime, "Doctor's not in at this time")
        end
    end
end 
```

这假设您已经有一些方法可以在预约当天获得医生的日程安排。我对您的模型了解不多，无法告诉您如何执行此操作。

# javascript - 严格模式下函数表达式中定义的变量的范围是什么？

> ID：14417928
> 
> 赞同：1
> 
> 时间：2013-01-19T19:20:19.827
> 
> 标签：javascript, scope, function-expression

据我了解，当一个变量被定义时，它会通过`this`.

如果本地没有设置范围，则最近的范围变为`window`.

然而，在**严格模式下**，本地范围设置为 undefined 而不是`window`，[作为 ECMAscript 5 规范的一部分，旨在限制对全局范围的滥用。](https://stackoverflow.com/questions/9822561/why-is-this-in-an-anonymous-function-undefined-when-using-strict)

* * *

使用[立即调用的函数表达式模式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)和严格模式来创建 jQuery 插件

```
;( function( $, window ){
   "use strict";
   var myScope = this;
   var myVar = 1;

   var myFunction = function(){
     console.log( myScope, myVar );
   } 

   $.myFunc = myFunction;

})( jQuery, window ); 
```

本地范围（上下文）未创建（通过函数调用），因此设置为未定义。

如果本地作用域是未定义且未`window.myVar`定义的，那么变量的作用域是什么`myVar`，如何访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:25:26.380

与*Scope*`this context variable`没有任何关系，就 ECMAscript 如何在下面实现*词法作用域*而言。

 **`this`将始终引用*invocation 的对象，*该对象可以在运行时更改，而*范围*/*上下文*不能更改。那里有两个函数调用，每个函数调用都有自己的*Execution Context*和自己的*Activation Object* ，分别是*Lexical Environment Record*，实现用于存储任何*本地*数据，如*正式参数、变量和函数声明*。

* * *

您在这里实际上想要实现的是创建一个*哈希*/*命名空间对象*，该对象用作保存数据的容器。因此，您不应该分配`this`，而只是创建自己的*Object*。

```
var myScope = { };  // respectively Object.create( null ); 
```

在*严格模式下*，实现将只设置`this`为*按原样*`undefined`调用的任何函数。这意味着， 的值取决于函数的调用**方式。**在您的情况下，它是一个自动执行的功能，因此，它将始终处于*严格模式*，并且（*全局*）处于*非严格模式*。*`this`**`this``undefined`*`window`****

 ****** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:32:41.507

`myVar`范围为包含闭包。当我运行您的代码，然后运行 ​​$.myFunc() 时，输出为`undefined 1`，因为`myVar`该闭包中仍然存在。然而，没有办法`myVar`从封闭的外部进入。这与用于在 JS 中实现私有变量的机制相同。

@jAndy 所说的也是正确的，`this`与范围无关，在这种情况下`this`，匿名函数的`undefined`*******

# android - 如何混淆 Android 推送通知的 GCM 密钥

> ID：14417929
> 
> 赞同：2
> 
> 时间：2013-01-19T19:20:23.947
> 
> 标签：android, push-notification, obfuscation, google-cloud-messaging

服务器密钥保留在代码中，因此如果有人最终反编译源代码，即使我相信使用 proguard，他们也可以看到密钥。我怎样才能让 proguard 混淆这个或至少优化混淆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:59:05.950

> 我怎样才能让proguard混淆这个

你不能。DexGuard 是 ProGuard 的商业分支，具有一些混淆数据的能力，但它不太可能像您自己的任何本土解决方案一样特别有用。攻击者所需要做的就是获取您的 APK，将您的 GCMIntentService 的超类替换为他们自己的，并记录该值。

> 有人可以向所有订阅者推送通知

如果您有证据表明这是可能的，请联系 security@android.com。由于项目 ID 不参与发送通知，因此我看不到您的攻击将如何工作，但也许我遗漏了一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T23:07:46.900

你在这里没有问题。有两个“密钥”，senderId（属于 Android 代码）和您的 API 密钥。App 中的 senderId 仅说明 APP 将允许从哪个服务器接收消息。没有人可以利用它来发送消息。API 密钥应保密。这是在服务器中用于在 GCM 服务器上识别的密钥。在任何情况下，此键都不应该在您的应用程序的源代码中。因此，我建议您仔细阅读 GCM 指南以了解完整的关系。

# php - php - mysql_real_escape_string 和 varchar 问题

> ID：14417937
> 
> 赞同：0
> 
> 时间：2013-01-19T19:20:59.650
> 
> 标签：php, mysql, mysql-real-escape-string

我在 php 中使用 mysql_query，我的问题是，当我使用 mysql_real_escape_string 传递一个字符串时，它没有返回任何结果。当我删除 mysql_real_escape_string 函数时，它工作得很好。这是我的代码：

```
public function select_user($user) {  
 $sql = "SELECT * FROM users WHERE username LIKE '".mysql_real_escape_string($user)."'";
 return $this->query($sql);
} 
```

注意 $this->query 是一个查询语句的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:26:22.680

很可能没有为 mysql_* 函数建立 mysql 连接，因此 mysql_real_escape_string 返回一个空字符串。

您必须使用您为`query()`方法使用的 API 所允许的任何格式化/绑定工具。

# common-lisp - 如何从普通lisp中的整数中获取单个数字

> ID：14417943
> 
> 赞同：-1
> 
> 时间：2013-01-19T19:21:19.877
> 
> 标签：common-lisp

> **可能重复：**
> [将数字强制转换为普通 lisp 中的列表](https://stackoverflow.com/questions/5559386/coercing-numbers-to-lists-in-common-lisp)

我是普通 lisp 的初学者。

如果我有数字 123456890 并且我想分别获得数字 1 2 3 5 9 我该如何在 common lisp 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:28:41.643

首先，很明显，这个问题之前已经解决过很多次了，在你问之前，你必须寻找解决方案，否则你就很难让别人找到一个好的解决方案。所以，这是一个较旧的答案：[强制数字到普通 lisp 中的列表](https://stackoverflow.com/questions/5559386/coercing-numbers-to-lists-in-common-lisp)

```
(defun int-to-list (int)
  (assert (>= int 0) nil "Argument must be non-negative")
  (if (= int 0) (list 0)
      (loop with result = nil
         while (> int 0) do
           (multiple-value-bind (divisor remainder)
               (floor int 10)
             (push remainder result)
             (setf int divisor))
         finally (return result)))) 
```

# gcc - 如何编译和链接 MIPS-I 目标？

> ID：14417944
> 
> 赞同：1
> 
> 时间：2013-01-19T19:21:20.083
> 
> 标签：gcc, cross-compiling

我正在使用“toolchain-mipsel_3.3.6_BRCM24”并尝试编译和链接

1) ELF 新的 32 位 LSB 可执行文件，MIPS，MIPS-I 版本 1 (SYSV)

但我得到了这个：

2) ELF 新的 32 位 LSB 可执行文件，MIPS，MIPS32 版本 1 (SYSV)

但是目标文件编译为此：

3) ELF new 32-bit LSB relocatable, MIPS, MIPS-I version 1 (SYSV)

我认为目标文件编译得很好，但为什么它生成格式为 (2) 而不是 (1) 的可执行文件？

看起来我需要传递一些链接器选项，对吧？

但如果是这种情况，那么我不知道是哪个以及如何。请帮忙。我以前没有交叉编译过任何东西。

顺便提一句。输出 (1)、(2) 和 (3) 由 binwalk 生成。

# java - javamail 中使用的 mail.smtp.sendpartial 属性是否特定于 sun 实现？

> ID：14417945
> 
> 赞同：1
> 
> 时间：2013-01-19T19:21:27.647
> 
> 标签：java, properties, smtp, jakarta-mail, rfc

javamail 中使用的 mail.smtp.sendpartial 属性是否特定于 sun 实现？

或者我是否可以期望（或希望）gnu 实现也会使用此属性并提供相同的行为（即，如果属性设置为 true，则发送它可以发送的内容）。

如果这是特定于 sun 的，那么是否可以说所有属性都以 mail.smtp 开头。是太阳特定的吗？

即，我是否正确假设 smtp 类，即 SMTPTransport，是那些特定于实现的类，并且 sun 文档中提到的任何属性仅在 sun 实现中使用，并且任何 RFC 都没有提到这些属性?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:30:56.057

mail.smtp.sendpartial 属性未由 JavaMail 规范定义，因此特定于 Sun 提供程序。JavaMail 规范定义了一些标准属性，包括一些邮件。特性。希望这一切都可以从[JavaMail javadocs](http://javamail.kenai.com/nonav/javadocs/index.html)中弄清楚，您阅读过 javadocs 吗？特别是，各种包的文档描述了属性；不要忘记向下滚动。

# c# - Linq（EntityFramework）中的正则表达式，数据库中的字符串处理

> ID：14417947
> 
> 赞同：10
> 
> 时间：2013-01-19T19:21:48.543
> 
> 标签：c#, .net, regex, linq, entity-framework

我的表中有一个列，其中包含以下值

```
 "FilterA:123,234,34;FilterB:12,23;FilterC:;FilterD:45;" 
```

过滤器由';'分隔 每个过滤器的值用“，”分隔。过滤器的名称和它的值之间有一个“：”。

现在，我可以做任何只能提取值部分的事情吗？就像“FilterA”的“123,234,34”一样。或者我可以给它一个像“234”这样的数字来搜索“FilterA”的值部分和/或“FilterB”的值部分中的“54”吗？我想我知道使用正则表达式是可能的，但我不知道如何。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-19T19:24:28.853

您不能在 Linq to Entities 查询中使用正则表达式，因为它们不能被翻译成 SQL。你甚至不能用.`String.Split`来分割你的过滤器`;`。您在这里有两个选择：

*   更改数据库表结构。例如，创建`Foo_Filter`将您的实体链接到过滤器的表。然后创建`Filters`将包含过滤器数据的表。
*   在内存中执行查询并使用 Linq to Objects。此选项会很慢，因为您必须将所有数据从数据库获取到内存

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T09:57:34.153

如果您的底层数据库提供程序是 SQL Server，那么您可以使用[SqlMethods.Like](http://msdn.microsoft.com/en-us/library/system.data.linq.sqlclient.sqlmethods.like.aspx)将数据库结果集过滤为可管理的数据子集，然后可以使用 RegEx 在本地进行分析

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:29:29.390

+1 @lazyberezovsky，您不能在 Linq to Entities 中执行正则表达式，因为它无法将其转换为 SQL。您可以将所有记录拉回内存，然后对其执行 Linq to Objects（对变量执行`.ToList()`一个变量，然后对该正则表达式执行第二个 linq 查询），但这意味着您会将每个 db 记录加载到内存中以处理此查询。相同的建议：更改数据库结构，这样您就不需要这样做了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T19:36:37.940

我想如果您希望所有内容都在数据库服务器上执行，您需要一个可以解析这些过滤器的 SQL 函数，可能会返回一个多列表。不幸的是，我不在可以提供任何示例代码的机器上。

# haskell - Haskell mongoDB驱动（1.3.1）游标迭代示例

> ID：14417948
> 
> 赞同：2
> 
> 时间：2013-01-19T19:22:00.437
> 
> 标签：haskell

我是 Haskell 的初学者，我倾向于边做边学。

有人可以为我提供一个如何将光标与 nextBatch 或 nextN 一起使用的示例吗？ [http://hackage.haskell.org/packages/archive/mongoDB/1.3.1/doc/html/Database-MongoDB-Query.html#g:12](http://hackage.haskell.org/packages/archive/mongoDB/1.3.1/doc/html/Database-MongoDB-Query.html#g:12)

尝试过这样的事情（我试图编写一个自定义迭代函数，其中 f 是我想映射到所有文档的函数）

```
let cursor = Mdb.find (Mdb.select selector collection)
       -- consume :: IO ()
       consume = do
                r <- runAction db $ Mdb.nextBatch =<< cursor
                if length (fromRight r) == 0
                    then return ()
                    else do
                        mapM_ f (fromRight r)
                        consume
   consume 
```

现在它在无限循环中运行，总是返回相同的文档集。我猜光标永远不会被修改？游标类型本身有一个 MVar 作为它的元素之一，首先我认为当我执行 nextBatch 时会更新它，但这从未发生过。

也许我应该重写它留在 Action monad 中的递归方式（参见 mongo 驱动程序），而不是 IO？我被困住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:18:52.150

当您编写`let cursor = Mdb.find (Mdb.select selector collection)`它时，它会创建`Action m Cursor`仅在`Action m`上下文中执行的，因此实际上您每次都创建了新游标`=<< cursor`。

是的，我认为您应该在大多数`Action m`情况下重写您的功能。例如：

```
consume :: IO ()
consume = void $ runAction db $ do
    cursor <- Mdb.find $ Mdb.select selector collection
    go cursor
  where
    go cursor = Mdb.nextBatch cursor >>= \result -> case result of
        [] -> return ()
        xs -> mapM_ f xs >> go cursor 
```

# c++ - VC++ 调试断言在程序退出时失败

> ID：14417950
> 
> 赞同：0
> 
> 时间：2013-01-19T19:22:10.973
> 
> 标签：c++, debugging, destructor, assert

我正在尝试创建一个链表类模板（是的，我知道 c++ 库中有一个，但我想创建自己的以供娱乐）。我已经跟踪了代码，在程序退出之前一切似乎都很好。

这是使用的代码：

**列表.h：**

```
#ifndef LIST_H
#define LIST_H

#include "misc.h"

template <typename T> class CList {

private:

  class CNode {

  friend CList;

  private: T data; 
       CNode* next;

  public: CNode() : next(NULL) {}
      ~CNode() { delete [] next; }
  };

private: int length; 
         CNode* first;

public: 

  CList() : length(0), first(NULL) {}

  CList(int i_length) : first(NULL) {

    int i;

    CNode* cur = NULL;
    CNode* prev = NULL;

    if (i_length < 0) length = 0;
    else length = i_length;

    for (i=0;i<length;i++) {

      // allocate new CNode on heap
      cur = new2<CNode>();

      // attach preceding CNode pointer
      if (prev) prev->next = cur;
      else first = cur;

      prev = cur;
    }
  }

  ~CList() { delete first; }

}; 
```

**杂项**

```
#ifndef MISC_H
#define MISC_H

#include <stdlib.h>
#include <stdio.h>
#include <string.h>

inline void terminate( const char* message, int code ) {
  printf("\n\n%s\n\n",message);
  system("pause");
  exit(code);
};

template <typename T> inline T* new2() {
  T* ret = new T;
  if (!ret) terminate("Insufficient Memory",-2);
  return ret;
}

template <typename T> inline T* new2(int num) {
  if (num <= 0) terminate("Invalid Argument",-1);
  T* ret = new T[num];
  if(!ret) terminate("Insufficient Memory",-2);
  return ret;
}

#endif 
```

**主文件**

```
#include <stdio.h>
#include <stdlib.h>
#include "../Misc/misc.h"
#include "../Misc/list.h"

int main(int argc, char* argv[]) {

  //CList<int> m;
  CList<int> n(5);

  system("pause");

  return 0;
} 
```

这是变量“n”在“return 0;”之前的断点处的样子。

[http://s20.beta.photobucket.com/user/marshallbs/media/Untitled_zps52497d5d.png.html](http://s20.beta.photobucket.com/user/marshallbs/media/Untitled_zps52497d5d.png.html)

这是发生错误的上下文。不幸的是，此时我无法再查看观察列表中的变量“n”。

```
 _mlock(_HEAP_LOCK);  /* block other threads */
    __TRY

        /* get a pointer to memory block header */
        pHead = pHdr(pUserData);

         /* verify block type */
        _ASSERTE(_BLOCK_TYPE_IS_VALID(pHead->nBlockUse)); 
```

当我为我的列表使用默认构造函数时没有错误。我不明白发生了什么，因为当内存释放过程到达具有空“next”指针的第五个 CNode 对象时，它应该停止。它就好像它试图释放一个无效的非空指针，但我不明白这是怎么发生的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:10:15.887

一个问题是您`next`使用分配`new`和释放它`delete[]`。这是未定义的行为。

分配：

```
 cur = new2<CNode>(); // new2 uses `new' and not `new[]' 
```

重新分配：

```
 ~CNode() { delete [] next; } 
```

将后者替换为`delete next;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:10:34.230

我按原样构建并运行（从调试器）代码并且没有断言失败。事实上，根本没有内存释放，因为 CList 没有析构函数（你没有发布完整的代码吗？）。

# php - 删除多个逗号正则表达式

> ID：14417951
> 
> 赞同：0
> 
> 时间：2013-01-19T19:22:18.500
> 
> 标签：php, regex

有人可以让我知道如果它们在 PHP 中彼此相邻，我将如何删除多个逗号。

```
$address= rtrim(preg_replace('!\s+!', ' ', $address_line_1.' '.$address_line_2.', '.$town_village_city.', '.$state_province_county.', '.$postal_code.', '.$country),',');
//return  preg_replace('/([!?,.])+/',' ',$address);
return  preg_replace('!\,+!',' ',$address); 
```

例如，我可能有一个没有 town_village 的地址，所以最后会有多个逗号。

还有任何测试 PHP 正则表达式的好资源吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T10:06:03.787

假设这些逗号之间没有空格，您可以简单地将多个逗号替换为一个逗号：

```
$cleadAddress = preg_replace('/,+/', ',', $address); 
```

尽管您用逗号 (!) 替换每个逗号，但您也替换了多个逗号。如果更复杂的正则表达式值得努力节省一些执行时间，这取决于您的确切数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T09:47:30.943

可能是一个合适的正则表达式，但这是我的工作 -

```
$cleanedAddress = str_replace(',',', ',preg_replace('/,+/', ',', $address)); 
```

使 $address 只是逗号分隔，运行 preg_replace 删除多个逗号，然后使用 str_replace 将逗号变成逗号空格！

# mongodb - 在 Ubuntu 12.04 上通过 mongodb-10gen 包安装时，Mongo 不运行

> ID：14417954
> 
> 赞同：6
> 
> 时间：2013-01-19T19:22:22.640
> 
> 标签：mongodb, ubuntu, ubuntu-12.04

所以我在这里遵循了 Mongodb 安装说明：http: [//docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/)。`start mongodb`但是，安装后，使用or调用时 mongodb 不会运行`/etc/init.d/mongodb start`。在四处挖掘并向`/lib/init/upstart`（！）添加调试注释之后，我推断问题在于该`mongodb-10gen`包莫名其妙地没有创建一个`/usr/bin/mongodb`可执行文件供新贵参考 - 它创建了一堆其他可执行文件，但不是那个。这是怎么回事？10gen包坏了吗？指令有误吗？还是我的系统上发生了真的、真的、真的很奇怪的事情？

PS 安装`mongodb`Ubuntu 12.04 附带的软件包就像一个魅力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T04:25:16.730

有 mongod 可执行文件吗？

如果 /etc/conf.d/mongod.conf 或 /etc/mongo/mongod.conf 或类似内容中有正确的配置，您可以通过运行 mongod -f /etc/mongo/mongod.conf 来启动服务器。

如果没有正确的配置，就自己写吧。[http://docs.mongodb.org/manual/reference/configuration-options/](http://docs.mongodb.org/manual/reference/configuration-options/)

[我的配置](http://pastebin.com/mYG7m1UL)。

此外，如果缺少 /usr/bin/mongodb 出现错误，您可以通过执行以下命令（使用 root 权限）创建从 /usr/bin/mongodb 到 /usr/bin/mongod 的符号链接：

```
# ln -s /usr/bin/mongod /usr/bin/mongodb 
```

# css - 如何在 Bootstrap 中正确使用填充和边距

> ID：14417958
> 
> 赞同：0
> 
> 时间：2013-01-19T19:22:47.743
> 
> 标签：css, twitter-bootstrap

我需要将 100px 的上边距应用到 Boostrap 中的*嵌套*行，以便内容与页面中的其他一些内容垂直对齐 - 当您在大屏幕上查看时，一切都很好。当我缩小浏览器大小以模仿平板电脑/手机时，内容会缩小并折叠起来——也很好。然而，100px 的边距导致内容现在被放置在平板电脑页面的下方 - 丑陋。

我曾考虑使用媒体查询来消除平板电脑和手机 100 像素边距的内容 - 但消除内容似乎是错误的方法。

非常感谢您的所有建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:25:01.213

如果内容对平板电脑和手机不重要，那么删除它是完全有效的。不幸的是，“不重要”完全依赖于上下文。但是，您可以只使用媒体查询来设置不同的样式（即在完整布局中设置 100px，在平板电脑和移动设备视图中设置更小或无边距）

# c++ - 使用 C++ 编译器包含 C 头文件时的警告

> ID：14417960
> 
> 赞同：1
> 
> 时间：2013-01-19T19:22:55.560
> 
> 标签：c++, c, gcc, include

我有一些为 C99 程序编写的头文件。此标头包含所有函数定义，并且不与源文件配对。我将它包含在 C++ 文件中。

我的 C++ 编译器标志 include `-pedantic -std=c++11`，它在头文件中给了我各种警告，例如“ISO C++ 禁止复合文字”和“ISO C++ 禁止可变长度数组”。显然，C++ 编译器将 C99 代码视为 C++。两个问题：

1.  在尝试编写可以在使用不同编译器的各种平台上正确运行的代码时，这是一个潜在的问题吗？
2.  解决警告并生成符合标准的代码的好方法是什么？我正在考虑使用 gcc 制作一个预编译的头文件，但对该过程知之甚少，无法确保我不会因为在 C++ 源代码中包含 C 预编译头文件而产生意外后果。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T19:36:06.077

> 在尝试编写可以在使用不同编译器的各种平台上正确运行的代码时，这是一个潜在的问题吗？

是的。GCC 可能只是给出警告，其他编译器（例如 Visual Studio 或带有其他选项的 GCC）很可能会给出错误。

> 解决警告并生成符合标准的代码的好方法是什么？

解决问题的正确方法是在 C 和 C++ 的公共子集中编写标头。使用 C99 特性（例如可变长度数组和复合文字）的函数和对象定义应移至单独的 C 源文件（使用 C 编译器编译！）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T19:48:59.600

要在 C++ 项目中包含纯 C 头文件 (*)，您应该将 include 语句包装在一个`extern "C"`块中：

```
// C++
extern "C" {
// C-code goes here
#include "foo.h"
} 
```

这是因为 C++ 对所有函数名执行名称修改以使重载工作。C 不使用名称修饰，因此 C++ 使用名称修饰解析 C 函数*签名*。

请注意，`extern "C"`它不会将编译器置于“C 模式”（没有这种模式，但您可能会错误地认为该指令是这样的），**它不会破坏函数名称**（+ 更改调用约定并禁止重载; 感谢*末日论*者指出这些事情）。

*但是，如果您只包含头文件*（使用内联实现），这应该不是问题，因为只有当您将 C 源文件或库*链接*到 C++ 项目时，此名称修改才会成为问题，因为函数名称是在这种情况下不同。

话虽如此，您应该使用C 和 C++的**公共子集作为****头文件**，使用 C 编译器而不是 C++ 分别提取和编译这些函数的实现。然后，您（希望）可以将这两个部分链接在一起。很多 C 库已经有与 C++ 兼容的头文件，所以这是一个常见的过程。

*(*)：通过使用语言功能的公共子集以及将所有内容包装在条件* `extern "C"`块中，一些头文件已经与 C 和 C++ 语言兼容。对于此类标头，您不应使用此方法，而仅适用于其中没有此类块的标头。

# php - 将 1 个 InnoDB 表添加到充满 MyISAM 表的数据库中（效果）

> ID：14417961
> 
> 赞同：0
> 
> 时间：2013-01-19T19:23:00.363
> 
> 标签：php, mysql, innodb, myisam

我们有一个充满 MyISAM 表的数据库。问题是我们只需要一张表上的事务，称为`payments`我的问题是，这行得通吗？我的意思是通过将该表的引擎更改为`InnoDB`并在 php 上使用事务，这样可以吗？还是我必须搞砸并做更多的事情？无论如何这会影响我的数据库吗？该表是孤立的，它没有外键，因为`MyISAM`不支持它们。

提前泰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:27:32.043

如[存储引擎](http://dev.mysql.com/doc/en/storage-engines.html)下所述：

> 重要的是要记住，您不限于对整个服务器或架构使用相同的存储引擎：您可以为架构中的每个表使用不同的存储引擎。

`payments`所以，是的，你的提议会奏效（当然，前提是你只希望在桌面上达到 ACID 合规性）。

# c# - 找出有多少字符串匹配

> ID：14417962
> 
> 赞同：1
> 
> 时间：2013-01-19T19:23:01.047
> 
> 标签：c#, .net, string

假设我有两个字符串：

```
"SomeTextHereThatIsTheSource"
"SomeTextHereThatIsCloseToTheSourceButNotTheSame" 
```

是否有一种巧妙的 .net 方法可以知道文本的哪一部分是相同的（从头开始）。

所以在这个例子中，结果将是：

```
"SomeTextHereThatIs" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T19:33:17.440

您可以使用 TakeWhile：

```
string MatchFromStart(string s1, string s2)
{
    if (s1 == null || s2 == null) return "";

    var matchingArray = s1.TakeWhile((c, i) => { return i < s2.Length && c == s2[i]; });
    return String.Join("", matchingArray);
} 
```

然后使用它：

```
string s1 = "SomeTextHereThatIsTheSource";
string s2 = "SomeTextHereThat";
string s3 = "SomeTextHereThatIsCloseToTheSourceButNotTheSame";
Console.WriteLine(MatchFromStart(s1, s2));   // SomeTextHereThat
Console.WriteLine(MatchFromStart(s2, s1));   // SomeTextHereThat
Console.WriteLine(MatchFromStart(s3, s1));   // SomeTextHereThatIs
Console.WriteLine(MatchFromStart("", s1));   // (blank string)
Console.WriteLine(MatchFromStart(s3, ""));   // (blank string)
Console.WriteLine(MatchFromStart(null, s1)); // (blank string)
Console.WriteLine(MatchFromStart(s2, null)); // (blank string) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T19:24:32.403

我会说`for`在较短的字符串上循环，逐个字符比较是你最好的选择。它也可能是最快的。

```
// str1 is shorter or equal in length to str2:
for(int i=0; i < str1.Length; i++)
{
  if(str1[i] == str2[i])
   continue;

  return i;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:38:09.890

使用简单的 while 循环来确定匹配长度：

```
int len = 0;
while (len < s1.Length && len < s2.Length && s1[len] == s2[len]) {
    len++;
} 
```

如果您提前确定两个字符串的最小长度，您可以稍微改进一下

```
int minLength = Math.Min(s1.Length, s2.Length);
int len = 0;
while (len < minLength && s1[len] == s2[len]) {
    len++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T19:53:56.570

虽然它可能不是最优化的，但利用 a`string`也是`IEnumerable<char>`.

```
static string CommonPrefix(string string1, string string2) {
    var length = Enumerable.Zip(string1, string2, (a, b) => a == b).TakeWhile(a => a).Count();
    return string1.Substring(0, length);
} 
```

# android - Android：MapFragment 没有在动画中移动

> ID：14417965
> 
> 赞同：4
> 
> 时间：2013-01-19T19:23:14.277
> 
> 标签：android, android-animation, mapfragment

我有一个包含 MapFragment 的视图

我的 mainViewPanel 看起来像这样

```
<LinearLayout
android:id="@+id/main_view_panel"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_weight="0.5"
android:orientation="horizontal">

<fragment
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_weight="0.5"
class="com.google.android.gms.maps.SupportMapFragment"
map:cameraTargetLat="40.72"
map:cameraTargetLng="-74.00"
map:cameraZoom="8"/>

</LinearLayout> 
```

我的翻译代码看起来像这样

```
TranslateAnimation anim = new TranslateAnimation(0, 500, 0, 0);
anim.setFillAfter(true);
anim.setDuration(250);
mainViewPanel.startAnimation(anim); 
```

视图的其余部分动画，但地图保持不变。就像主视图窗口正在移动，我可以在地图右侧看到更多内容，但地图本身并没有在视觉上移动。动画适用于其他视图，如 TextView

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T20:29:13.173

这适用于较新版本的android

```
mainViewPanel.animate().translationX(500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:56:42.750

这是因为新地图 api 是使用 SurfaceView 创建的，并且由于该动画不可行。

作为我发现的临时补丁是：**在 MapFragment 上使用任何透明视图**。因此，如果您要为 MapFragment 制作动画，它会随之制作动画，此时地图将是不可见的。

举个例子：

```
<RelativeLayout
android:id="@+id/main_view_panel"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal">

<fragment
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_weight="0.5"
class="com.google.android.gms.maps.SupportMapFragment"
map:cameraTargetLat="40.72"
map:cameraTargetLng="-74.00"
map:cameraZoom="8"/>

 <ImageView
            android:id="@+id/map_overlay"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#00000000" />

</RelativeLayout> 
```

试试这个。它应该工作。

注意：当您为视图设置动画时，您可能必须更改其可见性。如果要在动画后显示地图，则必须隐藏叠加视图，并且在要开始动画时，必须取消隐藏叠加视图。但是您必须确保只有在动画完成后才能完成隐藏/取消隐藏过程。

**动画步骤**：

*   在开始动画之前，取消隐藏覆盖视图
*   动画完成后，意味着经过一段时间的延迟，隐藏覆盖视图

这个对我有用。

# c# - 一次只打开一个子窗体的实例c#

> ID：14417967
> 
> 赞同：2
> 
> 时间：2013-01-19T19:23:17.643
> 
> 标签：c#, subforms

我正在编写一个应用程序，它使用类似向导的 5 个简单表单系列。第一个表单 NewProfile 是从主应用程序 MainForm 上的菜单项打开的，MainForm 的子表单也是如此。第二种形式，TwoProfile，是从 NewProfile 上的一个按钮打开的。第三种形式，ThreeProfile 是从 TwoProfile 上的一个按钮打开的，对于所有 5 个形式，依此类推。顺序如下：MainForm --> NewProfile <--> TwoProfile <--> ThreeProfile <--> FourProfile <--> FiveProfile。我的问题是，当打开任何表单（NewProfile、TwoProfile、ThreeProfile、FourProfile 或 FiveProfile）时，我不希望用户能够创建 NewProfile 的实例。

我从实现一个单例模式开始，它在半途而废。如果 NewProfile 打开并且我转到 MainForm 并尝试创建另一个 NewProfile 实例，它就可以工作。如果 NewProfile 已被破坏，则它不起作用，通过前进到下一个表单并且 TwoProfile、ThreeProfile、FourProfile 或 FiveProfile 之一打开。它告诉我 NewProfile.IsDisposed 是真的，给了我对 Singleton 实例的错误引用。

我想不通的是如何执行我的逻辑，以便在 TwoProfile、ThreeProfile、FourProfile 或 FiveProfile 之一打开或 NewProfile 本身打开时不会创建 NewProfile。

我希望这是有道理的。除了我为 Singleton 所做的之外，我并没有太多要发布的代码。

```
 private static NewProfile _instance = null;
   public static NewProfile Instance
    {
        get
        {
            if (_instance == null)
            {
                _instance = new NewProfile();
            }
            return _instance
        }
    } 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:15:18.270

我们处理这个问题的方法是有一个静态窗口管理器类来跟踪打开的表单实例。当用户执行会导致打开新窗口的操作时，我们首先检查窗口管理器以查看表单是否已打开。如果是，我们将重点放在它上，而不是创建一个新实例。

每个打开的表单都继承自一个基本表单实现，该实现在打开时自动向窗口管理器注册，并在关闭时删除其注册。

这是 WindowManager 类的粗略概述：

```
public class WindowManager
{
    private static Dictionary<string, Form> m_cOpenForms = new Dictionary<string, Form>();

    public static Form GetOpenForm(string sKey)
    {
        if (m_cOpenForms.ContainsKey(sKey))
        {
            return m_cOpenForms[sKey];
        }
        else
        {
            return null;
        }
    }
    public static void RegisterForm(Form oForm)
    {
        m_cOpenForms.Add(GetFormKey(oForm), oForm);
        oForm.FormClosed += FormClosed;
    }

    private static void FormClosed(object sender, FormClosedEventArgs e)
    {
        Form oForm = (Form)sender;
        oForm.FormClosed -= FormClosed;
        m_cOpenForms.Remove(GetFormKey(oForm);
    }

    private static string GetFormKey(Form oForm)
    {
        return oForm.Name;
    }
} 
```

您可以按如下方式使用它：

```
 Form oForm = WindowManager.GetOpenForm("Form1");
        if (oForm != null)
        {
            oForm.Focus();
            oForm.BringToFront();
        }
        else
        {
            oForm = new Form1();
            WindowManager.RegisterForm(oForm);
            // Open the form, etc
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:34:01.947

正如评论中所建议的，每个“表单”实际上都可以是您交换的用户控件。这样，您只有一个表单和多个页面。或者，您可以隐藏表单。

如果您想要多个表单，那么您可以遍历所有打开的表单并查看您要检查的表单是否打开。如果没有，您可以打开`NewProfile`.

```
bool shouldOpenNewDialog = true;

foreach (Form f in Application.OpenForms)
{       
    //give each dialog a Tag value of "opened" (or whatever name)
    if (f.Tag.ToString() == "opened")
        shouldOpenNewDialog = false;    
}

if(shouldOpenNewDialog)
    np = new NewProfile(); 
```

它未经测试，但它应该遍历所有打开的表格并寻找任何有`Tag`说法的东西`opened`。如果遇到一个，那么它将`shouldOpenNewDialog`标志设置为 false 并且`NewProfile`不会被调用。

# css - 动态平铺显示

> ID：14417968
> 
> 赞同：0
> 
> 时间：2013-01-19T19:23:19.737
> 
> 标签：css

我有点 CSS 菜鸟，我希望这里有人能耐心地指出我的方法的错误。

基本上，我正在创建一个移动网络平台，我正在设计一个概念“登陆页面”，它将由四个相同大小的矩形（在某些分辨率上为正方形）瓷砖组成（灵感来自这里：[http ://tinyurl.com/贝茨](http://tinyurl.com/beartss)）。

显然，由于这个应用程序是面向移动设备的，我一直在避免固定的宽度和高度，但不能完全得到与我链接的图像中看到的相同的布局。我的 HTML 布局如下：

```
 <div class="page-container">
            <div class="tile-1"></div>
            <div class="tile-2"></div>
            <div class="tile-3"></div>
            <div class="tile-4"></div>
        </div> 
```

我正在使用的当前 CSS 是......

```
html, body, .container 
{
    height: 100%;
    min-height: 100%;
}

.page-container 
{
    margin: 0 auto;
    border: 1px solid black;
    height: 99%;
    min-height: 99%;
    width: 99%;
}

.tile-1 
{
    border: 1px solid black;
    height: 48%;
    width: 48%;
}

.tile-2 
{
    border: 1px solid black;
    height: 48%;
    width: 48%;
}

.tile-3 
{
    border: 1px solid black;
    height: 48%;
    width: 48%;
}

.tile-4 
{
    border: 1px solid black;
    height: 48%;
    width: 48%;
} 
```

这甚至远不接近我想要实现的目标，而且我听说基于百分比的高度从来都不是一个好主意，无论如何，上面的 CSS 给了我这个：[http://i.imgur .com/nXbcHze.png](http://i.imgur.com/nXbcHze.png)

任何帮助将不胜感激，我确定我只是错过了一些关于高度的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:16:40.627

试试`float:left`。[演示](http://cssdeck.com/labs/8gtrpek4)-> 是您正在寻找的解决方案吗？

在每个图块上添加了一个`min-width`，以便模板在任何分辨率下都是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:28:23.267

通常，块级元素不会与另一个块级元素出现在同一行。因此，您需要浮动它们或将它们的显示更改为类似 inline-block 的内容。

[http://jsfiddle.net/kyyjg/](http://jsfiddle.net/kyyjg/)

您会发现将边界上的 px 与尺寸百分比混合会导致元素不占用适当的空间，因为盒子模型的工作方式。您可能会发现添加`box-sizing: border-box`很有帮助。

如果您对另一种方法感兴趣，以下是使用 flexbox 的方法：

[http://jsfiddle.net/LJMdx/4/](http://jsfiddle.net/LJMdx/4/)

```
html, body {
    height: 100%;
}

.page-container {
    min-height: 100%;
    background: red;
    display: -webkit-flex;
    display: flex;
    -webkit-flex-flow: row wrap;
    flex-flow: row wrap;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    padding: 1%;
}

.page-container div {
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    -webkit-flex: 1 1 48%;
    flex: 1 1 48%;
    margin: 1%; /* optional */
    border: 1px solid;
} 
```

如果您不想要瓷砖之间的间隙，请降低 1% 的边距和填充：http: [//jsfiddle.net/LJMdx/3/](http://jsfiddle.net/LJMdx/3/)

[http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

# javascript - Simultaneous cursors

> ID：14417971
> 
> 赞同：1
> 
> 时间：2013-01-19T19:23:50.843
> 
> 标签：javascript, d3.js, data-visualization, dom-events, mousemove

I'm trying to emulate this graph: [http://www.nytimes.com/interactive/2012/11/30/us/tax-burden.html](http://www.nytimes.com/interactive/2012/11/30/us/tax-burden.html)

Here is the bare-bones rendition: [http://jsfiddle.net/jd5Ym/6/](http://jsfiddle.net/jd5Ym/6/)

I can't get the different cursors to each follow the data for their own city. I can only do one at a time. My code depends on this function:

```
function mousemove() {
  // p is the fraction of a graph traversed. decimalize strips integers.
var p=decimilize((x0.rangeBand()-d3.mouse(this)[0]+margin.left)/(x0.rangeBand())); 
var u=data[Math.round(data.length-p*data.length)];
var v=cities[1].values[Math.round(data.length-p*data.length)];
cursor.data(data).attr("transform", "translate(" + (x1(u.date)) +","+y(v.temperature)+")");
        } 
```

Where it says `v=cities[1]`, the index decides which city's data to follow. I want it to index each city itself, but when I try using the `function (d,i) {...}` setup, it doesn't work out, and I tried appending the `mousemove`function within a transform attribute in the declaration of city, and that didn't work either.

I am a beginning programmer so maybe this is easy. The data structure and parsing come out of Mike Bostock's examples.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:52:16.563

You should use selectAll('.cities').each(...) to step over all the cities and update their cursors independently.

```
function mousemove() {
  // the proportion of the way across any given graph that the mouse is
  var mouseX  = d3.mouse(this)[0]
  var graph_width = x0.rangeBand()
  // the corresponding data
  var index = Math.floor( ( mouseX / graph_width ) * data.length );
  d3.selectAll('.city')
    .each(function(d, i){
      var u = cities[i].values[index];
      d3.select(this).select('.cursor')
        .attr('transform', 'translate(' + x1(u.date) + ',' + y(u.temperature) + ')')
    })
} 
```

See here for the full working example: [http://jsfiddle.net/jd5Ym/9/](http://jsfiddle.net/jd5Ym/9/)

# css - 如何将另一个div中的div与文本垂直对齐？

> ID：14417979
> 
> 赞同：2
> 
> 时间：2013-01-19T19:24:29.463
> 
> 标签：css, html

我正在尝试将一个 div 垂直居中在存在文本的父 div 中。这是我所拥有的：

![在此处输入图像描述](../Images/bd4952df8d45cce5d93558ed000446da.png)

它看起来有点好笑，因为文本似乎正确居中，但黄色框不是。这就是我的做法：

```
.btn {
      background-color: #ccc;
      color: #000;
      width: 200px;
      border: solid 1px black;
      text-align: center;
      vertical-align: middle;
      display: table-cell;
}
.square {
      background-color: #ff0;
      width: 20px;
      height: 20px;
      display: inline-block;
}
.inner {
      display: inline-block;
}

<div class="btn">
  <div class="square"></div>
  <div class="inner">Hello</div>
  <div class="square"></div>
</div> 
```

我应该使用“table-cell”+vertical-align 吗？我只关心 html5，我真的只是针对最新版本的移动 safari，所以不必担心旧版浏览器等。

这是一个js小提琴：

[http://jsfiddle.net/TrJqF/](http://jsfiddle.net/TrJqF/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:29:15.457

设置`vertical-align:top`在方形类。额外的空间来自为后代文本元素（如 j、g、y 等）保留在行下方的空间。

**[jsFiddle 示例](http://jsfiddle.net/j08691/TrJqF/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:23:48.780

实际上两者的高度没有区别。将黄色背景颜色应用于内部类，并查看显式和无高度的差异。

方形 div 没有内容，内部 div 有内容。css 框根据其内容自行对齐。向方形 div 添加空白区域，如下所示：

```
 <div class="btn">
   <div class="square">&nbsp;</div>
   <div class="inner">Hello</div>
   <div class="square">&nbsp;</div>
  </div> 
```

如果您愿意，您可以添加顶部和底部边距 1 或 2 像素，这将显示您的期望。

# scala - Scala：重载方法解析

> ID：14417987
> 
> 赞同：2
> 
> 时间：2013-01-19T19:25:26.153
> 
> 标签：scala, overloading

Scala 的重载方法解析在这里看起来很奇怪：

```
abstract class Parent { type T }
class Child extends Parent { type T = Int }

def f[T <: Parent](a: Array[T]): Array[T#T] = null
def f[T](a: T): Array[T] = null

val s = f(Array(new Child))                   // OK; calls the first f
val t: Array[Child#T] = f(Array(new Child))   // type mismatch; tries to apply the second f 
```

尽管 s 与 t 的类型相同，但使用第一个 f 成功评估了 s，但仅给出类型提示会使编译器尝试第二个 f 并失败，需要 Int 作为其参数。我最终避免使用方法重载，但只是出于好奇，有人可以告诉我这里有什么问题吗？

# android - Trigger.iobarcode.scan 抛出 Java 错误

> ID：14417989
> 
> 赞同：1
> 
> 时间：2013-01-19T19:25:36.737
> 
> 标签：android, trigger.io

在仅包含样板 HTML 和以下 JavaScript 的应用程序中使用 Trigger.io 的[条形码 API ：](http://docs.trigger.io/en/v1.4/modules/barcode.html)

```
forge.barcode.scan(function (value) {
    alert("You scanned: "+value);
}); 
```

我在日志中收到以下错误：

> Forge Java 错误：RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序

完整的错误条目：

> [INFO] D/Forge（1109）：返回：{“content”：{“message”：“Forge Java 错误：RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序”“type” :"UNEXPECTED_FAILURE","subtype":null,"full_error":"java.lang.RuntimeException: 无法在 android.os.Handler 调用 Looper.prepare() 的线程内创建处理程序。(Handler.java: 197) 在 android.os.Handler.(Handler.java:111) 在 android.app.Dialog.(Dialog.java:107) 在 android.app.AlertDialog.(AlertDialog.java:114) 在 android.app.AlertDialog $Builder.create(AlertDialog.java:931) at android.app.AlertDialog$Builder.show(AlertDialog.java:950) at io.trigger.forge.android.modules.barcode.API.scan(API.java:68 ) 在 java.lang.reflect.Method.invokeNative(Native Method) at java.lang.reflect.Method.invoke(Method.java:511) at io.trigger.forge.android.core.ForgeApp.callJavaFromJavaScript(ForgeApp.java:247) at io。 trigger.forge.android.core.ForgeJSBridge$1.run(ForgeJSBridge.java:17) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor .java:573) 在 java.lang.Thread.run(Thread.java:856)\n"},"callid":"35E46BC5-1C17-4354-B09B-BE67B5FCD513","status":"error"}ForgeJSBridge$1.run(ForgeJSBridge.java:17) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) at java. lang.Thread.run(Thread.java:856)\n"},"callid":"35E46BC5-1C17-4354-B09B-BE67B5FCD513","status":"error"}ForgeJSBridge$1.run(ForgeJSBridge.java:17) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) at java. lang.Thread.run(Thread.java:856)\n"},"callid":"35E46BC5-1C17-4354-B09B-BE67B5FCD513","status":"error"}

**更新：**

下面是我的代码：

文件`config.json`

```
{
    "config_version": "2",
    "name": "Scan to Web",
    "author": "email@email.com",
    "version": "0.1",
    "platform_version": "v1.4",
    "description": "An empty app created by default",
    "modules": {
        "logging": {
            "level": "DEBUG"
        },
        "barcode": true,
        "contact": true,
        "file": true,
        "is": true,
        "media": true,
        "prefs": true,
        "request": {
            "permissions": ["http://*/*", "https://*/*"]
        },
        "tools": true,
        "reload": true
    }
} 
```

文件`default.js`

```
forge.barcode.scan(function (value) {
    alert("You scanned: "+value);
}); 
```

文件`index.html`

```
<!DOCTYPE html>
<html>
    <head>
    <title>Hello World!</title>
    <link rel="stylesheet" href="css/jquery.mobile-1.1.0.min.css" />
    <script src="js/jquery-1.7.1.min.js"></script>
    <script src="js/jquery.mobile-1.1.0.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="js/default.js"></script>
</head>
<body>

    <p>Hello world!</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T19:41:15.157

尝试以下两种方法之一：

1）在您的应用配置中打开重新加载模块。我知道这听起来很奇怪或愚蠢，但相信我，它现在应该可以解决你的问题。当重新加载关闭时，我遇到了与请求模块非常相似的问题。

2) 将 src/config.json 中的“platform_version”从“v1.4”更改为“v1.4.25”。我认为最后一个平台版本有点坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:58:14.240

Trigger.io 版本 v1.4.26 中存在线程问题 - 它已在[v1.4.27 及](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-27)更高版本中修复。

带来不便敬请谅解！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:45:28.907

如果您从 UI 线程以外的线程调用与 UI 相关的代码，通常会引发此异常。如果这是 Java，我会使用：

```
activity.runOnUiThread(new Runnable()
{
    @Override
    public void run()
    {
        // place your code here
    }
}); 
```

# javascript - 使用 jquery 覆盖框

> ID：14417991
> 
> 赞同：0
> 
> 时间：2013-01-19T19:25:43.637
> 
> 标签：javascript, jquery, ajax, forms, jquery-blockui

我有一个用于 jquery 的 blockUI 插件，通过它我在覆盖框中调用另一个 php 文件。我想通过多个相同id的按钮激活该功能（这里是pageDemo1）。但是当我这样做时，只有一个按钮起作用，而所有其他按钮都不起作用。谁能解释为什么会这样？我应该怎么做才能让它发挥作用？

```
$(document).ready(function() { 

    $('#pageDemo1').click(function() { 
        $.blockUI({ message: $('#domMessage') }); 
        test(); 
    }); 

    $('#submit').click(function() {
    var action = $("#form1").attr('action');
    var form_data = {
        message: $("#message").val(),
        is_ajax: 1
    };

    $.ajax({
        type: "POST",
        url: action,
        data: form_data,
        success: function(response)
        {
            if(response == 'success')
                $("#form1").slideUp('slow', function() {
                    $("#message").html("<p class='success'>message</p>");
                });
            else
                $("#message").html("<p class='error'>message</p>"); 
        }
    });

    return false;
}); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:35:22.650

乍一看，不要使用具有相同 id 的 html 元素。您可以将事件附加到具有相同类、名称等的元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:37:15.693

您是说您有两个具有相同 ID 的元素（按钮）吗？如果是这样，这不是有效的 HTML（请参阅 W3C 标准）。您可以尝试改用一个类。另请记住，您可以使用多个类以某种方式保持按钮的唯一性。例如

```
<input type="button" class="pageDemo pageDemo1" value="My Click does this"/>
<input type="button" class="pageDemo pageDemo2" value="My Click also does this/> 
```

然后在你的 JS 中访问这些：

```
$('.pageDemo').click(function() {
    // Put code here which should happen when either of your elements with class 'pageDemo' get clicked
});

   $('.pageDemo.pageDemo1').click(function() {
      // Put code here which should only happen when elements with 'pageDemo1' class get clicked
}); 
```

# php - 如何使用 PHP curl 抓取无限滚动的网页？

> ID：14417994
> 
> 赞同：3
> 
> 时间：2013-01-19T19:26:17.807
> 
> 标签：php, curl, imgur

我想知道如何在循环中抓取（第 1 页第 2 页等......）一个具有无限循环（如 imgur）的网页，例如......？

我尝试了下面的代码，但它只返回第一页。由于无限滚动模板，如何触发下一页？

```
<?php
    $mr = $maxredirect === null ? 10 : intval($maxredirect);
    if (ini_get('open_basedir') == '' && ini_get('safe_mode' == 'Off')) {
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, $mr > 0);
        curl_setopt($ch, CURLOPT_MAXREDIRS, $mr);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    } else {
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);

        if ($mr > 0) {
            $original_url = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);
            $newurl = $original_url;
            $rch = curl_copy_handle($ch);

            curl_setopt($rch, CURLOPT_HEADER, true);
            curl_setopt($rch, CURLOPT_NOBODY, true);
            curl_setopt($rch, CURLOPT_FORBID_REUSE, false);
            do {
                curl_setopt($rch, CURLOPT_URL, $newurl);
                $header = curl_exec($rch);
                if (curl_errno($rch)) {
                    $code = 0;
                } else {
                    $code = curl_getinfo($rch, CURLINFO_HTTP_CODE);
                    if ($code == 301 || $code == 302) {
                        preg_match('/Location:(.*?)\n/', $header, $matches);
                        $newurl = trim(array_pop($matches));

                        // if no scheme is present then the new url is a
                        // relative path and thus needs some extra care
                        if(!preg_match("/^https?:/i", $newurl)){
                            $newurl = $original_url . $newurl;
                        }
                    } else {
                        $code = 0;
                    }
                }
            } while ($code && --$mr);
            curl_close($rch);
            if (!$mr) {
                if ($maxredirect === null)
                    trigger_error('Too many redirects.', E_USER_WARNING);
                else
                    $maxredirect = 0;
                return false;
            }
            curl_setopt($ch, CURLOPT_URL, $newurl);
        }
    }
    return curl_exec($ch);
}

$ch = curl_init('http://www.imgur.com');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$data = curl_exec_follow($ch);
curl_close($ch);

echo $data;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:03:51.967

`cURL`通过获取网页的源代码来工作。您的代码将仅从原始网页收集 HTML。在 imgur 的情况下，它将包括约 40 张图像，以及页面布局的其余部分。

向下滚动时，此原始源代码不会更改。但是，浏览器中的 HTML 可以。这是通过 AJAX 完成的。您正在查看的页面从第二个页面请求信息。

如果您使用 FireBug（用于 FireFox）或 Google Chrome 的页面检查器，那么您可以通过转到“网络”或“网络”选项卡（分别）来监控这些请求。当您向下滚动时，页面将再发出约 45 个请求（主要是图像）。您还将看到它请求此页面：

[http://imgur.com/gallery/hot/viral/day/page/0?scrolled&set=1](https://imgur.com/gallery/hot/viral/day/page/0?scrolled&set=1)

The JavaScript on the imgur homepage appends this HTML to the bottom of the home page. You would probably want to query this page (or the API, as [the other Chris](https://stackoverflow.com/users/610573/chris) said) if you want to get a list of images. You can play with the numbers at the end of the URL to get more images.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:53:22.317

由于类似的原因，页面抓取很少是最好的方法。[Imgur 提供了一个 API](http://api.imgur.com/)，它可以完成我假设您正在尝试的任务，而无需使用任何 hacky 抓取。

如果你接受了刮擦的想法，你将不得不做一些研究。您需要注意 AJAX 请求使用的 API，而不是只抓取主页，您可以直接调用该 API 并继续抓取后续页面的数据。这种方法的细节超出了这个答案的范围，特别是考虑到有一个已建立的 API 可用。

**相关阅读**

*   Imgur API - [http://api.imgur.com/](http://api.imgur.com/)
*   未经授权的页面抓取的可疑合法性 - [http://en.wikipedia.org/wiki/Web_scraping#Legal_issues](http://en.wikipedia.org/wiki/Web_scraping#Legal_issues)