# StackOverflow 问答 13194000-13194999

# mysql - 将一张表转换为两张新表

> ID：13194000
> 
> 赞同：0
> 
> 时间：2012-11-02T11:06:25.257
> 
> 标签：mysql, sql, select, export

我正在尝试将数据从一个表移动到两个新表中，但我不确定如何以最好和最简单的方式做到这一点。

我在 newsletter_users 中有大约 2000 行，如下所示：

```
userid company email memberofgroup 
```

在哪里

```
memberofgroup 
```

是一个表示 newsletter_mailgroups 的整数。如果用户想成为不同组的成员，这不是最好的方法。然后将有 x 行具有相同的电子邮件。2000 个用户 x 3 或 4 个不同的组（我想到了什么？？）因此我制作了两个新表

看起来像这样的 newsletter_members

```
userid email company 
```

和另一个表 newsletter_member_of_group 如下所示：

```
field_member_uid field_user_id field_memberofgroup 
```

在哪里

```
field_user_id 
```

将包含来自 newsletter_members 的用户 ID 和

```
field_memberofgroup 
```

将包含电子邮件组 ID。外汇

```
field_user_id  field_memberofgroup 
    2                 6
    2                 4
    2                 8
    3                 1
    5                 6 
```

如何以最佳方式导出然后导入它们，以便电子邮件不会在 newsletter_members 中重复？- 我可能需要手动检查哪些用户是多个邮件组的成员。

邮件组表：

```
1   Forhandlere 
2   Arkitekter og byggerÃ¥dgivere   
3   Typehusfabrikanter  
4   ByggeentreprenÃ¸rer 
5   Murermestre 
6   TÃ¸mrermestre   
7   TagdÃ¦kkere 
8   Boligforeninger/Ejendomsselskaber   
9   Bygge-interesserede 
10  Tyske modtagere 
11  Landskabsarkitekter 
12  Norske arkitekter   
13  Svenske arkitekter  
14  Norske forhandlere  
15  Svenske forhandlere 
16  Brancherelaterede   
17  Svenske ansatte 
18  Norske ansatte  
19  Beijer Sverige 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:28:31.343

分几步解决：

*   **克雷特**表`newsletter_member_of_group`。

脚本：

```
 CREATE TABLE newsletter_member_of_group(
  field_member_uid INT PRIMARY KEY AUTO_INCREMENT,
  field_user_id INT,
  field_memberofgroup INT
); 
```

注意 field_member_uid 是 AUTO_INCREMENT，它将帮助我们插入 ID 值。

*   **将**数据从复制`newsletter_users`到`newsletter_member_of_group`。

脚本：

```
INSERT INTO newsletter_member_of_group
  SELECT NULL, userid, memberofgroup FROM newsletter_users; 
```

*   **创建** `newsletter_members`表。我们有两种变体：创建新表并复制数据，或重命名`newsletter_users`并`newsletter_members`删除`memberofgroup`字段。我选择第二种变体。

脚本：

```
ALTER TABLE newsletter_users RENAME TO newsletter_members;
ALTER TABLE newsletter_members DROP COLUMN memberofgroup; 
```

# android - 如何在Android的相机中禁用后退按钮

> ID：13194001
> 
> 赞同：-2
> 
> 时间：2012-11-02T11:06:29.873
> 
> 标签：android

> **可能重复：**
> [禁用 Android 中的后退按钮（不工作）](https://stackoverflow.com/questions/13191946/disable-back-button-in-androidnot-working)

我在我的应用程序中使用默认摄像头（Android 的内置摄像头功能）。我试过使用

```
 public void onBackPressed() {

    } 
```

但不是阻止后退按钮，应用程序挂起迫使用户终止应用程序/重新启动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:10:18.340

尝试这个 。它在活动中对我有用。

```
 // Disable Device Back Button
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    // TODO Auto-generated method stub
    if ((keyCode == KeyEvent.KEYCODE_BACK)) 
    {
        return false;
    }
    return super.onKeyDown(keyCode, event);
}// end of disable back event 
```

所以也试试这个。

```
 @Override public void onBackPressed()
 {
 // TODO Auto-generated method stub
  super.onBackPressed();
   finish(); 
 } 
```

我正在使用此代码并为我完美运行一次编辑您的代码并找回我。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
if (requestCode == CAMERA_REQUEST && resultCode == Activity.RESULT_OK) 
{
Bitmap photo = (Bitmap) data.getExtras().get("data"); 
Button btnCaptureAgain=(Button)findViewById(R.id.btnCaptureAgain);
Button btnRemove=(Button)findViewById(R.id.btnRemove);
Drawable dr = new BitmapDrawable(photo);
imgCamera.setBackgroundDrawable(dr);
rltvbtngone.setVisibility(View.VISIBLE);
btnCaptureAgain.setOnClickListener(ctrlAddImageCamera.btnCaptureAgain);
btnRemove.setOnClickListener(ctrlAddImageCamera.btnRemove);
}
super.onActivityResult(requestCode, resultCode, data);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:10:53.780

您必须覆盖该方法

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    switch (keyCode) {
        case KeyEvent.KEYCODE_BACK:
          //Your action on press back here
          return true;
        default:
            return super.onKeyDown(keyCode, event);
    }
} 
```

# css - 我可以在同一个应用程序中使用 CSS 资产和公用文件夹吗？

> ID：13194003
> 
> 赞同：0
> 
> 时间：2012-11-02T11:06:35.530
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3

我有一个遗留应用程序，我想迁移它以使用 Rails 3 资产管道。我有超过 100 个样式表，这些样式表是在一个模板的基础上使用一个模板导入的

```
content_for :stylesheets 
```

堵塞。

将它们全部编译到一个样式表中目前还不是很受欢迎，因为编写代码时只期望某些页面上的某些样式表，例如登录页面导入一个重新定义*文章形式*的样式表。在所有页面上重新定义它并不好。

有没有办法慢慢迁移到资产管道，让应用程序首先查找已**编译的资产**，然后将其故障转移到**public/stylesheets**目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:26:02.937

如果您想“正确”地做到这一点，那么无需花费大量精力的一件事就是在您的`<html>`or`<body>`标记上放置一个类名，并使用选择器包装您的 CSS 文件的内容。例如，我在我的`ApplicationController`.

```
before_filter :body_class

def body_class
  controller_name = self.class.name.gsub(/Controller$/, '')
  if !controller_name.index('::').nil?
    namespace, controller_name = controller_name.split('::')
  end

  @body_classes = ["#{controller_name.underscore}_#{action_name} ".downcase.strip]
  @body_classes = ["#{namespace.underscore}_#{@default_body_classes.join}".strip] if !namespace.nil?
end 
```

然后，在我的布局中，我有类似的东西

```
<body class="<%= @default_body_classes.join(' ') %>"> 
```

接下来，您可以将所有样式表的扩展名更改为`.css.scss`. 将它们全部放在新`app/assets/stylesheets`目录中。要快速包含它们*（尽管可能出现乱序）*，请添加

```
/*
 * =require_tree .
 */ 
```

到新`app/assets/application.css.scss`文件的顶部。`application.css`只需在您的布局中包含这个文件。

```
<%= stylesheet_link_tag "application", :media => 'screen' %> 
```

最后，花一些时间浏览您的样式表，用适当的主体类包装每个文档的整体。例如，如果您有一个特定于某个`User::Admin`控制器`signup`操作的样式表，您可以用

```
.user_admin.signup {
  /* Your stylesheet's content here */
} 
```

Sass 将在所有嵌套内容的前缀正确地使用在呈现该操作时`.user_admin.signup`将附加到您的`<body>`标签的类。

我意识到这并不是您正在寻找的真正的中间修复，但是按照与此类似的步骤，您应该能够毫不费力地完成 95% 的工作，并且它将“正确”完成。

# java - JUnit - 断言错误不会传播

> ID：13194004
> 
> 赞同：0
> 
> 时间：2012-11-02T11:06:37.573
> 
> 标签：java, junit, jmock

我在 JUnit/JMock 中遇到了某个错误。我试图模拟几个对象，然后断言所有期望都得到满足。我正在运行一个简单的测试，例如：

```
@Test
public void sellingPutOptionProductDoesNotCauseDisclosure() throws PositionVerificationException, DataLoadException, MissingPriceException {
    final OptionProduct optionProduct = setupOptionProduct();
    context.assertIsSatisfied();
}

private OptionProduct setupOptionProduct() {
    final Option optionProduct = context.mock(Option.class);
    context.checking(new Expectations() {
        {
            oneOf(optionProduct).getUnderlyingProduct();
            will(returnValue(new Object()));
        }
    });
    return optionProduct;
} 
```

Option 是一个对象，我正在像这样使用 Mockery：

```
context = new Mockery() {
    {
        setImposteriser(ClassImposteriser.INSTANCE);
    }
}; 
```

如果我运行上述测试，我正在测试通过，JVM 不会终止并且控制台中的最后一个打印输出是：

线程“主”中的异常

任何想法可能导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T21:46:24.500

我参加聚会有点晚了，但我也遇到了类似的问题，并且能够找到原因。
通常，当调用不属于预期的方法时，JMock 会构建日志，告诉您预期的内容未找到。就我而言，它在遇到意外呼叫后尝试创建该日志消息。创建日志消息的行为引发了一个异常，这让 JMock 感到很困惑，它报告测试通过了，而实际上它却失败了。

就我而言，引发异常的原因是传递给“意外”函数调用的参数之一是类的实例。该类部分是用模拟对象初始化的。当 JMock 试图构建错误消息来告诉我意外调用时，它需要描述参数。通常它会说类似`unexpected invocation: myobject.myMethod(param1,param2).`

因为在我的例子中，param1 包含的成员变量是模拟对象，并且 param1 类没有定义 toString()，所以使用了默认的 Object.toString()。

Object.toString() 定义为：`return getClass().getName() + "@" + Integer.toHexString(hashCode());`

我的哈希码实现`param1`是使用其中一些模拟对象。那些对模拟对象计算哈希码的调用本身就是“意外”调用，导致 JMock 在尝试向我描述测试失败时抛出异常。

不幸的是，JMock 并没有认识到这种情况并仍然尽可能多地报告失败，而是似乎完全放弃并报告测试为通过并随便提及`Exception in thread "main."`

要查看这是否发生在您身上，我建议您检查有问题的函数调用中涉及的参数。如果它们中的任何一个是类，而不是接口，您应该查看它们对 equals / hashcode / toString 的使用是否使用了对成员变量的任何可疑调用，这些调用可能与您的场景被模拟的方式不匹配。

# playframework-2.0 - Google Closure 编译器的设置/配置？- 播放框架2.0.4

> ID：13194015
> 
> 赞同：4
> 
> 时间：2012-11-02T11:07:34.627
> 
> 标签：playframework-2.0, google-closure-compiler

所以我真的很喜欢 Play Framework 2.0.X 中的 Google Closure 集成。现在我只想要 google 闭包编译器的一些配置（从官方的 google 闭包页面看到它是可能的）。

是否可以在 Play 2.0.4 中为 google 闭包编译器添加自定义 google 闭包设置/配置。

我知道应该在 Build.scala 中完成，但不知道要添加什么

说我想要简单的编译器设置而不是高级，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T10:27:53.843

我意识到这是一个老问题，但也许这会对某人有所帮助。我假设您使用的是 Scala。

这是我在一些代码潜水后发现的。将以下行添加到您的项目设置中`project/Build.scala`应该启用一些高级功能：

```
 closureCompilerOptions += "advancedOptimizations",
  closureCompilerOptions += "checkControlStructures",
  closureCompilerOptions += "checkTypes",
  closureCompilerOptions += "checkSymbols" 
```

还有`checkCaja`; 这些在[play.core.jscompile.JavascriptCompiler中定义](https://github.com/playframework/Play20/blob/master/framework/src/sbt-plugin/src/main/scala/jscompile/JavascriptCompiler.scala)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T14:04:24.273

我不认为，您可以对 Closure 配置产生太大影响，但您可以尝试[官方文档](http://www.playframework.org/documentation/2.0.4/AssetsGoogleClosureCompiler)中的建议。

但是我在 Github 上的 2.1 分支上看到了一些关于 Google Closure 的提交。这可能会在下一次 Play 更新中改变。

# serial-port - 串行端口 rs232 的最大潜在速度

> ID：13194017
> 
> 赞同：14
> 
> 时间：2012-11-02T11:07:38.263
> 
> 标签：serial-port

现代 PC 上 rs232 串行端口的潜在最大速度是多少？我知道规范说它是 115200 bps。但我相信它可以更快。什么会影响 rs232 端口的速度？我相信它是石英谐振器，但我不确定。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-02T13:45:10.293

这可以追溯到最初的 IBM PC。设计它的工程师需要一种廉价的方法来产生稳定的频率。并转向当时广泛使用的晶体，用于美国的任何彩电。一种晶体，用于以 NTSC 电视标准的[色同步频率](http://en.wikipedia.org/wiki/Color_burst)运行振荡器电路。即 315/88 = 3.579545 兆赫兹。从那里，它首先通过一个可编程的分频器，你可以改变它来设置波特率。然后 UART 本身将其除以 16 以生成数据线的子采样时钟。

因此，您可以获得的最高波特率是将分频器设置为最小值 2。这会产生 3579545 / 2 / 16 = 111861 波特。理想波特率的 2.3% 误差。但足够接近，时钟速率不必精确。异步信号点，UART 中的 A，起始位总是重新同步接收器。

让*真正的*RS-232 硬件以 115200 波特可靠运行是一项重大挑战。电气标准对噪声非常敏感，没有尝试消除感应噪声，也没有尝试创建阻抗匹配的传输线。9600 波特的最大推荐电缆长度仅为 50 英尺。在 115200 处，实际上只有非常短的电缆才能使用。要走得更远，您需要一种不同的方法，例如 RS-422 的差分信号。

这都是古老的历史，不再完全适用于现代硬件。基于 UART 芯片（如 16550）的真正串行硬件已迅速消失并被 USB 仿真器所取代。其中有一个自定义驱动程序来模拟串行端口。他们确实接受波特率选择，但只是忽略了 USB 总线本身，它仅适用于您插入设备的加密狗的最后半英寸。无论驱动程序是否接受 115200 作为最大值是驱动程序实现细节，它们*通常*接受更高的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T11:10:44.487

最大速度受 UART 硬件规格限制。

[我相信现代实现](http://www.ti.com/product/pc16550d)中的“经典”PC UART（[16550](http://en.wikipedia.org/wiki/16550_UART)）至少可以处理 1.5 Mbps。如果您使用基于 USB 的串行适配器，则不涉及 16550，并且限制由适配器中使用的特定芯片设置，当然。

我经常使用运行速度为 460,800 bps 的 RS232 链接和基于 USB 的适配器。

回应关于时钟的评论（需要注意的是：我是一名软件专家）：异步串行通信不会将时钟（即那里的异步部分）与数据一起传输。相反，发射器和接收器应该事先就使用的比特率达成一致。

数据线上的起始位表示每个“字符”的开始（通常是一个字节，但带有开始/停止/奇偶校验位）。然后接收器开始对数据线进行采样以确定它是 0 还是 1。这种采样通常比实际比特率快*至少*16 倍，以确保其稳定。因此，对于我上面提到的以 460,800 bps 进行通信的 UART，接收器将以 7.4 MHz 左右的频率对 RX 信号进行采样。这意味着即使您使用原始频率*f*为实际 UART 计时，您也不能指望它以该速率可靠地接收数据。有开销。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T11:15:37.917

是的，它可以以更高的速度运行，但主要的限制是环境，在嘈杂的环境中会有更多的损坏数据限制速度。另一个限制是设备之间的电缆长度，您可能需要添加中继器或其他设备来增强信号。

# php - MySQL 中的简单 UPDATE 查询需要很长时间

> ID：13194021
> 
> 赞同：5
> 
> 时间：2012-11-02T11:07:54.623
> 
> 标签：php, mysql

我有一个简单的更新查询问题，总是出现在我的 mysql-slow-query.log 表中并不大，只包含`3021 rows`.

查询看起来像：

```
UPDATE 'address' 
SET 'user' = 1013 
WHERE 'id_adress' = '1' 
    AND 'date' = '2012-06-04' 
```

> Query_time：2.664413 Lock_time：0.000043 Rows_sent：0 Rows_examined：1

当我检查这个查询时：

```
select  'user' = 1013 
from 'address' 
where  'id_adress' = '1' 
   AND 'date' = '2012-06-04' 
```

然后看起来很快`1 row in set (0.00 sec)`

为什么这个简单的更新查询要花这么多时间？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:29:04.023

首先检查您的表是否没有崩溃，
如果是则修复您的表。

第二次尝试索引 where 子句中使用的这两个字段

# sql - SQL 动态连接？

> ID：13194026
> 
> 赞同：1
> 
> 时间：2012-11-02T11:08:25.353
> 
> 标签：sql, sql-server, tsql

请参阅[http://sqlfiddle.com/#!3/2506f/2/0](http://sqlfiddle.com/#!3/2506f/2/0)

我有两张桌子。一个是一般记录，另一个是包含链接到该记录的相关文档的表格。

在我的示例中，我创建了一个简单的查询，它显示了所有记录及其相关文档。这很好，但我想要一个更复杂的情况。

在“mainrecord”表中有一个“multiple”字段。如果这是 0，那么我只想要文档表中的最新文档（即具有最高 ID）。如果是 1，我想加入所有链接的文档。

所以，而不是查询的结果是这样的： -

```
ID  NAME    MULTIPLE    DOCUMENTNAME    IDLINK
1   One     1           first document    1
1   One     1           second document   1
2   Two     0           third document    2
2   Two     0           fourth document   2
3   Three   1           fifth document    3
3   Three   1           sixth document    3 
```

它应该看起来像这样：-

```
ID  NAME    MULTIPLE    DOCUMENTNAME    IDLINK
1   One     1           first document    1
1   One     1           second document   1
2   Two     0           fourth document   2
3   Three   1           fifth document    3
3   Three   1           sixth document    3 
```

有没有办法将此条件包含在我的查询中以获得我想要的结果。如果需要，我很乐意进一步解释。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:23:23.943

```
WITH myData
AS
(SELECT mainrecord.*, documentlinks.documentName, documentlinks.idlink,
Row_number()
                  OVER (
                    partition BY mainrecord.ID
                    ORDER BY mainrecord.ID ASC) AS ROWNUM
FROM mainrecord INNER JOIN documentlinks
ON mainrecord.id = documentlinks.idlink)
SELECT *
FROM mydata o
WHERE multiple = 0 AND rownum =
(SELECT max(rownum) FROM mydata i WHERE i.id = o.id)
UNION
SELECT *
FROM myData
WHERE multiple = 1 
```

[http://sqlfiddle.com/#!3/2506f/57](http://sqlfiddle.com/#!3/2506f/57)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:26:08.343

另一个解决方案（在**[SQL-Fiddle](http://sqlfiddle.com/#!3/2506f/55)**测试）：

```
SELECT m.*, 
       d.id as did, d.documentName, d.IDLink
FROM mainrecord AS m
  JOIN documentlinks AS d
    ON  d.IDLink = m.id 
    AND m.multiple = 1 

UNION ALL

SELECT m.*, 
       d.id as did, d.documentName, d.IDLink
FROM mainrecord AS m
  JOIN
    ( SELECT d.IDLink
           , MAX(d.id) AS did
      FROM mainrecord AS m
        JOIN documentlinks AS d
          ON  d.IDLink = m.id 
          AND m.multiple = 0
      GROUP BY d.IDLink
    ) AS g
    ON g.IDLink = m.id 
  JOIN documentlinks AS d
    ON  d.id = g.did

ORDER BY id, did ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T11:24:12.047

这可能会：

```
SELECT mainrecord.name, documentlinks.documentname
FROM documentlinks
INNER JOIN mainrecord ON mainrecord.id = documentlinks.IDLink AND multiple = 1

UNION

SELECT mainrecord.name, documentlinks.documentname
FROM (SELECT max(id) id, IDLink FROM documentlinks group by IDLink) maxdocuments
INNER JOIN documentlinks ON documentlinks.id = maxdocuments.id
INNER JOIN mainrecord ON mainrecord.id = documentlinks.IDLink AND multiple = 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T11:18:11.567

[**SQL 小提琴**](http://sqlfiddle.com/#!3/2506f/52)

```
select
    m.ID, m.name, m.multiple, dl.idlink,
    dl.documentName
from mainrecord as m
    left outer join documentlinks as dl on dl.IDlink = m.id
where
    m.multiple = 1 or 
    not exists (select * from documentlinks as t where t.idlink = m.id and t.id < dl.id) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T11:31:02.713

这个怎么样：

```
select * from mainrecord a inner join documentlinks b on a.Id=b.IDLink 
where b.id=(case 
   when a.multiple=1 then b.id 
   else (select max(id) from documentlinks c where c.IDLink=b.IDLink) end) 
```

# floating-point - scipy curve_fit 为 float32 输入提供错误的结果

> ID：13194029
> 
> 赞同：0
> 
> 时间：2012-11-02T11:08:40.260
> 
> 标签：floating-point, scipy, curve-fitting

在下面的非常简单的示例中（拟合一条`y=ax+b`已知结果为 `a=b=0 的直线），当 x 变量以 float32 类型提供时，SciPy curve_fit 函数会产生错误的结果：

```
import numpy as np
import scipy.optimize as opt

def func(x, a, b): return a*x + b

x = np.array([0,1])
y = np.array([0,0])
p0 = [0.1, 0.1]
p1 = opt.curve_fit(func,            x , y, p0=p0)
p2 = opt.curve_fit(func, np.float64(x), y, p0=p0)
p3 = opt.curve_fit(func, np.float32(x), y, p0=p0)

print '\n p1 = ',p1,'\n p2 = ',p2,'\n p3 = ',p3 
```

产生输出：

```
p1 =  (array([ 0.,  0.]), inf) 
p2 =  (array([ 0.,  0.]), inf) 
p3 =  (array([ 0.1,  0.1]), inf) 
```

为什么最后一个结果（通过 float32-input 获得）与其他两个不同，而且 - 显然 - 错误？显然，`curve_fit`甚至没有执行一次迭代，因为拟合结果 p3 等于初始猜测 p0。对我来说，这似乎是一个错误......

# groovy - 如何使用groovy递归检查文件是否存在并重命名（如果存在）？

> ID：13194033
> 
> 赞同：2
> 
> 时间：2012-11-02T11:08:50.663
> 
> 标签：groovy

如果文件已经存在，如何通过附加一些递增的数字递归检查和重命名文件？

我写了下面的函数，但它给了我一个例外

```
org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object 'E:\Projects\repo1\in_conv1.xml' with class 'java.lang.String' to class 'java.io.File' 
```

代码

```
//newFilePath = E:\Projects\repo1\old\testcustprops.xml
String newFilePath = checkForExistenceAndRename(newFilePath,false)

private String checkForExistenceAndRename(String newFilePath, boolean flag){
    File f = new File(newFilePath)
    if(!flag){
        if(f.exists()){
            //renaming file
            newFilePath=newFilePath[0..-5]+"_conv${rename_count++}.xml"
            f = checkForExistenceAndRename(newFilePath,false)
        }
        else 
            f = checkForExistenceAndRename(newFilePath,true)
    }
    else
        return newFilePath      
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:12:36.743

您正在尝试执行以下操作：

```
f = checkForExistenceAndRename(newFilePath,false) 
```

`f`一个在哪里`File`。但是你的函数返回一个`String`

不确定它是否有效（我尚未测试您的功能），但您可以尝试：

```
private String checkForExistenceAndRename(String newFilePath, boolean flag){
    File f = new File(newFilePath)
    if(!flag){
        if(f.exists()){
            //renaming file
            newFilePath = newFilePath[0..-5]+"_conv${rename_count++}.xml"
            newFilePath = checkForExistenceAndRename(newFilePath,false)
        }
        else 
            newFilePath = checkForExistenceAndRename(newFilePath,true)
    }
    return newFilePath      
} 
```

此外，没有必要使用递归......

为什么不这样做：

```
private String getUniqueName( String filename ) {
  new File( filename ).with { f ->
    int count = 1
    while( f.exists() ) {
      f = new File( "${filename[ 0..-5 ]}_conv${count++}.xml" )
    }
    f.absolutePath
  }
} 
```

# java - 从嵌入在 JSF webapp 中的小程序调用的 servlet 访问 JSF 会话范围的 bean

> ID：13194034
> 
> 赞同：4
> 
> 时间：2012-11-02T11:08:53.567
> 
> 标签：java, jsf, servlets, applet, managed-bean

我需要从 servlet 访问会话范围的 bean。我已经试过了

```
UserBean userBean = (UserBean) request.getSession().getAttribute("userBean"); 
```

如本文所述[。](https://stackoverflow.com/a/3920184/1644061)但是我只得到 null 结果，尽管 UserBean 的一个实例已经被实例化了。这些是我用于 userBean 的注释/导入：

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean
@SessionScoped
public class UserBean implements Serializable{
 ... } 
```

为什么我无法摆脱 servlet 的一些背景：我的 jsf 页面中有一个文件上传小程序。这个小程序需要一个可以发送它的 POST 请求的地址。（我无法编辑此帖子请求以添加更多字段或其他内容）。然后我的 servlet 的 post 方法存储该文件。这项工作不能由托管 bean 完成，因为 servlet 必须使用 @MultiPartConfig 进行注释，并且我无法将此注释添加到 jsf 托管 bean。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T11:21:10.567

如果它返回`null`，那么它只能意味着两件事：

1.  JSF 还没有事先创建 bean。
2.  applet-servlet 交互不使用与 webapp 相同的 HTTP 会话。

鉴于您描述功能需求的方式，我认为是后者。您需要确保将 webapp 的会话标识符与来自 applet 的 HTTP 请求一起传递。这可以是`JSESSIONID`cookie 或`jsessionid`URL 路径属性的形式。

首先，您需要告诉小程序 webapp 正在使用的会话 ID。您可以通过将参数传递给`<applet>`或`<object>`标记保存小程序来做到这一点

```
<param name="sessionId" value="#{session.id}" /> 
```

*（这`#{session}`是一个隐式的 JSF EL 变量，它引用了当前[`HttpSession`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html)的`getId()`方法；您不需要为此创建托管 bean，上面的代码行按原样完成）*

可以在小程序中检索如下：

```
String sessionId = getParameter("sessionId"); 
```

您没有描述如何与 servlet 交互，但假设您为此使用[标准 Java SE`URLConnection`](https://stackoverflow.com/questions/2793150/using-java-net-urlconnection-to-fire-and-handle-http-requests/)，并指向`@WebServlet("/servleturl")`servlet，那么您可以使用它`setRequestProperty()`来设置请求标头：

```
URL servlet = new URL(getCodeBase(), "servleturl");
URLConnection connection = servlet.openConnection();
connection.setRequestProperty("Cookie", "JSESSIONID=" + sessionId);
// ... 
```

或者，您也可以将其作为 URL 路径属性传递：

```
URL servlet = new URL(getCodeBase(), "servleturl;jsessionid=" + sessionId);
URLConnection connection = servlet.openConnection();
// ... 
```

*（请注意，这两种情况下的情况都很重要）*

无论哪种方式，applet-servlet 交互都将在与 JSF 托管 bean 相同的 HTTP 会话中进行。

# android - 呼叫服务问题

> ID：13194035
> 
> 赞同：0
> 
> 时间：2012-11-02T11:09:00.683
> 
> 标签：android

这是我的服务班

```
 import android.app.Service;
    import android.content.Intent;
    import android.os.IBinder;
    import android.util.Log;

    public class Communicationservice extends Service {

        @Override
        public IBinder onBind(Intent intent) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public void onCreate() {
            super.onCreate();
            Log.d("I AM Service","Service Created");
        }

        @Override
        public void onStart(Intent intent, int startId) {
            // TODO Auto-generated method stub
            super.onStart(intent, startId);
        }

    }

Here is my Main Activity

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Log.d("flow","1");
        Intent in = new Intent("com.yal.Communication.Communicationservice");
        this.startService(in);
        //startService(new Intent(MainActivity.this,Communicationservice.class));
        Log.d("flow","2");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

这是 Mainfest.xml

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity > ...  </activity>
        <service android:enabled="true" android:name="com.yal.Communication.Communicationservice"></service>
    </application> 
```

错误

```
11-02 16:34:17.939: D/flow(1390): 1
11-02 16:34:17.939: W/ActivityManager(92): Unable to start service Intent { act=com.yal.Communication.Communicationservice }: not found
11-02 16:34:17.939: D/flow(1390): 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:21:02.463

你需要检查意图过滤器。

下面的片段会帮助你。

```
<service android:name="com.yal.Communication.Communicationservice">
    <intent-filter>
        <action android:name="com.yal.Communication.Communicationservice" />
    </intent-filter>
</service> 
```

然后你可以像下面这样调用这个服务。

```
Intent serviceIntent = new Intent("com.yal.Communication.Communicationservice");
startService(serviceIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:21:57.160

构造函数`public Intent (String action)`可用于指定操作，请参见以下 java doc：

```
public Intent (String action)

Create an intent with a given action. All other fields (data, type, class) are null. Note that the action must be in a namespace because Intents are used globally in the system -- for example the system VIEW action is android.intent.action.VIEW; an application's custom action would be something like com.google.app.myapp.CUSTOM_ACTION.

Parameters
action  The Intent action, such as ACTION_VIEW. 
```

对您的意图创建进行以下更改：

```
Intent in = new Intent(this,com.yal.Communication.Communicationservice.class); 
```

或者在 me 清单文件中指定操作：

```
<service android:name="com.yal.Communication.Communicationservice">
    <intent-filter>
        <action android:name="com.yal.Communication.Communicationservice" />
    </intent-filter>
</service> 
```

# facebook - Facebook 的“赞”计数器未按预期工作

> ID：13194037
> 
> 赞同：1
> 
> 时间：2012-11-02T11:09:16.280
> 
> 标签：facebook, wordpress

我知道这是主要的 facebook 开发者社区；我想作为一个问题，看看是否有人可以提供帮助？我建立了一个 wordpress 照片组合博客 - [http://shutterliving.com/movember-moustache/](http://shutterliving.com/movember-moustache/) 我安装了官方的 facebook 插件，并且在页面的顶部和底部运行了自己的 LIKE 按钮。

我还安装了“TFG 社交分享”插件：

wordpress.org/support/plugin/twitter-facebook-google-plusone-share

我现在想知道在遇到一些意外行为时是否已设法正确设置它。

当我预览未发布的帖子时，LIKE 计数器（官方插件）为 0，但是“TFG 社交分享”插件显示 12 计数？为什么会有差异？如果帖子尚未发布，如何获得点赞数？当我创建一个新帖子并将其另存为草稿，然后预览它时，两个 LIKE 计数都为 0。

当我转到调试器工具并输入我的 URL 时，我得到了我不太理解的错误，但谷歌搜索告诉我它们不是严重的错误。不知道如何解决它们？任何想法？

此外，当我单击 Fetched URL 和 Canonical URL 中的 URL 链接时，它会将我带到“找不到页面”页面？这是正常的吗？它不应该带我进入我的主页吗？响应代码 200 获取 URL shutterliving.com

规范网址 shutterliving.com

应该修复的开放图警告 推断属性 应该显式提供“og:url”属性，即使可以从其他标签推断出值。推断属性 即使可以从其他标签推断出值，也应显式提供“og:image”属性。

```
Meta Tag    <meta property="og:locale" content="en_US" />
Meta Tag    <meta property="og:site_name" content="shutterLIVING" />
Meta Tag    <meta property="og:type" content="website" />
Meta Tag    <meta property="og:title" content="shutterLIVING" />
Meta Tag    <meta property="og:description" content="Jamie A Cowan&#039;s PhotoBlog     and Portfolio" />
Meta Tag    <meta property="fb:app_id" content="178646462271083" /> 
```

我还将 INSIGHTS 分析与我的网页相关联，但是它显示的信息不准确，即它说我的页面上只有 55 个 LIKES，但是我有更多的喜欢 [http://shutterliving.com/movember-胡子/](http://shutterliving.com/movember-moustache/)

这让我相信我设置了错误的东西。

任何人都可以帮助解决任何问题

杰米。

# php - 插入选择会话客户

> ID：13194040
> 
> 赞同：1
> 
> 时间：2012-11-02T11:09:29.043
> 
> 标签：php, mysql, select, insert

我想选择表格的一行并插入另一个现有表格。（我使用`php`and `MySql`。这两个表除了 id 和时间戳之外具有相同的列）

我试着做一辆购物车。我希望当有人付款时，从“carret”中选择该客户和该会话的所有产品并插入“comandes”。

例如，插入 - 选择工作如果我说`WHERE session=4");`
这也工作：`echo session_id();`所以我可以得到会话
但是这两件事不能一起工作。我不明白这个问题。我的 where 条件有什么问题？

```
mysql_query("INSERT INTO comandes (session,client,producte,preu_comanda,quantitat)
         SELECT session,client,producte,preu_unitat,quantitat
         FROM carret
         WHERE session='".session_id()."'"); 
```

我也试过没有成功：`WHERE client='$_SESSION[client]'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:54:59.987

我终于用一个简单的“;”找到了问题 在末尾。我发布它是因为它可以帮助像我这样的其他 php 初学者。

这有效：

```
mysql_query("INSERT INTO comandes (id_carret,session,client,producte,preu_comanda,quantitat)
             SELECT id,session,client,producte,preu_unitat,quantitat
             FROM carret
             WHERE session='".session_id()."'"); 
```

这不起作用！问题在于最后的“;” 如果在那之后有“或死......”：

```
mysql_query("INSERT INTO comandes (id_carret,session,client,producte,preu_comanda,quantitat)
             SELECT id,session,client,producte,preu_unitat,quantitat
             FROM carret
             WHERE session='".session_id()."'");

or die("error:".mysql_error()); 
```

这行得通。现在我明白了，如果有最后的“or die...”，我应该删除前面的“;”

```
mysql_query("INSERT INTO comandes (id_carret,session,client,producte,preu_comanda,quantitat)
             SELECT id,session,client,producte,preu_unitat,quantitat
             FROM carret
             WHERE session='".session_id()."'")

or die("error:".mysql_error()); 
```

# node.js - socket.io 客户端和网页

> ID：13194041
> 
> 赞同：1
> 
> 时间：2012-11-02T11:09:41.593
> 
> 标签：node.js, web-applications

这可能是一件非常简单的事情，但我无法弄清楚，因为我对此比较陌生。我有一个在 nodejitsu 上运行良好的 index.html 页面的服务器。它工作正常，完全没有问题。但是，我还有另一个使用 socket.io-client 的 node.js。它连接得很好，可以做我想做的事情，但我想将一个 HTML 页面与它合并，这样我就可以通过单击一个按钮来控制它。本质上，我试图通过单击我的 socket.io-client 页面上的按钮来刷新我的 nodejitsu 服务器页面。这是我客户端上的代码：

```
var io = require('socket.io-client'),
socket = io.connect('http://danturner81.server.jit.su', {port: 80});

socket.on('connect', function () { console.log("socket connected"); });
socket.on('disconnect', function () { console.log("socket disconnected"); });
socket.send('refreshScreen'); 
```

当我通过终端启动这个节点时，它会刷新 danturner81.server.jit.su 的页面就好了。我如何将其合并到带有执行“socket.send”的按钮的网页中？

抱歉，如果这看起来很愚蠢，但我真的想不通，我知道我快到我想要的地方了！

问候

担

# css - 是否可以制作具有多个边框和阴影的按钮？

> ID：13194042
> 
> 赞同：0
> 
> 时间：2012-11-02T11:09:42.867
> 
> 标签：css, button, styles

这是我希望用 CSS 制作的按钮

[![按钮](../Images/15d08bb2b1cd861c8b1be20904519608.png)](https://i.stack.imgur.com/sLNzK.png)
[（来源：[gyazo.com](http://gyazo.com/e6df392f64d28b0a7e88cb80c946bc30.png)）]

忽略灰色背景

我尝试裁剪中心并添加边框顶部，左侧，右侧，但看起来仍然很奇怪。关于如何仅在 CSS 中创建它的任何想法？

它有一个白色的阴影，实时预览：http: [//justxp.plutohost.net/themetheory/portfolio.html](http://justxp.plutohost.net/themetheory/portfolio.html)

那可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:19:57.740

想出了这样的东西。尝试颜色和字体以获得所需的内容

```
a {
  display:block;
  width:200px;
  height:40px;
  background:#5a81ff;
  color:#fff;
  font-size:1.5em;
  text-align:center;
  text-decoration:none;
  border:1px solid #656565;
  border-top-color:#cacaca;
  line-height:40px;    

  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;

  -webkit-box-shadow: 0px 2px 0px rgba(176, 176, 176, 1);
  -moz-box-shadow:    0px 2px 0px rgba(176, 176, 176, 1);
  box-shadow:         0px 2px 0px rgba(176, 176, 176, 1);
}​ 
```

ps 工作 expm - [http://jsfiddle.net/6zhDt/](http://jsfiddle.net/6zhDt/)

pps 如果您想了解更多信息 - [http://vimeo.com/31719130](http://vimeo.com/31719130) Brilliant Lea Verou 从大约第 10 分钟开始谈论带有阴影的多个边界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:20:31.683

您可以通过**伪类**实现您想要的结果**多边框**查看演示：-`before: after:`

 **[演示](http://tinkerbin.com/RBoeD7Sm)

**HTML**

```
<div id="borders"></div> 
```

**CSS**

```
#borders {
   position: relative;
   border: 5px solid #f00;
   width:100px;
   height:100px;
}
#borders:before {
   content: " ";
   position: absolute;
   top: 0px;
   left: 0px;
   right: 0px;
   bottom: 0px;
   border: 5px solid #ffea00;
}
#borders:after {
   content: " ";
   position: absolute;
   top: 5px;
   left: 5px;
   right: 5px;
   bottom: 5px;
   border: 5px solid green;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:25:23.350

CSSTricks.com 上有博客文章 - [http://css-tricks.com/snippets/css/multiple-borders/](http://css-tricks.com/snippets/css/multiple-borders/)**

# .htaccess - .htaccess RewriteRule 无需在浏览器中更改 URL

> ID：13194043
> 
> 赞同：2
> 
> 时间：2012-11-02T11:09:44.173
> 
> 标签：.htaccess, mod-rewrite

我有`.htaccess`文件：

```
Options +FollowSymlinks
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} ^somedomain.com [NC]
RewriteRule ^(.*)$ http://www.somedomain.com/$1 [R=301,NC]

RewriteRule ^r/(.*)$ index.php?rid=$1 [NC] 
```

但是当我请求 URL like`www.somedomain.com/r/123`并显示 URL like时，最后一个条件在浏览器中执行重定向`www.somedomain.com/index.php?rid=123`。但我需要在不更改 URL 的情况下调用此脚本。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:01:35.230

您使用了`R=301`Try to use `L`，如下所示：

```
RewriteCond %{HTTP_HOST} ^somedomain.com [L]
RewriteRule ^(.*)$ http://www.somedomain.com/$1 [L]

RewriteRule ^r/(.*)$ index.php?rid=$1 [L] 
```

# php - 如何在视图中设置“不等于当前 nid”过滤器

> ID：13194052
> 
> 赞同：5
> 
> 时间：2012-11-02T11:10:11.067
> 
> 标签：php, drupal, drupal-7, drupal-modules, drupal-views

我有一个名为公告的内容类型，我在属于公告内容类型的内容中显示最新公告的视图块。该块具有三个字段：分类术语、标题和链接。我放置了以下过滤器：

1.内容：类型（=公告） 2.内容：已发布（是）

该块工作正常，但它也显示当前节点字段。

> 如何不在视图块中显示当前节点字段？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T13:14:38.307

为了让您的块知道它正在显示在哪个节点上并过滤掉与该当前节点匹配的字段，您必须设置一个“**上下文过滤器**”......这包括使您的块知道当前节点的设置，登录用户等

1.  添加上下文过滤器（在视图的“高级”部分下）
2.  选择 Content: Nid 作为要为其设置上下文过滤器的字段
3.  选择“提供默认值”=“来自 URL 的内容 ID”。这样，当在 URL 中找不到过滤器时，该块将使用它出现的节点的 URL 作为过滤器（并且您不会真正使用 URL 来传递参数，因此它将始终默认为) ![在此处输入图像描述](../Images/2dc8b3e343a1eef29a34324b30c03668.png)
4.  现在这里是要排除这些字段而不是精确显示它们的内容：在这些设置底部的折叠“更多”部分中是一个复选框“排除”。确保在保存配置之前进行检查。

而已！让我们知道它是否有效。

# mysql - 如何授予用户所有权限？我没能

> ID：13194054
> 
> 赞同：0
> 
> 时间：2012-11-02T11:10:25.177
> 
> 标签：mysql

这些是我的命令：

```
mysql> Grant all privileges on my_db to me@'localhost';
Query OK, 0 rows affected (0.00 sec)

mysql> select user, host, Create_priv from mysql.user;
+------------------+-----------+-------------+
| user             | host      | Create_priv |
+------------------+-----------+-------------+
| root             | localhost | Y           |
| root             | ubuntu    | Y           |
| root             | 127.0.0.1 | Y           |
| root             | ::1       | Y           |
|                  | localhost | N           |
|                  | ubuntu    | N           |
| debian-sys-maint | localhost | Y           |
| me               | localhost | N           |
+------------------+-----------+-------------+
8 rows in set (0.00 sec) 
```

好吧，我们可以看到“我”仍然无法创建表。你能帮我理解如何将所有权限授予我@'localhost'吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:38:46.457

如果要授予所有全局级权限，请使用此查询 -

```
GRANT ALL PRIVILEGES ON *.* TO 'me'@'localhost'; 
```

# c# - 将 C# 转换为 VBNET 时出现委托错误

> ID：13194056
> 
> 赞同：1
> 
> 时间：2012-11-02T11:10:35.890
> 
> 标签：c#, .net, mysql, vb.net

我在c#中有这段代码

```
void Backup()
{
    string constr = "server=localhost;user=root;pwd=qwerty;database=test;";
    string file = "C:\\MyDumpFile.sql";
    MySqlBackup mb = new MySqlBackup(constr);
    mb.ExportInfo.FileName = file;
    mb.ExportProgressChanged += new MySqlBackup.exportProgressChange(mb_ExportProgressChanged);
    mb.ExportCompleted += new MySqlBackup.exportComplete(mb_ExportCompleted);
    timerRead.Start();
    mb.Export();
} 
```

当转换为`VBNet`

```
Private Sub Backup()
    Dim constr As String = "server=localhost;user=root;pwd=qwerty;database=test;"
    Dim file As String = "C:\MyDumpFile.sql"
    Dim mb As New MySqlBackup(constr)
    mb.ExportInfo.FileName = file
    mb.ExportProgressChanged = mb.ExportProgressChanged + New MySqlBackup.exportProgressChange(mb_ExportProgressChanged)
    mb.ExportCompleted = mb.ExportCompleted + New MySqlBackup.exportComplete(mb_ExportCompleted)
    timerRead.Start()
    mb.Export()
End Sub 
```

我总是收到这个错误

> “exportProgressChange”是“MySql.Data.MySqlClient.MySqlBackup”中的一种类型，不能用作表达式。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:26:15.493

```
Private Sub Backup()
Dim constr As String = "server=localhost;user=root;pwd=qwerty;database=test;"
Dim file As String = "C:\MyDumpFile.sql"
Dim mb As New MySqlBackup(constr)
mb.ExportInfo.FileName = file
AddHandler mb.ExportProgressChanged, New MySqlBackup.exportProgressChange(AddressOf mb_ExportProgressChanged)
AddHandler mb.ExportCompleted, New MySqlBackup.exportComplete(AddressOf mb_ExportCompleted)
timerRead.Start()
mb.Export()
End Sub 
```

应该可以工作，因为在 VB .net 中你不能使用 += 订阅事件，你必须使用`AddHandler`and `RemoveHandler`。

编辑：试过了，所以编译得很好。

# flash - 强制用户观看一段视频，然后提供下一步按钮

> ID：13194057
> 
> 赞同：0
> 
> 时间：2012-11-02T11:10:37.180
> 
> 标签：flash, apache-flex, video, html5-video

可能是一个奇怪的问题，但我正在研究一个向用户询问一系列问题的项目。其中一个问题可能是观看视频，然后显示下一个按钮以观看视频的下一部分。

有些用户会有 iPad，所以我猜这排除了 Flash？

任何想法最好的方法可能是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:54:47.963

HTML5 视频标签可让您跟踪播放位置。您可以使用它来确定他们何时完成视频，然后显示“下一步”按钮。该标签可以告诉您视频的时长，以便您知道何时完成。

# python - 同时在进程中使用 Celery 并在任务中使用 gevent

> ID：13194064
> 
> 赞同：32
> 
> 时间：2012-11-02T11:10:51.680
> 
> 标签：python, multiprocessing, celery, gevent, monkeypatching

我想将 Celery 用作我的任务的队列，这样我的网络应用程序就可以将任务排入队列，返回响应，并且该任务将同时处理/有一天/ ...我构建了一种 API，所以我不提前知道会有什么样的任务——未来，可能会有处理 HTTP 请求的任务，另一个 IO，还有 CPU 消耗的任务。在这方面，我想在进程上运行 Celery 的工作人员，因为这些是 Python 中通用的并行性。

但是，我也想在我的任务中使用 gevent，所以我可以让一个任务产生许多 HTTP 请求等。问题是，当我这样做时：

```
from gevent import monkey
monkey.patch_all() 
```

芹菜停止工作。它开始了，但没有任务可以有效地排队——它们似乎去代理，但 Celery 工作人员没有收集和处理它们。只能启动和等待。如果我删除这些行并在没有任何 gevent 和并行化的情况下执行任务，那么一切正常。

我认为这可能是因为 gevent 补丁也线程化。所以我尝试了

```
from gevent import monkey
monkey.patch_all(thread=False) 
```

...但是 Celery 甚至没有启动，它在没有给出原因的情况下崩溃（打开了日志的调试级别）。

**是否可以使用 Celery 将任务排入队列并使用 gevent 在单个任务中做一些事情？如何？我做错了什么？**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-05-28T21:43:35.230

我相信启动任务的推荐方式如下。

```
python manage.py celery worker -P gevent --loglevel=INFO 
```

Gevent 需要尽早打补丁。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-03T15:24:39.940

您可以使用包含多个 greenlet 的多个线程运行 celery，如下所示：

```
$ celery multi start 4 -P gevent -l info -c:1-4 1000 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T12:09:44.747

据我所知，这**是不可能的**。如果有人找到更好的答案，我会接受它而不是这个我的。

唯一的选择是将 gevent 也用作 Celery 工作人员的后端。为了完成这样的事情，必须做的是在配置文件中添加以下内容：

```
CELERYD_POOL = 'gevent' 
```

可以在[此处](http://docs.celeryproject.org/en/latest/configuration.html#celeryd-pool)找到有关此选项的更多详细信息。有关 gevent 池的更多信息[在此页面上](http://docs.celeryproject.org/en/latest/internals/reference/celery.concurrency.gevent.html)。请注意 gevent 池仍被标记为实验性的事实。我发现没有可用于比较不同任务（面向 IO 的任务、面向 CPU 的任务）上的进程和异步 gevent 池的基准，但最后我意识到，即使我的*CPU 密集型*任务实际上也会比 CPU 更多 IO，因为我使用数据库保存结果和数据库连接将是瓶颈，而不是计算部分。我不会有真正会影响 CPU 的科学任务。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-08T11:22:12.007

根据我奇怪的经验，Celery Beat 无法与具有 gevent 池的工作人员正常工作（计划任务被阻止并永远等待），除非您为 Beat 进程激活 gevent 猴子补丁。

但是，`celery beat`不支持`--pool=gevent`或`-P gevent`选项。注入 gevent 猴子补丁的正确方法是使用自定义`celery`二进制文件，例如：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

from gevent import monkey
monkey.patch_all()

import re
import sys

from celery.__main__ import main

if __name__ == '__main__':
    sys.argv[0] = re.sub(r'(-script\.pyw|\.exe)?$', '', sys.argv[0])
    sys.exit(main()) 
```

保存为`celery-gevent`，运行 Beat 服务如下：

```
celery-gevent beat --app=proj.celery:app --loader=djcelery.loaders.DjangoLoader -f /var/log/celery/beat.log -l INFO --workdir=/my/proj --pidfile=/var/run/celery/beat.pid 
```

在`proj.celery`您还应该修补 Django 连接以避免`DatabaseError`：

```
from __future__ import absolute_import

import os
# Set the Django settings module for the 'celery' program
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'proj.settings')

import django
# Load Django model definitions, etc
django.setup()

from django.db import connection
# Allow thread sharing to ensure that Django database connection
# works properly with gevent.
connection.allow_thread_sharing = True

from django.conf import settings
from celery import Celery

app = Celery('proj')

# Using a string here means the worker will not have to
# pickle the object when using Windows.
app.config_from_object('django.conf:settings')
app.autodiscover_tasks(lambda: settings.INSTALLED_APPS) 
```

（上面的例子适用于 Python 2.7.10、Celery 3.1.18、Django 1.8.2 和 gevent 1.0.2）

# intellij-idea - Intellij 从不同行复制文本

> ID：13194066
> 
> 赞同：0
> 
> 时间：2012-11-02T11:10:52.893
> 
> 标签：intellij-idea, editor, editing, multiline

notepad++ 中有一个功能，您可以从不同的行中挑选片段并一次性粘贴它们。Idea IntellIJ 中有类似的东西吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:27:31.013

或者，您可以在当前应用程序之外使用剪贴板管理器。ClipX 在 Windows 上是一个不错的选择。Glipper 或同等产品在 Linux 上很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:30:46.600

目前还没有这样的功能，您可以在 YouTrack 中[为它投票。](http://youtrack.jetbrains.com/issue/IDEA-80056)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:45:43.783

我想说最接近的功能是多剪贴板。分别复制每一行，然后使用`CTRL-SHIFT-V`.

# c - printf 转换问题 long long

> ID：13194067
> 
> 赞同：3
> 
> 时间：2012-11-02T11:10:57.263
> 
> 标签：c, printf, long-integer

我一直在研究一个项目 euler 问题，其本质上会强迫您使用具有大存储空间的数据类型。

```
#include <stdio.h>
#include <conio.h>
#define num 600851475143

int main()
{
long long i, j, count=0, number=num, k;
for(i=2;number!=1;i++)
{
    count=0;
    for(j=1;j<=i;j++)
    {
        if((i%j)==0)
        {
            count++;
        }
    }
    for(k=0;k<100000000;k++)
    {}
    if(count==2)
    {
        printf("                      %d\n", i);
        if(number%i==0)
        {
            number/=i;
            printf("      %d\n", number);
            printf("%d\n", i);
            i=2;
        }
    }
}
getch();
return 0;
} 
```

当我编译并运行程序时，没有打印任何数字。我尝试了各种 printf 转换 %ll、%l，我更改了数据类型。我正在使用 GNU GCC 编译器。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:13:03.377

我猜你应该（重新）阅读[文档](http://linux.die.net/man/3/printf)。

`%ll`不起作用，因为`ll`它不是一个完整的说明符，它只是实际转换说明符的修饰符，应该遵循。

试试`%lld`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:13:15.140

的正确格式`printf`是`%lld`. 此外，您应该为您的常量使用前缀`num`，因为这个整数常量太大而无法保存在`long`类型中。

```
#define num 600851475143LL 
```

也许您应该避免使用小写宏的标识符？

# c# - Automapper - 忽略有条件的映射

> ID：13194072
> 
> 赞同：13
> 
> 时间：2012-11-02T11:11:15.147
> 
> 标签：c#, asp.net-mvc-3, automapper

我正在使用自动映射器，我想知道当它为空时是否可以忽略字段的映射。

那是我的代码：

```
.ForMember(dest => dest.BusinessGroup_Id, 
           opt => opt.MapFrom(src => (int)src.BusinessGroup)) 
```

*   `src.BusinessGroup type = "enum"`
*   `dest.BusinessGroup_Id = int`

如果 src.BusinessGroup = null，则目标是导入该映射。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-02T11:17:00.007

我认为[`NullSubstitute`](https://github.com/AutoMapper/AutoMapper/wiki/Null-substitution)选项会解决问题

```
.ForMember(d => d.BusinessGroup_Id, o => o.MapFrom(s => (int?)s.BusinessGroup));
.ForMember(d => d.BusinessGroup_Id, o => o.NullSubstitute(0)); 
```

顺便说一句，您可以在映射操作中编写条件：

```
.ForMember(d => d.BusinessGroup_Id,
           o => o.MapFrom(s => s.BusinessGroup == null ? 0 : (int)s.BusinessGroup)); 
```

*更新*如果你不能为你的属性分配一些默认值，你可以忽略它并且只映射不是空值：

```
.ForMember(d => d.BusinessGroup_Id, o => o.Ignore())
.AfterMap((s, d) =>
    {
        if (s.BusinessGroup != null)
            d.BusinessGroup_Id = (int)s.BusinessGroup;
    }); 
```

# c# - 如何检查字符是否属于正则表达式？

> ID：13194077
> 
> 赞同：0
> 
> 时间：2012-11-02T11:11:47.933
> 
> 标签：c#, regex

我想写一个函数来判断一个字符是否属于正则表达式。

以下是我的正则表达式`var re=/^[A-Za-z0-9]+$/;` 现在，如果我有一个字符串中的字符，那么我想检查该字符是否属于正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:14:25.607

使用 isMatch 函数。

```
YourRegex.IsMatch(yourCharachter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:14:57.260

该站点可以帮助您：http: [//msdn.microsoft.com/en-us/library/3y21t6y4.aspx](http://msdn.microsoft.com/en-us/library/3y21t6y4.aspx) 那里解释了正则表达式方法。

来自链接的代码：

```
using System;
using System.Text.RegularExpressions;

public class Example
{
   public static void Main()
   {
      string[] partNumbers= { "1298-673-4192", "A08Z-931-468A", 
                              "_A90-123-129X", "12345-KKA-1230", 
                              "0919-2893-1256" };
      Regex rgx = new Regex(@"^[a-zA-Z0-9]\d{2}[a-zA-Z0-9](-\d{3}){2}[A-Za-z0-9]$");
      foreach (string partNumber in partNumbers)
         Console.WriteLine("{0} {1} a valid part number.", 
                           partNumber, 
                           rgx.IsMatch(partNumber) ? "is" : "is not");
   }
}
// The example displays the following output: 
//       1298-673-4192 is a valid part number. 
//       A08Z-931-468A is a valid part number. 
//       _A90-123-129X is not a valid part number. 
//       12345-KKA-1230 is not a valid part number. 
//       0919-2893-1256 is not a valid part number. 
```

# asp.net - AppDomainSetup 在 ASP.NET 中的使用

> ID：13194078
> 
> 赞同：1
> 
> 时间：2012-11-02T11:11:53.390
> 
> 标签：asp.net, appdomain, appdomainsetup

由于自 .NET 2.0 以来*SetShadowCopyPath*和*SetShadowCopyFiles已过时，我想通过***AppDomainSetup**类的*ShadowCopyDirectories*和*ShadowCopyFiles*属性设置这些参数。

 **在 MSDN 中，这是正确的用法：

```
AppDomainSetup ads = new AppDomainSetup();
ads.ShadowCopyDirectories = .. semicolon separated paths ...
ads.ShadowCopyFiles = ... true/false ...
AppDomain ad = AppDomain.CreateDomain("MyAppDomain", null, ads); 
```

这很好。但是，我如何在我正在运行的 Web 应用程序的当前域上进行这项工作，因为它的**AppDomain**是由 ASP.NET 在应用程序初始化时创建的（当第一个用户请求到达 IIS 时）并且我无法更改当前域设置？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:58:08.797

在 ASP.NET 应用程序上默认启用卷影复制。检查[hostingEnvironment](http://msdn.microsoft.com/en-us/library/vstudio/ms228159%28v=vs.90%29.aspx)元素。

您还应该阅读Fritz Onion 的 Essential ASP.NET With Examples in C# 中有关[卷影复制的部分。](http://books.google.gr/books?id=SwWw44nYJNgC&pg=PA18&lpg=PA11)**

# c# - 日期以一种奇怪的格式出现

> ID：13194079
> 
> 赞同：0
> 
> 时间：2012-11-02T11:11:57.463
> 
> 标签：c#, asp.net, json, .net-3.5

我有以下有效的代码：

```
<%@ WebService Language="C#" Class="Absences" %>

using System;
using System.Collections;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Web;
using System.Web.Script;
using System.Web.Script.Services;
using System.Web.Services;

public class Absence
{
    public string name;
    public DateTime from;
    public DateTime to;

    public Absence(string m_name, DateTime m_from, DateTime m_to)
    {
        name = m_name;
        from = m_from;
        to = m_to;
    }

    public Absence() { }
}

[ScriptService]
public class Absences : WebService {
    List<Absence> Absence = new List<Absence>();

    SqlConnection connection;
    SqlCommand command;
    SqlDataReader reader;

    [WebMethod()]
    public List<Absence> GetAbsences(string strDateYear, string strDateMonth, string strDateDay)
    {
        var absences = new List<Absence>();

        using (connection = new SqlConnection(ConfigurationManager.AppSettings["connString"]))
        {

            using (command = new SqlCommand(@"select full_name, from_date, to_date from table1", connection))
                {
                    connection.Open();
                    using (reader = command.ExecuteReader())
                    {
                        int NameIndex = reader.GetOrdinal("full_name");
                        int FromIndex = reader.GetOrdinal("from_date");
                        int ToIndex = reader.GetOrdinal("to_date");

                        while (reader.Read())
                        {
                            absences.Add(new Absence(reader.GetString(NameIndex), reader.GetDateTime(FromIndex), reader.GetDateTime(ToIndex)));
                        }
                    }
                }

        }

        return absences;
    }
} 
```

唯一的问题是日期，它们在 JSON 数据中以一种奇怪的格式出现，例如：

`"from":"\/Date(1353456000000)\/"`

我怎样才能得到以下格式的日期`dd/mm/yy`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:22:34.567

这是解决方案

```
var jsondateString = "\/Date(1353456000000)\/".substr(6);
var current = new Date(parseInt(jsondateString ));
var month = current.getMonth() + 1;
var day = current.getDate();
var year = current.getFullYear();
var date = day + "/" + month + "/" + year;
alert(date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:15:55.797

这应该工作

```
var data = {"from":"\/Date(1353456000000)\/"};
var parsedDate = new Date(parseInt(data.from.substr(6)));
var curr_date = parsedDate.getDate();
var curr_month = parsedDate.getMonth() + 1;
var curr_year = parsedDate.getFullYear();
alert(curr_date + "/" + curr_month + "/" + curr_year); 
```

工作小提琴 - [http://jsfiddle.net/tariqulazam/a2xZM/](http://jsfiddle.net/tariqulazam/a2xZM/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:22:16.473

你可以使用[moment.js](http://momentjs.com/)。它是一个非常灵活的开源库。

> 一个 5kb 的 JavaScript 日期库，用于解析、验证、操作和格式化日期。

```
moment("/Date(1198908717056-0700)/").valueOf(); // 1198908717056 
```

# android - 如何在Android应用程序中单击按钮打开第二个活动

> ID：13194081
> 
> 赞同：101
> 
> 时间：2012-11-02T11:12:02.873
> 
> 标签：android, android-intent, android-activity

我正在学习构建 android 应用程序，我需要一些具体的帮助。我似乎无法理解需要更改哪些模板代码，哪些是静态的。

在**LAYOUT**文件夹中，我有我的**ACTIVITY_MAIN.XML**，上面写着

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="horizontal">

 <Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/main_buttons_photos" />

 </LinearLayout> 
```

接下来，我有我的第二个活动**ACTIVITY_SEND_PHOTOS.XML**这是

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent" >

 <TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".SendPhotos" />

 <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="@string/title_activity_send_photos"
    android:textAppearance="?android:attr/textAppearanceLarge" />

 </RelativeLayout> 
```

然后我有我的**MainActivity.java**（这是 .class 吗？）这读取包 com.example.assent.bc;

```
 import android.os.Bundle;
 import android.app.Activity;
 import android.view.Menu;
 import android.view.View;

 public class MainActivity extends Activity {

 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);
 }

 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
     getMenuInflater().inflate(R.menu.activity_main, menu);
     return true;
 }
 /** Called when the user clicks the Send button */
 public void sendMessage(View view) {
     // Do something in response to button
 }
 } 
```

然后是我的**SendPhotos.java**文件；

```
 package com.example.assent.bc;

 import android.os.Bundle;
 import android.app.Activity;
 import android.view.Menu;
 import android.view.MenuItem;
 import android.support.v4.app.NavUtils;

 public class SendPhotos extends Activity {

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_send_photos);
    getActionBar().setDisplayHomeAsUpEnabled(true);
 }

 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_send_photos, menu);
    return true;
 }

 @Override
 public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
    }
    return super.onOptionsItemSelected(item);
 }

 } 
```

我希望我的主要活动中的按钮链接到我的 sendphotos 活动，只需打开该活动，没有什么花哨的，不发送任何数据或任何东西。

我知道在某个地方我需要我的

```
 Intent i = new Intent(FromActivity.this, ToActivity.class);
 startActivity(i); 
```

但我不知道用什么替换**ToActivity.class**或者我还需要什么。

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-11-02T11:29:17.323

您可以通过单击按钮移动到所需的活动。只需添加这一行。

`android:onClick="sendMessage"`

**xml:**

```
 <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="sendMessage"
        android:text="@string/button" /> 
```

在您的主要活动中，只需添加此方法：

```
public void sendMessage(View view) {
    Intent intent = new Intent(FromActivity.this, ToActivity.class);
    startActivity(intent);
} 
```

最重要的是：不要忘记在`manifest.xml`

```
 <activity>
      android:name=".ToActivity"
      android:label="@string/app_name">          
 </activity> 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-02T11:17:28.197

尝试这个

```
 Button button;

public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);

button=(Button)findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        Intent i = new Intent(getApplicationContext(),SendPhotos.class);
                        startActivity(i);
                    }
                });

 } 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-02T11:16:04.363

来自活动：你目前在哪里？

To Activity：你想去哪里？

`Intent i = new Intent( MainActivity.this, SendPhotos.class); startActivity(i);`

两个 Activity 都必须包含在清单文件中，否则它将找不到类文件并强制关闭。

编辑您的 Mainactivity.java

```
crate button's object; 
```

现在为点击事件编写代码。

```
 Button btn = (button)findViewById(R.id.button1);
         btn.LoginButton.setOnClickListener(new View.OnClickListener() 
       {

                @Override
                public void onClick(View v) 
                {
                 //put your intent code here
                }
   }); 
```

希望它对你有用。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-21T01:56:42.493

```
Button btn = (Button) findViewById(R.id.button1);

btn.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        Intent myIntent = new Intent(MainActivity.this, MainActivity2.class);
        MainActivity.this.startActivity(myIntent);       
    }  
}); 
```

完整菜鸟的完整菜鸟答案： `MainActivity`是第一个活动的名称。 `MainActivity2`是第二个活动的名称。 `button1`是`MainActivity`Activity 的 xml 中按钮的 ID。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-02T11:21:04.987

只需按照此步骤操作（我不是在编写代码，只是因为您可能会复制和粘贴而无法学习）..

1.  首先，您需要声明一个布局中的按钮

2.  通过在 oncreate 中查找其 id（使用 findviewById）来引用该按钮

3.  按钮的 setlistener（如 setonclick 监听器）

4.  最后处理点击事件（意味着使用您已经知道的意图开始新活动）

5.  不要忘记在清单文件中添加活动

顺便说一句，这很简单我想建议你从网上提供的简单教程开始对你来说会更好..

祝安卓好运

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-02T11:37:00.343

**用这些代码替换您的 MainActivity.class**

```
public class MainActivity extends Activity {

Button b1;
@Override
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);
 b1=(Button)findViewById(R.id.button1);
 b1.setOnClickListener(new View.onClickListener()
 {
  public void onClick(View v)
   {
       Intent i=new Intent(getApplicationContext(),SendPhotos.class);
       startActivity(i);
    }
 }
 )
} 
```

**`AndroidManifest.xml`在您的之后`</activity>`和之前**添加这些代码**`</application>`**

 **```
<activity android:name=".SendPhotos"></activity> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-02T11:16:53.907

替换以下行代码：

```
import android.view.View.OnClickListener;
public class MainActivity extends Activity implements OnClickListener{
   Button button;
    @Override
     public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        button=(Button)findViewById(R.id.button1);
        button.setOnClickListener(this);
      }
       public void onClick(View v) {
        if(v.getId==R.id.button1){
      Intent i = new Intent(FromActivity.this, ToActivity.class);
               startActivity(i);
            }
        }
     } 
```

在清单文件中添加以下行：

```
 <activity android:name="com.packagename.FromActivity"></activity>
   <activity android:name="com.packagename.ToActivity"></activity> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-10-11T10:27:24.300

这总是有效的，任何一个都应该没问题：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    Button btn = (Button) findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick (View v) {
            startActivity(new Intent("com.tobidae.Activity1"));
        }
        //** OR you can just use the one down here instead, both work either way
        @Override
        public void onClick (View v){
            Intent i = new Intent(getApplicationContext(), ChemistryActivity.class);
            startActivity(i);
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-10-22T10:32:19.793

将以下代码添加到 activity_main.xml 文件：

```
<Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="buttonClick"
        android:text="@string/button" /> 
```

只需将以下方法添加到 MainActivity.java 文件：

```
public void buttonClick(View view){
  Intent i = new Intent(getApplicationContext()SendPhotos.class);
  startActivity(i);
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-08-14T00:03:41.163

如果您有两个按钮并且对按钮单击事件具有相同的 id 调用，如下所示：

```
Button btn1;
Button btn2;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btn1= (Button)findViewById(R.id.button1);

    btn1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent intent=new Intent(MainActivity.this,target.class);
            startActivity(intent);
        }
    });

    btn2=(Button) findViewById(R.id.button1);//Have same id call previous button---> button1

    btn2.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

        }
    }); 
```

当您单击 时`button1`，`button2`将起作用并且您无法打开您的第二个活动。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-07-08T10:04:06.190

```
 <Button
            android:id="@+id/btnSignIn"
            android:layout_width="250dp"
            android:layout_height="40dp"
            android:layout_marginEnd="8dp"
            android:layout_marginLeft="8dp"
            android:layout_marginRight="8dp"
            android:layout_marginStart="8dp"
            android:layout_marginTop="16dp"
            android:background="@drawable/circal"
            android:text="Sign in"
            android:textColor="@color/white"
            app:layout_constraintLeft_toLeftOf="parent"
            app:layout_constraintRight_toRightOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/etPasswordLogin" /> 
```

在 JAVA 代码中

```
Button signIn= (Button) findViewById(R.id.btnSignIn);

signIn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                startActivity(new Intent(SignInPage.this,MainActivity.class));
            }
        }); 
```

}

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-03-26T08:38:54.047

您可以通过单击按钮移动到所需的活动。只需添加
android:onClick="timerApp" 这一行。

```
xml:

 <Button
        android:id="@+id/timer_app"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="timerApp"
        android:text="Click To run Timer Activity" /> 
```

在您的主要活动中，只需添加此方法：

```
 public void timerApp(View view){
        Intent intent= new Intent(MainActivity.this,TimerActivity.class);
        startActivity(intent);
    } 
```

或在 onCreate() 方法中添加以下代码

```
Button btn =findViewById(R.id.timer_app);//Don't need to type casting in android studio 3

btn.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Intent intent = new Intent(MainActivity.this, TimerActivity.class);
        startActivity(intent);       
    }  
}); 
```**

# ajax - TYPO3 4.7 带分机：getcontentbyajax

> ID：13194083
> 
> 赞同：1
> 
> 时间：2012-11-02T11:12:08.167
> 
> 标签：ajax, typo3, frontend

[`getcontentbyajax`](http://typo3.org/extensions/repository/view/getcontentbyajax)TYPO3 版本中的 Ext 不会生成 json 输出。4.7\. 它调用 500 内部服务器错误。在服务器日志中，我发现错误位于 /lib/class.tx_getcontentbyajax.php 的第 42 行。 `switch(t3lib_div::_GP('todo')){` 我发现了一个 4.7 问题： http: [//lists.typo3.org/pipermail/typo3-german/2012-September/087865.html](http://lists.typo3.org/pipermail/typo3-german/2012-September/087865.html)

`t3lib_div::GPvar()`更改为`t3lib_div::_GP()`

当您将所有 GPvar 更改为 _GP 时，扩展工作正常。

这里更改的方法 main() 形成 /lib/class.tx_getcontentbyajax.php 的 getcontentbyajax 扩展：

```
public function main(){

    switch(t3lib_div::_GP('todo')){ 
        case 'pagebrowser':
            $href = str_replace(t3lib_div::getIndpEnv('TYPO3_SITE_URL'), '', t3lib_div::_GP('href')); // IE6 has problems
            $requestedPage = file_get_contents(urldecode(t3lib_div::getIndpEnv('TYPO3_SITE_URL') . $href));
            /*preg_match('/<div.*?id\=[\"]{0,1}' . t3lib_div::GPvar('part') . '[\"]{0,1}.*?>[\r\n]{0,2}<!--ajaxreplace-->[\s]{0,}(.*?)[\s]{0,}<!--ajaxreplace-->[\r\n]{0,2}<\/div>/s', $requestedPage, $matches);*/
            preg_match('/<!--ajaxreplace-->(.*?)<!--ajaxreplace-->/s', $requestedPage, $matchesContent);
            preg_match('/<title>(.*?)<\/title>/s', $requestedPage, $matchesTitle);

            if(array_key_exists(1, $matchesContent)){
                if(array_key_exists(1, $matchesTitle)){
                    $this->data['title'] = $matchesTitle[1];
                }
                $this->data['content'] = $matchesContent[1];
                $this->data['success'] = true;
            } else {
                $this->data['content'] = 'An error occured, please reload the site or <a href="' . t3lib_div::_GP('href') . '" class="no-ajax">click this link</a> to load your desired page.';
                $this->data['success'] = false;
            }

            // hook
            if (is_array($GLOBALS['TYPO3_CONF_VARS']['EXTCONF']['getcontentbyajax']['mainHook'])){
                foreach ($GLOBALS['TYPO3_CONF_VARS']['EXTCONF']['getcontentbyajax']['mainHook'] as $_classRef){
                    $_procObj = & t3lib_div::getUserObj($_classRef);
                    $this->data = $_procObj->extraGlobalMarkerProcessor($this, $this->data);
                }
            }
        break;
    }
    echo json_encode($this->data);
} 
```

# iphone - 如何动画核心情节中的条形高度增长？

> ID：13194097
> 
> 赞同：2
> 
> 时间：2012-11-02T11:12:54.110
> 
> 标签：iphone, objective-c, animation, core-plot, bar-chart

我正在开发一个使用核心绘图的绘图应用程序。我想制作条形图高度增长的动画。我以前没有使用过 CALayer 动画。我看到了它的一些细节，但找不到任何方法来实现我的动机。虽然我觉得它可以发挥作用，因为图表是高度分类的 CALayers。如有错误请指正，并指导我使用动画来显示条形图的增长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:37:02.173

CABasicAnimation 和米歇尔对[这个问题](https://stackoverflow.com/questions/5552520/how-do-i-animate-the-appearance-of-a-bar-chart-in-core-plot?rq=1)的回答对我有用，图表现在动画流畅:)

# universal-image-loader - 通用图像加载器：OutOfMemory 错误

> ID：13194098
> 
> 赞同：2
> 
> 时间：2012-11-02T11:12:58.863
> 
> 标签：universal-image-loader

我正在使用universal-image-loader-1.6.2.jar（最新版本）。我正在尝试使用此库下载和缓存该图像。我有 47 张图片要从服务器下载，总共 5.22 Mb。我的最大图片尺寸为 720X480，大小约为 143kb。它运行良好，直到 40-41 图像之后它给出了错误

```
11-02 16:30:12.150: E/ImageLoader(31033): null
11-02 16:30:12.150: E/ImageLoader(31033): java.lang.OutOfMemoryError
11-02 16:30:12.150: E/ImageLoader(31033):   at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
11-02 16:30:12.150: E/ImageLoader(31033):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:493)
11-02 16:30:12.150: E/ImageLoader(31033):   at com.nostra13.universalimageloader.core.ImageDecoder.decode(ImageDecoder.java:83)
11-02 16:30:12.150: E/ImageLoader(31033):   at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.saveImageOnDisc(LoadAndDisplayImageTask.java:218)
11-02 16:30:12.150: E/ImageLoader(31033):   at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.tryLoadBitmap(LoadAndDisplayImageTask.java:138)
11-02 16:30:12.150: E/ImageLoader(31033):   at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.run(LoadAndDisplayImageTask.java:72)
11-02 16:30:12.150: E/ImageLoader(31033):   at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
11-02 16:30:12.150: E/ImageLoader(31033):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-02 16:30:12.150: E/ImageLoader(31033):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-02 16:30:12.150: E/ImageLoader(31033):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-02 16:30:12.150: E/ImageLoader(31033):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-02 16:30:12.150: E/ImageLoader(31033):   at java.lang.Thread.run(Thread.java:856)
11-02 16:30:47.170: E/Adreno200-ES20(31033): <qgl2DrvAPI_glUseProgram:1318>: **** 31033: glUseProgram(3)
11-02 16:30:47.170: E/Adreno200-ES20(31033): <qgl2DrvAPI_glUseProgram:1318>: **** 31033: glUseProgram(6) 
```

我已经在 git-hub 上看到并实施了关于 OOM 的建议。我跟着他们，我仍然收到错误。这是我的代码

```
if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
        cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"neongall");
    else
        cacheDir=context.getCacheDir();
    if(!cacheDir.exists())
        cacheDir.mkdirs();

    ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context)
    .threadPoolSize(3)
    .threadPriority(Thread.NORM_PRIORITY - 1)
    .memoryCache(new WeakMemoryCache())
    .denyCacheImageMultipleSizesInMemory()
    .offOutOfMemoryHandling()
    .discCacheExtraOptions(720, 480, CompressFormat.JPEG, 75)
    .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
    .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
    .imageDownloader(new URLConnectionImageDownloader(120 * 1000, 120 * 1000)) // connectTimeout (5 s), readTimeout (20 s)
    .defaultDisplayImageOptions(DisplayImageOptions.createSimple())
    .enableLogging()
    .build();
    //Initialize ImageLoader with created configuration. Do it once on Application start.
    imageLoader.init(config);

    options = new DisplayImageOptions.Builder()
    .cacheOnDisc()
    .imageScaleType(ImageScaleType.IN_SAMPLE_POWER_OF_2)
    .displayer(new RoundedBitmapDisplayer(10))
    .build(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-03T09:05:35.680

首先你的配置：

```
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context)
.threadPoolSize(3) // equal to default value
.threadPriority(Thread.NORM_PRIORITY - 1) // equal to default value
.memoryCache(new WeakMemoryCache())
.denyCacheImageMultipleSizesInMemory()
.offOutOfMemoryHandling()
.discCacheExtraOptions(720, 480, CompressFormat.JPEG, 75)
.discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
.discCacheFileNameGenerator(new HashCodeFileNameGenerator()) // equal to default value
.imageDownloader(new URLConnectionImageDownloader(120 * 1000, 120 * 1000)) // connectTimeout (5 s), readTimeout (20 s)
.defaultDisplayImageOptions(DisplayImageOptions.createSimple()) // equal to default value
.enableLogging()
.build(); 
```

等于

```
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context)
.memoryCache(new WeakMemoryCache())
.denyCacheImageMultipleSizesInMemory()
.offOutOfMemoryHandling()
.discCacheExtraOptions(720, 480, CompressFormat.JPEG, 75)
.discCache(new UnlimitedDiscCache(cacheDir))
.imageDownloader(new URLConnectionImageDownloader(120 * 1000, 120 * 1000))
.enableLogging()
.build(); 
```

**不要从自述文件中复制配置！**

你为什么关闭 OutOfMemory 处理？如果你这样做，那么你应该自己处理 OOM 错误`ImageLoadingListener.onLoadingFailed(FailReason.OUT_OF_MEMORY)`。

我给你的建议：

*   删除`.offOutOfMemoryHandling()`配置中的选项
*   删除`.discCacheExtraOptions(720, 480, CompressFormat.JPEG, 75)`配置中的选项
*   `.imageScaleType(ImageScaleType.IN_SAMPLE_INT)`在显示选项中使用
*   你真的需要 RoundedBitmapDisplayer 吗？请参阅文档，它会在舍入期间在内存中创建额外的位图。如果可以，请避免使用它。

# objective-c - 将触摸事件添加到 UIVIew 并将 UIView 的实例传递给被调用的选择器

> ID：13194110
> 
> 赞同：0
> 
> 时间：2012-11-02T11:13:35.743
> 
> 标签：objective-c, ios, uiview

我正在尝试将事件与`UIView`. 这可以通过`touchesBegan`method 和 via实现，`UIGestureRecognizer`但两种方式都无法将相同的实例`UIView`作为参数发送到事件选择器。有人可以告诉我一个合适的方法来实现这一点。

谢谢！

**编辑** 这是我尝试放置`UIGestureRecognizer`. 反过来，调用`expandActivity`方法。但是这个方法无论如何都不能`self.plannedActivityViewController.view`作为`expandActivity`参数传递。我的目标是使用`self.plannedActivityViewController.view`.

```
 UIGestureRecognizer *viewReongnizer = [[UIGestureRecognizer alloc] initWithTarget:self action:@selector(expandActivity)];
    [self.plannedActivityViewController.view addGestureRecognizer:viewReongnizer]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:39:58.227

试试这个（注意：在expandActivity之后）

```
UIGestureRecognizer *viewReongnizer = [[UIGestureRecognizer alloc] initWithTarget:self action:@selector(expandActivity:)];
[self.plannedActivityViewController.view addGestureRecognizer:viewReongnizer]; 
```

然后在 expandActivity

```
-(void)expandActivity:(UITapGestureRecognizer *)sender {

//here you can use sender.view to get the touched view

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:34:18.457

1.  子类`UIWindow *`化并使用子类作为应用程序中的关键窗口类型。
2.  实现`-(void)sendEvent:(UIEvent *)event`方法
3.  从`event.allTouches`你那里可以得到一个单曲`UITouch *`，它会给你`view`它的财产。

# android - 致命异常，android.content.res.Resources$NotFoundException：

> ID：13194113
> 
> 赞同：2
> 
> 时间：2012-11-02T11:13:42.080
> 
> 标签：android, layout

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {       
RelativeLayout screen = (RelativeLayout) findViewById(R.id.RelativeLayout01);
LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    switch (item.getItemId()) {
    case R.id.menu_control: {
    inflater.inflate(R.layout.adv_video, screen, true);
    adapter = new ArrayAdapter<String>(screen.getContext(), R.id.spinner1, new String[]{"Author","ISBN","Keyword","Title"});
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
spinner = (Spinner) screen.findViewById(R.id.spinner1);
spinner.setAdapter(adapter); 
```

进一步在代码按钮、编辑文本等中。如果评论`spinner.setAdapter(adapter);`- 一切正常，带有空微调器列表。

这是日志：

```
logcat:
11-02 14:02:01.735: E/AndroidRuntime(1865): FATAL EXCEPTION: main
11-02 14:02:01.735: E/AndroidRuntime(1865): android.content.res.Resources$NotFoundException: Resource ID #0x7f06000e type #0x12 is not valid
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:1874)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.content.res.Resources.getLayout(Resources.java:731)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:332)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:192)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.View.measure(View.java:8173)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1015)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.TableRow.measureChildBeforeLayout(TableRow.java:243)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:699)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.TableRow.onMeasure(TableRow.java:112)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.View.measure(View.java:8173)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1015)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:384)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:307)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.View.measure(View.java:8173)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1015)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:699)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.View.measure(View.java:8173)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:581)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:365)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.View.measure(View.java:8173)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.View.measure(View.java:8173)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.View.measure(View.java:8173)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.os.Looper.loop(Looper.java:123)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at android.app.ActivityThread.main(ActivityThread.java:4627)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at java.lang.reflect.Method.invokeNative(Native Method)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at java.lang.reflect.Method.invoke(Method.java:521)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-02 14:02:01.735: E/AndroidRuntime(1865):     at dalvik.system.NativeStart.main(Native Method)
11-02 14:02:01.743: W/ActivityManager(1306):   Force finishing activity de.mjpegsample/.MjpegSample 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T11:32:10.483

您可以设置( )的 id ，而不是提供要使用的*布局*文件的 id。实例化应该是这样的：`ArrayAdapter``Spinner``R.id.spinner1``ArrayAdapter`

```
adapter = new ArrayAdapter<String>(screen.getContext(), android.R.layout.simple_spinner_item, new String[]{"Author","ISBN","Keyword","Title"}); 
```

或者提供`id`另一个布局文件（`R.layout.layout_file_name`），它只包含一个`TextView`.

# magento - 如何在magento中将变量从块传递到phtml

> ID：13194117
> 
> 赞同：7
> 
> 时间：2012-11-02T11:14:10.190
> 
> 标签：magento, block, php

我想从块中传递价值，但我无法得到想要的结果。
出了点问题，我不知道为什么。
我尝试了`"block type="multibanners/multibanners" name="multibanners" category_id="5" alias="multibanners"`xml 文件中的代码。
为了得到我使用的结果`echo $this->getCategoryId()`和`getData('category_id')`.
我搜索但始终相同的代码。
谁能帮我代码有什么问题。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T11:25:52.403

您可以像这样设置变量：

```
<block type="multibanners/multibanners" name="multibanners" alias="multibanners">
<action method="setData"><name>category_id</name><value>5</value></action>
</block> 
```

并像这样检索它：

```
$this->getCategoryId(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-28T14:17:41.970

`Mage_Core_Block_Template::assign()`是为此而生的

模板文件中使用in `Mage_Page_Block_Html_Breadcrumbs::_toHtml()`+直接调用`$crumbs`var的例子`breadcrumbs.phtml`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T11:44:42.980

或者在你的控制器中，之后

```
 $this->loadLayout(); 
```

但之前

```
 $this->renderLayout(); 
```

使用此代码：

```
$this->getLayout()->getBlock('multibanners')->setCategoryId(42); 
```

# android - 带有操作栏的活动的 Android 屏幕截图

> ID：13194118
> 
> 赞同：5
> 
> 时间：2012-11-02T11:14:11.873
> 
> 标签：android, android-actionbar, screenshot

我使用这些行来截取我的活动截图：

```
View toppest = ((ViewGroup) ctx.getWindow().getDecorView().findViewById(android.R.id.content)).getChildAt(0);
toppest.setDrawingCacheEnabled(true);
Bitmap bmap = toppest.getDrawingCache();
Utils.saveBitmapOnSdcard(bmap);
toppest.setDrawingCacheEnabled(false); 
```

无论如何，此屏幕截图不包含操作栏。

如何使用 actionBar 截屏？

有关信息：我将 Sherlock 操作栏实现与 windowActionBarOverlay 选项设置为“true”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T15:03:33.220

我找到了解决方案。需要使用 ctx.getWindow().getDecorView() 查看获取全屏位图缓存。

此外，还有一个小细节：屏幕截图包含状态栏的空白区域。我们借助 Window.ID_ANDROID_CONTENT 上边距跳过状态栏高度。最后，这给出了与我们之前在手机上看到的大小相同的活动的完整屏幕截图：

```
 View view = ctx.getWindow().getDecorView();
  view.setDrawingCacheEnabled(true);

  Bitmap bmap = view.getDrawingCache();
  Log.i(TAG,"bmap:" + b);

  int contentViewTop = ctx.getWindow().findViewById(Window.ID_ANDROID_CONTENT).getTop(); /* skip status bar in screenshot */
  Storage.shareBitmapInfo = Bitmap.createBitmap(bmap, 0, contentViewTop, bmap.getWidth(), bmap.getHeight() - contentViewTop, null, true);

  view.setDrawingCacheEnabled(false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T00:32:24.237

可以在这里找到解决方案：

[状态栏的高度？](https://stackoverflow.com/questions/3355367/height-of-statusbar/3356263#3356263)

```
Rect rectgle= new Rect();
Window window= getWindow();
window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
int StatusBarHeight= rectgle.top;
int contentViewTop= 
    window.findViewById(Window.ID_ANDROID_CONTENT).getTop();
int TitleBarHeight= contentViewTop - StatusBarHeight;

   Log.i("*** Jorgesys :: ", "StatusBar Height= " + StatusBarHeight + " , TitleBar Height = " + TitleBarHeight); 
```

# iis-7 - 带有 Windows 身份验证的 IIS 7.5 上 ColdFusion 9 的正确权限是什么

> ID：13194125
> 
> 赞同：2
> 
> 时间：2012-11-02T11:14:36.210
> 
> 标签：iis-7, coldfusion, windows-authentication

我们在 IIS 7.5 上运行 ColdFusion 9。

我们的 Intranet 网站使用协商提供程序的 Windows 身份验证。

我们已经建立了一个 Active Directory 用户组（Web Developers）并分配了对 Web 源目录的权限。

对于一个特定的用户组，一切正常。

我们创建了一个新组（General Staff）并分配了对源目录的权限。

重新启动所涉及的所有服务后，我们最终会出现 401.3 错误，这些错误已通过身份验证但访问被拒绝错误。

该错误发生在 html 和 cfm 文件中。

为了验证访问权限，我在 Windows 资源管理器中浏览了 unc 路径。一切运作良好。

除了实际源目录之外，是否还有其他权限需要设置才能通过拒绝访问错误？

即使请求是 html 文件，ColdFusion 也会运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:14:09.347

将 ColdFusion9\runtime\lib\wsconfig 目录的读取权限分配给相关组允许请求继续进行。

# c++ - Qt4.8 QGraphicsWidget 使用

> ID：13194127
> 
> 赞同：0
> 
> 时间：2012-11-02T11:14:42.780
> 
> 标签：c++, qt, graphics

我无法从文档中弄清楚如何使用 QGraphicsWidget 在其上绘制一些东西。

你能帮我吗？我尝试了这段代码，但是当我将它添加到图形场景时，它什么也没显示。

```
class Platform : public QGraphicsWidget
{

    public:
        Platform()
        {

            QGraphicsEllipseItem elipse(0,0,10,10,this);
            setGraphicsItem(&elipse);

        }

}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:49:32.503

`QGraphicsWidget`不是您在其上绘制东西的小部件，它是可以在 Graphics View 框架中绘制的小部件。要绘制东西，您需要 a[`QGraphicsScene`](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html)来保存要绘制的项目和 a [`QGraphicsView`](http://qt-project.org/doc/qt-4.8/qgraphicsview.html)，它是显示`QGraphicsScene`.

您应该从[图形视图框架的文档](http://qt-project.org/doc/qt-4.8/graphicsview.html)开始。

# algorithm - 扩大或缩小不规则多边形

> ID：13194140
> 
> 赞同：3
> 
> 时间：2012-11-02T11:16:03.080
> 
> 标签：algorithm, language-agnostic, polygon

我有不规则多边形的坐标点，例如（x1，y1）...（x1，y1）。我可以使用坐标计算多边形的面积。如何使用坐标扩展或缩小多边形区域。？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T11:23:27.460

只需将每个坐标乘以一个固定值即可围绕原点进行缩放。

```
for each vertex i
  result[i].x = input[i].x * scale
  result[i].y = input[i].y * scale 
```

如果您想围绕不同的点进行缩放：

```
translate to origin (subtract the scaling center)
scale by the correct amount (multiply by a constant)
translate from origin (add the scaling center) 
```

要将区域缩放四倍，您需要将距离缩放两倍。因此，如果您的比例是根据面积定义的，请不要忘记转换为线性测量：

```
scale = sqrt area_scale 
```

如果您想缩放音量：

```
scale = volume_scale ^ (1/3) 
```

# php - 如何将 XML 数组传递给 Shopify API 调用

> ID：13194142
> 
> 赞同：1
> 
> 时间：2012-11-02T11:16:07.973
> 
> 标签：php, api, shopify

```
<?xml version="1.0" encoding="UTF-8"?>
<product>
   <id type="integer">100159400</id>
<title>150 Watt Mini Stereo Power Amplifier</title>
<variants type="array">
<variant>
<id type="integer">233139732</id>
<grams type="integer">700</grams>
<inventory-quantity type="integer">222</inventory-quantity>
 </variant>
</variants>
</product> 
```

它对我不起作用。我在 shopify api 调用中解析 xml 数组

```
$recurring_application_charge = $shopify('PUT', '/admin/products/109720638.xml', $product); 
```

在这里，我正在解析单个值，但我需要传递在 shopify 商店中插入记录后存储在数据库中的动态值。对于单个产品，即使更新命令也不适用于我。请帮帮我，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:19:07.260

如果您使用的是 Sandeep 的 PHP 适配器，您必须在 (Shopify.php) 中将内容类型更改为 XML。默认情况下，适配器使用 Json 格式来 POST 请求。

# css - 如何在网站中使用不常用的字体？

> ID：13194143
> 
> 赞同：-4
> 
> 时间：2012-11-02T11:16:11.380
> 
> 标签：css, fonts, font-face, webfonts

我见过一些使用“奇怪”字体的页面。

其中之一，称为`MuseoSlab500Regular`。我该怎么做才能在我的风格中使用它？

我是否需要从某个地方加载字体以在所有客户端中呈现而不会出现问题？

我一直在查看这个网站的代码来弄清楚，但我找不到他们加载`MuseoSlab500Regular`字体的 frmo：

[http://theme-fusion.com/avada/](http://theme-fusion.com/avada/)

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:19:10.690

是的，要使用“怪异”字体，您需要将它们添加到服务器并从那里使用它们，因为并非每次使用都将所有字体都安装在他们的计算机上。一种好方法是 fontface：[http ://www.font-face.com/](http://www.font-face.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:22:29.307

他们正在使用 @font-face 来加载该字体。

看看这个 css 文件：

[http://theme-fusion.com/avada/wp-content/themes/Avada/css/all.css](http://theme-fusion.com/avada/wp-content/themes/Avada/css/all.css)

在顶部，您将看到正在使用的 css 代码：

```
@font-face {
font-family: 'MuseoSlab500Regular';
src: url('../fonts/Museo_Slab_500-webfont.eot');
src: url('../fonts/Museo_Slab_500-webfont.eot?#iefix') format('embedded-opentype'),
    url('../fonts/Museo_Slab_500-webfont.woff') format('woff'),
    url('../fonts/Museo_Slab_500-webfont.ttf') format('truetype'),
    url('../fonts/Museo_Slab_500-webfont.svg#MuseoSlab500Regular') format('svg');
font-weight: normal;
font-style: normal;
} 
```

# postgresql - 如何在 postgres 中禁用超级用户

> ID：13194144
> 
> 赞同：1
> 
> 时间：2012-11-02T11:16:17.697
> 
> 标签：postgresql, root

在服务器上，我有两个数据库（比如 db1 和 db2 ）。我有一个名为 user1 的超级用户。

我的要求是禁用数据库 db1 的 user1（超级用户）。所以使用 user1 我只能连接到 db2 而不能连接到 db1。

如何才能做到这一点。

注意：postgres 版本是 8.0，两个数据库都在同一个数据库集群上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T14:00:50.270

完全删除他们的超级用户权限。让他们成为 ( ) 的所有者，*这样*他们就可以做任何事情，除了有限的仅限超级用户的操作，比如加载 C 扩展。`db2``ALTER DATABASE db2 OWNER TO whatever_user``db2`

您不能限制超级用户。这才是重点。仅限超级用户的操作是突破通常的访问控制规则的操作。例如，加载用户定义的 C 函数允许您编写和加载打开`pg_hba.conf`和重写它的函数，或者直接操作系统目录。同样，这些`adminpack`函数允许您直接访问文件系统，因此它们仅限超级用户使用。

如果他们是超级用户，他们可以阅读`pg_hba.conf`，看到您的用户 ID 有权登录`db1`，然后*更改您的密码，然后以您的身份登录*。

要求将超级用户限制为一个 DB 就像询问您是否可以让用户成为 root 用户，但仅限于一个子目录。（好的，所以使用 SELinux 你可以做到这一点，但这很*复杂*）。

如果你真的必须这样做，唯一的方法就是拆分`db1`并`db2`分成不同的 PostgreSQL 服务器，这些服务器在不同的未授权系统用户 ID 下运行。每个都有自己独立的`shared_buffers`，数据目录，监听`(ip-address, port)`组合，WAL，用户ID，数据库列表等。由于它们在不同的系统用户下运行，他们无权读取或写入彼此的数据目录，所以他们被隔离。它们必须侦听不同的端口和/或不同的 IP 地址，尽管您可以使用 PgBouncer 使它们在外部客户端看来是同一台服务器。

# vb6 - 以VB6形式获取鼠标位置

> ID：13194146
> 
> 赞同：0
> 
> 时间：2012-11-02T11:16:42.403
> 
> 标签：vb6, mousemove

在我正在编写的程序中，我需要鼠标的绝对位置在表单的左上角。我正在使用这段代码：

```
Private Sub Form_MouseMove(Button As Integer, Shift As Integer, X As Single, Y As Single)

    Debug.Print "x: " & X & " - y: " & Y

End Sub 
```

当我使用此代码时，左上角的坐标为 0,0。但问题是当我在表单内移动时，这些值太大了 15 倍。

所以这就是我使用的原因：

```
Private Sub Form_MouseMove(Button As Integer, Shift As Integer, X As Single, Y As Single)

    Debug.Print "x: " & X / 15 & " - y: " & Y / 15

End Sub 
```

这给出了正确的坐标，但为什么我需要将它除以 15？我不确定此代码是否在其他系统上兼容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T11:40:56.477

查看[MouseMove](http://msdn.microsoft.com/en-us/library/aa445516%28v=VS.60%29.aspx)的文档。返回的 X 和 Y 值对应于“对象的 ScaleHeight、ScaleWidth、ScaleLeft 和 ScaleTop 属性”。

因此，查看[ScaleHeight、ScaleWidth](http://msdn.microsoft.com/en-us/library/aa445663%28v=vs.60%29.aspx)和[ScaleLeft、ScaleTop](http://msdn.microsoft.com/en-us/library/aa445665%28v=vs.60%29.aspx)的文档，很明显您可以指定如何确定 X 和 Y 坐标。您不仅限于 Twips 或 Pixels，还可以使用您指定的任何编号系统。

这是 ScaleHeight, ScaleWidth 页面的引述：

> 例如，语句 ScaleHeight = 100 更改了窗体实际内部高度的测量单位。高度不是 n 个当前单位（缇、像素、...），而是 100 个用户定义的单位。因此，50 个单位的距离是对象高度/宽度的一半，101 个单位的距离将离开对象 1 个单位。

在这方面，为了确保您的结果符合您的期望，您可以准确地告诉表单它包含多少用户定义的单位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:37:57.640

单位为[`Twips`](http://en.wikipedia.org/wiki/Twip)（运行时转换因子：`screen.TwipsPerPixelX`和`Y`）。您还可以更改表单`ScaleMode`以使用`Pixel`s。

# javascript - RequireJs 优化器忽略插件

> ID：13194147
> 
> 赞同：4
> 
> 时间：2012-11-02T11:16:42.430
> 
> 标签：javascript, requirejs, require, js-amd

当我使用优化器时，我想忽略使用 require js 插件

`define(["css!styles.css"])`

这总是给我这个错误 `Cannot read property 'normalize' of undefined`。

我已将此选项设置为 require 优化器

`{ paths : { 'css' : 'empty:' } }`

但它一直给我错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-07T04:16:18.683

我不知道这是否是您想要的，但您可以删除 css 插件。

```
//Specify modules to stub out in the optimized file. The optimizer will
//use the source version of these modules for dependency tracing and for
//plugin use, but when writing the text into an optimized bundle, these
//modules will get the following text instead:
//If the module is used as a plugin:
//    define({load: function(id){throw new Error("Dynamic load not allowed: " + id);}});
//If just a plain module:
//    define({});
//This is useful particularly for plugins that inline all their resources
//and use the default module resolution behavior (do *not* implement the
//normalize() method). In those cases, an AMD loader just needs to know
//that the module has a definition. These small stubs can be used instead of
//including the full source for a plugin.
stubModules: ['text', 'bar'], 
```

所以在你的情况下：

```
stubModules: ['css'] 
```

更多详细信息，请参阅[Requirejs 优化器配置选项](https://github.com/jrburke/r.js/blob/master/build/example.build.js)

# scala - 如何表达更高种类类型的类型约束

> ID：13194149
> 
> 赞同：8
> 
> 时间：2012-11-02T11:16:49.213
> 
> 标签：scala, types

我正在尝试创建一些特征列表，由使用 CRTP 的类型参数化，但无法弄清楚如何表达类型约束。这是一些说明问题的示例代码：

```
trait A[X] {
  def x: X
}

trait B[Y <: A[Y]] {
  def y(i: Int): Y
}

case class C(i: Int) extends A[C] {
  def x = C(i)
}

case class D(i: Int) extends A[D] {
  def x = D(i)
}

case class E() extends B[C] {
  def y(i: Int) = C(i)
}

case class F() extends B[D] {
  def y(i: Int) = D(i)
}

object Program extends App {
  def emptyList[X[_ <: Z forSome { type Z <: A[Z] } ]]() = collection.mutable.ListBuffer.empty[X[_]]

  val myList = emptyList[B]()
  myList += E()
  myList += F()

  println(myList.map(_.y(2).x))
} 
```

所以在这里我试图创建一个符合 B 特征的对象列表。但是，此代码将无法编译，并给出以下错误：

> 类型参数 (B) 的种类不符合类型参数的预期种类 (类型 X)。B 的类型参数与 X 类型的预期参数不匹配：类型 Y 的边界 >:Nothing <: A[Y] 比类型 _ 的声明边界更严格 >:Nothing <: Z forSome { type Z <: A[Z] } val myList =空列表[B] ()

对我来说，这似乎`_ <: Z forSome { type Z <: A[Z] }`确实至少和我一样严格，`Y <: A[Y]`但也许我错过了一些东西。

所以问题是 - emptyList 函数的约束应该是什么才能正确处理 B？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T21:07:06.577

经过一些试验和错误，我得到了它的工作。注意：编译器告诉我们 A[+X] 和 B[+Y] 中的类型参数必须是协变的。

```
trait A[+X] {
  def x: X
}

trait B[+Y <: A[Y]] {
  def y(i: Int): Y
}

case class C(i: Int) extends A[C] {
  def x = C(i)
}

case class D(i: Int) extends A[D] {
  def x = D(i)
}

case class E() extends B[C] {
  def y(i: Int) = C(i)
}

case class F() extends B[D] {
  def y(i: Int) = D(i)
}

object Test extends App {
  def emptyList[X[Y <: A[Y]]] = collection.mutable.ListBuffer.empty[X[Y forSome {type Y <: A[Y]} ]]

  val myList = emptyList[B]
  myList += E()
  myList += F()

  println(myList.map(_.y(2).x))
} 
```

# java - 开源 Java 日期和时间选择器

> ID：13194153
> 
> 赞同：1
> 
> 时间：2012-11-02T11:17:00.033
> 
> 标签：java, datetime, jar

有谁知道一个好的单一 jar 日期和时间选择器库，它将输出您选择的字符串？类似于 Nebula [CDateTime](http://www.eclipse.org/nebula/widgets/cdatetime/cdatetime.php)小部件，但不是 Eclipse 小部件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:38:03.763

SwingX 很棒。您将使用 JXDatePicker。 [摆动X](http://www.javalobby.org/java/forums/t45447.html "JXDatePicker")

# java - 对 Liskov 替换原则的合规性进行单元测试是一种好习惯吗？

> ID：13194154
> 
> 赞同：2
> 
> 时间：2012-11-02T11:17:00.007
> 
> 标签：java, unit-testing, inheritance, liskov-substitution-principle

假设一个名为 的类`Sprinter`：

```
public class Sprinter {

    protected int travelMeters;

    public void run(int seconds) {
        this.travelMeters = 9 * seconds;
    }

    public int getTravelMeters(){
        return travelMeters;
    }
} 
```

和一个`SprintGenius`类型继承`Sprinter`：

```
class SprintGenius extends Sprinter {

    public void run(int seconds) {
        this.travelMeters = 10 * seconds;
    }
} 
```

从逻辑上讲，必须创建 2 个单元测试类，每种类型一个。

在`Sprinter`单元测试中，我最终会得到：

```
@Before
public void setUp() {
  Sprinter sprinter = new Sprinter();
}

public void testSprinterShouldRun90metersWithin10Seconds() {
  sprinter.run(10);
  assertEquals(sprinter.getTraveledMeters(),90);
} 
```

在`SprintGenius`单元测试中，我最终会得到：

```
@Before
public void setUp() {
  Sprinter sprinter = new SprintGenius();
}

public void testSprinterShouldRun100metersWithin10Seconds() {
  sprinter.run(10);
  assertEquals(sprinter.getTraveledMeters(),100);
} 
```

在上面的两个测试中，我都会在 10 秒内测试行进的米数。

显然，这两个测试都是绿色的。

**但是，违反里氏替换原则怎么办？**

事实上，任何客户端代码都应该期望任何短跑运动员在 9 秒内跑完 10 米。

3 个解决方案（前两个解决方案向所有团队的开发人员发出了规则，即使不是每个人都能很好地掌握 Liskov 的概念，也必须承认并保留）

1) 在`Sprinter`课堂上，重复每个测试，但这次基于 a`Sprinter sprinter = new SuperGenius()`并期望 90 米。=> 什么应该失败，这正是我们想要的！=> 防止违反 Liskov 原则。

2）在`SprintGenius`类中，始终基于完全相同的期望添加基于基类的每个测试的类似“克隆”。所以，如果你有 2 个不同的测试，我们最终会得到 4 个测试。2 将 Sprinter 声明为 a`Sprinter`和 2 声明`Sprinter`为`SprintGenius`.

3）从不继承具体类（我想这是你阅读这篇文章的第一反应:)），如果合适的话，更喜欢组合！这样这个问题就不会发生了。

基于许多开发人员忽略 Liskov 原则并且经常试图从具体类继承而不是使用其他更好的方法（如组合或不同的继承层次结构）这一事实，防止违反 Liskov 替换原则的最佳实践是什么？

我不想因为开发人员从我的书面课程继承（没有告诉我..），将其注入到一个共享的巨大异构`Sprinter`列表列表中并以“你好，奇怪的行为！”而给我带来麻烦。和数小时的调试时间......

我当然不想宣布我所有的具体类“最终”:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T11:24:19.263

单元测试是关于特定模块的测试，不能也不应该用于更广泛的事情。遵守 Liskov 替换原则是系统范围内的一个更广泛的问题，而不是模块范围内的问题。此外，它不是要在代码中测试的东西。这是一个纯粹的设计问题，与实现无关。我不认为自动工具可以强制执行 LSP。它应该在设计审查期间和稍后在代码审查期间处理（应检查是否符合设计）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T11:30:47.300

这并不违反 Liskov 替代原则的合规性。这是**糟糕的设计**。你的两个类在行为上没有不同，但在数据上。因此，您应该只有一个班级，并且**客户应该期望任何短跑运动员的跑距离与其速度成正比**。

因此，您应该添加 speed 属性并拥有具有具体行为的单个类。

之后，您可以考虑创建具有新行为的**真正扩展**类并考虑测试。

有了这个速度参数，对于其他类型的跑步者，即使他们以不同的速度跑步，也不应该打破 Liskov 替换原则。

你的问题是这样的：我的类扩展一个人没有通过测试，因为我已经将一个人的名字从“彼得”改为“罗伯特”。

对于此类问题，这是一个不好的例子。举个恰当的例子**，我认为是的，是退出测试它的好习惯，但这是一种极端防御性的方法。可能您可以利用给定的时间来更好地创建测试。**此外，该测试将在很短的时间内过时，很难为新的子类添加测试以确保旧行为正常工作。

# c# - 使用 app.config 自定义 InitialDirectory C#

> ID：13194159
> 
> 赞同：0
> 
> 时间：2012-11-02T11:17:14.157
> 
> 标签：c#, xml, visual-studio

我的 App.config 文件中有以下内容

```
 <?xml version="1.0" encoding="utf-8" ?>
     <configuration>
      <appSettings>
       <add key="save" value="C:\Test"/>
      </appSettings>
       </configuration> 
```

以及我的 Main.cs 中的以下内容

```
private void tsSaveImage_Click(object sender, EventArgs e)
{
     SaveFileDialog sd = new SaveFileDialog();

     sd.Filter = "TIFF Files (*.tif)|*.tif";
     sd.FilterIndex = 1;
     sd.InitialDirectory = 

} 
```

我想知道如何使用键中的值来设置 InitialDirectory。这个想法是，一旦安装了应用程序，我希望用户导航到 app.config 文件并只更改一次。

这是一个好方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:19:03.173

您需要使用 ConfigurationManager：

```
string value = ConfigurationManager.AppSettings[key]; 
```

在你的情况下：

```
value = ConfigurationManager.AppSettings["save"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:20:11.420

您可以通过 web.config 键设置 initail 目录

```
sd .InitialDirectory = ConfigurationManager.AppSettings[key].ToString(); 
```

# jvm-hotspot - JProfiler 固有时间

> ID：13194161
> 
> 赞同：1
> 
> 时间：2012-11-02T11:17:20.657
> 
> 标签：jvm-hotspot, jprofiler

热点视图（cpu 视图）显示固有时间的时间单位不正确。我尝试分析一个同时复制物理文件 200 次的应用程序。应用程序在 1.2 秒内完成，而 jprofiler 快照显示特定方法需要 122 秒。那很奇怪。

![这是一个快照示例](../Images/55f77897360808cbc08b41813197b078.png)

任何使用过 jprofiler 的人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:16:26.223

这看起来不错。JProfiler 显示经过的时间，而不是 CPU 时间。默认情况下，CPU 视图会累积所有线程，因此对于 200 个并发线程，显示的时间测量值应该是单个线程时间测量值的 200 倍以上。

您可以使用顶部的线程选择器切换到单个线程，然后您将看到与总运行时间相对应的时间。

# c# - 在其他 ViewModelA 中创建新的 ViewB + ViewmodelB 并在 ViewA 中显示它们

> ID：13194168
> 
> 赞同：1
> 
> 时间：2012-11-02T11:17:44.990
> 
> 标签：c#, wpf

我使用 MVVM。我在 xaml 中有一个带有网格的 ViewA 和一个 ViewModelA。在 ViewModelA 中，我有一个看起来像这样的方法，它在单击按钮时被调用：

```
public void ButtonClickMethod()
{
    ViewB viewB = new ViewB();
    viewB.DataContext = new ViewBViewModel();
} 
```

如何将所有创建的 viewB 添加到 ViewA 上的网格中，以便在那里看到它们？或者我的解决方案通常是错误的？

**编辑 ：**

我现在`ObservableCollection<ViewB>`在我的 ViewModelA 中使用了一个通知我的 ViewA xaml 中的更改

```
<ItemsControl ItemsSource="{Binding ObservableCollection<ViewB>}" /> 
```

唯一的问题是 ItemControl 中显示的 ViewB 应该是可拖动的。因此我使用了表达式混合

`Interaction.GetBehaviors(ViewB).Add(new MouseDragElementBehavior() { });`

当我创建一个新的 ViewB。但它不起作用。

**编辑2：**

我尝试了这个解决方案，但它对我不起作用:([将 MouseDragElementBehavior 与 ItemsControl 和 Canvas 一起使用](https://stackoverflow.com/questions/6358774/using-mousedragelementbehavior-with-an-itemscontrol-and-canvas)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:49:32.967

将您的 Grid 添加一个 ContentControl 并将其内容绑定到您的第二个视图。

这是一个带有 UserControl 的示例。

```
<ContentControl Grid.Column="0" Margin="5" Content="{Binding SecondView}"/> 
```

代码即时视图模型：

```
private UserControl secondView;
public UserControl SecondView
{
  get
  {
    return secondView;
  }
  set
  {
    this.SetProperty(ref secondView,value);
  }
} 
```

# c# - 在 C# 中动态设置属性类型

> ID：13194172
> 
> 赞同：3
> 
> 时间：2012-11-02T11:18:13.160
> 
> 标签：c#, parsing, reflection, types, properties

我的数据流出现以下问题：

数据流由一个字典组成，我想动态解析和指定值的类型。

即我的数据流包括：

*   “日期”、“2000 年 1 月 1 日”
*   “名字”，“乔”
*   “活着”，“真实”
*   “健康”、“100”

现在我想根据这个数据流设置我的泛型类的属性：

```
class GenericClass
{
    Hashtable genericAttributes;
} 
```

是否有可能通过反射将我的数据流值设置为正确的类型？

我可以尝试类似：

```
DateTime.TryParse(date, out myDate); 
```

对于日期时间对象，但我认为这在尝试解析双精度、浮点数、int16s、int32s、uint16 时不起作用...

对此有一些想法？

谢谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:18:09.133

我从你的问题中猜想它们都是`IConvertible`，所以我会在下面的代码示例中做一些事情。这个想法是我指定“想要”的顺序，即按照我想要的类型（如果它们可以适合多种类型）的顺序，然后我尝试按该顺序转换它们。

```
 public class GenericPropClass
    {
        public Type type;
        public object value;
        public string key;
    }

    [TestMethod]
    public void PropertySet()
    {
        var dict = new Dictionary<string, string>();
        var resultingList = new List<GenericPropClass>();
        // Specify the order with most "specific"/"wanted" type first and string last
        var order = new Type[] { typeof(DateTime), typeof(int), typeof(double), typeof(string) }; 

        foreach (var key in dict.Keys)
            foreach (var t in order)
            {
                try
                {
                    var res = new GenericPropClass()
                    {
                        value = Convert.ChangeType(dict[key], t),
                        key = key,
                        type = t,
                    };
                    resultingList.Add(res);
                    break;
                }
                catch (Exception)
                {
                    // Just continue
                }
            }

    } 
```

抱歉，我的回答几乎只包含代码，今晚我可能有时间改进它以了解我的想法，但我现在必须走了 :)

# silverlight - 我们如何通过 Silverlight 打印 POS 收据？

> ID：13194174
> 
> 赞同：0
> 
> 时间：2012-11-02T11:18:13.487
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0, silverlight-5.0

在这里，要求是通过 Silverlight 应用程序准备收据和打印。我必须使用 Partial Cut 等 POS 命令发送原始数据。它应该支持 A8 尺寸。可以直接与 POS 或 THERMAL 打印机通信吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T13:30:36.493

Silverlight Out of Browser 模式支持 COM 自动化。您至少需要 Silverlight 4。

如果您的 POS 不能被 COM 调用，那么您将需要编写必要的 COM 包装器。

# jquery - 知道复选框是否被选中的正确方法

> ID：13194175
> 
> 赞同：3
> 
> 时间：2012-11-02T11:18:26.527
> 
> 标签：jquery, html, checkbox, checked

> **可能重复：**
> [检查复选框是否使用 jQuery](https://stackoverflow.com/questions/2204250/check-if-checkbox-is-checked-with-jquery)

我对类型复选框的输入如何工作感到有些困惑。

如果我在一个复选框上设置一个值，比如 1，我会看到无论是否选中该复选框，提交表单时我得到的值都是 1。

```
<input type="checkbox" value="1"> 
```

那么，查看复选框是否被选中的正确方法是使用`checked`from jQuery? 或者如何正确完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T11:22:41.597

如果未选中复选框值，则不应提交它们。

如果您想使用 jQuery 进行检查，我将始终使用：

```
var isChecked = $('#checkbox').prop('checked'); 
```

或者

```
var isChecked = $('#checkbox').is(':checked'); 
```

*使用 JavaScript，您必须了解attributes*和*properties*之间的区别。`checked`既是属性又是属性。但是，checked 的*属性*并不总是在复选框的`checked` *属性*更改时更新（在某些浏览器中是这样）。将属性视为由 DOM 解析的 HTML 标记中的值。该`checked` *属性是 DOM 中复选框***元素**的实际成员，它始终根据 UI 中的复选框是选中还是未选中而变化。

如果你想尝试一个不需要 JavaScript 的万无一失的方法，你可以尝试“MVC”的方式，通过呈现一个隐藏的输入和一个具有相同名称的复选框，每个都有适当的“检查”状态值：

```
<input type="hidden" name="mybox" value="false" />
<input type="checkbox" name="mybox" value="true" /> 
```

提交表单时，如果在请求中找不到`mybox`值为“true”的值，则未选中该复选框。更多关于[这里](https://stackoverflow.com/questions/2860940/asp-net-mvcwhy-does-the-checkboxfor-render-an-additional-input-tag-and-how-can)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:26:24.587

为了检查复选框是否被实际选中，您必须使用

```
'boxname.checked=="" 
```

因为即使**未选中**该框，该值也将始终存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:25:15.277

`check`是`checkbox`标签的属性，所以你必须检查它是否被设置，没有其他值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T11:23:01.597

```
$('input[type=checkbox]').is(':checked') 
```

`true`如果选中，则返回，否则返回`false`。

在回答您对该问题的评论时，当您需要检查状态时，该值并没有什么好处。

# salesforce - 销售人员中的招聘工具（Jobscience vs Target Recruit）

> ID：13194179
> 
> 赞同：-1
> 
> 时间：2012-11-02T11:18:42.340
> 
> 标签：salesforce

我目前在销售人员工作。我们正计划为 salesforce 集成招聘工具。所以我们已经确定了 2 个产品（Jobscience 和 Target Recruit 产品）。现在我们必须从这两个中选择一个。

我只想知道哪一个是更好的招聘应用程序（包括从销售人员机会和其他功能中迁移数据）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:11:25.080

我无法与 Target Recruit 交谈，但我喜欢与 JobScience 合作，因为它将所有信息集中在一个地方。在根据过去的采访提供面试建议时非常有用，因为您的所有反馈都存储在一个位置。由于 JobScience 中的候选人记录与 SalesForce 中的客户联系方式相关，它还使招聘人员有机会更加熟悉他们正在处理的客户。

另外，我在一家机构工作，所以我无法谈论它在内部环境中的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:06:33.053

TargetRecruit.net 有另一家公司提供 DBSync 数据。他们在数据迁移方面做得更好。他们很快就完成了我们的迁移。两者都依赖 salesforce 的功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T03:13:30.890

披露：我曾经为 Jobscience 工作。

两种产品都试用过吗？如果你还没有，我强烈建议你这样做。

除非 Rob 实现了这两种产品，否则他不确定如何知道谁在数据迁移方面做得更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T01:55:36.667

我们现在使用 JobAdder 进行招聘（包括从 iProfile 迁移数据和其他功能，例如广泛的报告和与 Astute Payroll 系统的集成）但我在上一家公司使用了 saleforce，而 JobScience 是一个更好的招聘工具。销售人员发现 JobScience 更容易学习和更直观。

# python - python中的动态方法生成

> ID：13194180
> 
> 赞同：1
> 
> 时间：2012-11-02T11:18:43.970
> 
> 标签：python, getattr

我目前有这个代码：

```
class Generator(object):
    def __getattr__(self, name):    
        def f(self):
            return ("Result of"+name, self)
        f.__name__ = name
        return f

    def foo(self):
        pass

g = Generator()
print g.foo
print Generator.foo
print g.bar
print Generator.bar 
```

这使：

```
<bound method Generator.foo of <__main__.Generator object at 0x00B62D30>>
<unbound method Generator.foo>
<function bar at 0x00A9DE70>
AttributeError: type object 'Generator' has no attribute 'bar' 
```

我必须做些什么才能让它给出：

```
<bound method Generator.foo of <__main__.Generator object at 0x00B62D30>>
<unbound method Generator.foo>
<bound method Generator.bar of <__main__.Generator object at 0x00B62D30>>
<unbound method Generator.bar> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T01:26:56.233

这是一个元类，它将`__getattr__`类定义中的函数添加回元类本身。这避免了必须在多个位置定义函数，或者作为预先定义并单独添加到元类和类的单独全局函数。

```
class Meta(type):

    def __new__(mcls, name, bases, dikt):
        fgetattr = dikt.get('__getattr__')
        if fgetattr is not None:
            setattr(mcls, '__getattr__', fgetattr)
        return super(Meta, mcls).__new__(mcls, name, bases, dikt)

class Generator(object):
    __metaclass__ = Meta

    def __getattr__(obj, name):

        def f(self):
            return "Result of %s for %r" % (name, self)
        f.__name__ = name

        if isinstance(obj, type):
            setattr(obj, name, f)
        else:
            setattr(type(obj), name, f)
        return getattr(obj, name) 
```

与其通过动态函数的`__get__`描述符方法直接创建方法，我认为最好将函数存储在类 dict 中并依靠`getattr`返回正确的绑定/未绑定方法。后续的属性访问将使用类中的函数。由于`__getattr__`类和实例都使用相同的函数，`isinstance`因此需要检查以确保将动态函数存储到类而不是实例中。

在 Python 3 中，将函数作为类的属性仅返回函数，因为未绑定的方法已从语言中删除。此外，[元类语法](http://docs.python.org/3/reference/datamodel.html#customizing-class-creation)已更改为类定义行中的关键字参数。

测试：

```
>>> g = Generator()
>>> g.foo
<bound method Generator.foo of <__main__.Generator object at 0xb7248c2c>>
>>> Generator.foo
<unbound method Generator.foo>
>>> g.bar
<bound method Generator.bar of <__main__.Generator object at 0xb7248c2c>>
>>> Generator.bar
<unbound method Generator.bar>
>>> g.foo()
'Result of foo for <__main__.Generator object at 0xb7248c2c>'
>>> Generator.foo(g)
'Result of foo for <__main__.Generator object at 0xb7248c2c>'
>>> 'foo' in vars(Generator), 'bar' in vars(Generator)
(True, True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:33:08.987

你有两个问题。

1.  *您只在实例* `g`（而不是类）上设置动态函数`Generator`，所以`Generator.bar`没有定义。
2.  你不把它包装在 a 中`MethodType`，所以你得到的是一个函数而不是一个方法。

* * *

对于 1，如果您总是先调用，`g.foo`再调用`Generator.foo`，则只需添加该行

```
setattr(self.__class__, name, f) 
```

inside `__getattr__`，它将名称绑定为类上的方法。`__getattr__`否则，您将需要自定义*类型 object*，这意味着您必须使其成为自定义类的实例，即编写您自己的元类。

* * *

对于 2，请参阅@thg435 的回答。请注意，由于 Python 2 中的向后兼容性，这很麻烦，并且在 Py3k 中已经得到了很大的改进——现在你所做的基本上可以工作了。这是因为自动注入`self`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T11:24:20.810

`__getattr__()`仅适用于实例，您需要在元类上创建函数`Generator`以获得您想要的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T11:28:30.670

对于第一种情况（g.bar），替换`return f`为`return MethodType(f, self)`.

# android - 在android上更新textview

> ID：13194182
> 
> 赞同：0
> 
> 时间：2012-11-02T11:18:50.553
> 
> 标签：android

问题是我的布局是要输入的，我需要`TextView`从一方移动到另一个屏幕，为此我确保布局视图然后删除所有面再次`TextView`以不`TextView`让它在屏幕上“拖动” 。

这是我的代码：

```
Textview textview = new TextView(context); //context was been defined

poiView.removeAllViews();
for (int j = 0; j < poiP.length; j++) {
    //code
    texview.setText("iojforj");

    poiView.addView(textview, params); //params was been defined
    textview.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            function (v.getId());
        }
    }); 
```

现在的问题是，`TextView`似乎，它工作，移动等等，但不会让我访问先生点击的方法，因为它`TextView`已被删除并放入时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:33:28.470

而不是删除和重新添加 textView，你应该只是弄乱它的可见性。

因此，不要删除它们并稍后添加它们，您应该这样做

```
textView.setVisibility(View.INVISIBLE); //to make it disappear
textView.setVisibility(View.VISIBLE); //to make it reappear 
```

这样他们将保留分配给他们的 OnClickListeners

但是，如果这是从不同的线程运行的，则需要将其放入`runOnUiThread()`调用中。

编辑：让我们试试这个

```
 Textview textview = new TextView(context); //context has been defined
  poiView.removeAllViews();
  OnClickListener buttonListener = new OnClickListener() { //listener here }
  for (int j = 0; j < poiP.length; j++) 
  {
    //code
    texview.setText("iojforj");

    poiView.addView(textview, params); //params was been defined
    textview.setOnClickListener(buttonListener);
  } 
```

# xml - 如何使用 xpath 从节点获取属性值？

> ID：13194183
> 
> 赞同：20
> 
> 时间：2012-11-02T11:18:56.327
> 
> 标签：xml, string, xpath, return-value

对 xpath 来说是全新的。

我有xml：

```
<Values>
   <Value Value="a" CustomAtr="1" />
   <Value Value="b" CustomAtr="2" />
   <Value Value="c" CustomAtr="3" />
</Values> 
```

要按索引获取值，我可以使用：`string(/*/Value[1]/@CustomAtr)`

是否可以通过键获得价值？热门获取`CustomAtr`价值在哪里`Value="b"`？

谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-02T11:26:14.597

这应该可以解决问题：

```
string(//Value[@Value='b']/@CustomAttr) 
```

# c# - 如何在 GridView 中显示上传的文件并在单击相应的下载链接按钮时下载它们？

> ID：13194185
> 
> 赞同：1
> 
> 时间：2012-11-02T11:19:03.860
> 
> 标签：c#, asp.net, sql, sql-server

我正在使用 fileupload 上传文件，文件的详细信息（例如文件类型、文件名和完整路径）存储在数据库中名为 exceldetails 的表中，现在我想显示上传的文件并通过单击链接下载它们GridView 中每个文件旁边的按钮。这就是我上传文件的方式：

```
 string[] filePaths;
    string strFileType = System.IO.Path.GetExtension(FileUpload1.FileName).ToString().ToLower();
    string strFileName = FileUpload1.PostedFile.FileName.ToString();
    FileUpload1.SaveAs(Server.MapPath("~/Import/" + strFileName + strFileType));
    string strNewPath = Server.MapPath("~/Import/" + strFileName + strFileType);
    string strNewPath1 = Server.MapPath("~/Import/" + strFileName + strFileType).ToString();
    fileSize = FileUpload1.PostedFile.ContentLength / 1024;

    //EXCEL DETAILS TABLE
    con.Open();
    //=========================================
    DataTable dt8 = new DataTable();
    SqlCommand cmd8 = new SqlCommand("insert into exceldetails (name,type,details,size,path)" + "values(@name,@type,@details,@size,@path)", con);
    cmd8.Parameters.Add("@name", SqlDbType.VarChar).Value = strFileName;
    cmd8.Parameters.Add("@type", SqlDbType.VarChar).Value = strFileType;
    cmd8.Parameters.Add("@details", SqlDbType.VarChar).Value = DateTime.Now;
    cmd8.Parameters.Add("@size", SqlDbType.Int).Value = fileSize;
    cmd8.Parameters.Add("@path", SqlDbType.NVarChar).Value = strNewPath;
    cmd8.ExecuteNonQuery();
    con.Close();
    try
    {
        SqlDataAdapter da8 = new SqlDataAdapter(cmd8);
        da8.Fill(dt8);
    }
    catch { } 
```

我是初学者，你可以从问题本身来判断，所以请告诉我我需要在哪里添加详细信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:07:54.120

你的代码也很乱

尝试将其更改为类似这样的插入：

```
using( SqlConnection cn = new SqlConnection( "Your Conn String" ) )
{
    cn.Open();
    string sqlInsert = "INSERT STATEMENT";
    string fileName = FileUploadControl.FileName;
    string fileExtension = fileName.Substring( fileName.LastIndexOf( "." ), fileName.Length - fileName.LastIndexOf( "." ) );
    string filePath = "~/Import/" + fileName + fileExtension;
    int fileSize = FileUploadControl.PostedFile.ContentLength / 1024;

    FileUploadControl.SaveAs( Server.MapPath( filePath ) );

    using( SqlCommand cmd = new SqlCommand( sqlInsert, cn ) )
    {
        cmd.Parameters.AddWithValue( "@name", fileName );
        cmd.Parameters.AddWithValue( "@type", fileExtension );
        cmd.Parameters.AddWithValue( "@details", DateTime.Now );
        cmd.Parameters.AddWithValue( "@size", fileSize );
        cmd.Parameters.AddWithValue( "@path", filePath );
        cmd.ExecuteNonQuery();
    }
} 
```

这是为了让数据绑定

```
using( SqlConnection cn = new SqlConnection( "Your Conn String" ) )
{
    string sqlSelect = "SELECT STATEMENT";

    using( SqlDataAdapter da = new SqlDataAdapter( sqlSelect, cn ) )
    {
        DataTable dt = new DataTable();
        da.Fill( dt );

        //bind data
    }
} 
```

还要考虑使用中继器，它比网格视图灵活得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:51:24.330

您必须在网格中添加一个超链接列，其导航 URL 应设置为

```
"~/Import/" + strFileName + strFileType 
```

您将整个物理路径存储在数据库中，同时您应该将**“~/Import/”+ strFileName + strFileType 存储**在数据库中，并将该列用作下载链接列的数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:24:33.437

这是我如何使用 gridview 模板项执行此操作的示例：

```
<asp:TemplateField>
    <ItemTemplate>
      <asp:HyperLink ID="HyperLink1"
         runat="server"
         NavigateUrl='<%# Eval("AttachmentID", "GetAttachment.aspx?ID={0}") %>'
         ImageUrl="~/Images/Download16.png"
         Target="_blank"
         Height="16px"
         Width="16px">
      </asp:HyperLink>
    </ItemTemplate>
</asp:TemplateField> 
```

但是，我的附件文件存储在数据库中。我有一个页面，它接受一个标识附件的查询字符串参数，然后用于获取附件并让用户下载它。您应该修改超链接的 navigateURL 属性以链接到需要下载的内容。请注意，“AttachmentID”是由网格的数据源选择的字段，您可能会使用“FilePath”或类似的东西。

# c - 当我运行无限套接字打开和关闭时打开的文件太多

> ID：13194188
> 
> 赞同：4
> 
> 时间：2012-11-02T11:19:15.563
> 
> 标签：c, sockets

我已经在这个网站上搜索了所有关于这个问题的信息。

我的程序方案是：

*   有一个服务器总是监听来自客户端的请求。
*   有一个客户端总是`char`在 2 秒内向服务器请求

得到错误信息：

> 在程序运行大约 1024 次后，socket() 函数上发生了太多打开的文件。

我目前的解决方案是增加打开文件的数量： `"ulimit -n 5000"`，但我认为这不是一个完美的解决方案，因为它会使程序运行 5000 次。

那么，有人有更好的解决方案吗？

环境：

*   Ubuntu 10
*   c语言

我的代码如下：

客户：

```
 int sockfd;
    struct sockaddr_in address;
int socket_port = 9734;

while (1) {

    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    if (sockfd < 0)
        DieWithSystemMessage("socket() failed");//<<===========Too many open files
    memset(&address, 0, sizeof(address));
    address.sin_family = AF_INET;
    address.sin_addr.s_addr = inet_addr("127.0.0.1");
    address.sin_port = socket_port;
    //Establish the connection to the server
    if ((connect(sockfd, (struct sockaddr *) &address, sizeof(address)))
            < 0)
        DieWithSystemMessage("connect() failed");

    if (rename_count % 2 == 0)
        ch = 'A';
    else if (rename_count % 2 == 1)
        ch = 'B';
    else
        ch = 'E';
    ssize_t numBytes = send(sockfd, &ch, strlen(&ch), 0);

    if (numBytes < 0)
        DieWithSystemMessage("send() failed");
    else if (numBytes != strlen(&ch))
        DieWithUserMessage("send()", "sent unexpected number of bytes");
    //fflush(sockfd);
    shutdown(sockfd, SHUT_RDWR);

    rename_count++;

} 
```

服务器：

```
int server_sockfd, client_sockfd;
int server_len, client_len;
socklen_t clntAddrLen;
struct sockaddr_in server_address;
struct sockaddr_in client_address;
uint64_t start_time_micro, end_time_micro;
int socket_num = 9734;

server_sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (server_sockfd < 0)
    DieWithSystemMessage("socket() failed");

memset(&server_address, 0, sizeof(server_address));
server_address.sin_family = AF_INET;
server_address.sin_addr.s_addr = inet_addr("127.0.0.1");
server_address.sin_port = socket_num;

if ((bind(server_sockfd, (struct sockaddr *) &server_address,
        sizeof(server_address))) < 0)
    DieWithSystemMessage("bind() failed");
if ((listen(server_sockfd, 5)) < 0)
    DieWithSystemMessage("listen() failed");

while (1) {
    char ch;
    printf("\nserver waiting\n");

    //accept a connect
    clntAddrLen = sizeof(client_address);
    client_sockfd = accept(server_sockfd,
            (struct sockaddr *) &client_address, &clntAddrLen);
    if (client_sockfd < 0)
        DieWithSystemMessage("accept() failed");
    //reading and writing through client side
    ssize_t numBytesRcvd = recv(client_sockfd, &ch, 1, 0);
    if (numBytesRcvd < 0)
        DieWithSystemMessage("recv() failed");

    if (ch == 'A') {
        rename_num = 0;//printf("A\n");
    } else if (ch == 'B') {
        rename_num = 1;//printf("B\n");
    } else
        ;

    printf("%d. Got it!!!\n", i);

    close(client_sockfd);
}
close(server_sockfd); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:31:24.127

`shutdown()`和之间有很大区别`close()`。当您“关闭”一个套接字时，您将其置于“半关闭”状态，仍然可以通过连接发送或接收（取决于您关闭哪一半）。

套接字仍然有效，TCP 仍然维护有关连接的状态信息，端口仍然“打开”，并且套接字/文件描述符仍然分配给您的进程。

当您调用`close()`套接字/文件描述符时，它是免费的**，但其余的仍然是**. TCP 必须持有资源一段时间，通常是 2 分钟（这取决于谁做了关闭和其他一些事情），在此期间状态信息和本地端口本身仍在“使用中”。

因此，即使您可能不再超过进程的文件描述符限制，理论上也有可能使网络堆栈的资源饱和并且*仍然*无法打开新连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T11:21:25.117

您正在关闭客户端中的套接字，但从不关闭它。这不是一回事。

# jquery - jQuery on click replace image IE9 Bug

> ID：13194198
> 
> 赞同：3
> 
> 时间：2012-11-02T11:20:03.737
> 
> 标签：jquery, onclick, internet-explorer-9

在 IE9 中只有我有小图像，当用户单击它时，它会在上面的 div 中显示更大尺寸的小图像，因此您可以看到完整图像 - 它适用于除 IE9 之外的所有浏览器，我不知道还有什么可以做些什么来解决这个问题 - 这是一个缓存问题吗？css 问题？脚本问题？

```
<script type="text/javascript">
$(document).ready(function () {
    // image swap on the events template
    var $MainLargeImage = $('.control.Event .RightSide .Images .LargeImage');
    var $ThumbnailImages = $('.control.Event .RightSide .Images .smallImages img.SmallImage');

    $ThumbnailImages.click(function () {
        $MainLargeImage.attr('src', $(this).attr('src'));
    });
});
</script> 
```

你可以在这里看到问题：http: [//team-spirit.co.uk/events/library/A-Taste-Of-Vegas.aspx](http://team-spirit.co.uk/events/library/A-Taste-Of-Vegas.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:30:01.613

你能试试这个，让我知道console.log的生成吗？

```
$ThumbnailImages.on('click',function () {

    console.log(this);
    var src=$(this).prop('src');
    console.log(src);
    console.log($MainLargeImage.prop('src'));
    $MainLargeImage.prop('src', src);
    console.log($MainLargeImage.prop('src'));

}); 
```

# java - 创建一个 Java 定时器和一个 TimerTask？

> ID：13194201
> 
> 赞同：4
> 
> 时间：2012-11-02T11:20:16.217
> 
> 标签：java, swing, applet, paint, timertask

我是 Java 新手，我正在尝试设置一个我熟悉的简单计时器，`set_interval`因为我有 JavaScript 和 ActionScript 方面的经验，

我对类还不是很熟悉，所以很容易混淆，我知道我需要设置一个 new `Timer`，然后设置 a `TimerTask`，但是即使我正在查看文档，我也不知道该怎么做马上..

所以我创建了一个 Applet，这就是我的`init`方法：

```
public void init() {
    TimerTask myTask;
    Timer myTimer;
    myTimer.schedule(myTask,5000);
} 
```

我如何实际设置任务代码？我想让它做类似的事情

```
g.drawString("Display some text with changing variables here",10,10); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:25:50.570

正如许多优秀的 Stackoverflow 用户所说，这里的正确想法是使用[javax.swing.TImer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。这是一个小代码片段，可以为您提供帮助。请提出任何超出您能力范围的问题，我也会尝试提供信息。

```
import java.awt.*;
import java.awt.event.*;
import java.util.Random;
import javax.swing.*;

public class DrawStringWithTimer
{
    private final int WIDTH = 400;
    private final int HEIGHT = 300;
    private Timer timer;
    private int x;
    private int y;
    private int counter;
    private Random random;
    private String[] messages = {
                                    "Bingo, I am ON",
                                    "Can you believe this !!",
                                    "What else you thinking about ?",
                                    "Ahha, seems like you are confused now !!",
                                    "Lets Roll and Conquer :-)"
                                };
    private CustomPanel contentPane;

    private ActionListener timerAction = new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            if (counter == 5)
                counter = 0;
            /*
             * Creating random numbers where 
             * x will be equal to zero or 
             * less than WIDTH and y will be
             * equal to zero or less than HEIGHT.
             * And we getting the value of the
             * messages Array with counter variable
             * and passing this to setValues function,
             * so that it can trigger a repaint()
             * request, since the state of the 
             * object has changed now.
             */ 
            x = random.nextInt(WIDTH);
            y = random.nextInt(HEIGHT);
            contentPane.setValues(x, y, messages[counter]);
            counter++;
        }
    };

    public DrawStringWithTimer()
    {
        counter = 0;
        x = y = 10;
        random = new Random();
    }

    private void displayGUI()
    {
        JFrame frame = new JFrame("Drawing String Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        contentPane = new CustomPanel(WIDTH, HEIGHT);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
        /*
         * javax.swing.Timer is what you need
         * when dealing with Timer related
         * task when using Swing.
         * For more info visit the link
         * as specified by @trashgod, in the
         * comments.
         * Two arguments to the constructor
         * specify as the delay and the 
         * ActionListener associated with 
         * this Timer Object.
         */
        timer = new Timer(2000, timerAction);
        timer.start();
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new DrawStringWithTimer().displayGUI();
            }
        });
    }
}

class CustomPanel extends JPanel
{
    private final int GAP = 10;
    private int width;
    private int height;
    private int x;
    private int y;
    private String message = "";

    public CustomPanel(int w, int h)
    {
        width = w;
        height = h;

        setOpaque(true);
        setBackground(Color.WHITE);
        setBorder(BorderFactory.createEmptyBorder(GAP, GAP, GAP, GAP));
    }

    public void setValues(int x, int y, String msg)
    {
        this.x = x;
        this.y = y;
        message = msg;

        /*
         * As the state of the variables will change,
         * repaint() will call the paintComponent()
         * method indirectly by Swing itself. 
         */
        repaint();
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(width, height));
    }

    @Override
    protected void paintComponent(Graphics g)
    {
        /*
         * Below line is used to draw the JPanel
         * in the usual Java way first.
         */
        super.paintComponent(g);
        /*
         * This line is used to draw the dynamic
         * String at the given location.
         */
        g.drawString(message, x, y);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:30:23.950

无论您想执行什么，即绘图或smwhat，只需定义任务并实现其中的代码。

```
import javax.swing.*;
import java.awt.*;
import java.util.Timer;
import java.util.TimerTask;

public class TimerApplet extends JApplet {

  String someText;
  int count = 0;

  public TimerApplet() {
    Timer time = new Timer();
    Сalculate calculate = new Сalculate();
    time.schedule(calculate, 1 * 1000, 1000);
  }

  class Сalculate extends TimerTask {

    @Override
    public void run() {
      count++;
      System.out.println("working.. "+count);
      someText = "Display some text with changing variables here.." +count;
      repaint();

    }
  }

  //This is how do you actually code.
  @Override
  public void paint(Graphics g)//Paint method to display our message
  {
//    super.paint(g);   flickering
    Graphics2D g2d = (Graphics2D)g;
    g2d.setColor(Color.WHITE);
    g2d.fillRect(0, 0, getWidth(), getHeight());
    if (someText != null) {
      g2d.setColor(Color.BLACK);
      g2d.drawString(someText,10,10);
    }

    //.....
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T03:21:53.983

我在我的小应用程序中发现了同样的问题，我知道我的解决方案不是最好的，但它很简单。只需在自定义内部类中使用两个自变化参数即可。这是我的代码。

```
final static Random random = new Random();
 ....//other codes
static class MyTimerTask extends TimerTask {

        int index_x = random.nextInt(50);
        int index_y = random.nextInt(50);

        @Override
        public void run() {
            System.out.println("Display some text with changing variables here: " + index_x + "," + index_y);
            index_x = random.nextInt(50);
            index_y = random.nextInt(50);
            System.gc();
        }

        public static MyTimerTask getInstance() {
            return new MyTimerTask();
        }

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T11:32:53.847

**[如您在此链接中所期望的示例](http://www.fadalti.com/java/applet_double_buffer.htm)**

**计时器**将在我们的应用程序中永远运行，直到应用程序关闭或当没有更多作业可分配或调度时。

**TimerTask** - 这是具有某些功能的任务，该功能将根据时间或持续时间运行。

在**Timer**中，我们将分配**TimerTask**以运行特定的持续时间或在特定的持续时间开始运行。

请了解它是如何工作的，然后适用于小程序或任何其他

1、GCTask类扩展了TimerTask类，实现了run()方法。

2、在TimerDemo程序中，实例化了一个Timer对象和一个GCTask对象。

3、使用Timer对象，使用Timer类的schedule()方法调度任务对象延迟5秒后执行，然后每隔5秒继续执行。

4、main() 中的无限while 循环实例化了SimpleObject 类型的对象（其定义如下），这些对象可立即用于垃圾回收。

```
import java.util.TimerTask;

public class GCTask extends TimerTask
{
    public void run()
    {
        System.out.println("Running the scheduled task...");
        System.gc();
    }
}

import java.util.Timer;
public class TimerDemo
{
    public static void main(String [] args)
    {
        Timer timer = new Timer();
        GCTask task = new GCTask();
        timer.schedule(task, 5000, 5000);
        int counter = 1;
        while(true)
        {
            new SimpleObject("Object" + counter++);
            try
            {
                Thread.sleep(500);
            }
            catch(InterruptedException e) {}
        }
    }
}

public class SimpleObject
{
    private String name;
    public SimpleObject(String n)
    {
        System.out.println("Instantiating " + n);
        name = n;
    }
    public void finalize()
    {
        System.out.println("*** " + name + " is getting garbage collected ***");
    }
} 
```

# php - 尝试在一个程序中运行两个 PHP 函数，通过单击按钮执行

> ID：13194202
> 
> 赞同：1
> 
> 时间：2012-11-02T11:20:19.710
> 
> 标签：php, html, file, function

嗨，我正在尝试从一个程序运行两个 PHP 函数，这些函数通过按两个 html 表单输入来执行，一个带有 2 个按钮的表格，开始和删除；开始写入文件“打开”，删除写入文件“关闭”，但是当我单击运行中的两个按钮时，两个输出都关闭的 php 脚本请帮助！

* * *

有按钮的表。

```
<html>
<TABLE BORDER="3" CELLPADDING="0" CELLSPACING="10">
<TD>
<table BORDER="3" CELLPADDING="3" CELLSPACING="3">
           <TH>Socket 1</th>
           <TR></tr>
           <TD>Serial Number</TD> <TD>ON/OFF</TD>
           <TR></TR>
           <TD>Elapsed Time </TD> 
           <TD><?php
                 include_once ("statusfileon.php")         
                     ?></TD> 
           <TD><?php 
                 include_once ("statusfileoff.php")         
                     ?></td>
           <TR></TR>
           </TABLE>
</TD>
<TD>
<table BORDER="3" CELLPADDING="3" CELLSPACING="3">
           <TH>Socket 2</th>
           <TR></tr>
           <TD>Serial Number</TD> <TD>ON/OFF</TD>
           <TR></TR>
           <TD>Elapsed Time</TD> <TD>Start</TD> <TD>Remove</td>
           <TR></TR>
           </TABLE> 
</TD>
</TABLE>
</html> 
```

* * *

Satusfileon.php

```
<?php // statusfileon.php
      //Write file if button is clicked
      if(isset($_POST['submit'])) {
               statusfileon();
}
?>
<?php //Write file function
function statusfileon(){ //File function name.
$fh = fopen("statusfile.txt", 'w') or die("Fail to create file");
//Text which is displayed in file (on).
$text = <<<_END
on
_END;
fwrite($fh, $text) or die("Could not write to file"); // If file location could not be found file isn't writen.
fclose($fh); //Close file.
}
?>
<html>
   <!--Button and variable for file permission. -->
    <form action="<?=$_SERVER['PHP_SELF'];?>" method="post">
     <input type="submit" name="submit" value="Start">
      </form>
</html> 
```

* * *

状态文件off.php

```
<?php // statusfileoff.php
      //Write file if button is clicked.
      if(isset($_POST['submit'])) {
               statusfileoff();
}
?>
<?php //Write file function 
function statusfileoff(){ //File function name.
$fh = fopen("statusfile.txt", 'w') or die("Fail to create file");
//Text which is displayed in file (off).
$text = <<<_END
off 
_END;
fwrite($fh, $text) or die("Could not write to file"); // If file location could not be found file isn't writen.
fclose($fh); //Close file.
}
?>
<html>
   <!--Button and variable for file permission. -->
    <form action="<?=$_SERVER['PHP_SELF'];?>" method="post">
     <input type="submit" name="submit" value="Remove">
      </form>
</html> 
```

* * *

任何帮助将不胜感激，因为我是编程新手，请原谅任何不良做法，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:25:41.760

```
 <TD><?php
       include_once ("statusfileon.php")         
  ?></TD> 
       <TD><?php 
             include_once ("statusfileoff.php")         
  ?></td> 
```

在提供 HTML**之前**，服务器会执行 PHP 。因此，单击按钮并不像调用您的 PHP 函数。

在这种情况下，`statusfileon()`执行`statusfileoff()`，然后立即执行，然后将页面提供给您的浏览器。**按钮点击没有做任何事情。**

* * *

要执行代码，如果您想要您正在寻找的行为，您可能希望使用 HTML 链接将用户重定向到`statusfileon.php`或`statusfileoff.php`单击按钮。

# maxscript - Maxscript标签字符串

> ID：13194203
> 
> 赞同：0
> 
> 时间：2012-11-02T11:20:27.533
> 
> 标签：maxscript

下面的代码工作正常，只是我想在创建推出之前动态更改标签文本，而不是之后。我试图在推出时将变量（rolloutlabel）作为字符串传递，只是我似乎无法做到这一点，而不必通过使用按钮更新它来围绕它进行编码。如果取消注释第 6 行，我得到的（无用）错误是“语法错误：在 =，预期名称”

```
rolloutlabel = "label"
rollout rolloutDialog "Rollout" width:100 height:50
(
    label alabel "" pos:[10,10] width:90 height:16
    button updateBTN "Update label" pos:[10,25] width:80 height:16
    -- alabel.text = rolloutlabel as string
    -- this just gets a syntax error if i leave it here uncommented
    on updateBTN pressed do
    (
        alabel.text = rolloutlabel
    )
)
createDialog rolloutDialog 
```

知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:40:18.060

看一下 rollout open 子句：

```
rolloutlabel = "label"
rollout rolloutDialog "Rollout" width:100 height:50
(
    label alabel "" pos:[10,10] width:90 height:16
    button updateBTN "Update label" pos:[10,25] width:80 height:16
    -- alabel.text = rolloutlabel as string
    -- this just gets a syntax error if i leave it here uncommented

    on rolloutDialog open do
    (
        alabel.text = rolloutlabel
    )

    on updateBTN pressed do
    (
        alabel.text = rolloutlabel
    )
)
createDialog rolloutDialog 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-17T15:09:40.587

您可以保留相同的脚本，但是您可以简单地编写 rolloutlabel，而不是 alabel 后的空双引号。脚本将如下所示：

```
rolloutlabel = "label"
rollout rolloutDialog "Rollout" width:100 height:50
(
    label alabel rolloutlabel pos:[10,10] width:90 height:16
    button updateBTN "Update label" pos:[10,25] width:80 height:16
    --alabel.text = (rolloutlabel as string)
    -- this just gets a syntax error if i leave it here uncommented
    on updateBTN pressed do
    (
        alabel.text = rolloutlabel
    )
)
createDialog rolloutDialog 
```

# c# - 该属性不是“类”类型的声明属性

> ID：13194215
> 
> 赞同：0
> 
> 时间：2012-11-02T11:21:16.743
> 
> 标签：c#, entity-framework, ef-code-first

我收到了错误`The property 'Rank' is not a declared property on type 'MasterUser'. Verify that the property has not been explicitly excluded from the model by using the Ignore method or NotMappedAttribute data annotation. Make sure that it is a valid primitive property.`，我检查了我的模型类，它就在那里。

```
public class MasterUser
{
    //many other properties...
    public virtual char Rank { get; set; }
    //more properties below
} 
```

我还检查了我的数据库上下文，它也在那里并且完美映射。

```
public class BBDataContext : DbContext
{
    public DbSet<MasterUser> Users { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        #region MUSR_USRID mapping

        //Mapped properties above....
        modelBuilder.Entity<MasterUser>()
            .Property(usr => usr.Rank).HasColumnName("MUSR_RANK");
        //More mapped properties..

        modelBuilder.Entity<MasterUser>().ToTable("dbo.MUSR_FIL");
        #endregion

        base.OnModelCreating(modelBuilder);
    }
} 
```

在表中，`MUSR_RANK`可使用 char 数据类型为空。

我怎样才能解决这个问题？数据库对此有影响吗？我目前正在使用 SQL Server 2000。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T11:24:09.270

[实体数据模型中支持的原始数据类型](http://msdn.microsoft.com/en-us/library/ee382832.aspx)

所以你必须使用 a`string`而不是 a `char`，我认为

并添加一些数据`OnModelCreating`

```
modelBuilder.Entity<MasterUser>()
            .Property(usr => usr.Rank).HasColumnName("MUSR_RANK")
            .HasMaxLength(1)
            .IsFixedLength()
            .IsUnicode(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-26T12:25:19.113

当我找到此页面时，我遇到了同样的错误并正在寻求帮助。我知道这篇文章很旧，但由于我的解决方案不同，我发布它以防它帮助其他人。我正在使用 EF 6。

我的错误是因为我无意中将模型类的属性设为只读。

```
[Key]
[StringLength(10)]
public string ProjectNumber { get; } 
```

EF 错误并不能很好地描述问题。一旦我添加了 set 访问器，错误就消失了。

# mysql - Mysql有效索引

> ID：13194219
> 
> 赞同：0
> 
> 时间：2012-11-02T11:21:26.600
> 
> 标签：mysql, database, database-indexes

目前我正在创建索引，因为我需要它们用于特定的 sql 查询。但它们开始相互重叠。

有什么规则可以有效地定义它们吗？

例如：

*   如果我有 column1 和 column2 的两个索引，column1、column2 的复合索引是否改进了两列的选择？
*   column1 和 column2 的索引与 column2 和 column1 的索引之间有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:29:58.563

A 和 B 两列的索引也可用作 A 列的索引，但不能用作 B 列的索引。

我不知道索引是否有一个简单的规则，也许只是在查询中查找 where 子句和 order by 语句中涉及的列并评估要使用的列。

请记住，索引对于搜索小子集的大量行有意义。索引也会减慢插入和更新速度，因此请明智地使用它们。如果遇到性能问题，只需简单地索引所有用于 JOIN 的行并添加更多行就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:30:07.083

> 如果我有 column1 和 column2 的两个索引，column1、column2 的复合索引是否改进了两列的选择？

是的，它确实。必须先合并单独的索引，否则只使用一个索引。

> column1 和 column2 的索引与 column2 和 column1 的索引之间有什么区别？

在复合索引中，列的顺序很重要，是的。如果您的查询在 WHERE 子句中只有 column2，则不会使用 (column1, column2) 上的复合索引。

如果您在 (column1, column2) 上有一个复合索引，如果您的查询在 WHERE 子句中只有 column1，也可以使用它。

有关更多信息，请参阅我对索引问题给出的其他答案：

[MYSQL 长超级键](https://stackoverflow.com/questions/12092948/mysql-long-super-keys/12093791#12093791)

[MySQL查询优化LIKE term% ORDER BY int](https://stackoverflow.com/questions/12296258/mysql-query-optimization-of-like-term-order-by-int/12296810#12296810)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:33:03.557

**问：如果我有 column1 和 column2 的两个索引，column1、column2 的复合索引是否改进了两列的选择？**

是的，那么综合指数更好。

来自[Mysql](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)

“mysql> SELECT * FROM tbl_name WHERE col1=val1 AND col2=val2;

如果 col1 和 col2 上存在多列索引，则可以直接获取相应的行。如果 col1 和 col2 上存在单独的单列索引，则优化器会尝试使用索引合并优化（请参阅第 8.3.1.4 节，“索引合并优化”），或者通过确定哪个索引排除更多行来尝试找到最严格的索引并使用该索引来获取行。”

**问：column1 和column2 的索引与column2 和column1 的索引有什么区别？**

是的，它会有所作为。这取决于您如何形成查询。

[来自 Mysql 文档：](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)

示例如果您在表上有如下索引：

索引名称（姓氏，名字）

“名称索引是对 last_name 和 first_name 列的索引。该索引可用于查询中的查找，这些查询为 last_name 和 first_name 值的组合指定已知范围内的值。它也可用于仅指定 last_name 的查询值，因为该列是索引的最左侧前缀。”

您将获得以下查询的索引优势：

SELECT * FROM test WHERE **last_name** =' Widenius';

但索引不用于以下查询中的查找：

SELECT * FROM test WHERE **first_name** ='Michael';

希望这会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T11:56:32.513

问）如果我有 column1 (A) 和 column2 (B) 的两个索引，column1、column2 的复合索引是否改进了两列的选择？

*   是的，如果您只有两个索引 A 和 B，`SELECT something from table where A = 1 and B =2`将只使用两个索引之一，但如果您有复合索引 A，B，它将使用它，这应该更快

问）column1 和column2 的索引与column2 和column1 的索引有什么区别？

*   序列在复合索引中很重要。假设您有与上面相同的查询，并且您的表有 100 万个条目，其中只有 50 个匹配 A=1，10000 个匹配 B=1，那么复合索引 A,B 的性能将比 B,A 好得多。因此，您需要选择具有最小基数的索引的第一个元素。

这可能有用

[http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html) http://stackoverflow.com/questions/1823685/when-should-i-use-a-composite-index

# c# - 为 IEqualityComparer 实现 GetHashCode 有条件的平等

> ID：13194221
> 
> 赞同：5
> 
> 时间：2012-11-02T11:22:08.273
> 
> 标签：c#, linq, set, hashcode

我想知道是否有人对这个问题有任何建议。

我将 intersect 和 except (Linq) 与自定义 IEqualityComparer 一起使用，以查询 ISyncableUsers 的两个序列的设置差异和设置交集。

```
public interface ISyncableUser
{
    string Guid { get; }
    string UserPrincipalName { get; }
} 
```

两个 ISyncableUser 是否相等背后的逻辑是有条件的。条件围绕两个属性 Guid 和 UserPrincipalName 是否具有值。解释这种逻辑的最好方法是使用代码。下面是我的客户 IEqualityComparer 的 Equals 方法的实现。

```
public bool Equals(ISyncableUser userA, ISyncableUser userB)
{
    if (userA == null && userB == null)
    {
        return true;
    }

    if (userA == null)
    {
        return false;
    }

    if (userB == null)
    {
        return false;
    }

    if ((!string.IsNullOrWhiteSpace(userA.Guid) && !string.IsNullOrWhiteSpace(userB.Guid)) &&
        userA.Guid == userB.Guid)
    {
        return true;
    }

    if (UsersHaveUpn(userA, userB))
    {
        if (userB.UserPrincipalName.Equals(userA.UserPrincipalName, StringComparison.InvariantCultureIgnoreCase))
        {
            return true;
        }
    }
    return false;
}

private bool UsersHaveUpn(ISyncableUser userA, ISyncableUser userB)
{
    return !string.IsNullOrWhiteSpace(userA.UserPrincipalName)
            && !string.IsNullOrWhiteSpace(userB.UserPrincipalName);
} 
```

我遇到的问题是实现 GetHashCode 以便尊重上面表示的上述条件相等。我能够让 intersect 和 except 调用按预期工作的唯一方法是简单地始终从 GetHashCode() 返回相同的值，从而强制调用 Equals。

```
 public int GetHashCode(ISyncableUser obj)
 {
     return 0;
 } 
```

这行得通，但正如预期的那样，性能损失是巨大的。（我已经用非条件相等性对此进行了测试。对于两个包含 50000 个对象的集合，正确的哈希码实现允许在大约 40 毫秒内执行拦截和除外。始终返回 0 的哈希码实现大约需要 144000 毫秒（是的，2.4 分钟！） )

那么，我将如何在上述场景中实现 GetHashCode() 呢？

任何想法都会非常受欢迎！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:21:14.297

如果我们假设您的`Equals`实现是正确的，即它是反射的、传递的和对称的，那么您的函数的基本实现`GetHashCode`应该如下所示：

```
 public int GetHashCode(ISyncableUser obj)
        {
            if (obj == null)
            {
                return SOME_CONSTANT;
            }

            if (!string.IsNullOrWhiteSpace(obj.UserPrincipalName) &&
                <can have user object with different guid and the same name>)
            {
                return GetHashCode(obj.UserPrincipalName);
            }

            return GetHashCode(obj.Guid);
        } 

```

您还应该了解，您的对象之间存在相当复杂的依赖关系。

实际上，让我们取两个`ISyncableUser`对象：'u1' 和 'u2'，这样 u1.Guid != u2.Guid，但 u1.UserPrincipalName == u2.UserPrincipalName 并且名称不为空。平等要求对于任何 'ISyncableUser' 对象 'u' 强制要求 u.Guid == u1.Guid，条件 u.UserPrincipalName == u1.UserPrincipalName 也应该为真。这种推理决定了 GetHashCode 的实现，对于每个用户对象，它应该基于它的名称或 guid。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T14:50:17.277

如果我没看错，你的等式关系不是传递的。想象以下三个`ISyncableUser`s：

```
A { Guid: "1", UserPrincipalName: "2" }
B { Guid: "2", UserPrincipalName: "2" }
C { Guid: "2", UserPrincipalName: "1" } 
```

*   `A == B`因为他们有相同的`UserPrincipalName`
*   `B == C`因为他们有相同的`Guid`
*   `A != C`因为他们也不分享。

从[规格](http://msdn.microsoft.com/en-us/library/ms132154.aspx)，

> **Equals**方法是自反的、对称的和传递的。也就是说，如果用于将对象与自身进行比较，则返回**true ；**两个对象为**真**`x`，`y`如果它为**真**，则为`y`and `x`; and对两个对象为**真**`x`，`z`如果它对 and 为**真**，`x`并且对and`y`也为**真**。`y``z`

如果您的相等关系不一致，则无法实现支持它的哈希码。

从另一个角度来看：您实际上是在寻找三个功能：

*   `G`将 GUID 映射到整数（如果您知道 GUID 但 UPN 为空白）
*   `U`将 UPN 映射到整数（如果您知道 UPN 但 GUID 为空白）
*   `P`将 (guid, upn) 对映射到整数（如果你都知道的话）

这样`G(g) == U(u) == P(g, u)`对于所有`g`和`u`。这只有在你完全忽略的情况下才有`g`可能`u`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:13:02.963

一种方法是维护用户名和 GUIDS 的哈希码字典。

*   您可以在开始时为所有用户生成此字典，这可能是最干净的解决方案。

*   您可以在每个用户的构造函数中添加或更新条目。

*   或者，您可以在 GetHashCode 函数中维护该字典。这意味着您的 GetHashCode 函数有更多的工作要做，而且并非没有副作用。让它与多个线程或并行 linq 一起工作将需要一些更仔细的工作。所以我不知道我是否会推荐这种方法。

不过，这是我的尝试：

```
private Dictionary<string, int> _guidHash = 
     new Dictionary<string, int>();

private Dictionary<string, int> _nameHash = 
     new Dictionary<string, int>(StringComparer.OrdinalIgnoreCase);

public int GetHashCode(ISyncableUser obj)
{
    int hash = 0;

    if (obj==null) return hash;

    if (!String.IsNullOrWhiteSpace(obj.Guid) 
        && _guidHash.TryGetValue(obj.Guid, out hash))
        return hash;

    if (!String.IsNullOrWhiteSpace(obj.UserPrincipalName) 
        && _nameHash.TryGetValue(obj.UserPrincipalName, out hash))
        return hash;

    hash = RuntimeHelpers.GetHashCode(obj); 
    // or use some other method to generate an unique hashcode here

    if (!String.IsNullOrWhiteSpace(obj.Guid)) 
         _guidHash.Add(obj.Guid, hash);

    if (!String.IsNullOrWhiteSpace(obj.UserPrincipalName)) 
         _nameHash.Add(obj.UserPrincipalName, hash);

    return hash;
} 
```

请注意，如果 ISyncableUser 对象不能很好地发挥作用并且表现出像 Rawling 的回答那样的情况，这将失败。我假设具有相同 GUID 的用户将具有相同的名称或根本没有名称，具有相同 principalName 的用户具有相同的 GUID 或根本没有 GUID。（我认为给定的 Equals 实现具有相同的限制）

# tridion - cd_link.PageLink GetLinkAsString(...) 导致页面每隔一个请求都失败

> ID：13194223
> 
> 赞同：7
> 
> 时间：2012-11-02T11:22:11.983
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我目前正在从 Tridion R5.3 迁移到 Tridion 2011。我在通过演示服务器提供某些页面时遇到问题。作为参考，我所有的网页都是经典的 ASP，我在 IIS7.5 上运行它们。

我有一个页面位于`http://www.example.com/widget/index.asp`。当我第一次访问该页面时，我得到一个`The page cannot be displayed because an internal server error has occurred.`，如果我然后刷新页面它加载正常，如果我第三次刷新页面它会出现错误。该页面适用于所有其他请求。

我在我的网站上启用了失败的请求跟踪，但我收到了错误

```
ASP_LOG_ERROR
LineNumber: 87
ErrorCode: 800706be 
Description: 
```

注意没有描述。

被调用的代码是

```
85: Dim objTranslationPageLink
86: Set objTranslationPageLink = Server.createObject("cd_link.PageLink")
87: strTranslatedPageLink = objTranslationPageLink.GetLinkAsString("tcm:0-12-1", "tcm:12-123456-64", "", "", "TranslationFound", False)
88: Set objTranslationPageLink = Nothing 
```

看起来创建对象没有问题`cd_link.PageLink`，只是在调用`GetLinkAsString(...)`函数时。

我`cd_link.PageLink`在许多其他页面中使用该对象没有任何问题，但似乎使用此特定代码的页面会遇到问题。

我在想这可能与缓存页面有关，但是我关闭了 ASP 页面的缓存（IIS7 > ASP > 服务 > 缓存属性）并且仍然存在问题。

有任何想法吗？

### 编辑1

该代码在 Windows Server 2003 IIS6 上运行良好。我试图让它在 Windows Server 2008 IIS7 上运行。

### 编辑2

看来该页面正在创建很多`cd_link.ComponentLink`对象`cd_link.PageLink`。我有一个测试页面，我在其中创建了 10 个 ComponentLink 对象，我得到了错误（每隔一个页面），但是如果我将其减少到 5 个 ComponentLink 对象，它每次都有效。

### ~~编辑3~~

~~我的 cd_core.xxxx.xx.xx.log 有以下错误~~

~~2012-11-02 11:55:34,027 错误 XMLConfigurationReader - 使用架构“schemas/cd_link_conf.xsd”验证文件“cd_link_conf.xml”时出错。cvc-complex-type.3.2.2：属性“DefaultRootLocation”不允许出现在元素“Publications”中。~~

### 编辑4

谢谢你陪我。我的 cd_link_config 问题已修复，似乎没有相关性。现在我的四个日志文件（cd_core、cd_deployer、cd_monitor、cd_transport）中的任何一个都没有错误，但原始问题仍然存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T15:56:55.323

看起来您正在运行 CD Link windows 服务，以下修补程序可能有助于解决您的问题。我没有尝试过这个修补程序，但描述说`Page link fails on second attempt of accessing the page`，这意味着它可能会根据记录器内存资源广泛工作。

无论如何值得看看这个修补程序：**CD_2011.1.0.78355**

**说明：**链接 Windows 服务未正确清理某些 Windows 平台上的记录器内存资源

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T11:51:26.577

我使用 Classic ASP 和 SDL Tridion 已经很长时间了，但请仔细检查以下内容

*   链接服务是否在服务器上运行？
*   检查您的 cd_licenses.xml 文件是否到位
*   验证您是否拥有正确的 cd_link_conf.xml 和 cd_storage_conf.xml（我相信这些是从 5.3 更改的）
*   在 Application 和 Tridion 事件日志中查找线索
*   Tridion 链接日志文件
*   该错误代码似乎暗示链接 DLL 未正确注册。

这就是我现在能想到的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T12:26:34.133

我没有意识到 2011 实际上对配置文件进行了模式验证，但无论如何，现在错误很明显了。我建议您自己在 XML 编辑器（例如 XML Spy）中进行验证。那应该准确指出配置文件有什么问题。

[要定期检查您的配置，您可能会发现按照此处](http://www.dominic.cronin.nl/weblog/xml-schema-validation-from-powershell-and-how-to-keep-your-tridion-content-delivery-system-neat-and-tidy)所述编写脚本很有趣。

# iphone - 为什么 CCLabelTTF 不在 @"\n" 上开始一个新行？

> ID：13194228
> 
> 赞同：2
> 
> 时间：2012-11-02T11:22:25.910
> 
> 标签：iphone, objective-c, cocos2d-iphone

```
dialogLabel=[CCLabelTTF labelWithString:@"" dimensions:CGSizeMake(140, 54) hAlignment:UITextAlignmentLeft lineBreakMode:UILineBreakModeWordWrap fontName:@"Marker Felt" fontSize:12];
[dialogLabel setString:@"Hello \n World!"]; 
```

但它显示`@"Hello \n World!"`。

如果我使用

```
[dialogLabel setString:@"This is a long long long long long long long long long long long long long long long long long sentence!"]; 
```

它显示在几行中。

我认为这是 cocos2d 的一个错误，我试图在谷歌上找到解决这个问题的方法，但是我没有得到任何帮助。

我希望你能帮助我解决这个问题，谢谢:)！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:30:34.543

根据[此来源](http://www.cocos2d-iphone.org/forum/topic/10384)，`CCLabelTTF`不（容易？）支持此功能，但支持`CCLabelBMFont`。

```
CCLabelBMFont *label2 = [CCLabelBMFont labelWithString:@"Multi line\nCenter" fntFile:@"bitmapFontTest3.fnt"];
label2.anchorPoint = ccp(0.5f, 0.5f); 
```

显然有一种涉及更多代码的方法可以使相同的工作`CCLabelTTF`（上面的链接），因此您可能也想尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:29:42.917

请放回斜线。比如@"Hello /\n World!" 并检查。

# c# - 是否可以使用指向基类型的 AncestorType 进行 WPF RelativeSource 绑定？

> ID：13194231
> 
> 赞同：6
> 
> 时间：2012-11-02T11:22:33.653
> 
> 标签：c#, wpf, binding, interface, relativesource

我想将属性绑定到在其 DataContext 中具有 ViewModel 的父容器视图。

**当父级是ConcreteClassView**的直接实例时，此代码运行良好：

```
Property="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ty:ConcreteClassView}}, Path=DataContext.Name}" 
```

但是，当试图通过基类或接口定位它时，找不到父对象。样本：

```
PropertyB="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ty:BaseClassView}}, Path=DataContext.Name}"

PropertyB="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ty:INamedElementView}}, Path=DataContext.Name}" 
```

给出：

```
class ConcreteClassView : BaseClassView, INamedElementView { } 
```

好的，我们假设**FindAncestor**，**AncestorType**需要具体类型才能工作。

*但是有任何解决方法可以仅基于基类或实现给定接口来定位祖先吗？*

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-03T11:55:08.850

**FindAncestor, AncestorType 确实适用于基类**，所以你的假设是错误的。

这是证据：这行得通

```
<HeaderedContentControl Tag="ABC">
    <TextBlock Text="{Binding Tag, RelativeSource={RelativeSource AncestorType=ContentControl}}" />
</HeaderedContentControl> 
```

它也适用于接口（Button 实现 ICommandSource）：

```
<Button Tag="ABC">
    <TextBlock Text="{Binding Tag, RelativeSource={RelativeSource AncestorType=ICommandSource}}" />
</Button> 
```

（在 .NET 4.5 中测试）

**那么为什么你的代码不起作用呢？**

1.  在绑定目标和您要查找的元素之间的可视化树中，可能有另一个从 ty:BaseClassView 派生的元素。

这不起作用：

```
<HeaderedContentControl Tag="ABC">
    <Label>
        <TextBlock Text="{Binding Tag, RelativeSource={RelativeSource AncestorType=ContentControl}}" />
    </Label>
</HeaderedContentControl> 
```

Label 也是继承自 ContentControl，所以本例中 Binding Source 为 Label

2.  可视树可能已断开连接。例如 Popup 控件是 Logical Tree 的一部分，但它有自己的可视化树，因此您不能在 popup 内使用 RelativeSource FindAncestor 来查找 popup 外的父级。请注意，当您设置 Visibility="Collapsed" 时，这些元素也会从可视树中删除

**如何调试？**

1.  您可以使用转换器来调试您的绑定。只需指定 RelativeSource 和一些假转换器并将路径留空。然后，您可以将断点放置到您的转换器，其中 value 是您的绑定源。

2.  使用绑定的元素的加载事件将所有可视父项写入调试窗口

**编辑**：现在在 Visual Studio 2015 中，您可以使用**Live Visual Tree** explorer 在运行时检查可视化树（类似于浏览器的开发人员工具可以检查 dom 元素）。使用此工具，您应该能够在几秒钟内找到应用程序中的错误。

[https://msdn.microsoft.com/en-us/library/mt270227.aspx](https://msdn.microsoft.com/en-us/library/mt270227.aspx)

# actionscript-3 - flash cs3 符号重命名问题“1120 访问未定义的属性”

> ID：13194234
> 
> 赞同：0
> 
> 时间：2012-11-02T11:22:45.420
> 
> 标签：actionscript-3, undefined, rename, flash-cs3, document-class

我正在处理一个旧游戏项目，并将符号名称“宝藏”更改为“食物”以及符号内的图像。

奇怪的是，游戏运行良好，无需更改动作脚本文件中的“宝藏......

然后在 documentClass actionscript 文件中，我将点击“Treasure”的实例更改为“Food”，我得到“1120：访问未定义的属性 Food”。在..

```
if (otherObjects[objectNum] is Food) 
```

有没有什么地方我必须清除符号或其他东西的所有链接？:/ actionscript 文件绝对是与 .fla 相关联的文件 - 我直接通过 .fla 的 documentClass 字段打开它

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:39:11.240

哦！当您右键单击该符号时，我在 Linkage 中找到了它。班级名称仍然是'宝藏'！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:34:04.743

看来您仍然将 Actionscript 的该资产导出为“宝藏”。如果需要，将其重命名为“食物”。

# c# - 使用 C# 从 XML 读取特定任务

> ID：13194235
> 
> 赞同：0
> 
> 时间：2012-11-02T11:22:45.013
> 
> 标签：c#, xml, list, target

我们如何从以下 xml 中读取来自目标 P（价格）的值的列表？

```
<D d="2012-11-01">
  <P t="00:00:00+01:00">39.90999985</P> 
  <P t="01:00:00+01:00">36.22999954</P> 
  <P t="02:00:00+01:00">29.44000053</P> 
</D>
<D d="2012-11-02">
  <P t="00:00:00+01:00">32.33000183</P> 
  <P t="01:00:00+01:00">29.12999916</P> 
  <P t="02:00:00+01:00">30.18000031</P> 
  <P t="03:00:00+01:00">29.12999916</P> 
</D> 
```

我知道 C# 中的程序（这里还有其他主题），但我查询目标 P 和 D 内的机会。扮演任何角色，或者如果我从目标 P 读取，它将读取所有价格，如上面xml文件

```
 <D>
  <P>39.90999985</P> 
  <P>36.22999954</P> 
  <P>29.44000053</P> 
</D> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:47:22.160

```
class Price
{
    public DateTime? Timestamp { get; set; }
    public decimal Price { get; set; }
}

public IEnumerable<Price> GetPrices(XDocument document)
{
    return
        from d in document.Root.Elements("D")
        let date = d.Attribute("d")
        from p in d.Elements("P")
        let time = p.Attribute("t")
        select new Price
        {
            Timestamp = (date == null || time == null)
                ? (DateTime?) null
                : DateTime.Parse(date.Value + " " + time.Value),
            Price = Convert.ToDecimal(p.Value)
        };
} 
```

* * *

或者，使用`XmlSerializer`（假设根元素被命名`<Data>`）：

```
[XmlType]
public class Data : List<Day>
{   
}

[XmlType("D")]
public class Day
{
    [XmlAttribute("d")]
    public string Date { get; set; }

    [XmlElement("P")]
    public List<Price> Prices { get; set; }
}

public class Price
{
    [XmlAttribute("t")]
    public string Time { get; set; }

    [XmlText]
    public decimal Value { get; set; }
}

public Data ParseXml(TextReader reader)
{
    var ser = new XmlSerializer(typeof(Data));
    return (Data) ser.Deserialize(reader)
} 
```

# netbeans - 在netbeans RCP中刷新窗口

> ID：13194237
> 
> 赞同：0
> 
> 时间：2012-11-02T11:22:52.500
> 
> 标签：netbeans, rcp

我正在创建一个 netbeans RCP 应用程序。但是我在打开窗户时遇到了一个问题。

我有来自数据库的动态数据，在不同的表中。

当我第一次打开窗口时，数据是正确的，但是当我再次打开它时，数据已经重复了。

我什至用按钮操作测试了它以更改标签名称，当我关闭并打开窗口时，将显示新名称。我怎样才能让它工作以只显示正确的数据。

我尝试了不同的方法来重新绘制面板、updateui 等，但没有任何改变。

有人可以指出我正确的方向吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T19:52:59.517

你能发送一些代码吗？

如果您通过注释使用“打开操作”，则只会创建一个 topcomponent 实例。

如果您直接使用新的 TopComponent，那么一切都在您手中。

可能是，您应该使用 swingworker 或 utility.attachInitJob

吉尔卡

# c# - C# 十进制取上限 2

> ID：13194239
> 
> 赞同：4
> 
> 时间：2012-11-02T11:23:08.520
> 
> 标签：c#, math

我想将我的十进制值（如 2.2222）四舍五入为 2.23。当我使用圆形时，

```
decimal a = Math.Round((decimal)2.222, 2); 
```

当我使用天花板时，它会导致 3

```
decimal c = Math.Ceiling((decimal)2.22); 
```

我怎样才能得到 2.2222 到 2.23 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T11:29:29.177

```
public static decimal CeilingAfterPoint(this decimal number, int digitsAfterPoint) {
    return Math.Ceiling(number * (decimal)Math.Pow(10, digitsAfterPoint))
           / (decimal)Math.Pow(10, digitsAfterPoint);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:27:53.847

```
decimal c = Math.Ceiling((decimal)2.2222*100)/100; 
```

但这很愚蠢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:31:07.903

尝试类似的东西

```
decimal c = Math.Ceiling((decimal)2.222*100)/100; 
```

但如果你的价值是`2.22`

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2012-11-02T16:56:13.820

我解决了我的问题..

```
 string n = "2.2222";
        string[] s = n.Split('.');

        if (s[1].Count() >= 3)
        {
            List<char> z = s[1].ToString().Take(2).ToList();
            int c=Convert.ToInt32(z[0].ToString() + z[1].ToString()) + 1;
          //  int b = Convert.ToInt32(s[1].ElementAt(0).ToString() + s[1].ElementAt(1).ToString()) + 1;
            string output= s[0] + "." + c.ToString();            
        } 
```

现在可以放任何数字，它将取 2 个十进制值并加 1。谢谢。

# android - 在 XMPP 中获取离线消息

> ID：13194240
> 
> 赞同：3
> 
> 时间：2012-11-02T11:23:13.373
> 
> 标签：android, xmpp, chat, offline

在我的聊天应用程序中，我想在用户登录时获取离线消息（如果有人向他发送了消息）。当用户处于在线状态并且在用户重新登录后无法获取消息时，我会收到通知。我也检查了 xmpp 日志猫。我可以在那里阅读离线消息，但我无法通知用户他/她的离线消息。

这是我在服务的 onStart 中使用的侦听器（服务在用户登录时立即启动）

```
PacketFilter filter = new MessageTypeFilter(Message.Type.chat);
        final PacketCollector collector = connection.createPacketCollector(filter);
        connection.addPacketListener(new PacketListener() {

            @Override
            public void processPacket(Packet packet) {
                // TODO Auto-generated method stub
                //notification(packet.getFrom());
                packet = collector.nextResult();
                Message message = (Message)packet;
                senderName = packet.getFrom();

                int alphaPOS = senderName.indexOf("@");
                String subSenderName = senderName.substring(0,alphaPOS); 

                if(UserChatActivity.checkPresence==false){

                    notificationforChat(subSenderName+": "+message.getBody(),packet.getFrom().toString());

               }

            }

        }, filter);

    } 
```

当用户在线时，这工作正常。但我希望一旦用户登录，他应该被通知他的消息

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:53:27.580

您必须确保您的 XMPP 服务器支持[XEP 0136](http://xmpp.org/extensions/xep-0136.html)，即 XMPP 的消息归档扩展。

该扩展名将解释如何检索存档的消息。

对于[ejabberd](http://ejabberd.im)，您可以为此安装和配置[mod_archive 扩展](http://www.ejabberd.im/mod_archive)。它将消息保存到 SQL 后端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T00:00:52.463

更改过滤器以过滤 Message.class 类型的消息而不是聊天消息，因为离线消息不是聊天类型（我不认为）

```
PacketFilter filter = new PacketTypeFilter(Message.class); 
```

看你怎么走。

实际上正在重新阅读您的问题；您是说您可以在 LogCat 中看到正在接收的离线消息，但在屏幕上看不到？您在哪里记录收到的消息？

# ios - 在点击 MKAnnotation 时添加并显示 MKOverlay

> ID：13194242
> 
> 赞同：0
> 
> 时间：2012-11-02T11:23:18.337
> 
> 标签：ios, mapkit, mkannotation, mkoverlay

`MKOverlay`当用户点击一个时可以添加一个`MKAnnotation`吗？即，我想要实现的是当用户点击注释引脚时，我想绘制一个多边形（例如一个圆圈），并且当用户再次点击时，覆盖应该隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:59:43.873

如果点击了注释，则通过添加叠加层调用函数。在您的代码中使用它：

```
[self.mapView addOverlay:self.circle]; 
```

为了控制是否已经点击了注释，我会在你的界面中使用 BOOL 变量：

```
@interface ClassName() {
    BOOL annotationWasTapped;
}
@end 
```

# wpf - DependencyProperty 未触发

> ID：13194243
> 
> 赞同：1
> 
> 时间：2012-11-02T11:23:20.187
> 
> 标签：wpf, dependency-properties

我有以下 XAML，它使用类 CurrencyImg 属性在运行时查找静态资源，因为树视图中有很多这样的资源，我不想加载相同的图像 1000 次，我保留它一个资源字典，所以它只加载一次。

```
<Image Name="imgCurrency"  Grid.Column="5" Margin="0,0,0,0"  Source="{w:ImageStaticResource {Binding CurrencyImg}}" Height="22" VerticalAlignment="Top"/> 
```

使用示例资源字典条目作为

```
<ImageSource x:Key="..\Resources\Images\USD.ico">../Resources/Images/USD.ico</ImageSource> 
```

楼盘如下

```
public string CurrencyImg
{
    get
    {
        if (DisplayUSDRate)
        {
            return AppString.General.ImagePath + AppString.CurrencyId.USD + ".ico";
        }
        else
        {
            return AppString.General.ImagePath + curr + ".ico";
        }
    }
} 
```

以及完成工作的财产行动

```
public override bool DisplayUSDRate
{
    get { return _customer.DisplayUSDRate; }
    set
    {
        _customer.DisplayUSDRate = value;
        OnPropertyChanged("CurrencyImg");
    }
} 
```

现在，当它运行时， OnPropertyChanged("CurrencyImg") 什么都不做，原因很清楚。在 XAML 中，我没有直接绑定到 CurrencyImg 属性，而是将其用作我的 StaticResourceExtension 类的参数，因此当我调用 OnPropertyChanged 时，它认为没有要更新的绑定属性，因此 XAML 图像不会更新. 我可以理解这一点，但显然这对我没有帮助，因为我需要发生的事情如下。

1) 让类确定为该行显示哪个货币图像 2) 让图像来自资源字典，这样它们就不会被多次加载或性能受到严重影响 3) 对 DisplayUSDRate 属性的更改为通过将标志更新为适当的图像来反映。这是我无法弄清楚如何处理我的 StaticResourceExtension 的一点（代码如下）

```
using System;
using System.Windows;
using System.Windows.Data;
using System.Windows.Markup;

namespace Citi.Rbcs.UI.Windows
{
    public class ImageStaticResource : StaticResourceExtension
    {
        public Binding Binding { get; set; }
        private static readonly DependencyProperty DummyProperty;

        public ImageStaticResource()
        {
        }

        public ImageStaticResource(Binding binding)
        {
            Binding = binding;
        }

        static ImageStaticResource()
        {
            DummyProperty = DependencyProperty.RegisterAttached(
                "Dummy", 
                typeof (Object), 
                typeof (DependencyObject),
                new UIPropertyMetadata(null));
        }

        public override object ProvideValue(IServiceProvider serviceProvider)
        {
            var target = (IProvideValueTarget)serviceProvider.GetService(typeof(IProvideValueTarget)); 
            var targetObject = (FrameworkElement)target.TargetObject; 

            Binding.Source = targetObject.DataContext; 
            var DummyDO = new DependencyObject(); 
            BindingOperations.SetBinding(DummyDO, DummyProperty, Binding); 

            ResourceKey = DummyDO.GetValue(DummyProperty);

            var resourceDictionary = new ResourceDictionary
                                         {
                                             Source = new Uri("pack://application:,,,/Windows/Images.xaml")
                                         };

            var key = (string) ResourceKey;            
            if (!resourceDictionary.Contains(key)) ResourceKey = "Default";

            return base.ProvideValue(serviceProvider);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:54:06.840

您可以编写一个非常简单的[绑定转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)，将图像 URI 字符串转换为缓存的 ImageSource 对象：

```
public class StringToImageConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var imageUrl = value as string;
        var image = MemoryCache.Default.Get(imageUrl) as ImageSource;

        if (image == null)
        {
            image = new BitmapImage(new Uri(imageUrl));
            MemoryCache.Default.Set(imageUrl, image, new CacheItemPolicy());
        }

        return image;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# wpf - 如何相对于其所有者设置 WPF 窗口的启动位置？

> ID：13194244
> 
> 赞同：1
> 
> 时间：2012-11-02T11:23:18.087
> 
> 标签：wpf, window

我一直在寻找一种在特定于其所有者的位置生成 WPF 窗口的方法。我希望窗口在所有者的左上角产生。可能吗？如果是这样，那么如何实现呢？

只是为了澄清这个场景，我正在 WPF 中开发一个使用 c++ dll 执行的工具（使用 ShellExecuteA）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:35:04.550

您可以通过代码设置位置来尝试此操作。

```
myWindow.Left = myWindow.Owner.Left;
myWindow.Top = myWindow.Owner.Top; 
```

# objective-c - 在 NSMutableDictionaries 中的 NSMutableArrays 中嵌套 NSMutableDictionaries

> ID：13194247
> 
> 赞同：0
> 
> 时间：2012-11-02T11:23:40.097
> 
> 标签：objective-c, xml, nsmutablearray, nsmutabledictionary

所以我有一些结构如下的 XML：

```
<wdata>
    <wid>abc123</wid>
    <wname>Main Name</wname>
    <wauthor>Author</wauthor>
    <plist>
        <pdata>
            <pid>def456_0</pid>
            <pname>Sub Name</pname>
            <ilist>
                <idata>
                    <iid>ghi789_0</iid>
                    <iname>iName</iname>
                    <ivalue>32</ivalue>
                </idata>
                <idata>
                    <iid>ghi789_1</iid>
                    <iname>iName</iname>
                    <ivalue>23</ivalue>
                </idata>
            </ilist>
        </pdata>
        <pdata>
            <pid>def456_1</pid>
            <pname>Sub Name</pname>
            <ilist>
                <idata>
                    <iid>ghi789_2</iid>
                    <iname>iName</iname>
                    <ivalue>24</ivalue>
                </idata>
                <idata>
                    <iid>ghi789_3</iid>
                    <iname>iName</iname>
                    <ivalue>42</ivalue>
                </idata>
            </ilist>
        </pdata>
    </plist>
</wdata> 
```

所以 the`<plist>`可以包含任意数量的`<pdata>`，并且`<ilist>`in each`<pdata>`可以包含任意数量的`<idata>`。

我想将这些数据存储在 Objective C 中。我猜最好的方法是`<wdata>`成为一个 NSMutableDictionary 对象，`<plist>`成为一个 NSMutableArray，其中包含每个 NSMutableDictionary 对象的数组`<pdata>`，然后每个`<ilist>`NSMutableArrays 包含每个 NSMutableDictionary 对象的数组`<idata>`。（！？）

我的问题是我正在努力访问字典中的数组，并且我正在努力将字典添加到字典中的数组中。

例如，我使用以下代码将 NSMutableDictionary 添加到`<plist>`：

```
[[wdata objectForKey:@"plist"] addObject:pDictCopy]; 
```

但是我在编译时遇到“无法识别的选择器”错误。

谁能帮我访问嵌套字典和数组并将数据添加到我的嵌套字典和数组中？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:35:06.633

在这里执行这一行

```
[[wdata objectForKey:@"plist"] addObject:pDictCopy]; 
```

你`[wdata objectForKey:@"plist"]`必须返回一个`NSMutableArray`，你可以通过交叉验证`NSLog`，并检查它是否包含一个`NSMutableArray`？。

最好的方法是首先创建所有对象，即为字典设置对象，将字典添加到数组中，然后将这些数组设置为字典，然后再..

# c# - FileInfo 的属性是否保存在内存中？

> ID：13194252
> 
> 赞同：3
> 
> 时间：2012-11-02T11:23:48.037
> 
> 标签：c#, .net

当执行类似的操作时`... = myFileInfo.FullName`- 它是访问驱动器还是通过创建 myFileInfo 将其加载到内存中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T11:27:36.677

是的，它们保存在内存中 - 这是您创建[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)类并***首次*访问**属性时文件的快照。您可以调用[Refresh](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.refresh.aspx)方法以确保属性是最新的。

您还可以使用[File](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)类的静态成员在该时间点读取文件信息，但是，这会导致每次安全检查的开销。

我的证据来自使用[ILSpy](http://ilspy.net/)；我们可以看到，如果我们访问像 Length 这样的属性：

```
 public long Length
    {
        [SecuritySafeCritical]
        get
        {
            if (this._dataInitialised == -1)
            {
                base.Refresh();
            }
            if (this._dataInitialised != 0)
            {
                __Error.WinIOError(this._dataInitialised, base.DisplayPath);
            }
            if ((this._data.fileAttributes & 16) != 0)
            {
                __Error.WinIOError(2, base.DisplayPath);
            }
            return (long)this._data.fileSizeHigh << 32 | ((long)this._data.fileSizeLow & (long)((ulong)-1));
        }
    } 
```

然后，如果内部数据尚未初始化，则调用 Refresh：

```
public void Refresh()
{
    this._dataInitialised = File.FillAttributeInfo(this.FullPath, ref this._data, false, false);
} 
```

然后填充数据以进行后续检查。因此**，除非**您再次调用 Refresh，否则您将从第一次访问属性的时间点获取数据。

从 FileInfo MSDN 文章中推断出缓存此数据的原因：

> 如果您打算多次重用一个对象，请考虑使用 FileInfo 的实例方法而不是 File 类的相应静态方法，因为安全检查并不总是必要的。

它显然会缓存这些数据以避免每次安全检查的费用，让用户调用 Refresh 并决定何时支付此费用。

# configuration - 将日志记录目标侦听器添加到企业库配置工具

> ID：13194260
> 
> 赞同：0
> 
> 时间：2012-11-02T11:24:23.563
> 
> 标签：configuration, enterprise-library, enterprise-library-5

我在我的应用程序中使用来自 Enterprise Library 5.0 的日志记录应用程序块。我的架构师想要自定义行为，因此我编写了自己的跟踪侦听器，它记录到数据库，在途中执行其他自定义代码。这一切都有效。

现在，当我在 Enterprise Library 项目中与其他侦听器一起创建此跟踪侦听器及其数据类时，当我尝试将日志记录目标侦听器添加为侦听器类型时，配置工具会拾取它。问题是我的架构师不希望我更改企业库源代码，因此他想在我们自己的 DLL 中实现侦听器，然后从企业库配置中引用它们。这也有效。

我唯一的问题是，当我这样做时，配置工具不会将我的侦听器作为我可以添加的类型。我可以手动编辑配置文件，它以这种方式工作，但必须能够通过配置工具执行此操作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:42:06.653

让配置工具找到您的自定义跟踪侦听器（我假设使用完整的设计时集成）的最简单方法是将您的程序集放在与配置工具可执行文件相同的目录中。

# r - 长格式函数

> ID：13194263
> 
> 赞同：0
> 
> 时间：2012-11-02T11:24:29.627
> 
> 标签：r, dataframe, aggregate

> **可能重复：**
> [创建按 id 聚合列的变量的更快方法](https://stackoverflow.com/questions/8225621/faster-way-to-create-variable-that-aggregates-a-column-by-id)

我在一个项目上遇到了麻烦。我创建了一个长格式的数据框（称为 dat）（我复制了下面的前 3 行），我想计算例如 2000 年至 2011 年美国所有银行的税前收入的平均值。我将如何去做？我在 R 方面几乎没有任何经验。如果答案太明显，我很抱歉，但我找不到任何东西，而且我已经在这个项目上花了很多时间。先感谢您！

```
KeyItem     Bank    Country Year    Value  
1   Pretax Income   WELLS_FARGO_&_COMPANY   UNITED STATES   2011    2.365600e+10                            
2   Total Assets    WELLS_FARGO_&_COMPANY   UNITED STATES   2011    1.313867e+12                            
3   Total Liabilities   WELLS_FARGO_&_COMPANY   UNITED STATES 2011  1.172180e+12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:15:06.857

以下内容应该可以帮助您入门。您基本上需要做两件事：子集和聚合。我将演示一个基本 R 解决方案和一个`data.table`解决方案。

首先，一些样本数据。

```
set.seed(1) # So you can reproduce my results
dat <- data.frame(KeyItem = rep(c("Pretax", "TotalAssets", "TotalLiabilities"), 
                                times = 30),
                  Bank = rep(c("WellsFargo", "BankOfAmerica", "ICICI"), 
                             each = 30),
                  Country = rep(c("UnitedStates", "India"), times = c(60, 30)),
                  Year = rep(c(2000:2009), each = 3, times = 3),
                  Value = runif(90, min=300, max=600)) 
```

让我们按“国家”和“年份”汇总“税前”值的平均值，但仅限于 2001 年至 2005 年。

```
aggregate(Value ~ Country + Year, 
          dat[dat$KeyItem == "Pretax" & dat$Year >= 2001 & dat$Year <=2005, ], 
          mean)
#         Country Year    Value
# 1         India 2001 399.7184
# 2  UnitedStates 2001 464.1638
# 3         India 2002 443.5636
# 4  UnitedStates 2002 560.8373
# 5         India 2003 562.5964
# 6  UnitedStates 2003 370.9591
# 7         India 2004 404.0050
# 8  UnitedStates 2004 520.4933
# 9         India 2005 567.6595
# 10 UnitedStates 2005 493.0583 
```

这是同样的事情`data.table`

```
library(data.table)
DT <- data.table(dat, key = "Country,Bank,Year")
subset(DT, KeyItem == "Pretax")[Year %between% c(2001, 2005), 
    mean(Value), by = list(Country, Year)]
#          Country Year       V1
#  1:        India 2001 399.7184
#  2:        India 2002 443.5636
#  3:        India 2003 562.5964
#  4:        India 2004 404.0050
#  5:        India 2005 567.6595
#  6: UnitedStates 2001 464.1638
#  7: UnitedStates 2002 560.8373
#  8: UnitedStates 2003 370.9591
#  9: UnitedStates 2004 520.4933
# 10: UnitedStates 2005 493.0583 
```

# java - 没有组件扫描，计划的注释不起作用

> ID：13194264
> 
> 赞同：1
> 
> 时间：2012-11-02T11:24:29.237
> 
> 标签：java, spring, scheduled-tasks

我正在使用 Spring 的任务执行器定期安排一个方法。

```
public class ABC{
    @Scheduled(fixedDelay=100000)
    public void test(){
    }
} 
```

它不适用于 ABC 类的简单 bean 声明。

```
<bean id="abc" class="com.test.ABC" /> 
```

如果我进行组件扫描，那么它可以正常工作。

```
<context:component-scan base-package="com.test"/>
<context:annotation-config/> 
```

可能是什么原因？

我认为，两者都应该可以正常工作，因为组件扫描只是定义单个 bean 的一种替代方法。我这边可能有问题。

如果我的想法不正确，请告诉我。

谢谢，

# linux - 我的 Centos 服务器上的日期和时间错误

> ID：13194267
> 
> 赞同：-2
> 
> 时间：2012-11-02T11:24:37.790
> 
> 标签：linux, centos

我的服务器上有 Centos6（文本模式），当我停止它时，我选择了我的位置，但现在的日期是一天前。我再次更改它，但是当我关闭或重新启动服务器时，它再次获得一天前的日期。如何配置日期时间和位置的正确方法。我正在使用文本模式，然后我需要命令或文件来修改正确的值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:33:07.130

尝试配置 NTP 服务器。[RHEL 站点](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sect-Date_and_Time_Configuration-Command_Line_Configuration-Network_Time_Protocol.html)似乎有一个很好的解决方案。

# sqlite - Yii 使用 SQLite 创建具有外键的表

> ID：13194268
> 
> 赞同：1
> 
> 时间：2012-11-02T11:24:38.973
> 
> 标签：sqlite, activerecord, yii

我正在尝试使用这样的外键创建表（使用迁移）

```
public function safeUp()
{
    $this->createTable('tbl_category', array(
        'id'=>'pk',
        'title'=>'string NOT NULL',
        'url'=>'string NOT NULL UNIQUE'
    ));
    $this->addForeignKey('FK_category', 'tbl_product', 'category_id', 'tbl_category', 'id', 'CASCADE', 'NO ACTION');    
} 
```

它在 MySQL 中完美运行，但现在我想使用 SQLite，这段代码给出了一个错误，在 SQLite 中我无法向现有表添加外键，所以我查看了`createTable`方法的定义：

```
public integer createTable(string $table, array $columns, string $options=NULL) 
```

并尝试使用`$options`param 在此处添加我的外键，但它会生成以下内容：

```
CREATE TABLE 'tbl_category' (
    "id" integer PRIMARY KEY AUTOINCREMENT NOT NULL,
    "title" varchar(255) NOT NULL,
    "url" varchar(255) NOT NULL UNIQUE
)
CONSTRAINT FK_category
FOREIGN KEY tbl_product(category_id)
REFERENCES tbl_category(id)
ON DELETE CASCADE ON UPDATE NO ACTION 
```

显然，“CONSTRAINT ...”代码应该在这些括号内，但事实并非如此。那么如何创建这个外键呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T14:33:19.890

## 解释

函数createTable在[源代码](http://www.yiiframework.com/doc/api/1.1/CDbSchema#createTable-detail)中定义为：

```
public function createTable($table, $columns, $options=null)
{
    $cols=array();
    foreach($columns as $name=>$type)
    {
        if(is_string($name))
            $cols[]="\t".$this->quoteColumnName($name).' '.$this->getColumnType($type);
        else
            $cols[]="\t".$type;
    }
    $sql="CREATE TABLE ".$this->quoteTableName($table)." (\n".implode(",\n",$cols)."\n)";
    return $options===null ? $sql : $sql.' '.$options;
} 
```

这告诉我所有选项都适用于通常在 Create 语句之后（但在最后一个分号之前）的内容，例如MySQL 中的`ENGINE`或`CHARSET`。SQLite 语法只是不同，并且不允许这样的选项。

addForeignKey函数[不起作用](http://www.yiiframework.com/doc/api/1.1/CSqliteSchema#addForeignKey-detail)，它只是没有编码：

```
public function addForeignKey($name, $table, $columns, $refTable, $refColumns, $delete=null, $update=null)
{
    throw new CDbException(Yii::t('yii', 'Adding a foreign key constraint to an existing table is not supported by SQLite.'));
} 
```

SQLite 不支持更改表以添加外键子句。

## 解决方案

长话短说，您应该将外键子句放在列定义中（在您的**产品**表中，而不是您的类别表中）：

```
$this->createTable('tbl_product', array(
    'id'=>'pk',
    'name'=>'string NOT NULL',
    'category_id'=>'integer NOT NULL REFERENCES tbl_category(id)'
)); 
```

## 附录

外键的想法是子表应该声明它，而不是父表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:42:22.053

用 $this->execute 做了，我在其中放置了纯 SQL 语句。

# asp.net - 我无法在 ajaxtoolkit htmleditorextender 上设置 left 和 top 样式属性

> ID：13194269
> 
> 赞同：1
> 
> 时间：2012-11-02T11:24:45.180
> 
> 标签：asp.net, ajax

我无法在 ajaxtoolkit htmleditorextender 上设置 left 和 top 样式属性。

它指的是这样的 TargetControlID：

```
 <asp:TextBox ID="TextBox2"  style="position:relative;left:100px;top:80px" runat="server" Height="228px" Width="483px"></asp:TextBox> 
```

但是一旦添加了扩展器

文本框失去了它的位置

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:54:07.407

将您的文本框放入具有定义类属性的 div 容器中，并添加 css 类定义，如下所示：

```
 .containerClass .ajax__html_editor_extender_container
 {
      position: relative;
      left: 100px;
      top: 80px;
 } 
```

# facebook - Facebook 读取操作显示在活动日志中，但未显示在时间线上

> ID：13194271
> 
> 赞同：11
> 
> 时间：2012-11-02T11:24:49.580
> 
> 标签：facebook, facebook-timeline

我正在为我的新闻阅读器应用程序使用内置的阅读操作。但是这个动作没有出现在用户的时间线中，而是出现在活动日志中。我的操作得到了 facebook 的批准并使用了 publish_action 权限。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T09:29:08.520

您必须在代码中添加 fb:explicitly_shared=true 并在您的操作设置页面中添加相同的权限[您必须选择一个复选框] 请参阅此文档 [https://developers.facebook.com/docs/opengraph /using-actions/v2.0#actionlinks](https://developers.facebook.com/docs/opengraph/using-actions/v2.0#actionlinks) 同样可以在发布操作部分下找到

# syntax - 关键字 var 后面的下划线和接口名称是什么意思？

> ID：13194272
> 
> 赞同：97
> 
> 时间：2012-11-02T11:25:01.067
> 
> 标签：syntax, interface, go, underscores

来自[http://golang.org/src/pkg/database/sql/driver/types.go](http://golang.org/src/pkg/database/sql/driver/types.go)：

```
type ValueConverter interface {
    // ConvertValue converts a value to a driver Value.
    ConvertValue(v interface{}) (Value, error)
}

var Bool boolType

type boolType struct{}

var _ ValueConverter = boolType{} // line 58

func (boolType) String() string { return "Bool" }

func (boolType) ConvertValue(src interface{}) (Value, error) {....} 
```

我知道 ValueConverter 是一个接口名称。第 58 行似乎声明了 boolType 实现了接口 ValueConverter，但这有必要吗？我删除了第 58 行，代码运行良好。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-11-02T11:46:52.990

它提供`boolType`满足`ValueConverter`接口的静态（编译时）检查。用作变量的`_`名称告诉编译器有效地丢弃 RHS 值，但要对其进行类型检查并评估它是否有任何副作用，但匿名变量本身不占用任何进程空间。

它在开发时是一种方便的构造，并且接口的方法集和/或类型实现的方法经常更改。该构造用于防止忘记匹配类型和接口的方法集，目的是使它们兼容。它有效地防止`go install`出现这种遗漏的损坏（中间）版本。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-02T11:47:44.313

似乎您正在创建一个类型的虚拟值，为其`ValueConverter`分配一个新`boolType`对象，然后将其丢弃（这是 go 中下划线的含义，就像`for _, elt := range myRange { ...}`您对枚举的索引不感兴趣一样）。

我的猜测是，它只是对应于一个静态检查，以确保结构`boolType`确实实现了`ValueConverter`接口。这样，当您更改 的实现时`boolType`，如果您破坏了接口的实现，编译器会提前抱怨，`ValueConverter`因为它将无法将您的 new`boolType`转换为该接口。

# c# - 将接口集合添加到接口

> ID：13194274
> 
> 赞同：0
> 
> 时间：2012-11-02T11:25:11.907
> 
> 标签：c#, interface, icollection

我正在尝试围绕界面进行思考。我一直在尝试这样的事情：

```
public interface IFoo
{
    ICollection<IBar> Bars { get; set; }
    //some other properties
}
public interface IBar
{
    //some properties
}
//assume Bar is implemented and extends IBar. Some instaces of Bar are created
Bar[] MyBars = {bar1, bar2};
Foo MyFoo = new Foo();
MyFoo.Bars=MyBars.ToList(); //This causes an error saying Collection<Bar> cannot be
//assigned to ICollection<IBar>. 
```

我完全不知道如何正确地做到这一点。填充接口集合的正确方法是什么？

编辑：我实现 Foo 的方式可能是问题的一部分。

```
public class Foo : IFoo
{
    public ICollection<IBar> Bars { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:29:06.147

根据您的方式，您可以这样做：

```
ICollection<Bar> MyBars = new Bar[] {bar1, bar2};
MyFoo.Bars = MyBars; 
```

您也可以这样做，以编程方式可能更适合您：

```
List<Bar> lstBar = new List<Bar>();
lstBar.Add(bar1);
lstBar.Add(bar2);
MyFoo.Bars = lstBar; 
```

整个来源：

```
public interface IFoo
{
    ICollection<IBar> Bars { get; set; }
}
public interface IBar
{

}
public class Foo : IFoo
{
    public ICollection<IBar> Bars { get; set; }
}
public class Bar : IBar
{
}

class Program
{
    static void Main(string[] args)
    {
        IFoo myFoo = new Foo();
        List<IBar> lstBar = new List<IBar>();
        lstBar.Add(new Bar());
        myFoo.Bars = lstBar;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:41:18.000

问题是`Foo`应该是的类：

```
public class Foo : IFoo
{
    public ICollection<Bar> Bars { get; set; }
} 
```

* * *

或者，如果您想使用`ICollection<IBar>`：

```
IBar[] MyBars = { bar1, bar2 };
Foo MyFoo = new Foo( );
MyFoo.Bars = MyBars.ToList( ); 
```

或者更优雅的解决方案：

```
Bar[] MyBars = { bar1, bar2 };
Foo MyFoo = new Foo( );
MyFoo.Bars = MyBars.ToList<IBar>( ); //Cast from Bar to IBar 
```

事实上，问题的发生是因为您无法转换`ICollection<Bar>`为`ICollection<IBar>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T11:47:18.237

您如何实现 Bars 属性在这里很重要。您不能将具体类型分配给接口类型。当您尝试进行 ToList 转换时，您正在将其转换为具体的列表类型并尝试将其分配给 ICollection 接口类型，因此会产生错误。

以下应该可以正常工作。

```
public class Foo:IFoo
{
    public ICollection<IBar> Bars { get; set; }
}

Bar bar1 = new Bar();
Bar bar2 = new Bar();
Bar[] MyBars = { bar1, bar2 };
Foo MyFoo = new Foo();
MyFoo.Bars = MyBars; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T11:55:30.287

它不会以这种方式工作。看，`ICollection<T>`在 上不是协变的`T`，因此即使是`ICollection<Bar>`，也不是。`ICollection<IBar>``Bar``IBar`

为什么会这样？想象一下，有一些`Quux`实施`IBar`。如果您可以分配`ICollection<Bar>`到`ICollection<IBar>`，那么有人可以使用 将 a`Quux`插入到集合中`ICollection<IBar>.Add`，因为`Quux`也是一个`IBar`！但是集合是`Bar`s 的集合，所以会破坏类型安全。

你应该试试

```
IBar[] MyBars = {bar1, bar2}; 
```

这样您`MyBars`就可以插入其他`IBar`s，而不仅仅是`Bar`s。

# gwt-ext - 尝试使用 servlet Java 实现文件下载时

> ID：13194277
> 
> 赞同：1
> 
> 时间：2012-11-02T11:25:21.183
> 
> 标签：gwt-ext

在 GWT-EXT 中，我使用 servlet 使用文件下载功能，如下所示。

我将 servlet 映射定义如下。

```
<servlet id="FileDownloadServlet">
        <servlet-name>FileDownloadServlet</servlet-name>
        <display-name>File Download Servlet</display-name>
        <servlet-class>
            com.xxx.XTFFileDownloadServlet
        </servlet-class>        
</servlet>
<servlet-mapping id="FileDownloadServletMapping">
        <servlet-name>FileDownloadServlet</servlet-name>
        <url-pattern>/filedownload</url-pattern>
</servlet-mapping> 
```

我将servlet定义如下。文件路径和文件名是从数据库中接收的。我正在将 PDF 文件/二进制数据写入 servletoutputstream。

```
 String filePath = "FILEPATHFROMDB";
    String fileName = "FILENAMEFROMDB"
            File file = new File(filePath, fileName);

            response.setContentType("application/pdf");
            response.setHeader("Content-disposition", "attachment; filename=\"" + "GUIDE.pdf" + "\"");

            out = response.getOutputStream();
            fileInputStream = new FileInputStream(file);
            byte[] buff = new byte[(int) file.length()];
            fileInputStream.read(buff);

            out.write(buff); 
```

在客户端，我使用以下代码来触发 filedownload 事件。

```
 Window.open(GWT.getHostPageBaseURL()+"filedownload", "_self", ""); 
```

现在我在 UI 上遇到以下异常。

```
 The webpage cannot be found 
     HTTP 404 
```

在 GWT 控制台中它说。

```
 [TRACE] The development shell servlet received a request for 'filedownload' in module 'com.abc.def.ghi.hhhhh.Module' 
[WARN] Resource not found: filedownload 
```

请帮忙。

# android - 即使没有错误，菜单项也不显示对话框

> ID：13194279
> 
> 赞同：2
> 
> 时间：2012-11-02T11:25:26.087
> 
> 标签：android

菜单项未显示下面的对话框是我的代码，当用户单击菜单项时，它应该将他带到添加该代码的登录页面。

```
public boolean onOptionsItemSelected(MenuItem item, int id) {
    switch (item.getItemId()) {
        case R.id.Login:
             startActivity(new Intent(this, Login.class));
             return true;
        case R.id.About:
         startActivity(new Intent(this, About.class));
            return true;
        case R.id.Post_Ads:
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Are you sure you want to exit?")
                   .setCancelable(false);
            AlertDialog alert = builder.create();
                    alert.show();
                    startActivity(new Intent(this, Login.class));
             return true;

          }
    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:40:32.367

试试这个，它应该工作：

```
public boolean onOptionsItemSelected(MenuItem item) {
            // TODO Auto-generated method stub
            switch (item.getItemId()) {
            case R.id.Login:
                Toast.makeText(getApplicationContext(), "Fired 1", Toast.LENGTH_SHORT).show();
                 startActivity(new Intent(this, Login.class));
                 return true;

            case R.id.About:
    Toast.makeText(getApplicationContext(), "Fired 2", Toast.LENGTH_SHORT).show();
             startActivity(new Intent(this, About.class));

                return true;
                        case R.id.Post_Ads:
                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setMessage("Are you sure you want to exit?")
                       .setCancelable(false);
                AlertDialog alert = builder.create();
                        alert.show();
                        startActivity(new Intent(this, Login.class));

                 return true;

              }
        return super.onOptionsItemSelected(item);

        } 
```

to`public boolean onOptionsItemSelected(MenuItem item, int id)`中没有调用方法`Activity` `class``handle option menu's.`

处理此类事件的方法是 `onOptionsItemSelected(MenuItem)`.

要显示菜单项，您也必须使用以下方法，检查您是否也实现了此方法，

```
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.your_menu_file, menu);
    return true;
} 
```

和一个小的修正，

您已经实现了以下 Alertdialog 方法，

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Are you sure you want to exit?")
                   .setCancelable(false);
            AlertDialog alert = builder.create();
                    alert.show();
                    startActivity(new Intent(this, Login.class)); 
```

您在这里没有提供任何确定或取消按钮，而且您还设置了 setCancellable(false)。所以用户不能在这里选择任何选项。

所以我建议你在这里给确定和取消按钮，并在 onClick() 方法中做你想做的事情。像下面的例子：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Are you sure you want to exit?")
                   .setCancelable(false);
            AlertDialog alert = builder.create();
            alert.setButton("Ok", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    // Do call some activity or close the app. Do what you wish to;

                }
            });

alert.setButton2("Cancel", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    // Do stay in the current activity or something else. Do what you wish to;

                }
            });
                    alert.show();

             return true; 
```

希望，它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:49:01.940

试试这个

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Navigate to login").setCancelable(false).setPositiveButton("OK", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                            //do things
                           startActivity(new Intent(this, Login.class));
                       }
                   });

            AlertDialog alert = builder.create();
            alert.show(); 
```

# vba - 添加金字塔 Smartart

> ID：13194280
> 
> 赞同：0
> 
> 时间：2012-11-02T11:25:30.373
> 
> 标签：vba, vsto, powerpoint

有谁知道如何使用 vsto 在 powerpoint 中添加金字塔智能艺术。我一直在寻找它，但没有任何运气。Vba 中的任何代码也会有所帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:41:38.803

有趣的问题。为了添加给定类型的 smartart，您需要知道要添加的 smartart 类型的索引。这演示了如何添加智能艺术，并为您提供包含每种智能艺术类型之一的演示文稿。从空白演示文稿开始，然后删除所有幻灯片，包括第一张。然后运行这个：

```
Sub AddSmartArtDemo()

Dim x As Long
Dim oSl As Slide
With ActivePresentation
    For x = 1 To Application.SmartArtLayouts.Count
        Set oSl = .Slides.AddSlide(x, .Designs(1).SlideMaster.CustomLayouts(6))
        oSl.Shapes.AddSmartArt Application.SmartArtLayouts(x)
    Next
End With

End Sub 
```

完成后，幻灯片 1 将包含 SmartArt 索引 1 的示例，依此类推。

# jquery - 使用 jQuery 从 JSON 中检索值

> ID：13194287
> 
> 赞同：0
> 
> 时间：2012-11-02T11:25:52.170
> 
> 标签：jquery

我一直在使用这个 JSON

```
{ 
    "firstName": "John",
    "lastName": "Doe",
    "age": 25,
    "info": { 
        "email": "abc@abc.com",
        "url": "http://"
    }
} 
```

有了这个 jQuery 函数

```
<script>
    $(document).ready(function() {
        $("button").click(function() {
            $.getJSON("demo_ajax_json.js", function(result) {
                $.each(result, function(i, field) {
                    $("div").append(field + " ");
                });
            });
        });
    });
</script> 
```

我想从上面给定的 JSON中提取`email`和提取值。`url`任何人都可以在这方面帮助我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:32:05.093

无需在每次通话中都这样做。

```
<script>
    $(document).ready(function() {
        $("button").click(function() {
            $.getJSON("demo_ajax_json.js", function(result) {
                $("div").append(result.info.email + " " + result.info.url);
              );
            });
        });
    });
</script> 
```

请注意，通过选择“div”，您会将信息附加到页面上的所有 div 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:29:10.830

替换这个：

```
$.each(result, function(i, field) {
    $("div").append(field + " ");
}); 
```

有了这个：

```
$("div").append(result.field.info.email);
$("div").append(result.field.info.url); 
```

您不需要 each，因为您只返回一组数据并尝试直接访问它的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:58:46.147

试试下面的代码：

```
<script>
$(document).ready(function() {
    $("button").click(function() {
        $.getJSON("demo_ajax_json.js", function(data) {
            var Append = "";
              for (var i = 0; i < data.d.length; i++) {
              Append +=title="' + data.d[i].FriendName + '";
              }
            $("div").append(Append);
          );
        });
    });
}); 
```

# javascript - , IE8 和“对象不支持此属性或方法”

> ID：13194292
> 
> 赞同：-1
> 
> 时间：2012-11-02T11:26:09.560
> 
> 标签：javascript, html, internet-explorer, audio, internet-explorer-8

我有一些代码可以在页面上播放声音，它适用于所有浏览器，但 IE8 除外。

```
<audio id="myaudio" style="display:none;"></audio>
<script>
    myaudio=document.getElementByID('myaudio');
    myaudio.src='path/to/wav/mywav.wav';
</script> 
```

它适用于所有经过测试的浏览器和播放文件，一切正常。所有浏览器，除了 IE8。IE8 调试器在 `myaudio=document.getElementByID('myaudio');`.

无法弄清楚如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:30:23.370

HTML`<audio>`标记是 Internet Explorer 9 之前不支持的 HTML 5 功能。因此它在 8 版中不起作用。

[http://www.w3schools.com/tags/tag_audio.asp](http://www.w3schools.com/tags/tag_audio.asp)

# c# - 从字符串资源中动态获取字符串

> ID：13194293
> 
> 赞同：33
> 
> 时间：2012-11-02T11:26:08.903
> 
> 标签：c#, resources

我正在开发一个本地化的 C#.NET 应用程序，我们正在使用一个`strings.resx`文件来翻译应用程序中的硬编码字符串。我使用以下代码来提取它们：

```
using MyNamespace.Resources

...

string someString = strings.someString; 
```

但是，现在我希望能够在调用中定义字符串的名称，如下所示：

```
string someString = GetString("someString"); 
```

我一直在玩弄`ResourceManager`，但我找不到将它定向到我的`strings.resx`文件的方法。

我怎么做？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-02T11:39:59.293

一点点搜索就可以了。我`ResourceManager`在`strings`课堂上享有以下权利：

```
ResourceManager rm = strings.ResourceManager;
string someString = rm.GetString("someString"); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-02T11:30:41.140

[`ResourceManager.GetString`](http://msdn.microsoft.com/en-us/library/d17ax2xk.aspx)应该做。

从 MSDN 中剥离的示例：

```
ResourceManager rm = new ResourceManager("RootResourceName",
                                         typeof(SomeClass).Assembly);
string someString = rm.GetString("someString"); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-06-16T15:46:40.237

我在使用 ASP.NET Core MVC 时遇到了同样的问题，并设法使用

```
ResourceManager rm = new ResourceManager(typeof(YourResourceClass));
string someString = rm.GetString("someString"); 
```

与@Vlad 的解决方案非常相似，但除此之外我有一个`MissingManifestResourceException`

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-03-18T17:19:56.280

有更简单的方法可以做到这一点

```
 [NameOfyourResxfile].ResourceManager.GetString("String Name"); 
```

在你的情况下

```
strings.resx.ResourceManager.GetString("someString"); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-01-26T08:13:40.733

你可以这样写一个静态方法：

```
public static string GetResourceTitle<T>(string key)
{
  ResourceManager rm = new ResourceManager(typeof(T));
  string someString = rm.GetString(key);
  return someString;
} 
```

并在任何地方调用：

```
var title=  GetResourceTitle<*YouResourceClass*>(key); 
```

当您想要一个通用函数来获取任何资源文件的字符串时，它很有用。

# python - AttributeError：“TestHandler”对象在 django 活塞中没有属性“模型”

> ID：13194297
> 
> 赞同：0
> 
> 时间：2012-11-02T11:26:21.587
> 
> 标签：python, django, django-piston

这是一个 test.py 文件，它尝试将数据发送到 api 端点：

```
import os
import requests

import uuid

def get_uid():
    return str(uuid.uuid4())
oauth_consumer_key = 'abcd'
oauth_signature = 'efgh'

oauth_signature_method = 'PLAINTEXT'
oauth_timestamp ='132798314211'
oauth_nonce = get_uid() + "aa"

oauth_token_secret = ""
x_auth_mode = 'client_auth'
x_auth_username = ''
x_auth_password = ''
userid = ''

instagram_id = "asdas"
instagram_token = "asdas"

params = {

            'oauth_consumer_key':oauth_consumer_key,
            'oauth_signature':oauth_signature,
            'oauth_signature_method':oauth_signature_method,
            'oauth_timestamp': oauth_timestamp,
            'oauth_nonce': get_uid(),
            'instagram_id' : instagram_id,
            'instagram_token':instagram_token,            
            }

url = 'http://localhost:8000/instagram/signin/'
data = {'instagram_id':instagram_id,'instagram_token':instagram_token}

r = requests.post(url,params)

print r.content 
```

这是我的测试处理程序：

```
class TestHandler(AnonymousBaseHandler):

    def read(self,request,action=None):

        """Get request to get the instagram code
        """
        print action

        if action == "signin":
            return "hello121"
            #self.instagram_signin(request)

    def instagram_signin(self,request):
        """
            Check if the instagram user exists in the database
        """
        return "Yes!" 
```

是的，就这么基本，它返回一个错误：

```
 File "/usr/local/lib/python2.7/dist-packages/django_piston-0.3dev-py2.7.egg/piston/handler.py", line 105, in create
    except self.model.DoesNotExist:

AttributeError: 'TestHandler' object has no attribute 'model' 
```

该应用程序已在 settings.py 中注册。我已经多次完成了syncdb。重新启动服务器。重新启动系统，仍然无法解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:48:24.750

如[示例](https://bitbucket.org/jespern/django-piston/wiki/Documentation#anonymous-resources)所写：

```
class AnonymousBlogpostHandler(AnonymousBaseHandler):
    model = Blogpost
    fields = ('title', 'content') 
```

你错过了`model`。

# multithreading - 如何以干净的状态重新启动matlab本地调度程序？

> ID：13194300
> 
> 赞同：2
> 
> 时间：2012-11-02T11:26:26.750
> 
> 标签：multithreading, matlab, memory-leaks, parallel-processing, job-scheduling

我有 9 个并行作业，使用并行工具箱的 matlab 本地调度程序配置，将在预定时间触发。

我希望部署的应用程序连续运行，但问题是当作业完成时，虽然我销毁了工作端的作业并清除了客户端的作业对象，但它仍保留在客户端中。因此，连续运行数小时后，部署的应用程序将崩溃。

一种可能性是在一定时间后重新启动作业管理器，但使用本地调度程序配置文件仍然存在问题。例如，如果我尝试通过将“RestartWorker”属性设置为 true 来以干净状态启动工作人员，我将收到此错误：

> 名称“RestartWorker”不是“simpleparalleljob”类实例的可访问属性。

我不喜欢设置集群并购买像 MATLAB 分布式计算服务器 (MDCS) 这样的商业调度程序。

我想知道是否有人有解决方案？

先感谢您。

# opencv - 使用 OpenCV 在视频中进行人脸识别会出现未处理的异常

> ID：13194301
> 
> 赞同：7
> 
> 时间：2012-11-02T11:26:28.787
> 
> 标签：opencv, face-recognition, unhandled-exception

我正在尝试在 OpenCV 提供的视频示例中使用人脸识别。我所做的唯一修改是：我没有使用命令行参数来提供 CSV 和 Cascade 分类器路径，而是直接在代码中给出了它们。这是代码：

```
#include "stdafx.h"
#include "opencv2/core/core.hpp"
#include "opencv2/contrib/contrib.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/objdetect/objdetect.hpp"

#include <iostream>
#include <fstream>
#include <sstream>

using namespace cv;
using namespace std;

static void read_csv(const string& filename, vector<Mat>& images, vector<int>& labels, char separator = ';') {
    std::ifstream file(filename.c_str(), ifstream::in);
    if (!file) {
        string error_message = "No valid input file was given, please check the given filename.";
        CV_Error(CV_StsBadArg, error_message);
    }
    string line, path, classlabel;
    while (getline(file, line)) {
        stringstream liness(line);
        getline(liness, path, separator);
        getline(liness, classlabel);
        if(!path.empty() && !classlabel.empty()) {
            images.push_back(imread(path, 0));
            labels.push_back(atoi(classlabel.c_str()));
        }
    }
}

int main(int argc, const char *argv[]) {
// Check for valid command line arguments, print usage
// if no arguments were given.
if (argc != 4) {
    cout << "usage: " << argv[0] << " </path/to/haar_cascade> </path/to/csv.ext> </path/to/device id>" << endl;
    cout << "\t </path/to/haar_cascade> -- Path to the Haar Cascade for face detection." << endl;
    cout << "\t </path/to/csv.ext> -- Path to the CSV file with the face database." << endl;
    cout << "\t <device id> -- The webcam device id to grab frames from." << endl;
    //exit(1);
}
// Get the path to your CSV:
string fn_haar = "C:\\OpenCV-2.4.2\\opencv\\data\\haarcascades\\haarcascade_frontalface_default.xml";
string fn_csv = "C:\\Users\\gaspl\\Desktop\\train.txt";
int deviceId = 1;
// These vectors hold the images and corresponding labels:
vector<Mat> images;
vector<int> labels;
// Read in the data (fails if no valid input filename is given, but you'll get an error message):
try {
    read_csv(fn_csv, images, labels);
} catch (cv::Exception& e) {
    cerr << "Error opening file \"" << fn_csv << "\". Reason: " << e.msg << endl;
    // nothing more we can do
    exit(1);
}
// Get the height from the first image. We'll need this
// later in code to reshape the images to their original
// size AND we need to reshape incoming faces to this size:
int im_width = images[0].cols;
int im_height = images[0].rows;
// Create a FaceRecognizer and train it on the given images:
Ptr<FaceRecognizer> model = createFisherFaceRecognizer();
model->train(images, labels);
// That's it for learning the Face Recognition model. You now
// need to create the classifier for the task of Face Detection.
// We are going to use the haar cascade you have specified in the
// command line arguments:
//
CascadeClassifier haar_cascade;
haar_cascade.load(fn_haar);
// Get a handle to the Video device:
VideoCapture cap(deviceId);
// Check if we can use this device at all:
if(!cap.isOpened()) {
    cerr << "Capture Device ID " << deviceId << "cannot be opened." << endl;
    return -1;
}
// Holds the current frame from the Video device:
Mat frame;
for(;;) {
    cap >> frame;
    // Clone the current frame:
    Mat original = frame.clone();
    // Convert the current frame to grayscale:
    Mat gray;
    cvtColor(original, gray, CV_BGR2GRAY);
    // Find the faces in the frame:
    vector< Rect_<int> > faces;
    haar_cascade.detectMultiScale(gray, faces);
    // At this point you have the position of the faces in
    // faces. Now we'll get the faces, make a prediction and
    // annotate it in the video. Cool or what?
    for(int i = 0; i < faces.size(); i++) {
        // Process face by face:
        Rect face_i = faces[i];
        // Crop the face from the image. So simple with OpenCV C++:
        Mat face = gray(face_i);
        // Resizing the face is necessary for Eigenfaces and Fisherfaces. You can easily
        // verify this, by reading through the face recognition tutorial coming with OpenCV.
        // Resizing IS NOT NEEDED for Local Binary Patterns Histograms, so preparing the
        // input data really depends on the algorithm used.
        //
        // I strongly encourage you to play around with the algorithms. See which work best
        // in your scenario, LBPH should always be a contender for robust face recognition.
        //
        // Since I am showing the Fisherfaces algorithm here, I also show how to resize the
        // face you have just found:
        Mat face_resized;
        cv::resize(face, face_resized, Size(im_width, im_height), 1.0, 1.0, INTER_CUBIC);
        // Now perform the prediction, see how easy that is:
        int prediction = model->predict(face_resized);
        // And finally write all we've found out to the original image!
        // First of all draw a green rectangle around the detected face:
        rectangle(original, face_i, CV_RGB(0, 255,0), 1);
        // Create the text we will annotate the box with:
        string box_text = format("Prediction = %d", prediction);
        // Calculate the position for annotated text (make sure we don't
        // put illegal values in there):
        int pos_x = std::max(face_i.tl().x - 10, 0);
        int pos_y = std::max(face_i.tl().y - 10, 0);
        // And now put it into the image:
        putText(original, box_text, Point(pos_x, pos_y), FONT_HERSHEY_PLAIN, 1.0, CV_RGB(0,255,0), 2.0);
    }
    // Show the result:
    imshow("face_recognizer", original);
    // And display it:
    char key = (char) waitKey(20);
    // Exit this loop on escape:
    if(key == 27)
        break;
    }
    return 0;
} 
```

这是我的`train.txt`CSV 文件的样子：

```
C:\\Training\\extract0.jpg;0
C:\\Training\\extract1.jpg;0
C:\\Training\\extract2.jpg;0 
```

但是，当我尝试运行示例（构建良好）时，我收到了这些错误，它要求我`Break`：

```
First-chance exception at 0x000007FEFE04CAED in facrec.exe: Microsoft C++ exception: cv::Exception at memory location 0x000000000025C530.
Unhandled exception at at 0x000007FEFE04CAED in facrec.exe: Microsoft C++ exception: cv::Exception at memory location 0x000000000025C530. 
```

错误发生在我初始化 Fisher 识别器的位置：

```
Ptr<FaceRecognizer> model = createFisherFaceRecognizer();
model->train(images, labels); 
```

我正在使用带有 Visual Studio 2012 和 OpenCV 2.4.2 的 Windows 7 64 位（构建配置：x64-Release）

我已经尝试过人脸检测和人脸提取，它们在我的计算机上运行良好（[如果有人想查看代码](https://github.com/karanjthakkar)），所以我的 Visual Studio 项目设置（链接器或 C/C++）显然没有问题。

[这里有一个类似的问题，](http://answers.opencv.org/question/938/unhandled-exception-facerecognizer-vs2010-windows/)但它仍然没有解决任何问题。

我在做什么有什么问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T12:35:55.637

正如我们已经通过邮件得出的结论。发生这种情况是因为您的 CSV 文件中只给出了一个标签：

```
C:\培训\extract0.jpg;0
C:\培训\extract1.jpg;0
C:\培训\extract2.jpg;0

```

Fisherfaces 方法至少需要两个类来学习模型。这种情况应该已经被捕获，OpenCV 2.4.2 在我的系统上抛出了以下异常：

```
OpenCV 错误：错误参数（执行 LDA 至少需要两个类。原因：只给出了一个类！）在 lda，文件 /home/philipp/github/libfacerec/src/subspace.cpp，第 150 行
在抛出 'cv::Exception' 的实例后调用终止
  what(): /home/philipp/github/libfacerec/src/subspace.cpp:150: error: (-5) 执行 LDA 至少需要两个类。原因：只上了一堂课！在函数 lda

```

这使得训练数据中的错误非常清楚。我不知道，为什么在您的 Windows 7 安装中没有引发此异常，但我会设置一个测试系统以尽快重现并进行相应修复。

# sql - 基于附加查询的 SQL Server 插入

> ID：13194307
> 
> 赞同：1
> 
> 时间：2012-11-02T11:26:53.077
> 
> 标签：sql, sql-server

使用 SQL 服务器可以基于子查询进行批量插入，基本上我正在尝试这样做。

```
Insert into ProductExtra (ProductID,ExtraID) 
VALUES 
(Select ProductID From ProductSKU 
JOIN Product on ProductSKU.ProductID = Product.ID
Where ItemType = 'fire grate' ), 10739 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T11:28:20.710

是的 - 但是你不能使用`VALUES`关键字，而是使用这种语法（只是一个`SELECT`，在其选定列列表中定义的列和固定值）：

```
INSERT INTO ProductExtra (ProductID, ExtraID) 
   SELECT ProductID, 10739
   FROM ProductSKU 
   JOIN Product ON ProductSKU.ProductID = Product.ID
   WHERE ItemType = 'fire grate' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:28:52.107

使用`INSERT INTO...SELECT`声明。

```
INSERT INTO ProductExtra (ProductID, ExtraID) 
Select   ProductID, 10739 ExtraID
From     ProductSKU 
         INNER JOIN Product 
              ON ProductSKU.ProductID = Product.ID
Where ItemType = 'fire grate' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T11:29:17.320

你可以这样尝试

```
INSERT INTO ProductExtra (ProductID,ExtraID) 
Select ProductID,10739 From ProductSKU 
JOIN Product on ProductSKU.ProductID = Product.ID
Where ItemType = 'fire grate' 
```

# python - ImportError：无法导入名称“urandom”

> ID：13194308
> 
> 赞同：19
> 
> 时间：2012-11-02T11:26:54.217
> 
> 标签：python, django, virtualenv

`runserver`当我在运行虚拟环境（`workon django1.2`）时尝试任何项目时出现此错误

错误 ：

```
ImportError: cannot import name "urandom" 
```

在研究了这个问题后，我发现[了这个](http://www.virtualenv.org/en/latest/news.html)：

> 警告 Python 错误修复版本 2.6.8、2.7.3、3.1.5 和 3.2.3 包含一个更改，该更改将导致“导入随机”失败，并在具有早期版本的 Unix 主机上创建的任何 virtualenv 上出现“无法导入名称 urandom” Python 2.6/2.7/3.1/3.2 的版本，如果底层系统 Python 升级的话。这是因为 virtualenv 使用系统 Python 的标准库但包含它自己的 Python 解释器副本，因此升级到系统 Python 会导致 Python 解释器的版本与标准库的版本不匹配. 可以通过删除 $ENV/bin/python 并在与升级的 Python 相同的目标目录上重新运行 virtualenv 来修复它。

但跑步`ENV/bin/python`给了我：

```
bash: ENV/bin/python: No file or directory of this type 
```

我在哪里可以找到我的 virtualen 目录？

我对virtualenvs了解甚少，所以请多多包涵

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-02T12:08:41.933

您必须重新创建虚拟环境。

我的猜测是发生了以下情况：

1.  你创建了一个 virtualenv
2.  在稍后的某个时间点，系统的 Python 安装更新了 urandom 安全错误修复。
3.  您的 virtualenv（从以前的 Python 点版本创建）不再起作用（由于您在问题中提到的问题）

最简单的解决方法是删除您的虚拟环境并创建一个新环境：

```
$ rm -r VIRTUALENVDIR
$ virtualenv VIRTUALENVDIR
$ . VIRTUALENVDIR/bin/activate

# then pip install any required packages, if your project has a requirements.txt file,
# this is simply:
$ pip install -r requirements.txt

# otherwise, you will have to install each package
$ pip install packagename
$ pip install packagename==version 
```

# batch-file - 批处理脚本替换文件第 7 行中的文本？

> ID：13194311
> 
> 赞同：0
> 
> 时间：2012-11-02T11:27:06.773
> 
> 标签：batch-file

我有一个文件，其变量在第 7 行声明为 VERSION=6.0.196.0。我需要将此行编辑为 VERSION=6.0.200.0

第 15 行为 MANIFEST_BUILD =>196。这应该更改为 MANIFEST_BUILD =>200。这个怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:08:36.783

此答案中的所有解决方案仅使用 Windows XP 及更高版本的本机命令。

1) 这是迄今为止最快的本机批处理解决方案，但它有最多的限制

*   文件中的前 15 行都不能超过 1021 字节
*   所有前 15 行都必须以`<carriageReturn><lineFeed>`(Windows 样式) 结尾，而不是`<lineFeed>`(unix 样式)。
*   前 15 行都不能以控制字符结尾（当然，行终止符除外）

XP 和 Windows 7 有一个附加限制：文件的最后一行必须以`<lineFeed>`. `<linefeed>`如果由于 FINDSTR 中的错​​误导致最后一行没有结束，则脚本将无限期挂起。请参阅[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/q/8844868/1012053)了解更多信息。

```
@echo off
setlocal enableDelayedExpansion
set "file=test.txt"

REM redirect input from your file and output to a new file
<"%file%" >"%file%.new" (

  REM preserve lines 1-6
  for /l %%N in (1 1 6) do (
    set "ln="
    set /p "ln="
    echo(!ln!
  )

  REM replace the next line (7)
  set /p "ln="
  echo VERSION=6.0.196.0

  REM preserve lines 8-14
  for /l %%N in (8 1 14) do (
    set "ln="
    set /p "ln="
    echo(!ln!
  )

  REM replace the next line (15)
  set /p "ln="
  REM The > below must be escaped
  echo MANIFEST_BUILD =^>200

  REM preserve the remaining lines
  findstr "^"

)

REM replace your original file with the new file
>nul move /y "%file%.new" "%file%" 
```

2）下一个选项要慢得多，但限制要少得多。

*   任何行都不能超过 ~8191 字节
*   没有一行可以开始`:`

`<carriageReturn><lineFeed>`此外，无论原始文件使用哪种类型的终止符，输出中的所有行都将由 终止。

```
@echo off
setlocal disableDelayedExpansion
set "file=test.txt"

>"%file%.new" (
  for /f "tokens=1* delims=:" %%A in ('findstr /n "^" "%file%"') do (
    if %%A==7 (
        echo VERSION=6.0.196.0
    ) else if %%A==15 (
        echo MANIFEST_BUILD =^>200
    ) else echo(%%B
  )
)
move /y "%file%.new" "%file%" 
```

3) 此选项与选项 2 几乎相同，只是它允许行以 . 开头`:`。它甚至比选项 2) 还要慢。

```
@echo off
setlocal disableDelayedExpansion
set "file=test.txt"

>"%file%.new" (
  for /f "delims=" %%A in ('findstr /n "^" "%file%"') do (
    for /f "delims=:" %%B in ("%%A") do (
      if %%B==7 (
          echo VERSION=6.0.196.0
      ) else if %%B==15 (
          echo MANIFEST_BUILD =^>200
      ) else (
          set "ln=%%A"
          setlocal enableDelayedExpansion
          echo(!ln:*:=!
          endlocal
      )
    )
  )
)
move /y "%file%.new" "%file%" 
```

4）这最后一个选项是迄今为止最强大的。它使用我编写的混合 JScript/Batch 实用程序脚本，可用于处理文本文件。该脚本仍然只使用所有现代 Windows 平台（XP 及以上）本机的命令。

此选项比选项 1 慢，但它可以在合理的时间内处理非常大的文件。它比选项 2 和 3 快得多，这对于大文件来说太慢了。

此选项还保留原始文件中存在的行终止符。

我不知道此选项有任何限制。

这是依赖于我的 REPL.BAT 实用程序的脚本

```
@echo off
set "file=test.txt"
findstr /n "^" "%file%" | repl "^(7:.*)" "VERSION=6.0.196.0" m | repl "^(15:.*)" "MANIFEST_BUILD =>200" m | repl "^\d*:" "" m>"%file%.new"
>nul move /y "%file%.new" "%file%" 
```

这是上面脚本所需的 REPL.BAT 实用程序。REPL.BAT 应该放在你的 PATH 中的任何地方。完整的文档嵌入在脚本中。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            E - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

# json - 带有 JSON 的 jQuery/AJAX 路由

> ID：13194313
> 
> 赞同：1
> 
> 时间：2012-11-02T11:27:10.180
> 
> 标签：json, jquery

您好，我正在创建一个仅使用 HTML/CSS 和 Javascript 的简单网站，因为我不能使用服务器端语言（服务器不支持它们），现在我正在使用 jQuery/AJAX 甚至我的低 Javascript 知识创建我的网站的路由我设法创造了最多。但我不知道如何从我的 JSON 文件中获取正确的索引。

JSON文件如下：

```
{
  "home": {
      "pattern": "/home",
      "target":  "home.html"
  },
  "webshop": {
      "pattern": "/webshop",
      "target":  "webshop.html"
  }
} 
```

我在 index.html 中使用的 jQuery 就像：

```
<script type="text/javascript">
$(document).ready(function() {
//wacht op laden pagina

$.ajax({
  url: 'routing.json',
  async: false,
  dataType: 'json',
  success: function (response) {
    // do stuff with response.
    var nav = $('.nav_menu ul');

    $.each(response, function(route) {
        for(var i=0;i<route.length;i++){
        console.log("route["+i+"] is =>"+route[i]);
    }
        nav.append('<li><a href="index.html/#/' + route + '">' + route + '</a></li>');

    });

  }

});

});
</script> 
```

现在的问题是在我的 jQuery 部分中我不知道如何创建正确的链接（请参阅路线）

```
nav.append('<li><a href="index.html/#/' + route + '">' + route + '</a></li>'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:40:44.740

不知道为什么你`for`在`$.each()`. 没有必要。相反，尝试

```
$.each(response, function(id,route) {
    nav.append('<li><a href="index.html/#/' + route.target + '">' + route.pattern + '</a></li>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:38:53.317

示例 Json

```
 "yyyList": [
        {
          "Id": "1",
          "Name": "aaaa "
        }, {
          "Id": "2",
          "Name": "bbb "
        }, {
          "Id": "6",
          "Name": "ccc "
        }, {
          "Id": "7",
          "Name": "ddd "
        } ]

$.ajax({
              url: "URL",
               //data: "",
               type: "GET",
               dataType: 'json',
               success: function (data) {            
               $.each(data.YYYList, function () {
                  $('#state').append('<'li value='+this.Id+'>'+this.Name+'<'/li>');
               });
            }
        }) 
```

$('#state') ---> 为 HTML 中的 UL 标记提供相同的 id 请更正它的选项语法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:42:30.513

如果您收到 JSON 响应，您可以使用`$.parseJSON()`.

尝试类似：

```
$.ajax({
  url: 'routing.json',
  async: false,
  dataType: 'json',
  success: function (response) {
    // do stuff with response.
    var nav = $('.nav_menu ul');

    var obj = jQuery.parseJSON(response);
    for(var ele in obj){
      nav.append('<li><a href="index.html/#/' + obj[ele].target + '">' + obj[ele].pattern + '</a></li>');
    }

  }

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T11:35:48.067

您将对象视为 JavaScript 数组。为什么不使用数组呢？

```
[
 { "route": "home", "pattern": "/home", "target": "home.html" },
 { "route": "webshop", "pattern": "/webshop", "target": "webshop.html" }
]

$.each(response, function(i, routeInfo) {
    nav.append('<li><a href="index.html/#/' + routeInfo.route + '">' + routeInfo.route + '</a></li>');
}); 
```

**更新**

实际上，Abhilash 的答案保留了您的结构。您的问题是您的`$.each()`签名没有说明第一个参数是索引，第二个参数是集合中的项目。我假设您需要路线的名称，而不是目标，所以这就是我以我的方式回答的原因。如果您不需要它，那么 Abhilash 的答案会更好（恕我直言），因为它保留了您的结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T11:41:24.113

我认为问题在于您将它更像是一个数组，但实际上它是一个对象。尝试这个：

```
$.each(response, function(route) {
    console.log(response[route])
    nav.append('<li><a href="index.html/#/' + response[route].target + '">' + response[route].pattern + '</a></li>');
}); 
```

# jquery - 单击盆景形状后显示 jquery UI 对话框

> ID：13194315
> 
> 赞同：0
> 
> 时间：2012-11-02T11:27:17.960
> 
> 标签：jquery, bonsaijs

你好我有这个代码

```
$(function() {
  bonsai.run(document.getElementById('movie'), {
   code: function() {
     var rect= new Rect(0, 0, 100, 100);
     rect.on('multi:pointerdown', function(e) {
     $("#dialog-form").dialog("open");
     });
   },
   width: 500,
   height: 400,
  });
}); 
```

当我点击我的矩形时，我有这个错误：

> ReferenceError: $ 未定义

如何获得有关 jquery 的参考？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T12:43:02.920

[BonsaiJS](http://bonsaijs.org)创建一个新的执行上下文（通常是一个 web worker），并且您在其中传递的代码`bonsai.run`在不同的范围内执行，其中 jQuery 不可用。可以在[这里](http://docs.bonsaijs.org/overview/Execution.html)找到有关 BonsaiJS 如何执行代码的详细信息。

但是要解决您的问题，您可以像这样与所谓的 BonsaiJS 运行器上下文进行通信：

```
$(function() {
  var movie = bonsai.run(document.getElementById('movie'), {
    // note: this function will be stringified and sent to the runner context
    code: function() {
      var rect= new Rect(0, 0, 100, 100).fill('red').addTo(stage);
      rect.on('multi:pointerdown', function(e) {
        // this is how you would pass data with your message
        stage.sendMessage('openDialog', {
          id: '#dialog-form'
        });
        // no data:
        // stage.sendMessage('openDialog', {});
      });
    },
    width: 500,
    height: 400,
  });
  movie.on('load', function() {
    movie.on('message:openDialog', function(data) {
      $(data.id).dialog("open");
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:32:20.610

也许您在包含 JQuery Javascript 之前调用了该函数？首先放置对 JQuery 脚本的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:30:57.897

*   确保 $ 变量不会被 jquery 核心中的 Jquery 变量覆盖。

*   加载脚本的顺序很重要，在 jQuery 加载之后运行脚本。

# extjs - EXTJS - 提交表单并在网格中显示值

> ID：13194316
> 
> 赞同：0
> 
> 时间：2012-11-02T11:27:18.273
> 
> 标签：extjs

我对 EXTJS 很陌生。使用表单和网格处理应用程序。

表单将具有浏览（上传文档）、组合框、文本区域和日期字段。提交时，必须出现进度条以显示上传进度。

文档路径、组合框字段值、文本区域值和输入的日期值必须显示在网格中。默认情况下，删除按钮必须在每行的网格中，一旦值出现。

我尝试使用 POST 方法提交表单并以 JSON 格式输出。我可以获得除**Filefield**之外的其他字段的值。**如何获取文件字段值？？？**

谢谢

```
var form = Ext.getCmp('Docinfo').getForm();
if(form.isValid())
{
  var record = form.getValues();
  var output_json = {"header": Ext.JSON.encode(record)};
  Ext.Ajax.request({
  url:'data/CSApp.json',
  waitMsg: 'Uploading your file...',
  method: 'POST',
  jsonData: output_json,
  success: function(response) {
  Ext.Msg.alert('Data submitted');
  Ext.getCmp('Docinfo').getForm().reset();
  },
  failure: function(response) {
  Ext.Msg.alert('Error while submitting data');
  },
  headers: {'Content-Type' : 'text/html' , 'Accept' : 'application/json'}
  });
  }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:38:46.490

首先文件输入不能通过 AJAX 提交。文档清楚地描述了这一点： [http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.File](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.File)

其次，为什么使用 Ajax 请求来提交表单值而不是表单提交函数本身？

# c++ - 我在哪里可以找到 MFC 中的 CheckList？

> ID：13194321
> 
> 赞同：0
> 
> 时间：2012-11-02T11:27:44.633
> 
> 标签：c++, mfc

我需要使用包含每个项目的检查列表的列表框。但是我在 VS2010 中找不到它我需要通过句柄创建吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:35:37.457

试试[这个标准的](http://msdn.microsoft.com/en-us/library/d58s8sak%28v=vs.100%29.aspx)

MSDN 是您开始搜索的正确位置。

# php - 用于检查日期的 PHP 正则表达式为 YYYY-MM-DD 格式

> ID：13194322
> 
> 赞同：118
> 
> 时间：2012-11-02T11:27:47.670
> 
> 标签：php, regex, date-format

我正在尝试检查最终用户输入的日期是否在 YYYY-MM-DD 中。正则表达式从来都不是我的强项，我一直为我设置的 preg_match() 获得错误的返回值。

所以我假设我把正则表达式弄得一团糟，详情如下。

```
$date="2012-09-12";

if (preg_match("^[0-9]{4}-[0-1][0-9]-[0-3][0-9]$",$date))
    {
        return true;
    }else{
        return false;
    } 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-11-02T11:33:13.447

尝试这个。

```
$date="2012-09-12";

if (preg_match("/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/",$date)) {
    return true;
} else {
    return false;
} 
```

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2012-11-02T11:32:04.067

为此使用另一种机制可能会更好。

现代解决方案，具有[`DateTime`](http://php.net/manual/en/class.datetime.php)：

```
$dt = DateTime::createFromFormat("Y-m-d", $date);
return $dt !== false && !array_sum($dt::getLastErrors()); 
```

这也验证了输入：`$dt !== false`确保可以用指定的格式解析日期，并且`array_sum`诀窍是确保 PHP 不执行“月份转换”的简洁方法（例如，考虑 1 月 32 日是 2 月 1 日）。有关[`DateTime::getLastErrors()`](http://php.net/manual/en/datetime.getlasterrors.php)更多信息，请参阅。

[`explode`](http://php.net/manual/en/function.explode.php)带有and的老式解决方案[`checkdate`](http://php.net/manual/en/function.checkdate.php)：

```
list($y, $m, $d) = array_pad(explode('-', $date, 3), 3, 0);
return ctype_digit("$y$m$d") && checkdate($m, $d, $y); 
```

这也验证了输入也是有效的日期。当然，您可以使用正则表达式来做到这一点，但这会更麻烦——而且 2 月 29 日根本无法使用正则表达式进行验证。

这种方法的缺点是您必须非常小心地拒绝所有可能的“错误”输入，同时在任何情况下都不发出通知。就是这样：

*   `explode`仅限于返回 3 个标记（这样如果输入为“1-2-3-4”，`$d`将变为“3-4”）
*   `ctype_digit`用于确保输入不包含任何非数字字符（破折号除外）
*   `array_pad`用于（使用将导致`checkdate`失败的默认值）以确保返回足够的元素，以便如果输入为“1-2”`list()`则不会发出通知

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2016-06-03T10:01:29.050

**yyyy-mm-dd：** `/^((((19|[2-9]\d)\d{2})\-(0[13578]|1[02])\-(0[1-9]|[12]\d|3[01]))|(((19|[2-9]\d)\d{2})\-(0[13456789]|1[012])\-(0[1-9]|[12]\d|30))|(((19|[2-9]\d)\d{2})\-02\-(0[1-9]|1\d|2[0-8]))|(((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))\-02\-29))$/g`

**年年/月/日：** `/^((((19|[2-9]\d)\d{2})\/(0[13578]|1[02])\/(0[1-9]|[12]\d|3[01]))|(((19|[2-9]\d)\d{2})\/(0[13456789]|1[012])\/(0[1-9]|[12]\d|30))|(((19|[2-9]\d)\d{2})\/02\/(0[1-9]|1\d|2[0-8]))|(((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))\/02\/29))$/g`

**mm-dd-yyyy：** `/^(((0[13578]|1[02])\-(0[1-9]|[12]\d|3[01])\-((19|[2-9]\d)\d{2}))|((0[13456789]|1[012])\-(0[1-9]|[12]\d|30)\-((19|[2-9]\d)\d{2}))|(02\-(0[1-9]|1\d|2[0-8])\-((19|[2-9]\d)\d{2}))|(02\-29\-((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g`

**月/日/年：** `/^(((0[13578]|1[02])\/(0[1-9]|[12]\d|3[01])\/((19|[2-9]\d)\d{2}))|((0[13456789]|1[012])\/(0[1-9]|[12]\d|30)\/((19|[2-9]\d)\d{2}))|(02\/(0[1-9]|1\d|2[0-8])\/((19|[2-9]\d)\d{2}))|(02\/29\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g`

**日/月/年：** `/^(((0[1-9]|[12]\d|3[01])\/(0[13578]|1[02])\/((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\/(0[13456789]|1[012])\/((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\/02\/((19|[2-9]\d)\d{2}))|(29\/02\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g`

**dd-mm-yyyy ：** `/^(((0[1-9]|[12]\d|3[01])\-(0[13578]|1[02])\-((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\-(0[13456789]|1[012])\-((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\-02\-((19|[2-9]\d)\d{2}))|(29\-02\-((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g`

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2015-04-02T16:14:16.963

**Criteria:**

Every year divisible by 4 is a leap year, except when it is divisible by 100 unless it is divisible by 400\. So:

```
2004 - leap year - divisible by 4
1900 - not a leap year - divisible by 4, but also divisible by 100
2000 - leap year - divisible by 4, also divisible by 100, but divisible by 400 
```

February has 29 days in a leap year and 28 when not a leap year

30 days in April, June, September and November

31 days in January, March, May, July, August, October and December

**Test:**

The following dates should all pass validation:

```
1976-02-29
2000-02-29
2004-02-29
1999-01-31 
```

The following dates should all fail validation:

```
2015-02-29
2015-04-31
1900-02-29
1999-01-32
2015-02-00 
```

**Range:**

We'll test for dates from 1st Jan 1000 to 31st Dec 2999\. *Technically the currently used Gregorian calendar only came into use in 1753 for the British Empire and at various years in the 1600s for countries in Europe, but I'm not going to worry about that.*

**Regex to test for a leap year:**

The years divisible by 400:

```
1200|1600|2000|2400|2800
can be shortened to:
(1[26]|2[048])00

if you wanted all years from 1AD to 9999 then this would do it:
(0[48]|[13579][26]|[2468][048])00
if you're happy with accepting 0000 as a valid year then it can be shortened:
([13579][26]|[02468][048])00 
```

The years divisible by 4:

```
[12]\d([02468][048]|[13579][26]) 
```

The years divisible by 100:

```
[12]\d00 
```

Not divisible by 100:

```
[12]\d([1-9]\d|\d[1-9]) 
```

The years divisible by 100 but not by 400:

```
((1[1345789])|(2[1235679]))00 
```

Divisible by 4 but not by 100:

```
[12]\d([2468][048]|[13579][26]|0[48]) 
```

The leap years:

```
divisible by 400 or (divisible by 4 and not divisible by 100)
((1[26]|2[048])00)|[12]\d([2468][048]|[13579][26]|0[48]) 
```

Not divisible by 4:

```
[12]\d([02468][1235679]|[13579][01345789]) 
```

Not a leap year:

```
Not divisible by 4 OR is divisible by 100 but not by 400
([12]\d([02468][1235679]|[13579][01345789]))|(((1[1345789])|(2[1235679]))00) 
```

**Valid Month and day excluding February(MM-DD):**

```
((01|03|05|07|08|10|12)-(0[1-9]|[12]\d|3[01]))|((04|06|09|11)-(0[1-9]|[12]\d|30))
shortened to:
((0[13578]|1[02])-(0[1-9]|[12]\d|3[01]))|((0[469]|11)-(0[1-9]|[12]\d|30)) 
```

February with 28 days:

```
02-(0[1-9]|1\d|2[0-8]) 
```

February with 29 days:

```
02-(0[1-9]|[12]\d) 
```

**Valid date:**

```
(leap year followed by (valid month-day-excluding-february OR 29-day-february)) 
OR
(non leap year followed by (valid month-day-excluding-february OR 28-day-february))

((((1[26]|2[048])00)|[12]\d([2468][048]|[13579][26]|0[48]))-((((0[13578]|1[02])-(0[1-9]|[12]\d|3[01]))|((0[469]|11)-(0[1-9]|[12]\d|30)))|(02-(0[1-9]|[12]\d))))|((([12]\d([02468][1235679]|[13579][01345789]))|((1[1345789]|2[1235679])00))-((((0[13578]|1[02])-(0[1-9]|[12]\d|3[01]))|((0[469]|11)-(0[1-9]|[12]\d|30)))|(02-(0[1-9]|1\d|2[0-8])))) 
```

So there you have it a regex for dates between 1st Jan 1000 and 31st Dec 2999 in YYYY-MM-DD format.

I suspect it can be shortened quite a bit, but I'll leave that up to somebody else.

That will match all valid dates. If you want it to only be valid when it contains just one date and nothing else, then wrap it in `^( )$` like so:

```
^(((((1[26]|2[048])00)|[12]\d([2468][048]|[13579][26]|0[48]))-((((0[13578]|1[02])-(0[1-9]|[12]\d|3[01]))|((0[469]|11)-(0[1-9]|[12]\d|30)))|(02-(0[1-9]|[12]\d))))|((([12]\d([02468][1235679]|[13579][01345789]))|((1[1345789]|2[1235679])00))-((((0[13578]|1[02])-(0[1-9]|[12]\d|3[01]))|((0[469]|11)-(0[1-9]|[12]\d|30)))|(02-(0[1-9]|1\d|2[0-8])))))$ 
```

If you want it for an optional date entry (ie. it can be blank or a valid date) then add `^$|` at the beginning, like so:

```
^$|^(((((1[26]|2[048])00)|[12]\d([2468][048]|[13579][26]|0[48]))-((((0[13578]|1[02])-(0[1-9]|[12]\d|3[01]))|((0[469]|11)-(0[1-9]|[12]\d|30)))|(02-(0[1-9]|[12]\d))))|((([12]\d([02468][1235679]|[13579][01345789]))|((1[1345789]|2[1235679])00))-((((0[13578]|1[02])-(0[1-9]|[12]\d|3[01]))|((0[469]|11)-(0[1-9]|[12]\d|30)))|(02-(0[1-9]|1\d|2[0-8])))))$ 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-11-02T11:34:11.417

你可以这样做：

```
if (preg_match("/\d{4}\-\d{2}-\d{2}/", $date)) {
    echo 'true';
} else {
    echo 'false';
} 
```

但你最好使用这个：

```
$date = DateTime::createFromFormat('Y-m-d', $date);
if ($date) {
    echo $date -> format('Y-m-d');
} 
```

在这种情况下，您将获得一个比字符串更易于使用的对象。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-02-20T23:11:40.370

我知道这是一个老问题。但我认为我有一个很好的解决方案。

```
$date = "2016-02-21";
$format = "Y-m-d";

if(date($format, strtotime($date)) == date($date)) {
    echo "true";
} else {
    echo "false";
} 
```

你可以试试。如果您将日期更改为 21.02.2016，则回显是错误的。如果您之后将格式更改为 dmY，则回显为真。

使用这个简单的代码，您应该能够检查使用了哪种日期格式，而无需通过正则表达式进行检查。

也许有人会对每个案例进行测试。但我认为我的想法通常是有效的。对我来说，这似乎是合乎逻辑的。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-11-02T11:34:11.850

您可以将 preg_match 与 checkdate php 函数一起使用

```
$date  = "2012-10-05";
$split = array();
if (preg_match ("/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/", $date, $split))
{
    return checkdate($split[2], $split[3], $split[1]);
}

return false; 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-11-02T11:34:32.667

preg_match 需要一个 / 或另一个字符作为分隔符。

```
preg_match("/^[0-9]{4}-[0-1][0-9]-[0-3][0-9]$/",$date) 
```

你还应该检查那个日期的有效性，这样你就不会得到像 9999-19-38 这样的东西

```
bool checkdate ( int $month , int $day , int $year ) 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2020-02-21T03:32:28.580

可能对某人有用：

```
$patterns = array(
            'Y'           =>'/^[0-9]{4}$/',
            'Y-m'         =>'/^[0-9]{4}(-|\/)([1-9]|0[1-9]|1[0-2])$/',
            'Y-m-d'       =>'/^[0-9]{4}(-|\/)([1-9]|0[1-9]|1[0-2])(-|\/)([1-9]|0[1-9]|[1-2][0-9]|3[0-1])$/',
            'Y-m-d H'     =>'/^[0-9]{4}(-|\/)([1-9]|0[1-9]|1[0-2])(-|\/)([1-9]|0[1-9]|[1-2][0-9]|3[0-1])\s(0|[0-1][0-9]|2[0-4])$/',
            'Y-m-d H:i'   =>'/^[0-9]{4}(-|\/)([1-9]|0[1-9]|1[0-2])(-|\/)([1-9]|0[1-9]|[1-2][0-9]|3[0-1])\s(0|[0-1][0-9]|2[0-4]):?(0|[0-5][0-9]|60)$/',
            'Y-m-d H:i:s' =>'/^[0-9]{4}(-|\/)([1-9]|0[1-9]|1[0-2])(-|\/)([1-9]|0[1-9]|[1-2][0-9]|3[0-1])\s(0|[0-1][0-9]|2[0-4]):?((0|[0-5][0-9]):?(0|[0-5][0-9])|6000|60:00)$/',
        );
echo preg_match($patterns['Y'], '1996'); // true
echo preg_match($patterns['Y'], '19966'); // false
echo preg_match($patterns['Y'], '199z'); // false
echo preg_match($patterns['Y-m'], '1996-0'); // false
echo preg_match($patterns['Y-m'], '1996-09'); // true
echo preg_match($patterns['Y-m'], '1996-1'); // true
echo preg_match($patterns['Y-m'], '1996/1'); // true
echo preg_match($patterns['Y-m'], '1996/12'); // true
echo preg_match($patterns['Y-m'], '1996/13'); // false
echo preg_match($patterns['Y-m-d'], '1996-11-1'); // true
echo preg_match($patterns['Y-m-d'], '1996-11-0'); // false
echo preg_match($patterns['Y-m-d'], '1996-11-32'); // false
echo preg_match($patterns['Y-m-d H'], '1996-11-31 0'); // true
echo preg_match($patterns['Y-m-d H'], '1996-11-31 00'); // true
echo preg_match($patterns['Y-m-d H'], '1996-11-31 24'); // true
echo preg_match($patterns['Y-m-d H'], '1996-11-31 25'); // false
echo preg_match($patterns['Y-m-d H:i'], '1996-11-31 2400'); // true
echo preg_match($patterns['Y-m-d H:i'], '1996-11-31 24:00'); // true
echo preg_match($patterns['Y-m-d H:i'], '1996-11-31 24:59'); // true
echo preg_match($patterns['Y-m-d H:i'], '1996-11-31 24:60'); // true
echo preg_match($patterns['Y-m-d H:i'], '1996-11-31 24:61'); // false
echo preg_match($patterns['Y-m-d H:i'], '1996-11-31 24:61'); // false
echo preg_match($patterns['Y-m-d H:i:s'], '1996-11-31 24:6000'); // true
echo preg_match($patterns['Y-m-d H:i:s'], '1996-11-31 24:60:00'); // true
echo preg_match($patterns['Y-m-d H:i:s'], '1996-11-31 24:59:59'); // true
echo preg_match($patterns['Y-m-d H:i:s'], '1996-11-31 24:59:60'); // false
echo preg_match($patterns['Y-m-d H:i:s'], '1996-11-31 24:60:01'); // false 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-11-29T09:52:18.177

验证通用日期格式的函数：

```
function validateDate($date, $format = 'Y-m-d') {
  $d = DateTime::createFromFormat($format, $date);
  return $d && $d->format($format) == $date;
} 
```

执行示例：

```
var_dump(validateDate('2021-02-28')); // true
var_dump(validateDate('2021-02-29')); // false 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-04-13T13:38:09.127

您可以使用

```
function validateDate($date, $format = 'Y-m-d H:i:s')
{
    $d = DateTime::createFromFormat($format, $date);
    return $d && $d->format($format) == $date;
}

$date="2012-09-12";    
echo validateDate($date, 'Y-m-d'); // true or false 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-02-12T15:47:44.433

你也可以这样做：

```
if (DateTime::createFromFormat('Y-m-d', $date)->format('Y-m-d') === $date) {

    // date is correctly formatted and valid, execute some code

} 
```

这不仅会检查格式，还会检查日期自身的有效性，因为`DateTime`只会创建有效日期并且这需要匹配输入。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2012-11-02T11:34:53.157

如果要匹配该类型的日期，请使用：

```
preg_match("~^\d{4}-\d{2}-\d{2}$~", $date) 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2012-11-02T11:47:23.220

这应该告诉您格式是否有效以及输入日期是否有效。

```
 $datein = '2012-11-0';

    if(preg_match('/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/', $datein)){
        echo 'good';
    }else{
        echo 'no good';
    } 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-07-25T11:42:47.307

> 格式 1：$format1 = "2012-12-31";
> 
> 格式 2 : $format2 = "31-12-2012";

```
if (preg_match("/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/",$format1)) {
    return true;
} else {
    return false;
}

if (preg_match("/^(0[1-9]|[1-2][0-9]|3[0-1])-(0[1-9]|1[0-2])-[0-9]{4}$/",$format2)) {
    return true;
} else {
    return false;
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-11-19T16:22:33.943

`YYYY-MM-DD`在一行语句中检查和验证日期

```
function isValidDate($date) {
    return preg_match("/^(\d{4})-(\d{1,2})-(\d{1,2})$/", $date, $m)
        ? checkdate(intval($m[2]), intval($m[3]), intval($m[1]))
        : false;
} 
```

输出将是：

```
var_dump(isValidDate("2018-01-01")); // bool(true)
var_dump(isValidDate("2018-1-1"));   // bool(true)
var_dump(isValidDate("2018-02-28")); // bool(true)
var_dump(isValidDate("2018-02-30")); // bool(false) 
```

允许不带前导零的日期和月份。如果您不想允许这样做，则正则表达式应为：

```
"/^(\d{4})-(\d{2})-(\d{2})$/" 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-09-23T04:49:48.840

要在 php 中使用日期，您应该遵循 php 标准，因此给定的正则表达式将确保您具有可以使用 PHP 操作的有效日期。

```
 preg_match("/^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/",$date) 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2012-11-02T12:37:22.760

这完全取决于您希望此功能有多严格。例如，如果您不想允许超过 12 个月和超过 31 天（不取决于月份，这需要编写日期逻辑），它可能会变得非常复杂：

```
function checkDate($date)
{
  $regex = '/^' . 
    '(' .

    // Allows years 0000-9999
    '(?:[0-9]{4})' .
    '\-' .

    // Allows 01-12
    '(?:' .
    '(?:01)|(?:02)|(?:03)|(?:04)|(?:05)|(?:06)|(?:07)|(?:08)|(?:09)|(?:10)|' .
    '(?:11)|(?:12)' .
    ')' .
    '\-' .

    // Allows 01-31
    '(?:' .
    '(?:01)|(?:02)|(?:03)|(?:04)|(?:05)|(?:06)|(?:07)|(?:08)|(?:09)|(?:10)|' .
    '(?:11)|(?:12)|(?:13)|(?:14)|(?:15)|(?:16)|(?:17)|(?:18)|(?:19)|(?:20)|' .
    '(?:21)|(?:22)|(?:23)|(?:24)|(?:25)|(?:26)|(?:27)|(?:28)|(?:29)|(?:30)|' .
    '(?:31)' .
    ')' .

    '$/';

  if ( preg_match($regex, $date) ) {
    return true;
  }

  return false;
}

$result = checkDate('2012-09-12'); 
```

就个人而言，我只是去：`/^([0-9]{4}\-([0-9]{2}\-[0-9]{2})$/`

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-06-26T10:30:55.877

来自 Laravel 5.7 和日期格式，即：12/31/2019

```
function checkDateFormat(string $date): bool
{
    return preg_match("/^(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])\/[0-9]{4}$/", $date);
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-11-21T09:29:48.633

我正在搜索“如何验证日期”并找到了这个解决方案，它很旧，但我将分享以下可用于在 php 中验证日期的方法，

```
checkdate('01', '31', '2019') 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-10-07T10:18:04.773

如果有任何帮助，这里是 jnY 格式的正则表达式（年份必须大于 2018）：

```
if (preg_match('/^([1-9]|[1-2][0-9]|[3][0-1])\-([1-9]|[1][0-2])\-(?:20)([1][8-9]|[2-9][0-9])$/', $date)) {
   // Do stuff
} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2021-09-30T10:48:43.373

下面确保数字 YYYY(1900-2099)-MM(01-12)-DD(01-31) 以及利用 checkdate() 函数来确保日期正确性，例如 2 月 29 日：

```
$date_pattern = '/^(19|20)\d{2}\-(0[1-9]|1[0-2])\-(0[1-9]|[12][0-9]|3[01])$/';

if (empty($date) || (!preg_match("$date_pattern", $date, $m) || (!checkdate($m[2], $m[3], $m[1])))) {
    $echo 'Invalid Start date e.g. YYYY-MM-DD';
} 
```

要更改日期模式和年份范围：

// 模式 DD/MM/YYYY 其中 DD (01-31)、MM (01-12) 和 YYYY (1950-2099) & 必须是数字 - 将 checkdate () 替换为`!checkdate($m[2], $m[1], $m[3]`

// 扩展年份范围，例如 1900-2099 /^(0[1-9]|[12][0-9]|3[01])/(0[1-9]|1[0-2]) /(19|20)\d{2}$/ - 将 checkdate () 替换为`!checkdate($m[2], $m[1], $m[3]`

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-01-31T14:08:43.563

[如果你使用 Symfony 4.1.2 试试这个][1]

```
 $validDate = explode("-",$request->get('date'));
        if (checkdate(filter_var($validDate[1],FILTER_SANITIZE_NUMBER_INT),filter_var($validDate[0],FILTER_SANITIZE_NUMBER_INT),filter_var($validDate[2],FILTER_SANITIZE_NUMBER_INT))){
            $date = date_create(filter_var($request->get('date'),FILTER_SANITIZE_SPECIAL_CHARS));
        }else{
            return $this->redirectToRoute('YOUR_ROUTE');
        } 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-04-09T19:25:01.173

更务实的模式可能是这样的

```
$date="2012-09-12";

if (preg_match("/^(20[0-9]{2})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/",$date)) {
    return true;
} else {
    return false;
} 
```

这将阻止放置 9999-09-12 这样的值。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-05-29T11:52:47.130

此方法可用于验证 PHP 中的日期。当前方法适用于 mm/dd/yyyy 格式。您必须根据您的格式更新[checkdate](http://php.net/manual/en/function.checkdate.php)中的参数序列和[explode](http://php.net/manual/en/function.explode.php)中的分隔符。

```
 function isValidDate($dt)
    {
        $dtArr = explode('/', $dt);
        if (!empty($dtArr[0]) && !empty($dtArr[1]) && !empty($dtArr[2])) {
            return checkdate((int) $dtArr[0], (int) $dtArr[1], (int) $dtArr[2]);
        } else {
            return false;
        }
    } 
```

# php - 将 Symfony2 站点从 Web 服务器转移到 localhost

> ID：13194325
> 
> 赞同：0
> 
> 时间：2012-11-02T11:27:58.713
> 
> 标签：php, symfony

正如标题所述，我希望将一个使用 Symfony2 构建的网站从 Web 服务器转移到我的本地主机上。

我以前没有这样做过，我不确定要达到预期结果的步骤是什么，这将是让网站从我的本地主机完美运行。

我已经在我的本地主机上安装了一个空白版本的 Symfony2，但我不确定从这里去哪里？

很抱歉这个模糊的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T11:49:16.693

那主要是3个步骤：

1.  **将整个 Symfony2 站点文件夹下载**到您的本地主机中。该文件夹将是包含“app”、“src”、“web”等文件夹的文件夹。
2.  **从实时网络服务器导出**数据库，并将其**导入**您的本地主机。这可以使用 PhpMyAdmin 来完成...
3.  打开位于“app/config”中的文件“ **parameters.ini ”，并更改数据库设置以匹配您本地主机上的设置。**

那应该就可以了。请注意，没有必要安装 Symfony2 的空白副本，因为无论如何您都可以通过下载整个应用程序来获得它。

如果仍然无法正常工作，您可能需要查看位于根文件夹或“web”文件夹中的 .htaccess 文件。

# javascript - javascript 和 webview 中的 JavaFX 2.2 双向通信

> ID：13194326
> 
> 赞同：5
> 
> 时间：2012-11-02T11:28:02.437
> 
> 标签：javascript, html, webview, javafx-2

我正在研究 JavaFX 2.2，我正在使用 webview 将 html 代码集成到 JavaFX 场景中，并且能够正确加载 html。我正在关注[这个](https://blogs.oracle.com/javafx/entry/communicating_between_javascript_and_javafx)链接，并试图将一些对象从 javascript 传递到 webview/controller，但我在 java 端得到空值。

我在 JSObject 中保存了一个接口对象，如下所示

```
webEngine.getLoadWorker().stateProperty().addListener(
        new ChangeListener<State>() {
            @Override
            public void changed(ObservableValue<? extends State> ov,
                State oldState, State newState) {
                if (newState == State.SUCCEEDED) {
                        JSObject win = (JSObject) webEngine.executeScript("window");
                        win.setMember("app", new JavaApp());
                    }
                }
            }
    ); 
```

我创建了一个类

```
public class JavaApp {

        public void exit() {
           Platform.exit();
        }
        public void print(Date date) {
            System.out.println("Parm:"+date);
         }
        public Date getValue() {
            return new Date();
         }
    } 
```

我的html是

```
<html lang="en">
<head>
    <script type="text/javascript">
        function callJava(){
            app.print(new Date());
            var val = app.getValue();
            app.print(val);
        }
    </script>
</head>
<body>
<p>Help</p>    
<p><a href="about:blank" onclick="callJava();">Exit the Application</a></p>    
</body>
</html> 
```

在上面的代码中，我总是在 JavaApp.print() 方法中打印空值。有趣的一点是，当我在 print 方法中将参数从 Date 更改为 String 并从 javascript 传递字符串时，我得到了正确的值。

在这种情况下我如何传输对象，尤其是 Date 对象。任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T02:21:51.170

**Java**不知道**javascript**`Date`的类。

 **[2.3 数据类型转换](http://jdk6.java.net/plugin2/liveconnect/index.html#JS_OTHER_OBJECTS)

您可以将**javascript**对象传递给**Java**，（您必须将其包装在 a 中`JSObject`）但您只能直接获取以下参数：

*   *数字*，
*   *布尔值*，
*   *字符串*,
*   *数组*，
*   *您之前放入*javascript的同一对象。

* * *

我给你的解决方案：

```
public class JavaApp {

    public void exit() {
       Platform.exit();
    }
    //public void print(Date date) {
    //    System.out.println("Parm:"+date);
    // }
    public void print(long date) {
        System.out.println("Parm:"+new Date(date));
     }
    public Date getValue() {
        return new Date();
     }
}

<html lang="en">
<head>
    <script type="text/javascript">
        function callJava(){
            // app.print(new Date());
            app.print(new Date().getTime());
            var val = app.getValue();
            app.print(val);
        }
    </script>
</head>
<body>
<p>Help</p>    
<p><a href="about:blank" onclick="callJava();">Exit the Application</a></p>    
</body>
</html> 
```**

# xpath - xpath 1 和 xpath 2 在确定最小值和最大值时返回不同的结果

> ID：13194330
> 
> 赞同：6
> 
> 时间：2012-11-02T11:28:19.203
> 
> 标签：xpath, max, min, xpath-2.0

我有以下关于 XPATH1 和 XPATH2 的问题：

```
<document>
    <val>3</val>
    <val>11</val>
    <val>3</val>
    <val>2</val>
    <val>12</val>
    <val>5</val>
    <val>0</val>
    <val>7</val>
</document> 
```

xpath1：最大值

```
//val[not(. < //val)] 
```

分钟：

```
//val[not(. > //val)] 
```

xpath2：

```
document/val[. = max(//val)]

document/val[. = min(//val)] 
```

为什么我在使用 xpath1-max 查询的 XPATH2 处理中得不到相同的结果：

```
//val[not(. < //val)] 
```

似乎我得到了 LAST 节点（val 7），但不是最高值......相反，MIN 值适用于 XPATH2 处理：

```
//val[not(. > //val)] 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T12:18:50.833

很好的一点。

在 xpath 1（和 xslt 1.0）中，`//val[not(. < //val)]`本质上是将文本值转换为数字，并对数字进行比较。

因此，您会得到正确的最小值和最大值。

但是，在 xpath 2（和 xslt 2.0）中，文本不会转换为数字，而是进行字符串比较。所以使用字符串比较，'7' > '12'，因此 7 仍然是最高值（它不只返回列表中的最后一个值 - 尝试交换值的顺序）

因此，为了确保 xslt 1 和 2 中的安全，您应该做的是使用[number() 函数](http://www.w3.org/TR/xpath-functions/#func-number)对文本进行强制转换，以确保完成数字比较。

最大限度：

```
//val[not(number(.) &lt; //val)] 
```

分钟：

```
//val[not(number(.) &gt; //val)] 
```

将 Saxon 与样式表一起使用：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
        <x>
            <Max1>
                <xsl:value-of select="//val[not(number(.) &lt; //val)]" />
            </Max1>
            <Min1>
                <xsl:value-of select="//val[not(number(.) &gt; //val)]" />
            </Min1>
            <Max2>
                <xsl:value-of select="/document/val[. = max(//val/text())]" />
            </Max2>
            <Min2>
                <xsl:value-of select="/document/val[. = min(//val/text())]" />
            </Min2>
        </x>
    </xsl:template>
</xsl:stylesheet> 
```

退货

```
<x>
   <Max1>12</Max1>
   <Min1>0</Min1>
   <Max2>12</Max2>
   <Min2>0</Min2>
</x> 
```

正如预期的那样。

# java - docx4j2.8.0.jar 无法使用 grail

> ID：13194335
> 
> 赞同：1
> 
> 时间：2012-11-02T11:28:30.360
> 
> 标签：java, grails

我整天都在用我的应用程序运行一个 grails 测试运行应用程序，这很好。我键入“grails prod war”来进行战争，并将其部署在我的 linux 操作系统的 Jboss 6.0 中。使用 docx4j.jar 的 WordprocessingMLPackage.load(inputStream) 方法读取 docx 文件时出现错误：

WordprocessingMLPackage inputMLPackage = WordprocessingMLPackage.load(inputStream);

```
2012-10-31 06:32:54,861 ERROR [org.codehaus.groovy.grails.web.errors.GrailsExceptionResolver] (http-10.189.8.11-8080-    2) Exception occurred when processing request: [POST] /HBG_PM/report/buildItinerary
 Stacktrace follows:: org.codehaus.groovy.grails.web.servlet.mvc.exceptions.ControllerExecutionException:            Executing     action [buildItinerary] of controller [com.hbg.pm.controller.report.ReportController]  caused exception: java.lang.NoClassDefFoundError: Could not initialize class org.docx4j.jaxb.Context
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181) [:6.0.0.Final]
at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285) [:1.1.0.Final]
at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261) [:1.1.0.Final]
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88) [:6.0.0.Final]
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100) [:6.0.0.Final]
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) [:6.0.0.Final]
at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53) [:6.0.0.Final]
at java.lang.Thread.run(Thread.java:679) [:1.6.0_22]
   Caused by: org.codehaus.groovy.runtime.InvokerInvocationException: java.lang.NoClassDefFoundError: Could not initialize class org.docx4j.jaxb.Context
... 8 more
  Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.docx4j.jaxb.Context
at org.docx4j.openpackaging.contenttype.ContentTypeManager.parseContentTypesFile(ContentTypeManager.java:666) [:]
at org.docx4j.openpackaging.io.LoadFromZipNG.process(LoadFromZipNG.java:206) [:]
at org.docx4j.openpackaging.io.LoadFromZipNG.get(LoadFromZipNG.java:193) [:]
at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:301) [:]
at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:245) [:]
at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:213) [:]
at org.docx4j.openpackaging.packages.WordprocessingMLPackage.load(WordprocessingMLPackage.java:184) [:]
at org.docx4j.openpackaging.packages.WordprocessingMLPackage$load.call(Unknown Source)
at com.hbg.pm.controller.report.ReportController.processBodyHeaderFooter(ReportController.groovy:2517) [:]
at com.hbg.pm.controller.report.ReportController$_closure1.doCall(ReportController.groovy:198) [:]
at com.hbg.pm.controller.report.ReportController$_closure1.doCall(ReportController.groovy) [:]
... 8 more 
```

如果我尝试使用动态 Web 项目做同样的事情，则没有错误。这是什么原因造成的？因为我的网络 inf 库中有 docx4j jar

谢谢

# msbuild - 使用外部任务确定 OutputPath

> ID：13194336
> 
> 赞同：1
> 
> 时间：2012-11-02T11:28:34.250
> 
> 标签：msbuild, msbuild-task, msbuild-4.0

我试图通过使用外部任务来获取有关我想在哪里存储最终输出的信息，从而在 csproj 中全局覆盖 OutputPath 参数。

我创建了一个任务：

```
<Target Name="SetSolutionTarget">
    <SetSolutionConfiguration SolutionPath="$(SolutionPath)">
      <Output PropertyName="SolutionConfig" TaskParameter="SolutionConfiguration"/>
    </SetSolutionConfiguration>
    <Message Text="SolutionConfiguration is: $(SolutionConfig)" Importance="high" />
</Target> 
```

该任务运行良好，并且消息输出了我想要输出文件的正确值。

问题是当我尝试将它与 OutputPath 集成时。试图做：

```
<OutputPath>$(SolutionConfig)</OutputPath> 
```

不起作用 - 它会引发错误：“OutputPath 属性未设置....” - 这意味着变量不会在任务之间传递，或者必须在执行构建之前设置 OutputPath 的变量。

我还尝试了其他方法，例如在我的任务中设置环境变量而不是输出结果（但仍然没有运气）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-31T21:25:14.710

我意识到这是一个老问题，但找出解决方案很乏味。因此，在这里发布我的发现是为了（希望）为其他人节省大量时间。

* * *

# 解决方案 1（推荐）

现在 MSBuild[在 GitHub 上开源](https://github.com/Microsoft/msbuild)，我在他的 MSBuild 示例 repo 上向 MSFT 团队成员 (Jeff Kluge) 询问了一个类似的问题（例外是，我正在尝试使用内联任务），并收到了一个解决方案：[https://github。 com/jeffkl/MSBuild-NetCore/issues/2](https://github.com/jeffkl/MSBuild-NetCore/issues/2)

> @jeffkl 说：
> 
> 这是我的示例：[https ://github.com/jeffkl/MSBuild-NetCore/blob/master/src/OutputPathViaInlineTask/build.targets](https://github.com/jeffkl/MSBuild-NetCore/blob/master/src/OutputPathViaInlineTask/build.targets)

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <UsingTask TaskName="GetOutputPath" TaskFactory="CodeTaskFactory" AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.Core.dll">
    <ParameterGroup>
      <OutputPath ParameterType="System.String" Output="true" />
    </ParameterGroup>
    <Task>
      <Code Type="Fragment" Language="cs">
        <![CDATA[
          OutputPath = Path.Combine("bin", Guid.NewGuid().ToString("N")) + System.IO.Path.DirectorySeparatorChar;
        ]]>
      </Code>
    </Task>
  </UsingTask>

  <Target Name="SetOutputPath"
          BeforeTargets="_CheckForInvalidConfigurationAndPlatform">

    <Message Text="Before:" />
    <Message Text=" OutputPath: '$(OutputPath)'" />
    <Message Text=" OutDir: '$(OutDir)'" />
    <Message Text=" PublishDir: '$(PublishDir)'" />
    <Message Text=" _InvalidConfigurationError: '$(_InvalidConfigurationError)'" />
    <Message Text=" _InvalidConfigurationWarning: '$(_InvalidConfigurationWarning)'" />

    <GetOutputPath>
      <Output TaskParameter="OutputPath" PropertyName="OutputPath"/>
      <!--
        OutDir is set in Microsoft.Common.CurrentVersion.targets as a copy of $(OutputPath). Since
        we've reset $(OutputPath), we need to reset $(OutDir) as well for backwards compatibility.
      -->
      <Output TaskParameter="OutputPath" PropertyName="OutDir" />
    </GetOutputPath>

    <PropertyGroup>
      <!--
        PublishDir is set in Microsoft.Common.CurrentVersion.targets and starts with $(OutputPath).
        Since we've reset $(OutputPath), we need to reset $(PublishDir).  We have to do this in a
        <PropertyGroup /> because the <Output /> from <GetOutputPath /> can't append text.
      -->
      <PublishDir>$(OutputPath)app.publish\</PublishDir>
      <!--
        If <OutputPath /> is not set in a top-level <PropertyGroup /> then $(_InvalidConfigurationError)
        is set to 'true' which will cause a build error.  However, we've set $(OutputPath) in a task 
        just before _CheckForInvalidConfigurationAndPlatform ran so we can turn off the error now that
        we know everything is set properly. 
      -->
      <_InvalidConfigurationError>false</_InvalidConfigurationError>
      <_InvalidConfigurationWarning>false</_InvalidConfigurationWarning>
    </PropertyGroup>

    <Message Text="After:" />
    <Message Text=" OutputPath: '$(OutputPath)'" />
    <Message Text=" OutDir: '$(OutDir)'" />
    <Message Text=" PublishDir: '$(PublishDir)'" />
    <Message Text=" _InvalidConfigurationError: '$(_InvalidConfigurationError)'" />
    <Message Text=" _InvalidConfigurationWarning: '$(_InvalidConfigurationWarning)'" />

  </Target>
</Project> 
```

> @jeffkl 说：
> 
> 此处导入：[https ://github.com/jeffkl/MSBuild-NetCore/blob/master/src/OutputPathViaInlineTask/OutputPathViaInlineTask.csproj#L24](https://github.com/jeffkl/MSBuild-NetCore/blob/master/src/OutputPathViaInlineTask/OutputPathViaInlineTask.csproj#L24)

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="14.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProjectGuid>{C76AA0AA-3B50-48D6-BE46-0F2D8DC56C02}</ProjectGuid>
    <OutputType>Exe</OutputType>
    <RootNamespace>OutputPathViaInlineTask</RootNamespace>
    <AssemblyName>OutputPathViaInlineTask</AssemblyName>
    <TargetFrameworkVersion>v4.6</TargetFrameworkVersion>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' "/>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' "/>

  <ItemGroup>
    <Reference Include="System" />
    <Compile Include="Program.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
    <None Include="App.config" />
  </ItemGroup>

  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <Import Project="$(MSBuildThisFileDirectory)build.targets" />

</Project> 
```

请注意，此解决方案不限于 .NET Core (MSBuild 15.0+)。我已经使用 MSBuild 14.0 (VS2015) 进行了测试，并且可以正常工作。:)

* * *

# 解决方案 2

我们还可以使用[MSBuild 属性函数](https://msdn.microsoft.com/en-us/library/dd633440.aspx)。它提供了一组有限/列入白名单的 BCL API 方法，并且需要一个外部环境变量来加载自定义程序集。请注意，我们不能`System.Enviornment.SetEnvironmentVariable`在我们的目标/项目文件中使用，因为它不在白名单中（仅`System.Enviornment.GetEnvironmentVariable`在）。因此，它需要在构建解决方案（甚至在 VS 中打开解决方案）之前对环境进行外部更改。从命令行会更容易一些：

```
# cmd
set MSBUILDENABLEALLPROPERTYFUNCTIONS=1 && msbuild my.sln

# PowerShell
$env:MSBUILDENABLEALLPROPERTYFUNCTIONS=1 ; msbuild my.sln

# UnixShell
MSBUILDENABLEALLPROPERTYFUNCTIONS=1 dotnet build my.sln 
```

有关使用、限制及其解决方法的更多详细信息，请参阅[https://blogs.msdn.microsoft.com/visualstudio/2010/04/02/msbuild-property-functions/ 。](https://blogs.msdn.microsoft.com/visualstudio/2010/04/02/msbuild-property-functions/)

# action - 无法通过 AS2 中的 NetStream 方法获取流

> ID：13194337
> 
> 赞同：1
> 
> 时间：2012-11-02T11:28:34.973
> 
> 标签：action, actionscript-2, red5, netstream

这是我的代码：

```
<pre><code>
     var my_nc:NetConnection = new NetConnection();
    my_nc.connect("rtmp://localhost/oflaDemo/");
    var my_ns:NetStream= new NetStream(my_nc);
    my_video.attachVideo(my_ns);
  //my_video.play();
   my_nc.onStatus = function(info){
trace(info.code);
  }
 my_ns.onPlayStatus  = function(info) {
trace("Stream" + info.code);
    //if (info.code == "NetStream.Play.Stop") {
     // trace("flv has finished playing")
  //}
}; 
```

我无法获得 RED5 发布的流。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:31:44.837

从您的代码片段中，甚至不清楚您是要广播网络摄像头还是播放远程流。

如今，客户端的编码也在 ActionScript3 中完成。自 2006 年以来，ActionScript2 不再收到更新。ActionScript3 包含的编解码器和方法甚至在 ActionScript2 中都不可用，因为 AS2 只能运行到 Flash Player SWF8。SWF9 及更高版本只运行 AS3 代码（虽然您仍然可以在其中运行 AS2，但 Flash Player 将只为您提供基于 SWF8 的 API 功能。）当前的 SWF 版本是 SWF11。

请参阅：[http ://en.wikipedia.org/wiki/ActionScript#Timeline_by_ActionScript_version](http://en.wikipedia.org/wiki/ActionScript#Timeline_by_ActionScript_version)

塞巴斯蒂安

# python-sphinx - 在表格内创建目录

> ID：13194341
> 
> 赞同：1
> 
> 时间：2012-11-02T11:28:49.907
> 
> 标签：python-sphinx, restructuredtext, tableofcontents, docutils, toctree

我希望能够在表格中生成目录。例如，它应该有边框并且看起来像这样：

```
.. tabularcolumns:: |p{10.5cm}|p{1.1cm}|p{1.4cm}|p{1.1cm}|
+----------------------------------------------------+-------+---------+-----+
|                                                    | hw1   |  hw2    | hw3 |
+====================================================+=======+=========+=====+
| heading 1                                          |       |         |     |
+----------------------------------------------------+-------+---------+-----+
| heading 2                                          |       |         |     |
+----------------------------------------------------+-------+---------+-----+
| heading 3                                          |       |         |     |
+----------------------------------------------------+-------+---------+-----+ 
```

我想从以下内容自动生成表格：

```
.. toctree::
   :maxdepth: 2

file 1
file 2 
```

输出为 html 和 pdf。

这可以做到吗？还是我必须使用 docutils 解析器或类似的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:13:24.643

你可以编辑 basic.css 给你`toc`一个边框：

第 1 步：从您的 Sphinx 构建目录`cp _build/html/_static/basic.css _static/`

第 2 步：将以下行添加到 basic.css

```
div.toctree-wrapper {
    border-collapse: collapse;
}

div.toctree-wrapper li {
    padding: 1px 8px 1px 5px;
    border:1px solid black; 
} 
```

第 3 步：编辑您的第一个文件，以便在执行时启动构建`make html`

..并且您应该在目录周围看到边框...像这样 ![在此处输入图像描述](../Images/99dde04c3233d345c6bcb551762f3d63.png)

# php - MongoDB：卡在复杂的查询中...更新对象内的数组

> ID：13194344
> 
> 赞同：0
> 
> 时间：2012-11-02T11:28:54.837
> 
> 标签：php, mongodb

我有以下 MongoDB 对象：

```
 {
   "_id": ObjectId("508ec9f413f88da4a590e5ee"),
   "beersAndStouts": {
     "0": {
       "description": "Guinness",
       "price": "4.20"
    },
     "1": {
       "description": "Heineken",
       "price": "4.80"
    },
     "2": {
       "description": "Carlsberg",
       "price": "4.80"
    }
  },
   "snacks": {
     "0": {
       "description": "King cheese and onion",
       "price": "2.20"
    },
     "1": {
       "description": "Tayto cheese and onion",
       "price": "1.80"
    }
  },
   "specialOffers": {
     "0": {
       "description": "Two for one vodka\/red bull",
       "price": "8"
    }
  },
   "uname": "Eamorr",
   "wines": {
     "0": {
       "description": "Cabernet Sauvignon",
       "price": "5.00"
    },
     "1": {
       "description": "Chardonnay",
       "price": "5.00"
    }
  }
} 
```

我有以下 PHP 变量：

```
$category=$_POST['category'];   //"beersAndStouts"
$description=$_POST['columnName'];   //"Description"
$value=$_POST['value'];   //"4.70"
$rowId=$_POST['rowId'];   //2 
```

我想把嘉士伯 (rowId=2) 的价格从 4.80 改成 4.70...

如何运行这样的查询？

这是我到目前为止所拥有的，但我现在真的被困住了......

```
$priceLists=$mongo->eamorr->priceLists;
$priceLists->update(array('uname'=>$uname),array('$set'=>array($category=>array($rowId=>xxx)))); 
```

* * *

更新：这是我使用的代码：

```
$mongo=new Mongo();
$priceLists=$mongo->eamorr->priceLists;

$priceList=$priceLists->findOne(array('uname'=>$uname));

$newCategory=$priceList[$category];
$newCategory[$rowId][$description]=$value;

$priceLists->update(array('uname'=>$uname),array('$set'=>array($category=>$newCategory))); 
```

它不漂亮，但它有效，我不必改变我的结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:23:11.440

为什么需要它成为对象的对象？您可以用对象数组替换它，在这种情况下它会正常工作这是这个想法：

```
{
  "_id" : ObjectId("508ec9f413f88da4a590e7ee"),
  "beersAndStouts" : [{
      "description" : "Guinness",
      "price" : "4.20"
    }, {
      "description" : "Heineken",
      "price" : 6666
    }, {
      "description" : "Carlsberg",
      "price" : "4.80"
    }],
  "snacks" : [{
      "description" : "King cheese and onion",
      "price" : "2.20"
    }, {
      "description" : "Tayto cheese and onion",
      "price" : "1.80"
    }],
  "specialOffers" : [{
      "description" : "Two for one vodka/red bull",
      "price" : "8"
    }],
  "uname" : "Eamorr",
  "wines" : [{
      "description" : "Cabernet Sauvignon",
      "price" : "5.00"
    }, {
      "description" : "Chardonnay",
      "price" : "5.00"
    }]
} 
```

这种情况下的查询很简单：

```
db.test.update({
   "_id" : ObjectId("508ec9f413f88da4a590e7ee"),
   "beersAndStouts.description" : "Carlsberg"
},{
  '$set' : {
  'beersAndStouts.$.price' :  4.70
}
}); 
```

请记住，我更改了 ObjectId！

把它放在你的 mongo shell 中就可以了。

我希望将其调整为 php 是显而易见的。

# oracle - 通过 Oracle Application Express 上的 1 个表单将数据插入到多个表中

> ID：13194345
> 
> 赞同：0
> 
> 时间：2012-11-02T11:28:56.573
> 
> 标签：oracle, oracle-apex

我需要能够将数据插入多个表（艺术家、歌曲、专辑、流派）。我还有包含相关表的 ID 的关系表（艺术家歌曲、专辑歌曲、歌曲类型）（例如 Artistsongs = Artistid、songid）。

如何创建触发器/序列/函数/包以自动将表单中的数据获取到相关表中，以便它们都正确链接。

为模糊性道歉，但我很难知道从哪里开始。

我使用 Oracle XE 作为数据库，使用 Oracle Application Express 作为前端应用程序。

任何答案都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:24:07.020

您可能希望开始使用“创建页面”向导来创建主/从页面。如果您是 Application Express 的新手，您可能只想构建其中的一些来了解它们是如何工作的。另一个不错的选择是带有报告的页面类型表单。

一旦您看到报告如何链接到带有表单的页面，您就可以尝试将一些链接合并到一个报告中。我可以看到您可能希望为艺术家提供一份报告，其中一个链接将您带到他们的歌曲，另一个链接将您带到他们的专辑。专辑报告可能会将您带到另一个歌曲报告。其中每一个也可能链接到一个表格进行编辑。

如果您想在一页中显示所有表格并让它们都可编辑，这并非易事，我不知道从哪里开始。

# zend-framework - 在 SocialEngine 中建立链接

> ID：13194346
> 
> 赞同：1
> 
> 时间：2012-11-02T11:28:57.090
> 
> 标签：zend-framework, socialengine

我想这很简单，但我找不到一个很好的 SocialEngine API 代码，安装文件夹中的 API 文件有点乱……</p>

我想用baseurl创建一个指向页面的链接（比如“/ foo”）。

在 tpl 文件中我可以做*$this->baseUrl('foo')*，但它不适用于**Controller.php**。我已经让控制器使用*Engine_Api::_()*路径调用 API，即我在 .tpl 和*Engine_Api::_()->user()->getViewer(中使用**$this->viewer()调用查看器用户全名**)*在 Controller.php 中，但我在任何地方都找不到调用 baseUrl() 方法的类。

这里有什么帮助吗？^^ 如果有人也有 SE4 的 API codex 链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:25:59.237

`$this->view->baseUrl('foo')`

# android - 为什么列表视图的 setonitemclicklistener 不起作用？

> ID：13194347
> 
> 赞同：1
> 
> 时间：2012-11-02T11:28:57.663
> 
> 标签：android, listview

我无法点击`ListView`。我没有收到 toast 消息。单击项目不起作用。

相关代码：

```
public class MainActivity5 extends ListActivity {

final Context context = this;
private ImageButton homebutton;
JSONArray customers = null;
private ProgressDialog pDialog;
private static String url_search_customer = "http://192.168.1.241/myapp/search.php";
private static final String TAG_SUCCESS = "success";
private static final String TAG_RESULT = "result";
private static final String TAG_ID = "customer_id";
private static final String TAG_F_NAME = "customer_fname";
private static final String TAG_C_PHONE = "customer_phone";
private static String phNumber;
private static String curActivity;
private static String ID;
private static TextView tvid;
JSONArray result = null;
myObject myObj = new myObject();
JSONParser jsonParser = new JSONParser();

EditText TextViewName;
EditText TextViewPhone;
private Button buttonNewMember;
private Button buttonSearchAgain;

SessionManager session;

static final ArrayList<HashMap<String, String>> customerList = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.custom_list_view);

    Intent i = getIntent();
    phNumber = i.getStringExtra("phn_no");
    customerList.clear();
    new SearchCustomer().execute();

    ListView lv = this.getListView();
    OnItemClickListener listener = new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1,
                int position, long id) {
            Toast.makeText(getApplicationContext(), "Long Clicked " , Toast.LENGTH_SHORT).show();
        }
    };
    lv.setOnItemClickListener(listener);
}

class SearchCustomer extends AsyncTask<String, String, String> {
    private boolean successFlag;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(MainActivity5.this);
        pDialog.setMessage("Searching Customer..");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    protected String doInBackground(String... args) {
        String inputPhnNoText = phNumber;

        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("phno", inputPhnNoText));
        JSONObject json = jsonParser.makeHttpRequest(url_search_customer,
                "POST", params);
        Log.d("Search Response", json.toString());
            try {
                int success = json.getInt(TAG_SUCCESS);
                if (success == 1) {
                    successFlag = true;
                    result = json.getJSONArray(TAG_RESULT);
                    for (int i = 0; i < result.length(); i++) {
                        JSONObject c = result.getJSONObject(i);
                        String id = c.getString(TAG_ID);
                        String fname = c.getString(TAG_F_NAME);
                        String phoneNumber = c.getString(TAG_C_PHONE);
                        HashMap<String, String> map = new HashMap<String, String>();
                        map.put(TAG_ID, id);
                        map.put(TAG_F_NAME, fname);
                        map.put(TAG_C_PHONE, phoneNumber);
                        customerList.add(map);
                    }
                } else if (success == 0) {
                    successFlag = false;
                    Intent i = new Intent(getApplicationContext(),
                            MainActivity3.class);
                    i.putExtra("norecords",
                            "No record Found with phone number only ! Try again !!");
                    startActivity(i);
                    pDialog.dismiss();
                    finish();
                }
            } catch (JSONException e) {
                Log.e("log_tag", "Error parsing data " + e.toString());
            }
        return null;
    }

    protected void onPostExecute(String file_url) {
        if (successFlag = true) {
            pDialog.dismiss();
            ListAdapter adapter = new SimpleAdapter(MainActivity5.this,
                    customerList, R.layout.activity_main5, new String[] {
                            TAG_F_NAME, TAG_C_PHONE, TAG_ID }, new int[] {
                            R.id.TextViewName, R.id.TextViewPhone, R.id.TextViewID });
            setListAdapter(adapter);
        } else if(successFlag = false) {

        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:36:44.037

在此行之前的 onCreate() 方法中编写以下代码`new SearchCustomer().execute();`

```
ListView lv = getListView();
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        String selectedID = TAG_ID;
        Intent i = new Intent(getApplicationContext(), Congratulations.class);
        i.putExtra("selectedID", selectedID);
        startActivity(i);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:24:04.360

我认为它在 AsyncTask 类中不起作用。如果条件在 AsyncTask 类中失败，则在 onCreate() 方法中编写 onItemClickListner，它会自动调用其他活动。

如果代码成功，那么您可以在该活动中查看 ListView ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:40:00.447

更改您的代码如下：

```
 lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                Cursor cursorID= (Cursor)lv.getItemAtPosition(position); 
                String selectedID = lv.getString(1); 
                Intent i = new Intent(getApplicationContext(), Congratulations.class);
                i.putExtra("selectedID", selectedID);
                startActivity(i);
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:11:44.910

当您使用 ListActivity 覆盖此方法以获取点击/

```
onListItemClick(android.widget.ListView, android.view.View, int, long) 
```

[http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick(android.widget.ListView](http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick(android.widget.ListView) , android.view.View, int, long)

# java - 对象属性不一样

> ID：13194349
> 
> 赞同：1
> 
> 时间：2012-11-02T11:29:08.523
> 
> 标签：java

这是同一问题的更新，已部分解决。

[Java - 对象属性没有区别](https://stackoverflow.com/questions/13192965/java-object-properties-does-not-differ)

```
int size = 0;
int new = 10;
int default = 100;

ClassList filterList = new ClassList();
filterList.setSize(size);
filterList.setNew(new);
filterList.setDefault(default); 
```

// 现在我正在创建 ClassList 的另一个实例。

```
ClassList newList = ClassList(); 
```

奇怪的是，我的 newList 的值是`size, new and default`，但是当`0, 0 and 0`我试图检查实例是否相同时，值是相同的。

```
if(filterList .equals(newList)){
    Log.d("Is it equal","True");
    } else {
    Log.d("Its Not equal","false");
} 
```

**我弄错了。**

我的 POJO 类很简单，带有 getter 和 setter。

```
public class ClassList{

    private int size;
    private int new;
    private int default;

    public int getPageSize() {
        return size;
    }
    public void setPageSize(int size) {
        this.size = size;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:32:27.817

默认值`int`就是`0`这就是为什么在新创建的实例上`size, new and default`有值`0, 0 and 0`

默认等于比较发生在`==`引用相等上。您将需要覆盖`equals`和`hashcode`

来自[Object#equals的 Java 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)

> Object 类的 equals 方法实现了对象上最有区别的可能等价关系；也就是说，对于任何非空引用值 x 和 y，当且仅当 x 和 y 引用同一个对象（x == y 的值为 true）时，此方法才返回 true。
> 
> 请注意，每当重写该方法时，通常都需要重写 hashCode 方法，以维护 hashCode 方法的一般约定，即相等的对象必须具有相等的哈希码。

**示例实现：**

```
public static class ClassList {

    private int size;
    private int newValue;
    private int defaultValue;

    public int getPageSize() {
        return size;
    }
    public void setPageSize(int size) {
        this.size = size;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null)
            return false;
        if (!(obj instanceof ClassList))
            return false;
        ClassList c = (ClassList) obj;

        return this.size == c.size && this.newValue == c.newValue
                && this.defaultValue == c.defaultValue;
    }

    @Override
    public int hashCode() {
        return Integer.valueOf(size).hashCode()
                + Integer.valueOf(newValue).hashCode()
                + Integer.valueOf(defaultValue).hashCode();
    }
} 
```

*注意：`new`and`default`是 java 中的保留关键字。您不能为保留关键字定义变量名称。*

* * *

参考：

*   [`equals()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)
*   [`hashcode()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)
*   [`toString()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:32:08.840

覆盖ClassList 类中的**equals**和**hashCode方法。**

您可以在 Eclipse 中通过右键单击 java 文件 -> 源 -> 生成 hashCode() 和 equals() 来执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T11:32:10.567

Java 中的对象相等性不是由默认情况下对象字段的状态决定的——每个实例都不同于其他实例。

您必须重写该`equals`方法以使其`true`根据对象状态返回。

正确实施`equals`可能并不那么简单。在 API 文档中查找 [equals 方法](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)以获取实施建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T11:31:20.833

您需要重写 `equals`和`hashcode`自定义相等的方法。

```
public class ClassList{

    private int size;
    private int new;
    private int default;

    public int getPageSize() {
        return size;
    }
    public void setPageSize(int size) {
        this.size = size;
    }
    public boolean equals(Object obj){
         if (obj == null)
             return false;
         else if (obj == this)
             return true;
         else if (obj.getClass() != getClass())
             return false;
         else
             return this.hashCode()==obj.hashCode();
    }
    public int hashCode(){
       return size+new+default;
    }
} 
```

# iphone - iphone开发：当我分析我的应用程序时，我有潜在的泄漏问题

> ID：13194353
> 
> 赞同：0
> 
> 时间：2012-11-02T11:29:16.247
> 
> 标签：iphone, objective-c, ios, memory-leaks, cgimageref

当我分析我的 iPhone 应用程序时，我有一个蓝色箭头警告，上面写着：

```
potential leak of an object stored into pauseImgBg 
```

我只是从图集中裁剪部分图像并将其放入`pauseMenuIV` `imageView`.

```
CGImageRef pauseImgBg = CGImageCreateWithImageInRect([UIImage imageNamed:@"atlas.png"].CGImage, CGRectMake(1, 1, 640.0f, 960.0f));
pauseMenu = [UIImage imageWithData:UIImagePNGRepresentation([UIImage imageWithCGImage:pauseImgBg])];// I have the blue arrow in this line
[pauseMenuIV setImage:pauseMenu]; 
```

可能是什么问题呢 ？
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:33:58.167

你可能需要通过

```
CGImageRelease(pauseImgBg); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:33:28.137

`CGImageCreateWithImageInRect`返回一个保留计数为 +1 的 CGImageRef。所以你必须释放收到的CGImageRef。

```
CGImageRelease(pauseImgBg); 
```

到底。有空时尝试阅读[文档。](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/CFMemoryMgmt.html)它将帮助您隔离这些情况。从文档

> Core Foundation 函数的名称表明您何时拥有返回的对象：
> 
> *   在名称中嵌入“创建”的对象创建函数
> *   名称中嵌入了“复制”的对象复制函数。
> 
> 如果您拥有一个对象，则您有责任在完成该对象后放弃所有权。

并且来自[CGImageCreateWithImageInRect](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGImage/Reference/reference.html)本身的文档

> 生成的图像保留了对原始图像的引用，这意味着您可以在调用此函数后释放原始图像。

# .htaccess - url重写htaccess

> ID：13194357
> 
> 赞同：1
> 
> 时间：2012-11-02T11:29:22.680
> 
> 标签：.htaccess

我有链接：domain.com/activate/ 这很有效，在激活页面中我得到了表格。如果我运行它，我会得到： domain.com/activate/?code=heresomecodething

但这不起作用。我的原始网址是：domain.com/index.php?p=activate&code=heresomecodething 我希望我像这样工作：domain.com/activate/code=heresomecodething 我该怎么做？

我的 htaccess：

```
 RewriteEngine On
RewriteRule ^(.*)/$ index.php?p=$1 [L] 
```

我希望你能理解我。

谢谢！- 马林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:09:12.877

尝试：

```
RewriteEngine On
RewriteRule ^([^/]+)/(.*)$ /index.php?p=$1&$2 [L,NE] 
```

您要提交的 URI 看起来像`/activate/code=heresomecodething`，因此`([^/]+)`匹配 the`activate`和`(.*)`匹配 the `code=heresomecodething`，两者都通过`$1`and进行反向引用`$2`：

```
/index.php?p=$1&$2 
```

将会：

```
/index.php?p=activate&code=heresomecodething 
```

此规则**仅**采用看起来像的 URI，`/activate/code=heresomecodething`并在内部重写（在幕后/浏览器完全不受影响）带有查询字符串的 URI。

# asp.net - 'Microsoft.Jet.OLEDB.4.0' 提供程序未在本地计算机上注册

> ID：13194358
> 
> 赞同：1
> 
> 时间：2012-11-02T11:29:23.783
> 
> 标签：asp.net, excel, oledbconnection

在窗口服务器 2008 R2 上上传我的 asp.net 应用程序后出现以下错误

> 'Microsoft.Jet.OLEDB.4.0' 提供程序未在本地计算机上注册。

我已经使用下面的 oleDbConnection 类来读取 excel 文件

```
OleDbConnection excelConn = null;

            try
            {
                if (System.IO.Path.GetExtension(fileName) == ".xlsx")
                {

                    excelConn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fileName + "; Extended Properties='Excel 8.0;HDR=Yes;IMEX=1'");
                }
                else
                {
                    excelConn = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + fileName + "; Extended Properties='Excel 8.0;HDR=Yes;IMEX=1'");
                }

                excelConn.Open();
                DataTable dt = new DataTable();

                dt = excelConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null); 
```

搜索谷歌后，我发现我需要安装**[2007 Office System 驱动程序](http://www.microsoft.com/en-us/download/details.aspx?id=23734)** ，所以我也尝试过，但是我得到了同样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:34:26.487

昨天，我遇到了同样的问题。

按照以下步骤解决了我的问题：-

1.  安装了这个 64 位驱动程序[Microsoft Access Database Engine 2010 Redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=13255)
2.  在应用程序池 --> 属性上，设置`Enable 32 bit`为`True`和使用`Classic`池。
3.  改为`Provider=Microsoft.Jet.OLEDB.4.0`“ `Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fileName + "; Extended Properties='Excel 8.0;HDR=No;IMEX=1'`”
4.  `target platform`通过设置为来构建您的项目`Any CPU`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T12:53:14.720

我从@siva 那里得到了解决方案，非常感谢他救了我的命。

但是我想在下面分享屏幕截图，以便其他人可以看到需要更改该设置的位置

无论您为应用程序使用了什么应用程序池，从 IIS 的应用程序池中选择它，然后右键单击它并打开高级设置

![在此处输入图像描述](../Images/4249604c78a95c32bffc081adb3a6265.png)

并按照@siva 在他的回答中提到的步骤

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:10:18.983

Microsoft.Jet.OLEDB.4.0 提供程序未在本地计算机上注册背景

Amphis Customer 设计用于运行 Windows XP、Windows Vista、Windows 7 或 Windows 8 Pro 的 32 位或 64 位 PC，但在 Windows XP 64 位（以及可能的其他操作系统）上，某些 Microsoft OLEDB DLL 可能具有未注册。

***解决方案 1 :p***

解决方案是手动注册这些 DLL。

转到开始->运行并键入 cmd 这将启动命令提示符（也可从开始->程序->附件->命令提示符获得）

键入 cd .. 并按回车 键入 cd .. 并再次按回车（继续执行此操作直到提示显示 :> ）

现在你需要去一个特殊的文件夹，它可能是 c:\windows\system32 或者它可能是 c:\winnt\system32 或者它可能是 c:\windows\sysWOW64 尝试输入其中的每一个，例如 cd c:\windows\ sysWOW64（如果它说系统找不到指定的路径，请尝试下一个） cd c:\windows\system32 cd c:\winnt\system32 当其中一个不会导致错误时，停止，您已经找到正确的文件夹。

现在您需要通过键入这些命令并在每个命令后按回车来注册 OLE DB 4.0 DLL

regsvr32 Msjetoledb40.dll regsvr32 Msjet40.dll regsvr32 Mswstr10.dll regsvr32 Msjter40.dll regsvr32 Msjint40.dll

***解决方案 2 :p***

只需右键单击项目 -> 属性 -> 构建 -> 从目标任何 cpu 更改为目标 x86

-> f5，它会工作*

# expressionengine - 如何仅在表达式引擎中输出分页“P”和数字

> ID：13194367
> 
> 赞同：1
> 
> 时间：2012-11-02T11:30:11.537
> 
> 标签：expressionengine

我对`path=group/template`生成额外域的变量有疑问。

即：hxxp://domain.com/hxxp://domain.com/template_group/template/

分页链接也呈现为：

hxxp://domain.com/hxxp://domain.com/template_group/template/P5

我正在使用 Multi Lang Alt 方法（http://expressionengine.com/wiki/Multi_language_site_alternative/#Slight_modification_for_EE2），我认为这可能与问题有关。

我可以找到路径的解决方法，但我不知道如何处理分页链接。如果可以选择只返回“Pxxx”，我可以绕过这个问题。

有人可以在这一点上提供帮助吗？

编辑 ：

在 /index.php 我有：

```
$assign_to_config['site_index'] = 'http://domain.com/fr/';
    $assign_to_config['site_404'] = 'http://domain.com/fr/404/';
    $assign_to_config['global_vars'] = array(
        "cc"            => "", // added to custom fields in templates
        "country_code"  => "fr",
        "language"      => "french"
    ); 
```

在 /en/index.php 我有：

```
$assign_to_config['site_index'] = 'http://domain.com/en/';
$assign_to_config['site_404'] = 'http://domain.com/en/404/';
$assign_to_config['global_vars'] = array(
    "cc"            => "-en", // added to custom fields in templates
    "country_code"  => "en",
    "language"      => "english"
); 
```

在 /fr/index.php 我有：

```
$assign_to_config['site_index'] = 'http://domain.com/fr/';
$assign_to_config['site_404'] = 'http://domain.com/fr/404/';
$assign_to_config['global_vars'] = array(
    "cc"            => "", // added to custom fields in templates
    "country_code"  => "fr",
    "language"      => "french"
); 
```

管理员 > 常规配置 > 站点的索引页为空白

在管理员 > 常规配置 > 根目录的 URL 是：[http ://domain.com/](http://domain.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:00:28.963

问题是由于您的覆盖为`site_index`. `index.php`如果您使用 mod_rewrite 隐藏它，那通常应该是或空白。完整的 URL 应保存为`site_url`. 如果您更改这些键，它很有可能会对其进行排序：

```
$assign_to_config['site_url'] = 'http://domain.com/en/'; 
```

EE 通过连接`site_url`和生成 URL `site_index`，然后在末尾添加路径段。您的 URL 和索引值都包含域，因此`{path}`输出很奇怪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:53:44.003

唔。我怀疑这是一个变量，您已将其设置为特定于语言的 index.php 版本（例如，您放置在 /en 中的 index.php 的副本）。您可以在 $assign_to_config['global_vars'] 下发布您在 index.php（站点根目录和 /en/index.php 中）中的内容（这是您设置的多语言替代方法） ? 似乎有一个变量与控制面板中声明为站点根目录的变量不一致，这导致路径变量被完全视为本地链接，而不是来自的正确链接域的根。

您在管理 > 常规配置 > 站点索引页名称下的控制面板中有什么？管理员 > 常规配置 > 站点根目录的 URL 中有什么？

# php - SOAP-ERROR 客户端：使用身份验证错误解析 WSDL

> ID：13194375
> 
> 赞同：2
> 
> 时间：2012-11-02T11:30:42.170
> 
> 标签：php, ssl, wsdl, basic-authentication, soap-client

我尝试编写我的 PHP Client Soap，它使用 ASP.Net Web 服务，并通过身份验证进行保护。我的PHP代码是：

```
<?php
ini_set("soap.wsdl_cache_enabled", "0");  
try {
    $client = new SoapClient("https://www.webservicexxx.com:60443/service.asmx?WSDL", array('location' => 'https://webservicexxxcom:60443/service.asmx',
          'login' => "myLogin", 'password' => "myPAssword")); 
} catch (SoapFault $e) {
    echo $e;
}?> 
```

我收到此错误消息：

```
 SoapFault exception: [WSDL] SOAP-ERROR: Parsing WSDL: Couldn't load from 'https://www.webservicexxx.com:60443/service.asmx?WSDL' : failed to load external entity "https://www.webservicexx.com:60443/service.asmx?WSDL" in /var/www/webservice2/soap-client.php:5 Stack trace: #0 /var/www/webservice2/soap-client.php(5): SoapClient->SoapClient('https://www.web...', Array) #1 {main} 
```

知道我在 ubuntu 服务器上的 php.ini 上设置了启用此扩展：

```
extension = php_openssl.dll
extension = php_soap.dll
extension = php_curl.dll 
```

当我尝试使用身份验证在同一台服务器上解析另一个 php web 服务时，它可以工作：

```
try { 
    $client = new SoapClient("https://xx.xx.xx.xx:443/webservice1/notificationManager.wsdl", array('location' => 'http://xx.xx.xx.xx./webservice1/soap-server.php',
          'login' => "myLogin", 'password' => "myPass")); 
} catch (SoapFault $exception) { 
    echo $exception;       
} 
```

为什么我不能从第一个 web 服务得到响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-02T19:39:08.110

我使用[nusoap](http://sourceforge.net/projects/nusoap/)解决了这个问题。

```
$params = array(
  "param" => "value"
);

$soap_client = new nusoap_client($wsdl_url, true);
$soap_client->setCredentials(USER_SERVICE, PASS_SERVICE, 'basic');
$soap_client->soap_defencoding = 'UTF-8'; //Fix encode erro, if you need
$soap_return = $soap_client->call("method_name", $params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:08:42.047

> 为什么我不能从第一个 web 服务得到响应？

因为它未能加载外部实体

```
https://www.webservicexx.com:60443/service.asmx?WSDL 
```

确保 WSDL 可被 PHP 访问和访问，`SoapClient`并且您应该不再有问题。

*编辑：*根据您的评论，WSDL URL 需要 HTTP 身份验证。PHP只支持使用soap 端点而*不是*WSDL http 请求的`SoapClient`这种身份验证。这就是为什么您会看到它失败的错误。这与：

 **   [带有基本身份验证的 WSDL 到 PHP](https://stackoverflow.com/q/10219463/367456)

解决方案是请求您自己的 WSDL 文件并将 SoapClient 指向它的副本。有关更多信息，请参阅链接的问题。*

# actionscript-3 - 如何在as3中单击鼠标时获取骨骼名称

> ID：13194379
> 
> 赞同：0
> 
> 时间：2012-11-02T11:30:48.520
> 
> 标签：actionscript-3, flash

谁能告诉我如何在（例如）鼠标单击时获取骨骼（在骨架中）的名称。或者至少我如何通过 as3 代码获取骨骼列表。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:54:52.363

你似乎已经有了一个电枢链接。它有一个 rootJoint 属性，该属性返回一个 IKJoint 对象。然后，您通过正常的 for() 循环递归地通过其子代：

```
var rj:IKJoint=yourArmature.rootJoint;
for (i=rj.numChildren-1;i>=0;i--) {
    trace(rj.getChildAt(i).bone.name);
} 
```

但是，IK 通常是一棵树，所以这样你只会得到一层骨头，所以你很可能需要走得更深。因此，创建一个递归函数，在 IKJoint 有子节点时调用自身。

```
function getBones(j:IKJoint):void {
    if (j==null) return; // no joint. Seems possible
    if (j.numChildren==0) return;
    for (i=j.numChildren-1;i>=0;i--) {
        var tj:IKJoint=j.getChildAt(i);
        var tb:IKBone=tj.bone;
        if ((tj==tb.headJoint)||(j==tb.headJoint)) getBones(tb.tailJoint);
            else getBones(tb.headJoint); 
        // parse the bone "tb" here
    }
} 
```

然后你从根关节调用它，并将你的列表放在一系列解析中。我希望您不会在单击鼠标时获得骨骼，因为这些实际上是不可见的，您只能获得带有 IK 骨架的 MovieClip 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:47:29.353

我假设您正在寻找 IKManager 类：[IKManager](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/ik/IKManager.html)

例如像这样的东西（跟踪电枢列表）：

```
for (var i=0; i < IKManager.numArmatures; i++){
    trace(IKManager.getArmatureAt(i).name);
} 
```

# python-3.3 - 实例化十进制类

> ID：13194384
> 
> 赞同：6
> 
> 时间：2012-11-02T11:31:01.047
> 
> 标签：python-3.3

我在十进制模块中发现了一个奇怪的行为。Decimal 类的“签名”是：

```
Decimal(value='0', context=None) 
```

所以，我想我可以做类似的事情：`Decimal('3', None)`. 但是这段代码在 python3.3 中引发了 TypeError 异常，但在 python2.7 中没有。

在我的调查中，我尝试使用 pdb: 进行调试`pdb.set_trace("Decimal('3', None)")`，但什么也没发生！只要我键入`s`相同的异常就会引发。

有人可以解释这些行为的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T15:24:59.527

我可以确认 Python 3.3 的行为。它以某种方式检测到您传递了`None`作为上下文并且它不喜欢它（即使它被记录为默认值）。

```
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:57:17) [MSC v.1600 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import decimal
>>> decimal.Decimal('3', None)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: optional argument must be a context
>>> decimal.Decimal('3')
Decimal('3') 
```

**更新：**但它适用于 3.2.3

```
Python 3.2.3 (default, Apr 11 2012, 07:12:16) [MSC v.1500 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import decimal
>>> decimal.Decimal('3', None)
Decimal('3')
>>> 
```

**更新：原因可以在文档中找到...**

[Python 3.3 的新增功能](http://docs.python.org/3.3/whatsnew/3.3.html#decimal)说：

> 十进制
> 
> 问题 7652 - 集成快速本机十进制算术。Stefan Krah 编写的 C 模块和 libmpdec。

比较`decimal.py`文件时，它们一开始可能看起来相同，但 Python 3.3 版本几乎在末尾包含以下代码：

```
try:
    import _decimal
except ImportError:
    pass
else:
    s1 = set(dir())
    s2 = set(dir(_decimal))
    for name in s1 - s2:
        del globals()[name]
    del s1, s2, name
    from _decimal import * 
```

...而较旧的 Python 3.2 没有。它说如果`_decimal`可以导入二进制实现，`decimal.py`则忽略旧的实现。并且二进制模块无法使用 Python 代码调试器进行调试。

问题是观察到的行为是否不应该被视为错误。

# jquery - 循环运行帖子时出错？

> ID：13194388
> 
> 赞同：0
> 
> 时间：2012-11-02T11:31:21.933
> 
> 标签：jquery, post, loops

方法

```
$.post("Dashboard/UserValuationGet", {}, function (dataSet1) 
```

只在帖子之后运行

```
$.post("Dashboard/UsersGet", {}, function (dataSet)) 
```

执行完毕。

代码将在循环中传递我的方法几次，并且只有在执行 post 方法之后才会传递最后的次数。

问题在于我的本地存储没有改变，所以它会在同一个变量输入上运行几次 post 方法。

```
$(document).ready(function () {

    //Show diffrent menu for Valuator and Aministrator
    getRoleMenu();

    $.post("Dashboard/UsersGet", {}, function (dataSet) {
        var obj = jQuery.parseJSON(dataSet);
        var table = obj.Table;
        var countUsers = 0;
        lis = '';
        for (var i = 0, len = table.length; i < len; i++) {
            var array = table[i];
            if (array.Active == 1) {
                var name = array.Name;
                valCount = 0;

                $.post("Dashboard/UserValuationGet", {}, function (dataSet1) {

                    var obj1 = jQuery.parseJSON(dataSet1);
                    var table1 = obj1.Table;
                    localStorage.setItem("valCount", table1.length.toString());

                });
                valCount = localStorage.getItem("valCount");

                lis += '<li class="subitem1"><a href="#" onclick="return ShowValuationsAssigned()">' + name + '<span>' + valCount + '</span></a></li>';                    

                countUsers = countUsers + 1;
            }

        }
        $("#UserList").empty().html(lis);
        $('#userCount').html(countUsers.toString());

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:59:09.423

您不是在循环的每一遍中递增`valCount`计数器或`localStorage.valCount` in，而是将它们设置为当前遍的值。此外，您在当前 ajax 请求完成之前将存储中的计数插入到 html 中。AJAX 是异步的。

您的循环需要看起来像这样：

```
for (var i = 0, len = table.length; i < len; i++) {
    var array = table[i];
    if (array.Active == 1) {
        var name = array.Name;

        $.post("Dashboard/UserValuationGet", {}, function(dataSet1) {
            /* get the current count*/
            var valCount = localStorage.getItem("valCount");
            /* no need to use $.parseJSon, just set dataType of request */
            var obj1 = /*jQuery.parseJSON(dataSet1)*/ dataSet1;
            var table1 = obj1.Table;
            /* add this response to count*/
            valCount+=table1.length/*.toString()*/
            localStorage.setItem("valCount",valCount );
            /* need this inside the ajax complete callback or count won't have been updated*/
            lis += '<li class="subitem1"><a href="#" onclick="return ShowValuationsAssigned()">' + name + '<span>' + valCount + '</span></a></li>';

        },'json');/* last argument of $.post is dataType*/

        countUsers = countUsers + 1;
    }
} 
```

# java - 如何使用持久化数据库（H2 in-memory）两次以上

> ID：13194391
> 
> 赞同：0
> 
> 时间：2012-11-02T11:31:29.793
> 
> 标签：java, junit, h2

最初我试图使用 EntityManager 将数据持久化到 H2 内存数据库中。坚持是成功的。但后来当我试图将数据提取到 3 个不同的测试用例中时，第一个测试用例成功提取，第二个和第三个测试用例抛出空指针异常。在这里，我给出了我的代码骨架，它将帮助您理解。

```
 Class Testclass
     {
     @PersistenContext
     EntityManager em;

     @Transactional
     @Before
     public void beforeEachTest
     {
     ClassName obj=new ClassName();
         obj.setName("name");
           em.persist(obj);
      }

     @Test
     @Transactional
      public void testMethod1()
          {
    //fetching values 
       obj.getName();
            }

       @Test
        @Transactional
        public void testMethod2()
        {
         obj.getName();
         }

       @Test
        @Transactional
        public void testMethod3()
        {
         obj.getName();
         }
      } 
```

在上面的骨架代码中，在方法“beforeEachTest”中，我试图持久化数据。它是成功的。然后我试图在所有 3 种测试方法中获取数据。但第一个是成功的，第二个和第三个测试方法失败并返回 nullPointerException。请给我一个解决方案来解决这个问题。

# ios - 邀请、打开图表和应用商店的正确设置是什么？

> ID：13194394
> 
> 赞同：2
> 
> 时间：2012-11-02T11:31:48.253
> 
> 标签：ios, app-store, facebook-opengraph, facebook-apps, invitation

情况是这样的：

*   我想使用 facebook sdk 让我的 iOS 应用程序的用户向他们的 facebook 朋友发送邀请。我希望这些邀请将受邀的 facebook 用户定向到应用程序的应用商店页面。Facebook 邀请工作正常，但我无法找到适当的文档，以便在受邀用户单击邀请时将其引导到特定位置。现在它们被发送到***siteurl/?request_ids=1234567890&ref=notif&app_request_type=user_to_user***，其中 siteurl 是我在 facebook 应用程序设置页面上设置的***站点 URL （在具有 Facebook 登录的网站下）。****我尝试在params 字典*中包含一堆东西，例如*重定向 uri*、*目标 url*、*链接*、*href*，但似乎没有改变用户被定向到的位置。

*   然后，我还想实现一些开放图形功能，以便应用程序的用户可以将他们在应用程序中所做的某些事情作为操作发布在他们的 Facebook 墙上。为此，我需要将***站点 URL***更改为托管我打开的图形页面的服务器。

*   如果这很重要，我还允许用户使用他们的 Facebook 帐户登录。

我没有找到任何关于什么是什么、我可以在*params*字典中包含什么以及如何控制已发送邀请的行为的任何适当文档，我真的可以使用一些帮助来解决问题。请注意，该应用尚未在应用商店中，因此我没有商店 ID。

这就是我的 Facebook 邀请代码：

```
// FACEBOOK INVITATION REQUEST
-(void)sendFBInvitationRequest
{    
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"Come join me!",  @"message",
                                   @"http://www.stackoverflow.com", @"redirect_uri",
                                   nil];

    AppDelegate *app_delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    // MAKE SURE THE USER IS LOGGED IN
    [app_delegate openFBSessionWithAllowLoginUI:YES];

    NSLog(@"YOU SHOULD SEE THE DIALOG NOW!");
    // AND THEN SEND THE FB REQUEST
    [app_delegate.facebook dialog:@"apprequests"
                        andParams:params
                      andDelegate:self];
    NSLog(@"SENDING REQUEST");
    NSLog(@"%@", [params description]); 
} 
```

# deployment - JavaFx 清理和构建错误“未经检查或不安全的操作”。

> ID：13194396
> 
> 赞同：0
> 
> 时间：2012-11-02T11:31:51.857
> 
> 标签：deployment, build, javafx

我使用 JavaFx 创建了一个应用程序，当我使用 Clean and Build 构建项目时，它向我展示了

> 注意：.. *path* ..\DemoScreenShot.java 使用未经检查或不安全的操作。
> 
> 注意：使用 -Xlint:unchecked 重新编译以获取详细信息。

在dest文件夹生成的可执行jar文件也显示错误：`"Exception while running Application".`

代码：

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package demoscreenshot;

import Stages.LoginStage;
import elements.ButtonPanel;
import elements.CalenderRegion;
import elements.CalenderTag;
import elements.CloseBox;
import elements.ConfirmBox;
import elements.NotificationDialog;
import elements.TaskSelectionPanel;
import elements.TimerElement;
import elements.TrackingPanel;
import java.io.FileNotFoundException;
import java.util.Date;
import java.util.Iterator;
import javafx.animation.Animation;
import javafx.animation.KeyFrame;
import javafx.animation.Timeline;
import javafx.application.Application;
import javafx.application.Platform;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.concurrent.WorkerStateEvent;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.ProgressIndicator;
import javafx.scene.control.Separator;
import javafx.scene.image.ImageView;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.scene.shape.Rectangle;
import javafx.stage.Screen;
import javafx.stage.Stage;
import javafx.stage.WindowEvent;
import javafx.util.Duration;
import listener.ListenerController;
import org.codehaus.jettison.json.JSONArray;
import org.codehaus.jettison.json.JSONException;
import tasks.DetectionService;
import tasks.SnapshotTask;
import tasks.TaskDetailsService;

public class DemoScreenShot extends Application {

    Stage primaryStage;
    LoginStage loginStage;
    TaskDetailsService taskService;
    VBox selectionPanelBox;
    HBox buttonPanelBox, piHBox;
    TaskSelectionPanel selectionPanel;
    ButtonPanel buttonPanel;
    ProgressIndicator pi;
    Rectangle screenBounds;
    NotificationDialog dialogStage;
    Timeline timeline;
    Timeline snapshotTimeLine;
    Date lastDialogTime;
    TrackingPanel trackingPanel;
    VBox trackingPanelBox;
    DetectionService detectionService;
    TimerElement timerLabel;
    Label idleLabel;

    @Override
    public void start(final Stage stage) throws FileNotFoundException {

        screenBounds = new Rectangle(
                Screen.getPrimary().getBounds().getWidth(),
                Screen.getPrimary().getBounds().getHeight());

        loginStage = new LoginStage();

        this.primaryStage = loginStage.getLoginStage();

        primaryStage.showAndWait();

        if (loginStage.isLoginSuccessful()) {

            primaryStage = stage;
            primaryStage.setWidth(300);
            primaryStage.setHeight(600);

            final BorderPane borderPane = new BorderPane();

            final VBox mainVBox = new VBox();
            mainVBox.setAlignment(Pos.CENTER);
            mainVBox.setMaxWidth(280);
            mainVBox.setSpacing(15);
            mainVBox.setPadding(new Insets(5, 5, 5, 5));

            pi = new ProgressIndicator(-1);
            pi.setMaxWidth(50);
            piHBox = new HBox();
            piHBox.setAlignment(Pos.CENTER);
            piHBox.getChildren().add(pi);

            //mainVBox.getChildren().add(pi);

            selectionPanel = new TaskSelectionPanel();
            selectionPanelBox = selectionPanel.getTaskSelectionBox();
            selectionPanelBox.setVisible(false);

            trackingPanel = new TrackingPanel();
            trackingPanelBox = trackingPanel.getTrackingPanelBox();
            trackingPanelBox.setVisible(false);

            final GridPane trackSectionGridPane = new GridPane();
            trackSectionGridPane.setAlignment(Pos.CENTER);
            trackSectionGridPane.setPadding(new Insets(5, 5, 5, 5));

            trackSectionGridPane.add(piHBox, 0, 1);
            trackSectionGridPane.add(selectionPanelBox, 0, 1);
            trackSectionGridPane.add(trackingPanelBox, 0, 1);

            timerLabel = new TimerElement();
            idleLabel = new Label();
            HBox timerHBox = new HBox();
            timerHBox.setMaxWidth(170);

            timerHBox.setAlignment(Pos.CENTER_RIGHT);
            timerHBox.getChildren().add(timerLabel);

            mainVBox.getChildren().add(idleLabel);
            mainVBox.getChildren().add(timerHBox);
            mainVBox.getChildren().add(new Separator());
            mainVBox.getChildren().add(trackSectionGridPane);

            buttonPanel = new ButtonPanel();
            buttonPanelBox = buttonPanel.getButtonPanelBox();

            mainVBox.getChildren().add(new Separator());
            mainVBox.getChildren().add(buttonPanelBox);

            taskService = new TaskDetailsService();
            taskService.setUserid(loginStage.loginService.getUserid());
            taskService.setOnSucceeded(new EventHandler<WorkerStateEvent>() {
                @Override
                public void handle(WorkerStateEvent t) {
                    if (taskService.getData().toString().equals("{}")) {
                        piHBox.setVisible(false);
                        Label notWork = new Label("No work is available for You.");
                        notWork.setStyle("-fx-text-fill: red;");
                        trackSectionGridPane.add(notWork, 0, 1);
                    } else {
                        noWorkSelectedPolling();
                        setDataToCombobox();
                        selectionPanelBox.setVisible(true);
                    }
                }
            });

            taskService.start();

            buttonPanel.startButton.setOnAction(new EventHandler<ActionEvent>() {
                @Override
                public void handle(ActionEvent t) {
                    //selectionPanelBox.setVisible(false);

                    trackingPanel.setProject(selectionPanel.projectComboBox.getValue().toString());
                    trackingPanel.setTask(selectionPanel.taskComboBox.getValue().toString());
                    trackingPanel.setSubTask(selectionPanel.subTaskComboBox.getValue().toString());
                    selectionPanelBox.setVisible(false);
                    trackingPanelBox.setVisible(true);
                    buttonPanel.startButton.setDisable(true);
                    buttonPanel.stopButton.setDisable(false);
                    buttonPanel.logoutButton.setDisable(true);
                    idleLabel.setText("");

                    if (dialogStage != null) {
                        dialogStage.close();
                    }
                    if (timeline != null) {
                        timeline.stop();
                    }

                    //Start activites
                    startTracking();
                }
            });

            buttonPanel.stopButton.setOnAction(new EventHandler<ActionEvent>() {
                @Override
                public void handle(ActionEvent t) {
                    //Stop activites
                    sendScreenShotData();
                    stopTracking();
                }
            });

            buttonPanel.logoutButton.setOnAction(new EventHandler<ActionEvent>() {
                @Override
                public void handle(ActionEvent t) {

                    primaryStage.setOpacity(0);
                    ConfirmBox confirmBox = new elements.ConfirmBox();
                    confirmBox.getConfirmStage().showAndWait();

                    if (confirmBox.getIsCofirmed()) {
                        //Stop everything
                        loginStage.loginService.doLogout();
                        Platform.exit();
                        primaryStage.close();
                    } else {
                        primaryStage.setOpacity(1);
                    }

                }
            });

            CalenderTag calenderTag = new CalenderTag();
            HBox calenderBox = calenderTag.getCalenderBox();

            Scene scene2 = new Scene(new CalenderRegion("http://192.168.1.110:8080/ProjectManagement/"));
            final Stage stage1 = new Stage();
            stage1.setScene(scene2);
            calenderTag.calendarLink.setOnAction(new EventHandler<ActionEvent>() {
                @Override
                public void handle(ActionEvent t) {
                    System.out.println("Open Calender");
                    if (stage1.isShowing()) {
                        stage1.hide();
                        stage1.close();
                    } else {
                        stage1.show();
                        primaryStage.setX(screenBounds.getWidth() - primaryStage.getWidth() - 50);
                    }
                }
            });

            mainVBox.getChildren().add(calenderBox);

//            Button addTask = new Button("Add Task");
//
//            mainVBox.getChildren().add(addTask);

            ImageView closeButtonImageView = new CloseBox().getCloseBoxImageView();
            closeButtonImageView.setOnMouseClicked(new EventHandler<MouseEvent>() {
                @Override
                public void handle(MouseEvent t) {

                    primaryStage.setOpacity(0);

                    ConfirmBox confirmBox = new elements.ConfirmBox();
                    confirmBox.getConfirmStage().showAndWait();

                    if (confirmBox.getIsCofirmed()) {
                        if (buttonPanel.startButton.isDisable()) {
                            sendScreenShotData();
                            stopTracking();
                        }
                        loginStage.loginService.doLogout();
                        Platform.exit();
                        primaryStage.close();
                    } else {
                        primaryStage.setOpacity(1);
                    }
                }
            });

            HBox hBox = new HBox();
            hBox.setStyle("-fx-background-color: #5588bb;");
            hBox.setMaxHeight(25);
            hBox.setMinHeight(25);
            hBox.setAlignment(Pos.TOP_RIGHT);
            hBox.getChildren().add(closeButtonImageView);

            borderPane.setCenter(mainVBox);
            borderPane.setTop(hBox);

            Scene scene = new Scene(borderPane);
            scene.getStylesheets().add("css/myCSS.css");

            primaryStage.setOnCloseRequest(
                    new EventHandler<WindowEvent>() {
                        @Override
                        public void handle(final WindowEvent event) {

                            primaryStage.setOpacity(0);

                            ConfirmBox confirmBox = new elements.ConfirmBox();
                            confirmBox.getConfirmStage().showAndWait();

                            if (confirmBox.getIsCofirmed()) {
                                if (buttonPanel.startButton.isDisable()) {
                                    sendScreenShotData();
                                    stopTracking();
                                }
                                loginStage.loginService.doLogout();
                                Platform.exit();
                                primaryStage.close();
                            } else {
                                primaryStage.setOpacity(1);
                                event.consume();
                            }

                        }
                    });

            primaryStage.setScene(scene);
            primaryStage.toFront();
            primaryStage.show();
        }
    }

    public static void main(String[] args) {
        launch(args);
    }

    public void setDataToCombobox() {

        ObservableList<String> projectOptions = FXCollections.observableArrayList();

        Iterator keys = taskService.getData().keys();
        while (keys.hasNext()) {
            String project = (String) keys.next();
            projectOptions.add(project);
        }
        selectionPanel.setData(taskService.getData());
        selectionPanel.projectComboBox.setItems(projectOptions);
        selectionPanel.projectComboBox.getSelectionModel().selectedItemProperty().addListener(new ChangeListener<String>() {
            @Override
            public void changed(ObservableValue<? extends String> arg0, String arg1, String selectedproject) {
                if (selectedproject != null) {

                    if (taskService.getData() == null) {
                        System.out.println("no data.. ");
                    } else {
                        try {
                            ObservableList<String> taskOptions = FXCollections.observableArrayList();

                            Iterator keys = taskService.getData().getJSONObject(selectedproject).keys();
                            while (keys.hasNext()) {
                                String task = (String) keys.next();
                                taskOptions.add(task);
                            }
                            selectionPanel.taskComboBox.setItems(taskOptions);
                            dialogStage.setTaskLeftToSelect("Task details");
                            selectionPanel.taskComboBox.setPromptText("Select your Task");
                            selectionPanel.taskComboBox.show();
                            selectionPanel.taskComboBox.hide();
                            selectionPanel.taskComboBox.requestFocus();
                        } catch (JSONException ex) {
                            ex.printStackTrace();
                        }

                    }
                }
            }
        });

        selectionPanel.taskComboBox.getSelectionModel().selectedItemProperty().addListener(new ChangeListener<String>() {
            @Override
            public void changed(ObservableValue<? extends String> arg0, String arg1, String selectedtask) {

                if (selectedtask != null) {
                    if (taskService.getData() == null) {
                        System.out.println("no data.. ");
                    } else {
                        try {
                            JSONArray subtasks = taskService.getData().getJSONObject(selectionPanel.projectComboBox.getValue().toString()).getJSONArray(selectedtask);
                            ObservableList<String> subTaskOptions = FXCollections.observableArrayList();
                            for (int i = 0; i < subtasks.length(); i++) {
                                String subtask = subtasks.get(i).toString();
                                if (subtask.equals("")) {
                                    subTaskOptions.add(selectionPanel.taskComboBox.getValue().toString());
                                } else {
                                    subTaskOptions.add(subtask);
                                }

                            }

                            selectionPanel.subTaskComboBox.setItems(subTaskOptions);
                            dialogStage.setTaskLeftToSelect("Sub task details");
                            selectionPanel.subTaskComboBox.setPromptText("Select your subtask");
                            selectionPanel.subTaskComboBox.show();
                            selectionPanel.subTaskComboBox.hide();
                            selectionPanel.subTaskComboBox.requestFocus();
                        } catch (JSONException ex) {
                            ex.printStackTrace();
                        }

                    }
                }
            }
        });

        selectionPanel.subTaskComboBox.getSelectionModel().selectedItemProperty().addListener(new ChangeListener<String>() {
            @Override
            public void changed(ObservableValue<? extends String> arg0, String arg1, String selectedproject) {
                if (selectedproject != null) {
                    if (taskService.getData() == null) {
                        System.out.println("no data.. ");
                    } else {
                        dialogStage.setTaskLeftToSelect("Project details");

                        buttonPanel.startButton.setDisable(false);
                        buttonPanel.startButton.requestFocus();
                    }
                }
            }
        });
        piHBox.setVisible(false);

        selectionPanel.projectComboBox.show();
        selectionPanel.projectComboBox.hide();
        System.out.println("Done");
    }

    public void startTracking() {

        timerLabel.startTimer();

        startPollingForInactivity();

        //Send screenshots and details
        takeSnapShots();
    }

    public void stopTracking() {

        selectionPanelBox.setVisible(true);
        trackingPanelBox.setVisible(false);
        buttonPanel.startButton.setDisable(false);
        buttonPanel.stopButton.setDisable(true);
        buttonPanel.logoutButton.setDisable(false);

        timerLabel.stopTimer();
        noWorkSelectedPolling();

        //stop sending details

        //Stop sending screenshots
        System.out.println("Key: " + ListenerController.getNumberOfKeyPresses() + ", Mouse: " + ListenerController.getNumberOfMouseClick() + ", Time: " + timerLabel.getTimeMinute());
        detectionService.setStop(true);
        snapshotTimeLine.stop();
        ListenerController.stopAllListeners();

    }

    private void noWorkSelectedPolling() {

        //SHOW DIALOG INITIALLY
        showDialog();
        lastDialogTime = new Date();
        //set task selected to false
        dialogStage.setIsOkPressed(false);
        if (timeline == null) {
            timeline = new Timeline(new KeyFrame(Duration.seconds(0.5), new EventHandler<ActionEvent>() {
                @Override
                public void handle(ActionEvent event) {

                    if (dialogStage.isOkPressed()) {
                        dialogStage.setIsOkPressed(false);
                        primaryStage.show();
                        primaryStage.toFront();
                        primaryStage.setFullScreen(true);
                        primaryStage.setFullScreen(false);
                    } else {
                        if (new Date().getTime() - lastDialogTime.getTime() > 10000) {
                            lastDialogTime = new Date();
                            showDialog();  // automatically on JavaFX thread, so can call restart directly
                        }
                    }
                }
            }));
            timeline.setCycleCount(Animation.INDEFINITE);
        }
        timeline.playFrom("end");
    }

    private void showDialog() {
        try {
            dialogStage = NotificationDialog.getInstance(primaryStage);
        } catch (FileNotFoundException ex) {
            ex.printStackTrace();
        }
        if (!(primaryStage.isFocused())) {
            dialogStage.makeAnimationTask();
            dialogStage.displayInitially(screenBounds);
            dialogStage.startAnimation();
        } else {
            dialogStage.hide();
        }
    }
    Date snapshotInterval;
    Date randomTime;
    Date lastSnapshotTime;
    boolean snapshotFlag;
    int random;

    private void takeSnapShots() {

        snapshotInterval = new Date();
        lastSnapshotTime = new Date();
        randomTime = new Date();
        random = 1 + (int) (Math.random() * ((loginStage.loginService.getSnapShotTime() - 1) + 1)); //snapshottime
        snapshotFlag = false;
        final TimerElement timerElement = new TimerElement();
        timerElement.startTimer();
        snapshotTimeLine = new Timeline(new KeyFrame(Duration.seconds(60), new EventHandler<ActionEvent>() {//60seconds
            @Override
            public void handle(ActionEvent event) {
                if (new Date().getTime() - snapshotInterval.getTime() > loginStage.loginService.getSnapShotTime()) { //snapshottime
                    snapshotInterval = new Date();
                    randomTime = new Date();
                    snapshotFlag = false;
                    random = 1 + (int) (Math.random() * ((9 - 1) + 1));
                    System.out.println("random-" + random);
                }

                if (new Date().getTime() - randomTime.getTime() > (random * 60000)) {
                    if (!snapshotFlag) {
                        System.out.println("------------snapshot-----" + (new Date().getTime() - lastSnapshotTime.getTime()) + "--------");
                        snapshotFlag = true;
                        sendScreenShotData();
                        lastSnapshotTime = new Date();
                    }
                }

            }
        }));
        snapshotTimeLine.setCycleCount(Animation.INDEFINITE);
        snapshotTimeLine.playFrom("end");
    }

    private void startPollingForInactivity() {

        //start all listeners
        ListenerController.startAllListeners();

        detectionService = new DetectionService();
        detectionService.setMaxIdleTime(loginStage.loginService.getIdleTime() * 60 * 1000);
        detectionService.setStop(false);
        detectionService.setOnSucceeded(new EventHandler<WorkerStateEvent>() {
            @Override
            public void handle(WorkerStateEvent t) {
                System.out.println("inactivity poll : " + t.getSource().getValue());
                //stop all service and put it at stop mode

                if (!detectionService.isStop()) {
                    idleLabel.setStyle("-fx-text-fill: RED;");
                    sendScreenShotData();
                    idleLabel.setText("You have been put to idle,\nPlease start again..");
                    primaryStage.show();
                    primaryStage.toFront();
                    primaryStage.setFullScreen(true);
                    primaryStage.setFullScreen(false);
                }
//                
                stopTracking();
            }
        });
        detectionService.start();
    }

    public void sendScreenShotData() {
        SnapshotTask task = new SnapshotTask(screenBounds, loginStage.loginService.getUserid(), selectionPanel.projectComboBox.getValue().toString(), selectionPanel.taskComboBox.getValue().toString(), selectionPanel.subTaskComboBox.getValue().toString(), (int) (new Date().getTime() - lastSnapshotTime.getTime()) / 60000);
        Thread th = new Thread(task);
        th.setDaemon(true);
        th.start();
    }
} 
```

我怎么解决这个问题 ？

# c# - 从另一个用户控件重新绑定 RadTreeView

> ID：13194397
> 
> 赞同：0
> 
> 时间：2012-11-02T11:31:59.107
> 
> 标签：c#, telerik

我有一个 GrandParent 用户控件 top.asxc。在里面我有一个 radSplitter 控件，它将页面分成 2 个部分。在左侧部分，我加载了 Left.ascx 控件，该控件内部有一个 radTreeView，右侧是 right.ascx。在 right.ascx 控件上，我有一个按钮，当我单击它时，我想对 left.ascx 控件上的 radTreeView 控件进行数据绑定。这是一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:08:38.690

您需要将事件从 right.ascx`UserControl`传递到 top.ascx `UserControl`。然后top.ascx`UserControl`会触发你想要的事件，因为top.ascx 确实有一个left.ascx 的实例。这是如何...

**在 right.ascx.cs 文件中**：

```
public event EventHandler RightButton_Clicked;

protected void RightButton_Click(object sender, EventArgs e)
{
    EventHandler handler = RightButton_Clicked;

    if (handler != null)
    {
        handler(this, new EventArgs());
    }
} 
```

**在 top.ascx.cs 文件中**：

```
private static Control _leftUC;
private static Control _rightUC;

protected override void OnInit(EventArgs e)
{
     base.OnInit(e);
     InitWebUserControls();
}

// Note: if your UserControl is defined in the ascx Page, use that definition
//       instead of the dynamically loaded control `_right_UC`. Same for `_leftUC`
private void InitWebUserControls()
{
     _leftUC = Page.LoadControl("left.ascx");
     _rightUC = Page.LoadControl("right.ascx");
     ((right)_rightUC).RightButton_Clicked += new EventHandler(RightUC_Event);
}

void RightUC_Event(object sender, EventArgs e)
{
     ((left)_leftUC ).UpdateControl();
} 
```

**在 left.ascx 文件中**：

```
public void UpdateControl()
{
     leftRadTreeView.Rebind();
} 
```

* * *

如果您最终想将事件参数传递给 top.ascx `UserControl`，而不是`new EventArgs()`使用自定义类来实现`EventArgs`和使用它：

```
int myArgument = 1;
handler(this, new RightEventArgs(myArgument));

public class RightEventArgs: EventArgs
{
    public int argumentId;

    public RightEventArgs(int selectedValue)
    {
        argumentId = selectedValue;
    }
} 
```

`EventArgs`然后您可以通过验证其具体类型来过滤传递给 top.ascx 的事件：

```
private void InitWebUserControls()
{
     _leftUC = Page.LoadControl("left.ascx");
     ((left)_leftUC ).LeftButton_Clicked += new EventHandler(Child_Event);
     _rightUC = Page.LoadControl("right.ascx");
     ((right)_rightUC).RightButton_Clicked += new EventHandler(Child_Event);
}

void Child_Event(object sender, EventArgs e)
{
     if( e is RightEventArgs)
     {
          ((left)_leftUC).UpdateControl();
     }
     else if (e is LeftEventArgs)
     {
          ((right)_rightUC).ClearSelection();
     }
} 
```

# iphone - 页面控件未设置为中间

> ID：13194403
> 
> 赞同：0
> 
> 时间：2012-11-02T11:32:15.430
> 
> 标签：iphone, ios, uitableview, uiscrollview, uipagecontrol

在我的项目中，我使用的是 Horizo​​ntal UItableView 和 UItableviewcell。

它工作得很好。

但是单元格没有设置在中间。

我想设置我的视图，如下图。

注意：我从网站上获取这些图像。

**请提供像这样的任何解决方案或教程**

**1\. 第一次这样看**

![第一视角 像这样](../Images/1b7bf67a9715e25dabfa97af27f9b483.png)

**2\. 中间视图 像这样**

![像这样的中间视图](../Images/18b669db8f1e07f3c4229a15eb82f3a4.png)

**2\. 最后一个视图像这样**

![最终视图 像这样](../Images/5d966df40ba3d7e797426aa2adfa3343.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:42:04.840

我从以下链接中找到解决方案。

[选项卡查看器滚动视图](http://code4app.net/ios/Tab-Viewer-ScrollView/4f84fff306f6e75044000002)

iOS UIScrollView 的扩展，允许滚动多个页面。

# ruby - 如何在 ruby on rails 中删除单引号（'）

> ID：13194406
> 
> 赞同：1
> 
> 时间：2012-11-02T11:32:19.593
> 
> 标签：ruby, ruby-on-rails-3

```
@content = "<p><span style=\"font-family: 'trebuchet ms', 'geneva'; font-size: 'large';\">Helo's</span></p>" 
```

我想`'`从. 现在我正在使用它，但这会删除所有单引号（）。`<style>``Helo's``'`

```
@content.gsub(/'/,"") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:36:17.640

似乎您将需要使用[nokogiri](http://nokogiri.org/)之类的东西来解析 HTML 。只有这样您才能替换标签的文本内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:40:43.397

你可以这样做：

```
@content.gsub(/style=".+?"/){ |x| x.gsub("'", '') } 
```

这将从样式属性中删除单引号。

# java - ResultSet：减少时间表被读锁定的数量

> ID：13194414
> 
> 赞同：0
> 
> 时间：2012-11-02T11:32:35.243
> 
> 标签：java, resultset

我正在使用一个非常简单的设置从 SELECT 查询生成一个 CSV 文件。如何减少（或至少控制）查询锁定数据库以进行读取的时间窗口？

这是一个典型的例子：

```
private List<String[]> getData(final ResultSet rs) throws SQLException {
    final List<String[]> res = new LinkedList<String[]>();
    int i = 0;
    int stride = 10;
    while (rs.next()) {
        if (++i % stride == 0) {
            System.out.println("Row " + i);
        }
        if (i >= stride * 10) {
            stride = stride * 10;
        }
        res.add(getRow(rs));
    }
    System.out.println("*** Total " + i + " rows");
    return res;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:39:13.353

[JDBC 事务隔离级别](http://db.apache.org/derby/docs/10.0/manuals/develop/develop71.html)

[Java 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/transactions.html)

# android - 问题旋转位图着色器

> ID：13194415
> 
> 赞同：1
> 
> 时间：2012-11-02T11:32:40.920
> 
> 标签：android, rotation, android-canvas

我正在使用 canvas.drawPath 在画布上绘制路径，该绘制实例之前已使用 bitmapShader 设置。我将此位图视为动画元素的皮肤。问题是我需要在屏幕上移动路径，旋转它并缩放它。我的问题是，当涉及旋转时，着色器变得像素化。

有什么办法可以防止或改善它？

谢谢，

# vim - 在 Vim 中缩放窗口比 ZoomWin 更好吗？

> ID：13194428
> 
> 赞同：58
> 
> 时间：2012-11-02T11:33:08.747
> 
> 标签：vim, zooming, vim-plugin

我曾经使用 ZoomWin：[https](https://github.com/vim-scripts/ZoomWin) ://github.com/vim-scripts/ZoomWin在 Vim 中的一个和多个窗口之间切换。但是这个插件有一个大问题。当我尝试恢复多个窗口（垂直拆分）时，大约有 2-4 秒的延迟。

你知道如何避免这种滞后吗？或者也许是更好的解决方案。

版本 25 解决的问题：[https ://github.com/regedarek/ZoomWin](https://github.com/regedarek/ZoomWin)

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2015-05-21T00:26:00.273

我尝试在没有任何插件的情况下使用 vim，因为当我在另一个系统上工作时我不想依赖它们。现在遇到同样的问题，我可以按照 OP 的要求提出一些“更好的方法”（替代方法）：

*   `c-w-|`让窗口接管（如果使用 vsplits）。`c-w-=`恢复。`c-w-_`用于水平分割
*   关闭其他窗口，从而使当前一个全屏。从缓冲区拆分并重新打开以恢复
*   使用`tmux`（如果可用）并运行多个 vim 实例，`c-b-z`以在当前窗格的全屏之间切换

我按照我认为的实用性顺序列出了这些。使用专用插件的体验当然会更好，但这并不总是一种选择。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2014-10-24T15:22:47.543

一个[简单的替代方案](https://coderwall.com/p/qqz1lq)（根据您的需要可能就足够了）：

```
" Zoom / Restore window.
function! s:ZoomToggle() abort
    if exists('t:zoomed') && t:zoomed
        execute t:zoom_winrestcmd
        let t:zoomed = 0
    else
        let t:zoom_winrestcmd = winrestcmd()
        resize
        vertical resize
        let t:zoomed = 1
    endif
endfunction
command! ZoomToggle call s:ZoomToggle()
nnoremap <silent> <C-A> :ZoomToggle<CR> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-02T12:05:45.697

ZoomWin 版本 24 引入了窗口局部变量的保存。当我试用它时，我发现性能无法接受，可能是因为我安装了各种其他插件并安装了各种事件处理程序。

我已经向插件作者报告了我的问题，他回答说

> ZoomWin v25a 有 g:zoomwin_localoptlist 和 noautocmd 的东西。

[因此，要么尝试恢复到版本 23（我这样做了），要么尝试从http://drchip.org/astronaut/vim/index.html#ZOOMWIN](http://drchip.org/astronaut/vim/index.html#ZOOMWIN)关闭上述设置的最新版本

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-09-18T20:34:35.127

另一种简单的方法是`:tab split`。好处是它不会改变当前选项卡的布局。缺点是它需要 Vim 7.0 或更高版本来支持选项卡。

```
nnoremap <leader>t :call TabToggle()<cr>
function! TabToggle()
  if tabpagewinnr(tabpagenr(), '$') > 1
    " Zoom in when this tab has more than one window
    tab split
  elseif tabpagenr('$') > 1
    " Zoom out when this tab is not the last tab
    if tabpagenr() < tabpagenr('$')
      tabclose
      tabprevious
    else
      tabclose
    endif
  endif
endfunction 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-12-07T13:50:15.277

我有另一种使用多年的方法；允许我将当前缓冲区“缩放”到新选项卡，然后再次快速关闭它，这样我就可以回到原来的多窗口布局：

```
" "Zoom" a split window into a tab and/or close it
nmap <Leader>,zo :tabnew %<CR>
nmap <Leader>,zc :tabclose<CR> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-11T16:17:59.687

我写了一个与 BenC 的版本非常相似的版本（以前没见过，所以看到那个值得咯咯笑）

我认为唯一的区别是如果您想移动到同一选项卡中的另一个窗口，自动命令会恢复布局，因此它会创建“自动取消缩放”效果：

```
function! ToggleZoom(toggle)
  if exists("t:restore_zoom") && (t:restore_zoom.win != winnr() || a:toggle == v:true)
      exec t:restore_zoom.cmd
      unlet t:restore_zoom
  elseif a:toggle
      let t:restore_zoom = { 'win': winnr(), 'cmd': winrestcmd() }
      vert resize | resize
  endi
endfunction
nnoremap <silent> <Leader>+ :call ToggleZoom(v:true)<CR>
augroup restorezoom
    au WinEnter * silent! :call ToggleZoom(v:false)
augroup END 
```

# jenkins - 使用动态项目名称替代项复制工件构建步骤 - 第 2 部分

> ID：13194431
> 
> 赞同：2
> 
> 时间：2012-11-02T11:33:21.367
> 
> 标签：jenkins, jenkins-plugins

在处理使用变量值选择的项目中的工件时，我仍然遇到 jenkins 问题。我读了这个问题：[使用动态项目名称替代方法复制工件构建步骤](https://stackoverflow.com/questions/11637335/copy-artifacts-build-step-using-a-dynamic-project-name-alternatives) ，我尝试了它，但是它仍然不起作用。也许你可以帮我找出问题所在。

环境：
詹金斯版。1.460
复制神器插件版本。1.24

用户：
luis.ribeiro - 所有权利：整体；从属；工作；运行；查看；SCM；Artifactory

詹金斯工作：
build_project_2_0
build_project_1_0
deploy_project

1° 测试：
描述：运行 deploy_project 并从 build_project_2_0 和 build_project_1_0 复制工件

**从另一个项目复制工件**中的 deploy_project 配置：
项目名称：build_project_2_0
哪个构建：最新成功构建
仅稳定构建：选中
要复制的工件：**/*.war
目标目录：libs/wars
可选：未选中
展平目录：未选中

结果：
从“build_project_2_0”版本号 244 复制了 5 个工件
使用项目名称进行测试时结果相同：build_project_1_0

2° 测试：
描述：运行 deploy_project 并从 build_project_2_0 和 build_project_1_0 复制工件。但是项目名称来自一个参数。

deploy_project 的配置：
在**此构建是参数化的**
参数类型：选择
名称：project_name_parameter
选择：
build_project_2_0
build_project_1_0

在**从另一个项目复制工件**：
项目名称：$project_name_parameter
哪个构建：最新成功构建
仅稳定构建：选中
要复制的工件：**/ *.war
目标目录：libs/wars
可选：未选中
扁平化目录：未选中

结果：
在****从项目名称**下**的另一个项目复制工件**出现此消息：值引用构建参数，因此无法验证。

运行时：
Unable to find project for artifact copy: build_project_2_0
这可能是由于项目名称或权限设置不正确；请参阅作业配置中项目名称的帮助。
构建步骤“从另一个项目复制工件”将构建标记为失败
与 build_project_1_0 时相同** 

 **3° 测试：
描述：运行 deploy_project 并从 build_project_2_0 和 build_project_1_0 复制工件。但是项目名称来自一个参数。

deploy_project 的配置：
在**此构建中参数化**
参数类型：扩展选择参数
名称：project_name_parameter
参数类型：单选
值：build_project_2_0
属性键：build_project_2_0
默认值：build_project_2_0
默认属性键：build_project_2_0
引用值：签

入**从另一个项目复制工件**：
项目名称：$project_name_parameter
哪个构建：最新成功构建
仅稳定构建：已检查
要复制的工件：**/*.war
目标目录：libs/wars
可选：未选中
扁平化目录：未选中

结果：
在**从另一个项目复制工件时，**在**项目名称**下出现此消息：值引用构建参数，因此无法验证。

运行时：
Unable to find project for artifact copy: build_project_2_0 这可能是由于项目名称或权限设置不正确；请参阅作业配置中项目名称的帮助。构建步骤“从另一个项目复制工件”将构建标记为失败与 build_project_1_0 相同

4° 测试：
描述：运行 deploy_project 并从 build_project_2_0 和 build_project_1_0 复制工件。但是项目名称来自一个参数。

deploy_project 的配置：
在**此构建中参数化**
参数类型：扩展选择参数
名称：project_name_parameter
参数类型：单选
值：build_project_2_0
属性键：build_project_2_0
默认值：build_project_2_0
默认属性键：build_project_2_0
引用值：未选中

从**另一个项目复制工件**：
项目名称：$project_name_parameter
哪个构建：最近一次成功构建
仅稳定构建：选中
要复制的工件：**/*.war
目标目录：libs/wars
可选：未选中
扁平化目录：未选中

结果：
在“**项目名称**”下的“**从另一个项目复制工件**”中出现此消息：值引用了构建参数，因此无法对其进行验证。 运行时： Unable to find project for artifact copy: build_project_2_0 这可能是由于项目名称或权限设置不正确；请参阅作业配置中项目名称的帮助。构建步骤“从另一个项目复制工件”将构建标记为失败与 build_project_1_0 相同

 **我仍然没有让它运行，有人可以帮助我解决这个问题吗？提前谢谢你，路易斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:48:12.293

它看起来是正确的。我自己使用带有参数的复制工件。我只能建议几点：

*   检查项目名称（您从中复制的名称）是否没有空格或其他特殊字符。我有很多问题。
*   检查项目名称中的大小写
*   尝试在复制工件步骤之前回显您的变量，也许您会注意到差异

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-11T20:42:14.273

有同样的问题。正如错误已经指出的那样，就我而言，这只是缺少权限。

进入您要从中复制工件的“源”-作业/项目，并检查

```
Permission to Copy Artifact 
```

已正确设置为要复制 INTO 的作业。（或设置为 * 之类的通配符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-02T10:21:05.500

我遇到了同样的问题，并用这个 shell 脚本替换了 copyArtefactPlugin，注意我的参数是使用 ParameterizedBuildPlugin 命名的“jobname”：

```
jobsdir=/var/lib/jenkins/jobs

function copy_artefact() {
  if [ -e "$jobsdir/$jobname/lastSuccessful/archive/" ]; then
  mkdir -p $target

  (
    cd $jobsdir/$jobname/lastSuccessful/archive/
    rsync -a $artefacts_pattern $target/ > /dev/null 2>&1 || true
  )
  fi
}

artefacts_pattern="*/noarch/*.rpm"
target="$WORKSPACE/RPMS/noarch"
copy_artefact

artefacts_pattern="*/x86_64/*.rpm"
target="$WORKSPACE/RPMS/x86_64"
copy_artefact 
```****

# javascript - 部分uiwebview的图像

> ID：13194440
> 
> 赞同：0
> 
> 时间：2012-11-02T11:34:10.917
> 
> 标签：javascript, image, uiwebview, touch

我有一个问题，我得到了一个带有这段代码的 uiwebview 的截图：

```
UIGraphicsBeginImageContextWithOptions(self.myWebView.bounds.size, self.myWebView.opaque, 0.0);
[self.myWebView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage * img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

一切正常，现在我需要截取特定 div 的屏幕截图，用户在 uiwebview 内长按，然后我检测到触摸的 div 并为这个特定 div 拍照。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:43:01.583

看来你需要做renderInContext。

```
 // Size of the result rendered image
CGSize targetImageSize = CGSizeMake(100, 100);
// Check for retina image rendering option
if (NULL != UIGraphicsBeginImageContextWithOptions) UIGraphicsBeginImageContextWithOptions(targetImageSize, NO, 0);
else UIGraphicsBeginImageContext(targetImageSize);

CGContextRef context = UIGraphicsGetCurrentContext();
// The view to be rendered
[[yourImageView layer] renderInContext:context];
// Get the rendered image
UIImage *original_image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

对于其他部分，据我所知，没有公共方法可以让您截取整个屏幕的屏幕截图（即使用状态栏）。UIGetScreenImage有一个[私有方法，它允许您使用实现此功能。](http://mobiledevelopertips.com/user-interface/screen-capture-using-uigetscreenimage.html)但是，由于这是一种私有方法，如果您将其提交到 App Store，您的应用程序将被拒绝。

# facebook - 使用 build.phonegap.com 编译时，phonegap facebook 插件不起作用

> ID：13194443
> 
> 赞同：2
> 
> 时间：2012-11-02T11:34:12.580
> 
> 标签：facebook, cordova, phonegap-plugins

*我使用“ https://github.com/davejohnson/phonegap-plugin-facebook-connect* ”开发了一个带有 facebook 登录集成的 phonegap 应用程序。当我使用模拟器或直接连接真实设备运行应用程序时，它工作正常。

当我使用 build.phonegap.com 构建一个应用程序（android / ios）时，两个应用程序都没有工作并抛出异常**“cordova Facebook Connect 插件在初始化时失败！”** 和**“cordova Facebook Connect 插件在 auth.Status 上失败”**。

那么，如何使其适用于 phonegap 构建服务支持的所有平台。

我的疑问是

> 我们在 res 文件夹中的 plugin.xml 中添加插件引用，并在模拟器的项目根目录中添加 facebook 资源，一切都可用并且工作正常。但是，当我们使用 phonegap 构建服务器构建时，我们只上传资产，而不是我们添加插件包或 plugins.xml 的位置。
> 
> 那么，phonegap 构建服务如何知道如何在不同的原生构建中添加原生资源。

可能我的问题与“http://stackoverflow.com/questions/13008500/is-it-possible-to-get-this-facebook-plugin-working-with-pure-phonegap-app”重复，其中没有找到答案.

在此先感谢 Prasad.CH

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:27:59.367

**build.phonegap.com**不兼容 iPhone 或 Android 的“ **cordova Facebook Connect 插件**”。所以你只能在原生 Android 和 iPhone 代码中开发 Facebook Connect 插件。

Andriod开发环境为“ **Eclipse** ”
IOS开发环境为“ **XCode** ”（OS：MacOS）

# vhdl - 是否可以使用循环创建同一组件的多个实例？

> ID：13194450
> 
> 赞同：8
> 
> 时间：2012-11-02T11:34:32.393
> 
> 标签：vhdl

我有一个组件：

```
Component CAU is
    port 
    (
        CLK              : in std_logic;
        RESET            : in std_logic;
        START            : in std_logic;
        V_DIRECTION      : in vector_3d;
        P_ORIGIN         : in vector_3d;      
        V_NORMAL_IN      : in vector_3d;
        DOT_A            : in vector_3d;
        DOT_B            : in vector_3d;
        DOT_C            : in vector_3d;
        ID_DATA_IN       : in scalar;

        ID_DATA_OUT      : out scalar;
        V_REFLECT        : out vector_3d;          
        V_PASS           : out vector_3d;        
        P_INTERSECT      : out vector_3d;
        V_NORMAL_OUT     : out vector_3d;
        T_OUT            : out scalar;
        SUCCESS          : out std_logic; 
        FINISH           : out std_logic
    );   
end  Component; 
```

我想创建它的 8 个实例。每个都称为`CAU_inst0`, `CAU_inst1`，依此类推。每个实例都通过以下方式连接：

```
CAU_inst0 : CAU
 PORT MAP
 (
    CLK              => CLK_CAU,
    RESET            => RESET,
    START            => start_0_sig,
    V_DIRECTION      => v_direction_0_sig,
    P_ORIGIN         => p_origin_0_sig,
    V_NORMAL_IN      => v_normal_in_0_sig,
    DOT_A            => dot_a_0_sig,
    DOT_B            => dot_b_0_sig,
    DOT_C            => dot_c_0_sig,
    ID_DATA_IN       => id_data_in_0_sig,

    ID_DATA_OUT      => id_data_out_0_sig
    V_REFLECT        => v_reflect_0_sig,
    V_PASS           => v_pass_0_sig,
    P_INTERSECT      => p_intersect_0_sig,
    V_NORMAL_OUT     => v_normal_out_0_sig,
    T_OUT            => t_0_sig,
    SUCCESS          => success_0_sig,
    FINISH           => finish_0_sig
 ); 
```

其中对于每个实例`i`，数字`0`都替换为`i`。我所做的是创建一个 Matlab 脚本，该脚本创建了 8 个具有正确编号的不同实例。但这是一个丑陋的解决方案，因为它只需要 170 行相同的代码，几乎没有什么改动。有没有办法在代码内的循环中创建组件（以及如果可能的话，适当的信号）以减少混乱和线条？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-02T11:45:00.770

您要使用的是 for...generate 语句。

这是一个[示例](http://www.ics.uci.edu/~jmoorkan/vhdlref/generate.html)，类似于您想要实现的目标：

```
architecture GEN of REG_BANK is
  component REG
    port(D,CLK,RESET : in  std_ulogic;
         Q           : out std_ulogic);
  end component;
begin
   GEN_REG: 
   for I in 0 to 3 generate
      REGX : REG port map
        (DIN(I), CLK, RESET, DOUT(I));
   end generate GEN_REG;
end GEN; 
```

在您的情况下，您需要制作连接到块向量和/或向量向量的所有信号。

例如，如果您的信号当前定义为：

```
signal v_normal_in_0_sig : std_logic_vector(7 downto 0); 
```

您需要将其更改为：

```
type vector16 is array (natural range <>) of std_logic_vector(15 downto 0);
signal v_normal_in_sig : vector16(7 downto 0); 
```

在这种情况下，您现在可以使用您的信号`v_normal_in_sig(i)`连接到`i`您的实体/组件的第一个生成实例。

请注意，如果您使用的是 VHDL-2008，则可以改为执行以下操作...

```
type vector_array is array (natural range <>) of std_logic_vector;
signal v_normal_in_sig : vector_array(7 downto 0)(15 downto 0); 
```

# sql - sql中的左连接

> ID：13194453
> 
> 赞同：0
> 
> 时间：2012-11-02T11:34:43.233
> 
> 标签：sql, database, oracle, left-join, oracle9i

我最初在应用程序中有两个表。他们就像

```
user                       
------------------------      
user_id                      
column1                         
column2
..

Columnn 
```

## 用户帐户信息

```
user_id                   
account_number (can have multiple a/c number on single user_id)        
column1                      
column2          
..            
Columnn 
```

* * *

查询就像

```
SELECT u.column1, uai.column1, uai.Keycolumn2
        FROM user u
        LEFT OUTER JOIN user_account_info uai on u.user_id  = uai.user_id 
```

但后来添加了一个新表 user_account_map 并更改了 user_account_info

## 用户

```
user_id                 
column1                                        
column2             
..               
Columnn 
```

## 用户帐户信息

```
account_number (can have multiple a/c number on single user_id)                       
column1                  
column2               
..               
Columnn 
```

## user_account_map

```
user_id                      
account_number (can have multiple a/c number on single user_id)                
column1              
column2 
```

如何重写查询以匹配上一个查询的输出。可以这样写吗

```
SELECT u.column1, uai.column1, uai.Keycolumn2
FROM user u
LEFT OUTER JOIN user_account_map uam on u.user_id  = uam.user_id
LEFT OUTER JOIN user_account_info uai on u.account_number  = uai.account_number 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:29:37.627

从你的模糊问题中我可以理解，我认为你只需要加入三个表，因为你有多个表，`user_id`你`table user_account_map`需要`GROUP BY`那个字段：

```
SELECT u.column1, uai.column1, uai.Keycolumn2, MAX(account_number) AS accNo
FROM user u 
LEFT OUTER JOIN user_account_info uai USING(user_id)
LEFT OUTER JOIN user_account_map uma  USING(user_id)
GROUP BY uma.user_id 
```

或者以其他方式简单地加入包含`account_number`具有双重条件的字段的两个表：

```
SELECT u.column1, uai.column1, uai.Keycolumn2
FROM user u 
LEFT OUTER JOIN user_account_info uai USING(user_id)
LEFT OUTER JOIN user_account_map uma ON uma.account_number = uai.account_number AND uma.user_id = u.user_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:02:53.903

我的查询有自己的答案。我所问的查询是否正确，是正确的。
那是，

```
SELECT u.column1, uai.column1, uai.Keycolumn2
FROM user u
LEFT OUTER JOIN user_account_map uam on u.user_id  = uam.user_id
LEFT OUTER JOIN user_account_info uai on u.account_number  = uai.account_number 
```

# javascript - ExtJs 4 Combobox多选问题

> ID：13194462
> 
> 赞同：0
> 
> 时间：2012-11-02T11:35:12.783
> 
> 标签：javascript, extjs4

我正在使用 ExtJs 组合框，多选设置为 true。

问题 - 假设我有一个包含 10 个城市名称的组合框，允许多选。

Page - 1 ：我允许用户选择多个城市并将他选择的内容保存到数据库中。（假设 city1,city2 被选中）

Page - 2 ：在此页面上，我为用户提供了一个编辑功能来编辑信息，所以现在我需要显示填充（选定）的组合框，其中包含以前的值。我正在使用以下代码 -

```
combo.setValues(arrayOfPrevValues); 
```

所以这允许我在组合框中显示 prev 选择的值，即选择 city1 和 city2。现在，当用户开始编辑城市信息时，先前选择的值将从组合框中丢失。

有人可以帮我找出这里出了什么问题，或者我需要在组合配置中做些什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:27:20.907

好的，我假设您想要旧值和新值。

因此，我建议您覆盖组合框配置中的更改事件。

只需将以下代码段附加到配置中

```
listeners: {
      change: function (cb, newValue, oldValue, options) {
          //do some thing with the old and new value
          console.log(newValue, oldValue);
      }
    } 
```

# java - 无法转换为 java.lang.String 异常

> ID：13194463
> 
> 赞同：0
> 
> 时间：2012-11-02T11:35:16.520
> 
> 标签：java

```
@Entity
@Table(name = "RateTransmissionDetails")
public class RateTransmissionDetails implements java.io.Serializable {

    private String spaceNum;
    private Integer rateInCent;

    public RateTransmissionDetails() {
    }
    public RateTransmissionDetails(String spaceNum,Integer rateInCent) {

        this.spaceNum=spaceNum;
        this.rateInCent=rateInCent;
    } 

    @Column(name = "SpaceNum", nullable = false)
    public String getSpaceNum() {
        return this.spaceNum;
    }

    public void setSpaceNum(String spaceNum) {
        this.spaceNum = spaceNum;
    }

    @Column(name = "RateInCent", nullable = false)
    public Integer getRateInCent() {
        return this.rateInCent;
    }

    public void setRateInCent(Integer rateInCent) {
        this.rateInCent = rateInCent;
    } 
```

我的服务等级是

```
Set<RateTransmissionDetails> rateTrmDtls = new HashSet<RateTransmissionDetails>();
rateTrmDtls.add((new RateTransmissionDetails("A",new Integer(20))); 
```

我收到错误

> 2012-11-02 16:44:02,796[http-6060-3] WARN duncansolutions.databus.external.controller.rate.RateController - 给调用者的错误消息：com.duncansolutions.databus.external.bean.hibernate.rate.RateTransmissionDetails不能转换为 java.lang.String

任何机构都可以告诉我如何去做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:37:35.580

```
Set<RateTransmissionDetails> rateTrmDtls = new HashSet<RateTransmissionDetails>(); 
rateTrmDtls.add(new RateTransmissionDetails("A",new Integer(20))); 
```

这里没有错。当您使用该集合`rateTrmDtls`做某事时，可能会发生该错误，并且代码需要一组`String`

你能显示你在哪里使用集合的代码`RateController`吗？

# tfs - 具有相似名称的项目的 TFS2010 电子邮件警报

> ID：13194467
> 
> 赞同：0
> 
> 时间：2012-11-02T11:35:36.397
> 
> 标签：tfs

我有一个我无法深入了解的场景。

我有一个名为“动物园”的项目。我设置了一个签入警报（使用警报资源管理器）向用户 A 发送电子邮件。过滤器定义中的详细信息为 Field = ServerItem, Operator = Under 和 Value = $Zoo，过滤器表达式为：

'Artifacts/Artifact[starts-with(translate(@ServerItem, "ABCDEFGHIJKLMNOPQRSTUVWXYZ", "abcdefghijklmnopqrstuvwxyz"), "$/Zoo")]' <> null

我还有另一个名为“ZooLife”的项目，并设置了一个签入警报来向用户 B 发送电子邮件。

似乎当一个项目被签入“ZooLife”项目时，用户 B 和用户 A 都会收到一封用于此签入的电子邮件。

任何人都可以帮助如何配置过滤器，以确保只收到签入特定项目的任何内容的警报？或者，是否有任何特定文档可以解释过滤的工作原理？

我希望用户 A 只接收“Zoo”项目的签入警报，而不是“ZooLife”项目。我尝试将警报定义更改为 Field = Folder、Operator = = 和 Value = $/ZooLife，但用户 B 收到的唯一签入警报是在根级别进行的更改。

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:45:36.000

正如 Bryan 在上面指出的那样，您所看到的都是意料之中的。尝试将您的开头与子句更改为 $/zoo/。额外的斜线应该可以解决您的问题。

# jboss - JBoss6 不保留会话

> ID：13194469
> 
> 赞同：0
> 
> 时间：2012-11-02T11:35:38.233
> 
> 标签：jboss, jboss6.x

我已经配置了[http://community.jboss.org/wiki/HAWebSessionsviaDatabasePersistence](http://community.jboss.org/wiki/HAWebSessionsviaDatabasePersistence)上提出的解决方案，以及其他类似使用文件和数据库存储在 context.xml 中配置管理器的解决方案。但是在 JBoss-6.0.0.Final 中根本不起作用。可能是一个错误？

我已经进行了几次测试，并且在所有测试中，会话都正确存储在配置的持久性中。但是，如果我重新部署应用程序或重新启动 JBoss 服务器，它将忽略持久会话并要求我重新登录而不是重用以前的登录。我检查了 SessionID 是否存储在会话持久性中，并且浏览器正在发送正确的 cookie。

我附上了 JBoss-6.0.0.Final 的测试用例。它被配置为[http://community.jboss.org/wiki/HAWebSessionsviaDatabasePersistence](http://community.jboss.org/wiki/HAWebSessionsviaDatabasePersistence)

只需将此行添加到文件 jboss-6.0.0.Final/server/default/data/hypersonic/localDB.script （如果需要，您可以使用自己的 mysql 数据源）

```
CREATE TABLE httpsessions (app VARCHAR(255) NOT NULL, id VARCHAR(255) NOT NULL, fullId VARCHAR(255) NOT NULL, creationtime BIGINT NOT NULL,  maxinactive BIGINT NOT NULL, version INT NOT NULL, lastaccess BIGINT NOT NULL,  isnew CHAR(1) NOT NULL, valid CHAR(1) NOT NULL, metadata VARBINARY NULL,  attributes LONGVARBINARY NOT NULL,  CONSTRAINT app_id PRIMARY KEY (app, id)) 
```

然后，部署应用程序并转到 localhost:8080/web 在登录表单中输入凭据： user:password 如果 suecssfull 登录，您将得到一个“ok”（参见 index.html）然后，您可以看到会话是如何存储的在数据库中：

```
$ cat jboss-6.0.0.Final/server/default/data/hypersonic/localDB.log 
```

你会得到这样的东西：

```
...
DELETE FROM HTTPSESSIONS WHERE APP='/web' AND ID='vIUYhSZDkw7fjCnEealRFA__'
INSERT INTO HTTPSESSIONS VALUES('/web','vIUYhSZDkw7fjCnEealRFA__','vIUYhSZDkw7fjCnEealRFA__',1351177671379,1800,9,1351178495217,'0...
COMMIT 
```

如果您使用以下方式重新部署应用程序：

```
$ touch jboss-6.0.0.Final/server/default/deploy/test.ear/META-INF/application.xml 
```

然后在 localhost:8080/web 上重新加载浏览器，系统会提示您再次输入用户/密码，即使会话 id 已存储。您也可以使用本机 jbossweb.sar/context.xml 配置获得此行为。

如果我丢失了一些配置或者真的是一个错误，任何人都可以说我？我在几种配置之间做了很多排列，但总是得到相同的结果。

我放了一个测试用例的链接，因为我不知道如何将它附加到论坛：

[http://kcy.me/bww8](http://kcy.me/bww8)

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:01:03.500

我进行了一些研究，发现为什么此配置对我不起作用：

如果您使用 JASS 作为身份验证框架，则会话持久性对于维护重新部署时登录的用户没有用处。JAAS 主体不会持久化，因此无论如何它都会丢失。

这可以使用集群来解决，这里是如何做到的：

[http://corecanarias.blogspot.com.es/2013/03/jaas-persistent-sessions-with-jboss-6.html](http://corecanarias.blogspot.com.es/2013/03/jaas-persistent-sessions-with-jboss-6.html)

# jquery - 向下滑动时，我需要更改另一个 div 相对于向下滑动高度的高度

> ID：13194470
> 
> 赞同：1
> 
> 时间：2012-11-02T11:35:38.347
> 
> 标签：jquery

我需要动态更改一个 div 的高度，基于另一个 div 中另一个元素向下滑动的高度而不重新加载，

即当我单击向下滑动元素时，该元素必须向下滑动，并且必须将另一个 div 的同一实例高度设置为向下滑动和向上滑动的高度，

这是我的代码

```
$(window).load(function() {
var mainheight = $('.main-content-area').height();
var sideheight = $('.side-bar').height();
if(mainheight > sideheight) {   
$('.side-bar').css('height',  mainheight + 10);
}
else $('.sidebar').css('height', 'auto');
    //Slide toggle for the a page
$('.toggle-row h3').click(function() {
    $(this).next('.row-content').slideToggle(300);
    $(this).children('.right-arrow').toggleClass('down-arrow');
    if (mainheight > sideheight){
        $('.side-bar').css('height', mainheight +10);
    }
    else {
        $('.side-bar').css('height', sideheight);   
    }
});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:09:00.547

您可以使用 jQuery UI 来实现这一点：

资源：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script> 
```

html:

```
<div class="mydiv" style="background-color:red;"></div>
<div class="mydiv" style="background-color:green;"></div>
<div class="mydiv" style="background-color:blue;"></div> 
```

CSS：

```
div.mydiv { height:100px; width:100px; float:left; } 
```

jQuery：

```
$('.mydiv').each(function() {
    var mydiv = $(this);
    var slider = $( "<div id='slider'></div>" ).insertAfter(mydiv).slider({
        animate: true,
        orientation: "vertical",
        range: "min",
        min: 0,       
        max: 400,
        value: mydiv.width() + 1,
        slide: function( event, ui ) {
            mydiv.width(ui.value - 1);
        }
    });
}); 
```

小提琴：http: [//jsfiddle.net/BerkerYuceer/bTtJ5/](http://jsfiddle.net/BerkerYuceer/bTtJ5/)

# visual-studio-2010 - 如何在 Visual Studio 2010 中创建一个空文件夹？

> ID：13194475
> 
> 赞同：8
> 
> 时间：2012-11-02T11:36:15.273
> 
> 标签：visual-studio-2010

我有一个 VS2010 项目，它需要在*bin\debug目录中创建一个**dataIn*和一个*dataOut*目录，以允许运行一些测试。

 *创建*dataIn*目录很容易 - 只需将包含内容的文件夹添加到项目中，并将它包含的每个文件的“复制到输出目录”属性设置为“始终复制”（或编辑项目文件以使用通配符捕获所有文件，正如 SO 上的其他答案所建议的那样） - 该目录将由 VS 自动创建，以便可以将文件复制到其中。

**我的问题：**如何确保在需要时自动创建*dataOut目录？*

里面没有文件可以进去，所以在 ItemGroup 中这个目录没有任何东西。如果我手动将目录条目添加到项目文件中，则会收到错误消息：

```
"<path>\dataOut" is actually a directory.  The "Copy" task does not support copying directories. 
```

（编辑：从目录名称中删除了下划线，这样斜体就可以了！）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-04T11:01:33.713

在预构建步骤中尝试此操作：

```
if not exist "$(TargetDir)dataOut" mkdir "$(TargetDir)dataOut" 
```

如果您在 中的某处有空格，则引号很重要`$(TargetDir)`，但无论出于鲁棒性考虑，我都会使用它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T12:29:02.210

到目前为止，我管理的一种方法是将虚拟文本文件添加到文件夹并将其“复制到输出目录”属性设置为“始终复制”的相当明显的步骤。我还添加了一个构建后步骤以在之后删除虚拟文件，留下现在为空的目录（尽管对于这个特定的项目，这实际上只是由于我的大惊小怪 - 如果它不是没有影响那里）。

不过我还是想知道有没有更好的选择...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:35:34.547

预构建步骤中的一些 mkdirs 怎么样？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T17:52:56.090

刚刚分享了这个困境，我突然想到处理这个问题的最简单方法是以编程方式简单地创建目录。

```
if(!Directory.Exists(AppDomain.CurrentDomain.BaseDirectory + "yourDirectoryName"))
{
    Directory.CreateDirectory(AppDomain.CurrentDomain.BaseDirectory + "yourDirectoryName");
} 
```

我不确定您正在使用哪种类型的应用程序，但 winform 应用程序可以在其 Main 方法中执行此操作，而 Web 应用程序可以在许多地方执行此操作。*

# android - Eclipse 可执行启动器无法找到它的配套共享库

> ID：13194478
> 
> 赞同：1
> 
> 时间：2012-11-02T11:36:28.237
> 
> 标签：android, eclipse

eclipse 可执行启动器无法找到它的配套共享库。我也删除了我的 eclipse 和 Sdk，因为它们没有生成 R.java 文件所以我认为删除 eclipse 然后在提取 zip 后提取 eclipse zip 然后我点击它显示错误“eclipse 可执行启动器无法找到它的同伴共享库”。如何解决这个问题。我阅读了很多文章，但没有找到最佳解决方案。我的笔记本电脑配置是双核 3 gb ram 320 hd，32 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:15:50.170

再次解压。确保您的解压缩工具提取目录。此错误是解压缩到平面文件夹结构的典型错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T09:31:32.187

也发生在我身上，因为我试图在解压缩过程完成之前运行 eclipse。

确保解压缩过程已完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T09:28:55.780

您可能需要检查系统上是否存在库 **org.eclipse.equinox.launcher_.dist.jar** 和 **plugins/org.eclipse.equinox.launcher.gtk.linux.x86_.dist** 。

确保 eclipse.ini 中提到的库版本与系统上存在的版本相同。通常在升级后会发生这种不匹配，并且 eclipse 无法找到所需的 jar。请在[此处查看此博客文章](http://codewithgeeks.blogspot.in/2013/11/fixing-eclipse-executable-launcher-was.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-06T23:07:24.387

在 eclipse.ini 中，我注意到一些路径包含破折号，表示新的争论。这是一个简单的修复：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20140415-2008.jar   
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20150204-1316 
```

一定是：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v201404152008.jar   
--launcher.library 
```

插件/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v201502041316

但是，您还必须对实际文件执行相同操作。希望这可以帮助！

# javascript - jQuery Tipsy：动态更新标题

> ID：13194481
> 
> 赞同：3
> 
> 时间：2012-11-02T11:36:36.770
> 
> 标签：javascript, jquery, tipsy

根据要求，我想更新现有的醉酒标题，但它似乎不起作用。

### 情况

HTML：

```
<ul>
    <li id="li1">Point at me (title -> value)</li>
    <li id="li2">Point at me (title -> callback)</li>
    <li id="li3" original-title="FooBar1">Point at me (title -> html attribute)</li>
</ul>

<button>Click me to update</button>​ 
```

JS：

```
$('#li1').tipsy({
    title: 'FooBar1'
});
$('#li2').tipsy({
    title: function() { return 'FooBar1'; }
});
$('#li3').tipsy();
$('button').click(function() {
    alert('Updating tipsy titles');

    // Try setting title attribute
    $('li1')[0].setAttribute('title', 'FooBar2');
    $('li2')[0].setAttribute('title', 'FooBar2');
    $('li3')[0].setAttribute('title', 'FooBar2');

    // Try setting original-title attribute
    $('li1')[0].setAttribute('original-title', 'FooBar2');
    $('li2')[0].setAttribute('original-title', 'FooBar2');
    $('li3')[0].setAttribute('original-title', 'FooBar2');
}); 
```

您可以在 jsFiddle 中使用它：http: [//jsfiddle.net/TvFmG/3/](http://jsfiddle.net/TvFmG/3/)

### 问题

我有以下问题：

*   通过设置标题`tipsy({title: 'string'})`似乎根本不起作用。
*   [Tipsy docs](http://onehackoranother.com/projects/jquery/tipsy/)建议可以通过设置属性来更新标题值（`original-title`请参阅“动态更新文本”部分），但这在我的情况下似乎不起作用（请参阅jsfiddle）。

醉醺醺的文档是完全错误的，是版本不兼容还是其他问题阻止了这个例子的工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:03:10.420

该文档似乎是正确的并且按照我的理解工作。

```
.tipsy({title: 'attribute'}) 
```

用于查找元素上的属性并以此为基础。默认值为`title`属性。因此，对于问题中的示例：

```
$('#li1').tipsy({
    title: 'FooBar1'
}); 
```

这是试图找到一个不存在的*属性。*Tipsy 将寻找的默认属性是*title*属性。所以你需要类似的东西：`FooBar1``#li1`

 *```
<li id="li1" title="hooray!">Point at me (title -> value)</li> 
```

或使用*自定义*属性并在 Tipsy 构造函数中指定该属性。

```
<li id="li1" FooBar1="title from a custom attribute">Point at me (title -> value)</li>

$('#li1').tipsy({
    title: 'FooBar1'
}); 
```

对于通过问题的单击部分进行的设置，此行的 JavaScript 中存在错误（尽管出于相同原因，下一行也会出现相同的错误）。

```
$('li1')[0].setAttribute('title', 'FooBar2'); 
```

选择器缺少前导`#`，因此 jQuery 找不到您的元素。它应该是`$('#li1')`，`$('#li2')`等等……

但是，以这种方式设置标题仅在您尚未覆盖`title`每个小费构造函数中的情况下才有效。因此，在这种情况下，您的代码仅适用于**li3 ，因为其他代码具有始终返回***FooBar1*的自定义标题函数。

完整示例：

```
<li id="li3" original-title="FooBar1">Point at me (title -> html attribute)</li>

$('#li3').tipsy(); 
```

将返回*FooBar1*。然后调用`$('#li3')[0].setAttribute('title', 'FooBar2');`它将返回*FooBar2*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:11:10.777

试试这个工作[小提琴](http://jsfiddle.net/2GZKV/)

HTML

```
<ul>
    <li id="li3" original-title="FooBar1">Point at me (title -> html attribute)</li>
</ul> 
```

Javascript代码

```
 $('#li3').tipsy();
  $('button').click(function() {
      $('#li3').attr('original-title', 'FooBar2');
   }); 
```*

# scilab - 如何在scilab中乘以多项式

> ID：13194484
> 
> 赞同：0
> 
> 时间：2012-11-02T11:36:46.147
> 
> 标签：scilab

它应该至少有两个命令，poly 和 var。但我不知道如何使用它们来执行这样的操作：

1/4*b*a^2 - a*b/2(2/3*a)^2

其中 ayb 是符号变量。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:12:07.207

我不认为 Scilab 的符号功能扩展到多个变量。您可以使用在一个变量中创建多项式`poly`，例如

```
-->p = poly([1 2 3], 'x', 'c')
p  =

               2  
    1 + 2x + 3x 
```

并且可以类似地在另一个变量中创建多项式，但是如果您尝试将它们组合起来，则会出现错误。您可以将多项式乘以常数和内容为数字的变量，但这对您的情况没有帮助。

Scilab 的符号特征面向有理分数和用于滤波器设计中极点/零点计算的 Z 变换操作，但对于像这样更复杂的符号数学，您也许可以查看 Mathematica（商业，尽管家庭许可证相当合理如果适用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:39:02.247

给定`p = 2x^2 + 3x + 4`和`q = 5x + 7`

```
<enter code here> p=[2 3 4];
<enter code here> q=[5 7];
<enter code here> answer=convol(p,q);
<enter code here> disp(answer) 
```

# ios - [自导航控制器]pushViewController：

> ID：13194486
> 
> 赞同：1
> 
> 时间：2012-11-02T11:37:03.350
> 
> 标签：ios

我有一个带有标签的应用程序，我会从表格列表中加载页面详细信息。

在我的 appDelegate.mi 中具有以下功能：

```
 @synthesize DetailController = _DetailController;
-(void)loadDetails{
    [[self navigationController]pushViewController:_DetailController animated:YES];
} 
```

我从视图 firstviewController 调用

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

 [[self appDelegate] setCurrentlySelectedBlogItem:[[[self rssParser]rssItems]objectAtIndex:indexPath.row]];
    [[self appDelegate] loadDetails];
} 
```

但不要改变看法。为什么？

在我的 appDelegate.h

```
#import <UIKit/UIKit.h>

@class FirstViewController;
@class DetailViewController;
@class RSSEntry;

@interface AppDelegate : UIResponder <UIApplicationDelegate, UITabBarControllerDelegate>{
    UIWindow * _window;
    FirstViewController * _viewController;
    UINavigationController * _navigationController;
    DetailViewController * _DetailController;
    RSSEntry * _currentlySelectedBlogItem;
}

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UITabBarController *tabBarController;
@property (nonatomic, strong) IBOutlet FirstViewController *viewController;
@property (nonatomic, strong) IBOutlet UINavigationController * navigationController;
@property (nonatomic,strong) IBOutlet DetailViewController * DetailController;
@property (readwrite,strong) RSSEntry * currentlySelectedBlogItem;

-(void)loadDetails;

@end 
```

# iphone - 如何在iphone中使用uitouch点击一个按钮来旋转和调整图像视图的大小

> ID：13194487
> 
> 赞同：1
> 
> 时间：2012-11-02T11:37:02.337
> 
> 标签：iphone, uiimageview

嗨，我有一个要求，我需要通过将图像视图拖动到有按钮的右角来调整和旋转图像视图。

我可以通过拖动其角来成功调整图像视图的大小和单独旋转，但是当我尝试用一​​根手指为图像视图实现调整大小和旋转功能时失败了。我正在使用 UItouch 委托方法。

请建议我....

# python - Python - 将给定目录更改为上一级或下一级

> ID：13194489
> 
> 赞同：4
> 
> 时间：2012-11-02T11:37:07.513
> 
> 标签：python

有没有办法从给定的目录中获得高于或低于目录的一级？例如，在函数中输入了“/a/b/c/”目录。

所以函数会返回：

```
lvl_down = '/a/b/'
lvl_up = '/a/b/c/d/' 
```

我认为你可以使用're'模块（至少在目录下一级）来做到这一点，但也许没有正则表达式有更简单和更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T11:50:53.463

我不知道函数应该如何知道你想进入目录*d*：

```
#!/usr/bin/python
import os.path

def lvl_down(path):
    return os.path.split(path)[0]

def lvl_up(path, up_dir):
    return os.path.join(path, up_dir)

print(lvl_down('a/b/c'))   # prints a/b
print(lvl_up('a/b/c','d')) # prints a/b/c/d 
```

注意：之前有另一种解决方案，但 os.path 是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T12:07:43.183

操作路径的方法可以在模块`os`和`os.path`.

[os.path.join](http://docs.python.org/3/library/os.path.html#os.path.join) - 智能地加入一个或多个路径组件。

[os.path.split](http://docs.python.org/3/library/os.path.html#os.path.split) - 将路径名路径拆分为一对，`(head, tail)`其中*tail*是最后一个路径名组件，而*head*是导致该路径的所有内容。

[os.path.isdir](http://docs.python.org/3/library/os.path.html#os.path.isdir) -如果 path 是现有目录，则返回*True 。*

[os.listdir - 返回一个列表，其中包含由](http://docs.python.org/3/library/os.html#os.listdir)*path*给出的目录中的条目名称。

```
def parentDir(dir):
    return os.path.split(dir)[0]

def childDirs(dir):
    possibleChildren = [os.path.join(dir, file) for file in os.listdir(dir)]
    return [file for file in possibleChildren if os.path.isdir(file)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T12:17:45.953

首先，如果给定的路径以斜线结尾，则应始终使用切片将其删除。话虽如此，以下是如何获取路径的父目录：

```
>>> import os.path
>>> p = '/usr/local'
>>> os.path.dirname(p)
'/usr' 
```

要下去，只需将名称附加到变量中，如下所示：

```
>>> head = '/usr/local'
>>> rest = 'include'
>>> os.path.join(head, rest)
'/usr/local/include' 
```

# java - Android WiFi 接入点可用事件

> ID：13194490
> 
> 赞同：2
> 
> 时间：2012-11-02T11:37:08.497
> 
> 标签：java, android, wifi

我正在尝试开发一个应用程序来连接一些特定的 wifi 接入点（如果可用）。我编写了一个以 30 秒间隔循环的服务，并查看这些特定的 wifi 接入点是否可用。我担心它可能会消耗太多资源。如果android WifiManager（或其他实用程序）有可能通知我的服务有关新的wifi接入点可用，我正在考虑一个解决方案。它就像新的 wifi 接入点监听器。

android中是否有任何实用程序可以实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:24:35.453

您应该记住，当 WiFi 无线电打开时，您的 Android 设备会定期扫描 WiFi 网络。因此，您无需手动检查它们。它将使操作系统的负载加倍。

您可以在服务中为 SCAN_RESULTS_AVAILABLE_ACTION 设置监听器。当设备完成其常规扫描过程时，它将通知您。当您收到此广播时，请检查所有接入点以查看您想要的接入点是否可用。但是，您只能在 WiFi 开启时执行此操作。但最好让 WiFi 保持打开状态，而不是不断地打开和关闭它，尤其是当您以仅 30 秒的小时间间隔进行操作时，这会更快地耗尽电池电量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:42:34.753

你可以在网上看到样品。您的应用程序可以执行类似于[http://marakana.com/forums/android/examples/40.html的操作](http://marakana.com/forums/android/examples/40.html)

# c# - 在 C# 中使用 iTextSharp 创建 pdf 文件

> ID：13194492
> 
> 赞同：0
> 
> 时间：2012-11-02T11:37:16.127
> 
> 标签：c#, itextsharp

我想创建一个 pdf 格式的账单收据。我不打算从头开始创建所有内容，而是打算在 pdf 中创建一个模板文件，然后使用客户姓名、支付金额等相关信息更新此模板 pdf 文件。

我打算在 MS Word 或 Inkscape 中创建模板文件（pdf）。知道我应该怎么做。

编辑：我知道如何从头开始创建它。但是如果我可以创建一个模板文件，我可以节省很多编码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:37:29.710

这是我过去所做的。我使用 itext sharp 并使用 pdf 压模。

```
/// <summary>
        /// Updates the PDF document. From the class that you send it. It will match up any property names to any fields in the PDF.
        /// if no properties are found then it will check the custom attribute PdfFieldName to see if the Name is the same in this attribute.
        /// if so then it will map that property still.
        /// Example: 
        /// PDF Field name: "TextBox Name"
        /// 
        /// [PdfFieldName("TextBox Name")]
        /// public string TextBoxName { get; set; }
        /// 
        /// Since the Property name is TextBoxName it would not be mapped however since the attribute PdfFieldName does match it wil be mapped.
        /// </summary>
        /// <typeparam name="T"></typeparam>
        /// <param name="oldPdfPath">The old PDF path.</param>
        /// <param name="newPdfPath">The new PDF path.</param>
        /// <param name="genericClass">The generic class.</param>
        /// <param name="usePdfFieldNameAttribute"> </param>
        public static void UpdatePdfDocument<T>(string oldPdfPath, string newPdfPath, T genericClass, bool usePdfFieldNameAttribute)
        {
            PdfReader pdfReader = new PdfReader(oldPdfPath);
            using (PdfStamper pdfStamper = new PdfStamper(pdfReader, new FileStream(newPdfPath, FileMode.Create)))
            {
                AcroFields pdfFormFields = pdfStamper.AcroFields;
                var props = from p in typeof(T).GetProperties()
                            let attr = p.GetCustomAttributes(typeof(PdfFieldName), true)
                            where attr.Length == 1
                            select new { Property = p, Attribute = attr.First() as PdfFieldName };

                PropertyInfo[] properties = typeof(T).GetProperties();

                // set form pdfFormFields
                foreach (string field in pdfReader.AcroFields.Fields.Select(de => de.Key))
                {
                    PropertyInfo pi = properties.FirstOrDefault(p => p.Name.ToUpper() == field.ToUpper());
                    if (pi != null)
                        pdfFormFields.SetField(field, pi.GetValue(genericClass, null).ToString());
                    else if (props != null && usePdfFieldNameAttribute)
                    {
                        var result = props.FirstOrDefault(p => p.Attribute.Name.ToUpper() == field.ToUpper());
                        if (result != null)
                        {
                            pi = result.Property;
                            pdfFormFields.SetField(field, pi.GetValue(genericClass, null).ToString());
                        }
                    }
                }

                // flatten the form to remove editting options, set it to false
                // to leave the form open to subsequent manual edits
                pdfStamper.FormFlattening = true;

                // close the pdf
                pdfStamper.Close();
                // close the pdfreader
                pdfReader.Close();
            }
        } 
```

然后在这里调用这个类是一些例子。

```
[System.AttributeUsage(System.AttributeTargets.Property)]
public class PdfFieldName : System.Attribute
{
    public string Name;

    public PdfFieldName(string name)
    {
        Name = name;
    }
}

public class test
{
    [PdfFieldName("TextBox Name")]
    public string TextBoxName { get; set; }
}

private static void Main(string[] args)
{

    Dictionary<string, string> fields = new Dictionary<string, string> {{"TextBox Name", "Natan"}};
    test genericClass = new test() {TextBoxName = "Nathan"};
    UpdatePdfDocument(OLD_PDF_DOCUMENT_PATH, NEW_PDF_DOCUMENT_PATH, genericClass, true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:34:40.663

您可以将[RazorEngine](http://razorengine.codeplex.com/)用于您的模板，然后使用 iTextSharp 将生成的 HTML 转换为 PDF。

在您的 win 应用程序中，您可以嵌入 IE 并通过呈现结果 HTML 来显示账单收据的打印预览。

# c# - C#中的排序列表

> ID：13194494
> 
> 赞同：5
> 
> 时间：2012-11-02T11:37:21.713
> 
> 标签：c#, list, c#-4.0, collections, arraylist

我有一个自定义类型的列表。自定义类型是

```
public class PossibleMatch
    {
        public PossibleMatch()
        {
            StoreIds = new List<long>();
            OrderLineIds = new List<long>();
        }
        public IList<long> StoreIds { get; set; }
        public IList<long> OrderLineIds { get; set; }
    } 
```

我必须以这样一种方式对列表进行排序，以使商店数量较少且订单行数量较多的项目应位于顶部。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T11:39:32.253

LINQ 有这方面的方法。

尝试以下操作，首先按 StoreId 最少的匹配进行排序，然后再按 OrderLineId 最多的匹配进行子排序：

```
 var possibleMatches = new List<PossibleMatch>();
 var ordered = possibleMatches.OrderBy(pm => pm.StoreIds.Count).ThenByDesc(pm => pm.OrderLineIds.Count); 
```

或者先按具有最多 OrderLineId 的匹配进行排序，然后再按具有最少 StoreId 的匹配进行子排序：

```
var ordered = possibleMatches.OrderByDesc(pm => pm.OrderLineIds.Count).ThenBy(pm => pm.StoreIds.Count); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T11:44:29.057

构建自定义比较器：

```
public class PossibleMatchComparer: IComparer<PossibleMatch>
{
    public int Compare(PossibleMatch x, PossibleMatch y)
    {
        if (x.StoreIds.Count < y.StoreIds.Count) return -1;
        if (x.StoreIds.Count > y.StoreIds.Count) return 1;

        return y.OrderLineIds.Count - x.OrderLineIds.Count;
    }
} 
```

所以你可以使用：

```
list.Sort(new PossibleMatchComparer()); 
```

# ios - 呈现模态视图控制器导航 z 位置问题

> ID：13194498
> 
> 赞同：-1
> 
> 时间：2012-11-02T11:37:32.340
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, presentmodalviewcontroller

我在 rootview 控制器上创建了导航栏

```
- (void)viewWillAppear:(BOOL)animated
{
    ///set hud
    [UIApplication sharedApplication].networkActivityIndicatorVisible=YES;
    [[UIApplication sharedApplication]setStatusBarStyle:UIStatusBarStyleBlackOpaque animated:NO];
    //Set Apps navbar
    self.title=@"Trip Planer";

    UINavigationBar *navBar= self.navigationController.navigationBar;
    //[navBar setTintColor:[UIColor colorWithRed:0.102 green:0.498 blue:0.812 alpha:1] /*#1a7fcf*/];

    UIImage *imagebar = [UIImage imageNamed:@"Menu-Bar"];
    [navBar setBackgroundImage:imagebar forBarMetrics:UIBarMetricsDefault];

    ////set rightbutton menus
    UIButton *rightButton = [[UIButton alloc] init];
    rightButton.frame=CGRectMake(0,100.0f,23,23);
    [rightButton setBackgroundImage:[UIImage imageNamed: @"Filters"] forState:UIControlStateNormal];
    rightButton.highlighted=false;
    [rightButton addTarget:self action:@selector(showFilters:) forControlEvents:UIControlEventTouchDown];

    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]initWithCustomView:rightButton];
    navBar.layer.zPosition=1;

    [rightButton release];
} 
```

我使用 TSMiniwebBrowser 作为模态窗口

```
-(void) initTitleBar {
    UIBarButtonItem *buttonDone = [[UIBarButtonItem alloc] initWithTitle:modalDismissButtonTitle style:UIBarButtonItemStyleBordered target:self action:@selector(dismissController)];

    UINavigationItem *titleBar = [[UINavigationItem alloc] initWithTitle:@""];
    titleBar.leftBarButtonItem = buttonDone;

    CGFloat width = self.view.frame.size.width;
    UIImage *navbarPortrait = [[UIImage imageNamed:@"Menu-Bar"]
                               resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
    navigationBarModal = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, width, 44)];
    [[UINavigationBar appearance] setBackgroundImage:navbarPortrait
                                       forBarMetrics:UIBarMetricsDefault];
    navigationBarModal.layer.zPosition=700.0;
    NSLog(@"%f",navigationBarModal.layer.zPosition);
    //navigationBar.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleBottomMargin;
    navigationBarModal.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    [navigationBarModal pushNavigationItem:titleBar animated:NO];

    [self.view addSubview:navigationBarModal];
} 
```

主要问题是 rootviewcontroller 上的导航栏总是覆盖 TSMiniWeb Browser 事件我将 TSminiBrowser Navbar 的 zposition 更改为大于 viewcontroller .. mycode 有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:26:09.887

`addSubview`不是呈现模态视图控制器的正确方法。我建议你阅读 iOS 的 View Controller Programming Guide，特别是[Presenting View Controllers from Other View Controllers](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html#//apple_ref/doc/uid/TP40007457-CH111-SW1)

# java - 如何在 Java 中使用 Google App Engine 创建代理服务器？

> ID：13194501
> 
> 赞同：3
> 
> 时间：2012-11-02T11:37:36.470
> 
> 标签：java, google-app-engine, proxy

我正在尝试在 Google 引擎应用程序上使用 java 编写的简单代理服务器

小服务程序是：

```
import java.io.*;
import java.util.Enumeration;
import java.util.Iterator;
import java.util.Map;
import java.util.List;
import java.util.logging.*;

import javax.servlet.*;
import javax.servlet.http.*;

import java.net.URL;
import java.net.HttpURLConnection;

public class ProxyServlet extends HttpServlet {

    private ServletContext servletContext;
    private Logger log;

    public void init(ServletConfig servletConfig) throws ServletException {
        servletContext = servletConfig.getServletContext();
        log = Logger.getLogger(ProxyServlet.class.getName());
    }

    public void doGet(HttpServletRequest request, HttpServletResponse response){
        doPost(request, response);
    }

    public void doPost(HttpServletRequest request, HttpServletResponse response){
        System.out.println( "doPost"  );

        BufferedInputStream webToProxyBuf = null;
        BufferedOutputStream proxyToClientBuf = null;
        HttpURLConnection con;

        try{
            int statusCode;
            int oneByte;
            String methodName;
            String headerText;

            String urlString = request.getRequestURL().toString();
            String queryString = request.getQueryString();

            urlString += queryString==null?"":"?"+queryString;
            URL url = new URL(urlString);

            log.info("Fetching >"+url.toString());

            con =(HttpURLConnection) url.openConnection();

            methodName = request.getMethod();
            con.setRequestMethod(methodName);
            con.setDoOutput(true);
            con.setDoInput(true);
//            HttpURLConnection.setFollowRedirects(false);
            con.setUseCaches(true);

            for( Enumeration e = request.getHeaderNames() ; e.hasMoreElements();){
                String headerName = e.nextElement().toString();
                con.setRequestProperty(headerName,    request.getHeader(headerName));
            }

            con.connect();

            if(methodName.equals("POST")){
                BufferedInputStream clientToProxyBuf = new BufferedInputStream(request.getInputStream());
                BufferedOutputStream proxyToWebBuf     = new BufferedOutputStream(con.getOutputStream());

                while ((oneByte = clientToProxyBuf.read()) != -1) 
                    proxyToWebBuf.write(oneByte);

                proxyToWebBuf.flush();
                proxyToWebBuf.close();
                clientToProxyBuf.close();
            }

            statusCode = con.getResponseCode();
            response.setStatus(statusCode);

            for( Iterator i = con.getHeaderFields().entrySet().iterator() ; i.hasNext() ;){
                Map.Entry mapEntry = (Map.Entry)i.next();
                if(mapEntry.getKey()!=null)
                    response.setHeader(mapEntry.getKey().toString(), ((List)mapEntry.getValue()).get(0).toString());
            }

            webToProxyBuf = new BufferedInputStream(con.getInputStream());
            proxyToClientBuf = new BufferedOutputStream(response.getOutputStream());

            StringBuffer sb = new StringBuffer(); 

            while ((oneByte = webToProxyBuf.read()) != -1) {
                proxyToClientBuf.write(oneByte);
                sb.append(oneByte);
            }

            System.out.println( sb );

            proxyToClientBuf.flush();
            proxyToClientBuf.close();

            webToProxyBuf.close();
            con.disconnect();

        }catch(Exception e){
            System.out.println(e.getMessage());
            e.printStackTrace();
        }
        finally{
        }
    }
} 
```

部署后，我使用代理 http = myproxyappname.appspot.com 和端口 = 80 设置 Firefox 代理配置，但 Firefox 只能在谷歌页面上冲浪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T21:45:27.650

这是一个工作代码：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.HashMap;
import java.util.Map;
import java.util.Scanner;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class ProxyServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse rsp)
            throws ServletException, IOException {
        try {

            String fwdurlstring=req.getParameter("fwdurl");
            if(fwdurlstring==null)
            {
                fwdurlstring="http://www.mcbjam.com";
            }

            URL fwdURL = new URL(fwdurlstring);
            HttpURLConnection fwdConnection = 
                (HttpURLConnection) fwdURL.openConnection();

            for (String key : fwdConnection.getHeaderFields().keySet()) {
                rsp.setHeader(key, fwdConnection.getHeaderField(key));
            }

            copy(fwdConnection.getInputStream(), rsp.getOutputStream());

        } catch (Exception e) {
            e.printStackTrace(rsp.getWriter());

        }
    }

    private void copy(InputStream in, OutputStream out) throws IOException {
        int len = 0;
        byte[] buf = new byte[1024];

        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }

        in.close();
    }

} 
```

在这里查看它的实际效果：http: [//paint.mcbjam.com/proxy ?fwdurl=https://stackoverflow.com/questions/13194501/how-create-your-proxy-server-using-google-app-engine- in-java/16658914#16658914](http://paint.mcbjam.com/proxy?fwdurl=https://stackoverflow.com/questions/13194501/how-create-your-proxy-server-using-google-app-engine-in-java/16658914#16658914)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:05:28.647

据我所知，您正在寻找托管在 Google App Engine 上的网络代理服务器。

这已在此线程中讨论过。 [Google App Engine 的代理](https://stackoverflow.com/questions/1426779/proxy-for-google-app-engine/14828849#14828849)

您只需要移植 python 项目即可在 java 中实现相同的功能。

试试这个托管在 GAE [http://mirrorrr.appspot.com/上的演示代理服务器](http://mirrorrr.appspot.com/)

# octopress - 如何在 octopress 中使用自己的索引创建自定义类型的页面？

> ID：13194510
> 
> 赞同：1
> 
> 时间：2012-11-02T11:38:24.033
> 
> 标签：octopress

就像这个页面[http://brandonmathis.com/projects/](http://brandonmathis.com/projects/)，我怎样才能创建一个有自己索引的*项目？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:10:10.240

这是一个选项：

在您的 Octopress 站点根目录中创建一个名为 projects 的目录。在其中，放置一个文件 'index.html' 和一个目录 _posts: 这样你就会有类似下面的内容：

```
_layouts/
_plugins/
_posts/
    some_post_that_is_not_a_project.md
projects/
    index.html
    _posts/
        some_project.md
        some_other_project.md
index.html
config.yml 
```

您在该 _posts 目录中发布的任何帖子都将自动属于“项目”类别。这意味着您可以在 projects/index.html 中添加如下内容：

```
<ul>
{% for post in site.categories.projects %}
    <li>
    <a href="/{ post.permalink }}">
        <img src="{{ post.image }} alt="{{ post.title }}></img>
        <h3>{{ post.title }}</h3>
        <p>{{ post.summary }}</p>
    </a>
    </li>
{% endfor %}
</ul> 
```

然后有这样的帖子：

```
---
title: Fancy buttons
image: /path/to/some/image.jpg
summary: |
    I created Fancy Buttons (a Compass plugin) to make it easy to design gorgeous
    customizable CSS buttons in seconds.
|
---

Here is the longer content of this post etc etc which will
appear on the project page itself... 
```

这是一个很好的方法，因为您有一个清晰、合理的目录结构，易于导航和维护。

希望这可以帮助。

# visual-studio-2010 - Visual Studio 安装程序重建 vdproj 项目文件并与 tfs 冲突

> ID：13194513
> 
> 赞同：0
> 
> 时间：2012-11-02T11:38:34.940
> 
> 标签：visual-studio-2010, tfs, installation

我有一个包含多个项目的解决方案，我正在构建一些安装程序。我为大多数项目使用的一组通用文件构建了一个合并模块，以使构建安装程序更容易。不幸的是，解决方案是在可笑的源代码控制下，tfs。

问题似乎是，当任何安装程序构建时，安装程​​序的项目文件会被编译器触及。它要么尝试删除并重新创建它，要么至少编辑它。TFS 抱怨此操作，我们可能会收到多达 30 个错误弹出窗口。他们说：

“您尝试的命令无法完成，因为文件 [filename] 受源代码控制且未检出。”

如果您在所有这些上单击“确定”，则一切正常。当然，如果我每次要构建时都检查安装程序项目文件，我不会得到弹出窗口。这不是一个可行的解决方案。我想我可以改变它，这样安装程序就不会在每次有人试图构建整个解决方案时都被构建。从技术上讲，这确实是我应该配置它的方式。或者将安装程序放入他们自己的解决方案中。这将减少每次构建的烦恼因素，但这并不能解决整体问题。必须有一些配置可以在没有弹出窗口的情况下构建所有内容。或者缺少这一点，无论他们使用什么解决方案以及构建的频率如何，安装程序都将始终处于源代码控制中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:38:42.720

在搜索了今天的大部分时间后，我发现了一个位于[此处](http://connect.microsoft.com/VisualStudio/feedback/details/650587/vs-2010-sp1-changes-packagecode-in-vdproj-on-each-build-but-fails-as-source-controlled)的线程，该线程似乎在讨论我遇到的问题。

微软似乎能够创建一个修补程序。在此线程中，它引用以下链接来解决问题：

[http://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=35848](http://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=35848)

[http://archive.msdn.microsoft.com/KB2529927](http://archive.msdn.microsoft.com/KB2529927)

# iphone - 如何在情节提要中创建 UIScrollView？

> ID：13194516
> 
> 赞同：1
> 
> 时间：2012-11-02T11:38:48.247
> 
> 标签：iphone, ios, uiscrollview, uibutton, storyboard

使用情节提要我创建了一个 `UIScrollView` 并添加了一个`UIImage`到`UIScrollview`现在我想在里面添加 10 个按钮`UIScrollView`。如何滚动.?中的按钮和图像`UIScrollView`？

我试过了，但它不能正常工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T14:48:17.147

最后，当你在视图中实现所有东西时，为 UIScrollview 创建一个出口，然后简单地转到 viewcontroller.m 文件并输入一些代码来使滚动视图滚动。在这一步这应该可以工作。如果没有，请确保`Autolayout`已禁用。

这是我给你的教程：

1.实现滚动视图

![在此处输入图像描述](../Images/375257486bb2d75f7d5ed6fd153c93e2.png)

如果您愿意，可以放入图像视图。

![](../Images/b90246e1b5f44e12d731e0b599cb7918.png)

设置图像大小和文件。

![在此处输入图像描述](../Images/02ffb01dd0dc54286279d01c0c5a60e1.png)

转到您的 .h 文件并添加一个滚动视图插座。

![在此处输入图像描述](../Images/19d1c7d21ec3bf94c71490f6fde0039f.png)

切换到 .m 文件并将此代码放入方法中`viewDidLoad`，并将大小替换为您想要的 contentSize。例如，宽度 (x) = 320，高度 (y) = 700。

![在此处输入图像描述](../Images/c5ea5280f052549cb974dc64ba184ae6.png)

然后只需将插座连接到滚动视图本身：

![在此处输入图像描述](../Images/8f4b0d21fb82107ce8792badb2cf017e.png)

并且可能会更改一些细节：

![在此处输入图像描述](../Images/abff8e6923497862a2e9fb2da76de1b2.png)

就是这样，希望它有效。

最好的祝福

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-02T01:51:50.950

我有同样的问题。正如上面提到的@MasterRazer， “修复”它的东西是**禁用自动**布局。如果我想使用自动布局，我仍然需要弄清楚我应该使用什么约束，不过不应该太难。

**更新：**让 UIScrollView 与 Autolayout 一起使用似乎比我想象的要难，请查看此页面以获取更多信息：[iOS6 Release Notes](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html) Search for *Here are some notes about Auto Layout support for UIScrollView*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T14:20:07.290

在情节提要左侧的文档大纲中，将所有项目（按钮和图像）拖到滚动视图中，并将其放置在滚动视图层次结构中。看起来像这样： ![](../Images/b43cef9d5e771f14d2cda35b6e5f1530.png)

# iis - App_Offline -> 404 错误

> ID：13194519
> 
> 赞同：3
> 
> 时间：2012-11-02T11:38:55.110
> 
> 标签：iis, iis-7, iis-7.5, app-offline.htm

通过简单地将名为 app_offline.htm 的文件放在站点的根目录中，ASP.NET 将提供 app_offline.htm 文件，而不是请求的页面。我最近可能是第一次使用此功能。我将 app_offline.htm 文件放在网站上，然后在 Firefox 中打开我的网站。app_offline.htm 的内容按预期显示。但是，如果我在 IE 中拉出我的网站，我会收到一个找不到页面的错误，看起来好像我的整个网站都不存在。操作系统是 Windows Server 2008 R2 – IIS 7.5
他有什么问题，我该如何解决？我希望有人可以帮助我

谢谢霍斯特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T11:48:14.477

你有多大（以**字节**为单位）`app_offline.htm`？

如果我没记错的话，对于 IE，有一个怪癖要求这个文件必须达到一定的最小大小才能被识别（512 字节）。

在 Scott Gu 的博客上阅读有关此内容的更多信息：[App_Offline.htm 并解决 IE 友好错误功能](http://weblogs.asp.net/scottgu/archive/2006/04/09/App_5F00_Offline.htm-and-working-around-the-_2200_IE-Friendly-Errors_2200_-feature.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:11:22.880

这对我有用。我用这个内容创建了一个新站点：该站点有 448Bytes。

 **```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0     Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<title>Errorpage</title>
    <meta http-equiv="REFRESH" content="0;url=http://error/index.html" >
</head>
 <body>
        <script language="javascript" >
         window.location = "http://error/index.html";
       </script>
 !!Errorpage!!
 </body>
 </html> 
```*  *谢谢，霍斯特**

# facebook - 要在 Facebook Native Dialogs 上共享的链接的预览图像

> ID：13194523
> 
> 赞同：2
> 
> 时间：2012-11-02T11:39:29.827
> 
> 标签：facebook, sdk, dialog, native

我的问题是下一个。我允许用户发布来自 iOS 本机应用程序的链接。使用旧的对话系统可以在弹出的对话框中显示链接的缩略图/预览。这对用户来说非常有用。在新的原生对话系统中，不会出现内容将被共享，而是出现一个占位符，上面有一个用回形针固定的可爱指南针。是否可以显示要共享的内容而不是指南针缩略图？（我知道照片可以正常工作，但不知道如何使它与链接一起工作）这是我正在使用的代码：

```
[FBNativeDialogs presentShareDialogModallyFrom:self
 initialText: nil
 image: nil
 url: [NSURL URLWithString:href]
 handler:^(FBNativeDialogResult result, NSError *error) {

     if (error) {

     }
     else
     {

         switch (result) {
             case FBNativeDialogResultSucceeded:
             {

             }
                 break;
             case FBNativeDialogResultCancelled:

                 break;
             case FBNativeDialogResultError:

                 break;
        }

     }

 }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T18:06:39.390

当您使用 iOS 原生对话框、Facebook SDK 或直接通过 SLComposeViewController 时，您需要提前拥有图像本身。它不像您可以在其中设置 URL 的 Web 对话框那样工作。

这是我最近不得不处理的事情，并且在 iOS 7 中，如果您没有图像，则会显示指南针图标，然后框架将退出并抓取由代表的网页的缩略图大小预览您设置的 URL。

根据您的 UX 需求，这种新行为要么很棒，要么很糟糕。对我们来说，这很糟糕，因此提前下载图像更为关键，并**确保在**调用 Facebook 原生对话框时手头有图像位——无论是通过上面显示的方式（旧，不推荐使用的方式）或使用：

```
[FBDialogs presentOSIntegratedShareDialogModallyFrom:initialText:image:url:handler:] 
```

希望这可以帮助！

# ios - 从 masterView 设置 detailView 时出现 UINavigationController + SplitView 问题

> ID：13194527
> 
> 赞同：1
> 
> 时间：2012-11-02T11:39:44.097
> 
> 标签：ios, ipad, uinavigationcontroller, uisplitviewcontroller

我有`SplitViewController`两个`UITableViewController`（我们称它们为 A 和 B），`NavigationController`由`MasterView`. `DetailView`正在显示所谓的 prepfiles（图像种类），这些文件是通过单击 A 中的 prepfile 的名称来设置的。然后 B 显示 prepfile 的更多信息。当我从 B 到 A 按下后退按钮时，它`DetailView`被清除了。

在下面的代码中，我试图将当前选择的 prepfile 设置为 Master- 并且`DetailView`在从`UITableViewController`A 到 B 的推送`self.detailViewController`中是指向`DetailView`.

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    TestTVC *targetTVC = (TestTVC *)segue.destinationViewController;
    targetTVC.prepfile = self.prepfile;
    [self.detailViewController setPrepfile:self.prepfile];
    NSLog(@"detailController: %@", [self.detailViewController description]);
} 
```

`self.detailViewController``viewDidLoad`如下创建

```
- (void)viewDidLoad
{
    [super viewDidLoad];  
    self.detailViewController = [self.splitViewController.viewControllers lastObject];    
} 
```

这工作正常，直到我点击从 B 到 A 的后退按钮并再次选择相同的 prepfile。该`prepareForSegue`段被调用，`detailViewController setPrepfile`但未调用，因此`DetailView`保持为空。当我在 A 中选择另一个 prepfile 时，它​​会再次起作用。
任何人都知道为什么在返回后选择相同的 prepfile 时它不起作用`navigationController`？

# java - 带有 JPA 实现的 Java 错误 NoClassDefFoundError

> ID：13194534
> 
> 赞同：0
> 
> 时间：2012-11-02T11:40:01.877
> 
> 标签：java, oracle

在 Eclipse 中，我使用 DAO 制作了一个项目，它运行良好。然后我创建了一个新的 JPA 项目并将其添加到初始项目的部署程序集中。然后，我将一个 DAO 转换为与 JPA 一起使用，并将其放入 JPA 项目中。当我测试应用程序时，它给出了一个 Java 错误 NoClassDefFoundError（见底部）。我不知道为什么。我到处检查过，但找不到错误。JPA 在 servlet 中被调用：

```
package eshop;
....
import model.ProductModelDAO;
import model.ProductModelDAOImpl;

ProductModelDAO dao4 = new ProductModelDAOImpl("Product");
ArrayList products = dao4.getProductsByCategory(categoryId); 
```

然后在 JPA 项目中，我有 Product.java，它是从“产品”表生成的。我有persistence.xml。我有两个原始的 DAO：

```
package model;

import java.util.*;

public interface ProductModelDAO {  
public ArrayList searchProducts(String keyword);
public ArrayList getProductsByCategory(String categoryId);
public Product getProductById(String productID);
} 
```

和：

```
package model;

import java.util.ArrayList;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.PersistenceContext;

public class ProductModelDAOImpl implements ProductModelDAO {

@PersistenceContext
private EntityManager em;

// this is the default constructor
public ProductModelDAOImpl()
{
this("Product");
}

  public ProductModelDAOImpl(String unitName)
  {
    EntityManagerFactory emf = Persistence.createEntityManagerFactory(unitName);
    em = emf.createEntityManager();
  }

  // this is the special constructor to set the entity manager.
  // this is used when we run with EJB3
  public ProductModelDAOImpl(EntityManager em)
  {
    this.em = em;
  }

  public void setEntityManager(EntityManager em)
  {
    this.em = em;
  }

@Override
public ArrayList<Product> searchProducts(String keyword) {
    @SuppressWarnings("unchecked")
    ArrayList<Product> results = (ArrayList<Product>)
      em.createQuery("select A from products A where (A.product_name = ?1 or A.descr = ?1)")
          .setParameter(1, keyword)
          .getResultList();
    return results; 
}

@Override
public ArrayList <Product> getProductsByCategory(String categoryId) {
    @SuppressWarnings("unchecked")
    ArrayList<Product> results = (ArrayList<Product>)
            em.createQuery("select A from products A where A.category_id = ?1")
              .setParameter(1, categoryId)
              .getResultList();
        return results; 
}

@Override
public Product getProductById(String productID) {
    Product results = 
    (Product) em.createQuery("select A from products A where A.product_id = ?1")
      .setParameter(1, productID)
      .getResultList();
    return results; 

}

} 
```

持久性xml如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
xmlns="http://java.sun.com/xml/ns/persistence" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
<persistence-unit name="abook">
<provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
<class>model.Product</class>
<properties>
<property name="openjpa.ConnectionDriverName" value="com.mysql.jdbc.Driver" />
<property name="openjpa.ConnectionURL" value="jdbc:mysql://localhost:3306/shop" />
<property name="openjpa.ConnectionUserName" value="root" />
<property name="openjpa.ConnectionPassword" value="" />
<property name="openjpa.Log" value="DefaultLevel=WARN, Tool=INFO" />
</properties>
</persistence-unit>
</persistence> 
```

错误如下

```
java.lang.NoClassDefFoundError: model/ProductModelDAOImpl
at eshop.Servlet.doPost(Servlet.java:112)
at eshop.Servlet.doGet(Servlet.java:57)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.doIt(WebAppServletContext.java:3686)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3650)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2268)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2174)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1446)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:43:47.557

当 Java 虚拟机无法在运行时找到在编译期间可用的特定类时，Java 中的 NoClassDefFoundError 就会出现。查看`ProductModelDAOImpl`web-app 类路径中是否可用。

[在这里](http://javarevisited.blogspot.com/2011/06/noclassdeffounderror-exception-in.html#ixzz2B44iTnnr)阅读更多

# java - Android Phonegap 2.1 > 2.2 升级错误

> ID：13194537
> 
> 赞同：4
> 
> 时间：2012-11-02T11:40:14.223
> 
> 标签：java, android, cordova, webview

我正在开发一个 Phonegap 应用程序，发现 Phonegap 最近已更新到 2.2，其中包含许多 Android 修复程序。所以我立即通过替换 xml、jar 和 JS 文件进行更新。我的应用程序曾经运行良好。它使用自定义的 Javascript 界面来添加额外的功能。不幸的是，当升级到 2.2 时，我收到以下错误日志：

[Pastebin 错误日志](http://pastebin.com/N2ZW1Bzs)

这是我在运行 4.0.4 的三星 Galaxy S2 上运行应用程序时遇到的错误。这是我正在使用的主要应用程序 Java 文件。

[Pastebin Java 文件](http://pastebin.com/tMat8PKj)

我希望你们能帮助我发现问题。我不知道可能导致 JNI 错误的原因。

**编辑：**我在 android 2.2 模拟器上尝试了相同的代码，这给了我一个更具描述性的错误：

```
10-31 13:02:12.945: I/dalvikvm(543): Could not find method android.webkit.WebView.<init>, referenced from method org.apache.cordova.CordovaWebView.<init>
10-31 13:02:12.945: W/dalvikvm(543): VFY: unable to resolve direct method 3298: Landroid/webkit/WebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
10-31 13:02:12.945: D/dalvikvm(543): VFY: replacing opcode 0x70 at 0x0001
10-31 13:02:12.945: D/dalvikvm(543): VFY: dead code 0x0004-005b in Lorg/apache/cordova/CordovaWebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
10-31 13:02:13.195: I/CordovaLog(543): Changing log level to DEBUG(3)
10-31 13:02:13.205: I/CordovaLog(543): Found preference for useBrowserHistory=false
10-31 13:02:13.205: D/CordovaLog(543): Found preference for useBrowserHistory=false
10-31 13:02:13.205: I/CordovaLog(543): Found preference for exit-on-suspend=false
10-31 13:02:13.205: D/CordovaLog(543): Found preference for exit-on-suspend=false
10-31 13:02:13.215: W/CordovaWebView(543): useBrowserHistory=false is deprecated as of Cordova 2.2.0 and will be removed six months after the 2.2.0 release.  Please use the browser history and use history.back().
10-31 13:02:13.245: D/JsMessageQueue(543): Set native->JS mode to 2
10-31 13:02:13.245: I/CordovaWebView(543): Disabled addJavascriptInterface() bridge since Android version is old.
10-31 13:02:13.255: D/CordovaWebView(543): Origin to allow: http://127.0.0.1*
10-31 13:02:13.255: D/CordovaWebView(543): Unlimited access to network resources
10-31 13:02:13.265: D/CordovaWebView(543): Origin to allow: http://api.enkhuizenapp.nl
10-31 13:02:13.265: D/CordovaWebView(543): Origin to allow: .*
10-31 13:02:13.265: I/CordovaLog(543): Found log level DEBUG
10-31 13:02:13.265: I/CordovaLog(543): Changing log level to DEBUG(3)
10-31 13:02:13.265: I/CordovaLog(543): Found preference for useBrowserHistory=false
10-31 13:02:13.265: D/CordovaLog(543): Found preference for useBrowserHistory=false
10-31 13:02:13.265: I/CordovaLog(543): Found preference for exit-on-suspend=false
10-31 13:02:13.265: D/CordovaLog(543): Found preference for exit-on-suspend=false
10-31 13:02:13.265: W/CordovaWebView(543): useBrowserHistory=false is deprecated as of Cordova 2.2.0 and will be removed six months after the 2.2.0 release.  Please use the browser history and use history.back().
10-31 13:02:13.285: D/JsMessageQueue(543): Set native->JS mode to 2
10-31 13:02:13.285: I/CordovaWebView(543): Disabled addJavascriptInterface() bridge since Android version is old.
10-31 13:02:13.285: D/CordovaWebView(543): >>> loadUrl(file:///android_asset/www/menu.html)
10-31 13:02:13.285: D/PluginManager(543): init()
10-31 13:02:13.296: D/CordovaWebView(543): >>> loadUrlNow()
10-31 13:02:13.296: D/CordovaWebView(543): >>> loadUrl(file:///android_asset/www/main.html)
10-31 13:02:13.296: D/PluginManager(543): init()
10-31 13:02:13.315: D/CordovaWebView(543): >>> loadUrlNow()
10-31 13:02:13.955: D/dalvikvm(543): GC_FOR_MALLOC freed 1775 objects / 133528 bytes in 76ms
10-31 13:02:14.765: D/Cordova(543): onPageFinished(file:///android_asset/www/menu.html)
10-31 13:02:15.365: D/Cordova(543): onPageFinished(file:///android_asset/www/main.html)
10-31 13:02:15.685: I/Database(543): sqlite returned: error code = 14, msg = cannot open file at source line 25467
10-31 13:02:15.945: D/CordovaLog(543): Falling back on PROMPT mode since _cordovaNative is missing.
10-31 13:02:15.955: D/CordovaLog(543): file:///android_asset/www/scripts/cordova-2.2.0.js: Line 1032 : Falling back on PROMPT mode since _cordovaNative is missing.
10-31 13:02:15.955: I/Web Console(543): Falling back on PROMPT mode since _cordovaNative is missing. at file:///android_asset/www/scripts/cordova-2.2.0.js:1032
10-31 13:02:16.065: D/AndroidRuntime(543): Shutting down VM
10-31 13:02:16.065: W/dalvikvm(543): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-31 13:02:16.075: E/AndroidRuntime(543): FATAL EXCEPTION: main
10-31 13:02:16.075: E/AndroidRuntime(543): java.lang.NullPointerException
10-31 13:02:16.075: E/AndroidRuntime(543):  at org.apache.cordova.api.Plugin.execute(Plugin.java:74)
10-31 13:02:16.075: E/AndroidRuntime(543):  at org.apache.cordova.api.CordovaPlugin.execute(CordovaPlugin.java:61)
10-31 13:02:16.075: E/AndroidRuntime(543):  at org.apache.cordova.api.PluginManager.exec(PluginManager.java:224)
10-31 13:02:16.075: E/AndroidRuntime(543):  at org.apache.cordova.ExposedJsApi.exec(ExposedJsApi.java:43)
10-31 13:02:16.075: E/AndroidRuntime(543):  at org.apache.cordova.CordovaChromeClient.onJsPrompt(CordovaChromeClient.java:213)
10-31 13:02:16.075: E/AndroidRuntime(543):  at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:566)
10-31 13:02:16.075: E/AndroidRuntime(543):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-31 13:02:16.075: E/AndroidRuntime(543):  at android.os.Looper.loop(Looper.java:123)
10-31 13:02:16.075: E/AndroidRuntime(543):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-31 13:02:16.075: E/AndroidRuntime(543):  at java.lang.reflect.Method.invokeNative(Native Method)
10-31 13:02:16.075: E/AndroidRuntime(543):  at java.lang.reflect.Method.invoke(Method.java:521)
10-31 13:02:16.075: E/AndroidRuntime(543):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-31 13:02:16.075: E/AndroidRuntime(543):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-31 13:02:16.075: E/AndroidRuntime(543):  at dalvik.system.NativeStart.main(Native Method) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T19:27:04.857

这个问题有一个当前的解决方法，那就是你向你的 CordovaActivity 添加一个线程池：

```
private final ExecutorService threadPool = Executors.newCachedThreadPool(); 
```

当然，实现新添加的 getThreadPool() 方法。这是偶然添加的，希望能以某种方式封装在下一个版本中。

```
public ExecutorService getThreadPool()
{
    return threadPool;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T18:01:57.967

我遇到了这个问题，但是按照文档[升级 Cordova Android](http://docs.phonegap.com/en/2.2.0/guide_upgrading_android_index.md.html#Upgrading%20Cordova%20Android)中描述的步骤后，该错误消失了。

# c# - 本地化：一般文化与特定文化

> ID：13194539
> 
> 赞同：1
> 
> 时间：2012-11-02T11:40:18.763
> 
> 标签：c#, localization, windows-8, windows-runtime, windows-store

我创建了一个简单的 Windows 商店应用程序，其中包含 3 种语言：英语、德语和俄语。我没有使用完整的文化名称，如 ru-RU、en-US 或 de-DE，但我只是指定语言：ru、en、de。所以我有以下资源文件结构：

```
prj-folder
\ strings
  \ de
    \ Resource.resw
  \ en
    \ Resource.resw
  \ ru
    \ Resource.resw 
```

在清单中，我将默认文化设置为“en”。我的开发工作站具有美国文化，因此如果运行该应用程序，所有内容都是英文的（正如预期的那样，顺便说一句）。为了测试其他文化，我在以下代码中添加了以下代码`App.ctor`：

```
public App()
{
    InitializeComponent();

    var culture = new CultureInfo("ru-RU");
    Windows.Globalization.ApplicationLanguages.PrimaryLanguageOverride = culture.Name;
    CultureInfo.DefaultThreadCurrentCulture = culture;
    CultureInfo.DefaultThreadCurrentUICulture = culture;

    // ...
} 
```

它运作良好。我可以看到俄语或德语的所有内容。

我已经发布了我的应用程序 - 今天它已出现在商店中。在开发工作站（en-US）上，一切都按预期工作。但！在带有德语（de-DE 文化）的工作站上 - 一切都是英语：Windows Store 中的描述和应用程序中的 UI。我不知道我的本地化有什么问题，也不知道为什么一切都是英文的。

**注意：这可能很重要。**我在应用程序的更新中添加了德语和俄语。第一个版本只有一种语言——英语，默认文化是 en-US。

**更新：**似乎问题与使用德语 Windows 8 的设备有关。大多数应用程序都在 de-DE 文化下运行，但我的应用程序在 en-US 文化下运行。我会试着找出我们的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T04:48:31.647

您的清单是否列出了所有三种语言？应用程序使用的语言集被过滤为清单中存在的语言，因此，如果您的清单仅包含“en”，那么无论用户设置如何，您都会得到这样的结果。

.NET 文化和 UI 文化对 Windows 应用商店应用的本地化没有影响。感兴趣的设置是：

Windows.Globalization.ApplicationLanguages.Languages 就是资源加载器使用的列表，它的构造来自：

1) Windows.System.UserProfile.GlobalizationPreferences.Languages 在语言中设置的用户语言配置文件

2) Windows.Globalization.ApplicationLanguages.ManifestLanguages。应用程序清单中定义的语言。

3) Windows.Globalization.ApplicationLanguages.PrimaryLanguageOverride。可选的特定于应用程序的*持久性*主要语言。

稍微简化一下，ApplicationLanguages.Languages 是 GlobalizationLPreferences.Languages 与 ManifestLanguages 的交集。如果没有交集，则清单语言获胜。主要语言覆盖总是预先添加到列表中，而不是根据清单进行过滤。

如果其他现代应用程序显示德语，最可能的原因是清单中没有德语。另一种可能性是 PrimaryLanguageOverride 以某种方式卡在英语上。

# python - 使用python中的字符串索引从文件名返回文件扩展名

> ID：13194542
> 
> 赞同：1
> 
> 时间：2012-11-02T11:40:31.477
> 
> 标签：python, string, parsing, text, indexing

我在把这个逻辑写在纸上时遇到了一些麻烦：

我想解析的字符串：`"Jan - 2012 Presentation v1.3.ppt.pdf - 500KB"` 这个字符串可以变化，但结构总是“NAME+EXT+FILESIZE”

我想退回扩展名。但是由于显而易见的原因，我不能只是`split(".")` 所以我想出了别的东西：

```
stringy = "Jan - 2012 Presentation v1.3.ppt.pdf - 500KB"
ext = [".pdf",".jpg",".ppt",".txt",".doc"]

for i in ext:
    indx = stringy.find(i)
    ... 
```

我被困在我需要弄清楚如何告诉 Python 从产生的最大索引开始进行扩展的地方。应该是这样的`whatiwant = stringy[indx:4]`，但我不知道如何告诉它只采用最大的索引......最大的索引显然意味着字符串中的最后一个扩展名，这是我想要得到的那个。在这个特定的例子中，我不关心“ppt”，而是关心“pdf”。

这也许可以以更蟒蛇的方式完成吗？或者至少更有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:46:28.490

```
In [44]: stringy[stringy.rfind('.'):stringy.rfind('.')+4]
Out[44]: '.pdf' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:43:30.777

使用`regex`：

```
>>> strs="Jan - 2012 Presentation v1.3.ppt.pdf - 500KB"

>>> re.findall(r"(\.\w+)",strs)[-1]
'.pdf' 
```

**或者：**

```
>>> re.findall(r".*(\.\w+)",strs)
['.pdf'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:43:56.420

试试这个：

```
>>> stringy = "Jan - 2012 Presentation v1.3.ppt.pdf - 500KB"
>>> extension = stringy.split(".")[-1].split("-")[0].strip()
>>> extension
'pdf' 
```

# php - 更改路径后，Crontab 也无法在 plesk 中工作

> ID：13194545
> 
> 赞同：0
> 
> 时间：2012-11-02T11:40:49.437
> 
> 标签：php, crontab, plesk, cron-task

嗨，我尝试通过以下命令使用 cronjob 在 plesk 中运行 php 文件。但一切都显示错误。不执行 php 脚本。

IE，

```
php -q /path to the file 
```

显示找不到 php 命令。所以我试图通过使用找到 php 的路径

```
which php 
```

它显示路径 /usr/bin/php。之后我尝试过

```
/usr/bin/php -q /path to the file 
```

它显示 `/usr/bin/php`没有这样的文件或目录

就像我尝试过的一样

```
/usr/bin/env /usr/bin/php -q /path to the file

/usr/bin/curl /url of the file

/usr/bin/wget /url of the file 
```

每件事都显示错误而不执行脚本。这有什么问题。任何人都可以建议我。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T08:43:21.443

我会告诉你什么对我们有用。首先，我们检查了 cURL 是否已安装。我们不是这样安装它的。然后我们按照以下步骤操作：

```
http://shaun.net/2011/09/solving-plesk-10-3-1-cron-issues/ 
```

> 要解决问题并将行为恢复到它在以前版本的 Plesk 中的工作方式，您需要做的就是运行以下命令：/usr/local/psa/bin/server_pref -u -crontab-secure-shell "/bin/嘘"

但是您必须找到文件“server_pref”的正确路径。按照这些步骤，我们可以使用带有 curl -q [http://youradress.com/cron.php的 cron](http://youradress.com/cron.php)

希望它有帮助，最好的问候

# jquery - HTML 表单选择第 n 个元素

> ID：13194546
> 
> 赞同：2
> 
> 时间：2012-11-02T11:40:49.533
> 
> 标签：jquery, select, jquery-mobile, drop-down-menu

我在表单中有一个选择（下拉菜单）。当我更改下拉列表中的值时，我需要确定我选择了下拉列表中的第一个元素还是下拉列表中的第二个元素？

我们如何使用 jQuery 或 JavaScript 来实现这一点。

谢谢你的时间。我已经搜索了一段时间，找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:42:22.837

您可以为此使用[`index()`](http://api.jquery.com/index/)方法：

```
var index = $("select option:selected").index(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:42:53.943

您可以使用`index()`：

```
$("select").change(function() {
    var selectedIndex = $("option:selected", this).index();
}); 
```

[**示例小提琴**](http://jsfiddle.net/7ALce/)

或者您可以使用普通的 javascript`selectedIndex`属性：

```
$("select").change(function() {
    var selectedIndex = this.selectedIndex;
}); 
```

就我个人而言，我会使用后者，因为在可能的情况下使用本机 javaScript 构造是更好的做法（并且稍微快一点），尽管两者都会给你相同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:44:18.433

你可以;

```
var isFirst = $("#myselect").prop("selectedIndex") == "0"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T11:55:37.150

试试下面的 jQuery 脚本：

```
$("select").change(function() {
var optionselected = $(this).find("option:selected").index();
alert(optionselected); 
}); 
```

​​</p>

# php - php shell_exec 复制文件，文件名中有空格

> ID：13194547
> 
> 赞同：1
> 
> 时间：2012-11-02T11:40:54.050
> 
> 标签：php, file, copy, space, shell-exec

我正在使用 shell_exec() 函数在 php 中复制文件（在 Windows IIS 上）。我使用的命令是：

```
shell_exec("copy ..\\images\\$image_url temp\\$filename\\media\\image1.png"); 
```

在图像名称（$image_url）的名称中没有空格之前，这可以正常工作。但是，如果图像名称中有空格，这将失败。

知道如何转义 $image_url。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:43:32.457

试试这个：

```
shell_exec("copy \"..\\images\\$image_url\" \"temp\\$filename\\media\\image1.png\""); 
```

基本上，就像在命令提示符上一样。如果参数中有空格，则必须在它们周围加上引号。围绕参数 - 而不是围绕空格。;-) 复制命令应该如何知道一个参数在哪里结束，另一个参数在哪里开始。

还要确保它`$image_url`是`$filename`安全的。如果用户对其内容有影响，他们可能会在您的系统上做任何事情。当心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:50:11.787

用“\”标记“”。

```
shell_exec("copy ..\\images\\".str_replace(" ", "\ ", $image_url)." temp\\".str_replace(" ", "\ ", $filename)."\\media\\image1.png"); 
```

# jquery - 在 joomla 挤压框中使用 jQuery 挂钩

> ID：13194554
> 
> 赞同：0
> 
> 时间：2012-11-02T11:41:26.533
> 
> 标签：jquery, joomla, mootools, joomla2.5

情况非常困难，我没有足够的时间来正确解决它，所以有没有办法将 jQuery 与 Joomla 的挤压框模式窗口一起使用，而不是 MooTools。不删除 MooTools，而只是使用 jQuery 并行。目前 jQuery 不对任何 id、class 等做出反应。只有`onclick="someFunctionName();"`jQuery 才有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:18:05.330

您需要提供更多信息或链接才能正确诊断问题。

但是，您可能只需要调用 noconflict 函数来消除冲突。

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

如果这不起作用，请发布一些代码，以便我们可以看到我们正在使用什么。

# java - 如何在 jboss-as-4.3 中删除 jmx-console.war 文件

> ID：13194555
> 
> 赞同：0
> 
> 时间：2012-11-02T11:41:28.393
> 
> 标签：java, jboss, jms

我在生产中使用 jboss-as-4.3，所以我需要删除 jmx-console.war 文件

我在我的部署者中找到了一些相关的 jms 文件。

```
C:\jboss-as-4.3\server\production\deploy\jmx-console.war 

C:\jboss-as-4.3\server\production\deploy\jmx-invoker-service.xml 

C:\jboss-as-4.3\server\production\deploy\jms-ra.rar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:45:52.920

后两个是 JMS，因此您可能想保留它们，但删除第一个将禁用 jmx-console 虽然它是一个有用的工具..您是否考虑过保护它？

唠叨;

在不了解应用程序详细信息的情况下，不可能说出应该删除或保留的内容。我会遵循 Suresh 建议的链接，并记住某些依赖关系可能并不明显。例如，像 EJB3 这样的各种服务依赖于**jboss-aop-jdk50.deployer**。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:05:17.657

[在https://community.jboss.org/wiki/JBoss6xTuningSlimming](https://community.jboss.org/wiki/JBoss6xTuningSlimming)有一个关于修剪 jboss 的 wiki 页面。但那是在 6.x 上。我想其中很多也可能适用于 4.3。

# continuous-integration - Jenkins 相关问题-复制工件

> ID：13194557
> 
> 赞同：2
> 
> 时间：2012-11-02T11:41:45.267
> 
> 标签：continuous-integration, jenkins, jenkins-plugins

我想将一项工作中存在的工件复制到另一项工作。问题是给出的路径是相对于

$JENKINS_HOME/userContent 现在我的数据存在于其中一项工作中，我该如何复制它？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T13:36:50.800

我假设您正在使用“从另一个项目复制工件”构建后操作，对吗？

从中复制工件的位置相对于：
-**工件**文件夹，
- 对于选定的构建，
- 对于您选择从中复制的作业

因此，首先，您必须确保您从中复制的作业实际上是对工件进行存档。它不会从工作区复制文件（还有其他插件）。

要归档您的工件，在创建它们的作业中，选择构建后操作“归档工件”，然后提供您想要归档的工件列表，相对于工作空间。例如，要归档所有 zip 文件，无论它们在哪里，请使用：

```
**/*.zip 
```

或者，如果您知道所有工件都在“build”文件夹中，但中间可能有中间目录，请使用：

```
build/**/*.zip 
```

或者只是提供一个完整的路径：

```
build/myartifactsfolder/myfile.zip 
```

现在，要查看可用的工件，请在浏览器中导航到要从中复制的作业的 URL，选择要从中复制的构建，然后在末尾附加 /artifact/，或者只需单击“构建工件"页面上的链接：

```
example: http://localhost/job/YourJob/lastBuild/artifact/ 
```

这将显示一个目录结构和所有可用的工件。您可以直接在“复制工件”后期构建步骤中引用它。或者您可以使用通配符。例如，如果您想忽略任何目录结构，只复制所有 *.zip 文件，您的“要复制的工件”字段应为：

```
**/*.zip 
```

双星忽略其间的目录。您可以使用逗号分隔多个条目。或者，如果您将此字段留空，它将复制所有可用的工件。

在接收端，“目标目录”与调用“复制工件”步骤的作业的**工作区相关。**

最后，如果您不关心目录结构，请选中“展平目录”选项，以便所有工件最终位于同一个位置，忽略其间的任何文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T12:41:34.817

最简单的解决方案：

*   让Job *-A*将其工件保存到共享位置。
*   让Job *-B*从该共享位置读取*Job-A*的工件。

如果您想保存*Job-A*工件的多个副本（例如最近 10 次构建的历史记录），
让*Job-A*通过参数将相关工件的确切位置传递给*Job-B*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-05T06:32:10.583

1 首先安装复制工件插件然后将构建步骤添加到您的工作并从项目中选择复制工件。2 如果需要，请提供适当的项目名称（创建 zip/war 等的作业）和内部版本号。现在关注 Artifacts to copy field..eg give **/*zip 这将在步骤 2 中搜索提到的项目的 artifact 文件夹内的 *zip 并复制整个结构，包括当前作业工作空间内的 .zip。例如，如果 zip 在 /artifact/xyz/www.zip 中，则整个结构（即 xyz/www.zip）将被复制到您的工作区。为避免复制整个结构并仅复制 zip，您可以使用展平目录选项。

# r - 从文本文件中读取的向量与控制台中生成的相同向量不同

> ID：13194558
> 
> 赞同：2
> 
> 时间：2012-11-02T11:41:54.923
> 
> 标签：r, input

> **可能重复：**
> [为什么这些数字不相等？](https://stackoverflow.com/questions/9508518/why-are-these-numbers-not-equal)

我遇到了一个非常奇怪的情况。如果我使用以下代码将向量（序列）存储在文本文件中：

```
fileConn<-file('test.txt')
sink(fileConn,append=T,split=T)
cat('sequence','\n')
cat(as.character(unlist(seq(0,1,0.1))),'\n')
sink()
close(fileConn) 
```

然后再次加载：

```
test=readLines('test.txt') 
```

然后，我尝试提取存储在文本文件中的相同向量，并使用 2 种“不同”方法与原始序列进行比较：

```
sequence1=laply(strsplit(test[2]," ")[[1]],as.numeric)
sequence2=as.numeric(strsplit(test[2]," ")[[1]]) 
```

奇怪的是，即使它们看起来和（显然）是相同类型的向量，R 似乎认为它们不是！！！

```
cbind(seq(0,1,0.1),sequence1,sequence2)

          sequence1 sequence2
 [1,] 0.0       0.0       0.0
 [2,] 0.1       0.1       0.1
 [3,] 0.2       0.2       0.2
 [4,] 0.3       0.3       0.3
 [5,] 0.4       0.4       0.4
 [6,] 0.5       0.5       0.5
 [7,] 0.6       0.6       0.6
 [8,] 0.7       0.7       0.7
 [9,] 0.8       0.8       0.8
[10,] 0.9       0.9       0.9
[11,] 1.0       1.0       1.0

apply(cbind(seq(0,1,0.1),sequence1,sequence2),2,class)
          sequence1 sequence2 
"numeric" "numeric" "numeric"

apply(cbind(seq(0,1,0.1),sequence1,sequence2),2,nchar)
        sequence1 sequence2
 [1,] 1         1         1
 [2,] 3         3         3
 [3,] 3         3         3
 [4,] 3         3         3
 [5,] 3         3         3
 [6,] 3         3         3
 [7,] 3         3         3
 [8,] 3         3         3
 [9,] 3         3         3
[10,] 3         3         3
[11,] 1         1         1

sequence1==seq(0,1,0.1)
 [1]  TRUE  TRUE  TRUE FALSE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE

sequence2==seq(0,1,0.1)
 [1]  TRUE  TRUE  TRUE FALSE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE 
```

有没有人知道为什么会发生这种情况以及我如何防止它发生？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:13:36.610

让我们逐步解决您的问题。转储文件后，我可以检查以下内容`test.txt`：

```
test=readLines('test.txt')
> test
[1] "sequence "                               
[2] "0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 " 
```

如果我们将其与原始序列进行比较：

```
> seq(0,1,0.1)
 [1] 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0 
```

我们看到该文件包含正确的内容。所以，你的处理错误。我们检查两个序列是否与转储的序列匹配：

```
> all.equal(sequence1, seq(0,1,0.1))
[1] TRUE
> all.equal(sequence2, seq(0,1,0.1))
[1] TRUE 
```

所以实际上他们是正确的。因此，您声称存在问题的说法是错误的。FALSE 可能是由表示浮点数的数值精度引起的，因此`all.equal`说它们是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:16:24.440

您想使用 进行比较`all.equal()`，这允许在比较中进行一些模糊处理。你不能用`==`它来测试精确的等价性，这不是你不应该也不希望对浮点数据做的事情。

```
> all.equal(unlist(sequence1), seq(0, 1, 0.1))
[1] TRUE
> all.equal(sequence2, seq(0, 1, 0.1))
[1] TRUE 
```

为了得到你想要的输出，我们需要更加努力：

```
> sapply(seq_along(sequence1), function(i, x, y) all.equal(x[[i]], y[i]),
+        x = sequence1, y = seq(0, 1, 0.1))
 [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
> sapply(seq_along(sequence2), function(i, x, y) all.equal(x[i], y[i]),
+        x = sequence2, y = seq(0, 1, 0.1))
 [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE 
```

请注意最后两个与列表略有不同`sequence1`。

# navigationservice - NavigationServiceNavigate 不工作 WP7

> ID：13194562
> 
> 赞同：1
> 
> 时间：2012-11-02T11:42:12.977
> 
> 标签：navigationservice

当我在我的 .NET 代码隐藏中使用它时：

```
NavigationService.Navigate(new Uri("DetailsPage.xaml", UriKind.Relative)); 
```

我被重定向到 App.xaml.cs 并指向此代码。

```
 // Code to execute if a navigation fails
    private void RootFrame_NavigationFailed(object sender, NavigationFailedEventArgs e)
    {
        if (System.Diagnostics.Debugger.IsAttached)
        {
            // A navigation has failed; break into the debugger
            System.Diagnostics.Debugger.Break();
        }
    } 
```

我究竟做错了什么？这些文件在同一个目录中..并且拼写正确。我正在使用导航`MainPage.xaml`到`DetailsPage.xaml`.. 使用应用程序栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:07:14.823

你缺少一个 / 它应该像 NavigationService.Navigate(new Uri("/DetailsPage.xaml", UriKind.Relative));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:03:55.777

您需要改用它：

```
NavigationService.Navigate(new Uri("/Folder/DetailsPage.xaml", UriKind.Relative)); 
```

Where Folder - 页面所在的位置。

# vb.net - 获取字符串中的最后一个字符

> ID：13194563
> 
> 赞同：6
> 
> 时间：2012-11-02T11:42:17.593
> 
> 标签：vb.net, windows-phone

我是开发 Windows Phone 应用程序的新手。现在我正在创建一个带有 T9 键盘的文本消息应用程序，我已经设计了类似按钮的设计。现在我想要的是如何获取字符串中的最后一个字符？示例字符串是“clyde”，我怎样才能从该字符串中获取 char 'e'？我使用 Visual Basic 作为语言。

更新：现在可以使用了，我使用了以下代码：

```
string s = "clyde";
char e = s(s.Length-1); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T11:44:40.023

我不确定您使用的是哪种语言，但在 C# 中它是这样完成的

```
string s = "clyde";
char e = s[s.Length-1]; 
```

它在每种语言中都非常相似。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-02T11:43:52.083

C＃：

```
string clyde = "clyde"; 
char last = clyde[clyde.Length - 1]; 
```

VB.NET

```
string clyde = "clyde"; 
char last = clyde(clyde.Length - 1); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-02T11:53:08.773

我会用 linq 做到这一点：-

```
 string clyde = "Clyde";
   char lastChar = clyde.Last(); 
```

只是我的偏好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-03T22:48:24.363

C＃：

```
String string = "string";
Char lastLetter = string[string.Length - 1]; 
```

VB.NET：

```
Dim sInput As String  = "sInput"
Dim lastLetter As Char = ChrW(sInput.Length - 1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-23T21:56:04.610

F＃：

```
"input" |> Seq.last             //val it : char = 't'
"input" |> Seq.last |> string   //val it : string = "t" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-24T19:18:02.347

Dim s As String = "Clyde"

s = Mid(StrReverse(s), 1, 1)

# php - 如何在网站框架中包含 php 查询

> ID：13194569
> 
> 赞同：0
> 
> 时间：2012-11-02T11:42:32.137
> 
> 标签：php, function, frameworks, structure

我的 PHP 框架有问题。我目前没有使用框架模板，我选择不使用一个，因为我不确定如何使用一个。这就是我的代码的结构：

索引.php：

```
<?php   
require_once( 'page_elements.php' );
?>
<body>

<?php echo content();?>

</body> 
```

page_elements.php：

```
<?php
function content() {
?>
 <form id='signup' method='post' action=''>
    <input type="text" size="17" name="signup" title="Email" style="color:#888;" value="Enter email address" />
    <input type='submit' value='Submit'> </input>
 </form>
<?php if(isset($formComplete)) {
         echo "<p> $formComplete </p>";  
     }

} ?> 
```

表单 php 脚本：

```
if(isset($_POST('Email'))
{
 if($_POST('Email') !== ''){
  mysql code enters email address...
 $formComplete = 'Thanks, your email address has been taken';
 }
} 
```

$formComplete 来自处理表单数据的 php 脚本。我的问题是如何包含脚本来处理我网站上提交的表单中的数据，其中函数 content() 仍将识别 $formComplete？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:59:51.510

为什么不将 $formComplete 作为参数发送给您的函数：

```
function content($formComplete = '') {
...
}

echo content($formComplete); 
```

此外，即使这可能不是一个好的做法，因为 $formComplete 基本上是一个处理表单数据（无论是 $_POST 还是 $_GET）的函数，您实际上可以调用处理内容中的 $formComplete 变量的函数（ ） 功能。例如：

```
function content(){
$formComplete = get_form_complete($_POST); // or $_GET depending on your form method type

// do the rest here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:55:21.967

表单是否完整将在脚本中检查，`$formComplete`而不是在提交表单的脚本中检查。`formComplete`对表格发送的日期进行处理，对吗？

然后在前端使用 js 检查表单的有效性，并将您留`formComplete`在该脚本中，在那里它会执行进一步的服务器端操作.. 伪操作：

前端：

```
form submit
check form with js
send form data to backend 
```

后端：

```
formComplete 
do something with data
say your thanks 
```

# magento - Magento 核心类

> ID：13194571
> 
> 赞同：0
> 
> 时间：2012-11-02T11:42:35.483
> 
> 标签：magento

我查看了网络，我找不到任何关于一些磁芯核心类的详细说明，有人可以向我解释这些磁芯类的目的。

Mage_core_Model_abstract

Mage_Core_Model_Mysql4_Abstract

Mage_core_model_mysql4_collection _abstract

Mage_core_model_resource

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:56:09.830

这将帮助您了解

[http://alanstorm.com/magento_listener_lifecycle_block](http://alanstorm.com/magento_listener_lifecycle_block)

请检查一次

# c# - 业务服务调用数据访问层上的多个方法，每个方法都打开一个连接

> ID：13194575
> 
> 赞同：0
> 
> 时间：2012-11-02T11:42:53.770
> 
> 标签：c#, database-connection, data-access-layer, business-logic-layer

我在调用 UnitDataProvider 类的 2 个方法的 unitservice 中执行此伪代码。

```
var units = dataProvider.GetChildrenUnits(parentId);
unit.HierarchyIndex = units.Where( u => u.TemplateId == unit.TemplateId && u.ParentId == null).Max( u => u.HierarchyIndex) + 1;
dataProvider.AddSiblingUnit(unit); 
```

每个方法都会打开一个连接。

如何将其重构为仅使用 1 个连接或重用打开的连接？

或者您认为每个数据提供者方法调用的连接正常吗？

解决方案：数据库上的所有数据访问逻辑都是在 DAL 而不是 BLL 内完成的，因为我认为以下对于我的业务来说没有业务逻辑，它只是数据库逻辑。

```
public void AddSiblingUnit(Unit unit) 
        {
            if (unit.ParentId == null)
            {
                throw new OnlyOneRootNodeIsAllowedException("Only one Root node is allowed!", null);
            } // Server side check if the root is selected because 2 root units are not allowed

            lock (_lockObject)
            {
                using (var trans = new TransactionScope())
                using (var con = new SqlConnection(_connectionString))
                using (var cmd = new SqlCommand())
                {
                    cmd.Connection = con;
                    con.Open();

                    // SELECT HierarchyIndex for the new inserted sibling
                    string selectCommandText = "SELECT HierarchyIndex FROM UNIT WHERE UnitId = @UnitId"; // UnitId of the selected sibling
                    cmd.CommandText = selectCommandText;
                    cmd.Parameters.AddWithValue("UnitId", unit.UnitId); // the parentId which is the selected UnitId 
                    int hierarchyIndexOfSelectedSibling = Convert.ToInt32(cmd.ExecuteScalar());
                    int hierarchyIndexOfNewSibling = hierarchyIndexOfSelectedSibling + 1;

                    // UPDATE all sibling units whose HierarchyIndex is greater than the HierarchyIndex of the selected sibling
                    string updateCommandText = "UPDATE UNIT SET HierarchyIndex = HierarchyIndex + 1 WHERE HierarchyIndex >= @HierarchyIndex AND ParentId = @ParentId";
                    cmd.CommandText = updateCommandText;
                    cmd.Parameters.AddWithValue("HierarchyIndex", hierarchyIndexOfNewSibling);
                    cmd.Parameters.AddWithValue("ParentId", unit.ParentId);
                    cmd.ExecuteNonQuery();

                    // INSERT new sibling
                    string insertCommandText = "INSERT INTO UNIT (Name,TemplateId,CreatedAt,HierarchyIndex,ParentId) VALUES (@Name,@TemplateId,@CreatedAt,@HierarchyIndex,@ParentId);Select Scope_Identity();";
                    cmd.CommandText = insertCommandText;
                    cmd.Parameters.AddWithValue("Name", unit.Name);
                    cmd.Parameters.AddWithValue("TemplateId", unit.TemplateId);
                    cmd.Parameters.Add("CreatedAt", SqlDbType.DateTime2).Value = unit.CreatedAt;
                    unit.UnitId = Convert.ToInt32(cmd.ExecuteScalar());

                    trans.Complete();
                } 
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:50:28.960

您可以在 dataProvider 类中使用连接池。

这将允许您重用连接，但如果您打算让您的应用程序是多线程的，那么这种方法**就会**遇到问题。除非你确保你的连接池有一个线程安全的实现，这说起来容易做起来难。

# extjs - 未调用祖先事件

> ID：13194577
> 
> 赞同：0
> 
> 时间：2012-11-02T11:42:56.597
> 
> 标签：extjs, extjs4

'我有一个基类，其中声明了两个侦听器：

```
Ext.define('App.controls.CoWindow', {
extend: 'Ext.window.Window',
listeners: {
    show: {
        fn: function(win, opt){
            alert('opened from base class');
        },
        scope: this
    },
    close: {
        fn: function() {
            alert('closed from base class');
        }
    }
}
}) 
```

如果我声明一个扩展它的新类并配置侦听器，则不会调用祖先事件：

```
var procura = Ext.create('App.controls.CoWindowEx', {
            listeners: {
                close: {
                    fn:function() {
                        alert('closed from extending class');
                    }
                }
            }
        }); 
```

当我需要这两条消息时，我只会“从扩展类中关闭”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:46:39.370

因为您正在覆盖超类原型上的侦听器配置。如果你必须这样做：

```
Ext.define('App.controls.CoWindow', {
    extend: 'Ext.window.Window',

    initComponent: function(){
        this.callParent();
        this.on('show', function(){
            console.log('super show');
        });
        this.on('close', function(){
            console.log('super close');
        });
    }
}); 
```

# android - 如何从 Android 中的 AutocompletedTextview 获取文本？

> ID：13194579
> 
> 赞同：0
> 
> 时间：2012-11-02T11:43:05.237
> 
> 标签：android, autocomplete, textview

我想从程序中的 Android AutoCompletedTextview 数据中获取文本，为此我编写了以下代码：

```
autoCompleteTextView = (AutoCompleteTextView) findViewById(R.id.searchField);
String starttext= autoCompleteTextView.getText().toString(); 
```

但是在 Autocompletedtextview 中选择的值没有得到我该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:48:59.960

将以下代码添加到您的 onCreate() 方法中，它将解决您的问题。

```
autoCompleteTextView.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        Log.i("SELECTED TEXT WAS------->", arg0.getItemAtPosition(arg2));
        String starttext=arg0.getItemAtPosition(arg2);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:47:25.077

这是自动完成文本视图的示例

[http://developer.android.com/resources/tutorials/views/hello-autocomplete.html](http://developer.android.com/resources/tutorials/views/hello-autocomplete.html)

# java - 内存分配和共享在 Java 中传递给类的引用

> ID：13194580
> 
> 赞同：0
> 
> 时间：2012-11-02T11:43:07.530
> 
> 标签：java

当您将它们传递给 Java 中的方法时，我对 Java 中引用的内存分配感到困惑。作为测试，我做了一个如下示例，

```
class Store{
public int[] buffer = new int[5];
 }

class ConsumeStore{
Store store;
public ConsumeStore(Store store){
    this.store = store; 
}

public int useStore(){
    return store.buffer[0];
}
  }

class ProduceStore{
Store store;
public ProduceStore(Store store){
    this.store = store;
}

public void putStore(){
    store.buffer[0] = 100;
}
 }

public class CheckRef {
  public static void main(String args[]){
  Store store = new Store();
  ConsumeStore consStore = new ConsumeStore(store);
  ProduceStore prodStore = new ProduceStore(store);
  prodStore.putStore();
  System.out.println(consStore.useStore());   
   }
 } 
```

那么输出是100。

在这里，我将 Store 引用传递给 ProducerStore。在 ProducerStore 中，我将它分配给它的类成员。我也在为 ConsumerStore 做同样的事情。

有人可以解释一下如何为 Store 引用完成内存分配以及它是如何在 ProducerStore 和 ConsumerStore 之间共享的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:50:30.693

你的`ProducerStore`和`ConsumerStore`都引用了`store`你传递给每个对象的同一个对象。

因此，当您在外部或任何生产者/消费者中修改`store`内部状态（其`buffer`成员）时，所有引用它的类都被“更新”，因为它们不持有不同的值，它们只持有对独特的价值`store`。

**如果您完全重新分配对象，则会发生**不同的事情。**例如：**

 **```
public void putStore(){
    store = new Store()
    store.buffer[0] = 100
} 
```

在这种情况下，Consumer 和 Producer 将拥有不同的 store：Consumer 仍然拥有对原始 store 的引用，而 Producer 将拥有在 Put 方法中定义的新 store。

您可以将其视为：每次执行 a`new`时，都会在内存中创建一个新对象。然后，当您将其传递给类时，每个人都只能引用该唯一对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:49:47.383

您需要两个单独的实例。如果您传递相同的引用，那么任何更改都将反映在两个对象上，因为它们指向相同的引用。

```
Store store = new Store();
ConsumeStore consStore = new ConsumeStore(store);
Store anotherStore = new Store();
ProduceStore prodStore = new ProduceStore(anotherStore); 
```

几条笔记

*   永远不要使用公共变量。
*   如果您的设计需要继承，请使用继承

您应该阅读 [课程：面向对象的编程概念](http://docs.oracle.com/javase/tutorial/java/concepts/)**

# mysql - MYSQL 数据库表将列封顶为 22

> ID：13194583
> 
> 赞同：0
> 
> 时间：2012-11-02T11:43:20.383
> 
> 标签：mysql

在 google 上似乎找不到任何关于此的内容。我有一个相当大的数据库，在我的一个表中，（每个表有 8 个，大约有 20-40 列）我试图再添加 20 列。它们最终在 phpmyadmin 的下拉“显示列”下拉列表中显示为空名称。但是，如果我在其中一个条目上单击编辑，则会显示名称。起初我想也许我达到了最大字符限制或类似的有趣的东西，但我可以在同一个数据库中的其他表中创建新列。

关于可能发生的事情有什么想法吗？

这是表的导出

```
-- phpMyAdmin SQL Dump
-- version 3.5.2.2
-- http://www.phpmyadmin.net
--
-- Host: 127.0.0.1
-- Generation Time: Nov 02, 2012 at 12:49 PM
-- Server version: 5.5.27
-- PHP Version: 5.4.7

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `memberships`
--

-- --------------------------------------------------------

--
-- Table structure for table `upload`
--

CREATE TABLE IF NOT EXISTS `upload` (
  `id` int(50) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `chk_long` enum('off','on') NOT NULL,
  `chk_short` enum('off','on') NOT NULL,
  `chk_bass` enum('off','on') NOT NULL,
  `chk_mid` enum('off','on') NOT NULL,
  `chk_hi` enum('off','on') NOT NULL,
  `chk_stereo` enum('off','on') NOT NULL,
  `chk_mono` enum('off','on') NOT NULL,
  `chk_left` enum('off','on') NOT NULL,
  `chk_right` enum('off','on') NOT NULL,
  `chk_noteseq` enum('off','on') NOT NULL,
  `chk_sample` enum('off','on') NOT NULL,
  `chk_midi` enum('off','on') NOT NULL,
  `var_keynote` enum('None','A','A#','B','C','C#','D','D#','E','F','F#','G','G#') NOT NULL DEFAULT 'None',
  `box_name` varchar(255) NOT NULL,
  `box_desc` varchar(255) NOT NULL,
  `sample_url` varchar(20) NOT NULL,
  `rating` int(50) NOT NULL,
  `t_up` int(50) NOT NULL,
  `t_down` int(50) NOT NULL,
  `category` enum('drums','horror','remixraw','acapella','talk','beatbox','robot','synth','object','arpeggio','bass','lead','loop','pad','soundfx','wobble','misc') NOT NULL,
  `ambient` int(10) NOT NULL,
  `breakbeat` int(10) NOT NULL,
  `disco` int(10) NOT NULL,
  `downtempo` int(10) NOT NULL,
  `drumandbass` int(10) NOT NULL,
  `dub` int(10) NOT NULL,
  `dubstep` int(10) NOT NULL,
  `electro` int(10) NOT NULL,
  `electronica` int(10) NOT NULL,
  `electronic rock` int(10) NOT NULL,
  `eurodance` int(10) NOT NULL,
  `hardcore` int(10) NOT NULL,
  `harddance` int(10) NOT NULL,
  `house` int(10) NOT NULL,
  `industrial` int(10) NOT NULL,
  `glitch` int(10) NOT NULL,
  `jungle` int(10) NOT NULL,
  `techno` int(10) NOT NULL,
  `trance` int(10) NOT NULL,
  `chiptune` int(10) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=51 ;

--
-- Dumping data for table `upload`
--

INSERT INTO `upload` (`id`, `username`, `chk_long`, `chk_short`, `chk_bass`, `chk_mid`, `chk_hi`, `chk_stereo`, `chk_mono`, `chk_left`, `chk_right`, `chk_noteseq`, `chk_sample`, `chk_midi`, `var_keynote`, `box_name`, `box_desc`, `sample_url`, `rating`, `t_up`, `t_down`, `category`, `ambient`, `breakbeat`, `disco`, `downtempo`, `drumandbass`, `dub`, `dubstep`, `electro`, `electronica`, `electronic rock`, `eurodance`, `hardcore`, `harddance`, `house`, `industrial`, `glitch`, `jungle`, `techno`, `trance`, `chiptune`) VALUES
(2, 'VVV', 'on', 'off', 'on', 'off', 'on', 'on', 'off', 'on', 'on', 'off', 'on', 'off', 'A#', 'sample for samplewars', 'asd', '../samples/65621__otherthings__inhale-10115b.wav', 903, 3249, 2346, 'drums', 21, 4, 2, 5, 46, 23, 75, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(4, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'bang', 'gg', '../samples/bang0_5.wav', 6, 23456, 23450, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(5, 'VVV', 'off', 'on', 'on', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'on', 'off', 'B', 'gfsdg', 'dsfgfsdg', '../samples/arc_4.wav', 1999, 2345, 346, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(6, 'VVV', 'off', 'on', 'on', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'on', 'off', 'B', 'dfgdg', 'dsfgfsdgdfg', '../samples/bdeHOE36024hard1.wav', -177, 58, 235, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(7, 'VVV', 'off', 'on', 'off', 'on', 'on', 'on', 'off', 'off', 'off', 'off', 'on', 'off', 'None', 'hat', 'hattattatt', '../samples/Hat20.wav', 11, 20, 9, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(8, 'VVV', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'baasssss', 'ssas', '../samples/bass39.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(9, 'VVV', 'off', 'on', 'off', 'on', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'sdgs', 'dfgdsg', '../samples/DJ SAMPLES VOL 2 (1).wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(10, 'VVV', 'off', 'on', 'off', 'on', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'fygjfs', 'fjktyuiytdtg', '../samples/DJ SAMPLES VOL 2 (18).wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(11, 'VVV', 'off', 'on', 'off', 'on', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'retyytj', 'r6tfydzxg', '../samples/DJ SAMPLES VOL 2 (531).wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(12, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'fghsdg', 'dfgnhg', '../samples/DJ SAMPLES VOL 2 (643).wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(13, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'dsfb', 'rsatey', '../samples/DJ SAMPLES VOL 2 (537).wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(14, 'VVV', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'on', 'off', 'None', 'dgb', 'dbgdb', '../samples/Bassdrum Gated.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(15, 'VVV', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'on', 'off', 'None', 'gxhn', 'dbgdb', '../samples/Snare 3.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(16, 'VVV', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'on', 'off', 'None', 'toml', 'dbgdb', '../samples/Tom L.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(17, 'VVV', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'on', 'off', 'None', 'hita', 'dbgdb', '../samples/Hihat2.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(18, 'VVV', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'on', 'off', 'None', 'bline', 'dbgdb', '../samples/Bassline3.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(19, 'VVV', 'off', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'on', 'off', 'None', 'gfjutj', 'rfujuj', '../samples/Ambient2 loop.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(20, 'VVV', 'off', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'on', 'off', 'None', 'xfh', 'rdh', '../samples/Deranged.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(21, 'VVV', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'fxvxvz', 'zxbbxx', '../samples/tp1_Button_Perc_1.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(22, 'VVV', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'cnn', 'ghj', '../samples/tp1_Tall_Perc_1.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(23, 'VVV', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'cvgn', 'vcng', '../samples/tp1_Ear_Perc_1.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(24, 'VVV', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'vbncvbn', 'vcbn', '../samples/baligator3.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(25, 'VVV', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'evil', 'cbg', '../samples/evillaugh.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(26, 'VVV', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'monster', 'xfxf', '../samples/monster.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(27, 'VVV', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'fx1', 'xfxf', '../samples/VEE FX 000.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(28, 'VVV', 'off', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'fx2', 'xfxf', '../samples/VEE FX 002.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(29, 'VVV', 'off', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'fx4', 'xfxf', '../samples/VEE FX 004.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(30, 'VVV', 'off', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'fx5', 'xfxf', '../samples/VEE FX 005.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(31, 'VVV', 'off', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'fx6', 'xfxf', '../samples/VEE FX 006.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(32, 'VVV', 'off', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'fx7', 'xfxf', '../samples/VEE FX 007.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(33, 'VVV', 'off', 'off', 'off', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'fx12', 'xfxf', '../samples/VEE FX 012.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(34, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'zxvcxz', '', '../samples/VEE Clap 009.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(35, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'zxvcx', '', '../samples/VEE Clap 008.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(36, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'sfcsdf', '', '../samples/VEE Clap 003.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(37, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'sdaterw', '', '../samples/VEE Clap 010.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(38, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'clap', '', '../samples/VEE Clap 042.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(39, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'clap108', '', '../samples/VEE Clap 107.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(40, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'clap15', '', '../samples/VEE Clap 015.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(41, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'clap17', '', '../samples/VEE Clap 017.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(42, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'clap22', '', '../samples/VEE Clap 022.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(43, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'cllap35', '', '../samples/VEE Clap 035.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(44, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'clla7', '', '../samples/VEE Clap 007.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(45, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'clla7as', '', '../samples/VEE Clap 0212.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(46, 'VVV', 'on', 'off', 'on', 'on', 'on', 'on', 'off', 'off', 'off', 'off', 'on', 'off', 'None', 'everybody talks', 'etalk', '../samples/badman.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(47, 'VVV', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'sdafasfasdf', 'asdfasdfasdf', '../samples/perc120-31.wav', 0, 0, 0, 'robot', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(48, 'vvv2', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'None', 'dsfzsdf', 'sdfasdf', '../samples/explosion6.wav', 25, 27, 2, 'object', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(49, 'VVV', 'on', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'off', 'on', 'off', 'None', 'sdfsadf', 'asdfsadf', '../samples/kicks1100.wav', 0, 0, 0, 'drums', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
(50, 'vvv2', 'on', 'off', 'off', 'off', 'off', 'on', 'off', 'off', 'off', 'on', 'off', 'off', 'B', 'dooooood', 'ada', 'tester', 0, 0, 0, 'synth', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

# c# - 如何启用 .NET Reflector 选择正确版本的 .NET 编译程序集？

> ID：13194584
> 
> 赞同：0
> 
> 时间：2012-11-02T11:43:21.803
> 
> 标签：c#, .net, reflection, reflector

我有一个关于 .NET 反射器的简单问题。我已经从 .NET Reflector 手动反编译了程序集，导出了它的代码并从 Visual Studio 手动重新编译了它的代码并生成了它的程序集（我想要很少的代码更改）。现在我希望这个程序集被另一个反编译了其他程序集的主项目正确引用。但问题是，它抛出了一个异常

“无法选择程序集 xxxx VERSION = 1.0.12.4”

这是问题所在。它会以某种方式选择旧版本，而不是选择正确的版本（我在其中进行了更改，甚至引用了该项目，并且它现在的版本为“0.0.0.0”）。基本上在对代码进行更改之前，它会自行反编译并生成缓存，将所有源文件放在其中。但是现在我想更改一些代码并单独编译整个项目代码，然后在其他程序集可能较旧的主项目中引用该项目。

## 编辑

手动我在 Assembly.cs 文件中看不到任何可以更改项目中引用的程序集版本的地方。我的问题是我想让 Visual Studio 加载它作为项目引用的程序集版本。程序集编译并放在同一个“调试”目录中。但是当 EXE 启动时它会抛出异常。因为它在某个地方看到了具有以前工作的旧版本的程序集。

问候乌斯曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:47:33.003

`AssembleVersion`向反编译的程序集添加属性

```
[assembly: AssemblyVersion("1.0.12.4")] 
```

另一种选择是更改其他程序集中的引用 - 您可以使用[Reflexil](http://reflexil.net/) Reflector 插件来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:46:41.027

我发现自己的问题。

我也手动重新编译了那个项目，它是自引用旧的 xxx 程序集。因为它也引用了在第一阶段错误选择的组件。

因此，在我的情况下，解决方案是，简而言之，编译所有程序集（代码），这些程序集直接或间接引用在第一种情况下被拾取的旧版本的程序集。

谢谢

# php - Javascript：允许用户在提交表单时写入会话但不重新加载页面

> ID：13194586
> 
> 赞同：1
> 
> 时间：2012-11-02T11:43:28.213
> 
> 标签：php, javascript, jquery, html, ajax

根据要求，我希望允许用户在提交表单但不重新加载页面时写入会话，这是我到目前为止所做的：

Javascript函数：

```
$(function() {
$("#body").submit(function(){
var name = $("#player_name").val();
var dataString = 'player_name='+ name
alert (dataString);return false; 
   $.ajax({
      type: "POST",
      url: "session_update.php",
      data: dataString,
      success: function(){
        $('#body').html("<div id='message'></div>");  
        $('#message').html("<h2>Logged in!</h2>");
      });
   }
});
   return false;
}); 
```

我的表格我试图提交：

```
 <div class="body">
<div class="home" id="home" style="width:100%">
    <form action="" name="login">
    USERNAME: <input type="text" id="player_name" name="player_name"/>
          <br>
      <input type="submit" name="submit" class="button" id="submit_btn" value="Send" />
         </form>
<? echo "value=". $_SESSION['player_name'];?>
</div> 
```

php文件将数据发送到：

```
<?php
start_session();
$_SESSION['player_name']= $_POST["player_name"];
?> 
```

非常感谢您的任何建议，这对编码的这一方面来说是相当新的，所以这可能是导致它的明显原因，但我只是看不到它。

如需更多信息，请告诉我。

**更新**

控制台显示 ?player_name=User&send:75

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T11:46:23.827

你需要使用`session_start();`不`start_session()`

始终确保您手动测试 PHP 脚本，而不仅仅是使用 ajax 指向页面。去它并确保它有效。:-)

如果您对此进行了测试（假设 error_reporting 已打开），您将收到一条错误消息，指出您正在尝试调用未定义的函数。

**更新**

除了`session_start()`问题之外，您的代码中可能还有其他问题。

第一步是使用`console.log('hello');`或进行调试`alert('hello')`。将这些操作绑定到表单提交事件，这将告诉您是否正在调用提交函数。

完成此操作后，您可以继续调试其余部分:-)

**更新 2**

通过查看您的 jQuery，您似乎将`submit`事件附加到 DOM 中的错误元素。您需要将其附加到表单，而不是 div。像这样：

```
$(function() {
    $("#form").submit(function(){
        var name = $("#player_name").val();
        var dataString = 'player_name='+ name
        $.ajax({
          type: "POST",
          url: "session_update.php",
          data: dataString,
          success: function(){
            $('#body').html("<div id='message'></div>");  
            $('#message').html("<h2>Logged in!</h2>");
          });
        }
    });
}); 
```

和

```
<div class="body">
    <div class="home" id="home" style="width:100%">
        <form id="form" action="" name="login">
            USERNAME:<input type="text" id="player_name" name="player_name"/><br>
            <input type="submit" name="submit" class="button" id="submit_btn" value="Send" />
        </form>
        <? echo "value=". $_SESSION['player_name'];?>
    </div> 
```

***提示：使用 CSS 来分隔元素，不要使用`br`标签。只是我的观点 ：-）***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:56:24.433

您将事件附加到不正确的元素。

在js中改变

`$("#body").submit(function(){`

至

`$("#myform").submit(function(){`

在 HTML 中

`<form action="" name="login">`

至

`<form id='myform' action="" name="login">`

您还有几个语法错误，已在此处修复：

```
$(function() {
$("#myform").submit(function(){
var name = $("#player_name").val();
var dataString = 'player_name='+ name;
alert (dataString);
   $.ajax({
      type: "POST",
      url: "session_update.php",
      data: {player_name: name},
      success: function(){
        $('body').append("<div id='message'></div>");  
        $('#message').html("<h2>Logged in!</h2>");
      }//here was )
   });
     return false;
});//  |
  //   \/return was here
});​ 
```

[工作示例](http://jsfiddle.net/oceog/NnERs/)

**主要提示 - 使用开发控制台（按 F12）调试您的代码**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T11:52:44.327

```
also remove return false from the middle of your code

$(function() {
$("#body").submit(function(){
var name = $("#player_name").val();

   $.ajax({
      type: "POST",
      url: "session_update.php",
      data: {player_name:name},
      success: function(){
        $('#body').html("<div id='message'></div>");  
        $('#message').html("<h2>Logged in!</h2>");
      });
   }
});
   return false;
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T11:50:39.523

如果您不想提交表单：

1.  将 的 type="submit" 更改为`submit_btn`type="button"。
2.  `session_update.php`将页面的 AJAX 调用绑定到`submit_btn`点击事件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-02T11:53:28.530

你能试试这个。我认为问题出在您的点击事件上。

```
$(function() {

    $("#submit_btn").click(function(){
    var name = $("#player_name").val();
    var dataString = 'player_name='+ name
    alert (dataString);return false; 
           $.ajax({
              type: "POST",
              url: "session_update.php",
              data: dataString,
              success: function(){
                $('#body').html("<div id='message'></div>");  
                $('#message').html("<h2>Logged in!</h2>");
              });
           }
    });

}); 
```

# ios - 调整自定义 UITableViewCell 及其子视图的大小

> ID：13194592
> 
> 赞同：2
> 
> 时间：2012-11-02T11:43:46.390
> 
> 标签：ios, uitableview, resize, subviews

我已经使用 XIB 文件创建了自定义 UITableViewCell 并让它在 UITableView 中工作。我设计了自定义单元格，它是纵向尺寸的子视图，但是当我在风景模式下旋转设备时，我想调整单元格的大小，它是子视图。我为此编写了以下代码，但不确定为什么可见单元格中只有一个单元格被调整大小而其余部分保持不变！有人可以帮助我调整自定义单元格及其子视图大小的标准做法吗？谢谢。

```
#pragma mark - UITableView delegate methods

- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"CustomTableViewCellIdentifier";
    CustomTableViewCell *cell = (CustomTableViewCell*)[tv dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        // Load custom cell from NIB
        self.customTableViewCell = [[[NSBundle mainBundle] loadNibNamed:@"CustomTableViewCell" owner:self options:nil] objectAtIndex:0];
        cell = _customTableViewCell;
    }
    // Use cell
    ...
}

#pragma mark - Layout views

- (void)layoutForOrientation:(UIInterfaceOrientation)orientation {
    if (UIInterfaceOrientationIsPortrait(orientation))
        [self layoutPortraitViews];
    else
        [self layoutLandscapViews];
}

- (void)layoutLandscapViews {
    self.customTableViewCell.frame = CGRectMake(0, 0, 1024, 40);
    self.customTableViewCell.contentSize = CGSizeMake(1024, 40);
    self.customTableViewCell.cellBackgroundImageView.frame = CGRectMake(0, 0, 1024, 40);
    self.customTableViewCell.assetNameLabel.frame = CGRectMake(15, 0, 245, 20);
    self.customTableViewCell.assetTypeLabel.frame = CGRectMake(15, 20, 245, 20);
    self.customTableViewCell.assetImageView.frame = CGRectMake(265, 20, 120, 20);
    self.customTableViewCell.assetValueLabel.frame = CGRectMake(265, 20, 120, 20);

    [self.tableView reloadData];
}

- (void)layoutPortraitViews {
    self.customTableViewCell.frame = CGRectMake(0, 0, 768, 40);
    self.customTableViewCell.contentSize = CGSizeMake(768, 40);
    self.customTableViewCell.cellBackgroundImageView.frame = CGRectMake(0, 0, 768, 40);
    self.customTableViewCell.assetNameLabel.frame = CGRectMake(15, 0, 180, 20);
    self.customTableViewCell.assetTypeLabel.frame = CGRectMake(15, 20, 180, 20);
    self.customTableViewCell.assetImageView.frame = CGRectMake(200, 20, 90, 20);
    self.customTableViewCell.assetValueLabel.frame = CGRectMake(200, 20, 90, 20);

    [self.tableView reloadData];
} 
```

[解决方案]

经过一番挣扎后，这项工作得到了解决。更改单元格的大小及其子视图不起作用，因为我必须处理方向更改，继续重复使用单元格以提高性能，并且当您旋转设备时可见单元格会发生变化，因此无法使用我的第一种方法找出解决方案。这是我的另一个解决方案。

这里的挑战是在不影响性能的情况下同时处理方向和自定义单元格。

我在 NIB 中创建了两个单元格视图，一个用于纵向，另一个用于横向。

使用了两个变量；

```
BOOL refreshing;
UIInterfaceOrientation currentOrientation; 
```

从视图将出现；

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    currentOrientation = [UIApplication sharedApplication].statusBarOrientation;
    [self layoutForOrientation:[UIApplication sharedApplication].statusBarOrientation];
} 
```

来自轮换代表；

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    refreshing = YES;
    currentOrientation = toInterfaceOrientation;
    [UIView animateWithDuration:duration animations:^{
        [self.tableView reloadData];
        [self layoutForOrientation:toInterfaceOrientation];
    }];
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    refreshing = NO;
} 
```

来自 tableview 委托；

```
- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"CustomTableViewCellIdentifier";
    CustomTableViewCell *cell = (CustomTableViewCell*)[tv dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil || refreshing)
     {
        if (UIInterfaceOrientationIsPortrait(currentOrientation))
            cell = [[[NSBundle mainBundle] loadNibNamed:@"CustomTableViewCell" owner:self options:nil] objectAtIndex:0];
         else 
            cell = [[[NSBundle mainBundle] loadNibNamed:@"CustomTableViewCell" owner:self options:nil] objectAtIndex:1];
    }

    //Use cell
} 
```

...因此，此解决方案仅在发生方向更改事件时才会重新加载单元格。快乐编码:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:56:27.930

调整自定义 NIB xib 单元格的大小可能会或可能不会在旋转时提供所需的 UI。为了使任务更容易..创建两个 UITableViewCell 笔尖

```
 if (!cell) {
            if(UIInterfaceOrientationIsLandscape(self.interfaceOrientation)) {
                [[NSBundle mainBundle] loadNibNamed:@"CustomTableViewCell-Landscape" owner:self options:nil];
            }else {
                [[NSBundle mainBundle] loadNibNamed:@"CustomTableViewCell" owner:self options:nil];
     }
} 
```

进一步呼吁`[tableView reloadData];`改变方向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:58:24.667

因为您`self.customTableViewCell`随时都会立即覆盖。所以它只返回最后一个对象。

你应该写下面的代码来调整你的全部`UITableViewCells`

```
for(UITableViewCell *cell in self.tableView.visibleCells)
{
     if([cell isKindOfClass:[UITableViewCell class]])
     {
          cell.frame = CGRectMake(0, 0, 1024, 40);
          cell.contentSize = CGSizeMake(1024, 40);
          cell.cellBackgroundImageView.frame = CGRectMake(0, 0, 1024, 40);
          cell.assetNameLabel.frame = CGRectMake(15, 0, 245, 20);
          cell.assetTypeLabel.frame = CGRectMake(15, 20, 245, 20);
          cell.assetImageView.frame = CGRectMake(265, 20, 120, 20);
          cell.assetValueLabel.frame = CGRectMake(265, 20, 120, 20);
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:04:26.957

我认为这可以通过在界面构建器（或新的自动布局）中正确使用自动调整大小的掩码来实现，而不是每次都通过代码调整框架的大小。

# python - 返回否定条件与 if 块

> ID：13194599
> 
> 赞同：6
> 
> 时间：2012-11-02T11:44:04.283
> 
> 标签：python, oop, coding-style, procedural-programming

如果我有一个应该在某些条件下执行操作的函数，并返回 null ，这更清晰：

```
def func():
    if not condition:
        return None

    [...]
    return asd 
```

或者

```
def func():
    if condition:
        [...]
        value = asd
    else:
        value = None

    return value 
```

我已经阅读了每个函数都应该有一个返回点的范例。另一方面，python 的禅宗说 flat 比嵌套更好，更高版本在整个操作代码上方添加了一个嵌套级别（标记为 [...]）。

还请记住，条件可能更复杂，例如，添加多个嵌套级别。

# jquery - jqGrid 内联编辑功能

> ID：13194600
> 
> 赞同：2
> 
> 时间：2012-11-02T11:44:07.490
> 
> 标签：jquery, asp.net-mvc, jqgrid

我想为我的 jqGrid 分配内联编辑功能，即当用户单击特定行时，他应该能够编辑..

我正在关注 jQuery 代码的这个 url，但它不起作用，我也无法编辑

[http://www.trirand.com/blog/jqgrid/jqgrid.html#](http://www.trirand.com/blog/jqgrid/jqgrid.html#)

这是我的看法

```
<table id="list"></table>
</table> 
```

JavaScript 代码：

```
 <script type="text/javascript">
    $(function () {
        var lastsel;
        jQuery("#list").jqGrid({
            url: '/Home/GetStudents/',
            datatype: 'json',
            mtype: 'POST',
            colNames: ['StudentID', 'FirstName', 'LastName', 'Email'],
            colModel: [
      { name: 'StudentID',sortable: false,key:true },
      { name: 'FirstName' },
      { name: 'LastName', sortable: false},
      { name: 'Email', width: 200,  sortable: false}],
      cmTemplate: {align: 'center', editable: true},
            pager: '#pager',
            width: 750,
            rowNum: 15,
            rowList: [5, 10, 20, 50],
            sortname: 'StudentID',
            sortorder: "asc",
            viewrecords: true,
            caption: ' My First JQgrid',
            onSelectRow: function (StudentID) {

                if (StudentID != lastsel) {

                    lastsel = StudentID;   
                    jQuery('#list').jqGrid('restoreRow', lastsel);
                    jQuery('#list').jqGrid('editRow', StudentID, true);

                }

            },

            editurl: '/Home/GetStudents/',
            caption: "Using events example"

        });
        jQuery("#list").jqGrid('navGrid', "#pager", { edit: false, add: false, del: false });
    });

</script> 
```

这些是我的脚本，我添加了

```
<link href="/Content/jquery-ui-1.8.7.css" rel="stylesheet" type="text/css" />
<link href="/Content/ui.jqgrid.css" rel="stylesheet" type="text/css" />
<link href="/Content/ui.multiselect.css" rel="stylesheet" type="text/css" />
<script src="/Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>  
<script src="/Scripts/grid.locale-en.js" type="text/javascript"></script>
<script src="/Scripts/jquery.jqGrid.min.js" type="text/javascript"></script>
<script src="/Scripts/rowedex3.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:35:14.373

首先，您必须定义`editurl`jqGrid 的选项，该选项将负责处理服务器端的行保存。

下一个问题：您应该定义`lastsel`要在`onSelectRow`回调中使用的变量。

我建议您另外使用or等`colModel`​​项目的默认属性（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)）。如果您需要重新定义网格列的一些默认设置，您可以使用（参见[此处](https://stackoverflow.com/a/6047856/315935)）获取更多信息。您可以从您的网格减少到以下`width: 150``sortable: true``cmTemplate``colModel`

```
colModel: [
        { name: 'StudentID', sortable: false, key: true },
        { name: 'FirstName' },
        { name: 'LastName', sortable: false },
        { name: 'Email', width: 200, sortable: false}],
cmTemplate: {align: 'center', editable: true} 
```

此类更改将使代码更具可读性和易于维护。我添加`key: true`以确保 jqGrid 使用列中的值作为 rowid。取决于您返回的 JSON 数据的格式，它可能不是必需的，但在我看来，它使代码更具可读性和更易于维护。

您还可以删除`<table>`用于网格的元素的所有属性。

此外，由于性能原因，我建议您始终使用`gridview: true`jqGrid 选项并替换`pager: jQuery('#pager')`为`pager: '#pager'`.

# javascript - onRowSelect 与 onRowDblClick 一起触发

> ID：13194601
> 
> 赞同：0
> 
> 时间：2012-11-02T11:44:12.180
> 
> 标签：javascript, jquery, events, dhtmlx

我有 dhtmlx 网格，并在其中附加了两个事件：

```
var click_flag = false;
        dhxGrid.attachEvent("onRowDblClicked", function (rowId, cellIndex) {
            click_flag = true;
            ...                
        });
        dhxGrid.attachEvent("onRowSelect", function (rowId, cellIndex) {
            if (!click_flag) {
                ...     
            }           
        }); 
```

但是 onRowSelect 总是被触发，即使我双击网格的一行。有没有办法阻止它执行？我尝试使用 click_flag 但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:32:23.420

由浏览器的行为引起（dbl-click 操作也会生成单击事件）您可以使用一些自定义时序逻辑将这两个事件分开，例如 next

```
var click_timer;
dhxGrid.attachEvent("onRowDblClicked", function (rowId, cellIndex) {
    if (click_timer) clearTimeout(click_timer);
    ... actual ondblclick code here ...
});
dhxGrid.attachEvent("onRowSelect", function (rowId, cellIndex) {
    click_timer = window.setTimeout(function(){
        ... actual onrowselect code here ...
    }, 250);
}); 
```

# mono - 无法为 ARM 交叉编译 Mono

> ID：13194610
> 
> 赞同：5
> 
> 时间：2012-11-02T11:45:08.777
> 
> 标签：mono, arm, cross-compiling, embedded-linux

在过去的三天里，我一直在尝试在我的 Win7 32 位机器和 CodeSourcery Sourcery G++ ARM 工具链上使用虚拟 Ubuntu（12.04）为 TechNexion Blizzard 板（运行未知版本的 Angstrom）交叉编译 Mono 2.11.4 ，但很少/没有成功。我已经按照网络上的每个教程进行操作，但它不起作用。

CodeSourcery Sourcery G++ 工具链和 Scratchbox2（从最新的 git 源代码编译）已安装并且可以工作。Scratchbox2 使用

```
sb2-init armv7 /home/dev/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-linux-gnueabi-gcc 
```

在正确的目录中（~/CodeSourcery/Sourcery_G++_Lite/arm-none-linux-gnueabi/libc）。

我可以编译一个简单的“Hello world”（cpp），在板上编译并运行它。在 Ubuntu 中：

```
file hello
hello: ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.16, not stripped 
```

我下载了 Mono 2.11.4 的源代码并按照其中的[说明](https://stackoverflow.com/questions/4955314/cross-compile-mono-for-arm)进行操作。第一部分（在本机机器上）运行良好，没有错误。但是，当我运行第二部分（为 ARM 编译）时，**./configure**按预期工作，但随后 make 失败，并显示**"../lib/mini[some_file] is incompatible with arm output"**。**这些文件**上的一个文件说它们确实是 Intel 80386 可执行文件，但我不知道为什么。

所以下一步是运行**make clean**并重复这些步骤，但它仍然产生了相同的结果。

然后我尝试**./configure**并在 sb2 中**制作**整个东西，起初它似乎工作。但随后出现了一些错误，构建中断：

```
./.libs/libmini.a(libmini_la-mini-arm.o): In function `mono_arch_init':
/home/dev/source/host-mono/mono-2.11.4/mono/mini/mini-arm.c:689: undefined reference to `debugger_agent_single_step_from_context'
/home/dev/source/host-mono/mono-2.11.4/mono/mini/mini-arm.c:689: undefined reference to `debugger_agent_breakpoint_from_context'
/home/dev/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-linux-gnueabi-ld: .libs/libmono-2.0.so.1.0.0: hidden symbol `debugger_agent_single_step_from_context' isn't defined
/home/dev/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-linux-gnueabi-ld: final link failed: Nonrepresentable section on output 
```

关于我做错了什么的任何想法，或者我可能错过的教程的任何提示？

//安德斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:05:02.573

您需要非常小心在交叉编译时针对哪些头文件和库进行编译，否则您可能会发现自己在运行时遇到因库的二进制不兼容而导致的奇怪且违反直觉的崩溃。这么说来，Linux ARM 发行版在二进制兼容性方面非常安全——通常以牺牲性能为代价。

您很有可能正在针对您的开发主机头文件和库进行构建 - 因此架构不匹配。

您可能会发现预先构建的 opkg 映像可以正常工作。Angstrom 为您提供[预构建的软件包](http://www.angstrom-distribution.org/repo/?pkgname=mono)。它可能就像从 Angstrom 软件包存储库进行网络安装一样简单。

如果您发现确实需要从源代码构建，解决问题的一个简单方法是获取 Angstrom 的构建环境并使用它来构建单声道。[解决此问题的最简单方法是从Angtrom 在线映像生成器](http://narcissus.angstrom-distribution.org)获取预构建映像（和开发映像）。幸运的是，您的董事会存在一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:50:26.257

编译原生代码最好使用 ScratchBox

```
[sbox-ARMEL: ~] > mkdir cross
[sbox-ARMEL: ~] > cd cross
[sbox-ARMEL: ~] > tar xzf ../mono-x.xx.tar.gz

[sbox-ARMEL: ~] > cd arm-mono-x.xx
[sbox-ARMEL: ~] > ./configure --disable-mcs-build
[sbox-ARMEL: ~] > make 
[sbox-ARMEL: ~] > make install DESTDIR=`pwd`/tmptree 
```

另一方面，打开一个新终端并构建托管代码。

```
$ mkdir host-mono
$ cd host-mono
$ tar xzf ../mono-1.xx.tar.gz

$ cd mono-1.xx
$ ./configure
$ make
$ make install DESTDIR=`pwd`/tmptree 
```

# android - Android中的效率数据存储

> ID：13194612
> 
> 赞同：0
> 
> 时间：2012-11-02T11:45:16.467
> 
> 标签：android, database, caching, storage

我需要存储来自网络的本地化数据，这些数据以`JSON`字符串形式出现。到目前为止，我有一个`DataAdapter`期望 a 中`JSONObject`的数据并收集数据以进行可视化的数据。但现在我根本没有缓存。

我想存储上次调用的数据，包括`Etag`用于观察变化的数据。所以我想首先显示缓存的数据，并在网络上查看是否有一些更改，并尽可能显示它们是可行的。我看到有三个选项：

*   将整个 JSON 简单存储在一个文件中
*   在 SQLite 数据库中存储数据
*   使用[适用于 Android 的 CouchDB](https://github.com/couchbase/Android-Couchbase)

我不确定哪种方式最有效......我还想存储/缓存图像。顺便说一句，我还希望到目前为止数据已加密，*存储系统*不能直接在闪存上写入任何数据，几秒钟后又会出现另一组数据。而且我想节省电池。

**哪种存储数据的能源效率最高？
哪种方式存储数据最快？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:54:29.113

对于小型 Web 服务请求，您可以使用[ResponseCache](https://developer.android.com/reference/java/net/ResponseCache.html)。在处理较大的对象时，您可能希望创建自己的缓存。

您还可以：

*   序列化数据并保存到本地文件
*   对于基本数据，如果要存储更长的时间，您可以将其保存在[SharedPreferences中](https://developer.android.com/reference/android/content/SharedPreferences.html)
*   如果您有大量数据并且需要对其执行关系操作，请使用 sqlite。

有关图像缓存，请参阅：

[Android 图像缓存](https://stackoverflow.com/questions/1945201/android-image-caching)

[Android：图像缓存策略和内存缓存大小](https://stackoverflow.com/questions/3085366/android-image-cache-stategy-and-memory-cache-size?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:42:41.590

我的解决方案是扩展一个`LruCache`我覆盖`sizeOf`函数以获得实际大小的位置。

对于`Drawable`s，我使用以下代码：

```
if(rawdata  instanceof BitmapDrawable) {
    Bitmap bmp = ((BitmapDrawable)rawdata).getBitmap();
    mem += bmp.getRowBytes() * bmp.getHeight();
} 
```

# cocoa-touch - 是否有必要总是在块内使用对 self 的弱引用..？

> ID：13194613
> 
> 赞同：43
> 
> 时间：2012-11-02T11:45:18.883
> 
> 标签：cocoa-touch, cocoa, objective-c-blocks

我对在块内使用 self 感到困惑，我浏览了一些 Apple 的文档，但仍然找不到正确的答案。

有些人总是说在块中使用弱自我，但有些人说在复制的块中使用弱自我，而不是总是使用。

样品 1：

```
self.handler = ^(id response, NSError *error)
{
    self.newresponse = response; //use weak self here
}; 
```

样本 2：

使用弱自我；

```
__weak myViewController *weakSelf = self;

[UIView animateWithDuration:interval delay:0.0 options:curve animations:^
{
    [weakSelf.view.superview setTransform:CGAffineTransformMakeTranslation(0, -106)];
    //in above is it use of weak is neassary 
}
completion:^(BOOL finished)
{

}]; 
```

没有软弱的自己；

```
__weak myViewController *weakSelf = self;

[UIView animateWithDuration:interval delay:0.0 options:curve animations:^
{
    [myViewController.view.superview setTransform:CGAffineTransformMakeTranslation(0, -106)];

}
completion:^(BOOL finished)
{

}]; 
```

在上述样本中，哪些是正确的……？**我正在使用 ARC

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-11-02T11:59:09.563

您应该只使用对 的弱引用`self`，如果`self`将保留对块的引用。

在您的示例中，您没有保留对您的块的引用`self`，您只是使用与 内联的块`UIView animateWithDuration:`，因此无需使用`__weak myViewController *weakSelf = self;`

为什么会这样？因为块将保留对它使用的任何变量的强引用，这些变量来自使用该块的类。这包括`self`. 现在如果类实例本身保持对块的强引用，而块保持对类实例的强引用，你就有了一个retain循环，这会导致内存泄漏。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-05T18:30:34.737

这是一些演示@WDUK答案的代码：

```
typedef void (^SimpleBlock)();

@interface ObjectThatRetainsBlock : NSObject
@property(nonatomic, strong) SimpleBlock block;
@end

@implementation ObjectThatRetainsBlock

- (instancetype)init {
  self = [super init];
  if (self) {
    self.block = ^{ NSLog(@"Running block in %@", self); };
    self.block();
  }
  return self;
}

- (void)dealloc {
  NSLog(@"ObjectThatRetainsBlock is deallocated.");
}

@end

@interface ObjectThatDoesNotRetainBlock : NSObject
@end

@implementation ObjectThatDoesNotRetainBlock

- (instancetype)init {
  self = [super init];
  if (self) {
    SimpleBlock block = ^{ NSLog(@"Running block in %@", self); };
    block();
  }
  return self;
}

- (void)dealloc {
  NSLog(@"ObjectThatDoesNotRetainBlock is deallocated.");
}

@end

- (void)test {
  ObjectThatRetainsBlock *objectThatRetainsBlock =
      [[ObjectThatRetainsBlock alloc] init];
  ObjectThatDoesNotRetainBlock *objectThatDoesNotRetainBlock = 
      [[ObjectThatDoesNotRetainBlock alloc] init];
} 
```

该`test`方法打印：

```
Running block in <ObjectThatRetainsBlock: 0x7f95f3335e50>
Running block in <ObjectThatDoesNotRetainBlock: 0x7f95f3335c50>
ObjectThatDoesNotRetainBlock is deallocated. 
```

请注意，在`init`of 方法中`ObjectThatDoesNotRetainBlock`，我们将其创建`block`为 ivar，但是当`block`超出范围时，我们不会保留对它的引用。

在该`test`方法中，当两个对象超出范围时，请注意它`objectThatDoesNotRetainBlock`已被释放，因为它不是保留循环的一部分。

另一方面，`objectThatRetainsBlock`不会被释放，因为它是保留周期的一部分。它保留了超出方法调用范围的块。

如果您需要其他解释，请参阅[此答案](https://stackoverflow.com/questions/20030873/always-pass-weak-reference-of-self-into-block-in-arc)。

# c# - 我如何解析html字符串

> ID：13194614
> 
> 赞同：-5
> 
> 时间：2012-11-02T11:45:22.383
> 
> 标签：c#, asp.net, html

我有一个 html 字符串，我想解析它；

```
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head id="Head1" runat="server">
        <title></title>
    </head>
    <body>
        <table>
            <tr class="MyColumn">
                <td colspan="2">
                    &nbsp;&nbsp;<b>Team List</b>
                </td>
            </tr>
            <tr valign="top">
                <td width="313">
                    &nbsp;<img src="weight.gif" width="11" height="10" alt="Encumbrance: 0" title="Encumbrance: 0">&nbsp;
                    <a href="Test.asp?action=ViewItemDetails&ItemTypeiD=1">Real Madrid</a>
                </td>
                <td align="right" width="140">
                </td>
            </tr>
            <tr valign="top">
                <td width="313">
                    &nbsp;<img src="weight.gif" width="11" height="10" alt="Encumbrance: 1" title="Encumbrance: 1">&nbsp;
                    <a href="Test.asp?action=ViewItemDetails&ItemTypeID=2">Barcelona</a>
                </td>
                <td align="right" width="140">
                </td>
            </tr>
            <tr class="MyColumn">
                <td colspan="2">
                    &nbsp;&nbsp;<b>Money List</b>
                </td>
            </tr>
            <tr valign="top">
                <td width="313">
                    &nbsp;<img src="weight.gif" width="11" height="10" alt="Encumbrance: 0" title="Encumbrance: 0">&nbsp;
                    <a href="Test.asp?action=ViewItemDetails&ItemTypeiD=1">$</a>
                </td>
                <td align="right" width="140">
                </td>
            </tr>
            <tr valign="top">
                <td width="313">
                    &nbsp;<img src="weight.gif" width="11" height="10" alt="Encumbrance: 1" title="Encumbrance: 1">&nbsp;
                    <a href="Test.asp?action=ViewItemDetails&ItemTypeID=2">€&lt;/a>
                </td>
                <td align="right" width="140">
                </td>
            </tr>            
        </table>
    </body>
    </html> 
```

我怎样才能做到这一点;

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:07:27.917

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var teams = doc.DocumentNode.SelectNodes("//td[@width='313']")
                .Select(td => new TeamClass
                {
                    TeamName = td.Element("a").InnerText,
                    TeamId = HttpUtility.ParseQueryString(td.Element("a").Attributes["href"].Value)["ItemTypeID"]
                })
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:47:03.453

看看这个 lib http: [HTML Agility Pack](http://html-agility-pack.net)。
它可以帮助您进行 HTML 解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:55:08.030

您可以使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)

```
String html; //your html string
String pattern = @"action=ViewItemDetails&ItemType[I|i]D=(\d*)"">(.*)</a>";
MatchCollection matches = Regex.Matches(html, pattern);
var list = new List<TeamClass>();
foreach (Match match in matches)
{
    TeamClass team = new TeamClass();
    team.TeamName = match.Groups[2].Value;
    team.TeamId = Int32.Parse(match.Groups[1].Value);
    list.Add(team);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:01:32.547

尝试[HTML 敏捷性](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)：

尝试类似（未经测试的代码）：

```
var TeamList = from lnks in document.DocumentNode.Descendants()
               where lnks.Name == "a" && 
                    lnks.Attributes["href"] != null && 
                    lnks.InnerText.Trim().Length > 0
               select new
               {

                  TeamId= (lnks.Attributes["href"].Value).
                          Substring((lnks.Attributes["href"].Value).Length-1, 1),
                  TeamName= lnks.InnerText
               }; 
```

# java - Java 1.4 中的 String.format 等效项

> ID：13194615
> 
> 赞同：6
> 
> 时间：2012-11-02T11:45:30.553
> 
> 标签：java, formatting, java1.4

`String.format()`目前我有一个在 Java 5 中调用的方法，它运行良好

```
String.format("%02x", octet) //octet is a int type 
```

但是由于一些问题，我们需要在 JDK 1.4 环境中部署此代码，而 String.format 在 1.4 中不存在。

任何人都知道执行此功能的任何替代方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:53:40.340

您可以使用类似以下代码段的内容：

```
String hexString = Integer.toHexString(octet);
if (hexString.length() < 2) {
    hexString = "0" + hexString;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:50:20.473

您需要自己使用`Integer.toHexString(int)`和填充文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:42:52.310

[Retrotranslator](http://retrotranslator.sourceforge.net/)支持将 String.format 转换为 JDK 1.4

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:38:14.883

我认为您应该看看[Retroweaver](http://retroweaver.sourceforge.net)，它可以让您在 1.4 JVM 上部署 Java 1.5。

# php - 使用 sendgrid 和 codeigniter 向多个收件人发送邮件

> ID：13194618
> 
> 赞同：3
> 
> 时间：2012-11-02T11:45:36.170
> 
> 标签：php, codeigniter, email, sendgrid

我最近注册了 SendGrid 并查看了它们与 CodeIgniter 的集成。

他们建议执行以下操作来发送邮件：

```
 $this->email->initialize(array(
      'protocol' => 'smtp',
      'smtp_host' => 'smtp.sendgrid.net',
      'smtp_user' => 'sendgridusername',
      'smtp_pass' => 'sendgridpassword',
      'smtp_port' => 587,
      'crlf' => "\r\n",
      'newline' => "\r\n"
    ));

    $this->email->from('your@example.com', 'Your Name');
    $this->email->to('someone@example.com');
    $this->email->cc('another@another-example.com');
    $this->email->bcc('them@their-example.com');
    $this->email->subject('Email Test');
    $this->email->message('Testing the email class.');
    $this->email->send();

    echo $this->email->print_debugger(); 
```

这似乎是向单个人发送电子邮件的一个不错的解决方案，但是如果我有一封电子邮件想发送给一大群人怎么办？是否可以将“to”或“bcc”作为数组发送？

将 SendGrid 与 CI 结合使用是否有不同的集成方法？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T12:02:37.083

您可以按正常方式使用它。您可以传递电子邮件地址数组或以逗号分隔的电子邮件地址字符串。

喜欢

```
$list = array('one@example.com', 'two@example.com', 'three@example.com');
// or
//$list = 'one@example.com, two@example.com, three@example.com';

$this->email->to($list);
// or
//$this->email->cc($list);
// or
//$this->email->bcc($list); 
```

# android - Android 在特定应用程序和位图资源上共享意图

> ID：13194619
> 
> 赞同：0
> 
> 时间：2012-11-02T11:45:40.113
> 
> 标签：android, android-intent, share

我正在尝试使用共享意图从我的应用程序共享到 Hyves。如果我安装了 hyves 应用程序并从图库中共享它会切换到 hyves 应用程序，并将图像正确上传到 hyves，所以它应该可以工作。

问题是，我找不到它记录了 hyves 的正确意图应该如何工作，但我假设画廊只上传图像，所以我有这个：

```
Bitmap image = BitmapFactory.decodeFile(MyGlobals.INSTANCE.activeSetting.f_image_path); 
```

这是我在应用程序中提取“活动”或“选定”图像的代码行。此时图像已保存到 SD 卡，所以我可能会读取 uri 而不是解码文件，但我希望它以这种方式对 hyves 和 facebook 具有相同的方法。

然后我打电话：

```
Intent hyvesIntent = new Intent(Intent.ACTION_SEND);
 hyvesIntent.setPackage("com.hyves.android.application");
 hyvesIntent.setType("image/jpeg");
 hyvesIntent.putExtra("image", image);
 startActivityForResult(hyvesIntent, 666); 
```

首先，我不确定 setPackage 是否可以在这里使用，但我正在检查这个包是否存在以启用/禁用共享，这是可见的包名称。

我需要活动结果然后通知图像是否共享。

这里发生了什么，它启动了 Hyves 应用程序，但我得到全白屏，然后 Hyves 应用程序超时。

那么，我可以在意图中使用位图吗？ setPackage 可以还是应该 setClass？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:28:55.510

也许您不能将位图直接放在意图中。首先将位图转换为字节数组而不是发送另一侧并转换为位图

```
 //convert bitmap to bytearray
    public static byte[] getBitmapAsByteArray(Bitmap bitmap, boolean type) {
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    if (type) {
        bitmap.compress(CompressFormat.PNG, 0, outputStream);
    } else {
        bitmap.compress(CompressFormat.JPEG, 0, outputStream);
    }
    return outputStream.toByteArray();
 }
     //convert bitmap to bytearray
    public static Bitmap getBitmap(byte[] imgByte){
      Bitmap bm = BitmapFactory.decodeByteArray(imgByte, 0, imgByte.length);
       return bm;
    }
   //than intent

          Intent hyvesIntent = new Intent(Intent.ACTION_SEND);
          hyvesIntent.setPackage("com.hyves.android.application");
           hyvesIntent.setType("image/jpeg");
           hyvesIntent.putExtra("image", getBitmapAsByteArray(image,true));
           startActivityForResult(hyvesIntent, 666); 
```

我希望这是放置图像的正确方法

# android - Android - 使用 styles.xml 的应用程序背景

> ID：13194621
> 
> 赞同：0
> 
> 时间：2012-11-02T11:45:43.360
> 
> 标签：android, android-layout

我正在尝试使用以下代码在 styles.xml 中全局设置背景

样式.xml

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
  <style name="AppTheme" parent="android:Theme.Light" >      
    <item name="android:background">@drawable/background</item>      
  </style>
</resources> 
```

我还在 AndroidManifest.xml 文件中添加了它

```
<application android:label="@string/app_name"
    android:icon="@drawable/ic_launcher"
    android:theme="@style/AppTheme">

....
</application> 
```

但是图像没有显示出来。我在所有可绘制文件夹中都有图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:50:09.617

试试这个。

```
<style name="Theme" parent="@android:style/Theme">
    <item name="android:windowBackground">@drawable/background</item>
</style> 
```

# javascript - 页面加载时获取位置

> ID：13194623
> 
> 赞同：3
> 
> 时间：2012-11-02T11:45:58.717
> 
> 标签：javascript, css, html, geolocation

我正在使用 HTML、CSS 和 Java 脚本构建网站。我想在页面加载时获取用户的位置。所以他们不需要按下按钮。我希望有人可以提供帮助。

```
!DOCTYPE html>
<html>
<body>
<p id="demo">Click the button to get your coordinates:</p>
<button onclick="getLocation()">Try It</button>
<script>
var x=document.getElementById("demo");
function getLocation(){
 if (navigator.geolocation){
   navigator.geolocation.getCurrentPosition(showPosition);
 }
 else{
   x.innerHTML="Geolocation is not supported by this browser.";}
 }

function showPosition(position){
  x.innerHTML="Latitude: " + position.coords.latitude + 
  "<br>Longitude: " + position.coords.longitude;    
 }
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T11:53:25.463

只需调用**`getLocation()`**

```
<script>
        var x=document.getElementById("demo");
        function getLocation()
         {
        if (navigator.geolocation)
        {
        navigator.geolocation.getCurrentPosition(showPosition);
        }
        else{x.innerHTML="Geolocation is not supported by this browser.";}
        }
        function showPosition(position)
        {
        x.innerHTML="Latitude: " + position.coords.latitude + 
        "<br>Longitude: " + position.coords.longitude;  
        }
        getLocation()
        </script> 
```

小提琴：[https ://jsfiddle.net/ES4TF/](https://jsfiddle.net/ES4TF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-28T18:57:58.867

对于任何想要在不添加其他脚本的情况下做出反应的人来说，这是对上述答案的更新。这是用于 React 等的 ES2015 格式的代码，无需使用上面的任何 HTML 内容。只需导入该功能。特别感谢第一篇文章，因为我的文章是基于它的。

```
 const showPosition = position =>{
              let loc = `Latitude:${position.coords.latitude}  logitude: 
              ${position.coords.longitude}`
               console.log(loc)
               return loc
             }

            const getLocation =  () => {
            if (navigator.geolocation) {
               return navigator.geolocation.getCurrentPosition(showPosition);
              }
              return false
            } 
```

然后只需导入该功能并使用它

如果您想获取状态和 zip，您可以使用 google API。这是获取地理位置和发送到 google 的代码，然后为您提供状态、地址结果。您将需要激活 google geolocation API。

```
//Docs - https://developers.google.com/maps/documentation/geocoding/intro#ReverseGeocoding

  const getData = async (url) => {
         let res = await fetch(url)
         let json = await res.json()
         console.log(json);
         return json
         }

 const showPosition = async position =>{
        let loc = `Latitude:${position.coords.latitude}  logitude: ${position.coords.longitude}`
        let url = `https://maps.googleapis.com/maps/api/geocode/json?latlng=${position.coords.latitude},${position.coords.longitude}&key={GOOGLE_API_key}`
        console.log(loc)

        let address = await getData(url)
        console.log(`results`,address)
        return address
        }

 const getLocation = async () => {
  if (navigator.geolocation) {
     return navigator.geolocation.getCurrentPosition(showPosition);
    }
   return false
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-05T16:42:03.260

```
<p id="demo"></p>
<script>
 var x=document.getElementById("demo");
        function getLocation()
         {
        if (navigator.geolocation)
        {
        navigator.geolocation.getCurrentPosition(showPosition);
        }
        else{x.innerHTML="Geolocation is not supported by this browser.";}
        }
        function showPosition(position)
        {
        x.innerHTML="Latitude: " + position.coords.latitude + 
        "<br>Longitude: " + position.coords.longitude;  
        }
        getLocation()
</script> 
```

# c++ - 如何检查 ADuser“密码永不过期”属性检查或不使用 C++ Win32API？

> ID：13194624
> 
> 赞同：0
> 
> 时间：2012-11-02T11:46:07.943
> 
> 标签：c++, winapi, active-directory, adsi

我正在使用 C++ Win32 API ...

我想知道用户密码策略属性值...

即“密码永不过期”，如何使用 C++ Win32 API 检查此属性是否已检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:00:31.097

您可以使用 COM 接口 IADsUser。请参阅[此 MSDN 示例以启用“永不过期”标志](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746416%28v=vs.85%29.aspx)

您可以在行之前使用它的第一部分`V_I4(&var) |= ADS_UF_DONT_EXPIRE_PASSWD;`- 将其替换为`if (V_I4(&var) & ADS_UF_DONT_EXPIRE_PASSWD) { /* option is enabled! your code here */}`

希望这可以帮助。这是工作:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:35:45.573

请查看此...希望它可以解决您的问题

WriteLogMessage("处理中：" + UserEntry.Name);

```
 WriteLogMessage("Max Password Age:" + iMaxPwdAge);

                    //Console.WriteLine("Account control:" + UserEntry.Properties["userAccountcontrol"].Value);

                    int userAccountControl = Convert.ToInt32(UserEntry.Properties["userAccountcontrol"].Value);
                    if ((userAccountControl & ADS_DONT_EXPIRE_PASSWORD) > 0)
                    {
                        WriteLogMessage("Password never expires for:" + UserEntry.Name);
                    }
                    else
                    {
                        WriteLogMessage("Password expiration date found for:" + UserEntry.Name);

                        ActiveDs.IADsUser native = (ActiveDs.IADsUser)UserEntry.NativeObject;

                        DateTime passwordLastChanged = new DateTime(9999, 1, 1);
                        try 
```

如果您想使用没有脚本，请使用第三方工具。它会自动将您更新为密码已过期和密码永不过期。

# sql - SQL Server 2005：将 varchar 值“0.00”转换为数据类型 int 时转换失败

> ID：13194630
> 
> 赞同：2
> 
> 时间：2012-11-02T11:46:29.197
> 
> 标签：sql, sql-server, sql-server-2005

将此行添加到我的查询中时：

```
convert(varchar(20), convert(varchar(20),
sum(case when tsr.other like '%aa%' then tsr.block1 else 0 end) +
sum(case when tsr.other like '%aa%' then tsr.block2 else 0 end) +
sum(case when tsr.other like '%aa%' then tsr.block3 else 0 end) +
sum(case when tsr.other like '%aa%' then tsr.block4 else 0 end)) * 450) 
```

我收到此错误消息：

> *将 varchar 值“0.00”转换为数据类型 int 时转换失败*

块列中的数据是天 - 例如`10.0`

有任何想法吗？

我已经修好了，只是将 450 更改为 450.0。

varchars 的原因是这只是多个联合选择语句中的 1 个中的 1 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:50:53.893

10.0 不是整数 - 它是小数。

尝试

```
declare @i int 
select @i = convert(decimal(9,4),'10.0')
select @i 
```

并且从十进制到整数的转换将隐式完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:34:21.627

```
 '10.0' isn't an int/decimal  - it's a varchar .   
 do any mathematical calculation only on decimal/numeric/float/int values.

 SELECT convert(varchar(20), convert(decimal(10,2), sum(case when
 tsr.other like '%aa%' then  convert(decimal(10,2),tsr.block1) else 0
 end) + sum(case when tsr.other like '%aa%' then 
 convert(decimal(10,2),tsr.block2) else 0 end) + sum(case when
 tsr.other like '%aa%' then  convert(decimal(10,2),tsr.block3) else 0
 end) + sum(case when tsr.other like '%aa%' then 
 convert(decimal(10,2),tsr.block4) else 0 end)) * 450) 
```

# php - 从 fancybox 更新父页面上的元素

> ID：13194632
> 
> 赞同：0
> 
> 时间：2012-11-02T11:46:39.570
> 
> 标签：php, javascript, jquery, fancybox-2

> **可能重复：**
> [从 FancyBox2 更新父页面上的选择框](https://stackoverflow.com/questions/13188974/update-a-select-box-on-parent-page-from-fancybox2)

我正在尝试从fancybox 更新我网站上的元素。在 fancybox 中，我执行 $.post() 并取回我想要填充到页面上的 div 中的 html 数据。我正在用ajax打开fancybox。我可以在 firebug 中看到我的脚本正在返回 html，但父页面上的选择框没有更新。谁能帮助我以正确的方式做到这一点？我目前正在从fancybox尝试：

```
$("#send-message").click(function () {
      $(this).closest('form').submit(function () {
          return false;
      });
      var frm = $(this).closest('form');
      if ($(frm).valid()) {
          $("#ajax-loading").show();
          var data = $(frm).serialize();
          $(frm).find('textarea,select,input').attr('disabled', 'disabled');
          $.post("../forms/company_add.php",
          data,

          function (data) {
              if (data.success) {
                  $('#companyselect', $(parent.document)).html(data.success);
                  parent.$.fancybox.close();
              } else {
                  $("#ajax-loading").hide();
                  $(frm).find('textarea,select,input').removeAttr('disabled');
                  $("#send_message_frm").append(data.error);
              }
          }, "json"

          );
      }
  }); 
```

我正在使用 fancybox-2 和 php。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:58:41.987

我认为你只需要使用元素的 id

```
$('#companyselect').html(data.success);
$.fancybox.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:04:22.937

在你的父母身上写一个javascript函数，比如

```
function UpdateElementOfParent(someValue)
{
// your code
} 
```

从您的幻想箱中，您可以使用父对象并像这样调用它的函数..

```
this.parent.UpdateElementOfParent(someValue); 
```

# css-position - z-index 和定位问题

> ID：13194634
> 
> 赞同：1
> 
> 时间：2012-11-02T11:46:48.540
> 
> 标签：css-position, z-index

我目前在使用 z-index 时遇到问题。使用上面的一些答案已经解决了这个问题，但还没有解决。

我的 Over div 的相对位置和 z-index 为 99999 我的 under div 有一个固定的位置和 z-index 为 0。

我尝试了[该线程中提到的](https://stackoverflow.com/questions/5218927/z-index-not-working-with-fixed-positioning/13162960#13162960)内容并将我的下 div 更改为相对位置，但是虽然这最初隐藏了 div，但当我单击按钮将 Over div 向右滑动以显示下 div 时，它不存在，它位于页脚下方的页面底部。

我正在复制一个在线示例，并且在在线示例中它适用于相对位置和固定位置。它的FB风格菜单。向右滑动您的内容以显示您的菜单。我相信这就是为什么它是固定的，而不是相对的。

我希望有人能指出为什么这在示例中有效，因为上面的每个人都指出 z-index 在上下文中有效。

在线示例[http://media02.hongkiat.com/mobile-navi-with-jquery/demo/index.html](http://media02.hongkiat.com/mobile-navi-with-jquery/demo/index.html)

编辑：添加示例代码。

HTML 标记：

```
 <div id="w">

    <div id="pagebody">
        <header id="toolbarnav">
            <a href="#navmenu" id="menu-btn"></a>

            <h1>HK Mobile</h1>
        </header>

        <section id="content" class="clearfix">
            <h2>Welcome to the Mobile Site!</h2>

            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed lorem sapien, auctor placerat varius sed, aliquam et nibh. Quisque posuere erat nec tortor vestibulum id dignissim quam ornare. Suspendisse sapien ante, pellentesque non interdum ac, feugiat at eros. Morbi lacus augue, blandit ac porta a, rutrum quis tellus. Nam ut velit lorem, sit amet placerat lorem.</p>

            <img src="img/hongkiat-lim.png" alt="Hongkiat Lim" class="photo">

            <p>Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Aliquam convallis lacinia dapibus. Sed nunc enim, ultrices nec suscipit ac, malesuada pharetra diam. Etiam massa orci, pellentesque nec lacinia eu, vulputate non est. Donec faucibus, tellus eu ultrices lobortis, leo nisl iaculis elit, id dictum arcu massa in nibh. Nulla auctor vehicula rutrum. Vivamus mi mauris, molestie sit amet placerat ac, tempor vitae nisi. Fusce pharetra eleifend aliquam. Cras ultricies orci sit amet ligula tempor pulvinar.</p>

            <p>Vivamus consectetur nulla vel neque accumsan bibendum lacinia nibh venenatis. Morbi placerat tempor nunc, eu congue metus pellentesque vitae.</p>

            <p>Maecenas lacinia commodo venenatis. Sed nec mauris sapien. Donec eget justo sapien, id elementum magna. Integer et orci quis urna tempus eleifend eget eu nulla. Quisque interdum porttitor tincidunt. Nulla ornare dolor elit, eu adipiscing felis. Nulla viverra blandit bibendum. Mauris non tellus lacus.</p>

            <p>Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Aliquam convallis lacinia dapibus. Sed nunc enim, ultrices nec suscipit ac, malesuada pharetra diam. Etiam massa orci, pellentesque nec lacinia eu, vulputate non est. Donec faucibus, tellus eu ultrices lobortis, leo nisl iaculis elit, id dictum arcu massa in nibh.</p>

            <p>Nulla auctor vehicula rutrum. Vivamus mi mauris, molestie sit amet placerat ac, tempor vitae nisi. Fusce pharetra eleifend aliquam. Cras ultricies orci sit amet ligula tempor pulvinar. Vivamus consectetur nulla vel neque accumsan bibendum lacinia nibh venenatis. Morbi placerat tempor nunc, eu congue metus pellentesque vitae.</p>

            <p>Maecenas lacinia commodo venenatis. Sed nec mauris sapien. Donec eget justo sapien, id elementum magna. Integer et orci quis urna tempus eleifend eget eu nulla. Quisque interdum porttitor tincidunt. Nulla ornare dolor elit, eu adipiscing felis. Nulla viverra blandit bibendum. Mauris non tellus lacus.</p>

            <p><center><img src="img/pencilman.jpg" alt="pencilmannn"></center></p>
        </section>
    </div>

    <div id="navmenu">
        <header>
            <h1>Menu Links</h1>
        </header>

            <ul>
                <li><a href="#homepage.html" class="navlink">Home</a></li>
                <li><a href="#about.html" class="navlink">About Us</a></li>
                <li><a href="#advertise.html" class="navlink">Advertise</a></li>
                <li><a href="#write.html" class="navlink">Write for Us</a></li>
                <li><a href="#contacts.html" class="navlink">Contacts</a></li>
                <li><a href="#privacy.html" class="navlink">Privacy Policy</a></li>
            </ul>
    </div>
</div> 
```

CSS：

```
 body { background: #181c1f; font-family: "Trebuchet MS", Arial, Tahoma, sans-serif; font-size: 62.5%; line-height: 1; }

a { -webkit-tap-highlight-color: rgba(0,0,0,0); -webkit-touch-callout: none; }

img { border: 0; }
img.photo { padding: 2px; background: #888; border: 1px solid #cecece; border-bottom-color: #aaa; border-right-color: #aaa; float: right; margin-left: 20px; margin-right: 11px; }

ul,ol,h1,h2,h3,h4,h5,h6,p { display: block; }

#w { position: relative; overflow-x: hidden; overflow-y: hidden; }

/** @group core body **/
#w #pagebody { position: relative; left: 0; max-width: 640px; min-width: 320px; z-index: 99999; }

#w #navmenu { background: #475566; height: 100%; display: block; position: fixed; width: 300px; left: 0px; top: 0px; z-index: 0;  }

/** @group header **/
#w #pagebody header#toolbarnav { display: block; position: fixed; left: 0px; top: 0px; z-index: 9999; background: #0b1851 url('img/tabbar-solid-bg.png') top left no-repeat; border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px; -o-border-radius: 5px; border-bottom-right-radius: 0; -moz-border-radius-bottomright: 0; -webkit-border-bottom-right-radius: 0; border-bottom-left-radius: 0; -moz-border-radius-bottomleft: 0; -webkit-border-bottom-left-radius: 0; height: 44px; width: 100%; max-width: 640px; }

#w #pagebody header#toolbarnav h1 { text-align: center; padding-top: 10px; padding-right: 40px; color: #e6e8f2; font-weight: bold; font-size: 2.1em; text-shadow: 1px 1px 0px #313131; }

#w #pagebody header #menu-btn { display: block; float: left; width: 53px; height: 30px; background: url('img/nav-btn.png') no-repeat; margin-top: 6px; margin-left: 8px;}

#w #pagebody #content { display: block; background: #fff; padding: 5px 12px; margin-top: 40px; min-height: 550px; height: 100%; z-index: 9999; }

#w #pagebody #content h2 { border-bottom: 1px solid #ddd; border-top: 1px solid #ddd; color: #181818;
font-family: "Droid Serif", Georgia, serif; font-size: 2.6em; line-height: 1.8em; font-weight: 500; margin-top: 25px; margin-bottom: 25px; padding: 12px 0; text-align: center; }
#w #pagebody #content h3 { font-family: "Calibri", Verdana, Arial, sans-serif; font-weight: 700; font-size: 1.8em; line-height: 1.75em; text-transform: capitalize; margin-bottom: 5px; color: #222; }
#w #pagebody #content p { font-size: 1.4em; line-height: 1.6em; margin-bottom: 15px; color: #444; }

#w #pagebody #content a { color: #78a5ce; }
#w #pagebody #content a:hover { color: #678eb2; }

/** @group nav menu **/
#w #navmenu header { display: block; background: #303a44; height: 44px; }

#w #navmenu header h1 { text-align: center; padding-top: 10px; color: #e6e8f2; font-weight: bold; font-size: 2.1em; text-shadow: 1px 1px 0px #313131; }

#w #navmenu ul { list-style: none; background: #475566; height: 100%; }

#w #navmenu ul li { display: block; }
#w #navmenu ul li a { position: relative; display: block; border-bottom: 1px solid #303c4a; padding: 14px 11px; font-weight: bold; color: #f0f0f0; text-shadow: -1px -1px 1px #222; font-size: 1.6em; text-decoration: none; }

#w #navmenu ul li a:hover { color: #cad0e6; text-decoration: none; }

#w #navmenu ul li a::after {
    content: '';
    display: block;
    width: 6px;
    height: 6px;
    border-right: 3px solid #d0d0d8;
    border-top: 3px solid #d0d0d8;
    position: absolute;
    right: 30px;
    top: 45%;
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -o-transform: rotate(45deg);
    transform: rotate(45deg);
}

#w #navmenu ul li a:hover::after { border-color: #cad0e6; }

/** @group misc **/
.blue { color: #1c609f !important; font-weight: bold; }

/** @group clearfix **/
.clearfix:after { content: "."; display: block; clear: both; visibility: hidden; line-height: 0; height: 0; }
.clearfix { display: inline-block; }

html[xmlns] .clearfix { display: block; }
* html .clearfix { height: 1%; } 
```

我的代码不完全相同，但相似。我只是想了解为什么 z-index 在这个示例中工作，设置了 2 个不同的位置，相对位置和固定位置，因为这是我需要实现的。

# c# - 在 ASP.NET 网络表单中使用 EntityDatasource 进行过滤

> ID：13194650
> 
> 赞同：0
> 
> 时间：2012-11-02T11:47:35.983
> 
> 标签：c#, asp.net, linq, entity-framework

我有两个具有多对多关系的类（通过实体框架提供）：

```
Corporation which has the member Tags

Tag which has the member name 
```

EntityDataSource 给了我想要在给定标记名中过滤的 ObjectQuery，但我不知道如何。我想获取所有标签名称为“myname”的公司。我不知道如何进行 linq 查询

当我查询实体时，不幸的是没有得到 Objectquery。

```
protected void EntityDataSource1_QueryCreated(object sender, QueryCreatedEventArgs e)
{
    // first try
    var corps = e.Query.Cast<Corporation>(); 
    // of course doesn't work, because oyu can't access a member (name) of a collection (Tags) 
    // i don't know the right linq expression for this
    e.Query = from c in corps where c.Tags.Name.Contains("myname") select c; 

    // second try
    var tags = from t in entities.Tags where t.Name.Contains("myname") select t;
    var filteredcorporations = from c in tags select c.Corporations;
    // does not work because it is not a ObjectQuery<Corporation>
    e.query = filteredcorporations; 
} 
```

我的实体数据源：

```
<asp:EntityDataSource ID="EntityDataSource1" runat="server" ConnectionString="name=eodbEntities" DefaultContainerName="eodbEntities" EnableFlattening="False" EntitySetName="Corporations" OnQueryCreated="EntityDataSource1_QueryCreated">
</asp:EntityDataSource> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:39:44.983

您可以在标记中执行此操作：

```
<asp:EntityDataSource ID="EntityDataSource1" runat="server" 
    ConnectionString="name=eodbEntities" 
    DefaultContainerName="eodbEntities" EnableFlattening="False" 
    EntitySetName="Corporations" Select=""
    Where="it.Tags.Name.Contains(@tagname)">
    <WhereParameters>
        <asp:ControlParameter DefaultValue="myname" DbType="String" Name="tagname"/>
    </WhereParameters>
</asp:EntityDataSource> 
```

或者

```
<asp:EntityDataSource ID="EntityDataSource1" runat="server" 
    ConnectionString="name=eodbEntities" 
    DefaultContainerName="eodbEntities" EnableFlattening="False"    
    EntitySetName="Corporations" Select=""
    Where="it.Tags.Name.Contains(&quote;tagname&quote;)">   
</asp:EntityDataSource> 
```

有关更多信息，您可以[在此处阅读](http://msdn.microsoft.com/ru-ru/library/system.web.ui.webcontrols.entitydatasource.where.aspx)

**更新：**

您的查询无法在标记中完成：（然后试试这个：

```
protected void EntityDataSource1_QueryCreated(object sender, QueryCreatedEventArgs e)
{
    var productQuery1 = e.Query.OfType<Corporation>();
    e.Query = productQuery1.Where(c => c.Tags.Any(t => t.Name.Contains("myname")));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:26:08.957

首先你能不能像这样在变量中设置你的过滤值

```
var name ="myname"; 
```

然后你像这样写你的查询它在下面

```
var filtervilue= from t in entities.Tags where (name==""? name.Contains(t.Name):true) select t

var filteredcorporations = from c in filtervilue select c.Corporations;        
    e.query = filteredcorporations; 
```

我想这会对你有所帮助......

# actionscript-3 - AS3：if-function 不听另一个类中的布尔值

> ID：13194651
> 
> 赞同：3
> 
> 时间：2012-11-02T11:47:38.070
> 
> 标签：actionscript-3, class, if-statement, boolean

所以......我正在开发一个国际象棋游戏，并试图让它“公共静态布尔值”（转）决定哪个玩家可以采取行动。这个布尔值在一个类 (Board.as) 中，该类导入所有棋子的所有类（例如，QueenW.as（代表白皇后））。

我尝试了多种方法：尝试使函数不再运行，并将片段（它们是按钮）替换为其他对象（不可点击的影片剪辑）。决定选择后者。我已经在 ENTER_FRAME 函数中跟踪了棋子类和棋盘类中的布尔值。当值发生变化时，两者似乎都能正确跟踪它。

问题是：Flash 不会删除棋子并用不可点击的对象替换它们，即使它应该发生的类 (Board.as) 在跟踪时确实会听布尔值。有人知道解决方案吗？

我的一小段代码，与问题相关：

Board 类（这是我的 .fla 文件的 Documentclass）

```
package
{
 import QueenWclass; //imports the class used for example.

 public class Board extends MovieClip
 {
  public static var turn:Boolean = new Boolean; //creates public static bool.
  var queenW:QueenWclass = new QueenWclass(); //creates aforementioned chess-piece.

  var queenWnoturn:QueenWnoturn = new QueenWnoturn; //creates a non-clickable object.
 }

 public function Board()
 {
  turn = true;

  this.addEventListener(Event.ENTER_FRAME, frameEnter);

  addChild(queenW); //adds pieces to the screen.
 }

 if (turn == true)
 {

 }

 if (turn == false)
 {
  removeChild(queenW); //Removes chess-piece.
  addChild(queenWnoturn); //Adds a non-clickable object.
 }
} 
```

还有我的 QueenWclass.as 类：

```
package
{
 public class QueenWclass extends MovieClip
 {
  var queenW:QueenW = new QueenW();
 }

 public function QueenWclass()
 {
  addChild(queenW);

  this.addEventListener(MouseEvent.CLICK, CLICKqueenW);
 }

 function CLICKqueenW(event.MouseEvent):void
 {
  Board.turn = false;
 }
} 
```

我希望我正确且易于理解地编写了这个示例。我的项目没有真正的时间限制，因为我已经在一小时前完成了它（但由于努力以及我在这个相当复杂的游戏中走了多远，仍然得到了 6/10）。我只是想为自己完成它......提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:28:23.470

好吧，您没有任何东西在监听布尔值的变化。检查布尔值的代码位于构造函数中，而实际更改在 MouseEvent.CLICK 事件侦听器中完成。您必须实现一个通过 Event.ENTER_FRAME 侦听、SetInterval() 或 TimerEvent.TIMER（带有计时器）重复调用的函数，或者实现一个公开可用的属性作为函数，它会检查它是哪一回合并执行相应的行动。后者要好一些，因为它仅在更改某些内容时才有效。

```
private static var _turn:Boolean=false;
public static function get turn():Boolean { return _turn; } // getter part
public static function set turn(value:Boolean):void // setter part
{
    if (_turn==value) return; // no need to change turn
    _turn=value;
    if (_turn) YouGetATurn(); else EnemyGetsATurn();
    // this part is what will get called when you change Board.turn 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:11:33.613

可能代码没有被正确复制或者有一个小问题。

这段代码：

```
 if (turn == true)
 {

 }

 if (turn == false)
 {
    removeChild(queenW); //Removes chess-piece.
    addChild(queenWnoturn); //Adds a non-clickable object.
 } 
```

只会运行一次，“Board”创建时，“turn”状态改变时不会运行。

# ruby-on-rails - rake redmine:plugins:migrate 没有执行

> ID：13194653
> 
> 赞同：0
> 
> 时间：2012-11-02T11:47:42.487
> 
> 标签：ruby-on-rails, redmine, redmine-plugins

`rake redmine:plugins:migrate`没有执行，每当我尝试执行此命令时，它都会出错。

```
rake aborted!
Don't know how to build task 'redmine:plugins:migrate' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:09:08.293

Redmine 有两个主流版本，1.x 和 2.x。

对于 1.x，应使用以下命令迁移所有插件：

```
rake db:migrate_plugins RAILS_ENV=production 
```

问题中列出的命令适用于 Redmine 2.x。

来源：[http ://www.redmine.org/projects/redmine/wiki/Plugins](http://www.redmine.org/projects/redmine/wiki/Plugins)

# javascript - Javascript 正则表达式匹配 ABC13 80 55 5600 6000 2700 SDR3 中的数字组

> ID：13194654
> 
> 赞同：0
> 
> 时间：2012-11-02T11:47:42.503
> 
> 标签：javascript, regex

我需要一些帮助来编写正则表达式以仅匹配字符串中的数字/数字组：

`8000 30 4000`应该匹配`8000 30 4000`

`ABC13 8000 3999 2999 Comment`应该匹配`[space]8000 3999 2999[space]`

`ABC13 80 55 5600 6000 2700 SDR3 Comment`应该匹配`[space]80 55 5600 6000 2700[space]`

到目前为止，我已经尝试过：

```
([^a-zA-Z]+[^0-9]{0,2})+(\s*\d{0,4}\s*) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:57:28.897

我觉得你有点想多了。你也有一些[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)。您只需要空格、数字和单词边界：

```
\s*\b[\d\s]+\b\s* 
```

这将适用于所有三种情况。沿途`\s*`捕获任何可选空格，同时单词边界`\b`确保第二个和第三种情况不包括`13`匹配中的 。

如果要确保每个数字最多有 4 位数字：

```
\s*\b(?:\d{1,4}\s+)*\d{1,4}\b\s* 
```

# linux - Google chrome 与 oracle-xe 的内核参数冲突

> ID：13194656
> 
> 赞同：0
> 
> 时间：2012-11-02T11:47:51.237
> 
> 标签：linux, google-chrome, conflict, oracle-xe

[我正在尝试按照https://forums.oracle.com/forums/thread.jspa?messageID=10280550&tstart=0#10280550](https://forums.oracle.com/forums/thread.jspa?messageID=10280550&tstart=0#10280550)中的指南在我的开发机器（Linux maya）中安装 oracle-xe 。

在修改和应用内核参数的步骤之后，chrome无法再渲染任何页面，包括设置、历史记录……我可以通过查看开发者工具（元素，脚本，网络，...），但无法显示内容，只有空白页。

在我删除 oracle-xe 的配置文件（/etc/sysctl.d/60-oracle.conf）并重新启动我的机器之前，chrome 再次工作。

我试图用谷歌搜索答案，但没有成功。

那么，没人会在开发机上安装oracle-xe吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:30:49.973

I encountered a similar problem when installing Oracle 11.2.0.1 Server on a Ubuntu machine. The workaround for my problem was to reduce the size specified for the **kernel.shmmax** parameter in the *sysctl* config file. It's likely the suitable value for **shmmax** varies with the amount of physical memory on the machine; with 2GB of RAM, Chrome starting rendering pages again when the kernel parameter was set to 1GB.

# jqgrid - ShrinkToFit 导致标题移位

> ID：13194661
> 
> 赞同：0
> 
> 时间：2012-11-02T11:48:12.673
> 
> 标签：jqgrid

当我将 shrinkToFit 设置为 true 时，数据行一切正常，但标题列存在一些问题，例如图片中的。他们的 with 是不正确的。有人可以帮我解决这个问题吗？ ![在此处输入图像描述](../Images/a6e8cb7649c5d883a1b2b45e62feee7a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:39:47.333

在我的情况下重现此问题的步骤：

1）设置网格

```
shrinkToFit: true; 
```

2) 打电话

```
.jqGrid('setGroupHeaders' ...) 
```

3）改变网格宽度

```
setGridWidth() 
```

你已经改变了标题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:20:23.393

你需要使用

`autoWidth:true`

但请注意 jqGrid 从父节点获取宽度，因此如果您使用可能会出现问题`float:`

# android - 如何设置 ViewPager 大小

> ID：13194666
> 
> 赞同：5
> 
> 时间：2012-11-02T11:48:27.650
> 
> 标签：android, android-linearlayout, android-viewpager

![布局](../Images/c0e11ffa791436da6393d2cad46ce65c.png)

我可以设置viewpager的大小吗？像 image1 一样，我想在同一个屏幕上显示 3 页。

如果没有，我只能使用LinearLayout吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-02T12:13:56.827

您的问题类似于 CommonWare 的一篇博客。[多视图 ViewPager 选项](http://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html) 有三种方法。其中之一是`getPageWidth()`在您的 PagerAdapter 中覆盖：

```
@Override public float getPageWidth(int position) { return(0.5f); } 
```

其他的更复杂，但有附加源和长解释，所以我不在这里复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:11:30.167

为此，您必须创建`ViewPager`3 个页面，其中第 1 页和第 3 页采用一种布局，第 2 页采用不同的布局。在第 2 页的布局中定义所有 2、3、4。简而言之，您将第 2、3、4 页合并为一个。

# cocos2d-iphone - box2d 世界中的 CCAction

> ID：13194672
> 
> 赞同：0
> 
> 时间：2012-11-02T11:49:10.667
> 
> 标签：cocos2d-iphone, box2d, ccaction

我是 cocos2d 和 box2d 的新手，我已经为这个问题苦苦挣扎了两天：我有一个场景，有许多精灵掉落（附有身体）。我有一个BackgroundLayer，我从中将我的背景图像添加到场景中（不涉及物理模拟）。在我的 backgroundLayer 中，我正在尝试对精灵执行操作：（它在第一个位置闪烁并直接跳到结束位置）

`id flyBubble = [CCEaseInOut actionWithAction:[CCMoveTo actionWithDuration:0.7 position:randomEndPosition]]`;

但我的精灵对这个动作完全没有反应！！我的精灵没有附加任何 b2body 并且似乎它响应滴答声：物理世界的方法（在我的主场景中）。如何对没有附加 b2body 的精灵执行操作。任何帮助，将不胜感激！！！谢谢

这是整个代码：

```
 CCSprite *bubble = [CCSprite spriteWithFile:@"bubble.png"];
[self addChild:bubble];
CGPoint startPosition = ccp(100, 100);
bubble.position = startPosition;    
CGPoint endPosition = ccp(400, 400);

id flyBubble = [CCEaseInOut actionWithAction:[CCMoveTo actionWithDuration:0.7 position:randomEndPosition]];
id remove = [CCCallBlockN actionWithBlock:^(CCNode *node) {        
    [self removeFruit:(CCSprite *)node];        
}];

[bubble runAction:[CCSequence actions:flyBubble, remove, nil]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:52:35.487

我猜精灵的源和目标位置是相同的。所以动作上没有区别。

试试这样。。

```
sprite.position = ccp(0,0);

id flyBubble = [CCMoveTo actionWithDuration:0.7 position:randomEndPosition];

[sprite runAction:flyBubble]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:22:01.167

我犯了一个小错误，让我付出了很多次。它在这行代码中

```
id flyBubble = [CCEaseInOut actionWithAction:[CCMoveTo actionWithDuration:0.7 position:randomEndPosition]]; 
```

CCEaseInOut 不起作用我不知道为什么！当我使用 CCEaseExponentialInOut 时，它工作得很好。

不管怎么说，还是要谢谢你！

# c# - foreach循环创建100个按钮，同时绘制所有按钮以防止闪烁

> ID：13194674
> 
> 赞同：4
> 
> 时间：2012-11-02T11:49:14.560
> 
> 标签：c#, button, controls

在我的扫雷游戏中，我需要动态创建控件以便在简单 - 中等 - 困难之间切换。假设为了这个问题，hard 包含 100 个按钮。

这就是我创建它们的方式：

```
this.SuspendLayout(); //Creating so many things that I assume it would be faster to suspend and resume.
foreach (string i in playingField)
{

    Button button = new Button();
    button.Name = i;
    button.FlatStyle = System.Windows.Forms.FlatStyle.Popup;
    button.Margin = new Padding(0);
    button.TabIndex = 0;
    button.Location = new System.Drawing.Point(3, 3);
    button.Size = new System.Drawing.Size(25, 25);
    button.BackgroundImage = blockImage; //##//
    button.MouseDown += new System.Windows.Forms.MouseEventHandler(this.GetUnderSide);
    button.UseVisualStyleBackColor = false;
    minesPanel.Controls.Add(button); //Adding the controls to the container
}
this.ResumeLayout(); //Refer to above. Correct me if I'm wrong please. 
```

如您所见，我正在通过 for 循环创建所有控件，然后添加它们。它导致每个按钮一次被绘制一次。我也尝试过`name.Controls.AddRange(arrayButtons)`，但仍然导致同样的问题。个人绘画。

我需要的是一种创建所有项目的方法，然后将它们全部绘制出来，就像用 绘制单个位图一样`DoubleBuffered`，但是唉，这也不起作用。

此外，我试过这个：

```
 protected override CreateParams CreateParams
    {
        get
        {
            // Activate double buffering at the form level.  All child controls will be double buffered as well.
            CreateParams cp = base.CreateParams;
            cp.ExStyle |= 0x02000000;   // WS_EX_COMPOSITED
            return cp;
        }
    } 
```

什么样的作品。它仅适用于应用程序启动。但是，考虑到我将在运行时更改网格大小并添加更多控件，这不是一个可行的选择。

有人告诉我，这就像使用`Graphics`课堂上的方法一样简单。问题是，我不知道从哪里开始。

如果有人可以提供一些帮助来同时绘制我的所有控件，那就太好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T13:56:38.710

可悲的是，WinForms 不喜欢拥有太多控件，尤其是当您进入数百个控件时。您永远不能让每个控件同时绘制，因为每个控件都会将自己的绘制消息发送到窗口。

我认为接近像 MineSweeper 这样的游戏板的最佳方法是只使用一个控件并绘制按钮网格。

简单地雷类：

```
public class Mine {
  public Rectangle Bounds { get; set; }
  public bool IsBomb { get; set; }
  public bool IsRevealed { get; set; }
} 
```

然后创建一个从 Panel 控件继承的新控件，并设置 DoubleBuffered 属性以防止任何闪烁：

```
public class MineSweeperControl : Panel {
  private int columns = 16;
  private int rows = 12;
  private Mine[,] mines;

  public MineSweeperControl() {
    this.DoubleBuffered = true;
    this.ResizeRedraw = true;

    // initialize mine field:
    mines = new Mine[columns, rows];
    for (int y = 0; y < rows; ++y) {
      for (int x = 0; x < columns; ++x) {
        mines[x, y] = new Mine();
      }
    }
  }

  // adjust each column and row to fit entire client area:
  protected override void OnResize(EventArgs e) {
    int top = 0;
    for (int y = 0; y < rows; ++y) {
      int left = 0;
      int height = (this.ClientSize.Height - top) / (rows - y);
      for (int x = 0; x < columns; ++x) {
        int width = (this.ClientSize.Width - left) / (columns - x);
        mines[x, y].Bounds = new Rectangle(left, top, width, height);
        left += width;
      }
      top += height;
    }
    base.OnResize(e);
  }

  protected override void OnPaint(PaintEventArgs e) {
    e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;
    for (int y = 0; y < rows; ++y) {
      for (int x = 0; x < columns; ++x) {
        if (mines[x, y].IsRevealed) {
          e.Graphics.FillRectangle(Brushes.DarkGray, mines[x, y].Bounds);
        } else {
          ControlPaint.DrawButton(e.Graphics, mines[x, y].Bounds, 
                                  ButtonState.Normal);
        }
      }
    }
    base.OnPaint(e);
  }

  // determine which button the user pressed:
  protected override void OnMouseDown(MouseEventArgs e) {
    for (int y = 0; y < rows; ++y) {
      for (int x = 0; x < columns; ++x) {
        if (mines[x, y].Bounds.Contains(e.Location)) {
          mines[x, y].IsRevealed = true;
          this.Invalidate();
          MessageBox.Show(
            string.Format("You pressed on button ({0}, {1})",
            x.ToString(), y.ToString())
          );
        }
      }
    }
    base.OnMouseDown(e);
  }
} 
```

![在此处输入图像描述](../Images/79b86c4260d1326e9cd6a397d7e32e59.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T12:06:15.473

隐藏`minesPanel`，绘制按钮，显示`minesPanel`？

# c# - 如果设置为组合，任务栏按钮/图标不会正确显示

> ID：13194678
> 
> 赞同：0
> 
> 时间：2012-11-02T11:49:24.297
> 
> 标签：c#, winforms, visual-studio-2010, icons, taskbar

我在 Windows 7 任务栏按钮中遇到问题。当将任务栏按钮属性设置为“始终结合”时，我的 winform 应用程序（使用 VS 2010 开发）按钮会出现默认图标。但是，如果我将任务栏按钮属性设置为“从不合并”，那么它会显示为我为我的 exe 应用程序设置的正确图标。

知道如何解决这个问题.. 它应该带有始终组合设置的图标。

问候， 苏博德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:21:33.263

我在 VS 2010 中创建了一个 Windows 窗体应用程序。在项目属性（资源 -> 图标： -> 浏览）中添加了一个图标（直接链接到 ico 文件 - 不是通过资源）。exe 使用了新图标。

当从“始终结合”更改为“从不结合”时，发生了与您描述的相同的事情。我回到项目并添加了相同的 ico 文件作为表单的图标。重建，问题消失了。
似乎在使用“从不组合”时，Windows 7 使用表单图标在任务栏中显示元素。而在使用“始终结合”时，它使用程序的图标。

# c# - 继承或包装一个处理并发的类

> ID：13194680
> 
> 赞同：1
> 
> 时间：2012-11-02T11:49:28.730
> 
> 标签：c#, .net, concurrency, mocking, moq

在尝试提供可单元测试（使用 Moq）的抽象时，`ConcurrentQueue<T>`我正在争论是否会失去使用框架`ConcurrentQueue<T>`实现的好处，这取决于我如何创作抽象。

在以下代码清单中执行一项或另一项的含义是什么：

```
public abstract class MyMessageQueue1<T> : ConcurrentQueue<T>
{
    public new virtual void Enqueue(T item)
    {
        base.Enqueue(item);
    }
}

public class MyMessageQueue2<T>
{
    private readonly ConcurrentQueue<T> _concurrentQueue = 
        new ConcurrentQueue<T>();

    public virtual void Enqueue(T item)
    {
        _concurrentQueue.Enqueue(item);
    }
} 
```

在第一个实现 ( `MyMessageQueue1`) 中，我隐藏了任何基类方法，以便在将调用传递给基类之前提供我的实现。

在第二个实现中，我将`ConcurrentQueue<T>`内部包装起来，并在需要时将调用传递给它。

是否`MyMessageQueue2`必须手动处理并发，或者因为所有调用都传递给被包装的`ConcurrentQueue<T>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:43:46.937

在任何一种情况下，您都不必处理并发，因为您所做的只是将调用委托给 ConcurrentQueue，正如@nanda 所述。但是，这将有助于我们了解您包装此类的原因。它对单元测试相当友好，因为它不使用任何外部资源，如文件或数据库。当在你的类中使用时，你可以让它做它的工作，而不是测试你自己的使用 ConcurrentQueue 的功能。

如果您尝试包装它是因为您想验证您的方法是否以所需的方式使用它，那么您可能专注于测试方法的实现而不是方法的行为。这在某些情况下可能有用，但您必须意识到这一事实，这不是一种常见的做法。

在编写这样的包装器时，您会丢失一件事。因为包装器具有虚拟方法以便它们可以被模拟，所以不能内联方法并且会损失一些性能。ConcurrentQueue 是苗条和快速的类，这实际上可能是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:04:20.327

如果包装器所做的只是委托给 ConcurrentQueue，并且包装器没有自己的成员来保护并发访问，那么您的包装器就无需为并发做任何事情。

但是你会在这个瘦包装器上进行什么单元测试呢？

# c# - 将值从子窗口传回 MainPage

> ID：13194684
> 
> 赞同：2
> 
> 时间：2012-11-02T11:49:40.383
> 
> 标签：c#, silverlight, return-value

我在 Silverlight 中有一个子窗口，我希望发送一个字符串值来填充应用程序 MainPage.xaml 中的文本框。

我怎样才能将值传回？

我试过这个 -

```
MainPage m = (MainPage)Application.Current.RootVisual;
m.textBox1.Text = value; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:23:28.850

你应该反过来做。打开子窗口的父级应将事件处理程序附加到子级的事件中，例如：

```
 childwindow.ButtonClicked += new EventHandler(childWindow_ButtonClicked); 
```

在这个处理程序中，Parent 可以使用来自子 Window 属性的值更新它自己的 Controls。

```
private void childWindow_ButtonClicked(object sender, EventArgs e)
      {
            txtValue.Text = childwindow.Value;
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:16:08.793

假设您使用的是 mvvm 模式，您可以使用子窗口的 ShowDialog 方法来打开它。ShowDialog 方法一直等到窗口关闭。

窗口关闭后，您可以从窗口视图模型中读取依赖属性并在主页中设置它们的值。

```
var view = new ChildWindowView();
var model = new ChildWindowViewModel();
view.DataContext = model;

var result = view.ShowDialog(); 
```

# php - 检查数字和条件中的值是否与 && 进行比较？

> ID：13194687
> 
> 赞同：0
> 
> 时间：2012-11-02T11:49:51.863
> 
> 标签：php, conditional, numeric

在 PHP 中，如果有这样的条件：

```
if ( is_numeric($my_var) && $my_var == 1 ) {

} 
```

如果 if 的第一部分为假，那么第二部分 ( `$my_var == 1`) 是否会被执行？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:53:02.113

在您的示例中，`$my_var == 1`将不会执行（如果它不是数字）。PHP 将确定第一部分的计算结果`false`，因此执行第二部分没有任何好处，因为您使用的是`&&`AND 运算符。

一个例子：

```
if(isset($_GET['something']) && $_GET['something'] == '1')
{

} 
```

如果缺少查询字符串变量`something`，则它不会检查它是否等于`1`。如果它这样做了，那么它可以产生一个`Undefined index`通知。

您还可以通过以下方式验证此行为：

```
$test = '2';
if($test == '1' && die('dead'))
{

}

echo 'execution continues....'; 
```

设置`$test = '2'`并且`die()`不会停止执行。将其设置为`1`，模具将执行并停止，因此您将看不到`Execution continues...`

编辑：这里有一些一般[信息](http://en.wikipedia.org/wiki/Lazy_evaluation)（不是特定于 PHP 的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:55:52.233

如果第一个条件是`false`第二个，如果你使用`&&`. 你可以自己试试：

```
function a(){
echo 'a';
return true;
}

function b(){
echo 'b';
return true;
}

if (a() && b())
{
    //do something
} 
```

这将输出：`ab`。

```
function a(){
echo 'a';
return false;
}

function b(){
echo 'b';
return true;
}

if (a() && b())
{
    //do something
} 
```

输出`a`。

我给你这个例子是因为我在文档中找不到任何东西，除了[本节的第一条评论](http://php.net/manual/en/language.operators.logical.php)

这称为按需*调用*或*惰性评估*。

**注意：**在某些情况下，尽管第一个条件处于状态，但执行第二个函数是有用或必要的。在这种情况下，您可以使用[`&`operator](http://www.php.net/manual/en/language.operators.bitwise.php)。使用按位运算符，您可以处理数字，而不是布尔值。因为 php 解释器应该知道运算符之前和之后的值，`&`它将执行两个函数 ( `a() & b()`) 和`true`,`false`分别被评估为`1`和`0`，`1 & 0 => 0`这将被评估为`false`语句`if`中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:51:28.983

你可以使用喜欢

```
if ( is_numeric($my_var)) {

    if($my_var == 1)
        {
            // your code
        }
} 
```

# html - 在同一行中对齐 H1 标题和普通文本

> ID：13194692
> 
> 赞同：35
> 
> 时间：2012-11-02T11:50:15.233
> 
> 标签：html, css

我试图在同一行上有一个 H1 标题和常规文本，下面有一行，如下所示：

![在此处输入图像描述](../Images/b59cba3b83bc8a658df8bca5b08518f0.png)

我试过这个，但没有成功

```
<div style="border-bottom:1px;"> 
<div align="left"><h1>Header</h1></div>
<div align="right">Regular Text Goes Here</div>
</div> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-02T11:55:18.170

## 原始答案（仍然可以正常工作）

请参阅[此 CodePen](https://codepen.io/fnatteh/pen/GRqZwMJ)。

这个想法是使`<h1>`内联允许第二个文本在同一行。

**HTML：**

```
<header>
  <h1>Text</h1>
  <span>text2</span>
</header> 
```

**CSS：**

```
header { border-bottom: 1px solid #000; }
header > h1 { display: inline-block; }
header span { margin-left: 100px; } 
```

## 2020 更新

请参阅使用 flexbox 的[替代](https://codepen.io/fnatteh/pen/jOrqQGw)CodePen。

`inline-block`您可以将标头设置为`flex`容器，而不是将 h1 设置为 an 。一个 flex 容器将（默认情况下）在水平轴上布局其子级。请注意，您还需要`align-items: center`将 h1 和 span 保持在同一垂直轴上。

另外，请注意，`align-items: baseline`如果您希望文本出现在同一基线上（如我的原始答案），您可能需要。

```
header {
  display: flex;
  align-items: center;

  /* Remove the next line if you want the span to appear next to the h1 */
  justify-content: space-between;

  border-bottom: 1px solid #000;
  padding: 10px 30px;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-15T15:19:00.253

I came up with a simple solution. My requirements are slightly different in that I want my status right aligned.

## HTML

```
<div class="my-header">
    <h2>Title</h2>
    <span>Status</span>
</div>
<div style="clear:both"></div> 
```

## CSS

```
.my-header h2 { 
  display: inline;
}
.my-header span { 
  float: right;
} 
```

## Example

Check out this [plunk](http://plnkr.co/edit/aR1d2T?p=preview).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T11:51:54.200

添加这一行`border-bottom:1px solid #000`

```
<div style="border-bottom:1px solid #000;"> 
<div align="left"><h1>Header</h1></div>
<div align="right">Regular Text Goes Here</div>
</div> 
```

[**演示**](http://jsfiddle.net/XPE3w/253/)

使用类名而不是内联样式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T11:53:16.167

尝试

```
<div style="float:left;"><h1>Header</h1></div>
<div style="float:right;">Regular Text Goes Here</div> 
```

反而？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-14T20:56:24.357

有两种方法可以实现 H1 和 TEXT 内联。澄清一下，TXT 在一个元素容器中。您建议使用 DIV，但任何语义元素都可以。下面，h1 和 p 说明了一个常见用法，同时表明您不需要使用 DIV 来隐藏元素阻塞（尽管 div 对许多 javascript 编码人员来说很流行）。

方法一

```
.inline { display: inline; float: left; padding-right: 2rem; }
<h5 class="inline">Element a's link family...</h5>
<p class="inline"> 
```

方法二

```
h5 { display: inline-block; float: left; font-size: 1rem; line-height: 1rem; margin-right: 2rem; }
h5>p { display: inline-block; float: right; }
<h5>Title</h5>
<p>Paragraph</p> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T12:08:16.807

我认为你应该这样写：-

**HTML**

```
<div style="border-bottom:1px solid black; overflow:hidden;"> 
<h1>Header</h1>
<div class="right">Regular Text Goes Here</div>
</div> 
```

**CSS**

```
h1 {
float:left;
  margin:0px;
  padding:0;
}
.right {
float:right;
  margin:0px;
  padding:0px;
} 
```

[演示](http://tinkerbin.com/JxPTIrtF)

**即使您也可以使用此方法和最小化标记**：-[演示](http://tinkerbin.com/WCyFC30G)

# android - string.xml 文件中的字符串大小和字体更改

> ID：13194693
> 
> 赞同：4
> 
> 时间：2012-11-02T11:50:15.433
> 
> 标签：android, text-files

在我的 android 应用程序中，我必须将字符串写入文件。在此之前，我想格式化字符串以使字体变粗并具有新的文本大小。所以我修改`string.xml`了

```
 "<string name="file_title" ><b>#title*</b></string>", 
```

将文本加粗并写入文本文件。但它没有在文件中显示为粗体。

1.  这是我用来实现字符串粗体的正确方法吗？
2.  我也想知道如何直接从 string.xml 更改字符串的文本大小

如何在文件中添加粗体...我试过了

```
 "<string name="note"><![CDATA[<b>title</b>]]></string>" 
```

在java代码中获取你的字符串

```
 yourtextview.setText(Html.fromHtml(getString(R.string.note))); 
```

通过使用 texview，它变得粗体，我想写入文件，使用下面的代码

```
 "bufferWritter.write(String.valueOf(Html.fromHtml(getString(R.string.note))));" 
```

但我在我的 print.txt 文件中看不到大胆...

感谢和问候阿努普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:06:44.643

您应该尝试使用 dimens.xml 作为维度值

然后引用它@dimen/yourDimensionName

[请参阅此链接](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)

或者其他方式是使用来自 java 代码的 HTML

我试过这是有效的。

在你的 string.xml 文件中试试这个

```
<string name="test"><![CDATA[<b>test</b>]]></string> 
```

在你的java代码settext中，这个字符串值来自这样的字符串资源

```
 textview.setText(Html.fromHtml(getString(R.string.test))); 
```

它工作正常....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:59:31.063

尝试这个

```
in string.xml write like this

    <string name="note"><![CDATA[<b>title</b>]]></string>

in java code get your string
     yourtextview.setText(Html.fromHtml(getString(R.string.note))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:00:34.060

这不是正确的方法。只需直接从 xml 更改其大小。利用。

```
android:text="Date"
android:textStyle="bold"
android:textSize="xdp" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:03:30.703

为此，您应该将 xml 资源设置为：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="file_title"><b>title*</b>!</string>
</resources> 
```

然后使用：

```
Resources res = getResources();
String text = res.getString(R.string.file_title);
CharSequence styledText = Html.fromHtml(text); 
```

为了更改文本或其他参数，您可以`<span></span>`在文本周围添加特定的 css 样式。

有关更多信息，请在此处查看：http: [//developer.android.com/guide/topics/resources/string-resource.html](http://developer.android.com/guide/topics/resources/string-resource.html)

希望这可以帮助！

# xcode4 - 一个视图中的两个 UIPickerViews

> ID：13194698
> 
> 赞同：1
> 
> 时间：2012-11-02T11:50:33.297
> 
> 标签：xcode4, uipickerview

我是 Xcode 的新手。我正在尝试在一个视图中构建两个 UIPickerView。第一个 UIPickerView 中的数据如期而至，但我无法在第二个 UIPickerView 中获取数据。一个选择器有一个组件，另一个有两个组件。

```
- (NSInteger)numberOfComponentsInPickerView:
(UIPickerView *)pickerView
{ 
if (pickerView == showData) 
    return 1;
else 
    return 2;

}

- (NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component
{
if (pickerView == showData)

switch (tapButton) {

    case 1:
        return [countryData count];
        break;
    case 2:
        return [serviceData count];
        break;
    case 3:
        return [budgetData count];
        break;
    default:
        return 0;
  }
 else {
    if (component == 0)
        return [hourTime count];
else 
    return [minuteTime count];
}
}

- (NSString *)pickerView:(UIPickerView *)pickerView
         titleForRow:(NSInteger)row
        forComponent:(NSInteger)component
{
if (pickerView == showData)
switch(tapButton)
{
case 1:
    return [countryData objectAtIndex:row];
    break;
case 2:
    return [serviceData objectAtIndex:row];
    break;
case 3:
    return [budgetData objectAtIndex:row];
    break;
default:
    return @"nothing";
 }

  else {
    if (component == 0)
        return [hourTime objectAtIndex:row];
    else 
        return [minuteTime objectAtIndex:row];
 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T07:01:13.750

```
 - (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:
           (NSInteger)component        
        {
            if(component ==0)
            {
                return [serviceArray count];
            }
            else {
                if ([Service isEqualToString:@"Hair"]) {
                    return [HairServices count];
                }
                if ([Service isEqualToString:@"Beauty"]) {
                    return [BeautyServices count];
                }
                if ([Service isEqualToString:@"Make Up"])
                {
                    return [MakeUpServices count];
                }
                if ([Service isEqualToString:@"Eye lash extensions"])
                {
                    return [EyelashServices count];
                }

                else  {
                    return [HairServices count];
                }
            }

            return 0;

           }

        - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row 

        {

             [DisplayArray addObjectsFromArray:HairServices];
            if(component ==0)
            {
                return  [serviceArray objectAtIndex:row];
            }
            else {
                if ([Service isEqualToString:@"Hair"]) {
                   // NSLog(@"DIS %@",DisplayArray);
                    [DisplayArray removeAllObjects];
                    [DisplayArray addObjectsFromArray:HairServices];
                   // NSLog(@" DISPLAY %@", DisplayArray);

                    return [DisplayArray objectAtIndex:row];
                }
                if ([Service isEqualToString:@"Beauty"]) {
                    [DisplayArray removeAllObjects];
                    [DisplayArray addObjectsFromArray:BeautyServices];

                    return [DisplayArray objectAtIndex:row];        }
                if ([Service isEqualToString:@"Make Up"])
                {
                    [DisplayArray removeAllObjects];
                    [DisplayArray addObjectsFromArray:MakeUpServices];

                    return [DisplayArray objectAtIndex:row];
                }
                if ([Service isEqualToString:@"Eye lash extensions"])
                {
                    [DisplayArray removeAllObjects];
                    [DisplayArray addObjectsFromArray:EyelashServices];

                    return [DisplayArray objectAtIndex:row];
                }

                else  {
                    return [HairServices objectAtIndex:row];
                }
            }

           return 0;

           }
        - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row 
          inComponent:(NSInteger)component
        {
            if (component == 0) {
                Service=[[NSString alloc] initWithFormat:@"%@" , [serviceArray 
                  objectAtIndex:row]];
                [servicelistPicker reloadComponent:1];
            }

            else
            {
                NSLog(@" dis  %@",DisplayArray);
                if([DisplayArray count]>0)
                {
                    SelectedServices =[NSString stringWithFormat:@"%@,",[DisplayArray  

                    NSLog(@"%@",DisplayArray);
                    //[TempString appendString:SelectedServices];
                    ServicesTxt.text = SelectedServices;
                    ServicesTxt.font = [UIFont boldSystemFontOfSize:13];
                }

            }
        } 
```

# android - webview中同时软键盘+硬键盘

> ID：13194704
> 
> 赞同：1
> 
> 时间：2012-11-02T11:50:57.697
> 
> 标签：android, android-webview, android-softkeyboard, soft-keyboard

我正在创建一个 webview，当任何输入集中在网页中时，我需要强制使用软键盘。

我已经尝试了很多我发现的东西，但似乎没有任何效果。

我试过：1）

```
InputMethodManager imm = (InputMethodManager) getApplicationContext().getSystemService(Context.INPUT_METHOD_SERVICE); 
 imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
```

2)

```
webView.requestFocus(View.FOCUS_DOWN);
 webView.setOnTouchListener(new View.OnTouchListener()
   {
    @Override
     public boolean onTouch(View v, MotionEvent event)
    {
      switch (event.getAction())
      {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_UP:
            if (!v.hasFocus())
            {
                v.requestFocus();
            }
            break;
       }
      return false;
    }
   }); 
```

还有一些其他的事情。

我设法让它在带有root的三星上工作，但在我的nexus 7中，我也不能使用root。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:05:32.633

您可以检测是否存在键盘，如果没有则显示所需视图/项目的软键盘

示例代码：

```
if (getResources().getConfiguration().keyboard == 0)
{
     InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); 
     imm.showSoftInput(** view/item **, InputMethodManager.SHOW_IMPLICIT); 
} 
```

# android - 标记朋友 将照片上传到 Facebook

> ID：13194710
> 
> 赞同：1
> 
> 时间：2012-11-02T11:51:32.273
> 
> 标签：android, facebook, image, post

（对不起我的英语）。我正在尝试将使用我的应用程序拍摄的照片发布给用户 Wall，我已经成功但我无法在帖子上标记一些朋友，图像已上传并且位置标记正确，但是朋友没有被标记。
我在 facebook 文档和示例上进行了搜索，但我只找到如何将照片上传到服务器，而不是如何将其上传到 facebook。

我使用此代码：

```
/**
 * Posts an image on Facebook user wall.
 * @param path path of the image to be posted.
 * @param act activity caller.
 * @param text description of the photo.
 */
public void postImageOnWall(final Activity act, final String path,
        final String text) {
    if (facebook.isSessionValid()) {
        byte[] data = null;

        Bitmap bi = BitmapFactory.decodeFile(path);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        data = baos.toByteArray();

        StringBuilder str = new StringBuilder();
        str.append(text);
        str.append("\n" + act.getResources().getString(
                R.string.facebook_signature_android));
        str.append("\n" + act.getResources().getString(
                R.string.facebook_signature_ios));

        Bundle params = new Bundle();
        params.putString(Facebook.TOKEN, facebook.getAccessToken());
        params.putString("link", "www.example.com");
        params.putString("place", "--placeId--");
        params.putStringArray("to", new String[]{"--friendId1--","--friendId2--"});
        params.putStringArray("tags", new String[]{{"--friendId1--","--friendId2--"});
        params.putString("name", str.toString());
        params.putByteArray("picture", data);

        AsyncFacebookRunner mAsyncRunner =
                new AsyncFacebookRunner(facebook);
        mAsyncRunner.request("me/photos", params, "POST",
                new RequestListener() {
            public void onComplete(
                    final String response, final Object state) {
                    try {
                        // process the response here:
                        Log.i("Facebook-Example",
                                "Response: " + response.toString());
                        JSONObject json = Util.parseJson(response);
                        String id = json.getString("id");

                        // then post the processed result back to the UI thread
                        // if we do not do this, an runtime exception will be generated
                        // e.g. "CalledFromWrongThreadException: Only the original
                        // thread that created a view hierarchy can touch its views."

                    } catch (JSONException e) {
                        Log.w("Facebook-Example",
                                "JSON Error: " + e.getMessage());
                    } catch (FacebookError e) {
                        Log.w("Facebook-Example",
                                "Facebook Error: " + e.getMessage());
                    }
                }
            @Override
            public void onIOException(final IOException e,
                    final Object state) {
                Log.e("Facebook-Request", "Facebook IOException: "
                        + e.getMessage());
                e.printStackTrace();
            }
            @Override
            public void onFileNotFoundException(
                    final FileNotFoundException e,
                    final Object state) {
                Log.e("Facebook-Request", "Facebook FileNotFoundException: "
                        + e.getMessage());
                e.printStackTrace();
            }
            @Override
            public void onMalformedURLException(
                    final MalformedURLException e,
                    final Object state) {
                Log.e("Facebook-Request", "Facebook MalformedURLException: "
                        + e.getMessage());
                e.printStackTrace();
            }

            @Override
            public void onFacebookError(final FacebookError e,
                    final Object state) {
                Log.e("Facebook-Request", "Facebook FacebookError: "
                        + e.getMessage());
                e.printStackTrace();
            }
              }, null);
    } else {
        Toast.makeText(act, "Not connected to Facebook",
                Toast.LENGTH_LONG).show();
    }
} 
```

昨天我下载了 facebook SDK 3，现在 mAsyncRunner.request() 方法已被弃用，我不知道如何使用新的 sdk。

如果任何人都可以帮助我弄清楚为什么没有标记朋友或者做相同帖子的新方法是什么，我将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:48:08.043

此示例向您展示了使用我们的新 SDK 将内容发布到用户墙上的新方法：

[https://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/#step2](https://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/#step2)

让我知道这是否有帮助。

# mysql - 从 mysql 的逗号分隔文本列中查找不同的值

> ID：13194711
> 
> 赞同：0
> 
> 时间：2012-11-02T11:51:51.643
> 
> 标签：mysql, sql, comma

> **可能重复：**
> [在数据库列中存储逗号分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-comma-separated-list-in-a-database-column-really-that-bad)

我有一个逗号分隔文本的 mysql db 列：

```
 id  keys
 ------------
  1  Key1, Key2
  2  key3
  3  key2, key3, key4
  4  key5, key2 
```

**问题 1**

我需要这样的结果：

```
id    keys
----------
1    Key1
2    Key2
3    key3
4    key4
5    key5 
```

**问题2**

我还需要第二个查询来匹配上述条件。例如。

选择所有行`key2`

输出应该是

```
id
---
1
4 
```

**注意：**仅在单个查询中，没有存储过程，没有函数。

我见过类似的问题，但没有想要的答案。

**注意：**感谢您建议数据不应存储在逗号分隔的字段中。 **但是我还没有开发系统和数据库。我正要做一个小升级。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:47:29.743

这是一个临时解决方案，直到您重新设计表格。由于`CROSS JOIN`. 它还需要创建一个新的“数字”表：

```
CREATE TABLE Number
  ( i INT PRIMARY KEY ); 
```

用数字填充它，直到单元格中预期的最大键数：

```
INSERT INTO Number
  VALUES
    (1), (2), ..., (1000) ; 
```

然后运行它以在逗号分隔的列中为您提供所有不同的键：

```
SELECT DISTINCT 
    SUBSTRING_INDEX(
          SUBSTRING_INDEX( 
                t.`keys`
              , ', '
              , n.i ) 
        , ', ' 
        , -1 ) AS `key`
FROM 
    Number AS n
  CROSS JOIN 
    YourTable AS t ; 
```

测试于：**[SQL-Fiddle](http://sqlfiddle.com/#!2/34d262/1)**

# java - 新旧版本的tomcat中的多个库

> ID：13194718
> 
> 赞同：1
> 
> 时间：2012-11-02T11:52:29.957
> 
> 标签：java, jakarta-ee, tomcat, jar, duplicates

一位从我公司离职的开发人员和他正在从事的项目，移交给我。

我下载文件**commons-fileupload-1.2.2.jar(59Kb)**来上传文件。当我想将**commons-fileupload-1.2.2.jar(59Kb)**的副本粘贴到WEB-INF\lib 中时。我已经看到**commons-fileupload.jar(21Kb)**已经存在。但这很旧并且不能满足我的要求，因为**commons-fileupload-1.2.2.jar(59Kb) 中的所有类都没有在 commons-fileupload****中**找到**.jar(21Kb)**。

所以，我使用**commons-fileupload-1.2.2.jar(59Kb)**库

****commons-fileuploadjar(21Kb)中****50%**的类也有**commons-fileupload-1.2.2.jar(59Kb)**但不是全部。**

 **部署后是否会因为类重复而**产生问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:55:49.620

将旧 jar 替换为新 jar 并在升级到生产之前测试文件上传功能。不会有任何问题。如果有的话，无论如何你都会在测试期间发现它们。事实上，您没有任何其他选择，因为旧版本无论如何都不能满足您的要求。**

# c# - 如何将数组正确绑定到datagridview？

> ID：13194732
> 
> 赞同：0
> 
> 时间：2012-11-02T11:53:25.000
> 
> 标签：c#, .net, winforms, datagridview

有一个具有一些属性的依赖类

```
class Dependency:
{
     public string ArtifactId { get; set; }
     public string GroupId { get; set; }
     public string Version { get; set; }

     public Dependency() {}
} 
```

和 ProjectView 类：

```
 class ProjectView:
 {
     public string Dependency[] { get; set; }
        ...
 } 
```

我想将 ProjectView 类中的依赖项数组绑定到 DataGridView。

```
 class Editor
 {
     private readonly ProjectView _currentProjectView;

     ... //I skipped constructor and other methods  

     private void PopulateTabs()
     {
        BindingSource source = new BindingSource {DataSource = _currentProjectView.Dependencies, AllowNew = true};
        dataGridViewDependencies.DataSource = source;
     } 
  } 
```

但是当我这样绑定时，就会发生异常（AllowNew 只能在 IBindingList 或具有默认公共构造函数的读写列表上设置为 true。），因为 _currentProjectView.Dependencies 是数组，它不能能够添加新项目。有一个解决方案是转换为列表，但它不方便，因为它只是复制并丢失了对原始数组的引用。这个问题有解决方案吗？如何将数组正确绑定到datagridview？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:13:41.443

好的，假设你`Dependency`在内存中的某个地方有一个这些对象的数组，你做了这样的事情：

```
arrayOfObjs.ToList(); 
```

这不会改变他们指向的参考。因此，更进一步，他们来自的数组，如果它持久存在于内存中，它将看到所做的更改。现在，你会看到任何补充，不是吗？但这就是为什么你使用像 a 这样的可变类型`List`而不是数组的原因。

所以，我的建议是你这样做：

```
class ProjectView:
{
    public string List<Dependency> Dependencies { get; set; }
} 
```

并转储数组。如果原始列表`Dependency`来自数组，那么只需`ToList`在其上发出方法并转储它。当您想从中取出一个数组时（也许您需要传回一个数组），只需执行以下操作：

```
projectViewObj.Dependencies.ToArray(); 
```

这将为`Dependency[]`您构建。

## 编辑

所以考虑以下结构：

```
class ProjectView:
{
    public Dependency[] Dependencies { get; set; }

    public List<Dependency> DependencyList { get { return this.Dependencies.ToList(); } }
} 
```

然后在表格中：

```
private void PopulateTabs()
{
   BindingSource source = new BindingSource { DataSource = _currentProjectView.DependencyList, AllowNew = true};
   dataGridViewDependencies.DataSource = source;
} 
```

然后当编辑完成时：

```
_currentProjectView.Dependencies = _currentProjectView.DependencyList.ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:28:15.800

我认为你不能在`DataGridView`不使用集合的情况下绑定一个数组。所以你必须使用这样的东西：

```
BindingSource source = new BindingSource {DataSource = _currentProjectView.Dependencies, AllowNew = true};

dataGridViewDependencies.DataSource = _currentProjectView.Dependencies.ToList(); 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource.aspx)：

DataGridView 类支持标准的 Windows 窗体数据绑定模型。这意味着数据源可以是实现以下接口之一的任何类型：

*   该`IList`接口包括一维数组。

*   `IListSource`接口，如和`DataTable`类`DataSet`。

*   `IBindingList`接口，如类`BindingList<T>`。

*   `IBindingListView`接口，如类`BindingSource`。

# java - 当系统（客户端和服务器）都打开防火墙时，如何通过java套接字连接服务器？

> ID：13194737
> 
> 赞同：0
> 
> 时间：2012-11-02T11:53:43.513
> 
> 标签：java

我正在尝试通过我的朋友系统（充当客户端）的 Java 套接字连接我的系统（充当服务器）。两个系统（Mac OS）都打开了防火墙。以下是服务器和客户端的代码：

服务器：

```
public static void main(String args[]) throws IOException {
    ServerSocket s = new ServerSocket(49884);
    System.out.println("Waiting for acceptance...");
    Socket s1 =s.accept(); 
    System.out.println("Accepted");
} 
```

客户：

```
public static void main(String args[]) throws IOException {
   Socket s1 = new Socket("10.13.12.78",49884);

} 
```

如果我在我的系统上运行这两个程序，它就可以工作。但是当我从另一个系统运行客户端程序时，无法建立连接并且也没有抛出异常，两个程序都处于等待状态。

是不是因为防火墙打开了？我如何确认这是因为防火墙？如果是这样，是否有任何技术可以测试套接字程序，因为我们无权更改防火墙设置？

提前致谢。

# javascript - 除非包装在 jQuery onready 中，否则未定义对象字面量；需要调试的想法

> ID：13194743
> 
> 赞同：0
> 
> 时间：2012-11-02T11:54:20.073
> 
> 标签：javascript, jquery

采用了一些 javascript 代码，我将这些代码重新排列成更小的文件，以使其更易于管理；我从来都不是一名全职的 javascript 工程师，但我已经使用它一段时间了，但对它感觉不太舒服。

我有一个对象文字来处理我们网站的大部分控制器级别的活动。我们重新排列了代码并将其放在不同的文件中，但是有一个特定的对象在其中我得到了一个未定义的错误。查看文件的加载顺序，它出现在 jQuery 片段之前。将这个对象字面量包装在另一个 jQuery onready 包装器中也解决了这个问题。如果我通过这样的方式进行检查：

```
if (typeof arc.event_handler === "undefined"){
 alert("something is undefined");
}else{
 alert("something is defined");
} 
```

然后使用 jQuery onready 包装，它被定义但没有它是未定义的。喜欢（我知道这段代码可以在有或没有 jQuery onload 的情况下工作）

```
// file-1.js 
var arc={};
$(document).ready(function(){
  arc.event_handler={
    do_something: function(){
      alert('do something');
    }
  }
}); 
```

然后在不同的文件中

```
// later in load order z-file.js
$(document).ready(function(){
  if (typeof arc.event_handler === "undefined"){
    alert("something is undefined");  
  }else{
    alert("something is defined");
   }

  $('.some').on('click',function(){
     arc.event_handler.do_something();
  });
}); 
```

我有点不知所措是什么导致了这种行为。我的理解是，即使是一个外部文件，jQuery onready 中的部分本质上应该会导致它等到这些其他部分被加载。我可能没有得到真正简单的东西，但想看看是否有任何关于下一步要看什么的想法？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:06:51.227

```
<script type="text/javascript" src="/first.js"></script>
<script type="text/javascript" src="/second.js"></script> 
```

第一个.js：

```
arc = {
    event_handler: {
        do_something: function(){
            alert('do something');
        }
    }
}; 
```

第二个.js：

```
$(document).ready(function(){
    $('.some').on('click', arc.event_handler.do_something);
}); 
```

# java - Hibernate/JPA 版本并发控制和 DTO/更改命令模式

> ID：13194748
> 
> 赞同：3
> 
> 时间：2012-11-02T11:54:39.660
> 
> 标签：java, hibernate, jpa, concurrency, optimistic-concurrency

我想使用`@Version`JPA 和 Hibernate 进行乐观并发控制。

我知道它在两个并行事务的典型场景中是如何工作的。我还知道，如果我有一个在表单和实体之间具有 1:1 映射的 CRUD，我可以将`version`其作为隐藏字段传递并使用它来防止用户同时进行修改。

更有趣的情况如何，使用 DTO 或更改命令模式？是否也可以`@Version`在这种情况下使用，以及如何使用？

让我给你举个例子。

```
@Entity
public class MyEntity {
    @Id private int id;
    @Version private int version;
    private String someField;
    private String someOtherField;
    // ...
} 
```

现在假设两个用户为此打开 GUI，进行一些修改并保存更改（不是同时，因此事务不会重叠）。

如果我传递整个实体，第二个事务将失败：

```
@Transactional
public void updateMyEntity(MyEntity newState) {
    entityManager.merge(newState);
} 
```

这很好，但我不喜欢到处传递实体的想法，有时会使用 DTO、更改命令等。

为简单起见，更改命令是一个映射，最终在某些服务上用于这样的调用：

```
@Transactional
public void updateMyEntity(int entityId, int version, Map<String, Object> changes) {
    MyEntity instance = loadEntity(entityId);
    for(String field : changes.keySey()) {
        setWithReflection(instance, field, changes.get(field));
    }
    // version is unused - can I use it somehow?
} 
```

显然，如果两个用户打开我的 GUI，都进行了更改，然后一个接一个地执行，在这种情况下，两个更改都将被应用，最后一个将“获胜”。我希望这种情况也能检测到并发修改（第二个用户应该得到一个异常）。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T16:12:25.677

如果我正确理解了您的问题，您只需要为您的`private int version`字段设置一个设置器，当您更新实体时，您将其设置在您的实体中。当然，您的 DTO 必须始终传输版本数据。最终，您还会执行以下操作：

```
MyEntity instance = loadEntity(entityId);
entityManager.detach(instance);
for(String field : changes.keySey()) {
    setWithReflection(instance, field, changes.get(field));
}
//set also the version field, if the loop above does not set it
entityManager.merge(instance); 
```

# java - 使用 HttpHandler 进行对象序列化时出现 java.io.EOFException 错误

> ID：13194755
> 
> 赞同：2
> 
> 时间：2012-11-02T11:54:49.583
> 
> 标签：java, exception, networking, stream

我正在尝试序列化`HttpHandler`类中的对象。

我有2个文件，`Server3.java`：

```
package server3;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.io.Serializable;
import java.net.InetSocketAddress;
import com.sun.net.httpserver.HttpExchange;
import com.sun.net.httpserver.HttpHandler;
import com.sun.net.httpserver.HttpServer;

public class Server3 {
public static void main(String[] args) throws Exception {

HttpServer server = HttpServer.create(new InetSocketAddress(3333), 0);
server.createContext("/", new MyHandler());
server.setExecutor(null); // creates a default executor
server.start();
}

static class MyHandler implements HttpHandler {
public void handle(HttpExchange t) throws IOException {
        String response = "Kjo eshte nje pergjigje nga serveri! n";

        t.sendResponseHeaders(200, response.length());
        OutputStream os = t.getResponseBody();
        os.write(response.getBytes());
        os.close();

        Personat obj = new Personat();
        ObjectOutputStream objOut = new     ObjectOutputStream(t.getResponseBody());
        objOut.writeObject(obj);
        objOut.close();
}
}
}
class Personat implements Serializable{
private static final long serialVersionUID = 1L;
int ID=3;
String Name="Andi";
} 
```

和`Client3.java`：

```
package server3;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.net.HttpURLConnection;
import java.net.URL;
//te gjithe personat qe jan ne database me nej objekt 
public class Client3 {
public static void main(String[] args) throws Exception {
    try {
        URL url = new URL("http://localhost:3333");
        HttpURLConnection s = (HttpURLConnection) url.openConnection();
        s.setDoOutput(true);
        s.setDoInput(true);
        s.setRequestMethod("POST");
        s.setUseCaches(false);

        InputStream in = s.getInputStream();
        InputStreamReader isr = new InputStreamReader(in);
        BufferedReader br = new BufferedReader(isr);
        int c;
        while ((c = br.read()) != -1) {
            System.out.print((char) c);
        }
        ObjectInputStream ios = new ObjectInputStream(s.getInputStream());
        Personat oin = (Personat) ios.readObject();
        String emri=oin.Name;
        System.out.println(emri);
        ios.close();
        s.disconnect();
    } catch (IOException ex) {
        System.err.println(ex);
        System.out.print(ex);
    }
}
  } 
```

但是当我运行它时，eclipse向我展示了

```
java.io.EOFException Kjo eshte nje pergjigje nga serveri! njava.io.EOFException` 
```

我不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:12:30.673

问题是您试图将字符串`response`和对象都放入`response.length()`字节中。发生的情况是只`response.length()`发送字节，所以如果你尝试阅读更多内容，你会得到`EOFException`.

如果您将`responseLength`参数设置为 0，它将允许您传输任意数量的数据

```
t.sendResponseHeaders(200, 0); 
```

如果要向其中写入更多数据，也不应关闭流。`os.close()`在所有的写作完成之前不要打电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:07:40.787

来自 java 文档[EOFException](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/EOFException.html)

> 表示输入期间意外到达文件结尾或流结尾。
> 
> 此异常主要由数据输入流用来表示流结束。请注意，许多其他输入操作在流结束时返回一个特殊值，而不是引发异常。

`EOFException`是 的子类`IOException`。如果您尝试从流中读取并且没有更多数据要读取，它将被抛出。

我认为`InputStream`阅读以下内容后什么都没有了：

```
InputStream in = s.getInputStream();
InputStreamReader isr = new InputStreamReader(in);
BufferedReader br = new BufferedReader(isr);
int c;
while ((c = br.read()) != -1) {
    System.out.print((char) c);
 } 
```

# asp.net - 从gridview调用javascript函数到javascript函数

> ID：13194756
> 
> 赞同：0
> 
> 时间：2012-11-02T11:54:53.363
> 
> 标签：asp.net

我有一个带有链接按钮的gridview，在链接按钮的onclientclieck 事件中，我想调用javascript 函数并根据rowindex 将gridview 中的一些值传递给javascript 函数。

我可以使用 Datakeyvalues 将值从 gridview 传递到 javascript 函数吗？如果有人有任何与此相关的例子，我很想知道。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:23:08.373

您可以在网格的 RowDataBound 事件中传递值。

```
 protected void grid_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            YourData data = (YourData)e.Row.DataItem;
            LinkButton lbTest = (LinkButton)e.Row.Cells[0].Controls[0];
            lbTest.Attributes.Add("onclick", string.Format("jsFunction({0}, {1}, {2}); return false;", data.Property1, data.Property2, data.Property3));
        }
    } 
```

# c# - 读取excel文件时出错

> ID：13194757
> 
> 赞同：1
> 
> 时间：2012-11-02T11:54:55.580
> 
> 标签：c#, excel

我正在使用下面的代码从 excel 文件中获取数据。打开连接时出现以下错误。谁能告诉我如何解决这个问题？

**请求“System.Data.OleDb.OleDbPermission, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”类型的权限失败。**

注意：ExcelFilePath 是存储在本地驱动器中的 excel 文件的路径。

```
String connectionString = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=""Excel 8.0;HDR=YES;IMEX=1;""", ExcelFilePath);

 DbProviderFactory factory = DbProviderFactories.GetFactory("System.Data.OleDb");

            DbConnection connection = factory.CreateConnection();

            connection.ConnectionString = connectionString;

            connection.Open(); // GIVES ERROR 

            DataTable tbl = connection.GetSchema("Tables");

            connection.Close();

            foreach (DataRow row in tbl.Rows)
            {
                //get sheets.

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:01:33.610

此错误通常是由代码访问安全性引起的。尝试以完全信任模式运行您的应用程序。

```
<trust level="Full" originUrl="" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:22:54.983

如果您使用的是 32 位系统，则配置文件位于

`%windir%\Microsoft.NET\Framework\{version}\CONFIG`

如果您使用的是 64 位系统，则配置文件位于

`%windir%\Microsoft.NET\Framework64\{version}\CONFIG`

尝试这个。

您遇到的异常表明包含您注册的存储过程的 C# 程序集没有足够的权限来创建 OleDbConnection 对象，相对于 .Net 框架代码访问安全 (CAS) 策略。这可能意味着您的程序集已注册为 WITH PERMISSION_SET = SAFE，如果在 CREATE ASSEMBLY DDL 语句中未指定 PERMISSION_SET，这也是默认设置。

要解决此问题，您可以使用 PERMISSION_SET = EXTERNAL_ACCESS 重新注册您的程序集以访问 ADO.Net 类（包括 OleDbConnection）。如果您使用的是 Visual Studio，则必须在 C# 数据库项目的属性页面中将其从 SAFE 更改为 EXTERNAL_ACCESS。

有关更多详细信息，请查看[http://msdn.microsoft.com/en-us/library/0x4t63kb.aspx](http://msdn.microsoft.com/en-us/library/0x4t63kb.aspx)

# perl - Perl 变量值作为另一个变量名

> ID：13194759
> 
> 赞同：2
> 
> 时间：2012-11-02T11:55:07.780
> 
> 标签：perl, variable-assignment, dynamic-variables

我有一个 perl 脚本（abc.pl）和 2 个配置文件（一个 var.pl 和一个 config.txt）

现在

在 var.pl 中

```
$admin_userid = "admin";
$guest_userid = "guest"; 
```

在 config.txt - 这有 user 的值 - 可以是 admin 或 guest

```
user=admin/guest 
```

在 abc.pl

```
require var.pl

$get_user = admin or guest (get this value from config.txt)
**$myfinal_userid = ??** 
```

如果 config.txt 中的用户是 admin，我希望 myfinal_user_id 的值为 admin，如果是 guest，我希望为 guest。

即基于$get_user 的值，我想要userid 的值-${$get_user}."_userid" 例如：如果config.txt 有user=admin，则$get_user = admin 并且我想要$myfinal_userid = $admin_userid。客人也一样。这必须是动态的。

最后我想要的是，从 config.txt 了解用户并基于它，从 var.pl 获取用户 ID 并将其存储在 myfinal_userid 中。

让我知道如何在 perl 中实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T12:17:09.747

使用哈希来存储 id 的：

```
my %id = ( admin => 'admin',
           guest => 'guest',
         );

my $get_user = 'admin';  # Read this from the config.
my $final_id = $id{$get_user};

my $other_user = 'guest';
my $another_final_id = $id{$other_user};

print $final_id, "\n", $another_final_id, "\n"; 
```

# c# - C# MD5CryptoServiceProvider 缓存 TransformBlock

> ID：13194763
> 
> 赞同：0
> 
> 时间：2012-11-02T11:55:20.550
> 
> 标签：c#, caching, md5

我可以缓存来自 TransformBlock 的结果，以便它们可以重新用于进一步的散列，而无需每次都重新计算相同的散列。给定以下小样本。

```
 static void Main(string[] args)
    {
        for (int i = 0; i < 100000; ++i)
        {
            MD5 md5 = new MD5CryptoServiceProvider();
            byte[] exe = File.ReadAllBytes(@"..\..\..\md5cache\bin\Debug\md5cache.exe");
            byte[] wrk = Encoding.UTF8.GetBytes(Path.GetFullPath(@"..\..\..\md5cache\bin\Debug"));
            byte[] cmd = Encoding.UTF8.GetBytes(@"test" + i.ToString() + ".bin");
            md5.TransformBlock(exe, 0, exe.Length, null, 0);
            md5.TransformBlock(wrk, 0, wrk.Length, null, 0);
            md5.TransformFinalBlock(cmd, 0, cmd.Length);
            byte[] hash = md5.Hash;
            string hexHash = BitConverter.ToString(hash);
            Console.WriteLine(hexHash.Replace("-", ""));
        }
    } 
```

exe 和 wrk 的数据在应用程序的整个生命周期中永远不会改变，但我无论如何都找不到缓存它以避免每次传递都不必要地重新计算数据。

我看过这个属性`CanReuseTransform`，但我不确定它是如何使用的，因为它似乎只是一个吸气剂，我猜它是用来看看你是否可以堆叠`TransformBlock/TransformFinalBlock.`

那么有人知道这是否可能吗？我想我可以创建一个新的可克隆 MD5CryptoServiceProvider 类，假设我需要的所有位都可用。

# windows - Windows 控制台转义 sprop 参数集

> ID：13194773
> 
> 赞同：1
> 
> 时间：2012-11-02T11:56:04.027
> 
> 标签：windows, console, h.264, gstreamer, video-encoding

我正在使用 Windows 控制台启动我的 GStreamer 视频管道。视频由通过 UDP 接收的 H264 编码流组成。为了多路复用和记录流，我必须提供有关流属性的详细信息 - 其中有一个称为**sprop-parameter-sets 的参数**（第 4 行）：

```
C:\gst-launch -v udpsrc port=5000 ! application/x-rtp, media=(string)video,
clock-rate=(int)90000, 
encoding-name=(string)H264, 
sprop-parameter-sets=(string)\"Z0LAFdkBQfsBEAAAAwAXc1lAAPFi5IA\\=\\,aMuMsg\\=\\=\", 
payload=(int)96, 
ssrc=(uint)2823396101, 
clock-base=(uint)3965093735, 
seqnum-base=(uint)31989
! gstrtpjitterbuffer ! rtph264depay ... 
```

如您所见，该参数已经包含许多转义字符。有人告诉我这在 Linux 中有效 - 但在 Windows 中，我收到一条错误消息，指出无法解析大写字母（或更确切地说是参数）。我知道 MS 控制台的各种转义 (^\...) 但没有发现问题。那里有可以帮助我正确格式化参数的 Windows 专家吗？

# jms - Akka 作为队列集群的替代品？

> ID：13194774
> 
> 赞同：0
> 
> 时间：2012-11-02T11:56:09.680
> 
> 标签：jms, akka, actor, amqp

我有一个设置，其中应用程序使用 AMQP 队列进行通信。出于多种原因，我们有一个基于 RabbitMQ 的集群。

我的问题很简单：为了使用 Akka，有人如何放弃 RabbitMQ（或 JMS 的 AMQ）？使用 Akka 而没有代理时，我不太了解集群的概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:43:23.083

首先：Akka 不是消息代理。您会看到，Akka Actors 是一种用于构建具有容错性质的水平和垂直可扩展应用程序的模型。至于跨 Akka Actor 节点的实际消息传输：任何遵守发送保证的传输都可以工作，默认情况下使用 TCP，但任何人都可以自由连接 AMQP、JMS、0MQ、UDP 或任何他们喜欢的传输。

因此，如果您想在不对事物的物理位置做出假设的模型中编写系统/应用程序，则可以切换到 Akka Actors。

至于 Akka Clustering（Akka 2.1 中的 p2p 和实验性）我不明白你的问题是什么，请详细说明。

希望这可以帮助，

√</p>

# spring - 在 Spring 应用程序上下文中读取环境变量

> ID：13194779
> 
> 赞同：0
> 
> 时间：2012-11-02T11:56:33.000
> 
> 标签：spring

我有三个环境变量。MY_TOPIC MY_CONTEXT_FACTORY MY_LDAP

第一个 - MY_TOPIC 像这样工作

```
<bean id="myPublishTopic" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiTemplate">
            <ref bean="jndiTemplate"/>
        </property>
        <property name="jndiName">
            <value>fxClientDestinationUID=${MY_TOPIC}</value>
        </property>
    </bean> 
```

最后两个不能从环境变量中读取。它如何使这项工作？

```
<bean id="jndiTemplate" class="org.springframework.jndi.JndiTemplate">
        <property name="environment">
         <props>
            <prop key="java.naming.factory.initial">${MY_CONTEXT_FACTORY}</prop>
            <prop key="java.naming.provider.url">${MY_LDAP}</prop>
         </props>
        </property>
    </bean> 
```

只有当我从我想避免的属性文件中读取它时，最后两个才有效。

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location"><value>/WEB-INF/classes/springConfig-devel.properties</value></property>
    </bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:23:06.577

如果您使用的是 Spring 3+，则可以使用 Spring 表达式语言。

用于`#{systemEnvironment['NAME']}`访问环境变量

```
<bean id="jndiTemplate" class="org.springframework.jndi.JndiTemplate">
        <property name="environment">
            <props>
                <prop key="java.naming.factory.initial">#{systemEnvironment['MY_CONTEXT_FACTORY']}</prop>
                <prop key="java.naming.provider.url">#{systemEnvironment['MY_LDAP']}</prop>
         </props>
    </property>
</bean> 
```

用于`#{systemProperties['value']}`Java 系统属性。

# php - 从链接中提取文本

> ID：13194780
> 
> 赞同：1
> 
> 时间：2012-11-02T11:56:39.580
> 
> 标签：php

我有一个小函数，它遍历一堆文本并以文本形式查找任何 url 并将它们转换为 html a's：

例如

```
normal text lipsum etc http://www.somewebsitelink.com lipsum lipsum 
```

变成：

```
normal text lipsum etc <a href="www.somewebsitelink.com">http://www.somewebsitelink.com</a> lipsum lipsum 
```

我的功能如下：

```
function linkify($text)
{
  $text = eregi_replace('(((f|ht){1}tp://)[-a-zA-Z0-9@:%_\+.~#?&//=]+)',
'<a target="_blank" href="\\1">\\1</a>', $text);

  $text = eregi_replace('([[:space:]()[{}])(www.[-a-zA-Z0-9@:%_\+.~#?&//=]+)',
'\\1<a target="_blank" href="http://\\2">\\2</a>', $text);

  return $text;
} 
```

一切正常，但是我使用此功能并打印出 html 的地方是在有限的宽度空间中，有时链接最终会变得更大，然后可以容纳在空间中，最终导致溢出。

我想知道如何去做两件事：

一个。从文本中删除不必要的，即“http：//”，所以我最终会得到

```
<a href="http://www.somewebsitelink.com">www.somewebsitelink.com</a> 
```

和

湾。如果文本超过 20 个字符，请将其后面的所有内容剪掉并添加几个点。例如：

```
<a href="http://www.somewebsitelink.com">www.somewebsitelin...</a> 
```

我想知道我是否可能不得不在不使用正则表达式的情况下这样做，但是我对 reg exp 的理解还是相当有限的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:23:44.700

```
$link = 'http://www.somewebsitelink.com';
function linkify($text, $maxLen = 15)
{
  return preg_replace_callback('(((f|ht){1}tp://)([-a-zA-Z0-9@:%_\+.~#?&//=]+))', function($t) use ($maxLen) {
      if ( strlen($t[3]) > $maxLen)
        $t[3] = substr_replace($t[3], '...', $maxLen);

      return sprintf('<a target="_blank" href="%s">%s</a>', $t[0], $t[3]);
  }, $text);
}

header('content-type: text/plain');
echo linkify($link); 
```

PHP <= 5.2 的代码

```
$link = 'http://www.somewebsitelink.com';
function linkify($text, $maxLen = 15)
{
    $funcBody = <<<FUNC
if ( strlen(\$t[3]) > \$maxLen)
  \$t[3] = substr_replace(\$t[3], '...', \$maxLen);   

return sprintf('<a target="_blank" href="%s">%s</a>', \$t[0], \$t[3]);   
FUNC;
      $func = create_function(
        '$t, $maxLen =' . $maxLen,
        $funcBody
    );
    return preg_replace_callback('(((f|ht){1}tp://)([-a-zA-Z0-9@:%_\+.~#?&//=]+))', $func, $text);
}

header('content-type: text/plain');
echo linkify($link); 
```

结果是

```
<a target="_blank" href="http://www.somewebsitelink.com">www.somewebsite...</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T12:22:48.023

我认为这将满足您的需求。它将一个 url 作为其唯一参数并删除前导 'http://www." 然后如果它少于 20 个字符则返回该字符串。如果它超过 20 个字符它返回前 17 个字符并附加 '.. .'.

```
function get_formatted_url($url){
    $url = trim($url);
    $url = str_replace("http://www.", "", strtolower($url)); 
    if(strlen($url) > 20){
        return substr($url, 0, 16) . '...';
    }else{
        return $url;
    }
} 
```

编辑：使用 preg_replace_callback() 的示例

```
function get_formatted_url($url){
    $url = $url[0];
    $formatted_url = trim($url);
    $formatted_url = str_replace("http://www.", "", strtolower($formatted_url)); 
    if(strlen($formatted_url) > 20){
        return '<a href="'.$url.'" />'. substr($formatted_url, 0, 16) . '... </a> ';
    }else{
        return '<a href="'.$url.'" />'. $formatted_url . '</a> ';
    }
}

function linkify($text){
    $reg = '(((f|ht)tp://)[-a-zA-Z0-9@:%_\+.~#?&//=]+)';
    $text = preg_replace_callback($reg, "get_formatted_url", $text);
    return $text;
}

$text = "abcd http://www.abc.com?hg=alkdjfa;lkdjfa;lkdjfa;lkdsjfa;ldks abcdefg http://www.abc.com";
echo linkify($text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:10:11.337

使用 php substr 函数。例如：

```
<?php substr($text,0,10);?> 
```

# java - Java：比较两个字符串值并构建一个唯一字符串

> ID：13194781
> 
> 赞同：-4
> 
> 时间：2012-11-02T11:56:42.177
> 
> 标签：java, json

我有两个字符串，如下所示：

```
String A = {"user1":{"cNo":4,"wId":1},"user2":{"cNo":5,"wId":1}}

String B = {"user1":{"cNo":4,"wId":1},"user3":{"cNo":6,"wId":1},"user2":{"cNo":5,"wId":1}} 
```

我想构建一个新的 String C ，它不应包含任何重复项，如下所示（基于 user1 、 user2 、 user3 等值）

通常它应该如下所示，不包含任何重复项

```
String C = {"user1":{"cNo":4,"wId":1},"user3":{"cNo":6,"wId":1},"user2":{"cNo":5,"wId":1}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:00:53.670

这些是 JSON 文档。使用像[Gson](http://code.google.com/p/google-gson/)这样的 JSON 库来处理它们。解组他们说`User`实现`equals()`和`hashCode()`基于平等要求的类。然后将这些对象中的每一个添加到 java.util.Set 中，然后使用 Gson 库将该 Set 编组为 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:59:44.273

您可以删除开始和结束大括号，然后使用字符串拆分器并在“，”上拆分以获取每个用户标签，并将它们添加到集合中（只会添加唯一的标签），然后用于`set.values()`获取此唯一列表并打印出来？可能不是最有效的方法，但应该可以。

# asp.net-mvc-3 - 如何使用 jquery 模板从 mvc3 中的 ms-access 数据库中检索图像

> ID：13194786
> 
> 赞同：0
> 
> 时间：2012-11-02T11:57:06.927
> 
> 标签：asp.net-mvc-3, image, jquery-templates

将图像保存在 Web 目录中并将 URL 存储在数据库中。我应该对控制器使用 actionresult 还是任何其他可用选项？再次在输出中显示像 asd/dad/daaf/img.png 之类的 url?? 我应该从应用程序名称中给出 url 吗？或图像/abc.png？

> 如何使用基于数据库中控制器中的 imageid 的文件路径结果获取图像

# jquery - 为什么我不能在返回的函数 $.post - jquery 中访问全局变量？

> ID：13194789
> 
> 赞同：1
> 
> 时间：2012-11-02T11:57:19.273
> 
> 标签：jquery, ajax, post

```
var strTest = '';

$.post(
    'test.php', 
    { post_test : 1 },
    function(data) {
        strTest = data.split('a');

        $.post(
            'test_2.php', 
            { post_test_2 : 2 },
            function(sData) {
                alert(strTest);
            }
        );
    }
); 
```

`strTest`- 是空的！为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:05:45.910

问题是`test.php`因为它返回一个空字符串，所以`data`是空的，然后`strTest`将是空的，因为在`data`要拆分的内容中没有任何内容！

你应该检查你的代码`test.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:16:19.213

您的代码似乎正在运行。我已经在[jsfiddle](http://jsfiddle.net/JJruG/)中复制了您的案例，您可以从生成的警报中看到，`strTest`其中包含数据。问题可能源于`test.php`什么都不返回的事实。

# javascript - jqplot 饼图图例宽度

> ID：13194792
> 
> 赞同：0
> 
> 时间：2012-11-02T11:57:37.273
> 
> 标签：javascript, jqplot

我正在尝试渲染饼图的图例，使其具有固定的宽度，并且当标签达到该宽度（div 持有人）时，在下一行连字符。我尝试了行选项，但效果不佳，因为我的数据是动态的，有时我说 3 个数据集，每个数据集都呈现在单独的行中，而在其他时候我有 15-20 个数据集，它变得凌乱。

无论如何，解决方案是将图例限制为 div 的宽度，它被渲染成，但它似乎不接受任何 css 更改。我尝试添加宽度：250px；对于 jqPlot css 中的“jqplot-table-legend”，我还尝试使用 Chrome 中的 Inspect Element 将其添加到各个地方以测试它是否有效，但它似乎不接受新的宽度。我还尝试将其硬编码到各个地方的 javascript 文件中，但没有成功。

我不确定我可以在代码方面添加什么到问题中。在 jqPlot 方面，一切都是相当标准的。

任何有关如何解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:05:16.167

这似乎是一种快速而肮脏的方式，但它可以完成工作。我将使用 jqplot.pieRenderer.js 文件作为示例，因为它比缩小版本更容易阅读。打开 js 文件并向下滚动到第 568 行。就在下面

```
this._elem = $(document.createElement('table'));
this._elem.addClass('jqplot-table-legend'); 
```

添加

```
this._elem.css({width: 300}); 
```

这会将桌子拉伸到您需要的任何宽度。不幸的是，它还会用颜色样本拉长列，因此您现在需要向下滚动一点，直到找到

```
td1.css({textAlign: 'center', paddingTop: rs}); 
```

将其更改为

```
td1.css({width: 16, textAlign: 'center', paddingTop: rs}); 
```

你应该准备好了。

# windows - 批处理文件：用于参数

> ID：13194794
> 
> 赞同：0
> 
> 时间：2012-11-02T11:57:36.963
> 
> 标签：windows, batch-file, dos

我无法理解以下 Windows 批处理文件的作用，有人可以解释一下：

```
for /f %%i in ("%0") do set curpath=%%~dpi
cd /d %curpath% 
/*Some other code...*/
cd /d %curpath% 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:31:08.427

`%0`是 .bat 文件本身的完整路径（如果从另一个目录运行），并且`~dpi`是从省略文件名的路径中提取驱动器和目录的修饰符，因此此代码段将当前驱动器和目录设置为批处理文件存在。

我看不出使用 a 的原因，一次`FOR`做`%~dp0`同样的事情。

# extjs - EXTJS：如何在没有数据库的情况下保存表单提交值？

> ID：13194795
> 
> 赞同：-1
> 
> 时间：2012-11-02T11:57:38.180
> 
> 标签：extjs, extjs4

我想在没有 DB 的情况下保存我的表单字段并在 Grid 中显示这个值。

我试图输出为 JSON 格式。但它是暂时的。我想以 PHP 或 JSON 结构保存为永久值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:53:38.703

您可以将其保存到服务器端的文本文件中。只需编写服务器端处理即可将数据写入文本文件。我不知道你为什么会。有很多免费的开源 SQL 和非 sql 数据库可供您使用。您可以使用 couchdb 或类似的东西直接存储您的 JSON 数据。

# android - 我正在使用服务器端验证进行登录页面，我应该填写变量“prashanth”和“sharma”的位置吗？

> ID：13194799
> 
> 赞同：1
> 
> 时间：2012-11-02T11:58:00.593
> 
> 标签：android, wordpress

我正在使用服务器端验证进行登录页面，我应该在 prashanth 和 sharma 的位置填写什么？

```
package web.com;

@WebServlet(name="AndroidResponse", urlPatterns={"/androidres.do"})
public class AndroidResponse extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        PrintWriter out=response.getWriter();
        String un,pw;
        un=request.getParameter("username");
        pw=request.getParameter("password");
        if(un.equalsIgnoreCase("prashant") && pw.equals("sharma"))
            out.print(1);
        else
            out.print(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:17:04.317

你必须这样做。该方法`request.getParameter("username")`给出了 ua 对象，你必须向下转换它的字符串。希望这对你有用。

```
 String username = (String)request.getParameter("username");
 String password = (String)request.getParameter("password"); 
```

# asp.net - 如何增加asp.net中的下拉列表容量

> ID：13194800
> 
> 赞同：1
> 
> 时间：2012-11-02T11:58:03.060
> 
> 标签：asp.net, vb.net, drop-down-menu

如何增加 asp.net 中的下拉列表容量？我必须一次显示 20,000 个项目，`DropDownList`但绑定后它没有显示所有项目。一些项目丢失。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:19:58.607

我不知道 .NET 框架应用的任何直接限制；客户可能会施加限制，但我不确定。20,000 是很多项目和很多要渲染的 HTML，而 HTML 渲染是更大的性能问题之一。您可能想要考虑另一种方法，例如自动完成功能，[例如 this](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:23:16.280

下拉列表选择没有理由丢失项目。

在绑定之前检查您的数据源以确保所有项目都在那里，这可能是查询填充数据源而不是下拉列表缺少项目的问题。

尽管正如人们所指出的那样，用搜索功能或自动完成功能下拉列表替换它不应该是 20,000 个项目的地方。

# php - 使用 WAMP (PHP 5.3.5) 配置 PHPExcel 类时出现致命错误

> ID：13194801
> 
> 赞同：0
> 
> 时间：2012-11-02T11:58:05.227
> 
> 标签：php, phpexcel

在我的应用程序中使用 PHPExcel 时出现以下错误

在 PHPExcel/Autoloader.php 文件中的“PHPExcel_Shared_ZipStreamWrapper::register();”行，

```
Fatal error: require() [function.require]: Failed opening required '/wamp/www/xxxx/site//common/class/PHPExcel_Shared_ZipStreamWrapper.class.php' (include_path='C:\wamp\www\xxxx\site\common\html_purifier;.;C:\php\pear') in C:\wamp\www\xxxx\site\config\bootstrap.php on line 27 
```

对于行“PHPExcel_Shared_String::buildCharacterSets();”</p>

```
Fatal error: require() [function.require]: Failed opening required '/wamp/www/xxxx/site//common/class/PHPExcel_Shared_String.class.php' (include_path='C:\wamp\www\xxxx\site\common\html_purifier;.;C:\php\pear') in C:\wamp\www\xxxx\site\config\bootstrap.php on line 27 
```

我在 php 5.3.5 中使用 wamp。并且在我的本地机器上启用了 zip xml 和 gd2 扩展。请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:04:58.957

对 C:\wamp\www\xxxx\site\config\bootstrap.php 的引用表明您正在使用某种框架：它是否具有可能与 PHPExcel 的自动加载器冲突或覆盖的自动加载器？

参考资料

> '/wamp/www/xxxx/site//common/class/PHPExcel_Shared_ZipStreamWrapper.class.php'

似乎证实了这一点。因为某些东西正在更改文件名以将“.class”作为文件名的一部分包含在内，并且它忽略了 PHPExcel 自己的自动加载器，该自动加载器会拆分类名以匹配其目录结构

如果您使用的是标准框架，例如 ZF 或 Symfony，那么您应该使用该框架注册 PHPExcel。如果是自制软件，请确保您的自动加载器已注册 SPL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:08:40.300

您的路径中似乎有双斜杠：

/wamp/www/xxxx/site* *//* *常见

所以这可能是路径问题，自动加载器无法加载文件，因为路径错误。

# android - SharedObject 或 XML 用于 AS3 中的数据存储，用于 Android 设备的游戏开发

> ID：13194802
> 
> 赞同：0
> 
> 时间：2012-11-02T11:58:09.493
> 
> 标签：android, xml, actionscript-3, flash

我目前正在制作仅使用 Flash 的 android 游戏。我有用户将在应用程序运行时保存的变量 User(string)、Levels_unlocked(int)、Money(int) 和 Highscore(int)。

我怎样才能做到这一点？提前感谢任何重播！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:07:34.723

您应该使用 AIR 中的 FileStream 类在 Android 上进行本地保存。[文件流](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fla%20sh/filesystem/FileStream.html)

```
private function saveGame() : void {  
   var myFile:File = File.documentsDirectory.resolvePath("savegames/test.txt");  
   var fs:FileStream = new FileStream();  
   fs.open(myFile,FileMode.WRITE);  
   fs.writeUTFBytes("bytes To Write");  
   fs.close();  
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T15:08:21.733

我认为最好的解决方案是 SQLite 数据库，因为它易于使用、发展和随时更改，当您需要向其中添加数据时

*   [SQLConnection 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/data/SQLConnection.html)
*   [SQLite in Air 10 部分教程](http://kirill-poletaev.blogspot.co.uk/2011/04/working-with-sqlite-in-air-part-1.html)

# c# - 使用存储在变量中的值更新数据库

> ID：13194804
> 
> 赞同：0
> 
> 时间：2012-11-02T11:58:14.637
> 
> 标签：c#, mysql

我正在使用 Visual C# 2010 express windows 窗体应用程序和用于 DB 的 Mysql。我想从 DB 中获取一个值（当前学生人数）并将其增加 1 并更新该值。为此，我使用下面的代码，但我收到一个名为“'字段列表'中的未知列'x'的错误。

```
 connection.Open();
    MySqlCommand cmd1 = new MySqlCommand("SELECT NoOfStudents FROM batch", connection);
                MySqlDataReader dr = null;
                dr = cmd1.ExecuteReader();
                int x;
                while (dr.Read())
                {
                x = Convert.ToInt32(dr[0]);
                x = x + 1;
               }
                dr.Close();
                MySqlCommand cmd2 = new MySqlCommand("UPDATE batch SET NoOfStudents= x", connection);
                cmd2.ExecuteNonQuery();
                connection.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:01:35.290

改成

```
MySqlCommand cmd2 = new MySqlCommand(string.Format("UPDATE batch SET NoOfStudents= {0}",x), connection); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:02:28.783

尝试这个

```
string sql=string.Format("UPDATE batch SET NoOfStudents= {0}",x);
MySqlCommand cmd2 = new MySqlCommand(sql, connection); 
```

x 是您程序中声明的变量，Mysql 对此一无所知，这只是一个字符串，编译器会忽略其内容

# iphone - 捕获视频时在开始时检测相机旋转

> ID：13194808
> 
> 赞同：0
> 
> 时间：2012-11-02T11:58:28.473
> 
> 标签：iphone, objective-c, ios, video

我认为标题本身是非常自我解释的。

我想这样做的原因是我将视频的第一帧作为缩略图，但根据你拿着 iPhone 的方式，它会变成 90* CCL 或倒置。

有没有办法在视频拍摄开始时检测相机方向，就像拍照时一样，还是我最好静态选择最常用的角度？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:51:59.793

使用： UIDeviceOrientation deviceOrientation = [[UIDevice currentDevice] 方向];

```
 NSLog(@"%i",deviceOrienation);

    on hit of camera_click_On() function... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:02:42.653

`shouldAutoRotateToInterface`在根视图控制器中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:18:23.813

查看您的相机将根据您的设备方向进行定位。所以你需要做的就是检查设备方向

# php - 在 Sylius-Sandbox 中上传产品图片失败

> ID：13194813
> 
> 赞同：0
> 
> 时间：2012-11-02T11:58:55.850
> 
> 标签：php, symfony, file-upload, symfony-2.1, sylius

我不知道这个问题是否有效，但我专门针对 Symfony 提出这个问题。

在 Sylius-sandbox 中：上传产品图片似乎不起作用。在演示站点和本地安装上进行了尝试。

当图像上传到产品时，什么都不会发生。显示默认占位符，上传目录中不显示任何内容。

也不创建上传目录。手动创建它似乎没有效果。

我在 symfony2.1 新安装中使用了[https://github.com/Sylius/Sylius-Sandbox代码。](https://github.com/Sylius/Sylius-Sandbox)我正在使用 App 和 Sylius-sandbox 使用 bin。

任何人创建或使用 Sylius-sandbox 帮助我...

# 产品.php

```
<?php

namespace Sylius\Sandbox\Bundle\AssortmentBundle\Entity;

use Sylius\Bundle\AssortmentBundle\Entity\CustomizableProduct as BaseProduct;
use Sylius\Bundle\CategorizerBundle\Model\CategoryInterface;
use Sylius\Bundle\InventoryBundle\Model\StockableInterface;
use Symfony\Component\Validator\Constraints as Assert;

class Product extends BaseProduct implements StockableInterface
{
const VARIANT_PICKING_CHOICE = 0;
const VARIANT_PICKING_MATCH  = 1;

/**
 * Product category.
 *
 * @Assert\NotBlank
 *
 * @var CategoryInterface
 */
protected $category;

/**
 * Variant picking mode.
 * Whether to display a choice form with all variants or match variant for
 * given options.
 *
 * @var integer
 */
protected $variantPickingMode;

/**
 * Image path.
 *
 * @var string
 */
protected $imagePath;

/**
 * Image upload.
 *
 * @Assert\File(maxSize="512k")
 * @Assert\Image
 */
public $image;

/**
 * Set default variant picking mode.
 */
public function __construct()
{
    parent::__construct();

    $this->variantPickingMode = self::VARIANT_PICKING_CHOICE;
}

/**
 * Get category.
 *
 * @return CategoryInterface
 */
public function getCategory()
{
    return $this->category;
}

/**
 * Set category.
 *
 * @param CategoryInterface $category
 */
public function setCategory(CategoryInterface $category)
{
    $this->category = $category;
}

public function getVariantPickingMode()
{
    return $this->variantPickingMode;
}

public function setVariantPickingMode($variantPickingMode)
{
    if (!in_array($variantPickingMode, array(self::VARIANT_PICKING_CHOICE, self::VARIANT_PICKING_MATCH))) {
        throw new \InvalidArgumentException('Wrong variant picking mode supplied');
    }

    $this->variantPickingMode = $variantPickingMode;
}

public function isVariantPickingModeChoice()
{
    return self::VARIANT_PICKING_CHOICE === $this->variantPickingMode;
}

/**
 * This is a proxy method to access master variant price.
 * Because if there are no options/variants defined, the master variant is
 * the project.
 *
 * @return float
 */
public function getPrice()
{
    return $this->masterVariant->getPrice();
}

/**
 * Implementation of stockable interface.
 * Proxy to use master variant for managing inventory status.
 *
 * {@inheritdoc}
 */
public function getStockableId()
{
    return $this->masterVariant->getStockableId();
}

/**
 * {@inheritdoc}
 */
public function isInStock()
{
    return $this->masterVariant->inStock();
}

/**
 * {@inheritdoc}
 */
public function getOnHand()
{
    return $this->masterVariant->getOnHand();
}

/**
 * {@inheritdoc}
 */
public function setOnHand($onHand)
{
    $this->masterVariant->setOnHand($onHand);
}

public function getImagePath()
{
    return $this->imagePath;
}

public function setImagePath($imagePath)
{
    $this->imagePath = $imagePath;
}

public function getAbsoluteImagePath()
{
    return null === $this->getImagePath() ? null : $this->getImageUploadRootDir().'/'.$this->getImagePath();
}

public function getImageWebPath()
{
    return null === $this->getImagePath() ? null : $this->getImageUploadDir().'/'.$this->getImagePath();
}

public function getImageUploadDir()
{
    return 'uploads/images';
}

public function hasImage()
{
    return null !== $this->getImagePath();
}

public function saveImage()
{
    if (null === $this->image) {

        return;
    }

    $this->setImagePath(uniqid().'.'.$this->image->guessExtension());
    $this->image->move($this->getImageUploadRootDir(), $this->getImagePath());
}

public function deleteImage()
{
    if ($file = $this->getAbsoluteImagePath()) {
        unlink($file);
    }
}

protected function getImageUploadRootDir()
{
    return __DIR__.'/../../../../web/'.$this->getImageUploadDir();
}

static public function getVariantPickingModeChoices()
{
    return array(
        self::VARIANT_PICKING_CHOICE => 'Display list of variants',
        self::VARIANT_PICKING_MATCH  => 'Display options'
    );
}

/**
 * Get comment thread ID.
 *
 * @return string
 */
public function getCommentThreadId()
{
    return 'assortment_product_'.$this->getId();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T18:29:44.513

我也使用了 sylius 沙箱应用程序作为指南，如果不用作指南可能会导致更多混乱，请尝试制作自己的代码并使用沙箱作为参考。

2分...

1.  我相信 Sylius-Sandbox 已被弃用（改用[Sylius/Sylius](https://github.com/Sylius/Sylius)）
2.  要实现图像管理，可能有 2 个选项： 1- 使用 sylius 的内置图像管理，它实现每个变体的图像。2-构建您自己的实现，类似于您在产品实体代码中的实现。

在我的实现中，我认为使用 Product 实体中的 OneToMany 关系与 Image 实体更简单，显然这取决于您的要求。我为 Image 实体使用了[symfony 文档](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)。

# php - 拆分 sha256 哈希

> ID：13194814
> 
> 赞同：1
> 
> 时间：2012-11-02T11:58:58.097
> 
> 标签：php, sha256

> **可能重复：**
> [可以将 SHA256 哈希截断为 128 位吗？](https://stackoverflow.com/questions/3026762/is-it-okay-to-truncate-a-sha256-hash-to-128-bits)

如果只返回 sha256 哈希的前 35 个字符，谁能告诉我熵会受到多大程度的影响？这样做有什么风险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:10:37.157

好吧，不确定你到底要什么。您的 35 个字符代表 17.5 个字节，即 140 位

```
256 bit: 2^256 = 1.1E+77
140 bit: 2^140 = 1,4E+42 
```

所以熵显着降低。希望这可以帮助。

# android - 插入不起作用，为什么？

> ID：13194815
> 
> 赞同：1
> 
> 时间：2012-11-02T11:59:04.183
> 
> 标签：android, database, cursor, insert-into

该表是从 xml 生成的，它看起来像这样 `CREATE TABLE orders (id INTEGER AUTO-INCREMENT PRIMARY KEY , id_room INTEGER, nr_table INTEGER, id_user INTEGER, id_payment INTEGER, total INTEGER)`

```
com.DataConnector.DataConnector.getInstance(getApplicationContext()).executeQuery("INSERT INTO sync_log (table_name,rec_id,upd,del,synchronized)" +"VALUES (\"orders\",2,1,0,0) "); 
```

这个工作没有问题。

```
Boolean ab=com.DataConnector.DataConnector.getInstance(getApplicationContext()).executeQuery(
"INSERT INTO orders (id_room,nr_table,id_user,id_payment,total)" +"VALUES (1,1,1,0,100) "); 
```

这抛出

```
no such column: orders (code 1): , while compiling: INSERT INTO orders (id_room,nr_table,id_user,id_payment,total)VALUES (1,1,1,0,100)

Log.i("cursor id", cursor.getColumnName(0) + cursor.getColumnName(1) + cursor.getColumnName(2) + cursor.getColumnName(3) +cursor.getColumnName(4) + cursor.getColumnName(5));
returns `idid_roomnr_tableid_userid_paymenttotal 
```

所以我有表，列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:39:59.243

对不起，男孩问题解决了，我在订单表上有一个更新触发器，并且有一个语法错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:33:34.603

我想您需要使用表中的 _id 属性。

如果要使用游标进行处理，最好始终使用表中的属性 _id。

为了您更好的理解

请参阅[此](https://stackoverflow.com/questions/3192064/about-id-field-in-android-sqlite)讨论并[浏览此信息](http://www.casarini.org/blog/2009/android-contentprovider-on-sqlite-tables-without-the-_id-column/)。在 Android 中使用数据库、游标和适配器可能会让您感觉很舒服。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:01:03.420

“total)”和“VALUES”之间没有空格？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:09:39.843

应该是表的定义有问题。确保所有列都是整数。

尝试再次创建这样的表：

```
CREATE TABLE orders (id INTEGER PRIMARY KEY, id_room INTEGER, nr_table INTEGER, id_user INTEGER, id_payment INTEGER, total INTEGER) 
```

# android - 如何获得上一个或下一个视图

> ID：13194823
> 
> 赞同：6
> 
> 时间：2012-11-02T11:59:32.763
> 
> 标签：android, view, find, next

如何获取 SlideButton 视图的上一个视图（TextView）和 SlideButton 视图的下一个视图。

id 为“remotelight”的 SlideButton 视图。我可以使用“findViewById”方法获得 SlideButton 视图。所以在我得到 SlideButton View 之后，我怎样才能得到上一个视图和下一个视图，没有“findViewById”方法的帮助。

非常感谢。

下面是布局xml的一部分：

```
<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" />

    <com.ivn.SlideButton
        android:id="@+id/remotelight"
        android:layout_width="100dp"
        android:layout_height="50dp" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="" />

</TableRow> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T12:05:27.173

您可以使用`ViewGroup`充当小部件容器的实例来执行此操作。

请参阅[getChildAt(int)](http://developer.android.com/reference/android/view/ViewGroup.html#getChildAt%28int%29)和 [indexOfChild(View)](http://developer.android.com/reference/android/view/ViewGroup.html#indexOfChild%28android.view.View%29)

因此，`getChildAt(indexOfChild(v)+1)`将为您提供下一个视图。

所以像

```
 ViewGroup container = (ViewGroup) findViewbyID(R.tableRow1);
 View slideBtn = findViewbyID(R.remoteLight);
 View nextView = container.getChildAt(container.indexOfChild(slideBtn)+1); 
```

您应该添加溢出检查，并且下一个视图是您实际上想要的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-28T20:15:37.160

我在 Kotlin Extension 中创建了一个等价物：

```
fun View.getPreviousView() : View? {
    val container : ViewGroup = this.parent as ViewGroup
    val indexOfChild = container.indexOfChild( this )
    return if (indexOfChild - 1 >= 0) {
        container.getChildAt(indexOfChild - 1)
    } else null
}

fun View.getNextView() : View?{
    val container : ViewGroup = this.parent as ViewGroup
    val indexOfChild = container.indexOfChild( this )
    return if (container.childCount > indexOfChild + 1) {
        container.getChildAt(indexOfChild + 1)
    } else null
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-09T06:56:37.933

我创建了两个函数来使用@CjS 解决方案：

```
/**
 * @param view
 */
public static View prev(View view) {

    ViewGroup container = (ViewGroup) view.getParent();

    int indexOfChild = container.indexOfChild(view);

    if ((indexOfChild - 1) >= 0) {

        return container.getChildAt(indexOfChild - 1);

    }

    return null;

}

/**
 * @param view
 */
public static View next(View view) {

    ViewGroup container = (ViewGroup) view.getParent();

    int indexOfChild = container.indexOfChild(view);

    if (container.getChildCount() > (indexOfChild + 1)) {

        return container.getChildAt(indexOfChild + 1);

    }

    return null;

} 
```

# mysql - 删除 phpmyadmin 中的双空格

> ID：13194830
> 
> 赞同：1
> 
> 时间：2012-11-02T11:59:55.620
> 
> 标签：mysql, sql, phpmyadmin, whitespace, replace

我需要删除我的一个数据库表中文本中任何地方的任何双空格（两个空格）。

我试过了：

```
update items set description= replace(description, '  ', ' ') 
```

但是如果它只是空格，这会删除..但是“描述”单元格有很多词，比如：“这里的任何文本更多”，所以我需要在前面的例子中删除“更多”这个词之前的两个空格，然后离开其他一切都照原样..只需在任何地方用一个空格替换双倍空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:04:29.640

你可以使用修剪命令，请参考这个

[http://consultingblogs.emc.com/jamespipe/archive/2007/08/14/SQL_3A00_-A-49-character-long-_2700_empty_2700_-field_3F00_.aspx](http://consultingblogs.emc.com/jamespipe/archive/2007/08/14/SQL_3A00_-A-49-character-long-_2700_empty_2700_-field_3F00_.aspx)

或试试这个

```
update items set description= replace(description,space(2),space(1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:07:36.550

如果对你有用，试试这个，

```
update items set description= replace(description, 'SPACE(2)', ' ') 
```

但这工作得很好我测试过，

```
update items set description= replace(description, '   ', ' ') WHERE id=1 
```

# xaml - 向 XAML ControlTemplate 添加自定义属性？

> ID：13194831
> 
> 赞同：2
> 
> 时间：2012-11-02T12:00:15.693
> 
> 标签：xaml, fonts, rotation, controltemplate

我有一个 Button ControlTemplate 来模仿 WPF 项目中的 Windows Store AppBar 按钮。它工作正常。这个想法是使用字体 Segoe UI Symbol 中的符号作为图像。绑定是通过使用 Button 类的两个标准属性来完成的：Content 和 Tag。

```
<Style x:Key="AppBarButton" TargetType="Button">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Grid x:Name="grdRoot" Width="70" Background="Black">
                    <StackPanel VerticalAlignment="Top" Margin="0">
                        <Grid Width="40" Height="40" HorizontalAlignment="Center">
                            <Ellipse x:Name="borderCircle" Stroke="White" Fill="Black" StrokeThickness="2" />
                            <TextBlock x:Name="txtSymbol" Text="{TemplateBinding Tag}" Foreground="White" TextAlignment="Center" VerticalAlignment="Center" FontFamily="Segoe UI Symbol" FontSize="20" />
                        </Grid>
                        <TextBlock x:Name="txtContent" Text="{TemplateBinding Content}" Foreground="White" Margin="0,4,0,0" FontSize="10" TextAlignment="Center" TextTrimming="WordEllipsis"/>
                    </StackPanel>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="borderCircle" Storyboard.TargetProperty="(Fill).(Color)" To="Gray" Duration="0" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="borderCircle" Storyboard.TargetProperty="(Fill).(Color)" To="White" Duration="0" />
                                    <ColorAnimation Storyboard.TargetName="txtSymbol" Storyboard.TargetProperty="(Foreground).(Color)" To="Black" Duration="0" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="borderCircle" Storyboard.TargetProperty="(Stroke).(Color)" To="Gray" Duration="0" />
                                    <ColorAnimation Storyboard.TargetName="txtSymbol" Storyboard.TargetProperty="(Foreground).(Color)" To="Gray" Duration="0" />
                                    <ColorAnimation Storyboard.TargetName="txtContent" Storyboard.TargetProperty="(Foreground).(Color)" To="Gray" Duration="0" />
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

问题是字体中缺少许多预期的符号。似乎它们通常只定义一次，并且期望通过转换生成相应的旋转符号。

一个例子：ArrowUp 在字符 xE110 中定义。但是没有对应的ArrowDown！

我知道可以将 Angle="180" 的 RotateTransform 应用于 TextBlock。它在直接应用于 TextBlock 时起作用。但如果应用于按钮，它当然会将整个模板内容颠倒过来，包括文本。如果 TextBlock 隐藏在控件层次结构的深处，如何从我的 ControlTemplate 外部应用转换？

我的建议是将自定义属性 ImageAngle 应用于可以绑定到内部 Angle 属性的 ControlTemplate。如果可能的话，ImageAngle 的默认值应该是“0”，这样我就不需要为所有普通符号指定它。不幸的是，我的 XAML 模板知识还不够深，无法自己弄清楚。

```
<TextBlock x:Name="txtSymbol" Text="{TemplateBinding Tag}" Foreground="White" TextAlignment="Center" VerticalAlignment="Center" FontFamily="Segoe UI Symbol" FontSize="20" RenderTransformOrigin="0.5,0.5" >
    <TextBlock.RenderTransform>
        <TransformGroup>
            <ScaleTransform/>
            <SkewTransform/>
            <RotateTransform Angle="{TemplateBinding ImageAngle}"/>
            <TranslateTransform/>
        </TransformGroup>
    </TextBlock.RenderTransform>
</TextBlock> 
```

也欢迎其他解决问题的建议。

# c# - 如何通过文本框控制轨迹栏（C#）

> ID：13194834
> 
> 赞同：0
> 
> 时间：2012-11-02T12:00:19.660
> 
> 标签：c#, textbox, trackbar

每次用户更改文本框中的文本时，我都试图让我的轨迹栏移动（更改值）。我在这里找到了类似的主题，但下面的代码没有改变：

```
private void RedTextBox_TextChanged(object sender, EventArgs e)
{  
    RedBar.Value = int.Parse(RedTextBox.Text);
} 
```

`RedTexBox`我的文本框在哪里，`RedBar`是一个 trackBar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:25:18.480

您是否输入了可以解析为数字的文本？因为这是您的代码所假设的。

如果您只想更改值（无论文本输入是什么），我会执行以下操作：

```
private void RedTextBox_TextChanged(object sender, EventArgs e)
{  
     RedBar.Value += 1; 
     if (RedBar.Value == RedBar.Maximum){ RedBar.Value = RedBar.Minimum; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:31:50.910

好的，我明白了！:) 它只需要：

(...) `private void RedTextBox_TextChanged_1(object sender, EventArgs e)` (...)

我不知道“_1”的区别是什么，但它现在可以工作了谢谢帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-15T15:39:28.910

“_1”表示您在表单上使用新控件重建了该方法并使用了相同的名称。如果您想引入一种`float`类型，`int`我已经使用了两次转换来进行更改，并取得了良好的效果。

```
 private void oGTextBox_TextChanged(object sender, EventArgs e)
{
    var oGValue = double.Parse(oGTextBox.Text) * 1000;
    trackBar1.Value = int.Parse(oGValue.ToString());
} 
```

这用于比重并显示小数位...... 1.050。但正如我之前提到的。在使用相同名称的同时重建表单上的控件是您导致错误的根本原因。

# hibernate - hql 和继承

> ID：13194835
> 
> 赞同：1
> 
> 时间：2012-11-02T12:00:22.347
> 
> 标签：hibernate, hql

我有以下 HQL 语句：

```
 Query q = session.createQuery(
        "SELECT ze " +
        "FROM NormaleZone zo " +
        "LEFT JOIN zo.zaal za " +
        "LEFT JOIN za.vertoningen v " +
        "LEFT JOIN zo.normaleZetels ze " +
        "WHERE v = :vertoning " +
        " AND zo = :zone " +
        " AND ze NOT IN (SELECT t.zetel FROM Ticket t WHERE t.vertoning = :vertoning)"
    ); 
```

我遇到的问题是`NormaleZone`继承自`Zone`,`HandicapZone`和`LoveZone`.

我想做的是以下几点：

```
 Query q = session.createQuery(
        "SELECT ze " +
        "FROM Zone zo " +
        "LEFT JOIN zo.zaal za " +
        "LEFT JOIN za.vertoningen v " +
        "LEFT JOIN zo.??? ze " +
        "WHERE v = :vertoning " +
        " AND zo = :zone " +
        " AND ze NOT IN (SELECT t.zetel FROM Ticket t WHERE t.vertoning = :vertoning)"
    ); 
```

你可以看到我放在`zo.???`那里。此 HQL 的目的是找出电影院中哪些座位尚未被占用。问题是抽象类`Zone`没有座位（这`ze`将是座位的别名）。

`Zone`除了查看该方法中的传入对象然后制作两个字符串，一个用于区域，一个用于座位，然后将它们连接到 HQL 字符串中，我不明白如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T09:11:53.210

有一个隐藏属性指示对象的类别。使用`ze.class = :seatclass`and ("seatclass", Seat.class)

# jquery - 靠近窗口边缘时向反方向展开子菜单

> ID：13194836
> 
> 赞同：1
> 
> 时间：2012-11-02T12:00:25.393
> 
> 标签：jquery, css

我有一个使用 css 的简单子菜单，结构是一个无序列表，它通过将显示更改为“块”来显示悬停状态。

```
<ul>
    <li><a href="#">item</a></li>
    <li><a href="#">item</a></li>
    <li>
        <a href="#">item with submenu</a>
        <ul class="submenu">
            <li><a href="#">item</a></li>
            <li><a href="#">item</a></li>
            <li><a href="#">item</a></li>
        </ul>
    </li>
</ul> 
```

和CSS：

```
.submenu {
    display: none;
    position: absolute;
}

ul li:hover>ul.submenu {
    display: block;
} 
```

你可以在这里看到一个例子：http: [//jsfiddle.net/Y2vgj/](http://jsfiddle.net/Y2vgj/)

在这里： [http ://tinkerbin.com/9TXjbi8c](http://tinkerbin.com/9TXjbi8c)

（两个链接都一样）

现在，我想要做的是，当页面太小而无法完全显示时，将子菜单扩展到另一个方向。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:16:44.597

为子菜单 li 添加以下样式。

```
.submenu li {
    float: none;
    width: 150px;
    list-style-type: none;
    display: inline;
} 
```

调整边距和宽度以将它们放置在适当的位置。上述更改将水平显示它们。

# c# - 错误 - “使用未分配的输出参数包络”

> ID：13194838
> 
> 赞同：1
> 
> 时间：2012-11-02T12:00:30.750
> 
> 标签：c#

我在以下函数中遇到错误，即“使用未分配的参数包络”

```
 public override bool Parse(string input, out Envelope envelope)
    {
        XmlDocument doc = new XmlDocument();
        //Load XML from the file into XmlDocument object
        doc.LoadXml(input);

        XmlNode root = doc.DocumentElement;
        XmlNode MsgEnvroot = doc.DocumentElement.SelectSingleNode("MsgEnvelope");
        XmlNode MsgBodyroot = doc.DocumentElement.SelectSingleNode("MsgBody");

        XmlNodeList nodeList = root.SelectNodes("MsgEnvelope");

        foreach (XmlNode node in nodeList)
        {
            envelope.Priority = node["Priority"].InnerText;
            envelope.RecipientPIMA = node["RecipientPimaAddress"].InnerText;
            envelope.SenderPIMA = node["SenderPimaAddress"].InnerText;
            envelope.EnvelopeDateTime = node["GMT"].InnerText;
        }
        envelope.MsgEnvString = MsgEnvroot.InnerText;
        envelope.MsgBodyString = MsgBodyroot.InnerText;

        return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:03:06.430

`envelope`您应该在方法中进行初始化。

喜欢

```
public override bool Parse(string input, out Envelope envelope)
{
    XmlDocument doc = new XmlDocument();
    //Load XML from the file into XmlDocument object
    doc.LoadXml(input);

    envelope = new Envelope ();

    XmlNode root = doc.DocumentElement;
    XmlNode MsgEnvroot = doc.DocumentElement.SelectSingleNode("MsgEnvelope");
    XmlNode MsgBodyroot = doc.DocumentElement.SelectSingleNode("MsgBody");

    XmlNodeList nodeList = root.SelectNodes("MsgEnvelope");

    foreach (XmlNode node in nodeList)
    {
        envelope.Priority = node["Priority"].InnerText;
        envelope.RecipientPIMA = node["RecipientPimaAddress"].InnerText;
        envelope.SenderPIMA = node["SenderPimaAddress"].InnerText;
        envelope.EnvelopeDateTime = node["GMT"].InnerText;
    }
    envelope.MsgEnvString = MsgEnvroot.InnerText;
    envelope.MsgBodyString = MsgBodyroot.InnerText;

    return true;
} 
```

当我们使用任何 out 参数时，需要在退出方法之前在方法体中初始化或分配该参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:07:25.167

该`envelope`参数是一个输出参数。这意味着它需要在例程完成之前分配给它。

您在此参数建立之前设置属性，因此出现错误消息。

如果你*真的*想要一个输出参数，你需要在退出之前初始化信封参数。

```
envelope = new Envelope(); 
```

但是，如果您想更改现有 Envelope 对象的属性，并且将该信封作为参数传入，则实际上不需要将其作为输出参数。

只需将您的方法签名更改为：-

```
public override bool Parse(string input, Envelope envelope) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:03:23.247

[*如果没有*参数](http://msdn.microsoft.com/en-us/library/t3c3bfhx%28v=vs.80%29.aspx)，您可以假设它们是未指定的（未初始化），并且您需要在离开方法的上下文之前以及在使用该事物之前对其进行分配。

所以在你的情况下，如果编译器让你使用`envelope`你会得到一个`NullReferenceException`. 但这并不是说你不能分配一个`out`参数来`null`返回给调用者。

# ruby-on-rails - ArgumentError：UTF-8 中的无效字节序列

> ID：13194842
> 
> 赞同：2
> 
> 时间：2012-11-02T12:00:55.250
> 
> 标签：ruby-on-rails, encoding

我是rails新手，我在windows7中使用rails 3.2.3。当我运行 bundle install 时，我在 rails 有一个项目，它成功了。而且rails服务器也运行良好。当我给 localhost:3000 它会抛出这样的错误，

```
 ERROR ArgumentError: invalid byte sequence in UTF-8
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/win32console-1.3.2-x86-mingw32/lib/Win32/Console/ANSI.rb:163:in `sub!'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/win32console-1.3.2-x86-mingw32/lib/Win32/Console/ANSI.rb:163:in `_PrintString'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/win32console-1.3.2-x86-mingw32/lib/Win32/Console/ANSI.rb:146:in `block in write'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/win32console-1.3.2-x86-mingw32/lib/Win32/Console/ANSI.rb:146:in `each'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/win32console-1.3.2-x86-mingw32/lib/Win32/Console/ANSI.rb:146:in `write'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:29:in `print'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:29:in `tail!'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:18:in `call'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
    c:/Ruby193/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
    c:/Ruby193/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
    c:/Ruby193/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

我无法弄清楚确切的问题在哪里。我在谷歌搜索但没有相关的解决方案。谁能帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:50:37.333

可能您在查看消息中有拉丁字符（á,é,í,ó,ú,ñ），有时您在不同操作系统之间复制代码时会生成无效字符。

尝试查看查看文件以查找特殊字符并尝试将其删除以避免此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-01T11:08:17.423

我遇到了这个问题，因为`fastfile`. 每个通道下的命令必须向内缩进一个空格。

```
 lane :beta do
   gradle(task: 'assemble')  #correct (one space)

    gradle(task: 'assemble') #incorrect (many spaces)
  end 
```

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-11-02T12:04:52.400

尝试使用更*现代*的机架服务器，例如[Thin](http://code.macournoyer.com/thin/)

**宝石文件：**

```
gem 'thin' 
```

**控制台，运行：**

```
$ bundle
$ rails s 
```

# java - JAVA从一个文件中读取多张图片

> ID：13194843
> 
> 赞同：-3
> 
> 时间：2012-11-02T12:00:55.320
> 
> 标签：java, java-io

你能帮我从一个文件中加载或读取多个图像吗？因为我知道阅读它们，但如何从文件中读取单个文件，但如何读取多个图像。而且我不知道如何从特定文件夹中下载它们。

例如：

// 属性

```
protected BufferedImage imag1;
protected BufferedImage imag2;
protected BufferedImage imag3;
protected BufferedImage imag4;

//Konstructor

public GeneralTurtle(JFrame myForm) 
{
    poc =0;
    this.myForm=myForm;
    color= Color.BLACK;

    try //loading images from file turtles
    {
    imag1 = ImageIO.read(new File("hore.png"));
    imag2 = ImageIO.read(new File("dole.png"));
    imag3 = ImageIO.read(new File("vlavo.png"));
    imag4 = ImageIO.read(new File("vpravo.png")); 
```

但是我不知道当我有更多图片时如何更好地解决它。因为这将是费力且低效的。

它是用 NetBeans 编写的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:40:54.370

所以你说你有一个文件夹....

你可以这样做：

```
File path = new File("MyFilesFolder");
List imageCollection = new ArrayList();
File [] files = path.listFiles();
for (int i = 0; i < files.length; i++){
    if (files[i].isFile()){ //this line weeds out other directories/folders
        imageCollection.add(loadImage(files[i]));
    }
} 
```

对于图像，您可以使用一些集合来加载它们。

我假设您可以计算出 loadImage(File file) 方法。如果您有其他文件，那么您最好在 FileFilter 上阅读该文件夹中的图像。

# c++ - glGenTextures 分段错误？

> ID：13194846
> 
> 赞同：5
> 
> 时间：2012-11-02T12:01:07.053
> 
> 标签：c++, linux, opengl, segmentation-fault, video-card

所以这就是问题所在：当我调用*glGenTextures*时，我遇到了分段错误。

我在 linux 上，这是我目前用来调查此问题的代码：

```
#include <iostream>
#include <SDL/SDL.h>
#include <GL/gl.h>
#include <GL/glu.h>

int main(int argc, char *argv[])
{
    GLuint texture;
    glGenTextures( 1, &texture );
    return texture;
} 
```

看起来很简单，对吧？好吧，我用 GDB（GNU 调试工具）跟踪了段错误，当我在文件*/usr/lib/mesa/libGL.so.1中调用**glGenTextures()*时，它就会发生。

 *那是我的视频驱动程序的openGL代码......

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T12:05:49.780

如图所示的代码没有做任何事情来设置一个有效的[OpenGL 上下文](http://www.opengl.org/wiki/OpenGL_Context)，所以它不能使用 OpenGL。

如何做到这一点因平台而异。如果您不想深入了解目标平台的执行方式，您可以使用诸如[GLFW](http://www.glfw.org/index.html)之类的东西来相当便携，但这当然会增加依赖性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:14:59.653

正如用户“展开”所说，您需要初始化 OpenGL 上下文。不过，您可以在没有 3Dparty 库的情况下做到这一点 - 检查这个 NeHe 示例：[http ://nehe.gamedev.net/tutorial/texture_mapping/12038/](http://nehe.gamedev.net/tutorial/texture_mapping/12038/)

希望这可以帮助。*

# asp.net - 如何在 ASp.net Web 应用程序中托管 mongo db

> ID：13194858
> 
> 赞同：0
> 
> 时间：2012-11-02T12:01:53.830
> 
> 标签：asp.net, mongodb

我只想知道可以将 mongodb 保存在 asp.net 应用程序的 App_Data 文件夹中。如果可能的话，我如何为我的应用程序访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:11:00.407

检查[http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/)

确保 mongodb 命令（命令行或服务）正确设置了 dbpath 选项，并且您可以从指定的 mongodb 安装文件夹中运行 DB 服务器

要使用数据库，请将 dll 文件复制到 bin 目录或 GAC 并确保您使用的是正确的实例

[http://www.mongodb.org/display/DOCS/CSharp+Community+Projects](http://www.mongodb.org/display/DOCS/CSharp+Community+Projects)

# vb.net - 替换字符串中的最后一个字符

> ID：13194860
> 
> 赞同：2
> 
> 时间：2012-11-02T12:02:34.260
> 
> 标签：vb.net, string, windows-phone-7

我还有另一个关于visual basic的问题，我现在在为windows phone 7.5开发应用程序时使用的语言。我的问题是如何替换字符串中的最后一个字符？示例 我有字符串“clyde”，现在我想用 'o' 替换最后一个字符 'e'，但我该怎么做呢？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:09:24.427

```
String str = "clyde";
str = str.Substring(0, str.Length - 1) + 'o'; 
```

尝试了一些在线VB转换器

```
Dim str As String = "clyde"
str = str.Substring(0, str.Length - 1) & "o"C 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T12:14:22.437

在 vb.net 脚本中：

```
 Dim s As String

  Sub Main()
    s = "hello world"
    s = s.Substring(0, s.Length - 1)  &  "o"

    Console.WriteLine(s)
    Console.ReadLine()
  End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:08:01.653

编辑：现在测试（我忘了添加命名空间

> myString = Microsoft.VisualBasic.Left(myString, Len(myString) - 1) & myNewChar

例子：

> ```
> Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
>     Dim myString As String
>     Dim myChar As String
>     myString = "clyde"
>     myChar = "o"
>     myString = Microsoft.VisualBasic.Left(myString, Len(myString) - 1) & myChar
>     MsgBox(myString)
> End Sub 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-27T11:56:46.923

我想出了一个字符串类的扩展，如[>>on CodeProject<<](http://www.codeproject.com/Articles/31260/Extension-Methods-in-VB-NET)所述。

```
Imports Microsoft.VisualBasic
Imports System.Runtime.CompilerServices

Public Module StringExtensions

<Extension()> _
Public Function ReplaceFirstChar(str As String, ReplaceBy As String) As String
    Return ReplaceBy & str.Substring(1)
End Function

<Extension()> _
Public Function ReplaceLastChar(str As String, ReplaceBy As String) As String
    Return str.Substring(0, str.Length - 1) & ReplaceBy
End Function

End Module 
```

用法：

```
dim s as String= "xxxxx"
msgbox (s.ReplaceFirstChar("y"))
msgbox (s.ReplaceLastchar ("y")) 
```

所以我在任何地方的装配中都有一个简单的重用...... :)

问候，
丹尼尔

# c# - 从 XmlSerializer 函数传递不同的对象

> ID：13194867
> 
> 赞同：2
> 
> 时间：2012-11-02T12:02:43.180
> 
> 标签：c#, c#-4.0

我们如何从给定函数传递不同的对象。

```
 static public void SerializeToXML(FbTextView p)
    {
        XmlSerializer serializer = new XmlSerializer(typeof(FbTextView));
        TextWriter textWriter = new StreamWriter(@"D:\movie.xml");
        serializer.Serialize(textWriter, p);
        textWriter.Close();
    } 
```

现在的问题是，当我尝试传递两个或更多这样的两个对象时：

```
 static public void SerializeToXML(FbTextView p,FbTextField q)
    {
        XmlSerializer serializer = new XmlSerializer(typeof(FbTextView));
        XmlSerializer Serializer = new XmlSerializer(typeof(FbTextField));
        TextWriter textWriter = new StreamWriter(@"D:\movie.xml");
        serializer.Serialize(textWriter, p);
        textWriter.Close();
    } 
```

它抛出错误：未处理 XMLParse 异常。内部异常是：“有一个错误反映类型'FBformBuilder.FbTextField”谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:20:07.000

该问题将在内部异常中详细说明；尝试：

```
try {
    // ... your code
} catch(Exception ex) {
    while(ex != null) {
        Trace.WriteLine(ex.Message);
        ex = ex.InnerException;
    }
    throw;
} 
```

然后查看所有`.Message`被记录的 s。其中之一将告诉您确切的问题。例如，它可能是这样的：

*   没有公共无参数构造函数
*   不是公共类型
*   无效的子类
*   重复/不明确的元素/命名空间

或类似的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:45:23.130

内部异常：

> 不能为基本类型指定 XmlElement 的类型。

从字段中删除`[XmlElement(Type)]`属性`FbTextField` `Value`

# c# - 如何使用 vs 包在解决方案资源管理器中获取所选项目的详细信息

> ID：13194880
> 
> 赞同：7
> 
> 时间：2012-11-02T12:04:17.473
> 
> 标签：c#, visual-studio-2010, vs-extensibility, vspackage

我正在尝试创建一个 VS 包，其中我已将菜单命令添加到上下文菜单中，因此当您右键单击解决方案资源管理器中的某个项目时它会出现。现在单击命令时，我想显示一个包含项目详细信息的弹出窗口，您可以在其上单击鼠标右键并调用该命令。

现在我将如何获得有关所选项目的信息？我可以使用任何服务来获取有关该项目的任何详细信息吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T10:34:03.727

```
private static EnvDTE80.DTE2 GetDTE2()
    {
        return GetGlobalService(typeof(DTE)) as EnvDTE80.DTE2;
    }
private string GetSourceFilePath()
    {
        EnvDTE80.DTE2 _applicationObject = GetDTE2();
        UIHierarchy uih = _applicationObject.ToolWindows.SolutionExplorer;
        Array selectedItems = (Array)uih.SelectedItems;
        if (null != selectedItems)
        {
            foreach (UIHierarchyItem selItem in selectedItems)
            {
                ProjectItem prjItem = selItem.Object as ProjectItem;
                string filePath = prjItem.Properties.Item("FullPath").Value.ToString();
                //System.Windows.Forms.MessageBox.Show(selItem.Name + filePath);
                return filePath;
            }
        }
        return string.Empty;
    } 
```

上面的函数将返回所选项目（文件）的完整路径。基本上从 DTE2 实例中获取灵魂资源管理器，您将从中获取有关解决方案资源管理器的所有信息。

# java - 如何在java中将数据GB2312转换为UTF-8？

> ID：13194883
> 
> 赞同：0
> 
> 时间：2012-11-02T12:04:23.307
> 
> 标签：java, mime

如果

```
String a = "=?gb2312?B?rtmsMCC2=?= " // is in GB2312 format. 
```

我想要上面的 String a 到 UTF-8 格式。我如何在java中实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:40:18.347

那不是 GB2312 格式，它是一种 MIME 编码字，其中数据使用 Base64 编码，并且编码数据本身表示字符集 GB2312 中的文本。请参阅：[http ://en.wikipedia.org/wiki/MIME#Encoded-Word](http://en.wikipedia.org/wiki/MIME#Encoded-Word)

要对此进行解码，您需要一个支持 RFC2047 MIME Encoded-Word 的解码器。例如javax.mail 中的[MimeUtility.decodeWord()](http://javamail.kenai.com/nonav/javadocs/javax/mail/internet/MimeUtility.html#decodeWord%28java.lang.String%29)

另一种选择是完全自己解析它，但我建议不要这样做。但是，步骤将是：

鉴于你的例子`=?gb2312?B?rtmsMCC2=?=`

1.  `=?`表示它是一个编码的词
2.  `gb2312`表示最终数据是gb2312编码
3.  `?B`表示它们的有效负载是 Base64 编码的
4.  `?`指示有效载荷的开始
5.  `rtmsMCC2=`是实际的有效载荷（作为 Base64 编码的数据）
6.  `?=`表示编码字的结尾
7.  使用 Base64解码`rtmsMCC2=`（它似乎已损坏，但`=`以字节为单位删除了尾随结果`AE D9 AC 30 20 B6`）
8.  使用 gb2312 编码转换字节`AE D9 AC 30 20 B6`（我在这里没有这样做，因为我无法将这些字节映射到实际的 gb2312 字符）。

另见[https://www.rfc-editor.org/rfc/rfc2047](https://www.rfc-editor.org/rfc/rfc2047)

# android - android模拟器中的动态地理位置更新？

> ID：13194888
> 
> 赞同：3
> 
> 时间：2012-11-02T12:04:38.470
> 
> 标签：android, android-emulator

我`Location Manager`用于获取当前的经度和纬度，但在模拟器中出现错误。如何在模拟器上获取位置？

这是我的代码：

```
lm = (LocationManager) context
    .getSystemService(Context.LOCATION_SERVICE);
    android.location.Location currentLocation = lm
    .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
    if (currentLocation == null)
        currentLocation = lm
        .getLastKnownLocation(LocationManager.GPS_PROVIDER);

    if (currentLocation != null) {
        currentLongitude = currentLocation.getLongitude();
        currentLatitude = currentLocation.getLatitude();

        // Get last location of driver
        lastLongitude = Double.valueOf(app.GetLongitude(context));
        lastLatitude = Double.valueOf(app.GetLatitude(context));
        distance = CommonFunctions.GetDistance(currentLongitude,
                currentLatitude, lastLongitude, lastLatitude);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:11:41.090

您将在 Eclipse 的 DDMS 透视图中找到该窗口。通过这种方式，您可以使用各种位置值测试您的应用程序。

![在此处输入图像描述](../Images/a28d1f7080947b068cb5c5adde90c09e.png)

按照以下步骤设置模拟值：

转到 Eclipse DDMS 透视图，通过

Windows>Open Perspective > other > DDMS (你可以输入过滤列表)

找到模拟器控制选项卡

然后在位置控制框内

您可以将 lat、long 发送到模拟器以模拟 gps 更改。

如果找不到 Emulator Control，只需通过以下方式打开它：

Windows > 显示视图 > 其他 > 模拟器控制（您可以键入以过滤列表）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:08:11.493

在 Eclipse 中打开 Emulator 控件并在 Location 控件中设置 lat,long

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:09:32.090

对于一个非常解释的答案，您可以在这里查看：[如何在 Android 模拟器中模拟 GPS 位置？](https://stackoverflow.com/questions/2279647/how-to-emulate-gps-location-in-the-android-emulator)

在这篇文章中，它解释了如何处理问题！

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:11:29.827

首先你必须打开模拟器控制视图（Window->showView-> other-> **emulator control**）。然后当您的应用程序启动时，在**模拟器控制**中的位置控制处，设置一个位置并单击发送按钮

# java - 如何在 Android EditText 中使用土耳其语字符？

> ID：13194891
> 
> 赞同：3
> 
> 时间：2012-11-02T12:04:45.943
> 
> 标签：java, android, android-edittext, text-to-speech, turkish

在我的文本到语音（土耳其语）项目中，我有一个 EditText。用户可以输入土耳其字符（ı、ş、ç、ö），但 editText 会将它们转换为其他一些未知字符。我怎样才能防止这种情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:07:15.243

看看这个网站。它解释了所有关于在你的应用程序中实现不同语言的能力。它涉及为您要支持的每个语言环境提供不同的字符串资源。

[点击这里](http://developer.android.com/guide/topics/resources/localization.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:09:54.473

```
Locale locale = new Locale("tr");
Locale.setDefault(locale); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T07:04:05.540

我已经开始使用 Android 2.3.3 并且支持土耳其语。问题解决了

# php - 如何为横幅添加自定义列，而不是右侧、左侧、顶部和底部？

> ID：13194892
> 
> 赞同：3
> 
> 时间：2012-11-02T12:04:46.507
> 
> 标签：php, javascript, mysql, customization, opencart

我是 OpenCart 的新手，我想在以下位置添加更多列：

扩展 --> 模块 --> 横幅

例如我想添加：

在位置字段中：

柱顶

柱底

剩余内容

内容权

列/内容自定义*** <---

并希望将此横幅放置在所需页面上的自定义位置。请帮忙...！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-14T04:10:20.670

## 在管理员中添加职位

首先，您需要打开位于的模块语言文件；`/admin/language/*/module/`并添加您的新职位。

```
$_['text_content_middle']       = 'Content Middle'; 
```

其次，您需要打开位于的模块的管理模板文件；`/admin/view/template/module/`并在第 50 行左右添加一个新的“如果位置已设置”语句。

```
<?php if ($module['position'] == 'content_middle') { ?>
<option value="content_middle" selected="selected"><?php echo $text_content_middle; ?></option>
<?php } else { ?>
<option value="content_middle"><?php echo $text_content_middle; ?></option>
 <?php } ?> 
```

并在同一个文件中，在第 140 行左右将选项添加到 javascript 函数中：

```
html += '      <option value="content_middle"><?php echo $text_content_middle; ?></option>'; 
```

第三，您需要打开位于的模块的控制器文件；`/admin/controller/module/`并在第 35 行周围的任何位置添加一个新行。

```
$this->data['text_content_middle'] = $this->language->get('text_content_middle'); 
```

您现在应该能够在模块设置中看到新位置。还要确保模块的布局设置为“**主页**”。

## 向模板添加职位

首先，您必须将位置添加到位于的数组中；`/catalog/controller/common/home.php`20号线左右。

```
'common/content_middle', 
```

其次，您需要在其中创建相应的 PHP 文件`/catalog/controller/common/`（例如：“ **content_middle.php** ”）。添加以下代码，注意第 2、50、79、80 和 82 行）因为需要反映您的职位名称：

```
<?php
class ControllerCommonHomeOne extends Controller {
    public function index() {
        $this->load->model('design/layout');
        $this->load->model('catalog/category');
        $this->load->model('catalog/product');
        $this->load->model('catalog/information');

        if (isset($this->request->get['route'])) {
            $route = $this->request->get['route'];
        } else {
            $route = 'common/home';
        }

        $layout_id = 0;

        if (substr($route, 0, 16) == 'product/category' && isset($this->request->get['path'])) {
            $path = explode('_', (string)$this->request->get['path']);

            $layout_id = $this->model_catalog_category->getCategoryLayoutId(end($path));
        }

        if (substr($route, 0, 15) == 'product/product' && isset($this->request->get['product_id'])) {
            $layout_id = $this->model_catalog_product->getProductLayoutId($this->request->get['product_id']);
        }

        if (substr($route, 0, 23) == 'information/information' && isset($this->request->get['information_id'])) {
            $layout_id = $this->model_catalog_information->getInformationLayoutId($this->request->get['information_id']);
        }

        if (!$layout_id) {
            $layout_id = $this->model_design_layout->getLayout($route);
        }

        if (!$layout_id) {
            $layout_id = $this->config->get('config_layout_id');
        }

        $module_data = array();

        $this->load->model('setting/extension');

        $extensions = $this->model_setting_extension->getExtensions('module');

        foreach ($extensions as $extension) {
            $modules = $this->config->get($extension['code'] . '_module');

            if ($modules) {
                foreach ($modules as $module) {
                    if ($module['layout_id'] == $layout_id && $module['position'] == 'home_one' && $module['status']) {
                        $module_data[] = array(
                            'code'       => $extension['code'],
                            'setting'    => $module,
                            'sort_order' => $module['sort_order']
                        );
                    }
                }
            }
        }

        $sort_order = array();

        foreach ($module_data as $key => $value) {
            $sort_order[$key] = $value['sort_order'];
        }

        array_multisort($sort_order, SORT_ASC, $module_data);

        $this->data['modules'] = array();

        foreach ($module_data as $module) {
            $module = $this->getChild('module/' . $module['code'], $module['setting']);

            if ($module) {
                $this->data['modules'][] = $module;
            }
        }

        if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/common/home_one.tpl')) {
            $this->template = $this->config->get('config_template') . '/template/common/home_one.tpl';
        } else {
            $this->template = 'default/template/common/home_one.tpl';
        }

        $this->render();
    }
}
?> 
```

三、在里面创建对应的TPL文件`/view/theme/your-theme/template/common/`（例如：“ **content_middle.tpl** ”）。添加以下代码：

```
<?php foreach ($modules as $module) { ?>
<?php echo $module; ?>
<?php } ?> 
```

现在，您可以通过调用在主题的**home.tpl**文件中的任何位置调用插入位置

```
<?php echo $content_middle; ?> 
```

我不鼓励在 OpenCart 中编辑核心文件，给 vQMod (1.5+) 或 OCMod (2+) 一个机会！

希望这有帮助！

# c# - LINQ 运算符根据通用分隔符将双精度列表拆分为多个双精度列表

> ID：13194898
> 
> 赞同：1
> 
> 时间：2012-11-02T12:05:03.943
> 
> 标签：c#, linq

我有一个`List`double 值，其中一些元素是 NaN。我想将此列表转换为使用 NaN 作为分隔符的多个双精度列表。例子：

```
List<double> values =  new List<double>        
   { 1.2, 2.2, 3.2, Double.NaN, 2.2, 2.3, Double.NaN, 4.1, 4.2, 4.3 }; 
List<List<double>> result = values.SomeLinqOperator.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:09:59.670

没有内置任何东西，但你可以写一个：

```
public static IEnumerable<List<T>> SplitBy<T>(
    this IEnumerable<T> source, T delimiter)
{
    List<T> buffer = new List<T>();
    var comparer = EqualityComparer<T>.Default;
    foreach (var item in source)
    {
        if (comparer.Equals(item, delimiter))
        {
            yield return buffer;
            buffer = new List<T>();
        }
        else
        {
            buffer.Add(item);
        }
    }
    yield return buffer;
}
static void Main()
{
    List<double> values = new List<double> 
        {1.2,2.2,3.2,double.NaN,2.2,2.3,double.NaN,4.1,4.2,4.3 };
    List<List<double>> result = values.SplitBy(double.NaN).ToList();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T12:07:55.133

```
List<List<double>> result = values.GroupDelimited(x => x == double.NaN)
                                  .Select(g => g.ToList())
                                  .ToList(); 
```

从[这里](https://stackoverflow.com/a/7418580/76217)使用*GroupDelimited 扩展方法*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T12:08:21.777

如果您有两个`double.NaN`值，或者在输入的开头或结尾有一个值，这将包括空列表：

```
List<List<double>> result = new List<List<double>>();
List<double> current = new List<double>();
foreach (double d in values)
{
    if (d == double.NaN)
    {
        result.Add(current);
        current = new List<double>();
    }
    else
    {
        current.Add(d);
    }
}
result.Add(current); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T13:20:11.420

这是一个更简单的（我认为）。

```
public static IEnumerable<IEnumerable<T>> SplitBy<T>(this IEnumerable<T> source, T delimiter)
{
    EqualityComparer<T> comparer = EqualityComparer<T>.Default;
    for (IEnumerable<T> s = source; s.Any(); s = s.SkipWhile(s2 => !comparer.Equals(s2, delimiter)).Skip(1))
        yield return s.TakeWhile(s2 => !comparer.Equals(s2, delimiter));
} 
```

# birt - 带有特定视图的 birt 显示列表结果

> ID：13194900
> 
> 赞同：0
> 
> 时间：2012-11-02T12:05:18.733
> 
> 标签：birt

我的清单有问题。实际上我从数据库选择中创建了列表，我对此没有任何问题......但我在显示结果方面遇到了问题。

这是我的列表结果：

```
L.p | Type | text | description    |
------------------------------------
1\. | Text  |text1 | description 1  |
2\. | Text  |text2 | description 2  |
3\. | Text  |text3 | description 3  |
4\. | Image |image1| description 4  |
5\. | Image |image2| description 5  |
6\. | Video |video1| description 6  |
7\. | Video |video2| description 7  |
8\. | Video |video3| description 8  |
9\. | Video |video4| description 9  |
------------------------------------ 
```

但我需要显示这样的结果：

```
L.p | Type | text | description    |
------------------------------------
1\. | Text  |text1 | description 1  |
2\. |       |text2 | description 2  |
3\. |       |text3 | description 3  |
4\. |       |      |                |
5\. | Image |image1| description 4  |
6\. |       |image2| description 5  |
7\. |       |      |                |
8\. | Video |video1| description 6  |
9\. |       |video2| description 7  |
10.|       |video3| description 8  |
11.|       |video4| description9   |
12.|       |      |                |
13.|       |      |                |
14.|       |      |                |
15.|       |      |                |
16.|       |      |                |
17.|       |      |                |
18.|       |      |                |
19.|       |      |                |
20.|       |      |                |
------------------------------------ 
```

如您所见，我得到了： 1\. 两种不同类型的空行。2.Category 仅在一行中（第一行） 3\. min 结果为 20，因此当我的选择返回仅 10 时，下一个 10 为空行。但是，如果我有超过 20 个结果，我会显示所有结果。

我怎么能那么容易？我正在使用 birt 2.3.2 和 eclipse 插件。

请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:50:58.450

select the table and you will see the **groups tab** in **property editor** through this you can group your result as you like.

Cheers

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:48:18.407

要删除空的第一行，请选择其中包含“类型”数据元素的单元格，然后在属性编辑器的常规选项卡中将 drop 属性设置为详细信息。要获得至少 20 行，最简单的方法可能是在表格页脚中添加额外的行，并根据表格中的行数隐藏/显示它们。这是一个示例的链接，它将显示我正在谈论的将额外行添加到页脚的内容。

[http://www.birt-exchange.org/org/devshare/designing-birt-reports/1355-extending-a-table-to-a-certain-number-of-rows-with-alternating-row-color/](http://www.birt-exchange.org/org/devshare/designing-birt-reports/1355-extending-a-table-to-a-certain-number-of-rows-with-alternating-row-color/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:56:02.563

阅读 BIRT 中的 DataCubes 和 Cross Tabs。它们的目的是完全相同的。

他们这样做的方式是构建一个数据立方体，其中 X 组是 LP、类型、文本（以相同的顺序）和 Y 度量是描述。然后用这个数据立方体建立一个交叉表。

# database - 数据库复制支持的数据结构设计

> ID：13194906
> 
> 赞同：2
> 
> 时间：2012-11-02T12:05:49.857
> 
> 标签：database, postgresql, database-design, data-structures, database-replication

我正在开发一个小型的临时复制框架（对于一家 reatil 公司），它根据特定的域级逻辑仅复制某些表的某些记录（大约 200 个）。

为了知道每个目标主机的每条记录的复制状态，我有一个**repStatus** *字符*（NUMBER_OF_HOSTS）类型的列；其中主机始终代表相同的位置。

该列每个位置的值可以是**0**（*无操作*）、**1**（*复制记录*）、**2**（*复制*记录）、**3**（*确认后重新发送*）、**A**（*第一次错误*）、**B**（*第二次错误*）.. 。 ETC。

例如：**012A**表示：

*   不要向主机 1 发送任何内容
*   将此记录发送给主机 2
*   在主机 3 中正确接收记录
*   从主机 3 收到错误

这看起来很容易和简单，并且具有*“直截了当的阅读”*：为了了解记录的状态，我只需阅读**repStatus**列。

[但是，当应用程序必须查找要复制的目标记录时，](https://stackoverflow.com/questions/13183735/query-performance-in-postgresql-using-similar-to)这种方法似乎会导致性能问题。

所以我确信有更好的设计来解决这个问题。也许一个引用表、记录和主机的附加表可能是一个解决方案：

```
CREATE TABLE repStatus (tableID int, recordID int, targetHostID int, status int); 
```

现在甚至可以将**状态值标准化为新表。**但是，200 个表 * 每个表约 500000 条记录可能是在单个表中以任何方式处理的大量行。

欢迎任何基于经验的替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:06:09.667

因此，您的典型查询是将所有记录复制到主机 x ... 对于此特定目标具有 repStatus **1**或**3**。（做出假设，因为这不是问题。）

而且要复制的记录*很少见*，因为通常大多数记录都已经复制了，对吗？（更多假设。）

表达式的部分索引对您来说可能是一个非常快速的解决方案。

如果您只是保留向每一行添加文本字符串的设计，则可以为每个目标创建一个部分索引，如下所示：

```
CREATE INDEX tbl_rep_part1_idx ON tbl (tbl_id, substr(repstatus,1,1))
WHERE substr(repstatus,1,1) = '1' OR
      substr(repstatus,1,1) = '3';

CREATE INDEX tbl_rep_part2_idx ON tbl (tbl_id, substr(repstatus,2,1))
WHERE substr(repstatus,2,1) OR
      substr(repstatus,2,1);

... 
```

由于每个索引的开销，所有部分索引的总和仅大于完整索引。在对表进行写操作时，只需更新受影响的部分索引。

将使这些查询非常快：

```
SELECT * FROM tbl WHERE substr(repstatus,1,1) = '1';

SELECT * FROM tbl WHERE substr(repstatus,1,1) = '1' OR
                        substr(repstatus,1,1) = '3'; 
```

索引中的添加`tbl_id`是可选的。我添加它是因为一个额外的 4 字节整数列可以利用空间，否则会因填充而丢失（索引大小不会增长）。如果您有使用它，请仅包含它（或另一个小列）。

### 与文本数组 + GIN 索引相比会发生什么？

只有当我的假设成立时，整个想法才适用。我在 text-array + GIN 索引上提出这条路线的原因是 3 倍：

1.  *小得多*的列大小。比较：

    ```
    SELECT pg_column_size('{A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z}'::text[])  -- 232 byte
          ,pg_column_size('{A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z}'::"char"[])  -- 50 byte
          ,pg_column_size('ABCDEFGHIJKLMNOPQRSTUVWXYZ'::text);  -- 27 byte 
    ```

    这对于 200 x 500k 行很重要。很多。

2.  每个查询的索引更小，访问速度更快。
    虽然部分索引的总和将比单个完整的 GIN 索引多一些 -*如果*您想覆盖整个表，*如果*我们只需要覆盖极少数情况，情况就不是这样了。无论哪种方式，每个查询所需的索引都会*小得多*。考虑到它们的大小，我不希望索引被缓存。这更加强调了这一点

3.  更便宜的写入操作。我希望对于小的部分索引来说，简单、小的 b 树索引的更新会大大加快，因为 GIN 在这方面的麻烦是众所周知的。不过，这必须得到验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:06:09.633

好吧，我要做的第一件事就是将 icky 字符串解析放到任何地方，并将其替换为 PostgreSQL 本机类型。将复制状态存储在与当前解决方案类似的每条记录上：

```
CREATE TYPE replication_status AS ENUM (
  'no_action',
  'replicate_record',
  'record_replicated',
  'error_1',
  'error_2',
  'error_3'
  );
ALTER TABLE t ADD COLUMN rep_status_array replication_status[]; 
```

这会花费您更多的存储空间——枚举值是 4 个字节而不是 1，并且数组有一些开销。但是，通过向数据库教授您的概念而不是隐藏它们，您可以编写如下内容：

```
-- find all records that need to be replicated to host 4
SELECT * FROM t WHERE rep_status_array[4] = 'replicate_record';

-- find all records that contain any error status
SELECT * FROM t WHERE rep_status_array &&
  ARRAY['error_1', 'error_2', 'error_3']::replication_status[]; 
```

如果这对您的用例有帮助，您可以直接放置 GIN 索引`rep_status_array`，但最好查看您的查询并专门为您使用的内容创建索引：

```
CREATE INDEX t_replication_host_4_key ON t ((rep_status_array[4]));
CREATE INDEX t_replication_error_key ON t (id)
  WHERE rep_status_array && ARRAY['error_1', 'error_2', 'error_3']::replication_status[]; 
```

也就是说，给定 200 个表，我很想将其拆分为一个复制状态表——一行包含状态数组或每台主机一行，具体取决于其余复制逻辑的工作方式。我仍然会使用该枚举：

```
CREATE TABLE adhoc_replication (
  record_id bigint not null,
  table_oid oid not null,
  host_id integer not null,
  replication_status status not null default 'no_action',
  primary key (record_id,table_oid,host_id)
  ); 
```

PostgreSQL 在内部为每个表分配一个 OID (try `SELECT *, tableoid FROM t LIMIT 1`)，它是单个数据库系统中方便的稳定数字标识符。换句话说，如果表被删除并重新创建，它会发生变化（例如，如果您转储和恢复数据库，可能会发生这种情况），出于同样的原因，开发和生产之间很可能会有所不同。如果您希望在添加或重命名表时使用这些情况来换取中断，请使用枚举而不是 OID。

将单个表用于所有复制将允许您轻松地重用触发器和查询等，从而将大多数复制逻辑与其复制的数据解耦。它还允许您通过引用单个索引来查询所有原始表中给定主机的状态，这可能很重要。

至于表大小，PostgreSQL 绝对可以处理同一张表中的 1000 万行。如果您使用专用的复制相关表，则始终可以按主机[分区。](http://www.postgresql.org/docs/current/static/ddl-partitioning.html)（按表分区对我来说毫无意义；它似乎比在每个上游行上存储复制状态更糟糕。）分区的方式或是否合适完全取决于您打算向数据库提出什么样的问题，以及基表上发生了什么样的活动。（分区意味着维护许多较小的 blob 而不是几个大的 blob，并且可能会访问许多较小的 blob 以执行单个操作。）实际上是选择您希望磁盘何时进行搜索的问题。

# oracle - 即使 PL/SQL 过程引发错误，是否仍可以写入 OUT 参数值？

> ID：13194907
> 
> 赞同：5
> 
> 时间：2012-11-02T12:05:57.377
> 
> 标签：oracle, error-handling, plsql

我有一个带`OUT`参数的 PL/SQL 过程。`OUT`即使引发错误，如何强制写入参数值？引发错误时是否有另一种返回值的机制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:46:26.423

为了扩展@APC的答案，[文档](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/errors.htm#i3372)说：

*如果您成功退出子程序，PL/SQL 将值分配给 OUT 参数。但是，如果您以未处理的异常退出，PL/SQL 不会将值分配给 OUT 参数（除非它们是 NOCOPY 参数）。*

以下是一些可能有助于说明的示例：

```
SQL> set serveroutput on
SQL> REM Example 1 -- OUT parameter value is unchanged if an exception was raised after value was assigned
SQL> declare
  2      x number := 1;
  3      procedure p(x out number)
  4      as
  5      begin
  6          x := 2;
  7          raise program_error;
  8      end p;
  9  begin
 10      p(x);
 11  exception
 12      when program_error then
 13          dbms_output.put_line
 14          (
 15              case
 16                  when x is null then 'null'
 17                  else to_char(x)
 18              end
 19          );
 20  end;
 21  /
1                                                                               

PL/SQL procedure successfully completed.

SQL> REM Example 2 -- OUT parameter value is unchanged if value was set in exception handler and exception was then re-raised
SQL> declare
  2      x number := 1;
  3      procedure p(x out number)
  4      as
  5      begin
  6          x := 2;
  7          raise program_error;
  8      exception
  9          when program_error then
 10              x := 3;
 11              raise;
 12      end p;
 13  begin
 14      p(x);
 15  exception
 16      when program_error then
 17          dbms_output.put_line
 18          (
 19              case
 20                  when x is null then 'null'
 21                  else to_char(x)
 22              end
 23          );
 24  end;
 25  /
1                                                                               

PL/SQL procedure successfully completed.

SQL> REM Example 3 -- OUT parameter value is changed if value was set in exception handler and exception was not re-raised
SQL> declare
  2      x number := 1;
  3      procedure p(x out number)
  4      as
  5      begin
  6          x := 2;
  7          raise program_error;
  8      exception
  9          when program_error then
 10              x := 3;
 11      end p;
 12  begin
 13      p(x);
 14      dbms_output.put_line
 15      (
 16          case
 17              when x is null then 'null'
 18              else to_char(x)
 19          end
 20      );
 21  end;
 22  /
3                                                                               

PL/SQL procedure successfully completed.

SQL> REM Example 4 -- OUT NOCOPY parameter value is changed if an exception was raised
SQL> declare
  2      x number := 1;
  3      procedure p(x out nocopy number)
  4      as
  5      begin
  6          x := 2;
  7          raise program_error;
  8      end p;
  9  begin
 10      p(x);
 11  exception
 12      when program_error then
 13          dbms_output.put_line
 14          (
 15              case
 16                  when x is null then 'null'
 17                  else to_char(x)
 18              end
 19          );
 20  end;
 21  /
2                                                                               

PL/SQL procedure successfully completed. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T12:23:16.277

当 PL/SQL 程序引发异常时，Oracle 不会为 OUT 参数赋值。如果这是一个安全功能，因为它为我们提供了已知且一致状态的所有参数

然而，有时这不是我们想要的。例如，我们可能希望使用 OUT 参数将错误消息或其他有用信息传递给调用程序。我们可以在程序的EXCEPTIONS部分设置OUT参数。这些值被传递出去（除非处理程序本身引发异常）。

# blackberry - 黑莓中的 HTTP 连接与用户名和密码凭据？

> ID：13194910
> 
> 赞同：0
> 
> 时间：2012-11-02T12:06:06.737
> 
> 标签：blackberry

我设计了一个使用 Web 视图的应用程序。打开时，我的应用程序必须访问客户的站点。因此，我需要创建一个 Http 连接，它应该使用用户名和密码进行验证，并捕获来自服务器的响应并使用该响应加载内容。我一直在尝试做但无法弄清楚。请在这个问题上帮助我。请用一些代码解释。

这就是我试图建立一个 Http 连接但它正在抛出**401**响应代码。我认为问题是，它没有将我输入到编码器中的凭证拿走。

```
HttpConnection httpConn=null;
DataInputStream dis=null;
DataOutputStream dos = null;

URLEncodedPostData encPostData = new URLEncodedPostData(null, false);
encPostData.append("username", PasswordPopupScreen._response2);
encPostData.append("password", PasswordPopupScreen._response3);

try {
    httpConn=(HttpConnection)Connector.open("myclient's siteURL");
    httpConn.setRequestProperty(HttpProtocolConstants.HEADER_CONTENT_TYPE,
                                HttpProtocolConstants.CONTENT_TYPE_APPLICATION_X_WWW_FORM_URLENCODED);
    httpConn.setRequestProperty(HttpProtocolConstants.HEADER_CONTENT_LENGTH,
                                String.valueOf(encPostData.getBytes().length));
    dos=httpConn.openDataOutputStream();
    dos.write(encPostData.getBytes());
    if(httpConn.getResponseCode()==HttpConnection.HTTP_OK)
    {
        //Dialog.alert("Success");
        System.out.println("Success");
    }
    else
    {
        // Dialog.alert("failed");
        System.out.println("failed");
    }
} catch (IOException e) {
    e.printStackTrace();
} 
```

为什么响应是**401**？这意味着未经授权的访问，但我有权查看我客户的网站。据我所知，问题是，请求没有附加用户名和密码。请帮助我在请求中添加凭据。我的客户端服务器采用**NTLM**身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:01:10.190

您好请参阅此知识库文章以访问 HTTP 授权..

[http://supportforums.blackberry.com/t5/Java-Development/Implement-basic-HTTP-authentication/ta-p/445920](http://supportforums.blackberry.com/t5/Java-Development/Implement-basic-HTTP-authentication/ta-p/445920)

您需要在您的 HTTP 身份验证请求中添加这些行。

```
String login = "username:password";

//Close the connection.
s.close();

//Encode the login information in Base64 format.
byte[] encoded = Base64OutputStream.encode(login.getBytes(), 0, login.length(), 
                                           false, false);

//Open a new connection.
s = (StreamConnection)Connector.open("http://mysite.com/myProtectedFile.txt ");
httpConn = (HttpConnection)s;

//Add the authorized header.
httpConn.setRequestProperty("Authorization", "Basic " + new String(encoded)); 
```

# java - 删除使用 SpringLayout 创建的文本字段

> ID：13194913
> 
> 赞同：0
> 
> 时间：2012-11-02T12:06:27.647
> 
> 标签：java, springlayout

我正在使用 Oracle 官方页面上示例中的代码。用于排序和过滤表数据的一种。在原始变体中，它有两个字段 - 一个用于输入过滤条件，第二个用于显示选择了网格中的哪一行。我不需要第二个，只想留下过滤器字段，但似乎我错过了一些东西。下面是我的代码，对我认为不必要的代码进行了注释：

```
public TableFilterDemo() {
        super();
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));

        //Create a table with a sorter.
        MyTableModel model = new MyTableModel("customers.dat");
        sorter = new TableRowSorter<MyTableModel>(model);
        table = new JTable(model);
        table.setRowSorter(sorter);
        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);

        //For the purposes of this example, better to have a single
        //selection.
      //  table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        //When selection changes, provide user with row numbers for
        //both view and model.
     /*   table.getSelectionModel().addListSelectionListener(
                new ListSelectionListener() {
                    public void valueChanged(ListSelectionEvent event) {
                        int viewRow = table.getSelectedRow();
                        if (viewRow < 0) {
                            //Selection got filtered away.
                            statusText.setText("");
                        } else {
                            int modelRow = 
                                table.convertRowIndexToModel(viewRow);
                            statusText.setText(
                                String.format("Selected Row in view: %d. " +
                                    "Selected Row in model: %d.", 
                                    viewRow, modelRow));
                        }
                    }
                }
        );
*/

        //Create the scroll pane and add the table to it.
        JScrollPane scrollPane = new JScrollPane(table);

        //Add the scroll pane to this panel.
        add(scrollPane);

        //Create a separate form for filterText and statusText
        JPanel form = new JPanel(new SpringLayout());
        JLabel l1 = new JLabel("Student Number:", SwingConstants.TRAILING);
        form.add(l1);
        filterText = new JTextField();
        //Whenever filterText changes, invoke newFilter.
        filterText.getDocument().addDocumentListener(
                new DocumentListener() {
                    public void changedUpdate(DocumentEvent e) {
                        newFilter();
                    }
                    public void insertUpdate(DocumentEvent e) {
                        newFilter();
                    }
                    public void removeUpdate(DocumentEvent e) {
                        newFilter();
                    }
                });
        l1.setLabelFor(filterText);
        form.add(filterText);
       /* JLabel l2 = new JLabel("Status:", SwingConstants.TRAILING);
        form.add(l2);
        statusText = new JTextField();
        l2.setLabelFor(statusText);
        form.add(statusText); */ 
        SpringUtilities.makeCompactGrid(form, 2, 2, 6, 6, 6, 6);
        add(form);
    } 
```

当我尝试 ti compile 时，我遇到了很多错误，但第一个是：

> 线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException：没有这样的孩子：2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:53:25.207

不需要注释块，但传入的第二个参数`SpringUtilities.makeCompactGrid(form, 1, 2, 6, 6, 6, 6);`应该从`2`我原来的问题中更改为喜欢它在`1`这里。

# asp.net-mvc - 在 ASP.NET MVC 上使用 Quartz

> ID：13194920
> 
> 赞同：1
> 
> 时间：2012-11-02T12:06:54.963
> 
> 标签：asp.net-mvc, cron, quartz.net

我使用 Quartz lib 在我的 ASP.NET MVC 项目中按计划执行一些任务。我将我的作业初始化为 Global.asax 文件的 Application_Start 方法。但过了一段时间，Quartz 停止了，因为方法 Application_End 被执行了。

变量被声明为静态：

```
public static ISchedulerFactory scheduleFactory = new StdSchedulerFactory();

public static IScheduler scheduler = scheduleFactory.GetScheduler(); 
```

以下是 Quads 的 Jobs 的初始化方式：

```
IJobDetail jobSender = new JobDetailImpl("jobSender", "MailGroup", typeof(JobMailSender));

ITrigger triggerSender = new CronTriggerImpl("triggerSender", "SenderGroup", "jobSender", "MailGroup", "0 0/30 * * * ?");

scheduler.ScheduleJob(jobSender, triggerSender);

scheduler.Start(); 
```

我找到了它发生的原因。当所有用户的会话将不复存在并且服务器没有活动的用户会话时，方法 Application_End 将执行。

我创建了新的 Quartz 的工作，它每 15 分钟打开一次站点，结果新的用户会话将在服务器上创建。但仍会不时调用 Application_End 方法。

有没有人面临类似的问题？也许 web.config 有一些设置不会执行方法 Application_End，即使服务器上没有活动会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:07:52.877

我发现在 IIS 中运行 Quartz 会导致包括这个在内的问题。您可能会收到 Application_End 因为应用程序池正在回收。

我们通过在同一台机器上安装 Quartz 作为服务解决了这个问题，并通过 Quartz 的远程代理从网站访问该服务。

以下链接可能会有所帮助：[使用一个 Windows 服务来执行作业和两个 Web 应用程序来安排作业](https://stackoverflow.com/questions/11968884/quartz-net-use-one-windows-service-to-execute-jobs-and-two-web-applications-to/11970904#11970904)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T05:17:44.003

在我们的应用程序中，我们也面临同样的问题，Application_End 在一段时间后或 Web 服务器空闲时被调用，之后在下一个活动 Application_Start 被再次调用，并且计划被一次又一次地执行。

我们最终在数据库中有一个简单的表，即 cron_schedule，它用于维护 Quratz 运行的日志。在我们的触发器方法中，我们首先检查数据库中存在的最后执行时间是否符合我们的执行条件，然后才执行触发器，否则简单地返回或只是做一个日志，这样我们就可以知道调度已执行但什么也没做.

# jquery - 使用 jquery 禁用提交按钮

> ID：13194926
> 
> 赞同：11
> 
> 时间：2012-11-02T12:07:18.417
> 
> 标签：jquery

我想在我的表单中禁用提交按钮，一旦它被点击以限制用户一次又一次地点击它我用 jquery 尝试了这个

```
$('form').submit(function()
{  
    var formId = this.id;
    if (formId != ''){
        $('#'+formId+' :input[type=submit]').attr('disabled',true);
        this.submit();
    }
}); 
```

我的问题是我的页面中有两个提交按钮，当我禁用表单中的提交按钮后，我在控制器中检查以进行指导，但我没有得到任何帖子值。有没有其他方法可以防止用户限制多次点击？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T12:12:43.787

有`submit`按钮的 id 或名称。仅禁用该按钮

例如：

HTML

```
<form id="frm_name">
     <input type="submit" id="btn_submit" value="Submit" />
</form> 
```

jQuery

```
...
if (formId != ''){
    $('#btn_submit').attr('disabled',true);
    this.submit();
}
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-16T12:01:56.247

在我的情况下`$('#btn_submit').prop("disabled", true);`工作！

**更新：**

我在一些我想禁用`Edit`和`Delete`内联按钮的特定行中使用剑道网格。我尝试了许多替代方法来禁用它，但**.prop()**就像魅力一样！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T12:22:56.200

您也可以像这样禁用事件，

```
$('form').submit(function(e)
{ 

e.preventDefault();
//then carry out another way of submitting the content.

} 
```

# php - 文件写入功能没有在 PHP 中写入正确的信息

> ID：13194931
> 
> 赞同：0
> 
> 时间：2012-11-02T12:07:38.000
> 
> 标签：php, function, csv, fopen

我有 2 个脚本，一个包含一个写入 .csv 文件的函数，另一个调用该函数。

文件写入功能。

```
<?php
include("config.php");

function exportMysqlToCsv($subid){
$sql = "SELECT * FROM campaigns"; 
$results = mysql_query($sql);
$getpub = mysql_query("SELECT * FROM `publishers` WHERE `username` = '".$_SESSION['username']."'");
$pinfo = mysql_fetch_array($getpub);

// Pick a filename and destination directory for the file 
// Remember that the folder where you want to write the file has to be writable 
$filename = "campaigns_export_pub".$pinfo['id'].".csv"; 

// Actually create the file 
// The w+ parameter will wipe out and overwrite any existing file with the same name 
$handle = fopen($filename, 'w+'); 

// Write the spreadsheet column titles / labels 
fputcsv($handle, array('Campaign ID','Campaign Name','Promoting URL','Category','Rate','Countries','Description','Requirements')); 

// Write all the user records to the spreadsheet 
while($row = mysql_fetch_array($results)) 
{ 
$url = "http://www.rageleads.com/click.php?aid=".$pinfo['id']."&cid=".$row['id']."&sid=".$subid."";
    fputcsv($handle, array($row['id'], $row['name'], $url, $row['category'], $row['rate'], $row['countries'], $row['description'], $row['requirements'])); 
} 

// Finish writing the file 
fclose($handle); 

header("Content-Type: application/force-download");
header("Content-Disposition: attachment; filename='.$filename");
readfile($filename);
unlink($filename);
exit();
}
?> 
```

函数调用。

```
<?php
include("config.php");
include("header.php");
include("functions.php");
include("export.php");

$subid = cleanQuery($_POST['subid']);

if($_POST['submit']){
exportMysqlToCsv($subid);
}

print"
<div id='center'>
<table class='balances'>
<form method='POST' action=''>
<tr>
<td>Sub ID Placeholder:</td>
<td><input type='text' name='subid' /></td>
</tr>
<tr>
<td></td>
<td><input type='submit' name='submit' value='Export' /></td>
</tr>
</form>
</table>
</div>";

include("footer.php");
?> 
```

我遇到的问题不是按照函数中定义的方式编写 .csv 文件，而是编写函数调用所在页面的实际 html 代码，然后添加函数中定义的信息。这是我第一次编写文件写入函数，所以我确定我在某个地方搞砸了，但我不太确定我做错了什么。

如果我将 export.php 设置为不是一个函数，只需转到它编写的页面并以它定义的正确格式下载 csv 文件。

有什么建议么？

**编辑：**我不知道为什么我以前没有这样做，但是当我检查它在我的服务器上创建的 csv 文件时，一切都是正确的，所以标题中的某些内容正在发送这些额外信息，但我不知道哪个一个，或者为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:23:22.483

试试这个。如果您发送 CSV 数据，请确保它是您发送的唯一内容。否则，发送 HTML 文件。您明确发送了 HTML 和 CSV。

```
$subid = cleanQuery($_POST['subid']);
if($_POST['submit']) {
    exportMysqlToCsv($subid);
} else {
    include("config.php");
    include("header.php");
    include("functions.php");
    include("export.php");

    print"
    <div id='center'>
    <table class='balances'>
    <form method='POST' action=''>
    <tr>
    <td>Sub ID Placeholder:</td>
    <td><input type='text' name='subid' /></td>
    </tr>
    <tr>
    <td></td>
    <td><input type='submit' name='submit' value='Export' /></td>
    </tr>
    </form>
    </table>
    </div>";

    include("footer.php");
} 
```

# android - Android：如何防止应用程序重新启动时的全局数据

> ID：13194934
> 
> 赞同：0
> 
> 时间：2012-11-02T12:07:50.407
> 
> 标签：android, android-4.0-ice-cream-sandwich

我试图通过扩展 Application 类来制作全局变量。

```
import android.app.Application;

public class GlobalVariable extends Application 
{
      private String myState;

      public String getState()
      {
        return myState;
      }//End method

      public void setState(String s)
      {
        myState = s;
      }//End method
}//End Class 
```

这对于低于 ICS 的 API 级别非常有效，但如果用户将开发人员设置为保持单一活动，则会失败。

如果用户从最近的应用程序列表重新启动应用程序，它仍然可以正常工作，但如果应用程序从应用程序重新启动，数据将被重置。

有没有办法获得上述条件的全局数据？

***编辑：**这里担心数据安全，所以我不能将数据存储到任何存储、内部存储器或共享首选项等中。我希望数据保存在全局变量中，这样一旦完整的应用程序被破坏或杀死，数据就会丢失由系统本身。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:21:22.510

您可以使用共享首选项，并在那里存储数据。我更喜欢使用应用程序上下文创建的全局单例：

[https://github.com/ko5tik/camerawatch/blob/master/src/de/pribluda/android/camerawatch/Configuration.java](https://github.com/ko5tik/camerawatch/blob/master/src/de/pribluda/android/camerawatch/Configuration.java)

（参见构造函数并获取实例）

它使用（@Inject 注释）小型数据绑定库：

[https://github.com/ko5tik/andject](https://github.com/ko5tik/andject)

（还没有正式发布，你需要自己编译）

# android - 反向地理编码和附加地址详细信息

> ID：13194939
> 
> 赞同：0
> 
> 时间：2012-11-02T12:07:55.123
> 
> 标签：android, latitude-longitude, geocode, street-address

我有一个应用程序可以将纬度和经度反向地理编码为可读地址。这是下面的代码示例：

```
 protected List<Address> doInBackground(Double... params) {
            try {

                List<Address> addresses = geoCoder.getFromLocation(mylat,
                        mylong, 1);
                StringBuilder sBuilder = new StringBuilder();
                if (addresses.size() > 0) {
                    Address address = addresses.get(0);

                    for (int i = 0; i < address.getMaxAddressLineIndex(); i++) {
                        /**
                         * Returns a line of the address numbered by the
                         * given index (starting at 0), or null if no such
                         * line is present.
                         */
                        sBuilder.append(address.getAddressLine(i)).append(
                                "\n");
                        ////////////
                        ////////////
                        // sBuilder.append(address.getLocality()).append("\n");
                        //sBuilder.append(address.getPostalCode()).append("\n");        
                    }// end for
                    addressString = sBuilder.toString();

                }// end if
                return geoCoder.getFromLocation(params[0], params[1], 1);
            } catch (IOException e) {
                e.printStackTrace();
                return null;
            }// end catch
        }// end doInBackground method 
```

我想修改它，所以如果 PostalCode 为空，则不打印任何内容，如果它接收到一个值，则将其与其余其他详细信息一起显示。问题是我住在一个不使用邮政编码的国家，这就是为什么这部分代码目前被注释掉的原因。如果您在一个使用邮政编码的国家/地区（大多数都这样做！），我希望该应用程序显示邮政编码，如果您在我的国家或不使用邮政编码的类似国家，则忽略缺少邮政编码。

谁能推荐我需要做哪些改变才能允许这样做？我相信我需要添加逻辑来处理这里的字符串附加：

```
sBuilder.append(address.getPostalCode()).append("\n"); 
```

谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:33:56.587

我认为你应该在那里添加一个条件。

```
if (address.getPostalCode() != null)
{
    sBuilder.append(address.getPostalCode()).append("\n");
}
else
{
    // do nothing.
} 
```

还是不是你想要的？

# ios - 苹果是否支持设置符号服务器来分析 iOS 崩溃转储

> ID：13194940
> 
> 赞同：0
> 
> 时间：2012-11-02T12:07:56.193
> 
> 标签：ios, crash-reports, symbolicatecrash

就像 MS 的符号服务器一样，苹果是否支持设置符号服务器来分析 iOS Crash Dumps 而不必在编译机上符号化崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:27:13.750

Apple 没有这样的服务器。

有多个第三方服务提供崩溃报告的服务器端符号。我在这个答案的第二部分列出了一些内容：[Include custom data into iOS crash dumps](https://stackoverflow.com/questions/8488894/including-custom-data-into-ios-crash-dumps/8511100#8511100)

所有这些服务都需要您集成一个 SDK 来收集崩溃报告，有些还支持手动上传崩溃报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:43:11.477

没有服务器组件，但 Xcode 有命令行工具，可让您符号化崩溃日志。为此，您需要同时创建的二进制文件和 dSym 文件。它不需要在编译机器上。

# sql-server - MDX DRILLTHROUGH 失败但选择可以成功执行

> ID：13194942
> 
> 赞同：3
> 
> 时间：2012-11-02T12:08:07.930
> 
> 标签：sql-server, ssas, mdx

我有以下 MDX 查询，它在执行时成功返回了度量 -

```
SELECT  
{[Measures].[Closed Quote OE Retail]} ON COLUMNS 
FROM Sales
WHERE
(
[Posting Date].[Date YQMD].[Month].&[11]&[2012]
,[Work Provider].[Code].[LV]
,EXCEPT([Item].[by Item Category by Product Group].[Item Category], [Item].[by Item Category by Product Group].[Item Category].&[OEM])
,EXCEPT([Lost Sale Reason Code].[Code].[Code], [Lost Sale Reason Code].[Code].[All Lost Sale Reason Code].UNKNOWNMEMBER)
,EXCEPT([Lost Sale Reason Code].[by MI Type].[MI Type], { [Lost Sale Reason Code].[by MI Type].[MI Type].&[Not Justified] })
) 
```

但是，如果我在查询开头添加“DRILLTHROUGH”，则会返回以下错误 -

> > 钻取失败，因为 SELECT 子句标识的坐标超出范围。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:16:07.977

当您在 Select 中有多个相同维度的成员时，MDX 看起来不喜欢 DRILLTHROUGH - 在这种情况下，在您的切片器维度上。您似乎也可以通过进行子选择来欺骗它，但在依赖此解决方案之前，我会非常仔细地验证总数。

```
SELECT  
{[Measures].[Closed Quote OE Retail]} ON COLUMNS 
FROM 
(
  Select 
  (
    [Posting Date].[Date YQMD].[Month].&[11]&[2012]
    ,[Work Provider].[Code].[LV]
    ,EXCEPT([Item].[by Item Category by Product Group].[Item Category], 
      [Item].[by Item Category by Product Group].[Item Category].&[OEM])
    ,EXCEPT([Lost Sale Reason Code].[Code].[Code], 
      [Lost Sale Reason Code].[Code].[All Lost Sale Reason Code].UNKNOWNMEMBER)
    ,EXCEPT([Lost Sale Reason Code].[by MI Type].[MI Type], 
      { [Lost Sale Reason Code].[by MI Type].[MI Type].&[Not Justified] }
  ) on 0
From Sales) 
```

# javascript - 在主干视图 Backbone.js 中从另一个函数调用一个函数

> ID：13194944
> 
> 赞同：0
> 
> 时间：2012-11-02T12:08:12.773
> 
> 标签：javascript, jquery, html, backbone.js

我想要的是使用 this.plotPort() 从 plotLoc 调用 plotPort；但我无法......但如果我使用 self.plotPort(); 它不适用于 IE。我的解决方法是在重置时向 lLoca 添加事件以调用 plotPort。为什么 this.plotPort 不起作用？

```
var Loca = Backbone.Model.extend({latitude:{},longitude:{}});
        var LocaList = Backbone.Collection.extend({
            model : Loca,
            url : "/getLatLongList"
        });
        var PortList = Backbone.Collection.extend({
            model : Loca,
            url : "/getLatLongListForPort"
        });
        var lLoca = new LocaList;
        var lPort = new PortList;

        var CreateMap = Backbone.View.extend({

                    el : 'div',
                    map : {},
                    latitude : {},
                    longitude : {},             
                    initialize : function() {

                         var lOptions = {};                  
                    lOptions.success = this.plotLoc;
                        lLoca.fetch(lOptions,this);
                        lLoca.on('reset',this.plotPort(),this);
                        //_.bindAll(this,'plotPort');
                    },

                    plotLoc : function() {
                        // var test =lLoca.toJSON();
                        // $('#pchart').html(JSON.stringify(lLoca));

                        this.latitude = lLoca.toJSON()[0].latitude;
                        this.longitude = lLoca.toJSON()[0].longitude;
                        this.latlng = new google.maps.LatLng(this.latitude,
                                this.longitude);
                        var mapOptions = {
                            center : this.latlng,
                            zoom : 15,
                            mapTypeId : google.maps.MapTypeId.SATELLITE,
                            mapTypeControl : false,
                            streetViewControl : false,
                            navigationControlOptions : {
                                style : google.maps.NavigationControlStyle.SMALL
                            }
                        };
                        mapContainer = $("#mapContainer").get(0);
                        this.map = new google.maps.Map(mapContainer, mapOptions);

                        _.each(lLoca.models, function(loc) {
                            var marker = new google.maps.Marker({
                                position : new google.maps.LatLng(
                                        loc.toJSON().latitude,
                                        loc.toJSON().longitude),
                                map : this.map,
                                title : ""
                            });

                        }, this);
                        lLoca.reset();
                        //console.log(self+"");
                    //this.plotPort();
                    },
                    plotPort : function() {

                         lPort.fetch({                  
                         success: function() {
                             var postImage = new google.maps.MarkerImage(
                                        "Images/greenflag.png",
                                        new google.maps.Size(50, 50));
                                var marker = new google.maps.Marker({
                                    position : new google.maps.LatLng(
                                            lPort.toJSON()[0].latitude,
                                            lPort.toJSON()[0].longitude),
                                    map : this.map,
                                    icon : postImage,
                                    title : "From"

                                });
                                marker = new google.maps.Marker({
                                    position : new google.maps.LatLng(
                                            lPort.toJSON()[1].latitude,
                                            lPort.toJSON()[1].longitude),
                                    map : this.map,
                                    icon : postImage,
                                    title : "To"

                                });
                         }
                         });                        
                    },
                    render : function() {
                        return this;
                    }

                });
        var App = new CreateMap; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:13:36.363

我从你的代码中可以理解，你应该`reset`在做之前绑定，`fetch`而且绑定不正确应该是这样的，

```
lLoca.on('reset', this.plotPort, this); // notice () being removed after this.plotPort
lLoca.fetch(lOptions, this); 
```

这将与`reset`方法绑定而不是调用它。

关于从另一个调用一个方法非常简单，我们只是调用它 using `this`，但是如果该调用是从某个回调函数或任何其他`this`不引用视图的类似事物进行的，则建议保存`this`在该回调之前并在回调中需要时使用它。例如，

```
var _view = this;
// doing collection fetch

this.collection.fetch({
  success :  function (collection, response) {
    // if you want to access view here, it can be accessed using 
    // '_view' variable, because 'this' here does not point to the view.
  }
}); 
```

这只是一个示例，但相同的概念可以用于类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:07:03.433

在你的初始化函数中试试这个

```
 _.bindAll(this,'plotPort', 'plotLoc');

      var lOptions = {};                  
      lOptions.success = this.plotLoc;
      lLoca.fetch(lOptions,this);
      lLoca.on('reset', this.plotPort, this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:28:50.587

在一个对象内部，从一个函数调用另一个函数，您可以使用 jQuery 代理传入正确的“this”

代替

```
 this.plotPort(); 
```

尝试

```
 $.proxy(function () { 
        this.plotPort(); 
    }, this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T14:45:46.007

我建议`_.bindAll(this)`在初始化函数的开头使用。

# wpf - WPF 故事板事件绑定

> ID：13194945
> 
> 赞同：0
> 
> 时间：2012-11-02T12:08:15.913
> 
> 标签：wpf, xaml

我是使用 WPF 故事板的新手，这是我的代码：

```
 <StackPanel>

    <Border Grid.Row="0" Background="Black" Height="40" Name="Border1"></Border>

    <Grid Height="0" Name="MyGrid" Background="Green">
        <Grid.Triggers>
            <EventTrigger RoutedEvent="UserControl.Loaded">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="MyGrid" 
                    Storyboard.TargetProperty="Height" From="0" To="40" 
                    Duration="0:0:1" BeginTime="0:0:0"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Grid.Triggers>
    </Grid>

</StackPanel> 
```

我想将触发情节提要开始的事件更改为 Border1.MouseEnter。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:21:39.390

在这种情况下，您应该将触发器移动到 Border 控件：

```
<StackPanel>

<Border Grid.Row="0" Background="Black" Height="40" Name="Border1">
   <Border.Triggers>
        <EventTrigger RoutedEvent="Border.MouseEnter">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="MyGrid" 
                       Storyboard.TargetProperty="Height" From="0" To="40" 
                       Duration="0:0:1" BeginTime="0:0:0"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Border.Triggers>
</Border>

<Grid Height="0" Name="MyGrid" Background="Green">

</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:26:44.133

我真的没有尝试过，但这应该有效：

```
<StackPanel>
<StackPanel.Triggers>
    <EventTrigger RoutedEvent="Mouse.MouseEnter" SourceName="Border1">
        <BeginStoryboard>
            <Storyboard>
                <DoubleAnimation Storyboard.TargetName="MyGrid" 
                    Storyboard.TargetProperty="Height" From="0" To="40" 
                    Duration="0:0:1" BeginTime="0:0:0"/>
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>
</StackPanel.Triggers>
        <Border Grid.Row="0" Background="Black" Height="40" Name="Border1"></Border>
        <Grid Height="0" x:Name="MyGrid" Background="Green" VerticalAlignment="Bottom"/>
</StackPanel> 
```

# c# - 构建用于调整字体中字符的字距和间距的软件

> ID：13194947
> 
> 赞同：0
> 
> 时间：2012-11-02T12:08:16.550
> 
> 标签：c#, python, kerning, opentype, letter-spacing

正如标题所暗示的，我想构建一个可以读取 .ttf 和 .otf 文件的软件，然后允许用户调整字距、字符宽度和字符间距。我知道项目 freetype，但它是用 C 编写的，我只能用 C# 和 Python 编写代码。编写 .otf 和 .ttf 逻辑有多难？

谢谢变形

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T04:37:52.810

您问编写软件来读取 TrueType (.ttf) 和 OpenType (.otf) 文件有多难，从而可以调整字距调整、字符宽度和字符间距表。好吧，我会告诉你的。它很难。

Microsoft Typography 的[**OpenType 字体文件**](http://www.microsoft.com/typography/otspec/otff.htm)很好地介绍了 TrueType 和 OpenType 字体文件的高级结构。内部结构是一些全局索引和校验和字段，然后是一些“表”，每个“表”都有自己的内部结构。您将需要编写代码来解压缩此全局结构，解析和修改您要更改的表，然后重建全局结构并重新计算校验和。

要让您的用户修改字距调整、字符宽度和字符间距，您可能至少需要修改[`kern`](http://www.microsoft.com/typography/otspec/kern.htm)、[`hmtx`](http://www.microsoft.com/typography/otspec/hmtx.htm)和[`gpos`](http://www.microsoft.com/typography/otspec/gpos.htm)表。对这些表的更改可能会影响其他表中的值。

此外，文本引擎和应用软件对 OpenType 或 TrueType 字体的内容有自己的期望。这些交互是复杂的，并不总是有据可查。我希望所有能够与要求苛刻的文本布局软件一起使用的可靠字体都有关于其内容的详细信息，这反映了大量的专业知识和痛苦的经历。

如果您认为学习 C 语言以使用现有的 freetype 代码很困难，请等到您尝试调试为什么您的工具修改的字体在您的文本布局软件中不起作用。

你没有说你想对字体做什么样的修改。为什么不购买现有软件，而不是自己制作？有一些应用软件，比如[FontLab 的*TypeTool*](http://www.fontlab.com/font-editor/typetool/)，它可以让你完成所有你需要的字距、字符宽度和字符间距的编辑。当然，这需要花钱，但请考虑您的时间价值多少，以及您需要多少时间才能使您的代码充分运行以满足您的需求。

如果您真的想继续编写自己的代码，您可能会发现[Adob​​e Font Development Kit for Opentype (AFDKO)](http://www.adobe.com/devnet/opentype/afdko.html)很有用。祝你好运。

# jquery - 需要在按钮单击时切换 div

> ID：13194949
> 
> 赞同：0
> 
> 时间：2012-11-02T12:08:23.350
> 
> 标签：jquery

我需要在右侧浏览器窗口上切换内容 div。与此类似（我想保留效果并关闭按钮）[**示例**](http://jsfiddle.net/Shef/P33Cj/)- 但不同的是，我想从**a.class**打开此面板。我不想根据 id 打开面板，我只想打开一个区域，然后可能我会加载 ajaxed 内容。

好吧，我想根据我的情况调整小提琴链接上的代码，但我不知道怎么做！

**HTML 代码：**

```
<a class="teste" href="#">Button to Open Panel</a>

    <div class="panel">
    <span class="close">X</span>
    <div class="content">
        <!-- Content Goes Here -->
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:13:49.557

在这里 - 我删除了面板中的第二个 div

[演示](http://jsfiddle.net/mplungjan/bPSJ9/)

```
<a class="teste" href="#">Button to open panel</a>

$('a.teste').on('click', function() {
    $panels.trigger('togglePanel');
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:21:14.003

像这样的东西？

```
 $('a.teste').bind('click', function(e)
 {
    targetDiv = $('.teste .content');
    e.preventDefault();

    urlToLoad = $(this).attr('href');

    var request = $.ajax({
        url: urlToLoad,
        dataType: "html"
    });

    request.done(function(data) {
        targetDiv.html( data );
    });

    request.fail(function(jqXHR, textStatus) {
        alert( "Could not load the page: " + textStatus );
    }); 

 }); 
```

# java - 面向服务的架构 (SOA)

> ID：13194950
> 
> 赞同：0
> 
> 时间：2012-11-02T12:08:24.070
> 
> 标签：java, soa

我已经检查了当我进入主题时出现的所有线程，但没有出现与这篇文章相关的内容。抱歉不是一个严格的编程问题。

这不是家庭作业，而是为我明年要学习的 SOA 课程做准备。

我们需要编写一个服务，我在想是否有可能提供一个 SOA 服务，它可以在 2 名玩家之间对战舰游戏进行裁判。

鉴于我已经使用 MVC 模型在 C# 中编写了游戏，我可以轻松地将代码移植到 Java，我希望您能就我应该如何处理这个问题提出建议？

它必须是 Java，因为 uni 这么说，但这并不是真正的问题。

感谢您的时间。

# php - 从数据库中获取时日期格式不分开

> ID：13194952
> 
> 赞同：0
> 
> 时间：2012-11-02T12:08:27.907
> 
> 标签：php, javascript, mysql

我有一个名为 item_request 的表，它有两个名为 projectmanager 和 createddate 的字段，其时间戳格式为 2012-09-11 17:46:25。

现在我想以另一种形式调用这两个字段，它计算两个不同日期之间的用户条目。日期字段是从时间戳中获取的。这种形式我通过日期时间选择器发送值，格式为 10-12-2012 但是数据库中的值采用不同的格式，即时发送的值采用不同的格式。plzzz 怎么可能帮助我。

这是我的表单的代码：

```
<?php 
include("config.php");
ob_start();
error_reporting(0);
if(!isset($_SESSION[username]))
header("location: index.php");
if(isset($_POST[submit]))
{
$projectmanager=mysql_real_escape_string($_POST['projectmanager']);
$date=mysql_real_escape_string($_POST['date']);
$dateexp = explode("-",$date);
$date = mysql_real_escape_string($dateexp[0]."/".$dateexp[1]."/".$dateexp[2]);

$date1=mysql_real_escape_string($_POST['date1']);
$dateexp1 = explode("-",$date1);
$date1 = mysql_real_escape_string($dateexp1[0]."/".$dateexp1[1]."/".$dateexp1[2]);

echo $queryuser= "select * from  item_request where projectmanager=$projectmanager AND (requireddate>=$date AND requireddate<=$date1)";

}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Project Managers Registrarion</title>
<link rel="stylesheet" type="text/css" href="css/style.css"/>
<script language="javascript" type="text/javascript" src="js/datetimepicker.js">

//Date Time Picker script- by TengYong Ng of http://www.rainforestnet.com
//Script featured on JavaScript Kit (http://www.javascriptkit.com)
//For this script, visit http://www.javascriptkit.com

</script>

</head>
<body>

<div class="container">
  <div class="header"><a href="#"><img src="images/cherry-new.jpg" width="79" height="93" /></a> 
    <!-- end .header --></div>
<?php include("rightMenu.php");?>
  <div class="content">
    <h1>PR Count</h1>
    <div style="padding:10px 0px; text-align:center; color:#990000;">
    </div>
    <form action="" method="post" name="loginform">

<table width="100%" border="0" cellspacing="2" cellpadding="2">
  <tr>
  <td>Project Managers</td>
           <td><select name="projectmanager" style="width:145px;" id="projectmanager" onChange="showUser(this.options[this.selectedIndex].id)">
               <option value="">Select</option>
               <?php $queryuser= "select * from  projectmanagers";
              $fetuser1user = mysql_query($queryuser);
              while($fetuser = mysql_fetch_array($fetuser1user)){
        ?>
               <option id="<?php echo $fetuser['id']?>" value="<?php echo $fetuser['id']?>"><?php echo $fetuser['projectmanager']?></option>
               <?php }
        ?>
             </select></td>
     </tr>
  <tr>
    <td>Date From</td>
    <td>
      <input id="date" type="text" size="20" name="date"  /><a href="javascript:NewCal('date','ddmmyyyy')"><img src="images/cal.gif" width="16" height="16" border="0" alt="Pick a date"></a></td>
  </tr>
  <tr>
    <td>Date To</td>
    <td>
      <input id="date1" type="text" size="20" name="date1"><a href="javascript:NewCal('date1','ddmmyyyy')"><img src="images/cal.gif" width="16" height="16" border="0" alt="Pick a date"></a></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>
      <input type="submit" name="submit" id="submit" value="Submit" onClick="return formvalidate();"/>
 </td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>

       <table width="100%" border="1"><tr>
                <td width="18%" valign="middle" class="tableheading">PI.No.</td>
                <td width="18%" valign="middle" class="tableheading">Project Manager</td>
                <td width="18%" valign="middle" class="tableheading">Date Created</td>
                <td width="15%" valign="middle" class="tableheading">Action</td>
                </tr>
                 <?php 
                 // to print the records
                $select = "select * from item_request";
                $query1 = mysql_query($select);  
                 while($value = mysql_fetch_array($query1)){ ?>

                <tr>
                <td class="tabletext"><?php echo $value[id];?></td>
                <td class="tabletext"><?php echo $value[projectmanager];?></td>
                <td class="tabletext"><?php echo $value[datefrom];?></td>               
                <td class="tabletext"><a href="<?php echo $_SERVER['PHP_SELF']; ?>?id=<?php echo $value[id];?>&cmd=edit"><img src="images/edit.png" width="25" height="25" border="0" title="Edit" /></a>
               <a href="<?php echo $_SERVER['PHP_SELF']; ?>?id=<?php  echo $value[id];?>&cmd=delete" onclick="return confirm('Are you sure you want to delete <?php  echo $value[projectmanager];?>?')"><img src="images/deleteBtn.png" width="25" height="25" border="0" title="Edit" /></a></td>
              </tr><?php }?>
                </table>
    </form>

    <!-- end .content --></div>
  <?php include("footer.php");?>
  <!-- end .container --></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:29:43.127

替换此函数调用...

```
javascript:NewCal('date','ddmmyyyy'); 
```

有了这个...

```
javascript:NewCal('date','ddmmyyyy',true,24); 
```

希望能帮助到你。

# php - 无法在 php 5.2.9 中使用 mcrypt 扩展

> ID：13194953
> 
> 赞同：0
> 
> 时间：2012-11-02T12:08:34.537
> 
> 标签：php, apache, xampp

我正在使用**xampp 1.8.1**并通过使用[apachelounge提供的补丁将](http://www.apachelounge.com/download/)**php 5.2.9**集成到其中

我已经启动了 apache，它是正常启动的，但是它显示了 php 扩展的一些错误

> [02-Nov-2012 10:56:42] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\Secoweb\xampp\php\ext\php_mcrypt.dll' - 指定的模块可以找不到。在第 0 行的未知中
> 
> [02-Nov-2012 10:56:42] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\Secoweb\xampp\php\ext\php_mssql.dll' - 指定的模块可以找不到。在第 0 行的未知中
> 
> [02-Nov-2012 10:56:42] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\Secoweb\xampp\php\ext\php_pdo_mssql.dll' - 指定的模块可以找不到。在第 0 行未知
> 
> [02-Nov-2012 10:56:42] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\Secoweb\xampp\php\ext\php_pgsql.dll' - 指定的模块可以找不到。在第 0 行未知
> 
> [02-Nov-2012 10:56:42] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\Secoweb\xampp\php\ext\php_ps.dll' - 指定的模块可以找不到。在第 0 行的未知中
> 
> [02-Nov-2012 10:56:42] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\Secoweb\xampp\php\ext\php_paradox.dll' - 指定的模块可以找不到。在第 0 行未知
> 
> [02-Nov-2012 10:56:45] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\Secoweb\xampp\php\ext\php_mcrypt.dll' - 指定的模块可以找不到。在第 0 行未知
> 
> [02-Nov-2012 10:56:45] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\Secoweb\xampp\php\ext\php_mssql.dll' - 指定的模块可以找不到。在第 0 行未知
> 
> [02-Nov-2012 10:56:45] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\Secoweb\xampp\php\ext\php_pdo_mssql.dll' - 指定的模块可以找不到。在第 0 行未知
> 
> [02-Nov-2012 10:56:45] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\Secoweb\xampp\php\ext\php_pgsql.dll' - 指定的模块可以找不到。在第 0 行未知
> 
> [02-Nov-2012 10:56:45] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\Secoweb\xampp\php\ext\php_ps.dll' - 指定的模块可以找不到。在第 0 行未知
> 
> [02-Nov-2012 10:56:45] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\Secoweb\xampp\php\ext\php_paradox.dll' - 指定的模块可以找不到。在第 0 行未知

我[在此链接中引用了 Stackoverflow 问题](https://stackoverflow.com/questions/8271408/enable-mcrypt-on-php-install) 。我遵循了这些步骤，但这也是失败的。

**我在xampp/php/ext**文件夹中有这些 dll ，我尝试将 dll 放在 system32 文件夹中。我也没有工作。

我正在使用 mcrypt 进行密码加密和解密。所以请帮我用 mcrypt 扩展启动 php。

提前致谢

吉什努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:59:45.060

最后，我能够找到问题的解决方案。

这是由于**libmcrypt.dll 依赖问题**，所以我将 libmcrypt.dll 放入 apache 文件夹并重新启动了 apache。我还评论了所有不需要的扩展，所以 phperrorlog 现在很干净。

**libmcrypt.dll**存在于**php**文件夹中我通过将 dll 移动到**apache/bin**文件夹中解决了这个问题

现在**Xampp 1.8.1**与**php 5.2.9完美配合**

# .net - 如果文本大小超出字段范围，如何抑制水晶报表中的字符串字段？

> ID：13194955
> 
> 赞同：-1
> 
> 时间：2012-11-02T12:08:36.143
> 
> 标签：.net, crystal-reports

我的水晶报告中有一个字符串字段，它显示某些字符串数据必须从第一个字符到最后一个字符作为一个整体显示，我无法预测这个字符串的最大长度。有没有办法抑制这个字段或如果其中的字符串超出范围，则在此字段中显示警告消息？请注意，我不想在此字段中使用文本换行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:11:45.693

我的做法：

*   确定 Crystal Reports 将截断字段的长度
*   计算字段的长度（在单独的列中）并将其包含在数据集中（或在 SQL 表达式字段中这样做）
*   如果长度字段 >= 最大值，则抑制字段或包含它的部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:55:20.493

据我所知，Crystal Reports 没有任何功能来确定字符串的宽度，将字体类型考虑在内。

在我的脑海中，最好的选择是使用固定宽度的字体，然后如果字符串的字符数超过 X 则禁止该字段（X 是字符串超出范围所需要的字符数场）。

如果你不使用，或者不能/不会使用固定宽度的字体，你可能会不走运。

# eclipse - Eclipse 如何导入外部库的文档

> ID：13194961
> 
> 赞同：8
> 
> 时间：2012-11-02T12:08:48.440
> 
> 标签：eclipse

当我们将外部库导入到 eclipse Java 项目中时，我们可以使用 eclipse 的自动更正功能来对从新库中导入的方法进行自动更正，但我们看不到这些方法具体做了什么。我们必须导入库的文档。

**问题1：**如何将文档导入eclipse项目？

**问题 2：** Java 文档是什么样的？

**问题 3：** Java 文档使用哪种文件格式？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-02T12:20:50.490

*   右键单击您的项目->属性-> java构建路径
*   选择库（通常是 .jar 文件）
*   单击库的下拉菜单以展开设置-> 选择源附件无并单击编辑
*   选择doc的来源（java文档一般用JavaDoc表示）
*   点击确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T12:14:55.317

> **问题1：如何将文档导入eclipse项目？**

在项目资源管理器中，右键单击库并选择属性。在出现的对话框中，选择“Javadoc Location”并填写信息。

> **问题 2：Java 文档是什么样的？**

一组目录，其中包含每个类的 HTML 文件。`index.hml`根目录通常有一个，通常还有一个`package-list`文件。当您“验证”该位置时，Eclipse 会搜索这些。

> **问题3：java 文档使用哪种文件格式？**

Eclipse 接受 URL（指向文件或网页）、ZIP 或 JAR。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T12:16:44.600

据我所知，您的问题 1：如何将文档导入 eclipse 项目？

假设您正在使用 AXIS.jar 并且您想获取其 doc 属性，然后：

1.  在 Package Explorer 视图中，为 Axis 库展开您的项目及其库文件夹。

2.  右键单击 Axis jar 并选择属性。

3.  在 Properties 对话框中，选择左侧树中的 Javadoc Location。

4.  选择 Javadoc URL 选项后，单击浏览。

5.  导航到相应的文件夹（见下表）并单击两次确定以退出“属性”对话框。

问题 2：Java 文档是什么样的？和问题3：Java 文档使用哪种文件格式？

我猜是 HTML、zip 或 jar :))

和

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T12:18:21.507

1.  在您的包资源管理器中（很可能也在其他地方），您可以看到您的 jar 文件（外部库）。右键单击它并选择“属性”。在那里，您可以选择附加源代码和 javadoc。完成后，您可以在查看自己的 javadoc 时查看他们的 javadoc（即悬停、'javadoc-view'、F3 ...）
2.  格式化文本
3.  Javadoc [http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T12:55:58.857

COvayurt，您看不到具体的方法，因为您已经为这些方法添加了库，而不是为这些库添加了 java 文档，因此为了为库添加 java doc，只需提供您的文档位置的路径（如果您有那些文档图书馆）。右键单击您的项目，然后在属性下设置 javadoc 路径。

java 文档是从标准类创建的 html 文件。您也可以为自己的项目创建 java doc。[看到这个链接](http://www.cs.laurentian.ca/aaron/cosc1047/eclipse-tutorials/javadoc-tutorial.html)

如果你想在[这里查看标准的java api 文档](http://docs.oracle.com/javase/7/docs/api/)

# hibernate - 枚举类型的单表继承

> ID：13194962
> 
> 赞同：2
> 
> 时间：2012-11-02T12:08:50.407
> 
> 标签：hibernate

我的父子实体关系如下。在这里，我将为单个表映射此继承，即 User

```
@Entity
@Table(name = "USER")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "USER_TYPE", discriminatorType = DiscriminatorType.STRING,    length = 20)
@DiscriminatorValue("USER")
public class User implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "ID", unique = true, nullable = false)
    private Long id;

    .
    .
    @Enumerated(EnumType.STRING)
    @Column(name = "USER_TYPE", insertable = false, updatable = false)
    private UserType userType;
    .
    .

    //setters, getters

}

@Entity
@DiscriminatorValue("MANAGER")
public class Manager extends User implements Serializable {
    // manager specific fields
}

User Types :

public enum UserType {
    MANAGER,
    ADMIN,
    ACCOUNTS_CLEARK
} 
```

当我持久化用户对象时，用户类型列只获取用户，即使我在持久性对象中设置了用户类型（即 UserType.MANAGER）。实际的休眠插入语句如下；

```
Hibernate: insert into USER (ID, DOB, EMAIL, FIRST_NAME, MIDDLE_NAME, LAST_NAME,     NICKNAME, USER_NAME, PASSWORD, USER_TYPE) values (null, ?, ?, ?, ?, ?, ?, ?, ?, 'USER') 
```

当我尝试从用户表中检索所有记录时出现以下异常；

```
java.lang.IllegalArgumentException: Unknown name value for enum class     com.test.domain.user.UserType: USER
    at org.hibernate.type.EnumType.nullSafeGet(EnumType.java:127)
    at org.hibernate.type.CustomType.nullSafeGet(CustomType.java:132)
    at org.hibernate.type.AbstractType.hydrate(AbstractType.java:105)
    at     org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:2267)
    at org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1443)
    at org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1371)
    at org.hibernate.loader.Loader.getRow(Loader.java:1271)
    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:619)
    at org.hibernate.loader.Loader.doQuery(Loader.java:745)
    at     org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:270)
    at org.hibernate.loader.Loader.doList(Loader.java:2449)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2192)
    at org.hibernate.loader.Loader.list(Loader.java:2187)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:452)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:363)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1258)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at     sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at     sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at     org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at     org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.IllegalArgumentException: No enum const class com.test.domain.user.UserType.USER
    at java.lang.Enum.valueOf(Enum.java:196)
    at org.hibernate.type.EnumType.nullSafeGet(EnumType.java:124)
    ... 47 more 
```

我想每次我要保存一个用户时，它都会选择 @DiscriminatorValue ，它是 USER 并保存在用户类型字段中。任何人都会遇到并为此找到解决方案。请注意，用户类型表中没有类型 USER。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:08:33.350

属性 userType 是注释中指定的只读属性 (insert=false, u8pdate=false)，因此在插入时从不考虑它。唯一考虑的值是为类指定的鉴别器值，并且对于每个持久化的用户对象设置为 USER，对于每个持久化的管理器对象设置为 MANAGER。所以修复鉴别器值和用户类型枚举之间的不匹配

# primefaces - 查找当前焦点组件 ID 以在线显示/上下文帮助系统

> ID：13194963
> 
> 赞同：1
> 
> 时间：2012-11-02T12:08:51.390
> 
> 标签：primefaces, focus

我想为我的 primefaces 页面实现在线（上下文）帮助。我正在考虑将组件的 ID 作为 context_id，对于每个上下文 ID，数据库中都有帮助文本。当用户在组件上需要帮助时，焦点应该在组件中，并且用户必须

方法 1\. 按 F1 键
方法 2\. 将鼠标移到（帮助）图标上

然后根据当前关注的组件 id 从数据库中获取上下文 id 的帮助文本并将其显示在屏幕上。

我们如何在不使用 javascript / jQuery 的情况下获取当前关注的组件 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:40:23.077

以下jQuery是我的问题的解决方案。这会在访问每个组件时更新隐藏的 inputText（但在单击帮助按钮本身时会跳过此内容）。单击帮助按钮时，从隐藏的 inputText 中获取活动组件的 ID，并从资源包中为该 ID 提取帮助（我的资源包是从具有每个组件 ID 的帮助文本的数据库中创建的）

```
$(document).ready(function(){    
    $("body").delegate(":input", "focus click", function(){
        if($(this).attr('id') != 'hiddenInput' &amp;&amp; $(this).attr('id') != 'helpButton'){
                $('#hiddenInput').val($(this).attr('id'));
         } 
    }); 
}); 
```

# google-chrome-extension - 真正持久的 localStorage 或清除历史记录的解决方法

> ID：13194965
> 
> 赞同：0
> 
> 时间：2012-11-02T12:09:07.530
> 
> 标签：google-chrome-extension, local-storage, rss-reader

对于我的公司，我为我们的内部博客创建了一个 RSS 阅读器扩展。我自己构建的原因无关紧要，我知道有很多现有的扩展。可以说，该博客与外界完全隔绝。而且我们不要忘记尝试这样的新事物很有趣:)

扩展工作几乎完美。它显示了一个带有最新 10 个帖子的漂亮弹出窗口，如果新帖子已添加到博客中，它会显示一个计数器。

但是，由于我的大多数同事都是像我这样的网络开发人员，因此他们中的一些人使用 firefox（该扩展程序由自动脚本移植以在 FF 中使用）并启用了“浏览器关闭时清除历史记录”选项。但是，这也会删除本地存储。我知道这个设置是问题而不是移植，因为我没有选择该选项的大学没有遇到任何这些问题。

我使用 localStorage 来记住哪些帖子已阅读，哪些未阅读。所以对于这些人来说，结果是每个浏览器重新启动扩展程序都会显示有 10 个新项目，无论他们可能读过或可能没有读过任何项目。

我已经想到了一种通过 php 和 ajax 使用 MySQL 数据库来解决此问题的方法。但我仍然需要能够可靠地存储用户 ID 或其他内容以个性化已读/未读列表。

必须有一个更简单更好的方法。我知道许多具有类似功能的扩展没有这个问题，但我不知道如何也找不到任何关于它的信息。

你们有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:11:22.007

我只构建了 Chrome 扩展，而不是 FF 扩展，但是如果您可以访问文件系统，您可以将数据存储在一个简单的文本文件中。老实说，我会责怪开发人员清除他们的历史记录。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T04:30:04.667

我刚刚使用[chrome.storage.sync API](http://developer.chrome.com/extensions/storage.html)尝试了我自己的 Chrome 扩展程序。如果清除所有历史记录和本地缓存，存储不会被删除。

# ios - UITableView 滚动奇怪的行为

> ID：13194969
> 
> 赞同：0
> 
> 时间：2012-11-02T12:09:17.880
> 
> 标签：ios, uitableview

我的应用程序中有一个 TableViewController（好几个，但这只发生在这个特定的应用程序上）。

内容是使用 NSFetchedResultsController 从 Core Data 驱动的，TVC 是 NSFetchedResultsControllerDelegate 并使用基于内容更改更新表的方法（即它运行 beginUpdates、endUpdates 等...）。

我以前做过很多次，所以只需使用相同的代码。（也可以在 Ray Wenderlich 的网站上找到）。

无论如何，我有一个视图（从 TVC 推送）将新项目添加到 CoreData 数据库中。然后应该将这个新项目添加到 TVC 的表中。

这一切都很好。我查看表格上下滚动很好。单击添加。添加新项目。推回 TableView，我可以看到新项目...

但

tableView 现在不允许我一直滚动到底部。我可以通过滚动到底部并按住屏幕来查看表格中的新数据，但是当我放手时，tableView 会弹回来，所以我再也看不到它了。

我检查了几件事...

1.  TableView 的 frame 前后没有变化。
2.  tableView 的 contentSize 确实会更改以适应添加的单元格。
3.  滚动时，前后的最小 contentOffset 均为 0（这是正确的）。
4.  滚动时，MAXIMUM contentOffset 前后相同（这是不正确的）。

如果我弹回 rootVC，然后推回 TVC，那么我可以再次滚动并查看所有新单元格。

我做了一些测试。

如果我重新启用自动旋转，`- (BOOL)shouldAutorotate`然后通过添加新单元格等的动作，我仍然无法滚动到底部。但是，如果我旋转横向然后回到纵向，那么现在我可以一直滚动到底部。

在此之后，我尝试在`[self viewWillLayoutSubViews];`之后运行该方法，`[self.tableView endUpdates];`但仍然没有。

就像我说的，我以前做过很多次，没有任何问题。我真的不明白现在发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:20:55.443

我终于找到了一个有效的解决方案！

最后我不得不投入`[self.tableView reloadData];`到`viewDidAppear`方法中。

这解决了问题。

# jquery - 使用 javascript/jquery 搜索包含特定字符串的元素的选择框

> ID：13194971
> 
> 赞同：1
> 
> 时间：2012-11-02T12:09:26.677
> 
> 标签：jquery, search, select

我有一个包含一些城市名称的选择框和一个搜索字段。

当我在搜索框中搜索城市名称时，我希望它通过 #selectzone_select 中的选项进行搜索并返回第一个具有与搜索匹配的 html 的元素，因此我可以重定向到该元素值中的链接。

**选择框**

```
<select id="selectzone_select">
  <option class="c1" value="/category/testcity1/">testcity1</option>
  <option class="c2" value="/category/testcity2/">testcity2</option>
</select> 
```

**搜索域**

```
 <form onsubmit="return searchZone(this)">
      <span id="zonesearchwrap">
        <input class="zonesearch" value="Search" name="searchtext">
        <input type="submit" value="Search">
      </span>
    </form> 
```

**搜索区（）**

```
function searchZone(obj){
  var value = obj['searchtext'].value;
  // Find "#selectzone_select option" having value in text
  // If anything is found redirect to the option.value
} 
```

# android - 比较android应用程序中布局的背景颜色

> ID：13194973
> 
> 赞同：2
> 
> 时间：2012-11-02T12:09:39.207
> 
> 标签：android

我想做一个 if 语句，我将在其中比较布局背景颜色的颜色，如下所示：

```
 RelativeLayout screen = (RelativeLayout) findViewById (R.id.screen);
 if(screen.getBackgroundColor() == "#FFFFFFFF"){
    //do something...
 }
 else{
   //do something else...
 } 
```

我不知道如何获得背景颜色。我通过以下方式设置颜色：`screen.setBackgroundColor(Color.parseColor("#000000"));`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:25:28.617

没有 direct `getBackgroundColor()`，但如果你真的需要知道颜色值，你应该检索视图的[Paint 对象](http://developer.android.com/reference/android/graphics/Paint.html)并从中获取颜色：

```
Paint viewPaint = ((PaintDrawable) view.getBackground()).getPaint();
int colorARGB = viewPaint.getColor(); 
```

请注意，这也包含 alpha，因此在比较时要小心（或者如果您只需要比较 RGB，请去掉 alpha：

```
int colorRGB = colorARGB & 0x00ffffff; 
```

这将适用于所有 API 级别。

**编辑**

至于比较 - 一旦您检索到颜色，您可以使用[Color.parseColor()](http://developer.android.com/reference/android/graphics/Color.html#parseColor%28java.lang.String%29)并以通常的方式比较结果：

```
if( colorRGB == Color.parseColor("#ffffff") ) {
   // matches...
} 
```

或与 ARGB 相同：

```
if( colorARGB == Color.parseColor("#ffffffff") ) {
   // matches...
} 
```

如果您经常这样做（例如在列表适配器中），我会对其进行一次解析并存储结果以供重用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T12:27:39.740

在您可以使用 API 级别 11+ 的情况下，您可以将`screen.getBackground()`转换为 a`ColorDrawable`然后调用方法`getColor()`。不幸的是，此方法不适用于 API 级别 < 11。

希望这可以帮助！

# android - 在按钮单击时通过 LED 灯制作频闪灯

> ID：13194975
> 
> 赞同：1
> 
> 时间：2012-11-02T12:09:41.997
> 
> 标签：android, eclipse, led, flashlight

我已经制作了一个手电筒应用程序，我想尝试制作插件以允许频闪灯功能。

我想在不同的按钮上设置它，而不是同一个。我想我需要使用计时器，但我从未使用过计时器，因为我是 Java 新手。

这是我的手电筒代码：

```
public class FlashLightActivity extends Activity {

private boolean isLighOn = false;
private Camera camera;
private Button button;

@Override
protected void onStop() {
    super.onStop();
    if (camera != null) {
        camera.release();
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    button = (Button) findViewById(R.id.buttonFlashlight);
    Context context = this;
    PackageManager pm = context.getPackageManager();

    if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
        Log.e("err", "Device has no camera!");
        return;
    }

    camera = Camera.open();
    final Parameters p = camera.getParameters();

    button.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {

            if (isLighOn) {
                Log.i("info", "torch is turn off!");
                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                camera.setParameters(p);
                camera.stopPreview();
                isLighOn = false;
            } else {
                Log.i("info", "torch is turn on!");
                p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                camera.setParameters(p);
                camera.startPreview();
                isLighOn = true;
            }
        }
    });
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T02:07:33.537

您可以使用处理程序

```
public class Strobe extends Activity {

    private LinearLayout mLinearLayout;

    private Handler mHander = new Handler();

    private boolean mActive = false;
    private boolean mSwap = true;   

    private final Runnable mRunnable = new Runnable() {

        public void run() {         
            if (mActive) {
                if (mSwap) {                    
                    mLinearLayout.setBackgroundColor(Color.WHITE);
                    mSwap = false;
                    mHander.postDelayed(mRunnable, 20);
                } else {
                    mLinearLayout.setBackgroundColor(Color.BLACK);
                    mSwap = true;
                    mHander.postDelayed(mRunnable, 100);
                }
            }           
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mLinearLayout = (LinearLayout) findViewById(R.id.strobe);
        startStrobe();
    }

    private void startStrobe() {        
        mActive = true;
        mHander.post(mRunnable);
    }
} 
```

为活动设置主题以使其全屏显示。

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

# vba - 圈子无效数据宏

> ID：13194987
> 
> 赞同：4
> 
> 时间：2012-11-02T12:10:35.007
> 
> 标签：vba, excel

我有一个包含许多相关下拉列表的工作表，如果初始下拉列表被更改，这些下拉列表可能会出现无效数据。我想要一个简单的自动宏，每次检测到指定范围（D8：T800）内的单元格更改时，它都会自动运行“圈出无效数据”命令。

这听起来很简单，但我不知道该怎么做。

问题 - 因为这个宏将在每次修改单元格时运行，这个宏会减慢工作表的速度吗？

编辑：另外：因为这可能很慢，有没有办法我们可以在选定的范围内运行这个命令？

你的想法谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:37:30.640

尝试这个

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Intersect(Target, Me.Range("D8:T800")) Is Nothing Then
        Me.CircleInvalid
    End If
End Sub 
```

请注意，这适用于整个工作表，因此虽然此代码仅在内部单元格更改`CircleInvalid`时触发，但工作表上的*所有*无效单元格都将被圈出`D8:T800`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:18:46.063

尝试将此代码放在您的工作表中：

```
Private Sub Worksheet_Change(ByVal Target As Range)

' Check target range has changed
If (Not Intersect(Target, Range("D8:T800")) Is Nothing) Then
    ' Prevent recusrive looping
    Application.EnableEvents = False

    ' Refresh validation circles
    Target.Worksheet.CircleInvalid

    Application.EnableEvents = True
End If

End Sub 
```

请注意，如果这些单元格中的值由于超出指定范围的计算而发生变化，这将不起作用。

此外，CircleInvalid 方法适用于整个工作表。

如果目标被验证，您可以尝试在条件中编辑代码以“做某事”——这将导致您更改无效单元格的格式，而不是在它们周围有红色圆圈。

```
**PSEUDO-CODE**
For each cell in Target.Range
    cell.colour = bright red
Next cell 
```*

# c# - 如何将完整的 SQL 表导出到 XML

> ID：13194989
> 
> 赞同：5
> 
> 时间：2012-11-02T12:10:50.013
> 
> 标签：c#, ado.net

我的主要编码理想是在 .net 应用程序上。所以我在应用程序设计方面的技能有限。

我正在尝试将整个表从数据库（使用视图）导出到 XML 文件（然后希望将其导出到电子表格 - 我已经查看并未能找到直接的方法）。

我使用以下代码仅成功将 1 列导出到 xml 文件：

```
DataConn.UserName = "***";
DataConn.Password = "***";
DataConn.SqlServer = "***";
DataConn.Database = "***";

const string strSql = "SELECT TOP 1 * FROM vwGetStaffDetails FOR XML AUTO";

using (SqlCommand sqlComm = new SqlCommand(strSql, DataConn.Connect()) { CommandType = CommandType.Text })
{
     string result = sqlComm.ExecuteScalar().ToString();

     File.WriteAllText(@"C:\Temp\text.xml", result);
 } 
```

每当我使用`ExecuteReader`or`ExecuteXmlReader`时，我都没有得到任何实际结果。

我将如何获得所有字段？

**编辑：**我必须使用`Top 1`才能`Execute Scalar`正常工作。

使用以下解决方案，我的文件显示：

```
<?xml version="1.0" standalone="yes"?>
<NewDataSet>
  <Table>
    <XML_F52E2B61-18A1-11d1-B105-00805F49916B>&lt;vwGetStaffDetails ImageLoc="****.jpg" LName="GAINES" FName="****" StaffTitle="****" JobPosition="****" Email="***@***.com" Code="***" Number="******" PhoneTypeID="1"/&gt;</XML_F52E2B61-18A1-11d1-B105-00805F49916B>
  </Table>
</NewDataSet> 
```

它正在编写`&lt;`等而不是正确的 XML。有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T12:19:56.267

您可以使用 a`SqlDataAdapter`和`System.Data.DataSet`加载 a `DataTable`，这将写入 XML。

```
const string strSql = "SELECT * FROM vwGetStaffDetails";

using (SqlCommand sqlComm = new SqlCommand(strSql, DataConn.Connect()) { CommandType = CommandType.Text })
{
    SqlDataAdapter da = new SqlDataAdapter(sqlComm);
    DataSet ds = new DataSet();
    da.Fill(ds);
    ds.Tables[0].WriteXml(@"C:\Temp\text.xml");
} 
```

**编辑**使用此方法，您将从 SQL 中删除 XML 代码，并让 .NET 转换所有内容。我已经更改了您的 SQL 命令以反映这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:25:09.100

您可能想看看如何编写输出为 XML 的查询。
互联网上有很多关于此的示例和教程。这个[http://msdn.microsoft.com/en-us/library/bb510462.aspx](http://msdn.microsoft.com/en-us/library/bb510462.aspx)就是其中之一。

如果我没记错的话，返回的输出应该是一个包含完整 XML 内容的字符串。

# jquery - 如何使 jQuery Validate() 规则为 onkeyup false？

> ID：13194990
> 
> 赞同：1
> 
> 时间：2012-11-02T12:10:58.780
> 
> 标签：jquery, jquery-validate

我为名为 as的**jQuery编写了单独的规则，我希望`validate()`****在每次按键时都不会调用**`login_auth`该规则，但我希望**调用所有其他规则**。这意味着所有其他内置**规则**，例如and应该在每个键上调用，但只能在or上调用。****`onkeyup`****`email``password``login_auth``onfocusout``blur`****

 ***** * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-18T11:49:46.670

```
$.validator.setDefaults({ 
  onkeyup: function(element) { 
      if (element.name == '#emailid') { 
          return false; 
      }
  }
}); 
```

在表单中，如果您想停止特定 id 的 keyup 事件，请尝试此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T18:37:14.890

在您发布实际的 HTML 和 jQuery 之前，这是我最好的答案。

我不知道有选择地应用任何插件选项....而是将它们应用于插件的每个实例。

因此，我提出了两种形式，这样您就可以拥有 的两个唯一实例`.validate()`，并在一个形式上应用该`onkeyup: false`选项，同时允许`onkeyup`在另一种形式上正常运行。

**HTML：**

```
<form id="authForm" action="#">
    login: <input type="text" name="login" /><br />
</form>

<form id="Form" action="yourAction" method="yourMethod">
    email: <input type="text" name="email" /><br />
    password: <input type="password" name="password" /><br />
    <input type="submit" />
</form>​ 
```

**jQuery：**

```
$(document).ready(function() {

    $('#authForm').validate({
        onkeyup: false,
        rules: {
            login: {
                login_auth: true,  // your custom rule
                required: true
            }
        }
    });

    $('#Form').validate({
        rules: {
            email: {
                required: true,
                email: true
            },
            password: {
                required: true
            }
        },
        submitHandler: function(form) {
            if ($('#authForm').valid()) {
                form.submit();
            }
        },
        errorPlacement: function(error, element) {
            $('#authForm').valid(); // force validation on first form when this form has error
            error.insertAfter(element); // default error placement
        }
    });

});​ 
```

[**工作演示：**](http://jsfiddle.net/4Hkjk/5/)

[http://jsfiddle.net/4Hkjk/5/](http://jsfiddle.net/4Hkjk/5/)****

# php - 当没有找到行时，mysql_num_rows 不返回任何内容

> ID：13194993
> 
> 赞同：0
> 
> 时间：2012-11-02T12:11:08.250
> 
> 标签：php, mysql

我正在努力解决这个问题。

```
 $can = $r6['candidate_id'] ; 
  $checkquery = mysql_query("SELECT * FROM candidate 
  WHERE candidate_id ='$can' and type='facrep'") or die(mysql_error());  
  if (mysql_num_rows($checkquery) > 0) {
     echo ">0" ; 
  }else {
     echo "0" ; 
  } 
```

如果数据库中有记录，则成功返回`>0`，但如果没有记录，则不返回任何内容，甚至`0`. 因此，该`else`语句永远不会起作用。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:30:34.417

mysql_num_rows 在未找到任何行时返回 bool false。因此您将代码重写为

```
 $can = $r6['candidate_id'] ; 
  $checkquery = mysql_query("SELECT * FROM candidate 
  WHERE candidate_id ='$can' and type='facrep'") or die(mysql_error());  
  if (mysql_num_rows($checkquery)) {
     echo ">0" ; 
  }else {
     echo "0" ; 
 } 
```

希望这会对您有所帮助！