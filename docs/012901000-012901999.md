# StackOverflow 问答 12901000-12901999

# android - Android - 当我在数据库中有撇号并选择数据时崩溃

> ID：12901002
> 
> 赞同：1
> 
> 时间：2012-10-15T17:36:42.653
> 
> 标签：android

我从我的 sqlite 数据库中选择数据。我的问题是，当数据库中有撇号（例如“我是约翰”）并且我尝试选择数据时，我的应用程序崩溃了。

如果我在数据库中没有撇号，那么一切都很好。

我的选择数据功能：

```
String query = "SELECT * FROM " + mainCollumn  + " WHERE used=0 " + " AND season <= " + seasons + " ORDER BY RANDOM() LIMIT " + count ;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(query, null);

    if(cursor.moveToFirst()){
        do {
            Question question = new Question(Integer.parseInt(cursor.getString(0)),
                    cursor.getString(1),cursor.getString(2),cursor.getString(3),cursor.getString(4),cursor.getString(5),
                    Integer.parseInt(cursor.getString(6)));

            questionList.add(question);
        }while(cursor.moveToNext());
    } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T17:42:48.830

您可以通过用双撇号替换撇号来特别处理撇号，但最好的方法是使用[`query()`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)with`selectionArgs`而不是`rawQuery()`.

```
SQLiteDatabase db = this.getReadableDatabase();
String[] columns = new String[] {column1, column2}; // the columns you want
Cursor cursor = db.query(mainCollumn, String[] columns, "used=0 and season<=?", new String[] {seasons}, null, null, "RANDOM() LIMIT " + count); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T17:42:43.820

这是任何 SQL 的问题，因为单引号（撇号）是文本分隔符。在您的数据中，您必须将撇号替换为另一个字符，或者将单个撇号替换为双撇号。

```
Daniel O'Neil 
```

变成

```
Daniel O''Neil 
```

[编辑] UgglyNoodles 的推荐更好。

# windows - VBScript 移动窗口

> ID：12901004
> 
> 赞同：0
> 
> 时间：2012-10-15T17:36:54.287
> 
> 标签：windows, vba, vbscript

是否可以仅使用 VBScript 移动窗口？我的电脑上有两台显示器，我想制作一个打开两个应用程序的脚本：每台显示器上一个。我正在考虑使用 SendKeys Windows Key + Left，但这似乎很难做到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:21:23.343

以下是我知道的三种方式，按优先顺序列出。

1.  如果您通过类似的方式创建应用程序`CreateObject("myApp")`并且您的应用程序具有直接移动它的方法，则可以使用它们。

2.  [使用 DynaCall](http://www.borncity.com/web/WSHBazaar1/WSHDynaCall.htm)，它应该允许您声明相关的系统 dll 以使用 API 移动窗口。这个页面[对如何实现这一点有很长的解释](http://www.microsoftfaqs.com/msg/1677124.aspx)。

    注意：如果您实际使用 VBA，则不需要 DynaCall，仅因为您将 VBA 作为标签而提及。

3.  `SendKeys`像你建议的那样使用。

# android - 在我的应用程序中构建一个后退按钮并存储编辑文本字段

> ID：12901005
> 
> 赞同：0
> 
> 时间：2012-10-15T17:36:58.310
> 
> 标签：android, android-intent

我的应用中有 2 个视图。表单输入和用于查看表单数据并确认的屏幕。用户在编辑文本字段中输入表单提交屏幕上的数据。当用户点击提交时，他们会看到他们输入的数据以及一个“返回”和“确认”按钮。我想要这样，如果用户按下，他们会返回到表单输入屏幕，他们输入的数据应该仍然在 editText 字段中。

目前，我正在使用 onClickListener 指向表单提交屏幕，但表单都是空白的。我如何将数据保存在其中？

这是 onClickListener：

```
bBack.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Intent j = new Intent(FormConfirm.this, FormCreate.class);
            startActivity(j);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:52:20.183

我不知道如何在 android 应用程序上编写代码，但我想，为什么不将它们存储到变量标志中并在编辑文本字段中调用它们？例如，如果您已经填写了表单并单击提交，您可以先在变量标志上创建一个存储数据的功能，并在表单提交中显示数据，因此当您单击返回按钮时，您可以调用您存储在变量上的值标记为edittext。

希望我的回答能给你一些启发

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T17:54:44.137

有了灵感并找到了一个可能不一定正确但有效的解决方法：) 只是将活动的 Java 代码更改为以下内容：

```
bBack.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            finish();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T17:56:48.420

如前所述，您应该以某种方式保存这些值，例如使用 SharedPreferences。

例如，当您从`Input`-form Activity 转到`Submit`-form Activity 时：

```
bSubmit.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Intent j = new Intent(FormCreate.this, FormSubmit.class);
        saveInput();
        startActivity(j);
    }
}); 
```

该方法`saveInput()`可能类似于：

```
private void saveInput() {
    EditText input = (EditText) findViewById(R.id.someId);
    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
    preferences.edit().putString("input",input.getText().toString()).commit();   
} 
```

然后，当你按下后退时，后退动作可能只是这样的：

```
bBack.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        FormConfirm.this.finish();
    }
}); 
```

这将导致当前活动退出，您之前的活动将可见。如果您想在`Input`-form Activity 启动时显示最后保存的输入，您可以简单地执行以下操作：

```
private void loadInput(){
    EditText input = (EditText) findViewById(R.id.someId);
    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
    String savedText = getString("input", "default input text");
    input.setText(savedText);   
} 
```

并在-form Activity的`onCreate`-method 中 调用该方法。`Input`

# google-chrome - 访问 upon an event in the iframe - with a chrome extension

> ID：12901006
> 
> 赞同：0
> 
> 时间：2012-10-15T17:37:00.417
> 
> 标签：google-chrome, iframe, google-chrome-extension

Using an extension, I'd like to measure the offset of an iframe (relative to the top window) when a specific event happens in it. This includes iframes of different origins.

It seems to require two things:

1.  catching the event in the iframe's own content-document
2.  finding the iframe's corresponding DOM element (`<iframe>`) in its parent window and measuring its offset

I can run a content-script in all iframes which would catch the specific event, but I fail to identify an iframe's corresponding DOM element in iframes with different origins, since in those cases I'm denied access to 'window.frameElement'.

Any ideas? I could perhaps look for an element with an 'src' attribute corresponding to 'window.location.href' as seen in the context of the iframe's content-script, but 'window.location.href' wouldn't be a unique identifier... or would it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:10:05.327

You could take the following approach:

1.  Use the `"all_frames":true` flag of `"content_scripts"` in the manifest file to execute the content script in all frames.
2.  Bind a `message` event listener which performs the logic.
3.  Bind an event listener for the trigger in question.
4.  Whenever the event in step 3 is fired, use `if (top === window)` to determine whether the we're inside the top window.

    *   If yes, we're done.
    *   If not, use `parent.postMessage({currentTotal: ... }, '*');` to pass data to the parent frame. The `message` event listener from step two should detect this event, process it, and repeat step three.

I've explained how to approach the problem. One more useful code snippet: You need to identify the source frame. To achieve that, we use the `contentWindow` property of an `<iframe>` object for comparison with the `source` property of the event object:

```
window.addEventListener('message', function(event) {
    if (top === window) {
        // do something with e.data
    } else {
        var iframes = document.getElementsByTagName('iframe');
        for (var i=0; i<iframes.length; i++) {
            if (iframes[i].contentWindow === event.source) {
                // Found frame; measure offset, and pass data to parent frame
                var data = e.data;
                e.data += iframes[i].getBoundingClientRect().top; // example
                parent.postMessage({currentTotal: data}, '*');
                break;
            }
        }
    }
}); 
```

With these hints you should be able to write the full code yourself. To measure offsets, use the [`getBoundingClientRect`](https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect) method. For completeness, I also include links to other relevant documentation: [`window.postMessage`](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage), [Content scripts (manifest)](http://developer.chrome.com/extensions/content_scripts.html#registration).

# java - 当数据写入协议缓冲区时，如何让 Java 触发 C++ 程序，反之亦然？

> ID：12901011
> 
> 赞同：1
> 
> 时间：2012-10-15T17:37:22.993
> 
> 标签：java, c++, protocol-buffers

长话短说，我有一个 Java 进程，可以从进程读取数据和向进程写入数据。我有一个 C++ 程序，它获取数据，对其进行处理，然后需要将其传递回 Java，以便 Java 可以将其写入数据库。

Java 程序从 Hadoop 中提取数据，因此一旦 Hadoop 进程启动，它就会被数据淹没，但实际处理（由 C++ 程序完成）无法一次处理所有数据。所以我也需要一种控制流量的方法。同样为了使问题复杂化（但简化我的工作），我做 Java 的东西，我的朋友做 C++ 的东西，并试图让我们的程序尽可能独立。

那就是问题所在。我发现Google协议缓冲区，在程序之间传递数据似乎很酷，但我不确定Java程序保存数据如何触发c++程序处理，然后当c++程序保存结果时，Java程序将如何被触发保存结果（这是针对一条或几条记录，但我们计划处理数十亿条记录）。

解决这个问题的最佳方法是什么？有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T17:39:45.767

最简单的方法可能是使用 TCP Socket 连接。Java 程序会在您想要完成时发送，C++ 程序会发回结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:26:07.347

由于您要扩展此解决方案，我建议使用 ZMQ。

让您的 Java 应用程序仍然从 Hadoop 中提取数据。

然后它将依次使用 PUSH 套接字将数据推出。

在这里，您将拥有尽可能多的 c++ 工作人员，他们将处理这些数据，接受作为 PULL 套接字的连接。这可以扩展到您需要的尽可能多的不同处理器/内核/等。

当每个工作人员完成后，它将通过 PUSH 套接字将结果推送到“存储”Java 程序，该程序正在接受 PULL 套接字上的信息。

它看起来[像这个例子](http://zguide.zeromq.org/page%3aall#Divide-and-Conquer)（标准的分而治之方法）

当没有任何可用的工作人员时，此过程可扩展到尽可能多的工作人员，因为您的第一个 java 程序将阻塞（但仍在处理）。只要你结束的 java 程序很快，你就会看到这个规模真的很好。

The emitting and saving program can be in the [same program](http://zguide.zeromq.org/page%3aall#Handling-Multiple-Sockets) just use a [zmq_poll](http://zguide.zeromq.org/java%3amspoller) device :)

# c - C 文件处理中的错误

> ID：12901021
> 
> 赞同：0
> 
> 时间：2012-10-15T17:37:52.047
> 
> 标签：c, file, file-handling

我正在为一个学校项目用 c 语言制作一个测验程序。我将问题和答案存储在一个文本文件中。文本文件包含 1 个问题，然后是 4 个选择和一个正确答案（每个都在一个新行中）等等。文件处理的代码是

```
#include<stdio.h>
#include<conio.h>
#include<string.h>
#include<process.h>
void main()
{
int tnum=2,mnum;
printf("Enter a file name to load the quiz from or enter dhruv.txt to load the default file\n");
printf("(For type of file and arrangement of data in it, refer to the documentation\n");
printf("WARNING: An improper quiz file may result in malfunctioning of the program.\n");
char quizfile[100];
scanf("%s",quizfile);
FILE *dj;
dj = fopen(quizfile,"r");
int test = 1;
while(dj == NULL)
{
    printf("Requested file does not exist.Please enter a valid name\n");
    scanf("%s",quizfile);
    dj = fopen(quizfile,"r");
    test++;
    if(test == 5)
    {
    exit(0);
    }
}
char line[500];
char ques[20][500],ansa[20][500],ansb[20][500],ansc[20][500],ansd[20][500],anse[20][500];
int start = 1,quesval=1,ans1=1,ans2=1,ans3=1,ans4=1,ans5=1;
while(fgets(line,sizeof line,dj) != NULL)
{
    if((start%6) == 1)
    {
        strcpy(ques[quesval],line);
        quesval++;
    }
    if((start%6) == 2)
    {
        strcpy(ansa[ans1],line);
        ans1++;
    }
    if((start%6) == 3)
    {
        strcpy(ansb[ans2],line);
        ans2++;
    }
    if((start%6) == 4)
    {
        strcpy(ansc[ans3],line);
        ans3++;
    }

    if((start%6) == 0)
    {
        strcpy(anse[ans5],line);
        ans5++;
    }

    if((start%6) == 5)
    {
        strcpy(ansd[ans4],line);
        ans4++;
    }

    start++;

}
fclose(dj);
printf("Quiz file successfully loaded\n");
printf("/t/t WELCOME TO THE QUIZ\n\n");
printf("Every team must select one of the four correct answers to the asked questions to gain points\n");
printf("Wrong answer will not be penalized\n");
for(int k =1;k<quesval;k++)
{
    int myvar;
    myvar = k%tnum;
    if(myvar == 0)
    {
        myvar = tnum;
    }
    printf("Question for TEAM %d\n\n",myvar);
    printf("%s \n A.%s B.%s C.%s D.%s\n",ques[k],ansa[k],ansb[k],ansc[k],ansd[k]);
}
getch();
} 
```

问题是

```
 if((start%6) == 0)
    {
        strcpy(anse[ans5],line);
        ans5++;
    } 
```

如果我使用它，程序会显示文件不存在，但是一旦我将其注释掉，程序就可以正常工作。我不知道错误是什么。请帮忙

编辑：我的文本文件看起来像：

```
Who is the owner
dhruv
jain
kalio
polika
dhruv
who is his friend
sarika
katrina
jen
aarushi
aarushi
where is he
home
office
college
toilet
office
where will he go
home
office
college
toilet
home 
```

**编辑** 我在 Windows 7 中使用 DOSBOX 使用 Turbo c++。脚本在上面更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:02:47.657

没有看到你的输入文件很难说，但我怀疑你的数组声明是倒退的。例如，您有：

```
 char ques[500][20]; 
```

这声明了一个包含 500 个元素的数组，其中每个元素最多可以包含 20 个字符。你可能想要：

```
 char ques[20][500]; 
```

这声明了一个包含 20 个元素的数组，其中每个元素最多可包含 500 个字符。

如果您的输入文件包含超过 20 个字符的行，那么您当前的代码可能会覆盖您的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:43:06.437

这里有几个问题，但你的直接问题是：

```
strcpy(anse[ans5],line); 
```

（以及所有其他类似的 strcpy 调用。）

您正在将行复制到从 anse[1][0] 开始的数组。如果 line 包含超过 20 个字符，它将覆盖 anse 末尾的内存。例如，如果行包含 25 个字符，您将把它放在 anse[1][0] 到 anse[1][24] 中。不幸的是 anse[1][24] 不存在，因为 anse 只有 20 个字符长。如果任何问题超过 20 个字符，您将破坏内存并可能导致崩溃。让我猜猜：问题 5 超过 19 个字符，对吧？

简而言之，您在声明中混合了行和列。我认为您希望允许 20 个问题，每个问题 500 个字符，但实际上您允许 500 个问题，每个问题 20 个字符。

下一个问题：在 C 中，数组是从零开始的，而不是从一开始的。例如，ques 中的第一个字符串是 ques[0]，而不是 ques[1]。

为了简化这一点，将二维数组视为由行和列组成的表。例如，声明一个名为 foo 的 3x4 数组：

```
char foo[3][4]; 
```

把它想象成这样：

```
 0 1 2 3
0  . . . .
1  . . . .
2  . . . . 
```

我拥有的是一个由三个字符串组成的数组，每个字符串长 4 个字符。我数组中的第一个字符串位于 foo[0]。第一个字符串的第一个字符位于 foo[0][0]。第二个字符在 foo[0][1]，第三个字符串的第二个字符是 foo[2][1]，以此类推。

要解决此问题，您的声明应如下所示：

```
char ques[20][500],ansa[20][500],ansb[20][500],ansc[20][500],ansd[20][500],anse[20][500];
int start = 1,quesval=0,ans1=0,ans2=0,ans3=0,ans4=0,ans5=0; 
```

当你让它工作时，你应该问自己为什么要测试 start 的值六次，每次通过循环时它只改变一次。这里有一个更好的解决方案。考虑一个像这样的三维数组：

```
char answers[20][500][5]; 
```

这给了你 20 个问题，每个问题有 5 个答案。

# google-apps-script - 在服务器处理程序中获取列表框文本和值

> ID：12901023
> 
> 赞同：2
> 
> 时间：2012-10-15T17:37:57.467
> 
> 标签：google-apps-script

我有以下代码，我尝试使用 addItem(text,value) 方法填充列表框以存储文本和索引，并且我想在单击列表框时重新检索两者。作为默认的 e.parameter.listObject 返回文本。反正还有价值吗？

代码如下：

```
function doGet() {
  var app = UiApp.createApplication().setTitle('New app');

  var listHandler = app.createServerKeyHandler('listSelect');
  var lb = app.createListBox(true).setId('lbColour').setName('lbColour').setVisibleItemCount(10).addClickHandler(listHandler);  

  lb.addItem("RED","100");
  lb.addItem("GREEN","010");
  lb.addItem("BLUE","001");

  // Create a vertical panel and add the grid to the panel
  var panel = app.createVerticalPanel();
  panel.setId('mainPanel');
  panel.add(lb);  
  panel.add(app.createLabel('Colour Code:'));
  panel.add(app.createTextBox().setName('colourCode').setId('colourCode'));
  panel.add(app.createLabel('Colour Name:'));
  panel.add(app.createTextBox().setName('colourName').setId('colourName'));
  app.add(panel);
  return app;
}

function listSelect(e){
  var app = UiApp.getActiveApplication();
  app.getElementById('colourName').setText(e.parameter.lbColour);
  app.getElementById('colourCode').setText(e.parameter['lbColour_Value']);
  return(app);
} 
```

感谢以下答案，这将是上述答案的更正代码。

请注意，如上所述，我们可以使用有效的分隔符将密钥存储在文本属性中，我在这里使用了“|” 这不像通常在字符串中找到“，”那样。

另请注意，原始代码的主要问题是无法将 lisbox 创建为多选，即：

1.  我们将使用“createListBox()”而不是“createListBox(true)”
2.  服务器处理程序应使用“createServerHandler”而不是“creteServerKeyHandler”创建。

最终代码应如下所示：

```
function doGet() {
  var app = UiApp.createApplication().setTitle('New app');

  var listHandler = app.createServerHandler('listSelect');
  var lb = app.createListBox().setId('lbColour').setName('lbColour').setVisibleItemCount(10).addClickHandler(listHandler);  

  lb.addItem("RED","RED|100");
  lb.addItem("GREEN","GREEN|010");
  lb.addItem("BLUE","BLUE|001");

  // Create a vertical panel and add the grid to the panel
  var panel = app.createVerticalPanel();
  panel.setId('mainPanel');
  panel.add(lb);  
  panel.add(app.createLabel('Colour Code:'));
  panel.add(app.createTextBox().setName('colourCode').setId('colourCode'));
  panel.add(app.createLabel('Colour Name:'));
  panel.add(app.createTextBox().setName('colourName').setId('colourName'));
  app.add(panel);
  return app;
}

function listSelect(e){
  var app = UiApp.getActiveApplication();
  var outpArr = e.parameter.lbColour.split('|');  
  app.getElementById('colourName').setText(outpArr[0]);
  app.getElementById('colourCode').setText(outpArr[1]);
  return(app);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T19:21:57.337

您无法检索列表框项目的文本。你能做的就是这样

像这样重新格式化您的列表项：

```
lb.addItem("BLUE","001,BLUE"); 
```

接着

```
e.parameter.lbColour.split(',')[0] 
```

将返回 001 并且

```
e.parameter.lbColour.split(',')[1] 
```

将返回蓝色

祝你好运

```
function doGet() {
  var app = UiApp.createApplication();
  var vp = app.createVerticalPanel().setId("vp");
  var lb = app.createListBox().setName("lb");
  lb.addItem("BLUE", "BLUE,001");
  vp.add(lb);

  var handler = app.createServerHandler('postFunc').addCallbackElement(vp);
  var button = app.createButton("Send").addClickHandler(handler);
  vp.add(button);

  app.add(vp);
  return app;
}

function postFunc(e){
  var app = UiApp.getActiveApplication();

  var vp = app.getElementById("vp");
  var outpArr = e.parameter.lb.split(',');
  var color = app.createLabel("color text: " + outpArr[0]);
  var number = app.createLabel("color number: " + outpArr[1]);

  vp.add(color);
  vp.add(number);

  return app;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:56:44.417

编辑 2：Thomas 的回答毕竟没有错......原始问题中使用的处理程序是问题的原因，并且多选启用也存在问题 - 请参阅最后评论（[问题 941](http://code.google.com/p/google-apps-script-issues/issues/detail?id=941)）。

因此，我删除了我的第一个答案（以使其更短），并在此处建议一种可能的解决方法，以在 listBox 上使用多项选择（经过测试且有效）

```
function doGet() {
  var app = UiApp.createApplication().setTitle('New app');

  var listHandler = app.createServerHandler('listSelect');
  var lb = app.createListBox(true).setWidth('200').setId('lbColour').setName('lbColour').setVisibleItemCount(5).addChangeHandler(listHandler);  
 var colorIndex = [];// this is the array that will hold item values values with 2 fields
  lb.addItem("RED");colorIndex.push("RED-100");// use a '-' separator to be able to split later First field-second field
  lb.addItem("GREEN");colorIndex.push("GREEN-010");
  lb.addItem("BLUE");colorIndex.push("BLUE-001");

  lb.setTag(colorIndex.toString());// store the array in the TAG
  var panel = app.createVerticalPanel();
  panel.setId('mainPanel');
  panel.add(lb);  
  panel.add(app.createLabel('Colour Code:'));
  panel.add(app.createTextBox().setWidth('500').setName('colourCode').setId('colourCode'));
  panel.add(app.createLabel('Colour Name:'));
  panel.add(app.createTextBox().setWidth('500').setName('colourName').setId('colourName'));
  app.add(panel);
  return app;
}

function listSelect(e){
  var app = UiApp.getActiveApplication();
  var codepos = [];//will get the index position of items in colorIndex
  var code = [];//array of first items found in colorIndex
  var color = [];// index of second items found in colorIndex
  var colorIndex = e.parameter.lbColour_tag.split(',');// recover the array
  for(n=0;n<colorIndex.length;++n){if(e.parameter.lbColour.match(colorIndex[n].split('-')[0]) == colorIndex[n].split('-')[0]){codepos.push(n)}};// get the position in the array
  for(n=0;n<codepos.length;++n){
  code[n] = colorIndex[codepos[n]].split('-')[1];// finally get the color code value
  color[n] = colorIndex[codepos[n]].split('-')[0];// get the color value
}  
  app.getElementById('colourName').setText(color.toString());// show the result second field
  app.getElementById('colourCode').setText(code.toString()); // show the result first field
  return(app);
} 
```

# objective-c - 加密核心数据条目

> ID：12901024
> 
> 赞同：0
> 
> 时间：2012-10-15T17:37:58.843
> 
> 标签：objective-c, ios, sqlite, core-data

我有一个关于加密和核心数据的问题。有什么方法可以加密核心数据存储中的条目/实体，以便在使用 NSFetchedResultsController 等控制器进行获取请求时对数据库中的所有信息进行加密然后解密？

我想确保在数据库上的搜索和排序等操作不会受到内容已加密这一事实的影响

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:25:29.993

CoreData 支持 Transformable 属性，允许您在数据加载到上下文时对其应用转换。这与您所说的不太一样（因为它仅逐个字段而不是整个 DB 进行转换，但您可能会发现它仍然很有用）。这适用于只需要加密某些字段（例如信用卡号）的情况

这是一个示例：[https ://artandlogic.com/2012/07/securing-your-core-data-with-transformable-attributes/](https://artandlogic.com/2012/07/securing-your-core-data-with-transformable-attributes/)

# ruby-on-rails - Rails 中的反向关联

> ID：12901026
> 
> 赞同：0
> 
> 时间：2012-10-15T17:37:59.903
> 
> 标签：ruby-on-rails, associations, redmine

现在我正在为项目管理应用程序 Redmine 编写一个插件。由于我是 Rails 新手，所以我有一个关于查询的问题。

Redmine 为我提供了一个问题模型。在我的插件中，我定义了一个附加的 IssueRates 模型，它具有以下关联：

```
class IssueRates < ActiveRecord::Base
unloadable

belongs_to :issue,
... 
```

但是，我不想将标准问题模型更改为具有`has_one association`, 以保持 redmine 代码尽可能干净。

但现在我需要这样的查询：

```
project_issues=Issue.where(:project_id => some_id)
project_issues.each do |i|
    puts i.IssueRates.amount
end 
```

由于缺少关联，这显然不起作用。有没有办法扭转这种关联？因为那时，我什至可以使用`.includes(:IssueRates)`.

如果这是不可能的，我仍然可以在单独的查询中获得 IssueRates ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:43:16.353

我想你可以这样做：

```
IssueRates.find_by_issue_id(i.id).amount 
```

这似乎比仅仅添加`has_one`到您的问题模型更多的工作。

# ruby-on-rails - 按名称在调试日志中记录每个方法调用

> ID：12901027
> 
> 赞同：3
> 
> 时间：2012-10-15T17:38:02.430
> 
> 标签：ruby-on-rails, ruby, methods

我正在尝试调试一些不起作用的测试，但我遇到了一些问题。我在运行测试并将关键消息输出到日志时跟踪 test.log 但由于所有交织的回调和钩子我不确定哪个模型中的哪个方法正在调用哪个 SQL :)

我写了一些东西来记录方法名称：

```
def log_mname
  caller[0]=~/`(.*?)'/  # note the first quote is a backtick
  Rails.logger.debug '=' * 80
  Rails.logger.debug ">> #{Time.now} - #{$1}"
  Rails.logger.debug '=' * 80
end 
```

效果很好，但是需要我添加`log_mname`到模型中的每个方法中，这是不现实的。我想要的是在我的 rails 应用程序中添加一个简单的行或块，让我基本上说“记录所有方法，因为它们被调用到调试日志中。”

我尝试`set_trace_func`在模型顶部使用 ruby​​，但它不起作用。我也希望不必为每个模型添加一些东西，而是向 test/debug.rb 环境文件或类似文件中添加一些东西。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:45:23.763

您所询问的概念称为反射；如果您有兴趣阅读更多有关它的信息。

要回答您的问题，`__method__`在您想知道它的名称的方法内返回方法名称作为符号

IE

```
$ irb
irb(main):001:0> def qwerty
irb(main):002:1> __method__
irb(main):003:1> end
=> nil
irb(main):004:0> qwerty
=> :qwerty
irb(main):005:0> 
```

这适用于 Ruby 1.8.7

## 编辑

上面是打印方法名。

为了动态显示方法调用，我将使用 ActiveSupport 的#constantize 与`set_trace_func`显示调用跟踪混合。

```
# in your test environment initializer file
require 'active_support/inflector/inflections'
MODELS_TO_WATCH = Dir.entries("#{Rails.root}/app/models/").
                      gsub(".rb", ""). # strip all extensions from filenames
                      capitalize!. # no reason for the bang, just saving space
                    # constantize # make "User" string into User model, for e.g.
# if you constantize, remove `to_s` from `classname` in the proc below
# the version that worked for me was without constantizing but I figure both 
# variations yield the same result

class_eval do |c| # Replace this with a "class DummyClass" for proper sandboxing
  set_trace_func proc { |event, id, classname|
    if event == "call" && MODELS_TO_WATCH.include?(classname.to_s)
      puts "called #{classname}'s #{id}"
    end
  }
end 
```

**笔记！** `set_trace_func`是一个*水蛭*函数。它会锁定到您的 Ruby 进程，直到该进程被杀死（IRB 的许多死亡都可以证明这一点）。我还没有找到撤消的方法`set_trace_func`。如果没有引入条件，它的打印效果会很糟糕；这可能看起来像错误，但事实并非如此。

这就是我建议将其放入您的测试初始化​​程序的原因；最*有可能*在一个虚拟班级！这样，当您在开发、生产或您设置的任何其他环境中重新启动 Rails 应用程序时，这种 hack 不会影响它。

必须在类上下文中进行评估。我发现它是否在实例上下文中进行评估，因此`instance_eval`，它会打印除被调用函数之外的 Ruby 程序执行过程中发生的每个事件。

# c - 链接错误 - 使用 nm 修复

> ID：12901030
> 
> 赞同：0
> 
> 时间：2012-10-15T17:38:11.900
> 
> 标签：c, unix, gcc, linker, nm

我有一个链接错误，我应该使用`nm`Unix 上的命令来修复它。

如果我有以下链接错误：`undefined reference to 'program_name'`，并且`nm`在该目标文件上运行时，`program_name`符号在符号表中显示如下：`U program_name`。

我知道`program_name`是未定义的，并且定义在另一个需要包含在原始目标文件中的目标文件中。我的问题是：我怎样才能找到它是哪个目标文件？那可能吗？我在一个目录中有一堆目标文件，它就是其中之一。有太多的尝试所有这些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T17:45:12.980

是的。`U`您将`T`在已定义符号的目标文件中找到一个（用于“文本段”），而不是输出中的 a 。像这样的东西应该可以工作（在bash中）：

```
for f in *.o; do if (nm "$f" | grep 'T program_name'); then echo "$f" matches; fi; done 
```

在这里，我遍历了所有 *.o 文件，并且无论哪个定义了符号，都会打印出它们的文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T17:39:33.070

你可以这样做：

```
$ nm *.o 
```

在输出中查找`program_name`（假设您的目标文件有`.o`扩展名）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T17:48:12.210

尝试`nm -o *.o |grep program_name`查找符号类型为“T”的 .o 文件（假设它是函数名）。`-o`nm的选项在每行前面加上文件名。根据您的操作系统， nm 可能有也可能没有此选项（也可能有`-A`），因此请检查您的联机帮助页。如果它根本不存在，那么您需要编写一个 shell for 循环，例如

```
for obj in *.obj; do 
  echo $obj:
  nm $obj | grep program_name
done` 
```

# iphone - SEGV_ACCERR 在 dealloc 中调用 [[NSNotificationCenter defaultCenter] removeObserver:self]

> ID：12901031
> 
> 赞同：2
> 
> 时间：2012-10-15T17:38:12.710
> 
> 标签：iphone, objective-c, ios, foundation

我真的不知道这是怎么发生的。我有一个使用 ARC 的应用程序。我的大多数视图控制器都注册了 NSNotifications。所有注册都在主线程上完成。

当发生内存警告时，用于每个不可见选项卡的导航控制器为 nil'd 并因此被释放。在这种情况下，一个导航控制器及其视图控制器被释放，并且视图控制器在其 dealloc 方法期间使应用程序崩溃。

具体来说，它正在从所有 NSNotificationCenter 通知中删除自己。

dealloc 方法也在主线程中运行，所以我看不出这怎么可能是线程问题。

崩溃的线是`-[SearchTabViewController dealloc] (SearchTabViewController.m:44)`

代码中的那一行是：`[[NSNotificationCenter defaultCenter] removeObserver:self];`

实际的崩溃原因似乎是`objc_msgSend`引用了一个已释放的对象。

问题在于这里只发送了 2 条消息，发送`defaultCenter`给`NSNotificationCenter`类的消息（它永远不会是无效引用，因为它是一个类）和`removeObserver:`发送给默认中心对象的消息（也永远不能被释放，因为它是单例）。

唯一引用的其他对象是 self，它还不能被释放，因为我们仍然在那个对象的“dealloc”方法中......基本上这个崩溃不应该发生。

我在这里缺少什么吗？下面是崩溃日志的相关部分：

* * *

```
Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0xe0000008
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib                     0x000035b0 objc_msgSend + 16
1   Anghami Beta                        0x000c7473 -[SearchTabViewController dealloc] (SearchTabViewController.m:44)
2   CoreFoundation                      0x00003311 CFRelease + 101
3   CoreFoundation                      0x0000d95d -[__NSArrayM dealloc] + 141
4   Anghami Beta                        0x0033e73f -[EX2NavigationController .cxx_destruct] (EX2NavigationController.m:51)
5   libobjc.A.dylib                     0x00007f3d object_cxxDestructFromClass(objc_object*, objc_class*) + 57
6   libobjc.A.dylib                     0x000050d3 objc_destructInstance + 35
7   libobjc.A.dylib                     0x000053a7 object_dispose + 15
8   UIKit                               0x000cec89 -[UIViewController dealloc] + 1181
9   CoreFoundation                      0x00003311 CFRelease + 101
10  CoreFoundation                      0x0000da13 -[__NSArrayI dealloc] + 79
11  libobjc.A.dylib                     0x00005489 (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 169
12  CoreFoundation                      0x00005441 _CFAutoreleasePoolPop + 17
13  CoreFoundation                      0x00095f41 __CFRunLoopRun + 1297
14  CoreFoundation                      0x00008ebd CFRunLoopRunSpecific + 357
15  CoreFoundation                      0x00008d49 CFRunLoopRunInMode + 105
16  GraphicsServices                    0x000052eb GSEventRunModal + 75
17  UIKit                               0x00057301 UIApplicationMain + 1121
18  Anghami Beta                        0x0000334d main (main.m:17) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:56:20.830

所以事实证明，崩溃日志具有误导性。当连接到启用了僵尸对象的调试器时，我最终能够实现它。崩溃的实际来源是一个加载器对象，它将此控制器作为它的委托，在控制器被释放后试图调用其中一个委托方法。

现在在 dealloc 中，我将加载程序的委托归零并取消加载（如果激活），瞧，不再崩溃。

* * *

此外，值得注意的是，这种崩溃拒绝在模拟器中发生，但几乎每次都在设备上发生。因此，在追踪奇怪的内存错误时，不幸的是，Zombies 工具并不总是一个可行的工具，因为它需要应用程序在模拟器中运行。

所以下一个最好的事情是去编辑方案并在那里启用僵尸对象，然后在设备上构建和运行并等待它崩溃。您不会以这种方式获得完整的保留/发布历史记录，但在这种情况下，它可以提供足够的信息来追踪原本难以捉摸的问题。

# intersystems-cache - 不使用 %OpenId 的对象脚本查询

> ID：12901035
> 
> 赞同：1
> 
> 时间：2012-10-15T17:38:28.030
> 
> 标签：intersystems-cache, objectscript

我将如何在对象脚本而不是 SQL 中编写此查询？

```
Query GetSessionIdByUserName(UserName As %String) As %SQLQuery [ Private ]
{
    SELECT %ID from Sample.Session
    WHERE UserName = :UserName
} 
```

到目前为止，我似乎在文档中找到的只是 %OpenId

```
##class(Sample.Session).%OpenId(id) 
```

当 id 未知且需要先找到时会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:49:32.307

没有内置方法可以执行诸如通过用户名获取会话 ID 之类的操作。您需要自己编写它们，而 SQL 通常是最好的方法。不过，您可以将 SQL 包装在方法中，而不是查询中。

```
Method GetSessionIdByUserName(UserName As %String) As Sample.Session [ Private ]

{
    &SQL(SELECT %ID INTO :ID from Sample.Session
    WHERE UserName = :UserName)

    Q ##class(Sample.Session).%OpenId(ID)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:33:56.773

如果您坚持不使用 SQL，则需要执行以下操作：

```
Method GetSEssionIdByUserName(UserName as %String) As Sample.Session [ Private ]
{
   s c=$O(^Sample.SessionD("")),f=""
   while ((f="") && (c'="")){
       s p=##class(Sample.Session).%OpenId(c)
       if $isobject(p){
            s:p.UserName=UserName f=c
       }
       //alternatively if you're sure about the global structure, something like this:
       //assume the Username is stored at position 3 for a sec:
       //s:$LG(^Sample.SessionD(c),3)=UserName f=c

       s c=$O(^Sample.SessionD(c))
   }
   q ##class(Sample.Session).%OpenId(f)
} 
```

你可以让它更聪明，只打开一次会话对象，但我建议不要这样做。它可能看起来很花哨，但两年后你不会知道你在做什么。所以我建议使用建议的嵌入式 sql psr，它更具可读性（和可维护性）。

# php - 检索“名称='field_name'”

> ID：12901039
> 
> 赞同：-1
> 
> 时间：2012-10-15T17:38:46.923
> 
> 标签：php, regex, preg-match-all

> **可能重复：**
> [获取 HTML 表单字段名称](https://stackoverflow.com/questions/5855833/get-html-form-field-names)

我有一个非常大的表单，我正在寻找一种快速的方法来检索所有 html 表单字段名称的名称，例如：

```
<textarea class="txt" type="textarea" name="txt_fahe" rows="2" cols="20">
<select class="dropd" name="sel_mob4" size="1">
... 
```

关于如何表达的任何提示？它应该支持“和”

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:42:44.450

尝试使用 JavaScript：`$('form').serialize()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T17:44:13.257

使用正则表达式模式

```
<(?:textarea|select|input)\b[^>]*\sname\s*=\s*(['"])(.*?)\1 
```

# php - PHP 中 ssh2:// 可以进行哪些文件操作

> ID：12901040
> 
> 赞同：1
> 
> 时间：2012-10-15T17:38:55.087
> 
> 标签：php, file-io, sftp, glob

我正在重写一个在本地服务器上处理和排序文件的函数，该函数可以在通过 ssh 连接到达的远程服务器上执行此操作。

现有系统使用 pecl ssh2 库来获取特定文件，例如：

```
if ($stream = @fopen("ssh2.sftp://$sftp/$filename", "r")) {
//do stuff...
} 
```

但我还不知道文件名。我在本地使用这个工作

```
$file_path =  ABSOLUTE_PATH . UPLOAD_URL . $importfolder . '/';
$file = '*.xml';
$files = glob($file_path.$file); 
```

我无法让 glob() 通过 ssh 服务器工作

```
$files = glob("ssh2.sftp://$sftp/*.xml"); 
```

（尽管目录中有许多 xml 文件，但总是返回空白（sftp 连接到单个目录）。

我怎样才能做到这一点？我可以在这里使用像 glob() 这样的函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:43:40.830

您可以简单地使用[ssh2 功能](http://php.net/ssh2)...

IE。

```
$session = ssh2_connect('some.server', 22);
ssh2_auth_password($session, 'username', 'password');
$stream = ssh2_exec($session, 'ls -la /some/path');
stream_set_blocking($stream, true);
echo "list of files: " . stream_get_contents($stream); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:02:05.023

你可以这样做：

```
<?php
include('Net/SFTP.php');

$sftp = new Net_SFTP('www.domain.tld');
if (!$sftp->login('username', 'password')) {
    exit('Login Failed');
}

print_r($sftp->nlist()); // == $sftp->nlist('.')
print_r($sftp->rawlist()); // == $sftp->rawlist('.')
?> 
```

（使用[phpseclib，一个纯 PHP SFTP 实现](http://phpseclib.sourceforge.net/)）

# css - 表格单元格 div 的 left/margin-left 值

> ID：12901041
> 
> 赞同：2
> 
> 时间：2012-10-15T17:38:55.997
> 
> 标签：css, margin, css-tables, leftalign

我有这个html：

```
<div id="main">
   //contents
</div> 
```

这个CSS：

```
#main {
   padding:10px;
   margin-top:5px;
   display:table-cell;
   font-family:Calibri;
   font-size:25px;
   background-color:#50aafb;
} 
```

我有 javascript 来计算将`main`div 移动到左边/左边距的距离。div没有移动，`display:table-cell`但我需要它来做其他事情......

**我该如何解决这个问题？**

**更新：http: [//jsfiddle.net/yueCM/](http://jsfiddle.net/yueCM/)**

**更新 2：** Javascript：

```
$(window).load(function() {
   var l = ( $(document).width() - $('#main').width() ) / 2;
   $('#main').animate({marginLeft:l}, 200); 
}); 
```

**解决方案（对我来说）：** 更改`table-cell`为`table`.

**解决方案（由@Sparky672 发现）：** [https ://stackoverflow.com/a/2986792/594235](https://stackoverflow.com/a/2986792/594235)

将 div包装`table-cell`在另一个 div 中（`block`例如显示）并将 JS 应用于该 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:28:46.470

使用`inline-block`代替`table-cell`：[**演示**](http://jsfiddle.net/gionaf/Rb3gp/)

`#main`只是包装，不会受伤。浏览器支持类似：[`inline-block`](http://caniuse.com/#feat=inline-block), [`table-cell`](http://caniuse.com/#feat=css-table).

对于 IE<8 支持，添加：

```
*zoom: 1;
*display: inline; 
```

# ios - 在 UIviewController 中的两个视图之间切换

> ID：12901044
> 
> 赞同：0
> 
> 时间：2012-10-15T17:39:09.093
> 
> 标签：ios, uiview, uiviewcontroller, ios6

实现的解决方案在 IOS4 中运行良好，但现在在 IOS6 中它拒绝显示分配的视图（我只看到屏幕上的窗口）。

我有一个名为 MainController 的 ViewController。它有两个 UIView 类型的 IBOutlets。一种称为 PortraitView，一种称为 LandscapeView。

在 MainController viewWillAppear 中，我将视图指定为 PortraitView。

```
self.view = portraitView; 
```

然后方向发生变化，我将视图分配为景观视图。

我的问题是，将它们分配给 viewControllers 视图后，似乎没有任何视图出现。如前所述，这在以前的 IOS 版本中运行良好。

我已经仔细检查了视图位置没有改变，并且 alpha 和 hidden 属性是正确的。出口也绑定到 xib 对象。

有人知道可能出了什么问题吗？添加我的 xib 文件不是围绕故事板构建的，而是围绕“旧” ibuilder 设置构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:57:53.637

来自 UIViewController 文档：

```
shouldAutorotateToInterfaceOrientation:
Returns a Boolean value indicating whether the view controller supports the specified orientation. (Deprecated in iOS 6.0\. Override the supportedInterfaceOrientations and preferredInterfaceOrientationForPresentation methods instead.) 
```

如果您使用 shouldAutorotateToInterfaceOrientation 来了解旋转发生的时间，您可能需要阅读 iOS6 中自动旋转的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:13:25.290

我认为 viewWillAppear 在设置视图的过程中可能为时已晚。尝试在控制器的 init 方法或 viewDidLoad 中执行此操作，看看是否有效。

但是，您可能需要查看 Apple 文档中 View Controller Programming Guide 中的“Creating an Alternate Landscape Interface”部分，了解另一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T11:30:20.483

我现在有点尴尬。原来我忘了@syntezise 我的观点。这导致视图自动释放并且没有显示在我的主控制器中。

我不知道为什么它在 IOS6 之前有效。

# oracle - OCIEnvCreate 失败并返回代码 -1 但错误消息文本在 ODP.net 中不可用

> ID：12901045
> 
> 赞同：5
> 
> 时间：2012-10-15T17:39:10.423
> 
> 标签：oracle, odp.net

我正在尝试研究 ORP.net 并查看[这篇关于*Deploying ODP.NET with Oracle Instant Client*](http://alderprogs.blogspot.com/2009/04/deploying-odpnet-with-oracle-instant.html)的文章。如文章所述，我已经下载并复制了项目中的所有 DLL，但是在测试步骤中，构建应用程序时出现以下错误：

```
OCIEnvCreate failed with return code -1 but error message text was not available 
```

我正在使用`oraclexe`并且我有一个 Oracle 客户端。我已为经过身份验证的用户授予完全权限。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T15:03:53.160

尝试连接到 Oracle 数据库时，您会收到以下错误：

> OCIEnvCreate 失败，返回码 -1，但错误消息文本不可用

原因：

1.  您在 Windows 7 上使用不受支持的 Oracle 客户端版本（低于 11.2）。

2.  以前安装的 Oracle 客户端的 DLL 已留在系统上，从而导致冲突。

解决方案：

1.  安装受支持的 Oracle 客户端版本。

2.  在本地机器上搜索“OCI.DLL”。如果您在`ORACLE_HOME`重命名或删除它以外的任何位置发现此文件的任何实例。如果有疑问，请卸载 Oracle 客户端，然后再次执行搜索。剩下的任何东西都是罪魁祸首。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-26T08:56:08.520

对我有用的是设置`ORACLE_HOME`为`oracle\client\your_version\home1`而不是`oracle\client\your_version\home1\BIN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T17:20:37.683

重新安装 Oracle 并`ORACLE_HOME`使用新的安装文件夹更新环境变量对我有用。在再次尝试您的应用程序之前，不要忘记回收您的应用程序池。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-09T08:36:42.473

尝试将 Power BI 连接到 Oracle 数据库时，我也遇到了同样的问题。

我安装了 2 个版本的 Oracle 客户端。11.2 和 10.2。当我卸载旧版本时，它就像一个魅力。

需要注意的一点是，在 Power BI 中，当连接到 oracle 数据库时，它要求我提供服务器。但是我期望输入的是我的 tnsnames.ora 文件中的连接名称 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-08T15:53:06.047

我还必须为 x86 和 x64 应用程序创建符号目录链接。我必须采取的步骤如下：

1.  确保 NET MANAGER 可以连接到 Oracle。
2.  mklink /DC:\Windows\System32\orcl
3.  mklink /DC:\Windows\SysWoW64\orcl
4.  将 ORACLE_HOME 的环境变量设置为 C:\windows\system32\orcl
5.  将 C:\windows\system32\orcl\bin 添加到您的 PATH
6.  直到我重新启动计算机后它才起作用

# linq - IQueryable 上的 SelectMany 忽略条件？

> ID：12901060
> 
> 赞同：0
> 
> 时间：2012-10-15T17:40:14.000
> 
> 标签：linq, entity-framework, iqueryable, lambda

我正在尝试使用 SelectMany 来评估带有条件的第一个查询，根据这些结果执行另一个查询。我被告知 SelectMany 应该能够做到这一点。我遇到的问题是 SelectMany 似乎忽略了第一个 lambda 表达式中的条件。我的问题可能与第一个表达式有关，但我不太确定。任何想法我做错了什么。

第一的

```
 //get source based on user and active flag
  var query = _sourceRepository.GetTable().Where(s => s.ActionItemStates.Any(ais => ais.UserId == user.Id && ais.IsActive == active)); 
```

第二 - 忽略第一个条件

```
var queryActionItems = query.SelectMany(x => x.ActionItemStates).OrderBy(x => x.ActionItem.SortOrder); 
```

![在此处输入图像描述](../Images/ac5353c26f4d19081394268e9bfa9fd4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:47:45.333

好吧，您的第一个查询并没有断言所有`ActionItemStates`用户ID 和 IsActive 都为真。

这只是意味着：在至少一个满足我的条件的*地方*选择`Sources`我。 *`ActionItemState`*

 *但是在第二个查询中，`ActionItemStates`不再提交您的条件：您只是`ActionItemStates`从`Sources`第一个查询中选择的所有内容中提取。

第一个查询在 之间进行选择`Sources`，而不是在 之间进行选择`ActionItemStates`。

现在，这只是解释为什么它不起作用，真正的答案需要您清楚地解释您想要检索的内容！*

# java - 整数表示的布尔值列表的逻辑析取

> ID：12901065
> 
> 赞同：-7
> 
> 时间：2012-10-15T17:40:54.030
> 
> 标签：java, arraylist, compare

我有两个数组列表：a1 = {1, 0, 0, 1, 0, 0,} 和 a2 = {0, 1, 1, 0, 0, 0}。我需要比较两个数组列表的元素，以便得出 a3 = {1, 1, 1, 1, 0, 0}。

a3 基于逻辑析取运算，*如果至少有一个操作数为真，则它产生一个真值。*

在这里需要帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:43:54.807

您可以编写一个简单的 for 循环，遍历两个数组，然后“或”两个值，然后您就完成了...

最好在开始之前检查两个数组的长度相同...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T17:51:13.647

可能会有更好的解决方案，但以下应该对您有用：

```
public static void main(String[] args) {
        Integer[] a = new Integer[] { 1, 0, 0, 1, 0, 0 };
        List<Integer> a1 = Arrays.asList(a);
        Integer[] b = new Integer[] { 0, 1, 1, 0, 0, 0 };
        List<Integer> a2 = Arrays.asList(b);
        List<Integer> a3 = new ArrayList();
        for (int i = 0; i < a1.size(); i++) {
            a3.add(a1.get(i) | a2.get(i));
            System.out.print(a3.get(i));
        }
    } 
```

输出：

```
111100 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T17:46:15.303

假设 a1 和 a2 具有相同的长度并且它们只包含 1 或 0 的元素：

```
public static ArrayList<Integer> LogicalDisjunction(ArrayList<Integer> a1, ArrayList<Integer> a2) {
    Assert(a1.length == a2.length);

    ArrayList<Integer> a3 = new ArrayList<Integer>();

    for (int i = 0; i < a1.length; i++) {
        if ( ( a1.get(i) == 1 ) || ( a2.get(i) == 1) ) {
            a3.add(1);
        } else {
            a3.add(0);
        }
    }
    return a3;
} 
```

# python - 美汤，html表格解析

> ID：12901066
> 
> 赞同：4
> 
> 时间：2012-10-15T17:41:01.277
> 
> 标签：python, beautifulsoup, html-table, html-parsing

我目前在尝试将表解析为数组时遇到了一些问题。

我有一个简单的表（[HERE](http://jsfiddle.net/575sW/ "这里")），我需要用 BS4 对其进行解析并将单元格内容放入一个数组中。让事情变得困难的是，单元格不包含文本，而是包含具有以下标题的图像：“确认”或“站点” - 这只是用户权限的东西。 **[我正在跳过包含复选框的第一行，我可以毫无问题地提取这些复选框]**

如果您查看上面的小提琴，我需要做的就是以这样的方式解析它，使结果数组变为：

```
Array1[0] = User1,Confirm,Confirm,Site,Confirm
Array1[1] = User2,Confirm,Confirm,Confirm,Confirm
Array1[2] = User3,Confirm,Confirm,Confirm,Confirm
Array1[3] = User4,Confirm,Site,Site,Confirm 
```

然后我可以随心所欲地做。另一个复杂因素是有时行数会有所不同，因此脚本应该能够适应这一点并从表中递归地创建数组。

目前 StackOverflow 是我唯一的希望。过去 10 个小时我自己都在做这件事，但几乎没有成功，坦率地说，我已经失去了希望。最接近我得到的东西是提取封闭的标签，但由于某种奇怪的原因无法进一步解析，也许是 bs4 的嵌套限制？请任何人看看，看看他们是否能找到这样做的方法？或者至少解释一下如何到达那里？

**var 解释： rightml - 餐桌上的汤。**

```
allusers = []
rows = rightml.findAll('tr')
for tr in rows:
    cols = tr.findAll('td')
    for td in cols:
        if (td.find(title="Group")) or (td.find(title="User")):
            text = ''.join(td.text.strip())
            allusers.append(text)
print allusers

gifrights = []

rows7 = rightml.findAll('td')
#print rows7
for tr7 in rows:
    cols7 = tr7.findAll('img')
    for td7 in cols7:
        if (td7.find(title="Confirm")) or (td7.find(title="Site")):
            text = ''.join(td7.text.strip())
            text2 = text.split(' ')
            print text2
            gifrights.append(text2) 
```

我可以用这个代码离开..但我给了它 ol' 大学尝试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T18:09:00.093

像这样的工作：

```
rows = soup.find('tbody').findAll('tr')

for row in rows:
    cells = row.findAll('td')

    output = []

    for i, cell in enumerate(cells):
        if i == 0:
            output.append(cell.text.strip())
        elif cell.find('img'):
            output.append(cell.find('img')['title'])
        elif cell.find('input'):
            output.append(cell.find('input')['value'])
    print output 
```

这将输出以下内容：

```
[u'Logged-in users', u'True', u'True', u'True', u'True']
[u'User 1', u'Confirm', u'Confirm', u'Site', u'Confirm']
[u'User 2', u'Confirm', u'Confirm', u'Confirm', u'Confirm']
[u'User 3', u'Confirm', u'Confirm', u'Confirm', u'Confirm']
[u'User 4', u'Confirm', u'Site', u'Site', u'Confirm'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T20:05:38.020

我认为在行上使用列表理解会更快。

```
rows = soup.find('tbody').findAll('tr')

for i in rows[1:]: # the first row is thrown out
    [j['title'] for j in i.findAll('img')] 
```

这给了你

```
['User', 'Confirm', 'Confirm', 'Site', 'Confirm']
['User', 'Confirm', 'Confirm', 'Confirm', 'Confirm']
['User', 'Confirm', 'Confirm', 'Confirm', 'Confirm']
['User', 'Confirm', 'Site', 'Site', 'Confirm'] 
```

您可以使用嵌套列表推导减少更多步骤：

```
# superpythonic
[[j['title'] for j in i.findAll('img')] for i in rows[1:]]

# all together now, but not so pythonic
[[j['title'] for j in i.findAll('img')] for i in soup.find('tbody').findAll('tr')[1:]] 
```

您实际上并不需要 User#，因为 user# 是索引号 + 1。

```
[[j['title'] for j in i.findAll('img') if j['title'] != 'User'] for i in rows[1:]] 
```

但是，如果你 - 必须 - 有一个......

```
for i in xrange(len(users)):
    users[i].append("User " + str(i+1)) 
```

但是，如果您坚持这样做，我会使用 a`namedtuple`作为数据结构而不是列表。 [命名元组](http://docs.python.org/library/collections.html#collections.namedtuple)

```
from collections import namedtuple
# make these actual non-obfuscated names, not column numbers
User = namedtuple('User', ('num col_1 col_2 col_3 col_4') 
```

然后，一旦你有一个名为 User 1 as 的 namedtuple 实例`user`，你就可以...

```
>>> user.num
... 1
>>> user.col_1
... 'Confirm'
>>> user.col_2
... 'Confirm'
>>> user.col_3
... 'Site'
>>> user.col_4
... 'Confirm' 
```

# c++ - 全局变量和链接器错误

> ID：12901075
> 
> 赞同：2
> 
> 时间：2012-10-15T17:42:00.000
> 
> 标签：c++

我使用 OpenGL 用 C++ 编写了一个简单的程序。我需要的是在两个文件（*main.cpp*和*funcs.cpp* ）中有几个全局变量，它们将保存相同的值。当我尝试在*funcs.h*（也包含在*main.cpp*中）中声明这些变量时，我收到了这个错误：

```
1>main.obj : error LNK2005: "int myVariable" (?myVariable@@3HA) already defined in funcs.obj
1>Path to my program : fatal error LNK1169: one or more multiply defined symbols found 
```

这很明显，因为它会在 funcs.cpp 和 main.cpp 中创建变量。当我尝试以这种方式声明变量时：

```
//funcs.cpp
int myVariable;

//main.cpp
int myVariable; 
```

而且它们都是全球性的，我得到的错误与上面完全相同。我感兴趣的是这两个变量在相反的文件中都不可见，那么为什么使用同名的变量是错误的呢？据我所知，没有可能`myVariable`从 main.cpp 引用 funcs.cpp 和反向。我的第二个问题是 - 解决我的问题的最佳方法是什么，因为我所做的只是重命名了其中一些变量（其中有很多）并在 funcs.cpp 中添加函数，就像`setNewValue(int newValue)`我可以从 main.cpp 调用一样但说实话 - 我并不为此感到自豪。

我使用 Microsoft Visual Studio 2012、C++/OpenGL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T17:44:31.810

使用 C++：

*   如果您尝试在两个文件之间*共享*全局变量，请在其中一个文件中声明它，例如*main.c*，就像您现在所做的那样，并在另一个文件中将变量声明为`extern`. 这样，变量已经在一个文件中声明，同一个变量可以在其他文件中使用，并且该变量的多个定义不会有问题。

*   如果要在每个文件中使用同名的全局变量，以使文件*不共享*该变量，则使用*匿名命名空间*来限制变量的可见性：

    ```
    namespace
    {
        int myVariable;

        // ... 
    ```

**Standard C**：为了完整起见，如果你使用的是标准 C，而不是使用命名空间来限制变量的可见性，你可以使用`static`关键字：如上，如果你想使用同名的全局变量在每个文件中，并且您*不*希望文件*共享*该变量，那么您需要将它们声明为`static`. 这限制了它们对当前文件的可见性。

在 C 中共享全局 using 的`extern`工作方式类似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T17:44:20.360

默认情况下，全局范围内的变量可用于所有其他翻译单元；其他翻译单元只需要使用`extern int myVariable`来访问该全局变量。因此，通常，要创建一个对每个单元可见的全局变量，您将`extern`声明放在头文件中，并将变量声明本身放在一个`.c`/`.cpp`文件中。

如果要使变量只能在该文件中访问，请`static`在全局范围内声明它：

```
static int myVariable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T17:44:48.910

这是不合法的，因为某些假设的第三个文件可能会`myVariable`使用`extern`声明进行访问。那时，编译器将不知道该`extern`声明是指 funcs.cpp 中的变量还是 main.cpp 中的变量。

# firefox-addon - 在 Firefox 插件中访问历史记录

> ID：12901076
> 
> 赞同：5
> 
> 时间：2012-10-15T17:42:01.467
> 
> 标签：firefox-addon, firefox-addon-sdk, browser-history

我正在使用插件生成器开发 Firefox 插件。我想定期扫描浏览器的历史......整个历史。我正在寻找像[chrome's history api](http://developer.chrome.com/extensions/history.html "chrome的历史API")这样的功能。似乎[window.history](https://developer.mozilla.org/en-US/docs/DOM/window.history "窗口历史")仅限于会话历史记录。有什么帮助吗？我要疯了，想弄清楚这一点。[像历史导出](https://addons.mozilla.org/en-US/firefox/addon/history-export/?src=api)这样的插件必须做这样的事情，但我不能立即理解他们的代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T00:48:30.780

您需要访问 xpcom 服务[nsIBrowserHistory](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIBrowserHistory)，这里有一些适用于 SDK 的示例代码：

[https://builder.addons.mozilla.org/package/157396/latest/](https://builder.addons.mozilla.org/package/157396/latest/)

places api 有点冗长，MDN 上有大量示例：

[https://developer.mozilla.org/en-US/docs/Querying_Places](https://developer.mozilla.org/en-US/docs/Querying_Places)

这里还有一个由 Mozilla 社区成员开发的模块，它提供了一些抽象：

[https://github.com/autonome/Jetpack-Modules/blob/master/places.js](https://github.com/autonome/Jetpack-Modules/blob/master/places.js)

我不确定上述模块是否已经针对最新版本的 Firefox 和 SDK 进行了测试。

# download - JSF 1.2 与特立尼达 - 使用 fileDownloadActionListener

> ID：12901078
> 
> 赞同：2
> 
> 时间：2012-10-15T17:42:20.890
> 
> 标签：download, jsf-1.2, trinidad

我在我的应用程序中使用 DownloadFile 侦听器，如下所示：

```
<tr:commandButton value="Say Hello">
     <tr:fileDownloadActionListener filename="hello.txt"
         contentType="text/plain; charset=utf-8" method="#{bean.sayHello}"/>
</tr:commandButton> 
```

“方法”是将用于下载文件内容的方法。该方法有两个参数，一个 FacesContext 和一个 OutputStream。

我在应用程序的两个不同位置使用此侦听器。虽然首先 outputStream 是 XMLOutput 格式 - 下载不起作用第二个地方我使用这个监听器 outputSteam 是其他格式并且下载过程有效。

我的问题是 JSF/Trinidad 如何决定 outputStream 格式，如果这实际上是下载不起作用的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:14:37.920

第二个问题是我使用了我尝试使用 PPR 的文件下载侦听器 - 内置特立尼达 Ajax。显然这种混合不起作用。所以我删除了ppr。

如果有人知道如何混合它们或者可以解释为什么它们不能一起工作，我会很高兴理解。

谢谢。

# phpmailer - phpmailer 在本地主机上工作正常，但作为服务器在哪里

> ID：12901083
> 
> 赞同：1
> 
> 时间：2012-10-15T17:42:41.030
> 
> 标签：phpmailer

PHPmailer 在 localhost 中工作正常，但在服务器上显示 SMTP 错误，以前它工作但很好，但最近它不工作。这个问题出现在我所有的 cPanel 中，可能是经销商帐户服务器问题吗？我正在使用下面的代码，我收到如下错误：SMTP 错误：无法验证。

```
function mail_sending($to_address, $to_name, $title_tag, $subject_tag, $mail_body) 
{
    $mail = new PHPMailer();
    //End Code for adding a Page
    $mail->IsSMTP(); // telling the class to use SMTP
    $mail->SMTPAuth = true;                    // enable SMTP authentication
    $mail->SMTPSecure = "ssl";                   // sets the prefix to the servier
    $mail->Host = "myhost.com";        // sets  the SMTP server
    $mail->Port = 465;                     // set the SMTP port
    $mail->Username = "admin@myhost.com";   // username
    $mail->Password = "password";

    $mail->SetFrom('admin@myhost.com', $title_tag);

    $mail->Subject = $subject_tag;

    //End Attachments
    //Start code for sending a html Body
    $mail->IsHTML(true);
    $mail->Body = $mail_body;
    //End code for sending a html Body
    $mail->AltBody = "To view the message, please use an HTML compatible email viewer!"; 
    $mail->AddAddress($to_address, $to_name);

    $mail->Send();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:44:56.270

从错误消息看来，本地服务器在让您发送任何邮件之前需要**身份验证信息。**

您可以像这样指定所述信息：

```
$mail->SMTPAuth = true; // turn on SMTP authentication
$mail->Username = “email@domain.com”; // SMTP username
$mail->Password = “password”; // SMTP password 
```

`username`并且`password`应该是您从托管服务提供商那里获得的关于 smtp 使用的信息，我相信他们有常见问题解答或可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:49:28.187

确保在您的服务器中启用了 OpenSSL：

```
1\. Login through WHM with your root account;
2\. Select or search for "EasyApache (Apache Update)";
3\. Select "Start customizing based on profile";
4\. Select "Next step";
5\. Select "Next step";
6\. Select "Next step";
7\. Select "Exhaustive Options List";
8\. Select "OpenSSL";
9\. Select "Save and Build" and choose "Yes" in the following questions. 
```

更多信息：[http ://forums.cpanel.net/f5/enable-php-openssl-machine-whm-cpanel-222991.html](http://forums.cpanel.net/f5/enable-php-openssl-machine-whm-cpanel-222991.html)

# database - CSV 到数据库表的转换

> ID：12901088
> 
> 赞同：0
> 
> 时间：2012-10-15T17:42:49.950
> 
> 标签：database, csv

我有一个 CSV 文件，我需要将数据从 CSV 插入数据库。问题很简单，但我想知道还有什么好方法可以做到。让我从我如何处理它开始：

1.  我有一个 CSV 文件。我将其转换为 Java 集合。
2.  我在这里有一个映射 xml。它保存 CSV 列和表列之间的关联。

例如，我在 xml 中的标签是

```
<table name="CustInfo">
  <column srcName="Cust_Name"  tarGetName="CustName"></column>
</table> 
```

现在，我将解析 xml 并`srcName`从 CSV 中获取它的值并进行插入查询，从而插入数据。

如果您有任何解决方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:02:35.563

### 使用 SQLite3 导入 CSV

假设您已经定义了表格，您可以直接导入 CSV。例如：

```
# Make sure your commands are left-aligned. Spaces before
# dot-commands are a syntax error.
echo '
.mode csv
.import infile.csv your_table' \
| sqlite3 your_database.sqlite3 
```

如果您使用的是其他数据库，则步骤类似，但具体语法显然会有所不同。

# sql-server - apex oracle：我正在编写存储过程。sp_OACreate 和 E_OAError 的交替是什么？

> ID：12901089
> 
> 赞同：-1
> 
> 时间：2012-10-15T17:42:57.440
> 
> 标签：sql-server, oracle

我在 apex oracle 中编写存储过程：谁能告诉我有关 oracle 中 sql server 的替代

像

```
E_OAError = ?

sp_OACreate =?

sp_OAGetProperty =? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:32:33.207

假设您需要使用 COM 对象，最接近的等价物将是[Oracle COM Automation Feature](http://docs.oracle.com/cd/B28359_01/win.111/b31223/ch2insta.htm)。但如果可能的话，您应该改用 .NET 代码，[Oracle Database Extensions for .NET](http://www.oracle.com/technetwork/topics/dotnet/index-085095.html)支持这种代码；这相当于 SQL Server 中的 CLR 支持。

您没有提供有关您的操作系统或 Oracle 版本的任何信息，因此您需要检查兼容性问题（例如，根据文档，COM 自动化支持的唯一服务器操作系统是 Windows Server 2003）。

# c# - 具有多个服务终结点的 SharePoint 服务应用程序

> ID：12901090
> 
> 赞同：0
> 
> 时间：2012-10-15T17:43:04.607
> 
> 标签：c#, sharepoint, sharepoint-2010

目前，我正在优化我在 SharePoint 开发方面的知识，同时为 SharePoint 2010 创建一个自定义服务应用程序。我的计划是在我的解决方案中包含多个服务以用于不同的任务。

目前我遇到了一个找不到任何进一步信息的问题，希望这里有人知道答案并可以帮助我。

例如：

我有两个合同：

```
IServiceA
IServiceB 
```

两个合同都有自己的服务

```
ServiceA.svc
ServiceB.svc 
```

在ServiceApplication本身，继承SPIisWebServiceApplication，我需要包含抽象成员，其中之一就是VirtualPath。虚拟路径是服务本身的路径。但是现在我有多个服务端点？！？我怎么能说我有多个服务端点？我是不是误会了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T22:06:18.723

我逐步详细介绍了如何在 SharePoint 中构建服务应用程序。你可以在这里查看[http://www.mattjcowan.com/funcoding/tag/mycorp/](http://www.mattjcowan.com/funcoding/tag/mycorp/)。

本质上，您只需将自定义 SPIisWebServiceApplication 中的端点配置为“dummy.svc”（随意调用它）。然后，当您获得通道工厂（我在抽象基客户端类中执行此操作）时，使用您想要的任何端点对“dummy.svc”执行简单的“替换”命令。我的客户端基类公开了一个 EndpointSvcFile 属性，因此每个服务客户端都可以拥有自己的服务和相关配置。

像这样的东西：

```
//context below is your SPServiceLoadBalancerContext
var endpointAddress = new EndpointAddress(new Uri(context.EndpointAddress.AbsoluteUri.Replace("dummy.svc", this.EndpointSvcFile)), new AddressHeader[0]); 
```

# python - INSERT INTO....SELECT... 使用 Python 中的变量

> ID：12901092
> 
> 赞同：-2
> 
> 时间：2012-10-15T17:43:10.270
> 
> 标签：python, sqlite, variables, select, insert

是否可以在带有 Python 变量的 sqlite 中使用连接？

例如，给定以下示例代码：

```
conn=sqlite3.connect(...)
cursor=conn.cursor()

short_hostname = commands.getoutput('hostname -s')

sql='''
    INSERT INTO history
    SELECT id || '-' || ?, foo, bar, baz
    FROM info
'''
cursor.execute(sql,short_hostname)
conn.commit() 
```

我收到此错误：`TypeError: unsupported operand type(s) for -: 'str' and 'str'` 我实际上是在使用 attach 命令将多个数据库的结果合并到一个主数据库中。我想确保密钥是唯一的，因此我将服务器短主机名附加到密钥。

谢谢，保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:37:49.553

哦，看在上帝的份上！这是OP的评论，以防有人错过：

> 我的实际代码是这样的：

```
> cursor.execute('ATTACH "/home/vivisimo/reporting/temp.db" AS toMerge') 
> cursor.execute('INSERT INTO application SELECT id || '-' || ?, key, value FROM toMerge.application', [self.short_hostname]) 
```

这与您发布的问题不同*。*实际代码有一个相当明显的问题，即 INSERT 语句*没有*用三引号括起来，因此您实际上*是在*要求 Python 从字符串中减去字符串。

写

```
cursor.execute('''INSERT INTO application SELECT id || '-' || ?, key, value FROM toMerge.application''', [self.short_hostname]) 
```

（正如您在最初的问题中所说的那样），一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:49:26.860

我很确定问题出在您的 Python 代码中，而不是 SQLite。

如下重写代码应该可以解决它：

```
sql="""
    INSERT INTO history
    SELECT id || '-' || ?, foo, bar, baz
    FROM info
""" 
```

# python - 更改 PYQT4 中选项卡的背景颜色

> ID：12901095
> 
> 赞同：2
> 
> 时间：2012-10-15T17:43:16.867
> 
> 标签：python, pyqt4

在 PYQT4 中是否可以更改 QTabWidget 选项卡的背景颜色？有一种方法可以更改文本的颜色，但不能更改选项卡的背景颜色。

我有一个带有多个选项卡的程序，我想为每个级别提供自己的背景颜色。见附件示例。

```
from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_Dialog(object):
    def setupUi(self, Dialog):
        Dialog.setObjectName(_fromUtf8("Dialog"))
        Dialog.resize(661, 397)
        self.verticalLayout = QtGui.QVBoxLayout(Dialog)
        self.verticalLayout.setObjectName(_fromUtf8("verticalLayout"))
        self.tabWidget = QtGui.QTabWidget(Dialog)
        self.tabWidget.setObjectName(_fromUtf8("tabWidget"))
        self.tab = QtGui.QWidget()
        self.tab.setObjectName(_fromUtf8("tab"))
        self.verticalLayout_2 = QtGui.QVBoxLayout(self.tab)
        self.verticalLayout_2.setObjectName(_fromUtf8("verticalLayout_2"))
        self.tabWidget_2 = QtGui.QTabWidget(self.tab)
        self.tabWidget_2.setObjectName(_fromUtf8("tabWidget_2"))
        self.tab_3 = QtGui.QWidget()
        self.tab_3.setObjectName(_fromUtf8("tab_3"))
        self.verticalLayout_3 = QtGui.QVBoxLayout(self.tab_3)
        self.verticalLayout_3.setObjectName(_fromUtf8("verticalLayout_3"))
        self.tabWidget_3 = QtGui.QTabWidget(self.tab_3)
        self.tabWidget_3.setObjectName(_fromUtf8("tabWidget_3"))
        self.tab_5 = QtGui.QWidget()
        self.tab_5.setObjectName(_fromUtf8("tab_5"))
        self.verticalLayout_4 = QtGui.QVBoxLayout(self.tab_5)
        self.verticalLayout_4.setObjectName(_fromUtf8("verticalLayout_4"))
        self.tabWidget_4 = QtGui.QTabWidget(self.tab_5)
        self.tabWidget_4.setObjectName(_fromUtf8("tabWidget_4"))
        self.tab_7 = QtGui.QWidget()
        self.tab_7.setObjectName(_fromUtf8("tab_7"))
        self.verticalLayout_5 = QtGui.QVBoxLayout(self.tab_7)
        self.verticalLayout_5.setObjectName(_fromUtf8("verticalLayout_5"))
        self.tabWidget_5 = QtGui.QTabWidget(self.tab_7)
        self.tabWidget_5.setElideMode(QtCore.Qt.ElideRight)
        self.tabWidget_5.setObjectName(_fromUtf8("tabWidget_5"))
        self.tab_9 = QtGui.QWidget()
        self.tab_9.setObjectName(_fromUtf8("tab_9"))
        self.tabWidget_5.addTab(self.tab_9, _fromUtf8(""))
        self.tab_10 = QtGui.QWidget()
        self.tab_10.setObjectName(_fromUtf8("tab_10"))
        self.tabWidget_5.addTab(self.tab_10, _fromUtf8(""))
        self.verticalLayout_5.addWidget(self.tabWidget_5)
        self.tabWidget_4.addTab(self.tab_7, _fromUtf8(""))
        self.tab_8 = QtGui.QWidget()
        self.tab_8.setObjectName(_fromUtf8("tab_8"))
        self.tabWidget_4.addTab(self.tab_8, _fromUtf8(""))
        self.verticalLayout_4.addWidget(self.tabWidget_4)
        self.tabWidget_3.addTab(self.tab_5, _fromUtf8(""))
        self.tab_6 = QtGui.QWidget()
        self.tab_6.setObjectName(_fromUtf8("tab_6"))
        self.tabWidget_3.addTab(self.tab_6, _fromUtf8(""))
        self.verticalLayout_3.addWidget(self.tabWidget_3)
        self.tabWidget_2.addTab(self.tab_3, _fromUtf8(""))
        self.tab_4 = QtGui.QWidget()
        self.tab_4.setObjectName(_fromUtf8("tab_4"))
        self.tabWidget_2.addTab(self.tab_4, _fromUtf8(""))
        self.verticalLayout_2.addWidget(self.tabWidget_2)
        self.tabWidget.addTab(self.tab, _fromUtf8(""))
        self.tab_2 = QtGui.QWidget()
        self.tab_2.setObjectName(_fromUtf8("tab_2"))
        self.tabWidget.addTab(self.tab_2, _fromUtf8(""))
        self.verticalLayout.addWidget(self.tabWidget)
        self.buttonBox = QtGui.QDialogButtonBox(Dialog)
        self.buttonBox.setOrientation(QtCore.Qt.Horizontal)
        self.buttonBox.setStandardButtons(QtGui.QDialogButtonBox.Cancel|QtGui.QDialogButtonBox.Ok)
        self.buttonBox.setObjectName(_fromUtf8("buttonBox"))
        self.verticalLayout.addWidget(self.buttonBox)

        self.retranslateUi(Dialog)
        self.tabWidget.setCurrentIndex(0)
        self.tabWidget_2.setCurrentIndex(0)
        self.tabWidget_3.setCurrentIndex(0)
        self.tabWidget_4.setCurrentIndex(0)
        self.tabWidget_5.setCurrentIndex(0)
        QtCore.QObject.connect(self.buttonBox, QtCore.SIGNAL(_fromUtf8("accepted()")), Dialog.accept)
        QtCore.QObject.connect(self.buttonBox, QtCore.SIGNAL(_fromUtf8("rejected()")), Dialog.reject)
        QtCore.QMetaObject.connectSlotsByName(Dialog)

    def retranslateUi(self, Dialog):
        Dialog.setWindowTitle(QtGui.QApplication.translate("Dialog", "Dialog", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget_5.setTabText(self.tabWidget_5.indexOf(self.tab_9), QtGui.QApplication.translate("Dialog", "Tab 9", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget_5.setTabText(self.tabWidget_5.indexOf(self.tab_10), QtGui.QApplication.translate("Dialog", "Tab 10", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget_4.setTabText(self.tabWidget_4.indexOf(self.tab_7), QtGui.QApplication.translate("Dialog", "Tab 7", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget_4.setTabText(self.tabWidget_4.indexOf(self.tab_8), QtGui.QApplication.translate("Dialog", "Tab 8", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget_3.setTabText(self.tabWidget_3.indexOf(self.tab_5), QtGui.QApplication.translate("Dialog", "Tab 5", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget_3.setTabText(self.tabWidget_3.indexOf(self.tab_6), QtGui.QApplication.translate("Dialog", "Tab 6", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget_2.setTabText(self.tabWidget_2.indexOf(self.tab_3), QtGui.QApplication.translate("Dialog", "Tab 3", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget_2.setTabText(self.tabWidget_2.indexOf(self.tab_4), QtGui.QApplication.translate("Dialog", "Tab 4", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab), QtGui.QApplication.translate("Dialog", "Tab 1", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab_2), QtGui.QApplication.translate("Dialog", "Tab 2", None, QtGui.QApplication.UnicodeUTF8))
#
#------------------------------------------------------------------------------ 
#
#  For Testing
#
        self.tab_33 = QtGui.QWidget()
        self.tabWidget.addTab(self.tab_33, "Hell")
        QColor = QtGui.QColor(255, 85, 0)
        a = self.tabWidget.tabBar()
        a.setTabTextColor(0, QColor)

if __name__ == "__main__":
    import sys
    app = QtGui.QApplication(sys.argv)
    Dialog = QtGui.QDialog()
    ui = Ui_Dialog()
    ui.setupUi(Dialog)
    Dialog.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:35:36.223

您可以使用 qt 样式表来自定义 QTabWidget 的外观：

[http://doc.qt.digia.com/4.7-snapshot/stylesheet-examples.html#customizing-qtabwidget-and-qtabbar](http://doc.qt.digia.com/4.7-snapshot/stylesheet-examples.html#customizing-qtabwidget-and-qtabbar)

例如：

```
self.tabwidget.setStyleSheet('QTabBar::tab {background-color: red;}') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T20:36:19.383

创建[QTabBar](http://doc.qt.io/qt-4.8/qtabbar.html)`paintEvent`的子类并在重新实现的函数中重新着色选项卡。

然后使用[QTabWidget.setTabBar](http://doc.qt.io/qt-4.8/qtabwidget.html#setTabBar)替换默认的标签栏。

这是一个简单的演示：

```
from PyQt4 import QtGui

class TabBar(QtGui.QTabBar):
    def paintEvent(self, event):
        painter = QtGui.QStylePainter(self)
        option = QtGui.QStyleOptionTab()
        for index in range(self.count()):
            self.initStyleOption(option, index)
            bgcolor = QtGui.QColor(self.tabText(index))
            option.palette.setColor(QtGui.QPalette.Window, bgcolor)
            painter.drawControl(QtGui.QStyle.CE_TabBarTabShape, option)
            painter.drawControl(QtGui.QStyle.CE_TabBarTabLabel, option)

class Window(QtGui.QTabWidget):
    def __init__(self):
        QtGui.QTabWidget.__init__(self)
        self.setTabBar(TabBar(self))
        for color in 'tomato orange yellow lightgreen skyblue plum'.split():
            self.addTab(QtGui.QWidget(self), color)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.resize(420, 200)
    window.show()
    sys.exit(app.exec_()) 
```

**更新**

如果平台的主题引擎使用像素图而不是调色板来为背景着色，那么这种技术似乎不起作用。显然，Windows 和 Mac 样式使用像素图，因此为*单个*选项卡的背景着色要困难得多（当然，可以使用样式表一次更改*所有*选项卡的颜色，但这与当前问题无关）。

有关更多详细信息，请参阅此[Qt 常见问题解答](https://wiki.qt.io/Qt_project_org_faq#Why_does_nothing_happen_when_I_set_the_palette_background_color_on_a_QPushButton_in_some_styles.3F)。

# java - 嵌入式 Servlet 3.0 容器使用 ServletContainerInitializer 而不是 web.xml

> ID：12901098
> 
> 赞同：3
> 
> 时间：2012-10-15T17:43:38.393
> 
> 标签：java, spring-mvc, servlet-3.0

据我了解，3.0 servlet 容器应该扫描类路径以查找 ServletContainerInitializer 接口（即[springs](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/SpringServletContainerInitializer.html)）的实现。随后这应该调用[WebApplicationInitializer](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/WebApplicationInitializer.html)实现的 onStartup 方法。

伟大的。惊人的。

现在我想构建一个 jar 文件，它将启动一个嵌入式 3.0 servlet 容器（jetty 8 或 tomcat 7）并执行此操作。我看到很多关于如何构建战争文件的例子。但是我如何以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:23:04.250

如果您不想构建 .war 文件，则需要自己调用`WebApplicationInitializer`。`onStartup(ServletContext)`您如何获得 servlet 上下文将取决于您使用的容器。

在 Tomcat 中：

```
Tomcat tomcat = new Tomcat();
// skipping a few steps
Context ctx = tomcat.addContext(contextPath, baseDir);
ServletContext sc = ctx.getServletContext(); 
```

# javascript - 从 jQueryUI 对话框中删除标题栏？

> ID：12901102
> 
> 赞同：3
> 
> 时间：2012-10-15T17:43:58.893
> 
> 标签：javascript, jquery, jquery-ui, simplemodal

如何删除标题栏。

我在这里检查了 API，但找不到任何东西。

[http://api.jqueryui.com/dialog/](http://api.jqueryui.com/dialog/)

我注意到其他“解决方案”的 GUI 看起来比 jQuery 更酷，尤其是

[http://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)

但是我想使用所有资源的 jQueryUI bc...在线 API 文档、教程等。

我只需要知道如何摆脱标题栏？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T17:47:13.507

有几个选项。

**用 CSS 隐藏**
`.ui-dialog-titlebar { display: none }`

**使用 Javascript 隐藏**
这将在创建对话框时删除标题栏，但会保留关闭按钮。

```
$("div").dialog({
  create: function( event, ui ) {
      var dialog = $(this).closest(".ui-dialog");
      dialog.find(".ui-dialog-titlebar-close")
            .appendTo(dialog)
            .css({
              position: "absolute",
              top: 0,
              right: 0,
              margin: "3px"
            });
      dialog.find(".ui-dialog-titlebar").remove();
  }
})​ 
```

**见演示：http:** [//jsfiddle.net/4AuhC/52/](http://jsfiddle.net/4AuhC/52/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T17:46:15.350

`el`作为创建对话框的原始元素给出：

```
$(el).siblings('.ui-dialog-titlebar').remove(); 
```

见[http://jsfiddle.net/alnitak/N9TGd/](http://jsfiddle.net/alnitak/N9TGd/)

请注意，实际上删除标题栏（根据问题标题）也会删除关闭按钮，并破坏拖动对话框的能力！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-15T17:47:24.083

在 jQuery UI 的 CSS 之后添加这个 CSS。

小心：没有更多的关闭按钮，你不能再拖动它了！

```
.ui-dialog-titlebar { display: none } 
```

jsFiddle：http: [//jsfiddle.net/PeVvA/](http://jsfiddle.net/PeVvA/)

如果您想保留拖动和按钮，但它可能不适用于所有主题..

```
.ui-dialog-titlebar { background: none; border: 0px solid black }​ 
```

jsFiddle：http: [//jsfiddle.net/PeVvA/1/](http://jsfiddle.net/PeVvA/1/)

仅使用 CSS，您可能会做得更多。我可能会玩身高。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-15T17:47:54.660

您可以尝试将其直接添加到您的 CSS 中。

```
.ui-dialog-titlebar
{ 
   display: none !important;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-15T17:50:46.207

尝试这个：

```
$(".ui-dialog-titlebar").hide() 
```

（或者）

```
$("#dlg").dialog({
  open: function() {
    $(this).dialog("widget").find(".ui-dialog-titlebar").hide();
  }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-09T23:27:15.000

如果要删除标题栏并仅使用样式保留关闭图标，请使用以下样式。它将标题栏缩小到关闭图标的大小并将其隐藏在后面。 `ui-icons_6e6e6e_256x240.png`我通过减轻`ui-icons_222222_256x240.png`jqueryui 附带的图像创建。

```
.ui-dialog .ui-dialog-titlebar.ui-widget-header{background: none; border: none; height: 20px; width: 20px; padding: 0px; position: static; float: right; margin: 0px 2px 0px 0px;}

.ui-dialog-titlebar.ui-widget-header .ui-dialog-title{display: none;}

.ui-dialog-titlebar.ui-widget-header .ui-button{background: none; border: 1px solid #CCCCCC;}

.ui-dialog .ui-dialog-titlebar .ui-dialog-titlebar-close{margin: 0px; position: static;}

.ui-dialog .dialog.ui-dialog-content{padding: 0px 10px 10px 10px;}

.ui-dialog .ui-dialog-titlebar .ui-dialog-titlebar-close .ui-icon{position: relative; margin-top: 0px; margin-left: 0px; top: 0px; left: 0px;}

.ui-dialog .ui-dialog-titlebar .ui-state-default .ui-icon {background-image: url("/css/ui-lightness/images/ui-icons_6e6e6e_256x240.png");}

.ui-dialog .ui-dialog-titlebar .ui-state-hover .ui-icon {background-image: url("/css/ui-lightness/images/ui-icons_222222_256x240.png");} 
```

# php - 如何跨子域共享 symfony2 会话

> ID：12901104
> 
> 赞同：4
> 
> 时间：2012-10-15T17:44:00.783
> 
> 标签：php, session, symfony, multi-tenant

如何跨子域 symfony2 共享会话？我正在使用 Symfony 2.0.14 版

我有 mysite.com 当用户登录到这个站点并移动到corporate.mysite.com 它应该显示登录为其相同的应用程序并且所有资源都共享相同的配置文件等。刚刚创建了一个指向相同的虚拟主机项目文件夹。

一些谷歌搜索显示了这个解决方案

```
框架：
    会议：
        域：.mysite.com

```

但这对我不起作用。有人可以引导我走向正确的方向吗？

-deepak

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T10:17:06.627

请检查您的本地环境中是否有有效的 tld

# google-drive-api - 获取文件的文件大小

> ID：12901105
> 
> 赞同：1
> 
> 时间：2012-10-15T17:44:12.217
> 
> 标签：google-drive-api

在我的程序中，我需要从服务器检索文件的文件大小并将其与本地文件大小进行比较。我将从 .net 桌面应用程序执行此操作。我只会有文件名（包括路径）。google drive api怎么可能？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:05:09.677

我不了解 Google Drive SDK，但文件函数“get”（通过 ID - [https://developers.google.com/drive/v2/reference/files/get](https://developers.google.com/drive/v2/reference/files/get)获取文件的元数据）输出此处记录的信息主体: [https://developers.google.com/drive/v2/reference/files#resource](https://developers.google.com/drive/v2/reference/files#resource)作为属性 '"fileSize": long'

你知道如何实现 API 吗？比这些信息应该足够了。

编辑：如果你只有名字，你应该迭代所有文件并比较文件名。然后您不必再使用“获取”功能，因为您在迭代时获取了文件的所有信息。您使用“列表”功能进行迭代：[https ://developers.google.com/drive/v2/reference/files/list](https://developers.google.com/drive/v2/reference/files/list)

# ruby-on-rails - Capybara/Cucumber 的睡眠功能？

> ID：12901109
> 
> 赞同：13
> 
> 时间：2012-10-15T17:44:21.203
> 
> 标签：ruby-on-rails, ruby, cucumber, capybara

我在我的网站上有一个页面，我正在尝试测试它要求用户在继续之前在页面上花费至少五秒钟。Capybara 有没有办法让我的 Cucumber 测试在该页面上暂停并等待五秒钟，然后再继续我描述的下一步？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-15T17:47:04.613

我的步骤定义中有这个：

```
Given /^I wait for (\d+) seconds?$/ do |n|
  sleep(n.to_i)
end 
```

在您的功能中：

```
Given I am on the whatever page
And I wait for 5 seconds
And I follow "A Link"
# etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T07:17:20.843

像这样动态定义时间单位也很棒：

```
Given /^I wait for (\d+) (second|minute|hour)s?$/ do |n, unit|
  sleep(eval("#{n.to_i}.#{unit}"))
end 
```

# ios - 适用于 iOS 设备的 MDM OTA 注册

> ID：12901111
> 
> 赞同：2
> 
> 时间：2012-10-15T17:44:25.223
> 
> 标签：ios, registration, mdm, ota

我正在尝试在企业中开发和分发 iOS 应用程序。我在 iOS 文档中遇到了这个问题 - Deploying iPhone and iPad MDM。在本文中，它指定可以无线执行 OTA 注册（下面引用的行）。第一次真的可以做到吗？MDM 服务器如何首次以无线方式推送到设备？它提到可以使用应用程序或门户网站来完成。这是否意味着应用程序将设备凭据（如 UDID）发送到 MDM 服务器进行注册？如果有人为 iOS 设备执行了 OTA 注册，请分享详细信息。提前致谢。

> 注册
> 
> 配置移动设备管理服务器和网络后，管理 iPhone 或 iPad 的第一步是将其注册到 MDM 服务器。这在设备和服务器之间创建了一种关系，允许按需对其进行管理，而无需进一步的用户交互。
> 
> 这可以通过通过 USB 将 iPhone 或 iPad 连接到计算机来完成，但大多数解决方案以无线方式提供注册配置文件。一些 MDM 供应商使用应用程序启动此过程，其他供应商通过将用户引导到 Web 门户来启动注册。每种方法都有其优点，两者都用于通过 Safari 触发无线注册过程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T18:26:12.630

通常通过网页或应用程序要求用户提供凭据，例如用户名和密码。服务器使用它来构建 MDM 移动配置文件，然后将其发送回设备。如果用户在 Safari 中注册，则在成功登录后，用户将获得一个链接以单击 .mobileconfig。Safari 将其发送到安装 MDM 配置文件的设置应用程序。如果注册发生在应用程序中，则该应用程序将 .mobileconfig 的链接传递给 Safari（通过 [UIApplication openURL:] 然后将其传递给设置。

作为安装 MDM 配置文件的一部分，服务器可以向设备询问各种清单，包括 UDID。

# android - 从android中的URL获取JSON值

> ID：12901114
> 
> 赞同：0
> 
> 时间：2012-10-15T17:44:37.500
> 
> 标签：android, json

在我的应用程序中，我试图从 JSON URL 中检索值。在 URL 中，有一点我无法解析这些值。我尝试了很多方法来找到解决方案，但我没有找到任何解决方案。

在 URL 中，我要解析的值是**tag_users**的值...

我附上了我试图解析值的代码，所以请帮助我找到解决方案......

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// //////////////

```
String url = "http://flutterr.pnf-sites.info/api/messageshow/2";
        JsonParser jParser = new JsonParser();
        JSONObject json = jParser.getJSONfromUrl(url);
        try
        {
            JSONArray messageshow = json.getJSONArray("messageshow");
            userList.clear();
            for(int i=0; i<messageshow.length();i++)
            {
                JSONObject msg = messageshow.getJSONObject(i);
                message_id = msg.getString("message_id");
                message = msg.getString("message");
                message_pic = msg.getString("message_pic");
                uid = msg.getString("uid");
                created = msg.getString("created");
                username = msg.getString("username");
                first_name = msg.getString("first_name");
                last_name = msg.getString("last_name");
                profile_pic = msg.getString("profile_pic");
                total_likes = msg.getString("total_likes");
                JSONObject tag_user = msg.getJSONObject("tag_user");
                message = tag_user.getJSONObject("tags").getString("message");
                if(message != "false")
                    tag_uid = tag_user.getJSONObject("tags").getString("tag_uid");
                Log.v("uid", tag_uid);
                HashMap<String, String> map = new HashMap<String, String>();
                map.put("message_id", message_id);
                map.put("message", message);
                map.put("message_pic", message_pic);
                map.put("uid", uid);
                map.put("created", created);
                map.put("username", username);
                map.put("first_name", first_name);
                map.put("last_name", last_name);
                map.put("profile_pic", profile_pic);
                map.put("total_likes", total_likes);
                userList.add(map);
            }
        }
        catch(JSONException e)
        {
            Log.e("Error", e.toString());
        } 
```

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// //////////////

请帮助我让我知道如何解析**tag_uid、tag_uname、tag_fname 和 tag_lname**的值...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:53:31.447

尝试

`if(!message.equals("false"))`

代替

`if(message != "false")`

还有一件事检查您的服务器端代码

在零标签的情况下`tag_user`有`Json Object`名称`tags`。在结果的情况下，它是 ( `tags`) `JsonArray`。

**编辑**

如果你的 Json 看起来像这样

```
 "tag_user": {
  "tags": [
    {
      "tag_uid": "1",
      "tag_fname": "abhishek",
      "tag_lname": "dhiman",
      "tag_uname": "abhishek"
    }
  ]"message": "true" //here true or false to check "tags" array
} 
```

然后在代码中你可以得到

```
message = tag_user.getJSONObject("message");

                    if(!message.equals("false"))
                    tag_uid = tag_user.getJSONArray("tags").getJSONObject(0).getString("tag_uid"); 
```

//将返回第一个标签的“tag_uid”`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:55:02.343

tag_user 是一个包含数组的 JSON 对象：

```
"tag_user":{"tags":[{"tag_uid":"1","tag_fname":"abhishek","tag_lname":"dhiman","tag_uname":"abhishek"},{"tag_uid":"4","tag_fname":"tttttt","tag_lname":"tttttt","tag_uname":"tttttt"},{"tag_uid":"3","tag_fname":"qqqqqq","tag_lname":"qqqqqq","tag_uname":"qqqqqq"},{"tag_uid":"13","tag_fname":"Firstname","tag_lname":"Lastname","tag_uname":"Username4"}]} 
```

你应该试试

```
getJSONArray("tags") 
```

在 tag_user 对象上

如果您熟悉 Sax 解析，请尝试 Gson 项目中的 JsonReader： [https ://sites.google.com/site/gson/streaming](https://sites.google.com/site/gson/streaming)

# jquery - 将 IE 的 getComputedStyle 修复应用到我的代码...“null”为 null 或不是对象

> ID：12901115
> 
> 赞同：0
> 
> 时间：2012-10-15T17:44:39.450
> 
> 标签：jquery, internet-explorer, syntax, jquery-isotope, computed-style

继[这个问题](https://stackoverflow.com/questions/12850737/jquery-object-expected-in-internet-explorer-ie8-and)之后，我遇到了。我正在尝试应用[以下修复](http://snipplr.com/view/13523/getcomputedstyle-for-ie/)以使 getComputedStyle 在用于 jQuery 同位素的代码中与 IE8（和 -）一起使用。但我仍然收到一条错误消息。任何帮助将不胜感激。

我得到 'null' is null 或不是 IE-Tes​​ter 的对象错误消息。该网站是[http://www.gablabelle.com/](http://www.gablabelle.com/)

```
 $(document).ready(function(){
        var layoutI = 0;
        var $container = $("#stream");
        var $window = $(window);
//getComputedStyle fix for IE ?
        if (!window.getComputedStyle) {
            window.getComputedStyle = function(el, pseudo) {
                this.el = el;
                this.getPropertyValue = function(prop) {
                    var re = /(\-([a-z]){1})/g;
                    if (prop == 'float') prop = 'styleFloat';
                    if (re.test(prop)) {
                        prop = prop.replace(re, function () {
                            return arguments[2].toUpperCase();
                        });
                    }
                    return el.currentStyle[prop] ? el.currentStyle[prop] : null;
                }
                return this;
            }
        };
        function reLayout(){
// getComputedStyle is used here
            var mediaQueryId = getComputedStyle( document.body, ':after' ).getPropertyValue('content');
            // fix for firefox, remove double quotes
            var mediaQueryId = mediaQueryId.replace( /"/g, '' );
            // console.log( mediaQueryId );
            var windowSize = $window.width();
            var masonryOpts;
            // update sizing options 
            switch ( mediaQueryId ) {
                case 'bigger' :
                    masonryOpts = {
                        columnWidth: 270,
                        gutterWidth: 30
                    };
                break;
                case 'big' :
                    masonryOpts = {
                        columnWidth: 220,
                        gutterWidth: 20
                    };
                break;
                case 'medium' :
                    masonryOpts = {
                        columnWidth: 166,
                        gutterWidth: 20
                    };
                break;
                case 'small' :
                    masonryOpts = {
                        columnWidth: $container.width() / 2,
                        gutterWidth: 0
                    };  
                break;
            };
            $container.isotope({
                resizable: false, // disable resizing by default, we'll trigger it manually
                itemSelector : "article.post",
                animationEngine: "best-available",
                masonry: masonryOpts,
                onLayout: function() {
                //  console.log('layout!' + (layoutI++) )
                    forceLoad();
                    setTimeout(function(){
                        html_height = $container.height();
                        $("#sidebar").height(html_height - masonryOpts.gutterWidth);
                    }, 500);
                }
            });
        };
        // start up isotope with default settings
        $container.imagesLoaded( function(){
            reLayout();
            $window.smartresize( reLayout );
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:27:42.053

似乎 IE8`currentStyle`对象不携带有关`content`css 属性的信息，我在您的网页中对其进行了测试，打印了所有`currentStyle`信息，如下所示：

```
for(var i in document.body.currentStyle) {
      console.log(i + ' : ' + document.body.currentStyle[i] );
} 
```

并且该`content`属性不存在，这就是为什么在您的以下行中`getPropertyValue()`返回：`null`

```
var mediaQueryId = getComputedStyle( document.body, ':after' ).getPropertyValue('content'); 
```

在下一行中，它调用`.replace()`该`null`对象，因此您得到了错误。

您需要以`content`其他方式获取值，目前您正在打印是否在使用`body:after`css 的正文之后，我不知道您为什么这样做，您可以尝试将其打印到您体内的一个不可见元素，然后从那里检索它..像这样：

CSS：

```
@media (min-width: 1200px) {
    #hid:after {
        content: 'bigger';
    }
...
... 
```

您的`#hid`元素可以位于页面中的任何位置，例如：

```
<span id="hid" style="display:none"></span> 
```

然后你的`reLayout()`函数会像这样检索它：

```
function reLayout(){
// getComputedStyle is used here
            var mediaQueryId = $('#hid').html();
            // fix for firefox, remove double quotes
            var mediaQueryId = mediaQueryId.replace( /"/g, '' );
...
... 
```

所以这样做你根本不需要你的 IE 修复，这无论如何都不适用于该`content`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:17:09.640

按照@Nelson 的逻辑，我决定添加我想使用 jQuery 而不是 CSS 捕获的值，以确保它在 DOM 中并且可以被操作。

jQuery：

```
$(document).ready(function(){
    var layoutI = 0;
    var $container = $("#stream");
    var $window = $(window);
    function windowSizeMe(){
        var windowSize = $window.width();
        if (windowSize > 1199) {
            $("#switch").attr("data-content", "bigger");
        } else if (windowSize < 1200 && windowSize > 979) {
            $("#switch").attr("data-content", "big");
        } else if (windowSize < 768) {
            $("#switch").attr("data-content", "small");
        } else {
            $("#switch").attr("data-content", "medium");
        };
    }; 
    function reLayout(){
        windowSizeMe(); 
        var mediaQueryId = $("#switch").attr("data-content");
        console.log(mediaQueryId);
        // fix for firefox, remove double quotes
        var mediaQueryId = mediaQueryId.replace( /"/g, '' );
        var masonryOpts;
        // update sizing options 
        switch ( mediaQueryId ) {
            case 'bigger' :
                masonryOpts = {
                    columnWidth: 270,
                    gutterWidth: 30
                };
            break;
            case 'big' :
                masonryOpts = {
                    columnWidth: 220,
                    gutterWidth: 20
                };
            break;
            case 'medium' :
                masonryOpts = {
                    columnWidth: 166,
                    gutterWidth: 20
                };
            break;
            case 'small' :
                masonryOpts = {
                    columnWidth: $container.width() / 2,
                    gutterWidth: 0
                };  
            break;
        };
        $container.isotope({
            resizable: false, // disable resizing by default, we'll trigger it manually
            itemSelector : "article.post",
            animationEngine: "best-available",
            masonry: masonryOpts,
            onLayout: function() {
            //  console.log('layout!' + (layoutI++) )
                forceLoad();
                setTimeout(function(){
                    html_height = $container.height();
                    $("#sidebar").height(html_height - masonryOpts.gutterWidth);
                }, 500);
            }
        });
    };
    // start up isotope with default settings
    $container.imagesLoaded( function(){
        reLayout();
        $window.smartresize( reLayout );
    });
}); 
```

HTML（可以在任何地方添加）：

```
<span id="switch"></span> 
```

CSS（我不认为媒体查询部分是强制性的，因为我们在 jquery 中设置了它）：

```
#switch {
    display: none;
}
/**** Media queries ****/
@media (max-width: 767px) {
    #switch:after {
        content: attr(data-content) "small";
    }
}
@media (min-width: 768px) and (max-width: 979px) {
    #switch:after {
        content: attr(data-content) "medium";
    }
}
@media (min-width: 980px) and (max-width: 1199px) {
    #switch:after {
        content: attr(data-content) "big";
    }
}
@media (min-width: 1200px) {
    #switch:after {
        content: attr(data-content) "bigger";
    }
} 
```

# android - (Android) 无法启动活动组件信息：java.lang.NullPointerException

> ID：12901118
> 
> 赞同：0
> 
> 时间：2012-10-15T17:44:47.320
> 
> 标签：android, android-activity, runtimeexception

我有一个问题，`RuntimeException`每次我尝试使用此代码开始新活动时都会遇到问题：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_add:
        startActivity(new Intent(this, Addmark.class));
        break;
    }
    return super.onOptionsItemSelected(item);
} 
```

我尝试在其中启动新活动的活动是使用以下代码调用的：

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long id) {
    Cursor cursor = db.getSubject(id);
    String subject = null;
    try {
        subject = cursor.getString(cursor.getColumnIndex("subject"));
    } catch (Exception e) {
        e.printStackTrace();
    }
    Intent intent = new Intent(Main.this, Marks.class);
    intent.putExtra("selected", subject);
    startActivity(intent);
} 
```

因为这种异常类型有很多原因，所以我无法找到解决方案，但这可能是一些简单的事情，我只是没有看到它。

这是 LogCat：

```
10-15 17:30:33.064: E/AndroidRuntime(5926): FATAL EXCEPTION: main
10-15 17:30:33.064: E/AndroidRuntime(5926): java.lang.RuntimeException: Unable to start activity ComponentInfo{maturaarbeit.nicola_pfister.marks/maturaarbeit.nicola_pfister.marks.Addmark}: java.lang.NullPointerException
10-15 17:30:33.064: E/AndroidRuntime(5926):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at android.os.Looper.loop(Looper.java:137)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at android.app.ActivityThread.main(ActivityThread.java:4424)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at java.lang.reflect.Method.invokeNative(Native Method)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at java.lang.reflect.Method.invoke(Method.java:511)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at dalvik.system.NativeStart.main(Native Method)
10-15 17:30:33.064: E/AndroidRuntime(5926): Caused by: java.lang.NullPointerException
10-15 17:30:33.064: E/AndroidRuntime(5926):     at maturaarbeit.nicola_pfister.marks.database.DBAdapter.getAllSubjects(DBAdapter.java:150)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at maturaarbeit.nicola_pfister.marks.Addmark.getSubjectSpinner(Addmark.java:38)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at maturaarbeit.nicola_pfister.marks.Addmark.onCreate(Addmark.java:31)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at android.app.Activity.performCreate(Activity.java:4465)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-15 17:30:33.064: E/AndroidRuntime(5926):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
10-15 17:30:33.064: E/AndroidRuntime(5926):     ... 11 more 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-18T13:12:10.580

错误可能是由两个原因引起的 1）在 Addmark Activity 中，检查这种情况下的 id 是否存在`R.id.view`，很可能是 NUllPointerException 的原因

```
 TextView tv = findViewById(R.id.view);
   tv.setText("Some text"); 
```

2）如果你使用`startActivityForResult()`你必须在调用活动中覆盖这个方法。如需更多参考，请阅读[https://stackoverflow.com/a/23925196/6751183](https://stackoverflow.com/a/23925196/6751183)

# c++ - 无法创建 ICaptureGraphBuilder2 的实例

> ID：12901122
> 
> 赞同：2
> 
> 时间：2012-10-15T17:45:05.493
> 
> 标签：c++, windows-mobile, directshow

*Win32 SmartDevice DLL 项目 - VS 2008*

我正在尝试使用该`ICaptureGraphBuilder2`界面，但是当我尝试使用以下代码创建 istance 时：

```
CComPtr<ICaptureGraphBuilder2> pCaptureGraphBuilder;
hr = pCaptureGraphBuilder.CoCreateInstance(CLSID_CaptureGraphBuilder); 
```

`hr`是`0x80040154`。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:11:04.697

很可能，Capture Graph Builder (`CLSID_CaptureGraphBuilder`和`CLSID_CaptureGraphBuilder2`) 在 Windows Mobile 中不可用。它仅在桌面上可用。

错误代码为`0x80040154`= `REGDB_E_CLASSNOTREG`“类未注册”。

在 Windows Mobile/CE 中您只有 API 的一个子集。

# objective-c - Cocos2D中draw方法的正确使用

> ID：12901126
> 
> 赞同：1
> 
> 时间：2012-10-15T17:45:08.520
> 
> 标签：objective-c, cocos2d-iphone, draw

我想创建一个简单的图层来显示一些信息，例如分数。

我设法做到了，但我不确定它是否正确：

```
#import "InformationLayer.h"
#import "GameScene.h"

@implementation InformationLayer

-(void) draw
{
    // Complete clear of the screen
    [self removeAllChildrenWithCleanup:true];

    // Draw my score
    [self DrawScore];
}

- (void)DrawScore
{
    // create and initialize a label
    NSString* l_sScore = [NSString stringWithFormat:@"Score : %d", [[GameScene sharedGameScene] iScore]];

    CCLabelTTF* label = [CCLabelTTF labelWithString:l_sScore fontName:@"Marker Felt" fontSize:32];

    // get the window (screen) size from CCDirector
    CGSize size = [[CCDirector sharedDirector] winSize];

    // position the label at the center of the screen
    label.position = CGPointMake(size.width - ([label texture].contentSize.width / 2), size.height*2.0/3.0);

    // add the label as a child to this Layer
    [self addChild:label];
}
@end 
```

我一直在处理我的场景和图层，我真的不喜欢清除所有图层然后重新绘制所有内容。在我看来，这完全是矫枉过正！尽管如此，它仍然可以完成工作......

由于我处于学习曲线的底部，所以我想尽快做...我可以在这里做点更好的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T18:11:02.153

这是完全错误的。只添加一次节点。`draw`仅当您想使用 OpenGL（或 cocos2d 的函数，如 ）绘制某些东西时才使用方法`ccDrawLine`。`init`例如，您可以在 some方法中添加您的内容（标签、精灵等） 。

要更改标签的文本，请使用`setString:`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:22:54.213

所以遵循 Morion 的建议：

```
-(id) init
{
    if( (self=[super init] ))
    {
        [self InitLabels];

        // Scheduling the refresh method.
        [self scheduleUpdate]; 
    }
    return self;
}

// Update replaces draw !! 
-(void)update:(ccTime)delta
{
    [self UpdateLabels];
}

- (void)InitLabels
{
    // get the window (screen) size from CCDirector
    CGSize l_ScreenSize = [[CCDirector sharedDirector] winSize];
    float l_iScreenHeightPosition = l_ScreenSize.height*2.0/3.0;

    NSString* l_sScore = [NSString stringWithFormat:@"Score : %d", [[GameScene sharedGameScene] iScore]];
    NSString* l_sLevel = [NSString stringWithFormat:@"Level : %d", [[GameScene sharedGameScene] iLevel]];

    l_lblScore = [CCLabelTTF labelWithString:l_sScore
                                           fontName:@"Marker Felt" fontSize:32];

    l_lblScore.position = CGPointMake(l_ScreenSize.width - ([l_lblScore texture].contentSize.width / 2), l_iScreenHeightPosition);

    // add the label as a child to this Layer
    [self addChild:l_lblScore];

    l_lblLevel = [CCLabelTTF labelWithString:l_sLevel
                                                fontName:@"Marker Felt" fontSize:32];

    l_lblLevel.position = CGPointMake(l_ScreenSize.width - ([l_lblLevel texture].contentSize.width / 2), l_iScreenHeightPosition - ([l_lblScore texture].contentSize.height));

    // add the label as a child to this Layer
    [self addChild:l_lblLevel];
}

- (void)UpdateLabels
{
    NSString* l_sScore = [NSString stringWithFormat:@"Score : %d", [[GameScene sharedGameScene] iScore]];
    NSString* l_sLevel = [NSString stringWithFormat:@"Level : %d", [[GameScene sharedGameScene] iLevel]];

    [l_lblScore setString:l_sScore];
    [l_lblLevel setString:l_sLevel];
} 
```

现在对我来说似乎更好:)

# eclipse - 如何在 Eclipse 中创建自定义超链接功能

> ID：12901127
> 
> 赞同：2
> 
> 时间：2012-10-15T17:45:10.027
> 
> 标签：eclipse, eclipse-plugin, hyperlink

我想知道如何在 Eclipse UI 中创建和实现自定义超链接——如果可能的话，我不想制作一个完整的自定义编辑器——只需添加到我当前的 ctrl+单击一系列字符的能力和自动导航到匹配的参考。

我对制作 Eclipse 插件并不是非常熟悉，但我猜这将是必需的。

我擅长正则表达式，如果有帮助的话。

我想可以使用某种声明性语法（与此模式匹配的文本链接到这些文件中看起来像这样的任何行，或其他东西）

我想做的两件事是根据一个函数找到一个 jsp 文件，该函数返回一个与其中一个 jsp 文件匹配的字符串，或者在源代码中找到一个或多个使用特定名称的 JavaScript 函数（这些看起来像可能比声明性语法支持的更复杂）

如果已经有一个或多个插件允许我声明这样的“规则”，那也可以，但是关于该主题的一个或多个教程会很棒 - 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:11:29.500

你想实现一个[超链接检测器](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_workbench_texteditor_hyperlinkDetectors.html)。您必须创建一个实现该扩展点的 Eclipse 插件。该扩展点的“类”属性需要指向实现[IHyperlinkDetector](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/text/hyperlink/IHyperlinkDetector.html)的类。您最好的选择可能是扩展[AbstractHyperlinkDetector](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/text/hyperlink/AbstractHyperlinkDetector.html)。

IBM还有一个[小教程](http://www.ibm.com/developerworks/opensource/tutorials/os-ecl-commplgin3/section3.html)。小心，它是从 2006 年开始的，从那时起可能会有一些小的 API 更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-25T13:28:20.253

对于谁像我一样发现这个但仍然没有让它工作：

使用扩展点`HyperlinkDetectors`为您定义时，请`CustomTextEditor`确保有您的`CustomSourceViewerConfiguration`扩展`TextSourceViewerConfiguration`，而不仅仅是`SourceViewerConfiguration`.

因为这是包含`HyperlinkDetectors`通过扩展点配置的注册表调用的类。要激活它们，这个类需要一个`IPreferenceStore`所以你还必须在构造函数中初始化你`CustomSourceViewerConfiguration`并`IPreferenceStore`调用`super(iPrefStore);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-03T21:35:37.447

maarten 的答案部分正确，但您还需要覆盖`getHyperlinkDetectorTargets()`您`TextSourceViewerConfiguration`孩子的方法（`CustomSourceViewerConfiguration`在 maarten 的情况下）。像这样的东西：

```
@Override
protected Map<String, IAdaptable> getHyperlinkDetectorTargets(
    ISourceViewer sourceViewer) {
    Map<String, IAdaptable> targets = 
        super.getHyperlinkDetectorTargets(sourceViewer);
        targets.put("editortest.editors.MyEditor", edit); 
        return targets;
    } 
```

`editortest.editors.MyEditor`这是在 中定义的目标的 ID `org.eclipse.ui.workbench.texteditor.hyperlinkDetectorTargets`。该解决方案适用于最新的 Eclipse Oxygen。

# knockout-mvc - MVC - 将 json 结果发布到控制器，然后从控制器重定向

> ID：12901128
> 
> 赞同：1
> 
> 时间：2012-10-15T17:45:10.933
> 
> 标签：knockout-mvc

作为 MVC 和淘汰赛的新手，我需要一点帮助。我正在尝试将一些 JSON 结果（作为字符串）发布到我的控制器，然后让控制器 RedirectToAction 到新的视图和操作。

问题：即使 RedirectToAction 被击中，控制器也总是返回相同的视图。

（它通过重定向代码，然后在最后回到发布视图。）我不得不实施“下一步”操作，这有点尴尬。

另外：隐藏字段是发布帖子时存储/传递 ID 的最佳方式吗？

看法

```
@model WebRole.Website.Models.Registration3Model
@{
ViewBag.Title = "Step 3: Adding Members";
}
@using (Html.BeginForm())
{

<input name="GroupID" id="GroupID" type="hidden" value="@ViewData["GroupID"]" />      
<div id="Div1">
    <div class="5grid-layout">
        <div class="row">
            <div class="8u mobileUI-main-content">
                <!-- Content -->
                <div id="content">
                    <br />
                    <!-- Article -->
                    <article class="featured">
                        <header>
                            <h2>Registration</h2>
                            <span class="byline"></span>
                        </header>
                    </article>
                    <!-- Section -->
                    <div class="5grid grid-spaced">
                        <div class="row">
                            <section class="do-6u">
                                <h2>Step 3.</h2>
                                <p>
                                    You can add members to your group/family by selecting how the members will be notified (ex. Email, Cellphone) and the address/phone # of the member.
                                </p>
                                <p />
                                    <div id='contactsList'>
                                        <table class='contactsEditor'>
                                            <tbody data-bind="foreach: contacts">
                                                <tr>
                                                    <td>
                                                        <input type="radio" value="Email" data-bind="checked: contactType" />E-mail
                                                        <input type="radio" value="Voice" data-bind="checked: contactType" />Voice
                                                        <input type="radio" value="SMS" data-bind="checked: contactType" />SMS
                                                    </td>
                                                    <td>
                                                        <input data-bind='value: contactValue' size="40" />

                                                        <a href='#' data-bind='click: $root.removeContact'>Remove</a>
                                                    </td>               
                                                </tr>
                                            </tbody>
                                        </table>
                                        <input type="hidden" data-bind='value: lastSavedJson' />
                                        <a href='#' data-bind='click: addContact'>Add </a>
                                    </div>
                                <p />
                                <p>
                                    <button name="button" value="AddNewMember" data-bind='click: save, enable: contacts().length > 0'>Invite</button>

                                    <button name="button" value="Next">Finish</button>
                                </p>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
}
    <script type="text/javascript">
        var initialData = [
        {
            contactValue: "",
            contactType: ""
        }
    ];

    var ContactsModel = function (contacts) {
        var self = this;
        self.contacts = ko.observableArray(ko.utils.arrayMap(contacts, function (contact) {
            return { contactValue: contact.firstName, contactType: contact.contactType };
        }));

        self.addContact = function () {
            self.contacts.push({
                contactValue: "",
                contactType: ""
            });
        };

        self.removeContact = function (contact) {
            self.contacts.remove(contact);
        };

        self.save = function () {
            self.lastSavedJson(JSON.stringify(ko.toJS(self.contacts), null, 2));
            var s = document.getElementById("GroupID").value
            $.ajax({
                url: "/Home/Add/",
                type: "POST",
                data: { jsonString: JSON.stringify(ko.toJS(self.contacts)), groupID: s },
                success: function (result) {
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    var errorMessage = '';
                    $('#message').html(jqXHR.responseText);
                }
            });

        }; 

        self.lastSavedJson = ko.observable("")
    };

    ko.applyBindings(new ContactsModel(initialData));

</script> 
```

模型：

```
public class Registration3Model
{
    public string GroupID { get; set; }

    // Success Message
    public string SuccessMessage { get; set; }

    public string jsonString { get; set; }
}

public class Registration4Model
{
    public string GroupID { get; set; }

    public Group SelectedGroup { get; set; }

    public Person Owner { get; set; }

    public List<ContactInfo> GroupContacts { get; set; }

    // Success Message
    public string SuccessMessage { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public class JsonCatch
    {
        public string groupID { get; set; }
        public string contactType { get; set; }
        public string contactValue { get; set; }
    }

    [AllowAnonymous]
    public ActionResult Registration3(Registration3Model model)
    {
        ViewData["GroupID"] = model.GroupID;
        return View("Registration3",  model);
    }

    [HttpPost]
    [ActionName("Add")]
    [AllowAnonymous]
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Add(string jsonString, string GroupID)
    {

    string s =GroupID;

        List<JsonCatch> j = JsonConvert.DeserializeObject<List<JsonCatch>>(jsonString);
        foreach (JsonCatch c in j)
        { 
            if (s != "")
            {

                // for member 1
                // 1\. Add Person
                Person p = new Person();
                p.LastName = "";
                p.FirstName = "";
                p.PersonID = Guid.NewGuid();
                p.RowKey = p.PersonID.ToString();
                p.PartitionKey = "";
                p.Image = string.Format("../../Assets/Images/People/pic{0}.png", new Random().Next(1, 12));
                this.GetContext().InsertPerson(p);

                // 2\. Add GroupMember
                GroupMember gm = new GroupMember();
                gm.RowKey = p.RowKey.ToString();
                gm.PartitionKey = s;
                gm.GroupMemberID = Guid.NewGuid();
                gm.TrustLevel = "Readonly";
                this.GetContext().InsertGroupMember(gm);

                // 3\. Add ContactInfo
                ContactInfo ci = new ContactInfo();
                ci.PartitionKey = p.RowKey;
                ci.ContactInfoID = Guid.NewGuid();
                ci.RowKey = ci.ContactInfoID.ToString();
                ci.Type = c.contactType;
                ci.Value = c.contactValue;
                ci.UseToNotify = true;
                this.GetContext().InsertContactInfo(ci);

                // 4\. Add Notification
                Notification n = new Notification();
                n.PartitionKey = "Invitation";
                n.NotificationID = Guid.NewGuid();
                n.RowKey = n.NotificationID.ToString();
                n.ContactType = c.contactType;
                n.ContactInfoValue = c.contactValue;
                n.NotificationType = "Invitation";
                n.PersonRowKey = p.RowKey;
                n.GroupRowKey = s;
                this.GetContext().InsertNotification(n);
            }
            }
        return View("Registration4", new { GroupID = s });
    }

            [AllowAnonymous]
    public ActionResult Registration4(Registration4Model model)
    {
        model.SelectedGroup = this.GetContext().GetGroup(model.GroupID);
        model.GroupContacts = model.SelectedGroup.GetContactInfoes(this.GetContext());
        model.Owner = model.SelectedGroup.GetOwner(this.GetContext());

        return View(model);
    }

            [HttpPost]
    [AllowAnonymous]
    [AcceptVerbs(HttpVerbs.Post)]
    [ActionName("Registration3")]
    [AcceptParameter(Name = "button", Value = "Next")]
    public ActionResult Registration3_Next(Registration4Model model)
    {
        return RedirectToAction("Registration4", new { GroupID = model.GroupID });
    }

    [HttpPost]
    [AllowAnonymous]
    [AcceptVerbs(HttpVerbs.Post)]
    [ActionName("Registration4")]
    [AcceptParameter(Name = "button", Value = "Continue")]
    public ActionResult Registration4_Continue(Registration4Model model)
    {
        return Redirect("~/AnotherWebsite.aspx");
    }

    #endregion
}

public class AcceptParameterAttribute : ActionMethodSelectorAttribute
{
    public string Name { get; set; }
    public string Value { get; set; }

    public override bool IsValidForRequest(ControllerContext controllerContext, MethodInfo methodInfo)
    {
        var req = controllerContext.RequestContext.HttpContext.Request;
        return req.Form[this.Name] == this.Value;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:59:10.843

问题是您正在使用 Ajax 调用 Add 方法，因此您需要使用`window.location = url`来更改新视图。

您应该尝试的是返回一个带有 GroupId 的 JsonResult 以及Ajax 调用使用和更改视图的*成功*部分。`window.location`

在你的模型之外添加这个

```
 var newUrl="@Url.Action("Registration","Home")"; 
```

然后在你的模型里面

```
 self.save = function () {
        self.lastSavedJson(JSON.stringify(ko.toJS(self.contacts), null, 2));
        var s = document.getElementById("GroupID").value
        $.ajax({
            url: "/Home/Add/",
            type: "POST",
            data: { jsonString: JSON.stringify(ko.toJS(self.contacts)), groupID: s },
            success: function (result) {
Code Change ----->  window.location=newUrl+"/"+result;
            },
            error: function (jqXHR, textStatus, errorThrown) {
                var errorMessage = '';
                $('#message').html(jqXHR.responseText);
            }
        });

    }; 
```

我假设控制器只返回 ID。希望它有效。

# jquery - 从下拉列表中清除选择

> ID：12901134
> 
> 赞同：2
> 
> 时间：2012-10-15T17:45:51.047
> 
> 标签：jquery

我的代码在清除选择时遇到问题：

```
$('select').children(':selected').removeProp('selected'); 
```

我像这样绑定一个更改处理程序：

```
$('#categories').on('change', function(event) {
   var category = $(this).children("option:selected").text();
   ...
}); 
```

这有效，除非我再次选择从中删除所选属性的选项`category = ''`。

我肯定做错了什么。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T17:50:20.747

完全删除该`selected`属性可能不是最好的做法。在您的情况下，看起来 DOM 层之后没有重新创建它，因此`:selected`选择器无法找到该元素。

尝试将属性设置为`false`：

```
$("select").children(":selected").prop("selected", false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T17:52:23.880

如果要清除`<select>`下拉列表的选定值，请尝试：

```
$('select').val(-1); 
```

[示例 jsfiddle](http://jsfiddle.net/Chgux/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:08:38.443

另一种方式：这将始终选择第一个选项。

```
$('select').find('option:eq(0)').prop('selected', true) 
```

这是一个比较@Frederic Hamidi、mdmullinax 和我的jsfiddle。

[http://jsfiddle.net/RzEBg/](http://jsfiddle.net/RzEBg/)

# python - 使用从 python 函数中提取信息到模板

> ID：12901136
> 
> 赞同：0
> 
> 时间：2012-10-15T17:46:08.393
> 
> 标签：python, django-models, django-templates

我有正确显示的事件对象。但我似乎无法从 python 函数中获取结果并将其放入模板中。

例如，这是我的事件模型。

```
class Event(models.Model):
    created = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True)
    name = models.CharField(max_length=200)
    location = models.CharField(max_length=200)
    students = models.ManyToManyField(StudentProfile, null=True, blank=True)
    managers = models.ManyToManyField(ManagerProfile, null=True, blank=True)

    def __unicode__(self):
        return self.name

    def attendees(self):
        return len(self.students.count + self.managers.count) 
```

我可以成功地将除与会者之外的所有内容都拉入我的模板中...例如，在搜索上下文中，我将事件作为结果传递...

`{{ result.name }}`很好地传递到我的模板中，`{{ result.location }}`.

但`{{ result.attendees|length }}`不会显示。

知道这是为什么吗？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:48:21.183

您需要使用`{{ result.attendees }}`（否`|length`）。

该`length`过滤器适用于列表和其他可迭代对象。你在那里所做的类似于 apply `len(len(something))`，这显然是错误的。

# php - 刷新用于 IP 黑名单检查的 PHP 脚本

> ID：12901142
> 
> 赞同：3
> 
> 时间：2012-10-15T17:46:32.713
> 
> 标签：php, web-services, ip, flush

我有这个用 PHP 编写的函数

```
<?php
/***************************************************************************************
This is a simple PHP script to lookup for blacklisted IP against multiple DNSBLs at once.

You are free to use the script, modify it, and/or redistribute the files as you wish.

Homepage: http://dnsbllookup.com
****************************************************************************************/
function flush_buffers(){ 
    ob_end_flush(); 
    flush(); 
    ob_start(); 
} 

function dnsbllookup($ip)
{
    $dnsbl_lookup=array(
    "access.redhawk.org",
    "b.barracudacentral.org",
    "bl.csma.biz",
    "bl.emailbasura.org",
    "bl.spamcannibal.org",
    "bl.spamcop.net",
    "bl.technovision.dk",
    "blackholes.five-ten-sg.com",
    "blackholes.wirehub.net",
    "blacklist.sci.kun.nl",
    "block.dnsbl.sorbs.net",
    "blocked.hilli.dk",
    "bogons.cymru.com",
    "cart00ney.surriel.com",
    "cbl.abuseat.org",
    "dev.null.dk",
    "dialup.blacklist.jippg.org",
    "dialups.mail-abuse.org",
    "dialups.visi.com",
    "dnsbl.ahbl.org",
    "dnsbl.antispam.or.id",
    "dnsbl.cyberlogic.net",
    "dnsbl.kempt.net",
    "dnsbl.njabl.org",
    "dnsbl.sorbs.net",
    "dnsbl-1.uceprotect.net",
    "dnsbl-2.uceprotect.net",
    "dnsbl-3.uceprotect.net",
    "duinv.aupads.org",
    "dul.dnsbl.sorbs.net",
    "dul.ru",
    "escalations.dnsbl.sorbs.net",
    "hil.habeas.com",
    "http.dnsbl.sorbs.net",
    "intruders.docs.uu.se",
    "ips.backscatterer.org",
    "korea.services.net",
    "mail-abuse.blacklist.jippg.org",
    "misc.dnsbl.sorbs.net",
    "msgid.bl.gweep.ca",
    "new.dnsbl.sorbs.net",
    "no-more-funn.moensted.dk",
    "old.dnsbl.sorbs.net",
    "pbl.spamhaus.org",
    "proxy.bl.gweep.ca",
    "psbl.surriel.com",
    "pss.spambusters.org.ar",
    "rbl.schulte.org",
    "rbl.snark.net",
    "recent.dnsbl.sorbs.net",
    "relays.bl.gweep.ca",
    "relays.bl.kundenserver.de",
    "relays.mail-abuse.org",
    "relays.nether.net",
    "rsbl.aupads.org",
    "sbl.spamhaus.org",
    "smtp.dnsbl.sorbs.net",
    "socks.dnsbl.sorbs.net",
    "spam.dnsbl.sorbs.net",
    "spam.olsentech.net",
    "spamguard.leadmon.net",
    "spamsources.fabel.dk",
    "tor.ahbl.org",
    "web.dnsbl.sorbs.net",
    "whois.rfc-ignorant.org",
    "xbl.spamhaus.org",
    "zen.spamhaus.org",
    "zombie.dnsbl.sorbs.net",
    "bl.tiopan.com",
    "dnsbl.abuse.ch",
    "tor.dnsbl.sectoor.de",
    "ubl.unsubscore.com",
    "cblless.anti-spam.org.cn",
    "dnsbl.tornevall.org",
    "dnsbl.anticaptcha.net",
    "dnsbl.dronebl.org"
    ); // Add your preferred list of DNSBL's

    $AllCount = count($dnsbl_lookup);
    $BadCount = 0;
    if($ip)
    {
        $reverse_ip = implode(".", array_reverse(explode(".", $ip)));
        foreach($dnsbl_lookup as $host)
        {
            if(checkdnsrr($reverse_ip.".".$host.".", "A"))
            {
                echo "<span color='#339933'>Listed on ".$reverse_ip.'.'.$host."!</span><br/>";
                flush_buffers();
                $BadCount++;
            }
            else
            {
                echo "Not listed on ".$reverse_ip.'.'.$host."!<br/>";
                flush_buffers();
            }
        }
    }
    else
    {
        echo "Empty ip!<br/>";
        flush_buffers();
    }

    echo "This ip has ".$BadCount." bad listings of ".$AllCount."!<br/>";
    flush_buffers();

}

if(preg_match("/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\z/",@$_GET['ip']) == true)
{
    dnsbllookup($_GET['ip']);
}
?> 
```

如果在某些黑名单中列出，它会检查 IP

```
http://127.0.0.1/check4_html.php?ip=123.123.123.123

Not listed on 123.123.123.123.access.redhawk.org!
Not listed on 123.123.123.123.b.barracudacentral.org!
Not listed on 123.123.123.123.bl.csma.biz!
Not listed on 123.123.123.123.bl.emailbasura.org! 
```

bu 我有一个小问题，我想在每次检查时刷新输出，我该怎么做？

脚本运行时发生的第一件事，我等待 20 秒，然后弹出 20 次检查，然后每秒 1 次，这是为什么呢？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:18:58.320

这个概念对我有用:)

```
ini_set('output_buffering','on');
ini_set('zlib.output_compression', 0);
ini_set('implicit_flush',1);
ob_implicit_flush();

echo ("<html><head><head><body>");
for($i=0;$i<20;$i++) {
      echo $i;
      echo str_repeat(" ", 500);
      ob_flush();
      flush();
      sleep(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:50:04.427

`flush()`似乎不是“输出缓冲”（ob）的一部分。使用`ob_flush()`. 如果您使用正确的功能`ob_end()`，也应该没有必要。`ob_start()`:)

> > 无效 ob_flush ( 无效 )
> 
> 此函数将发送输出缓冲区的内容（如果有）。如果要进一步处理缓冲区的内容，则必须在 ob_flush() 之前调用 ob_get_contents()，因为在调用 ob_flush() 之后会丢弃缓冲区内容。
> 
> 该函数不会像 ob_end_flush() 那样破坏输出缓冲区。

# c# - Excel VSTO 工作簿新事件

> ID：12901146
> 
> 赞同：3
> 
> 时间：2012-10-15T17:46:41.887
> 
> 标签：c#, excel, vsto

在 Excel 2007 的一个 Excel 加载项项目中，我需要检查事件以创建新工作簿。我还需要捕捉我很容易完成的 Workbook_Open 事件......在我对互联网的研究中，我发现了以下内容：

> Application.WorkbookOpen 在打开任何工作簿时引发。Excel 将作为参数打开的工作簿传递给此事件。创建新的空白工作簿时不会引发此事件。而是引发 Application.WorkbookNew 事件。

不幸的是，到目前为止我无法找到 Application.WorkbookNew 事件......我错过了什么？

键入应用程序后。自动完成功能为工作簿（包括打开）提供了一个漂亮而长的事件列表，但我找不到 WorkbookNew 事件......

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T18:45:16.340

您正在寻找`Application.NewWorkbook event`. [这是 VBA 参考](http://msdn.microsoft.com/en-us/LIBRARY/ff837373)。这是[C#/VB.Net 中的一个示例](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.new%28v=vs.80%29.aspx)

编辑：

我无法确认此信息的有效性，但我找到了以下解释[（链接）](http://www.databaseforum.info/8/697271.aspx)：

> NewWorkbook 事件是应用程序级事件。由于还有一个同名属性，Intellisense 不会向您显示此内容，除非您将应用程序对象显式转换为应用程序事件：
> 
> ```
>  ((Excel.AppEvents_Event)ThisApplication).NewWorkbook += new Microsoft.Office.Interop.Excel.AppEvents_NewWorkbookEventHandler(ThisWorkbook_NewWorkbook); 
> ```
> 
> 事件处理程序：
> 
> ```
>  void ThisWorkbook_NewWorkbook(Microsoft.Office.Interop.Excel.Workbook Wb)
>     {
>         MessageBox.Show("New workbook" + Wb.Name);
>     } 
> ```
> 
> 您尝试使用的过程仅在 ThisWorkbook VBA 项目中有效。它不能在直接的 Excel 环境之外使用。

# c# - c# 和浮点数不准确

> ID：12901147
> 
> 赞同：0
> 
> 时间：2012-10-15T17:46:42.573
> 
> 标签：c#, floating-point, ieee-754

我试图了解浮点不准确性以及如何在 c# 中处理它们。

我查看了[浮点不准确示例](https://stackoverflow.com/questions/2100490/floating-point-inaccuracy-examples)，它给出了一些很好的答案，但我想专门针对 c# 来理解它。

使用十进制“8.8”，我如何将其转换为二进制表示，然后再转换回十进制，以便该值更改为“8.8000000000000007”？

我尝试使用[How to get the IEEE 754 binary representation of a float in C# 中的](https://stackoverflow.com/questions/4249414/how-to-get-the-ieee-754-binary-representation-of-a-float-in-c-sharp)建议，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:11:52.850

不过，事情是这样的： 8.8000000000000007 也不能在 中精确表示`double`。最接近的值是 8.800000000000000710542735760100185871124267578125 （我从 Jon Skeet 的[DoubleConverter](http://www.yoda.arachsys.com/csharp/DoubleConverter.cs)获得）。然后，您可以使用`Decimal.Parse`该字符串获得十进制值 8.80000000000000071054273576。

```
decimal d = 8.8M;
double dbl = (double)d;
string s = DoubleConverter.ToExactString(dbl);
decimal dnew = decimal.Parse(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:10:56.750

您可以像这样比较一些不同的双打：

```
double a = BitConverter.ToDouble(new byte[] { 156, 153, 153, 153, 153, 153, 33, 64, }, 0);
double b = BitConverter.ToDouble(new byte[] { 155, 153, 153, 153, 153, 153, 33, 64, }, 0);
double c = BitConverter.ToDouble(new byte[] { 154, 153, 153, 153, 153, 153, 33, 64, }, 0);
double d = BitConverter.ToDouble(new byte[] { 153, 153, 153, 153, 153, 153, 33, 64, }, 0);
double e = BitConverter.ToDouble(new byte[] { 152, 153, 153, 153, 153, 153, 33, 64, }, 0);
Console.WriteLine(a.ToString("R"));
Console.WriteLine(b.ToString("R"));
Console.WriteLine(c.ToString("R"));
Console.WriteLine(d.ToString("R"));
Console.WriteLine(e.ToString("R")); 
```

使用[格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx) `"R"`显示额外的数字，但仅在需要区分其他可表示`System.Double`的 .

加法（[字节的解释](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)）：`64`并`33`给出数字的符号、大小和第一个（最高）有效位`8.8`。由于`8.8`是一个分母很小的分数（44/5 中的 5），因此其余位在很短的时间内一遍又一遍地重复也就不足为奇了。准确地说`8.8`，153s 必须永远持续下去。但是 . 文件中只有八个字节的空间`double`。因此我们需要四舍五入。四舍五入`154`给出最接近的值，因为下一个“项” ( )比`153`更接近。因此是最精确的表示。`256``0``c`

当您查看上述代码的输出时，您会发现即使我们使用了格式字符串，它`c`也只是输出。但是您知道它介于and之间（也介于and之间），从中您可以轻松估计“真实”十进制值最接近。`8.8``"R"``c``b``d``a``e``8.8000000000000007`

# jquery - 在没有插件的情况下在 jquery 中来回前进

> ID：12901148
> 
> 赞同：0
> 
> 时间：2012-10-15T17:46:45.990
> 
> 标签：jquery, back, forward

我想要做的是在使用 jQuery 的站点中启用后退和前进按钮。我现在有一个工作代码，但我很确定它太复杂了，我需要一些帮助来使它更容易并添加一个函数来让它继续前进。这是代码：

```
var recenturl;
var currenturl;

setInterval(function(){
    currenturl = /[^/]*$/.exec(window.location.pathname)[0];

    if(currenturl == 'menu_item1' || currenturl == 'menu_item2' || currenturl == 'menu_item3' || currenturl == 'menu_item4'){
        if(currenturl != recenturl && recenturl != ''){
            console.log(currenturl+" "+recenturl);
            showFrame(currenturl);
            if (typeof(window.history.pushState) == "function"){
                window.history.pushState(null, currenturl, currenturl);
            }
            window.history.back();
            recenturl = currenturl; 
        }
    }      
}, 100);

var xurl = /[^/]*$/.exec(window.location.pathname)[0];

if(xurl =='menu_item1' || xurl == 'menu_item2' || xurl == 'menu_item3' || xurl == 'menu_item4'){
    showFrame(xurl);

if (typeof(window.history.pushState) == "function"){
    window.history.pushState(null, xurl, xurl);
} 
else {
    window.location.hash = "#!" + xurl;
}

}
else {
    if (xurl != " "){
        var defaulturl = "/";       
        showFrame(defaulturl);

        if (typeof(window.history.pushState) == "function"){
            window.history.pushState(null, defaulturl, defaulturl);
        } 
        else {
            window.location.hash = "#!" + defaulturl;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:56:31.647

我建议您出于相同目的使用[jquery 后退按钮查询插件](http://benalman.com/projects/jquery-bbq-plugin/)

例子：

```
// Serializing a params string using the built-in jQuery.param method.
// myStr is set to "a=1&b=2&c=true&d=hello+world"
var myStr = $.param({ a:1, b:2, c:true, d:"hello world" });

// Deserialize the params string into an object.
// myObj is set to { a:"1", b:"2", c:"true", d:"hello world" }
var myObj = $.deparam( myStr );

// Deserialize the params string into an object, coercing values.
// myObj is set to { a:1, b:2, c:true, d:"hello world" }
var myObj = $.deparam( myStr, true );

// Deserialize jQuery 1.4-style params strings.
// myObj is set to { a:[1,2], b:{ c:[3], d:4 } }
var myObj = $.deparam( "a[]=1&a[]=2&b[c][]=3&b[d]=4", true ); 
```

# jaxb - selectManyListbox for jaxb collection

> ID：12901149
> 
> 赞同：1
> 
> 时间：2012-10-15T17:46:56.257
> 
> 标签：jaxb

i have a collection generated by JAXB that i want to associate to a selectManyListbox for multi-selection.

Here is the JSF:

```
<h:selectManyListbox value="#{field.textValueLookup.value}"                         size="5" >
 <f:selectItems value="#{consultaController.getOpcionesLookup(field.queryField)}"/>
</h:selectManyListbox> 
```

and this is the TextValueLookup class generateb by JAXB

```
//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, vhudson-jaxb-ri-2.1-833 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2012.10.15 at 06:52:09 PM CEST 
//

package es.ine.iria2.query.jaxb.complexQuery;

import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

/**
 * <p>Java class for anonymous complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType>
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element ref="{http://iria.ine.es/schemas/complexQuery.xsd}value" maxOccurs="unbounded" minOccurs="0"/>
 *       &lt;/sequence>
 *       &lt;attribute name="operator" use="required" type="{http://iria.ine.es/schemas/complexQuery.xsd}TextLookupFilterOperatorType" />
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "value"
})
@XmlRootElement(name = "textValueLookup")
public class TextValueLookup {

    protected List<String> value;
    @XmlAttribute(required = true)
    protected TextLookupFilterOperatorType operator;

    /**
     * Gets the value of the value property.
     * 
     * <p>
     * This accessor method returns a reference to the live list,
     * not a snapshot. Therefore any modification you make to the
     * returned list will be present inside the JAXB object.
     * This is why there is not a <CODE>set</CODE> method for the value property.
     * 
     * <p>
     * For example, to add a new item, do as follows:
     * <pre>
     *    getValue().add(newItem);
     * </pre>
     * 
     * 
     * <p>
     * Objects of the following type(s) are allowed in the list
     * {@link String }
     * 
     * 
     */
    public List<String> getValue() {
        if (value == null) {
            value = new ArrayList<String>();
        }
        return this.value;
    }

    /**
     * Gets the value of the operator property.
     * 
     * @return
     *     possible object is
     *     {@link TextLookupFilterOperatorType }
     *     
     */
    public TextLookupFilterOperatorType getOperator() {
        return operator;
    }

    /**
     * Sets the value of the operator property.
     * 
     * @param value
     *     allowed object is
     *     {@link TextLookupFilterOperatorType }
     *     
     */
    public void setOperator(TextLookupFilterOperatorType value) {
        this.operator = value;
    }

} 
```

The problem is that the jaxb class generated lacks of a setter value for the value collection and when the selectManyListbox is submitted (ajax or form) it throws this error:

Target Unreachable, 'null' returned null: javax.el.PropertyNotFoundException: /consultaCompleja/seleccionCamposFiltro.xhtml @39,18 value="#{field.textValueLookup.value}": Target Unreachable, 'null' returned null

Any workaround?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:06:41.657

Ok, this annotation in xsd do the trick:

```
<xs:annotation>
    <xs:appinfo>
            <jaxb:property collectionType="indexed" />
    </xs:appinfo>
</xs:annotation> 
```

Now the collection is a String[] (not a List) and has getter and setter.

This way i've defined only one collection of my schema as indexed but with thi other annotation we can specify it for all the collections:

```
<xs:annotation>
    <xs:appinfo>
            <jaxb:globalBindings collectionType="indexed" />
    </xs:appinfo>
</xs:annotation> 
```

Hope this help.

Bye

# php - 提供有关用于 Web 开发的本地 MTA 的提示

> ID：12901150
> 
> 赞同：0
> 
> 时间：2012-10-15T17:46:56.897
> 
> 标签：php, email, mta

我会试着解释我想要什么。

我有一个 PHP 脚本，可以将电子邮件发送到不同的真实地址。我不喜欢这些电子邮件进入 Internet，只需将它们全部重定向到我的本地邮件 (user@localhost) 或简单地将电子邮件写入本地文件（肯定带有标题）。

我在我的桌面上使用 Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:52:56.313

两种选择：

1.  设置 Postfix/Courier/Nullmailer/Sendmail/您用来在本地传送所有邮件的任何 SMTP 服务器。（提示：[https](https://serverfault.com/questions/144325/how-to-redirect-all-postfix-emails-to-one-external-email-address) ://serverfault.com/questions/144325/how-to-redirect-all-postfix-emails-to-one-external-email-address ）
2.  如果你想要一个只针对 PHP 的解决方案，那么最好在 PHP 中创建一个类或特殊函数来检查一些常量或变量（例如，'DEV' 或 '$debug'），并且当该变量是设置为 true，您只发送到本地电子邮件地址。

(1) 如果您始终且仅将这台计算机用于测试目的，并且不必担心不小心将电子邮件发送给真人，这可能是一个不错的选择，并且 (2) 如果您有特定的您正在临时调试的项目。

# django - Django，没有看到 request.path。我正在使用 RequestContext

> ID：12901154
> 
> 赞同：1
> 
> 时间：2012-10-15T17:47:13.590
> 
> 标签：django, django-templates

我试图在我的模板中获取 request.path 但我什么也没得到。页面上的其他所有内容都可以正常工作。我已经做好了：

在views.py

```
from django.template import RequestContext

return render_to_response('frontpage.html', {}, context_instance=RequestContext(request)) 
```

在我的模板frontpage.html

```
{{ request.path  }} 
```

我还缺少什么？我会发布一些代码，但我不知道要开始。

编辑：我正在使用 localhost 以防万一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T17:52:34.280

确保您的[`TEMPLATE_CONTEXT_PROCESSORS`](https://docs.djangoproject.com/en/1.4/ref/settings/#template-context-processors) 设置包括[`django.core.context_processors.request`](https://docs.djangoproject.com/en/1.4/ref/templates/api/#django-core-context-processors-request); 这就是实际添加`request`变量的原因。默认情况下未启用。

（另外，[`django.shortcuts.render`](https://docs.djangoproject.com/en/1.4/topics/http/shortcuts/#render)通常比`render_to_response`使用明确的. 更容易`RequestContext`。）

# boto - 在 dynamodb 中，您可以使用“put”而不是“update_item”吗

> ID：12901157
> 
> 赞同：1
> 
> 时间：2012-10-15T17:47:31.853
> 
> 标签：boto, amazon-dynamodb

我想使用 boto 更新 dynamodb 中的一个项目，我这样做的方式，`get_item`无论如何我都需要它，然后我更改该项目并将`put`其返回，是否有任何区别，性能损失或其他，使用`update_item`而不是`put`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T18:03:10.817

我不知道两者之间的任何性能差异。无论如何，使用 DynamoDB，您需要为保证的吞吐量付费。

这就是说，`UpdateItem`允许您仅编辑项目的特定子集。此外，这是使用原子增量的唯一方法。

如果您有一个非常大的 Item 并且想要更新一个小字段，那么您应该使用 UpdateItem 来代替 WriteCapacity。但这是主要用例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T23:32:37.520

保存吞吐量，只更新需要更新的字段。update_item 唯一的缺点是它不能作为批处理函数使用。

**更正：**正如评论中所指出的，Dynamo 实际上使用最大的记录来计算写入容量，所以如果您只更新一个字段，它仍然会根据已经存在的记录的总大小来计算写入，这也适用于您PUT 一条具有相同 ID 的记录。

# assembly - MSP430 组装说明

> ID：12901160
> 
> 赞同：6
> 
> 时间：2012-10-15T17:47:40.327
> 
> 标签：assembly, processor, msp430

我试图了解这些指令对 MSP 430 处理器的作用：

```
(1) MOV.w  #0x0055,R5
(2)   BIC.w  #0xFFEE,R5
(3)   BIS.w  #0x1144,R5 
```

我找不到太多解释汇编指令的东西，并且很想知道这些指令的作用以及每条指令后存储在 r5 寄存器中的内容。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-15T20:27:23.183

`MOV`将值移动到目的地。在这种情况下`R5`，将包含值 0x0055。

`BIC`清除目标值中的位。如果 R5 在指令之前包含 0x0055，则它将包含值 0x0011。*（将其*视为反向指令）。

`BIS`设置位——这实际上与*or*操作相同。`R5`在此指令之后将具有值 0x1155。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T17:59:05.783

`MOV.w #0x0055,R5`执行以下操作： `src → dst`

`BIC.w #0xFFEE,R5`执行以下操作`not.src .and. dst → dst`

`BIS.w #0x1144,R5`执行以下操作：`src .or. dst → dst`

只需查看[MSP 430 用户指南](http://www.ti.com/lit/ug/slau049f/slau049f.pdf)

> BIS[.W] 设置目标位 BIS.B
> 设置目标位
> 
> 语法 BIS src,dst 或
> BIS.W src,dst BIS.B src,dst
> 
> 操作 src .OR。dst -> dst
> 
> 说明 源操作数和目标操作数进行逻辑或运算。结果被放入目的地。源操作数不受影响。
> 
> 状态位 状态位不受影响。
> 
> 模式位 OSCOFF、CPUOFF 和 GIE 不受影响。
> 
> 示例 RAM 字 TOM 的六个 LSB 已设置。
> 
> BIS #003Fh，汤姆；设置 RAM 位置 TOM 中的六个 LSB
> 
> 示例 RAM 字节 TOM 的三个 MSB 被设置。
> 
> BIS.B #0E0h,汤姆; 设置 RAM 位置 TOM 中的 3 个 MSB

当然：

> BIC[.W] 清除目标中的位 BIC.B
> 清除目标中的位
> 
> 语法 BIC src,dst 或
> BIC.W src,dst BIC.B src,dst
> 
> 操作 .NOT.src .AND。dst -> dst
> 
> 说明 反转的源操作数和目标操作数是逻辑与。结果被放入目的地。源操作数不受影响。
> 
> 状态位 状态位不受影响。
> 
> 模式位 OSCOFF、CPUOFF 和 GIE 不受影响。
> 
> 示例 RAM 字 LEO 的六个 MSB 被清零。
> 
> BIC #0FC00h,LEO ; 清除 MEM(LEO) 中的 6 个 MSB
> 
> 示例 RAM 字节 LEO 的五个 MSB 被清除。
> 
> BIC.B #0F8h,LEO ; 清除 RAM 位置 LEO 中的 5 个 MSB

我能够在这个[网站上找到带有相关链接的用户指南](https://stackoverflow.com/questions/1429116/what-do-these-instructions-do?rq=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-25T19:31:23.867

现有答案中缺少的一条信息是 .W 与 .B 的重要性。

从第 56 页的 MSP430F24x 用户指南 (SLAU144J) 的第 3.4 节中指定，

> 黑白：
> 
> 字节或字操作：
> 
> 0：字操作
> 
> 1：字节操作

值得注意的是，默认是指令对一个字进行操作。

# tridion - 如何处理 Tridion 的 CME 中的视图加载

> ID：12901161
> 
> 赞同：9
> 
> 时间：2012-10-15T17:47:42.090
> 
> 标签：tridion

我有一个 Tridion 2011 Content Manager Explorer 的扩展，我想在其中只为特定视图执行特定的 JavaScript 片段。

我使用以下 JavaScript 片段执行此操作：

```
var onDisplayStarted = function () {
    $evt.removeEventHandler($display, "start", onDisplayStarted);

    if ($display.getView().getId() == "PublishPopup") {
      ...
    }
};
$evt.addEventHandler($display, "start", onDisplayStarted); 
```

该代码过去运行良好，它肯定会在`PublishPopup`打开时触发，并确保我的代码仅在该特定视图中执行。

但不幸的是，我有时会在加载时在 JavaScript 控制台中收到以下错误消息`DashboardView`：

> 未捕获的类型错误：对象 # 没有方法 'getId'

该错误不会导致任何问题，很可能是因为 Tridion 的 UI 框架正确处理了事件处理程序中的错误。但我仍然希望在 JavaScript 控制台中不显示错误。

我了解如何检测该`getId`方法是否存在：

```
if ($display.getView().getId && $display.getView().getId() == "PublishPopup") { 
```

但这只是意味着代码永远不会执行。虽然它现在似乎工作正常，但`PublishPopup`我宁愿知道处理这种类型的“我的代码应该在视图初始化后执行”序列的正确方法。

有谁知道更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T18:15:29.653

您的配置中是否有代码仅在弹出窗口中包含您的扩展？例如：

```
<cfg:extension target="Tridion.Web.UI.Editors.CME.Views.Popups.Publish"> 
```

我通常使用该配置仅在 cme 中的特定视图上运行脚本。

然后我的 js 文件如下所示：

```
$evt.addEventHandler($display, "start", onDisplayStarted);

function onDisplayStarted() {

        $log.message("stuff here");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T07:35:02.617

好吧，有两个不同的视图，它们同时加载 - Dashboard View 和 Tridion Dashboard View。Tridion 仪表板视图是您在功能区工具栏中单击 SDL Tridion 选项卡时看到的内容。事实上，这个视图没有 getId 方法（这很奇怪，顺便说一句）。这就是为什么你有这个问题。

尽管如此，configuraton 文件中文件组背后的整个想法是尽量减少为每个视图加载的 javascript 数量，并尽量减少不需要的 javascript 处理。因此，我建议将您的 javascript 文件拆分为多个部分，并仅在必要时加载它们。

# c++ - C/C++ 中整数类型别名的标准保证？例如：“unsigned”是否总是等于“unsigned int”？

> ID：12901170
> 
> 赞同：16
> 
> 时间：2012-10-15T17:48:53.287
> 
> 标签：c++, c, types, integer, alias

第一个问题：

*   “无符号”总是与“无符号整数”相同吗？
*   “签名”总是与“int”相同吗？
*   “short”总是与“signed short”相同吗？
*   是 ...

第二个问题：

如果 C/C++ 标准指定了上述问题的答案，那么哪些段落与它们相关？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T17:52:18.757

是的，这些都是有保证的。在 C++11 中，请参阅 §7.1.6.2[dcl.type.simple]/table 10，其中列出了所有简单类型说明符（及其组合）及其含义。例如，该表包括以下内容：

```
unsigned      => unsigned int
unsigned int  => unsigned int

signed        => int
signed int    => int
int           => int 
```

C11 在 §6.7.2/2 中有一个类似的映射（它的格式不同，但除此之外它指定了相同的等效组合组，至少对于 C 和 C++ 共有的所有类型）。

# php - CodeIgniter：解析位于 javascript 中的动态语言字幕

> ID：12901172
> 
> 赞同：3
> 
> 时间：2012-10-15T17:48:56.410
> 
> 标签：php, codeigniter, translation, codeigniter-2

我有一个需要本地化的javascript代码，即。

```
function js_proc() {
    var some_data = 'this text needs to be translated dynamically at runtime';
} 
```

所以我重新写了这样的：

```
function js_proc() {
    var some_data = <?php echo $this->lang->line('some_data_id'); ?>;
} 
```

在视图中，我这样写了js链接：

```
<script type="text/javascript" src="www.domain.com/codeigniter/get_js/file-1/"></script> 
```

它调用控制器中的函数 get_js() 。这个想法是让 get_js() 函数读取 js 文件并翻译语言字符串......

要翻译的js字符串太多了，所以我不能`every string`作为变量传递。理想情况下，我想通过 codeigniter 语言文件来完成这项工作。

**我的问题是：有没有办法解析 js 文件中的 php 部分并执行（=翻译）它们？**IE。

```
class App extends CI_Controller
{
    function get_js {
        $content = file_get_contents($js_file);
        echo parse_php($content);
    }
    ...
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-27T16:00:31.703

根据语言文件的大小，允许 javascript 访问整个语言数组的快速方法可能是将数组加载到全局 javascript 数组中；

```
<script>
    var globalLang = <?php echo json_encode($this->lang->language); ?>;
</script> 
```

然后像这样访问你的javascript；

```
globalLang['some_lang_key'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T11:49:43.580

我不太确定“要翻译的 js 字符串太多，所以我不能将每个字符串都作为变量传递”是什么意思，但是如果您正在寻找一些自动解析，这将无济于事.

但这可能对其他人有所帮助，所以就这样吧。

对于理想情况，我使用如下系统：

在我看来，我使用 codeigniter 语言支持将本地化添加为 JavaScript 全局变量。就像是：

```
<script type="text/javascript">
    var noEmailError = "<?php echo $this->lang->line('enter_your_email'); ?>";
</script> 
```

然后在那之后，通常，紧接着，我包括引用全局变量的脚本：

```
<script type="text/javascript" src="/scripts/validate.js"></script> 
```

脚本内部：

```
alert(noEmailError); 
```

将显示本地化的文本就好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:05:44.020

在页面输出的全局范围内为您的 javascript 字符串创建一个 json 对象：

```
<script>
    var oGlobalStrings = {
            some_data : '<?=$this->lang->line('some_data_language_key');?>'
        }
</script> 
```

然后，您可以使用以下语法在整个 Javascript 应用程序中使用它：

```
oGlobalStrings.some_data 
```

效果很好，可以在整个应用程序中轻松处理。

# jquery-ui-dialog - jqueryui 对话框按钮在返回 false 后将不起作用

> ID：12901177
> 
> 赞同：0
> 
> 时间：2012-10-15T17:49:12.887
> 
> 标签：jquery-ui-dialog

目标：提交前的表单验证

程序：当用户单击确定时，表单验证代码运行。如果有任何空`input`字段，则返回 false。到目前为止，这一切都有效。

问题：如果返回 false，则下一个确定或关闭按钮无法访问对话框中显示/编辑的输入框的值。警报有效，但是一旦尝试获取`input`元素的值，javascript就会死亡。

`input`返回 false 后如何访问元素值？

* * *

HTML 看起来像这样：

```
<tr>
    <td>Company Name*<br />
        <input type="text" id="cn" name="co_name" value="'.$client_data['co_name'].'">
    </td>
    <td>Company Main Phone*<br />
        <input type="text" id="cp" name="co_phone1" value="'.$client_data['co_phone1'].'">
    </td>
    <td>Company Website*<br />
        <input type="text" id="cw" name="co_website" value="'.$client_data['co_website'].'">
    </td>
</tr> 
```

* * *

Javascript/JQuery 是：

```
var cn = $('#cn');
var cp = $('#cp');
var cw = $('#cw');

$('#co_label').dialog({
    autoOpen: true,
    height: 600,
    width: 800,
    modal: true,
    buttons: 
        {
            Test: function() {
                alert('Clicked the test button');
                return false;
            },
            Okay: function() {
                alert('Okay button clicked');
                cn = cn.val();
                cp = cp.val();
                cw = cw.val();
                if (cn=='' || cp=="" || cw=="") {
                    alert('Fields marked with an asterisk cannot be empty.');
                    return false;
                }else{
                    //Save form data via ajax
                    $( this ).dialog( "close" );
                } //END ELSE
            },
            Cancel: function() {
                alert('Cancel button clicked');
                $( this ).dialog( "close" );
            }
        },
        close: function() {
            window.location = 'index.php';
        }
}) 
```

更新编辑：

多亏了科琳富有洞察力的问题，我对问题有了更好的理解，并相应地更新了问题。似乎正在发生的事情是，当尝试在返回 false 后读取输入元素值时，javascript 会死掉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:46:09.517

```
var cn = $('#cn'); 
```

...

```
cn = cn.val(); 
```

您将 cn 声明为 js 对象，然后尝试将其重新分配为字符串。这可能会在第一次工作（甚至不确定），但后来你肯定会在尝试切换回对象时失败，并导致可能阻止其余代码执行的 JS 异常。

尝试：

```
var cnText = cn.val() 
```

或类似的东西。或者只是跳过整个分配`$("#cn")`给 var 部分。

# java - 如何访问只有部分文件名的文件？

> ID：12901183
> 
> 赞同：2
> 
> 时间：2012-10-15T17:49:38.903
> 
> 标签：java, file

我正在尝试实例化一个 File 变量，但只知道文件名的一部分。即我知道文件名以“pass_231_”开头，但不知道其余的。这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T17:53:08.043

如果你知道它在哪个目录，是的。您可以使用[`FileFilter`](http://docs.oracle.com/javase/6/docs/api/java/io/FileFilter.html)：

```
final String prefix = "pass_231_"
File dir = ... ;
File[] candidates = dir.listFiles(new FileFilter() {
    @Override
    public boolean accept(File pathname) {
        return pathname.getName().startsWith(prefix);
    }
});
// candidates will contain all files starting with "pass_231_" 
```

如果您需要递归搜索（包括子文件夹），您可以这样做：

```
String prefix = "pass_231_";
File dir = ... ;
List<File> candidates = new ArrayList<File>();
searchRecursively(dir, prefix, candidates);
// candidates will contain all files starting with "pass_231_" 
```

然后`searchRecursively`看起来像这样：

```
public static void searchRecursively(File dir, final String prefix, List<File> candidates) {
    File[] matches = dir.listFiles(new FileFilter() {
        @Override
        public boolean accept(File pathname) {
            return pathname.getName().startsWith(prefix);
        }
    });
    candidates.addAll(Arrays.asList(matches));
    File[] subdirs = dir.listFiles(new FileFilter() {
        @Override
        public boolean accept(File pathname) {
            return pathname.isDirectory();
        }
    });
    for (File subdir : subdirs) {
        searchRecursively(subdir, prefix, candidates);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T17:52:03.600

尝试`File.listFiles(filter)`在包含该文件的目录上使用该方法。更多信息[在这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#listFiles%28java.io.FileFilter%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-25T11:29:34.060

万一有人试图找到“如何按他的名字的一部分打开文件”，就像我刚才一样。

```
 List<String> list = Files.walk(path)
            .map((q) -> q.getFileName().toString())
            .filter((s) -> s.contains("2019-05-25"))
            .collect(Collectors.toList());

    if(list.size() == 1){
        System.out.println("your file is" + list.get(0));
    } else {
        System.out.println("there are more than one file");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T17:51:58.940

您可以列出文件夹中的所有文件，然后在知道全名后打开文件。

请参阅[File.list()](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#list%28%29)方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T17:52:24.363

您必须对文件夹进行过滤，但如果过滤器返回多个文件，您必须决定打开哪个文件。

# orbeon - Orbeon 3.9 资源管理

> ID：12901186
> 
> 赞同：1
> 
> 时间：2012-10-15T17:49:51.917
> 
> 标签：orbeon

我正在尝试将 orbeon 3.7 升级到 orbeon 3.9，我发现现在 orbeon 以不同的方式访问资源。

在 orbeon 3.7 中，我像这样更改了 WEB-INF/ressources/page-flow.xml：

```
 <!-- Dispatch request to a specific application -->
  <page id="apps" path-info="/([^/]+)/([^/]+)/([^/]+).*" matcher="oxf:perl5-matcher" model="/${1}/${2}/${3}/page-flow.xml"/> 
```

以这种方式访问​​ 127.0.0.1:8080/orbeon/myapp/user/role

但是使用这种配置 orbeon 3.9 没有找到 css 和图像

我的应用程序位于 WEB-INF/ressources/myapp/"folder"/"subfolder" 下

在 3.9 中，我以相同的方式配置 page-flow.xml，我意识到如果我将应用程序复制到 WEB-INF/ressources/apps/ 它会找到 css 和图像但不是解决方案，因为我必须将我的应用程序放入两个不同的位置。

知道如何配置 orbeon 3.9 使其行为方式与 orbeon 3.7 相同，或者至少将应用程序放置在与 css 和图像相同的文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:54:57.183

我在解决我的问题的 orbeon 3.9 文档中找到了这个：

* * *

为资源预置的默认应用程序路径

oxf.url-rewriting.app-prefix 属性现在设置为 /apps 而不是空白。

使用 Orbeon Forms，如果您将 /foo/bar 作为页面路径写入，这意味着可以访问 /apps 资源文件夹下名为 foo 的应用程序。具体来说，检索页面流 /apps/foo/page-flow.xml。

另一方面，在 Orbeon Forms 3.9 之前，如果您编写 /foo/bar.gif，则在 /foo/bar.gif 而不是 /apps/foo/bar.gif 下搜索资源。

如果您想将资源与页面一起存储，这会迫使您将 /apps 预先添加到所有资源路径，而不是页面路径。

对 oxf.url-rewriting.app-prefix 属性的更改通过在缺少 /apps 前缀时自动添加来解决该问题。要使此功能正常工作，所有非平台（即非 Orbeon）资源，包括 CSS、JavaScript 和图像，都应位于 /apps/[application] 下的应用程序旁边。

您可以通过在 properties-local.xml 中将属性设置为空字符串来关闭此功能：

```
 <property as="xs:string" name="oxf.url-rewriting.app-prefix" value="/apps"/> 
```

问候

# html - Schema.org 隐藏的 html

> ID：12901189
> 
> 赞同：0
> 
> 时间：2012-10-15T17:50:05.987
> 
> 标签：html, magento, magento-1.4, php, schema.org

我已经就我的丰富网页摘要联系了谷歌，他们说某些 html 是隐藏的，这就是为什么丰富网页摘要在搜索引擎上还不可见的原因：

示例： URL：[http](http://www.theprinterdepo.com/hp-color-laser-4700dn-printer-q7493a-r) ://www.theprinterdepo.com/hp-color-laser-4700dn-printer-q7493a-r 标记类型：产品、评论 隐藏内容：6

问题是，我在 magento、summary.phtml 中以这种方式实现了代码，但我看不到它是如何隐藏的。

```
<?php if ($this->getReviewsCount()): ?>
    <div class="ratings">
        <?php if ($this->getRatingSummary()):?>
          <span itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">
            <div class="rating-box">

                <div class="rating" style="width:<?php echo $this->getRatingSummary() ?>%"><meta itemprop="ratingValue" content="<?php echo $this->getRatingSummary()/10 ?>"/></div>
                <span itemprop="reviewCount"><?php echo $this->getReviewsCount() ?></span>
            </div>
          </span>
        <?php endif;?>
        <p class="rating-links">
            <a href="<?php echo $this->getReviewsUrl() ?>"><?php echo $this->__('%d Review(s)', $this->getReviewsCount()) ?></a>
            <!--<span class="separator">|</span>-->
            <!--<a href="<?php echo $this->getReviewsUrl() ?>#review-form"><?php echo $this->__('Add Your Review') ?></a>-->
        </p>
    </div>
<?php elseif ($this->getDisplayIfEmpty()): ?>
    <p class="no-rating"><a href="<?php echo $this->getReviewsUrl() ?>#review-form"><?php echo $this->__('Be the first to review this product') ?></a></p>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:05:44.793

由于您没有引用您从谷歌获得的信息，我只能做一些一般性的说明：

谷歌似乎只注意到主要商业和社区网站上的 Schema.org 一致标记。否则，他们似乎并没有过多关注它。

您的代码有基本的语法错误，例如试图将`div`元素放入`span`元素中。（根据 validator.w3.org，该页面共有 110 个可报告的标记错误。）

PHP代码是无关紧要的。浏览器看不到它，搜索引擎也看不到它。

# salesforce - Salesforce 托管软件包安装失败

> ID：12901190
> 
> 赞同：0
> 
> 时间：2012-10-15T17:50:08.373
> 
> 标签：salesforce, apex-code, visualforce

我已经更新了我的托管包 - 从 beta 14 到 beta 15。之前的 14 个版本都运行良好。我可以毫无问题地上传并生成安装链接。但是，当我尝试在单独的开发人员组织中安装测试版时，我收到以下消息（我称之为错误，但根本没有任何细节表明它是否是错误）：

> 您请求的安装失败。请再试一次。
> 
> 您的 salesforce.com 组织中的任何数据或设置信息都不会受到此错误的影响。
> 
> 如果此错误仍然存​​在，请通过您的正常渠道和参考号联系 salesforce.com 支持：35557683-12022 (1510032338)

我已经提交了 SFDC 支持的票，但由于我不是主要客户，他们说需要 2 天才能回复我。有没有人不知道如何挖掘这个？是否有一个我可以查看的日志文件可以指示问题所在？在此先感谢您可以提供任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T20:57:01.570

欢迎享受 Salesforce 支持带来的乐趣。我希望你有足够的耐心，你会需要它。

您收到的是内部异常。故意不提供详细信息，从而使讨厌的人更难利用该系统。

这意味着您别无选择，只能等待 2 天，但不要期望 2 天后有答复。您会收到要求管理员访问权限或其他内容的回复。那么也许你的案子会升级。然后最终有人可以给你一些细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:22:27.733

我今天从 Salesforce 支持得到确认，如果您有一个名为“x”或“c”的静态资源，那么构建包的进程将看不到该资源。这正是我的经历。此外，即使在我的代码中删除了对它的所有引用之后，它也不会让我删除我命名为“x”的静态资源。

为了解决这个问题，我必须将我的所有代码（减去名为“x”的静态资源）移动到一个新的开发组织，并从那里进行部署。

# jquery - 返回的 Fusion Tables v1 新 JSON 不适用于 jqGrid 和 jsonReader

> ID：12901191
> 
> 赞同：0
> 
> 时间：2012-10-15T17:50:09.420
> 
> 标签：jquery, json, jqgrid, google-fusion-tables

这是我与 Fusion Tables 测试版一起使用的代码（下面是 Oleg 去年帮助我的 jqGrid 代码的一部分）：

```
jsonReader: {
repeatitems: false,
cell: "", // the same as cell: function (obj) { return obj; }
root: "table.rows",
page: function (obj) { return 1; },
total: function (obj) { return 1; },
records: function (obj) { return obj.table.rows.length; }
}, 
```

这是从 Google 返回的 OLD JSON 数据：

```
jQuery16406014587786572121_1350317794100(
{"table":
    {
    "cols":
        ["id","latitude","longitude","name","address_line_1","address_line_2","address_line_3","postcode"],
    "rows":
        [[1234,"55",-1.5, --etc 
```

使用 Google 的新 API，返回的 JSON 现在如下所示：

```
{
"kind": "fusiontables#sqlresponse",
"columns": [
    "id",
    "latitude",
    "longitude",
    "name",
    "address_line_1",
    "address_line_2",
    "address_line_3",
    "postcode"
],
"rows": [
    [
        "1234",
        "55",
        -1.5,
        "Name One",
        "Road 1",
        "Road 2",
        "Sunderland",
        "SR1 1AA"
    ], 
```

它似乎没有“根”，我无法弄清楚如何让 jsonReader 与这个新的 JSON 一起工作。我有一个谷歌，看看其他人是否遇到过这个问题，但只有一两个未回答的点击。爪哇。谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:00:24.127

我只看到从 JSON 响应中删除了“表”部分。所以我想你可以尝试以下方法`jsonReader`：

```
jsonReader: {
    cell: "",
    page: function (obj) { return 1; },
    total: function (obj) { return 1; },
    records: function (obj) { return obj.rows.length; }
} 
```

此外，您可以包含或用于列定义 (in `id: 0`) 。`jsonReader``key: true``"id"``colModel`

顺便说一句，我认为这不是`repeatitems: false`旧数据格式的正确设置。

# android - 带有导航列表的 ActionBarSherlock：如何保存片段实例

> ID：12901194
> 
> 赞同：2
> 
> 时间：2012-10-15T17:50:15.487
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我有一个带有一个活动和很多片段的小应用程序；我与 SherlockFragment 一起工作。我的问题是我不知道如何保存片段的实例以获取出现在特殊导航列表项上的最后一个片段。

例如：我选择一个导航列表项，例如“信息”。然后我得到 FragmentA，FragmentA 从 SherlockListFragment 扩展，所以我可以选择一个 ListItem，然后我得到 FragmentB。FragmentB 也从 SherlockListFragment 扩展，所以我得到 FragmentC 等等。

现在问题如下：当我选择另一个导航列表项目时，例如“home”，我得到 FragmentD。现在我再次选择我的导航列表项“信息”，我希望出现 FragmentC。

在我的代码片段中，我只是替换了片段，但我需要知道哪个片段显示为最后。

我的 SherlockFragmentActivity：

```
public class MainActivity extends SherlockFragmentActivity implements ActionBar.OnNavigationListener{
    private FragmentHome mFragmentHome = null;
    private FragmentInfo mFragmentInfo = null;

    private static final String mListItemHome = "starthome";
    private static final String mListItemInfo = "startinfo";

public void onCreate(Bundle savedInstanceState) {
    setTheme(R.style.My_Theme);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_fragment);

    getSupportActionBar().setDisplayShowTitleEnabled(false);
    getSupportActionBar().setHomeButtonEnabled(false);
    getSupportActionBar().setDisplayHomeAsUpEnabled(false);

    Context context = getSupportActionBar().getThemedContext();
    // Navlist
    ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(context,
            R.array.locations, R.layout.sherlock_spinner_dropdown_item);
    list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    getSupportActionBar().setListNavigationCallbacks(list, this);

    mFm = getSupportFragmentManager();
    //Init of my Fragments:              
    mFragmentHome = new FragmentHome();
    mFragmentInfo = new FragmentInfo();
    }

@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {

    FragmentTransaction ft = mFm.beginTransaction();
        switch(itemPosition){
        case 0:
            ft.replace(R.id.fragment_content, mFragmentHome);
            ft.addtoBackStack(mListHome);
            ft.commit();
            return true;
        case 1:
            ft.replace(R.id.fragment_content, mFragmentInfo);
            ft.addtoBackStack(mListInfo);
            ft.commit();
            return true;
        default:
            return false;
       }
  }
} 
```

我的片段看起来像这样：

```
 public class FragmentInfo extends SherlockListFragment{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    //disable the HomeButton as "Up"-Button
    ActionBar actionBar = getSherlockActivity().getSupportActionBar();
    actionBar.setHomeButtonEnabled(false);
    actionBar.setDisplayHomeAsUpEnabled(false);
    ...
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {

    Bundle bundle = new Bundle();
    bundle.putString("x", x );
    bundle.putString("y", y);

    FragmentManager fm = getFragmentManager();
    FragmentInfo fragment = new FragmentInfo(fm);
    fragment.setArguments(bundle);

    FragmentTransaction ft = fm.beginTransaction();
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.replace(R.id.fragment_content, fragment);
    ft.addToBackStack("info");
    ft.commit();        
    }
} 
```

我真的整天都在寻找解决方案，但我没有找到可以帮助我的东西。我想我需要这样的标签： [Actionbarsherlock + 标签 + 多片段？](https://stackoverflow.com/questions/10082163/actionbarsherlock-tabs-multi-fragments) 或者类似 TabHost 的列表...

我希望你能帮助我。

最诚挚的问候

**编辑：**

我只是遇到了隐藏和显示的问题。在我的 xml 布局中，我有一个带有 id 的 Framelayout：fragment_content。此 id 始终用于将一个片段替换为另一个片段。现在我添加另一个带有 id 的 Framelayout：fragment_info。我这样做是为了得到我用 FragmentManager 替换的最后一个 Fragment。

现在，我的 NavigationItemSelected 方法看起来像这样：

```
@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    FragmentTransaction ft = mFm.beginTransaction();
    switch(itemPosition){
    case 0:
       if(mFragmentHome==null){
           mFragmentHome = new FragmentHome();
           ft.replace(R.id.fragment_content, mFragmentHome)
           ft.addToBackStack(mListItemHome);
           ft.commit();
       }else{
           if(mFragmentHome.isHidden()){
               ft.show(mFragmentHome);
               ft.replace(R.id.fragment_content, mFragmentHome)
               ft.addToBackStack(mListItemHome);
               ft.commit();
           }
           ft.hide(mFragmentInfo);
       }
    case 1:
       if(mFragmentInfo==null){
           mFragmentInfo = new FragmentInfo();
           ft.replace(R.id.fragment_info, mFragmentInfo)
           ft.addToBackStack(mListItemInfo);
           ft.commit();
           ft.hide(mFragmentHome)
       }else{
           ft.hide(mfragmentHome();
           //here I get the last Fragment I choose under the navlist-Item "Info"
           Fragment f = getFragmentManager.findFragmentById(R.id.fragment_info);
           ft.replace(R.id.fragment_info, f);
           ft.addToBackStack(mListItemInfo);
           ft.commit();
           }
           ft.hide(mFragmentHome);
   default:
   return false;
   }
}
} 
```

我的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
        <FrameLayout
        android:id="@+id/fragment_content"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
        <FrameLayout
        android:id="@+id/fragment_info"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>
</LinearLayout> 
```

但是现在我的后退按钮有另一个问题。当我选择菜单信息并浏览 FragmentA 到 FragmentB 到 FragmentC 时，然后我选择 navlist-Item "Home" 并再次选择 navlist-Item "Info"，所以我得到了 FragmentC。但是当我现在按下 BackButton 时，Activity 将被销毁。

但我希望在按下 BackButton 后出现 FragmentB -> FragmentA，现在我可以完成 Activity。

我知道我可以覆盖后退按钮，但我想我犯了一些错误。也许我应该使用分离和附加？我认为应该有一个更简单的方法，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:34:49.057

我知道为时已晚。但它会帮助其他一些人。使用显示和隐藏而不是替换。这是一个示例代码。

```
private class MyTabListener implements ActionBar.TabListener {
    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {

        switch (tab.getPosition()) {
        case 0:

            if (frag1 == null) {
                // If not, instantiate and add it to the activity
                frag1 = Fragment.instantiate(getApplicationContext(),
                        FeedsActivity.class.getName());
                ft.add(android.R.id.content, frag1, "Feeds");
            } else {
                // If it exists, simply attach it in order to show it
                ft.show(frag1);
            }
            return;

        case 1:
            if (frag2 == null) {
                // If not, instantiate and add it to the activity
                frag2 = Fragment.instantiate(getApplicationContext(),
                        ProfileActivity.class.getName());
                ft.add(android.R.id.content, frag2, "Profile");
            } else {
                // If it exists, simply attach it in order to show it
                ft.show(frag2);
            }
            return;
        case 2:

            if (frag3 == null) {
                // If not, instantiate and add it to the activity
                frag3 = Fragment.instantiate(getApplicationContext(),
                        History.class.getName());
                ft.add(android.R.id.content, frag3, "History");
            } else {
                // If it exists, simply attach it in order to show it
                ft.show(frag3);
            }

            return;

        }

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
        if (frag1 != null) {
            // Detach the fragment, because another one is being attached
            switch (tab.getPosition()) {
            case 0:
                ft.hide(frag1);
                return;
            case 1:
                ft.hide(frag2);
                return;
            case 2:
                ft.hide(frag3);
                return;

            }

        }
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
    }
} 
```

# c# - “由于启动用户实例的进程失败，无法生成 SQL Server 的用户实例”

> ID：12901195
> 
> 赞同：0
> 
> 时间：2012-10-15T17:50:16.347
> 
> 标签：c#, asp.net, sql-server, visual-studio

我之前发布了这个问题，它被关闭了。我的问题与其他问题不同，当用户在登录控制中输入错误的用户名或密码时，我在登录的一页中收到此消息。出现此消息，但如果用户名和密码正确。它工作正常，用户可以登录。我的控制是：

```
 <asp:Login ID="loginPane" runat="server" Font-Names="Tahoma" Font-Size="11px" LoginButtonText="Login"
                                                RememberMeSet="True" TitleText="" Width="314px" Height="201px" BackColor="gray">
                                                <TextBoxStyle BorderColor="Gray" BorderStyle="Solid" BorderWidth="1px" Font-Names="Tahoma"
                                                    Font-Size="11px" Width="200px" />
                                                <LabelStyle HorizontalAlign="Left" />
                                                <LoginButtonStyle BorderColor="Gray" BorderStyle="Solid" BorderWidth="1px" />
                                                <LayoutTemplate>
                                                    <table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse;
                                                        width: 325px; height: 217px; background-color: Gray;">
                                                        <tr>
                                                            <td style="width: 325px">
                                                                <table border="0" cellpadding="0" style="width: 319px; height: 196px">
                                                                    <tr>
                                                                        <td align="left">
                                                                        </td>
                                                                        <td style="width: 312px" align="left">
                                                                            <asp:TextBox ID="UserName" runat="server" BorderColor="Gray" BorderStyle="Solid"
                                                                                BorderWidth="1px" Font-Names="Tahoma" Font-Size="16px" Height="32px" Width="260px"
                                                                                ForeColor="Gray" placeholder="Username" BackColor="white"></asp:TextBox>
                                                                            <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" ControlToValidate="UserName"
                                                                                ErrorMessage="User Name is required." ToolTip="User Name is required." ValidationGroup="loginPane">*</asp:RequiredFieldValidator>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td align="left" style="height: 17px">
                                                                        </td>
                                                                        <td style="height: 17px; width: 312px;" align="left">
                                                                            <asp:TextBox ID="Password" runat="server" BorderColor="Gray" BorderStyle="Solid"
                                                                                TextMode="Password" BorderWidth="1px" Font-Names="Tahoma" Font-Size="16px" Height="32px"
                                                                                Width="260px" type='password' placeholder="Password" ForeColor="Gray"></asp:TextBox>
                                                                            <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" ControlToValidate="Password"
                                                                                ErrorMessage="Password is required." ToolTip="Password is required." ValidationGroup="loginPane">*</asp:RequiredFieldValidator>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="2" style="height: 25px" align="left">
                                                                            <br />
                                                                            &nbsp;
                                                                            <asp:CheckBox ID="RememberMe" runat="server" Checked="True" Text="Remember me next time."
                                                                                ForeColor="white" Font-Size="small" />
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td align="center" colspan="2" style="color: red">
                                                                            <asp:Literal ID="FailureText" runat="server" EnableViewState="False"></asp:Literal>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <%-- style="opacity: 1; filter: alpha(opacity=100); -moz-opacity: 1;
                                                                            -khtml-opacity: 1;"--%>
                                                                        <td align="right" colspan="2">
                                                                            <asp:Button ID="LoginButton" runat="server" BorderColor="#FFF8C6" BorderStyle="None"
                                                                                BorderWidth="1px" CommandName="Login" Height="34px" Text="Login" ValidationGroup="loginPane"
                                                                                Width="90px" Font-Size="Medium" ForeColor="#C11B17" Font-Bold="True" BackColor="White"
                                                                                OnClick="LoginButton_Click" />
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </LayoutTemplate>
                                            </asp:Login> 
```

当我在我的机器上发布但在远程服务器上发布时出现此消息：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接

and when run on VS it works fine and show message of login failing that i show to user

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:17:42.650

thanks all,

the first error occur as i have sql express running so i have to stop it and the second one occur when try by login button and fail. it try to login via login control so i have to set login authenticate to false

# hibernate - 无法反序列化 org.hibernate.type.SerializationException

> ID：12901206
> 
> 赞同：3
> 
> 时间：2012-10-15T17:50:45.643
> 
> 标签：hibernate, serialization

请帮助-我的应用程序运行良好，直到今天。今天我得到了“无法反序列化”的异常。java.io.eofException。有时我能够获得数据。问题是间歇性的。这里可能是什么问题？

```
@Entity
@Cacheable
@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL)
public class Filter {
private int id;
    private String name;
    private User user;
    private NameValue[][] filterMap;

    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE)
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    @ManyToOne(
            targetEntity = User.class
    )
    @JoinColumn(name="userName")
    public User getUser() {
        return user;
    }
    public void setUser(User user) {
        this.user = user;
    }
    @Lob
        public NameValue[][] getFilterMap() {
        return filterMap;
    }
    public void setFilterMap(NameValue[][] filterMap) {
        this.filterMap = filterMap;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T17:58:55.477

这可能是因为对象可以被缓存，并且您必须将缓存配置为溢出到磁盘（或任何其他存储）。

当您尝试对类进行序列化或反序列化时会出现问题，并且会发生以下一种或多种情况：

1.  类或任何字段（例如 User）不实现 Serializable
2.  自上次部署以来，该类已更改，java 生成一个新的 serialVersionUID。当 java 尝试加载以前在磁盘缓存上的对象时，serialVersionUID 不匹配并引发错误。
3.  您正在使用不同的 JVM，它会生成不同的`serialVersionUID`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-05T11:30:18.307

您必须为 Hibernate 实体实现 Serializable 接口并保持默认值`private static final long serialVersionUID = 1L`。它的值可以是任何值，不一定只有 1L。

例如：

```
public class Med implements Serializable {
   private static final long serialVersionUID = 1L;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-28T11:33:16.790

这个问题我遇到并得到了解决方案，对我来说，它已经解决了 db 端在插入 Hibernate 的其余行之后手动插入了一些行，所以在检索时间时，这个错误引发的解决方案很简单，删除整个 db 数据或手动输入的行，然后通过 hibernate 重新插入然后检索data(criteria) 这次也不例外。- Mallikarjun Chinta

# button - Mathematica：通过 Button 导出 .gif 文件

> ID：12901209
> 
> 赞同：2
> 
> 时间：2012-10-15T17:50:57.330
> 
> 标签：button, wolfram-mathematica, gif, animated-gif

我在使用`Button`. 这段简单的代码只是创建了一些数据，即`Graphics`我想要导出为动画 .gif 的列表。

```
foo = Graphics /@
Table[{GrayLevel[RandomReal[]], Disk[{i, j}, 0.5]},
{k, 50}, {i, 10}, {j, 10}]; 
```

`foo`现在按预期使用作品导出`Export["foo.gif", foo]`（即使这样做需要相当长的时间）。

但是，当我创建一个`Button`，例如 using`Button["Export!", Export["foo.gif", foo]]`时，单击该按钮会导致 Mathematica 冻结一段时间。之后，评估似乎停止了，但没有导出任何内容。

我想使用该按钮在`Manipulate`环境中导出类似复杂的图形列表。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:06:36.017

> 默认情况下，按钮功能在抢占式链接上进行评估，该链接在 5 秒后超时
> 
> 使用 Method->"Queued" 评估主链接上的按钮功能，它永远不会超时：

```
Button["Export!", Export["c:\\test.gif", foo], Method -> "Queued"] 
```

![在此处输入图像描述](../Images/4776003666e91e736a6f9b9f37246e3b.png)

# nhibernate - Nhibernate 和 max(uniqueID) 作为三个标准之一？

> ID：12901211
> 
> 赞同：0
> 
> 时间：2012-10-15T17:51:01.243
> 
> 标签：nhibernate, nhibernate-mapping

我有一个包含很多列、一个主键（icd_data_id）和一个外键（encounter_id）的数据库表。

我有一个应该只出现一次的特定标准，但由于过去的历史，我不能确定只有一个符合标准的记录，因此，我试图获得最后一个值。

我不知道如何用我的映射文件和查询来解决这个问题。这是映射文件中我的课程的一个子集。

```
 <class name="Surgery">
<id name="ID" column="icd_data_id" type="Int32">
  <generator class="identity"/>
</id>

<property name="EncounterID" column="event_id" type="int" />
<property name="SpongeCountDone" column="sponge_removed" type="AnsiString" />

<more attributes here, excluded for brevity>

<property name="Category" column="category" type="AnsiString" />
</class> 
```

我想要得到的是具有 max(icd_data_id) 的行，其中 Category = 'XYZ' 和 EncounterID = 123。

我要查找的 Category 值将始终是静态的，但 EncounterID 将是我从该表中获取数据时将在代码中拥有的值。

如果我不清楚，在表中还有其他记录，其中 Category 不是 XYZ，并且每次遇到应该只有一个 Category = XYZ，但可能会有不止一个.

这里有人对如何编写三个标准有任何经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:53:08.947

在记事本中执行此操作，但它可能如下所示：

`var results = session.CreateQuery("from Surgery p where Category='XYZ' and EncounterID=123 and p.icd_data_id in ( select max(p2.icd_data_id) from Surgery p2 group by p2.icd_data_id)")`

# wpf - WPF应用程序中的任务栏丑陋图标

> ID：12901212
> 
> 赞同：10
> 
> 时间：2012-10-15T17:51:02.257
> 
> 标签：wpf, icons

任务栏中的图标在我的 WPF 应用程序中看起来非常难看。

设计师给我发了一些PNG，比如：

32x32、64x64、96x96、128x128、192x192、256x256、512x512。

我必须做些什么才能获得好的任务栏图标？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-15T18:06:30.333

制作一个包含多种尺寸的 .ico 文件。[根据Windows 图标视觉指南](http://msdn.microsoft.com/en-us/library/windows/desktop/dn742485.aspx)，您至少应具有以下尺寸：16x16、32x32、48x48 和 256x256 。拥有一个 .ico 文件将有助于 Windows 选择最佳大小并根据情况（应用程序图标、大任务栏、小任务栏等）适当地缩放它

如果您不是设计师，那么最好让您的设计师制作 16x16 图像，因为较大的图像可能有太多细节并且不能很好地缩小。如果较大的图像非常详细，那么设计师可以使较小的图像更简单，以便图标显示得更好。上面链接的视觉指南对此有更多提示。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-03T00:01:54.580

我遇到了同样的问题，即使使用多大小的 .ico 文件也无法正常工作。直接在窗口中设置图标会导致像素化图标。

我设法用这个应用程序窗口的代码隐藏来修复它：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        Uri iconUri = new Uri("pack://application:,,,/Images/myicon.ico", UriKind.RelativeOrAbsolute); //make sure your path is correct, and the icon set as Resource
        this.Icon = BitmapFrame.Create(iconUri, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.OnLoad);

        //etc.
    } 
```

图标文件是多尺寸的，这在 WPF - Windows 10 中对我有用。

您可以在此处将 .png 图标转换为多尺寸 .ico 文件[http://icoconvert.com/](http://icoconvert.com/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-02T00:13:14.163

一旦 .ico 文件中包含 48x48 像素版本，任务栏图标似乎就会变得模糊。出于某种原因，Windows 显然没有选择正确大小的 32x32 像素版本，而是选择了 48x48 的版本并将其缩小。

我的解决方案是使用两个单独的图标文件：

*   一个 .ico 包含 24x24 和 32x32 版本的图标，当使用`Icon`XAML 或 Hannish 的方法中的属性设置为 Window 的图标时，将分别用于标题栏和任务栏 -*无需*不必要的缩放。
*   第二个图标文件包含 - 取决于哪些来源是正确的 - 16x16 和 256x256 像素之间的大小范围。将此设置为项目属性中的应用程序图标将使该图标在所有其他位置（例如桌面和文件资源管理器）在不同视图设置下看起来都很好。

在 Windows 10 上测试，这似乎涵盖了以下显示案例：任务栏、窗口标题栏、Alt-TAB 菜单、桌面和文件资源管理器。

# modx-revolution - 循环中的块处理

> ID：12901216
> 
> 赞同：1
> 
> 时间：2012-10-15T17:51:23.740
> 
> 标签：modx-revolution

我有以下代码，不幸的是在 foreach 循环中返回相同且未更新的块。检索到的块包含一些需要随每条记录更新的占位符。有人知道为什么吗？我使用 getObject 并处理它而不是使用 getChunk 因为第一个更快一点。

```
$chunkie = $modx->getObject('modChunk', array('name' => 'thumbTemplate'));
foreach ($items as $item) {

        $itemArray = $item->toArray();
        $itemArray['idx'] = $idx;
        (...)

$output .= $chunkie->process($itemArray);
$idx++;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:53:06.997

您需要在循环中检索块...

```
//$chunkie = $modx->getObject('modChunk', array('name' => 'thumbTemplate'));

foreach ($items as $item) {

    $itemArray = $item->toArray();

    $itemArray['idx'] = $idx;

    (...)

    $output .= $modx->getChunk('thumbTemplate',$itemArray);

    $idx++;

}; 
```

不确定是否也可以使用 getObject 方法来填充块占位符。[其实我有点确定你不能]

**更新**

尝试这个：

```
<?php
$output = '';

$items = array(
    'apples'=>'bananas',
    'orange'=>'orange juice',
    'peaches'=>'peach cobbler'
    );

// use a query to retrieve your actual chunk from the db
$tpl = '[[+key]] = [[+value]] <br />';

foreach ($items as $key => $value) {

    $itemArray = array(
        'key'=>$key,
        'value'=>$value
    );

    $chunkie = $modx->newObject('modChunk');
    $chunkie->setContent($tpl);

    $output .= $chunkie->process($itemArray);

};

return $output; 
```

显然我做了一些小改动，所以我们可以剪切和粘贴并查看工作，只需将主要部分调整为您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T07:57:37.003

我知道这是一个老问题，但我认为这将是仍然更新占位符的最快方法：

```
$chunkId = 12; // id of the stored chunk
$chunk = $modx->getObject('modchunk', $chunkId);

/* If you use getChunk(), the placeholders will be processed, 
   which you don't want */
$content = $chunk->getContent();

$tempChunk = $modx->newObject('modChunk');

/* This might have to go in the loop */
$tempChunk->setCacheable(false);

foreach ($items as $item) {
   $itemArray = $item->toArray();
   $itemArray['idx'] = $idx;
   // (...)
   $tempChunk->setContent($content);
   $tempChunk->setProperties($itemArray);

   $output .= $tempChunk->process();
   $idx++;
} 
```

# android - 如何删除安卓设备中的所有照片

> ID：12901221
> 
> 赞同：0
> 
> 时间：2012-10-15T17:51:52.897
> 
> 标签：android, mediastore

我有以下代码来删除`DCIM`文件夹和`download`文件夹中的所有照片：

```
Uri uri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
String[] projection = new String[] {MediaStore.Images.Media._ID, 
                                    MediaStore.Images.Media.DATA};
ContentResolver cr = getApplicationContext().getContentResolver();
Cursor cur = cr.query(uri, projection, null, null, null);
if (cur != null) {
    while (cur.moveToNext()) {
        File path =new File(cur.getString(cur.getColumnIndex(MediaStore.Images.Media.DATA)));
        path.delete();
    }
    cur.close();
} 
```

但是这段代码并没有删除图库应用程序中的照片，您可以在应用程序菜单中找到它。

您知道如何一次删除 android 设备中的所有照片吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:09:17.193

您需要具有以下权限。在 AndroidManifest.xml 文件中使用权限 android:name="android.permission.WRITE_EXTERNAL_STORAGE"

但是您确定要删除所有用户照片吗？

# php - 在 FastCGI 上从 PHP 运行后台进程

> ID：12901223
> 
> 赞同：3
> 
> 时间：2012-10-15T17:52:01.653
> 
> 标签：php, exec, fastcgi, mod-php

我知道可以创建一个后台 PHP 进程，该进程可以从另一个 PHP 文件按需启动：

```
$command = "/usr/bin/php5 -f script.php";
exec( "$command > /dev/null 2>&1 &", $arrOutput); 
```

但是，此解决方案仅在 PHP 作为**mod_php**运行时才有效。

有什么方法可以在**FastCGI**上做同样的事情吗？

似乎在 FastCGI 上，该过程由 FastCGI 一次又一次地启动和关闭，有人有修复它的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:41:53.477

你可以设置一个cron作业吗？如果没有，它必须在 PHP 中调用，我曾经以跨平台方式模拟它，而无需使用 curl 访问 exec() 等（信不信由你）。

创建 .php 脚本并将其公开，并将其添加到顶部：

```
if (isset($_POST['key']) == false || $_POST['key'] != 'your secret key') {
    die(); //request not allowed
} 
```

然后从另一个 PHP 文件中，创建一个安全 (https) curl 连接并将密钥发布给它，设置 curl 的超时时间为 5 秒（您也可以从请求页面发送一个 http 关闭连接标头），以便如果请求需要很长时间才能完成，调用脚本不会冻结，在您的情况下为 30 秒。

这将执行以下操作： 1\. curl 将安全地访问该页面（无论如何都停止在他们的浏览器中访问它） 2\. curl 将等待 5 秒，然后关闭连接（但您的两个 php 脚本都将继续）

无论操作系统内部、外壳等如何，它都兼容。您还可以根据需要调整超时等。

不是一个出色的解决方案，但希望它对您来说足够好。

# c# - Sum 和 GroupBy

> ID：12901225
> 
> 赞同：2
> 
> 时间：2012-10-15T17:52:03.983
> 
> 标签：c#, linq, windows-phone

我有一个包含以下字段的表：

```
public int S_ID       
public DateTime S_Date            
public string S_Month        
public string S_Overtime    
public string S_WorkingTime 
```

我想`(Orderby S_Date)`, `(GroupBy S_Month)`, `(SUM S_Overtime)`,`(SUM S_Workingtime)`然后我使用 Binding 在 ListBox 中显示它。

下面的代码有效，但它既不加班也不加班

```
var manader = (from c in db.nys
               orderby c.S_Date ascending
               select c).GroupBy(g => g.S_Month).Select(x => x.FirstOrDefault());
listBox.ItemsSource = manader; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T17:59:23.307

我不知道你在`S_WorkingTime`and中有什么数据`S_Overtime`，但假设这是一个字符串表示形式`int`：

```
var manader = from c in db.nys
              group c by c.S_Month into g
              select new { 
                    Month = g.Key, 
                    Overtimes = g.Sum(x => Int32.Parse(x.S_Overtime)),
                    WorkingTimes = g.Sum(x => Int32.Parse(x.S_WorkingTime)) 
              }; 
```

顺便说一句，我认为按 排序项目是没有意义的`S_Date`，因为您将它们分组`S_Month`并使用聚合值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:01:25.117

```
db.nys.OrderBy(o => o.S_Date)
    .GroupBy(o => o.S_Month)
    .Select(g =>
        new
        {
            Overtime = g.Sum(v => v.S_Overtime),
            Workingtime = g.Sum(v => v.S_Workingtime)
        }
    ) 
```

# android - 我想将文件从手机发送（上传）到计算机，但它给出了错误

> ID：12901233
> 
> 赞同：0
> 
> 时间：2012-10-15T17:52:26.470
> 
> 标签：android, sftp, jsch

我想将文件从手机发送到计算机，但它给出了一个错误（没有这样的文件）但我没有解决这个问题。问题是什么？我正在使用 sftp 服务器。代码：

```
ChannelSftp sftpChannel = (ChannelSftp) channel;
                try {

                    sftpChannel.cd("/sdcard/download");
                     String inputFileName =Environment.getExternalStorageDirectory().getAbsolutePath()+"a.txt";

                     sftpChannel.put(inputFileName, "/home/john/desktop");

                } catch (SftpException e) {
                     writeToSDFile("sftp---exception"+e);
                }

                sftpChannel.exit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:22:30.383

好的，我解决了这个问题，代码如下：

```
 ChannelSftp sftpChannel = (ChannelSftp) channel;
                writeToSDFile("9");
                try {

                     sftpChannel.cd("/home/john/Desktop");
                        String inputFileName =Environment.getExternalStorageDirectory().getAbsolutePath()+"/download/myData.txt";
                        File f = new File(inputFileName);  
                        sftpChannel.put(inputFileName, "/home/john/Desktop/myData.txt");

                } catch (SftpException e) {
                     writeToSDFile("sftp---exception"+e);
                } 
```

# android - ADB 使用单个命令推送多个具有相同扩展名的文件

> ID：12901240
> 
> 赞同：42
> 
> 时间：2012-10-15T17:53:11.957
> 
> 标签：android, push, adb

我想用一个命令将一些相同类型的文件（ `.img`）推送到手机的分区。`/sdcard`但是通配符不起作用：

```
adb push *.img /sdcard/ 
```

有什么办法可以实现吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-15T17:57:26.070

将`*.img`文件复制到空目录，然后推送目录 ( `adb push /tmp/images /storage/sdcard0`)。`adb`将该目录中的所有文件推送到您指定的位置。

顺便说一句，`/sdcard`由于路径已经过时了很长一段时间，所以请确保您使用的目的地存在并且您的设备支持。大多数 Android 2.x/3.x/4.0 设备使用`/mnt/sdcard`; Android 4.1 使用`/storage/sdcard0`.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-08-11T21:52:45.837

从我的脑海中回显文件......

```
for i in *.img; do echo $i; adb push "$i" /sdcard/; done; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-03-30T07:09:37.257

假设您使用的是**Windows**，您可以使用 for 循环查找具有扩展名的文件，并在命令行中像这样使用该文件执行 adb push

```
for %i in (*.img) do adb push %i /sdcard/folderName/%i 
```

如果您将其保存为批处理文件，请确保在“%i”之前添加一个额外的“%”，如下所示

```
 for %%i in (*.img) do adb push %%i /sdcard/folderName/%%i 
```

如果你使用的是**GNU/Linux**，你可以使用这个基本上做同样事情的命令

```
for f in *.img; do adb push $f /sdcard/folderName/$f; done 
```

希望它有所帮助:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-09T13:12:52.763

使用 find（`{}`代表文件名）：

```
find *.img -exec adb push {} /storage/sdcard0 \; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-02T13:09:17.353

我有一个脚本（破折号，Ubuntu Precise）。

*推：*

```
#D=echo
D=
S=
if [ $1 == "-s" ]; then
    S="-s $2"
    shift
    shift
fi
if [ $# -lt 2 ]; then
    echo "Usage: $0 directory files..."
else
DIR=$1
shift
for f in $*
do
  #echo "Processing $DIR/$f file..."
  echo ~/aspt/adb ${S} push "$f" "$DIR/$f"
  ${D} ~/aspt/adb ${S} push "$f" "$DIR/$f"
done
fi 
```

用法：

```
mpush /sdcard/ libMyLib.so
mpush /sdcard/ libFirst.so libSecond.so
mpush /sdcard/ *
mpush -s 109d8a6fe0678a3 /sdcard/ * 
```

前两行留在那里进行调试：您可以将前两行更改为

```
D=echo
#D= 
```

并让脚本打印`adb push`命令而不是执行它们。

更新：增加了推送到所有连接设备的能力（`-all`开关）

```
#D=echo
D=
S=
if [ $1 == "-2all" -o $1 == "-all" ]; then
  shift
  DEVICES=`~/aspt/adb devices | tail -n +2 | awk '{print $1}'`
  if [ $# -lt 2 ]; then
      echo "Usage: $0 [options] directory files..."
      echo "Options:"
      echo "-s device-id -- push to the specified device"
      echo "-all or -2all -- push to all devices"
  else
    DIR=$1
    shift
    for d in $DEVICES
    do
      for f in $*
      do
    #echo "Processing $DIR/$f file..."
    echo ~/aspt/adb -s $d push "$f" "$DIR/$f"
    ${D} ~/aspt/adb -s $d push "$f" "$DIR/$f"
      done
    done
  fi
else
  if [ $1 == "-s" ]; then
      S="-s $2"
      shift
      shift
  fi
  if [ $# -lt 2 ]; then
      echo "Usage: $0 [options] directory files..."
      echo "Options:"
      echo "-s device-id -- push to the specified device"
      echo "-all or -2all -- push to all devices"
  else
    DIR=$1
    shift
    for f in $*
    do
      #echo "Processing $DIR/$f file..."
      echo ~/aspt/adb ${S} push "$f" "$DIR/$f"
      ${D} ~/aspt/adb ${S} push "$f" "$DIR/$f"
    done
  fi
fi 
```

# jquery - 带鼠标滚轮的水平滚动视差

> ID：12901243
> 
> 赞同：1
> 
> 时间：2012-10-15T17:53:21.530
> 
> 标签：jquery, parallax

我正在使用 jquery Scrolling Parallax 插件，特别是在： [http ://dev.jonraasch.com/scrolling-parallax/examples/multi-directional-parallax 中显示的选项](http://dev.jonraasch.com/scrolling-parallax/examples/multi-directional-parallax)

图层在两个方向（垂直和水平）上移动，但是当我使用鼠标滚轮时，我希望进行水平滚动而不是垂直滚动。

谢谢你的任何建议，问候马可

# matlab - 在 Matlab 中跟踪变量访问模式

> ID：12901249
> 
> 赞同：3
> 
> 时间：2012-10-15T17:53:58.200
> 
> 标签：matlab

我有一个程序可以访问另一个类中的某些功能。我想知道这些函数被访问的频率以及函数内部变量在被访问时所取的值。我现在正在使用结构来跟踪我想要捕获的各种参数。但是Matlab中有什么内置的东西可以做到这一点吗？我想捕获这些数据，绘制它并找出访问模型（线性、指数等）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T18:20:36.393

对于功能访问信息，您可以使用内置的[配置文件](http://www.mathworks.com/help/matlab/ref/profile.html)功能：

```
profile on;
my_program;
p = profile('info') 
```

中的输出结构`p`，即`p.FunctionTable`，将给出函数中的调用次数和总运行时间。

# java - JPA bean 的 JSF 可编辑数据表，一种尺寸适合所有人

> ID：12901252
> 
> 赞同：1
> 
> 时间：2012-10-15T17:54:23.663
> 
> 标签：java, jpa, jsf-2, primefaces

我想要一个带有可编辑数据表的 JSF 页面，以便为各种启用 JPA 的 bean 提供基本的 CRUD 功能。

如何为特定课程做，已经完成：http: [//forum.primefaces.org/viewtopic.php?f=3 &t=9026](http://forum.primefaces.org/viewtopic.php?f=3&t=9026)

我的问题：如何在不知道运行前要编辑什么 bean 的情况下填充 JPA bean 的数据表？如何在不为每个 bean 创建单独页面的情况下将 bean 字段传递给数据表（撰写本文时大约 10 个）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:25:58.713

查看支持脚手架的快速开发工具，例如[JBoss Forge](http://forge.jboss.org/)（默认为[JSF Scaffolding ）和](https://docs.jboss.org/author/display/FORGE/UI+Scaffolding)[Spring Roo](http://www.springsource.org/spring-roo)（非常好的[JSF 插件](http://static.springsource.org/spring-roo/reference/html/base-jsf.html)）。

这些并不完全是您正在寻找的（一个处理所有事情的整体通用视图组件），但会在几秒钟内生成简单的 CRUDS 并处理大部分样板代码和重复性任务。最终结果是相当可维护和模块化的代码，程序员可以（相对）轻松地改进并在必要时进行更细粒度的控制。

# c# - 客户截断查询字符串，导致 FormatException

> ID：12901253
> 
> 赞同：7
> 
> 时间：2012-10-15T17:54:31.540
> 
> 标签：c#, asp.net-mvc

在 Rentler，我们经常看到错误

> **System.FormatException**，字符串未被识别为有效的布尔值

在我们的健康监测中。事实证明，我们的客户在将其复制/粘贴到其他地方时，似乎偶尔会截断 URL 的末尾。碰巧的是，布尔参数往往位于字符串的末尾，当客户通过某个社交网络共享它时，我们会收到错误报告。

> https://{domain}/search?sid=17403777&nid=651&location=840065&propertytypecode=1& **photosonly=fals**

我们对所有东西都使用模型绑定，所以我不确定如何处理这个问题。我可以将属性更改为字符串并尝试在控制器操作中解析它，但这很草率。是否有任何简单、流畅的方法可以让模型绑定器使用 TryParse() 并且如果不能则解析为 false ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:14:30.200

布尔数据类型的自定义模型绑定器怎么样？你需要这样的东西：

```
/// <summary>
/// A custom model binder for boolean values. This behaves the same as the default
/// one, except it will resolve the value to false if it cannot be parsed.
/// </summary>
public class BooleanModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        ValueProviderResult valueResult = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);

        //MVC checkboxes need specific handling in checked state
        if (string.Equals(valueResult.AttemptedValue, "true,false"))
        {
            AddToModelState(bindingContext, valueResult);
            return true;
        }

        bool parsed = false;
        if (Boolean.TryParse(valueResult.AttemptedValue, out parsed))
        {
            AddToModelState(bindingContext, valueResult);
            return parsed;
        }

        return false;
    }

    private static void AddToModelState(ModelBindingContext bindingContext, ValueProviderResult valueResult)
    {
        bindingContext.ModelState.Add(bindingContext.ModelName, new ModelState { Value = valueResult });
    }
}

//in Global.asax
protected void Application_Start()
{
    ...
    ModelBinders.Binders.Add(typeof(bool), new BooleanModelBinder());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:46:55.530

你总是可以添加一个 try/catch 块并在 catch 中有一个默认值。

另一种方法是仅检查参数的第一个字母是“T”还是“F”。这应该可以避免很多问题。

# linux - Linux：动态更新有关更改的后台进程

> ID：12901254
> 
> 赞同：0
> 
> 时间：2012-10-15T17:54:42.550
> 
> 标签：linux

这可能听起来有点天真，但我需要一些关于这个查询的信息，查询是，

进程能否动态更新程序底层所做的更改？如果是，那么如何在 Linux 环境中实现呢？

例如：-假设一个shell脚本是否在后台长时间执行，同时如果我修改脚本，那么如何更新有关此更改的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:48:36.240

您提出问题的方式，我认为这是不可能的。您不能（不应该）修改已经在执行的程序。

话虽如此，我认为你应该重新考虑你思考问题的方式。为什么需要更新 shell 脚本并让它接受更改？您可以编写一个期望更改并允许更改的解决方案。

例如，脚本`a.sh`可以简单地执行`/somedir`. 然后通过添加脚本`b.sh`到`/somedir`,`b.sh`将被执行。

我知道这是一个模糊的例子，但这实际上取决于您没有提供太多的问题定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:48:40.837

这几乎是不可能的，如果不是不可能的话。

即时更新脚本似乎很奇怪。您可以将更改与保持稳定分开，将它们保存在配置文件中，并启动、停止、重新启动等。

# .net - WinForms：在父控件的边界之外绘制

> ID：12901261
> 
> 赞同：0
> 
> 时间：2012-10-15T17:55:02.693
> 
> 标签：.net, winforms, datagridview

我从 DataGridViewColumn 继承了我的类，以显示一个用于显示和编辑冗长文本的多行文本框。我使用了与[http://msdn.microsoft.com/en-us/library/7tas5c80.aspx](http://msdn.microsoft.com/en-us/library/7tas5c80.aspx)中所示相同的方法。唯一的问题是，在 Microsoft 的示例中，DateTimePicker 绘制得非常好，即使它需要超出父 DataGridView 的边界（例如，如果单元格位于网格的最后一行），但在我的情况下，我的编辑控件切断或剪辑并且不在 DataGridView 之外绘制。我已经尝试在 PositionEditingControl 中扩展剪辑矩形，但这无济于事。我还看到微软的示例没有对剪辑边界做任何特别的事情来做到这一点。任何人都知道如何处理它？

# wamp - Wamp 无法启动/橙色图标

> ID：12901263
> 
> 赞同：2
> 
> 时间：2012-10-15T17:55:21.743
> 
> 标签：wamp, wampserver

我刚刚安装了 Wamp 服务器，但我遇到了问题。图标保持橙色。到目前为止，我检查了端口 80、windows/system32/drivers/etc/ 中的主机、httpd.conf 以及所需的 apache 模块。知道我可能会错过什么吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T00:53:53.930

嘿，我遇到了这个问题，我尝试了与 Skype、microsoft C++ x86 pack 等相关的响应，但没有任何效果。

我单击了系统托盘 Wamp 图标，在 Apache/Service 下，我注意到 Start&Stop&Restart 显示为灰色，安装服务可用。我之前忽略了这一点，因为 wamp 安装不会继续安装所有 3 个组件是没有意义的。由于某种原因它没有，我所要做的就是单击安装服务，弹出确认端口 80 已打开，然后继续。然后我的 wamp 图标变绿了。

也许这会有所帮助。是一个真正的“duh”时刻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:00:59.573

如果您正在运行 Skype，请打开选项，转到高级然后连接并取消选中“使用端口 80”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:45:11.937

几天前解决了这个问题。未正确安装 vcredits 时出现问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-17T15:33:19.540

对于可能有这个问题的任何其他人，就我而言，解决这个问题的方法是使用所有服务（通过在命令提示符下键入“services.msc”），然后停止 Windows 的 Web 部署代理服务。之后，重新启动我的服务器就可以了。

# objective-c - 存储为 NSData 的 UIImage 的大小？

> ID：12901264
> 
> 赞同：-1
> 
> 时间：2012-10-15T17:55:30.737
> 
> 标签：objective-c, ios, cocoa-touch, uiimage, nsdata

我是否能够在不使用的情况下获取存储为 NSData 的 UIImage 的大小（CGSize）`[UIImage imageWithContentsOfFile:];`？能够做到这一点将使我的代码运行得更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:04:48.557

你不会使用 CoreGraphics 或 UIKit。您需要检查二进制流。幸运的是，它之前已经在许多其他语言中完成过。一个快速的谷歌在 Ruby 中发现[了这个实现](https://github.com/sdsykes/fastimage/blob/master/lib/fastimage.rb)，它确定文件类型（jpg、bmp、png 和 gif）并提取图像的尺寸。应该很容易使用 NSData 转换为 Objective-C。从[`parse_size`](https://github.com/sdsykes/fastimage/blob/master/lib/fastimage.rb#L243)功能开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:00:52.940

存储为 NSData 的图像可以是任意数量的格式，例如 png、jpg、tiff、gif、raw 等。当你只有一个字节时，它不是 UIImage。所以一般来说，您无法确定存储为 NSData 对象的图像的大小。

如果您可以保证您的每一个 NSData 图像都以相同的格式存储，例如 PNG，那么您可以根据 PNG 数据文件格式扫描 NData 以获取大小信息。这可能比从数据创建 UIImage 更有效。但显然这是更多的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:00:44.150

保存时将大小信息写入某种数据库。

要获取磁盘上文件的大小，您可以使用[`NSFileManager attributesOfItemAtPath:error:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/attributesOfItemAtPath%3aerror%3a)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T18:08:02.647

您可能会发现有用[的 CGImageSource](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGImageSource/Reference/reference.html) API。Ole Begemann 有一个关于这个主题的很棒的[教程。](http://oleb.net/blog/2011/09/accessing-image-properties-without-loading-the-image-into-memory/)

# ajax - codeigniter & cjax 框架，找不到致命错误类“CI_Controller”

> ID：12901268
> 
> 赞同：0
> 
> 时间：2012-10-15T17:55:57.037
> 
> 标签：ajax, codeigniter-2

我在使用 Codeigniter 2.1.3 和最新的 codeigniter cjax 时遇到了这个奇怪的错误。奇怪的是，当我下载最新的 codeigniter 和最新的 codeitniger cjax 框架并复制到我的朋友服务器时，然后调用：

```
domain.com/ajax.php?test/test2 
```

显示测试 ajax 示例......它的工作就像轻而易举，但是当我在我的服务器上执行此操作时，我得到服务器错误（即使如此，我们都有相同的 php 版本等）。然后服务器在错误日志文件中抛出此错误：

`PHP Fatal error: Class 'CI_Controller' not found in /hosting/www/domain.com/www/application/response/test.php on line 3`

现在，我已经通过 stackoverflow 阅读了遇到此问题的人，并通过更改构造并调用 CI_Controller 而不是 Controller 来解决。但我已经这样做了...... - 我的意思是它在基本示例中假设可以在不触及代码的情况下工作，它确实如此，只是因为某些糟糕的原因不在我的域中。

**来自cjax** framework for coderingter 的 Ajax.php 应该从文件夹响应加载控制器，命名为 test 并调用函数 test2，它看起来像这样（名为 test.php 的实际文件）：

```
class Test extends CI_Controller {

function __construct()
{
    parent::__construct();
}

/**
 * 
 * ajax.php?test/test/a/b/c
 * 
 * @param unknown_type $a
 * @param unknown_type $b
 * @param unknown_type $c
 */
function test($a = null,$b = null, $c = null)
{
    $this->load->view('test', array('data' => $a .' '.$b.' '.$c));
}

/**
 * ajax.php?test/test2
 * 
 * Here we are testing out the javascript library.
 * 
 * Note: the library it is  not meant to be included in ajax controllers - but in front-controllers,
 * it is being used here for the sake of simplicity in testing.
 */
function test2()
{
    $ajax = ajax();

    $ajax->update('response','Cjax Works');

    $ajax->append('#response','<br /><br />version: '.$ajax->version);

    $ajax->success('Cjax was successfully installed.', 5);

    //see application/views/test2.php
    $this->load->view('test2');
} 
```

我希望有人可以为这个问题带来一些启示——或者也许有人已经经历过？

**谢谢你的时间！** 市场

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T04:56:29.053

在 php.ini 文件中关闭 PHP Strict Standards。

```
 error_reporting = E_ALL ^ E_STRICT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T05:28:09.087

在此处下载 codeigniter 的 ajax：http: [//sourceforge.net/projects/cjax/files/CodeIgnater/AJAXFW_4CI_5.5.zip/download](http://sourceforge.net/projects/cjax/files/CodeIgnater/AJAXFW_4CI_5.5.zip/download)

主要区别在于 ajaxfw.php ！！！

# plugins - 上下文模块 - Joomla 2.5

> ID：12901269
> 
> 赞同：2
> 
> 时间：2012-10-15T17:55:59.117
> 
> 标签：plugins, joomla, parameters, module, components

我正在编写一个与插件结合使用的模块，为网站创建上下文背景。

前提是：如果用户在主页上，则背景图像是插件参数中指定为默认值的任何内容。

如果用户在类别列表页面上，则背景图像是（自定义）组件参数中指定为默认值的任何内容。

如果用户在文章列表页面上，则背景图像是（自定义）类别参数中指定为默认值的任何内容。

如果用户在文章页面上，则背景图像是（自定义）文章参数中指定为默认值的任何内容。

为了让这更有趣，我编写了自己的组件来显示个人资料而不是文章。它们的工作方式完全相同，但可能不包含 Content 组件所做的所有编码。我编写自定义组件的原因超出了这个问题的范围。

该插件创建并向页面添加基本标记，这在整个站点中都可以正常工作。主页完全按照我的要求工作。

该模块应该添加样式表等。到文档的标题，这很好。问题是模块应该首先确定上下文，然后从给定的上下文中加载参数。这是我的问题：我找不到代码来确定上下文并按照上述规则读取参数。

我尝试将它作为一个插件（没有模块的帮助），但作为一个内容插件它在主页上不起作用，作为系统插件它无法访问内容参数。我也考虑过让两个插件一起工作，但这似乎是不好的做法。也许一个新插件既不是内容也不是系统，但可以访问两种上下文？

附加信息：

我编写了许多代表不同实体组的组件。每个组件都有自己独特的参数，但在所有组件中也有一些共同的参数。每个组件都具有以与核心 Joomla 'banner' 和 'contact' 组件相同的方式“实例化”的功能。常见参数的一个示例是“gallery”参数；每个组件都有一个“画廊”参数，每个“实例”都可以选择拥有自己的值。“gallery”参数包含文件夹的文件夹 URL，该文件夹包含与特定组件实例相关的图像。

这一切应该如何结合在一起的一个例子：

我有一个名为“驱动程序”的组件，它将充当 - 你猜对了 - 驱动程序的容器。在组件管理菜单中，我可以添加驱动程序，指定其名称、年龄等，并且可以包含驱动程序的照片和画廊 URL。

当站点端的用户加载驱动程序页面时，我希望代码加载画廊文件夹中的所有图像，并在后台旋转。我希望能够随时添加/删除/替换图像，而无需参考驱动程序的选项页面。更复杂的是，在加载每个背景图像时，会从图像中读取 EXIF 元数据，并在页面底部的前景中以缩略图的形式显示。

现在，这一切都在站点的根目录中完美运行，并且大部分都在整个站点中运行。下降的部分是通过模块从驱动程序“实例”中检索变量。当然，我可以编写一些整洁的 SQL 和 db 调用，但肯定有一种方法可以让模块检索组件、类别和文章参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:51:56.563

您是否尝试过 moduleclass_sfx ？定义一个 CSS 类，如：

```
.myModule { 
   background-image: url('myimage.png'); 
} 
.myComponent { 
    background-image: url('mycompimage.png'); 
}
.myArticle { 
    background-image: url('myarticleimage.png'); 
} 
```

然后在模块 class_sfx 的每个模块/组件参数选项上输入带有尾随空格的所需类（例如：“myComponent”（不带引号））。

另一种方法可能是定义组件/模块参数并调用：

```
<body style="background-image: url('/path_to_image_folder/<php echo $params->get('param_name') ?>');"> 
```

或者可能没有很好地理解您的问题，但希望它有所帮助。

# javascript - jQuery TOOLS 可滚动的圆形错误

> ID：12901274
> 
> 赞同：1
> 
> 时间：2012-10-15T17:56:25.493
> 
> 标签：javascript, jquery-tools, scrollable

我创建了一个非常简单的 jQuery TOOLS 可滚动实例，它是垂直和圆形的。一段时间后显示空白元素存在问题。

这是问题的示例和 jsFiddle 中的所有代码：http: [//jsfiddle.net/ukQbm/](http://jsfiddle.net/ukQbm/)

# javascript - 检查 Dojo 是否已加载的推荐方法

> ID：12901275
> 
> 赞同：0
> 
> 时间：2012-10-15T17:56:28.527
> 
> 标签：javascript, jquery, dojo

在 Dojo v1.8 和以后的版本中，检查 Dojo 库是否已加载（以及如果可能的话是哪个版本）的推荐方法是什么？

对于 jQuery，我可以使用 jQuery 命名空间和 jQuery.jquery 属性。在 Dojo 中，有一个遗留的 dojo 命名空间，但如果我理解正确，它最终会被弃用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:59:35.690

根据[这篇博文](http://www.oreillynet.com/onlamp/blog/2008/05/dojo_goodness_part_7_injecting.html)，你可以说：

```
if (window.dojo !== undefined) {
    // dojo is loaded...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:01:24.337

```
if(typeof(dojo) !== "undefined") {
   // dojo has been loaded
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T00:48:59.843

[我从dojo 邮件列表中](http://dojotoolkit.org/community/)得到以下建议：

```
var isDojo = define && define.amd && define.amd.vendor && define.amd.vendor === "dojotoolkit.org"; 
```

# android - BroadcastReceiver在android中不起作用

> ID：12901279
> 
> 赞同：0
> 
> 时间：2012-10-15T17:56:53.620
> 
> 标签：android, broadcastreceiver

我正在使用此代码创建一个即使应用程序未运行也必须运行的 BroadcastReceiver。

```
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicHeader;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.protocol.HTTP;
import org.apache.http.util.EntityUtils;
import org.json.JSONException;
import org.json.JSONObject;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.util.Log;

public class ReminderClass extends BroadcastReceiver {
    SharedPreferences myPrefs;
    String prefuName, pref_usr_fname, prefdev_id, pref_usr_lname, pref_uid,
            pref_usr_email, ret, dates_btw;;
    String event_desc, e_time, s_time, event_title, day_event_id;
    ArrayList<String> day_data = new ArrayList<String>();
    ArrayList<String> st_time = new ArrayList<String>();
    ArrayList<String> et_time = new ArrayList<String>();
    ArrayList<String> day_eve_id = new ArrayList<String>();
    ArrayList<String> day_eve_title = new ArrayList<String>();
    int MILLIS_IN_FIFTEEN_MINS = 1000 * 60 * 15 ;

    SimpleDateFormat dateFormat = new SimpleDateFormat("hh:mm a");
    @Override
    public void onReceive(Context con, Intent _intent) {
        // TODO Auto-generated method stub
        Log.v("inside the broadcast receiver1 >>","broadcast1");
        if (_intent.getAction().equals("REMINDER")) {

        Log.v("inside the broadcast receiver2 >>","broadcast2");
        myPrefs = con.getSharedPreferences("myPrefs", 1);
        prefuName = myPrefs.getString("u_name", "");
        pref_usr_fname = myPrefs.getString("fname", "");
        prefdev_id = myPrefs.getString("dev_id", "");
        pref_usr_lname = myPrefs.getString("lname", "");
        pref_uid = myPrefs.getString("id", "");
        pref_usr_email = myPrefs.getString("email", "");

        Log.v("pref name>>> ", prefuName);
        Log.v("pref pass >>", pref_usr_fname);
        Log.v("prev devid >>", prefdev_id);
        Log.v("pref_usr_fname", pref_usr_fname);
        Log.v("pref_usr_lname", pref_usr_lname);
        Log.v("pref_uid", pref_uid);
        Log.v("pref_usr_email", pref_usr_email);

        try {
            HttpClient client = new DefaultHttpClient();
            HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); // Timeout
                                                                                    // Limit

            HttpResponse response;
            HttpPost post = null;
            JSONObject json = new JSONObject();

                post = new HttpPost("my_url");
                json.put("user_id", pref_uid);

                post.setHeader("Content-Type", "application/json");
                post.setHeader("Accept", "application/json");
                StringEntity se = new StringEntity(json.toString());
                se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
                        "application/json"));
                post.setEntity(se);
                response = client.execute(post);
                Log.v("Response >>>", response + "");
                ret = EntityUtils.toString(response.getEntity());
                Log.v("My calendar response", ret);
        } catch (UnsupportedEncodingException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (ClientProtocolException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (org.apache.http.ParseException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (JSONException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }           
    }
        else
        {
            Log.v("Broadcast not working >>","broadcast not working");
        }
    }

} 
```

在我的清单中，

```
<receiver
            android:name=".ReminderClass"
            android:enabled="true"   android:permission="android.permission.INTERNET">
            <intent-filter>
                <action android:name="REMINDER" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </receiver> 
```

我的广播没有被调用。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:07:35.547

`android:permission`步骤#1：从您的中删除`<intent-filter>`，除非您确实要求发送广播的任何人都必须持有该`INTERNET`权限。

第 2 步：使用唯一的操作字符串，可能是其中包含您的包名称的操作字符串，而不是`REMINDER`.

第 3 步：将所有代码`BroadcastReceiver`从`IntentService`. 您当前的代码正在主应用程序线程上执行网络 I/O。因此，您的代码将在 Android 4.x 设备上崩溃，并且在早期的 Android 版本上只是一个*非常*糟糕的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:46:16.420

我解决了我的问题。我添加了一个服务，并在 BroadcastReceiver 中调用了该服务，它会在启动完成时进行检查。在服务的 Oncreate() 方法中，我实现了一个每分钟运行一次的线程。我在线程的 run 方法中使用了我的代码。

# java - 不使用浏览器的 HTTP 请求

> ID：12901280
> 
> 赞同：1
> 
> 时间：2012-10-15T17:56:55.730
> 
> 标签：java, http, jar, httprequest, httpresponse

我正在开发一个允许用户下载 JAR 的应用程序，它实际上是一个 PDF 播放器，显示一些作为 JAR 本身的一部分下载的 PDF。

现在，每当用户单击该 JAR 文件时，我都想验证服务器上的 PDF 包（它是否过期？或者有新版本可用）。另外，如果有新版本的下载包可用，我希望我的 PDF 内容得到更新。因此，如果有新版本，我将需要从服务器下载 PDF。

所以我想从我的 JAR 中向服务器发出 HTTP 请求并接收一些 PDF（以及一些额外的数据）作为响应。

知道我该怎么做吗？是否有一些 API 可用于从普通 Java 程序创建 HTTP 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:58:44.550

使用[HttpUrlConnection](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/HttpURLConnection.html)。它应该完成任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T18:02:58.497

通过创建 URL 并为其获取连接并将其转换为 HttpURLConnection 来发送 HTTP 请求。

添加“If-Modified-Since”标头，以及本地文件的下载日期。如果服务器响应 304（未修改），那么您的本地版本是最新的。

如果本地版本不是最新的，服务器将响应实际内容，您可以使用这些内容更新本地缓存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T18:05:15.543

对于我使用的原始二进制数据；

```
public static byte[] getContent(String s) {
    try {
        URL u = new URL(s);
        URLConnection c = u.openConnection();
        //we lie, java user-agents are sometimes blacklisted
        c.setRequestProperty("User-Agent", "MSIE 7.0");
        InputStream r = c.getInputStream();
        String ret = "";
        BufferedReader reader = new BufferedReader(new InputStreamReader(r));
        for(String line; (line = reader.readLine()) != null;) ret += line;
        return ret.getBytes();
    }
    catch(Exception e) { e.printStackTrace(); }
    return new byte[0];
} 
```

然后可以将其通过管道输送到一个`FileOutputStream`或类似的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T18:05:23.093

正如其他几个人所指出的，您可以使用 HttpUrlConnection。但是，仍然有相当数量（不是很多，而是相当数量）的工作。

或者，查看[basic-http-client](http://code.google.com/p/basic-http-client/)。实际上，由于它是开源的，即使您打算编写自己的代码，也请检查一下，以获得一些想法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T18:05:45.110

```
URL url;
HttpURLConnection connection = null;  
try {
  //Create connection
  url = new URL(targetURL);
  connection = (HttpURLConnection)url.openConnection();
  connection.setRequestMethod("POST");
  .....

  //Send request
  DataOutputStream wr = new DataOutputStream (connection.getOutputStream ());
  wr.writeBytes (urlParameters);
  .......

  //Get Response
  InputStream is = connection.getInputStream();
  BufferedReader rd = new BufferedReader(new InputStreamReader(is));
  ....read the contents
 }catch(...){
   ...
 } 
```

# webgl - WebGL 和 Tessellation 库？

> ID：12901283
> 
> 赞同：8
> 
> 时间：2012-10-15T17:57:05.387
> 
> 标签：webgl, tessellation

在 C/C++ 中，OpenGL 有一个很好的库，用于将复杂的多边形形状细分为三角形条带和扇形。该库是“GLUtesselator”。

是否有任何与 WebGL(HTML) 具有等效功能的库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-01T14:14:50.270

GLUtesselator 已由 Google Maps 的 Brendan Kenny 移植到 javascript。 [这是 github 上 libtess.js 的链接](https://github.com/brendankenny/libtess.js)。

Vladimir Agafonkin (leaflet.js, Mapbox) 最近开发了 earcut.js，它目前是“用于 WebGL 应用程序的最快和最小的 JavaScript 多边形三角剖分库” [这是 earcut.js 的 github 链接](https://github.com/mapbox/earcut)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T06:31:48.593

Three.JS 使用三角函数将文本渲染为多边形。~~它没有公开，但看起来[应该很容易提取](http://threejsdoc.appspot.com/doc/three.js/src.source/extras/geometries/TextGeometry.js.html)。~~实际上它被暴露为[THREE.Shape.Utils.triangulateShape](http://threejsdoc.appspot.com/doc/three.js/src.source/extras/geometries/ExtrudeGeometry.js.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-10T12:37:55.560

我有同样的问题（在具有 Box2D 形状的 HTML Canvas 中）并尝试使用 Three.js 的三角测量功能，但使用这个非常好的库对我来说要容易得多：[https ://code.google.com/p /poly2tri/](https://code.google.com/p/poly2tri/)

JS 实现在那里并且对我来说非常有效：[https ://code.google.com/p/poly2tri/source/browse/?repo=javascript#hg%2Fsrc](https://code.google.com/p/poly2tri/source/browse/?repo=javascript#hg%2Fsrc)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-05T08:27:45.267

有几个图书馆。您使用的内容还取决于数据的质量。一些库因重复点、自相交多边形或数据中的其他不一致而崩溃。

*   poly2tri：[https ://github.com/r3mi/poly2tri.js](https://github.com/r3mi/poly2tri.js)
*   耳切：[https ://github.com/mapbox/earcut](https://github.com/mapbox/earcut)
*   libtess：[https ://github.com/brendankenny/libtess.js/](https://github.com/brendankenny/libtess.js/)

# google-chrome-extension - 在后台 Chrome 扩展中使用 localStorage

> ID：12901286
> 
> 赞同：1
> 
> 时间：2012-10-15T17:57:13.123
> 
> 标签：google-chrome-extension

在我的 background.js 中，当我使用 localStorage 时没有任何反应。我认为这就是 chrome 扩展编程的工作方式（localStorage 在后台页面中不起作用）。我可以在弹出页面中使用 localStorage，但对于我想要实现的目标，必须在后台页面中访问 localStorage。

所以我有两种选择：

1-从后台向弹出页面发送请求，弹出页面接收消息并用它创建一个localstorage，后台页面从弹出页面中检索localstorage的值。当后台页面发送请求时，弹出页面必须立即响应（除非用户点击扩展图标）。如果可能，该怎么做？

2-找到一种将数据存储在后台页面中的方法，例如本地存储。如果可能，该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:13:21.897

您可以在后台页面中使用 localStorage，问题可能是后台页面是持久的/存储在内存中。因此，您必须手动重新加载扩展，而不仅仅是编辑文件。

要手动重新加载扩展：

点击：Chrome > 工具 > 扩展（“Chrome”是扳手或堆叠中的三个条）滚动到您正在处理的那个，点击重新加载。

您的另一个选择是安装扩展程序以使其更容易，而不必每次都进入扩展程序页面。有一些，例如[Quick Extension Reload](https://chrome.google.com/webstore/detail/quick-extension-reload/goeiakeofnlpkioeadcbocfifmgkidpb?hl=en-GB "快速扩展重新加载")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T20:23:11.170

您绝对可以在后台页面中使用 localStorage。似乎还有别的问题。由于某些错误，您处理 localStorage 的代码部分可能没有执行。我建议检查正在运行的 background.js 的控制台（在 Chrome 中的扩展页面的开发人员模式下安装解压后的扩展后，单击“background.html”或正在执行 js 文件的任何页面）。如果有错误，您可以从那里继续前进。

# javascript - 使用复选框以显示表单

> ID：12901292
> 
> 赞同：0
> 
> 时间：2012-10-15T17:57:41.900
> 
> 标签：javascript, dojo

我在道场中制作了两种类型的表格：-

客户名称

客户地址 物理地址

邮政

电话号码

传真号码

电子邮件

写给

现在我想要一个复选框出现在屏幕上，有两个选项：- 表格 1 和表格 2

当我点击form1时，我的第一个表单应该出现，当我点击form2时，另一个表单应该出现。

我做了这两种形式。但我无法以正确的方式使用复选框

# java - Eclipse 插件开发，找不到依赖项 org.eclipse.jsch.core

> ID：12901296
> 
> 赞同：0
> 
> 时间：2012-10-15T17:58:02.073
> 
> 标签：java, eclipse, eclipse-plugin

我决定增强一个名为[JCTerm](http://www.jcraft.com/eclipse-jcterm/)的现有 eclipse 插件。我正在尝试在另一个 Eclipse 实例上安装我的增强版本（我能够在本地 Eclipse 中成功运行它，因为我似乎拥有所有依赖项）。显然发现了诸如此类`org.eclipse.core.runtime`的依赖关系，但是诸如`com.jcraft.jsch`我不太确定的依赖关系。当我`org.eclipse.jsch.core`尝试在另一个 Eclipse 实例上安装它时，它肯定会给我错误。

我定义了这些插件，创建了一个新功能项目，还单击了“计算依赖项”。然后我创建了第三个项目来创建更新站点。当我尝试从更新站点安装时，它抱怨缺少依赖项。

简而言之，我不知道如何在 Eclipse 插件开发中处理这些依赖问题，而谷歌对此毫无用处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:00:47.503

为了能够安装您的功能，Eclipse 实例必须知道您的插件的所有依赖项的更新站点。在您的系统上，当您第一次安装 JTerm 时，您手动安装了 JCraft 的东西（或至少添加了它的更新站点）。在第二个系统上，您需要手动添加 JCraft 更新站点，并在尝试安装插件之前选中安装对话框左下角的“搜索所有更新站点...”复选框。

作为替代方案，您可以修改更新站点文件并尝试将[第三方依赖项破解到您的更新站点](https://stackoverflow.com/questions/8254116/adding-update-site-urls-to-find-third-party-dependencies-during-install)中，然后安装应该可以正常运行，而无需手动步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:03:30.007

您正在开发哪个版本的 Eclipse？[JCraft 站点](http://www.jcraft.com/eclipse-cvsssh2/)描述了在 Eclipse 版本（包括 3.x）上运行的插件。我会查看这个站点，看看哪些 jcraft 插件的正确版本适合您正在使用的 Eclipse 版本。

# java - 在 mozilla 中加载 PApplet 时出现 NoClassDefFoundError 异常

> ID：12901299
> 
> 赞同：1
> 
> 时间：2012-10-15T17:58:23.573
> 
> 标签：java

我很难在 Firefox 中运行我的 PApplet。

这是我的代码：

```
import processing.core.*; 
import processing.data.*; 

import saito.objloader.*; 
import processing.opengl.*; 

 import java.applet.*; 
import java.awt.Dimension; 
import java.awt.Frame; 
import java.awt.event.*; 

public class load_and_rotate_3d extends PApplet {

OBJModel model; 
float rotateX;
float rotateY;

public void setup() {  

  size(800, 600, OPENGL);  

  model = new OBJModel(this, "Human Heart.obj", "relative", POLYGON); 

  model.translateToCenter(); 
  model.scale(15);  
  noStroke();

}

 public void draw() {   

  background(255);  

  lights();  
  translate(width/2, height/2, 0);   
  rotateX(rotateY);  
  rotateY(rotateX);

  model.draw(); 

  }

  public void mouseDragged() {  

    rotateX += (mouseX - pmouseX) * 0.01f; 
    rotateY -= (mouseY - pmouseY) * 0.01f;

  }

  boolean drawLines = false;

  static public void main(String[] passedArgs) {

    String[] appletArgs = new String[] { "load_and_rotate_3d" };

       if (passedArgs != null) {

         PApplet.main(concat(appletArgs, passedArgs));

       } else {
           PApplet.main(appletArgs);
       }
     }
    } 
```

这是html：

```
 <html>
   <head>
     <title>PApplet</title>
   </head>

  <body>

 <applet code="load_and_rotate_3d.java" codebase = "../source" width="800"       height="600">
 </applet>
  </body>
 </html> 
```

环境：Windows7。

代码是在处理中编写的，然后导出到 Eclipse。当我在 mozilla 中打开它时，或者我得到 NoClassDefFoundError 异常。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:58:42.330

这种类型的错误意味着一个或类/jar 文件在运行时失败。

要解决这个问题，只需检查运行时是否存在所有导入的类/jar

# algorithm - 优势层次算法解决方案

> ID：12901300
> 
> 赞同：1
> 
> 时间：2012-10-15T17:58:25.550
> 
> 标签：algorithm, bioinformatics

我正在尝试从优势矩阵计算非线性/不传递层次结构，并想知道是否有解决此问题的算法，如果有，请提供相关算法。

该矩阵有 20 个不同的个体，每个个体之间都有一个结果交互，共有 82 个交互。

了解是否有人知道用于基于矩阵计算优势层次结构的现有解决方案/软件也很有用。

如有必要，我很乐意提供更多信息。

# java - JAXB java.util.Map 到键值对

> ID：12901302
> 
> 赞同：3
> 
> 时间：2012-10-15T17:58:30.323
> 
> 标签：java, xml, jaxb

我想将 Map 编组/解组为 XML 元素的属性。我见过这样的例子：

```
<map>
<entry key="key1">value1</entry>
<entry key="key2">value2</entry>
</map> 
```

我真正想要的是：

```
<map key1="value1" key2="value2"/> 
```

假设没有复杂的值并且它们可以合法地表示为 XML 属性。另外，我试图笼统地写这个，因为键集直到运行时才知道。

我该怎么办？我熟悉 XmlJavaTypeAdapter。

我想过创建一个包含条目列表的 MyMap ，但这不会得到我想要的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:08:10.987

就像我在评论中暗示的那样，仅靠 JAXB 无法实现这一点。在 JAXB 规范（[JSR 222](http://jcp.org/en/jsr/detail?id=222)）中它说：

> 在所有应用场景中，我们都创建了模式的 Java 对象级绑定。

这意味着绑定的范围与模式的范围相同，它是静态的。不重新编译代码就不能更改 JAXB 绑定。有一些例外情况，例如`xs:anyAttribute`在规范的第 6.9 节中讨论的情况，但是由于您没有投票支持建议使用的答案，因此`@XmlAnyAttribute`您可能不想忍受这些限制 - 例如只有`QName`地图中的键.

我希望您确信使用 JAXB 做您想做的事情是一个非常糟糕的主意，但下面的示例仅供参考，它在编组后修改文档以使其成为您想要的结构。您可以将其复制并粘贴到单个文件中，然后使用 Java 7 对其进行编译。输出将如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<mapExample>
  <map France="Paris" Japan="Tokyo"/>
</mapExample> 
```

我的代码仅显示编组另一个方向是等效的：

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.Marshaller;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.adapters.XmlAdapter;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMResult;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

@XmlRootElement
class MapExample {
  @XmlJavaTypeAdapter(MapXmlAdapter.class)
  @XmlElement(name="map")
  private Map<String, String> data = new HashMap<>();

  public static void main(String[] args) throws Exception {
    MapExample example = new MapExample();
    example.data.put("France", "Paris");
    example.data.put("Japan", "Tokyo");

    JAXBContext context = JAXBContext.newInstance(MapExample.class);
    Marshaller marshaller = context.createMarshaller();
    DOMResult result = new DOMResult();
    marshaller.marshal(example, result);

    XPathFactory factory = XPathFactory.newInstance();
    XPath xpath = factory.newXPath();

    Document document = (Document)result.getNode();
    XPathExpression expression = xpath.compile("//map/entry");
    NodeList nodes = (NodeList)expression.evaluate(document, XPathConstants.NODESET);

    expression = xpath.compile("//map");
    Node oldMap = (Node)expression.evaluate(document, XPathConstants.NODE);    
    Element newMap = document.createElement("map");

    for (int index = 0; index < nodes.getLength(); index++) {
      Element element = (Element)nodes.item(index);
      newMap.setAttribute(element.getAttribute("key"), 
          element.getAttribute("value"));
    }

    expression = xpath.compile("//map/..");
    Node parent = (Node)expression.evaluate(document, XPathConstants.NODE);    
    parent.replaceChild(newMap, oldMap);

    TransformerFactory.newInstance().newTransformer().
      transform(new DOMSource(document), new StreamResult(System.out));
  }
}

class MapXmlAdapter extends XmlAdapter<MyMap, Map<String, String>> {
  @Override
  public Map<String, String> unmarshal(MyMap value) throws Exception {
    throw new UnsupportedOperationException();
  }

  @Override
  public MyMap marshal(Map<String, String> value) throws Exception {
    MyMap map = new MyMap();
    map.entries = new ArrayList<MyEntry>();
    for (String key : value.keySet()) {
      MyEntry entry = new MyEntry();
      entry.key = key;
      entry.value = value.get(key);
      map.entries.add(entry);
    }
    return map;
  }
}

class MyMap {
  @XmlElement(name="entry")
  public List<MyEntry> entries;
}

class MyEntry {
  @XmlAttribute
  public String key;

  @XmlAttribute
  public String value;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T19:25:34.840

这听起来像是用于[`@XmlAnyAttribute`](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlAnyAttribute.html). 您可以将该注释放在 a 上`Map<QName, Object>`，它会将未由其他注释明确绑定的所有属性收集到该映射中。

```
@XmlRootElement
public class Example {
  @XmlElement(name = "map")
  @XmlJavaTypeAdapter(MapAdapter.class)
  private Map<String, String> map;
}

class MapAdapter extends XmlAdapter<MapWrapper, Map<String, String>> {
  @Override
  public Map<String, String> unmarshal(MapWrapper value) throws Exception {
    if(value == null || value.attributes == null) return null;

    Map<String, String> map = new HashMap<String, String>();
    for(Map.Entry<QName, Object> entry : value.attributes.entrySet()) {
      map.put(entry.getKey().getLocalPart(), entry.getValue().toString());
    }
    return map;
  }

  @Override
  public MapWrapper marshal(Map<String, String> map) throws Exception {
    if(map == null) return null;

    MapWrapper w = new MapWrapper();
    w.attributes = new HashMap<QName, Object>();
    for (Map.Entry<String, String> entry : map.entrySet()) {
      w.attributes.put(new QName(entry.getKey()), entry.getValue());
    }
    return w;
  }

}

class MapWrapper {
  @XmlAnyAttribute
  public Map<QName, Object> attributes;
} 
```

# ruby-on-rails - 预编译时从 js.erb 文件访问模型

> ID：12901305
> 
> 赞同：6
> 
> 时间：2012-10-15T17:58:34.353
> 
> 标签：ruby-on-rails, asset-pipeline, precompile

我有一个 Rails 3 应用程序，我试图用我的数据库中的每个国家（少于 300 个国家）作为 JSON 对象填充一个 javascript 变量。这是我`nations.js.erb`文件中的相关行：

```
_this.nations = <%= Nation.all.to_json :only => [:id], :methods => :text %>; 
```

`/assets/users.js`当我在需要国家文件的浏览器中调用我的 js 文件时，该`_this.nations`变量被完美填充。当我尝试进行预编译时，我得到以下信息：

```
$> rake assets:precompile
$> rake aborted!
uninitialized constant Nation (in nations.js.erb) 
```

所以我的问题是：是否可以`Nation`从文件中引用模型或任何模型`js.erb`进行预编译？我也尝试使用我的`NationsHelper`，但我的错误只是更改为未初始化的常量 NationsHelper。

我对 RoR 还很陌生，所以如果需要我没有提供的相关信息，请询问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T18:03:46.260

如果您已`config.assets.initialize_on_precompile`设置到`false`某个地方，请尝试启用它

```
config.assets.initialize_on_precompile = true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:38:39.490

为什么不在控制器中拨打电话

控制器

```
@nations = Nation.all 
```

国家.js.erb

```
_this.nations = <%= @nations.all.to_json :only => [:id], :methods => :text %>; 
```

# c# - 终端调试模式下 VBA 编辑器的屏幕截图，或使用 Excel DOM 在 VBA 编辑器中查找错误行和描述？

> ID：12901309
> 
> 赞同：2
> 
> 时间：2012-10-15T17:58:44.173
> 
> 标签：c#, excel

Excel 工作簿由命令行调用，命令行本身是从 c# (3.5) 启动的。工作簿运行，但 VBA 中存在错误。例如，数据透视表中缺少一列，Excel 会向用户提示错误消息，并带有“调试”选项。

从C#中的流程我们可以检测到错误窗口是打开的，我们对错误信息进行截图，然后我们关闭错误框。

如果这是一个交互式会话，Excel 将在调试模式下显示 VBA 编辑器，并突出显示发生错误的行。

但是，因为这是在无人看管的终端会话中运行的，所以我们无法截取 VBA 编辑器的屏幕截图（屏幕截图是黑屏）。

然后，我们可以使用 windows PID 关闭 excel 程序。

问题是：我们如何获得 VBA 编辑器的屏幕截图，或者我们如何在调试模式下与 Excel 绑定（使用 COM 或互操作），并遍历 dom 以找到错误行，以及可能的错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:22:03.433

[数据结构的快照，VBA excel](https://stackoverflow.com/questions/11668189/snapshot-of-data-structures-vba-excel/11672199#11672199)

这听起来很像上面的问题，我建议将代码的状态写入单独的 txt 文件（在示例中，使用 FileSystemObject），然后您可以在其中分析卡住的位置：条件布尔值/对象实例化，成功循环的数字，变量中包含的值，以及 - 无论你想要什么......）。
结合错误处理程序（如前所述），您可以看到代码停止的位置 + 错误的代码/描述。

为了您的缘故复制粘贴：

```
dim sFile               As string
Dim FSO                 As FileSystemObject
Dim FSOFile             As TextStream
sFile = "U:/Log.txt"   

Set FSO = New FileSystemObject
Set FSOFile = FSO.OpenTextFile(sFile, 2, True)
FSOFile.writeline (<Descriptions+Property/variable value>)
FSOFile.Close set FSO = nothing 
```

我同意这是一项更多的工作，但是您会知道在哪里可以找到错误。
这一切都取决于您需要它的难度和频率，以及您需要描述的代码多长时间。由于我不了解您的情况，因此无法判断。

最后，看起来工作量很大，但实际上很容易，因为它只是描述已经存在的代码。
希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:14:31.967

(1) 如果您对 Excel 工作簿具有创作控制权，则可以插入行号和错误处理程序以写入文件 Err.Number、Err.Description、Err.Source、Erl。

(2) 如果 (1) 不是一个选项，但您可以在主机上设置 Macro Security 以允许对 Visual Basic 项目进行编程控制，那么您可以获得活动行号：

```
Dim xl As excel.Application
Dim StartLine As Long, StartColumn As Long, EndLine As Long, EndColumn As Long
Set xl = GetObject(, "Excel.Application")
xl.VBE.ActiveCodePane.GetSelection StartLine, StartColumn, EndLine, EndColumn
Debug.Print StartLine, StartColumn, EndLine, EndColumn 
```

（3）如果（1）和（2）都不是选项，那就有点毛骨悚然了，不过可以把窗口的位图内容复制出来：http: [//msdn.microsoft.com/en-us/library/ windows/桌面/dd183402%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183402%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T16:03:38.793

如果您有权修改 VBA 代码，最简单的解决方案可能是使用 On Error GoTo 和行标签。这将阻止 Debug 消息弹出，相反，当发生运行时错误时，执行将跳转到指定的标签，此时您可以访问全局 Err 对象中可用的信息。VBA 没有 try/catch 块的概念，所以这几乎是最接近的。

```
Sub Main()
    On Error GoTo Catch

    ' Code that may trigger errors here...

   GoTo Finally
Catch:
    ' Log Err info, etc...
    Debug.Print "Error " & Err.Number & " - " & Err.Description
Finally:
    ' This is always reached last (error or no error)
End Sub 
```

# c++ - 是否有确定 va_args 数量的标准方法？

> ID：12901310
> 
> 赞同：8
> 
> 时间：2012-10-15T17:58:49.133
> 
> 标签：c++, variadic-functions

我正在使用[va_args](http://www.cplusplus.com/reference/clibrary/cstdarg/va_arg/)在 C++ 中试验可变参数。这个想法很有用，而且确实是我在 C# 中通过 params 功能使用的很多东西。让我感到沮丧的一件事是上面关于 va_args 的以下摘录：

> 另请注意， va_arg 无法确定检索到的参数是否是传递给函数的最后一个参数（或者即使它是超出该列表末尾的元素）。

我很难相信没有办法以编程方式确定从该函数本身传递给该函数的变量参数的数量。我想执行以下操作：

```
void fcn(int arg1 ...)
{
    va_list argList;
    va_start(argList, arg1);

    int numRemainingParams = //function that returns number of remaining parameters
    for (int i=0; i<numRemainingParams; ++i)
    {
        //do stuff with params
    }
    va_end(argList);
} 
```

重申一下，上面的文档表明 va_arg 不能确定检索到的 arg 是否是列表中的最后一个。但我觉得这些信息必须以某种方式访问​​。

有没有实现这一目标的标准方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T18:02:57.250

> 我很难相信没有办法以编程方式确定从该函数本身传递给该函数的变量参数的数量。

尽管如此，这是真的。C/C++ 不会在参数列表的末尾放置标记，所以被调用的函数真的不知道它正在接收多少个参数。如果您需要标记参数的结尾，您必须自己通过在列表末尾放置某种标记来完成。

被调用的函数也不知道所提供参数的类型或大小。这就是为什么`printf`和朋友们强迫您指定要插入格式字符串的值的精确数据类型，以及您可以通过使用错误格式字符串调用 printf 来使程序崩溃的原因。

请注意，参数传递由特定平台的 ABI 指定，而不是由 C++/C 标准指定。但是，ABI 必须允许 C++/C 标准可实施。例如，ABI 可能希望在寄存器中传递参数以提高效率，但在这种情况下可能无法轻松实现 va_args。因此，参数也可能在堆栈上被隐藏。但是，几乎在任何情况下都不会标记堆栈以显示参数列表的结尾，因为 C++/C 标准不要求提供此信息，因此这将是不必要的开销。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T18:04:51.820

变量参数在 C 和 C++ 中的工作方式相对简单：参数只是被压入堆栈，被调用者有责任在一定程度上弄清楚有哪些参数。标准中没有任何内容提供确定参数数量的方法。结果，参数的数量由一些上下文信息确定，例如，格式字符串中引用的元素的数量。

个别编译器可能知道有多少元素，但没有标准接口来获取此值。

但是，您可以做的是使用可变参数模板：您可以确定有关传递给函数的参数的非常详细的信息。接口看起来不同，可能需要将参数引导到某种数据结构中，但从好的方面来说，它也适用于无法使用可变参数传递的类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T18:02:37.453

不，没有。这就是变量参数*不安全*的原因。它们是 C 的一部分，它缺乏实现“方便”可变参数函数的类型安全的表达能力。您必须接受这样一个事实，即 C 包含的结构的正确性取决于*值*而不仅仅是类型。这就是为什么它是一种“不安全的语言”。

不要在 C++ 中使用可变参数。它是一种更强大的语言，可让您编写同样方便且安全的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T18:03:24.890

不，没有这种方法。如果您有这样的需求，最好将这些函数参数打包到一个`std::vector`可以迭代的或类似的集合中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T18:38:31.207

变量参数列表是继承自 C++ 的 C 历史的一个非常古老的概念。它可以追溯到 C 程序员通常考虑生成的汇编代码的时代。

那时，编译器根本没有检查您在调用函数时传递给函数的数据是否与函数预期接收的数据类型匹配。做正确的事是程序员的责任。例如，如果调用者使用 a 调用函数`char`并且函数期望 a`int`程序崩溃，尽管编译器没有抱怨。

今天的类型检查可以防止这些错误，但是使用可变参数列表，您可以回到那些旧概念，包括所有风险。所以，如果你能以某种方式避免它，就不要使用它。

这个概念已有几十年历史的事实可能是与现代安全代码概念相比感觉错误的原因。

# javascript - MooTools：表单上的“this”元素

> ID：12901313
> 
> 赞同：0
> 
> 时间：2012-10-15T17:58:56.797
> 
> 标签：javascript, html, mootools

[http://jsfiddle.net/DnBsR/](http://jsfiddle.net/DnBsR/)

正如您在 jsfiddle 中看到的，“名称”输入框的效果按计划进行：

*   如果单击它，它会滑动，因此您可以看到标签。
*   如果您然后单击它，它会滑回。
*   如果您在框中输入文本，它不会滑回，直到那里再没有任何内容。

这种效果正是我想要的（暂时忘记它不覆盖整个标签等）。

但是，可以看到，我将拥有多个表单输入框。你在 MooTools 中添加了什么使它适用于每个输入框，而不仅仅是一个输入框？类似于“这个”的东西？搞不定...

此外，如果有人想让当前的 MooTools 变得更好，请随意，因为这可能会更容易完成......

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T18:06:55.373

首先，您必须使用`$$`选择器来处理元素集合（而不仅仅是单个元素）。由于在 DOM 中不能有两个（或更多）具有相同 ID 的元素，因此您应该使用其他方法对它们进行分组——我想，类是最常见的方法。

其次，您应该`this`在事件处理程序中使用变量（而不是一次又一次地尝试遍历 DOM），因为它将对应于目标元素。

最后，您可以（并且应该）链接事件附件。像这样：

```
$$('.element').addEvent('focus', function(){
    var input_value = this.value;
    if (input_value == '') {
        this.morph({
          'left': '60px',
          'width': '256px'
        });
    }
}).addEvent('blur', function(){
    var input_value = this.value;
    if (input_value === '') {
      this.morph({
        'left': '16px',
        'width': '300px'
      });
    }
}); 
```

这是可以玩的[**JS Fiddle 。**](http://jsfiddle.net/DnBsR/3/))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:06:43.147

只需使用这个： http: [//jsfiddle.net/DnBsR/2/](http://jsfiddle.net/DnBsR/2/) 说明：使用 $$(selector)，您可以只解析普通的 css 选择器，所以这个选择 #myform 的所有输入元素。我们用 .each 循环遍历它们，并在循环中为它们添加一个事件处理程序。由于我们不能再在处理程序中使用 $('element') ，我们只使用 this ，它指向触发事件的元素。

# liferay - 如何#set 变量以使其在包含的速度模板中可用

> ID：12901317
> 
> 赞同：0
> 
> 时间：2012-10-15T17:59:05.693
> 
> 标签：liferay, velocity

我正在为 Liferay 创建一个自定义主题，我希望在每个页面布局中单独包含页脚。不幸的是，我似乎无法访问页面布局文件中的 $full_templates_path 变量。我没有运气使用#set 手动存储该值，然后在包含的模板中访问该值。

在 vanilla 主题中，文件的处理是这样的：

```
portal_normal.vm:
  1) some init, doctype, etc.
  2) #parse("$full_templates_path/header.vm")
  3) $theme.include($content_include)
    a) custom_layout_1.tpl
    b) chat portlet
  4) #parse("$full_templates_path/footer.vm") 
```

出于布局目的，我需要偏离这种模式，如下所示：

```
portal_normal.vm
  1) some init, doctype, etc.
  2) #parse("$full_templates_path/header.vm")
  3) $theme.include($content_include)
    a) custom_layout_1.tpl
      i) #parse("$full_templates_path/footer.vm")
    b) chat portlet 
```

当我尝试这个时，tomcat 会出错，因为在 custom_layout_1.tpl 中没有定义 $full_templates_path。我尝试通过在 portal_normal.vm 中执行以下操作来解决此问题

```
#set($full_footer_path = "$full_templates_path/footer.vm")
$theme.include($content_include) 
```

然后，在 custom_layout_1.tpl 中，我在希望发出页脚标记的地方执行此操作：

```
#parse("$full_footer_path") 
```

但是，tomcat 仍然报错，说 $full_footer_path 没有定义。

当我将 $full_templates_path 的值硬编码到 custom_layout_1.tpl 中的 #parse 语句中时，一切正常，但这对我来说似乎是一个 hack。

理想情况下，这应该出于正确的原因做正确的事情，而不仅仅是因为我使用了很多胶带。

关于从自定义页面布局中实现包含模板文件的方法的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:00:48.213

问题可能是由于您的速度配置。

`velocimacro.permissions.allow.inline.local.scope`如果您想访问在一个模板中设置的变量以便在另一个模板中访问，则以下属性应该为 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:51:28.710

你可能打错了你的问题，但`#set($full_footer_path = "$full_templates_path/footer.vm"`最后不应该有一个右括号......

```
#set( $full_footer_path = "$full_templates_path/footer.vm" ) 
```

它也可能有助于`$full_templates_path`用花括号括起来以将其与文本的其余部分区分开来，即`${full_templates_path}`

# json - 如何阻止空值字段在 Grails 中编组

> ID：12901318
> 
> 赞同：1
> 
> 时间：2012-10-15T17:59:09.127
> 
> 标签：json, grails, marshalling

我正在使用 Grails 1.3.7 并具有以下 DTO

```
class Result {
   String key
   List errors
} 
```

现在将出现密钥或错误，但不会同时出现。如果 Result 有一个键，我不希望编组的 JSON 的错误字段为空值，如下所示

```
{"errors":null,"key":"abcde"} 
```

我查看了转换器的[配置选项](http://grails.org/Converters+Reference)，它没有抑制空值的选项。我还查看了该页面上标题为“自定义转换器结果”的最后一部分，并注册了一个对象编组器，如下所示

```
class Result {

   static {
      grails.converters.JSON.registerObjectMarshaller(Result) {
     return it.properties.findAll {k,v -> v != null}
     }
   }

} 
```

但结果仍然包含空值错误。我正在为 XML 和 JSON 寻找最简洁的方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T20:29:59.170

尝试这个 Grails 2.0.3 会导致一个错误，表明该`errors`字段与 GORM 的自动添加的`grails.validation.ValidationErrors`字段（也称为`errors`）之间存在冲突。您的 marshaller 看起来不错，所以您可能只需要将您的字段名称更改为其他名称`errors`？

# vb6 - 为什么我会收到“无效的属性值”错误 380、VB6、VSFlexGrid.buildcombolist？

> ID：12901319
> 
> 赞同：0
> 
> 时间：2012-10-15T17:59:18.643
> 
> 标签：vb6, runtime-error

我是使用 VB6 的新手，我正在尝试调试 err 380。错误发生在从使用的 VSFlexgrid 调用函数期间，我发现关于所涉及函数的特定文档很少：**VSFlexgrid。构建组合列表**。

我在运行win XP的VM中开发，该软件通常在Win7上运行，所以我认为它不属于我已经在SO上看到的兼容性问题。

它发生的代码部分在程序中多次发生而没有错误，但只发生在特定的操作上。

有谁知道具体是什么可能导致错误（或通常使用这些类型的函数）？它是 RecordSets 的一个属性，它触发了我可能不知道的错误（对 vb6 来说非常新）？我已经确认发生错误时**BuildComboList**的参数不为空/空。不过，我的怀疑与记录集有关....

一些代码：

```
Public Function LoadFlexCombo(grd As VSFlexGrid, conpassedconnection As Connection, 
StoredProcedureName As String, FieldList As String, Optional keyfield As String, 
Optional LookupName As String, Optional colKey As String, Optional UDFFilterValue As 
String)
...
grd.BuildComboList(rs, FieldList, keyfield) 'bails out to error handler here.
... 
```

# java - Android后退按钮反应太快

> ID：12901325
> 
> 赞同：1
> 
> 时间：2012-10-15T17:59:38.450
> 
> 标签：java, android

我正在开发一个 android 应用程序，当我从我的设备按下后退按钮（一个人的正常按下时间，1 秒或更短）时，它会从我的活动跳到上一个活动（菜单），然后退出应用程序。但是如果我快速点击后退按钮，它会按预期做出反应，它会进入菜单。我试图找到解决方案但没有成功。我一直试图覆盖后退按钮的默认行为，但也没有成功。有没有办法设置后退按钮的反应时间？

提前谢谢了！

PS-我还有其他活动可以在正常按下时间按下后退按钮时保持预期行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:19:53.650

我正在为一个已经存在的应用程序开发一个额外的选项，我发现我不应该从 Android 的 Activity 扩展，而是应该**从**一个名为 SEActivity 的已经扩展的 Activity 扩展。所以在这个扩展版本的 Activity 中，他们像这样覆盖 onKeyDown 方法：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        return true;
    }
    else
        return super.onKeyDown(keyCode, event);
} 
```

通过扩展这个 SEActivity，Back 按钮可以实现预期的行为。不管怎么说，还是要谢谢你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:06:24.987

“有没有办法设置后退按钮的反应时间？”

是的，您可以简单地记录按下按钮的时间，并通过计算 (currentTime-lastTimePressed) 在 onBackPressed 中做出不同的反应

为了允许它与以前的活动一起工作，您可以要求活动启动ActivityForResult，这样当您完成活动时，您也可以传递时间，让他们知道他们是否也应该退出。

# facebook - zend search lucence return hit id of search insted 字段的id

> ID：12901327
> 
> 赞同：1
> 
> 时间：2012-10-15T17:59:47.983
> 
> 标签：facebook

我有问题 zend 搜索 lucence ：

zend search lucence 返回搜索的命中 id 字段的 insted id。例如：

我在 Yii 控制器中有这个代码，用于创建新闻数据的索引：

```
 public function createNewsIndex()
 {

    setlocale(LC_CTYPE, 'de_DE.iso-8859-1');

    Zend_Search_Lucene_Analysis_Analyzer_Common_TextNum_CaseInsensitive::setDefault(new Zend_Search_Lucene_Analysis_Analyzer_Common_Utf8());
    Zend_Search_Lucene_Analysis_Analyzer::setDefault(new Zend_Search_Lucene_Analysis_Analyzer_Common_Utf8_CaseInsensitive());

    $index = new Zend_Search_Lucene(Yii::getPathOfAlias('application.' . $this->_indexFiles.'.news'), true);

    $news= News::model()->findAll();

    foreach ($news as $newsItem) {

        $news_doc=new Zend_Search_Lucene_Document();
        $news_doc->addField(Zend_Search_Lucene_Field::Text('id',CHtml::encode($newsItem->id),'utf-8'));
        $news_doc->addField(Zend_Search_Lucene_Field::Text('title',CHtml::encode($newsItem->title),'utf-8'));
        $news_doc->addField(Zend_Search_Lucene_Field::Text('keywords',CHtml::encode($newsItem->keywords),'utf-8'));
        $index->addDocument($news_doc);
    }

    $index->commit();
    $index->optimize();
  } 
```

我有这个搜索新闻的代码：

```
 public function searchNews($term) {

    setlocale(LC_CTYPE, 'de_DE.iso-8859-1');

    Zend_Search_Lucene_Analysis_Analyzer_Common_TextNum_CaseInsensitive::setDefault(new Zend_Search_Lucene_Analysis_Analyzer_Common_Utf8());
    Zend_Search_Lucene_Analysis_Analyzer::setDefault(new Zend_Search_Lucene_Analysis_Analyzer_Common_Utf8_CaseInsensitive());

      try
    {
        $index = new Zend_Search_Lucene(Yii::getPathOfAlias('application.' . $this->_indexFiles . '.news'));
    }
    catch(Zend_Search_Lucene_Exception $e)
    {
        $this->createNewsIndex();
        $index = new Zend_Search_Lucene(Yii::getPathOfAlias('application.' . $this->_indexFiles . '.news'));
    }

    $query = Zend_Search_Lucene_Search_QueryParser::parse($term);

    $results = $index->find($term . '*');
    $this->render('search', array(
            'results' => $results,
                )

        } 
```

并查看此代码：

```
<?php foreach ($results as $result)
{    
 print "ID: " . $result->id . "\n";
 print "Score: " . $result->title . "\n<br>";
 print CHtml::link(CHtml::encode($result->title), array($controller.'/view', 'id'=>$result->id));
    }
    ?> 
```

我希望 $result->id 是这个新闻标题的 id，但我认为这是一个命中 ID，我认为这是一个测试 Aht ID。根据此链接点击查找功能：（请参阅查找功能） [http://phpcrossref.com/zendframework/library/Zend/Search/Lucene.php.html](http://phpcrossref.com/zendframework/library/Zend/Search/Lucene.php.html) 。

抱歉英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:06:38.763

我通过重命名 id 字段名称来解决问题：

```
$news_doc->addField(Zend_Search_Lucene_Field::Text('news_id',CHtml::encode($newsItem->id),'utf-8')); 
```

并认为：

```
<?php foreach ($results as $result)
{    
 print "ID: " . $result->news_id . "\n";
 print "Score: " . $result->title . "\n<br>";
 print CHtml::link(CHtml::encode($result->title), array($controller.'/view', 'id'=>$result->news_id));
    }
    ?> 
```

# macos - NSArrayController 没有拾取从另一个上下文合并的数据

> ID：12901329
> 
> 赞同：0
> 
> 时间：2012-10-15T17:59:53.930
> 
> 标签：macos, core-data

所以，我有一个简单的表格视图，我的列“名称”绑定到 NSArrayController。NSArrayController 使用 Entity 类型定义，并将保存 Person 对象。我已经检查了 XIB 文件中的“准备内容”。在我的应用程序中，我创建并插入了一个名为“网络”的托管对象。此类具有处理从网络传入的数据的委托方法。当我的 updateNotificationMethod 被调用时，我创建了我的 Person 托管对象并将其插入到“Network”的托管对象上下文中。

上面的工作就像魅力一样，我能够在表格视图中显示名称而没有任何问题。但是，如果我在具有新 managedObjectContext 的线程中处理通知，并且我在主线程中处理 NSManagedObjectContextDidSaveNotification 以将更改合并到我的主托管对象上下文中，那么我在表视图中看不到任何更新。NSArrayController 不应该知道合并的新托管对象并显示它们吗？

关于我在这里缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:06:17.197

如果您在主上下文中创建“网络”并在后台线程中使用 [network objectID] 选择它，请确保在进入后台线程之前进行保存。否则，“网络”的 objectID 将是临时的，并最终导致不正确的对象。在我看来，其他一切都很好。

# android - Android以编程方式加载字符串数组

> ID：12901333
> 
> 赞同：4
> 
> 时间：2012-10-15T18:00:11.013
> 
> 标签：android, string

我有一个名为的类`StringsA`，其中有一个字符串数组：

```
public class StringsA {

static String Names[] = {"Larry", "Moe", "Curly", "John"};  

} 
```

在我的主要课程中，有 a`Button`和 a `TextView`。我想要的是`TextView`每次`Button`单击时将 的文本设置为与字符串数组不同的单词。例如; 当前项目是“萌”，当点击按钮时，`TextView`变化为“约翰”（变化是随机的，不是按顺序变化的）。

我当前的活动代码：

```
 setContentView(R.layout.main);
    Button a = (Button) findViewById(R.id.button1);
    TextView b = (TextView) findViewById(R.id.tv);        

    Resources i = getResources();
    i.getResourceName(StringsA.Names);

    a.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {               

        }
    });
} 
```

我在`i.getResourceTypeName`. 单击时，我应该如何将`TextView`文本更改为字符串之一`Button`？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-15T18:04:34.923

充分利用 Android 资源，从 strings.xml 中定义的字符串数组加载您的值。例如

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="planets_array">
        <item>Mercury</item>
        <item>Venus</item>
        <item>Earth</item>
        <item>Mars</item>
    </string-array>
</resources> 
```

然后：

```
 private static final Random RAND = new Random();

  public void onCreate(Bundle savedInstanceState) {
    setContentView(R.layout.main);
    Button myButton = (Button) findViewById(R.id.button1);
    TextView myTextField = (TextView) findViewById(R.id.tv);     

    final String[] values = getResources().getStringArray(R.array.planets_array);
    myButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {     
          String nextValue = values[RAND.nextInt(values.length)]          
          myTextField.setText(nextValue);
        }
    });
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:02:21.633

在 onClick 方法中添加以下两行

```
int readomIndex = (int)(Math.random() * 3);
b.setText( Names[readomIndex]); 
```

# php - 更改 wordpress 页面上的帖子缩略图大小

> ID：12901334
> 
> 赞同：1
> 
> 时间：2012-10-15T18:00:12.567
> 
> 标签：php, html, css, wordpress

我制作了一个单独的 wordpress 页面来显示我所有的特色图像，它们确实会显示，但我需要帮助来了解如何使它们显示为实际尺寸而不是真正的小图像。

```
 <?php
$the_query = new WP_Query();
$the_query->query("cat=4&nopaging=true");

if ($the_query->have_posts()) : 
while($the_query->have_posts()) : $the_query->the_post();

  if(has_post_thumbnail()) : 
    the_post_thumbnail();
  endif;

endwhile; 
endif; 
wp_reset_postdata();
$image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'single-post-thumbnail' ); 
?>

<img src='<?php echo $image[0]; ?>' /> 
```

那是我现在的代码页面是[http://rickwarren.veracitycolab.com/banners/](http://rickwarren.veracitycolab.com/banners/)

谢谢！

这就是我的新代码的样子，图像仍然是一样的有什么想法吗？

```
 <?php
$the_query = new WP_Query();
$the_query->query("cat=4&nopaging=true");
if ($the_query->have_posts()) : 
while($the_query->have_posts()) : $the_query->the_post();

  if(has_post_thumbnail()) : 
    the_post_thumbnail();
  endif;

endwhile; 
endif; 
wp_reset_postdata();
$image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'full' );
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:28:21.553

如果在您添加“完整”参数后它仍然没有改变，您可能想尝试 Regenerate Thumbnails 插件： [http ://wordpress.org/extend/plugins/regenerate-thumbnails/](http://wordpress.org/extend/plugins/regenerate-thumbnails/)

通常，当我一直在搞乱自定义缩略图大小时，它对我有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:10:32.183

[wp_get_attachment_image_src()](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src)的第二个参数是要返回的图像的大小。在这里使用`full`应该会给你全尺寸的图像。

```
$image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'full' ); 
```

**编辑：**当然，这部分代码没有做任何事情，因为它在循环之外。

将第 8 行更改为`the_post_thumbnail('full');`

您可以删除以 开头的行之后的所有内容`$image...`。[法典页面在这里](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T18:12:10.133

也传递`wp_get_attachment_image_src(...)`一个大小参数。在您的情况下，您想要“完整”，所以`wp_get_attachment_image_src( $post->ID, 'full' )`. 来自[该功能的法典](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src)：

> $size (string/array) (可选) 为图片附件显示的图片大小：字符串关键字（缩略图、中、大或完整）或以像素为单位表示宽度和高度的 2 项数组，例如 array(32 ,32)。从 2.5 版开始，此参数不影响媒体图标的大小，媒体图标始终以其原始大小显示。
> 
> ```
>  Default: thumbnail 
> ```

CSS 规则仍然可以“缩小”图像，因此如果它不起作用，请检查 HTML 源中的 URL 以确认请求的图像正确，然后检查样式表。

# python - Python unittest：如果特定测试失败，则取消所有测试

> ID：12901338
> 
> 赞同：10
> 
> 时间：2012-10-15T18:00:17.030
> 
> 标签：python, unit-testing, nose

我`unittest`用来测试我的 Flask 应用程序，并`nose`实际运行测试。

我的第一组测试是确保测试环境干净，并防止在 Flask 应用程序配置的数据库上运行测试。我确信我已经干净地设置了测试环境，但我希望在不运行所有测试的情况下对此有所保证。

```
import unittest

class MyTestCase(unittest.TestCase):
    def setUp(self):
        # set some stuff up
        pass

    def tearDown(self):
        # do the teardown
        pass

class TestEnvironmentTest(MyTestCase):
    def test_environment_is_clean(self):
        # A failing test
        assert 0 == 1

class SomeOtherTest(MyTestCase):
    def test_foo(self):
        # A passing test
        assert 1 == 1 
```

如果它失败，我想`TestEnvironmentTest`引起`unittest`或`nose`保释，并阻止`SomeOtherTest`和任何进一步的测试运行。是否有一些内置的方法可以这样做`unittest`（首选）或`nose`允许这样做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T20:32:07.483

为了让一个测试首先执行并且只在该测试出错的情况下停止执行其他测试，您需要调用测试[`setUp()`](https://docs.python.org/library/unittest.html#unittest.TestCase.setUp)（因为 python 不保证测试顺序）然后失败或在失败时跳过其余部分。

我喜欢[`skipTest()`](https://docs.python.org/library/unittest.html#unittest.SkipTest)它，因为它实际上不运行其他测试，而引发异常似乎仍在尝试运行测试。

```
def setUp(self):
    # set some stuff up
    self.environment_is_clean()

def environment_is_clean(self):
    try:
        # A failing test
        assert 0 == 1
    except AssertionError:
        self.skipTest("Test environment is not clean!") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T21:09:16.000

对于您的用例，有[`setUpModule()`](http://docs.python.org/library/unittest.html#setupmodule-and-teardownmodule)以下功能：

> 如果在 a 中引发异常`setUpModule`，则模块中的任何测试都不会运行，并且`tearDownModule`不会运行。如果异常是`SkipTest`异常，则模块将被报告为已被跳过而不是错误。

在这个函数中测试你的环境。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T19:01:23.487

您可以通过调用跳过整个测试用例`skipTest()`。`setUp()`这是 Python 2.7 中的一个新特性。它不会使测试失败，而是会简单地跳过它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T19:03:57.543

我不太确定它是否符合您的需求，但您可以根据第一套单元测试的结果执行第二套单元测试：

```
envsuite = unittest.TestSuite()
moretests = unittest.TestSuite()
# fill suites with test cases ...
envresult = unittest.TextTestRunner().run(envsuite)
if envresult.wasSuccessful():
    unittest.TextTestRunner().run(moretests) 
```

# code-first - 如何首先使用实体 框架 5 代码删除具有导航属性的对象？

> ID：12901339
> 
> 赞同：7
> 
> 时间：2012-10-15T18:00:21.653
> 
> 标签：code-first, entity-framework-5, delete-row

我首先使用 EF 5 代码，并且我有 2 个相关实体 ApplicationPermission 和 Application：

```
public class ApplicationPermission
{
   public virtual Application Application { get; set; }

   public int Id { get; set; }
} 

public class Application 
{
   public string Name { get; set; }

   public int Id { get; set; }
} 
```

ApplicationPermission 具有以下映射：

```
HasKey(x => x.Id);
HasRequired(x => x.Application).WithMany().Map(m => m.MapKey("ApplicationId")).WillCascadeOnDelete(false); 
```

和应用程序：

```
HasKey(x => x.Id); 
```

我使用下面的代码来删除 ApplicationPermission：

```
ApplicationPermission entity = new ApplicationPermission { Id = id };
DbContext.Set<ApplicationPermission>().Attach(entity);
DbContext.Set<ApplicationPermission>().Remove(entity);
DbContext.SaveChanges(); 
```

但我在 SaveChanges 方法上遇到错误：

> “CodeFirstContainer.ApplicationPermissions”中的实体参与“ApplicationPermission_Application”关系。找到 0 个相关的“ApplicationPermission_Application_Target”。1 'ApplicationPermission_Application_Target' 是预期的。

**如何在不将 Application 加载到 dbcontext 的情况下删除 ApplicationPermission？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T19:31:02.820

*我相信当您使用独立关联*时，如果没有设置所需的导航属性，就不可能删除实体。您必须从数据库加载，`Application`或者 - 至少 - 知道外键值并附加`Application`具有该值的实体，如下所示：

```
ApplicationPermission entity = new ApplicationPermission { Id = 1 };
entity.Application = new Application { Id = 5 };
DbContext.Set<ApplicationPermission>().Attach(entity); //attaches Application too
DbContext.Set<ApplicationPermission>().Remove(entity);
DbContext.SaveChanges(); 
```

调用时生成的 SQL 命令`SaveChanges`则为：

```
exec sp_executesql N'delete [dbo].[ApplicationPermissions]
where (([Id] = @0) and ([ApplicationId] = @1))',N'@0 int,@1 int',@0=1,@1=5 
```

如您所见，对 的查询不仅`delete`要求删除 的 ，还要求 ( ) 的外键值。为了成功，您必须通过使用相同的主键设置相关实体​​来了解并设置此 FK 值。`Id``ApplicationPermission``and``ApplicationId`

*使用外键关联*时不会出现该问题：

```
public class ApplicationPermission
{
    public virtual Application Application { get; set; }
    public int ApplicationId { get; set; }

    public int Id { get; set; }
} 
```

映射：

```
modelBuilder.Entity<ApplicationPermission>()
    .HasRequired(x => x.Application)
    .WithMany()
    .HasForeignKey(x => x.ApplicationId)
    .WillCascadeOnDelete(false); 
```

然后，您可以使用您的原始代码，而无需将 FK 属性设置`ApplicationId`为正确的值（默认为`0`then），并且无需设置导航属性并且删除实体将起作用。SQL 命令不关心 FK，只查询要删除`Id`的：`ApplicationPermission`

```
exec sp_executesql N'delete [dbo].[ApplicationPermissions]
where ([Id] = @0)',N'@0 int',@0=1 
```

我不知道为什么两种类型的关联之间的 SQL 命令不同。

# actionscript-3 - 闪存错误 as3

> ID：12901340
> 
> 赞同：0
> 
> 时间：2012-10-15T18:00:23.290
> 
> 标签：actionscript-3, debugging, error-handling

我收到此错误

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at EB_fla::mc_keyboard_25/frame1() 
```

这个错误在哪一行？第 25 行似乎没有错误 - 这具体是什么意思？

**EB_fla::mc_keyboard_25/frame1()**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:08:18.600

您在 Flash 帧中有一些脚本/代码吗？

如果是这样，错误是警告您在第 1 帧上有一个名为 mc_keyboard_25 的影片剪辑存在一些函数或属性调用问题。因此，您应该检查一下该影片剪辑内的第 1 帧中发生了什么。

我希望这可以帮助你！

问候！

# php - 使用 php 循环创建 id 列

> ID：12901343
> 
> 赞同：0
> 
> 时间：2012-10-15T18:00:35.350
> 
> 标签：php

我想要一个由 php 循环生成的 id 列，我尝试了下面的代码。

此代码正在运行，但它跳过了第一行。例如，如果有 153 行，它只显示 152 行，因为它跳过第一行并从第二行开始编号。

```
 $i = 0;
 $result = mssql_query ($sql);
 $cell = mssql_fetch_array($result);
 while ($i <= $cell & $cell = mssql_fetch_array($result))

{
$i = $i + 1;
echo "<tr><td>".$i."</td>";
echo "<td>".$cell[0]."</td>";
echo "<td>".$cell[1]."</td>";
echo "<td>".$cell[2]."</td>";
echo "<td>".$cell[3]."</td>";
echo "<td>".$cell[4]."</td>";
echo "<td>".$cell[5]."</td>";
echo "</tr>";

 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:04:31.943

```
$cell = mssql_fetch_array($result);
        ^^^^^^^^^^^^^^^^^
     fetches the first record

while ($i <= $cell & $cell = mssql_fetch_array($result))
                             ^^^^^^^^^^^^^^^^^
                         fetches the second record 
```

您永远不会输出要获取的第一条记录。
不知道你想用这种`$i`情况做什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T18:04:09.500

```
 $i = 0;
 $result = mssql_query ($sql);
 //$record = mssql_fetch_array($result); - you don't need this
 while ($cell = mssql_fetch_array($result)) //you dont need $i <= $cell 

{
$i++; //$i = $i + 1;
echo "<tr><td>".$i."</td>";
echo "<td>".$cell[0]."</td>";
echo "<td>".$cell[1]."</td>";
echo "<td>".$cell[2]."</td>";
echo "<td>".$cell[3]."</td>";
echo "<td>".$cell[4]."</td>";
echo "<td>".$cell[5]."</td>";
echo "</tr>";

 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T18:03:39.090

我猜你可能想要 && 而不是 & 这里：

```
while ($i <= $cell & $cell = mssql_fetch_array($result)) 
```

# c++ - 具有相同哈希值的值是否在 std::unordered_map 的同一桶中？

> ID：12901346
> 
> 赞同：6
> 
> 时间：2012-10-15T18:00:46.123
> 
> 标签：c++, stl, c++11

如果 std::unordered_map 的两个键具有相同的哈希值，标准是否保证它们将进入同一个存储桶？我们假设根据模板相等谓词，键不相等，它们只有相同的哈希值。

额外的问题：如果相同的哈希并不意味着相同的桶，那么能够单独遍历桶的目的是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T18:04:38.387

具有相同散列的对象被无序的关联容器放入同一个桶中。因此，两个相等的对象必须具有相同的散列。

23.2.5 第 8 段：

> 无序关联容器的元素被组织成桶。具有相同哈希码的键出现在同一个桶中。

额外问题：为什么要单独遍历存储桶？

奖励答案：因为您想并行处理容器的内容。桶迭代器彼此独立，因此每个线程可以在没有协调的情况下处理桶（假设没有新条目添加到容器中）。并且桶的大小应该大致相同，因此它们提供了方便的并行化量。

# gzip - Windows Azure 移动服务和压缩

> ID：12901348
> 
> 赞同：2
> 
> 时间：2012-10-15T18:00:53.613
> 
> 标签：gzip, azure-mobile-services

Windows Azure 移动服务是否支持 GZIP 压缩？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:54:01.503

不是此刻。请随意在[Azure 移动服务的 MSDN 论坛中](http://social.msdn.microsoft.com/Forums/en-US/azuremobile/threads)发布此功能请求，团队会考虑。

# iphone - Objective.C 中的嵌入式容器

> ID：12901357
> 
> 赞同：-1
> 
> 时间：2012-10-15T18:01:32.877
> 
> 标签：iphone, objective-c, ios, mobile

iOS 是否有适用于本机应用程序的“iFrame”移动版本，允许您在其中嵌入本机移动屏幕？我正在寻找一个容器，它允许我在 iOS 应用程序的移动屏幕中嵌入移动屏幕。是否存在这种类型的功能？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:03:01.533

如果您要嵌入的移动屏幕是基于 Web 的，那么您可以使用 UIWebView。

但是，如果它是一个用本机 Objective-c 编写的 iOS 应用程序，那么你不能。

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0,0,320,480)];
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://mymobileapp.com]]];
[self.view addSubview:webView];
[webView release]; 
```

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:03:10.847

不，您不能将本机应用程序嵌入到另一个应用程序中。如果另一个应用程序具有已知的自定义 URL 方案，您可以做的最好的事情是从另一个应用程序启动 3rd 方应用程序。

# node.js - 永远使用 --nouse-idle-notification 和其他标志启动 Node.js

> ID：12901358
> 
> 赞同：6
> 
> 时间：2012-10-15T18:01:37.013
> 
> 标签：node.js

以前，我通过以下方式启动了我的生产节点应用程序：

```
NODE_ENV=production forever start index.js 
```

但是，根据[这个问题中](https://stackoverflow.com/questions/12887062/node-v8-garbage-collector-how-to-debug-long-mark-sweep-times/12895144#12895144)的建议，我想用--nouse-idle-notification 启动节点。我还发现[了这篇](http://blog.caustik.com/2012/04/11/escape-the-1-4gb-v8-heap-limit-in-node-js/)关于设置 --max-old-space-size 等的文章。不幸的是，我问的任何人似乎都无法弄清楚如何判断该标志是否被节点实际接受，所以我不知道如何判断如果我永远的语法是正确的。

此外，我不能永远接受这两个论点......

例如，如果我使用这个

```
NODE_ENV=production forever start --max-old-space-size=8192 --nouse-idle-notification index.js 
```

我得到了“永远使用信息”，就好像我试图永远启动而不传递 .js 文件来运行（例如，只需输入“永远”）。如果我将标志放在“开始”命令之前，它似乎开始了，但我再次不确定如何判断标志是否被接受......

有人可以帮我正确的语法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-15T17:43:35.933

您需要传递 -c 参数：

```
forever start -c "node --max-old-space-size=8192 --nouse-idle-notification" index.js 
```

如果您列出流程，您将看到这些标志已被尊重。

```
forever list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:48:36.533

除非你真的因为其他原因而永远爱着，否则试试[mon](https://github.com/visionmedia/mon)。

传递标志非常容易，因为您可以指定确切的命令：

```
mon "node --max-old-space-size=8192 --nouse-idle-notification --expose-gc server.js" -d 
```

它只监视一个节点进程。如果您想像永远一样监视一组进程，请安装[mongroup](https://github.com/jgallen23/mongroup)，它是一个管理`mon`.

这将为您节省一些 RAM，特别是如果您正在监视大量节点进程（我认为永远为您要监视的每个进程启动一个额外的节点进程）。

快速提示：上次我检查时，TJ Holowaychuk 的分支`mon`在 linux 下运行不佳（我猜他只在 Mac 上测试过），但是[这个可以](https://github.com/jgallen23/mon)工作，而且我现在正在使用它。**编辑**：实际上 2 天前[问题](https://github.com/visionmedia/mon/pull/3)已关闭，主分支现在应该可以工作了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T18:07:20.507

你可以试试：

```
forever start --max-old-space-size=8192 --nouse-idle-notification -c "NODE_ENV=production node" index.js 
```

# objective-c - Objective C 何时分配和初始化说明

> ID：12901361
> 
> 赞同：0
> 
> 时间：2012-10-15T18:02:05.877
> 
> 标签：objective-c, memory-management

我正在寻找有关在 Objective C 中初始化变量的一些说明。

假设我有一个返回数组的方法。

```
-(NSMutableArray *) getArray
{
    NSMutableArray *arr = [[NSMutableArray alloc]init];  //line A

for(int i = 0; i < 10; i++)
{
    [arr addObject:@"word"];
}

return arr;
} 
```

然后我调用这个方法。

```
NSMutableArray *myArray = [[NSMutableArray alloc]init];  //line B
                myArray = [self getArray]; 
```

那么我应该在 A 行和 B 行中分配内存，既不在，也应该只在 A 或 B 中分配内存？替代方案很简单

```
NSMutableArray *arr;      //replacing line A
NSMutableArray *myArray;  //replacing line B 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:16:33.883

您应该在 A 中分配内存，但在 B 中。A 中的 alloc/init*创建*变量 arr 所引用的*对象*。您将该对象作为方法 getArray 的返回值传递。

在 B 中，您只希望 myArray 引用返回的对象，您不希望有一个新对象。如果你这样做：

```
NSMutableArray *myArray = [[NSMutableArray alloc]init];  //line B
                myArray = [self getArray]; 
```

第一行创建一个新对象并将其分配给 myArray。第二行立即将 myArray 的值替换为从该方法返回的另一个对象。如果没有 ARC（自动引用计数），这将导致在第一行创建的对象的内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:14:41.810

对于任何一个数组，您都应该分配其内存并对其进行一次初始化。

首先，这意味着您最后的替代方案行不通。它声明这两个变量存在并且将指向数组，但没有创建和分配它们。

B 行很好地创建和初始化了一个数组，但随后通过将结果分配给`getArray`同一个变量，立即失去了对它的唯一引用。如果使用ARC内存管理，那就有点浪费了；没有 ARC，就是内存泄漏。

A 行还正确地创建和初始化了一个数组，并且就您发布的代码而言，它会受到您在`myArray`.

（请记住，您声明为变量的东西——比如`NSMutableArray *arr`——可以被认为是实际对象的**名称**，而不是对象本身。）

# c# - 找不到入口点

> ID：12901364
> 
> 赞同：0
> 
> 时间：2012-10-15T18:02:20.463
> 
> 标签：c#, dllimport

我收到一个无法找到 Dll 入口点异常，因为我知道那里有一个函数。而且我只得到它几次（我不知道它是否取决于上下文（线程等）或参数）。

该方法定义如下：

```
 [DllImport("libspotify")]
    internal static extern bool sp_track_is_available(IntPtr sessionPtr, IntPtr trackPtr); 
```

对可能出什么问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:13:35.060

`sp_track_is_available`似乎 API 已更改，我在[Spotify 的在线文档](https://developer.spotify.com/technologies/libspotify/docs/12.1.45/group__track.html)中找不到。

目前可从 API 中获得的最接近的方法是`sp_track_get_availability`，可以像这样 P/Invoked ：

```
internal enum TrackAvailability
{
    Unavailable,
    Available,
    NotStreamable,
    BannedByArtist
}

[DllImport("libspotify")]
internal static extern TrackAvailability sp_track_get_availability(IntPtr session, IntPtr track); 
```

正如@JustinEthier 在问题评论中指出的那样，看起来 API 更改是[在这个 commit 中进行的](https://github.com/akezeke/spotyxbmc2/commit/df266f14#L3R1330)。

# java - 从java中的句号拆分

> ID：12901365
> 
> 赞同：7
> 
> 时间：2012-10-15T18:02:32.553
> 
> 标签：java

> **可能重复：**
> [Java 中的 split() 方法不适用于点 (.)](https://stackoverflow.com/questions/7935858/the-split-method-in-java-does-not-work-on-a-dot)

我是java新手。我想从“。”中拆分一个字符串。（点）并一一获取这些名称。但是这个程序给出了错误： `"Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0"` 请帮助我

```
 String input1 = "van.bus.car";

 System.out.println(input.split(".")[0]+"");

 System.out.println(input.split(".")[1]+"");

 System.out.println(input.split(".")[2]+""); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-15T18:04:13.847

在正则表达式中，`Dot(.)`是一个匹配的特殊元字符`everything`。

由于[`String.split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)适用于正则表达式，因此如果要匹配`dot`.

```
System.out.println(input.split("\\.")[0]+""); 
```

要了解有关 Regex 的更多信息，请参阅以下站点：-

*   [http://docs.oracle.com/javase/tutorial/essential/regex/](http://docs.oracle.com/javase/tutorial/essential/regex/)
*   [http://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)
*   [http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T18:04:42.517

to 的参数[`split`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)是一个正则表达式，因此句号/点/`.`具有特殊含义：*匹配任何字符*。要在拆分中逐字使用它，您需要对其进行转义：

```
String[] splits = input1.split("\\."); 
```

这应该为您的输入字符串提供一个长度为 3 的数组。

有关正则表达式和特殊字符的更多信息，请参阅[Pattern 的文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)。

# jquery - 在滚动上加载下一篇文章 - 就像无限滚动

> ID：12901370
> 
> 赞同：0
> 
> 时间：2012-10-15T18:02:48.157
> 
> 标签：jquery

我正在使用以下脚本通过单击按钮加载下一篇文章：

```
 jQuery('#showMore').click(function(event) {
       if (jQuery('#loader1').length) {
        jQuery('#loader1').hide();
       }
      jQuery('#showMore').text('Loading..');
      jQuery('#showMore').after('<img src="/wp-content/plugins/store/images/co/ajax-loader.gif" id="loader1">');
      if (jQuery('#no-more').length) {
       jQuery('#no-more').remove();
       }
         event.preventDefault();
         $number = jQuery('#product_grid li').length;

        jQuery.ajax({
           type: "POST",
           url: "/wp-content/plugins/store/ajax_more.php",
           data: "count=" + jQuery('#product_grid li').size(),
           success: function(results){
             jQuery('#product_grid').append(results);
             jQuery('#showMore').text('View More Products');
             jQuery('#loader1').hide();
           }
         });

  }); 
```

现在，我希望脚本在滚动时加载下一篇文章，而不是单击按钮。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:12:02.693

```
$(window).unbind(‘scroll’);  
if($(window).scrollTop() == $(document).height() - $(window).height()) {  
  //send request based on your cursor if more data available.  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:07:01.867

使用 jQuery(window).scroll 事件。

**例子 ：**

```
jQuery(window).scroll(function(){
   // existing stuff
}); 
```

您可以根据 scrollTop 属性控制加载数据回调。表示根据滚动量调用当前 $.ajax 请求的时间。

# php - 添加到二维数组时，所有值都被覆盖

> ID：12901371
> 
> 赞同：0
> 
> 时间：2012-10-15T18:02:49.200
> 
> 标签：php, arrays, multidimensional-array

> **可能重复：**
> [如何深度复制 DateTime 对象？](https://stackoverflow.com/questions/2579458/how-do-i-deep-copy-a-datetime-object)
> [添加到二维数组或循环二维数组时出错](https://stackoverflow.com/questions/12900097/error-in-adding-to-2d-array-or-looping-through-2d-array)

所以我的代码是：

```
 while ($end <= $to){
        $currentDates = array("from" => $start, "to"=>$end);
        $allDates[] = $currentDates;
        echo '<br>', var_dump($allDates);
        unset($currentDates);
        $start->add($intervalObj);
        $end->add($intervalObj);
    } 
```

但是每次将 $currentDates 添加到 $allDates 时，它都会像我预期的那样向 $allDates 添加一个位置，但它也会用 $currentDates 的当前值覆盖所有先前的数组位置。

这是循环中 var_dump 的结果

```
array(1) { [0]=> array(2) { ["from"]=> object(DateTime)#6 (3) { ["date"]=> string(19) "2012-10-10 00:00:00" ["timezone_type"]=> int(3) ["timezone"]=> string(16) "America/New_York" } ["to"]=> object(DateTime)#7 (3) { ["date"]=> string(19) "2012-10-11 00:00:00" ["timezone_type"]=> int(3) ["timezone"]=> string(16) "America/New_York" } } } 

array(2) { [0]=> array(2) { ["from"]=> object(DateTime)#6 (3) { ["date"]=> string(19) "2012-10-11 00:00:00" ["timezone_type"]=> int(3) ["timezone"]=> string(16) "America/New_York" } ["to"]=> object(DateTime)#7 (3) { ["date"]=> string(19) "2012-10-12 00:00:00" ["timezone_type"]=> int(3) ["timezone"]=> string(16) "America/New_York" } } [1]=> array(2) { ["from"]=> object(DateTime)#6 (3) { ["date"]=> string(19) "2012-10-11 00:00:00" ["timezone_type"]=> int(3) ["timezone"]=> string(16) "America/New_York" } ["to"]=> object(DateTime)#7 (3) { ["date"]=> string(19) "2012-10-12 00:00:00" ["timezone_type"]=> int(3) ["timezone"]=> string(16) "America/New_York" } } } 

array(3) { [0]=> array(2) { ["from"]=> object(DateTime)#6 (3) { ["date"]=> string(19) "2012-10-12 00:00:00" ["timezone_type"]=> int(3) ["timezone"]=> string(16) "America/New_York" } ["to"]=> object(DateTime)#7 (3) { ["date"]=> string(19) "2012-10-13 00:00:00" ["timezone_type"]=> int(3) ["timezone"]=> string(16) "America/New_York" } } [1]=> array(2) { ["from"]=> object(DateTime)#6 (3) { ["date"]=> string(19) "2012-10-12 00:00:00" ["timezone_type"]=> int(3) ["timezone"]=> string(16) "America/New_York" } ["to"]=> object(DateTime)#7 (3) { ["date"]=> string(19) "2012-10-13 00:00:00" ["timezone_type"]=> int(3) ["timezone"]=> string(16) "America/New_York" } } [2]=> array(2) { ["from"]=> object(DateTime)#6 (3) { ["date"]=> string(19) "2012-10-12 00:00:00" ["timezone_type"]=> int(3) ["timezone"]=> string(16) "America/New_York" } ["to"]=> object(DateTime)#7 (3) { ["date"]=> string(19) "2012-10-13 00:00:00" ["timezone_type"]=> int(3) ["timezone"]=> string(16) "America/New_York" } } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:13:47.967

`$start`并且`$end`是对象，它们总是通过引用分配。您需要创建新的、不同的对象。请参阅[如何深度复制 DateTime 对象？](https://stackoverflow.com/questions/2579458/how-do-i-deep-copy-a-datetime-object)关于如何做到这一点。

# javascript - 未捕获的类型错误：无法读取未定义的属性“EventAggregator”（Backbone、Marionette、RequireJS）

> ID：12901376
> 
> 赞同：0
> 
> 时间：2012-10-15T18:03:04.783
> 
> 标签：javascript, backbone.js, requirejs, underscore.js, marionette

使用 Backbone.Marionette 创建一个新应用程序，当我运行 Express 应用程序并加载页面时，我在控制台中收到错误消息：

```
Uncaught TypeError: Cannot read property 'EventAggregator' of undefined 
backbone.marionette.js:1504 
```

表明它在实际的`marionette`库中。我看过那条线：

```
Marionette.EventAggregator = Backbone.Wreqr.EventAggregator; 
```

并且我认为这`wreqr`可能是我必须添加的一个额外的库？

这是创建应用程序的代码：

```
require([
    'jquery', 
    'underscore', 
    'backbone', 
    'marionette'
], function( $, _, Backbone, Marionette ){
    MyApp = new Backbone.Marionette.Application();

    MyApp.addRegions({
        main_region: '#main_region'
    });

    MyApp.addInitializer( function(options) {
        var login_form_view = new LoginFormView();
    });
}); 
```

以及设置库位置的要求配置：

```
// using RequireJS 1.0.7
    require.config({
        paths: {
            '$': 'libs/jquery-1.8.2-min',
            'underscore': 'libs/underscore-min', // AMD support
            'backbone': 'libs/backbone.min', // AMD support
            'bootstrap' : 'libs/bootstrap.min',
            'marionette' : 'libs/backbone.marionette', 
            'wreqr' : 'libs/backbone.wreqr',
            'templates': '../templates',
            'text': 'libs/require/text', 
            'login': 'views/user/login'
        }
    }); 
```

任何人都知道可能导致错误的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:44:01.600

是的，wreqr 是 Marionette 的依赖项。

您已经指定了 Wreqr 的路径，但您也需要加载它。在加载 Marionette 之前。

```
require([
     'jquery', 
     'underscore', 
     'backbone', 
     'wreqr',
     'marionette'
], function( $, _, Backbone, Marionette ){
MyApp = new Backbone.Marionette.Application();

MyApp.addRegions({
    main_region: '#main_region'
});

MyApp.addInitializer( function(options) {
    var login_form_view = new LoginFormView();
}); 
```

});

# asp.net - EntityFunction.TruncateTime 在我的查询中不起作用

> ID：12901377
> 
> 赞同：2
> 
> 时间：2012-10-15T18:03:06.467
> 
> 标签：asp.net, linq, entity-framework, entity

我正在使用 Linq to entityframework 来查询一些信息。我正在尝试使用 entityfunction.truncatetime，但它似乎没有按预期工作。这是我的示例查询

```
From d In Request
Where d.Requestor= "XXXX" And d.ProcessedFlag = "N"
Select d.RequestID, RequestReason = d.RequestReason.ItemValue, RequestType =  d.RequestType.ItemValue, RequestedDate = EntityFunctions.TruncateTime(d.RequestedMoveDate) 
```

请求日期似乎没有截断时间部分，我仍然得到日期和时间。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T21:43:26.933

在 .NET 中，DateTime 类实际上表示日期和时间。在内部，它存储为一个数值，由自公元 1001 年 1 月 1 日午夜以来的 100 纳秒“滴答”数表示。此数字在显示时（在输出中或在调试器中）得到“转换”。此转换是通过格式字符串完成的。

即使您截断了 DateTime 的时间部分，它仍然有时间......它只是 00:00:00，如果您不想看到那个时间，则需要调整格式字符串以不转换它。

因此，如果您执行以下操作： `DateTime.Now.Date`如果您使用默认日期转换字符串（或您的文化的默认格式），它将显示“10/15/2012 00:00:00”。

如果您只想显示 Date 部分，那么您必须执行类似`myDate.ToShortDateString()`or的操作`myDate.ToString("d")`。

EntityFunctions 是一组设计用于 Linq to Entities 查询的工具，因为通常不允许在查询中进行 DateTime 格式化。

例如，此代码不起作用：

```
var q = from x in dc where x.BirthDate == DateTime.Now.AddYears(-15).Date select x; 
```

你必须这样做：

```
var q = from x in dc 
    where x.Birthdate == EntityFunctions.TruncateTime(DateTime.Now.AddYears(-15)) 
    select x; 
```

然后，这将生成正确的 SQL 以在 SQL 代码中进行日期比较。这就是 EntityFunctions 的设计目的，而不是在选择部分截断日期（尽管它确实有效）。但是，即使日期被截断，它仍然会有一个时间组件，它只是 00:00:00，并且您必须使用日期格式字符串以您想要的方式将其呈现给您的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:25:06.067

你不能像下面那样使用 ToShortDateString() 吗？

```
 List<DateTime> time = new List<DateTime>();

        time.Add(DateTime.Now);

       var WhatDate = from date in time
       select new { Date = date.ToShortDateString() }; 
```

在你的情况下试试这个

```
 From d In Request
           Where d.Requestor= "XXXX" And d.ProcessedFlag = "N"
          Select new{ RequestID =  d.RequestID, RequestReason =   d.RequestReason.ItemValue,    RequestType =  d.RequestType.ItemValue, RequestedDate =  d.RequestedMoveDate.ToShortDateString()}; 
```

# windows-services - VS 2012：Windows 服务中的“添加安装程序”不起作用

> ID：12901381
> 
> 赞同：3
> 
> 时间：2012-10-15T18:03:19.027
> 
> 标签：windows-services

在VS2012中创建了一个windows服务。右键单击该服务并选择“添加安装程序”，就像在 VS2010 中所做的那样

得到消息：

> 无法添加安装程序。设计器无法添加项目安装程序。

有人遇到这个吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-03-11T22:23:20.480

检查文件是否已经存在。就我而言，以前的开发人员从项目中排除了安装程序文件，所以直到我在源文件夹上打开 Windows 资源管理器后我才看到它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T19:53:04.370

有快递版吗？我在 Windows 8 N Pro 上使用 Visual Studio Professional 2012 时没有遇到这个问题。我可以右键单击设计器表面并单击“添加安装程序”项，然后创建一个名为“ProjectInstaller”的类。

您可以手动创建项目安装程序类。无论如何，设计师被高估了。我写了一篇关于如何做到这一点的博客文章。 [使用 Visual Studio 2012 的 Windows 服务的简单安装程序](http://candordeveloper.com/2012/12/28/simple-installer-for-windows-service-using-visual-studio-2012/)

您是否有需要部署向导的理由？您需要提示安装用户的配置参数吗？我通常只使用一个配置文件，并将每个环境的配置与可部署的打包在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:36:01.913

项目安装程序不包含在 VS 2012 中。如果您右键单击您的解决方案并选择添加、新建项目，然后转到其他项目类型并选择设置和部署，它将带您到 InstallShield 页面，您可以在其中下载并安装免费的限量版 InstallShield（您必须通过电子邮件注册并获取激活码）。安装后，重复上述步骤，它会提示您注册软件或继续试用版。

# c - 函数返回后局部变量仍然存在

> ID：12901383
> 
> 赞同：4
> 
> 时间：2012-10-15T18:03:21.133
> 
> 标签：c, local-variables

我认为一旦函数返回，其中声明的所有局部变量（除了带有`static`关键字的变量）都会被垃圾收集。但是当我尝试下面的代码时，它仍然会在函数返回后打印值。谁能解释为什么？

```
int *fun();
main() {
  int *p;
  p = fun();
  printf("%d",*p); //shouldn't print 5, for the variable no longer exists at this address
}
int *fun() {
  int q;
  q = 5;
  return(&q);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T18:05:06.433

C 中没有垃圾收集。一旦变量的范围不再存在，以任何方式访问它都是非法的。你看到的是UB（未定义的行为）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T18:04:51.240

这是未定义的行为，任何事情都可能发生，包括看起来有效。内存可能还没有被覆盖，但这并不意味着您有权访问它。然而你做到了！我希望你快乐！:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-15T18:08:03.340

如果您真的希望它**释放**该值，则可以在通过访问该位置*执行 printf 之前调用另一个包含至少几行代码的函数。**到那时，您的价值很可能*会被覆盖。

但再次如前所述，这是*未定义的行为*。您永远无法预测它何时（或是否有）崩溃或变化。但是您不能依赖它“更改或保持不变”并使用任何这些假设编写应用程序。

我要说明的是，当您从前一个函数返回后进行另一个函数调用时，另一个激活记录被推送到堆栈中，很可能会覆盖前一个记录，包括您通过指针访问其值的变量。

一旦一个函数和它的数据超出范围，实际上没有身体是垃圾收集或做一个说 memset 0 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T18:10:03.513

C 不支持 Java 所支持的垃圾回收。[在此处](http://javarevisited.blogspot.in/2011/04/garbage-collection-in-java.html)阅读有关垃圾收集的更多信息

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T18:50:19.313

*逻辑上*，退出 `q`时不复存在。`fun`

*物理*上（对于“物理”的适当松散定义），故事有点复杂，并且取决于底层平台。C 不进行垃圾收集（在这种情况下不适用垃圾收集）。占用的内存单元（虚拟或物理）`q`仍然存在，并且包含最后写入的任何值。根据架构/操作系统/其他情况，您的程序*可能*仍然可以访问该单元格，但这不能保证：

> ### 6.2.4 对象的存储期限
> 
> 2 对象的*生命周期*是程序执行期间保证为其保留存储的部分。一个对象存在，具有一个常量地址，^(33)) 并在其整个生命周期中保留其最后存储的值。^(34)) **如果一个对象在其生命周期之外被引用，则该行为是未定义的。当指针指向（或刚刚过去）的对象到达其生命周期的末尾时，指针的值变得不确定。**
> 
> * * *
> 
> ^(33) 术语“恒定地址”意味着在可能不同时间构造的两个指向对象的指针将比较相等。在同一程序的两次不同执行期间，地址可能不同。
> 
> 34) 在 volatile 对象的情况下，最后的存储不需要在程序中明确显示。)

“未定义的行为”是 C 语言通过不处理问题来处理问题的方式。基本上，实现可以自由地以它选择的任何方式处理这种情况，直到完全忽略问题并让底层操作系统杀死程序做一些顽皮的事情。

在您的特定情况下，退出后访问该存储单元`fun`不会破坏任何内容，并且尚未被覆盖。不能保证该行为是可重复的。

# playframework-2.0 - 如何使用 play framework 2 集群 EHCache

> ID：12901385
> 
> 赞同：3
> 
> 时间：2012-10-15T18:03:23.737
> 
> 标签：playframework-2.0, ehcache

我以前从未使用过 EHCache，但我意识到它是 playframework 版本 2.x 的默认缓存。是否可以在另一台服务器上单独运行一个 EHCache 实例并将多个应用程序服务器指向它（您将如何配置它）？还是必须作为运行应用服务器的 JVM 的一部分运行？在那种情况下，您将如何让多个应用服务器的 EHCache 相互了解？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:07:56.713

使用 EHCache 和 Play Framework 2.x 无法做到这一点，解决方案是在 play 提供的之外处理缓存。使用 memcached 是一种选择，并且有播放插件。

# c# - 在单个窗口中切换到表单

> ID：12901386
> 
> 赞同：1
> 
> 时间：2012-10-15T18:03:28.347
> 
> 标签：c#, winforms

我想将表格 1 更改为表格 2。我不希望它打开一个新窗口，而是将其保留在同一个窗口中，然后当我按下 Next 键或返回键时能够来回切换。是通过单独隐藏每个按钮和图片来做到这一点的唯一方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:05:37.423

您可能需要考虑一种不同的方法。

您不能将一种类型的表单更改为另一种类型的表单。最接近的选项是关闭或隐藏第一个并在屏幕上的相同位置显示第二个。

但是，您可以以不同的方式处理此问题。无需将按钮和逻辑放入表单，您可以将所有内容放入两个`UserControl`实例中，只需更改在单个表单中可见的用户控件即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:08:32.780

您可以使用面板、组合框、TabControls 等将常用控件组合在一起。当您想在不同的“屏幕”之间切换时，您可以通过设置`visible`属性和调用来隐藏或显示组控件`BringToFront()`，它将隐藏/显示该组控件上的所有控件。

# exception-handling - 如何在 Netty 服务器的 exceptionCaught 中检查客户端是否仍然连接？

> ID：12901391
> 
> 赞同：0
> 
> 时间：2012-10-15T18:03:40.537
> 
> 标签：exception-handling, netty

我的 Netty 服务器从 ChannelHandler 上的 exceptionCaught 方法向客户端发回错误响应。如果客户端消失了，这将导致无限递归。这是堆栈跟踪片段：

```
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.cleanUpWriteBuffer(AbstractNioWorker.java:778) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.writeFromUserCode(AbstractNioWorker.java:501) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:129) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.Channels.write(Channels.java:733) [netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.Channels.write(Channels.java:694) [netty-3.5.7.Final.jar:na]
at com.inversoft.cleanspeak.store.content.server.netty.ContentStoreChannelHandler.exceptionCaught(ContentStoreChannelHandler.java:68) ~[cleanspeak-content-store-2.3.jar:2.3]
at org.jboss.netty.handler.codec.frame.FrameDecoder.exceptionCaught(FrameDecoder.java:378) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.Channels.fireExceptionCaught(Channels.java:533) [netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.cleanUpWriteBuffer(AbstractNioWorker.java:790) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.writeFromUserCode(AbstractNioWorker.java:501) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:129) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.Channels.write(Channels.java:733) [netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.Channels.write(Channels.java:694) [netty-3.5.7.Final.jar:na]
at com.inversoft.cleanspeak.store.content.server.netty.ContentStoreChannelHandler.exceptionCaught(ContentStoreChannelHandler.java:68) ~[cleanspeak-content-store-2.3.jar:2.3]
at org.jboss.netty.handler.codec.frame.FrameDecoder.exceptionCaught(FrameDecoder.java:378) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.Channels.fireExceptionCaught(Channels.java:533) [netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.cleanUpWriteBuffer(AbstractNioWorker.java:790) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.writeFromUserCode(AbstractNioWorker.java:501) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:129) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66) ~[netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.Channels.write(Channels.java:733) [netty-3.5.7.Final.jar:na]
at org.jboss.netty.channel.Channels.write(Channels.java:694) [netty-3.5.7.Final.jar:na] 
```

我的问题是，对我来说测试客户端是否仍然存在于我的 exceptionCaught 方法中的最佳方法是什么？e.getChannel().isOpen() 有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:46:44.587

您可以使用 channel.isConnected() 进行检查，但这可能无法解决，因为写入是异步的，因此当实际写入发生时它可能不再正确。我大部分时间都是这样的：

```
Channel channel = ...
channel.write(data).addListener(ChannelFutureListener.CLOSE); 
```

这将确保在写入尝试后关闭通道。

# r - 在 R lattice xyplot 上分别控制轴刻度和轴线

> ID：12901396
> 
> 赞同：9
> 
> 时间：2012-10-15T18:03:53.537
> 
> 标签：r, axis, lattice

如何`xyplot`在保留轴刻度刻度线的同时删除 周围的框？本着 Edward Tufte 极简主义数据图形美学的精神，这些轴线是“非数据墨水”，可以（应该？）被“擦除”。

```
library(lattice)
my.df <- data.frame(x=-10:10)
my.df$y <- my.df$x^2
xyplot(y~x,data=my.df) 
```

![标准 xyplot 输出](../Images/51c7c1d2fdbc6d8d6f2f8ae55c46b040.png)

似乎格子显示参数（例如`axis.line$col`）同时控制轴线和轴刻度：

```
xyplot(y~x,data=my.df,
       par.settings=list(axis.line=list(col="transparent"))) 
```

![与axis.line$col=](../Images/17140cdf14aa5afc880c3bcb64d41b44.png)

...这不是想要的结果，所以看起来没有一种简单的方法可以在离开盒子时关闭线路。

我能想到的最好的方法是蛮力破解，我使用以下方法手动构建刻度线`panel.segments`：

```
at.x=pretty(c(-10,10))
at.y=pretty(c(0,100))
xyplot(y~x,data=my.df,
       par.settings=list(axis.line=list(col="transparent")),
       scales=list(x=list(at=at.x,labels=at.x),
       y=list(at=at.y,labels=at.y)),
       panel=function(...){
           panel.xyplot(...)
           panel.segments(x0=at.x,x1=at.x,y0=-4,y1=-2)
           panel.segments(x0=-11.5,x1=-11,y0=at.y,y1=at.y)
       }
       ) 
```

![带有 panel.segments 的手工刻度线](../Images/a9f706ad475cef6045ae5550c22d8c24.png)

这接近于预期的结果，但是要使刻度线的长度合理并从数据点偏移一个“不错的”距离，需要进行相当多的操作。这些值不会从一个图形转换为下一个图形。另外，请注意轴标签现在距离刻度线太远了。我确信有一种方法可以减少填充，但这只会使代码更丑陋且更不便携。

那么，如何才能只抑制构成绘图区域周围“框”的线条，同时保持刻度线和轴标签完好无损呢？如果这种方法也可以用来抑制一些但不是所有的线（例如，保留左边和下面的线，但抑制上面和右边的线），则可以加分。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T19:43:34.637

这仍然有点hacky，但至少您不必手动进行任何计算。它使用一个`par.settings`自定义`axis`函数的组合，该函数接受一个参数`line.col`并通过调用临时更改轴线颜色`trellis.par.set`：

**编辑**（删除不必要的格子设置更改）

```
xyplot(y~x,data=my.df, par.settings = list(axis.line = list(col = "transparent")),
  # Pass custom axis function to argument 'axis'
  axis = function(side, line.col = "black", ...) {
    # Only draw axes on the left and bottom
    if(side %in% c("left","bottom")) {
      # Call default axis drawing function
      axis.default(side = side, line.col = "black", ...)
    }
  }
) 
```

目前，我总结了为什么`line.col = "black"`在自定义轴函数的参数中需要魔法。我的猜测是它与与省略号 ( `...`) 匹配的参数有关。也许明天我会更聪明，找到真正的原因。

这导致：

![在此处输入图像描述](../Images/65584d8e2154bd53b4fda7e709875031.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-09-03T05:22:42.370

最简单的做法是使用自定义轴功能（axis）。只需将 lwd（线宽）设置为零并将刻度线（lwd.ticks）设置为其他值。它就像一个魅力！

```
plot(NA,NA,type="n",xaxt="n", lwd=linewidth, xlim=c(1,24), xlab="", ylab="",ylim=c(-300,500))
axis(side = 4, tck = .05, **lwd=0, lwd.ticks=1**, line = 0, labels = NA, col= cols_border[1], col.axis = cols_black)
axis(side = 4, lwd = 0, line = -4.5, las = 1, cex.axis=axis_fontsize, col= cols_border[1], col.axis = cols_black)
mtext("Light deviations (lum/sec)",side=4, padj=-2.5, cex=title_fontsize, col="black") 
```

# java - 如何在 CalendarView 中设置自定义视图？

> ID：12901397
> 
> 赞同：1
> 
> 时间：2012-10-15T18:03:57.560
> 
> 标签：java, android

我正在开发一些Android应用程序，现在我遇到了以下问题：有些日子我需要设置自定义视图，但我还没有找到这个功能的任何例子。我希望 CalendarView 有一些适配器，但这是错误的。请告诉我，我该怎么做？先感谢您。

更新：我在 Android 4.0 中使用 CalendarView（默认组件）

# xml-parsing - 在 dom4j 中使用 DocumentHelper.parseText() 将 response.getEntity(String.class) 字符串解析为 xml

> ID：12901417
> 
> 赞同：0
> 
> 时间：2012-10-15T18:05:02.120
> 
> 标签：xml-parsing, dom4j

dom4j 没有问题

```
String text = "<person> <name>James</name> </person>";
Document document = DocumentHelper.parseText(text); 
```

我需要的是这个

```
String text = "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>"+
"<person> <name>James</name> </person>";
Document document = DocumentHelper.parseText(text); 
```

但它会引发异常。

```
org.dom4j.DocumentException: Error on line 1 of document  : parsing initialization error: org.gjt.xpp.XmlPullParserException: only whitespace content allowed outside root element at line 1 and column 1 seen 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:21:07.970

我发现了问题。下面的前一行是失败的。后线工作。

前

```
Document output = DocumentHelper.parseText(response.getEntity(String.class)); 
```

后

```
Document output = DocumentHelper.parseText(response.getEntity(String.class).trim()); 
```

# sql-server - 将 SQL 查询转换为 Access 时遇到问题

> ID：12901419
> 
> 赞同：0
> 
> 时间：2012-10-15T18:05:07.103
> 
> 标签：sql-server, vba, ms-access

我有这个查询，它在`SQL`服务器中运行良好，但在 Access 中运行良好，我在转换它时遇到了麻烦。我一直听说`JET`缺少一些`TSQL`功能，我想复杂的连接就是其中之一。

```
SELECT C.[Position], TT.[Description] as TrainingType, T.ProgramTitle, T.ProgramSubTitle, T.ProgramCode, ET.CompletedDate
from HR_Curriculum C
LEFT JOIN HR_Trainings T ON C.TrainingID = T.TrainingID
LEFT JOIN HR_TrainingTypes TT ON T.TrainingTypeID = TT.TrainingTypeID

LEFT JOIN HR_EmployeeTrainings ET ON C.TrainingID = ET.TrainingID
                                 AND (ET.AvantiRecID IS NULL OR ET.AvantiRecID = '637')
where ( c.[Position] = 'Customer Service Representative'
      OR C.[Position] = 'All Employees')
order by [Position], Description, ProgramTitle 
```

我尝试将额外的连接子句放在 WHERE 子句中，但由于某种原因，这不会产生正确的记录计数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:12:08.157

当您有多个时`JOIN`，`ms-access`您需要用括号将它们包装起来，如下所示：

```
SELECT C.[Position], TT.[Description] as TrainingType, T.ProgramTitle, T.ProgramSubTitle, T.ProgramCode, ET.CompletedDate
from (((HR_Curriculum C
LEFT JOIN HR_Trainings T ON C.TrainingID = T.TrainingID)
LEFT JOIN HR_TrainingTypes TT ON T.TrainingTypeID = TT.TrainingTypeID)

LEFT JOIN HR_EmployeeTrainings ET ON C.TrainingID = ET.TrainingID
                                 AND (ET.AvantiRecID IS NULL OR ET.AvantiRecID = '637'))
where ( c.[Position] = 'Customer Service Representative'
      OR C.[Position] = 'All Employees')
order by [Position], Description, ProgramTitle 
```

否则您将遇到`Missing Operator`错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:09:14.440

检查您的表别名是否用“as”声明。Access 不喜欢 [tablename] [alias]，而是尝试将 [tablename] 作为 [alias]。我知道复杂的左连接应该不是问题，但是如果 Access 返回一些连接错误，它可能会阻塞别名声明。我还会尝试查询对 ET 表的限制，然后将其加入更大的查询。我注意到尝试对左连接或右连接所涉及的记录施加限制通常不会产生正确的记录，因为 Access 会在连接后限制集合。

# python - Python - 上传完成的文件，忽略正在使用的文件

> ID：12901425
> 
> 赞同：0
> 
> 时间：2012-10-15T18:05:31.207
> 
> 标签：python

```
p1 = subprocess.Popen(["arecord", "-Dhw:1,0", "-fS16_LE", "-d120", "-r44100"],stdout=subprocess.PIPE)
p2 = subprocess.Popen(["lame", "-", "test/%s/%s" %(dirname, filename)], stdin=p1.stdout)

output = p2.communicate()[0] 
```

正如您在此处看到的，我正在使用 arecord 直接录制到 mp3。

我面临的问题是我需要上传我正在录制的文件，但是一旦开始录制，它就会生成一个文件并将音频附加到它，而不是在录制的持续时间完成时生成 mp3 文件。结果是每次检查文件时，它都会上传准备好的文件块。

我只希望脚本在文件完成时上传文件，或者我希望 lame 在持续时间结束时为我生成文件。

我如何检查该文件是否不再使用，或者可能使 lame 使用临时文件，然后将完成的文件保存到主目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:21:31.733

为什么不等待该过程完成？`communicate`退货后上传即可。

# javascript - 使工具提示出现在鼠标所在的位置，随机行为？

> ID：12901432
> 
> 赞同：2
> 
> 时间：2012-10-15T18:05:51.863
> 
> 标签：javascript, jquery, tooltip

我希望在选择某些文本后出现一个类似气泡的工具提示。它确实有效，但是当您向下滚动并在文档末尾附近尝试它时（如果它很长），它就不起作用了。这是相当随机的。有时，工具提示出现在文档开头附近，或者它可能出现在太左或太右的位置，或者可能只出现一部分，或者根本不出现。

这是小提琴：http: [//jsfiddle.net/bdAbZ/](http://jsfiddle.net/bdAbZ/)

这是代码：

```
// Generate the speech bubble
// Temporary placeholder
var $speechBubble = $('<p class="speech-bubble"></p>');
$speechBubble.appendTo('body');

var mousePosition;
function updateMousePosition(event) {
    /* Update the global variable mousePosition with the current location of the mouse.
    */
    mousePosition = {left: event.pageX, top: event.pageY};
}
$(document).mousemove(updateMousePosition); // mousePosition will always be up-to-date.

function getSelectedText() {
    /* Return the text that the user has selected.
    **
    ** If he hasn't selected anything, return an empty string.
    */

    // Different browsers, different ways of getting the selected text.
    if (window.getSelection) {
        return window.getSelection();
    }
    else if (document.getSelection) {
        return document.getSelection();
    }
    else if (document.selection) {
        return document.selection.createRange().text;
    }
    else {
        // This should normally never happen.
        alert('Could not get the selected text.')
        return false;
    }
}

$('p').mouseup(function() {
    /* Check if the user has selected any text within the p area.
    **
    ** If he has, show the speech bubble menu.
    */
    var selectedText = getSelectedText();
    if (selectedText != '') {
        $speechBubble.text(selectedText);
        $speechBubble.offset(mousePosition);
        $speechBubble.show();
    }
});

$(document).mouseup(function() {
    /* Check if no text has been selected.
    **
    ** If no text has been selected, hide the speech bubble menu.
    **
    ** Why? The user would probably try to get rid of the speech bubble by clicking somewhere else.
*/
    if (getSelectedText() == '') {
        $speechBubble.hide();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:07:03.297

我在这里做了一个小提琴：http: [//jsfiddle.net/bdAbZ/8/](http://jsfiddle.net/bdAbZ/8/)

气泡现在绝对定位。我还根据 mouseup 上的光标将对话气泡居中。

让我知道这是否适合您...

更新：我更新了一些东西，比如我删除了你的 mousemove 监听器，因为这会占用大量内存。在 mouseup 事件之前，您不需要更新光标位置。我还正确地将您的 mouseup 侦听器委托给了这些段落。这一切都假设它不会破坏您没有向我们展示的任何代码：http: [//jsfiddle.net/bdAbZ/9/](http://jsfiddle.net/bdAbZ/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:27:50.417

这个怎么样？

[http://jsfiddle.net/bdAbZ/5/](http://jsfiddle.net/bdAbZ/5/)

当您可以在鼠标向上事件中获取鼠标位置时，我不确定您为什么要在鼠标移动中跟踪鼠标位置。另外，我绝对定位了演讲泡泡班。

编辑：仍然搞砸的一件事是，如果您双击选择一个单词。

# c# - 正则表达式 - 删除表达式中的零

> ID：12901435
> 
> 赞同：2
> 
> 时间：2012-10-15T18:06:05.797
> 
> 标签：c#, .net, regex

我需要从表达式的数字部分删除前导零（使用 .net 2.0 C# Regex 类）。

前任：

> PAR0000034 -> PAR34
> 
> WP0003204 -> WP3204

我尝试了以下方法：

```
//keep starting characters, get rid of leading zeroes, keep remaining digits
string result = Regex.Replace(inputStr, "^(.+)(0+)(/d*)", "$1$3", RegexOptions.IgnoreCase) 
```

显然，它没有用。我需要一些帮助才能找到错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:07:36.260

在您的表达式中，该`.*`部分是贪婪的，因此它会捕获完整的字符串。进一步使用反斜杠而不是斜杠作为数字`\d`

```
string result = Regex.Replace(inputStr, @"^([^0]+)(0+)(\d*)", "$1$3"); 
```

或者改用look behind：

```
string result = Regex.Replace(inputStr, "(?<=[a-zA-Z])0+", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T18:12:46.297

您不需要正则表达式，该`Split`方法可以为您做到这一点。

拆分`'0'`，删除空条目（即在多个零之间），并将结果限制为两个字符串将为您提供前导零之前和之后的两个字符串。然后你只需将这两个字符串再次放在一起：

```
string result = String.Concat(
  input.Split(new char[] { '0' }, 2, StringSplitOptions.RemoveEmptyEntries)
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:11:50.760

这对我有用：

```
Regex.Replace("PPP00001001", "([^0]*)0+(.*)", "$1$2"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T18:21:49.730

短语“前导零”令人困惑，因为您所说的零实际上并不是字符串的开头。但如果我理解正确，你想要这个：

```
string result = Regex.Replace(inputStr, "^(.*?)0+", "$1"); 
```

实际上有几种方法可以做到这一点，有和没有正则表达式，但上面可能是最短和最容易理解的。重要的部分是`.*?`惰性量词。这将确保它 a) 仅找到第一个零字符串，并且 b) 删除字符串中的所有“前导”零。

# .htaccess - .htaccess 从 GET 中分割前两个字符作为转发路径

> ID：12901438
> 
> 赞同：0
> 
> 时间：2012-10-15T18:06:24.507
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

嘿伙计们，我在这里遇到了一个棘手的问题，但我相信它可以让我绕过对 PHP 控制器文件进行转发的需要。我有一个网址，`example.com/`如果它没有以下序列，我会点击它，它将像这样路由

```
#example.com
RewriteCond %{HTTP_HOST} ^(www\.)?example\.com [NC]
RewriteRule ^$ http://www\.example2\.com/?CampID=dm/DMdefault [R=301,L] 
```

问题是第二个重定向。如果我想将前两个（字母数字）切片作为转发 url 的一部分，将接下来的五个切片作为第二部分，这可行吗？

```
RewriteMap  lc int:tolower
RewriteCond %{HTTP_HOST} ^(www\.)?example\.com [NC]
RewriteRule ^(\w{2})(\w{5})$ http://www\.example2\.com/landing/external-marketing/direct-mail/${lc:$1}?CampId=${lc:$1$2} [R=301,L] 
```

这 * 应该规范化大小写，并转发`http://example.com/BA025JD`更正 `http://www.example2.com/landing/external-marketing/direct-mail/ba?CampId=ba025jd`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:47:23.720

您不能`RewriteMap`在 htaccess 文件中使用该指令，您需要在服务器或虚拟主机配置中定义映射。不幸的是，apache 选择不引起您的注意。如果您使用尚未定义的地图，它只会默默地什么都不做。

但是，一旦定义了该地图，您的规则就对我有用：

**我的请求**

```
GET /A1b2C3d HTTP/1.1
Host: example.com 
```

**apache 的响应，定义了*lc*映射**

```
HTTP/1.1 301 Moved Permanently
Date: Mon, 15 Oct 2012 18:44:37 GMT
Server: Apache
Location: http://www.example2.com/landing/external-marketing/direct-mail/a1?CampId=a1b2c3d
Content-Length: 349
Content-Type: text/html; charset=iso-8859-1 
```

# java - Java 代码到 UML 图

> ID：12901447
> 
> 赞同：0
> 
> 时间：2012-10-15T18:06:58.387
> 
> 标签：java, uml, visio

> **可能重复：**
> [推荐的 Eclipse 插件从 Java 代码生成 UML](https://stackoverflow.com/questions/51786/recommended-eclipse-plugins-to-generate-uml-from-java-code)

是否有一些 NetBeans 或 Eclipse 插件可以将简单的 Java 代码转换为简单的 UML 图，我可以在 Microsoft Visio 或其他一些 UML 编辑器中使用它。

我已经尝试过 ObjectAid，但它只导出图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:32:44.817

我使用企业架构师。它是一个完整的 UML 编辑器软件，您可以导入您的 java 文件并为您制作 UML 图。

# jquery - 如何禁用 iframe 中的文本框

> ID：12901452
> 
> 赞同：2
> 
> 时间：2012-10-15T18:07:26.430
> 
> 标签：jquery, iframe, input, click, javascript

场景：一个名为 index.html 的大页面，一切都发生在这里。索引有 10 个选项卡（jquery ui 选项卡）。使用 jquery ui 的手风琴小部件，每个选项卡现在平均有 3-5 个子类别（我被拒绝发布图片作为垃圾邮件预防，但我希望您了解布局的样子）。这就是问题开始的地方。iframe 存在于所有这些中，因此我正在查看 25-30 个 iframe，每个 iframe 中约有 5-10 个文本字段。我想要做的只是简单地启用/禁用这些文本字段。

很简单，我知道这可以通过以下方式完成：

```
$('input[type=text]').attr("disabled", "disabled");

$('input[type=text]').removeAttr("disabled") 
```

索引上的按钮触发一个功能：

```
 $(".frameClass").each(function () {
                console.log("i found a frame called " + this.name);
}); 
```

如何为单击启用的所有输入文本字段建立此连接？我什至尝试在 iframe 中创建一个函数并尝试从`.each()`

```
this.unlockFields(); 
```

没有把我带到任何地方，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:06:36.357

您必须使用`.contents()`来访问 iframe 中的元素，如下所示：

```
$(".frameClass").each(function () {
     $(this).contents().find('input[type=text]').attr('disabled', 'disabled');
}); 
```

鉴于 iframe 包含与主页**位于同一域中**的页面，这应该可以满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:13:53.840

试试这个：

```
var iframes = $('iframe');
iframes.each(function(index, iframe) {
    var iframe_content = ($.browser.msie ? $(iframe.contentWindow.document) : $(iframe.contentDocument));
    iframe_content.find('input[type=text]').attr({disabled:'disabled'});
}); 
```

# ms-access - 我将如何制作一个在访问数据库的所有表中搜索值的表单

> ID：12901458
> 
> 赞同：1
> 
> 时间：2012-10-15T18:07:38.433
> 
> 标签：ms-access, vba

我正在尝试制作一个表单，用于搜索数据库中所有表中的值（有多个表）。结果将显示为其中出现的表的名称。如果有人可以帮助我，那就太好了。

简而言之，我有一个带有文本框和按钮的表单。我输入搜索字符串（例如 183939）并单击按钮。它在数据库表的所有字段中搜索值（183939），如果找到该值，则显示它出现的表的名称。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:42:10.023

我认为这是一个坏主意，因为它可能需要很长时间，并且由于还要搜索系统表而提供令人困惑的结果......但是以下函数将返回包含搜索词的所有表名的数组，或者如果它是没找到。调用示例是这样的：`theTables = containingTable("hello")`其中 theTables 是一个变体。一个限制是这对于多值字段将失败。

```
Function containingTables(term As String)
    Dim db As Database
    Dim tds As TableDefs
    Dim td As TableDef
    Set db = CurrentDb
    Set tds = db.TableDefs
    For Each td In tds
        For Each f In td.Fields
            On Error Resume Next
            If DCount("[" & f.Name & "]", "[" & td.Name & "]", "[" & f.Name & "] LIKE '*" & term & "*'") Then
                If Err.Number <> 0 Then
                    Debug.Print Err.Number, Err.Description
                    Err.Clear
                    On Error GoTo 0
                Else
                    containingTables = containingTables & td.Name & ","
                    Exit For
                End If
            End If
        Next
    Next
    Set tds = Nothing
    Set db = Nothing
    'Alternate Version
    if Len(containgingTables) then containingTables = Left(containingTables, Len(containingTables) - 1)
    'Original Version
    'if Len(containgingTables) then containingTables = Split(Left(containingTables, Len(containingTables) - 1), ",")
End Function 
```

要使用替代版本显示结果，只需使用：`Msgbox(containingTables(searchTerm))`where `searchTerm`is what you are search.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T20:26:55.200

我也一样，我不知道你为什么想做那样的事情......

我认为 Daniel Cook 发布的解决方案是正确的，我只是采取了稍微不同的方法。你需要像我一样匹配确切的值吗？无论如何，这是我的代码：

```
Function searchTables(term as String)
  Dim T As TableDef
  Dim Rs As Recordset
  Dim Result() As String
  Dim Counter

  Counter = 0
  For Each T In CurrentDb.TableDefs
    If (Left(T.Name, 4) <> "USys") And (T.Attributes = 0) Then

      Set Rs = T.OpenRecordset
      While Not Rs.EOF
        For Each Field In Rs.Fields
          If Rs(Field.Name) = term Then
            Counter = Counter + 1
            ReDim Preserve Result(Counter)
            Result(Counter) = T.Name & "," & Field.Name
          End If
        Next
        Rs.MoveNext
      Wend
      Rs.Close

    End If
  Next
  If Counter = 0 Then
    searchTables = Null
  Else
    searchTables = Result
  End If
End Function 
```

您应该过滤掉重复的值，以防函数在同一个表中多次匹配相同的字段。

# android - 为什么eclipse中的模拟器会重启？

> ID：12901471
> 
> 赞同：1
> 
> 时间：2012-10-15T18:08:38.470
> 
> 标签：android, emulation

我正在关注[http://developer.android.com/training/basics/firstapp/running-app.html](http://developer.android.com/training/basics/firstapp/running-app.html) 并尝试在我的 PC 上的模拟器上运行我的第一个 android 应用程序。模拟器正在运行（从eclipse开始）

如前所述，我设法通过 eclipse 启动了 myFirst App，尽管在本教程中应该添加它，但您必须等待几分钟才能启动并运行模拟器。现在我的问题是，当我修改 myFirstApp 和 wnat 来测试它时，eclipse 不断启动一个新的模拟器：

```
[2012-10-15 19:32:44 - MyFirstApp] ------------------------------
[2012-10-15 19:32:44 - MyFirstApp] Android Launch!
[2012-10-15 19:32:44 - MyFirstApp] adb is running normally.
[2012-10-15 19:32:45 - MyFirstApp] Performing com.example.myfirstapp.MainActivity activity launch
[2012-10-15 19:32:45 - MyFirstApp] Automatic Target Mode: Preferred AVD 'Hobbit' is not available. Launching new emulator.
[2012-10-15 19:32:45 - MyFirstApp] Launching a new emulator with Virtual Device 'Hobbit' 
```

这非常烦人，因为启动一个完整的模拟器会降低性能。但更令人沮丧的是，我在这个新的模拟器中获得了 MyFirstApp 的第一个版本。

当我从头开始重新启动模拟器时，我在控制台中看到了这个：

```
[2012-10-15 19:55:42 - MyFirstApp] New emulator found: emulator-5554
[2012-10-15 19:55:42 - MyFirstApp] Waiting for HOME ('android.process.acore') to be launched...
[2012-10-15 19:56:57 - MyFirstApp] emulator-5554 disconnected! Cancelling 'com.example.myfirstapp.MainActivity activity launch!' 
```

为什么？此时模拟器仍在运行。这不可能是正常的工作方式。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:14:39.080

在 Eclipse 中转到运行 -> 运行配置。选择您的应用程序并将右侧的目标选项卡更新为“始终提示选择设备”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:46:52.627

如果模拟器正在运行并且没有显示在设备中，请尝试重置 adb。在eclipse中：设备选项卡-> Dropbown->重置abd

# c - 读取命令行参数

> ID：12901473
> 
> 赞同：0
> 
> 时间：2012-10-15T18:08:41.820
> 
> 标签：c

谁能指出我这里的问题？这可以编译，但不会打印任何内容。我需要将命令行参数中的字符串与字符串“hello”进行比较。谢谢！

```
 #include <stdio.h>
  #include <string.h>

  int main(int argc, char *argv[])
  { 
      if (argc == 0) 
      {
        printf("No arguments passed!\n");
      }

      char *str = argv[1];
      if(strcmp("hello", str)==0)
      {
        printf("Yes, I find it");     
      }

      else
      {
        printf("nothing"); 
      }

    return 0;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:13:28.843

我的 ESP 建议您在交互式编辑器/调试器中运行它，例如 Microsoft Studio。您可能尚未将环境配置为传递任何命令行参数，因此您希望看到`nothing`您的输出。

但是，您访问`argv[1]`不存在的 seg-fault，并且程序在没有任何输出之前中止。

要解决此问题，请检查`argc`first 的值，并确保您没有访问无效内存。

另外，我建议`\n`在每个末尾添加一个`printf`以帮助将任何缓冲输出刷新到控制台。

```
int main(int argc, char *argv[])
  {
      if (argc == 0) 
      {
        printf("No arguments passed!\n");
      }
      else if(strcmp("hello", argv[1])==0)
      {
        printf("Yes, I find it\n");     
      }

      else
      {
        printf("nothing\n"); 
      }

    return 0;
  } 
```

当你运行它时，你应该看到：

```
$prompt:  myprogram
No arguments passed!

$prompt:  myprogram hello
Yes, I find it

$prompt:  myprogram world
nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:15:13.503

问题是您用来运行它的命令。正如你评论的：

> 我运行程序>测试你好或>测试你好，输出什么都没有

`>`正在重定向输出，最终没有给你命令行参数。您想要的只是`program hello`没有输出重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:19:16.330

```
#include <stdio.h>
#include <string.h>

  int main(int argc, char *argv[])
  {
    if (argc < 2 || 0 != strcmp("hello", argv[1]))
        printf("nothing\n");     
      else
        printf("yes, found it\n"); 

    return 0;
  } 
```

和输出

```
bash-3.2$ gcc 1.c -o 1
    bash-3.2$ ./1 hello1
    nothing
    bash-3.2$ ./1 hello
    yes, found it
    bash-3.2$ ./1
    nothing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T18:28:13.923

尝试将您的程序称为与“测试”不同的名称

# php - 每三次将值放入三个不同的数组中

> ID：12901474
> 
> 赞同：1
> 
> 时间：2012-10-15T18:08:42.620
> 
> 标签：php, arrays

我有一个 foreach，其中有三个不同的数组。我想每三次将值（在运行 foreach 时）放入不同的数组中（查看下面的示例以获得更好的解释）。

```
Ex: arr = blue, red, green, yellow, brown

arr1 = blue, yellow arr2 = red, brown arr3 = green 
```

我有这段代码（但不起作用，因为模数不会归结为最后一个 if 语句，而不是 if 的第一次执行）。

```
$count = 0;
foreach($values as $value){
    if($count%2){
        $arrSecond[] = $value[img][url];
    }
    else if($count%3){
        $arrThird[] = $value[img][url];
    }
    else {
        $arrFirst[] = $value[img][url];
    }
    $count++;
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T18:11:35.343

您只需要在不同的偏移量下一直使用模数 3：

```
foreach($values as $value){
    $mod = $count%3;
    if($mod == 1){
        $arrSecond[] = $value['img']['url'];
    }
    // elseif, not else if!
    elseif($mod == 2){
        $arrThird[] = $value['img']['url'];
    }
    else {
        $arrFirst[] = $value['img']['url'];
    }
    $count++;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T18:13:22.150

或者你可以简单地制作一个数组：

```
$count = 0;
$data = array();
foreach($source as $value) {
   $data[$count % 3][] = $value[img][url];
   $count++;
} 
```

这为您提供了 3 个子数组，其中 $value 内容在晚上分散开来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T18:14:24.413

您可以执行以下操作：

```
$count = 0;
foreach($values as $value){
    switch($count){
        case 0:
            $arrFirst[] = $value[img][url];
            $count = 1;
            break;
        case 1:
            $arrSecond[] = $value[img][url];
            $count = 2;
            break;
        case 2:
            $arrThird[] = $value[img][url];
            $count = 0;
            break;
    }
} 
```

这基本上是一个三态状态机，它应该比对大量图像使用模数更有效。

# java - iMail 的 JavaMail API -- java.net.SocketException: Permission denied: connect

> ID：12901475
> 
> 赞同：20
> 
> 时间：2012-10-15T18:08:50.437
> 
> 标签：java, jakarta-mail, permission-denied, socketexception

我无法让应用程序使用 JavaMail API 以比我们以往更自动化的方式发送一些文件。我对 Java 和 NetBeans 很陌生，但是用其他语言编程过，所以如果我对 Java 和/或 NetBeans 有点迷茫，请原谅我。

我不断收到此错误

> java.net.SocketException：权限被拒绝：连接

尝试连接到本地邮件服务器时。我已经使用相同的代码通过 gmail 的 SMTP 服务器成功连接并发送了邮件，只是更改了用户名、密码和端口。我还能够成功地远程登录到我们的服务器并从端口 25 获得 220 响应。我还有一个正在运行的批处理文件，它成功地通过我们的本地服务器发送电子邮件。关于为什么我无法连接的任何想法或想法`JavaMail`？

这是发送电子邮件的代码。

源代码：

```
public void sendEmail(String customerNumber, ArrayList fileList){
   String from = "xxxx";
   String username = "xxxx";
   String to = "xxxx";
   String host = "10.1.1.6";
   String pwd = "xxxx";
   String port = "25";

   Properties props = System.getProperties();
   props.put("mail.smtp.host", host);
   props.put("mail.smtp.port", port);
   props.put("mail.smtp.user", username);
   props.put("mail.smtp.auth", "true");
   props.put("mail.smtp.starttls.enable", "true");
   props.put("mail.smtp.debug", "true");
   props.put("mail.smtp.socketFactory.port", port);
   props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
   props.put("mail.smtp.socketFactory.fallback", "false");

   Session session = Session.getInstance(props, null);
   session.setDebug(true);

   MimeMessage message = new MimeMessage(session);
   try{
       message.setFrom(new InternetAddress(from));
       message.setRecipients(Message.RecipientType.TO, to);
       message.setSubject("Electronic Invoices");
       BodyPart messageBodyPart = new MimeBodyPart();
       messageBodyPart.setText("Electronic Invoices");
       Multipart multipart = new MimeMultipart();
       multipart.addBodyPart(messageBodyPart);
       for(int i = 0; i < fileList.size(); i++){
           messageBodyPart = new MimeBodyPart();
           String fileName = (String) fileList.get(i);
           DataSource source = new FileDataSource(fileName);
           messageBodyPart.setDataHandler(new DataHandler(source));
           messageBodyPart.setFileName(fileName);
           multipart.addBodyPart(messageBodyPart);
       }
       message.setContent(multipart);

       Transport tr;
       tr = session.getTransport("smtp");
       tr.connect(host, username, pwd);
       tr.sendMessage(message, message.getAllRecipients());
       jTextArea2.append("Mail Sent Successfully");
       tr.close();

   } catch(Exception e){
       jTextArea2.append("sendEmail()::" + System.getProperty("line.separator") + e + System.getProperty("line.separator"));
       System.out.println(e.getMessage());
       System.out.println(e.getCause());
   }
} 
```

两个异常语句的输出：

```
DEBUG: setDebug: JavaMail version 1.4.5
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: trying to connect to host "10.1.1.6", port 25, isSSL false
Could not connect to SMTP host: 10.1.1.6, port: 25
java.net.SocketException: Permission denied: connect 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-15T18:56:35.893

添加`-Djava.net.preferIPv4Stack=true`到 VM 选项。另一种确认是否是相同问题的方法，在 Netbeans 中，右键单击项目 > 属性 > 库并选择 JDK 6 Java 平台（如果没有，请安装）。清理，构建然后重试。这将消除这个问题作为问题

信用[https://stackoverflow.com/a/7478027/643500](https://stackoverflow.com/a/7478027/643500)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-16T15:03:52.550

如果在开始时在代码中使用简化应用程序调用（例如从 CLI）：

`System.setProperty("java.net.preferIPv4Stack", "true")`

假设应用程序将使用旧版 IPv4 网络堆栈。

# ios - GTM OAauth2：用访问代码交换访问令牌

> ID：12901479
> 
> 赞同：0
> 
> 时间：2012-10-15T18:09:11.960
> 
> 标签：ios, google-api, oauth-2.0

我根据以下指南在我的应用程序中使用 GTM OAuth2 库进行身份验证：[https](https://developers.google.com/accounts/docs/OAuth2InstalledApp) ://developers.google.com/accounts/docs/OAuth2InstalledApp 。

我能够为用户检索访问代码，但是，我不确定如何将其交换为访问令牌。我已经搜索了文档，到目前为止还没有找到任何相关的例子。库中是否有支持这种交换的方法？

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:56:07.180

不知道你的意思是我的“访问代码”是那个密码？无论如何，我已经设法让 GTM OAuth2 代码正常工作，包括在用户通过身份验证后检索访问令牌。我做了一个简单的项目，您只需要输入您的客户 ID 和客户密码，也许这可以帮助您。

[https://github.com/Christian-Hansen/simple-oauth2](https://github.com/Christian-Hansen/simple-oauth2)

祝你好运。

基督教

# java - GWT - GinModule 对不同的实现使用相同的接口

> ID：12901483
> 
> 赞同：0
> 
> 时间：2012-10-15T18:09:17.363
> 
> 标签：java, gwt, dependency-injection, gwt-gin

我有这个 GinModule：

```
public class LocalizadorGinModule extends AbstractGinModule {
    @Override
    protected void configure() {
        bind(Localizador.class).to(LocalizadorAImple.class).in(Singleton.class);
        bind(Localizador.class).to(LocalizadorBImpl.class).in(Singleton.class);
    }
} 
```

我想像这样使用它：

```
public interface LocalizadorGinjector extends Ginjector {
    Localizador getA();
    Localizador getB();
} 
```

但我不知道如何`gwt`知道正确的实施。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T01:40:28.870

充其量，我建议编写您自己的提供程序。然后，您的提供者可以决定是否返回 A 或 B，但它喜欢。

# java - 包 javax.comm 不存在

> ID：12901488
> 
> 赞同：3
> 
> 时间：2012-10-15T18:09:45.633
> 
> 标签：java

> **可能重复：**
> [如何获取 javax.comm API？](https://stackoverflow.com/questions/7562565/how-to-get-javax-comm-api)

我已经下载并安装了 jdk1.7.0_07 并尝试运行 COM 端口监听程序。但我收到错误“包 javax.comm 不存在”。我想知道 JDK 本身是否提供 javax 包，还是我必须单独下载它。另外，如果我必须单独下载它，我在哪里可以下载 javax 包？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:42:32.567

这是一个单独的下载。如果您使用的是管理依赖项的构建工具（我强烈推荐！），您可以从[javax.comm:comm:3.0-u1](http://search.maven.org/#artifactdetails%7Cjavax.comm%7Ccomm%7C3.0-u1%7Cjar)的 Maven Central 获取它。

除了 API 库本身，您还需要一个实现。事实上的标准似乎是 RXTX，它也可以通过 Maven Central 获得。由于众所周知的原因，RXTX 开发人员实际上已经停止支持`javax.comm`API。支持它的最新版本是[2.0.x](http://rxtx.qbang.org/wiki/index.php/Download)。这可以在 Maven 中心的[org.rxtx:rxtxcomm:2.0-7pre1 上找到](http://search.maven.org/#artifactdetails%7Corg.rxtx%7Crxtxcomm%7C2.0-7pre1%7Cjar)。

如果您不介意放弃标准 API，在[org.rxtx:rxtx:2.1.7](http://search.maven.org/#artifactdetails%7Corg.rxtx%7Crxtx%7C2.1.7%7Cjar)也有更新的版本。显然，新的 API 是相同的，只是在不同的包名称下。更令人困惑的是，他们改变了它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:29:28.917

我尝试在@Colin 提供的链接中查找它，但也找不到它。无论如何，我得到了一些您可能会觉得有用的附加（可选）信息。它在[这里](http://edn.embarcadero.com/article/31915)

# r - 如何增加 ggplot2 地图的连续颜色填充的箱数

> ID：12901489
> 
> 赞同：4
> 
> 时间：2012-10-15T18:09:51.350
> 
> 标签：r, ggplot2

我在使用 ggplot2 在 R 中创建地图方面相对较新，但我已经为这个问题苦苦挣扎了几天。我已经创建了我的情节，但似乎无法增加用于将颜色映射到我的值的箱数。

这是一个问题，因为地图不能很好地显示数据的变化。我不确定我是否正确地解决了这个问题。

这是我的代码：

```
region=c('alaska','alabama','arkansas','arizona','california','colorado','connecticut','florida','georgia','hawaii','iowa','idaho','illinois','indiana','kansas','kentucky','louisiana','massachusetts','maryland','maine','michigan','minnesota','missouri','mississippi','montana','north carolina','north dakota','nebraska','new hampshire','new jersey','new mexico','nevada','new york','ohio','oregon','pennsylvania','south carolina','south dakota','tennessee','texas','utah','virginia','vermont','washington','wisconsin','west virginia','oklahoma','wyoming')

sales=c(46,1240,471,2292,13427,1574,261,10036,826,1508,184,939,2356,1329,434,271,714,208,2027,21,950,500,1871,147,249,1204,69,175,369,1968,606,656,2369,2422,525,2902,1709,126,1563,12046,931,2271,46,2260,250,122,0,0)

state_data = as.data.frame(cbind(region,sales))

library(ggplot2)
library(maps)
all_states <- map_data("state")

D = merge(all_states, state_data, by = "region")
D = D[with(D,order(D$group,D$order)),] 

p = ggplot()
p = p + geom_polygon( data=D, aes(x=long, y=lat, group = group, fill=D$sales),colour="white" )
p = p + xlab("")
p = p + ylab("")
p = p + labs(title = "sales")
p = p + guides(color=FALSE) 
p = p + guides(size=FALSE) 
p = p + guides(fill=guide_legend() )
p = p + guides(fill= guide_colorbar(title="sales",barheight = 1,barwidth=15,direction="horizontal",nbin=8) )
p = p + theme(legend.position="bottom")
p 
```

理想情况下，我想将图例上的 bin 数量增加到大约 8-10，并可能在渐变中添加另一种颜色以显示更多细节。我已经尝试过 ggplot2 函数，但运气不佳。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:33:51.910

`sales`您遇到的问题与您的列是一个因素而不是数字这一事实有关。以下将对此进行补救：

```
D = merge(all_states, state_data, by = "region")
D = D[with(D,order(D$group,D$order)),] 
D$sales= as.numeric(D$sales) # this is the important bit...

p = ggplot(data=D) + 
     geom_polygon(aes(x=long, y=lat, 
                      group = group, fill=sales), 
                  colour = "white" ) + # Do not use D$, by use the column name
     xlab("") + ylab("") + labs(title = "sales") + theme(legend.position="bottom")
p 
```

![在此处输入图像描述](../Images/d42a8f5e7f30346dc3462d3834e75bbe.png)

...或使用两种色标：

```
p + scale_fill_gradient2(midpoint = 20) 
```

![在此处输入图像描述](../Images/fe9f975e08b1c9bede8e330a6246916c.png)

一些风格说明：

*   不要将向量 ( `D$sales`) 用作美学，仅使用列名称 ( `sales`)。
*   我不喜欢常量`p = p + ...`样式，只是`+`在一行的末尾使用并转到下一行。

# grails - 使用 HTTPBuilder 和 MultipartEntity 发布文本和文件

> ID：12901490
> 
> 赞同：1
> 
> 时间：2012-10-15T18:09:52.233
> 
> 标签：grails, multipartentity

我正在使用 groovyx.net.http.HTTPBuilder 从 Grails POST 到 PHP 脚本。我需要附加几个文本字段和一些文件。

我可以通过这种方式附加一些文本字段并取得巨大成功：

```
 MultipartEntity mpc = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE)
    mpc.addPart("json", new StringBody(json.toString())) 
```

但是，当我附加这样的文件时，请求中不再存在文本字段：

```
 passFiles.each() { key, value ->
            mpc.addPart(key, new InputStreamBody(value.stream, value.type, value.filename))
            System.out << value
        } 
```

我认为文件应该可以这样添加。这是我上面的痕迹：

`[filename:icon.png, stream:java.io.ByteArrayInputStream@2747ebcb, type:image/png]`

如何使 HTTPBuilder 按预期进行此 Multipart POST？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T20:51:36.460

一些想法：

1.  你记得打电话`setEntity()`把你的请求和你的联系起来`MultipartEntity`吗？
2.  根据您使用的 Grails/Groovy 版本，您可能会在 HTTPBuilder 中遇到问题，请参阅[此处](https://stackoverflow.com/questions/6452678/groovy-httpbuilder-and-multipartentity-multipart-form-data)。该链接指向一个打补丁的叉子，我没有尝试过。
3.  它不如 Groovy，但我已经能够使用与 Apache HTTPClient Java API 密切相关的代码从 Grails 完成类似的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:38:13.830

Andrew 的评论使我更好地了解了 HTTPClient Java API。我能够像上面这样使一切工作：

1.  将流的临时副本保存到文件中。

    ```
    def file = new File('web-app/tmpfiles/file.dat').newOutputStream()
    file << stream
    file.close() 
    ```

2.  不使用 InputStreamBody，而是使用 FileBody 和保存文件的路径。

    ```
    mpc.addPart(key, new FileBody(new File('web-app/tmpfiles/file.dat'), filename, type, 'UTF-8')) 
    ```

# uisegmentedcontrol - 在 IB 中创建的 UISegmentedControl 上设置选定的段

> ID：12901492
> 
> 赞同：0
> 
> 时间：2012-10-15T18:10:01.517
> 
> 标签：uisegmentedcontrol

我在 IB 中创建了 5 个 UISegmetedControl，每个都有 3 个段。我将选定的段保存在 NSArray 中。问题是当我想再次加载视图时选择与用户之前选择的相同段。如何访问 UISegmentedControl？每个控件都有不同的标签值。我必须以编程方式创建它们吗？

编辑找到了一个解决方案：我为每个控件创建了一个 IBOutlet。它有效，但可能有更好的解决方案。

```
@interface UISegmentedControlViewController : UIViewController {
IBOutlet UISegmentedControl *Segment1;
IBOutlet UISegmentedControl *Segment2;
IBOutlet UISegmentedControl *Segment3; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T17:42:12.970

假设`NSArray`存储所选段的索引。

```
-(void)viewDidLoad{

    Segment1.selectedSegmentIndex = [[array objectAtIndex:0] integerValue];// First index  (0,1 or 2)
    Segment2.selectedSegmentIndex = [[array objectAtIndex:1] integerValue];// Second index (0,1 or 2)
    Segment3.selectedSegmentIndex = [[array objectAtIndex:2] integerValue];// Third index  (0,1 or 2)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:02:46.930

您还可以创建一个 IBOUtletCollection（并让所有 SegmentedControls 成为该集合的成员）。如果它们执行或多或少相同的功能，同时仍然能够通过它们的标签区分它们，这将很有用。

# ios - 如何提高 iPad 信息亭网络应用程序中按钮的响应能力？

> ID：12901494
> 
> 赞同：2
> 
> 时间：2012-10-15T18:10:05.843
> 
> 标签：ios, ipad, web-applications, kiosk

我为今天刚刚上线的 iPad 2 信息亭开发了一个网络应用程序。几乎我们所有的客户都在使用触摸屏时遇到问题。他们正在敲击按钮，而应用程序没有记录触摸。

我从没想过用户与触摸屏交互会有这么大的困难。我想知道作为开发人员我是否可以做些什么来使这更加用户友好。触摸和实际注册之间有一点延迟——这使得用户更难知道他们按下了按钮。

我可以肯定地说，这些按钮很大——实际上可能比 iOS 指南中的要大（这又是一个 Web 应用程序——它不是用 Objective-C 编写的，而是用 PHP 和 jQuery 编写的）。所有操作都发生在 Web 应用程序中 - 使用简单的 UIWebView iOS 应用程序访问该应用程序，该应用程序只需连接到该站点。

澄清一下，有2个问题：

1.  触摸根本不注册 - 客户在沮丧中越来越努力
2.  对于已注册的触摸事件，存在滞后

感谢下面评论中的一些建议，最终将我带到了这个[链接](http://forum.jquery.com/topic/how-to-remove-the-300ms-delay-when-clicking-on-a-link-in-jquery-mobile)，我能够大大提高网络应用程序的响应能力。但我知道我的代码仍然可以改进。我的应用程序在任何主干 mvc 之外使用了主干.js 和 jquery 的组合。

这是我为防止默认的 touchend 行为而更改的 jquery 事件的示例（它最初是一个单击事件）。

```
$('body').on( 'touchend', '#s-id', function(event) {
    event.preventDefault();
    $('form[name=client-login]').submit();
}); 
```

还有一个主干视图的例子，它最初也使用了点击事件

```
 var CounterView = Backbone.View.extend({

        el: "body",

        events: {
            "touchend #b-q-prev": "qPrev",
            "touchend #b-q-next": "qNext"
        },

        qNext: function(e){
            e.preventDefault();                 
            this.model.qIncrease();
            this.qShow();
        },

        qPrev: function(e){
            e.preventDefault();                         
            this.model.qDecrease();
            this.qShow();
        },...etc... 
```

实施这些技术解决了我的两个问题，因为该应用程序本质上并不关心您最初触摸按钮后所做的事情，一旦您释放它，它就会认为您触摸的原始按钮被按下。这允许我的客户使用随意的点击来触发事件。它也更快，解决了问题 2。

我不确定我是否正确实施了这一点。现在的一个主要缺点是，当我使用非触摸设备进行测试时，没有事件注册，因为我从 java 脚本中删除了所有点击事件。我是否应该查看多个事件，而不仅仅是阻止默认的触摸结束？根据我所做的研究，没有明确的解决方案 - 因为 jquery mobile 还没有实现它？

# java - NetBeans 更改 Ant 版本

> ID：12901499
> 
> 赞同：1
> 
> 时间：2012-10-15T18:10:34.477
> 
> 标签：java, netbeans, ant

我正在使用 NetBeans 构建我的项目。我使用的版本是1.8。但是，我试图在只能运行 ant 1.6.5 的计算机上再次构建它。有没有办法在 Netbeans 中指定使用哪个版本的 ant？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:16:44.440

请按照以下 3 个简单步骤操作：

1.  `Ant 1.6.5`从[**Apache Binaries**](http://archive.apache.org/dist/ant/binaries/)下载并在本地文件系统中安装/提取

2.  去`Netbeans Tools > Options > Miscellaneous > Ant`

3.  将在本地文件系统的第 1 步中创建的更改`Ant Home`为`Ant 1.6.5 folder`

**编辑：**

如果由于您的特定 Net Beans 上述方法没有帮助，请尝试以下步骤：

1.  去`Help -> Help Contents`

2.  搜索`Switching Ant Version`

3.  单击左侧窗格中的相同链接以获取右侧的详细信息，您应该看到如下屏幕：

![在此处输入图像描述](../Images/02b0643d89ea5a1649c971a926278c1e.png)

按照上页的说明进行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-15T22:00:09.687

在 NetBeans 8.2 中，转到`Tools -> Options -> Java -> Ant -> Ant Home`

[![在此处输入图像描述](../Images/9534358d34a10e542a1583b560e76dab.png)](https://i.stack.imgur.com/wseX9.png)

# php - XAMPP 1.7.3 上的 php_uploadprogress.dll。适用于 Windows 7 专业版

> ID：12901501
> 
> 赞同：0
> 
> 时间：2012-10-15T18:10:51.890
> 
> 标签：php, xampp, pecl

我正在尝试在我的本地主机开发计算机上设置 pecl uploadprogress 扩展。这是一台带有 XAMPP 1.7.3 的 Windows 7 家庭专业机器。

制作并安装扩展后，它拒绝开始：

```
PHP Warning:  PHP Startup: uploadprogress: Unable to initialize module
Module compiled with module API=20060613
PHP    compiled with module API=20090626
These options need to match 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:31:50.300

您只需要找到合适的 dll 版本或将 php 替换为匹配的版本。您也可以自己编译库...

你可以在这里找到一切：http: [//pecl.php.net/package/uploadprogress](http://pecl.php.net/package/uploadprogress)

# jquery - .click jQuery 上的 .toggle 元素

> ID：12901505
> 
> 赞同：0
> 
> 时间：2012-10-15T18:11:10.993
> 
> 标签：jquery, toggle

我在`<tr>`单击时将内容添加到另一个，但我还需要将 html 元素 + 更改为 - （它需要 .toggle）。因此，您单击`<tr>`内容将在下方展开（显示），同时当内容显示在下方时，+ 变为 -。任何帮助，将不胜感激。

这是js：

```
<script>
var lastClicked;
$(document).ready(function() {
$("#myTable tr").click( function () {
 var rowID = $('#myRow' + this.rowIndex);
 if(rowID.length < 1)
    $('#myTable tr').eq(this.rowIndex).after('<tr id="myRow'+this.rowIndex+'">
<td colspan="5" style="background-color: #F0F5FE;"><p>"' + this.rowIndex + '" 
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas ac mauris sit 
amet diam accumsan gravida in vel eros. Nunc tristique lacinia est. Donec 
condimentum tincidunt nisl, at fringilla velit placerat eget. Nullam sed tincidunt
augue. Maecenas vulputate mattis pharetra.</p></td></tr>').next().addClass
('content-area-1 p');   

else
 rowID.toggle();

return false;

if (lastClicked != null) {
    lastClicked.hide();
}

//$(this).toggle();

lastClicked = $(this);
});
});
</script> 
```

这是html：

```
<tr class="row-1st">
  <td><a class="test-1">+</a></td>
  <td>07/06/201</td>
  <td>Phone Call</td>
  <td>Employee</td>
 </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:27:48.733

在中添加类似这样的内容`click`：

```
var tempVal = $(this).find('.test-1');
tempVal.text((tempVal.text() == '+' ? '-' : '+')); 
```

# c++ - 迭代地编写递归函数

> ID：12901507
> 
> 赞同：-2
> 
> 时间：2012-10-15T18:11:29.423
> 
> 标签：c++, recursion, iteration

我最近才开始学习递归，并且在特定练习方面遇到了一些麻烦；从递归状态迭代地重写函数，特别是在涉及多个基本情况的情况下：

```
double function(int j, int i)
{
    if(i == 0 || j == 1)
    {
        return 1;
    }

    if(i == 1 || j == 0)
    {
        return j;
    }

    if(i > 0)
    {
        return j * function(j, --i);
    }

    return 1 / (function(j, -i))
} 
```

我在迭代地重写函数时遇到了麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:47:39.367

首先，这是您的代码压缩（我这样做是为了回答，不要在实际代码中这样做。）

```
double function(int j, int i) {
    if(i == 0 || j == 1) return 1;
    if(i == 1 || j == 0) return j;
    if(i > 0) return j * function(j, --i);
    return 1 / (function(j, -i)); //changed this to -i
     //might be a division by zero, you should check for that
} 
```

由于最后一个块只能有效地发生在最外层的循环中，我们将把它拉出来：

```
double outer_function(int j, int i) {
    if (i<0)
        return 1 / inner_function(j, -i);
    else
        return inner_function(j, i);
}
double inner_function(int j, int i) {
    if(i == 0 || j == 1) return 1;
    if(i == 1 || j == 0) return j;
    if(i > 0) return j * inner_function(j, --i);
} 
```

我要做的第一件事是尝试将其放入尾递归形式。这涉及重新排列方程，因此递归之后没有任何内容。（我不是 100% 确定我做对了这一步）

```
double inner_function(int j, int i, int times=1) {
    if(i == 0 || j == 1) return times;
    if(i == 1 || j == 0) return times*j;
    return inner_function(j, --i, times*j);
} 
```

现在，因为在每个代码路径中，函数调用之后都没有代码，所以这是完全尾递归的。尾递归很容易变成迭代！

```
double inner_function(int j, int i, int times=1) {
    while(true) {
        if(i == 0 || j == 1) return times;
        if(i == 1 || j == 0) return times*j;
        //return inner_function(j, --i, times*j);
        --i;
        times *= j;
        //go again!
    }
} 
```

如果我要从这里优化：

```
double function(int j, int i) {
    bool invert = false;
    if(i<0) {
         i=-i; 
         invert=true;
    }
    double result=1;
    if(i == 0) result = 0;
    else if(j == 0) result = j;
    else if (j != 1) {
        while(i--)
            result *= j;
    }
    return (invert ? 1/result : result);            
} 
```

或者，如果我猜你的意图：

```
double function(int j, int i) {
    return std::pow(double(j), double(i));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:49:38.177

在递归期间你真的只有一个基本情况。`j`永远不会改变，所以它只是一开始的特例。`i`在第一次递归调用后将始终为正并趋向于 0。所以唯一真正的基本情况是`i == 1`.

函数的开头可以保持不变。

```
double function(int j, int i)
{
    if(i == 0 || j == 1) { return 1; }
    if(i == 1 || j == 0) { return j; } 
```

现在你只需要处理`i > 0`and`i < 0`案例（`i == 0`一开始就已经处理好了）。

这两种情况的不同之处在于，如果`i`为负，则切换符号并反转结果。

```
 int invert = i < 0;
    i = abs(i); // or: if (i < 0) { i = -i; } 
```

现在看看递归部分并弄清楚发生了什么。

```
return j * function(j, --i); 
```

`function()`将被调用直到`i`为 1 并且当时的结果将是`j`. 每次迭代都会将返回值乘以`j`. 这可以这样写：

```
 double returnValue = j; // (the i == 1 case)

    while (i-- > 1) { // loop while i is greater than 1
        returnValue = j * returnValue; // multiply j by the return value
    } 
```

如果需要，现在反转并返回结果。

```
 if (invert) {
        returnValue = 1 / returnValue;
    }
    return returnValue;
} 
```

# microsoft-metro - 如果没有互联网连接，则显示错误消息

> ID：12901513
> 
> 赞同：1
> 
> 时间：2012-10-15T18:11:43.317
> 
> 标签：microsoft-metro

我有一个使用 C# 和 XAML 完成的 Metro 应用程序。我正在使用 WebView 控件来加载 URL，并且还使用通知来更新图块。如果机器未连接到 Internet，则磁贴和 web 视图为空白。我想显示某种消息，表明该应用程序无法连接到 Internet。

如何检查 Internet 连接？在一个`try catch`街区或什么地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:54:56.573

你看过网络信息样本吗？它展示了如何从您的应用程序内部检查互联网连接。简洁版本...

```
var connectionProfile = Windows.Networking.Connectivity.NetworkInformation.GetInternetConnectionProfile();

switch (connectionProfile.GetNetworkConnectivityLevel())
                {
                    case NetworkConnectivityLevel.None:
                        connectionProfileInfo += "Connectivity Level : None\n";
                        break;
                    case NetworkConnectivityLevel.LocalAccess:
                        connectionProfileInfo += "Connectivity Level : Local Access\n";
                        break;
                    case NetworkConnectivityLevel.ConstrainedInternetAccess:
                        connectionProfileInfo += "Connectivity Level : Constrained Internet Access\n";
                        break;
                    case NetworkConnectivityLevel.InternetAccess:
                        connectionProfileInfo += "Connectivity Level : Internet Access\n";
                        break;
                } 
```

在尝试使用 WebView 之前进行检查并相应地提示用户。

# javascript - 如何不公开类声明（将它们隐藏在全局命名空间中）？

> ID：12901518
> 
> 赞同：0
> 
> 时间：2012-10-15T18:11:59.487
> 
> 标签：javascript

再会。我面临一个相当简单的麻烦。我希望社区能帮助我。

这就是我所拥有的：我有两个 JavaScript 文件：第一个是 Parent 类，第二个是 Child 类。现在我想从全局命名空间中隐藏这些定义。当然，我可以将它们全部放入单个 JavaScript 文件中，并将其包装成一个像这样的自调用匿名函数，这样就只有一个子对象的实例（我想要实现的）：

```
var myChildObj = (function(){

    var ParentClass = function() {};    
    ParentClass.prototype = { 
        //some data
    };

    function extendsClass(childClass, parentClass, isRewrite) {
        for(var property in parentClass.prototype) {
            if (isRewrite || 
               (!isRewrite && 
                !isDefined(childClass.prototype[property]))) {                         
                childClass.prototype[property] = parentClass.prototype[property];
            }
        }

        childClass.prototype.parent =  parentClass.prototype;
    }

    var ChildClass = function() {}; 
    ChildClass.prototype = {
        //some data
    }

    extendsClass(ChildClass, ParentClass, false);
    return new PhotoGallerySingle();    
})(); 
```

但是 ParentClass 声明相当大，把它全部放在那里对程序员来说不是那么友好。

那么，您通常如何解决此类问题呢？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:17:01.710

唯一的选择是将它附加到窗口对象，也就是说你可以将它嵌套在同一个变量下：

```
var MYNAMESPACE = window.MYNAMESPACE = {}
MYNAMESPACE.code = "hello" 
```

只需确保您没有点击正在使用的名称（例如文档或类似名称）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:19:13.050

恐怕你做不到。

您总是可以将它附加到其他对象而不是直接全局命名空间，但是如果您希望能够在您的第二个脚本中使用它，您需要在某处将其公开。最终，它需要可从全局对象访问。

对不起。

# php - 正则表达式 - 防止重复字符

> ID：12901521
> 
> 赞同：3
> 
> 时间：2012-10-15T18:12:05.960
> 
> 标签：php, regex, validation

我花了好几个小时试图解决这个问题。

这是我的正则表达式字符串：
`^(?=.{4})(?!.{32})[a-zA-Z0-9_]+((\.(-\.)*-?|-(\.-)*\.?) [a-zA-Z0-9_]+)*$`-
你可以[在这里测试它](http://regexr.com?32ffh)

这是我试图完成的（用户名验证）：

1.  字符串长度范围 -> 确定
2.  字母、数字、_ - 。允许（- 和 . 不允许在用户名的开头和/或结尾）-> OK
3.  需要防止重复字符（一行超过 5 个字符）->**需要帮助！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:19:04.127

这：

```
^(?=.{4})(?!.{32})(?!.*(.)\1{4})\w[\w.-]+\w$ 
```

使用另一个（负）前瞻来处理第三个条件。这将确保没有字符，即其自身后跟 4 次。

`\w`我还通过使用which代表简化了您的字符类`[a-zA-Z0-9]`。此外，正如 FJ 指出的那样，您可以将前两个前瞻合并为一个：

```
^(?=.{4,31}$)(?!.*(.)\1{4})\w[\w.-]+\w$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:18:39.327

尝试以下操作：

```
^(?=.{4,31}$)(?![-.])(?:(?!(.)\1{4})[-.\w])+(?<![-.])$ 
```

示例：[http ://regexr.com?32ffq](http://regexr.com?32ffq)

这假设您实际上是要**防止**重复字符，而不是允许。

# c++ - c++ 用 scons 编译 std::thread 示例

> ID：12901527
> 
> 赞同：6
> 
> 时间：2012-10-15T18:12:21.810
> 
> 标签：c++, g++, pthreads, scons

我无法让 scons 正确编译一个小线程示例（在 Linux 上）。

如果我运行 scons，它会这样做：

```
jarrett@jarrett-laptop:~/projects/c++_threads$ scons
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
g++ -o build/main.o -c -std=c++11 -pthread -Wall -g src/main.cpp
g++ -o build/c++threads build/main.o
scons: done building targets. 
```

然后如果我运行`./build/c++threads`它会抛出这个错误：

```
terminate called after throwing an instance of 'std::system_error'
  what():  Operation not permitted
Aborted 
```

如果我用这个从命令行编译：

```
g++ -std=c++11 -pthread -Wall -g src/main.cpp 
```

它编译为`a.out`，如果我运行`a.out`它，它将运行程序（为线程做一些输出等）。

这是我的 SConstruct 文件：

```
# Tell SCons to create our build files in the 'build' directory
VariantDir('build', 'src', duplicate=0)

# Set our source files
source_files = Glob('build/*.cpp', 'build/*.h')

# Set our required libraries
libraries = []
library_paths = ''

env = Environment()

# Set our g++ compiler flags
env.Append( CPPFLAGS=['-std=c++11', '-pthread', '-Wall', '-g'] )

# Tell SCons the program to build
env.Program('build/c++threads', source_files, LIBS = libraries, LIBPATH = library_paths) 
```

这是cpp文件：

```
#include <iostream>
#include <thread>
#include <vector>

//This function will be called from a thread

void func(int tid) {
    std::cout << "Launched by thread " << tid << std::endl;
}

int main() {
    std::vector<std::thread> th;

    int nr_threads = 10;

    //Launch a group of threads
    for (int i = 0; i < nr_threads; ++i) {
        th.push_back(std::thread(func,i));
    }

    //Join the threads with the main thread
    for(auto &t : th){
        t.join();
    }

    return 0;
} 
```

任何人都知道我做错了什么？？？

感谢任何帮助！

干杯

贾勒特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T18:28:01.120

感谢@Joachim 和@bamboon 的评论。将 pthread 添加到链接器（scons 库）标志有效。

新的 scons 文件现在是：

```
# Tell SCons to create our build files in the 'build' directory
VariantDir('build', 'src', duplicate=0)

# Set our source files
source_files = Glob('build/*.cpp', 'build/*.h')

# Set our required libraries
libraries = ['pthread']
library_paths = ''

env = Environment()

# Set our g++ compiler flags
env.Append( CPPFLAGS=['-std=c++11', '-pthread', '-Wall', '-g'] )

# Tell SCons the program to build
env.Program('build/c++threads', source_files, LIBS = libraries, LIBPATH = library_paths) 
```

再次感谢！

# jquery - jQuery UI - 使用位置 API 定位隐藏的 div 定位不正确

> ID：12901528
> 
> 赞同：3
> 
> 时间：2012-10-15T18:12:25.663
> 
> 标签：jquery, jquery-ui

我正在尝试在 HTML 下方使用 jquery UI[位置](http://jqueryui.com/position/)API（`#changer`相对于）来定位 div。`.demo`

[http://jsfiddle.net/jttdk/1/](http://jsfiddle.net/jttdk/1/)

```
<div class="demo-content">
    <div class="demo" title="click anywhere inside" >demo div</div>
    <div class="demo" title="click anywhere inside" >demo div</div>
    <div class="demo" title="click anywhere inside" >demo div</div>
    <div class="demo" title="click anywhere inside" >demo div</div>
</div>
<div id="changer">changer div</div> 
```

**JS：**

```
$('.demo').click(function() {
    var _that = this;
    $("#changer").fadeOut(100, function() {
        console.log(_that.className);
        $(this).position({
            of: _that,
            my: 'left top',
            at: 'right top',
            offset: '10 10'
        }).show();
    });

}); 
```

**笔记：**

1.  它第一次工作正常。
2.  如果我像下面这样删除`.fadeOut`并将`.position`代码移到外面，同样可以正常工作

[http://jsfiddle.net/jttdk/3/](http://jsfiddle.net/jttdk/3/)

```
 $("#changer").position({
        of: this,
        my: 'left top',
        at: 'right top',
        offset: '10 10'
    }).show(); 
```

如果我添加一个`.hide`before也会失败`.position`。（（即）`$("#changer").hide().position`）

我很想知道我在这里做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T18:56:58.913

[jQuery UI Position 文档](http://api.jqueryui.com/position/)指出“注意*：jQuery UI 不支持定位隐藏元素。* ”因此，先将元素淡出会阻止其`.position()`正常工作。由于`.fadeOut()`应用于`display: none;`元素，它没有位置，因此不能相对移动。

但是，您可以`.animate()`仅用于更改不透明度：

演示：http: [//jsfiddle.net/SO_AMK/jttdk/6/](http://jsfiddle.net/SO_AMK/jttdk/6/)

jQuery：

```
$('.demo').click(function() {
    var _that = this;
    $("#changer").animate({
        "opacity": 0
    }, 100, function() {
        $(this).position({
            of: _that,
            my: 'left top',
            at: 'right top',
            offset: '10 10'
        }).animate({
            "opacity": 1
        }, 100)
    });
});​ 
```

请注意，我`display: none;`从 CSS 中删除了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-20T15:19:09.420

颠倒顺序`.position(...)`- `.show()`jQuery UI`position`插件无法正确计算隐藏元素的位置。

```
$('.settings-icon').click(function(){
  $('#control-panel').show().position({
    of: $(this),
    my: 'left top',
    at: 'left top'
   });
}); 
```

# javascript - asp.net，javascript，无法获取属性 getElementsByTagName 的值

> ID：12901529
> 
> 赞同：2
> 
> 时间：2012-10-15T18:12:26.210
> 
> 标签：javascript, asp.net, getelementbyid

我使用带有 c# 和 javascript 的 asp.net。我有一个母版页和许多使用它的 aspx 页面。在母版页上，我有一个实际上是菜单的无序列表。

无序列表具有 ID 和`runat ="server"`。问题是当我放入`"runat ="server""`无序列表时。我收到错误：`"Microsoft JScript runtime error: Unable to get value of the property 'getElementsByTagName': object is null or undefined."`它指向一个用于菜单功能的 script.js。特别是在一行是：........

```
a=c; var w=document.getElementById(p), s=w.getElementsByTagName('ul'), l=s.length, i=0; 
```

在母版页的头部，脚本调用如下：

```
<script type="text/javascript" src="script.js">
</script> 
```

script.js 的完整代码：

```
var menu=function(){
    var t=15,z=50,s=6,a;
    function dd(n){this.n=n; this.h=[]; this.c=[]}
    dd.prototype.init=function(p,c){
        a=c; var w=document.getElementById(p), s=w.getElementsByTagName('ul'), l=s.length, i=0;
        for(i;i<l;i++){
            var h=s[i].parentNode; this.h[i]=h; this.c[i]=s[i];
            h.onmouseover=new Function(this.n+'.st('+i+',true)');
            h.onmouseout=new Function(this.n+'.st('+i+')');
        }
    }
    dd.prototype.st=function(x,f){
        var c=this.c[x], h=this.h[x], p=h.getElementsByTagName('a')[0];
        clearInterval(c.t); c.style.overflow='hidden';
        if(f){
            p.className+=' '+a;
            if(!c.mh){c.style.display='block'; c.style.height=''; c.mh=c.offsetHeight; c.style.height=0}
            if(c.mh==c.offsetHeight){c.style.overflow='visible'}
            else{c.style.zIndex=z; z++; c.t=setInterval(function(){sl(c,1)},t)}
        }else{p.className=p.className.replace(a,''); c.t=setInterval(function(){sl(c,-1)},t)}
    }
    function sl(c,f){
        var h=c.offsetHeight;
        if((h<=0&&f!=1)||(h>=c.mh&&f==1)){
            if(f==1){c.style.filter=''; c.style.opacity=1; c.style.overflow='visible'}
            clearInterval(c.t); return
        }
        var d=(f==1)?Math.ceil((c.mh-h)/s):Math.ceil(h/s), o=h/c.mh;
        c.style.opacity=o; c.style.filter='alpha(opacity='+(o*100)+')';
        c.style.height=h+(d*f)+'px'
    }
    return{dd:dd}
}(); 
```

无序列表菜单在 form1 中声明：

这是列表菜单代码：。

```
<ul class="menu" id="menu" runat ="server"> 
  <li>
    <a href="#" class="menulink">Mant</a> 
    <ul> 
      <li><a href="Mant.aspx">Table</a></li> 
    </ul> 
  </li> 
</ul> 
```

在 form1 之外，声明如下：

```
<script type="text/javascript">
var menu = new menu.dd("menu");
menu.init("menu", "menuhover");
</script> 
```

除了 script.js 之外，所有代码都在母版页上声明。

我该如何解决这个问题？

谢谢...

帖子已编辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:17:20.913

您没有为具体答案提供足够的代码，但我的预感如下......

默认情况下，ASP.Net 更改包含元素的 ID`runat="server"`以确保所有 ID 都是唯一的。你有两个选择：

1.  向 ASP.Net 询问您的 JS 中的客户端 ID：

    `var clientID = "<%= txtUsername.ClientID %>";`

2.  看看[`ClientIDMode`物业](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)。将其设置为`Static`，至少对于有问题的元素应该可以解决问题。

此错误也可能是在页面完全呈现之前执行 JS 的结果。同样，您没有为我们提供足够的代码来做出此决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T20:20:52.477

试试这个代码。

```
<script type="text/javascript">
var menu = new menu.dd(<%= menu.ClientID %>);
menu.init(<%= menu.ClientID %>, "menuhover");
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:19:42.867

这是`null`因为 JavaScript 在元素创建之前执行。您可以添加到 onload。 [http://jsfiddle.net/vwvzN/](http://jsfiddle.net/vwvzN/)

詹姆斯希尔似乎有正确的方法。

# c# - 使用 MVVM 如何将选定的列表视图项添加到另一个

> ID：12901530
> 
> 赞同：2
> 
> 时间：2012-10-15T18:12:29.250
> 
> 标签：c#, wpf, listview, gridview

我正在使用 MVVM。我有两个列表视图。第一个列表视图很好，我可以填充它，它是一个 IEnuerable。我想要实现的是当单击第一个列表视图中的项目（行）时，我想将所选内容添加到第二个列表视图中。任何人都可以就此提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T14:56:44.493

为了演示如何使用 MVVM 做你想做的事，我假设你有一个`ItemViewModel`代表列表视图中的项目。您需要设置`ListView.ItemTemplate`以正确呈现每个项目（或覆盖该`ToString`方法以返回项目的字符串表示形式）。

你需要一个`MainViewModel`具有三个属性的：

1.  `Items1`包含项目列表。在此示例中，列表未更新，因此`IEnumerable<ItemViewModel>`已足够。

2.  `SelectedItem1`这将引用第一个列表视图（如果有）中当前选定的项目。

3.  `Items2`包含您迄今为止选择的项目列表。因为这个列表会被更新`ObservableCollection<ItemViewModel>`使用。

中唯一有趣的代码`MainViewModel`是`SelectedItem1`. 每当第一个列表视图中的选择发生更改时，这将被修改。发生这种情况时，所选项目将添加到`Items2`集合中。

```
public class MainViewModel {

  ItemViewModel selectedItem1;

  public MainViewModel(IEnumerable<ItemViewModel> items1) {
    Items1 = items1;
    Items2 = new ObservableCollection<ItemViewModel>();
  }

  public IEnumerable<ItemViewModel> Items1 { get; private set; }

  public ObservableCollection<ItemViewModel> Items2 { get; private set; }

  public ItemViewModel SelectedItem1 {
    get { return this.selectedItem1; }
    set {
      this.selectedItem1 = value;
      if (this.selectedItem1 != null && !Items2.Contains(this.selectedItem1))
        Items2.Add(this.selectedItem1);
    }
  }

} 
```

请注意，这个简单的视图模型没有实现`INotifyPropertyChanged`，因为本示例不需要它。

视图通过这样的 XAML 绑定到视图模型（例如`DataContext`，包含此 XAML 的任何内容都应设置为 的实例`MainViewModel`）：

```
<StackPanel>
  <ListView ItemsSource="{Binding Items1}" SelectedItem="{Binding SelectedItem1}"/>
  <ListView ItemsSource="{Binding Items2}"/>
</StackPanel> 
```

第一个`ListView`绑定`Items1`在视图模型中。当`ListView`更改中的选择时，数据绑定将确保`SelectedItem1`在视图模型中设置。然后，setter 中的代码将更新`Items2`属性，因为这是一个`ObservableCollection<T>`添加的新项目，所以将使用数据绑定推送 - 在本例中为第二个`ListView`。

在您的情况下，可以`ListView`通过绑定`SelectedItem`属性来处理选择事件。然而，有时不可能使用数据绑定来“处理事件”。一种解决方案可能是在视图的代码隐藏中添加事件处理程序，但这通常会导致视图模型和视图之间出现不必要的依赖关系。相反，您可以使用[混合行为](http://msdn.microsoft.com/en-us/library/ee341381%28v=expression.40%29.aspx)。通过编写自己的`Behavior`类，您可以处理事件并将其转换为可以数据绑定的东西，从而打破不需要的依赖关系。但是，要解决您的特定问题，它不是必需的。

请注意，如果您想使用 a`Behavior`您不再需要 Blend SDK。您可以使用 NuGet 向`Blend.Interactivity.Wpf`（或取决于您的框架的类似包）添加依赖项，以获取使用混合行为所需的单个 DLL。

* * *

因此，要扩展如何在单击第二个列表时从第二个列表中取消选择项目，您需要使用一种行为。尝试使用与上述相同的技巧，其中在第二个绑定到的属性的设置器中执行操作`SelectedItem`将`ListView`失败，因为向第二个添加新项目`ListView`可能会立即选择该项目，然后会立即删除新添加的项目 - 那不是你想要的。

这是一个`MouseLeftButtonUpBehavior`没有代码隐藏的方法，允许您在控件上释放鼠标左键时执行命令：

```
class MouseLeftButtonUpBehavior : Behavior<Control> {

  public static readonly DependencyProperty CommandProperty
    = DependencyProperty.Register(
      "Command",
      typeof(ICommand),
      typeof(MouseLeftButtonUpBehavior)
    );

  public ICommand Command
  {
    get { return (ICommand) GetValue(CommandProperty); }
    set { SetValue(CommandProperty, value); }
  }

  protected override void OnAttached() {
    AssociatedObject.MouseLeftButtonUp += OnMouseLeftButtonUp;
  }

  protected override void OnDetaching() {
    AssociatedObject.MouseLeftButtonUp -= OnMouseLeftButtonUp;
  }

  void OnMouseLeftButtonUp(Object sender, MouseButtonEventArgs mouseButtonEventArgs) {
    if (Command != null)
      Command.Execute(mouseButtonEventArgs);
  }

} 
```

XAML 必须修改为此（您可以使用 NuGet 添加对`Blend.Interactivity.Wpf`包的引用，以便能够向控件添加交互）：

```
<StackPanel>
  <ListView ItemsSource="{Binding Items1}" SelectedItem="{Binding SelectedItem1}"/>
  <ListView ItemsSource="{Binding Items2}" SelectedItem="{Binding SelectedItem2}">
    <i:Interaction.Behaviors>
      <local:MouseLeftButtonUpBehavior Command="{Binding DeselectCommand}"/>
    </i:Interaction.Behaviors>
  </ListView>
</StackPanel> 
```

视图模型中需要两个新属性：

```
public ItemViewModel SelectedItem2 { get; set; }

public ICommand DeselectCommand { get; private set; } 
```

`SelectedItem2`用于跟踪在第二个列表视图中选择了哪个项目。在第二`DeselectCommand`个列表视图中触发鼠标左键向上事件时执行。要真正做一些有用的事情，您需要创建一个命令。您可以使用`DelegateCommand`. 这个类不是 WPF 的一部分，但如果你用谷歌搜索它，你可以很容易地找到一个合适的实现。A`DelegateCommand`只是一种创建`ICommand`执行您选择的委托的 WPF 的方法。

在的构造函数中`MainViewModel`：

```
DeselectCommand = new DelegateCommand(_ => Deselect()); 
```

然后你需要`Deselect`实现`MainViewModel`：

```
void Deselect() {
  if (SelectedItem2 != null)
    Items2.Remove(SelectedItem2);
} 
```

将所有这些放在一起将在单击第二个列表视图时从第二个列表视图中删除项目，并且在您的视图中没有任何代码隐藏，否则可能会从您的视图创建不需要的依赖项到您的视图模型（例如，视图中的代码必须知道它应该调用`Deselect`视图模型）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:18:40.737

在面板/画布/网格上添加两个列表视图并添加此代码。确保为 listView1 注册了 SelectionChanged 事件（事件处理程序 listView1_SelectionChanged）。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void listView1_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            listView2.Items.Add((listView1.SelectedItem));
        }

        private void Grid_Loaded(object sender, RoutedEventArgs e)
        {
            listView1.Items.Add("test 1");
            listView1.Items.Add("test 2");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T18:20:56.010

使用 SelectionChanged 事件。然后你可以做类似的事情

```
Listview2.Items.Add(Listview1.SelectedItem); 
```

# vb.net - 远程执行 DTSX 文件（SSIS 包）并捕获事件

> ID：12901531
> 
> 赞同：0
> 
> 时间：2012-10-15T18:12:44.957
> 
> 标签：vb.net, ssis

我正在浏览我们拥有的一个简单的应用程序，并正在尝试对其进行一些更改/改进。目前，我们的应用程序在远程计算机上运行一个 bat 文件，该文件又执行 DTSX 文件。这很好用。

我想做的是从 bat/dtsx 文件中捕获事件/输出。我找到[了这个](http://msdn.microsoft.com/en-us/library/ms136090.aspx)，但由于我没有直接通过代码运行 DTSX 文件，我不确定这是否适用于此。我对运行 DTSX/SSIS 包知之甚少，所以我什至不确定从哪里开始。

还应该注意，这是在 VB.NET 中完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:45:03.577

在我的脑海中，最简单的选择是修改批处理脚本以重定向输出。

```
dtexec.exe /file myPackage.dtsx > myPackage.log 
```

这将覆盖每次执行的日志文件。您可以通过将当前的 %date% 和 %time% 附加到输出文件名来获得更好的效果。

下一个选项可能是更改您的调用代码。您可以让 .NET 代码读取正在显示的内容，而不是重定向批处理脚本以写入文件。不是最好的代码，它是用 C# 编写的，但我需要去开会，没有时间把它改掉。以下代码查看 ProcessResults 对象并提取标准输出和标准错误流。

```
 this.processStartInfo = new ProcessStartInfo(this.dtUtilPath, parameters);
            this.processStartInfo.RedirectStandardError = true;
            this.processStartInfo.RedirectStandardOutput = true;
            this.processStartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            this.processStartInfo.UseShellExecute = false;
            System.Diagnostics.Process process = null;

            // Perhaps it would be better to set this to 0 so that it runs to completion
            int waitInMilliSeconds = 1 * 1000;

            process = System.Diagnostics.Process.Start(this.processStartInfo);
            System.IO.StreamReader standardError = process.StandardError;
            System.IO.StreamReader standardOutput = process.StandardOutput;
            process.WaitForExit(waitInMilliSeconds);
            if (process.HasExited)
            {
                // Did it do well?
                // Currently, prints results to console but based on
                // exit code values can do whatever the business need is
                System.Console.WriteLine(standardOutput.ReadToEnd());
                System.Console.WriteLine(standardError.ReadToEnd());
                System.Console.WriteLine(process.ExitCode);
            } 
```

不过，此时，您正在考虑使用上述任一解决方案来解析上述文本以获取“您认为重要的任何信息”。如果是我，并且基于我目前对问题域的了解甚少，我会完全跳过 .NET 对信息的捕获。如果您喜欢双重任务，批处理脚本捕获可能会有所帮助，但我会选择本机[SSIS 日志记录](http://msdn.microsoft.com/en-us/library/ms140246.aspx)。这将需要对您部署的包进行代码更改，但我发现我拥有最好的 SSIS 体验

1.  打开日志记录，
2.  捕获 OnError、OnTaskFailed、OnInformation、OnWarning 和 OnPre/PostExecute 事件
3.  记录到 SQL Server（2005 将在包部署模式下记录到 dbo.sysdtslog90、2008、R2 和 2012 记录到 dbo.sysssislog。这些表存在于 msdb 中，但如果提供的连接字符串指向不同的目录，则该表将为在该目录中创建并记录将在那里发生）

# scala - 如何在 Play Framework 2.0.x scala 中使用 sbt-jslint？

> ID：12901533
> 
> 赞同：4
> 
> 时间：2012-10-15T18:12:45.533
> 
> 标签：scala, playframework-2.0, sbt

我想使用 Scala 将[sbt-jslint](https://github.com/philcali/sbt-jslint)集成到现有的 Play Framework 2.0.x 项目中。

有没有人这样做过？将 jslint 集成到`play test`运行中并将故障作为输出的集成部分呈现的配置步骤是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:51:55.267

*（这个答案来自@jzsfkzm，他对[github 问题发表了](https://github.com/philcali/sbt-jslint/issues/5)[很好的回应](https://github.com/philcali/sbt-jslint/issues/5#issuecomment-9466432)，但没有选择在这里重新发布他的答案。）*

在我们的项目中，插件被添加到*plugins.sbt*并在*Build.scala*中配置。下面的例子。

**项目/plugins.sbt**

```
addSbtPlugin("com.github.philcali" % "sbt-jslint" % "0.1.3") 
```

**项目/Build.scala**

```
import sbtjslint.Plugin._
import sbtjslint.Plugin.LintKeys._

...

val localSettings = lintSettings ++ inConfig(Compile)(Seq(
    // jslint
    sourceDirectory in jslint <<= (baseDirectory)(_ / "public" / "javascripts"),
    excludeFilter in jslint := "generated" || "lib",
    flags in jslint := Seq("sloppy", "continue", "vars", "nomen")
))

def playProject = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
    localSettings : _*
) 
```

我们用来运行 jslint 的任务是`play jslint`，它将检查您的代码并创建一个 xml 文件*target/jslint/results.xml*以供进一步使用。例如，您可以在 Jenkins Violations 插件中使用它。

# windows-phone-7 - 删除 Windows Phone 上的 SOAP 标头命名空间

> ID：12901535
> 
> 赞同：0
> 
> 时间：2012-10-15T18:12:49.930
> 
> 标签：windows-phone-7, soap

如何摆脱自定义标头元素中生成的命名空间，如下所示在调用 SOAP Web 服务的 Windows Phone 客户端上的用户名和密码上？

```
SOAP Header... 
<Authenticator xmlns="http://www.namespacename.com/services/">  
  <UserName xmlns="http://schemas.datacontract.org/2004/07/TestApp.App">myUserName</UserName>  
  <Password xmlns="http://schemas.datacontract.org/2004/07/TestApp.App">myPassword</Password>  
</Authenticator>  
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:06:05.757

一切都取决于您开始时如何生成 SOAP 请求。示例代码总是有帮助的。

# iphone - 块内引用自身

> ID：12901536
> 
> 赞同：3
> 
> 时间：2012-10-15T18:13:00.217
> 
> 标签：iphone, objective-c, ios, objective-c-blocks

现在我有一部分代码是这样的：

```
__strong MyRequest *this = self;

 MyHTTPRequestOperation *operation = [[MyHTTPRequestOperation alloc]initWithRequest:urlRequest];
 [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *request, id responseObject) {
     [this requestFinished:request];
 }
 failure:^(AFHTTPRequestOperation *request, NSError *error) {
     [this requestFailed:request withError:error];
 }]; 
```

我这样做主要是因为其他一些类继承自这段代码所在的类并实现了自己的 requestFinished 和 requestFailed。

如果我将自引用更改为 __weak 我开始收到一些 EXC_BAD_ACCESS 错误。使用 __strong 引用一切正常，但我担心创建保留周期。请注意，我正在使用 ARC。

此代码是否会创建会导致问题的保留周期？有什么简单的解决方案吗？我可以遵循什么不同的方法让继承类实现自己的方法来处理响应？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T18:48:52.020

是的，它创建了一个保留周期。它会引起问题吗？也许。

如果 API 支持，您可以重置处理程序，这将手动中断保留周期：

```
[operation setCompletionBlockWithSuccess:nil failure:nil]; 
```

或者您可以使用弱引用。但是，您说您尝试了弱引用，但它崩溃了。弱引用保证在消息开始时为 nil，或者在消息被处理之前保持有效。换句话说，考虑...

```
__weak MyRequest *weakSelf = self;
dispatch_async(someQ, ^{
    [weakSelf doSomething];
}); 
```

如果`weakSelf`异步块执行时为 nil，则“什么都没有”发生。如果它不为零，则保证至少保留到`doSomething`完成。实际上，它类似于：

```
__weak MyRequest *weakSelf = self;
dispatch_async(someQ, ^{
    { id obj = weakSelf; [weakSelf doSomething]; obj = nil; }
}); 
```

但是请注意，如果您这样做：

```
__weak MyRequest *weakSelf = self;
dispatch_async(someQ, ^{
    [weakSelf doSomething];
    [weakSelf doSomethingElse];
}); 
```

对象可能在 和 之间变为`doSomething`nil `doSomethingElse`。

此外，如果您通过弱引用访问实例变量，您只是要求一个 SEGV：

```
__weak MyRequest *weakSelf = self;
dispatch_async(someQ, ^{
    foo = weakSelf->someIVar; // This can go BOOM!
}); 
```

因此，如果您的处理程序正在访问单个消息的弱引用，那么您应该没问题。其他任何事情都应该做“弱-强-舞”。

```
__weak MyRequest *weakSelf = self;
dispatch_async(someQ, ^{
    MyRequest *strongSelf = weakSelf;
    if (!strongSelf) return;
    [strongSelf doSomething];
    [strongSelf doSomethingElse];
    foo = strongSelf->someIVar;
}); 
```

如果您认为您正在遵循指南，那么也许一个更完整的源代码示例以及崩溃详细信息会有所帮助......

# text-editor - sublime text 2 如何设置环境变量

> ID：12901537
> 
> 赞同：3
> 
> 时间：2012-10-15T18:13:02.763
> 
> 标签：text-editor, sublimetext2, ubuntu-12.04

我想设置环境变量。

上面写着[https://docs.sublimetext.io/guide/extensibility/snippets.html](https://docs.sublimetext.io/guide/extensibility/snippets.html)

> 片段功能 环境变量 片段可以访问环境变量形式的上下文信息。Sublime Text 自动设置下面列出的变量的值。
> 
> 您还可以添加自己的变量以提供额外信息。这些自定义变量在 .sublime-options 文件中定义。

但我找不到 .sublime-options 文件。

我想设置 $TM_FILENAME 和 $TM_FULLNAME 变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T08:25:27.220

该线程可能会有所帮助：[http](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=3852) ://www.sublimetext.com/forum/viewtopic.php?f=3&t=3852 。我在我的 macbook 上测试它并为我工作。

# git - 将 git 与 diffmerge 一起使用，没有提示也没有别名

> ID：12901549
> 
> 赞同：10
> 
> 时间：2012-10-15T18:13:40.777
> 
> 标签：git, git-config, diffmerge

在 OSX 上，我使用 diffmerge 作为我的 git diffing 工具。这是我的 .gitconfig：

```
[diff]
        tool = diffmerge
[difftool "diffmerge"]
        cmd = diffmerge \"$LOCAL\" \"$REMOTE\"
[alias]
        d = difftool --no-prompt 
```

如果我只是使用`git difftool`它，它会提示我每个我想要比较的文件。为了解决这个问题，我创建了`git d`别名并添加了 --no-prompt 标志。

有没有什么办法可以防止重复提示而没有别名？我尝试在 difftool 下插入`prompt=false`和`prompt = NO`移动，以及将 --no-prompt 标志移动到 diffmerge 命令旁边，但这些都没有帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-16T06:49:25.227

> 将标志移动到命令`--no-prompt`旁边`diffmerge`

`--no-prompt`是一个参数（正如我在“[如何使用可视差异程序查看 'git diff' 输出？](https://stackoverflow.com/a/949242/6309)`difftool` ”中提到的）。 所以我确认它不适用于.
`diffmerge`

> 我尝试插入`prompt=false`并`prompt = NO`在`difftool`

直接在一个`[difftool]`部分下，应该可以工作（而不是下`[difftool "diffmerge"]`）

您可以在这里看到[另一种](http://rubenlaguna.com/wp/2010/08/05/visual-difftool-cygwin-git/index.html/)基于包装器的方法：它可以帮助调试这些命令。

```
git config --global difftool.diffmerge.cmd "diffmerge-diff.sh \"\$LOCAL\" \"\$REMOTE\"" \"\$BASE\"" \"\$MERGED\""
git config --global difftool.prompt false
git config --global diff.tool diffmerge
git difftool 
```

# python - 在 Python 中：给定一个原始数字数组，我将如何创建一个新数组，其中包含一定范围内原始数组中的值？

> ID：12901552
> 
> 赞同：3
> 
> 时间：2012-10-15T18:13:47.347
> 
> 标签：python, arrays, numpy, slice

```
import os
import pyfits as ps
import lomb
import numpy as np
import matplotlib.pyplot as plt

hdulist = ps.open('filename')

tbdata = hdulist[1].data

PDCFlux = tbdata.field(7)
PDCFlux = PDCFlux[~np.isnan(PDCFlux)]

psd,freq = lomb.lomb(Timesec,PDCFlux)
logpsd = np.log10(psd)
logfreq = np.log10(freq)

#want an associated 'slope'.

'''PDC Slope'''
PDCFluxrange = PDCFlux.all[np.log10(4*(10**(-5)))<freq<np.log10(4*(10**(-7)))] 
```

在最后一行中，我尝试创建一个新数组：`PDCFluxrange`它由数组的值组成`PDCFlux`（`freq`频率）在：`log10(4*(10**(-5)))`和之间`log10(4*(10**(-7))`。

当我在 Pylab 中运行程序时，我收到类似于以下内容的错误消息：`Value Error: The truth value of an array with more than one element is ambiguous`. 使用`a.any()`或`a.all()`。

在这种情况下，我不确定如何在我的代码中正确使用这两个函数中的任何一个而不创建循环或定义新函数；我认为可能有更简单的方法来完成同样的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T18:18:06.043

```
>>> import numpy as np
>>> a = np.arange(10)
>>> a[(a > 2) & (a < 8)]
array([3, 4, 5, 6, 7]) 
```

每个条件 (`a > 2`和`a < 8`) 都在创建一个布尔 numpy 数组，该数组的长度等于`a`，并且在 中的每个位置包含您的标准的真值`a`。

```
 >>> a > 2
   array([False, False, False,  True,  True,  True,  True,  True,  True,  True], dtype=bool) 
```

然后，您使用[numpy.logical_and](http://docs.scipy.org/doc/numpy/reference/generated/numpy.logical_and.html)来查找*两个*条件都为真的位置。

最后，您将结果数组用作[布尔或“掩码”索引数组](http://docs.scipy.org/doc/numpy/user/basics.indexing.html#boolean-or-mask-index-arrays)，以仅从原始数组中检索满足您的条件的元素。

我*认为*你得到了`ValueError`因为 while`a > 2`是有效的（实际上只是在 call `a.__gt__(2)`，像`2 < a < 8`is first call这样的语句`cmp(2,a)`，这对我来说结果是一样`ValueError`的：

```
>>> a = np.arange(10)
>>> cmp(2,a)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:17:33.250

我想你想要

```
PDCFluxrange = [x for x in PDCFlux if x>np.log10(4*(10**(-5))) and x<np.log10(4*(10**(-7)))] 
```

那对你有用吗？我希望我能正确理解您的代码。

# scala - Scala 委托导入隐式转换

> ID：12901554
> 
> 赞同：3
> 
> 时间：2012-10-15T18:14:04.703
> 
> 标签：scala, object, import, delegates, implicit-conversion

在 Scala 中，我如何将隐式转换的导入委托给我的范围，这样我就不必拥有一个大的“环境”类，它既提供库函数/值（对于我正在创建的 DSL）也提供隐式转换？

简而言之，我可以从一个对象中移动我的隐式转换，并在我编写时仍然导入它：

**导入 MyDslEnvironment._**

?

这样做的目的是使我的框架的导入和使用变得简单和轻量级，因为只有一个导入语句为用户提供了我的 DSL/框架所需的功能。

PS：在任何人激怒我之前 - 是的，我知道隐式转换可能带来的陷阱和肮脏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T20:55:03.130

这可以使用特征轻松实现。只需根据需要在尽可能多的特征中定义隐式转换（以实现模块化），并将特征混合在单个对象（MyDslEnvironment）中。举例：

```
case class Foo( value: Int )
case class Bar( value: String )
object Baz {
  def test( foo: Foo, bar: Bar ) { println( foo + "," + bar ) }
}

trait ImplicitEnv1 {
  implicit def toFoo( value: Int ) = Foo( value )
}

trait ImplicitEnv2 {
  implicit def toBar( value: String ) = Bar( value )
}

object MyDslEnvironment extends ImplicitEnv1 with ImplicitEnv2 
```

然后你可以这样做：

```
scala> import MyDslEnvironment._
import MyDslEnvironment._
scala> Baz.test( 123, "hello" )
Foo(123),Bar(hello) 
```

实际上，您可以将所有代码（以及`Foo`在我上面的示例中）放入特征中，而不仅仅是隐式转换（这可能需要使用自类型注释）。至此，您将基本上实现了（臭名昭著的）蛋糕模式的变体之一。见[http://jonasboner.com/2008/10/06/real-world-scala-dependency-injection-di/](http://jonasboner.com/2008/10/06/real-world-scala-dependency-injection-di/)`Bar``Baz`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T17:03:00.093

我的倾向是将隐式放在一个包对象中。

假设您的工作将在包 com.acme.mydsl 中定义。您的源文件排列在目录层次结构 com > acme > mydsl 中。在目录 mydsl 中，像这样定义一个对象：

```
package com.acme; //we are in the mydsl dir, but note no mydsl in
                  //in the package declaration

package object mydsl {

   implicit def idioticallyStringsAre5( s : String ) : Int = 5

   //define other utilities that should be available within
   //the package or importable

} 
```

现在，您可以这样做：

```
scala> import com.acme.mydsl._
import com.acme.mydsl._

scala> def sum( a : Int, b : Int ) = a + b
sum: (a: Int, b: Int)Int

scala> sum("hello", "there")
res0: Int = 10 
```

通过导入 import com.acme.mydsl._，您可以获得所有包级函数定义，包括隐式转换。

我真的很喜欢包装对象。在 Java 中，仅仅为了实用功能而必须使类充满静态成员似乎总是很狡猾。包对象为这些实用程序提供了非常优雅的命名空间，包括隐式转换。

# rsync - 如何使用 rsync 本地备份文件

> ID：12901555
> 
> 赞同：2
> 
> 时间：2012-10-15T18:14:04.287
> 
> 标签：rsync

假设我有硬盘 A 和 B

B是外部备份文件。每周，我都想将 A 备份到 B 中，但只移动较新/更新的文件，无需复制未更改的文件。

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:21:37.003

如果您在 linux 中，请使用`cron`运行一个`shell script`首先安装该驱动器然后对其执行 rsync 的操作。做一个 `crontab -e`然后在下面添加

```
* * * * 0 script.sh 2>&1 >> scriptLog.log 
```

在每周的第一天运行，其中星期日 = 0，星期一 = 1...

PS 这真的不会是备份，因为您只是将文件同步并覆盖到 B。仅当数据状态 X 在时间实例 T 处保留时才称为备份。其中 X 在 T & 始终保留后永远不会改变。

# eclipse - 在 ubuntu 上的 Eclipse 中未自动检测到 JavaFX 2.2

> ID：12901557
> 
> 赞同：0
> 
> 时间：2012-10-15T18:14:10.227
> 
> 标签：eclipse, javafx-2

我在 ubuntu 11.04 上。我最近安装了 Jave jdk 7u7，它捆绑了 javafx 2.2。我也安装了 eclipse 3.7.2。

现在我有一个使用 ant 构建的应用程序源代码。当我使用此代码创建一个新项目时，对于 javafx 的所有使用都会出现构建错误。那么，如何让 javafx 工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:45:37.297

使用[e(fx)clipse](http://efxclipse.org/)插件（[在 0.1.0 及更高版本中](http://tomsondev.bestsolution.at/2012/07/20/efxclipse-0-1-0-released/)）将解决查找相关 JavaFX 安装的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:26:49.617

为了让它工作，我必须在属性中添加外部 jar -> java 构建路径 -> 库（选项卡） -> 添加外部 jar。

jar 可以在 <jdk-location >/jre/lib/jfxrt.jar 中找到

因此，对我来说，它位于 /usr/local/java/jdk1.7.0_07/jre/lib/jfxrt.jar

# javascript - 集成 JqZoom 和 Jquery 广告库

> ID：12901561
> 
> 赞同：1
> 
> 时间：2012-10-15T18:14:30.150
> 
> 标签：javascript, jquery, html, css

到目前为止，我所做的工作在 Firefox 和 webkit 浏览器（safari 和 chrome，未在 maxthone 中测试）中运行良好实际上它非常简单，我只是添加一个事件悬停更改画廊中的宽度和高度以获得空间并让带有Jqzoom缩放的图像出现。

这就是所有需要的javascript代码

```
$(document).ready(function () {
$('.ad-gallery').adGallery({
    callbacks:
        {
            afterImageVisible: function () {
                $('div.ad-image a').jqzoom({
                    zoomType: 'reverse',
                    preloadText: locale.gallery.preloadText,
                    title: false,
                    zoomWidth: 500,
                    zoomHeight: 300,
                    preloadImages: true
                });

                $("div.zoomPad img").hover(function () {
                    var $container = $("div.ad-image");
                    $container.css('width', '850px').css('height', '302px');
                    $container.parent().css('width', '850px').css('height', '302px');
                    $('div.ad-prev').css('width', '25px');
                }, function () {
                    var $container = $("div.ad-image");
                    $container.css('width', '300px').css('height', '300px');
                    $container.parent().css('width', '300px').css('height', '300px');
                    $('div.ad-prev').css('width', '25px');
                });
            }
        }

    });
}); 
```

现在我的问题是为什么这在 IE 中不起作用？我开始调试，但没有看到任何错误，这让我抓狂，因为它触发了悬停事件

[这是我的现场示例](http://jsfiddle.net/justelnegro/KU6NU/3/)

**更新**

测试我意识到它给我带来麻烦的事件是鼠标掉了所以我改变了一点代码至少可以工作`mouseover`或者`mouseenter`我尝试过`mouseleave`和`mouseout`事件。仍然没有好的结果

```
 $('.ad-gallery').adGallery({
        callbacks:
            {
                afterImageVisible: function () {
                    $('div.ad-image a').jqzoom({
                        zoomType: 'reverse',
                        preloadText: locale.gallery.preloadText,
                        title: false,
                        zoomWidth: 500,
                        zoomHeight: 300,
                        preloadImages: true
                    });

                    if (!$.browser.msie) {
                        $("div.zoomPad img").hover(function () {
                            var $container = $("div.ad-image");
                            $container.css('width', '850px').css('height', '302px');
                            $container.parent().css('width', '850px').css('height', '302px');
                            $('div.ad-prev').css('width', '25px');
                        }, function () {
                            var $container = $("div.ad-image");
                            $container.css('width', '300px').css('height', '300px');
                            $container.parent().css('width', '300px').css('height', '300px');
                            $('div.ad-prev').css('width', '25px');
                        });
                    }
                    else {
                        $("div.zoomPad img").on({
                            mouseenter: function () {
                                var $container = $("div.ad-image");
                                $container.css('width', '850px').css('height', '302px');
                                $container.parent().css('width', '850px').css('height', '302px');
                                $('div.ad-prev').css('width', '25px');
                            }
//                            ,mouseleave: function () {
//                                var $container = $("div.ad-image");
//                                $container.css('width', '300px').css('height', '300px');
//                                $container.parent().css('width', '300px').css('height', '300px');
//                                $('div.ad-prev').css('width', '25px');
//                            }
                        }); 
```

我最后一个版本[的 live exmaple](http://jsfiddle.net/KU6NU/18/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:49:02.207

我没有看太多你的小提琴示例，但据我了解，IE 最高版本 6 不支持悬停，但`anchor <a>`标签除外。以后的版本也报告了错误。

检查此以获取更多详细信息[http://reference.sitepoint.com/css/pseudoclass-hover](http://reference.sitepoint.com/css/pseudoclass-hover)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:49:44.547

最后我通过更改选择器以及如何附加监听器解决了我的问题

```
$('.ad-gallery').adGallery({
animate_first_image: true,
callbacks: {
    afterImageVisible: function() {
        $('div.ad-image a').jqzoom({
            zoomType: 'standar',
            preloadText: locale.gallery.preloadText,
            title: false,
            zoomWidth: 500,
            zoomHeight: 300,
            preloadImages: true
        });

        $("div.zoomPad").mouseenter(function() {
            var $container = $("div.ad-image");
            $container.css('width', '850px').css('height', '350px');
            $container.parent().css('width', '850px').css('height', '350px');
            $('div.ad-prev').css('width', '25px');
        }).mouseleave(function() {
            var $container = $("div.ad-image");
            $container.css('width', '300px').css('height', '300px');
            $container.parent().css('width', '300px').css('height', '300px');
            $('div.ad-prev').css('width', '25px');
        });
    }
}

});​ 
```

这是我的现场示例

[http://jsfiddle.net/justelnegro/KU6NU/20/](http://jsfiddle.net/justelnegro/KU6NU/20/)

# android - 水平两行菜单在 Android 中不起作用

> ID：12901565
> 
> 赞同：1
> 
> 时间：2012-10-15T18:14:43.363
> 
> 标签：android, css, menu

我的水平菜单在我的电脑和 iPhone 上运行良好，但在我的 Android 手机上运行不佳。

当浏览器尺寸较小时，菜单必须有两行。在我的 Android 手机上，它只显示 1 行，两条线相互重叠。但是当我在手机上刷新页面时，菜单以正确的方式出现！

有谁知道出了什么问题？

这是网站[http://nederlandoverzicht.nl/cs](http://nederlandoverzicht.nl/cs)

这是我的菜单 CSS 代码

```
#menu ul{list-style-type:none;
width: 90%;
margin: 0px auto;
display: table;
table-layout: fixed; /* the magic dust that ensures equal width */
text-align:center;
}

#menu ul li{
display: block;
width:33.3333333334%;
color:#fff;
padding-top:10px;
font-size:12px;
float:left;
font-family:"Tahoma";}

#menu{background-color:#bd4545;
border-radius: 5px;
height:58px;
width:100%;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:45:31.117

查看您当前的代码，您的所有`<li>`标签都显示为表格单元格。无论您将它们设置为多宽，`<ul>`with`display:table;`都会尝试将它们全部放入一行中，因为它们没有被分隔到设置为显示为表格行的容器中。

根据您要采用的解决方案，您可以`display:inline-block;`正常将它们全部设置为 16.6% 的宽度，然后使用媒体查询来检测移动设备并将宽度更改为 33.3% 以强制链接为两行 3。

# javascript - 如何在 ExtJS 4.1.0 中停止执行未捕获的类型错误 javascript

> ID：12901566
> 
> 赞同：0
> 
> 时间：2012-10-15T18:14:49.310
> 
> 标签：javascript, extjs, extjs4

我在解析数据的支持类之一中遇到未捕获的类型错误。但是，如果出现错误，应用程序不会停止。

当第一个类型错误发生以调查它的详细信息时，有什么方法可以暂停执行。

我试过这样的东西，但没有运气 if(data === 'undefined'){ debugger; }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:33:49.907

正如 s.webbandit 所建议的，一旦您能够找到错误的位置以跟踪详细信息，使用 Ext-Js-Debug 版本非常有用。

执行发生时停止/暂停执行的几种方法

1.  使用 chrome 运行应用程序并单击 Source 选项卡下底部可用的按钮以暂停未捕获的异常
2.  在代码中添加 try/catch 异常处理块并获取堆栈跟踪或在 catch 块中添加调试器以检查详细信息。
3.  代码执行时直接动态放置调试器

我相信可能有更优雅的方法来做到这一点。但是，我可以使用第一种方式解决我的问题。

# c# - Phalanger 找不到我的 php 类

> ID：12901567
> 
> 赞同：0
> 
> 时间：2012-10-15T18:14:56.610
> 
> 标签：c#, php, phalanger

在[这个问题之后，我在](https://stackoverflow.com/questions/12845562/phalanger-and-php-library-for-net)[这里](http://www.php-compiler.net/blog/2012/net-interoperability-overview-of-phalanger-3-0)找到了一个很好的（最新的）示例。我成功地让 PHP.Core 库在 VS 中工作，但仍然无法找到我的 php 类。

教程很简单，但是

```
dynamic phpObj = globals.@class.PhpClass(); 
```

永远找不到我的 php 类。我尝试使用示例文件 default.php（类名：PhpClass）和我自己的 php 类，它们相似但名称不同。

我在这里想念什么？我试过这个选项

> 项目属性>打包/发布 Web>要部署的项目>项目中的所有文件

但这没有帮助。目前我在项目下有我的 php 类，如下所示 ![在此处输入图像描述](../Images/68fac6f1147bce5179d756e0a2234334.png)

我得到的错误只是说它找不到类： ![在此处输入图像描述](../Images/9605ac82b70db7e15409bdc3585ed8c1.png)

在此处使用 ILSpy 是 CurrentContext 的主要代码片段

```
result = (((ScriptContext)CallContext.GetData("PhpNet:ScriptContext")) ?? ScriptContext.CreateDefaultScriptContext()); 
```

这是用于查找 php 类 (AFAIK) 的代码行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:50:07.127

您必须首先将您的 php 文件包含到 PHP 上下文中……在 Web 应用程序中，要正确“模拟”php 生命周期，请执行以下操作：

```
using (var request_context = RequestContext.Initialize(ApplicationContext.Default, HttpContext.Current))
{
    var context = request_context.ScriptContext;
    context.Include("default.php", false);
// now the declarations declared by default.php are available in context.
// do anything with PHP objects here
} 
```

# vb.net - 按列分组，然后将每个组添加到数据表，然后添加到数据集中

> ID：12901569
> 
> 赞同：1
> 
> 时间：2012-10-15T18:15:04.457
> 
> 标签：vb.net, linq, datatable, group-by, dataset

处理这种事情的最佳方法是什么？

所以这是我的数据表

```
╔═══════════════╦═══════════════╦═══════════════╗
║ Product Name  ║ Product Price ║ Product Group ║
╠═══════════════╬═══════════════╬═══════════════╣
║ Skirt Red     ║            99 ║             1 ║
║ Jeans Blue    ║            49 ║             2 ║
║ Jeans Black   ║            49 ║             2 ║
║ Skirt Blue    ║            99 ║             1 ║
║ T-shirt White ║            20 ║             3 ║
║ T-shirt Green ║            20 ║             3 ║
║ Jeans Grey    ║            49 ║             2 ║
╚═══════════════╩═══════════════╩═══════════════╝ 
```

我将使用 LINQ 按产品组列对该数据表进行分组，以生成以下组

```
Group #1
    ╔═══════════════╦═══════════════╦
    ║ Product Name  ║ Product Price ║ 
    ╠═══════════════╬═══════════════╬
    ║ Skirt Red     ║            99 ║             
    ║ Skirt Blue    ║            99 ║             
    ╚═══════════════╩═══════════════╩

Group #2
        ╔═══════════════╦═══════════════╦
        ║ Product Name  ║ Product Price ║ 
        ╠═══════════════╬═══════════════╬
        ║ Jeans Blue    ║            49 ║             
        ║ Jeans Black   ║            49 ║ 
        ║ Jeans Grey    ║            49 ║
        ╚═══════════════╩═══════════════╩
Group #3
        ╔═══════════════╦═══════════════╦
        ║ Product Name  ║ Product Price ║ 
        ╠═══════════════╬═══════════════╬
        ║ T-Shirt White ║            20 ║             
        ║ T-Shirt Green ║            20 ║ 
        ╚═══════════════╩═══════════════╩ 
```

现在的问题是

1.  我如何使用 LINQ 按产品组列进行分组（完成）
2.  如何从结果组中删除产品组列？
3.  如何将每个组添加到单独的数据表，然后将所有表添加到单个数据集？（完成）
4.  假设有我不想在结果组中显示的列，我该如何隐藏它们？

这是我迄今为止尝试过的

```
 Dim ds As New DataSet
    Dim query = From r In bookedorders Group By key = r.Field(Of Integer)("productgroup") Into Group
    For Each grp In query
        Dim x As New DataTable
        x = grp.Group.CopyToDataTable()
        ds.Tables.Add(x)
    Next 
```

现在这是可行的，除了我不确定如何选择特定列，就像我不想显示结果数据表中的所有列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:27:08.493

1.如何使用 LINQ 按产品组列分组

听起来您所要求的在技术上并不称为 LINQ 中的组。linq 中的分组意味着您从一列中获取值并以某种方式组合它们（SUM、Average），并为每个唯一标识符显示一条记录。在您的示例中，如果您想显示每组的平均价格，那么这将需要一个组，但从您的解释来看，您似乎只需要 3 个不同的选择语句，如下所示：

`From r in products where r.groupID = YourControlVariable select r.ProductName, r.ProductPrice`

其中 YourControlVariable 将是每个组 ID。此 LINQ 将为您提供您概述的三个表，然后您可以从那里调用`CopyToDataTable`LINQ 返回的函数并设置一个与该函数的输出相等的临时数据表。

2.如何从结果组中删除产品组列？

请参阅第 1 点的 linq，通过仅列出您要选择的列，您实际上将忽略任何未列出的列。

3.如何将每个组添加到单独的数据表中，然后将所有表添加到单个数据集中？

如果您知道您将使用的 groupID，这将相当简单地在循环中完成。您可以在循环内创建一个临时数据表并将其设置为包含第 1 点的 linq 结果。一旦获得结果，您就可以命名该表并将其添加到数据集中，一旦循环完成，您的临时数据表将是消失了，但您将能够在数据集中按名称引用它们。

4.假设有我不想在结果组中显示的列，我该如何隐藏它们？

请参阅第 1/2 点。

编辑：

正如您所描述的问题，我认为在 LINQ 中使用 group by 会使其变得不必要地复杂，因为如果您想提取单个属性，则必须处理匿名类型。这是一个简短的片段，它获取所有不同的组 id，然后使用 LINQ 提取每种类型的所有产品，将它们添加到表中，然后将命名表添加到数据集中。您可以删除名称部分或将其更改为您想要的任何内容，这并不重要。

```
Dim ds As New DataSet
Dim groupIDs = From r in bookedorders Select r.Item("productgroup") Distinct
for each r in groupIDs
    Dim query = From t in bookedorders Where t.Item("productgroup") = r select t.Item("ProductName"), t.Item("ProductPrice")
    If query IsNot Nothing AndAlso query.Any Then
        Dim tempDT as new DataTable
        tempDT.Merge(query.CopyToDataTable)
        tempDt.Name = "ProductID" & r
        ds.Tables.Add(tempDT)
    End IF
Next 
```

我已经稍微更改了您的示例以使用 Item 集合，但这仅在数据表时才有效`bookedorders`。

编辑#2：

想了想，上面的例子还是会给你一个匿名类型的集合。所以为了解决这个问题，你可以改变

```
Dim query = From t in bookedorders Where t.Item("productgroup") = r select t.Item("ProductName"), t.Item("ProductPrice") 
```

线看起来像：

```
Dim query = From t in bookedorders Where t.Item("productgroup") = r select t 
```

然后在您的 if 语句中将如下所示：

```
Dim tempDT as new DataTable
tempDT.Merge(query.CopyToDataTable)
tempDT.Columns.Remove("GroupID")
tempDt.Name = "ProductID" & r
ds.Tables.Add(tempDT) 
```

同样，这仅在您通过数据表进行 LINQing 并获得`Enumerable(Of DataRow)`结果时才有效，这是可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T20:26:56.720

我不习惯 VB.NET 语法，它应该是这样的（我不保证 100% 代码实际编译）：

```
Dim query = From r In bookedorders _
            Group By key = r.Field(Of Integer)("productgroup") Into Group _
            Select New With { _
              .key, _
              .Rows = From o In Group _
                      Select New With { _
                          .Name = r.Field(Of String)("productname") } } 
```

如需进一步检查，您可以查看以下内容：

[http://msdn.microsoft.com/en-us/vstudio/bb737908](http://msdn.microsoft.com/en-us/vstudio/bb737908)

尤其是*GroupBy - 嵌套*示例，您可以在其中查看如何在组内进行投影。

如果您解决并在我的答案中发现一些编译错误，请告诉我是什么，我会修复它。

# sql - 基于两个条件过滤列时如何编写Postgres查询？

> ID：12901578
> 
> 赞同：2
> 
> 时间：2012-10-15T18:15:47.840
> 
> 标签：sql, postgresql, nested-queries

我`widgets`在 Postgres 中有下表：

![在此处输入图像描述](../Images/fc64108efb7585ec968b7264ca99f9d8.png)

（该屏幕截图是它的粗略 Excel 表示。）我正在尝试编写一个将返回我的 SQL 查询：

1.  `widgets`表示具有今天最早加载时间的小部件的记录；或者
2.  如果`widgets`今天没有加载，则加载时间最早的那个（对于整个表）

因此，使用上图：

*   查询将首先尝试返回今天首先加载的小部件（如果存在这样的小部件）。在这种情况下，今天仅加载了 id 为 3 和 5003094（分别）的小部件。在这两个中，`widget_id = 3`比另一个更早加载，因此这是查询将返回的记录。
*   但是，如果我们假设这两个小部件不在表中，而且今天没有加载任何小部件，那么查询将返回`widget_id = 1`，因为它是在 2010 年加载的。

这是我对查询的初步尝试：

```
SELECT
    MIN(w.loaded_date_time)
FROM
    widgets w
WHERE
    w.loaded_date_time >= now()
    OR
    1=1 
```

但是，我马上就知道这在语法上是不正确的。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:38:10.507

### 共一排

```
SELECT *
FROM   widgets
ORDER  BY loaded_date_time < now()::date, loaded_date_time
LIMIT  1; 
```

..首先有效地对今天的时间戳（+不存在的未来）进行排序，因为`boolean`表达式是排序的`FALSE`-> `TRUE`-> `NULL`。

如果*未来的日期*是可能的：

```
ORDER  BY
       (loaded_date_time::date = now()::date) DESC NULLS LAST
      ,loaded_date_time 
```

`NULLS LAST`仅当可以为 NULL 时才相关`loaded_date_time`，这应该是不允许的。在这种情况下删除该子句。

### 每个小部件一行

```
SELECT DISTINCT ON (widget_id)
       widget_id, loaded_date_time
FROM   widgets
ORDER  BY
       widget_id
      ,(loaded_date_time::date = now()::date) DESC
      ,loaded_date_time; 
```

### 为什么以及如何工作？

*   关于`DISTINCT ON`：
    *   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)
*   在`ORDER BY`子句中......
    首先`widget_id`，显然 - 必须匹配`DISTINCT`子句。
    ...然后首先对“今天”的记录进行排序。如果没有，其他记录会自动上移。
    ...最后，较早的记录首先排序。

    因此，所需的行首先出现并由 挑选`DISTINCT`。一口气全部搞定。

*   如果将表达式重写`(loaded_date_time::date = now()::date)`为

    ```
    (loaded_date_time >= now()::date AND
     loaded_date_time < (now()::date + 1))   -- note: < not: <= 
    ```

.. 在 . 上使用普通索引可能会更快`loaded_date_time`。因为，如果等号两边都有表达式，那么你肯定根本不能使用普通索引。你应该有一个关于 widget_id 的索引（显然），可能还有一个索引`loaded_date_time`：

```
CREATE INDEX foo_idx ON widgets (loaded_date_time) 
```

多列索引可能会快一点：

```
CREATE INDEX foo_idx ON widgets (widget_id, loaded_date_time); 
```

用 测试[`EXPLAIN ANLYZE`](http://www.postgresql.org/docs/current/interactive/sql-explain.html)，是否被使用。应该是的，我没有测试。如果没有，那就没有意义了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:20:16.250

将您的查询分成两个查询和`union`它们，使用 a`not exists()`来处理逻辑：

```
select * from widget
where <primary criteria>
union
select * from widget
where <secondary criteria>
and not exists (
    select * from widget
    where <primary criteria>
) 
```

像这样编码也很容易阅读和维护，特别是如果您稍后添加另一种选择类别的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T18:30:36.967

这是一个排名功能的应用程序。关键是顺序：

```
select w.*
from (select w.*,
             row_number() over (partition by widget_id
                                order by isToday, datetime desc) as seqnum
      from (select w.*,
                   (case when cast(widget_loaded_date_time as date) = cast(now() as date)
                         then 0
                         else 1
                    end) as isToday
            from widgets w
           ) w
     ) w
where seqnum = 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T18:32:20.337

[SQL小提琴](http://www.sqlfiddle.com/#!1/25ba4/1)

```
select w.id, w.name, w.loaded_date_time
from (
    select min(loaded_date_time) loaded_date_time
    from widgets
    where loaded_date_time::date = current_date
    union
    select min(loaded_date_time) loaded_date_time
    from widgets
    order by loaded_date_time desc
    limit 1
) s inner join widgets w on w.loaded_date_time = s.loaded_date_time 
```

# vector - Openlayers - 矢量图层 - 使用样式属性组合隐藏/显示功能

> ID：12901583
> 
> 赞同：1
> 
> 时间：2012-10-15T18:16:21.030
> 
> 标签：vector, filter, openlayers, geoserver

我正在尝试根据它们的属性过滤矢量图层特征。我有 4 个复选框：type_1、type_2、shape_1 和 shape_2 请注意，我使用 Extjs 作为界面。

一开始我可以将类型属性设置样式过滤为“无”或“”……像这样：

```
switch (f) { 
case 'type_1': 
if(checked) 
filter('show_type_1'); 
else filter ('hide_type_1); 

case 'type_2': 
if(checked) 
filter('show_type_2'); 
else filter ('hide_type_2); 

} 

function filter(value) 
{ 
 switch (value){ 

case 'hide_type_1': 
for (i=0;i<=features.length;i++) 
if(features[i].attributes.type == 'first') 
features[i].style = 'none'; 
layer.redraw(); 

case 'show_type_1': 
for (i=0;i<=features.length;i++) 
if(features[i].attributes.type == 'first') 
features[i].style = ''; 
layer.redraw(); 

case 'hide_type_2': 
for (i=0;i<=features.length;i++) 
if(features[i].attributes.type == 'second') 
features[i].style = 'none'; 
layer.redraw(); 

case 'show_type_2': 
for (i=0;i<=features.length;i++) 
if(features[i].attributes.type == 'second') 
features[i].style = ''; 
layer.redraw(); 

} 
} 
```

以上所有功能都很好，如果我取消选中 type_1，所有 type_1 功能都会消失。那么如果我取消选中 type_2，所有 type_2 功能都会消失。然后如果我再次检查 type_1，所有 type_1 功能都会出现，而 type_2 功能将保持隐藏状态。

问题是当我尝试对 shape 属性执行相同操作时，添加：

```
case 'shape_1': 
if(checked) 
filter('show_shape_1'); 
else filter ('hide_shape_1); 
```

到第一个功能。

和：

```
case 'hide_shape_1': 
for (i=0;i<=features.length;i++) 
if(features[i].attributes.shape == 'first') 
features[i].style = 'none'; 
layer.redraw(); 

case 'show_shape_1': 
for (i=0;i<=features.length;i++) 
if(features[i].attributes.shape == 'first') 
features[i].style = ''; 
layer.redraw(); 
```

到第二个。

当我取消选中 shape_1 复选框时它可以工作。所有 shape_1 功能都隐藏了。但是如果选中它来显示它们，所有的特性都会显示，即使是 type_1 和 type_2 我没有选中和隐藏它们！

我不明白为什么会这样。因为如果我处理一个属性（在我的情况下为类型），它工作正常，但在尝试将类型过滤与另一个特征属性（形状）结合时失败。

我希望我的解释清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:46:50.113

您为什么不尝试结合使用 Vector 图层的样式特征和规则，看起来您自己尝试做的事情已经可以完成，您创建 2 种样式，一种标准，一种临时，这是您通常的悬停功能时使用。

```
 var halte_temp_styled = new OpenLayers.Style({
      fillColor: "red",
      fontColor: "#000000",
      fontWeight: "normal",
      pointRadius: 8,
      fontSize: "11px",
      strokeColor: "#ff9933",
      strokeWidth: 2,
      pointerEvents: "all",
      fillOpacity: 0.3,
      label : "${name}",
      labelOutlineColor: "white",
      labelAlign: "rb",
      labelOutlineWidth: 8,
      cursor: "pointer",
      fontFamily: "sans-serif"
   });

  var halte_styled = new OpenLayers.Style({
      fillColor: "red",
      fillOpacity: 0.6,
      fontColor: "#000000",
      fontWeight: "light",
      pointRadius: 8,
      fontSize: "11px",
      strokeColor: "#ff9963",
      strokeWidth: 3,
      pointerEvents: "all",
      labelOutlineColor: "white",
      labelOutlineWidth: 8,
      labelAlign: "cm",
      cursor: "pointer",
      fontFamily: "sans-serif"
   });

   var halte_style = new OpenLayers.StyleMap({
      'default' : halte_styled,
      'temporary' : halte_temp_styled
   }); 
```

然后添加规则，谁将影响（默认）样式的行为，在下面的示例中，它将遵循图层的比例并相应地采取行动。在这个例子中，一旦你缩放到 18 级，就会显示特征的标签，否则它们只会在悬停时显示。

```
/* Style the halte layer acc to res */
   halte_style.styles['default'].addRules([
         new OpenLayers.Rule({
         maxScaleDenominator: 215000,
         minScaleDenominator: 27000,
         symbolizer: {
            fillColor: "red",
            fillOpacity: 0.6,
            fontColor: "#000000",
            fontWeight: "light",
            pointRadius: 4,
            fontSize: "11px",
            strokeColor: "#ff9963",
            strokeWidth: 2,
            pointerEvents: "all",
            labelOutlineColor: "white",
            labelOutlineWidth: 8,
            labelAlign: "cm",
            cursor: "pointer",
            fontFamily: "sans-serif"

            }
         }),

      new OpenLayers.Rule({
         maxScaleDenominator: 27000,
         minScaleDenominator: 3384,
         symbolizer: {
            fillColor: "red",
            fillOpacity: 0.6,
            fontColor: "#000000",
            fontWeight: "light",
            pointRadius: 10,
            fontSize: "11px",
            strokeColor: "#ff9963",
            strokeWidth: 3,
            pointerEvents: "all",
            labelOutlineColor: "white",
            labelOutlineWidth: 8,
            labelAlign: "cm",
            cursor: "pointer",
            fontFamily: "sans-serif"

            }
         }),
      new OpenLayers.Rule({
         maxScaleDenominator: 3384,
         minScaleDenominator: 1,
         symbolizer: {
            fillColor: "red",
            fillOpacity: 0.6,
            fontColor: "#000000",
            fontWeight: "light",
            pointRadius: 10,
            fontSize: "11px",
            strokeColor: "#ff9963",
            strokeWidth: 3,
            label : "${name}",
            labelAlign: "cm",
            //labelAlign: "cm",
            pointerEvents: "all",
            labelOutlineColor: "white",
            labelOutlineWidth: 8,
            cursor: "pointer",
            fontFamily: "sans-serif"
            }
         })
      ]); 
```

在有问题的矢量图层中，您设置了这个样式图：

```
 styleMap: halte_style, 
```

我不确定这是否对你有特别的帮助，但是当我读到这篇文章时，我记得我之前通过在矢量图层上使用样式/规则来解决这个问题。希望这至少可以替代几天盯着同一个问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:47:13.917

试试这个：

```
// set style
    features[i].style = null;
// or
    features[i].style = {display:'none'};

// redraw feature
layer.drawFeature(features[i]); 
```

# java - 在类层次结构中进行铸造

> ID：12901584
> 
> 赞同：-1
> 
> 时间：2012-10-15T18:16:22.113
> 
> 标签：java

`Object aThing = new Integer(25);`

根据我的教科书，表达式将(type )`(Integer) aThing`引用的对象的类型转换为 type 。**只有当所引用的对象****实际上是 type 时**，转换操作才会成功；如果没有，a将被抛出`aThing``Object``Integer`**`aThing``Integer`**`ClassCastException`

我不明白粗体字在说什么。你能简要说明一下吗？

什么是“被引用的对象`aThing`”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:17:39.657

如果你有

```
Object aThing = "foo"; 
```

那么`aThing`就真的是一个`String`。在那种情况下，`(Integer) aThing`会抛出一个`ClassCastException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:19:30.837

```
Object aThing = new Integer(25); 
```

现在因为`aThing`引用指向一个`Integer object`. 因此，您可以将该引用转换为`Integer`. 因为`integer`引用可以指向一个`Integer`对象。

```
Integer intRef = (Integer)aThing; // Ok, `aThing` points to an Integer object 
```

但是，当您尝试将该引用类型转换为`String`引用时，您会得到`ClassCastException`，因为 String 不是`Integer`，因此不能包含对`Integer`对象的引用。

```
// Exception. A String reference cannot point to `Integer` object
String strRef = (String)aThing; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:24:33.257

请注意，从一种类型转换为另一种类型仅在转换表示法是继承树的一部分时才有效。

所以`Object x = (String)"X"`是有效的，因为“X”是一个字符串对象`(Object)"X"`也是有效 `Object y = (Integer) 1`的。（对象）1 是有效的。

但是，您不能将一种类型转换为完全不同的类型。

`Object x = (Integer)"X"`它无效，因为“X”不是类型`Integer`；

另一件要注意的是你这将工作。

```
class A extends B implements IInterface.
class C implements IInterface
A a = new A() ;

B b = (B)a; 
IInterface c = (IInterface)a ; 
```

以上是有效`A a`的类型`B`和对象`IInterface`。你不能做的是

```
C c = (C) a; 
```

A a 不是 C 类型，会抛出你得到的 ClassCastException 。

引用的对象`aThing` 将是您初始化它的对象。

```
String s = "Hello World" 
```

s 持有指向“Hello World”对象的指针/引用。

```
Person person = new Person(); 
```

person 持有对所创建对象的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T18:26:06.347

考虑这段代码：

```
FooClass foo = new FooClass();
Object aThing = foo;
Integer anInt = (Integer) aThing; 
```

此代码将抛出 a`ClassCastException`因为原始对象`foo`不是`Integer`对象。现在考虑这段代码：

```
Integer int1 = new Integer(1);
Object aThing = int1;
Integer int2 = (Integer) aThing; 
```

这段代码可以工作，因为原始对象`int1`是一个`Integer`，所以如果它被存储为更通用的类型，就像`Object`它可以被强制转换回原始类一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T19:23:25.027

> # 我不明白粗体字在说什么。你能简要说明一下吗？

运行时的 Java 对象包含标识该对象属于哪个类的信息。当您尝试将对象转换为不同类型时，JRE 将首先验证您实际上是在兼容对象之间进行转换。粗体句子在一般意义上也不完全正确。它还允许您对该对象的任何超类或该对象实现的任何接口进行强制转换和反对。

关于可转换为超类的这一特殊部分是为什么您可以将您的存储`Integer`为`Object`反正 -`Object`隐含地是所有类的超类。

这种行为是您可以编写正确语句的原因，例如：

```
Object aThing = new Integer(25); // cast Integer to superclass (Object) 
```

请记住，Java 中的对象包含确定对象确切身份的运行时信息。向下转换为对象不会删除此信息，这就是为什么 java 不会让您摆脱类似以下内容的原因：

```
Object aThing = new Integer(25); // cast Integer to superclass (Object)
String something = (String) aThing; // cast Integer (stored as object) to String 
```

该语句将编译，但你会`ClassCastException`在运行时得到一个，因为`Integer`它与`String`.

> # 什么是“被引用的对象`aThing`”？

行后：

```
Object aThing = new Integer(25); // cast Integer to superclass (Object) 
```

`aThing`是对`Integer`存储值 25 的引用。再次记住，对象类标识在运行时维护，并且在强制转换时不会丢失。

# reflection - IMetaDataImport 和 WinRT 运行时类接口

> ID：12901585
> 
> 赞同：2
> 
> 时间：2012-10-15T18:16:23.440
> 
> 标签：reflection, windows-runtime, idl

在 Visual Studio 2012 附带的 MS IDL 版本中，对 WinRT 的支持添加了这样的结构：

```
 [activatable(Windows.Networking.Sockets.IControlChannelTriggerFactory,
                     0x06020000)]
        [threading(mta)]
        [marshaling_behavior(agile)]
        [version(0x06020000)]
        runtimeclass ControlChannelTrigger
        {
            [default] interface Windows.Networking.Sockets.IControlChannelTrigger;
            interface Windows.Foundation.IClosable;
        } 
```

我正在使用 IMetaDataImport 分析 winmd 文件中的所有类型。如何找出“运行时类”实现了哪些接口，以及默认接口是哪个接口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:51:39.620

> 如何找出“运行时类”实现的接口？

Windows 元数据文件由一个关系数据库组成：它基本上是一组相互关联的表。[您可以在ECMA 335](http://www.ecma-international.org/publications/standards/Ecma-335.htm)的 Partition II 中找到逻辑模式的规范。

每个运行时类和接口都由元数据数据库的 TypeDef 表中的一行表示。“类型 X 实现接口 I 和 J”关系由 InterfaceImpl 表中的行表示，该表将类型定义映射到它们实现的接口。

事实证明，由于多种原因，计算由一个类型实现的接口集是相当困难的。假设我们要计算由 XAML[`Button`](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.button)控件实现的接口集。以下所有步骤都是必需的：

1.  查找并加载定义`Button`. 你可以通过调用来做到这一点[`RoGetMetaDataFile`](http://msdn.microsoft.com/en-us/library/br229856.aspx)。

2.  查找该`Button`类型的元数据标记。这实际上是该类型的唯一标识符。你可以通过调用得到这个[`FindTypeDefByName`](http://msdn.microsoft.com/en-us/library/ms233290.aspx)。

3.  我们需要计算`Button`类型直接实现的所有接口。这可以通过调用来完成[`EnumInterfaceImpls`](http://msdn.microsoft.com/en-us/library/ms232502.aspx)。

4.  `Button`类型派生自类型[`ButtonBase`](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.primitives.buttonbase)。这是由 TypeDef 表的*extends*字段指定的，您可以通过调用[`GetTypeDefProps`](http://msdn.microsoft.com/en-us/library/ms230143.aspx). 我们需要计算它实现的所有接口。然后我们需要在类层次结构上一直做同样的事情——因为`Button`，这是很多类型： `ContentControl`、`Control`、`FrameworkElement`、`UIElement`和`DependencyObject`。

    请注意，其中一些类型可能在另一个元数据文件中定义。在这种情况下，InterfaceImpl 将通过 TypeRef 令牌而不是 TypeDef 令牌来引用接口。TypeRef 表包含对类型的引用。您需要解析该引用，加载正确的元数据文件，并在该元数据文件中找到目标类型。这可以使用我们已经为`Button`.

5.  每个接口也可能实现其他接口，因此对于我们迄今为止在列表中积累的每个接口，我们需要获取该接口*所需*的接口集。这是通过递归获取每个接口的 InterfaceImpls 来完成的。

    请注意，就像基类的情况一样，实现的接口也可以在另一个元数据文件中定义。因此，您还需要使用与基类相同的过程来解决这些问题。

    对于一个额外的挑战，Windows 运行时支持通用接口。如果一个接口实现了一个实例化的通用接口，则该实例化接口将由 TypeSpec 表中的一行表示，并伴随着 blob 流中的签名。您将需要解析签名。执行此操作的过程相当复杂，但数据格式完全在 ECMA 335 中指定。

此时，您将拥有该类型实现的全套接口。可以通过检查与`Button`类型直接关联的 InterfaceImpl 找到默认接口：默认接口将[`DefaultAttribute`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.foundation.metadata.defaultattribute)应用到它（请注意，自定义属性应用于 InterfaceImpl，而不是接口类型）。您可以使用 枚举每个 InterfaceImpl 的自定义属性[`EnumCustomAttributes`](http://msdn.microsoft.com/en-us/library/ms231454.aspx)。

因此，这是一项非常繁重的工作，并且需要大量代码。我发现该`IMetaDataImport`界面及其朋友处理起来相当不友好，因此我为 Boost 许可的[CxxReflect 库](http://cxxreflect.codeplex.com/)编写了自己的界面。CxxReflect 元数据库提供比签名更好的类型检查，`IMetaDataImport`并包含解析签名所需的逻辑。它没有那么快`IMetaDataImport`，但它正在接近。

CxxReflect 反射库包含用于跨元数据文件边界解析类型以及与 Windows 运行时集成的大部分逻辑。它仍处于 alpha 质量阶段，但它对于常见任务非常有效（它目前正在进行一些重构，以使类型解析逻辑可重用于反射以外的用途）。

您当然可以自己实现逻辑来执行此操作，但这非常乏味。在 CxxReflect 的开发过程中，我发现了另一个我没有考虑的极端情况，不得不进行大量的返工。规范是完整的，但事情应该如何工作并不总是很明显。

# java - 在 OpenGL ES 2.0 中读取纹理

> ID：12901586
> 
> 赞同：1
> 
> 时间：2012-10-15T18:16:24.593
> 
> 标签：java, android, graphics, 3d, opengl-es-2.0

我目前正在将场景的深度渲染为纹理。我想在任何给定的点 x，y 上任意获取纹理的值。我尝试使用`glReadPixels`，但它似乎不起作用，而且它似乎也不是最佳解决方案。如果可能的话，我正在考虑一种直接从内存中读取纹理数据的方法。除了在帧缓冲区上实际渲染具有深度纹理的四边形之外，对于任何给定的 x，y 获取该值的任何想法？

顺便说一句，我在带有 OpenGL ES 2.0 的 Android 上使用 Java。

```
GLES20.glGetIntegerv(GLES20.GL_FRAMEBUFFER_BINDING, mainBufferHandle, 0);
if(mainBufferHandle[0] < 0) mainBufferHandle[0] = 0;

GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, depthBufferHandle[0]);

GLES20.glFramebufferTexture2D(GLES20.GL_FRAMEBUFFER, GLES20.GL_DEPTH_ATTACHMENT, GLES20.GL_TEXTURE_2D, depthTextureHandle[0], 0);

GLES20.glReadPixels(x, y, 1, 1, GLES20.GL_RGB, GLES20.GL_FLOAT, floatBuffer); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:02:24.130

我想我只是要将深度渲染到 FBO 并`glReadPixel`用于获取深度值。

# c# - response.redirect 不适用于文件夹

> ID：12901588
> 
> 赞同：0
> 
> 时间：2012-10-15T18:16:37.700
> 
> 标签：c#, asp.net, url, login, response.redirect

response.redirect 不起作用。我正在使用 Visual Studios .net 它在没有文件夹的情况下工作，但我正在做角色和权限，所以我需要为此创建文件夹。为什么我的网址不起作用？在目录中时无法显示要显示的页面。

```
 protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
    {

        if (Membership.ValidateUser(Login1.UserName, Login1.Password) == true)
        {
            Login1.Visible = true;
            Session["user"] = User.Identity.Name;
            FormsAuthentication.RedirectFromLoginPage(Login1.UserName, true);
           // Response.Redirect("");
            if (Roles.IsUserInRole(Login1.UserName, "CEO"))
            {
                Response.Redirect("~/CEOPages/CEO.aspx");
            }
            else if (Roles.IsUserInRole(Login1.UserName, "IALO"))
            {
                Response.Redirect("~/IALOPages/IALO.aspx");
            }
            else if (Roles.IsUserInRole(Login1.UserName, "Staff"))
            {
                Response.Redirect("~/Staff Pages/Staff.aspx");
            }

        }
        else
        {
            Response.Write("Invalid Login");
        }
    } 
```

这是文件夹配置文件

```
 <configuration>
     <system.web>
         <authorization>
              <deny users="*" />
              <allow roles="CEO" />
              <deny roles="Staff" />
              <deny roles="IALO" />
          </authorization>
      </system.web>
  </configuration> 
```

尝试访问文件夹中的页面时出现错误。我将它们从文件夹中删除，并使用基于这些页面上的凭据的表单身份验证拒绝访问。如果它们在目录中，您如何显示页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:54:52.703

您需要在 web.config 中指定每个文件夹；

```
 <location path="IALOPages">
    <system.web>
      <authorization>
          <deny users="*" />
          <allow roles="CEO" />
      </authorization>
    </system.web>
  </location> 
```

这应该可以解决您的问题，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:22:36.410

**允许**条目应该在拒绝条目之前，**如下**所示：

```
<configuration>
     <system.web>
         <authorization>
              <allow roles="CEO" />
              <deny roles="Staff" />
              <deny roles="IALO" />
              <deny users="*" />
          </authorization>
      </system.web>
</configuration> 
```

来自 MSDN：“在运行时，授权模块迭代允许和拒绝元素，从最本地的配置文件开始，直到授权模块找到适合特定用户帐户的第一个访问规则。然后，授权模块授予或根据找到的第一个访问规则是允许规则还是拒绝规则，拒绝访问 URL 资源。”

[http://msdn.microsoft.com/en-us/library/8d82143t%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/8d82143t%28v=vs.80%29.aspx)

# jquery - jquery ajax 和管道

> ID：12901592
> 
> 赞同：0
> 
> 时间：2012-10-15T18:17:00.653
> 
> 标签：jquery, pipe

我有以下代码：

```
(saveData())
.pipe(function(data){return sendhandovermail($('#editperson_id').val());})
.pipe(function(data){setHistory(_eciId,'4','12',true);})
.pipe(function(data){window.location.href = 'input.cfm?m=4&id=45';})
.fail(function(data){$('##msgDialogDetail').html("Error while saving. Please contact bla@blup.com");}); 
```

代码有效（没有错误）但是...有人告诉我 .pipe() 方法将一个接一个地执行所有 ajax 调用。如果 A 返回，B 将开始。虽然当我运行它时，情况并非如此。我是不是理解错了，或者我应该如何编写这个链让它一个接一个地执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-11T06:07:49.520

我应该如何编写这个链让它一个接一个地执行？

您应该在 pre 管道中返回一个承诺，后者将根据 pre 管道返回的承诺运行。

像这样：

```
var posting = $.post('/step1', data1)
            .pipe(function () {
                return $.post('/step2', data2);
            })
            .pipe(function () {
                return $.post('/step3', data3);
            }); 
```

我们应该在 1.8+ jQuery 中使用`then`函数而不是。`pipe`

# node.js - 按 id 删除记录？

> ID：12901593
> 
> 赞同：21
> 
> 时间：2012-10-15T18:17:01.007
> 
> 标签：node.js, mongodb, node-mongodb-native

为什么我不能通过 _id 删除记录？

代码：

```
db.collection('posts', function(err, collection) {
   collection.remove({_id: '4d512b45cc9374271b00000f'});
}); 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-15T18:39:02.053

您需要将`_id`值作为 ObjectID 传递，而不是字符串：

```
var mongodb = require('mongodb');

db.collection('posts', function(err, collection) {
   collection.deleteOne({_id: new mongodb.ObjectID('4d512b45cc9374271b00000f')});
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-14T07:31:19.073

MongoDb 现在已将 remove 方法标记为已弃用。它已被两个单独的方法取代：deleteOne 和 deleteMany。

这是他们相关的入门指南：[https ://docs.mongodb.org/getting-started/node/remove/](https://docs.mongodb.org/getting-started/node/remove/)

这是一个快速示例：

```
var mongodb = require('mongodb');

db.collection('posts', function(err, collection) {
   collection.deleteOne({_id: new mongodb.ObjectID('4d512b45cc9374271b00000f')}, function(err, results) {
       if (err){
         console.log("failed");
         throw err;
       }
       console.log("success");
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-19T06:21:25.950

使用 TypeScript，您可以使用导入来实现它，而不需要整个库

```
import { ObjectID } from 'mongodb'   

db.collection('posts', function(err, collection) {
   collection.deleteOne({_id: new ObjectID('4d512b45cc9374271b00000f')});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-07T10:43:43.397

我认为我们必须要求 mongodb 作为 const 并将其与 mongodb 一起使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-09T16:45:58.193

首先包括mongodb

```
var mongodb = require("mongodb"); 
```

您必须包含来自 mongodb 的 ObjectID

```
var ObjectID = require('mongodb').ObjectID; 
```

然后使用

```
var delete_id = request.params.id;//your id

 collection.deleteOne({_id: new mongodb.ObjectID(delete_id.toString())}); 
```

1000% 有效...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-03T15:41:03.517

我最近偶然发现了这个问题，我发现解决方法是：

```
const mongodb = require('mongodb');
const ObjectID = require('mongodb').ObjectID;
databaseName.collectionName.deleteOne({_id: new mongodb.ObjectID(id)} , (err)=>{
   if (err) throw err;
   console.log('Deleted'+id);
}); 
```

# iphone - iOS：动态添加多行 UILabel

> ID：12901599
> 
> 赞同：1
> 
> 时间：2012-10-15T18:17:30.837
> 
> 标签：iphone, ios, uilabel, autolayout

我在动态添加多行 UILabel 时遇到问题。这是我得到的结果：

![在此处输入图像描述](../Images/4a8e995ad8220eb021c3e5221476a43c.png)

我希望“摘要”框中的标签自然包裹。这是我用来添加标签的代码：

```
-(void)setSummary{
    summaryContentLabel = [[UILabel alloc] init];
    summaryContentLabel.numberOfLines=0;
    summaryContentLabel.lineBreakMode=NSLineBreakByWordWrapping;
    summaryContentLabel.text=self.summary;
    summaryContentLabel.font=[UIFont fontWithName:@"Helvetica" size:13.0];

    [summaryView addSubview:summaryContentLabel];
    [summaryContentLabel  setTranslatesAutoresizingMaskIntoConstraints:NO];
    NSDictionary *views = NSDictionaryOfVariableBindings(summaryView,summaryContentLabel ,summaryLabel);
    [summaryView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[summaryLabel]-5-[summaryContentLabel(==100)]-5-|" options:nil metrics:nil views:views]];

} 
```

你会注意到这本书的标题完全按照我想要的方式包装。这是在 IB 中完成的。不幸的是，我必须在代码中添加这个标签。自动布局也是一项要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:40:38.323

弄清楚了。我需要为标签的宽度添加一个额外的约束，如下所示：

```
[summaryView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[summaryContentLabel]-|" options:nil metrics:nil views:views]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:57:26.593

可能是我迟到了，但我找到了解决方案。您需要为 summaryContentLabel 显式设置 preferredMaxLayoutWidth。例如：

```
summaryContentLabel.preferredMaxLayoutWidth = 200; 
```

而且我注意到，如果您通过 xib 执行相同的视图布局，则界面构建器将设置 preferredMaxLayoutWidth 具有正确的值。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-15T19:51:15.070

将此代码用于多行标签：-

-(void)setSummary {

```
summaryContentLabel = [[UILabel alloc] init];
summaryContentLabel.numberOfLines=0;
summaryContentLabel.textAlignment   = UITextAlignmentLeft;
summaryContentLabel.font=[UIFont fontWithName:@"Helvetica" size:13.0];
[summaryView addSubview:summaryContentLabel];

CGSize size = [self.summary sizeWithFont:[UIFont fontWithName:@"Helvetica" size:13.0] constrainedToSize:CGSizeMake(240, 99999) lineBreakMode:UILineBreakModeWordWrap];
summaryContentLabel.frame=CGRectMake(72, 22, 240, size.height);  //set the frame according to your need
summaryContentLabel.text=self.summary; 
```

}

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-10-15T18:27:56.623

看起来您实际上并没有为您的 UILabel 设置帧大小。你总是可以这样做：

```
CGRectMake(10, 10, 280, 9999); 
```

对于高度，然后确保它适合而不是设置为 9999 的高度：

```
[summaryContentLabel sizeToFit]; 
```

# python - Python 日志时间窗口

> ID：12901600
> 
> 赞同：0
> 
> 时间：2012-10-15T18:17:31.013
> 
> 标签：python, logging, time

我被要求编辑一个脚本，允许您从日志文件中打印出时间窗口的信息。我很难弄清楚解决此问题的最佳方法是什么。日志在日志开头的时间如下：

```
[11-Oct-2012 07:41:22.205608 
```

我需要能够按小时、分钟或秒来缩小范围。我不在乎日月或年。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:42:31.207

```
import datetime

datetime.datetime.strptime("11-Oct-2012 07:41:22.205608", "%d-%b-%Y %H:%M:%S.%f") 
```

将是这样做的方法。

> [http://docs.python.org/library/datetime.html#datetime.datetime.strptime](http://docs.python.org/library/datetime.html#datetime.datetime.strptime) - 返回一个date_string对应的日期时间，根据格式解析...

# ruby-on-rails - 将对象添加到关联集合但尚未保存

> ID：12901610
> 
> 赞同：7
> 
> 时间：2012-10-15T18:18:18.543
> 
> 标签：ruby-on-rails

假设我有一对模型：

```
class Club < ActiveRecord:Base
  has_many :members, autosave: true
end

class Member < ActiveRecord:Base
  belongs_to :club
end 
```

我希望能够在不保留新成员的情况下向俱乐部添加一些新成员，直到我保存俱乐部。我怎么能这样做？

使用`<<`将会员添加到俱乐部不能按我的意愿工作，因为这会自动保存会员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-26T22:29:33.220

根据[has_many 文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)，“铲子”方法`collection<<(object, …)`

> 通过将对象的外键设置为集合的主键，将一个或多个对象添加到集合中。**请注意，此操作会立即触发更新 SQL，而无需等待父对象上的保存或更新调用**，除非父对象是新记录。

如果您想构建一个新记录而不将其保存到数据库中，请使用`collection.build`.

> 返回集合类型的一个或多个新对象，这些对象已使用属性实例化并通过外键链接到此对象，但尚未保存。

使用 Club 和 Member 作为示例模型：

```
club = Club.find(params[:id])
club.members.build(member_attributes) # member is not saved
club.save # saves club and members 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:24:38.883

为成员模型创建一个名为“temporar_id”的属性。

成员以带有俱乐部 id 的临时 ID 开头，但尚未与俱乐部关联。

`club_id`是`nil`直到`accept_members`运行。

```
class Club < ActiveRecord:Base
  has_many :members, autosave: true

  # Accepts all new member, just as an example
  # Used like this in controller
  # @club = Club.find(params[:id])
  # @club.accept_members
  def accept_members
    User.find_all_by_temporary(true).each do |new_member|
      new_member.tempoary = false
      new_member.club_id = id 
    end
  end
end

class Member < ActiveRecord:Base
  belongs_to :temporary
  belongs_to :club
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T18:32:49.647

那这个呢

```
def add_members
  @club = Club.find(params[:id])
  @members = #From_where_ever_you_want
  @members.each do |member|
  @club << member
end
end 
```

直到你打电话

```
@club.save 
```

新成员只存储在内存中。

# android - 无法在音轨对象上暂停：android

> ID：12901612
> 
> 赞同：3
> 
> 时间：2012-10-15T18:18:31.803
> 
> 标签：android, multithreading, audiotrack

在我的应用程序中，我已经成功录制了音频，现在我正在使用以下功能播放它：

```
 public void playfile()
{
    System.out.println("Play Pressed");     
     speechLength = (int)(file.length()/2);
     speech2 = new short[speechLength];
     try
     {
        // Create a DataInputStream to read the audio data back from the saved file.
        InputStream is = new FileInputStream(file);
        BufferedInputStream bis = new BufferedInputStream(is);
        DataInputStream dis = new DataInputStream(bis);

        int i = 0;              
        while(i <  speechLength)
        {
            speech2[i] = dis.readShort();
            i++;
        }

        // Close the input streams.
        is.close();
        bis.close();
        dis.close();  

        // Create a new AudioTrack object using the same parameters as the AudioRecord
        // object used to create the file.
        audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC,
                16000, 
                AudioFormat.CHANNEL_OUT_MONO,
                AudioFormat.ENCODING_PCM_16BIT, 
                bufferSizeAT, 
                AudioTrack.MODE_STREAM);   

        //Start playback

        runner.start();
        //Updating Progress Bar on UI Thread
        //updateProgressBar();
     } //main try
    catch (Throwable t){} 
}
 Thread runner= new Thread (){
        public void run()
        {

              // Do stuff.
            audioTrack.play();
            audioTrack.setStereoVolume(50, 50);
            audioTrack.write(speech2, 0, speech2.length);

        }
    }; 
```

但是，当单击按钮时，我想暂停正在播放的录音，它会暂停，但在恢复时没有任何反应。以下是相同的代码：

```
 final Button p3_button=(Button)myView.findViewById(R.id.btn_play);
    p3_button.setOnClickListener(new View.OnClickListener()
    {
        @Override
        public void onClick(View view)
        {       
            if(p3_button.getText().equals("Pause"))
            {

                p3_button.setText("Resume");
                audioTrack.pause();

            }
            else if(p3_button.getText().equals("Resume"))
            {
                p3_button.setText("Pause");

                audioTrack.play();

            }
            else
            {
                p3_button.setText("Pause");
                count = 0;
                isPlayPressed = true;
                playing = true;
                playfile();
            }
        }}); 
```

任何帮助都会很棒。谷歌上对这个没有太多帮助。我几乎完成了我的应用程序，但现在在最后一刻我遇到了这个问题..请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T17:39:26.587

我发现问题是 track.write 被阻塞了。这是一个现在似乎可以工作的 WavTrack 类：

```
package org.this_voice.zhongguomozhou;

import android.content.Context;
import android.media.AudioFormat;
import android.media.AudioManager;
import android.media.AudioTrack;
import android.os.Environment;
import java.io.InputStream;
import java.io.IOException;
import java.lang.Thread;

public class WavTrack {
/**
Make sure you set the sample rate, stereo/mono and encoding
correctly for your audio files.
**/

public static final boolean STOPPED = true;
public AudioTrack at;
public Context mContext;
public int minBufferSize;
public byte[] music = null;
public int size = 0;
public int position = 0;
public InputStream is;
public boolean paused = false;

public WavTrack(Context context) {
    mContext = context;
    minBufferSize = AudioTrack.getMinBufferSize(16000,
        AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT);
    at = new AudioTrack(AudioManager.STREAM_MUSIC, 16000,
        AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT,
        minBufferSize, AudioTrack.MODE_STREAM);
    is = mContext.getResources().openRawResource(R.raw.test01);

    try{
        size = (int)is.available();
    } catch (IOException e) {
        e.printStackTrace();
    }

    at.play();

    new Thread (new Runnable(){
        public void run() {
            int i = 0;
            try{
                music = new byte[512];
                while(((i = is.read(music)) != -1) && !paused){
                    at.write(music, 0, i);
                    position += i;
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }).start();
}

public void pause(){
    is.mark(position);
    paused = true;
    at.pause();
}

public void stop(){
    at.stop();
    at.release();
}

public void play() {
    paused = false;
    try {
        is.reset();
    } catch (IOException e) {
        e.printStackTrace();
    }
    at.play();

    new Thread (new Runnable(){
        public void run() {
            int i = 0;
            try{
                music = new byte[512];
                while(((i = is.read(music)) != -1) && !paused){
                    at.write(music, 0, i);
                    position += i;
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }).start();
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T18:09:01.523

您不能使用比较字符串`==`

将这样的行更改`p3_button.getText()=="Pause"`为`p3_button.getText().equals("Pause")`.

试试这是否能解决您的问题。

# sql - 具有多个表的 SQL 选择语句

> ID：12901614
> 
> 赞同：14
> 
> 时间：2012-10-15T18:18:37.670
> 
> 标签：sql

给定以下两个表：

```
Person table 
id (pk) 
first 
middle 
last 
age

Address table 
id(pk) 
person_id (fk person.id) 
street 
city 
state 
zip 
```

如何创建返回邮政编码为 97229 的人员的所有信息的 SQL 语句？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-15T18:21:34.860

```
Select * from people p, address a where  p.id = a.person_id and a.zip='97229'; 
```

或者您必须**尝试**使用`JOIN`​​哪种方法更有效、更好，因为 Gordon Linoff 在下面的评论中还说您需要学习这一点。

```
SELECT p.*, a.street, a.city FROM persons AS p
JOIN address AS a ON p.id = a.person_id
WHERE a.zip = '97299'; 
```

这 `p.*`意味着它将显示 PERSONS 表的所有列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T18:21:02.093

您需要连接两个表：

```
select p.id, p.first, p.middle, p.last, p.age,
       a.id as address_id, a.street, a.city, a.state, a.zip
from Person p inner join Address a on p.id = a.person_id
where a.zip = '97229'; 
```

这将从两个表中选择所有列。`select`您当然可以通过在子句中选择不同的列来限制它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T18:20:51.850

像那样：

```
SELECT p.*, a.street, a.city FROM persons AS p
JOIN address AS a ON p.id = a.person_id
WHERE a.zip = '97299' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T18:52:30.280

首先从人员表中选择所有记录，然后将所有这些记录与另一个表“地址”连接起来……现在你已经记录了所有在地址表中有地址的人……所以最后按邮政编码过滤你的记录。

```
 select * from Person as P inner join Address as A on 
    P.id = A.person_id Where A.zip='97229' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T14:44:01.050

```
select P.*,
A.Street,
A.City,
A.State
from Preson P
inner join Address A on P.id=A.Person_id
where A.Zip=97229
Order by A.Street,A.City,A.State 
```

# java - 如何优化代码以始终使用对字符串的相同引用而不增加内存使用量？

> ID：12901620
> 
> 赞同：9
> 
> 时间：2012-10-15T18:18:46.793
> 
> 标签：java, string, optimization, memory-management

我正在开发一个有很多重复字符串的应用程序，我的任务是消除它们以减少内存使用。我的第一个想法是用来`String.intern`保证一个 String 的引用只会存在。它可以减少堆内存，但它增加了 PermGen 太多了；事实上，因为有很多字符串只声明一次，应用程序使用的内存总量实际上增加了。

在寻找其他想法后，我发现了这种方法：[https](https://stackoverflow.com/a/725822/1384913) ://stackoverflow.com/a/725822/1384913 。

它发生了与 String.intern 相同的事情：String 使用量减少了，但我保存的内存正在用于`WeakHashMap`和`WeakHashMap$Entry`类中。

有没有一种有效的方法来为每个不花费与我正在恢复的内存量相同的内存量的字符串维护一个引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:07:40.703

我找到了一个替代方案`WeakHashMap`：`WeakHashSet`Eclipse JDT 库提供的。它具有与 相同的行为`WeakHashMap`，但它使用的内存更少。此外，您只需要调用该方法`add`，如果它尚不存在，它将在集合中添加字符串，否则返回现有的。

我唯一不喜欢的是它不使用泛型，这迫使开发人员强制转换对象。我的`intern`方法非常简单，如下所示：

声明`WeakHashSet`：

```
private static WeakHashSet stringPool = new WeakHashSet(30000); //30 thousand is the average number of Strings that the application keeps. 
```

和实习生方法：

```
public static String intern(String value) {
    if(value == null) {
        return null;
    }
    return (String) stringPool.add(value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:40:57.817

为什么不使用 StringBuilder/StringBuffer 类而不是 String。使用此类的实例，您始终可以使用具有不同值的相同实例。- 安库尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:57:11.487

在类似的情况下，我尽可能将字符串常量重构为枚举。这样，您将获得两个好处：

*   枚举实例是单例，所以你不会有内存问题
*   使用字符串时没有拼写错误。

缺点：

*   大量的工作，如果你没有足够的测试用例，犯错的可能性是无限**的**
*   有时这不是微不足道的，例如当您必须与第三方库交互时，您不能只编辑......
*   如果这些是运行时确定的，而不是编译时间，那简直是不行...

# qt - Qt 相当于 boost::shared_from_this？

> ID：12901621
> 
> 赞同：4
> 
> 时间：2012-10-15T18:18:47.887
> 
> 标签：qt, boost

我有一些派生自 boost::shared_from_this 的类 - 我如何在 Qt 中执行等价的？（不重新实现类似的 shared_from_this；我更喜欢无继承解决方案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:27:42.583

如果你的意思是能够`QSharedPointer`从`this`- 有这样一个[功能请求](https://bugreports.qt-project.org/browse/QTBUG-7287)，但据我所知，它仍然没有在官方 Qt 版本中实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-26T05:10:58.950

`QEnableSharedFromThis`最近被添加到 Qt 中，并将在 5.4 版本中发布。

*   补丁：[https ://codereview.qt-project.org/#/c/60346/](https://codereview.qt-project.org/#/c/60346/)
*   文档：[http ://doc-snapshot.qt-project.org/qt5-5.4/qenablesharedfromthis.html](http://doc-snapshot.qt-project.org/qt5-5.4/qenablesharedfromthis.html)

# jquery - jquery用鼠标滚轮滚动div

> ID：12901625
> 
> 赞同：2
> 
> 时间：2012-10-15T18:19:13.290
> 
> 标签：jquery, scroll

我正在使用中提供的示例：http: [//jsfiddle.net/9R4hZ/40/](http://jsfiddle.net/9R4hZ/40/)

让 div 用鼠标滚轮滚动。它工作正常，但我想同时移动 2 个 div，而不是一个一个地移动它们。

可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:36:20.000

要在 div B 滚动时更新 div A 的滚动位置，请监听 onscroll 事件并更新另一个 div 的滚动位置。

```
$('#a').scroll(function(){
    $('#b').scrollTop($(this).scrollTop());
}); 
```

# postgresql - 如何使 SchemaCrawler 在 Windows 中工作？

> ID：12901627
> 
> 赞同：3
> 
> 时间：2012-10-15T18:19:24.647
> 
> 标签：postgresql, database-diagram, schemacrawler

如何使 SchemaCrawler 在 Windows 中工作？

GraphViz 已安装。现在我正在尝试使用命令行制作整个 PostgreSQL 数据库的图表：

```
sc.cmd -command graph -outputformat png \
    -outputfile=graph.png -database=my_database \
    -user=the_user -password=my_password -infolevel=standard 
```

但我收到一个`lib.jakarta-httpcore-nio-4.0-alpha4.jar`找不到的错误：

> Fehler: Hauptklasse lib.jakarta-httpcore-nio-4.0-alpha4.jar konnte nicht gefunden oder geladen werden

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:09:14.257

除了数据库驱动程序之外，SchemaCrawler 没有直接链接到 JDK 之外的 jar。尝试下载最新的[SchemaCrawler for PostgreSQL](http://sourceforge.net/projects/schemacrawler/files/SchemaCrawler%20-%20PostgreSQL/9.1/) zip 文件，它与开源 PostgreSQL 驱动程序捆绑在一起。该下载中包含以下 jar：jakarta-httpcore-nio-4.0-alpha4.jar 和 postgresql-9.1-901-1.jdbc4.jar。

要尝试的另一件事是不使用 sc.cmd - 即替换：

```
sc.cmd ..... 
```

和

```
java -classpath lib/* schemacrawler.tools.postgresql.Main ..... 
```

Sualeh Fatehi，SchemaCrawler

# ios - 仅纵向模式-iOS

> ID：12901628
> 
> 赞同：3
> 
> 时间：2012-10-15T18:19:27.477
> 
> 标签：ios, ios5, ios6, uiinterfaceorientation

我有一个应用程序，专为纵向设计。但是我不知道如何限制只使用纵向模式，一旦用户倒置或陆地模式，我不希望我的屏幕布局相应地改变。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T18:23:29.493

可以通过覆盖此方法在 App Summary（以及 rootviewcontroller（无论是 Nav 控制器、TabBar 控制器等）中指定）：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

![在此处输入图像描述](../Images/81039847bd5151890c8b60d95d582e84.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-02T01:59:42.307

这是您可以在 XCode 8.1 中进行更改的位置的更新视图

[![设置应用方向](../Images/cb4734b2407024d8cc1bc65c3effb488.png)](https://i.stack.imgur.com/q2Gja.png) 请注意，您在项目导航器顶部的最左侧选择了该项目（应用程序摘要）。然后，在右侧，您需要确保在顶部选择“常规”，然后根据需要向下滚动，您将看到“设备方向”设置。

[![代码 8.1](../Images/298c0a56a8aae5ed5b11327bba36fcef.png)](https://i.stack.imgur.com/C9uDE.png)

# c# - 为什么不可能为“类型实例”创建扩展

> ID：12901629
> 
> 赞同：1
> 
> 时间：2012-10-15T18:19:29.903
> 
> 标签：c#, .net

我想知道为什么不能为“类型实例”创建扩展方法。例如，如果提供了此功能，则可以“扩展”静态类。

例子：

```
public static class A
{
  public static void Method()
  {
  }
}

public static class AExtensions
{
  public static void Method2(this static A a)
  {
      // something
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:50:55.670

当然，真正的答案是：开发这样一个功能的成本远远超过了潜在的好处。

但是，请考虑一下。您实际上将从该功能中获得什么？您已经可以合法地完美地做到这一点，这实际上是在“扩展”静态类。

```
// 3rd party library
public static class A {
  public static void Method() {
  }
}

// my source code
public static class AExtensions {
  public static void Method2() {
  }
} 
```

如果你认为通过扩展类`A`你会以某种方式访问​​它的所有`internal`成员`private`，那么你将无法做到这一点，它会破坏封装。您也不能使用实例扩展方法来做到这一点。

# java - Android 在神秘的 d() 方法中崩溃

> ID：12901634
> 
> 赞同：2
> 
> 时间：2012-10-15T18:19:52.750
> 
> 标签：java, android, obfuscation, generated-code

收到了 Play 商店崩溃报告（万岁）。堆栈跟踪列出了发生在`MyActivity#d()`、 内部的NPE `MyAtivity#onCreate()`。这是编译器生成的方法吗？我肯定没写！

```
Caused by: java.lang.NullPointerException
at com.example.MyActivity.d(Unknown Source)
at com.example.MyActivity.onCreate(Unknown Source)
at android.app.Activity.performCreate(Activity.java:5008)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:25:00.277

在构建时，您可能确实运行了 pro guard（Google 混淆）。查找一个名为 mapping.txt 的文件，它将为您提供 d() 方法的真实名称。

mapping.txt：列出原始和混淆的类、方法和字段名称之间的映射。当您收到来自发布版本的错误报告时，此文件很重要，因为它将混淆的堆栈跟踪转换回原始类、方法和成员名称。

[在这里](http://developer.android.com/tools/help/proguard.html)查看更多信息。

# asp.net-mvc-4 - Visual Studio 2012 Web Deploy Package 不包含 sql 脚本文件？

> ID：12901635
> 
> 赞同：0
> 
> 时间：2012-10-15T18:19:57.937
> 
> 标签：asp.net-mvc-4, visual-studio-2012

我正在使用此[链接](http://msdn.microsoft.com/en-us/library/dd465323.aspx)为 MVC 4 站点创建一个 Web 部署包。一切都很好，但我无法在 web 部署包中找到 *.sql 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:00:50.110

没有 .sql 文件。在 VS2012 中，网络发布现在支持增量数据库模式发布。这是通过创建数据库模型来实现的。该模型是一个 .dacpac 文件。当您使用包选项创建发布配置文件时，将创建 .dacpac 并将其放置在包的根目录中。如果您打开 .zip 文件，您将看到一个名为 lie dbDacFx***.dacpac 的文件，它是您的数据库模型。

# php - 使用有序的方法数组在 foreach 循环中保留 PHP $this

> ID：12901636
> 
> 赞同：2
> 
> 时间：2012-10-15T18:20:00.817
> 
> 标签：php, oop, class, multidimensional-array, scope

我有以下 PHP 类，其中包含许多其他以应用程序为中心的函数，`my_new_iterative_function()`但是当我进入（我*需要*`foreach`的）范围时，由于上下文而变得无效。传递的正确方法是什么，以便它在and内部有效。`$this`*`$this``method_foo``method_bar`*

 *注意：这是一个更复杂问题的一部分，`$fallback_order`函数按默认顺序执行，但`my_new_iterative_function()`需要接受一个数组来控制执行顺序（这是`$order_functions`数组的目的。

```
class Foo {
    public function my_new_iterative_function(array $fallback_order = array('method_foo', 'method_bar')) {

        $order_functions = array(
            'method_foo' => function(){
                // need to access $this
            },
            'method_bar' => function(){
                // need to access $this
            },
        );

        foreach ( $fallback_order as $index => $this_fallback ) {
            $order_functions[$this_fallback]();
        }
    }
}
$instance_of_foo->my_new_iterative_function(); 
$instance_of_foo->my_new_iterative_function([ 'method_bar', 'method_foo', ]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:23:24.447

你不能拥有`$this`这些功能，因为它们不属于 foo 类。它们只是 foo 类调用的匿名函数。如果您需要从匿名函数中访问您的类的成员，您应该`$this`像这样传递给它：

```
 $order_functions = array(
        'method_foo' => function($obj){
            // need to access $this using $obj instead
        },
        'method_bar' => function($obj){
            // need to access $this using $obj instead
        },
    );

    foreach ( $fallback_order as $index => $this_fallback ) {
        $order_functions[$this_fallback]($this);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:25:36.457

最简单的答案是`$this`作为参数传入：

`$order_functions[$this_fallback]($this);`

然后你需要：

```
$order_functions = array(
            'method_foo' => function($myObj){
                // use $myObj $this
            },
            'method_bar' => function($myObj){
                // user $myObj instead of $this
            },
        ); 
```

无论你做什么，你都不能`$this`像在类实例中那样实际使用这些函数，因为它们不是类实例的一部分。因此，您需要确保对您需要从这些函数中的实例使用的所有属性或函数具有某种公共访问器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:26:34.627

我看到的唯一方法是传递`$this`给函数

```
$order_functions = array(
    'method_foo' => function(Foo $foo){
        $foo->somePublicFunction();
    },
);

$order_functions[$this_fallback]($this); 
```

但是你只能在 Foo 实例上调用公共函数......不知道这是否符合你的需要。*

# javascript - Javascript 获取输入文本或文本区域中插入符号的绝对位置（以 px 为单位）

> ID：12901637
> 
> 赞同：2
> 
> 时间：2012-10-15T18:20:04.273
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在尝试开发一个自动完成功能，它实际上将自己定位在输入文本和/或文本区域中的插入符号位置下方，而不是仅在元素下方。有点像大多数 IDE。

我目前正在使用 Twitter bootstrap typeahead，我正在寻求修改它。如果您有想法，我准备了一个 JS BIN：http: [//jsbin.com/welcome/34949/edit](http://jsbin.com/welcome/34949/edit) 基本语法：

```
var autocomplete_values=["hello","dude","rubber","ducky"];

      $(".autocomplete").typeahead({
        source:autocomplete_values
      }); 
```

**问题** 如何获取输入文本和/或文本区域中插入符号的绝对位置（以像素为单位）？

我完全不知道从哪里开始。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:43:17.330

使用绝对定位和虚拟元素，您可以非常准确地完成此操作。

我解决这个问题的方法是使用一个包含输入当前值的虚拟（不可见）内联元素。确保此元素具有完全相同的字体设置，我们可以轻松测量其宽度，然后我们可以使用它来抵消自动完成值。

输入字段和自动完成元素都绝对定位在相对定位的容器中，因此它们重叠。我给自动完成一个低于输入字段的 z-index 并使输入的背景透明，因此自动完成不会干扰单击输入字段。

我使用 text-indent 将自动完成文本定位在右侧，但您也可以使用 left 属性来实际移动元素。

## HTML

```
<div id="container">
    <input type="text" id="foo">
    <div id="ac"></div>
    <span id="dummy"></span>
</div> 
```

## CSS

```
#container { position: relative; }

#foo, #ac, #dummy {
    font-family: monospace;
    font-size: 16px;
}

#foo, #ac {
    position: absolute;
    top: 0;
    left: 0;
}

#foo {
    z-index: 2;
    border: solid 1px black;   
    background: transparent;
}

#ac {   
    top: 1px;
    left: 2px;
    z-index: 1;
    color: #999;
}

#dummy { visibility: hidden; } 
```

## JavaScript

（使用 jQuery，但应该明白这一点）

```
$('#foo').keyup(function(event) {
    //get autocomplete value
    var autoComplete = dummyAutoComplete($(this).val());

    //if a value is found, show it in #ac and adjust position
    if (autoComplete !== null) {
        //add in value and make visible
        $('#ac').html(autoComplete).removeClass('hidden');

        //dummy gets the same value as the input, to measure its width          
        $('#dummy').html($(this).val());

        //add autocomplete text-indent based on dummy width + some adjustmet
        $('#ac').css('text-indent', $('#dummy').outerWidth() + 'px');       
    } else {
        //hide autocomplete                
        $('#ac').html('').addClass('hidden');
    }
); 
```

我有[一个](http://jsfiddle.net/mich/ErYHg/)在 jsfiddle 上运行的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T20:22:39.267

我将创建一个隐藏的 inline-block 元素，其内容反映了文本框的内容。

伪：

```
myTextBox.onkeyup = function(){
    myInlineContainer.innerHTML = this.value
} 
```

一旦你完成了这项工作，你只需进行一些测量和一些数学运算，就可以将智能感知弹出框准确定位在文本框上你想要的位置。

例如，您可以通过根据输入元素的宽度修改内联元素宽度来获得智能感知框的 offsetleft：

```
intellisenceLeft = (myInlineContainer.offsetWidth % myTextBox.offsetWidth); 
```

获得顶峰可能会更难一些，但没有什么是破解不了的。

# jquery - 如何为 multiDatesPicker 启用时间

> ID：12901638
> 
> 赞同：0
> 
> 时间：2012-10-15T18:20:06.690
> 
> 标签：jquery, datepicker

[我使用来自http://multidatespickr.sourceforge.net/](http://multidatespickr.sourceforge.net/)的多日期选择器来构建应用程序，它运行良好。我目前可以选择多个日期，它们最终会出现在这样的文本字段中：

2012-10-16,2012-10-17,2012-10-24,2012-10-26,2012-10-27

我需要随时间做多日期选择器，这样我才能得到这样的结果：

2012-10-16 13:00:00,2012-10-17 21:30:00,2012-10-24 06:45:00,2012-10-26 08:23:00,2012-10-27 11 :00:00

我似乎可以找到可以为多日期选择器或其他允许日期和时间的插件打开时间的方法。

这是我对 multiDatesPicker 的 jquery，但 timeformat 似乎没有为我启用时间

```
$(function() {
$('#simpliest-usage').multiDatesPicker({
    dateFormat: "yy-mm-dd",
    timeFormat: 'hh:mm'  // time format here

});
}); 
```

html

```
<input type="text" id="simpliest-usage" name="eDates"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:24:54.827

multiDatesPicker 使用 jQuery UI datepicker 小部件，它只处理日期，而不是时间。所以 multiDatesPicker 有同样的限制。

[在http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)上有一个第三方时间选择器小部件。它不会自动将这些功能添加到 datepicker 小部件，因此您需要修改 multiDatesPicker 才能使用它。也许只是做一个全局替换`datepicker`to`datetimepicker`就可以了。

# concurrency - CUDA：使用 OpenMP 运行程序

> ID：12901640
> 
> 赞同：1
> 
> 时间：2012-10-15T18:20:14.460
> 
> 标签：concurrency, cuda, openmp

是否可以使用 CUDA 或其他方式在 GPU 上使用 openMP 运行程序？

我有一个并发程序，但我的电脑只有 2 个内核。

我需要在 8 个或更多内核上测试程序。

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T23:50:41.650

有一种类似于 OpenMP 的[OpenACC ，尽管它当然适应了 CPU+GPU 非常不同的不对称情况。](http://en.wikipedia.org/wiki/OpenACC)

但是，如果您的目的是测试 OpenMP 代码，那么答案肯定是“否”。您不能采用相同的程序，并且无论如何它都不会以相同的方式执行。

您最好的选择可能是使用 OMP_NUM_THREADS=8 执行 OpenMP 程序，即使只有 2 个内核可用，它也会启动 8 个线程。但是，某些方面（例如锁竞争）仍然与真正的 8 核系统不同。

# wpf - 在 EventTrigger 中设置 VerticalAlignment

> ID：12901644
> 
> 赞同：1
> 
> 时间：2012-10-15T18:20:38.873
> 
> 标签：wpf, xaml, vertical-alignment, eventtrigger

我将如何设置一个似乎没有与之关联的动画类型的属性？具体来说，我想在激活`VerticalAlignment`an 时更改控件。`EventTrigger`这是我当前的状态/失败的尝试：

```
 <EventTrigger RoutedEvent="my:MenuHelper.MenuIsReversed">
          <BeginStoryboard>
              <Storyboard>
                  <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetProperty="VerticalAlignment" Storyboard.TargetName="Bouncy_Bar">
                    <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="Top"/>
                  </ObjectAnimationUsingKeyFrames>
              </Storyboard>
          </BeginStoryboard>
   </EventTrigger> 
```

这会产生此异常：

> 无法使用“System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames”为“System.Windows.Controls.Border”上的“VerticalAlignment”属性设置动画。有关详细信息，请参阅内部异常。

内部异常：

> 应用于“VerticalAlignment”属性的动画计算出“Top”的当前值，该值不是该属性的有效值。

我不确定我是否对`VerticalAlignment`类型进行了不正确的限定，或者这是否只是设置非典型动画属性的错误方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:24:31.007

对不起，我自己的问题的快速回答。我发现我没有`XAML`很好地指定目标类型。这是工作结果：

```
 <EventTrigger RoutedEvent="pill:PillMenuHelper.MenuIsReversed">
          <BeginStoryboard>
              <Storyboard>
                  <DoubleAnimation Storyboard.TargetName="Bouncy_Bar" Storyboard.TargetProperty="RenderTransform.Children[1].ScaleY" To="-1" Duration="0:0:.002"/>
                  <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetProperty="VerticalAlignment" Storyboard.TargetName="Bouncy_Bar">
                    <DiscreteObjectKeyFrame KeyTime="0:0:0">
                        <DiscreteObjectKeyFrame.Value>
                            <VerticalAlignment>Top</VerticalAlignment>
                        </DiscreteObjectKeyFrame.Value>
                    </DiscreteObjectKeyFrame>
                  </ObjectAnimationUsingKeyFrames>
              </Storyboard>
          </BeginStoryboard>
   </EventTrigger> 
```

# c++ - 重置课程的最优雅方式

> ID：12901664
> 
> 赞同：0
> 
> 时间：2012-10-15T18:21:51.500
> 
> 标签：c++

对于内部具有子类或结构的类，重置它的最优雅的方法是什么？

```
class attributes {
public:
   std::string address;
   short       port;
   std::vector< std::string > data;
   struct Foo foo;
}; 
```

什么是循环中最优雅的，默认运算符 = ou 创建一个记忆 0 结构的重置方法`memset(...)`？

```
 attributes obj, originalStateToResetObj;
   for(;;)
      //do stuff with obj
      obj.address = "172.0.0.1"
      //etc
      //reseting obj using operator=
      obj = originalStateToResetObj;
      // OR using Reset?
      obj.Reset();
   } 
```

其他优雅的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:25:23.503

这完全取决于手头的课程。一般来说，正确的做法是从头开始创建一个新的或使用类的复制构造函数，但如果它使用昂贵的资源，例如打开 IMAP 连接（想到这个例子，因为 IMAP 服务器通常限制每个允许的连接数用户非常严格），那么这可能会产生非常不希望的副作用。

如果一个类没有零参数的构造函数，那么将它“重置”到某个默认状态就没有什么意义了，所以你也需要考虑这一点。

如果确实需要保留有意义的中间状态，请考虑 Memento 设计模式。

# c# - 鼠标悬停时的 C# 点亮按钮

> ID：12901668
> 
> 赞同：1
> 
> 时间：2012-10-15T18:22:22.797
> 
> 标签：c#, winforms, button, hover

你知道当你在winForms中添加一个按钮，然后调试，鼠标悬停在按钮灯上。我猜是悬停效果。我想对图片框做同样的事情。我该怎么做？

我想要的一件事是因为我添加了一个图片框并导入了一个按钮的 .png 图像。我正在尝试制作自己的个性化按钮。有没有更智能/其他方式来制作按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:24:10.730

您可以挂钩到 Control 对象上的 MouseHover 事件来执行此操作。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousehover.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousehover.aspx)

# ios - 使用链接到视频的单元格创建表格视图

> ID：12901672
> 
> 赞同：0
> 
> 时间：2012-10-15T18:22:39.127
> 
> 标签：ios, xcode, ios5, ios6

我想创建具有披露按钮的表格视图单元格，按下该按钮时将链接到本地​​视频，但我遇到问题，当我单击披露按钮时屏幕变黑，我正在使用弧。我该怎么办？

这是我的示例代码..我做错了什么

这是我的头文件

```
 #import <UIKit/UIKit.h>
  #import <MediaPlayer/MediaPlayer.h>

 @interface BIDVideosViewController : UIViewController

 <UITableViewDelegate, UITableViewDataSource>

 @property (nonatomic,strong) NSArray *tableList;

 @end 
```

这是我的 .m 文件

```
 #import "BIDVideosViewController.h"

 @interface BIDVideosViewController ()
 {
 MPMoviePlayerController *moviePlayer;

 }

 @end

 @implementation BIDVideosViewController

 @synthesize tableList;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
 {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
// Custom initialization
 }
 return self;
 }

- (void)viewDidLoad
{
[super viewDidLoad];
UITableView *table = [[UITableView alloc]initWithFrame:self.view.bounds];
[table setDelegate:self];
[table setDataSource:self];
[self.view addSubview:table];
 NSArray *array = [[NSArray alloc] initWithObjects:@"Gangan",@"SwimGood", nil];
self.tableList = array;
 // Do any additional setup after loading the view.
}

 - (void)didReceiveMemoryWarning
 {
 [super didReceiveMemoryWarning];
 // Dispose of any resources that can be recreated.
 }

 -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
  return [tableList count];
  }
 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
   {
 static NSString *DisclosureButtonIdentifier = @"DisclosurebutotonIdentifier";
  UITableViewCell *cell = [tableView       dequeueReusableCellWithIdentifier:DisclosureButtonIdentifier];
  if (cell == nil)
  {
   cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault       reuseIdentifier:DisclosureButtonIdentifier];
   }
  NSInteger row = [indexPath row];
   NSString *rowString = [tableList objectAtIndex:row];
  cell.textLabel.text = rowString;
  cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
  return cell;
  }

  -(void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:   (NSIndexPath *)indexPath
  {
  NSString *thePath = [[NSBundle mainBundle] pathForResource:@"Gangan" ofType:@"mp4"];
  NSLog(@"path is ...%@", thePath);
  NSURL *theurl = [NSURL fileURLWithPath:thePath];
  MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:theurl];
  [moviePlayer.view setFrame:CGRectMake(0, 0, 320, 460)];
  [self.view addSubview:moviePlayer.view];
  [moviePlayer prepareToPlay];
  [moviePlayer play]; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T19:23:04.450

您没有 UITableView 或所需的`numberOfSectionsInTableView:`方法`tableView:numberOfRowsInSection:`。

尝试添加

```
UITableView *table = [[UITableView alloc] initWithFrame:self.view.bounds];
[table setDelegate:self];
[table setDataSource:self];
[self.view addSubview:table]; 
```

到你的`viewDidLoad`功能。

查看[委托](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)和[数据源](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)文档以了解正确实现 UITableView 所需的方法（以及可用的方法）。这样做很好，因为它会为您处理所有事情（绘图和设置）。您所要做的就是给它赋值，它会在加载数据时自动绘制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:39:12.550

你可以试试这样

```
NSString *thePath=[[NSBundle mainBundle] pathForResource:@"animation" ofType:@"mov"];
NSLog(@" path is...%@",thePath);
NSURL *theurl=[NSURL fileURLWithPath:thePath]; 
```

MPMoviePlayerController *moviePlayer =[[MPMoviePlayerController alloc] initWithContentURL:theurl];

```
[moviePlayer.view setFrame:CGRectMake(0, 0, 320, 460)];  
[self.view addSubview: moviePlayer.view];
//[moviePlayer setFullscreen:YES animated:NO];
[moviePlayer prepareToPlay];
[moviePlayer play]; 
```

它对我有用，希望对你也有用

# string - 使用带有正则表达式的 findstr 来搜索字符串的各个部分

> ID：12901675
> 
> 赞同：0
> 
> 时间：2012-10-15T18:22:43.980
> 
> 标签：string, batch-file, expression, findstr

我创建了循环遍历每一行的代码，`files.txt`并识别文件是还是`car`，并将此信息存储到. 这是通过使用命令并搜索 和 的列表来完成的。本质上代码的设计方式，它会取第一行，看看它是否可以找到字符串（如果是输出到），如果不是，它将搜索字符串（如果找到字符串，则输出to )，如果在 car.txt 或 中找不到该字符串，则将文本输出到`boat``neither``SendType.txt``findstr``boat.txt``car.txt``files.txt``car.txt``car``SendType.txt``boat.txt``boat.txt``boat``SendType.txt``boat.txt``neither``SendType.txt`

现在代码搜索整个字符串行。每个字符串都类似于`11111_2222-22_2010-09-09_10-24-20.zip`（`11111`=ID、`2222-22`=model、`2010-09-09`=date、`10-24-20`=transaction ID）。

我想替换我当前的 findstr 行，它搜索整行，以搜索除日期部分之外的整个字符串。我在下面附上了我的代码以供参考，以及正在输入的文件的一些示例。提前致谢！

```
@echo off
FOR /F %%a in (files.txt) do (
findstr %%a car.txt
if errorlevel 1 (
findstr %%a boat.txt
    if errorlevel 1 (
    echo neither >>SendType.txt
) else (
    echo boat >>SendType.txt
)
) else (
    echo car >>SendType.txt
)
) 
```

* * *

```
car.txt
11111_2222-22_2010-09-09_10-24-20.zip
11112_2222-11_2011-11-09_10-24-25.zip 
```

* * *

```
boat.txt
11122_1111-22_2012-04-09_11-29-56.zip
11144_3333-11_2011-12-22_06-29-66.zip 
```

* * *

```
files.txt
11122_1111-22_2000-01-01_11-29-56.zip
11144_3333-11_2000-01-01_06-29-66.zip
11155_1212-12_2000-01-01_11-19-69.zip
11111_2222-22_2000-01-01_10-24-20.zip
11112_2222-11_2000-01-01_10-24-25.zip
12345_2233-12_2000-01-01_07-27-44.zip 
```

* * *

期望的输出：

```
SendType.txt
boat
boat
neither
car
car
neither 
```

* * *

**更新 10/15 下午 3:00** 目前使用 dbenham 的代码和解析技术的方法如下：

```
@echo off    
>SendType.txt (  
for /f "tokens=1,2,3,4 delims=_" %%a in (filenames.txt) do (    
findstr /c:"%%a_%%b_%%d" sneakernet.txt >nul && (echo sneakernet) || (      
findstr /c:"%%a_%%b_%%d" devmed.txt >nul && (echo devmed) || echo tanto   
       ) 
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T20:50:34.963

如果 ID 的格式固定`_`为日期前的两个，那么解决方案很简单：只需使用 FOR /F 来解析值。

我喜欢使用`&&`and`||`而不是测试 ERRORLEVEL。此外，您不需要 FINDSTR 的输出，因此您可以重定向到 nul。您应该验证字符串是否从行首开始匹配。最后，您只需要重定向一次，因此您可以覆盖而不是追加 - 更容易重复测试，因为无需在开始前删除。

```
@echo off
>SendType.txt (
  for /f "tokens=1,2 delims=_" %%a in (files.txt) do (
    findstr /bc:"%%a_%%b" car.txt >nul && (echo car) || (
      findstr /bc:"%%a_%%b" boat.txt >nul && (echo boat) || echo neither
    )
  )
) 
```

如果 ID 的格式（可能还有长度）可以变化，但日期部分的格式（长度）是恒定的，那么您可以使用子字符串：

```
@echo off
setlocal enableDelayedExpansion
>SendType.txt (
  for /f "delims=" %%a in (files.txt) do (
    set "ln=%%a"
    findstr /bc:"!ln:~0,-23!" car.txt >nul && (echo car) || (
      findstr /bc:"!ln:~0,-23!" boat.txt >nul && (echo boat) || echo neither
    )
  )
) 
```

如果 ID 和日期格式都不是恒定的，那么我会通过剥离日期部分来更改boat.txt 和 car.txt 的内容。然后您可以使用 FINDSTR`/G`选项。[由于FINDSTR](https://stackoverflow.com/q/8921253/1012053)`/I`中的错​​误，需要该选项。

```
car.txt
11111_2222-22
11112_2222-11 
```

* * *

```
boat.txt
11122_1111-22
11144_3333-11 
```

* * *

```
@echo off
setlocal enableDelayedExpansion
>SendType.txt (
  for /f "delims=" %%a in (files.txt) do (
    echo %%a|findstr /blig:car.txt >nul && (echo car) || (
      echo %%a|findstr /blig:boat.txt >nul && (echo boat) || echo neither
    )
  )
) 
```

**更新的答案**

现在我了解了要求，这应该可以解决问题。我基本上在我的原始答案中使用了第一个代码的变体，并且我已经切换到使用正则表达式。通过替换正则表达式中`[0-9]`的每个，可以使测试更加严格。`.`

```
@echo off
>SendType.txt (
  for /f "tokens=1,2,4 delims=_" %%a in (files.txt) do (
    findstr /brc:"%%a_%%b_....-..-.._%%c" car.txt >nul && (echo car) || (
      findstr /brc:"%%a_%%b_....-..-.._%%c" boat.txt >nul && (echo boat) || echo neither
    )
  )
) 
```

# c# - 从中继器内提交文本框

> ID：12901683
> 
> 赞同：0
> 
> 时间：2012-10-15T18:23:13.427
> 
> 标签：c#, asp.net, ajax

我想做一些简单的事情。我在转发器项目中有一个文本框，允许人们向项目添加注释。我的代码不起作用，似乎根本没有发生任何事情。

ASPX：

```
 <asp:Repeater ID="rptList" runat="server" ViewStateMode="Enabled">
                            <HeaderTemplate></HeaderTemplate>

                            <ItemTemplate>

  <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                                        <ContentTemplate>
                                    <asp:TextBox ID="NoteTextBox" runat="server"></asp:TextBox>
   <asp:Button ID="SubmitNote" runat="server" Text="Button" OnClick="lnkClient_Click" CommandName="AddNote" CommandArgument='<%# Eval("UID")%>'/>                                       

    <asp:Label ID="ShowNotes" runat="server" Text='<%# getNotes(Eval("UID").ToString())%>'></asp:Label>
                                            </ContentTemplate>
</asp:UpdatePanel> 
```

CODEBEHIND - 这是点击时应该执行的内容。我用 Response.Write 替换了我的 SQL 代码：

```
public void lnkClient_Click(object sender, EventArgs e)
    {
        Button btn = (Button)(sender);
        string FID = btn.CommandArgument.ToString();            
        string note = ((TextBox)rptList.Items[0].FindControl("NoteTextBox")).Text;
        Response.Write(FID + " " + note);

    } 
```

更新：更改了一些设置，现在我遇到的唯一问题是客户端输入的文本没有传递给命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:44:37.613

试试这个

```
 protected void Repeater_OnItemCommand(object source, RepeaterCommandEventArgs e)
        {
            if (e.CommandName.Equals("AddNote"))
            {       
            string FID =e.CommandArgument.ToString();    
            TextBox txtNote=e.Item.FindControl("NoteTextBox") as TextBox;    
            string note=txtNote.Text; 
            Response.Write(FID + " " + note);
            }
    } 
```

并在标记

```
<asp:Repeater ID="rptList" runat="server" OnItemCommand="Repeater_OnItemCommand" ViewStateMode="Enabled"> 
```

# c++ - 使用 char* 作为 std::map 中的键，它是如何工作的

> ID：12901687
> 
> 赞同：7
> 
> 时间：2012-10-15T18:23:38.780
> 
> 标签：c++, map, stdmap, const-char

这个问题与[使用 char 作为 stdmap 中的键](https://stackoverflow.com/questions/4157687/using-char-as-a-key-in-stdmap)直接相关。

我了解传入的比较函数的作用以及为什么它需要`char *`类型作为键。但是，我不确定更新实际上是如何工作的。

我很好奇您正在更新密钥的情况。如何`std::map`知道如何比较 之间的相等性`const char *`，`cmp_str`只告诉 map 将键插入树的顺序。

我已经对代码进行了一些挖掘`stl_tree.h`（[从这里提取](http://www.sgi.com/tech/stl/download.html)），但找不到太多。我唯一的猜测是它进行了直接的内存比较。

我对下级`stl_tree`班级如何处理这种情况很感兴趣，或者如果它一直没有正确处理，那么什么情况下会中断？

**代码**

```
#include <map>
#include <iostream>
#include <cstring>

struct cmp_str
{
    bool operator()(char const *a, char const *b)
    {
        return std::strcmp(a, b) < 0;
    }
};

int main ( int argc, char ** argv )
{

    std::map<const char*, int, cmp_str> map;

    map["aa"]  = 1;
    map["ca"]  = 2;
    map["ea"]  = 3;
    map["ba"]  = 4;

    map["ba"]  = 5;
    map["bb"]  = 6;

    map["ba"]  = 7;

    std::map<const char*, int, cmp_str>::iterator it = map.begin();
    for (; it != map.end(); it++ )
    {
        std::cout << (*it).first << ": " << (*it).second << std::endl;
    }

    return 0;

} 
```

**输出**

```
aa: 1
ba: 7
bb: 6
ca: 2
ea: 3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T18:27:07.563

嗯，`cmp_str`可以用来查找相同的键。如果两者都`cmp_str::operator(x,y)`和`cmp_str::operator(y,x)`return `false`，你发现了一个重复的键。真的没有更多的东西了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T18:27:42.290

有序容器都使用等价类：两个值`a`，`b`如果一个都不小于另一个则被认为是等价的：`!(a < b) && !(b < a)`或者，如果您坚持使用二元谓词的表示法`!pred(a, b) && !pred(b, a)`。

请注意，您需要将指针保留在地图中：如果指针超出范围，您会得到奇怪的结果。当然，字符串文字在程序的整个生命周期内都保持有效。

# javascript - 有没有一种通用的方法来“关闭”一个下拉菜单（不是 .blur() ）？您可以使用一个巧妙的技巧来“关闭” <select>下拉菜单。$('#test').click(function(){ $('#test').hide(); setTimeout(function(){ $('#test').show(); },20); } ); 这似乎总是适用于 Windows 上的 Chrome 和 Firefox。IE 在我的实际代码中工作，但是当我在 IE 中测试 jsfiddle ID：12901688 赞同：7 时间：2012-10-15T18:23:43.833 标签：javascript, jquery, html, drop-down-menu 回答 #1 赞同：3 时间：2012-10-15T18:27:35.580 我还没有测试过，但我想，你可以 $('select').blur(); 或将注意力集中在其他事情上以关闭它 更新 - 哦，你去第一个评论者有小提琴 回答 #2 赞同：1 时间：2012-10-15T20:56:31.323 如果您将事件从 更改click为focus，它可能会有所帮助： $("#test").focus(function () { // Your original code // or: this.blur(); // just DON'T call this.focus() }); 回答 #3 赞同：1 时间：2012-10-15T18:46:38.947 select不是为此，但是您可以fake为select布局创建一些其他标记。 HTML 选项1 选项 2 选项 3 ​</p> JS $('#test').click(function() { $(this).toggleClass('open'); }).find('li').not(':first').on('hover',function() { $(this).parent().removeClass('open'); });​ CSS ul { list-style:none ; border : solid 1px Gray; width: 80px; height: 20px; overflow:hidden; cursor:pointer; } ul.open { height: 60px; } ​</p> 这是一个演示。您可以根据需要设置标记样式。 回答 #4 赞同：0 时间：2012-10-15T18:29:09.587 .blur()使用on怎么样click().. 不幸的是我现在不能全部测试它们.. $('select').click(function(){ $(this).blur(); }); 演示：http: //jsfiddle.net/vqA3M/7/</select>

# interface - IDL 静态接口

> ID：12901689
> 
> 赞同：3
> 
> 时间：2012-10-15T18:23:44.423
> 
> 标签：interface, windows-runtime, idl

对于 WinRT，IDL 现在支持如下结构：

```
[marshaling_behavior(agile)]
[threading(both)]
[activatable(0x06020000)]
[version(0x06020000)]
[static(Windows.Networking.Sockets.IDatagramSocketStatics, 0x06020000)]
runtimeclass DatagramSocket
{
    [default] interface Windows.Networking.Sockets.IDatagramSocket;
    interface Windows.Foundation.IClosable;
} 
```

我很好奇这个`static`属性。这是什么意思？它与正文中列出的接口有什么关系`runtimeclass`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T00:20:08.953

winrt 接口上的静态方法被实现为该类的类工厂之外的接口。

对于这种情况，您应该调用（省略了很多 winrt 开销）：

```
ComPtr<IDatagramSocketStatics> factory;
HRESULT hr = RoGetActivationFactory(<HSTRING for Windows.Networking.Sockets.DatagramSocket>, __iidof(IDatagramSocketStatics), &factory.GetAddressOf());
hr = factory->DatagramFactoryMethod(<Parameters>); 
```

正如我所提到的，这是伪代码，但应该足以了解如何调用静态方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T18:44:45.623

COM 不支持类的静态方法的概念，所有方法都必须是实例方法，因为接口方法是抽象的。该属性允许语言投影模拟方法的静态行为。特别是 DatagramSocket.GetEndpointPairsAsync() 重载。

值得注意的是，COM 也不支持重载，也可以通过属性解决。IDatagramSockeStatics 的方法有[overload] 属性，第二个重载的真名是GetEndpointPairsWithSortOptionsAsync()。

# mapreduce - 如何选择集群中的 map 和 reduce worker？

> ID：12901694
> 
> 赞同：1
> 
> 时间：2012-10-15T18:24:15.020
> 
> 标签：mapreduce

对于 mapreduce 作业，我们需要指定输入数据的分区（map 进程数 - M）和 reduce 进程数（R）。在[MapReduce 论文](http://www.usenix.org/event/osdi04/tech/full_papers/dean/dean.pdf)中是他们经常设置的示例：具有 2 000 个工作人员和 M = 200 000，R = 5 000 的集群。工作人员被标记为 map-worker 或 reduce-worker。我想知道集群中的这些工人是如何选择的。

这样做是为了选择固定数量的 map-workers 和固定数量的 reduce-workers？（然后必须将存储在reduce-workers节点中的数据发送到map-reduce worker）或者map阶段在集群中的每个节点上运行，然后选择任何数量的节点作为reduce-workers？还是以其他方式完成？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:56:51.113

Map-Worker(Mapper)的数量取决于输入文件的Input-splits的数量。

所以*例如：200 个输入拆分（它们是逻辑的）=200 映射器* 。

**映射器节点是如何选择的？**
Mapper 是本地数据节点，如果不可能，则将数据传输到空闲节点并在该节点上调用 Mapper。

Reducer 的数量可以由用户设置（*Job.setNumberOfReducer(Number)*），否则它也将根据 Mapper 的中间输出的拆分数量。

* * *

* * *

***其他问题的答案***

```
Q1>so in one node can run for example 10 mappers in parallel at one time, or these mappers are processed sequentially? 
```

Ans：顺序（最大（活动/运行）映射器数=DataNodes数）

```
Q2>how are chosen the nodes where are reducers invoked? 
```

答：

*   中间键值存储在本地文件系统中而不是在 HDFS 中，然后将其复制（HDFS）到 Reducer Node 。
*   单个 Mapper 会将 Data 提供给多个 reducer。所以数据的局部性是不可能的，因为特定减速器的数据来自许多节点，如果不是来自所有节点。

*所以 Reducer 是（或至少应该）在 Bandwidth of a Node 上选择的，记住以上几点*

```
 Q3>if we need reducers count bigger then overall nodes count (for example 90 reducers in 50 nodes cluster), are the reducers on one node processed in parallel or sequentially? 
```

Ans ：顺序（最大数量（活动/运行）Reducer = 数据节点数）

# visual-studio - Visual Studio 2012 - 当我来回切换时，Git 显示多个分支的更改

> ID：12901695
> 
> 赞同：0
> 
> 时间：2012-10-15T18:24:15.757
> 
> 标签：visual-studio, git, branch

我正在使用 Visual Studio 2012 和 Git 扩展。一切都运行良好（据我所知），但是现在当我在我的一个分支中进行更改时，它会出现在我的另一个分支中。它同时改变了两个分支....有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:59:51.440

如果您不提交更改，它会“移动”到您切换到的另一个分支。虽然您可能有多个分支，但您只有 1 个工作目录。我通常做的是：

```
git stash -u 
```

然后切换分支，在VS中进行实验。然后当我准备回去的时候，我

```
git stash pop 
```

它回到了我的变化。

一个常见的工作流程是

```
git stash -u
git checkout someotherbranch
# experiment
git checkout -
git stash pop 
```

当您获得历史记录时，使用命令行非常好。尝试只使用 msysgit 一段时间，您将看到历史记录、管道、制表符补全等的优势。

顺便说一句，`git checkout -`就像 一样`cd -`，允许您在两个地方之间不断切换。很有用。

# eclipse - BeyondCVS 仅在 MAC OS X 上的文本合并中打开

> ID：12901696
> 
> 赞同：2
> 
> 时间：2012-10-15T18:24:22.827
> 
> 标签：eclipse, macos, beyondcompare

我在 MAC OS X 上使用 Eclipse 运行 BeyondCVS。我在 MAC 上使用 Wine Bottler 来运行 Beyond Compare。当我在 Eclipse 和 Beyond Compare 中打开“比较”时，由于某种原因，它总是进入文本合并模式。我希望它进入文本比较。我在网上看过，我还没有发现如何让它默认打开文本比较。我真的只需要文本比较。我在某处读到此设置在 Beyond Compare 的默认会话中，但我没有找到它。

# vb.net - 如何从*不同的*表单中处理表单的关闭事件？

> ID：12901701
> 
> 赞同：1
> 
> 时间：2012-10-15T18:24:38.000
> 
> 标签：vb.net, winforms

（使用 VB.NET 2010）

假设我有 2 个表单，分别名为 Form1 和 Form2。

是否可以从 Form1 中的 sub 处理 Form2 的关闭事件？例如，我想在 Form1 类中做这样的事情......

```
 Private Sub Form2_FormClosed(ByVal sender As System.Object, ByVal e As System.Windows.Forms.FormClosedEventArgs) Handles Form2.FormClosed

        ' Code to run when Form2 is closed

    End Sub 
```

但很显然，这是行不通的。

所以……有什么办法吗？或者，有什么办法可以达到同样的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:34:07.183

您需要使用 WithEvents 关键字声明一个变量：

```
Dim WithEvents popup As Form2 
```

并创建与此类似的表单：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    popup = New Form2
    popup.Show()
End Sub 
```

现在您的事件处理程序将正常工作。

# android - Android AVD 模拟器未运行应用程序，但设备运行？(OpenGL)

> ID：12901702
> 
> 赞同：1
> 
> 时间：2012-10-15T18:24:40.320
> 
> 标签：android, avd

您好我正在尝试在模拟器上运行一些示例 openGl 代码。我是 Android 开发的新手。它在模拟器上崩溃，但不是我的设备，三星 Galaxy Note 手机 N7000。

我尝试的 AVD 设置是：

```
Target: Android 4.1 - API Level 16
CPU/ABI: ARM (armeabi-v7a)
SD Card: 32 MiB
Skin: Built-in : WGA800 
```

以下是控制台上的错误：

```
10-15 13:23:34.287: E/Trace(621): error opening trace file: No such file or directory (2)
10-15 13:23:34.848: D/libEGL(621): Emulator without GPU support detected. Fallback to software renderer.
10-15 13:23:34.878: D/libEGL(621): loaded /system/lib/egl/libGLES_android.so
10-15 13:23:34.947: D/gralloc_goldfish(621): Emulator without GPU emulation detected.
10-15 13:23:34.977: W/dalvikvm(621): threadid=11: thread exiting with uncaught exception (group=0x40a13300)
10-15 13:23:34.977: E/AndroidRuntime(621): FATAL EXCEPTION: GLThread 72
10-15 13:23:34.977: E/AndroidRuntime(621): java.lang.IllegalArgumentException: No configs match configSpec
10-15 13:23:34.977: E/AndroidRuntime(621):  at android.opengl.GLSurfaceView$BaseConfigChooser.chooseConfig(GLSurfaceView.java:863)
10-15 13:23:34.977: E/AndroidRuntime(621):  at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:1024)
10-15 13:23:34.977: E/AndroidRuntime(621):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1401)
10-15 13:23:34.977: E/AndroidRuntime(621):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240)
10-15 13:23:35.377: I/Choreographer(621): Skipped 67 frames!  The application may be doing too much work on its main thread.
10-15 13:23:36.658: I/Choreographer(621): Skipped 72 frames!  The application may be doing too much work on its main thread. 
```

谢谢鲍勃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:34:48.963

```
10-15 13:23:34.848: D/libEGL(621): Emulator without GPU support detected. Fallback to software renderer. 
```

只需重新创建或编辑您的模拟器，并确保在您拥有的硬件列表下

**GPU 仿真**设置为**是**

# c# - 将base64流解码为图像

> ID：12901705
> 
> 赞同：14
> 
> 时间：2012-10-15T18:24:53.910
> 
> 标签：c#, javascript, asp.net

我正在使用 javascript 从客户端发送 base64 编码图像（我正在使用[http://supa.sourceforge.net/](http://supa.sourceforge.net/)为 asp.net 应用程序创建屏幕截图上传器小程序），这会向服务器发送一个 ajax 请求以存储图像。在服务器上，我在 asp.net 应用程序的 GenericHanlder 中使用 HttpContext。

如何将图像数据从 HttpContext 转换为服务器上的图像？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-15T18:34:24.333

首先，您需要将基数 64 转换回字节：

```
byte[] data = System.Convert.FromBase64String(fromBase64); 
```

然后，您可以将其加载到 Image 的实例中：

```
MemoryStream ms = new MemoryStream(data);
Image img = Image.FromStream(ms); 
```

如果要将其保存到文件中，请使用[System.IO.File.WriteAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-03-04T11:56:01.180

我需要做类似的事情，但想直接使用 InputStream，所以用它来进行解码：

```
// using System.Security.Cryptography
var stream = new CryptoStream(Request.InputStream, new FromBase64Transform(), CryptoStreamMode.Read);
var img = Image.FromStream(stream); 
```

# linux - linux中的ffmpeg错误

> ID：12901706
> 
> 赞同：24
> 
> 时间：2012-10-15T18:24:57.593
> 
> 标签：linux, ffmpeg, centos

有关如何解决此错误的任何帮助： `ffmpeg: error while loading shared libraries: libavdevice.so.52: cannot open shared object file: No such file or directory`

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-15T18:30:50.553

基本上，要找到文件：

```
sudo find / -name libavdevice.so.52 
```

例如，您在`/usr/local/lib`. 接下来将该库包含到您的库路径中。将此添加到您的`/etc/ld.so.conf`：

```
/usr/local/lib 
```

最后在修改这个文件之后运行这个：

```
sudo ldconfig 
```

参考：[Ffmpeg：加载共享库时出错：libavdevice.so.52：无法打开共享对象文件](https://web.archive.org/web/20141223015653/http://linuxserverguide.wordpress.com:80/2010/10/15/ffmpeg-error-while-loading-shared-libraries-libavdevice-so-52-cannot-open-shared-object-file/)

# asp.net - 用于检查 dbnull 内联 asp 的 if 语句的正确语法

> ID：12901708
> 
> 赞同：0
> 
> 时间：2012-10-15T18:25:00.047
> 
> 标签：asp.net, vb.net

我正在寻找有关在 asp 中检查 DBNull 内联的语法的帮助...

```
<EditItemTemplate>
  <asp:CheckBox ID="Checkbox1" runat="server" Checked='<%# If(isDBNull(Eval("activeType")).Value, False, Convert.ToBoolean(Eval("activeType"))) %>'></asp:CheckBox>
 </EditItemTemplate> 
```

希望有人能告诉我这个..

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:18:10.847

你过得很好，拿出来`.Value` ，`isDBNull(Eval("activeType"))` 这会起作用，你不能得到 dbNull 的值，所以在它实际检查它是否为空之前抛出异常

```
<EditItemTemplate>
<asp:CheckBox ID="Checkbox1" runat="server" Checked='<%# If(isDBNull(Eval("activeType")), False, Convert.ToBoolean(Eval("activeType"))) %>'></asp:CheckBox>
</EditItemTemplate> 
```

# c++ - 对于大于 4GiB 的文件，fread 有时会返回错误值

> ID：12901711
> 
> 赞同：2
> 
> 时间：2012-10-15T18:25:26.077
> 
> 标签：c++, c, fread

我正在尝试读取一个由 30e6 个位置组成的大二进制文件，每个位置有 195 个双精度。由于文件太大而无法全部读入内存，因此我按 10000 个位置的块读取它。然后我用它做一些计算并读取下一个块......

由于我需要随机访问文件，我编写了一个函数来从文件中读取给定的块（无符号整数块）并将其存储在 **chunk_data 中。该函数返回读取的位置总数。

```
unsigned int read_chunk(double **chunk_data, unsigned int chunk) {
    FILE *in_glf_fh;
    unsigned int total_bytes_read = 0;

    // Define chunk start and end positions
    unsigned int start_pos = chunk * 10000;
    unsigned int end_pos = start_pos + 10000 - 1;
    unsigned int chunk_size = end_pos - start_pos + 1;

    // Open input file
    in_glf_fh = fopen(in_glf, "rb");
    if( in_glf_fh == NULL )
        error("ERROR: cannot open file!");

    // Search start position
    if( fseek(in_glf_fh, start_pos * 195 * sizeof(double), SEEK_SET) != 0 )
        error("ERROR: cannot seek file!");

    // Read data from file
    for(unsigned int c = 0; c < chunk_size; c++) {
         unsigned int bytes_read = fread ( (void*) chunk_data[c], sizeof(double), 195, in_glf_fh);
         if( bytes_read != 195 && !feof(in_glf_fh) )
             error("ERROR: cannot read file!");
         total_bytes_read += bytes_read;
    }

    fclose(in_glf_fh);
    return( total_bytes_read/195 );
} 
```

问题是，在阅读了一些块之后，`fread()`开始给出错误的值！此外，根据块大小，`fread()`开始表现奇怪的位置会有所不同：

```
chunk of 1 pos, wrong at chunk 22025475
chunk of 10000 pos, wrong at chunk 2203
chunk of 100000 pos, wrong at chunk 221 
```

任何人都知道可能会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T18:32:10.863

在确定`30e6 positions`不是十六进制，而是 30,000,000 之后：考虑以下问题`fseek()`：文件有 46,800,000,000 字节。普通香草`fseek()`（在 16 位和 32 位平台上）仅限于前 2^32-1 个字节（=4,294,967,295）。

根据程序运行的平台，您可能必须使用`lseek64`它或它的等价物。在 Linux 上，有

*   `lseek()`与_

    #define _FILE_OFFSET_BITS 64

*   `llseek()`

*   `lseek64()`

# eclipse-plugin - 在 Eclipse 插件中创建一个新类别

> ID：12901719
> 
> 赞同：1
> 
> 时间：2012-10-15T18:26:05.670
> 
> 标签：eclipse-plugin, categories

当我想从*Plug-in Manifest Editor的**Extension*选项卡中为扩展点创建新的*Category*或*Command*时，大多数教程和书籍都告诉我右键单击并选择*New -> Category*。**`org.eclipse.ui.view`**

 ***但是，当我右键单击然后选择*New*时，我得到的唯一选择是*Generic*。

任何人都知道如何从*扩展选项卡创建新**类别*？

 *我正在使用 Eclipse Indigo *Eclipse Java EE IDE for Web Developers*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:27:55.567

似乎 PDE 有问题...您最好使用以下软件包之一：

*   “Eclipse 建模工具，274 MB”，
*   “面向 RCP 和 RAP 开发人员的 Eclipse，227 MB”，
*   “日食经典”。****

# python - 简单的 Python 函数

> ID：12901724
> 
> 赞同：1
> 
> 时间：2012-10-15T18:26:29.793
> 
> 标签：python

我做了简单的python函数，它接受两个输入并输出一些文本。

这里是，

```
def weather():
    israining_str=input("Is it raining (1 or 0) ? ")
    israining = bool(israining_str)

    temp_str=input("What is the temp ? ")
    temp = float(temp_str)

    if israining==True and temp<18:
        return "Umbrella & Sweater"
    elif israining==True and temp>=18:
        return "Umbrella"
    elif israining==False and temp<18:
        return "Sweater"
    else:
        return "Cap" 
```

测试数据 -

```
>>> 
Is it raining ? 0
What is the temp ? 43
Umbrella
>>> ================================ RESTART ================================
>>> 
Is it raining ? 1
What is the temp ? 43
Umbrella
>>> 
```

如果下雨是假的，它会覆盖`Sweater`或`Cap`。但是我的代码甚至给出了 true`israining_str == 0`或`israining_str == 1`

我在哪里做错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T18:28:13.300

这是你的问题：

```
>>> bool("0")
True 
```

任何非空字符串在转换为布尔值时都是 True。您可以`bool(int(israining_str))`转换为`int`then `bool`，如果该人输入字符串，它将为您提供数字零`"0"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T18:28:26.310

您使用的是 python 3.x 吗？如果是，则`input`返回一个字符串。 `bool(youstring)`如果字符串非空，则返回 True。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T18:31:19.337

根据python的文档：

布尔（x）

使用标准真值测试程序将值转换为布尔值。如果 x 为假或省略，则返回 False。

您将非空字符串传递给此函数，非空字符串为 True。

你可以这样写：

```
t = int(israining_str)

# here you can check if user's input is 0 or 1 and ask user again if it is not

israining = False
if t:
    israining = True 
```

# spring-mvc - 如何使用 spring 和 dojo 制作我的提交按钮主题

> ID：12901728
> 
> 赞同：0
> 
> 时间：2012-10-15T18:26:45.157
> 
> 标签：spring-mvc, dojo

如何使用 Spring Webflow 和 digit 使我的表单按钮看起来像表单上的其他字段

```
<input type="submit" name="_eventId_submit" id="submit" value="Submit" />
        <script type="text/javascript">
                                            Spring.addDecoration(new Spring.ElementDecoration(
                                                {
                                                    elementId : 'submit',
                                                    widgetType : "dijit.form.Button",
                                                    widgetModule : "dijit.form.Button"
                                                }));
                            </script> 

        <p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:30:14.587

我将代码更改为以下内容，并且可以正常工作：

```
<input type="submit" name="_eventId_submit" id="submit" value="Submit" />
        <script type="text/javascript">
                                            Spring.addDecoration(new Spring.ElementDecoration(
                                                {
                                                    elementId : 'submit',
                                                    widgetType : "dijit.form.Button",
                                                    widgetModule : "dijit.form.Button",
                                                    widgetAttrs : {
                                                        label: "Submit Page",
                                                        promptMessage : "Click here to submit page"
                                                    }

                                                }));
                            </script> 
```

# jquery - Jquery 选项卡和 CakePHP

> ID：12901730
> 
> 赞同：1
> 
> 时间：2012-10-15T18:27:01.943
> 
> 标签：jquery, cakephp

我在我的 CakePHP 项目中使用 jquery 选项卡。这是我的脚本：

```
$(function() {
        $( "#tabs" ).tabs();
 }); 
```

这是我的标签代码

```
<div id="tabs">
    <ul>
        <li><?php echo $this->Html->link('Statistics', array('action' => 'overview_stats', $current_user['id']))?></li>
        <li><?php echo $this->Html->link('Orders', array('action' => 'overview_orders', $current_user['id']))?></li>
        <li><?php echo $this->Html->link('Past Orders', array('action' => 'overview_past_orders', $current_user['id']))?></li>
        <li><?php echo $this->Html->link('Blog Pages', array('action' => 'overview_blog_pages', $current_user['id']))?></li>
        <li><?php echo $this->Html->link('Chextands', array('action' => 'overview_chextands', $current_user['id']))?></li>

    </ul>
</div> 
```

每次单击选项卡时，都会在每个选项卡中呈现整个页面。有没有办法只在我的 .ctp 文件中呈现视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:27:50.090

将这些操作的布局设置为“ajax”：

```
$this->layout = 'ajax'; 
```

这样您就不会在选项卡内加载整个布局。

您必须在控制器中的相应操作中执行此操作

# c# - 单例设计模式的优势是什么

> ID：12901734
> 
> 赞同：11
> 
> 时间：2012-10-15T18:27:16.267
> 
> 标签：c#, oop

每个人都知道如何为 Singleton Design Pattern.say 编写代码

```
public class Singleton  
{  
    // Private static object can access only inside the Emp class.  
    private static Singleton instance;  

    // Private empty constructor to restrict end use to deny creating the object.  
    private Singleton()  
    {  
    }  

    // A public property to access outside of the class to create an object.  
    public static Singleton Instance  
    {  
        get  
        {  
            if (instance == null)  
            {  
                instance = new Singleton();  
            }  
            return instance;  
        }  
    }  
} 
```

很明显，当我们多次创建任何类的实例时，会为每个实例分配内存，但在单例设计模式的情况下，单个实例会为所有调用提供服务。

1）我有点困惑，真的不知道是什么原因......什么时候应该选择单例设计模式。只是为了节省一些内存或任何其他好处。

2）假设任何单个程序都可以有很多类，那么哪些类应该遵循单例设计模式？单例设计模式的优势是什么？

3 在现实生活中的应用程序中，什么时候应该按照单例设计模式创建任何类？谢谢

## 这是线程安全的单例

```
public sealed class MultiThreadSingleton   
{   
    private static volatile MultiThreadSingleton instance;   
    private static object syncRoot = new Object();   

    private MultiThreadSingleton()   
    {   
    }   

    public static MultiThreadSingleton Instance   
    {   
        get   
        {   
            if (instance == null)   
            {   
                lock (syncRoot)   
                {   
                    if (instance == null)   
                    {   
                        instance = new MultiThreadSingleton();   
                    }   
                }   
            } 

        return instance;   
        }   
    }   
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T18:32:03.590

确保每次只有一个相同的对象实例。

举个例子，比如一个公司应用程序，只有一个 CEO。如果要创建或访问 CEO 对象，则每次都应返回相同的 CEO 对象。

另外，在登录应用程序后，当前用户每次都必须返回相同的对象。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-01T17:13:47.513

其他答案也很好。但是他们提供了该模式的**行为**特征的示例。但是，Singleton 更多的是关于**创造**。因此，该模式最重要的好处之一是资源友好。`new object`当您实际上不需要一个新的时，您并没有浪费内存。

这带来了另一个好处，即避免了实例化开销。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-15T18:32:16.590

**单例模式的好处：**

• 实例控制：Singleton 防止其他对象实例化它们自己的 Singleton 对象副本，确保所有对象都访问单个实例。

• 灵活性：由于类控制实例化过程，因此类具有改变实例化过程的灵活性。

Singleton 相对于全局变量的优势在于，当您使用 Singleton 时，您绝对可以确定实例的数量，并且您可以改变主意并管理任意数量的实例。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-28T06:14:09.180

**单例设计模式的实时用法/好处。**

1.  在使用多线程时，要管理多线程池。
2.  管理 SOA（面向服务的架构）中的“服务主机存储库”。
3.  用于日志框架实现
4.  在自动化测试/单元测试项目中，即编码的 UI 项目。
5.  在大型应用程序中实现缓存时。
6.  用于配置设置以正确控制应用程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-15T18:34:11.173

使用单例的一个有用的地方是，如果它正在访问一些您只想拥有一个访问点的资源。例如，我在编写一些与设备对话的代码时使用过它。我只想要一段代码与设备对话，所以我使用单例。任何创建与设备对话的对象的另一个实例的尝试都只会返回相同的对象，因此我永远不必担心两个实例会维护有关设备的不同步数据或从设备接收和接收混合消息向上或无序。

但是，当然，您没有义务使用它们。它们只是有时有用的工具。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-15T18:29:31.000

一般来说，单例在 OOP 中被认为是一种反模式，因为它意味着一个类断言关于整个程序——在 OOP 中它不应该知道——它知道它将是唯一的一个。话虽如此，根据我的经验，单例是实现常量的正确方法。一般来说，如果我要硬编码到程序中（比如数据库用户名），那么它可以移动到配置文件或单例中。

Java 击败 C# 的少数领域之一（在我看来……）是它对枚举的支持。Java 通过枚举提供了真正的 OO 常量，所以这就是我将始终在 Java 中实现单例的方式。C# 没有现成的等价物。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-24T18:05:46.680

它可以改进 JVM 中处理内存的方式，并且正确使用内存可以达到更好的性能。您不是在创建多个对象，而是尝试只创建一个对象，这样垃圾收集器的工作量就会减少，JVM 堆中的内存占用也会减少。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-08-15T08:19:28.430

让我们假设有一台打印机并且所有人都必须访问该打印机，然后在创建对象时您应该只允许一个人进行打印，因为它不允许另一个人同时打印，这就是为什么在现实生活中的这种情况下我们需要单个吨类，我们可以更清晰地一一管理任务......

# grails - request.GetFile 无法获取 UTF-8 字符集内容

> ID：12901738
> 
> 赞同：1
> 
> 时间：2012-10-15T18:27:31.913
> 
> 标签：grails

`multipart/form-data`在 Grails 中上传带有 UTF-8 字符的文件时出现错误。

我正在使用下面的表格；

```
<form action="uploadPost" enctype="multipart/form-data; charset=utf-8" method="POST">
    <label class="form-titles" for="csvList">Choose a file: </label>
<input type="file" id="csvList" name="csvList" style="width: 200px;"/>
    <input type="submit"/> 
```

在控制器中我有：

```
def file = request.getFile('csvList') 
```

这会导致错误：

> 错误 [org.codehaus.groovy.grails.web.errors.GrailsExceptionResolver] - 没有方法签名：org.springframework.security.wrapper.SavedRequestAwareWrapper.getFile() 适用于参数类型：(java.lang.String) 值： [userList] 可能的解决方案：getXML()、getAt(java.lang.String)、getAt(java.lang.String)、getLocale()、getLocale()、getJSON()>

我认为这在Java中是一样的。

知道我做错了什么以及如何以多部分形式获取 UTF-8 字符集吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:00:09.113

我认为那是因为您声明了`utf8`内部`enctype`并且服务器不理解为多部分。尝试：

```
<form method="post" action="uploadPost" enctype="multipart/form-data" accept-charset="UTF-8"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:32:29.757

```
enctype="multipart/form-data" 
```

不要将字符集放在“enctype”属性中。

# razor - Razor+javascript 语法错误遇到“,”

> ID：12901741
> 
> 赞同：3
> 
> 时间：2012-10-15T18:27:40.087
> 
> 标签：razor

我尝试用剃刀生成 javascript：

```
<script>
  var slides =
  [
    @foreach (var news in Model.News)
    {
      @:data.push(
      {
        fileID: @(news.FileID),
        preamble: "@(news.Preamble)",
        img: "/Admin/News/NewsPng/@(news.NewsID)"
      });
    }
  ];
</script> 
```

我收到语法错误

*   “@”（意外标记）和行尾的“,”（; 预期）上的 fileID 行。
*   “，”（；预期）上的序言行
*   img 行，在最后一个引号 (; 预期) 之后
*   }); “）”上的行（意外标记）
*   这 ]; “]”上的行（语法错误）

Visual Studio 2012 似乎不接受我的很多剃须刀代码。也许还值得注意的是，我正在使用 R#（如果这是一个问题）。

除了为什么会出现所有这些错误消息的明显问题之外，我还想知道是什么让 Visual Studio 真正接受我尝试*运行*它。

所有这些编译错误，Visual Studio 实际*运行*它？为什么？

当我运行代码时，我收到以下错误：

```
CS1646: Keyword, identifier, or string expected after verbatim specifier: @ 
```

并且 fileID 行被突出显示。

Razor 可能是一个非常好的东西，但到目前为止，它让我有些头疼。也许我只是在做一些愚蠢的事情......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:42:28.833

尝试`<text>`：

```
<script> 
  var slides = 
  [ 
    @foreach (var news in Model.News) 
    { 
      <text>
      data.push( 
      { 
        fileID: @(news.FileID), 
        preamble: "@(news.Preamble)", 
        img: "/Admin/News/NewsPng/@(news.NewsID)" 
      });
      </text>
    } 
  ]; 
</script> 
```

但是你的语法是错误的，你会在 javascript 中得到错误。

**添加：**

像这样的东西会起作用：

```
<script> 
    var slides = [];
    @foreach (var news in Model.News) 
    { 
      <text>
      slides.push({...});
      </text>
    } 
</script> 
```

# java - Android如何对JSONObjects的JSONArray进行排序

> ID：12901742
> 
> 赞同：25
> 
> 时间：2012-10-15T18:27:40.880
> 
> 标签：java, android, json, sorting

我制作了一个jsonobjects的jsonarray。现在我需要根据来自 jsonobjects 的值对 JSONArray 进行排序。以前我对自定义对象的 ArrayLists 进行排序，如下所示：

比较器：

```
public class KreeftenComparatorLA implements Comparator<Kreeft> {
    public int compare(Kreeft left, Kreeft right) {
        return left.latijnseNaam.compareTo(right.latijnseNaam);
    }
}
public class KreeftenComparatorNL implements Comparator<Kreeft> {
    public int compare(Kreeft left, Kreeft right) {
        return left.naam.compareTo(right.naam);
    }
} 
```

然后对arraylist进行排序：

```
Collections.sort(db.lijst, new KreeftenComparatorLA()); 
```

或者：

```
Collections.sort(db.lijst, new KreeftenComparatorNL()); 
```

但是当我用这样的 JSONArray 尝试同样的事情时（JA = 我的 jsonarray）

```
Collections.sort(JA, new KreeftenComparatorNL()); 
```

Collections.sort 给出错误：

> Collections 类型中的方法 sort(List, Comparator) 不适用于参数 (JSONArray, ThisActicity.KreeftenComparatorNL)

**有人知道如何对 JSONArray 进行排序吗？**

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-15T19:55:18.927

问题是 JSONArray 或多或少包含最终是字符串的 JSONObjects（和其他 JSONArrays）。将字符串完全反序列化为 POJO，对它们进行排序，然后再返回 JSON 是相当繁重的。

第二个问题是 JSONArray 可以包含：Boolean、JSONArray、JSONObject、Number、String 或 JSONObject.NULL 对象；即它是混合类型，因此很难将元素转储到某种类型的列表中并对其进行排序，然后通过列表将排序的项目转储回 JSON 数组。从 JSONArray 中获取每个元素的通用类型的唯一确定方法是使用 Object get() 方法。当然，您所拥有的只是 Object 对象，如果不重新访问它们，将无法对它们进行任何有意义的排序序列化问题。

假设您的 JSONArray 包含同构结构的值，您可以遍历 JSONArray，对每个类型调用 get() 方法之一，将它们转储为 List 类型，然后对其进行排序。如果您的 JSONArray 仅包含“简单”类型，如字符串或数字，这相对容易。这不是确切的代码，而是类似于：

```
List<String> jsonValues = new ArrayList<String>();
for (int i = 0; i < myJsonArray.length(); i++)
   jsonValues.add(myJsonArray.getString(i));
Collections.sort(jsonValues);
JSONArray sortedJsonArray = new JSONArray(jsonValues); 
```

当然，如果你有嵌套对象，这可能会有点棘手。如果您要排序的值位于顶层，那可能还不错...

```
List<JSONObject> jsonValues = new ArrayList<JSONObject>();
for (int i = 0; i < myJsonArray.length(); i++)
   jsonValues.add(myJsonArray.getJSONObject(i)); 
```

然后使用这样的比较器进行排序：

```
class JSONComparator implements Comparator<JSONObject>
{

    public int compare(JSONObject a, JSONObject b)
    {
        //valA and valB could be any simple type, such as number, string, whatever
        String valA = a.get("keyOfValueToSortBy");
        String valB = b.get("keyOfValueToSortBy");

        return valA.compareTo(valB);
        //if your value is numeric:
        //if(valA > valB)
        //    return 1;
        //if(valA < valB)
        //    return -1;
        //return 0;    
    }
} 
```

同样，这对 JSONArray 中数据的同质性​​做了一些假设。如果可能，请根据您的情况进行调整。此外，您还需要添加异常处理等。祝您编码愉快！

**编辑** 根据评论修复

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-31T20:47:33.283

为了填写一个 Android 列表 ArrayAdapter，我需要这样做。我是这样做的：

从 JSONArray 构建列表的活动代码：

```
JSONArray kids = node.getJSONArray("contents");
kids = JSONUtil.sort(kids, new Comparator(){
   public int compare(Object a, Object b){
      JSONObject    ja = (JSONObject)a;
      JSONObject    jb = (JSONObject)b;
      return ja.optString("name", "").toLowerCase().compareTo(jb.optString("name", "").toLowerCase();
   }
});
// in my case I wanted the original larger object contents sorted...
node.put("contents", kids); 
```

在 JSONUtil （我的助手）中：

```
public static JSONArray sort(JSONArray array, Comparator c){
    List    asList = new ArrayList(array.length());
    for (int i=0; i<array.length(); i++){
      asList.add(array.opt(i));
    }
    Collections.sort(asList, c);
    JSONArray  res = new JSONArray();
    for (Object o : asList){
      res.put(o);
    }
    return res;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-24T19:31:08.273

只是为了清楚上述排序比较器的代码是不正确的。您无法像在 Ruby 这样的语言中那样比较字符串。这可以写得更简洁如下。否则逻辑是合理的。

```
Collections.sort( jsonValues, new Comparator<JSONObject>() {
    @Override
    public int compare(JSONObject a, JSONObject b) {
        String valA = new String();
        String valB = new String();

        try {
            valA = (String) a.get("keyOfValueToSortBy");
            valB = (String) b.get("keyOfValueToSortBy");
        } 
        catch (JSONException e) {
            Log.e(LOG_TAG, "JSONException in combineJSONArrays sort section", e);
        }

        return valA.compareTo(valB);
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-26T12:58:01.887

一个带有`Date`字段的示例：

```
public class JsonObjectComparator implements Comparator<JSONObject> {
private final String fieldName;
private Class<? extends Comparable> fieldType;

public JsonObjectComparator(String fieldName, Class<? extends Comparable> fieldType) {
    this.fieldName = fieldName;
    this.fieldType = fieldType;
}    

@Override
public int compare(JSONObject a, JSONObject b) {
    String valA, valB;
    Comparable newInstance_valA, newInstance_valB;
    int comp = 0;
    try {
        Constructor<? extends Comparable> constructor = fieldType.getConstructor(String.class);            
        valA = a.getString(fieldName);
        valB = b.getString(fieldName);
        if (fieldType.equals(Date.class)) {
            SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy");
            newInstance_valA = dateFormat.parse(valA);            
            newInstance_valB = dateFormat.parse(valB);
        } else {
            newInstance_valA = constructor.newInstance(valA);            
            newInstance_valB = constructor.newInstance(valB);
        }
        comp = newInstance_valA.compareTo(newInstance_valB);
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }

    if(comp > 0)
        return 1;
    if(comp < 0)
        return -1;
    return 0;
  }

}

public static void main(String[] args) throws JSONException {        
    JSONObject o1 = new JSONObject();
    o1.put("key1", "26-06-2014");
    JSONObject o2 = new JSONObject();
    o2.put("key1", "30-11-2011");
    JSONObject o3 = new JSONObject();
    o3.put("key1", "15-07-2014");

    JsonObjectComparator comparator = new JsonObjectComparator("key1", Date.class);
    List<JSONObject> l = new ArrayList<>();
    l.add(o1);
    l.add(o2);
    l.add(o3);

    Collections.sort(l, comparator);
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-25T20:54:33.003

如果您要显示其中包含的数据，`JSONArray`那么在适配器本身中对其进行排序可能是有意义的。例如，`ArrayAdapter<T>`该类已经具有必要的方法，例如`Insert`、`Remove`，当然还有`Sort`。

```
adapter.sort(new Comparator<JSONObject>(){

    @Override
    public int compare(JSONObject arg0, JSONObject arg1) {

        return arg0.optString("SortField", "").compareTo(arg1.optString("SortField","")) ;

    }

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-02T13:59:56.133

```
//My script
 //HEADER add final variables
    private final int TYPE_STRING = 1;
    private final int TYPE_INT = 2;
    private final int TYPE_DUBLE = 3;

//METHOD GET SORT JSONARRAY
public JSONArray  getSortJSONArray()
{
 JSONArray  json = new JSONArray  ([{"carid":"957502","vin":"XXXXX","carbrand":"CADILLAC","carmodel":"CTS","carname":"CADILLAC CTS седан CTS PERFORMANC 2.0L AWD AK4 2 4WD  AT-6 276 (Л.С.)","carmodificationname":" седан CTS PERFORMANC 2.0L AWD AK4 2 4WD  AT-6 276 (Л.С.)","carcolorname":"Opulent Blue Metallic - ярко-синий металлик","price":"3410000","rgb":"","volumereal":"2,00","power":"276"},{"carid":"957502","vin":"XXXXX","carbrand":"CADILLAC","carmodel":"CTS","carname":"CADILLAC CTS седан CTS PERFORMANC 2.0L AWD AK4 2 4WD  AT-6 276 (Л.С.)","carmodificationname":" седан CTS PERFORMANC 2.0L AWD AK4 2 4WD  AT-6 276 (Л.С.)","carcolorname":"Opulent Blue Metallic - ярко-синий металлик","price":"3460000","rgb":"","volumereal":"1,00","power":"272"}]");

 /*halper - My halper */
   JSONArray sorJsonArray = halper.sort(json, getComparator("power",TYPE_INT));
   return sorJsonArray;
}

private Comparator getComparator(final String tagJSON,final int type)
    {
        Comparator c =  new Comparator()
        {
            public int compare(Object a, Object b)
            {

                try
                {
                    JSONObject    ja = (JSONObject)a;
                    JSONObject    jb = (JSONObject)b;

                    switch (type)
                    {
                        case TYPE_STRING:// String
                          return ja.optString(tagJSON, "")
                                                .toLowerCase()
                                                .compareTo(jb.optString(tagJSON, "").toLowerCase());
                        case TYPE_INT:// int
                            int valA =  ja.getInt(tagJSON);
                            int valB =  jb.getInt(tagJSON);
                            if(valA > valB)
                                return 1;
                            if(valA < valB)
                                return -1;

                        case TYPE_DUBLE:// double
                            String v1 = ja.getString(tagJSON).replace(",",".");
                            String v2 = jb.getString(tagJSON).replace(",",".");

                            double valAd = new Double(v1);// ja.getDouble(tagJSON);
                            double valBd = new Double(v2);//  jb.getDouble(tagJSON);
                            if(valAd > valBd)
                                return 1;
                            if(valAd < valBd)
                                return -1;

                    }
                }
                catch (Exception e)
                {
                    e.printStackTrace();
                }
                return 0;
            }
        };

        return c;
    } 
```

//我的 Halper 类

```
public class Halpe {
    public void Halpe(){}

    public static JSONArray sort(JSONArray array, Comparator c)
    {
        List    asList = new ArrayList(array.length());
        for (int i=0; i<array.length(); i++){
            asList.add(array.opt(i));
        }
        Collections.sort(asList, c);
        JSONArray  res = new JSONArray();
        for (Object o : asList){
            res.put(o);
        }
        return res;
    }} 
```

# ruby - 查找涉及玩家的游戏

> ID：12901754
> 
> 赞同：0
> 
> 时间：2012-10-15T18:28:05.890
> 
> 标签：ruby, datamapper, ruby-datamapper

在我的模型中，游戏和用户之间存在多对多的关系。我怎样才能找到涉及给定玩家的所有游戏？

我试过`Game.all(Game.users.include?(u))`但有一个`NoMethodError`关于`include?`

* * *

这是我每个[http://datamapper.org/docs/associations.html的模型](http://datamapper.org/docs/associations.html)

```
class User
    include DataMapper::Resource

    property :id,         Serial

    has n, :games, :through => Resource
end

class Game
    include DataMapper::Resource

    property :id,         Serial

    has n, :users, :through => Resource
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:06:56.887

假设你有一个用户 u 的实例，那么你想要的是 u.games.all。每个用户都有一组游戏。我认为这是他们正在玩的游戏。

# android - Android 片段 setRetainInstance(true) 不起作用（Android 支持库）

> ID：12901760
> 
> 赞同：2
> 
> 时间：2012-10-15T18:28:27.277
> 
> 标签：android, android-fragments, android-support-library

我在保存片段状态时遇到问题。我尝试使用 setRetainInstance，但无法使其工作（（（我使用 button1 将状态更改为 2，但在更改屏幕方向后，按下 button2 时我看到 1。我的错误在哪里？

```
public class TestFragment extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        setRetainInstance(true);
        super.onCreate(savedInstanceState);
    }

    private String state = "1";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.fragment_layout, container, false);

        //button for changing state
        ((Button)view.findViewById(R.id.button1)).setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {
                state = "2";
            }
        });

        //button for showing state
        ((Button)view.findViewById(R.id.button2)).setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {
                Toast.makeText(getActivity(), state, Toast.LENGTH_SHORT).show();
            }
        });

        return view;
    }

} 
```

**编辑**

活动：

```
public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

} 
```

活动布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <fragment
        android:name="ru.ee.TestFragment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

</RelativeLayout> 
```

片段布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Change to 2" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Show" />

</LinearLayout> 
```

清单 XML：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="ru.ee.testfrag"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="ru.ee.MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-15T20:46:33.303

只有在布局中为片段提供 Id 时，您的片段才会被重新使用，更改

```
<fragment
    android:name="ru.ee.TestFragment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    /> 
```

成为

```
<fragment
    android:id="@+id/a_fragment"
    android:name="ru.ee.TestFragment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:40:50.723

您发布的代码没有任何问题。如果您正确实现了片段，它应该给您状态 2。也许您可以发布您的活动和 xml 文件。错误必须在其他地方。

# service - Odata 将数据插入到关系表中

> ID：12901761
> 
> 赞同：1
> 
> 时间：2012-10-15T18:28:28.357
> 
> 标签：service, odata, foreign-key-relationship, relational

我为关系表创建了 OData 服务。我试图弄清楚我的帖子查询在发布到具有外键关系的表时会是什么样子，并减少调用次数。

示例表是：

人

*   个人ID
*   姓名
*   电子邮件地址

住宅

*   居住证
*   个人ID
*   地址

为了在居住表中创建新条目，通常我会`PersonID`根据姓名或电子邮件地址找出，然后插入到`Residence`表中。

如何使用我的 OData JSON api 进行一次调用来完成相同的操作？可能吗？我正在使用提琴手来测试服务。

提前致谢。

-ap

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:47:14.533

一般来说，在 OData 中没有真正好的方法来做到这一点 - 但不要停止阅读，我将解释原因并提供一些建议。

您应该三思而后行在生产中执行此操作的原因是插入过程的脆弱性。如果数据库中有两个同名的人会怎样？如果没有人叫这个名字怎么办？如果你拼错了名字怎么办？你会为重复项抛出 HTTP 错误吗？他们是否必须重试插入？<- 从本质上讲，由于用户实际上并没有选择特定记录来绑定到新记录，因此会出现大量问题。如果您预先选择`Person`并插入新`Residence`的并绑定到`PersonID`. 在 OData 的新 JSON 格式中，它看起来像这样：

```
{
    "odata.type": "My.User",
    "ReferredBy@odata.bind": "http://.../MyService.svc/Users('haoche')",
    "BillingAddress": {
        "odata.type": "My.Address",
        "City": "Clinton",
        "Line1": "23456 Cleveland St",
        "Line2": null,
        "State": "TX",
        "ZipCode": "98052"
    },
    "DisplayName": "David Hamilton",
    "FavoriteTags": [],
    "JoinedAt": "2012-10-05T14:14:43.1229977-07:00",
    "LastSeenAt": "2012-10-05T14:14:43.1269991-07:00",
    "UserID": "davham"
} 
```

那`"ReferredBy@odata.bind"`是您放置要链接到的人的 ID 的地方。如果您不使用新的 OData 格式，则有效负载将[如下所示](http://msdn.microsoft.com/en-us/library/dd541294%28prot.20%29.aspx)（参见示例 2）。无耻插件：这就是为什么你应该使用新的 JSON 格式:)。

所以我的主要建议是，我真的强烈建议您让用户先查找数据，而不是尝试将两个操作合并为一个。但是，如果您真的打算进行一项操作，则可以使用服务操作或操作来执行此操作，具体取决于您使用的 OData 版本。

# java - Java Applet 表在运行时不显示

> ID：12901762
> 
> 赞同：0
> 
> 时间：2012-10-15T18:28:28.527
> 
> 标签：java, applet, jtable

我想在用户提供输入后显示一个表格。我无法弄清楚为什么表格不会显示。

我按照[此处（Stack Overflow）](https://stackoverflow.com/questions/1597592/creating-a-super-simple-table-applet-in-java)和[此处（Rose India）](http://www.roseindia.net/java/example/java/swing/InsertRows.shtml)的描述创建了我的表，以便创建一个可以添加到的表，

但我的代码没有将表添加到小程序中，特别是在这里：

```
aTable = new MDTable(mdList);
add( aTable ); 
```

其余代码，[在这里完整粘贴（Pastebin）](http://pastebin.com/Cgc3tvnp)：

```
public class FMCSAApplet extends Applet implements ActionListener {

String zipcode;

Label lab1;
TextField t1;
Button submitButton;
MDTable aTable;

public void init()
{
    setLayout(new FlowLayout()); 
    submitButton = new Button("Submit"); 
    lab1 = new Label("Enter a zipcode:");
    t1 = new TextField(15);

    add(lab1);
    add(t1);
    add(submitButton);
    submitButton.addActionListener(this); 
}

public void paint(Graphics g)
{
    g.drawString("Zip code: "+zipcode,30,100);
    if(zipcode!=null) {
        g.drawString("dotNum\t inputZip\t name\t\t city\t state\t mileage\t unsafe\t fatigued\t fitness\t substance\t maintenance\t inspections",30,120);
        try {
            ..Code Stripped..
                            // get info from database, add to ArayList<MData> mdList
                                    ..Code Stripped..
                                    mdList.add(motorcoach);
                }
            } // end while
            rs.close();

            aTable = new MDTable(mdList);
            add( aTable );

        }catch (Exception f) {
            System.out.println(f);
        }
    }
}

public void actionPerformed(ActionEvent evt) 
{
    // Here we will ask what component called this method
     if (evt.getSource() == submitButton) {
         zipcode = t1.getText();
         repaint();
     }
}

public boolean action(Event e,Object o)
{
    zipcode = t1.getText();
    repaint();
    return true;
}

} //end FMCSAApplet Class

class MDTable extends JPanel {
    public MDTable(ArrayList<MData> md) {
        Object[][] cellData = {
            {1,2,"3","4","5",6,7,8,9,10,11,12}     
        };

        String[] columnNames = {"dotNum","inputZip", "name","city","state","mileage","unsafe","fatigued","fitness","substance","maintenance","inspections"};
        add(  new JTable(cellData, columnNames) ) ;
        DefaultTableModel model = new DefaultTableModel(cellData,columnNames);
        JTable table = new JTable(model);
        for (MData md1 : md) {
            model.insertRow(table.getRowCount(),new Object[]{md1.getDotNum(), md1.getInputZip(), md1.getName(), md1.getCity(), md1.getState(), md1.getMileage(), md1.getUnsafe(), md1.getFatigued(), md1.getFitness(), md1.getSubstance(), md1.getMaintenance(), md1.getInspections()});
        }
    } //end MDTable Constructor
} //end MDTable Class

class MData {
        ..Code Stripped..
        public MData(int d, int i, String n, String c, String s, int m, int u, int f, int fi, int su, int ma, int in)
        ..Code Stripped..
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:38:02.243

添加组件后，您需要验证容器`MDTable`：

```
add( aTable );
validate();
... 
```

在您的`paint`方法中进行数据库调用也不是一个好主意。`paint`例如，当小程序重新获得焦点或调整大小时，将被多次调用。一个建议是将数据库调用提取到一个单独的方法中并添加一个“重新加载”按钮。

# android - 广播接收器 ACTION_SEND 未显示

> ID：12901763
> 
> 赞同：2
> 
> 时间：2012-10-15T18:28:31.117
> 
> 标签：android, android-intent, broadcastreceiver, android-manifest

我想为使用 ACTION_SEND 类型的“隐式意图”使用广播接收器。

它仍然非常基本，但无论如何我的应用程序/接收器已经没有出现，无论我尝试哪个应用程序的“共享菜单”。

摘自 AndroidManifest.xml：

```
 <receiver
        android:name=".SaveReceiver" >
        <intent-filter
            android:icon="@drawable/ic_launcher"
            android:label="YourDrive" >
            <action android:name="android.intent.action.SEND" />
            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>
        <intent-filter
            android:icon="@drawable/ic_launcher"
            android:label="YourDrive" >
            <action android:name="android.intent.action.SEND_MULTIPLE" />
        </intent-filter>
    </receiver> 
```

我试过设置一个 mimeType，但没有任何帮助。我是否必须设置特定的 mimeType 或者我可以稍后检查它（在处理内容时通过 Java 代码）？我做错了什么，所以我的应用程序没有出现在所有应用程序的“共享菜单”中......

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T19:03:26.003

> 我想为使用 ACTION_SEND 类型的“隐式意图”使用广播接收器。

`ACTION_SEND`是活动动作，而不是广播动作。您不能`startActivity()`使用 接听电话`BroadcastReceiver`。

> 我做错了什么，所以我的应用程序没有出现在所有应用程序的“共享菜单”中......

您没有实施活动。

[http://developer.android.com/training/sharing/receive.html](http://developer.android.com/training/sharing/receive.html)

# c# - 指定的类型必须是不包含引用的结构

> ID：12901764
> 
> 赞同：5
> 
> 时间：2012-10-15T18:28:36.907
> 
> 标签：c#, .net, exception, structure, memory-mapped-files

我正在尝试在课堂上使用该`Write<T>`功能。`MemoryMappedViewAccessor`在这种情况下，我`T`的情况如下：

```
[StructLayout(LayoutKind.Explicit)]
    public struct Message
    {
        public void AddString(string str)
        {
            if (stringContents == null)
                stringContents = new byte[1024 * 10];
            stringContents = Encoding.ASCII.GetBytes(str);
        }
        public string GetString()
        {
            if (stringContents == null)
                return string.Empty;
            return Encoding.ASCII.GetString(stringContents);
        }
        [FieldOffset(0)]
        public byte[] stringContents;
    } 
```

但是，当我拨打电话时，例如：

```
//Initialized Elsewhere: MemoryMappedViewAccessor writer
Message messageAlreadyOnWire = new Message();
messageAlreadyOnWire.AddString(data);
writer.Write<Message>(0, ref messageAlreadyOnWire); 
```

我收到如下错误：

> 指定的 Type 必须是不包含引用的结构。参数名称：类型

我的结构中唯一的“参考”是一个字节数组。有没有办法解决这个问题？我可以使用固定长度的字节数组，但我不确定如何在不深入研究的情况下声明一个字节数组，我不`unsafe`希望这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:14:07.577

作为此问题的解决方法，您可以使用[MemoryMappedViewStream](http://msdn.microsoft.com/en-us/library/System.IO.MemoryMappedFiles.MemoryMappedViewStream.aspx)而不是 MemoryMappedViewAccessor；然后在其上使用传统的流读/写而不是访问器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:36:43.220

尝试`[MarshalAs(UnmanagedType.ByValArray, SizeConst = Your_Size)]`申请`Message.stringContents`。

# session - GWT 在窗口关闭时结束 Http 会话

> ID：12901772
> 
> 赞同：1
> 
> 时间：2012-10-15T18:29:21.577
> 
> 标签：session, gwt

当我在打开应用程序的情况下关闭浏览器窗口时，我也想结束 http 会话。我已经尝试[在 GWT 中关闭窗口时执行代码，](https://stackoverflow.com/questions/2562658/execute-code-on-window-close-in-gwt)但我在 onClose 方法中放置的任何内容都不会运行。

```
Window.addCloseHandler(new CloseHandler<Window>()
    {

        @Override
        public void onClose(CloseEvent<Window> event)
        {
            //Code in here never executes!
            alert("Hi");
            Window.Location.replace(GWT.getHostPageBaseURL() + "logout.jsp");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:08:44.680

There are actually two methods you can use:

*   **Window.addWindowClosingHandler**: Registers for `ClosingEvent`, which is fired by JavaScript's `$wnd.onbeforeunload`.
*   **Window.addCloseHandler**: Registers for `CloseEvent`, which is fired by JavaScript's `$wnd.onunload`.

see `WindowImpl.initWindowCloseHandler()`, and also `WindowImplIE`

The ClosingEvent is fired a little bit earlier than the CloseEvent.

(There's a third method, `Window.addWindowCloseListener`, which effectively registers both for `$wnd.onbeforeunload` and `$wnd.onunload`, but that method is deprecated.)

The reason why you don't see the alert is probably explained with the javadoc of `ClosingHandler.onWindowClosing()`:

```
 * Fired just before the browser window closes or navigates to a different
 * site. No user-interface may be displayed during shutdown. 
```

And instead of `Window.location.replace()` you should rather make an ajax call for the logout (e.g. using GWT-RPC, or RequestBuilder). The user closes the window, so it can't replace its location anymore.

# azure - 如何在 Windows azure 中添加证书和密钥以及服务标识？

> ID：12901775
> 
> 赞同：1
> 
> 时间：2012-10-15T18:29:32.613
> 
> 标签：azure

我正在开发一个 asp.net 网站，并将在 windows azure 上托管该网站。我的要求是当用户访问像*www.xyz.com\admin*这样的网站时，应该进行实时身份验证，但是当用户访问网站*www.xyz.com*时，则不需要进行身份验证。

在参考了一个 MSDN 文档后，我开始了解 ACS with WIF，因此我创建了命名空间，并以此类推。

但是，每当我访问联合 URL (https://xyz.accesscontrol.windows.net/FederationMetadata/2007-06/FederationMetadata.xml) 时，我都会收到错误消息：

> ID:1089 无法连接远程服务器。

不幸的是，我删除了 Windows azure 中的证书、密钥和服务标识，我不知道如何取回它，我也不知道如何满足我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:50:10.163

如果您删除了证书和密钥，您只需要创建新的即可。您可以使用自签名证书，也可以使用由受信任的证书颁发机构颁发的 X.509 证书。获得 X.509 证书（其中应包含私钥）后，您可以将其上传到 ACS 管理门户（位于[https://xyz.accesscontrol.windows.net/](https://xyz.accesscontrol.windows.net/)）：

![ACS 服务证书](../Images/f7d571561e177c702653a1ec9df60af5.png)

如果没有令牌签名证书，就无法生成 FederationMedatadata.xml。

或者，对您来说最简单的方法就是删除该名称空间并创建一个新名称空间。

# python - Python“setup.py develop”：是否可以在源代码文件夹中创建“.egg-info”文件夹？

> ID：12901776
> 
> 赞同：24
> 
> 时间：2012-10-15T18:29:36.093
> 
> 标签：python, setuptools, distutils

Python 能够通过运行它的`setup.py`脚本来“伪安装”一个包，`develop`而不是`install`. 这会修改 python 环境，因此可以从当前位置导入包（它不会复制到`site-package`目录中）。这允许开发其他包使用的包：源代码被原地修改，并且可以通过简单的`import`.

一切正常，除了该`setup.py develop`命令创建一个`.egg-info`具有与`setup.py`. 混合源代码和临时文件不是一个好主意——这个文件夹需要添加到从 vcs 开始到结束备份系统的多个工具的“忽略”列表中。

是否可以使用但在其他地方`setup.py develop`创建目录，因此原始源代码不会被临时目录和文件污染？`.egg-info`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-24T05:51:06.843

`setup.py develop`就地创建一个 python 蛋；它不会**[** *修改] python 环境，因此可以从当前位置导入包*。您仍然必须将其位置添加到 python 搜索路径或使用它所在的目录作为当前目录。

命令的工作是`develop`创建就地 egg，其中可能包括编译 C 扩展、运行 2to3 python 转换过程以创建 Python3 兼容代码，以及提供*其他*python 代码可能依赖的元数据。当您将软件包作为 egg 安装到您的`site-packages`目录中时，相同的元数据也包含在其中。数据当然不是临时的（它是从您的`setup.py`文件中提取的，以便其他工具解析）。

这样做的目的是，当您在更广泛的系统中使用您的包时，您可以依赖该元数据，该系统依赖于存在的元数据，同时仍在开发包。例如，在[构建](http://www.buildout.org/)[`mr.developer`](http://pypi.python.org/pypi/mr.developer)开发部署中，当我们需要处理给定包时，我们经常使用自动化获取源代码的过程，这将其构建为开发蛋并在我们工作时将其绑定到部署中编码。

请注意，该`.egg-info`目录具有特定用途：向 setuptools 生态系统中的其他工具发出信号，表明您的软件包已安装且可用。如果您的包是您设置中另一个 egg 的依赖项，则满足该依赖项。`pip`并且`easy_install`buildout 不会尝试从其他地方取鸡蛋。

除了创建`.egg-info`目录之外，该命令唯一要做的*另一*件事就是就地构建扩展。因此，您正在寻找的命令是：

```
setup.py build_ext --inplace 
```

这将做完全相同的事情，`setup.py develop`但不包括`.egg-info`目录。它也不会生成`.pth`文件。

没有办法只生成`.pth`文件而忽略`.egg-info`目录生成。

^([从技术上讲，`setup.py develop`还将检查您是否`site.py`安装了 setuptools 文件以支持命名空间包，但这与此处无关。])

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T18:23:14.333

好的方法是将所有源文件保存在特殊目录中，该目录的名称是您的项目名称（使用其他语言的程序员将其代码保存在`src`目录中）。因此，如果您的`setup.py`文件在`myproject`目录中，那么您应该将文件保存在`myproject/myproject`. 无论主目录中发生什么，此方法都会使您的源与其他文件分开。

我的建议是使用白名单而不是黑名单——告诉工具忽略除`myproject`目录内的文件之外的所有文件。我认为这是不要`ignore`太频繁地触摸您的列表的最简单方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T19:28:57.313

试试这个`--install-dir`选项。您可能还想使用`--build-dir`更改构建目录。

# powershell - 添加新 AD 用户时出错

> ID：12901779
> 
> 赞同：0
> 
> 时间：2012-10-15T18:29:56.967
> 
> 标签：powershell, active-directory

我正在编写一个小脚本，以便更轻松地将用户添加到我们的 AD。它只是要求输入的一行 New-ADUser powershell 脚本。它看起来像这样：

```
New-ADUser -Name (Read-Host "User Name") -AccountExpirationDate 0 -CannotChangePassword 1 -ChangePasswordAtLogon 0 -PasswordNeverExpires 1 -Company (Read-Host "Company") -Department (Read-Host "Department") -Title (Read-Host "Title") -Manager (Read-Host "Manager's User Name") -GivenName (Read-Host "Full Name") -MobilePhone (Read-Host "Cell Phone Number") -State (Read-Host "State") -AccountPassword (Read-Host -AsSecureString "Password") -ProfilePath (Read-Host "Roaming Profile Path") -Path (Read-Host "AD Path to User") 
```

它要求所有内容，但在输入所有内容后它返回：“New-ADUser：不是有效的 Win32 FileTime。在 line:1 char:11。” 我在命令中检查了那个位置（它是“New-ADUser”之后的空格），我不知道它为什么会返回那个位置。

这是做我想做的事的有效方法吗？如何修复我的命令以不返回错误？这是我输入到点的内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T18:45:05.217

你必须改变：

```
-AccountExpirationDate 0 
```

和

```
-AccountExpirationDate $null 
```

或者您可以简单地不为未到期的帐户设置此参数。

[此](http://technet.microsoft.com/en-us/library/ee617253.aspx)技术网页面有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-28T15:44:40.037

对于 Windows Server 2016 存在上述问题，并且上述解决方案不起作用（完全）。

我找到了一种解决方法。

是的，上面的 Technet 页面有错误；不幸的是，这也会导致 PowerShell 脚本系统在解析脚本时出现问题

所以 - 错误 #1 - 如果你使用`New-ADUser`指定的命令作为`0`参数，你会得到错误`New-ADUser : Not a valid win32 FileTime.`

当您更改`0`为 时`$null`，您会收到错误 #2 -`The term '(the next parameter in your command)' is not recognized as the name of a cmdlet, function`

我找到了以下解决方案来彻底解决问题：

1.  改变（如上）`-AccountExpirationDate $null`

2.  将此参数移至最后一个参数！否则，您最终会遇到下一个项目被错误解析的错误。您会注意到在 IDE 中参数以错误的颜色显示。

# php - CodeIgniter 中的持久对象

> ID：12901780
> 
> 赞同：1
> 
> 时间：2012-10-15T18:30:06.027
> 
> 标签：php, codeigniter, dll, com

我有一个 php 对象，我希望可以随时访问它。我想创建一次这个对象并保持它的持久性，这样我就不必再次重新加载它。我也希望这个对象可以在我的控制器/模型等中访问。

这可以在不使用会话的情况下在 CodeIgniter/PHP 中实现吗？

或者也许使用会话，但我可以访问它的方法吗？

该对象是使用我的 dll 文件中的 PHP COM 库创建的

这是我的对象的示例：

```
 $myDllObject = new COM("MyDLL.MyCLass"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T20:54:39.993

PHP 有一个执行模型，其中来自主机环境的每个 Web 请求都会生成一个新的、新鲜的 PHP 环境，该环境会在请求完成时被销毁。

所以简单的答案是否定的，你不能创建一个对象并在请求之间持久化它。您必须以其他方式“持久化”该对象：

1.  通过序列化/反序列化，使用会话、数据库、APC 等键值对存储、文件系统上的文件或其他方法。
2.  通过让一个单独的长时间运行的进程持有该对象，并让 PHP 对象通过一些 IPC 方法与其通信，例如共享内存、管道、套接字等。

我对 COM 了解不多，但由于 COM 对象可以在运行进程之外创建，我怀疑可能有一些（非 PHP 特定）方法可以连接到现有对象而不是创建新对象。（这本质上是上面的选项 2，使用 COM 服务作为 IPC。）

稍微挖掘一下 PHP COM 库文档就会发现该[`com_get_active_object()`](http://www.php.net/manual/en/function.com-get-active-object.php)函数，它可能会为您带来一个可行的解决方案。但是，您可能需要从非 PHP 资源中了解有关 COM 的更多信息。另外，**请阅读有关同时使用单个 COM 对象的大警告**：

> 在 Web 服务器上下文中使用`com_get_active_object()`并不总是一个聪明的主意。大多数 COM/OLE 应用程序并非旨在同时处理多个客户端，甚至（或尤其是！）Microsoft Office。您应该阅读[» Office 服务器端自动化的注意事项，](http://support.microsoft.com/kb/257757)以获取有关所涉及的一般问题的更多信息。

这向我表明，创建一个在所有请求之间共享的单例 COM 对象实际上是您*不想*做的！

如果这不起作用，PHP 有一个[对象序列化方法](http://php.net/manual/en/language.oop5.serialization.php)，它允许您将对象的运行状态序列化为字符串，然后将其再次反序列化回相同的状态。您可以通过将[`__sleep()`和`__wakeup()`](http://php.net/manual/en/oop4.magic-functions.php)方法添加到您的类来自定义它。这种机制有一些怪癖，我不知道 PHP COM 库代理对象对它的支持程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:48:38.877

我对 PHP COM 库不是很熟悉，但如果它是一个对象，你不能通过在基本控制器中创建一个对象并在那里创建它来维护它的状态。然后只需从您的 Base 类扩展您的其他类。

```
class Base_Controller extends CI_Controller
{

    public $myDllObject;

    public function __construct()
    {
        $this->myDllObject = new COM("MyDLL.MyCLass");
    }
} 
```

/* 文件结尾 MY_Controller.php *//*位置：./application/core/MY_Controller.php */

示例控制器

```
// ------------------------------------------------------------------------

class YourController extends Base_Controller
{

    public function __construct()
    {
        if (is_object($this->myDllObject))
        {
            echo 'Yep';
        }
        else 
        {
            echo 'Nope';
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T18:50:04.757

请参阅有关[创建库](http://codeigniter.com/user_guide/general/creating_libraries.html)的 CodeIgniter 文档。

创建库后，您可以选择自动加载它`config/autoload.php`，或者，您可以使用加载库`$this->load->library('yourlib');`

*如果您需要在每个*页面请求上创建此类的新实例，请考虑将实例化放在控制器的构造函数中。或者，[创建一个基本控制器](https://stackoverflow.com/a/12486869/568884)类并将其放入该构造函数中。

# c - 如何在此字符串中打印

> ID：12901781
> 
> 赞同：-1
> 
> 时间：2012-10-15T18:30:05.110
> 
> 标签：c

我有一个这样的字符串。

```
char array1[250] = {"Array Values are %d,%d,%d,%d"}; 
```

我有四个这样的整数，

```
int var1 = 25,var2 = 78, var3 = -189,var4 = -200; 
```

我想在array1 中打印var1 到var4。我怎么做？我已经在 array1 本身中有格式说明符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:34:00.920

不要将格式说明符放在数组中。做就是了

```
char array1[128]; // enough space for four ints and the string

sprintf(array1, "Array Values are %d,%d,%d,%d", var1, var2, var3, var4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:31:10.507

只需使用[sprintf](http://linux.die.net/man/3/sprintf)

但创建另一个输出数组，否则您将有未定义的行为，因为您覆盖了格式字符串。

```
char output[126];

sprintf(output, array1, var1, var2, var3, var4); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:31:35.617

`sprintf(array1, array1, var1, var2, var3, var4);`

可以。但是我不确定 C 对同时读取和写入同一字符串的反应如何，强烈建议您先将其复制到单独的变量中。

编辑：根据罗迪的评论，我只想说不*要做*你要求做的事情。格式说明符应该与数据分开，我很肯定您使用它的应用程序可以为良好的设计腾出 25 个字节。

# python - 将具有不同大小行的 txt 值读取到单个 numpy 数组中

> ID：12901786
> 
> 赞同：2
> 
> 时间：2012-10-15T18:30:45.997
> 
> 标签：python, arrays, numpy, io, scipy

我需要读取一个结构如下的文件：

```
 1 2 3 4 5
 6 7 8 9 10
 11 22
 13 14 15 16 17
 18 19 20 21 22
 23 24 
```

我需要在单个数组中读取此文件 = [ 1,2,3, ... , 23, 24]

如何在 numpy 中做到这一点？使用：

```
Array = np.genfromtxt(pathToFile, dtype=float, skip_header=1, comments='/') 
```

没用：

```
Line #796537 (got 2 columns instead of 5) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:55:32.050

更简单的方法：

```
result=np.fromfile(path_to_file,dtype=float,sep="\t",count=-1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T14:42:07.350

改用[`np.fromstring`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromstring.html#numpy.fromstring)？

```
>>> np.fromstring(''.join(open('yourfile.txt', 'r').read().splitlines()),sep=" ")

array([  1.,   2.,   3.,   4.,   5.,   6.,   7.,   8.,   9.,  10.,  11.,
        22.,  13.,  14.,  15.,  16.,  17.,  18.,  19.,  20.,  21.,  22.,
        23.,  24.]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:32:49.087

你为什么需要`numpy`这里？

```
In [101]: with open('data1.txt') as f:
    lis=[float(y) for x in f for y in x.split()]
    print lis
   .....:     
   .....:     
[1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 22.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-24T14:31:06.843

删除新行并保存到另一个文件：

```
open('ofile.txt','w').write(''.join(open('infile.txt', 'r').read().splitlines())) 
```

然后它将起作用：

```
>>> np.genfromtxt('ofile.txt')
array([  1.,   2.,   3.,   4.,   5.,   6.,   7.,   8.,   9.,  10.,  11.,
    22.,  13.,  14.,  15.,  16.,  17.,  18.,  19.,  20.,  21.,  22.,
    23.,  24.]) 
```

# php - PHP - 每个类配置管理器和继承

> ID：12901787
> 
> 赞同：1
> 
> 时间：2012-10-15T18:30:48.553
> 
> 标签：php, dependency-injection, multiple-inheritance

我有一个类，`Injector`用于使用`get_class($this)`Injector 获取类，从 db 或文件加载类中的一些数据......它适用于简单的继承，如`class User extends Injector`.

问题是：如果一个类`SpecialUser`extends `User`，`get_class`只返回`SpecialUser`并且`User`不会填充所需的数据。有没有更好的解决方案然后用 get_parent_class() 循环类？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:44:02.507

您可以使用以下内容：

```
$names = array();

if ($this instanceof Injector) {
    $class = get_class($this);

    do {
        $names[] = $class;
        $class = get_parent_class($class);
    } while ($class !== 'Injector');
} 
```

[这是它的用法示例](http://codepad.org/kBb8RzNh)。

# linux - 在linux中有效地读取和操作大文件

> ID：12901789
> 
> 赞同：-1
> 
> 时间：2012-10-15T18:30:50.853
> 
> 标签：linux, file

我有两个文件

文件 1：

```
030055 a
033366 b 
```

文件 2：

```
03005515077 x||03215549849 y||03336678899 z||03005577733 xx||03005583838 yy 
```

需要一个 Shell 脚本逐行读取文件 1 (030055 a)，分离数字值 (030055)，在文件 2 中找到它。如果找到，将字符值替换为 '030055 a' 中的 'a'。

示例：文件 1 的第一条记录：030055 a 将此与文件 2 进行比较，此数字模式匹配的记录如下

03005515077 x 和 03005577733 xx 和 03005583838 yy

只需将 x、xx 和 yy 替换为 a 即可

03005515077 a 和 03005577733 a 和 03005583838 a

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:55:08.093

这些方面的东西（未经测试）；

```
#!/bin/bash

while read line
do
    COL1 = `cat $line | awk '{print $1}'`
    COL2 = `cat $line | awk '{print $2}'`
    sed "s/(${COL1}[0-9]+)[^||]*||/\1 ${COL2}||/g" file_2 > file_2.out
    mv file_2.out file_2
done < "file_1" 
```

# jquery-plugins - Jquery 工具提示不起作用

> ID：12901791
> 
> 赞同：2
> 
> 时间：2012-10-15T18:31:11.473
> 
> 标签：jquery-plugins

我正在使用 jquery-ui-1.8.20.min.js。

我在页面上有一个超链接，正在尝试执行以下操作，但似乎不起作用。

```
 $('a').tooltip({

        content: function () {
            return 'This is a test';
         } 
      }); 
```

什么都没有出现。我究竟做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T19:29:37.560

[Tooltip](http://api.jqueryui.com/tooltip/)小部件是在[jQuery UI 1.9.0](http://blog.jqueryui.com/2012/10/jquery-ui-1-9-0/)中引入的。

您必须升级到此版本才能使用它。

# cdn - 在 azure cdn 上托管字体 - CORS 支持

> ID：12901792
> 
> 赞同：9
> 
> 时间：2012-10-15T18:31:12.603
> 
> 标签：cdn, azure-storage, cors, azure-blob-storage, azure-cdn

我无法通过在 IE 或 Firefox 中工作的 azure cdn 公开 azure blob 存储托管字体。

我相信这是因为@font-face 跨域问题（CORS），正常的解决方案是添加一个 Access-Control-Allow-Origin 标头。我知道大多数 CDN 现在都支持这一点，但我假设 Azure 仍然不支持。谁能证实这一点？

如果是这种情况，是否有任何解决方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-15T09:23:36.507

这不再是真的，azure 支持 CORS

[http://blogs.msdn.com/b/windowsazurestorage/archive/2013/11/27/windows-azure-storage-release-introducing-cors-json-minute-metrics-and-more.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/11/27/windows-azure-storage-release-introducing-cors-json-minute-metrics-and-more.aspx)

以及将字体添加到 azure cdn 的小指南：

[http://www.devtrends.co.uk/blog/hosting-web-fonts-in-azure-blob-storage-using-the-new-cors-support](http://www.devtrends.co.uk/blog/hosting-web-fonts-in-azure-blob-storage-using-the-new-cors-support)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T18:39:55.237

CDN 不会修改来自源的标头，因此它会响应 blob 存储发出的任何标头。Blob 存储不支持 CORS 标头。

我很惊讶@font-face 有跨域限制，但看来你是对的（对于 Firefox 和 IE）。

如果您有该选项，您可以将字体放在 CDN 后面的云服务（而不是 blob 存储）上，并在那里发出正确的标头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T18:55:11.467

你的评估是正确的。

作为一种解决方法，我们公司正在使用 Google 存储（支持 CORS）。

我还建议对这个问题进行投票，以便 Azure 团队知道有多少人遇到了这个问题。

[http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/2850796-support-cross-origin-resource-sharing-cors-via-a](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/2850796-support-cross-origin-resource-sharing-cors-via-a)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-10T16:52:07.833

我可以使用字体，而无需设置 CORS 选项。我将我的字体直接链接到 blob 存储，而不是 CDN，因为这个不支持来自 blob 的 CORS。

# javascript - “对象不支持属性或方法‘getAttribute’”

> ID：12901795
> 
> 赞同：4
> 
> 时间：2012-10-15T18:31:29.697
> 
> 标签：javascript, dynamics-crm, dynamics-crm-2011, dynamics-crm-online

我正在使用 Dynamics CRM 2011 Online 并尝试重构一些适用于报价 > 添加产品页面的代码，使其也适用于订单 > 添加产品。问题是，当页面加载时，我收到错误“无法获取未定义或空引用的属性'getValue'”。

我进入 IE 控制台（尝试了 IE 9 和 10）并输入了我认为有问题的行：

```
Xrm.Page.getAttribute('ati_clin').getValue() 
```

它抱怨“对象不支持属性或方法'getAttribute'”。我也试过

```
document.getElementById('ati_clin') 
```

但这也失败了。

这对我来说没有意义，因为我可以使用开发人员控制台的 HTML 视图来查找页面上的对象，并且它显然就在那里（也没有错字）。即使其中一个页面在运行时正常运行而另一个页面没有正常运行，该语句在两个页面上的控制台中都失败也是没有意义的。它至少不应该在运行时工作的页面*上工作吗？*

在做了一些研究之后，我认为以下帖子是最相关的，但我担心它不会让*我*得到答案，因为我对此有多新：[Xrm.Page.data is null](https://stackoverflow.com/questions/8357823/xrm-page-data-is-null)

我的问题是，如果元素明显存在，为什么控制台会返回此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:28:29.773

调试这样的问题时的一个方便的技巧：

Xrm.Page 对象存在于框架的上下文中。如果您想在 IE Developer 工具中使用控制台而不需要中断调试模式，您首先必须指向页面上的框架。

例子：

```
frames[0].Xrm.Page.getAttribute('ati_clin').getValue() 
```

# haskell - 使用 Haskell 检索图像的像素值

> ID：12901803
> 
> 赞同：10
> 
> 时间：2012-10-15T18:32:09.723
> 
> 标签：haskell, image-processing, libraries, image-recognition

是否有可用的方法或库可以加载图像（jpeg、png 等）并将该图像的像素值分配到列表或矩阵中？我想做一些图像和模式识别的实验。

向正确的方向轻推一点将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T19:10:04.843

您可以使用 JuicyPixels，这是一个用于图像加载的原生 Haskell 库。这也很容易转换为 REPA（手动或使用 JuicyPixesl-repa）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T18:52:31.143

试试[repa库。](http://hackage.haskell.org/package/repa)[这里](http://www.haskell.org/haskellwiki/Numeric_Haskell%3a_A_Repa_Tutorial)还有一个小教程

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T19:09:25.557

我过去曾为此使用过[repa-devil包。](http://hackage.haskell.org/package/repa-devil-0.3.2.1)它允许您使用 Developer's Image Library (DevIL) 处理多种格式。您可以读取和写入您可能关心的所有格式。

实际图像数据以[Repa](http://hackage.haskell.org/package/repa-3.2.2.2)数组的形式给出。这是一个很棒的数组操作库，可以很容易地编写并行代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-17T08:24:02.857

这是一个新的[Haskell 图像处理库](https://hackage.haskell.org/package/hip)，它使用 JuicyPixels 进行编码，为您提供了以非常简单的方式读取和写入所有支持的格式并以您可以想象的任何方式操作它们的接口。就像一个简单的例子说明它是多么容易：

```
>>> img <- readImageRGB "image.jpg"
>>> writeImage "image90.png" $ rotate90 img 
```

上面将读取 RGB 色彩空间中的 JPG 图像，将其顺时针旋转 90 度并将其保存为 PNG 图像。

哦，是的，它也可以使用 Repa，所以你也可以免费获得并行处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T19:07:01.597

1.  GTK 支持加载和保存 JPEG 和 PNG。[AFAIK，虽然没有其他格式。] 有一个 Haskell 绑定，名为`Gtk2hs`. 它很好地支持*矢量图形，但虽然支持**位图*图形，但并不特别容易弄清楚。所以我写了`AC-EasyRaster-GTK`，它将 GTK 包装在一个更友好的界面中。（但它仍然需要`Gtk2hs`。）唯一真正`Gtk2h`的缺点是在 Windows 上设置有点繁琐。（而且安装一个完整的 GUI 工具包只是为了加载和保存图像文件可以说是矫枉过正。）

2.  我收集的“GD”库支持编写多种图像格式，并且非常小而简单。我相信 Hackage 也有用于 GD 的 Haskell 绑定。我没有亲自尝试过。

3.  有一种名为 PPM 的文件格式被故意设计成非常容易实现（它是一个很小的标题，然后是一个像素数组），因此在 Hackage 上至少有十几个包可以实现它（包括我自己的`AC-PPM`）。还有很多程序可以显示和/或转换这种格式的图像。

# jakarta-ee - ConfigureListener java.lang.ClassNotFoundException

> ID：12901807
> 
> 赞同：0
> 
> 时间：2012-10-15T18:32:21.720
> 
> 标签：jakarta-ee, tomcat7, netbeans-7

**我想用 NetBeans 部署一个 java webarchive 项目。我从 Tomcat 服务器收到错误“ClassNotFoundException”。**

**如何找出缺少哪个 Java 类？**

**NetBeans 的错误（版本 7.2）**

```
 Undeploying ...
    undeploy?path=/Project
    OK - Undeployed application at context path /Project
    In-place deployment at C:\JEE6\NetBeans-Projekt-von-WorkflowAgent\Project_EE\build\web
    deploy?config=file%3A%2FC%3A%2FUsers%2FNoob%2FAppData%2FLocal%2FTemp%2Fcontext5399671692696655653.xml&path=/BARCODEserver
    FAIL - Deployed application at context path /BARCODEserver but context failed to start
    C:\JEE6\NetBeans-Projekt-von-WorkflowAgent\WORKFLOWagent_EE\nbproject\build-impl.xml:1063: The module has not been deployed.
    See the server log for details. 
```

**Tomcat 日志抛出以下错误消息：**

```
Okt 15, 2012 8:03:17 PM org.apache.catalina.core.StandardContext listenerStart
Schwerwiegend: Error configuring application listener of class com.sun.faces.config.ConfigureListener
java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:532)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:514)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:133)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4727)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:655)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:536)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1453)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:791)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1445)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:860)
    at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:357)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1813)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

Okt 15, 2012 8:03:17 PM org.apache.catalina.core.StandardContext listenerStart
Schwerwiegend: Skipped installing application listeners due to previous error(s) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:35:28.760

它告诉你：`com.sun.faces.config.ConfigureListener`

请参阅：[java.lang.ClassNotFoundException：com.sun.faces.config.ConfigureListener](https://stackoverflow.com/questions/10848341/classnotfoundexception-com-sun-faces-config-configurelistener-for-jsf-project-u)

# c++ - C ++ ofstream不写入输出文件？

> ID：12901808
> 
> 赞同：-1
> 
> 时间：2012-10-15T18:32:23.627
> 
> 标签：c++, fstream, ofstream

该代码应该计算输入文本文件中 a、b、c、d、e 和 f 字符的数量，并将输出打印到第二个文本文件中。当我运行代码时，它会创建输出文件，但不会向其中写入任何内容。

```
#include<iostream>
#include<fstream>
#include<cmath>
using namespace std;

int main(){

// establish counters for the number of each character
char x;
int acount=0;
int bcount=0;
int ccount=0;
int dcount=0;
int ecount=0;
int fcount=0;

 ifstream iFile("plato.txt"); //define & open files
 ofstream oFile("statistics.txt");

 if(!iFile){
  cout<<"The file could not be opened.";
  exit(1);
 }

 if(!oFile){
  cout<<"The file could not be opened.";
  exit(1);
 }

 iFile>>x;

 while(!iFile.eof()){
  if(x=='a'||x=='A'){
   acount++;
  }
  else if(x=='b'||x=='B'){
   bcount++;
  }
  else if(x=='c'||x=='C'){
   ccount++;
  }
  else if(x=='d'||x=='D'){
   dcount++;
  }
  else if(x=='d'||x=='D'){
   dcount++;
  }
  else if(x=='f'||x=='F'){
   fcount++;
  }
}

    oFile<<"Number of a/A characters: "<<acount; //write number of characters into statistics file
    oFile<<"\nNumber of b/B characters: "<<bcount;
    oFile<<"\nNumber of c/C characters: "<<ccount;
    oFile<<"\nNumber of d/D characters: "<<dcount;
    oFile<<"\nNumber of e/E characters: "<<ecount;
    oFile<<"\nNumber of f/F characters: "<<fcount;

//close files
 iFile.close();
 oFile.close();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:41:38.230

你有一个无限循环；你在循环中什么都不做，这会改变`ifile.eof()`. 当然，条件一开始就是错误的——你永远不想`ios_base::eof()`在循环中用作条件。您的循环可能应该是：

```
while ( iFile >> x ) { 
```

，虽然对于读取单个字符，使用起来可能更简单`get`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T18:37:25.700

在 while 语句中插入以下行（在其末尾）：

```
iFile>>x; 
```

之前，您只扫描了 x 的第一个值，因此 while 循环一直持续下去。

# c# - 在 switch/case 中使用 for 循环

> ID：12901811
> 
> 赞同：4
> 
> 时间：2012-10-15T18:32:34.827
> 
> 标签：c#, multidimensional-array, switch-statement

我可以在开关/机箱内使用 for 循环吗？

示例代码：

```
String[,] drinks = new String[,] { { "Cola", "20" }, { "Fanta", "20" }, { "Sprite", "20" }, { "Tuborg", "25" }, { "Carlsberg", "25" } };

switch (menuChoice)
{
  case 0:
    Console.WriteLine("Goodbye!");
    Thread.Sleep(500);
    Environment.Exit(0);
    break;
    for (int i = 0; i < drinksCount; i++)
    {
      case i+1:
      buyDrink(drinks[i,0];
      break;
    } 
```

*（更多代码和方法介于这些之间）*

基本上，我用这台机器销售的饮料创建了一个数组，然后我想创建一个菜单来选择这些饮料，还可以在 GUI 中添加更多饮料。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T18:38:09.863

您可以在 switch 语句中使用循环，但不能按照您当前使用的方式。尝试用以下代码替换您的代码：

```
if (menuChoice == 0)
{
    Console.WriteLine("Goodbye!");
    Thread.Sleep(500);
    Environment.Exit(0); 
}
else if (menuChoice > 0 && menuChoice < drinksCount)
{         
    buyDrink(drinks[menuChoice, 0]);
} 
```

**添加：**

根据宝贵的意见，你为什么不直接使用 -1 作为退出的 menuChoice，这样：

```
if (menuChoice == -1)
{
    Console.WriteLine("Goodbye!");
    Thread.Sleep(500);
    Environment.Exit(0);
}
else if (menuChoice > 0 && menuChoice <= drinksCount)
{
    buyDrink(drinks[menuChoice - 1, 0], Convert.ToDouble(drinks[menuChoice - 1, 1]));
} 
```

这样您就可以调用静态方法，如下所示：

```
static void buyDrink(String drink, double drinkPrice) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T18:55:46.563

这个问题的一个更好的标题可能是：是否有可能有可变的案例陈述？

```
 case i+1: 
```

这是一个无效的案例陈述。A case 语句的值必须是常数。如果`i`在这种情况下是一个常数，那么它是被允许的。但是，`i`不是，因此 case 语句不会编译。

话虽如此，尽管标题问题的答案是肯定的，但正如其他答案所示，这里真正的答案是：不是您尝试这样做的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T18:36:28.610

中断后有代码是没有意义的。

你从案件中解脱出来，你期望它如何执行？

```
case 0:
  {   
    break;//If you break here, it exits the block.. your loop never executes
    for (int i = 0; i < drinksCount; i++)
    {
      case i+1:
      buyDrink(drinks[i,0];
      break;
    }
   } 
```

即使有可能，我也看不到重点。只要它大于0，你就会执行这个案例，对吗？那么为什么不直接使用`if statement`, 帮助自己和他人呢？

```
if(menuChoice ==0)
{ 
   //dosomething
}
else if(menuChoice >0)
{
  //buy drink
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T18:39:48.837

```
if(menuChoice == 0) {
    Console.WriteLine("Goodbye!");
    Thread.Sleep(500);
    Environment.Exit(0);
} else if(menuChoice > 0 && menuChoice <= drinksCount) {
    buyDrink(drinks[menuChoice - 1, 0]);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T18:40:34.920

该代码根本无法工作。
中断是案例的最终（也是必需的）陈述。
看看你的例子，你可以简单地写

```
if(menuChoice == 0)
{
    Console.WriteLine("Goodbye!"); 
    Thread.Sleep(500); 
    Environment.Exit(0); 
}
else
{
    buyDrink(drinks[menuChoice-1,0]); 
} 
```

编辑：看到您对 buyDrink 作为静态方法和所需参数的评论，那么您应该更改对 buyDrink 的调用，在定义 buyDrink 方法的类名之前添加价格参数（作为双值）

```
.......
else
{
    BeverageClass.buyDrink(drinks[menuChoice-1,0], Convert.ToDouble(drinks[menuChoice-1,1])); 
} 
```

# java - Applet 在 NetBeans 中运行正常，但在浏览器中显示为灰色框

> ID：12901812
> 
> 赞同：0
> 
> 时间：2012-10-15T18:32:39.037
> 
> 标签：java, swing, browser, netbeans, applet

我的小程序在 NetBeans 中完美运行，但在浏览器中显示为灰色框。我相当肯定它是特定的小程序，因为其他小程序运行得很好，而且我在多台计算机上得到相同的结果。java控制台没有显示任何问题，堆栈以

```
basic: Applet initialized
basic: Starting applet
basic: completed perf rollup
basic: Applet made visible
basic: Applet started
basic: Told clients applet is started 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:33:32.140

我从小程序中删除了除表单代码之外的所有内容，不幸的是，它仍然在浏览器中加载为空白框。我无法确定问题所在。我在 NetBeans 中构建了一个新表单，一点一点地添加我的代码，新的小程序完美运行。

# ios - Web 视图方向 iO

> ID：12901814
> 
> 赞同：0
> 
> 时间：2012-10-15T18:32:43.063
> 
> 标签：ios, xcode

我正在使用 ModalViewController 在我的应用程序中打开 Web 视图。

在我的课堂上，我有这段代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *urlAddress = @"address";
    NSURL *url = [NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];                 
    [myWebView loadRequest:requestObj];

} 
```

好吧，在我的应用程序中，界面方向始终处于纵向模式。但是，当我启动 web 视图时，会显示一个视频，我需要将我的界面更改为各种方向。观察：我不想更改我正在运行模态视图控制器的类。我只想更改视频中的方向。

# php - 当 url 不完整时，XMLHttpRequest 访问控制允许来源

> ID：12901815
> 
> 赞同：0
> 
> 时间：2012-10-15T18:32:43.513
> 
> 标签：php, ajax, http

有时当我提交 ajax 请求时，我会收到此错误

```
XMLHttpRequest cannot load http://www.mysite.com/go/submit. Origin http://mysite.com is not allowed by Access-Control-Allow-Origin. 
```

以下是我想到的解决方案：

```
* Add the allow origin rule everywhere?
* Write .htaccess to always redirect to full url
* Use this method http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/ 
```

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:34:29.473

[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)意味着您无法分析来自另一个“源”（域、端口）的数据（json、html、图像等）。

注意

> 术语“来源”是使用运行脚本的 HTML 文档的域名、应用层协议和（在大多数浏览器中）端口号来定义的

一种解决方案是在提供其他数据的服务器上设置显式允许访问的[CORS 标头：](https://developer.mozilla.org/en-US/docs/HTTP_access_control)

```
Access-Control-Allow-Origin: * 
```

因此，您必须控制为您嵌入的数据提供服务的服务器，而不仅仅是显示它们。

一个有点间接的解决方案是让浏览器认为只有一个来源，方法是在您的服务器上放置一个代理。在 apache 上，您不需要 .htaccess 但`mod_proxy`. 如果您想安装这样的代理，您可能会对[这个 SO 问题](https://stackoverflow.com/questions/12801246/transparent-redirect-to-port-8080)感兴趣（事实上，您可能会对帮助我在我的一台服务器上设置这样的代理的答案更感兴趣）。

如果您唯一的问题是人们输入 mysite.com 而不是 www.mysite.com 并且您只有一台服务器，您可以简单地使用 .htaccess 来重写 URL：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^mysite\.com$ [NC]
RewriteRule ^(.*)$ http://www.mysite.com/$1 [L,R=301] 
```

# c# - 如何检查我的 C# 代码是否以异步模式读取文件？

> ID：12901818
> 
> 赞同：0
> 
> 时间：2012-10-15T18:32:56.123
> 
> 标签：c#, file-io

```
public void fileReader()
{
Stream stream = new FileStream(filename, FileMode.Open , FileAccess.Read , FileShare.None, 30, true);
byte[] Buffer = new byte[30];
while (stream.Read(Buffer, 0, 30) > 0)
{ 
 label1.text=Encoding.UTF8.GetString(Buffer); 
 Thread.Sleep(1000);
}
stream.Dispose();
} 
```

这是我的 C# 代码，每次从文件中读取 30 字节的数据。我已经使用具有 useAsync=true 的 FileStream 构造函数创建了 Stream。这里使用了 stream.Read 方法。

1.  此读取操作是否在 ASYNCHRNOUS 模式下工作？

2.  如何检查这个？

3.  另一个问题是`Encoding.UTF8.GetString(Buffer);`将空格作为“□”字符... y？

4.  除了 1 秒延迟，还有其他方法`Thread.Sleep(1000);`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:39:00.723

不是因为您使用的是同步`Read`方法

如果您希望异步阅读它，则必须使用该`BeginRead`方法

下面是一个来自[MSDN的 BeginRead 用法示例](http://msdn.microsoft.com/en-us/library/system.io.stream.beginread%28v=vs.95%29.aspx)

```
private void ReadStreamAsyncImpl(Stream stream)
    {
        chunk = new byte[chunkSize];
        stream.BeginRead(chunk, 
                         0, 
                         chunkSize, 
                         new AsyncCallback(BeginReadCallback), 
                         stream);
    }

    private void BeginReadCallback(IAsyncResult ar)
    {
        Stream stream = ar.AsyncState as Stream;
        int bytesRead = stream.EndRead(ar);
        StreamContentsAsString += StreamEncoding.GetString(chunk, 0, bytesRead);

        if (bytesRead < chunkSize) {
            // Finished
            isOperationInProgress = false;
            stream.Close();
            if (null != ReadStreamCompleted) {
                ReadStreamCompleted(this, new EventArgs());
            }
        } else {
            ReadStreamAsyncImpl(stream);
        }
    } 
```

也就是说，您可能应该使用 StreamReader 来读取流的字符，而不是自己转换它们。

如果您使用的是 .NET 4.5，您可以使用 ReadAsync 如下（再次来自`[MSDN][2]`）

private async void Button_Click(object sender, RoutedEventArgs e) { UnicodeEncoding uniencoding = new UnicodeEncoding(); 字符串文件名 = @"c:\Users\exampleuser\Documents\userinputlog.txt"; 字节[] 结果；

```
 using (FileStream SourceStream = File.Open(filename, FileMode.Open))
        {
            result = new byte[SourceStream.Length];
            await SourceStream.ReadAsync(result, 0, (int)SourceStream.Length);
        }

        UserInput.Text = uniencoding.GetString(result);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T19:04:51.410

像这样阅读您的文件似乎会给您带来很多问题而没有解决任何问题。我看不到一次读取 30 个字节然后解码结果的意义。您最终可能会错误地解码最后一个字符。

我建议您执行以下操作：

```
using(StreamReader reader = new StreamReader(filename, Encoding.UTF8))
{
    while(!reader.EndOfStream)
    {
        String result = await reader.ReadLineAsync();
        label1.Text = result;
    }
} 
```

但也许 BackgroundWorker 更容易使用，使用进度回调将行发送到 UI。

```
private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
    using(StreamReader reader = new StreamReader(e.Argument as String, Encoding.UTF8))
    {
        while(!reader.EndOfStream)
        {
            String line = reader.ReadLine();
            backgroundWorker.ReportProgress(0, line);
            Thread.Sleep(1000);
            if (backgroundWorker.CancellationPending) 
                return;
        }
    }
}

private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    label1.Text = e.UserState as String;
} 
```

# windows-phone-7 - 与 XNA 合作？

> ID：12901822
> 
> 赞同：1
> 
> 时间：2012-10-15T18:33:08.400
> 
> 标签：windows-phone-7, xna

我想开发一个小游戏，但是当我创建了一个 Windows Phone 游戏解决方案时，我得到的只是 C#。

我习惯于使用 Expression Blend，编辑“页面”及其元素，以便我可以在 Visual Studio 中单独实现它们的代码。

有没有办法为 XNA 游戏提供类似的东西（Visual Studio for code/Blend for UI）？毕竟我和根本不懂代码的人一起工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:30:41.933

看看 FlatRedBall-Engine，它基于 XNA 并且有一些（相当笨重的）编辑器。

我会向您推荐 Beefball 教程：[http ://www.flatredball.com/frb/docs/index.php?title=Tutorials:Beefball](http://www.flatredball.com/frb/docs/index.php?title=Tutorials:Beefball)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T19:53:44.697

不，XNA 项目没有可视化编辑器。您将不得不编写核心或使用第三方库来促进开发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T11:47:57.333

我推荐给 XNA 和 WP7 初学者的这个

[http://blogs.msdn.com/b/tess/archive/2012/03/02/xna-for-windows-phone-walkthrough-creating-the-bizzy-bees-game.aspx](http://blogs.msdn.com/b/tess/archive/2012/03/02/xna-for-windows-phone-walkthrough-creating-the-bizzy-bees-game.aspx)

# scala - 有什么方法可以从 Scala (2.10) 类型标记或符号中获取 Java 类？

> ID：12901823
> 
> 赞同：20
> 
> 时间：2012-10-15T18:33:09.503
> 
> 标签：scala, reflection, scala-2.10

看起来这让我很接近，但（a）不完全（见下文），并且（b）使用名称的字符串表示感觉就像一个黑客......

```
scala> import scala.reflect.runtime.universe._import scala.reflect.runtime.universe._

scala> val t = typeOf[Int]
t: reflect.runtime.universe.Type = Int

scala> t.typeSymbol.asClass.fullName
res0: String = scala.Int

scala> object X { class Y } 
defined module X

scala> val y = typeOf[X.Y]
y: reflect.runtime.universe.Type = X.Y

scala> Class.forName(y.typeSymbol.asClass.fullName)
java.lang.ClassNotFoundException: X.Y [...] 
```

我是否错过了一些更直接的访问这些信息的方法？还是最好，如果我在某个时候还需要类信息，只是为了保留一组并行的 Java 类信息？（啊！）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-15T19:45:23.210

使用反射接收`java.lang.Class`或实例化对象必须使用镜像而不是类型和符号来完成，这些是 Scala 的编译时间信息：

```
scala> val m = runtimeMirror(getClass.getClassLoader)
m: reflect.runtime.universe.Mirror = JavaMirror with ...

scala> m.runtimeClass(typeOf[X.Y].typeSymbol.asClass)
res25: Class[_] = class X$Y 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-05T02:46:16.327

假设`tag`是您要为其获取 java 类的类的类型标记，您可以说：

```
val mirror = tag.mirror
val clazz = mirror.runtimeClass(tag.tpe.typeSymbol.asClass) 
```

与 sschaef 的回答基本相同，只是您应该直接从标签中使用镜像，而不是使用当前类的类加载器的镜像。如果当前类和你有标签的其他类使用不同的类加载器，在这种情况下你会遇到类加载错误，但按照我解释的方式没有错误。

该`clazz`变量将为您尝试获取的任何内容保存 java 类。

# datamapper - 多个多对一关联

> ID：12901825
> 
> 赞同：0
> 
> 时间：2012-10-15T18:33:14.750
> 
> 标签：datamapper, ruby-datamapper

在我的应用程序中，每个游戏都涉及两个角色不同的玩家。一个玩猫，一个玩狗。如何在 Ruby 的数据映射器中描述这一点？

该文档仅提供属性名称与类名称匹配的示例，这将我们限制为每个类一个关联[http://datamapper.org/docs/associations.html](http://datamapper.org/docs/associations.html)

我希望我的游戏有一个猫玩家和一个狗玩家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:14:43.700

您链接的文档有答案。更彻底地阅读。

```
class Player
  include DataMapper::Resource
end

class Game
  include DataMapper::Resource
  belongs_to :cat, 'Player'
  belongs_to :dog, 'Player'
end 
```

更新：如果需要，您可以在 Player 模型中使用这些关联

```
class Player
  include DataMapper::Resource
  has n, :cat_games, :child_key  => [ :cat_id ]
  has n, :dog_games, :child_key  => [ :dog_id ]
end 
```

# javascript - 数组值不正确

> ID：12901826
> 
> 赞同：0
> 
> 时间：2012-10-15T18:33:18.977
> 
> 标签：javascript, jquery, arrays

我有一个数组（拼接到大小 2），它跟踪用户点击（第一个，最后一个）。第一个和最后一个元素是唯一的。

我正在尝试根据用户单击的内容加载内容。正在发生的奇怪的事情是，除非我执行 2 个 console.logs，否则我看不到更新的数组。如果 1 个日志完成，则数组不会更新。我猜这与数组执行/操作时间有关。

我调试的方式是点击处理程序来记录并点击查看数组值。有什么建议或提示吗？

我以前从来没有遇到过这个问题。谢谢。

```
 var clicksInfo = [];

    $('#a, #b, #c').on('click', function(e){

    // array: add, splice
    if(jQuery.inArray($(this).attr('id'), clicksInfo) == -1){
        clicksInfo.push($(this).attr('id'));
        if(clicksInfo.length == 2){
          //  might do something
        }else if(clicksInfo.length == 3){
          clicksInfo.splice(0,1);
        }
      }else{
        clicksInfo.splice(0,1);
        clicksInfo.push($(this).attr('id'));      
      }

      if($(this).attr('id') == 'a'){
        //  do stuff.
      }else if($(this).attr('id') == 'b'){  
        //  do stuff.
      }else if($(this).attr('id') == 'c'){
        //  do stuff.
      }
    });

    $(document).on('click', function(){
      console.log('clicksInfo', clicksInfo);
      // console.log('clicksInfo', clicksInfo);
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:56:06.700

字符串是字符串，数组是数组，即使在 console.log 中也是如此，所以在执行以下操作时：

```
console.log('clicksInfo', clicksInfo); 
```

那是一个字符串，一个逗号，然后是一个数组？

尝试做：

```
console.log('clicksInfo : '+ clicksInfo); 
```

显示字符串表示，或将数组显示为对象，不要将它与其他奇怪混合：

```
console.log(clicksInfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:11:57.727

您面临的问题是发生的事件不能保证按特定顺序执行。可以先执行任一单击处理程序，但在大多数浏览器中，您的#a、#b、#c 处理程序将首先执行。

虽然您可以尝试使用 setTimeout 等待足够长的时间来同步您的数据，但您的代码很可能会中断。

如果您想在这两种情况下处理点击，我的建议是删除#a、#b 和#c 的处理程序。仅使用文档单击处理程序，传入事件声明，然后检查处理程序中被单击元素的 ID 以调用第一个代码。然后，您可以保证在第二个代码块运行之前获得更新的数据。像这样的东西：

```
var clicksInfo = [];

$(document).on('click', function(e){

    if (e.target.id === "a" || e.target.id === "b" || e.target.id === "c") {
        // array: add, splice
        if (jQuery.inArray(e.target.id, clicksInfo) == -1){
            clicksInfo.push(e.target.id);
            if(clicksInfo.length == 2){
                 //  might do something
            } else if(clicksInfo.length == 3){
                clicksInfo.splice(0,1);
            }
        } else {
             clicksInfo.splice(0,1);
             clicksInfo.push(e.target.id);
        }

      if(e.target.id === 'a'){
        //  do stuff.
      }else if(e.target.id === 'b'){  
        //  do stuff.
      }else if(e.target.id === 'c'){
        //  do stuff.
      }
    }

    console.log('clicksInfo', clicksInfo);
}); 
```

[JSFiddle 在这里](http://jsfiddle.net/Z4D6F/)。

# iphone - HPGrowingTextView 和 UIBubbleTableView 在一个视图中？

> ID：12901827
> 
> 赞同：1
> 
> 时间：2012-10-15T18:33:25.667
> 
> 标签：iphone, ipad

我怎样才能把展位放在一起？如果我有Tableview，我需要另一个代表GrowingTextView。似乎很复杂还是我错了？可以在一个视图中使用 HPGrowingTextView 和 UIBubbleTableView 吗？任何提示都非常受欢迎！

问候， MOVT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:18:18.987

希望我以正确的方式理解您的问题...当然可以，`UIBubbleTableView`需要`UIBubbleTableViewDataSource`虽然`HPGrowingTextView`需要它自己的委托，但您仍然可以在一个视图控制器中实现它们，如下所示：

```
bubbleTable.bubbleDataSource = self;
growingTextView.delegate = self; 
```

一旦`HPGrowingTextView`改变了它的大小，`growingTextView:didChangeHeight:`就会被调用（所以确保你已经在视图控制器中实现了这个函数）。您需要做的就是`UIBubbleTableView`根据`HPGrowingTextView`新尺寸进行调整。我认为这甚至可以通过xib中的自动布局来实现。

希望这有助于开始。

# windows - 为什么 LUA_PATH 在 Windows 上包含一个爆炸（！）？

> ID：12901830
> 
> 赞同：3
> 
> 时间：2012-10-15T18:33:33.277
> 
> 标签：windows, lua

我有一个文件`main.lua`：

```
require("hello") 
```

以及`hello.lua`目录中的文件`foo bar! baz`（带有`!`）：

```
module(...,package.seeall)
print("hello from hello.lua") 
```

当我（在 Windows 上）将环境变量`LUA_PATH`设置为目录时：

```
set LUA_PATH="C:\Programme\Lua\5.1\foo bar! baz\?.lua" 
```

我收到一个奇怪的错误：

```
C:\Programme\Lua\5.1>lua main.lua
lua: main.lua:4: module 'hello' not found:
        no field package.preload['hello']
        no file '"C:\Programme\Lua\5.1\foo barC:\Programme\Lua\5.1 baz\hello.lua
"'
        no file '.\hello.dll'
        no file '.\hello51.dll'
        no file 'C:\Programme\Lua\5.1\hello.dll'
        no file 'C:\Programme\Lua\5.1\hello51.dll'
        no file 'C:\Programme\Lua\5.1\clibs\hello.dll'
        no file 'C:\Programme\Lua\5.1\clibs\hello51.dll'
        no file 'C:\Programme\Lua\5.1\loadall.dll'
        no file 'C:\Programme\Lua\5.1\clibs\loadall.dll'
stack traceback:
        [C]: in function 'require'
        main.lua:4: in main chunk
        [C]: ? 
```

看到非常奇怪的路径了`C:\Programme\Lua\5.1\foo barC:\Programme\Lua\5.1 baz\hello.lua`吗？感叹号（bang）有什么特别之处？如何在 Windows 中做到这一点？在 Mac 上，这似乎工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T18:44:04.233

> “这种替换仅在 Lua 第一次设置路径时发生（来自`LUA_PATH`或来自 luaconf 的默认路径）。如果您通过其他方式设置路径，则可以避免该问题。”

更多信息和潜在替代方案：http: [//lua-users.org/lists/lua-l/2012-08/msg00052.html](http://lua-users.org/lists/lua-l/2012-08/msg00052.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-19T05:44:35.913

The explanation is correct (it's documented behavior on Windows), but I can also offer a possible solution (or rather a workaround): since only the first exclamation mark is going to be replaced, instead of using `set LUA_PATH="C:\Programme\Lua\5.1\foo bar! baz\?.lua"`, use:

```
set LUA_PATH="!\foo bar! baz\?.lua" 
```

# xliff - Json 到 XLIFF 覆盖和 XLIFF 到 Json 转换工具

> ID：12901834
> 
> 赞同：2
> 
> 时间：2012-10-15T18:33:58.910
> 
> 标签：xliff

有人可以解释如何将 json 文件转换为 XLIFF 和 XLIFF 文件转换为 json 的详细信息吗？有什么工具可以轻松做到这一点吗？我们正在使用我们公司的JMVC框架和i18n国际化库来构建一个网站。我们在我们的框架中使用 json 文件，但是翻译公司需要 XLIFF 文件。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:32:50.593

您可以使用 Okapi 工具的 JSON 过滤器将 JSON 数据提取/合并到 XLIFF 中，请参见[http://www.opentag.com/okapi/wiki/index.php?title=JSON_Filter](http://www.opentag.com/okapi/wiki/index.php?title=JSON_Filter) 和[http://www.opentag。 com/okapi/wiki/](http://www.opentag.com/okapi/wiki/)

-ys

# macos - PostgreSQL initdb 权限被拒绝但所有者是 postgres

> ID：12901837
> 
> 赞同：1
> 
> 时间：2012-10-15T18:34:05.313
> 
> 标签：macos, postgresql, macports

我正在尝试使用 macports 安装 postgresql90。尝试运行 initdb 时，我不断收到这个奇怪的错误：

```
sudo su postgres -c '/opt/local/lib/postgresql90/bin/initdb -D /opt/local/var/db/postgresql90/defaultdb' 
```

返回此错误：

```
sh: /opt/local/lib/postgresql90/bin/initdb: Permission denied 
```

所以我在想，“好吧，也许 initdb 的权限被破坏了”。然后我做：

```
sudo ls -l /opt/local/lib/postgresql90/bin/initdb 
```

然后回来：

```
-rwxr-xr-x  1 postgres  postgres  66952 25 Sep 10:06 /opt/local/lib/postgresql90/bin/initdb 
```

所以我对 initdb 有正确的权限。我还检查了 defaultdb 以查看权限，他们说所有者也是 postgres ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:36:10.290

检查目录`/opt/local/var/db/postgresql90/defaultdb`。它要么不存在，要么父目录的权限不正确。运行以下命令：

```
sudo chown postgres:postgres /opt/local/var/db/postgresql90 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:26:14.937

一个合理的解释是[sudoers](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/sudoers.5.html)文件配置了 NOEXEC，这样启动的程序`sudo`本身不能执行其他程序。*在这种情况下，权限被拒绝*正是您所得到的。

否则，要检查的另一件事是 postgres 是否已安装在将使用该`noexec`属性挂载的分区上。

# web - 网页顶部保持不变

> ID：12901845
> 
> 赞同：0
> 
> 时间：2012-10-15T18:34:35.960
> 
> 标签：web, webpage

我想创建我的网页，以便顶部的部分显示“欢迎！” 和下面的“主要部分”。当用户单击主要部分中的链接（例如，它链接到`www.example.com`）时，主要部分应更改为 的内容`www.example.com`，但顶部应保持不变。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:37:28.207

我相信你正在寻找

```
<frameset> 
```

标签：[http ://www.w3schools.com/tags/tag_frameset.asp](http://www.w3schools.com/tags/tag_frameset.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:37:58.820

在过去，这是使用[框架](https://www.google.com/search?client=ubuntu&channel=fs&q=iframe+html&ie=utf-8&oe=utf-8#hl=en&client=ubuntu&hs=dVB&channel=fs&sclient=psy-ab&q=frame+html&oq=frame+html&gs_l=serp.3...42346.42346.0.42575.1.1.0.0.0.0.0.0..0.0.les%3B..0.0...1c.1.3kO0uoLF0ug&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=1a830a38825951db&bpcl=35277026&biw=1440&bih=724)完成的，但由于许多原因，它们将不再使用。尝试看一下[iframes](https://www.google.com/search?client=ubuntu&channel=fs&q=iframe+html&ie=utf-8&oe=utf-8)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T18:23:10.597

`<frameset>`HTML5 不支持该标记。虽然`<iframe>`有效，但它会影响您页面的可搜索性 (SEO)，并且设置页面以正确滚动将是一件麻烦事，因为页面的“顶部”部分就像一个页面本身。

如果您在服务器上启用了 PHP，而不是使用 (i)frames，您应该将网页的“顶部”存储为单独的文件，如“top.php”，并在每个页面中包含它

```
include_once("top.php") 
```

# iphone - iPhone / iOS：AVAudioPlayer PlayAtTime：不适用于 iOS 6

> ID：12901847
> 
> 赞同：0
> 
> 时间：2012-10-15T18:34:41.283
> 
> 标签：iphone, ios6, avaudioplayer

嗨，我有许多 AVAudioPlayers，我使用 PlayAtTime 函数同步开始播放。自 4 以来，我的代码在每个 iOS 上都运行良好，但现在它在 iOS 6 中不起作用。还有其他人遇到过这个问题吗？

代码：

```
//Mixers are AVAUdioPlayer instances loaded from before and are fine
NSTimeInterval shortStartDelay = 0.00;            // seconds
NSTimeInterval now = player.deviceCurrentTime

[miXer.music playAtTime:now + shortStartDelay];
[miXer.music2 playAtTime:now + shortStartDelay];
[miXer.music3 playAtTime:now + shortStartDelay];
[miXer.music4 playAtTime:now + shortStartDelay];
[miXer.music5 playAtTime:now + shortStartDelay]; 
```

注意：如果我使用播放功能，一切正常（当然混音器不同步除外），但 playAtTime 无法播放文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T18:39:04.067

你未来的时间必须大于`deviceCurrentTime`工作时间`-playAtTime:`。文档如是说：[https ://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)

您需要设置`shortStartDelay`为大于 0 的值。

**编辑：**

或者，您可能需要先打电话`prepareToPlay`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:18:25.603

不知道你是否已经解决了这个问题。

我遇到了同样的问题，但更简单，因为我只有一个 AVAudioPlayer 实例。当我的应用程序进入后台时，它会暂停播放声音，并且在激活时它应该从头开始播放声音。

我所做的是设置*currentTime*属性并调用*play*：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserverForName:UIApplicationWillResignActiveNotification object:nil queue:nil usingBlock:^(NSNotification *arg1) {
        [self pauseNarration];
    }];
    [[NSNotificationCenter defaultCenter] addObserverForName:UIApplicationDidBecomeActiveNotification object:nil queue:nil usingBlock:^(NSNotification *arg1) {
        [self playNarration];
    }];
}

- (void)playNarration {
    if ([self isAudioPlayerSet]) {
        [_audioPlayer setCurrentTime:0.0];
        [_audioPlayer play];
    }
}

- (void)pauseNarration {
    if ([self isAudioPlayerSet]) {
        [_audioPlayer pause];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-23T13:25:06.213

我正在使用这个，因为原始 AVAudioPlayer 的 playAtTime 不能仅使用您想要开始播放的值偏移量。

// 自定义函数

```
func playAtTime(time: NSTimeInterval) {
    mediaPlayer.pause()
    mediaPlayer.currentTime = time
    mediaPlayer.play()
} 
```

这个流程对我来说效果很好。

# java - Android TimePicker 没有给出想要的结果

> ID：12901848
> 
> 赞同：0
> 
> 时间：2012-10-15T18:34:47.883
> 
> 标签：java, android, timepicker

您好，我正在尝试计算用户 7.5 的睡眠时间。应用程序应该建议用户应该在准确的时间上床睡觉。例如，她选择早上 7:00 作为她的起床时间，该应用程序会建议她在上午 11:30 之前睡觉 我目前尝试的是这样的：

```
public class TimepickerActivity extends Activity implements TimePickerDialog.OnTimeSetListener {

Button btn1, btn2;
TimePicker picker;
TextView tv;

private int hour;
private int minute;

static final int TIME_DIALOG_ID = 999;

@Override
public void onCreate( Bundle savedInstanceState ) {
    super.onCreate(savedInstanceState);
    setContentView( R.layout.activity_timepicker );

    btn1 = (Button) findViewById (R.id.btnShow);
    btn2 = (Button) findViewById (R.id.btnSleepingTime);
    tv = (TextView) findViewById (R.id.textView1);
    picker = (TimePicker) findViewById (R.id.timePicker1);

    setCurrentTimeOnView();
    addListenerOnButton();

}

 // display current time
public void setCurrentTimeOnView() {

    final Calendar c = Calendar.getInstance();
    hour = c.get(Calendar.HOUR_OF_DAY);
    minute = c.get(Calendar.MINUTE);

    // set current time into textview
    tv.setText( new StringBuilder().append(pad(hour))
                                    .append(":").append(pad(minute)));

    // set current time into timepicker
    picker.setCurrentHour(hour);
    picker.setCurrentMinute(minute);

}

public void addListenerOnButton() {

    btn1.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            showDialog(TIME_DIALOG_ID);

        }

    });

}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case TIME_DIALOG_ID:
        // set time picker as current time
        return new TimePickerDialog(this, 
                                     timePickerListener, hour, minute,false);

    }
    return null;
}

private TimePickerDialog.OnTimeSetListener timePickerListener = 
         new TimePickerDialog.OnTimeSetListener() {

    public void onTimeSet(TimePicker view, int selectedHour,
            int selectedMinute) {
        hour = selectedHour;
        minute = selectedMinute;

        Calendar c = Calendar.getInstance();
        c.add(Calendar.HOUR, - selectedHour);
        c.add(Calendar.MINUTE, - selectedMinute);

        // set current time into timepicker
        picker.setCurrentHour(hour + 7);
        picker.setCurrentMinute(minute + 30);

        // set current time into textview
        //tv.setText(new StringBuilder().append(pad(hour))
        //      .append(":").append(pad(minute)));

        tv.setText( picker.getCurrentHour().toString() + ":" + picker.getCurrentMinute().toString()  );

    }
};

private static String pad(int c) {
    if (c >= 10)
       return String.valueOf(c);
    else
       return "0" + String.valueOf(c);
}

public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
    // TODO Auto-generated method stub

}

} 
```

当我输入早上 7:00 作为我的起床时间时，结果是下午 2:30。但应该是下午 12 点 30 分。感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:41:06.953

不，这是正确的。如果您输入上午 7:00 + 7.5 小时 = 14:30 = 凌晨 2:30。该程序运行正常。

**编辑**：你几乎做到了：

```
public class TimepickerActivity extends Activity implements TimePickerDialog.OnTimeSetListener {

    private static final int SUB_HOUR = -7;
    private static final int SUB_MINUTE = -30;

    [...]

public void onTimeSet(TimePicker view, int selectedHour,
        int selectedMinute) {

    // Gets current time
    Calendar c = Calendar.getInstance();

    // Assign hour set in the picker
    c.set(Calendar.HOUR, selectedHour)
    c.set(Calendar.MINUTE, selectedMinute);

    // Have Calendar calculate the substraction of hours and minutes
    c.add(Calendar.HOUR, SUB_HOUR);
    c.add(Calendar.MINUTE, SUB_MINUTE);

    // Get the hour and the minute calculated
    hour = c.get(Calendar.HOUR);
    minute = c.get(Calendar.MINUTE);
    [...] 
```

当然，这意味着之前的分配：

```
 hour = selectedHour;
    minute = selectedMinute; 
```

现在没用了，您可以将其删除。

顺便说一句，您没有考虑当天，例如选择 1:30 am 将返回 6:00 pm 但前一天。

**编辑**：我更正了我的代码。

# mahout - 使用 mahout 构建文本分类器

> ID：12901851
> 
> 赞同：1
> 
> 时间：2012-10-15T18:34:55.800
> 
> 标签：mahout

我想构建文本分类器，其中类别将由文本确定。

我应该使用哪个分类器？

我一直在阅读有关 mahout 的信息。象夫就够了。我有大约 1Mils 文件要训练。

我找不到更好的 mahout 分类器示例/教程。

mahout 是否有我发出请求的 http 服务器，并且 it1 会给我回复？

如果不是我如何在我的网络应用程序中嵌入 mahout (PHP)

请推荐一些关于mahout的好教程..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:09:31.637

似乎您的数据没有标记，所以我相信您正在查看聚类问题。

我强烈建议您从[***Mahout in Action***](http://manning.com/owen/)这本书开始。这本书涵盖了推荐、聚类和分类。它应该包含您入门所需的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:05:56.447

NaiveBayes分类器

Mahout 没有嵌入 http 服务器，您必须自己构建。PHP 可以将服务请求为 http 客户端。

Mahout 中有任何演示实现，但它不是基于 http。

祝你好运！

# windows-runtime - 通过 IMetaDataImport 进行 WinRT IDL 重载反射

> ID：12901855
> 
> 赞同：1
> 
> 时间：2012-10-15T18:35:26.530
> 
> 标签：windows-runtime, overloading, idl

我不确定这在 WinRT 中是新的还是以前存在的；在 IDL 中，您可以编写如下声明：

```
[uuid(E9C62AEE-1494-4A21-BB7E-8589FC751D9D)]
[version(0x06020000)]
[exclusiveto(Windows.Networking.Sockets.DatagramSocket)]
interface IDatagramSocketStatics : IInspectable
{
 [overload("GetEndpointPairsAsync")] HRESULT GetEndpointPairsAsync(
     [in] Windows.Networking.HostName* remoteHostName, 
     [in] HSTRING remoteServiceName, 
     [out] [retval] Windows.Foundation.IAsyncOperation
         <Windows.Foundation.Collections.IVectorView
          <Windows.Networking.EndpointPair*>*>** operation);

 [overload("GetEndpointPairsAsync")] HRESULT GetEndpointPairsWithSortOptionsAsync(
     [in] Windows.Networking.HostName* remoteHostName, 
     [in] HSTRING remoteServiceName, 
     [in] Windows.Networking.HostNameSortOptions sortOptions, 
     [out] [retval] Windows.Foundation.IAsyncOperation
                    <Windows.Foundation.Collections.IVectorView<
                     <Windows.Networking.EndpointPair*>*>** operation);
} 
```

其意图显然是 WinRT 操作“GetEndpointPairAsync”被重载了两次，一次为 GetEndpointPairsAsync，一次为 GetEndpointPairsWithSortOptionsAsync。

是否可以通过 IMetaDataImport 学习到两个底层操作名称？我需要找出来生成调用这些方法的 C 代码，而我从 EnumMethods 得到的只是重载的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T20:29:08.093

重载成员将具有[`OverloadAttribute`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.foundation.metadata.overloadattribute)自定义属性，该属性指定重载的唯一名称。

您可以调用[`IMetaDataImport::EnumCustomAttributes`](http://msdn.microsoft.com/en-us/library/ms231454.aspx)枚举方法定义 (MethodDef) 的自定义属性，识别`OverloadAttribute`是否存在，并解析其字符串参数以获取唯一名称。

# c# - 在 C# 中将击键映射到图像

> ID：12901859
> 
> 赞同：0
> 
> 时间：2012-10-15T18:35:49.960
> 
> 标签：c#, keyboard, mapping, keystroke

我希望在一个我什至不确定是否可以工作的项目上获得一些指导。我想用 C# 编写一个允许我用键盘打字的应用程序，但屏幕上显示的是来自图像库的特定图像。因此，我将存储一些图像，并且我想将每个按键从我的键盘映射到存储的图像。这样的事情可能吗？

如果没有，是否可以编写某种可以导入到 MS Word 中的库，它会对我做类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:05:05.257

[我用http://fontstruct.com](http://fontstruct.com)创建了一个新字体。使用起来非常简单。制作好字体后，您可以将其下载为真正的字体，并将其安装到您的计算机上。

谢谢您的帮助！

# testing - Rspec：在控制器测试中删除 where 语句

> ID：12901860
> 
> 赞同：0
> 
> 时间：2012-10-15T18:35:50.490
> 
> 标签：testing, rspec, controller

我正在编写以下测试：

```
 let!(:city_areas) { FactoryGirl.create_list(:city_area, 30) }

    before {
        @city_areas = mock_model(CityArea)
        CityArea.should_receive(:where).and_return(city_areas)
    }

    it 'should assign the proper value to city areas variable' do
        get :get_edit_and_update_vars
        assigns(:city_areas).should eq(city_areas.order("name ASC"))
    end 
```

测试以下方法：

```
def get_edit_and_update_vars
    @city_areas = CityArea.where("city_id = '#{@bar.city_id}'").order("name ASC").all
end 
```

但是，它失败了，说没有用于 nil:NilClass 的方法 'city_id'，这让我相信它仍在尝试使用实例变量 @bar。

我如何正确地删除这个 where 语句以防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:44:16.610

为什么你在做 @city_areas = mock_model(CityArea) 然后你再也不使用 @city_areas 了？

我会这样测试它：

在模型 CityArea 中为此创建一个命名范围： where("city_id = '#{@bar.city_id}'").order("name ASC")

然后在你的控制器规范中你做

```
describe 'GET get_edit_and_update_vars' do
  before(:each) do
    @areas = mock('areas')
  end

  it 'gets the areas' do
    CityArea.should_receive(:your_scope).once.and_return(@areas)
    get :get_edit_and_update_vars
  end

  it 'assign the proper value to city areas variable' do
    CityArea.stub!(:your_scope => @areas)
    get :get_edit_and_update_vars
    assigns(:city_areas).should eq(ordered)
  end
end 
```

并且您还应该在模型规范上为该新范围创建规范

只是一个提示，你不应该在 before 块中使用 should_receive(...) ，使用存根！在之前并在您想要测试该方法被调用时使用 should_receive

另外，你不应该在测试控制器时使用 factorygirl，你应该总是模拟模型，模型可以在模型规范上测试

# mono - Mono 现在是否支持实体框架 CodeFirst？

> ID：12901861
> 
> 赞同：3
> 
> 时间：2012-10-15T18:35:52.230
> 
> 标签：mono, entity-framework-4.1

标题说明了；他们的兼容性页面显示“实体框架”，但我知道 codefirst 是单独安装的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T18:41:18.340

是的，Mono 分叉了[开源实体框架项目](http://entityframework.codeplex.com/)，其中包括 Code First、Migrations、Enums 等。

# java - 在 O(1) 中将链表添加到另一个链表

> ID：12901862
> 
> 赞同：1
> 
> 时间：2012-10-15T18:35:56.317
> 
> 标签：java, data-structures, linked-list

两个**单向**链表，大小为 m ， r 并且想在第二个链表头部之后插入第一个链表节点，该方法的时间复杂度必须为 O(1)。

这对我来说确实是一个有趣的难题。Eatch time我想到一个解决方案，时间复杂度是O(m+r)

我需要一些提示来解决这个问题。我在这个问题上付出了无用的努力。

编辑：

让我分享一下我到目前为止所拥有的：

1.  创建一个新的链表
2.  添加第二个列表的 HEAD
3.  还是 O(1)
4.  添加第一个列表的所有节点
5.  变成 (n)
6.  从第一个列表中添加其余节点

7.  成为另一个 (n-1)

更新：

你怎么看待这件事？我在这里询问后直接受到启发:) ![在此处输入图像描述](../Images/797882d14dd6bcb99f56df81fb0c7099.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T18:39:37.697

如果你有两个单链表并且没有第一个链表的尾部，这只能在 O(n) 中实现。如果你有尾巴，你只需让它指向第二个列表的头部......

编辑：第二个列表头指向第一个列表的头。持有对第二个列表的第二个节点的引用。向下迭代第一个列表 - 如果您没有对尾部的引用来开始，这也是 O(n) - 并让该点的尾部指向第二个列表的原始第二个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:09:04.137

假设你有这些结构：

*   列表
    *   头节点
    *   尾节点
*   节点
    *   价值
    *   下一个节点

提醒自己：目标是：“在第二个链表头部之后插入第一个链表节点”。

那么你所要做的就是：

```
// Hook up the end of list1 to the original second element of list2
list1.tail.next = list2.head.next;
// Set the second element of list2 to be the first element of list1
list2.head.next = list1.head; 
```

List2 仍然在它之前的位置结束（它的尾节点是相同的）。

你现在有了`list1`一个“浮动”的头，这通常是个坏消息......但是如果你迭代`list1`你会从两个原始列表中获得所有元素......

# amazon-ec2 - 用于配置安全组防火墙的 CDIR 表示法

> ID：12901865
> 
> 赞同：0
> 
> 时间：2012-10-15T18:36:14.183
> 
> 标签：amazon-ec2

在我的[Amazon EC2](http://aws.amazon.com/ec2)实例中，我将防火墙配置为允许从 IP 地址访问`1.2.3.4`。自动完成功能正在完成地址`1.2.3.4/32`。我不知道为什么，我在[AWS 文档](http://aws.amazon.com/documentation)中也没有看到任何提及。

我认为如果我正在配置该类型的地址以允许来自整个 C 块的连接，这可能是有意义的`1.2.3.0`，但我正在配置一个特定的地址。这是我不熟悉的 CIDR 表示法的一些用法吗？自动完成试图用这个符号暗示什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:57:34.030

/32 指定单个地址。一个 c 块的 CIDR 为 1.2.3.0/24，其中包括 254 个可用地址。

这是一个不错的 CIDR 小“备忘单”：[http ://www.oav.net/mirrors/cidr.html](http://www.oav.net/mirrors/cidr.html)

# javascript - Javascript 计算器，可将数年分解为数小时数天数秒数

> ID：12901868
> 
> 赞同：1
> 
> 时间：2012-10-15T18:36:21.973
> 
> 标签：javascript, javascript-events

我有一个问题，为什么我的代码不能正确执行，在应用这些命令时我需要尽可能基本。我点击了转换按钮，什么也没有，我也需要一个命令吗？这是家庭作业，我已经涉猎了好几个小时。

编辑***

```
 <html>
<head>

<script type="text/javascript">
<script>
function Convert()
onclick= document.getElementById('Convert')

    var years = document.getElementById("year").value;
    var days = document.getElementById("days").365.25 * years;
    var hours = document.getElementById("hours").(365.25 * 24) * years;
    var minutes = document.getElementById("minutes").(365.25 * 24 * 60) * years;
    var seconds = document.getElementById("seconds").(365.25 * 24 * 60 * 60) * years;

document.getElementById('days').value = days;
document.getElementById('hours').value = hours;
document.getElementById('minutes').value = minutes;
document.getElementById('seconds').value = seconds;

});
    </script>
  </head>
  <body>
    Years: <input type='text' id='years' /> 
    <button id='Convert'onclick= "Convert()" value= "Convert"/> Convert </button>

    Days: <input type='text' id='days' /> 
    Hours: <input type='text' id='hours' /> 
    Minutes: <input type='text' id='minutes' /> 
    Seconds: <input type='text' id='seconds' /> 
  </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:43:17.480

一些事情（希望他们能让你再次前进）：

1.  你永远不会调用你的函数。将`onClick`处理程序添加到您的按钮。
2.  您正在使用`prompt`固定字符串而不是变量。
3.  您必须从`input`JavaScript 中提取数据。你可以用`document.getElementById()`它。

请注意，我可以给你答案，但家庭作业和学习都是关于自己解决问题的。继续我的建议，看看你能想出什么。如果您再次陷入困境，请用您得到的内容编辑您的问题。

好，下一轮。你必须在你的`Convert`函数中做什么：

1.  首先，从这样的表单中获取信息：

    ```
     var years = document.getElementById("year").value; 
    ```

2.  然后，你计算：

    ```
     var days = 365 * years; 
    ```

3.  最后，写回结果：

    ```
    document.getElementById("days").value = days; 
    ```

一些额外的提示：

1.  `id='Convert'`您在and之间缺少一个空格`onclick`
2.  为 Firefox安装像[Firebug这样的调试器。](https://addons.mozilla.org/nl/firefox/addon/firebug/)

祝你好运！

第三轮；这是完整的答案。试着了解发生了什么。从工作示例中学习通常是件好事。

我发现的额外内容：

1.  `<script>`html 中的额外标签
2.  函数定义错误，应该是`function foo() { }`

------ 完整答案如下 -----

```
<html>
<head>

<script type="text/javascript">

// Declare a function called Convert()
function Convert() {
    // Get the value of what the user entered in "years"
    var years = document.getElementById("years").value;

    // Calculate all the other values
    var days = years * 365.25;
    var hours = days * 24;
    var minutes = hours * 60;
    var seconds = minutes * 60;

    // Write the results in the input fields    
    document.getElementById('days').value = days;
    document.getElementById('hours').value = hours;
    document.getElementById('minutes').value = minutes;
    document.getElementById('seconds').value = seconds;
}
</script>
</head>
  <body>
    Years: <input type='text' id='years' /> 
    <!-- define a button that will call Convert() when clicked on -->
    <button id='Convert' onclick= "Convert()" value="Convert">Convert</button>

    Days: <input type='text' id='days' /> 
    Hours: <input type='text' id='hours' /> 
    Minutes: <input type='text' id='minutes' /> 
    Seconds: <input type='text' id='seconds' /> 
  </body>
 </html> 
```

# android - Android 模拟器上不再显示菜单项图标

> ID：12901869
> 
> 赞同：0
> 
> 时间：2012-10-15T18:36:28.117
> 
> 标签：android, menu, icons, updates

正如标题所说，我的菜单项在 Android 模拟器中不再有图标。我正在使用 API 16 进行开发，最近下载了可用于 SDK 和 ARM 映像的更新。即使在删除并重新安装整个 Android SDK 之后，问题仍然存在。我知道这不是我自己的代码，因为我恢复到已知版本并且它也有同样的问题。相同的版本按预期在实际设备上运行。我之前也使用 API 7 在模拟器上运行了该应用程序，并且图标看起来很好。有谁知道这是否是最近更新的已知问题？

截屏：

![在此处输入图像描述](../Images/b86ee255206287d13107bcba26284adb.png)

以前，菜单项都出现在底部的一行中，图标在文本上方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:35:56.683

> As the title says, my menu items no longer have their icons in the Android emulator.

This is the way the overflow appears on Android 4.0+, for devices and emulators with an off-screen MENU button.

> Even after removing and reinstalling the whole Android SDK, the issue persists.

It will persist on the tens of millions of Android 4.x devices as well, or at least those that have a MENU button. Devices sans MENU button will have a similar-looking drop-down menu, emanating from the ... affordance on the right side of their action bar.

> The same version runs on an actual device as expected.

That actual device is not running Android 4.x, presumably.

> Does anyone know if this is a known issue with the recent update?

If by "recent update" you mean the nearly-year-old release of Android 4.0, then yes.

# c++ - 在 Ubuntu 12.04 32bit 上安装和编译 ZeroMQ/ZMQ/0MQ

> ID：12901871
> 
> 赞同：7
> 
> 时间：2012-10-15T18:36:28.660
> 
> 标签：c++, c, ubuntu, compiler-errors, zeromq

我真的很想将 0MQ 用于个人项目，但我很难在安装后编译东西

这是我所做的：

```
#### 安装先决条件没有错误：####
$ sudo apt-get install libtool autoconf automake uuid-dev build-essential

#### 获取 0MQ：####
$ cd ~/下载
$ wget http://download.zeromq.org/zeromq-3.2.1-rc2.tar.gz
$ tar -xvzf zeromq-3.2.1-rc2.tar.gz

#### 安装 0MQ 没有错误：####
$ cd zeromq-3.2.1
$ ./配置
$ 制作
$ sudo 安装
$ sudo ldconfig

#### 获取 imatix zguide：####
$ cd ~/下载
$ wget https://github.com/imatix/zguide/tarball/master
$ tar -xvzf 大师

```

这是我需要帮助的地方。在 imatix 的“examples/C”和“examples/C++”文件夹中运行“./build all”只会导致大量错误。我还尝试分别在“/examples/C/”和“/examples/C++/”目录中使用“./c”和“./c -p”命令进行编译。我没有收到错误，但它们会生成“.o”和“.opp”文件。这些是可执行文件吗？编译后我尝试了“chmod +x”和“chown 777”无济于事。这是我所做的：

```
#### 生成 hwclient.o ####
$ cd imatix-zguide-a690f10/
$ cd 示例/C/
$ ./c hwclient.c
正在编译 hwclient...
$ ./hwclient.o
bash：./hwclient.o：权限被拒绝

#### 生成 hwclient.opp ###
$ cd ../C++/
$ ./c -p hwclient.cpp
正在编译 hwclient...
$ ./hwclient.opp
bash：./hwclient.opp：权限被拒绝

```

我还尝试使用 g++ 进行编译，这只会导致与运行“./build all”类似的错误：

```
$ g++ hwclient.cpp -o hwclient.exe
/tmp/ccWFyLHw.o：在函数“主”中：
hwclient.c:(.text+0x16): 未定义对“zmq_ctx_new”的引用
hwclient.c:(.text+0x3a): 未定义对“zmq_socket”的引用
hwclient.c:(.text+0x52): 对“zmq_connect”的未定义引用
hwclient.c:(.text+0x73): 对“zmq_msg_init_size”的未定义引用
hwclient.c:(.text+0x7f): 对“zmq_msg_data”的未定义引用
hwclient.c:(.text+0xb9): 未定义对“zmq_msg_send”的引用
hwclient.c:(.text+0xc5): 未定义对“zmq_msg_close”的引用
hwclient.c:(.text+0xd1): 对“zmq_msg_init”的未定义引用
hwclient.c:(.text+0xed): 对“zmq_msg_recv”的未定义引用
hwclient.c:(.text+0x10d): 未定义对“zmq_msg_close”的引用
hwclient.c:(.text+0x12e): 对“zmq_close”的未定义引用
hwclient.c:(.text+0x13a): 未定义对“zmq_ctx_destroy”的引用
collect2: ld 返回 1 个退出状态

```

下一步是什么/我错过了什么？我查看了整个 0MQ 站点和 wiki，但似乎没有其他人有问题。我犯了一个菜鸟错误吗？我是否错误地执行了“.o”或“.opp”文件？它们甚至是可执行文件吗？

请帮忙。我真的很想用0MQ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T05:09:59.030

我发现我必须升级到 ZeroMQ 3.2.x 才能让示例正确编译。CentOS/EPEL 软件库中的当前版本是 2.1.9，它不适用于 zguide 中的示例。我这里的例子是在 CentOS 6.3 服务器上完成的。

```
yum remove zeromq zeromq-devel
wget http://download.zeromq.org/zeromq-3.2.2.tar.gz
tar zxvf zeromq-3.2.2.tar.gz && cd zeromq-3.2.2
./configure
make && make install
cd ~/zguide/examples/C
gcc -o hwclient hwclient.c -lzmq 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T15:52:34.183

在讨论了几个 IRC 频道后，我想通了。

```
#### 使用以下命令构建单个文件：####
./c -p 文件名.cpp
g++ -o 文件名 文件名.opp -lzmq

#### 在文件夹中构建所有内容####
CCLIBS='-lzmq' ./build all

```

# android - 为本机应用程序 Web 视图设置 cookie

> ID：12901872
> 
> 赞同：0
> 
> 时间：2012-10-15T18:36:34.313
> 
> 标签：android, ios, mobile, cookies, uiwebview

我有一个与 iOS 本机 webview 中的 cookie 有关的有趣问题。

当 Twitter、Pulse 和其他新闻阅读器等应用程序链接到我们的内容时，即使我们的 cookie 设置为 60 分钟，cookie 也不会保留在单个会话之外。

我的假设是每次加载一篇文章时都会加载一个新的 webview 实例并删除所有 cookie 数据，即使用户仍在同一个会话中。在 Android 上的相同应用程序中，cookie 在应用程序中的整个会话中持续存在，而不仅仅是 webview 会话。

有人在 iOS 上看到过这个问题吗？是否有可能在整个应用程序会话中持续存在的 cookie 的替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:08:42.493

This is expected behavior. iOS sandboxes application data including cookies. Some recommended reading:

[Understanding cookie storage](https://stackoverflow.com/questions/2520331/understanding-nshttpcookiestorage-for-the-iphone)

[Apple URL Loading System Overview](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Concepts/URLOverview.html)

[Where are an UIWebView's cookies stored?](https://stackoverflow.com/questions/771498/where-are-an-uiwebviews-cookies-stored)

# mod-rewrite - 剥离查询字符串后重写条件不起作用

> ID：12901874
> 
> 赞同：1
> 
> 时间：2012-10-15T18:36:39.967
> 
> 标签：mod-rewrite, url-rewriting, iis-6, iirf

我在 Windows 2003 服务器上的 IIS6 上使用 iirf。我们有以下代码来显示干净的 url 并删除任何查询字符串：

```
RewriteRule ^/(.+)\?(.+)&(.+)\.(htm)$  /$1    
RewriteRule ^/(.+)\?(.+)$       http://betatest.bracknell-forest.gov.uk/$1 [R=301]

# Redirect to ASP if it exists.
# e.g. example.com/foo will display the contents of example.com/foo.asp

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.asp -f
RewriteRule ^(.+)$ $1.asp [L,QSA] 
RedirectRule ^/(.+)\.(asp)$       http://betatest.bracknell-forest.gov.uk/$1 [R=301]

# Any bare URL will get rewritten to a URL with .htm appended
RewriteRule ^/([\w]+)$ /$1.htm [I,L]
RedirectRule ^/(.+)\.(htm)$       http://betatest.bracknell-forest.gov.uk/$1 [R=301] 
```

问题是因为我添加了 RewriteRule ^/(.+)\?(.+)&(.+).(htm)$ /$1
RewriteRule ^/(.+)\?(.+)$ [http:/ /betatest.bracknell-forest.gov.uk/](http://betatest.bracknell-forest.gov.uk/) $1 [R=301]

所有查询字符串参数都在我们实际需要它们的地方被删除（抱歉 - url 在外部不可用）： betatest.bracknell-forest.gov.uk/news.asp?page=2 实际上我们想要剥离的唯一查询字符串条件参数是它是否包含 Facebook 参数 fb_action_ids=52352315213 例如 betatest.bracknell-forest.gov.uk/help?fb_action_ids=372043216205703&fb_action_types=og.likes&fb_source=aggregation&fb_aggregation_id=288381481237582 我试过使用：

```
RewriteCond %{QUERY_STRING} ^ fb_action_ids=(.)$ [I] 
```

在第一对规则之前，但它似乎没有做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:34:56.010

刚刚设法解决它，男孩感觉就像是我肩上的负担：

```
#key thing I have changed is to specify the query string parameters fb_action_ids and fb_source
RewriteRule ^/(https?)://([^/]+)(/([^\?]+(\?(.*))?)?)?  /$1
RewriteRule ^/(.+)\?(fb_action_ids=(.*)|fb_source=(.*))$  http://betatest.bracknell-forest.gov.uk/$1 [R=301]

# e.g. example.com/foo will display the contents of example.com/foo.asp
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.asp -f
RewriteRule ^(.+)$ $1.asp [L,QSA] 
RedirectRule ^/(.+)\.(asp)$       http://betatest.bracknell-forest.gov.uk/$1 [R=301]

# Any bare URL will get rewritten to a URL with .htm appended
RewriteRule ^/([\w]+)$ /$1.htm [I,L]
RedirectRule ^/(.+)\.(htm)$       http://betatest.bracknell-forest.gov.uk/$1 [R=301] 
```

# c++ - 使用两个访问者提升图形库

> ID：12901877
> 
> 赞同：2
> 
> 时间：2012-10-15T18:36:59.117
> 
> 标签：c++, boost, boost-graph

经过一些测试后，我观察到 stamp_times 访问者是问题所在：

```
typedef adjacency_list <vecS, vecS, undirectedS> Graph;
typedef graph_traits <Graph>::edge_descriptor Edge;
typedef graph_traits <Graph>::vertex_descriptor Vertex;

Graph g(edges.begin(), edges.end(), n);

typedef graph_traits <Graph>::vertices_size_type Size;

std::vector<Size> dtime(num_vertices(g));
Size time = 0;

breadth_first_search(g, s, visitor(make_bfs_visitor(
                       stamp_times(dtime.begin(), time, on_discover_vertex())))); 
```

（我得到的代码更少相同的错误）。

我需要使用两个访问者，一是记录前辈，二是获取访问时间。

```
boost::breadth_first_search
    (g, s,
     boost::visitor(boost::make_bfs_visitor
            (std::make_pair(
            boost::record_predecessors(&p[0], boost::on_tree_edge()),
            stamp_times(dtime.begin(), time, on_discover_vertex()))))); 
```

但是这个代码事件不编译。我收到以下错误。

```
/usr/include/boost/graph/visitors.hpp: In member function ‘void boost::time_stamper<TimeMap, TimeT, Tag>::operator()(Vertex, const Graph&) [with Vertex = long unsigned int, Graph = boost::adjacency_list<boost::vecS, boost::vecS, boost::undirectedS>, TimeMap = __gnu_cxx::__normal_iterator<long unsigned int*, std::vector<long unsigned int> >, TimeT = long unsigned int, Tag = boost::on_discover_vertex]’:
/usr/include/boost/graph/visitors.hpp:109:8:   instantiated from ‘void boost::detail::invoke_dispatch(Visitor&, T, Graph&, mpl_::true_) [with Visitor = boost::time_stamper<__gnu_cxx::__normal_iterator<long unsigned int*, std::vector<long unsigned int> >, long unsigned int, boost::on_discover_vertex>, T = long unsigned int, Graph = const boost::adjacency_list<boost::vecS, boost::vecS, boost::undirectedS>, mpl_::true_ = mpl_::bool_<true>]’
/usr/include/boost/graph/visitors.hpp:140:5:   instantiated from ‘void boost::invoke_visitors(Visitor&, T, Graph&, Tag) [with Visitor = boost::time_stamper<__gnu_cxx::__normal_iterator<long unsigned int*, std::vector<long unsigned int> >, long unsigned int, boost::on_discover_vertex>, T = long unsigned int, Graph = const boost::adjacency_list<boost::vecS, boost::vecS, boost::undirectedS>, Tag = boost::on_discover_vertex]’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T19:59:57.413

[`stamp_times`](http://www.boost.org/libs/graph/doc/time_stamper.html)（和其他 EventVisitor）需要一个[`WritablePropertyMap`](http://www.boost.org/libs/property_map/doc/WritablePropertyMap.html). 根据[this](http://www.boost.org/libs/property_map/doc/property_map.html#sec%3aproperty-map-types)有`property_traits`允许使用c ++指针作为属性映射的专业化，并且根据[this](http://www.boost.org/libs/graph/doc/using_property_maps.html) “由于std :: vector的迭代器（通过调用begin（）获得）是一个指针，指针属性映射方法也适用对于 std::vector::iterator"。显然，这最后一部分不适用于最新版本的 g++（在 4.6.3 和 4.7.1 上测试）。所以为了调用`stamp_times`你需要使用`&dtime[0]`而不是`dtime.begin()`.

# google-apps-script - 需要帮助解析页面并使用 Google Apps 脚本中的 RegEx 模式将找到的所有评论放入数组中？

> ID：12901878
> 
> 赞同：0
> 
> 时间：2012-10-15T18:36:59.227
> 
> 标签：google-apps-script

我的问题在于 2 个部分，但我希望解决 1 个部分可以解决另一个部分。我一直在尝试解析一个页面并获取在论坛线程中找到的所有评论。

使用 RegEx 模式找到评论，其想法是评论中的任何内容都将被读入数组，直到没有更多评论为止。每个评论 div 都遵循这种格式

```
<div id="post_message_480683" style="margin-right:2px;"> something </div> 
```

我正在尝试定位到“post_message_[some number]”，因为每个数字似乎都是随机生成的，然后得到该特定 div 之间的任何内容。我的第一个问题是我的 RegEx 似乎不起作用我尝试了一些但没有产生任何结果（除了我手动插入帖子消息编号时），这是到目前为止的代码：

```
function GetPosts() {
   var posts = new Array(60);
   var url = "http://forums.blackmesasource.com/showthread.php?p=480683";
   var geturl = UrlFetchApp.fetch(url).getContentText().toString();
   var post_match = geturl.match(/<div id="post_message_(.+)" style="margin-right:2px;">(\w.+)<\/div>/m);
   Logger.log(post_match); 
   } 
```

编辑：我最初尝试通过 GAS 的 Xml.Parse() 类获取此信息，但在获取 URL 后，我只是不知道后缀后该怎么做

```
.getElement().getElement('div') (I also tried .getElements('div') and other variations with 'body' & 'html') 
```

会导致错误。这是我在尝试 RegEx 路由之前尝试的最后一次代码尝试：

```
function TestArea() {
  var url = "http://forums.blackmesasource.com/showthread.php?p=480683";
  var geturl = UrlFetchApp.fetch(url).getContentText().toString();

  //after this point things stop making sense
  var parseurl = Xml.parse(geturl, true);
  Logger.log(geturl);

   //None of this makes sense because I don't know HOW! 
   //The idea: Store each cleaned up Message Div in an Array called posts 
   //(usually it's no more than 50 per page) 
   //use a for loop to write each message into a row in GoogleSpreasheet
    for (var i = 0; i <= parseurl - 1; i++) {
      var display = parseurl[i];
      Logger.log(parseurl); }
} 
```

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:11:53.330

一般来说，就像评论指出的那样——注意用 RegEx 解析 HTML。

在我过去的个人经验中，我使用 Yahoo 的 YQL 平台来运行 HTML，并在他们的服务上使用 XPath。对于简单可靠的标记，似乎工作得很好。然后，您可以将其转换为 JSON 或 XML REST 服务，您可以通过 UrlFetch 获取并处理该简化响应。这里没有背书，但这可能比将完整的原始 HTML 放入 Google Apps 脚本更容易。有关 YQL 控制台，请参见下文。我也不知道他们的配额是多少——你应该检查一下。

当然，最好的办法是说服网站所有者提供 RSS 提要或 API。

![YQL 控制台](../Images/0079140612ff0368ffba0068df357006.png)

# sql-server - 从 MS SQL 数据库中存储的用户代理数据中过滤浏览器信息

> ID：12901883
> 
> 赞同：3
> 
> 时间：2012-10-15T18:37:32.960
> 
> 标签：sql-server, coldfusion, user-agent

我已将访问者的`user_agent`信息存储在我的 MS-SQL 数据库中。每行都有这种常规格式：

`Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; F-6.0SP2-20041109; InfoPath.1; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022; .NET CLR 1.1.4322; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; AskTbORJ/5.14.1.20007)`

是否可以过滤和显示浏览器信息？如果字符串包含`%MSIE 8.0%`则输出为 IE8，如果它包含`%Firefox%`则输出为 Firefox 等。

我到处搜索，但找不到任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:40:20.900

您可以使用`CASE`表达式来处理：

```
SELECT CASE 
    WHEN user_agent LIKE '%MSIE 8.0%' THEN 'IE8'
    WHEN user_agent LIKE '%Firefox%' THEN 'Firefox'
    ELSE 'There are other browsers?'
    END AS Browser
FROM YourTable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T21:51:08.710

您可以通过为更多类型的浏览器添加处理代码来改进此功能，甚至可以为 GoogleBot 等机器人添加处理代码。[T-SQL 功能：如何解析 UserAgent 以提取浏览器名称](http://www.consultsarath.com/contents/articles/KB000009-tsql-function-how-to-parse-useragent-to-extract-browser-name.aspx)

> 在某些情况下，例如 Internet Explorer，这非常简单 - 只需查找常规短语 MSIE 6.0 或 MSIE 8.0 的存在。但是对于其他浏览器，这并不简单......因此对于每个浏览器，您必须使用不同的提取技术来提取正确的浏览器名称和版本。
> 
> TSQL 函数如下所示：
> 
> ```
>  CREATE FUNCTION [dbo].[GetBrowserName](@UserAgent VARCHAR(200))
>    RETURNS VARCHAR(30)
>    AS
>    BEGIN
>    DECLARE @BrowserName VARCHAR(30)
>    SET @BrowserName = CASE
>           WHEN PATINDEX('%MSIE 8.0%',@UserAgent) > 0
>                  THEN 'Internet Explorer 8.0'
>           WHEN PATINDEX('%MSIE 7.0%',@UserAgent) > 0
>                  THEN 'Internet Explorer 7.0'
>           WHEN PATINDEX('%MSIE 6.0%',@UserAgent) > 0
>                  THEN 'Internet Explorer 6.0'
>           WHEN PATINDEX('%MSIE 5.0%',@UserAgent) > 0
>                  THEN 'Internet Explorer 5.0'
>           WHEN PATINDEX('%Firefox%',@UserAgent) > 0
>                  THEN 'Mozilla ' + REPLACE(SUBSTRING(@UserAgent,
>                        PATINDEX('%Firefox%',@UserAgent), 100),'/', ' ') 
>           WHEN PATINDEX('%Chrome%',@UserAgent) > 0
>                  THEN 'Google ' + REPLACE(SUBSTRING(@UserAgent,
>                        PATINDEX('%Chrome%',@UserAgent), 
>                               PATINDEX('%Safari%',@UserAgent) -
>                                      PATINDEX('%Chrome%',@UserAgent)),'/', ' ') 
>           WHEN PATINDEX('%Safari%',@UserAgent) > 0
>                  THEN 'Safari ' + REPLACE(SUBSTRING(@UserAgent,
>                        PATINDEX('%Version%',@UserAgent),
>                               PATINDEX('%Safari%',@UserAgent)-
>                                      PATINDEX('%Version%',@UserAgent)),'Version/', '')
>           WHEN PATINDEX('%Opera%',@UserAgent) > 0
>                  THEN REPLACE(SUBSTRING(@UserAgent,
>                        PATINDEX('%Opera%',@UserAgent),
>                               PATINDEX('%(%',@UserAgent)-2),'/', ' ')
>           ELSE
>                  'Unknown Browser'
>           END
>    RETURN(@BrowserName)
>    END 
> ```

# c - c fgets char数组

> ID：12901890
> 
> 赞同：1
> 
> 时间：2012-10-15T18:38:17.293
> 
> 标签：c, char, fgets

我有一个问题`fgets`。我无法在 if 语句中保存字符串“temp”。

编码：

```
 1 #include <stdio.h>
      2 #include <string.h>
      3 #include<stdlib.h>
      4 
      5 void moep(char** tmp){
      6         FILE *fp;
      7         fp=fopen("moep", "r");
      8         int line_num = 1;
      9         int find_result = 0;
     10         char* str="jochen";
     11         char temp[512];
     12 
     13 while(fgets(temp, 512, fp) != NULL) {
     14                 if((strstr(temp, str)) != NULL) {
     15                         printf("A match found on line: %d    \n", line_num);
     16                         tmp[find_result]=temp;
     17                         printf("\n%s\n", tmp[find_result]    );
     18                         find_result++;
     19                 }
     20                 line_num++;
     21         }
     22 fclose(fp);
     23 printf("tmp[0]:%s\n",tmp[0]);
     24 tmp[1]="ich funktioniere";
     25 }
     26 
     27 int main(){
     28 
     29         char* tmp[1];
     30         moep(tmp);
     31         printf("%s, %s\n",tmp[0],tmp[1]);
     32         return 0;
     33 } 
```

和 moep 是：

```
unwichtig1
jochen g
unwichtig2
unwichtig3 
```

输出：

```
/在线找到匹配项：2

约成克

tmp[0]:unwichtig3

��Ł�, ich funktioniere

```

为什么我不能保存“jochen” `tmp[0]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:42:46.887

分配给 tmp[1] 是分配给随机内存，因为你的数组不是那么大。它会产生各种不良的副作用——包括使程序崩溃。

您还重用了 temp[] 数组 - 因此它将不断被覆盖，如果您想保留它，您需要复制字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:42:48.963

有几个问题。我根本没有看`moep()`，只是`main()`。

您可能不打算声明`tmp`为：

```
 char* tmp[1]; 
```

这声明了一个指针，但不指向任何地方。访问其中的第二个元素不是“kosher”，因为它被声明为一个元素。（但这没关系，因为没有分配数组。）

可能你的意思是

```
 char  tmp[2]; 
```

这为两个字符分配了一个空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:43:38.057

这有点乱。

`temp`是一个指向 char 的指针数组。您将指向 temp 的指针分配给该数组的第一个、第二个等元素。也就是说，这始终是相同的值，因为`temp`它本身不会改变，并且它的内容在循环的每次迭代中都会被覆盖。

用于`strncpy()`从一个字符串复制到另一个字符串。

# android - 如何使用 Google Analytics 跟踪我的 Android 应用中的搜索查询？

> ID：12901891
> 
> 赞同：1
> 
> 时间：2012-10-15T18:38:20.440
> 
> 标签：android, search, google-analytics, google-analytics-api

我的应用中有一个自定义搜索引擎，我想跟踪

1.  用户在 EditText 中输入的搜索查询
2.  用户从结果列表中单击的搜索结果
3.  用户每次会话进行多少次搜索

这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:45:14.403

最简单的方法是使用[EasyTracker](https://developers.google.com/analytics/devguides/collection/android/v2/parameters)和根据您的需要制作的 API。显然那里发生了一些变化，因为它说明了 V2 和有限的测试版，但我几个月前使用它，它实际上只是几行代码，你可以指定自己，跟踪什么。

# ruby-on-rails - Rails 应用程序中的数据库

> ID：12901893
> 
> 赞同：1
> 
> 时间：2012-10-15T18:38:27.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 Rails 应用程序中找不到数据库所在的位置。我查看了、 和之类的文件夹`/db`，但找不到可以打开以检查数据的实际数据库。它位于哪里？`/db/migrate``/app/models`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:40:20.940

在项目目录中尝试`rails dbconsole`从命令行运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:34:33.413

如果您正在运行 SQLite Db（默认情况下运行 Rails），您可以下载 SQLite DB Browser (http://sqlitebrowser.sourceforge.net/)，然后打开 db/sqlite3 文件以查看实际数据，或者如果您正在使用 mysql，请查看：[http ://www.sequelpro.com/](http://www.sequelpro.com/)

# open-source - 如何许可部分文件？

> ID：12901895
> 
> 赞同：1
> 
> 时间：2012-10-15T18:38:32.837
> 
> 标签：open-source, licensing, gnu

我在 GNU GENERAL PUBLIC LICENSE 下修改了一个开源项目的一些文件，以添加一些特定的功能。我会为我编写的部分代码添加相同的许可证。我应该怎么做？必须添加到已修改文件的序言是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:02:17.933

通常由于 Gnu GPL 定义，如果代码在 GPL 许可下，并且如果对代码进行了任何更改，那么总代码应该在 GPL 兼容许可下获得许可。但通常每个人都在相同的 GPL 许可下许可代码。

[GPL 常见问题](http://www.gnu.org/licenses/gpl-faq.html#ModifyGPL)

# c# - c# app 不能在 XP 上运行

> ID：12901898
> 
> 赞同：2
> 
> 时间：2012-10-15T18:38:46.107
> 
> 标签：c#, visual-studio-2010, windows-xp, publish

我制作了一个使用`watIn library`, 并以 .NET 3.5 为目标的应用程序（因此它可以在 XP 上运行）。在我的电脑上发布应用程序后，我安装了它，它运行良好。但是，当我在运行 XP 的不同 PC 上尝试它时，它不起作用。我确保我正在测试的 PC 正在运行 .NET 3.5 或更高版本。

我正在运行 Windows 7 和 Visual Studio 2010。

该程序可在 Windows 7 上运行（在 2 台 PC 上尝试过）。该程序在 XP 上不起作用（在 2 台 PC 上试过）。

在 Xp 上，我收到以下消息：

```
Unable to install or run the application. The application requires that
assembly WindowsBase Version 3.0.0.0 be installed in the Global
Assembly Cache (GAC) first.

Please contact your administrator 
```

我的问题：

1.  我应该怎么做才能确保它在 XP 上工作？

2.  如果我在 .net 4 上开始开发，然后将其切换到 3.5 并且它仍然运行，这是否意味着我从一开始就只使用 3.5 代码/功能？

3.  如果我在应用程序上运行 4.0 代码，我在开发过程中将他的属性更改为目标 .net 3.5，Visual Studio 会给我编译错误吗？

4.  有没有办法用我的应用程序安装程序安装 .net 3.5 框架？（如果它在 PC 上还没有 1）

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:40:42.430

确保运行 XP 的 PC 上安装了 .NET。Windows 7 已经安装了 .NET Framework，但 XP 没有更新版本的框架。

此外，如果您的项目需要特定版本的 .NET 框架，最好将其作为先决条件添加到安装程序中。
![视觉工作室先决条件](../Images/1e8e18282ce7046d37f20503c511b97d.png)

此外，在您的构建中，请确保您的目标是正确的框架。
![视觉工作室目标框架](../Images/2c007f63d4a42fe51b39612635278b25.png)

链接：
- [http://www.microsoft.com/net/download](http://www.microsoft.com/net/download)
- [http://www.codeproject.com/Articles/35976/Add-Prerequisites-of-NET-Framework-in-Visual-Studi](http://www.codeproject.com/Articles/35976/Add-Prerequisites-of-NET-Framework-in-Visual-Studi)

# ruby-on-rails - Rails 邮件程序 Net::SMTPAuthenticationError（需要 530-5.5.1 身份验证）与使用 ENV[USERNAME] 和 ENV[PASSWORD] 的 Gmail

> ID：12901904
> 
> 赞同：2
> 
> 时间：2012-10-15T18:39:28.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

从生产环境发送邮件时出现错误，特别是：

```
Net::SMTPAuthenticationError (530-5.5.1 Authentication Required) 
```

在我的本地机器和开发环境中，我使用`ENV[GMAIL_USERNAME]`and声明密码，`ENV[GMAIL_PASSWORD]`并且它工作正常，声明的 ENV 存储在我的 .bash_profile 中

```
 # Development Environment for Action Mailer config
  config.action_mailer.default_url_options = { host: '0.0.0.0:3000' }
  config.action_mailer.perform_deliveries = true
  config.action_mailer.default charset: 'utf-8'
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings = {
    address: 'smtp.gmail.com',
    port: 587,
    domain: 'mydomain.com',
    authentication: "plain",
    enable_starttls_auto: true,
    user_name: ENV["GMAIL_USERNAME"],
    password: ENV["GMAIL_PASSWORD"]
  }

  # Production Environment for Action Mailer config
  config.action_mailer.default_url_options = { host: 'mydomain.com' }
  config.action_mailer.perform_deliveries = true
  config.action_mailer.raise_delivery_errors = false
  config.action_mailer.default charset: 'utf-8'
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings = {
    address: "smtp.gmail.com",
    port: 587,
    domain: "mydomain.com",
    authentication: "plain",
    enable_starttls_auto: true,
    user_name: ENV["GMAIL_USERNAME"],
    password: ENV["GMAIL_PASSWORD"]
  } 
```

不幸的是，在生产中发送邮件时出现错误。但是，如果我对其中的用户名和密码进行硬编码，`environments/production.rb`它就可以工作。和`ENV["GMAIL_USERNAME"]``ENV["GMAIL_PASSWORD"] 在 .bash_profile 中设置：

```
export GMAIL_USERNAME="hello@mydomain.com"
export GMAIL_PASSWORD="mypassword" 
```

我以为是应用程序无法调用`ENV["GMAIL_USERNAME"]`，`ENV["GMAIL_PASSWORD"]`但是当我跳入生产 Rails 控制台并`puts ENV["GMAIL_USERNAME"]`输出正确的凭据时。

我已经重新启动了 Apache 并多次重新启动了我的应用程序，但我很困惑下一步该做什么。

任何帮助深表感谢。

提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:44:06.590

谁的 bash 简介？你的用户？Apache 不会在启动时读取这些配置文件，因为它不会运行 bash 来启动服务器。当您登录到服务器时，您的配置文件就会被获取。这就是为什么它在您测试时起作用的原因。

您需要确保在脚本或 apache 运行的环境中定义了环境变量。根据您的服务器，这可能位于 /etc/apache2/envvars 中或添加到 apache 的启动脚本中。

# c# - 是否可以在带有上传文件的 asp.net webapi 中进行模型绑定？

> ID：12901905
> 
> 赞同：10
> 
> 时间：2012-10-15T18:39:28.563
> 
> 标签：c#, asp.net-web-api, file-upload, model-binding

该模型：

```
public class UploadFileModel
{
    public int Id { get; set; }
    public string FileName { get; set; }
    public HttpPostedFileBase File { get; set; }
} 
```

控制器：

```
public void Post(UploadFileModel model)
{
     // never arrives...
} 
```

我收到一个错误

> “没有 MediaTypeFormatter 可用于从媒体类型为‘multipart/form-data’的内容中读取‘UploadFileModel’类型的对象。”

有没有办法解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T20:05:25.080

这不*容易*。Web API 中的模型绑定与 MVC 中的模型绑定根本不同，您必须编写一个 MediaTypeFormatter 将文件流读入您的模型并另外绑定原语，这可能会非常具有挑战性。

最简单的解决方案是使用某种类型的请求从请求中获取文件流，使用该提供程序的名称值收集`MultipartStreamProvider`其他参数`FormData`

示例 - [http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)：

```
public async Task<HttpResponseMessage> PostFormData()
{
    if (!Request.Content.IsMimeMultipartContent())
    {
        throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
    }

    string root = HttpContext.Current.Server.MapPath("~/App_Data");
    var provider = new MultipartFormDataStreamProvider(root);

    try
    {
        await Request.Content.ReadAsMultipartAsync(provider);

        // Show all the key-value pairs.
        foreach (var key in provider.FormData.AllKeys)
        {
            foreach (var val in provider.FormData.GetValues(key))
            {
                Trace.WriteLine(string.Format("{0}: {1}", key, val));
            }
        }

        return Request.CreateResponse(HttpStatusCode.OK);
    }
    catch (System.Exception e)
    {
        return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, e);
    }
} 
```

# php - 列出目录：Opendir()

> ID：12901906
> 
> 赞同：1
> 
> 时间：2012-10-15T18:39:32.737
> 
> 标签：php, list, opendir

我正在编写一个小脚本，我想列出目录的内容，将它们制作成超链接，然后编辑这些超链接以使其看起来很漂亮（即不显示丑陋的超长路径名），然后限制回显的文件数回到浏览器。另外，我只需要回显最新的文件。

我正在考虑使用这个：

```
<?php
 $path = "/full/path/to/files";
 if ($handle = opendir($path)) {
   while (false !== ($file = readdir($handle)))
          {
                  if ($file != "." && $file != "..")
          {
                          $files .= '<a href="'.$file.'">'.$file.'</a>';
                  }
           }
  closedir($handle);
  }
?> 
```

或这个：

```
<?php
$sub = ($_GET['dir']);
$path = 'enter/your/directory/here/';
$path = $path . "$sub";
$dh = opendir($path);
$i=1;
while (($file = readdir($dh)) !== false) {
        if($file != "." && $file != "..") {
                        if (substr($file, -4, -3) =="."){
                        echo "$i. $file <br />";
                        }else{                  
                echo "$i. <a href='?dir=$sub/$file'>$file</a><br />";
                  }
                $i++;
        }
}
closedir($dh);
?> 
```

但我不想列出这样的文件：

C:/example/example2/Hello.pdf

我想编辑变量。那可能吗？让它说一些像“你好”这样简单的东西。

我也想限制列出的文件数量。例如：只列出前 5 个文件，或最后 5 个文件，等等。是否有一个函数或某种参数？

我感谢任何帮助或朝着正确的方向前进。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:42:28.977

我在我的手机上，所以提供一个代码示例会很困难。为什么不遍历目录，将文件名存储在数组中，以绝对路径作为该键的值？

**编辑：**您可以使用[basename](http://php.net/manual/en/function.basename.php)来帮助您执行此操作。

# php - PHP 无法读取从 COM .doc 到 .txt 转换的格式化文本

> ID：12901908
> 
> 赞同：0
> 
> 时间：2012-10-15T18:39:46.610
> 
> 标签：php, com, text-parsing

我有很多带有数据库条目规范的 .doc 文件。我需要解析所有这些文档并使用文档中的信息创建条目。我一直在尝试使用 COM 方法。该文件在页面的顶部和底部都有纯文本......但是，规格在页面中心的表格中。如果我不取消链接新的 .txt 文件，我可以看到内容已传输到新文档，但它有一堆 [] 形式的无效字符贯穿其中。当我使用 file_get_contents() 时，它会完全忽略表格中的所有文本。

有没有办法以编程方式解决这个问题？我真的找不到关于 word.application COM 对象的 API 的任何信息。理想情况下，我想我应该去掉格式，然后将文件保存为 .txt 文件或类似的东西。

任何帮助将不胜感激。

这是我的代码：

```
 $dir   = $PATH."/scripts/specsheets/doc";
    $files = scandir($dir);
    foreach( $files as $file ) {
        if( strtolower(substr($file, -3)) == "doc" ) {

            $word = new COM("word.application") or die("Unable to instantiate Word");
            $word->Documents->Open($dir."/".$file);
            $new_file = substr($dir."/txt/".$file, 0, -4).".txt";

            $word->Documents[1]->SaveAs($new_file, 2);
            $word->Documents[1]->Close(false);
            $word->Quit();
            $word = NULL;
            unset($word);

            $output = file_get_contents($new_file);
            rename($dir."/".$file, $dir."/archive/".$file);

            echo utf8_encode($output);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:55:42.867

找不到使用 COM 方法的解决方案...但是如果您在 php 中使用此命令，则可以使用 Windows 的 antiword 程序来获取输出

```
$content = shell_exec("C:/antiword/antiword.exe ".$filename); 
```

windows版本的链接是：

[http://www-stud.rbi.informatik.uni-frankfurt.de/~markus/antiword/](http://www-stud.rbi.informatik.uni-frankfurt.de/~markus/antiword/)

它工作得很好，它甚至可以提取表中的数据。绝对解决了我的问题。

# html - 整数数组作为 html 选择中选项的值

> ID：12901912
> 
> 赞同：1
> 
> 时间：2012-10-15T18:39:56.453
> 
> 标签：html, arrays, asp.net-mvc-3, option

我对我的 mvc3 c# 应用程序`<option>`中的标签有疑问。我可以使用标签`<select>`将整数数组传递给动作吗？`<option>`我的意思是，像这样：

```
<select name="status_filter">
   <option value="1,2,3,4">All</option>
   <option value="2,3">Some</option>
   <option value="2">One</option>
</select> 
```

在我的行动方法中：

```
public ActionResult Filter(int[] status_filter) 
```

可以做到？

谢谢，贡萨洛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:02:50.117

默认情况下，这不会绑定。您将需要一个自定义模型绑定器或将其作为 javascript 中的数组传递

来自： [在asp.net mvc中，如何将整数数组作为参数传递](https://stackoverflow.com/questions/5785428/in-asp-net-mvc-how-can-i-pass-an-array-of-integers-as-a-parameter)

```
$.ajax({
    url: '@Url.Action("刷新", "日历")',
    类型：'POST'，
    内容类型：'应用程序/json；字符集=utf-8',
    数据：JSON.stringify（{范围：范围，范围ID：范围ID}），
    成功：函数（结果）{
        // ...
    }
});

```

或者使用您自己的模型绑定器：

[http://neimke.blogspot.com/2011/01/pass-array-of-integers-to-controller.html](http://neimke.blogspot.com/2011/01/pass-array-of-integers-to-controller.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T15:30:07.170

最后，我必须将数组更改为“all”、“some”、“one”的字符串，然后在控制器上执行切换。

# actionscript-3 - AS3 访问文本字段

> ID：12901915
> 
> 赞同：1
> 
> 时间：2012-10-15T18:40:05.020
> 
> 标签：actionscript-3, movieclip, children, get-childitem

我有 3 个movieclips，每个都有一个小时候的文本框。

我将活动设置为

```
var myroot:MovieClip = this.root as MovieClip;
var activeText:MovieClip; 
```

这有效

```
function keyClicked (e:MouseEvent) {
    myroot.firstname_mc.getChildAt(0).text += "hello";
} 
```

这不

```
function keyClicked (e:MouseEvent) {
    activeText.getChildAt(0).text += "hello";
} 
```

我怎样才能让它动态工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:09:55.557

你的整个问题是你试图做你不应该做的事情。您应该做的是编写封装所需行为的类，并让它们处理细节。例如：

```
package view {
   public class Label extends MovieClip {
      /* This is public so the Flash Player can
         populate it, not so you can "talk" to it
         from outside. This is a stage instance
      */
      public var tf:TextField;
      protected var _text:String;
      public function get text():String {
         return _text;
      }
      public var set text(value:String):void {
         if (value != _text) {
           _text = value;
           tf.text = _text;
         }
      }
   }

} 
```

现在，在您的主文档类中，您键入 activeText 作为标签，然后您可以像这样设置它的文本：

```
activeText.text += 'hello'; 
```

现在，您可以重用您编写的新类来制作各种外观不同的标签，只要每个标签都包含一个名为 tf.

# java - 我正在尝试创建一个 Queue 类，但似乎不断收到与泛型有关的错误。为什么我会收到此错误？

> ID：12901917
> 
> 赞同：0
> 
> 时间：2012-10-15T18:40:19.427
> 
> 标签：java

我有一个 LinkedList 类，它作为 Queue 类的基础，它作为 PrintQueue 类的基础。

这是我的 PrintQueue 类：

```
public class PrintQueue<T> {
    private Queue<T> queue;

    public PrintQueue() {
        queue = new Queue<T>();
    }

    public void lpr(String owner, int jobID) {
        queue.enqueue(new Job(owner, jobID));
    }
} 
```

从底部开始的`queue.enqueue(...)`三行导致错误：

> Queue 类型中的方法 enqueue(T) 不适用于参数 (Job)

PrintQueue 是 Job 对象的队列。

我的 Queue 类中的 enqueue 方法如下所示：

```
 public void enqueue(T item) {
        queue.addToEnd(item);
    } 
```

addToEnd 方法如下所示：

```
public void addToEnd(T item) {
    Node<T> itemnode = new Node<T>(item, null); 

    if (isEmpty()) {
        head = itemnode;
    }
    else {
        Node<T> curr = head;

        while (curr.getNext()!=null) {
            curr= curr.getNext();
        }

        curr.setNext(itemnode);
    }

    count++;

} 
```

为什么这不起作用？所有三个类（PrintQueue、Queue 和 LinkedList）都是通用类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:41:54.593

您正在尝试`Queue<T>`为某种任意类型创建一个`T`- 但随后您正在尝试将一个`Job`.

例如，您认为将 a 排入队列意味着`Job`什么`Queue<String>`？

你*真的*需要`PrintQueue`通用吗？我怀疑你只是想要：

```
public class PrintQueue {
    private final Queue<Job> queue;

    public PrintQueue() {
        queue = new Queue<Job>();
    }

    public void lpr(String owner, int jobID) {
        queue.enqueue(new Job(owner, jobID));
    }
} 
```

`Queue`（此外，当内置类库中有各种好的队列时，不清楚为什么你有自己的类……那些也没有 O(N)“添加到末尾”行为的队列。 ..)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:48:02.627

正如你所说，你的方法是：

```
public void enqueue(T item) {
    queue.addToEnd(item);
} 
```

请查看参数类型，即`T`. 请确保参数类`Job`也是通用的。完成后，将您的`enqueue`方法称为：

```
 queue.enqueue((T)(new Job(owner, jobID))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:48:57.987

为了避免混淆，我看到 Queue 是一个自定义类而不是 java.util.Queue 接口。

我强烈建议您实现 java.util.Queue 而不是重新发明轮子。它仅适用于方法：`element(),peek(),poll(), offer(E) and remove()`.

[接口队列](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Queue.html)

# jquery - IE9 中的 jQuery 错误

> ID：12901928
> 
> 赞同：0
> 
> 时间：2012-10-15T18:40:49.333
> 
> 标签：jquery, internet-explorer-9

这在 IE9 中不起作用。

在 IE 7/8 和其他所有浏览器中运行良好。它基本上忽略了隐藏/显示并将链接视为锚标签（应该用preventDefault覆盖）

```
$(document).ready(function () {
    $(".tabContents").hide(); // Hide all tab conten divs by default
    $(".tabContents:first").show(); // Show the first div of tab content by default
    $("#tabContaier ul li a.tablink").click(function (e) { //Fire the click event
        e.preventDefault();
        var activeTab = $(this).attr("href"); // Catch the click link
        $("#tabContaier ul li a.tablink").removeClass("active"); // Remove pre-highlighted link
        $(this).addClass("active"); // set clicked link to highlight state
        $(".tabContents").hide(); // hide currently visible tab content div
        $(activeTab).fadeIn(); // show the target tab content div by matching clicked link.
    });
});​ 
```

[http://jsfiddle.net/gpnqV/](http://jsfiddle.net/gpnqV/)

# sql - 合并/加入 SQL 选择查询

> ID：12901930
> 
> 赞同：1
> 
> 时间：2012-10-15T18:40:53.707
> 
> 标签：sql, select, join, merge

我正在努力结合以下 Select Statments，我知道我可以作弊并在其中添加一些假列，然后使用 Union，但我想正确地做到这一点。一旦我让他们加入，我将把 Statment 放入 XML 文件中，以便与 Word 和 CRM4 一起使用。

```
SELECT BILLTO_NAME, 
       BILLTO_LINE1, 
       BILLTO_LINE2, 
       BILLTO_LINE3, 
       BILLTO_CITY, 
       BILLTO_COUNTRY, 
       BILLTO_POSTALCODE, 
       ORDERNUMBER, 
       REQUESTDELIVERYBY, 
       MODIFIEDON, 
       SHIPTO_NAME, 
       SHIPTO_LINE1, 
       SHIPTO_LINE2, 
       SHIPTO_LINE3, 
       SHIPTO_CITY, 
       SHIPTO_STATEORPROVINCE, 
       SHIPTO_COUNTRY, 
       SHIPTO_POSTALCODE, 
       CREATEDBY 
FROM   SALESORDERBASE 

SELECT QUANTITY, 
       DESCRIPTION 
FROM   SALESORDERDETAILBASE 

SELECT NEW_ORDERNOTES, 
       NEW_NOTES 
FROM   SALESORDEREXTENSIONBASE 
```

它们都有 SalesOrderID 的公共列，我也需要在某处添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:47:51.153

您可以[`LEFT JOIN`](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)在桌子上使用 a：

```
SELECT ob.SalesOrderID 
       ob.BILLTO_NAME, 
       ob.BILLTO_LINE1, 
       ob.BILLTO_LINE2, 
       ob.BILLTO_LINE3, 
       ob.BILLTO_CITY, 
       ob.BILLTO_COUNTRY, 
       ob.BILLTO_POSTALCODE, 
       ob.ORDERNUMBER, 
       ob.REQUESTDELIVERYBY, 
       ob.MODIFIEDON, 
       ob.SHIPTO_NAME, 
       ob.SHIPTO_LINE1, 
       ob.SHIPTO_LINE2, 
       ob.SHIPTO_LINE3, 
       ob.SHIPTO_CITY, 
       ob.SHIPTO_STATEORPROVINCE, 
       ob.SHIPTO_COUNTRY, 
       ob.SHIPTO_POSTALCODE, 
       ob.CREATEDBY,
       od.QUANTITY,
       od.DESCRIPTION,
       oe.NEW_ORDERNOTES,
       oe.NEW_NOTES
FROM   SALESORDERBASE ob
LEFT JOIN SALESORDERDETAILBASE od
    on ob.SalesOrderID = od.SalesOrderID
LEFT JOIN SALESORDEREXTENSIONBASE oe
    on ob.SalesOrderID = oe.SalesOrderID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:44:52.923

假设标识关系的列在所有三个表上都称为 id，您可以这样做：

```
 SELECT sob.BILLTO_NAME, 
   sob.BILLTO_LINE1, 
   sob.BILLTO_LINE2, 
   sob.BILLTO_LINE3, 
   sob.BILLTO_CITY, 
   sob.BILLTO_COUNTRY, 
   sob.BILLTO_POSTALCODE, 
   sob.ORDERNUMBER, 
   sob.REQUESTDELIVERYBY, 
   sob.MODIFIEDON, 
   sob.SHIPTO_NAME, 
   sob.SHIPTO_LINE1, 
   sob.SHIPTO_LINE2, 
   sob.SHIPTO_LINE3, 
   sob.SHIPTO_CITY, 
   sob.SHIPTO_STATEORPROVINCE, 
   sob.SHIPTO_COUNTRY, 
   sob.SHIPTO_POSTALCODE, 
   sob.CREATEDBY, 
   sodb.QUANTITY, 
   sodb.DESCRIPTION,
   soeb.NEW_ORDERNOTES, 
   soeb.NEW_NOTES 
 From SalesOrderBase sob
 JOIN SalesOrderDetailBase sodb
   ON sob.id = sodb.SalesOrderID
 JOIN SalesOrderExtensionBase soeb
   ON sob.id = soeb.SalesOrderID 
```

您可以将 JOINing 视为将行并排拼在一起，而 UNIONing 是将行一个接一个地拼在一起。UNION 要求列相同，而 JOIN 要求每行之间存在某种关系。

编辑 - OP提供了更多细节

# grails - Grails 使用 spring 安全注释和 UrlMapping 来保护控制器

> ID：12901931
> 
> 赞同：1
> 
> 时间：2012-10-15T18:40:55.357
> 
> 标签：grails, spring-security

我正在尝试保护控制器：

```
@Secured(['ROLE_ADMIN'])
class FooBarController {

} 
```

我在 UrlMappings 中映射了控制器：

```
"/foo/bar" 
```

似乎当我尝试访问控制器时，`/foo/bar`注释被有效地忽略了。

我看到一些东西说我需要使用`controllerAnnotations.staticRules`. 我的第一个问题是：

1.  我是否需要在静态规则中复制我的所有规则，或者说它是安全的并且过滤器将从注释中提取特定规则就足够了？

我有另一种情况，我使用 UrlMappings 保护控制器，默认 URL 路径已更改，但控制器名称未更改，例如

```
@Secured(['ROLE_ADMIN'])
MyApiController {

} 
```

UrlMapping 是：`/api/company/1/myApi`

在这种情况下，无需在 staticRules 中进行任何必要的配置即可获取注释，因此我对需要在何处以及在什么情况下进行配置感到非常困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T17:11:30.383

看起来这里的问题是 UrlMapping 与默认的控制器映射约定不匹配。即 Config.groovy 映射指的是 UrlMapping 而不是指实际的控制器名称。

请参阅此答案：[https](https://stackoverflow.com/a/16737980/57357) ://stackoverflow.com/a/16737980/57357 以获得更全面的解释。

IMO 这是不直观的，但这就是它目前的工作方式。请注意，如果您使用 InterceptUrlMap 配置样式，它不会以这种方式工作**。**如果您使用 InterceptorUrlMap 样式，您**确实**参考了 UrlMappings.groovy 的 URL 映射。

# jquery - Fancybox Hashtag (iframe)

> ID：12901933
> 
> 赞同：0
> 
> 时间：2012-10-15T18:41:00.990
> 
> 标签：jquery, iframe, fancybox, hashtag

我需要一些帮助才能让 fancybox 1.3.4 使用主题标签。我发现了另一个问题（[Fancybox: 更改地址栏中的 url 并链接到打开 Fancybox 的页面的链接](https://stackoverflow.com/questions/7843823/fancybox-link-that-changes-the-url-in-address-bar-and-links-to-a-page-with-an-o)），但这不适用于 iframe。
这是我的设置：
$('a[id="FBLink"]').fancybox({
'height':420,
'width':720,
'transitionIn':'elastic',
'transitionOut':'elastic',
'type':'iframe',
'enableEscapeButton':true,
'centerOnScroll':true
});

帮助将不胜感激。谢谢！

# c# - 避免跨线程操作错误的最简洁和正确的方法？

> ID：12901938
> 
> 赞同：1
> 
> 时间：2012-10-15T18:41:35.033
> 
> 标签：c#, multithreading

我不太擅长代表，我不明白幕后发生的事情。从`cross thread operation`不同线程访问 UI 项目时出现错误。

我想做的是在一个`Utility`类中编写一个通用函数，以便我可以将任何方法/代码块传递给该函数。我可以通过多种方式做到这一点，例如：

1.  ```
    delegate void UpdateGui(Control c, Action action);
    public static void Do(Control c, Action action)
    {
        try
        {
            if (c.InvokeRequired)
            {
                UpdateGui updaterdelegate = new UpdateGui(Do);
                c.TopLevelControl.Invoke(updaterdelegate, new object[] { c, action });
            }
            else
                action();
        }
        catch (Exception ex)
        {
            //throw ex;
        }
    } 
    ```

2.  ```
    public static void Do(Control c, Action action)
    {
        try
        {
            if (c.InvokeRequired) 
            {
                c.TopLevelControl.Invoke((Action)delegate { Do(c, action); });
            }
            else
                action();
        }
        catch (Exception ex)
        {
            //throw ex;
        }
    } 
    ```

3.  ```
    public static void Do(Control c, Action action)
    {
        try
        {
            if (c.InvokeRequired)
            {
                c.TopLevelControl.Invoke(action);
            }
            else
                action();
        }
        catch (Exception ex)
        {
            //throw ex;
        }
    } 
    ```

4.  ```
    public static void Do(Control c, Action action)
    {
        try
        {
            if (c.InvokeRequired) 
            {
                c.TopLevelControl.Invoke(new MethodInvoker(() => action()));
            }
            else
                action();
        }
        catch (Exception ex)
        {
            //throw ex;
        }
    } 
    ```

5.  ```
    public static void Do(Control c, Action action)
    {
        try
        {
            if (c.InvokeRequired) 
            {
                c.TopLevelControl.Invoke(new MethodInvoker(delegate { action(); }));
            }
            else
                action();
        }
        catch (Exception ex)
        {
            //throw ex;
        }
    } 
    ```

6.  ```
    public static void Do(Control c, Action action)
    {
        try
        {
            if (c.InvokeRequired) 
            {
                c.TopLevelControl.Invoke((MethodInvoker)delegate { action(); });
            }
            else
                action();
        }
        catch (Exception ex)
        {
            //throw ex;
        }
    } 
    ```

我相信方法 1 和 2 基本相同，方法 4、5 和 6 也是如此。我的问题是：

1.  方法 (1 & 2)、3 和 (4, 5 & 6) 之间有什么区别？我的意思是在什么情况下一个人处理/照顾另一个人不处理？

2.  什么是避免`cross thread operation`错误的正确方法，从某种意义上说，它处理所有情况，最好是简洁易读？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:45:09.493

您上面的“第三种”方法（仅使用`Action`）更简单，更有效。您使用的其他方法`delegate`创建一个单独的方法（通过`delegate`关键字的匿名方法），然后调用您的原始委托（`action`参数），这是不必要的。

第3个选项只是直接使用`Action`传入的，比较简单。

第一个选项是类似的，但在这种情况下，您传递的是不必要的值（the `Control`）加上必须定义一个自定义委托（尽管您可以使用它`Action<Control,Action>`）。由于没有使用控件，因此没有理由增加这种复杂性。

附带说明 - 当您在异常处理程序中重新抛出时，最好只使用`throw;`（而不是`throw ex;`），因为这将正确保留堆栈跟踪：

```
catch (Exception ex)
{
    // Do whatever, ie: logging
    throw;
} 
```

如果您不打算登录，而只是打算重新抛出，则可以完全省略`try`/ `catch`。

# python - 如何正确地使单元测试清理套接字

> ID：12901941
> 
> 赞同：2
> 
> 时间：2012-10-15T18:41:45.953
> 
> 标签：python, unit-testing, python-2.7

我最近一直在使用一些套接字，在编写一些带有监听套接字的单元测试用例时，我反复得到`error: [Errno 98] Address already in use`.

这是一些显示错误的示例代码。

```
import unittest
import socket

class TestUnit(unittest.TestCase):
    def setUp(self):
        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.socket.bind((socket.gethostname(), 10000))
        self.socket.listen(10)
        self.addCleanup(self.clean)

    def test_nothing(self):
        self.assertEqual(False, False)

    def test_something(self):
        self.assertEqual(True, True)

    def clean(self):
        self.socket.close() 
```

当其中一项测试引发异常时，似乎会发生这种情况。无一例外，它按预期工作。但这有点使测试无用，因为在第一个引发异常的测试之后的所有测试也会引发异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:44:51.517

```
socket.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1) 
```

应该有帮助

基本上关闭的套接字不会立即被堆栈释放。因此，如果您尝试立即重用它（即使在您有一个绑定套接字但您关闭并重新启动应用程序的情况下），您也会看到相同的错误。REUSEADDR 允许再次绑定同一个套接字。

但是，如果您的套接字处于定时等待状态并且您尝试相同的目的地，它将失败。

您还应该阅读此套接字选项的手册页以了解它的局限性。

[SO_REUSEADDR 在 SO](https://stackoverflow.com/questions/6380057/python-binding-socket-address-already-in-use)

# php - if 回显语句

> ID：12901942
> 
> 赞同：0
> 
> 时间：2012-10-15T18:41:54.233
> 
> 标签：php, if-statement, echo

请帮忙。

每次我将它添加到我的页面时，都会显示为服务器错误。这段代码有什么问题

```
<? if ($product['mark_special_offer']==1?) echo "<img src="/gfx/products/overlays/new-product.gif" alt="NEW" class="new_product" />"; ?> 
```

任何建议（我打赌这很明显，我错过了一个 ' ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:43:02.253

你没有逃避你的`"`，但你可以很容易地写：

```
'<img src="/gfx/products/overlays/new-product.gif" alt="NEW" class="new_product" />' 
```

反而。或逃脱：

```
"<img src=\"/gfx/products/overlays/new-product.gif\" alt=\"NEW\" class=\"new_product\" />" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:44:32.783

语法错误：

```
<? if ($product['mark_special_offer']==1?) echo "<img src="/gfx/products/overlays/new-product.gif" alt="NEW" class="new_product" />"; ?>
                                        ^                 ^--and other quotes 
```

# regex - 有没有办法使用正匹配正则表达式运算符对字符串进行负匹配？

> ID：12901944
> 
> 赞同：3
> 
> 时间：2012-10-15T18:42:02.580
> 
> 标签：regex, perl, regex-negation, regex-lookarounds

具体来说，有没有办法实现相当于

```
my $string = 'this is some example text';
my $match = qr/foobar/;
print 'success' if $string !~ $match; 
```

只使用=~，不使用否定运算符？

*具体来说，我需要确保字符串与提供*的值不匹配，并且测试函数采用正则表达式对象，并将它们积极地应用于值。 *该值根本不能出现在搜索的字符串中，这*使前瞻和后瞻断言变得复杂。

像下面这样的东西可能是一个很好的测试：

```
my $string = 'this is some example text';
my $match =~ qr/foobar/;
# $negated_match contains $match, or some transformed variation of it
my $negated_match = qr/$YOUR_REGEX_HERE/; 
die 'failure' if $string =~ $match;
print 'success' if $string =~ $negated_match; 
```

我怀疑有一种方法可以通过环视断言来做到这一点，但还没有弄明白。perl 特定的答案是可以接受的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:44:18.613

```
my $string = 'this is some example text';
my $match = qr/^(?!.*foobar)/s;
print 'success' if $string =~ $match; 
```

# php - Echo/return 在变量前添加空格

> ID：12901946
> 
> 赞同：1
> 
> 时间：2012-10-15T18:42:14.780
> 
> 标签：php, mysql

我有一些代码，它从数据库中获取信息，然后创建图像路径并返回它，我将其用作另一个页面上的 img src。

这是功能：

```
function getMainImage ()
{
    $query = "SELECT * FROM pictures WHERE username = '$_SESSION[username]' AND main = 'y' LIMIT 1";
    include 'connect.php';
    $result = mysql_query($query) or die (mysql_error());
    mysql_close($dbhandle);
    $row = mysql_fetch_assoc($result);
    $path = "images/t_$row[username]_$row[number].$row[ext]";
    return $path;
}
<img src="<?php echo getMainImage(); ?>" width="40" height="40" /> 
```

查看页面源时的输出是：

```
<img src=" images/t_image_3.jpg" width="40" height="40" /> 
```

在“images/”之前从函数中添加了一个额外的空间。我试过修剪路径，甚至在调用它时修剪函数，但都没有奏效。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T18:46:26.620

# 包括

您看到的空白几乎肯定来自这一行：

```
include 'connect.php'; 
```

检查文件中的内容`connect.php`，并在打开之前删除任何空格`<?php`，如果有`?>`，只需将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:49:47.793

我的朋友@AD7six 是对的！（他推荐的是最好的做法！）。

但是，如果你很难“抓住”这个空间并且你想解决它，你可以这样做：

```
$img = getMainImage();
echo "<img src='\"images/t_" .  $img . "\" width=\"40\" height=\"40\" />"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T19:09:30.923

试试这个小解决方案：

```
 require_once 'connect.php';

        function getMainImage (){
            $User = mysql_real_escape_string($_SESSION[username]);
            $query = "SELECT * FROM pictures WHERE username = '$User' AND main = 'y' LIMIT 1";
            $result = mysql_query($query, $connetion) or die (mysql_error());
            $row = mysql_fetch_assoc($result);
            if($row) $path = "images/t_$row[username]_$row[number].$row[ext]";
            return isset($path) ? $path : 'default_url_to_img';
        }

<img src="<?= getMainImage(); ?>" alt="some txt" width="40" height="40" /> 
```

# ios - Div 仅在 iphone 上有右边距

> ID：12901948
> 
> 赞同：-1
> 
> 时间：2012-10-15T18:42:24.610
> 
> 标签：ios, css, mobile, responsive-design, margins

在 iPhone 上，div 的 masterhead、middleline、middle、bottomline、bottom、colophonline 和 colophon 不会一直到达右侧。但是在桌面上他们可以。我想知道为什么。我试图对 div 应用负边距，但它并没有改变任何事情。不幸的是，我还没有在 iPad 上尝试过。

网站： http: [//www.domda.se](http://www.domda.se)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:05:30.757

您有几个严重的[HTML 错误](http://validator.w3.org/check?uri=http://domda.se/&charset=%28detect%20automatically%29&doctype=Inline&group=0)。杂散标签会影响您的布局，并且浏览器之间的差异很可能会很明显。

其次，我在桌面版 Safari 中看到了右侧空间（边距还是填充？）。这个空间导致了一个永久的水平滚动条。无论我制作多宽的窗口，一直到 1900+ 像素，滚动条仍然存在。

当我`padding-right: 10px;`从`#colophon`位于`style.css`文件中的元素中删除时，右侧间距问题消失了，烦人的滚动条也消失了。

当我在 iOS 上打开您的网站时，我看到了您的问题，我相信这是由`#colophon`.

我不确定目的是什么，但我认为您可以安全地删除它`padding-right: 10px;`而不会造成损害。虽然，您需要清除您的 HTML 验证错误并在所有浏览器中进行测试才能确定。

# php - 从子（属于）模型更新父模型

> ID：12901953
> 
> 赞同：0
> 
> 时间：2012-10-15T18:42:41.613
> 
> 标签：php, cakephp, cakephp-model

我有帖子和评论，用户也可以“点赞”。我正在使用 cakePHP。

Posts 和 Comments 表每个都有一个“喜欢”行，因为我不想在每次加载帖子/评论时重新计算喜欢。我也有一个 Likes 表，其中包含 ID（帖子 ID、用户 ID），以便我知道哪些用户已经“喜欢”了某些东西。

我想知道如何在 cakePHP 中的模型中建立这种关系，以及如何在向 Likes 表中添加新的 like 时更新 Posts.likes 字段。

我已经在 Like 模型中设置了 Likes to "belongTo" Posts 和 Comments，目前，我的 LikesController.php 看起来像这样：

```
public function add(){
...
    if ($this->Like->save($this->request->data)) {
      //like is added to Likes table, now how to add to the "parent" Post or Comment??
    }
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T20:21:36.877

保持您的表格原样，但在您的和表格中添加一个`like_count`字段。`posts``comments`

`comment_count`还要在`posts`表中添加一个。

然后只需使用 CakePHP 的[counterCache](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#countercache-cache-your-count)，它就会自动跟踪每个帖子的点赞数和评论数。

# c - 如何在linux内核3.5编程中用null/0s/1s替换文件的内容

> ID：12901959
> 
> 赞同：2
> 
> 时间：2012-10-15T18:43:08.977
> 
> 标签：c, linux, filesystems, kernel, system-calls

在给定文件名（路径）作为唯一输入参数的情况下，如何在 linux 内核 3.5 中将文件的内容完全擦除为 0 或 1？

经过大量检查调用后，我研究了 unlink 系统调用的结构`int vfs_unlink(struct inode *dir, struct dentry *dentry)`

那么如何从 *dentry 中删除文件的内容？还是我应该使用`*dentry`？

**编辑**

回应答案：我只想覆盖数据。而且我*不是*在寻找完美的结果。到目前为止，我已经取得了进展：

一方面：使用 vfs_unlink

我对以下代码感到困惑：

```
error = security_inode_unlink(dir, dentry);
if (!error) {
error = dir->i_op->unlink(dir, dentry);
if (!error)
   dont_mount(dentry)
 } 
```

这里实际的取消链接在哪里？

另一种方法：我只是继续使用[write](http://lxr.linux.no/linux+v3.6.2/fs/sysfs/bin.c#L139)系统调用写入数据：

我无法理解尤其是这些行：

```
 143        int size = file->f_path.dentry->d_inode->i_size;
 144        loff_t offs = *off;
 145        int count = min_t(size_t, bytes, PAGE_SIZE);

 151        if (size) {
 152                if (offs > size)
 153                        return 0;
 154                if (offs + count > size)
 155                        count = size - offs;
 156        }
 157
 158        temp = memdup_user(userbuf, count);

 162        mutex_lock(&bb->mutex);
 163
 164        memcpy(bb->buffer, temp, count);
 165
 166        count = flush_write(file, bb->buffer, offs, count);
 167        mutex_unlock(&bb->mutex);
 168
 169        if (count > 0)
 170                *off = offs + count;
 171
 172        kfree(temp);
 173        return count; 
```

谁可以给我解释一下这个？这样我就可以将 null 写入文件。我的功能可能看起来像这样。

```
static void write(struct file *file) 
```

我需要这方面的帮助。我不是要代码，但我现在迷路了。

谢谢

PS：我非常清楚如何在用户级程序中做这个非常简单的事情。但这不是我的任务。我必须在内核空间中进行。我需要这方面的帮助（尤其是在我刚接触内核编程时理解代码）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:54:57.433

这里没有好的答案，当然也不是单个文件的级别。在简单的文件系统（FAT、ext2）上，通常只需打开文件并覆盖它就足够了。但这在几乎所有现代系统上都失败了。现代文件系统几乎总是可以配置为记录数据更改（尽管这很少是默认设置），并且这些数据将继续存在于日志中，直到将来碰巧被覆盖。即使您知道文件系统已经“忘记”了存储系统可能不会的数据——考虑实时备份或离线 LVM 卷的情况。或者驱动程序：NAND 驱动程序会在写入块时定期重新映射块，从而将“陈旧”的内容留在原处。甚至是硬件本身：SSD 或 MMC 等闪存技术执行完全相同的块重映射，

如果您想确保您的数据不在持久存储上，那么现代世界中唯一干净的解决方案就是从一开始就永远不会将其写入那里。将其缓存在 RAM 中，或将其写入 tmpfs（不受交换支持！），或提出某种加密方案，确保存储泄露不会使其对攻击者可用...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T18:53:36.107

我认为您可以通过`write`系统调用轻松完成此操作。过程是

1.  将`write`NULL 值写入给定文件的所有字节
2.  使用 删除文件`unlink`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T02:43:33.493

其他人已经很好地讨论了实际情况，所以我不会去那里（因此请不要费心修改这个答案）。我只是想描述混淆 OP 的代码。

首先，这段代码是来自`fs/namei.c:vfs_unlink()`：

```
error = security_inode_unlink(dir, dentry);
if (!error) {
    error = dir->i_op->unlink(dir, dentry);
    if (!error)
        dont_mount(dentry);
} 
```

该`security_inode_unlink()`调用首先检查（当前用户空间进程）是否具有从目录`current`中删除目录条目所需的权限。`dentry``dir`

由于 Linux 支持许多不同的文件系统，并且每个文件系统（可能）都有自己的 inode 操作，因此这些操作作为函数指针存储在 struct inode ( `dir`)`i_op`成员结构中。（请记住，目录与文件非常相似，因为它包含该目录中包含的所有条目的元数据。因此，使操作特定于目录非常有意义。）

`dir->i_op->unlink(dir, entry);`只需调用目录的`unlink()`函数`dir`。（请注意，在上面显示的代码段之前，`fs/inode.c:vfs_unlink()`它会检查`dir->i_op->unlink`非 NULL。）

最后一点，`dont_mount(entry);`是定义在 中的辅助函数`include/linux/dcache.h`，简单地标记`entry`为“不可安装”，不可访问。（目录条目被缓存在 dcache 中。不必从中取出条目，这可能是一个缓慢的操作，这只是将其标记为无效。在不久的将来，所有过时的 dcache 条目将立即被删除。这非常有效方式，而且也很简单，如果你考虑一下的话。）

* * *

对不起。我无法自拔；我必须把勺子加到汤里。

如果您将其分解为可管理的步骤，则该问题很容易解决。如果我们假设这只是为了实验和学习，而不是出于安全目的——为了安全，你需要擦洗*，*而不仅仅是清除内容——那么你需要做++++ `open()`，只是在内核中，对吗？`lseek()``ftruncate()``close()`

您不想使用`write()`，因为特定于文件系统的写入函数需要用户空间缓冲区。您需要分配一个（例如，一页长度 - 查看`mm/mmap.c:sys_old_mmap()`哪个调用特定于 arch 的`sys_mmap_pgoff()`），用数据填充它，将其写入循环中的文件，然后释放用户空间缓冲区（使用`mm/mmap.c:vm_munmap()`）。如此繁忙的内核循环是一个很大的禁忌。您需要将其移至工作线程中..

不，最好简单地找出文件的长度，然后将其截断为零长度，然后将其重新截断为所需的长度。这就像您在其中写入零一样。IMO，将内容替换为零以外的任何内容都是太多的工作。

为`open()`，调用`filp_open()`。请记住，您只需要生成的`struct file *myfile`，而不是文件描述符来操作内核空间中的文件。

因为`close()`，你只要打电话`filp_close(myfile, current->files)`。如果您省略进程的文件描述符维护内容`current`，那真的是`fs/open.c:sys_close()`.

因为`lseek()`，你可以打电话`loff_t file_length = vfs_lseek(myfile, (off_t)0, SEEK_END);`。`fs/read_write.c:sys_lseek()`毕竟，如果你看一下，那就是它的作用。

对于`ftruncate()`, 查看`fs/open.c:do_sys_ftruncate()`，但请记住省略文件描述符的内容。您已经拥有`struct file *myfile`, 对应`struct file *file`于该函数中的 。哦，记住你需要做两次：首先是零长度，然后是`file_length`你上面得到的。

将以上所有内容结合起来似乎是实现这一目标的一种非常可行的方法——假设我们都同意它只对学习和实验有用，没有任何实际意义。

请注意，我并没有真正花费必要的时间检查所有四个系统调用（`sys_open()`, `sys_lseek()`, `sys_ftruncate()`, `sys_close()`）来检查是否存在我忽略的锁定问题或竞争条件。你真的应该这样做，否则你的实验可能会导致你的内核出错（典型的竞争条件）。做我所做的，从系统调用开始，然后查看函数——尤其是他们的评论，他们通常会提到调用该函数是否有任何锁定要求——以找出答案。

# database - Wso2 数据服务服务器超时数据库连接

> ID：12901962
> 
> 赞同：0
> 
> 时间：2012-10-15T18:43:22.280
> 
> 标签：database, timeout, wso2, wso2dss

我在 WSO2 DSS 中遇到问题，几个小时后发生数据库连接超时，然后我必须停止并启动 DSS 才能工作。

DSS 版本是 2.5.1

数据库服务器是sql server 可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:42:40.320

您是否正确配置了在数据服务描述符文件中使用的数据源，以将“validationQuery”参数启用为“SELECT 1”（验证查询可能因使用的 RDBMS 类型而异，但对于 SQL 服务器，您可以使用上述查询）和“testOnBorrow”参数为“真”？

为了给你一些关于这个问题的背景信息，默认情况下，任何 RDBMS 类型都定义了一个连接超时值。例如，MySQL 默认的默认超时时间为 8 小时。在应用程序中使用连接池时，连接一旦创建就保留在池中，而无需物理关闭以重用它们。但是，在上述时间段之后，连接变得陈旧，您必须在使用它们之前验证连接。这是通过指定一个验证查询来完成的，该查询将在重用池连接时执行。并且“testOnBorrow”参数很方便，因为当指定时，它将在从连接池中借用池连接时验证池连接。

干杯，普拉巴斯

# c - malloc 上的段错误

> ID：12901967
> 
> 赞同：0
> 
> 时间：2012-10-15T18:43:46.693
> 
> 标签：c, segmentation-fault, malloc

我正在从文件中读取整数，当我尝试增加我的数组时，我在**第二次**调用时遇到了分段错误`growMyArray(struct myArray)`，特别是在`int *grownArray = malloc(arrayToGrow.maxCount * sizeof(int));`：

```
struct myArray growMyArray(struct myArray arrayToGrow) {

    arrayToGrow.maxCount *= 2;

    int *grownArray = malloc(arrayToGrow.maxCount * sizeof(int));

    int i;
    for (i = 0; i < arrayToGrow.count; i++)
        grownArray[i] = arrayToGrow.numbers[i];

    free(arrayToGrow.numbers);

    arrayToGrow.numbers = grownArray;

    return arrayToGrow;
} 
```

我的结构：

```
typedef struct myArray {
    int count;
    int maxCount;
    int *numbers;
} myArray; 
```

从输入重定向读取：

```
struct myArray getRandomNumbers() {

    struct myArray randomNumbers;
    randomNumbers.count = 0;
    randomNumbers.maxCount = DEFAULT_SIZE;
    randomNumbers.numbers = malloc(randomNumbers.maxCount * sizeof(int));

    while (scanf("%d", &randomNumbers.numbers[randomNumbers.count]) == 1) {

        randomNumbers.count++;

        if (randomNumbers.count > randomNumbers.maxCount)
            randomNumbers = growMyArray(randomNumbers);
    }

    return randomNumbers;
} 
```

我觉得这特别奇怪，因为增长数组第一次总是有效，但第二次永远不会有效。我`DEFAULT_SIZE`在一组大小为 200000 的测试数据上使用了多个值，范围从 2 到 20000。

是否有明显的原因为什么我在**第二次**调用时遇到分段错误`growMyArray`，特别是在`int *grownArray = malloc(arrayToGrow.maxCount * sizeof(int));`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:49:05.270

你写到了数组的末尾。

```
while (scanf("%d", &randomNumbers.numbers[randomNumbers.count]) == 1) {

    randomNumbers.count++;

    if (randomNumbers.count > randomNumbers.maxCount)
        randomNumbers = growMyArray(randomNumbers);
} 
```

因为您`>`在测试中使用，`if`唯一触发一次`randomNumbers.count = randomNumbers.maxCount + 1`，即`scanf`写入`randomNumbers.numbers[randomNumbers.maxCount]`超出数组末尾。

因此，在语句中更改`>`为。`>=``if`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:52:45.063

照顾好你的数据类型

```
typedef struct myArray {
    int count;
    int maxCount;
    int *numbers;
} myArray; 
```

这意味着 count 和 maxcount 是有符号整数，它们可以达到负值，这对于 count 是不正确的，并且还可能导致一些内存损坏。

# windows-phone-7 - 如何创建可重用的路径样式以显示自定义形状？

> ID：12901972
> 
> 赞同：2
> 
> 时间：2012-10-15T18:44:03.090
> 
> 标签：windows-phone-7, xaml

我试图弄清楚如何为资源字典上的路径重用样式（特别是 Data 属性）。

这是我的问题：

资源字典.xaml

```
 <ResourceDictionary
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
                <Style TargetType="Path" x:Key="FlashOn">
                <Setter Property="Data">
                    <Setter.Value>
  F1M376.251,632.755L385.665,632.755 381.302,646.07 394.618,646.07 389.11,660.302 393.01,660.302 381.531,672.93 377.398,660.763 381.073,660.763 383.829,652.268 369.825,652.268 376.251,632.755z                
               </Setter.Value>            
            </Setter>
               <Setter Property="Fill" Value="#FFFFFF"></Setter>
               <Setter Property="Stretch" Value="Fill"></Setter>
               <Setter Property="Height" Value="25"></Setter>
               <Setter Property="Width" Value="25"></Setter>
            </Style>
        </ResourceDictionary> 
```

并尝试在这样的页面上使用它：

```
<Path Style="{StaticResource FlashOn}"/> 
```

或者像这样

```
System.Windows.Shapes.Path p = new System.Windows.Shapes.Path();
p.Style = Application.Current.Resources["FlashOn"] as Style; 
```

第一次加载页面时，形状会完美显示，但是如果我返回然后再次进入该页面，则所有样式都可用，除了根本没有任何信息的数据。因此，我可以将除 Data 属性之外的所有属性设置为自定义形状。

**请注意，如果样式是内联的，则一切正常。如果我在应用程序中多次使用相同的路径，我只是不想重复代码。

```
 <Path  Width="25" Height="25" Stretch="Fill" Fill="#FFFFFF" Data="F1M376.251,632.755L385.665,632.755 381.302,646.07 394.618,646.07 389.11,660.302 393.01,660.302 381.531,672.93 377.398,660.763 381.073,660.763 383.829,652.268 369.825,652.268 376.251,632.755z" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:58:02.720

不费吹灰之力，把它变成一个内容控件；

```
<Style x:Key="MyAwesomePath" TargetType="ContentControl">
            <!-- Add additional Setters Here -->
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ContentControl">
                    <Path Data="F1M376.251,632.755L385.665,632.755 381.302,646.07 394.618,646.07 389.11,660.302 393.01,660.302 381.531,672.93 377.398,660.763 381.073,660.763 383.829,652.268 369.825,652.268 376.251,632.755z" 
                                      Fill="#FFFFFFFF" 
                                      Stretch="Fill" 
                                      Height="25" Width="25" 
                                      HorizontalAlignment="{TemplateBinding HorizontalAlignment}" 
                                      VerticalAlignment="{TemplateBinding VerticalAlignment}" 
                                      Margin="{TemplateBinding Margin}"/>                   
                </ControlTemplate>
            </Setter.Value>
        </Setter>                      
    </Style> 
```

然后调用它；

```
<ContentControl Style="{StaticResource MyAwesomePath}"/> 
```

这为您做了几件事，比如不让您的应用程序在每个实例中重新绘制路径，从而优化事情。它还允许您（如果您想要/需要）将依赖属性（如 Width/Height/Alignment/Margin 或任何您需要的模板绑定到模板，以便您可以在需要时内联指定它们，或者您可以保留它们的硬编码值，例如你有他们。希望这可以帮助。

# android - actionbarsherlock 的自定义布局中的 ImageButton(ImageView)

> ID：12901978
> 
> 赞同：0
> 
> 时间：2012-10-15T18:44:17.137
> 
> 标签：android, android-actionbar, actionbarsherlock, android-custom-view

我正在使用actionbarsherlock。

为了获得底部的[动作模式（底部的动作模式](https://dl.dropbox.com/u/20468014/as1.jpg)），我使用

```
android:uiOptions="splitActionBarWhenNarrow" 
```

但是我需要在主操作栏上添加一个按钮，所以我使用自定义视图。

```
 View customNav = LayoutInflater.from(this).inflate(R.layout.custom_view, null);      
    getSupportActionBar().setCustomView(customNav, new 
         ActionBar.LayoutParams(Gravity.RIGHT));
    getSupportActionBar().setDisplayShowCustomEnabled(true); 
```

这是custom_view.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="horizontal"
>

<ImageButton
    android:id="@+id/btnMore"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_action_day"
    android:onClick="onMoreClick"/> 
```

如果我使用具有相同属性的 ImageButton 或 ImageView 没有关系，所以我将讨论 ImageButton。

如果我使用 ImageButton，我会得到我想要的，除了背景是灰色的。 ![在此处输入图像描述](../Images/938a2c473fdf0f8751afc9293a2e442d.png)

如果我在以前的 custom_view.xml 中添加一行，以获得透明背景（或改用 ImageView）

```
android:background="#00000000" 
```

图标中的 alpha 将被“裁剪”并且按钮的大小将发生变化。 ![在此处输入图像描述](../Images/94c2f4234629d4d5d9d7e9e27e0bf37f.png)

**问题是。如何获得具有第一张图像（具有默认灰色背景）但具有透明背景的大小的按钮？**

解决问题的方法之一是使按钮背景的颜色与操作栏的颜色相同，它看起来像透明的，但我认为这不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:04:39.777

您是否考虑过使用 ImageView 而不是 ImageButton？只需在 imageview 中设置所需的图像并使用 onclicklistener 来检测点击，就像对 ImageButton 所做的那样。

此外，您还可以指定 ImageButton 的宽度并根据需要设置填充（如果您想使用 android:background="#00000000"）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:15:04.870

您可以使用具有透明背景的图像。它可以在Photoshop中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T12:15:12.007

我认为您可以添加到按钮

android:background="yourimagethere"; 或者也许 android:background=NULL

它会解决问题

# windows-phone-7 - 如何确保用户可以看到整个列表？

> ID：12901980
> 
> 赞同：0
> 
> 时间：2012-10-15T18:44:19.693
> 
> 标签：windows-phone-7, xaml

我在网格中的第 2 行有 3 个列表。网格定义如下：

```
<Grid.RowDefinitions>
    <RowDefinition Height="Auto"/>
    <RowDefinition Height="*"/>
    <RowDefinition Height="Auto"/>
</Grid.RowDefinitions> 
```

我的列表框：

```
<ListBox Foreground="Black" x:Name="MainListBox" Margin="0,0,0,0" ItemsSource="{Binding Items}" HorizontalAlignment="Center">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                <TextBlock Foreground="Black" Text="{Binding Placement}" Style="{StaticResource PhoneTextExtraLargeStyle}" Width="45" />
                <TextBlock Foreground="Black" Text="{Binding Username}" Style="{StaticResource PhoneTextExtraLargeStyle}" Width="160"/>
                <TextBlock Foreground="Black" Text="{Binding Score}" Style="{StaticResource PhoneTextExtraLargeStyle}" Width="160" TextAlignment="Right" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

在第一行我有标题，在最后我有一个广告（占用 100 像素）。列表框被填充到 WebClient 下载完成中。

目前我的列表包含 10 个项目，但我只能滑到第 5,4 号（我看到第 6 行的顶部）。

我的列表框中没有定义高度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:09:26.713

您必须设置列表框的高度。然后它可以滚动到每个项目

# vim - 用 mksession 保存 vim 状态不会保存 Ctrl-6 状态

> ID：12901981
> 
> 赞同：0
> 
> 时间：2012-10-15T18:44:21.520
> 
> 标签：vim, editor, savestate

当我使用 :mksession mysavedsession 保存我的 vim 会话时，它会保存与我相关的所有内容，除了在通过 Ctrl-6 显示的每个 vim 窗口中打开的交换缓冲区。

有什么简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T19:36:27.433

That's `<C-^>`, not `<C-6>`.

I don't think that there's such a thing as a "`<C-^>` state": `<C-^>` is used to edit the previously edited file but it doesn't have a "hard" value. When you are restoring a session you haven't edited any previous file so it's likely that `<C-^>` doesn't work. Just like there's no "previous file" if you just started Vim.

A quick look at `:help mksession`, `:help mkview`, `:help sessionoptions` and `:help viewoptions` doesn't seem to indicate any workaround.

# c# - 剪切与模式匹配的第一个单词（从字符串中）

> ID：12901984
> 
> 赞同：0
> 
> 时间：2012-10-15T18:44:34.453
> 
> 标签：c#, regex, string, winforms

我有一句话：

> “这‘只是’一个例子”

我需要剪切第一个 ' ' 字符之间的单词。

到目前为止，我一直在使用以下正则表达式方法：

```
string name_only = Regex.Match("This 'is' just an example", @"\'([^)]*)\'").Groups[1].Value; 
```

> **结果**：是

它工作得很好，直到另一个 ' 出现：

> “这‘只是’一个例子”

现在我得到：

> **结果**：只是一个 e

我该如何解决这个问题（除了使用“for”循环进行迭代并找到字符的前两个索引，然后使用子字符串剪切单词）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:48:20.887

问题是您的正则表达式以贪婪的方式行事，如果您将其更改为以下内容，它将起作用：

```
@"\'([^)]*?)\'" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T19:39:10.890

默认情况下，正则表达式遵循“最左最长规则”：匹配最左、最长的子字符串。

我倾向于使正则表达式更具体地说明它应该匹配的内容，因此：

```
'(([^']|(''))*)' 
```

那应该匹配：

*   前导单引号字符，后跟
*   零个或多个实例
    *   单引号字符以外的单个字符，或
    *   一个“转义”的单引号字符：两个连续的单引号字符，
*   后跟引出的单引号字符。

然后 $0 为您提供整个匹配项，并为您提供匹配的引用值的内容，不包括导入/导出引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T19:52:16.130

[http://msdn.microsoft.com/en-us/library/3206d374.aspx#Greedy](http://msdn.microsoft.com/en-us/library/3206d374.aspx#Greedy)

> ## 贪婪和懒惰的量词
> 
> 许多量词有两个版本：
> 
> 1.  贪婪的版本。
>     
>     
>     
>     贪心量词会尝试尽可能多地匹配一个元素。
>     
>     
> 2.  非贪婪（或懒惰）的版本。
>     
>     
>     
>     非贪婪量词尝试尽可能少地匹配元素。您可以通过简单地添加一个 ? 将贪婪量词变成惰性量词。

# php - jquery 监听数据库变化

> ID：12901988
> 
> 赞同：0
> 
> 时间：2012-10-15T18:44:46.200
> 
> 标签：php, jquery, mysql

我在页面上有一个项目和任务列表。我希望简单地显示某人何时正在编辑任务记录。有没有一种相当简单的方法让 jquery 监听数据库更改并将行标记为“锁定”我并不是说它会禁用任何东西，只是向用户表明有人正在进行更改。

然后我可以让用户重新加载页面以在保存更改时显示更新的数据。

谢谢，巴特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:52:10.413

`setInterval()`应该做的伎俩。只需让您的 JS 每隔一段时间 ping 后端，即可查看数据库是否仍处于锁定状态。

此外，使用 jQuery 和 AJAX，如果页面解锁，您将不需要用户刷新页面。伪代码：

```
setInterval($.get(attrs to whatever back end script that will actually do the heavy lifting), 5000); // ping every five seconds

// in $.get, you can display different things based on whether or not the back end
// response says it's locked 
```

# firebase - 在 Firebase 中使用 REST API 添加孩子

> ID：12901989
> 
> 赞同：3
> 
> 时间：2012-10-15T18:44:46.510
> 
> 标签：firebase, firebase-realtime-database

嘿，我有一个以下列形式上传的数据集：

```
SomeKey

 -> Alphabet

       -a: "['apple', 'ant']"
       -b: "['ball', 'bat']" 
```

现在使用 Rest API，我想向对象“Alphabet”添加新的孩子。现在，如果我使用 POST ，它会在 Alphabet 中插入一个新的随机密钥，并在[https://gamma.firebase.com/SomeKey](https://gamma.firebase.com/SomeKey)上的 PUT完全覆盖当前数据。如何使用 REST API 插入新的孩子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:58:49.083

您可以通过 URL 直接寻址孩子。

如果您最初将“a”和“b”写到：/SomeKey/Alphabet

然后想稍后添加“c”，您可以发送一个 PUT 请求到：/SomeKey/Alphabet/c

有关 REST API 的其他详细信息在这里： [https ://www.firebase.com/docs/rest-api.html](https://www.firebase.com/docs/rest-api.html)

# javascript - javascript：读取数据包信息

> ID：12901993
> 
> 赞同：0
> 
> 时间：2012-10-15T18:45:02.003
> 
> 标签：javascript, jquery, ajax, ip

我不确定这是否可能。本质上我想运行javascript。当我在客户端上运行 javascript 代码时，我想向我的服务器发送一个 ajax 请求来做一些事情，然后将信息发送回客户端。当这被发回时，我想知道javascript（或jquery）是否有可能读取这个ajax响应来自的源IP和目标IP地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:50:35.890

在响应中将该信息作为 json 的一部分发送，因为服务器已经知道所有内容。