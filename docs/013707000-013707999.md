# StackOverflow 问答 13707000-13707999

# javascript - 使用 __doPostBack 从 JavaScript 调用 ASP.NET TextChanged 事件

> ID：13707003
> 
> 赞同：1
> 
> 时间：2012-12-04T16:06:14.520
> 
> 标签：javascript, asp.net, event-handling, ajax.net, dopostback

像许多其他人一样，我正在尝试从 JavaScript 调用 .NET 控件的服务器端事件。

具体来说，我想`TextChanged`在名为`txtSearch`. 因此，我希望从客户端到达以下事件：

```
protected void txtSearch_TextChanged(object sender, EventArgs e) 
```

在阅读了很多关于 SO 的答案（例如[这里](https://stackoverflow.com/questions/12103740/force-server-textchanged-event-from-javascript)和[这里](https://stackoverflow.com/questions/3936699/asp-net-dopostback-from-javascript)）后，我有以下 JavaScript：

```
__doPostBack('ctl00$ctl00$Container$Main$txtSearch', 'TextChanged'); 
```

但是服务器端事件永远不会触发。

我尝试了许多排列：使用 AutoPostBack 真假，使用和不使用 ASPX 上的服务器端指令中声明的事件（*即*OnTextChanged=""），使用 ClientID 在页面声明中关闭 EventValidation而不是 EVENTTARGET 参数中的 UniqueID ......但该事件仍然从未被触发。

其他几点

*   `txtSearch`按钮控件也是 UpdatePanel 的触发器，以防万一。
*   我正在转换现有的代码，其中有很多，并且正在寻找可以放到每个页面上的东西，而不是将代码隐藏事件转换为 PageMethods。

谁能告诉我我还需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:13:23.230

```
function initTxtBox(){  $('#<%=txtBox.ClientID%>').on('keyup change', function() {setTimeout('txtpostback()', 0); return false;});}
function txtpostback(){__doPostBack('" + txtCadastreNumber.UniqueID + @"','');
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(initTxtBox); 
```

为您的 txtbox 设置 autopostback 属性为 false ，为您的控件或页面声明设置 AutoEventWireup="true" 。OnTextChanged 事件服务器端也可以工作。如果您在项目中不使用 jquery，请告诉我，我会给您一些不使用 jquery 的 javascript 示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:16:14.817

我已经尝试过了，它对我有用：

```
<asp:TextBox runat="server" ID="txtSearch" OnTextChanged="txtSearch_TextChanged"></asp:TextBox>
<input type="button" value="submit" onclick="<%= GetOnChangedScript() %>" /> 
```

服务器端和点击时触发`asp:TextBox`的客户端。该脚本通过以下方式生成：`input``__doPostBack``__doPostBack`[`PostBackOptions`](http://msdn.microsoft.com/en-us/library/system.web.ui.postbackoptions.aspx)

```
protected string GetOnChangedScript()
{
    var options = new PostBackOptions(txtSearch, string.Empty);
    options.AutoPostBack = true;
    options.RequiresJavaScriptProtocol = true;
    var script = Page.ClientScript.GetPostBackEventReference(options);
    return script;
} 
```

当`txtSearch_TextChanged`文本框的值发生更改并`submit`单击按钮时，事件处理程序将触发。

但请注意，对于像文本这样的控件`TextBox`，是存储在视图状态中的；用户输入的新文本存储在表单数据中。当`TextBox`加载视图状态数据时，它会获取旧值。这与表格中出现的新值进行比较。如果值不同，`TextChanged`则触发事件。如果否，则不会触发事件处理程序。这是`Page_Load`事件被触发（发生回发）的原因，但`txtSearch_TextChanged`由于值`TextBox`没有改变而没有触发。

# c - 为什么仍然可以读取已损坏的链表

> ID：13707012
> 
> 赞同：1
> 
> 时间：2012-12-04T16:06:26.467
> 
> 标签：c, linked-list

我试图销毁一个单链表，首先，我的销毁函数代码如下：

```
void destroy_list_v0 (SLINK *list)
{   
SLINK ptr = *list;

while (NULL != *list)
    {
    ptr = *list;
    *list = (*list)->next;
    free (ptr);
    }
} 
```

函数 v0 表现完美。这是输出。

```
Input a number for length of the link.
init_start.
init_end & traverset_start.
The 0th element is 0.
The 1st element is 5.
The 2nd element is 93.
The 3rd element is 92.
The 4th element is 70.
The 5th element is 92.
traverse_end & destroy_start.
destroy_end & traverse_start.
traverse_end.
All operations done. 
```

然后我觉得单指针就够了，于是我把函数调整为单指针版本：

```
void destroy_list_v1 (SLINK list)
{
SLINK ptr = list;   
while (NULL != list)
    {
    ptr = list;
    list = list->next;
    free (ptr);
    }
} 
```

这是 v1 的输出：

```
Input a number for length of the link.
init_start.
init_end & traverset_start.
The 0th element is 0.
The 1st element is 27.
The 2nd element is 38.
The 3rd element is 20.
The 4th element is 66.
The 5th element is 30.
traverse_end & destroy_start.
destroy_end & traverse_start.
The 0th element is 0.
The 1st element is 32759808.
The 2nd element is 32759968.
The 3rd element is 32759936.
The 4th element is 32759904.
The 5th element is 32759872.
traverse_end.
All operations done. 
```

为了确认销毁函数工作正常，我在链表被销毁后遍历它。我发现可以读取列表（如果是v0，则无法读取），尽管每个节点的值都已更改且不确定。我以为 v0 执行后，列表的指针指向 NULL，但 v1 执行后，它仍然指向原始地址。为了测试这个想法，我将 v0 调整为 v2：

```
void destroy_list_v2 (SLINK *list)
{   
SLINK p_list = *list;
SLINK ptr = *list;
while (NULL != *p_list)
    {
    ptr = *p_list;
    p_list = p_list->next;
    free (ptr);
    }
} 
```

这是 v2 输出：

```
Input a number for length of the link.
init_start.
init_end & traverset_start.
The 0th element is 0.
The 1st element is 76.
The 2nd element is 53.
The 3rd element is 80.
The 4th element is 31.
The 5th element is 97.
traverse_end & destroy_start.
destroy_end & traverse_start.
The 0th element is 0.
The 1st element is 13860864.
The 2nd element is 13861024.
The 3rd element is 13860992.
The 4th element is 13860960.
The 5th element is 13860928.
traverse_end.
All operations done. 
```

我认为我的分析是正确的，但它导致了新的问题。

节点结构在这里：

```
typedef struct tag_node
{
int elem;
struct tag_node *next;
}NODE, *SLINK; //SLINK means SINGLE LINK 
```

**我有两个问题：**

**1：指针'next'存储在当前指针指向的内存空间中，释放当前节点后，为什么指针'next'的内存空间仍然可以读取？指针“下一个”还活着吗？我有这个问题是因为我认为在 v1 或 v2 执行之后，它应该只是可以读取的 header 节点。**

**2：我toutht v1和v2破坏了整个列表，在v1或v2执行之后，为什么header的值仍然存在？我认为应该是第 1 到第 5 变成了一个不确定的数字。**

这是整个代码，环境是Debian，clang：

```
#include    <stdio.h>
#include    <stdlib.h>
#include    <time.h>
#include    <string.h>

#define     i_track(n)  printf ("The %s's is %d.\n", #n, (n))
#define     s_track(n)  printf ("%s.\n", #n);

typedef struct tag_node
{
int elem;
struct tag_node *next;
}NODE, *SLINK; //SLINK means SINGLE LINK

void  node_track (SLINK list);

NODE *node_generate (void);
SLINK init_list (int len);
SLINK locate_cur (SLINK list, int target_elem);
void insert_node (SLINK *list, int new_elem, int tag_elem);
SLINK traverse_list (SLINK list);
void clear_list (SLINK list);
void destroy_list_v0 (SLINK *list);
void destroy_list_v1 (SLINK list);
void destroy_list_v2 (SLINK *list);
void list_info (SLINK list, int node_elem);

int main (int argc, char *argv[])
{
int len;
SLINK list;
printf ("Input a number for length of the link.\n");
scanf ("%d", &len);
s_track(init_start);
list = init_list (len);
s_track(init_end & traverset_start);
traverse_list (list);
s_track(traverse_end & destroy_start);
//  destroy_list_v0 (&list);
//  destroy_list_v1 (list);
destroy_list_v2 (&list);
s_track(destroy_end & traverse_start);
traverse_list (list);
s_track(traverse_end);
s_track(All operations done);

return EXIT_SUCCESS;
}               /* ----------  end of function main  ---------- */

NODE *node_generate (void)
{
NODE *new_node = malloc (sizeof (NODE));
if (NULL == new_node)
{
    printf ("ERROR: malloc failed.\n");
    exit (EXIT_FAILURE);
}
memset (new_node, 0, sizeof(NODE));
return new_node;
}

SLINK locate_cur (SLINK list, int target_elem)
{
NODE *prev, *cur;
prev = node_generate ();
cur = node_generate ();
for (prev = list, cur = list->next; NULL != cur && target_elem != cur->elem; prev = cur, cur = cur->next)
    ;
return cur;
}

void insert_node (SLINK *list, int new_elem, int tag_elem)
{
NODE *new_node = node_generate ();
NODE *cur = *list;
new_node->elem = new_elem;
if ((int)NULL == tag_elem)
{
    new_node->next = (*list)->next;
    (*list)->next = new_node;
}
else
{
    *list = locate_cur (cur, tag_elem);
    new_node->next = (*list)->next;
    (*list)->next = new_node;
}
}

SLINK init_list (int len)
{
SLINK header = node_generate ();
srand ((unsigned) time(0));
int elem;
for (int i = 0; i < len; i++)
    {
        elem = rand () % 100;

        if (4 == elem / 10)
        {
            elem = elem + 50;
        }
        if (4 == elem % 10)
        {
            elem = elem + 5;
        }
        if (0 == elem % 100)
        {
            elem = elem + 999;
        }
        insert_node (&header, elem, (int)NULL); 
    }
return header;
}

void clear_list (SLINK list)
{
for (SLINK cur = list->next; NULL != cur; )
{
    cur = cur->next;
    free (list->next);
    list->next = cur;
}
}

void destroy_list_v0 (SLINK *list)
{   
SLINK ptr = *list;

while (NULL != *list)
{
    ptr = *list;
    *list = (*list)->next;
    free (ptr);
}
}

void destroy_list_v1 (SLINK list)
{   
SLINK ptr = list;

while (NULL != list)
{
    ptr = list;
    list = list->next;
    free (ptr);
}
}

void destroy_list_v2 (SLINK *list)
{
SLINK p_list = *list;
SLINK ptr = *list;
while (NULL != p_list)
{
    ptr = p_list;
    p_list = p_list->next;  
    free (ptr);
}
}

SLINK traverse_list (SLINK list)
{
SLINK ptr = list;
for (int node_num = 0; ptr != NULL; ptr = ptr->next)
{
    list_info (ptr, node_num);
    ++node_num;
}
return list;
}

void list_info (SLINK list, int node_num)
{
if (1 == node_num % 10 && 11 != node_num)
{
    printf ("The %dst element is %d.\n", node_num, list->elem);
}
else if (2 == node_num % 10 && 12 != node_num)
{
    printf ("The %dnd element is %d.\n", node_num, list->elem);
}
else if (3 == node_num % 10 && 13 != node_num)
{
    printf ("The %drd element is %d.\n", node_num, list->elem);
}
else
{
    printf ("The %dth element is %d.\n", node_num, list->elem);
}
}

void node_track (NODE *flag)
{
printf ("The flag element is %d.\n", flag->elem);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:09:57.877

释放内存与更改指针变量中包含的地址不同。

调用*free*将内存释放回*malloc*管理的堆。如果你有一个变量仍然指向你之前分配的内存，那么在释放操作之后它*仍然指向那里。*但是，在 free 之后将指针用于任何内容是一个错误。

如果你想确保你的链表不再指向释放的内存，你可以在相关的内存被释放后将 NULL 分配给结构中的每个指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:15:57.790

在 C 中习惯这一点。“行为未定义”这句话是你很快就会习惯的口头禅，它意味着做某些事情可能会导致任何事情，从崩溃到明显完美的行为。

指针是这个口头禅的经典案例。您释放了内存并且仍然可以访问它？嗯，它是未定义的。等等，现在是夏令时，现在它崩溃了？好吧，它是未定义的。等等，你在 Windows 上运行它，它工作正常，除了以 Y 结尾的日子？好吧，它是未定义的。

记住咒语；它会很好地为您服务。当你做错事时期望C大声抱怨是错误的期望，记住这一点可以为你节省很多悲伤和眼泪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:15:06.873

1.  欢迎来到 C 的土地，在那里你可以做任何事情（即使它不合法）。您所做的是调用未定义的行为。您不再被允许访问已删除的内存，但没有人阻止您尝试。C 不会检查您是否确实在访问有效内存。即使你告诉它做错事，它也会继续做你告诉它的事情。它“有效”的事实是运气和实现定义的东西的混合。像这样的错误很难找到，因为程序没有崩溃，而是继续运行，直到很长一段时间后，当它最终开始崩溃时，您才发现错误。一旦你调用未定义的行为（当你访问已删除的内存时会发生这种情况），任何事情都可能发生，从黑洞打开并吞噬我们所有人，到程序崩溃，

2.  `v1`并`v2`确实销毁整个列表，但释放内存并不意味着您也会擦除内存中的值。这些值仍然存在，只是不再允许您访问它们，因为您已将这些内存桶还给了操作系统。桶仍然保存值。它们不再是你的了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T16:14:03.577

free() 将缓冲区标记为空闲，这意味着后续的 malloc() 可以使用相同的日期区域，这并不意味着它将被擦除或其他任何东西，但它可以返回给操作系统（并因此访问它可能导致分段错误）。

访问已释放的内存是一个错误，因为即使它通常仍然未触及，您也可能正在访问其他一些函数使用的内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T16:21:45.283

C99 说：

free 函数会导致 ptr 指向的空间被释放，也就是说，可用于进一步分配。如果 ptr 是空指针，则不会发生任何操作。**否则，如果参数与 calloc、malloc 或 realloc 函数先前返回的指针不匹配，或者如果空间已通过调用 free 或 realloc 被释放，则行为未定义。**

# javascript - 猜猜为什么小提琴工作和我的网站上没有

> ID：13707015
> 
> 赞同：-5
> 
> 时间：2012-12-04T16:06:38.643
> 
> 标签：javascript, jquery, jsfiddle

这是简单的 Jquery 代码：

```
$(document).ready(function() {
    var activeIndex = $('#bmenul > li.totalactive').index();

    $('#bluenzbarimg').css({
        'marginLeft': (180 * activeIndex) + 'px'
    }).show();

    $('#bmenul > li').not('.totalactive').hover(function() {
        var index = $(this).index();
        $('#bluenzbarimg').stop().animate({
            'marginLeft': (180 * index) + 'px'
        }, 400);
    }, function() {
        $('#bluenzbarimg').stop().animate({
            'marginLeft': (180 * activeIndex) + 'px'
        }, 400);
    });
});​ 
```

这是与网站（除了一些 css）和这里[**的网站**](http://www.bluenz.com/)几乎完全相同的代码[**的小提琴**](http://jsfiddle.net/rzJMv/10/)。[](http://www.bluenz.com/)

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:08:50.687

我猜是因为

```
$('.bs-docs-sidenav').affix({ 
```

没有 affix 方法，因此您的其余 javascript 无法加载..

要么，您缺少一个 javascript 包含，要么您只需要删除该调用！**

# mysql - 从客户表中返回一个客户名称的简单 MySQL 查询

> ID：13707017
> 
> 赞同：1
> 
> 时间：2012-12-04T16:06:41.653
> 
> 标签：mysql

我正在努力解决 MySQL 查询。我尝试过在下面发布的查询，但它永远不会返回正确的值。例如，我在客户表中搜索“John Smith”，它会返回其他条目，但不会返回 John Smith。

这是查询：

```
SELECT customerName
  FROM Customer 
 WHERE customerName < 'John Smith'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:08:09.310

尝试 `SELECT customerName FROM Customer WHERE customerName = 'John Smith';`

或者可能 `SELECT customerName FROM Customer WHERE customerName LIKE '%John%Smith%';`

顺便提一句。在您的查询中，您正在搜索任何小于 John Smith 的 customerName。我想大多数数据库都会给出所有按字母顺序排列的名称。如果您总是只想要一个名字，请考虑添加`LIMIT 1`到您的查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:09:06.227

```
SELECT customerName FROM Customer WHERE customerName LIKE '%John%Smith%'; 
```

我建议您查看 MySQL 论坛并学习一些基本的 SQL 语法。

# .htaccess - 从 .htaccess 重写中排除 Magento 管理目录

> ID：13707025
> 
> 赞同：2
> 
> 时间：2012-12-04T16:07:18.677
> 
> 标签：.htaccess, magento, magento-1.7

在我们的 Magento 网站上，我们已将此添加到 .htaccess 以清理 URL 并避免“重复”页面：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^index.php/(.*)$ http://oursite.com/$1 [R=301,L] 
```

但是，由于某种原因，当`oursite.com/index.php/admin/`重定向到`oursite.com/admin/`.

我已经看过并且似乎找不到解决此问题的正确方法，我发现的所有解决方案似乎都是关于排除顶级目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:45:56.230

最后真的很简单，我只是添加了

```
RewriteRule ^index.php/(admin|user)($|/) - [L] 
```

# api - 身份验证安全问题

> ID：13707029
> 
> 赞同：0
> 
> 时间：2012-12-04T16:07:33.683
> 
> 标签：api, http, authentication, https, security

我是一名初学者网络开发人员，我对我开发的 API 的安全性有一些疑问。这是一个简单的 Web 服务，需要身份验证才能访问/修改数据。

我想知道通过 HTTP 对用户进行身份验证的最佳做法是什么。

目前我的应用程序是这样的：

用户通过需要用户名和密码的 API 请求 (POST) 进行身份验证。响应包含有关用户的信息和将来用于进一步请求的 TOKEN。

我的担忧：我不知道身份验证请求是否应该是 POST。这听起来更像是一个 GET，因为 POST 应该创建一些东西（至少这是 Ruby on Rails 中的约定）。然后，即使使用 POST 或 GET，在信息传输过程中信息仍然是“可见的”。我听说了一些关于 HTTPS 的事情——它是如何解决问题的？

令牌在用户创建时生成 - 并且在时间上保持不变。这很糟糕吗？是否应该在“注销”后再次生成令牌？我见过使用 API_KEY 和令牌进行身份验证的 API。这是如何运作的？

我有一些 GET 请求来检索有关某事的信息。通过此请求，我将从身份验证请求中检索到的令牌作为参数传递。这个可以吗？我的意思是令牌是敏感信息。

我在哪里可以找到关于我的这些问题的更多信息（书籍、文章、w/e）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:11:14.430

GET 的问题更多是物理安全而不是网络安全——我知道我经常在工作中或在家中与其他人一起登录网站——我当然不希望我的凭据作为查询字符串附加到 URL。

使用 HTTPS (SSL) 将保护您的 postdata，因为信息在通过线路发送之前已加密。加密算法使用一些非常聪明的数学来生成其解密令牌，以确保它不易受到中间人攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:14:29.150

HTTPs 会加密到您网站的所有流量，因此会隐藏任何获取和发布请求。它要求您购买 HTTPS 证书（便宜），并获得一个非共享 IP 来托管（不那么便宜）。（如果有人谈论自签名证书 - 好吧，这是可能的，但如果外部人员想与您的服务交谈，则不建议这样做）。

拥有一个持久的登录令牌可能很糟糕，这取决于你想要什么样的不可否认性。如果有人可以在 2 年前登录，并继续使用令牌，你怎么知道它仍然是原始请求者？令牌应该过期并且可以重新请求。

API 密钥通常适用于带外交换的共享密钥（通常通过从托管商的网站获取）。使用自定义身份验证方案和标头，并且必须为每个请求计算和检查。这不需要 HTTPS - 共享密钥用于生成身份验证标头，但不与它一起发送，因此该密钥不会随每个请求一起传播。当然，您需要编写此代码，并弄清楚您想要的过程是什么。除非您知道自己在做什么，否则我通常会避免这种情况-您需要对请求进行规范表示，对其进行签名，然后将其用作标头。这并不复杂，但也不简单。

# c++ - 为什么不将参数修饰符（即“const”或“volatile”）视为函数类型或签名的一部分？

> ID：13707033
> 
> 赞同：7
> 
> 时间：2012-12-04T16:07:45.913
> 
> 标签：c++

请注意，以下两个函数具有相同的类型和签名：

```
void foo1(int t) {} // foo1 has type 'void(*)(int)', and signature '(*)(int)'
void foo2(const int t) {} // Also type 'void(*)(int)', signature '(*)(int)' 
```

（`const`不是函数类型或函数签名的一部分）。同样，返回类型上的修饰符（`const`或`volatile`）不会影响函数类型或函数签名。

但是，在函数定义本身（未显示）中，命名变量`t`确实保持`const`了`foo2`.

有许多 StackOverflow 问题讨论了为什么函数的*返回类型*不被视为函数签名的一部分（用于重载解析）。

但是，我找不到任何 StackOverflow 问题来询问为什么参数修饰符（`const`或`volatile`）不是函数类型或签名的一部分。另外，我直接查看了 C++11 标准文档，发现很难解开。

`const`参数修饰符（即和`volatile`）不是函数类型或签名的一部分这一事实背后的基本原理是什么？

**附录**为了清楚起见，从下面 R.MartinhoFernandes 的回答中，我应该澄清在 C++ 中（我认为）参数修饰符`const`，并且如果它们是**顶级**`volatile`修饰符，则仅作为函数类型/签名的一部分被忽略- 请参见下面的答案。

 *** * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T16:12:58.783

> 参数修饰符（即 const 和 volatile）不是函数类型或签名的一部分这一事实背后的基本原理是什么？

`void foo(int)`从调用者的角度来看，和之间没有区别`void foo(int const)`。无论您传递给它的任何内容都不会被修改，无论修饰符如何：该函数将获得一个副本。

从实现者的角度来看，唯一的区别是`void foo(int x)`你可以在正文中进行变异`x`（即你的本地副本），但你不能`x`使用`void foo(int const x)`.

C++ 承认这两种观点。通过做出两个声明`void foo(int);`并`void foo(int const);`声明相同的函数来确认调用者的观点。通过允许您将函数声明为`void foo(int x);`但将其定义为`void foo(int const x) { /*...*/ }`要确保不会意外分配给参数，从而承认了实现者的观点。

请注意，这仅适用于 top-level `const`，即`const`适用于整个类型。在诸如`int const&`or`int const*`之类的修饰符仅适用于类型的一部分，作为“指向 (const (int)) 的指针”，因此它不是顶级的`const`。然而`int *const`，`const`再次适用于整个类型，如“const（指向（int））”。**

# c# - 正确使用动态瓷砖？

> ID：13707039
> 
> 赞同：2
> 
> 时间：2012-12-04T16:08:11.153
> 
> 标签：c#, windows-8

我目前正在为我的 Windows 8 应用程序实现动态磁贴。现在我想要两种不同的瓷砖样式（小的和放大的）。我试过这样：

```
 var tileUpdater = TileUpdateManager.CreateTileUpdaterForApplication();
            var tileUpdaterBig = TileUpdateManager.CreateTileUpdaterForApplication();
            tileUpdater.Clear();
            tileUpdaterBig.Clear();
            tileUpdater.EnableNotificationQueue(true);
            tileUpdaterBig.EnableNotificationQueue(true);

            foreach (var item in Articles)
            {
                var xml = TileUpdateManager.GetTemplateContent(TileTemplateType.TileSquareText04);
                var bigXML = TileUpdateManager.GetTemplateContent(TileTemplateType.TileWideText09);
                var textElements = xml.GetElementsByTagName("text");
                var bigTextElements = bigXML.GetElementsByTagName("text");
                textElements[0].AppendChild(xml.CreateTextNode(item.Title));
                bigTextElements[0].AppendChild(bigXML.CreateTextNode(item.Title));
                bigTextElements[1].AppendChild(bigXML.CreateTextNode(item.Preview));
                var notification = new TileNotification(xml);
                var notificationBig = new TileNotification(bigXML);
                tileUpdater.Update(notification);
                tileUpdaterBig.Update(notificationBig);
            } 
```

这是正确的方法吗？

此外，似乎磁贴内只显示了一些数据，而不是列表中的每个元素。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:16:09.290

您只需要一个 TileUpdater。查看[本文](http://blogs.msdn.com/b/jennifer/archive/2012/11/20/real-world-live-tiles-working-with-live-tiles-in-windows-8-apps.aspx)中的代码示例（向下滚动到“这是最终代码”）。

从本质上讲，由于您不知道用户是否将您的图块放置为方形或宽格式，您需要在一个有效负载中发送两者的更新。

如果您希望最后 5 次更新全部滚动磁贴，则应仅将[EnableNotificationQueue设置为 true。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.enablenotificationqueue.aspx)如果您只想显示最新更新并替换其他更新，请将其设置为 false（或不执行任何操作，因为 false 是默认值）。

# visual-studio - TFS 构建控制器失败

> ID：13707042
> 
> 赞同：3
> 
> 时间：2012-12-04T16:08:31.063
> 
> 标签：visual-studio, visual-studio-2012, tfsbuild

我有自己的 TFS 构建控制器，但是由于此错误导致构建失败，知道可能是什么问题吗？

```
Exception Message: The type initializer for 'Microsoft.Web.Deployment.DeploymentManager' threw an exception. (type TypeInitializationException)
Exception Stack Trace: 
Server stack trace: 
   at Microsoft.Web.Deployment.DeploymentProviderSettingCollection..ctor(String factoryName)
   at Microsoft.Web.Deployment.DeploymentProviderOptions..ctor(String factoryName)
   at Microsoft.Web.Deployment.DeploymentProviderOptions..ctor(DeploymentWellKnownProvider wellKnownProvider)
   at Microsoft.TeamFoundation.Deployment.Workflow.Activities.MSDeployWorker.RunCommand(String publishEndpoint, String targetSite, String userName, String password, String packagePath, String setParametersPath, Boolean allowUntrustedCertificates)
   at System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs)
   at System.Runtime.Remoting.Messaging.StackBuilderSink.AsyncProcessMessage(IMessage msg, IMessageSink replySink)

Exception rethrown at [0]: 
   at System.Activities.Statements.Throw.Execute(CodeActivityContext context)
   at System.Activities.CodeActivity.InternalExecute(ActivityInstance instance, ActivityExecutor executor, BookmarkManager bookmarkManager)
   at System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem.ExecuteBody(ActivityExecutor executor, BookmarkManager bookmarkManager, Location resultLocation)

Inner Exception Details:

Exception Message: The type initializer for 'Microsoft.Web.Deployment.BuiltInTypesCache' threw an exception. (type TypeInitializationException)
Exception Stack Trace:    at Microsoft.Web.Deployment.DeploymentProviderFactoryCollection.LoadFromRegistry()
   at Microsoft.Web.Deployment.DeploymentManager.LoadDeploymentManagerSettings()
   at Microsoft.Web.Deployment.DeploymentManager..cctor()

Inner Exception Details:

Exception Message: The provider 'Microsoft.Data.Tools.Schema.MsDeploy.MsDeployProviderFactory' could not be loaded. (type DeploymentException)
Exception Stack Trace:    at Microsoft.Web.Deployment.DeploymentProviderFactory.Create(Type type)
   at Microsoft.Web.Deployment.BuiltInTypesCache.InspectTypesForWebDeployAttributes(IEnumerable`1 types, String dllName)
   at Microsoft.Web.Deployment.BuiltInTypesCache..cctor()

Inner Exception Details:

Exception Message: The type 'Microsoft.Data.Tools.Schema.MsDeploy.MsDeployProviderFactory' could not be loaded. The configuration settings may not be valid. (type DeploymentException)
Exception Stack Trace:    at Microsoft.Web.Deployment.ReflectionHelper.CreateInstanceT
   at Microsoft.Web.Deployment.DeploymentProviderFactory.Create(Type type)

Inner Exception Details:

Exception Message: The type initializer for 'Microsoft.Data.Tools.Schema.MsDeploy.MsDeployProviderBaseProviderFactory' threw an exception. (type TypeInitializationException)
Exception Stack Trace:    at System.Runtime.Remoting.RemotingServices.AllocateUninitializedObject(RuntimeType objectType)
   at System.Runtime.Remoting.Activation.ActivationServices.CreateInstance(RuntimeType serverType)
   at System.Runtime.Remoting.Activation.ActivationServices.IsCurrentContextOK(RuntimeType serverType, Object[] props, Boolean bNewObj)
   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)
   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)
   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)
   at System.Activator.CreateInstance(Type type, Boolean nonPublic)
   at System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes, StackCrawlMark& stackMark)
   at System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes)
   at System.Activator.CreateInstance(Type type, Object[] args)
   at Microsoft.Web.Deployment.ReflectionHelper.CreateInstanceT

Inner Exception Details:

Exception Message: Could not load file or assembly 'Microsoft.Data.Tools.Schema.Sql, Version=10.3.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified. (type FileNotFoundException)
Exception Stack Trace:    at Microsoft.Data.Tools.Schema.MsDeploy.MsDeployProviderBaseProviderFactory..cctor() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T16:56:47.030

注释掉**AssemblyInfo.cs**文件中的下一行。

**[组装：组装文化（“”）]**

或者

在构建定义中，根据本地机器更改配置和平台。尝试将 x86 用于 32 位 CPU 或根据机器的 CPU。

一个一个地尝试这两种解决方案。看看它是否能解决问题。

# c# - 正则表达式为带有混合数字和字母的任何单词设置标题大小写然后大写

> ID：13707046
> 
> 赞同：1
> 
> 时间：2012-12-04T16:08:50.780
> 
> 标签：c#, regex

给定以下示例字符串：

```
PP12111 LOREM IPSUM TM ENCORE
LOREM PP12111 IPSUM TM ENCORE
LOREM IPSUM ENCORE TM PP12111
LOREM PP12111 PP12111 TM ENCORE 
```

什么是 .NET RegEx 来设置标题大小写，然后将任何包含数字和字母的字符串转换为大写（见下面的注释）：

```
PP12111 Lorem Ipsum TM Encore
Lorem PP12111 Ipsum TM Encore
Lorem Ipsum Encore TM PP12111
Lorem PP12111 PP12111 TM Encore 
```

Alternativley，我可以从所有设置为 Title Case 开始，所以只有包含数字和字母的字符串需要设置为大写：

```
Pp12111 Lorem Ipsum TM Encore
Lorem Pp12111 Ipsum TM Encore
Lorem Ipsum Encore TM Pp12111
Lorem Pp12111 Pp12111 TM Encore 
```

**注意**：如果存在 TM 的任何变体（tm，Tm，tM），它应该是完整的大写。其中 TM 可以是“lorem ipsum TM valor”或“lorem ipsum (TM) valor”。

这是一种有效的纯字符串操作方法；我认为 RegEx 解决方案可能更合适？

```
private static void Main( string[] args )
{
    var phrases = new[]
        {
          "PP12111 LOREM IPSUM TM ENCORE", "LOREM PP12111 IPSUM TM ENCORE",
          "LOREM IPSUM ENCORE TM PP12111", "LOREM PP12111 PP12111 TM ENCORE",
        };

    Test(phrases);
}

private static void Test( IList<string> phrases )
{
    var ti = Thread.CurrentThread.CurrentCulture.TextInfo;

    for( int i = 0; i < phrases.Count; i++ )
    {
        string p = ti.ToTitleCase( phrases[i].ToLower() );
        string[] words = p.Split( ' ' );

        for( int j = 0; j < words.Length; j++ )
        {
            string word = words[j];
            if( word.ToCharArray().Any( Char.IsNumber ) )
            {
                word = word.ToUpper();
            }
            words[j] = word.Replace( " Tm ", " TM " ).Replace( "(Tm)", "(TM)" );
        }

        phrases[i] = string.Join( " ", words );

        Console.WriteLine( phrases[i] );
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:53:05.667

你可以像这样使用这个正则表达式：

```
MatchEvaluator evaluator = m => ti.ToTitleCase(m.Value.ToLower());
string result = Regex.Replace(input, @"\b(?!TM\b)[A-Z']+\b", evaluator,
                              RegexOptions.IgnoreCase); 
```

`\b`                       是一个词的边界。
`pos(?!suffix)`匹配位置不是前面的后缀。               字边界不在没有数字的
`\b(?!TM\b)`       TM字之前。
`[A-Z]+`

一起：单词边界不在“TM”之前，后跟字母 A 到 Z 的单词和单词边界。

* * *

**更新#1**

*大写“tm”、“Tm”、“tM”：*

我不知道是否所有未大写的都可以大写。在这种情况下，最简单的解决方案是将输入大写：`input.ToUpper()`. 否则执行第二个正则表达式替换：

```
string result = Regex.Replace(result, @"\btm\b", "TM", RegexOptions.IgnoreCase); 
```

* * *

**更新#2**

如果你想大写几个单词，你可以使用另一个匹配评估器：

```
MatchEvaluator toUpperCase = m => m.Value.ToUpper();
string result = Regex.Replace(result, @"\b(tm|xxx|yyy)\b", toUpperCase,
                              RegexOptions.IgnoreCase); 
```

`tm|xxx|yyy`指定要大写的单词（“tm”、“xxx”或“yyy”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:29:31.313

这是之前要求您查看的紧密匹配项：[C# 中的正则表达式大写替换](https://stackoverflow.com/questions/205382/regular-expression-uppercase-replacement-in-c-sharp)。一个正则表达式在这里是不够的，你必须编写一个 MatchEvaluator 函数来把所有的东西都变成大写。

编辑：看到“注意：如果存在 TM 的任何变体（tm，Tm，tM），它应该是完整的大写。其中 TM 可以是“lorem ipsum TM valor”或“lorem ipsum (TM) valor”。让我认为您应该完全停止考虑正则表达式。前任呢。oa ***tm*** al, stun ***tm*** en or etc, etc, etc.

是的，您可能可以编写一个可以找到所有情况的正则表达式，或者一个将您的逻辑考虑在内的良好而彻底的匹配评估器。但是，您用使我认为您不熟悉正则表达式的术语来描述问题。因此，我很难认为这对您来说是一个很好的答案，并且将是一个“矮小的”解决方案，而不是任何应该投入生产的解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T16:18:20.190

第一：小写一切。

第二：把句子分成单词。

对于每个单词：

检查，如果只有两个字母或字母和数字`([a-z]{2}|[a-z0-9]{2,})`

匹配 -> 大写。

No Match-> TitleCase 吧。

# underscore.js - 使用 Jasmine 的异步函数规范

> ID：13707047
> 
> 赞同：3
> 
> 时间：2012-12-04T16:09:00.310
> 
> 标签：underscore.js, jasmine

当我尝试使用 jasmine在[这个 qunit 测试中测试](https://github.com/documentcloud/underscore/blob/master/test/functions.js#L193)[_.debounce 函数](https://github.com/documentcloud/underscore/blob/master/underscore.js#L655)时，会发生一些奇怪的事情。

似乎可以使用`jasmine.Clock.useMock()`...进行测试但是当我写时：

```
it('_.debounce()', function () {
    var spy = jasmine.createSpy('debounce'),
        debouncedSpy = _.debounce(spy, 100);

    jasmine.Clock.useMock();

    // direct calls
    debouncedSpy();
    debouncedSpy();
    debouncedSpy();

    // timed out calls
    setTimeout(debouncedSpy, 60);
    setTimeout(debouncedSpy, 120);
    setTimeout(debouncedSpy, 180);
    setTimeout(debouncedSpy, 240);
    setTimeout(debouncedSpy, 300);

    jasmine.Clock.tick(300);
    expect(spy).toHaveBeenCalled();

    jasmine.Clock.tick(400);
    expect(spy).toHaveBeenCalled();

    jasmine.Clock.tick(1000);
    expect(spy.callCount).toBe(1);
}); 
```

它不起作用（呼叫计数等于 3）。但是如果没有直接调用（或者当我使用`setTimeout(..., 0)`），一切正常。我做错了什么？

我也尝试通过`runs`and来完成它`waits`，并且它有效。但为什么它在前面的例子中不起作用？

```
it('should be called once', function () {
    var spy = jasmine.createSpy('debounce'),
        debouncedSpy = _.debounce(spy, 100);

    runs(function () {
        debouncedSpy();
        debouncedSpy();
        debouncedSpy();

        expect(spy).not.toHaveBeenCalled();

        setTimeout(debouncedSpy, 60);
        setTimeout(debouncedSpy, 120);
        setTimeout(debouncedSpy, 180);
        setTimeout(debouncedSpy, 240);
        setTimeout(debouncedSpy, 300);
    });

    waits(800);

    runs(function () {
        expect(spy.callCount).toBe(1);
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-21T22:31:46.667

直到[https://github.com/pivotal/jasmine/issues/361](https://github.com/pivotal/jasmine/issues/361)和[https://github.com/pivotal/jasmine/pull/455](https://github.com/pivotal/jasmine/pull/455)。发布后，您将其添加到您的测试中，让 Jasmine 跳过去抖动延迟。

```
_.debounce = function (func) { return function () { func.apply(this, arguments);}; }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-25T19:32:57.250

茉莉花模拟时钟只改变了它的行为，`setTimeout`它是同类，它目前不模拟`Date`见[https://github.com/pivotal/jasmine/issues/361](https://github.com/pivotal/jasmine/issues/361)和[https://github.com/pivotal/jasmine/pull /455](https://github.com/pivotal/jasmine/pull/455)。使用`runs`and `waitsFor`（或在 jasmine 2.0`done`回调中）实际上让时间过去了，因此浏览器实际上更改了`Date`值，因此内部发生的日期数学`debounce`加起来。

# c++ - 将数组引用 `T(&)[n]` 获取到`std::array 的内容 `

> ID：13707048
> 
> 赞同：6
> 
> 时间：2012-12-04T16:09:05.693
> 
> 标签：c++, arrays, reference

假设我有一个`std::array<T, n>`并且想要对其内容（即非公开的`elems`数组成员）进行数组引用。

我很惊讶地发现`std::array<T, n>::data()`return`T *`而不是`T (&)[n]`，所以似乎某种演员表是必要的。我可以写：

```
std::array<int, 5> arr;
int (&ref)[5] = *reinterpret_cast<int (*)[5]>(arr.data()); 
```

但是，这看起来很丑陋并且可能不安全。它是合法的（定义明确的）代码吗？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:37:02.490

该标准没有提供 的底层实现`array`，但*如果*它`int[5]`用作底层表示，那么对于该实现，只有您的演员表是（不可移植的）合法的。对于任何其他底层表示，您都违反了严格的别名规则并输入未定义的行为。

除了尝试将数组作为数组返回之外，您是否可以使用迭代器对来界定您感兴趣的范围，遵循标准库的先例？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:56:13.627

C++ 中的数组是有缺陷的类型（这里我说的是 c 风格的数组，而不是`std::array`）。原因是数组的大小没有存储在内存中的任何位置，它仅在编译时才知道。当您将数组转换为其他类型（通常是指针）时，数组的大小会丢失。

现在您可以看到无法执行反向转换，因为编译器无法知道数组的大小，只查看指向第一个成员的指针。正如已经建议的那样，您可以改用一对迭代器。

# vim - 快速修复和预览窗口调整大小

> ID：13707052
> 
> 赞同：4
> 
> 时间：2012-12-04T16:09:10.470
> 
> 标签：vim

通常当 quickfix 窗口打开时它会改变屏幕布局，但是当窗口关闭时 Vim 会恢复它。

但是有一种情况是布局恢复失败：预览窗口打开时出现垂直分割，`:wincmd J`在quickfix中执行（或者用 开启`:botright copen`）。在这种情况下，预览窗口的大小会改变。

我提出了一个解决方案，我把它放在 ~/.vim/ftplugin/qf.vim 上，

```
 " Only do this when not done yet for this buffer
  if exists("b:did_ftplugin")
     finish
  endif

  " expand quickfix when there are vertical splits
  wincmd J

  func! RestorePreviewWindow()
     let l:quickfixHeight = winheight(0)
     wincmd p " include previous window on jump list
     silent! wincmd P  " jump to preview window
     if &previewwindow " if we really get there...
        exe "resize " . (&previewheight - l:quickfixHeight - 1)
        wincmd p " back to old window
     endif
  endfunc
  augroup quickfixClosing
     au!
     au BufDelete <buffer> call RestorePreviewWindow()
  augroup END 
```

，但我想知道这个问题是否有更好/更简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:26:38.730

如果您可以在普通的 Vim ( `vim -N -u NONE`) 中重现该问题，我会将其报告给[vim_dev 邮件列表](http://www.vim.org/community.php)以在 Vim 中修复它。当其他普通窗口可以代替预览窗口时，预览窗口不应更改其大小。

如果这只是您设置的一个特点，我认为您实施的解决方法很好；我可能会按照同样的思路解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-30T21:25:41.827

我遇到了这个问题，我已经尝试过你提出的 qf.vim 但它没有用。我在 qf 帮助页面 =| 中找到了一些可行的方法，所以把它放在你的 .vimrc 中：

```
au FileType qf botright cwindow 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-17T10:46:19.137

我使用您的答案来改进 vim 的默认自动调整大小行为。

这并不是这个问题的真正答案，但希望其他人可能会发现它很有用，因为我偶然发现了这个问题：

```
nmap <silent> <C-w>= :call ResizeAllWindows()<cr>

function! ResizeAllWindows()
  call RestorePreviewWindowHeight()
  wincmd = "set all equal after restore
endfunction

function! RestorePreviewWindowHeight()
  silent! wincmd P "jump to preview, but don't show error
  if &previewwindow
    exec "resize" &previewheight
    wincmd p "jump back
  endif
endfunction 
```

# zend-framework - Zend Framework - TinyMCE 中的集成疯狂文件管理器

> ID：13707053
> 
> 赞同：2
> 
> 时间：2012-12-04T16:09:25.833
> 
> 标签：zend-framework, tinymce, integration

我对 TinyMCE 中的 Mad File Manager 集成有疑问。我认为问题出在这段代码中：

```
<script type="text/javascript">
    function MadFileBrowser(field_name, url, type, win) {
      tinyMCE.activeEditor.windowManager.open({
          file : "mfm.php?field=" + field_name + "&url=" + url + "",
      }, {
          window : win,
          input : field_name
      });
      return false;
    }
</script> 
```

在

```
file : "mfm.php?field=" + field_name + "&url=" + url + "" 
```

因为 Zend Framework 返回异常：**消息：指定的控制器无效 (mfm.php)**

```
Request Parameters:
array (
  'controller' => 'mfm.php',
  'action' => 'index',
  'module' => 'default',
  'field' => 'src',
  'url' => '',
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:11:07.200

如果控制器名为 MfmController.php 你应该这样做：

```
<script type="text/javascript">
    function MadFileBrowser(field_name, url, type, win) {
      tinyMCE.activeEditor.windowManager.open({
          file : "/mfm?field=" + field_name + "&url=" + url + "",
      }, {
          window : win,
          input : field_name
      });
      return false;
    }
</script> 
```

在 zend 框架中，您永远不会直接调用 .php。每个请求都通过 index.php 并由 Zend_Route 路由到正确的控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:49:47.100

如果您使用 Zend Framework，您的所有请求都通过应用程序的前端控制器，即`index.php`. `index.php`解析您的这种格式的请求 url (controllername/actionname?param) 并转发您指定控制器的指定操作的请求（这是默认行为）。对于这种情况，您应该有一个名为的控制器`controllernameController`和一个名为`actionnameAction`. 这就是为什么

```
<script type="text/javascript">
function MadFileBrowser(field_name, url, type, win) {
  tinyMCE.activeEditor.windowManager.open({
      file : "mfm.php?field=" + field_name + "&url=" + url + "",
  }, {
      window : win,
      input : field_name
  });
  return false;
}
</script> 
```

应该

```
 <script type="text/javascript">
function MadFileBrowser(field_name, url, type, win) {
  tinyMCE.activeEditor.windowManager.open({
      file : "mfm?field=" + field_name + "&url=" + url + "",
  }, {
      window : win,
      input : field_name
  });
  return false;
}
</script> 
```

并且您应该有一个以方法命名的控制器`mfmController`来`indexAction`处理您的请求（如果未提及任何操作，则默认执行 indexAction）。

干杯和快乐的编码！

# c# - 回发后文本框值因 jquery 无法访问或已过时而更改

> ID：13707056
> 
> 赞同：0
> 
> 时间：2012-12-04T16:09:40.643
> 
> 标签：c#, jquery, asp.net, textbox, postback

我有一个文本框和一个自制的日历。在日历中按下日期 div（类 .available）会触发 jquery 在文本框中输入日期，请​​参见代码：

```
<asp:TextBox id="hidOutboundSelectedDate" ClientIDMode="Static" runat="server" />

$(".available").click(function () {
    var selected = $(this).text();
    $("#hidOutboundSelectedDate").val(selected);
}); 
```

我按下搜索按钮，最终在方法后面输入以下代码：

```
public string GetSelected()
{
    var test1 = Request.Form[hidOutboundSelectedDate.UniqueID];
    var test2 = hidOutboundSelectedDate.Text;
    var test3 = FindControl("hidOutboundSelectedDate");
    // some extra code goes here
} 
```

此时所有这 3 个版本（将调试 test3 以检查 .Text）显示相同的值，即我在日历中选择的值。

**现在的问题**：

我“返回”以从我的日历中选择一个新日期，文本框像一开始一样是空的。我选择一个日期，jquery 将值设置为新日期。如果我转到 Chrome 浏览器控制台并检查值是什么，我会得到正确的值作为回报。

我最终达到了“GetSelected()”方法，我的 3 个测试版本给出了以下结果：

```
test1 = null
test2 = old value 
test3 = old value 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:32:33.513

您能否确认调用 GetSelected() 方法是在页面生命周期的哪个阶段？在加载发布的数据之前尝试读取该值将导致上述结果..

# html - 浮动时 Div 包含导航

> ID：13707057
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:09:45.820
> 
> 标签：html, css, css-float

为什么内容 div 会延伸到在这个小提琴中包含菜单导航？[http://jsfiddle.net/kePCS/](http://jsfiddle.net/kePCS/)

如果我删除导航上的浮动属性，它不会。由于导航宽度设置为 100%，当我检查它时它似乎仍然是相同的大小。

我必须让它漂浮起来。这是我使用[http://matthewjamestaylor.com/blog/beautiful-css-centered-menus-no-hacks-full-cross-browser-support的菜单的一个组成部分](http://matthewjamestaylor.com/blog/beautiful-css-centered-menus-no-hacks-full-cross-browser-support)

但我仍然不希望导航位于应该在下面的内容之上。你知道任何解决方法吗？我也不介意解释为什么会发生这种情况。我认为因为它们都是 100% 宽度，所以它们不会重叠。显然我错了。谢谢！

不会让我在没有代码的情况下发布，但小提琴会更容易理解。

```
#menu {
float:left;
width:100%;
}
#content{
width:100%;
background-color:#5FC0CE;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:35:48.697

浮动内容会起作用，但我个人不会。这是因为浮动往往是许多 IE 错误的根源，并且具有一些更微妙的含义，这些含义可能会在以后再次困扰您。

不一定有正确或错误的方法来做到这一点。但是，我会改为添加“clear:both;” 到#content，这将防止它渗入导航。

# actionscript-3 - 如何在 SWF 中设置与 Maven 工件具有相同 ID 的编译时变量？

> ID：13707058
> 
> 赞同：0
> 
> 时间：2012-12-04T16:09:44.370
> 
> 标签：actionscript-3, git, maven

我想在编译时在我的 swf 中设置一个变量，该变量从 git 读取当前提交/分支，并使用该名称作为工件 id 编辑 pom.xml。我想这样做，以便我可以查询 swf 并检索它是哪个版本的 maven 构建。

这可能吗，我会使用哪些插件来做到这一点？

[我过去使用 ANT](http://livedocs.adobe.com/flex/3/html/help.html?content=compilers_21.html)做过这种事情，但我需要能够使用 Maven 来代替。我在 Internet 上的搜索大多揭示了在 Java 中执行此操作的方法，但在 Actionscript 中没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:41:25.640

我假设您正在使用[flexmojo 的](http://flexmojos.sonatype.org/)插件。看看flexmojo 的[defineDeclaration](http://repository.sonatype.org/content/sites/flexmojos-site/3.8/compile-swc-mojo.html#definesDeclaration)参数。`-define`这将允许您使用选项（根据您链接到的 Adob​​e 文章）传入您在 Actionscript 项目中定义的编译器变量的值。

然后只需将该值设置为工件 ID、日期/时间或其他任何内容。

# java - JSPC是怎么称呼的？

> ID：13707063
> 
> 赞同：2
> 
> 时间：2012-12-04T16:10:03.230
> 
> 标签：java, jsp, maven, pom.xml

鉴于：

1.  在运行`mvn clean install`JSP 编译器`jspc`报告问题
2.  问题被证实是真实的。当按原样部署代码（不修复任何东西）时，JSP 在运行时被破坏
3.  解决问题并部署应用程序后，问题就会消失

问题：JSPC 无法识别修复

## JSPC是怎么称呼的？

```
 <plugin>
            <groupId>org.codehaus.mojo.jspc</groupId>
            <artifactId>jspc-maven-plugin</artifactId>
            <configuration>
                <includeInProject>false</includeInProject>
                <sources>
                    <directory>${basedir}/myapp/src/main/webapp/</directory>
                    <includes>
                        <include>**/*.jsp</include>
                    </includes>
                </sources>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>

            <dependencies>
                <dependency>
                    <groupId>org.codehaus.mojo.jspc</groupId>
                    <artifactId>jspc-compiler-tomcat6</artifactId>
                    <version>2.0-alpha-3</version>
                </dependency>
            </dependencies>
        </plugin> 
```

## 报告了哪些错误？

```
[ERROR] MyClass cannot be resolved to a type 
```

## 有关该问题的更多详细信息：

类似的问题在[这里](https://stackoverflow.com/questions/13692043/trouble-importing-classes-to-jsp)

**这似乎是一个类路径问题，但是在 pom 中可以在哪里设置呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:22:56.107

尝试添加

```
<workingDirectory>${basedir}/myapp/target/classes</workingDirectory> 
```

内部`<configuration>`标签

# 64-bit - Enterprise Library 5 有 x64 位版本吗？

> ID：13707069
> 
> 赞同：1
> 
> 时间：2012-12-04T16:10:22.867
> 
> 标签：64-bit, enterprise-library

我正在将一些 32 位 .Net 应用程序转换为 x64。Enterprise Library 5（32 位）用于我们的许多应用程序中，所以我的印象是，当我们在 x64 中重新编译这些应用程序时，我们将需要引入 x64 版本的 EntLib。有谁知道这是否存在？我一直在搜索，但似乎找不到一个直接的答案——我找到了关于 x64 配置管理器工具的信息，但没有关于可安装 64 位版本的 EntLib5 的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T00:14:38.690

entlib 程序集是体系结构中立的。它们可以由 32 位或 64 位进程加载而无需更改。

在 32 位进程上，它们将作为 32 位运行。在 64 位进程上，它们将以 64 位运行。无需更改。

请记住，它们是 IL，而不是本机代码，并且不会调用任何本机代码，因此不存在位依赖性。

# javascript - 防止链接打开并使用 flickr 徽章激活 fancybox 幻灯片

> ID：13707070
> 
> 赞同：1
> 
> 时间：2012-12-04T16:10:29.593
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我有来自 flickr 徽章的这段 html：

```
<div class="flickr_badge_image" id="flickr_badge_image1">
    <a href="[setlink]">
       <img src="[imagelink].jpg" alt="A photo on Flickr" title="Road" height="75" width="75">
    </a>
</div>
<div class="flickr_badge_image" id="flickr_badge_image2">
    <a href="[setlink]">
       <img src="[imagelink].jpg" alt="A photo on Flickr" title="Road" height="75" width="75">
    </a>
</div>
<div class="flickr_badge_image" id="flickr_badge_image3">
    <a href="[setlink]">
       <img src="[imagelink].jpg" alt="A photo on Flickr" title="Road" height="75" width="75">
    </a>
</div> 
```

每当我点击时，[setlink] 就会打开。当我点击链接时，如何防止点击，并用幻灯片打开fancybox。谢谢。

**编辑**（从评论中移出）

我这样做了：

```
$(".flickr_badge_image a").fancybox({
    beforeLoad: function() {
        this.title = $(this.element).find('img').attr('alt');
        this.href = $(this.element).find('img').attr('src');
    }
}) 
```

还

```
$('.flickr_badge_image a img').fancybox(); 
```

和

```
$('.flickr_badge_image a').fancybox();​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:08:26.457

**首先**，请记住，fancybox 画廊将仅包含您的徽章中的元素，而不是您照片流中的所有照片。要制作一个花式画廊，您需要使用以下方法 为画廊的每个 ( ) 元素设置相同的`rel`属性：`<a>``.attr()`

```
$(".flickr_badge_image a").attr("rel", "gallery") 
```

**其次**，`[setlink]`没有任何*图像*扩展名，因此您需要告诉 fancybox 内容是图像。`type`使用`image`API 选项强制内容`type: "image"`

**第三**，您可以从缩略图 中标签的属性中破解每个目标图像的正确*URL*，例如：`src``img`

```
<img src="http://farm1.staticflickr.com/32/102691513_68290d6cdc_t.jpg" width="75" height="100" title="a corner" alt="A photo on Flickr" > 
```

**请注意**图像的名称带有*后缀* `_t`（缩略图）。如果我们去掉后缀`_t`，那么我们就有了对应缩略图的大图路径，所以从上面的例子中

```
href="http://farm1.staticflickr.com/32/102691513_68290d6cdc.jpg" 
```

... 是我们想要在 fancybox 中显示的大图像的路径。

我们可以使用javascript的方法`replace()`来删除*后缀*，如

```
.replace(new RegExp("_t", "i"), ''); 
```

您的完整代码应如下所示（不需要`preventDefault`）：

```
$(".flickr_badge_image a").attr("rel", "gallery").fancybox({
    type: "image",
    beforeLoad: function() {
        this.href = $(this.element).find('img').attr('src').replace(new RegExp("_t", "i"), '');
    }
}); 
```

看到它在这个**[JSFIDDLE中工作](http://jsfiddle.net/JEcNA/)**

**编辑**：设置`title`使用：

```
this.title = $(this.element).find('img').attr('title'); 
```

**[更新的小提琴](http://jsfiddle.net/JEcNA/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:19:43.650

尝试：

```
$(function() {
  $(".flickr_badge_image a").click(function(ev) {
      ev.preventDefault();
      $(this).fancybox(...);
  })
}); 
```

`ev.preventDefault()`- 阻止指定事件的默认浏览器行为。[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# r - 加权方差-协方差矩阵和 lapply

> ID：13707077
> 
> 赞同：1
> 
> 时间：2012-12-04T16:10:55.303
> 
> 标签：r, covariance, lapply

我有一个`prob`包含 50 个元素的列表。每个元素是一个 601x3 的概率矩阵，其中每一行代表一个完整的样本空间（即，每个矩阵的每一行之和为 1）。例如，这里是 的第一个元素的前五行`prob`：

```
> prob[[1]][1:5,]

           [,1]      [,2]       [,3]
 [1,] 0.6027004 0.3655563 0.03174335
 [2,] 0.6013667 0.3665756 0.03205767
 [3,] 0.6000306 0.3675946 0.03237481
 [4,] 0.5986921 0.3686131 0.03269480
 [5,] 0.5973513 0.3696311 0.03301765 
```

现在，我想做的是为list*中每个矩阵/元素的每一行*`prob`创建以下矩阵。取第一行，设 a = .603、b = .366 和 c = .032（四舍五入到小数点后三位）。然后，

```
> w
         [,1]       [,2]       [,3]
 [1,] a*(1-a)       -a*b       -a*c
 [2,]    -b*a    b*(1-b)       -b*c
 [3,]    -c*a       -c*b    c*(1-c) 
```

这样：

```
> w
           [,1]       [,2]       [,3]
 [1,]  0.239391  -0.220698  -0.019296
 [2,] -0.220698   0.232044  -0.011712
 [3,] -0.019296  -0.011712   0.030976 
```

我想再获得类似的 3x3 矩阵 600 次（对于该矩阵的其余行），然后对 .的其余元素再重复整个过程 49 次`prob`。我唯一能想到的就是在`apply`内部调用，`lapply`以便我一次访问每个矩阵的每一行。我敢肯定这不是一种优雅的方式（更不用说我无法让它工作），但我想不出其他任何东西。谁能帮我解决这个问题？我也很想听听关于使用不同结构的建议（例如，在列表中使用矩阵是否不好？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:52:43.553

在类似维度的矩阵列表上运行这个过程`lapply`应该非常简单。如果它代表一个挑战，那么您应该发布`dput(.)`具有相似矩阵的两个元素列表的输出。真正的挑战是逐行进行处理，如下所示，输出为 3x3xN 数组：

```
w <- apply(M, 1, function(rw) diag( rw*(1-rw) ) + 
                    rbind( rw*c(0, -rw[1], -rw[1] ), 
                           rw*c(-rw[2],0, -rw[2] ),
                           rw*c(-rw[3], -rw[3], 0)
         )

 )
 w
             [,1]        [,2]        [,3]        [,4]        [,5]
 [1,]  0.23945263  0.23972479  0.23999388  0.24025987  0.24052272
 [2,] -0.22032093 -0.22044636 -0.22056801 -0.22068575 -0.22079962
 [3,] -0.01913173 -0.01927842 -0.01942588 -0.01957412 -0.01972314
 [4,] -0.22032093 -0.22044636 -0.22056801 -0.22068575 -0.22079962
 [5,]  0.23192489  0.23219793  0.23246881  0.23273748  0.23300395
 [6,] -0.01160398 -0.01175156 -0.01190081 -0.01205173 -0.01220435
 [7,] -0.01913173 -0.01927842 -0.01942588 -0.01957412 -0.01972314
 [8,] -0.01160398 -0.01175156 -0.01190081 -0.01205173 -0.01220435
 [9,]  0.03073571  0.03102998  0.03132668  0.03162585  0.03192748

 w <- array(w, c(3,3,5) )
 w
, , 1

            [,1]        [,2]        [,3]
[1,]  0.23945263 -0.22032093 -0.01913173
[2,] -0.22032093  0.23192489 -0.01160398
[3,] -0.01913173 -0.01160398  0.03073571

, , 2

            [,1]        [,2]        [,3]
[1,]  0.23972479 -0.22044636 -0.01927842
[2,] -0.22044636  0.23219793 -0.01175156
[3,] -0.01927842 -0.01175156  0.03102998

.... snipped remaining output 
```

# android - 如何从 viewpager 引用活动元素

> ID：13707079
> 
> 赞同：2
> 
> 时间：2012-12-04T16:10:56.647
> 
> 标签：android, android-viewpager

我尝试编写一个应用程序，该应用程序对活动使用幻灯片效果，发现 Compatibility Package 中的 ViewPager 是我所需要的。我成功制作了幻灯片，它以我想要的方式工作，但我的问题是我无法引用我的活动中的元素。

这是我的 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</LinearLayout> 
```

MainActivity.java：

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        MyPagerAdapter adapter = new MyPagerAdapter();
        ViewPager myPager = (ViewPager) findViewById(R.id.pager);

        myPager.setAdapter(adapter);
        myPager.setCurrentItem(0);

        if (Fibonacci.getInstance().number != 0)
            displayResults();

        ImageButton btnCalculate = (ImageButton) findViewById(R.id.btnCalculateDark);
        btnCalculate.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                // do button click
            }
        });
    }

    private class MyPagerAdapter extends PagerAdapter {
        public int getCount() {
            return 2;
        }

        public Object instantiateItem(View collection, int position) {
            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            int resId = 0;
            switch (position) {
            case 0:
                resId = R.layout.activity_dark;
                break;
            case 1:
                resId = R.layout.activity_pale;
                break;
            }
            View view = inflater.inflate(resId, null);
            ((ViewPager) collection).addView(view, 0);
            return view;
        }

        @Override
        public void destroyItem(View arg0, int arg1, Object arg2) {
            ((ViewPager) arg0).removeView((View) arg2);
        }

        @Override
        public boolean isViewFromObject(View arg0, Object arg1) {
            return arg0 == ((View) arg1);
        }

        @Override
        public Parcelable saveState() {
            return null;
        }
    }
} 
```

我的问题是我收到以下行的 NullPointerEception：

```
ImageButton btnCalculate = (ImageButton) findViewById(R.id.btnCalculateDark); 
```

我知道这是因为我在 setContentView 中设置了 main.xml，并且我想引用 activity_dark.xml 或 activity_pale.xml 中的元素。不幸的是，我无法弄清楚如何引用该元素。任何提示将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:59:13.390

您应该更好地为此 [http://developer.android.com/guide/components/fragments.html使用 Fragments](http://developer.android.com/guide/components/fragments.html)

但如果你想这样做，然后尝试在页面更改后设置监听器：

```
 myPager.setOnPageChangeListener(new OnPageChangeListener(){

            @Override
            public void onPageScrollStateChanged(int arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onPageSelected(int arg0) {
                ImageButton btnCalculate = (ImageButton) findViewById(R.id.btnCalculateDark);
                btnCalculate.setOnClickListener(new OnClickListener() {
                    public void onClick(View arg0) {
                        // do button click
                    }
                });
            }

        }); 
```

# svn - Tortoise SVN 提交到一个新的存储库

> ID：13707081
> 
> 赞同：2
> 
> 时间：2012-12-04T16:11:03.807
> 
> 标签：svn, tortoisesvn

背景：

我用这个文件夹结构提交了一个颠覆项目来组装。

```
folder1
folder2 
```

但是我犯了一个错误，folder1应该在folder2中。所以我在我的本地副本中做了这个并做了一个 SVN 提交。所以，现在我的文件夹 1 既是“基本文件夹”又是文件夹 2。

```
folder1
folder2
  folder1 
```

所以，我开始阅读如何在 SVN 中删除文件/文件夹，这看起来很复杂或很吓人（如果出现问题怎么办）。我想我可以使用一个新的回购。我可以删除旧的，因为我想要的最新副本在我的本地计算机上。但是，这里有一个问题，当我右键单击该文件夹时，SVN 提交会自动指向现有的存储库。

如何将其更改为指向新的存储库。恐怕如果我删除服务器 repo 并使用相同的名称，它会抱怨修订/ HEAD 不匹配之类的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:25:17.680

如果你想做的是使用一个新的存储库，并且如果你已经创建了那个新的存储库，那么你可以使用[TortoiseSVN的](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-relocate.html)[**Relocate**](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-relocate.html)选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:59:17.787

> 所以，我开始阅读如何在 SVN 中删除文件/文件夹，它看起来很复杂或只是吓人

好吧，**真的**很容易 - 在工作副本中删除并提交或`svm rm URL/TO/FIOLDER/`直接在存储库中删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:20:06.340

只需删除文件夹并通过 TortoiseSVN 提交删除。这就是我正在做的事情。

# javascript - Mozilla PDF.js 字体问题

> ID：13707082
> 
> 赞同：1
> 
> 时间：2012-12-04T16:11:10.530
> 
> 标签：javascript, html, node.js, mozilla, pdf.js

我正在尝试使用 Mozilla 的 PDF.js，当我加载 pdf 时，我在控制台中收到此错误，有人可以帮忙吗？

> 错误：找不到字体的 FontFile：pdf.js 21 中的 JYEMBF_HelveticaNeueLTPro-Roman

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:33:48.180

这听起来像是 PDF 的问题，而不是系统上缺少的字体。我建议您在[https://github.com/mozilla/pdf.js/issues](https://github.com/mozilla/pdf.js/issues)提出问题并链接到有问题的 PDF。

# vba - Excel 2003(VBA) - 自定义标识符/函数/UDF

> ID：13707085
> 
> 赞同：3
> 
> 时间：2012-12-04T16:11:24.370
> 
> 标签：vba, excel-2003

我目前正在为我的工作重写一个小型库存系统，并试图加速程序，因为它很慢，而且我现在只做 VBA 2 周。

在 Excel 2003 版中。

我的问题（我认为）是创建一个标识符。

我有两个，它们如下：

```
 Dim QuickView As String
   QuickView = ActiveWorkbook.Range("a1:c200").Copy

   Dim Stock As String
   Stock = ActiveWorkbook.Range("c1:c200").Copy 
```

我的用户当前从打开的对话框中选择一个文件（工作簿），我正在导入指定范围内的数据。

但是，当我调用这些函数时，我得到“对象不支持此属性或方法”。

我不确定这是否应该是 UDF，因为我看不到任何地方可以编写自己的 VBA 函数，而不是在 VBA 中编写函数供 Excel 使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:37:02.550

在您的两个示例中，“QuickView”和“Stock”都应该是变体，而不是字符串。

```
Dim Stock As Variant
Stock = ActiveWorkbook.Range("c1:c200").Copy 
```

请记住，您不需要将范围分配给变量以便将单元格值复制（或剪切）到另一个位置。相反，您可以这样做：

```
ActiveWorkbook.Sheets("Sheet1").Range("c1:c200").Copy
ThisWorkbook.Sheets("Sheet1").range("c1") 
```

约定是`copy_from [SPACE] put_it_here`.

注意：在我上面的示例中，这些值将被复制到`Sheet1`包含正在运行的代码的工作簿中。运行 VBA 的工作簿始终是`ThisWorkbook`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:46:43.777

电子解决了伙计们，感谢您的回答:-D

```
Sub Button1_Click()

Dim FileOpened As Boolean ' Holds True or False value
Dim SourceRange As Range
Dim TargetRange As Range
Dim MasterWorkbook As Workbook
Dim Row As Integer

' Remember the current workbook we are clicking the button from.
Set MasterWorkbook = ActiveWorkbook ' Use Set =  for all complex types.

' Identify file to open.
ChDrive "C:"
ChDir "c:\"

On Error Resume Next ' Temporarily ignore errors in situation when user says no to         opening the same master file a second time.
FileOpened = Application.Dialogs(xlDialogOpen).Show
On Error GoTo 0 ' Reinstates normal error reporting.

' Don't process the file if the user cancels the dialog.
If FileOpened Then

    ' The opened file automatically becomes the new active workbook and active worksheet.
Set SourceRange = ActiveSheet.Range("c1:c394")

Set TargetRange = MasterWorkbook.ActiveSheet.Range("b1:b394")

' Copy cell values one at a time from the source range to the target range.
For Row = 1 To 394
    TargetRange.Cells(Row, 1).Value = SourceRange.Cells(Row, 1).Value
Next

ActiveWorkbook.Close

' Set background colour of target range.
TargetRange.Select
With Selection.Interior
    .ColorIndex = 6
    .Pattern = xlSolid
End With

' Tell Excel to recalculate only those formulas which use the target values.
TargetRange.Dirty

End If

End Sub 
```

对于那些对此代码感兴趣的人：

用户从指定目录中选择一个文件，然后从该文件中选择指定范围“c1:c394”并将其粘贴到“sheet1”中。

绕过剪贴板并更新受添加值影响的任何公式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:58:07.980

正如@timbur 所说，您可以复制一个范围而无需先分配它。如果要分配它，变量必须是 Range（或 Variant）类型，并且您必须使用 Set 进行分配，就像任何对象分配一样。

```
Dim stock as Range  'or Variant, but Range is better
Set stock =  ActiveWorkSheet.Range("c1:c200")
'copy, and optionally paste at once
stock.Copy Destination:=ThisWorkbook.Sheets("Sheet1").range("c1") 
```

# windows-phone-7 - 如何确定正在使用什么颜色深度应用程序？

> ID：13707086
> 
> 赞同：1
> 
> 时间：2012-12-04T16:11:24.910
> 
> 标签：windows-phone-7, bits-per-pixel

如果您在 WMAppManifest.xml 文件中设置 BitsPerPixel="32"，您将在应用程序中拥有 32 位颜色深度。问题是低成本设备总是使用 16 位，所以图像变得不稳定。我想确定应用程序中使用的 BitsPerPixel 的值。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:09:26.477

`SurfaceFormat`你可以像这样得到电流`GraphicsDevice`：

```
// XNA
game.GraphicsDevice.DisplayMode.Format;

// Silverlight
page.SharedGraphicsDeviceManager.Current.GraphicsDevice.DisplayMode.Format; 
```

这将返回`SurfaceFormat.Bgr565`16 位颜色深度和`SurfaceFormat.Color`32 位颜色深度。

# c++ - openmp代码退出时出现分段错误

> ID：13707090
> 
> 赞同：1
> 
> 时间：2012-12-04T16:11:40.197
> 
> 标签：c++, openmp, valgrind

我有一个使用 openmp 的 CPP 代码。它链接到一个fortran90 代码。如果用一个线程运行，一切都很好。如果使用不同于 1 的任意数量的线程运行，则在退出 cpp 部分时会出现分段错误。代码的结果是准确的，没有任何错误。它运行平稳，直到该退出。与openmp相关的部分代码为：

```
#pragma omp parallel for shared(even_phi,odd_phi,odd_divisor,odd_start_index,odd_iter_index) private(ii,jj,kk,cc,io,pp,f1,f2,f3,f4,f5,f6,ff,tmp_phi) schedule(static)
            for (kk=1; kk<nz-1; kk++)
            {
                cc = (kk-1)*(ny-2);

                for (jj=1; jj<ny-1; jj++)
                {
                    io = odd_start_index[cc];
                    pp = odd_iter_index[cc++];

                    for (ii=io; ii<maxElem; ii++)
                    {
                        f1 = even_phi[pp-odown];
                        f2 = even_phi[pp-oright];
                        f3 = even_phi[pp];
                        tmp_phi = odd_phi[pp];
                        f4 = even_phi[pp+1];
                        f5 = even_phi[pp+oleft];
                        f6 = even_phi[pp+oup];

                        ff = f1+f2+f3+f4+f5+f6;

                        odd_phi[pp] = odd_divisor[pp]*ff + c2*tmp_phi;

                        pp++;
                    }
                }
            } 
```

这是一个标准的数值求解器代码。在没有 openmp 和 OMP_NUM_THREADS=1 的情况下也可以完美运行。如果使用更多线程执行，在几乎完全正常执行之后，Valgrinds 说：

```
==23723== Thread 20:
==23723== Jump to the invalid address stated on the next line
==23723==    at 0x2A6EBBB8: ???
==23723==    by 0x2A6EA515: ???
==23723==  Address 0x2a6ebbb8 is not stack'd, malloc'd or (recently) free'd
==23723== 
==23723== 
==23723== Process terminating with default action of signal 11 (SIGSEGV)
==23723==  Access not within mapped region at address 0x2A6EBBB8
==23723==    at 0x2A6EBBB8: ???
==23723==    by 0x2A6EA515: ???
==23723==  If you believe this happened as a result of a stack
==23723==  overflow in your program's main thread (unlikely but
==23723==  possible), you can try to increase the size of the
==23723==  main thread stack using the --main-stacksize= flag.
==23723==  The main thread stack size used in this run was 1048576.
==23723== 
==23723== HEAP SUMMARY:
==23723==     in use at exit: 632,995,339 bytes in 101 blocks
==23723==   total heap usage: 10,071 allocs, 9,970 frees, 1,257,933,743 bytes allocated
==23723== 
==23723== Thread 1:
==23723== 6,992 bytes in 23 blocks are possibly lost in loss record 47 of 74
==23723==    at 0x4A04A28: calloc (vg_replace_malloc.c:467)
==23723==    by 0x35A0E11812: _dl_allocate_tls (dl-tls.c:300)
==23723==    by 0x35A1E07068: pthread_create@@GLIBC_2.2.5 (allocatestack.c:571)
==23723==    by 0x2A6EA981: ???
==23723==    by 0x2A4C666E: ???
==23723==    by 0x4C8DB7: solvermodule (in /home/tom/bin/solver)
==23723==    by 0x4C6794: MAIN__ (qdiff4v.f90:749)
==23723==    by 0x4C8DF9: main (in /home/tom/bin/solver)
==23723== 
==23723== 30,276 bytes in 1 blocks are definitely lost in loss record 50 of 74
==23723==    at 0x4A0674C: operator new[](unsigned long) (vg_replace_malloc.c:305)
==23723==    by 0x2A4C6394: ???
==23723==    by 0x4C8DB7: solvermodule (in /home/tom/bin/solver)
==23723==    by 0x4C6794: MAIN__ (qdiff4v.f90:749)
==23723==    by 0x4C8DF9: main (in /home/tom/bin/solver)
==23723== 
==23723== 30,276 bytes in 1 blocks are definitely lost in loss record 51 of 74
==23723==    at 0x4A0674C: operator new[](unsigned long) (vg_replace_malloc.c:305)
==23723==    by 0x2A4C63BF: ???
==23723==    by 0x4C8DB7: solvermodule (in /home/tom/bin/solver)
==23723==    by 0x4C6794: MAIN__ (qdiff4v.f90:749)
==23723==    by 0x4C8DF9: main (in /home/tom/bin/solver)
==23723== 
==23723== 30,276 bytes in 1 blocks are definitely lost in loss record 52 of 74
==23723==    at 0x4A0674C: operator new[](unsigned long) (vg_replace_malloc.c:305)
==23723==    by 0x2A4C63EA: ???
==23723==    by 0x4C8DB7: solvermodule (in /home/tom/bin/solver)
==23723==    by 0x4C6794: MAIN__ (qdiff4v.f90:749)
==23723==    by 0x4C8DF9: main (in /home/tom/bin/solver)
==23723== 
==23723== 30,276 bytes in 1 blocks are definitely lost in loss record 53 of 74
==23723==    at 0x4A0674C: operator new[](unsigned long) (vg_replace_malloc.c:305)
==23723==    by 0x2A4C6415: ???
==23723==    by 0x4C8DB7: solvermodule (in /home/tom/bin/solver)
==23723==    by 0x4C6794: MAIN__ (qdiff4v.f90:749)
==23723==    by 0x4C8DF9: main (in /home/tom/bin/solver)
==23723== 
==23723== 39,232 bytes in 1 blocks are definitely lost in loss record 57 of 74
==23723==    at 0x4A0674C: operator new[](unsigned long) (vg_replace_malloc.c:305)
==23723==    by 0x2A4C6369: ???
==23723==    by 0x4C8DB7: solvermodule (in /home/tom/bin/solver)
==23723==    by 0x4C6794: MAIN__ (qdiff4v.f90:749)
==23723==    by 0x4C8DF9: main (in /home/tom/bin/solver)
==23723== 
==23723== LEAK SUMMARY:
==23723==    definitely lost: 160,336 bytes in 5 blocks
==23723==    indirectly lost: 0 bytes in 0 blocks
==23723==      possibly lost: 6,992 bytes in 23 blocks
==23723==    still reachable: 632,828,011 bytes in 73 blocks
==23723==         suppressed: 0 bytes in 0 blocks
==23723== Reachable blocks (those to which a pointer was found) are not shown.
==23723== To see them, rerun with: --leak-check=full --show-reachable=yes
==23723== 
==23723== For counts of detected and suppressed errors, rerun with: -v
==23723== ERROR SUMMARY: 7 errors from 7 contexts (suppressed: 6 from 6) 
```

gdb 说：

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7ffff5a04700 (LWP 23837)]
0x00007ffff7024bc2 in ?? ()
Missing separate debuginfos, use: debuginfo-install libgcc-4.4.6-4.el6.x86_64         libgfortran-4.4.6-4.el6.x86_64 libgomp-4.4.6-4.el6.x86_64 libstdc++-4.4.6-4.el6.x86_64 
```

这显然没有帮助。我一直在玩 GOMP_STACKSIZE 和线程数，认为我可能有堆栈大小问题，但无济于事。

我错过了一些东西。也许有些愚蠢。而且找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:49:43.087

这是 GCC 中的一个错误。我在 GCC 上发现了一个关于使用 openmp 和 iso_c_binding 模块相关问题的错误报告。之后，我使用英特尔编译器编译并执行了代码，没有任何问题。

我的代码很长，不知道如何隔离有问题的部分以重现错误并进行报告。会尽我所能做到这一点。

我正在使用 gcc (GCC) 4.4.6 20120305 (Red Hat 4.4.6-4)，CentOS 版本 6.3 (Final)。

我会将此标记为答案，如果以后我发现任何更有用的东西，我会在这里发布，因为它可能对其他人有用。

# bash - openssl 从脚本传递前几行，然后从标准输入读取

> ID：13707092
> 
> 赞同：0
> 
> 时间：2012-12-04T16:11:46.213
> 
> 标签：bash, shell, openssl

我想运行`openssl`它并从发送到服务器的以下命令开始：

```
t authenticate <dynamically generated base64 string from calling script>
t select Inbox 
```

然后从那里获取输入`stdin`。我对shell脚本和openssl工具包非常无知，我当然不知道如何简单地通过管道/重定向来做到这一点，`stdin`除非我尝试设置一个同时从`stdin`自身绘制的文件，等等。

我不确定 openssl 用于读取其输入的技术。例如以下：

```
$ echo "t login testacct@yahoo.com password" | openssl s_client -connect imap.mail.yahoo.com:993 
```

不做同样的事情

```
openssl s_client -connect imap.mail.yahoo.com:993
# openssl dialogue opens...
C: t login testacct@yahoo.com password
S: t NO [AUTHENTICATIONFAILED] Incorrect username or password. (#YSH002) 
```

我想`openssl`正在打开一个新的 shell 会话（我在这里的理解很弱）并且它不会将其参数从`stdin`它创建的内壳传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:07:20.397

我建议将问题拆分为两个脚本：

首先，您有一个脚本来回显您要发送的初始命令，然后从标准输入读取并写入标准输出。像这样（例如称之为 script1.sh）：

```
#!/bin/bash
echo "first command"
echo "second command"
while read x
do
  echo "$x"
done 
```

然后，第二个脚本只是将参数捆绑到 openssl，这样您就不必继续输入它们（例如调用此 script2.sh。请注意，与上面的 script1.sh 一样，您应该在第一行告诉操作系统这是一个 bash 脚本。

然后你可以输入：

```
script1.sh | script2.sh 
```

并且您会将前两行传递给 openssl，然后您键入的所有内容都将在此之后传递。如果您想始终完成一些命令，您可以在 script1.sh 中的 while 循环之后添加它们。

你用 Ctrl-D 终止整个事情

如果 openssl 回显您输入的输入，那么您输入的行会显示两次（这有点烦人）。在这种情况下，“read”的“-s”参数将抑制第一行（例如，用于输入密码）

请注意，此解决方案类似于之前建议的临时文件和 tail -f 的解决方案，但它避免了对临时文件的需要，并且一切都在一行中完成。

问题中给出的解决方案的问题是，当'echo“t login ...”'命令完成时，openssl命令的标准输入被关闭，这通常会导致程序退出。使用此处给出的解决方案，管道将第一个脚本的标准输出连接到第二个脚本的标准输入，输入 read 的所有内容都将传递给 openssl

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-29T17:23:42.903

这些解决方案都没有将标准输入的控制权返回给用户。这应该将第一个命令和第二个命令传递给 openssl，然后读取标准输入：

```
cat <<EOF - | openssl ....
first command
second command
EOF 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T17:16:47.090

可以通过以下方式建立与启用 SSL 的 IMAP 服务器的基本 SSL/TLS 连接`s_client`：

```
openssl s_client -connect imapserver.example.com:143 -starttls imap 
```

注意尾随`-starttls imap`：openssl“知道”如何告诉 IMAP 服务器它想从纯文本连接（如您使用 telnet 获得）移动到受 SSL 保护的连接。

在此之后，openssl 的工作就完成了，您需要向服务器说出正确的 IMAP，*包括身份验证*！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T19:21:21.863

您可以更改脚本以将命令写入文件，然后使用`tee -a`重定向`stdin`到同一文件。让我给你看一个例子：

```
jweyrich@pharao:~$ echo "command1" > cmds
jweyrich@pharao:~$ tee -a cmds > /dev/null
command2
command3
^C 
```

同时，我`tail -f cmds`在另一个 tty 中运行：

```
jweyrich@pharao:~$ tail -f cmds 
command1
command2
command3 
```

这将把该文件变成你必须阅读和处理的单一来源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-07T14:53:51.620

我想补充一点，您可以将尼克的解决方案用作单行脚本：

```
$ sh -c 'echo "first command"; echo "second command"; while read x; do  echo "$x"; done' | whatever 
```

# openlaszlo - 使用嵌入字体时，OpenLaszlo 字体渲染对于 3.x 和 5.0 不一致

> ID：13707094
> 
> 赞同：2
> 
> 时间：2012-12-04T16:11:54.200
> 
> 标签：openlaszlo, custom-font, lzx

我正在将自定义字体应用于文本字段，这在我的 Openlaszlo 3.3 中运行良好，但在较新的版本（5.0）中，字体被应用并且样式也被应用，但我看到字母之间的空间更多。但这在旧版本中没有发生。

我检查了两个版本中的对象，发现唯一显着的区别是行高。

知道为什么会这样吗？如何删除这些空格是可能的？

3.3 截图

![3.3 客户端](../Images/4fdba470ed6052795f4106f8b354d7ac.png)

5.0 截图

![在此处输入图像描述](../Images/b5bb14b09f8d090bc6bcbd547ebd3e49.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:02:28.763

您看到的效果与 Flash 如何处理嵌入的 TTF 字体的方式有关：使用这些字体的文本完全由 Flash Player 呈现。尤其是从 Flash Player 8 到 9 的变化为文本渲染带来了许多改进（对嵌入字体更好的抗锯齿，最后是修改字母的能力）。

您看到的呈现文本的差异可能是由 Flash Player 9 及更高版本中更好的抗锯齿造成的。OpenLaszlo SWF9+ 文本和输入文本组件使用该设置[`flash.text.AntiAliasType.ADVANCED`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#antiAliasType)作为默认设置。

这是[OpenLaszlo 开发邮件列表中的讨论，](http://www.openlaszlo.org/pipermail/laszlo-dev/2008-September/017475.html)提到了您所看到的效果：

> > 字体渲染应该尽可能高质量——我认为没有人会想要在 FP9 中进行旧式渲染。没有其他方法可以修复此错误吗？
> > 
> > 我们不会在运行时获得完整的字体渲染一致性。使用设备字体时已经不一致。每个浏览器/播放器/操作系统的变体都不同，Flash 与 DHTML 也不同。

据我所知，没有用于修改该设置的官方 API。我创建了一个小型应用程序，您可以在其中测试修改该属性如何影响文本呈现。前两个文本项使用 Flash Player 的默认字体，因此消除锯齿设置不会影响渲染。以下 4 个文本项均使用嵌入的 TTF 字体，您可以根据`antiAliasingType`设置看到差异。

![OpenLaszlo SWF9/10 文本渲染，抗锯齿设置为正常或高级](../Images/2becc49fc1308f0f109793eb4f41457d.png)

要编译应用程序，请下载以下字体并将它们放入应用程序文件夹：

[http://svn.openlaszlo.org/openlaszlo/trunk/laszlo-explorer/fonts/ariosob.ttf](http://svn.openlaszlo.org/openlaszlo/trunk/laszlo-explorer/fonts/ariosob.ttf)
[https://github.com/w0ng/googlefontdirectory/raw/master/fonts/Amaranth-Regular.ttf](https://github.com/w0ng/googlefontdirectory/raw/master/fonts/Amaranth-Regular.ttf)

```
<canvas height="600">

    <font name="amaranth" style="plain" src="Amaranth-Regular.ttf" />
    <font name="arioso" src="ariosob.ttf" />

    <class name="mytext" extends="text">
        <passthrough when="$as3">
            import flash.text.AntiAliasType;
        </passthrough>
        <attribute name="antialias" type="string" value="advanced" />
        <handler name="oninit">
            this.onantialias.sendEvent();
        </handler>
        <handler name="onantialias">
            var t = this.getDisplayObject().textfield;
            if ( this.antialias == 'normal' ) {
                t.antiAliasType = flash.text.AntiAliasType.NORMAL;
            } else {
                t.antiAliasType = flash.text.AntiAliasType.ADVANCED;
            }
        </handler>
        <method name="toogleAntialias">
            if ( this.antialias == 'normal' ) this.setAttribute( 'antialias', 'advanced' );
            else this.setAttribute( 'antialias', 'normal' );
        </method>
    </class>

    <view>
        <simplelayout axis="y" spacing="10" />
        <view layout="axis:x; spacing:5">
            <text valign="middle">Anti-alias advanced</text>
            <checkbox value="true" y="10"
                      onvalue="if (parent.t) parent.t.toogleAntialias()" />
            <view width="20" height="1" />
            <mytext name="t"
                    antialias="advanced"
                    fontsize="25">Default font (no embedded TTF)</mytext>
        </view>
        <view layout="axis:x; spacing:5">
            <text valign="middle">Anti-alias advanced</text>
            <checkbox value="false" y="10"
                      onvalue="if (parent.t) parent.t.toogleAntialias()" />
            <view width="20" height="1" />
            <mytext name="t"
                    antialias="normal"
                    fontsize="25">Default font (no embedded TTF)</mytext>
        </view>

        <view layout="axis:x; spacing:5">
            <text valign="middle">Anti-alias advanced</text>
            <checkbox value="true" y="10"
                      onvalue="if (parent.t) parent.t.toogleAntialias()" />
            <view width="20" height="1" />
            <mytext name="t"
                    antialias="advanced"
                    font="amaranth" fontsize="25">Amaranth Regular</mytext>
        </view>
        <view layout="axis:x; spacing:5">
            <text valign="middle">Anti-alias advanced</text>
            <checkbox value="false" y="10"
                      onvalue="if (parent.t) parent.t.toogleAntialias()" />
            <view width="20" height="1" />
            <mytext name="t"
                    antialias="normal"
                    font="amaranth" fontsize="25">Amaranth Regular</mytext>
        </view>

        <view layout="axis:x; spacing:5">
            <text valign="middle">Anti-alias advanced</text>
            <checkbox value="true" y="10"
                      onvalue="if (parent.t) parent.t.toogleAntialias()" />
            <view width="20" height="1" />
            <mytext name="t"
                    antialias="advanced"
                    font="arioso" fontsize="25">Amaranth Regular</mytext>
        </view>
        <view layout="axis:x; spacing:5">
            <text valign="middle">Anti-alias advanced</text>
            <checkbox value="false" y="10"
                      onvalue="if (parent.t) parent.t.toogleAntialias()" />
            <view width="20" height="1" />
            <mytext name="t"
                    antialias="normal"
                    font="arioso" fontsize="25">Amaranth Regular</mytext>
        </view>
    </view>

</canvas> 
```

结果可能不会在所有操作系统中保持一致，因为操作系统将使用不同的方法来优化文本呈现。上面的截图是在 Linux 上拍摄的。

# android - 清除所有活动

> ID：13707095
> 
> 赞同：3
> 
> 时间：2012-12-04T16:11:56.983
> 
> 标签：android, stack, back

我有 4 项活动：A、B、C 和 D。还有一项：E。

当你在 A、B、C 和 D 之间开始一个新的活动时没有问题。但是在其中的某些点（例如，当登录成功时）我们想要开始活动 E 但清除所有 A、B、C 和D 活动（即清除回栈）。

所以，我想当你到达活动 E 并按下后退按钮时，你将离开应用程序。

我正在尝试在 startActivity 中添加标志：Intent.FLAG_ACTIVITY_CLEAR_TASK、Intent.FLAG_ACTIVITY_CLEAR_TOP 等等，但我无法实现这种行为。

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:50:17.527

```
Intent intent = new Intent(this, EActivity.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                this.startActivity(intent);
                this.finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:33:39.207

将活动 E 中的 onBackPressed 覆盖为

```
 @Override
    public void onBackPressed() {
        moveTaskToBack(true);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:36:01.320

尝试`startActivity`活动 A、B、C 和 E

```
Intent intent = new Intent(A.this,B.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(intent);
A.this.finish(); 
```

并声明您的 A、B 和 C 活动，如下所示`androidmanifest.xml`：

```
<Activity android:name=".A" 
    android:launchMode="singleInstance" />
 //..do B,C activities same 
```

并覆盖 Activity E 中的 onKeyDown

```
@verride
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if ((keyCode == KeyEvent.KEYCODE_BACK))
    {
        Activity_E.this.finish();
    }
    return super.onKeyDown(keyCode, event);
} 
```

# actionscript-3 - 从另一个视图访问视图内的对象？

> ID：13707096
> 
> 赞同：0
> 
> 时间：2012-12-04T16:11:57.690
> 
> 标签：actionscript-3, apache-flex, flex4.5

应用程序X.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:TabbedViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                                  xmlns:s="library://ns.adobe.com/flex/spark" applicationDPI="160" >

    <s:ViewNavigator label="Login"    width="100%" height="100%" firstView="views.LoginView"    />
    <s:ViewNavigator label="Settings" width="100%" height="100%" firstView="views.SettingsView" />

</s:TabbedViewNavigatorApplication> 
```

Settings.mxm（设置视图）：

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" >

    <s:Label id="myLabel" />
</View> 
```

*   如何从登录视图访问**myLabel ？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:59:04.287

你不应该。一个视图永远不应该知道另一个视图里面是什么。您想要的是一个具有类似 .loginStatus 属性的模型，然后可以通过 Login 设置并由 Settings 看到。您可以使用多种 MVC 样式中的一种来完成此操作。对 MVC 模式和 Flex 进行一些谷歌搜索，看看这是完成的不同方式。同时，这里有一个快速的例子：

设置.mxml：

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" >

    <fx:Script>
        <![CDATA[
            private var model:MyModel = MyModel.getInstance();
        ]]>
    </fx:Script>

    <s:Label id="myLabel" text="{model.loggedInStatus}" />
</View> 
```

登录.mxml：

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" >

    <fx:Script>
        <![CDATA[
            private var model:MyModel = MyModel.getInstance();

            private function loginSucceded():void{
                model.loggedInStatus="Logged In";
            }
        ]]>
    </fx:Script>

</View> 
```

我的模型.as

具有名为 .loggedInStatus 的属性的单例类。您可以查看这个其他答案[AS3 singleton implementations](https://stackoverflow.com/questions/13318290/as3-singleton-implementations/13318889#13318889)，以讨论各种单例模式以及我为什么使用我使用的模式。

这是一个非常简单的例子。您不想使用人类可读的字符串 loggedInStatus 来确定状态或任何内容。但这是模型如何工作以及视图如何根据模型状态显示正确内容的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:58:46.523

设置设置[单例](http://en.wikipedia.org/wiki/Singleton_pattern)。这意味着，您定义了一个指向项目本身的静态变量（它只需要一个 Settings.mxml 实例）

添加

```
public static var instance:Settings; 
```

到设置。将 initializeEventListener 添加到设置中，并在函数内部设置实例：

```
instance=this; 
```

通过获取单例，您可以随时访问设置页面，例如：

```
Settings.instance.myLabel.text="success"; 
```

# css - Bootstrap：垂直表单内的水平字段

> ID：13707099
> 
> 赞同：3
> 
> 时间：2012-12-04T16:12:06.320
> 
> 标签：css, twitter-bootstrap

我想在带有 Bootstrap 的“垂直样式”表单中有一些“水平样式”字段。

我该怎么做（如果可能）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T17:07:25.783

您可以利用 Bootstrap 的现有类 ( `checkbox.inline`) 来获得您正在寻找的效果。使它看起来正确的关键是`padding-left: 0px;`在标签上指定：

```
 <div class="control-group">
    <div class="controls">
      <label class="checkbox inline" style="padding-left: 0px;" for="inputColor">Favorite Color <input type="text" id="inputColor" class="span2" /></label>
      <label class="checkbox inline" style="padding-left: 0px;" for="inputNColor">Next Color <input type="text" id="inputNColor" class="span2" /></label>
    </div>
  </div> 
```

有关工作示例，请参阅[http://jsfiddle.net/jhfrench/Hzucn/ 。](http://jsfiddle.net/jhfrench/Hzucn/)

我尝试为您创建一个新类（按照`.controls-row label.inline { padding-left: 0px;}`这样的方式，您不必对元素进行样式设置，但它导致的冲突比我预期的要多。因此，如果您要普遍使用此解决方案，您可能想花时间解开那个...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T23:12:14.160

您可以在引导程序中使用与 .form-horizo​​ntal 实现类似的格式。（在这里滚动播种到水平形式：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)）

将标签和表单元素包装在分组 div 中（这就是 .control-group 在引导程序中的水平表单布局中所做的）。

向左浮动标签以与字段水平对齐显示它们。

```
label.horizontal {
  float: left;
  width: 160px;
  padding-top: 5px;
  margin-right: 20px;
  text-align: right;
} 
```

在上面的示例中，具有 .horizo​​ntal 类的标签将是“水平样式”，其余的将是“垂直”或默认表单布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T10:48:41.723

有一个类可以在 bootstrap 上使用！

检查这个例子：

```
<div class="span6">
  <form>
    <div class="controls controls-row">
      <input id="name" name="name" type="text" class="span3" placeholder="Name">
      <input id="email" name="email" type="email" class="span3" placeholder="Email address">
    </div>

   <div class="controls">
     <textarea id="message" name="message" class="span6" placeholder="Your Message" rows="5"></textarea>
   </div>

   <div class="controls">
     <button id="contact-submit" type="submit" class="btn btn-primary input-medium pull-right">Send</button>
   </div>

  </form>
</div> 
```

# node.js - Node js - 为什么是 3 连接？

> ID：13707102
> 
> 赞同：2
> 
> 时间：2012-12-04T16:12:14.917
> 
> 标签：node.js, sockets, google-chrome, networking, tcp

考虑这个用于 node.js 的小型服务器

```
var net = require ('net');

var server = net.createServer(function (socket) {

    console.log("Connection detected");

    socket.on('end', function() {
        console.log('server disconnected');
    });

    socket.write("Hello World");
    socket.end();
});

server.listen("8888"); 
```

当我在 Macbook Pro 上使用 Chrome 测试服务器时，我在控制台中收到三倍的*“检测到连接”消息。*

我知道一个用于良好的连接，另一个用于网站图标，但是第三个是关于什么的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:10:25.203

我用 Firefox 和`wget`（这是一个 Linux 命令行程序）对其进行了测试，并`telnet`进行了*深入*调查。令人惊讶的是，所有这些都没有建立任何额外的连接（显然他们甚至没有尝试下载 favicon）。所以我启动了 Wireshark 并捕获了一个会话，很快发现 Chorme 系统地建立了*无用*的连接，即它只是[连接](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)( `SYN`, `SYN-ACK`, `ACK`) 然后关闭连接 ( `RST`, `ACK`) 而不发送任何内容。

只是一个快速的谷歌搜索，我发现[了这个错误报告](http://code.google.com/p/chromium/issues/detail?id=116982)（摘录）：

> 我怀疑“空”的 TCP 连接是
> 
> 1.  备份 TCP 连接，
> 2.  IPv4/IPv6 并行连接，或
> 3.  TCP预连接，
> 
> 只有在 250 毫秒内未建立原始 TCP 连接时，才会建立备份 TCP 连接。仅当服务器同时具有 IPv6 和 IPv6 地址且未在 300 毫秒内建立 IPv6 连接时，才会进行 IPv4/IPv6 并行连接。由于您正在 localhost:8080 测试本地服务器，因此您应该能够快速连接到它，所以我怀疑您看到的是 TCP 预连接。
> 
> 要验证“空”TCP 连接是否为 TCP 预连接，请打开“扳手”菜单 > 设置 > 幕后 > 隐私，然后清除“预测网络操作以提高页面加载性能”复选框。关闭并重新启动 Chrome。“空”的 TCP 连接消失了吗？

如需进一步参考，请参阅[链接线程](http://code.google.com/p/chromium/issues/detail?id=116982)，它更深入地解释了*备份、并行和预连接*是什么以及是否/为什么这是一个很好的优化。

# vb.net - VB.NET - 写入注册表时访问被拒绝

> ID：13707106
> 
> 赞同：1
> 
> 时间：2012-12-04T16:12:31.503
> 
> 标签：vb.net

我正在使用以下代码运行写入注册表的程序

```
Dim myProcess2 As New System.Diagnostics.Process()
            Dim startInfo2 As New ProcessStartInfo
            startInfo2.FileName = Application.StartupPath & "\installs\Assistant\RegisterSureFire.exe"
            startInfo2.Verb = "runas"
            myProcess2.StartInfo = startInfo2
            Application.DoEvents()
            myProcess2.Start() 
```

然后我有另一个正在运行的名为“RegisterSureFire”的文件，它使用以下代码实际写入寄存器：

```
 My.Computer.Registry.SetValue("HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run", "Assistant", "C:\SF\Assistant.exe") 
```

这似乎在 Windows Vista/7/8 中使用管理员的“runas”运行得非常好，但是当您在 Windows XP 中执行此操作时，该框会出现询问您是否要在当前用户或管理员中运行它。我的大多数客户年龄在 50-70 岁左右，所以他们不知道这是什么。我还注意到，如果我通常在 Windows xp 上不使用“runas”，那么在尝试写入注册表时会收到“拒绝访问”错误消息。

谁能给我正确写信给注册表的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:22:58.923

我认为您的代码确实是正确的，但是您的应用程序需要修改注册表的权限。这可以在 Windows XP 下通过用户模拟来实现。

请谷歌找到适合您需求的解决方案，或者在这里查看这篇精彩的文章：http: [//www.codeproject.com/Articles/21050/Security-User-Impersonation](http://www.codeproject.com/Articles/21050/Security-User-Impersonation)

# c++ - 大括号之间的自定义类型初始化数组

> ID：13707107
> 
> 赞同：0
> 
> 时间：2012-12-04T16:12:32.017
> 
> 标签：c++, arrays

我正在努力并试图理解为什么以下代码不起作用。

我有3个类定义为：

```
class VertexType
{
public:
    VertexType(void) { };
    virtual ~VertexType() = 0;
};

class PositionColorVertex
    : public VertexType
{
public:
    PositionColorVertex(XMFLOAT3 _position, XMFLOAT4 _color)
    :Position(_position), Color(_color)
    {};
    ~PositionColorVertex() {};

    static const UINT size = 28;

    XMFLOAT3 Position;
    XMFLOAT4 Color;
};

class PositionVertex
    : public VertexType
{
public:
    PositionVertex(XMFLOAT3 _position)
    :Position(_position)
    {};
    ~PositionVertex() {};

    static const UINT size = 12;

    XMFLOAT3 Position;
}; 
```

数组初始化适用于：

```
PositionVertex vertices[] = { XMFLOAT3(0,0,0) }; 
```

但是当我尝试初始化时：

```
PositionColorVertex vertices[] = {
{ XMFLOAT3(0,0,0), XMFLOAT4(0,0,0,1) } }; 
```

我得到一个错误 C2552 非聚合不能用初始化列表初始化。

为什么 PositionVertex 有效而 PositionColorVertex 无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:15:28.477

> 为什么 PositionVertex 有效而 PositionColorVertex 无效？

因为在第一种情况下，您正在初始化一个数组，它是一个聚合：

```
PositionVertex vertices[] = { XMFLOAT3(0,0,0) }; 
```

在第二种情况下，您尝试`PositionVertexColor`使用包含两个元素的初始化列表来初始化 a，*然后*使用它来初始化 size-1 数组。第一部分仅适用于 C++11。您可以通过拆分它来更好地可视化它：

```
PositionVertexColor vertices[] = { {XMFLOAT3(0,0,0), XMFLOAT4(0,0,0,1)} }; 
```

一分为二：

```
PositionVertexColor pvc =  {XMFLOAT3(0,0,0), XMFLOAT4(0,0,0,1)}; // Error, non-aggregate.
PositionVertexColor vertices[] = { pvc }; // would be OK if first step had worked 
```

# g++ - 如何使用 gcc 从内联汇编（blackfin 方言）访问结构/类中的整数数组？

> ID：13707108
> 
> 赞同：0
> 
> 时间：2012-12-04T16:12:33.030
> 
> 标签：g++, inline-assembly

一开始对内联汇编不是很熟悉，对 blackfin 处理器的了解就更少了。我正在将遗留的 C 应用程序迁移到 C++ 的过程中，今天早上遇到了关于以下例程的问题：

```
//
void clear_buffer ( short * buffer, int len ) {
    __asm__ (
            "/* clear_buffer */\n\t"
            "LSETUP (1f, 1f) LC0=%1;\n"
            "1:\n\t"
            "W [%0++] = %2;"
            :: "a" ( buffer ), "a" ( len ), "d" ( 0 )
            : "memory", "LC0", "LT0", "LB0"
    );
} 
```

`short`我有一个类，其中包含一个用于音频处理的 s 数组：

```
class AudProc
{
    enum { buffer_size = 512 };

    short M_samples[ buffer_size * 2 ];

    // remaining part of class omitted for brevity
}; 
```

在`AudProc`类中，我有一个调用 的方法，`clear_buffer`将样本数组传递给它：

```
clear_buffer ( M_samples, sizeof ( M_samples ) / 2 ); 
```

这会生成“总线错误”并中止应用程序。

我尝试将数组公开，并产生相同的结果。我也尝试过使其成为静态的；这允许调用没有错误地通过，但不再允许我的类的多个实例，因为每个实例都需要自己的缓冲区来使用。现在，我的第一个想法是，它与缓冲区在内存中的位置或访问它的位置有关。是否需要在内联程序集中更改某些内容以使其工作，或者以调用方式？

认为这与我试图完成的任务相似，但它使用的是不同的 asm 方言，我无法弄清楚我遇到的问题是否相同：

[GCC 扩展 asm，struct 元素偏移编码](https://stackoverflow.com/questions/13254512/gcc-extended-asm-struct-element-offset-encoding)

1.  任何人都知道为什么会发生这种情况以及如何纠正它？
2.  有谁知道哪里有关于 blackfin asm 指令集的有用文档？我试过在 ADSP 网站上查找，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:16:35.543

我怀疑您可以将您的定义`clear_buffer`为

```
 inline void clear_buffer (short * buffer, int len) {
   memset (buffer, 0, sizeof(short)*len);
 } 
```

`-O2`并且可能 GCC 能够巧妙地优化（当使用or调用时`-O3`）（因为 GCC 知道`memset`）。

为了理解汇编代码，我建议`gcc -S -O -fverbose-asm`在一些小的 C 文件上运行，然后查看生成的`.s`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:21:21.577

我会猜测，因为我不知道 Blackfin 汇编程序：

这`LC0`听起来像“循环计数器”，`LSETUP`看起来像一个宏/insn，它在两个标签之间设置了一个循环，并带有一个特定的循环计数器。

“%0”操作数显然是要写入的地址，我们可以放心地猜测它在循环中递增，换句话说，它既是输入操作数又是输出操作数，应该这样描述。因此，我建议将其描述为输入输出操作数，使用“+”约束修饰符，如下所示：

```
void clear_buffer ( short * buffer, int len ) {
    __asm__ (
            "/* clear_buffer */\n\t"
            "LSETUP (1f, 1f) LC0=%1;\n"
            "1:\n\t"
            "W [%0++] = %2;"
            : "+a" ( buffer )
            : "a" ( len ), "d" ( 0 )
            : "memory", "LC0", "LT0", "LB0"
    );
} 
```

* * *

当然，这只是一个假设，但您可以反汇编代码并检查 GCC 是否为“%0”和“%2”分配了相同的寄存器。

PS。实际上，只有“+a”就足够了，early-clobber 无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:49:47.513

对于遇到类似情况的其他人来说，这里的问题不在于内联程序集，也不在于它的调用方式：它在于程序中的类/结构。我认为是违规者的类不是问题 - 有另一个类持有它的实例，并且由于该外部类的其他成员，内部类没有在单词边界上对齐。这导致了我遇到的“总线错误”。我以前没有遇到过这种情况，因为这些类没有`__attribute__((packed))`在其他代码中声明，但它们在我的实现中。

提供[类型属性 - 使用 GNU 编译器集合 (GCC)](http://gcc.gnu.org/onlinedocs/gcc/Type-Attributes.html)阅读实际上激发了我的答案。影响内存对齐的两个特定属性（以及我正在使用的内联汇编）是`packed`和`aligned`.

取自上述链接：

> ***对齐***（对齐）
> 
> 此属性为指定类型的变量指定最小对齐方式（以字节为单位）。例如，声明：
> 
> ```
>  struct S { short f[3]; } __attribute__ ((aligned (8)));
>           typedef int more_aligned_int __attribute__ ((aligned (8))); 
> ```
> 
> 强制编译器确保（尽可能）类型为`struct S`or more_aligned_int 的每个变量都被分配并至少在 8 字节边界上对齐。在 SPARC 上，将所有类型的变量`struct S`对齐到 8 字节边界允许编译器在将一个类型的变量复制到另一个类型的变量时使用`ldd`and （双字加载和存储）指令，从而提高运行时效率。`std``struct S`
> 
> 请注意，ISO C 标准要求任何给定`struct`或类型的对齐方式至少是or`union`的所有成员的对齐方式的最小公倍数的完美倍数。这意味着您可以通过将属性附加到此类类型的任何一个成员来有效地调整 a or类型的对齐方式，但是上面示例中说明的符号是请求编译器的一种更明显、直观和可读的方式调整整个或类型的对齐方式。`struct``union``struct``union``aligned``struct``union`
> 
> 与前面的示例一样，您可以显式指定希望编译器用于给定`struct`或`union`类型的对齐方式（以字节为单位）。或者，您可以省略对齐因子，只要求编译器将类型对齐到您正在编译的目标机器的最大有用对齐。例如，您可以编写：
> 
> ```
>  struct S { short f[3]; } __attribute__ ((aligned)); 
> ```
> 
> 每当您在对齐的属性规范中省略对齐因子时，编译器会自动将类型的对齐设置为您正在编译的目标机器上的任何数据类型曾经使用过的最大对齐。这样做通常可以使复制操作更有效，因为编译器可以使用任何指令在执行复制到或从具有您以这种方式对齐的类型的变量的变量时复制最大的内存块。
> 
> 在上面的例子中，如果 each 的大小`short`是 2 个字节，那么整个`struct S`类型的大小是 6 个字节。大于或等于 8 的 2 的最小幂是 8，因此编译器将整个`struct S`类型的对齐设置为 8 个字节。
> 
> 请注意，尽管您可以要求编译器为给定类型选择一种省时的对齐方式，然后只声明该类型的单个独立对象，但编译器选择一种省时的对齐方式的能力主要仅在您计划创建具有相关（有效对齐）类型的变量数组。如果您声明或使用有效对齐类型的变量数组，那么您的程序很可能还会对指向相关类型的指针以及编译器为这些指针算术运算生成对于有效对齐的类型通常比其他类型更有效。
> 
> 对齐属性只能增加对齐；但您也可以通过指定打包来减少它。见下文。
> 
> 请注意，对齐属性的有效性可能会受到链接器固有限制的限制。在许多系统上，链接器只能安排变量对齐到某个最大对齐。（对于某些链接器，支持的最大对齐可能非常小。）如果您的链接器最多只能将变量对齐到 8 字节对齐，那么`aligned(16)`在`__attribute__`仍然指定的情况下只能为您提供 8 字节对齐。有关详细信息，请参阅您的链接器文档。

.

> ***包装好的***
> 
> 这个属性，附加到`struct`或`union`类型定义，指定结构或联合的每个成员（除了零宽度位字段）被放置以最小化所需的内存。当附加到`enum`定义时，它表示应该使用最小的整数类型。
> 
> `struct`为和类型指定此属性`union`等效于为每个结构或联合成员指定打包属性。`-fshort-enums`在行上指定标志等效于`packed`在所有`enum`定义上指定属性。
> 
> 在下面的示例`struct my_packed_struct`中，成员紧密地打包在一起，但其`s`成员的内部布局没有打包——为此，也`struct my_unpacked_struct`需要打包。
> 
> ```
>  struct my_unpacked_struct
>            {
>               char c;
>               int i;
>            };
> 
>           struct __attribute__ ((__packed__)) my_packed_struct
>             {
>                char c;
>                int  i;
>                struct my_unpacked_struct s;
>             }; 
> ```
> 
> 您只能在或的定义上指定此属性`enum`，而不能在未定义枚举类型、结构或联合的 a 上指定此属性。`struct``union``typedef`

我遇到的问题具体是由于使用`packed`. 我试图简单地将`aligned`属性添加到结构和类中，但错误仍然存​​在。只有删除`packed`属性才能解决问题。现在，我将`aligned`属性保留在它们上并进行测试，看看我是否发现上面提到的代码效率有任何改进，这仅仅是因为它们在字边界上对齐。应用程序使用了这些结构的数组，因此可能会有更好的性能，但只有分析代码才能确定。

# android - How to Maven-ise an ActionBarSherlock project?

> ID：13707121
> 
> 赞同：1
> 
> 时间：2012-12-04T16:13:20.237
> 
> 标签：android, maven, jenkins

I have a Java Android project that builds fine in IntelliJ, but I want to have it build on a CI server running Jenkins (at Cloudbees). Rather than mess about with ant, it seemed sensible to use maven, to handle the ABS dependency. I created a simple pom to declare the dependency:

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>com.myapp</groupId>
    <artifactId>android</artifactId>
    <version>1.0.0</version>
  </parent>
  <groupId>com.myapp</groupId>
  <artifactId>myapp</artifactId>
  <version>1.0.1-SNAPSHOT</version>
  <name>myapp</name>
  <packaging>pom</packaging>

  <properties>
    <android.version>4.2.1_r1</android.version>
    <android.sdk.platform>17</android.sdk.platform>
    <google.android.maps.version>17</google.android.maps.version>
  </properties>

  <dependencies>
    <dependency>
      <groupId>com.actionbarsherlock</groupId>
      <artifactId>actionbarsherlock</artifactId>
      <version>4.1.0</version>
      <type>apklib</type>
    </dependency>
  </dependencies>

</project> 
```

When I run it on my local machine, I get this:

```
[ERROR]   The project com.myapp:myapp:1.0.1-SNAPSHOT (C:\...\myapp\pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Failure to find com.myapp:android:pom: 1.0.0 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced and 'parent.relativePath' points at wrong local POM @ line 4, column 11 -> [Help 2] 
```

I've no idea what that means. Can anyone help me understand why it's failing, what this error means? If you have any tips on mavenising an ActionBarSherlock Android app to get it working on Jenkins/cloudbees I'd be most appreciative.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:37:40.040

可以使用[ivy 插件](http://ant.apache.org/ivy/)将 Maven 与 ANT 构建集成。

以下任务将下拉“actionbarsherlock-4.2.0.apklib”文件并将其（及其依赖项）添加到 ANT 路径“compile.path”中：

```
<ivy:cachepath pathid="compile.path">
    <dependency org="com.actionbarsherlock" name="actionbarsherlock" rev="4.2.0" conf="default"/>
</ivy:cachepath> 
```

您的 Maven 依赖项不起作用的原因可能是因为 Maven 模块使用了“apklib”的打包类型。这意味着以下可能会起作用：

```
<dependency>
  <groupId>com.actionbarsherlock</groupId>
  <artifactId>actionbarsherlock</artifactId>
  <version>4.2.0</version>
</dependency> 
```

有关更多信息，请参阅：

*   [Android Ivy ActionBarSherlock](https://stackoverflow.com/questions/13699793/android-ivy-actionbarsherlock/13710965#13710965)
*   [Maven Central 中的 actionbarsherlock 模块](http://search.maven.org/#artifactdetails%7Ccom.actionbarsherlock%7Cactionbarsherlock%7C4.2.0%7Capklib)

# c++ - GtkTreeView 列标题点击事件

> ID：13707122
> 
> 赞同：2
> 
> 时间：2012-12-04T16:13:26.573
> 
> 标签：c++, linux, signals, gtkmm

我有个问题。我有 a`GtkListStore`和 a `GtkTreeView`，当用户单击 GtkTreeView 的某个列时，我想对 GtkListStore 进行排序并将结果更新到 GtkTreeView。我假设列是可点击的，并且不能重新排序，所以列的数字顺序可以用来设置排序列的索引。但是当用户单击特定列的标题时，我似乎找不到发出哪个信号。我一遍又一遍地浏览了 GTKMM 文档，但似乎没有提及！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:27:19.390

用于`Gtk::TreeView::get_column(<column-no>)`获取特定列并使用以下方法附加到其“点击”信号`Gtk::TreeViewColumn::signal_clicked()`：

```
Gtk::TreeViewColumn* col = myview.get_column(SOME_COLUMN_NUMBER);
col->signal_clicked().connect(sigc::mem_fun(*this,&some_method)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:15:43.530

这不是你应该做的。

可以有多个视图连接到同一个模型；排序*不是*您对模型执行的操作，而是您对视图执行的操作。

查看`[GtkTreeSortable](http://developer.gnome.org/gtk3/stable/GtkTreeSortable.html)`接口（及其`[GtkTreeModelSort](http://developer.gnome.org/gtk3/stable/GtkTreeModelSort.html)`实现）。

# hibernate - 配置MyBatis配置文件进行缓存

> ID：13707123
> 
> 赞同：1
> 
> 时间：2012-12-04T16:13:31.490
> 
> 标签：hibernate, mybatis

如何在配置文件中配置类似于 Hibernate 查询级别缓存或缓存提供程序的 MyBatis 缓存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:43:23.777

您可以 `<cache/>`在 xml 声明之后放在 xml 文件的顶部。这对我来说很好。

# unit-testing - 将参数化测试显式添加到 Maven 构建中

> ID：13707127
> 
> 赞同：0
> 
> 时间：2012-12-04T16:13:46.230
> 
> 标签：unit-testing, maven-2, junit

我正在尝试补充现有的 ant 构建，以便该项目也使用 maven 构建。我有大部分工作，但被一些测试用例困住了。

问题是一些测试是作为具有大量配置的对象生成的——实际上是对所有可用值进行参数扫描。扩展 TestCase 的类因此有一个 4 arg 构造函数。ant 构建创建此测试的多个实例，并将它们添加到 TestSuite。

然而，maven 构建失败了。问题是它试图直接运行测试类。它甚至无法构造它，因为它缺少单个 arg 构造函数。

重写测试类不是一种选择；主库正在由第三方开发，我不想分叉它。我正在尝试使用他们现有的设置，只添加它。

所以，我的问题是，maven 中是否有一种方法可以将一个或多个 TestCase 对象显式地添加到主 TestSuite（假设 maven 有一个），而不是通过反射让 maven 工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:13:59.880

好的，我确实设法解决了这个问题。JUnit 4 有一个专门用于参数化测试的运行器。所以我将 maven 构建移至 JUnit 4（ant 构建仍在使用 JUnit 3）。然后我必须编写一些自定义代码来生成构造函数参数列表，而不是 ant 构建代码生成的对象。最后，我在测试中添加了一些注释。

不幸的是，这意味着我不得不修改 ant 测试代码，尽管至少这仅限于添加。不理想，但可行。

# python - python比较不同时区的日期时间

> ID：13707128
> 
> 赞同：10
> 
> 时间：2012-12-04T16:13:47.830
> 
> 标签：python, python-2.7, python-datetime

我正在通过预定的对象发布来实现功能。用户选择发布时间，我创建了一个每分钟运行一次的 cron 任务并检查是否到了发布时间。

用户来自不同的时区。

所以我需要比较两个日期时间：

```
>>user_chosen_time
datetime.datetime(2012, 12, 4, 14, 0, tzinfo=tzinfo(120))
>>curdate=datetime.datetime.now()
datetime.datetime(2012, 12, 4, 18, 4, 20, 17340)
>>user_chosen_time==curdate
*** TypeError: can't compare offset-naive and offset-aware datetimes 
```

很抱歉这个相当愚蠢的问题，但我需要讨论这个问题。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-12-13T16:09:39.760

正如错误所暗示的那样，您“无法比较原始偏移量和可感知偏移量的日期时间”。这意味着您应该比较两个日期时间，它们都是时区感知或时区天真（不是时区感知）。在您的代码中， curdate 没有时区信息，因此无法与时区感知的 user_chosen_time 进行比较。

首先，您应该为每个日期时间分配正确的时区。然后您可以直接比较具有不同时区的两个日期时间。

示例（使用 pytz）：

```
import pytz
import datetime as dt

# create timezone
nytz=pytz.timezone('America/New_York')
jptz=pytz.timezone('Asia/Tokyo')

# randomly initiate two timestamps
a=dt.datetime(2018,12,13,11,2)
b=dt.datetime(2018,12,13,22,45)

# assign timezone to timestamps
a=nytz.localize(a)
b=jptz.localize(b)

# a = datetime.datetime(2018, 12, 13, 11, 2, tzinfo=<DstTzInfo 'America/New_York' EST-1 day, 19:00:00 STD>)
# b = datetime.datetime(2018, 12, 13, 22, 45, tzinfo=<DstTzInfo 'Asia/Tokyo' JST+9:00:00 STD>)

a>b # True
b>a # False 
```

对于其他方法，您可以参考[Convert a python UTC datetime to a local datetime using only python standard library？](https://stackoverflow.com/questions/4563272/convert-a-python-utc-datetime-to-a-local-datetime-using-only-python-standard-lib).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T16:16:13.377

[http://pytz.sourceforge.net/](http://pytz.sourceforge.net/)是您想要消除时区差异时想要查看的地方:)

编辑：刚刚[在 SO 上找到了这篇文章，](https://stackoverflow.com/questions/4530069/python-how-to-get-a-value-of-datetime-today-that-is-timezone-aware/4530166#4530166)它可能会为您提供有关您的问题的更多信息

# php - 更改查询的限制而不在 CodeIgniter 中再次执行

> ID：13707129
> 
> 赞同：1
> 
> 时间：2012-12-04T16:13:51.657
> 
> 标签：php, sql, codeigniter

是否可以更改查询的限制而无需再次执行。

这是我的代码：

```
$this->db->select("SQL_CALC_FOUND_ROWS e.emp_no, e.birth_date, e.first_name, e.last_name, e.gender, e.hire_date, t.title, s.salary, d.dept_name", FALSE)
            ->from('employees AS e')
            ->join('titles AS t', 'e.emp_no = t.emp_no')
            ->join('salaries AS s', 't.emp_no = s.emp_no')
            ->join('dept_emp AS de', 's.emp_no = de.emp_no')
            ->join('departments AS d', 'de.dept_no = d.dept_no')
            ->join('dept_manager AS dm', 'd.dept_no = dm.dept_no')
            ->order_by($sort_by, $sort_order)
            ->group_by('e.emp_no')
            ->where('t.title', $title)
                        ->limit($limit, $offset);

    $ret['rows'] = $q->get()->result(); 
```

我正在使用分页，所以如果我继续加载返回大约 100,000 行的查询，它会减慢返回速度。

我想通过运行一次查询然后动态更改限制来使其更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:17:58.353

首先，这与 Code Igniter 或 PHP 无关。这将取决于您的数据库。

从那里开始，我相信这将取决于查询。如果你有一个`SELECT`没有排序的普通查询，那么 MySQL 至少会在达到限制后停止。超出该限制的数据不可用。

也许如果您有一个子查询，并且受外部查询的限制，则可以缓存子查询的结果，具体取决于您的服务器配置和数据的易失性。一开始你的性能会很差，因为整个查询需要完成，但后续查询可能会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:24:01.303

该限制不会减慢您的应用程序。“SQL_CALC_FOUND_ROWS”可以。众所周知，它可以减慢查询速度，我的意思是慢。检查这篇文章的基准和它是如何工作的解释：[http ://www.mysqlperformanceblog.com/2007/08/28/to-sql_calc_found_rows-or-not-to-sql_calc_found_rows/](http://www.mysqlperformanceblog.com/2007/08/28/to-sql_calc_found_rows-or-not-to-sql_calc_found_rows/)

# javascript - 通过 jQuery/Javascript 添加悬停 CSS 属性

> ID：13707134
> 
> 赞同：38
> 
> 时间：2012-12-04T16:14:16.170
> 
> 标签：javascript, jquery, html, css, hover

一些 CSS 样式需要在悬停时应用于元素，并且 CSS 样式必须直接使用 javascript/jquery 应用，而不是通过样式表或`$(this).addClass('someStyle')`因为我将 DOM 元素注入另一个页面。

我们可以使用通常的 css 样式

```
$('#some-content').css({
    marginTop: '60px',
    display: 'inline-block'
}); 
```

`:hover`我们应该如何为事件添加 CSS 样式？

* * *

我们是否必须求助于：

```
$('#some-content').hover(
       function(){ $(this).css('display', 'block') },
       function(){ $(this).css('display', 'none') }
) 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-04T16:16:00.347

我发现使用 mouseenter 和 mouseleave 比悬停更好。有更多的控制权。

```
$("#somecontent").mouseenter(function() {
    $(this).css("background", "#F00").css("border-radius", "3px");
}).mouseleave(function() {
     $(this).css("background", "00F").css("border-radius", "0px");
}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-04T16:16:55.677

尝试这个：

```
$('#some-content').hover(function(){
    $(this).css({ marginTop: '60px', display: 'inline-block' });
}, function(){
    $(this).css({ //other stuff });
}); 
```

或使用类

```
$('#some-content').hover(function(){
    $(this).toggleClass('newClass');
}); 
```

更多信息在这里[.hover()](http://api.jquery.com/hover/)和[.toggleClass()](http://api.jquery.com/toggleClass/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T16:17:37.563

You should put them in a [hover](http://api.jquery.com/hover) event:

```
var elem = $('#elem');

elem.hover(function () {
    // ... :hover, set styles
}, function () {
    // ... this function is called when the mouse leaves the item, set back the
    //     normal styles
}); 
```

However, I completely recommend to put your CSS in classes and use those classes in JS, you should split the languages as much as you can.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T16:18:29.497

```
$("#someObj").hover(function(){
    $(this).css(...);
}:); 
```

[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

# c - 使用 Ncurses 调整故障大小？

> ID：13707137
> 
> 赞同：11
> 
> 时间：2012-12-04T16:14:29.313
> 
> 标签：c, ncurses

我正在编写一个`ncurses`程序，并试图使其正确响应终端调整大小。虽然我可以在我的程序中正确读取终端尺寸，`ncurses`但似乎无法正确处理新尺寸。这是一个（有点长）示例程序：

```
#include <ncurses.h>
#include <string.h>
#include <signal.h>
#include <sys/ioctl.h>

void handle_winch(int sig){

    struct winsize w;
    ioctl(0, TIOCGWINSZ, &w);
    COLS = w.ws_col;
    LINES = w.ws_row;

    wresize(stdscr, LINES, COLS);
    clear();

    mvprintw(0, 0, "COLS = %d, LINES = %d", COLS, LINES);
    for (int i = 0; i < COLS; i++)
        mvaddch(1, i, '*');

    refresh();
}

int main(int argc, char *argv[]){

    initscr();

    struct sigaction sa;
    memset(&sa, 0, sizeof(struct sigaction));
    sa.sa_handler = handle_winch;
    sigaction(SIGWINCH, &sa, NULL);

    while(getch() != 27) {}

    endwin();
    return 0;
} 
```

如果您运行它，您可以看到正确检索到终端尺寸。但是应该在屏幕上绘制`*`-characters 的第二行不起作用。尝试水平调整窗口大小使其变大，`*`s 的行不会变大。

这里有什么问题？我知道可以暂时离开诅咒模式，但我更喜欢更清洁的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-04T16:39:02.073

不要设置`COLS`和`LINES`。这些由 ncurses 管理。此外，让 ncurses 在调整大小后正确重新初始化。这意味着，不要调用 wresize()。只需调用 endwin() 即可。在使用其他 ncurses 函数之前，请确保在 endwin() 调用之后直接调用 refresh()。

您也根本不需要 ioctl() 。ncurses 负责自动检测新大小。

所以你需要的只是一个 endwin() 调用：

```
void handle_winch(int sig)
{
    endwin();
    // Needs to be called after an endwin() so ncurses will initialize
    // itself with the new terminal dimensions.
    refresh();
    clear();

    mvprintw(0, 0, "COLS = %d, LINES = %d", COLS, LINES);
    for (int i = 0; i < COLS; i++)
        mvaddch(1, i, '*');
    refresh();
} 
```

此外，一些 ncurses 版本被配置为提供自己的 SIGWINCH 处理程序。当发生调整大小时，这些版本返回 KEY_RESIZE 作为键输入。如果您要使用它，则根本不需要信号处理程序。相反，您只需要：

```
#include <ncurses.h>
#include <string.h>

int main()
{

    initscr();

    int key;
    while ((key = getch()) != 27) {
        if (key == KEY_RESIZE) {
            clear();
            mvprintw(0, 0, "COLS = %d, LINES = %d", COLS, LINES);
            for (int i = 0; i < COLS; i++)
                mvaddch(1, i, '*');
            refresh();
        }
    }

    endwin();
    return 0;
} 
```

Unfortunately, you can't rely on all ncurses installation being configured with KEY_RESIZE, so the signal handler is the most portable solution.

# javascript - Highcharts MVC 无法获取属性“系列”的值：对象为空或未定义

> ID：13707142
> 
> 赞同：1
> 
> 时间：2012-12-04T16:14:48.150
> 
> 标签：javascript, jquery, asp.net-mvc, highcharts

我正在尝试在 IE9 中运行这个 Highcharts 示例

[http://www.highcharts.com/studies/live-server.htm](http://www.highcharts.com/studies/live-server.htm)

但我没有调用 php 脚本，而是执行以下操作：

```
function requestData() {            
        var MyAppUrlSettings = {
            MyUsefulUrl: '/PaymentConfirmation/UpdateChart?numSecondsToGoBack=3600'
        }

        $.ajax({
            url: MyAppUrlSettings.MyUsefulUrl,
            type: "POST",
            async: false,
            dataType: "json",
            success: function (PaymentConfirmationData) {
                $.each(PaymentConfirmationData, function (i, PaymentConfirmation) {

                    var d = new Date(); 
                    d.setTime(parseInt(PaymentConfirmation.TimeMilliSeconds));                            
                    var milli = d.getTime();
                    var series = chart.series[0],
                 shift = series.data.length > 20; // shift if the series is longer than 20
                    // add the point
                    chart.series[0].addPoint([milli, PaymentConfirmation.Count], true, shift);

                    // call it again after one second
                    setTimeout(requestData, 1000);
                });
            },
            error: function (xhr, status, error) {
                alert("An AJAX error occured: " + status + "\nError: " + error);
            },
            cache: false
        });
    } 
```

现在就像在示例中一样，图表对象是全局声明的（我认为这在某种程度上不起作用！！！）

注意：“$(document).ready(function() {”函数与示例中的一样。

请提前提供帮助和感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:05:46.087

没有看到这里的实际图表代码是我最好的猜测。您没有正确定义您的系列对象。这条线是我认为的问题：

```
var series = chart.series[0], 
```

我认为应该是 a`;`而不是 a `,`。

此外，如果您仍然收到此错误，那么您创建了一个`chart`没有`series`但然后尝试将一个点推送到 a `series[0]`。确保创建一个空系列（或创建`series`后`chart`创建）。就像给出的示例页面一样：

```
series: [{
     name: 'Random data',
     data: []
   }] 
```

# jquery-mobile - 运行函数，然后使用 jQuery Mobile 激活函数？

> ID：13707143
> 
> 赞同：0
> 
> 时间：2012-12-04T16:14:49.100
> 
> 标签：jquery-mobile

我想运行一个自行创建的函数，然后真正运行一个 jQuery Mobile PopUp，但不知道如何？

这是我认为我应该做的：

```
$(document).ready(function() {
   var finished = false;
   $("#mytest").click(function() {
      // RUN MY FUNCTION AND THE IF TRUE RUN POPUP
      if(finished == true){
         // ACTIVATE JQUERY MOBILE POPUP FUNCTION
      }
   });
}); 
```

然后我应该像这样激活 mytest 函数：

```
<a style="height: 75px;" href="" data-rel="popup" data-role="button" id="mytest">Test</a> 
```

然而似乎什么都没有发生？我似乎没有进入 mytest 函数？当我进入时，如何激活弹出功能？

希望得到帮助:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:51:14.257

尝试这个！

```
 <!DOCTYPE html> 
<html>
<head>
    <meta charset="utf-8">
    <title>popup</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

      <script>
       $().ready(function () {
          $(document).bind('pageinit', function () {
              $("#mytest").click(function () {
                  var finished = false;
                  // RUN MY FUNCTION AND THEN IF TRUE RUN POPUP (WILL OPEN AUTOMATICALLY)
                  if (finished == false) {
                      // PREVENT OPENING POPUP
                      return false;
                  }
              });
          });

      });
    </script>
</head>

<body>
  <div data-role="page" id="myPage">
    <div data-role="content">
      <h1>Popup</h1>
      <a style="height: 75px;" href="#eat" data-rel="popup" data-role="button" id="mytest">Test</a>
    </div>

    <div data-role="popup" id="eat" data-theme="c" data-overlay-theme="c">
    Eat Something
    </div>

  </div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:20:39.950

查看工作示例：[finished == true](http://jsfiddle.net/UCRgK/4/)和[finished == false](http://jsfiddle.net/UCRgK/2/)：单击按钮，看看会发生什么......
1）`finished == true`：弹出窗口自动打开
2）`finished == false`：我曾经`return false`阻止打开弹出窗口

脚本：

```
 $(document).bind('pageinit', function() {
       $("#mytest").click(function() {
         var finished = false;
         // RUN MY FUNCTION AND THEN IF TRUE RUN POPUP (WILL OPEN AUTOMATICALLY)
         if(finished == false){
           // PREVENT OPENING POPUP
           return false;
         }
       });
     }); 
```

完整的例子：

```
<html>
<head>
    <meta charset="utf-8">
    <title>popup</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>

<body>
  <div data-role="page" id="myPage">
    <div data-role="content">
      <h1>Popup</h1>
      <a style="height: 75px;" href="#eat" data-rel="popup" data-role="button" id="mytest">Test</a>
    </div>

    <section data-role="popup" data-overlay-theme="a" id="eat">
      Are you sure you want to eat?
    </section>

    <script>
     $(document).bind('pageinit', function() {
       $("#mytest").click(function() {
         var finished = false;
         // RUN MY FUNCTION AND THEN IF TRUE RUN POPUP (WILL OPEN AUTOMATICALLY)
         if(finished == false){
           // PREVENT OPENING POPUP
           return false;
         }
       });
     });
    </script>
  </div>

</body>
</html> 
```

# playframework - 如何在 play framework 1.x 插件中访问会话？

> ID：13707151
> 
> 赞同：0
> 
> 时间：2012-12-04T16:15:28.367
> 
> 标签：playframework, playframework-1.x

我想为所有请求编写一个拦截器 - 做一些事情，也许在会话中放一些东西。

我已经注册了播放插件并覆盖了

```
@Override
public void routeRequest(Request request) { ... } 
```

我从中得到了一个正确的 Request 对象，但尝试访问 Controller.session 或 Session.current() 给了我一些会话，但不是我的控制器下一个可用的会话。

有可能在玩吗？

或者也许有更好的编写方法和拦截器 - 所以每个请求都应该是跨系统的。

我知道的后备方法是使用 @Before 方法创建一个专用控制器，并使用 @With 注释每个其他控制器以包含此方法，但这是一种我想避免的重复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:26:11.890

我扩展了错误的方法。

要访问与控制器相同的会话对象 - 必须扩展

```
@Override
public void beforeActionInvocation(Method actionMethod) { } 
```

# jquery - jQuery - 裁剪删除图像？

> ID：13707153
> 
> 赞同：0
> 
> 时间：2012-12-04T16:15:32.210
> 
> 标签：jquery

我正在从另一个网站动态提取远程图像。其中一些图像的尺寸非常大。但是它们的宽度都相同。

所以目前，我用`overflow:hidden;`. 然而，一些图像的高度非常大。因此，这些图像的加载时间很长，即使只显示了一小部分尺寸

有什么方法（使用 JQuery）可以从根本上裁剪远程存在的图像，因为我将其拉入显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:29:18.727

javascript 是客户端，这意味着它在您的计算机上运行。如果不完全加载它，就无法使用 js 操作图像（即使您在 js 上有图像操作库）。

在您的情况下，您想在远程主机上操作图像 - 发出 HTTP 请求，使用 javascript 获取图像的一部分 - 这是不可能的（除非您有某种网络服务）。

在您的情况下 - 您可以从服务器 A 下载整个图像并将其上传到服务器 B 并使用服务器 B 运行操作。

更好的方法是从服务器 A 下载整个图像 - 使用 javascript（和 html 画布）进行操作并生成修改后的版本并将修改后的版本发送到服务器 B。由于下载速度快而上传速度慢 - 这应该可以相当快。

在这两种情况下，您都需要下载整个图像。在第二种方法中，您不必将原始（大）图像上传到服务器，而只需将较小的修改版本上传。

# internet-explorer - 在 Google Maps v3 的 Fusion Tables 信息窗口上隐藏阴影

> ID：13707155
> 
> 赞同：0
> 
> 时间：2012-12-04T16:15:38.600
> 
> 标签：internet-explorer, google-maps-api-3, overlay

我正在尝试隐藏 Fusion Tables 图层信息窗口（Google Maps v3）的信息窗口阴影。我已经阅读了[Google Map API V3 中的线程 Hide shadow on infowindow](https://stackoverflow.com/questions/4166042/hide-shadow-on-infowindow-in-google-map-api-v3)但它的“样式”建议似乎没有任何效果，而且我不确定如何获得对 infowindow 对象本身的必要访问（虽然我可以通过 infoWindowHtml 属性访问 html）。

我已经阅读了有关自定义叠加层以及如何为它们隐藏阴影的信息，但是您如何为非自定义叠加层执行此操作？

我想这样做的原因是因为这里描述的 IE 7/8 问题：

[http://code.google.com/p/gmaps-api-issues/issues/detail?id=2797](http://code.google.com/p/gmaps-api-issues/issues/detail?id=2797)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:50:25.360

您可以使用[infobubble 实用程序库](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/)（允许您控制阴影）；或编写自己的没有阴影的信息窗口。

将 infoBubble 库与 FusionTablesLayer 一起使用：

1.  set [{suppressInfoWindows:false}](https://developers.google.com/maps/documentation/javascript/reference?hl=pl#FusionTablesLayerOptions) - 禁止默认信息窗口
2.  向 FusionTablesLayer添加[点击监听器](https://developers.google.com/maps/documentation/javascript/reference?hl=pl#MapsEventListener)
3.  在该[单击侦听](https://developers.google.com/maps/documentation/javascript/reference?hl=pl#FusionTablesMouseEvent)器中，您可以访问默认的 InfoWindow HTML (.infoWindowHtml)
4.  使用该内容打开 infoBubble（或根据需要进行修改）

# php - PHP 编码器：它们有多安全？

> ID：13707160
> 
> 赞同：0
> 
> 时间：2012-12-04T16:15:56.957
> 
> 标签：php

对于我的一个新项目，我想保护我的代码。我已经搜索过这个论坛和其他论坛，但大多数主题都是几年前的，软件可以改变。我知道“三巨头”是 ZendGuard、ionCube 和 SourceGuardian。现在虽然 Zend 在安全方面享有盛誉，但它对我的需求来说太贵了，所以我只剩下 ionCube 和 SourceGuardian。我做了一些研究来确定每个产品的安全性，然后我发现了 freelancer.com，人们雇佣其他人来解密和去混淆他们的源代码。我发现了相对多的 ionCube 广告——还有一些带有最新版本的 ionCube 编码器。另一方面，我发现的 SourceGuardian 项目都是使用旧版本的软件加密的。Zend 的产品似乎是最安全的，因为我没有*找到任何东西。*

 *由于我不想在一个只会让我的代码更难阅读的产品上浪费几百美元，所以我想知道：您对 PHP 编码软件的安全性有何看法，您认为哪些产品最好?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-05-13T10:07:47.807

离子立方体和动态键。使用不同的 keygen() 函数保护所有 PHP 文件中尽可能多的函数。如果文件包含一个或两个 keygen() 函数，我知道有人以 30 美元的价格解码单个 PHP 文件。如果您的文件包含更多注册机，价格会发生变化。

我的项目包含 1000 个 PHP 文件，每个文件中平均有 8 个受保护的函数，并且许可证检查实际上存在于每个文件中。性能仅下降 15%。

1000 个文件 x 30 美元 x 4 = 120,000 美元

破解/解码的成本大于软件本身的成本。

另外，一个熟练的程序员可能需要 2 到 5 个小时来弄清楚单个 keygen 的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:31:30.913

如果你想“保护”你的代码，你有 3 个选项：

1.  不要公开你的代码。很简单，如果您的 PHP 代码不是公开的，那么没有人可以看到或弄乱它。
2.  公开您的代码，并放弃“保护”您的代码（所谓的“开源项目”）。
3.  不要使用 PHP。使用某种其他编译语言，例如 Java 或 C。

这些是你得到的选择。当给予足够的时间、努力和坚持时，任何注意力不集中的人都会被忽视。另外，一个小错误，您将永远无法再次阅读您的代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T16:28:03.550

我认为如果你真的想保护你的代码，你需要找到比代码混淆器、任何类型的编码器或任何使你的代码更难阅读的东西更好的方法。最好的办法是管理好谁可以访问您的代码，并与项目中涉及的所有部分签订良好的合同。

看看我前段时间的问题-> [https://softwareengineering.stackexchange.com/questions/29496/open-source-php-encoder](https://softwareengineering.stackexchange.com/questions/29496/open-source-php-encoder)

这另一个问题 [你能“编译”PHP代码吗？](https://stackoverflow.com/questions/1408417/can-you-compile-php-code)

我认为它会引导你决定购买一些承诺不可能的软件。*

# javascript - 使用 JS/jQuery 操作后，在单独的 .css 文件中导出 CSS 样式？

> ID：13707164
> 
> 赞同：1
> 
> 时间：2012-12-04T16:16:05.510
> 
> 标签：javascript, css, html, svg

我必须使用 HTML5/JS/jQuery/CSS 创建一个自定义的基本 SVG 编辑器。
编辑器的输入是两个文件 x.svg 及其关联的 x.css 文件。

x.svg 将加载到 HTML 页面中，并应用来自 x.css 的样式。然后像描边、宽度...这样的样式将使用 JS/jQuery 进行操作，到目前为止一切都很好。

我的问题是，在用户对样式进行了一些更改并希望将这些更改永久保存在 x.css 文件中之后，我不知道该怎么做，我可以轻松地将属性：值对写入文件，但是x.css 文件有选择器、大括号等...程序的输出应该是一个探测器 x.css 文件，注意 x.svg 将保持不变。我该如何处理这个问题，没有代码的详细想法就足够了，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:20:15.183

好的，这就是答案，我在 Eli gray 的 FileSaver.min.js 和 BlobBuilder.min.js 的帮助下实现了它，该功能附加到锚元素的单击事件，当用户单击时会出现一个对话框，询问你插入文件名和存储位置。在 Chrome 23 上测试，在版本 24 上它不起作用。

```
function exportCSS() 
{

//stop anchor link from taking us anywhere
event.preventDefault();
//index is chosen for test sofar, need next to iterate over all sSheets and pick the right one depending on svg file name
sSheet = document.styleSheets[2];
myRules = sSheet.cssRules;
len = myRules.length;
for (i = 0; i < 50; i++) {
    cssOutputString = cssOutputString + myRules[i].cssText + "\n";
}
console.log(cssOutputString);

//save the file
var blob = new Blob([cssOutputString]);

saveAs(blob, "file.css");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:31:55.257

出于安全原因，您不能使用 Javascript 将文件保存到客户端的硬盘上。

# asp.net - 从对话框的按钮事件中获取未显示在中继器中的 Id 值

> ID：13707166
> 
> 赞同：1
> 
> 时间：2012-12-04T16:16:10.183
> 
> 标签：asp.net, repeater, session-variables

我在尝试获取已在 asp.net 中继器中单击的 ID 项的值时遇到问题。我的中继器有一个打开对话框的图像，从打开的对话框中，当我单击 Approve 时，我想在重定向时在 .cs 文件中获取此值，因为 ApproveChange_Click 事件。我没有对要在中继器中检索的 Id 执行任何 DataBinder.Eval。我怎样才能做到这一点？如果我使用会话变量，我可以在哪里设置 .aspx 页面中的值以及如何设置。提前致谢！

这是中继器：

```
<tr class="<%# Container.ItemIndex % 2 != 0 ? "" : "odd" %>">
     <td class ="approval-img"><a class ="approvalDialog" href='#'><img src="/Images/Approve.png" alt ="Approve"/></td></a>
     <td class ="approval-img"><a class ="declineDialog" href='#'><img src="/Images/Decline.png" alt ="Decline"/></td></a>
     ...
</tr> 
```

这是对话框：

```
<div id="approval-form" style="display: none; cursor: default">
    <div class="approve-change">
        <ul>
        <li>
            <p><label>Reason</label></p>
            <textarea id="txtReason" runat="server" cols="1" rows="1" class="required"></textarea><br />
        </li>
        <li>
            <span>
            <asp:Button ID="btnApprove" runat="server" CssClass="blue" Text="Approve" ToolTip = "Approve" OnClick="ApproveChange_Click" />
            <button id="btnCancelApprove" class="blue">Cancel</button>
            </span>
        </li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:22:54.387

您可以使用按钮的`NamingContainer`属性来获取`RepeaterItem`. 但是，如果您“没有对 ID 执行任何 DataBinder.Eval”，则不清楚您将 ID 存储在哪里。

所以我建议使用例如 a [`HiddenField`](http://msdn.microsoft.com/en-us/library/w100c6hw.aspx)，用于`Eval`将 ID 应用于它的`Value`属性。

在中继器的某处：

```
<asp:HiddenField ID="HiddenID" runat="server" Value='<%# Eval("ID") %>' /> 
```

现在您可以通过以下方式获取它：

```
protected void ApproveChange_Click(Object sender, EventArgs e)
{
    Button btn = (Button) sender;
    RepeaterItem item = (RepeaterItem)  btn.NamingContainer;
    HiddenField idField = (HiddenField) item.FindControl("HiddenID");
    int ID = int.Parse(idField.Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:45:14.300

这是我找到的解决方案：首先：更改 ImageButton 中继器中的标签，以便有机会向事件发送命令参数

```
<td class ="approval-img"><asp:ImageButton runat="server" CommandArgument = '<%# Eval("aux_approvalId")%>'  OnClick="getApprovalID_approve" ToolTip="Approve" ImageUrl="/Images/Approve.png" /></td> 
```

所以，当我被重定向到 OnClick 事件时，我得到了 ID 并在对话框打开后。

```
ImageButton btn = (ImageButton)(sender);
Session["ApprovalID"] = btn.CommandArgument;
string script = "OpenApprovalDialog();";
Page.ClientScript.RegisterStartupScript(typeof(Page), "", script, true); 
```

# jquery - jquerymobile按钮链接不起作用，如果我刷新页面就可以了

> ID：13707169
> 
> 赞同：0
> 
> 时间：2012-12-04T16:16:23.617
> 
> 标签：jquery, mobile, button, hyperlink, anchor

这是链接到第二页的按钮

```
<a href="#game" id="play-button" data-role="button">Play!</a> 
```

这链接到

```
 <!-- Game page -->
        <div id="game" data-role="page" data-content-theme="a">
        ... page content 
```

除非我刷新页面，否则此“播放”按钮不起作用。这可能是什么原因？我尝试将链接更改为“gamepage.html#game”，尝试添加 data-ajax="false" 但它没有修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:20:55.877

据我所知，您似乎正在尝试使用不同的哈希链接同一页面，在 jQuery Mobile beta 3 中，他们解决了这个问题，但对于旧版本，您需要启用自链接。

# hadoop - Hbase如何拆分多个regionServer中的记录？

> ID：13707178
> 
> 赞同：2
> 
> 时间：2012-12-04T16:16:51.260
> 
> 标签：hadoop, hbase, hdfs

我有集群设置`Hbase`：

`1`HMaster节点和3个Region Server

我想知道：当我们在表中插入多行时，Hbase 如何将记录拆分到多个 regionServer ？

是否`Hfile`有排序的键值记录（`rowKey:cf:TimeStamp`）？

如果是，则 Hbase 如何维护事务表中的排序键顺序。

我读到 META 表维护表信息，如 (Table_name, Region(StartKey-EndKey)) 是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:54:37.840

我对你的问题有点困惑，但是当你在表中插入多行时，会对`.META.`表进行查找以查找哪个区域应该获得突变，然后客户端将其发送到相应的 hbase regionserver。

HFiles 确实是带有键值的排序文件，看起来更像

> `<keylength> <valuelength> <rowlength> <row> <columnfamilylength> <columnfamily> <columnqualifier> <timestamp> <keytype> <value>`

[http://hbase.apache.org/book/hfilev2.html](http://hbase.apache.org/book/hfilev2.html)

[http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/KeyValue.html](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/KeyValue.html)

排序发生在所有压缩中，即当您添加一行时，它被添加到 中`memtable`，一旦在其中填充了足够的行，`memtable`它将对它们进行排序并将它们转储到一个`HFile`（即合并压缩）。当 HBase 存在多个 HFile 时，`region`将以排序方式将它们合并在一起（称为主要压缩）。

META 表维护区域信息，例如表名、区域开始键、结束键以及正在为其服务的服务器。

# iphone - UICollectionView Assertion failure in deleteItemsAtIndexPaths

> ID：13707181
> 
> 赞同：6
> 
> 时间：2012-12-04T16:17:00.460
> 
> 标签：iphone, ios, xcode, uicollectionview

Here is my error:

```
*** Assertion failure in -[PSUICollectionView _endItemAnimations], /SourceCache/UIKit_Sim/UIKit-2372/UICollectionView.m:2801 
```

I'm calling it like this:

```
[self.collectionView deleteItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:1 inSection:1]]]; 
```

Why is this happening, any ideas?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T17:40:03.763

您是否也从模型中删除了该项目？因此，例如，如果行数、节数和它们呈现的内容取自数组字典，其键代表节，每个数组代表行，那么如果您删除一行，则`deleteItemsAtIndexPaths`您有责任更新字典因此。`UICollectionView`不会为你做的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T09:47:35.287

请注意，您正在尝试从第 1 节中删除索引 1。索引和节都从 0 开始。

我是这样做的：

```
NSMutableArray *forms; // datasource item data for all the cells
int indexToDelete; // Set to the index you want to delete

...

[self.collectionView performBatchUpdates:^(void){
    [forms removeObjectAtIndex:indexToDelete]; // First delete the item from you model
    [self.collectionView deleteItemsAtIndexPaths:@[[NSIndexPath indexPathForRow:indexToDelete inSection:0]]];
            } completion:nil]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T23:13:28.840

当您调用 deleteItemsAtIndexPaths: 时，检查您的集合视图是否正忙于其他事情。我在使用 insertItemsAtIndexPaths: 方法时遇到了同样的问题，结果证明这是由我的代码中的错误引起的——我在调用 [my collectionView reloadData] 后立即调用了 [myCollectionView insertItemsAtIndexPaths:] 。因此，在调用 insertItemsAtIndexPaths 的那一刻：我的集合视图正在重新加载其数据。在我修复了这个错误之后，断言失败的问题就消失了。

# java - 何时将连接返回到 JPA 应用程序中的连接池？

> ID：13707183
> 
> 赞同：7
> 
> 时间：2012-12-04T16:17:04.707
> 
> 标签：java, jpa, database-connection, connection-pooling, entitymanager

如果我调用，连接是否仅返回到 JPA 应用程序中的连接池

```
entityManager.close(); 
```

?

支持实体管理器的连接可以在其生命周期内更改吗？

在此先感谢 mojoo

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T16:21:36.300

JPA 规范没有定义这些东西，它由实现来管理连接。当事务处于活动状态时，您可以安全地假设连接在提交之前是相同的，原因很明显。一旦 txn 结束，它可能会被退回，或者可能会根据实施情况被保留（你没有提到你的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T14:19:25.767

这取决于 JPA 实现和配置。

默认情况下，在 EclipseLink 中，连接仅在活动（脏）事务期间保持。即从第一次修改或锁定，直到提交或回滚。对于非事务性查询，按需获取连接并在查询执行后返回。这允许最大程度地使用连接池。所以，通常 em.close() 什么都不做。

您可以使用“eclipselink.jdbc.exclusive-connection.mode”持久性单元属性进行配置。“始终”将在 EntityManager 的生命周期内保持连接。

您还可以将不同的连接池用于事务，而不是非事务性读取。这对 JTA 很有用，因为您可以使用非 JTA 数据源进行读取。

# objective-c - 正则表达式提取两个字符或标签之间的所有子字符串

> ID：13707187
> 
> 赞同：7
> 
> 时间：2012-12-04T16:17:11.877
> 
> 标签：objective-c, regex

我需要提取由两个字符（或者可能是两个标签）包围的所有字符串

这是我到目前为止所做的：

```
 NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\[(.*?)\\]" options:NSRegularExpressionCaseInsensitive error:NULL];

    NSArray *myArray = [regex matchesInString:@"[db1]+[db2]+[db3]" options:0 range:NSMakeRange(0, [@"[db1]+[db2]+[db3]" length])] ;

    NSLog(@"%@",[myArray objectAtIndex:0]);
    NSLog(@"%@",[myArray objectAtIndex:1]);
    NSLog(@"%@",[myArray objectAtIndex:2]); 
```

在 myArray 中有正确的三个对象，但 NSlog 打印：

```
<NSSimpleRegularExpressionCheckingResult: 0x926ec30>{0, 5}{<NSRegularExpression: 0x926e660> \[(.*?)\] 0x1}
<NSSimpleRegularExpressionCheckingResult: 0x926eb30>{6, 5}{<NSRegularExpression: 0x926e660> \[(.*?)\] 0x1}
<NSSimpleRegularExpressionCheckingResult: 0x926eb50>{12, 5}{<NSRegularExpression: 0x926e660> \[(.*?)\] 0x1} 
```

而不是 db1、db2 和 db3

我哪里错了？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T16:25:32.093

根据[文档](https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/occ/instm/NSRegularExpression/matchesInString%3aoptions%3arange%3a) 返回一个s 不是s`matchesInString:options:range:`的数组。您将需要遍历结果并使用范围来获取子字符串。[`NSTextCheckingResult`](https://developer.apple.com/library/mac/documentation/AppKit/Reference/NSTextCheckingResult_Class/Reference/Reference.html#//apple_ref/occ/cl/NSTextCheckingResult)`NSString`

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\[(.*?)\\]" options:NSRegularExpressionCaseInsensitive error:NULL];

NSString *input = @"[db1]+[db2]+[db3]";
NSArray *myArray = [regex matchesInString:input options:0 range:NSMakeRange(0, [input length])] ;

NSMutableArray *matches = [NSMutableArray arrayWithCapacity:[myArray count]];

for (NSTextCheckingResult *match in myArray) {
     NSRange matchRange = [match rangeAtIndex:1];
     [matches addObject:[input substringWithRange:matchRange]];
     NSLog(@"%@", [matches lastObject]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T15:40:49.537

或这个

```
NSArray *results = [@"[db1]+[db2]+[db3]" matchWithRegex:@"\\[(.*?)\\]"];

//result = @["db1","db2,"db3"] 
```

与此类别[https://github.com/damienromito/NSString-Matcher](https://github.com/damienromito/NSString-Matcher)

# css - How do I make my navbar expand/extend the entire page?

> ID：13707197
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:17:58.080
> 
> 标签：css, wordpress, navbar

I have purchased the following wordpress theme: [http://themeforest.net/item/healthpress-health-and-medical-wordpress-theme/full_screen_preview/3138064](http://themeforest.net/item/healthpress-health-and-medical-wordpress-theme/full_screen_preview/3138064)

I need to make the navbar extend along the entire width of page, can someone help? Here's an image to show what i'm trying to do and Here's the CSS code for the navbar.

[http://i.stack.imgur.com/ZLdsF.jpg](http://i.stack.imgur.com/ZLdsF.jpg)

```
#header .main-nav { 
                    height: 21px; 
                    width: 100%; 
                    padding: 0px 0px 20px 0px;
                    margin-top: 90px;
                    background-color:#46a1b4; 
                    background-clip: padding-box; 
                    -moz-background-clip: padding-box; 
                    -webkit-background-clip: padding; 
                    border-radius: 3px; 
                    -moz-border-radius: 3px; 
                    -webkit-border-radius: 3px;  
                    background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(255,255,255,.1)), to(rgba(0,0,0,0))); /* Saf4+, Chrome */
                    background-image: -webkit-linear-gradient(top, rgba(255,255,255,.1), rgba(0,0,0,0)); /* Chrome 10+, Saf5.1+ */
                    background-image:    -moz-linear-gradient(top, rgba(255,255,255,.1), rgba(0,0,0,0)); /* FF3.6 */
                    background-image:     -ms-linear-gradient(top, rgba(255,255,255,.1), rgba(0,0,0,0)); /* IE10 */
                    background-image:      -o-linear-gradient(top, rgba(255,255,255,.1), rgba(0,0,0,0)); /* Opera 11.10+ */
                    background-image:         linear-gradient(top, rgba(255,255,255,.1), rgba(0,0,0,0));
}
.ie7 #header .main-nav{ z-index:9600; }
.page-template-template-home-with-sidebar-php #header .main-nav,
.page-template-template-home-php #header .main-nav{ background-clip: padding-box; -moz-background-clip: padding-box; -webkit-background-clip: padding; position: absolute; left: 0px; bottom: 0px; border-radius: 3px 3px 0px 0px; -moz-border-radius: 3px 3px 0px 0px; -webkit-border-radius: 3px 3px 0px 0px; }
#header .main-nav > ul { float: left; }
.ie7 #header .main-nav > ul { z-index:9700; }
#header .main-nav > ul > li { float: left; border-right: 1px solid #54aec2; position: relative; }
#header .main-nav > ul > li:first-child { border-top-left-radius: 3px; -moz-border-radius-topleft: 3px; -webkit-border-top-left-radius: 3px; }
#header .main-nav > ul > li:last-child { border: none; }
#header .main-nav ul li a { display: inline-block; padding: 0px 20px; font-size: 13px; line-height: 41px; text-align: center; color: #fff; text-shadow: 1px 1px 0px #20606d; }
#header .main-nav ul li:hover { background-color: #377f8f; background-clip: padding-box; -moz-background-clip: padding-box; }
#header .main-nav ul li ul { display: none; width: 220px; padding: 12px 0px; background-color: #377f8f; position: absolute; top: 41px; left: 0px; z-index: 8899; border-bottom-left-radius: 3px; -moz-border-radius-bottomleft: 3px; -webkit-border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; -moz-border-radius-bottomright: 3px; -webkit-border-bottom-right-radius: 3px; }
.ie7 #header .main-nav ul li ul{ z-index:9800; }
#header .main-nav ul li ul li { width: 196px; height: 34px; padding: 0px 12px; position: relative; }
#header .main-nav ul li ul li a { display: inline-block; line-height: 34px; padding: 0px 9px;  border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px; }
#header .main-nav ul li ul li:hover { background-color: #2c6774; }
#header .main-nav ul li ul li ul { top: -12px; left: 220px; border-radius: 3px; -moz-border-radius: 3px; -webkit-border-radius: 3px; }
.ie7 #header .main-nav ul li ul li ul { z-index:9900; }
#header .main-nav .responsive-nav { display: none; width: 100%; margin:10px auto 0px; padding:5px; border:1px solid #CCC; } 
```

Any help will be highly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:21:13.503

这会成功的。

```
#header {
width: 100%;
height: 150px;
margin: 0px auto;
position: relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-10T18:53:28.827

导航栏的宽度设置为 100%，但它包含在宽度为 980 像素的标题标签中。通过 CSS 覆盖的唯一解决方案是将标题标签的宽度更改为 100%，这将影响整个网站顶部的布局。

我建议将您的覆盖放在子主题中。

[https://codex.wordpress.org/Child_Themes](https://codex.wordpress.org/Child_Themes)

# tfs - Can't connect to upgraded TFS 2008 Project Collection in TFS 2012

> ID：13707199
> 
> 赞同：0
> 
> 时间：2012-12-04T16:18:06.113
> 
> 标签：tfs

I have successfully installed TFS 2012 and migrated my TFS 2008 databases into TFS 2012\. From within Visual Studio I am able to connect to the new TFS server through my source control plugin and can see all of the projects that were imported from TFS 2008\. The problem is that when I click 'Connect' I am getting an exception that an HTTP 500 error has occurred. On the server I am getting a warning in the Event Viewer because of this URL:

http://[servername]:8080/tfs/tfs2008projectcollection/services/v3.0/locationservice.asmx/TeamFoundation/Administration/v3.0/LocationService.asmx

If I manually go to the above URL minus '/TeamFoundation/Administration/v3.0/LocationService.asmx' the page loads fine. Additionally if I remove '/tfs2008projectcollection/services/v3.0/locationservice.asmx' and navigate to http://[servername]:8080/tfs/TeamFoundation/Administration/v3.0/LocationService.asmx the page loads fine.

Thing is this only happens with the project collection that I imported from 2008\. I created a new project collection directly in TFS 2012 and I can connect to that project just fine within VS 2012\. Has anyone ran into this issue and, if so, what is the best way to correct it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:06:42.653

目前尚不清楚是什么导致/正在导致此问题，但在 TFS 服务器重新启动后，该问题不再表现出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T18:53:44.320

我也有这个问题。我有更新 4，这是一台新机器。我在[这里](http://www.datazx.cn/Fv7p5a/87/24as651w/2q7xs6/6jdfr6fs-99ji-fg6f-bi69-mjgfts6m9g8r23rsdfd.html)看到了问题，已尝试修复但没有运气。我也尝试过重启但没有运气。我在[这里](http://social.msdn.microsoft.com/Forums/vstudio/en-US/0d20917a-73ad-4c97-a524-21952f522e83/tfs-app-server-event-3000-tfs-services-tf53010-tf30065-invalid-url-locationserviceasmx?forum=tfsgeneral)看到了问题，似乎微软的唯一建议是到 2013 年。不幸的是，他们没有直接在 2008 年和 2013 年之间提供迁移路径，所以我不得不祈祷并希望在从 2008 年导入后升级机器，即使使用错误将解决问题。

谁能确认这个问题实际上在 2013 年得到了解决？

# php - How to insert time with am/pm format into the database

> ID：13707206
> 
> 赞同：0
> 
> 时间：2012-12-04T16:18:30.467
> 
> 标签：php, mysql

So im trying to insert a time using an input text field into a database table with data type TIME.

The format of time that I want to insert should be like this:

H:MM pm// example: 6:30 pm

The problem is the am/pm doesnt insert in my database table. Only the hour and minute.

Please give me idea how to solve this. Better with sample codes. Thanks.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T16:27:31.007

数据类型`TIME`用于存储时间数据类型 - 这意味着没有 AM/PM。将数据以 24 小时格式存储在您的数据库中，并使用以下之一在 PHP 或 MySQL 中使用 am/pm 将其格式化为 12 小时格式：

PHP：

```
$date = new DateTime($mysql_column['time']);
$date->format('h:i:s a'); 
```

或者：

```
$date = date('h:i:s a', strtotime($mysql_column['time'])); 
```

或 MySQL：

```
SELECT DATE_FORMAT('%h:%i:%s %p', time) FROM table; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T16:25:12.317

将其存储`TIME`为标准格式 ( `18:30:00`)，以及显示时所需的格式（使用`DateTime`对象或日期函数）。

MySQL 在存储时间数据时不支持额外的格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-17T08:56:02.773

我认为您想在数据库中使用实际格式在数据库中添加 jquery 时间选择器值。

这里我写了一些函数

```
function update_time($time){
    $ap = $time[5].$time[6];
    $ttt = explode(":", $time);
    $th = $ttt['0'];
    $tm = $ttt['1'];
    if($ap=='pm' || $ap=='PM'){
        $th+=12;
        if($th==24){
            $th = 12;
        }
    }
    if($ap=='am' || $ap=='AM'){
        if($th==12){
            $th = '00';
        }
    }
    $newtime = $th.":".$tm[0].$tm[1];
    return $newtime;
}
$time = update_time($_POST['time']); //here I am calling the function now you can insert the value in db 
```

您只需调用该函数并将返回的值插入数据库中。在打印时你可以做类似的事情`echo date("h:i A",strtotime($time));`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T16:21:38.760

将字段的类型更改为 varchar。TIME不能那样存储它。但是，请记住，如果您最终需要本地化结果，那么按照您的意愿存储它会使提供本地化结果变得更加困难。也就是说，如果您不存储时间戳本身，而是存储用户友好的表示，则时区支持变得困难。

编辑：或者，DATETIME 也可以，正如上面评论中所指出的那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T16:53:06.407

在您的日期变量之后尝试 .ToShortTimeString() 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T16:24:31.220

您可以在 PHP 中使用 DateTime 对象，它具有从任何格式创建时间对象的功能，并且还具有以任何格式输出时间的功能，例如

```
<?php
     $date = DateTime::createFromFormat('j-M-Y', '15-Feb-2009');
     echo $date->format('Y-m-d');
?> 
```

[http://php.net/manual/en/datetime.createfromformat.php](http://php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T16:25:26.730

您最好将字段类型更改为“VARCHAR (32)”，然后用 PHP 编写时间。

```
Example: date('m/d/y g:i:sa'); 
```

为什么要存储上午或下午？如果将日期/时间存储为 unix 纪元时间戳，则可以在程序中随意格式化日期 - 而不是数据库。

```
Example: time(); - Store this in an INT(8) field.
         date('m/d/y g:i:sa, $time()); - Output from DB like this. 
```

# objective-c - TabBarController didSelectViewController 不工作

> ID：13707207
> 
> 赞同：5
> 
> 时间：2012-12-04T16:18:33.487
> 
> 标签：objective-c, ios, xcode, uitabbarcontroller, uitabbar

我知道这是一个非常重复的话题，但我无法让它发挥作用。

MainTab.h：

```
#import <UIKit/UIKit.h>

@interface MainTab : UITabBarController<UITabBarControllerDelegate, UITabBarDelegate> {

     IBOutlet UITabBarController *tabController;

}

@property (nonatomic,retain) IBOutlet UITabBarController *tabController;

@end 
```

主选项卡

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    NSLog(@"main tab"); 
    [super viewDidLoad];

    self.tabBarController.delegate = (id)self;
    [self setDelegate:self];

    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

-(void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{

    NSLog(@"selected %d",tabBarController.selectedIndex);

} 
```

我找不到我缺少的东西，任何帮助将不胜感激。

现在我尝试将它链接到 MainStoryBoard：

![在此处输入图像描述](../Images/0203d9351071c24f4fc028608dbcd67a.png)

![在此处输入图像描述](../Images/6567e1cb9b74a4d9bb97f7c8a6381039.png)

但它不起作用，有什么联系？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T16:31:33.973

根据您的`@interface`（以及您随后的屏幕快照），`MainTab`是`UITabBarController`，所以以下行：

```
self.tabBarController.delegate = (id)self; 
```

应该只是：

```
self.delegate = self; 
```

您不想要 , 本身的`tabBarController`属性`UITabBarController`，也不想使用`self.tabBarController`语法。如果您尝试从其子控制器之一引用选项卡栏控制器，则仅使用该语法。在标签栏控制器本身中时，只需参考`self`.

* * *

因此，如果`MainBar`定义为：

```
//  MainBar.h

#import <UIKit/UIKit.h>

@interface MainBar : UITabBarController

@end 
```

和

```
//  MainBar.m

#import "MainBar.h"

@interface MainBar () <UITabBarControllerDelegate>

@end

@implementation MainBar

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.delegate = self;
}

-(void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    NSLog(@"selected %d",tabBarController.selectedIndex);
}

@end 
```

并且不要忘记设置标签栏控制器的类：

![界面构建器](../Images/0479e6f89a8637295d50ed746789c734.png)

连接检查器（我没有碰任何东西）看起来像：

![网点](../Images/66778ba789c81e18906f4c718eb38224.png)

# mysql - Django-MySQL enable Row_Format=Compress with syncdb

> ID：13707210
> 
> 赞同：2
> 
> 时间：2012-12-04T16:18:39.220
> 
> 标签：mysql, django, syncdb

I have an application in Django and MySQL, in my model I have several fields specified as TextField, when i run syncdb the tables for my model are created and the specified columns are created with longtext data type, so far so good.

But when I try, enter information in the table I get the following error

> DatabaseError: (1118, 'Row size too large. The maximum row size for the used table type, not counting BLOBs, is 8126\. You have to change some columns to TEXT or BLOBs ")

I changed the column type to Text and Blob, and did not solve the problem.

I've been reading about this error and is due to more than 8126bytes income information by row. So I changed the configuration of MySQL to work with the file type Barracuda instead of Antepode, which I have been reading allows compression of sending information over to a different file.

But this did not solve the problem, in the MySQL documentation ([https://dev.mysql.com/doc/refman/5.5/en/innodb-compression-usage.html](https://dev.mysql.com/doc/refman/5.5/en/innodb-compression-usage.html)) tells me that I have to specify `ROW_FORMAT = COMPRESSED` when i create the table, but this is done by syncdb,

Is there way to specify these settings when syncdb creates the tables or I have to create the tables manually without using syncdb?

Any other suggestions would be welcome, in my application I have to store multiple sheets and reports. I have defined a column in my table by section of the document.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:34:31.497

我解决了使用 innodb 在 MySQL 中添加大数据行的错误

> DatabaseError: (1118, 'Row size too large. 所用表类型的最大行大小，不包括 BLOB，为 8126。您必须将某些列更改为 TEXT 或 BLOB")

首先，我们必须将文件格式设置为 Barracuda 并在 MySQL 中为每个表全局变量启用一个文件：

> SET GLOBAL innodb_file_format = 梭子鱼；
> 设置全球 innodb_file_format_check = ON; SET GLOBAL innodb_format_max = 梭子鱼；设置全局 innodb_file_per_table = ON;

我使用 phpmyadmin 进行查询。

然后在运行 syncdb 之后，我们转到存在大行问题的表，转到选项卡 Operations->Table Options，然后将“ROW_FORMAT”修改为“COMPRESS”。

我希望这可以帮到你

# valgrind - 运行许多同时的 valgrind 进程时导致 mkstemp 失败的原因是什么？

> ID：13707211
> 
> 赞同：1
> 
> 时间：2012-12-04T16:18:41.473
> 
> 标签：valgrind, memcheck, mkstemp

我正在用 valgrind 测试一些软件。理想情况下，我希望一次打开 20 个或更多 valgrind 实例。但是，如果我并行运行超过 16 个实例，我会开始收到如下消息：

```
==30533== VG_(mkstemp): failed to create temp file: /tmp/valgrind_proc_30533_cmdline_269e37a6
==30533== VG_(mkstemp): failed to create temp file: /tmp/valgrind_proc_30533_cmdline_d6b675e7
==30533== VG_(mkstemp): failed to create temp file: /tmp/valgrind_proc_30533_cmdline_db46c594
==30533== VG_(mkstemp): failed to create temp file: /tmp/valgrind_proc_30533_cmdline_51cd683d
==30533== VG_(mkstemp): failed to create temp file: /tmp/valgrind_proc_30533_cmdline_86662832
==30533== VG_(mkstemp): failed to create temp file: /tmp/valgrind_proc_30533_cmdline_226a8983
==30533== VG_(mkstemp): failed to create temp file: /tmp/valgrind_proc_30533_cmdline_bb94a700
==30533== VG_(mkstemp): failed to create temp file: /tmp/valgrind_proc_30533_cmdline_532d4b39
==30533== VG_(mkstemp): failed to create temp file: /tmp/valgrind_proc_30533_cmdline_de4a957e
==30533== VG_(mkstemp): failed to create temp file: /tmp/valgrind_proc_30533_cmdline_fcc23adf
==30533== VG_(mkstemp): failed to create temp file: /tmp/valgrind_proc_30533_cmdline_f41d332c
valgrind: Startup or configuration error:
valgrind:    Can't create client cmdline file in /pathtomyproject/
valgrind: Unable to start up properly.  Giving up. 
```

一些进程（可能是其中的 1/3）反而因错误而终止

```
==30482== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 2 from 2)
==30482==
==30482== 1 errors in context 1 of 1:
==30482== Jump to the invalid address stated on the next line
==30482==    at 0x4C6: ???
==30482==    by 0x4005D2E: open_verify (dl-load.c:1914)
==30482==    by 0x4006362: open_path (dl-load.c:2175)
==30482==    by 0x4008799: _dl_map_object (dl-load.c:2407)
==30482==    by 0x400CFE1: openaux (dl-deps.c:65)
==30482==    by 0x400F175: _dl_catch_error (dl-error.c:178)
==30482==    by 0x400D6BD: _dl_map_object_deps (dl-deps.c:258)
==30482==    by 0x400350C: dl_main (rtld.c:1826)
==30482==    by 0x4015B23: _dl_sysdep_start (dl-sysdep.c:244)
==30482==    by 0x4005364: _dl_start (rtld.c:338)
==30482==    by 0x40016B7: ??? (in /lib/x86_64-linux-gnu/ld-2.15.so)
==30482==    by 0x4: ???
==30482==    by 0x7FF0007C6: ???
==30482==    by 0x7FF0007DD: ???
==30482==    by 0x7FF0007E2: ???
==30482==    by 0x7FF0007E9: ???
==30482==    by 0x7FF0007EE: ???
==30482==  Address 0x4c6 is not stack'd, malloc'd or (recently) free'd 
```

运行这些调用时，不会在 /tmp 中创建任何文件，但我使用的用户帐户确实具有 /tmp 的读取、写入和执行权限。

我在网上找不到有关此错误的任何信息，但也许这里的某个地方对此有所了解？

编辑：一些进一步的实验表明，事实上，一次最多可以同时运行 5 个进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T01:51:09.350

错误来自这里：

```
// coregrind/m_libcfile.c

/* Create and open (-rw------) a tmp file name incorporating said arg.
   Returns -1 on failure, else the fd of the file.  If fullname is
   non-NULL, the file's name is written into it.  The number of bytes
   written is guaranteed not to exceed 64+strlen(part_of_name). */

Int VG_(mkstemp) ( HChar* part_of_name, /*OUT*/HChar* fullname )
{
   HChar  buf[200];
   Int    n, tries, fd;
   UInt   seed;
   SysRes sres;
   const HChar *tmpdir;

   vg_assert(part_of_name);
   n = VG_(strlen)(part_of_name);
   vg_assert(n > 0 && n < 100);

   seed = (VG_(getpid)() << 9) ^ VG_(getppid)();

   /* Determine sensible location for temporary files */
   tmpdir = VG_(tmpdir)();

   tries = 0;
   while (True) {
      if (tries++ > 10)
         return -1;
      VG_(sprintf)( buf, "%s/valgrind_%s_%08x",
                    tmpdir, part_of_name, VG_(random)( &seed ));
      if (0)
         VG_(printf)("VG_(mkstemp): trying: %s\n", buf);

      sres = VG_(open)(buf,
                       VKI_O_CREAT|VKI_O_RDWR|VKI_O_EXCL|VKI_O_TRUNC,
                       VKI_S_IRUSR|VKI_S_IWUSR);
      if (sr_isError(sres)) {
         VG_(umsg)("VG_(mkstemp): failed to create temp file: %s\n", buf);
         continue;
      }
      /* VG_(safe_fd) doesn't return if it fails. */
      fd = VG_(safe_fd)( sr_Res(sres) );
      if (fullname)
         VG_(strcpy)( fullname, buf );
      return fd;
   }
   /* NOTREACHED */
} 
```

如您所见，如果有超过 10 个进程共享相同`pid`和`ppid`. 目前尚不清楚您是如何创建 20 个 valgrind 进程的——它们通常*不*应该共享`pid`。

您也许可以通过以下任一方式解决该问题

*   创建您的 Valgrind 实例，使它们不共享相同的`pid`，或
*   `TMPDIR`为每个 Valgrind 实例设置不同的目录。

# html - 是否可以使用纯 html 创建倒计时？

> ID：13707214
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:18:58.313
> 
> 标签：html

是否可以使用纯 HTML 创建倒数计时器？

我的意思是没有 javascript 或 iframe 或外部 CSS。只是基本的 HTML 和嵌入式样式属性 - 即`<h1 style="CSS GOES HERE">TEXT GOES HERE</h1>`.

这可能吗？

如果是这样，如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:22:36.847

您可以使用动画 gif。

html 看起来像这样。

```
<img src="countdown.gif" alt="countdown"> 
```

哪里`countdown.gif`是对您的倒计时图像的引用。

实际上创建图像留给读者作为练习。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T16:22:48.810

您可以使用`<meta http-equiv="refresh"`标签和一些静态页面拼凑一些东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:22:16.187

不是。HTML 是一种标记语言，而不是脚本语言。标记语言是静态的，您可以设置一次。如果您需要交互，则需要一种客户端脚本语言，例如 JavaScript。

> **边注**
> 
> 只有 CSS3 动画是可能的： http: [//codepen.io/WouterJ/details/brguf](http://codepen.io/WouterJ/details/brguf) 但请注意 CSS3 还不稳定，CSS3 动画 API 远非稳定。有关[canIUse的更多信息](http://caniuse.com/#feat=css-animation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T16:20:39.980

简而言之，没有。HTML 是完全静态的，除非您使用诸如 javascript 之类的东西使其成为动态的。

正如@SLaks 建议的那样，虽然可以使用 CSS3 动画，但旧浏览器不支持。

# r - How can I write a test function like this?

> ID：13707215
> 
> 赞同：2
> 
> 时间：2012-12-04T16:18:58.960
> 
> 标签：r

How can I write a function to check cases(x,y) by the two tests:

One

```
if y==rank(y) 
```

Two

```
xranks <- rank(x)
yranks <- rank(y)
meanx <- mean(xranks)
meany <- mean(yranks)
covariance.term <- cov(xranks-meanx,y-meany)
sd.x <- sd(xranks)
sd.y <- sd(yranks)
if -1<= covariance.term/(sd.x*sd.y) <=1 
```

and should return `TRUE` if both tests are passed, or `FALSE`, with warnings about which tests failed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:29:37.497

以下应该做你想要的，但由于你没有提供测试用例，我不确定它是否有效。

```
check.xy <- function(x,y) {
    xranks <- rank(x)
    yranks <- rank(y)
    meanx <- mean(xranks)
    meany <- mean(yranks)
    covariance.term <- cov(xranks-meanx,y-meany)
    sd.x <- sd(xranks)
    sd.y <- sd(yranks)
    testA <- all(y == rank(y))
    testB <- all(-1 <= covariance.term/(sd.x*sd.y) & covariance.term/(sd.x*sd.y) <=1)
    if (testA & testB) return(TRUE)
    else if (testA) warning("test two failed")
    else if (testB) warning("test one failed")
    else warning("tests one and two failed")
    FALSE
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:18:57.140

我认为在单个函数中定义每个测试，尤其是我们想要关于哪些测试失败的警告。

这两个测试共享相同的环境，这就是我将它们定义为嵌套函数的原因。

```
multitest <- function(x,y){
 test.covariance <- function(){
    xranks <- rank(x)
    yranks <- rank(y)
    meanx <- mean(xranks)
    meany <- mean(yranks)
    covariance.term <- cov(xranks-meanx,y-meany)
    sd.x <- sd(xranks)
    sd.y <- sd(yranks)
    cov.norm  <- covariance.term/(sd.x*sd.y) 
    res <- cov.norm  > -1 && cov.norm < 1
    if(is.na(res) || res > 0) warning('test covariance range failed',.call = FALSE)
    res
}
 test.rank <- function(){
   res <- all(y==rank(y))
   if(!res) warning('test rank failed')
   res
 }
 res <- test.covariance() && test.rank()
 !is.na(res)
} 
```

一些测试：

成功

```
x <- 1:10
y <- 1:10
multitest(x,y)
[1] TRUE 
```

失败等级

```
x <- rnorm(10)
y <- rnorm(10)
multitest(x,y)
[1] FALSE
Warning message:
In test.rank() : test rank failed 
```

失效协方差

```
x <- rep(10,10)
y <- 1:10
multitest(x,y)
[1] FALSE
Warning message:
In test.covariance() : test covariance range failed 
```

# java - API 15 的 ActionBar 兼容性问题

> ID：13707218
> 
> 赞同：5
> 
> 时间：2012-12-04T16:19:19.650
> 
> 标签：java, android, android-actionbar

我在适用于 Android 的 API 级别 15 上遇到 actionBar 兼容性问题。向上按钮不适用于此 API 级别

我使用 android-sdk 文件夹中提供的名为“actionbarcompat”的示例项目，因此我已经导入了所有类，并使用 ActionBarActivity 扩展了我的所有活动。我还在清单中为我的所有活动添加了这段代码：

```
<activity
    android:name="fr.appsolute.rescue.MyActivity"
    android:label="@string/title_activity_info"
    android:parentActivityName=".MainActivity"
    android:screenOrientation="portrait" >
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value=".MainActivity" />
</activity> 
```

在我的 ActionBarActivity 中：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch(item.getItemId()){
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

这允许用户触摸向上按钮（带有应用程序图标）以返回到 MainActivity

此代码适用于 Android 2.3.3 和 4.2，但不适用于 4.0.1，我不明白为什么。当用户触摸向上按钮时，没有任何反应。

谢谢你的帮助。

PS：我不能使用外部库，我必须使用本机代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:31:40.027

不知道为什么它不起作用。我同意奇怪的是它只在 API 15 上失败。

调用的替代方法`NavUtils.navigateUpFromSameTask(this)`可能是调用`finish()`。这将关闭您当前的活动并转到堆栈中的上一个活动。它可能会给你同样想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T13:37:31.993

使用 ActionBarSherlock 解决了它

# web - LIKES done by me on my own page don't show up anymore after making an app to post to my page's fanpage

> ID：13707222
> 
> 赞同：4
> 
> 时间：2012-12-04T16:19:45.343
> 
> 标签：web, facebook-like, facebook-apps, facebook-page

I really hope someone can tell me more about what's going on, because I spent days searching the net and for the life of me can't say what is going on.

Here's what happened. I have a website 4nieuws.nl . On every article's page I put a like button using the Javascript SDK. All worked well. On facebook I created a fanpage for the website, facebook.com/4nieuws and every now and again I would copy an interesting article there. The like button and Javascript SDK on 4nieuws.nl uses the APP Id from an app I created specifically for that purpose.

Then I thought I might automate to publish the most popular articles on the fanpage using the PHP api. I set about getting the proper authorization key using the sequence explained on this page: [http://www.typeoneerror.com/articles/post/permanent-facebook-sessions-and-posting-as-a-page](http://www.typeoneerror.com/articles/post/permanent-facebook-sessions-and-posting-as-a-page)

For this to work I authorized the previously mentioned app to publish on the facebook fanpages that I am admin of. And this works.

Now for the strange part. Ever since I authorized the app, if I go to 4nieuws.nl and like a page, or even 'post to facebook', the button shows 1 more like. But the like message never shows up on my personal wall. My wife, logged in to her own facebook account, gets a notification that I liked a page, but when she clicks the notification she is sent to a Facebook 404 page. When I subsequently reload the article, my 'like' is not there anymore.

Has anyone ever come across something like this ? I'm a bit anxious because I am not sure if other peoples likes on 4nieuws.nl are working as it should. I do see likes on pages but have no idea if those likes are actually registering on peoples walls.

Any help greatly appreciated.

# java - 如何将数组写入文件Java

> ID：13707223
> 
> 赞同：14
> 
> 时间：2012-12-04T16:19:47.090
> 
> 标签：java, arrays, file, loops, bufferedwriter

我一直在尝试将数组写入文件。我知道如何将整数或字符串写入文件，但带上数组让我感到困惑。我现在正在使用这个：

```
public static void write (String file, int[]x) throws IOException{
    BufferedWriter outputWriter = null;
    outputWriter = new BufferedWriter(new FileWriter(filename));
    outputWriter.write("hi");// Here I know i cant just write x[0] or anything. Do i need 
                             //to loop in order to write the array?
    outputWriter.newLine();
    outputWriter.flush();  
    outputWriter.close();  

} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T16:21:32.240

您可以使用`ObjectOutputStream`该类将对象写入底层流。

```
outputStream = new ObjectOutputStream(new FileOutputStream(filename));
outputStream.writeObject(x); 
```

并像阅读`Object`背面一样 -

```
inputStream = new ObjectInputStream(new FileInputStream(filename));
x = (int[])inputStream.readObject() 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-04T16:39:07.143

就像其他人说的那样，您可以遍历数组并一一打印出元素。要使输出显示为数字而不是您看到的“字母和符号”，您需要将每个元素转换为字符串。所以你的代码变成了这样：

```
public static void write (String filename, int[]x) throws IOException{
  BufferedWriter outputWriter = null;
  outputWriter = new BufferedWriter(new FileWriter(filename));
  for (int i = 0; i < x.length; i++) {
    // Maybe:
    outputWriter.write(x[i]+"");
    // Or:
    outputWriter.write(Integer.toString(x[i]);
    outputWriter.newLine();
  }
  outputWriter.flush();  
  outputWriter.close();  
} 
```

如果您只想打印出类似的数组`[1, 2, 3, ....]`，则可以用这个衬里替换循环：

```
outputWriter.write(Arrays.toString(x)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T16:28:24.360

如果你对 Apache commons lib 没问题

```
outputWriter.write(ArrayUtils.join(array, ",")); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-04T16:25:18.990

只需遍历数组中的元素。

前任：

```
for(int i=0; numOfElements > i; i++)
{
outputWriter.write(array[i]);
}
//finish up down here 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-21T14:50:12.097

```
private static void saveArrayToFile(String fileName, int[] array) throws IOException {
    Files.write( // write to file
        Paths.get(fileName), // get path from file
        Collections.singleton(Arrays.toString(array)), // transform array to collection using singleton
        Charset.forName("UTF-8") // formatting
    );
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T16:30:33.463

如果结果是供人类阅读并且数组的元素具有正确`toString()`定义的...

```
outputString.write(Arrays.toString(array)); 
```

# java - 单击注销按钮终止会话并重定向到登录页面

> ID：13707225
> 
> 赞同：10
> 
> 时间：2012-12-04T16:20:02.473
> 
> 标签：java, javascript, jsp, session

我在 JSP 中有以下代码：

```
<%
    if(session.getAttribute("Username") == null || session.getAttribute("Username") == "_INVALID_")
    {
        response.sendRedirect("LoginPage.html");
    }
%>

<form>
    <input type="button" value="Change Account Details" onClick="location.href='ChangeDetails.jsp'">
    <br></br>
    <input type="button" value="Add Customers" onClick="location.href='AddCustomers.jsp'">
    <br></br>
    <input type="button" value="Manage Flights" onClick="location.href='ManageFlights.jsp'">
    <br></br>
    <input type="button" value="Book Flights" onClick="location.href='BookFlights.jsp'">
    <br></br>
    <input type="button" value="Log Out" onClick="location.href='LoginPage.html'">
</form> 
```

当用户单击注销按钮时，我想将他重定向到登录页面并终止当前会话。我已经成功完成了重定向部分，但我不知道如何终止会话。请问这怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-04T16:30:24.223

为了终止当前会话，您基本上需要调用[`HttpSession#invalidate()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#invalidate%28%29)并执行重定向到登录或主页。这段代码应该放在POST 请求调用的[servlet](https://stackoverflow.com/tags/servlets/info)`doPost()`的方法中。

例如

```
<form action="${pageContext.request.contextPath}/logout" method="post">
    <input type="submit" value="Logout" />
</form> 
```

和

```
@WebServlet("/logout")
public class LogoutServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        request.getSession().invalidate();
        response.sendRedirect(request.getContextPath() + "/LoginPage.html");
    }

} 
```

* * *

**与具体问题无关**，您的用户名检查代码不在正确的位置。您不应该在每个 JSP 页面上复制粘贴相同的代码。您应该在[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)的一个地方执行这项工作。应尽可能[避免](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)JSP 文件中的 Java 代码。

此外，当最终用户使用浏览器的后退按钮返回历史记录时，还有另一个潜在问题。默认情况下，浏览器将缓存所有响应，因此后退按钮可能会显示浏览器缓存中的页面，而不是直接从服务器请求全新的页面。为了解决这个问题，请参阅此相关问题[防止用户在注销后看到以前访问过的安全页面](https://stackoverflow.com/questions/4194207/prevent-user-from-going-back-to-the-previous-secured-page-after-logout)

最后但同样重要的是，您有一些非常奇怪的 HTML。`onClick`导航按钮？用户和 SEO 如何不友好。请改用普通`<a>`链接。对于按钮的外观，请添加一些 CSS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:23:37.263

你应该看看 HttpSession 的[invalidate()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#invalidate%28%29)方法。可以通过 HttpServletRequest [getSession()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28%29)方法检索会话。

您还应该查看 Expires、Cache-Control、Pragma http 标头，如：[防止用户在注销后返回上一个安全页面](https://stackoverflow.com/questions/4194207/prevent-user-from-going-back-to-the-previous-secured-page-after-logout)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-22T09:58:14.260

试试这个杀死会话

```
HttpSession newsession = request.getSession(false);
    if (newsession != null) 
    {
         newsession.invalidate();

    }

   response.sendRedirect("../index.jsp"); 
```

# django - How do I split up a django project into seperate already created applications?

> ID：13707228
> 
> 赞同：2
> 
> 时间：2012-12-04T16:20:10.073
> 
> 标签：django, git

I have a Django project with some applications from the directories of some github repositories. I've made some changes into them and would like to push the changes to my forks of the projects. The project directory looks like this:

```
mainproject
--foo
--bar 
```

where foo and bar are two directories of different github repositories. The mainproject is itself a git repository. The repository containing foo looks like this:

```
project
--foo
--someotherfolder 
```

Ideally I'd like to keep the applications within the mainproject folder.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:09:14.343

我在项目中管理它的方式是使用 git 子模块。

我有一个依赖项文件夹（在我的主项目应用程序中），我在其中跟踪我的所有依赖项，即第三方 django 应用程序。

你需要做

git submodule add /foo.git /foo git submodule add /bar.git /bar

您可能会发现此链接很有帮助。[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

# javascript - innerHTML 会在 DOM 树中创建节点吗？

> ID：13707229
> 
> 赞同：5
> 
> 时间：2012-12-04T16:20:13.850
> 
> 标签：javascript, html, dom, memory

如果我这样做：

```
document.getElementById("myDiv").innerHTML = "some_html_code"; 
```

如果我使用它会在我的 DOM 三个中创建节点`appendChild()`吗？

问的原因是我正在创建一个内存使用量必须很低的移动应用程序。我不想创建很多节点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T16:24:49.863

它与

```
var div = document.getElementById("myDiv");

while( div.firstChild ) {
    div.removeChild( div.firstChild );
}

div.appendChild( document.createTextNode("a_html_string") ); 
```

当然，如果`"html_string"`你的意思是一个由复杂 html 组成的字符串，那么当然节点是从 html 适当地创建的（元素节点、注释节点、文本节点等）。但是一个简单的文本字符串只是一个文本节点。

因此，如果您的 html 字符串为`'<div id="hello">world</div>'`，则大致为：

```
var div = document.getElementById("myDiv");

while( div.firstChild ) {
    div.removeChild( div.firstChild );
}

var anotherDiv = document.createElement("div");
anotherDiv.setAttribute("id", "hello");
anotherDiv.appendChild(document.createTextNode("world"));
div.appendChild(anotherDiv); 
```

一个看起来很单纯的`.innerHTML`setter 所发生的事情可能令人震惊，这甚至不包括解析 html。

重要的是要注意这些都不是垃圾，所有这些创建的对象都是必要的。为确保您只创建必要的节点，请不要在节点之间使用不必要的空格。例如

```
<span>hello</span> <span>world</span> 
```

是 3 个文本节点，但

```
<span>hello</span><span> world</span> 
```

只有 2 个文本节点。

很久以前，我创建了一个有趣的[jsfiddle](http://jsfiddle.net/mFNud/10/)，它可以将 html 转换为所有那些 .innerHTML 讨厌者的“DOM 代码”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T16:24:56.650

是的，`innerHTML`将被解析并创建节点。没有办法绕过它，DOM 是由节点组成的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:21:19.137

它将创建字符串“a_html_string”并将其显示出来。但您也可以附加元素：

```
document.getElementById("myDiv").innerHTML = "<a> Link </a>"; // will be displayed "Link" 
```

# visual-studio-2010 - 为什么由于环境变量，Visual Studio 在打开解决方案时会崩溃？

> ID：13707234
> 
> 赞同：0
> 
> 时间：2012-12-04T16:20:28.710
> 
> 标签：visual-studio-2010

带有 SP1 的 Visual Studio 2010 在打开解决方案时崩溃。调试的视觉工作室和以下是抛出的异常。

以下是异常日志：

```
MSB0001: Internal MSBuild Error: Environment variable name or value is too long.
=============
System.ArgumentException: Environment variable name or value is too long.
   at System.Environment.SetEnvironmentVariable(String variable, String value)
   at Microsoft.Build.BackEnd.InProcNode.HandleShutdown(Exception& exception)
   at Microsoft.Build.BackEnd.InProcNode.Run(Exception& shutdownException) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:21:26.873

发现机器上的环境变量太长去掉了一些不必要的。

# responsive-design - 如何根据正文类和媒体查询选择内容布局？

> ID：13707235
> 
> 赞同：1
> 
> 时间：2012-12-04T16:20:32.570
> 
> 标签：responsive-design, media-queries, compass-sass, fluid-layout, susy-compass

所以这就是问题所在。我对 Susy 有点陌生，所以我不完全确定完成此任务的最佳方法，但我希望根据 body 类和已在下面设置的媒体查询将布局应用于 .hfeed div .

这就是为什么。我正在为 WordPress 执行此操作，并且使用应用于正文的 CSS 类来设置不同的布局。具体来说，这两个类是 .full-width-content 和 .content-sidebar。我需要选择器跨越整个容器或分别位于当前定义的区域。因此，我想要设置样式的特定选择器将是“.full-width-content .hfeed”和“.content-sidebar .hfeed”。我尝试将它们设置为包含不同的容器，但这不起作用。

我是否应该简单地将这一部分从定义的网格中分离出来并按类选择然后进行媒体查询？

在 susy 中实现这一目标的最佳方法是什么？

```
//susy grid definitions, footer sits outside the susy grid def

#wrap {
    @include container( $total-columns, $break-tablet, $break-desktop );

    @include at-breakpoint( $break-tablet ) {
        #header     { @include span-columns( $break-tablet omega ); }
        #title-area { @include span-columns( 5, $break-tablet ); }
        #header .widget-area { @include span-columns( 4 omega, $break-tablet ); }
        #nav        { @include span-columns( $break-tablet omega ); }
        .hfeed      { @include span-columns( 6, $break-tablet ); }
        #sidebar    { @include span-columns( 3 omega, $break-tablet ); }
    }

    @include at-breakpoint( $break-desktop ) {
        #header     { @include span-columns( $break-desktop omega ); }
        #title-area { @include span-columns( 5, $break-desktop ); }
        #header .widget-area { @include span-columns( 5 omega, $break-desktop ); }
        #nav        { @include span-columns( $break-desktop omega ); }
        .hfeed      { @include span-columns( 7, $break-desktop ); }
        #sidebar    { @include span-columns( 4 omega, $break-desktop ); }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:45:52.213

对我来说，这是一个 CSS 特殊性的顺序问题。我从 WordPress 的悲惨经历中知道，如果您要从 21-11 之类的东西制作一个儿童主题，那么您将为此付出很多努力。因此，如果您尝试进行更改但不起作用 - 请确保检查您的元素并查看您的规则是否被其他样式应用或覆盖。我相信你已经知道我们的 WordPress 主题有很多这个问题。

根据您设置 CSS 结构的方式：

• 移动优先 - 小屏幕到大屏幕 • 大屏幕到小屏幕

您的代码可能如下所示：

CSS顶部的大屏幕或小屏幕的默认样式-首先处理>然后>媒体查询以在屏幕尺寸更改时覆盖这些指令>发生这种情况时会更改的任何内容都在这里。

/* 默认样式 */ body {...}

/* 智能手机样式 */

@媒体查询{

body.class .container { ... }

}

我不确定这是否对你有帮助，我只是想帮助你一些方向。我很想看看其他人对此有什么看法。

使用 WordPress 主题和 SASS 时要记住的一点是，确保您了解 CSS 特定性的成本——您越具体，生成页面的时间就越多。使用 SASS 很容易变得过于具体。

祝你好运，我的朋友。抱歉，如果这没有帮助。

# cocoa - ZipZAP uncompressing ZIP file

> ID：13707236
> 
> 赞同：0
> 
> 时间：2012-12-04T16:20:34.503
> 
> 标签：cocoa, unzip, zipzap

I need to uncompress content of ZIP file into selected directory. I did make:

```
ZZArchive* archive = [ZZArchive archiveWithContentsOfURL:[NSURL fileURLWithPath:@:"blahblah.zip"]];
for (NSUInteger index = 0, count = archive.entries.count; index < count; ++index)
{
  ZZArchiveEntry* archiveEntry = archive.entries[index];
  NSString  *inZipFileName = nextEntry.fileName;
} 
```

But how to uncompress archiveEntry into filename inZipFileName?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:06:30.230

最后，很简单：

```
NSData *data = [nextEntry data];
[data writeToFile:@"uncompressed_filename" atomically:NO]; 
```

维尼，维迪，维西...

# android - 从命令行安装 android 旧系统映像 (ABI)

> ID：13707238
> 
> 赞同：13
> 
> 时间：2012-12-04T16:20:44.303
> 
> 标签：android, command-line, android-emulator

从 sdk 管理器中，您可以轻松地勾选复选框，并`ARM EABI v7a System Image`安装系统映像（例如 ），并可用于创建 AVD。

我的问题是我试图创建 AVD 的系统是无头的，所以我无法打开 sdk 管理器。我被迫从命令行安装系统映像。

通过运行很容易安装目标`$ android update sdk --no-ui`（所有实际安装的目标，但没有系统映像，除了最新的目标“android-17”）。现在，如何为“android-15”安装系统映像？

当我尝试`$ android update sdk --no-ui --filter "sysimg-15"`结果是

```
Error: Ignoring unknown package filter 'sysimg-15'.
Warning: The package filter removed all packages. There is nothing to install.
         Please consider trying to update again without a package filter. 
```

不幸的是 google/stackoverflow 并没有帮助我。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-06T14:33:15.043

选项`--all`or`-a`是答案：

```
android update sdk --no-ui --all --filter "sysimg-15" 
```

不包括`--all`，android 更新程序只考虑最新的包（sysimg-17）而忽略旧的包。包含所有软件包`-a`允许您过滤（并因此安装）任何 sysimg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:28:26.657

在这种情况下是否可以通过 X11 转发使用 GUI？

使用 Linux：[这里](http://www.cyberciti.biz/tips/linux-mac-osx-x11-forwarding-over-ssh-howto.html)

使用 Windows：[这里](http://tldp.org/HOWTO/XDMCP-HOWTO/ssh.html)

# c# - 寻找阻止 TOR 的良好解决方案

> ID：13707239
> 
> 赞同：0
> 
> 时间：2012-12-04T16:20:49.403
> 
> 标签：c#, asp.net, windows, tor

我正在运行一个 asp.net mvc 网站，我想阻止每个通过 TOR 访问我的网站的用户。现在我有两个解决方案：

1.  每小时下载一次 TOR 出口节点列表，将该列表存储在内存中，并使用该列表检查每个请求 IP 地址。
2.  尝试使用 Windows 防火墙阻止 TOR 出口节点 - 我认为这会更好，但我不知道该怎么做。

还有其他可能的解决方案吗？你们中的任何人可能有与我类似的问题吗？你是怎么解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:21:19.393

答案绝对是您列出的第二个选项。无论您使用哪种解决方案，您都必须经常下载已知出口节点 IP 的列表，但使用已经存在的防火墙比滚动您自己的原始副本要简单得多。

如何将 IP 添加到防火墙取决于您的 Windows 版本。可以在[此处](https://stackoverflow.com/questions/4382933/programmatically-add-ip-to-server-2008-firewall-rule)找到以前的 StackOverflow 问题，其答案包括解释如何通过 Windows Server 2008 防火墙以编程方式阻止 IP 地址的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-07T07:37:30.233

[这里](https://github.com/RD17/DeTor)( [https://github.com/RD17/DeTor](https://github.com/RD17/DeTor) ) 是一个简单的 REST API，它使用[TorDNSEl](https://www.torproject.org/projects/tordnsel.html.en)来确定请求是否来自 TOR 网络。例如，我认为从 C# 和 RESTSharp 中使用它会非常简单。

请求是： `curl -X GET http://detor.ambar.cloud/`。

回应是 `{ "sourceIp": "104.200.20.46", "destIp": "89.207.89.82", "destPort": "8080", "found": true }`

作为奖励，您可以向您的网站添加徽章以检测用户是否来自 TOR：

`<img src='http://detor.ambar.cloud/badge' />`

# tomcat - Cloudbees：如何覆盖 Cloudbees Tomcat 应用程序的 jvm 版本：

> ID：13707245
> 
> 赞同：2
> 
> 时间：2012-12-04T16:21:06.967
> 
> 标签：tomcat, jvm, cloudbees

我正在使用 Cloudbees Jenkind 构建和部署基于 Tomcat 的 Web 应用程序。看起来我选择 JDK 1.7 的 Jenkinds 构建与 Cloudbees Tomcat 使用的默认 jvm 版本之间存在 jvm 不匹配。

如何为 cloudbees Tomcat jvm 设置 jvm 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:09:53.747

运行 SDK 命令：

```
bees config:set -a <account>/<appId> -Rjava_version=1.7 
```

这将“运行时参数”java_version 设置为 1.7 (java 7)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:14:26.993

我发现无论你为 Jenkins 进行什么设置（包括构建到 1.7），在你使用上面提到的 SDK 命令之前，它都不会运行 1.7 的应用程序。目前似乎没有基于 Web 的配置选项来执行此操作。好消息是，一旦您发出命令，设置就会生效，所有未来的部署都将使用 Java 7。

# xna - 多骨旋转之谜

> ID：13707249
> 
> 赞同：1
> 
> 时间：2012-12-04T16:21:28.110
> 
> 标签：xna, rotation, quaternions, 3d-modelling

我正在使用四元数和 XNA 蒙皮模型示例（现在已有数周......）。我从一些开源传感器板上收到了两组四元数，这些天你可以在网上购买。我能够编写一些代码来接收这些四元数，并且能够用它们旋转四肢。现在我的问题如下。在我的示例中，我使用的是右上臂和右下臂，我可以分别旋转它们。我的初始位置如下图所示，非常完美。

[http://i.imgur.com/c7qei.png](http://i.imgur.com/c7qei.png) “初始位置”

现在，当我想向前旋转我的右臂时，我应该有我的最终位置，如下图右侧所示。但不知何故，结果是左侧的一个位置，但我真正的“物理”手臂指向前方。

[http://i.imgur.com/tXCp6.png](http://i.imgur.com/tXCp6.png) “理想的最终位置（右），真正的错误位置（左）”

有些下臂无法补偿上臂的旋转。我确信我错过了一小步。下面我把我正在使用的代码的关键部分

```
 protected override void Update(GameTime gameTime)
    {
        HandleInput();

        UpdateCamera(gameTime);

        // Read gamepad inputs.
        float initposition = currentGamePadState.ThumbSticks.Right.X;
        float armRotation = Math.Max(currentGamePadState.ThumbSticks.Right.Y, 0);

        // these quaternions are received from bluetooth
        Upper.Z = Fq1;
        Upper.Y = -Fq2;
        Upper.X = -Fq3; // set 1 quaternions
        Upper.W = Fq4;
        //***************************

        forearm.Z = Uq1;
        forearm.Y = -Uq2;
        forearm.X = -Uq3;
        forearm.W = Uq4; // set 2 quaternions

        // set initial position
        if (initialpos == true)
        {
            initposition = 0.9f;
            R_forTransform = Matrix.CreateRotationY(initposition);

            R_forarminderinit = skinningData.BoneIndices["R_UpperArm"];
            L_forTransform = Matrix.CreateRotationY(-initposition);
            L_forTransform = Matrix.CreateRotationX(-initposition);
            L_forTransform = Matrix.CreateRotationZ(-initposition);
            L_forarminderinit = skinningData.BoneIndices["L_UpperArm"];

         }

        // Create rotation matrices for the upper and lower arm bones.

        Matrix upperarmTransform = Matrix.CreateFromQuaternion(Upper);
        Matrix forearmTransform = Matrix.CreateFromQuaternion(forearm);

        animationPlayer.GetBoneTransforms().CopyTo(boneTransforms, 0);
        if (initialpos == true)
        {
            boneTransforms[R_forarminderinit] = R_forTransform * boneTransforms[R_forarminderinit];
            boneTransforms[L_forarminderinit] = L_forTransform * boneTransforms[L_forarminderinit];
        }

        int forearmindex = skinningData.BoneIndices["R_Forearm"];
        int upperarmindex = skinningData.BoneIndices["R_UpperArm"];
        boneTransforms[upperarmindex] = upperarmTransform * boneTransforms[upperarmindex];
        boneTransforms[forearmindex] = (forearmTransform) * boneTransforms[forearmindex];
        animationPlayer.UpdateWorldTransforms(Matrix.Identity, boneTransforms);
        animationPlayer.UpdateSkinTransforms();
        UpdateBoundingSpheres();
        base.Update(gameTime);
    } 
```

我想问你能不能帮我解开这个谜。我希望我在描述我的问题时尽可能清楚。此外，我要提前感谢您的努力。

你的

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:45:11.423

在我看来，您有一些混淆的参考框架。这是我认为我所看到的：

您的外部传感器报告它们相对于世界的方向。另一方面，您的渲染代码处理上臂参考框架中的下臂。

如果我们假设初始方向是**q_u = [0,0,0,1]**和**q_l=[0,0,0,1]**，当您旋转手臂指向前方时，新方向都是**[0,. 707,0,.707]**或类似的东西，因为两个臂段都经历了*相对于世界的***π/2** 旋转。

 *渲染手臂时，将*整个*手臂（不仅仅是上臂）**旋转 q_u**。这是有道理的，因为您要确保肘部保持连接。但随后您将下臂旋转**q_l**，它已旋转了应有的两倍，因为它保持了肩部的旋转。如果您将手臂伸直，但将身体转过来，您会看到同样的事情发生：上臂会旋转身体旋转的量，而下臂会再次旋转同样的量。

处理此问题的最简单方法可能是从**q_l中删除****q_u**。如果**q_k**是下臂*相*对于上臂的旋转，则**q_k** = **q_u'** * **q_l**其中**q_u'**是逆四元数（只是取反分量）。*************`w`**************

# c# - .Net 实体多对多 SaveChanges

> ID：13707251
> 
> 赞同：3
> 
> 时间：2012-12-04T16:21:34.267
> 
> 标签：c#, .net, entity-framework

我一直在使用 DbContext 等实体核心类，并在尝试保存对象时出现以下错误：

> 保存不为其关系公开外键属性的实体时发生错误。EntityEntries 属性将返回 null，因为无法将单个实体标识为异常源。通过在实体类型中公开外键属性，可以更轻松地在保存时处理异常。有关详细信息，请参阅 InnerException。

我基本上对多对多有我的erd，例如

```
comment   comment_category   category
id        comment_id         id
text      category_id        name 
```

comment_category 表是将评论映射到类别的组合主键

检索数据很好，但是当我尝试保存它时抱怨关系

我最感兴趣的模型看起来像

```
public class Comment
{
   [Key]
   public int Comment_Id {get;set;}
   public string Text {get;set;}
   public virtual List<Category> Categories { get; set; }
} 
public class Comment_Category
{
    [Key, Column(Order = 0)]
    public int Comment_Id {get;set;}
    [Key, Column(Order = 2)]
    public int Factor_Id {get;set;}
} 
```

及其使用的如

```
#Comments have Categories with Category Id filled and Comment Id null
List<Comment> comments = getComments();
using(dbContext db = new dbContext())
{
  foreach( Comment c in comments)
    db.Comments.add(c);
  db.SaveChanges();
} 
```

我不完全确定为什么它可以很容易地找到它但很难保存。我能想到的唯一区别是我保存的评论是新的，所以它们只有评论类别，没有评论 ID，只有类别 ID。我假设它会保存评论并将comment_id分配给comment_category表，所以我不知道如何完成这个

我意识到也许我的方法是错误的，因为我使用的是映射表而不是类别的实际实体，所以如果有人知道更好的方法，请分享。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:20:34.370

无需太多仪式即可做到这一点的最简单方法是还拥有一个类别上的评论集合，并让实体框架推断 M:M 关系。它将自动创建一个包含主键和外键的 CategoryComments 表。

因此，对于我们简单的模型：

```
public class Comment
{
    [Key]
    public int Comment_Id { get; set; }
    public string Text { get; set; }
    public virtual List<Category> Categories { get; set; }
}

public class Category
{
    [Key]
    public int Category_Id { get; set; }
    public string Name { get; set; }
    public virtual List<Comment> Comments { get; set; }
} 
```

用法类似于：

```
public class MyDbContext : DbContext
{
    public DbSet<Comment> Comments { get; set; }
    public DbSet<Category> Categories { get; set; }
}

using (var db = new MyDbContext())
{
    var blue = new Category { Name = "Blue" };
    var red = new Category { Name = "Red" };
    db.Categories.Add(blue);
    db.Categories.Add(red);

    db.Comments.Add(new Comment
    {
        Text = "Hi",
        Categories = new List<Category> { blue }
    });

    db.SaveChanges();
} 
```

# sinatra - 使用 datamapper gem 的验证错误

> ID：13707253
> 
> 赞同：2
> 
> 时间：2012-12-04T16:21:35.950
> 
> 标签：sinatra, datamapper

我正在使用 Datamapper (1.2.0) 和 Sinatra (1.3.2)。我有一个模型，模型的一个属性是员工 ID。这是一个必填字段，因此每当用户未输入此字段时，我需要抛出验证错误。

Datamapper 智能地将属性名称识别为“Employee”（减少了 id 部分），并将错误显示为“Employee can't be blank”和“Employee should be an integer”。

所以我试图覆盖这些错误信息。我可以覆盖“员工不能为空”，但不能覆盖另一个。

```
property :employee_id, Integer, :required => true, :unique => true,
    :messages => {
      :presence  => "Employee ID cannot be blank.",
      :is_unique => "Employee ID should be unique."
    } 
```

我需要用来覆盖“not_an_integer”错误的哈希键应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:18:03.043

我认为您正在寻找的消息密钥是`:is_number`. 记录在案的地方有点[隐蔽](http://rubydoc.info/gems/dm-validations/1.2.0/DataMapper/Validations/AutoValidations#generate_for_property-class_method)。[（我实际上在源代码](https://github.com/datamapper/dm-validations/blob/v1.2.0/lib/dm-validations/auto_validate.rb#L217)中寻找它）。

此外，如果您在属性选项中有任何散列，那么如果您没有为该验证指定自定义消息，则似乎将`:messages`默认消息替换为。`nil`

# asp.net - 使用 wcf 服务传输大量数据

> ID：13707255
> 
> 赞同：3
> 
> 时间：2012-12-04T16:21:41.713
> 
> 标签：asp.net, wcf, maxstringcontentlength

当我尝试在 WCF 中传输大量数据时，出现此错误：

> *格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数 [http://tempuri.org/:requete](http://tempuri.org/:requete)时出错。InnerException 消息是“反序列化 System.String 类型的对象时出错。读取 XML 数据时已超出最大字符串内容长度配额 (8192)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxStringContentLength 属性来增加此配额。第 1 行，位置 8843.'。有关更多详细信息，请参阅 InnerException。*

这是我的`app.config`文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.web>
    <compilation debug="true" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="NewBinding0" maxBufferSize="52428800" maxBufferPoolSize="52428800">
          <readerQuotas maxStringContentLength="52428800" />
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service name="TSO_WCF.Service1">
        <host>
           <baseAddresses>
               <add baseAddress="http://localhost:8732/Design_Time_Addresses/TSO_WCF/Service1/" />
           </baseAddresses>
        </host>
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address="" binding="wsHttpBinding" contract="TSO_WCF.IService1" >
           <identity>
              <dns value="localhost"/>
           </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
       <serviceBehaviors>
          <behavior>
             <serviceMetadata httpGetEnabled="True"/>
             <serviceDebug includeExceptionDetailInFaults="False" />
          </behavior>
       </serviceBehaviors>
    </behaviors>
</system.serviceModel>
<appSettings>
   <add key="Mapping" value="D:\workspace\oddo.app.ldw.tsomanagertool\ProjetTSO\MappingsXML"/>
</appSettings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:41:38.740

您应该在服务器和客户端绑定上增加 MaxStringContentLength。此时您使用的是默认值 8192。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:41:18.053

也许你可以改变你的绑定/使用流。请参阅此页面：http: [//msdn.microsoft.com/en-us/library/ms733742.aspx](http://msdn.microsoft.com/en-us/library/ms733742.aspx)

# php - JIRA SOAP addAttachmentsToIssue 方法代码示例

> ID：13707257
> 
> 赞同：0
> 
> 时间：2012-12-04T16:21:46.747
> 
> 标签：php, soap, jira

有人可以向我展示一个通过 SOAP 向 JIRA 问题添加附件的工作 php 代码示例吗？

[JIRA addAttachmentsToIssue 方法](http://docs.atlassian.com/rpc-jira-plugin/latest/com/atlassian/jira/rpc/soap/service/IssueService.html#addAttachmentsToIssue%28com.atlassian.crowd.embedded.api.User,%20java.lang.String,%20java.lang.String%5B%5D,%20byte%5B%5D%5B%5D%29)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:33:45.027

```
$this->soapClient->addBase64EncodedAttachmentsToIssue($this->token, $this->issue->key, array('test.txt'), array(base64_encode('test'))); 
```

# rvmrc - .rvmrc 信任挂起/冻结

> ID：13707264
> 
> 赞同：1
> 
> 时间：2012-12-04T16:22:10.680
> 
> 标签：rvmrc

我在信任 rvmrc 作为非 root 用户时遇到问题。如果我 cd 到项目目录，我会得到 rvm 信任提示

*您希望信任此 .rvmrc 文件吗？(appdir/.rvmrc) y[es], n[o], v[iew], c[ancel]>*

但是当我选择 y[es] 时，它会无限期地挂起。rvm rvmrc 信任也有类似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:59:48.867

我使用 set -x 来确定 rvm trust 冻结的位置。
> set -x
> cd appdir
你想信任这个 .rvmrc 文件吗？(appdir/.rvmrc) y[es], n[o], v[iew], c[ancel]>
>y
..
..
..
/usr/local/rvm/scripts/db /usr/local/rvm /user/rvmrcs _usr_share_batsd_current__rvmrc delete

然后我用 sudo 运行 */usr/local/rvm/scripts/db /usr/local/rvm/user/rvmrcs _usr_share_batsd_current__rvmrc delete*。这删除了 ​​/usr/local/rvm/user/rvmrcs 中的条目。删除该条目后，我能够信任 rvmrc。

# wcf - Roles.IsUserInRole() 在使用 wsHttpBinding 和 MVC 4 的 WCF 中不起作用

> ID：13707268
> 
> 赞同：5
> 
> 时间：2012-12-04T16:22:19.697
> 
> 标签：wcf, roles, wshttpbinding, simplemembership

我有以下测试设置，所有工作：

-WCF 应用程序运行 MathService.svc，设置为使用 SimpleMembershipProvider

-MVC 4 Internet App 使用默认的 SimpleMembershipProvider

- 会员是：

*   3 个角色：“调试”、“管理员”和“编辑”
*   2个用户：角色调试和管理员中的“调试”（是的，角色调试中的用户调试）
*   角色管理员中的“管理员”

- 证书，据我所知，我可以使用 wshttp 连接到服务

服务方法代码。

```
//[PrincipalPermission(SecurityAction.Demand, Role = "Debug")]
public string Add(double A, double B)
{
    OperationContext oc = OperationContext.Current;
    ServiceSecurityContext ssc = oc.ServiceSecurityContext;
    string cltName = ssc.PrimaryIdentity.Name;   //cltName = "Debug"
    var Rs = Roles.GetAllRoles(); //returns: 'Debug', 'Administrator', 'Editor' => OK
    var dUsers = Roles.GetUsersInRole("Debug");  // 'Debug' => Expected
    var aUsers = Roles.GetUsersInRole("Administrator"); // 'Debug', 'Admin' => expected
    try
    {
        var a = Roles.GetRolesForUser(cltName); //this fails 
        var b = Roles.IsUserInRole(cltName, "Debug"); //this fails 
        var c = Roles.IsUserInRole(cltName, "Administrator"); //this fails 
    }
    catch (Exception err)
    {
        string p = err.Message; // all fail with error :
        // "Object reference not set to an instance of an object", inner exception=null
    }
    if (dUsers.Contains(cltName)) //this works, but requires extra step 
        //I should be able to us if(Roles.IsUserInRole(cltName, "Debug"))... here?!?
    {
        return string.Format("Result: {0}", (A + B).ToString("N2"));
    }
    else
    {   //this is just to get a different result if NOT in role 'Debug'
        return string.Format("Result: {0}", ((int)A + (int)B).ToString("N2"));  
    }
} 
```

为什么调用“Roles.GetRolesForUser(cltName)”和 IsUserInRole 失败？

我从“ServiceSecurityContext”获得了正确的用户名，如果我启用 [PrincipalPermission] 属性，如果我使用用户 Admin 调用服务，我会按预期被拒绝。

那么为什么 PrincipalPermission 能够获得正确的用户角色呢？为什么我可以使用 Roles.GetUsersInRole("Debug") 来获取所有正确的用户但我不能调用 Roles.IsUserInRole(..)？

有一些帖子建议证书//会员设置错误，但我看不出我怎么能到目前为止并且仍然有错误的设置，最重要的是，只有一些角色方法失败，而不是全部。任何指针？

关于返回结果的一句话，如果我使用我的角色解决方法并通过调试调用，服务返回双精度，如果我在禁用管理员 [PrincipalPermission] 的情况下调用，我会返回整数精度

问候， 安德烈亚斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T03:20:19.417

以防万一有人遇到同样的问题。

虽然您可以将“旧”ASP.net RolesProvider 与 simpleMembership 一起使用，但它们并不相同。

就我而言，我必须添加一个简单的演员表。

```
var _simpleRoles = (SimpleRoleProvider)Roles.Provider; //need the cast to simple 
```

然后这行得通

```
 var b = simpleRoles.IsUserInRole(cltName, "Debug"); 
```

# c# - 绑定到 EF 集合的 DataGridView 未更新

> ID：13707270
> 
> 赞同：0
> 
> 时间：2012-12-04T16:22:30.443
> 
> 标签：c#, winforms, entity-framework, datagridview

有大量关于相关主题的帖子，但我无法弄清楚世界上发生了什么。我有一个包含显示 SQL 表（帐户列表）内容的数据网格的 winform 应用程序。我正在使用实体框架模型进行数据管理。

预期功能如下。当主窗体启动时，它会创建一个名为“ODS”的数据模型实例。然后通过表单的 load() 方法中的以下调用将数据链接到数据网格：

```
grid_accounts.DataSource = ODS.Accounts; 
```

当在主表单上单击“添加帐户”按钮时，它会打开一个对话框供用户填写新帐户信息。数据源被传递到对话框。如果用户单击“确定”，则会创建新的帐户实体，将其添加到 ODS.Accounts、保存并关闭对话框。然后主窗体上的数据网格应显示新帐户。

除了新帐户未出现在数据网格中之外，所有这些都按预期发生。我已经检查过了，一旦调用 SaveChanges()，它就会保存到数据库中。我还将 ODS.Accounts 的内容输出到控制台，新实体确实在集合中。我试过在数据网格上调用 Refresh()；我还尝试了众所周知的技巧，即在将网格的 dataSource 重置为 Account 集合之前将其设置为 null 以“欺骗”网格进行更新。没运气。我错过了一些明显的东西吗？相关代码如下。谢谢。

主窗体：

```
public partial class MainForm : Form
{
    VHN.DataAccess.ODSEntities ODS = VHN.DataAccess.Util.getODS();

    private void Load(object sender, EventArgs e)
    {
        populate();
    }

    private void button_addAccount_Click(object sender, EventArgs e)
    {
        var d = new NewAccountForm(ODS);
        if (d.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            populate();
    }

    void populate()
    {
        grid_accounts.DataSource = null;
        grid_accounts.DataSource = ODS.Accounts;

        grid_accounts.Columns[0].Visible = false;
        grid_accounts.Refresh();            
    }
} 
```

新帐户对话框：

```
public partial class NewAccountForm : Form
{
    VHN.DataAccess.ODSEntities ODS;

    public NewAccountForm(ref VHN.DataAccess.ODSEntities ODS)
    {
        this.ODS = ODS;
        InitializeComponent();
    }

    private void ok_Click(object sender, EventArgs e)
    {
        int count = ODS.Accounts.Where(x => x.name == tb_name.Text).Count();

        if (count > 0)
        {
            MessageBox.Show(String.Format("Account name \"'{0}\" is already taken.", tb_name.Text));
        }
        else
        {
            VHN.DataAccess.Account account = new VHN.DataAccess.Account();
            account.id = Guid.NewGuid().ToString();
            account.name = tb_name.Text;
            ODS.Accounts.AddObject(account);
            ODS.SaveChanges();
            this.DialogResult = System.Windows.Forms.DialogResult.OK;
            Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:04:34.913

尝试其中一种：（假设 Accounts 是 List 类型

```
grid_accounts.EndEdit();
grid_accounts.Refresh(); 
```

或者

```
grid_accounts.DataSource = typeof(List); 
grid_accounts.DataSource = ODS.Accounts; 
```

更新：

```
grid_accounts.DataSource = typeof(List<>); // OR use grid_accounts.DataSource = null;
grid_accounts.DataSource = ODS.Accounts.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-23T10:16:51.913

如果你还在这个。

```
grid_accounts.DataSource = new BindingSource(ODS.Accounts); 
```

应该可以正常工作。

# google-app-engine - Google App Engine 频道 API 定价：100 个频道 0.01 美元还是 0.001 美元？

> ID：13707274
> 
> 赞同：4
> 
> 时间：2012-12-04T16:22:42.993
> 
> 标签：google-app-engine, channel-api

[我发现Google 的 Channel API](https://developers.google.com/appengine/docs/java/channel/overview)有两种不同的价格。

[https://developers.google.com/appengine/docs/billing](https://developers.google.com/appengine/docs/billing)说：

> 频道打开 $0.00001（$0.001/100 个频道）

[https://cloud.google.com/pricing/](https://cloud.google.com/pricing/)说：

> $0.01 / 100 个打开的频道

这些网站是指不同的操作吗？或者一个来源已经过时了？假设我想在每天有 100 万用户（=100 万频道）使用的服务器应用程序中使用频道 API，是否会花费

**0.01 美元 / 100 * 1,000,000 = 100 美元**

或者

**0.001 美元 / 100 * 1,000,000 = 10 美元**

每天？感谢您澄清这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:52:42.897

在管理控制台计费页面中，它显示 0.01/100 美元，我假设这是最重要的。

# android - 自定义 EditText 的 setError 图标

> ID：13707282
> 
> 赞同：21
> 
> 时间：2012-12-04T16:23:15.850
> 
> 标签：android, icons, textview

我想为`setError`my 设置一个方法`EditText`，使用自定义图标而不是默认的 Android 图标。所以我尝试了这个：

```
((EditText)findViewById(R.id.edtTitle)).setError(getResources().getText(R.string.errEmptyTitle), 
         getResources().getDrawable(R.drawable.ico_warning_small); 
```

它向我显示了自定义消息，但没有显示自定义图标。我也试过这个：

```
Drawable warning = (Drawable)getResources().getDrawable(R.drawable.ico_warning_small);
((EditText)findViewById(R.id.edtTitle))
      .setError(getResources().getText(R.string.errEmptyTitle), warning); 
```

几乎一样，但我还是决定试一试。然而，这也没有帮助 - 我仍然看不到图标。我尝试使用其他一些 Android 系统图标，只是想看看我是否看到它们，不，我也没有看到它们。

那么我做错了什么？有没有办法设置那个自定义图标？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-04-21T18:13:49.507

在 setError 中使用它之前，您需要在 drawable 上设置边界。

```
drawable.setBounds(0, 0, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());
editText.setError("error", drawable); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-02-17T15:31:37.803

如果您根本不想显示任何图标，请使用

```
editText.setError("error", null); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T10:09:07.667

这个问题在这里讨论和解决：

[EditText setError() 带有图标但没有弹出消息](https://stackoverflow.com/questions/8985295/edittext-seterror-with-icon-but-without-popup-message)

我希望通过扩展答案，它不会自动转换为评论。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-14T15:21:59.167

```
 Drawable customErrorDrawable = getResources().getDrawable(R.drawable.error_icon);
        customErrorDrawable.setBounds(0, 0, customErrorDrawable.getIntrinsicWidth(), customErrorDrawable.getIntrinsicHeight());

 editText.setError("please enter data",customErrorDrawable); 
```

# android - Android：使用 html 预填充电子邮件

> ID：13707286
> 
> 赞同：0
> 
> 时间：2012-12-04T16:23:31.240
> 
> 标签：android, html, email, utf-8

我有这个代码，它预先填写了一封电子邮件并抛出了一个意图：

```
Intent email_intent = new Intent(Intent.ACTION_SEND_MULTIPLE);   
email_intent.putExtra(Intent.EXTRA_SUBJECT,
"iTempco"+getString(R.string.superficie_scambio));  
email_intent.putExtra(Intent.EXTRA_TEXT,{{here_the_html_code}});
email_intent.setType("text/html");  
startActivity(email_intent);
```

您在哪里看到 {{here_the_html_code}} 我有一个带有 html 代码的字符串（工作完美）。问题是，当活动被抛出时，我在客户端的文本区域中看到了 html 代码（源代码），而不是“转换后的”

我怎样才能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:40:05.747

我有同样的问题，但无法解决。大多数默认电子邮件客户端不会处理 html 标签。我发现最好的解决方法是将 html 作为附件发送。

检查我的问题： [是否可以发送带有邮件意图的 html？](https://stackoverflow.com/questions/10930812/is-it-possible-to-send-html-with-the-mail-intent)

# networking - AWS RDP 在加入 VPN 后断开连接

> ID：13707291
> 
> 赞同：5
> 
> 时间：2012-12-04T16:23:39.283
> 
> 标签：networking, amazon-web-services, amazon-ec2, vpn, rdp

我有一个运行 Windows Server 2012 的 Amazon EC2 实例。我使用 RDP 连接到该实例。

从 RDP，我无法连接到 VPN。

我实际上认为我正在连接到 VPN，然后我立即失去了 RDP 连接。

除非我重新启动实例，否则我无法通过 RDP 重新连接到实例。但是，如果我重新启动实例，我会失去 VPN 连接。

每次都在发生这种情况。

关于是否可以从 AWS 上的 RDP 连接到 VPN 的任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T00:23:10.330

您的问题是，当您启动 VPN 时，AWS 服务器的公共 IP 地址不再可访问。您需要的是您的源 IP 地址的 VPN 拆分隧道例外（即您启动 RDP 会话的 IP 地址......而不是 AWS IP......大概这个 RDP 会话是从印度启动的）；但是，拆分隧道通常只能由 VPN 管理员配置。

如果您的管理员允许拆分隧道，那么您也许可以说服他们帮助您完成这项工作。

另一种选择是完全放弃 AWS 并使用提供 KVM over IP 访问托管机器的托管服务；这将允许您在 Windows 机器中启动 VPN，并在通过 VPN 连接时使用 KVM IP 地址进行管理。遗憾的是[AWS 似乎不提供 KVM 服务](https://forums.aws.amazon.com/message.jspa?messageID=59330)。

# cuda - CUDA。共享内存与常量

> ID：13707293
> 
> 赞同：2
> 
> 时间：2012-12-04T16:23:51.233
> 
> 标签：cuda

我需要大量的常量数据，超过 6-8 KB，最大到 16 KB。同时我不使用共享内存。现在我想将这个常量数据存储在共享内存中。这是个好主意吗？任何性能近似值？广播是否适用于共享内存以及常量？

性能对应用程序至关重要。而且我认为，我的 Tesla C2075 (CUDA 2.0) 上只有 8 KB 的常量内存缓存

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:50:35.173

在计算能力 2.0 中，L1 和共享内存使用相同的内存。L1 和共享内存之间的分区可以通过`cudaFuncSetCacheConfig()`调用来控制。我建议将 L1 设置为最大可能（48K）

```
cudaFuncSetCacheConfig(MyKernel, cudaFuncCachePreferL1); 
```

然后，从全局内存中提取常量数据，让 L1 处理缓存。如果您有多个 const 数组，您可以通过使用`const`内核参数列表中的限定符来指示编译器为其中一些使用常量缓存。这样，您可以利用 L1 和常量缓存来缓存您的常量。

广播适用于 L1 和常量缓存访问。

# php - 使用提交发送参数，PHP

> ID：13707297
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:24:01.373
> 
> 标签：php, html

1.  `<input type = "submit" name = "ok" value = "<? php echo $ _POST ['no'];?>">`

2.  `<input type = "submit" name = "ok" value = "ok">`

如果我想使用提交发送参数怎么办？如果我使用数字 2，则提交的值 =“ok”，但将发送的参数是“ok”。但是当使用数字 1 时，则提交时的值取决于 $_POST ['no'] 的值，而是设法发送参数。

我想问我怎样才能使永久值“ok”但发送参数取决于$ _POST ['no']？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:26:31.683

据我了解，您正在寻找一个隐藏的领域：

```
<input type = "hidden" name = "someField" value = "<? php echo $ _POST ['no'];?>">
<input type = "submit" name = "ok" value = "ok"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:26:44.290

添加第二个`<input>`元素以保持 的值`$_POST['no']`。HTML`<input type="hidden">`为这个明确的目的提供了输入：

```
<input type="hidden" name="ok" value="<?= $_POST['no'] ?>" />
<input type="submit" value="ok"> 
```

# perl - 使用带有非标准标题的 BioPerl 从 FASTA 文件中提取 DNA 序列

> ID：13707302
> 
> 赞同：2
> 
> 时间：2012-12-04T16:24:19.020
> 
> 标签：perl, bioinformatics, bioperl

我正在尝试使用以下代码从数据库中提取序列：

```
use strict;
use Bio::SearchIO; 
use Bio::DB::Fasta;

my ($file, $id, $start, $end) = ("secondround_merged_expanded.fasta","C7136661:0-107",1,10);
my $db = Bio::DB::Fasta->new($file);
my $seq = $db->seq($id, $start, $end);
print $seq,"\n"; 
```

我试图提取的序列的标题是：`C7136661:0-107`，如文件中所示：

```
>C7047455:0-100
TATAATGCGAATATCGACATTCATTTGAACTGTTAAATCGGTAACATAAGCAGCACACCTGGGCAGATAGTAAAGGCATATGATAATAAGCTGGGGGCTA 
```

当我将标题切换到更标准的东西（如`test`）时，代码工作正常。我认为 BioPerl 不喜欢非标准标题。有什么办法可以解决这个问题，这样我就不必重新编码 FASTA 文件了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:57:09.263

默认情况下，`Bio::DB::Fasta`将使用紧跟`>`在标题行上的所有非空格字符来形成序列的键。在您的情况下，这看起来像`C7047455:0-100`，这与子序列的内置缩写相同。如此[处](https://metacpan.org/module/Bio%3a%3aDB%3a%3aFasta#OBJECT-METHODS)`$db->seq($id, $start, $stop)`所述，您可以使用,而不是`$db->seq("$id:$start-$stop")`调用 , 所以调用`$db->seq('C7136661:0-107')`看起来像您要求的那样`$db->seq('C7136661', 0, 107)`，并且该密钥不存在。

我无法知道您的数据中有什么，但是如果仅使用标题的第一部分直到冒号作为键就足够了，那么您可以使用`-makeid`回调来修改键。然后，如果您仅`C7136661`用于检索序列，它将起作用。

此代码演示。请注意，您可能已经有一个`.index`缓存文件，您必须在看到任何行为变化之前将其删除。

```
use strict;
use warnings;

use Bio::DB::Fasta;

my ($file, $id, $start, $end) = qw(
  secondround_merged_expanded.fasta
  C7136661
  1 10
);

my $db = Bio::DB::Fasta->new($file, -makeid => \&makeid);

sub makeid {
  my ($head) = @_;
  $head =~ /^>([^:]+)/ or die qq(Invalid header "$head");
  $1;
}

my $seq = $db->seq($id, $start, $end);
print $seq, "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T23:11:13.387

我有与这篇文章相关的问题。我想知道是否有人尝试过当查询中的位置超出 fasta 位置的限制时会发生什么。所以可以说，fasta 包含 100 个碱基，而您查询包含位置 102，此方法是否会捕获错误。我在一些真实数据中尝试了这个，它似乎总是返回“1”，但是，我的 fasta 序列包含 0/1，所以很难理解这是否是一个错误代码/它正在返回错误基数的输出。

我尝试查看文档，但找不到任何东西。

# c# - 如何提示用户登录我的电子邮件发送应用程序（Windows Phone 7）

> ID：13707308
> 
> 赞同：0
> 
> 时间：2012-12-04T16:24:34.280
> 
> 标签：c#, .net, windows-phone-7, email

我为 Windows Phone 7 创建了一个简单的电子邮件应用程序，但我需要设置我的电子邮件帐户以从我的应用程序发送电子邮件。

所以请告诉我如何提示用户在我的电子邮件发送应用程序中登录以发送电子邮件（Windows Phone 7）

这是我的应用程序代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using Microsoft.Phone.Tasks;

namespace SendingMail
{
    public partial class MainPage : PhoneApplicationPage
    {
        EmailAddressChooserTask emailAddresstask;// Constructor
        public MainPage()
        {
            InitializeComponent();
            this.emailAddresstask = new EmailAddressChooserTask();
            this.emailAddresstask.Completed += new EventHandler<EmailResult>(emailAddresstask_Completed);
        }

        #region Events

        //Open Contact button click
        private void btnOpenContact_Click(object sender, RoutedEventArgs e)
        {
            emailAddresstask.Show();
        }

        //Email Address Chooser Task Completed
        private void emailAddresstask_Completed(object sender, EmailResult e)
        {
            if (e.TaskResult == TaskResult.OK)
            {
                txtTo.Text = e.Email;
            }
        }

        //Send mail button click
        private void btnMail_Click(object sender, RoutedEventArgs e)
        {
            EmailComposeTask Myemail_Composetask = new EmailComposeTask();
            Myemail_Composetask.To = txtTo.Text;
            Myemail_Composetask.Cc = txtCC.Text;
            Myemail_Composetask.Subject = txtSbj.Text;
            Myemail_Composetask.Body = txtbd.Text;
            Myemail_Composetask.Show();
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:01:39.630

你不需要这样做（而且你也不能这样做）。如果手机上没有设置电子邮件帐户，操作系统已经提示用户创建一个电子邮件帐户。

# mysql - MySQL Left Join Limit on subquery select min(value)

> ID：13707311
> 
> 赞同：2
> 
> 时间：2012-12-04T16:24:45.867
> 
> 标签：mysql, left-join

对不起，如果标题不是很清楚...

我有两张桌子`products`，`images`

上有关`products`。`product_id`= `images`。`product_id`,

`images`每个产品在桌子上都有几张与之相关的图像，

两个表都有一个列宽值，我希望按（`product_order`和`image_order`）排序。

我正在寻找的结果是一个列表，`published` `products`其中**每个产品只有一个图像（和一个结果）**，图像应该是列中值最低的那个`image_order`。

我从我在这里找到的其他答案中汇总了下面的代码并且它正在工作，唯一的问题是该列`image_order`允许重复，因此在`image_order`我得到每个产品的多个结果时，相同产品的图像具有相同的值。

```
SELECT products.*, images.image_name, images.image_order

FROM products

LEFT JOIN images ON (
    images.product_id = products.product_id 
    AND images.image_order = (
        SELECT min(image_order) 
        FROM images 
        WHERE product_id = products.product_id
    )
)

WHERE products.published = 1
ORDER BY products.product_order ASC 
```

***编辑**（我的表）：*

餐桌**产品**

```
product_id  |  product_name  |  product_order
____________|________________|_________________
     1      |  Fist Product  |        1
     2      | Second Product |        2
     3      | Third Product  |        3 
```

表格**图像**

```
 image_id   |   product_id   |    image_name    |  image_order
____________|________________|__________________|_________________
     1      |       1        |  Fist Image URL  |        1
     2      |       1        | Second Image URL |        1
     3      |       2        | Third Image URL  |        1
     4      |       3        | Fourth Image URL |        1 
```

我从这个查询中得到的结果：

1.  第一个产品 + 第一个图像

2.  **第一个产品 + 第二个图像**

3.  第二个产品+第三个图像

4.  第三产品 + 第四图像

我需要的结果：

1.  第一个产品 + 第一个图像

2.  第二个产品+第三个图像

3.  第三产品 + 第四图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:10:10.613

你可以使用这样的东西，但这不是最好的选择。随着您对表格的进一步了解，可能会有更好的答案：

```
select products.*,
(
    select image_name from images
    where product_id = products.product_id
    order by image_order asc
  limit 1
) as 'image_name'
from products
WHERE products.published = 1
ORDER BY products.product_order ASC 
```

# sql - 在 Toad for Oracle 中使用 SQL Query 如何将数据输出更改为代表性字符

> ID：13707313
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:24:52.890
> 
> 标签：sql, oracle, conditional, toad

我做了一个查询，我的输出有columA。在 A 列中，潜在数据是**Dog**或**Cat**，

如果输出是：

*   **Dog**然后我希望它显示为**B**
*   **Cat**我希望它显示为**T**。

如何使用 SQL 查询在 Toad for Oracle 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:30:43.720

```
select decode(columnA,'dog','B','cat','T','not a dog or cat')
from dual 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:07:04.667

`DECODE`在 Oracle 世界中普遍使用，但我会使用该`CASE`语句，因为它更具可读性：

```
SELECT CASE myinput
       WHEN 'Dog' THEN 'B'
       WHEN 'Cat' THEN 'T'
                  ELSE '?'
       END myoutput
  FROM ... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T16:46:10.843

```
select decode(columnA,'Dog', 'B','Cat', 'T', 'None') from dual; 
```

下面是 DECODE 函数的工作原理

```
DECODE([If ColumnA is] 'Dog' [then] 'B' [elsif] 'Cat' [then] 'T' ..... [else] 'None') 
```

# c# - 修改 getter 和 setter 的变量

> ID：13707317
> 
> 赞同：1
> 
> 时间：2012-12-04T16:25:08.583
> 
> 标签：c#

以下属性只是请求为 getter 和 setter 计算一次值

所以而不是：

```
public bool this[int x, int y]
{
    get
    {
        return this[x * this.width + y];
    }
    set
    {
        this[x * this.width + y] = value;
    }
} 
```

如果我们可以这样做会更好：

```
public bool this[int x, int y]
{
    int index = x * this.width + y;

    get
    {
        return this[index];
    }
    set
    {
        this[index] = value;
    }
} 
```

在这种情况下，这没什么大不了的，可以使用内联方法。但作为一个原则，有没有办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T16:30:38.797

和属性访问`get`器`set`实际上被编译为两个独立的方法。如果您需要通用代码，则必须以与使用任何两种不同方法相同的方式进行 - 通过引入第三种方法，可能是静态方法。

```
private static CalculateIndex(int x, int width, int y)
{
    return x * width + y;
}

public bool this[int x, int y]
{
    get
    {
        return this[CalculateIndex(x, this.width, y)];
    }
    set
    }
        this[CalculateIndex(x, this.width, y)] = value;
    }
} 
```

在这种情况下，您不能简单地设置一个变量，以便它对索引器的访问器是通用的，但是如果计算真的很苛刻，您可以使用某种缓存，在这种情况下，您将访问访问器中的缓存（只是就像`index`您示例中的变量一样）。这样做的问题是缓存确实是重量级的解决方案，您必须检查一个值是否被缓存，如果没有缓存，则计算它，并且在某些情况下还要从缓存中删除它（特别是为了避免内存泄漏）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:31:59.263

如果您不想进行两次计算，请添加辅助方法。

```
int GetOffset(int x, int y)
{
    return x + this.width * y;
}

public bool this[int x, int y]
{
    get
    {
        return this[GetOffset(x, y)];
    }
    set
    {
        this[GetOffset(x, y)] = value;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T16:28:02.720

可能是这样的：

```
public bool this[int x, int y]
{    
    get
    {
        var index= x * this.width + y; //CALCULATE INDEX ON GET
        return this[index];
    }
    set
    {
        var index= x * this.width + y;//CALCULATE INDEX ON SET
        this[index] = value;
    }
} 
```

# jquery - 注册点击事件的 jQuery 代码，在每个第三个事件上，用户将被重定向到自定义 url

> ID：13707319
> 
> 赞同：1
> 
> 时间：2012-12-04T16:25:11.660
> 
> 标签：jquery

我在以下情况下创建了一个[小提琴](http://jsfiddle.net/sexywebteacher/TLkPB/1/)，我想知道如何用 jQuery 实现它。

我有几个像这样的div：

```
<div class="mydiv"><a href="http://www.google.com">google.com</a></div>

<div class="mydiv"><a href="http://www.yahoo.com">yahoo.com</a></div>

<div class="mydiv"><a href="http://www.baidu.com">baidu.com</a></div> 
```

列表还在继续（O 有大约 20 个 div）。

1.  当用户点击第一个 div（第一个事件）时，他将转到该链接的页面（在我的例子中是 google.com）；

2.  当用户点击第二个 div（第二个事件）时，他会转到那个链接的页面（yahoo.com）；

3.  当用户点击第三个div（第3个事件）时，会转到一个CUSTOM URL，而不是baidu.com；

4.  但是如果用户再次点击第三个div（第4个事件），他会去baidu.com

**总而言之，我需要一个注册点击事件的 jQuery 代码的想法，并且在每个第三个事件上，用户将被重定向到自定义 url。**

我第一次教的是使用切换，但我不确定它是否可以实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:31:37.823

即使您离开页面，此解决方案也会维护一个计数器：

```
$(function(){
    var nbc = localStorage['nbc']||0;
    $('a').click(function(){
        localStorage['nbc'] = ++nbc;
        if (nbc%3==0) {
           document.location = "yourUrl";
           return false; // in case the link opens in another page
        }
    });
}); 
```

**编辑，评论中问题的一些答案：**

要在新选项卡中打开 html 链接，请执行以下操作：

```
<a href=... target=_blank>text</a> 
```

要在新选项卡（或窗口，取决于浏览器和首选项）中以编程方式打开，请使用

```
window.open("yourUrl"); 
```

只有当您控制新页面并且它来自同一来源时，才能在打开后获得开启器窗口焦点。在这种情况下，只有您可以在新页面中使用它：

```
window.opener.focus(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:30:18.700

试试这个：

```
$(document).ready(function(){
  var counter = 0;
  $('.mydiv a').on('click', function(event){
    counter = counter < 3 ? counter + 1 : 0;

    if (counter == 3) {
      event.preventDefault();
      window.location.href = "http://stackoverflow.com";
    }
  });
}); 
```

上面的代码应该在用户点击时将他们重定向到您的自定义 URL。显然，您可以设置点击次数限制以及自定义 URL。

请小心劫持用户的点击:)

* * *

## 编辑

查看实际代码：http: [//jsfiddle.net/robertp/GHnvd/3/](http://jsfiddle.net/robertp/GHnvd/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:36:00.940

[**您可以使用 jQuery 的data()**](http://api.jquery.com/data/)将点击次数存储在内存中，并在转到自定义链接时每 3 次点击重新设置一次，如果这是您需要的，如下所示：

```
$document = $(document);
$document.data("linksClicked", 0);

$(".mydiv a").on("click", function() {
    var clicks = $document.data("linksClicked");

    clicks += 1;

    if (clicks === 3) {
        // go to special link
        clicks = 0;
        $document.data("linksClicked", clicks);
        return false;
    }

    $document.data("linksClicked", clicks);
});​ 
```

### [演示](http://jsfiddle.net/TLkPB/8/)- 除每 3 次点击外，所有点击都转到分配的链接

如果您不想重新设置计数器，您可以简单地在第三个之后停止增加它，如下所示：

```
$document = $(document);
$document.data("linksClicked", 0);

$(".mydiv a").on("click", function() {
    var clicks = $document.data("linksClicked");

    if (clicks < 3) {
        clicks += 1;

        if (clicks === 3) {
            // go to special link
            $document.data("linksClicked", clicks);
            return false;
        }

        $document.data("linksClicked", clicks);
    }
});​ 
```

### [演示](http://jsfiddle.net/TLkPB/9/)- 除了第 3 次单击之外的所有内容都转到分配的链接

# php - 用作方法时的php查询执行错误

> ID：13707323
> 
> 赞同：0
> 
> 时间：2012-12-04T16:25:21.297
> 
> 标签：php

在我看来，我有一个奇怪的问题。下面的部分工作正常

```
 $sql = "
    UPDATE 
        ".$table[0]."
    SET 
        p_title = '".$_POST['p_title']."', 
        p_date = '".$_POST['p_date']."' 
    WHERE 
        p_id = '".$_POST['p_id']."'
";
if(!$db->exec($sql)){
    echo($defaults->throwError('MySql error',$sql,implode(":",$db->errorInfo())));
}else{
    $defaults->writeLog($table,$db->lastInsertId(),'update');
} 
```

但是当我尝试下面的代码时，我得到一个“致命错误：在非对象中调用成员函数 exec()”

```
 class Defaults{
    [..]
    public function query($sql){
        if(!$db->exec($sql)){
            echo($defaults->throwError('MySql error',$sql,implode(":",$db->errorInfo())));
        }else{
            $defaults->writeLog($table,$db->lastInsertId(),'update');
        }
    }
    [..]
} 
```

然后在我的页面上

```
 $defaults = new Defaults();
$defaults->query("
    UPDATE 
        ".$table[0]."
    SET 
        p_title = '".$_POST['p_title']."', 
        p_date = '".$_POST['p_date']."' 
    WHERE 
        p_id = '".$_POST['p_id']."'
"); 

```

怎么会？

啊，是关于`$db`课堂上的。但是，当我做类似的事情时

```
 public function query($sql){
    $db = new PDO($dbdata->hostname,$dbdata->username,$dbdata->password);
    if(!$db->exec($sql)){
        echo($defaults->throwError('MySql error',$sql,implode(":",$db->errorInfo())));
    }else{
        $defaults->writeLog($table,$db->lastInsertId(),'update');
    }
} 
```

我讨厌

```
致命错误：未捕获的异常“PDOException”
带有消息“无效的数据源名称”
在 /class.defaults.php:8

堆栈跟踪：
#0 /class.defaults.php(8): PDO->__construct('', NULL, NULL)
#1 /class.form.php(269): Defaults->query('?????????UPDATE...')
#2 /module.projectbeheer.edit.php(25): Form->proceed('update', 'p_id', 'rows', Array, Array, '')
#3 /class.content.php(16): include_once('/path/')
#4 /administratie.php(72): 内容->write('/BraamsArchief/...')
#5 {main} 在第 8 行的 /class.defaults.php 中抛出

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:28:57.197

$db 可以从默认值中访问吗？

尝试添加一个`global $db;`内函数查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:30:05.880

您必须提供 $db 作为全局属性或类属性。否则，您无法在方法范围内访问它。

所以要么：

```
public function query($sql) {
    global $db;
    // now you can use $db as you would in global scope
} 
```

否则，您必须使用您的数据库连接对象设置一个类属性（例如 $this->db），并在您的方法中使用 $this->db 访问它。

请注意，如果您使用该`global`解决方案，则需要确保该变量在最初定义时始终称为 $db。否则，您的方法可能无法找到它，您将得到相同的错误。

# ajax - 将所有 seo 引用回 index.php

> ID：13707330
> 
> 赞同：0
> 
> 时间：2012-12-04T16:25:38.613
> 
> 标签：ajax, seo, search-engine

我需要进行什么更改才能使所有搜索结果都指向我的 index.php？我不能重写规则，因为我有一些页面被 ajaxed 到我的 index.php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:32:34.037

你不能用`robots.txt`，这不是它的用途。

但是，重写规则应该起作用：您只需要重写`index.php`所有不是您所说的“ajaxed 页面”的东西（即，也许当请求的页面不是时`index.php`？取决于您的设置）

例如：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME}/index.php !-f
RewriteRule ^(.*)$ index.php [L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:26:35.953

如果您直接点击文件，我最终会使用 Javascript 重定向。这对我来说是最容易做的事情，因为我在 wordpress 环境中并且不想搞砸其他事情。

# 然而，有人也给了我另一个好主意，那就是：

`?redirect=false`为不应该是重定向的任何页面添加。这样您就可以控制来自查询字符串的重定向，并可以利用 apache 重写。如果你问我，这是更好的方法。

# powershell - BizTalk Configuration.exe 远程执行错误

> ID：13707332
> 
> 赞同：3
> 
> 时间：2012-12-04T16:25:56.593
> 
> 标签：powershell, biztalk, unhandled-exception, showdialog, remote-execution

我正在编写一个脚本来自动安装 BizTalk Server，然后通过 BizTalk“configuration.exe”实用程序应用配置。当我在本地运行 configuration.exe 实用程序并为其提供配置 xml 时，它工作正常，并且它在配置过程中显示一个对话框，无需任何用户交互即可显示进度。

我遇到的问题是当我尝试通过 Powershell 远程执行 configuration.exe 时。未应用配置，并且 configuration.exe 进程在进程资源管理器中出现几秒钟，然后退出。

我检查了错误日志，似乎 configuration.exe 在尝试显示其进度窗口时崩溃，但它无法远程执行此操作。错误日志中出现的 3 个错误是：

Windows 错误报告：

```
 - <Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
            - <System>
              <Provider Name="Windows Error Reporting" /> 
              <EventID Qualifiers="0">1001</EventID> 
              <Level>4</Level> 
              <Task>0</Task> 
              <Keywords>0x80000000000000</Keywords> 
              <TimeCreated SystemTime="2012-12-03T13:24:10.000000000Z" /> 
              <EventRecordID>3956</EventRecordID> 
              <Channel>Application</Channel> 
              <Computer>HOSTNAME</Computer> 
              <Security /> 
              </System>
            - <EventData>
              <Data /> 
              <Data>0</Data> 
              <Data>CLR20r3</Data> 
              <Data>Not available</Data> 
              <Data>0</Data> 
              <Data>configuration.exe</Data> 
              <Data>3.0.1.0</Data> 
              <Data>4c5479ac</Data> 
              <Data>System.Windows.Forms</Data> 
              <Data>4.0.0.0</Data> 
              <Data>4f61a8cc</Data> 
              <Data>3e06</Data> 
              <Data>ee</Data> 
              <Data>System.InvalidOperationException</Data> 
              <Data /> 
              <Data /> 
            <Data>C:\ProgramData\Microsoft\Windows\WER\ReportQueue\AppCrash_configuration.ex_120852993cfe8d93d2aac7a1cea49f9a18b688_345a8b46</Data> 
              <Data /> 
              <Data>0</Data> 
              <Data>b823ff23-3d4c-11e2-ae6f-005056bc6ac0</Data> 
              <Data>4</Data> 
              </EventData>
              </Event> 
```

应用程序错误：

```
- <Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
- <System>
  <Provider Name="Application Error" /> 
  <EventID Qualifiers="0">1000</EventID> 
  <Level>2</Level> 
  <Task>100</Task> 
  <Keywords>0x80000000000000</Keywords> 
  <TimeCreated SystemTime="2012-12-03T13:24:10.000000000Z" /> 
  <EventRecordID>3955</EventRecordID> 
  <Channel>Application</Channel> 
  <Computer>HOSTNAME</Computer> 
  <Security /> 
  </System>
- <EventData>
  <Data>Configuration.exe</Data> 
  <Data>3.9.469.0</Data> 
  <Data>4c5479ac</Data> 
  <Data>KERNELBASE.dll</Data> 
  <Data>6.1.7601.17651</Data> 
  <Data>4e211319</Data> 
  <Data>e0434352</Data> 
  <Data>0000b9bc</Data> 
  <Data>1be0</Data> 
  <Data>01cdd1597a111847</Data> 
  <Data>C:\Program Files (x86)\Microsoft BizTalk Server 2010\Configuration.exe</Data> 
  <Data>C:\Windows\syswow64\KERNELBASE.dll</Data> 
  <Data>b823ff23-3d4c-11e2-ae6f-005056bc6ac0</Data> 
  </EventData>
  </Event> 
```

.NET 运行时错误：

```
- <Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
- <System>
  <Provider Name=".NET Runtime" /> 
  <EventID Qualifiers="0">1026</EventID> 
  <Level>2</Level> 
  <Task>0</Task> 
  <Keywords>0x80000000000000</Keywords> 
  <TimeCreated SystemTime="2012-12-03T13:24:10.000000000Z" /> 
  <EventRecordID>3954</EventRecordID> 
  <Channel>Application</Channel> 
  <Computer>HOSTNAME</Computer> 
  <Security /> 
  </System>
- <EventData>
  <Data>Application: Configuration.exe Framework Version: v4.0.30319 Description: The process was terminated due to an unhandled exception. Exception Info: System.InvalidOperationException Stack: at System.Windows.Forms.Form.ShowDialog(System.Windows.Forms.IWin32Window) at System.Windows.Forms.Form.ShowDialog() at Microsoft.BizTalk.Configuration.Program.RunConfigProgressUIThread() at System.Threading.ThreadHelper.ThreadStart_Context(System.Object) at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object) at System.Threading.ThreadHelper.ThreadStart()</Data> 
  </EventData>
  </Event> 
```

我已经检查了可以传递给 configuation.exe 的选项，因为我知道一些 MSI 和 EXE 安装程序确实有 /silent 选项，但这个 EXE 似乎没有。

![在此处输入图像描述](../Images/7b316e54fe0beb0af19a34c5960adae4.png)

我也尝试通过 PSExec 运行它，但我遇到了类似的错误。

请让我知道是否有办法远程运行它。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-16T14:19:29.020

我知道这是一篇非常旧的帖子，但只是一个更新.. 如果有人试图远程配置 BizTalk 2013.. 请安装 BizTalk 的最新更新（当前 CUW3 BizTalk2013CU3-KB3088676-ENU）。这将提供 /没有进度条。这将解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T08:26:58.527

我不知道对你来说是否为时已晚，但我面临着同样的问题。这是因为 Configuration.exe 使用了实现一些 MessageBox.Show() 的表单组件，这与非交互模式不兼容。如果您查看事件查看器中的信息消息，您将看到带有以下 Waston 报告的转储文件：

```
<?xml version="1.0" encoding="utf-16"?>
<WatsonInfo xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <osVersion>Microsoft Windows NT 6.2.9200.0</osVersion>
  <AppName>Microsoft ® BizTalk ® Server 2013</AppName>
  <AppVersion>3.10.229.0</AppVersion>
  <exceptionString>System.InvalidOperationException: Showing a modal dialog box or form when the application is not running in UserInteractive mode is not a valid operation. Specify the ServiceNotification or DefaultDesktopOnly style to display a notification from a service application.
   at System.Windows.Forms.Form.ShowDialog(IWin32Window owner)
   at System.Windows.Forms.Form.ShowDialog()
   at Microsoft.BizTalk.Configuration.Program.RunConfigProgressUIThread()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()</exceptionString>
  <exceptionMessage>Showing a modal dialog box or form when the application is not running in UserInteractive mode is not a valid operation. Specify the ServiceNotification or DefaultDesktopOnly style to display a notification from a service application.</exceptionMessage>
  <exceptionStackTrace>   at System.Windows.Forms.Form.ShowDialog(IWin32Window owner)
   at System.Windows.Forms.Form.ShowDialog()
   at Microsoft.BizTalk.Configuration.Program.RunConfigProgressUIThread()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()</exceptionStackTrace>
  <targetSite>System.Windows.Forms.DialogResult ShowDialog(System.Windows.Forms.IWin32Window)</targetSite>
  <HResult>80131509</HResult>
</WatsonInfo> 
```

您将看到此错误异常：

```
System.InvalidOperationException: Showing a modal dialog box or form when the application is not running in UserInteractive mode is not a valid operation. Specify the ServiceNotification or DefaultDesktopOnly style to display a notification from a service application. 
```

如果你一直对这个过程感兴趣（在命令行中远程配置 biztalk），我刚刚在[Azure BizTalk One Touch Configuration](http://jeremiedevillard.wordpress.com/2013/05/06/one-touch-biztalk-configuration-in-windows-azure-virtual-machine/)上写了一篇文章。

我编写了一个extendedconfiguration.exe 组件以不使用模式对话框并在远程中启用powershell 的配置。我在绕过双跳问题后使用计划任务，但如果您在本地网络中，我认为您可以在您的计算机之间配置受信任的连接并在创建 pssession 时使用 -Authentication CredSSP 并且它应该可以工作。

希望这有帮助

Jérémie [MVP 集成](http://jeremiedevillard.wordpress.com/)

# javascript - Javascript将日期时间字符串转换为纪元

> ID：13707333
> 
> 赞同：35
> 
> 时间：2012-12-04T16:25:57.217
> 
> 标签：javascript, datetime, epoch

所以我放弃了……整天都在尝试这样做；

`dd/MM/yyyy hh:mm`我有一个以( )格式提供日期和时间的字符串`04/12/2012 07:00`。

我需要把它变成一个纪元日期，这样我就可以对其进行一些计算。我无法修改发送给我的日期时间格式。

JavaScript 或 jQuery 都可以。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-12-04T16:30:27.707

```
var someDate = new Date(dateString);
someDate = someDate.getTime(); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2020-06-08T08:51:26.167

您可以使用`Date.parse(date)`.

```
function epoch (date) {
  return Date.parse(date)
}

const dateToday = new Date() // Mon Jun 08 2020 16:47:55 GMT+0800 (China Standard Time)
const timestamp = epoch(dateToday)

console.log(timestamp) // => 1591606075000 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-12-04T16:29:31.460

[JavaScript 日期](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)在内部存储为自纪元以来的毫秒数。您只需要将其转换为数字，例如使用一元运算`+`符，即可获得它们。或者你可以使用[`.getTime`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime)。

更难的是解析您的日期字符串。您可能会使用正则表达式从字符串中提取值并将它们传递给[`Date.UTC`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/UTC)：

```
var parts = datestring.match(/(\d{2})\/(\d{2})\/(\d{4}) (\d{2}):(\d{2})/);
return Date.UTC(+parts[3], parts[2]-1, +parts[1], +parts[4], +parts[5]); 
```

这将为`1354604400000 ms`您的示例日期产生。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-06-24T20:56:03.603

您可以使用 momentjs 库来相当容易地做到这一点。

```
var epoch = moment(str).unix(); 
```

[http://momentjs.com/](http://momentjs.com/)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-10-11T08:56:58.253

我使用此代码将我的字符串日期时间转换为纪元

```
new Date(<datetime string>').getTime() 
```

例如 ：

```
let epoch = new Date('2016-10-11').getTime() 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2021-06-20T22:12:27.940

```
Number(new Date('04/12/2012 07:00')) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-20T12:12:18.547

```
var time = new Date().getTime() / 1000 + 900 + 330*60;

console.log("time = "+time); 
```

getTime() 将返回当前时间，最后 3 位以毫秒为单位，因此首先将其除以 1000。现在我添加了 900 表示我需要从当前时间开始的 15 分钟（如果您不需要进一步的延迟时间，您可以删除），需要 330*60（5 小时 30）将 GMT 时间转换为我当前区域的 IST时间。

使用以下网站测试您的时间：-

[https://www.epochconverter.com/](https://www.epochconverter.com/)

[![在此处输入图像描述](../Images/657a8b96c3b2fe0495ae937fdbbd5630.png)](https://i.stack.imgur.com/5UgMq.jpg)

希望它会帮助你:)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-02-20T16:39:12.867

由于您的日期格式是 dd/MM/yyyy hh:mm，因此您需要更改日期格式（步骤 1）。否则，您可以转到（步骤 2）。

步骤 1\. 将日期格式更改为 MM/dd/yyyy hh:mm

```
 var currentTime   = "21/02/2021 12:00"
  var monthPosition = currentTime.split('/', 2).join('/').length
  var day           = currentTime.substring(0, currentTime.indexOf('/'))
  var month         = currentTime.substring(currentTime.indexOf('/') + 1, monthPosition);
  var time          = month + "/" + day + currentTime.substring(month.length + day.length  + 1); //"02/21/2021 12:00" 
```

第 2 步：将日期更改为纪元时间

```
var epochTime = Date.parse(time);

//or get current time of epoch time
var currentEpoch = Date.parse(new Date()); 
```

注意：如果您尝试使用 new Date() 执行 Date.parse()，并遇到解析日期字符串的错误，请添加 toString()

```
var currentEpoch = Date.parse(new Date().toString()); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-19T10:14:15.753

我的答案是使用 JavaScript 将当前时间转换为纪元时间

const **currentDate** = Math.floor(new Date() / 1000);

控制台.log（**当前日期**）；//无论它将打印什么值，您都可以在该网站[https://www.epochconverter.com/](https://www.epochconverter.com/)检查相同的值以确认。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-24T13:12:01.317

**最简单的方法是——**

```
const moment = require('moment')

 function getUnixTime () { return this.getTime() / 1000 | 0 }
let epochDateTime = getUnixTime(new Date(moment().add(365, 'days').format('YYYY- 
MM-DD hh:mm:ss'))) 
```

# python - 如何导入模块

> ID：13707336
> 
> 赞同：3
> 
> 时间：2012-12-04T16:26:04.940
> 
> 标签：python

> **可能重复：**
> [如何从 python 中的测试模块导入 src](https://stackoverflow.com/questions/10287054/how-to-import-the-src-from-the-tests-module-in-python)

我想调用位于另一个目录中的另一个模块。我的代码结构是

```
flask_beginner/
  app.py
  models/
      __init__.py
      user.py
  tests/
      __init__.py
      user_test.py 
```

我想从 user_test.py 调用用户模块。我的 user_test.py 是这样的..

```
import models.user
.... 
```

但它会引发错误，即没有名为 models.user 的模块

你有什么主意吗？我的 Python 版本是 2.7.2。（带有 virtualenv）

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T16:30:56.500

```
import sys
sys.path.append('PathToModule')
import models.user 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:43:01.563

如果您从测试目录运行 user_test.py，它将无法找到模型包。但是，如果您从 flask_beginner 目录运行它，它将能够找到该模块。原因是您执行脚本的目录附加到 python 路径，因此它可以找到项目中的所有模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:49:14.497

当你运行 时`import <module_name>`，Python 在`PythonPath`变量中的所有目录中搜索具有该名称的模块，如果找到，则导入它。当前目录（即运行脚本的目录）通常位于 中`PythonPath`，因此大多数脚本将能够找到位于同一目录中的模块。

如果您需要导入不同目录中的模块，则需要将该目录添加到 PythonPath。您可以按如下方式执行此操作：

```
import sys
sys.path.append(<the_path_to_the_module>) 
```

（当然，你应该`<the_path_to_the_module>`用正确的路径替换，在这种情况下，它将是`'../models/user.py'`）

# linux - 将linux用户限制为文件夹和文件

> ID：13707337
> 
> 赞同：2
> 
> 时间：2012-12-04T16:26:09.463
> 
> 标签：linux, bash, ssh, putty

我有一个文件，我希望普通用户能够运行。例如

./file 参数1 参数2 参数3

但是，我想限制用户，这是他唯一能做的事情。我不希望他能够访问任何其他文件夹或文件，基本上运行该文件就是这样。我听说过 rbash，但不确定安全性等。

如果有帮助，我可以将文件放在每个用户的主目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:41:15.377

如果您只是在寻找一种安全的方式来为您的用户提供要执行的程序，那么 Unix 和 Linux 已经默认提供了此功能。

只需将可执行文件放在用户的主目录中（让用户成为文件的“所有者”）。

Unix/Linux 用户（以及代表该用户执行的任何程序）不能访问其他用户的目录/文件（特别是，他/她不能访问属于“root”的东西）。

对于大多数应用程序，这种方法通常被认为是安全的。

如果您的需求超出了这条线，您可以使用 chroot 来“监禁”您的可执行程序。看这里：

[http://en.wikipedia.org/wiki/Chroot](http://en.wikipedia.org/wiki/Chroot)

这种技术通常用于监禁在机器上运行但暴露在网络上的可能危险的程序（例如 HTTP 或 FTP 服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:35:10.293

困难的部分是您必须确保文件系统资源（文件/目录）具有以 0 结尾的权限签名（例如 750），这意味着永远不允许读取、写入、执行[`other`](http://www.zzee.com/solutions/unix-permissions.shtml)（不是所有者的人）或属于与该文件系统元素关联的组）。然后，您将添加不属于任何组的用户，并使他成为其主目录中该文件的所有者。

如果有更好的方法，我想知道。

# maven - 如何在 selenium webdriver 中启用登录 FirefoxWebdriver

> ID：13707339
> 
> 赞同：2
> 
> 时间：2012-12-04T16:26:11.857
> 
> 标签：maven, selenium, webdriver, testng, logback

我有一个使用 Maven、Spring、TestNG 和 Selenium Webdriver 的项目。我想为 Firefox webdriver 启用调试日志记录，因为每次运行测试时都会看到不一致的结果。当我通过 Maven 测试运行时，我看到了来自 Spring 和 TestNG 的日志消息，但我没有看到来自 Selenium 的任何内容。有没有办法启用日志记录，以便我可以看到 selenium 中发生了什么？我正在使用 Logback。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:40:57.083

System.setProperty('webdriver.log.file',)。这会将 Java 脚本控制台日志转储到给定文件。希望这可以帮助

# batch-file - ) 在这个时候是出乎意料的

> ID：13707340
> 
> 赞同：1
> 
> 时间：2012-12-04T16:26:20.890
> 
> 标签：batch-file, parentheses

我正在使用以下代码在重命名之前检查文件，如果没有，请检查另一个文件以显示消息。

```
SET offline=1
IF EXIST %webroot%\%sitename%\app_offline.htm.scheduled (
    call :displayMsg "Taking %sitename% website offline"
    ::                =================================
    REN %webroot%\%sitename%\app_offline.htm.scheduled app_offline.htm
) ELSE (
    IF EXIST %webroot%\%sitename%\app_offline.htm (
        call :displayMsg "%sitename% website is already offline"
        ::                =====================================
    )
) 
```

但是正在返回以下内容

```
D:\Company\DeploymentFolder>SET offline=1
) was unexpected at this time.

D:\Company\DeploymentFolder>        ) 
```

我看不出我的括号有问题？谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:51:33.193

用 a替换您的`::`评论，`REM`它应该可以工作。
您可以使用`::`，但您需要知道[括号中标签的](https://stackoverflow.com/a/4006006/463115)*两行*规则

# javascript - JavaScript 在 iPad 上的 Safari 中不起作用

> ID：13707341
> 
> 赞同：5
> 
> 时间：2012-12-04T16:26:23.287
> 
> 标签：javascript, ios, ipad, ios6, mobile-safari

我们有一个大型 Web 应用程序，我们发现它在 iPad 上的 Safari 中无法正常工作。虽然我们有一台 iPad 进行测试，但似乎无法在其上看到 Safari 中的 JavaScript 错误。Web Inspector 功能似乎需要一台我们没有的 Mac。

转到[https://desktoplawyer.secureclient.co.uk/dtl/index.cfm?event=base:tryDocument&rapidocsid=5700](https://desktoplawyer.secureclient.co.uk/dtl/index.cfm?event=base:tryDocument&rapidocsid=5700)，单击下一步，单击“英格兰和威尔士”，单击下一步：现在所有其他浏览器都会将您带到一个页面标题为“初步问题”，但在 iPad 上的 Safari 中，它停留在标题为“住所”的页面上。

我有哪些选择？请不要只告诉我我们必须购买 Mac ;-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:35:09.677

不久前，类似的事情发生在我身上。尝试在服务器端对 POST 请求的响应中添加以下标头，看看它是否有效：

```
Cache-Control: no-cache 
```

问题是，从 iOS 6 开始，Safari Mobile 缓存具有相同函数签名的 AJAX POST 方法。这意味着该方法将只执行一次，服务器的响应将被保存并重用于几个额外的请求。如果您多次在您的网站上发出相同的 POST 请求，您可能无法获取新信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:49:29.820

您可以尝试使用 Ripple Emulator 在浏览器中模拟 iPad [https://github.com/blackberry/Ripple-UI](https://github.com/blackberry/Ripple-UI)

另一种选择是一些远程调试工具，如 weiner - [http://people.apache.org/~pmuellr/weinre/docs/latest/](http://people.apache.org/~pmuellr/weinre/docs/latest/)

也许尝试下载适用于 Windows 的 Safari 并在那里进行测试？

仅供参考：按照您在我的 Mac 上的 Safari 中的步骤操作，没有错误。

# c# - 必须按“x”两次

> ID：13707343
> 
> 赞同：1
> 
> 时间：2012-12-04T16:26:28.917
> 
> 标签：c#, wpf, exit

在窗口中按下“x”按钮后，我的窗口中的内容会变黑，然后我必须再次按下“x”才能完全关闭程序。有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:41:13.357

这就是当应用程序没有响应时 Windows 的行为方式。我猜您在主 UI 线程中正在进行一些工作，这些工作阻止了 Form 响应 Close 事件。

当您在 WinForms 中执行长时间运行的操作时，您应该考虑使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。这将允许表单更新和正确响应。

- 编辑 -

抱歉刚刚看到您使用的是 WPF 而不是 WinForms。但同样的原则适用。另请参阅此问题：[如何使用 WPF 后台工作人员](https://stackoverflow.com/questions/5483565/how-to-use-wpf-background-worker)

# ruby-on-rails - 无法使用 Rails Shopify Gem 创建多个变体

> ID：13707345
> 
> 赞同：1
> 
> 时间：2012-12-04T16:26:31.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, shopify

在 Rails 3.2.2 中，我尝试使用 Rails Shopify Gem 3.0.1 创建具有多个变体的新 Shopify 产品。

一切都只使用 1 个选项，但是如果我尝试在我的变体中使用 2 个选项，则产品在保存时会出错：

```
#<ActiveResource::ResourceInvalid: Failed.  Response code = 422\.  Response message = Unprocessable Entity.>, @validation_context=nil, @errors=#<ActiveResource::Errors:0x0000010297a5b0 ...>>, @messages={:base=>["Options are not unique"]}> 
```

这是我的代码：

```
 variants = []

 variant = ShopifyAPI::Variant.new(
    :option1                => "-s-",
    :option2                => "azul",
    :option3                => "boxer",
    :inventory_management   => "shopify",
    :inventory_quantity     => 350
  )
  variants << variant

 variant = ShopifyAPI::Variant.new(
    :option1                => "-m-",
    :option2                => "azul",
    :option3                => "boxer",
    :inventory_management   => "shopify",
    :inventory_quantity     => 495
  )
  variants << variant

 variant = ShopifyAPI::Variant.new(
    :option1                => "-l-",
    :option2                => "azul",
    :option3                => "boxer",
    :inventory_management   => "shopify",
    :inventory_quantity     => 543
  )
  variants << variant

 variant = ShopifyAPI::Variant.new(
    :option1                => "-xl-",
    :option2                => "azul",
    :option3                => "boxer",
    :inventory_management   => "shopify",
    :inventory_quantity     => 425
  )
  variants << variant

 variant = ShopifyAPI::Variant.new(
    :option1                => "-s-",
    :option2                => "negro",
    :option3                => "boxer",
    :inventory_management   => "shopify",
    :inventory_quantity     => 778
  )
  variants << variant

product = ShopifyAPI::Product.new(
  :title              => original_p.title,
  :product_type       => original_p.product_type,
  :handle             => original_p.handle,
  :vendor             => original_p.vendor,
  :body_html          => original_p.body_html,
  :template_suffix    => original_p.template_suffix,
  :tags               => original_p.tags,
  :variants           => variants
)

product.save 
```

奇怪的是，如果我删除第 5 个变体（仍然具有“-s-”作为选项 1 的那个），产品会被保存，如果我尝试创建所有 5 个变体，则会出错。

你能给我一些关于我做错了什么的建议吗？

在此先感谢，奥古斯托

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:13:21.763

我忘记在产品中创建选项：

```
 option1 = ShopifyAPI::Option.new(
    :name     => "first option"
  )
  options << option1

  option2 = ShopifyAPI::Option.new(
    :name     => "second option"
  )
  options << option2

  option3 = ShopifyAPI::Option.new(
    :name     => "third option"
  )
  options << option3

    product = ShopifyAPI::Product.new(
      :title              => original_p.title,
      :product_type       => original_p.product_type,
      :handle             => original_p.handle,
      :vendor             => original_p.vendor,
      :body_html          => original_p.body_html,
      :template_suffix    => original_p.template_suffix,
      :tags               => original_p.tags,
      :variants           => variants,
      :options            => options
    ) 
```

# jquery - 可以使用 jquery 来显示/隐藏 ajaxcontroltoolkit 手风琴吗？

> ID：13707347
> 
> 赞同：0
> 
> 时间：2012-12-04T16:26:37.273
> 
> 标签：jquery, asp.net, ajaxcontroltoolkit, accordion

我有一个 AjaxControlToolkit，我想根据下拉值显示或隐藏它。

我可以通过更改“ShowLinkBut​​ton”控件的文本来隐藏它（在我想隐藏手风琴的地方使用空白“”），但我想隐藏手风琴本身。（即使文本为空白，手风琴也是可点击的。）

所以，这是我的jQuery代码：

```
$(function() {
    if ($('#<%= DDStatusList.ClientID %>').change(function() {
        var statusval2 = $("#SampleContent_Tabs_TabPanel3_DDStatusList").val();
        if (statusval2 == 4) {
            $('#<%= ShowLinkButton.ClientID%>').html("Show Accordion");
        }
        else {
            $('#<%= ShowLinkButton.ClientID%>').html("");
        }
    }));
});​ 
```

我尝试将 Accordion 和 LinkBut​​ton 的可见属性都设置为 false，然后在 jquery 函数中满足条件时将其设置为 true，但是这两种策略似乎都不起作用。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:47:25.940

你有没有试过这个：

```
$(function() {
    if ($('#<%= DDStatusList.ClientID %>').change(function() {
        var statusval2 = $("#SampleContent_Tabs_TabPanel3_DDStatusList").val();
        if (statusval2 == 4) {
            $('#<%= ShowLinkButton.ClientID%>').html("Show Accordion");
            //$find('<%= MyAccordion.ClientID%>').show();
            showAccordionPane('<%= MyAccordion.ClientID%>', 1);
        }
        else {
            $('#<%= ShowLinkButton.ClientID%>').html("");
            //$find('<%= MyAccordion.ClientID%>').hide();
            hideAccordionPane('<%= MyAccordion.ClientID%>', 1);
        }
    }));
});

// hides pane 1
function hideAccordionPane(AccordionCtrl, paneno) {
    $find(AccordionCtrl).get_Pane(paneno).header.style.display = "none";
    $find(AccordionCtrl).get_Pane(paneno).content.style.display = "none";
}​

// shows pane 1
function showAccordionPane(AccordionCtrl, paneno) {
    $find(AccordionCtrl).get_Pane(paneno).header.style.display = "block";
    $find(AccordionCtrl).get_Pane(paneno).content.style.display = "block";
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:52:52.573

```
document.getElementById('<%= MyAccordion.ClientID%>').AccordionBehavior.set_SelectedIndex(2)// expand panel nr.3
// index starts from 0 (number of panel ) if close  set it -1 
```

或jQuery

```
$('#<%= MyAccordion.ClientID %>').get(0).AccordionBehavior.set_SelectedIndex(2)

 $('#<%= MyAccordion.ClientID %>').get(0).set_TransitionDuration(1000) //set timeout for collapse in ms. 
```

隐藏带有内容的面板

```
 document.getElementById('ctl00_SampleContent_MyAccordion').AccordionBehavior.get_Pane(0).content.style.display='none';
    document.getElementById('ctl00_SampleContent_MyAccordion').AccordionBehavior.get_Pane(0).header.style.display='none'; 
```

Javscript 在[http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/Accordion/Accordion.aspx](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/Accordion/Accordion.aspx)在 chrome 的调试控制台中进行了测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T03:40:50.070

谢谢大家。

我最终这样做了：

```
if ($('#<%= DDStatusList.ClientID %>').change(function () {
                                        var statusval2 = $("#MainContent_Tabs_TabPanel3_DDStatusList").val();
                                        var statusvalcurrent = $("#MainContent_LabelStatusNumber").text();
                                        if (statusval2 == 4 && statusvalcurrent == 4.3) {

                                            $('#<%= status43panel.ClientID%>').show();

                                            //alert("show");
                                        }
                                        else {

                                            $('#<%= status43panel.ClientID%>').hide();

                                            //alert("hide");
                                        } 
```

# android - android locationManager 在 removeUpdates 后继续调用 onLocationChanged

> ID：13707349
> 
> 赞同：9
> 
> 时间：2012-12-04T16:26:45.823
> 
> 标签：android, gps, location

我有一个可以修复位置的应用程序。该应用程序将从 Gingerbread 开始推广到手机上。一旦应用程序获得位置修复，就会向用户显示 toast 消息。问题是当用户移动到下一个活动时，toast 消息可能会出现十次以上。

我想我已经正确地实现了生命周期，例如

1) 在 onCreate() 中获取位置管理器 2) 在 onResume() 中创建位置侦听器并将其传递给管理器 3)​​ 在 onStop() 中删除更新

我知道我可以通过调用绕过 Android > 4.x 中的这个问题

```
mlocManager.requestSingleUpdate(LocationManager.GPS_PROVIDER, mlocListener, null); 
```

但我必须适应 Gingerbread，所以调用单个请求不在 api 2.3.x 中。它在 Android 4 上运行良好，但在姜饼上，onLocationChanged 方法继续执行 10 次。

如何强制 onLocationChanged 方法在姜饼上只运行一次？

谢谢。

[编辑] 我注意到，当我移动到下一个活动时，onlocationchanged 方法会继续执行，但是如果我移动到另一个活动，那么位置请求将被成功删除

```
@Override
protected void onStop() {
    mlocManager.removeUpdates(mlocListener); 
    mlocListener = null;
    super.onStop();
}

@Override
protected void onResume() {
    mlocListener = new MyLocationListener();
    if(isCompOptionsReceived == true){
        if (Build.VERSION.SDK_INT > Build.VERSION_CODES.GINGERBREAD_MR1) {
            mlocManager.requestSingleUpdate(LocationManager.GPS_PROVIDER, mlocListener, null);
        }else{
            mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, mlocListener);   
        }
    }        
    super.onResume();
}

private class MyLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location loc) {
        //toast message
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status,                        Bundle extras) {
    }

}//end of MyLocationListener

@Override
protected void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    nfcscannerapplication = (NfcScannerApplication) getApplication();
    sIs = savedInstanceState;
    setContentView(R.layout.entryscreen);
    mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:40:33.707

下面的代码应该在 onPause 方法上执行，而不是在 onStop

```
mlocManager.removeUpdates(mlocListener); 
mlocListener = null; 
```

这将为所有 android 版本修复它。

# java - 这个 JFrame 的布局是什么？

> ID：13707351
> 
> 赞同：1
> 
> 时间：2012-12-04T16:26:53.437
> 
> 标签：java, swing, layout, jframe

我需要您的帮助/建议来找到正确的布局并组织 JFrame。好吧，我有一个相当“复杂”的 JFrame，我不知道哪个是最好的布局。我必须使用 GridBagLayout 吗？

如果是这样，你能在课堂组织方面给一些建议吗？每次我使用 GridBagLayout 时，结果都是随机的。

![框架](../Images/839ecd384ca717d850012793ff158ef8.png)

右键显示和缩放图片..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:37:21.207

前几天我在做类似的布局时也有同样的问题。我发现这个链接对 gridbag 布局配置很有帮助。
[GridBagLayout 帮助](http://blue-walrus.com/?p=582)

您不必使用 gridbag 布局，还有许多其他布局可以实现所需的外观和感觉。上面链接中的教程与您图片中的布局具有相似的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:43:42.607

试试[BoxLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)。

*   主面板（水平）-> 左面板，表格面板
*   左面板（垂直）-> 顶部面板、按钮面板、垂直胶水（吸收空白空间）
*   顶部面板（垂直）-> 信息面板 1 等。
*   信息面板（水平）-> 标签、文本字段
*   按钮面板（水平）-> 按钮 1、按钮 2 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:01:38.813

如果你读法语：[见那边](http://bbclone.developpez.com/fr/java/tutoriels/uiswing/gridbaglayout/)

来自 Oracle 的 ref ：[Follow there](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

只有这两个链接，我开始使用这个“凌乱”的布局，它实际上类似于 HTML 表格。

# c# - 扩展方法错误

> ID：13707352
> 
> 赞同：-3
> 
> 时间：2012-12-04T16:26:56.723
> 
> 标签：c#

刚刚收到此错误消息**“Extension method must be defined in a non-generic static class”**，下面是给我错误的 Class，我知道它与 Fisher-Yates shuffle 方法有关，但即使我删除它，错误仍然出现。我还删除了该方法的所有其他调用，所以我只能假设它的一些自动生成的文件是问题所在。知道我能做什么吗？因为在我实施洗牌之前，我的程序运行得很好。

```
 namespace WindowsFormsApplication6
    {
        class RandomContent
        {
            public static string randomFilepath()
        {
            // string array med alla filpaths
            // välj en slumpad filpath att returnera
            return "frågor.txt";
        }

        // Fisher-Yates list-shuffle
        public static void Shuffle<T>(this IList<T> list)
        {
            Random rng = new Random();
            int n = list.Count;
            while (n > 1)
            {
                n--;
                int k = rng.Next(n + 1);
                T value = list[k];
                list[k] = list[n];
                list[n] = value;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:28:24.063

> “扩展方法必须在非泛型静态类中定义”

所以把它放在一个非泛型的静态类中......

```
public static class Extensions
{
    // Fisher-Yates list-shuffle
    public static void Shuffle<T>(this IList<T> list)
    {
        Random rng = new Random();
        int n = list.Count;
        while (n > 1)
        {
            n--;
            int k = rng.Next(n + 1);
            T value = list[k];
            list[k] = list[n];
            list[n] = value;
        }
    }
} 
```

# yii - 将参数传递给 Yii 中的函数

> ID：13707353
> 
> 赞同：0
> 
> 时间：2012-12-04T16:26:58.753
> 
> 标签：yii

我在我的 main.php 文件中设置了这个：

```
'params'=>array(
   'TOTAL_ACCOUNT_NUMBER'=>'500100'
) 
```

我可以使用 Yii::app()->params['TOTAL_ACCOUNT_NUMBER'] 成功访问数据

我想将此作为默认值传递给如下方法：

```
public function myMethod($acctNum=Yii::app()->params['TOTAL_ACCOUNT_NUMBER']) {
  ...
} 
```

这会产生语法错误：意外的'('。

我可能可以创建一个解决方法，例如：

```
public function myMethod($acctNum=null) {
   $acctNum = !isset($acctNum) ? Yii::app()->params['TOTAL_ACCOUNT_NUMBER'] : $acctNum;
} 
```

但是有没有更简单的方法来格式化原始方法以避免语法错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:33:59.277

您正在调用参数列表中的函数。(Yii::app()) 根据您的错误在 PHP 中是不允许的。

> 默认值必须是常量表达式，而不是（例如）变量、类成员或函数调用。

来自[http://php.net/manual/en/functions.arguments.php](http://php.net/manual/en/functions.arguments.php)

您自己的解决方法将是一个不错的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:42:54.167

您可以在函数中将“500100”作为默认值传递吗？如果您的应用程序中的参数值发生变化，这显然不是正确的方法。但是，如果它是一个常量，您可以将该值作为默认值传递给您的函数。

# c# - 需要正则表达式来匹配以数字开头的字符串

> ID：13707356
> 
> 赞同：0
> 
> 时间：2012-12-04T16:27:01.740
> 
> 标签：c#, regex

我需要正则表达式来匹配从数字开始的字符串（数字可以是整数或浮点数）。例如：

```
100px
100 px
1.0ft
1.0 ft
0.001ft2
0.001 ft2 
```

我是这个东西的新手，有人可以帮助我吗？我已经尝试过类似的东西：

```
Regex numberBeginRegex = new Regex(@"([\d]+|[\d]+[.][\d]+)."); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:29:27.090

你可以使用这个正则表达式： -

```
"(\d+(\.\d+)?).*" 
```

`(\d+(\.\d+)?)` - 匹配整数或浮点数。通过使用`?`量词，小数部分是可选的，这意味着 -`match 0 or 1`

* * *

实际上，您的正则表达式也可以，但是您忘记将`*`量词放在末尾`.`：-

```
"([\d]+|[\d]+[.][\d]+).*"  // Note the `*` at the end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:30:00.197

你可以使用这个正则表达式

```
 var reg=@"^(\d+(\.\d+)?).*";
 List<string> nums=Regex.Matches(inp,reg,RegexOptions.Multiline)
                        .Cast<Match>()
                        .Select(x=>x.Value)
                        .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:29:41.497

如果您想检查它们是否以数字开头，您可以使用它`substring()`来获取第一个字符

# mysql - SQl - 将表从链接服务器复制到 SQL 2008 R2 上的表

> ID：13707358
> 
> 赞同：1
> 
> 时间：2012-12-04T16:27:07.977
> 
> 标签：mysql, sql, sql-server-2008-r2

我需要将所有表从链接服务器复制到 SQL 2008 R2 上的表。我已经尝试了以下但它给出了一个错误。我需要将表复制到的数据库称为 Apples。我的链接服务器称为“MYSQL”，链接服务器上的数据库称为“drupaltest”：

```
select * into Apples
from OPENQUERY(MYSQL, 'SELECT * FROM MYSQL.drupaltest') 
```

这是错误：链接服务器“MYSQL”的 OLE DB 提供程序“MSDASQL”返回消息“[MySQL][ODBC 5.1 Driver][mysqld-5.5.28-log]Table 'mysql.drupaltest' 不存在”。消息 7350，级别 16，状态 2，第 1 行无法从链接服务器“MYSQL”的 OLE DB 提供程序“MSDASQL”获取列信息。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:29:37.653

你说数据库是命名`drupaltest`的，错误是指一个表。

假设这`MYSQL`只是您的链接服务器名称，请尝试指定表...

```
... from OPENQUERY(MYSQL, 'SELECT * FROM drupaltest.table') 
```

# java - 用ant在两个jvm中并行运行junits

> ID：13707359
> 
> 赞同：2
> 
> 时间：2012-12-04T16:27:09.507
> 
> 标签：java, ant, junit

我有大量的junit，运行它们需要很长时间。但是CPU和内存利用率只有30%左右。我不能在同一个 jvm 的并行线程中运行 junit，因为它们不是线程安全的，而且不可能修复它们。据我所知，junit ant 任务启动单独的 jvm 来运行 junit。是否可以从ant为junit运行几个jvm？我认为这样的解决方案可以显着减少执行时间。

目前我使用这样的代码用 ant 运行它们：

```
<for param="bundle" keepgoing="true">
<path>
    <dirset dir="${testdir}/plugins">
        <depth max="0"/>
    </dirset>
</path>
<sequential>

    <echo message="Running tests in bundle @{bundle}"/>
    <junit outputtoformatters="no" printsummary="yes" failureproperty="test.failed" maxmemory="512m" fork="yes"  forkmode="once">
        <classpath>
            <path refid="tests.classpath" />
        </classpath>

        <formatter type="xml" />
        <batchtest todir="${junit.result.dir}">
            <fileset dir="@{bundle}/src">
                <patternset refid="test.sources" />
            </fileset>
        </batchtest>
    </junit>
</sequential> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:34:11.460

看看这个 [http://ant.apache.org/manual/Tasks/parallel.html](http://ant.apache.org/manual/Tasks/parallel.html)

> 的主要用例是同时运行外部程序，例如应用程序服务器，以及 JUnit 或 TestNG 测试套件。任何试图同时运行大型 Ant 任务序列（例如 javadoc 和 javac）的人都隐含地承担了识别和修复它们运行的​​任务的所有并发错误的任务。

有这个例子

```
<parallel>
  <wlrun ... >
  <sequential>
    <sleep seconds="30"/>
    <junit fork="true" forkmode="perTest" ... >
    <wlstop/>
  </sequential>
</parallel> 
```

编辑：更新了 forkmode 设置

# vba - 如何将所有电子邮件移动到另一个文件夹，除了最近的

> ID：13707360
> 
> 赞同：2
> 
> 时间：2012-12-04T16:27:10.680
> 
> 标签：vba, outlook

我想将所有电子邮件（最近的电子邮件除外）从一个文件夹移动到另一个文件夹。

下面的代码移动了除一封电子邮件之外的所有电子邮件，但它不是收到的最后一封电子邮件。

我是否必须参考 .ReceivedTime 给它一个时间参考？

```
For i = objstartFolder.Items.Count - 1 To 0 Step -1

    With objstartFolder.Items(2)

        On Error Resume Next

        .Move objMoveFolder

   End With 
```

我试过了

```
 For i = objstartFolder.Items.Count To 1 Step -1
 For i = 1 To objstartFolder.Items.Count Step 1
 For i = 0 To objstartFolder.Items.Count -1 Step 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T22:32:44.680

尝试先排序然后删除。

objstartFolder.Items.Sort “收到”，假

有关示例，请参阅[http://msdn.microsoft.com/en-us/library/aa163981(v=office.10).aspx](http://msdn.microsoft.com/en-us/library/aa163981(v=office.10).aspx)

编辑 2015 02 16

本来我是直接把文件夹里的项目排序的。如果它有效，那将是不可靠的，因为 True / False 是相同的

```
Sub SortByReceived_Move()

    Dim myNameSpace As Namespace
    Dim myFolder As folder
    Dim myMoveToFolder As folder
    Dim myItems As Items
    Dim j As Long

    Set myNameSpace = Application.GetNamespace("MAPI")
    Set myFolder = myNameSpace.GetDefaultFolder(olFolderInbox).Folders("@Play")
    Set myMoveToFolder = myFolder.Folders("@Test")

    Set myItems = myFolder.Items

    myItems.sort "Received", True
    Debug.Print myItems(1).Subject & " - " & myItems(1).ReceivedTime

    For j = myItems.count To 2 Step -1
        Debug.Print myItems(j).Subject & " - " & myItems(j).ReceivedTime
        myItems(j).Move myMoveToFolder
    Next j

ExitRoutine:
    Set myNameSpace = Nothing
    Set myFolder = Nothing
    Set myMoveToFolder = Nothing
    Set myItems = Nothing

End Sub 
```

编辑 2015 02 16 结束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:47:10.577

首先，不要使用多点符号，尤其是在循环中——每个“.” 将返回一个全新的 COM 对象。在排序和循环之前缓存 Items 集合。您可能还想先限制 ( `Items.Restrict`) 集合。

```
Items = objstartFolder.Items;
Items.Restrict("[ReceivedTime] >= '2013-01-01' ");
Items.Sort("ReceivedTime");
for (int i=Items.Count; i >= 1; i--)<
{
    Item = Items.Item(i);
    ...
    Item.Move(SomeOtherfolder); 
} 
```

# variables - Erlang 中的匿名变量

> ID：13707361
> 
> 赞同：16
> 
> 时间：2012-12-04T16:27:17.583
> 
> 标签：variables, erlang

从 Erlang 编译器的角度来看，下划线变量和以下划线开头的命名变量之间的确切区别是什么（除了增加代码的可读性）？

例如是`_`和`_Var`不同的？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-05T12:10:50.747

*don't care*变量`_`是一个**非常特殊**的变量，它匹配任何东西并且**从不**绑定到一个值。当我知道那里有东西但我不在乎价值是什么并且我永远不会使用时使用它。Seeing`_`永远不会被绑定，它不能在表达式中使用，编译器会将其标记为错误。

像这样的变量`_Var`是完全正常的变量，您可以匹配它们并将绑定到值，这意味着它们可以在表达式中使用。为变量加上前缀`_`是关于*intent*的。编译器通常会警告您有关模式中绑定但从未使用过的变量，这通常是错误的标志。但是编译器不会对以`_`like in为前缀的变量发出警告`_Var`。目的是我想给变量一个名字，命名是好的，但我知道我永远不会使用它。

请记住，这`_`实际上是唯一的特殊变量，并且`_Var`是普通变量，如果使用的话，它们的行为也是如此。如果您感到反常，那么您可以在所有变量前加上前缀`_`，一切仍然有效。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-04T16:31:12.647

让我们在这里引用[文档](http://www.erlang.org/doc/reference_manual/expressions.html#id76122)：

> 匿名变量用下划线 ( `_`) 表示，可以在需要变量但**可以忽略其值时使用**。[...]
> 
> `_`例如，以下划线 () 开头`_Height`的变量是普通变量，而不是匿名变量：但是编译器会忽略它们**，因为它们不会为未使用的变量生成任何警告**。

换句话说，`_Var`当您需要匹配匹配的表达式时使用表单 - 但不想进一步使用它 AND/OR 您想显示其含义。`_`当你和编译器都不应该关心将被它匹配的表达式时，你使用变量。

**示例 1：**

```
member(_, []) -> []. 
```

在这个函数中不是很清楚第一个`_`匹配什么。但是直接重写，像这样：

```
member(Elem, []) -> []. 
```

... 如果代码是用`warn_unused_vars`设置的标志编译的，将产生一个警告。但是，您仍然可以通过使用下划线变量使您的代码在此处可读：

```
member(_Elem, []) -> []. 
```

**示例 2：**

```
{_, _, Some} = {1, 2, 3} 
```

这个元组匹配会很顺利，因为元组的前两个元素将被完全忽略。

```
{_Var, _Var, Some} = {1, 2, 3} 
```

但是，这种匹配会失败：虽然`_Var`不必使用，但应该用相同的值“填充”！因为 1 不等于 2，所以这里的条件不成立。

# asp.net-mvc - 如何使辅助方法只返回一次 HTML 的一部分？

> ID：13707363
> 
> 赞同：0
> 
> 时间：2012-12-04T16:27:26.060
> 
> 标签：asp.net-mvc, jquery-ui, razor, html-helper, cassette

**最新编辑：我在问题末尾添加了我的解决方案，基于 chrisvillanueva 的回答**

我有一个创建按钮的辅助方法，当单击此按钮时会出现一个对话框（jQuery UI 对话框），该按钮在页面上出现多次。
辅助方法包含我只想呈现一次的部分，例如 javascript 代码和单击按钮时出现的对话框的 HTML。（基本上唯一应该多次呈现按钮本身的 HTML 的东西）

为了确保只有在我使用 Cassette (http://getcassette.net/) 时才加载 javascript，但我找不到对话框 HTML 的好解决方案，我看到 Cassette 有 HTML 模板，但它非常复杂，因为HTML 在脚本标签中呈现。

目前我的解决方法是使用 Cassette 的 HTML 模板，并在我以 开头和结尾的模板中，这样它消除了包装块并且 HTML 由浏览器呈现 - 我知道，这很糟糕......：/
这是 HTML我目前正在使用 Cassette 的 HTML 模板

```
</script> <!-- This closes the starting <script> that is generated by Cassette -->
<div class="recommendDialog" title="Recommend This Goal To A Friend">

</div> 
<script> <!-- This is for the closing </script> that is generated by Cassette --> 
```

将不胜感激任何想法，最好使用 Cassette 或 MVC3 内置的东西（我不喜欢添加更多库）

编辑：也许还有一种简单的方法可以将jQuery UI的对话框与脚本块内的html一起使用（我尝试使用它并进行搜索，但除了将内容“推送”到另一个html元素之外找不到任何东西）

**示例代码：**

```
@helper BarControl(WebViewPage<MyModel> page)
{ 
    // Currently using Cassette for javascripts
    Cassette.Views.Bundles.Reference("barcontrol", "body");

    // I tried using Cassette HTML Templates but the rendered HTML is in a <script> tag
    // which I can't use with jQuery UI's dialog widget
    // Cassette.Views.Bundles.Reference("barcontroltemplates", "body"); 

    // This HTML is for the dialog, should only be rendered once in the final HTML
    <div class="dialog" title="I'm a dialog">
        <span>I'm a dialog</span>
    </div> 

    // This is the HTML for the button which should be rendered every time this helper is called
    <div class="area">
        <div class="right">
            <ul>
                <li id="button"><a href="#">I'm a button</a></li>
            </ul>
        </div>
    </div>
} 
```

javascript只是在按钮上设置了一个点击事件`$(".dialog").dialog()`

**我最终做了什么：**
基于 chrisvillanueva 的回答。我使用 Cassette 的 HtmlTemplates 来呈现这个 HTML：

```
<script id="dialogHtmlTemplate" type="text/html">
    <div class="dialog" title="dialog">    
        <span>Content of dialog</span>
    </div> 
</script> 
```

为了将它与 jQuery UI 的对话框（[http://api.jqueryui.com/dialog/](http://api.jqueryui.com/dialog/)）一起使用，我使用以下代码：`$($("#dialogHtmlTemplate").html()).dialog()` 这会通过浏览器呈现 html 并在其周围创建对话框，它无需添加更多库，如不需要针对上述情况的 mustache.js 或 jQuery 模板（没有模板只是重复）。

性能方面我认为这不是最好的解决方案（它每次都复制内部 html）但现在它已经足够好了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:43:11.960

我在大型 Web 应用程序中使用了带有 mustache.js 和 angularJS 的 html 模板/部分。html 模板的想法是在需要的特定位置一遍又一遍地重复一个标记块。如果盒式磁带提供此功能，您应该使用它而不是使用解决方法。使用 jquery 创建按钮并将其附加到需要的区域可能会更好。然后为动态按钮创建一个单击处理程序，以便它呈现一个 jquery ui 模式。

这是一些伪代码，可以让您更多地了解我的想法..

```
...

$("<button class='dButton'> your button</button>").appendTo('your target selector');
$('a wrapper div on your page').on('click','.dButton',function(e){
      e.preventDefault();
      //put code here to show your jquery ui modal
}); 
```

以下是有关 appendTo 方法的一些信息：

[appendTo() 文档](http://api.jquery.com/appendTo/)

这只是一种方法，但很难在没有可用示例代码的情况下帮助您使用盒式磁带。

# c# - 指定的类型未被识别

> ID：13707367
> 
> 赞同：3
> 
> 时间：2012-12-04T16:27:48.013
> 
> 标签：c#, xml, serialization, xml-serialization

错误：

> {"指定的类型未被识别：name='VitalsPlugin', namespace='', at ."}

代码：

```
public class SimpleSerializer
{
    static void Main()
    {
        string xml = "<Plugin xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:type=\"VitalsPlugin\" ID=\"eaded5f3-7019-47b9-8f9f-e7c1879774f4\"><CopyForwardChecked>true</CopyForwardChecked></Plugin>";
        StringReader reader = new StringReader(xml);
        var result = Deserialize(reader);
    }

    static Plugin Deserialize(TextReader xml)
    {
        XmlSerializer xsr = new XmlSerializer(typeof(Plugin), new Type[] {typeof(VitalsPlugin)});
        Plugin result = xsr.Deserialize(xml) as Plugin;

        return result;
    }
} 
```

其他有用的代码：

```
[XmlInclude(typeof(VitalsPlugin))]
public class Plugin
{
}

public class VitalsPlugin
{
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T16:40:35.413

[经过多次修补](http://publib.boulder.ibm.com/infocenter/adiehelp/v5r1m1/index.jsp?topic=/com.ibm.etools.xmlbuilder.doc/topics/txsityp.html)，我遇到了`xsi:type`. 阅读定义后，我意识到这种类型指定了一个派生类。我将代码更新为

```
public class VitalsPlugin: Plugin
{
} 
```

它有效。

# magento - Magento - 以编程方式更改商店基本网址

> ID：13707368
> 
> 赞同：0
> 
> 时间：2012-12-04T16:27:55.110
> 
> 标签：magento

我想以编程方式更改 magento 商店的基本 URL（安全和不安全）。

可以在后端手动更改设置，如下图所示：

[http://geo.magenting.com/m/kb/images/attachments/change-magento-base-url_1.jpg](http://geo.magenting.com/m/kb/images/attachments/change-magento-base-url_1.jpg)

我想为我的每家商店更改 4 和 5 的值。

像这样的东西：

```
$store = Mage::getModel('core/store')->load($storeId);
$store -> setBaseUrlSecure("xyz.com");
$store -> save(); 
```

关于我如何做到这一点的任何帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T17:22:45.820

这最好在数据设置脚本（不是“正常”设置脚本）中完成；见[`Mage_Core_Model_Resource_Setup::setConfigData()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Model/Resource/Setup.php#L892)。

在设置脚本中，遍历存储并按如下方式设置数据：

```
/*
    ...
    @var $installer Mage_Core_Model_Resource_Setup
*/
$stores = Mage::app()->getStores();
foreach ($stores as $storeId => $store) {
    $installer->setConfigData('web/unsecure/base_url',$value,'stores',$storeId);
    $installer->setConfigData('web/secure/base_url',$sValue,'stores',$storeId);
}

/* ... */ 
```

显然，由您决定如何为每个正确的商店注入 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:33:13.690

我知道一种方法是直接更新数据库中的数据，但可能有更好的方法：

```
SELECT * FROM core_config_data where path like 'web/unsecure/base_url' or path like 'web/secure/base_url'; 
```

当范围为“商店”时`scope_id`。`store_id`您可以在那里更新或插入值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-26T07:22:53.967

对于生产环境，您可以简单地在路径`'web/unsecure/base_url'`和路径处写入数据库。`'web/secure/base_url'``{{base_url}}`

因此，Magento 将您所在的实际网址作为基本网址。

# php - ZF2 不使用 InputFilter 验证输入

> ID：13707369
> 
> 赞同：1
> 
> 时间：2012-12-04T16:27:57.190
> 
> 标签：php, zend-framework2

我正在尝试创建一个抽象类来管理输入验证 - 在这个类中，我有返回 InputFilterInterface 对象的静态函数，然后我可以将这些对象添加到处理数据的模型类中的接口中。然而，即使数据是有效的，似乎也没有任何数据经过验证。顺便说一句，我没有使用表单——数据是通过 Ajax 而不是 HTML 表单输入的。

这是我的代码：

中央图书馆：

```
abastract class InputFilters {
    public static function monthIDFilter($fieldName = 'monthID', $required = FALSE) {
        $factory = new InputFactory();
        return $factory->createInputFilter(array(
            $fieldName => array(
                'name' => $fieldName,
                'required' => $required,
                'validators' => array(
                    array('name' => 'not_empty'),
                    array('name' => 'string_length', 'options' => array(
                        'min'=>'6', 'max'=>'6'
                    )),
                    array('name' => 'regex', 'options'=>array(
                        'pattern' => '/^[0-9]{6}$/'
                    ))
                ),
            )
        ));
    }
} 
```

模型：

```
class DataModel implements \Zend\InputFilter\InputFilterAwareInterface {
    protected $_inputFilter;

    public function __construct()
    {
        $this->setInputFilter(InputFilters::monthIDFilter());
    }

    public function setInputFilter(InputFilterInterface $inputfilter)
    {
        if(!$this->_inputFilter) {
            $this->_inputFilter = new InputFilter();
        }
        $this->_inputFilter->add($inputfilter);
    }

    public function getInputFilter()
    {
        if(!$this->_inputFilter) {
            $this->_inputFilter = new InputFilter();
        }
        return $this->_inputFilter;
    }
} 
```

最后，在控制器中：

```
public function dataAction()
{
    $model = new DataModel();
    $inputFilter = $model->getInputFilter();
    $inputFilter->setData($_REQUEST);
    print_r($_REQUEST);
    print_r($inputFilter->getValues());
    if ($inputFilter->isValid()) {
        if ($inputFilter->has('monthID')) {
            echo $inputFilter->getValue('monthID');
            $formMonth = $inputFilter->getValue('monthID');
        } else {
            echo 'nope';
            $formMonth = '';
        }
        $grid->setSqlString($formMonth);
        $data = $grid->outputData();
        Json::out($data);
    } 
```

在我的输出中，我看到包含我的 monthID (201212) 的输入和一个应该是验证结果的数组： Array ( [] => Array ( [monthID] => ) ) 和单词 'nope' 表示有('monthID') 检查失败。

关于我哪里出错的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:40:26.983

尝试在 DataModel 中将 createInputFilter 更改为 createInput。

```
 return $factory->createInput(array(
        $fieldName => array(
            'name' => $fieldName,
            'required' => $required,
            'validators' => array(
                array('name' => 'not_empty'),
                array('name' => 'string_length', 'options' => array(
                    'min'=>'6', 'max'=>'6'
                )),
                array('name' => 'regex', 'options'=>array(
                    'pattern' => '/^[0-9]{6}$/'
                ))
            ),
        )
    )); 
```

# mysql - 尝试在 MySql 中创建存储过程时出错

> ID：13707374
> 
> 赞同：0
> 
> 时间：2012-12-04T16:28:12.690
> 
> 标签：mysql, database, stored-procedures

尝试创建 mysql 存储过程时出错。这是存储过程

```
 DELIMITER $$

CREATE

    PROCEDURE `crossqueue_bw`.`pr_SaveProfile`(IN vProfileId INT)

    BEGIN
        IF SELECT COUNT(ProfileId) FROM tblprofile WHERE ProfileId=vProfileId > 0 THEN

        ELSE

        END IF;
    END$$

DELIMITER ; 
```

这是错误

```
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'select count(ProfileId) from tblprofile where ProfileId=vProfileId > 0 then

' at line 6 
```

**更新：：**

尝试使用此查询

```
 DELIMITER $$

CREATE

    PROCEDURE `crossqueue_bw`.`pr_SaveProfile`(IN vProfileId INT)

    BEGIN
        DECLARE v_count INT;
        v_count = SELECT COUNT(ProfileId) FROM tblprofile WHERE ProfileId=vProfileId;
        IF v_count > 0 THEN

        ELSE

        END IF;
    END$$

DELIMITER ; 
```

这是错误

```
 Error Code : 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= SELECT COUNT(ProfileId) FROM tblprofile WHERE ProfileId=vProfileId;
        if v_cou' at line 7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:32:44.217

在您的 SP 中使用：

```
 DECLARE v_count int;

    set v_count := (SELECT COUNT(ProfileId) FROM tblprofile WHERE ProfileId=vProfileId);

    IF (v_count > 0) THEN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:44:17.897

实际上，@Sashi 报告了 2 个错误，其中一个是缺少的括号，另一个是 if 和 else 部分中至少应该存在一个条件，否则它将显示错误。

这是工作代码

```
 DELIMITER $$

CREATE

    PROCEDURE `crossqueue_bw`.`pr_SavePrssosssfile`(IN vProfileId INT)

    BEGIN
        IF (SELECT COUNT(ProfileId) FROM tblprofile WHERE ProfileId=vProfileId) > 0 THEN
        SET @q=0;
        ELSE
        SET @q=0;
        END IF;
    END$$

DELIMITER ; 
```

# java - 如何暂停程序中间循环以等待按下按钮 java - 动作监听器

> ID：13707375
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:28:20.817
> 
> 标签：java

> **可能重复：**
> [如何循环等待按钮按下？](https://stackoverflow.com/questions/1641209/how-can-i-wait-for-a-button-press-in-a-loop)

我认为这个问题之前已经被问过但是我还没有找到解决我的情况的答案。

我目前有一个国际象棋程序（命令行），它允许用户输入持有他们想要移动的棋子的正方形的坐标。开始是这样的。

```
boolean success;
do {
    success = true;

    // take in coordinates;

    // perform checks such as not empty square etc;

    if (/*problem found*/) {
        // print error message;
        success = false;
    }
}
while (!success); 
```

这在命令行中运行时效果很好，因为每次运行循环时，程序都会暂停执行以等待用户输入坐标。但是，现在我想通过使用按钮和动作监听器的 GUI 来实现这一点。最方便的解决方案是除了输入坐标部分之外不要更改代码，该部分将被替换为以下内容，

```
pause program;
user presses button which sets coordinates;
when button pressed program continues;
perform checks…; 
```

如何才能做到这一点？java中有没有说等待按钮按下的方法？此方法必须确保程序的其他部分（例如绘制 GUI）不会停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:52:52.933

我想你不需要“暂停”。单击按钮时，您需要调用一个函数。您可以将要执行的操作放入函数中，然后从侦听器的实现中调用此函数。正如您的示例所说的按钮，您可以将 ActionListener 实现到您的 Frame 对象，然后 actionPerformed() 函数调用您的函数。

```
public class GUI extends JFrame implements ActionListener{
    //...
    Button b;
    public GUI(){
        //...
        b = new Button();
        this.getContentPane().add(b);
        this.addListener(b);
        //...
    }
    //...
    public void actionPerformed(ActionEvent e){
        if(e.getSource()==b){
            // your TODO list here
        }
    }
} 
```

# html - 如何使用 Capybara 找到灯箱/花式箱

> ID：13707380
> 
> 赞同：0
> 
> 时间：2012-12-04T16:28:34.113
> 
> 标签：html, ruby, fancybox, cucumber, capybara

我还没有找到一个明确的答案来在我的幻想框模式负载 web 应用程序中查找和操作元素。

```
within("div#fancybox-wrap.fancybox-desktop.fancybox-type-iframe.fancybox-opened") do
    page.find_by_id('blah container').click
end 
```

这是根据要求提供的更大的上下文

```
<div class="fancybox-wrap fancybox-desktop fancybox-type-iframe fancybox-opened" style="width: 415px; height: auto; display: block; position: fixed; top: 20px; left: 467px; opacity: 1; overflow: visible;">
<div class="fancybox-skin" style="padding: 15px;">
    <div class="fancybox-outer">
        <div class="fancybox-inner" style="width: 385px; height: 229px; overflow: hidden;">
            <iframe class="fancybox-iframe" name="fancybox-frame" frameborder="0" hspace="0" scrolling="auto" src="index.php?module=Yadda&amp;action=[where I wan to be]&amp;popup=Y&amp;id=[unique]&amp;width=1010&amp;height=600">
                [the stuff I want to access]
            </iframe>
        </div>
    </div>
<div title="Close" class="fancybox-item fancybox-close"> 
```

这会产生以下拒绝...

```
 Unable to find css "div#fancybox-wrap.fancybox-desktop.fancybox-type-iframe.fancybox-opened" (Capybara::ElementNotFound) 
```

我需要添加/减去什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:54:14.567

css 定位器不正确。

有

```
div#fancybox-wrap 
```

表示 id 为“fancybox-wrap”的 div。基于 html，“fancybox-wrap”是一个类。因此，您实际上想要（注意“#”更改为“.”）：

```
within("div.fancybox-wrap.fancybox-desktop.fancybox-type-iframe.fancybox-opened") do
    page.find_by_id('blah container').click
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T07:09:26.757

找到受此答案启发的更好答案

[在 Poltergeist 中临时将 js_errors 设置为 false](https://stackoverflow.com/questions/22020680/temporarily-set-js-errors-to-false-in-poltergeist)

但只有在您使用 poltergist 时才有效，该 poltergist 将 capybara 与 phantomjs 一起使用

```
# think about it. this is what you do in real life
# Try to click thing you actually want. get caught by the the overlay then click to dismiss it away
tried_before = false
  if page.has_css?('#autostart')
    begin
      click_link "Insurance", match: :first 
    rescue Capybara::Poltergeist::MouseEventFailed
      # close the fancy box
      if tried_before
        raise e
      end 
      find('#fancybox-close').click
      retry
    end 
  end 
end 
```

它有什么作用？

1.  尝试点击我们真正想要的东西
2.  如果它现在不能，我们知道覆盖在路上
3.  我们现在可以点击它

# matlab - 一次绘制可变数量的向量？

> ID：13707384
> 
> 赞同：2
> 
> 时间：2012-12-04T16:28:51.913
> 
> 标签：matlab, for-loop, struct, plot

我在想：

假设我有一个结构：

```
s(1).Xval=[1 2 3];
s(2).Xval=[1 2 3 4];
s(3).Xval=[1 2 3];

s(1).Yval=[1 2 3];
s(2).Yval=[4 3 2 1];
s(3).Yval=[3 2 1]; 
```

现在我想将这三条线绘制在一个图中。我可以通过以下方式做到这一点：

```
plot(s(1).Xval,s(1).Yval,s(2).Xval,s(2).Yval,s(3).Xval,s(3).Yval); 
```

这是可能的，因为 MATLAB 通过以下语法为绘图函数的可变数量的输入参数提供了机会：

```
plot(X1,Y1,...,Xn,Yn) 
```

我的问题是：有没有办法在没有预定义数量的地块的情况下调用这个函数？所以在这种情况下，我绘制了三行，但如果我不知道要绘制多少行，这种语法是否仍然可行？

我当然知道我可以通过使用`Hold All`和`For`循环来做到这一点。但是，我问这个是因为我想在必要时避免循环。有没有一个优雅的解决方案？还是我应该只使用循环？

编辑：索引确实有错字。s.Xval(1) 代替 s(1).Xval

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:38:26.830

您可以使用[绘图](http://www.mathworks.com/help/matlab/ref/plot.html)功能来做到这一点。文档提到：

> 如果 Xn 或 Yn 是矩阵，它们必须是二维的且大小相同，并且 Yn 的列与 Xn 的列相对应。plot 按照当前坐标区的 ColorOrder 和 LineStyleOrder 属性指定的顺序自动选择颜色和线型。

要制作 X 和 Y 矩阵，您需要用 NaN 填充它们。像这样：

```
X = [1 2 3 NaN
     1 2 3 4
     1 2 3 NaN]
Y = [1 2 3 NaN
     4 3 2 1
     3 2 1 NaN] 
```

由于绘图函数绘制列与列，并且您希望行与行相反，因此您需要转置它们。

```
plot(X',Y','Marker','x') 
```

会给你

![在此处输入图像描述](../Images/b0657e111c18e825ca8b39de80954cff.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:57:14.653

我假设你有一个错字，所以正确的结构是这样的：

```
s(1).Xval=[1 2 3];
s(2).Xval=[1 2 3 4];
s(3).Xval=[1 2 3];

s(1).Yval=[1 2 3];
s(2).Yval=[4 3 2 1];
s(3).Yval=[3 2 1]; 
```

% 将所有数据收集到一个单元格中

```
c = {};
for k = 1 : length(s)
    c = cat(2, c, {s(k).Xval}, {s(k).Yval});
end 
```

％和情节：

```
plot(c{:}); 
```

请注意，这`c{:}`不是单个变量，而是作为元素的数量`c`

**更新：**没有循环，但丑陋

```
c = reshape(reshape({s.Xval, s.Yval}, length(s), [])', [], 1);
plot(c{:}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T12:44:44.500

我实际上找到了另一种在我看来相当不错的方法。

```
plotdata = cell(length(s)*2,1);
plotdata(1:2:end) = {s.Xval};
plotdata(2:2:end) = {s.Yval};
plot(axes,plotdata{:}); 
```

这段代码简单易读，并且不需要循环。

# android - 如何获取由自定义列表视图适配器设置的 EditText 的值

> ID：13707385
> 
> 赞同：0
> 
> 时间：2012-12-04T16:28:52.817
> 
> 标签：android, android-listview, android-arrayadapter

我有一个列表视图适配器。有一个列表，它是一个 EditText。我有一个按钮。现在单击按钮时，我想获取edittext的值。注意：适配器中有两个列表。EditText 的位置是 1，另一个列表的位置是 0。

在 onCreate() 中：

```
 private ListView listView;
private List<BaseListElement> listElements;

    listElements = new ArrayList<BaseListElement>();
    listElements.add(new FriendList(0));
    listElements.add(new TextArea(1));

    if (savedInstanceState != null) {
        // Restore the state for each list element
        for (BaseListElement listElement : listElements) {
            listElement.restoreState(savedInstanceState);
        }   
    }

    // Set the list view adapter
    listView.setAdapter(new ActionListAdapter(getActivity(), 
                        R.id.list, listElements));

    shareButton = (Button) view.findViewById(R.id.sharebtn);
    Svalue = (EditText) view.findViewById(R.id.Tstatus);
    shareButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            String value = Svalue.getText().toString();

            if(value != null && value.length()>0){
                Log.e("msg", value);
            } 
```

适配器：

```
 private class ActionListAdapter extends ArrayAdapter<BaseListElement> {
    private final String Tag = "ActionAdapter";
    int k = 0;
    private List<BaseListElement> listElements;

    public ActionListAdapter(Context context, int resourceId, List<BaseListElement> listElements) {
        super(context, resourceId, listElements);
        this.listElements = listElements;
        for (int i = 0; i < listElements.size(); i++) {
            listElements.get(i).setAdapter(this);
        }
        k = 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        if (view == null) {
            if(position == 0){
            LayoutInflater inflater =
                    (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.shareview, null);
            }else{
                LayoutInflater inflater =
                        (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                view = inflater.inflate(R.layout.textarea, null);
            }
            k = k++;
            String ki = Integer.toString(position);
            Log.e(Tag, ki);

        }
        else{
            String ki = Integer.toString(position);
            Log.e(Tag, "else : "+ki);
        }

        BaseListElement listElement = listElements.get(position);

            view.setOnClickListener(listElement.getOnClickListener());
            ImageView icon = (ImageView) view.findViewById(R.id.icon);
            TextView text1 = (TextView) view.findViewById(R.id.withWhom);
            TextView text2 = (TextView) view.findViewById(R.id.selectFriend);
            EditText status = (EditText) view.findViewById(R.id.Tstatus);
            if (icon != null && position == 0) {
                icon.setImageDrawable(listElement.getIcon());
            }
            if (text1 != null && position == 0) {
                text1.setText(listElement.getWithWhom());
            }
            if (text2 != null && position == 0) {
                text2.setText(listElement.getSelectFriend());
            }
            if(status != null)
            Log.e("adapter class", status.getText().toString());
        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:21:24.573

对不起我的问题。[我在这里](https://stackoverflow.com/questions/12670737/custom-listview-adapter-textchangedlistener-calls-for-wrong-edittext)找到答案

如果这`position`是我的愿望清单的位置，那么在`if()`我`textchangelistener()`用来获取价值的范围内。

就我的情况而言，我的愿望清单的位置始终是 1。所以我`textchangelistener()`在`if(position == 1)`范围内使用。

# c# - LINQ to XML：查询主体必须以 select 子句或 group 子句结尾

> ID：13707388
> 
> 赞同：3
> 
> 时间：2012-12-04T16:29:08.123
> 
> 标签：c#, linq

有人可以指导我修复此查询的错误：

```
 var objApps = from item in xDoc.Descendants("VHost") 
                          where(from x in item.Descendants("Application"))
                          select new clsApplication
                       {
                           ConnectionsTotal = item.Element("ConnectionsTotal").Value
                       }; 
```

它显示编译器错误“查询主体必须以选择子句或组子句结尾”。我哪里错了？

将不胜感激任何帮助..

谢谢。

编辑：这是我的 XML（这里没有关闭标签）...我需要应用程序中的连接计数值..

```
 - <Server>
  <ConnectionsCurrent>67</ConnectionsCurrent> 
  <ConnectionsTotal>1424182</ConnectionsTotal> 
  <ConnectionsTotalAccepted>1385091</ConnectionsTotalAccepted> 
  <ConnectionsTotalRejected>39091</ConnectionsTotalRejected> 
  <MessagesInBytesRate>410455.0</MessagesInBytesRate> 
  <MessagesOutBytesRate>540146.0</MessagesOutBytesRate> 
- <VHost>
  <Name>_defaultVHost_</Name> 
  <TimeRunning>5129615.178</TimeRunning> 
  <ConnectionsLimit>0</ConnectionsLimit> 
  <ConnectionsCurrent>67</ConnectionsCurrent> 
  <ConnectionsTotal>1424182</ConnectionsTotal> 
  <ConnectionsTotalAccepted>1385091</ConnectionsTotalAccepted> 
  <ConnectionsTotalRejected>39091</ConnectionsTotalRejected> 
  <MessagesInBytesRate>410455.0</MessagesInBytesRate> 
  <MessagesOutBytesRate>540146.0</MessagesOutBytesRate> 
- <Application>
  <Name>TestApp</Name> 
  <Status>loaded</Status> 
  <TimeRunning>411642.953</TimeRunning> 
  <ConnectionsCurrent>11</ConnectionsCurrent> 
  <ConnectionsTotal>43777</ConnectionsTotal> 
  <ConnectionsTotalAccepted>43135</ConnectionsTotalAccepted> 
  <ConnectionsTotalRejected>642</ConnectionsTotalRejected> 
  <MessagesInBytesRate>27876.0</MessagesInBytesRate> 
  <MessagesOutBytesRate>175053.0</MessagesOutBytesRate> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:33:12.790

编译器抱怨这部分

```
from x in item.Descendants("Application") 
```

在你的`Where`条款里面。你应该改变它，以便

*   最后有一个`select`子句，并且
*   它构成了一个表达式，用于计算您想要保留`true`的对象。`item`

这是我对您尝试做的最好的猜测（**编辑：**第二次尝试）

```
var objApps = from item in xDoc.Descendants("VHost").Descendants("Application") 
              select new clsApplication {
                  ConnectionsTotal = item.Element("ConnectionsTotal").Value
              }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T16:34:04.417

该错误是在抱怨您的内部 from 子句（在 where 内），看起来您正在尝试进行多选（无意的剪辑参考）。

```
var objApps = from item in xDoc.Descendants("VHost") 
              from x in item.Descendants("Application")
              select new clsApplication
                       {
                           ConnectionsTotal = x.Element("ConnectionsTotal").Value
                       }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T17:19:32.027

只需执行以下操作，不需要该`where`子句。后代将搜索**所有**级别的儿童，而不仅仅是以下：

```
var objApps = from item in xDoc.Descendants("Application") 
                   select new clsApplication
                   {
                       ConnectionsTotal = item.Element("ConnectionsTotal").Value
                   }; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T16:31:42.070

您在 where 子句中的查询中缺少选择，您可以将其更改为

```
var objApps = from item in xDoc.Descendants("VHost") 
                     where(item.Descendants("Application").Any())
                     select new clsApplication
                     {
                           ConnectionsTotal = item.Element("Application").Element("ConnectionsTotal").Value
                     }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T16:35:40.943

这可能会有所帮助：

```
 var objApps = from item in xDoc.Descendants("VHost")
                       from x in item.Descendants("Application")
                      select new clsApplication
                   {
                       ConnectionsTotal = item.Element("Application").Element("ConnectionsTotal").Value
                   }; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T16:37:04.347

我喜欢 linq 的程序化方式，它的方法可以更加线性；我相信你想要

```
var result =   xDoc.Descendants("VHost")
                   .Descendants("ConnectionsTotal")
                   .Select(ele => ele.Value )
                   .Select( value => new clsApplication
                           {
                               ConnectionsTotal = value
                           })
                         ; 
```

--- 在 LinqPad 中测试 ---

```
string xml = @"
<Data>
<Server>
  <ConnectionsCurrent>67</ConnectionsCurrent> 
  <ConnectionsTotal>1424182</ConnectionsTotal> 
  <ConnectionsTotalAccepted>1385091</ConnectionsTotalAccepted> 
  <ConnectionsTotalRejected>39091</ConnectionsTotalRejected> 
  <MessagesInBytesRate>410455.0</MessagesInBytesRate> 
  <MessagesOutBytesRate>540146.0</MessagesOutBytesRate> 
 </Server>
 <VHost>
  <Name>_defaultVHost_</Name> 
  <TimeRunning>5129615.178</TimeRunning> 
  <ConnectionsLimit>0</ConnectionsLimit> 
  <ConnectionsCurrent>67</ConnectionsCurrent> 
  <ConnectionsTotal>1424182</ConnectionsTotal> 
  <ConnectionsTotalAccepted>1385091</ConnectionsTotalAccepted> 
  <ConnectionsTotalRejected>39091</ConnectionsTotalRejected> 
  <MessagesInBytesRate>410455.0</MessagesInBytesRate> 
  <MessagesOutBytesRate>540146.0</MessagesOutBytesRate> 
 </VHost>
 <Application>
  <Name>TestApp</Name> 
  <Status>loaded</Status> 
  <TimeRunning>411642.953</TimeRunning> 
  <ConnectionsCurrent>11</ConnectionsCurrent> 
  <ConnectionsTotal>43777</ConnectionsTotal> 
  <ConnectionsTotalAccepted>43135</ConnectionsTotalAccepted> 
  <ConnectionsTotalRejected>642</ConnectionsTotalRejected> 
  <MessagesInBytesRate>27876.0</MessagesInBytesRate> 
  <MessagesOutBytesRate>175053.0</MessagesOutBytesRate></Application>
  </Data>";

  var XDoc = XDocument.Parse(xml);

  XDoc.Descendants("VHost")
      .Descendants("ConnectionsTotal")
      .Select (ele => ele.Value )
      .Dump(); 
```

# postgresql - 如何确定postgresql中的字符是大写还是小写？

> ID：13707401
> 
> 赞同：13
> 
> 时间：2012-12-04T16:29:44.203
> 
> 标签：postgresql, uppercase, lowercase

我没有找到类似`isupper`或`islower`在 postgresql 中的任何函数。我真正需要的是从表中选择所有记录，其中一列包含大写（但不是大写）单词。即每个单词的第一个符号为大写，第二个为小写。单词可以用任何语言书写。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-04T16:38:35.607

如果只选择列中第一个字母的大小写不等于列中第一个字母的小写版本的行呢？

就像是：

```
SELECT * FROM table 
    WHERE SUBSTRING(col FROM 1 FOR 1) != LOWER(SUBSTRING(col FROM 1 FOR 1)) 
```

理论上，上述内容也应考虑数据库字符集/语言环境。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-04T17:40:09.190

您可以使用[Postgres 正则表达式](http://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-POSIX-REGEXP)来测试您的具体情况：

```
select * from sample 
where col ~ E'^[[:upper:]][^[:upper:]]' 
```

`E'^[[:upper:]][[:lower:]]'`如果第二个字符必须是小写字母而不是任何非大写字母，则可以使用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-05T06:02:22.290

如果你想知道一个字符串是否至少包含一个小写字符，那么你可以使用上面的函数[upper(mystr)=mystr]：

```
dbname=> select upper('AAbbCC')='AAbbCC';
 ?column? 
----------
 f
(1 row)

dbname=> select upper('AABBCC')='AABBCC';
 ?column? 
----------
 t
(1 row) 
```

您可以使用相同的逻辑来使用 lower() sql 函数检查字符串是否包含至少一个大写字符。

对于更复杂的模式，您将需要使用早期答案中提出的正则表达式或子字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T16:36:56.887

由于`postgresql`字符串比较区分大小写，因此 BobG 的答案更好

另一种解决方案是将[ascii](http://www.asciitable.com/)与[字符串函数一起使用](http://www.postgresql.org/docs/9.1/static/functions-string.html)

像这样

```
SELECT * 
FROM yourTable
WHERE (ascii(LEFT(yourColumn), 1) BETWEEN 65 AND 90) 
  AND (ascii(SUBSTRING(yourColumn from 2 for 1), 1) BETWEEN 97 AND 122) 
```

当它在 65 到 90 之间时，它是一个大写字母，正如您在我链接的 ascii 表中看到的那样

如果在 97 到 122 之间，则为小写

# c# - 重命名从 FTP 服务器下载的文件并使用重命名的文件上传到单独的 FTP 服务器

> ID：13707402
> 
> 赞同：2
> 
> 时间：2012-12-04T16:29:44.723
> 
> 标签：c#, ftp

因此，我的 FTP 程序在下载和上传部分的静态文件名上工作得很好。现在管理层要求程序能够重命名下载的文件并将日期附加到 MMdd 格式的文件中，然后将该文件上传到 ftp 服务器。

我想我的代码对于这里的重命名部分是正确的

```
//Generate name for download file
string filePath = @"c:\";
string fileName = Path.Combine(filePath,string.Format("PMP{MMdd}.txt", DateTime.Now)); 
```

我的问题是如何将该变量传递给程序的上传部分。

这就是我定义类的方式

```
public void upload(string remoteFile, string localFile) 
```

这就是我将静态文件名传递给类的方式

```
/* Upload a File */
UploadftpClient.upload("testup.txt", @"c:\testup.txt"); 
```

我使用此处的代码构建了程序[http://www.codeproject.com/Tips/443588/Simple-Csharp-FTP-Class](http://www.codeproject.com/Tips/443588/Simple-Csharp-FTP-Class)

编程不是我的强项，我不知道如何在这里完成我需要做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:34:07.557

这是你要找的吗？

```
UploadftpClient.upload(Path.GetFileName(localfile), localfile); 
```

编辑：以下行应替换您正在使用的行

```
string fileName = Path.Combine(filePath, "PMP" + DateTime.Now.ToString("MMdd") + ".txt"); 
```

# objective-c - mustache，在不知道数据结构的情况下渲染字符串

> ID：13707403
> 
> 赞同：0
> 
> 时间：2012-12-04T16:29:54.270
> 
> 标签：objective-c, json, mustache

我有一个这样的json：

```
{
    "questionTemplate": "1",
    "answerTemplate": "1",
    "placeholders": {
        "qd0": "1",
        "qd1": "2",
        "qd2": "2",
        "qd3": "3",
        "qd4": "5",
        "qd5": "2",
        "qd6": "3",
        "qd7": "3",
        "ad0": "60",
        "ad1": "{{qd1}}+{{qd3}}",
        "ad2": "{{qd1}}+{{qd3}}+{{ad1}}",
        "ad3": "5",
        "ad4": "10",
        "ad5": "3",
        "ad6": "10",
        "ad7": "9"
    },
    "answeres": [
        {
            "r": "({{qd1}}+{{ad7}})*{{ad2}}"
        }
    ]
} 
```

如果有一个字符串，`{{qd1}}+{{qd3}}`我应该计算键`qd1`和`qd2`. 所以我应该用 mustache 替换存储在引用键中的值。

我的问题是它完全通用：一个 json 可能是这样的，另一个会不同！

我该怎么办？

我试图了解如何使用

```
+ (id)templateFromString:(NSString *)templateString
               error:(NSError **)error; 
```

和

```
- (NSString *)renderObjectsFromArray:(NSArray *)objects error:(NSError **)error; 
```

但我不确定是否是我需要的

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:53:53.233

我是 GRMustache 的作者。您能否提供 1\. 一些真实（不太大）的数据和模板，2\. 您目前编写的代码，3\. 预期结果？我会尽力帮助你。

# java - 使用 JAXB 解组 xml - 使用 XmlType 和 proporder 的命名空间

> ID：13707408
> 
> 赞同：5
> 
> 时间：2012-12-04T16:30:06.407
> 
> 标签：java, jaxb, unmarshalling

我正在尝试使用 JAXB 解组 xml 文件。当我使用具有正确名称和命名空间的@XmlElement 时，解组工作（例如@XmlElement(name = "name", namespace="http://www.test.com")）

如果我将 XmlType 与 propOrder 一起使用，不幸的是它不再使用了（例如 @XmlType(namespace="http://www.test.com", name = "", propOrder = {"name", "description"})）。

xml文件（test.xml）的内容：

```
<Operation xmlns="http://www.test.com">
  <Parameter>
    <name>Param1</name>
    <description>Description of Parameter1</description>
  </Parameter>
  <Parameter>
    <name>Param2</name>
    <description>Description of Parameter2</description>
  </Parameter>
</Operation> 
```

JAXBExample.java 的内容是：

```
package stackoverflow.problem.jaxb.ns;

import java.io.FileNotFoundException;
import java.io.FileReader;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;

public class JAXBExample {

  public static void main(String[] args) throws JAXBException, FileNotFoundException   {
  String xmlFilename = "test.xml";

    JAXBContext context = JAXBContext.newInstance(Operation.class);

    System.out.println("Output from our XML File: ");
    Unmarshaller um = context.createUnmarshaller();
    Operation op = (Operation) um.unmarshal(new FileReader(xmlFilename));

    System.out.println("Operation-Content: " + op);
  }

} 
```

的内容

包stackoverflow.problem.jaxb.ns；

```
import java.util.List;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="Operation", namespace="http://www.test.com")
@XmlAccessorType(XmlAccessType.FIELD)

public class Operation {

  @XmlElement(name = "Parameter", namespace="http://www.test.com")
  List<Parameter> parameterList;

  @Override
  public String toString(){
    String retVal = "";
    for(Parameter currentParameter: parameterList){
      retVal += currentParameter.toString() + "\n";
    }   
    return retVal;
  }
} 
```

Parameter.java 的内容是：

```
package stackoverflow.problem.jaxb.ns;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlType(namespace="http://www.test.com", name = "", propOrder = {"name", "description"})
@XmlAccessorType(XmlAccessType.FIELD)
public class Parameter {

  //@XmlElement(name = "name", namespace="http://www.test.com")
  String name;

  //@XmlElement(name = "description", namespace="http://www.test.com")
  String description;

  @Override
  public String toString(){
    return this.name + "\t" + this.description;
  }
} 
```

如果我取消注释最后一个代码块 (Parameter.java) 中的两个 @XmlElement 行，则解组工作正常。如果不包括这两行，则 Parameter 对象中的两个字段都为空。在 XmlType 中使用 propOrder 时是否有另一种方法来声明命名空间？还是我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T17:07:56.023

命名空间也可以在每个包中定义，在一个名为 的文件中`package-info.java`，这样您就不必在每个类或字段上重复它：

```
@javax.xml.bind.annotation.XmlSchema (
    namespace = "http://www.test.com",
    elementFormDefault=javax.xml.bind.annotation.XmlNsForm.QUALIFIED
)
package stackoverflow.problem.jaxb.ns; 
```

# php - 使用 PHP echo POST 计算页面加载时输入字段的 jQuery 事件方法是什么？

> ID：13707418
> 
> 赞同：1
> 
> 时间：2012-12-04T16:30:32.007
> 
> 标签：php, jquery, calculator, onload-event

我用 jquery 做了一个非常基本的输入字段计算器，它计算特定的 html 输入字段并将总和打印到下面的输入中。

当调用 jquery 事件：keyup、change 等时，它的工作方式与预期的一样。但是，有时我需要从 SESSION 或 POST 变量设置输入字段值

像这样：

```
echo "<div class='calculate_data' data-amount='". $x[$i] ."'>". $y[$i] ."</div>";
echo "<input class='calculate_input' name='input_".$i."' type='text' value='". @$_POST['input_'.$i]."' />";
echo "<input id='total' type='text' disabled='disabled' />"; 
```

然后计算器应该在页面加载时计算这些值。我几乎尝试了所有事件，但脚本不会计算：

```
$(document).ready(function() {
    $('.calculate_input').bind("click mouseover keyup change focus load on ready", function() {
        var sum = 0;

        //Sum up
        $('.calculate_input').each(function() {
            sum += Number($(this).val() * $(this).prev('.calculate_data').attr('data-amount'));
        }

        //Set the sum of all the previous fields to the #total field    
        $('#total').val(sum);
        if($('#total').val() == "NaN"){
            $('#total').val("-");
        }
    });
}); 
```

什么 jQuery 事件方法完成了任务或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:34:06.703

如果您希望在页面加载时发生这种情况.. 显式触发事件。

你可以试试这个

```
$('.calculate_input').click(); 
```

根据我的知识，还准备好任何非事件..

```
$('.calculate_input').on("click mouseover keyup change focus load ", 
```

使用`.on()`而不是`.bind()`附加事件

您的代码应包含在**DOM Ready**处理程序中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:38:21.597

您不需要使用这么多事件类型。您只需要在页面加载和更改时使用它。jQuery 已经应该在页面加载时运行，所以只需在语句之外触发它。

**更新** 根据您的 jQuery 更改而更改

```
 $(document).ready(function() {
    $('.calculate_input').bind("change", function() {
        var sum = 0;

        //Sum up
        $('.calculate_input').each(function() {
            sum += Number($(this).val() * $(this).prev('.calculate_data').attr('data-amount'));
        }

        //Set the sum of all the previous fields to the #total field    
        $('#total').val(sum);
        if($('#total').val() == "NaN"){
            $('#total').val("-");
        }
    });
 $('.calculate_input').trigger('change'); //when the document is ready, trigger the change
}); 
```

# objective-c - 遇到异步（我认为）加载 UITableView 的问题

> ID：13707419
> 
> 赞同：1
> 
> 时间：2012-12-04T16:30:33.350
> 
> 标签：objective-c, ios, uitableview

我有一个视图控制器，它有各种输入，当单击一个按钮时，我将 prepareForSegue 调用到 UITableViewController，并传递一个将被解析到该 tableview 中的数组。

这一切都很好而且很花哨，但是解析是通过解析从互联网 URL 加载的数据来进行的。发生这种情况时，视图停留在第一个视图控制器（不是表）上，并且按钮显示为单击（蓝色），直到所有数据都加载完毕，然后它转到表视图（带有解析的数据）。

我想做的是让它立即转到表格视图，然后随着数据通过网络加载，随着时间的推移用解析的数据填充表格视图。我想做的是使用 GCD 将数据异步加载到主线程以外的队列中。

问题是，我在 Google 上找不到任何相关信息（或者只是遇到了麻烦）。有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:40:06.727

使用 AFNetworking 异步执行此操作。本[教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_afnetworking/)将是一个不错的选择.. 看看...

# android - 无法在 sencha touch 2 中为 android 平台构建应用程序

> ID：13707421
> 
> 赞同：1
> 
> 时间：2012-12-04T16:30:38.650
> 
> 标签：android, touch

我已经搜索了该网站以查看是否有人遇到相同或类似的问题，但我找不到与我遇到的问题相关的任何信息。我正在尝试编译一个 sencha touch 2 项目来构建一个 android 应用程序，但它没有完全成功地编译。

当我运行此命令时， `sencha app build native` 针对 android 平台。

我得到的错误如下：

```
[WRN]           [ [1000] : Yui Compressor Warning <> Trailing comma is not legal in an ECMA-262 object initial
izer =>                     }    ] :: ( C:\wamp\www\sencha-touch\GS\app\view\Blog.js => 24 : 21 )
[WRN]           [ [1000] : Yui Compressor Warning <> Trailing comma is not legal in an ECMA-262 object initial
izer =>                         }, ] :: ( C:\wamp\www\sencha-touch\GS\app\view\Main.js => 13 : 4 )
[WRN]           [ [1000] : Yui Compressor Warning <> Trailing comma is not legal in an ECMA-262 object initial
izer =>                         }, ] :: ( C:\wamp\www\sencha-touch\GS\app\view\Main.js => 17 : 4 )
[WRN]           [ [1000] : Yui Compressor Warning <> Trailing comma is not legal in an ECMA-262 object initial
izer =>             } ] :: ( C:\wamp\www\sencha-touch\GS\app\view\Main.js => 22 : 13 )
[INF]           Processing class inheritance graph
[INF]           Processing instantiation refereces to classes and aliases
[WRN]           [ [1000] : Yui Compressor Warning <> Trailing comma is not legal in an ECMA-262 object initial
izer =>                     }    ] :: ( C:\wamp\www\sencha-touch\GS\app\view\Blog.js => 24 : 21 )
[WRN]           [ [1000] : Yui Compressor Warning <> Trailing comma is not legal in an ECMA-262 object initial
izer =>                         }, ] :: ( C:\wamp\www\sencha-touch\GS\app\view\Main.js => 13 : 4 )
[WRN]           [ [1000] : Yui Compressor Warning <> Trailing comma is not legal in an ECMA-262 object initial
izer =>                         }, ] :: ( C:\wamp\www\sencha-touch\GS\app\view\Main.js => 17 : 4 )
[WRN]           [ [1000] : Yui Compressor Warning <> Trailing comma is not legal in an ECMA-262 object initial
izer =>             } ] :: ( C:\wamp\www\sencha-touch\GS\app\view\Main.js => 22 : 13 )
[INF]           Processing source dependencies
[WRN]           [ [1000] : Yui Compressor Warning <> Trailing comma is not legal in an ECMA-262 object initial
izer =>                         }, ] :: ( C:\wamp\www\sencha-touch\GS\app\view\Main.js => 13 : 4 )
[WRN]           [ [1000] : Yui Compressor Warning <> Trailing comma is not legal in an ECMA-262 object initial
izer =>                         }, ] :: ( C:\wamp\www\sencha-touch\GS\app\view\Main.js => 17 : 4 )
[WRN]           [ [1000] : Yui Compressor Warning <> Trailing comma is not legal in an ECMA-262 object initial
izer =>             } ] :: ( C:\wamp\www\sencha-touch\GS\app\view\Main.js => 22 : 13 )
[WRN]           [ [1000] : Yui Compressor Warning <> Trailing comma is not legal in an ECMA-262 object initial
izer =>                     }    ] :: ( C:\wamp\www\sencha-touch\GS\app\view\Blog.js => 24 : 21 )
[INF]           Concatenating output to file C:\wamp\www\sencha-touch\GS\build\GS\package\app.js
[INF]           Completed compilation.
[INF]           Processed remote file touch/sencha-touch.js
[INF]           Processed local file app.js
[INF]           Minified app.js
[INF]           Minified resources/css/app.css
[INF]           Generated app.json
[INF]           Embedded microloader into index.html
[ERR]           BUILD FAILED
[ERR]           com.sencha.exceptions.BasicException: The following error occurred while executing this line:
[ERR]           C:\wamp\www\sencha-touch\GS\.sencha\app\build-impl.xml:120: javax.script.ScriptException: sun.
org.mozilla.javascript.internal.EcmaError: SyntaxError: unterminated string literal (<Unknown source>#22(eval)
#132) in <Unknown source>#22(eval) at line number 132
[ERR]                   at com.sencha.exceptions.BasicException.wrap(BasicException.java:43)
[ERR]                   at com.sencha.cli.Command.dispatch(Command.java:104)
[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]                   at com.sencha.cli.AbstractCommand.dispatch(AbstractCommand.java:182)
[ERR]                   at com.sencha.ant.SenchaCommandTask.doExecute(SenchaCommandTask.java:58)
[ERR]                   at com.sencha.ant.BaseAntTask.execute(BaseAntTask.java:22)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]                   at org.apache.tools.ant.Target.performTasks(Target.java:413)
[ERR]                   at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[ERR]                   at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
[ERR]                   at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)

[ERR]                   at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:156)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:72)
[ERR]                   at com.sencha.command.BasePluginCommands$BasePluginCommand.run(BasePluginCommands.java
:87)
[ERR]                   at com.sencha.command.BasePluginCommands$BasePluginCommand.run(BasePluginCommands.java
:91)
[ERR]                   at com.sencha.command.BasePluginCommands$BaseNamePathCommand.run(BasePluginCommands.ja
va:135)
[ERR]                   at com.sencha.command.app.AppCommands$BuildCommand.execute(AppCommands.java:106)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at com.sencha.cli.Command.dispatch(Command.java:78)
[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]                   at com.sencha.command.Sencha.main(Sencha.java:71)
[ERR]           Caused by: C:\wamp\www\sencha-touch\GS\.sencha\app\build-impl.xml:126: The following error occ
urred while executing this line:
[ERR]           C:\wamp\www\sencha-touch\GS\.sencha\app\build-impl.xml:120: javax.script.ScriptException: sun.
org.mozilla.javascript.internal.EcmaError: SyntaxError: unterminated string literal (<Unknown source>#22(eval)
#132) in <Unknown source>#22(eval) at line number 132
[ERR]                   at org.apache.tools.ant.ProjectHelper.addLocationToBuildException(ProjectHelper.java:5
51)
[ERR]                   at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:444)
[ERR]                   at org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:105)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]                   at org.apache.tools.ant.Target.performTasks(Target.java:413)
[ERR]                   at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[ERR]                   at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
[ERR]                   at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)

[ERR]                   at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:156)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:80)
[ERR]                   at com.sencha.command.ant.AntCommand.execute(AntCommand.java:75)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at com.sencha.cli.Command.dispatch(Command.java:78)
[ERR]                   ... 31 more
[ERR]           Caused by: C:\wamp\www\sencha-touch\GS\.sencha\app\build-impl.xml:120: javax.script.ScriptExce
ption: sun.org.mozilla.javascript.internal.EcmaError: SyntaxError: unterminated string literal (<Unknown sourc
e>#22(eval)#132) in <Unknown source>#22(eval) at line number 132
[ERR]                   at org.apache.tools.ant.util.ReflectUtil.toBuildException(ReflectUtil.java:183)
[ERR]                   at org.apache.tools.ant.util.ReflectUtil.throwBuildException(ReflectUtil.java:166)
[ERR]                   at org.apache.tools.ant.util.ReflectUtil.invoke(ReflectUtil.java:110)
[ERR]                   at org.apache.tools.ant.util.ReflectWrapper.invoke(ReflectWrapper.java:81)
[ERR]                   at org.apache.tools.ant.util.optional.JavaxScriptRunner.evaluateScript(JavaxScriptRunn
er.java:103)
[ERR]                   at org.apache.tools.ant.util.optional.JavaxScriptRunner.executeScript(JavaxScriptRunne
r.java:67)
[ERR]                   at org.apache.tools.ant.taskdefs.optional.script.ScriptDef.executeScript(ScriptDef.jav
a:350)
[ERR]                   at org.apache.tools.ant.taskdefs.optional.script.ScriptDefBase.execute(ScriptDefBase.j
ava:50)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]                   at org.apache.tools.ant.Target.performTasks(Target.java:413)
[ERR]                   at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[ERR]                   at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.
java:38)
[ERR]                   at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[ERR]                   at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:442)
[ERR]                   ... 52 more
[ERR]           Caused by: javax.script.ScriptException: sun.org.mozilla.javascript.internal.EcmaError: Syntax
Error: unterminated string literal (<Unknown source>#22(eval)#132) in <Unknown source>#22(eval) at line number
 132
[ERR]                   at com.sun.script.javascript.RhinoScriptEngine.eval(Unknown Source)
[ERR]                   at com.sun.script.javascript.RhinoScriptEngine.eval(Unknown Source)
[ERR]                   at javax.script.AbstractScriptEngine.eval(Unknown Source)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.util.ReflectUtil.invoke(ReflectUtil.java:108)
[ERR]                   ... 69 more
[ERR]           Caused by: sun.org.mozilla.javascript.internal.EcmaError: SyntaxError: unterminated string lit
eral (<Unknown source>#22(eval)#132)
[ERR]                   at sun.org.mozilla.javascript.internal.ScriptRuntime.constructError(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.DefaultErrorReporter.error(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.addError(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.addError(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.addError(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.TokenStream.getToken(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.peekToken(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.assignExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.plainProperty(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.objectLiteral(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.primaryExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.memberExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.unaryExpr(Unknown Source)
[ERR]                   a
[ERR]           t sun.org.mozilla.javascript.internal.Parser.mulExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.addExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.shiftExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.relExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.eqExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.bitAndExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.bitXorExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.bitOrExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.andExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.orExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.condExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.assignExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.expr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.parenExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.primaryExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.memberExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.unaryExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.mulExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.addExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.shiftExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.relExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.eqExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.bitAndExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.bitXorExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.bitOrExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.andExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.orExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.condExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.assignExpr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.expr(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.statementHelper(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.statement(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.parse(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Parser.parse(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Context.compileImpl(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Context.compileString(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.ScriptRuntime.evalSpecial(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.ScriptRuntime.callSpecial(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Interpreter.interpretLoop(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Interpreter.interpret(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.InterpretedFunction.call(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.ContextFactory.doTopCall(Unknown Source)
[ERR]                   at com.sun.script.javascript.RhinoScriptEngine$1.superDoTopCall(Unknown Source)
[ERR]                   at com.sun.script.javascript.RhinoScriptEngine$1.doTopCall(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.ScriptRuntime.doTopCall(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.InterpretedFunction.exec(Unknown Source)
[ERR]                   at sun.org.mozilla.javascript.internal.Context.evaluateReader(Unknown Source)
[ERR]                   ... 77 more
[ERR]           Total time: 21 seconds

[ERR]           com.sencha.exceptions.BasicException: The following error occurred while executing this line:
C:\wamp\www\sencha-touch\GS\.sencha\app\build-impl.xml:120: javax.script.ScriptException: sun.org.mozilla.java
script.internal.EcmaError: SyntaxError: unterminated string literal (<Unknown source>#22(eval)#132) in <Unknow
n source>#22(eval) at line number 132 
```

对于这种类型的错误，我该如何调试它？我从哪条线开始？

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:23:23.640

萨拉姆穆巴拉克，

应该清楚您错过了关闭字符串值..

```
unterminated string literal (<Unknown source>#22(eval)#132) in <Unknown source>#22(eval) at line number 132 
```

但是您可以做的是去搜索系统中的所有报价并检查它们是否已关闭...

# xml - 如何在 bash 中使用 xmlstarlet 选择随机节点？

> ID：13707423
> 
> 赞同：1
> 
> 时间：2012-12-04T16:30:41.770
> 
> 标签：xml, linux, bash, xmlstarlet

重击，ubuntu linux。如何在 bash 中使用 xmlstarlet 选择随机节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:42:21.230

```
xmlstarlet sel -B -t -c "//node()[$RANDOM mod last() + 1]" input.xml 
```

剥离空白节点，`-B`您可能不想选择...

* * *

我还尝试使用在 exslt.org 中定义的[math:random() ：](http://exslt.org/math/functions/random/index.html)

```
xmlstarlet sel -N math=http://exslt.org/math -B -t --var r='math:random()' \
 -c '//node()[round($r * last()) + 1]' -n input.xml 
```

但它似乎每次都使用相同的种子。

# ios - 如果 NSURLConnection 的 connectionWithRequest:delegate: 中的 delegate 为 nil，是否会发出 http 请求？

> ID：13707424
> 
> 赞同：2
> 
> 时间：2012-12-04T16:30:45.687
> 
> 标签：ios, nsurlconnection, nsurlrequest

在我的应用程序中，我需要调用一个 http url 来进行跟踪。我对回应完全不感兴趣。是否会调用 Web 服务器代码，即是否会发出请求，如果我设置执行异步请求：

```
NSURLRequest *req = [NSURLRequest requestWithURL:trackingUrl];
NSURLConnection connectionWithRequest:req delegate:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:38:29.707

我刚刚测试了自己，请求已经完成，响应似乎在某个深度的某个地方被消耗`NSURLConnection`并发送到`nil`-delegate。

# tridion - UI 2012 RTF 扩展和自定义渲染

> ID：13707427
> 
> 赞同：2
> 
> 时间：2012-12-04T16:30:54.647
> 
> 标签：tridion, tridion-2011, siteedit, experience-manager

我们有一个基于扩展超链接的扩展，其中包含与将呈现的内容类型有关的数据 - 例如......

```
<a href="tcm:1-123" title="video-example"><img class="videoCSS"/></a> 
```

该类允许我们拥有一种向用户显示适当图标的样式（如 CME RTF 的 FormatAreaStyles.css 和 UI 的网站 CSS 中所述）。

因此，我们有一个扩展来检测和处理`<a>`元素。~~但是，当通过 UI 查看它时，它被视为（并与之交互）`<object>`标签，因为此时它已被呈现。~~-***这是不正确的***！发布时，自定义渲染发生 - 编辑时，组件在元素*仍然*完好无损的情况下被检索 - 当我们在预览页面中看到渲染时出现了混淆，编辑时它消失了，我们没有看到原始图标- 原来的图标根本就坏了，因为（样式）图像不能从已发布的网站上获得！

~~我最初的想法是尝试保持这个“简单”——编辑器看到的是一个视频图标（就像他们在 CME 中所做的那样）而不是 UI 中呈现的视频——如果他们想看到他们必须在登台中查看的完整页面上下文（允许与 RTF 的现有扩展交互）。但是，我们如何知道内容是否正在*为 UI 呈现*……或者是否必须在启用 siteedit 的标签上 的*发布目标级别完成。*~~

如果是后者，那么这意味着将所有渲染代码更改为自定义渲染器，或者根据发布目标做出反应。

***编辑***Will Price 的有用帖子@[问题检测我们何时在 2012 UI/XM 中进行 CMS 预览与动态预览](https://stackoverflow.com/questions/12929190/problems-detecting-when-we-are-doing-cms-preview-vs-dynamic-preview-in-2012-ui-x)

我猜另一种选择是我们必须将 UI RTF 扩展 JS 扩展为向后工程师、更新、删除和替换实际*呈现的*HTML，这听起来像是做/管理的绝对噩梦，如果它甚至可行的话！！！

你有没有遇到过这个/任何想法？

~~像往常一样 - 感谢您的评论！~~

**更新**不幸的是，由于另一个错误导致思维过程不同步，这个问题偏离了轨道！我把这个留在这里，以防有人遇到类似的问题并且也偏离了轨道！

# compression - 解压gzip文件到指定目录

> ID：13707429
> 
> 赞同：24
> 
> 时间：2012-12-04T16:31:08.200
> 
> 标签：compression, gzip

以下命令的 gzip 等效项是什么：

```
tar xvzf /usr/local/file/file/file.tar.gz -C /usr/local/extract_here 
```

我在尝试

```
gzip -d /usr/local/file/file/file.tar.gz -C /usr/local/extract_here 
```

但它不起作用，我该如何用 gzip 做到这一点？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-05T07:21:31.147

鉴于您有一个 .tar.gz 文件，您尝试的第一种方法，使用 -C 选项，可以正常工作：

`tar xvzf /dir/to/file.tar.gz -C /dir/to/output/`

`tar`调用 gzip 解压缩，然后从 tar 流中提取文件。 `gzip`只能解压，所以只需要解压`gunzip file.tar.gz`就可以了`file.tar`，然后你需要`tar xvf file.tar`. `z`选项`tar`只是使用 gzip 进行解压缩以及提取文件的快捷方式。

如果您只想将 .gz 文件（而不是解压缩 .tar.gz 文件）解压缩到不同的目录，只需在此处通过管道传输即可。例如`gzip -dc < file.gz > /somewhere/file`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-19T09:11:57.567

为了在没有 GZIP 压缩的情况下保留 .tar 文件，我使用了这样的一行，效果很好：

```
cat  file_to_uncompress.tar.gz | gzip -d > /destination_directory/packet_uncompressed.tar 
```

这是在某些情况下管理数据包的有用且直观的形式。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-28T15:49:23.090

```
cd /mydir_with_gz_files
for i in *gz
do
gzip -dkc < $i > /my_destination_dir/${i%%.gz}
done 
```

*此语法用于将包含的多个* `*.gz`文件提取`/mydir_with_gz_files`到不同的目录中。

1)`-k`此处使用选项，否则 gzip 将不会保留存档本身。好记！

2) 我还想强调对那些给出正确答案的人来说似乎很明显但对我和问题的作者来说不是这样的事情：gzip 不会将文件提取到不同的目录中，但希望得到的未压缩文件的名称被指定为好。

这是通过`$i > ${i%%.gz}` *bash* [参数替换](http://www.tldp.org/LDP/abs/html/parameter-substitution.html)`file.gz`来实现的，该替换去除了其“ `.gz`”后缀的“”之类的名称。对于其他 shell，语法会有所不同（如果可能的话）。

# database - solr 索引数据库列名与 solr 字段名不同

> ID：13707430
> 
> 赞同：0
> 
> 时间：2012-12-04T16:31:08.463
> 
> 标签：database, solr, indexing

我想用不同于列名 "TR.nom" 的 solr 字段名来索引数据库：

```
<entity name="id" query="select R.id, R.titre, R.description, TR.nom
                            from Ressource as R
                            join TypeRessource as TR
                            on R.typeRessource_id = TR.id">
<field column="R.id" name="id" />
    <field column="R.titre" name="titre" />
    <field column="R.description" name="description" />
    <field column="TR.nom" name="typeRessource" />
</entity> 
```

在 schema.xml 中：

```
<field name="typeRessource" type="text" indexed="true" stored="true" /> 
```

索引适用于所有字段，但不适用于“typeRessource”。

如果字段名称与列名称相同，我没有任何问题。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:35:46.263

您始终可以在 sql 查询中使用 AS 以使列名与
您的情况下的 solr 字段名匹配：

```
select R.id, R.titre, R.description, TR.nom AS typeRessource
from Ressource as R
join TypeRessource as TR
on R.typeRessource_id = TR.id 
```

# mysql - SQL“检查可用性”语句

> ID：13707434
> 
> 赞同：1
> 
> 时间：2012-12-04T16:31:22.653
> 
> 标签：mysql, sql, database

我有两个数据库表，一个存储属性，另一个存储属性的预订。这是表结构的简化版本：

```
property
+-------------------+--------------+
| Field             | Type         |
+-------------------+--------------+
| id                | int(11)      |
| status            | int(1)       |
| title             | varchar(150) |
+-------------------+--------------+

booking
+-------------------+--------------+
| Field             | Type         |
+-------------------+--------------+
| id                | int(11)      |
| status            | int(1)       |
| property_id       | int(11)      |
| start_date        | date         |
| end_date          | date         |
+-------------------+--------------+ 
```

我有一个带有开始和结束日期的搜索表单，以查看在给定时间段内可用的属性。例如“2012-12-01 和 2012-12-07 之间有哪些房产可供出租”。

我有以下在一定程度上有效的 SQL：

```
SELECT p.id, p.title FROM property p WHERE p.status=1 AND p.id NOT IN (SELECT 
b.property_id FROM booking b WHERE (b.status=1 OR b.status=2 OR b.status=3 OR 
b.status=6) AND NOT (b.enddate < '2013-05-30' OR b.startdate > '2013-05-24')) 
ORDER BY p.title ASC 
```

问题是，它不处理日期的重叠。如果搜索的是现有预订中的日期范围，则 SQL 可以正常工作并且不会返回该属性。但是，如果搜索日期与预订日期重叠，则仍会返回属性，即使它们是在搜索期间的一部分中被预订的。

我在这里设置了一个 SQL 小提琴：[http](http://sqlfiddle.com/#!2/d02e1/4) ://sqlfiddle.com/#!2/d02e1 /4 - 有 5 个查询 - 前 2 个工作正常。我需要返回的属性如下：

*   查询 1（工作） - 1、2 和 3
*   查询 2（工作）- 2 和 3
*   查询 3（不工作） - 2 和 3
*   查询 4（不工作） - 2 和 3
*   查询 5（不工作） - 2 和 3

非常感谢任何帮助或建议。

更新;

我想我的措辞可能有点不清楚。我要做的是获取在给定日期范围（搜索日期）内可供出租的房产列表。如果出现以下情况，则属性将不可用；搜索日期在现有预订日期范围内，或在任一端重叠。如果在搜索日期之间的任何时间段内都没有预订，则该物业是可用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:01:18.020

在这里设法解决它是小提琴：[http ://sqlfiddle.com/#!2/d02e1/64](http://sqlfiddle.com/#!2/d02e1/64)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:41:04.237

需要这样的东西吗？：

```
SELECT p.id, p.title 
FROM property p 
WHERE p.status=1 AND p.id NOT IN (
SELECT b.property_id 
    FROM booking b 
    WHERE (b.status IN (1, 2, 3, 6)) 
        AND (b.end_date BETWEEN '2012-12-01' AND '2012-12-30'
        OR b.start_date BETWEEN '2012-12-01' AND '2012-12-30')
) 
ORDER BY p.title ASC; 
```

它返回 2 和 3

# rest - 使用 Jersey 客户端调用基于 spring 的 REST api

> ID：13707436
> 
> 赞同：1
> 
> 时间：2012-12-04T16:31:31.557
> 
> 标签：rest, client, jersey

这是基于弹簧的api：

```
@RequestMapping(value = ControllerConstants.FILE_UPLOAD_URI, method = RequestMethod.POST)
    public @ResponseBody
    boolean processUpload(@RequestParam("file") MultipartFile file, @RequestParam("accessionId") String accessionId, @RequestParam("protocol") String protocol, HttpServletRequest request) throws IOException {        
        logger.info("upload file: {} with accessionId: {} and protocol:{}",file.getOriginalFilename(),accessionId,protocol);         
        return dataManagerService.writeFile(file, protocol, accessionId);
    } 
```

这是我的最大努力：

```
FormDataMultiPart part = new FormDataMultiPart()
                .field("accessionId", returnedAccessionId)
                    .field("protocol", protocol)
                    .field("name", file.getName())
                    .field("file", stream, MediaType.APPLICATION_OCTET_STREAM_TYPE);    

            MultivaluedMap<String, String> params = new MultivaluedMapImpl();
            params.add("file",  file.getAbsolutePath());
            params.add("accessionId", returnedAccessionId);
            params.add("protocol", protocol);       

            WebResource resource2 = client.resource(agent.getServerEndpointUri() + "/novax/service/dataManager/upload");
            ClientResponse response4 = resource2
                    .queryParams(params)
                    .type(MediaType.MULTIPART_FORM_DATA_TYPE)
                    .post(ClientResponse.class, part); 
```

响应为 404。
2 个问题： - 是否正确定义了 spring API？- 如何使用 Jersey 客户端正确调用 api？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:01:12.297

好的，我得到它的工作，使用以下代码：

```
 FormDataMultiPart part = new FormDataMultiPart()
                .field("accessionId", returnedAccessionId)
                .field("protocol", protocol)
                .field("name", file.getName());
        part.bodyPart (new FileDataBodyPart("file", file, MediaType.MULTIPART_FORM_DATA_TYPE)); 

        WebResource resource2 = client.resource(pathOrUrl);
        ClientResponse response4 = resource2
                .type(MediaType.MULTIPART_FORM_DATA)
                .post(ClientResponse.class, part); 
```

我需要使用“bodyPart”方法，该方法似乎不适用于“构建器”模式。

# android - Android - 第一个选项卡一开始没有加载

> ID：13707445
> 
> 赞同：1
> 
> 时间：2012-12-04T16:31:57.603
> 
> 标签：android, tabs

我已经动态添加了标签。Alaways 我的第一个选项卡只有在从另一个选项卡返回和返回后才会加载。您能否建议我解决此问题的解决方案。

//------------ 动态添加标签

```
 for (int i=0; i<tabs.length; i++){
        String tabName = tabs[i];
        specs = th.newTabSpec(tabName);
        specs.setContent(R.id.llItemList);
        list1=(ListView)findViewById(R.id.lvCommonList);
        adapter=new Adapter(this, item[i]); 
        list1.setAdapter(adapter);
        specs.setIndicator(tabName);
        th.addTab(specs);
    }   

public void onTabChanged(String tabId) {
    // TODO Auto-generated method stub
       currentTab =  tabId; 
         for (int i=0; i<tabs.length; i++){
        if (currentTab.equals(tabs[i])){ 
            linearLayout.removeView(list1);
            linearLayout.addView(list1);
            adapter=new Adapter(this, item[i]);  
            list1.setAdapter(adapter);
        }
    }
} 
```

# mysql - PHP - 注意：未定义的索引：

> ID：13707448
> 
> 赞同：3
> 
> 时间：2012-12-04T16:32:08.490
> 
> 标签：mysql, php

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T16:36:06.000

在从中提取值之前`$_POST`，您应该检查它们是否存在。您可以为此使用该`isset`功能（http://php.net/manual/en/function.isset.php）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:45:26.587

您收到错误是因为您试图读取尚未设置的帖子变量，它们仅在表单提交时设置。将您的 php 代码包装在底部

`if ($_SERVER['REQUEST_METHOD'] === 'POST') { ... }`

此外，您的代码可以进行 SQL 注入。在 SQL 查询中使用它们之前，至少`mysql_real_escape_string`在 post vars 上使用它们。`mysql_real_escape_string`对于生产站点来说还不够好，但应该在课堂上给你加分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:42:29.833

对于初学者，

mysql_connect() 不应该有 $ 伴随它；它不是一个变量，它是一个预定义的函数。删除 $ 以正确连接到数据库。

为什么在这个文档的顶部有一个 XML 标记？这是 HTML/PHP——一个 HTML 文档类型就足够了。

从第 215 行开始，更新：

```
if (isset($_POST)) {
    $Name = $_POST['Name'];
    $Surname = $_POST['Surname'];

    $Username = $_POST['Username'];

    $Email = $_POST['Email'];
    $C_Email = $_POST['C_Email'];

    $Password = $_POST['password'];
    $C_Password = $_POST['c_password'];

    $SecQ = $_POST['SecQ'];
    $SecA = $_POST['SecA'];
} 
```

POST 变量来自您的表单，您必须检查它们是否存在，否则 PHP 会给您一个 NOTICE 错误。您可以通过放置 error_reporting(0); 来禁用这些通知；在文档的顶部。出于开发目的，最好保持这些可见性。

您应该仅在表单已提交的情况下与数据库进行交互（插入、检查）。如果您不这样做，PHP 将运行所有这些操作而无需用户输入任何内容。最好使用 IF 语句，如下所示：

```
if (isset($_POST['submit']) {
// blah blah
// check if user exists, check if fields are blank
// insert the user if all of this stuff checks out..
} else {
// just display the form
} 
```

很棒的表单教程： http: [//php.about.com/od/learnphp/ss/php_forms.htm](http://php.about.com/od/learnphp/ss/php_forms.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T16:36:18.007

您如何加载此页面？是否在 POST 上加载任何内容？如果不是，那么 $name = $_POST['Name']; 分配在 POST 上没有任何“名称”。

# c - is shifting by more bits than are in a variable an undefined operation in c?

> ID：13707451
> 
> 赞同：1
> 
> 时间：2012-12-04T16:32:21.823
> 
> 标签：c

Specifically I am doing this

```
Word32 x = 18653184;
Word32 y;
Word16 shift = 269;
y = x >> shift; 
```

I'd expect the result of this logical shift to be 0, but I am instead getting 2277\. How does C define this type of operation?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T16:35:44.643

Yes, it is undefined behavior, according to section 6.5.7 paragraph 3

> ... If the value of the right operand is negative or is greater than or equal to the width of the promoted left operand, the behavior is undefined.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T16:35:47.587

```
ISO c99 : 6.5.7 Bitwise shift operators 
```

`3
The integer promotions are performed on each of the operands. The type of the result is that of the promoted left operand. If the value of the right operand is negative or is greater than or equal to the width of the promoted left operand, the behavior is undefined.`

`5
The result of E1 >> E2 is E1 right-shifted E2 bit positions. If E1 has an unsigned type or if E1 has a signed type and a nonnegative value, the value of the result is the integral part of the quotient of E1 / 2E2\. If E1 has a signed type and a negative value, the resulting value is implementation-defined`

You can see c-standard clarifies everything.

# matlab - MATLAB 的 readobject 方法抛出 ClassNotFoundException

> ID：13707452
> 
> 赞同：2
> 
> 时间：2012-12-04T16:32:22.430
> 
> 标签：matlab, serialization, classnotfoundexception

我正在使用 MATLAB 并在里面调用一些 Java。基本上在我创建了一个 Java 对象之后，我想将它转换为一个字节数组，我可以将它作为 MATLAB 数组存储在我的数据库中。加载数组后，我想将其转换回 Java 以再次用作 Java 对象。这是代码，在 MATLAB 中更简单：

myJavaObject 的类是：weka.classifiers.functions.SMOreg

```
baos = java.io.ByteArrayOutputStream;

oos = java.io.ObjectOutputStream(baos);

oos.writeObject(myJavaObject); 
```

% 现在我可以将它存储到数据库中并从那里加载它。它应该重建为Java：

```
myJavaObject = baos.toByteArray;

bais = java.io.ByteArrayInputStream(myJavaObject);

ois = java.io.ObjectInputStream(bais);

ois.readObject; 
```

一切都很好，直到我调用 ois.readObject。现在我得到一个 ClassNotFoundException 异常。我已经阅读了很多关于对象必须具有相同类的问题的讨论，如下所示：[readobject method throws ClassNotFoundException](https://stackoverflow.com/questions/2916107/readobject-method-throws-classnotfoundexception)

我对任何想法和帮助感到非常高兴！谢谢！！！

本

# visual-studio-2010 - 第一次机会例外

> ID：13707453
> 
> 赞同：1
> 
> 时间：2012-12-04T16:32:26.047
> 
> 标签：visual-studio-2010, debugging, exception-handling, visual-studio-debugging

这似乎与关于第一次机会例外的所有其他消息不同:)

我正在尝试追踪在串行端口入站数据处理程序中抛出的偶然异常。当它触发时，堆栈跟踪不会显示我的任何代码——它都是标准程序集中的东西，以 System.Threading.ThreadHelper.ThreadStart() 开头。由于它在我自己的任何代码之外，因此我无法处理它并且一无所知，直到它在下降过程中遇到 CurrentDomain_UnhandledException。

我正在启动一个线程来处理传入的串行通信。由于串行端口是一个 USB 设备，可能会意外拔出，然后端口就会消失，当出现问题时，我会终止线程并重新开始，枚举端口并查询它们以在设备回来时再次拿起设备。

在输出中，我看到了几个“‘System.Threading.ThreadAbortException’类型的第一次机会异常”。其中一些在 MS 代码中。我希望能够打破每一个，这样我就可以确认它正在被处理，而不是在某个地方被吞食。但是，当我在 Debug->Exceptions 菜单中勾选“System.Threading”抛出框时，VS 永远不会中断。即使我禁用“只是我的代码”，我认为这会扩大调试器的范围。

有谁知道我缺少的第三件事会让VS在这些异常上中断？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T06:57:10.290

要打破第一次机会异常，您可以在 Visual c++ 2010 中执行此操作，转到 debug->exceptions 并在 c++ 异常中检查 std::exception 的复选框，我认为这对我有用，这是前一阵子

# python - Python：列表中出现次数最多的值

> ID：13707457
> 
> 赞同：14
> 
> 时间：2012-12-04T16:32:39.457
> 
> 标签：python, list

我有两个列表如下

```
x = ['a','a','b','c','b','a'] 
```

和

```
x = ['a','a','b','c','c','d'] 
```

我试图找出在每个列表中出现最多的值。这是我尝试过的。

```
def unique_values(output,input):
    for i in input:
        if i not in output:
            output.append(i)
k = []
for i in k:
    unique_values(k,x)
    y.remove(i) 
```

我已经做到了这一点，但我无法弄清楚如何`for i in k:`在它删除列表中的所有值之前停止它。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-04T16:35:49.443

如果要查找列表中每个元素的出现，可以使用`Counter`module from ：-`collections`

```
>>> x = ['a','a','b','c','c','d']

>>> from collections import Counter
>>> count = Counter(x)
>>> count
Counter({'a': 2, 'c': 2, 'b': 1, 'd': 1})
>>> count.most_common()
[('a', 2), ('c', 2), ('b', 1), ('d', 1)] 
```

因此，前两个元素在您的列表中最为常见。

```
>>> count.most_common()[0]
('a', 2)
>>> count.most_common()[1]
('c', 2) 
```

或者，您还可以将参数传递给以`most_common()`指定所需的`most-common`元素数量：-

```
>>> count.most_common(2)
[('a', 2), ('c', 2)] 
```

**更新 ： -**

您也可以`max`先找出计数，然后找到具有该值的元素总数，然后您可以将其用作参数`most_common()`： -

```
>>> freq_list = count.values()
>>> freq_list
[2, 2, 1, 1]
>>> max_cnt = max(freq_list)
>>> total = freq_list.count(max_cnt)

>>> most_common = count.most_common(total)
[('a', 2), ('c', 2)]

>>> [elem[0] for elem in most_common]
['a', 'c'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:27:57.740

这是另一个解决方案：

```
max(zip((x.count(item) for item in set(x)), set(x))) 
```

首先，我们使用 set 得到一个不包含重复元素的集合。

```
>>> set(x)
{'a', 'c', 'b'} 
```

然后，我们计算每个元素在 x 中的次数。这将返回一个生成器对象，您可以将其设为一个列表以查看其值（通过使用 "[ ... ]" 而不是 "( ... )" ），它将返回 [3, 1, 2]。

```
>>> (x.count(item) for item in set(x)) 
```

然后，我们进行计数并使用 zip 将其与元素配对。首先出现的次数，用于下一步。你可以通过使用 list( ... ) 查看它的值，它会返回 [(3, 'a'), (1, 'c'), (2, 'b')]。

```
>>> zip((x.count(item) for item in set(x)), set(x)) 
```

最后，我们使用 max 找出哪对出现次数最多。

```
>>> max(zip((x.count(item) for item in set(x)), set(x)))
(3, 'a') 
```

至于第二个值，解决方案有点长。上面在列表理解中使用：

```
>>> [mitem for mitem in zip((x.count(item) for item in set(x)),set(x)) if mitem[0] == max((x.count(item) for item in set(x)))]
[(2, 'a'), (2, 'c')] 
```

# android - ImageView 捕捉位置点击 AlertDialog

> ID：13707458
> 
> 赞同：1
> 
> 时间：2012-12-04T16:32:43.280
> 
> 标签：android, imageview, android-alertdialog

我需要以下问题的帮助：我有一个 AlertDialog，它似乎带有一个 sqlite 列表，做了一个布局 xml 来加载这个列表，并且布局包括一个带有垃圾桶的 ImageView。我创建了代码 public void deleteClick (View v) {显示另一个 AlertDialog 询问您是否确定排除。但是我无法获得被点击的垃圾的位置。

下面是一些代码片段：

公共无效FavClick（查看v）{

```
 SQLiteDatabase db = openOrCreateDatabase("rmtc.db", Context.MODE_PRIVATE, null);

    Cursor cursor = db.rawQuery("SELECT * FROM favpontos ORDER BY apelido ASC", null);

    String[] from = {"apelido", "ponto"};
    int[] to = {R.id.txvApelido, R.id.txvPonto};

    final SimpleCursorAdapter ad = new SimpleCursorAdapter(getBaseContext(), R.layout.favoritos, cursor, from, to);

    AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
    builder.setTitle("Pontos favoritos");
    builder.setIcon(R.drawable.ic_logo_white);
    builder.setAdapter(ad, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
             // Do something with the selection

            int posicao = (int) ad.getItemId(id);

            SQLiteDatabase banco = openOrCreateDatabase("rmtc.db", Context.MODE_PRIVATE, null);
            Cursor c = banco.rawQuery("SELECT * FROM favpontos WHERE _id = "+ posicao, null);

            while(c.moveToNext()){

                EditText txtPonto = (EditText)findViewById(R.id.txtPonto);
                txtPonto.setText(c.getString(c.getColumnIndex("ponto")));

            }

        }

    });
    AlertDialog alert = builder.create();
    alert.show();

}

public void deleteClick(View v) {

    new AlertDialog.Builder(MainActivity.this)
    .setTitle("Deletar ponto favorito")
    .setMessage("Tem certeza que deseja deletar este ponto?")
    .setIcon(R.drawable.ic_logo_white)
    .setPositiveButton("Deletar", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int item) {
            // TODO Auto-generated method stub

            Toast.makeText(getBaseContext(), "( " +POSITION????+ " )", Toast.LENGTH_LONG).show();
        }

        })

    .setNegativeButton("Cancelar", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub

        }

    })

    .show();    

} 
```

和 xml 布局：喜爱的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_menu_delete"
        android:onClick="deleteClick" />

    <TextView
        android:id="@+id/txvApelido"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/imageView1"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/txvPonto"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txvApelido"
        android:layout_toLeftOf="@+id/imageView1"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</RelativeLayout> 
```

谢谢！

原谅英语，我来自巴西

# csv - 将 Advantage Data Architect 中的 ADT(Advantage) 表转换为 CSV

> ID：13707460
> 
> 赞同：1
> 
> 时间：2012-12-04T16:32:46.327
> 
> 标签：csv, converter, load-testing, advantage-database-server

目前，我遇到了将 ADT 数据库文件转换为 CSV 的问题。

说有书面权限和空间问题似乎是错误的。

根本不是这种情况，我确保这些问题都不是问题。

它似乎最多导出大约 4500 行，然后停止并显示上述错误。解决此类错误的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-13T00:15:26.773

该错误是由于之前删除的行/记录没有从 ADT 数据库中完全删除。 [根据原因进行描述](https://devzone.advantagedatabase.com/dz/webhelp/Advantage9.1/adt_deleted_records.htm) 从那时起，从 ADT 数据库中提取数据已成为一种常态。所以我已经切换到使用 ADSConnection 库。这使我可以直接连接到 ADT 数据库，并且默认情况下选择语句不包括已删除的行。

# html - 无法弄清楚为什么侧边栏不会与顶部的主要内容对齐

> ID：13707461
> 
> 赞同：2
> 
> 时间：2012-12-04T16:32:46.757
> 
> 标签：html, css

我在造型方面有点菜鸟，但我差点把眼睛挖出来了。。我不明白为什么我页面上的侧边栏不会与主要内容对齐。我使用浮动并添加了一个 clearfix hack 但是似乎没有任何效果。这是代码：HTML：

```
 <!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Brereton C of E A Primary School</title>
        <link rel="stylesheet" type="text/css" href="style.css">

    </head>

    <body>
        <div class= "container">            
                <header>
                    <div id="logo">
                        <a href="index.html">
                            <img src="img/logo.png" alt = "Brereton C of E A Primary School">
                        </a>
                    </div>                    
                    <nav>
                        <ul>
                            <li>
                            <a href="index.html">Home</a>
                            </li>
                            <li>
                            <a href="about.html">About Us</a>
                            </li>
                            <li>
                            <a href="governors.html">Governors</a>
                            </li>
                            <li>
                            <a href="pta.html">PTA</a>
                            </li>
                            <li>
                            <a href="contact.html">Conact Us</a>
                            </li>                        

                        </ul>
                    </nav>
                </header>

                <div id="main" class="cf">
                    <h2>Welcome to Brereton C of E (A) Primary School</h2>
                    <h3>
                        When you first visit Brereton School, you sense very quickly that it is a vibrant, happy, multi-cultural school with respect, tolerance and celebration at its core.
                    </h3>
                    <p>
                        Then, when you look at the school’s results, you will see that the friendly, caring atmosphere is accompanied by an ethos of supporting pupils to achieve their full potential and raise standards.
                    </p>                

                </div>
                <div id="downloads" class="cf">
                    <div class="box" id="prospectus">
                        <a href="#">
                            <img src="img/prospectus.png">
                        </a>                    
                    </div>

                    <div class="box" id="newsletters">
                        <a href="#">
                            <img src="img/newsletters.png">
                        </a>
                    </div>
                </div>

            <aside class="cf">
                <ul class="sidebar">
                    <li>
                        <a href="#">Newsletter</a>
                    </li>
                    <li>
                        <a href="">Staff</a>
                    </li>
                    <li>
                        <a href="">Learning Platform</a>
                    </li>
                    <li>
                        <a href="">NCSL</a>
                    </li>
                    <li>
                        <a href="">Ofsted Report</a>
                    </li>
                    <li>
                        <a href="">Teachernet</a>
                    </li>
                </ul>
                <form role="search" method="get" id="searchform" action="./Brereton C of E A Primary School_files/Brereton C of E A Primary School.htm">
                    <div><label class="screen-reader-text" for="s">Search for:</label>
                    <input type="text" value="" name="s" id="s">
                    <input type="submit" id="searchsubmit" value="Search">
                    </div>
                </form>
            </aside>
            <footer>
                <h1 class="bottom_logo">
                    <a href="index.html">Brereton C of E A Primary School</a>
                </h1>                
            </footer>
        </div>
    </body>

</html> ​ 
```

和 CSS：

```
/* =====START HACK=====*/

*{
    padding:0;
    margin:0;
}
/**
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    contenteditable attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that are clearfixed.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */
.cf:before,
.cf:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.cf:after {
    clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
.cf {
    *zoom: 1;
}
/* =====END HACK=====*/

/* =====GENERAL STYLING=====*/

body{
    background: #fefcea; /* Old browsers */
    background: -moz-linear-gradient(top,  #fefcea 0%, #efe9bf 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fefcea), color-stop(100%,#efe9bf)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #fefcea 0%,#efe9bf 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #fefcea 0%,#efe9bf 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #fefcea 0%,#efe9bf 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #fefcea 0%,#efe9bf 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fefcea', endColorstr='#efe9bf',GradientType=0 ); /* IE6-9 */
    width:960px;
    margin:auto;
}
h2{
    font-family: 'Museo500',"Trebuchet MS", Arial, Helvetica, sans-serif;
    color:#553A2A;
}
h3,a,p{
    font-family: arial;
}

h3{
    font-size: 15px;
}

p{
    font-size: 12px;
}

a{
    font-size: 12px;

}

    /* =====END GENERAL STYLING=====*/

    /* HEADER*/

#logo {
    width:113px;
    margin:auto;
    padding-top: 50px;
    padding-bottom: 30px;
}

nav{
    background:black;
    color:white;
    height: 30px;
    padding-top: 7px;
    margin-bottom: 20px;

}

    nav a{
        color:white;
        text-decoration: none;
    }

    nav a:hover{
        color:#e7e7e7;
    }

    #logo
    nav ul{
        list-style: none;    
    }

    nav li{
        display: inline;
        padding-left: 20px;
    }

    /* END HEADER*/

    /* MAIN*/    

#main{
    width: 60%;
    min-width: 400px;
    float: left;
    padding:10px 0;
    border-radius: 5px; 
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px; 
    border: 1px solid #B8B079;
    margin-left: 15px;
    padding-left: 10px;
    padding-right: 20px;
    margin-bottom: 40px;
}

    #main h2{
        padding-bottom: 5px;
    }
    #main h3{
        color:#3A3A3A;
        padding-bottom: 10px;
    }
    #main p{
        color:#3A3A3A;
        padding-bottom: 50px;
    }

    #downloads{
        width: 50%;
        margin-left: 12px;
        float: left;
    }
    #prospectus{
        float: left;
        padding-right: 10px;
    }
    #newsletters{
        float: left;
    }

    /* END MAIN*/    

    /* ASIDE*/    

aside{
    float:left;
    width: 30%;

}

    aside ul{
        list-style: none;
    }

    /* END ASIDE*/    
​ 
```

请在这里帮助我，我确实检查了问题部分，但找不到合适的答案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:57:20.150

我假设您想要页面右侧的侧边栏。

试试“float:right;” on `<aside class="cf">`，这应该可以满足您的需求-这会将侧边栏浮动到页面的右侧。

现在， the`<aside>`向左浮动，之后`<div id="downloads">`（它本身向左浮动）。向左浮动本质上意味着：“将我拉出文档流，将我附加到父容器的左侧，并使页面上的所有元素在我之后围绕我的右侧流动”。

这会导致它`<aside>`围绕浮动的左侧“流动”`<div id="downloads">`并与之对齐 - 在这种情况下，笨拙地粘在它的右侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:04:08.777

嗨，我已经修复了侧栏问题，请查看[http://jsfiddle.net/Jz4eL/](http://jsfiddle.net/Jz4eL/)上的代码我所做的只是为您的主要内容添加一个 HTML 部分包装器，并将其大小设置为 css 中的 10%。

HTML

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Brereton C of E A Primary School</title>
        <link rel="stylesheet" type="text/css" href="style.css">

    </head>

    <body>
        <div class= "container">            
                <header>
                    <div id="logo">
                        <a href="index.html">
                            <img src="img/logo.png" alt = "Brereton C of E A Primary School">
                        </a>
                    </div>                    
                    <nav>
                        <ul>
                            <li>
                            <a href="index.html">Home</a>
                            </li>
                            <li>
                            <a href="about.html">About Us</a>
                            </li>
                            <li>
                            <a href="governors.html">Governors</a>
                            </li>
                            <li>
                            <a href="pta.html">PTA</a>
                            </li>
                            <li>
                            <a href="contact.html">Conact Us</a>
                            </li>                        

                        </ul>
                    </nav>
                </header>
<section>
                <div id="main" class="cf">
                    <h2>Welcome to Brereton C of E (A) Primary School</h2>
                    <h3>
                        When you first visit Brereton School, you sense very quickly that it is a vibrant, happy, multi-cultural school with respect, tolerance and celebration at its core.
                    </h3>
                    <p>
                        Then, when you look at the school’s results, you will see that the friendly, caring atmosphere is accompanied by an ethos of supporting pupils to achieve their full potential and raise standards.
                    </p>                

                </div>
                <div id="downloads" class="cf">
                    <div class="box" id="prospectus">
                        <a href="#">
                            <img src="img/prospectus.png">
                        </a>                    
                    </div>

                    <div class="box" id="newsletters">
                        <a href="#">
                            <img src="img/newsletters.png">
                        </a>
                    </div>
                </div>
        </section>
            <aside class="cf">
                <ul class="sidebar">
                    <li>
                        <a href="#">Newsletter</a>
                    </li>
                    <li>
                        <a href="">Staff</a>
                    </li>
                    <li>
                        <a href="">Learning Platform</a>
                    </li>
                    <li>
                        <a href="">NCSL</a>
                    </li>
                    <li>
                        <a href="">Ofsted Report</a>
                    </li>
                    <li>
                        <a href="">Teachernet</a>
                    </li>
                </ul>
                <form role="search" method="get" id="searchform" action="./Brereton C of E A Primary School_files/Brereton C of E A Primary School.htm">
                    <div><label class="screen-reader-text" for="s">Search for:</label>
                    <input type="text" value="" name="s" id="s">
                    <input type="submit" id="searchsubmit" value="Search">
                    </div>
                </form>
            </aside>
            <footer>
                <h1 class="bottom_logo">
                    <a href="index.html">Brereton C of E A Primary School</a>
                </h1>                
            </footer>
        </div>
    </body>

</html> ​ 
```

CSS 更改

```
 /* MAIN*/    
container {width:100%;}

footer {clear:both;}

section{
    width: 60%;
    min-width: 400px;
    float: left;
    padding:10px 0;
    border-radius: 5px; 
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px; 
    border: 1px solid #B8B079;
    margin-left: 15px;
    padding-left: 10px;
    padding-right: 20px;
    margin-bottom: 40px;
}
 ​ 
```

我还修复了页脚，所以它现在位于页面的底部。

# java - 如何在 Android 上识别用 Java 创建的视图

> ID：13707462
> 
> 赞同：0
> 
> 时间：2012-12-04T16:32:46.653
> 
> 标签：java, android, android-layout, android-view

我有以下疑问：

我在 Java 上创建视图并添加到我的`LinearLayout`，在本例中是一个 TextView（这是我的表单的标签）和他下面的两个 EditText，两者都接收带有点浮点数的数字。

所以，我创建了一个`ArrayList<TextView>`and `ArrayList<EditText>`之后，使用了一个“for循环”来填充它们各自的视图，并在同一个循环中添加他`LinearLayout`。

我的问题是，如何恢复对我所做的这些视图的引用？我正在尝试`ArrayList<EditText>.get(i).setId(12)`，但我没有成功，因为可以创建很多视图并且存在冲突的可能性>.<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:39:01.380

他们不会有资源ID。您实际上必须通过您自己创建的视图来引用它们。或者，您可以获取视图容器并循环它们。来自[ViewGroup](http://developer.android.com/reference/android/view/ViewGroup.html)文档：

```
ViewGroup group;
for (int i=0;i<group.getChildCount;i++)
{
  View view=group.getChildAt(i);
} 
```

# c# - Visual Studio 可扩展性 - ProjectInfo.Document 始终为空

> ID：13707464
> 
> 赞同：2
> 
> 时间：2012-12-04T16:32:56.653
> 
> 标签：c#, visual-studio-2012, visual-studio-extensions, visual-studio-sdk

使用 Visual Studio 可扩展性 SDK 时，我有一个[`ProjectItem`](http://msdn.microsoft.com/en-us/library/envdte.projectitem%28v=vs.110%29.aspx). 我正在尝试从该项目中获取文本，以便可以对其进行一些替换。我看到这样做的方式是使用[`DTE2.ActiveDocument.Selection`](http://msdn.microsoft.com/en-us/library/envdte.document.selection.aspx). 但是，这[`DTE2.ActiveDocument`](http://msdn.microsoft.com/en-us/library/0tkyf2yb.aspx)不是我需要的文档，所以我不能使用它。当我尝试访问`ProjectItem.Document`包含[`Selection`](http://msdn.microsoft.com/en-us/library/envdte.document.selection.aspx)属性的对象时，文档始终为空，并且出现空引用异常。我还尝试了以下不起作用的方法（即`Document`有效，但`Selection`属性为空）：

```
Document document = null;
if (!projectItem.IsOpen)
    document = projectItem.Open().Document; 
```

我尝试了以下操作，但它没有给我正确的文档，因为我正在处理的 ProjectItem 不是活动文档。有没有办法实现类似于以下代码的东西`ProjectItem.Document`？

```
TextSelection selection = DTE2.ActiveDocument.Selection;
selection.SelectAll();
string text = selection.Text;
selection.Delete();
//Do replacements
selection.Insert(text); 
```

总而言之，**如何从 ProjectItem 实例中获取 TextSelection 实例？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:27:53.203

像往常一样处理 VS SDK 时，答案有点模糊。我解决它的方法（对或错）是使[ProjectItem](http://msdn.microsoft.com/en-us/library/envdte.projectitem%28v=vs.110%29.aspx)实例成为活动文档，然后使用该[`DTE2.ActiveDocument.Selection`](http://msdn.microsoft.com/en-us/library/envdte.document.selection.aspx)属性来获取文本。这是通过以下方式完成的：

```
if (!projectItem.IsOpen)
    projectItem.Open(@"{7651A701-06E5-11D1-8EBD-00A0C90F26EA}").Document.Activate(); //EnvDTE.Constants.vsViewKindCode

TextSelection selection = _vsApp.ActiveDocument.Selection;
selection.SelectAll();
string text = selection.Text;
selection.Delete();
//Do replacements
text = ReplaceTemplateValues(text, replacements);
selection.Insert(text); 
```

有没有更好的办法？

# menu - 在 TCL 中处理长菜单

> ID：13707467
> 
> 赞同：1
> 
> 时间：2012-12-04T16:33:16.607
> 
> 标签：menu, tcl, tk

我有一个旧的 TCL 应用程序，它的菜单没有显示所有条目。

如何创建多列菜单或滚动菜单，以便可以看到所有菜单条目？

这是TCL v8.0

这是一个gui。

我正在查看的代码片段是：

```
#
# Setup the folder Menu
#
menubutton $w.folder -text Folder -menu $w.folder.menu
menu $w.folder.menu -tearoff 0
$w.folder.menu add command -label "New"      -command createNewFolder -state disabled
$w.folder.menu add command -label "Open"     -command openFolder 
$w.folder.menu add command -label "Delete"   -command deleteFolder -state disabled
$w.folder.menu add command -label "Printer Setup" -command selectPrinter -state  disabled
$w.folder.menu add command -label "Quit"     -command xqmQuit 
$w.folder.menu add separator
foreach queue $privateGlobals(folderList) {
   $w.folder.menu add command -label "$queue" -command [list openFolder "$queue"]
} 
```

发生的事情是，在 foreach 循环中创建了很多条目，但我只能看到 60 或 80 个条目中的大约 46 个。

我很长时间没有做过 TCL，但我没有在菜单小部件中看到任何明显的选项来做我想做的事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:48:54.663

您可以使用[-columnbreak 值](http://www.tcl.tk/man/tcl8.5/TkCmd/menu.htm#M32)选项。

```
set i 0
foreach queue $privateGlobals(folderList) {
   $w.folder.menu add command -label "$queue" -command [list openFolder "$queue"] -columnbreak [expr $i % 10 == 0]
   incr i
} 
```

# c# - 字典到列表

> ID：13707468
> 
> 赞同：1
> 
> 时间：2012-12-04T16:33:19.443
> 
> 标签：c#

如何使用字典的值将其映射到列表。例如，我有`Dictionary<int,int> studid= new Dictionary<int,int>();`where index 将是 key 而 id 将是 value。现在我有一个标记列表。

如何将 id 指向标记列表并显示它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:35:23.970

您使用了不正确的数据类型来满足您的需求。您需要一个将键映射到整数*列表的字典：*

```
Dictionary<int,List<int>> studid= new Dictionary<int,List<int>>(); 
```

您将使用密钥来获取标记列表：

```
var marks = studid[theIndex]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:35:41.073

让它成为`Dictionary<int, List<int>>`最简单的方法。您的键将是一个 int，值可以是标记列表。

```
var dict = new Dictionary<int, List<int>>();
dict.Add(1, new List<int>() { 1, 2, 3, 4 }); 
```

# git - 推送大文件/站点时 GIT 失败

> ID：13707473
> 
> 赞同：1
> 
> 时间：2012-12-04T16:33:42.507
> 
> 标签：git, github

当我尝试推送包含大量文件的超大型网站时出现此错误。我得到的错误是这样的：

```
Compressing object: 100% (28532/28532), done.
Read from remote host xxxxx.beanstalkapp.com: Connection reset by peer
fatal: The remote end hung up unexpectedly
error: pack-objects died of signal 13
error: failed to push some refs to 'xxxxx' 
```

有谁知道如何在不丢失连接的情况下推送大对象或大量对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T23:32:07.563

我会在 ServerFault 上问这个问题，因为它闻起来像是网络问题而不是 Git 问题（恢复中的系统管理员说）。

# android - 在 Android 应用程序中显示图表（不是图表）

> ID：13707475
> 
> 赞同：6
> 
> 时间：2012-12-04T16:33:49.327
> 
> 标签：android, graph, graph-layout

我想在活动中显示一个小的（n < 50）无向图[（](http://en.wikipedia.org/wiki/Graph_%28data_structure%29)不是*图表*[）](http://en.wikipedia.org/wiki/Chart)。我做了一些研究，看起来他们有几个库来显示图表，但没有一个库来显示真实的图表。所以看起来我需要推出自己的解决方案。我非常粗略的计划是这样的：

*   创建图形并在内存中表示
*   布局图形节点和边，使其看起来不错
*   编写一个实现捏合和缩放的视图
*   画图

他们*有没有*我可以用来帮助完成其中一些步骤的库（也许除了第一个，这真的很简单）。特别是“布局”部分是我想避免的。只要图表以某种可读的方式显示，“看起来不错”的要求大多是可选的。但因为我是兼职完美主义者，我很想把它放进去；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:25:03.893

我最终通过使用显示 HTML 页面的 WebView 解决了这个问题，该页面使用[Dracula Graph Library](http://www.graphdracula.net/)。我通过一个从 Javascript（在页面加载时）调用的 Java 函数将数据传输到 WebView，该函数将数据编码为 JSON。不花哨，但它奏效了！

# java - 在android中第一次单击时无法调用setOnItemClickListener上的类

> ID：13707476
> 
> 赞同：0
> 
> 时间：2012-12-04T16:33:50.853
> 
> 标签：java, android, class

我有一个`gridview`。如果单击该网格中的一个项目，它将调用一个名为`get_details`. 我的问题是，第一次单击网格中的任何项目时，它会跳过，`new get_details().execute();`但在我下一次单击后它已经开始工作了..你能帮帮我吗..

这是我的代码

```
gridView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {

            final globalVars globalVars = (globalVars) getApplicationContext();

            String sel_id = ca_list.get(arg2).stud_id;
            globalVars.setClickedGrid(sel_id);
            Log.i("SELECT", sel_id);

            new get_details().execute();

            String p_id = globalVars.getPopupID().toString();
            String p_name = globalVars.getPopupName().toString();
            String p_absent = globalVars.getPopupAbsent().toString();
            String p_late = globalVars.getPopupLate().toString();
            Log.i("SHOW CALL" , p_name);

            int y = arg1.getTop();
            int x = arg1.getLeft();

                 showPopup(ViewAttendanceSP.this, x, y, p_id, p_name, p_absent, p_late);

        }
       }); 
```

get_details 类

```
private class  get_details extends AsyncTask<String, Integer, String> 
{
    @Override
    protected String doInBackground(String... arg0) 
    {
        InputStream is = null;
        String result = "";

        String bidSt = dispid.getText().toString();
        globalVars globalVars = (globalVars)getApplicationContext();
        String idSt = globalVars.getClickedGrid().toString();

        try 
        {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://192.168.59.1/sp/viewsumsp.php");

            List<NameValuePair> parameter = new ArrayList<NameValuePair>();
            parameter.add(new BasicNameValuePair("student_id", idSt));
            parameter.add(new BasicNameValuePair("beadle_id", bidSt));

            httppost.setEntity(new UrlEncodedFormEntity(parameter));

            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

        } catch (Exception e) 
        {
            Log.e("log_tag", "Error in http connection " + e.toString());
        }

        try 
        {
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;

            while ((line = reader.readLine()) != null) 
            {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
        } catch (Exception e) 
        {
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        return result;
    }

    @Override
    protected void onPostExecute(String result) 
    {
        super.onPostExecute(result);

        ArrayList<HashMap<String, String>> to_take = new ArrayList<HashMap<String, String>>();

        try 
        {
            JSONObject jArray = new JSONObject(result);

            JSONArray stud_info = jArray.getJSONArray("stud_info");
            ca_list1 = new ArrayList<ViewAttendanceSummaryObject>();

            for (int i = 0; i < stud_info.length(); i++) 
            {
                HashMap<String, String> map = new HashMap<String, String>();
                JSONObject e = stud_info.getJSONObject(i);

                map.put("id", String.valueOf(i));
                map.put("stud_id", e.getString("student_id"));
                map.put("f_name", e.getString("first_name"));
                map.put("l_name", e.getString("last_name"));
                map.put("absence", e.getString("absence"));
                map.put("lateness", e.getString("lateness"));

                to_take.add(map);
                Log.i("INNER" , e.getString("first_name"));

                final globalVars globalVars = (globalVars) getApplicationContext();

                String id = e.getString("student_id");
                String name = e.getString("last_name") + ", " + e.getString("first_name");
                String abs = e.getString("absence");
                String lat = e.getString("lateness");

                globalVars.setPopupID(id);
                globalVars.setPopupName(name);
                globalVars.setPopupAbsent(abs);
                globalVars.setPopupLate(lat);

                ca_list1.add(new ViewAttendanceSummaryObject(e.getString("student_id"), e.getString("first_name"), e.getString("last_name"), e.getString("absence"), e.getString("lateness")));
            }

        } catch (JSONException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

ps 我刚刚发现，它不会跳过 new get_details().execute(); 而是在 new get_details().execute(); 之后停止 被执行..我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:50:35.657

用于`onPreExecute`访问内部`AsyncTask`的 UI 元素：

```
private class  get_details extends AsyncTask<String, Integer, String> 
{
     String bidSt="";
       @Override
    protected void onPreExecute() {
        super.onPreExecute();

        //access all Ui elements here
        bidSt = dispid.getText().toString();

    }
    @Override
    protected String doInBackground(String... arg0) 
    {
        InputStream is = null;
        String result = "";
         //your code here 
```

因为在 AsyncTask 中无法从 doInBackground 访问 Ui 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:56:15.360

如果我正确理解您的问题，您将看到`AsyncTask`. 它将在后台运行，然后将其结果发布到主 UI 线程，因此它可能不会显示为立即运行。

根据[`AsyncTask`文档](http://developer.android.com/reference/android/os/AsyncTask.html)，它应该是一个相当短的操作，最多几秒钟。您的手术需要多长时间？如果您的后台任务应该处理您的每次点击`GridView`，那么它应该足够短，通常可以在用户再次点击之前完成。否则，您可能会创建一个后台任务队列，这些任务可能需要很长时间才能将结果发布给用户。

# php - 需要将数组的值作为字符串推送到变量中

> ID：13707477
> 
> 赞同：2
> 
> 时间：2012-12-04T16:33:51.837
> 
> 标签：php

需要像 ('1','2','3'........) 在 $variable 中推送数组的值。我有一个 while 循环，我从中获取值 1,2,3.... 我正在这样做

```
while ($record = mysql_fetch_array($query, MYSQL_ASSOC)) {  
    $users_id = $record['user_id'];  
    $uid = array_push($users_id, ','); 
} 
```

我需要这些值作为变量中的字符串，然后我将使用explode函数删除'，'并根据我的需要使用它。请任何人都可以帮助我..谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:36:17.873

将它们添加到字符串并分解它会给你一个值数组。您可以直接将它们推送到数组

```
$users_id = array();    

while ($record = mysql_fetch_array($query, MYSQL_ASSOC)) {  
    $users_id[] = $record['user_id'];  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:43:06.090

```
// open parens
$newString = "(";

// for each value add quotes and comma
foreach($users_id as $v) 
   $newString .= "'".$v."',";

// remove the trailing comma
$newString = substr($newString , 0, -1); 

// close parens
$newString .= ")"; 
```

# ruby-on-rails - validates_presence_of 属性在表单上不存在

> ID：13707478
> 
> 赞同：0
> 
> 时间：2012-12-04T16:33:53.887
> 
> 标签：ruby-on-rails

在我的`User.rb`模型中，我验证了`username`和`name`

```
 validates_presence_of :username, :name 
```

但是，当使用这样的回调创建时，只有`username`字段出现在表单上。`name``before_validation`

```
 def set_username_as_name_if_empty
    if self.username && self.username.present?
      self.name = self.username if self.name && self.name.empty?
    end
  end 
```

只要`name`表单上存在该字段（因为输入或隐藏无关紧要），这项工作就可以工作。

我的问题是如何在无需`name`在表单上添加字段的情况下实现相同的目标？听起来有点没有必要仅仅因为需要而将其添加为隐藏值。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:37:45.800

一种简化验证方法的方法：

```
def set_username_as_name_if_empty
  if name.blank?
    name = username if username.present?
  end
end 
```

因为执行以下操作不会引发任何错误：

```
1.9.3p0 :038 > nil.present?
 => false 
```

我不完全理解你的问题，但如果你的意思是

> “我是否被迫在表单中输入（甚至隐藏）以避免验证失败？”

我会说不，您不需要此输入，因为您`name`在验证之前设置了属性。

# jquery - jQuery cookie 在本地机器和生产服务器上的行为不同

> ID：13707479
> 
> 赞同：0
> 
> 时间：2012-12-04T16:33:53.760
> 
> 标签：jquery, cookies, session-cookies

我正在为一些网站的 javascript 效果设置一个 jQuery cookie。我将到期日期设置为 30 天。

在本地开发机器上，cookie 过期设置正确，而在生产机器上，cookie 过期设置为会话结束。使用 web 开发工具检查创建的 cookie 后，除了生产机器 cookie 被标记为“会话 cookie”并且不允许设置过期之外，一切都相同，而在本地开发机器上创建的 cookie 没有设置为“会话”并且过期日期是可编辑的。

有没有办法让生产机器cookie接受过期日期？

这就是我设置cookie的方式：

```
$.cookie('skip_animation','skip', 2592000); 
```

使用 jQuery 1.6.4（旧网站）

所有浏览器的行为方式都相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:24:42.707

这是什么语法？根据[https://github.com/carhartl/jquery-cookie/blob/master/README.md](https://github.com/carhartl/jquery-cookie/blob/master/README.md)，第三个参数应该是一个对象。在几天内给它一个“过期”属性，以给 cookie 一些生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:52:29.660

原因很可能与 jQuery 或其 cookie 插件无关。

请搜索相关浏览器设置、协议（http 与 https）和 URL 的差异。

编辑：生产服务器上的时间设置正确吗？会话 cookie 是否传输到服务器（浏览器不知道它是 JS-only）？也许cookie被某些组件主动重置？

# c# - 使用 Ajax 在另一个 ASP.Net 页面中加载一个 ASP.Net 页面

> ID：13707482
> 
> 赞同：0
> 
> 时间：2012-12-04T16:33:58.490
> 
> 标签：c#, asp.net, ajax, jquery, postback

我设法使用 jquery ajax 在另一个页面的 div 中加载了一个不同的页面。我遇到的问题是，当我单击此子页面内的按钮时，会导致回发到整个父页面。如何强制它只刷新它所在的面板？

还有一件事。我不确定我做的是否正确，但是父页面有自己的表单，带有 runat=server 设置，而在 div 中加载的辅助页面有自己的表单。我无法从后者中删除表单，因为它会导致错误。

我看过一些 asp.net ajax 教程，但它们不处理加载具有自己的 .net 控件的子页面。谁能指导我一些好的教程？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:54:56.063

好的，既然您使用的是 jQuery，让我们设置该事件操作。我假设以下标记：

```
<button type="submit" id="mySubmitButtonId">Submit</button> 
```

然后，在我的页面上，我有以下 javascript：

```
$("#mySubmitButtonId").click(function(event) { 
  event.preventDefault(); 
  // do here what you want to do instead including refresh of a section via ajax
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:45:53.810

您需要创建一个带有 Id 的空，例如：**ajaxDiv**

然后你创建一个这样的 jquery 脚本：

```
 <script type="text/javascript">
    // Called at the loading of a page
        $(document).ready(function () {
    //here you execute an ajax function 
    $.ajax({
                        url: 'the url to retrieve data as string ex : /Webservice/Test',
                        type: 'get',
                        async: true of false,
//if the request is successful, you load the content of your div with the strings you loaded
                        success: function (data) {
                           $("ajaxDiv").html(data);

                        }
                    });

     });
    </script> 
```

提示是将您的页面加载到 ajax 请求中。

# asp.net - 使用连接到数据库的 Visual Basic 更新数据服务中的更改

> ID：13707483
> 
> 赞同：1
> 
> 时间：2012-12-04T16:34:01.377
> 
> 标签：asp.net, sql, database, visual-studio-2010

我可以访问数据库中的数据，但是我无法更新我希望从客户端进行的任何更改。

这就是我认为问题所在。(VB2010)

服务器端 -

```
Public Function UpdateData(ByVal ds As RecipesTitleDataset) As Integer

    Try

        Dim da As New RecipesTitleDatasetTableAdapters.RecipeTitlesTableAdapter()

        Dim nRows As Integer = da.Update(ds)

        Return nRows

    Catch ex As Exception

        Return 1

    End Try

End Function 
```

客户端 -

```
Private Sub btnUpdateRecord_Click(ByVal sender As System.Object, _ 
```

ByVal e As System.EventArgs) 处理 btnUpdateData.Click

```
 Dim dsUpdates As DataSet = ds.GetChanges()

    If dsUpdates.HasChanges Then

        ds.Merge(ds, True)

        MessageBox.Show(Service.UpdateData(dsUpdates) & " CELLS CHANGED")

    End If

End Sub 
```

提前感谢您的帮助。

# git - 子树与特定提交合并

> ID：13707486
> 
> 赞同：1
> 
> 时间：2012-12-04T16:34:06.583
> 
> 标签：git, git-subtree

按照[GitHub 教程](https://help.github.com/articles/working-with-subtree-merge)，我将如何做这样的事情？

```
git read-tree --prefix=somedir/ -u someproject/commit-id:somedir 
```

我想要的不是与 master 或任何其他分支一起工作，而是一个特定的提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:53:07.380

```
git read-tree --prefix=somedir/ -u 360dde47f3:somedir 
```

# java - smack库中JNI Global对PacketWriter的引用，如何识别JNI Global引用的原因？

> ID：13707491
> 
> 赞同：0
> 
> 时间：2012-12-04T16:34:11.897
> 
> 标签：java, debugging, memory-leaks, garbage-collection, java-native-interface

我正在使用 smack 库连接到 Facebook XMPP 服务器。

在我的本地环境调试模式下，有时会发生内存泄漏。我有：

*   检查堆转储，
*   发现 JNI 全局引用总是引用 smack 库中的 PacketWriter 对象，
*   PacketWriter 包含一个线程来完成输出工作

**问题：** 是什么导致了 JNI 全局引用？（当然服务器中没有使用JNI）

JNI Glabal 引用是由服务器的调试模式引起的吗？

我已经检查了这个问题：[如何确定 JNI 全局引用内存泄漏的原因？](https://stackoverflow.com/questions/6423873/how-to-identify-the-cause-of-a-jni-global-reference-memory-leak).

[这](http://fisheye.igniterealtime.org/browse/smack/trunk)是 smack 源代码视图：

**更新** 堆转储很大，我贴了VisualVM关于堆的截图 [http://sphotos-a.ak.fbcdn.net/hphotos-ak-ash3/21927_384581804957834_1241962037_n.jpg](http://sphotos-a.ak.fbcdn.net/hphotos-ak-ash3/21927_384581804957834_1241962037_n.jpg)

# c++ - Windows 路径处理库

> ID：13707492
> 
> 赞同：0
> 
> 时间：2012-12-04T16:34:15.073
> 
> 标签：c++, windows-8

我搜索了一些 Windows 的路径处理功能，我想出了这些 -> [LINK](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773559%28v=vs.85%29.aspx)
现在因为它建议使用更安全的功能，我选择了那些，但我现在意识到它们只是 windows8。
我现在的机器是windows 8，但我想至少支持windows 7。
我觉得很奇怪，虽然像这样的一些基本功能只有win8；到目前为止，我使用的所有其他函数（例如字符串处理函数）都有一个更安全的版本（XXX_s 版本）包含在标准库中。也许没什么大不了的，但是，我还有什么选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:27:54.147

不，您没有其他选择。

您发现的功能多年来一直运行良好，但在安全问题上提出了更高的标准，并且最近添加了新版本以减少错误调用导致缓冲区溢出的可能性。通常，像这样的新 API 不会向后移植到旧版本的操作系统。

# ruby - 如何在sql查询中实现and，or子句？铁轨上的红宝石

> ID：13707493
> 
> 赞同：0
> 
> 时间：2012-12-04T16:34:21.953
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我试着环顾四周，但找不到关于如何实现**AND**组合的答案， **|** （或者）。我收到一个错误。代码如下：

```
allgames = GameInfo.Get.where(["list = ? AND (lang = ? OR lang = ?)", "yes", "en", @lang]).order(:order) 
```

我得到的错误如下：

```
The specified query expression syntax is not valid. 
```

请阐明一些光，

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:39:09.187

sql中不使用管道：

```
where("list = ? AND (lang = ? OR lang = ?)", "yes", 'en',@lang) 
```

# asp.net - 在 PreInit() 上映射 RouteTable - 它会导致任何问题吗？

> ID：13707494
> 
> 赞同：0
> 
> 时间：2012-12-04T16:34:25.520
> 
> 标签：asp.net, routes, asp.net-4.0

我的页面路由映射会根据某些条件而变化。要确定此标准，我需要访问`HttpRequest`这意味着我无法在`Application_Start()`. 在那张纸条上，我已经`PreInit()`在我的默认页面上完成了它，它似乎可以正常工作。但是，我在 Route Tables 中看到的所有示例都是在 Application_Start 中执行的，这纯粹是为了避免清除路由列表并再次添加它们吗？它会不会对我的 Web 应用程序以我正在做的方式造成任何伤害？

编辑：示例：

我根据项目编号以及是否正在移动设备上查看网站，从不同文件夹加载控件，在该说明中，我需要在映射路线之前了解此信息，如下所示：

```
RouteCollection.MapPageRoute("OneParam", "{Action}.html", String.Format("~/{1}{2}/Default.aspx", ProjectNumber, MobilePathStr)); 
```

这将映射到类似`~/1234/Mobile/Default.aspx`或可以映射到`~/1234/Default.aspx`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:08:05.307

不要那样做。

相反，您应该创建自己的`RouteBase`类来查找每个请求的信息并运行适当的处​​理程序。

要发送到 ASPX 页面，您可以`return BuildManager.CreateInstanceFromVirtualPath(virtualPath, typeof(Page)) as Page;`创建`PageRouteHandler`或委托给它。

# postgresql - Herkou 上的 PostgreSQL “缺乏检测功能”

> ID：13707495
> 
> 赞同：2
> 
> 时间：2012-12-04T16:34:27.140
> 
> 标签：postgresql, heroku, pgadmin

当我将 pgAdmin III 连接到 Herkou 上的 PostgreSQL 时，它说：“服务器缺少检测功能……”

如何在 Heroku 上安装这些功能 - 在像黑匣子一样的服务器上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T16:47:04.117

该消息指的是[`adminpack`](http://www.postgresql.org/docs/current/static/adminpack.html)模块。

你不能在 Heroku 上安装它。这是合适的，因为您控制的不是数据库*服务器*，而是*数据库*。`adminpack`为超级用户提供修改文件系统的功能，这是服务器级别的考虑。同样，Heroku 不允许您删除数据库、创建新用户或执行其他超级用户功能。

作为获得系统级控制权的交换，Heroku 执行所有操作功能，例如应用操作系统或数据库级补丁、设置复制（[fork/follow](https://devcenter.heroku.com/articles/heroku-postgres-follower-databases)）、备份以及围绕计划内或计划外中断迁移数据库。如果您更愿意自己执行此操作，您当然可以在 EC2 中运行您自己的数据库，并将您的 Heroku 应用程序指向该数据库——此时您可以安装`adminpack`和管理您的内容。

尽管如此，您不需要`adminpack`执行数据库级别的操作。您的用户可以完全控制您的数据库，而 PostgreSQL 提供开箱即用所需的一切。

# java - 我们如何在 Java 中简化这种代码？类似于 C 中的宏？

> ID：13707496
> 
> 赞同：0
> 
> 时间：2012-12-04T16:34:40.033
> 
> 标签：java, macros

```
public static boolean diagonals(char[][] b, int row, int col, int l) {

            int counter = 1; // because we start from the current position
            char charAtPosition = b[row][col];
            int numRows = b.length;
            int numCols = b[0].length;
            int topleft = 0;
            int topright = 0;
            int bottomleft = 0;
            int bottomright = 0;
            for (int i=row-1,j=col-1;i>=0 && j>=0;i--,j--) {
                if (b[i][j]==charAtPosition) {
                    topleft++;
                } else {
                    break;
                }
            }
            for (int i=row-1,j=col+1;i>=0 && j<=numCols;i--,j++) {
                if (b[i][j]==charAtPosition) {
                    topright++;
                } else {
                    break;
                }
            }
            for (int i=row+1,j=col-1;i<=numRows && j>=0;i++,j--) {
                if (b[i][j]==charAtPosition) {
                    bottomleft++;
                } else {
                    break;
                }
            }
            for (int i=row+1,j=col+1;i<=numRows && j<=numCols;i++,j++) {
                if (b[i][j]==charAtPosition) {
                    bottomright++;
                } else {
                    break;
                }
            }
            return topleft + bottomright + 1 >= l || topright + bottomleft + 1 >= l; //in this case l is 5
    } 
```

在我在[这里](https://stackoverflow.com/questions/13705431/java-2d-array-diagonals-for-game/13706657#13706657)发布上面的代码之后，我忍不住想通过将四个几乎相同的循环合并到一个方法中来简化代码。

这是我想要的方法：

```
public int countSteps(char horizontal, char vertical) {

} 
```

两个参数`horizontal`和`vertical`可以是`+`或`-`表示四个方向。如果可能的话，我想看到的`i++;`是推广到取值`i horizontal horizontal;`时。`horizontal``+`

我不想看到的是`if`or`switch`语句，例如：

```
public int countSteps(char horizontal, char vertical) {
     if (horizontal == '+' && vertical == '-') {
         for (int i=row-1,j=col+1;i>=0 && j<=numCols;i--,j++) {
                if (b[i][j]==charAtPosition) {
                    topright++;
                } else {
                    break;
                }
            }
     } else if (horizontal == '+' && vertical == '+') {
          for (int i=row+1,j=col+1;i>=0 && j<=numCols;i++,j++) {
                if (b[i][j]==charAtPosition) {
                    topright++;
                } else {
                    break;
                }
            }
     } else if () {

     } else {

     }
} 
```

因为它和原来的一样乏味。另请注意，`i>=0 && j<=numCols;`例如循环条件的比较符号与和`>= && <=`的值组合对应。`horizontal``vertical`

对不起，我的措辞不好，如果有什么不清楚的地方，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:02:25.987

您可以轻松地将循环转换为：

```
int doit(int i_incr, int j_incr) {
    int cornerIncrement = 0;
    for (int i=row+i_incr, j=col+j_incr; i>=0 && j>=0; i+=i_incr, j+=j_incr) {
        if (b[i][j]==charAtPosition) {
            cornerIncrement++;
        } else {
            break;
        }
    }
    return cornerIncrement;
} 
```

然后重复4次...

```
int increment = doit(+1, -1);  // Or (-1, +1) etc
topLeft += increment;  // Or bottomLeft/topRight/bottomRight 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:01:16.970

所以你有这两个循环：

```
for (int i=row-1,j=col-1;i>=0 && j>=0;i--,j--) {
  if (b[i][j]==charAtPosition) {
    topleft++;
  } else {
    break;
  }
}
for (int i=row-1,j=col+1;i>=0 && j<=numCols;i--,j++) {
  if (b[i][j]==charAtPosition) {
    topright++;
  } else {
    break;
  }
} 
```

首先，把你的计数器变成一个数组，即`topleft`->`counter[0]`和`topright`->`counter[1]`

然后，将代码之间的差异转化为变量，这样你就有了：

```
for(direction = 0; direction < 2; direction++) {
  int offset = direction * 2 - 1; // This is what I mean by doing some math
  for(int i=row-1,j=col+offset;i>=0 && -j*offset>=-numCols*direction;i--,j+=offset) {
  if (b[i][j]==charAtPosition) {
    counter[direction]++;
    // etc. 
```

数学有时会变得很难看，或者您可以在单独的行中进行。查看[我关于这个问题的另](https://stackoverflow.com/questions/13705431/java-2d-array-diagonals-for-game/13705936#13705936)`? :`一篇文章，了解使用语法在这个特定问题中进行数学运算的优雅方法。

# html - 如何将 HTML 实体包含到 XML 文件中

> ID：13707500
> 
> 赞同：2
> 
> 时间：2012-12-04T16:34:43.870
> 
> 标签：html, xml, html-entities, mathml

在火狐中：

```
<?xml version="1.0" encoding="utf-8"?>
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML">
  <mi>&rho;</mi>
</math> 
```

导致“未定义实体”错误。

我知道那里缺少一些东西。我只是不知道我应该写什么来纠正这个问题。我想避免将每个 unicode 字符重写到文档中。

**编辑**我尝试了以下，仍然无法正常工作，同样的错误：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE math [
  <!ENTITY % HTMLlat1 PUBLIC
    "-//W3C//ENTITIES Latin 1 for XHTML//EN"
    "xhtml-lat1.ent">
  %HTMLlat1;
  <!ENTITY % HTMLsymbol PUBLIC
    "-//W3C//ENTITIES Symbols for XHTML//EN"
    "xhtml-symbol.ent">
  %HTMLsymbol;
  <!ENTITY % HTMLspecial PUBLIC
    "-//W3C//ENTITIES Special for XHTML//EN"
    "xhtml-special.ent">
  %HTMLspecial;
]>
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML">
  <mi>&rho;</mi>
</math> 
```

**编辑**在 chrome 中，这会导致以下消息：

```
error on line 6 at column 13: PEReference: %HTMLlat1; not found
warning on line 10 at column 15: PEReference: %HTMLsymbol; not found
warning on line 14 at column 16: PEReference: %HTMLspecial; not found 
```

**编辑**尝试下载 .ent 文件并将引用更改为本地 http:// 路径或 file:/// 路径，但没有成功。关于主题的类似帖子：[PHP 中的 XML 目录](https://stackoverflow.com/questions/11984515/xml-catalog-in-php)

**编辑**浏览器的快速解决方法：

```
<!DOCTYPE html>
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML">
  <mi>&rho;</mi>
</math> 
```

您需要抑制 XML 标头，因此将其理解为 HTML。

然而，这并没有回答问题，因为问题是导入实体，而文档被声明为 XML。

**回答**

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE math PUBLIC "-//W3C//DTD MathML 2.0//EN" "http://www.w3.org/Math/DTD/mathml2/mathml2.dtd">
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML">
  <mi>&rho;</mi>
</math> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:50:26.147

如果您可以修改 XML 以包含内联 DTD，您可以在那里定义实体：

```
> <!DOCTYPE yourRootElement [
>     <!ENTITY bull "&#8226;">
>     .... ]> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:24:47.470

在 XML 声明之后添加 MathML 2.0 文档类型：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE math
    PUBLIC "-//W3C//DTD MathML 2.0//EN"
           "http://www.w3.org/Math/DTD/mathml2/mathml2.dtd"
> 
```

原因是在 Web 浏览器中实体引用的处理非常笨拙。他们实际上并不阅读 DTD。相反，它们具有预定义实体的内置表，可以通过使用特定`doctype`字符串来打开。这是字符串魔术，例如使用 MathML 3.0 doctype 将不起作用。参照。使用 XSLT到[XML 到 XHTML：使用 &Sum 等实体；（这是一个 MATHML 实体）](https://stackoverflow.com/questions/10833051/xml-to-xhtml-using-xslt-using-entities-such-as-sum-which-is-a-mathml-entity)（尤其是 Martin Honnen 对答案的评论）。

或者，使用字符本身，或者，如果您的创作系统无法方便地生成它们，则使用字符引用，如`&#x3c1;`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T22:08:56.297

请注意，XHTML1 和 MathML2 中的定义现在已过时，并且与当前浏览器中内置于 HTML 解析器的定义不一致。MathML3 和 HTML5 中使用的当前定义在此处定义

[http://www.w3.org/2003/entities/2007doc/Overview.html](http://www.w3.org/2003/entities/2007doc/Overview.html)

这是编辑（我的：-）草稿，顶部有一个指向 REC 版本的链接。

实体的单个 DTD 声明文件集是

[http://www.w3.org/2003/entities/2007/htmlmathml-f.ent](http://www.w3.org/2003/entities/2007/htmlmathml-f.ent)

一般来说，最好在 XML 上下文中使用数字引用而不是命名实体，因为浏览器不会获取外部引用的 DTD。

如果您通过公共标识符引用 xhtml 或 mathml2 dtd（即它们不使用您指定的实体定义），遵循 HTML(5) 规范的浏览器将使用从上述规范派生的内置定义集。

查看针对 HTML 规范的相关错误

[https://www.w3.org/Bugs/Public/show_bug.cgi?id=13409](https://www.w3.org/Bugs/Public/show_bug.cgi?id=13409)

# sql - SQL Server 2008 中的 ON DELETE 触发器影响的行数超出预期

> ID：13707503
> 
> 赞同：0
> 
> 时间：2012-12-04T16:34:47.907
> 
> 标签：sql, sql-server-2008, triggers

我有以下简化的数据库模型：

![在此处输入图像描述](../Images/bc0be75a3954198cfc8335287feeb32d.png)

有工作计划。Jobs 包含位置的 objectid，但它们没有与 table 显式关联`Location`。

我有一个`ON DELETE`表的触发器`Location`。我希望触发器将作业的 's 重置`objectid`为 -1。

```
update dbo.Job 
set objectid = -1, lat = -1, lng = -1, location = null 
from
   (dbo.[Plan] as p 
    inner join dbo.Job as j on (p.planid = j.planid 
                                and p.userid in (select user_id from deleted)))
    inner join deleted as d on j.objectid = d.objectid 
```

我的问题：

此触发器会重置**所有**匹配的 objectid，即使作业属于不同的`aspnet_Users`. 我怎样才能实现只有相应`aspnet_User`的工作受触发器影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:50:14.990

我认为您需要将`objectid`and`userid`列与连接一起使用，而不是与`IN`运算符一起使用。

另外，我不明白为什么`aspnet_Users`要添加：

```
update 
        dbo.Job 
set 
        objectid = -1, lat = -1, lng = -1, location = null 
from
        dbo.Job as j 
    join
        dbo.Plan as p   on  p.planid = j.planid
    join
        deleted as d    on  d.objectid = j.objectid
                        and d.user_id = p.userid ; 
```

# cordova - PhoneGap 地理位置与浏览器地理位置

> ID：13707504
> 
> 赞同：1
> 
> 时间：2012-12-04T16:34:51.683
> 
> 标签：cordova, geolocation, native

移动浏览器内置了地理定位，当使用 PhoneGap 编译 Web 应用程序时，就有机会使用 PhoneGap 地理定位。

使用其中一个有什么优势吗？如果有，它们是什么？

如果我选择坚持使用标准地理位置，我会认为 PhoneGap 地理位置只会调用我将使用的同一浏览器地理位置。

欢迎所有想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:37:37.670

当 Web 视图提供它自己的 W3C 地理定位 API 实现时，PhoneGap 会利用该实现。当 web 视图不提供实现时，我们将地理定位 API 与我们自己的实现相结合。通常，这仅用于旧版本的 Android。

# java - 使用 vbscript 杀死 Java 进程

> ID：13707505
> 
> 赞同：1
> 
> 时间：2012-12-04T16:34:56.707
> 
> 标签：java, process, vbscript, kill

我有一些 java 进程正在运行，我想结束某个 java 进程。我已经安装了 jdk，所以我可以使用 jps.exe [output = PIDNumber Processname] 来查看正在运行的 java 任务。挑战是我想用 vbscript 杀死某个进程名。所以我必须通过脚本运行 jps.exe 并将输出放入一个数组中。

感谢任何提示如何实现目标！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:24:22.750

我找到了我的问题的答案：

`ShellCommandToRun = "jps"
`Set objShell = CreateObject("WScript.Shell") Set objExec = objShell.Exec(ShellCommandToRun)
strPingResults = objExec.StdOut.ReadAll` WScript.Echo strPingResults`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:38:05.753

你可以使用[PsKill](http://technet.microsoft.com/en-us/sysinternals/bb896683.aspx)。它可以终止系统进程
，您必须下载可执行文件并将其放在与脚本相同的目录中，或在`WshShell.Exec`调用中添加它的路径

# c# - 下拉列表数据绑定到 sqldatasource - 插入的记录在页面刷新之前不显示

> ID：13707510
> 
> 赞同：1
> 
> 时间：2012-12-04T16:35:13.923
> 
> 标签：c#, asp.net

我有一个绑定到 sqldatasource 的供应商下拉列表。可以通过表单视图添加供应商，但是一旦单击插入按钮，记录就会插入到数据库中，但不会显示在下拉列表中。

sqldatasource的代码如下：

```
<asp:SqlDataSource runat="server" ID="sqlAddSupplier" 
 ConnectionString="<%$ ConnectionStrings:cctConnectionString%>" 
 ProviderName="<%$ ConnectionStrings:cctConnectionString.ProviderName%>" 
 InsertCommand="suppliers_Insert" InsertCommandType="StoredProcedure">
    <InsertParameters>
        <asp:SessionParameter SessionField="siteId" DefaultValue="0" Name="p_siteId" Type="Int64" />
        <asp:Parameter Name="code" Type="String" />
        <asp:Parameter Name="name" Type="String" />
    </InsertParameters>
</asp:SqlDataSource> 
```

下拉列表和表单视图添加供应商的代码如下：

```
<asp:DropDownList ID="lstSuppliers" runat="server" CssClass="dropDownList" 
 AppendDataBoundItems="true" DataSourceID="sqlSuppliers" DataTextField="name" 
 DataValueField="id" SelectedValue='<%# Bind("supplierId") %>' >
    <asp:ListItem Text="" Value="0"></asp:ListItem>
</asp:DropDownList>

<asp:Panel runat="server" ID="pnlAddSupplier" CssClass="groupBoxPageWidth">

    <asp:FormView ID="fvAddSupplier" runat="server" DataSourceID="sqlAddSupplier" 
     OnItemInserted="fvAddSupplier_ItemInserted">

        <InsertItemTemplate>
            <b>Code:*</b>
            <asp:TextBox ID="txtCode" runat="server" Text='<%# Bind("code") %>' CssClass="textbox"></asp:TextBox>
            <b>Name *:</b>
            <asp:TextBox ID="txtName" runat="server" Text='<%# Bind("name") %>' CssClass="textbox"></asp:TextBox>
            <br /><br />
            <asp:Button runat="server" ID="cmdInsertSupplier" Text="Save" CssClass="buttonControlGreen" CommandName="Insert" OnClientClick="needToConfirm=false;" />
            <asp:Button runat="server" ID="cmdCancelSupplier" Text="Cancel" CssClass="buttonControl" CommandName="Cancel" OnClientClick="needToConfirm=false;" />
        </InsertItemTemplate>
    </asp:FormView>
</asp:Panel> 
```

ItemInserted 事件的代码如下：

```
protected void fvAddSupplier_ItemInserted(object sender, FormViewInsertedEventArgs e)
{
    fvAddSupplier_CommandCompletion(e.Exception, e.KeepInInsertMode, "Inserted");
}

protected void fvAddSupplier_CommandCompletion(Exception sqlException, bool keepInMode, String procedureExecuted)
{
    Panel pnlAddSupplier = (Panel)fvProduct.FindControl("pnlAddSupplier");
    Label lblAddSupplierError = (Label)pnlAddSupplier.FindControl("lblAddSupplierError");

    if (sqlException != null)
    {
        keepInMode = true;
    }
} 
```

如果我调用 Response.Redirect 来刷新整个页面，它将刷新下拉列表，但我认为这应该在 PostBack 发生吗？插入记录后，我还尝试在下拉列表上调用 DataBind，但随后看到以下错误：

```
Databinding methods such as Eval(), XPath(), and Bind() can only be used in the context of a databound control. 
```

我对 asp.net 比较陌生，所以可能会遗漏一些明显的东西，任何帮助将不胜感激。

# php - 跳闸 blocks from HTML using regex

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-12-04T16:35:16.700318 次This question shows research effort; it is useful and clear0This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

> **Possible Duplicate:**
> [How to parse and process HTML with PHP?](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

I want to be able to strip inline css {} blocks from HTML using preg_replace. Anyone know the regex for that?

**UPDATE**

i wont be controlling the pages. I want to strip all markup from a page, an just leave the content.

[php](/tags/php "show questions tagged 'php'")[html](/tags/html "show questions tagged 'html'")[regex](/tags/regex "show questions tagged 'regex'")4

## 3 回答 3

This answer is useful5

有一个很棒的[3rd-party 库](http://simplehtmldom.sourceforge.net)可以让这些简单的 DOM 操作变得非常容易。

```
$html = new simple_html_dom(); $html->load($inputString); foreach($html->find('style') as $style) $style->outertext = ''; $outputString = $html->save(); 
```

如果由于某种原因不能使用第三方库，使用[PHP 的内置 DOM 模块](http://php.net/manual/en/book.dom.php)仍然是比正则表达式更好的选择。

如果您想保留标签但仅出于某种原因删除其内容，请使用`innertext`而不是`outertext`.

于 2012-12-04T16:51:25.933 回答This answer is useful0

对于剥离内联 css，这种方法对我来说似乎很奇怪。你为什么不使用 javascript 甚至 jQuery 来解决这个问题？

只需使用 jQuery 调用 removeAttr 即可。

[removerAttr | jQuery API](http://api.jquery.com/removeAttr/)

于 2012-12-04T16:42:09.000 回答This answer is useful0

首先，正则表达式不是解析 HTML 的方法。如果你真的想解析 HTML，并且不能使用现有的解决方案，那么使用 PHP 中的 DOM 模块。 [http://php.net/manual/en/book.dom.php](http://php.net/manual/en/book.dom.php)

幸运的是，PHP 已经有一个函数可以从 HTML 块中去除标签。它被称为`strip_tags()`。 [http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

于 2012-12-04T16:44:02.263 回答

#### Related

[1](/questions/19411285 "Question score (upvotes - downvotes)")[caching - 在 Google Apps 脚本中使用私有缓存时如何定义用户？](/questions/19411285)[1](/questions/19411290 "Question score (upvotes - downvotes)")[android - 如何创建一个创建不连续边框的 xml 可绘制对象？](/questions/19411290)[4](/questions/19411291 "Question score (upvotes - downvotes)")[python - 获取直到 ^$ 的行](/questions/19411291)[3](/questions/19411293 "Question score (upvotes - downvotes)")[python - Python 和质数](/questions/19411293)[1](/questions/19411294 "Question score (upvotes - downvotes)")[d3.js - 不受欢迎的 D3 和弦图链接扭曲](/questions/19411294)[1](/questions/19411296 "Question score (upvotes - downvotes)")[php - 获取PHP注册表以连接MYSQL](/questions/19411296)[2](/questions/19411307 "Question score (upvotes - downvotes)")[perl - 避免在命令行上输入密码 (sudo)](/questions/19411307)[2](/questions/19411308 "Question score (upvotes - downvotes)")[php - ajax 成功函数 - 检查响应是否包含字符串](/questions/19411308)[1](/questions/19411309 "Question score (upvotes - downvotes)")[javascript - java脚本的正则表达式](/questions/19411309)[1](/questions/19411311 "Question score (upvotes - downvotes)")[symfony - 在 symfony2 中编译 scss 时出现 500 错误](/questions/19411311)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：13707511
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# sql - Table join; select 1 entry from join

> ID：13707512
> 
> 赞同：0
> 
> 时间：2012-12-04T16:35:17.547
> 
> 标签：sql, sql-server, tsql

In SQL Server, I have two tables. One "main" table with all the data and a unique `id` per entry. The other table is an audit log, where that `id` from main will be stored multiple times in the audit table.

My query looks like:

```
SELECT 
    a.title, a.id, a.name, t.user, t.time  
FROM 
    MainTable a      
INNER JOIN 
    AuditLog AS t ON a.id = t.id    
WHERE 
    a.NAME LIKE 'Something%'  
    AND a.ACTIVE = 'Y' 
```

Which gives a result like:

```
TITLE           ID          NAME         USER          TIME
----------------------------------------------------------------
Something1      someth1     Some 1       User5         468534771
Something1      someth1     Some 1       User7         468574887
Something2      someth2     Some 2       User6         468584792 
```

Which returns multiple results of the ID. I only want the oldest (from `AuditLog`) entry and not every one. So the result I would want looks like:

```
TITLE           ID          NAME         USER          TIME
----------------------------------------------------------------
Something1      someth1     Some 1       User5         468534771
Something2      someth2     Some 2       User6         468584792 
```

How can this be done? I'm trying some subqueries within the join.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:40:47.900

在 sql server 2005+ 中，您可以使用`row_number()`

```
select title, id, name, user, time
from
(
  SELECT a.title, a.id, a.name, t.user, t.time,
    row_number() over(partition by a.id order by t.time) rn
  FROM MainTable a
  INNER JOIN AuditLog AS t
    ON a.id = t.id
  WHERE a.NAME LIKE 'Something%'
    AND a.ACTIVE='Y'
) src
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/eef6c/4)

或者您可以使用子查询来获取最短时间：

```
SELECT a.title, a.id, a.name, l.user, l.time
FROM MainTable a 
INNER JOIN AuditLog l
  ON a.id = l.id
INNER JOIN
(
  select min(time) Mintime, id
  from AuditLog
  group by id
) AS t 
  ON l.id = t.id
  AND l.time = t.mintime
WHERE a.NAME LIKE 'Something%' 
  AND a.ACTIVE='Y'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:49:27.747

试试这个

```
SELECT a.title, a.id, a.name, t.user, t.time  
FROM MainTable a      
    JOIN AuditLog AS t ON a.id = t.id
        JOIN (SELECT ID, MAX(TIME) AS LASTTIME FROM AUDITLOG) AS c 
        ON c.ID =  t.id AND c.LASTTIME = t.time    
WHERE a.NAME LIKE 'Something%'  
    AND a.ACTIVE = 'Y' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:40:11.037

```
SELECT TOP 1 a.title, a.id, a.name, t.user, t.time
FROM MainTable a
INNER JOIN AuditLog AS t
ON a.id = t.id
WHERE a.NAME LIKE 'Something%'
AND a.ACTIVE='Y'
ORDER BY T.DATE DESC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T16:40:31.477

您可以使用`outer apply`，例如：

```
select  *
from    MainTable a
outer apply
        (
        select  top 1 *
        from    AuditLog t
        where   a.id = t.id
        order by
                t.time
        ) t
where   a.name like 'Something%'
        and a.active = 'y' 
```

# jquery - 将 js 文件添加到 Rails3

> ID：13707514
> 
> 赞同：1
> 
> 时间：2012-12-04T16:35:20.093
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3

[即使在完成Rails Asset Pipeline 教程](http://railscasts.com/episodes/279-understanding-the-asset-pipeline)之后，我也有点困惑。我正在尝试添加最新的 jquery 文件。我是通过布局 javascript_include_tag 还是通过 application.js 做到这一点？

如果是这样，有什么区别？如果我`//= require jquery`在 application.js 中使用，我将如何指定实际的内部版本号

```
<%= javascript_include_tag "http://ajax.googleapis.com/ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js",
 "jquery.rails.js", 
 "application.js" 
 %> 
```

上面的方法是用上面的行添加两次jquery，然后通过application.js

```
//= require jquery 
```

应用程序是否需要从已安装的 gem 中获取 js 文件。在我的 Gemfile 我有这条线

```
gem 'jquery-rails' 
```

所以我的主要问题是我应该从哪里加载我的特定 jquery 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:45:35.200

`jquery-rails`包含特定版本的 jquery（哪个版本将取决于 gem 的版本），这就是您使用`//= require jquery`. 如果这样做，*则不*应将jquery 包含在`javascript_include_tag`.

`jquery-rails`如果您想使用与gem 中包含的版本不同的版本，请将其设置`javascript_include_tag`为您拥有的版本并省略`//= require jquery`说明。

为了进一步解释，`//= require`资产管道使用该语法在加载时加载（并且在预编译时也合并到）特定文件`application.js`。这样做的主要好处之一是单个资源文件的缓存和交付速度更快。分别包含多个脚本`javascript_include_tag`是加载脚本的另一种方式，但由于它`<script>`为每个文件添加了单独的标签，因此无法获得`//= require`语法提供的好处。

然而，对于 CDN 服务的脚本，失去的好处大部分都得到了弥补。这是因为它们很可能已经被客户端缓存，服务非常迅速，并且保证将来不会被修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T15:02:22.987

# 应用程序.js

文件在生产中的一个文件中提供（压缩和编译），这意味着：

```
//= require my_file 
```

你得到：

```
<script ... src="/assets/application.js" ...> 
```

在 application.js 中包含 my_file 并压缩。这是默认的生产配置：

```
config.assets.compress = true # just to compress
config.assets.compile = false # false to use precompiled assets, you precompile with rake assets:precompile
                              # true to allow compilation in production 
```

注意：预编译是将 scss 和 coffee 文件转换为 css 和 javascript 并将它们保存在 public 目录下，以便在请求这些文件时不访问 Rails 后端。

# javascript_include_tag

```
javascript_include_tag 'application', 'my_second_file' 
```

你得到：

```
<script ... src="/assets/application.js" ... >
<script ... src="/assets/my_second_file.js" ... > 
```

如果您离开，您将`my_first_file`嵌入到 application.js 中`//= require my_first_file`。

# 放在哪里

在生产中你不会调试，对吗？，把它们放在`application.js`.

# mysql - MySQL从带有表名的连接中返回字段和数据？

> ID：13707518
> 
> 赞同：0
> 
> 时间：2012-12-04T16:35:24.083
> 
> 标签：mysql

在 mysql 中是否可以在不手动设置 'AS' 的情况下在连接中返回 tablename.field ？例如，假设我想运行这个查询：

```
SELECT * FROM table1 LEFT JOIN table2 ON table1.id = table2.id; 
```

我想要得到的是

```
table1.prop1 = 'some value'
table1.prop2 = 'some value'
table2.prop1 = 'some value'
... 
```

可能的 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:37:55.933

不，不是根据 SQL 规范。但是，您可以构建一个 udf 或其他高级语言函数来为您执行此操作...

# java - 在 java 中运行 bash shell 脚本

> ID：13707519
> 
> 赞同：16
> 
> 时间：2012-12-04T16:35:26.010
> 
> 标签：java, shell

我想从下面的程序中运行一个 shell 脚本，但它似乎没有做任何事情。我直接在 linux 终端中运行了相同的命令，它工作正常，所以我猜这是我的 java 代码。如您所见，我首先使用 PrintWriter 将命令写入 shell 脚本，但我希望这不会影响 shell 脚本本身的运行。任何帮助，将不胜感激！

```
 public static void main(String[] args) {
    // TODO Auto-generated method stub

    String nfdump = "nfdump -o csv -r /home/shane/Documents/nfdump/nfcapd.201211211526>blank.txt";

    try {
        FileWriter fw = new FileWriter("/home/shane/Documents/script.sh");

        PrintWriter pw = new PrintWriter(fw);

        pw.println("#!/bin/bash");
        pw.println(nfdump);

        pw.close();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    Process proc = null;

    try {
        proc = Runtime.getRuntime().exec("sh /home/shane/Documents/script.sh");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-04T16:37:24.500

您应该使用返回[`Process`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)的来获得结果。

[`Runtime#exec`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)将命令作为一个单独的进程执行并返回一个类型为 的对象`Process`。您应该调用[`Process#waitFor`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#waitFor%28%29)，以便您的程序等待新进程完成。然后，您可以调用[`Process.html#getOutputStream()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#getOutputStream%28%29)返回的[`Process`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)对象来检查执行命令的输出。

创建流程的另一种方法是使用[`ProcessBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html#command%28java.lang.String...%29).

```
Process p = new ProcessBuilder("myCommand", "myArg").start(); 
```

使用[`ProcessBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html#command%28java.lang.String...%29)，您将命令的参数列为单独的参数。

请参阅[ProcessBuilder 和 Runtime.exec() 之间的区别](https://stackoverflow.com/q/6856028/130224)以及[ProcessBuilder 与 Runtime.exec()](https://stackoverflow.com/q/3997127/130224)以了解有关 和 之间区别的更多[`Runtime#exec`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)信息[`ProcessBuilder#start`](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html#start%28%29)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T09:15:11.447

当您从 Java 执行脚本时，它会生成一个未设置 PATH 环境变量的新 shell。

使用以下代码设置 PATH 环境变量应该会运行您的脚本。

```
String[] env = {"PATH=/bin:/usr/bin/"};
String cmd = "you complete shell command";  //e.g test.sh -dparam1 -oout.txt
Process process = Runtime.getRuntime().exec(cmd, env); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-08T05:08:25.753

试试这个，它会工作的。

```
String[] cmd = new String[]{"/bin/sh", "path/to/script.sh"};
Process pr = Runtime.getRuntime().exec(cmd); 
```

# c - Visual Basic .NET 中的 C 样式指针

> ID：13707520
> 
> 赞同：1
> 
> 时间：2012-12-04T16:35:27.847
> 
> 标签：c, vb.net, pointers

一段时间以来，我一直在研究 Visual Basic .NET 中的 C 样式指针。我遇到了[http://support.microsoft.com/kb/199​​824](http://support.microsoft.com/kb/199824?wa=wsignin1.0) ?wa=wsignin1.0但我不知道这是否正确或如何应用它。我已经使用 c 中的程序编写了一个简单的指针，我希望它将逐行转换为 Visual Basic，并在必要时添加注释。这是C：

```
int main()
{
    int *myNumber=3; //the * means it's a pointer

    doubleIt(*myNumber); //we use the void, the * means it returns a value not address
    printf("%d",myNumber); //we print the variable

    return 0; //we terminate the function
}

void doubleIt(int input)
{
    input*=2; //double the input
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T16:38:50.730

您的 C 代码存在一些问题，其中之一是：

```
int *myNumber=3; //the * means it's a pointer 
```

如果不先为其分配内存，则无法为这样的指针分配值。

因此，您将执行以下操作：

```
int* myNumber = malloc(sizeof(int));
*myNumber  = 3;
free(myNumber); 
```

VB.NET 没有指针的概念。一切（即 every `Object`）都是一个引用，这与不使用 Interop 的情况下得到的指针差不多。如果您需要进行互操作`IntPtr`，则可以使用可用于表示指针类型的类型。

您的 VB.NET 程序可能看起来像这样：（如果语法不完全正确，请原谅我，已经有一段时间了）

```
Sub Main
    Dim myNumber As Integer = 3
    doubleIt(myNumber)
    Console.WriteLine(myNumber)
End Sub

Sub doubleIt(ByRef val As Integer)
    val *= 2
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:06:01.333

在 .NET 中，有两种对象类型。有引用类型（`Class`）和值类型（`Structure`）。在 .NET 中，不是为每个变量决定该变量是否为指针，而是始终将所有引用类型对象视为指针，而所有值类型对象都不是。因此，例如：

```
'Create one object of each type
Dim builder As New StringBuilder()  'Reference type
Dim size As Integer  'Value type

'Make a "copy" of each
Dim copyBuilder As StringBuilder = builder
Dim copySize As Integer = size

'Change the value of the original object
builder.Append("Test")
size = 33

'Check if the "copy" changed
Console.WriteLine("{0} = {1}", builder.ToString(), copyBuilder.ToString())
Console.WriteLine("{0} <> {1}", size, copySize) 
```

当您运行该代码时，它将输出以下内容：

```
Test = Test
33 <> 0 
```

因此，如您所见，`StringBuilder`对象的行为类似于指针，而`Integer`对象则不然。但是，正如 Tony 指出的那样，即使使用值类型，您也可以“通过引用”将值传递给方法。当一个方法指定它的一个参数是`ByRef`，而不是`ByVal`，这意味着该方法可能会在内部更改变量的值，并且更改将影响调用代码中的变量。

此外，您可能想对装箱和拆箱进行一些研究。

# c++ - 删除多图中的重复键

> ID：13707521
> 
> 赞同：0
> 
> 时间：2012-12-04T16:35:30.927
> 
> 标签：c++, stl, key, duplicates, multimap

我有一个多图：

```
std::multimap < string, string >::iterator iter_map;
multimap < string, set<string> > my.map;  

Typical output and data structure:

key        -    value

bird       -    air
bird       -    earth
fish       -    water
lion       -    earth
lion       -    water 
```

我想更改数据结构（不仅仅是打印到），以便新数据为：

```
bird      -    air, earth
fish      -    water
lion      -    earth, water 
```

换句话说，如何消除重复键？

我这样做了：

```
int size_mmap = namesMultiMap1.size();
pair<multimap<string,string>::iterator,multimap<string,string>::iterator> ret;

for (int i = 0; i < 1; i++){

   cout << " xxx "<< " =>";
   ret = namesMultiMap1.equal_range("xxx");

     for (nameItr1=ret.first; nameItr1!=ret.second; ++nameItr1)
     cout << " " << (*nameItr1).second; 
```

}

通过这种方式，我打印了与键 xxx 关联的值，但我一次打印了一个元素。我想打印所有键和值。我需要自动化这个，因为地图很大。如果我使用 namesMultiMap1 的迭代器进行迭代，则打印重复键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:56:02.713

好的，这可以按如下方式完成。请注意，结果的类型`map<string, set<string> >`不是`multimap < string, set<string> >`您想要的，因为您不希望其中有重复的键，所以`map`更有意义。

```
#include <map>
#include <set>
#include <string>
#include <iostream>
#include <iterator>

using namespace std;

typedef multimap<string,string> mm; 
typedef map<string, set<string> > ms; 

ms convert(const mm& m)
{   
    ms r;

    for (mm::const_iterator it = m.begin(); it != m.end(); ++it)
    {   
        set<string>& s(r[it->first]);
        s.insert(it->second);
    }   

    return r;
}   

int main()
{   
    mm m;
    m.insert(make_pair("john", "kowalski"));
    m.insert(make_pair("john", "smiths"));
    m.insert(make_pair("mary", "doe"));
    m.insert(make_pair("mary", "walker"));

    ms s(convert(m));

    for (ms::iterator it = s.begin(); it != s.end(); ++it)
    {   
        cout << it->first << ": ";
        set<string> &st(it->second);
        copy(st.begin(), st.end(), ostream_iterator<string>(cout, ", "));
        cout << endl;
    }   
    return 0;
} 
```

这将打印：

```
john: kowalski, smiths,
mary: doe, walker, 
```

# hadoop - “无法从 SCDynamicStore 加载领域映射信息”错误后跟 KrbException

> ID：13707522
> 
> 赞同：6
> 
> 时间：2012-12-04T16:35:30.997
> 
> 标签：hadoop, osx-lion

我正在尝试在本地构建我的应用程序并收到以下错误：

```
 **Unable to load realm mapping info from SCDynamicStore**
2012-12-03 18:13:23.910 java[1172:707] *** Terminating app due to uncaught exception 'JavaNativeException', reason: 'KrbException: Could not load configuration from SCDynamicStore'
*** First throw call stack:
(
    0   CoreFoundation                      0x00007fff919c30a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff894ea3f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff91a57229 -[NSException raise] + 9
    3   JavaNativeFoundation                0x0000000104260c3f JNFCallStaticVoidMethod + 213
    4   libjava.jnilib                      0x00000001042b0169 Java_sun_security_krb5_SCDynamicStoreConfig_installNotificationCallback + 450
    5   JavaNativeFoundation                0x0000000104263182 JNFPerformEnvBlock + 86
    6   SystemConfiguration                 0x00007fff9327f12d rlsPerform + 116
    7   CoreFoundation                      0x00007fff91942101 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17
    8   CoreFoundation                      0x00007fff91941a25 __CFRunLoopDoSources0 + 245
    9   CoreFoundation                      0x00007fff91964dc5 __CFRunLoopRun + 789
    10  CoreFoundation                      0x00007fff919646b2 CFRunLoopRunSpecific + 290
    11  java                                0x000000010394c843 java + 18499
    12  java                                0x000000010394c29a java + 17050
    13  java                                0x0000000103949a98 java + 6808
    14  ???                                 0x0000000000000008 0x0 + 8
)
libc++abi.dylib: terminate called throwing an exception
/bin/sh: line 1:  1172 Abort trap: 6           /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java -XX:+HeapDumpOnOutOfMemoryError -Xmx512M -XX:MaxPermSize=128M -jar /opt/pose/core/target/surefire/surefirebooter7934174390972693745.jar /opt/pose/core/target/surefire/surefire5395873653031509674tmp /opt/pose/core/target/surefire/surefire_01183106063530311982tmp

Results :

Tests run: 305, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] The forked VM terminated without saying properly goodbye. VM crash or System.exit called ?
[INFO] ------------------------------------------------------------------------
[INFO] Trace
java.lang.RuntimeException: The forked VM terminated without saying properly goodbye. VM crash or System.exit called ?
    at org.apache.maven.plugin.surefire.booterclient.output.ForkClient.close(ForkClient.java:245)
    at org.apache.maven.plugin.surefire.booterclient.ForkStarter.fork(ForkStarter.java:282)
    at org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:116)
    at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeProvider(AbstractSurefireMojo.java:695)
    at......... 
```

这在我将系统升级到 OS X 10.8.2 后开始发生。我还将 hadoop-env.sh 更改为具有以下值：

> 导出 HADOOP_OPTS="-Djava.security.krb5.realm=OX.AC.UK -Djava.security.krb5.kdc=kdc0.ox.ac.uk:kdc1.ox.ac.uk"

并且还更新了 hbase-env.sh 以具有：

> export HBASE_OPTS="-ea -XX:+UseConcMarkSweepGC -XX:+CMSIncrementalMode -Djava.security.krb5.realm= -Djava.security.krb5.kdc="

我还安装了最新的 Xcode，但都没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:14:51.110

export MAVEN_OPTS="-Djava.security.krb5.realm=OX.AC.UK -Djava.security.krb5.kdc=kdc0.ox.ac.uk:kdc1.ox.ac.uk"

# java - Web 应用程序的行为似乎取决于我的数据源？

> ID：13707523
> 
> 赞同：1
> 
> 时间：2012-12-04T16:35:33.310
> 
> 标签：java, database, jsf

我在 GlassFish v3.1.2 上运行 JSF-Web 应用程序

如果我在本地测试它一切正常。现在**我只更改数据源**，我得到了一些奇怪的行为：

例如，我有一个命令按钮，它调用一些操作来从数据库接收数据，我想在同一页面上的数据表中显示这些数据。 **使用我的本地数据库可以正常工作，但是如果我使用另一个数据库**（在本地 Intranet 中的不同服务器上运行），**则会触发该操作**（我已经使用一些 System.out 进行了检查）**但是 ajax-update我的数据表不起作用。**如果我在单击我的 ajax 按钮后重新加载页面，则会显示正确的数据，如果我使用非 ajax 按钮也是如此。

我什至不知道我应该寻找什么..有什么想法吗？

* * *

我在用着

*   Primfaces 3.4.2
*   JSF 2 (莫哈拉)
*   本地数据库是 Oracle 10g XE
*   服务器数据库是Oracle 11g
*   jdbc-driver 是来自 oracle-website 的最新 ojdbc6.jar

如果您需要更多信息，请告诉我。

在此先感谢，范特

* * *

> ```
> Http-response-header:
> HTTP/1.1 200 OK
> X-Powered-By: Servlet/3.0 JSP/2.2 (GlassFish Server Open Source Edition 3.1.2 Java/Oracle Corporation/1.7), JSF/2.0
> Server: GlassFish Server Open Source Edition 3.1.2
> Cache-Control: no-cache
> Content-Type: text/xml;charset=UTF-8
> Content-Length: 5610
> Date: Sat, 08 Dec 2012 02:05:08 GMT 
> ```

* * *

我还尝试编写一个 PhaseListener 来给我一些反馈，但这也不是很有帮助。每个阶段都成功完成，并且在执行我的操作后，会向客户端发送响应（并且客户端会收到响应，正如我在 Firefox-Addon 中看到的那样）甚至是我想要显示的 List 的 Getter 方法我的 dataTable 在发送 htpp-response 之前被调用，所以我认为响应本身一切都很好。但是我要重新渲染的数据表仍然显示旧数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:11:59.017

> *但我的数据表的 ajax 更新不起作用*

这很可能是由 XML 语法错误引起的。ajax 更新涉及从服务器检索 XML 响应、解析它并在 HTML DOM 树中查找要更新的元素并将其内容替换为包含在 XML 响应中的新 HTML 的步骤。使用 webbrowser 的内置 (Chrome/IE9) 或第 3 方 (Firebug) webdeveloper 工具集，您可以跟踪 HTTP 流量并全面检查 HTTP 响应，还可以使用断点调试 JavaScript 代码。这应该为您提供有关问题原因的线索。

假设在 XML 响应中生成的 HTML 代码完全相同（这是一个公平的假设，前提是您更改数据源时 webapp 的代码没有更改），那么这只能是由数据的差异引起的，即从数据库中获得。显然，数据源的变化也涉及物理数据库服务器的变化，从而提供了一些不同的数据。

根据对该问题的评论，根本原因是直接来自另一个 DB的[`NUL`字符最终出现在 XML 响应中，导致 webbrowser 的 XML 解析器阻塞，因为它是 XML 中的非法字符。](http://en.wikipedia.org/wiki/Null_character)[XML 规范](http://www.w3.org/TR/2000/REC-xml-20001006#NT-Char)仅指定以下字符为有效：

> ### 2.2 字符
> 
> ...
> 
> *字符范围*
> 
> ```
> Char   ::=   #x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD]  /* any Unicode character, excluding the surrogate 
>              | [#x10000-#x10FFFF]                               blocks, FFFE, and FFFF. */ 
> ```

（角色）不在其中`#x0`。`NUL`

您应该已经注意到 webbrowser 的 webdeveloper 工具集的控制台中有一个 XML 解析错误。

# django - 扩展多个父母

> ID：13707526
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:35:41.773
> 
> 标签：django, django-templates

我想做这个：

```
{% extends 'main_page.html','search.html' %}
{% block search %}[search bar code goes here]{% endblock %} 
```

但是，就我所见，我不能，至少，不是那样。那我该怎么办？

ETA：所以我想在我的主页和我的专用“搜索”页面中放置一个搜索栏（这也将具有更多涉及的搜索功能，并希望数据可视化的东西，上帝愿意。）DRY 建议编写两个不同的副本相同的代码，一个扩展 main_page.html 而另一个扩展 search.html 不好。公平地说，我是 Django 的新手，我不太了解 {% include %} 和 {% extends %} 之间的区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:39:02.393

```
{% block search %}
    {% include "search.html" %}
{% endblock search %} 
```

这应该可以（顺便说一句：提供的信息不多，我即兴尝试找出您想要做的事情。如果这不是您需要的，请添加更多信息，我可能会更改我的答案）

来自 django 文档的包含标签的[链接](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include)

# asp.net - 在页面请求之间存储 .net 用户角色的位置

> ID：13707541
> 
> 赞同：1
> 
> 时间：2012-12-04T16:36:16.433
> 
> 标签：asp.net, .net-3.5, forms-authentication, asp.net-caching

我有一个网站，它实现了自己的基于表单的登录，并创建了一个像这样的身份验证 cookie：

```
 FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, userID, DateTime.UtcNow, expiration, isPersistent, userFunctions);
    HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, FormsAuthentication.Encrypt(ticket));
    cookie.Expires = expiration;
    HttpContext.Current.Response.Cookies.Add(cookie); 
```

变量“userFunctions”包含用户所属角色的逗号分隔列表。

在我的 Global.asax 文件中，我通过以下方式检索这些用户函数：

```
protected void Application_AuthenticateRequest(object sender, EventArgs e)
{
    if (HttpContext.Current.User != null)
    {
        if (HttpContext.Current.User.Identity.IsAuthenticated)
        {
            if (HttpContext.Current.User.Identity is FormsIdentity)
            {
                FormsIdentity id = (FormsIdentity)HttpContext.Current.User.Identity;

                string[] roles = id.Ticket.UserData.Split(',');
                HttpContext.Current.User = new System.Security.Principal.GenericPrincipal(id, roles);
            }
        }
    }
} 
```

这一切都很好。或者直到我不得不为一群全新的用户更改它。新用户的问题是“userFunctions”变量可能会变得很长，并且太长而无法存储在 cookie 中（其大小限制为 4k 之类的）。

我会更改我的代码以将“userFunctions”存储在会话中，但 Application_AuthenticateRequest 无法使用会话。我可以将数据存储在应用程序缓存中（可能在键/值对中），但我犹豫是否这样做，因为应用程序缓存似乎不是放置这些数据的“正确”位置。

我可能最终会将它放入应用程序缓存中，但在此之前我想我会问一下是否有人有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:37:20.300

鉴于我不能使用 Session 来存储用户角色（因为在授权发生之前我无法检索它们），并且我不希望在每次页面请求时都访问数据库的费用，我最终将角色存储在应用程序缓存：

```
protected void Application_AuthenticateRequest(object sender, EventArgs e)
{
    if (HttpContext.Current.User != null)
    {
        if (HttpContext.Current.User.Identity.IsAuthenticated)
        {
            if (HttpContext.Current.User.Identity is FormsIdentity)
            {
                FormsIdentity id = (FormsIdentity)HttpContext.Current.User.Identity;

                string[] roles;
                string cachedRoles = (string)HttpContext.Current.Cache.Get("UserFunctions" + id.Name.ToLower());
                if (cachedRoles == null)
                {
                    // Reload UserFunctions and add back in to Cache.

                    cachedRoles = [...code to get UserFunctions from database...];

                    HttpContext.Current.Cache.Insert("UserFunctions" + id.Name.ToLower(), cachedRoles, null, System.Web.Caching.Cache.NoAbsoluteExpiration, new TimeSpan(0, 20, 0), System.Web.Caching.CacheItemPriority.NotRemovable, null);

                }

                roles = cachedRoles.Split(',');

                HttpContext.Current.User = new System.Security.Principal.GenericPrincipal(id, roles);
            }
        }
    }
} 
```

它似乎工作正常（尽管到目前为止测试有限）。

# c - linux将时间（不同时区）转换为UTC

> ID：13707545
> 
> 赞同：3
> 
> 时间：2012-12-04T16:36:24.147
> 
> 标签：c, linux, gcc, timezone

有没有办法在linux中以编程方式获取给定时间字符串的UTC时间，例如

```
Tue Dec  14 10:30:23 PST 2012
Tue Jan  4 11:30:23 EST 2013 
```

到 UTC 时间，不管（并且不改变）本地时区设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T23:27:54.450

**更新**：与最近的 tz 数据库的结果不同：[EST 在给定日期产生相同的 utc 偏移量](http://ideone.com/ZIYkvl)（与[以前的结果](http://ideone.com/YPbXEG)比较）。虽然它不影响不同时区可能使用相同缩写的一般结论，因此相同的缩写可能对应不同的 UTC 偏移量。请参阅[在 Python 中使用时区缩写名称解析日期/时间字符串？](https://stackoverflow.com/q/1703546/4279)

* * *

诸如 EST 之类的缩写时区名称可能不明确。

### 例子

```
#!/bin/sh
for tz in Australia/Brisbane Australia/Sydney America/New_York
do date -u -d"TZ=\":$tz\" Tue Jan  4 11:30:23 EST 2013"
done 
```

### [输出](http://ideone.com/YPbXEG)

```
Fri Jan  4 16:30:23 UTC 2013
Fri Jan  4 00:30:23 UTC 2013
Fri Jan  4 16:30:23 UTC 2013 
```

两件事情：

*   根据使用的时区，日期字符串可能会被解释为不同的时刻

*   `date`默默地忽略`Australia/Brisbane`应该是的时区，`UTC+10`即`date`解释`EST`为属于不同的时区。没有`EST`它会产生正确的时间：

    ```
     $ date -u -d 'TZ=":Australia/Brisbane" Tue Jan  4 11:30:23 2013'
      Fri Jan  4 01:30:23 UTC 2013 
    ```

To find all possible UTC times for given time and timezone abbreviation e.g., for `'Tue Jan 4 11:30:23 EST 2013'`:

```
#!/usr/bin/env python
from collections import defaultdict
from datetime import datetime
import pytz # $ sudo apt-get install python-tz
            # or if you can't install system-wide
            # $ pip install --user pytz

## Tue Dec  14 10:30:23 PST 2012
#naive_dt, tzname = datetime(2012, 12, 14, 10, 30, 23), 'PST'
## -> Fri Dec 14 18:30:23 2012 UTC

# Tue Jan  4 11:30:23 EST 2013
naive_dt, tzname = datetime(2013, 1, 4, 11, 30, 23), 'EST'
# Fri Jan  4 01:30:23 2013 UTC
# Fri Jan  4 00:30:23 2013 UTC
# Fri Jan  4 16:30:23 2013 UTC
# ambiguous

utc_times = defaultdict(list)
for zone in pytz.all_timezones:
    dt = pytz.timezone(zone).localize(naive_dt, is_dst=None)
    if dt.tzname() == tzname: # same timezone abbreviation
        utc_times[dt.astimezone(pytz.utc)].append(zone)

for utc_dt, timezones in utc_times.items():
    print("%s:\n\t%s" % (utc_dt.strftime('%c %Z'), '\n\t'.join(timezones))) 
```

### Output

All `Tue Jan 4 11:30:23 EST 2013` interpretations as UTC with corresponding timezone names:

```
Fri Jan  4 01:30:23 2013 UTC:
    Australia/Brisbane
    Australia/Lindeman
    Australia/Queensland
Fri Jan  4 00:30:23 2013 UTC:
    Australia/ACT
    Australia/Canberra
    Australia/Currie
    Australia/Hobart
    Australia/Melbourne
    Australia/NSW
    Australia/Sydney
    Australia/Tasmania
    Australia/Victoria
Fri Jan  4 16:30:23 2013 UTC:
    America/Atikokan
    America/Cayman
    America/Coral_Harbour
    America/Detroit
    ...
    America/New_York
    ...
    America/Toronto
    Canada/Eastern
    EST
    EST5EDT
    Jamaica
    US/East-Indiana
    US/Eastern
    US/Michigan 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T17:13:39.400

`date -u -d "Tue Dec 14 10:30:23 PST 2012"`报告`Fri Dec 14 18:30:23 UTC 2012`。差异是因为 2012 年 12 月 14 日实际上是星期五，而不是星期二。它可能在有效输入下效果更好......

# cakephp - CakePHP - 如何在已连接的表上加入表？

> ID：13707548
> 
> 赞同：0
> 
> 时间：2012-12-04T16:36:38.137
> 
> 标签：cakephp, cakephp-2.0

我在 FilesController 中，我试图根据其订单属于当前用户的条件获取文件。

**文件控制器**

```
// Check the file exists and that it belongs to the user

$this->File->find('first', array(
    'conditions' => array(
        'File.id' => $id,
        'Order.Customer.id' => $this->Auth->user('id')
    ),
    'recursive' => 2
)); 
```

**蛋糕 SQL 错误**

```
Unknown column 'Order.Customer.id' in 'where clause' 
```

我试图让 SQL left join to`orders`然后`files`left join `customers`to `orders`，但我不知道如何加入客户表，尽管我确信我以前做过。我已经尝试了所有我能想到的条件，并使用`contains`.

这是我的模型关系：

**客户模型**

```
class Customer extends AppModel {

    public $hasMany = array('Order');

} 
```

**订单模式**

```
class Order extends AppModel {

    public $belongsTo = array('Customer');

    public $hasMany = array('File');

} 
```

**档案模型**

```
class File extends AppModel {

    public $belongsTo = array('Order');

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:46:31.520

尝试使用“joins”参数加入表。有时“包含”不起作用，您需要依靠这一点。

```
$this->File->find('first', array(
    'conditions' => array(
        'File.id' => $id,
        'Order.Customer_id' => $this->Auth->user('id')
    ),
    'joins' => array(
        array(
            'table' => 'orders',
            'alias' => 'Order',
            'type' => 'LEFT',
            'conditions' => array('File.orders_id = Order.id')
        ),
        array(
            'table' => 'customers',
            'alias' => 'Customer',
            'type' => 'LEFT',
            'conditions' => array('Customer.orders_id = Order.id')
        )
    )
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:46:41.800

您可能想要使用 Containable (http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)，因为它是最简单的解决方案。您不能使用 Order.Customer.id，因为 Cake 不会嵌套这样的条件。手动连接也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:49:54.077

```
$this->loadModel('Customer');
$customer = $this->Customer->findById($this->Auth->user('id'), array(
        'conditions' => array(
            'File.id' => $id
        ),
        'recursive' => 2
    )); 
```

订单将可通过以下方式访问：

```
pr($customer['Order']); 
```

文件将可通过以下方式访问：

```
pr($customer['File']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T11:20:39.020

我意识到在这种情况下实际上不需要加入customers 表，因为orders 表已经有customer_id。

```
$this->File->find('first', array(
    'conditions' => array(
        'File.id' => $id,
        'Order.customer_id' => $this->Auth->user('id')
    )
)); 
```

# php - WordPress 全局变量

> ID：13707549
> 
> 赞同：0
> 
> 时间：2012-12-04T16:36:40.947
> 
> 标签：php, wordpress, global

不久前，我记得有一个我认为与 wordpress 的全局变量有关的讨厌的错误（当我重构它时它运行良好）。该变量没有出现在[http://codex.wordpress.org/Global_Variables](http://codex.wordpress.org/Global_Variables)页面上，但我主要是继续前进，因为这没什么大不了的。

我现在正在做另一个项目，有一个博客，并且正在考虑使用 wordpress。我不喜欢这个与全局变量的有趣业务（来吧 - 他们保留`page`？）但至少想要一个适当的参考。上面的页面说不**建议访问除下面列出的之外的其他全局变量。**所以我假设还有其他全局变量？我在哪里可以找到这些变量，以确保我不会与它们发生冲突？

当我这样做时，他们为什么不将它们存储在一个单一的全局 wordpress 变量中>.<

# php - 不创建子目录的子域

> ID：13707551
> 
> 赞同：0
> 
> 时间：2012-12-04T16:36:53.017
> 
> 标签：php, url, subdomain

我在主域中有一些城市选项，例如*www.xyzsite.com*。当用户点击`abc`城市时，我想将其显示为*www.abc.xyzsite.com*。我不想为每个城市创建子目录，因为我没有任何城市相关文件，但我想显示与城市相关的子域 URL。

# vb.net - 当区域性设置为“丹麦语”时，表中的 GUID 查找失败

> ID：13707555
> 
> 赞同：1
> 
> 时间：2012-12-04T16:36:58.497
> 
> 标签：vb.net, cultureinfo

```
Dim ii = _DsAttribute.Tables(0).Rows.Find(Convert.ToString(DtgFields.Rows(e.RowIndex).Cells("AttributeID").Value, CultureInfo.CreateSpecificCulture("en-US")))  '.ToString.ToString(CultureInfo.InvariantCulture))
Dim jj = _DsAttribute.Tables(0).Rows.Find(Convert.ToString(DtgFields.Rows(e.RowIndex).Cells("AttributeID").Value, CultureInfo.CreateSpecificCulture("en-US"))).Item("Checked") 
```

我尝试了上述的许多变体，试图防止数据库的数据被我机器的丹麦文化（在 Windows 中的区域/语言设置中设置）“损坏”。我尝试了不变的文化，fr-FR 和 en-US。

当我的机器是丹麦机器时，**ii**等于 null 并且**jj**返回异常（“对象引用未设置为对象的实例”），但有趣的是，**_DsAttribute**具有与我的机器是英语（美国英语）时相同的数据。此外，当我搜索**DtgFields.Rows(e.RowIndex).Cells("AttributeID").Value**的值时，我可以在**_DsAttribute**的数据中找到它。至少在肉眼看来，ID 的数据是相同的。

如何使用 CultureInfo 来避免此类问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:58:29.593

这在*技术上*是可行的，丹麦语使用与美国英语不同的排序顺序。在丹麦，您会在电话簿的开头找到 Åårdvårk 先生，而不是在美国的末尾。

如果 Find() 方法使用二分搜索或树来定位数据，这会使字符串比较成为一个危险的命题。DataSet 肯定是这样，它的主键索引是一棵红黑树。问题在于，当索引以丹麦语作为排序规则编写但以英语作为排序规则读取时，算法沿着树的错误路径向下移动。或者反过来。结果是它在树中找不到条目，​​即使它存在。

禁忌症是 Guid 类型的 dbase 列不应该是字符串，尽管它并不少见。并且 Guid 值不应包含可能导致搜索错误的字符。也许该列不干净并且包含其他非指导值。您可以通过更改列类型或始终使用相同的排序规则（即语言）来修复它。尝试 CultureInfo.CurrentCulture 以获得可能的快速修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:35:42.133

```
Dim ii = _DsAttribute.Tables(0).Rows.Find(New Guid(DtgFields.Rows(e.RowIndex).Cells("AttributeID").Value.ToString))
Dim jj = _DsAttribute.Tables(0).Rows.Find(New Guid(DtgFields.Rows(e.RowIndex).Cells("AttributeID").Value.ToString)).Item("Checked") 
```

以上是我的解决方案。汉斯的回答有很多非常有用的技术信息（因此我赞成）并引导我回答。

# android - html onclick在Android中触发两次

> ID：13707561
> 
> 赞同：5
> 
> 时间：2012-12-04T16:37:22.897
> 
> 标签：android, html, onclick

代码：

```
function hello(){alert("Hi");}; 

<center> 
<table border="0" height="100%">
<tbody>
            <tr>
                <td align="center" width="100%">
                <img src="cover.png"
                    width="300" height="300" id="image"></img></td>
            </tr>
            <tr>
                <td height="100%">&nbsp;</td>
            </tr>
            <tr>
                <td align="center">
             <form onsubmit="go();return false">  
                        <input class="answer" id="answer" name="answer"
                             onclick="hello();"/>
                  </form> 
                </td>
            </tr>
            <tr>

            </tr>
        </tbody>
</table>
</center> 
```

当在 HTML 中单击答案文本框时，我一直在尝试捕捉。它在 Firefox 和 Chrome 中完美运行（我只收到一个 Hi 警报），但是当我尝试在 android 的 web 视图中运行代码时，onclick 方法会触发两次（我收到两个 Hi 警报）。但是，当我稍后调用相同的函数时，它可以正常工作，只触发一个 Hi 警报。

```
<div style="bottom: 0; right: 0; position:absolute;  margin-right:5%">
    <a><img alt="" src="start.png" id="submit" onclick="go();hello();"></a>
    </div> 
```

我猜这与我从表单内部调用函数并且它以某种方式触发事件两次但我不知道如何修复它的事实有关。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:46:09.707

您可以尝试使用[one()](http://docs.jquery.com/Events/one)如下。

```
$('#answer').one('click', function() {
    alert("Hi");
});

<form onsubmit="go();return false">  
   <input class="answer" id="answer" name="answer"/>
</form> 
```

# objective-c - 更改应用程序的日历隐私时 Xcode 4.5.2 SIGKILL

> ID：13707571
> 
> 赞同：2
> 
> 时间：2012-12-04T16:37:51.183
> 
> 标签：objective-c, xcode, cocoa-touch, ios6

我正在使用 EventKit 框架来获取用户的事件，并且我还订阅以`EKEventStoreChangedNotification`在用户的​​日历更改时获得通知。所以我想看看如果用户在隐私>日历中关闭日历访问会发生什么。如果应用仍会收到`EKEventStoreChangedNotification`通知但应用已`SIGKILL`编辑。

有谁知道应用程序是否仍会收到`EKEventStoreChangedNotification`有关曾经授予日历访问权限但随后拒绝访问日历的通知？

# iphone - 重新启动后不重新打开应用程序的位置所需的后台模式

> ID：13707573
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:37:53.937
> 
> 标签：iphone, core-location, background-process, autostart

我们正在尝试开发一个类似于应用商店中现有应用的应用。

此应用程序正在后台将位置数据发送到 Web 服务，并且该应用程序将在设备重新启动后继续运行。我还要注意，在安装和注册应用程序后，位置服务指示符会一直保持在状态栏上。我假设这是允许应用程序在设备重新启动后继续运行所必需的。

我们曾尝试使用“UIBackgroundModes/定位所需的背景模式”，但未能成功让应用程序在设备重启后继续运行。

有人可以为我们指出正确的方向，以了解如何让应用程序在设备重启后继续发送位置数据。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:58:06.887

设备重启后不会运行任何应用程序。在 Apple 的 SDK 下无法构建文件守护程序。你必须越狱手机并运行未经授权的东西才能这样做，然后你就不会被苹果的应用商店接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T18:27:37.617

是的，如果您正在监控重大的位置变化或监控一个区域并且该区域已进入/退出，您的应用程序**将**重新启动。

在 iOS 7 中，Apple 进行了一项重要更改，如果用户强制退出您的应用程序，将禁用这些机制。在用户再次启动您的应用程序之前，它们将保持禁用状态。

# excel - 尝试将 excel 文件导入 MATLAB 时出错

> ID：13707578
> 
> 赞同：1
> 
> 时间：2012-12-04T16:37:57.860
> 
> 标签：excel, matlab

excel 文件有三张纸，包含文本和数据。据我了解，可以选择写出要从中导入的工作表的编号，或者用撇号括起来的工作表名称。

我使用的一行代码是这样的：

```
[num,txt,both] = xlsread('Lugnet_plan1c.xls',2,'a1:ad11') 
```

我得到的错误信息是：

> ？？？使用 ==> horzcat 时出错 将逻辑转换为字符时发生以下错误： 使用 ==> 字符时出错 无法从逻辑转换为字符。
> 
> ==> Lugnet_test 中的错误 6 [num,txt,both] = xlsread('Lugnet_plan1c.xls',2,'a1:ad11')

如果有帮助，我可以上传 xls 文件，或者在此处复制粘贴它的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:12:48.797

盲目猜测，但 Matlab 在我的电脑上抱怨说，在你的情况 2 中，“sheet”参数需要是一个字符串。所以

```
xlsread('Lugnet_plan1c.xls','2','a1:ad11')
```

可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:16:05.530

谢谢，伙计们，你们的时间。是的，我的印象是可以写表的编号或名称，如果使用名称，则它是一个字符串，并且需要撇号。但是我的问题已经用你没有的信息解决了。在我的 exel 文件中有一个带有“FALSE”字样的列。删除该列后，我的导入命令就可以正常工作了！如果有一种方法可以在该列留在其中的情况下导入文件，我不知道，但感觉不值得研究。:) 再次感谢您的宝贵时间！

# json - 将应用程序从 Unity3d 转换为 Flash

> ID：13707579
> 
> 赞同：1
> 
> 时间：2012-12-04T16:38:00.277
> 
> 标签：json, flash, unity3d, code-conversion

我正在尝试将我的 Unity3d 游戏转换为 Flash，但遇到评论问题。因为socket问题，我正在尝试使用Json和Post，但我不知道从哪里开始。我看到了这个 [Java 服务器-客户端套接字通信](https://stackoverflow.com/questions/11665331/java-server-client-socket-communication)

但它包含套接字。

这是针对用户客户端的，但我还需要重做服务器端。我相信我需要一个 Web 服务器来获取 Json 字符串并返回适当的响应。

我这样做对吗，还是我忽略了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:48:37.760

如果您对使用 API 感兴趣，这可能会大大减少工作量。Smartfox 是一个很棒的客户端 API / 多人服务器工具，它可以增加输出时间，并允许您实施效率代码以提高服务器稳定性。

它适用于 Unity3D 和 flash。 [http://www.smartfoxserver.com/](http://www.smartfoxserver.com/)

解决您的主要问题，我相信您需要一个服务器来有效地使用 Json 并能够与客户端通信，但是这就是 smartfoxserver 可以派上用场的地方。我在 Flash 多人游戏编程方面没有太多经验，但是 smartfox 是一个很棒的工具，我用它在 unity3d 中制作多人程序。

希望这可以帮助！米奇

# php - 了解文件所有者

> ID：13707581
> 
> 赞同：2
> 
> 时间：2012-12-04T16:38:02.290
> 
> 标签：php, filesystems

我想了解谁是文件所有者。

如果我写这个

```
echo fileowner("index.php");` 
```

我获得了 id，但是当我写这个时

```
var_dump( posix_getpwuid(fileowner("index.php"))  ); 
```

结果是`bool(false)`

为什么`posix_getpwuid`不返回信息？php版本是5.2.42

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:05:30.177

SELinux 很可能会阻止`posix_getpwuid()`解析 UID。

# php - 使用 PHP 的 preg_match 来查看一个值是否匹配一个值列表

> ID：13707583
> 
> 赞同：2
> 
> 时间：2012-12-04T16:38:04.593
> 
> 标签：php

我想查看变量是否包含与硬编码列表中的几个值之一匹配的值。我正在使用以下内容，但最近发现它在某处存在缺陷：

```
if (preg_match("/^(init)|(published)$/",$status)) {
    echo 'found';
} else {
    echo 'nope';
} 
```

我发现如果变量 $status 包含单词“未发布”，即使列表中没有“未发布”，仍然存在匹配项，可能是因为“未发布”一词包含“已发布”，但我认为 ^ 和正则表达式中的 $ 应该强制匹配整个单词。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:42:42.483

修改你的模式：

```
$pattern = "/^(init|published)$/";
$contain = "unpublished";

echo preg_match($pattern, $contain) ? 'found' : 'nope' ; 
```

该模式表示我们的字符串必须是`/^init$/`or `/^published$/`，这意味着从头到尾的那些特定字符串。因此子字符串在这些约束下无法匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:43:24.553

在这种情况下，正则表达式不是正确使用的工具。

只需将您希望检查候选人的单词放入数组中：

```
$list = array('init', 'published'); 
```

然后检查：

```
if (in_array($status, $list)) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:41:39.553

`^`匹配字符串的开头。 `$`匹配字符串的结尾。

但是，正则表达式并不是需要在每一个机会中使用的灵丹妙药。

在这种情况下，您想要的代码是

```
if ( $status == 'init' || $status == 'published' ) 
```

如果您要检查值列表，请根据这些值创建一个数组，然后检查该键是否存在于数组中。

# c++ - 字符串遍历在 VS2005 C++ 中抛出异常

> ID：13707584
> 
> 赞同：0
> 
> 时间：2012-12-04T16:38:05.983
> 
> 标签：c++, string, stl, visual-studio-2005

我在 Visual Studio 2005（大型遗留项目）中使用 C++。

有以下代码片段：

```
bool FOO::bar(const string& input_text)
{

  string::const_iterator
        ch = input_text.begin(),
        last_ch = input_text.end();

  for( ; ch!=last_ch; ++ch )
  {  
  /////////////////////////////////////////////////////
        const char a = *ch;
  /////////////////////////////////////////////////////
  }
  return true;
} 
```

当我在调试模式下运行此代码时，它在线上崩溃`const char a = *ch`并说：

foob​​ar.exe 中 0x0000000140d08b20 处的未处理异常：0xC0000005：访问冲突读取位置 0x0000000000000000。

当我在发布模式下运行此代码时，它运行得很好。

这段代码调用如下：

```
CString full_filter;
full_filter.Format( "*%s*", filter_value );
foo.bar((LPCTSTR)full_filter)); 
```

我是 VS2005 C++ 新手，所以我现在正在查找这些是什么意思，但是由于评论部分的问题而将其放入。

我发现了一些看似相关的 C 问题和答案。基于这些，我尝试为 input_text 定义各种值，例如将其从参数中删除并将其定义为

`string input_text("FOO");` 或 `string input_text = "FOO";` 或 `char[] tmp = "FOO"; string input_text = tmp;`

都失败了。

我还采用了上面的代码片段并将其放入它自己品牌的新 VS2005 项目中，它运行得很好。

所以，在遗留的 VS2005 项目中有一些独特的设置会导致问题。任何线索这些设置可能是什么，或者如何将它们抽出来？我是 VS2005 级别的新手。

# ajax - 为什么缓存ajax请求不起作用？

> ID：13707586
> 
> 赞同：1
> 
> 时间：2012-12-04T16:38:17.370
> 
> 标签：ajax, caching, prototypejs

我有一个大型 json 数据对象（超过 300K 未压缩，40K gzipped），用于我内部系统的每个页面。我想每 15 分钟取一次。在这段时间内，用户可能会访问我系统的数十个页面。

Firebug 中的 HTTP 响应标头如下所示：

```
Cache-Control   max-age=899, public
Connection  Keep-Alive
Content-Encoding    gzip
Content-Length  44017
Content-Type    text/html; charset=iso-8859-2
Date    Tue, 04 Dec 2012 16:21:45 GMT
Expires Tue, 04 Dec 12 17:36:45 +0100
Keep-Alive  timeout=15, max=99
Last-Modified   Tue, 04 Dec 12 17:21:45 +0100
Pragma  no-cache
Server  Apache
Set-Cookie  user_auth=xxx; expires=Wed, 12-Dec-2012 16:21:45 GMT; path=/; domain=example.com 
Vary    Accept-Encoding
X-Genaration-Time   0.13282179832458 sec.
X-Genarator vCRM 3.1 (c) Veracomp S.A.
X-Powered-By    PHP/5.3.3-7+squeeze14 
```

缓存标头在未来设置为 15 分钟，但 Chrome 和 Firefox 都不会缓存它。Firebug 对缓存这样说：

```
Data Size   44017
Device  disk
Expires Thu Jan 01 1970 01:00:00 GMT+0100
Fetch Count 5
Last Fetched    Tue Dec 04 2012 17:21:45 GMT+0100
Last Modified   Tue Dec 04 2012 17:21:45 GMT+0100 
```

**它接缝 Expires 标头被忽略，但为什么呢？**

这无关紧要，但我最好写，内容类型是 text/html，所以服务器可以 gzip 它，但实际上内容是 JSON。

我正在使用 Prototype.js 来请求这个。我设置了请求标头：

```
Cache-control: max-age=900 
```

Prototype.js 不会向 url 添加任何缓存破坏器参数。我正在使用带有 Zend_Framework 的 PHP 来设置响应响应。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:26:40.557

问题解决了。

正如@Victor 指出的那样，我设置了“Pragma：no-cache”标头。标头是由 PHP 以某种方式设置的。我与我们的网络服务器管理员一起工作，我们设法使用 Apache 取消设置标头。
仍然不够。我们的框架会在每次页面刷新时设置 cookie，但我无法关闭它。浏览器不想缓存设置 cookie 的请求。我们也必须取消设置 Set-Cookie 标头。最后，这两个未设置允许我们启用缓存：

```
<LocationMatch "(?i)/url/we/want/to/be/cached/.+">
       Header unset Pragma
       Header unset Set-Cookie
</LocationMatch> 
```

# android - 数码相机和安卓平板之间的通信

> ID：13707594
> 
> 赞同：0
> 
> 时间：2012-12-04T16:38:50.117
> 
> 标签：android, camera, connection, usb, tablet

我想知道是否有与安卓操作系统兼容的已知相机。（例如nexus 7）。

我试图从 android 平板电脑上控制一个高分辨率数码相机，以便它可以控制何时拍照，然后检索图片。

这将需要具有公共 API 的相机。

我有 android 编程经验，但在两个不同设备之间的通信方面没有太多经验。所以我想知道我应该研究什么才能实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:35:52.363

这是一个运行 Android 的相机：http: [//news.yahoo.com/samsung-takes-aim-japanese-rivals-android-camera-034717081--finance.html](http://news.yahoo.com/samsung-takes-aim-japanese-rivals-android-camera-034717081--finance.html) 因为它是 Android 我猜 API 是公开的.

以及具有更多信息的同一台相机：http: [//www.samsung.com/uk/consumer/mobile-devices/galaxy-camera/galaxy-camera/EK-GC100ZWABTU](http://www.samsung.com/uk/consumer/mobile-devices/galaxy-camera/galaxy-camera/EK-GC100ZWABTU)它确实运行看起来像标准android应用程序的东西。

如果您想从另一台 Android 设备控制它，我认为这将是一个非常有趣的项目。

另一种可能性是尼康外部控制 SDK，但我不知道它是什么语言。它被用来为 Mac 构建出色的 Sofortbild 应用程序，它控制大多数尼康数码单反相机。[https://sdk.nikonimaging.com/apply/](https://sdk.nikonimaging.com/apply/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T12:54:42.840

有一些 Android 应用程序可以控制一组具有附加功能的相机。我正在使用的那个让我能够拍摄非常具体的延时镜头，这太复杂甚至无法通过相机自己的控制。您可以在 Play 商店中找到许多其他控制应用程序。

不幸的是，这款仅适用于佳能 EOS 相机：[DSLR 控制器](http://dslrcontroller.com)

# linux - 使用 shell 脚本将逗号分隔的单元格分隔到新行

> ID：13707595
> 
> 赞同：1
> 
> 时间：2012-12-04T16:38:53.740
> 
> 标签：linux, bash, shell, bioinformatics

我有一个带有逗号分隔列的表，我想将指定列中的逗号分隔值分隔到新行。例如，给定的表是

```
Name    Start   Name2

A   1,2 X,a

B   5   Y,b

C   6,7,8   Z,c 
```

我需要分隔第 2 列中的逗号分隔值以获得下表

```
Name    Start   Name2

A   1   X,a

A   2   X,a

B   5   Y,b

C   6   Z,c

C   7   Z,c

C   8   Z,c 
```

我想知道是否有任何带有 shell 脚本的解决方案，以便我可以创建一个工作流管道。

注意：原始表可能包含超过 3 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:33:15.287

在 Runner 修改原始问题后，另一种方法可能如下所示：

```
#!/bin/sh

# Usage $0 <file> <column>
#

FILE="${1}"

COL="${2}"

# tokens separated by linebreaks
IFS="
"

for LINE in `cat ${FILE}`; do
    # get number of columns
    COLS="`echo ${LINE} | awk '{print NF}'`"

    # get actual field by COL, this contains the keys to be splitted into individual lines
    # replace comma with newline to "reuse" newline field separator in IFS
    KEYS="`echo ${LINE} | cut -d' ' -f${COL}-${COL} | tr ',' '\n'`"

    COLB=$(( ${COL} - 1 ))
    COLA=$(( ${COL} + 1 ))

    # get text from columns before and after actual field
    if [ ${COLB} -gt 0 ]; then
            BEFORE="`echo ${LINE} | cut -d' ' -f1-${COLB}` "
    else
            BEFORE=""
    fi

    AFTER=" `echo ${LINE} | cut -d' ' -f${COLA}-`"

    # echo "-A: $COLA ($AFTER) | B: $COLB ($BEFORE)-"

    # iterate keys and re-build original line
    for KEY in ${KEYS}; do
            echo "${BEFORE}${KEY}${AFTER}"
    done
done 
```

有了这个 shell 文件，你可以做你想做的事。这会将第 2 列拆分为多行。

```
./script.sh input.txt 2 
```

如果您想使用管道通过标准输入传递输入（例如一次拆分多列），您可以将 6\. 行更改为：

```
if [ "${1}" == "-" ]; then
    FILE="/dev/stdin"
else 
    FILE="${1}"
fi 
```

并以这种方式运行：

```
./script.sh input.txt 1 | ./script.sh - 2 | ./script.sh - 3 
```

**请注意**，cut 对字段分隔符非常敏感。因此，如果该行以空格字符开头，则第 1 列将为“”（空）。如果字段由空格和制表符混合分隔，则此脚本也会有其他问题。在这种情况下（如上所述）过滤输入资源（以便字段仅由一个空格字符分隔）应该这样做。如果这是不可能的，或者每列中的数据也包含空格字符，则脚本可能会变得更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:43:22.917

假设您的输入和输出的格式没有改变：

```
awk 'BEGIN{FS="[ ,]"} {print $1, $2, $NF; print $1, $3, $NF}' input_file 
```

**输入**：

`input_file`：

```
A 1,2 X    
B 5,6 Y 
```

**输出**：

```
A 1 X
A 2 X
B 5 Y
B 6 Y 
```

**说明**：

*   `awk`：invoke `awk`，用于操作行（记录）和字段的工具
*   `'...'`: 用单引号括起来的内容`awk`作为说明提供
*   `'BEGIN{FS="[ ,]"}`: 在阅读任何行之前，告诉 awk 使用空格和逗号作为分隔符；FS 代表字段分隔符。
*   `{print $1, $2, $NF; print $1, $3, $NF}`：对于读取的每个输入行，在一行上打印第一个、第二个和最后一个字段，然后在下一行打印第一个、第三个和最后一个字段。NF 代表字段数，`$NF`最后一个字段也是如此。
*   `input_file`: 将输入文件的名称作为参数提供给 awk。

* * *

响应更新的输入格式：

```
awk 'BEGIN{FS="[ ,]"} {print $1, $2, $4","$5; print $1, $3, $4","$5}' input_file 
```

# printing - 使用 gsprint 使用 PJL 命令打印 PostScript 文件时出现问题

> ID：13707604
> 
> 赞同：3
> 
> 时间：2012-12-04T16:39:08.470
> 
> 标签：printing, ghostscript, pjl

我们开发了一种内部打印解决方案，允许用户管理他们的打印（审核/合并/审查/发送到多台打印机）等......但是我们在流程的最后 - 最终打印时遇到了问题。

目前，我们的解决方案将文档（原始和合并后）存储在 PDF 中。我们需要能够将这些文档发送到特定的打印机，并在某些情况下（当用户选择该选项时）将第 1 页打印到托盘 8，将其余的打印到托盘 1。我们无法拆分 PDF 并打印将它们分开，因为它们也必须由打印机作为单个作业装订。

我们的想法是使用 ghostscript 将 PDF 文件转换为 PostScript 文件，然后将 PJL 命令插入 PostScript，然后使用 gsprint 打印修改后的 PostScript 文件。

不幸的是，ghostscript、postscript、PJL 和 gsprint 的组合似乎不起作用。我们尝试的 PJL 命令，我们可以在通过 windows 复制命令发送到打印机的文本文件中工作，但在放入 PostScript 文件并使用 gsprint 打印时似乎没有相同的影响。

谁能发现我们对 PostScript 所做的任何可怕的缺陷，或者知道为什么我们的 PostScript->PJL amends->gsprint 工作流程可能不起作用？

在线查找示例非常困难，因此很可能我们对 PJL 命令的放置不正确。

(//评论不在最终文件中)

```
<ESC>%-12345X@PJL JOB<ESC>&l8H           //start job printing first page 
@PJL ENTER LANGUAGE = Postscript         //to tray 8 (letterhead)
@PJL COMMENT CANPJL SET STAPLE=ONEUPLEFT //indicate the document should be stapled
%!PS-Adobe-3.0                           //start of PostScript file proper
---
%%PageTrailer                            //end of first page
<ESC>%-12345X@PJL EOJ<ESC>%-12345X       //end the first job
%%Page: 2
<ESC>%-12345X@PJL JOB<ESC>&l7H           //start 2nd job to print remaining
---                                      //pages to tray 1 (plain)
---
%%EOF
<ESC>%-12345X@PJL EOJ<ESC>%-12345X       //end 2nd job 
```

然后我们采用这个修改后的 PostScript 并使用 gsprint，如下所示：

```
gsprint -noquery -ghostscript gswin32c -printer "printer" "C:\postscriptfile.ps" 
```

所有这些都打印到默认托盘并且未装订，即这些都没有按预期工作。

我希望很清楚我们正在努力实现的目标。任何帮助将不胜感激。

提前致谢。

PS：我们所有的打印机都是佳能打印机。

***编辑：***

在下面 KenS 的回答之后，逻辑工作流程似乎应该改为 PDF->PCL->添加 PJL->使用“副本”发送到打印机

不幸的是，我们仍然遇到这个问题，我们的打印机似乎忽略了某些 PJL 命令（打印机肯定是 PCL 打印机）。

如果我们使用 Microsoft Word 生成的 2 页 PDF，使用 ghostscript 将其转换为 PCL，然后使用 Notepad++ 编辑该 PCL 文件，添加以下内容：

```
<ESC>%-12345X@PJL JOB NAME = "My Print Job Name"<CR><LF>
@PJL SET DUPLEX = ON
@PJL SET OUTBIN = LOWER
@PJL ENTER LANGUAGE = PCL
...original PCL data...
<ESC>%-12345X@PJL EOJ<CR><LF>
<ESC>%-12345X 
```

文档从下部出纸盘中出来，但未进行双面打印。但更奇怪的是，当 DUPLEX = ON 时，打印机的打印时间似乎比 DUPLEX = OFF 时的完全相同的作业要长得多，而且听起来它在内部做一些不同的事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:17:09.427

我认为您误解了 gsprint 的运作方式。它获取一个输入文件，将其呈现为位图，在适当的画布上绘制该位图，然后使用 Windows 打印系统在打印机上打印该画布。它根本没有对打印机的任何控制，因此嵌入任何预期控制打印机（与渲染相反）的东西都不会产生任何影响。

此外，PJL 与 HP PCL 打印机相关联，而不是与 PostScript 打印机相关联。虽然您的 PJL*可能*在 PCL 打印机上工作，因为它将每一页视为一个单独的作业，但它在 PostScript 打印机上根本不起作用，并且很可能会导致它给您一个错误，这取决于解释器是否是否忽略 PJL 命令。

为了控制打印机，您需要确定打印机支持哪种输入（PostScript 或 PCL），然后您需要将 PDF 转换为该格式，然后插入适当的控制序列。对于 PCL 打印机，您可以合理地使用 PJL，对于 PostScript 打印机，您应该使用 setpagdevice 操作符来控制它。假设您的打印机有一个 Windows .WPD 或 .PPD 文件，可以在那里找到相关的控制序列，或者通过打印一些测试文件并检查它们的内容。

顺便; 您说您在将文本文件发送到打印机时使用的命令有效。这意味着打印机至少了解 PJL，并且几乎可以肯定是 PCL 打印机。您不能将文本发送到 PostScript 打印机，它会产生错误，因为 PostScript 是一种编程语言，任何随机文本都会出现语法错误。但是，您可以将文本发送到 PCL 打印机，该打印机假定不以 0x1B（转义）开头的任何内容都只是要打印的文本。

因此，使用 Ghostscript 生成 PCL 输出，像上面那样插入 PJL，然后将结果*直接*发送到打印机应该可以工作。当然，在 PCL 文件中识别每一页的结尾可能会更加困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T21:47:07.740

我们遇到了类似的问题，这就是我们使用 ghost 脚本和 PJL 的方式

[http://reddymails.blogspot.com/2014/07/how-to-print-documents-using-java-how.html](http://reddymails.blogspot.com/2014/07/how-to-print-documents-using-java-how.html)

bfo.com 也有一些商业 jars，它们在没有 ghost 脚本的情况下以纯 java 方式做同样的事情。但你必须为此付出代价:)

# python - Httplib2 ssl 错误

> ID：13707606
> 
> 赞同：10
> 
> 时间：2012-12-04T16:39:17.707
> 
> 标签：python, foursquare, httplib2

今天我遇到了一个有趣的问题。

我正在使用foursquare推荐的python库httplib2 raise

```
SSLHandshakeError(SSLError(1, '_ssl.c:504: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed'),) 
```

在尝试请求 oauth 令牌时

```
response, body = h.request(url, method, headers=headers, body=data) 
```

在

```
_process_request_with_httplib2 function 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-04T16:48:27.477

如果您知道您要访问的网站是一个“好人”，您可以尝试像这样创建您的“开场白”：

```
import httplib2
if __name__ == "__main__":
    h = httplib2.Http(".cache", disable_ssl_certificate_validation=True)
    resp, content = h.request("https://site/whose/certificate/is/bad/", "GET") 
```

（有趣的部分是`disable_ssl_certificate_validation=True`）

来自文档： [http ://bitworking.org/projects/httplib2/doc/html/libhttplib2.html#httplib2.Http](http://bitworking.org/projects/httplib2/doc/html/libhttplib2.html#httplib2.Http)

**编辑 01：**

由于您的问题实际上是为什么会发生这种情况，您可以检查[this](http://www.sslshopper.com/ssl-certificate-errors.html)或[this](http://en.wikipedia.org/wiki/X.509#Certificates)。

**编辑 02：**

看到访问此答案的人数超出了我的预期，我想解释一下*何时*禁用证书验证可能有用。

首先，简要介绍一下这些证书的工作原理。上面提供的链接中有很多信息，但无论如何，它就在这里。

SSL 证书需要由众所周知的（至少，您的浏览器众所周知）[证书颁发机构](https://en.wikipedia.org/wiki/Certificate_authority)进行验证。[您通常从其中一个权威机构（赛门铁克](https://www.symantec.com/ssl-certificates/)、[GoDaddy](https://www.godaddy.com/web-security/ssl-certificate) ...）购买整个证书

从广义上讲，这个想法是：那些证书颁发机构 (CA) 给你一个证书，其中也包含*CA 信息*。您的浏览器有一个众所周知的 CA 列表，因此当您的浏览器收到证书时，它会执行以下操作：*“HmmMMMMmmm....* [[浏览器在此处做出一个自以为是的表情]] *...我收到了一个证书，它说它已经过赛门铁克的验证。我认识那个“赛门铁克”人吗？* [[浏览器然后转到它的知名 CA 列表并检查赛门铁克]] *哦，是的！我知道。好的，证书很好！*

如果您在浏览器中单击 URL 旁边的小锁，您可以自己查看该信息：

[![Chrome 证书信息](../Images/29c6572fcdcb357337624159baad6b64.png)](https://i.stack.imgur.com/qXBED.png)

但是，在某些情况下，您只想测试 HTTPS，并使用几个[命令行](https://jamielinux.com/docs/openssl-certificate-authority/create-the-root-pair.html)工具创建自己的证书颁发机构，然后使用“自定义”CA 来签署刚刚生成的“自定义”证书， 对？在这种情况下，您的浏览器（顺便说一句，问题是`httplib2.Http`）不会在受信任的 CA 列表中包含您的“自定义”CA，因此它会说证书无效。信息仍将加密传输，但浏览器告诉您的是，它并不完全信任正在加密传输到您假设它要去的地方。

例如，假设您按照[本教程](https://blog.didierstevens.com/2008/12/30/howto-make-your-own-cert-with-openssl/)为您的`localhost` [FQDN](https://en.wikipedia.org/wiki/Fully_qualified_domain_name)创建了一组自定义密钥和 CA 以及所有 mambo-jumbo ，并且您的 CA 证书文件位于当前目录中。您很可能`https://localhost:4443`使用您的自定义证书和诸如此类的东西运行服务器。现在，您的 CA 证书文件位于文件的当前目录中`./ca.crt`（与您的 Python 脚本将在同一目录中运行）。你可以这样使用`httplib2`：

```
h = httplib2.Http(ca_certs='./ca.crt')
response, body = h.request('https://localhost:4443')
print(response)
print(body) 
```

...你不会再看到警告了。为什么？因为你告诉`httplib2`去寻找 CA 的证书`./ca.crt`）

但是，由于 Chrome（引用浏览器）不知道这个 CA 的证书，它会认为它无效：

[![在此处输入图像描述](../Images/7c70fb2b46a59e32f9f612ec356fa3bc.png)](https://i.stack.imgur.com/lmftY.png)

此外，证书过期。您有可能在一家使用 SSL 加密的内部站点的公司工作。它可以正常工作一年，然后您的浏览器开始抱怨。你去找负责安全的人，然后问*：“哟！我在这里收到警告！发生了什么事？”* 答案很可能是*“天哪！我忘记更新证书了！没关系，从现在开始接受它，直到我修复它。”* （真实的故事，虽然我收到的答案中有脏话**:-D**）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-01T10:39:10.790

最新版本的 httplib2 默认使用自己的证书存储。

```
# Default CA certificates file bundled with httplib2.
CA_CERTS = os.path.join(
     os.path.dirname(os.path.abspath(__file__ )), "cacerts.txt") 
```

如果您使用的是 ubuntu/debian，您可以显式地将路径传递给系统证书文件，例如

```
httplib2.HTTPSConnectionWithTimeout(HOST, ca_certs="/etc/ssl/certs/ca-certificates.crt") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-09T17:22:18.433

也许是这种情况：我遇到了同样的问题并调试了 Google Lib，我发现原因是我使用的是旧版本的`httplib2`(0.9.2)。当我更新到最新的（0.14.0）时，它起作用了。

如果您已经安装了最新版本，请确保某些库没有`httplib2`在其依赖项中安装旧版本。

# database - 如何将 ID 与数据库中的实际名称相关联

> ID：13707610
> 
> 赞同：0
> 
> 时间：2012-12-04T16:39:36.707
> 
> 标签：database, relation

我有一个数据库，但让我感到困惑的一部分是我如何让它将供应商 ID 与供应商的名称相关联。

因此，例如，我想通过表单添加产品，但是当我选择供应商 ID 时，它只会显示 ID 号（例如 5），而不是 ID 相关的供应商名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:46:57.440

我怀疑您需要做的是将供应商表与产品表连接起来。假设 product 表有一个 supplier_id 列，如下所示：

（**编辑**基于第一条评论）

```
SELECT p.description, s.supplierId, s.supplierName
FROM product p
INNER JOIN supplier s ON s.supplierId = p.supplierId
WHERE p.id = some_value; 
```

如果您发布表描述，例如 SHOW CREATE TABLE table_name，则可以对其进行改进并使其对您更有用。

# jquery - jquery 选择器（“：数据（对话框）”）

> ID：13707612
> 
> 赞同：1
> 
> 时间：2012-12-04T16:39:50.003
> 
> 标签：jquery, jquery-selectors

我刚刚搜索了如何检查 div 是否被初始化为对话框。

```
$(this).is(':data(dialog)'); 
```

我不完全理解上面的代码。
这是否意味着每个初始化的对话框都有一个变量“对话框”并且设置为 true ？
此处的 data() 作为选择器是否与 $.data() 函数中的相同？
我应该阅读任何文章吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:41:03.623

这会出错。

如果有一个`:data`伪选择器，它将测试它是否适用。它会返回一个布尔值但不会改变任何东西。

但是`:data`如果您不使用特定插件，则没有伪选择器。请参阅[参考资料](http://api.jquery.com/category/selectors/)。

请注意，有些人*已经*创建了这样一个伪选择器：[jquery 数据选择器](https://stackoverflow.com/questions/2891452/jquery-data-selector)

但这不是标准的，当然结果将取决于您使用的插件。在“vanilla jQuery”中，`$(this).is(':data(dialog)');`只会出错。

# javascript - 使用 ClientScript 类将 VB.net 数组传递给 javascript

> ID：13707613
> 
> 赞同：1
> 
> 时间：2012-12-04T16:39:54.560
> 
> 标签：javascript, asp.net, arrays, vb.net, clientscript

我正在尝试使用 ASP.net 类 ClientScript 将数组传递给我的 aspx 页面。我已经成功完成了一个较早的示例来执行此操作（下面的代码示例）。但是一个新的例程是行不通的。不同之处在于 ClientScript 类。

错误指出“routeCoords 未定义”

我的java代码是...

```
function newTest() {
    var myArray = [ , ];
    var n = 0;

    var recCount = routeCoords.length / 15;

    for (var i = 0; i < recCount ; i++) {
        for (var s = 0; s < 15; s++) {

            myArray[i, s] = routeCoords[n];
            n++;

            alert(myArray[s], [i]);
        }
    }
} 
```

vb.net 构建数组并注册脚本....

```
 ' arrylist
 For p = 0 To arryLst.Count - 1
     Page.ClientScript.RegisterArrayDeclaration("routeCoords", arryLst(p))
 Next

Dim strScript As String = "newTest();"
ClientScript.RegisterStartupScript(GetType(Page), "newTest", strScript.ToString, True) 
```

数组在 vb.net 中正确填充

这是来自正在工作的样本的例程......

VB.net 代码：

```
For s = 0 To arryLst.Count - 1
    Page.ClientScript.RegisterArrayDeclaration("parmTypeAry", arryLst(s))
Next 
```

JAVA代码：

```
 // Create and Element Object of type "option"
  var opt = document.createElement("option");
  //Add the option element to the select item
  listID.options.add(opt);
  //Reading Element From Array
  opt.text = parmTypeAry[s]; 
```

它填充了一个下拉列表框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:39:27.107

这是解决方案。它需要 for 循环中的 IF 条件来检查数组。

```
 for (i = 0; i < recCount; i++) {
      // Array of arrays builds out each record.
          if (!myArray[i])
              myArray[i] = []

          for (s = 0; s < 16; s++) {
              //  myArray[i] = new Array(14);

              myArray[i][s] = routeCoordsAry[n];
              n++;

              //  alert("i=" + i + " s=" + s + " Val: " + (myArray[i][s]));

          }
          // var u = 4;
          s = 0;

      } 
```

# titanium - 无法保存图像 Blob

> ID：13707615
> 
> 赞同：3
> 
> 时间：2012-12-04T16:40:00.087
> 
> 标签：titanium

我正在尝试将照片库中的图像保存到本地存储，以便我可以跨应用程序会话加载图像。一旦用户完成选择图像，就会执行以下逻辑。在模拟器上，我看到错误消息已写入日志。即使我看到错误消息，我认为图像仍然保存在模拟器中，因为当我重新启动应用程序时，我能够加载保存的图像。但是，当我在设备上运行它时，我仍然收到您在下面的代码中看到的错误消息，并且加载了默认背景，这表明写入不成功。

谁能看到我做错了什么以及为什么图像无法成功保存？

```
var image = i.media.imageAsResized(width, height);
backgroundImage.image = image;      
function SaveBackgroundImage(image)
        {
            var file = Ti.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,W.CUSTOM_BACKGROUND);
            if(file.write(image, false))
            {
                W.analytics.remoteLog('Success Saving Background Image');
            }
            else
            {
                W.analytics.remoteLog('Error Saving Background Image');
            }
            file = null;            
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T14:30:56.520

试试这个代码：

```
var parent = Titanium.Filesystem.getApplicationDataDirectory();
var f = Titanium.Filesystem.getFile(parent, 'image_name.png');
f.write(image);
Ti.API.info(f.nativePath); // it will return the native path of image 
```

在您的代码中，您没有给出图像的类型（png/jpeg），这就是您收到错误的原因。

# java - 验证 XML 文档会导致“1 字节 UTF-8 序列的字节 1 无效”。

> ID：13707616
> 
> 赞同：5
> 
> 时间：2012-12-04T16:40:03.857
> 
> 标签：java, xml, saxon, schematron

我正在使用[Probatron4j验证一些 XML 文件对](http://www.probatron.org/probatron4j.html)[Schematron](http://schematron.com/)样式表，它在内部使用 Saxon。大多数情况下，这工作正常，但偶尔，处理崩溃并出现错误

> org.xml.sax.SAXParseException：1 字节 UTF-8 序列的字节 1 无效。

我的研究表明，此消息通常表明（无特定顺序）

*   明显无效的数据（例如，试图像读取 XML 文件一样读取 ZIP 文件）；
*   [字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)的存在；
*   存在 UTF-8 中不合法的字符；或者
*   声称是 UTF-8 编码的文档是在说谎。

这些都不适用于我正在处理的文档。我在程序执行期间检查了字节数组形式的输入，它不包含 BOM 或任何非 ASCII 字符。

处理在我的 30kb 文档中大约进行了五分之一，然后在一个不起眼的英文句子上崩溃（通过“不起眼”，我的意思是所有字节都在 32（空格）和 122（小写 z）之间；换句话说，标准键盘字符）。所谓的违规元素的字节在这篇文章的末尾。

奇怪的是，失败的文档是通过从一个较大的文档中删除一些元素生成的，这些元素由相同的代码干净地处理。

我知道异常是在实现接口`parse(InputSource input)`的对象的方法中引发的。`org.xml.saxXMLReader`根据[Javadoc](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/XMLReader.html)，`SAXException`表示

> 任何 SAX 异常，可能包含另一个异常。

在调试器中检查异常表明没有包装异常。

什么可能导致此错误？

编辑：

```
[60, 80, 97, 114, 97, 103, 114, 97, 112, 104, 62, 69, 120, 101, 99, 117, 116,
 105, 118, 101, 32, 83, 117, 109, 109, 97, 114, 121, 58, 32, 70, 114, 111, 109,
 32, 49, 55, 53, 52, 32, 116, 111, 32, 49, 55, 54, 51, 13, 10, 32, 32, 32, 32,
 32, 32, 32, 32, 32, 32, 32, 32, 69, 117, 114, 111, 112, 101, 32, 97, 110, 100,
 32, 116, 104, 101, 32, 65, 109, 101, 114, 105, 99, 97, 115, 32, 119, 101, 114,
 101, 32, 99, 97, 117, 103, 104, 116, 32, 117, 112, 32, 105, 110, 32, 97, 32, 99,
 111, 110, 102, 108, 105, 99, 116, 32, 98, 101, 116, 119, 101, 101, 110, 32, 69,
 110, 103, 108, 97, 110, 100, 44, 32, 117, 110, 100, 101, 114, 32, 75, 105, 110,
 103, 32, 71, 101, 111, 114, 103, 101, 32, 73, 73, 44, 32, 97, 110, 100, 32, 70,
 114, 97, 110, 99, 101, 44, 32, 117, 110, 100, 101, 114, 32, 75, 105, 110, 103,
 32, 76, 111, 117, 105, 115, 32, 88, 86, 46, 32, 73, 110, 32, 69, 117, 114, 111,
 112, 101, 13, 10, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 116, 104, 105,
 115, 32, 112, 101, 114, 105, 111, 100, 32, 119, 97, 115, 32, 107, 110, 111, 119,
 110, 32, 97, 115, 32, 116, 104, 101, 32, 83, 101, 118, 101, 110, 32, 89, 101,
 97, 114, 115, 39, 32, 87, 97, 114, 59, 32, 105, 110, 32, 78, 111, 114, 116, 104,
 32, 65, 109, 101, 114, 105, 99, 97, 32, 105, 116, 32, 99, 97, 109, 101, 32, 116,
 111, 32, 98, 101, 32, 99, 97, 108, 108, 101, 100, 32, 116, 104, 101, 32, 70,
 114, 101, 110, 99, 104, 32, 97, 110, 100, 32, 73, 110, 100, 105, 97, 110, 32,
 87, 97, 114, 46, 32, 73, 116, 32, 119, 97, 115, 32, 97, 32, 99, 111, 110, 102,
 108, 105, 99, 116, 32, 111, 118, 101, 114, 13, 10, 32, 32, 32, 32, 32, 32, 32,
 32, 32, 32, 32, 32, 116, 114, 97, 100, 101, 32, 97, 110, 100, 32, 108, 97, 110,
 100, 46, 60, 47, 80, 97, 114, 97, 103, 114, 97, 112, 104, 62] 
```

第三次出现后抛出异常`109`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:52:54.403

我已经解决了这个问题。尽管 Java 在内部为其`String`对象使用 UTF-8，但`String`该类的`getBytes()`方法将生成系统默认编码的字节，除非您明确指定您需要 UTF-8（或它可以理解的其他编码方案）。

我不完全确定这是如何或为什么解决问题的，因为抛出异常的位置附近的字节（问题末尾的字节）本身都是有效的 UTF-8 字节，但看起来确实如此有固定的东西。

我能想到的唯一潜在原因是我错过了文件中较早的一个无效字节，这把事情搞砸了，但没有导致立即崩溃。我正在从 a 中读取字节`ByteArrayInputStream`，因此程序可能会同时从缓冲区中读取一大块，这会将`pos`标记设置到假设坏字符所在位置之外的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:07:25.753

在等待您的字节数组时，我做了一些谷歌搜索。

你说

> 奇怪的是，失败的文档是通过从一个较大的文档中删除一些元素生成的，这些元素由相同的代码干净地处理。

[从那，我怀疑这个线程中的问题可能是你的问题](https://stackoverflow.com/questions/443305/producing-valid-xml-with-java-and-utf-8-encoding)

# apache - Maven 错误：在内部找不到工件 h2:h2:jar:1.3.167

> ID：13707619
> 
> 赞同：1
> 
> 时间：2012-12-04T16:40:07.700
> 
> 标签：apache, maven

我正在尝试使用以下命令行构建一个 Maven 项目：

“mvn -U 全新安装”

我不断收到这个错误：

```
Downloading: http://repo1.maven.org/maven2/h2/h2/1.3.167/h2-1.3.167.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 38.547s
[INFO] Finished at: Tue Dec 04 10:23:13 CST 2012
[INFO] Final Memory: 42M/64M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project GenManagerEar: Could not resolve depen
dencies for project PCI:GenManagerEar:ear:5.2.1-SNAPSHOT: Could not find artifac
t h2:h2:jar:1.3.167 in internal (http://buildmachine:8080/archiva/repository/int
ernal) 
```

在我的本地存储库中，我有这个用于 h2：

![在此处输入图像描述](../Images/cd2ff8fe0711e771da2a7ee16c833c62.png)

看起来它无法下载 h2 JAR 文件。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:57:51.443

你 h2 数据库工件的坐标似乎是错误的。

基于[Maven 中心](http://search.maven.org/#artifactdetails%7Ccom.h2database%7Ch2%7C1.3.170%7Cjar)，它们应该是：

```
groupId: com.h2database
artifactId: h2
version: 1.3.170 
```

此外，您使用内部 Archiva 的配置似乎也是错误的，因为通常如果您使用的是存储库管理器，则不应直接访问 maven Central。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-19T07:32:39.837

如果您的本地存储库的版本与`POM.xm`l 版本 ( `<version>2.0.1.RELEASE</version>`) 不同，则会发生这种情况。请入住`.m2\repository\com\h2database\h2\1.4.197`。如果 jar 不存在，请从 maven 存储库下载实际的 JAR。

# c# - wp7 NetworkInterface.GetIsNetworkAvailable() 两个命名空间？

> ID：13707621
> 
> 赞同：1
> 
> 时间：2012-12-04T16:40:11.867
> 
> 标签：c#, windows-phone-7

```
System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable();
Microsoft.Phone.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable(); 
```

有区别吗？如何使用 NetworkInterface.GetIsNetworkAvailable() ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:20:45.640

`Microsoft.Phone.Net.NetworkInformation.NetworkInterface`继承`System.Net.NetworkInformation.NetworkInterface`并添加`GetNetworkInterface`静态方法和`NetworkInterfaceType`静态属性。否则，这两个类是相同的。

`NetworkInterface.GetIsNetworkAvailable`您可以使用MSDN 上的方法找到示例：http: [//msdn.microsoft.com/fr-fr/library/system.net.networkinformation.networkinterface.getisnetworkavailable (v=vs.95).aspx](http://msdn.microsoft.com/fr-fr/library/system.net.networkinformation.networkinterface.getisnetworkavailable(v=vs.95).aspx)

```
 if (NetworkInterface.GetIsNetworkAvailable())
 {
     // Online
 }
 else  
 {
     // Offline
 } 
```

# .net - 模拟在运行时使用 NSubstitute 创建的对象的 LINQ-to-SQL 导航属性

> ID：13707628
> 
> 赞同：1
> 
> 时间：2012-12-04T16:40:25.427
> 
> 标签：.net, linq-to-sql, mocking, nsubstitute

我被难住了。我一直在努力在这里和 NSubstitute 的文档中找到任何可行的答案来解决我的问题。

我正在尝试对服务方法进行单元测试，在该方法中，将对象添加到存储库后，我访问该对象的导航属性以执行其他工作。当单元测试到达代码中访问新对象的导航属性的位置时，我得到一个 NullReferenceException。我明白为什么我会收到异常，因为我没有告诉它它应该在模拟中返回什么，但我不知道如何告诉单元测试在访问导航属性时返回什么。这都是因为对象是在运行时创建的。

为简洁起见，我将只包括相关的方法部分。

```
// This is the method I am trying to unit test
public void SaveSelectedResultsMeasures(SelectResultsMeasuresViewModel model)
{
    // validate the model
    ...

    var cpf = this.repository.GetCareerPlanningFormByID(model.CareerPlanningFormID);

    model.ResultsMeasuresSections.ToList().ForEach(resultsMeasuresSection =>
    {
        var selectedResultsMeasuresSection = cpf.SelectedResultsMeasuresSections
                                                .Where(o => o.ResultsMeasuresSectionID == resultsMeasuresSection.SectionID)
                                                .ToMaybe();

        if (resultsMeasuresSection.IsSelected)
        {
            if (!selectedResultsMeasuresSection.HasValue)
            {
                // here is where the new object is being created and added to the repository
                cpf.SelectedResultsMeasuresSections.Add(new SelectedResultsMeasuresSection
                {
                    CareerPlanningFormID = cpf.CareerPlanningFormID,
                    IsDeleted = false,
                    ResultsMeasuresSectionID = resultsMeasuresSection.SectionID,
                    RepeatNumberOfOccurrences = resultsMeasuresSection.RepeatNumberOfOccurrences ?? 1
                });
                this.repository.Commit();

                // now that the add has been committed, i get the object i just created
                var newSelectedResultsMeasuresSection = cpf.SelectedResultsMeasuresSections
                    .Where(o => o.ResultsMeasuresSectionID == resultsMeasuresSection.SectionID)
                    .Single();

                // here is where i access the navigation properties of that object
                // this works just fine, just need to figure out how to unit test it so that i can continue to test the code inside the block
                // when the unit test hits this point, this is where I get the NullReferenceException
                newSelectedResultsMeasuresSection.ResultsMeasuresSection.ResultsMeasures.ToList().ForEach(rm =>
                {
                    // code here...
                }
            }
        }
    }
}

// This is the unit test
[TestClass]
[ExcludeFromCodeCoverage]
public class CareerPlanningFormServiceTest
{
    private readonly IPartnerPerformanceManagementConfiguration configuration;
    private readonly IPartnerPerformanceManagementRepository repository;
    private readonly IPrincipal currentUser;
    private readonly CareerPlanningFormService target;

    public CareerPlanningFormServiceTest()
    {
        this.configuration = Substitute.For<IPartnerPerformanceManagementConfiguration>();
        this.repository = Substitute.For<IPartnerPerformanceManagementRepository>();
        this.currentUser = Substitute.For<IPrincipal>();

        this.target = new CareerPlanningFormService(
            this.configuration,
            this.repository,
            this.currentUser);
    }

    /// <summary>
    /// Tests the SaveSelectedResultsMeasures method.
    /// Test success when adding a new SelectedResultsMeasuresSection
    /// </summary>
    [TestMethod]
    [TestCategory("CareerPlanningFormService")]
    [TestCategory("CareerPlanningFormService - SaveSelectedResultsMeasures")]
    public void SaveSelectedResultsMeasures_Test_Success_Add_SelectedResultsMeasuresSection()
    {
        // Arrange
        var model = new SelectResultsMeasuresViewModel
        {
            CareerPlanningFormID = 1,
            ResultsMeasuresSections = new List<ResultsMeasuresSectionModel>
            {
                new ResultsMeasuresSectionModel
                {
                    SectionID = 1,
                    IsRequired = false,
                    IsSelected = true,
                    ActionPlanLabels = new List<ActionPlanLabelModel>
                    {
                        new ActionPlanLabelModel
                        {
                            LabelID = 1,
                            IsSelected = true,
                        }
                    },
                    CanRepeat = false
                },
                new ResultsMeasuresSectionModel
                {
                    SectionID = 2,
                    IsRequired = false,
                    IsSelected = true,
                    ActionPlanLabels = new List<ActionPlanLabelModel>(),
                    CanRepeat = true,
                    RepeatNumberOfOccurrences = 2
                }
            }
        };
        var cpf = new CareerPlanningForm
        {
            CareerPlanningFormID = 1,
            SelectedResultsMeasuresSections = new EntitySet<SelectedResultsMeasuresSection>()
        };
        this.repository.GetCareerPlanningFormByID(model.CareerPlanningFormID).Returns(cpf);

        // Act
        this.target.SaveSelectedResultsMeasures(model);

        // Assert
        this.repository.Received(8).Commit();
        Assert.AreEqual(2, cpf.SelectedResultsMeasuresSections.Count);

        Assert.AreEqual(1, cpf.SelectedResultsMeasuresSections.Where(o => o.ResultsMeasuresSectionID == 1).Single().SelectedActionPlanLabels.Count());
        Assert.AreEqual(1, cpf.SelectedResultsMeasuresSections.Where(o => o.ResultsMeasuresSectionID == 1).Single().ResultsMeasuresSectionOccurrences.Count());

        Assert.AreEqual(0, cpf.SelectedResultsMeasuresSections.Where(o => o.ResultsMeasuresSectionID == 2).Single().SelectedActionPlanLabels.Count());
        Assert.AreEqual(2, cpf.SelectedResultsMeasuresSections.Where(o => o.ResultsMeasuresSectionID == 2).Single().ResultsMeasuresSectionOccurrences.Count());
    }
} 
```

如果还有什么我可以提供的帮助，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:46:58.733

看起来您需要添加`ResultsMeasures`到`ResultsMeasuresSections`您在测试中返回的内容？

不过，在您沿着这条路走得更远之前，您似乎正在做很多工作来[模拟 LINQ-to-SQL 的行为](http://davesquared.net/2011/04/dont-mock-types-you-dont-own.html)。我建议放弃测试代码功能的特定机制的单元测试，并切换到针对真实或内存数据库的测试，以确保您的代码具有您想要的行为。例如，假设您已保存 CPF 的结果度量，请确保检索的 CPF 具有您需要的信息。

The downside with testing things like `.Received(8).Commit()` is that you are testing against how you know/expect the other system to behave, not whether the code is actually behaving as required. I feel it is the latter point that is most valuable to us when testing.

# android - 在 Android 4.2.1 上将 mtpfs 和 adb 与 Nexus 7 一起使用

> ID：13707630
> 
> 赞同：2
> 
> 时间：2012-12-04T16:40:32.293
> 
> 标签：android

股票，开箱即用，他们都工作。但是更新后我无法使用 mtpfs 访问内部存储，并且当我使用“adb 设备”时该设备未列出。我已经四处搜索，但我发现的所有内容仅在 4.2 时才有效。我在我的电脑上运行 Ubuntu 12.10。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:45:34.717

您是否已将硬件 ID 添加到您的 udev 规则中？

[http://developer.android.com/tools/device.html#setting-up](http://developer.android.com/tools/device.html#setting-up)

# android - 放置在广告上方的文本视图（相对布局）不会出现

> ID：13707632
> 
> 赞同：0
> 
> 时间：2012-12-04T16:40:36.827
> 
> 标签：android, android-relativelayout

我尝试将我的 textview 放在广告上方并将它们放在页面底部。我这样做

```
<RelativeLayout
            android:id="@+id/rl"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="0dp" >

             <com.google.ads.AdView android:id="@+id/adView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                ads:adUnitId=""
                ads:adSize="BANNER"
                ads:loadAdOnCreate="true"/>

            <TextView
                android:id="@+id/bAloha"
                android:layout_width="42dp"
                android:layout_height="42dp"
                android:layout_above="@+id/adView"
                android:text="Aloha"
                android:textColor="#ffffff"
                android:textSize="20dp" />

        </RelativeLayout> 
```

但它只向我展示广告而不是文字..有什么想法吗？尝试了不同的东西，但从未出现..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:52:47.217

我遇到了类似的问题，即广告未在 2.3.4 及以下版本上展示。`AdView`原因是只有在广告有效加载时才知道的尺寸。由于 AdView 具有固定且确定的尺寸（例如 320x50 像素），您可以将这些尺寸设置为您的`AdView`. 所以`RelativeLayout`立即知道你`TextView`应该画在哪里

# javascript - 带有多个提交按钮的表单的 Javascript onsubmit

> ID：13707633
> 
> 赞同：3
> 
> 时间：2012-12-04T16:40:39.077
> 
> 标签：javascript

我有一个带有两个提交按钮的表单，一个称为“显示”，另一个称为“退出”。显示提交不需要确认，而另一个则需要。本来我打算用

```
onsubmit="return confirm('Are you sure you want to remove the modules?');" 
```

但这当然行不通，因为它对两个提交都有反应。有没有办法可以指定值得提交的文件？（我对javascript很陌生，所以请对我温柔）

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T16:42:44.077

试试这个：

```
<input type="submit" onclick="return confirm('Are you sure you want to remove the modules?');" value="submit1" /> 
```

# c - 分配静态内存（作为 malloc 替换）

> ID：13707634
> 
> 赞同：2
> 
> 时间：2012-12-04T16:40:39.737
> 
> 标签：c, memory-management, static, malloc

我看到了[这个问题](https://stackoverflow.com/questions/5771868/how-to-allocate-memory-space-without-using-malloc-or-new-operator)，但它只是说明了我想要做什么，而不是解释如何去做。

我有一个`C`库，它将在支持动态内存分配的系统以及不支持动态内存分配的系统上运行。我想通过编写自己的`malloc`函数来简化系统之间的转换，该函数在堆不可用时从静态数组分配内存。

我不是在寻找一个完全充实的解决方案来解决我的问题，但是带有示例的博客文章会有所帮助。确定何时以及何时不使用`malloc`很容易。但是我花了一些时间来弄清楚如何从静态数组中分配内存。

```
static char my_memory[10000] = { 0 };

static void *my_malloc(size_t size) {
    // Here, I want to allocate 'size' in 'my_memory'.
    return NULL;
}

static void *my_free(void* memory) {
    // Here, I want to free 'memory' from 'my_memory'.
} 
```

编辑：
在这里，我的需求非常简单，并且将以这种方式分配的内存很少（并且很少释放）。Steve Jessop 的简单解决方案非常适合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:11:18.460

关于最简单的分配器，可以这样写：

*   初始化：`current_position = my_memory + sizeof(my_memory)`。根据实现的对齐要求，您可能必须确保`current_position`正确对齐。
*   分配：`return ((current_position - my_memory) <= size) ? 0 : (current_position -= size);`。为了对齐，您可能必须先四舍五入`size`到某个数字的倍数。
*   免费：什么都不做。

就是这样。显然，如果你跟注`free`很多，这个策略很快就会耗尽内存。所以你可以引入一个并发症：

*   分配：增加`size`足够的空间以将分配的大小写入您从数组中切出的每个“块”的开头。返回一个指向大小记录末尾的指针（即可用内存的开头）。此外，请确保每个分配都足够大以包含您定义的标头结构，即使请求小于该标头结构。

您已经引入了每次分配的开销，但这允许您：

*   free：使用 header struct 将释放的块添加到某种数据结构中（继续记住大小）。

*   allocate：如果数据结构中有一个可以满足请求的分配，则返回它，否则从主数组中切出另一个切片并返回。

现在你有了一个工作内存分配器。它不是特别*好用*，你比最先进的技术落后了大约 60 年，所以你可能需要引入更多的复杂性。但是内存分配算法的整个历史超出了单一答案的范围。您可以从这里开始，直到您的分配器足以满足您的目的，或者您放弃并决定使用现有的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:10:47.883

您可以在每次分配开始时将地址（在您的情况下为数组中的偏移量）保存到下一个空闲块，即您使用一些数组作为空闲块的列表。这考虑了您如何分配和查找内存块，free 比较棘手，因为当您归还内存时，您需要做的不仅仅是调整数组中的空闲偏移量，您还需要将多个空闲块合并在一起，否则您最终导致内存碎片，然后您无法分配所需大小的块。

我认为关键概念是分配的块也总是包含到下一个空闲块的偏移量，这就是你如何使用自己的数组来跟踪其中分配的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T17:12:33.800

老歌但好歌（用于描述问题的博客文章）： http: [//g.oswego.edu/dl/html/malloc.html](http://g.oswego.edu/dl/html/malloc.html)

或者，如果您正在寻找打包的东西：http: [//hempeldesigngroup.com/embedded/stories/memorymanager/](http://hempeldesigngroup.com/embedded/stories/memorymanager/)

# html - 移动 Safari 中的 a:hover 和 CSS 过渡

> ID：13707638
> 
> 赞同：0
> 
> 时间：2012-12-04T16:40:52.067
> 
> 标签：html, css, mobile-safari

我之前已经看到过这个问题，但是我在对我的网站应用修复时遇到了麻烦。我正在构建一个投资组合网站，并添加了使用`:hover`和 CSS 转换的导航元素。我一直在跨浏览器测试该网站，虽然它在桌面浏览器上运行良好，但移动 Safari 拒绝合作（点击悬停在移动 Chrome 和移动 IE 中运行良好）。在 iPhone 或 iPad 上，导航完全失效。如果有人可以提供帮助，将不胜感激。网站是：[www.gabeweintraub.com](http://www.gabeweintraub.com)。相关代码如下：

（**注**：这是我的第一个Web项目，所以我假设代码中除了这个之外还有一堆令人尴尬的漏洞问题。请温柔。）

HTML

```
 <div class="splash_nav">
        <ul>
            <li><span>Ideas</span>
                <ul>
                    <li><a href="/cgi-bin/blosxom.cgi">Blog</a></li>
                    <li><a href="http://twitter.com/GabeWeintraub">Twitter</a></li>
                </ul>
            </li>
            <li><span>Projects</span>
                <ul>
                    <li><a href="/gallery.html" >Art</a></li>
                    <li><a href="/code.html" >Code</a></li>
                </ul>
            </li>
            <li><span>About</span>
                <ul>
                    <li><a href="/bio.html">Bio</a></li>
                    <li><a href="/resume.html">Resume</a></li>
                    <li><a href="/contact.html">Contact</a></li>
                </ul>
            </li>
        </ul>
    </div>
</div>

<nav>

        <div class="menu-item-2">
            <h4>Ideas</h4>
            <ul>
                <li><a href="/cgi-bin/blosxom.cgi">Blog</a></li>
                <li><a href="http://twitter.com/GabeWeintraub">Twitter</a></li>
            </ul>
        </div>

        <div class="menu-item-2">
          <h4>Projects</h4>
          <ul>
            <li><a href="/gallery.html">Art</a></li>
            <li><a href="/code.html">Code</a></li>
          </ul>
        </div>

        <div class="menu-item-3">
          <h4>About</h4>
          <ul>
            <li><a href="/bio.html">Bio</a></li>
            <li><a href="/resume.html">Resume</a></li>
            <li><a href="/contact.html">Contact</a></li>
          </ul>
        </div>
    </nav> 
```

CSS

```
.splash_nav {
  width: 500px;
  position: relative;
  top: 300px;
  margin: 0 auto 2em;
  padding: 0;
  text-align: center;
}

.splash_nav li {
  display: inline;
  list-style: none;
}

.splash_nav li span {
  display: inline;
  list-style: none;
  text-transform: uppercase;
  text-decoration: none; 
  color: rgb(152,27,30);
  font-size: 1.5em;
  font-weight: 500;
  height: 100px;
  padding: 10px;
}

.splash_nav li a {
  display: inline;
  text-transform: uppercase;
  text-decoration: none; 
  color: rgb(152,27,30);
  font-weight: 500;
  height: 100px;
}

.splash_nav li ul {
  display: none;  
}

.splash_nav li:hover ul, .splash_nav li.hover ul {
  position: fixed;
  display: block;
  height: 80px;
  width: 500px;
  top: 340px;
  margin: 0 auto 0;
  text-align: center;
}

.splash_nav li:hover li, .splash_nav li.hover li {
  position: relative;
  -webkit-animation: fadeIn 2s;
    -moz-animation: fadeIn 2s;
    -ms-animation: fadeIn 2s;
}

.splash_nav li:hover li a, .splash_nav li.hover li a {
  color: rgb(76,77,79);
  font-size: 1em;
  padding: 10px;
}

.splash_nav li li a:hover {
  background: #eee;
}

@-webkit-keyframes fadeIn {
    from { opacity: 0; }
      to { opacity: 1; }
}

@-moz-keyframes fadeIn {
    from { opacity: 0; }
      to { opacity: 1; }
}

@-ms-keyframes fadeIn {
    from { opacity: 0; }
      to { opacity: 1; }
}

nav {
  float: right;
  line-height: 1.5;
  padding-right: 70px;
}

.menu-item-1, .menu-item-2, .menu-item-3 {
  background: #fff;

}

.menu-item-1 h4, .menu-item-2 h4, .menu-item-3 h4 {
  color: rgb(152,27,30);
  font-size: 1.5em;
  font-weight: 500;
  text-align: right;
}

.menu-item-1 h4 a, .menu-item-2 h4 a, .menu-item-3 h4 a {
  color: rgb(152,27,30);
  display: block;
  text-decoration: none;
  text-align: right;
  text-transform: uppercase;
}

/*ul Styles*/
.menu-item-2 ul, .menu-item-3 ul {
  background: #fff;
  font-size: 1em;
  line-height: 30px;
  height: 0px;
  list-style-type: none;
  overflow: hidden;

  text-transform: uppercase;

  /*Animation*/
  -webkit-transition: height 1.5s ease;
     -moz-transition: height 1.5s ease;
       -o-transition: height 1.5s ease;
      -ms-transition: height 1.5s ease;
          transition: height 1.5s ease;
}

.menu-item-3:hover ul {
  height: 93px;
}

.menu-item-2:hover ul{
  height: 62px;
}

.menu-item-2 ul a, .menu-item-3 ul a {
  width: 150px;
  text-decoration: none;
  color: rgb(76,77,79);
  display: block;
  text-align: right;
  padding-right: 20px;
}

/*li Styles*/
.menu-item-2 li, .menu-item-3 li {
  border-bottom: 1px solid color: rgb(76,77,79);;
  text-align: right;
}

.menu-item-2 li:hover, .menu-item-3 li:hover {
  background: #eee;
  text-align: right;
  text-decoration: none;
} 
```

谢谢！

# c - 对“ssh_new”的未定义引用

> ID：13707643
> 
> 赞同：1
> 
> 时间：2012-12-04T16:41:17.603
> 
> 标签：c, makefile, libssh

> **可能重复：**
> [针对 glib 编译时出现 Noobish、链接器错误……？](https://stackoverflow.com/questions/9966959/noobish-linker-errors-when-compiling-against-glib)

我有以下 Makefile：

```
remote: RemoteCMD.o sshlib.o
    g++ -L/usr/include/libssh -lssh RemoteCMD.o sshlib.o -o RemoteCMD

RemoteCMD.o: RemoteCMD.cpp
    g++ -c RemoteCMD.cpp

sshlib.o: sshlib.cpp
    g++ -c sshlib.cpp 
```

sshlib.h 包括 libssh/libssh.h，sshlib.cpp 包括 sshlib.h。当我得到：

```
g++ -L/usr/include/libssh -lssh RemoteCMD.o sshlib.o -o RemoteCMD
sshlib.o: In function `ssh::connect(char*, char*)':
sshlib.cpp:(.text+0x1c): undefined reference to `ssh_new' 
```

我还仔细检查了 libssh.a 的位置：

```
$> whereis libssh.a
libssh: /usr/include/libssh 
```

我也试过`-llibssh`and `-llibssh.a`。似乎[这个](http://comments.gmane.org/gmane.network.ssh.libssh.general/1039)人也有一个非常相似的未回答问题。

# scala - 将java单元测试代码转换为抛出和捕获异常的scala

> ID：13707644
> 
> 赞同：0
> 
> 时间：2012-12-04T16:41:21.970
> 
> 标签：scala, junit

我正在将 junit java 单元测试转换为 scala 单元测试。这些测试将抛出异常作为其方法签名的一部分。当我将测试转换为 scala 时，我不再需要抛出这些异常。

编辑：转换为 scala 后的 junit 测试编译并运行抛出异常。这是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:49:49.477

关于检查异常的好处（或缺乏）的讨论很多。有趣的是，虽然 java 知道检查异常，但 JVM 不知道。所以 Scala 的设计者决定不使用检查异常。

检查异常的想法是强制开发人员处理一些异常。但事实证明，这导致了许多极其无用的异常处理代码，混淆了主代码的意图或吞下异常或两者兼而有之。

# android - sd卡的文件路径

> ID：13707647
> 
> 赞同：2
> 
> 时间：2012-12-04T16:41:33.000
> 
> 标签：android, android-intent

我在 sd 卡上有 mp3 文件。选择文件时如何从sd卡获取文件路径？

动态！...就像用户在列表视图中单击文件时，它的路径进入变量以供使用。

```
public class PlayListActivity extends ListActivity {
    // Songs list
    public ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playlist);    
        ArrayList<HashMap<String, String>> songsListData = new ArrayList<HashMap<String, String>>();    
        SongsManager plm = new SongsManager();
        // get all songs from sdcard
        this.songsList = plm.getPlayList();

        // looping through playlist
        for (int i = 0; i < songsList.size(); i++) {
            // creating new HashMap
            HashMap<String, String> song = songsList.get(i);

            // adding HashList to ArrayList
            songsListData.add(song);
        }    
        // Adding menuItems to ListView
        ListAdapter adapter = new SimpleAdapter(this, songsListData,
                R.layout.playlist_item, new String[] { "songTitle" }, new int[] {
                        R.id.songTitle });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();
        // listening to single listitem click
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting listitem index
                int songIndex = position;

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        AndroidBuildingMusicPlayerActivity.class);
                // Sending songIndex to PlayerActivity
                in.putExtra("songIndex", songIndex);
                setResult(100, in);
                // Closing PlayListView
                finish();
            }
        });    
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T16:56:10.607

我认为您想从文件打开对话框中获取文件，请查看以下链接

参考：[选择文件对话框](https://stackoverflow.com/questions/3592717/choose-file-dialog)

您可以借助以下命令获取 SD 卡的路径：

```
String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
String fileName = "myFile.mp3"; 
```

所以路径将是

```
String path  = baseDir + "/your folder(s)/" + fileName; 
```

参考是：[Android如何使用Environment.getExternalStorageDirectory()](https://stackoverflow.com/questions/5453708/android-how-to-use-environment-getexternalstoragedirectory)

或者您可以尝试：

```
new File("/mnt/external_sd/your folder(s)../file.mp3");//get a file from SD card 
```

参考：[如何获取 Android 4.0+ 的外部 SD 卡路径？](https://stackoverflow.com/questions/11281010/how-can-i-get-external-sd-card-path-for-android-4-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:48:13.890

您可以使用[`getExternalStorageDirectory()`](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)获取 sd 卡的根作为`File`对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:33:48.380

要获取文件，您应该使用类似这样的东西

```
public static byte[] readFile (String file, Context c) throws IOException {
    File f = new
    File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC), file);
    if (f.exists())
        return readFile(f);
    else return new byte[0];
} 
```

然后你可以用你得到的字节解码文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T19:43:54.033

我认为此代码将与您一起使用...尝试一下并按照我的结果

公共类 SongsManager {

```
final String MEDIA_PATH = new String("/sdcard/");
private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

// Constructor
public SongsManager(){

}

/**d
 * Function to read all mp3 files from sdcard
 * and store the details in ArrayList
 * */
public ArrayList<HashMap<String, String>> getPlayList(){
        File List[] = Environment.getExternalStorageDirectory().listFiles();  

    File home;

    int index=0;

        while(index<List.length)
        {
            home = new File(List[index].getAbsolutePath().toString());
            if (home.listFiles(new FileExtensionFilter()).length > 0) {
            for (File file : home.listFiles(new FileExtensionFilter())) {

                HashMap<String, String> song = new HashMap<String, String>();
                song.put("songTitle", file.getName().substring(0, (file.getName().length() - 4)));
                song.put("songPath", file.getPath());

                // Adding each song to SongList
                songsList.add(song);
            }
            index++;
        }
    }
    // return songs list array
    return songsList;
}

/**
 * Class to filter files which are having .mp3 extension
 * */
class FileExtensionFilter implements FilenameFilter {
    public boolean accept(File dir, String name) {
        return (name.endsWith(".mp3") || name.endsWith(".MP3"));
    }
} 
```

}

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-12T07:07:59.787

4天后我得到了解决方案。在 Android(Java) 中给出 File 类的路径时请注意以下几点：

1.  使用路径进行内部（在 android 中调用外部）存储

    ```
    String path="/storage/sdcard0/myfile.txt"; 
    ```

2.  在存储卡中

    ```
    path="/storage/sdcard1/myfile.txt"; 
    ```

3.  在清单文件中提及权限。

    ```
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
    ```

4.  首先检查文件长度以确认。

5.  检查 ES 文件资源管理器中有关 sdcard0 和 sdcard1 的路径是否相同，否则......例如

    ```
    File file=new File(path);
    long=file.length(); //in Bytes 
    ```

# jquery - SVG 在具体 5 中调用 JavaScript

> ID：13707650
> 
> 赞同：0
> 
> 时间：2012-12-04T16:41:53.407
> 
> 标签：jquery, svg

我在网站上有一个 SVG 图像地图 - 我有 SVG 内联。现在我想添加替代内容，因此决定使用 <object> 方法并将 SVG 放在一个外部文件中，这样我就可以在 <object> 中放置一个图像标签。问题是我从 SVG 的 onmouseover、onmouseout 参数调用 JavaScript 函数——而这些 JS 函数使用 JQuery。这些函数被调用得很好，但我得到 $ 没有定义。正在加载 JQuery...

我在这里有一个测试页面： [http ://www.kollegetown.com/themes/kollegetown/test.htm](http://www.kollegetown.com/themes/kollegetown/test.htm)

如果您打开控制台，如果您翻转热点，您将看到 $ is not defined 错误。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:16:09.890

当然你需要加载 jQuery。将以下行添加到 SVG：

```
<script type="text/javascript" xlink:href="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"/> 
```

那应该做的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:13:39.077

在我看来，更优雅的解决方案是使用 CSS3 动画而不是 jQuery（[参见 Tinkerbin](http://tinkerbin.com/8sLpzuzM)）：

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="956px" height="745px" >
  <style type="text/css">
    a > image {
      opacity: 0;
      pointer-events:none;
      transition: opacity .25s ease-in-out;
      -moz-transition: opacity .25s ease-in-out;
      -webkit-transition: opacity .25s ease-in-out;
    }

    a > polygon {
      opacity:0;
    }

    a:hover > image {
      pointer-events:auto;
      display:inline;
      opacity: 1;
    }
  </style>

  <image x="0" y="0" width="956" height="745" xlink:href="http://www.kollegetown.com/themes/kollegetown/images/img1.jpg" />

  <!-- stadium/team -->
  <a xlink:href="/team" target="new">
  <image id="team" x="63" y="284" width="204" height="365" xlink:href="http://www.kollegetown.com/themes/kollegetown/images/homeRollover_team.jpg"/>
    <polygon points="189 383, 185 345, 155 316, 209 281, 211 244, 289 210, 291 241, 348 245, 397 290, 391 299, 344 276, 345 369, 365 385, 330 404, 313 438"/>                   
  </a>

  <!-- corporate -->            
  <a xlink:href="/corporate" target="new">
  <image id="corp" x="33" y="29" width="356" height="221" xlink:href="http://www.kollegetown.com/themes/kollegetown/images/homeRollover_corporate.jpg"/>
    <polygon points="18 126, 86 125, 186 180, 190 271, 99 327, 31 330, 18 321"/>                    
  </a>

  <!-- campus shops -->
  <a xlink:href="/campusbooster" target="new">
  <image id="shops" x="423" y="186" width="497" height="213" xlink:href="http://www.kollegetown.com/themes/kollegetown/images/homeRollover_shops.jpg"/>
    <polygon points="425 60, 427 209, 470 226, 469 246, 483 251, 506 235, 534 244, 595 214, 600 191, 612 188, 621 201, 633 196, 631 23, 624 17, 504 17"/>                   
  </a>

  <!-- art gallery / design -->
  <a xlink:href="/designs" target="new">
  <image id="design" x="496" y="407" width="331" height="321" xlink:href="http://www.kollegetown.com/themes/kollegetown/images/homeRollover_gallery.jpg"/>
    <polygon points="503 509, 438 547, 440 691, 481 710, 482 729, 647 729, 647 582"/>
  </a>

</svg> 
```

Opera 有一个小故障，它不会使过度图像对悬停时的鼠标事件敏感。但是用户仍然可以点击建筑物来跟随链接。无法测试 IE9（我的 Win7 笔记本有问题）。

# java - java中的比较器和可比较的实现

> ID：13707651
> 
> 赞同：1
> 
> 时间：2012-12-04T16:41:54.417
> 
> 标签：java, comparator, comparable

我知道这些接口用于对集合中的对象进行排序。但我怀疑这些的真正区别。我读到的一个事实是，当您想比较两个对象而不是当前对象（this）时使用可比较。

但我的问题是即使使用比较器我们比较相同的对象类型知道。

这里真正的区别是什么。我很困惑。假设以下示例，

```
class Person implements Comparable<Person> {
  private String firstName;
  private String lastName;
  private int age;

  public String getFirstName() {
    return firstName;
  }

  public void setFirstName(String firstName) {
    this.firstName = firstName;
  }

  public String getLastName() {
    return lastName;
  }

  public void setLastName(String lastName) {
    this.lastName = lastName;
  }

  public int getAge() {
    return age;
  }

  public void setAge(int age) {
    this.age = age;
  }

  public int compareTo(Person anotherPerson){     
    int anotherPersonAge =anotherPerson.getAge();  
    return this.age - anotherPersonAge;    
  }
} 
```

如果我使用比较器，我将有一个类实现比较器，而不是 this.age，它有 person.age。那么这里有什么不同呢？

```
public class LastNameComparator implements Comparator<Person> {
  public int compare(Person person, Person anotherPerson) {
    int age1 = person.getAge();
    int age2 = anotherPerson.getAge();

     return age1 - age2; 
  }
} 
```

我不知道 Collections.sort 使用的内部逻辑。如果是的话，请证明上述观点是正确的。

我也相信没有必要返回 -1,1 或 0 对。上面的实现也是有效的吧？我遇到的一个问题是，如果我们返回 1，列表如何根据升序或降序对项目进行排序？我认为它的差异考虑并根据差异对其进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:50:19.947

考虑两个[Comparable的文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)

> 该接口对实现它的每个类的对象进行了总排序。这种排序称为类的自然排序，类的 compareTo 方法称为其自然比较方法。

和[比较器](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

> 一个比较函数，它对某些对象集合进行总排序。比较器可以传递给排序方法（例如 Collections.sort 或 Arrays.sort），以允许精确控制排序顺序。比较器还可用于控制某些数据结构（例如排序集或排序图）的顺序，或为不具有自然排序的对象集合提供排序。

一个`Comparable`对象可以通过将自己与另一个对象进行比较来确定其顺序（自然排序），而 a`Comparator`是一个知道如何比较两个对象并确定它们的特定顺序的对象。这里的区别在于谁负责比较。

自然排序强加了一个定义的顺序，`compareTo`但是如果你想改变那个顺序，或者更糟糕的是，没有定义的比较逻辑怎么办？这是`Comparator`派上用场的地方，因为您可以根据可以通过发出 new 动态切换的不同比较对集合进行排序`Comparator`，而不是一些讨厌的逻辑，您应该告诉`Comparable`对象“嘿，现在您根据名称而不是年龄排序”。

关于比较结果之间的差异，对每个对象进行检查。例如，取三个年龄`10`为`15`和的人`20`。`15`与 比较时返回 1，`10`但与 比较`-1`时返回`20`，定义三个人的顺序。

选择适合您需求的方法。如果您的比较逻辑是稳定的并且将来不会更改，您可能希望拥有`Comparable`对象，但如果您需要根据不同的标准对集合进行排序，您应该选择`Comparator`s.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:04:15.370

在 Java 中，一个类型总是只能实现一次接口，也就是说你不能说

```
public class Foo implements Comparable<Foo>, Comparable<String> {} 
```

这意味着 的实例`Foo`将始终以某种方式排序 - 您不能让排序在特定上下文中以一种方式运行，而在另一个上下文中以不同方式运行。

`Comparator`另一方面，它独立于它可以排序的实例。`Comparator`一个类型可以有尽可能多的 s （而不是只有一个`Comparable`）。如果您需要某种排序，只需创建一个新的即可`Comparator`。

`Comparator`编写一个对不同类型的实例进行分类的实例也很容易——这很难做到，`Comparable`因为所有涉及的实例都必须相互了解：任何实例都可以获取任何其他实例作为参数，`compareTo()`并且它们必须实现一些通用接口， ETC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:53:07.217

对 java.util.Collections javadocs 的快速浏览提供了以下信息：

> public static void sort(List list) - 根据其元素的自然顺序将指定列表按升序排序。**列表中的所有元素都必须实现 Comparable 接口**。此外，列表中的所有元素必须相互可比较（即，e1.compareTo(e2) 不得为列表中的任何元素 e1 和 e2 抛出 ClassCastException）。
> 
> public static void sort(List list, Comparator c) - 根据指定比较器的顺序对指定列表进行排序。**列表中的所有元素必须使用指定的比较器进行相互比较**（即，c.compare(e1, e2) 不得为列表中的任何元素 e1 和 e2 抛出 ClassCastException）。

可以推断，`sort(List list)`然后使用Comparable接口并`sort(List list, Comparator c)`使用比较器。

要回答您的最后一个问题，以您描述的方式使用这两种方法没有区别......使用这两种方法的目的是让您可以以不同的方式比较对象，而不是使用不同的实现以相同的方式比较对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-06T20:43:36.757

当有些人使用 Comparable 接口时，我总是感到害怕，因为它几乎总是错误的选择。Comparable 用于定义自然顺序，而不是用于排序。Java 知道必须履行的 equals-hashcode 契约。大多数开发人员都知道。但是还有一个重要的合同：平等可比合同。

这意味着：

a.equals(b) <==> a.compareTo(b) == 0

在您的示例中，一个 TreeSet 中不能有两个年龄相同的不同人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T16:58:05.367

以这种方式考虑...您有一个具有一个整数的**IntegerWrapper**类，并且您在该类中实现了**Comparable 。**因此，当使用 Collection.sort 对这些进行排序时...它将按升序为您提供对象...

但是当您想更改此顺序并希望**降序**时，您必须实现**比较器**以按所需顺序对它们进行排序......

# c# - XML 的 C# 结构

> ID：13707652
> 
> 赞同：0
> 
> 时间：2012-12-04T16:41:54.467
> 
> 标签：c#, serialization

我有一个来自外部源的 xml 文档，所以我无法更改结构。我需要将其序列化为 C# 对象：-

```
<vehicles>
   <Car>
       <Vauxhall>
          <Driver>
             <Name>John</Name>
          </Driver>
   </Car>
   <Car>
       <Ford>
         <Driver>
            <Name>Jack</Name>
         </Driver>
       </Ford>
   </Car>
</vehicles> 
```

任何人都可以为上述简单的 xml 文档提供 C# 反序列化类的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:51:29.147

```
Public Class Wheels
{
  <XmlAttribute()>
  public string CarMake;
  //If you want to have a value in your "Wheels"
  <XmlText()>
  public string Value;
} 
```

设置`CarMake`为沃克斯豪尔，你应该得到：

```
<Vehicle>
  <Car CarMake="Vauxhall"\>
<Vehicle> 
```

例如，如果你设置`Value`你的，你会得到：`Wheels``Astra`

```
<Vehicles>
  <Car CarMake="Vauxhall">Astra<Car/>
<Vehicles> 
```

**编辑**

看到你想要的整体结构后，你会有这样的东西：

```
public class Test
{
   <XmlArray("Vehicles")>
   <XmlArrayItem("Car")>
   public List<Wheel> Wheels = new List<Wheel>();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:09:16.123

您应该能够创建一个通用的 Car 类，然后为每个特定的品牌隐含该类 - 很糟糕，但是如果您无法更改 xml，我不知道您还能怎么做

```
public class Car
{
    private Driver _driver;

    public Driver Driver
    {
        get
        {
            return _driver;
        }
        set
        {
            _driver = value;
        }
    }
}

public class Driver
{
    private string _name;

    public string Name
    {
        get
        {
            return _name;
        }
        set
        {
            _name = value;
        }
    }
}

public class Vauxhall : Car
{
}

public class Ford : Car
{
} 
```

# android - android NDK 中使用 NativeActivity 的键盘输入

> ID：13707664
> 
> 赞同：5
> 
> 时间：2012-12-04T16:42:32.387
> 
> 标签：android, input, keyboard, android-ndk, native-activity

我正在寻找一种从 Android NativeActivity 的软件键盘获取输入的方法。

我发现[了这个](https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/Tk3g00wLKhk)，它提供了一些关于如何取出软件键盘的示例代码（并且它可以工作），但缺乏一些兴趣点：

1.  显示后如何获取键盘的输入。
2.  当用户使用返回按钮关闭键盘时，如何避免应用程序崩溃。

如果有人对这些问题中的任何一个有任何答案，或者更好的是显示不需要使用 JNI 的键盘的更简单方法，请分享。

提前致谢，

海梅

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:10:48.307

如果有人想知道，您可以以通常的方式访问键盘输入，在分配给您获得 AInputEvents 的 struct android_app 的回调中：

```
if (AInputEvent_getType(event) == AINPUT_EVENT_TYPE_KEY)
{
lint32_t key_val = AKeyEvent_getKeyCode(event);
fprintf("Received key event: %d\n", key_val);

if((key_val >= AKEYCODE_A && key_val <= AKEYCODE_Z))
{
    fprintf("Got a letter");
}
return 0;
} 
```

您还可以通过检查 AKEYCODE_BACK 或 AKEYCODE_VOLUME_UP 等关键代码来访问此处的其他“硬件”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T19:16:25.730

另一个需要检查的重要事项是按键动作（向上键、向下键或混合键），否则您将对 keyup 和 keydown 做出反应。以下是检查密钥的方法：

```
if(AKeyEvent_getAction(event) == AKEY_EVENT_ACTION_UP)
    fprintf("key up!"); 
```

# prolog - Prolog检查列表中的数字是有序的

> ID：13707665
> 
> 赞同：3
> 
> 时间：2012-12-04T16:42:32.533
> 
> 标签：prolog

我希望能够获取一个数字列表并获得最大的有序数字序列。例如：

```
?- in_order([1,2,3,4,5],N).
N = 5\.                              % expected result

?- in_order([1,2,5,6,7,8,4],N).
N = 4\.                              % expected result 
```

到目前为止，我已经生成了一些基本代码来计算数字序列的长度，但是一旦列表为空，它就会回溯，因此返回的数字 N 与列表中的第一个元素相同。我知道我需要停止回溯，但似乎无法做到。有人会很好地指出我正确的方向吗？

到目前为止我的代码（虽然有点老套）：

```
in_order([],_) :-
   !.
in_order([H|T],N):-
   (  var(N), 
      N is H 
   ;  true
   ),
   H = N,
   M is N+1,
   in_order(T,M). 
```

我确实知道我当前的解决方案在给出的第二个示例中不起作用，并且该方面的指针将再次有帮助，因为我不太确定如何解决该方面。我正在使用 SICStus Prolog。

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-25T17:23:11.353

让我称之为关系`zs_maxInOrder/2`，它基于[clpfd](https://sicstus.sics.se/sicstus/docs/latest4/html/sicstus.html/lib_002dclpfd.html) 并使用[具体化约束](https://sicstus.sics.se/sicstus/docs/latest4/html/sicstus.html/Reified-Constraints.html)：

```
:- use_module(library(clpfd)).

zs_maxInOrder([]    ,0).
zs_maxInOrder([Z|Zs],N) :-
    zs_prev_n_max0_max(Zs,Z,1,1,N).            % use "lagging" 

zs_prev_n_max0_max([]     ,_ ,_ ,M ,M).
zs_prev_n_max0_max([Z1|Zs],Z0,N0,M0,M) :-
    Z1 #= Z0 + 1 #<=> B,                       % with SWI-Prolog use `(#<==>)/2`
    N1 #= N0 * B + 1,
    M1 #= max(M0,N1),
    zs_prev_n_max0_max(Zs,Z1,N1,M1,M). 
```

让我们使用 SICStus Prolog 4.3.1 来看看它的实际效果：

```
?- zs_maxInOrder([ 1,2,3,4,5 ],N)。
N = 5 ? ;
不
?- zs_maxInOrder([1,2, 5,6,7,8 ,4],N)。
N = 4 ? ;
不

```

角落案例呢？

```
?- zs_maxInOrder([1],N).
N = 1 ? ;
no
?- zs_maxInOrder([],N).
N = 0 ? ;
no 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:10:03.750

你的尝试失败了，因为你混合了不同的东西。当你写

```
N is H 
```

您基本上是在输出列表的元素之一。这是你在任何情况下都不想做的事情。基本情况也是错误的，它应该是“一个空列表的有序序列为零”。

尝试使用“累加器”参数来跟踪以当前头 H 终止的连续元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:44:58.790

这是该问题的一个相当强力的解决方案：P（我知道我会受到批评，但我无法抗拒使用高阶谓词）。

```
my_prefix(List,Prefix) :- 
   append(Prefix,_,List).

my_suffix(List,Suffix) :- 
   append(_,Suffix,List).

my_sublist(List,Sublist) :-
   my_suffix(List,Suffix),
   my_prefix(Suffix,Sublist).

all_sublists(List,AllSublists) :- 
   findall(Sub,my_sublist(List,Sub),AllSublists).

good_list([]) :- 
   !.
good_list([H]) :- 
   !.
good_list([H1,H2|T]) :- 
   H1 is H2-1,
   good_list([H2|T]),
   !.

in_order(List,Length) :-
   all_sublists(List,AllSublists),
   findall(L,(member(Sublist,AllSublists),
              good_list(Sublist),
              length(Sublist,L)),
             InOrderSizes),
   max_list(InOrderSizes,Length). 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:27:18.640

> “一个空列表的有序序列为零”。

感谢那。它让我走上了正确的轨道（我认为）

到目前为止，这是我的解决方案：

```
in_order([], _, 0).
in_order([H|T], Prev, N):-
  % Split the list
  in_order(T, H, M),
  % Increment the expected Head value
  H1 is Prev + 1,
    (
      H = H1,
      N is M + 1
    ;
      M1 is M + 1,
      format('M1 is ~w~n', [M1]),
      N is 0
  ). 
```

我添加了格式，以便我可以看到在最后阶段打印的内容，并且我得到了输入 [1,2,5,6,7,8,4] 的值 1 和 4 - 这是正确的。谓词返回 2（序列的最后一个长度），但是当我回溯以尝试获得更多答案时，我没有得到值 4 或 1。我认为我非常接近答案，任何额外的最终帮助都是赞赏。

非常感谢

# syntax - 如何使用 crontab 自动执行反向隧道：语法错误

> ID：13707667
> 
> 赞同：1
> 
> 时间：2012-12-04T16:42:34.850
> 
> 标签：syntax, ssh, sh, tunnel, raspberry-pi

我正在关注有关如何运行反向 ssh 隧道的教程，该教程位于[http://wiki.fabelier.org/index.php?title=Permanent_Reverse_SSH_Tunneling](http://wiki.fabelier.org/index.php?title=Permanent_Reverse_SSH_Tunneling) 我遇到的问题是运行 tunneling.sh 脚本时：

```
a=(`ps -ef | grep 19999 | grep -v grep`)
if [ ! "$a" ]; then
    ssh -fN -R 19999:localhost:22 <middle-usename>@<middle-hostname>
fi 
```

我收到此错误：

```
tunnels.sh 1: tunnels.sh: Syntax error: "(" unexpected 
```

我是 linux 中 shell 脚本的新手，所以请善待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:21:57.100

这有一个语法错误：

```
a=(`ps -ef | grep 19999 | grep -v grep`) 
```

它应该是：

```
a=`ps -ef | grep 19999 | grep -v grep` 
```

那里不需要括号，尽管有另一种语法来完成同样的事情：

```
a=$(ps -ef | grep 19999 | grep -v grep) 
```

请注意添加的`$`和不再需要反引号。

# c# - 多行花括号的 StyleCop 规则

> ID：13707673
> 
> 赞同：5
> 
> 时间：2012-12-04T16:42:49.303
> 
> 标签：c#, coding-style, stylecop

StyleCop 中的 SA1503 在花括号方面是一个全有或全无的交易。我希望能够允许以下代码：

```
if (x == 3) return true; 
```

但禁止以下行为：

```
if (x == 3)
    return true;

if (x == 3)
    foreach (var w in widgets)
        x++; 
```

所以基本上，没有大括号的同一行好，没有大括号的多行不好。

我是编写自定义 StyleCop 规则的新手，我正在努力从哪里开始。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:23:46.353

我想要相同的风格，不得不关闭规则`StatementMustNotBeOnSingleLine`并`CurlyBracketsMustNotBeOmitted`支持它。这现在支持单线方案，但不幸的是不检查多线方案。

但是我不认为这应该是新规则，而是对当前规则的更改（可能是可配置控制的）。[我建议在StyleCop 网站](http://stylecop.codeplex.com/workitem/list/basic)上提出问题，如果你喜欢游戏，请获取[源代码](http://stylecop.codeplex.com/SourceControl/changeset/view/8b3831e38d66)并进行更改。文档中有一个[开发人员指南](http://stylecop.codeplex.com/documentation)，可以帮助您入门。

# linux - 改变无线信标间隔

> ID：13707674
> 
> 赞同：0
> 
> 时间：2012-12-04T16:42:52.730
> 
> 标签：linux, ubuntu

是否有任何可能的方法来更改 linux 中的信标间隔。我有使用 ath9k 驱动程序的 atheros 芯片组。我知道可以使用 iw 命令来设置信标间隔，但我仍然对命令的使用感到困惑。另外我怎么知道当前的信标间隔

我想要的是使用 ubuntu 12.04 和低于正常值的信标间隔在两个设备之间建立一个 ad hoc 网络。

这是我运行 iw 命令时得到的输出。

```
iw iwphy2 set beacon-interval 25
Usage:  iw [options] command
Options:
    --debug     enable netlink debugging
    --version   show version (3.2)
Commands:
    help
    event [-t] [-r] [-f]
    phy
    list
    phy <phyname> info
    dev
    dev <devname> info
    dev <devname> del
    dev <devname> interface add <name> type <type> [mesh_id <meshid>] [4addr on|off] [flags <flag>*]
    phy <phyname> interface add <name> type <type> [mesh_id <meshid>] [4addr on|off] [flags <flag>*]
    dev <devname> ibss join <SSID> <freq in MHz> [fixed-freq] [<fixed bssid>] [beacon-interval <TU>] [basic-rates <rate in Mbps,rate2,...>] [mcast-rate <rate in Mbps>] [key d:0:abcde]
    dev <devname> ibss leave
    dev <devname> station dump
    dev <devname> station set <MAC address> vlan <ifindex>
    dev <devname> station set <MAC address> plink_action <open|block>
    dev <devname> station del <MAC address>
    dev <devname> station get <MAC address>
    dev <devname> survey dump
    dev <devname> mesh leave
    dev <devname> mesh join <mesh ID> [<param>=<value>]*
    dev <devname> mpath dump
    dev <devname> mpath set <destination MAC address> next_hop <next hop MAC address>
    dev <devname> mpath new <destination MAC address> next_hop <next hop MAC address>
    dev <devname> mpath del <MAC address>
    dev <devname> mpath get <MAC address>
    dev <devname> scan [-u] [freq <freq>*] [ies <hex as 00:11:..>] [ssid <ssid>*|passive]
    dev <devname> scan trigger [freq <freq>*] [ies <hex as 00:11:..>] [ssid <ssid>*|passive]
    dev <devname> scan dump [-u]
    reg get
    reg set <ISO/IEC 3166-1 alpha2>
    dev <devname> connect [-w] <SSID> [<freq in MHz>] [<bssid>] [key 0:abcde d:1:6162636465]
    dev <devname> disconnect
    dev <devname> link
    dev <devname> offchannel <freq> <duration>
    dev <devname> cqm rssi <threshold|off> [<hysteresis>]
    phy <phyname> wowlan show 
    phy <phyname> wowlan disable 
    phy <phyname> wowlan enable [any] [disconnect] [magic-packet] [gtk-rekey-failure] [eap-identity-request] [4way-handshake] [rfkill-release] [patterns <pattern>*]
    dev <devname> roc start <freq> <time>
    phy <phyname> set antenna <bitmap> | all | <tx bitmap> <rx bitmap>
    dev <devname> set txpower <auto|fixed|limit> [<tx power in mBm>]
    phy <phyname> set txpower <auto|fixed|limit> [<tx power in mBm>]
    phy <phyname> set distance <distance>
    phy <phyname> set coverage <coverage class>
    phy <phyname> set netns <pid>
    phy <phyname> set rts <rts threshold|off>
    phy <phyname> set frag <fragmentation threshold|off>
    dev <devname> set channel <channel> [HT20|HT40+|HT40-]
    phy <phyname> set channel <channel> [HT20|HT40+|HT40-]
    dev <devname> set freq <freq> [HT20|HT40+|HT40-]
    phy <phyname> set freq <freq> [HT20|HT40+|HT40-]
    phy <phyname> set name <new name>
    dev <devname> set peer <MAC address>
    dev <devname> set 4addr <on|off>
    dev <devname> set type <type>
    dev <devname> set meshid <meshid>
    dev <devname> set monitor <flag>*
    dev <devname> set mesh_param <param>=<value> [<param>=<value>]*
    dev <devname> set power_save <on|off>
    dev <devname> set bitrates [legacy-<2.4|5> <legacy rate in Mbps>*]
    dev <devname> get mesh_param [<param>]
    dev <devname> get power_save <param>

You can omit the 'phy' or 'dev' if the identification is unique,
e.g. "iw wlan0 info" or "iw phy0 info". (Don't when scripting.)

Do NOT screenscrape this tool, we don't consider its output stable. 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:55:51.777

在 ad-hoc 模式下，除非离开并再次加入，否则您无法更改信标间隔。

```
iw dev <devname> ibss join <SSID> <freq in MHz> [HT20|HT40+|HT40-|NOHT] [fixed-freq] [<fixed bssid>] [beacon-interval <TU>] [basic-rates <rate in Mbps,rate2,...>] [mcast-rate <rate in Mbps>] [key d:0:abcde] 
```

在 AP 模式下，hostapd 为您设置时间间隔：在您的 hostapd.conf 中设置 **beacon_int=1000** ，时间间隔为 1000ms=1s。

而在站模式下，间隔是通过 wpa_supplicant 的设置来设置的。

# ios - ShareKit 链接器失败

> ID：13707677
> 
> 赞同：-3
> 
> 时间：2012-12-04T16:42:56.103
> 
> 标签：ios, xcode, sharekit

导入 ShareKit sdk 时遇到链接器问题：

![显示错误消息的 IDE 屏幕截图](../Images/07e81a8ff296a9c3f58fa723c4635b81.png)

我不知道问题是什么。

![显示文件夹结构的特写截图](../Images/97073ea21cb9bb7ff885652773755c91.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:39:48.583

改用[Sharekit2.0](https://github.com/ShareKit/ShareKit)并按照说明安装...应该没问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:20:59.590

您必须将 .m 文件链接到您的项目，如下所示：

这主要是我对“arm7的未定义符号......”的问题

所以你要做的是：转到目标摘要 -> 构建阶段 -> 编译源 -> 添加已添加的 .m 文件。 ![在此处输入图像描述](../Images/f131ef3696ad2a9678f70e04cce8f930.png)

希望有帮助。

# sql - 无法执行存储过程以插入到链接服务器上的表中

> ID：13707678
> 
> 赞同：4
> 
> 时间：2012-12-04T16:42:59.233
> 
> 标签：sql, sql-server-2008

我在服务器 A 上有一个表 A，它有一组用户数据列。我需要将它插入到服务器 B 上的表 B 中。我编写了一个存储过程来每晚运行这个插入语句（下面的 SQL）。如果我选择并执行该过程的任何部分，那么它工作正常，但如果我尝试作为一个整体执行该过程，那么它会给我一个错误：

> *对象名称 ServerB.DatabaseB.dbo.TableB 具有超过最大前缀数。最大值为 2。*

T-SQL 语句：

```
IF EXISTS (SELECT * FROM SERVERA.DatabaseA.dbo.TableA)
BEGIN
 TRUNCATE TABLE SERVERB.DatabaseB.dbo.TableB
 INSERT INTO 
    SERVERB.DatabaseB.dbo.TableB
 SELECT 
   Firstname,
   Surname,
   Username
 FROM 
   SERVERA.DatabaseA.dbo.TableA
END 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:22:41.267

[根据手册](http://msdn.microsoft.com/en-us/library/ms177570.aspx "TRUNCATE TABLE (Transact-SQL)")`TRUNCATE TABLE`，命令的语法是这样的：

```
TRUNCATE TABLE 
    [ { database_name .[ schema_name ] . | schema_name . } ]
    table_name
[ ; ] 
```

如您所见，该命令仅支持由不超过三个组件组成的名称，即您不能使用 . 指定链接服务器名称`TRUNCATE TABLE`。

一种解决方案可能是使用对 的远程调用`sp_executesql`，如下所示：

```
EXECUTE SERVERB.DatabaseB.sys.sp_executesql N'TRUNCATE TABLE dbo.TableB'; 
```

# tomcat - 尝试将 mod_proxy 与 httpd 和 tomcat 一起使用

> ID：13707683
> 
> 赞同：0
> 
> 时间：2012-12-04T16:43:04.227
> 
> 标签：tomcat, apache, mod-proxy

我一直在尝试将 mod_proxy 与 httpd 和 tomcat 一起使用...

我在 VirtualBox 上运行 Scientific Linux，上面有 httpd 和 tomcat 6。我制作了两个 tomcat6 节点。

我按照本指南进行了 10 次，但仍然无法让 tomcat 的第二个节点工作..

[http://www.richardnichols.net/2010/08/5-minute-guide-clustering-apache-tomcat/](http://www.richardnichols.net/2010/08/5-minute-guide-clustering-apache-tomcat/)

这是我的 http.conf 文件中的行

```
<Proxy balancer://testcluster stickysession=JSESSIONID>
BalancerMember ajp://127.0.0.1:8009 min=10 max=100 route=node1 loadfactor=1
BalancerMember ajp://127.0.0.1:8109 min=10 max=100 route=node2 loadfactor=1
</Proxy>

ProxyPass /examples balancer://testcluster/examples

<Location /balancer-manager>
SetHandler balancer-manager
AuthType Basic
AuthName "Balancer Manager"
AuthUserFile "/etc/httpd/conf/.htpasswd"
Require valid-user
</Location> 
```

现在这是我来自 node1 的 server.xml

```
<?xml version='1.0' encoding='utf-8'?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!-- Note:  A "Server" is not itself a "Container", so you may not
     define subcomponents such as "Valves" at this level.
     Documentation at /docs/config/server.html
 -->
<Server port="8005" shutdown="SHUTDOWN">

  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener" />
  <!-- Prevent memory leaks due to use of particular java/javax APIs-->
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
  <!-- JMX Support for the Tomcat server. Documentation at /docs/non-existent.html -->
  <Listener className="org.apache.catalina.mbeans.ServerLifecycleListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />

  <!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource name="UserDatabase" auth="Container"
              type="org.apache.catalina.UserDatabase"
              description="User database that can be updated and saved"
              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
              pathname="conf/tomcat-users.xml" />
  </GlobalNamingResources>

  <!-- A "Service" is a collection of one or more "Connectors" that share
       a single "Container" Note:  A "Service" is not itself a "Container", 
       so you may not define subcomponents such as "Valves" at this level.
       Documentation at /docs/config/service.html
   -->
  <Service name="Catalina">

    <!--The connectors can use a shared executor, you can define one or more named thread pools-->
    <!--
    <Executor name="tomcatThreadPool" namePrefix="catalina-exec-" 
        maxThreads="150" minSpareThreads="4"/>
    -->

    <!-- A "Connector" represents an endpoint by which requests are received
         and responses are returned. Documentation at :
         Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
         Java AJP  Connector: /docs/config/ajp.html
         APR (HTTP/AJP) Connector: /docs/apr.html
         Define a non-SSL HTTP/1.1 Connector on port 8080

    <Connector port="8080" protocol="HTTP/1.1" 
               connectionTimeout="20000" 
               redirectPort="8443" />
    -->
    <!-- A "Connector" using the shared thread pool-->
    <!--
    <Connector executor="tomcatThreadPool"
               port="8080" protocol="HTTP/1.1" 
               connectionTimeout="20000" 
               redirectPort="8443" />
    -->           
    <!-- Define a SSL HTTP/1.1 Connector on port 8443
         This connector uses the JSSE configuration, when using APR, the 
         connector should be using the OpenSSL style configuration
         described in the APR documentation -->
    <!--
    <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS" />
    -->

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />

    <!-- An Engine represents the entry point (within Catalina) that processes
         every request.  The Engine implementation for Tomcat stand alone
         analyzes the HTTP headers included with the request, and passes them
         on to the appropriate Host (virtual host).
         Documentation at /docs/config/engine.html -->

    <!-- You should set jvmRoute to support load-balancing via AJP ie :
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="jvm1">         
    --> 
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="node1">

      <!--For clustering, please take a look at documentation at:
          /docs/cluster-howto.html  (simple how to)
          /docs/config/cluster.html (reference documentation) -->
      <!--
      <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>
      -->        

      <!-- The request dumper valve dumps useful debugging information about
           the request and response data received and sent by Tomcat.
           Documentation at: /docs/config/valve.html -->
      <!--
      <Valve className="org.apache.catalina.valves.RequestDumperValve"/>
      -->

      <!-- This Realm uses the UserDatabase configured in the global JNDI
           resources under the key "UserDatabase".  Any edits
           that are performed against this UserDatabase are immediately
           available for use by the Realm.  -->
      <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
             resourceName="UserDatabase"/>

      <!-- Define the default virtual host
           Note: XML Schema validation will not work with Xerces 2.2.
       -->
      <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"  
               prefix="localhost_access_log." suffix=".txt" pattern="common" resolveHosts="false"/>
        -->

      </Host>
    </Engine>
  </Service>
</Server> 
```

现在这里是来自 node2 的 server.xml 文件

```
<?xml version='1.0' encoding='utf-8'?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!-- Note:  A "Server" is not itself a "Container", so you may not
     define subcomponents such as "Valves" at this level.
     Documentation at /docs/config/server.html
 -->
<Server port="8105" shutdown="SHUTDOWN">

  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener" />
  <!-- Prevent memory leaks due to use of particular java/javax APIs-->
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
  <!-- JMX Support for the Tomcat server. Documentation at /docs/non-existent.html -->
  <Listener className="org.apache.catalina.mbeans.ServerLifecycleListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />

  <!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource name="UserDatabase" auth="Container"
              type="org.apache.catalina.UserDatabase"
              description="User database that can be updated and saved"
              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
              pathname="conf/tomcat-users.xml" />
  </GlobalNamingResources>

  <!-- A "Service" is a collection of one or more "Connectors" that share
       a single "Container" Note:  A "Service" is not itself a "Container", 
       so you may not define subcomponents such as "Valves" at this level.
       Documentation at /docs/config/service.html
   -->
  <Service name="Catalina">

    <!--The connectors can use a shared executor, you can define one or more named thread pools-->
    <!--
    <Executor name="tomcatThreadPool" namePrefix="catalina-exec-" 
        maxThreads="150" minSpareThreads="4"/>
    -->

    <!-- A "Connector" represents an endpoint by which requests are received
         and responses are returned. Documentation at :
         Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
         Java AJP  Connector: /docs/config/ajp.html
         APR (HTTP/AJP) Connector: /docs/apr.html
         Define a non-SSL HTTP/1.1 Connector on port 8080

    <Connector port="8080" protocol="HTTP/1.1" 
               connectionTimeout="20000" 
               redirectPort="8443" />
    -->
    <!-- A "Connector" using the shared thread pool-->
    <!--
    <Connector executor="tomcatThreadPool"
               port="8080" protocol="HTTP/1.1" 
               connectionTimeout="20000" 
               redirectPort="8443" />
    -->           
    <!-- Define a SSL HTTP/1.1 Connector on port 8443
         This connector uses the JSSE configuration, when using APR, the 
         connector should be using the OpenSSL style configuration
         described in the APR documentation -->
    <!--
    <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS" />
    -->

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port="8109" protocol="AJP/1.3" redirectPort="8443" />

    <!-- An Engine represents the entry point (within Catalina) that processes
         every request.  The Engine implementation for Tomcat stand alone
         analyzes the HTTP headers included with the request, and passes them
         on to the appropriate Host (virtual host).
         Documentation at /docs/config/engine.html -->

    <!-- You should set jvmRoute to support load-balancing via AJP ie :
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="jvm1">         
    --> 
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="node2">

      <!--For clustering, please take a look at documentation at:
          /docs/cluster-howto.html  (simple how to)
          /docs/config/cluster.html (reference documentation) -->
      <!--
      <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>
      -->        

      <!-- The request dumper valve dumps useful debugging information about
           the request and response data received and sent by Tomcat.
           Documentation at: /docs/config/valve.html -->
      <!--
      <Valve className="org.apache.catalina.valves.RequestDumperValve"/>
      -->

      <!-- This Realm uses the UserDatabase configured in the global JNDI
           resources under the key "UserDatabase".  Any edits
           that are performed against this UserDatabase are immediately
           available for use by the Realm.  -->
      <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
             resourceName="UserDatabase"/>

      <!-- Define the default virtual host
           Note: XML Schema validation will not work with Xerces 2.2.
       -->
      <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"  
               prefix="localhost_access_log." suffix=".txt" pattern="common" resolveHosts="false"/>
        -->

      </Host>
    </Engine>
  </Service>
</Server> 
```

我不知道它是什么。但我已经尝试了好几天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:07:45.683

这是 Scientific Linux 6.2 版的一个问题，我必须通过执行以下命令告诉它停止阻塞端口

设置强制 0

然后就可以了。

# sql-server - Biztalk 适配器包安装 - 没有看到 WCF-SQL 适配器

> ID：13707685
> 
> 赞同：7
> 
> 时间：2012-12-04T16:43:09.957
> 
> 标签：sql-server, installation, biztalk

我想使用 WCF-SQL 适配器将数据从 BizTalk 推送到 SQL Server。我从这里安装了 WCF LOB 适配器 SDK SP2，从[这里](http://www.microsoft.com/en-us/download/details.aspx?id=2755)[安装](http://www.microsoft.com/en-us/download/details.aspx?id=23015)了 BizTalk Adapter Pack 2.0 。根据安装说明，我对 LOB SDK 进行了自定义安装，并选择了要安装的 BizTalk Server Addin。我正在使用 BizTalk 2010。

安装这两个并重新启动后，当我进入 BizTalk 管理控制台时，我看不到平台设置 > 适配器下列出的 WCF-SQL 适配器。如果我尝试添加新适配器，则适配器下拉列表为空。

为什么安装适配器包后看不到 WCF-SQL 适配器？我需要做什么才能成功完成安装并开始使用它？

**更新：**
我还尝试了 Biztalk 2010 ISO 的安装程序。他们俩都说他们检测到旧版本并会更换它。但是，安装并重新启动后，情况仍与上述相同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T18:34:53.477

问题是我正在安装 64 位版本的适配器包，但我使用的是 32 位 BizTalk，因此我必须安装 32 位适配器包。之后，WCF-SQL 适配器出现在列表中。

# windows - 如何在构建解决方案时防止 Windows 进入睡眠状态？

> ID：13707688
> 
> 赞同：5
> 
> 时间：2012-12-04T16:43:19.997
> 
> 标签：windows, scripting, msbuild

我希望在构建解决方案时我的系统不会进入睡眠状态，就像看电影时一样，但完成后它会像往常一样进入睡眠状态。而且我不想在电源选项 20 分钟后禁用睡眠。

是否有一个解决方案，比如一个简短的脚本，可能会执行一个 cmd 命令并防止在命令期间进入睡眠状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:46:11.593

您可以创建一个名为“nosleep.vbs”的 vbscript 文件

```
 Set osShell = CreateObject("Wscript.Shell")
    thecmd = " powercfg.exe /change ""always on"" /monitor-timeout-ac 20"
    osShell.Run "cmd " & thecmd 
```

在 Visual Studio 中，您可以调用此 nosleep.vbs 代码。

您可以在预构建和构建后步骤中执行此操作。

我假设您以管理员身份运行 Visual Studio。

根据操作系统版本，参数会有所不同。

你可以在这里获得更多信息

```
 http://technet.microsoft.com/en-us/library/cc748940(v=WS.10) 
```

# cakephp - 使用输入帮助器在 saveAll() 上的 CakePHP 无效数据格式

> ID：13707692
> 
> 赞同：0
> 
> 时间：2012-12-04T16:43:28.193
> 
> 标签：cakephp

我第一次使用 CakePHP(2.2.3)，我遇到了这个问题。我用 Input helper 创建了一个简单的表单来尝试这个`saveAll()`方法。

这是表单代码。没什么大不了。

```
$this->Form->create('Section');
$this->Form->input("Section.0.title");
$this->Form->input("Section.1.title");
$this->Form->end('Save'); 
```

根据 CakePHP 的文档，为了做 a `saveAll()`，你需要一个这样的数组：

```
Array
(
    [0] => Array
        (
            [Section] => Array
                (
                    [title] => title 1
                )
        )
    [1] => Array
        (
            [Section] => Array
                (
                    [title] => title 2
                )

        )

) 
```

但是，如果我 dump `$this->request->data`，我从表单中得到的数组是这样的：

```
Array
(
    [Section] => Array
        (
            [0] => Array
                (
                    [title] => title 1
                )
            [1] => Array
                (
                    [title] => title 2
                )
        )
) 
```

我猜想在如此简单的情况下使用 Input 助手时，`$this->request->data`数组应该具有有效的格式。所以我想我错过了一些东西，但我找不到什么。

有没有办法以有效格式获取数组，还是我需要创建一个自定义方法来重写它？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:29:33.390

为了保存单个模型的多条记录，数组应该是数字索引的，所以`$this->Section->saveAll($this->request->data['Section']);`会为你做

# angularjs - AngularJS - 通过字符串获取控制器功能

> ID：13707693
> 
> 赞同：4
> 
> 时间：2012-12-04T16:43:29.360
> 
> 标签：angularjs

我正在使用该`ng-include`指令，该指令将具有基于范围内某些变量的动态模板和控制器。目前我有一张这样的地图。

```
$scope.map = {
    'key1': {
        controller: Ctrl1,
        templateUrl: 'tmpl1.html'
 }, 
'key12': {
        controller: Ctrl2,
    templateUrl: 'tmpl1.html'
    }
}

...

<div ng-include src="map[key].templateUrl" ng-controller="map[key].controller"></div> 
```

但是，我想丢弃这张地图，而是通过字符串生成 templateUrl 和控制器。以下返回控制器*对象*，但我需要返回函数。

```
var ctrlObj = angular.module('moduleName').controller('ControllerName') 
```

**编辑 1**

澄清：

> 但是，我想丢弃这张地图，而是通过字符串生成 templateUrl 和控制器

基本上我会在页面上设置“子控制器”，以便它成为配置的约定。具有所有子控制器将共享的信息的主控制器：FooCtrl 将是“主”控制器，而 FooBarCtrl、FooBarSubCtrl 将是子控制器。我的目标是创建一个函数，将“Bar”解析为“FooBarCtrl”，并从中获取适当的控制器函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:10:00.223

我没有看到任何微不足道的方法来实现这一点，但是我可以想象两种潜在的解决方案：

1.  修改 ngInclude 指令，使其接受 src 表达式，解析它以获取控制器名称（模板 Foo.html => 控制器 FooCtrl），并像在 ngView 中所做的那样在元素上设置控制器（[https://github.com/ angular/angular.js/blob/master/src/ng/directive/ngView.js#L149](https://github.com/angular/angular.js/blob/master/src/ng/directive/ngView.js#L149)）：

    ```
    controller = $controller(current.controller, {$scope: lastScope});
    element.contents().data('$ngControllerController', controller); 
    ```

2.  创建新指令，例如“ajpaz-controller”，它监视 src 表达式并将控制器链接到元素，方法与第 1 点相同。明显的优点是它可以在不修改原始 ng-include 的情况下完成。它会像这样工作

    ```
    <div ng-include src="templateUrl" ajpaz-controller> 
    ```

因此，您只需将当前的 templateUrl 保留在您的父控制器中。希望这是有道理的；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-26T11:27:40.730

我知道这个问题发布已经很久了，但是知道正确答案可能对其他人有用......

如果您通过正常方式注册，请使用 $controllerProvider：

```
app.controller('myController', function() {
    //blah, blah
}); 
```

您可以使用 $controller 服务来检索控制器功能，它就像一个 getter：

```
$controller('myController'); 
```

当然，不要忘记注入它... ;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:03:58.933

从以下stackoverflow链接。我相信它有这个问题的答案。

[使用由 angular.module().controller() 创建的 Angular 控制器](https://stackoverflow.com/questions/11211999/using-angular-controllers-created-with-angular-module-controller)

### 鉴于：

```
angular.module('App.controllers', [])
    .controller('home', function () {
        $scope.property = true;
    }]); 
```

### 回答：

```
// Try using a string identifier.

routeProvider.when('/', {templateUrl: 'partials/home.html', controller: 'home'}); 
```

# jmeter - 如何在 jmeter 中实现线程通信？

> ID：13707697
> 
> 赞同：0
> 
> 时间：2012-12-04T16:43:52.857
> 
> 标签：jmeter, jmeter-plugins

我正在使用 jmeter 为测试环境做一些前端数据加载。但是，在这种环境中，有一个特定的部分，如果两个线程同时访问应用程序，则会导致 502 错误。

我是 Jmeter 的新手，并且有一个运行良好的脚本，除了当我碰到线程并且当两个或多个线程在本节竞争时它们崩溃时。

有没有一种简单的方法可以让两个线程在 jmeter 中进行通信？我想要某种方式来实现某种锁，这样如果一个线程检测到另一个线程在同一个地方，它就会等待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:41:12.180

这种通信有自定义插件：[http ://code.google.com/p/jmeter-plugins/wiki/InterThreadCommunication](http://code.google.com/p/jmeter-plugins/wiki/InterThreadCommunication)

但是，我认为您的服务存在一些问题，因为具有如此低的并发限制是不好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:15:20.567

另一件事非常简单，就是在出错时选择“停止线程”或“开始下一个线程循环”（如您的 502）。竞争线程不会等待，它只会停止并重新启动，希望能够充分错开流程以允许更多所需的事务。那将是简单的方法，我想困难的方法是使用逻辑控制器和自定义 Javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:02:35.727

在第一个答案的基础上，您将需要“调整”您的 Apache 服务器以提高最大线程数，在正在运行的实例上配置负载平衡/故障转移，并在您使用时调整垃圾收集、堆大小等那里。我已经用 Apache 完成了所有这些事情，但我听说 Lightspeed 服务器是这些增强功能的标准配置，所以我真的会推荐 Lightspeed 服务器。

# c# - 如何通过 WCF 在 C# 中公开 SOAP Web 服务

> ID：13707699
> 
> 赞同：0
> 
> 时间：2012-12-04T16:43:55.247
> 
> 标签：c#, wcf, web-services, soap

对于我在学校的项目，我必须在 C# 应用程序中使用 WCF 创建一些 SOAP Web 服务，以使其与 Java EE 应用程序交互。

我找不到任何教程告诉我如何使用 WCF 执行此操作。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-11T07:59:02.053

# WCF 服务的 REST / SOAP 端点

您可以在两个不同的端点中公开服务。SOAP 可以使用支持 SOAP 的绑定，例如 basicHttpBinding，RESTful 可以使用 webHttpBinding。我假设您的 REST 服务将采用 JSON 格式，在这种情况下，您需要使用以下行为配置来配置两个端点

```
<endpointBehaviors>
    <behavior name="jsonBehavior">
        <enableWebScript/>
    </behavior>
</endpointBehaviors> 
```

您的场景中的端点配置示例是

```
<services>
    <service name="TestService">
        <endpoint address="soap" binding="basicHttpBinding" contract="ITestService"/>
        <endpoint address="json" binding="webHttpBinding"  behaviorConfiguration="jsonBehavior" contract="ITestService"/>
    </service>
</services> 
```

因此，该服务将在
[http://www.example.com/soap](http://www.example.com/soap) [http://www.example.com/json](http://www.example.com/json)
上可用 将 [WebGet] 应用于操作合约以使其成为 RESTful。例如

公共接口 ITestService { [OperationContract] [WebGet] string HelloWorld(string text) }

注意，如果 REST 服务不是 JSON 格式，则操作的参数不能包含复杂类型。
对于作为返回格式的普通旧 XML，这是一个适用于 SOAP 和 XML 的示例。

```
[ServiceContract(Namespace = "http://test")]
public interface ITestService
{
[OperationContract]
[WebGet(UriTemplate = "accounts/{id}")]
Account[] GetAccount(string id);
} 
```

REST 普通旧 XML 的 POX 行为

```
<behavior name="poxBehavior">
    <webHttp/>
</behavior> 
```

**端点**

```
<services>
    <service name="TestService">
        <endpoint address="soap" binding="basicHttpBinding" contract="ITestService"/>
        <endpoint address="xml" binding="webHttpBinding"  behaviorConfiguration="poxBehavior" contract="ITestService"/>
    </service>
</services> 
```

**服务将在**

[http://www.example.com/soap](http://www.example.com/soap) [http://www.example.com/xml](http://www.example.com/xml)
REST 请求在浏览器中尝试，
[http://www.example.com/xml/accounts/A123](http://www.example.com/xml/accounts/A123)

**添加服务引用后 SOAP 服务的 SOAP 请求客户端端点配置，**

```
<client>
    <endpoint address="http://www.example.com/soap" binding="basicHttpBinding"
  contract="ITestService" name="BasicHttpBinding_ITestService" />
</client> 
```

**在 C# 中**

```
TestServiceClient client = new TestServiceClient();
client.GetAccount("A123"); 
```

另一种方法是公开两个不同的服务合同，每个服务合同都有特定的配置。这可能会在代码级别生成一些重复项，但是在一天结束时，您希望使其正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T16:48:16.877

只需在 Visual Studio 中创建一个 WCF 项目，然后用 C# 编写所有代码。您将遇到的实际问题是从 Java EE 进行 SOAP 调用。

WCF 服务将托管在 IIS 中，而不是托管 WCF 的 Windows 服务中。

关于如何开始使用 WCF 的教程：

[http://msdn.microsoft.com/en-us/library/dd936243.aspx](http://msdn.microsoft.com/en-us/library/dd936243.aspx)

享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T08:08:49.727

在这里更新了 WCF 的链接：http: [//invalidcast.tumblr.com/post/52980598607/a-gentle-introduction-to-wcf](http://invalidcast.tumblr.com/post/52980598607/a-gentle-introduction-to-wcf)

# javascript - 将元素添加到 iframe

> ID：13707704
> 
> 赞同：3
> 
> 时间：2012-12-04T16:44:23.870
> 
> 标签：javascript, html, iframe

我正在创建一个包含 iframe 的页面。我的目标是创建一个将添加到 iframe 内容头部的 javascript。

但我总是收到暗示 iframe.contentDocument 为空的错误。

主页面代码

```
<html>
<head>
<title>Sample "Hello, World" Application</title>
<script type="text/javascript" >
function sizeFrame() {
try{
    var ifrm = document.getElementById("CFrame");
    var bt = ifrm.contentDocument.createElement("base");
    bt.setAttribute("target", "_parent");
    ifrm.contentDocument.getElementsByTagName("head")[0].appendChild(bt);
}
catch (er)
{alert(er);}
}
</script>
</head>
<body>
<div id="sidecontainer">
<iframe id="SFrame" name="SearchFrame" frameborder ="0" width="500" height="100" scrolling="no" src="SearchBox.html"></iframe>
</div>
<div id="content">
<iframe id="CFrame" name="ContentFrame" frameborder="0" height="1000px" width="1000px" onload="sizeFrame()" scrolling="no" src="ContentFrame.html"></iframe>
</div>
</body>
</html> 
```

Iframe ContentFrame.html 的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
</head>
<body>
    <div id="input">
    test
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:51:02.080

我建议你试试

```
ifrm.contentWindow.document.getElementById("id") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:48:49.963

像在主窗口中一样，使用框架窗口名称来创建元素，如下所示

```
ContentFrame.document... 
```

换句话说，访问窗口名称。

此外，您的 iframe 窗口没有任何 id 值等于“id”的元素。

# subview - UITouch 事件转发到的所有子视图的列表

> ID：13707708
> 
> 赞同：0
> 
> 时间：2012-12-04T16:44:52.237
> 
> 标签：subview, uitouch, uitapgesturerecognizer, first-responder

我有一个 UIScrollView，里面有一些视图。当我点击它时，我希望能够了解触摸是发生在干净区域还是存在子视图的区域。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:51:52.777

我想我在[Find which child view was taped when using UITapGestureRecognizer中找到了一个可能的解决方案](https://stackoverflow.com/questions/2788870/find-which-child-view-was-tapped-when-using-uitapgesturerecognizer)

因此，在使用以下命令注册*UITapGestureRecognizer*后：

```
//        // Intercept all the taps inside the view
        UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc]
                                                 initWithTarget:self
                                                 action:@selector(tapDetected:)];
        tapRecognizer.numberOfTapsRequired = 1;
        tapRecognizer.numberOfTouchesRequired = 1;
        tapRecognizer.cancelsTouchesInView = NO;
        [self addGestureRecognizer:tapRecognizer]; 
```

包含以下代码就足够了：

```
- (void)tapDetected:(UITapGestureRecognizer*)recognizer
{
    UIView* view = recognizer.view;
    CGPoint loc = [recognizer locationInView:view];
    UIView* subview = [view hitTest:loc withEvent:nil];

    NSLog(@"HIT! in %@",NSStringFromClass([subview class]));
} 
```

# php - 禁用多个控制器的 Symfony2 会话？

> ID：13707711
> 
> 赞同：2
> 
> 时间：2012-12-04T16:45:01.337
> 
> 标签：php, events, session, symfony, assetic

是否可以仅对 Symfony2 中的多个控制器禁用会话管理？原因是，应用程序使用 pdo 数据库作为 sessionavehandler 和资产。资产控制器调用会导致很多 (>45) 不必要的数据库查询。有什么推荐的方法来处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:40:16.720

好的，我找到了解决方案。所有 CSS/JS 仅在开发模式下通过控制器调用。在 prod 模式下，仅包含预编译文件。没有控制器，没有会话。

# mysql - MySQL bodge作业拷贝表

> ID：13707712
> 
> 赞同：0
> 
> 时间：2012-12-04T16:45:04.363
> 
> 标签：mysql

像往常一样，这可能是我在浏览解决方案时监督的一个简单的问题。

我有以下查询：

```
' INSERT INTO '.$this->ticket_attachment_table.' (SELECT * FROM '.$this->email_attachment_table.' WHERE emailId = '.mysql_real_escape_string($row['id']).');' 
```

这只是将项目从一张桌子复制到另一张桌子。

但是，当表完全重复时，这通常可以正常工作，但是这个表有一个不同的字段名称。

`messageId AS emailId`所以，假设所有字段标题都是相同的，除了在一个表中，同一字段的字段标题是 messageId 和 emailId，我可以在同一个查询中合并一种吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:49:19.727

试试这个 ：：

```
Insert into table1 (column11, column12, column13....)  
Select column21, column22, column23... from table2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:49:11.487

不同的字段名称根本不应该影响您的查询。只要字段/类型的顺序相同，查询就会运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:50:22.883

像这样：

```
Insert into Table (Fieldname,Fieldname,Fieldname,..) Select ... 
```

实际上 Judy 是正确的，当字段的顺序不同时，上述内容很有用。

# proxy - 负载平衡代理背后：如何知道我使用的是哪一个？

> ID：13707713
> 
> 赞同：0
> 
> 时间：2012-12-04T16:45:03.623
> 
> 标签：proxy, load-balancing

企业环境：在我和互联​​网之间，有一个负载平衡代理。MSIE 连接设置指向一个`proxypac`文件，大致上说：

```
function FindProxyForURL(url, host)
{
if ((shExpMatch(host,"intranet1.corp")) || (shExpMatch(host,"intranet2.corp")))
    return "DIRECT";
else
    return "PROXY proxy1.corp:3128; PROXY proxy2.corp:3128";
} 
```

**我的问题**：以编程方式，我如何确定我正在使用哪个代理？我在 Windows 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T21:55:40.073

您的示例 PAC 文件配置为用于故障转移，而不是用于负载平衡。
换句话说，您的 IE 总是会先尝试通过“proxy1.corp”连接，然后，如果失败，它会尝试通过“proxy2.corp”连接。
请注意，IE 使用“自动代理结果缓存”，您可以[在此处](http://homepage.ntlworld.com./jonathan.deboynepollard/FGA/web-browser-auto-proxy-configuration.html)阅读：

> 理论上，每次 Web 浏览器将要获取对象时都会调用 FindProxyForURL() 函数。然而，实际上，Microsoft 的 Internet Explorer 具有 Microsoft 所说的“自动代理结果缓存”。每当成功联系代理 HTTP 服务器（使用调用 FindProxyForURL() 函数的结果或以其他方式定位）以获取对象时，APR 缓存都会更新以包含该对。如果在即将调用 FindProxyForURL() 函数时，Internet Explorer 发现主机已经列在 APR 缓存中，它会使用 APR 缓存条目中列出的代理 HTTP 服务器，而不是为同一主机再次调用 FindProxyForURL() 函数。（APR 缓存的目的是尝试减少 JavaScript 函数必须运行的次数，从而减少获取对象的开销。）因为 Internet Explorer 的 APR 缓存是按主机名索引的，这意味着 PAC 脚本不可能根据除了主机名之外的 URL 的任何部分可靠地产生多个不同的结果。例如，不可能在单个主机上根据 URL 的路径部分提供不同的代理配置。因为 Internet Explorer 的 APR 缓存缓存代理 HTTP 服务器而不是 FindProxyForURL() 函数的完整结果，这意味着即使 FindProxyForURL() 函数出现问题，也不会从一个代理 HTTP 服务器回退到另一个返回了几个代理 HTTP 服务器的列表。这意味着 PAC 脚本不可能根据除了主机名之外的 URL 的任何部分可靠地产生多个不同的结果。例如，不可能在单个主机上根据 URL 的路径部分提供不同的代理配置。因为 Internet Explorer 的 APR 缓存缓存代理 HTTP 服务器而不是 FindProxyForURL() 函数的完整结果，这意味着即使 FindProxyForURL() 函数出现问题，也不会从一个代理 HTTP 服务器回退到另一个返回了几个代理 HTTP 服务器的列表。这意味着 PAC 脚本不可能根据除了主机名之外的 URL 的任何部分可靠地产生多个不同的结果。例如，不可能在单个主机上根据 URL 的路径部分提供不同的代理配置。因为 Internet Explorer 的 APR 缓存缓存代理 HTTP 服务器而不是 FindProxyForURL() 函数的完整结果，这意味着即使 FindProxyForURL() 函数出现问题，也不会从一个代理 HTTP 服务器回退到另一个返回了几个代理 HTTP 服务器的列表。根据单个主机上 URL 的路径部分提供不同的代理配置。因为 Internet Explorer 的 APR 缓存缓存代理 HTTP 服务器而不是 FindProxyForURL() 函数的完整结果，这意味着即使 FindProxyForURL() 函数出现问题，也不会从一个代理 HTTP 服务器回退到另一个返回了几个代理 HTTP 服务器的列表。根据单个主机上 URL 的路径部分提供不同的代理配置。因为 Internet Explorer 的 APR 缓存缓存代理 HTTP 服务器而不是 FindProxyForURL() 函数的完整结果，这意味着即使 FindProxyForURL() 函数出现问题，也不会从一个代理 HTTP 服务器回退到另一个返回了几个代理 HTTP 服务器的列表。
> [Microsoft 的知识库文章#271361](http://support.microsoft.com/kb/271361) 总结了这些问题并描述了如何关闭 Internet Explorer 的 APR 缓存。Microsoft 的 Internet Explorer 还将“坏”代理 HTTP 服务器的信息缓存 30 分钟。这与 PAC 脚本没有直接关系，只是当人们在设置代理 HTTP 服务器和创建 PAC 脚本时经常会引起混淆，以及代理 HTTP 服务器出现问题，导致它被缓存为“ bad" 30 分钟，被误诊为 PAC 脚本的问题。

如果您想使用 PAC 文件进行负载平衡，请查看[此页面](https://community.mcafee.com/thread/33161)以获取一些示例。
但是，即使您在两个代理“proxy1”和“proxy2”之间进行了负载平衡，使用的代理也可能会在每次请求时发生变化；此外，如果您在任何时候都有多个 IE 实例处于活动状态，您可能会遇到一些实例使用“proxy1”而其他实例使用“proxy2”的情况。
因此，要回答您的问题，一种解决方案可能是检查 HTTP 标头响应中的[“via”字段](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.45)。例如，考虑以下 HTML 页面：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Javascript Proxy Detection</title>
    <script language="javascript">
    function doRequest(url) {
      if (typeof XMLHttpRequest != 'undefined') {
        try {
          var xmlhttp = new XMLHttpRequest();
          xmlhttp.open("GET", url, true);
          xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4) {
              document.myForm.txt.value = xmlhttp.getAllResponseHeaders();
            }
          }
          xmlhttp.send(null);
        } catch (e) {
          alert(e.message);
        }
      } else {
        alert('no XMLHttpRequest');
      }
    }
    </script>
  </head>
  <body>
    <form name="myForm">
      <textarea cols="50" rows="10" name="txt"></textarea><br />
      <input type="button" value="Test Proxy" onclick="doRequest(location.href)">
    </form>
  </body>
</html> 
```

通过直接连接（没有代理）请求这个页面，然后点击“测试代理”按钮，你会得到这样的输出：

```
Content-Encoding: gzip
Content-Length: 470
Server: Apache/2.2.17 (Ubuntu)
Vary: Accept-Encoding
Content-Type: text/html
Accept-Ranges: bytes 
```

通过代理（在我的例子中是 Squid）请求相同的页面，您还将获得“通过”字段：

```
Accept-Ranges: bytes
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 470
Content-Type: text/html
X-Cache: MISS from ****
X-Cache-Lookup: HIT from ****:3128
Via: 1.1 ****:3128 (squid/2.7.STABLE9) 
```

因此，通过检查标题中是否存在“via”字段，您应该能够确定：

1.  如果您使用代理
2.  使用的代理

更多参考资料：

*   [如何发现 pac 中使用的代理](https://stackoverflow.com/questions/3068728/how-to-discover-de-proxy-used-in-a-pac)
*   [我如何知道我正在使用哪个代理服务器](https://superuser.com/questions/346372/how-do-i-know-what-proxy-server-im-using)
*   [system.net.iwebproxy.getproxy](http://msdn.microsoft.com/en-us/library/system.net.iwebproxy.getproxy.aspx)

# java - ServerSocket 连接问题

> ID：13707714
> 
> 赞同：1
> 
> 时间：2012-12-04T16:45:05.993
> 
> 标签：java, android, sockets, wireless, serversocket

我一直有服务器套接字连接的问题，我有一个用于这个小游戏的程序，并试图使用套接字来连接它，但是当我到达它时，`serverSocket = new ServerSocket(53000);`它只是停止并冻结，之后似乎没有去任何地方或采取任何联系。在那`kkSocket = new Socket(duke, 53000);`之后它就崩溃了，似乎没有连接，我确定我的防火墙没有打开，我添加了互联网权限，我为设备名称尝试了许多不同的东西，我输入了什么我已经命名了我的设备，尝试了当前的 IP 地址，但什么都不会通过，我有一个 Galaxy nexus 和一个 nexus 7 平板电脑，它们在尝试相互通信时都有问题，任何信息都会很好，谢谢。

```
package com.idlethought.handagedon;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.view.DragEvent;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnDragListener;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.PopupWindow;
import android.widget.Toast;

public class ImageSelectionFragment extends Fragment {
    private static final String IMAGE_DATA_EXTRA = "resId";
    private int mImageNum;
    private ImageView mImageView;
    private String myHand = null;
    private String theirHand = null;
    private ServerSocket serverSocket;

    static ImageSelectionFragment newInstance(int imageNum) {
        final ImageSelectionFragment f = new ImageSelectionFragment();
        final Bundle args = new Bundle();
        args.putInt(IMAGE_DATA_EXTRA, imageNum);
        f.setArguments(args);
        return f;
    }

    // Empty constructor, required as per Fragment docs
    public ImageSelectionFragment() {}

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mImageNum = getArguments() != null ? getArguments().getInt(IMAGE_DATA_EXTRA) : -1;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        // image_detail_fragment.xml contains just an ImageView
        final View v = inflater.inflate(R.layout.image_detail_fragment, container, false);
        mImageView = (ImageView) v.findViewById(R.id.imageView);
        return v;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        final int resId = MainActivity.imageResIds[mImageNum];
        mImageView.setImageResource(resId); // Load image into ImageView
        addListenerOnImage();
    }

    public void addListenerOnImage() {
        mImageView.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                //String id = String.valueOf(mImageNum);
                String screen = null;
                //final int resId = MainActivity.imageResIdsRed[mImageNum];
                //mImageView.setImageResource(resId); // Load image into ImageView
                LinearLayout layout = new LinearLayout(getActivity().getApplication());
                getActivity();
                LayoutInflater layoutInflater = (LayoutInflater) getActivity().getBaseContext().getSystemService(FragmentActivity.LAYOUT_INFLATER_SERVICE);
                View popupView = null;
                Button btnDismiss = null;
                Button btnAccept = null;
                switch (mImageNum) {
                case 0: screen = "ROCK";
                        popupView = layoutInflater.inflate(R.layout.submit_rock_hand, null);
                        btnDismiss = (Button) popupView.findViewById(R.id.decline_rock_selection);
                        btnAccept = (Button) popupView.findViewById(R.id.accept_rock_selection);
                    try {
                        openServer(screen);
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    break;
                case 1: screen = "PAPER";
                        popupView = layoutInflater.inflate(R.layout.submit_paper_hand, null);
                        btnDismiss = (Button) popupView.findViewById(R.id.decline_paper_selection);
                        btnAccept = (Button) popupView.findViewById(R.id.accept_paper_selection);
                    try {
                        findServer(screen);
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    break;
                case 2: screen = "SCISSORS";
                        popupView = layoutInflater.inflate(R.layout.submit_scissors_hand, null);
                        btnDismiss = (Button) popupView.findViewById(R.id.decline_scissors_selection);
                        btnAccept = (Button) popupView.findViewById(R.id.accept_scissors_selection);
                    break;
                case 3: screen = "LIZARD";
                        popupView = layoutInflater.inflate(R.layout.submit_lizard_hand, null);
                        btnDismiss = (Button) popupView.findViewById(R.id.decline_lizard_selection);
                        btnAccept = (Button) popupView.findViewById(R.id.accept_lizard_selection);
                    break;
                case 4: screen = "SPOCK";
                        popupView = layoutInflater.inflate(R.layout.submit_spock_hand, null);
                        btnDismiss = (Button) popupView.findViewById(R.id.decline_spock_selection);
                        btnAccept = (Button) popupView.findViewById(R.id.accept_spock_selection);
                    break;
                default: screen = "ERROR!";
                    break;
                }

                final PopupWindow popupWindow = new PopupWindow(popupView,LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                popupWindow.showAtLocation(layout, Gravity.CENTER, 0, 0);
                btnDismiss.setOnClickListener(new Button.OnClickListener() {

                    public void onClick(View v) {
                        popupWindow.dismiss();
                    }
                });
                btnAccept.setOnClickListener(new Button.OnClickListener() {

                    public void onClick(View v) {
                        /*Insert what the accept button does here*/

                    }
                });

                //Toast.makeText(getActivity().getApplication(), 
                //      "test goes here", 
                //      Toast.LENGTH_SHORT).show();
            }
        });
    }

public void openServer(String hand) throws IOException {
        // YEAHHHH TOAST!!!

        Toast.makeText(getActivity().getApplication(),"Open Serverbf",Toast.LENGTH_SHORT).show();

        serverSocket = new ServerSocket(53000);
        Socket clientSocket = null;
        boolean end = false;
        while (!end){
            Toast.makeText(getActivity().getApplication(),"Open Serveraf",Toast.LENGTH_SHORT).show();
            clientSocket = serverSocket.accept();
            end = serverSocket.isBound();   
        }    

        Toast.makeText(getActivity().getApplication(),"Open Serveraftr",Toast.LENGTH_SHORT).show();

        PrintWriter out = new PrintWriter(clientSocket.getOutputStream());
        BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

        theirHand = in.readLine();
        myHand = hand;
        out.println(hand);
        Toast.makeText(getActivity().getApplication(),"Their Hand:" + theirHand,Toast.LENGTH_SHORT).show();
        Toast.makeText(getActivity().getApplication(),"My Hand:" + myHand,Toast.LENGTH_SHORT).show();

        out.close();
        in.close();
        clientSocket.close();
        serverSocket.close();

    }

    public void findServer(String hand) throws IOException {
        // YEAHHHH TOAST!!!
        Toast.makeText(getActivity().getApplication(), "Find Server", Toast.LENGTH_SHORT).show();
        BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));

        Socket kkSocket = null;
        PrintWriter out = null;
        BufferedReader in = null;

        InetAddress duke = InetAddress.getByName("192.168.1.137");

        try {
            kkSocket = new Socket(duke, 53000);
            out = new PrintWriter(kkSocket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(kkSocket.getInputStream()));
        } catch (UnknownHostException e) {
                System.err.println("could not connect");
            e.printStackTrace();
        } catch (IOException e) {
                System.err.println("other error");
            e.printStackTrace();
        }

        //out = new PrintWriter(kkSocket.getOutputStream(), true);

        //in = new BufferedReader(new InputStreamReader(kkSocket.getInputStream()));

        //BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));

        //out.println(hand);
        //myHand = hand;
        //theirHand = in.readLine();
        //Toast.makeText(getActivity().getApplication(),"Their Hand:" + theirHand,Toast.LENGTH_SHORT).show();
        Toast.makeText(getActivity().getApplication(),"My Hand:",Toast.LENGTH_SHORT).show();

        out.close();
        in.close();
        //stdIn.close();
        kkSocket.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:07:57.203

你能给我们看看日志吗？有什么错误？。

第二：当你这样做时：

```
 while (!end){
        Toast.makeText(getActivity().getApplication(),"Open Serveraf",Toast.LENGTH_SHORT).show();
        clientSocket = serverSocket.accept();
        end = serverSocket.isBound();   
    } 
```

接受第一个连接后，您的服务器套接字将不再侦听，因为 while 条件为假。

# javascript - 如何使用 jqueryui 对话框按钮提交表单，

> ID：13707716
> 
> 赞同：4
> 
> 时间：2012-12-04T16:45:13.053
> 
> 标签：javascript, jquery, html, jquery-ui, javascript-events

我想使用 jqueryui 按钮提交表单。我有一些代码，但它不起作用。这是代码：

```
<script type="text/javascript">
function findUrls()
{
    var text = document.getElementById("text").value;
    var source = (text || '').toString();
    var urlArray = [];
    var url;
    var matchArray;

    // Regular expression to find FTP, HTTP(S) and email URLs.
    var regexToken = /\b(http|https)?(:\/\/)?(\S*)\.(\w{2,4})\b/ig;

    // Iterate through any URLs in the text.
    if( (regexToken.exec( source )) !== null )
    {
    show_box();// this will show jquery dialog..
    return false;
    }

}

</script>

<div id="dialog" title="Dialog Title">
<p>Dialog box text.....Dialog box text....Dialog box text</p>
<button id="formSubmit">Click me</button>
</div>

<form name="myForm" id="myForm" action="http://www.bing.com" method="post" onsubmit="return findUrls();"> 
<textarea id="text"></textarea>
<input type="submit" name="submit" value="send" />
</form>

<script type="text/javascript">
function show_box(){
$(document).ready(function(){

                $( "#dialog" ).dialog({
                autoOpen: false,
                width: 400,
                buttons: [
                    {
                        text: "Yes",
                        click: function() {
                            submit_form();

                        }
                        },
                    {
                        text: "No",
                        click: function() {
                            $( this ).dialog( "close" );
                        }
                    },
                    {
                        text: "Cancel",
                        click: function() {
                            $( this ).dialog( "close" );
                        }
                    }
                ]
            });

            $( "#dialog" ).dialog( "open" );
});
}

function submi_form(){
var myForm = document.forms['myForm'];

var formSubmit = document.getElementById('formSubmit');

formSubmit.onclick = function(){
    myForm.submit();
    }
}
</script> 
```

当一个人在文本区域中放置一个链接并提交表单时，会出现带有三个按钮的 jquery 对话框，我希望当有人单击对话框上的“是”按钮时，表单会自动提交。一切正常。但是当我单击按钮时，它不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T16:53:17.220

您的 submit_form 函数实际上并没有尝试提交表单。它目前正在将单击事件添加到“单击我”按钮上，如果按下该按钮将提交您的表单。

如果您想单击对话框的“是”按钮来提交表单，请尝试以下操作：

```
function submit_form(){
    $('#myForm').submit();
} 
```

还要确保您的 submi_form 方法的名称在这里只是一个错字，而不是在您的实时代码中……您缺少一个“t”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T17:14:34.223

好吧，最开始的代码非常纠结，而且组织得非常糟糕，很抱歉这么说。一些改进的技巧：

1：将javascirpt保存到单独的js文件中，尽量避免嵌入代码。但这并不意味着根本不使用嵌入。在这种情况下，最好让它更有条理。

2：确保您在需要的代码中调用加载事件，在您的情况下，文档准备好在 show_box() 中使用，这是完全没有必要的。

3：函数 submi_form() 不是从任何地方调用的，所以此时你最好使用准备好的文档来处理点击事件

4：findUrls()，抱歉没能得到你在这部分想要完成的事情，所以绕过它。确保你保持简单，幸福就会到来）

试图修复代码以尽可能接近您的风格，所以我们在这里[http://jsbin.com/idetub/1/edit](http://jsbin.com/idetub/1/edit)

只是 javascript 供您考虑

```
function findUrls() {
  show_box(); // this will show jquery dialog..
  return false;

  // some broken logic below ...
  var text = document.getElementById("text").value;
  var source = (text || '').toString();
  var urlArray = [];
  var url;
  var matchArray;
  // Regular expression to find FTP, HTTP(S) and email URLs.
  var regexToken = /\b(http|https)?(:\/\/)?(\S*)\.(\w{2,4})\b/ig;
  // Iterate through any URLs in the text.
  if ((regexToken.exec(source)) !== null) {
    show_box(); // this will show jquery dialog..
    return false;
  }
}

 function show_box() {
   //$(document).ready(function(){ // no needs for that
   $("#dialog").dialog({
     autoOpen: false,
     width: 400,
     buttons: [{
       text: "Yes",
       click: function () {
         submit_form();
       }
     }, {
       text: "No",
       click: function () {
         $(this).dialog("close");
       }
     }, {
       text: "Cancel",
       click: function () {
         $(this).dialog("close");
       }
     }]
   });
   $("#dialog").dialog("open");
   //});
 }
$(document).ready(function(){
  //function submi_form() { remove this as no accual call for submit_form nowhere
    var myForm = document.forms['myForm'];
    var formSubmit = document.getElementById('formSubmit');
    formSubmit.onclick = function () {
      myForm.submit();
    };
  //}
}); 
```

UPD：是的，看起来你在这里得到了递归逻辑，它无法提交表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:10:38.800

试试这个：

```
$("#myForm").submit(function() {

    var text = $('#text').val;
    var source = (text || '').toString();
    var urlArray = [];
    var url;
    var matchArray;

    // Regular expression to find FTP, HTTP(S) and email URLs.
    var regexToken = /\b(http|https)?(:\/\/)?(\S*)\.(\w{2,4})\b/ig;

    // Iterate through any URLs in the text.
    if ((regexToken.exec(source)) !== null) {
        show_box();// this will show jquery dialog..
        alert('ss');
        return false;
    }
    return false;
});​ 
```

还要`onsubmit="return findUrls();"`从表单中删除并在上面`findUrls()`的方法中添加代码`$("#myForm").submit()`。[小提琴](http://jsfiddle.net/T5ULM/)

# c# - Visual Studio 2008，C# 项目，获取资源的文件路径

> ID：13707717
> 
> 赞同：2
> 
> 时间：2012-12-04T16:45:17.507
> 
> 标签：c#, embedded-resource

我已将 DLL 作为资源添加到我的项目中。当我`CSharpCodeProvider`用来编译某些东西时，我需要获取此 DLL 的文件路径。只能将引用的程序集作为文件路径传递给`ReferencedAssemblies`它的属性。

我可以很容易地为我的资源 DLL 获取一个字节数组。目前我将字节数组写入临时文件并在编译后删除......没有更好的吗？对我来说，这个文件必须在某个地方并且易于访问，而不仅仅是作为字节流，这是有道理的。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:51:31.703

资源文件没有路径。
您需要使用`Assembly.GetManifestResourceStream`

更多信息[http://msdn.microsoft.com/en-us/library/xc4235zt.aspx](http://msdn.microsoft.com/en-us/library/xc4235zt.aspx)

试试这个属性。`Resources.YOUR_RESOURCE_FILENAME`

# php - 在后续页面加载之前，新创建的 cookie 是否可用？

> ID：13707721
> 
> 赞同：2
> 
> 时间：2012-12-04T16:45:42.180
> 
> 标签：php, cookies, browser, kohana

当我第一次创建 cookie 时，我似乎无法获取相同的 cookie，直到随后的页面加载。就好像在第二次请求页面之前，浏览器不存在 cookie。

我正在使用 Kohana PHP 框架：

```
Cookie::set('new_cookie', 'I am a cookie');
$cookie = Cookie::get('new_cookie');
//$cookie is NULL the first time this code is run. If I hit the page again
and then call Cookie:get('new_cookie'), the cookie's value is read just fine. 
```

所以，我被引导相信这是正常行为，我可能不明白 cookie 是如何工作的。任何人都可以为我澄清这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T16:48:05.737

Cookies 设置在 HTTP 标头中，因此当服务器返回页面时。当您重新加载页面时，您的浏览器会将它们发送回服务器。

因此，在新请求之后它们“可见”是完全正常的。

这是来自服务器的示例响应：

```
HTTP/1.1 200 OK
Content-type: text/html
Set-Cookie: name=value
Set-Cookie: name2=value2; Expires=Wed, 09-Jun-2021 10:18:14 GMT

(content of page) 
```

当您重新加载页面时，您的浏览器会发送以下信息：

```
GET / HTTP/1.1
Host: www.example.org
Cookie: name=value; name2=value2
Accept: */* 
```

这就是为什么服务器只能在浏览器发出新请求后才能看到它们的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:49:56.327

您假设 cookie 在下一页加载之前不可用是正确的。Cookie 存储在浏览器中，并在文档发送到客户端*后创建。*当客户端再次加载（或重新加载）您的任何页面时，任何现有的 cookie 将与页面请求一起发送到服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:49:10.420

是的，cookie 只能在后续页面加载时访问，因为在您设置 cookie 之前填充了 $_COOKIE 全局变量。

编辑：见[https://stackoverflow.com/a/7455234/996876](https://stackoverflow.com/a/7455234/996876)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T16:49:01.397

客户端（浏览器）在对某些请求的响应中看到新的 cookie。然后它在所有后续请求中将其发送到服务器。所以是的，这是正常行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-07T21:26:02.400

如果你想在第一个 php 页面加载中使用 cookie（用 JS 改变值），你必须在你的 php 代码顶部使用 setcookie。然后创建 cookie 并可以在 JS 中更改值并在第一个 php 页面加载中使用。

例子 ：

```
<?php
   setcookie('testCookie', 'testValue', 0, "/");
?>

<script type="javascript">
   document.cookie = "testCookie=123456;path=/";
</script>

<?php
   echo $_COOKIE['testCookie'];// return 123456
?> 
```

在此示例中，如果您不在 php 代码顶部使用 setcookie，则在第一页加载 $_COOKIE['TestCookie'] 时返回 null。意味着 php 无法达到在 javascript 中更改的 cookie 的值（在第一页加载中）。第二页加载中不存在此问题。

# sql - 遇到错误时如何停止执行sql脚本

> ID：13707722
> 
> 赞同：8
> 
> 时间：2012-12-04T16:45:44.840
> 
> 标签：sql, sql-server

我有一个包含一些 sql 脚本（DDL 和 DML）的 sql 文件，我通过从 windows 命令行调用来执行这些脚本。问题是当发生错误时它会报告错误，但文件中的所有 sql 语句仍在执行，而我希望一旦在其中一个 sql 语句中遇到第一个错误，执行应该就停止在那里。

我使用 sql server 作为我的数据库

以下是我的脚本示例

```
 CREATE TABLE #tmpErrors (Error int)
GO
SET XACT_ABORT ON
GO
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE
GO
BEGIN TRANSACTION
GO

/** Main Scripts **/
PRINT N'Creating [dbo].[Student]'
GO
CREATE TABLE [dbo].[Student](
    [Id] [bigint] NOT NULL,
    [Subject] [varchar](15) NOT NULL,
    CONSTRAINT [PK_Student] PRIMARY KEY CLUSTERED
    (
        [Id] ASC
    )
)
GO
IF @@ERROR<>0 AND @@TRANCOUNT>0 ROLLBACK TRANSACTION
GO
IF @@TRANCOUNT=0 BEGIN INSERT INTO #tmpErrors (Error) SELECT 1 BEGIN TRANSACTION END
GO

PRINT N'Adding [StudentID] column to [dbo].[School]'
GO
ALTER TABLE [dbo].[School] ADD [StudentID] [bigint] NULL
GO
IF @@ERROR<>0 AND @@TRANCOUNT>0 ROLLBACK TRANSACTION
GO
IF @@TRANCOUNT=0 BEGIN INSERT INTO #tmpErrors (Error) SELECT 1 BEGIN TRANSACTION END
GO

/***And many other DDL and DML statements, each followed by an error check***/

/**
 * Main teardown 
 */
IF EXISTS (SELECT * FROM #tmpErrors) ROLLBACK TRANSACTION
GO

IF @@TRANCOUNT>0 BEGIN
PRINT 'The database update succeeded'
COMMIT TRANSACTION
END
ELSE PRINT 'The database update failed'
GO

IF EXISTS (SELECT * FROM #tmpErrors) OR (@@ERROR<>0)
BEGIN
RAISERROR (N'An error was encountered', 20, 1 ) WITH LOG, NOWAIT, SETERROR SELECT @@ERROR AS error_number
END
GO

/**
 * Final teardown
 */
DROP TABLE #tmpErrors
GO 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T16:48:02.257

我很确定`BEGIN TRY`并且`BEGIN CATCH`会在遇到错误时停止执行并将执行直接带到错误处理程序：

```
BEGIN TRY

   ' do stuff

END TRY
BEGIN CATCH

   'handle

END CATCH 
```

编辑：这是一个例子：

```
BEGIN TRY

    DECLARE @int int
    SET @int = 1

    SET @int = 1 / 0

    SET @int = 2

    SELECT 'Everything OK'

END TRY
BEGIN CATCH

    SELECT 'Oops'

END CATCH 
```

注释掉上面除以零的行以查看“一切正常”，否则您将在结果集中看到“糟糕”

# ruby-on-rails-3 - rails 的单元格可以嵌入自己的 javascript 和 css 吗？

> ID：13707732
> 
> 赞同：6
> 
> 时间：2012-12-04T16:46:36.980
> 
> 标签：ruby-on-rails-3, rails-cells

我已经阅读了几个关于 rails 单元格的示例，但没有找到一些示例显示如何从单元格创建完全隔离的小部件。
通过隔离，我的意思是一个小部件，它有自己的 css / javascript / ... 并且只需要在 rails 文件夹中复制。
这对细胞可行吗？

# jquery - 为什么我的动画不起作用

> ID：13707737
> 
> 赞同：-2
> 
> 时间：2012-12-04T16:46:49.887
> 
> 标签：jquery, html, css

由于某种原因，此动画无法正常工作。我希望它看起来像[http://tympanus.net/Tutorials/TypographyEffects/index6.html](http://tympanus.net/Tutorials/TypographyEffects/index6.html)我不明白为什么它不能正常工作。在不相关的说明中，我还设置了黑色背景色，因为我的背景图像有时不太好用。我不确定为什么。谢谢！代码是

```
body {
background-image: url('http://images.fanpop.com/images/image_uploads/SNL-Wallpaper-saturday-night-live-784022_1024_768.jpg');
background-size: cover;
background: #000;
}

.letter-container h2 a{
text-align: justify;
float: right;
margin-right: 100px;
font-size: 130px;
line-height: 160px;
display: block;
padding-bottom: 30px;
color: #fff;
cursor:default;
text-decoration: none;
}
.letter-container h2 a span {
color: #000;
opacity: 1;
text-decoration: none;
-webkit-transition: all 0.3s linear;
-moz-transition: all 0.3s linear;
-o-transition: all 0.3s linear;
-ms-transition: all 0.3s linear;
transition: all 0.3s linear;
-webkit-animation: sharpen 0.9s linear backwards;   
-moz-animation: sharpen 0.9s linear backwards;  
-ms-animation: sharpen 0.9s linear backwards;
animation: sharpen 0.9s linear backwards;
}
.letter-container h2 a span:nth-child(1) {
    animation-delay: 0s;
}
.letter-container h2 a span:nth-child(2) {
    animation-delay: 0.1s;
} 
```

我只放了几个 :nth 孩子，因为我不想填满这个职位。

```
@keyframes sharpen {
 0% {
 opacity: 0;
 text-shadow: 0px 0px 100px #fff;
 color: transparent;
 }
 90% {
 opacity: 0.9;
 text-shadow: 0px 0px 10px #fff;
 color: transparent;
 }
 100% {
 color: #fff;
 opacity: 1;
 text-shadow: 0px 0px 2px #fff, 1px 1px 4px rgba(0,0,0,0.7);
 }
} 
```

（我也有每个网络版本的关键帧） html 和 Javascript 是

```
<div id="letter-container" class="letter-container">
    <h2><a href="#">Saturday <br/> Night <br/> Live</a></h2>
</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
            <script type="text/javascript">
                $(function() {
                    $("#letter-container h2 a").lettering();
                });
            </script> 
```

编辑：要在网站上查看它是[http://spencedesign.netau.net/SNL/SNL.html](http://spencedesign.netau.net/SNL/SNL.html)我不明白这怎么做。是的，我确实添加了 jquery 字母

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:00:53.183

这至少会像您想要的那样淡入淡出（但不是逐个字符）。为此，我会检查 CSS，因为看起来它正在为 h2 字母的每个 nth-child 执行此操作。确保为“周六夜现场”中的每个角色设置了延迟，包括空格。

[**小提琴**](http://jsfiddle.net/JonMoore/b6Wfg/1/)

```
.letter-container h2 a span:nth-child(1) {
    animation-delay: 0s;
}
.letter-container h2 a span:nth-child(2) {
    animation-delay: 0.1s;
}
.letter-container h2 a span:nth-child(3) {
    animation-delay: 0.2s;
}
.letter-container h2 a span:nth-child(4) {
    animation-delay: 0.3s;
}
.letter-container h2 a span:nth-child(5) {
    animation-delay: 0.4s;
}
[...etc] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-02T01:42:42.037

抱歉，这可能有点偏离主题，但谷歌为什么没有参考： **动画：向后锐化**0.9s 线性；？？？

我想了解更多关于此的信息，但我无法在任何地方找到它的文档，也没有反向操作，即。模糊这也让我感兴趣..

相信我，我不会在这里问谷歌是否给了我一些东西，但遗憾的是无济于事，有人知道吗？

# ios - 带有 UITabBar 和 NavigationController 的 CAT 转换

> ID：13707744
> 
> 赞同：0
> 
> 时间：2012-12-04T16:47:03.430
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, core-graphics, quartz-core

不知道这里发生了什么。

当我在 Action 中执行此操作以显示另一个 viewController 时：

```
CATransition* transition = [CATransition animation];
transition.timingFunction = [CAMediaTimingFunction  functionWithName:kCAMediaTimingFunctionEaseIn];
transition.duration = 1.0f;
transition.type =  @"cube";
transition.subtype = @"fromRight";
[self.navigationController.view.layer removeAllAnimations];
[self.navigationController.view.layer addAnimation:transition forKey:kCATransition];

forgotLoginViewController = [[ForgotLoginViewController alloc]initWithNibName:@"ForgotLoginViewController" bundle:Nil];
[self.navigationController pushViewController:forgotLoginViewController animated:YES]; 
```

它不工作。但是，当我这样做时...（将子视图添加到视图中）

```
CATransition* transition = [CATransition animation];
transition.timingFunction = [CAMediaTimingFunction  functionWithName:kCAMediaTimingFunctionEaseIn];
transition.duration = 1.0f;
transition.type =  @"cube";
transition.subtype = @"fromRight";
[self.view.layer removeAllAnimations];
[self.view.layer addAnimation:transition forKey:kCATransition];

forgotLoginViewController = [[ForgotLoginViewController alloc]initWithNibName:@"ForgotLoginViewController" bundle:Nil];
[self.view addSubview:forgotLoginViewController.view]; 
```

是吗？我的 Viewcontrollers 和 tabbar 在 appdelegate 中实现，如下所示

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

UINavigationController *navController = [[UINavigationController alloc]
                                         initWithRootViewController:viewController2];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = @[viewController1, navController];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];

return YES; 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:06:02.207

我是个白痴，我没有告诉 appDelegate 中的 VC 是导航控制器。现在都在工作！即 UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:viewController1];

# php - 如何在 OSX 上使用 Quicktime 在浏览器中播放 GSM 文件？

> ID：13707746
> 
> 赞同：2
> 
> 时间：2012-12-04T16:47:05.630
> 
> 标签：php, macos, apache2, quicktime, gsm

实验表明，为了让 GSM 文件在 Windows 盒子上的 Quicktime 中播放，最终的重定向 url 必须以`.gsm`. 不幸的是，这对于测试人员所拥有的 OSX 系统来说是不够的，并且尝试 MIME 类型`audio/gsm`、`audio/x-gsm`、`application/gsm`、`application/x-gsm`和`application/x-GSM`( 绝望 ) 不起作用。

建议的替代方案：使用[http://www.westhawk.co.uk/software/playGSM/PlayGSM.html](http://www.westhawk.co.uk/software/playGSM/PlayGSM.html) - 但需要能够寻找/显示进度指示器。将 GSM 文件在服务器上转码为 MP3 文件，无论是在浏览器请求之前还是在浏览器请求它们时，并使用 HTML5 音频播放器 (+shim) 来播放它们 - 但服务器管理员对负载/存储的使用感到不舒服。

如何说服 OSX 上的 Quicktime 浏览器插件播放文件？搜索 Quicktime 浏览器插件的文档对我来说并不成功。

在相关说明中，[http://jquery.malsup.com/media/audio.html](http://jquery.malsup.com/media/audio.html)上的页面确实加载了提供的 GSM 文件，并且直接下载到 Mac 的文件在 Quicktime 中可以正确播放。测试 Mac 运行的是 OSX 10.5.8。

请在下面找到嵌入代码：

```
$('#gsm_player').html('<object type="video/quicktime" data="'+
    event.target.href+'" width="300" height="20">'+
    '<param name="src" value="'+ event.target.href+'">'+
    '<param name="autoplay" value"true">'+
    '<p>QuickTime is required to listen to this file.'+
    '<a href="http://www.apple.com/quicktime/download/" '+
    'target="_blank">Download Here</a></p>'+
    '</object>'
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:21:26.453

我与 Apple 的一位技术支持代表进行了交谈，他指导我阅读 QuickTime 的[HTML 脚本指南和 QuickTime](http://developer.apple.com/library/mac/documentation/QuickTime/Conceptual/QTScripting_HTML/QTScripting_HTML_AIntroduction/Introduction.html#//apple_ref/doc/uid/TP40001525)的[JavaScript 脚本指南以](https://developer.apple.com/library/mac/#documentation/quicktime/Conceptual/QTScripting_JavaScript/aQTScripting_Javascro_AIntro/Introduction%20to%20JavaScript%20QT.html#//apple_ref/doc/uid/TP40001526)获取文档。

我能够通过关闭`zlib.output_compression`PHP 并提供 HTTP`Content-Length`标头来解决我的问题。我没有提供带有假扩展名的文件，而是`audio/x-gsm`用作`Content-Type`标题。`Content-disposition: attachment;...`无论有没有标题，Quicktime 似乎都很好。我的文件现在可以在 OSX 和 Windows 中正常运行。

值得注意的是[https://groups.google.com/forum/?fromgroups=#!topic/iphonewebdev/-5x2QNVCgII上的讨论，特别是在](https://groups.google.com/forum/?fromgroups=#!topic/iphonewebdev/-5x2QNVCgII)[http://code.google.com/p/](http://code.google.com/p/asterisk-voicemail-for-iphone/source/browse/trunk/iphone/i_functions.php#29)上提到的源代码[asterisk-voicemail-for-iphone/source/browse/trunk/iphone/i_functions.php#29](http://code.google.com/p/asterisk-voicemail-for-iphone/source/browse/trunk/iphone/i_functions.php#29)。它包含我见过的最好的 206 处理程序之一，让我走上了正确的道路，并且可能比做对我有用的事情更有帮助（我不需要 206 处理，但你可能需要）。

请在下面提供文件的文件下载器脚本部分找到：

```
header('Content-Type: audio/x-gsm');
header("Content-disposition: attachment; filename=file.gsm");

ini_set("zlib.output_compression", "Off");
header("Content-Length: ".strlen($file));

echo $file;
exit; 
```

# html - 响应式设计在黑莓上得到了扩展

> ID：13707749
> 
> 赞同：2
> 
> 时间：2012-12-04T16:47:21.707
> 
> 标签：html, responsive-design, meta

我的响应式设计在 Blackberry (Curve 8520) 上扩展时遇到问题。在其他任何地方都很好用。

它使站点完全缩小得非常小，并且需要进行大量缩放才能以 100% 显示。

一切都以百分比设置，并使用媒体查询来定位屏幕尺寸，这工作正常，因为手机正在使用为此设备设置的样式，只是它完全缩小了。

我知道这可能取决于我的视口元标记的构建，并且基于网络研究尝试了许多替代方案，这些都包含在我尝试过的内容下方，但没有一个有效：

当前的：

```
<meta name="viewport" id="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0" /> 
```

试过：

```
<meta name="viewport" content="width=device-width, target-densitydpi=160dpi, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<meta name="viewport" content="width=device-width">

<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0" /> 
```

请注意，每一个用空格分隔的都是我尝试过的一组新代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T23:36:05.430

使用此页面上的视口标签设置，它应该可以工作。

[https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag)

# mysql - 如果不存在重复项，如何执行选择？

> ID：13707758
> 
> 赞同：0
> 
> 时间：2012-12-04T16:47:46.737
> 
> 标签：mysql, ruby-on-rails, activerecord, arel

*如果不存在重复项，*我正在寻找选择对象的*最佳*方法。

 *我有一个复制对象数组的方法。但如果副本已经存在，则无需复制它们。

如何通过 mysql2 以轻量级的方式最初选择我的尚未复制的对象数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:15:12.710

```
SELECT COUNT(name_of_col) From table_name
GROUP BY name_of_col 
HAVING COUNT(name_of_col) = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:15:41.553

```
 SELECT object FROM table GROUP BY object HAVING count(*)=1 
```*

# javascript - Jquery Plugin - 在文本字段中键入隐藏字段的框？

> ID：13707768
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:48:14.780
> 
> 标签：javascript, jquery, plugins

这很难解释。我见过一个插件，它允许用户输入隐藏的文本字段。您所注意到的只是一个光标和正在输入的文本。如果您看过新的 MySpace 视频。你可以在里面看到我在说什么。抱歉，没有更好地解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:50:39.463

除了从浏览器中禁用 CSS 之外，您不能在隐藏的文本框中输入内容。

但是，您可以使用空白样式使文本框*看起来隐藏：*

```
input.hidden { 
   border:0;
   outline: none;
} 
```

在下面的演示中，单击第一个文本框的右侧，您将能够开始输入（尽管文本框显示为隐藏）：

[**-- 看演示 --**](http://jsfiddle.net/hy34Y/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:04:09.573

我找到了答案，它不是通过使用 Jquery 插件，我认为应该创建的东西。

将背景设置为透明是诀窍。我还需要用户能够在屏幕上的任何位置键入，并且文本显示在文本区域中。这是通过下面的 JS 完成的。

```
$( document ).on( 'keydown', function( ev ) {
var nodeName = ev.target.nodeName;
if ( 'INPUT' == nodeName || 'TEXTAREA' == nodeName ) {
    return;
}
$( '#text' ).val( '' ).trigger( 'focus' );
} ); 
```

# php - 如何将第二次出现的字符与正则表达式匹配？

> ID：13707772
> 
> 赞同：0
> 
> 时间：2012-12-04T16:48:19.583
> 
> 标签：php, regex

我正在尝试匹配相对 URL 中的第二个正斜杠。

```
/dir/entry 
```

我想匹配`/`以下`dir`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:08:24.747

如果您尝试拆分路径中的目录，则将正则表达式留在工具箱中并使用`explode()`.

```
$parts = explode( '/', $path ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:15:55.740

由于 没有任何意义`/`，我假设您想找出位置。您可以使用的第四个参数来做到这一点`preg_match_all`：

```
preg_match_all('~/~', $input, $matches, PREG_OFFSET_CAPTURE);
$pos = $matches[0][1][1]; 
```

但是，索引`$matches`非常可怕。第一个索引对应于捕获。`0`是整个匹配，`1`等等`2`将`3`是捕获组（模式内的括号集）的结果，您在这里没有。第二个索引对应于匹配。你想要第二场比赛，所以你想去 index `1`。最后一个索引`0`用于实际匹配/捕获的字符串和`1`匹配/捕获的偏移量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T02:17:19.753

你想匹配第二个斜线而不是别的吗？尝试这个：

```
preg_match('~^/[^/]+\K/~', '/dir/entry'); 
```

`\K`是`MATCH POINT RESET`构造：当遇到它时，正则表达式引擎“忘记”它到目前为止看到的任何字符，并且就像当前匹配位置是匹配的开始一样。例如，如果你想用 替换第二个斜线`@`，你通常会这样做：

```
preg_replace('~^(/[^/]+)/~', '$1@', '/dir/entry');  # /dir@entry 
```

但是，如果您处于无法使用捕获组的情况下，`\K`将为您设置正确的：

```
preg_replace('~^/[^/]+\K/~', '@', '/dir/entry');  # /dir@entry 
```

`\K`仅在我所知道的 Perl 和 PHP 中受支持。

# linux - gnuplot 显示问题 - 红帽

> ID：13707775
> 
> 赞同：1
> 
> 时间：2012-12-04T16:48:31.483
> 
> 标签：linux, gnuplot, redhat

我有一个 gnuplot 脚本来跟踪某些参数随时间的变化。这适用于我们 linux 网络上的所有桌面，除了一个：

这是代码和输出

```
 gnuplot -geometry 1024x768 -persist << EOF

    set datafile separator ","
    set datafile missing ""
    set size 1.0, 1.0
    set origin 0.0, 0.0
#   set key at 0,0
    set key spacing 1.3
    set key horiz ins top center box lw 0
    set border 3

    set multiplot
    set size 0.45,0.45
    set origin 0.02,0.02 #bottom left Tl H2
    set grid

    set xdata time
    set timefmt "%d/%m/%y"
    #   set xtics format "%d/%m/%y" 
    set xrange ["$thirty_days_ago":"$todays_date_4_2"]
    set xtics rotate nomirror
    set xtics "$thirty_days_ago",172800,"$todays_date_4_2"

    set yrange [0:30]
    set ytics nomirror
    set title "Tl201 CFOV $l H2" font "Helvetica"
    plot \
        '/misc/${camera2}_data/${camera2}/${qc}/tl_h2_qc_s' using 1:17  pt 5 ti ' NEMA Diff (%)' with linespoints,\
        '/misc/${camera2}_data/${camera2}/${qc}/tl_h2_qc_s' using 1:16 lt 3 pt 5 ti 'NEMA Int (%)' with linespoints,\
        '/misc/${camera2}_data/${camera2}/${qc}/tl_h2_qc_s' using 1:12 lt 4 pt 5 ti 'CoV (%)' with linespoints

    set origin 0.02,0.52 #top left Tl H1
    set title "Tl201 CFOV $l H1"
    if ("$camera2" eq "blue1" || "$camera2" eq "red1") plot \
        '/misc/${camera2}_data/${camera2}/${qc}/tl_h1_qc_s' using 1:17  pt 5 ti ' NEMA Diff (%)' with linespoints,\
        '/misc/${camera2}_data/${camera2}/${qc}/tl_h1_qc_s' using 1:16 lt 3 pt 5 ti 'NEMA Int (%)' with linespoints,\
        '/misc/${camera2}_data/${camera2}/${qc}/tl_h1_qc_s' using 1:12 lt 4 pt 5 ti 'CoV (%)' with linespoints

    set origin 0.52,0.02 #bottom right Tc H2
    set title "Tc99m CFOV $l H2"    
    plot \
        '/misc/${camera2}_data/${camera2}/${qc}/tc_h2_qc_s' using 1:17  pt 5 ti ' NEMA Diff (%)' with linespoints,\
        '/misc/${camera2}_data/${camera2}/${qc}/tc_h2_qc_s' using 1:16 lt 3 pt 5 ti 'NEMA Int (%)' with linespoints,\
        '/misc/${camera2}_data/${camera2}/${qc}/tc_h2_qc_s' using 1:12 lt 4 pt 5 ti 'CoV (%)' with linespoints

    set origin 0.52,0.52 #top right
    set title "Tc99m CFOV $l H1"    
    if ("$camera2" eq "blue1" || "$camera2" eq "red1") plot \
        '/misc/${camera2}_data/${camera2}/${qc}/tc_h1_qc_s' using 1:17  pt 5 ti ' NEMA Diff (%)' with linespoints,\
        '/misc/${camera2}_data/${camera2}/${qc}/tc_h1_qc_s' using 1:16 lt 3 pt 5 ti 'NEMA Int (%)' with linespoints,\
        '/misc/${camera2}_data/${camera2}/${qc}/tc_h1_qc_s' using 1:12 lt 4 pt 5 ti 'CoV (%)' with linespoints

    unset multiplot

EOF 
```

当我在我的机器上运行它时，我得到以下输出![在此处输入图像描述](../Images/58aceb36a42295fed7cc6d1c7920283d.png)

为什么这么乱？当我单击切换网格按钮时，我丢失了 4 个图中的 3 个，但一个图看起来更像它应该的。![在此处输入图像描述](../Images/38f2867a8c38f3aad69b2ad6ef6caca7.png)

这是测试命令的输出。看起来不错 ![在此处输入图像描述](../Images/5eb3a050b93e90488d59068d840c31fe.png)

这似乎不是 gnuplot 的问题，而是我的 linux 设置。我正在运行 RedHat Client 5.8 版。任何想法这里发生了什么

# objective-c - 当用户更改值时启用完成按钮 - Xcode

> ID：13707776
> 
> 赞同：0
> 
> 时间：2012-12-04T16:48:37.430
> 
> 标签：objective-c, ios, uibutton

如果在键盘上键入任何值而没有按回车键并且其中两个标签已从“选择”更改为其他内容，我正在尝试使其位于顶部的按钮处于启用状态。但是，我尝试使用 IBAction 说：

```
 - (IBAction)valuesChanged {
if (textField.text != nil && ![labelOne.text isEqualToString:@"Select"] && ![labelTwo.text isEqualToString:@"Select"]) {
    NSLog(@"Success");
 }

else {
    NSLog(@"No Success");
   }
} 
```

但我意识到这不起作用，因为：

*   当我将 IBAction Sent Event 设置为“Value Changed”时，文本字段不起作用
*   标签不会接受操作。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:29:14.503

告诉您用户正在文本字段中键入字符或以其他方式更改其内容的文本字段委托方法是`textField:shouldChangeCharactersInRange:replacementString:`. 在您的文本字段委托中实现它并根据需要做出响应。您也将返回 YES。

您的原始代码无法连接的一个原因可能是您没有使用 IBAction 方法的规范形式；它应该是

```
 - (IBAction)valuesChanged:(id)sender { 
```

原始代码中的另一个问题是 UITextField 不会发出 Value Changed。你想要的是编辑改变。但是委托方法也同样有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:56:10.560

尝试`UITextField`委托方法。

```
- (void)textFieldDidBeginEditing:(UITextField *)textField;
- (void)textFieldDidEndEditing:(UITextField *)textField; 
```

# drupal - Webform提交：如何通过邮件发送变量的翻译

> ID：13707777
> 
> 赞同：1
> 
> 时间：2012-12-04T16:48:39.693
> 
> 标签：drupal, drupal-webform, drupal-form-submission

在 Drupal 项目中，我有一个基本的 weborm。用户一提交，就会发送一封电子邮件，其中包含他刚刚写的所有内容。

例子：

Imp_First_Name:%value[firstname] Imp_Last_Name:%value[lastname] Imp_City:%value[lastname] Imp_Country:%value[country] Imp_Email:%value[email] Imp_Subject:%value[subject] 我在这行有问题：

Imp_Subject:%value[subject] 主题包含用户在选择列表中选择的内容。我的问题是当网站设置为中文时，显然都是用中文写的，但我不希望发送中文版本。我需要英文的。

例如 ：

在我的网络表单中，用户可以在 3 个国家/地区之间进行选择：

|阿富汗阿尔巴尼亚|Afrique du Su Su|阿尔巴尼亚阿尔巴尼亚我需要拉丁字母的国家名称！我怎么能做到这一点？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T23:54:28.470

这是一个棘手的问题......有替换和两个可能的模板层。一个来自 webform，第二个来自邮件系统/邮件处理模块。

我假设替换是在模板层之前完成的，因此 t() 函数应该应用在该级别的挂钩内或适当的模板文件内。

使用 XDebug 进行调试确实有助于解决问题。

# c# - 在控制器中获取分组复选框

> ID：13707779
> 
> 赞同：1
> 
> 时间：2012-12-04T16:48:41.550
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我在视图中有一个复选框组。

```
name = "group"; 
```

我想遍历这组复选框，但我需要找到一种方法将它们放在一起；

所有选定的复选框都与其值一起发布。

我可以做这样的事情吗（一个直接的陈述）：

```
string[] name = Request.QueryString('group');

foreach(string value in name) {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:05:03.683

复选框不会在您的查询字符串中返回，而是发布到您的控制器。

只会返回选中的复选框值。要检索可能的复选框值的整个列表，您需要从源中重新组合这些值。

```
@foreach (var item in Model.tags)
{
    <label>
        <input type="checkbox" name="Tag" value="@item.TagID"
        @if (item.Selected) { <text>checked="checked"</text> }
        />
        @item.Name
    </label>
}

[HttpPost]
public RedirectToRouteResult MyAction(IEnumerable<int> Tag)
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:23:22.680

andleer 的解决方案将起作用（我对他的回答进行了细微调整，需要获得批准）。但是，有一种更好的方法来处理复选框列表。请参阅[CheckBoxList(For) 扩展](http://www.codeproject.com/Articles/292050/CheckBoxList-For-A-missing-MVC-extension)

# jquery - 显示第一段然后单击显示其余部分

> ID：13707785
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:48:58.077
> 
> 标签：jquery

我需要能够在每个列中显示第一段，然后单击查找更多以显示该列的其他段落。

```
 <div class="row">
            <div class="col">
              <h2>About Us</h2>
              <img src="images/aboutus.jpg">
              <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est.</p>
              <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est.</p>
<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est.</p>
              <div class="sub-content-btn">Find out more</div>
            </div>
            <div class="col">
              <h2>About Us</h2>
              <img src="images/aboutus.jpg">
              <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est.</p>
              <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est.</p>
              <div class="sub-content-btn">Find out more</div>
            </div>
            <div class="col">
              <h2>About Us</h2>
              <img src="images/aboutus.jpg">
              <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est.</p>
              <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est.</p>
<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est.</p>
              <div class="sub-content-btn">Find out more</div>
            </div>
          </div> 
```

这是目前使用的 jQuery：

```
$('.col').each(function() { 
    $(this).find('p:not(:first)').hide();
  });

  $('.sub-content-btn').click(function() {
    $(this).parent('.col').find('p').show();
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:51:31.100

尝试这个

```
$('div.col').each(function() {
    $(this).find('p:eq(0)').show();
});

$('.sub-content-btn').on('click', function() {
    $(this).prev('p').show();
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/baGSF/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:06:15.110

这个怎么样（保持你当前的标记完好无损） -

```
$('.sub-content-btn').click(function() {
    $(this).parent('.col').find('p:nth-child(4)').toggle();
}); 
```

见[http://jsfiddle.net/CXkqn/](http://jsfiddle.net/CXkqn/)

基于将“更多”类添加到额外段落 -

```
$('.sub-content-btn').click(function() {
    $(this).parent('.col').find('.more').toggle();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:56:46.780

您可以这样做，使用 CSS 中的可见性属性来隐藏您的附加段落，并使用 JS 中的 show() 和 hide() 函数来更改此属性。我提供了一个示例回调......你必须把它放在一个事件处理程序中，比如按钮单击或其他东西。

```
<head>
<style type="text/css">
    p.more {
        visibility: hidden;
    }
</style>

<script type="text/javascript">
// on click...
function some_callback(e) {
    $('p.more').show();
}
</script>
</head>

<body>
...
<p class="first">first paragraph is visible</p>
<p class="more">this paragraph is hidden</p>
<p class="more">you have to click to see these other paragraphs</p>
</body> 
```

# c# - 使用 ZeroMQ 通过 Internet 进行客户端/服务器通信

> ID：13707796
> 
> 赞同：1
> 
> 时间：2012-12-04T16:49:21.743
> 
> 标签：c#, sockets, networking, zeromq

我是 zeroMQ 的新手。我正在尝试开发一个简单的客户端服务器应用程序，并且我正在关注 zeroMQ 网站上的教程：

**服务器：http: //zguide.zeromq.org/cs:** [wuserver](http://zguide.zeromq.org/cs:wuserver)

**客户端：http://zguide.zeromq.org/cs:** [wuclient](http://zguide.zeromq.org/cs:wuclient)

当我尝试使用本地主机环回 IP(127.0.0.1) 或内部 LAN IP 连接到服务器时，它工作正常，但是当我尝试通过 Internet 连接时，我在客户端没有收到任何消息。

我有几个问题：

**1-这甚至可能吗？如果没有，那么有没有更好的方法来实现发布者/订阅者消息传递模型？**

**2-我做错什么了吗？我需要做一些不同的事情来通过互联网进行交流吗？**

希望能得到一些积极的反馈。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T01:41:43.797

您可能有一个防火墙阻止了与您正在使用的端口的外部连接。您可以尝试查看路由器的管理员 () 并打开某个端口以用于测试。

# php - Android http post给出了禁止的错误

> ID：13707798
> 
> 赞同：0
> 
> 时间：2012-12-04T16:49:26.623
> 
> 标签：php

我正在使用 Httppost 将一些数据从 android 发布到 PHP 服务器。到目前为止一切正常。但现在我收到“403 Forbidden”错误。

我注意到如果我通过`Cheese Burger X 1 = 4.95}:Sub Total = £4.95`then`NameValuePair`它按预期工作，但是当我通过`Chips X 1 = 0.60}:Sub Total = £0.60`then 它给出错误 403。我尝试了各种组合，我确信当我更改文本时它会失败，否则它会起作用。

知道那里发生了什么吗？

```
31.107.94.39 - - [04/Dec/2012:11:03:58 -0600] "POST /index.php/orders/create HTTP/1.1" 200 13 "-" "Apache-HttpClient/UNAVAILABLE (java 1.4)" 
```

并在失败时这样说-

```
 [04/Dec/2012:11:02:48 -0600] "POST /index.php/orders/create HTTP/1.1" 404 - "-" "Apache-HttpClient/UNAVAILABLE (java 1.4)" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:55:07.413

我得到了问题。“=”字符导致“ `Detected an illegal character in input string`”错误。我删除了它并修复了它。

# python - 文件写入错误 - 文件不完整

> ID：13707800
> 
> 赞同：1
> 
> 时间：2012-12-04T16:49:28.183
> 
> 标签：python, file-io

我有一个大文件，我在其上实现了图形算法。程序没有问题。但是我必须将输出写入文件。我的输入将是一个数字，输出将是输入节点连接到的所有节点。生成的文件相当大，大约 4-5 页后突然停止。我遇到并使用了该`flush()`功能，但无济于事。

我的文件写入代码是：

```
djkpath =(path[i]," -> ",path[i+1], "[weight = ", g.weights[(path[i], path[i+1])],"]")
            #print(path[i] -> path[i+1] [weight = g.weights[(path[i], path[i+1])]])
            finaldjk = " ".join(map(str, djkpath))
            fo.write(finaldjk)
            fo.write('\n')

fo.write('\n')
fo.write("}")
fo.close()
fo.flush() 
```

生成的文件看起来像（我刚刚包含了看起来不完整的文件末尾）：

```
150  ->  75 [weight =  12 ]
75  ->  45 [weight =  25 ]
85  ->  150 [weight =  9 ]
150  ->  55 [weight =  7 ]
55  ->  20 [weight =  17 ]
20  ->  120 [weight =  7 ]
120  ->  43 [weight 
```

# android - Android：如何触摸底层活动

> ID：13707803
> 
> 赞同：1
> 
> 时间：2012-12-04T16:49:31.943
> 
> 标签：android, events, view, android-activity, touch

我有一个 GoogleMaps 组件的活动。这是一个线性布局，大小为 wrap_content 和半透明样式。Map 是唯一的 ui 元素，具有固定大小。Map 之外的触摸事件如何委托给底层活动？

任何提示表示赞赏！马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:58:02.153

它不能。一次`Activity`只能激活一个。由于活动主题的半透明主题，底层`Activity`可能是可见的，但它会[暂停](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)，因此不会对任何触摸事件做出反应。

在单个布局中使用片段或组合布局`Activity`

# java - 关于在 Java 中加载 Class 实例

> ID：13707804
> 
> 赞同：3
> 
> 时间：2012-12-04T16:49:33.477
> 
> 标签：java

以下代码是否有可能打印“假”？

如果在程序执行期间可能会加载 Class 类型的对象然后卸载然后重新加载，那么这可能会打印 false ？

android和“普通java”的情况是否相同？

```
 class Person
    {
      Integer age;
      Person(Integer age) {this.age=age;}
    }

    int v1;
    {
      Person p1 = new Person(5);
      v1 = System.identityHashCode(p1.getClass());
    }
    .
    .

    int v2;
    {
      Person p2 = new Person(10);
      v2 = System.identityHashCode(p2.getClass());
    }

    if (v1 == v2)
      System.out.println("true");
    else
      System.out.println("false"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:02:25.980

如果所有代码（除了 Person 的类定义都在一个类中，我认为它不能获得 Person 类的两个不同实例。

如果你使用像 OSGI 这样的东西，你实际上可以通过不同的类加载器多次加载 Person-class，它们的 hashCodes 会不同，所以我猜：

是的，您可以构建返回“false”的案例

由于您不保留对 Person 实例的引用，因此理论上该类实际上可以被卸载，当两个实例化部分本身通过反射加载并随后收集垃圾时。AFAIK 语言规范中没有任何内容可以防止类定义的垃圾收集。当您有一个 Web 容器时，这非常重要，您在开发过程中一直在其中部署新版本的类。如果旧版本没有得到垃圾收集，这将导致内存问题。

也可以看看：

[在java中卸载类？](https://stackoverflow.com/questions/148681/unloading-classes-in-java)

[如何在 Java 中卸载已加载的类？](https://stackoverflow.com/questions/2095974/how-to-unload-a-already-loaded-class-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:54:00.543

此代码应始终打印为 true。当您使用 p1.getClass() 指向同一个类时

```
identityHashCode

public static int identityHashCode(Object x)
Returns the same hash code for the given object as would be returned by the default method hashCode(), whether or not the given object's class overrides hashCode(). The hash code for the null reference is zero.
Parameters:
x - object for which the hashCode is to be calculated
Returns:
the hashCode
Since:
JDK1.1 
```

根据上面写的描述，它将给出默认的 hashCode 值，该值在对象实例化中总是不同的......

Person 是 Class 类的一个实例，所以 P1.getClass 和 P2.getClass 指向同一个类实例......所以 V1 == V2。

# spring-mvc - Spring MVC 复选框路径

> ID：13707806
> 
> 赞同：0
> 
> 时间：2012-12-04T16:49:38.367
> 
> 标签：spring-mvc, checkbox

我在 JSP 上有以下内容

`<form:form method="post" action="${submit}" id="id" commandName="object"> <form:checkboxes path="ratings" items="${ratingsList}">`

这里， ratingList 是在 Controller 中设置的。
`model.put("object",object); model.put("ratingsList",ratingsList);`

加载时我看到页面上的所有复选框。我也可以将其保存在列表中的评级中。但是，当我回到这个页面时，我希望在页面上选择保存在“评级”列表中的评级。

我收到以下错误。

`Caused by: org.springframework.core.convert.ConversionFailedException: Unable to convert value "[0]" from type 'java.util.List' to type 'java.lang.String'; nested exception is java.lang.IllegalArgumentException:`

# php - Flickr API：获取具有特定尺寸的所有图像的列表

> ID：13707807
> 
> 赞同：3
> 
> 时间：2012-12-04T16:49:38.557
> 
> 标签：php, javascript, flickr

当我从 Flickr 获取数据时，默认情况下它只包括大图像和方形缩略图。示例响应：[http ://api.flickr.com/services/feeds/photos_public.gne?id=46197864@N02&format=rss2](http://api.flickr.com/services/feeds/photos_public.gne?id=46197864@N02&format=rss2)

有什么方法可以包括其他特定尺寸[http://www.flickr.com/services/api/flickr.photos.getSizes.html](http://www.flickr.com/services/api/flickr.photos.getSizes.html)

或者我需要为每个图像创建单独的请求？

我可以访问所有 API 密钥等

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:16:10.043

发现它，方法中有`extras`参数`flickr.photosets.getPhotos`，它允许向图像添加其他参数，例如图像大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-26T07:29:23.723

在 PHP 中。我使用页面属性转到所有结果页面。

```
 $page = 1;
 $perPage = 500;
 $tag = "flowers";

 while ($page <= 10000){
  $url = 'https://api.flickr.com/services/rest/?method=flickr.photos.search';
  $url.= '&api_key='.$api_key;
  $url.= '&tags='.$tag;
  $url.= '&per_page='.$perPage;
  $url.= '&format=json';
  $url.= '&nojsoncallback=1';
  $url.= '&page='.$page;

  $result = file_get_contents($url);
  $response = json_decode($result);

  //get info each photo here

  //go to next page
  $page++;
} 
```

# php - 读取文件时使用 2 的幂有优势吗

> ID：13707811
> 
> 赞同：9
> 
> 时间：2012-12-04T16:49:49.307
> 
> 标签：php

> **可能重复：**
> [使用 FileInputStream 时如何确定理想的缓冲区大小？](https://stackoverflow.com/questions/236861/how-do-you-determine-the-ideal-buffer-size-when-using-fileinputstream)

有`fread($file, 8192)`比 更好或更安全的`fread($file, 10000)`吗？为什么大多数示例使用 2 的幂？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T17:12:33.783

请参阅[这个问题*的*公认答案](https://stackoverflow.com/a/237495/1820695)：[How do you determine the Ideal buffer size when using FileInputStream?](https://stackoverflow.com/questions/236861/how-do-you-determine-the-ideal-buffer-size-when-using-fileinputstream) .

> 大多数文件系统配置为使用 4096 或 8192 的块大小。理论上，如果您配置缓冲区大小以便读取比磁盘块多几个字节，则对文件系统的操作可能非常低效（即，如果您将缓冲区配置为一次读取 4100 个字节，每次读取需要文件系统读取 2 次块）。如果这些块已经在缓存中，那么您最终会付出 RAM -> L3/L2 缓存延迟的代价。如果你不走运并且块还没有在缓存中，那么你也要付出磁盘-> RAM 延迟的代价。
> 
> 这就是为什么您会看到大多数缓冲区大小为 2 的幂，并且通常大于（或等于）磁盘块大小。这意味着您的一个流读取可能会导致多个磁盘块读取 - 但这些读取将始终使用完整块 - 不会浪费读取。

尽管这个问题与 Java 相关，但答案却不是。此外，它几乎与语言无关。该答案涵盖了我所知道的有关缓冲区大小的所有因素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:53:10.170

要么是因为：

*   选择任意数字的程序员喜欢选择两个权力，或
*   在某种过早的优化中，程序员认为读取块大小的倍数会带来某种速度提升。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T17:21:05.607

操作系统以[页](http://en.wikipedia.org/wiki/Page_%28computer_memory%29)为单位分配内存（通常为 4k - 但有时为 8k）。

在这种情况下，使用 8192 字节的倍数的缓冲区大小可以提高内存分配的效率（因为它也适合 4096 字节的倍数）。

如果您请求 13k 的内存，无论如何都会使用 16k，所以为什么不从 16k 开始。

CPU 指令集也经过优化，可以处理与某些边界对齐的数据，无论是 32、64 还是 128 位。使用与 3 位或 5 位或其他奇怪的数据对齐的数据会增加额外的处理开销。

这不是特定于 PHP 的，它在操作系统自己的内存管理之上使用 Zend 内存管理器，并且可能会预先分配更大的内存块，并将内存管理的问题从用户身上转移开。

# html - 将我的按钮添加到谷歌网站

> ID：13707813
> 
> 赞同：0
> 
> 时间：2012-12-04T16:49:51.130
> 
> 标签：html, button, sites

我在我的谷歌网站上单击编辑页面，然后在我添加此代码的地方添加 html 框

```
<button type="button" onclick="window.open('http://www.google.com','_blank','resizable=yes')" >Click to open Google</button> 
```

但是由于某种原因它不起作用，尽管我在一些 html 编辑器上对其进行了测试并且它起作用了。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:48:25.003

you can also try this

```
<a href="www.google.com" targer="_blank"><input type="button" value="Click to open Google" /></a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:15:12.970

它可能是某种安全功能，代码是正确的，你可以[在这里](http://jsfiddle.net/DhAfj/1/)看到。但[在这里](http://codepen.io/joe/pen/IqCvf)它也不起作用。

您可以尝试使用链接：

```
<a href="www.google.com" target="_blank">Click to open Google</a> 
```

Ps.：关闭所有标签很好（`</button>`在按钮文本之后）：

```
<button type="button" onclick="window.open('http://www.google.com','_blank','resizable=yes')" >Click to open Google</button> 
```

# asp.net-mvc-2 - ASP.NET Html Extension 没有触发？

> ID：13707816
> 
> 赞同：0
> 
> 时间：2012-12-04T16:50:01.100
> 
> 标签：asp.net-mvc-2, extension-methods

我有几个扩展类，从不同的地方借来的，它们都可以单独工作。当我尝试在同一页面上同时使用两者时，似乎其中一个不起作用。这是设置：

*   MVC 2（没有升级到 MVC 3 或 4 的途径）
*   HtmlPrefixScopeExtensions - [http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)
*   FileBoxHtmlHelperExtension - [http://forums.asp.net/p/1566760/4033836.aspx](http://forums.asp.net/p/1566760/4033836.aspx)

.ascx 页面代码如下所示：

```
<%@ Control Language="C#" AutoEventWireup="true" Inherits="System.Web.Mvc.ViewUserControl<PB.WMATA.ApplicationServices.ViewModels.Files.CIPDocumentAndFile>" %>
<%@ Import Namespace="Company.Web.Extensions"%>

<div class="editorRow">
    <% using(Html.BeginCollectionItem("docs")) { %>

        <%= Html.Hidden("CIPDocument.Id", (Model != null) ? Model.Id : 0) %>

        <label for="CIPNumber">Document Name:</label>
        <%= Html.TextBox("CIPNumber", (Model != null) ? Model.CIPNumber : "", new { @size = "50", @maxlength = "255" })%>
        <%= Html.ValidationMessage("CIPNumber")%>
        &nbsp;
        <% if (Model != null && Model.FileName != null && Model.FileName.Length > 0) { %>
            <label>Current File:</label>
            <%= Model.FileName %>
        <% } else { %>
            <label>
                File Upload:
                    <%= Html.FileBoxFor(m => m.HttpPostedFileBase) %>
            </label>
        <% } %>
        <a href="#" class="deleteRow">delete</a>
    <% } %>
</div> 
```

输出如下所示：

```
<div class="editorRow">
<input name="docs.index" autocomplete="off" value="1809201d-2143-4da3-ba34-e443a332c516" type="hidden">
<input id="docs_1809201d-2143-4da3-ba34-e443a332c516__CIPDocument_Id" name="docs[1809201d-2143-4da3-ba34-e443a332c516].CIPDocument.Id" value="0" type="hidden">
<label for="CIPNumber">
Document Name:
</label>
<input id="docs_1809201d-2143-4da3-ba34-e443a332c516__CIPNumber" maxlength="255" name="docs[1809201d-2143-4da3-ba34-e443a332c516].CIPNumber" size="50" value="" type="text">
&nbsp; 
<label>
File Upload: 
<input id="HttpPostedFileBase" name="HttpPostedFileBase" type="file">
</label>
<a href="#" class="deleteRow">
delete
</a>
</div> 
```

注意 FileUpload 控件没有获得 HtmlPrefixScope。我期望它是：

```
<input id="docs_1809201d-2143-4da3-ba34-e443a332c516__HttpPostedFileBase" name="docs[1809201d-2143-4da3-ba34-e443a332c516].HttpPostedFileBase" type="file"> 
```

我对扩展不够精通，无法了解可能发生的情况。我怀疑在尝试处理文件箱扩展之前正在处理集合扩展。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:29:39.937

深入研究后发现我需要获取 TemplateInfo.HtmlFieldPrefix 值，因为 Html.BeginCollectionItem("docs") 调用已更改它。一旦我了解了 TemplateInfo 对象的生命周期，这真的很简单。这是 FileBox 和 FileBoxFor 代码片段的更改代码：

```
public static MvcHtmlString FileBox(this HtmlHelper htmlHelper, string name, IDictionary<String, Object> htmlAttributes)
{
    // If the HtmlFieldPrefix has been altered (see HtmlPrefixScopeExtensions class!!) then this will work with it...
    var htmlFieldPrefix = htmlHelper.ViewData.TemplateInfo.HtmlFieldPrefix;
    name = (!string.IsNullOrEmpty(htmlFieldPrefix) ? string.Format("{0}.", htmlFieldPrefix) : "") + name;

    var tagBuilder = new TagBuilder("input");
    tagBuilder.MergeAttributes(htmlAttributes);
    tagBuilder.MergeAttribute("type", "file", true);
    tagBuilder.MergeAttribute("name", name, true);
    tagBuilder.GenerateId(name);

    ModelState modelState;
    if (htmlHelper.ViewData.ModelState.TryGetValue(name, out modelState))
    {
        if (modelState.Errors.Count > 0)
        {
            tagBuilder.AddCssClass(HtmlHelper.ValidationInputCssClassName);
        }
    }

    return MvcHtmlString.Create(tagBuilder.ToString(TagRenderMode.SelfClosing));
} 
```

# regex - 使用 grep 查找以下模式的所有出现

> ID：13707818
> 
> 赞同：0
> 
> 时间：2012-12-04T16:50:02.050
> 
> 标签：regex

我正在尝试查找所有出现的模式，如下所示：

```
/*  93 */
/*  94 */
/*     */
/*  96 */
/*  99 */
/*     */
/* 101 */ 
```

我不幸地未能生成正确的正则表达式。期望的目标是找到与上述所有匹配的所有内容

我用过的表达方式

```
(\/)(\*)(\s)(\s)(\d)(\d)(\s)(\*)(\/) 
```

它匹配第一次出现`/* somenumber */`但没有后续匹配。当有三位数字和没有数字的数字时，它也不会匹配时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:08:47.080

这就是你要找的

```
 \/\*\s*\d+\s*\*\/ 
```

* * *

`regex`除非您想将其存储在一个组中，否则无需将每个部分分组

`\d+`匹配 1 到多个数字..

`\s*`匹配 0 到多个空格..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:09:56.450

尝试以下操作：

`\/\*[^\*]*\*\/`

[http://www.rubular.com/r/HMDl9QH3uq](http://www.rubular.com/r/HMDl9QH3uq)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:35:59.923

试试 '/* *[0-9 ][0-9 ][0-9 ] **/'

此表达式将只选择您的行，不会选择

/* xxx */

/* C */

/* 1014 */

# oracle - 更新触发器后的 Oracle 无法正确执行

> ID：13707819
> 
> 赞同：0
> 
> 时间：2012-12-04T16:50:06.220
> 
> 标签：oracle, plsql, triggers

我有两个表，tblapplication 和 tblapplicationhistory。tblapplicationhistory 是对应用程序表中应用程序状态所做的每次更改的存档。申请表中的一个学生可以有许多申请。

当应用程序状态变为“Offer accepted”时，状态 ID 设置为 7。这将反映在 application 和 applicationhistory 表中。此时，给定学生的所有其他申请状态应设置为 8，“Offer denied”。

```
create or replace
TRIGGER trg_declineapplications AFTER UPDATE ON tblapplicationhistory FOR EACH ROW

BEGIN
   IF :NEW.statusid_fk_nn = 7 THEN
      UPDATE tblapplication
      SET statusid_fk_nn = 8
      WHERE studentrecordnumber_fk_nn = ( SELECT studentrecordnumber_fk_nn
                                          FROM tblapplication
                                          WHERE applicationid_pk_nn = :NEW.applicationid_fk_nn
                                        )
      AND applicationid_pk_nn != :NEW.applicationid_fk_nn;
   END IF;
END; 
```

触发器编译时没有错误，触发器激活时不返回任何 SQL 错误，但不对应用程序表中的任何行执行任何计算。在那种情况下，触发器的逻辑肯定有错误，但我没有看到。

在我看来，如果 tblapplicationhistory 中更新的行包含 statusID 7，那么会在 application 表上执行更新，将 statusID 设置为 8，以便为属于同一学生的每个应用程序而不是接受的应用程序。

如果需要，可以提供更多信息。

表定义：

```
tblapplication:
applicationid_pk_nn
studentrecordnumber_fk_nn
jobid_fk_nn
statusid_fk_nn

tblapplicationhistory:
applicationid_fk_nn
statusid_fk_nn
datechanged_nn
applicationhistoryid_pk_nn 
```

在 tblapplication 中，主键是 applicationid_pk_nn，所有其他字段都是外键。

在 tblapplicationhistory 中，applicationhistoryid_pk_nn 是主键。statusid_fk_nn 使用 applicationid_fk_nn 从 tblapplication 中检索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:32:08.563

触发方法看起来不是很健壮。

当您更新记录以将应用程序设置为接受/拒绝时，您会执行以下操作：

```
 update my_table
 set    status_id = case my_table.application_id
                      when application_id_for_accepted_offer then 7
                      else 8
                    end
 where  student_id = student_id_to_update; 
```

# oop - 使用构造函数与设置函数

> ID：13707820
> 
> 赞同：1
> 
> 时间：2012-12-04T16:50:08.353
> 
> 标签：oop

使用带参数的构造函数来初始化类的成员或者间接使用setter函数更好吗？到目前为止，我还没有得到关于这个问题的明确答案。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T16:55:47.017

这几乎可以肯定是设计选择或有时风格的问题。我会考虑很多事情：

1.  在不设置成员变量的情况下构造对象会使类处于无效状态吗？如果是这样，您将需要您的构造函数为这些成员获取有效值。否则，您应该能够提供有用的默认值。

2.  设置变量的单个成员会违反类不变量吗？如果是这样，他们不应该有自己的二传手。

3.  这个类的用户是否可能想要修改个别成员？如果是这样，那么二传手可能是合适的。

4.  能够更改对象的各个成员是否具有概念意义？我认为能够更改 a`Person`的出生日期是没有意义的。但是，您可能会争辩说更改 a`Person`的名称确实有意义。这取决于。您是否认为在您的系统中`Person`名称已更改的名称有所不同`Person`？

5.  您可以将 setter 组合在一起以更有用吗？而不是`Rectangle::setX(int)`and `Rectangle::setY(int)`，是否`Rectangle::setPosition(int,int)`更有意义？也许甚至`Rectangle::setPosition(Point)`更好。

在任何情况下，一个类的全部成员都通过单独的 setter 和 getter 暴露出来，这通常是一种代码异味。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:59:22.753

这取决于。当然，在没有有效类成员的情况下对象没有意义的情况下使用构造函数参数 - 例如，作用域智能指针或 ofstream 的文件名。

```
explicit ofstream ( const char * filename, ios_base::openmode mode = ios_base::out ); 
```

谨慎使用附加参数，并尽可能提供默认值。

但是，不要添加太多的构造函数参数，以免顺序变得无法记住，或者如果有可能造成危险的混淆，例如这样。

```
Person(std::string firstname, std::string lastname, std::string title, std::string occupation,
  std::string address, std::string telephone, int age, std::string creditcard, time_t birthday) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T16:53:10.213

您要避免的一件事是拥有一个不完整的对象。如果您可以为每个参数提供合理的默认值，那么可以跳过在构造函数中设置它们，否则您真的应该将它们放在那里。

当然，你没有理由不能两者兼得。

# jquery - jquery：将单选按钮值与隐藏值进行比较

> ID：13707833
> 
> 赞同：1
> 
> 时间：2012-12-04T16:50:35.457
> 
> 标签：jquery, html

我在 html 中实现了以下李克特量表（注意最后的隐藏字段）：

```
<ul class="likert">
    <li class="likert">Not Empathetic<input type="radio" value="1" />
    <li class="likert"><input type="radio" value="2" />
    <li class="likert"><input type="radio" value="3" />
    <li class="likert"><input type="radio" value="4" />
    <li class="likert">Very Empathetic<input type="radio" value="5" />
</ul>
<input class="answer-key" type="hidden" value="5"/> 
```

我正在尝试将所选单选按钮的值与隐藏字段中存储的值进行比较。

在 jquery 中，我有以下内容：

```
$(document).ready(function(){

//click handler
$('input[type=radio]').click(function(){

    var value = $(this).val();

    //DOESN'T WORK
    var answer = $(this).parent().siblings('.answer-key').val());

    compute_score(answer,value);

    });

}); 
```

我如何访问隐藏输入的值？这个页面会有多个隐藏答案，所以我需要获取这个特定李克特量表的隐藏答案的值。我愿意将隐藏的答案移动到另一个位置（可能在`<ul>`？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:55:53.053

`.parent`是不够的（只选择`<li>`）。我想你想要`.closest('ul').siblings`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:56:35.803

你在这里没有得到正确的元素。您正在检查元素，而`siblings('.answer-key')`不是.`li``ul`

```
$('input[type=radio]').click(function(){
    var value = $(this).val();

    // $(this)                                  equals <input[type=radio]>
    // $(this).parent()                         equals <li class="likert">
    // $(this).parent().siblings('.answer-key') equals nothing!
    var answer = $(this).parent().siblings('.answer-key').val();
    compute_score(answer,value);
}); 
```

你需要`$(this).parent().parent()`，才能得到`ul`。然后你可以检查兄弟姐妹。所以应该这样做：

```
 var answer = $(this).parent().parent().siblings('.answer-key').val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:57:21.437

试试这个

```
var answer = $(this).closest('ul').next('.answer-key').val(); 
```

你需要先到**ul** .. 然后`.next`用来获取下一个兄弟

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T16:58:52.927

这里 parent 将选择 li 元素

```
$(this).parent().siblings('.answer-key').val()); 
```

改成closest("ul").siblings，得到ul对应的隐藏元素。

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T17:00:57.147

html

```
<ul class="likert">
    <li class="likert">Not Empathetic <input name='radio_check' type="radio" value="1" />
    <li class="likert"><input type="radio" name='radio_check' value="2" />
    <li class="likert"><input type="radio" name='radio_check' value="3" />
    <li class="likert"><input type="radio" name='radio_check' value="4" />
    <li class="likert">Very Empathetic <input name='radio_check' type="radio" value="5" />
</ul>
<input class="answer-key" type="hidden" value="5"/> 
```

Javascript

```
jQuery(document).ready(function($){

//click handler
$('input[type=radio]').on('click',function(event){

    var value = $(this).val();

//call your javascript function
    compute_score(answer, $('input[type="hidden"].answer-key').val() );
event.preventDefault();
    });
}); 
```

//以防万一您想将名称用作选择器的一部分并验证它是否已检查 is:checked 例如...我在单选选项中添加了一个名称..因为您只能选择一个，它们可以有相同的名字

# php - PHP Foreach 数组和对象

> ID：13707836
> 
> 赞同：35
> 
> 时间：2012-12-04T16:50:39.570
> 
> 标签：php, arrays, stdclass

我有一个对象数组；运行`print_r()`返回下面的输出；

```
Array
(
    [0] => stdClass Object
        (
            [sm_id] => 1
            [c_id] => 1
        )
    [1] => stdClass Object
        (
            [sm_id] => 1
            [c_id] => 2
        )
) 
```

如何遍历结果并访问学生类对象？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-04T16:53:47.347

采用

```
//$arr should be array as you mentioned as below
foreach($arr as $key=>$value){
  echo $value->sm_id;
} 
```

或者

```
//$arr should be array as you mentioned as below
foreach($arr as $value){
  echo $value->sm_id;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-04T16:55:55.990

循环遍历数组和对象是一项非常常见的任务，你想学习如何去做是件好事。一般来说，您可以[`foreach`循环](http://php.net/manual/en/control-structures.foreach.php)遍历每个成员，为其分配一个新的临时名称，然后让您通过该名称处理该特定成员：

```
foreach ($arr as $item) {
    echo $item->sm_id;
} 
```

在这个例子中，我们在 中的每个值都`$arr`将按顺序访问`$item`。所以我们可以直接打印我们的值。如果需要，我们还可以包含索引：

```
foreach ($arr as $index => $item) {
    echo "Item at index {$index} has sm_id value {$item->sm_id}";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T16:54:04.520

假设您的`sm_id`和属性是公开的，您可以通过在数组上`c_id`使用 a 来访问它们：`foreach`

```
$array = array(/* objects in an array here */);
foreach ($array as $obj) {
    echo $obj->sm_id . '<br />' . $obj->c_id . '<br />';
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-06T12:20:52.537

使用数组或对象元素递归遍历对象或数组：

```
function traverse(&$objOrArray)
{
    foreach ($objOrArray as $key => &$value)
    {
        if (is_array($value) || is_object($value))
        {
            traverse($value);
        }
        else
        {
            // DO SOMETHING
        }
    }
} 
```

# android - 设置了“FLAG_AUTO_CANCEL”的平板电脑有什么特别之处？

> ID：13707838
> 
> 赞同：1
> 
> 时间：2012-12-04T16:50:45.297
> 
> 标签：android, android-notifications

[FLAG_AUTO_CANCEL](http://developer.android.com/reference/android/app/Notification.html#FLAG_AUTO_CANCEL)的 API说明了有关平板电脑的一些特别之处：

> 如果在用户单击通知时应取消通知，则按位或按位或应设置的标志字段中的位。在平板电脑上，

关于平板电脑的特殊句子是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:00:49.470

看起来像是签入了一个不完整的句子。Git blame 揭示了[这个提交](https://github.com/android/platform_frameworks_base/commit/2561b0b10a55841a08e0e1d467e73e10b1bf256d)，它也对 TabletStatusBar.java 做了一些更改。不过不确定是什么关系。

# python - 减去python中列表的第一个和最后一个元素

> ID：13707843
> 
> 赞同：3
> 
> 时间：2012-12-04T16:51:13.137
> 
> 标签：python, list, tuples

我有以下列表：

```
>>> list_of_lists = [[(0, 0)], [(6, 0)], [(7, 0), (8, 0), (9, 0)], [(10, 0)]] 
```

我想要的是以下内容：

```
>>> substract(list_of_lists)
[6, 1, 1] 
```

基本上我有一个列表列表。这些列表中的每一个都是元组列表。我想从后续列表中第一个元组的第一个元素中减去列表中最后一个元组的第一个元素。为了更象形的解释，

[[( *0* , 0)], [( *6* , 0)], [( *7* , 0), (8, 0), ( **9** , 0)], [( **10** , 0)]]

*6* - *0* = *6*

*7* - *6* = 1

**10** - **9** = 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:11:45.683

```
[ll[i][0][0] - ll[i-1][-1][0] for i in xrange(1,len(ll))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:08:12.763

因此，您可以使用索引访问此列表列表中的值。从那时起，您现在可以通过调用来访问数字 6 的第一个实例，

```
list_of_list[1][0][0] 
```

其中第一个索引指的是列表中的列表，第二个指的是列表中的元组，最后一个索引指的是元组中的元素。另一个例子可能是访问 8,

```
list_of_list[2][1][0] 
```

从那里您应该能够自己创建一个循环，循环遍历列表并输出所需的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:09:27.857

怎么样：

```
In [9]: ll = [[(0, 0)], [(6, 0)], [(7, 0), (8, 0), (9, 0)], [(10, 0)]]

In [10]: first = [l[0][0] for l in ll]

In [11]: last = [l[-1][0] for l in ll]

In [12]: [f - l for (f, l) in zip(first[1:], last[:-1])]
Out[12]: [6, 1, 1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T17:49:35.077

```
li = [[(0, 0)],
      [(6, 0)],
      [(7, 0), (8, 0), (9, 0)],
      [(10, 0)]]
for x in li:
    print x
print

def iti(li):
    a = li[0]
    for b in li[1:]:
        yield b[0][0]-a[-1][0]
        a = b

print list(iti(li)) 
```

在此解决方案中，列表仅迭代一次（使用 b），也就是说每个元素仅分配一次

编辑：不，实际上每个元素（即列表中的对象）第一次分配给**b**，然后再分配给**a**

# python - PyQt猴子修补QLineEdit.paste？

> ID：13707845
> 
> 赞同：2
> 
> 时间：2012-12-04T16:51:18.977
> 
> 标签：python, pyqt

我正在尝试拦截特定编辑框的 paste() 。经过大量阅读和挠头后，我决定尝试大锤子和猴子补丁。这对我也不起作用。有谁知道为什么？

```
import sys
from PyQt4 import QtGui

def myPaste():
  print("paste") # Never gets here

if __name__ == "__main__":
#    QtGui.QLineEdit.paste = myPaste # Try #1
    app = QtGui.QApplication(sys.argv)
    window = QtGui.QMainWindow()    
    window.setWindowTitle("monkey")
    centralWidget = QtGui.QWidget(window)

    edit = QtGui.QLineEdit(centralWidget)
#    QtGui.QLineEdit.paste = myPaste # Try #2
    edit.paste = myPaste # Try #3

    window.setCentralWidget(centralWidget)
    window.show()    
    app.exec_() 
```

根据反馈..我能够使用事件过滤器建议来解决我的问题。更新的示例代码如下...

```
if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    window = QtGui.QMainWindow()    
    window.setWindowTitle("monkey")

    centralWidget = QtGui.QWidget(window)
    edit = QtGui.QLineEdit(centralWidget)

    window.setCentralWidget(centralWidget)

    def eventFilter(obj, e):
        if isinstance(obj, QtGui.QLineEdit):
            if (e.type() == QtCore.QEvent.KeyPress):
                if (e.matches(QtGui.QKeySequence.Paste)):
                    obj.paste()
                    t=str(obj.text()).title() # Special handling here...uppercase each word for example
                    obj.setText(t)
                    return True
            return False
        else:
            return QtGui.QMainWindow.eventFilter(obj, e)

    window.eventFilter = eventFilter
    edit.installEventFilter(window)

    window.show()    
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T20:41:42.220

你不能“猴子补丁”`QLineEdit.paste()`的原因是因为它不是一个*虚*函数。虚函数的重要之处在于，当它们被覆盖时，重新实现的函数将被 Qt 内部调用；而非虚拟覆盖只会被 Python 代码调用。因此，由于`QLinedit.paste()`它不是虚拟的，因此您将不得不拦截通常会导致 Qt 在内部调用它的所有*事件。*

这将意味着重新实现[QLineEdit.keyPressEvent](https://doc.qt.io/qt-5/qlineedit.html#keyPressEvent)，以便您可以捕获[默认键绑定](https://doc.qt.io/qt-5/qlineedit.html#details)的快捷方式；还有[QLineEdit.contextMenuEvent](https://doc.qt.io/qt-5/qlineedit.html#contextMenuEvent)，以便您可以修改默认上下文菜单。而且，根据您要执行的操作，您可能还需要覆盖默认的拖放处理。（如果您不想使用子类，可以使用[事件过滤器](https://doc.qt.io/qt-5/qobject.html#eventFilter)来监视所有相关事件）。

[QClipboard](https://doc.qt.io/qt-5/qclipboard.html)类提供对系统剪贴板的访问，这将允许您在粘贴之前截取文本。每个应用程序都有一个剪贴板对象，可以通过`QApplication.clipboard()`或访问`qApp.clipboard()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T20:52:42.527

为了做你想做的事，你可以子类`QLineEdit`化并创建一个提供你想要的自定义粘贴功能的方法（`paste`方法不是虚拟的，所以如果它被覆盖，它将不会从 Qt 代码中调用）。此外，您将需要一个事件过滤器来拦截 CTRL+V 的快捷方式。可能您还必须过滤也用于粘贴剪贴板内容的鼠标中键。从事件过滤器中，您可以调用替换`paste`方法。

您可以使用以下代码作为起点：

```
import sys
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class myEditor(QLineEdit):
    def __init__(self, parent=None):
        super(myEditor, self).__init__(parent)

    def myPaste(self):
        self.insert("custom text pasted! ")

class myWindow(QMainWindow):
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)
        self.customEditor = myEditor(self)
        self.setCentralWidget(self.customEditor)
        self.customEditor.installEventFilter(self)

    def eventFilter(self, obj, e):
        if (obj == self.customEditor):
            if (e.type() == QEvent.KeyPress):
                if (e.matches(QKeySequence.Paste)):
                    self.customEditor.myPaste()
                    return True
            return False
        else:
            return QMainWindow.eventFilter(obj, e)

if __name__ == "__main__":
    app = QApplication(sys.argv)
    window = myWindow()
    window.show()    
    app.exec_() 
```

这里的事件过滤器只负责粘贴的键盘快捷键。正如我所说，您还需要考虑粘贴操作的其他来源。

# python - xlrd 是否从 Excel 中正确检索日期变量？

> ID：13707856
> 
> 赞同：0
> 
> 时间：2012-12-04T16:51:34.067
> 
> 标签：python, datetime, xlrd

当我偶然发现以下问题时，我试图将多张 Excel 工作簿读入 SPSS：当我使用 xlrd 将日期变量从 Excel 读入 Python 时，它似乎在日期上增加了 2 天。或者我从 Excel 格式到更人性化的表示形式的转换可能是不正确的。谁能告诉我下面的代码有什么问题？

```
import xlwt,datetime 
wb=xlwt.Workbook() 
ws=wb.add_sheet("date_1") 
fmt = xlwt.easyxf(num_format_str='M/D/YY') 
ws.write(0,0,datetime.datetime.now(),fmt) 
wb.save(r"d:\temp\datetest.xls") 

#Now open Excel file manually -> date is correct

import xlrd
wb=xlrd.open_workbook(r"d:\temp\datetest.xls") 
ws=wb.sheets()[0]
Data = ws.row_values(0)[0]
print datetime.datetime(1900,1,1,0,0,0)+datetime.timedelta(days=Data)

#Now date is 2 days off 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:15:13.923

没有。这里发生了两件事。

1 - 在 Excel 中，“1”而不是“0”对应于 1900 年 1 月 1 日 2 - Excel 包括 1900 年 2 月 29 日（从未发生过），说明了第二天的差异。出于向后兼容性的原因，这是故意这样做的。

考虑到这两点似乎可以解决所有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:26:50.947

我很确定它`xlrd`能够判断单元格何时在 Excel 中格式化为日期，并自行转换为 Python`date`对象。不过，这并不是万无一失的。

您的问题可能是从开始`datetime.datetime(1900,1,1,0,0,0)`并添加`timedelta`到它 - 您可能想尝试：

```
datetime.date(1899,12,31) + datetime.timedelta(days=Data) 
```

这应该避免（a）你从 1900 年 1 月 1 日开始添加的一天和（b）你添加的一天（我猜）让它成为一个`datetime`对象而不是`date`，这可能是推动它一直持续到第二天。不过，这只是一个猜测。

**或者，**如果您已经知道它始终是两天，那么您为什么不这样做呢？

```
print datetime.datetime(1900,1,1,0,0,0) + datetime.timedelta(days=Data - 2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T00:30:23.157

早期的答案只是部分正确。

额外信息：

有两种 Excel 日期系统：（1900 (Windows) 和 1904 (Mac)）。

1900 系统：最早的非模糊日期时间是 1900-03-01T00:00:00，表示为 61.0。

1904系统：最早的无歧义日期时间为1904-01-02T00:00:00，表示为1.0。

哪个日期系统有效，可在 xlrd 中找到`Book.datemode`。

xlrd 提供了一个函数`xldate_as_tuple`来处理上述所有问题。这段代码：

```
print datum
print datetime.datetime(1900, 1, 1) + datetime.timedelta(days=datum)
print datetime.datetime(1900, 3, 1) + datetime.timedelta(days=datum - 61)
tup = xlrd.xldate_as_tuple(datum, wb.datemode)
print tup
print datetime.datetime(*tup) 
```

产生：

```
41274.4703588
2013-01-02 11:17:19
2012-12-31 11:17:19
(2012, 12, 31, 11, 17, 19)
2012-12-31 11:17:19 
```

当 wb.datemode 为 0 (1900) 时。

这些信息都包含在随 xlrd 分发的文档中。

# .net - 如何使用 Copy Local = false 在 CruiseControl.NET 中配置 NUnit

> ID：13707857
> 
> 赞同：1
> 
> 时间：2012-12-04T16:51:35.830
> 
> 标签：.net, nunit, cruisecontrol.net

我正在配置我公司的构建服务器（运行 CruiseControl.NET）以运行 NUnit 测试。为了通过减少文件 IO 来缩短构建时间，构建设置为使用自定义目标文件关闭 Copy Local（基本上如下所示：[How do I override CopyLocal (Private) setting for references in .NET from MSBUILD](https://stackoverflow.com/questions/1682096/how-do-i-override-copylocal-private-setting-for-references-in-net-from-msbuil)）。但是，当在构建服务器上为引用其他程序集的测试项目运行 NUnit 时，Copy Local = false 会引发运行时程序集绑定错误（“无法加载文件或程序集”），因为这些程序集没有复制到 /bin 目录中测试项目。

我可以打开 Copy Local 以使其正常工作，但这会减慢构建速度。我想知道，我是否可以使用一种策略来在构建服务器上运行 NUnit 测试，同时保持 Copy Local = false？我认为这种情况以前也适用于其他人，但我遗漏了一些明显的东西。

作为参考，以下是我在 CruiseControl.NET 构建配置中运行每个测试项目的方式：

```
<exec>
     <executable>nunit-console.exe</executable>
     <baseDirectory>C:\Program Files\NUnit 2.6\bin</baseDirectory>     
     <buildArgs>C:\Source\UnitTests.csproj /xml:C:\BuildLogs;\$(ProjectName)\NUnitResults\nunit-results.xml</buildArgs>
</exec> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:54:58.673

在运行时，例如，在测试执行期间，您需要以某种方式定位引用的程序集。我想不出一种简单的方法来避免最终复制到测试项目的输出目录，我不相信这个最终复制操作会显着减慢您的构建过程。

如果您有一个包含大量项目的庞大解决方案并且围绕程序集复制的许多依赖项可能是一个问题。

**例子：**

假设您的解决方案中有 26 个项目`A`，其中不依赖、依赖、依赖……您明白了。你是测试项目吗？正如我所说：我想不出一种方法来避免在测试执行期间的输出目录中。`Z``A``B``A``C``B``Z``A.dll``Y.dll``Z`

如果您保持标准项目配置`A`被编译`A.dll`并复制到`[SolutionDir]\A\bin\[Configuration]\`. 然后与 to一起`B`编译并复制到。然后与和一起编译并复制到。这种方式复制26次，复制25次，以此类推。`B.dll``A.dll``[SolutionDir]\B\bin\[Configuration]\``C``C.dll``A.dll``B.dll``[SolutionDir]\C\bin\[Configuration]\``A.dll``B.dll`

在这种情况下，我的建议是让所有项目的输出目录指向单个解决方案输出目录，例如`[SolutionDir]\bin`. 这就是涡轮增压我们的构建过程。

# c - 计算 C 中 k 的倍数的递归函数调用

> ID：13707859
> 
> 赞同：0
> 
> 时间：2012-12-04T16:51:44.023
> 
> 标签：c, function, recursion, ackermann

任务是创建一个使用递归计算阿克曼方程的程序，我成功地做到了。部分作业说：

*“函数应该打印递归函数调用的数量，它是 k 的倍数。对于 n 的值设置 k = 100；m <= 3，并且对于所有其他值设置 k = 1;000;000。您的程序还应该打印进行的函数调用总数。”*

*ackermann*函数应该打印出函数调用和递归函数调用的数量，但我不知道该怎么做。任何帮助都会很棒。谢谢！

这是我到目前为止所拥有的：

```
#include <stdio.h>

//function to compute the end result ackermann equation
int ackermann (int n, int m)
{
    int result = 0;

    if (n == 0)
    {
        result = m + 1;

    } else if (m == 0)
    {
        result = ackermann(n - 1, 1);

    } else
    {
        result = ackermann(n - 1, ackermann(n, m - 1));
    }

    return result;
}

//main function
int main(int argc, const char * argv[])
{
    char ans = 'y';
    int m, n, result;

    printf("\n\n------Ackermann Function------");

    while (ans == 'Y' || ans == 'y') {
        printf("\nPlease enter n: ");
        scanf("%d", &n);

        printf("\nPlease enter m: ");
        scanf("%d", &m);

        result = ackermann(n, m);

        printf("\nResult: %d", result);

        printf("\n\nDo you want to go again? ");
        scanf(" %c", &ans);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:59:19.860

```
static int count = 0;

int func() 
{
  count ++
  // do your work
  // recursive call
} 
```

制作静态变量，它将保留对函数的调用总数。

在这种情况下，您不必将其`count`设为全局，使其成为本地静态函数就足够了，因为静态变量保留了它的值，因为它`static`具有文件范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:57:34.040

使用全局变量，在每次调用时递增其值：

```
int calls_count = 0;

...

int ackermann (int n, int m)
{
    ++calls_count;
... 
```

# math - 随着时间的推移预测网格上的点？

> ID：13707862
> 
> 赞同：0
> 
> 时间：2012-12-04T16:52:00.260
> 
> 标签：math, animation, intercept

我有一个希望是简单的问题。我用 Nuke 做一个线性动画，我有 2 分。point1 @ frame 1 是 (5,90) point2 @ frame 10 是 (346,204)

使用线性插值类型，我想确定 x 和 y 点在第 30 帧处的位置。我尝试的方法是使用斜率公式，然后找到 y 截距。

```
m = (204 - 90) / (346 - 5)
m =  114/341 = .3343 
```

然后我得到了拦截：

```
Y = Mx + b
90 = .3343(5) + b
90 = 1.6715 + b
88.3285 = b 
```

所以...我得到了我的生产线的公式。**y = .3343X + 88.3285**

有人可以帮我弄清楚在任何给定帧上的点在哪里吗？如果您愿意，请参考随附的图片...您可以看到我的图表的图片。

我想我遇到的问题是将时间与坐标点联系起来。

谢谢

![在此处输入图像描述](../Images/233fb3685eb31ffb67e832c3072e0d07.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:14:03.897

只需将 x 视为时间 (t) 的函数。

这是一些坐标：

```
(t, x)
(1, 5)
(10, 346) 
```

以及线方程的一些计算：

```
x = mt+b

m = (346-5) / (10-1)
m = 341/9

b = 5 - (341/9)*1
b = - 296/9

x = (341t - 296)/9 
```

使用我的公式 (t -> x) 和你的公式 (x -> y)，我可以计算出 t=30 处的位置

```
t = 30
x = 1103 + 7/9
y = 457.3214 
```

# variables - c语言中的全局指针

> ID：13707863
> 
> 赞同：1
> 
> 时间：2012-12-04T16:52:01.323
> 
> 标签：variables, pointers

这是我的导师提出的关于如何在方法函数中打印局部变量的主方法值的问题，当它是变量推送并从堆栈中弹出时（因为当方法函数调用它时，它是变量推送并且当它到达结束从堆栈中弹出时）然后它是局部变量存储回内存。

**为什么 main 方法 print 100 ？**

```
// Define a global pointer
int *ptr;

int method()
{
    // Define a variable local in this method 
    int local = 100;

    // Set address of local variable (name of variable is local) 
    // in the ptr pointer
    ptr = &local;

    return -1;
}

int main()
{
    // Call method
    method();   

    // Print value of ptr pointer
    cout<<*ptr<<"\n";   

    return -1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:01:57.533

如果你问为什么主要方法是打印 100。

1.局部变量被分配了一些内存空间。（比如说在 X。因此 [x]=>100）

2.然后将全局指针分配给X处的点。（比如说指针空间是Y。[Y] => X）

3.因此指针的点是X。

4.现在你选择打印指针的值。即 [[y]]=[x] 即 100。

为什么不打印垃圾值是因为即使内存空间不再分配给本地，它仍然包含该值。

如果您编写更多代码，则内存中的点可能已被另一个变量覆盖

# azure - 如何 RDP 到负载平衡的虚拟机？

> ID：13707868
> 
> 赞同：2
> 
> 时间：2012-12-04T16:52:07.617
> 
> 标签：azure

我从库中创建了一个 Windows VM 作为独立 VM

然后，我从同一映像创建了第二个 VM，在创建向导的虚拟机模式下，我选择“连接到现有虚拟机”并选择我的第一台机器。

一切都很好。

但是 - 我不知道如何 RDP 到第二台机器。

由于两者是负载平衡的，它们都共享相同的 DNS 条目和公共 IP。我可以看到为 RDP 分配了两个端口，每台机器一个，但我无法连接到第二个。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:12:31.060

您应该能够毫无问题地连接到任何实例（我刚刚测试过并且可以正常工作）。这应该是这样的：

1.  创建您的第一个 VM，Name= **vm001**， Dns= **vm001.cloudapp.net**。默认情况下，此 VM 应包含 1 个端点，用于 RDP 的端口 3389（公共和私有端口）。
2.  创建第二个虚拟机并选择连接到现有虚拟机。Name= **vm002**，但您将无法选择 Dns。通过连接到现有 VM（在本例中为 vm001），您将重用相同的 Dns。在这种情况下，它将是**vm001.cloudapp.net**。检查此新虚拟机的端点。您将看到一个带有私有端口 3389 的**RemoteDesktop**端点，但公共端口会有所不同（例如 62295）。请注意，此 enpdot 不是负载平衡的。

每个虚拟机都有自己的 RDP 公用端口并且端点没有负载平衡这一事实应该足以毫无问题地连接到实例。这表示：

*   vm001.cloudapp.net:3389 > **vm001:3389**
*   vm001.cloudapp.net:62295 > **vm002:3398**

如果您仍然有连接问题，请转到门户，选择 VM 并选择连接按钮。还要检查您的防火墙是否允许您连接这个随机端口（例如，您的防火墙可能允许连接到 3389 但不允许连接到 62295）。

# java - 如何初始化二维数组？

> ID：13707869
> 
> 赞同：2
> 
> 时间：2012-12-04T16:52:07.050
> 
> 标签：java, arrays, initialization

```
public class example
{
    static class point
    {
        int x;
        int y;
    }

    static void main(String args[])
    {
        point p = new point();
        point[] p1 = new point[5];
        point[][] p2 = new point[5][5];

        p.x = 5; //No problem
        p[0].x = 5; //When I run the program, it gives error:java.lang.NullPointerException
        p[0][0].x = 5; //When I run the program, it gives error:java.lang.NullPointerException
    } 
```

如何初始化 p[].x 和 p[][].x？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T16:53:30.667

如果是多级的，则需要手动初始化整个数组和所有级别：

```
point[] p1 = new point[5];
// Now the whole array contains only null elements

for (int i = 0; i < 5; i++)
  p1[i] = new point();

p1[0].x = 1; // Will be okay 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:58:11.390

这样想；当你这样做时`new point[5]`（你应该遵循编码标准并用大写的第一个字母 btw 来命名你的类），你会得到一个数组，其中*每个元素都是该类型的默认值*（在这种情况下为 null）。数组已初始化，但如果您想初始化数组的各个元素，您也必须这样做，或者在初始行中，如下所示：

```
point[] p1 = new point[] { new point(), new point() }; 
```

（上述方法将创建一个数组，其中每个元素已经初始化为可容纳这些元素的最小大小 - 在本例中为 2。）

或者通过遍历数组并手动添加点：

```
point[] p1 = new point[5];
for (int i = 0; i < p1.length; i++) {
   point[i] = new point();
} 
```

这两个概念都可以扩展到多维数组：

```
point[] p2 = new point[][] {
    new point[] { new point(), new point() }
    new point[] { new point(), new point() }
}; 
```

或者

```
point[] p2 = new point[5][5];
for (int i = 0; i < p2.length; i++) {
    for (int j = 0; j < p2[i].length; j++) {
        p2[i][j] = new point();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:54:03.663

```
 point p = new point(); 
```

它是`point`对象。

```
point[] p1 = new point[5]; 
```

该`point`对象是一维数组。它保存`point`对象引用。您应该创建一个`point`对象并保存在数组中，例如 -

```
for (int i = 0; i < 5; i++)
  p1[i] = new point();

p1[0].x = 1; 
```

对于二维数组 -

```
point[][] p2 = new point[5][5];

for (int i = 0; i < 5; i++){
  for (int j = 0; j < 5; j++)
      p1[i][j] = new point();
}
p[0][0].x = 5; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T16:54:56.120

当你构造一个对象数组时，数组本身就被构造了，但是各个元素被初始化为 null。所以，假设`Point()`是你想要的构造函数，

```
Point[] p1 = new Point[5];
for (int i = 0; i < p1.length; ++i) {
  p1[i] = new Point();
} 
```

# xml - WIX 安装程序在 LocalAppDataFolder 中添加和删除文件

> ID：13707879
> 
> 赞同：1
> 
> 时间：2012-12-04T16:52:38.623
> 
> 标签：xml, windows, installation, wix

我有一个 Internet Explorer 加载项，它在 LocalAppDataFolder\Microsoft\Windows\Temporary Internet Files\CompanyName\AddOnName\ 中生成一些文件

我有一个应用程序的 WIX 安装程序，我想在安装和卸载时删除 CompanyName\AddOnName\ 文件夹。

我以前从未使用过 WIX，而且我更喜欢 MacOS，所以所有这些东西对我来说都有点陌生。这是我现在拥有的一部分（在我的 Product.wxs 文件中）：

```
<Feature Id="ProductFeature" Title="Company IE Add-On" Level="1" ConfigurableDirectory="INSTALLFOLDER">
  <ComponentRef Id="INSTALLFOLDER" />
  <ComponentGroupRef Id="ProductComponents" />
  <ComponentRef Id="dataDirectory"/>
</Feature>

<Fragment>
<Directory Id="TARGETDIR" Name="SourceDir">
    <Directory Id="ProgramFilesFolder">
       <Directory Id="INSTALLFOLDER" Name="Company IE Add-On" >
          <Component Id="INSTALLFOLDER" Guid="THERE IS A GUID HERE">
          <RemoveFolder On="both" Id="INSTALLFOLDER"/>
          <RegistryValue Root="HKLM" Key="Software\[Manufacturer]\[ProductName]" Type="string" Value="Company IE Add-On" />
      </Component>
    </Directory>
  </Directory>
  <Directory Id="LocalAppDataFolder">
    <Directory Id="Microsoft">
      <Directory Id="Windows">
        <Directory Id="TempInetFiles" Name="Temporary Internet Files">
          <Directory Id="CompanyName">
            <Directory Id="AddOnName">
              <Component Id="dataDirectory" Guid="E5938D44-5315-43D4-94EC-313F6CDB290B" NeverOverwrite="no" Permanent="no">
                <RemoveFolder Id="AddOnName" On="both"/>
              </Component>
            </Directory>
          </Directory>
        </Directory>
      </Directory>
    </Directory>
  </Directory>
 </Directory>
</Fragment> 
```

但这给了我诸如“组件数据目录安装到用户配置文件。它必须使用 HKCU 下的注册表项作为其 KeyPath，而不是文件”之类的错误。

并且“目录 CompanyName 在用户配置文件中，但未在 RemoveFile 表中列出。”

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:32:53.037

我做了类似的事情，这段代码对我有用：

```
 <!--Setting up the shortcuts for the product-->
    <Directory Id="ProgramMenuFolder" Name="Programs">
    <Directory Id="ProgramMenuDir" Name="$(var.ShortcutName)">
      <Directory Id="ProgramMenuSubFolder" Name="LOGGERS">
      </Directory>
    </Directory>
  </Directory>
  </Directory>

 <Component Id='LoggersShortcut' Guid='2A6D411E-5CE9-4F38-8F25-361CBFCABB5A' Directory='ProgramMenuSubFolder'>
    <CreateFolder Directory="ProgramMenuSubFolder"  />
    <RemoveFolder Id='ProgramMenuSubFolder' On='uninstall' Directory='ProgramMenuSubFolder'/>
    <RegistryValue Root='HKCU' Key='Software\ShortcutProperty\[PRODUCTNAME]' Type='string' Value='1' KeyPath='yes' />
  </Component> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:55:37.137

WiX 要求您在创建用户特定组件时始终使用 HKCU 注册表项。在这种情况下，dataDirectory 将始终安装在当前用户的配置文件中。在组件内添加 HKCU 或 HKMU 注册表元素，如下所示：

```
<Component Id="dataDirectory" Guid="E5938D44-5315-43D4-94EC-313F6CDB290B" NeverOverwrite="no" Permanent="no">
  <Registry Root='HKMU' Key='Software\[Manufacturer]\[ProductName]' KeyPath='yes'/>
  <RemoveFolder Id="AddOnName" On="both"/>
</Component> 
```

由于您已经拥有 HKLM\Software[Manufacturer][ProductName]，因此在每台机器安装的情况下这不会产生任何明显的影响。在按用户安装的情况下，它将创建 HKCU\Software[Manufacturer][ProductName]。

如果 HKMU 仍然失败并出现同样的错误，请用 HKCU 替换它。

对于第二个问题，请查看： [目录 xx 位于用户配置文件中，但未列在 RemoveFile 表中。](https://stackoverflow.com/questions/3290576/directory-xx-is-in-the-user-profile-but-is-not-listed-in-the-removefile-table)

# solr - 有什么方法可以将 solr 多字段值转换为单个字段进行排序？

> ID：13707885
> 
> 赞同：0
> 
> 时间：2012-12-04T16:52:52.810
> 
> 标签：solr

我有具有多个值的记录，因此我将这些字段放在其 solr 文档的多字段值中。问题是我还需要返回这些值的有序列表。我有办法获取许多记录来提取所有文档值并对自己进行排序。我试图创建单独的 solr 文档来存储这些值以及所需的信息，但管理它已成为一场噩梦。试图保持低评论和管理内存对于这个解决方案来说并不理想。

无论如何将这些多字段值复制到同一文档的单个字段值中并在 solr 中对这些多个单个字段值进行排序？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:56:05.037

刻面对您没有帮助吗？您不需要多值/非多值的复制字段，只需将它们存储在多值字段中，分面并设置分面的排序标准（默认值：每个值的出现次数）

# python - 在python中使用部分切片字符串

> ID：13707886
> 
> 赞同：0
> 
> 时间：2012-12-04T16:52:54.867
> 
> 标签：python

我的任务是做一个基础转换器。我想把它切换到base 10，然后切换到想要的base。所以我想得到一个字符串，然后他们把它放在一个列表中，然后对它进行切片，然后使用切片部分：

```
s=input()
NumList=[s]
NumList[::] 
```

有什么办法吗？你有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:03:40.880

您像这样拆分输入字符串：

`(number, from_base, to_base) = s.split()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:04:02.257

您可以按空格分割从输入接收到的字符串，然后根据需要对其进行处理。

```
s = input()
ls = s.split() // ls is a list. 
```

# jquery - Rails 3 资产管道：JQuery Datepicker 正在工作，但 Timepicker 根本不起作用

> ID：13707887
> 
> 赞同：0
> 
> 时间：2012-12-04T16:53:00.593
> 
> 标签：jquery, ruby-on-rails-3, jquery-ui, twitter-bootstrap, timepicker

对于我尝试集成的任何时间选择器，javascript 控制台都会给我这个错误，**尽管它确实适用于 datepicker**。datetimepicker 也不起作用。

```
Uncaught TypeError: Object [object Object] has no method 'timePicker' 
```

我尝试了许多不同的 timepicker 库，但它们都不起作用。

这是我的 application.js 文件：

```
//= require jquery
//= require jquery_ujs
//= require jquery.ui.all
//= require twitter/bootstrap
//= require bootstrap-datepicker
//= require bootstrap-timepicker
//= require jquery.timePicker
//= require jquery.timePicker.min
//= require schools 
```

我的 application.css 文件：

```
*= require_self
*= require jquery.ui.all
*= require bootstrap_and_overrides
*= require formtastic-bootstrap
*= require formtastic_changes
*= require bootstrap-datepicker
*= require bootstrap-timepicker
*= require gmaps4rails
*= require schools
*= require timePicker 
```

我的宝石文件：

```
gem 'rails', '3.2.8'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'therubyracer', '~> 0.10.2'
  gem 'uglifier', '>= 1.0.3'
  gem 'jquery-rails'
  gem 'jquery-ui-rails'
  gem "twitter-bootstrap-rails"
end

gem 'sextant'
gem 'passenger'
gem 'formtastic', " ~> 2.1.1"
gem 'formtastic-bootstrap'
gem 'country_select'
gem 'slim'
gem 'redcarpet'
gem "auto_html"
gem 'gmaps4rails'
gem 'friendly_id'
gem 'devise'

gem 'capistrano'
gem 'unicorn'

gem 'bootstrap-datepicker-rails'
gem "bootstrap-timepicker-rails"

gem 'bcrypt-ruby', '~> 3.0.0'

group :development do
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end 
```

我的schools.js 文件（'datepicker' 突出显示为粉红色，'timePicker' 突出显示为棕色。如果我将'timePicker' 更改为'datepicker' 以外的任何内容，它会保持棕色）：

```
$(document).ready( function(){
  $('#date_picker').datepicker();
  $('.time_picker').timePicker();
}); 
```

我的观点：

```
<% if current_user %>
  <h3>Create Reminder</h3>
  <%= form_tag create_user_reminder_path, method: 'post' do %>
    <%= select_datetime Time.now, :prompt => :date  %>
    <%= text_field_tag :date, nil, :id => "date_picker" %>
    <div class="input-append bootstrap-timepicker-component">
      <%= text_field_tag :time, nil, :class => "time_picker input-small" %>
      <span class="add-on">
          <i class="icon-time"></i>
      </span>
    </div>
    <%= text_area_tag :message %>
    <% if @school %>
      <% unless @school.id == current_user.school_id %>
        <%= hidden_field_tag :school_id, @school.id %>
      <% end %>
    <% end %>
    <%= submit_tag 'Save Reminder' %>
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T15:46:12.517

不是`$('.time_picker').timepicker();`代替`$('.time_picker').timePicker();`吗？

（注意时间选择器中的小“p”）

# entity - 验证 Symfony2.1 应用程序中整数字段的 Min 选项

> ID：13707888
> 
> 赞同：0
> 
> 时间：2012-12-04T16:53:00.183
> 
> 标签：entity, validation, symfony-2.1, min

我用这段代码创建了我的表单：

```
 public function creerConferenceAction($id = null) {

    $message = '';
    if (isset($id)) {
        $conference = $this->getDoctrine()
                ->getRepository('gestionConferenceApplicationBundle:Conference')
                ->find($id);
        if (!$conference) {
            throw $this->createNotFoundException('No conference found for id ' . $id);
        }
    }else{
        $conference = new Conference();            
    }

        $form = $this->createFormBuilder($conference)
            ->add('titre', 'text')
            ->add('ville', 'text')
            ->add('lieu', 'text')
            ->add('date_debut', 'date', array(
                'widget' => 'single_text',
                'format' => 'yyyy-MM-dd',
                ))
             ->add('date_fin', 'date')
            ->add('nbMin', 'integer')
            ->add('nbMax', 'integer')
            ->add('dateLimiteInscription', 'date')
            ->getForm();

    $request = $this->getRequest();
    if ($request->isMethod('POST')) {
        $form->bind($request);
        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $em->persist($conference);
            $em->flush();
            return $this->redirect($this->generateUrl('_acceuil'));
        }
    }

    return $this->render('gestionConferenceApplicationBundle:acceuil:creerConference.html.twig', array(
                'form' => $form->createView(), 
            ));
} 
```

我想添加这个约束：用户不能在这些字段中输入小于 5 的值：

```
->add('nbMin', 'integer')
        ->add('nbMax', 'integer') 
```

我对此进行了测试（我从参考书中获取）：

```
 # src/gestionConference/ApplicationBundle/Resources/config/validation.yml
gestionConference\ApplicationBundle\Entity\Conference:
  properties:
    age:
      - Min: { limit: 18, message: You must be 18 or older to enter. } 
```

但它什么也不做

我怎样才能做到这一点

先感谢您

* * *

## -------------------编辑-------编辑---------- --------------------

我再次阅读了参考资料，我意识到 min 选项在最新版本的 symfony 2.1.3 中被删除了

我将其替换为：

```
 # src/gestionConference/ApplicationBundle/Resources/config/validation.yml
gestionConference\ApplicationBundle\Entity\Conference:
  properties:
    nbmin:
      - Range:
          min: 120
          minMessage: You must be at least 120cm tall to enter 
```

但没有变化

这是树枝页面：

```
 {% extends "gestionConferenceApplicationBundle::layout.html.twig" %}
{% block content %}
<div id="welcome">
    <div class="content">

        <form action="" method="post" {{ form_enctype(form) }}>
                {{ form_errors(form) }}

                <table>
                    <tr>
                        <td>{{ form_label(form.titre, 'Titre : ') }}</td>                        
                        <td>{{ form_widget(form.titre) }}</td>
                        <td>{{ form_errors(form.titre) }}</td>
                    </tr>
                    <tr>
                        <td>{{ form_label(form.ville, 'Ville : ') }}</td>

                        <td>{{ form_widget(form.ville) }}</td>
                        <td>{{ form_errors(form.ville) }}</td>
                    </tr>
                    <tr>
                        <td>{{ form_label(form.lieu, 'Lieu : ') }}</td>

                        <td>{{ form_widget(form.lieu) }}</td>
                        <td>{{ form_errors(form.lieu) }}</td>
                    </tr>
                    <tr>
                        <td>{{ form_label(form.date_debut, 'Date de début : ') }}</td>

                        <td>{{ form_widget(form.date_debut) }}</td>
                        <td>{{ form_errors(form.date_debut) }}</td>
                    </tr>
                    <tr>
                        <td>{{ form_label(form.date_fin, 'Date de fin : ') }}</td>

                        <td>{{ form_widget(form.date_fin) }}</td>
                        <td>{{ form_errors(form.date_fin) }}</td>
                    </tr>
                    <tr>
                        <td>{{ form_label(form.nbMin, 'Nombre minimal de participants : ') }}</td>                        
                        <td>{{ form_widget(form.nbMin) }}</td>
                        <td>{{ form_errors(form.nbMin) }}</td>
                    </tr>
                   <tr>
                        <td>{{ form_label(form.nbMax, 'Nombre maximal de participants : ') }}</td>                        
                        <td>{{ form_widget(form.nbMax) }}</td>
                        <td>{{ form_errors(form.nbMax) }}</td>
                    </tr>

                    <tr>
                        <td>{{ form_label(form.dateLimiteInscription, 'Date limite d inscription : ') }}</td>                        
                        <td>{{ form_widget(form.dateLimiteInscription) }}</td>
                        <td>{{ form_errors(form.dateLimiteInscription) }}</td>
                    </tr>
                    {{ form_rest(form) }}
                    <tr>
                        <td align="center" colspan=3 >
                            <input type="submit" style="width: 80px;height: 30px;margin-right: 25px;" value="valider" />
                            <input type="reset" style="width: 80px;height: 30px;" value="initialiser" />
                        </td>                        
                    </tr>

                </table>
            </form>
        </div>

    </div>

{% endblock %} 
```

# c# - 应用程序运行时最小化所有正在运行的窗口

> ID：13707889
> 
> 赞同：-2
> 
> 时间：2012-12-04T16:53:02.997
> 
> 标签：c#, minimize

我正在开发一个 C# windows 窗体应用程序。当我的网络摄像头检测到超过 2 个面孔时，我如何编辑我的代码。

更多信息：

当 "FaceDetectedLabel.Text = "检测到人脸：" + cam.facesdetected.ToString();" 变为**Face Detected: 2** or more...

我该怎么做：

*   最小化除我的应用程序之外的所有程序运行。

这是我的代码：

```
namespace PBD
{
    public partial class MainPage : Form
    {
        //declaring global variables
        private Capture capture;        //takes images from camera as image frames

        public MainPage()
        {
            InitializeComponent();
        }

        private void ProcessFrame(object sender, EventArgs arg)
        {
            Wrapper cam = new Wrapper();

            //show the image in the EmguCV ImageBox
            WebcamPictureBox.Image = cam.start_cam(capture).Resize(390, 243, Emgu.CV.CvEnum.INTER.CV_INTER_CUBIC).ToBitmap();
            FaceDetectedLabel.Text = "Faces Detected : " + cam.facesdetected.ToString();
        }

        private void MainPage_Load(object sender, EventArgs e)
        {

            #region if capture is not created, create it now
            if (capture == null)
            {
                try
                {
                    capture = new Capture();
                }
                catch (NullReferenceException excpt)
                {
                    MessageBox.Show(excpt.Message);
                }
            }
            #endregion

            Application.Idle += ProcessFrame;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:03:04.297

检查这篇文章：

[如何以编程方式最小化打开的窗口文件夹](https://stackoverflow.com/questions/9254037/how-to-programmatically-minimize-opened-window-folders)

您必须枚举所有进程并排除当前进程（您的进程），而不是获取“资源管理器”进程。我建议还进行异常处理和一些检查，因为并非所有进程都有要最小化的窗口

还有这篇关于注销部分的帖子：

[Log off user from Win XP programmatically in C#](https://stackoverflow.com/questions/484278/log-off-user-from-win-xp-programmatically-in-c-sharp)

# java - 单独文件中的 Java 类的复习

> ID：13707896
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:53:14.927
> 
> 标签：java, class

我需要复习一下将类从一个文件移动到两个文件。我的示例代码在一个名为“ **external_class_file_main** ”的文件中。程序运行良好，代码如下所示：

```
Public class external_class_file_main {

    public static int get_a_random_number (int min, int max) {
        int n;
        n = (int)(Math.random() * (max - min +1)) + min;
        return (n);

    }

    public static void main(String[] args) {
        int r;
        System.out.println("Program starting...");

        r = get_a_random_number (1, 5);
        System.out.println("random number = " + r);

        System.out.println("Program ending...");

    }

} 
```

我将**get_a_random_number**类移动到一个名为“ **external_class_file** ”的单独文件中。当我这样做时，我收到以下错误：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
The method get_a_random_number(int, int) is undefined for the type
external_class_file_main
at external_class_file_main.main(external_class_file_main.java:20) 
```

“ **external_class_file_main** ” 现在包含：

```
public class external_class_file_main {

    public static void main(String[] args) {
        int r;
        System.out.println("Program starting...");

        r = get_a_random_number (1, 5);
        System.out.println("random number = " + r);

        System.out.println("Program ending...");

    }

} 
```

“ **external_class_file** ”现在包含：

```
public class external_class_file {

    public static int get_a_random_number (int min, int max) {
        int n;
        n = (int)(Math.random() * (max - min +1)) + min;
        return (n);

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:59:49.227

您需要`get_a_random_number`通过类引用 t `external_class_file`。例如：

```
int r;
System.out.println("Program starting...");
r = external_class_file.get_a_random_number (1, 5); 
```

不过，您绝对应该遵守 Java 命名约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:59:00.467

您不再可以从 external_class_file_main 类访问 get_a_random_number 方法。由于您需要的方法是静态的，您可以直接引用它，如下所示：

```
public static void main(String[] args) {

    int r;
    System.out.println("Program starting...");

    r = external_class_file.get_a_random_number (1, 5);
    System.out.println("random number = " + r);

    System.out.println("Program ending...");

} 
```

PS，如果您对方法和类使用正确的 Java 命名约定，例如没有下划线并以大写字母开头类，您会发现编码和阅读您的问题的人会容易得多。[http://en.wikipedia.org/wiki/Naming_convention_%28programming%29](http://en.wikipedia.org/wiki/Naming_convention_%28programming%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T17:01:08.283

这里的解决方案：

```
public class external_class_file_main {

    public static void main(String[] args) {
        int r;
        System.out.println("Program starting...");

        r = external_class_file.get_a_random_number (1, 5);
        System.out.println("random number = " + r);

        System.out.println("Program ending...");

    }

} 
```

但是，请看一下 Java 命名约定。

# windows - 适用于 Windows 的简易 Git 启动器？

> ID：13707899
> 
> 赞同：0
> 
> 时间：2012-12-04T16:53:28.997
> 
> 标签：windows, git, command-line

我真的需要了解如何在 Windows 上使用 git，但是所有的指南都太复杂了。例如，我知道我们需要为 git 使用命令行。但是，当我使用“cmd.exe”在 Windows 中打开命令提示符时，我该去哪里？我是否导航到安装 git 的文件夹？什么是“git bash”？

为什么网上所有的例子前面都有这个$符号？如何将现有文件夹添加到 git 版本控制？“结账”是什么意思？我不断听到一个名为“powershell”的工具。它有什么作用，它与 DOS 提示符有何不同？

要使用“git”命令，我可能必须将它添加到我的环境变量中，以便计算机可以找到它，然后我得到“'git' 不是内部或外部命令、可运行程序或批处理文件。”

我以前从未在我的编程中使用过版本控制系统——到目前为止，我只是保存了前面有数字的文件夹，我需要使用 git 来发布我在 Amazon AWS Beanstalk 上的项目文件夹。

我基本上只是想向 git 添加一个文件夹并定期保存更​​改，这样我就可以备份我以前做过的所有事情。

编辑： git 是一个程序，还是有很多“git”。google 中“git”的第一个结果将我带到这里：[http](http://git-scm.com/) : //git-scm.com/ 然而很多人都在谈论一种叫做“msysgit”的东西。这是一个不同的 git 应用程序吗？

编辑：我正在更多地查看 Windows 教程的命令行。在这里，我遇到了最大的麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:26:45.577

如果您想了解 Git 的一些概念（只有这样您才能有效地使用它），您应该阅读[Pro Git 书籍](http://git-scm.com/book)（可在线获取和下载，甚至可以购买纸质版）。这是一本非常好的书，通过很好的例子教你需要的基础知识，如果你想了解更多，还有更高级的部分。

本书假设您使用类 Unix/Linux 的 shell（如 Bash）。Msysgit（又名“Windows 版 Git”）带来了 Bash，预先配置好以便于使用 Git。（不，没有很多 git，Msysgit 只是一个捆绑包，它带来了一些其他 Git 依赖项，这些依赖项通常不会安装在 Windows 上。）

在这种情况下，shell（也称为控制台或终端）是命令行解释器，就像 cmd.exe 在 Windows 上一样；在 *nix 类系统上，有比 Windows 更多的选择（其中一种选择是 Powershell），但这只是这里的一些辅助信息。

您看到的示例中的 $ 符号是 *nix-like shell 上的典型提示符分隔符；在 Windows (cmd.exe) 上，您通常使用“>”作为分隔符。它没有特殊含义，只是用作分隔符。

“签出”的含义以及如何将文件和文件夹添加到版本控制中，在上述书中都有很好的解释。一般来说，你也不需要了解任何关于版本控制的知识，这本书真的是为绝对初学者写的（事实上，开始使用 Git，不了解其他 VCS 可能是一个优势）。

如果您需要有关书中内容（或其他教程中提到的、此处或 Google 上的内容）的任何帮助，请随时访问#git IRC 频道（有关[git-scm.com 社区页面](http://git-scm.com/community)的更多信息，人们可以立即帮助您并解决一些小问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:36:01.910

有很多教程对我有用：

[http://www.youtube.com/results?search_query=git+windows&oq=git+windows&gs_l=youtube.3...250.879.0.972.7.6.0.0.0.0.0.0..0.0...0.0...1ac .1](http://www.youtube.com/results?search_query=git+windows&oq=git+windows&gs_l=youtube.3...250.879.0.972.7.6.0.0.0.0.0.0..0.0...0.0...1ac.1) .

它们向您展示了如何安装各种组件，以及如何在 Windows 中使用 Git。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:56:07.813

Github* 具有适用于[Windows](http://windows.github.com/)（以及[Mac](http://mac.github.com/)）的 GUI 应用程序，对新手非常友好。您不会获得很多洞察力，但这可能会帮助您启动和运行。

*git-repository 托管，例如，您可以存储您的存储库并不时与它们同步的地方。它是免费的而且很棒。

# hadoop - Hadoop 计数器可视化

> ID：13707902
> 
> 赞同：1
> 
> 时间：2012-12-04T16:53:37.100
> 
> 标签：hadoop, d3.js, visualization, data-visualization, bigdata

我想知道是否有任何 Hadoop 计数器和作业可视化库/项目。例如，显示每个作业类型以及开始和结束时间的时间显示，随时间绘制。另一个例子是随着时间的推移绘制一个给定的计数器。我认为这可以用于操作洞察、监控和警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:50:54.013

**Note: Since this is my first post on SO I cannot post more than two URLs. Please have a look at [this GitHub gist for my post with all links in Markdown format](https://gist.github.com/4605173). All italic items below are actually hyperlinks. Sorry for the inconvenience. --Michael**

The only open source visualization project that comes to my mind right now is [Twitter Ambrose](https://github.com/twitter/ambrose). From the various tools I mention in this reply you might want to have a look at Ambrose first. It supports the following features in its web UI:

> [Ambrose web UI features]
> 
> *   A table view of all the associated jobs, along with their current state
> *   Chord and graph diagrams to visualize job dependencies and current state
> *   An overall script progress bar

Apart from that my personal experience has been with offerings from commercial vendors. To name but two of them:

*   *Cloudera Manager* for the CDH4 distribution
*   *MapR's Dashboard* for the M3 and M5 distributions

Both products come with an API that allows you to extend them and integrate them with your own Ops tool set. Cloudera Manager requires an evaluation license whereas MapR's Dashboard is available in the free M3 distribution if you want to give it a spin. As usual there are pros and cons for each of them.

That said, you can also configure standard Hadoop to sent *its metrics* to a monitoring tool such as *Ganglia* (see *live demo at UC Berkely Grid*). Basically, you just dump metrics into Ganglia and the latter will take care of the visualization/plotting of the various metrics. There are several online guides available that *describe how to configure Ganglia for a small Hadoop cluster*. If you are running Hadoop 2.x have a look at *What is Hadoop Metrics2* for how the metrics system in next-gen Hadoop works in general.

Finally albeit a bit unrelated to your direct question, you can also write custom monitors by calling Hadoop's Java API. It is usually straight-forward to write these custom monitors in a way that is compatible with other Ops infrastructure tools such as *Nagios*. For instance, one of our custom monitors connects to the JobTracker in order to detect any MapReduce jobs that run for longer than 24 hours (which is in 99% a tell-tale that a job is broken one way or another). Depending on the tool you dump the metrics into you will get visualizations/graphs for free (cf. Ganglia example above).

Hope this helps, Michael

# objective-c - 在 CoreData 中，我们是否应该始终将 NSSet 转换为 NSArray 以进行迭代？

> ID：13707903
> 
> 赞同：0
> 
> 时间：2012-12-04T16:53:39.610
> 
> 标签：objective-c, ios, core-data

所以在我的核心数据关系中，我有一个与通过 NSSet 映射的其他对象有关系的对象。当我得到我的主要对象时，我会想要遍历 NSSet。只是迭代，没有什么花哨的。

现在，根据这篇文章，NSArray 比 NSSet 快得多。[http://www.cocoawithlove.com/2008/08/nsarray-or-nsset-nsdictionary-or.html](http://www.cocoawithlove.com/2008/08/nsarray-or-nsset-nsdictionary-or.html)

我的 NSSet 永远不会那么大，所以我认为在这种情况下它并不重要。但是，我只是想知道一般来说，将 NSSet 转换为 NSArray 以进行迭代的开销总体上是否仍然更快？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:02:42.883

将 NSSet 转换为 NSArray 将需要对集合进行迭代，并为数组分配内存，因此除非您要反复迭代它，否则仅对集合进行迭代会更快。

但在任何一种情况下，即使有相当大的集合，我们也可能在谈论纳秒。我真的不会担心它，除非你已经描述了一个实际的性能问题并且数据告诉你它是一个问题。

此外，您链接的性能数据仅适用于您自己创建的集合。当您从框架中获取集合时，它可以（并且在核心数据的情况下，将）返回一个具有自定义实现的集合，该实现具有自己的性能特征。

# javascript - jQuery Draggable 无法突出显示以进行复制和粘贴

> ID：13707904
> 
> 赞同：1
> 
> 时间：2012-12-04T16:53:46.427
> 
> 标签：javascript, jquery, jquery-ui, copy-paste, jquery-ui-draggable

我利用[jQuery UI 的 Draggable](http://jqueryui.com/draggable/)功能来制作它，以便您可以单击并拖动表格行。不幸的是，当我想突出显示文本以复制其中一个表格单元格中的数据时，它开始将行拖走。所以我像这样使用“距离”选项：

```
$('.test').draggable({
revert: 'invalid',
helper: 'clone',
distance: 150,
start: function(event, ui) {
}
}); 
```

但是我的问题是它仍然不会让我“突出显示”表格行，即使它是在“拖动”它之前。:(

哦，顺便说一句，我只是使用常规的 HTML 表格，即 IE：

```
<table>
<tr class="test"><td>Data</td></tr>
<tr class="test"><td>Data</td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:57:39.470

[关于这个主题的另一个问答有一个解决方案，它](https://stackoverflow.com/questions/1632796/jquery-draggable-text-selection-bug)解释了`disableSelection`在项目中的所有元素上运行的方法，这些元素是可选择的，从而可以选择文本进行复制和粘贴以及其他用途。因此，对于您的问题，您可以这样做：

```
$('td').disableSelection(); 
```

# c# - 在网格视图中显示数据库字段的语法错误

> ID：13707906
> 
> 赞同：1
> 
> 时间：2012-12-04T16:53:46.393
> 
> 标签：c#, ms-access, relational-database, oledbconnection

我正在做一个标准练习，在 gridview 中显示三个表的字段，但是在我的内部联接语句中存在语法错误。

任何关于语法错误所在位置的建议。

```
try
    {
        conn = new OleDbConnection(@"Provider=Microsoft.Jet.OleDb.4.0;
                                Data Source =" + Server.MapPath("App_Data\\Shopping List.mdb"));
        conn.Open();

        DataSet ds = new DataSet();

        OleDbDataAdapter dba = new OleDbDataAdapter(@"SELECT Ingredient.IngerdientId, Ingredient.IngredientName,  Area.AreaName, Recipe.RecipeName, Ingredient.Quantity 
                                                FROM Ingredient
                                                INNER JOIN Area ON Ingredient.AreaId = Area.AreaId
                                                INNER JOIN Recipe ON Ingredient.RecipeId = Recipe.RecipeId", conn);

        dba.Fill(ds);

        gridIngredients.DataSource = ds;
        gridIngredients.DataBind();
    }
    catch (Exception exe)
    {
        labMessage.Text = exe.Message; 

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:58:50.677

当您的`FROM`子句包含多个连接时，Access 数据库引擎需要括号。我认为这可能会做到这一点，但如果可以的话，您最好`SELECT`使用其查询设计器在 Access 中构建和测试您的语句。

```
FROM (Ingredient
INNER JOIN Area ON Ingredient.AreaId = Area.AreaId)
INNER JOIN Recipe ON Ingredient.RecipeId = Recipe.RecipeId 
```

# concurrency - 查找并发系统中可能执行的次数

> ID：13707907
> 
> 赞同：2
> 
> 时间：2012-12-04T16:53:50.540
> 
> 标签：concurrency

例如，如果我有两个同时运行的进程并且它们都具有相同的代码

过程 1

```
1 Increase(x)
2 Decrease(x) 
```

过程 2

```
1' Increase(x)
2' Decrease(x) 
```

在该示例中，可能执行的次数为 6

![在此处输入图像描述](../Images/d96a95439460ea1021b62b0f3a5adbef.png)

我的问题是，当代码行和线程数不同时，是否存在可用于计算此执行次数的公式？
非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:49:35.710

![enter image description here](../Images/69df325b624be61203fe70c332b96a5c.png)

This is a combination problem. Where n is (no of methods * no of processes) and k is no of methods.

So for your case n = (2 * 2) = 4 and k = 2

So answer will be = 4! / (2! 2!) = (4 * 3 * 2 * 1) / (2 * 2) = 6 and that's your answer from the diagram.

[For more on Combination](http://en.wikipedia.org/wiki/Combination)

# svn - svn 为所有新版本修复旧版本中的某些内容

> ID：13707909
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:53:52.410
> 
> 标签：svn

我已经创建了一个修复，比如说修订版 100，它破坏了一些重要的东西。但是现在我们还有 15 个修订版，其中一些用于生产环境。

我想要的是创建一个修订版 100a，修复在 rev 100 中创建的问题，然后使其可用于 101 到 115。这可能吗？

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:13:39.990

你不能改变历史。但是，您可以撤消在修订版 100 中所做的更改，从而创建修订版 116。

请参阅[有关 SO 的相关讨论](https://stackoverflow.com/questions/271380/svn-how-to-make-an-older-revision-the-head-revision?rq=1)

# c++ - 强制自动并行化 VS 2012

> ID：13707910
> 
> 赞同：1
> 
> 时间：2012-12-04T16:53:54.240
> 
> 标签：c++, visual-studio, parallel-processing, visual-studio-2012

假设 /QPar 已设置，并且对于以下代码：

```
#pragma loop(hint_parallel(8))
for(int i = 0; i < u; i++)
{
   SomeExpensiveCall();
} 
```

我的 u 很小（约 50），SomeExpensiveCall 需要约 1 秒。代码似乎没有被并行化（我注释掉了提示并且没有变化）。有什么办法可以强制编译器并行化它吗？

我刚刚想到的事情 - 这是否与包含上述代码的项目位于静态库中的事实有关，该静态库链接到没有（也不能）具有 /QPar 的 CLI/C++ DLL 中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:57:07.500

/Qpar-report:2 应该告诉你发生了什么。由于潜在的副作用，它可能不想并行函数调用。

# javascript - parseInt 不能按预期工作

> ID：13707915
> 
> 赞同：0
> 
> 时间：2012-12-04T16:54:05.517
> 
> 标签：javascript

答案可能很明显，但我看不到

我有一个 JavaScript 对象 virtualTable。我写的 ：

```
parseInt(virtualTable["resource_" + resourceId]) 
```

它返回`NaN`

我查看`virtualTable["resource_" + resourceId]`警报，答案是“690”

如果我提醒`parseInt("690")`它工作正常并返回 690

那有什么问题呢？

整个代码：

```
if(!virtualTable.hasOwnProperty("resource_" + resourceId)) {
    virtualTable["resource_" + resourceId] = "\"" + minutesToFill + "\"";
}

var timeForTarget = (target.end.getTime() - target.start.getTime()) / 60000;
var timeInVirtualTable;
var tooltipInTarget

if(virtualTable["resource_" + resourceId].indexOf("_") == -1) {
    timeInVirtualTable = parseInt(virtualTable["resource_" + resourceId]);
    tooltipInTarget = "";
} else {
    timeInVirtualTable = parseInt(virtualTable["resource_" + resourceId].substring(0, virtualTable["resource_" + resourceId].indexOf("_")));
    tooltipInTarget = virtualTable["resource_" + resourceId].substring(virtualTable["resource_" + resourceId].indexOf("_"));
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T17:06:30.757

根据你的说法，

> 我用警报检查 virtualTable["resource_" + resourceId]，答案是“690”

我假设里面的值`virtualTable["resource_" + resourceId]`是字面`"690"`的，包括引号。因此，它是`NaN`，或者，不是数字（由于前导双引号）。

如果这将是常见输入，您可以在调用 parseInt 之前（或期间）使用以下命令从值中去除双引号`replace()`：

```
var value = virtualTable["resource_" + resourceId].replace(/"/g, '');
var number = parseInt(value); 
```

或者：

```
var number = parseInt(virtualTable["resource_" + resourceId].replace(/"/g, '')); 
```

**编辑**（`parseInt()`的基础）：
在评论的基础上，您还应该记住始终指定要解析输入的数字基础。在您的情况下，您需要以 10 为底（或“十进制”）。这被指定为第二个参数`parseInt()`：

```
var number = parseInt(value, 10); 
```

或者

```
var number = parseInt(virtualTable["resource_" + resourceId].replace(/"/g, ''), 10); 
```

# hsqldb - HSQLDB 2.2.9 是否支持内存表的 UTF-8 数据？

> ID：13707916
> 
> 赞同：1
> 
> 时间：2012-12-04T16:54:11.323
> 
> 标签：hsqldb

我正在使用 HSQLDB 2.2.9，并且正在使用一个静态脚本文件启动服务器，该脚本文件包含 INSERT 命令以及其中一个内存表的 UTF-8 数据。**从org.hsqldb.util.DatabaseManager**工具检查时，数据似乎被破坏了。

这是我启动服务器和静态数据的方式：

## 构建.xml：

```
 <target name="runServer">
     <java classname="org.hsqldb.Server" fork="true">
         <classpath refid="hsql-classpath"/>
     </java>
 </target> 
```

## 静态脚本：

```
CREATE SCHEMA PUBLIC AUTHORIZATION DBA
CREATE MEMORY TABLE PUBLIC.ORDERS(ORDERID INTEGER,SHIPCOUNTRY VARCHAR)
CREATE USER SA PASSWORD ""
GRANT DBA TO SA
SET WRITE_DELAY 10
SET SCHEMA PUBLIC
INSERT INTO ORDERS VALUES( ... UTF-8 DATA ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:12:45.260

如果您将 file.scipt 文件用作数据库的 .script 文件，它将不起作用。

数据库的.script文件一般不供用户修改。它由数据库读写。字符编码是一种特殊形式的转义序列。

您可以使用 HSQLDB 的 SqlTool 来解析和执行脚本。

# drupal - Drupal 7 - 显示没有特定节点 ID 的视图

> ID：13707917
> 
> 赞同：1
> 
> 时间：2012-12-04T16:54:14.007
> 
> 标签：drupal, drupal-7, drupal-views

我喜欢设置一个带有 NID 的上下文过滤器，该过滤器在输入时不应出现在结果列表中。但是我在drupal视图中找不到方法。上下文过滤器是正确的方法吗？

用例：在一个节点中，在内容的末尾有一个视图，其中加载了与该节点相关的更多主题（它们都共享相同的类别）。但是，我不喜欢在这个视图结果中看到当前节点。我怎样才能做到这一点？

我很高兴得到每一次帮助。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:02:54.927

几年前有同样的问题，据我所知，我使用过[Relevant Content](http://drupal.org/project/relevant_content)。但是对于 Drupal 7 只有一个开发版本，所以这里有一个类似模块的[比较列表](http://drupal.org/node/323329)。

另外，看看这个很好的答案 - [https://stackoverflow.com/a/11367731/1003329](https://stackoverflow.com/a/11367731/1003329)我想这正是你要找的。

# jsp - java.lang.ClassCastException：在 HEROKU 中运行 Web 应用程序时

> ID：13707919
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:54:33.087
> 
> 标签：jsp, servlets, heroku, classcastexception

我正在尝试在 heroku 中运行 Web 应用程序。它是一个具有 JSP-Servlet 架构的简单 Web 应用程序。

[http://electric-rain-8409.herokuapp.com/client/home?page=Page&name=maginfoINSERT&type=form](http://electric-rain-8409.herokuapp.com/client/home?page=Page&name=maginfoINSERT&type=form) 当我点击此 URL 时出现此错误

java.lang.ClassCastException：java.util.Collections$UnmodifiableMap 无法转换为 java.util.HashMap

```
*at org.apache.jsp.client.Page_jsp._jspService(org.apache.jsp.client.Page_jsp:185)
-----
-----
-----
at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:288)
at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:115)
at com.akas.magclub.servlet.UrlForward.doGet(UrlForward.java:34)* 
```

它试图命中的 servlet 是 UrlForward，它只是将请求转发到由参数 Page 标识的 jsp 页面。

令人惊奇的是，以下网址有效 [http://electric-rain-8409.herokuapp.com/client/home?page=frontpage&tag=](http://electric-rain-8409.herokuapp.com/client/home?page=frontpage&tag=)

无法真正理解为什么会这样。整个 Web 应用程序在本地机器环境中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:32:30.780

我得到了错误。servlet 将此请求转发到的 JSP 页面尝试获取参数映射并尝试这样做

```
HashMap <String,String[]> parammap=(HashMap<String,String[]>)request.getParameterMap(); 
```

但是 request.getParameterMap() 返回一个 unmodifiableCollection 不能转换为 HashMap ，因为它是只读的并且 HashMap 提供 R/W 访问。

所以将其更改为

```
Map<String,String[]> parammap=request.getParameterMap(); 
```

解决了这个问题。

但有一件事仍然存在。上面带有HashMap的代码在tomcat中运行时在本地运行良好，但在heroku中运行时失败。

# sql - 创建每小时运行的自动 sql 脚本 - 用 c# 或任何其他简单的方法

> ID：13707921
> 
> 赞同：0
> 
> 时间：2012-12-04T16:54:37.457
> 
> 标签：sql, c#-3.0

我有简单的 sql 脚本：

```
Select * from student where score > 60 
```

我想要做的是每 1 小时运行一次上述脚本，并以任何可能满足上述条件的方式在我的计算机上收到通知。所以基本上我不想进去，在上面的语句中每小时按 F5，看看我是否得到任何结果。我希望有人在这里有一些东西，如果你这样做，请分享代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:14:23.940

可以使用Sql Agent创建作业，Sql server 2008也有邮件功能

打开 SQL Management Studio 并连接到您的 SQL Server

展开 SQL Server 代理节点（如果看不到，请使用 SQL 配置管理器或检查服务并确保`SQL Server Agent (SQLINSTANCENAME)`已启动）

右键单击作业并选择“新作业”

您可以在作业中运行 SQL 语句。我会让你弄清楚那部分的其余部分（这很直观）

您可能希望使用`xp_sendmail`

查看 SQL 文档`xp_sendmail`

[http://msdn.microsoft.com/en-us/library/ms189505(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms189505(v=sql.105).aspx)

您可能需要打开该功能（afaik 默认情况下它是关闭的）并且您需要一些服务器/机器来传递邮件（因此，如果在本地机器上，您可能需要安装 IIS 和 SMTP）

**编辑：**

假设您无法访问服务器并希望在客户端执行此操作，您可以创建一个 .NET 框架应用程序或 Windows 服务来使用计划或计时器方法为您完成工作：

*时间表方法：*

创建一个简单的命令行应用程序，它执行查询并通过邮件发送结果，并使用 Windows 调度程序每小时调用一次（或任何间隔时间）

*定时器方法：*

创建一个简单的应用程序或 Windows 服务，它将运行一个计时器线程，该线程每 x 分钟完成一次工作

我可能会选择前者。代码将非常简单 - 新的控制台应用程序：

```
static void Main(string args[])
{
   // No arguments needed so just do the work
   using(SqlConnection conn = new SqlConnection("ConnectionString")) 
   {
       using(SqlCommand cmd = new SqlCommand("sql query text", conn))
       {
           var dr = cmd.ExecuteReader();
           List<myClass> results = new List<myClass>();

           // Read the rows
           while(dr.Read()) 
           {
               var someValue = dr.GetString(dr.GetOrdinal("ColumnName"));
               // etc
               // stuff these values into myClass and add to the list
               results.Add(new myClass(someValue));
           }
       }
   }

   if(results.Count > 0) // Send mail
   {
      //Send the message. 
      SmtpClient client = new SmtpClient(server);
      // Add credentials if the SMTP server requires them.
      client.Credentials = CredentialCache.DefaultNetworkCredentials;

      MailMessage message = new MailMessage(
           "recipient@test.com",
           "sender@test.com",
           "Subject",
           "Body");
     // Obviously you'd have to read the rows from your list, maybe override ToString() on 
     // myClass and call that using a StringBuilder to build the email body and append the rows

     // This may throw exceptions - maybe some error handling (in any of this code) is advisable
     client.Send(message);

    }
} 
```

免责声明：可能这些都不会编译：D

编辑2：我会这样做，因为它比Windows服务更容易调试，因为你可以从命令行运行它。您还可以传递命令行参数，因此您不需要应用程序配置文件

# python - 我可以使用 Google Appengine ndb 存储带有 key_name 的 blob 吗？

> ID：13707922
> 
> 赞同：1
> 
> 时间：2012-12-04T16:54:40.950
> 
> 标签：python, google-app-engine, blob, blobstore

我正在构建一个可以上传图片的服务。在创建 blob 时，我想提供一个 key_name，相关实体稍后将使用它来检索它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:09:41.360

当您将数据上传到 blobstore 时，您会收到一个 blob_key 和一个 file_name。blob_key 是唯一的。file_name 不是唯一的。当您使用相同的 file_name 进行另一次上传时，新版本会以相同的 file_name 和新的唯一 blob_key 存储在 blobstore 中。第一个 blob 不会被删除。你必须自己做。

要管理这些上传的 Blob，您需要使用自己的 key_name 创建一个数据存储实体。为此，您可以使用 file_name。您可以在此实体中使用 BlobKeyProperty (NDB) 或 blobstore.BlobReferenceProperty (datastore) 来引用您的 blob（以保存您的 blob_key 引用）。这样，您的 key_name / file_name 就可以唯一标识您的 blob。

# jquery - jQuery - 如何确定 val 和 HTML？

> ID：13707923
> 
> 赞同：5
> 
> 时间：2012-12-04T16:54:40.997
> 
> 标签：jquery

jQuery 中有没有办法确定一个元素是否有值或 innerhtml（或两者都有）？例如，如果输入元素，那么它有一个 val，我可以使用：

```
$(this).val(); 
```

但如果它是一个 div 那么我需要使用：

```
$(this).html(); 
```

我需要知道是否必须使用 val 或 HTML。我的 jQuery 是：

```
$(".myclass").each(function(idx){
  if (this is a val based element)
    use val
  else
    use html
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T17:05:42.910

试试这个[小提琴](http://jsfiddle.net/anderslyman/gyQyL/)。

html:

```
<div></div>
<input/>
<textarea></textarea>
<select>
    <option>foo</option>
    <option>baz</option>
</select>​ 
```

代码：

```
changeText("div", "baz");
changeText("input", "baz");
changeText("textarea", "baz");
changeText("select", "baz");

function changeText(selector, text) {
    var element = $(selector);
    var attr = element.attr('value');
    if (typeof attr !== 'undefined' && attr !== false) {
        element.val(text);
    } else {
        element.text(text);        
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T17:02:58.287

```
$(".myclass").each(function(k, v){
    var data = ($(v).val() ?: $(v).html());
}); 
```

尝试从 .val() 获取数据，如果没有返回任何内容，请使用 .html()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T17:18:01.573

这应该可以解决问题：

[见演示](http://jsfiddle.net/KxPpe/)

```
$(".myclass").each(function(idx){
    if (this.hasOwnProperty('value'))
        //use val
    else
        //use html
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T16:57:43.387

`this.tagName`会告诉你你有哪种元素类型。jQuery 对象没有`tagName`属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T17:04:19.000

检查它是否具有 value 属性

```
if ($(this).hasAttr('value')){

} 
```

# ios - 每个 ViewController 中的一个公共视图

> ID：13707929
> 
> 赞同：1
> 
> 时间：2012-12-04T16:55:00.560
> 
> 标签：ios

我在搜索互联网时很难措辞，所以我只想问这个问题。

我的应用程序中有一个选项视图，当用户单击按钮时它会滑入视图。此选项视图将显示应用程序信息，例如设置。我希望此选项视图显示在我的应用程序中的每个视图控制器上。我不想将选项视图的代码复制并粘贴到每个视图控制器文件中。选项视图有很多出口和操作，也调用了许多代表。

如何在所有视图控制器中重用此选项视图，而无需每次都添加所有插座、操作和委托方法？

我打算用公共方法制作一个新文件，但我仍然必须复制出口。那么这个公共方法文件是否也必须包含委托方法？

如果我的问题没有意义，请告诉我。我希望有一种标准的方式来实现这样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T17:17:35.233

您可以让选项视图成为选项视图控制器的视图，并从您想要的任何视图控制器模态显示它。你不这样做有什么原因吗？这是执行此操作的常用方法，而不是通过在不同控制器中重用视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T17:00:36.977

将选项添加为窗口的子视图，然后让您的 App Delegate 处理所有选项视图的出口

# c++ - 为最终客户交付 c++ 应用程序

> ID：13707937
> 
> 赞同：0
> 
> 时间：2012-12-04T16:55:35.303
> 
> 标签：c++, windows, winapi, windows-installer

我正在 Visual Studio 2010 上开发 C++ Windows 应用程序。

我想将我的应用程序交付给我的客户，以便他可以轻松使用它，而无需安装可视化运行时 fx。并处处处决。

如何设置安装程序，以便客户无需单独安装任何所需的 Visual Studio 运行时库？

我想要一个解决这个问题的方法，因为我的客户离计算太远了，他们只喜欢“下一步，下一步，安装，完成”系统。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:34:56.877

请不要静态链接任何东西。如果您正在生成 MSI 安装程序，只需按照[此处](http://wix.sourceforge.net/manual-wix3/install_vcredist.htm)和[此处](http://blogs.msdn.com/b/astebner/archive/2007/02/13/building-an-msi-using-wix-v3-0-that-includes-the-vc-8-0-runtime-merge-modules.aspx)的说明包含 Visual Studio 运行时的合并模块。如果您可以使用最新版本的 WiX，您可能需要创建一个[捆绑包](http://wix.sourceforge.net/manual-wix3/authoring_bundle_intro.htm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:58:27.863

一般来说，您有两种选择：

*   构建安装程序（例如，使用 WiX 或 NSIS）。安装程序将安装您的应用程序以及任何所需的库。由于您正在分发您的应用程序，因此您可能已经在构建安装程序，因此此解决方案是有意义的。

*   将您的文件与任何所需的库静态链接。这样，您的应用程序可执行文件包含它需要的所有代码。当然，这假设您正在使用的库可以静态链接。情况可能并非如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T17:30:54.013

您可以静态链接您的产品，使其没有任何外部依赖项，或者在构建安装程序时为您需要的运行时组件包含 MSI[合并模块。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369820%28v=vs.85%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T19:44:17.757

通常，选项是静态链接、私有部署、使用合并模块以重用其他人的逻辑或通过使用引导程序重新分配先决条件。

如果不知道您的确切依赖关系是什么，就不可能给出确切的答案，但这里是每个方面的优缺点：

静态链接 - 很容易，因为除了您的文件之外没有什么可以部署的。主要缺点是如果库具有安全漏洞并且需要修补，则必须重新构建和重新部署应用程序。

私有部署 - 相对容易，因为您只需将文件部署在应用程序目录中。由于您必须重建和重新部署应用程序，因此仍然存在服务问题。Microsoft 不会修补您的目录。

合并模块 - 看起来很简单，只需添加合并模块。但是仍然存在重大问题，因为如果合并模块出现问题，您将受到供应商的摆布。（微软）。这就是为什么现在不赞成使用合并模块的原因。

redist - 最难实现（您需要定义 setup.exe 引导程序），但也最简单，因为您可以重复使用其他人的安装程序。这是最佳的，因为该供应商可以在不重建您的情况下修补该 dll。

所以一般来说，redists是要走的路。但不总是... ：）

# sql - SQL Server- PIVOT 表。将行转换为列

> ID：13707938
> 
> 赞同：0
> 
> 时间：2012-12-04T16:55:37.993
> 
> 标签：sql, sql-server, tsql, pivot

我正在尝试将行转换为列。这是我的查询

```
SELECT M.urn,
       M.eventdate,
       M.eventlocation,
       M.eventroom,
       M.eventbed,
       N.time
FROM   admpatevents M
       INNER JOIN admpattransferindex N
               ON M.urn = N.urn
                  AND M.eventseqno = N.eventseqno
                  AND M.eventdate = N.eventdate
WHERE  M.urn = 'F1002754364'
       AND M.eventcode = 'TFRADMIN' 
```

当前结果

```
URN 日期 位置 房间 床 时间
F1002754364 20121101 EDEXPRESS 4-152 02 0724
F1002754364 20121101 CARDSURG 3-110 02 1455
F1002754364 20121102 胸部单元 6-129-GL04 1757
```

要求的结果

```
F1002754364 20121101 EDEXPRESS 4-152 02 0724 20121101 CARDSURG 3-110 02 1455 20121102 胸部单元 6-129-GL 04 1757
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:10:05.583

由于您使用的是 SQL Server，因此您可以同时使用`UNPIVOT`和`PIVOT`函数来转换此数据。如果您知道您将拥有多少个值，那么您可以对这些值进行硬编码，如下所示：

```
select *
from
(
    select urn,
        value,
        col +'_'+ CAST(rn as varchar(10)) as col
    from 
    (
        SELECT M.urn,
            cast(M.eventdate as varchar(50)) eventdate,
            M.eventlocation,
            M.eventroom,
            M.eventbed,
            cast(N.time as varchar(50)) time,
            ROW_NUMBER() over(PARTITION by m.urn order by m.eventdate) rn
        FROM   admpatevents M
        INNER JOIN admpattransferindex N
            ON M.urn = N.urn
            AND M.eventseqno = N.eventseqno
            AND M.eventdate = N.eventdate
        WHERE  M.urn = 'F1002754364'
            AND M.eventcode = 'TFRADMIN'
    ) src1
    unpivot
    (
        value 
        for col in (eventdate, eventlocation, eventroom, eventbed, time)
    ) unpiv
) src2
pivot
(
    max(value)
    for col in ([eventdate_1], [eventlocation_1], [eventroom_1], [eventbed_1], [time_1],
                [eventdate_2], [eventlocation_2], [eventroom_2], [eventbed_2], [time_2],
                [eventdate_3], [eventlocation_3], [eventroom_3], [eventbed_3], [time_3])
) piv 
```

*注意 - 未经测试*

如果您有未知数量的列，那么您可以使用类似于这样的动态 sql：

```
DECLARE  @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(c.name +'_'+ cast(t.rn as varchar(10)))
                    from
                    (
                        select ROW_NUMBER() over(PARTITION by m.urn order by m.eventdate) rn
                        FROM   admpatevents M
                        INNER JOIN admpattransferindex N
                            ON M.urn = N.urn
                            AND M.eventseqno = N.eventseqno
                            AND M.eventdate = N.eventdate
                        WHERE  M.urn = 'F1002754364'

                    ) t
                    cross apply sys.columns as C
                   where C.object_id IN (object_id('admpatevents'), object_id('admpattransferindex')) and
                         C.name not in ('urn') -- add any other columns your want to exclude
                   group by c.name, t.rn
                   order by t.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
     from
     (
       select urn, value, col +''_''+ CAST(rn as varchar(10)) as col
       from
       (
            SELECT M.urn,
                cast(M.eventdate as varchar(20)) eventdate,
                M.eventlocation,
                M.eventroom,
                M.eventbed,
                cast(N.time as varchar(20)) time,
                ROW_NUMBER() over(PARTITION by m.urn order by m.eventdate) rn
            FROM   admpatevents M
            INNER JOIN admpattransferindex N
                ON M.urn = N.urn
                AND M.eventseqno = N.EVENTseqno
                AND M.eventdate = N.eventdate
            WHERE  M.urn = ''F1002754364''

       ) x
       unpivot
       (
         value
         for col in (eventdate, eventlocation, eventroom, eventbed, time)
       ) u
      ) x1
      pivot
      (
        max(value)
        for col in ('+ @colspivot +')
      ) p'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6c1cd/16)

# java - Swing编程——如何传递UI组件

> ID：13707939
> 
> 赞同：0
> 
> 时间：2012-12-04T16:55:41.787
> 
> 标签：java, swing, dependency-injection

我试图了解 UI 组件应该如何在 Java 中连接。就常规的“服务器”类而言，我正在尝试使用接口并使用 Spring 注入所有内容。如果是 UI，是否应该使用类似的方法？

更准确地说，让我们考虑以下几点：

```
class Panel1 extends JPanel{

    public Panel1(Service service, DBConnector db);
}

class Panel2 extends JPanel{

    public Panel1(Delegate delegate, Executor exec);
}

class MainFrame{

    public MainFrame(Service service, DBConnector db, Delegate delegate, Executor exec){
        Panel1 p = new Panel1(service, db);
        Panel1 p = new Panel1(delegate, exec);
    }
} 
```

对比

```
class MainFrame{

    public MainFrame(Panel1 panel1, Panel2 panel2){
    }
} 
```

我只是想大致了解一下在 UI 世界中什么更合适，如果它与常规类完全不同（可能是因为主框架中可能涉及许多面板）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:12:10.427

我还没有看到有人在 UI 中使用 DI。这可能是因为 DI 是一个相当新的概念（与构建 UI 相比），或者大多数人在 UI 地狱中生活了一段时间后逃到了[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)，而 MVC 解决了所有问题。

此外，从某种意义上说，大多数 UI 都是静态的，您可以使用按钮打开和关闭窗口/对话框，但不能用另一个对话框替换一个对话框。这会很方便，但前提是我作为用户/消费者可以做到这一点。编写两个执行相同操作的对话框然后使用 DI 连接其中一个或另一个是没有意义的。您要么需要两个不同的对话框，要么只需要一个。

当 UI 支持扩展时（如 Eclipse），它们使用插件系统在运行时加载 UI 元素，其中的代码发现菜单、工具栏等并添加元素。

e4（Eclipse 的最新代码库）将 DI 用于许多事情，但不用于构建 UI。同样，用户界面通常是静态的，因为您永远不会在用户可以从中选择的特定位置拥有两个或更多服务。

因此，使用 DI 可能有意义，但它可能是开创性的工作（即您必须探索可能性空间并自己找到低复杂度的低谷）。

# java - 事件发生时在 Applet 中使用paintComponent 进行绘图

> ID：13707942
> 
> 赞同：2
> 
> 时间：2012-12-04T16:55:46.927
> 
> 标签：java, swing, user-interface, paintcomponent

我正在尝试创建一个小程序，它将产生与文本框中指定的数字一样多的椭圆。出现文本框，但按回车后，我的paintComponent 不绘制。先感谢您。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import net.miginfocom.layout.*;
import net.miginfocom.swing.MigLayout;
import java.awt.geom.*;

public class OvalDrawer extends JApplet
{
private JLabel numberL;
private JTextField numberTF;

private NumHandler numHandler;

public static final int WIDTH = 500;
public static final int HEIGHT = 500;

//Create Layout
public void init()
{
    setLayout(new MigLayout("wrap 2"));
    numberL = new JLabel("Enter number of ovals to draw:");
    numberTF = new JTextField(7);

    add(numberL);
    add(numberTF);

    numHandler = new NumHandler();
    numberTF.addActionListener(numHandler);

    setSize(500, 500);
}

//Event Handler
public class NumHandler implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        repaint();
    }

}

//Draw Ovals
public void paintComponent (Graphics g)
{
    super.paintComponents(g);
    int number;
    int x = 10;
    int y = 30;
    int width = 20;
    int height = 10;

    number = Integer.parseInt(numberTF.getText());

    for (int i = 0; i < number; i++)
    {
        g.drawOval(x, y, width, height);

        x += 5;
        y += 5;
        width += 5;
        height += 5;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:09:13.297

JApplet 类没有要覆盖的paintComponent 方法。请注意，您的编译器不会让您调用实际的超级方法（您认为您可能正在这样做，但实际上您调用`super.paintComponents(...)`的是完全不同的方法）。

一个不好的解决方案是覆盖 JApplet 的绘制方法，但我强烈建议您不要这样做。相反，您应该在 JPanel 的 paintComponent 方法中进行绘制，然后让 JApplet 显示该 JPanel。此外，您需要养成使用`@Override`注释的习惯，以确保您实际上覆盖了您认为的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-10T05:40:27.420

```
/*  * <Applet code=PressButton2 width=600 height=600>  * </Applet> 
*/

import javax.swing.*; import java.awt.*; import java.awt.event.*;

class MyPanel extends JPanel {
    static String s="n";

    public void paintComponent(Graphics g)  { 
        super.paintComponent(g);

        if(s.equals("g"))
            setBackground(Color.green);
        if(s.equals("b"))
            setBackground(Color.blue);
        if(s.equals("c"))
            setBackground(Color.white);
     }
}

public class PressButton2 extends JApplet {
    MyPanel panel;
    MyPanel screen;
    String s="n";

    JButton green, clear, blue;

    public void init() {
        Container container = getContentPane();
        panel = new MyPanel();
        screen = new MyPanel();
        panel.setLayout(new GridLayout(1, 3));

        green = new JButton("Green");
        blue = new JButton("Blue");
        clear = new JButton("Clear");
        green.addActionListener(new ActionEventHandler1());
        blue.addActionListener(new ActionEventHandler1());
        clear.addActionListener(new ActionEventHandler1());

        panel.add(green);
        panel.add(blue);
        panel.add(clear);

        container.add(panel, BorderLayout.SOUTH);
        container.add(screen);
    }

class ActionEventHandler1 implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        String temp = e.getActionCommand(); 

        if (temp.equals("Green")) {
            MyPanel.s = "g";

            screen.repaint();
        }
        if (temp.equals("Blue")) {
            MyPanel.s = "b";
            screen.repaint();
        }
        if (temp.equals("Clear")) {
            MyPanel.s = "c";
            screen.repaint();
        }
    }
} 
```

# javascript - 主干视图是否总是需要主干模型？

> ID：13707944
> 
> 赞同：3
> 
> 时间：2012-12-04T16:55:53.337
> 
> 标签：javascript, backbone.js

我正在学习骨干网。

我想知道主干视图是否总是需要主干模型。

例如，假设我有一个包含两个子面板的面板。我的结构方式是使用主面板的父视图，然后是子面板的两个子视图......

```
 var OuterPanel = Backbone.View.extend({
        initialize: function() {
            this.innerPanelA = new InnerPanelA(innerPanelAModel);
            this.innerPanelB = new InnerPanelB(innerPanelBModel);
        },
    });

    var outerPanel = new OuterPanel(); 
```

父视图实际上只是一个容器。它可能有一些控件，但没有需要持久化的数据。这是正确的方法吗？或者这是不好的做法？

Thnx（提前）为您提供帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T17:03:06.787

正如[Backbone.View 文档中所说](http://backbonejs.org/#View)

> 主干视图几乎比代码更约定俗成——它们不会为您确定有关您的 HTML 或 CSS 的任何内容，并且可以与任何 JavaScript 模板库一起使用。

换句话说，如果你没有模型，就不要使用模型。另一方面，我会将子模型作为选项注入到外部视图实例中，而不依赖于全局变量，如下所示：

```
var OuterPanel = Backbone.View.extend({
    initialize: function(options) {
        this.innerPanelA = new InnerPanelA({model: options.modelA});
        this.innerPanelB = new InnerPanelB({model: options.modelB});
    }
});

var outerPanel = new OuterPanel({
    modelA: innerPanelAModel,
    modelB: innerPanelBModel
}); 
```

# android - android：当用户触摸片段外部时，我如何关闭片段？

> ID：13707946
> 
> 赞同：2
> 
> 时间：2012-12-04T16:55:59.890
> 
> 标签：android, android-fragments, android-lifecycle

大家好 =) 我是一名新的 android 开发人员，我需要关于解除片段的帮助。

我的应用程序有一个登录片段，当用户触摸它的外部时，我想隐藏登录片段。我怎么能做这个？OnTouchEvent() 方法是否有用？

请说点什么。谢谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:06:52.880

将登录布局放置在透明的全屏布局中，并在较大的布局上检测触摸事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T03:13:52.810

我认为更好的方法是删除片段以释放内存资源。

我的解决方案是在片段中有这个方法：

```
private void closeFragment() {
        getActivity().getSupportFragmentManager().beginTransaction().remove(YOUR_FRAGMENT.this).commit();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:54:23.670

再次嗨 =) 我在我的主页活动中使用 OnTouchListener 解决了这个问题。我的主页布局中有一个 gridviews 背景，如果用户没有登录，`onTouch()`方法运行。当登录片段可见并且用户触摸它之外我hideLoginFragment() 方法调用解除片段..

```
gridView = (ShelvesView) findViewById(R.id.grid_shelves);
gridView.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                        if (application.getDbManager().getUser().key.equals("-1")){
                    hideLoginFragment();
                    loginButton.setVisibility(View.VISIBLE);
                    exitButton.setVisibility(View.INVISIBLE);}
                return false;
            }
        }); 
```

# php - 从 PHP 发布链接

> ID：13707948
> 
> 赞同：2
> 
> 时间：2012-12-04T16:56:07.867
> 
> 标签：php, facebook-graph-api

我有这个脚本：这段代码应该发布一个文本和一个网站链接

```
<?
  // Remember to copy files from the SDK's src/ directory to a
  // directory in your application on the server, such as php-sdk/
  require_once('facebook.php');

  $c = array(
    'appId' => '4102137023*****',
    'secret' => '*****c4a60cb08*****7c0333*****',
  );

  $facebook = new Facebook($c);
  $uid = $facebook->getUser();
  echo "Userid: " . $uid;
  echo "<BR>";
?>
<html>
  <head></head>
  <body>

  <?
    if($uid){

      // We have a user ID, so probably a logged in user.
      // If not, we'll get an exception, which we handle below.
      try {
        $ret_obj = $facebook->api('/me/feed', 'POST',
                                    array(
                                      'link' => 'angel-craft.de',
                                      'message' => 'Wenn ihr das hier seht freut euch auf ein Game'
                                 ));
        echo '<pre>Post ID: ' . $ret_obj['id'] . '</pre>';

      } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $login_url = $facebook->getLoginUrl( array(
                       'scope' => 'publish_stream'
                       )); 
        echo 'Please <a href="' . $login_url . '">login.</a>';
        echo $e->getType();
        echo $e->getMessage();
      }   
      // Give the user a logout link 
      echo '<br /><a href="' . $facebook->getLogoutUrl() . '">logout</a>';
    } else {

      // No user, so print a link for the user to login
      // To post to a user's wall, we need publish_stream permission
      // We'll use the current URL as the redirect_uri, so we don't
      // need to specify it here.
      $login_url = $facebook->getLoginUrl( array( 'scope' => 'publish_stream' ) );
      echo 'Please <a href="' . $login_url . '">login.</a>';

    }
  ?>

  </body>
</html> 
```

这应该发布一个带有文本的链接，但 Userid($uid) 保持为空。

是的，这是来自 FB dev 的演示脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:41:46.157

我已经成功使用了这个。

```
<?php 
require 'src/facebook.php';

    // Create our Application instance (replace this with your appId and secret).
    $facebook = new Facebook(array(
      'appId'  => '-----',
      'secret' => '-----',
      'cookie' => true,
    ));

    $session = $facebook->getSession();

    $me = null;
    // Session based API call.
    if ($session) {
      try {
        $uid = $facebook->getUser();
        $me = $facebook->api('/me');

        $Name = $me['first_name'];

        $properties = array(
                              array(
                                    'text'=>'Property Link', 
                                    'href'=>'http://www.yahoo.com'
                                    ),
                              array(
                                    'text'=>'Property Link', 
                                    'href'=>'http://www.yahoo.com'
                                    )
                              );

        // Link that is adjacent to "Like" and "Comment" at the very bottom of the post.
        $action_links = array(
                              'name'=>'Test', 
                              'link'=>'http://www.yahoo.com'
                              );
        // Dictates who can see the post.
        $privacy = array(
                         'value'=>'ALL_FRIENDS'
                         );

        // api('/me/feed', 'post',... = Wall Post.
        $wallPost = $facebook->api('me/feed', 'post', array(
                                                                 'message'=> 'Testing',                                     
                                                                 'link'=> 'http://www.yahoo.com',
                                                                                                                                 'properties'=>$properties,
                                                                 'actions'=>$action_links                                                           
                                                                 )
                                       );

      } catch (FacebookApiException $e) {

        error_log($e);
      }
    }

    $par = array();
    $par['req_perms'] = "email, publish_stream";

    if ($me) {
      $logoutUrl = $facebook->getLogoutUrl();
    } else {
      $loginUrl = $facebook->getLoginUrl($par);
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:58:43.147

我发现了这个错误，证书很旧。谢谢大家 ：）

# php - 当存在多个索引时，For-Each 循环会丢失第一个索引

> ID：13707955
> 
> 赞同：0
> 
> 时间：2012-12-04T16:56:17.653
> 
> 标签：php, loops, foreach, explode

我有下面的 PHP，当位置数组只有 1 个值时效果很好，但是当它有任何大于 1 的数字时，第一个位置的信息会一直打印为空白。通过调用`explode`逗号分隔的列表来设置数组。当我在循环之前手动设置数组时，效果很好！然而，当我使用 时`explode`，即使我打印了数组并且可以确认它正在按照我的预期进行设置（使用正确的 0 索引）。我的代码是：

```
echo "<ul>";
foreach ($locations as &$value) 
{
    $locationDetails = mysql_query("SELECT id, name FROM locations WHERE id='$value'");
    $locationDetailRow = mysql_fetch_assoc($locationDetails);

    echo "<li>".$locationDetailRow['name']."</li>";
}
unset($value);
echo "</ul>"; 
```

我已经确认查询没有失败，这`$value`就是我所期望的，并且在每种情况下`name`都存在第一个。`$value`

当有多个位置时，这应该在第一种情况下失败的任何原因？

# c# - 文本框上的事件 OnClick ？(C#Win8)

> ID：13707957
> 
> 赞同：2
> 
> 时间：2012-12-04T16:56:26.940
> 
> 标签：c#, windows-8, visual-studio-2012

我在 TextBox 上寻找像“OnClick”这样的事件。

我的目标只是在用户单击 TextBox 时擦除文本。

我正在为 Windows 8 开发 VS2012。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:02:02.700

你应该处理这个`GotFocus`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:04:09.870

您在寻找`Tapped`活动吗？这几乎是基于触摸的 Windows 开发的新事件`Click`或事件，其中包括 Windows 8 商店应用程序和 Windows Phone 应用程序`Clicked`

# ruby-on-rails - Rails：使用 AJAX 响应重定向到上一页

> ID：13707960
> 
> 赞同：0
> 
> 时间：2012-12-04T16:56:30.530
> 
> 标签：ruby-on-rails, ajax, back-button, browser-history

我有这个页面，其中有一个 form_remote_tag，它返回一个 AJAX 分页响应：

```
<% form_remote_tag :url => searchs_path, :html => {:id => "search_form"} do %>

<!-- Blah -->

<% end %> 
```

结果打印在另一个 div 中并指向完全不同的视图。现在我主要关心的不是浏览分页结果。我的目标是，一旦我点击一个结果从而转到另一个 URL，我就可以返回到主搜索表单，其中*填充*了*先前的 AJAX 响应*。

我尝试使用 HTML5 历史 API，但它看起来只是有助于浏览单页机（这对我来说不是首要任务）。我正在考虑页面缓存，尽管它可能有点矫枉过正。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:32:03.910

最后设法通过[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage) API 存储 AJAX DOM 数据来解决问题。

# excel - 在 VBA 中制作子程序

> ID：13707963
> 
> 赞同：-2
> 
> 时间：2012-12-04T16:56:35.447
> 
> 标签：excel, vba

我怎么能在 VBA 中编写一个程序，在 excel(2010) 中扫描一个单元格范围，而不是告诉它扫描了多少个单元格，是否有更多的数字或文本单元格，以及它找到了多少个空单元格？范围单元格将由用户定义。

这是我当前的代码：

```
Private Sub CommandButton1_Click()

Dim c As Range

Set c = Application.InputBox(Prompt:="A vizsgálandó cellatartomány:", Title:="Adja meg   a cellatartományt!", Default:="A1:B4", Type:=8)

Dim szam As Integer, szoveg As Integer, osszescella As Integer, ures As Integer

osszescella = c.Cells.Count '# of scanned cells

Dim rngSpec As Range

Set rngSpec = c.SpecialCells(xlCellTypeBlanks)

If Not rngSpec Is Nothing Then ures = rngSpec.Cells.Count '# of blank cells

Set rngSpec = c.SpecialCells(xlCellTypeConstants, 2)

If Not rngSpec Is Nothing Then szoveg = rngSpec.Cells.Count '# of text cells

Set rngSpec = c.SpecialCells(xlCellTypeConstants, 1)

If Not rngSpec Is Nothing Then szam = rngSpec.Cells.Count '# of numeric cells

Dim kezdocella As String

kezdocella = InputBox("Kezdő cella", "Adja meg a kezdőcellát:", "G10")

Range(kezdocella).Value = "Vizsgált cellák száma: "

Range(kezdocella).Offset(0, 1).Value = osszescella

Range(kezdocella).Offset(1, 0).Value = "Szöveges/számos van több?"

If szam > szoveg Then Range(kezdocella).Offset(1, 1).Value = "Számos" _
Else: If szoveg > szam Then Range(kezdocella).Offset(1, 1).Value = "Szöveges" _
Else Range(kezdocella).Offset(1, 1).Value = "Ugyanannyi van"

Range(kezdocella).Offset(2, 0).Value = "Üres cellák száma: "

Range(kezdocella).Offset(2, 1).Value = ures

Range(kezdocella).Offset(3, 0).Value = "Nem üres cellák száma: "

Range(kezdocella).Offset(3, 1).Value = osszescella - ures

Cells.Columns.AutoFit

End Sub 
```

现在工作正常，谢谢 Scott Holtzman。最后，它显示从用户提供的单元格开始的结果。我相信会有更好的方法来做到这一点，但我猜我这也行得通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:18:16.850

你已经有了一个很好的开始！我在下面的代码中为您提供了帮助，并清理了您的一些无效语法。这应该会让你想去......并且没有不必要的循环。

```
Option Explicit

Sub elsobeadando()

Dim c As Range

Set c = Application.InputBox(Prompt:="Enter Cell Range", Title:="Specify Range", Type:=8)

Dim szam As Integer, szoveg As Integer, osszescella As Integer, ures As Integer

szam = c.Cells.Count '# of scanned cells

On Error Resume Next
Dim rngSpec As Range
Set rngSpec = c.SpecialCells(xlCellTypeBlanks)

If Not rngSpec Is Nothing Then szoveg = rngSpec.Cells.Count '# of blank cells

Set rngSpec = c.SpecialCells(xlCellTypeConstants, 2)

If Not rngSpec Is Nothing Then osszescella = rngSpec.Cells.Count '# of text cells

Set rngSpec = c.SpecialCells(xlCellTypeConstants, 1)

If Not rngSpec Is Nothing Then ures = rngSpec.Cells.Count '# of numeric cells

'not sure if this maps up with the above because, well ... I don't understand hungarian! :)
'also cleaned this up a bit to be actual VBA syntax
Range("D10").Value = osszescella
If szam > szoveg Then Range("D11").Value = "Több számos cella volt, mint szöveges"
Range("D12").Value = ures
Range("D13").Value = osszescella - ures

End Sub 
```

# c - C - 用户单字符输入呈现奇怪的结果

> ID：13707964
> 
> 赞同：5
> 
> 时间：2012-12-04T16:56:37.077
> 
> 标签：c, input, char

新来的，我有一个非常简单的问题。我正在用 C 语言编写一个简单的程序，该程序要求用户输入如何处理字符的选项。在他们输入结果后，程序返回菜单。然而，它似乎需要某种幽灵输入，就好像 char 有一些未知值一样。我需要将 char 设置回其默认状态。

代码：

```
/* display menu for user */
void menu() {

    printf("\n- - - Phone Book Database - - -\n");
    printf("\nSelect an action:\n\n");
    printf("\tc:\tCreate a database entry.\n");
    printf("\ts:\tSearch the database entries.\n");
    printf("\td:\tDelete a database entry.\n");
    printf("\tq:\tQuit program.\n\n");

    printf("Enter choice: ");
    menu_choice = getchar();

    if(menu_choice != 'c' && menu_choice != 's'
        && menu_choice != 'd' && menu_choice != 'q') {
            printf("\n\n\tInvalid choice.\n");
            menu();
    }
    //fflush(stdin);
} 
```

这是一个示例输出：

```
- - - Phone Book Database - - -

Select an action:

    c:  Create a database entry.
    s:  Search the database entries.
    d:  Delete a database entry.
    q:  Quit program.

Enter choice: c

Enter name: test

Enter address: test

Enter number: 3

- - - Phone Book Database - - -

Select an action:

    c:  Create a database entry.
    s:  Search the database entries.
    d:  Delete a database entry.
    q:  Quit program.

Enter choice: 
    Invalid choice.

- - - Phone Book Database - - -

Select an action:

    c:  Create a database entry.
    s:  Search the database entries.
    d:  Delete a database entry.
    q:  Quit program.

Enter choice: q 
```

输入 c 作为输入调用以下函数

```
/* creates a new record in array */
void create_record() {
    char name[MAX];
    char address[MAX];
    int number;

    rec_num++; /* add 1 to marker for record placement */

    printf("\nEnter name: ");
    scanf("%s", name);

    printf("\nEnter address: ");
    scanf("%s", address);

    printf("\nEnter number: ");
    scanf("%d", &number);

    strcpy(record[rec_num].name, name);
    strcpy(record[rec_num].address, address);
    record[rec_num].number = number;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T18:09:43.183

看起来您已经有了答案，并且复习一下，它是正确的；using`getchar()`将从中读取一个字符`stdin`

```
printf("Enter choice: ");
menu_choice = getchar(); 
```

当我在控制台上看到此提示并键入`c<enter key>`时，会导致两个字符转到`stdin`：`'c'`和`'\n'`

第一次`getchar();`运行时，它只拾取`'c'`离开的换行符。在第二次迭代中`'\n'`，无需等待用户提供任何内容即可获取；因此似乎有“幽灵输入”。

我只是想指出，每当您从用户那里获得输入并且结果不是您所期望的结果时，只需将其转回以验证正在发生的事情并没有什么坏处，例如：

```
if(menu_choice != 'c' && menu_choice != 's'
    && menu_choice != 'd' && menu_choice != 'q') {
        printf("\n\n\tYou entered %c (%d).\n", menu_choice, menu_choice);
        printf("\tThat's an invalid choice.\n");
        menu();
} 
```

会告诉你：

```
You entered
 (10).
That's an invalid choice. 
```

在它位于不同行的事实和根据 ASCII 表检查十进制结果之间，您会看到 10 [10]是换行符，这可以帮助您获得结果。

编辑：

使用换行符的 1 个选项 -

```
printf("what character?");
c = getchar(); // Get the character from stdin
getchar();     // consume the newline character that was left 
```

第二种选择：

```
printf("what character?");
scanf("%c ", &c); // Get the character from stdin, note the space after the %c
                  // that will allow any special characters including \t and \n 
```

如果您只想获取字符，然后以 & 结束，`'\n'`则必须添加和转义换行符：

```
printf("what character?");
scanf("%c\\n", &c); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:32:33.323

正如其他人指出的那样，它是换行符。只需添加另一个

```
(void) getchar(); /* read and discard newline */ 
```

您只想阅读一个字符的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:35:45.280

return char '\n' 可能会被留在`stdin`里面，这样下次你来的时候它`getchar()`就会获取这个。

`getchar()`尝试使用调试器或打印出来查看获取的值。

对于您的应用程序来说，这可能`getchar()`不是一个很好的选择，并且`scanf()`会做得更好，这样所有标准输入都将被获取，并且下次您来时它应该是空的。显然，您还需要为 scanf 提供多个要编写的字符，就像在您的其他代码中一样。

然后，您可以简单地查看数组中的第一个字符来获取您的字符。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-04T17:13:17.997

在您输入命令之后，一个杂散字符（几乎可以肯定是 '\n'）会留在您的输入缓冲区中。

要删除它，您可以添加：

```
fflush(stdin) 
```

...就在您`getchar()`打电话之前。

# google-apps-script - Google Apps 验证器

> ID：13707968
> 
> 赞同：1
> 
> 时间：2012-12-04T16:56:47.217
> 
> 标签：google-apps-script

我对验证器有问题。验证工作正常，问题是当验证未完成时，我希望出现一条消息，告诉用户您必须添加数据。

这是代码

```
function showDialog()
{
  var aplicacion=UiApp.createApplication();
  aplicacion.setTitle("Informacion Clientes");
  aplicacion.setHeight(300);
  aplicacion.setWidth(500);

  var grid=aplicacion.createGrid(8, 3);
  //var panelVertical=aplicacion.createVerticalPanel();

  //Codigo Cliente
  var labelCodigo=aplicacion.createLabel("Codigo");
  var TextBCodigo=aplicacion.createTextBox();
  var msg1=aplicacion.createLabel("Ingrese un codigo").setId("msg1").setVisible(false).setStyleAttribute("color", "#F00");
  TextBCodigo.setName("Codigo").setId("Codigo");
  grid.setWidget(0, 0, labelCodigo);
  grid.setWidget(0, 1, TextBCodigo);
  grid.setWidget(0, 2, msg1);

  //Nombre Cliente
  var labelNombre=aplicacion.createLabel("Nombre");
  var TextBNombre=aplicacion.createTextBox();
  var msg2=aplicacion.createLabel("Ingrese un codigo").setId("msg2").setVisible(false).setStyleAttribute("color", "#F00");
  TextBCodigo.setName("Nombre").setId("Nombre");
  grid.setWidget(1, 0, labelNombre);
  grid.setWidget(1, 1, TextBNombre);
  grid.setWidget(1, 2, msg2);

  //Direccion Cliente
  var labelDireccion=aplicacion.createLabel("Direccion");
  var TextBDireccion=aplicacion.createTextBox();
  var msg3=aplicacion.createLabel("Ingrese una direccion").setId("msg3").setVisible(false).setStyleAttribute("color", "#F00");
  TextBCodigo.setName("Direccion").setId("Direccion");
  grid.setWidget(2, 0, labelDireccion);
  grid.setWidget(2, 1, TextBDireccion);
  grid.setWidget(2, 2, msg3);

  //Telefono Cliente
  var labelTelefono=aplicacion.createLabel("Telefono");
  var TextBTelefono=aplicacion.createTextBox();
  TextBCodigo.setName("Telefono").setId("Telefono");
  grid.setWidget(3, 0, labelTelefono);
  grid.setWidget(3, 1, TextBTelefono);

  //Celular Cliente
  var labelCelular=aplicacion.createLabel("Celular");
  var TextBCelular=aplicacion.createTextBox();
  TextBCodigo.setName("Celular").setId("Celular");
  grid.setWidget(4, 0, labelCelular);
  grid.setWidget(4, 1, TextBCelular);

  //Contacto Cliente
  var labelContacto=aplicacion.createLabel("Contacto");
  var TextBContacto=aplicacion.createTextBox();
  TextBCodigo.setName("Contacto").setId("Contacto");
  grid.setWidget(5, 0, labelContacto);
  grid.setWidget(5, 1, TextBContacto);

  //Zona de Clientes
  var comboZona = aplicacion.createListBox().setId('comboZona').setName('Zona');
  var labelZona= aplicacion.createLabel("Zona");
  agregarZonaCombo(comboZona);
  grid.setWidget(6, 0, labelZona);
  grid.setWidget(6, 1, comboZona);

  var panel = aplicacion.createVerticalPanel();
  panel.add(grid);

  //El boton que le va a dar submit
  var button=aplicacion.createButton('Submit').setId("button");
  var labelHola=aplicacion.createLabel("Hello").setVisible(true).setId("hola");
  var handler=aplicacion.createServerHandler("submitData").validateLength(TextBCodigo, 1, 5)
      .validateLength(TextBNombre, 3, 20)
      .validateLength(TextBDireccion, 5, 30);

  handler.addCallbackElement(TextBCodigo)
         .addCallbackElement(TextBNombre)
         .addCallbackElement(TextBDireccion)
         .addCallbackElement(TextBTelefono)
         .addCallbackElement(TextBCelular)
         .addCallbackElement(TextBContacto);

  button.addClickHandler(handler);

  panel.add(button);

  panel.add(labelHola);
  aplicacion.add(panel);

  var doc=SpreadsheetApp.getActive();
  doc.show(aplicacion);

}

function submitData(e)
{
  var app=UiApp.getActiveApplication();
  submitPage_(app);

  return app;

} 
```

我的函数 submitData 负责隐藏标签。但是我不知道调用新函数来设置true属性的事件名称是什么。

# python - 限制 Python 中嵌套函数调用的数量

> ID：13707971
> 
> 赞同：-2
> 
> 时间：2012-12-04T16:57:10.920
> 
> 标签：python, lambda, functional-programming

只是一个警告，这段代码很难看。我知道有更好的方法可以做到这一点，但这只是一个练习。

我正在研究 python 的函数式编程方面，但是当我尝试嵌套许多函数调用时，我一直遇到错误：

```
LEN = 4
def calcentropy(i):
    entropy[i] = -1 * reduce(lambda x,y: x+y, map(lambda x: x*np.log2(x), map(lambda x: x * (float(1)/float(NUM)), map(count, range(0,LEN)))))
map(calcentropy, range(0,LEN)) 
```

我收到一条错误消息，指出我的类型不匹配；最后一次调用 range() 的 float 和 None：TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'

当我做类似的事情时：

```
LEN = 4
def calcFreqs(i): do stuff to freqs
map(calcFreqs, range(0, LEN)
def calcentropy(i):
    entropy[i] = -1 * reduce(lambda x,y: x+y, map(lambda x: x*np.log2(x), map(lambda x: x * (float(1)/float(NUM)), freqs))))
map(calcentropy, range(0,LEN)) 
```

我没有任何问题。

我认为问题在于 LEN 不再在 range() 的调用范围内。有没有办法可以解决这个问题，或者我是否超出了某种限制，如果是这样，那是什么？

抱歉没有添加足够的代码，我的错误：

```
import numpy as np
LEN = 4
freqs = np.zeros(4 * LEN, dtype = np.float64)
sites = np.array([0,1,2,3,0,1,2,3,0,1,2,3], dtype = np.int8)
A = np.int8(0)
C = np.int8(1)
G = np.int8(2)
T = np.int8(3)
def count(i):
    freqs[i * LEN + A] = E + reduce(lambda x,y:x+y, map(lambda x: 1 if x==A else 0, sites[i::LEN]))
    freqs[i * LEN + C] = E + reduce(lambda x,y:x+y, map(lambda x: 1 if x==A else 0, sites[i::LEN]))
    freqs[i * LEN + G] = E + reduce(lambda x,y:x+y, map(lambda x: 1 if x==A else 0, sites[i::LEN]))
    freqs[i * LEN + T] = E + reduce(lambda x,y:x+y, map(lambda x: 1 if x==A else 0, sites[i::LEN]))
entropy = np.zeros(LEN, dtype = np.float64)
def calcentropy(i):
    entropy[i] = -1 * reduce(lambda x,y: x+y, map(lambda x: x*np.log2(x), map(lambda x: x * (float(1)/float(NUM)), map(count, range(0,LEN)))))
map(calcentropy, range(0,LEN))
print entropy
info   = map(lambda x: 2-x, entropy) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:24:27.057

他们的问题是你的`count`函数没有返回任何东西。在 Python 中，这与返回`None`.

所以当你运行你的长嵌套语句时，你会`None`从最里面的`map`调用中得到一个值列表：`map(count, range(0, LEN))`. 然后，当第一个`None`值被传递到最里面的 lambda 表达式并且您尝试将它乘以一个浮点数时，它会导致异常。

因此，您要么需要使用其他东西作为大嵌套结构的最内层值，要么需要修复`count`以返回某些东西。我不清楚你打算迭代什么，所以我不能真正提供一个可靠的建议。也许`freqs`？

另外，我建议避免`map`当您只想多次运行一个函数但不关心结果时。相反，编写一个显式`for`循环。这在 Python 3 中很重要，它`map`返回一个生成器（在你迭代它之前它不会做任何事情）。

# sql - 事务如何与 node-postgres 一起工作？

> ID：13707977
> 
> 赞同：4
> 
> 时间：2012-12-04T16:57:24.867
> 
> 标签：sql, node.js, postgresql, sqltransaction, node-postgres

我正在使用 node-postgres 以回调样式进行 SQL 查询。我有一个函数可以接收查询列表并在事务块中执行它们。我的理解是我使用 node-postgres 提交查询“BEGIN”，在我的事务块中提交我需要的所有查询，然后提交查询“COMMIT”。

但是，尽管我的查询是有效的（简单的插入，作为独立查询经过良好测试），并且一切都肯定以正确的顺序执行，但当我在事务块之后测试数据库的状态时，我得到了不一致的状态。有时我的所有插入都发生了，有时只有其中一些发生了。我的理解是事务块是原子的，因此在提交后立即使用 SELECT 查找块中的插入应该是全部或全部。

这是我的功能：

```
Db.prototype.makeTransaction = function (queries, callback) {
    var thisDb = this;
    thisDb.tryQuery("BEGIN", [], function () {
        async.forEach(queries, function (query, arrayCallback) {
            thisDb.tryQuery(query.sql, query.values, arrayCallback);
        }, function (err) {
            if (err) {
                thisDb.tryQuery("ROLLBACK", [], function () {
                    callback(err);
                });
            } else {
                thisDb.tryQuery("COMMIT", [], callback);
            }
        });
    });
}; 
```

使用辅助函数 tryQuery：

```
Db.prototype.tryQuery = function (query, values, callback) {
    pg.connect(this.conn, function (err, client) {
        if (!err) {
            client.query(query, values, callback);
        } else {
            // Failed to connect to the database
            callback(err);
        }
    });
}; 
```

对出了什么问题有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:54:19.337

感谢 araqnid 回答我的问题：交易必须在同一个连接上完成。

# c++ - C++ 命名修改：QBE_NXZ QAE_NXZ

> ID：13707980
> 
> 赞同：0
> 
> 时间：2012-12-04T16:57:39.143
> 
> 标签：c++, dll

首先，这一切都是用 MS VS 完成的。

程序崩溃并显示“过程入口点？FunName@ClassName@@QAE_NXZ 无法在动态链接库 XXX.dll 中找到”

我在依赖walker中打开了XXX.dll，我能找到的只有

FunName@ClassName@@QBE_NXZ，而不是 FunName@ClassName@@QAE_NXZ。

我知道重建 XXX.dll 会解决这个问题，但 QBE_NXZ 和 QAE_NXZ 有什么区别？

c++ 名称修饰也是编译器特定的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:06:44.673

您可以使用`undname.exe`Visual Studio 附带的实用程序来解开名称。在这种情况下：

```
C:\>undname "?FunName@ClassName@@QAE_NXZ"
Undecoration of :- "?FunName@ClassName@@QAE_NXZ"
is :- "public: bool __thiscall ClassName::FunName(void)"

C:\>undname "?FunName@ClassName@@QBE_NXZ"
Undecoration of :- "?FunName@ClassName@@QBE_NXZ"
is :- "public: bool __thiscall ClassName::FunName(void)const " 
```

如您所见，区别在于成员函数是否`const`存在。

名称修饰是特定于编译器的。对于 GCC，您可以使用该`c++filt`程序来解开名称。

# c# - CLR SQL 用户定义类型将 ID 列表传递给存储过程

> ID：13707984
> 
> 赞同：0
> 
> 时间：2012-12-04T16:57:43.933
> 
> 标签：c#, tsql, ado.net, sqlclr

很多时候，在项目中，我们将一个 ID 列表从 UI 传递到存储过程。大多数解决方案都基于创建 sql 字符串拆分函数，该函数创建临时表并使用临时表执行一些内部连接器。等

有没有人有创建 CLR SQL UDT 一些 StringList 的经验，我们可以将其传递给用户 proc

```
StringList stringList = new StringList();
stringList.Add("ID1");
stringList.Add("ID2");
stringList.Add("ID3");
SqlCommand cmd = new SqlCommand("SelectDataByIDs");
cmd.Parameters.Add(new SqlParameter("list", SqlDbType.Udt){ Value = stringList}); 
```

并在 SQL 中使用

```
SELECT * FROM DataTable 
WEHRE DataId in @stringList -- or inner join? 
```

请分享你的智慧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:19:27.447

这是我为我的案例所做的：

```
--declare type
CREATE TYPE StringIDList AS TABLE
(   StringId NVARCHAR(8) NOT NULL PRIMARY KEY )
go
--test function
CERATE PROCEDURE SelectListValue
(   @ids [dbo].[StringIDList] readonly )
AS
BEGIN
    SELECT * FROM @ids WHERE StringId <> '30'
END 
```

C# 代码

```
SqlConnection conn = new SqlConnection(@"Data Source=.\SQLEXPRESS2012;Initial
Catalog=db;Integrated Security=true");
conn.Open();

List<SqlDataRecord> records = new List<SqlDataRecord>();
var rec = new SqlDataRecord(new SqlMetaData("stringid", SqlDbType.NVarChar, 8));
rec.SetValue(0, "10");
records.Add(rec);

rec = new SqlDataRecord(new SqlMetaData("stringid", SqlDbType.NVarChar, 8));
rec.SetValue(0, "30");
records.Add(rec);

var cmd = new SqlCommand("SelectListValue");
cmd.CommandType = CommandType.StoredProcedure;
cmd.Connection = conn;

var param = new SqlParameter("@ids", SqlDbType.Structured);
param.Direction = ParameterDirection.Input;
param.TypeName = "StringIDList";
param.Value = records;

cmd.Parameters.Add(param);

var reader = cmd.ExecuteReader();
while (reader.Read())
{
    Console.WriteLine(reader.GetString(0));
} 
```

控制台输出

```
10 
```

看起来很简单……你觉得呢？

# django-cms - 将内容类型添加到 django-cms

> ID：13707986
> 
> 赞同：3
> 
> 时间：2012-12-04T16:57:50.500
> 
> 标签：django-cms

我意识到 django-cms 的重点是没有内容类型并将所有内容都视为页面，但暂时忽略了这一点，我将如何将它们添加到 django-cms 中？通过“内容类型”，我的意思是行为很像页面对象的东西，即具有 URL、标题、插件等，但也有额外的自定义字段。

我查看了[http://ilian.ini.org/extending-django-cms-page-model/](http://ilian.i-n-i.org/extending-django-cms-page-model/)，这几乎是完美的，除了它只是为现有的 Page 类添加了额外的字段。因此，如果您想要两种新的内容类型，例如 Event（额外字段：start_date、end_date）和 Venue（额外字段：latitude、longitude），每次添加页面时，您都会看到这两种内容类型的字段，即使您只想创建一个活动或场地（甚至只是一个标准页面）。

有任何想法吗？
谢谢
汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:49:45.623

我最终使用插件解决了这个问题。对于任何感兴趣的人，详细信息位于[http://blog.isotoma.com/2013/01/content-types-and-django-cms/](http://blog.isotoma.com/2013/01/content-types-and-django-cms/)。

编辑：使用 Django CMS 3，您现在可以使用新的页面扩展模型[http://docs.django-cms.org/en/stable/how_to/extending_page_title.html](http://docs.django-cms.org/en/stable/how_to/extending_page_title.html)

# java - 通过意图将整数传递给活动 - Java（Android）

> ID：13707994
> 
> 赞同：0
> 
> 时间：2012-12-04T16:58:07.693
> 
> 标签：java, android, android-intent, bundle

Results.java 中所有被注释掉的代码都是我尝试过的所有事情，但都没有成功。我无法通过意图将整数传递给另一个活动。

下面的方法在我的 QuestionView.java 类中。

```
public void endQuiz() {
    Intent intent = new Intent(QuestionView.this, Results.class);
    intent.putExtra("correctAnswers", correctAnswers);
    intent.putExtra("wrongAnswers", wrongAnswers);
    startActivity(intent);
} 
```

结果.java

```
public class Results extends Activity {

    QuestionView qv = new QuestionView();
    ArrayList<Question> queryList = qv.getQueries();

//  int cAswers = this.getIntent().getExtras("correctAnswers");
    int cAnswers = getIntent().getIntExtra("correctAnswers", -1);
    int wAnswers = getIntent().getIntExtra("wrongAnswers", -1);

/*  Bundle b = this.getIntent().getExtras();
    int cAnswers = b.getInt("correctAnswers");
    int wAnswers = b.getInt("wrongAnswers");*/

//  int cAnswer = getIntent().getIntExtra("correctAnswer");

//  if(getIntent().getIntExtra("correctAnswers") != null) {
//      int cAnswers = b.getInt("correctAnswers");
//  }

//  ArrayList<Question> questions = extras.getSparseParcelableArray("queries");

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.resultsmain);

/*      Bundle extras = getIntent().getExtras();
        int cAnswers = extras.getInt("correctAnswers");
        int wAnswers = extras.getInt("wrongAnswers");*/

        Button homeBtn = (Button)findViewById(R.id.homeBtn);
        Button highscoresBtn = (Button)findViewById(R.id.highscoresBtn);

        homeBtn.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                Intent intent1 = new Intent(Results.this, MainMenu.class);
                startActivity(intent1);
            }
        });

        highscoresBtn.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                Intent intent2 = new Intent(Results.this, Highscores.class);
                startActivity(intent2);
            }
        });

        showResults();
    }

    public void showResults() {

        ArrayList<TextView> tList = new ArrayList<TextView>(10);

        TextView header = (TextView)findViewById(R.id.header);
        TextView q1 = (TextView)findViewById(R.id.q1);
        TextView q2 = (TextView)findViewById(R.id.q2);
        TextView q3 = (TextView)findViewById(R.id.q3);
        TextView q4 = (TextView)findViewById(R.id.q4);
        TextView q5 = (TextView)findViewById(R.id.q5);
        TextView q6 = (TextView)findViewById(R.id.q6);
        TextView q7 = (TextView)findViewById(R.id.q7);
        TextView q8 = (TextView)findViewById(R.id.q8);
        TextView q9 = (TextView)findViewById(R.id.q9);
        TextView q10 = (TextView)findViewById(R.id.q10);

        tList.add(q1);
        tList.add(q2);
        tList.add(q3);
        tList.add(q4);
        tList.add(q5);
        tList.add(q6);
        tList.add(q7);
        tList.add(q8);
        tList.add(q9);
        tList.add(q10);

        tList.get(0).setText(queryList.get(0).getQuery());

        if(queryList.get(0).getCorrectness() == true) {
            tList.get(1).setText("Changed to true");
        } else {
            tList.get(1).setText("DID NOT Change to true");
        }

        tList.get(2).setText(Integer.toString(cAnswers));
        tList.get(3).setText(Integer.toString(wAnswers));

/*      for(int i = 0; i < 10; i++) {
            tList.get(i).setText(queryList.get(i).getQuery());
            if(queryList.get(i).getCorrectness() == true) {
                tList.get(i).setTextColor(Color.GREEN);
            } else {
                tList.get(i).setTextColor(Color.RED);
            }
        }*/
    }
} 
```

日志猫

```
12-04 11:52:33.342: E/AndroidRuntime(1128): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.test/com.example.test.Results}: java.lang.NullPointerException
12-04 11:52:33.342: E/AndroidRuntime(1128):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at android.os.Looper.loop(Looper.java:137)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at java.lang.reflect.Method.invokeNative(Native Method)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at java.lang.reflect.Method.invoke(Method.java:511)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at dalvik.system.NativeStart.main(Native Method)
12-04 11:52:33.342: E/AndroidRuntime(1128): Caused by: java.lang.NullPointerException
12-04 11:52:33.342: E/AndroidRuntime(1128):     at com.example.test.Results.<init>(Results.java:21)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at java.lang.Class.newInstanceImpl(Native Method)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at java.lang.Class.newInstance(Class.java:1319)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
12-04 11:52:33.342: E/AndroidRuntime(1128):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
12-04 11:52:33.342: E/AndroidRuntime(1128):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:00:50.040

您正在尝试在Results的onCreate方法之前从QuestionView获取意图。将您的代码用于在onCreate中接收结果将您的结果活动更改为：

```
public class Results extends Activity {
    int cAnswers=0;
    int wAnswers=0;
    QuestionView qv = new QuestionView();
    ArrayList<Question> queryList = qv.getQueries();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.resultsmain);
        cAnswers = getIntent().getIntExtra("correctAnswers", -1);
         wAnswers = getIntent().getIntExtra("wrongAnswers", -1);
       //your code here... 
```

**注意：**我已经告诉过你不要创建一个 Activity 实例来访问它的方法或字段。使用[Intent](http://developer.android.com/reference/android/content/Intent.html)或[Application 类](http://developer.android.com/reference/android/app/Application.html)在应用程序组件（如活动）之间共享数据

# git - Git将多个存储库克隆到一个开发人员存储库中

> ID：13707997
> 
> 赞同：0
> 
> 时间：2012-12-04T16:58:13.453
> 
> 标签：git, github

我正在尝试设置一个个人 git 存储库示例：jnew。在该存储库中，我不想有很多其他存储库的克隆。例如，我有一个名为 jnew 的存储库，然后在里面我不想有一个名为 depot 的克隆。我的尝试如下。

1.  创建存储库前。新
2.  创建本地目录 ex。/用户/jnew/开发/jnew
3.  cd /用户/jnew/开发/jnew
4.  混帐初始化
5.  git 远程添加[https://github.com/jnew/jnew.git](https://github.com/jnew/jnew.git)
6.  git clone --mirror [https://github.com/jnew/depot.git](https://github.com/jnew/depot.git) depot
7.  git 远程添加仓库 git@github.com:jnew/depot.git
8.  git co -b 1234-test depot/verified-next

除了克隆部分之外，这一切都有效。我希望克隆能够从该远程存储库中引入所有分支，因此在 github 上我可以进入 depot 目录，然后进入分支以查看最新代码。出于某种原因，每次我尝试这个时，远程分支都没有带来。验证了一个示例远程分支，它是主分支的副本。

对此的任何帮助将不胜感激。我在谷歌和这里搜索了几个小时，但没有找到答案，为什么克隆没有包含分支。

如果这没有意义，那么您能否详细解释一个好的方法。使用 git 命令意味着您将如何设置单个开发人员以便能够在他们自己的存储库中处理多个项目。这样做是为了避免错误推送到错误的存储库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:29:16.513

你需要[git-submodule](http://git-scm.com/book/en/Git-Tools-Submodules)。子模块正在解决您遇到的确切问题。

# twitter-bootstrap - Twitter Bootstrap 相对宽度

> ID：13707998
> 
> 赞同：2
> 
> 时间：2012-12-04T16:58:19.973
> 
> 标签：twitter-bootstrap, width

我有两列（A 和 B），我会让它们依赖于内容 - 图像（1,2,3）。例如，当 3 张图片 - 然后第一列 - 30% 宽度，第二列 - 70%，当 2 张图片 - 20%/80% 当 1 张图片 - 10%/90% 图片![图片](../Images/d49131c671fe675a1778ee054bffb4cf.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T07:05:27.957

我不认为 Bootstrap 是实现这种布局的最佳选择。这是我能得到的最接近的

```
<div class="container">
 <div class="row">
  <div class="col-lg-6">
   <div class="row">
    <div class="col-lg-4">
     <img src="#" />
    </div>
    <div class="col-lg-4">
     <img src="#" />
    </div>
    <div class="col-lg-4">
     <img src="#" />
    </div>
   </div>
  </div>
  <div class="col-lg-6">right</div>
 </div>
 <div class="row">
  <div class="col-lg-6">
   <div class="row">
    <div class="col-lg-4">
     <img src="#" />
    </div>
    <div class="col-lg-4">
     <img src="#" />
    </div>
   </div>
  </div>
  <div class="col-lg-6">right</div>
 </div>
 <div class="row">
  <div class="col-lg-6">
   <div class="row">
    <div class="col-lg-4">
     <img src="#" />
    </div>
   </div>
  </div>
 <div class="col-lg-6">right</div>
</div> 
```

# c# - 参数上的 Linq 匿名属性

> ID：13707999
> 
> 赞同：1
> 
> 时间：2012-12-04T16:58:22.760
> 
> 标签：c#, linq, generics

是否可以通过属性列表选择匿名类型作为参数。该方法应如下所示：

```
public void TestLinq(List<"Properties"> properties, List<Data> data)
{
    var dat = from d in data select new { properties };
} 
```

我知道描述听起来很笨拙，但我希望能得到一些帮助。

知道我必须寻找这个主题的术语很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:37:27.760

给你，这是基于这个答案[https://stackoverflow.com/a/5310828/491950](https://stackoverflow.com/a/5310828/491950)

```
List<string> properties = new List<string>() { {"ResultPrefix"}, {"ProfileResult"}};

foreach (dynamic d in ListProperties(properties, cellValues))
{
     Console.WriteLine(d.ResultPrefix);
}

public static List<dynamic> ListProperties(List<string> properties, List<ChemistryResult> chemistryResults)
{
    List<dynamic> output = new List<dynamic>();

    foreach (ChemistryResult chemistryResult in chemistryResults)
    {
        IDictionary<string, Object> result = new ExpandoObject();

        foreach (string property in properties)
        {
            PropertyInfo propertyInfo = typeof(ChemistryResult).GetProperty(property);

            result[property] = propertyInfo.GetValue(chemistryResult);
        }

        output.Add(result);
    }

    return output;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:24:30.030

您可以使用[动态 LINQ 查询库](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)（[下载示例](http://msdn2.microsoft.com/en-us/vcsharp/bb894665.aspx)）在投影中创建属性列表，如下所示：

```
public dynamic TestLinq(IEnumerable<Data> data, IEnumerable<string> properties)
{
    // Validate parameters.
    if (properties == null) throw new ArgumentNullException("properties");
    if (data == null) throw new ArgumentNullException("data");

    // Construct the field list.
    var fields = new StringBuilder();
    foreach (string p in properties) fields.AppendFormat("{0},", property);

    // Throw an exception if there are no items.
    if (fields.Length == 0) throw new ArgumentException(
        "The properties enumeration contains no elements.", "properties");

    // Remove the last comma.
    fields.Length--;

    // Select the items and return.  Create the
    // projection here.
    return data.Select("new(" + fields + ")");
} 
```

请注意，返回类型是 type [`dynamic`](http://msdn.microsoft.com/en-us/library/dd264741.aspx)，因此您将没有编译时检查，除非您是[duck-typing](http://en.wikipedia.org/wiki/Duck_typing)，否则您可能对这些字段了解不多。

根据您的需要，*您*最好为此创建强类型（如果这是基于用户输入，那么您显然不能）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:24:28.017

您不能在方法签名中使用匿名类型。它不能用作参数或返回类型。

您可以做的是将参数声明为[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264741%28v=vs.100%29.aspx)，但动态会变得非常棘手，因此我建议避免使用它。您可以有一个`List<dynamic>`参数，然后您将能够访问该类型的成员，但您不会在编译时进行类型检查。

它使用的另一个选项[`IEnumerable`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)or [`IList`](http://msdn.microsoft.com/en-us/library/system.collections.ilist.aspx)。使用其中任何一个都将允许您在不知道类型的情况下访问集合的成员。这更安全，因为您拥有所有编译时检查，但不允许您访问成员或匿名类型。

但实际上，您应该将您的匿名类型转换为真正的类，这样您就可以让您的生活更轻松。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T15:08:15.070

我很抱歉造成混乱。结果应该是正确的 csv。用户应该能够定义列的顺序。但对我来说，很难提出一个好的问题。我正在寻找一种表达而不是反射的解决方案。我的想法是生成一个匿名对象列表（以正确的顺序），我想从中创建 csv。所以我知道以下是有效的：

```
public void Get(List<Value> data,Expression<Func<Value, T>> converter)
{
    var dat = from d in data
     select
         new
         {
               converter
         };
} 
```

是否可以在属性中保护 Expression> 转换器并将它们中的许多组合为一个？所以我会得到正确的订单