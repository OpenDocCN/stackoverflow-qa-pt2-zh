# StackOverflow 问答 16106000-16106999

# java - 使用 Selenium 自动化 Java Web 小程序测试？

> ID：16106003
> 
> 赞同：1
> 
> 时间：2013-04-19T13:39:17.247
> 
> 标签：java, selenium, applet

我正在尝试使用 Selenium 自动化我的 Web 应用程序。我可以使用 Selenium 登录，但之后生成了一个 Web 小程序，我无法获得该应用程序的句柄。

真的有可能实现自动化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:29:29.977

据我所知，Selenium WebDriver 本身，正如您所发现的，不会让您使用 Java Applets。

不过，对于 Java 语言，`Robot`该类可能会有所帮助。

[http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T22:41:51.637

对不起，我知道为时已晚:)。我假设当您说“生成了一个 Web 小程序”时，这意味着生成了一个新的弹出窗口。（如我错了请纠正我）

我用来在这样的窗口句柄之间切换，

//保存当前（即旧）句柄 //查找新窗口并获取新句柄并切换窗口

```
 string currentHandle = driver.CurrentWindowHandle;
 PopupWindowFinder finder = new PopupWindowFinder(driver);
 string newHandle = finder.Click(driver.FindElement(By.Id("primarycontactid")));
  driver.SwitchTo().Window(newHandle); 
```

# syntax - 为什么显式引用层次结构会消除“不同维度”的错误

> ID：16106004
> 
> 赞同：2
> 
> 时间：2013-04-19T13:39:19.130
> 
> 标签：syntax, mdx, hierarchy

我收到 SSAS 错误“函数中指定的两个集合具有不同的维度”。

我实际上使用相同的维度，相同的层次结构（隐式），在一个集合中我使用“All”成员，而在另一个集合中我正在使用叶成员。如果我更改成员标识符以显式引用（单个）层次结构，那么错误就会消失。

这是为什么？

这是我如何收到错误的示例：

```
{Crossjoin( [Measures].[Measure1], [Event].[Category1] ),
Crossjoin( [Measures].[Measure2], [Event].[All] )} 
```

这基本上是我摆脱它的方法（添加显式层次结构参考）：

```
{Crossjoin( [Measures].[Measure1], [Event].[ByCategory].[Category1] ),
Crossjoin( [Measures].[Measure2], [Event].[ByCategory].[All] )} 
```

任何更正解释都将帮助我更好地理解整体的 mdx 语法。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:08:08.387

我不是 SSAS 的专家，但要确保这两个成员属于同一层次结构，您可以尝试以下操作：

```
with
  member x as [Event].[Category1].dimension.name
  member y as [Event].[All].dimension.name
select { x , y } on 0 from [your-cube] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T19:52:07.060

你能请显示你的查询的其余部分吗？

我试图做类似的事情，但它工作正常..

```
select {crossjoin( [Measures].[Internet Sales Amount],
[Product].[Bikes]),
crossjoin([Measures].[Reseller Sales Amount],
[Product].[All])} on columns
from cube 
```

![结果](https://i.stack.imgur.com/a4ZDb.png)

# c++ - 这种设计是标准设计模式之一吗？

> ID：16106010
> 
> 赞同：2
> 
> 时间：2013-04-19T13:39:36.327
> 
> 标签：c++, design-patterns

我有一些像这样的 C++ 类：

![在此处输入图像描述](https://i.stack.imgur.com/MHYsu.gif)

控制消息重放的类是`ReplayController`. 按组成，它包含 a`switch_controller`和 a `cti_client_controller object`。这些对象是*专门*化的，它们分别知道如何处理`switches`和`cti`客户端。

这个结构有名字吗？它是一种设计模式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:46:49.117

连图表看起来都很熟悉

![在此处输入图像描述](https://i.stack.imgur.com/TzjN3.png)

（来源：维基）。

这看起来像[**策略模式**](http://en.wikipedia.org/wiki/Strategy_pattern)。

# javascript - Android本机浏览器中奇怪的JavaScript行为

> ID：16106013
> 
> 赞同：1
> 
> 时间：2013-04-19T13:39:39.147
> 
> 标签：javascript, android, jquery, webkit

嗨，我想要一个简单的 onclick 事件，其中一个图像隐藏而另一个图像显示。这是一个示例：http: [//jsbin.com/abezob/1](http://jsbin.com/abezob/1)

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"> </script>
</head>

<body style="background-color: #ccc;">
<div id="reload" style="display: block">
<img width="24" height="24" src="http://info.kicktipp.de/img/mobil/reload.png" alt="reload" />
</div>

<div id="loading" style="display: none">
<img width="24" height="24" src="http://info.kicktipp.de/img/mobil/loading.gif" alt="loading" />
</div>
<p>
<a href="http://www.google.de/">Link to Google</a>
</p>

<script type="text/javascript">
$("a").click(function() {
$("#reload").hide();
$("#loading").show();
});
</script>

</body></html> 
```

我在我的设备上看不到微调器，当然我想在页面加载时看到它。该示例适用于 Firefox、Chrome 和 Safari，但不适用于原生 Android 4.1.2 浏览器。这是我的用户代理：

Mozilla/5.0 (Linux; U; Android 4.1.2; de-de; GT-I9100 Build/JZO54K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30

任何建议表示赞赏。

更新：设置如下所示的超时将使微调器出现。但是，微调器仅针对设置的超时进行动画处理。因此，如果连接不好并且加载需要一些时间，则应用程序看起来没有响应。示例：http: [//jsbin.com/uxopuy/1](http://jsbin.com/uxopuy/1)，超时 3 秒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:53:49.347

我不确定它是否会改变任何东西，但你可以尝试使用这样的东西：

```
$("a").click(function(e) {
    e.preventDefault();
    var $this = $(this);
    $("#reload").hide();
    $("#loading").show();
    setTimeout(function () {
        window.location.href = $this.attr("href");
    }, 500);
}); 
```

所有这一切都是在实际导航之前添加半秒延迟。对我来说，这*可能*有助于在离开页面时显示微调器。

我不知道为什么它没有在您的手机上“显示”微调器，但如果是因为浏览器很快离开页面并且您没有太多时间查看微调器，我不会感到惊讶。

# php - 发送电子邮件 - 第一次创建联系表格

> ID：16106014
> 
> 赞同：1
> 
> 时间：2013-04-19T13:39:40.087
> 
> 标签：php, jquery, contact-form

我即将结束我第一次创建自定义联系表单。我已经准备好了一切——我需要的只是 php/ajax 代码。在谷歌搜索后，这就是我所拥有的：

输入字段（HTML 文件）：

```
<label for="userName">Name:</label>
<input id="userName" class="inputField" type="text" name="userName"/>

<label for="userEmail">E-mail:</label>
<input id="userEmail" class="inputField" type="text" name="userEmail"/>

<label for="userSubject">Subject:</label>
<input id="userSubject" class="inputField" type="text" name="userSubject"/>

<label for="userMessage">Message:</label>
<textarea id="userMessage" class="inputField" rows="" cols="" name="userMessage" style="overflow:hidden"></textarea>

<label for="userSubject">Assunto:</label>
<input id="userSubject" class="inputField" type="text" name="userSubject"/> 
```

我的按钮是一个动画功能（**不是 a** `<input type="button"/>`）。

PHP 文件（send.php）：

```
<?php

    // Main Variables Used Throughout the Script
    $domain = "http://" . $_SERVER["HTTP_HOST"]; // Root Domain - http://example.com
    $siteName = "wwwnovaplaquemar.pt";
    $siteEmail = "guida.e.pedro@gmail.com";
    $er = "";

    // Check if the web form has been submitted
    if (isset($_POST["userEmail"])){
        // Process the web form variables
        // Strip out any malicious attempts at code injection, just to be safe.
        // All that is stored is safe html entities of code that might be submitted.
        $userName = htmlentities(substr($_POST["userName"], 0, 100), ENT_QUOTES);
        $userEmail = htmlentities(substr($_POST["userEmail"], 0, 100), ENT_QUOTES);
        $userSubject = htmlentities(substr($_POST["userSubject"], 0, 100), ENT_QUOTES);
        $userMessage = htmlentities(substr($_POST["userMessage"], 0, 10000), ENT_QUOTES);

        // Perform some logic on the form data
        // If the form data has been entered incorrectly, return an Error Message

            // Prepare the E-mail elements to be sent
            $subject = $userSubject;
            $message = 
            '<html>
                <head>
                <title>' . $siteName . ': A Contact Message</title>
                </head>
                <body>
                ' . wordwrap($userMessage, 100) . '
                </body>
            </html>';

            // We are sending the E-mail using PHP's mail function
            // To make the E-mail appear more legit, we are adding several key headers
            // You can add additional headers later to futher customize the E-mail

            $to = $siteName . ' Contact Form <' . $siteEmail . '>';

            // To send HTML mail, the Content-type header must be set
            $headers = 'MIME-Version: 1.0' . "\r\n";
            $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

            // Additional Headers
            $headers .= 'From: ' . $userName . ' <' . $userEmail . '>' . "\r\n";
            $headers .= 'Reply-To: ' . $userName . ' <' . $userEmail . '>' . "\r\n";
            $headers .= 'Return-Path: ' . $userName . ' <' . $userEmail . '>' . "\r\n";
            $headers .= 'Date: ' . date("r") . "\r\n";
            $headers .= 'X-Mailer: ' . $siteName . "\r\n";

            // And now, mail it
            if (mail($to, $subject, $message, $headers)){
                echo '<div>Thank you for contacting ' . $siteName . '. We will read your message and contact you if necessary.</div>';
            }
            else {
                $er .= 'We weren&#39;t able to send your message. Please contact ' . $siteEmail . '.<br />';
            }
    }

?> 
```

在我的 js 文件中：

```
$.ajax({
    type: "POST",
    url: "send_pt.php",
    data: data,
    success: function(){
      $('#inputText_infoBox p').html("A enviar e-mail...");
    }
  }); 
```

问题：我在哪里放什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:42:56.617

假设单击事件正在调用 ajax 函数..您需要使用 ajax 将数据发送到服务器..使用[jquery.serialize](http://api.jquery.com/serialize/)`data`序列化您的表单..这会将所有表单元素发布到服务器

尝试这个

```
 $.ajax({
  ...
 data: $('#yourFormID').serialize(),
 success: function(){
  ... 
```

# opencart - Vqmod - 为 Opencart 编写第一个文件

> ID：16106015
> 
> 赞同：0
> 
> 时间：2013-04-19T13:39:39.953
> 
> 标签：opencart, vqmod

我正在使用 VQmod 为 Opencart 编写我的第一个 xml 文件。请参阅以下行：

```
<?xml version="1.0" encoding="UTF-8"?>
<modification>
    <id>Exibe porcento de desconto</id>
    <version>1.0</version>
    <vqmver>2.1.5</vqmver>
    <author>Oldman</author>

    <file name="catalog/view/theme/my_theme/template/product/product.tpl">
        <operation>

      <search position="after"><![CDATA[<?php if ($price) { ?>
      <div class="price">
        <span class="txt_price"><?php echo $text_price; ?></span>
        <?php if (!$special) { ?>
        <?php echo $price; ?>
        <?php } else { ?>
        <span class="price-old"><?php echo $price; ?></span> <span class="price-new"><?php echo $special; ?></span>
        <?php } ?>]]></search>
            <add><![CDATA[ <?php echo 'Works fine!';?>]]></add>
        </operation>
    </file>
</modification> 
```

但是当我将 xml 文件放入 vqmod/xml 文件夹时它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T14:01:35.550

因为您正在尝试进行*多行*搜索。这对于当前的 vQmod 是不可能的。只做**一行**搜索...

像：

```
<modification>

    <id>Exibe porcento de desconto</id>
    <version>1.0</version>
    <vqmver>2.1.5</vqmver>
    <author>Oldman</author>

    <file name="catalog/view/theme/my_theme/template/product/product.tpl">
        <operation>
            <search position="before"><![CDATA[<?php if ($price) { ?>]]></search>
            <add><![CDATA[ <?php echo 'Before the price if statement!';?>]]></add>
        </operation>
    </file>
</modification> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-06T10:28:53.157

VQMod 不允许多行搜索，所以如果你想搜索多行你可以使用“offset”属性，offset="(no. of next line)"

```
<id>Exibe porcento de desconto</id>
<version>1.0</version>
<vqmver>2.1.5</vqmver>
<author>Oldman</author>

<file name="catalog/view/theme/my_theme/template/product/product.tpl">
    <operation>
        <search position="before" offset="7"><![CDATA[<?php if ($price) { ?>]]></search>
        <add><![CDATA[ <?php echo 'Works fine!';?>]]></add>
    </operation>
</file> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T19:38:18.137

VQMod 不支持多行搜索。要了解 vqmod 选项，请查看此链接：**[Opencart：Vqmod 教程](https://sankartypo3.wordpress.com/2013/11/25/opencart-vqmod-tutorial/ "Opencart：Vqmod 教程")**。

# vb.net - phonegap 客户端 websocket 和 vb.net 服务器

> ID：16106016
> 
> 赞同：1
> 
> 时间：2013-04-19T13:39:43.450
> 
> 标签：vb.net, websocket

我想将通过phonegap生成的我的andoid应用程序连接到vb.net服务器，我面临基本握手框架的问题，我收到Sec-WebSocket-Key1和Sec-WebSocket-Key2但无法接收最后3部分需要重新发送来自服务器的握手帧，在 websocket 协议中也提到 key 1 和 key 2 需要转换为大端数，我也没有办法做到这一点。它提到了以下内容，

> 从处理 |Sec-WebSocket-Key1| 获得的数字的串联 字段，表示为大端序的 32 位数字，处理 |Sec-WebSocket-Key2| 获得的数字 字段，再次表示为一个大端序的 32 位数字，最后是握手结束的 8 个字节，形成一个 128 位字符串，然后服务器使用其 MD5 和来证明它读取了握手。

我能够在 php 中正确执行此操作，但在 vb.net 中找不到合适的逻辑。

```
$key = pack('N', "155712099") . pack('N', "173347027") . "Tm[K T2u";
echo md5($key,true)."<br>"; 
```

简而言之，我需要将上述代码转换为 vb.net 或 c#。

# javascript - 我希望从 1 - 80 范围内获得一个数字，如果不在该范围内，则会出现警报框

> ID：16106021
> 
> 赞同：0
> 
> 时间：2013-04-19T13:39:56.977
> 
> 标签：javascript

我是 JavaScript 新手，我需要一些帮助。我有一个表单和一些 JavaScript，但在输入错误范围时无法添加警告框。我希望显示一个警告框，输入范围在 1-80 之间，例如 81。

```
 <script type="text/javascript">
// hide from old browsers

if (top != self) {
     top.location = self.location.href
}

// end script hiding
</script>
<script type="text/javascript">
// hide from non scripting browsers

function chooseRandom(form) {

var m = parseInt(form.lower.value);

var n = parseInt(form.upper.value) - m;

var output = Math.round(Math.random() * n) + m;

form.result.value = output;

}
// Clears the form

function clearForm(form) {

    form.upper.value="";

    form.lower.value="";

    form.upper.focus();

    form.upper.select();

}
</script>
<script type="text/javascript">
// calculates range from 1 - 80
var browName = navigator.appName;
var SiteID = 1;
var ZoneID = 80;
var browDateTime = (new Date()).getTime();
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:19:14.477

希望这就是您正在寻找的：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript">
    function chooseRandom(form) {
    var m = parseInt(form.lower.value);
    var n = parseInt(form.upper.value) - m;
    var output = Math.round(Math.random() * n) + m;
    form.result.value = output;
    }
    function clearForm(formId) {
    var form = document.getElementById(formId);
    form.upper.value = "";
    form.lower.value = "";
    form.result.value = "";
    form.upper.focus();
    }
    function chooseResult(formId) {
    var form = document.getElementById(formId);
    var upperVal = parseInt(form.upper.value);
    var lowerVal = parseInt(form.lower.value);
    if(isNaN(lowerVal) || isNaN(upperVal) || (lowerVal < 1) || (upperVal > 80) || (lowerVal >= upperVal)) {
        alert("Value(s) out of range, must be 1 <= lower < upper <= 80");
        clearForm(formId);
    }
    else {
        //          alert("Values ok");
        chooseRandom(form);
    }
    }
</script>
</head>
<body>
<form id="form1" method="GET" action="">
    <p>Upper:</p><input id="upper" name="upper" type="number">
    <p>Lower:</p><input id="lower" name="lower" type="number">
    <p>Result:</p><input id="result" name="result" type="number">
    <button type="button" onclick="chooseResult('form1')">Choose result</button>
    <button type="button" onclick="clearForm('form1')">Clear form</button>
    <button type="submit">Submit form</button>
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:14:34.703

您必须将事件处理程序附加到输入。使用像 jQuery 这样的库要容易得多，您可能想对此进行调查。这是一个js解决方案。基本的代码流程是：

1.  获取高级事件处理程序，以便我们可以检测任一输入的更改。
2.  当事件触发时检查元素是否有一定的验证类
3.  检查所有值是否可接受。否则警告用户。

[http://jsfiddle.net/B6E4s/](http://jsfiddle.net/B6E4s/)

```
if (document.body.addEventListener) {
    document.body.addEventListener('change', validate, false);
} else {
    document.body.attachEvent('change', validate); //for IE
}

function validate(e) {
    e = e || window.event;
    var target = e.target || e.srcElement;
    if (target.className.match(/validateThis/)) {
        var lowerBoundVal = document.getElementById('lowerBound').value;
        var upperBoundVal = document.getElementById('upperBound').value;
        if (lowerBoundVal < 0) {
            alert('Enter # greater than 0');
        }
        if (upperBoundVal > 80) {
            alert('Enter # less than 81');
        }
    }
} 
```

# javascript - 如何在 Infobox 中使用 AjaxUrl 属性（ExtInfoWindow）？

> ID：16106025
> 
> 赞同：1
> 
> 时间：2013-04-19T13:40:07.930
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我的任务是将 googlemaps 版本 2 更新到版本 3。

我有来自第二版的代码，它使用 ExtInfoWindow 来获取带有信息的“弹出窗口”，在广泛阅读下面的链接之后，我发现这种方法的等价物是 Infobox 或 InfoWindow。我决定去Infobox。

阅读链接：

[https://developers.google.com/maps/documentation/javascript/reference#InfoWindow](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html)

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html)

[http://gmaps-utility-library-dev.googlecode.com/svn/trunk/extinfowindow/docs/reference.html](http://gmaps-utility-library-dev.googlecode.com/svn/trunk/extinfowindow/docs/reference.html)

来自版本 2 的代码：

```
 google.maps.event.addListener(marker, 'click', function() {
        marker.openExtInfoWindow(
        map,
        "mapwindow",
        "<img src='/images/ajax-loader.gif'>",
        { beakOffset: 0, paddingX: 60, paddingY: 45, ajaxUrl: '/templates/GoogleMapsMarkerInfo.aspx?id=' + page + '&epslanguage=<%=CurrentPage.LanguageBranch %>' }
        ); 
}; 
```

正如您从代码中看到的那样，我拥有在 InfoWindow 或 InfoBox 中都找不到的属性 ajaxUrl。我想我也许可以把上面的 AjaxUrl 放在 content 属性中（检查下面的代码），但是在阅读了 content 属性的文档几次之后，我意识到这不起作用。

我的尝试：

```
 google.maps.event.addListener(marker, 'click', function() {
                var myOptions = {
                 content: {"<img src='/images/ajax-loader.gif'>",'/templates/GoogleMapsMarkerInfo.aspx?id=' + page + '&epslanguage=<%=CurrentPage.LanguageBranch %>'}
                ,disableAutoPan: false
                ,maxWidth: 0
                ,pixelOffset: new google.maps.Size(60, 45)
                };
            var ib = new InfoBox(myOptions);
            ib.open(map, marker);
} 
```

萤火虫错误信息：http: [//img401.imageshack.us/img401/8646/firebugerror.png](http://img401.imageshack.us/img401/8646/firebugerror.png)

我一直在从 ExtInfoWindow 中搜索大约 5 个小时来寻找相当于 AjaxUrl 的内容，但没有任何运气。

如果有人对我的问题有答案，我将感谢您的答案，如果这不是问题，如果您可以将我链接到有关解决方案的一些文档，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:10:23.333

根据文档，“内容”采用字符串或节点。

> 要在信息窗口中显示的内容。这可以是 HTML 元素、纯文本字符串或包含 HTML 的字符串。InfoWindow 将根据内容调整大小。要为内容设置显式大小，请将内容设置为具有该大小的 HTML 元素。

您应该只对内容执行您自己的 ajax 请求并将其提供给 infowindow/infobox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:04:41.220

好吧，我找到了解决方案！

感谢 Rick 尝试启动我的大脑。

一旦我了解了 Rick ment 的含义，这非常简单。

我执行了一个 ajax 请求，我得到的数据是一个 html 文档。

正如 Rick 提到的，内容属性可以显示这些信息，所以我只需将我得到的数据设置回内容，瞧！

编码：

```
 $.ajax({
                url: '/templates/GoogleMapsMarkerInfo.aspx?id=' + page + '&epslanguage=<%=CurrentPage.LanguageBranch %>',
                dataType: "html",
                success: function(data){
                    var infowindow = new google.maps.InfoWindow({
                      content:data
                    });
                    infowindow.open(map, marker);
                }
             }); 
```

谢谢瑞克！

# dhtmlx-scheduler - 如何将数据从 xml 加载到 dhtmlxScheduler

> ID：16106038
> 
> 赞同：1
> 
> 时间：2013-04-19T13:40:41.853
> 
> 标签：dhtmlx-scheduler

我正在尝试将数据从 xml 加载到 dhtmlxScheduler

我的代码是：

```
function init()
{ 
  scheduler.locale.labels.timeline_tab = "Timeline";
 scheduler.locale.labels.section_custom="Section";
 scheduler.config.details_on_create=true;              
 scheduler.config.details_on_dblclick=true;
 scheduler.config.xml_date="%Y-%m-%d %H:%i";
 scheduler.init('scheduler_here',new Date(2011,4,24),"timeline");
 scheduler.load("data.xml","xml");
} 
```

# zend-framework2 - 在zend2中布局或视图内的数据库查询

> ID：16106039
> 
> 赞同：3
> 
> 时间：2013-04-19T13:40:42.980
> 
> 标签：zend-framework2

如何在视图中访问 zend 数据库连接。

在我的情况下，我的用户 index.phtml 显示所有用户的列表，用户注册了多种语言，这些语言以 JSON 格式存储在数据库中

这是 indexAction。

```
return new ViewModel(array(
        'users'             => $this->getRegisterTable()->fetchAll(),
    )); 
```

在 index.phtml 里面

```
<?php foreach ($users as $users):?>
<?php 
$getQuery = mysql_query("SELECT * FROM lang where id= $users->lang ");
$getResult = mysql_fetch_array($getQuery);
$lang = "<a href='" . $this->url(lang , array('action'=>'detail', 'id'=> $users->lang )) . "'>" .$getResult['name']."</a>";
 ?>
<?php endforeach;?> 
```

因此，要执行此查询，我必须使用 MYSQL_CONNECT 手动初始化数据库连接

但我希望它只访问 zend 初始化数据库连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:26:25.663

正如其他人正确指出的那样，这是一件非常糟糕的事情。这些数据应该从你的控制器发送到视图，并且你的视图不应该使用数据库，甚至不知道正在使用数据库。通过打破 MVC（模型视图控制器）设计模式，您的代码将更难维护和理解。

如果我理解您想要正确执行的操作，那么您希望显示用户已注册的语言。我会在获取用户时获取此信息，以便您的`User`模型上可以使用这些语言。如果您使用 Mapper 类从中获取用户，那么您将在此处获取语言。然后在您看来，您应该这样做：

```
<?php foreach ($users as $user) : ?>
    <?php foreach ($user->getLanguages() as $language) : ?>
        <?php $lang = "<a href='" . $this->url('lang' , array('action'=>'detail', 'id'=> $language['id'] )) . "'>" . $language['name'] . "</a>"; ?>
    <?php endforeach; ?>
<?php endforeach; ?> 
```

现在，您的表示（视图）层中不再有业务逻辑或数据访问逻辑。请记住使用`escape`视图助手从数据库中转义数据，如下所示：

```
<?php echo $this->escape($language['name']); ?> 
```

我希望它有所帮助。一旦您启动并运行从单独层获取数据的架构，您将开始理解为什么这是最佳实践。

# iphone - 当点击另一个 UITextField 时键盘不会关闭，这会带来一个选择器

> ID：16106047
> 
> 赞同：3
> 
> 时间：2013-04-19T13:41:06.233
> 
> 标签：iphone, ios, objective-c, uipickerview, uipickerviewcontroller

我有 2 个文本字段，我正在使用每个文本字段，单击时会打开一个带有顶部工具栏的选择器轮，可以选择关闭选择器并调出键盘，除非您关闭选择器并调出键盘，否则一切正常然后单击下一个文本字段。我把键盘放在上面，后面有新的pickerview。让键盘消失的唯一方法是在第一个文本字段中单击返回，然后单击完成或屏幕上的任何位置（不是文本字段）。

这是我的代码：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    for (NSUInteger i = 0; i<[self.fieldsArray count]; i++) {
        if ([self.fieldsArray objectAtIndex:i] == textField) {
            UITextField *input = [self.fieldsArray objectAtIndex:i];

            if (input.tag == 3 && !self.overrideDriver) {
                [self animatePickDriverForInput:input];
            }
            if (input.tag == 4 && !self.overrideVehicle) {
                [self animatePickVehicleForInput:input];
            }

        }
    }
} 
```

以下是使用的其他一些方法：

```
- (IBAction)textFieldFinished:(id)sender
{
    [sender resignFirstResponder];
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField {

    [textField resignFirstResponder];

    return YES;

}

- (void)animatePickDriverForInput:(UITextField *)input
{
    if ([self.drivers count] > 0) {
        [self.view endEditing:YES];
        [self showPickDriver];
    } else {
        //untested
        [input addTarget:self action:@selector(textFieldFinished:)
            forControlEvents:UIControlEventEditingDidEndOnExit];
    }
}

- (void)animatePickVehicleForInput:(UITextField *)input
{
    if ([self.vehicles count] > 0) {
        [self.view endEditing:YES];
        [self showPickVehicle];
    } else {
        //untested
        [input addTarget:self action:@selector(textFieldFinished:)
            forControlEvents:UIControlEventEditingDidEndOnExit];
    }
}

- (void)allowManualEntryOfDriver
{
    [self.additionalButtonPickerHelper animateDismiss:self.pickDriver];
    self.overrideDriver = YES;
    [self.driver becomeFirstResponder];
}

- (void)allowManualEntryOfVehicle
{
    [self.additionalButtonPickerHelper animateDismiss:self.pickVehicle];
    self.overrideVehicle = YES;
    [self.vehicle becomeFirstResponder];
}

- (void)showPickVehicle {
    self.pickVehicle = [self.additionalButtonPickerHelper createPicker:self.pickVehicle WithTag:2 WithOtherButtonText:@"Add Other Vehicle"];
    [self.additionalButtonPickerHelper showPicker:self.pickVehicle WithDoneAction:@selector(dismissVehiclePicker) OrWithOtherAction:@selector(allowManualEntryOfVehicle)];
}

- (void)showPickDriver {
    self.pickDriver = [self.additionalButtonPickerHelper createPicker:self.pickDriver WithTag:1 WithOtherButtonText:@"Add Other Driver"];
    [self.additionalButtonPickerHelper showPicker:self.pickDriver WithDoneAction:@selector(dismissDriverPicker) OrWithOtherAction:@selector(allowManualEntryOfDriver)];
} 
```

编辑：

更多代码：

```
- (void)dismissDriverPicker
{
    [self.additionalButtonPickerHelper animateDismiss:self.pickDriver];
}

- (void)dismissVehiclePicker
{
    [self.additionalButtonPickerHelper animateDismiss:self.pickVehicle];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.view endEditing:YES];
} 
```

这可能不是最有效的方法，但我是目标 c 的新手，正在寻找我能理解的解决方案。谢谢！

编辑这里是一张图片![键盘卡住了](https://i.stack.imgur.com/mihtJ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:46:04.823

请尝试使用这个

```
 - (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
    {
        [self showPickerView];
        return NO;
    }

    - (void)showPickerView
    {
       // ----- here create your picker view --------
    } 
```

你可以使用第二种方法，但这不是正确的方法......所以我说更喜欢第一种方法。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
   [self.view endEditing:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:47:37.000

为了得到这样，你可以使用这个

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    [self showPickDriver];

    return NO;
} 
```

或者

否则最好使用带有点击手势的标签，然后您可以轻松解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:52:38.013

您也可以尝试使用 textField 的属性：**inputView**

> 当文本字段成为第一响应者时显示的自定义输入视图。

因此，您可以显示此视图而不是键盘，并且不要手动处理它。

**或者：**

现在会出现错误行为，因为还显示了第二个文本字段的键盘。因此，您不仅需要辞去第一个字段的第一响应者，还需要实现：

```
-(BOOL) textFieldShouldBeginEditing:(UITextField *)field {
    return NO;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T14:18:23.287

`UITextField`包括`inputView`和`inputAccessoryView`属性来解决这种情况：

> **`inputView`**
> 
> 如果此属性中的值为`nil`，则文本字段在成为第一响应者时显示标准系统键盘。将自定义视图分配给此属性会导致显示该视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-13T11:47:49.540

如果包含文本字段的视图控制器显示为带有**表单样式的 modalViewController** **，**那么您必须覆盖下面给定的方法以使其正常工作。

 **```
- (BOOL)disablesAutomaticKeyboardDismissal 
{
   return NO;
} 
```**

# vba - 激活工作表时正在重新创建条件格式 - Excel VBA

> ID：16106051
> 
> 赞同：1
> 
> 时间：2013-04-19T13:41:31.060
> 
> 标签：vba, excel, excel-2010, conditional-formatting

我在 Excel 上的工作表上有代码，每次激活工作表时都会运行该代码 `Private Sub Worksheet_Activate()`。我有条件格式的代码，但每次激活工作表时，它都会一次又一次地重新创建相同的格式。如果条件格式已经存在，我该如何编码，什么都不做？

任何帮助将不胜感激！

代码：

```
Private Sub Workbook_Open()

'Comparison w. Agg Loss Code: Conditional Formatting

Dim wb As Workbook
Dim LastRowAgg As Long
Dim LastColumnAgg As Long

Set wb = ActiveWorkbook

With wb.Sheets("Comparison w. Agg Loss")

    .Select
    'Format to 3 decimal places
    LastRowAgg = .Cells(Rows.Count, 1).End(xlUp).Row
    LastColumnAgg = .Cells(4, Columns.Count).End(xlToLeft).Column
    .Range(.Cells(5, 2), .Cells(LastRowAgg, LastColumnAgg)).NumberFormat = "0.000"

    'Formula for conditional formatting
    .Range(.Cells(5, 2), .Cells(LastRowAgg, LastColumnAgg)).Select
    Selection.FormatConditions.Add Type:=xlExpression, Formula1:= _
        "=AND((ABS('Input Correlation'!B5:AT" & LastRowAgg & "-'Aggregate Loss Correlation'!B5:AT" & LastRowAgg & ")/'Input Correlation'!B5:AT" & LastRowAgg & ")>=(1/3),B5:AT" & LastRowAgg & "<>"" "")"
    Selection.FormatConditions(Selection.FormatConditions.Count).SetFirstPriority
        With Selection.FormatConditions(1).Interior
            .PatternColorIndex = xlAutomatic
            .Color = 255
            .TintAndShade = 0
        End With
    Selection.FormatConditions(1).StopIfTrue = False

end with

end sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:51:10.890

只是测试看看是否`FormatConditions.Count`大于0。

# c# - 实体的主键字段设置为 0 而不是 null

> ID：16106055
> 
> 赞同：4
> 
> 时间：2013-04-19T13:42:00.173
> 
> 标签：c#, asp.net-mvc, entity-framework

我有一个像这样的 Person 实体类型：

```
public partial class Person
{    
    public int PersonID { get; set; }
    public byte Gender { get; set; }
    public string IDNumber { get; set; }
} 
```

当我创建一个新的人以将他保存到数据库时，主键 PersonID 设置为 0，而不是 null。

编码：

```
var theNewGuy = new MyEntities.Person(); 
```

在这一行之后，theNewGuy.PersonID = 0。问题是，我如何告诉它插入一个新的 Person 并为其分配下一个可用的主键？显然，我不希望它为 0，但数据库中已经有一个 PersonID = 0;

保存代码：

```
Velo.People.Add(theNewGuy);
Velo.SaveChanges();//throws error 
```

抛出异常： **违反主键约束“PK_PERSON”。无法在对象“dbo.Person”中插入重复键。重复键值为 (0)。该语句已终止。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:44:54.500

主键不能为 Null。PK 必须是唯一的，而 Null 不是。此外，`int`它不是可空类型，因此它的默认值为 0。

EntityFramework 应该能够找出这`PersonID`是`Person`的关键，但以防万一尝试将`[Key]`属性粘贴在那里。此外，您可以通过将属性添加到您的属性来强制它成为一`auto increment`列。`[DatabaseGenerated(DatabaseGeneratedOption.Identity)]``PersonID`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:44:53.070

既然`PersonID`是`int`它永远不可能`null`。因此`Entity Framework`分配`0`为默认值。但不用担心 - 如果您将这样新创建的实体添加到数据库中，一切都会好起来的 - 它会被保存，`PersonID`根据数据库中已有的内容给出新的，并且内存中的实体将被刷新以反映数据库给出的新 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T09:07:25.047

如果你定义 public int? 人名 { 得到；放; }（在对象类型中使用 ?）你可以使用 null 作为值。

但是，它是如何被评论的，主键它不会为空，但也许在你的特定情况下处于迭代状态是有用的。

如果您从数据库创建实体模型，作为主键它不会为空，在数据库的设计中您不能将此字段设置为可为空，因此您必须添加“？” 手动修改。

# jquery - 使用 ajax 填充选择框。更好的方法

> ID：16106056
> 
> 赞同：0
> 
> 时间：2013-04-19T13:42:02.943
> 
> 标签：jquery, html, ajax

我有一个包含四个选择框的 HTML 页面。当我的页面加载时，我想用数据填充它们（使用 AJAX）。到这里为止还好。

问题是我想在每一个中显示选择的值。比方说，我有`TABLE_A`with`column ID_Name`和 the`TABLE_B`有所有的名字。我可以用所有名称填充选定的选择，但我无法自动显示选定的`ID_Name`.

其他选择的选择相同。我试图将 分配`ID_Name`给一个变量，但它不起作用，因为我不知道其中一个 AJAX 脚本首先加载。有时它会先填充选定的元素，然后再获取 ID，但有时会反过来。我怎样才能避免这种情况？

到目前为止我的脚本::

```
<script>
    jQuery(document).ready(function() {  

        var id_contacto = 0;
        var recebido_por = 0;
        var responder_por = 0;

        // Get general Data
        $.ajax({
            url: 'php/c_consultas.php?tipo_acao=consulta_detalhes_consulta&id_consulta='+getUrlVars()['id_consulta'],
            type: 'post',
            data: { tag: 'getData'},
            dataType: 'json',
                success: function (data) {
                    if (data.success) {
                        $.each(data, function (index, record) {                            
                            if ($.isNumeric(index)) { 
                                $('#cliente').val(record.cliente_nome).show();
                                id_contacto = record.id_contacto;
                                $('#ref_consulta').val(record.referenciaconsulta).show();
                                $('#titulo').val(record.tituloconsulta).show();
                                recebido_por = record.recebido_por;
                                responder_por = record.responder_por;
                                $('#consulta_notas').val(record.notas_consulta).show();
                            }
                    })
                }
            }
        });            

        // Get List of type of comunication (received by)
        $.ajax({
                url: 'php/listagens.php?tipo_lista=recebido_por',
                type: 'post',
                data: { tag: 'getData'},
                dataType: 'json',
                    success: function (data) {
                    $('#recebido_por').empty();
                    $('#recebido_por').append($("<option />").val('').text("Selecione uma opção...").attr('disabled','disabled').attr('style','display:none;'));
                        if (data.success) {
                            $.each(data, function (index, record) {                            
                                if ($.isNumeric(index))                                     

                                    if (record.ID == recebido_por){
                                        $('#recebido_por').append($("<option selected='selected'/>").val(record.ID).text(record.meio_comunicacao));
                                    } else {
                                        $('#recebido_por').append($("<option />").val(record.ID).text(record.meio_comunicacao));
                                    }
                            });
                            $('#recebido_por').trigger("liszt:updated");
                        }
                    }
            });            

        // Get type of comunication, again... (respond by)
        $.ajax({
                url: 'php/listagens.php?tipo_lista=recebido_por',
                type: 'post',
                data: { tag: 'getData'},
                dataType: 'json',
                    success: function (data) {
                    $('#responder_por').empty();
                    $('#responder_por').append($("<option />").val('').text("Selecione uma opção...").attr('disabled','disabled').attr('style','display:none;'));
                        if (data.success) {
                            $.each(data, function (index, record) {                            
                                if ($.isNumeric(index))                                     

                                    if (record.ID == responder_por){
                                        $('#responder_por').append($("<option selected='selected'/>").val(record.ID).text(record.meio_comunicacao));
                                    } else {
                                        $('#responder_por').append($("<option />").val(record.ID).text(record.meio_comunicacao));
                                    }
                            });
                            $('#responder_por').trigger("liszt:updated");
                        }
                    }
            });            

        //List of Internal contacts
        $.ajax({
                url: 'php/c_consultas.php?tipo_acao=listagem_contactos_internos&id_consulta='+getUrlVars()['id_consulta'],
                type: 'post',
                data: { tag: 'getData'},
                dataType: 'json',
                success: function (data) {
                    $('#contacto').empty();
                    $('#contacto').append($("<option />").val('').text("Selecione um contacto...").attr('disabled','disabled').attr('style','display:none;'));

                    if (data.success) {
                        var linha = "";
                        $.each(data, function (index, record) {
                            if ($.isNumeric(index)) { 
                                if (this.ID == id_contacto){
                                    $('#contacto').append($("<option selected='selected'/>").val(this.ID).text(this.nome));
                                } else {
                                    $('#contacto').append($("<option />").val(this.ID).text(this.nome));
                                }
                            }
                        })

                        $('#contacto').trigger("liszt:updated");
                    }
                }
            });            
}); // FIM Document(ready).
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:16:31.567

最简洁的方法（在我看来）是在单个 AJAX 调用中将所有内容传递回客户端。将 JSON 对象定义为以下内容的多行（在本例中为 4）：id、管道分隔的选择列表值字符串 (listString)、currentValue。在 Success 分支上，解析 json 对象，拆分管道分隔字符串，根据 controlID 加载选项，并将选项列表附加到选择列表后设置值。

```
if ('setSels' in serverResponse) {
        var setSel = serverResponse.setSels;
        wklen = setSel.length;
        var optVal = '';
        var valList;
        var j;
        for (i = 0; i < wklen; i++) {
            wkEl = jQuery('#' + setSel[i].id);
            if (wkEl.length) {
                valList = setSel[i].listString.split("|");
                optVal = '<option value=""></option>';
                for (j = 0; j < valList.length; j++) {
                    optVal += '<option value="' + valList[j] + '">' + valList[j] + '</option>';
                }
                jQuery(wkEl).html(optVal).val(setSel[i].currentValue);
            }
            else {
                alert('cannot find ' + setSel[i].id);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:46:16.083

我使用回调做了完全相同的事情，没有时间完全解释，但这里有代码，所以你应该能够弄清楚。

```
function CascadeDropDowns(parentClass, childClass, action, callback) {
  var DropDownId = $(parentClass + " option:selected").val();

  $.ajax({
    url: "/Terminals_configuration/" + action,
    data: { DropDownId: DropDownId },
    dataType: "json",
    type: "POST",
    error: function () {
      alert("An error occurred.");
    },
    success: function (data) {
      var items = "";
      $.each(data, function (i, item) {
        items += "<option value=\"" + item.Value + "\">" + item.Text + "</option>";
      });
      $(childClass).html(items);
      $(childClass)[0].selectedIndex = 0;
      if (callback) callback();
    }
  });
}

$(document).ready(function () {
  // Populates all child drop downs on load
  var callback = function () {
    CascadeDropDowns(".ConfigGroupDDL", ".ConfigNameDDL", "GetParameters");
  };

  CascadeDropDowns(".DeviceTypeDDL", ".ConfigGroupDDL", "GetGroups", callback);

  // Populates all child drop downs parent change
  $(".DeviceTypeDDL").change(function () {
    var callback = function () {
      CascadeDropDowns(".ConfigGroupDDL", ".ConfigNameDDL", "GetParameters");
    };
    CascadeDropDowns(".DeviceTypeDDL", ".ConfigGroupDDL", "GetGroups", callback);
  });
  $(".ConfigGroupDDL").change(function () {
    CascadeDropDowns(".ConfigGroupDDL", ".ConfigNameDDL", "GetParameters");
  });

  $(".MergeDeleteDDL").change(function () {
    if ($(this).val() == 0) {
      $("#ConfigValue").val("DELETE");
    }
    else {
      $("#ConfigValue").val("");
    }
  }); 
```

# solr - Solr MoreLikeThisComponent：返回结果文档的相似度值

> ID：16106059
> 
> 赞同：1
> 
> 时间：2013-04-19T13:42:18.757
> 
> 标签：solr, morelikethis

我使用 MoreLikeThisComponent 执行 SOLR 搜索并返回相关文档（通过 URL 传递 mlt=true 和相关参数）。如何获得相似文档的相似度值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:38:54.970

您可以取回分数字段。将`score`字段添加到`fl`参数。

如果您想标准化，请添加`match_include`参数，并根据您提交的文档标准化分数。

有关每个参数的更多详细信息，请参阅[http://docs.lucidworks.com/display/solr/MoreLikeThis](http://docs.lucidworks.com/display/solr/MoreLikeThis)。

# java - 创建构造函数，对象类型 Circle

> ID：16106073
> 
> 赞同：-6
> 
> 时间：2013-04-19T13:43:08.853
> 
> 标签：java, class

> 编写一个带参数的构造方法，一个 Circle 类型的对象。该方法应该构造一个新的圆形对象，其字段值与参数的字段值相同。

我发现这措辞真的很糟糕，不明白他们到底在问什么。他们是否要求我创建一个构造函数，例如：

```
public Circle(int x, int y, int r)
{

} 
```

他们是否希望我创建一个测试类来在那里创建对象并使用构造函数来使用这些值？

```
Circle c1 = new Circle (1,3,6); 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:48:26.833

这是我从你的问题中理解的

```
public Circle(Circle aCircle) {
   this.x = aCircle.getx();
   this.y = aCircle.gety();
   this.r = aCircle.getr();

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:27:34.303

我不确定，但我认为他们在说什么

```
public Circle(int x, int y, int r){
    this.x=x;
    this.y=y;
    this.r=r;
    }

public Circle(Circle acircle){
    this(acicle.getx(),acicle.gety(),acicle.getz());
    } 
```

并不是说“this”关键字可用于调用其他构造函数，请参阅[此链接关于“this”关键字](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)

# java - Heroku（US-ASCII）上的默认字符集导致问题

> ID：16106076
> 
> 赞同：3
> 
> 时间：2013-04-19T13:43:19.253
> 
> 标签：java, heroku, utf-8, character-encoding, base64

我们在 heroku 上部署了一个基于 maven--jetty 的 Java 应用程序。

在本地，当我这样做时：

```
System.out.println("Default Charset = "+ Charset.defaultCharset());
String s = "Resumé of Schrödinger";
System.out.println("s = "+ s);` 
```

我看到（*如预期*）：

```
Default Charset = UTF-8
s = Resumé of Schrödinger 
```

但是，当我将应用程序推送到 heroku 并检查日志时，我看到：

```
Default Charset = US-ASCII
s = Resum?? of Schr??dinger 
```

实际上，因此我面临更多问题，因为我们必须解码具有 UTF-8 编码字符的 Base-64 编码文本。

我什至尝试了以下没有用的方法：

```
SAXBuilder builder = new SAXBuilder();
InputStream iStream = new ByteArrayInputStream(xmlAsString.getBytes("UTF-8"));
Reader reader = new InputStreamReader(iStream, "UTF-8");
InputSource is = new InputSource(reader);
is.setEncoding("UTF-8"); 
```

后来，当我做的时候，`org.apache.commons.codec.binary.Base64.decodeBase64(byte [])`我什至在做`stringObject.getBytes("UTF-8")`

但是，我仍然看不到 e-acute(é)、umlaut(ö) 等字符。

有没有办法在 Heroku 上解决这个问题？

pom.xml中的jdk版本是1.6

这是 OpenJDK 1.7 和 Heroku 下的虚拟机的怪癖吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T05:35:57.877

最后，我与 Heroku 友好的工作人员取得了联系——他们提出了以下建议，通过env 变量覆盖`file.encoding`属性。`JAVA_OPTS`

从我的 Heroku Toolbelt 发布了以下内容，现在开始工作了。

```
heroku config:add JAVA_OPTS='-Xmx384m -Xss512k -XX:+UseCompressedOops -Dfile.encoding=UTF-8' 
```

这样，JVM 将其拾取， & 现在`Charset.defaultCharset( )`返回`UTF-8`，并显示应有的特殊字符！

他们还说，我们也可以选择执行以下操作：

```
heroku config:add JAVA_TOOL_OPTIONS='-Dfile.encoding=UTF-8' 
```

此外，最好将此属性嵌入到应用程序的[**Procfile**](https://devcenter.heroku.com/articles/procfile)中，这样当我们将代码推送到新的 Heroku 应用程序时，它的行为相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:05:43.670

设置`file.encoding`系统变量。Open jdk 使用它来获取默认字符集。

# css - 在保持图像比例的同时将图像大小调整为固定高度和宽度的最佳方法是什么？

> ID：16106084
> 
> 赞同：0
> 
> 时间：2013-04-19T13:43:45.367
> 
> 标签：css, image-processing, gd

在[我的初创公司网站上](http://trekeffect.com/home)，您会在特色目的地部分注意到我的目的地图像具有使用 CSS 设置的固定高度和宽度。问题是我的图像无法保持它们的比例，但我希望它们具有这种尺寸并且我希望它们看起来不错。

我应该如何解决这个问题？我是否应该确保上传的所有图像都以必要的比例裁剪？如果是这样，我可以使用 PHP 自动执行此操作，而不必手动执行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:46:28.497

您可以使用 ImageMagick。PHP中有一个ImageMagick类，你可以

1.  缩放/重新调整图像大小以适应较小的尺寸
2.  裁剪另一个。

命令行实用程序可以很好地为您做到这一点，请参见[此处](http://www.imagemagick.org/Usage/resize/)

尽管您可能正在寻找图像重新定位算法，例如[缝线雕刻](http://en.wikipedia.org/wiki/Seam_carving)。不知道PHP中是否有可用的实现，但是Java

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:57:51.350

如果将图像放在 img 标签中，请尝试将 size 属性（宽度或高度）之一设置为 100%。

如果您将图像设置为 div 的背景，您还可以使用 'background-size' css 属性指定其宽度和高度

# java - 无法在 Ubuntu 终端中执行 Java

> ID：16106086
> 
> 赞同：-1
> 
> 时间：2013-04-19T13:43:49.437
> 
> 标签：java, mysql, database, bash, ubuntu

我正在尝试连接到 MYSQL 数据库，并且我的程序**Sync_DB_RegCheck.java**在 Ecipe 中运行良好。但是我想在**Ubuntu 12.04 Terminal**中执行和运行相同的程序。但是在执行过程中出现错误。

```
Exception in thread "main" java.lang.NoClassDefFoundError: Sync_DB_RegCheck
Caused by: java.lang.ClassNotFoundException: Sync_DB_RegCheck
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: SYNC_APP.bin.Sync_DB_RegCheck. Program will exit. 
```

我的 Java 程序**Sync_DB_RegCheck.java**

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import com.mysql.jdbc.Statement;

public class Sync_DB_RegCheck {

    public static void main(String [] args) throws Exception {

         Connection conn = null;
         Class.forName("com.mysql.jdbc.Driver"); 
         conn = DriverManager.getConnection( "jdbc:mysql://localhost/test?user=root&password=root");
        System.out.println("Connected?");
        try{
              Statement st = (com.mysql.jdbc.Statement) conn.createStatement();
              st.executeUpdate("DROP TABLE del");
              System.out.println ("Table Deletion process is completly successfully!");
              }

        catch(SQLException s){
              System.out.println("Table is not exists!");
              }

}} 
```

编译代码：这是编译程序没有错误

```
$java -cp mysql-connector-java-5.1.24-bin.jar Sync_DB_RegCheck.java 
```

执行代码：它给出了上述错误

```
java -cp mysql-connector-java-5.1.24-bin.jar Sync_DB_RegCheck 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:46:48.413

您的`java`命令包含一个`-cp`选项，它指定类路径：JVM 将查找要使用的类的位置。

This classpath contains the MySQL driver, which is good. But it does not contain the current directory (indicated by `.`), where your `Sync_DB_RegCheck.class` file resides. So you need to add that one too:

```
java -cp .:mysql-connector-java-5.1.24-bin.jar Sync_DB_RegCheck 
```

# core-data - ALL Foo == NO 的核心数据关系实体的谓词

> ID：16106087
> 
> 赞同：1
> 
> 时间：2013-04-19T13:43:51.973
> 
> 标签：core-data, nspredicate

我想知道如何获得与 BOOL 值匹配的所有关系对象。

使用 ANY 创建谓词可以正常工作：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY journeyPart.lastPart == NO"]; 
```

但是，如果我尝试这样做，我只会崩溃：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ALL journeyPart.lastPart == NO"]; 
```

谢谢

卡尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:30:27.320

我可以重现这个问题，对我来说它看起来像是一个核心数据错误。作为一种解决方法，您可以更换

```
[NSPredicate predicateWithFormat:@"ALL journeyPart.lastPart == NO"] 
```

由等价

```
[NSPredicate predicateWithFormat:@"SUBQUERY(journeyPart, $x, $x.lastPart != NO).@count = 0"] 
```

在我的测试应用程序中正常工作。

# drop-down-menu - 在 AngularJS 中创建溢出导航栏菜单

> ID：16106089
> 
> 赞同：0
> 
> 时间：2013-04-19T13:43:58.013
> 
> 标签：drop-down-menu, angularjs, uinavigationbar

我正在尝试在 AngularJS 中实现水平导航栏溢出菜单，例如[http://www.outlook.com](http://www.outlook.com) 或这个 jquery 示例[http://jebaird.com/blog/overflow-menu-jquery-ui-widget](http://jebaird.com/blog/overflow-menu-jquery-ui-widget)。

即当屏幕水平调整大小时，不适合屏幕的菜单项将被推入最后一个菜单项（例如名为“...”的菜单项）。当水平空间很小时，用户仍然可以使用所有菜单项。

如何获取溢出的项目以及如何将它们移动到最后一个菜单项？

# php - 使用PHP替换文件中的现有列

> ID：16106091
> 
> 赞同：0
> 
> 时间：2013-04-19T13:44:03.987
> 
> 标签：php, html, passwords, submit

我有一个脚本，我想通过使用 html/php 网站来修改它。

我想用通过 HTML/PHP 站点输入的新变量替换从脚本文件中获得的输入。如果有人可以通过输入正确的密码来给我一个例子，那就更好了，但目前实际上并不是必须的。

更加具体。我想替换输入框中表示的特定行和特定列。这些框将始终包含最后已知的配置。如果我输入新值并保存它们，这些将覆盖框所代表的同一行和列中的最后一个值。

欢迎任何帮助。

```
<html>
    <head>
    <title>Rate Limiter</title>
    </head>
    <body>

    <h2>Change configurations:</h2>

    <form>
    <?php$arscript = file ("C:\dat300backups\script.txt");?>
    IP Subnet: <input type="text" name="ipsubnet" value="<?php echo substr($arscript[13],9,15); ?>"><br>
    IP From: <input type="text" name="ipfrom" value="<?php echo substr($arscript[14],7,3); ?>"><br>
    IP To: <input type="text" name="ipto"  value="<?php echo substr($arscript[15],5,3); ?>"><br>
    WAN: <input type="text" name="wan" value="<?php echo substr($arscript[16],4,4); ?>"><br>
    LAN: <input type="text" name="lan" value="<?php echo substr($arscript[19],4,4); ?>"><br>
    Traffic Control Path: <input type="tcpath" name="tcpath" value="<?php echo substr($arscript[17],3,13); ?>"><br>
    ByteLimit: <input type="text" name="bytelimit" value="<?php echo substr($arscript[18],10,5); ?>"><br>
    Download Rate: <input type="text" name="drate" value="<?php echo substr($arscript[20],6,8); ?>"> kbit/s<br>
    Upload Rate: <input type="text" name="urate" value="<?php echo substr($arscript[21],6,8); ?>"> kbit/s<br>

    <name="input" action="html_form_action.php" method="get">
    Password: <input type="password" name="pwd"><br>
    <input type="submit" value="Submit">

    </form>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:55:07.053

使用 fseek 函数 [http://cz.php.net/manual/en/function.fseek.php](http://cz.php.net/manual/en/function.fseek.php)，您可以找到所需的位置，然后写入文件，如下所示

```
<?php
  $file = fopen($filename, "c");
  fseek($file, -3, SEEK_END);
  fwrite($file, "whatever you want to write");
  fclose($file);
?> 
```

# python - 如何在 Python 中使用单个变量而不是传递多个参数

> ID：16106099
> 
> 赞同：5
> 
> 时间：2013-04-19T13:44:36.030
> 
> 标签：python

例如，如果我有一个需要多个输入的方法，如下所示：

```
def SumOf(Arg1,Arg2,Arg3):
    Sum = Arg1+Arg2+Arg3
    return sum 
```

我在列表中有 Arg1、Arg2、Arg3 的值，我想访问该方法

```
Arguments = Arg1 + "," +  Arg2 + "," + Arg 3 
```

我想使用变量 Arguments 来调用方法 SumOf

`SumOf(Arguments)`

但我收到以下错误：

```
SumOf() takes exactly 3 arguments (1 given) 
```

注意：上面只是一个例子，我需要这个来根据方法名称和参数执行不同的方法。

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T13:53:20.767

```
Arguments = 1, 2, 3
SumOf(*Arguments) 
```

(*) 运算符将参数解包到多个参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T14:04:08.693

看起来你的代码有很多问题。线...

```
Arguments = Arg1 + "," +  Arg2 + "," + Arg3 
```

...建议`Arg1`,`Arg2`和`Arg3`是字符串，您试图将其连接成一个以逗号分隔的字符串。

为了使`SumOf`函数工作，它需要传递整数值，所以如果`Arg1`和是字符串，您需要先使用函数将它们转换为整数，`Arg2`然后将它们打包成一个元组，类似于.. .`Arg3``int()`

```
Arguments = (int(Arg1), int(Arg2), int(Arg3)) 
```

...此时您可以使用...调用该函数

```
SumOf(*Arguments) 
```

...或者...

```
apply(SumOf, Arguments) 
```

此外，您需要更改线路...

```
return sum 
```

...到...

```
return Sum 
```

...否则您最终将返回对 Python 内置`sum()`函数的引用。

# html - 跳过 ajax 请求的 servlet 过滤器

> ID：16106107
> 
> 赞同：3
> 
> 时间：2013-04-19T13:44:55.797
> 
> 标签：html, ajax, servlets, servlet-filters

如何`doFilter`仅针对 Ajax 请求跳过执行？

截至目前，我正在传递名为`isAjax`. 有没有“标准”的方式来做到这一点？

在这种情况下，如何在过滤器中停止执行？添加`return`语句会是一种正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:48:34.997

大多数浏览器在发送 AJAX 请求时都会添加一个特殊的请求头。您可以使用此代码段轻松检查：

```
public static boolean isAjaxRequest(HttpServletRequest request) {
    return "XMLHttpRequest".equals(request.getHeader("X-Requested-With"));
} 
```

但是请注意，这不是完美的保证，因为此标头以 开头`X-`，它不是标准标头，浏览器/客户端代码可能决定不发送它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:50:14.207

您的过滤器在 web.xml 文件中声明，并且声明类似于：

```
<filter-mapping>
    <filter-name>NonAjaxServiceFiler</filter-name>
    <url-pattern>/non-ajax/*</url-pattern>
</filter-mapping> 
```

因此，每个与“非 ajax”不匹配的查询都将被绕过

# jquery - Angular：加载加载了单击元素数据的引导模式

> ID：16106109
> 
> 赞同：0
> 
> 时间：2013-04-19T13:45:08.230
> 
> 标签：jquery, twitter-bootstrap, angularjs, scope, bootstrap-modal

我有一个从服务中显示的项目列表，我使用 ng-repeat 来显示我的数据。对于这些项目中的任何一个，我希望能够打开一个引导模式，其中填充了所单击项目的数据（在该项目的范围内）。

```
myApp.directive('openmodal', function(){
    return {
        link: function(scope, element, attrs){
            element.on('click', function(){ 
                $(element.attr('href')).modal();
            });
        }
    }
}); 
```

我的代码的 jsfiddle.net 在这里[http://jsfiddle.net/echTw/2/](http://jsfiddle.net/echTw/2/)

目前我的引导模式将只显示来自我的 JSON 的第一个对象的数据。如何在单击的元素范围内运行引导模式并加载数据（Angular 是否有类似 this.$ 的东西）？

**编辑**

不，我没有使用角带。我尝试使用指令并按照建议隔离范围，但灯箱仍将仅显示来自第一个元素的数据（不知道为什么）。

所以我更新了我的代码以使用 ng-click，一个控制器，并且还在模态中添加了动态 ID 来解决这个问题：

**HTML**

```
<a ng-click="show(task.id)">Show lightbox</a> 
```

**角**

```
function TaskController($scope, Data){
    $scope.data = Data;

    $scope.show = function(e){
        $('#myModal_'+e).modal();
        console.log('#myModal_'+e);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:19:55.373

好的，所以我认为这里缺少一些步骤。您的 Jsfiddle 根本不起作用，因此很难真正理解您的问题是什么。因此，我将解决我认为您缺少的所有问题。

首先，你在使用[angular-strap](http://mgcrea.github.io/angular-strap/)吗？它为 Bootstrap 组件定义了大多数指令，并与“Angular Way”更好地集成。

然后，您可以使用范围来例如通过将元素的 id 传递给它来选择要显示的正确项目，而不是使用 href （以角度来说，可以使用[$routeProvider进行管理）](http://docs.angularjs.org/api/ng.%24routeProvider)

```
<a href="#myModal" class="btn" openmodal>Open modal</a> 
```

可以变成类似的东西

```
 <a ng-click="show(item.id)">Show this item</a> 
```

`show`控制器中定义的函数在哪里触发模态并选择要显示的正确项目。

然后，如果您想将其用作指令，则可以在指令中注入此元素并显示它。你可能需要

```
return {
    scope: true, // Isolated scope -> not shared between all components
    link: function(scope, element, attrs){ 
       // ...
    },
}; 
```

尝试类似的事情，如果您有任何问题，请不要犹豫！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-19T06:41:34.457

你可以试试这个最简单的工作代码

HTML 代码：

```
<button type='button' class='btn btn-primary btn-sm btnmargin' 
        data-toggle='modal' data-target='#cInfo' data-ng-click='moreinfo(customer)'>more info
</button> 
```

内部控制器代码将是：

```
$scope.customerinfo=[];
$scope.moreinfo= function(customer){
  $scope.customerinfo= customer;
}; 
```

HTML引导模型代码：

```
<!-- Modal start -->
<div class='modal fade' id='cinfo' tabindex='-1' role='dialog' 
     aria-labelledby='myModalLabel' aria-hidden='true'>
  <div class='modal-dialog modal-lg' role='document'>
    <div class='modal-content'>
      <div class='modal-header'>
        <button type='button' class='close' data-dismiss='modal'>
          <span aria-hidden='true'>&times;</span>
          <span class='sr-only'>Close</span></button>
        <h4 class='modal-title text-danger' 
            id='myModalLabel'>customer info</h4>
      </div>
      <div class='modal-body'>
        {{customerinfo.firstName}}
      </div>
      <div class='modal-footer'>
        <button type='button' class='btn btn-default' 
                data-dismiss='modal'>close</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal end --> 
```

# node.js - 如果使用 openSync 打开文件，如何在 node.js 中获取文件描述符

> ID：16106111
> 
> 赞同：6
> 
> 时间：2013-04-19T13:45:14.157
> 
> 标签：node.js, file-io, asynchronous, synchronous

我注意到对于 openSync 来说可能是一个大问题，即当您使用 openSync 打开文件时，您不会获得文件描述符。如果您使用异步调用打开，则只能将其作为回调的参数。问题是您必须拥有文件描述符才能关闭文件！程序员可能还想对需要文件描述符的文件执行其他操作。

如果您使用同步调用打开，则 node.js 的 fs API 中似乎有一个重大遗漏，即不提供一种方法来访问在异步模式下打开时回调返回的 fd 变量。这实质上会使同步打开对大多数应用程序不可用。

如果可以避免的话，我真的不想在以后的开发中使用异步文件打开和关闭，有没有办法获得使用同步打开时需要成功关闭文件的 fd 变量？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T14:16:11.377

除了文件描述符之外，您还能从 openFileSync 获得什么？

```
var fs = require('fs')
var path = require('path')
var fd = fs.openSync(path.join(process.cwd(), 'log.txt'), 'a')
fs.writeSync(fd, 'contents to append')
setTimeout(function () {
  console.log('closing file now')
  fs.closeSync(fd)
}, 10000) 
```

在上面的节点脚本运行`lsof /path/to/log.txt`时运行并`lsof /path/to/log.txt`在脚本完成后再次运行表明文件正在正确关闭

那就是说你想通过打开文件来完成什么？也许有更好的方法，例如针对您的特定情况进行流式传输

# python - 如何设置 python 异常消息以使用我的母语？

> ID：16106114
> 
> 赞同：6
> 
> 时间：2013-04-19T13:45:22.123
> 
> 标签：python, localization

我正在一个将被巴西人使用的python库中工作，这里的官方语言是葡萄牙语！基本上，我想用葡萄牙语获取异常消息，例如：

而不是得到...

```
>>> float('A')
ValueError: could not convert string to float: A 
```

我想得到这个...

```
>>> float('A')
ValueError: não é possível converter a string para um float: A 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:14:00.900

CPython 实现不*提供*任何本地化错误消息的自动方法。因此，您应该用葡萄牙语重写所有 python 的错误消息，并添加大量`try...except`块或替换[`sys.excepthook`](http://docs.python.org/2/library/sys.html#sys.excepthook)以处理异常。

如果您打算这样做，我会考虑使用该`gettext`模块进行本地化。

其他 python 实现*确实*有本地化的错误消息（如 IronPython）。

在我看来，你想做的*不是*一个好习惯。这些巴西开发人员无论如何都必须懂一点英语，如果他们想查看一些 python/库的文档（可能不是全部翻译成葡萄牙语）。

此外，如果您将错误消息本地化，在网络上搜索它们会变得更加困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:09:04.190

python 的默认语言是英语，总是鼓励使用它（根据 PEP 8）。

因此，据我所知，他们不支持/鼓励使用这样的不同语言，因此您可能必须自己更改所有内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-27T23:17:02.060

Python（实际上是 CPython）目前没有国际化的错误消息。2012 年， [Mariano Reingart](https://github.com/reingart/cpython)在名为“ *Traceback Internationalization Proposal ”的*[错误报告 #16344](https://bugs.python.org/issue16344)中提出了要求。经过大量讨论，他们同意这个[PEP 草案](https://wiki.python.org.ar/tracebackinternationalizationproposal/)必须在进一步讨论之前推进，所以这个漏洞在 2015 年被关闭。

 *也许你可以跳到这个错误报告或 Python 开发邮件列表并发表你的意见以引起对该主题的兴趣，也可以联系 Reingart 并询问有关此问题的当前状态。*

# vim - Vim 的 (MVIM) 本地领导者，BackSlash 只有哔哔声

> ID：16106121
> 
> 赞同：0
> 
> 时间：2013-04-19T13:45:35.317
> 
> 标签：vim, macvim

我是 VIM 新手，使用 MacVim，我正在尝试使用反斜杠作为本地领导者。似乎这是默认设置。如果我做：

```
:let maplocalleader = "\\" 
```

当我尝试使用本地领导密钥时，我只是听到哔声`\`

如果我做

```
:let maplocalleader = "-" 
```

然后它工作得很好。每次我尝试使用反斜杠键时，如何让 vim 停止对我发出哔哔声？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:19:03.470

`\\\`绝对是逃避反斜杠的错误方法。在*双*引号内应写为`"\\"`，在*单*引号内应写为`'\'`。`"\\\"`是一个未完成的字符串`'\"'`（第三个反斜杠转义双引号），因此它会在`:let`命令后显示错误。

哔声源不同：`\`key 本身是无操作的，不像`-`. 如果您有映射到`-a`并键入，`-`那么光标将移动到上一行：这是一个有效的操作。如果您有映射`\a`（或根本没有映射）并键入`\`，您将看到哔声，因为`\`这不是有效的操作。只有像这样的映射`\a`是有效的，因此它们不会发出哔哔声。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:51:50.190

您需要将该命令放入您的 vimrc 中。领导者和本地领导者命令不影响已经被 vim 解析的命令。

# language-agnostic - 求解球与矩形的交集

> ID：16106125
> 
> 赞同：0
> 
> 时间：2013-04-19T13:45:53.843
> 
> 标签：language-agnostic, physics

我有一个球和一个矩形。球可以移动，矩形是固定的（质量=无限）。

球有一个位置、一个速度、一个半径、一个质量。

矩形具有位置、宽度和高度。

我已经有在碰撞时检测碰撞并计算正确响应的函数，但是在计算正确响应之前解决交叉点有问题。在图像中：

[http://i.stack.imgur.com/Xq5Vk.png](http://i.stack.imgur.com/Xq5Vk.png)

我使用Java。

**编辑：通过使用此算法解决：**

1.  计算矩形边界和球之间的最近点（我称之为 P）（用 Clamp 函数很容易做到）
2.  计算连接球中心点（我称其为 C）和 P 的向量（我称其为 n）（向量的分量为 (Px - Cx, Py - Cy)）
3.  计算交叉点的“长度”（我称之为偏移量）（ball.radius - n.length）
4.  归一化 n 并乘以偏移量。
5.  将 n 减去球位置向量。

在 Java 代码中：

```
 private void resolveIntersectionWith(Ball ball){
        double closestX = clamp(ball.position.x, left(), right());
        double closestY = clamp(ball.position.y, top(), bottom());

        Vector n = new Vector(closestX - ball.position.x, closestY - ball.position.y);
        double offset = ball.radius - n.length;
        n.normalize().multiply(offset);
        ball.position.subtract(n);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:19:09.747

问题可能是由您如何检测碰撞引起的。我假设您检查球是否在矩形的边界内或边界内。在这种情况下，您已经将位置更新为矩形内。但是，如果您在将速度添加到其位置 ( ) 后检查是否会发生碰撞`x += v * dt`，您将能够确定碰撞的确切时间，这意味着球将在新的迭代中移动此迭代的剩余时间方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:05:06.330

为了避免这些交叉点，您应该将球移离rektangle，直到它不再被击中。

一个简单的方法是计算距离球中心 P 最近的 rektangle 中的点 Q。然后将球从该点移开

```
P=P+(P-Q)*(r/abs(P-Q)-1) 
```

其中 r 是半径。或者，您可以使用更小的时间步长来避免交叉

编辑：Missclick

# ajax - Symfony 2 - 删除表单和 CSRF 令牌

> ID：16106127
> 
> 赞同：8
> 
> 时间：2013-04-19T13:45:56.103
> 
> 标签：ajax, symfony, twig, csrf

我有一个来自数据库的条目列表。我想在每一行的末尾都有一个“删除按钮”，这样用户就不必先去编辑/显示页面来删除条目。

我尝试使用 csrf 令牌创建一个隐藏的输入字段，如下所示：

```
return $this->createFormBuilder()
   ->getForm()
; 
```

这将输出：

```
<div id="form">
   <input type="hidden" id="form__token" name="form[_token]" value="6c98ebfa9df07.....">
</div> 
```

我将表单的其余部分放在 twig 模板中，以便每个表单根据条目的 id 都有自己的操作路径。

不幸的是，在树枝模板中只有第一个

```
{{ form_widget(delete_form) }} 
```

将被渲染。

我怎样才能更频繁地使用这个隐藏字段？或者有没有办法以不同的方式做这件事？

谢谢你的帮助

```
public function indexAction()
    {
        $em = $this->getDoctrine()->getManager();

        $deleteForm = $this->createDeleteForms();

        $entities = $em->getRepository('IntranetServicesBundle:Laender')->findAll();

        return $this->render('IntranetServicesBundle:Laender:index.html.twig', array(
            'entities' => $entities,
            'delete_form' => $deleteForm->createView(),
        ));
    }

private function createDeleteForms()
{
    return $this->createFormBuilder()
        ->add('id', 'hidden')
        ->getForm()
    ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:22:27.303

您可以使用以下方式渲染单个令牌：

```
{{ form_widget(form._token) }} 
```

或专门针对您的情况：

```
{{ form_widget(delete_form._token) }} 
```

但是，我认为您最好制作一系列表格并完全渲染每个表格：

在您的控制器中：

```
public function indexAction()
    {
        $em = $this->getDoctrine()->getManager();
        $rep= $em->getRepository('IntranetServicesBundle:Laender')
                ->createQueryBuilder('l');

        var_dump($rep->getQuery()->getDql());
        $entities=$rep->getQuery()->getResult();

        $delete_forms  = array_map(
            function($element){ 
                return $this->createDeleteForm($element->getId());}
            ,$entities->toArray()
            );

        return $this->render('IntranetServicesBundle:Laender:index.html.twig'
                           , array(
                                 'entities'        => $entities,
                                 'delete_forms'    => $delete_forms
                           ));
    }

private function createDeleteForms($id)
{
    return $this->createFormBuilder(array('id' => $id)))
        ->add('id', 'hidden')
        ->getForm()
    ;
}

public function deleteAction(Request $request, $id)
{
    $form = $this->createDeleteForm($id);
    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('IntranetServicesBundle:Laender')
                     ->find($id);
        // this line might need to be changed to point to the proper repository

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Laender entity.');
        }

        $em->remove($entity);
        $em->flush();
    }

    return $this->redirect($this->generateUrl('laender_index'));
    // this line might need to be changed to point to the proper 
    // post-delete route
} 
```

在你的树枝上做一些类似的事情：

```
{% for form in delete_forms %}{{form_widget(form)}}{% endfor %} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-02T21:28:49.730

@Lighthart 的回答让我得到了正确的答案：

在您的控制器中生成一组表单视图并将其交给视图：

```
public function indexAction()
{
    $em = $this->getDoctrine()->getManager();

    $entities = $em->getRepository('AppBundle:Entity')->findAll();

    $delete_forms = array_map(
        function ($element) {
            return $this->createDeleteForm($element->getId())->createView();
        }
        , $entities
    );

    return $this->render('AppBundle:Entity:index.html.twig', array(
        'entities' => $entities,
        'delete_forms' => $delete_forms
    ));
} 
```

现在您必须在您的视图中访问它。因此，您可以使用表单函数和特殊的循环变量：

```
{% extends '::base.html.twig' %}

{% block body %}
    {% for entity in entities %}
        {# Access the delete form for this entity using the loop index ... #}
        {% set delete_form = delete_forms[loop.index0] %}

        {# ... and display the form using the form tags. #}
        {{ form_start(delete_form) }}
            <input type="submit" value="Delete" />
        {{ form_end(delete_form) }}
    {% endfor %}
{% endblock %} 
```

而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-25T01:57:18.837

我遇到了类似的情况，我想在使用 csrf 保护时删除产品。我还想使用**ajax**来发出 DELETE 请求。

### 针对 Symfony 3.x 测试

所以，要做到这一点，这就是我的**视图***index.html*的样子：

```
// html for displaying a products table with delete btn for each row
// ...
// Retrieve csrf token and store it somewhere in DOM (preferably outside table), 
// We do this so that we can send the token via ajax later
<span id="csrf_token" data-token="{{ csrf_token('form') }}"></span> 
<script>
// Make an ajax request on the on-click handler of our delete btn
$.ajax({
    url: localhost/admin/product/4545,   // generated dynamically, the last segment being the ID of the item to be deleted.
    type: 'POST',
    data: {
        "_method": "DELETE",
        "form[_token]": $("#csrf_token").data("token")   // passed csrf token here
    },
    success: function(result) {
        // Do something with the result
   }
});
</script> 
```

如上所示，**`{{ csrf_token('form') }}`**实际上是在 twig 中为您提供**csrf 令牌。**

我的**控制器**：

```
/**
 * Deletes a product entity.
 * @Route("/{id}", name="admin_product_delete")
 * @Method("DELETE")
 */
public function deleteAction(Request $request, product $product)
    {
        $form = $this->createDeleteForm($product);
        $form->handleRequest($request);
        if ($form->isSubmitted() && $form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $em->remove($product);
            $em->flush($product);
            // you can return a json response here to your ajax callback if you'd like.
            return new JsonResponse(array('status' => 'deleted'));
        }
    // return new JsonResponse(array('status' => 'failed'));
}

/**
 * Creates a form to delete a product entity.
 * @param product $product The product entity
 * @return \Symfony\Component\Form\Form The form
 */
private function createDeleteForm(product $product)
{
    return $this->createFormBuilder()
        ->setAction($this->generateUrl('admin/product/{id}', array('id' => $product->getId())))
        ->setMethod('DELETE')
        ->getForm()
    ;
} 
```

这应该按预期删除所需的行！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-03T11:07:46.627

@Phidelux 的回答使我得到了以下解决方案：

在树枝中，我创建了删除表单：

```
<form method="post" action="{{ path('page_delete', {'id': page.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
    <input type="hidden" name="_method" value="DELETE">
    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ page.id) }}">
    <button type="submit" class="btn btn-icon">
        <i class="far fa-trash-alt"></i>
    </button>
</form> 
```

创建列表视图的代码是：

```
/**
     * @Route("/", name="page-list", methods={"GET"})
     */
    public function index(PageRepository $pageRepository): Response
    {
        $pages = $pageRepository->findAll();
        $delete_forms = array_map(
            function ($element) {
                return $this->render('admin/page/_delete_form.html.twig', [
                    'page' => $element,
                ]);

            }
            , $pages
        );
        return $this->render('admin/page/index.html.twig', [
            'pages' => $pages,
            'delete_forms' => $delete_forms
        ]);
    } 
```

然后在我的列表视图中，我添加了删除按钮：

```
{% for key, page in pages %}
...
    {{ delete_forms[key].content | raw }}
{% endfor %} 
```

在我的编辑页面表单中，我可以使用：

```
{{ include('admin/sjabloon/_delete_form.html.twig') }} 
```

这解决了删除时不允许消息的方法

# wpf - 在 XAML 中执行命令时将命令放入撤消/重做堆栈的位置？

> ID：16106133
> 
> 赞同：0
> 
> 时间：2013-04-19T13:46:06.297
> 
> 标签：wpf, xaml, mvvm, undo-redo

我正在使用命令模式，以及每个命令的撤消操作。我的视图通过视图模型绑定到命令。

示例代码：

XAML：

```
<Button Command="{Binding MyCommand}"> 
```

视图模型：

```
public class ViewModel : UndoRedoClass
{
    public ViewModel()
    {
        MyCommand = new MyCommand(this);
    }

    public ICommand {get;private set;}
} 
```

UndoRedo类

```
public class UndoRedoClass
{
    private Stack<IUndoCommand> undoCommands;

    //...

    ExecuteCommand(IUndoCommand cmd)
    {
        undoCommands.push(cmd);
        cmd.Execute();
    }
} 
```

所以我通常可以调用命令，通过`ViewModel.ExecuteCommand(cmd)`这些命令正确地推送到我的撤消堆栈。如果我使用事件，这没问题，因为我可以在那里使用 ViewModel 的 ExecuteCommand 方法来执行更改。但是，如果我将命令作为属性提供，从视图中调用它们，它们当然不会被添加到堆栈中而只是被执行。

现在的问题是，我在哪里将执行的命令推送到撤消堆栈上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:05:56.420

为您派生一个新`ICommand`类型，在`UndoableCommand`内部处理撤消/重做并将依赖项注入您的撤消/重做服务。将这些 UndoableCommands 作为 VM 的属性。

# python - 连接 numpy 数组的字典（尽可能避免手动循环）

> ID：16106134
> 
> 赞同：0
> 
> 时间：2013-04-19T13:46:06.923
> 
> 标签：python, dictionary, numpy

我正在寻找一种方法来连接两个包含 numpy 数组的 python 字典中的值，同时避免手动遍历字典键。例如：

```
import numpy as np

# Create first dictionary
n = 5
s = np.random.randint(1,101,n)
r = np.random.rand(n)
d = {"r":r,"s":s}
print "d = ",d

# Create second dictionary
n = 2
s = np.random.randint(1,101,n)
r = np.random.rand(n)
t = np.array(["a","b"])
d2 = {"r":r,"s":s,"t":t}
print "d2 = ",d2

# Some operation to combine the two dictionaries...
d = SomeOperation(d,d2)

# Updated dictionary
print "d3 = ",d 
```

给出输出

```
>> d =  {'s': array([75, 25, 88, 54, 82]), 'r': array([ 0.1021227 ,  0.99454874, 0.38680718,  0.98720877,  0.8662894 ])}
>> d2 =  {'s': array([78, 92]), 'r': array([ 0.27610587,  0.57037473]), 't': array(['a', 'b'], dtype='|S1')}
>> d3 =  {'s': array([75, 25, 88, 54, 82, 78, 92]), 'r': array([ 0.1021227 ,  0.99454874, 0.38680718,  0.98720877,  0.8662894, 0.27610587,  0.57037473]), 't': array(['a', 'b'], dtype='|S1')} 
```

即，如果密钥已经存在，则存储在该密钥下的 numpy 数组被附加到。

有谁知道最好的方法来做到这一点，同时尽量减少使用缓慢的手动`for`循环？（我想避免循环，因为我想组合的字典可能有数百个键）。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T16:03:15.510

您可以为此使用熊猫：

```
from __future__ import print_function, division
import pandas as pd
import numpy as np

# Create first dictionary
n = 5
s = np.random.randint(1,101,n)
r = np.random.rand(n)
d = {"r":r,"s":s}
df = pd.DataFrame(d)
print(df)

# Create second dictionary
n = 2
s = np.random.randint(1,101,n)
r = np.random.rand(n)
t = np.array(["a","b"])
d2 = {"r":r,"s":s,"t":t}
df2 = pd.DataFrame(d2)
print(df2)

print(pd.concat([df, df2])) 
```

输出：

```
 r   s
0  0.551402  49
1  0.620870  34
2  0.535525  52
3  0.920922  13
4  0.708109  48
          r   s  t
0  0.231480  43  a
1  0.492576  10  b
          r   s    t
0  0.551402  49  NaN
1  0.620870  34  NaN
2  0.535525  52  NaN
3  0.920922  13  NaN
4  0.708109  48  NaN
0  0.231480  43    a
1  0.492576  10    b 
```

# hadoop - JPS 没有显示 hbase 或 hadoop？

> ID：16106135
> 
> 赞同：0
> 
> 时间：2013-04-19T13:46:07.143
> 
> 标签：hadoop, hbase, apache-whirr

我使用 Apache Whirr 在 ec2 上设置了一个 hbase/hadoop 集群，但是当我 ssh 进入 namenode（hbase master）并运行时`$JAVA_HOME/bin/jps`，我看到的只是 jps，没有提到 hbase 或 namenode。但是，它们正在运行，因为我能够与它们一起工作。对此有何解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:29:07.870

`jps`显示当前用户的 java 进程，有时只显示它可以解析给当前用户的会话（因此并不总是按预期工作）。

尝试一个`ps axww | grep java`代替，它应该列出正在运行的 java 可执行文件，并带有完整的命令行参数

# html - 如何防止元素跳到第二行？

> ID：16106137
> 
> 赞同：1
> 
> 时间：2013-04-19T13:46:15.143
> 
> 标签：html, css

请看一下这个例子：http: [//jsfiddle.net/yU6qG/5/](http://jsfiddle.net/yU6qG/5/)

```
<div class="left">LeftMargin</div>
<div class="right">RightMargin</div>

.left {
    float:left;
    width: 100px;
    height: 100%;
    background-color : red;
}
.right {
    float:left;
    width: auto;
    height: 300px;
    background-color : blue;

} 
```

如果你尝试调整窗口大小，你会看到右边的 div 会跳下一行。我怎样才能防止这种情况？另外，为什么 nto left 占据了 100% 的高度？

谢谢

Edit1：抱歉，不清楚，这是针对响应式设计的，正确的 div 会增长和缩小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:52:06.283

这是你想要的：http: [//jsfiddle.net/894Z8/3/](http://jsfiddle.net/894Z8/3/)

首先，`height:100%`你不需要做一些 CSS 技巧来实现它们，因为这个属性意味着 100% 的父级高度。

您想要的是将 div 显示为表格，您可以使用以下 CSS（与 IE 6 和 7 不兼容）

**标记**

```
<div class="table">
  <div class="left">LeftMargin</div>
  <div class="right">RightMargin</div>
</div> 
```

**CSS**

```
.table {
    display: table;
}
.left {
    display:table-cell;
    min-width: 100px;
    height: 100%;
    background-color : red;
}
.right {
    display: table-cell;
    width: auto;
    height: 300px;
    background-color : blue;

} 
```

div 和 class Table 是可选的，但为了更好的兼容性添加它。这样，您可以将 div 的高度扩展到另一个高度，并且在调整窗口大小时不会减小它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:00:38.933

[检查一下](http://jsfiddle.net/yU6qG/6/)正确的 div 总是覆盖可用空间，并且在屏幕调整大小时不会进入下一行

```
.left {
    float:left;
    width: 100px;
    height: 300px;
    background-color : red;
}
.right {
    display: block;
    height: 300px;
    background-color : blue;
    box-sizing: border-box;
    -moz-box-sizing: border-box; 
    width: 100%;
    min-width: 200px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:49:22.203

使用这种风格，你只需要在 % 中使用 all。（不是在 px 中）

```
.left {
    float:left;
    width: 25%;
    height: 100%;
    background-color : red;
}
.right {
    float:left;
    width: 50%;
    height: 125px;
    background-color : blue;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T13:49:31.300

更改右侧div上的css

```
.right {
    width: 200px;
    height: 300px;
    margin-left:100px;
    background-color : blue;
} 
```

要使正确的 div 响应，您需要应用一个百分比。根据自己的喜好填写。

```
.right {
    width: 60%;
    height: 300px;
    margin-left:100px;
    background-color : blue;
} 
```

小提琴：http: [//jsfiddle.net/djwave28/yU6qG/7/](http://jsfiddle.net/djwave28/yU6qG/7/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T13:50:25.060

你只需要在它周围放一个包装器；）

```
<div id="container">
<div class="left">LeftMargin</div>
<div class="right">RightMargin</div> 
```

你的 CSS 很简单：

```
#container {
    width: 300px;
} 
```

[http://jsfiddle.net/3zUcZ/](http://jsfiddle.net/3zUcZ/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T13:50:47.723

这就是 float 的作用：将其向左推，直到没有空间为止，然后将其放在下一行。

你可以改用这个：

```
<div class="parent">
    <div class="left">LeftMargin</div>
    <div class="right">RightMargin</div>
</div>

.left {
    display: inline-block;
    width: 100px;
    height: 100%;
    background-color : red;
}
.right {
    display: inline-block;
    width: 200px;
    height: 300px;
    background-color : blue;
}
.parent{
    width: 310px;
    border: 1px solid black;

} 
```

# ruby-on-rails - 检查 nil Nil:Class in liquid

> ID：16106145
> 
> 赞同：1
> 
> 时间：2013-04-19T13:46:37.970
> 
> 标签：ruby-on-rails, liquid

如何在 abc.liquid 模板中检查 nil Nil:class 。例如：

```
{% for item in cart.items %}
  {%  if cart.name.nil? %}
    <div>
      N.A.
   </div>
  {% endif %}
  <tr>
    <td align="left" id="product_name_{{ item.id }}"><a href="{{ item.product.url }}">{{ item.name }}</a></td>
    <td align="center"><input type="text" size="2" value="{{ item.quantity }}" name="item_quantity_{{ item.id }}" id="item_quantity_{{ item.id }}" /></td>
    <td align="right">{{ item.unit_price | money : store }}</td>
    <td align="right">{{ item.price | money : store }}</td>
    <td align="center"><input type="checkbox" value="true" name="item_check_{{ item.id }}" id="item_check_{{ item.id }}"></td>
  </tr>
{% endfor %} 
```

# php - cronjob 不能在实时服务器上运行，但可以使用 crontab 在 localhost 上运行

> ID：16106150
> 
> 赞同：0
> 
> 时间：2013-04-19T13:46:56.397
> 
> 标签：php, cron, localhost, crontab

我已经在我的 localhost crontab 中编写了这个命令

```
*/1 * * * * /usr/bin/wget -O /dev/null -q http://localhost/whitelabel/cms/cronjobs/calculatestats.php 
```

它在本地主机（ubuntu 12.04）上运行良好，但在我的实时服务器（Cent OS）上我添加了这个命令

```
*/1 * * * * /usr/bin/wget -O /dev/null -q http://liveserver.com/whitelabel/cms/cronjobs/calculatestats.php 
```

但它不工作。虽然如果我在浏览器中运行此服务器文件 URL，它可以工作，但我必须通过 cronjob 运行它。我还授予了访问此文件的权限，但它在 cronjob 中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:07:09.177

将以下行添加到`/etc/hosts`

```
127.0.0.1 liveserver.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:58:10.050

您是否有任何理由需要通过 Web 服务器运行它？对于 cron 作业，我会这样创建我的 PHP 文件：

```
#!/usr/local/bin/php -q
<?
// /usr/local/bin/php -q is path to your PHP CGI file - any host should have one of these
// code here
?> 
```

并运行它：

```
*/1 * * * * /path/to/file.php >/dev/null 
```

首先对文件执行 chmod 755，并确保以 ascii 模式上传

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:49:59.503

您是否尝试过运行： /usr/bin/wget -O /dev/null -q [http://liveserver.comwhitelabel/cms/cronjobs/calculatestats.php](http://liveserver.comwhitelabel/cms/cronjobs/calculatestats.php)

在控制台中？通常我发现当我尝试在不使用 cronjob 的情况下运行命令时会出现错误。

比较该命令在您的本地计算机上执行的操作与它在没有 chronjob 的服务器上执行的操作，看看您是否能找到答案:)

# ruby-on-rails - 使用redirect_to（：back）时如何刷新页面

> ID：16106152
> 
> 赞同：1
> 
> 时间：2013-04-19T13:47:09.477
> 
> 标签：ruby-on-rails

我有一个应用程序，其中包含诸如删除`redirect_to (:back)`到删除按钮所在页面的操作。每当它返回页面时，已删除的项目仍然会显示，就好像该项目仍然存在一样。有没有办法在返回页面时刷新页面以显示对象的更新状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:22:35.243

我在 application_controller 中添加了以下方法以防止索引页面缓存。

```
def set_cache_buster
    response.headers["Cache-Control"] = "no-cache, no-store, max-age=0, must-revalidate"
    response.headers["Pragma"] = "no-cache"
    response.headers["Expires"] = "Fri, 01 Jan 1990 00:00:00 GMT"
end 
```

将此过滤器添加到我想要控制的页面：

```
before_filter :set_cache_buster 
```

谢谢@Jason Butler。

[如何防止 Rails 中的浏览器页面缓存](https://stackoverflow.com/questions/711418/how-to-prevent-browser-page-caching-in-rails)

# php - mysqli查询不返回任何结果或错误php代码

> ID：16106157
> 
> 赞同：1
> 
> 时间：2013-04-19T13:47:21.103
> 
> 标签：php, mysqli

我有一个数据输入 php 代码。我允许用户选择要在单独页面上显示的表格以便于访问。我可以获得将所选表插入“maintable”表的代码，但我无法从该表中获取任何信息。即使在同一页面上我正在插入该数据库，插入表文件甚至都不会从中获取当前表名。所以我想如果我能解决这个问题，我也可以解决那个问题。maintable 表在我的其他数据库之一中只有一列和一条记录。我这样做是为了让用户无法直接访问它，因为他们可以看到不同数据库中的所有其他表。

data-entry-header.php 文件有我的连接语句，$connect 是我用于此数据库连接的语句。结果是我的 main-form.php 文件没有表名。所以它没有抛出任何错误，只是没有得到表名。我知道我的连接语句和表/列名称是正确的，因为我在插入语句中使用了相同的名称。

```
include 'data-entry-header.php';
    $keys = array();

    /* Query for Main Table Value */
    $string = 'SELECT TableName FROM maintable';
    $resultMain = mysqli_query($connect, $string) or die(mysqli_error($link));
    while ($rowMain = mysqli_fetch_row($resultMain)){
        $table = $rowMain[0];
    }

    /* Display Message or Table */
    if ($table = NULL || $table = "" ){
        echo 'No Main Table has been set. Go to the <a href="set-main-table.php">Set Main Table</a> page to select a Main Table.';
    }
    else {
        include 'main-form.php';
    }

    /* Get footer Contents */
    include "../footer.php"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:49:01.943

```
if ($table = NULL || $table = "" ){ 
```

您将分配`=`与比较混淆了`==`

您可能应该尝试：

```
if ($table == NULL || $table == "" ){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:16:18.533

您的代码还有许多其他错误。

*   取而代之的是`die()`，您必须使用更方便的`trigger_error();`方式，它不会向任何人透露敏感信息。
*   如果您只期望一个结果，那么循环没有意义
*   PHP 是一种松散类型的语言。不需要过多的条件。大多数情况下就`if($table)`足够了
*   使用有意义（且**一致**）的变量名也有很大帮助

    ```
    $sql = 'SELECT TableName FROM maintable';
    $res = mysqli_query($connect, $sql) or trigger_error(mysqli_error($connect));
    //                                            $connect, not $link ^
    $row = mysqli_fetch_row($res);

    /* Display Message or Table */
    if (!$row){
        echo 'No Main Table has been set. Go to the <a href="set-main-table.php">Set Main Table</a> page to select a Main Table.';
    } else {
        $table = $row[0];
        include 'main-form.php';
    } 
    ```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T13:58:42.023

而不是或死，只需在下面添加

`echo mysqli_error($link);`

另外，在您的查询中，不是`columnName FROM table`吗？

# javascript - 使用正则表达式删除前导零，但在 JavaScript 中保留减号

> ID：16106158
> 
> 赞同：1
> 
> 时间：2013-04-19T13:47:23.697
> 
> 标签：javascript, regex

有人知道如何用正则表达式删除前导零但敏锐的减号？

为正值做到这一点很容易

```
.replace(/^0+/,'') 
```

但我绝对不知道如何在负面情况下做到这一点，例如

从**-0.05**值变为**-.05**
从**-02.05**值变为**-2.05**

为了清楚起见，我创建了[jsFiddle 示例](http://jsfiddle.net/vs7xe/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-19T13:50:22.487

捕获负号并将其包含在替换中：

```
n_string.replace(/^(-?)0+/,'$1'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-14T03:05:57.240

以下也可以完成这项工作，此外，它将允许您在 0 之前有一个 0 。

```
n_string.replace(/^(-)?0+(?=\d)/,'$1'); 
```

# xaml - 如何将焦点设置在 MessageDialog 内的元素上

> ID：16106160
> 
> 赞同：0
> 
> 时间：2013-04-19T13:47:34.213
> 
> 标签：xaml, windows-runtime, devexpress

我正在构建一个 Windows 商店应用程序，我正在使用 DevExpress 工具来实现它。但我认为这个问题可能有一个通用的解决方案。当我打开对话框时，我想将焦点设置在文本框上，以便您可以立即开始输入。

我想知道我是否可以通过 XAML 设置默认字段，或者我是否只需通过代码来完成，如果我必须通过代码来完成，我该怎么做？

我没有太多要显示的代码，但是：

代码：

```
var dialog = _serviceContainer.GetService<IDXDialogService>("InputDialog");
dialog.Content = aModel;
var result = await dialog.ShowAsync();      
if (result == MessageDialogResult.OK)
{
//woho, check input
} 
```

XAML：

```
 <DataTemplate x:Key="InputDialogContentTemplate">
    <TextBox x:Name="InputTextBox"
             Text="{Binding Input,
                            Mode=TwoWay}" />
    </DataTemplate>

    <dc:DXDialogService Key="ScanInputDialog"
                        Buttons="OKCancel"
                        Title="Input Something"
                        ContentTemplate="{StaticResource InputDialogContentTemplate}"
                        DefaultDialogButton="Ok" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:26:08.640

我通过将数据模板内容放入用户控件来解决它。在用户控件中，我添加了一个 Loaded 事件并将焦点设置在那里的文本框上。奇迹般有效！

# asp.net - 在 VS 2012 上的 Windows Azure 中发布超时

> ID：16106163
> 
> 赞同：2
> 
> 时间：2013-04-19T13:47:39.573
> 
> 标签：asp.net, azure, visual-studio-2012

网站从 VS 2012 发布到 Windows Azure 引发错误

```
---------------------------
Microsoft Visual Studio Express 2012 for Web
---------------------------
Could not complete the request to remote agent URL 'https://waws-prod-hk1-001.publish.azurewebsites.windows.net/msdeploy.axd?site=approck'. The operation has timed out
---------------------------
OK   
--------------------------- 
```

我认为需要一些配置文件来更新`<servicePointManager expect100Continue="false" />`值。但不知道发布向导正在运行哪个 exe。有人遇到过这个问题吗？

# c# - 如何检测 WPF 窗口的第一次显示？

> ID：16106165
> 
> 赞同：8
> 
> 时间：2013-04-19T13:47:42.730
> 
> 标签：c#, .net, wpf, window

我想知道哪种是检测 WPF 窗口何时首次显示的正确方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T13:53:45.317

有一个名为的事件`Loaded`，您可以使用它来确定您的窗口何时准备就绪。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.loaded.aspx)

当元素布局、渲染并准备好交互时发生。

在 XAML 中设置处理程序

```
<StackPanel
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="SDKSample.FELoaded"
Loaded="OnLoad"
Name="root">
</StackPanel> 
```

添加代码隐藏

```
void OnLoad(object sender, RoutedEventArgs e)
{
    Button b1 = new Button();
    b1.Content = "New Button";
    root.Children.Add(b1);
    b1.Height = 25;
    b1.Width = 200;
    b1.HorizontalAlignment = HorizontalAlignment.Left;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-29T08:12:35.053

Loaded 可以被多次调用。

[Loaded 事件和 Initialized 事件](https://blogs.msdn.microsoft.com/mikehillberg/2006/09/19/the-loaded-event-and-the-initialized-event/)

根据我的测试和上面的链接，可以多次触发 Loaded 事件。
因此，您需要在 OnLoaded 处理程序中设置一个标志。

例如，如果 Stack Panel 在 TabItem 控件内，则每次进入选项卡时都会调用loaded。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T13:56:31.497

我建议制作一个 bool 标志并检查它，并在构造函数中将其设置为 true

```
bool FirstTime = true;

void OnLoad(object sender, RoutedEventArgs e)
{
     if (FirstTime)
     {
          FirstTime = false;
          //do your stuff first-time
     }
     else
     {
           //do your stuff for other
     }
} 
```

# c++ - 2000000以下的素数之和？

> ID：16106171
> 
> 赞同：2
> 
> 时间：2013-04-19T13:48:07.793
> 
> 标签：c++, sum, primes

200万以下的素数之和怎么求？Project Euler 第 10 个问题，[http](http://projecteuler.net/problem=10) ://projecteuler.net/problem=10 。我测试了我的代码低于 10 并且工作起来就像一个魅力。但是低于 200 万似乎不起作用：/ 已经大约 15 分钟了，而且还在继续，我认为应该不会花那么长时间，对吧？我会尝试 sum 函数，但我仍然不明白为什么这不起作用？

编辑：我想我不能使用 sum 函数，因为数字甚至没有存储在数组中：/

我的代码：

```
#include <iostream>

using namespace std;

int main()
{
    unsigned long long x,y,z=0,s[200000],a,sum=0;
    bool isprime;
    for(x=3;x<2000000;x++)
    {
        for(y=2;y<x;y++)
        {
            if(x%y!=0 && x!=y)
            {
                isprime =true;
            }
            else
            {
                isprime =false;
                break;
            }
        }
        if(isprime ==true)
        {
                s[z] = x;
                z++;
                isprime = false;
        }
    }
    cout<<z;
    for(a=0;a<z;a++)
    {
        sum=sum+s[a];
        cout<<"Sum is being calculated "<<sum<<"\n";
    }
    cout<<"The sum is "<<sum+2<<" LADIES";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:02:36.387

您的问题是您的程序将检查太多不必要的除数。

为了检查给定整数是否为素数，您需要检查它是否没有小于或等于其平方根的除数。因为，如果有一个大于平方根的除数，则商将是一个整数，并且会小于平方根。

```
#include <iostream>

using namespace std;

int main()
{
    unsigned long long x,y,z=0,s[200000],a,sum=0;
    bool isprime;
    for(x=3;x<2000000;x++)
    {
        for(y=2; y*y <= x ;y++)
        {
            if(x%y!=0 && x!=y)
            {
                isprime =true;
            }
            else
            {
                isprime =false;
                break;
            }
        }
        if(isprime ==true)
        {
                s[z] = x;
                z++;
                isprime = false;
        }
    }
    cout<<z;
    for(a=0;a<z;a++)
    {
        sum=sum+s[a];
        cout<<"Sum is being calculated "<<sum<<"\n";
    }
    cout<<"The sum is "<<sum+2<<" LADIES"; 
```

您可以改用向量：

```
#include <iostream>
#include <vector>
#include <algorithm>

int main()
{
    unsigned long long x,y;
    std::vector<unsigned long long> primes;
    bool isprime = true;

    for(x=3; x<2000000; x++)
    {
        isprime = true;
        for(y=2; y*y <= x ;y++)
        {
            if(x%y==0 || x==y)
            {
                isprime=false;
                break;
            }
        }
        if(isprime)
        {
            primes.push_back(x);
        }
    }
    unsigned long long sum = 2 + std::accumulate(v.begin(), v.end());
    cout<<"The sum is "<<sum<<" LADIES";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T17:44:04.660

如果您使用筛子，这既简单又快速：

```
function sumPrimes(n)
    sum := 0
    sieve := makeArray(2..n, True)
    for p from 2 to n step 1
        if sieve[p]
            sum := sum + p
            for i from p * p to n step p
                sieve[i] := False
    return sum 
```

应该只需要一两秒钟即可运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-14T05:07:04.603

当试图总结素数并包括'n'时，我想出了以下解决方案。我希望你觉得很容易理解：

```
function sumPrimes(num) {

  // determine if a number is prime
  function isPrime(n) {
    if (n === 2) return true;
    if (n === 3) return true;
    if (n % 2 === 0) return false;
    if (n % 3 === 0) return false;

    var  i = 5;
    var  w = 2;
    while (i * i <= n) {
        if (n % i === 0) {
            return false;
        }
        i += w;
        w = 6 - w;
    }
    return true;
  }

  // subtract 1 for 'not being prime' in my context
  var sum = isPrime(num) ? num - 1 : -1;

  for (var x = 0; x < num; x++) {
    if (isPrime(x) === true) {
      sum += x;
    }
  }

  return sum;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-19T12:34:13.627

使用千里马，我可以生成所有提高到幂的素数这是一个示例：

```
factor(product(i,i,2000000,2001000));
2^1005*3^499*5^255*7^169*11^101*13^83*17^61*19^54*23^46*29^36,,,,,2000939*2000941*2000953*2000959*2000963*2000969*2000989 
```

然后我尝试抽象出部首并将它们加在一起。我认为如果你有足够的耐心，它可能会起作用。会很久的！！！

# jquery - 在从另一个下拉列表中选择值时禁用一个下拉列表

> ID：16106172
> 
> 赞同：-3
> 
> 时间：2013-04-19T13:48:08.870
> 
> 标签：jquery

我已经完成了阅读类似帖子的作业（这就是我能做到这一点的方式）

所以，两个选择列表。在从第一个中选择某些值时，第二个选择列表应该禁用自身，（因为与所选值相关没有任何意义）

所以：我需要一个事件处理程序，它应该是“更改”，我需要一个函数，我需要在事件发生时调用该函数。儿子，当一个值等于任何值时（注意它恰好是俄语），那么它应该禁用第二个列表，正如我所说，但它没有发生。此外，可能有多个值会导致第二个选择列表变为非活动状态。

```
<script type="text/javascript">
disableSel();
$('#object').change(disableSel);

function disableSel()
{
    $(document).ready(function(){
       var object = $('#object').val();
        if(object === 'участок земли')
        {

            $("#term").attr("disabled", "disabled");
         }

    });
}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:50:53.827

```
$('#select1').change(function(){
 if($(this).val() == "your value")
    $("#select2").attr("disabled", "disabled");
}); 
```

或者

```
 $('#select1').change(function(){
 if($(this).val() == "your value")
    $("#select2").attr("disabled", true);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:50:57.453

你不需要 document.ready 在一个函数中..use`prop()`而不是`attr()`你有一个错字

```
 $(document).ready(function(){
    $('#object').change(disableSel); 
 });

 function disableSel()
 {
   var object = $('#object').val(); //here u missed c
    if(object === 'участок земли')
    {

        $("#term").prop("disabled", true);
     }
 } 
```

或仅使用更改事件

```
$(document).ready(function(){
    $('#object').change(function(){
        var object = $(this).val(); 
        if(object === 'участок земли')
       {

          $("#term").prop("disabled", true);
        }
    }); 
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:51:21.313

你可以尝试类似的东西

```
$(document).ready(function() {
    $('#object').change(function() {
        if (this.value == "your val") {
            $("#term").prop("disabled", true);
        }  
    });
}); 
```

# ios - 在 iOS 中获取分配的内存大小

> ID：16106174
> 
> 赞同：0
> 
> 时间：2013-04-19T13:48:13.323
> 
> 标签：ios

在 iOS 5 和/或 iOS 6 中是否有一种编程方式来获取分配内存的大小，无论是总数还是只是数据？

我遇到了内存问题，我想了解我正在做的一些并行图像处理对内存的影响。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:49:55.737

您可以为此目的使用[Instruments 。](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html)

Instruments 有一个名为的模板`Time Profile`，它允许您查找代码的哪些部分消耗的时间最多，您还可以跟踪在 go 中分配的内存。

如果您是第一次体验分析，这[是一个好的开始。](http://www.raywenderlich.com/23037/how-to-use-instruments-in-xcode)

# requirejs - 加载优化文件 requireJS

> ID：16106175
> 
> 赞同：1
> 
> 时间：2013-04-19T13:48:18.487
> 
> 标签：requirejs

我是 RequireJS 的新手，所以请耐心等待。我正在开发一个 JS 应用程序，使用 AMD 样式/require.js/backbone... 有两个版本：1\. 开发版本 2\. 在构建过程中使用 r.js 的优化版本

问题出在两个文件中： **ObjA.js**

```
define(function() {
var ObjA = {
    a: "A"
};
return ObjA; 
```

});

**对象B.js**

```
define(function() {
    var ObjB = {        
        "B": "B",
        "B.A": "B.A",
    };
    return ObjB;
}); 
```

问题是，在优化过程之后，我用这两个文件创建了一个新的“连接”文件，所以我完成了一个类似的文件：

优化文件.js

```
define(function() {
    var ObjA = {
        a: "A"
    };
    return ObjA;
});
define(function() {
    var ObjB = {        
        "B": "B",
        "B.A": "B.A",
    };
    return ObjB;
}); 
```

然后我尝试加载优化的文件，如：

```
if (true) {

require(["src/Objects/OptimizedFile"], function (data) {
        onload(data);
    });
} 
```

问题是只返回第一个对象，我猜是因为第一个“返回”。有没有办法使用 require.js 和文件的优化版本来获取这两个对象？或者我正在尝试做一些不可能的事情？我这样做是因为这个优化的文件仅由请求加载，只有在条件为真时才加载，这就是我不在构建过程中包含该文件的原因。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:55:16.610

您不能简单地将匿名模块文件连接在一起，因为它们没有与之关联的模块名称（因此无法被其他`require()`和`define()`调用正确解析）。

您将需要进行标准 RequireJS 构建 - [http://requirejs.org/docs/optimization.html](http://requirejs.org/docs/optimization.html)（它将根据模块的文件路径插入模块名称），或者将模块名称硬编码到您的模块中。但是硬编码模块名称不被认为是最佳实践。

# javascript - Hangman javascript-我的guess变量显然未定义，并且在我的guessLetter函数中产生错误

> ID：16106179
> 
> 赞同：0
> 
> 时间：2013-04-19T13:48:28.497
> 
> 标签：javascript, function, variables, substring

在我的猜测字母函数中，我在单词变量的子字符串和长度方法中遇到错误，因为它说它是未定义的，但它在这里明确定义

```
 var wordsArray = ["monitor", "program", "application", "keyboard", "javascript", "gaming", "network"];
var word;
var goesLeft;
var placeholder;
var input;
var wordLength;
var wordSubstring; 
```

为了解决这个问题，我尝试为 word.Substring 和 word.Length 创建变量并在函数中定义它们的值，但我仍然一无所获

这是猜测字母的功能

```
 function guessLetter()
{
  var correct = 0;

  var inputBox = document.getElementById("guessinput");
  input = inputBox.value;

  console.log(word);

  for (var count = 0; count < wordLength; count++)
  {
    if (input == word.substring(count, count + 1))
    {
      correct++;
      placeholder = placeholder.substring(0, count) + input + placeholder.substring(count + 1, placeholder.length + 1);
      document.getElementById("placeholder").innerHTML = placeholder;
    }
  }

  if (correct == 0)
  {
    goesLeft--;
  }
  var url = document.getElementById("hangimage").src = "http://fetlar.kingston.ac.uk/pp/hangman" + goesLeft + ".jpg";

  if (placeholder == word)
  {
    document.getElementById("hangimage").src = "http://fetlar.kingston.ac.uk/pp/hangman_win.jpg";
    alert("You guessed the word correctly.You win!");
  }

  if (goesLeft == 0)
  {
    alert("You lose");
    newGame();
  }
} 
```

错误在这里出现

```
if (input == word.substring(count, count + 1)) 
```

以及定义 for 循环的地方

错误显示“事件期间检测到错误：无法调用未定义的方法‘子字符串’”

有任何想法吗？提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:02:21.527

从您发布的代码中，您从未将 word 设置为值。

```
var word; <-- that is undefined 
```

我希望在您的代码中看到

```
currentWord = 0;
word = wordsArray[currentWord]; 
```

# javascript - 从代码中检查 Web 浏览器是否支持 256 位加密

> ID：16106180
> 
> 赞同：0
> 
> 时间：2013-04-19T13:48:29.817
> 
> 标签：javascript, asp.net, .net, ssl

如果他们的浏览器不支持 256 位加密，我的客户想要阻止用户访问该网站。是否可以从客户端/服务器代码中以某种方式检查它？

网站将在 HTTPS 上运行，并且颁发给域的 SSL 证书将设置为使用 256 位加密。所以我认为它必须自动阻止任何人访问它，因为否则他们会收到某种证书错误 - 但我不确定。

该项目位于 ASP.NET 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:27:54.110

您可以使用`HTTPS_KEYSIZE`.

```
var keySize = Request.ServerVariables["HTTPS_KEYSIZE"]; 
```

# c# - 为什么我得到 System.Collections.Generic.List`1[System.String] 而不是列表的内容？

> ID：16106181
> 
> 赞同：13
> 
> 时间：2013-04-19T13:48:31.747
> 
> 标签：c#, list, visual-studio

我决定制作一个基于控制台的小型 RPG 来学习课程。我有一个基本的游戏，但我有一个问题。我正在尝试在另一个类中显示来自 Player 类的玩家库存。

我正在使用列表来保存玩家库存。

```
public List<string> inventory = new List<string>(); 
```

这是在 Players 类文件中。

然后在 Shop Class 中，我正在做；

```
Player player = new Player(); 
```

制作一个新对象来访问播放器类。然后在商店的列表中添加一些东西，我正在做；

```
player.inventory.Add("Axe"); 
```

但是如果我`player.inventory();`在控制台中打印出来，我会得到错误的结果：

```
System.Collections.Generic.List`1[System.String] 
```

我怎样才能解决这个问题？我应该得到`Axe`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T13:51:51.573

这不是错误，它只是打印出列表。List的默认`ToString()`实现只是打印类型的名称。

我猜你希望它像在 PHP 中一样工作，在其中打印用逗号分隔的数组？尝试：

```
string.Join(", ", player.inventory); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T13:51:37.477

您正在尝试打印列表对象而不是列表中包含的值，您需要以下内容：-

```
foreach(var i in player.Inventory)
{
     Console.WriteLine(i);
} 
```

编辑*根据评论

```
Console.Write(string.Join(System.Environment.NewLine, player.Inventory)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T13:51:45.723

如果要一次打印所有项目，则将下一个字符串打印到控制台：

```
string items = string.Join(Environment.NewLine, player.inventory);

Console.WriteLine(items); 
```

这将在单独的行中打印每个项目

默认情况下`ToString()`（当你将它传递给时在 list 上调用它`Console.WriteLine`）将打印列表的**类型**，而不是内容本身。这就是您收到*System.Collections.Generic.List`1[System.String] 的原因。*在控制台屏幕上。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-19T13:51:28.220

您需要一个`foreach`循环来迭代列表中的每个成员。您不能只打印整个列表。

你需要类似的东西：

```
foreach(var i in Player.Inventory)
{
    Console.WriteLine(i);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T13:59:18.917

如果要输入所有库存项目，流动代码应该可以工作：

```
foreach (string inventoryItem in player.inventory)
{
     Console.WriteLine(inventoryItem);
} 
```

player.inventory 是一个集合对象，不能直接输入。

# android - 机器人 pressMenuItem 或 clickOnMenuItem 不起作用

> ID：16106188
> 
> 赞同：0
> 
> 时间：2013-04-19T13:48:52.867
> 
> 标签：android, unit-testing, robotium

我使用 SherlockActionBar。我有 3 个菜单项。始终显示第一个，其他有文本且没有图标，因此它们在菜单中。我运行了几次测试。第一次它工作得很好，但其他时候它失败了，因为

```
04-19 16:43:14.326: D/Robotium(22310): 'Disable layers' not found. Have found: 'Layer_3'
04-19 16:43:15.247: I/TestRunner(22310): ----- begin exception -----
04-19 16:43:15.267: I/TestRunner(22310): junit.framework.AssertionFailedError: Text string: 'Disable layers' is not found!
04-19 16:43:15.267: I/TestRunner(22310):    at junit.framework.Assert.fail(Assert.java:47)
04-19 16:43:15.267: I/TestRunner(22310):    at junit.framework.Assert.assertTrue(Assert.java:20)
04-19 16:43:15.267: I/TestRunner(22310):    at com.jayway.android.robotium.solo.Clicker.clickOnText(Clicker.java:339)
04-19 16:43:15.267: I/TestRunner(22310):    at com.jayway.android.robotium.solo.Clicker.clickOnMenuItem(Clicker.java:199)
04-19 16:43:15.267: I/TestRunner(22310):    at com.jayway.android.robotium.solo.Solo.clickOnMenuItem(Solo.java:763) 
```

pressMenuItem 产生相同的结果。为什么第二次启动时无法访问菜单？菜单甚至没有打开。真奇怪..

编辑：我使用最后一个机器人 4.1。代码：

```
 View imageBehind = solo.getView(R.id.image_view_behind);
        View imageTop = solo.getView(R.id.image_view_top);
        solo.clickOnMenuItem(solo.getString(R.string.disable_sbl));
        assertTrue(imageBehind.getVisibility() == View.GONE);
        solo.clickOnMenuItem(solo.getString(R.string.disable_stl));
        assertTrue(imageTop.getVisibility() == View.GONE);
        solo.clickOnMenuItem(solo.getString(R.string.enable_sbl));
        assertTrue(imageBehind.getVisibility() == View.VISIBLE);
        solo.clickOnMenuItem(solo.getString(R.string.enable_stl));
        assertTrue(imageTop.getVisibility() == View.VISIBLE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:27:02.223

这是一个时间问题，非常普遍。一旦你的菜单启动，它会在随后的时间里消失。添加

```
 solo.waitForText("Menu item"); 
```

前

```
 solo.clickOnMenuItem("Menu item"); 
```

可能会解决问题。但我认为，您需要为所有点击操作执行此操作。让我知道。我也很想知道它是否能解决这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T15:27:15.670

如果它不能间歇性工作，90% 的情况将是时间问题，所以请在点击菜单项之间使用 sleep api

独奏.睡眠（2000）；

# jquery - html弹出菜单的jQuery帮助

> ID：16106189
> 
> 赞同：0
> 
> 时间：2013-04-19T13:48:54.530
> 
> 标签：jquery, html, menu

我有这个 html 代码，我正在尝试使用 jquery 来激活弹出菜单，但没有任何成功。由于菜单是自动创建的，所以我无法修改 html 代码。周围的任何 jquery 大师都可以帮助解决这个问题吗？

先感谢您 ：）

html代码：

```
<div class="menu horizontal menu-horizontal">
<ul class="root static">
<li class="static">
<a class="static menu-item" href="">
<span class="additional-background">
<span class="menu-item-text">HOME</span>
</span>
</a>
</li>
<li class="static dynamic-children">
<a class="static dynamic-children menu-item" href="">
<span class="additional-background">
<span class="menu-item-text">ABOUT</span>
</span>
</a>
<ul class="dynamic" style="">
<li class="dynamic">
<a class="dynamic menu-item" href="">
<span class="additional-background">
<span class="menu-item-text">WHO WE ARE</span>
</span>
</a>
</li>
<li class="dynamic">
<a class="dynamic menu-item" href="">
<span class="additional-background">
<span class="menu-item-text">OUR STRATEGY</span>
</span>
</a>
</li>
<li class="dynamic">
<a class="dynamic menu-item" href="">
<span class="additional-background">
<span class="menu-item-text">OUR CLIENTS</span>
</span>
</a>
</li>
</ul>
</li>
</div> 
```

jQuery代码：

```
<script type="text/javascript">

        $('body').ready(function() {

            $('li.dynamic-children').hover(function() {

                $(this).find('ul.dynamic').slideToggle(); 
            });
        });
    </script>
<script type="text/javascript"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:51:55.303

Your code works fine, just use `$(document).ready()`:

```
$(document).ready(function () {
    $('li.dynamic-children').on('hover',function () {
         $(this).find('ul.dynamic').slideToggle();
    });
}); 
```

[JSFiddle](http://jsfiddle.net/DJDavid98/z2JEf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:14:29.783

jquery 代码是正确的！我不得不稍微修改它以与 SharePoint 中的当前 CSS 兼容。最终代码（即使没有优化）是

```
<script type="text/javascript">

$(document).ready(function () {

         $('li.dynamic-children').find('ul.dynamic').css("display","none");

}); </script>

<script type="text/javascript">
$(document).ready(function () {
    $('li.dynamic-children').on('hover',function () {
     $(this).addClass("hover");
         $(this).find('ul.dynamic').slideToggle();
         $(this).find('ul.dynamic').css('left','-1px');
         $(this).find('ul.dynamic').css('top','43px');
    });
}); </script> 
```

# macos - 启动脚本正在运行但输出丢失（退出代码：2）

> ID：16106194
> 
> 赞同：5
> 
> 时间：2013-04-19T13:49:07.580
> 
> 标签：macos, shell, launchd

我正在尝试使用 launchd 大约每分钟执行一个脚本

我添加了一个新的已启动作业列表，如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.bpstatusboard.omnifocus</string>
    <key>ProgramArguments</key>
    <array>
        <string>/Users/me/script.sh</string>
    </array>
    <key>StartInterval</key>
    <integer>50</integer>
</dict>
</plist> 
```

该作业以给定的时间间隔执行并生成以下日志。

```
Apr 19 15:27:58 MacBook com.apple.launchd.peruser.501[153] (com.bpstatusboard.omnifocus[89895]): Exited with code: 2 
```

问题：脚本应该更新一个文件，但它不是。当我在终端中手动启动它时它工作正常。我找不到有关退出**代码的更多详细信息： 2**。知道是什么阻止了脚本正确执行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-21T12:33:50.297

退出代码：2

> [2 ENOENT](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man2/intro.2.html)没有这样的文件或目录。指定路径名的组件不存在，或路径名是空字符串。

/Users/me/script.sh 中不存在您的脚本。

# asp.net-mvc - 在 Razor 中连接字符串

> ID：16106196
> 
> 赞同：100
> 
> 时间：2013-04-19T13:49:22.140
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

如何在 Razor 语法中加入两个字符串？

如果我有：`@Model.address`并且`@Model.city`我希望输出是`address city`我会做什么？就这么简单`@Model.address + " " + @Model.city`吗？

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2013-04-19T13:51:30.447

使用 Razor 的 parentesis 语法：

```
@(Model.address + " " + Model.city) 
```

或者

```
@(String.Format("{0} {1}", Model.address, Model.city)) 
```

**更新**：使用 C# 6，您还可以使用[$-Notation](https://msdn.microsoft.com/en-us/library/dn961160.aspx)（官方插值字符串）：

```
@($"{Model.address} {Model.city}") 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-19T13:52:40.940

String.Format 也适用于 Razor：

```
String.Format("{0} - {1}", Model.address, Model.city) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-02-05T19:27:14.880

你可以这样给......

```
<a href="@(IsProduction.IsProductionUrl)Index/LogOut"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-21T11:30:30.573

您可以使用：

```
@foreach (var item in Model)
{
  ...
  @Html.DisplayFor(modelItem => item.address + " " + item.city) 
  ... 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2017-11-21T22:40:49.367

加号工作得很好，我个人更喜欢使用 concat 函数。

var s = string.Concat(string 1, string 2, string, 3, etc)

# ios - 如何在可可中获取图像的作者

> ID：16106202
> 
> 赞同：4
> 
> 时间：2013-04-19T13:49:37.627
> 
> 标签：ios, image, cocoa, core-graphics, metadata

我不明白为什么 metaDic 总是为空。有一个代码。

```
 CFDataRef dataRef = CGDataProviderCopyData(CGImageGetDataProvider(img.CGImage)); //(UIImage *img)
    CGImageSourceRef mySourceRef =  CGImageSourceCreateWithData(dataRef, NULL);
    NSDictionary *metaDic = (NSDictionary *) CGImageSourceCopyPropertiesAtIndex(mySourceRef,0,NULL);
    NSDictionary *tiffDic = (NSDictionary *)[metaDic objectForKey:(NSString *)kCGImagePropertyTIFFDictionary];
    NSString *AuthorName  =  [tiffDic objectForKey:(NSString *)kCGImagePropertyTIFFArtist]; 
```

我做了一些获取图片的变体。在这里我发现了什么：

使用其信息获取图片的一种方法-我需要从站点获取它，并且那里有我所拥有的：

```
 //  NSURL *UrlPath  - path of picture    image.jpg   from web site
            NSData *dataImg = [NSData dataWithContentsOfURL:UrlPath];

            CGImageSourceRef mySource =  CGImageSourceCreateWithData((CFDataRef)dataImg, NULL); 
            NSDictionary *metaDic = (NSDictionary *) CGImageSourceCopyPropertiesAtIndex(mySource,0,NULL);
            NSDictionary *tiffDic = [metaDic objectForKey:(NSString *)kCGImagePropertyTIFFDictionary];

            /// Log of tiffDic    
tiffDic = {
Artist =(
  "mr. Smith"
  );
} 
```

另一种方式 - 从 NSBoudle mainBundle 读取图片：

```
 // NSURL *NSBundleUrl  -  - path of the same  picture    image.jpg   from [[NSBundle mainBundle] 
            CGImageSourceRef mySource = CGImageSourceCreateWithURL( (CFURLRef) NSBundleUrl, NULL);
            NSDictionary *metaDic = (NSDictionary *) CGImageSourceCopyPropertiesAtIndex(mySource,0,NULL);
            NSDictionary *tiffDic = [metaDic objectForKey:(NSString *)kCGImagePropertyTIFFDictionary];

/// Log of tiffDic
tiffDic = {
    Artist = "mr. Smith"; 
} 
```

当图片数据来自网站时，为什么它将大括号作为艺术家姓名的数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T17:31:58.117

您的数据路径如下所示：

```
UIImage -> CGImage -> CGDataProvider -> CGImageSource 
```

这是清理元数据图像的第三步。CGDataProviders 是一种“较旧”的机制，用于将数据导入 Quartz，具有“[有限的功能](https://developer.apple.com/library/iOS/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_data_mgr/dq_data_mgr.html#//apple_ref/doc/uid/TP30001066-CH216-BAJEDJJE)”——这意味着——除其他外——它们不支持元数据。

尝试这样的事情：

```
NSData* jpegData = UIImageJPEGRepresentation(image,1.0);
CFDataRef dataRef = (__bridge CFDataRef)jpegData;
CGImageSourceRef source = CGImageSourceCreateWithData(dataRef, NULL); 
```

数据路径：

```
UIImage -> NS/CFData -> CGImageSource 
```

这将保留元数据。

`UIImage`如果您使用 the作为起点，您可能无法以这种方式获得 authorName 。`UIImage`剥离了许多可能伴随原始图像源的元数据（TiffDict 似乎被剥离成`orientation`标签）。您真的想从源中读取“未解释的”数据并在不读取图像数据的情况下提取元数据（这是使用 a 的好处之一`CGImageSourceRef`）。

我[在 github 上有一个小测试项目，](https://github.com/foundry/UIImageMetadata)它比较了从各种来源（文件系统、网络 URL、资产库、相机）提取图像元数据的方法，也许你应该看看。

*更新* 正如彼得指出的（我的项目显示） - 你不应该使用 UIImage，而是使用原始数据源。在您的情况下，它是一个文件系统源，如下所示：

```
 NSString* path = @"/path/to/resource";
 NSData *data = [NSData dataWithContentsOfFile:path];
 CGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef)data, NULL); 
```

或者更好的是（正如彼得再次指出的那样！）您可以完全使用`CGImageSourceCreateWithURL`并跳过该`NSData`步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:32:14.243

CGImage 的数据提供者提供原始像素，而不是 PNG 或 TIFF 或其他包含元数据的外部格式数据。因此，没有要获取的属性。

如果该来源甚至无法为您提供图像，我不会感到惊讶，因为它无法知道解释数据的像素格式。

您需要使用获取原始图像的 URL 或数据创建图像源，而不是该图像的像素数据。理想情况下，您应该首先创建图像源，然后从图像源创建图像及其属性。

# python - 如何知道进程是否在没有锁定 GUI 的情况下结束？

> ID：16106203
> 
> 赞同：0
> 
> 时间：2013-04-19T13:49:42.087
> 
> 标签：python, tkinter, subprocess

我正在制作一个 python 接口来在 C 中运行一个程序，我需要知道这个 C 程序是否成功结束，但是我知道这样做的唯一方法是在 C 程序未完成时锁定接口。有谁知道我如何在不阻塞界面的情况下做到这一点？

下面是代码片段：

```
def runProg(self):
    """This funcion will run the simulation"""

    if self.openned.get() ==  1:
        self.pid = StringVar()
        a = open(self.nameFile.get(),"w")
        self.writeFile()

        self.process = subprocess.Popen([self.cmdSys.get()+self.dV.get()+
                                         self.extension.get(),self.nameFile.get()])
        self.pid = self.process.pid

        #isso trava a interface para processos muito grandes até que o mesmo tenha    terminado
        if self.process.wait() == 0:
            tkMessageBox.showinfo("","Your simulation was completed sucessfully.") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:24:11.653

该[`self.process.wait()`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.wait)调用将阻塞，直到子进程结束，但是，正如您所发现的，如果您在主 GUI 线程中调用它，它将阻止您的 GUI 处理任何更多事件，直到发生这种情况。

相反，您可以检查它是否以 结束，如果进程仍在运行[`self.process.poll()`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.poll)，它将立即返回。`None`

但是，如果您希望在完成时发生某些事情，则必须设置某种定时事件来监视子流程。

另一种选择是在后台线程中启动子进程，并改用阻塞`wait()`方法。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/2581817/python-subprocess-callback-when-cmd-exits)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:28:35.470

子进程 Popen 类有一个 returncode 属性，根据 pydoc：

> None 值表示该进程尚未终止。负值 -N 表示子进程被信号 N 终止（仅限 UNIX）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:23:03.250

从子流程模块[文档](http://docs.python.org/2/library/subprocess.html)：

```
subprocess.call(args, *, stdin=None, stdout=None, stderr=None, shell=False) 
```

运行 args 描述的命令。等待命令完成，然后返回 returncode 属性。

```
subprocess.check_call(args, *, stdin=None, stdout=None, stderr=None, shell=False) 
```

运行带参数的命令。等待命令完成。如果返回码为零，则返回，否则引发 CalledProcessError。CalledProcessError 对象将在 returncode 属性中具有返回码。

所以我会使用其中一个`subprocess.call()`或`subprocess.check_call()`函数而不是`subprocess.Popen()`.

# c# - Monodroid：如何设置 WifiConfiguration 的 AllowKeyManagement 属性

> ID：16106204
> 
> 赞同：1
> 
> 时间：2013-04-19T13:49:47.880
> 
> 标签：c#, xamarin.android, wifi

我必须在这里遗漏一些东西，但我正在尝试`AllowedKeyManagement`像这样设置 WifiConfiguration 的属性：

```
config.AllowedKeyManagement = WifiConfiguration.KeyMgmt.None; 
```

但是，`AllowedKeyManagement`是 BitSet 类型，并且没有从`KeyManagementType`. 也试过`Android.Net.Wifi.KeyManagementType.None`了，这显然会导致同样的问题。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T08:56:25.050

因此，在与 Xamarin 进行电子邮件讨论后，您不能简单地将枚举值分配给 AllowedKeyManagement，这同样适用于 AllowedGroupCipher（或者实际上是任何类型的 BitSet 值）。枚举必须转换为 BitSet，这里有一个示例：

[https://stackoverflow.com/a/2473719/1555582](https://stackoverflow.com/a/2473719/1555582)

我尚未对此进行测试，但如果转换不起作用，那么我建议这将导致提出不同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-29T16:15:57.587

我知道这是一个老问题，但我找到了怎么做。

```
WifiConfiguration wifiConfiguration = new WifiConfiguration
{
    Ssid = ssid,
    PreSharedKey = password
};        

wifiConfiguration.AllowedKeyManagement.Set((int)KeyManagementType.WpaPsk);            
wifiConfiguration.AllowedAuthAlgorithms.Set((int)AuthAlgorithmType.Open); 
```

改编自：[Xamarin 论坛](https://forums.xamarin.com/discussion/18373/connect-to-a-specified-wifi)

# javascript - CanvasJS 多个图表

> ID：16106205
> 
> 赞同：1
> 
> 时间：2013-04-19T13:49:50.470
> 
> 标签：javascript, html, html5-canvas, canvasjs

我正在使用一个名为 CanvasJS 的安静漂亮的小 js 工具。它工作得非常好，直到我需要它一次显示多个图表。

现在它只显示最后一个条目。Enerything 其他被忽略。我几乎尝试了所有方法，但根本无法弄清楚为什么它不起作用。

如果有人知道我如何正确地让它变得更早，如果你让我知道，我会非常高兴。

版本：CanvasJS – v1.0 GA

类型：线

脚本： http: [//pastebin.com/hXVBkS8E](http://pastebin.com/hXVBkS8E)

工具网址：canvasjs.com

编辑：顺便说一句，[@Sunil Urs](https://stackoverflow.com/users/159764/sunil-urs)提出的解决方案非常有效！

```
style="width: 80%; height:400px;" 
```

[http://jsfiddle.net/canvasjs/ZXh5y/](http://jsfiddle.net/canvasjs/ZXh5y/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T04:00:41.937

我试过你的代码和图表实际上正在呈现。但是，所有 div 元素都相互重叠。只需设置所有 div 元素的高度，它应该可以正常工作。

# javascript - JayData 分阶段集成到应用程序中

> ID：16106206
> 
> 赞同：1
> 
> 时间：2013-04-19T13:49:53.380
> 
> 标签：javascript, web-sql, jaydata

我们正在考虑冒险将我们现有的应用程序`WebSql`后端/数据层移植到`JayData`. 都是客户端。我们希望分两个阶段进行移动，允许我们的应用程序继续使用现有方法从数据库中读取，同时我们的解析将移动到允许 JayData 控制所有读/写数据结构。

早期的测试非常顺利。 `JayData`是一个很好的 ORM 并且易于使用。但是，我们一次又一次遇到错误：

```
Uncaught TypeError: Cannot set property 'initData' of undefined SqLiteProvider.min.js:35
DefaultError: DEFAULT ERROR CALLBACK!

Exception {name: "DefaultError", message: "DEFAULT ERROR CALLBACK!", data: Arguments[1], _getStackTrace: function} 
```

根据日志，解析器（使用 JayData）的每个阶段都成功完成了读取和写入。然而，该数据库通常具有尚未填充的表。所有表都在相同的上下文中打开并使用控制`$.Deferreds.`

JayData 认为它已完成交易并且错误实际上告诉我是不是“误报”？

打开数据库（在 JayData 之外）并在`context`打开（但未使用）时修改表是否有问题？

**更新**

按照评论中的说明进行操作。
源在*第 424 行*抛出异常-`items[i].physicalData.initData = item.rows[0];`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T10:40:38.803

在与 JayData 团队进行了长时间的交谈后，问题是由于试图同时在一个上下文中执行多个操作而引起的。该团队建议使用在共享上下文上运行的一系列承诺，然后在最后阶段提交更改。这解决了我所有的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:44:05.350

我们需要更多信息，所以： - 请使用未缩小的版本，以便我们更好地定位错误 - 如果您使用 chrome，然后将其设置为暂停未捕获的异常（紫色符号），当它停止环顾四周时，也许可以在那里学习 - 创建一个小例子（最好在 jsfiddle 上），这样我们就可以调试它

# asp.net - 通过 xpath 返回单个属性值

> ID：16106212
> 
> 赞同：0
> 
> 时间：2013-04-19T13:50:13.110
> 
> 标签：asp.net, xml, vb.net, xpathnavigator

我有一些 XML

```
<?xml version="1.0" encoding="utf-8"?>
<rsp stat="ok">
  <auth>
    <token>123456</token>
    <perms>write</perms>
    <user nsid="74461753@N03" username="user" fullname="name" />
  </auth>
</rsp> 
```

我正在尝试使用 XPath 将“token”的值转换为字符串。简单吧。但我能做到吗？

```
Dim doc As New XmlDocument
doc.Load(url)   'gets the XML above.

Dim xmlNav As XPathNavigator

Dim xmlNI As XPathNodeIterator

xmlNav = doc.CreateNavigator()

xmlNI = xmlNav.Select("token") 
```

如何将“123456”输出到变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:30:08.253

[XPathNodeIterator 类](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathnodeiterator.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-3)提供了一组可以迭代的选定节点。您的代码有两个问题。

首先，您的 XPath 不正确 - 它应该是“/rsp/auth/token”，而不是“token”。

其次，您需要遍历返回的集合（在这种情况下，您只会得到一个节点）。您可以通过以下两种方式之一执行此操作：

```
xmlNI = xmlNav.Select("/rsp/auth/token")
xmlNI.MoveNext()
Dim selectedNode As XPathNavigator = xmlNI.Current
' value of the node can be accessed by selectedNode.Value 
```

或者您可以使用 For Each 循环：

```
For Each node As XPathNavigator In xmlNI
    ' value of the node can be accessed by node.Value
Next 
```

如果您可以使用 LINQ to XML，那就更简单了（您需要添加对`System.Xml.Linq`via的引用`Imports System.Xml.Linq`）：

```
Dim xml As XElement = XElement.Load(url)

Dim auth As String = xml.Descendants("token").FirstOrDefault() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:06:26.570

你一定`XPathNavigator`需要吗？我得到它是这样的：

```
Dim list As Xml.XmlNodeList = doc.SelectNodes("rsp/auth/token")
If list IsNot Nothing And list.Count > 0 Then
    Dim myValue As String = list(0).FirstChild.Value
    Console.WriteLine(myValue) 'prints 123456'
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:58:29.267

XmlDocument 包含获取每个 XPath 的元素的方法。

```
Dim doc As New XmlDocument
doc.Load(url)

Dim TokenElement As XmlElement = doc.DocumentElement.SelectSingleNode("auth/token/text()")

If(Not(TokenElement Is Nothing)) Then 'XmlNode.SelectSingleNode(String) can be Nothing if the expression finds no node
    Dim strValue As String = TokenElement.Value
End If 
```

# jsp - 访问已部署的 jsp 页面时遇到问题

> ID：16106214
> 
> 赞同：0
> 
> 时间：2013-04-19T13:50:21.923
> 
> 标签：jsp, struts

我一直在做一个 JSP/struts 项目，现在我只是想在开始实际项目之前建立基本的第一页并开始工作，但我对 struts 很陌生，在 MyEclipse 中部署我的页面之后，尝试通过浏览器访问本地主机页面时，我不断收到错误消息。我得到的错误是：

```
HTTP Status 500 -
type Exception report
message
description The server encountered an internal error () that prevented it from fulfilling     this request.
exception
org.apache.jasper.JasperException: javax.servlet.ServletException:     javax.servlet.jsp.JspException: Cannot retrieve definition for form bean userLoginForm 
```

它从那里继续，但这是基本信息。

初始 JSP 页面的代码是

```
<%@ page language="java" pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://jakarta.apache.org/struts/tags-bean" prefix="bean"%> 
<%@ taglib uri="http://jakarta.apache.org/struts/tags-html" prefix="html"%>

<html> 
    <head>
        <title>JSP for UserLoginForm form</title>
    </head>
    <body>
        <html:form action="/userLogin">
            userName : <html:text property="userName"/><html:errors         property="userName"/><br/>
            enter : <html:text property="enter"/><html:errors property="enter"/>    <br/>
            server : <html:text property="server"/><html:errors     property="server"/><br/>
            password : <html:text property="password"/><html:errors     property="password"/><br/>
            <html:submit/><html:cancel/>
        </html:form>
    </body>
</html> 
```

使用的 xml 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration     1.1//EN" "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">

<struts-config>
  <data-sources />
  <form-beans >
    <form-bean name="UserLoginForm" type="strutsPackage.struts.form.UserLoginForm" />

  </form-beans>

  <global-exceptions />
  <global-forwards />
  <action-mappings >
    <action
      attribute="userLoginForm"
      input="/login.jsp"
      name="userLoginForm"
      path="/userLogin"
      scope="request"
      type="strutsPackage.struts.action.UserLoginAction">
      <forward name="failure" path="/login.jsp" />
      <forward name="success" path="/login.jsp" />
    </action>

  </action-mappings>

  <message-resources parameter="strutsPackage.struts.ApplicationResources" />
</struts-config> 
```

操作页面是：

```
package strutsPackage.struts.action;

import javax.servlet.http.HttpServletRequest;
    /** 
 * MyEclipse Struts
 * Creation date: 04-18-2013
 * 
 * XDoclet definition:
 * @struts.action path="/userLogin" name="userLoginForm" input="/login.jsp"     scope="request" validate="true"
 * @struts.action-forward name="failure" path="/login.jsp"
 * @struts.action-forward name="success" path="/login.jsp"
 */
public class UserLoginAction extends Action {
    /*
     * Generated Methods
     */

    /** 
         * Method execute
         * @param mapping
     * @param form
     * @param request
     * @param response
     * @return ActionForward
     */
    public ActionForward execute( 
              ActionMapping mapping, 
                  ActionForm form, 
              HttpServletRequest request, 
              HttpServletResponse response) { 
              UserLoginForm userLoginForm = (UserLoginForm) form; 

              if(userLoginForm.getUserName().equals("myeclipse") &&     userLoginForm.getPassword().equals("myeclipse")) 
              { 
               request.setAttribute("userName", userLoginForm.getUserName()); 
               return mapping.findForward("success"); 
              } 

              return mapping.findForward("failure"); 
             }
} 
```

每隔一段时间我就会得到一个不同的错误页面，上面写着

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling     this request.

exception

org.apache.jasper.JasperException: An exception occurred processing JSP page /login.jsp at     line 10

7:      <title>JSP for UserLoginForm form</title>
8:  </head>
9:  <body>
10:         <html:form action="/userLogin">
11:             userName : <html:text property="userName"/><html:errors     property="userName"/><br/>
12:             enter : <html:text property="enter"/><html:errors property="enter"/><br/>
13:             server : <html:text property="server"/><html:errors property="server"/><br/> 
```

这些错误似乎没有明显的原因互换，但真正让我困惑的是我昨天让页面显示正常，不再触摸它，今天当我试图打开它时，我得到了第一个错误页面。我已经尝试重新部署该网站，但我仍然得到同样的结果。

所以我不知道这是否是我的代码或我的 Tomcat 版本的问题，或者我的代码是否有问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:43:27.250

`"userLoginForm"`在您的操作映射中与`"UserLoginForm"`您的表单 bean 定义中的不同。它们必须相同。

此外，不清楚您是否真的在*使用*XDoclet。如果你是，你需要多说，因为它会生成各种配置工件。

无关：除非你有充分的理由，否则不要费心学习 Struts 1。它很古老，已经停产，不应该用于新的开发。Struts 2 或 Spring MVC 是典型的替代品，或者如果您与 JVM 相关联，您可以迁移到 JSF、Play、Grails、JRuby on Rails 等。

# android - admob 中的中介 ID 和发布者 ID 有什么区别

> ID：16106218
> 
> 赞同：1
> 
> 时间：2013-04-19T13:50:26.117
> 
> 标签：android, admob

admob 中的中介 id 和发布者 id 有什么区别？我对我将在我的 Android 应用程序中使用的这两个 id 以及为什么 Admob 给出 2 个 id 感到困惑？

```
 <com.google.ads.AdView
         xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
         android:id="@+id/ad"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         ads:adSize="SMART_BANNER"
         ads:adUnitId="738a44d913034b9f"
         /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:39:22.867

发布商 ID 是指特定广告位的 ID。每个广告位都定义了一定的尺寸并且可以有过滤器。广告位通常仅限于单个应用程序（没有什么可以阻止您跨应用程序重复使用，但每个应用程序的统计数据会不太清晰，并且可能会降低您的 eCPM，因为它们的广告定位不差）。

中介 id 是指一个特定的中介列表，该列表将引用一个或多个广告网络，其中一个可能是 Admob 广告，将由其发布者 ID 标识。

如果您还没有使用调解，那么您应该使用。它可以让您控制您的广告在服务器上的传播。

# file - 如何比较 vxworks shell 中的两个文件？

> ID：16106220
> 
> 赞同：0
> 
> 时间：2013-04-19T13:50:29.740
> 
> 标签：file, shell, vxworks

我的目标上有两个大小相同的文件。我只是在想，如果他们真的一样吗？如何在 vxWorks shell 中检查？我的文件：

```
-> ls "/a0",1

Listing Directory /a0:
-rwxrwxrwx  1 0       0              2336692 Feb  1  1980 vxWorks
-rwxrwxrwx  1 0       0              2336692 Feb  1  1980 vxWorks2
value = 0 = 0x0
-> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:55:39.120

在 vxWorks shell 中比较两个文件非常简单。使用以下调用来做到这一点：

```
-> fd1=open("/a0/vxWorks",2,0)
New symbol "fd1" added to kernel symbol table.
fd1 = 0x8a4dfe0: value = 5 = 0x5
-> fd2=open("/a0/vxWorks2",2,0)
New symbol "fd2" added to kernel symbol table.
fd2 = 0x8a65fe0: value = 6 = 0x6
-> b1=malloc(2336692)
New symbol "b1" added to kernel symbol table.
b1 = 0x8a89fe0: value = 153153552 = 0x920f010
-> b2=malloc(2336692)
New symbol "b2" added to kernel symbol table.
b2 = 0x8a95fe0: value = 155490272 = 0x94497e0
-> read(fd1,b1,2336692)
value = 2336692 = 0x23a7b4 = pathCondense + 0x9c
-> read(fd2,b2,2336692)
value = 2336692 = 0x23a7b4 = pathCondense + 0x9c
-> strcmp(b1,b2)
value = 0 = 0x0 
```

如果最后一次调用返回“0”，则表示文件相同。

# python - 断言对 __iter__() 方法的模拟调用

> ID：16106223
> 
> 赞同：4
> 
> 时间：2013-04-19T13:50:45.140
> 
> 标签：python, unit-testing, mocking

```
from mock import MagicMock, call
m = MagicMock()
m.foo()
for i in m:
    print m
m.bar()
print m.mock_calls
[call.foo(), call.__iter__(), call.bar()]

[call.foo(), call.__iter__(), call.bar()] == m.mock_calls
False 
```

如何断言模拟对象在一系列调用中被迭代？如果我设置其他内容，也会发生同样的事情`__iter__.return_value`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:13:18.227

一个有效但丑陋的解决方案是`[call.foo(), ('__iter__', (), {}), call.bar()] == m.mock_calls`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-18T12:44:46.600

根本问题是`mock.call`返回 的实例`mock._Call`，它本身就是 的子类`tuple`。作为一个元组，它继承了元组的`__iter__`方法，并且您将获得该实际方法，而不是像往常一样动态捕获属性访问以产生链式调用。

`('__iter__', (), {})`一种可能比在呼叫列表中硬编码更好的解决方法是这样做`call.__getattr__('__iter__')()`，其效果大致相同：

```
>>> mock.call.__getattr__('__iter__')() == ('__iter__', (), {})
True 
```

（请注意，您不能这样做`getattr(mock.call, '__iter__')`，因为那只会`tuple.__iter__`再次为您提供实际方法）

或者，您可以子类`mock._Call`化并构建自己的行为更好（至少相对于`__iter__`）版本`call`：

```
class _IterCall(mock._Call):

    def __getattr__(self, attr):
        if self._mock_name is None:
            return type(self)(name=attr, from_kall=False)
        name = '%s.%s' % (self._mock_name, attr)
        return type(self)(name=name, parent=self, from_kall=False)

    def __iter__(self):
        return self.__getattr__('__iter__')()

iter_call = _IterCall(from_kall=True) 
```

（它也必须重写`__getattr__`，因为 的实现`mock._Call.__getattr__`将显式返回原始`mock._Call`类的实例而不是`type(self)`）

```
>>> iter_call.__iter__() == ('__iter__', (), {})
True 
```

这两种方法都有其缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:11:49.683

如果调用了模拟对象，则其`called`属性为`True`：

```
>>> m = MagicMock()
>>> assert m.__iter__.called, "The object was not iterated over"
Traceback (most recent call last):
  File "<string>", line 1, in <fragment>
builtins.AssertionError: The object was not iterated over
>>> for i in m:
...     print(m)
... 
>>> assert m.__iter__.called, "The object was not iterated over"
>>> m.__iter__.called
True 
```

在这种情况下`m.__iter__`也是一个模拟，它是“按需”创建的（作为访问`__iter__`方法的结果）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-02T14:02:37.283

我尽量避免猜测正确的语法，所以我编写了一个[帮助库](https://pypi.org/project/mock-generator/)来根据实际调用为我生成断言。

如果您将以下行添加到代码的末尾：

```
import mock_autogen.generator
print(mock_autogen.generator.generate_asserts(m)) 
```

你会得到：

```
m.foo.assert_called_once_with()
m.__iter__.assert_called_once_with()
m.bar.assert_called_once_with() 
```

所以不再需要自己弄清楚确切的语法，只需应用该工具 :)

# java - File 类的 exists() 方法是如何工作的？

> ID：16106232
> 
> 赞同：0
> 
> 时间：2013-04-19T13:51:03.913
> 
> 标签：java, file-io, scjp

早上好，我已经使用这些方法来检查某个文件是否存在于一组目录中：

```
public static boolean doesFileExist(String[] directories, String fileName) {
    String path = " ";
    for (String dir : directories) {
        path = path + File.separator + dir;

    }
    System.out.println(path);
    File file = new File(path, fileName);
    return file.exists();
} 
```

我给该方法一个目录数组和一个实际存在于其中一个中的文件名，这是目录数组：

```
 static String[] direstories = { "B:\\eslam\\xml", "B:\\eslam\\xml\\paper" }; 
```

并且该文件`ch23.pdf`确实存在于第一个目录中，我认为该方法采用一组目录的整个字符串并根据正则表达式将其拆分，`/^[A-z]+$/:`但它违反了我的期望，因为该方法对这些目录组返回 false`\B:\eslam\xml\B:\eslam\xml\paper`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:01:31.910

该方法仅适用于单个路径，实际上文件实例应该只指向单个文件路径。

尝试这个：

```
public static boolean doesFileExist(String[] directories, String fileName) {
for (String dir : directories) {
    System.out.println(dir+ File.separator+fileName);
    File file = new File(dir, fileName);
    if(!file.exists()) return false;
}
return true;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:54:02.350

你的循环范围是不是错误的？

我认为您只会检查目录数组中的最后一个元素。

# image - 全屏缩放背景是否有最佳图像尺寸（宽度 x 高度 | 文件大小）？

> ID：16106234
> 
> 赞同：3
> 
> 时间：2013-04-19T13:51:09.883
> 
> 标签：image, css

我正在构建一个投资组合网站，该网站依赖于在浏览器窗口中以全尺寸显示精美、高质量的照片。

我正在使用 CSS3 background-size: 封面标签和这个小片段的组合，它可以用更高分辨率的图像代替更高分辨率的设备：

[http://www.bdoran.co.uk/2012/08/28/detecting-and-delivering-images-to-retina-displays/](http://www.bdoran.co.uk/2012/08/28/detecting-and-delivering-images-to-retina-displays/)

根据那篇文章，我需要至少三个版本的图像，一个是 1x，一个是 1.5x，一个是 2x，但这些都有可能变得非常庞大。

是否存在图像的最佳尺寸，它可以在大屏幕上足够好地缩放，但没有巨大的文件大小和下载时间？

用户停留在页面上的时间越长，我是否应该考虑逐步提高质量？那么首先加载低质量/分辨率的图像，然后用更高的图像替换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T20:33:09.533

根据这个[浏览器统计数据](http://www.w3schools.com/browsers/browsers_resolution_higher.asp)， 1800 x 1080 对我来说似乎是一个合理的尺寸，如果你想安全起见的话。也许您的目标受众使用更大的屏幕，如果可以的话，您应该找出答案。

我不会像您描述的那样进行渐进式增强。每个用户都必须下载图像 3 次。

[相反，您可以使用媒体查询来检查用户的屏幕大小，如此处](https://stackoverflow.com/questions/9506069/media-queries-and-background-images)所示。因此，用户正在下载对他们来说意味着什么。

编辑：[这](http://www.jordanm.co.uk/post/22964442013/source-shuffling-responsive-images-based-on-media)也是一种有趣的方法。

# three.js - three.js 中挤出形状的奇怪工件和空纹理

> ID：16106239
> 
> 赞同：5
> 
> 时间：2013-04-19T13:51:27.033
> 
> 标签：three.js

我试图通过使用 Three.js 挤出形状来为 SVG 路径（lineto 和 moveto）赋予 3D 感觉，但该过程会导致一些我无法删除的伪影。

什么会导致我渲染的 3D 形状出现奇怪的伪影？有没有办法删除它们？

在下面的示例图像中，工件用箭头标记。

![在此处输入图像描述](https://i.stack.imgur.com/5Ahyh.png)

现场示例在这里：http: [//jsfiddle.net/pHn2B/24/](http://jsfiddle.net/pHn2B/24/)

代码在这里：

```
// 使用回调挑选

// 三.js r.52
var 容器，
    信息，
    相机，
    场景，
    光，
    几何学，
    网，
    投影仪，
    渲染器，
    控制；
    对象 = [];

// dom
容器 = document.createElement('div');
document.body.appendChild( 容器 );

// 信息
info = document.createElement('div');
info.style.position = '绝对';
info.style.top = '10px';
info.style.width = '100%';
info.style.textAlign = '中心';
info.innerHTML = "拖动旋转相机；点击选择";
容器.appendChild(信息);

// 渲染器
渲染器 = 新的 THREE.CanvasRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
container.appendChild(renderer.domElement);

// 场景
场景 = 新的三个场景（）；

// 相机
camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 10000);
camera.position.set(0, 300, 500);
场景。添加（相机）；

// 控件
控制=新的三个。轨道控制（相机）；

// 光
场景.add（新的三个环境光（0x222222））；

// 光
灯 = 新的三点灯（0xaaaaaa）；
light.position = camera.position;
场景.添加（灯光）；

// 几何学
几何=新的三立方几何（100、100、500）；

// 材料
材料=新三。MeshLambertMaterial（{颜色：0xff0000，环境：0xff0000，过度绘制：真}）；

// 网
网格=新的三。网格（几何，材料）；
网格.position.set(-100, -100, 200);
mesh.name = "红色对象";
mesh.callback = function() { info.innerHTML = this.name; }
场景.add（网格）；

对象.push（网格）；

// 几何学
////////////
    // 风俗 //
    ////////////

var starPoints2 = new THREE.Shape();

starPoints2.moveTo(307.94,275.49);
starPoints2.lineTo(296.26,275.23);
starPoints2.lineTo(286.64,272.99);
starPoints2.lineTo(279.78,269.31);
starPoints2.lineTo(274.14,263.55);
starPoints2.lineTo(271.65,260.21);
starPoints2.lineTo(269.2,261.06);
starPoints2.lineTo(254.83,268.51);
starPoints2.lineTo(242.11,272.97);
starPoints2.lineTo(227.59,275.23);
starPoints2.lineTo(209.91,275.48);
starPoints2.lineTo(197.47,273.63);
starPoints2.lineTo(187.91,270.13);
starPoints2.lineTo(180.48,265.09);
starPoints2.lineTo(175.32,258.88);
starPoints2.lineTo(172.2,251.44);
starPoints2.lineTo(171.1,242.23);
starPoints2.lineTo(172.24,233.63);
starPoints2.lineTo(175.49,226.24);
starPoints2.lineTo(181,219.54);
starPoints2.lineTo(189.42,213.3);
starPoints2.lineTo(201.36,207.73);
starPoints2.lineTo(217.23,203.25);
starPoints2.lineTo(238.28,200.1);
starPoints2.lineTo(269.37,198.47);
starPoints2.lineTo(269.98,182.93);
starPoints2.lineTo(268.74,171.32);
starPoints2.lineTo(266.05,163.7);
starPoints2.lineTo(261.58,157.72);
starPoints2.lineTo(255.24,153.24);
starPoints2.lineTo(247.06,150.32);
starPoints2.lineTo(235.44,149.13);
starPoints2.lineTo(224.71,150.05);
starPoints2.lineTo(215.91,153);
starPoints2.lineTo(210.23,156.86);
starPoints2.lineTo(207.64,160.85);
starPoints2.lineTo(207.19,165.28);
starPoints2.lineTo(209.34,169.86);
starPoints2.lineTo(212.01,174.15);
starPoints2.lineTo(212.14,177.99);
starPoints2.lineTo(209.8,181.78);
starPoints2.lineTo(204.22,185.79);
starPoints2.lineTo(197.62,187.68);
starPoints2.lineTo(188.65,187.43);
starPoints2.lineTo(182.41,185.39);
starPoints2.lineTo(178.45,181.77);
starPoints2.lineTo(176.2,176.9);
starPoints2.lineTo(176.03,170.64);
starPoints2.lineTo(178.2,164.13);
starPoints2.lineTo(183.09,157.69);
starPoints2.lineTo(191.04,151.36);
starPoints2.lineTo(202.01,145.82);
starPoints2.lineTo(216.09,141.57);
starPoints2.lineTo(232.08,139.24);
starPoints2.lineTo(250.07,139.18);
starPoints2.lineTo(266.13,141.23);
starPoints2.lineTo(279.05,145.06);
starPoints2.lineTo(289.15,150.3);
starPoints2.lineTo(295.91,156.19);
starPoints2.lineTo(300.73,163.41);
starPoints2.lineTo(303.85,172.47);
starPoints2.lineTo(305.07,183.78);
starPoints2.lineTo(305.07,241.97);
starPoints2.lineTo(306,251.51);
starPoints2.lineTo(308.18,256.39);
starPoints2.lineTo(311.72,259.09);
starPoints2.lineTo(317.31,260.01);
starPoints2.lineTo(324.71,259.01);
starPoints2.lineTo(332.45,255.86);
starPoints2.lineTo(335.57,257.53);
starPoints2.lineTo(337.6,260.44);
starPoints2.lineTo(336.94,262.33);
starPoints2.lineTo(328.27,268.74);
starPoints2.lineTo(317.89,273.41);
starPoints2.lineTo(307.94,275.49);
/*
starPoints2.moveTo(245.79,125.33);
starPoints2.lineTo(232.93,124.53);
starPoints2.lineTo(222.21,121.74);
starPoints2.lineTo(213.14,117.11);
starPoints2.lineTo(207.36,111.92);
starPoints2.lineTo(203.7,105.75);
starPoints2.lineTo(201.94,98.18);
starPoints2.lineTo(202.34,90.12);
starPoints2.lineTo(204.86,83.4);
starPoints2.lineTo(210.01,76.81);
starPoints2.lineTo(217.49,71.33);
starPoints2.lineTo(227.17,67.31);
starPoints2.lineTo(238.35,65.2);
starPoints2.lineTo(243.99,64.95);
starPoints2.lineTo(255.92,66.06);
starPoints2.lineTo(266.21,69.28);
starPoints2.lineTo(274.98,74.44);
starPoints2.lineTo(280.64,80.19);
starPoints2.lineTo(284.02,86.85);
starPoints2.lineTo(285.26,94.52);
starPoints2.lineTo(284.27,102.84);
starPoints2.lineTo(281.24,109.66);
starPoints2.lineTo(276.03,115.43);
starPoints2.lineTo(267.89,120.46);
starPoints2.lineTo(257.68,123.93);
starPoints2.lineTo(245.79,125.33);
*/
var smileyEye1Path = new THREE.Path();

笑脸1Path.moveTo(221.69,258.13);
笑脸1Path.lineTo(215.2,255.08);
笑脸1Path.lineTo(210.86,250.57);
笑脸1Path.lineTo(208.4,244.49);
笑脸1Path.lineTo(207.92,237.03);
笑脸1Path.lineTo(209.69,230.71);
笑脸1Path.lineTo(213.82,224.85);
笑脸1Path.lineTo(220.9,219.34);
笑脸1Path.lineTo(230.95,214.67);
笑脸1Path.lineTo(245.76,210.86);
笑脸1Path.lineTo(266.59,208.36);
笑脸1Path.lineTo(269.48,208.76);
笑脸1Path.lineTo(269.99,212.88);
笑脸1Path.lineTo(269.99,244.81);
笑脸1Path.lineTo(269.34,247.02);
笑脸1Path.lineTo(266.07,250.04);
笑脸1Path.lineTo(255.27,255.23);
笑脸1Path.lineTo(242.52,258.58);
笑脸1Path.lineTo(230.57,259.43);
笑脸1Path.lineTo(221.69,258.13);

/*
笑脸1Path.moveTo(238.44,116.65);
笑脸1Path.lineTo(231.99,114.29);
笑脸1Path.lineTo(227.23,110.22);
笑脸1Path.lineTo(223.94,104.53);
笑脸1Path.lineTo(222.41,96.92);
笑脸1Path.lineTo(223.05,88.57);
笑脸1Path.lineTo(225.65,82.21);
笑脸1Path.lineTo(230.07,77.36);
笑脸1Path.lineTo(235.93,74.4);
笑脸1Path.lineTo(243.68,73.34);
笑脸1Path.lineTo(246.08,73.43);
笑脸1Path.lineTo(253.37,75.08);
笑脸1Path.lineTo(258.65,78.43);
笑脸1Path.lineTo(262.47,83.41);
笑脸1Path.lineTo(264.59,90.25);
笑脸1Path.lineTo(264.64,98.93);
笑脸1Path.lineTo(262.63,106.12);
笑脸1Path.lineTo(258.87,111.5);
笑脸1Path.lineTo(253.73,115.1);
笑脸1Path.lineTo(246.81,116.94);
笑脸1Path.lineTo(238.44,116.65);
*/
var starShape = starPoints2;

starShape.holes.push(smileyEye1Path);

    变种挤压设置 = {
        //大小：1，高度：1，曲线段：100，步长= 10，
        // 字体，粗细，样式，
        数量：20，
        bevelEnabled：真，
        斜面厚度：0.5，
        斜角尺寸：0.5，
        bevelSegments: 8,
        // 拉伸路径：
        //弯曲路径：
        材料：0，
        挤出材料：1
        //,
        //uvGenerator: BoundingUVGenerator
       //uvGenerator: THREE.ExtrudeGeometry.WorldUVGenerator
    };

    var starGeometry = new THREE.ExtrudeGeometry（starShape，extrusionSettings）；

    var materialFront = new THREE.MeshLambertMaterial（{颜色：0xffff00，环境：0xffff00，过度绘制：false，透明：false，不透明度：1.0，侧面：THREE.DoubleSide}）；
    var materialSide = new THREE.MeshLambertMaterial（{颜色：0xff8800，环境：0xff8800，过度绘制：false，透明：false，不透明度：1.0，侧面：THREE.DoubleSide}）；

//var crateTexture = new THREE.ImageUtils.loadTexture('http://www.kahkonen.com/asiakkaat/crate2.gif');
//var crateTexture = new THREE.ImageUtils.generateDataTexture(10,10,{r:255,g:0,b:0});

//var materialFront = new THREE.MeshBasicMaterial( { map: crateTexture } );

var materialArray = [ materialFront, materialSide ];
var materialArray = [ materialFront, materialSide ];

var starMaterial = new THREE.MeshFaceMaterial(materialArray);

    var star = new THREE.Mesh(starGeometry, starMaterial);

    star.position.set(-150,-150,0);
    场景.add(star);
/*  
    // 为模型添加线框
    var wireframeTexture = new THREE.MeshBasicMaterial（{颜色：0x000000，线框：真，透明：假}）；
    var star = new THREE.Mesh(starGeometry,wireframeTexture);
    星.position.set(50,10,0);
    场景.add(star);
*/
对象.push(明星);

// 投影仪
投影仪=新三。投影仪（）；

// 监听器
document.addEventListener('mousedown', onDocumentMouseDown, false)

// 键盘处理程序
函数 onDocumentMouseDown( 事件 ) {

    event.preventDefault();

    var 向量 = 新的 THREE.Vector3(
        ( event.clientX / window.innerWidth ) * 2 - 1,
        - ( event.clientY / window.innerHeight ) * 2 + 1,
        0.5);

    投影仪.unprojectVector（矢量，相机）；

    var ray = new THREE.Ray(camera.position, vector.subSelf(camera.position).normalize());

    var intersects = ray.intersectObjects( 对象 );    

    if ( intersects.length > 0 ) {

        相交[0].object.callback();

    }

}

// 使成为
函数渲染（）{

    控制.更新（）

    renderer.render（场景，相机）；
}

// 动画            
（函数动画（）{

    requestAnimationFrame( 动画 );
    使成为（）;
}());

```

我试图通过附加纹理来去除伪影，但根本没有显示纹理：

![在此处输入图像描述](https://i.stack.imgur.com/4h2Hd.png)

其他问题（可能与工件问题相关或不相关）是可以通过边缘看到背景。

纹理不是必须的，但去除伪影是必须的。

我用来添加纹理的代码如下，小提琴中的完整代码（链接在代码之后）：

`var crateTexture = new THREE.ImageUtils.loadTexture( '[http://www.kahkonen.com/asiakkaat/crate.gif](http://www.kahkonen.com/asiakkaat/crate.gif)'); var crateTexture = new THREE.ImageUtils.generateDataTexture(10,10,{r:255,g:0,b:0}); var materialFront = new THREE.MeshBasicMaterial( { map: crateTexture } );`

`// [http://jsfiddle.net/pHn2B/27/](http://jsfiddle.net/pHn2B/27/)`

示例图像来自 Chrome。同样的行为也发生在 Firefox 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:32:16.923

`CanvasRenderer`这是由 z 缓冲问题引起的已知限制。您的几何形状具有许多细长的面，这使情况变得更糟。模型使用 正确渲染`WebGLRenderer`。

`ExtrudeGeometry`最初是为文本编写的，如果您查看它生成的 UV，它只使用 UV 的顶点位置的 x 和 y 分量，在您的情况下，产生超出范围 [ 0, 1 ] 的值. 您可以选择在回调函数中提供自己的 UV 生成器。

确保您可以先成功地将纹理添加到立方体。

三.js r.58

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T04:11:26.773

仅供参考。@Westlangley 的回答让我找到了正确的方向来获得形状上的纹理。关键是将值从一个范围缩放到另一个范围，从世界坐标到形状内部 UV 范围，该范围必须为 0-1。

所以我复制了 THREE.ExtrudeGeometry.WorldUVGenerator 并将其重命名为 THREE.ExtrudeGeometry.BoundingBoxUVGenerator 并在成员函数 generateTopUV() 中替换了这些行：

```
        返回 [
            新的 THREE.Vector2(ax, ay),
            新的 THREE.Vector2(bx, by ),
            新的 THREE.Vector2(cx, cy)
        ];

```

用这些：

```
    var bb = extrudedShape.getBoundingBox();
    var bb_minX = bb.minX;
    var bb_minY = bb.minY;
    var bb_width = bb.maxX - bb_minX;
    var bb_height = bb.maxY - bb_minY;
        如果 (bb_width == 0) bb_width = 1;
        如果 (bb_height == 0) bb_height = 1;
        返回 [新的 THREE.Vector2( (ax - bb_minX) / bb_width, (ay - bb_minY) / bb_height ),
            新的 THREE.Vector2( (bx - bb_minX) / bb_width, (by - bb_minY) / bb_height ),
            新的 THREE.Vector2( (cx - bb_minX) / bb_width, (cy - bb_minY) / bb_height )
        ];

```

并且纹理“神奇地”出现在正确的位置！

[（对于从https://github.com/mrdoob/three.js/issues/1811](https://github.com/mrdoob/three.js/issues/1811)尝试过类似命名函数的人。它不起作用，因为范围转换是以某种奇怪的方式进行的。）

这也适用于顶点坐标确实在 0-1 范围内的情况，以及坐标为负数的情况。如果由于某种原因宽度和高度为 0，则返回 0。

对于大多数可能的目的，这比默认的 THREE.ExtrudeGeometry.WorldUVGenerator 有用得多。我什至无法想象默认生成器的任何用途，因为它仅适用于坐标在 0-1 范围内的顶点。但我是three.js 的新手，可能有一些我还无法想象的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-01T16:25:50.910

我以前也有同样的问题。
我还替换了成员函数 generateSideWallUV()
这些行：

```
if ( Math.abs( ay - by ) < 0.01 ) {
            return [
                new THREE.Vector2( ax, 1 - az ),
                new THREE.Vector2( bx, 1 - bz ),
                new THREE.Vector2( cx, 1 - cz ),
                new THREE.Vector2( dx, 1 - dz )
            ];
} else {
            return [
                new THREE.Vector2( ay, 1 - az ),
                new THREE.Vector2( by, 1 - bz ),
                new THREE.Vector2( cy, 1 - cz ),
                new THREE.Vector2( dy, 1 - dz )
            ];
        } 
```

这些行：

```
var amount = extrudeOptions.amount;
if ( Math.abs( ay - by ) < 0.01 ) {
            return [
                new THREE.Vector2( (ax - bb_minX) / bb_width, 1-(az / amount) ),
                new THREE.Vector2( (bx - bb_minX) / bb_width, 1-(bz  / amount) ),
                new THREE.Vector2( (cx - bb_minX) / bb_width, 1-(cz  / amount) ),
                new THREE.Vector2( (dx - bb_minX) / bb_width, 1- (dz  / amount) )
            ];
        } else {
            return [
                new THREE.Vector2( (ay - bb_minY) / bb_height, 1-(az / amount )),
                new THREE.Vector2( (by - bb_minY) / bb_height, 1-(bz / amount )),
                new THREE.Vector2( (cy - bb_minY) / bb_height, 1-(cz / amount )),
                new THREE.Vector2( (dy - bb_minY) / bb_height, 1-(dz / amount ))
            ];
        }` 
```

# php - PHP中的爆炸字符串用于将一部分转换为大写，另一部分转换为小写？

> ID：16106250
> 
> 赞同：2
> 
> 时间：2013-04-19T13:52:13.247
> 
> 标签：php

有谁知道如何在 PHP 中分解一些字符串，例如：

```
<?
// Submitted through register form

$first_name = $_POST['first_name'];

// example $_POST['first_name'] is somebody
// and need to be exploded at position 1 or by letter 'o' in this example
// but that is not always letter o
// I made also 

$first_name_lc = strtolower($first_name);

// converted all to lowers and now
// exploding at letter o

$explode_rule = 'o';

$first_name_lc_exploded = explode($explode_rule, $first_name_lc);

// now in example we have $first_name_lc_exploded[0] and $first_name_lc_exploded[1]
// $first_name_lc_exploded[0] is now 's' and $first_name_lc_exploded[1] is 'mebody'
// now new first name is $first_name_lc_exploded[0].$explode_rule.$first_name_lc_exploded[1]
// but $first_name_lc_exploded[0] need to be converted in upper and only that, nothing else
// than $first_name_lc_exploded[0] is 'S' instead of 's'
// and first_name is now 'Somebody' instead of 'somebody'
?> 
```

所以现在，问题是：如何用在字符串中查找第二个字母的东西替换字母 o，并用那个规则，一些变量来分解它。有人有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:54:09.377

如果您只是想将第一个字母大写，请尝试`ucfirst(strtolower($first_name));`

如果要将空格后出现的所有字母大写，请尝试`ucwords(strtolower($first_name));`;

如果您真的想在第二个字母上拆分字符串，请使用`substr();`拉出您想要的字符串部分。

另一种选择是使用`preg_split();`正则表达式来指示字符串的形状以及您希望它如何拆分。

或者，你总是可以`explode($first_name[1], $first_name, 2));`

[http://php.net/manual/en/function.ucfirst.php](http://php.net/manual/en/function.ucfirst.php)

[http://php.net/manual/en/function.ucwords.php](http://php.net/manual/en/function.ucwords.php)

[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

[http://php.net/manual/en/function.preg-split.php](http://php.net/manual/en/function.preg-split.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:54:38.827

有一个 PHP 函数可以使第一个字母只有大写：

[http://php.net/manual/en/function.ucfirst.php](http://php.net/manual/en/function.ucfirst.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:56:25.967

试试[ucfirst](http://php.net/manual/en/function.ucfirst.php)！为什么每次都想重新发明轮子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T13:57:38.567

所以你想转换字符串的第一个字母。我对吗？

PHP 中有两个预先构建的函数可以做到这一点。

1.  [ucfirst()](http://php.net/manual/en/function.ucfirst.php)
2.  [ucwords()](http://php.net/manual/en/function.ucwords.php)

检查它的手册。

# javascript - KineticJS：在固定舞台上模拟滚动的有效方法

> ID：16106251
> 
> 赞同：0
> 
> 时间：2013-04-19T13:52:14.090
> 
> 标签：javascript, canvas, kineticjs

我有一个页面的布局方式与您在具有设定高度的包装器 div 内布置具有三个面板的锦标赛括号的方式非常相似。两个绿色面板是标准 HTML 列表，带有`overflow-y: scroll`, 所以它们可以上下滚动。白色面板是 KineticJS 舞台，不会滚动。

每条水平蓝线都“附加”到其中一个列表中的 LI。当用户向下滚动列表时，LI 向上移动（并且可能超出视野），水平线需要与它们一起“移动”，而垂直蓝线也需要这样做，以产生它们的错觉也在滚动。红色圆圈固定在中心。

现在，基于我对 HTML5 Canvases 和 KineticJS 的有限知识，我似乎需要添加一个`.scroll()`事件处理程序来调整线上的点并重绘图层。

我的问题是：这是实现这种效果的最有效方法吗？如果不是，我应该怎么做？

![粗图](https://i.stack.imgur.com/XBuCk.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:55:16.890

**就像所有游戏一样做。**

创建 2 个“额外”动力学组，每个组包含一组左水平+左垂直和右水平+右垂直线。

将新组放置在画布上方和下方的“舞台外”（我们称其为起始位置）。

![在此处输入图像描述](https://i.stack.imgur.com/zLCwz.png)

当一个新的列表项从顶部/底部滚动到视图中时，也将相应的新组滚动到视图中。

在任何列表项滚出屏幕后，再次将该“额外”组滚出舞台。

这是关键......当任何“额外”组离开舞台时，您会将所有内容设置回起始位置。

这会产生无限括号线的错觉。

# ios - iPad键盘在方向更改时更改视口

> ID：16106254
> 
> 赞同：4
> 
> 时间：2013-04-19T13:52:32.707
> 
> 标签：ios, web-applications, mobile-safari, viewport

我对 iPad3 iOS6 有一个非常独特的错误。我有一个网站需要在主屏幕上作为 Web 应用程序进行查看。

我有一个非常简单的视口标签：`<meta name="viewport" content="width=device-width" />`我正在使用[https://github.com/scottjehl/iOS-Orientationchange-Fix](https://github.com/scottjehl/iOS-Orientationchange-Fix)来消除高级视口错误。

但是，当打开键盘并输入输入并决定切换横向本身时，视口不会正确缩放。反之亦然。当网站在 Safari 浏览器中时不会发生这种情况，只有当它是主屏幕上的 webApp 时才会发生。

我已经测试了所有可能的视口组合，并删除了所有类型的 js、css。即使使用纯 html，错误也会不断发生。

任何帮助将不胜感激！

# java - 线程安全单例类

> ID：16106260
> 
> 赞同：69
> 
> 时间：2013-04-19T02:48:13.287
> 
> 标签：java, multithreading, singleton

我写了一个下面的单例类。我不确定这是否是线程安全的单例类？

```
public class CassandraAstyanaxConnection {

    private static CassandraAstyanaxConnection _instance;
    private AstyanaxContext<Keyspace> context;
    private Keyspace keyspace;
    private ColumnFamily<String, String> emp_cf;

    public static synchronized CassandraAstyanaxConnection getInstance() {
        if (_instance == null) {
            _instance = new CassandraAstyanaxConnection();
        }
        return _instance;
    }

    /**
     * Creating Cassandra connection using Astyanax client
     *
     */
    private CassandraAstyanaxConnection() {

        context = new AstyanaxContext.Builder()
        .forCluster(ModelConstants.CLUSTER)
        .forKeyspace(ModelConstants.KEYSPACE)
        .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
            .setDiscoveryType(NodeDiscoveryType.RING_DESCRIBE)
        )
        .withConnectionPoolConfiguration(new ConnectionPoolConfigurationImpl("MyConnectionPool")
            .setPort(9160)
            .setMaxConnsPerHost(1)
            .setSeeds("127.0.0.1:9160")
        )
        .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
            .setCqlVersion("3.0.0")
            .setTargetCassandraVersion("1.2"))
        .withConnectionPoolMonitor(new CountingConnectionPoolMonitor())
        .buildKeyspace(ThriftFamilyFactory.getInstance());

        context.start();
        keyspace = context.getEntity();

        emp_cf = ColumnFamily.newColumnFamily(
            ModelConstants.COLUMN_FAMILY, 
            StringSerializer.get(), 
            StringSerializer.get());
    }

    /**
     * returns the keyspace
     * 
     * @return
     */
    public Keyspace getKeyspace() {
        return keyspace;
    }

    public ColumnFamily<String, String> getEmp_cf() {
        return emp_cf;
    }
} 
```

谁能帮我这个？对我上面的 Singleton 类的任何想法都会有很大帮助。

**更新代码：-**

我正在尝试在我的代码中加入波西米亚建议。这是更新的代码，我得到了-

```
public class CassandraAstyanaxConnection {
    private static class ConnectionHolder {
        static final CassandraAstyanaxConnection connection = new CassandraAstyanaxConnection();
    }
    public static CassandraAstyanaxConnection getInstance() {
        return ConnectionHolder.connection;
    }
    /**
     * Creating Cassandra connection using Astyanax client
     *
     */
    private CassandraAstyanaxConnection() {
        context = new AstyanaxContext.Builder()
        .forCluster(ModelConstants.CLUSTER)
        .forKeyspace(ModelConstants.KEYSPACE)
        .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
        .setDiscoveryType(NodeDiscoveryType.RING_DESCRIBE)
                )
                .withConnectionPoolConfiguration(new ConnectionPoolConfigurationImpl("MyConnectionPool")
                .setPort(9160)
                .setMaxConnsPerHost(1)
                .setSeeds("127.0.0.1:9160")
                        )
                        .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
                        .setCqlVersion("3.0.0")
                        .setTargetCassandraVersion("1.2"))
                        .withConnectionPoolMonitor(new CountingConnectionPoolMonitor())
                        .buildKeyspace(ThriftFamilyFactory.getInstance());
        context.start();
        keyspace = context.getEntity();
        emp_cf = ColumnFamily.newColumnFamily(
                ModelConstants.COLUMN_FAMILY, 
                StringSerializer.get(), 
                StringSerializer.get());
    }
    /**
     * returns the keyspace
     * 
     * @return
     */
    public Keyspace getKeyspace() {
        return keyspace;
    }
    public ColumnFamily<String, String> getEmp_cf() {
        return emp_cf;
    }
} 
```

谁能看一下，让我知道这次我做对了吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2013-04-19T14:08:32.083

您正在实现[*延迟初始化*](http://en.wikipedia.org/wiki/Lazy_initialization)模式 - 在第一次使用时创建实例。

但是有一个简单的技巧可以让你编写一个不需要同步的线程安全*实现*！它被称为[*Initialization-on-demand holder idiom*](http://en.wikipedia.org/wiki/Initialization-on-demand_holder_idiom)，它看起来像这样：

```
public class CassandraAstyanaxConnection {

    private CassandraAstyanaxConnection(){ }        

    private static class Holder {
       private static final CassandraAstyanaxConnection INSTANCE = new CassandraAstyanaxConnection();
    }

    public static CassandraAstyanaxConnection getInstance() {
        return Holder.INSTANCE;
    }
    // rest of class omitted
} 
```

此代码在第一次调用 时初始化实例`getInstance()`，重要的是，由于类加载器的合同，不需要同步：

*   类加载器在第一次访问类时加载类（在这种情况下`Holder`，唯一的访问是在`getInstance()`方法内）
*   当一个类被加载，并且在任何人可以使用它之前，所有的静态初始化器都保证被执行（那是当`Holder`'s 的静态块触发时）
*   类加载器有自己的内置同步功能，可以保证上述两点是线程安全的

这是我在需要延迟初始化时使用的一个巧妙的小技巧。`final`即使它是惰性创建的，您也可以获得实例的奖励。还要注意代码是多么干净和简单。

**编辑：**您应该将所有构造函数设置为私有或受保护。设置和清空私有构造函数将完成工作

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-09-13T11:37:28.950

以上所有方法都在热切地初始化对象。这个怎么样。这将帮助你懒惰地初始化你的类。您可能有很重的物体，并且您不想在启动时进行初始化。

```
public class MySinglton { 

  private MySinglton (){}

  private static volatile MySinglton s;

  public static MySinglton getInstance(){

   if (s != null ) return s;

    synchronized(MySinglton.class){

     if (s == null ) {

      s = new MySinglton();
     }
  }

  return s;

}

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T14:19:13.330

不，如果公共方法上返回的值是可更改的对象，则它不是线程安全的。

使此类成为线程安全的一种方法是将其更改为不可变的。

为此，您可以像这样更改此方法：

```
public Keyspace getKeyspace() {
    // make a copy to prevent external user to modified or ensure that Keyspace is immutable, in that case, you don't have to make a copy
    return new Keyspace( keyspace );
}

public ColumnFamily<String, String> getEmp_cf() {
    // Same principle here. If ColumnFamily is immutable, you don't have to make a copy. If its not, then make a copy
    return new ColumnFamily( emp_cf );
} 
```

在这本书[Java Concurrency in Practice 中](https://rads.stackoverflow.com/amzn/click/com/0321349601)，您可以看到不变性的原理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-02T12:16:36.190

正如这篇伟大的文章中提到[的](http://www.ibm.com/developerworks/java/library/j-dcl/index.html)：

> 这个问题的最佳解决方案是 [...] 使用静态字段

```
public class Singelton {

    private static final Singelton singleObject = new Singelton();

    public Singelton getInstance(){
        return singleObject;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T13:56:21.683

不，这似乎不是*线程*安全的。在调用 之后，您似乎可以访问可变数据`getInstance`，其中锁定将被释放。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-03T20:39:44.603

这应该是使用双重检查锁定原理实现单例模式的正确方法：

```
class MySinglton { 

    private static volatile MySinglton instance;

    private MySinglton() {}

    public static MySinglton getInstance() {
        if (instance == null) {
            synchronized (MySinglton.class) {
                if (instance == null) {
                    instance = new MySinglton();
                }
            }
        }
        return instance;
    }

} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-19T13:10:29.607

我认为这会做同样的事情，而不必每次都检查。静态与第一次检查相同

```
public class Singl {        
    private static Singl _instance;
    //other vars        
    static{
            //synchronized(Singl.class){//do not need
                    _instance = new Singl();
            //}
    }

     public static Singl getInstance() {
             return _instance;

     }

     private Singl(){
             //initizlize
     }

} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-01-08T09:43:03.543

在 java 1.5 版本之后我们可以使用 volatile。如果我们使用 volatile java key ward，我们可以创建线程安全的单例类，因为实例变量也与其他线程共享。

```
public class SingleWithThreadSafe {

    // create an object static referance of SingleWithThreadSafe with volatile
    private static volatile SingleWithThreadSafe instance = null;

    // if we make the constructor private so that this class cannot be
    // instantiated from out side of class
    private SingleWithThreadSafe() {
    }

    // Get only object available
    public static SingleWithThreadSafe getInstance() {
        if (instance == null) {
            instance = new SingleWithThreadSafe();
        }
        return instance;
    }

    public void showMessage() {
        System.out.println("Hello World!");
    }
} 
```

# ruby-on-rails-3.2 - 为什么 `assets` 目录 * 有时 * 以我的 `image_tag` 路径为前缀？

> ID：16106263
> 
> 赞同：0
> 
> 时间：2013-04-19T13:52:48.313
> 
> 标签：ruby-on-rails-3.2

我有一个简单的`Photo`模型：

```
class Photo < ActiveRecord::Base
  attr_accessible :image, :thumb, :title
end 
```

在特定照片的记录视图中，erb：

```
<p id="notice"><%= notice %></p>
<p><%= image_tag @photo.image if @photo.image? %></p>
<%= link_to 'Edit', edit_photo_path(@photo) %> |
<%= link_to 'Back', photos_path %> 
```

生成以下 html 片段（在 body 标记中）：

```
<p id="notice"></p>
<p><img alt="Img_8283" src="/photo/image/1/IMG_8283.JPG" /></p>
<a href="/photos/1/edit">Edit</a> |
<a href="/photos">Back</a> 
```

这很好，因为照片存储在`public/photo/image/1/IMG_8283.JPG`.

但是，在索引视图中，我有这个 erb 代码：

```
<% @photos.each do |photo| %>
  <tr>
    <td><%= photo.title %></td>
    <td><%= photo.thumb %> | <%= image_tag photo.thumb if photo.thumb? %></td>
    <td><%= link_to 'Show', photo %></td>
  </tr>
<% end %> 
```

这会产生这个 html 源代码片段：

```
<tr>
  <td>IMG_8283.JPG</td>
  <td>photo/thumb/1/IMG_8283.JPG | <img alt="Img_8283" src="/assets/photo/thumb/1/IMG_8283.JPG" /></td>
  <td><a href="/photos/1">Show</a></td>
</tr> 
```

***为什么在第二种情况下有`/asset`前缀而不是第一种？***我本来希望`<img>`标签引用相同的基本位置路径（这也是我的偏好）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:27:32.623

在第二个示例中，当您使用 时`image_tag`，您正在使用[资产管道](http://guides.rubyonrails.org/asset_pipeline.html)中的函数来访问照片，这意味着`image_tag`会将您的路径附加到`assets/`，以便找到您要查找的照片。

但是，如果其中已经有一个文件，`public/assets...`它仍然会被提供，给你带来不一致的问题。

# javascript - 在 AngularJS 中使用来自 JSON 的属性创建一个选择

> ID：16106264
> 
> 赞同：0
> 
> 时间：2013-04-19T13:52:48.453
> 
> 标签：javascript, angularjs

我想使用来自 JSON（它在我的控制器中定义）的属性（选择 id，选择类）创建一个选择。

有办法做到这一点吗？或者我需要用选择的代码做动态部分吗？

假设我不知道 JSON 中有哪些属性。

谢谢！

**更新：**

例如，如果我有这个 JSON：

```
{ "topology" : [ 
        { "name": "id", "value":"topology_id"  },
        { "name": "class", "value": "topology_class1 topology_class2" },
        { "name": "diasbled", "value": "disabled" } 
    ]
} 
```

我想获得这个选择标签：

```
<select id="topology_id" class="topology_class1 topology_class2" disabled="disabled"></select> 
```

如果我有另一个带有另一个属性的 JSON，那么这些另一个属性将在我的选择标记中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:41:39.947

使用更新后的 JSON 文件，您可以执行以下操作：

```
// Your template
<select dynamic-attributes='topology'></select>

// The dynamic attributes directive
angular.module('yourModule')
    .directive('dynamicAttributes', ['jsonData', function (jsonData) {
        return function (scope, element, attrs) {
            // Get the attribute data from a service.
            var attributes = jsonData.get(attrs.dynamicAttributes);
            // Add each of the attributes to the element.
            attributes.forEach(function (attribute) {
                element.attr(attribute.name, attribute.value);
            });
        }
    }]);

// The jsonData service
angular.module('yourModule')
    .service('jsonData', function () {
        // This would really come from the server.
        var json = { 
            "topology" : [ 
                { "name": "id", "value":"topology_id"  },
                { "name": "class", "value": "topology_class1 topology_class2" },
                { "name": "diasbled", "value": "disabled" } 
            ]
        };

        // Public API
        return {
            get: function (name) {
                return json[name];
            }
        };
    }); 
```

这是代码的工作小提琴：http: [//jsfiddle.net/nfreitas/SmWE8/](http://jsfiddle.net/nfreitas/SmWE8/)（不要介意样式，它在那里表明正在添加属性。）

# html - 如何像附加的图像一样向边框添加褪色效果

> ID：16106265
> 
> 赞同：3
> 
> 时间：2013-04-19T13:52:54.773
> 
> 标签：html, css, sass

我正在尝试实现这样的 div。我有蓝色背景和前景色。但我不确定如何让边框褪色。

背景颜色：- #93cde9

前景色：-#c4e4f3

有人可以帮我吗？

![所需效果](https://i.stack.imgur.com/tUHwv.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:09:41.757

```
div {
   box-shadow: 0px 0px 8px #ffffff; 
   -webkit-box-shadow: 0px 0px 8px #ffffff; 
   -ms-box-shadow: 0px 0px 8px #ffffff;
   -o-box-shadow: 0px 0px 8px #ffffff; 
} 
```

看：http: [//jsfiddle.net/waS6F/2/](http://jsfiddle.net/waS6F/2/) :)

IE 的解决方案： [IE7 和 IE8](https://stackoverflow.com/questions/8181699/box-shadow-in-ie7-and-ie8)中的盒子阴影，IE8 的[CSS3 盒子阴影效果？](https://stackoverflow.com/questions/10899745/css3-box-shadow-effect-for-ie8)

希望有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:56:48.893

也许与`box-shadow?`

这是一个简单的小提琴：

[http://jsfiddle.net/GLmQd/1/](http://jsfiddle.net/GLmQd/1/)

这里有一些链接供进一步阅读

[http://css-tricks.com/snippets/css/css-box-shadow/](http://css-tricks.com/snippets/css/css-box-shadow/)

[https://developer.mozilla.org/en-US/docs/CSS/box-shadow](https://developer.mozilla.org/en-US/docs/CSS/box-shadow)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:16:01.663

这就是我实现它的方式：-

html:-

```
<div class="shadow-efect>
<div> 
```

萨斯：-

```
.shadow-effect
  background-color: #b9daeb
  -webkit-box-shadow: 0 0 10px 10px #b9daeb
  -moz-box-shadow: 0 0 10px 10px #b9daeb
  box-shadow: 0 0 10px 10px #b9daeb 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T14:00:34.687

例如，您可以使用它。

```
<div id="img"><img ... /></div>

<style type="text/css">

#img{
border-style:1px solid green;
opacity: 0.3;
-webkit-transition: opacity .1s ease-in-out;
-moz-transition: opactiy .1s ease-in-out;
-ms-transition: opacity .1s ease-in-out;
-o-transition: opacity .1s ease-in-out;
transition: opacity .1s ease-in-out;
}

#img:hover{
opacity: 1;
    -webkit-transition: opacity .1s ease-in-out;
    -moz-transition: opactiy .1s ease-in-out;
    -ms-transition: opacity .1s ease-in-out;
    -o-transition: opacity .1s ease-in-out;
    transition: opacity .1s ease-in-out;
}
</stlye> 
```

# c# - 从通用动态数据中删除删除按钮

> ID：16106267
> 
> 赞同：0
> 
> 时间：2013-04-19T13:53:03.220
> 
> 标签：c#, asp.net, asp.net-dynamic-data

（asp.net 动态数据）在 db.cs 文件中，我声明了以下内容（与“发票信息”表有关）

```
[ScaffoldTable(true)]
[DisplayName("Invoice Info")]
[MetadataType(typeof(Invoice_Info_MetaData))]
[DropDownList(Role = "Role_AllPowerfulGroup")]
partial class Invoice_Info
{
}

public class Invoice_Info_MetaData
{
    [Display(Name = "id", Order = 10)]
    public object id { get; set; }

    [Display(Name = "Name", Order = 20)]
    [Required()]
    public object Name { get; set; }

    [Display(Name = "Address", Order = 30)]
    [Required()]
    public object Address { get; set; }

    [Display(Name = "County", Order = 40)]
    [Required()]
    public object County { get; set; } 
```

在屏幕上显示为： ![在此处输入图像描述](https://i.stack.imgur.com/dEuXR.png)

我不希望用户能够删除它，那么如何从屏幕选项中删除它？？（红色箭头指向的图标）谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:24:53.907

您应该`List.aspx`为（从项目的 PageTemplates 文件夹中的 List.aspx 复制）创建自定义页面`Invoice Info table`，然后您可以使用新自定义页面上的*删除*按钮删除代码（请参阅 GridView 中带有 LinkBut​​ton 控件的 ItemTemplate）。您还可以`RowDataBound`在自定义页面上向 GridView 添加事件并在代码隐藏中实现删除按钮的隐藏：

```
protected void gvInvoiceInfo_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            LinkButton delete = (LinkButton) e.Row.FindControl("DeleteLinkButton");
            delete.Visible = false;
        }
    } 
```

GridView 的 TemplateField 中带有操作`DeleteLinkButton`的控件 ID在哪里。`LinkButton`

有关 ASP.NET 动态数据中的页面自定义的更多信息，您可以在[如何：使用自定义页面模板自定义单个表格的布局中](http://msdn.microsoft.com/en-us/library/cc488537%28v=vs.100%29.aspx)找到。

**编辑：**

我想提请您注意，默认情况下可以从 Details.aspx 页面中删除表项。因此，您还应该创建自定义 Details.aspx 页面，以防止从默认 Details.aspx 页面中删除记录。

因此，您应该有两个自定义页面：

`~/DynamicData/CustomPages/InvoiceInfo/List.aspx`

和

`~/DynamicData/CustomPages/InvoiceInfo/Details.aspx`.

**编辑：**

为了在动态数据站点中实施更集成的安全方法，请参阅 Steve 在[Securing Dynamic Data 4 (Replay)](http://csharpbits.notaclue.net/2010/06/securing-dynamic-data-4-replay.html)中的解决方案。

# 2d - 点的 2D 细节层次 (LOD) 算法

> ID：16106276
> 
> 赞同：0
> 
> 时间：2013-04-19T13:53:53.323
> 
> 标签：2d, qwt

我正在使用 Qwt 在 Qt 中创建[散点图](http://qwt.sourceforge.net/scatterscreenshots.html)。用户可以选择将几个点集附加到散点图中。但是性能是个问题。如果总点数超过 10 000 则事情会变慢。

因此，我正在寻找 C/C++ 中的算法实现，或者是一种相对简单的 2D LOD 算法，它计算原始总点集的子集并显示它。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:15:48.237

没有回答您的问题，但我建议在 Windows 上使用 Qwt 6.0 时使用 Qwt 6.1 - 或至少启用 QwtPlotCurve::CacheSymbols。

Qwt 6.1 重新引入了几个优化 fe QwtPlotCurve::FilterPoints 以避免重复绘制（点映射到同一位置）。QwtPlotCurve 会根据运行时环境自动检测符号的缓存。

还可以查看 Qwt 6.1 中的散点图示例，显示 100000 个点的曲线。这可能是使用 Qwt 实现散点图的最快方法（在 QImage 中设置多线程 RGB 值而不使用 QPainter ），但这种方法仅适用于将点显示为点。

乌韦

# asp.net - 将 Excel 数据上传到数据库失败

> ID：16106279
> 
> 赞同：0
> 
> 时间：2013-04-19T13:53:55.297
> 
> 标签：asp.net

我开发了一个 ASP.NET 网站，它上传 Excel 文件并将其数据放入数据库。这在我的系统上完美运行，但是当我在服务器上运行它时，它失败了。我没有收到任何错误消息。`"Server Error in '/' Application."` 当我上传 Excel 文件时，页面显示错误。文件名到达上传文件夹。其名称已输入数据库，但数据失败。提前致谢。

显示错误的代码：

```
 string excelConnectionString = "provider=Microsoft.jet.oledb.4.0;data source=" + xlspath + ";extended properties='Excel 8.0;HDR=YES;'";
    OleDbConnection excelConnection = new OleDbConnection(excelConnectionString);
    excelConnection.Open();
    OleDbCommand ocmd = new OleDbCommand("Select * from [sheet$]", excelConnection);
    OleDbDataReader odr = ocmd.ExecuteReader();
    string name = FileUpload1.FileName;
    string Customer = "";
    string DPS = "";
    string FSC = "";
    string FFSC = "";
    string FFSR = "";
    string DPC = "";
    string RAG = "";
    string Comments = "";

    while (odr.Read())
    {
        Customer = valid(odr, 0);
        DPS = valid(odr, 1);
        FSC = valid(odr, 2);
        FFSC = valid(odr, 3);
        FFSR = valid(odr, 4);
        DPC = valid(odr, 5);
        RAG = valid(odr, 6);
        Comments = valid(odr, 7);
        insertdataintosql(name, Customer, DPS, FSC, FFSC, FFSR, DPC, RAG, Comments);
    }
    excelConnection.Close();
    Label2.Text = "File Uploaded Sucessfully";
    Label2.Visible = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:27:02.830

首先，我们不知道错误是什么（显然）。第一步是获取详细的错误。这里有几种方法可以做到这一点：

找出您收到的错误的最简单方法可能是按照我上面的评论对 web.config 和 customErrors mode="Off" 执行的操作，或者，这就是我所做的，安装 ELMAH ( [http://code.google.com/p/elmah](http://code.google.com/p/elmah) ) 到您的应用程序中。您只需从 NuGet 获取包或手动添加 elmah.dll（并进行一些简单的 web.config 修改，在我刚刚给您的 URL 中定义）。然后，您可以导航到[http://www.yourwebapp.com/Elmah.axd](http://www.yourwebapp.com/Elmah.axd)，它将向您显示所有未处理异常及其详细信息的完整列表。

当然，您要先完成 ELMAH 的基本配置才能使其正常工作。但是，从开始到结束，可能需要 10-15 分钟来设置，如果你有野心，你可以设置一个专门用于存储所有这些错误的 SQL 数据库，或者默认情况下，应用程序会将错误写入 XML格式到您的 App_Data 文件夹。它确实是一个救星，一旦你将它添加到你的项目中，你就不必删除它。

这是我在其上实施 ELMAH 的实时站点的链接：http: [//quikcapdev.capworx.net/Elmah.axd](http://quikcapdev.capworx.net/Elmah.axd)。

请记住，所有这些只是为了获取详细的错误。一旦我们有详细的错误，那么我们将能够正确回答您的问题。

# ruby-on-rails-3 - Rails3 ActionView TagHelper

> ID：16106283
> 
> 赞同：0
> 
> 时间：2013-04-19T13:53:58.337
> 
> 标签：ruby-on-rails-3, actionview, actionviewhelper

我想得到像 html 这样的输出

```
<div>
  <div/>
  <a/>
</div> 
```

为此，我编写了如下的 ruby​​ 代码

```
content_tag :div, '', class: 'handle' do
  content_tag :div, class: icon, style: 'display:inline;' do
    link_to name, edit_path(object), :remote => true
  end
end 
```

这导致`<a>`内部秒`<div>`。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:05:11.107

您将链接代码放在内部 div 中，因此在内部进行渲染。

在您的代码中，内部 div 之间的代码块将使链接在内部呈现。你需要把它带到外面

```
content_tag :div, class: icon, style: 'display:inline;' do
  the link here should be outside
end 
```

# c++ - 返回 std::vector - 正确的方法

> ID：16106290
> 
> 赞同：8
> 
> 时间：2013-04-19T13:54:12.247
> 
> 标签：c++, vector, stl

我正在尝试创建一个将返回 std::vector 的类方法，并且对执行此操作的最佳方法有点困惑。

我使用的方法是定义以下方法：

```
std::vector<double>* GetBins(void); 
```

在方法中，分配一个新的 std::vector，我用数据填充它。我正在返回一个指向这个 ie 的指针。

```
std::vector<double>* Frequency::GetBins(void) {
    std::vector<double> *rtnVec = new std::vector<double>();
    for (_itMap = _mapFreq.begin(); _itMap != _mapFreq.end(); _itMap++ ) {
        rtnVec->push_back((*_itMap).first);
    }
    return rtnVec;
 } 
```

（_itMap 是一个类定义的迭代器）。

在我的 main.cpp 中，我做了以下事情：

```
 std::vector<double>* myBins;
 myBins = myFreq3->GetBins();
 delete myBins; 
```

我知道用这种方法，除非我删除 main.cpp 代码中的指针，否则我会得到一个悬空指针，所以它已经有点“危险”了。从类方法返回新的 std::vector 的最佳方法是什么？

谢谢大家皮特

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-19T13:54:56.667

最好的方法是按值返回：

```
std::vector<double> Frequency::GetBins() {
    std::vector<double> rtnVec;
    rtnVec.reserve(_mapFreq.size()); // reserve enough size, no reallocations
    for (_itMap = _mapFreq.begin(); _itMap != _mapFreq.end(); ++_itMap ) {
        rtnVec.push_back(_itMap->first);
    }
    return rtnVec;
} 
```

然后你会使用这样的函数：

```
std::vector<double> myBins = myFreq3->GetBins();
// no need for delete! 
```

编译器可能会使用[RVO](http://en.wikipedia.org/wiki/Return_value_optimization)并且不执行任何复制。如果您使用的是 C++11，则移动语义将确保不执行任何复制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T13:57:43.673

按值返回

```
std::vector<double> Frequency::GetBins(void) {
    std::vector<double> rtnVec;

    // ...

    return rtnVec;
 } 
```

但是，如果你想通过指针返回，你可以使用智能指针：

```
std::unique_ptr<std::vector<double>> Frequency::GetBins(void) {
    std::unique_ptr<std::vector<double>> rtnVec(new std::vector<double>());

    //...

    return rtnVec;
 } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T14:18:28.160

如果你想避免复制/悬空指针/...，另一种方法是简单地`std::vector`通过引用传递你的方法：

```
void Frequency::GetBins( std::vector<double>& bins ) {
    for (_itMap = _mapFreq.begin(); _itMap != _mapFreq.end(); _itMap++ ) {
        bins->push_back((*_itMap).first);
    }
 } 
```

您只需要在之前定义它：

```
 std::vector<double> myBins;
 myFreq3->GetBins(myBins); 
```

# rest - Restlet GWT 客户端和跨域请求

> ID：16106294
> 
> 赞同：0
> 
> 时间：2013-04-19T13:54:16.350
> 
> 标签：rest, gwt, restlet, restlet-2.0

是否可以在 GWT 版本的 Restlet Client 中执行跨域请求？

我需要使用 JSON 数据从外部 API 消耗 Rest 资源（GET、POST、PUT、DELETE）。

我知道 GWT 的同源策略 (SOP)，但可能存在针对此限制的解决方法...

不再提供带有 GWT 示例的 Restlet 文档。这个链接例如：

[http://wiki.restlet.org/docs_2.1/13-restlet/27-restlet/46-restlet/112-restlet.html](http://wiki.restlet.org/docs_2.1/13-restlet/27-restlet/46-restlet/112-restlet.html)

[http://wiki.restlet.org/docs_2.1/13-restlet/275-restlet/144-restlet/189-restlet.html](http://wiki.restlet.org/docs_2.1/13-restlet/275-restlet/144-restlet/189-restlet.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:37:25.357

如果您需要调用另一个域上的服务，请使用标准 GWT [**RequestBuilder**](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/http/client/RequestBuilder.html)。

例如，请参阅：[GWT RequestBuilder - 跨站点请求](https://stackoverflow.com/questions/11121374/gwt-requestbuilder-cross-site-requests)。

你仍然想使用[**RestyGwt**](http://restygwt.fusesource.org/)。这是[**示例**](http://blog.javaforge.net/post/30469901979/gwt-rest)

看看[**JsonpRequestBuilder**](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/jsonp/client/JsonpRequestBuilder.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:40:36.263

我从未使用过`Restlet`，但它似乎在 GWT 中中继`RequestBuilder`。因此，由于`RequestBuilder`支持 CORS，gwt-restlet 应该这样做。

您可以毫无问题地将任何 GWT ajax 技术（RPC、RF 或 RequestBuilder）与 CORS 一起使用。认为 GWT 与任何其他 html/javascript 应用程序具有相同的限制，如果浏览器与 CORS 兼容（IE9 不兼容）并且服务器配置正确，则 CORS 将起作用。

话虽如此，我鼓励您尝试使用[gwtquery](http://code.google.com/p/gwtquery/)，它为您提供了一种处理 ajax 的简单方法。通常，我使用[gwtquery ajax](http://code.google.com/p/gwtquery/wiki/Ajax)来消费 3party 服务，因为它的语法和简单性。

gQuery 语法的目标是您可以轻松获取几乎 jQuery 示例并将它们移植到其中。

这是一个简单的例子：

```
 ajax(Ajax.createSettings()
   .setUrl("miservice.php")
   .setDataType("json") // txt, json, jsonp, xml
   .setType("get")     // post, get
   .setData($$("param1: 1, param2: 2")) // parameters in json, $$() creates json from string
   .setSuccess(new Function(){ // callback to be run if the request succeeds 
     public void f() {
       // The response when dataType=json is a javascript object (Properties)
       Properties json = getDataProperties();
     }
   })
 ); 
```

对于 JSON（或 XML），我使用[gQuery 数据绑定](http://code.google.com/p/gwtquery/wiki/DataBinding#JSON)将响应映射到 java 对象。

例如：

```
interface Site extends JsonBuilder {
  long getId();
  String getUrl();
  Site setId(long id);
  Site setUrl(String url);
}

...
Site site = GWT.create(Site.class);
site.load(getDataProperties();
Window.alert(site.getUrl();
... 
```

# r - 我可以在 Windows 中使用 !# Rscripts

> ID：16106295
> 
> 赞同：1
> 
> 时间：2013-04-19T13:54:17.350
> 
> 标签：r, rscript

在linux中，我曾经放过`!#/usr/bin/Rscript`这样我可以调用`myScript.R [options]`windows用正确的路径替换/usr路径C：/ Program ...不起作用（什么都没有发生）。我知道的唯一方法是做`Rscript.exe myScript.R [options]`。是否可以模仿 Unix 行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:08:10.977

如果您`cmd.exe`在 Windows 上使用默认 shell 并愿意使用第二个文件，那么您可以创建一个批处理文件`myScript.bat`，其中包含以下行：

```
Rscript.exe myScript.R %* 
```

然后像这样运行它：

```
myScript 
```

您可以在此行的末尾包含参数，但它们不应包含嵌入的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:41:31.517

格洛腾迪克是对的。我将展示另一个混合这两个文件的想法。

```
rem <- function(...) invisible(T)
rem( '
Rscript.exe %~F0
EXIT /B
rem ')
### above=BAT, below=R

cat('Hello, World', file='hello.txt') 
```

将此保存为“hello.bat”并执行它。[您可以在我的博客](http://tomizonor.wordpress.com/2013/04/20/single-script-windows/)中找到更多详细信息。

# javascript - 无法使用 JavaScript 发送 POST-JSON-Request

> ID：16106296
> 
> 赞同：1
> 
> 时间：2013-04-19T13:54:18.480
> 
> 标签：javascript, jquery, json, post, request

我尝试使用 jQuery 1.9 发送 POST-JSON-Request。

我总是在控制台中收到以下错误。

> 类型错误：this.products 未定义。this.products.push(oneProduct);

这是我的代码

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" charset="utf-8" src="resources/js/model/Product.js"></script> 
<script>
    function getdetails(){

        var p = new Product(15,11.5,"Pizza Test","P");
        var z = new Product(68,1.5,"Zutate Test","Z");

        p.addOneProduct(z);

        var request = $.ajax({
            type: "POST",
            url: "yb_test_post.php",
            dataType: "json",
            data: p
        });

        request.done(function(msg) {
            $("#msg").html( " Post parameter are: <br/>"+msg );
        });

        request.fail(function(jqXHR, textStatus) {
            alert( "Request failed: " + textStatus );
        });
    }
</script> 
```

和 Product.js

```
 function Product(id, price, name, type){
    this.id = id;
    this.price = +price;
    this.totalPrice = +price;
    this.name = name;
    this.type = type;
    this.products = [];

    this.addOneProduct = function(oneProduct){
        this.products.push(oneProduct);
        this.totalPrice= this.totalPrice+oneProduct.price;
    };
  } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:57:03.560

您应该更改您的 product.js 问题是您丢失了对`this`.

这应该可以解决问题：

```
function Product(id, price, name, type){
    this.id = id;
    this.price = +price;
    this.totalPrice = +price;
    this.name = name;
    this.type = type;
    this.products = [];
    var self = this;

    this.addOneProduct = function(oneProduct){
        self.products.push(oneProduct);
        self.totalPrice= self.totalPrice+oneProduct.price;
    };
  } 
```

**编辑：**当您调用方法 addOneProduct 时，this-reference 已正确解析。问题是当实际尝试调用服务并将 p 设置为数据时。在序列化对象时，JS 实际上调用了该方法，此时引用不正确。您需要做的是在将对象分配给数据之前对其进行字符串化：

```
var request = $.ajax({
            type: "POST",
            url: "yb_test_post.php",
            dataType: "json",
            data: JSON.stringify(p)
        }); 
```

# linq - 如何避免在创建编译器生成的显示类的方法中使用 Linq 表达式映射错误？

> ID：16106301
> 
> 赞同：0
> 
> 时间：2013-04-19T13:54:23.940
> 
> 标签：linq, entity-framework, ef-code-first, domain-driven-design

当我将 Linq 表达式放入由 Entity Framework 的 Code First 方法映射的域类方法中时，它会导致创建编译器生成的显示类，然后由于未映射显示类而发生映射错误。

> ...+<>c__DisplayClass5' 未映射。使用 Ignore 方法或 NotMappedAttribute 数据注释检查该类型是否被显式排除。验证该类型是否被定义为一个类，不是原始的、嵌套的或泛型的，并且不是从 EntityObject 继承的。

我使用的导致方法问题的表达式是：

```
UniqueIds.FirstOrDefault(x => x.IdentifierType.Name == keyword); 
```

我将类型映射到：

```
.Where(x => x.Namespace != null
                  && !x.IsAbstract
                  && !x.IsEnum
                  && x.Namespace.StartsWith("<removedprefix>.Domain") 
```

[请注意，我实际上并没有使用“removedprefix”，出于隐私原因，我只是不想透露命名空间。]

如何在域类方法中使用 Linq 表达式而不会出现上述错误？

编辑：当然，我想在不禁用延迟加载的情况下解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T20:26:24.950

这个线程有点旧，但我也遇到了同样的问题。由于 Linq 生成的类型是“嵌套的和私有的”，并且通常您的映射类不是，您可以像这样修改您的过滤器：

```
.Where(x => x.Namespace != null
            && !x.IsAbstract
            && !x.IsEnum
            && !x.IsNestedPrivate //Not nested and private
            && x.Namespace.StartsWith("<removedprefix>.Domain") 
```

我希望这仍然有帮助。

# ios - 摆脱 UINavigationBar 右侧的空间

> ID：16106306
> 
> 赞同：4
> 
> 时间：2013-04-19T13:54:41.457
> 
> 标签：ios, objective-c, uinavigationbar, uibarbuttonitem, uibaritem

所以，这就是我想要完成的：

![这就是它应该看起来的样子](https://i.stack.imgur.com/0L5tI.png)

它是一个`UINavigationBar`用 a`UIBarButtonItem`初始化的 custom `UIButton`。
基本上是这样的：

```
UIButton *favoriteButton = [UIButton buttonWithType:UIButtonTypeCustom];
[favoriteButton addTarget:target
                   action:action
         forControlEvents:UIControlEventTouchUpInside];
favoriteButton.frame = CGRectMake(0.0f, 0.0f, 44.0f, 44.0f);

UIImage *backgroundImage = [[UIImage imageNamed:@"favorite-button-background-orange"]
                    resizableImageWithCapInsets:UIEdgeInsetsMake(0, 2, 0, 0)];
[favoriteButton setBackgroundImage:backgroundImage
                          forState:UIControlStateNormal];

UIBarButtonItem *favoriteButtonItem = [[UIBarButtonItem alloc] initWithCustomView:favoriteButton]; 
```

问题是我似乎无法摆脱`UINavigationBar`.

![这就是它的样子](https://i.stack.imgur.com/ullIh.png)

我尝试`TitleView`按照“[如何删除 UIBarButtonItem 旁边的填充](https://stackoverflow.com/questions/11814983/how-to-remove-padding-next-to-a-uibarbuttonitem)”中所述设置自定义，但这并没有改变任何事情。

我还尝试添加另一个宽度为负的 UIBarButtonItem（如我阅读的一些博客文章中所建议的那样），但这也无济于事。

```
UIBarButtonItem *negativeSpacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace
                 target:nil
                 action:nil];
negativeSpacer.width = -5.0f;
self.navigationItem.rightBarButtonItems = %[favoriteButtonItem, negativeSpacer]; 
```

我认为iOS不会让我改变它，因为“圆形边框”保留了一些（不可避免的？）空间/填充？所以我的问题是。我应该如何解决这个限制？我需要创建一个自定义`UINavigationBar`类吗？我可以通过修改以某种方式伪造它`UIBarButtonItem`吗？我只是使用了错误的组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T13:56:12.343

您提到的第二个解决方案实际上有效（今天在 iOS6 和 7 上测试）。问题是`rightBarButtonsItem`数组的元素是从右到左显示的；这意味着负空间实际上需要作为数组的第一项出现才能达到预期的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:59:02.887

没有用于自定义导航栏中默认导航栏按钮项`(back button, right bar button and left barbutton )`的选项。为了满足您的要求，您可以使用自定义导航栏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:15:35.827

会有两种解决方案。**（这可能不是确切的解决方案）**

1）你应该继承`UINavigationBar`并玩弄它。例如，您可能必须将`UIBarButtonItem`自己画在**右上角**。

2）而不是使用`UINavigationBar`，使用`UIView`并添加子视图以使其看起来完全像`UINavigationBar`并使用它。

我希望**第二种**解决方案很容易满足您的要求。我认为没有其他方法可以满足您的要求。

# ios - Phonegap iFrame 空白 iOS

> ID：16106309
> 
> 赞同：0
> 
> 时间：2013-04-19T13:54:51.350
> 
> 标签：ios, cordova, jquery-mobile, iframe

我在 config.xml 的 iOS 上使用 phonegap 2.6 我有以下内容：

```
<access origin="*" subdomains="true" /> 
```

但是当我使用 iframe 来显示 google.com 进行测试时，它只会显示一个空的 iframe。

```
<iframe width="300px" height="400px" frameborder="1" src="http://google.com"></iframe> 
```

我使用 iPhone 5、iOS 6.1.3、Phonegap 2.6 和 Jquery Mobile 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-01T11:05:22.647

写入您的 config.xml

```
<allow-navigation href="http://*.website.com" /> 
```

它对我有用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-09-01T12:58:56.237

使用其他 URL，因为 google 不会在 iFrame 中打开。

# c# - 如何复制 SQL Server 2005 数据库文件 (MDF)

> ID：16106315
> 
> 赞同：-1
> 
> 时间：2013-04-19T13:55:12.540
> 
> 标签：c#, sql-server, database-replication

我正在开发基于客户端/服务器的数据库程序。`TcpListener`我按类 (C#)启动了服务器。客户端将被连接，来自客户端的查询将在服务器端`mdf`文件中执行，结果通过`NetworkStream`类发送

`SqlConnection` *现在，客户端通过服务器中的（每个客户端线程一个连接对象*）执行事务（DML），而一个客户端在**Table**上的事务处理，其他客户端无法从服务器检索数据，直到第一个客户**在特定表**`commit`上编辑或`rollback`编辑其事务。

 **在这里，我需要为所有请求数据的其他客户端复制 MDF 文件，而客户端执行 DML 事务，而不用担心任何客户端的提交/中止..

只是我需要 MDF 文件中的当前数据可供其他客户使用。事务后`Commit`仅更改 MDF 中的实际数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:27:12.670

> 在第一个客户端提交或回滚其事务之前，其他客户端无法从服务器检索数据。

废话。SQL Server 支持并发。很多方面。您需要阅读基础知识。从[访问和更改数据库数据](http://msdn.microsoft.com/en-us/library/ms181080%28v=sql.105%29.aspx)开始。**

# api - Instagram API - 用户照片

> ID：16106318
> 
> 赞同：7
> 
> 时间：2013-04-19T13:55:23.590
> 
> 标签：api, instagram, photos

有谁知道我可以在不使用访问令牌的情况下从 Instagram 用户那里获取照片吗？[我在http://instagram.com/](http://instagram.com/) {user}上看到照片但无法使用 instagram api 获取它们是没有意义的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-23T21:53:44.947

获取照片您不需要使用 access_token。只需致电：

```
https://api.instagram.com/v1/users/{user-id}/media/recent?callback=&client_id={client_id} 
```

您可以在此处创建您的 client_id：

[https://instagram.com/developer/clients/manage/](https://instagram.com/developer/clients/manage/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:08:23.723

不，我不相信使用他们的 api 可以做到这一点。

来自 instagram 的文档：（[http://instagram.com/developer/authentication/](http://instagram.com/developer/authentication/)）

> 经过身份验证的请求需要 access_token。...我们仅在您的应用程序代表用户发出请求（评论、喜欢、**浏览用户的提要**等）的情况下才需要身份验证。

您也许可以解决一些问题。这是使用 followgram.me [http://www.barattalo.it/2011/08/18/how-to-use-instagr-am-photos/的 php 实现](http://www.barattalo.it/2011/08/18/how-to-use-instagr-am-photos/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-19T04:59:52.460

你根本不需要使用`access_token`。只需在 Instagram 注册您的应用程序，获取`client_id`并使用它进行查询。

引用[文档](http://instagram.com/developer/authentication/)：

> 请注意，在许多情况下，您可能根本不需要对用户进行身份验证。例如，**您可以请求热门照片而无需进行身份验证（即您不需要提供 access_token；只需在请求中使用您的客户端 ID）**。只有在您的应用程序代表用户发出请求（评论、喜欢、浏览用户的提要等）时，我们才需要进行身份验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-17T04:16:00.810

您好，我有获取用户图像的示例，请按照代码

```
/* Get image in your instagram Account */

$set_scope_your_app ="https://www.instagram.com/oauth/authorize/?

client_id=Added-your-client_id&

redirect_uri=Added-your-redirect_uri&response_typ

e=code&scope=public_content";

$get_acess_token = "https://instagram.com/oauth/authorize/?

client_id=Added-your-client_id&

redirect_uri=Added-your-redirect_uri&respons

e_type=token";

$url="https://api.instagram.com/v1/users/self/media/recent/?access_token=Added-your-access_token";
 $json = file_get_contents($url);
$data = json_decode($json);

$images = array();
foreach( $data->data as $user_data ) {
    $images[] = (array) $user_data->images;
}

$standard = array_map( function( $item ) {
    return $item['standard_resolution']->url;
}, $images );

echo "<pre>";
print_r($standard);

echo "<pre>";
print_r($standard); 
```

我已经从[Get User Media or Image in Your Instagram Example 中获得参考](http://myphpinformation.blogspot.in/2016/12/get-user-media-or-image-in-your-instagram-example.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-25T09:44:07.313

有两种获取数据的方法

1) 客户端 - 您需要提供 client_id

2）服务器端 - 你需要给 access_token

```
https://api.instagram.com/v1/users/#{instagram_id}/media/recent/?access_token=#{@token}" 
```

这将为您提供该用户最近上传的照片，该用户的 instagram_id 已给出...

# cxf - 使用 Mule 通过 Java Bean 调用 CXF 客户端

> ID：16106321
> 
> 赞同：0
> 
> 时间：2013-04-19T13:55:34.050
> 
> 标签：cxf, mule, flow

我正在尝试使用此 Web 服务：来自另一个 wsdl 的[http://wsf.cdyne.com/WeatherWS/Weather.asmx?wsdl](http://wsf.cdyne.com/WeatherWS/Weather.asmx?wsdl) ......别担心，我只是想建立某种桥梁来测试 Web 服务调用根本不是逻辑，所以，我需要的流程是这样的

cxf:jaxws-service ---> Java bean ----> externalWebservice

问题是我找不到如何通过我的 java impl 类调用外部 web 服务，我需要将它注入到我的 bean 中，但我找不到如何去做。实际上我的流程是这样的：

```
 <flow name="soapservice" doc:name="soapservice">
        <http:inbound-endpoint exchange-pattern="request-response"
            address="http://localhost:60603/Hello" doc:name="HTTP" />
        <cxf:jaxws-service serviceClass="org.example.HelloWorld"
            doc:name="SOAP" />
        <component class="org.example.HelloWorldImpl" doc:name="Java" />
    </flow> 
```

一切正常，服务返回入口参数，但我需要从 Weather Webservice 检索一些数据。有人可以帮助我使用 CXF 使用该 Web 服务吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:30:48.137

为此，最好的办法是创建另一个`flow`带有`request-response`VM 入站和 CXF 客户端的客户端来使用远程 Web 服务。下面解释如何生成CXF客户端：http: [//www.mulesoft.org/documentation/display/current/Consuming+Web+Services+with+CXF](http://www.mulesoft.org/documentation/display/current/Consuming+Web+Services+with+CXF)

然后你可以通过 Component Bindings`flow`在你的注入这个其他（参见：http: [//www.mulesoft.org/documentation/display/current/Component+Bindings](http://www.mulesoft.org/documentation/display/current/Component+Bindings)）。这种方式将有可能通过接口调用调用远程 Web 服务，该接口调用在后台调用执行 CXF 客户端交互的流。`component``org.example.HelloWorldImpl`

所以在你的情况下，假设：

*   CXF 生成的服务接口是`com.cdyne.wsf.WeatherWS`,
*   你感兴趣的方法是`getCityWeatherByZip`，
*   CXF 生成的服务客户端是`com.cdyne.wsf.WeatherWS_Service`,
*   该类可以通过注入`org.example.HelloWorld`接收一个实例`com.cdyne.wsf.WeatherWS`

你会有*类似*的东西：

```
<flow name="soapservice">
    <http:inbound-endpoint exchange-pattern="request-response"
        address="http://localhost:60603/Hello" />
    <cxf:jaxws-service serviceClass="org.example.HelloWorld" />
    <component class="org.example.HelloWorldImpl">
        <binding interface="com.cdyne.wsf.WeatherWS"
            method="getCityWeatherByZip">
            <vm:outbound-endpoint path="callGetCityWeatherByZip"
                exchange-pattern="request-response" />
        </binding>
    </component>
</flow>

<flow name="getCityWeatherByZip">
    <vm:inbound-endpoint path="callGetCityWeatherByZip"
        exchange-pattern="request-response" />

    <cxf:jaxws-client
        clientClass="com.cdyne.wsf.WeatherWS_Service"
        port="WeatherSoap" operation="GetCityWeatherByZip" />

    <http:outbound-endpoint
        address="http://wsf.cdyne.com/WeatherWS/Weather.asmx"
        exchange-pattern="request-response" />
</flow> 
```

# gwt - 流体布局 GWT

> ID：16106328
> 
> 赞同：0
> 
> 时间：2013-04-19T13:56:03.713
> 
> 标签：gwt, layout, uibinder

我正在开发一个将在 ipad 上使用的 webapp。因此我必须创建一个动态用户界面。因为当我旋转ipad时，侧面应该重新排列。我正在使用 uibinder(widgets) 创建我的布局。当 ipad 旋转时，是否有一个小部件可以让布局重新排列？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:57:11.750

您试图实现的目标称为响应式设计。您可以自己实现响应式设计，也可以使用下面列出的 CSS 框架之一：

*   [推特引导](http://twitter.github.io/bootstrap/)
*   [HTML 5 样板](https://github.com/h5bp/html5-boilerplate/tree/v4.2.0)

使用 gwt 的引导程序已经有两种实现，因此您可以使用其中一种作为起点。

*   [http://nyao.github.io/bootstrap4gwt/](http://nyao.github.io/bootstrap4gwt/)
*   [http://gwtbootstrap.github.io/](http://gwtbootstrap.github.io/)

# android - 如何录制手机屏幕的视频，如屏幕截图

> ID：16106331
> 
> 赞同：0
> 
> 时间：2013-04-19T13:56:05.030
> 
> 标签：android

我试过了，但它不起作用我想提前录制手机屏幕的视频，比如屏幕截图thanx

```
public class VideoCapture extends Activity implements OnClickListener, SurfaceHolder.Callback{

    MediaRecorder recorder;
    SurfaceHolder holder;
    boolean recording = false;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        recorder = new MediaRecorder();
        initRecorder();
        setContentView(R.layout.cmain);

        SurfaceView cameraView = (SurfaceView) findViewById(R.id.videoView1);
        holder = cameraView.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        cameraView.setClickable(true);
        cameraView.setOnClickListener(this);

    }

    private void initRecorder() {
        recorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
        recorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);

        CamcorderProfile cpHigh = CamcorderProfile
                .get(CamcorderProfile.QUALITY_HIGH);
        recorder.setProfile(cpHigh);
        recorder.setOutputFile("/sdcard/videocapture_example.mp4");
        recorder.setMaxDuration(500000); // 50 seconds
        recorder.setMaxFileSize(5000000); // Approximately 5 megabytes
    }

    private void prepareRecorder() {
        recorder.setPreviewDisplay(holder.getSurface());

        try {
            recorder.prepare();
        } catch (IllegalStateException e) {
            e.printStackTrace();
            finish();
        } catch (IOException e) {
            e.printStackTrace();
            finish();
        }
    }

    public void onClick(View v) {
        if (recording) {
            recorder.stop();
            recording = false;

            // Let's initRecorder so we can record again
            initRecorder();
            prepareRecorder();
        } else {
            recording = true;
            recorder.start();
        }
    }

    public void surfaceCreated(SurfaceHolder holder) {
        prepareRecorder();
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        if (recording) {
            recorder.stop();
            recording = false;
        }
        recorder.release();
        finish();
    }

} 
```

# c++ - DirectX 9 字体库？

> ID：16106344
> 
> 赞同：0
> 
> 时间：2013-04-19T13:56:34.460
> 
> 标签：c++, windows, directx, directx-9

我查看了 DirectX 文档中的 Font 类并查看了[这个/这些问题/答案](https://stackoverflow.com/questions/491487/directx-font-tutorial-that-doesnt-use-gdi)，但它们并没有满足我的需要。

我尝试搜索“C++ DirectX 9 字体库”，但这并没有产生任何有用的结果。

是否有任何可用的 DX9 字体库，例如，可以加载 TTF 字体（例如 Arial）然后在屏幕上绘制它们？

我正在使用的[当前](http://goo.gl/0dXCB)类确实满足了我的大部分需求，但有很多问题:((就我在其中绘制信息的第三方应用程序而言，当我 alt 选项卡时，它崩溃了，并且不知何故不在我的 DLL 中)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:38:02.673

是时候编写自己的位图字体渲染器了！你会需要：

*   好的字体加载器（[FreeType](http://www.freetype.org/)）
*   纹理图集：包含所有字母的大纹理和包含每个字母元数据的字典
*   某种 Sprite 批处理：高效的精灵绘制

一步步：

1.  FreeType：加载字体文件并将每个字符渲染为小位图
2.  您的图集创建：将所有小位图合并（blit）到大图集纹理中，并将每个字符的属性（坐标、大小、字距调整、其他内容）存储在“图集字典”中。
3.  使用精灵批处理从图集（使用字典）中绘制字符

嗯，第一次你可以从类似这样的开始：从 FreeType 中获取角色的位图并直接绘制它，但我认为性能会非常低。

**更新：** 很难写一个关于这样一个话题的小例子，但是：

*   关于字体加载库，您可以阅读其[文档](http://www.freetype.org/freetype2/documentation.html)
*   关于地图集，您可以查看[Chad Vernon 的博客](http://www.chadvernon.com/blog/resources/managed-directx-2/bitmap-fonts/)。它是 C#，但 C++ 编码器的语法很容易理解。`BitmapCharacterSet`在他的代码中是图集。
*   关于精灵批处理：查看[Frank Luna](http://www.d3dcoder.net/)书籍和/或源代码。在他的小型实用程序库中，他也有一个字体渲染器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:31:48.240

您可能想看看将 TTF 字体转换为位图的 BMFont ( [http://www.angelcode.com/products/bmfont/ )。](http://www.angelcode.com/products/bmfont/)然后可以使用以下代码呈现它们：[http ://www.angelcode.com/dev/bmfonts/](http://www.angelcode.com/dev/bmfonts/)

虽然它不是一个现成的库。

# python - Python将字符从Unicode转换为HTML

> ID：16106346
> 
> 赞同：0
> 
> 时间：2013-04-19T13:56:44.890
> 
> 标签：python, python-2.7

嘿伙计们，我正在尝试在 python 2.7.3 中转换它：

```
the+c\xf8\xf8n 
```

到 html 字符串：

```
the+c%C3%B8%C3%B8n 
```

它是原始的，`c\xf8\xf8n`但我确实使用了替换来使用 + 而不是空格。

我不完全确定后者是什么约定我会使用字符串替换，但约定会因不同的字符而改变..

想法？多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:58:07.100

您是*URL*编码，而不是 HTML。使用`urllib.quote`：

```
from urllib import quote 
```

但请确保您`UTF-8`首先编码：

```
quote(inputstring.encode('utf8')) 
```

这将`+`明确引用；如果您打算将其作为空格字符，则需要将其标记为安全：

```
quote(inputstring.encode('utf8'), '+') 
```

后一种形式给出：

```
>>> quote(inputstring.encode('utf8'), '+')
'the+c%C3%B8%C3%B8n' 
```

# java - 如何从另一个类从 Score.java 获取数组到 Test.java

> ID：16106348
> 
> 赞同：0
> 
> 时间：2013-04-19T13:56:50.700
> 
> 标签：java

你好，我想从另一个名为 Score 的类中传递一组标记，该类位于 Score.java 中。我正在使用JDK。和绝对的初学者。

```
public class test {
     public static void main (String[] args)
     { 
        System.out.print("Hello");
        test(Score.testMarks);
     }

     public static void test(Score.testMarks){
         System.out.print(testMarks[n] + " ");
     }
} 
```

当我构建程序时，它说`error: <identifier> expected` 我该怎么做？

我想要的只是从 Score 类中获取从 Score.java 到 Test.java 的数组

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:00:14.467

这就是您收到错误的原因：

`public static void test(Score.testMarks)`

您应该将其更改为：

`public static void test(Score[] testMarks)`

（我建议你阅读[定义方法](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)教程）。

既然你这样做了，`System.out.print(testMarks[n] + " ");`那么我相信`testMarks`是一个 type 数组`Score`。这是用`Score[]`Java编写的。

你还有另一个错误，我不确定你想用这种方法做什么。是什么`n`？你的意思是什么？

# vaadin - 在与 Internet 断开连接时创建 vaadin 7 项目时遇到问题

> ID：16106350
> 
> 赞同：0
> 
> 时间：2013-04-19T13:56:57.497
> 
> 标签：vaadin, web.xml, ivy, ubuntu-12.10

努力使用vaadin eclipse插件创建项目，eclipse找不到vaadin的版本，无法在web.xml文件中自动创建预配置必须手动完成并且不创建ivy.xml我附上一些图片....

无法显示 VAADIN 版本 ![蚀](https://i.stack.imgur.com/1W5Be.png)

无法设置 VAADIN 版本 ![日食2](https://i.stack.imgur.com/azRtZ.png)

我不知道为什么会出现这种情况，因为我已经创建了项目，但只有当我连接时 ![日食3](https://i.stack.imgur.com/tNTs4.png)

最后是 WEB.XML ![web.xml](https://i.stack.imgur.com/MYc2F.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T13:23:03.670

查看 Vaadin Eclipse 插件的源代码后，它总是在线查看是否有可下载的 Vaadin 版本列表。

（参见[VaadinProjectFirstPage](http://dev.vaadin.com/browser/svn/integration/eclipse/plugins/com.vaadin.integration.eclipse/src/com/vaadin/integration/eclipse/wizards/VaadinProjectFirstPage.java?rev=25858#L119)、[VaadinVersionComposite](http://dev.vaadin.com/browser/svn/integration/eclipse/plugins/com.vaadin.integration.eclipse/src/com/vaadin/integration/eclipse/properties/VaadinVersionComposite.java?rev=25858#L145)和[DownloadManager](http://dev.vaadin.com/browser/svn/integration/eclipse/plugins/com.vaadin.integration.eclipse/src/com/vaadin/integration/eclipse/util/network/DownloadManager.java?rev=25858#L104)）

似乎目前无法在不访问 Internet 的情况下使用 Eclipse 插件中的向导创建新的 Vaadin 项目——即使您已经使用 Ivy 下载了适当的 jar。

我可以看到这可能有问题 - 我建议您在 Vaadin 论坛上报告此问题，插件开发人员可能会考虑将其作为错误修复。

# r - R Query：从分类变量创建虚拟变量

> ID：16106355
> 
> 赞同：1
> 
> 时间：2013-04-19T13:57:08.540
> 
> 标签：r, variables, regression, multivariate-testing, dummy-data

你好 Stack Overflow 的人，我花了一段时间寻找解决我的问题的方法，但没有找到任何东西，所以我想我会发布。

基本上我有一个按字母顺序列出的 196 个国家的数据集。其中一个变量根据国家所在的地区分配一个 1-10 的数字。例如东欧 = 1、西欧 = 2、中东 = 3、南美 = 4 等等。

这是数据集的可视化表示：

国家名称-----国家地区------婴儿死亡率

阿富汗------------3------------180

阿根廷---------------4------------65

法国-------------------2------------------------12

德国---------------2-------------10

波兰-----------------1------------------------16

我需要做的是将这 10 个区域分成各自的虚拟变量，以便我通过多元回归对它们进行运行，以确定它们对婴儿死亡率的个体影响。

我想知道创建虚拟变量（1 = 东欧，0 = 其他等）的必要代码是什么，然后如何在单独和多元回归中测试它们的效果。

抱歉，如果这看起来很简单或愚蠢的问题，我对使用 R 相当陌生。

我在这里先向您的帮助表示感谢。

编辑：这是要求的 dput 输出：

```
structure(list(Country.Name = structure(c(1L, 2L, 3L, 4L, 5L, 
6L, 11L, 7L, 9L, 10L, 12L, 13L, 14L, 8L, 15L, 17L, 20L, 21L, 
22L, 23L, 24L, 18L, 156L, 25L, 26L, 120L, 28L, 16L, 29L, 30L, 
31L, 32L, 33L, 160L, 34L, 35L, 36L, 170L, 37L, 38L, 39L, 40L, 
41L, 43L, 44L, 45L, 46L, 19L, 47L, 49L, 50L, 51L, 53L, 54L, 57L,
55L, 56L, 58L, 59L, 60L, 48L, 61L, 63L, 62L, 64L, 65L, 88L, 66L,
67L, 68L, 69L, 71L, 72L, 73L, 74L, 75L, 76L, 77L, 78L, 79L, 80L,
81L, 82L, 42L, 83L, 84L, 86L, 85L, 87L, 89L, 90L, 91L, 92L, 93L,
95L, 96L, 94L, 97L, 98L, 99L, 100L, 101L, 103L, 104L, 105L, 106L, 
107L, 108L, 110L, 111L, 112L, 115L, 116L, 114L, 117L, 118L, 119L, 
130L, 121L, 122L, 123L, 124L, 189L, 125L, 126L, 127L, 128L, 129L, 
113L, 109L, 132L, 131L, 133L, 134L, 135L, 136L, 137L, 138L, 139L, 
70L, 174L, 140L, 141L, 142L, 143L, 161L, 162L, 163L, 145L, 146L, 
147L, 148L, 149L, 151L, 152L, 153L, 154L, 191L, 155L, 157L, 158L, 
194L, 159L, 164L, 165L, 166L, 167L, 168L, 169L, 171L, 173L, 175L, 
176L, 177L, 184L, 178L, 179L, 180L, 181L, 182L, 183L, 102L, 52L, 
185L, 172L, 186L, 27L, 187L, 188L, 190L, 144L, 192L, 150L, 193L
), .Label = c("Afghanistan", "Albania", "Algeria", "Andorra", 
"Angola", "Antigua and Barbuda", "Argentina", "Armenia", "Australia", 
"Austria", "Azerbaijan", "Bahamas", "Bahrain", "Bangladesh", 
"Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bhutan", 
"Bolivia", "Bosnia and Herzegovina", "Botswana", "Brazil", "Brunei", 
"Bulgaria", "Burkina Faso", "Burundi", "Cambodia", "Cameroon", 
"Canada", "Cape Verde", "Central African Republic", "Chad", "Chile", 
"China", "Colombia", "Comoros", "Congo", "Congo, Democratic Republic", 
"Costa Rica", "Cote d'Ivoire", "Croatia", "Cuba", "Cyprus", "Czech Republic",  
"Denmark", "Djibouti", "Dominica", "Dominican Republic", "Ecuador", 
"Egypt", "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia", 
"Ethiopia", "Fiji", "Finland", "France", "Gabon", "Gambia", "Georgia", 
"Germany", "Ghana", "Greece", "Grenada", "Guatemala", "Guinea",
"Guinea-Bissau", "Guyana", "Haiti", "Honduras", "Hungary", "Iceland", 
"India", "Indonesia", "Iran", "Iraq", "Ireland", "Israel", "Italy", 
"Jamaica", "Japan", "Jordan", "Kazakhstan", "Kenya", "Kiribati", 
"Korea, North", "Korea, South", "Kuwait", "Kyrgyzstan", "Laos", 
"Latvia", "Lebanon", "Lesotho", "Liberia", "Libya", "Liechtenstein", 
"Lithuania", "Luxembourg", "Macedonia", "Madagascar", "Malawi", 
"Malaysia", "Maldives", "Mali", "Malta", "Marshall Islands", 
"Mauritania", "Mauritius", "Mexico", "Micronesia", "Moldova", 
"Monaco", "Mongolia", "Montenegro", "Morocco", "Mozambique",
"Myanmar", "Namibia", "Nauru", "Nepal", "Netherlands", "New Zealand", 
"Nicaragua", "Niger", "Nigeria", "Norway", "Oman", "Pakistan", 
"Palau", "Panama", "Papua New Guinea", "Paraguay", "Peru", "Philippines", 
"Poland", "Portugal", "Qatar", "Romania", "Russia", "Rwanda", 
"Samoa", "San Marino", "Sao Tome and Principe", "Saudi Arabia", 
"Senegal", "Serbia", "Serbia and Montenegro", "Seychelles", "Sierra Leone", 
"Singapore", "Slovakia", "Slovenia", "Solomon Islands", "Somalia", 
"South Africa", "Spain", "Sri Lanka", "St Kitts and Nevis", "St Lucia", 
"St Vincent and the Grenadines", "Sudan", "Suriname", "Swaziland", 
"Sweden", "Switzerland", "Syria", "Taiwan", "Tajikistan", "Tanzania", 
"Thailand", "Timor-Leste", "Togo", "Tonga", "Trinidad and Tobago", 
"Tunisia", "Turkey", "Turkmenistan", "Tuvalu", "Uganda", "Ukraine", 
"United Arab Emirates", "United Kingdom", "United States", "Uruguay", 
"Uzbekistan", "Vanuatu", "Venezuela", "Vietnam", "Yemen", "Zambia", 
"Zimbabwe"), class = "factor"), Country.Region = c(8L, 1L, 3L, 
5L, 4L, 10L, 1L, 2L, 5L, 5L, 10L, 3L, 8L, 1L, 10L, 5L, 8L, 2L, 
1L, 4L, 2L, 10L, 9L, 7L, 1L, 7L, 4L, 1L, 7L, 4L, 5L, 4L, 4L, 
8L, 4L, 2L, 6L, 6L, 2L, 4L, 4L, 4L, 2L, 1L, 2L, 3L, 1L, 4L, 5L, 
10L, 2L, 2L, 2L, 4L, 4L, 4L, 1L, 9L, 5L, 5L, 4L, 4L, 1L, 4L, 
5L, 4L, 9L, 5L, 10L, 2L, 4L, 10L, 2L, 2L, 1L, 5L, 8L, 7L, 3L, 
3L, 5L, 3L, 5L, 4L, 10L, 6L, 1L, 3L, 4L, 6L, 6L, 3L, 1L, 7L, 
3L, 4L, 1L, 4L, 3L, 5L, 1L, 5L, 4L, 4L, 7L, 8L, 4L, 5L, 4L, 4L, 
2L, 5L, 6L, 1L, 1L, 3L, 4L, 3L, 4L, 9L, 8L, 5L, 9L, 5L, 2L, 4L, 
4L, 5L, 9L, 9L, 9L, 8L, 2L, 9L, 2L, 2L, 7L, 1L, 5L, 4L, 7L, 3L, 
1L, 1L, 4L, 10L, 10L, 10L, 5L, 4L, 3L, 4L, 1L, 4L, 4L, 7L, 1L, 
7L, 1L, 4L, 4L, 4L, 5L, 4L, 10L, 4L, 5L, 5L, 3L, 1L, 7L, 4L, 
9L, 10L, 3L, 3L, 3L, 1L, 9L, 4L, 1L, 1L, 3L, 5L, 4L, 5L, 4L, 
2L, 1L, 2L, 9L, 3L, 1L, 4L), Under.5.Mortality.Rate = c(137.3500061, 
20.40999985, 30.80999947, 6.579999924, 178.6000061, 22.02000046, 
51.13999939, 20.05999947, 6.059999943, 5.46999979, 19.12000084, 
11.18999958, 79.55999756, 28.54000092, 19.89999962, 5.639999866, 
79.80999756, 56.77999878, 9.569999695, 58.18000031, 28.07999992, 
29.54999924, 34.72999954, 9.199999809, 15.46000004, 72.59999847, 
145.4600067, 14.72000027, 85.63999939, 132.8600006, 6.480000019, 
42.68000031, 150.5, 15.02999973, 185.2100067, 10.13000011, 27.06999969, 
7.619999886, 22.79000092, 78.52999878, 113.0199966, 165.1199951, 
13.39999962, 7.949999809, 7.730000019, 5.590000153, 6.460000038, 
128.3200073, 5.489999771, 20.05999947, 35.97000122, 31.18000031, 
30.44000053, 180.1799927, 126.4899979, 95.69000244, 9.210000038, 
30.03000069, 4.010000229, 4.949999809, 83.83000183, 80.19999695, 
31.62000084, 110.2300034, 4.889999866, 93.91000366, 56.91999817, 
6.400000095, 20.76000023, 45.81999969, 163.9900055, 44.61000061, 
90.98000336, 33.29999924, 9.079999924, 3.730000019, 79.45999908, 
46.09999847, 43.70999908, 39.90000153, 6.769999981, 6.690000057, 
5.730000019, 123.8099976, 23.86000061, 4.079999924, 39.5, 21.85000038, 
96.69000244, 44.25, 8.93999958, 11.47000027, 49.27000046, 91.37999725, 
12.98999977, 105.8600006, 12.56000042, 151.6100006, 19.94000053, 
NA, 9.520000458, 4.71999979, 94.59999847, 129.8999939, 8.5, 28.04000092, 
199.6399994, 6.849999905, 97.87999725, 16.95999908, 23.54999924, 
NA, 52.43000031, 19.60000038, 12.39999962, 46.31000137, 150.2299957, 
14.13000011, 61.52000046, NA, 69.44999695, 6.139999866, 32.08000183, 
7.300000191, 36.22999954, 205.1699982, 172.3699951, 4.639999866, 
34.79000092, 45.15000153, NA, 90.91000366, 22.34000015, 90.08000183, 
26.45000076, 36.41999817, 36.63000107, 8.770000458, 6.639999866, 
183.9799957, 79.04000092, 12.32999992, 19.40999985, 19.03000069, 
142.6300049, NA, 16.13999939, 23.86000061, NA, 67.91999817, 20.27000046, 
115.0800018, 7.21999979, 17.17000008, 184.1300049, 3.680000067, 
9.020000458, 17.10000038, 4.900000095, 137.2100067, 42.95999908, 
74.22000122, 5.260000229, 101.0999985, 42.54000092, 106.4199982, 
4.489999771, 5.639999866, 16.70999908, 73.68000031, 12.68999958, 
109.0500031, 21.54000092, 32.61999893, 5.940000057, 24.13999939, 
37.29999924, 61.74000168, NA, 134.8099976, 18.44000053, 17.59000015, 
40.22000122, 6.190000057, 115.1299973, 8.050000191, 161.7100067, 
15.60999966, 54.25, 21.29999924, 23.29999924, 85.33999634, NA, 
133.4700012)), .Names = c("Country.Name", "Country.Region", "Under.5.Mortality.Rate"
), class = "data.frame", row.names = c(NA, -194L)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:11:05.910

由于您的目标是为每个区域生成模型，因此我认为您想要的是**plyr**函数，您需要将其安装为一个包。对于新的 R 用户来说，这听起来可能令人生畏，但绝对值得学习，因为它很容易让您对数据**子集**进行分析。

在您的情况下，您的代码如下所示：

```
require(plyr)
models = ddply(df, .(CountryRegion), lm, formula = y ~ x1 + x2) 
```

其中 df 是您的数据框， CountryRegion 是您用于子集数据的分类变量， lm （或替代方法）是建模函数， x1、x2 等是您的自变量。因此，您将拥有每个 CountryRegion 的单独模型。

希望这会有所帮助，并确保您查看**plyr**！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:14:03.100

据我所知，您希望为您的 10 类因素设置对比。设置对比的方法之一确实是虚拟化。如果单个名义变量有 10 个类别，则可以创建 9 个虚拟变量来表示多元回归中的相同信息。如果是这种情况，您正在寻找的是`contrasts()`：

```
x <- factor(1:10,ordered=FALSE)
contrasts(x) <- contr.treatment(10)
print(x) 
```

然后您只需`x`在回归模型中使用，R 将识别对比矩阵并相应地应用它。在输出中，您将看到您设置的级别。

`base=`您可以使用 中的选项指定将哪个类别用作参考`contr.treatment`。然后，回归系数的解释是将每个虚拟变量（相应类别的平均值）与参考类别（基本水平的平均值）进行比较。

还有其他设置对比的方法。对于国家而言，将每个国家与总体平均值进行比较可能有用，而不是与一个特定国家的平均值进行比较。这可以通过使用 的偏差编码来实现`contr.sum(10)`。您对效果的解释发生了变化，截距的含义也发生了变化。一般来说，了解不同的对比方法非常有用，因为它们使回归等简单工具更加灵活和强大。可以在[此处](http://www.ats.ucla.edu/stat/r/library/contrast_coding.htm)找到有关 R 中各种编码系统的其他信息。祝你分析顺利。

PS你也可以手动指定一个对比矩阵，这对于偏差编码很有用，因为它没有`base`选项。

# singleton - Java EE 6 EJB 教程：为什么不使用 @Singleton 而不是 @Stateless

> ID：16106356
> 
> 赞同：0
> 
> 时间：2013-04-19T13:57:08.923
> 
> 标签：singleton, ejb, java-ee-6, stateless

我查看了 Java EE 6 教程中的一个 EJB 示例。在这个例子中，我想知道我是否可以只使用 @Singleton 而不是 @Stateless ？

```
package converter.ejb;

import java.math.BigDecimal;
import javax.ejb.*;

    @Stateless
    public class ConverterBean {

        private BigDecimal yenRate = new BigDecimal("83.0602");
        private BigDecimal euroRate = new BigDecimal("0.0093016");

        public BigDecimal dollarToYen(BigDecimal dollars) {
            BigDecimal result = dollars.multiply(yenRate);
            return result.setScale(2, BigDecimal.ROUND_UP);
        }

        public BigDecimal yenToEuro(BigDecimal yen) {
            BigDecimal result = yen.multiply(euroRate);
            return result.setScale(2, BigDecimal.ROUND_UP);
        }
    } 
```

在我看来像一个 Util 方法。

如果我不使用 EJB，我可以在此 ConverterBean 上使用静态方法。

还有一个问题。我知道这是一个简单的示例，但是如果我使用示例中的 servlet 中的此代码，为什么只为此使用 EJB？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:01:07.540

是的，我会说这是一个糟糕的用例`EJBs`。这个方法肯定应该在一些声明为静态方法的实用程序类中。对于 Singleton，如果不需要，请不要使用它（当然，您可以制作此类 Singleton，但您会获得什么？）。使您的代码尽可能简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:50:21.770

如果你只使用@Singleton 而不是@Stateless，你会降低应用程序的性能。因为，有两种方法可以访问@Singleton bean，容器管理和 bean 管理。默认是容器管理的，默认锁是 LockType.WRITE。因此只有一个客户端可以同时访问 bean，其他客户端将被阻止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T20:38:42.127

如果我只需要一类实用程序，我真的看不出使用 EJB 的原因。我认为您可以将它用作一个简单的最终类实用程序并在其中使用静态方法。如果您真的需要从容器事务、使用 JPA、一些远程服务或类似的东西中受益，您会使用 EJB。

# image - Delphi7，由于按钮，我无法使用向上、向下、向左、向右键移动图像

> ID：16106358
> 
> 赞同：1
> 
> 时间：2013-04-19T13:57:11.653
> 
> 标签：image, delphi, button, key, move

标题并没有说很多东西，所以让我解释一下：

我制作了一张申请表，其中放了 1 张图片和 4 个按钮。每当我按下键：向上、向下、向左、向右移动图像时，它会选择我的按钮，而不是移动图像。例如，如果我按下向下键，它将选择我按钮 2，如果我按下向上，它将选择我按钮 1....

我很抱歉，我无法真正描述它的外观，在您的表单中尝试一下，您会明白我的意思，代码是这样的：

```
procedure TForm1.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  case Key of
    VK_UP:
      image1.Top := image1.Top - 10;
    VK_DOWN:
      image1.Top := image1.Top + 10;
    VK_LEFT:
      image1.Left := image1.Left - 10;
    VK_RIGHT:
      image1.Left := image1.Left + 10;
   end;
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T14:02:39.497

最好的解决方案是将您的控件（图像）放入处理对话框键的窗口（控件）中，然后确保该控件在适当的时间接收键盘焦点。

好吧，老实说，您似乎通过移动图形控件来绘制/动画事物。最好的方法是创建*一个*自定义控件（从 降序`TCustomControl`）并手动绘制东西（或者，可能有图形子控件）。然后您可以轻松地使此控件响应箭头键。

该控件执行此操作：

```
unit WindowContainer;

interface

uses
  SysUtils, Windows, Messages, Classes, Controls;

type
  TWindowContainer = class(TCustomControl)
  private
  protected
    procedure WMGetDlgCode(var Message: TWMGetDlgCode); message WM_GETDLGCODE;
  public
    constructor Create(AOwner: TComponent); override;
  published
    property OnStartDrag;
    property OnStartDock;
    property OnUnDock;
    property OnClick;
    property OnCanResize;
    property OnAlignPosition;
    property OnAlignInsertBefore;
    property OnResize;
    property OnMouseWheel;
    property OnMouseWheelDown;
    property OnMouseWheelUp;
    property OnMouseUp;
    property OnMouseMove;
    property OnMouseLeave;
    property OnMouseEnter;
    property OnMouseDown;
    property OnMouseActivate;
    property OnKeyUp;
    property OnKeyPress;
    property OnKeyDown;
  end;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('Rejbrand 2009', [TWindowContainer]);
end;

{ TWindowContainer }

constructor TWindowContainer.Create(AOwner: TComponent);
begin
  inherited;
  ControlStyle := [csAcceptsControls, csCaptureMouse, csClickEvents,
    csSetCaption, csDoubleClicks, csReplicatable, csPannable,
    csFramed];
end;

procedure TWindowContainer.WMGetDlgCode(var Message: TWMGetDlgCode);
begin
  inherited;
  Message.Result := Message.Result or DLGC_WANTCHARS or DLGC_WANTARROWS
    or DLGC_WANTTAB or DLGC_WANTALLKEYS;
end;

end. 
```

![截屏](https://privat.rejbrand.se/WindowContainerSample.png)

[示例演示 EXE](https://privat.rejbrand.se/WindowContainerSample.exe)

要尝试此控件，只需将形状/图像放入其中，并使用`OnKeyDown`此控件的事件。此外，请确保将焦点设置为此控件，例如当用户单击它时：

```
procedure TForm1.WindowContainer1Click(Sender: TObject);
begin
  WindowContainer1.SetFocus;
end; 
```

现在，通过移动控件来制作动画是不好的。相反，您应该手动绘制。[将此答案与此](https://stackoverflow.com/a/7224075/282848)答案中的代码结合起来，您就完成了。

# url - 州/市目录的 URL 和站点结构

> ID：16106362
> 
> 赞同：1
> 
> 时间：2013-04-19T13:57:24.190
> 
> 标签：url, seo, directory, schema

我正在为利基服务创建一个国家目录。我认为结构应该以两种格式之一进行分解，但我愿意接受建议。

site.com/category/subcategory/state/city

或者

site.com/state/city/category/subcategory

以上哪一项效果最好？或者，还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:19:03.463

如果每个州都有自己不同的类别和子类别，那么您肯定会选择这个：site.com/state/city/category/subcategory

如果您的类别通常适用于所有州，那么您选择第二个。

这种方法绝对有意义，并且您可以避免让访问者感到困惑。

# spring - 如何创建高效的 Spring-Hibernate 项目结构？

> ID：16106364
> 
> 赞同：3
> 
> 时间：2013-04-19T13:57:29.190
> 
> 标签：spring, hibernate, spring-mvc

我对服务有点困惑。为什么我必须使用服务进行休眠集成？我想我可以直接使用 DAO 接口。例如在本教程[http://www.onlinetechvision.com/?p=566](http://www.onlinetechvision.com/?p=566)为什么他使用 IUserService 而不是 IUserDAO。IUserService 真的有必要吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T14:02:02.803

服务对几件事有好处：

*   在事务中协调 DAO 操作，因此如果您的操作逻辑需要多个 SQL 调用，则可以一起提交或回滚。

*   提供一个放置独立于表示的业务逻辑的地方。[我有一个相关的答案，它讨论了服务而不是控制器](https://stackoverflow.com/a/3885783/217324)的内容。

*   清楚地公开您的应用程序支持的低级用例操作。换句话说，您可以通过查看服务上的方法来判断用户可以在应用程序中执行哪些操作。

如果您觉得服务太过分了（例如，您正在构建一个没有业务逻辑且不需要在事务中组合多个数据访问操作的 CRUD 应用程序），那么您不必使用它们。您可以在 DAO 上放置事务注释。

（请注意，我不熟悉 JSF（在问题中链接的教程中使用），如果这个问题有特定于 JSF 的角度，那么我无法解决这个问题。）

如果您正在构建 CRUD 应用程序，请查看 Grails 之类的东西。它提供了所有开箱即用的应用程序配置，包括让您避免编写 DAO 的数据访问方法，此外，它还允许您在没有服务的情况下开始并在需要时添加它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:02:56.350

你注入了接口，而不是真正的实现（spring 为你注入了正确的东西）。因此，稍后如果需要，您可以根据需要更改实现。这是简单的解释，我相信很快就会有更复杂的解释。

# javascript - 为什么 NaN != 未定义？

> ID：16106365
> 
> 赞同：6
> 
> 时间：2013-04-19T13:57:30.190
> 
> 标签：javascript, variables

根据[Mozilla 文档](https://developer.mozilla.org/en/docs/JavaScript/Guide/Values,_variables,_and_literals)：

> 在数值上下文中使用时，未定义的值会转换为 NaN。

那么为什么以下两个都等于真的呢？：

```
NaN != undefined
NaN !== undefined 
```

我可以理解`Nan !== undefined`为变量类型会有所不同......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T13:59:09.740

NaN**根据定义**是“***不是数字***”

这并不意味着它是未定义的——它*是*明确**定义**的——而是在某种意义上它**不是**一个数字的未定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:59:18.727

这是因为，根据[ECMAScript 语言规范的第 4.3.23 节](http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.23) `NaN`定义为：

> 数字值，它是 IEEE 754“非数字”值

所以它是一个数字，而不是未定义或空值。该值在[第 8.3 节中进一步解释](http://www.ecma-international.org/ecma-262/5.1/#sec-8.5)

> ...; 对于 ECMAScript 代码，所有 NaN 值彼此无法区分。

[第 11.9.3 节](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.3)`NaN`定义了与 的相等比较：

> 比较 x == y，其中 x 和 y 是值，产生真或假。这样的比较执行如下： 如果 Type(x) 是 Number，那么：
> 
> 如果 x 是 NaN，则返回 false。
> 
> 如果 y 是 NaN，则返回 false。

为了进行比较，您应该`isNaN()`改用：

```
isNaN(NaN)
// true 
```

**更新**

的值`+undefined`不是数字，但它仍然是一个数字（尽管具有特殊值），因此不是未定义的。就像转换`undefined`为字符串如何产生一个已定义的字符串值一样。

# javascript - 如何显示动态增长的 HTML 页面的底部？

> ID：16106366
> 
> 赞同：0
> 
> 时间：2013-04-19T13:57:31.300
> 
> 标签：javascript, jquery

我的 HTML 页面每隔几秒钟就会通过底部的新内容动态增长。我希望用户总是看到页面底部。可以用jQuery来做吗？我每 100 毫秒尝试一次此代码段，但无法正常工作：

```
$("html, body").animate({scrollTop: $(document).height()}, 500); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:59:27.927

尝试这个

```
 setInterval(function(){
     $("html, body").animate({ scrollTop: $(document).height() }, 100);
  },100); 
```

[jsFiddle 演示](http://jsfiddle.net/mohammadAdil/DBzNR/2/)

# google-analytics - 谷歌分析跟踪标签相关的 mvc 应用程序

> ID：16106368
> 
> 赞同：0
> 
> 时间：2013-04-19T13:57:31.513
> 
> 标签：google-analytics

我有 MVC 应用程序，它只包含一个带有多个选项卡的页面。我正在使用 ajax 调用加载数据。我想包括 GA 来跟踪导航的选项卡。我在布局页面中使用 GA 代码。

我知道我必须调用 _gaq.push 方法来跟踪每个选项卡上的页面。但我的问题是有什么办法可以在公共地方做到这一点，这样我就不想在所有选项卡中重复代码（因为我有 15-16 个选项卡）

问候， Karthik G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T01:49:33.623

我会给选项卡链接一个类，然后使用 jQuery 的 .on 来监听点击以触发 GA 网页浏览。

像这样的东西...

```
 $('.tabclass').on('click', function(){
        _gaq.push(['_trackPageview', '/' + this.text])}); 
```

# templates - 如何将模板和加载项附加到 Outlook .msg 文件？

> ID：16106370
> 
> 赞同：0
> 
> 时间：2013-04-19T13:57:35.973
> 
> 标签：templates, vba, ms-word, outlook, msg

我有数百个带有类似书签的不同 Outlook .msg 模板。我想填写这些书签，以便他们使用 vba 代码从数据库中获取数据。

现在，就像在 word 文档中一样，这非常容易，您只需在 .dotm 文件中编写 vba 代码，然后将其附加到 .docx 文件中，查看下面的图片如何在 word 中完成。

现在我的问题是，我怎样才能对 Outlook .msg 文件做同样的事情。我的意思是，如果您检查选项 - > .msg 文件的加载项，则模板选项不存在。.msg 文件与 word 文件非常相似。任何想法如何做到这一点。通过选项或以编程方式接受任何选项？

提前致谢。

![word文档](https://i.stack.imgur.com/GD7sf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:26:28.557

MSG 文件与 DOC 文件完全不同。但是，您可以使用 Outlook 对象模型将 MSG 文件转换为 DOC 文件 - 使用 Namespace.OpenSharedItem 将 MSG 文件作为 MailItem 打开，然后调用 MailItem.SaveAs(..., olDoc)

# image - Apache Tomcat v7.0 正在删除重新初始化时上传的图像

> ID：16106372
> 
> 赞同：0
> 
> 时间：2013-04-19T13:57:39.030
> 
> 标签：image, apache, tomcat

我正在开发一个将图像上传到 Apache Tomcat 服务器的 Web 应用程序。问题是每当我在服务器上进行更改时，它都会重新初始化，并且之前加载的图像会从服务器上的图像文件夹中删除。

我想知道在重新初始化服务器时是否可以进行任何配置来维护这些文件。

我在 localhost:8080 上运行它，版本是 Apache Tomcat v7.0。我也在 E​​clipse IDE 上开发它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:29:11.737

答案基本上已经在评论中给出了，这里有更多的推理：

始终将上传的数据存储在 Web 应用程序之外的单独目录中。

原因之一正是您所发现的：应用程序的更新或重新部署将删除数据，否则。做备份是相当困难的。事实上，我建议不要让 webapp 目录完全可写入 tomcat，以减轻这个问题和下一个问题：

另一个问题是您正在向隐式服务器端代码注入敞开大门：想象有人将 jsp 上传到您的 Web 应用程序：这可能包含任意代码，除非您考虑过滤此类内容（没有人这样做，并且没有人在安全管理器/沙箱中运行 tomcat。当然这是一个简化）

此外，当您动态更新 webapp 数据时，您无法确定部署后上传了哪些数据，因此如果稍后上传更新，您将无法轻松将更新带回代码库：您基本上必须识别更改.

最后，您甚至不能假设 tomcat 总是解压缩 war 文件 - 有一个设置可以让 tomcat 直接从 war 文件中为应用程序提供服务，而无需将它们解压缩到 webapps。如果您不自己管理服务器，将平台更改为其他平台，或者将来 tomcat 的默认配置更改为此，您可能会感到困惑。

# wpf - WPF 中的 DrawingImage 事件处理程序

> ID：16106384
> 
> 赞同：0
> 
> 时间：2013-04-19T13:58:06.867
> 
> 标签：wpf, events, graph, drawing, handlers

是否可以在通过 DrawingImage 获得的绘图部分设置事件处理程序？例如，我绘制图形（带有顶点和边的数学图形），图形是从 txt 文件加载的，我想让顶点可移动（带有入射边），但我不知道该怎么做，因为我已经使用 DrawingImage 进行了绘图。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:08:54.390

看起来真的像[这样](https://stackoverflow.com/a/15580293/643085)，除了我采取了完全不同的方法。

WPF 的默认方法是一种称为[MVVM](https://stackoverflow.com/questions/14381402/wpf-programming-methodology/14382137#14382137)的方法，正如我所提到的，您不会“告诉 UI 做事”，而是定义适当的数据，并使用[DataBinding](http://msdn.microsoft.com/en-us/library/ms750612.aspx)让 UI“自己绘制”。

# jquery - 返回 JSON 数据后如何在视图上显示文本

> ID：16106387
> 
> 赞同：1
> 
> 时间：2013-04-19T13:58:13.003
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在使用`ASP.NET MVC 4`最新版本的`jQuery`.

我有一个用于输入分行号的文本框。在此文本框中输入分支编号并失去焦点后，我需要进行 AJAX 调用以检索分支名称。然后我需要在视图上显示这个分支名称，只是为了查看而不是编辑。

我的文本框的 HTML 标记和分支名称的“文本”：

```
<td class="edit-label">Branch Number: <span class="required">*</span></td>
<td>
    @Html.TextBoxFor(x => x.BranchNumber, new { maxlength = "6" })
    @Html.Display("BranchName", new { id = "BranchName" })
</td> 
```

我的 jQuery 代码：

```
$('#BranchNumber').blur(function () {
    var url = '@Url.Action("GetBranchName")';
    var data = { branchNumber: $('#BranchNumber').val() };

    $.getJSON(url, data, function (data) {
        $('#BranchName').text(data);  // Need to have an element to populate the data
    });
}); 
```

我调用服务以带回分支名称的操作方法：

```
public ActionResult GetBranchName(long branchNumber)
{
    Check.Argument.IsNotNegative(branchNumber, "branchNumber");

    string branchName = myService.GetBranchName(branchNumber);

    return Json(branchName, JsonRequestBehavior.AllowGet);
} 
```

我的视图模型：

```
public class MyViewModel
{
    public long BranchNumber { get; set; }

    public long BranchName { get; set; }
} 
```

当我返回分支名称时，我需要在视图上显示它。我不确定显示它的最佳方式是什么？我已经尝试过 LabelFor 和 DisplayFor 但它没有显示，所以当返回分支名称时它找不到控件所以它不显示。文本框工作正常，但我不希望用户能够更改分支的名称。

什么是最好的解决方案？我应该只有一个 span 元素，然后在这里显示分支名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:10:51.047

您可以使用强类型视图、任何 html 元素，并且仍然允许模型绑定器完成它的工作。

```
// your view
// using div as an example
<div id="@("Branch"+Model.BranchName)">@Model.BranchName</div>
//
// in your js do this
$.getJSON(url, data, function (data) {
    $('#Branch'+@Model.BranchName).text(data);
}); 
```

# html - 奇怪的媒体查询行为

> ID：16106390
> 
> 赞同：-2
> 
> 时间：2013-04-19T13:58:16.937
> 
> 标签：html, css, media-queries

我遇到了一些我一生都无法弄清楚的奇怪行为。

我有一个带有许多媒体查询的流体网格设计（准确地说是 7 个）。我没有假装我正在做的是最佳实践，所以我做了 7 个查询。

为简洁起见，我将只粘贴三个查询，一个是问题所在，一个是之前的一个，一个是紧随其后的。

**之前的那个**

```
@media only screen and (min-width: 1170px) and (max-width: 1189px) {
    body {
        color: PaleTurquoise;
    }    
} 
```

**令人不安的一个**

```
@media only screen and (min-width: 1190px) and (max-width: 1409px) {
    body {
        color: lime;
    }
} 
```

**紧随其后的那个**

```
@media only screen and (min-width: 1410px) {
    body {
        max-width: 2000;
        color: red;
    }
} 
```

那么发生了什么？好吧，两个媒体查询（之前，之后）将起作用并将字体的颜色更改为`PaleTurquoise`和`red`。造成麻烦的不是将其更改`font-color`为`lime`.

这里奇怪的部分是，如果我将任何其他 css 添加到令人不安的媒体查询中，那么该特定 css 将起作用。

为什么会这样？

我在此处粘贴了整个 css：[DPASTE -styles.css](http://dpaste.org/IGXRz/)

我在此处粘贴了整个 HTML：[DPASTE - index.html](http://dpaste.org/XyJah/#L16)

我也在使用[Erik Meyers 重置样式表](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:02:33.253

对于第二个媒体查询，您想将**字体**颜色设置为石灰？

当前您正在设置**背景**颜色。

试试这个：

```
@media only screen and (min-width: 1190px) and (max-width: 1409px) {
    body {
        color: lime;
    }
} 
```

# c# - 调用 ToString("YYYY-mm-dd") 导致错误的日期格式

> ID：16106394
> 
> 赞同：18
> 
> 时间：2013-04-19T13:58:24.533
> 
> 标签：c#, string-formatting

我有一个接受`DateTime`对象的构造函数：

```
public Report(DateTime date, string start = "0", string end = "0")
{
    Logger.Info("Creating a new Report...");

    StartTime = start;
    EndTime = end;
    Date = date.ToString("YYYY-mm-dd");

    SetStartEndTimes();

    Logger.Info("Report Created");
} 
```

现在，这在 3 天前还可以正常工作。但是，我今天休息后回来，这是我看到的结果：

![在此处输入图像描述](https://i.stack.imgur.com/mPNXX.png)

如您所见，传入的日期是正确的。但是，格式化之后，就不是了。同样，这在我休息之前有效。我回来了，我明白了。我错过了什么吗？为什么从一开始工作后它的格式会如此不正确？

**编辑**

多谢你们。混乱的部分是查看以前版本的源代码控制，这很有效。或者，也许我想象它工作。我不知道。但这种情况已经持续了大约 3 个月。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-19T14:00:16.607

年份必须小写，月份必须大写：

```
Date = date.ToString("yyyy-MM-dd");  // btw, lowercase mm means minutes 
```

[**自定义日期和时间格式字符串**](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-19T13:59:31.317

这：

```
Date = date.ToString("YYYY-mm-dd"); 
```

应该是这样的：

```
Date = date.ToString("yyyy-MM-dd"); 
```

小写字母`mm`会给你分钟。

# ruby-on-rails - Ruby Rails 3.2.x - 如何找到 UTF-8 字符

> ID：16106396
> 
> 赞同：0
> 
> 时间：2013-04-19T13:58:25.893
> 
> 标签：ruby-on-rails, utf-8

我不知道这是怎么发生的，但很可能是我现在开始时不小心在众多文件之一中添加了一个 UTF-8 字符

```
rails s 
```

我得到错误：

```
[2013-04-19 21:56:34] ERROR Encoding::UndefinedConversionError: "\xAD" from ASCII-8BIT to UTF-8
/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/log.rb:58:in `write'
/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/log.rb:58:in `<<'
/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/log.rb:58:in `log'
/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/log.rb:133:in `log'
/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/log.rb:71:in `error'
/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:98:in `rescue in run'
/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:113:in `run'
/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

如何找到导致此问题的文件？

我已经在每个语言环境文件中添加了 # encoding: UTF-8。所以不是他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:02:40.750

不知道这里发生了什么，我跑了

```
sudo dpkg-reconfigure locales
sudo update-locale 
```

重新启动网络服务器，一切恢复正常。这里发生了非常非常奇怪的事情。错误不知从何而来。

# solr - 如何获取具有特定索引和多值的 solr xml 数据？

> ID：16106407
> 
> 赞同：0
> 
> 时间：2013-04-19T13:59:04.743
> 
> 标签：solr

在存储的 solr 数据中

```
<doc>
<str name="id">44</str>
<str name="age">1</str>
<str name="employer_id">33</str>
<arr name="languages">...</arr>
<str name="latlng">37.36883,-122.0363496</str>
<str name="occupation">6</str>
<arr name="payrange">...</arr>
<arr name="shift">...</arr>
<arr name="workschedule">...</arr>
</doc> 
```

我想搜索所有职业 = 5 payrange = 8 或 9 或 10 且位置与 latlong 绑定的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:45:48.770

有关在 Solr 中执行查询的信息，请参考以下资源。

*   [Solr 查询语法](http://wiki.apache.org/solr/SolrQuerySyntax)
*   [常用查询参数](http://wiki.apache.org/solr/CommonQueryParameters)
*   [空间搜索](http://wiki.apache.org/solr/SpatialSearch)

您应该能够通过对您的职业和工资范围字段使用过滤器查询和范围查询来完成您想要的。您很可能需要使用[geodist](http://wiki.apache.org/solr/SpatialSearch#geodist_-_The_distance_function)函数来使用 latlong 进行位置边界。

# javascript - 小型 JS 库的问题

> ID：16106409
> 
> 赞同：0
> 
> 时间：2013-04-19T13:59:09.530
> 
> 标签：javascript, html, function, dom

我正在尝试编写一个小型 JS 验证库，为了好玩和学习 JS。这个想法是遍历表单标签中的元素，并根据其他自定义属性检查输入元素是否有效。

我现在被困在如何使用元素来调用同一“原型”中的函数

这是基于我正在尝试开发的教程，如果 SE 政策需要提及此代码的来源，请告诉我

将使用此函数从 html doc 调用代码

```
<script type="text/javascript">
    function processForm() {
        _('form1').validate();
    }
</script> 
```

这是库代码：

```
function _(id) {
if (id) {
    if (window === this) {
        return new _(id);
    }

    // We're in the correct object scop:
    // Init our element object and return the object
    this.e = document.getElementById(id);
    return this;
} else {
    return "NO ID PARAM WAS GIVEN";
}
}
_.prototype = {
validate    :function () {
                try {
                    var elem = this.e.elements;
                    for(var i = 0; i < elem.length; i++){
                        //alert(elem[i].getAttribute("id"));
                        // STUCK HERE, how to call the bgcolor function of this prototype
                        so i can change the bgcolor for the current elem of the loop ?
                    }
                }
                catch(err)
                {
                    alert(err.message);
                }
            },  

bgcolor: function (color) {
            this.e.style.background = color;
            return this;
        },
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:26:11.143

可能是这样的：

```
for (var i = 0; i < elem.length; i++){
    this.bgcolor(elem[i], "red");
} 
```

和

```
bgcolor: function (el, color) {
    el.style.background = color;
    return this;
} 
```

或者可能是一个默认为 的可选元素，`this`与您在表单本身上运行的现有代码保持同步。

```
bgcolor: function (color, el) {
    el = el || this;
    el.style.background = color;
    return this;
} 
```

# cross-platform - 使用 Appception 进行 HTML5 应用程序开发，但无法弄清楚模拟器是如何工作的

> ID：16106411
> 
> 赞同：0
> 
> 时间：2013-04-19T13:59:10.233
> 
> 标签：cross-platform

我刚开始使用[http://www.appception.com/](http://www.appception.com/)看看是否可以通过 Web 浏览器访问来开发 HTML5 应用程序。

当我在使用 Chrome 的项目上运行模拟器时，我看到一个标题为 noVNC 的空白屏幕；没有模拟器，在 Safari 上还有额外的屏幕“weinre”，但仍然没有模拟器，我正在通过这个平台在演示项目上运行模拟器，所以我认为它应该可以工作。

希望得到一些帮助，尤其是来自使用过 Appception 的人的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-11T07:19:42.697

确实，网站[http://www.appception.com](http://www.appception.com)为我们提供了在云上开发移动应用程序的独特机会，而无需部署大量软件，如 Android SDK、Java、Ant 和 Eclipse。您所需要的只是一个浏览器和带有 Android 或 iOS 的手机。

最近，Appception 的核心引擎进行了重建，以更快地加载 Android 模拟器和 Weinre 调试器，并保证在一两分钟内交付。请登录该站点，然后单击 Project->New，输入项目名称并选择所需的 Android SDK 目标和 Cordova 库。单击提交并等待项目创建完成。接下来在右侧项目区域列表中选择项目，然后单击顶部菜单 Debug->Emulator->Build，然后按 Go。

提交后，您将获得两个窗口：一个用于模拟器，另一个用于 Weinre。请等待模拟器已加载（通常可能需要 10 秒到 2 分钟，具体取决于系统加载）。最后，您将获得带有加载包的 Android 模拟器。

通过 Weinre，您可以动态调试包的 HTML 和 CSS 布局。要访问 Android 日志文件，请选择 Debug->Emulator->Log

Appception 具有以快速模式（只需几秒钟）加载包的独特功能，无需完全重建和重新安装。

# javascript - 如何使用 WinJS.Navigation 根据应用程序漫游设置重定向用户

> ID：16106413
> 
> 赞同：1
> 
> 时间：2013-04-19T13:59:12.410
> 
> 标签：javascript, navigation, microsoft-metro, winjs

我正在开发一个 Windows 8 html/java-script Metro 应用程序。当用户第一次启动应用程序时，将显示一个带有文本框的欢迎页面，用户可以在其中输入他/她的用户名。当用户按下按钮时，用户名被保存并发生重定向。此代码工作正常...

```
var appData = Windows.Storage.ApplicationData.current;
button.onclick = function (e) {
    var input = document.querySelector(".welcome #userName").value;
    if(input != null && input != "") {
         appData.roamingSettings.values["userName"] = input;
          WinJS.Navigation.navigate("/pages/items/items.html");
    }
} 
```

用户第二次进入应用程序时，我希望从起始页面到内容页面的重定向累积，而不需要用户采取任何行动......所以我看一下 roamingSettings 以及它是否包含密钥“userName” "，我尝试进行与按钮 onclick 函数中相同的 WinJS 调用。

```
if (appData.roamingSettings.values.hasKey("userName")) {
   WinJS.Navigation.navigate("/pages/items/items.html");
} 
```

问题是，这一次，没有重定向发生并且应用程序失败..（roamingSettings 包含正确的信息，所以它的重定向是问题所在）。代码放置在就绪函数中。

```
WinJS.UI.Pages.define("/pages/welcome/welcome.html", {
   ready: function (element, options) {
})(); 
```

所以我的问题是，使用 WinJS.Navigation 执行从一个页面到另一个页面的条件重定向的正确方法是什么？我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:31:50.563

在 default.js 中进行导航（如@Gotdibbs 建议的那样）应该可以工作。激活的处理程序中的代码在函数结束时应该看起来像这样。

```
args.setPromise(WinJS.UI.processAll().then(function () {
    // if app was suspended while on a page, go there
    // else ...
    if (nav.location) {
        nav.history.current.initialPlaceholder = true;
        return nav.navigate(nav.location, nav.state);
    }
    else if (appData.roamingSettings.values.hasKey("userName")) {
        WinJS.Navigation.navigate("/pages/items/items.html");
    }
    else {
        return nav.navigate(Application.navigator.home);
    }
})); 
```

# c++ - 使用位移运算将两个变量相乘

> ID：16106414
> 
> 赞同：0
> 
> 时间：2013-04-19T13:59:18.160
> 
> 标签：c++, c, unix, bit-manipulation

我有两个变量（实际上是两个不同矩阵的元素）。例如我想乘

```
a[i][k]*b[k][j] 
```

使用位操作，我该怎么做。

我看到了对乘法常量的引用，而不是 3*2、3*4、3*8 等变量。但是我如何将相同的技术应用于乘法变量？如果有关于这个的帖子，你能指出我吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T14:14:56.217

给定两个积分变量

```
unsigned X, Y; 
```

并且给定 Commodore 64、Apple ][ 或其他一些没有自己的乘法指令的架构，这将使数字相乘。

```
unsigned answer = 0;
while ( X )
{
  answer <<= 1;
  if ( X & 1 )
    answer += Y;
  X >>= 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:11:22.077

位移乘法仅在乘以 2 的幂（2、4、8、16 等）时可用。然后将乘法简化为单位移位操作：

```
 x1 = 2^n;
  result = x2 << n;  // This is the same as x2 * x1 
```

对于任意情况，最有效的方法是使用正态乘法：

```
a[i][k]*b[k][j] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T14:17:23.407

如果您要乘以巨大的矩阵，重要的是具有良好缓存行为的高效算法。对于 C++，请查看[Eigen 库](http://eigen.tuxfamily.org/index.php?title=Main_Page)。在现代 CPU 上，您无法对两个变量的乘法进行微优化。

# jpa - 实体在jpa缓存中多次存在

> ID：16106417
> 
> 赞同：0
> 
> 时间：2013-04-19T13:59:20.293
> 
> 标签：jpa, eclipselink, glassfish-3

我的 jpa 2.01 glassfish v3 服务器有一个有趣的缓存问题。

我通过 Jax-Rs POST 向现有客户插入电话号码。之后，我在单独的 jax-rs GET 请求中读取了该客户的所有电话号码。在 GET 中缺少新号码。当我在 5 秒后重复请求时，它包含数字。我假设 GET 正在从存储在 jpa 缓存中的客户的旧实例中读取电话号码。当我在插入新号码后将客户从缓存中逐出时，我的问题就“解决了”。

```
@Entity
@Table(schema="elm", name="CUSTOMER")
@Cache(expiry=5000)
public class Customer implements Serializable {

    private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
private Long id;

private String no;

    private String name;....

@OneToMany(
        cascade=CascadeType.ALL, 
        mappedBy="customer", 
        fetch=FetchType.LAZY, 
        targetEntity=Comm.class
    )
private List<Comm> comms = new Vector<Comm>(0);
}

@Entity
@Table(schema="elm", name="COMM")
@Cache(expiry=Constants.SHORT_CACHE_PERIODE_MS)
public class Comm implements Serializable {
    private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
private Long id;

private String value;

@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="elmID")
private Customer customer;

} 
```

我通过以下方式将两个实体相互添加：

```
 Customer e = em.find(Customer.class, cusID);
    c.setCustomer(e);
    e.getComms().add(c); 
```

我不叫坚持或合并。由于 cascade=CascadeType.ALL ，它将新电话号码插入数据库。

我认为有两个客户类浮动的实例。如何记录客户类实例。我需要 st 来告诉我有两个不同的。St like customer.getJPAIdentificationId();

实体上的更改在包含 @PersistenceContext(unitName = "DATA") 私有 EntityManager em; 的 @Stateless Bean 中进行。

谢谢哈桑

# jsf-2 - 如何在 preRenderView 侦听器方法中执行导航

> ID：16106418
> 
> 赞同：6
> 
> 时间：2013-04-19T13:59:24.370
> 
> 标签：jsf-2, navigation, listener, prerenderview

我从[<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么开始？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for)

我有一个预渲染视图事件监听器：

```
<f:metadata>
    <f:event type="preRenderView" listener="#{loginBean.performWeakLogin()}" />
</f:metadata> 
```

它调用以下方法：

```
public String performWeakLogin() {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    String parameter_value = (String) facesContext.getExternalContext().getRequestParameterMap().get("txtName");

    if (parameter_value != null && parameter_value.equalsIgnoreCase("pippo")) {
        try {
            return "mainPortal";
        } catch (IOException ex) {
            return null;
        }
    } else {
        return null;
    }
} 
```

和以下导航规则：

```
<navigation-rule>
    <from-view-id>/stdPortal/index.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>mainPortal</from-outcome>
        <to-view-id>/stdPortal/stdPages/mainPortal.xhtml</to-view-id>
        <redirect/>
    </navigation-case>
</navigation-rule> 
```

但是，它不执行导航。它在我使用命令按钮时起作用，如下所示：

```
<p:commandButton ... action="#{loginBean.performWeakLogin()}"  /> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T14:06:21.627

基于方法返回值的导航仅由实现[`ActionSource2`](http://docs.oracle.com/javaee/6/api/javax/faces/component/ActionSource2.html)接口的组件执行，并为其提供一个属性`MethodExpression`，例如组件的`action`属性，该属性在*Apply Request Values*阶段[`UICommand`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UICommand.html)排队并在*Invoke Application*阶段调用。

 **这`<f:event listener>`仅仅是一个[组件系统事件](http://docs.oracle.com/javaee/6/api/javax/faces/event/ComponentSystemEvent.html)监听器方法，而不是一个动作方法。您需要手动执行导航，如下所示：

```
public void performWeakLogin() {
    // ...

    FacesContext fc = FacesContext.getCurrentInstance();
    fc.getApplication().getNavigationHandler().handleNavigation(fc, null, "mainPortal");
} 
```

或者，您也可以在给定的 URL 上发送重定向，这对于您不想在内部导航但在外部导航的情况更有用：

```
public void performWeakLogin() throws IOException {
    // ...

    ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
    ec.redirect(ec.getRequestContextPath() + "/stdPortal/stdPages/mainPortal.xhtml");
} 
```

* * *

**与具体问题**无关，** [servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)是执行基于请求的授权/身份验证工作的更好场所。**

 **### 也可以看看：

*   [有没有简单的方法来预处理和重定向 GET 请求？](https://stackoverflow.com/questions/7294651/is-there-any-easy-way-to-preprocess-and-redirect-get-requests/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T09:27:43.030

我使用 JBoss 7 和 JSF 2.1。BalusC 的解决方案是重定向到 JBoss 默认错误页面，即使我已经在 web.xml 中设置了默认错误页面‎‎

```
<error-page>
    <error-code>404</error-code>
    <location>/myapp/404.xhtml</location>
</error-page> 
```

为了重定向到我自己的错误页面，我使用响应来发送错误：

```
FacesContext facesContext = FacesContext.getCurrentInstance();
HttpServletResponse response = (HttpServletResponse)facesContext.getExternalContext().getResponse();
try {
    response.sendError(404);
} catch (IOException ioe) {
    ioe.printStackTrace();
}
facesContext.responseComplete(); 
```****

# jqplot - jqplot 在刻度之间居中月份

> ID：16106423
> 
> 赞同：2
> 
> 时间：2013-04-19T13:59:49.043
> 
> 标签：jqplot

很直接的问题。我有一个看起来像这样的 jqplotchart：

![在此处输入图像描述](https://i.stack.imgur.com/NhxUU.png)

我希望它看起来像这样（检查 x 轴）：> 这是经过照片处理的图像 :)

![在此处输入图像描述](https://i.stack.imgur.com/BErb7.png)

所以，我希望刻度线在每月的第一天，但​​ id' 就像在每个月的第一天之间居中的标签。我怎么能做到这一点？我尝试使用 CanvasAxisTickRenderer，但我能想到的最好的事情是前缀选项（添加空格），它将月份“可能”放在画布之外。

我当前用于 xaxis 的 jqplot 代码如下所示：

```
 xaxis:{
                renderer:$.jqplot.DateAxisRenderer,
                tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                tickOptions:{
                    formatString:'%B',
                    showMark: false,
                    labelPosition: 'start',
                    fontFamily: 'helvetica, sans-serif',
                    fontSize: '8pt',
                    labelPosition: 'middle',
                },
                tickInterval: 'month',                  
                 min:'<?php echo date("Y");?>-01-01',
                 max:'<?php echo date("Y-m-d"); ?>'
            }, 
```

谢谢你的建议！

编辑：重要的是要提到：这是一个动态生成的图表，所以我认为硬编码标签不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T20:36:53.013

我使用这种技术，它可以绘制图形并根据需要将标签居中。我知道这可能不适合你，但你可以试一试。

```
xaxis: {
         show: true,
         label: "Date/Time",
         showLabel: false,
         showTicks: true,
         renderer:$.jqplot.CategoryAxisRenderer
       } 
```

# wordpress - 在 wordpress 中排队时是否可以添加带有 IE 条件注释的样式表？

> ID：16106424
> 
> 赞同：2
> 
> 时间：2013-04-19T13:59:54.200
> 
> 标签：wordpress, wordpress-theming

我正在更新我自己构建的主题，并且已经轻松地进行了一些更改。

我的主题的样式表是通过functions.php文件中的wp_enqueue_style添加到页头的，如下：

```
function gridded_enqueue_styles() {
    wp_enqueue_style( 'themever-style', get_stylesheet_uri() );
wp_enqueue_style( 'bootstrap-css', get_stylesheet_directory_uri() .'/css/bootstrap.min.css' );
}

add_action('wp_enqueue_scripts', 'gridded_enqueue_styles'); 
```

样式表已加载，页面呈现，一切都很好。

现在我需要添加一些带有 IE 条件注释的样式表，如下所示：

```
<!--[if IE 7]>
    <link rel='stylesheet' href='http://theme_path/css/ie7.css' type='text/css' media='all' />
<![endif]--> 
```

可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:50:31.297

我注意到你已经解决了这个问题。您还可以检查以下代码以获取另一种解决方案：

```
add_action( 'wp_head', 'wps_add_ie_html5_shim' );
/**
 *  Add IE conditional html5 shim to header
 */
function wps_add_ie_html5_shim() {
    global $is_IE;
    if ( $is_IE ) {
        echo '<!--[if lt IE 9]>';
        echo '<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>';
        echo '<![endif]-->';
    }
} 
```

您还可以使用 wordpress 全局变量检查特定的浏览器，如下所示：

浏览器检测布尔值 这些全局变量存储有关用户在哪个浏览器上的数据。

```
$is_IE (boolean) Internet Explorer
$is_iphone (boolean) iPhone Safari
$is_chrome (boolean) Google Chrome
$is_safari (boolean) Safari
$is_NS4 (boolean) Netscape 4
$is_opera (boolean) Opera
$is_macIE (boolean) Mac Internet Explorer
$is_winIE (boolean) Windows Internet Explorer
$is_gecko (boolean) FireFox
$is_lynx (boolean) 
```

欲了解更多信息：[http ://codex.wordpress.org/Global_Variables](http://codex.wordpress.org/Global_Variables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:44:01.747

我过去在我的 header.php 文件中完成了它，没有任何不良影响。

# asp.net - 带有 PostBackTrigger 的 UpdatePanel 中的 ASP.NET FileUpload.HasFile

> ID：16106426
> 
> 赞同：0
> 
> 时间：2013-04-19T13:59:56.640
> 
> 标签：asp.net, .net, file-upload

我有一个 UpdatePanel，里面是一个 FileUpload 控件。我知道人们对此有疑问，而且似乎大多数问题都源于尝试使用 AsyncPostBackTrigger。我已经接受了一般建议并使用了一个简单的 PostBackTrigger。这适用于 FireFox、Chrome 但不适用于 IE。

这是我的设置：

```
<asp:Panel runat="server" ID="Panel1" Width="100%">
            <asp:UpdatePanel runat="server" ID="updRouteGroup" UpdateMode="Conditional">
              <Triggers>
                <asp:PostBackTrigger ControlID="btnOnHold"/>
              </Triggers>

              <ContentTemplate>        
               <asp:Panel ID="pnlImpExcel" runat="Server" >
              <div style="width:100%">
               <table colspan="0" width="100%" cellpadding="0" cellspacing="0" border="1">
                  <tr>
                     <th colspan="3">
                        On Hold Music
                     </th>
                  </tr>
                  <tr>                  
                     <td align="left" valign="middle" width="600px">
                        <input type="button" value="Browse" id="browse" class="button" /> Current File: <asp:Label runat="server" class="button" ID="lblOnHoldFile" />   
                     </td>                  
                     <td align="right" valign="middle">
                        Enabled: <asp:CheckBox ID="cbOnHold" runat="server" />    &nbsp;&nbsp;
                        <asp:FileUpload ID="filOnHold" runat="server" style="visibility:hidden;width:0px;" onChange="callme(this)"/>
                        <asp:Button ID="btnOnHold" runat="server" style="margin-right:7px;width:87px;" Text="Save" CssClass="button" OnClick="btnSaveOnHold_OnClick" />         
                     </td>
                  </tr>
                  <tr><td colspan ="2" align="center"><asp:Label runat="server" ID="lblUploadError" style="color: Red;" Visible="false" /></td></tr>
               </table> 

               </div>
               </asp:Panel> 
               </ContentTemplate> 
            </asp:UpdatePanel> 
            </asp:Panel> 
```

以及背后的代码：

```
protected void btnSaveOnHold_OnClick(object sender, EventArgs e)
{
    //Misc unrelated stuff

    if (filOnHold.HasFile)
    {
        //Process file, do other stuff
        //However, this is ALWAYS FALSE.
    }

    //Misc unrelated stuff
} 
```

这是js函数：

```
 function callme(oFile) {
      window.alert(oFile.value);
      document.getElementById('<%= lblOnHoldFile.ClientID %>').innerText = oFile.value;
   } 
```

似乎我正在按照建议执行此操作，但 HasFile 总是错误的，即使我没有使用 AsyncPostBackTrigger。

有没有人遇到过这个？谢谢。

# android - 如何通过警报对话框指示成功？

> ID：16106428
> 
> 赞同：2
> 
> 时间：2013-04-19T13:59:59.273
> 
> 标签：android, user-interface, android-alertdialog

我希望这个问题不会太开放。我试图找出在我的程序中执行特定功能的最简单方法。无需过多介绍程序本身的细节，所发生的事情是弹出一个警告对话框，一旦用户在对话框上点击“Okay”，一个字符串就会被写入文件。在我编写的执行此操作的方法中，它通过布尔值指示成功或失败。我正在尝试弄清楚如何在不必进行整个其他警报对话框的情况下向用户指示它是否成功，但我不知道该怎么做。我可以只更改前一个消息文本吗？如果可以的话，我该如何让它保持足够长的时间让用户阅读它，然后通过用户输入或自行消失？如果我' 我在这里不够清楚，我将编辑我的问题。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:06:02.253

最好的方法是只使用`Toast`. 您可以更改对话框中的文本，但对于此应用程序没有意义。使用`Toast`您的布尔标志很容易。

```
if(yourBooleanFlagIsTrue){
    Toast.makeText(context, "Success", Toast.LENGTH_SHORT).show();
} else {
    Toast.makeText(context, "Failure", Toast.LENGTH_SHORT).show();
} 
```

上面代码中的上下文将根据您使用`Toast`. 例如，如果它在一个片段中，您将不得不使用`getActivity()`. 如果它在`activity`你可以使用的范围内`getApplicationContext()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:03:57.263

创建 Toast 消息。即使您愿意，也可以为 Toast 创建自定义设计。详情见[这里](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)_

# c - 使用汇编在 C 中加法

> ID：16106430
> 
> 赞同：2
> 
> 时间：2013-04-19T14:00:03.513
> 
> 标签：c, gcc, assembly, x86, add

我很擅长 C，不太擅长汇编，但出于兴趣，我想使用 gcc 在 C 中进行一些工作。问题是我的程序要么给出一些愚蠢的数字，要么崩溃。

```
unsigned sadd32(unsigned a, unsigned b)
{
    unsigned c = 0;

    __asm__("movl %%eax, %0" : "=a"(a));
    __asm__("addl %%eax, %0" : "=b"(b));
    __asm__("movl %edx, 0xffffffff");
    __asm__("cmovc %eax, %edx");

    __asm__("movl %0, %%eax" : "=c"(c));

    return c;
} 
```

我确定我做了一些愚蠢的事情，如果这对任何人来说都是显而易见的？？;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:35:57.717

除了关于使用单个`__asm__`“指令”和 AT&T 语法的建议之外，让编译器加载具有最大值的寄存器可能会更好。理想情况下：

```
/* static __inline__ */ unsigned sadd32 (unsigned a, unsigned b)
{
    __asm__ ("addl %k1, %k0\n\t"
             "cmovcl %k2, %k0\n\t"
             : "+r" (a) : "r" (b), "r" (0xffffffff) : "cc");

    return (a);
} 
```

这种形式也适用于 x86-64，其中第一个和第二个参数将分别位于`%rdi`(using `%edi`) 和`%rsi`(using `%esi`) 中。使用限定符指定此函数会更好`inline`：编译器可能已经加载了“max”，或者可能能够安排更好的方式来加载它，等等。它也不需要返回`%rax`or中的值`%eax`。

很多 gcc 内联汇编的教程已经过时了。我发现的最好的是 x86[-64] 的[Lockless Inc](http://locklessinc.com/articles/gcc_asm/)教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:49:58.970

**编辑：**代码更正，正如迈克尔评论说这是**饱和的 add**。

gcc内联汇编的使用要点：

1.  将内联程序集放在一个`asm(`...`)`块中。
2.  在扩展汇编中定义输入、输出和破坏寄存器。
3.  为了优化寄存器使用，让 gcc 决定使用哪些寄存器，当任何通用寄存器对您的代码同样适用时。
4.  您不需要使用`mov`在内联汇编块的开头设置值，只需定义输入。
5.  仔细检查[GCC-Inline-Assembly-HOWTO](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)，尤其是关于[Extended Asm](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html#s5)的部分。

这是代码：

```
#include <stdio.h>

unsigned my_sadd(unsigned a, unsigned b)
{
    asm(
            "addl %2, %0;"
            "cmovcl %3, %0;"
            /* outputs */
            : "=r"(a)
            /* inputs */
            : "0"(a), "r"(b), "r" (0xffffffff)
        );
    return a;
}

int main(void)
{
    unsigned a;
    unsigned b;
    unsigned c;

    a = 123456;
    b = 314159;

    c = my_sadd(a, b);
    printf("%u + %u = %u\n", a, b, c);

    a = 0x80000000;
    b = 0xF0000000;
    c = my_sadd(a, b);

    printf("%u + %u = %u\n", a, b, c);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T14:50:41.350

```
#include <stdio.h>
#include <stdlib.h>

unsigned sadd32(unsigned a, unsigned b)
{
    unsigned c = 0;
   __asm__ ("movl %2, %%eax\n\t"
                    "addl %1, %%eax\n\t"
                    "movl %%eax, %0\n\t"
                    :"=r"(c)
                    :"r"(a),"r"(b)
                    :"%eax"
             );
    return c;
}

int main()
{
    unsigned int a=3,b=5;
    printf("The sum of %u and %u is %u\n",a,b,sadd32(a,b));
    return 0;
} 
```

参考：[http ://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)

据我所知，您的代码有一些缺陷::

```
unsigned sadd32(unsigned a, unsigned b)
{
    unsigned c = 0;

    __asm__("movl %%eax, %0" : "=a"(a));
    __asm__("addl %%eax, %0" : "=b"(b));
    __asm__("movl %edx, 0xffffffff"); /* this here, you are specifying a manual location, may not be accessible or valid */
    __asm__("cmovc %eax, %edx"); /* resulting in its error */

    __asm__("movl %0, %%eax" : "=c"(c));

    return c;
} 
```

另外，我相信您不了解“=$”的概念。据我所知，您只是在那里写变量名，但这不是它的工作方式。从该站点来看，约束约束（众所周知）如下：

1.  "m" ：允许使用内存操作数，机器通常支持的任何类型的地址。
2.  "o" ：允许使用内存操作数，但前提是地址是可偏移的。即，向地址添加一个小的偏移量会给出一个有效的地址。
3.  "V" ：不可偏移的内存操作数。换句话说，任何符合`m’ constraint but not the`o'约束的东西。
4.  "i" ：允许立即整数操作数（具有常数值的操作数）。这包括符号常量，其值仅在汇编时才知道。
5.  "n" ：允许使用具有已知数值的立即整数操作数。许多系统不支持小于一个字宽的操作数的汇编时间常数。这些操作数的约束应该使用“n”而不是“i”。
6.  "g" ：允许任何寄存器、内存或立即整数操作数，但不是通用寄存器的寄存器除外。

有关更多示例和其他限制，请参阅该站点。希望这有帮助！:)

# java - 跨域认证

> ID：16106431
> 
> 赞同：2
> 
> 时间：2013-04-19T14:00:05.543
> 
> 标签：java, http, spring-security, shiro

我打算设置一个可供其他站点访问的网络服务。这个想法是必须保护 Web 服务，并且每个访问 Web 服务的站点都将根据其注册域进行身份验证。

*   网站所有者将从我的 Web 服务的 Web 前端注册他们的域（如 foo.com）
*   接下来，他们的站点将发出 HTTP 方法（`GET, PUT, POST, DELETE`等），通常是 Javascript HTTP 请求
*   访问 Web 服务的站点无需进行身份验证；Web 服务将确定它来自的域是否已预先注册，如果是，我将根据站点的域处理请求。

我现在在想的问题是这种系统是否会“扩展”并“工作”

我曾使用过 Apache Shiro 和 Spring Security，但我从未遇到过这种要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:01:45.030

请注意，根据设计，您的系统将在没有密码的情况下对用户进行身份验证。这意味着，如果用户从[http://foo.com](http://foo.com)访问时使用访问权限，他将`foo.com`在身份验证后获得用户权限，而无需提供密码。我想建议您自己解决问题`PreAuthenticatedProcessingFilter`： http: [//static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e6167](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e6167) 在您的实施中`getPreAuthenticatedPrincipal`，只需获取请求 URL，从请求 URL 中提取域（不包括子域）信息并使用`PreAuthenticatedAuthenticationProvider`. `AuthenticationUserDetailsService`of`PreAuthenticatedAuthenticationProvider`应该从数据库中加载注册的域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:30:28.413

我想我看到了一种使用自定义过滤器的方法：

1.  添加您自己的[自定义过滤器](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-custom-filters)，例如 PartnerSiteCheckerFilter。它将具有每个合作伙伴服务器的 IP 地址列表。它将仅检查 API 请求（例如 /api/**）。任何与 IP 不匹配的请求都将被拒绝 (AccesDeniedException)。
2.  在注册过程中，将新域保存到数据库，然后获取受信任的 IP 地址列表

    ```
    InetAddress[] hosts = InetAddress.getAllByName( "www.stackoverflow.com" );
    for(InetAddress host : hosts) {
        String ip = host.getHostAddress();
    } 
    // add ip to a list 
    ```

3.  更新 PartnerSiteCheckerFilter 内的 IP 列表。

4.  准备一些组件，该组件将在应用程序启动时从 DB 读取域列表，然后获取每个服务器的 IP 并将此列表注入 PartnerSiteCheckerFilter。
5.  每个域的受信任服务器列表可能会在运行时更改。因此，提供一些更新它的方法可能会有所帮助。

希望这可以帮助。随时发布任何问题。

# vb.net - vb.net：UserControl-CheckBox 和 Class-Property 的 DataBinding 未在 PropertyChange 上更新

> ID：16106436
> 
> 赞同：0
> 
> 时间：2013-04-19T14:00:16.980
> 
> 标签：vb.net, winforms, data-binding, user-controls

我制作了一个带有复选框的小型 UserControl，并尝试将其 DataBind 到类的布尔属性。Binding的*DataSourceUpdateMode*设置为*OnPropertyChanged*。不幸的是，它没有按预期工作。

如果我更改我的类属性，复选框会立即做出反应，但不会反过来。单击复选框不会立即更改类属性。只有当您离开用户控件（pe 进入另一个控件）时，类属性才会更新。我猜是因为复选框只有在离开后才会被验证。但为什么？

任何想法都非常感谢！

问候

基督教

这是一些简单的代码（不是 c&p，调试器不会在真实代码上给我任何错误）：

**班上：**

```
Imports System.ComponentModel
Public Class _testClass

    Implements INotifyPropertyChanged
    Public Event PropertyChanged(ByVal sender As Object, ByVal e As PropertyChangedEventArgs) Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged

    Private Sub NotifyPropertyChanged(ByVal info As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(info))
    End Sub

    Private _Status As Boolean
    Public Property Status() As Boolean
        Get
            Return _Status
        End Get
        Set(ByVal value As Boolean)
            _Status = value
            NotifyPropertyChanged("Status")
            Debug.WriteLine("CLASS " & value)
        End Set
    End Property

End Class 
```

**用户控件：**

```
Imports System.ComponentModel
Public Class _testcontrol

    Public Event Valuechanged As EventHandler

    Public Property OnOff() As Boolean
        Get
            Return CheckBox1.Checked
        End Get
        Set(ByVal value As Boolean)
            CheckBox1.Checked = value
            Debug.WriteLine("PROPERTY " & value)
        End Set
    End Property

    Private Sub CheckBox1_CheckedChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles CheckBox1.CheckedChanged
        RaiseEvent Valuechanged(sender, e)
        Debug.WriteLine("EVENT")
        OnOff = CheckBox1.Checked
    End Sub
End Class 
```

**数据绑定：**

```
Public Class Form1
    Dim testclass As New _testClass

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Me.Testcontrol.DataBindings.Add(New Binding("OnOff", Me.testclass, "Status", True, DataSourceUpdateMode.OnPropertyChanged))
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:59:59.167

尝试使您在 XAML 中的绑定更容易和更好地使用 wpf。也使用`CheckBox1.CheckedChanged`事件不是数据绑定。您可以手动绑定或连接事件，但数据绑定更好。

这是一个示例`DependencyProperty`：

```
 Public Shared ReadOnly OnOffProperty As DependencyProperty = DependencyProperty.Register("OnOff", GetType(Boolean), GetType(_testcontrol), New PropertyMetadata("", New PropertyChangedCallback(AddressOf On_OnOffChanged)))

    Private Shared Sub On_OnOffChanged)(d As DependencyObject, e As DependencyPropertyChangedEventArgs)
        'Do what you want to do with the new value eg: set OnOff
    End Sub 
```

但是在您的情况下，我可能会尝试直接在 wpf 中绑定到 Checkbox 而根本不使用 a `UserControl`。

编辑：

很抱歉，我以为我在 WPF 上设置了问题过滤器，但没有看到这是一个 WinForms 问题；-) 不幸的是，我对 WinForm 绑定的特性一无所知，所以我帮不了你。如果您有这么大的 WinForms 项目，显然您不应该更改为 WPF。对于我作为一个非 WinForm-Guy 的我来说，所描述的行为是有道理的。如果你做了一个`UserControl`你把处理事情的责任交给这个控件。当您离开此控件时，下一层知道要更新。另一个方向是事件驱动，因此它会对变化做出反应。

但正如我所说，我不知道 WinForms。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T21:14:10.597

解决方案很简单：

使用 OnPropertyChanged 的​​ DataBinding 仅在属性及其事件共享相同名称时才有效！

-> 将用户控件事件重命名为 OnOffChanged，一切正常！

问候 cl10k

# cookies - LoadRunner web_add_header() 和重定向

> ID：16106437
> 
> 赞同：0
> 
> 时间：2013-04-19T14:00:18.280
> 
> 标签：cookies, loadrunner

首先我从 VUGen 运行它（它是手工构建的）：

```
Action()
{
    web_cleanup_cookies();
    web_cache_cleanup();

    web_url("entrypoint", 
            "URL=http://e34jbsl00430.devillo.com:8080/entrypoint/", 
            "TargetFrame=", 
            "Resource=0", 
            "RecContentType=text/html", 
            "Referer=",
            "Mode=HTML", 
            LAST);

    return 0;
} 
```

该页面无法打开，并且 URL 中出现了 sessionid。可能在一些重定向之后。

在打开 FireBug 的 Firefox 中手动执行此操作时，我得到以下请求/响应标头：

```
Response Headers

Cache-Control   no-cache, no-store

Content-Length  0

Date    Fri, 19 Apr 2013 13:49:51 GMT

Expires Thu, 01 Jan 1970 00:00:00 GMT

Location        http://e34jbsl00430.devillo.com:8080/entrypoint/?0

Pragma  no-cache

Server  Apache-Coyote/1.1

Set-Cookie      ENTRYPOINT_JSESSIONID=WgfuCXmTF7VTCsmhWYvU-WY7; Path=/entrypoint; HttpOnly

X-Frame-Options DENY

Request Headers

Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8

Accept-Encoding gzip, deflate

Accept-Language no,en-gb;q=0.7,en;q=0.3

Connection      keep-alive

Cookie  ENTRYPOINT_JSESSIONID=DnVj0xzyLaUOKfUEFIP6bpF-

Host    e34jbsl00430.devillo.no:8080

User-Agent      Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1 
```

然后我运行相同的脚本，但`web_add_header("Cookie","ENTRYPOINT_JSESSIONID=dummy");` 它工作得很好。

为什么要将此虚拟标头添加到我的脚本中才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-06T15:18:23.020

看起来该应用程序的开发人员为测试目的留下了一个安全漏洞，并且在 JSESSION 实施后没有关闭它。

看起来这个会话 ID“虚拟”总是有效的。尝试关联真实的

> ENTRYPOINT_JSESSIONID=WgfuCXmTF7VTCsmhWYvU-WY7；

使用

```
**web_reg_save_param_regexp**("ParamName=pJSESSION","RegExp=JSESSIONID=(.*?);","Ordinal=ALL",SEARCH_FILTERS, "Scope=Cookies",LAST); 
```

并像以前一样通过它，但是

```
web_add_header("Cookie","ENTRYPOINT_JSESSIONID={pJSESSION}"); 
```

# c# - 代码中的 CPU 处理

> ID：16106443
> 
> 赞同：0
> 
> 时间：2013-04-19T14:00:42.703
> 
> 标签：c#, cpu-usage

我如何知道在我的代码中使用某个例程的 CPU 处理量。这可能吗？我可以将其用作我的程序...使用：

```
CpuUsage _cu = new CpuUsage();
cpuCounter = new PerformanceCounter();
cpuCounter.CategoryName = "Processor";
cpuCounter.CounterName = "% Processor Time";
cpuCounter.InstanceName = "_total";
string cpuUsage = _cu.GetUsage(); 
```

但是有什么方法可以只获得一个特定的例程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:09:56.970

我怀疑一个正确的答案将包括在最新的 Visual Studio 中编写性能监控工具。同时，我想知道[Stopwatch 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)是否有用？

```
var stopWatch = new System.Diagnostics.Stopwatch.StartNew();
myFunctionToBeTimed();
Console.Writeline(stopWatch.ElapsedTicks.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:16:23.377

除非您的代码正在等待 IO，否则 CPU 使用率将约为 100%（它运行的核心），对吗？

# tcp - Spring Integration TCP强制从双方重新连接

> ID：16106444
> 
> 赞同：1
> 
> 时间：2013-04-19T14:00:45.300
> 
> 标签：tcp, spring-integration

我最近收到了关于如何从客户端强制重新连接的答案（客户端模式 TCP 连接工厂和适配器）。

但我还需要能够关闭来自服务器端的连接（服务器 TCP 连接工厂和非客户端模式适配器）。

我需要支持这样一种情况，即如果某些自定义关联逻辑不同步，则连接将关闭，并且双方都会通过重置其计数器等来对此做出反应。

所以我需要：

1.  强制 TCP 与服务器断开连接
2.  强制从客户端重新连接 TCP
3.  让服务器代码发现连接已从客户端关闭（是否有事件等？）
4.  让客户端代码发现连接已从服务器关闭（事件？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:51:20.150

3.0 版本（目前处于里程碑 1）具有新的[TCP 连接事件](http://static.springsource.org/spring-integration/docs/3.0.0.BUILD-SNAPSHOT/reference/html/whats-new.html)功能...

M1 包含该功能，但[文档](http://static.springsource.org/spring-integration/docs/3.0.0.BUILD-SNAPSHOT/reference/html/ip.html#tcp-events)是在 M1 之后添加的，并且在构建快照中可用。

您可以实现自己的，也可以`ApplicationListener`配置`<int-ip:tcp-connection-event-inbound-channel-adapter/>`将事件发送到`<channel/>`.

此外，正如[新增](http://static.springsource.org/spring-integration/docs/3.0.0.BUILD-SNAPSHOT/reference/html/whats-new.html)功能中所述，您现在可以使用它的 id 强制关闭任何连接`connectionFactory.closeConnection(String connectionId)`。

# python - manage.py 是如何工作的？

> ID：16106445
> 
> 赞同：22
> 
> 时间：2013-04-19T14:00:49.023
> 
> 标签：python, django

我刚刚安装了 django，我正在他们的网站上做教程。

我在命令行上按照他们的指示进行操作，但我想知道为什么？

例如，您可以访问命令'manage.py startapp xyz'，它会创建一个包，但是当我查看manage.py时，它只包含以下代码（由django添加，我没有触摸manage.py )

```
#!/usr/bin/env python
import os
import sys

if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "DjangoProject12.settings")

    from django.core.management import execute_from_command_line

    execute_from_command_line(sys.argv) 
```

我在 manage.py 或其他任何地方都看不到 startapp 的任何方法。我不确定这是否是 django 特有的，或者我的 python 知识是否存在一些根本性的差距。谢谢你。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-19T14:03:12.747

您需要查看[`django.core.management`包装](https://github.com/django/django/tree/master/django/core/management)；该[`execute_from_command_line()`函数](https://github.com/django/django/blob/87bb746ea6bb4bf6fb9f87065d5daaca857a130c/django/core/management/__init__.py#L416)接受`sys.argv`命令行参数并从那里获取它。

`manage.py startapp xyz`在命令行上输入时，`sys.argv`设置为`['manage.py', 'startapp', 'xyz']`.

这些被传递给一个[`ManagementUtility`实例](https://github.com/django/django/blob/87bb746ea6bb4bf6fb9f87065d5daaca857a130c/django/core/management/__init__.py#L184)，它有一个[`.execute()`方法](https://github.com/django/django/blob/87bb746ea6bb4bf6fb9f87065d5daaca857a130c/django/core/management/__init__.py#L334)来进行实际的解析。

整个`django.core.management`包装是模块化的；[`.commands`子包](https://github.com/django/django/tree/master/django/core/management/commands)包含该工具的各种标准命令`manage.py`。[`django.core.management.commands.startapp`](https://github.com/django/django/blob/master/django/core/management/commands/startapp.py)例如，处理`startapp`子命令。

# c# - 如何正确使用 System.Action<>

> ID：16106450
> 
> 赞同：0
> 
> 时间：2013-04-19T14:01:08.083
> 
> 标签：c#

我目前正在将 Windows 窗体应用程序转换为 C# 中的控制台应用程序。

我正忙于转换代码，并且遇到了一些我不确定如何正确转换的语法问题。这是 Windows 窗体应用程序中的原始代码：

```
 private eSkan.api.TeSkanAPI feSkanAPI = null;

    private void MessageFilter_AddRemove_Invoked(bool AddFilter, IMessageFilter Filter)
    {
        if (AddFilter)
        { 
            Application.AddMessageFilter(Filter); 
        }
        else 
        { 
            Application.RemoveMessageFilter(Filter); 
        }
    }
    private void MessageFilter_AddRemove(bool AddFilter, IMessageFilter Filter)
    {
        {
            IAsyncResult sr = BeginInvoke((ESKAN_ADD_REMOVE_MESSAGEFILTER)MessageFilter_AddRemove_Invoked,
                                          AddFilter, Filter);
            sr.AsyncWaitHandle.WaitOne(2000);
        }
    }

    private void IniteSkan()
    {
        lMSG.Items.Clear();
        feSkanAPI = new TeSkanAPI();
        // To add a message filter you have to add it from the MAIN thread - thus the main form
        feSkanAPI.AddRemoveMessageFilterProc = MessageFilter_AddRemove;
        feSkanAPI.OneSkanEvent += eScan_Callback;
        feSkanAPI.Thread_Start(true);
    }

    public Form1()
    {
        InitializeComponent();

    }

    private void eScan_Callback_safe(EeSkan_EventType command, object Data)
    {

        lMSG.Items.Insert(0, "++++++++");
        lMSG.Items.Insert(0, DateTime.Now.ToString("dd/MM/yyyy HH:mm:ss"));
        lMSG.Items.Insert(0, "New Command "+command.ToString());

        if (Data is TeSkan_EventInfo)
        {
            lMSG.Items.Insert(0, "Data File : " + ((TeSkan_EventInfo)Data).DataFile);
            lMSG.Items.Insert(0, "Image File : " + ((TeSkan_EventInfo)Data).ImageFile);
        } else if (Data is string)
        {
            lMSG.Items.Insert(0, "Data String : " + (string) Data); 
        }

        //lMSG.Items.Insert(0, "Image File " + ScanInfo.ImageFile);
        //lMSG.Items.Insert(0, "Data File " + ScanInfo.ImageFile);
        lMSG.Items.Insert(0, "--------");
    }

    /// <summary>
    /// When accesing GUI/Form/Components - you cannot work cross-thread.
    /// This method will invoke eScan_Callback_safe in main/GUI thread if another thread called it, 
    /// or call eScan_Callback_safe directly if already on GUI/main thread
    /// 
    /// </summary>
    /// <param name="ScanInfo"></param>
    private void eScan_Callback(EeSkan_EventType command, object Data)
    {

        if (InvokeRequired)
        {
            this.Invoke((ESKAN_EVENT_CALLBACK)eScan_Callback_safe, command, Data);
        }
        else
        {
            eScan_Callback_safe(command, Data);
        }
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        feSkanAPI.Thread_Stop(10000);
        feSkanAPI.Dispose();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        IniteSkan();
    } 
```

我正在使用 Action 在控制台应用程序中执行 BeginInvoke 部分。而且我想知道“eScan_Callback（）”函数中的“InvokeRequired”部分最适合使用什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:14:39.057

`InvokeRequired`就是检查当前线程是否可以安全访问winforms控件。如果您要将其转换为控制台应用程序，您可能只需将其替换为“else”块中的标准方法调用即可。

但是，看起来这是在做一些线程化的事情，所以不是复制和粘贴工作，我会看看这个表单在整体上做了什么，并以更“控制台”的方式重写它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:16:14.947

读到您制作控制台应用程序，我认为您不需要此代码，只需使用： eScan_Callback_safe(command, Data);

# mod-rewrite - 使用 wget 后重写规则

> ID：16106451
> 
> 赞同：0
> 
> 时间：2013-04-19T14:01:15.177
> 
> 标签：mod-rewrite, wget

我使用 wget 保存整个网站，结果我得到了这种格式的文件：

```
book.asp@id=1005335&rbr=5.html 
```

（这是一个实际的文件名）

所以现在我在做 RewriteRule 时遇到了麻烦

```
RewriteBase /
RewriteRule ^book\.asp$ /book@$1.html 
```

此规则将原始查询重写`/book.asp?id=1021278&rbr=0`为`/book@.html?id=1021278&rbr=0`

我该如何摆脱？并将 .html 移到最后？=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:20:28.327

您可以在根目录的 .htaccess 文件中尝试此操作：

### 这是根据 OP 评论修改的规则集：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING}  .
RewriteCond %{REQUEST_URI}  !\.html          [NC]
RewriteRule ^([^.]+)\.asp   /$1.asp@%{QUERY_STRING}.html? [R=301,L,NC] 
```

# mysql - 如何在排序结果的编号分页中找到某页从哪个页面开始？

> ID：16106454
> 
> 赞同：1
> 
> 时间：2013-04-19T14:01:22.010
> 
> 标签：mysql, sql

`/users/1`是分页结果的第一页。它运行一个查询：

```
SELECT * FROM users ORDER BY surname, id LIMIT 0, 100; 
```

`/users/2`调整生成的 SQL。`LIMIT 100, 100`显示分页结果的第二页等。

当它们按姓氏排序时，我想实现指向这些相同分页结果的 AZ 链接；按日期排序时基于年份的链接；当按整数字段排序时，基于数字的链接。你明白了。

例如： URL`/users/A`将重定向到`/users/1`，但是我如何有效地确定应该`/users/B`重定向到哪个页面。

我知道`/users/B`可以运行一个“过滤器”查询来提取姓氏以 B 开头的用户并在页面上显示。但是我想避免创建另一个页面，因此我想要一个重定向。

我还可以遍历`SELECT surname FROM users ORDER BY surname`计算 B 和其他字母开始位置的结果，并将开始位置除以每页的结果（100），但这效率低下。我认为这需要一些聪明的 SQL。我使用 MySQL。

使用 Postgres 的类似问题： [分页：找出项目所在的页面（给定主键和排序顺序）](https://stackoverflow.com/questions/6253104/pagination-find-out-which-page-an-item-is-on-given-primary-key-sorting-order)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:25:45.837

像这样的东西怎么样：

```
select Page
from (
    select substring(Surname, 1, 1) as SurnameFirstLetter, min(page) as Page
    from (
        select Surname, ceiling((@row := @row + 1) / 100) as page
        from users, (select @row := 0) r
        order by Surname
    ) t
    group by substring(Surname, 1, 1)
) t
where SurnameFirstLetter = 'B' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:11:58.367

您可以使用`select count(*) from users where surname<'Current'`获取当前位置。

# javascript - 有没有办法全局捕获 JSON 解析错误？

> ID：16106455
> 
> 赞同：0
> 
> 时间：2013-04-19T14:01:26.863
> 
> 标签：javascript, json

无论是纯 JS 还是使用 jQuery 都很好。我已经在使用 $(window).error 函数，但它只在第 1 行给出错误消息“Unexpected token u”，而不是任何有用的行号或变量名或它试图解析的内容。

编辑：这是在 Chrome 扩展程序中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:13:05.087

您可以创建一个脚本来修补`JSON`命名空间中的方法，并在那里进行一些自定义错误捕获。

这样的事情应该做。如果您使用自定义 JSON 库，则将其放在其后面。

```
//sample patch for parse
(function(){

  //store the original parse
  var parse = JSON.parse;

  //patched parse function
  JSON.parse = function(){
    try{
      //try parsing
      return parse.apply(this,arguments);
    } catch(e){
      //something went wrong
      //custom code here
      throw e;
    }
  }

}()); 
```

# c# - SignalR 1.0.1“组消息”在生产服务器上不起作用

> ID：16106456
> 
> 赞同：1
> 
> 时间：2013-04-19T14:01:30.927
> 
> 标签：c#, .net, asp.net-mvc-4, signalr

我在 SignalR 中创建了一个聊天应用程序（.NET MVC4），它在我的开发机器上运行良好。但是当我将它上传到我们的生产服务器时，我的客户端没有收到任何对“组”的调用。

当我做：

```
var context = GlobalHost.ConnectionManager.GetHubContext<ChatHub>();
context.Clients.All.addOnline(profielidVan); 
```

效果很好！但是当我这样做时：

```
var context = GlobalHost.ConnectionManager.GetHubContext<ChatHub>();
context.Clients.Group(profielidNaar).addOnline(profielidVan); 
```

我的客户没有接到任何电话。

为了连接到正确的组，我在每个 SignalR 连接开始时调用集线器上的一个名为 Join() 的函数：

```
$(function () {

    var chat = $.connection.Chat;

    chat.client.addOnline = function (profielid) {
        if ($("#profielidNaar").val() == profielid) {
            var now = new Date()
            $("#onlinetime").val(now);
            $('#typtbericht').html('Online');
        }
    };

    // ... code to the other jQuery functions called by SignalR ...

    $.connection.hub.start().done(function () {

         chat.server.join();

         // ... code to the page jQuery functions (like $(window).resize) ...

    }
} 
```

和服务器端代码：

```
[HubName("Chat")]
public class ChatHub : Hub
{
    public Task Join()
    {
        if (HttpContext.Current.User.Identity.IsAuthenticated)
        {
            Profiel_DataHelper profiel = new Profiel_DataHelper(HttpContext.Current.User.Identity.Name);
            return Groups.Add(Context.ConnectionId, profiel.ProfielID.ToString());
        }
        else
        {
            return null;
        }
    }

    ... 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:03:35.497

好的，解决此问题的原因如下：

1.  我在 Hub 上使用了 HubName 属性，这是 SignalR 的错误。
2.  我使用会员提供者的昵称来查找个人资料。但由于昵称“Willem”在多个域上注册，它返回了错误的 ProfileID。

因此，如果您遇到与我相同的问题，请尝试将您的客户端添加到硬编码组（如“测试”）如果它有效，那么您就会知道问题出在您自己的代码上。

谢谢大卫福勒！

# raspbian - Raspbian 上存储应用程序文件的文件夹在哪里（Windows 上的同上程序文件）？

> ID：16106459
> 
> 赞同：0
> 
> 时间：2013-04-19T14:01:35.840
> 
> 标签：raspbian

我想知道应用程序安装在`Raspbian`哪里，任何人都知道 Raspbian 上存储应用程序文件的文件夹在哪里`(idem Program Files on Windows)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:05:17.790

`Program Files`在类 Unix 系统上没有直接的等价物。程序文件通常安装在`/usr`（由操作系统/包管理器管理）或`/usr/local`中，其中数据文件`/var`和配置在`/etc`. 下面`/usr`和`/usr/local`是`bin`包含可执行文件、`share`包含资源、`lib`包含 DLL 等的目录。

有关更多信息，请参阅（略微过时的）[文件系统层次标准](http://www.pathname.com/fhs/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:37:13.527

应用程序应安装在您的`$PATH`变量下。做一个`echo $PATH`看看它的内容。请注意，对于不同的用户/场景，此变量可以具有不同的内容，但是如果您希望能够在不输入其路径的情况下执行应用程序，那么它必须在其中。

# android - 覆盖我的应用程序中的文件

> ID：16106460
> 
> 赞同：1
> 
> 时间：2013-04-19T14:01:39.497
> 
> 标签：android, file, save, storage, overwrite

当我启动应用程序时，我将调用 Web 服务并将服务返回的文件保存在我的应用程序中。出于离线目的，我想在我的应用程序中有一个文件，以防网络服务关闭。

我的问题是：我想用从 Web 服务收到的文件覆盖我拥有的文件。我该怎么做？我应该在哪里保存文件才能执行此任务？

我正在将收到的文件保存在我的内部存储中，但我不知道我应该将它保存在哪里的脱机文件。有代码吗？适应症？对此很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:37:25.693

我会建议：

*   将文件保存在项目中 (APK)
*   首次启动时，将此文件复制到本地存储
*   成功返回 Web API 后，复制（并覆盖）本地存储上的文件。
*   始终从本地存储上的文件中读取

您应该将文件保存在应用程序的内部存储目录中，使用 [`getExternalStorageDirectory`](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)which 会将您的文件放在以下位置：`/Android/data/<package_name>/files/`. 这是放置文件的最佳位置，因为当您的应用程序被卸载时，该目录中的文件也将被删除。

更多信息请参阅：http: [//developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)和[http://developer.android.com/training/basics/data-storage/files.html](http://developer.android.com/training/basics/data-storage/files.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:48:32.913

android中基本上有两个位置可以用来保存文件。用户和所有应用程序可访问的外部存储，或专用于您的应用程序的私有目录。对于您的目的，后者似乎更合适。

要操作私有存储中的文件，请参见 Context 类中的[openFileInput](http://developer.android.com/reference/android/content/Context.html#openFileInput%28java.lang.String%29)和[openFileOutput](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)（和其他）方法。

保存示例：

```
FileOutputStream fos = context.openFileOutput("my-file", Context.MODE_PRIVATE);
fos.write(bytes);
fos.close(); 
```

加载示例：

```
File f = new File(context.getFilesDir(),"my-file");
if (f.exists()) {
    byte[] bytes = new byte[(int)f.length()];
    FileInputStream fis = context.openFileInput(f.getName());
    fis.read(bytes);
    fis.close();
} 
```

# java - 修复文件附件的名称

> ID：16106461
> 
> 赞同：0
> 
> 时间：2013-04-19T14:01:42.283
> 
> 标签：java, email, encoding, playframework, jakarta-mail

我有一个石英`cron`作业，可以在特定时间间隔内从服务器轮询电子邮件消息。它递归地进行，并提取所有附加文件并保存它们。

它适用于其中的 95%，但有时，我会收到电子邮件，其附件名称以不同的格式编码，例如：

```
=?windows-1252?Q?This_is_nice?windows-1252?Q?=2Em4v?= 
```

而且我很确定他们看起来不错，当他们被发送时

那些乱码的文件名如何再次转换为可读文本，以便我可以正确设置文件名？

我正在使用基本的 JavaMail 功能 (Part.getFileName())

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:37:56.373

那里发生了一些严重的腐败。什么程序正在发送这些消息？看起来好像某个程序试图对文件名进行两次编码。可能是一些垃圾邮件发送者试图触发 Windows 中的一些错误。

在这种情况下，您几乎必须求助于启发式方法。当您遇到异常时，您可以提取原始标头并尝试对标头进行解码。如果文件名以可预测的方式损坏，您可能能够撤消损坏，然后使用 MimeUtility 方法对其进行解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:06:03.987

看起来文件名中的某些字符无法用电子邮件中使用的编码表示。[您是否为消息明确设置了文本编码，如果没有尝试按照此处](https://stackoverflow.com/questions/2543589/java-mail-encoding-non-english-characters)的建议将其设置为 UTF-8 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:58:43.563

这不是腐败。如果指定了文件名的字符集和编码，我建议您使用正则表达式来检测和清理文件名。

> “=？” 字符集“？” 编码“？” 编码文本“？=”

见[https://www.rfc-editor.org/rfc/rfc2047](https://www.rfc-editor.org/rfc/rfc2047)

# jquery - 具有相同类的多个元素的jQuery函数

> ID：16106462
> 
> 赞同：0
> 
> 时间：2013-04-19T14:01:42.817
> 
> 标签：jquery, twitter-bootstrap

我想我可能知道这个问题的答案，但是对于 jQuery 的世界来说仍然是一个新手.

这是场景：我有多个基于 div/ul 的下拉列表，当然它们具有相同的类名。我想要发生的是当单击下拉菜单的按钮时，您可以单击下拉元素内部而不关闭下拉菜单。我假设因为他们都有相同的课程，所以`stopPropogation`不起作用。这是jQuery代码：

```
<script type='text/javascript'>
$('.dropdown-menu').each(function(){
    $(this).click(function(event){
        if($(this).hasClass('keep_open')){
         event.stopPropagation();
        }
     });
});
</script> 
```

这是下拉列表之一的示例（其中有多个）。如果你注意到类似的类名，我会使用 Twitter Bootstrap：

```
<div class="btn-group">
    <div class="btn btn-mini" tabindex="-1">DROPDOWN NAME</div>
    <div class="btn btn-mini dropdown-toggle" data-toggle="dropdown" tabindex="-1">
        <span class="caret"></span>
    </div>
    <ul class="dropdown-menu dropdown-pad keep-open">
        <li><b>Info:</b> <small>NAME INFO</small></li>
        <li><b>Thoughts:</b> <small>THOUGHT INFO</small></li>
        <li><b>Favorite Places:</b>
            <br><small>FAVORITE PLACE<br>FAVORITE PLACE 2</small>
        </li>
    </ul>
</div> 
```

* * *

**编辑** 所以错误不太可能出现在 jQuery 部分，而是在下拉 div 本身中。在同一页面上，我使用了以下下拉列表的变体，它的工作原理就像一个冠军：

```
<div class="btn-toolbar">
    <div class="btn-group">
    <a class="btn dropdown-toggle" href="#" data-toggle="dropdown">
      Department
      <span class="caret"></span>
    </a>
    <ul class="dropdown-menu keep_open">
       <li>Customer Service</li>
       <li>Tech Support</li>
    </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:13:43.777

包装在一个准备好的文件中，但是这个：

 ~~~~```
$('.dropdown-menu').each(function(){
    $(this).click(function(event){
        if($(this).hasClass('keep_open')){
         event.stopPropagation();
        }
     });
}); 
```~~ 

可能只是这样：

```
$('.dropdown-menu').click(function (event) {
    if ($(this).hasClass('keep_open')) {
        event.stopPropagation();
    }
}); 
```

最终版本：

```
$(document).ready(function(){
    $('.dropdown-menu').click(function (event) {
        if ($(this).hasClass('keep_open')) {
            event.stopPropagation();
        }
    });
}); 
```

交替：

```
$('.btn-group').on('click', '.dropdown-menu', function (event) {
    if ($(this).hasClass('keep_open')) {
        event.stopPropagation();
    }
}); 
```

编辑：根据您可能需要的评论：

```
$('.btn-group .dropdown-menu .keep_open').children().on('click', function (event) {
    event.stopPropagation();//or the next one
    event.stopImmediatePropagation();
}); 
```

~~EDIT2 OMG 我是个白痴：~~

 ~~```
$('.btn-group').on('click', '.dropdown-menu', function (event) {
    if ($(this).hasClass('keep-open')) {
        event.stopPropagation();
    }
}); 
```

`'keep-open'`对比`'keep_open'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:06:11.710

不确定它与您的问题有关，但您应该将代码包装在 document.ready 回调函数中：

```
$(function(){ //or $(document).ready(function(){
    $('.dropdown-menu').each(function(){
        $(this).click(function(event){
            if($(this).hasClass('keep_open')){
             event.stopPropagation();
            }
         });
    });
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:13:54.417

对于多个元素和实时事件，使用[`.on()`](http://api.jquery.com/on/)附加到 document.body 级别以下的元素：

```
$(document).on('click', '.dropdown-menu', function(e){
    $(this).hasClass('keep_open') && e.stopPropagation(); // This replace if conditional.
}); 
```

不需要使用`$(document).ready()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T16:08:44.317

我想到了。感谢@Mark Schultheiss，它最终点击了发生的事情。原来的 jQuery 可以工作，但是，第一种不工作的下拉列表有一个 class of`keep-open`而不是`keep_open`. 这就是为什么第二种下拉菜单起作用而不是第一种的原因。测试了它，它现在可以工作了。谢谢大家的帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-19T04:08:30.887

与该用户有相同的问题，但这些解决方案不起作用： [Twitter Bootstrap cant stop a dropdown from close on click](https://stackoverflow.com/questions/18306433/twitter-bootstrap-cant-stop-a-dropdown-from-closing-on-click)

决定打开一个单独的问题而不是这个旧问题，以防新版本的问题不同。~~~~

# post - 如何启用/禁用选择标签并通过淘汰赛发布（即使禁用）

> ID：16106464
> 
> 赞同：3
> 
> 时间：2013-04-19T14:01:45.233
> 
> 标签：post, knockout.js, html-select, disabled-input

我有一个复杂的表单，其中包含许多选择，其状态（启用/禁用）取决于其他一些控件的值，因此在提交表单时可能会禁用这些选择（并且未发布选择值）。即使在不允许用户更改选择的情况下，我也需要发布所选值。

我在这里看到了一些解决方案[HTML form readonly SELECT tag/input](https://stackoverflow.com/questions/368813/readonly-select-tag)（主要解决方案是让隐藏字段与禁用的选择同步）。

我正在考虑采取稍微不同的方法：我想使用敲除（已在项目中使用）仅在数据可编辑时显示选择，否则显示只读输入（或 div/span）。

如何使用淘汰赛来简化这种方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:31:45.653

只需禁用选择就足以阻止它发布——您不必将其设为只读。这实际上非常简单。通过`attr`绑定，您可以有条件地应用属性。因此，您只需要一个为选择保存布尔状态的可观察对象：

**在您的视图模型中**

```
self.DisableSelects = ko.observable(false); 
```

**您的选择绑定**

```
attr: { disabled: DisableSelects } 
```

然后，当您希望禁用任何像这样绑定的选择时，您只需将 observable 设置为 true：

```
viewModel.DisableSelects(true) 
```

显然，如果你想要更大的粒度，你只需像这样创建更多的 observables 并适当地绑定。

**编辑**

您的问题并未明确说明您真正想要什么，但我觉得问题是您实际上*确实*希望发布该值，即使它已被禁用。对此，我必须同意链接问题的第一个答案：根本不要依赖发布的价值。将字段设置为只读或禁用不会*阻止*更改值。每个现代浏览器都内置了开发工具，可以让您在适当的位置更改 HTML（即删除 readonly 或 disabled 标志），任何具有 HTML 基本知识的人都可以完成它。如果你想要一个只读字段，那么唯一安全的方法就是*完全*忽略发布的价值。您可以使用隐藏的输入等进行各种技巧，但这也很容易解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:01:45.233

在我的 viewModel 中，我定义了相对于选择状态的属性、绑定到选择值的属性和一个计算的 observable，它“读取”选择中所选选项的描述：

```
AppViewModel: function () {
        var self = this;
        self.SelectVisible = ko.computed(function () {
            return true;  // return true or false depending on your context
        }, self);
        self.Category = ko.observable("");
        self.CategoryText = ko.computed(function () {
            return $("#Category option[value='" + self.Category() + "']").text();
        }, self);
        // other code ...
} 
```

在页面中，我有一个始终启用的选择和一个只读输入，其可见性是相互排斥的，并且取决于 viewModel 属性：

```
<select name="Category" id="Category" data-bind="value: Category, visible: SelectVisible">
   <option value="S">Standard</option>
   <option value="N">CatN</option>
   <option value="C">CatC</option>
</select>
<input style="display: none;" type="text" readonly="readonly" data-bind="value: CategoryText, visible: !SelectVisible()"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-29T12:40:55.000

您可以将淘汰视图模型变量“IsDisable”绑定到选择列表

# java - 在不同的屏幕和操作系统版本上使用相同的字体发生了一些奇怪的事情

> ID：16106466
> 
> 赞同：0
> 
> 时间：2013-04-19T14:01:56.973
> 
> 标签：java, android, android-layout, user-interface

我得到了一些奇怪的东西来为 textview 设置字体。我使用了相同的字体文件并为 textview 提供了相同的字体，但问题出在不同的屏幕和 android os 版本中，我得到了不同的视图

在 android os 4.0.3 中运行

![这里字母 g、w 显示不同](https://i.stack.imgur.com/PVOI8.png)

android os 4.1.2 的原始运行图片在那里我没有遇到上述字体视图的任何问题

![[这里的字母 g，w，显示完美](https://i.stack.imgur.com/xAzv8.png)

所以给我这个解决方案，这个操作系统依赖吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:14:58.970

在`TextView`片场这样：

```
txtView.setPaintFlags(txtView.getPaintFlags() | Paint.SUBPIXEL_TEXT_FLAG); 
```

# c - 如果没有循环外的 printf，for 循环中的 Printf 将不起作用

> ID：16106471
> 
> 赞同：0
> 
> 时间：2013-04-19T14:02:13.910
> 
> 标签：c, loops, for-loop, crash

我一直有这个问题：当我尝试打印一个带有 2 个 for 循环的数组时，没有任何反应，空白屏幕。当我`printf`在循环之前添加一个（任何类似`printf("1");`的）循环打印显示在执行中。编码：

```
for(j=0;j<i;j++){
    printf("\n");
    for(k=0;k<i;k++){
        printf("%6d",*(polje+j*i+k));
    }
} 
```

程序不仅不打印循环，而且如果我不在`printf`循环外使用另一个，它会说 x.exe 停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:06:56.163

尝试`fflush(stdout);`在第二次之后打电话`printf`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:06:14.090

尝试这个：

```
for(j=0;j<i;j++){
    printf("\n");
    for(k=0;k<i;k++){
        printf("%6d",(polje+j*i+k));
    }
} 
```

我在第二个 printf 中删除了 * .. 它在右侧乘以任何东西

# javascript - Google Charts - 如何在 options.series 中传递动态变量？

> ID：16106473
> 
> 赞同：6
> 
> 时间：2013-04-19T14:02:18.257
> 
> 标签：javascript, google-visualization

我正在制作一个使用 Google Charts 图形的报告工具。我想创建组合图表，但数据的数量是动态的，所以我必须在 options.series 中传递一个变量“nbEGP”：

```
/* Création de graphique Google Chart */

function drawChart(array, title, div, type, nbEGP) {

var data = new google.visualization.arrayToDataTable(array);

// Set chart options
var options = {
    'title' : title,
    'width' : '80%',
    'height' : '600',
    seriesType : "bars",
    series : {
            nbEGP : {
            type : "line"
        }
    }
}; 
```

...

```
chart.draw(data, options);
} 
```

但它不起作用。如果我尝试显示 options.series 我可以看到它没有输入我的变量的值，而是名称“nbEGP”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-26T10:18:55.857

我终于设法这样做了：

```
// Set chart options
var options = {
    'title' : title,
    'width' : '80%',
    'height' : '600',
    seriesType : "bars",
    series : ""
};

myObj = {};
myObj[nbEGP] = {type : "line"};
options.series = myObj; 
```

# css - Susy：mixin 适用，但抛出错误

> ID：16106477
> 
> 赞同：1
> 
> 时间：2013-04-19T14:02:22.360
> 
> 标签：css, sass, susy-compass, grid-layout

我刚开始使用 Susy。当我应用 span-columns() mixin 时，标记确实正确应用，但 sass 抛出错误：（第 276 行：未定义的 mixin 'span-columns'。）

```
#element-1 {
  @include span-columns(6, 12);
}
#element-2 {
  @include span-columns(6 omega, 12);
} 
```

*   萨斯 3.3.0.alpha.3
*   指南针 0.12.2
*   susy-1.0.8

- 编辑：已修复 - 我假设在先前包含的 scss 文件中包含 Susy 就足以在最后包含的 scss 文件中工作（在某种程度上它确实如此）。我再次包括了苏西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:03:17.647

您是否在项目文件夹根目录中的 Compass config.rb 文件中需要 Susy？

```
require "susy"; 
```

您是否在 scss 文件的 init 中导入了 Susy 和 Compass？

```
@import 'compass'; 
@import 'susy'; 
```

# reporting-services - 具有同一张表的 SSRS 多数据驱动订阅

> ID：16106478
> 
> 赞同：0
> 
> 时间：2013-04-19T14:02:25.003
> 
> 标签：reporting-services, ssrs-2008, data-driven

目前我有 4 或 5 份报告（即将推出更多），上面有 50 多个订阅（不同的电子邮件和不同的参数），我想使用**数据驱动订阅**重新组合它们。

我可以创建 dds 订阅，我已经对其进行了测试并且运行良好，我的问题是我希望将每个参数都放在一个表中，以“集中”我的订阅，这样配置而不是重新配置会更容易输入我的 50 个订阅中的每一个。

目前我看到三个选项，
1 - 创建一个全局表，每个订阅参数都作为一个新列，但我可以限制列数，我的大部分行将为空
2 - 创建一个新表对于每个报告，但如果我有 10 或 20 个这样的报告，它在我的数据库中将不是“干净”的
3 - 创建一个主表（电子邮件、报告名称）和另一个带有参数的表（ParameterName、ParameterValue）和使用数据透视表选择它，但保持更新会令人困惑。

在我的情况下有什么建议，或者我做错了什么？
谢谢你。

我正在使用 Sql Server 2008 R2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:58:05.683

我不确定将订阅“集中”到一个或两个表中是否一定会使它们更易于配置，但如果您要尝试它，那么选项 3 之类的方法是您最好的选择。DDS 查询可以包含组合订阅者详细信息和参数值所需的任何逻辑，只要它为每个订阅者返回一行。

如果您的订阅交付要求很复杂，您可以考虑使用第三方工具来帮助管理它们，例如[http://www.christiansteven.com/solutions/sql-rd/](http://www.christiansteven.com/solutions/sql-rd/)

# ios - topLevelObjects 的 loadNibNamed 泄漏

> ID：16106483
> 
> 赞同：0
> 
> 时间：2013-04-19T14:02:43.690
> 
> 标签：ios, objective-c, uitableview, automatic-ref-counting, loadnibnamed

我正在使用自定义单元格并调用`loadNibNamed:`. 这似乎会导致内存泄漏，我不知道如何解决它。如果我将顶级对象设置为`nil`之后，我仍然会泄漏。

```
topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"customCell" owner:self options:nil]; 
```

然后我这样做

```
for (id currentObject in topLevelObjects){
        if ([currentObject isKindOfClass:[UITableViewCell class]]){
            cell =  (CustomCell *) currentObject;
            break;
        }
    } 
```

然后改变单元格上的属性。

自定义单元格对属性有强引用，它不是循环引用，所以我不确定这是否是问题所在。使用 ARC 时停止这种废弃内存的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T00:30:11.360

马特的回答很到位。这是代码的样子。立即修复了我的内存问题，因为单元格现在已按应有的方式加载和出列。

首先，注册笔尖

```
[self.tableView registerNib:[UINib nibWithNibName:@"customCell"
                                           bundle:nil] 
                           forCellReuseIdentifier:@"customCellID"]; 
```

第二...

```
CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"customCellID"]; 
```

笔尖只需要一个 tableviewcell 就可以了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:45:35.733

我怀疑你的泄漏可能来自笔尖的出口。[请注意以下文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSBundle_UIKitAdditions/Introduction/Introduction.html)中的这句话`loadNibNamed:`：

> 建立outlet连接，该方法使用setValue:forKey:方法，可能会导致outlet中的对象被自动保留。

换句话说，`loadNibNamed`有时由于键值编码工作方式的奇怪而强加了额外的保留。

不过，那是猜测，没必要，因为你一开始就不需要打电话`loadNibNamed:`！

您正在使用在笔尖中设计的自定义 UITableViewCell 子类？那为什么不按正常方式做呢？制作一个包含*一个*顶级对象的笔尖：单元格。设计笔尖中的单元格，设置其类，连接其插座等。在您的代码中，调用`registerNib:forCellReuseIdentifier:`表格视图，以告诉表格视图您的笔尖。当您稍后调用时`dequeueReusableCellWithIdentifier:`，如果重用堆中没有空闲单元格，表格视图将加载您的 nib 并将单元格交给您。没有混乱，没有大惊小怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:50:04.940

考虑`UINib`改用。UINib 将 nib 文件的内容缓存在内存中，从而节省了对文件系统的访问。例如，您可以创建一个 nib 实例并在属性中引用：

```
self.cellNib = [UINib nibWithNibName:@"customCell" bundle:nil]; 
```

在 nib 文件中，将单元格绑定到表格视图控制器的属性。然后，每当您需要单元格的实例时，请该`UINib`实例为您实例化它，对新单元格的引用将自动存储在属性中。

```
[self.cellNib instantiateWithOwner:self options:nil];
cell = self.customCell;
self.customCell = nil; 
```

这种方法应该有助于避免您在使用顶级对象数组时遇到的内存管理问题，并且还可以显着提高性能。

# android - 如何在对话框关闭时隐藏键盘

> ID：16106486
> 
> 赞同：11
> 
> 时间：2013-04-19T14:03:05.157
> 
> 标签：android, android-softkeyboard, android-keypad

我有一个`Activity`单曲`Fragment`。碎片上有一个`EditText`。

一旦显示片段，键盘就会弹出，但是我设法在清单 android:windowSoftInputMode="stateHidden" 中阻止它设置

但是，还有一个按钮，它打开一个带有另一个 EditText 的对话框。

我有一种方法可以在对话框关闭时自动关闭键盘。

```
public static void closeInput(final View caller) {      
    caller.post(new Runnable() {
        @Override
        public void run() {
            InputMethodManager imm = (InputMethodManager) caller.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(caller.getWindowToken(), InputMethodManager.HIDE_IMPLICIT_ONLY);
        }
    });
} 
```

该方法不是一个漂亮的hack，它有一些问题。对话框`EditText`有`inputType="numberDecimal"`. `closeInput()`似乎没有关闭键盘，只是将其更改为默认的字母状态。

这里发生了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-30T18:19:40.160

就我而言，我使用了方法：

```
public static void closeInput(final View caller) {  
    caller.postDelayed(new Runnable() {
        @Override
        public void run() {
            InputMethodManager imm = (InputMethodManager) caller.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(caller.getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
        }
    }, 100);
} 
```

由于清单中的活动设置，它拒绝正常工作，如果我记得你不能`android:windowSoftInputMode="any_of_these"`设置

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-04-05T09:33:12.317

从片段 onCreateView() 方法中，您可以执行以下操作：

```
getActivity().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN) 
```

> 它会在 Dismiss of Dialog 时自动隐藏软键盘

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-01-28T06:24:43.027

in BaseDialog.java

```
protected void hideSoftKeyboard() {
    InputMethodManager imm = (InputMethodManager) this.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
    if (imm.isActive()) {
        imm.toggleSoftInput(0, InputMethodManager.HIDE_NOT_ALWAYS);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-23T09:26:01.610

就我而言，我使用的是：

```
android:windowSoftInputMode="adjustPan|stateVisible" 
```

我删除了`stateVisible`：

```
android:windowSoftInputMode="adjustPan" 
```

而且`onDismiss()`，不需要调用`hideSoftInput`方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-18T09:48:27.770

就我而言，解决方案是将键盘隐藏在对话框中

```
dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {
        @Override
        public void onDismiss(DialogInterface dialog) {
            View view = activity.getCurrentFocus();
            if (view != null) {
                InputMethodManager inputManager = (InputMethodManager) activity.getSystemService(Context.INPUT_METHOD_SERVICE);
                inputManager.hideSoftInputFromWindow(view.getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
            }
        }
    }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-11T09:03:54.947

努力解决这个问题并在此处查看答案后，大多数似乎确实有效。由于***不希望使用类而只是使用 builder***，因此答案[https://stackoverflow.com/a/36422411/1815624](https://stackoverflow.com/a/36422411/1815624)不是一个可行的解决方案。

意识到其他人可能有同样的问题，答案来自两者： [https](https://stackoverflow.com/a/17393446/1815624) ://stackoverflow.com/a/17393446/1815624 & [https://stackoverflow.com/a/32648971/1815624](https://stackoverflow.com/a/32648971/1815624)

所以组合的答案是从片段本身中获取视图：

*（有人有理由不这样做吗？）*

```
void closeKeyboard(final View caller){
    caller.post(new Runnable() {
        @Override
        public void run() {
            InputMethodManager imm = (InputMethodManager) caller.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(caller.getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
        }
    });
} 
```

...

```
dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {
    @Override
    public void onDismiss(DialogInterface dialog) {
        closeKeyboard(getView());
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-07T05:09:31.627

找到了一种隐藏对话框键盘的简单方法

1.  dialog.setCanceledOnTouchOutside(false)
2.  **在对话框关闭之前**调用 hideKeyboardFromDialogBeforeDismiss() ，可能在取消按钮单击事件上，**不应调用 onDismiss 或 onCancelListener**

    ```
    binding.cancelBtn.setOnClickListener {       
        STSystemUtil.hideKeyboardFromDialogBeforeDismiss(dialog = dialog) 
        binding.root.postDelayed({ dialog?.dismiss() }, 200)
    } 
    ```

```
 @JvmStatic
    @JvmOverloads
    fun getInputMethodManager(context: Context? = STInitializer.application()): InputMethodManager? {
        return context?.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager?
    }

    /*
     * 注意: 如果 dialog 包含一个或者多个EditText, 点击外部(canceledOnTouchOutside==true)不会隐藏已经显示的输入法弹框, 且通过点击取消按钮必须先隐藏输入法弹框再延时 dismiss, 因为在 onCancel/onDismiss 中 dialog?.currentFocus?.windowToken 必然已经是 null, 且 inputMethodManager?.isActive 必然是 false
     * ----> canceledOnTouchOutside = false
     * ----> binding.cancelBtn.setOnClickListener {
     *          STSystemUtil.hideKeyboardFromDialogBeforeDismiss(dialog)
     *          binding.root.postDelayed({ dialog?.dismiss() }, 200)
     *       }
     */
    @JvmStatic
    @JvmOverloads
    fun hideKeyboardFromDialogBeforeDismiss(context: Context? = STInitializer.application(), dialog: Dialog? = null) {
        val inputMethodManager: InputMethodManager? = getInputMethodManager(context)
        if (dialog == null) {
            if (inputMethodManager?.isActive == true) {
                inputMethodManager.toggleSoftInput(0, InputMethodManager.HIDE_NOT_ALWAYS)
            }
        } else {
            inputMethodManager?.hideSoftInputFromWindow(dialog.currentFocus?.windowToken, InputMethodManager.HIDE_NOT_ALWAYS)
        }
    } 
```

# r - 分离一列并在 r 中创建新列

> ID：16106488
> 
> 赞同：1
> 
> 时间：2013-04-19T14:03:08.617
> 
> 标签：r, dataframe

我尝试了几种方法来做这件事，但都没有成功。基本上我有一个巨大的数据框，有 6 列和 +8000 行。第一列有一个 2 码字母（例如 AA，然后 AB，等等...）。第二列有一些其他 4 列共有的数值（例如，AA 为 0 到 180，AB 为 0 到 170，等等）。其他列是值。

这是我的 DataFrame 的摘录：

```
 structure(list(X2code = c("AA", "AA", "AA", "AA", "AA", "AA", 
"AA", "AA", "AA", "AA", "AA", "AA", "AA", "AA", "AA", "AA", "AA", 
"AA", "AA", "AA", "AA", "AA", "AA", "AB", "AB", "AB", "AB", "AB", 
"AB", "AB", "AB", "AB", "AB", "AB", "AB", "AB", "AB", "AB", "AB", 
"AB", "AB", "AB", "AB", "AB", "AB", "AB", "AB", "AB", "AB", "AB", 
"AB", "AB", "AB", "AB", "AB", "AB", "AC", "AC", "AC", "AC", "AC", 
"AC", "AC", "AC", "AC", "AC", "AC", "AC", "AC", "AC", "AC", "AC"
), DOY = c(294L, 295L, 296L, 297L, 298L, 299L, 300L, 301L, 302L, 
303L, 304L, 305L, 306L, 307L, 308L, 309L, 310L, 311L, 312L, 313L, 
314L, 315L, 316L, 294L, 295L, 296L, 297L, 298L, 299L, 300L, 301L, 
302L, 303L, 304L, 305L, 306L, 307L, 308L, 309L, 310L, 311L, 312L, 
313L, 314L, 315L, 316L, 317L, 318L, 319L, 320L, 321L, 322L, 323L, 
324L, 325L, 326L, 168L, 169L, 170L, 171L, 172L, 173L, 174L, 175L, 
176L, 177L, 178L, 179L, 180L, 181L, 182L, 183L), WDrain = c(NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, 0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 
0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 
0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 0.13, 
0.13, 0.13, 0.13, 0.13, 244.1, 244.1, 244.1, 244.1, 244.1, 244.1, 
244.1, 244.1, 244.1, 244.1, 244.1, 244.1, 244.1, 244.1, 244.1, 
244.1), CumET = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 3.34, 4.75, 5.33, 
6.67, 7.41, 7.84, 8.78, 9.59, 10.47, 10.57, 11.17, 11.91, 12.07, 
12.48, 12.63, 12.88, 13.8, 14.56, 15.11, 15.43, 15.86, 16.66, 
17.27, 17.54, 18.21, 18.64, 18.75, 19.11, 19.2, 19.85, 20.48, 
21.02, 21.32, 222, 226, 233, 241, 250, 258, 265, 269, 271, 276, 
279, 281, 281, 283, 285, 288), SoilAvW = c(NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, 246.51, 245.1, 249.52, 248.68, 248.04, 247.44, 246.5, 
245.69, 244.81, 244.71, 244.11, 243.37, 243.3, 242.88, 242.83, 
242.58, 241.66, 241, 243.65, 243.5, 243.36, 242.65, 249.03, 250.74, 
253.05, 266.21, 270.28, 279.71, 287.9, 288.84, 288.69, 288.25, 
295.13, 330.2, 326, 319.5, 311.2, 302.8, 294.4, 287.7, 287.2, 
285, 280.4, 278.6, 276, 282.3, 286.5, 284.1, 281.5), Runoff = c(NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L), Transp = c(NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.01, 0.01, 0.01, 
0.01, 0.01, 0.02, 0.02, 0.02, 0.02, 0.03, 0.03, 0.03, 0.03, 0.04, 
0.04, 0.04, 0.04, 0.04, 0.05, 0.05, 105.7, 109.1, 114.5, 121.5, 
128.9, 136.2, 141.9, 145.4, 147.1, 150.7, 152.9, 154.8, 155, 
155.8, 157.9, 159.9)), .Names = c("X2code", "DOY", "WDrain", 
"CumET", "SoilAvW", "Runoff", "Transp"), class = "data.frame", row.names = c(NA, 
-72L)) 
```

我想做的是创建 4 个新数据帧，在每个数据帧中，我想以 AA、AB 等将成为新列的方式打破长列。除了值旁边，我想要每个 2 代码附带的第 2 列的值。例如，AA 将具有列 0 到 180，然后是值，AB 将具有列值 0 到 170，然后是其值。此外，在列的顶部，我想为两列添加 2 个字母代码。这是我想要的数据框示例（例如，这是用于 value1）。

```
AA  AA  AB  AB  AC  AC

0   2   0   0.5 0   50
1   2.4 1   1.6 1   0.6
2   5   2   4.6 ..  ..
3   6.7 3   2   ..  ..
..  ..  ..  ..      
..  ..  170 70      
180 10 
```

下面是我的部分代码：

```
 setwd("C:\\.....")

    my.data <- read.table("my.data.txt", header=T, na.strings = c("na" , "n/a" , "NA" , "") , stringsAsFactors = F)

   for(id in my.data$2.code)
     {

# here I take the columns 2 to 3 in the data, the first col is the ID that is used                                                 # to let R understand that for each ID needs to do a certain operation

       data.code <- my.data[my.data$2.code == id, 2:3] 

  # And now my is my problems... I tried with DOBY, and other operations but I could not do what I want!!  
       write.table(....., "trials.txt", quote=F, col.names=FALSE, row.names= F)

           } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:45:10.317

我建议保留您的 data.frame 原样，因为它是在 R 中进行进一步处理的最明智的格式。但是，这里有一些可能性，它们不能完全实现您想要的输出（不容易实现），但可能仍然是有帮助。

```
library(reshape2)
WDrain.wide <- dcast(DF,DOY~X2code,value.var='WDrain')

library(plyr)
WDrain.strange <- dlply(DF,.(X2code),function(x) x[,2:3]) 
```

或者按照@SimonO101 的建议：

```
split(DF[,-1],DF[,1]) 
```

# ms-access - ms access：关系图乱七八糟怎么处理

> ID：16106490
> 
> 赞同：2
> 
> 时间：2013-04-19T14:03:13.920
> 
> 标签：ms-access, entity-relationship

我正在处理一个包含许多不同实体的项目，随着项目的进行，我的实体关系图变得越来越混乱。

我一直坚持要重新安排图表，但它已经到了我无法让它看起来干净的地步。

看这张照片（最后会有更多的桌子）

[http://imageshack.us/photo/my-images/59/capturepna.png/](http://imageshack.us/photo/my-images/59/capturepna.png/)

有什么工具可以用来以优化的方式或类似的方式自动排列表格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:17:23.617

您可以*放大*关系视图。我知道一次看到你的数据结构的整个宇宙是很好的，但是一旦你的创造进化成一个复杂的有机体，无论如何你无法一次理解它的所有 DNA。

尝试清除表，然后选择要查看关系的表。如果您想查看经理和员工之间的关系，您不需要看到订单、产品等。

此外，您可以通过单击“关系”屏幕的设计部分中的“关系报告”来保存“视图”（假设您使用的是 Access 2007 或更高版本）。

# javascript - 将带有数组的javascript对象遍历和操作为匹配格式的单个对象

> ID：16106496
> 
> 赞同：2
> 
> 时间：2013-04-19T14:03:39.377
> 
> 标签：javascript, arrays, object

我一直在为这个问题绞尽脑汁，我试图用一些没有乐趣的递归函数来解决这个问题，所以我想问问是否有人有任何解决方案。

我有一个混合了 JSON 和数组的对象，简而言之，我需要去掉数组，但在最初找到数组的位置保留它们的值。

这是对象/数组的console.log：

对象{类型：数组[1]，属性：对象}

1.  属性：对象
2.  1.  关联媒体：数组[1]
    2.  1.  0：对象
        2.  1.  属性：对象
        3.  1.  网址：数组[1]
            2.  1.  0：“/programmes/p00t64wh.emp”
            3.  长度：1
            4.  **原型**：数组[0]
            5.  **原型**：对象
        4.  类型：数组[1]
        5.  1.  0：“媒体对象”
            2.  长度：1
            3.  **原型**：数组[0]
        6.  **原型**：对象
        7.  长度：1
        8.  **原型**：数组[0]
    3.  byArtist：数组[1]
    4.  1.  0：对象
        2.  1.  属性：对象
        3.  1.  名称：数组[1]
            2.  1.  0：“培养人民”
            3.  长度：1
            4.  **原型**：数组[0]
            5.  网址：数组[1]
            6.  1.  0：“/音乐/艺术家/e0e1a584-dd0a-4bd1-88d1-c4c62895039d”
            7.  长度：1
            8.  **原型**：数组[0]
            9.  **原型**：对象
        4.  类型：数组[1]
        5.  1.  0：“音乐组”
            2.  长度：1
            3.  **原型**：数组[0]
        6.  **原型**：对象
        7.  长度：1
        8.  **原型**：数组[0]
    5.  图片：数组[1]
    6.  1.  0：“/radio1/chart/artwork/ussm11002931.jpg”
        2.  长度：1
        3.  **原型**：数组[0]
    7.  名称：数组[1]
    8.  1.  0：“打气”
        2.  长度：1
        3.  **原型**：数组[0]
    9.  发布：数组[1]
    10.  1.  0：对象
        2.  1.  属性：对象
        3.  1.  partOfSeries：数组[1]
            2.  1.  0：对象
            3.  1.  属性：对象
                2.  1.  名称：数组[1]
                3.  1.  0：“劳伦·拉文”
                    2.  长度：1
                    3.  **原型**：数组[0]
                4.  网址：数组[1]
                5.  1.  0：“/程序/b00c000j”
                    2.  长度：1
                    3.  **原型**：数组[0]
                6.  **原型**：对象
                7.  类型：数组[1]
                8.  1.  0：“系列”
                9.  长度：1
                10.  **原型**：数组[0]
                11.  **原型**：对象
            4.  长度：1
            5.  **原型**：数组[0]
            6.  发布日期：数组[1]
            7.  1.  0：对象
            8.  1.  属性：对象
                2.  1.  名称：数组[1]
                3.  1.  0：“来自 BBC Radio 6 音乐”
                    2.  长度：1
                    3.  **原型**：数组[0]
                4.  网址：数组[1]
                5.  1.  0: "/6音乐/"
                    2.  长度：1
                    3.  **原型**：数组[0]
                6.  **原型**：对象
                7.  类型：数组[1]
                8.  1.  0：“广播服务”
                9.  长度：1
                10.  **原型**：数组[0]
                11.  **原型**：对象
            9.  长度：1
            10.  **原型**：数组[0]
            11.  **原型**：对象
        4.  类型：数组[1]
        5.  1.  0：“情节”
            2.  长度：1
            3.  **原型**：数组[0]
        6.  **原型**：对象
        7.  长度：1
        8.  **原型**：数组[0]
    11.  **原型**：对象
3.  类型：数组[1]
4.  1.  0：“音乐录音”
    2.  长度：1
    3.  **原型**：数组[0]
5.  **原型**：对象

所需的转换应该类似于下面的代码，但如果，例如，保留“属性”但所有数组都应该被剥离到一个对象中，这不是一个大问题。

```
{
    'associatedMedia': {
        'url':'/programmes/p00t64wh.emp',
        'type':'MediaObject'
    },
    'byArtist': {
        'name':'Foster the People',
        'url':'/music/artists/e0e1a584-dd0a-4bd1-88d1-c4c62895039d',
        'type':'MusicGroup'
    },
    'publication': {
        'publishedOn':{
            'name':'From BBC Radio 6 Music',
            'url':'/6music/',
            'type':'BroadcastService'
        },
        'partOfSeries':{
            'name':'Lauren Laverne',
            'url':'programmes/b00c000j',
            'type':'Series'
        }
        'type':'http://schema.org/Episode'
    }
    'image':'/radio1/chart/artwork/ussm11002931.jpg',
    'name':'Pumped up Kicks',
    'type':'MusicRecording'
} 
```

所有键和值都是动态分配的，但是需要转换的对象将遵循：对象 > 键/值 > 0 > 属性 > 键/值

在此先感谢您的帮助:)

# git - gitignore 所有子目录中的所有文件，除了 xml 文件

> ID：16106497
> 
> 赞同：2
> 
> 时间：2013-04-19T14:03:41.090
> 
> 标签：git, gitignore

我有一个类似这样的目录结构：

```
root/
  .gitignore
  subdir/
    .gitignore
    subsubdir1/
      file.xml
      image.png
    subsubdir2
       file.xml
       image.jpg 
```

我想忽略`subdir`除 XML 文件之外的所有文件。第二个`.gitignore`看起来像这样：

```
*                   # ignore everything in this directory and its subdirectories
!*/                 # do not ignore subdirectories
!*.xml              # do not ignore xml files
!.gitignore         # and of course have this .gitignore file included too 
```

根据[此处](https://stackoverflow.com/questions/9162919/git-whitelisting-files-in-a-complex-directory-structure)以及 SO 和其他网站上的其他各种帖子，这应该可以正常工作，但由于某种原因，`git status`我发现文件`subdir`夹中的所有文件都未跟踪。

我曾经`git rm --cached`删除所有在添加之前跟踪过的文件`.gitignore`，但这仍然没有奏效。

你有什么线索，有什么办法解决这个问题？

PS：以防万一我在 Windows 上使用 git。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:33:14.617

.gitignore 不支持内联注释。评论需要从自己的行开始。

* * *

您需要删除 !*/ 这将最终撤消它之前的行。

如果您想忽略 subdir 中的所有内容而不是 subsubdirs 中的所有内容，那么该行应该是：

```
!/* 
```

如果您想忽略 subdir/subsubdir2/image.jpg 之类的文件，那么您可以忽略该行。

空目录（或其中的所有文件都被忽略）不会被添加到 git。

我认为（并在我的 linux 系统上确认） .gitignore 被自动排除，因此您可以省略最后一行。

这将留在 subdir/.gitignore 中：

```
*
!*.xml 
```

# azure - 分布式事务管理器在 SQL Azure 上被禁用，如何启用它？

> ID：16106498
> 
> 赞同：2
> 
> 时间：2013-04-19T14:03:41.433
> 
> 标签：azure

好吧，我的疑问是如何在 SQL Azure 中启用分布式事务管理器……有人知道怎么做吗？我正在尝试通过实体框架进行交易，我需要这个功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:18:10.317

您需要在虚拟机中运行 SQL Server 才能利用 DTC，因为 Windows Azure SQL 数据库服务不支持它。

TechNet 上提供了完整的比较，请[点击此处](http://social.technet.microsoft.com/wiki/contents/articles/996.compare-sql-server-with-windows-azure-sql-database.aspx)。深入研究**准则和限制**-->**一般准则和限制**-->**事务支持**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:18:19.653

SQL Azure 不支持分布式事务

# sql-server - 为什么我不允许执行此查询？

> ID：16106500
> 
> 赞同：3
> 
> 时间：2013-04-19T14:03:43.277
> 
> 标签：sql-server, sql-server-2008

我在 Sql Server 2008 R2 数据库上有一个用户帐户，它是`db_datareader`数据库角色的成员，没有其他权限。为什么不允许该用户执行以下 SELECT 语句？

```
SELECT * FROM sys.dm_db_partition_stats 
```

我必须设置哪些权限才能允许他执行此查询，但仍要阻止他对数据库做任何有害的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T14:05:10.020

您需要为此授予`VIEW DATABASE STATE`：

```
grant VIEW DATABASE STATE to [<YourUser>] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-19T14:09:46.180

如果只有某种方式可以搜索 Web 并引导您访问产品文档：

[sys.dm_db_partition_stats](http://msdn.microsoft.com/en-gb/library/ms187737.aspx)：

> 需要 VIEW DATABASE STATE 权限才能查询**sys.dm_db_partition_stats**动态管理视图。有关动态管理视图权限的详细信息，请参阅[动态管理视图和函数 (Transact-SQL)](http://msdn.microsoft.com/en-gb/library/ms188754.aspx)。

并且[`db_datareader`](http://msdn.microsoft.com/en-us/library/ms189121.aspx)（好吧，我承认这个*有点*难找）：

> **db_datareader**固定数据库角色的成员可以从所有*用户表*中读取所有数据。

*我的重点*

# javascript - 嵌套 this 指向错误的变量

> ID：16106501
> 
> 赞同：0
> 
> 时间：2013-04-19T14:03:48.207
> 
> 标签：javascript, knockout.js

在下面的班级

`this`in指的`new SeatReservation("Steve", this.availableMeals[0]),`是 inside `seats`，我如何让它指正确的`availableMeals`

我可以去吗`new SeatReservation("Steve", parent.this.availableMeals[0]),`

```
// Overall viewmodel for this screen, along with initial state
function ReservationsViewModel() {
    //var self = this;

    // Non-editable catalog data - would come from the server
    this.availableMeals = [
        { mealName: "Standard (sandwich)", price: 0 },
        { mealName: "Premium (lobster)", price: 34.95 },
        { mealName: "Ultimate (whole zebra)", price: 290 }
    ];    

    // Editable data
    this.seats = ko.observableArray([
        new SeatReservation("Steve", this.availableMeals[0]),
        new SeatReservation("Bert", this.availableMeals[0])
    ]);

    // Operations
    this.addSeat = function() {
        self.seats.push(new SeatReservation("", this.availableMeals[0]));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:05:09.580

使用`self`您注释掉的变量

```
self.availableMeals[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:19:35.167

它也应该适用`this`，因为您没有切换上下文。可能 HTML 中的绑定有问题。我创建了一个[JS Fiddle](http://jsfiddle.net/9ay4n/)，希望能帮到你。

编辑：啊，如果你的意思是里面的语句`addSeat`，你真的需要这个`self`变量，或者你将正确的对象应用为`this`：

```
this.addSeat = function() {
    this.seats.push(new SeatReservation("", this.availableMeals[0]));
}.apply(this); 
```

# c# - htmlpage.window.navigate 在每次点击时打开一个新页面或新标签

> ID：16106503
> 
> 赞同：1
> 
> 时间：2013-04-19T14:04:02.257
> 
> 标签：c#, .net, silverlight

在我的 Silverlight 应用程序中，我单击了一个按钮，每次单击它都会调用此代码

```
 private void Help_Click(object sender, RoutedEventArgs e)
  {
    HtmlPage.Window.Navigate(new Uri("http://stackoverflow.com/"), "_blank");
  } 
```

但我的问题是每次点击它都会在浏览器中打开一个新选项卡或窗口。

我怎么能通过刷新第一个打开的页面或标签来防止这种情况发生。我想防止每次打开多个标签。

（最终我想传递一个动态 url 来导航 ex：第一次 www.stackoverflow.com/questions 第二次我想用 www.stackoverflow.com/answers 刷新同一个打开的页面）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:24:15.683

在欧洲`_blank Use _self`

**例如：**

不要使用这个

```
HtmlPage.Window.Navigate(new Uri("http://stackoverflow.com/"), "_blank"); 
```

你就用这个

```
HtmlPage.Window.Navigate(new Uri("http://stackoverflow.com/"), "_self"); 
```

可能的值：

*   _blank - 目标 URL 将在新窗口中打开
*   _self - 目标 URL 将在单击它的同一帧中打开
*   _search - 目标 URL 将在搜索窗格中打开
*   _top - 目标 URL 将在整个窗口中打开
*   _parent - 目标 URL 将在父框架集中打开

根据您的评论，您可以采用另一种方法。如果你愿意，你可以使用它。

```
private void Help_Click(object sender, RoutedEventArgs e)
{
        // Checking the Condition
        if (Session["hasvalue"].ToString() == "Clicked") // Second click onwards current TAB itself
        {
            HtmlPage.Window.Navigate(new Uri("http://stackoverflow.com/"), "_self");
        }
        else // First Time it will be opened in New TAB
        {
            HtmlPage.Window.Navigate(new Uri("http://stackoverflow.com/"), "_blank");
        }

        // Assign this value to session
        Session["hasvalue"] = "Clicked";
} 
```

希望你能有所了解。,

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T06:40:10.457

你可以实现使用

HtmlPage.Window.Navigate(new Uri(" [https://stackoverflow.com/](https://stackoverflow.com/) "), "xyz");

其中 xyz 是一个随机词。它可以替换为任何单词

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:09:14.957

如果您不希望它打开一个新选项卡，`"_blank"`请从您的`Uri`构造函数中删除。所以改变

```
HtmlPage.Window.Navigate(new Uri("http://stackoverflow.com/"), "_blank"); 
```

至

```
HtmlPage.Window.Navigate(new Uri("http://stackoverflow.com/")); 
```

有关更多信息，请参阅[W3Schools](http://www.w3schools.com/tags/att_a_target.asp)对目标的解释。

`"_self"`是默认值，但您可以使用

```
HtmlPage.Window.Navigate(new Uri("http://stackoverflow.com/"), "_self"); 
```

使事情更明确。

# c# - 我用 C# 复制了一个文件。现在删不掉了？

> ID：16106504
> 
> 赞同：0
> 
> 时间：2013-04-19T14:04:04.490
> 
> 标签：c#, winforms, file, directory

我使用 C# 上的过程复制了一些目录/文件。现在，我想删除主目录。

所以这是基本代码：

```
dir.Delete(true); 
```

但我认为`UnauthorizedAccessException`（访问目录.acrodata，这是一个文件，被拒绝）。

为什么？我怎么能强迫它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T14:06:47.417

您可能要么 1）那里的安全权限有限，无法删除文件，要么 2）有一个文件或目录的句柄仍然打开（正在使用），这会阻止您删除。

```
Directory.Delete(string); 
```

[http://msdn.microsoft.com/en-us/library/62t64db3.aspx](http://msdn.microsoft.com/en-us/library/62t64db3.aspx)

> 未授权访问异常
> 
> 调用者没有所需的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:18:29.000

首先，您应该将您拥有的所有句柄从要删除的文件中处理掉。然后您可以使用以下代码来确保只读文件也被删除：

```
public static void DeleteDirectory(string target_dir)
{
    string[] files = Directory.GetFiles(target_dir);
    string[] dirs = Directory.GetDirectories(target_dir);

    foreach (string file in files)
    {
        File.SetAttributes(file, FileAttributes.Normal);
        File.Delete(file);
    }

    foreach (string dir in dirs)
    {
        DeleteDirectory(dir);
    }

    Directory.Delete(target_dir, false);
} 
```

[此 Stackoverflow 主题](https://stackoverflow.com/questions/329355/cannot-delete-directory-with-directory-deletepath-true/329502#329502)中的来源和更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:09:50.900

您尝试删除的目录可能是只读的。因此，将 ReadOnly 属性设置为 false 并删除它会起作用。

例如：

```
var di = new DirectoryInfo("SomeFolder");
di.Attributes &= ~FileAttributes.ReadOnly; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T14:10:34.400

我猜想在您的复制操作之后，您未能正确关闭 Streams，这意味着您仍然持有@bland 所述的文件句柄。

确保您及时处理您的 IDisposable，这个问题很可能会消失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-10T23:13:23.180

您是否尝试过仅使用

```
Directory.Delete(folderName, true); 
```

那应该递归删除？

# javascript - 另一个链接将在新标签中打开

> ID：16106507
> 
> 赞同：0
> 
> 时间：2013-04-19T14:04:15.567
> 
> 标签：javascript, html, dreamweaver

我目前是 Web 开发的新手。我开始开发我的网站。为此，我有一个按钮，当我按下它时，将打开一个新链接。我希望当我按下按钮时，链接将在同一个选项卡上打开，另一个链接将在新选项卡中打开。有些人告诉我我必须使用 JavaScript 来解决这个问题。我正在研究 Dreamweaver

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:13:27.760

你为什么用按钮？只需将其用作链接/。在新标签中打开使用

```
<a href="http://www.w3schools.com/" target="_blank">Visit W3Schools!</a> 
```

并在同一页面中打开使用

```
<a href="http://www.w3schools.com/">Visit W3Schools!</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:11:43.827

您只能为每个标签指定一个“href”，因此只能指定一个链接。

```
<a href="http://example.com/link1">Open Link 1 in current tab</a> 
```

您可以使用标签上的“目标”属性选择在新标签中打开。

```
<a href="http://example.com/link1" target="_blank">Open Link 1 in new tab</a> 
```

您只能使用 JavaScript 同时打开两个链接（一个在新选项卡中）。

```
<a href="http://example.com/link1" onclick="
window.open('http://example.com/link1','_blank');
window.open('http://example.com/link2');
return false;">Open Link 1 in new tab and link 2 in this tab</a> 
(If JavaScript is disabled, will open link 1 in this tab) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:11:58.860

您必须使用 DOM 文档对象模型来访问窗口属性和 javascript。只需给您的按钮一个 id 并在 javascript 函数中访问该 id 并使用 DOM 的概念

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T14:10:08.313

您需要 Javascript 才能使其在普通按钮上工作。您可以选择的另一个选项是创建一个 div，将其设置为看起来像一个按钮并将其包装在一个 href 中。这样，您可以指定目标：target="_blank"。

检查@cgatian 对 Javascript 解决方案的回答。

# .net - 在 .Net 中使用 Dynamics AX 数组

> ID：16106518
> 
> 赞同：1
> 
> 时间：2013-04-19T14:04:46.797
> 
> 标签：.net, axapta, microsoft-dynamics

我们安装了由 Web 服务调用的 Dynamics AX 4，我需要检索表缓冲区的集合。

虽然我可以实例化一个类实例并一一返回满足我的条件的所有缓冲区，但我发现这个过程中有很多开销，我想传递一个集合。

我知道在 Business Connector 中我可以访问 AxaptaContainer，但在 AX 中，容器不能保存对象/缓冲区，所以它对我没有多大好处。

有没有什么好方法可以将集合传递给.Net？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T21:25:26.230

如果有人关心的话，我永远无法在 AX 中构建 .Net 对象的集合并将集合传递回 Web 服务，即使它们是在服务中定义的。

相反，我构建了 AX 对象的 XML 表示，并将本质上用于映射的 KeyValuePairs 传递给对象集合，并在对象集合中循环，因此它们的值可以逐个对象映射，并且集合构建在服务内的强类型对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T17:33:40.183

这已经太迟了，无法回复。但我认为您可以在 X++ 中使用 List 对象并将其返回给 .Net。请注意，List 对象有一个名为 getEnumerator 的方法，可用于遍历其内容。

希望这可以帮助。

# http - 无法从本地主机下载...。无法打开此 Internet 站点。请求的站点不可用或找不到

> ID：16106528
> 
> 赞同：1
> 
> 时间：2013-04-19T14:05:13.503
> 
> 标签：http, internet-explorer-6, explorer

我正在尝试通过将以下内容添加到 web.xml 文件来为每个重要的 http 错误创建一个默认错误页面；

```
<error-page>
  <exception-type>java.sql.SQLException</exception-type>
  <location>/error-mantenimiento.xhtml</location>
 </error-page>
 <error-page>
  <error-code>401</error-code>
  <location>/error-mantenimiento.xhtml</location>
 </error-page>
 <error-page>
  <error-code>403</error-code>
  <location>/error-mantenimiento.xhtml</location>
 </error-page>
 <error-page>
  <error-code>404</error-code>
  <location>/error-mantenimiento.xhtml</location>
 </error-page>
 <error-page>
  <error-code>500</error-code>
  <location>/error-mantenimiento.xhtml</location>
 </error-page>
 <error-page>
  <error-code>503</error-code>
  <location>/error-mantenimiento.xhtml</location>
 </error-page> 
```

当我尝试使用假网址时，它确实可以在 firefox 或 chrome 上使用，通过抛出 http 404 错误。但在 IE6 到 IE8 上，我得到“无法从 localhost 下载...。无法打开此 Internet 站点。请求的站点不可用或找不到。请稍后再试。”

我在互联网上搜索此错误，有人报告已通过启用或禁用安全选项卡上的“不将加密页面保存到磁盘”来修复它。Y尝试启用和禁用此选项，它会不断抛出相同的错误。我也尝试添加或删除 http 标头标签

就像他们在其他帖子上所做的那样，但我得到了相同的 IE6 错误。错误页面确实适用于 IE9 及更高版本。

我使用的网络服务器是 JBOSS 4.0.3。

据我所知，他们不想切换浏览器，这个问题将保持开放。

我们也尝试通过修改windows注册表上的以下记录

```
BypassHTTPNoCacheCheck   doubleword   0x00000001
BypassSSLNoCacheCheck    doubleword   0x00000001 
```

但是没有用... :S 这有什么线索吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T15:42:56.503

我遇到了同样的问题，偶然发现了你的问题。在进一步研究之后，虽然我也能找到这个问题：[IE : Unable to download * from *. 无法打开此 Internet 站点。请求的站点不可用或找不到](https://stackoverflow.com/questions/3415370/ie-unable-to-download-from-unable-to-open-this-internet-site-the-request)

如果您通过 SSL 运行您的网站，请尝试为以下属性设置标头内容： Cache-Control: private Pragma: token

我相信您可以使用 web.xml 文件中的以下内容在 xml 中设置它：

```
<init-param>
    <param-name>Cache-Control</param-name>
    <param-value>max-age=172801, private</param-value>
</init-param>
<init-param>
    <param-name>Pragma</param-name>
    <param-value>token</param-value>
</init-param> 
```

虽然我对 JBOSS 不是很熟悉。我希望这有帮助。

# android - 从 ListView 中的 URL 插入图像

> ID：16106532
> 
> 赞同：0
> 
> 时间：2013-04-19T14:05:23.633
> 
> 标签：android, android-listview, android-adapter

我想知道当 URL 存储在 json 中时，是否可以直接从网络加载 ListView 中的图像。

编辑：已解决，可以使用 AsyncTask

```
 public class ParseImage extends AsyncTask<Object, String, Drawable> {

        private ProgressBar pd;
        private ImageView imv;
        private int position;

        public ParseImage(int position, ImageView imv, ProgressBar pd2) {

            this.position = position;
            this.imv = imv;
            this.pd = pd2;

        }

        @Override
        public Drawable doInBackground(Object... params) {

            Drawable d = null;

            try {
                d = Drawable.createFromStream(
                        (InputStream) new URL(list.get(position).get("Cover"))
                                .getContent(), "src");
            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            return d;

        }

        public void onPostExecute(Drawable result) {

            if (result != null && imv != null) {
                pd.setVisibility(View.INVISIBLE);
                imv.setImageDrawable(result);
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:58:51.250

您需要创建自己的自定义 Listview 来显示更多的字符串。这是一段您可以参考的代码：

电影适配器.java：

```
public class MovieAdaptor extends ArrayAdapter<Movie> {
Context context;
int layoutResourceId;
ArrayList<Movie> movieArrayList = new ArrayList<Movie>();

public MovieAdaptor(Context context, int layoutResourceId, ArrayList<Movie> movies) {
    super(context, layoutResourceId, movies);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.movieArrayList = movies;
}

public View getView(final int position, View convertView, ViewGroup parent) {
    View row = convertView;
    ContactHolder holder = null;

    if (row == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new ContactHolder();
        holder.thumbnail = (ImageView) row.findViewById(R.id.imageThumbnail);
        holder.title = (TextView) row.findViewById(R.id.MovieTitle);
        holder.synopsis = (TextView) row.findViewById(R.id.synopsis);

        row.setTag(holder);
    } else {
        holder = (ContactHolder) row.getTag();
    }
    holder.title.setText(movieArrayList.get(position).title);
    holder.synopsis.setText(movieArrayList.get(position).synopsis);

       newAsyncDownloadImage(holder.thumbnail).execute(movieArrayList.get(position).posters.get("thumbnail"));

    return row;
}

static class ContactHolder {
    ImageView thumbnail;
    TextView title;
    TextView synopsis;
}

} 
```

活动类：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    moviesListView = (ListView) findViewById(R.id.list_movies);
    moviesListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            if (position > HEADER) {
                Intent intent = new Intent(getBaseContext(), MovieActivity.class);
                intent.putExtra(MOVIE_OBJECT, movieArrayList.get(position - 1));
                startActivity(intent);
            }
        }
    });
    View header = (View) getLayoutInflater().inflate(R.layout.listview_row_header, null);
    moviesListView.addHeaderView(header);
    movieAdaptor = new MovieAdaptor(this, R.layout.listview_row_item, movieArrayList);
    moviesListView.setAdapter(movieAdaptor); 
```

AsyncDownloadImage.java：

```
public class AsyncDownloadImage extends AsyncTask<Object, Object, Object> {
ImageView iv;
private HttpURLConnection connection;
private InputStream is;
private Bitmap bitmap;

public AsyncDownloadImage(ImageView mImageView) {
    iv = mImageView;
}

@Override
protected Object doInBackground(Object... params) {
    URL url;
    try {
        url = new URL((String) params[0]);
        connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.connect();
        is = connection.getInputStream();
        bitmap = BitmapFactory.decodeStream(is);
        is.close();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            if (is != null) {
                is.close();
            }
            if (connection != null) {
                connection.disconnect();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return bitmap;
}

@Override
protected void onPostExecute(Object result) {
    super.onPostExecute(result);
    if (null != result) {
        iv.setImageBitmap((Bitmap) result);
    } else {
        iv.setBackgroundResource(R.drawable.ic_launcher);
    }
    }
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:35:44.117

可以寄回的吗

```
JSONfunction.getJSONfromURL("http://colmarmagazine.ctai.fr/issues.php"); 
```

请 ？我觉得分手不好！因为你有：

```
Unable to decode stream: java.io.FileNotFoundException: /http:/colmarmagazine.ctai.fr/content/numerodemo/numerodemo.png: open failed: ENOENT (No such file or directory) 
```

还有一个“/”在你的封面上太多了！

# svn - 是否可以使用提交后挂钩（svn 脚本）调用要执行的 Java EE 应用程序（耳朵）？

> ID：16106533
> 
> 赞同：0
> 
> 时间：2013-04-19T14:05:26.553
> 
> 标签：svn, jakarta-ee, hook, post-commit-hook

我需要调用我的 Java EE 应用程序以在提交后执行（在 svn 中），以便它可以使用从 svn 和其他系统发送的一些信息。是否可以编写一个提交后挂钩来调用应用程序的耳朵？

# c++ - 我的数学表达式转换器无法正确打印

> ID：16106539
> 
> 赞同：-3
> 
> 时间：2013-04-19T14:05:48.410
> 
> 标签：c++, parsing

所以，我正在编写一个程序，它接受输入（一个数学表达式）并将其转换为后缀符号，然后将其打印给用户。当我在简单的数学表达式（即）上执行这个程序时，`5 + 1 - 3 * 2`它工作得很好。问题是当我包含括号时。它将所有数学运算符打印在最后一行而不是它们的正确位置。我需要数学运算符处于适当的位置。（即`5 1 + 3 - 2 *`）。有什么建议么？

这个语句的真正输出`5 - ( 2 * 3 ) + 5`是`5 2 3 5 * - +`我需要它看起来像`5 2 3 * - 5 +`

```
#include <iostream>
#include <stack>
#include <string>
#include <sstream>
using namespace std;

int priority(string item) //prioritizing the operators
{
  if(item == "(" || item == ")")
  {
    return 0;
  }
  else if(item == "+" || item == "-")
  {
    return 1;
  }
  else if(item == "/" || item == "*")
  {
    return 2;
  }
}
void welcome()
{
 cout << "blah blah!" << endl;
 }
int main()
{   

welcome(); // welcome text

stack <string> myStack; 
char line[256]; 
cin.getline( line, 256); 
string exp = line;
string item;
string output = ""; 

istringstream iss(exp);

iss >> item;

while(iss)
{
    if(item != "+" && item != "-" && item != "/" && item != "*" && item != "(" && item != ")") //If the char is a number
    {
        cout << item << endl;
    }
    else if(myStack.size() == 0) // If the stack is empty
    {
        myStack.push(item);
    }
    else if( item == "+" || item == "-" || item == "/" || item == "*") //If the char is an operator
    {
        if(priority(myStack.top()) < priority(item)) // the item on the stack is greater priority than the array item
        {
            myStack.push(item);
        }
        else
        {
            while(myStack.size() > 0 && priority(myStack.top()) >= priority(item)) //while the stack contains something, and the item on 
            {           
                string dpu = myStack.top();
                myStack.pop();
                output = output + dpu + " "; 
            }
            myStack.push(item);
        }
    }
    else if(item == "(") // left peren
    {
        myStack.push(item);
    }
    else if(item == ")") // right peren
    {
        while(myStack.top() != "(")
        {
            string dpu = myStack.top();  
            myStack.pop();
            output = output + dpu + " "; 
        }
        myStack.pop();
    }
    iss>> item; 
}
while (myStack.size() > 0 )
{
    string dpu = myStack.top(); 
    output = output + dpu + " ";
    myStack.pop();
}
cout<< output << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:16:16.910

好吧...在您的代码中，数字总是在其他任何内容之前打印：

```
if (item != "+" && item != "-" && item != "/" && item != "*" && item != "(" && item != ")") //If the char is a number
{
    cout << item << endl;
} 
```

我不熟悉您要求的表示法，但在我看来，堆栈不是此任务的正确数据结构......对我来说，使用树似乎更好，因为您正在解析

# email - 可以使用mailto链接吗？

> ID：16106541
> 
> 赞同：1
> 
> 时间：2013-04-19T14:05:50.997
> 
> 标签：email, mailto

我一直认为最好的办法是避免在您的网站上使用它们，因为机器人可以轻松地获取它们并收集您的电子邮件。到目前为止，出于这个原因，我一直使用联系表格。然而，这些天我注意到使用 mailto 链接的网站，不仅仅是任何网站，还有像[Huge](http://hugeinc.com/contactus)这样的大型设计公司。我很好奇使用这些链接是否“可以”。垃圾邮件发送者会接受他们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:10:51.090

如果它在互联网上，有人可以通过自动化流程获得它。但是，您可以使用 JavaScript 在页面上任何您需要的地方加载您的电子邮件地址。在大多数情况下，这可以防止机器人看到电子邮件地址，因为您的电子邮件地址不是页面来源的一部分。

这是一个简单的例子：

```
<script language="JavaScript">
    var username = "[your_username]";
    var hostname = "[your_mail_account_domain]";
    var linktext = username + "@" + hostname ;
    document.write("<a href='" + "mail" + "to:" + username + "@" + hostname + "'>" + linktext + "</a>");
</script> 
```

# ruby-on-rails - 使用 Taglib-Ruby 为 Web 应用程序构建自定义 Heroku Ruby/Rails Buildpack

> ID：16106552
> 
> 赞同：3
> 
> 时间：2013-04-19T14:06:19.523
> 
> 标签：ruby-on-rails, heroku, taglib, buildpack, taglib-ruby

我使用 Rails 3.2 构建了一个使用 taglib-ruby gem 的应用程序。

我需要将此应用程序上传到 Heroku，但它无法成功构建 taglib-ruby gem，因为需要在机器上安装相关的 C++ taglib 库。

```
 Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
   /usr/local/bin/ruby extconf.rb
   checking for main() in -lstdc++... yes
   checking for main() in -ltag... no
   You must have taglib installed in order to use taglib-ruby.
   Debian/Ubuntu: sudo apt-get install libtag1-dev
   Fedora/RHEL: sudo yum install taglib-devel
   Brew: brew install taglib
   MacPorts: sudo port install taglib
   *** extconf.rb failed ***
   Could not create Makefile due to some reason, probably lack of
   necessary libraries and/or headers.  Check the mkmf.log file for more
   details.  You may need configuration options.
   Provided configuration options:
   --with-opt-dir
   --with-opt-include
   --without-opt-include=${opt-dir}/include
   --with-opt-lib
   --without-opt-lib=${opt-dir}/lib
   --with-make-prog
   --without-make-prog
   --srcdir=.
   --curdir
   --ruby=/usr/local/bin/ruby
   --with-tag-dir
   --without-tag-dir
   --with-tag-include
   --without-tag-include=${tag-dir}/include
   --with-tag-lib
   --without-tag-lib=${tag-dir}/lib
   --with-stdc++lib
   --without-stdc++lib
   --with-taglib
   --without-taglib
   Gem files will remain installed in /tmp/build_1upomfnxnemtx/vendor/bundle/ruby/1.9.1/gems/taglib-ruby-0.5.2 for inspection.
   Results logged to /tmp/build_1upomfnxnemtx/vendor/bundle/ruby/1.9.1/gems/taglib-ruby-0.5.2/ext/taglib_base/gem_make.out
   An error occurred while installing taglib-ruby (0.5.2), and Bundler cannot
   continue.
   Make sure that `gem install taglib-ruby -v '0.5.2'` succeeds before bundling. 
```

这导致我使用 Vulcan 构建自定义 buildpack 来安装我的应用程序。

按照[https://github.com/heroku/vulcan/issues/32](https://github.com/heroku/vulcan/issues/32)上的建议，我能够使用 Vulcan 成功安装 cmake 和 taglib。vulcan 下载到我在[https://github.com/JllyGrnGiant/vulcan-buildpack托管的计算机上的生成文件](https://github.com/JllyGrnGiant/vulcan-buildpack)

如果我进入我的应用程序目录并运行

```
heroku create --stack cedar --buildpack [github repo].git 
```

然后尝试推送我的应用程序，构建器成功找到了 buildpack 但不知道如何继续安装我的应用程序

```
Counting objects: 893, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (828/828), done.
Writing objects: 100% (893/893), 38.75 MiB | 1.03 MiB/s, done.
Total 893 (delta 480), reused 57 (delta 2)
-----> Fetching custom git buildpack... done
!     Heroku push rejected, no Cedar-supported app detected** 
```

我相信这是因为我需要分叉默认的 ruby​​ buildpack。

现在我们解决了我的问题。在部署方面我不是很了解，所以我不知道在哪里包含我的 taglib 文件，也不知道要更改哪些其他文件，所以推送我的应用程序会找到那些 taglib 库来构建 taglib-ruby gem。Heroku 网站上帮助的打包二进制文件部分对我来说没有多大意义，更不用说在我没有二进制文件但有很多头文件和库的问题的上下文中。

其他问过关于 taglib-ruby 和 Heroku 的问题的人还没有安装 cmake，这对我来说完成得很好，我也找不到解释如何在 Ruby/Rails 的自定义 buildpack 中包含库的资源应用程序。

任何帮助将不胜感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:44:44.020

您需要一个自定义构建包。我刚刚构建了一个自定义 buildpack 来在 heroku 上安装 taglib，它将安装 taglib gem 而没有错误。我花了大约 2 周的时间试图安装它，终于成功了。

[`https://github.com/menan/heroku-buildpack-ruby.git`](https://github.com/menan/heroku-buildpack-ruby.git)

# hash - hadoop 中的 jenkinshash 保证什么？

> ID：16106555
> 
> 赞同：1
> 
> 时间：2013-04-19T14:06:27.827
> 
> 标签：hash, hadoop, hashcode

我知道 jenkinshash 会为给定值生成一个整数 (2^32)。此链接上的文档：http: [//hbase.apache.org/apidocs/org/apache/hadoop/hbase/util/JenkinsHash.html](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/util/JenkinsHash.html)

说返回：一个 32 位的值。键的每一位都会影响返回值的每一位。相差一位或两位的两个键将具有完全不同的哈希值。

jenkinshash 对于给定值最多可以返回 2^32 个不同的结果。如果我有超过 2^32 个值怎么办？它会为两个不同的值返回相同的结果吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:08:13.513

与大多数哈希函数一样，是的，它可能会为不同的输入数据返回重复的哈希值。根据您链接到的文档，保证是一位或两位不同的值是不同的。一旦它们与 3 位或更多位不同，您就没有唯一性保证。

散列函数的输入数据可能比散列的输出具有更大的大小（具有更多唯一的输入值）。这很容易使输出数据中必须存在重复项。考虑一个在范围内输出整数`1-10`但在范围内接受输入的散列函数`1-100`：很明显，多个值必须散列到相同的值，因为您不能`1-100`仅使用十个不同的整数来枚举值。这被称为[鸽巢原理](https://en.wikipedia.org/wiki/Pigeonhole_principle)。

然而，任何好的散列函数都会尝试平均分配输出值。在`1-10`示例中，您可以*期望*一个好的散列函数给出与 a`2`大致相同的次数`6`。

保证唯一性的散列函数称为[完美散列函数](http://en.wikipedia.org/wiki/Perfect_hash_function)。它们都提供至少与输入数据具有相同基数的输出数据。输入整数的完美散列函数`1-100`必须至少有 100 个不同的输出值。

请注意，[根据维基百科](http://en.wikipedia.org/wiki/Jenkins_hash_function)，詹金斯散列函数*不是*加密的。这意味着您应该避免使用它们来确保密码安全等，但您可以使用散列来进行一些均匀的工作分配和校验和。

# maple - Maple 核函数列表

> ID：16106559
> 
> 赞同：1
> 
> 时间：2013-04-19T14:06:37.423
> 
> 标签：maple

`print`有一组函数在使用时不显示其代码`interface(verboseproc=2)`。这些在 Maple 内核中实现。

是否有此类功能的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:23:20.990

尝试发出命令，

```
anames(builtin); 
```

这种方法记录在[类型，内置](http://www.maplesoft.com/support/help/Maple/view.aspx?path=type/builtin)帮助页面上。

# jetty - org.mortbay.start.Main.init(Main.java:465) 的码头 NPE

> ID：16106563
> 
> 赞同：-3
> 
> 时间：2013-04-19T14:06:47.607
> 
> 标签：jetty

从 Jetty 6.1.21 开始有一个奇怪的异常：

```
c:\TestJetty>java -jar start.jar
java.lang.NullPointerException
    at java.io.File.<init>(File.java:222)
    at org.mortbay.start.Main.init(Main.java:465)
    at org.mortbay.start.Main.start(Main.java:439)
    at org.mortbay.start.Main.main(Main.java:119) 
```

谷歌建议添加`-Djetty.home=.`. Jetty 就是从这个论点开始的。但是在其他计算机上，即使没有这个参数，码头也会启动......看起来很奇怪。所有环境看起来都一样。但...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:32:49.183

让我们看看发生了什么...

一、我的环境

```
C:\>ver

Microsoft Windows [Version 6.1.7601]

C:\>systeminfo | findstr /B /C:"OS Name" /C:"OS Version"
OS Name:                   Microsoft Windows 7 Home Premium
OS Version:                6.1.7601 Service Pack 1 Build 7601

C:\jetty-6.1.21>java -version
java version "1.6.0_30"
Java(TM) SE Runtime Environment (build 1.6.0_30-b12)
Java HotSpot(TM) Client VM (build 20.5-b03, mixed mode, sharing)

C:\jetty-6.1.21>dir
 Volume in drive C has no label.
 Volume Serial Number is C8CF-820B

 Directory of C:\jetty-6.1.21

04/19/2013  11:51 AM    <DIR>          .
04/19/2013  11:51 AM    <DIR>          ..
04/19/2013  11:51 AM    <DIR>          bin
04/19/2013  11:50 AM    <DIR>          contexts
04/19/2013  11:51 AM    <DIR>          contrib
04/19/2013  11:50 AM    <DIR>          distribution
04/19/2013  11:51 AM    <DIR>          etc
04/19/2013  11:51 AM    <DIR>          examples
04/19/2013  11:50 AM    <DIR>          extras
04/19/2013  11:51 AM    <DIR>          javadoc
04/19/2013  11:51 AM    <DIR>          jxr
04/19/2013  11:51 AM    <DIR>          lib
04/19/2013  11:51 AM    <DIR>          LICENSES
09/21/2009  11:07 PM    <DIR>          logs
04/19/2013  11:51 AM    <DIR>          modules
09/21/2009  11:07 PM             1,621 NOTICE.txt
04/19/2013  11:51 AM    <DIR>          patches
09/22/2009  12:17 AM             9,170 pom.xml
04/19/2013  11:51 AM    <DIR>          project-website
09/21/2009  11:07 PM             4,253 README.txt
04/19/2013  11:51 AM    <DIR>          resources
09/22/2009  04:44 PM            17,239 start.jar
09/21/2009  11:07 PM           161,333 VERSION.txt
04/19/2013  11:50 AM    <DIR>          webapps
               5 File(s)        193,616 bytes
              19 Dir(s)  315,649,884,160 bytes free 
```

接下来，让我们正常尝试一下...

```
C:\jetty-6.1.21>java -jar start.jar
2013-04-19 11:54:10.334::INFO:  Logging to STDERR via org.mortbay.log.StdErrLog
2013-04-19 11:54:11.019::INFO:  jetty-6.1.21
2013-04-19 11:54:11.133::INFO:  Deploy C:\jetty-6.1.21\contexts\test.xml -> org.
mortbay.jetty.webapp.WebAppContext@19616c7{/,C:\jetty-6.1.21/webapps/test}
2013-04-19 11:54:11.171::INFO:  Deploy C:\jetty-6.1.21\contexts\javadoc.xml -> o
rg.mortbay.jetty.handler.ContextHandler@3bb2b8{/javadoc,file:/C:/jetty-6.1.21/ja
vadoc/}
2013-04-19 11:54:11.287::INFO:  Deploy C:\jetty-6.1.21\contexts\test-jndi.xml ->
 org.mortbay.jetty.webapp.WebAppContext@1df38fd{/test-jndi,C:\jetty-6.1.21/conte
xts/test-jndi.d} 
```

它按预期工作。

让我们来介绍一下皱纹的存在`C:\start.jar`

```
C:\>dir *.jar
 Volume in drive C has no label.
 Volume Serial Number is C8CF-820B

 Directory of C:\

04/19/2013  12:15 PM                 1 start.jar
               1 File(s)              1 bytes
               0 Dir(s)  315,647,086,592 bytes free

C:\jetty-6.1.21>java -jar start.jar
java.lang.NullPointerException
        at java.io.File.<init>(Unknown Source)
        at org.mortbay.start.Main.init(Main.java:465)
        at org.mortbay.start.Main.start(Main.java:439)
        at org.mortbay.start.Main.main(Main.java:119) 
```

是的，这不是正确的行为。让我们看看码头是怎么想的……

```
C:\jetty-6.1.21>java -DDEBUG -jar start.jar
config=org/mortbay/start/start.config
T $(jetty.class.path).path                         always
F $(jetty.lib)/**                                  exists $(jetty.lib)
F jetty.home=.                                     ! exists $(jetty.home)/start.jar
F jetty.home=..                                    ! exists $(jetty.home)/start.jar
F jetty.home=/home/jetty                           ! exists $(jetty.home)/start.jar
F jetty.home=/C:/jetty                             ! exists $(jetty.home)/start.jar
F jetty.home=.                                     ! exists $(jetty.home)/start.jar
T org.mortbay.xml.XmlConfiguration.class
  CLASS=org.mortbay.xml.XmlConfiguration
T $(start.class).class
T $(jetty.home)/etc/jetty.xml                      nargs == 0
  ARGS+=\etc\jetty.xml
T $(jetty.home)/lib/*                              always
T $(jetty.home)/lib/jsp-2.1/*                      java >= 1.5
T $(jetty.home)/lib/jsp-2.0/*                      ! available org.apache.jasper.servlet.JspServlet
T $(jetty.home)/lib/management/*
F $(jetty.home)/lib/management/mx4j/*              java < 1.5
T $(jetty.home)/lib/naming/*
T $(jetty.home)/lib/plus/*
T $(jetty.home)/lib/xbean/*
T $(jetty.home)/lib/wadi/*
T $(jetty.home)/lib/grizzly/*
T $(jetty.home)/lib/annotations/*                  java >= 1.5

T $(jetty.home)/lib/jre1.5/**                      java >= 1.5
T $(jetty.home)/lib/ext/**                        always
T /usr/share/java/ant.jar                          ! available org.apache.tools.ant.Main
T $(jetty.home)/resources/
  !C:\resources
java.lang.NullPointerException
        at java.io.File.<init>(Unknown Source)
        at org.mortbay.start.Main.init(Main.java:465)
        at org.mortbay.start.Main.start(Main.java:439)
        at org.mortbay.start.Main.main(Main.java:119) 
```

是的，每个`$(jetty.home)`回报测试`F`（假）

您似乎在`org.mortbay.start.Main`（不是`start.config`）中发现了一个错误。

不幸的是，这个 Jetty 6 错误不会被修复，因为 Jetty 6 已经在几年前结束了生命。

让我们看看这个错误是否存在于 Jetty 7、8 或 9 中？

```
C:\jetty-distribution-7.6.10.v20130312>java -jar start.jar
2013-04-19 12:21:33.910:INFO:oejs.Server:jetty-7.6.10.v20130312
2013-04-19 12:21:33.947:INFO:oejdp.ScanningAppProvider:Deployment monitor C:\jet
ty-distribution-7.6.10.v20130312\webapps at interval 1
2013-04-19 12:21:33.956:INFO:oejd.DeploymentManager:Deployable added: C:\jetty-d
istribution-7.6.10.v20130312\webapps\spdy.war
2013-04-19 12:21:34.078:INFO:oejw.WebInfConfiguration:Extract jar:file:/C:/jetty
-distribution-7.6.10.v20130312/webapps/spdy.war!/ to C:\Users\joakim\AppData\Loc
al\Temp\jetty-0.0.0.0-8080-spdy.war-_spdy-any-\webapp

C:\jetty-distribution-8.1.10.v20130312>java -jar start.jar
2013-04-19 12:21:46.946:INFO:oejs.Server:jetty-8.1.10.v20130312
2013-04-19 12:21:46.984:INFO:oejdp.ScanningAppProvider:Deployment monitor C:\jet
ty-distribution-8.1.10.v20130312\webapps at interval 1
2013-04-19 12:21:46.995:INFO:oejd.DeploymentManager:Deployable added: C:\jetty-d
istribution-8.1.10.v20130312\webapps\spdy.war
2013-04-19 12:21:47.115:INFO:oejw.WebInfConfiguration:Extract jar:file:/C:/jetty
-distribution-8.1.10.v20130312/webapps/spdy.war!/ to C:\Users\joakim\AppData\Loc
al\Temp\jetty-0.0.0.0-8080-spdy.war-_spdy-any-\webapp

C:\jetty-distribution-9.0.2.v20130417>java -jar start.jar
2013-04-19 12:22:19.127:WARN::main: test-realm is deployed. DO NOT USE IN PRODUC
TION!
2013-04-19 12:22:19.132:INFO:oejs.Server:main: jetty-9.0.2.v20130417
2013-04-19 12:22:19.214:INFO:oejs.AbstractNCSARequestLog:main: Opened C:\jetty-d
istribution-9.0.2.v20130417\logs\2013_04_19.request.log
2013-04-19 12:22:19.251:INFO:oejdp.ScanningAppProvider:main: Deployment monitor
[file:/C:/jetty-distribution-9.0.2.v20130417/webapps/] at interval 1
2013-04-19 12:22:19.669:INFO:oejsh.ContextHandler:main: started o.e.j.w.WebAppCo
ntext@3e125554{/,file:/C:/jetty-distribution-9.0.2.v20130417/webapps/ROOT/,AVAIL
ABLE}{C:\jetty-distribution-9.0.2.v20130417\webapps\ROOT}
2013-04-19 12:22:19.703:INFO:oejsh.ContextHandler:main: started o.e.j.s.h.Contex
tHandler@7ffa129b{/javadoc,file:/C:/jetty-distribution-9.0.2.v20130417/javadoc,A
VAILABLE} 
```

在 Jetty 7、8 或 9 中不存在。

即使测试 Jetty 7.0.0 里程碑的早期版本也表明，自 Jetty 6.1.26 以来，124 个 Jetty 版本中的任何一个版本中都不存在此错误。

考虑升级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:06:47.607

```
c:\TestJetty>echo 1 > c:\start.jar

c:\TestJetty>java -jar start.jar
java.lang.NullPointerException
        at java.io.File.<init>(Unknown Source)
        at org.mortbay.start.Main.init(Main.java:465)
        at org.mortbay.start.Main.start(Main.java:439)
        at org.mortbay.start.Main.main(Main.java:119)

c:\TestJetty>rm c:\start.jar

c:\TestJetty>java -jar start.jar
2013-04-19 18:03:12.989::INFO:  Logging to STDERR via org.mortbay.log.StdErrLog
... 
```

# mysql - MySQL UNHEX 函数在 phpmyadmin 中显示意外结果

> ID：16106568
> 
> 赞同：2
> 
> 时间：2013-04-19T14:07:04.397
> 
> 标签：mysql, phpmyadmin

对于我所有的项目，我对数据库中的 id 字段使用 VARBINARY(16)。id 是由以下代码生成的 uuid。

```
function gen_uuid() {
    return sprintf('%04x%04x%04x%04x%04x%04x%04x%04x',
        // 32 bits for "time_low"
        mt_rand(0, 0xffff), mt_rand(0, 0xffff),
        // 16 bits for "time_mid"
        mt_rand(0, 0xffff),
        // 16 bits for "time_hi_and_version",
        // four most significant bits holds version number 4
        mt_rand(0, 0x0fff) | 0x4000,
        // 16 bits, 8 bits for "clk_seq_hi_res",
        // 8 bits for "clk_seq_low",
        // two most significant bits holds zero and one for variant DCE1.1
        mt_rand(0, 0x3fff) | 0x8000,
        // 48 bits for "node"
        mt_rand(0, 0xffff), mt_rand(0, 0xffff), mt_rand(0, 0xffff)
    );
} 
```

**Windows XP + MySQL 5.5.30 + PhpMyAdmin 3.5.2/3.5.8/4.0.0**

我在 PhpMyAdmin 中运行以下查询并得到一个空结果

```
SELECT UNHEX('5578fae02ba342e0bc977266f8e08cf6') 
```

如果我在 MySQL 控制台中运行它，我会得到以下结果

```
+-------------------------------------------+
| UNHEX('5578fae02ba342e0bc977266f8e08cf6') |
+-------------------------------------------+
| Ux·α+úBα╝ùrf°αî÷                          |
+-------------------------------------------+ 
```

**FreeBSD + MySQL 5.5.30 + PhpMyAdmin 3.5.2**

我在 PhpMyAdmin 中运行相同的查询，结果得到了十六进制版本的 ID`5578fae02ba342e0bc977266f8e08cf6`

在 MySQL 控制台中运行查询会产生与在我的 XP 服务器上相同的结果

* * *

**备注** 如果我在 XP 机器上浏览表数据，大约 10% 的行似乎没有 ID。该软件和所有关系似乎都可以正常工作。如果我用看似无效的 ID 编辑记录，我可以在页面的文本字段中看到预期的结果。保存它并不能解决任何问题，通常将其更改为另一个。

对我来说，这似乎是 PhpMyAdmin 的一个问题，但到目前为止，尝试不同的版本并没有为我解决任何问题。我之前运行 mysql 5.5.29 并更新到 5.5.30 但由于控制台版本似乎工作正常，我认为可以排除 mysql。两台服务器都使用 nginx 运行 PHP fast-cgi。更新到最新版本的 PHP 并没有解决任何问题。

其他 UUID 的工作如这些屏幕截图所示：

* * *

**XP 服务器** ![XP 服务器不工作](https://i.stack.imgur.com/5wMTn.png)

* * *

**FreeBSD 服务器** ![在此处输入图像描述](https://i.stack.imgur.com/4R33l.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:11:27.780

原来这是 PhpMyAdmin 中的错误，我将在他们的论坛上报告错误

```
if ($_SESSION['tmp_user_values']['display_binary_as_hex']
     && PMA_Util::containsNonPrintableAscii($column)
) {
    $column = bin2hex($column);
} else {
    $column = htmlspecialchars(
        PMA_Util::replaceBinaryContents(
            $column
        )
    );
} 
```

`containsNonPrintableAscii`从 if 语句中删除该函数可以解决此问题。它在我们的开发服务器上运行的原因原来是因为添加该功能的初始补丁是由我的同事提交的。（后来被 PhpMyAdmin 开发团队销毁）

# google-app-engine - java.lang.IllegalArgumentException：不能接受类 com.veersoft.gwt.shared.trailbalance.TrailBalanceClassResult 作为内存缓存实体

> ID：16106571
> 
> 赞同：6
> 
> 时间：2013-04-19T14:07:14.127
> 
> 标签：google-app-engine, memcached, objectify

为了让我的应用程序更快，我正在使用`MemcacheService`. 现在，当我尝试将对象放入 中时`MemcacheService`，出现以下错误：

```
java.lang.IllegalArgumentException: can't accept class com.veersoft.gwt.shared.trailbalance.TrailBalanceClassResult as a memcache entity. 
```

有关实体的详细信息：

1.  它是一个实现 IsSerializable 接口的普通 Bean。
2.  它不是数据存储实体。我使用它只是为了在浏览器端呈现（即延迟任务将计算结果并将这些结果发送到浏览器）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T16:09:25.793

要将任何对象放入 memcache 中，它需要实现该`Serializable`接口。`IsSerializable`是旧版本 GWT 的不合时宜，不会以任何方式影响 java 序列化。

# wolfram-mathematica - 如何在 Mathematica 的数组中找到最大正值？

> ID：16106573
> 
> 赞同：0
> 
> 时间：2013-04-19T14:07:20.923
> 
> 标签：wolfram-mathematica

我有一个表达式数组，每个都取决于`a`.

我想找到最小正值，因为它取决于`a`，而不必替换 a。

例如，如果数组是`[a^2, 1-2a, 1]`，那么调用它的函数`MinPositive`将返回：

```
(MinPositive[a^2, 1-2a, 1]) /. a-> 0

0

(MinPositive[a^2, 1-2a, 1]) /. a-> 0.7

0.7^2 
```

等等。

有任何想法吗？

我会很感激编写`MinPositive`函数的帮助，以便可以使用它，例如，而不是常规`Min`函数。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:04:32.337

你有这样的想法吗？返回产生最小值的表达式..

```
minp[lst_, a_, v_] := (
     pos = Select[lst, ((# /. a -> v) > 0) &];
     Last@Sort[pos , ( (#1 /. a -> v ) > (#2 /. a -> v )) &])

minp[{a^2, 1 - 2 a, 1}, a, .2]  -> a^2
minp[{a^2, 1 - 2 a, 1}, a, .48]  -> 1-2 a
minp[{a^2, 1 - 2 a, 1}, a, 2]   -> 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:16:40.047

表达方式

```
[a^2, 1-2a, 1] 
```

不是一个格式良好的 Mathematica 表达式，也许你的意思是

```
{a^2, 1-2a, 1} 
```

这是 3 个元素列表的有效表达式。Mathematica 并没有真正做数组，尽管列表通常可以用来对数组建模。

另一方面表达

```
MinPositive[a^2, 1-2a, 1] 
```

是对使用 3 个参数调用的函数的有效调用`MinPositive`。

一方面，我认为您可能正在寻找一个函数调用，例如

```
MinPositive[{a^2, 1-2a, 1}/.a->0] 
```

其中的值`0`将`a`在调用内部替换，`MinPositive`但不会在该调用外部应用。

从您的问题中不清楚您是否需要帮助来编写`MinPositive`函数；如果您这样做，请编辑您的问题并明确说明。此外，您的问题标题要求最大正值，而您的问题主体是指最小值。你可能也想解决这个问题。

**编辑**

我在这台机器上没有 Mathematica，所以我没有检查这个，但它应该足够接近让你完成：

```
minPositive[lst_List] := Min[Select[lst,#>0&]] 
```

然后你会这样称呼

```
minPositive[{a^2, 1-2a, 1}] 
```

（注意：我避免创建名称首字母大写的函数。）

或者，考虑到您的评论，也许您想要类似的东西

```
minPositive[lst_List, rl_Rule] := Min[Select[lst/.rl,#>0&]] 
```

你会这样称呼它：

```
minPositive[{a^2, 1-2a, 1},a->2] 
```

**编辑 2**

麻烦，对你来说，用这样的表达

```
(MinPositive[a^2, 1-2a, 1]) /. a-> 0 
```

是 Mathematica 中的正常评估循环会导致在`MinPositive`应用替换规则之前对函数进行评估。`a`那么，当设置为特定值时，Mathematica 如何找出列表中的最小正值？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T15:35:26.980

为了防止在调用函数体之前对参数进行评估，可以通过将函数的属性设置为 HoldAll（阻止评估所有参数）、HoldFirst（阻止仅评估第一个参数）或 HoldRest（阻止评估除了第一个论点）。此外，由于“a”本身不是参数，因此您需要使用 Block 将其与“a”的（潜在）定义隔离开来

所以

```
SetAttributes[minPositive, HoldAll]
minPositive[lst_List] := Block[{a},Min[Select[lst /. a -> 0, # > 0 &]]] 
```

即使您明确地将 a 设置为其他值，例如

```
a=3 
```

比

```
minPositive[{a^2, 1 - 2 a, 100}] 
```

按预期返回 9

高温高压

耶胡达

# jquery - jQuery：表单内按钮的选择器

> ID：16106575
> 
> 赞同：0
> 
> 时间：2013-04-19T14:07:25.620
> 
> 标签：jquery, forms, jquery-selectors, event-handling, submit

我在选择表单中的元素时遇到问题。代码如下所示：

```
 <div id="form"> 
        <form method="post" action="">
            <input id="txt_name" type="text" name="search" value="" />        
        <button type="submit">Search</button>
       </form>
    </div> 
```

我需要处理按钮上的点击/提交事件，使用这样的jquery：

```
<script type="text/javascript">
      $(document).ready(function () {
          $(":submit").click(function () { /*some scripting here*/ 
```

问题是点击事件被完全忽略，但是当我将按钮元素放在表单之外时，它工作得很好。看来我没有正确使用 jquery 选择器之类的。此外，我不能只将按钮放在表单之外，因为 post 方法由服务器端 C# 脚本处理并运行数据库访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:10:03.730

您可以使用“提交”事件 ( [jQuery Submit](http://api.jquery.com/submit/) )。给您的表单一个 ID 并选择表单，或者简单地选择它现在的样子。

```
//added an id of ='form-id' to the form
$('#form-id').submit(function(){

});

//as it is currently
$('#form form').submit(function(){

}); 
```

[JSFiddle](http://jsfiddle.net/a5kuu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:11:01.063

另一种方法是给你`button`一个`id`并说类似的话：

```
$(document).ready(function () {
      $("#idOfSubmitButton").click(function () { /*some scripting here*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:13:08.390

```
$('div#form form').submit(function() { }); 
```

# mysql - MySQL 查询计数两个字段

> ID：16106576
> 
> 赞同：1
> 
> 时间：2013-04-19T14:07:28.953
> 
> 标签：mysql

我有一个包含三列的数据库表（注释）：id、ticket 和 user。

我需要显示每个用户输入了多少注释以及这些注释添加到的唯一票证（按用户分组）。例如，John Doe 将 100 个注释输入到 50 个唯一票证中，而 Jane Doe 将 70 个注释输入到 65 个唯一票证中。我对他们添加到哪些票不感兴趣，只是多少。

这是我到目前为止所拥有的。

```
select count(id) count
from notes
group by user 
```

是否可以在同一查询中获取唯一票的数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:11:12.110

`distinct`在计数内使用：

```
select
  user,
  count(id) note_count,
  count(distinct ticket) ticket_count
from notes
group by user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:11:36.243

您可能是 SQL 新手。查询类似于：

```
select user, count(distinct TicketId) as NumTickets, count(id) as NumNotes
from notes
group by user 
```

您应该在`select`子句中包含用户，这样您就知道这些数字适用于谁。在命名事物时，最好避免保留字如`count`，所以我命名为 on`NumTickets`和 other `NumNotes`。

# javascript - 我可以在 Firefox OS 中的应用程序中获取实时摄像头图像吗？

> ID：16106584
> 
> 赞同：2
> 
> 时间：2013-04-19T14:08:05.620
> 
> 标签：javascript, camera, getusermedia, firefox-os

所以我现在正在研究 Firefox OS。我想尝试的一件事是使用 canvas et.al 操作设备相机的实时提要。

从我在博客文章（比如**[这个](https://hacks.mozilla.org/category/firefox-os/as/complete/)**）和样板应用程序中的代码中可以看到，这总是使用 a 完成的`MozActivity`，这意味着用户正在离开应用程序，拍照并将这张照片传回应用程序，其中我可以对其进行后期处理。

但是对于实时操作，我需要在我的应用程序中安装实时摄像头，就像您`getUserMedia`在访问计算机的网络摄像头时使用的一样。`getUserMedia`Firefox OS 模拟器似乎不支持。

对此或我缺少的某些 API 是否有任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:08:07.297

我会用我从邮件列表中得到的回复来回答这个问题（答案是“还没有”）：

> WebRTC 将（希望）登陆 Firefox OS 1.2（作为参考，最初的发布是在 1.0.1，紧随其后但依赖于运营商的是 1.1）。WebRTC 是许多低级硬件依赖项，因此可能需要更长的时间。
> 
> 您可以关注此元错误及其依赖项： [https ://bugzilla.mozilla.org/show_bug.cgi?id=750011](https://bugzilla.mozilla.org/show_bug.cgi?id=750011)

谢谢你的回答，Mozilla，等不及 1.2 了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T06:45:28.930

请参阅 Firefox OS 的线程[getUserMedia](https://stackoverflow.com/questions/21813121/getusermedia-for-firefox-os)

Firefox OS 1.2 支持用于音频的 WebRTC。但是用于视频的 WebRTC（例如：实时摄像头）刚刚登陆 Firefox OS 1.4，该版本仍处于开发阶段。所以请耐心等待，它将在今年推出。

# wpf - WPF 工具栏按钮似乎没有响应

> ID：16106589
> 
> 赞同：0
> 
> 时间：2013-04-19T14:08:10.900
> 
> 标签：wpf, button, toolbar

我有以下代码：

```
 <ToolBarTray Margin="0,21,0,0" Width="Auto" Height="38" VerticalAlignment="Top">
        <ToolBar Height="38">
            <Button Style="{StaticResource ResourceKey=btnStyle}" Command="Cut" IsEnabled="True">
                <Image Source="images/teren.png" ToolTip="Test" />
            </Button>
        </Toolbar>
    </ToolBarTray> 
```

有问题的样式目前仅更改高度和宽度。每个元素都是相应地绘制的，但是从某种意义上说，按钮似乎没有功能，因为它看起来像一个图像，而不是其他任何东西。工具提示不会显示，它没有悬停动画，也不能真正按下。

我是 WPF 的新手，所以我猜我错过了一些大事。

问题不在图像中。如果我删除那条线，它仍然根本不像一个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:33:16.943

该按钮显示为灰色的原因是因为您已告诉它使用内置的剪切命令。This means that the `Button`will be automatically disabled when there is nothing to cut and enabled when something that can be cut is selected (such as text).

要验证这一点，您可以做两件事；删除 cut 命令并查看该按钮现在已启用：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ToolBarTray Margin="0,21,0,0" Width="Auto" Height="38" VerticalAlignment="Top">
            <ToolBar Height="38">
                <Button  IsEnabled="True">
                    Click
                </Button>
            </ToolBar>
        </ToolBarTray>
    </Grid>
</Window> 
```

或者添加一个富文本框控件，当你选择一些文本时，看看按钮是启用的：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <ToolBarTray Width="Auto" VerticalAlignment="Top">
            <ToolBar Height="38" >
                <Button  IsEnabled="True" Command="Cut">
                    Click
                </Button>
            </ToolBar>
        </ToolBarTray>
        <RichTextBox Grid.Row="1"/>
    </Grid>
</Window> 
```

![在此处输入图像描述](https://i.stack.imgur.com/lPivk.png)

# excel - 如何在 Excel 中将数据添加到自动完成功能或创建不清除撤消/重做的类似 VBA

> ID：16106594
> 
> 赞同：1
> 
> 时间：2013-04-19T14:08:19.243
> 
> 标签：excel, vba

我处理了很多数据输入——其中大部分都重复了为什么自动完成有很大帮助，但是——它有很大的局限性。

我想问一下是否有代码可以将更多数据添加到自动完成中-数据取自表格范围-比如说 Sheets("DATA")range("A1:D100")？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:33:10.167

使用用户表单完成数据输入是最好的。

使用下拉菜单（组合框），您可以用您想要的任何内容填充它们，并且在您键入时，它会自动填充列表中最匹配的任何内容。

然后可以在您的工作表或任何地方输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:19:45.667

您需要数据验证：

1.  开放**数据工具**>**数据验证**
2.  将允许选项更改为**列出**
3.  输入您的数据：
    *   作为带有逗号分隔的列表，例如`Yes,No,Maybe`
    *   或者从excel输入列表/范围，例如`=Data!$A$1:$A$100`
4.  检查单元内下拉选项。

# java - 访问 DefaultScheduleEvent 数据对象

> ID：16106600
> 
> 赞同：0
> 
> 时间：2013-04-19T14:08:35.487
> 
> 标签：java, jsf, jsf-2, primefaces

我的 DefaultScheduleEvent 创建如下：

```
DefaultScheduleEvent newResourceEvent = new DefaultScheduleEvent(reason, dteBeginOrWaitingItem, dteEndOrWaitingItem, orWaitinglist); 
```

`orWaitinglist`是一个对象，它包含值和更多的对象。

现在我如何在我的`JSF`页面中访问这个对象。

Primefaces 演示显示您可以访问事件对象，如下所示。但是我怎样才能将对象的值`orWaitinglist`放在`p:inputText`-field 中。

```
<p:inputText id="title" value="#{scheduleController.event.data}" required="true"/> 
```

DefaultScheduleEvent.java

```
public DefaultScheduleEvent(String title, Date start, Date end, Object data) {
    this.title = title;
    this.startDate = start;
    this.endDate = end;
    this.data = data;
}

public Object getData() {
    return data;
}

public void setData(Object data) {
    this.data = data;
} 
```

调度控制器.java

```
public ScheduleEvent getEvent() {
        return event;
}
public void setEvent(ScheduleEvent event) {
        this.event = event;
} 
```

或Waitinglist.java

```
public OrWaitinglist(BigDecimal WKey, Patients patients, OrBaseLists orBaseListsByWPriority, String WDescription, int WState, Date WDateInserted, Date WDateModified, String WModifiedBy, byte WPlannedType, boolean WCanBeScheduled) {
    this.WKey = WKey;
    this.patients = patients;
    this.orBaseListsByWPriority = orBaseListsByWPriority;
    this.WDescription = WDescription;
    this.WState = WState;
    this.WDateInserted = WDateInserted;
    this.WDateModified = WDateModified;
    this.WModifiedBy = WModifiedBy;
    this.WPlannedType = WPlannedType;
    this.WCanBeScheduled = WCanBeScheduled;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T10:00:16.733

您可以使用标准 JSF 表示法语法访问您的自定义对象。只需确保您的对象具有需要访问的字段的 setter 和 getter。然后您可以传入或创建一个新对象到 DefaultScheduleEvent 并从表示层访问它。

```
DefaultScheduleEvent newResourceEvent = new DefaultScheduleEvent(reason, dteBeginOrWaitingItem, dteEndOrWaitingItem, new OrWaitinglist(); 
```

*使用默认构造函数*

然后 JSF 页面可以使用以下方法访问它：

```
<p:inputText value="#{scheduleController.event.data.WKey}"/> 
```

**注意。按照惯例，您的变量应该以小写字母开头！（*WKey*写成*wKey*更好）**

# javascript - 滚动容器会改变滚动更大的groing容器的速度

> ID：16106603
> 
> 赞同：1
> 
> 时间：2013-04-19T14:08:41.893
> 
> 标签：javascript, jquery, jquery-mobile

可以改进具有大量包含对象的列表的滚动。

```
<ul>
  <li>text1</li>
  <li>text2</li>
  <li>text3</li>
  <li>text4</li>
  <li>...</li>
  .
  .
  .
  <li>text1000</li>
</ul> 
```

每当我滚动容器中超过 90% 的元素时，我都会进行 js 调用，将更多结果加载到我的容器中，并将其余元素添加到 ul.xml 中。

我可以根据结果的数量来修改滚动时的滚动速度吗？

ps 我没有在这种情况下尝试过的任何代码。我不知道该怎么做。这是解决我遇到的问题的最后一次尝试。
ps 2 我想要一个没有任何额外库而不是 jquery 或 jqm 的解决方案。

**编辑：通过*修改滚动速度* ，我的意思是如果有很多对象，则将滚动更改为更快，否则更慢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:10:24.400

您可以使用这种片段：

{使用滚动条更改超时延迟以减少无聊的效果}

[看演示](http://jsfiddle.net/3KSwv/)

```
(function () {
    var $ul = $('ul');
    for (var i = 1; i < 1001; i++)
    $ul.append('<li>test::' + i + '</li>');

    var lastScrollTop = 0,
        st,
        direction;

    function getDirection() {
        st = window.pageYOffset;
        if (st > lastScrollTop) {
            direction = "down";
        } else {
            direction = "up";
        }
        lastScrollTop = st;
        return direction;
    }

    var scrolling = function () {
        var $window = $(this);
        $window.off('scroll');
        var delta = $ul.height() / 10,
            scroll = $window.scrollTop();
        if (getDirection() === "down") $window.scrollTop(delta + scroll);
        else $window.scrollTop(scroll - delta);
        console.log($(window).scrollTop());
        lastScrollTop = this.pageYOffset;
        setTimeout(function () {
            $window.on('scroll', scrolling);
        }, 0);
    };
    $(window).on('scroll', scrolling);
})(); 
```

# java - 用户单击 JTextField 时如何删除文本？

> ID：16106605
> 
> 赞同：1
> 
> 时间：2013-04-19T14:08:51.780
> 
> 标签：java, swing, actionlistener, jtextfield, focuslistener

在我的程序中，用户在 a 中写了一些东西，`JTextField`然后单击“生成”按钮，这会触发中的字符`JTextField`被绘制到 a `JPanel`。

然后，我想`JTextField`在用户再次单击时清除所有文本`JTextField`。我试图通过在 中添加 a`FocusListener`和 an`ActionListener`来实现这一点`JTextField`，但是我的尝试没有奏效。此外，我的实现`FocusListener`给出了`Unreachable Statement`编译器错误。

这可以在Java中做到吗？如果可以，我该怎么做？

下面的代码是我的`ActionListener`实现。

```
dfaText = new JTextField(6);
dfaText.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        generateLabel.setText("NOOOOO!!!");
        dfaText.setText("");

        isDfaDrawn = false;
        canDraw = false;
        repaint();
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:14:20.033

添加鼠标监听器：

```
field.addMouseListener(new MouseAdapter() {
  @Override
  public void mouseClicked(MouseEvent e) {
    field.setText("");
  }
}); 
```

请记住，如果用户合法地点击其他地方并返回该字段，这可能会令人沮丧。您可能希望保持某种状态，例如仅在中间单击按钮时才清除该字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T14:14:27.540

你可以这样做：

```
textField.addMouseListener(new MouseAdapter() {
    @Override
    public void mouseClicked(MouseEvent e) {
        textField.setText("");
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-15T18:55:53.390

只是对他人代码的补充。

```
public void textfieldMouseClicked(java.awt.event.MouseEvent evt) {                                      
    uname_tf.setText(null);
} //This will set the JTextfield blank on mouse click//      

public void textfieldFocusLost(java.awt.event.FocusEvent evt) {                                   
    uname_tf.setText("Username");
} //This will bring back the default text when not in focus// 
```

希望有帮助，加油！！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T14:17:24.143

如果你想要它只需单击它以删除文本，你可以这样做：

```
textField.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                textFieldMousePressed(evt);
            }
        });
 private void textFieldMousePressed(java.awt.event.MouseEvent evt) {
          textField.setText("");
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T14:11:30.677

向您添加 1 行按钮方法，例如：

```
txtfield.clear(); 
```

或将您的 txtfield 设置为空字符串

# php - 将选定的单选按钮与表中的字段进行比较

> ID：16106608
> 
> 赞同：-2
> 
> 时间：2013-04-19T14:09:00.880
> 
> 标签：php, mysql

如何使用存储在数据库字段中的值检查选定的单选按钮值？代码如下：

索引.php：

```
 dfdfdffdfdfdfdf 
```

问题.php

```
$_POST['answer'];
$totalCorrect = 0;

if ($_POST == 'CorrectAnswer') { $totalCorrect++;}

echo "$totalCorrect questions correct"; 
```

我想传递选择的答案以使用数据库检查它以查看它是否与 的值匹配`CorrectAnswer`并相应地编辑分数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:11:56.743

您在访问时错过了访问“答案”索引`$_POST`。利用：

```
if ($_POST['answer'] == 'CorrectAnswer') { $totalCorrect++;} 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:16:18.157

尝试这样的事情：

```
if ($_POST['answer'] == 'CorrectAnswer') { $totalCorrect++;} 
```

注意，您不需要`method`提交按钮上的属性，因为这已经在`<form>`标签中声明了。

# azure - CDN 是否支持视频缓存？

> ID：16106609
> 
> 赞同：0
> 
> 时间：2013-04-19T14:09:02.380
> 
> 标签：azure, azure-cdn

我是新的 Windows Azure，我将所有图像上传到 CDN。

它提供内存缓存，可以将我的应用程序数据存储在内存中，以提高应用程序的响应能力、性能和规模。

而且我还将我的预览视频内容上传到 Azure CDN，但我的应用程序播放器不播放这个视频 url，它喜欢 [http://cdn.mydomain.com/myapp/videos/preview/1460_preview.mp4](http://cdn.mydomain.com/myapp/videos/preview/1460_preview.mp4)

你知道吗？如何通过 Azure CDN 提供此内容。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:22:11.860

Azure CDN 是“拉”模型而非推模型。您不会上传到 CDN，而是上传到 Blob 存储或 /CDN 虚拟目录中的 VM 存储。在初始请求中，CDN 将从源获取文件并填充边缘节点。第二个请求将由 CDN 提供。

CDN 确实支持视频文件和各种流代码。

CDN 概述： [https ://azure.microsoft.com/en-us/documentation/articles/cdn-overview/](https://azure.microsoft.com/en-us/documentation/articles/cdn-overview/)

最佳实践：http: [//blogs.msdn.com/b/windowsazure/archive/2011/03/18/best-practices-for-the-windows-azure-content-delivery-network.aspx](http://blogs.msdn.com/b/windowsazure/archive/2011/03/18/best-practices-for-the-windows-azure-content-delivery-network.aspx)

另一种方法是利用 Azure 媒体服务： http: [//www.windowsazure.com/en-us/develop/Media-Services/how-to-guides/media-services-dotnet/#enable-cdn](http://www.windowsazure.com/en-us/develop/Media-Services/how-to-guides/media-services-dotnet/#enable-cdn)

拍

# java - Facebook 对每个帖子的评论

> ID：16106619
> 
> 赞同：-4
> 
> 时间：2013-04-19T14:09:47.587
> 
> 标签：java, php, android, mysql, sql

当我应用此查询时，它会反复显示每个帖子的评论：

```
"SELECT post.posttext,post.post_id,comment.comt_id 
FROM post FULL JOIN comment ON  post.post_id=comment.post_id 
AND user.user_id=".$userid."" ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:18:20.930

试试这个：

```
SELECT post.posttext, post.post_id, comment.comt_id 
FROM post 
LEFT JOIN comment ON 
    post.post_id=comment.post_id AND user.user_id={$userid}
GROUP BY comment.comment_id ; 
```

# java - Maven：在 Netbeans 中保存 EAR 时部署仅在依赖项目打开时才有效

> ID：16106624
> 
> 赞同：2
> 
> 时间：2013-04-19T14:09:59.087
> 
> 标签：java, maven, netbeans, deployment, glassfish

我的 EAR 项目的保存时部署选项不起作用，我不明白为什么。这是我的结构：

```
myproject-ear, packaging: EAR
--->myproject-core, packaging: JAR (ejbs)
--->myproject-web, packaging: WAR (.xhtml pages, some javascript and CSS) 
```

我正在使用 maven，并且我将战争引用 JAR 作为提供的依赖项。

问题是我有一个 Nexus 存储库来处理我的 JAR 版本控制，我不会在我的 JAR 项目打开的情况下进行开发。但是，如果我关闭我的 JAR 项目然后部署应用程序，那么快速部署只会停止在 glassfish 上工作（它甚至不会在我的 EAR 目标文件夹上生成 gfdeploy，而是将所有文件复制到 glassfish 目录中）。

这是我的（简化的）pom 文件：

父项目：

```
<artifactId>myproject</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>pom</packaging>
<name>myproject</name>

<modules>
    <module>myproject-web</module>
    <module>myproject-ear</module>
</modules> 
```

EAR 项目（使用 maven-ear-plugin）：

```
<parent>
    <artifactId>myproject</artifactId>
    <groupId>mygroupid</groupId>
    <version>1.0-SNAPSHOT</version>
</parent>

<artifactId>myproject-ear</artifactId>
<packaging>ear</packaging>

<name>myproject-ear</name>

<dependencies>
    <dependency>
        <groupId>mygroupid</groupId>
        <artifactId>myproject-core</artifactId>
        <version>1.0-SNAPSHOT</version>
        <type>ejb</type>
    </dependency>
    <dependency>
        <groupId>mygroupid</groupId>
        <artifactId>myproject-web</artifactId>
        <version>1.0-SNAPSHOT</version>
        <type>war</type>
    </dependency>
</dependencies> 
```

WAR 项目（使用 maven-war-plugin）：

```
<parent>
    <artifactId>myproject</artifactId>
    <groupId>mygroupid</groupId>
    <version>1.0-SNAPSHOT</version>
</parent>

<artifactId>myproject-web</artifactId>
<packaging>war</packaging>

<name>myproject-web</name>

<dependencies>
    <dependency>
        <groupId>mygroupid</groupId>
        <artifactId>myproject-core</artifactId>
        <version>1.0-SNAPSHOT</version>
        <type>ejb</type>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T14:31:12.757

这可能是您的 Netbeans 版本的错误。试试 Netbeans 7.3 版，看看它是否在那里工作。我提到的问题说它在 7.1.2 中有效，但我会先尝试 7.3。该问题已在 7.3 中得到解决，并且仅在 7.4/8 开发版本中再次出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T22:34:32.747

您混合了许多不同的魔法（NetBeans、Maven、Nexus 和自动部署），而且它不能完全按照您想要的方式工作也就不足为奇了。目前尚不清楚（从抽象工具开发人员的角度来看）当您尝试在部署中包含正在积极开发的项目的最新版本（即在 Netbeans 中打开的项目）时，正确的做法是什么，但该项目是关闭。回退到 Nexus 存储库中的版本可能不是实现自动部署的 Netbeans 开发人员的想法。

我的建议是创建另一个工作区，在其中不将 JAR 作为项目包括在内，而是严格将其视为 Maven 和 NetBeans 配置中的第三方库。使用此工作区，除非您需要处理 JAR。

或者让 JAR 项目保持打开状态。

# java - 如何打印在不同类中的一个类中定义的字符串？

> ID：16106629
> 
> 赞同：2
> 
> 时间：2013-04-19T14:10:12.993
> 
> 标签：java, string, class

我有两节课。在第一个中，我使用`Scanner`来检索用户名，然后将其存储在一个`String`被调用的`name`. 然后说，我开了一个新班，想把出来的打印出来，怎么办。所以我只是写了这段代码作为一个例子，这样你就可以知道我想问什么。我会发布两个课程。

```
import java.util.Scanner;

public class One {
    public static void main(String[] args) {

        String name;
        String start;
        Scanner input = new Scanner(System.in);

        System.out.println("Hello, what is your name?");
        name = input.nextLine();

        System.out.println("Hello "+name+", welcome! To ocntinue, please hit any key.");
        start = input.nextLine();

        if(start != null){
            Two object = new Two();
        }

    }
} 
```

二等。

```
public class Two {
    public Two() {
        System.out.println("Ok "+One.name+", lets start!");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:14:26.243

所以，你可能会做这样的事情： -

```
class One
{
  private String name = "bob";

  public String getName()
  {
    return name;
  }

  public static void main(String [] args)
  {
    One one = new One();
    Two two = new Two(one);

    // You could also just pass an r-value to Two, as in, Two(new One()) if you
    // never require 'one' again
  }
}

class Two
{
  public Two(One one)
  {
    System.out.println("Ok " + one.getName() + ", lets start!");
  }
} 
```

**到底是怎么回事？**

1.  `main`在入口点方法中创建两个类。
2.  将实例传递`One`给构造函数`Two`
3.  两个然后打电话`getName()`

正如其他人所建议的那样，您可以将字符串作为构造函数传递；或者，如果需要，您可以同时执行这两项操作，因为 Java 支持*重载方法*，请参见

**建议**

查看[http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)以了解覆盖方法，以便您了解如何按值传递字符串和对象引用。您现在正在做的是`one`按值传递对象引用。它可能不需要，或者您可能想使用接口提供限制，请参阅[http://docs.oracle.com/javase/tutorial/java/concepts/interface.html](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:14:59.527

使用构造函数传递值

```
public class Two {

private String value;

public Two(String a){

  this.value=a;

    System.out.println("Ok "+value+", lets start!");

  }

 //getter and setters
} 
```

然后在创建实例时使用该构造函数

```
 Two object = new Two(name); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:15:26.783

要编译您的代码，请将`String name`变量移动到静态字段中：

```
public class One {

    public static String name;

    public static void main(String[] args){
        // Note: The "name" variable is no longer defined here
        String start; // etc
        // rest of code the same
    }
} 
```

我不会告诉你这是很好的代码设计，但它可以满足你的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T14:12:10.057

将您的价值传递给 Two 类`constructor`。

```
if(start != null){
        Two object = new Two(start );
    } 
```

和

```
public Two(String  s){

    System.out.println("Ok "+s+", lets start!");

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T14:24:19.107

你也会这样做

```
public class One {
    private String name;

    public void setName(String name){
      this.name = name;
    }

    public String getName(){
     retrun this.name;
    }

    public static void main(String[] args){

        String name;
        String start;
        Scanner input = new Scanner(System.in);

        System.out.println("Hello, what is your name?");
        name = input.nextLine();

        System.out.println("Hello "+name+", welcome! To ocntinue, please hit any key.");
        start = input.nextLine();

        if(start != null){
            Two two = new Two();
            two.printName(this); 
        }

    }

    class Two{

           public void printName(One one){
            System.out.println("" + one.getName() );
           }

    } 
```

# c++ - 什么是对双精度的小数部分求和并在“溢出”时递增的最有效方法？

> ID：16106636
> 
> 赞同：2
> 
> 时间：2013-04-19T14:10:53.050
> 
> 标签：c++, floating-accuracy

长话短说，我有一段代码，已经有十多年的历史了，我们和外部客户都在使用它。我们有一个“班次”数字，通过它我们可以移动一个班次窗口。它被设计为一个整数，因为，我们要遍历数据中的不同位置，所以没有分数移动的概念。现在，他们希望能够有一个非整数班次号码。不是插值，而是简单地让程序进行整数移位，但是当我们通过那个边界时让它移动一点。

一个例子可能更有意义。假设我们有 10 个班次。位置将如下所示：0、10、20、30、40 等

现在，相反，我们希望能够设置 10.4 的移位。因此，我们希望转换按如下方式工作：**0、10、20、31、41**等

10.5 的移位将改为 0、10、21、31、42 等。

基本上，我们将那个小数位相加，当它越过小数点时，我们只需再移动一位。当然，正如浮点运算经常发生的那样，我们会遇到潜在的准确性问题，但我们也希望保持速度。一种幼稚的方法是在开始时将小数位分开并继续对其求和，检查其值并在达到 1.0 时将其递减。这具有遵循我对操作的看法的优势，但它涉及每次迭代的条件检查，并且通常存在累积错误的可能性。

我还可以看到预先计算我们可以添加多少次小数位，然后我们必须检查它是否超过 1.0（所以如果我们的小数位是 0.5，我们知道我们只需要每隔一次检查一次。或者如果它是 0.3，我们知道我们只需要每四个左右检查一次）。

处理重复求和的常用方法当然是用乘法代替它，但在这里，我们并不关心实际的总和，而是预测我们需要“再移一个”来制作哪些帧事情在最后匹配。

我们的典型任务涉及这个类在相对较小的因素组合上运行，例如以 96.46875 的移位迭代少于 3000 次。但是，不能保证此约束将保持有效，因此我被告知要考虑有人将窗口移动一千万次的可能性，我们仍然想知道移动多远。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:58:37.043

考虑将其设置`shift`为最接近所需值的两倍，并通过以下方式稍微增加（仅一次）：

```
shift = nexttoward(shift, INFINITY); // Ensure shift is above the threshold. 
```

然后，要计算当前位置，请使用：

```
result = floor(step * shift); 
```

当 的乘积`step`与误差`shift`接近 1 时，这可能会产生一个过大的值。（乘法本身也可能存在轻微的舍入误差。）但是，许多步骤都不会发生这种情况，如下所示。

中的错误`shift`最多为 1.5 ULP（从十进制的初始转换为 0.5 ULP，从 1 为 1 `nexttoward`）。如果`shift`小于 1024，则 ULP 小于 2 ^(10–52)。如果`step`最多为 10,000,000，则误差小于 10,000,000 • 1.5 • 2 ^(10–52)，约为 3.41•10 ^(–6)。因此，距离产生错误结果所需的幅度还有很长的路要走。

如果您通过`shift`每次相加而不是通过新的乘法来累积计算结果，则可能会出现额外的错误。这些可能仍然太小而不会导致错误，但应该对其进行评估。

如果您达到上述限制，则有一些方法可以进一步减轻错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:32:54.633

为什么不使用地板功能。没有看到你有什么代码，这里猜测什么会起作用

```
 for (int i=0; i < 3000; i++)
    {
        cout << static_cast<int>(floor(i*shift)) << '\n';
    } 
```

有人可能会反对这种方法的效率，但如果你说的迭代次数少于 3000 次，那就没问题了。

# python - cumsum和除法的熊猫浮点问题

> ID：16106639
> 
> 赞同：0
> 
> 时间：2013-04-19T14:11:01.977
> 
> 标签：python, pandas, floating-point-precision

我已按降序排列总销售额（TOTAL_2012），并试图让组列表拥有大约 25% 的销售额，因此 1 级组的销售额/公司收入最多。

```
sales['PERCENT_2012'] = sales['TOTAL_2012'] / sales['TOTAL_2012'].sum() 
sales['CUM_PERCENT_2012'] = sales['PERCENT_2012'].cumsum() 
```

问题是 CUM_PERCENT_2012 大于 100% 或 1.00，其值为 1.0000004 所以我知道这是一个浮点问题，有没有办法强制精度/舍入到小数点后 2 位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:16:08.050

添加.round（）：

```
sales['PERCENT_2012'] = sales['TOTAL_2012'] / sales['TOTAL_2012'].sum() 
sales['CUM_PERCENT_2012'] = sales['PERCENT_2012'].cumsum().round(2) 
```

这实际上是在将数据添加到列之前对其进行四舍五入。您还可以使用 np.round(df) 来舍入数据，仅用于呈现/可视化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T02:05:36.350

如果您只想明智地显示它，为什么不直接运行

```
pd.set_option('precision',3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:13:32.490

你可以使用`format()`你的结果。

```
>>> "{0:.2f}".format(13.949999999999999)
'13.95' 
```

有关详细信息，请参阅[Python-字符串-格式](http://docs.python.org/2/library/string.html#format-string-syntax)。

# ruby-on-rails - 验证关联的属性

> ID：16106642
> 
> 赞同：0
> 
> 时间：2013-04-19T14:11:08.937
> 
> 标签：ruby-on-rails

```
class Photo < ActiveRecord::Base

  belongs_to :member

  before_validation :able_to_upload

  private

  def able_to_upload
    self.errors[:member] << 'can not upload photo.' if self.member.credits < 50
  end
end 
```

我有一个带有`credits`属性的成员模型。拥有 50 积分或更高积分的会员应该可以上传照片。`credits`会员上传照片时如何验证属性？我想出了这个解决方案，但我想知道是否有更好的方法来做到这一点。在验证回调上添加错误的正确方法是什么？或者我应该创建一个虚拟属性并`credits`使用 proc 进行验证？

编辑：虽然这个解决方案有效，但我创建了一个“收费”模块，用于更通用的解决方案，感觉恰到好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:59:42.020

这是一个很好的解决方案。

由于我没有提醒的原因，您应该使用

```
 def validate
 end 
```

代替`before_validation`

# ruby - Ruby 自定义错误类：消息属性的继承

> ID：16106645
> 
> 赞同：98
> 
> 时间：2013-04-19T14:11:13.710
> 
> 标签：ruby, exception, inheritance, exception-handling, custom-exceptions

我似乎找不到太多关于自定义异常类的信息。

**我所知道的**

您可以声明您的自定义错误类并让它继承自`StandardError`，因此它可以是`rescue`d：

```
class MyCustomError < StandardError
end 
```

这允许您使用以下方法提升它：

```
raise MyCustomError, "A message" 
```

稍后，在救援时收到该消息

```
rescue MyCustomError => e
  puts e.message # => "A message" 
```

**我不知道的**

我想给我的异常一些自定义字段，但我想`message`从父类继承属性。我发现阅读[这个主题](http://www.ruby-forum.com/topic/207448)不是`@message`异常类的实例变量，所以我担心我的继承不起作用。

谁能给我更多的细节？我将如何实现具有`object`属性的自定义错误类？以下是否正确：

```
class MyCustomError < StandardError
  attr_reader :object
  def initialize(message, object)
    super(message)
    @object = object
  end
end 
```

接着：

```
raise MyCustomError.new(anObject), "A message" 
```

要得到：

```
rescue MyCustomError => e
  puts e.message # => "A message"
  puts e.object # => anObject 
```

它会起作用吗，如果起作用，这是正确的做事方式吗？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-04-19T15:31:10.227

`raise`已经设置了消息，因此您不必将其传递给构造函数：

```
class MyCustomError < StandardError
  attr_reader :object

  def initialize(object)
    @object = object
  end
end

begin
  raise MyCustomError.new("an object"), "a message"
rescue MyCustomError => e
  puts e.message # => "a message"
  puts e.object # => "an object"
end 
```

我已替换`rescue Exception`为`rescue MyCustomError`，请参阅[为什么在 Ruby 中 `rescue Exception => e` 是一种不好的风格？](https://stackoverflow.com/questions/10048173/why-is-it-bad-style-to-rescue-exception-e-in-ruby).

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-08-20T10:02:07.700

鉴于`Exception`所有其他错误都继承自 的 ruby​​ 核心文档，其中陈述了关于`#message`

> 返回调用 exception.to_s 的结果。通常这会返回异常的消息或名称。通过提供 to_str 方法，同意在期望字符串的地方使用异常。

*[http://ruby-doc.org/core-1.9.3/Exception.html#method-i-message](http://ruby-doc.org/core-1.9.3/Exception.html#method-i-message)*

我会选择重新定义`to_s`/`to_str`或初始化程序。这是一个示例，我们想以人类可读的方式了解外部服务何时无法执行某项操作。

注意：下面的第二种策略使用 rails 漂亮的字符串方法，例如`demodualize`，这可能有点复杂，因此在异常中可能不明智。如果需要，您还可以向方法签名添加更多参数。

**覆盖#to_s 策略** *而不是#to_str，它的工作方式不同*

```
module ExternalService

  class FailedCRUDError < ::StandardError
    def to_s
      'failed to crud with external service'
    end
  end

  class FailedToCreateError < FailedCRUDError; end
  class FailedToReadError < FailedCRUDError; end
  class FailedToUpdateError < FailedCRUDError; end
  class FailedToDeleteError < FailedCRUDError; end
end 
```

*控制台输出*

```
begin; raise ExternalService::FailedToCreateError; rescue => e; e.message; end
# => "failed to crud with external service"

begin; raise ExternalService::FailedToCreateError, 'custom message'; rescue => e; e.message; end
# => "failed to crud with external service"

begin; raise ExternalService::FailedToCreateError.new('custom message'); rescue => e; e.message; end
# => "failed to crud with external service"

raise ExternalService::FailedToCreateError
# ExternalService::FailedToCreateError: failed to crud with external service 
```

**覆盖 #initialize 策略**

这是最接近我在 rails 中使用的实现的策略。如上所述，它使用`demodualize`、`underscore`和`humanize` `ActiveSupport`方法。但这可以很容易地删除，就像之前的策略一样。

```
module ExternalService
  class FailedCRUDError < ::StandardError
    def initialize(service_model=nil)
      super("#{self.class.name.demodulize.underscore.humanize} using #{service_model.class}")
    end
  end

  class FailedToCreateError < FailedCRUDError; end
  class FailedToReadError < FailedCRUDError; end
  class FailedToUpdateError < FailedCRUDError; end
  class FailedToDeleteError < FailedCRUDError; end
end 
```

*控制台输出*

```
begin; raise ExternalService::FailedToCreateError; rescue => e; e.message; end
# => "Failed to create error using NilClass"

begin; raise ExternalService::FailedToCreateError, Object.new; rescue => e; e.message; end
# => "Failed to create error using Object"

begin; raise ExternalService::FailedToCreateError.new(Object.new); rescue => e; e.message; end
# => "Failed to create error using Object"

raise ExternalService::FailedCRUDError
# ExternalService::FailedCRUDError: Failed crud error using NilClass

raise ExternalService::FailedCRUDError.new(Object.new)
# RuntimeError: ExternalService::FailedCRUDError using Object 
```

**演示工具**

这是一个演示，展示了上述实现的救援和消息传递。引发异常的类是 Cloudinary 的假 API。只需将上述策略之一转储到您的 Rails 控制台中，然后执行此操作。

```
require 'rails' # only needed for second strategy 

module ExternalService
  class FailedCRUDError < ::StandardError
    def initialize(service_model=nil)
      @service_model = service_model
      super("#{self.class.name.demodulize.underscore.humanize} using #{@service_model.class}")
    end
  end

  class FailedToCreateError < FailedCRUDError; end
  class FailedToReadError < FailedCRUDError; end
  class FailedToUpdateError < FailedCRUDError; end
  class FailedToDeleteError < FailedCRUDError; end
end

# Stub service representing 3rd party cloud storage
class Cloudinary

  def initialize(*error_args)
    @error_args = error_args.flatten
  end

  def create_read_update_or_delete
    begin
      try_and_fail
    rescue ExternalService::FailedCRUDError => e
      e.message
    end
  end

  private def try_and_fail
    raise *@error_args
  end
end

errors_map = [
  # Without an arg
  ExternalService::FailedCRUDError,
  ExternalService::FailedToCreateError,
  ExternalService::FailedToReadError,
  ExternalService::FailedToUpdateError,
  ExternalService::FailedToDeleteError,
  # Instantiated without an arg
  ExternalService::FailedCRUDError.new,
  ExternalService::FailedToCreateError.new,
  ExternalService::FailedToReadError.new,
  ExternalService::FailedToUpdateError.new,
  ExternalService::FailedToDeleteError.new,
  # With an arg
  [ExternalService::FailedCRUDError, Object.new],
  [ExternalService::FailedToCreateError, Object.new],
  [ExternalService::FailedToReadError, Object.new],
  [ExternalService::FailedToUpdateError, Object.new],
  [ExternalService::FailedToDeleteError, Object.new],
  # Instantiated with an arg
  ExternalService::FailedCRUDError.new(Object.new),
  ExternalService::FailedToCreateError.new(Object.new),
  ExternalService::FailedToReadError.new(Object.new),
  ExternalService::FailedToUpdateError.new(Object.new),
  ExternalService::FailedToDeleteError.new(Object.new),
].inject({}) do |errors, args|
  begin 
    errors.merge!( args => Cloudinary.new(args).create_read_update_or_delete)
  rescue => e
    binding.pry
  end
end

if defined?(pp) || require('pp')
  pp errors_map
else
  errors_map.each{ |set| puts set.inspect }
end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-19T14:20:04.663

你的想法是对的，但你称呼它的方式是错误的。它应该是

```
raise MyCustomError.new(an_object, "A message") 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-02-09T19:16:57.707

我想做类似的事情。我想将一个对象传递给#new，并根据对传递对象的一些处理来设置消息。以下作品。

```
class FooError < StandardError
  attr_accessor :message # this is critical!
  def initialize(stuff)
    @message = stuff.reverse
  end
end

begin
  raise FooError.new("!dlroW olleH")
rescue FooError => e
  puts e.message #=> Hello World!
end 
```

请注意，如果您不声明`attr_accessor :message`，则它将不起作用。解决 OP 的问题，您还可以将消息作为附加参数传递并存储您喜欢的任何内容。关键部分似乎覆盖了#message。

# css - CSS 菜单 - 在关注子菜单时保持父级悬停

> ID：16106650
> 
> 赞同：4
> 
> 时间：2013-04-19T14:11:27.880
> 
> 标签：css, drop-down-menu

我想在导航二级菜单时保持父级悬停颜色相同。

我查看了其他一些答案，例如[这里](https://stackoverflow.com/questions/2340223/pure-css-drop-down-menu-unable-to-keep-top-li-highlighted-when-hovering-over)和[这里](https://stackoverflow.com/questions/10495819/css-menu-active-link-in-parent-node-changing-color-when-focus-is-on-child-node)，但我无法弄清楚。

这是一个解释我想要完成的视频： http: [//screencast.com/t/Bhfj6mtZkPZp](http://screencast.com/t/Bhfj6mtZkPZp)

这是导航代码：

```
.primary-navigation {
    max-width: 1192px;
    margin: 20px 0px 52px 1px;
}

.primary-navigation ul {
    font-family: 'Josefin Sans', sans-serif;
    font-size: 18px;
    font-size: 1.125rem;
    font-weight: bold;
    margin: 0;
    padding: 0;
    list-style: none;
}

.primary-navigation ul li {
    display: block;
    position: relative;
    float: left;
}

.primary-navigation li ul {
    display: none;
}

.primary-navigation ul li a {
    display: block;
    text-decoration: none;
    color: #fff;
    background: #ec6397;
    padding: 12px 22px 17px 22px;
    white-space: nowrap;
    -moz-transition: all 0.25s ease-in-out;
    -webkit-transition: all 0.25s ease-in-out;
    transition: all 0.25s ease-in-out;
    border-right: 1px solid #f39cbd;
}

.primary-navigation ul li a:hover { 
    background: #f39cbd;
}

.primary-navigation li:hover ul {
    display: block;
    position: absolute;
    border-top: 1px solid #f39cbd;
    border-left: 1px solid #f39cbd;
}

.primary-navigation li:hover li {
    float: none;
    width: 300px;
    z-index: 3;
    border-bottom: 1px solid #f39cbd;
}

.primary-navigation li:hover a {
    background: #ec6397;
}

.primary-navigation li:hover li a:hover {
    background: #f39cbd;
    color: #000;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-19T14:39:03.413

你应该可以改变这个

```
.primary-navigation ul li a:hover { 
    background: #f39cbd;
} 
```

对此

```
.primary-navigation ul li:hover a { 
    background: #f39cbd;
} 
```

这样，当您将鼠标悬停在父 li 上时，主导航项的颜色会发生变化。由于子菜单也应该在这个li里面，所以在子菜单上移动时仍然会触发悬停，因此链接的颜色也应该保持悬停状态。

# image - 如何使内部img的margin-bottom和外部div的margin-bottom崩溃？

> ID：16106656
> 
> 赞同：2
> 
> 时间：2013-04-19T14:11:47.027
> 
> 标签：image, html, margin, collapse, outer-join

我在 div 中有一个 img。img 向右浮动，文本应从左侧和（如果是长文本）从底部围绕它，如下所示：

```
文字文字：IMG
文字文字：IMG
文本文本::::
文本 文本 tex
::::::::::::::

```

冒号应该代表空格（边距）。

如果是长文本，一切正常。但是如果文本太短而不能超过 img 的高度，结果是这样的：

```
文字文字：IMG
文字文字：IMG
         ::::
::::::::::::::

```

但应该是这样的：

```
文字文字：IMG
文字文字：IMG
::::::::::::::

```

那么，如何让内部 img 的 margin-bottom 和外部 div 的 margin-bottom 折叠？

假设由于内外关系或两个边距都是底部边距，边距折叠不起作用？

也许相关：我使用 box-sizing:border-box

谢谢你

代码

HTML：

```
<div>
    <img src="image.png" alt="" />
    Some text
</div> 
```

CSS：

```
div {
    margin-bottom: 10px;
}

div img {
    float:right;
    margin: 0 0 10px 10px;
} 
```

* * *

**编辑**

我的解决方法：

HTML

```
<div>
    <img src="image.png" alt="" />
    <div>
        Some text
    </div>
</div> 
```

CSS

```
div {

}

div img {
    float:right;
    margin: 0 0 10px 10px;
}

div div {
    margin-bottom: 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:48:31.990

问题是 div 元素显示为内联；你需要段落和图像是一个块，所以你应该使用 display:inline-block，像这样：

```
div {
margin-bottom: 10px;
display:inline-block;
}

div img {
    float:right;
    margin: 0 0 10px 10px;
} 
```

你可以在[这里看到结果](http://jsfiddle.net/dHPe6/)

# cairo - 使用 pango 更改字体渲染（非抗锯齿）

> ID：16106659
> 
> 赞同：0
> 
> 时间：2013-04-19T14:11:55.087
> 
> 标签：cairo, antialiasing, pango

如何使用自定义抗锯齿和提示设置使用 pango 渲染字符串？

我试过`PangoCairo.set_antialias(cairo.ANTIALIAS_NONE)`（在pygtk中），但没有效果。我希望能够更改 freetype 的渲染参数，就像我可以通过 fontconfig/ 一样`fonts.conf`，但在运行时。（这是在 Linux 上。）有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:16:11.217

好吧，我不确定您是否理解正确，但我通常在我的 C 代码中使用[cairo_set_antialias ()](http://cairographics.org/manual/cairo-cairo-t.html#cairo-set-antialias)，尽管我不知道 PyGTK 中的等价物。据我了解，您应该更改 Cairos 的渲染设置以更改输出的抗锯齿和提示。至少我是这样做的。

# node.js - 安装 nodejs 包 - madeye - 在 ubuntu 服务器上使用 npm 停止？

> ID：16106666
> 
> 赞同：0
> 
> 时间：2013-04-19T14:12:02.417
> 
> 标签：node.js, ubuntu-10.04

我是 Ubuntu 10.04 LTS Lucid 盒子的用户，而不是管理员。当我尝试使用“>npm install -g madeye”安装节点 js 包时 - 它总是挂在这个语句上：

make: 进入目录`/nethome/robert/nvm/v0.10.4/lib/node_modules/madeye/node_modules/socket.io-client/node_modules/ws/build' CXX(target) Release/obj.target/bufferutil/src/ bufferutil.o SOLINK_MODULE(target) 发布/obj.target/bufferutil.node

我不知道从这里去哪里。我以用户身份使用 NVM 成功安装了节点 v0.10.4，并成功安装了其他软件包 - 即。表达。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:21:59.603

您是否在服务器上安装了构建`make`工具`gcc`？

```
[sudo] apt-get install build-essential 
```

另外你确定你是在 nvm 环境中运行而不是标准的 node.js 吗？看起来您是基于 make 命令输出，但需要检查

# html - 如何得到最后一个孩子

> ID：16106667
> 
> 赞同：1
> 
> 时间：2013-04-19T14:12:03.753
> 
> 标签：html, css, internet-explorer-8, css-selectors

我有 3 个`<a>`标签，我想在 IE8 中找到最后一个孩子。不幸的是 IE8 不支持`:last-child`.

```
#breadcrumbs li:first-child div a {
  background: none !important;
  color: red !important;
} 
```

顶部 css 到达第一个`<a>`，但我需要尝试到达第三个，我尝试使用下面的代码，但它不起作用。

```
#breadcrumbs li:first-child div a + li div a + li div a {
  background: none !important;
  color: red !important;
}

<ul id="breadcrumbs">
   <li><div><a>dfgdfg</a></div></li>
   <li><div><a>fdgdfgdf</a></div></li>
   <li><div><a>fdgdfgfd</a></div></li>
   <li><div><a>dgfdgdfg</a></div></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:15:29.157

我猜，有点，但我建议：

```
#breadcrumbs li + li + li + li div a {
    /* css here */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/V6apA/)。

当然，您可以简单地将类名应用于`li`or`a`元素，然后根据该类名设置元素的样式。如果 JavaScript 可用，那么您当然可以在必要时使用 JavaScript 添加类：

```
var list = document.getElementById('breadcrumbs'),
    aElems = list.getElementsByTagName('a'),
    lastA = aElems[aElems.length - 1];
lastA.className = 'last'; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/V6apA/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:34:19.203

[ie9.js](http://code.google.com/p/ie7-js/)将使 IE8 及以下版本达到最新规范。包括这应该允许使用伪选择器，如`:last-child`

只需将其包含在您的页面上，例如：

```
<!--[if lt IE 9]>
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:27:57.240

这是与 jQuery 结合使用的一个很好的技巧。

```
 /* Load this in your DOM */
   function last_child() {
      if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {
        $('*:last-child').addClass('last-child');
      }
    } 
```

只要穿上你的风格

```
li:last_child, li.last_child {

} 
```

示例：http: [//jsfiddle.net/2dcsH/](http://jsfiddle.net/2dcsH/)

# algorithm - 图中最小团数的算法复杂度

> ID：16106668
> 
> 赞同：0
> 
> 时间：2013-04-19T14:12:07.247
> 
> 标签：algorithm, graph, complexity-theory, time-complexity

我写了一个算法来解决图中的最小集团数。我已经测试了我的回溯算法，但我无法计算最坏情况的时间复杂度，我尝试了很多次。

我知道这个问题是一个 NP 难题，但我认为是否有可能根据代码给出最差的时间复杂度。这段代码最差的时间复杂度是多少？任何想法？你如何形式化递归方程？

我试图编写可理解的代码。如果您有任何问题，请写评论。我会很高兴获得提示、参考和答案。谢谢提醒伙计：）。

**编辑** 正如 MC 评论的那样，我基本上已经尝试解决这个问题[Clique 封面问题](http://en.wikipedia.org/wiki/Clique_cover)

伪代码：

```
function countCliques(graph, vertice, cliques, numberOfClique, minimumSolution)
    for i = 1 .. number of cliques + 1 new loop
        if i > minimumSolution then 
            return;
        end if
        if (fitToClique(cliques(i), vertice, graph) then
            addVerticeToClique(cliques(i), vertice);
            if (vertice == 0) then //last vertice 
                minimumSolution = numberOfClique
                printResult(result);
            else 
                if (i == number of cliques + 1) then // if we are using a new clique the +1 always a new clique
                    countCliques(graph, vertice - 1, cliques, number of cliques + 1, minimum)
                else 
                    countCliques(graph, vertice - 1, cliques, number of cliques, minimum)
                end if
            end if 
            deleteVerticeFromClique(cliques(i), vertice);
        end if
    end loop
end function

bool fitToClique(clique, vertice, graph) 
    for ( i = 1 .. cliqueSize) loop 
        verticeFromClique = clique(i)
        if (not connected(verticeFromClique, vertice)) then 
            return false
        end if
    end loop
    return true
end function 
```

代码

```
int countCliques(int** graph, int currentVertice, int** result, int numberOfSubset, int& minimum) {
// if solution
if (currentVertice == -1) {
    // if a better solution
    if (minimum > numberOfSubset) {
        minimum = numberOfSubset;
        printf("New minimum result:\n");
        print(result, numberOfSubset);
    }
    c++;
} else {
    // if not a solution, try to insert to a clique, if not fit then create a new clique (+1 in the loop)
    for (int i = 0; i < numberOfSubset + 1; i++) {
        if (i > minimum) {
            break;
        }
        //if fit
        if (fitToSubset(result[i], currentVertice, graph)) {
            // insert
            result[i][0]++;
            result[i][result[i][0]] = currentVertice;
            // try to insert the next vertice
            countCliques(graph, currentVertice - 1, result, (i == numberOfSubset) ? (i + 1) : numberOfSubset, minimum);
            // delete vertice from the clique
            result[i][0]--;
        }
    }
}
return c;
}

bool fitToSubset(int *subSet, int currentVertice, int **graph) {
    int subsetLength = subSet[0];
    for (int i = 1; i < subsetLength + 1; i++) {
        if (graph[subSet[i]][currentVertice] != 1) {
            return false;
        }
    }
    return true;

  }

void print(int **result, int n) {
    for (int i = 0; i < n; i++) {
        int m = result[i][0];
        printf("[");
        for (int j = 1; j < m; j++) {
            printf("%d, ",result[i][j] + 1);
        }
        printf("%d]\n", result[i][m] + 1);
    }
}

int** readFile(const char* file, int& v, int& e) {
int from, to;
int **graph;
FILE *graphFile;
fopen_s(&graphFile, file, "r");

fscanf_s(graphFile,"%d %d", &v, &e);

graph = (int**)malloc(v * sizeof(int));

for (int i = 0; i < v; i ++) {
    graph[i] = (int*)calloc(v, sizeof(int));
}

while(fscanf_s(graphFile,"%d %d", &from, &to) == 2) {
    graph[from - 1][to - 1] = 1;
    graph[to - 1][from - 1] = 1;
}
fclose(graphFile);
return graph;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:17:04.403

您的算法的时间复杂度与列出整数的[组合](http://en.wikipedia.org/wiki/Composition_%28number_theory%29#Examples)非常密切，其中有 O(2^N)。

仅凭组合是不够的，因为还有组合方面，尽管也有规则。具体来说，一个团必须包含编号最高的未使用顶点。

一个例子是组合 2-2-1 (N = 5)。第一个 clique 必须包含 4，将未使用的顶点数减少到 4。然后在 4 个元素中的 1 个之间进行选择，未使用的顶点现在是 3。第二个 clique 的 1 个元素是已知的，因此 2 个未使用的顶点。因此，必须在 2 个元素中选择 1 个来决定第二个集团中的最终顶点。这只会为最后一个团留下一个顶点。对于这个组合，有 8 种可能的方法，由 (1*C(4,1)*1*C(2,1)*1) 给出。8种可能的方式如下：

```
(5,4),(3,2),(1)
(5,4),(3,1),(2)
(5,3),(4,2),(1)
(5,3),(4,1),(2)
(5,2),(4,3),(1)
(5,2),(4,1),(3)
(5,1),(4,3),(2)
(5,1),(4,2),(3) 
```

上面的示例显示了最坏情况所需的格式，即组合包含尽可能多的 2。我认为这仍然是 O(N!) 即使它实际上是 (N-1) *(N-3)* (N-5) *...* (1) 或 (N-1) *(N-3)* (N -5）*...*（2）。然而，这是不可能的，因为它需要一个完整的图，它会立即被捕获，并将图限制为一个单一的集团，其中只有一个解决方案。

鉴于组合的变化，可能组合的数量可能是 O(2^N) 上限的一个公平起点。存在 O(3^(N/3)) 个最大团是另一个有用的信息，因为该算法理论上可以找到所有这些团。虽然这还不够好，因为一些最大的集团被多次发现，而另一些则根本没有。

一个更严格的上限是困难的，主要有两个原因。首先，该算法逐渐限制了最大团数，我想您可以将其称为组合的大小，这对每个团花费的计算时间设置了上限。其次，缺失边会导致大量可能的变化被忽略，这几乎可以确保绝大多数 O(N!) 变化被忽略。结合上面的段落，使得设置上限变得困难。如果这还不足以得到答案，您可能希望将问题带到堆栈交换的数学领域，因为更好的答案将需要相当多的数学分析。

# oracle - bat 文件运行 sqlplus 然后根据结果执行命令？

> ID：16106672
> 
> 赞同：1
> 
> 时间：2013-04-19T14:12:12.823
> 
> 标签：oracle, batch-file, sqlplus

我可以让 BAT 文件运行 SQLPlus 命令，然后根据结果执行 CMD 命令，然后再执行另一个 SQLPlus 命令吗？

我认为它看起来像这样

CheckRowCount.SQL 文件

```
SELECT COUNT(*) FROM dmsn.ds3r_1xrtt_voice_trigger 
```

BAT文件：

```
sqlplus %USER%/%PASSWORD%@ORACLE @CheckRowCount.SQL
if ROWCOUNT < 1 goto :EX
c:\Autobatch\Spotfire.Dxp.Automation.ClientJobSender.exe http://SERVER/spotfireautomation/JobExecutor.asmx c:\AutoBatch\backup\Trigger_Test.xml
:EX 
```

但我认为这并不完全正确，ROWCOUNT 似乎不起作用，此外，我将如何在 CMD 之后执行另一个 SQLPlus 命令。

我对 BAT 文件和 SQLPlus 很陌生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:42:37.250

帮自己一个忙，学习 Powershell 或 python。我曾经构建疯狂的批处理文件来自动化流程，它们很痛苦。

Powershell 在构建此类条件脚本方面要好得多，尤其是具有创建和监视子线程的能力。Python 在这方面也很棒。

这些带来的最大优势是您可以访问数据库（以及脚本中的返回结果以处理和响应数据。

缺点（？）是你需要学习其中一种语言，但我个人并不认为这些是缺点，因为它们比批处理文件要好得多。

否则， foxidrive 的答案应该适合你。

* * *

Powershell 示例（有点长，但代码可以重用）：

```
function CreateConnection 
{
    param([string]$databaseHost 
      ,[string]$Port
      ,[string]$SID
      ,[string]$UserID
      ,[string]$Password
     )      
    process
    {   
    $ConnectString = "Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST={0})(PORT={1}))(CONNECT_DATA=(SID={2})));User Id={3};Password={4};"`
    -f $databaseHost,$port,$SID,$UserID,$Password
    write-host $connectString
    sleep 10
    $connection = new-object system.data.oracleclient.oracleconnection( $ConnectString)             
    return $connection
    }
}   

$DBMSHost="somehost.somedomain.com"
$DBMSPort=1521
$SID="somesid"
$UserName="user"
$Password="password"

[System.Reflection.Assembly]::LoadWithPartialName('System.Data.OracleClient') | out-null

try {
        $Connection = CreateConnection $DBMSHost $DBMSPort $SID $UserName $Password
     }
catch
    {
        write-host ("Could not access Oracle database {0}"  -f $_.Exception.ToString())
        exit
        }           

    $Query = "SELECT COUNT(*) as rowcount FROM dmsn.ds3r_1xrtt_voice_trigger"      // Added name to column to make life easier

    $data_set = new-object system.data.dataset
$adapter = new-object system.data.oracleclient.oracledataadapter ($Query, $Connection)
    [void] $adapter.Fill($data_set)
    $table = new-object system.data.datatable
    $table = $data_set.Tables[0]    // We now have the actual resukts data

    foreach ($row in $table)
    {
        if ($row.rowcount <1 )
        {
            $Application = "C:\Autobatch\Spotfire.Dxp.Automation.ClientJobSender.exe"
            $Arguments  = "http://SERVER/spotfireautomation/JobExecutor.asmx c:\AutoBatch\backup\Trigger_Test.xml"
            $CommandLine = "{0} {1}" -f $Application,$Arguments
            invoke-expression $CommandLine
        }   
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:24:40.643

假设 sqlplus 命令返回一个简单的数字，那么这可能有效：

```
@echo off
for /f "delims=" %%a in ('sqlplus %USER%/%PASSWORD%@ORACLE @CheckRowCount.SQL') do set rowcount=%%a
echo.rowcount is set to "%ROWCOUNT%"
if %ROWCOUNT% GTR 0 (
c:\Autobatch\Spotfire.Dxp.Automation.ClientJobSender.exe http://SERVER/spotfireautomation/JobExecutor.asmx c:\AutoBatch\backup\Trigger_Test.xml
)
pause 
```

# html - 使导航栏文本居中

> ID：16106674
> 
> 赞同：-1
> 
> 时间：2013-04-19T14:12:18.137
> 
> 标签：html, css, wordpress, navigation

我如何使文本在我的导航中居中并确保它在所有分辨率下都保持这种状态（1920x1080 它在左边，1420，它居中）

我也意识到很多这些代码是无用的并且不起作用，但在这一点上，我只想在我决定整理它之前修复它。

```
 /* Navigation Menu */
  .main-navigation {
    text-align:center;
        margin-top: 24px;
        margin-top: 1.714285714rem;
        text-align: center;
        margin:0 auto;
        width:958px;
        margin-top: 8px;
      display: inline-block;
    }
    .main-navigation li {
    text-align:center;
        margin-top: 24px;
        margin-top: 1.714285714rem;
        font-size: 16px;
        color:#fff;
        font-size: 0.857142857rem;
        line-height: 1.42857143;
    }
    .main-navigation a {
        color: #fff;
    text-align:center;
    }
    .main-navigation a:hover {
        color: #fff;
        height:37px;

    }
    .main-navigation ul.nav-menu,
    .main-navigation div.nav-menu > ul {
    text-align:center;
        display: none;
    }
    .main-navigation ul.nav-menu.toggled-on,
    .menu-toggle {
    text-align:center;
        display: inline-block;
    }
    .nav-menu {
    margin: 0 auto;
    width: 100%;
    height:05px;
    padding-left:20%;
    left:0px;
    top:20px;
    text-align:center;
    margin-left: 350px;
    position:fixed;
    float:left;
      display: inline-block;
    background:none; 
```

[http://yesyesdev.info/talks](http://yesyesdev.info/talks) DEV 服务器出现问题，但如果您收到错误 500，请刷新几次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T01:05:59.717

是的，你确实有太多无用的代码。删除以下内容：

第 767 行
.main-navigation {
~~display: inline-block;~~
}

第 805 行 .nav-menu {
~~位置：固定；~~
~~向左飘浮;~~
}

# java - 灰熊球衣 - 只有 @Path("/") 有效

> ID：16106676
> 
> 赞同：0
> 
> 时间：2013-04-19T14:12:31.403
> 
> 标签：java, jersey, grizzly

我尝试使用 HTTPS 和基本身份验证在 Grizzly(2.2.21) 服务器上运行 Jersey(1.17) 资源，并让除资源之外的一切正常工作。

```
@Path("/")
public class Helloworld {

    @GET
    public String helloworld2() {
        return "asdf2";
    }

    @Path("helloworld")
    @GET
    public String helloworld() {
        return "asdf";
    }
} 
```

是的，这只是 Helloworld 的例子，它仍然让我感到害怕。我可以访问 localhost:port/ 并且工作正常，但 localhost:port/somethingother 也返回“asdf2”。特别是 localhost:port/helloworld 也返回“asdf2”。

我也试过

```
@Path("/")
public class Helloworld {

   @GET
   @Path("/helloworld")
   public String helloworld() {
      return "asdf";
   }
} 
```

和

```
@Path("/helloworld")
public class Helloworld {

   @GET
   public String helloworld() {
      return "asdf";
   }
} 
```

在这两种情况下，每个请求我都会在 Firebug 中得到 404。

有人有解决方案吗？谢谢

编辑：

要创建服务器等，我使用此示例代码（没有服务器信任库）： [https ://svn.java.net/svn/jersey~svn/trunk/jersey/samples/https-clientserver-grizzly/src/main /java/com/sun/jersey/samples/https_grizzly/](https://svn.java.net/svn/jersey~svn/trunk/jersey/samples/https-clientserver-grizzly/src/main/java/com/sun/jersey/samples/https_grizzly/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T15:25:06.940

添加`registration.addMapping("/*");`到我的初始化代码中有效。

非常感谢阿列克谢

# c++ - GDI中的实时绘图

> ID：16106680
> 
> 赞同：0
> 
> 时间：2013-04-19T14:12:53.733
> 
> 标签：c++, winapi, graphics, bitmap, gdi

我目前正在编写一个 3D 渲染器（为了好玩和研究），所以我需要一种将帧缓冲区绘制到窗口的方法。由于我在 CPU 上进行所有计算，因此绘图需要尽可能快。

我的目标之一是不使用现有的图形库 (OpenGL/DirectX)，因此屏幕上的绘图是纯 Win32。在我的研究中，我发现了几种创建和绘制位图的方法，现在我正在寻找最好的方法。

我当前的实现使用使用创建的位图`CreateDIBSection()`，使用`BitBlt()`.

`CreateDIBSection()`给我一个指向我的位图字节的指针，这样我就可以在不复制的情况下操作它。使用这种方法，我实现了大约 260 FPS 的更新速率（没有完成任何渲染）。这似乎有点慢，所以我正在寻找优化。

我读过一些关于如果您不使用与系统调色板相同的调色板创建位图的内容，则会完成一些缓慢的颜色转换。

如何确保我的 DIB 位图和窗口兼容？

有没有比我目前的实现更快的绘制位图的方法？

我也读过一些关于的东西`DrawDibDraw()`，任何人都可以确认这更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:41:40.680

> 我读过一些关于如果您不使用与系统调色板相同的调色板创建位图的内容，则会完成一些缓慢的颜色转换。

很少有系统不再以调色板模式运行，因此这对您来说似乎不太可能成为问题。

除了调色板之外，如果源位图和目标具有不同的色域，某些 GDI 函数也会导致应用颜色匹配转换。然而，BitBlt 不进行这种类型的颜色匹配，因此您无需为此付出代价。

> 如何确保我的 DIB 位图和窗口兼容？

你没有。您可以使用 DIB（与设备无关的位图）或兼容的（与设备相关的）位图。您的 DIB 位图可能与您设备的当前模式匹配。例如，如果您使用 32 bpp DIB，并且您的显示器处于相同模式，则无需转换。如果您想要一个保证与您的设备处于相同模式的位图，那么您不能使用 DIB 以及它为可预测的像素布局和格式提供的所有良好属性。

> 有没有比我目前的实现更快的绘制位图的方法？

限制很可能是从系统内存获取数据到图形适配器内存。为了解决这个限制，您需要更快的图形总线，或者您需要直接渲染到图形内存中，这意味着您需要在 GPU 而不是 CPU 上进行计算。

如果您以每像素 24 位的速度渲染 1920 x 1080 像素的图像，则帧缓冲区接近 6 MB。这是非常多的数据。如果您每秒执行 260 次，那实际上是非常令人印象深刻的。

> 我还阅读了有关 DrawDibDraw() 的内容，有人可以确认这更快吗？

这是可以想象的，但唯一知道的方法就是测量它。由于图形适配器（以及它们使用的总线）的差异，结果可能因机器而异。

# javascript - 更改 kendo ui 下拉列表的选定值

> ID：16106682
> 
> 赞同：53
> 
> 时间：2013-04-19T14:12:54.967
> 
> 标签：javascript, jquery, asp.net-mvc, kendo-ui, telerik

我认为我有一个[剑道 ui 下拉列表](http://demos.kendoui.com/web/dropdownlist/index.html)：

```
$("#Instrument").kendoDropDownList({
    dataTextField: "symbol",
    dataValueField: "symbol",
    dataSource: data,
    index: 0
}); 
```

如何使用 jQuery 更改它的选定值？我试过：

```
$("#Instrument").val(symbol); 
```

但它没有按预期工作。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-04-19T14:19:50.193

您必须使用 Kendo UI DropDownList`select`方法（[此处](http://docs.kendoui.com/api/web/dropdownlist#methods-select)的文档）。

基本上你应该：

```
// get a reference to the dropdown list
var dropdownlist = $("#Instrument").data("kendoDropDownList"); 
```

如果您知道可以使用的索引：

```
// selects by index
dropdownlist.select(1); 
```

如果没有，请使用：

```
// selects item if its text is equal to "test" using predicate function
dropdownlist.select(function(dataItem) {
    return dataItem.symbol === "test";
}); 
```

JSFiddle 示例[在这里](http://jsfiddle.net/OnaBai/mRmNJ/)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-02-16T16:02:39.323

最简单的方法是：

```
$("#Instrument").data('kendoDropDownList').value("A value"); 
```

这是[JSFiddle 示例](http://jsfiddle.net/gangwu6/vjc39eLL/2/)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-06T04:50:32.500

由于这是与此相关的问题的热门搜索结果之一，我觉得值得一提的是如何使用 Kendo().DropDownListFor() 进行这项工作。

一切都与 OnaBai 的帖子相同，除了您如何根据文本和选择器选择项目。

为此，您需要将 dataItem.symbol 替换为 dataItem.[DataTextFieldName]。无论您用于 .DataTextField() 的模型字段是什么，您都将与之进行比较。

```
@(Html.Kendo().DropDownListFor(model => model.Status.StatusId)
    .Name("Status.StatusId")
    .DataTextField("StatusName")
    .DataValueField("StatusId")
    .BindTo(...)
)

//So that your ViewModel gets bound properly on the post, naming is a bit 
//different and as such you need to replace the periods with underscores
var ddl = $('#Status_StatusId').data('kendoDropDownList');    

ddl.select(function(dataItem) {
    return dataItem.StatusName === "Active";
}); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-05-27T12:26:51.050

似乎有一种更简单的方法，至少在 Kendo UI v2015.2.624 中：

```
$('#myDropDownSelector').data('kendoDropDownList').search('Text value to find'); 
```

如果下拉列表中没有匹配项，Kendo 似乎会将下拉列表设置为未选择的值，这是有道理的。

* * *

我无法得到[@Gang 的](https://stackoverflow.com/a/35437290/1028230)工作答案，但如果你用 交换他`value`，`search`如上所述，我们是黄金。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-03T10:27:49.350

可以按值“本机”选择：

```
dropdownlist.select(1); 
```

# java - 在 Java 中序列化 JSON 子类信息

> ID：16106683
> 
> 赞同：2
> 
> 时间：2013-04-19T14:12:56.830
> 
> 标签：java, json, serialization

我需要一些帮助来解决一个**JSON**序列化问题。

我有一堂这样的课：

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorFormula("type")
@JsonSubTypes({ @JsonSubTypes.Type(value =TextFileCardEntity.class, name = "textCard"),
@JsonSubTypes.Type(value = MultipleChoiceFileCard.class, name = "choiceCard")@JsonSubTypes.Type(value = MultipleChoiceFileCard.class, name = "choiceCard")})
public class FileCardEntity extends ResourceEntity implements Cloneable {
    @NotNull
    @JsonIgnore
    private FileCardType type;
    private Date expirationDate;
        ..... 
```

我还有两个扩展 FileCardEntity 的类：

```
@JsonTypeName(value = "textCard")
public class TextFileCardEntity extends FileCardEntity {
    @Lob
    @Type(type = "org.hibernate.type.TextType")
    private String question;

    @Lob
    @Type(type = "org.hibernate.type.TextType")
    private String answer;
        ....... 
```

和

```
@Entity
@DiscriminatorValue("1")
@JsonTypeName(value = "choiceCard")
public class MultipleChoiceFileCard extends FileCardEntity {
    @Lob
    @Type(type = "org.hibernate.type.TextType")
    private String question;

    @Lob
    @Type(type = "org.hibernate.type.TextType")
    private String crib;
        ...... 
```

我使用下一个代码来反序列化信息：

```
ObjectMapper mapper = new ObjectMapper().setVisibility(JsonMethod.FIELD, Visibility.ANY);
final ObjectWriter typedWriter = mapper.writerWithType(mapper.getTypeFactory().constructCollectionType(List.class, classElement));
System.out.println(typedWriter.writeValueAsString(elements)); 
```

元素在哪里：`List<?> elements`

当我从服务器反序列化有关 TextFileCardEntity 的信息时，我得到：

```
[{"textCard":{"status":"ACTIVE","lastModified":1366293513200,"expirationDate":0..... 
```

那没问题

当我尝试将有关 TextFileCardEntity 的信息序列化到服务器时，代码发送：

```
[{"FileCardEntity":{"status":"ACTIVE","lastModified":1366378327069,"shared":false,"orderID":0........ 
```

那不行，因为我需要反序列化信息中的语法相似 -->`[{"textCard":{"status"....`而不是`[{"FileCardEntity":{"status"....`

我能做些什么？

# asp.net - 我可以在同一个解决方案中拥有多个 ASP.Net 网站吗？

> ID：16106688
> 
> 赞同：4
> 
> 时间：2013-04-19T14:13:08.890
> 
> 标签：asp.net, web-applications

我有一个网站，我似乎一直想每年都添加全新的东西。因此，当我访问 www.MySite.com 时，它基本上只做一件事。因此，当我对技术上完全不同的网站有了新的想法时，我不想想出然后购买新的域名和托管计划。我在托管公司的控制面板中看到我可以有多个“应用程序起点”。我还阅读了一些有关 URL 重写的内容。更不用说，我在研究时发现了虚拟路径的设置（[运行aspnet网站从父目录开始](https://stackoverflow.com/questions/11848940/running-aspnet-web-site-starts-on-parent-directory)）

所以我的愿望可能是在它下面有许多项目（Web 应用程序）的解决方案：

```
MySite
  MySite Folder One
  MySite Folder Two
  MySite Bin
  ...
  NewIdea
    NewIdea Folder One
    NewIdea Folder Two
    NewIdea Bin (I suspect each project would of course have its own Bin folder)
    ...
  Another Idea
    Another Idea Folder One
    Another Idea Folder Two
    Another Idea Bin
    ... 
```

我对用户必须去：

```
www.MySite.com
www.MySite.com/NewIdea
www.MySite.com/AnotherIdea 
```

要访问这些“站点”中的每一个，但从技术上讲，它们中的每一个都是完全独立的，并且可以根据需要进行更改和单独发布。当然，每个人都有自己的 web.config。

这可能吗？我该怎么做？我想我拥有所有的东西，我只是没有做过也没有尝试过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:17:02.067

您没有理由不能在 IIS 中的网站下创建不同的应用程序，然后将不同的 ASP.NET 项目部署到不同的应用程序。您站点下的不同应用程序可以具有不同的应用程序池，因此您具有那种程度的隔离。

默认情况下，您的用户将通过以下方式导航到您的不同应用：

*   我的网站
*   我的网站/应用程序1
*   我的网站/App2

这可能是你想要做的。只需创建应用程序（在 IIS 中右键单击您的站点并选择“添加应用程序...”），然后根据需要进行调整。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-22T16:57:09.690

右键单击解决方案，单击“设置启动项目”，然后单击“启动多个项目”设置。将每个项目的操作更改为是否要启动、从调试开始或不启动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T14:18:23.820

不是我的主题，但我建议这可能对你有帮助？通读它们看起来非常相似，并为您提供了各种选项，您可以通过这些选项了解更多信息。 [多个 asp.net web 应用程序的最佳实践](https://stackoverflow.com/questions/7101601/best-practice-for-multiple-asp-net-web-applications)

# javascript - Javascript 旋钮/滑块控制

> ID：16106693
> 
> 赞同：1
> 
> 时间：2013-04-19T14:13:23.533
> 
> 标签：javascript, slider, jquery-knob

我找到了一个使用旋钮/滑块来控制地图不透明度的地图示例。我想使用相同的旋钮/滑块，但用于不同的东西而不是地图的一部分。我有代码（[http://www.maptiler.org/google-maps-overlay-opacity-control/](http://www.maptiler.org/google-maps-overlay-opacity-control/)）但我不确定我需要提取什么才能简单地保留旋钮并能够使用它显示（例如）1 到 1000 之间的数字的网页。

感谢帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:20:01.200

也许 jQueryUI 的滑块对你有用。您可以在此处查看示例并[在](http://api.jqueryui.com/slider/)[此处](http://jqueryui.com/slider/#default)阅读文档。

# javascript - 通过浏览器脚本中的 URL 打印图像

> ID：16106698
> 
> 赞同：0
> 
> 时间：2013-04-19T14:13:36.877
> 
> 标签：javascript, html, printing, vbscript, web-scripting

我可以在 Windows XP 或 7 上使用任何浏览器。我可以更改任何安全选项来解决我的问题。

我需要从 javascript 或 vbscript 打印远程图像的内容（通过它的 uri）。我安装了一台打印机，我有它的名字。

**这个问题的主要内容**是在没有任何对话确认的情况下打印。我完全理解问题的安全方面，但是，正是因为如此，我可以对浏览器的选项进行任何更改。

我试过这个（在互联网上找到）：

```
// in-browser vbscript
set shell = CreateObject("WScript.shell")
shell.Run ("mspaint /pt ""C:\temp\ticket.png"" ""CUSTOM TG2480-H""") 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:20:19.670

[在这里](https://stackoverflow.com/questions/11175893/html-jquery-print-specific-image-in-page)查看答案 1 。另一个线程的类似问题（html jquery - 在页面中打印特定图像）。

# javascript - 如何在Javascript中生成随机的字母和数字字符串？

> ID：16106701
> 
> 赞同：4
> 
> 时间：2013-04-19T14:13:45.427
> 
> 标签：javascript, string, random

我一直在使用这段代码：

```
function stringGen()
{
    var text = " ";

    var charset = "abcdefghijklmnopqrstuvwxyz0123456789";

    for( var i=0; i < len; i++ )
        text += charset.charAt(Math.floor(Math.random() * charset.length));

    return text;
} 
```

但到目前为止，它还没有起作用，就像根本一样。我究竟做错了什么？

提前谢谢你的帮助

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-19T14:16:15.800

你错过了参数`len`。

```
function stringGen(len) {
  var text = "";

  var charset = "abcdefghijklmnopqrstuvwxyz0123456789";

  for (var i = 0; i < len; i++)
    text += charset.charAt(Math.floor(Math.random() * charset.length));

  return text;
}

console.log(stringGen(3));
```

这会给你类似“a1z”的东西。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-21T12:21:54.307

一个漂亮的单线将是：

```
Math.random().toString(36).substr(2, length) 
```

或者，如果您需要一个长度超过 10/11 个字符的 str：

```
function generateRandAlphaNumStr(len) {
  var rdmString = "";
  for( ; rdmString.length < len; rdmString  += Math.random().toString(36).substr(2));
  return  rdmString.substr(0, len);

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T14:22:52.250

作为替代方案：

```
var len = 20,
    str = '';

while( len-- ) {
    str += String.fromCharCode( 48 + ~~(Math.random() * 42) );
}

console.log( str ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T14:17:18.367

您的 len 变量未定义。要么将其作为参数传递，要么将其设置为某个值。

```
function stringGen(len)
{
    var text = " ";

    var charset = "abcdefghijklmnopqrstuvwxyz0123456789";

    for( var i=0; i < len; i++ )
        text += charset.charAt(Math.floor(Math.random() * charset.length));

    return text;
}
alert(stringGen(5)); 
```

[http://jsfiddle.net/rg7Z3/](http://jsfiddle.net/rg7Z3/)

# c++ - 质量与连接到两个质量的线之间的碰撞

> ID：16106702
> 
> 赞同：2
> 
> 时间：2013-04-19T14:13:47.880
> 
> 标签：c++, collision-detection, collision, game-physics

我目前正在制作一个小型 c++ 模拟程序，由于我对物理学非常陌生，我正在努力解决看似简单的 2D 碰撞处理问题。我花了很多时间思考它并查看教程，但我真的不明白。这是我的问题：

一个点 (P) 正在碰撞一条连接到其他两个点 (A 和 B) 的（失重）线。

`P`,`A`并且`B`每个在碰撞时都有一个特定的`velocity`( `Vp`, `Va`, `Vb`) 并且它们有自己的`weight`( `Wp`, `Wa`, `Wb`)。

我知道碰撞 (C) 的确切坐标，我只想知道如何修改这 3 个点中的每一个的速度。目前，我尝试将撞击点视为一个球（我计算它的速度，`Vc=Va*(1-||AC||/||AB||)+ Vb*(||AC||/||AB||)`但我不确定这是否是一种正确的方法，然后我一直在计算它的质量）。

任何帮助、提示或资源将不胜感激。这是我为解释问题而制作的小图。

![这是我为解释问题而制作的小图。](https://i.stack.imgur.com/m2vEP.png)

# javascript - 使用 Rgraph 从组到堆叠图，y 轴不会改变

> ID：16106713
> 
> 赞同：0
> 
> 时间：2013-04-19T14:14:31.027
> 
> 标签：javascript, html, charts, bar-chart, rgraph

我一直在环顾四周，找不到答案，我认为这不是一个困难的解决方案，但我不知道该怎么做。

我用 RGraph 绘制了一个分组条形图。这是通过以下代码完成的：

```
 var tooltip = createToolTip();
  bar4 = new RGraph.Bar('graph_tab1', objectSoap1.getValue());
  bar4.Set('chart.colors', ['Gradient(#c01:red)', 'Gradient(#05D:blue)', 'Gradient(#0f0:green)', 'Gradient(#f0f:pink)']); 
  bar4.Set('chart.labels', objectSoap1.getLabel());
  bar4.Set('chart.numyticks', 8);
  bar4.Set('chart.ylabels.count', 6);
  bar4.Set('chart.variant', '2d');
  bar4.Set('chart.strokestyle', 'rgba(0,0,0,0)');
  bar4.Set('chart.hmargin.grouped', 0);
  bar4.Set('chart.background.grid.autofit.numhlines', 6);
  RGraph.Effects.Bar.Grow(bar4); 
```

现在，如果我按下一个按钮，它必须从分组变为堆叠。我使用以下代码执行此操作：

```
 bar4.Set('chart.grouping', 'stacked')
  RGraph.Effects.Bar.Grow(bar4); 
```

它绘制了一个堆叠图..但问题是y轴没有改变。

例如，如果我有一个分组条形图，其值为 5、10 和 15。最大 y 值将为 15。但如果我堆叠这些值，则值为 30，并且使用这段代码的条形图会增长到很远，因为它的值会变为 30，而 y 轴只会变为 15。

我希望我的意思很清楚，有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T12:14:59.090

这里有一个从分组切换到堆叠的示例：

[http://dev.rgraph.net/fiddle/view/cfa8b72f8a9988527269abdfc7d34384](http://dev.rgraph.net/fiddle/view/cfa8b72f8a9988527269abdfc7d34384)

# meteor - 流星中如何统一账号登录？

> ID：16106715
> 
> 赞同：1
> 
> 时间：2013-04-19T14:14:38.717
> 
> 标签：meteor

使用帐户包，即-accounts-ui、accounts-password、accounts-facebook，是否可以强制单个用户登录。

含义：如果用户使用accounts-password 创建一个登录名，然后使用account-facebook 创建另一个登录名，是否可以将这两个帐户合并为一个？

我试图将 MongoDB 中的 server.js 中的 account-password 的 user.services.facebook 对象设置为 account-facebook 用户的值......但它似乎没有坚持。

我正在做这样的事情来尝试统一帐户：

```
unifyFBAccount: function(options){
  var user = Meteor.users.findOne(this.userId);
  if(user.services.facebook == null){
    Meteor.users.update(
      {_id: this.userId},
      {$set: {'services.facebook': options.facebook}});
  }
} 
```

options 参数是 user.services 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-18T00:53:03.030

[`splendido:accounts-meld`](https://atmospherejs.com/splendido/accounts-meld)应该做的伎俩。

# android - 暂停媒体播放器安卓

> ID：16106719
> 
> 赞同：1
> 
> 时间：2013-04-19T14:14:48.703
> 
> 标签：android, android-mediaplayer

所以我有媒体播放器，它可以播放手机中的音频文件。要播放它们，我将此代码用于播放按钮

```
 try {
         if (mp2.isPlaying()) {
             mp2.reset();
      }
         mp2.setDataSource(s1); //using path here
         mp2.prepare();
         mp2.start();
         mp2.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

            public void onCompletion(MediaPlayer mp) {
                    // TODO Auto-generated method 
                    mp.reset();
                }
            });
     } catch (Exception e) {

     } 
```

我想暂停这首歌并继续使用相同的代码播放它，我试过`mp2.pause();` 但如果我点击播放按钮什么都不会发生。我不想删除`if (mp2.isPlaying()) { mp2.reset(); }`

# outlook - 在 Outlook 加载项中集成 Windows-API-Code-Pack - 清单无法选择

> ID：16106720
> 
> 赞同：1
> 
> 时间：2013-04-19T14:14:54.090
> 
> 标签：outlook, manifest, office-addins, windows-api-code-pack, taskdialog

我需要使用我的 Outlook 加载项中`TaskDialog`提供的`Windows API Code Pack`。我收到了这个错误：

```
TaskDialog feature needs to load version 6 of comctl32.dll
but a different version is current loaded in memory. 
```

我按照[MSDN](http://archive.msdn.microsoft.com/WindowsAPICodePack/Thread/View.aspx?ThreadId=3063)中提供的步骤进行操作。我添加了一个资源文件并插入了提供的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<asmv1:assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1" xmlns:asmv1="urn:schemas-microsoft-com:asm.v1" xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <assemblyIdentity version="1.0.0.0" name="MyAssemblyName.vsto"/>

    <!--Enable themes for Windows common controls and dialogs (Windows XP and later)-->
    <dependency>
        <dependentAssembly>
            <assemblyIdentity type="win32" name="Microsoft.Windows.Common-Controls" version="6.0.0.0" processorArchitecture="*" publicKeyToken="6595b64144ccf1df" language="*" />
        </dependentAssembly>
    </dependency>
</asmv1:assembly> 
```

我知道我必须在项目属性中选择清单文件，但遗憾的是，选择清单的控件被禁用：

![项目属性](https://i.stack.imgur.com/Ych7b.png)

我需要一个解决方案，所以我可以使用`TaskDialog`.

# python - Django在一个日期范围内平均

> ID：16106721
> 
> 赞同：4
> 
> 时间：2013-04-19T14:14:54.543
> 
> 标签：python, mysql, django

我在 Django 中构建了一个简单的正常运行时间监控应用程序，它检查站点是否没有响应 ping 请求。它在“dt”列中存储 ping 时的时间戳，在“ms”列中存储毫秒响应时间。该站点每分钟被 ping 一次，并且一个条目被放入数据库中。

Django 模型如下所示：

```
class Uptime (models.Model):
    user = models.ForeignKey(User)
    dt = models.DateTimeField()
    ms = models.IntegerField() 
```

我想一次从 dt 列中抓取一天，然后取当天的 ms 响应时间的平均值。即使每天有 1440 个条目，我也想抓住这一天（例如 2013 年 4 月 19 日）并获得平均毫秒响应时间。我在下面使用的代码无疑是错误的，但我觉得我在正确的轨道上。我怎样才能让它工作？

```
 output_date = Uptime.objects.filter(user = request.user).values_list('dt', flat = True).filter(dt__range=(startTime, endTime)).order_by('dt').extra(select={'day': 'extract( day from dt )'}).values('day')
       output_ms = Uptime.objects.filter(user = request.user).filter(dt__range=(startTime, endTime)).extra(select={'day': 'date( dt )'}).values('day').aggregate(Avg('ms')) 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:05:18.457

您需要注释才能进行分组。Django 在 orm 中没有任何用于仅提取日期的内容，因此您需要在查询中添加一个“额外”参数，指定仅使用日期。然后，您只选择这些值并进行注释。

尝试以下操作：

```
Uptime.objects.filter(user=request.user).extra({'_date': 'Date(dt)'}).values('_date').annotate(avgMs=Avg('ms')) 
```

这应该为您提供如下列表：

```
[{'_date': datetime.date(2012, 7, 5), 'avgMs': 300},{'_date': datetime.date(2012, 7, 6), 'avgMs': 350}] 
```

# string - Go：理解字符串

> ID：16106748
> 
> 赞同：2
> 
> 时间：2013-04-19T14:15:42.673
> 
> 标签：string, go

今天早上当下面的代码工作时，我有点困惑。

```
// s points to an empty string in memory
s := new(string)

// assign 1000 byte string to that address
b := make([]byte, 0, 1000)
for i := 0; i < 1000; i++ {
    if i%100 == 0 {
        b = append(b, '\n')
    } else {
        b = append(b, 'x')
    }
}
*s = string(b)

// how is there room for it there?
print(*s) 
```

[http://play.golang.org/p/dAvKLChapd](http://play.golang.org/p/dAvKLChapd)

我觉得我在这里遗漏了一些明显的东西。一些见解将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T14:23:56.313

我希望我明白这个问题...

string 类型的实体由运行时结构实现，大致

```
type rt_string struct {
        ptr *byte // first byte of the string
        len int   // number of bytes in the string
} 
```

线

```
*s = string(b) 
```

在 *s 处设置一个新值（rt_string 类型）。它的大小是不变的，所以它有“空间”。

rsc 的[论文](http://research.swtch.com/godata)中的更多细节。

# ios - 如何将objective-c函数作为回调传递给C函数？

> ID：16106751
> 
> 赞同：3
> 
> 时间：2013-04-19T14:15:56.310
> 
> 标签：ios, objective-c, c, macos, cocoa

我想从objective-c调用ac函数并将objective-c函数作为回调传递

问题是这个函数有一个回调作为参数，所以我必须将objective-c函数作为回调传递给c函数

这是c函数的标题

```
 struct mg_context *mg_start(const struct mg_callbacks *callbacks,
                        void *user_data,
                        const char **configuration_options); 
```

这是我尝试称呼它的地方

```
- (void)serverstarted
{
    NSLog(@"server started");
}

- (IBAction)startserver:(id)sender {
   NSLog(@"server should start");
   const char *options[] =
   {
       "document_root", "www",
       "listening_ports", "8080",
        NULL
   };
   mg_start(serverstarted(), NULL, options);
  } 
```

我已经尝试了几种方法来做到这一点，并在网上搜索只是得到一个线索如何做到这一点，但没有运气

这是我在代码中包含的库

[https://github.com/valenok/mongoose](https://github.com/valenok/mongoose)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:27:06.877

您的主要问题是 的第一个参数`mg_start()`，在声明中描述为`const struct mg_callbacks *callbacks`。您正在尝试将指针传递给函数。（实际上，您正试图将调用结果传递给该函数，这离标记更远。）这不是它所说的：它说的是一个指向*结构*（特别是`mg_callbacks`结构）的指针。

[https://github.com/valenok/mongoose/blob/master/examples/hello.c](https://github.com/valenok/mongoose/blob/master/examples/hello.c)上的示例代码向您展示了如何配置此结构。您必须创建结构并将指向回调函数的指针放入其中。然后传递该结构的地址。

您的代码的其他问题：您的回调函数本身都是错误的：

```
- (void)serverstarted
{
    NSLog(@"server started");
} 
```

这里需要的是一个像这样声明的 C 函数：`int begin_request_handler(struct mg_connection *conn)`，也就是说，它需要一个指向`mg_connection`结构的指针作为参数。您`serverstarted`不仅不采用该参数，甚至不是 C 函数！这是一种 Objective-C 方法，一种完全不同的动物。您在标题和问题中使用术语“Objective-C 函数”具有误导性；C 有函数，Objective-C 有方法。您将在此处编写的代码中不会使用任何 Objective-C。

我建议你在这里做的是一开始就*盲目*`hello.c`地复制这个例子。然后慢慢地、一点点地修改事物的内容/名称，使其演变成你自己的代码。当然，学习 C 语言也会有所帮助，但您可能只需仔细复制即可。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T17:23:07.280

正如 matt 已经说过的，您不能将 Objective-C 方法作为回调传递给需要 C 函数的地方。Objective-C 方法是特殊函数，特别是接收者（“self”）作为第一个参数隐式传递给函数。

因此，要将 Objective-C 方法用作请求处理程序，您需要一个（中间）C 函数作为处理程序，并且您必须`self`使用参数传递给该函数`user_data`。然后 C 函数可以调用 Objective-C 方法：

```
// This is the Objective-C request handler method:
- (int)beginRequest:(struct mg_connection *)conn
{
    // Your request handler ...
    return 1;
}

// This is the intermediate C function:
static int begin_request_handler(struct mg_connection *conn) {
    const struct mg_request_info *request_info = mg_get_request_info(conn);
    // Cast the "user_data" back to an instance pointer of your class:
    YourClass *mySelf = (__bridge YourClass *)request_info->user_data;
    // Call instance method:
    return [mySelf beginRequest:conn];
}

- (IBAction)startserver:(id)sender
{
    struct mg_callbacks callbacks;
    memset(&callbacks, 0, sizeof(callbacks));
    callbacks.begin_request = begin_request_handler;
    const char *options[] =
    {
        "document_root", "www",
        "listening_ports", "8080",
        NULL
    };
    // Pass "self" as "user_data" argument:
    mg_start(&callbacks, (__bridge void *)self, options);
} 
```

*评论：*

*   如果您不使用 ARC（自动引用计数），那么您可以省略`(__bridge ...)` 强制转换。
*   您必须确保在服务器运行时不会释放您的类的实例（“self”）。否则在`YourClass *mySelf` 调用请求处理程序时将是无效的。*

# sql - 在Oracle中选择一个类型的所有索引

> ID：16106754
> 
> 赞同：4
> 
> 时间：2013-04-19T14:16:08.207
> 
> 标签：sql, oracle, indexing, oracle10g

如何在 Oracle 10g 中选择特定类型的所有索引，例如我想要`bitmap`声明的所有索引。

我想查询会是这样的：

```
select * from system_indexes where type = 'bitmap' 
```

但这绝对是不正确的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-19T14:22:38.900

```
SELECT *
  FROM dba_indexes
 WHERE index_type IN ('BITMAP', 'FUNCTION-BASED BITMAP' ) 
```

可能是您要查找的内容（尽管您可能只需要 where 的索引`index_type = 'BITMAP'`。如果您只关心您有权`SELECT`访问的表上的索引，则可以查询`all_indexes`而不是`dba_indexes`。如果您只关心当前架构中的索引, 你可以查询`user_indexes`而不是`dba_indexes`.

# c# - 声明一个变量（作为新的）然后初始化它和直接初始化它有什么区别？

> ID：16106757
> 
> 赞同：6
> 
> 时间：2013-04-19T14:16:11.453
> 
> 标签：c#, asp.net, .net

我见过人们使用几种不同的方式来初始化数组：

```
string[] Meal = new string[]{"Roast beef", "Salami", "Turkey", "Ham", "Pastrami"}; 
```

或者另一种方式，也称为初始化是：

```
string[] Meats = {"Roast beef", "Salami", "Turkey", "Ham", "Pastrami" }; 
```

最好的方法是什么，两种方法之间的主要区别是什么（包括内存分配）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-19T14:18:19.597

两种情况没有区别。编译器生成相同的字节码（`newarr`OpCode）：

```
public static void Main()
{
   string[] Meal = new string[] { "Roast beef", "Salami", "Turkey", "Ham", "Pastrami"};
   string[] Meats = { "Roast beef", "Salami", "Turkey", "Ham", "Pastrami" };
} 
```

MSIL：

```
.entrypoint
  // Code size       100 (0x64)
  .maxstack  3
  .locals init ([0] string[] Meal,
           [1] string[] Meats,
           [2] string[] CS$0$0000)
  IL_0000:  nop
  IL_0001:  ldc.i4.5
  IL_0002:  newarr     [mscorlib]System.String
  IL_0007:  stloc.2
  IL_0008:  ldloc.2
  IL_0009:  ldc.i4.0
  IL_000a:  ldstr      "Roast beef"
  IL_000f:  stelem.ref
  IL_0010:  ldloc.2
  IL_0011:  ldc.i4.1
  IL_0012:  ldstr      "Salami"
  IL_0017:  stelem.ref
  IL_0018:  ldloc.2
  IL_0019:  ldc.i4.2
  IL_001a:  ldstr      "Turkey"
  IL_001f:  stelem.ref
  IL_0020:  ldloc.2
  IL_0021:  ldc.i4.3
  IL_0022:  ldstr      "Ham"
  IL_0027:  stelem.ref
  IL_0028:  ldloc.2
  IL_0029:  ldc.i4.4
  IL_002a:  ldstr      "Pastrami"
  IL_002f:  stelem.ref
  IL_0030:  ldloc.2
  IL_0031:  stloc.0
  IL_0032:  ldc.i4.5
  IL_0033:  newarr     [mscorlib]System.String
  IL_0038:  stloc.2
  IL_0039:  ldloc.2
  IL_003a:  ldc.i4.0
  IL_003b:  ldstr      "Roast beef"
  IL_0040:  stelem.ref
  IL_0041:  ldloc.2
  IL_0042:  ldc.i4.1
  IL_0043:  ldstr      "Salami"
  IL_0048:  stelem.ref
  IL_0049:  ldloc.2
  IL_004a:  ldc.i4.2
  IL_004b:  ldstr      "Turkey"
  IL_0050:  stelem.ref
  IL_0051:  ldloc.2
  IL_0052:  ldc.i4.3
  IL_0053:  ldstr      "Ham"
  IL_0058:  stelem.ref
  IL_0059:  ldloc.2
  IL_005a:  ldc.i4.4
  IL_005b:  ldstr      "Pastrami"
  IL_0060:  stelem.ref
  IL_0061:  ldloc.2
  IL_0062:  stloc.1
  IL_0063:  ret 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T14:18:43.957

两者是相同的，并且会产生相同的 IL 代码。第二个只是第一个的语法糖。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T14:19:14.647

这两种方式在编译后的代码中是等价的，选择你认为最清晰或者最容易阅读的方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T14:21:56.427

请参阅[Eric Lippert 对类似问题的回答](https://stackoverflow.com/a/5678393/1438242)。在这个特定场景中，它们都产生相同的编译代码和相同的结果。两种语法之间的唯一区别是**第二种语法只能用于变量声明**，这意味着您不能使用它来更改现有变量的值。例如：

```
// Compiles fine
string[] Meats = {"Roast beef", "Salami", "Turkey", "Ham", "Pastrami" };

// Causes compilation error
Meats = {"Roast beef", "Salami", "Turkey", "Ham", "Pastrami" };

// Also causes compilation error
string[] Meats2;
Meats2 = {"Roast beef", "Salami", "Turkey", "Ham", "Pastrami" }; 
```

就个人而言，如果您明确声明变量的类型，我建议使用第二种语法声明变量，如下所示：

```
string[] Meats = {"Roast beef", "Salami", "Turkey", "Ham", "Pastrami" }; 
```

如果您倾向于使用`var`关键字，我会推荐第一种语法，因为它更清楚您期望结果是什么类型（可读性）并强制编译器也为您检查，如下所示：

```
var Meats = new string[]{"Roast beef", "Salami", "Turkey", "Ham", "Pastrami" }; 
```

一般来说，最好选择一种风格并保持一致。

# java - 从链表中删除特定元素时遇到问题

> ID：16106761
> 
> 赞同：0
> 
> 时间：2013-04-19T14:16:16.970
> 
> 标签：java, linked-list

我被分配了一个任务，以创建一个用 Java 编写的基于寄存器的小程序，以链表的形式。我首先创建了一个学生类，然后为该类创建了一个测试器文件。之后，在注册表文件中，我列出了我的方法和构造函数，并且正在编写一个测试器文件来测试我的所有方法。

但是，当我尝试从我的链表中删除特定元素时遇到问题，我希望能够删除一个学生，通过他们各自的学生 ID 引用他们，但我不确定如何执行此操作。

在尝试解决问题时，我遇到了该`removeFirstOccurrence(Object o)`方法。这是正确的使用方法吗？

任何帮助将非常感激。

学生档案代码：

```
public class Student {

private String foreName;
private String surName;
private int studentID;

//declaring the variables needed for my student

public Student (String foreName, String surName, int studentID)
{
    this.foreName = foreName;
    this.surName = surName;
    this.studentID = studentID;
}
//constructor to set out what a student needs

public String getForeName() {
    return foreName;
}

public String getSurName() {
    return surName;
}

public int getStudentID() {
    return studentID;
}

public void setForeName(String foreName) {
    this.foreName = foreName;
}

public void setSurName(String surName) {
    this.surName = surName;
}

public void setStudentID(int studentID) {
    this.studentID = studentID;
}

// getters and setters for my variables

public String toString ()
{

    return getClass().getName() + "foreName = " + foreName + "surName = " + surName + "studentID = " + studentID;
}
//my toString method

} 
```

注册表文件代码：

```
import java.util.*;
public class Registry {

LinkedList<String> studentList
        = new LinkedList<String>();
//setting my type parameter

public Registry() {}
//empty constructor to hold arguements

public void addStudent(String aStudent)
{
    this.studentList.addLast(aStudent);
}

public void deleteStudent(int studentID) 
{
    //????         
}

@Override public String toString()
{
  return "Registry";
}

public String format()
{
} 
```

注册表测试器文件代码：

```
import java.util.*;

public class RegistryTester {
public static void main (String[] args)
{
    LinkedList<String> studentList
            = new LinkedList<String>();

    System.out.println("Test 1");
    System.out.println("Methods tested: addStudent, constructor");
    System.out.println("********************");

    studentList.add("Joe Perkins 123");        
    studentList.addLast("Shilpa Gupta 1234");
    studentList.addLast("Seany Ray 12345");
    // adding 3 students to my list

    System.out.println(studentList);

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:28:07.517

1.  定义`List`为`List`_`Student`

    ```
    LinkedList<Student> studentList = new LinkedList<Student>(); 
    ```

2.  覆盖类中的`hashCode()`and`equals()`方法`Student`。

    ```
    public boolean equals(Object obj) {
       if (obj instanceof Student) {
         return studentID == ((Student)obj).getStudentID();
       }
      return false;
    }

    public int hashCode() {
       return studentID;
    } 
    ```

3.  定义方法：

    ```
    public void addStudent(Student aStudent)
    {
         this.studentList.addLast(aStudent);
    }

    public void deleteStudent(Student astudent) 
    {
        this.studentList.remove(aStudent)       
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:28:32.597

首先你应该让你的`LinkedList` for 类型`Student`：

```
LinkedList<Student> 
```

然后要删除学生，您可以：

*   遍历列表，找出具有相同 id 的学生对象，将其删除

*   覆盖类`equals() and hashcode()`中的方法`Student`，然后

    ```
    public void deleteStudent(int studentID) 
    {
        //getStudent object (stu) By the given ID
        studentList.remove(stu);
    } 
    ```

*   使用`Map`, (`HashMap`或`LinkedHashMap`) 代替`LinkedList`, key 是 studentId, value 是 studentObject。这将使添加/删除更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:28:26.580

如果您有一个`Collection`（在您的情况下为 a `LinkedList`）`Student`并调用`remove(studentToRemove)`它，Java 将`studentToRemove`使用其`equals()`方法将每个对象与它进行比较。

在您的情况下，您还没有编写`equals()`方法，因此使用了 for `Object`。如果确实一个学生由其唯一标识`studentId`（即，`Student`具有相同的两个实例`studentId`始终是同一个学生），则应覆盖`equals()`方法并使用该字段检查是否相等。

阅读[equals()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)和[hashCode()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)。

另一种选择是迭代列表直到找到匹配项，然后从列表中删除学生。

# php - 简单的 jquery ajax php 请求

> ID：16106762
> 
> 赞同：0
> 
> 时间：2013-04-19T14:16:17.717
> 
> 标签：php, jquery, ajax, call

我正在对一个 php 文件进行基本的 jquery ajax 调用，但似乎无法弄清楚它为什么不起作用。任何帮助表示赞赏。Fiebug 似乎没有显示任何 ajax 或 XHR 操作正在进行。我不想刷新页面而只执行 ajax 调用。谢谢。

JS

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"</script>
<script>
function getData(url_param){
    $.ajax({
        type: 'get',
        url: 'data.php',
        data: {url_param:url_param},      
        success: function(data) {
            $('#data').html(data);        
        }
    });
};

$('#clickMe').click(function(e){
    e.preventDefault();
    getData(2);
});
</script> 
```

HTML：

```
<div><a id='clickMe' href='data.php?url_param=url_param'>CLICK ME TO RUN PHP</a></div>
<div id="data"></div>  <!-- divto show result --> 
```

PHP：

```
<?php

if($_GET['url_param']){
    echo "simple ajax call";
} 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:20:55.087

首先，你拼错了你的函数名（**getGata != getData**）。

第二：

```
data: {url_param:url_param} 
```

您是否在任何地方设置了 javascript 变量**url_param**？$.ajax**数据**参数的格式如下：

```
get/post variable name : get/post variable value 
```

正如您现在所拥有的，您似乎没有为**url_param**分配值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:38:33.853

您必须在 onload 函数中绑定事件。最常见的做法是：

```
$(document).ready(function(){

  $('#clickMe').click(function(e){
       ...
  });

}); 
```

您还应该`return false;`在事件的最后一行添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-08T16:54:34.233

（已修改？）JavaScript 阻止您的代码工作，因为您没有关闭 jQuery 源代码上的尖括号，它应该是：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

其中一条评论指出你不应该在锚点中有 href，但是因为你忽略了默认值，所以不会触发（假设在用户的浏览器中启用了 JS）。

最后，我认为

```
return false; 
```

之后应该真的在函数内部

```
getData(2); 
```

但是由于我们忽略了默认值，所以锚不应该尝试去任何地方或重新加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T14:57:00.677

您可以简单地使用 jQuery post 功能。

```
$.post('data.php',{param1:'your param 1', param2 : 'your param 2'}, function(response){
    //do your operation here. response is what you get from data.php. 'json' spicifies that the response is json type
    $("#data").html(response);
},'json'); 
```

# c# - ASP.NET mvc 不使用框架

> ID：16106769
> 
> 赞同：-1
> 
> 时间：2013-04-19T14:16:41.133
> 
> 标签：c#, asp.net-mvc, web

我有一个 Default.aspx 页面，它处理`Page_Load`所有逻辑事件并呈现页面。
所以，有一个html页面。但是，我有两个主要的 CSS 文件，用户可以在这两个主题之间进行选择。

问题是，它太复杂了，所以我想做的是创建两个`Page`s，一个是`View`s，一个`Model`是处理请求**并路由到正确`View`**的 s 。

这种情况的最佳实践是什么？
谢谢。

## 编辑：

主题之间的差异不在于颜色/大小，而在于元素的布局等。因此，在这一点上，我有必要**转移到两个不同的页面。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:22:24.057

最佳做法是切换 css 文件，而不是视图。如果您有 2 个 css 文件，使用具有 100 个页面的解决方案，您将创建 200 个视图？如果您想有 3 个主题可供选择怎么办？

CSS 不是您网站的内容属性，它只是一种样式。您真的不应该为不同的样式设置不同的路线，这是 SEO 自杀。

这是一个很好的例子，你的布局应该如何在 MVC3 中使用 razor [http://weblogs.asp.net/scottgu/archive/2010/10/22/asp-net-mvc-3-layouts.aspx](http://weblogs.asp.net/scottgu/archive/2010/10/22/asp-net-mvc-3-layouts.aspx)

还有一件事——模型真的不应该知道关于视图的任何事情。这是控制器的工作。这就是 MVC 的全部意义——分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:22:22.290

我希望我理解正确，但这对你不起作用：

```
<link href="<%=Session["CssFile"].ToString() %>" rel="stylesheet" type="text/css" /> 
```

# php - 图像和拇指脚本的PHP不同位置

> ID：16106770
> 
> 赞同：0
> 
> 时间：2013-04-19T14:16:42.337
> 
> 标签：php, image

嗨，我正在尝试使用 php 回答下面页面中图像和拇指的 [不同位置 PHP 图像和拇指的不同位置](https://stackoverflow.com/questions/15673245/php-different-locations-for-images-and-thumbs)

我在第 88 行的 /home/content/33/5055733/html/galeria.php 中收到警告：为 foreach() 提供的参数无效

第 87 - 89 行在下面

```
$imageArray = array();
foreach($extensionsArray as $ext){
$images = glob("" . $directory . "*.$ext"); 
```

有人可以帮忙吗？谢谢 Melanie 下面是完整的代码

```
<?php  
$gallery_up_dir = "gallery_uploads";
$gallery_thumb_dir = "gallery_thumbs";
$directory = "$gallery_up_dir/*/";

// or get all image files with a .jpg, .JPG, .png, .PNG extension.
$extensions_array = array('jpg', 'JPG', 'png', 'PNG');

$imageArray = array();
foreach($extensionsArray as $ext){
    $images = glob("" . $directory . "*.$ext");

    // fill up the array
    foreach($images as $image){ 
        $imageArray[] = "$image"; 
     }
}

//display images
foreach ($imageArray as $img) {

     echo '<a href="',$img,'" rel="shadowbox" class="thumbnail"><img src="', 
           str_replace($gallery_up_dir,$gallery_thumb_dir,$img) ,'" /></a>';

}?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:19:12.007

这是一个错字。更改`$extensions_array`为：

```
$extensionsArray = array('jpg', 'JPG', 'png', 'PNG'); 
```

当您在 foreach 循环中使用骆驼外壳版本时：

```
foreach($extensionsArray as $ext){ ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:19:45.330

```
$extensions_array = array('jpg', 'JPG', 'png', 'PNG');

foreach($extensionsArray as $ext){ 
```

变量不同，在两个地方都使用 $extensions_array 或 $extensionsArray，它应该可以工作

# r - 如何在R中的变量中用另一个值替换一个值？

> ID：16106771
> 
> 赞同：-5
> 
> 时间：2013-04-19T14:16:43.037
> 
> 标签：r

我的数据：

```
ID color price
1   red   120
2   red   NA 
3   blue  80 
4   green 97 
5   black 100 
```

我需要用颜色变量中的“红色”替换“黑色”，并用平均价格替换 NA

我尝试了以下代码 mydata$color[(mydata$color=="black")]<- "red" # 但我得到了 NULL

对于第二个问题，我使用了 mydata$price[which(is.na(mydata$price))]<- mean(mydata$price) # 但它没有任何改变！

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:19:59.630

您可以使用这种方法来获得所需的内容：

```
df = within(df, {
   variable[variable == "string"] = "string2"
   variable[is.na(variable)] = mean(variable)
 }) 
```

这里的诀窍是，您可以使用创建一个子集，`[]`并使用`[] =`.

# css - 旋转回纵向时视口缩放中断

> ID：16106775
> 
> 赞同：3
> 
> 时间：2013-04-19T14:16:57.710
> 
> 标签：css, mobile, responsive-design, media-queries, viewport

我正在开发我的网站的移动版本，但在旋转我的设备 (iPhone) 时遇到了一些奇怪的行为。旋转到横向时它看起来和工作正常，但是当旋转回纵向时，尽管内容进行了调整，但视口仍停留在横向大小。我有两个登录输入字段，它们在页面上设置为 100% 宽度，以便它们能够拉伸以适应旋转宽度：

```
input {
    clear: both;
    box-sizing: border-box;
    width: 100%;
    padding: 18px 10px;
} 
```

这些输入元素似乎是问题的一部分，因为当我将它们更改为自动时，旋转行为正常。有谁知道我如何解决这种行为，以及保持表单字段的流体宽度不变？

仅供参考，视口设置如下，以允许固定的缩放设计：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
```

我已经彻底查看了 StackOverflow 的解决方案，但其他帖子中的解决方案都不起作用，无论是更改元视口属性、使用 javascript 还是更改 CSS 中的媒体查询。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T09:01:19.283

将输入包含在父 div 中，并为父 div 创建 CSS 规则`overflow: hidden;`。

请参阅我在下面创建的小提琴（当然是在 iPhone 上），让我知道它是否有效！

[http://jsfiddle.net/g54pm/3/](http://jsfiddle.net/g54pm/3/)

# sql-server - 插入时输出插入和表值

> ID：16106777
> 
> 赞同：2
> 
> 时间：2013-04-19T14:17:04.690
> 
> 标签：sql-server, sql-server-2008, tsql

我正在插入 MS SQL Server 2008 中的表（它是来自同一个表的值的副本）并且想要获取插入的输出值。我想获取 select 语句的 id 值（下例中的 t.id）， INSERTED.id 工作得很好

```
create table tmp.tbl_inserted (fromId int, toId int)

INSERT INTO mytable (name)
OUTPUT t.id, INSERTED.id INTO tmp.tbl_inserted
SELECT t.name FROM mytable t 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:23:53.277

你不能直接从一个[`INSERT`](http://msdn.microsoft.com/en-gb/library/ms177564.aspx)：

> *from_table_name*
> 
> 是一个列前缀，它指定包含在 DELETE、UPDATE 或 MERGE 语句的 FROM 子句中的表，该语句用于指定要更新或删除的行。

注意`INSERT`没有提到。

你必须做的是作弊并使用`MERGE`：

```
MERGE INTO mytable m
USING (name,id FROM mytable) t ON 1=0
WHEN NOT MATCHED THEN INSERT (name) VALUES (t.name)
OUTPUT t.id, INSERTED.id INTO tmp.SizeCurveGroup_inserted
; 
```

# iphone - 如何使用 RaptureXML 和 AFNetworking 在 UITableView 上动态显示 XML 的解析内容？

> ID：16106779
> 
> 赞同：2
> 
> 时间：2013-04-19T14:17:07.523
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview, afnetworking

我正在使用和集成`RaptureXML`的包装器和.`AFRaptureXMLRequestOperation``AFNetworking``RaptureXML`

下面的代码工作正常。一切都很好，下载、解析和显示`UITableView`.

当我在后台进行下载和解析时，我`UITableView`会`Main Thread`异步**更新**.

**唯一的问题是 UITableView 的 Contents 仅在 XML 的所有元素都被解析并插入到适当的 时才会显示`NSMutableArrays`，这有时需要一段时间。**

**我的问题**：

有没有办法在下载和解析内容以及填充数据时***动态***显示内容，例如使用Twitter 文件的示例？`UITableView``NSMutableArrays``JASON`

有代码：

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

       [self downloadParsePlayListXML];

    dispatch_async(dispatch_get_main_queue(), ^{
        [self.tableView reloadData];
    });
});

- (void)downloadParsePlayListXML {

NSString *url = @"http://example.net/playlist/xmlfiles/playlist.xml";
AFRaptureXMLRequestOperation *operation = [AFRaptureXMLRequestOperation XMLParserRequestOperationWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:url]] success:^(NSURLRequest *request, NSHTTPURLResponse *response, RXMLElement *XMLElement) {

    [XMLElement iterateWithRootXPath:@"//program" usingBlock: ^(RXMLElement *program) {

        [self.programs addObject:[program attribute:@"name"]];
        [self.speakers addObject:[program child:@"speaker"].text];

    }];
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, RXMLElement *XMLElement) {
    // Handle Error
}];

[operation start]; 
```

}

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:17:53.307

直到今天晚些时候我才能对此进行测试，但我会尝试一下。注意：我不熟悉 RaptureXML。

首先，请参阅几天前有关解析 XML 的这篇文章。 [https://stackoverflow.com/a/16047964/1710611](https://stackoverflow.com/a/16047964/1710611)

然后，在解析过程中，每次它到达一个元素的末尾时，您都会将它添加到您的数组中（作为`UITableView`数据源）并刷新表。

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    if ([elementName isEqualToString:@"YOURTAG"]) {
        // finished getting the data in <YOURTAG>

        // do something now that you've got your data retrieved
        if (self.currentProperty) {
            [YOURDATASOURCEARRAY addObject:self.currentProperty];
            [tableView reloadData];
        }
    }  
} 
```

或者，您也可以尝试替换`[tableView reloadData]`为：

```
[tableView beginUpdates];
[tableView insertRowsAtIndexPaths:YOURINDEXPATHARRAY withRowAnimation:YOURANIMATION];
[tableView endUpdates]; 
```

# c# - 如何在 Lucene.Net 中实现字段的半完美匹配？

> ID：16106786
> 
> 赞同：1
> 
> 时间：2013-04-19T14:17:25.533
> 
> 标签：c#, .net, lucene, lucene.net

我正在尝试为我的 Lucene.net 应用程序设计一个重复捕获方案。我的问题是很难制作唯一的密钥，因为许多字段都是相同的。我知道唯一不同的字段是 Title 和 Abstract 字段。从中制作密钥的问题是有人可能会稍微更改标题，并且它也会被视为独一无二的。基本上，我正在寻找一种设置阈值的方法，如果它们 95% 匹配，那就是匹配。有没有办法用 Lucene 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:23:29.950

我不清楚您对唯一键的要求，但您可以查看 Lucene 的 FuzzyQuery 以了解类似条款的匹配情况。查看这些文章：[模糊搜索](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Fuzzy%20Searches)、模糊[查询](http://lucene.apache.org/core/old_versioned_docs/versions/3_2_0/api/all/org/apache/lucene/search/FuzzyQuery.html)。

# httpwebrequest - 可以在同一个 Web 应用程序中使用 http 请求吗

> ID：16106793
> 
> 赞同：0
> 
> 时间：2013-04-19T14:18:09.010
> 
> 标签：httpwebrequest, web-deployment

我正在设计一个软件系统，其中包含一些托管在 Apache/Tomcat 上的 C++ 项目和 java Web 应用程序。**本机代码[C++ 输出] 将通过 Web 应用程序作为HTTP**请求连接到其他系统[数据库、外部网关等] 。为了制作一个好的分布式/模块化系统，我计划使用几个 [5 到 10] 个 Web 应用程序。但是我的系统还没有完成它的开发，但功能足以出售。但即使仍然有 20% 的全部功能，我也必须经历一个庞大的部署过程，因为它有很多 Web 应用程序。

我的问题是，暂时合并几个 Web 应用程序以减少部署开销是否很好[我可以这样做，直到我为每个应用程序获得更大的源] 并在同一个 Web 应用程序中执行 http 请求？它会导致任何性能/内存/线程问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T14:49:26.463

如果您要合并两个或三个 Web 组件并希望部署单个 jvm，则不应在 Web 组件之间使用 http 请求，为此您可以使用 jboss osgi [http://www.jboss.org/jbossas/subprojects/osgi](http://www.jboss.org/jbossas/subprojects/osgi)[输入链接描述在这里](http://www.jboss.org/jbossas/subprojects/osgi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T14:18:55.457

我找到的解决方案是使用托管 JVM，它是 Servlet 容器或 Web 服务中的应用程序。这样，就可以重用单个 JVM。但这里的问题是，您需要两个应用程序之间的通信机制，我更喜欢使用 TCP 套接字。

# knockout.js - 淘汰赛：选择所有复选框不起作用

> ID：16106795
> 
> 赞同：0
> 
> 时间：2013-04-19T14:18:10.730
> 
> 标签：knockout.js

我们正面临一个特殊的问题。我们有一个表格，其中每一行都是可选的，并且与敲除绑定，如下所示：

```
thead
  tr
    th: input(type="checkbox", data-bind="checked: $root.onSelectAll")
    ..
    ..
tbody(data-bind="foreach: items")
  tr
    td
      input(type="checkbox", data-bind="attr: { value: $data.id }, checked: $root.selectedItems")
    ..
    .. 
```

这很好用，因为我们选择了一个项目，并且它的 id 属性被添加到 selectedItems 列表中。

我们现在需要为每个页面实现一个全选选项，因为有分页。我们正在查看[http://jsfiddle.net/rniemeyer/kXYuU/](http://jsfiddle.net/rniemeyer/kXYuU/)但无法使其工作，这就是问题所在。我能够自己编写一个解决方案，但它比应有的复杂得多。使用 Knockout，它应该更容易和更清洁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:25:56.710

首先，我可能是错的，但我认为您不能在绑定`$root`上下文之外使用。`foreach`无论您是否可以，您的`th`( `$root.onSelectAll`--> `onSelectAll`) 的绑定都不需要它。

其次，`$root.selectedItems`感觉就像一个 observableArray，不能将 observableArray 绑定到`checked`，它必须是 observable。

# linux - 具有 freerdp 非活动超时超时的远程桌面

> ID：16106801
> 
> 赞同：0
> 
> 时间：2013-04-19T14:18:23.357
> 
> 标签：linux, remote-desktop, raspberry-pi, thin-client

所以我有一个树莓派，它使用程序 freerdp 引导到虚拟机的 RDP 会话。如果会话处于非活动状态大约一分钟，它将关闭会话。有没有办法完全关闭它或让计时器真的很长？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T06:09:08.467

试试看这里： http: [//www.howtogeek.com/141157/how-to-configure-your-raspberry-pi-for-remote-shell-desktop-and-file-transfer/](http://www.howtogeek.com/141157/how-to-configure-your-raspberry-pi-for-remote-shell-desktop-and-file-transfer/)

这样，您就不会使用任何 freerdp hack，而是以正确的方式进行操作。

# python - 在 Python 中设置默认参数并覆盖相同的语法查询

> ID：16106809
> 
> 赞同：0
> 
> 时间：2013-04-19T14:18:37.063
> 
> 标签：python, string-substitution

以下是相关代码段：

```
class MainPage(webapp2.RequestHandler):
    def write_form(self,text=""):
        self.response.out.write(form%{"text":escape_html(text)}) #form is a html form

    def get(self):
        self.write_form()

    def post(self):
        user_input = self.request.get('text') #from a html form
        encode = user_input.encode('rot13')
        self.write_form(encode) 
```

定义 write_form 时，我们将 text 的默认值设置为空字符串，我理解这一点。

我感到困惑的是最后一行`self.write_form(encode)`我们没有明确说明我们现在将变量文本设置为编码（或我们想要传递的任何内容......）。

这是否意味着由于我们只有一个变量（不包括自我），所以我在 python 中传递的任何内容都会假定它是我为“文本”传递的内容？

提前致谢

**更新**

使用 jamylak 的答案，我在简化版本中为自己尝试了它（python 2.7，因为我不使用 3）来得到我的答案。对于像我这样的 n00bs，这可能会使答案更加清晰：

```
def example(result="42"):
    print result

example()
>>>42

example(87)
>>>87

example("hello")
>>>"hello" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:21:53.867

是的，`self`当您调用实例的方法时隐式传递，并且不需要总是用它们的名称指定默认参数（如果以正确的顺序传递）。附带说明一下，python 3 允许您使用星号 ( `*`) 来确保您通过它们的名称传递它们：

```
>>> def foo(*, text=''):
        pass

>>> foo('aa')
Traceback (most recent call last):
  File "<pyshell#10>", line 1, in <module>
    foo('aa')
TypeError: foo() takes 0 positional arguments but 1 was given
>>> 
>>> foo(text='aaa') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:22:05.227

您的第一个参数是`self`由 python 自动传递给该函数的。第二个参数`rot13`传递给`text`. 如果你传递第三个参数，你会得到一个错误。

# android - 菜单布局

> ID：16106813
> 
> 赞同：1
> 
> 时间：2013-04-19T14:18:47.160
> 
> 标签：android, layout, menu, icons

我希望我的菜单如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/bcoYP.jpg)

我希望图标始终位于每个网格的中心。所以它在不同的屏幕尺寸上看起来不错。

现在我的代码看起来像这样，但是当屏幕变大时它看起来并不好。

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center" 
android:background="@drawable/water">

 <TableRow
     android:id="@+id/tableRow1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:gravity="center" >

     <ImageButton
         android:id="@+id/imageButton_city"
         android:layout_width="128dp"
         android:layout_height="128dp"
         android:layout_gravity="center_horizontal"
         android:layout_marginBottom="15dp"
         android:layout_marginRight="15dp"
         android:background="@null"
         android:contentDescription="@string/city_des"
         android:scaleType="fitCenter"
         android:src="@drawable/city_button" />

     <ImageButton
         android:id="@+id/imageButton_states"
         android:layout_width="128dp"
         android:layout_height="128dp"
         android:layout_gravity="center_horizontal"
         android:layout_marginBottom="15dp"
         android:layout_marginLeft="15dp"
         android:background="@null"
         android:contentDescription="@string/state_des"
         android:scaleType="fitCenter"
         android:src="@drawable/states_button" />

 </TableRow>

 <TableRow
     android:id="@+id/tableRow2"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:gravity="center" >

     <ImageButton
         android:id="@+id/imageButton_currency"
         android:layout_width="128dp"
         android:layout_height="128dp"
         android:layout_marginRight="15dp"
         android:background="@null"
         android:contentDescription="@string/converter_des"
         android:scaleType="fitCenter"
         android:src="@drawable/currency_button" />

    <ImageButton
        android:id="@+id/imageButton_tip"
        android:layout_width="128dp"
        android:layout_height="128dp"
        android:layout_marginLeft="15dp"
        android:background="@null"
        android:contentDescription="@string/tip_des"
        android:scaleType="fitCenter"
        android:src="@drawable/tip_button" />

 </TableRow>

 <TableRow
     android:id="@+id/tableRow3"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:gravity="center_horizontal|center" >

     <ImageButton
         android:id="@+id/imageButton_information"
         android:layout_width="128dp"
         android:layout_height="128dp"
         android:layout_marginTop="15dp"
         android:background="@null"
         android:contentDescription="@string/information_des"
         android:scaleType="fitCenter"
         android:src="@drawable/information_button" />

 </TableRow> 
```

有人可以给我一个简单的提示，我该如何做到这一点？

编辑：

在大卫的帮助下，我修复了它。这就是代码现在的样子：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">

<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1" >

    <RelativeLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" >

        <ImageButton                
            android:layout_centerInParent="true"
            ...>
        </ImageButton>
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" >

        <ImageButton                
            android:layout_centerInParent="true"
            ...  >
        </ImageButton>
    </RelativeLayout>
</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1" >

    <RelativeLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" >

        <ImageButton
            android:layout_centerInParent="true"
            ...  >
        </ImageButton>
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" >

        <ImageButton                
            android:layout_centerInParent="true"
            ...   >
        </ImageButton>
    </RelativeLayout>
</TableRow>

<TableRow
    android:id="@+id/tableRow3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center" >

    <ImageButton
        ...  >
    </ImageButton>

</TableRow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:33:30.873

为什么不把你`ImageButton`的 a包装起来`RelativeLayout`并给出`ImageButton`属性`android:layout_centerInParent="true"`？的孩子`TableRow`将是 a `RelativeLayout`，他的`ImageButton`孩子总是完全居中。现在，视图层次结构看起来像这样：

```
<TableRow
    ... >

    <RelativeLayout
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        ... >

        <ImageButton
            android:layout_height="match_parent"
            android:layout_width="match_parent"
            android:layout_centerInParent="true"
            ... >

        </ImageButton>
    </RelativeLayout>
</TableRow> 
```

此外，对于有两个按钮的行，您可以将其包装`RelativeLayout`在一个单行中`LinearLayout`并赋予每个`RelativeLayout`权重 1，这将均匀分配空间，每个视图 50%，如果有 3，则为 33.3%，4 为 25%，等等...一个例子是这样的：

```
<TableRow
    ... >

    <LinearLayout
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        ... >

        <RelativeLayout
            android:layout_height="match_parent"
            android:layout_width="0dp"
            android:layout_weight="1"
            ... >

            <ImageButton
                android:layout_height="match_parent"
                android:layout_width="match_parent"
                android:layout_centerInParent="true"
                ... >

            </ImageButton>
        </RelativeLayout>

        <RelativeLayout
            android:layout_height="match_parent"
            android:layout_width="0dp"
            android:layout_weight="1"
            ... >

            <ImageButton
                android:layout_height="match_parent"
                android:layout_width="match_parent"
                android:layout_centerInParent="true"
                ... >

            </ImageButton>
        </RelativeLayout>
    </LinearLayout>
</TableRow> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:33:36.217

参考[这里，](https://stackoverflow.com/questions/5515174/android-how-to-center-view-within-column-of-tablelayout)您可以使用`android:layout_gravity="center_horizontal"`图像的中心。

# css - 解决 z-index 具有固定标题的问题

> ID：16106816
> 
> 赞同：1
> 
> 时间：2013-04-19T14:18:55.763
> 
> 标签：css, z-index

所以一切看起来都很好并且工作正常，除非你向下滚动缩略图所在的位置并且左栏直接与缩略图相对，你无法选择它们......我知道 z-index div 正在覆盖它，这就是原因我无法选择它们，但我需要弄清楚如何解决这个问题，但我似乎无法弄清楚。也许是一个 jquery 解决方案？

[http://originalpenguinaccessories.com/midwest/](http://originalpenguinaccessories.com/midwest/)

更新了一个示例...

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Untitled Document</title>
<style>
#headerContainer {
width: 100%;
position:fixed;
z-index:9999;
display:inline;
}
#topbar {
width: 100%;
height: 20px;
background-color: #004570;
-webkit-box-shadow: 0px 5px 5px 0px rgba(100, 100, 100, .9);
box-shadow: 0px 5px 5px 0px rgba(100, 100, 100, .9);
}
#logo {
background-color: #004570;
height: 360px;
width: 250px;
margin-left: 50px;
-webkit-border-bottom-right-radius: 15px;
-webkit-border-bottom-left-radius: 15px;
-moz-border-radius-bottomright: 15px;
-moz-border-radius-bottomleft: 15px;
border-bottom-right-radius: 15px;
border-bottom-left-radius: 15px;
display: inline-block;
-webkit-box-shadow: 5px 5px 5px 0px rgba(100, 100, 100, .9);
box-shadow: 5px 5px 5px 0px rgba(100, 100, 100, .9);
}
#logo img {
margin-top: 30px;
margin-left: 15px;
}
#logo h2 {
    margin-top: 100px;
    color: white;
    letter-spacing: 1px;
}
#link {
    background-color: #004570;
    float: right;
    width: 135px;
    height: 55px;
    text-align: center;
    margin-right: 40px;
    color: white;
    -webkit-border-bottom-right-radius: 15px;
    -webkit-border-bottom-left-radius: 15px;
    -moz-border-radius-bottomright: 15px;
    -moz-border-radius-bottomleft: 15px;
    border-bottom-right-radius: 15px;
    border-bottom-left-radius: 15px;
    -webkit-box-shadow: 5px 5px 5px 0px rgba(100, 100, 100, .9);
    box-shadow: 5px 5px 5px 0px rgba(100, 100, 100, .9);
}
#link p {
    font-size: .8em;
}
#contentContainer {
    width: 40%;
}

</style>

</head>

<body>
<div id="headerContainer">
    <div id="topbar"></div>
    <div id="logo">
    <img src="" alt="">
     <h2>Lorem ipsum dolor sit amet</h2>

</div>
<div id="link">
    <p>Lorem ipsum dolor sit ametLorem ipsum dolor sit amet</p>
     <h6>Lorem ipsum dolor sit amet</h6>

</div>
</div>
<div id="contentContainer">
 <h3>Lorem ipsum dolor sit amet</h3>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
 <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
      <div class="image-grid">
    <div class="imageDiv"> <a href="images/thumb.jpg" rel="lightbox" title="my caption">Link</a>

         <h4>M442</h4>

        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
    </div>
    <div class="imageDiv"> <a href="images/thumb.jpg" rel="lightbox" title="my caption">Link</a>

         <h4>M442</h4>

        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
    </div>
    <div class="imageDiv"> <a href="images/thumb.jpg" rel="lightbox" title="my caption">Link</a>

         <h4>M442</h4>

        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
    </div>
    <div class="imageDiv"> <a href="images/thumb.jpg" rel="lightbox" title="my caption">Link</a>

         <h4>M442</h4>

        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
    </div>
</div>
   <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
     <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:35:14.597

试试这个。

```
＃标识 {
    位置：相对；
    z 指数：100；
}

.fs-pager-wrapper {
    z 指数：50；
}

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:33:20.637

只需适用`position:absolute`于您的`#logo`和`#link`div（以及`right:0`）`#link`。这会将它们带出元素流，并且父 div 将折叠。

# xaml - Scrollviewer 中的扩展器：折叠扩展器后 Scrollviewer 不收缩

> ID：16106818
> 
> 赞同：0
> 
> 时间：2013-04-19T14:19:01.667
> 
> 标签：xaml, telerik, scrollviewer, expander

我有一个网格。该网格包含一个滚动查看器，该滚动查看器包含一个列表框，其项目是扩展器。当展开扩展器直到它们超过 UserControl 的垂直可用高度时，滚动查看器的滚动条会正确显示。当我再次折叠扩展器时，滚动查看器的滚动条保持不变！它不会像预期的那样再次缩小或消失。

我已经尝试了一些不同的网格行设置（“自动”、“*”）和不同的垂直对齐设置（顶部、拉伸、...）

折叠扩展器后，如何设法使滚动查看器再次缩小？

```
<UserControl x:Class="Expanderin_Scroller.MainPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
             mc:Ignorable="d"
             d:DesignWidth="440"
             d:DesignHeight="300">

  <Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto" />
    </Grid.ColumnDefinitions>
    <ScrollViewer x:Name="ScrToolbox"
                  Grid.Row="1"
                  VerticalAlignment="Top">
      <ListBox x:Name="Toolbox">
        <telerik:RadExpander Header="Expander 1">
          <StackPanel>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
          </StackPanel>
        </telerik:RadExpander>

        <telerik:RadExpander Header="Expander 2">
          <StackPanel>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
          </StackPanel>
        </telerik:RadExpander>

        <telerik:RadExpander Header="Expander 3">
          <StackPanel>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
          </StackPanel>
        </telerik:RadExpander>

        <telerik:RadExpander Header="Expander 4">
          <StackPanel>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
            <TextBlock>Hello</TextBlock>
          </StackPanel>
        </telerik:RadExpander>
      </ListBox>
    </ScrollViewer>
  </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:04:49.420

我可以在 Telerik 人的帮助下解决这个问题：

此问题是由 ListBox 行为，特别是其 ItemsPanel 引起的。为了更新 ListBox 的大小及其内容的大小，您可以将 ListBox.ItemsPanel 设置为 StackPanel。

```
<ListBox.ItemsPanel>
     <ItemsPanelTemplate>
          <StackPanel />
     </ItemsPanelTemplate>
</ListBox.ItemsPanel> 
```

现在 Listbox 会随其内容一起调整大小。

# internet-explorer - 为什么字体图标有额外的高度？

> ID：16106819
> 
> 赞同：11
> 
> 时间：2013-04-19T14:19:06.500
> 
> 标签：internet-explorer, custom-font

我正在使用一组使用[Ico moon](http://icomoon.io/app)创建的图标字体。这些图标在 Firefox 和 Chrome 中看起来和工作得很好，但是图标在 IE 10 中出现了额外的高度。

我不确定高度来自哪里。

在 IE 10 中，图标的高度似乎要高得多。 ![带有额外高度的 IE 图标](https://i.stack.imgur.com/BwQkd.png)

这是它们在具有正确高度的 chrome 中的样子。 ![在此处输入图像描述](https://i.stack.imgur.com/SRg9D.png)

这是图标的 CSS：

```
font-family: 'IconFont';
speak: none;
font-style: normal;
font-weight: normal;
line-height: 1;
-webkit-font-smoothing: antialiased; 
```

这是来自 IE10 开发工具的 Traced Styles。![在此处输入图像描述](https://i.stack.imgur.com/4ekIU.png)

我在 codepen.io 上做了一个类似问题的快速演示。[演示在这里](http://codepen.io/ryanjgill/pen/Ihcbe)

有没有人遇到类似的问题？有没有人找到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T15:07:13.620

行高问题：1

你写

```
line-height: 20px ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T12:13:47.333

在 Microsoft office 图片（或其他编辑器）中打开您的图片并调整图片大小，IE 浏览器有时会将图片显示为真实大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-22T13:43:57.240

我遇到了这样的问题 - 我修复了它）））在我的 svg 文件夹中是一个错误的文件。（使用具有参数 X-1220 和 Y-770 的隐藏元素）所以这是个问题！我删除了这个元素，一切都很好。

# asp-classic - 虚拟包括不工作

> ID：16106820
> 
> 赞同：0
> 
> 时间：2013-04-19T14:19:07.933
> 
> 标签：asp-classic, include, virtual

我最近接管了一个用 Classic ASP 编写的网站，我以前没有使用过该网站。

在站点的根目录中，default.asp 有一个包含：

```
#include virtual="/inc/common.asp" 
```

但是，当托管在 Web 服务器或本地 (IIS) 上时，它会返回一个错误，指出找不到包含文件“common.asp”。inc 文件夹与default.asp 位于同一目录中，common.asp 位于inc 文件夹中。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:40:58.727

您说 inc 文件夹与 default.asp 位于同一文件夹中-但是您没有说该文件夹是否为根文件夹。#include virtual 从根目录获取路径，因此请确保其中包含完整路径。

这里有一个#include 语法的快速解释：http: [//www.w3schools.com/asp/asp_incfiles.asp](http://www.w3schools.com/asp/asp_incfiles.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T08:26:03.253

您不能在 Classic ASP 中使用斜杠 (/) 开始包含链接。所以你的包含需要像：

```
#include file="inc/common.asp" 
```

或#include file="../inc/common.asp" 或include file="../../inc/common.asp"

请注意我使用“文件”而不是“虚拟”？

```
<!--#include file="inc/common.asp" --> 
```

此外，除非您的包含在同一个文件夹中，否则您需要在 IIS 管理员中启用“父路径”。

# javascript - 如何在jquery .change函数中传递变量

> ID：16106822
> 
> 赞同：0
> 
> 时间：2013-04-19T14:19:12.230
> 
> 标签：javascript, jquery

当用户选择任何选项时，我有一个带有简单下拉菜单的表单，我希望能够将该选定值传递给 JavaScript 函数

一旦用户单击一个选项，它将提醒 jQuery 更改函数中的值，但我想使用在其他函数中传递的值，但由于某种原因它没有得到该值

```
function getTweet(){
  $('#test').change(function() {
    var value = $('#test :selected').val();
  });
} 
```

想要使用更改函数之外的值，但它没有抓住它

```
<form>  
    <select id="test">
        <option value="one">1</option>
        <option value="two">2</option>
        <option value="three">3</option>
    </select>
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:23:03.820

如果您想在代码中的任何位置使用下拉列表的最新值，您可以像这样引用它：

```
$('#test').val() 
```

我删除了`:selected`, 因为那不是必需的；`.val()`将给出正确的值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T14:37:38.087

您可能会使用自定义事件来基于该事件做某事？

例子：

```
$('#test').change(function () {
    $('mysubscriberselectorshere').trigger('gettweet');
});

// do something based on the custom event
$('mysubscriberselectorshere').on('gettweet', function {
    // do good stuff here
    alert($('#test').val());
}); 
```

# twig - TWIG：与 PHP 的 $$var 类似的指令是什么？

> ID：16106824
> 
> 赞同：0
> 
> 时间：2013-04-19T14:19:14.137
> 
> 标签：twig

我在视图中看到了一个数组，我只知道一个变量的名称（字符串）。

我需要评估它。

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T08:08:52.570

Twig 没有可变变量，但您可以制作一个 twig 扩展/过滤器来对该问题进行排序，这应该不是很困难。

如果您没有使用此功能，请执行以下操作：

[http://symfony.com/doc/current/cookbook/template/twig_extension.html](http://symfony.com/doc/current/cookbook/templating/twig_extension.html)

# javascript - 如何通过javascript获取浏览器的远程IP？

> ID：16106829
> 
> 赞同：2
> 
> 时间：2013-04-19T14:19:16.803
> 
> 标签：javascript, user-agent, clientip

我想通过javascript获取远程客户端ip，而不是查询任何外部ip资源池。我怎么能得到远程IP地址，就像我得到appName的方式一样`navigator.appName`

也喜欢以下方式：

PHP：`<?php echo $_SERVER["REMOTE_ADDR"]; ?>`

节点.JS：`req.connection.remoteAddress`

如此绿色的 javascript，我试图用一些关键字谷歌。但我仍然找不到我想要的结果。这里的任何人都可以分享他对相同场景的解决方案吗？欢迎任何提示或建议。

平台：chrome、firefox

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:21:03.783

这在没有外部调用的情况下使用纯 Javascript 是不可能的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T14:26:37.947

您无法在客户端上知道它，因为客户端不知道它。例如，如果客户端在 NAT 之后，则机器的 IP 将与“世界”看到的 IP 不同。

进行一个简单的服务器 (AJAX) 调用，它将返回远程地址。

# twitter-bootstrap - Facebook 喜欢使用 Joomla 3 引导程序切割 iframe

> ID：16106832
> 
> 赞同：0
> 
> 时间：2013-04-19T14:19:20.177
> 
> 标签：twitter-bootstrap, joomla, facebook-like, joomla-extensions, joomla3.0

在我的 joomla 3 扩展中，我正在显示一个类似 facebook 的按钮。如果用户单击like 按钮，则应显示评论框的 iframe 将被剪切，并且只有一小部分可见。
我没有做一些特别的事情。

```
<div class="pull-left event-button">
    <div class="dp-share-button"><div id="fb-root"></div
        <fb:like href="http://joomla.digital-peak.com/demo/dpc/en" layout="button_count" show_faces="true" send="true" width="" action="like" font="arial" colorscheme="light"></fb:like>
    </div>
</div> 
```

可以在此处找到演示[http://joomla.digital-peak.com/demo/dpc/en](http://joomla.digital-peak.com/demo/dpc/en)单击“赞”按钮。我在网上上下搜索，我快疯了，因为我找不到修复它的方法。如果有人可以帮助我真的很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:47:28.483

Happened to me too, just force the margin and padding to zero, set a max-height and max-width, this will solve for most users but still on some devices it will randomly load wrong.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:35:57.810

我无法测试它，因为我不使用 Facebook，而是使用标记，如果问题是溢出属性，您可以尝试将以下 jQuery 脚本添加到您的日历脚本中：

```
<script>
(function($){
    $(document ).ready(function(){
        $(".dp-share-button" ).find("iframe").css("overflow","visible");
    });
})(jQuery);
</script> 
```

最后，我认为通过这个示例 jQuery 脚本，您可以使用一个工具来测试不同的 css 属性，并可能获得最佳解决方案。可能您需要某种触发器，例如`$("yourbutton").bind("click", function(){ // your css modification code inside here });`

# css - 水井超过了行

> ID：16106833
> 
> 赞同：1
> 
> 时间：2013-04-19T14:19:23.353
> 
> 标签：css, twitter-bootstrap, twitter-bootstrap-rails

我正在尝试将 3 个 Wells 排成一排，就像这样

```
<div class="row" style="margin-top: 10px">

    <div class="span4 well">
        <h3 class="centralizado"><img src="/assets/temple.png" />
            <a href="<%= ministerios_path %>" class="no-style">Ministérios</a>
        </h3>
        <p>Aqui vai um texto meio longo, mas eu acho que nao vai ultrapassar o well</p>
    </div>

    <div class="span4 well">
        <h3 class="centralizado"><img src="/assets/educacao.png" />
            <a href="<%= educacionais_path %>" class="no-style">Educaional</a>
        </h3>
        <p>Aqui vai um texto meio longo, mas eu acho que nao vai ultrapassar o well</p>
    </div>

    <div class="span4 well">
        <h3 class="centralizado"><img src="/assets/contato.png" />
            <a href="/contato" class="no-style">Contato</a>
        </h3>
        <p>Aqui vai um texto meio longo, mas eu acho que nao vai ultrapassar o well</p>
    </div>

</div> 
```

但这是输出： [![井](https://i.stack.imgur.com/ha5Dq.png)](https://i.stack.imgur.com/ha5Dq.png)

3 个井应该在同一行。我用的是`container`，不是`container-fluid`。

这是自定义的css：

```
.well{
    background-color: white !important;
}

* {
    font-family: 'Roboto', sans-serif;
    font-weight: 300;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:25:03.457

发生这种情况是因为`Well`样式添加了 s 未考虑的额外填充和边距`span`。这是一个有效的[jsFiddle](http://jsfiddle.net/JU4bZ/)。

最简单的解决方案是添加 box-sizing 模型：

```
* { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; } 
```

[这是](http://paulirish.com/2012/box-sizing-border-box-ftw/)有关 box-sizing 模型的好信息。

* * *

**编辑：**在[Firefox](http://i.stack.imgur.com/my0JP.png)、[Chrome](http://i.stack.imgur.com/qtPCW.png)、[IE 8](http://i.stack.imgur.com/N89yt.png)、[9](http://i.stack.imgur.com/KWMT5.png)和[10中测试](http://i.stack.imgur.com/9qyO5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:23:50.700

只需在 span 内设置另一个 div ：

```
<div class="row" style="margin-top: 10px">
    <div class="span4">
        <div class="well">
            <h3 class="centralizado"><img src="/assets/temple.png" />
                <a href="<%= ministerios_path %>" class="no-style">Ministérios</a>
            </h3>
            <p>Aqui vai um texto meio longo, mas eu acho que nao vai ultrapassar o well</p>
        </div>
    </div>

    <!-- etc -->
</div> 
```

正如您在 中看到的那样`bootstrap.css`，`well`该类有它自己的`border`，`padding`这使得它`div.span4`占用的宽度超出了它应有的宽度。

# c - 使用 typedef 的 C 枚举类型的值

> ID：16106836
> 
> 赞同：0
> 
> 时间：2013-04-19T14:19:34.667
> 
> 标签：c, typedef, enumeration

你知道 ALL_MODULE 的结果吗？
你知道哪本书描述了这种情况吗？
非常感谢。:)

```
typedef enum
{
  MODULE0,
  MODULE1,
  MODULE2
}MODULE_TAG;

#define ALL_MODULE (MODULE_TAG-1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:48:05.290

我认为定义可能有点不同：
`#define ALL_MODULE ((MODULE_TAG)-1)`

例如

```
#include <stdio.h>

typedef enum
{
  MODULE0 = 1,
  MODULE1 = 2,
  MODULE2 = 4
}MODULE_TAG;

#define ALL_MODULE ((MODULE_TAG)-1)

int main(){
    MODULE_TAG all = ALL_MODULE;
    MODULE_TAG amod = MODULE1;

    if(amod == MODULE1){
        printf("amod equal MODULE1\n"); 
    }
    if(amod != MODULE1){
        printf("amod not equal MODULE1\n"); 
    }

    if(all & MODULE0){
        printf("all has MODULE0\n");
    }
    if(all & MODULE1){
        printf("all has MODULE1\n");
    }
    if(all & MODULE2){
        printf("all has MODULE2\n");
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:36:08.663

枚举类型定义没有值。在表达式中使用 ALL_MODULE 将导致编译错误。

# c++ - *static* 关键字在成员方法声明中的位置

> ID：16106838
> 
> 赞同：7
> 
> 时间：2013-04-19T14:19:36.233
> 
> 标签：c++

有没有区别

```
class C {
    static int func();
}; 
```

和

```
class C {
    int static func();
}; 
```

我正在尝试删除其他人代码库中的关键字*static 。*在我这样做之前，我想确保我理解第二个示例的含义。

[编辑] 删除*static*的原因：C 是一个没有成员变量且充满静态方法的“类”。我认为将“C”作为具有普通函数而不是类的命名空间更合适。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T14:21:37.190

没有区别。`static`关于函数声明适用于函数。指针不会隐式传递给该函数，因此如果不将对象显式传递给它，就无法访​​问该函数内部的非静态类成员
。`this`

要删除第`static`一个，您应该知道并理解以这种方式设计的目的。如果不考虑这一点，您肯定会产生很大比例的代码气味。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T14:21:53.130

是的，在第一种情况下，关键字`static`在 type 之前`int`，在第二种情况下，它们是相反的。但是，就像 C 和 C++ 中的许多东西一样，没有语义差异。因此，除了“化妆品”之外，没有任何区别。

我不确定您为什么要`static`作为一般规则在类中删除 - 声明成员函数可能是有充分理由的`static`。

# matlab - 雅虎获取数据 MATLAB

> ID：16106840
> 
> 赞同：1
> 
> 时间：2013-04-19T14:19:43.340
> 
> 标签：matlab, yahoo

我有证券代码清单。我想下载收盘价并将它们存储到变量中。我写了这个脚本：

```
function y=fetchDataFromYahoo()
    ticker={'ABFS','TCB','NE','FGP'};%,'IMO','CAJ','CAG','GMCR','HSH','HAIN','SIM'};
    c=yahoo;
    for i=1:4
        Price.(ticker{i})=fetch(c,ticker(i),'Adj Close','Jan 1 00','Apr 19 13','d');
        temp=Price.(ticker{i});
        ClosePrice(:,i)=temp(:,2);
    end
    y=ClosePrice;
end 
```

当我在数组中有三个证券时它可以工作，但是当数组中有超过 3 个证券时它会抛出错误。错误消息如下：

```
Subscripted assignment dimension mismatch.

    Error in fetchDataFromYahoo (line 7)
            ClosePrice(:,i)=temp(:,2); 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:31:10.427

您假设所有系列的长度相同。只需将其保存在一个结构中：

```
fetchDataFromYahoo({'ABFS','TCB','NE','FGP'}) 
```

我将您的功能修改为：

```
function Price = fetchDataFromYahoo(ticker)
    c = yahoo;
    for i = 1:numel(ticker)
        Price.(ticker{i}) = fetch(c,ticker(i),'Adj Close','Jan 1 00','Apr 19 13','d');
    end
end 
```

调用结果（第一行代码）：

```
ans = 
    ABFS: [3337x2 double]
     TCB: [3337x2 double]
      NE: [3337x2 double]
     FGP: [3343x2 double] 
```

**编辑**以解决评论

为了在矩阵中容纳不同长度的金融时间序列，您需要在缺少特定日期数据的地方填充 NaN。您将需要[`rude()`](http://www.mathworks.co.uk/matlabcentral/fileexchange/6436-rude-a-pedestrian-run-length-decoder-encoder)和我的[`Pivot()`](http://www.mathworks.co.uk/matlabcentral/fileexchange/26119-pivotunpivot)：

```
% Use the modified function that returns a structure
D   = fetchDataFromYahoo({'ABFS','TCB','NE','FGP'});

% Convert to cell
C   = struct2cell(D);

% Count how many rows each cell
len = cellfun('size',C,1);

% Expand id to match each series length
Out = Pivot([rude(len,1:numel(C))', cat(1,C{:})]); 
```

您可以看到`Out`ABFS、TCB 和 NE 缺少对应于第 37 行的日期（您也可以在 D 中再次检查，缺少日期 730539）。

# printing - 在事务 NACE 中，如果我知道 Smartform 的名称，是否可以找出打印程序和表单例程？

> ID：16106850
> 
> 赞同：2
> 
> 时间：2013-04-19T14:20:27.383
> 
> 标签：printing, document, abap, sap-smart-forms

我想找出打印程序的名称，以及打印我的 SmartForm 的子程序（表单）的名称。

现在好在NACE（Conditions for Output Control）中，可以自己“kinna”弄清楚应用程序和输出类型，然后打印程序显然是写在那里的。

那么如果一个人不知道什么应用程序和输出类型，并且必须手动检查所有应用程序和输出类型呢？没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:59:06.023

TNAPR 表包含一些打印程序 -> 脚本链接，在 SFORM 字段中搜索您的智能表单名称。然而，这绝不是一份详尽的清单。

或者

对“SSF_FUNCTION_MODULE_NAME”进行“使用位置”搜索，这将为您提供所有 smartform 调用程序的列表。您仍然需要手动完成它，但您可能会找到适当匹配的程序描述或类似内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:25:32.843

如果您需要找出某个表单的实际打印程序**并且**可以获得打印预览，您可以随时进入调试器使用`/h`并检查调用堆栈。

# android - OpenGL ES 2.0 和着色器

> ID：16106854
> 
> 赞同：0
> 
> 时间：2013-04-19T14:20:34.887
> 
> 标签：android, opengl-es-2.0

两个问题：

1.  有没有办法在 OpenGL ES 2.0 中不使用着色器来渲染到屏幕？

2.  是否有可以用来代替定义自己的默认顶点和片段着色器？

除了围绕 OpenGL ES 2.0 之外，没有尝试实现任何目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:27:08.200

1.  不，不在 ES 2.0 中。

2.  不是内置的，但你可以在网上找到一些。尽管什么是合理的默认着色器很大程度上取决于您实际想要做什么。您只想渲染彩色图元吗？在 2D 或 3D 中？你需要照明吗？哪些参数定义了您的灯光？你想要纹理吗？这些相当基本的问题已经定义了着色器的外观。

一方面，问题是您需要不同的着色器，具体取决于您想要实现的每种情况和渲染风格。但另一方面，如果适应特定的用例，这些着色器不会那么复杂。一个简单的 3D 光照顶点着色器不需要超过 5 行代码（仅实际着色器功能），并且相应的片段着色器对 1 行代码进行纹理处理。

但是您将无法理解着色器是如何工作的以及如何与它们交互。一旦你得到了这个，为通常的用例编写你自己的着色器就变得轻而易举了。我建议您查看一些关于 OpenGL ES 2.0 的优秀教程或书籍。这应该适当地介绍着色器的基本原理以及如何实现通常的标准计算，如顶点变换、光照、纹理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:21:23.003

不幸的是，OpenGL ES 2.0 没有定义任何默认着色器。

OpenGL ES 1.0 只是一个固定的管道，不允许着色器定义，而 OpenGL ES 2.0 允许着色器定义，但不包括任何固定的管道（即默认着色器）

# magento - 当所有子产品都缺货时，可配置产品缺货

> ID：16106856
> 
> 赞同：1
> 
> 时间：2013-04-19T14:20:40.360
> 
> 标签：magento, magento-1.7, magento-1.6

嘿伙计们，我有一个小困境。我正在运行 Magento 版本。1.7.0.2

当您创建可配置产品时，您必须将库存设置为“库存”，然后添加具有不同库存的其他附加产品。

当附加产品库存变为 0 时，主要可配置产品仍处于“库存”状态。

我希望当所有其他产品库存变为 0 时，主要可配置产品库存变成“缺货”。

我正在使用此自定义代码让“缺货”产品始终出现在底部页面。除非可配置产品没有收到“缺货”选项，否则它无法进入底部页面。

```
$this->getSelect()->joinLeft(array('_inventory_table'=>$this->getTable('cataloginventory/stock_item')),"_inventory_table.product_id = e.entity_id",array('is_in_stock', 'manage_stock'));
$this->addExpressionAttributeToSelect('on_top','(CASE WHEN (((_inventory_table.use_config_manage_stock = 1) AND (_inventory_table.is_in_stock = 1)) OR  ((_inventory_table.use_config_manage_stock = 0) AND (1 - _inventory_table.manage_stock + _inventory_table.is_in_stock >= 1))) THEN 1 ELSE 0 END)',array());
$this->getSelect()->order('on_top DESC'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T13:31:06.463

我不知道这是否对你有用，但我认为你可以从文件“app/base/default/template/catalog/product/view.phtml”中的模板本身解决这个问题，代码行显示：

```
<?php if ($_product->isSaleable() && $this->hasOptions()):?>
    <?php echo $this->getChildChildHtml('container2', '', true, true) ?>
<? else : ?>
enter code here
<?php endif ?> 
```

如果您从基本模板中的原始文件创建它，您可能会从第 100 行开始看到此代码，因为您可以看到可配置产品的所有选项是否为空，这意味着所有产品已经售罄，导致它不显示将其添加到购物车所需的表单字段。

我希望这有帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:36:10.127

你确定你有正确的 Magento 设置吗？

```
Inventory "Show Out Of Stock" = "No"
Configurable product Manage Stock = "No"
Simple product /Manage Stock = "Yes" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-26T14:52:52.340

**添加此代码**

```
$this->getSelect()->joinLeft(
                array('_inventory_table'=>$this->getTable('cataloginventory/stock_item')),
                "_inventory_table.product_id = e.entity_id",
                array('is_in_stock', 'manage_stock')
            );
            $this->addExpressionAttributeToSelect('on_top',
            '(CASE WHEN (((_inventory_table.use_config_manage_stock = 1) AND (_inventory_table.is_in_stock = 1)) OR  ((_inventory_table.use_config_manage_stock = 0) AND (1 - _inventory_table.manage_stock + _inventory_table.is_in_stock >= 1))) THEN 1 ELSE 0 END)',
             array());
            $this->getSelect()->order('on_top DESC'); 
```

**行前：**

```
if ($attribute == 'price' && $storeId != 0) { 
```

**在文件中：**

**app/code/core/Mage/Catalog/Model/Resource/Eav/Mysql4/Product/Collection.php** **或 app/code/core/Mage/Catalog/Model/Product/Collection.php 如果你有 Magento 1.7.0.0 +**

# c# - 失去焦点时窗口闪烁？

> ID：16106862
> 
> 赞同：5
> 
> 时间：2013-04-19T14:21:20.597
> 
> 标签：c#, windows, winforms, visual-studio-2012

我一直在开发基于 c# 的 Windows 窗体应用程序，我需要一些帮助。当表单失去对父表单的焦点时，我正在尝试重新创建大多数 Windows 应用程序所具有的窗口闪烁。我可以解释的最好方法是打开计算器打开帮助窗口并尝试单击计算器，然后帮助窗口不落后于计算器闪烁丢失并获得边缘周围的阴影。

当单击父窗口时，我设法重新获得对子窗口的关注，但这会产生奇怪的闪烁效果，因为父窗口暂时被带到子窗口前面。我只是在猜测，但我正在寻找的效果似乎是计算器从未被带到帮助窗口前面，然后帮助窗口被简单地激活和停用几次。

我尝试进行一些搜索，并且看到了一些与此相关的主题，但没有一个解决方案完全匹配。我对制作 Windows 窗体应用程序还很陌生，所以还有一些我不明白的东西，所以如果我一开始不明白的话，请耐心等待。

先感谢您

计算器示例的详细说明：

1) 从 Windows 附件打开计算器 2) 在工具栏中转到帮助选项卡并打开关于计算器选项 3) 单击计算器窗口 4) 然后关于计算器窗口将闪烁，但不会落后于计算器

我在这方面取得的唯一进展是

```
 private void MainForm_Activated(object sender, EventArgs e)
    {
        if (Open == true)
        {
            //blink active window

            _addForm.Activate(); //makes window active
        }
    } 
```

open 变量是我用来跟踪是否打开表单的东西，当我显示另一个表单时它是真实的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T14:35:51.157

在您的示例中，关于窗口称为模式窗口。模态窗口会阻止用户与父窗口交互，直到它关闭。使用`Form.ShowDialog`而不是`Form.Show`将表单作为模式窗口呈现给用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:36:11.877

制作子窗体`modal`。这意味着必须正确关闭子级，然后才能将焦点转移回父级。

# node.js - How to export prototypes in node.js

> ID：16106871
> 
> 赞同：0
> 
> 时间：2013-04-19T14:21:59.310
> 
> 标签：node.js, export, prototype

In my `db` library file, I have:

```
exports.slave = ->
  connection = mysql.createConnection
    host: config.database.slave.host
    user: config.database.slave.username
    password: config.database.slave.password
    database: config.database.slave.database

  connection.connect()

  return connection 
```

which returns `connection` if I run `db.slave().query("WHATEVER")` and executes properly. How can I extend and export a prototype, so I can just use: `db.slave.query("WAHTEVER")` instead?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:30:44.467

The standard node convention is to export a single object. This object can whatever you want

```
var config = {
  database: ...
}
var mysql = require('mysql')
function setupSlave() {
  var connection = mysql.createConnection
    host: config.database.slave.host
    user: config.database.slave.username
    password: config.database.slave.password
    database: config.database.slave.database
  connection.connect()
  return connection
}
var slave = setupSlave()
module.exports = slave 
```

If you instead want to export `slave()` instead of `slave` you can do that as well

```
var config = {
  database: ...
}
var mysql = require('mysql')
function setupSlave() {
  var connection = mysql.createConnection
    host: config.database.slave.host
    user: config.database.slave.username
    password: config.database.slave.password
    database: config.database.slave.database
  connection.connect()
  return connection
}
var slave = setupSlave()
module.exports = slave() 
```

# ruby-on-rails-3 - NoMethodError：未定义的方法`failure_message` - 应该

> ID：16106873
> 
> 赞同：1
> 
> 时间：2013-04-19T14:22:03.420
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, shoulda

我正在尝试使用`Shoulda`以下方式测试我的用户类：

**user_test.rb**

```
require 'test_helper'
include Devise::TestHelpers

class UserTest < Test::Unit::TestCase
  should have_many(:holidays)
  should have_many(:hopsital_bookings)
  should have_and_belong_to_many(:roles)
  should belong_to(:hospital)

end 
```

用户.rb

```
 belongs_to :hospital
  belongs_to :department
  has_many :holidays
  has_many :hospital_bookings
  has_and_belongs_to_many :roles 
```

当我运行时，`rake test`我得到以下输出：[Imgur](http://i.imgur.com/ySfJ0ao.png)。

我在这里缺少的任何想法以及为什么这不起作用，因为它应该！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T02:27:10.827

看来您必须：

1）放入您的gem文件：

group :test do gem 'should' end

2）运行捆绑安装

# objective-c - 如何将已安装的设备识别为可移动设备？

> ID：16106878
> 
> 赞同：3
> 
> 时间：2013-04-19T14:22:22.120
> 
> 标签：objective-c, cocoa

如何确定已安装的设备是否可以卸载/弹出？

我试图在`NSFileManager`.

```
NSArray *keys = [NSArray arrayWithObjects:NSURLVolumeNameKey, NSURLVolumeURLForRemountingKey, NSURLVolumeIsEjectableKey, NSURLVolumeIsRemovableKey, nil];
NSArray *urls = [[NSFileManager defaultManager] mountedVolumeURLsIncludingResourceValuesForKeys:keys options:0];

for (NSURL *url in urls) 
{
NSError *error;
NSNumber *isRemovable;
NSString *volumeName; 

[url getResourceValue:&isRemovable forKey:NSURLVolumeIsRemovableKey error:&error];
[url getResourceValue:&volumeName forKey:NSURLVolumeNameKey error:&error];

NSLog(@"Standard Device : %@ - Removable: %c", volumeName, [isRemovable boolValue]);

} 
```

但是当我遍历列表时，我总是得到这个，例如：

```
Standard Device Name: My Book - isEjectable: 
```

仅供参考，“我的书”是一个 USB 驱动器。

我希望有人能指出什么是错的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:53:25.770

你想要的`NSURLVolumeIsEjectableKey`不是`NSURLVolumeIsRemovableKey`。

`NSURLVolumeIsRemovableKey`表示可以从设备中物理移除介质。 `NSURLVolumeIsEjectableKey`表示可以卸载卷。

# multithreading - 多线程将数据infile加载到同一个innodb表中可以提高性能吗？

> ID：16106881
> 
> 赞同：0
> 
> 时间：2013-04-19T14:22:27.707
> 
> 标签：multithreading, file-io, load, innodb

我做了一个测试，插入相同数量的行似乎没有明显的性能提升，2个并发线程几乎与1个单线程花费相同的时间。

有什么方法可以提高加载数据文件的性能吗？多线程是错误的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:28:07.320

如果多线程可以增加计算资源的并行使用，则可以提高性能。如果文件和数据库在同一个硬盘上，你可能不走运。如果您加载数据、计算繁重的数据然后写入数据库，您可能能够并行使用 CPU 和 HD。对于测试，创建一个线程来读取输入文件，并创建第二个线程来写入数据库（使用数据库的假数据）。如果这比读一点写一点快，那么多线程可以提高性能。我提到这一点，因为远不清楚你的测试实际上做了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:00:01.047

如果您对批量加载的数据的一致性有信心，您可能需要使用以下内容：

```
SET FOREIGN_KEY_CHECKS=0;
-- do the bulk load
SET FOREIGN_KEY_CHECKS=1; 
```

这将暂时禁用外键检查，使数据插入方式更快。关于多线程，请尝试将两个线程移至最低隔离级别：

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
-- bulk load
SET TRANSACTION ISOLATION LEVEL REPEATABLE READ; --default setting 
```

将最后一行更改为您的正常隔离级别。或者，您可以使用临时变量来存储上一个级别：

```
SET @tx_isolation_orig = @@tx_isolation;
SET @@tx_isolation = read-uncommited;
-- bulk load
SET @@tx_isolation = @tx_isolation_orig; 
```

更多信息：

*   [InnoDB 外键约束](http://dev.mysql.com/doc/refman/5.0/en/innodb-foreign-key-constraints.html)
*   [隔离级别](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)

# c - PIC 18 / RS232 接收

> ID：16106887
> 
> 赞同：0
> 
> 时间：2013-04-19T14:22:43.490
> 
> 标签：c, embedded, serial-port, pic18

我正在尝试从 RS232 连接接收一些数据（9600 kbps - 在（1）时发送“s”（并在超级终端上测试））

我正在使用 p18F8722 并在处理器上用 c 编写以下内容：

```
Open1USART ( USART_TX_INT_OFF & USART_RX_INT_OFF & USART_ASYNCH_MODE &
             USART_EIGHT_BIT &  USART_CONT_RX & USART_BRGH_HIGH, 51 );
char message =Read1USART(); 
```

当我在 LCD 上打印时，我收到错误的字符，大多数时候是 "p" "q" x (bar)...

我真的很感激任何帮助。

# zend-framework2 - ZF2 分页器性能与 fetchAll 没有限制？

> ID：16106893
> 
> 赞同：1
> 
> 时间：2013-04-19T14:23:06.733
> 
> 标签：zend-framework2, zend-paginator

**ZF2 中**的大多数情况下，我会做这样的分页器：

```
public function fetchAll()
{
 $resultSet = $this->tableGateway->select();
 return $resultSet;
}

$iteratorAdapter = new \Zend\Paginator\Adapter\Iterator($this->getSampleTable()->fetchAll());
$paginator = new \Zend\Paginator\Paginator($iteratorAdapter); 
```

**这个方法的问题是它不限制查询结果，并且 fetchAll 返回所有结果（在 db 和 php 之间产生大流量）。**

**在纯 php**中，我会做这样的分页：

```
$PAGE_NUM = $_GET['page_num'];
$result_num = mysq_query("SELECT * FROM table WHERE some condition");
$result = mysq_query("SELECT * FROM table WHERE some condition LIMIT $PAGE_NUM, 20");
echo do_paginator($result_num, 20, $PAGE_NUM);//THIS JUST MAKE THE CLASSIC < 1 2 3 4 5 > 
```

这样做的好处是，由于 mysql 中的 LIMIT 选项，我只从数据库中获取分页中需要的数据。这在返回太多记录的查询中表现良好。

**我可以使用对结果有有效限制的 ZF2 分页器，还是我需要自己制作分页器？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:54:55.680

请改用[`Zend\Paginator\Adapter\DbSelect`](http://zf2.readthedocs.org/en/release-2.1.4/modules/zend.paginator.usage.html#the-dbselect-adapter)适配器，它完全符合您的要求，将限制和偏移量应用于您开始提供的查询，并仅获取这些记录。

> 此外，此适配器不会从数据库中获取所有记录以对它们进行计数。相反，适配器会操纵原始查询以生成相应的 COUNT 查询。Paginator 然后执行该 COUNT 查询以获取行数。这确实需要额外的数据库往返，但这比获取整个结果集并使用 count() 快很多倍，尤其是在处理大量数据时。

# javascript - 如何从另一个页面获取内容

> ID：16106894
> 
> 赞同：1
> 
> 时间：2013-04-19T14:23:07.537
> 
> 标签：javascript, ajax, jquery, get

我已经为这个问题苦苦挣扎了 2 天。我找到了许多关于类似主题的教程，但没有一个可以帮助我解决我的问题。

在 Volusion 购物车上，我试图从产品页面远程获取内容并将其信息保存在变量中以在购物车上使用。我无法使用 php（Volusion 不支持）并且被迫使用 javascript 来执行此操作（据我所知）。以下代码在购物车商品中搜索某个品牌名称“Palliser”。如果该名称存在，它会获取链接，使用 ajax 向与链接关联的页面发送请求，并获取我需要的信息。它获取了我需要的信息，但在此过程中，我的页面变成了白色，并留下了 2013 年……我不知道为什么会这样。这是我第一次使用 ajax，所以有人可以帮忙！？！？

```
$(window).load(function(){
    var seat_count = 0;
    var i = 0;
    var prodLinks = [];
    var numSeats = '';

    $('b.cart-item-name:contains("Palliser")').filter(function(index) {
        prodLinks[i] = 'http://xepwk.cjvgn.servertrust.com/'+$(this).parent('a').attr('href');

        $.ajax({
            url:prodLinks[i],
            //data:string,
            async:false,
            success: function(result){
                var html = jQuery('<div>').html(result);
                var prodInfoArray = html.find('span.PageText_L660n').parent('b').parent('td').html().split('<br>');
                var numSeats = prodInfoArray[1];
                alert(numSeats);
            }
        });     

        i+=1;
}); 
```

这是一个链接，指向帮助我做到这一点的信息：[Get the content of another page's div with jQuery Ajax](https://stackoverflow.com/questions/14683736/get-the-content-of-another-pages-div-with-jquery-ajax?rq=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:41:41.670

只是一个想法，有：

```
async:false 
```

同步加载您的 ajax 请求，并且请求必须完成，然后您才能执行其他任何操作。尝试将其更改为 true 或将其删除（默认为 true）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:43:18.770

当 DOM 就绪事件触发时，您可以启动 ajax 请求。因为您不需要图像和其他人员来开始 ajax 请求。也`async:true`必须在您的情况下有所帮助。

```
var seat_count = 0;
var i = 0;
var prodLinks = [];
var numSeats = '';
$(document).ready(function() {
    $('b.cart-item-name:contains("Palliser")').filter(function(index) {
        prodLinks[i] = 'http://xepwk.cjvgn.servertrust.com/'+
            $(this).parent('a').attr('href');

        $.ajax({
            url:prodLinks[i++],
            //data:string,
            async:true,
            success: function(result){
                var html = jQuery('<div>').html(result);
                var prodInfoArray = html.find('span.PageText_L660n')
                    .parent('b').parent('td').html().split('<br>');
                var numSeats = prodInfoArray[1];
                alert(numSeats);
            }
        });     
    });
}); 
```

# python - 另一个列表合并列表，但最pythonic的方式

> ID：16106895
> 
> 赞同：2
> 
> 时间：2013-04-19T14:23:15.187
> 
> 标签：python, list

我试图找到几个选定答案的答案，但它们似乎不起作用。我必须合并列表列表。

`[[283, 311], [311, 283, 316], [150, 68], [86, 119], [259, 263], [263, 259, 267], [118, 87], [262, 264], [264, 262], [85, 115], [115, 85], [244, 89], [140, 76, 82, 99], [236, 111], [330, 168], [76, 63, 107, 124, 128, 135, 140], [131, 254], [254, 131], [21, 38], [38, 21], [220, 291], [291, 220], [296, 46], [64, 53, 57, 61, 63, 65, 66, 76, 96, 100, 103, 114, 123, 127, 128, 130, 148, 149], [274, 240], [157, 225, 234], [225, 247], [233, 44], [89, 244], [80, 101], [210, 214], [78, 155], [55, 139], [102, 74, 75, 132], [105, 252], [149, 55, 59, 63, 71, 73, 81, 100, 102, 116, 122, 138, 146], [97, 231], [231, 97], [155, 78], [239, 305], [305, 239], [145, 94, 248], [147, 150], [61, 64], [152, 219], [219, 152], [246, 250], [252, 105], [223, 235], [235, 223], [237, 60, 344], [344, 237], [182, 129], [331, 117], [12, 2, 8, 10, 13, 15], [250, 246]]`

例如，我想要的只是`[283,311]`存在于`[311,283,316]`. 那么两者都应该合并，只在上面的列表中列出一个列表。如果列表存在于其他列表中，我需要合并它。

请注意，我可以使用循环内循环来做到这一点，但正在寻找一种pythonic方式来实现这一点。此外，如果您知道如何合并共享至少一个共同元素的列表，请分享。

编辑 ：

请不要忘记，寻找pythonic方法。我认为不可能使用任何核心 Pythonic 方法。那么使用循环的下一个可能的解决方案应该是什么。我需要效率，因为必须每半小时合并超过一百万个项目的列表列表。我确实在 for 循环中使用了 for 循环，然后比较了两个项目，但这花费了太多时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T14:29:21.993

回答你的后一个问题；这是一个[连接组件](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29)问题。

```
>>> import networkx as nx
>>> G = nx.Graph()
>>> for component in l:
...:     G.add_edges_from(pairs(component))
...:     
>>> nx.connected_components(G)
# the answer 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T14:58:57.130

如果您有大量小集合，我认为这是一种替代方法，它应该比@mgilson 更快：

```
from collections import defaultdict

sets = set(map(frozenset, lists))

def remove_subsets(sets):
    # map each element to the sets in which it occurs
    sets_containing = defaultdict(set)
    for s in sets:
        for x in s:
            sets_containing[x].add(s)

    for s in sets:
        supersets = set.intersection(*(sets_containing[x] for x in s))
        if len(supersets) == 1:
            yield s 
```

不同之处主要在于最后一个循环，它不是通过所有 n(n-1)/2 个不同的集合对，而是只通过外循环中的*n 个*集合，然后通过一组包含某些元素的候选超集正在考虑的集合。它可以通过`reduce`在产生空集时停止早期来进一步优化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T14:31:44.703

我认为这行得通...

```
a = [[283, 311], [311, 283, 316], [150, 68], [86, 119], [259, 263], [263, 259, 267], [118, 87], [262, 264], [264, 262], [85, 115], [115, 85], [244, 89], [140, 76, 82, 99], [236, 111], [330, 168], [76, 63, 107, 124, 128, 135, 140], [131, 254], [254, 131], [21, 38], [38, 21], [220, 291], [291, 220], [296, 46], [64, 53, 57, 61, 63, 65, 66, 76, 96, 100, 103, 114, 123, 127, 128, 130, 148, 149], [274, 240], [157, 225, 234], [225, 247], [233, 44], [89, 244], [80, 101], [210, 214], [78, 155], [55, 139], [102, 74, 75, 132], [105, 252], [149, 55, 59, 63, 71, 73, 81, 100, 102, 116, 122, 138, 146], [97, 231], [231, 97], [155, 78], [239, 305], [305, 239], [145, 94, 248], [147, 150], [61, 64], [152, 219], [219, 152], [246, 250], [252, 105], [223, 235], [235, 223], [237, 60, 344], [344, 237], [182, 129], [331, 117], [12, 2, 8, 10, 13, 15], [250, 246]]
aa = set(map(frozenset,a))  #eliminate duplicates
result =  [x for x in aa if not any(x < y for y in aa)] 
```

请注意，这会为您提供`frozenset`对象列表，但您可以轻松地将其转换回列表列表：

```
result = [list(fset) for fset in result] 
```

不幸的是，它具有二次复杂性......我不确定是否真的有什么要做的......（将其保留为列表会导致更糟糕的复杂性 FWIW）

这是第二种方法，在算法上要好一些：

```
from itertools import takewhile
def foo2(aa):
    aa = sorted(set(map(frozenset,a)),key=len)
    def conditional(x,aa):
        xlen = len(x)
        return any(x < y for y in takewhile(lambda z: xlen <= len(z),aa))
    return [x for x in aa if not conditional(x,aa)] 
```

当然，它需要对你的真实数据进行计时，看看它是否真的表现得更好（对于测试数据，列表不够大，生成`conditional`函数和`takewhile`实例的开销`lambda`使得它不值得。

* * *

出于好奇，这是我的基准：

```
a = [[283, 311], [311, 283, 316], [150, 68], [86, 119], [259, 263], [263, 259, 267], [118, 87], [262, 264], [264, 262], [85, 115], [115, 85], [244, 89], [140, 76, 82, 99], [236, 111], [330, 168], [76, 63, 107, 124, 128, 135, 140], [131, 254], [254, 131], [21, 38], [38, 21], [220, 291], [291, 220], [296, 46], [64, 53, 57, 61, 63, 65, 66, 76, 96, 100, 103, 114, 123, 127, 128, 130, 148, 149], [274, 240], [157, 225, 234], [225, 247], [233, 44], [89, 244], [80, 101], [210, 214], [78, 155], [55, 139], [102, 74, 75, 132], [105, 252], [149, 55, 59, 63, 71, 73, 81, 100, 102, 116, 122, 138, 146], [97, 231], [231, 97], [155, 78], [239, 305], [305, 239], [145, 94, 248], [147, 150], [61, 64], [152, 219], [219, 152], [246, 250], [252, 105], [223, 235], [235, 223], [237, 60, 344], [344, 237], [182, 129], [331, 117], [12, 2, 8, 10, 13, 15], [250, 246]]

def foo1(aa):
    aa = set(map(frozenset,a))  #eliminate duplicates
    return [x for x in aa if not any(x < y for y in aa)]

from itertools import takewhile
def conditional(x,aa,takewhile=takewhile):
    xlen = len(x)
    return any(x < y for y in takewhile(lambda z: xlen <= len(z),aa))

def foo2(aa):
    aa = sorted(set(map(frozenset,a)),key=len)
    return [x for x in aa if not conditional(x,aa)]

print set(foo1(a)) == set(foo2(a))

import timeit
N = 10000
print timeit.timeit('foo1(a)','from __main__ import foo1,a',number=N)
print timeit.timeit('foo2(a)','from __main__ import foo2,a',number=N) 
```

# javascript - 重置特定 div 的 CSS 样式

> ID：16106896
> 
> 赞同：1
> 
> 时间：2013-04-19T14:23:15.457
> 
> 标签：javascript, html, css, styles, reset

我有一个链接到几个 CSS 文件的 Wordpress。我有一个特定的 div，它有自己的自定义样式（与主要的 Wordpress 样式无关）。然而，Wordpress CSS 搞乱了我自定义 div 的样式。在 HTML/CSS/Javascript/jQuery 中有什么方法可以告诉某个 HTML 元素简单地忽略所有以前的样式？

我尝试使用 CSS 重置样式表 ( [http://www.cssreset.com/](http://www.cssreset.com/) )，它们过滤掉了一些 Wordpress 样式，但我的大部分自定义 div 仍然一团糟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:27:54.000

您始终可以直接在元素上设置特定的 css 样式。直接应用于 dom 元素的样式将始终优先于任何样式表中指定的样式。

**例子**

```
<div id="myid"></div> 
```

通过 JavaScript 将颜色样式直接应用于此元素

```
document.getElementById('myid').style.color = "#FF0000"; 
```

只有在一段时间后另一段 JavaScript 更改所述属性时才会覆盖它。

如果样式表声明它们很重要，您可能需要这样做

```
document.getElementById('myid').style.color = "#FF0000 !important"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-29T07:37:45.147

您可以在要隔离的元素上添加更多类，并通过将其类链接在一起在 CSS 中选择它。

例如，对于以下四个`<div>`元素：

```
.container {
    width: 50px;
    height: 50px;
    margin: 1em;
    border: 1px solid black;
}

/* You can add more properties. */
.red.container {
    background: red;
}

/* You can overwrite properties. */
.round.red.container {
    border-radius: 100%;
    border-color: red;
}

/* You can remove properties. */
.blank.round.red.container {
    border-radius: unset;
    background: unset;
    margin: unset;
}
```

```
<div class="container"></div>
<div class="red container"></div>
<div class="round red container"></div>
<div class="blank round red container"></div>
```

# java - 在多模块 maven 项目中使用不同的 orm.xml 配置

> ID：16106897
> 
> 赞同：4
> 
> 时间：2013-04-19T14:23:23.993
> 
> 标签：java, spring, hibernate, maven, jpa

我有一组基于分层架构定义的maven项目，如下：

1-域

```
-src/main/java
-src/main/resources/META-INF/
-src/test/java
-src/test/resources/META-INF/ 
```

2- 存储库（取决于域）

```
-src/main/java
-src/main/resources/META-INF/
-src/test/java
-src/test/resources/spring/my-appcontext.xml
-src/test/resources/META-INF/orm.xml 
```

我在存储库层的单元测试将 DbUnit 与 hsql 内存数据库结合使用。持久化配置基于JPA/Hibernate，通过spring配置。下面是我在测试中使用的弹簧配置示例：

```
<!-- our datasource -->
<bean id="myDatasource"
  class="org.springframework.jdbc.datasource.DriverManagerDataSource">
  <property name="driverClassName" value="${datasource.driverClassName}" />
  <property name="url" value="${datasource.url}" />
  <property name="username" value="${datasource.username}" />
  <property name="password" value="${datasource.password}" />
</bean>

<!-- let hibernate be in between the database and JPA -->
<bean id="myJpaVendorAdapter"
   class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
   <property name="database" value="${jpa.database}" />
   <property name="showSql" value="${jpa.showSql}" />
   <property name="generateDdl" value="${jpa.generateDdl}" />
   <property name="databasePlatform" value="${jpa.databasePlatform}" />
</bean>
<!-- entityManagerFactory - CONTAINER-managed -->
<bean id="entityManagerFactory"
      class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
      p:dataSource-ref="molecularanalysisDatasource"
      p:mappingResources="${jpa.orm}"
      p:packagesToScan="com.mypackages.domain">
      <property name="jpaVendorAdapter" ref="myJpaVendorAdapter" />
      <property name="jpaProperties">
    <props>
      <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}</prop>
      <prop key="hibernate.showSql">${hibernate.showSql}</prop>
      <prop key="hibernate.formatSql">${hibernate.formatSql}</prop>
      <prop key="dialect">${hibernate.dialect}</prop>
      <prop key="hibernate.connection.driver_class">${datasource.driverClass}</prop>
          <prop key="hibernate.connection.url">${datasource.url}</prop>
      <prop key="hibernate.connection.username">${datasource.username}</prop>
      <prop key="hibernate.connection.password">${datasource.password}</prop>
    </props>
      </property>
</bean>
<bean id="dbUnitDatabaseConfig"    
   class="com.github.springtestdbunit.bean.DatabaseConfigBean">
   <property name="qualifiedTableNames" value="true" />
</bean>
<bean id="dbUnitDatabaseConnection"
   class="com.github.springtestdbunit.bean.DatabaseDataSourceConnectionFactoryBean">
 <property name="dataSource" ref="myDatasource" />
 <property name="databaseConfig" ref="dbUnitDatabaseConfig" />
 <property name="schema" value="${datasource.schema}" />
</bean> 
```

我在测试范围内使用的 orm.xml 确保表是在默认目录名称 PUBLIC 下的 hsqldb 中创建的。换句话说，在测试范围内使用 orm.xml 确保我的测试不关心域实体上定义的特定目录/模式名称，而只使用 hsqldb 下的默认目录（这是因为 hsql 只允许一个目录，即 PUBLIC）在测试期间创建表时。

当我使用 Eclipse 运行测试时，可以找到“src/test/resources/META-INF/orm.xml”下的 orm.xml，并且 entitymanagerfactory 使用它在 hsqldb 中创建表。但是，如果我使用 maven 运行测试，则不会拾取 orm.xml，因此 entitymanager 会尝试使用真实的目录和模式名称创建我的表（实体），这在 hsqldb 中将失败，因为它只有一个目录，即PUBLIC。

在 spring 中启用调试后，我注意到这是因为 entitymanagerfactory 在配置 Jpa/Hibernate 和持久性对象时使用不同的“root Url”来搜索配置文件。

在通过 Eclipse 运行测试的情况下，实体管理器使用可以找到 META-INF/orm.xml 的“target/test-classes/”目录。在通过 Maven 运行测试的情况下，实体管理器使用 domain.jar，其中不包括 META-INF/orm.xml（因为这仅在集成模块内的测试中定义）。在调试信息下方：

1-通过 Eclipse 运行测试：

```
 [main] DEBUG - Processing PersistenceUnitInfo [
    name: default
    persistence provider classname: null
    classloader: sun.misc.Launcher$AppClassLoader@35a16869
    Temporary classloader:
        org.springframework.instrument.classloading.SimpleThrowawayClassLoader@706f2039
         excludeUnlistedClasses: true
         JTA datasource: null
         Transaction type: RESOURCE_LOCAL
         PU root URL: file:/C:/DEVELOPMENT/project/integration/test-classes/
         Shared Cache Mode: UNSPECIFIED
         Validation Mode: AUTO
         Jar files URLs [] 
```

2-通过Maven运行测试：

```
[main] DEBUG - Processing PersistenceUnitInfo [
   name: default
    persistence provider classname: null
    classloader: sun.misc.Launcher$AppClassLoader@35a16869
    Temporary classloader:
    org.springframework.instrument.classloading.SimpleThrowawayClassLoader@706f2039
    excludeUnlistedClasses: true
    JTA datasource: null
    Transaction type: RESOURCE_LOCAL
    PU root URL: file:/C:/DEVELOPMENT/project/maven-repository/domain/domain.jar
    Shared Cache Mode: UNSPECIFIED
    Validation Mode: AUTO
    Jar files URLs [] 
```

我无法工作的是如何让 entitymanager 在扫描 orm.xml 文件时包含 META-INF/orm.xml。有谁知道如何在 Maven 中进行测试？将此 orm.xml 添加到域 (src/main/resources/META-INF) 将无济于事，因为此设置仅应在测试上下文中使用。

# plugins - Jenkins 中的 Gerrit-trigger 插件是如何工作的？

> ID：16106898
> 
> 赞同：13
> 
> 时间：2013-04-19T14:23:25.947
> 
> 标签：plugins, jenkins, gerrit

我想了解 Jenkins 中的 gerrit-trigger 是如何详细工作的？此外，如何调用触发的 cose 的测试？

谢谢，

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-25T04:07:14.150

gerrit 触发器的工作原理如下：

1.  它使用 ssh 连接到 gerrit 服务器并使用 gerrit stream-events 命令

2.  然后它在数据进入时观察这个流

3.  它将尝试将事件与您的项目中定义的触发器相匹配

潜在的陷阱：

1.  Jenkins 用户的 ssh 凭据不正确

2.  Jenkins 用户没有流事件权限

如何检查：

1.  以詹金斯用户身份登录

2.  ssh -p 29418 jenkins@your.domain.com gerrit 流事件

3.  将提交推送到服务器，您应该会在流中看到内容

问题：

1.  ssh 连接失败？设置你的 ssh 密钥对

2.  没有流媒体对吗？转到 All-Projects->Access 并在 Global Capabilities 下将 Stream Events 添加到 Non-Interactive Users 组

# git - git p4 rebase 尝试重新应用过去的提交

> ID：16106900
> 
> 赞同：2
> 
> 时间：2013-04-19T14:23:31.300
> 
> 标签：git, perforce, git-p4

我遇到了 git p4 rebase 问题，我不知道如何开始诊断问题，更不用说问题是什么了。

所以我有一个 git-p4 从 perforce 工作区克隆的 git repo，它被用作远程 repo 以充当桥梁，因此团队可以针对一个远程 repo 使用 git，然后定期，我可以将 repo 的更改推送回工作区。

通常工作流程是这个人在主分支上，进行编辑，`git -a commit`s，`git pull`再次，然后将`git push`它们发送到远程仓库，或者他们创建一个分支，然后在他们完成后将该分支合并回来然后将主分支推送到远程。如果他们需要超过一天的时间，他们可能会偶尔将分支向上推。

当我将东西推回 perforce 时，我在远程仓库中运行以下命令

```
git checkout -f
git clean -f
git p4 rebase --import-labels
git p4 submit -M --export-labels
git checkout -f
git clean -f 
```

远程仓库不是裸露的，这就是我在前后运行结帐和清理的原因

基本上不时地，在更改被推回后，当我执行 git p4 rebase 时，我收到以下错误

```
Performing incremental import into refs/remotes/p4/master git branch
Depot paths: //depot/sub/folder/
No changes to import!
Rebasing the current branch onto remotes/p4/master
First, rewinding head to replay your work on top of it...
Applying: A commit that has already been made previously
Applying: A second commit that has already been made in a previous commit
Using index info to reconstruct a base tree...
<stdin>:15: space before tab in indent.
                            a line of text
<stdin>:24: space before tab in indent.
                another line of text
<stdin>:25: space before tab in indent.
                a third line of text
<stdin>:33: trailing whitespace.
        a forth line of text
<stdin>:71: trailing whitespace.

warning: squelched 1 whitespace error
warning: 6 lines add whitespace errors.
Falling back to patching base and 3-way merge...
Auto-merging file from second
CONFLICT (content): Merge conflict in a/file/in/the/second/pre-existing/commit/file.php
Auto-merging a/file/in/the/second/pre-existing/commit/file.php
Failed to merge in the changes.
Patch failed at 0002 A second commit that has already been made in a previous commit

When you have resolved this problem run "git rebase --continue".
If you would prefer to skip this patch, instead run "git rebase --skip".
To check out the original branch and stop rebasing run "git rebase --abort".

Traceback (most recent call last):
  File "/usr/lib/git-core/git-p4", line 3373, in <module>
    main()
  File "/usr/lib/git-core/git-p4", line 3367, in main
    if not cmd.run(args):
  File "/usr/lib/git-core/git-p4", line 3150, in run
    return self.rebase()
  File "/usr/lib/git-core/git-p4", line 3167, in rebase
    system("git rebase %s" % upstream)
  File "/usr/lib/git-core/git-p4", line 183, in system
    raise CalledProcessError(retcode, cmd)
subprocess.CalledProcessError: Command 'git rebase remotes/p4/master' returned non-zero exit status 1 
```

所以我有很多问题，在这里，当它执行 git rebase 时`git p4 rebase`，它​​会重新应用一些已经应用到远程仓库的提交，这些提交已经从以前的`git p4 rebase`. 重复提交从何而来？为什么它仍然试图通过 repo 重放它们？

当我在 repo 的工作副本中检查文件时，它与工作区相同，因为自上次`git p4 rebase`. 结果`git rebase --continue`并没有真正做任何事情。

唯一的解决方案是运行`git rebase --skip`，但是当我这样做时，当我随后运行时会出现相同的消息，并且每次`git p4 rebase`都必须重新运行。`git rebase --skip`真让人生气。

有时，我不完全确定在通过此消息后，它实际上会如何在我运行时将提交推送到 p4 工作区，`git p4 submit`从而导致重复的 p4 提交和混乱的文件。我相信它会在我跑步时发生`git rebase --continue`，`git rebase --skip`然后`git p4 submit`

当我检查 git 日志时，HEAD 通常在 master 之前提交，但是如何？

然后偶尔错误会再次消失，我无法弄清楚它消失的确切条件。

我什至如何开始解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:24:05.067

我想我仍然对你的工作流程感到困惑。您是直接将提交推送到 Perforce，还是推送到正在运行的原始 git 存储库`git p4 submit`。如果你是后者，那么我认为这是你的主要问题。您需要将本地更改直接推送到 Perorce，然后将所有内容与`git p4 rebase`. 当您执行 a`git p4 submit`时，新的提交会在被推送到 perforce 之前进行修改，这就是为什么您不能先推送到另一个 git 存储库的原因。

如果您始终`p4 submit`来自创建提交的客户端计算机，则您的错误可能是由 Perforce 端的用户名/电子邮件不匹配引起的。每个 git commit sha1 都基于使用作者电子邮件和提交日期（以及其他内容），如果这些值发生变化，那么它可能`git-p4 rebase`会生成与本地不同的 sha1 并为您提供该错误消息。

`git-p4`试图通过创建一个 perforce 用户名到电子邮件映射文件来弥补这一点。我忘记了这个文件保存在哪里，但是如果你松开它，那么 git-p4 会感到困惑，并尝试重新应用你已经拥有的提交。

因此，解决方案不是在 perforce 方面更改 emails 值，或者其他任何可能混淆的东西`git-p4`。如果您在 perforce 中更改电子邮件，那么您必须确保保留原始映射文件，直到您从头开始重新导入所有提交。

# php - PHP 读取 JSON-POST-Request 并将它们发回

> ID：16106902
> 
> 赞同：0
> 
> 时间：2013-04-19T14:23:33.247
> 
> 标签：php, jquery, json, post

我尝试使用 PHP 读取 JSON-POST-Request，但出现以下错误。

> 请求失败：parsererror

这是我的代码

```
 <script type="text/javascript" charset="utf-8" src="resources/js/model/Product.js"></script>
<script>
    function getdetails(){

        var p = new Product(15,11.5,"Pizza Test","P");
        var z = new Product(68,1.5,"Zutate Test","Z");

        p.addOneProduct(z);

        var request = $.ajax({
            type: "POST",
            url: "yb_test_post.php",
            dataType: "json",
            data: JSON.stringify(p)
        });

        request.done(function(msg) {
            $("#msg").html( " Post parameter are: <br/>"+msg );
        });

        request.fail(function(jqXHR, textStatus) {
            alert( "Request failed: " + textStatus );
        });
    }
</script> 
```

和我的 PHP 代码，我尝试阅读 POST 请求并立即打印

```
 <table>
<?php

    foreach ($_POST as $key => $value) {
        echo "<tr>";
        echo "<td>";
        echo $key;
        echo "</td>";
        echo "<td>";
        echo $value;
        echo "</td>";
        echo "</tr>";
    }

?>
</table> 
```

我错了什么？

产品.js

```
function Product(id, price, name, type){
    this.id = id;
    this.price = +price;
    this.totalPrice = +price;
    this.name = name;
    this.type = type;
    this.products = [];
    var self = this;

    this.addOneProduct = function(oneProduct){
        self.products.push(oneProduct);
        self.totalPrice= self.totalPrice+oneProduct.price;
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:28:28.463

你在做`data: JSON.stringify(p)`。这是发送一个 JSON 字符串作为帖子正文。你不想要这个。PHP 不会自动为您解析。您想向 PHP 发送一个查询字符串，这将使 PHP 自动将其解析到`$_POST`数组中。

失去`JSON.stringify`，然后试试这个：`data: p`。

另外，`dataType: "json"`是***响应***`Content-type`的，而不是***请求***的。你的 PHP 正在发回 HTML，所以你想要：.**`dataType: "html"`**

 **```
var request = $.ajax({
    type: "POST",
    url: "yb_test_post.php",
    dataType: "html",
    data: p
}); 
```**

# java - 将结果集转换为字符串数组

> ID：16106914
> 
> 赞同：8
> 
> 时间：2013-04-19T14:24:04.217
> 
> 标签：java, arrays, oracle11g, resultset

我需要将我的结果集转换为字符串数组。我正在从数据库中读取电子邮件地址，我需要能够像这样发送它们：

```
message.addRecipient(Message.RecipientType.CC, "abc@abc.com,abc@def.com,ghi@abc.com"); 
```

这是我阅读电子邮件地址的代码：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

public class Test {

    public static void main(String[] args) {
        Connection conn = null;
        String iphost = "localhost";
        String dbsid = "ASKDB";
        String username = "ASKUL";
        String password = "askul";

        try {
            Class.forName("oracle.jdbc.driver.OracleDriver");
            String sql = "SELECT * FROM EMAIL";
            conn = DriverManager.getConnection("jdbc:oracle:thin:@" + iphost + ":1521:" + dbsid, username, password);
            Statement st = conn.createStatement();
            ResultSet rs = st.executeQuery(sql);
            String[] arr = null;
            while (rs.next()) {
                String em = rs.getString("EM_ID");
               arr = em.split("\n");
               for (int i =0; i < arr.length; i++){
                   System.out.println(arr[i]);
               }
            }
        } catch (Exception asd) {
            System.out.println(asd);
        }
    }
} 
```

我的输出是：

```
myemailaddress@abc.com
myotheremail@abc.com 
```

我需要这样的：

```
myemailaddress@abc.com,myotheremail@abc.com 
```

我正在使用 Oracle 11g。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T14:26:52.513

获得所需的输出：

替换这些行

```
String[] arr = null;
while (rs.next()) {
    String em = rs.getString("EM_ID");
    arr = em.split("\n");
    for (int i =0; i < arr.length; i++){
        System.out.println(arr[i]);
    }
} 
```

经过

```
String arr = null;
while (rs.next()) {
    String em = rs.getString("EM_ID");
    arr = em.replace("\n", ",");
    System.out.println(arr);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T14:26:30.450

```
System.out.println(arr[i]); 
```

而是使用：

```
System.out.print(arr[i] + ","); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:22:41.337

```
import java.util.List;
import java.util.ArrayList;

List<String> listEmail = new ArrayList<String>();

while (rs.next()) {
    listEmail.add(rs.getString("EM_ID"));
}
//listEmail,toString() will look like this: [abc@abc.com, abc@def.com]
//So lets replace the brackets and remove the whitspaces
//You can do this in less steps if you want:
String result = listEmail.toString();
       result = result.replace("[", "\"");
       result = result.replace("]", "\"");
       result = result.replace(" ", "");

//your result: "abc@abc.com,abc@def.com"
//If the spaces are e problem just use the string function to remove them 
```

顺便说一句，就隐私而言，您可能应该使用 BCC 而不是 CC....

你也不应该使用 SELECT * FROM foo; 更好地使用 SELECT EM_ID FROM foo; 这使您在一个巨大的表中显着提高了性能，因为 ResultSet 只包含您真正需要和使用的信息......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T14:37:31.770

如果我理解正确你想在一行中看到输出，用逗号作为分隔符。然后代替

```
System.out.println(arr[i]); 
```

尝试

```
System.out.print(arr[i]+","); 
```

并以某种方式删除最后一个逗号。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T14:30:48.020

你不需要`arr = em.split("\n");`，因为你正在遍历每一行（假设 1 行 = 1 个电子邮件地址）你只需要这个：

```
 ArrayList<String> arr = new ArrayList<String>();
        while (rs.next()) {
           arr.add(rs.getString("EM_ID"));
           System.out.println(arr.get(arr.size()-1));
        } 
```

# scripting - 如何使用 VBS 将 ping 写入文本文件

> ID：16106933
> 
> 赞同：0
> 
> 时间：2013-04-19T14:25:14.237
> 
> 标签：scripting, vbscript, ping, writetofile

如果我使用 VBS 来运行一些 CMD 命令，在这个示例中是 ping，我如何使用 VBS 而不是 DOS 将命令写入文本文件？

```
Set objCmdTest = WScript.CreateObject ("WScript.Shell")
Set Output = CreateObject("Scripting.FileSystemObject").OpenTextFile("C:\vbs\test.txt",8,true)

Output.WriteLine (objCmdTest.run ("ping failboat"))
Output.WriteLine (objCmdTest.run ("ping 8.8.8.8")) 
```

所以这就是我正在使用的东西，但是会发生什么；脚本运行，文件生成，打开 2 个命令提示符以运行 ping，最后文件内的文本显示为：

```
0
0 
```

当我更喜欢它有 ping 输出时。

仅供参考：请不要提供需要我使用 DOS 进行写作的建议，我想看看 VBS 如何能够出于多种原因完成我需要的工作，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:01:22.997

该指令`Output.WriteLine (objCmdTest.run ("ping failboat"))`将方法的返回值写入输出*文件*`Run`。如果要将命令输出附加到输出文件，则必须在命令中重定向输出：

```
objCmdTest.run "%COMSPEC% /c ping failboat >>C:\vbs\test.txt", 0, True 
```

或使用[`Exec`](http://msdn.microsoft.com/en-us/library/ateytk4a)代替`Run`：

```
Set ping = objCmdTest.Exec("ping failboat")
Do While ping.Status = 0
  WScript.Sleep 100
Loop
Output.WriteLine ping.StdOut.ReadAll 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:59:51.880

WScript.Shell 的 run 方法返回进程的退出代码。为了访问应用程序的输出，您需要改用[exec](http://msdn.microsoft.com/en-us/library/ateytk4a%28v=vs.84%29.aspx)方法，并使用返回的对象通过其[StdOut](http://msdn.microsoft.com/en-us/library/cbxxzwb5%28v=vs.84%29.aspx)属性访问进程的标准输出。

# ios - 无法识别的选择器发送到实例错误与应用内购买产品

> ID：16106941
> 
> 赞同：3
> 
> 时间：2013-04-19T14:25:32.273
> 
> 标签：ios, objective-c, in-app-purchase

我有一个`UITableView`用户可以从中选择自定义声音。我有 3 个 IAP 非消耗品，我根据`index.section`用户从中选择的逻辑内置了逻辑。逻辑上的`UIToolbarButton`更改（用户可以单独`IBAction`保存选择，但前提是他们“购买”了产品）：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    // Pull identifiers for IAP
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    bool alarmpackpurchased = [defaults boolForKey:@"Alarm_Pack"];
    bool annoyancepackpurchased = [defaults boolForKey:@"Annoyance_Pack"];
    bool serenepackpurchased = [defaults boolForKey:@"Serene_Pack"];

    // Defualt index will always be allowed to save
    if(indexPath.section == 0) {
        savebuybutton.enabled = YES;
        savebuybutton.title = @"Save";
        savebuybutton.tintColor = [UIColor blueColor];
    }
    else {

        if (indexPath.section == 1 && alarmpackpurchased == TRUE) {
            savebuybutton.enabled = YES;
            savebuybutton.title = @"Save";
            savebuybutton.tintColor = [UIColor blueColor];
        }
        else if (indexPath.section == 2 && annoyancepackpurchased == TRUE) {
            savebuybutton.enabled = YES;
            savebuybutton.title = @"Save";
            savebuybutton.tintColor = [UIColor blueColor];
        }
        else if (indexPath.section == 3 && serenepackpurchased == TRUE) {
            savebuybutton.enabled = YES;
            savebuybutton.title = @"Save";
            savebuybutton.tintColor = [UIColor blueColor];
        }

        else {
            savebuybutton.enabled = YES;
            savebuybutton.title = @"Buy Pack";
            savebuybutton.tintColor = [UIColor redColor];
        }
    }
} 
```

这是`viewWillAppear:`通知观察者的方法：

```
- (void)viewWillAppear:(BOOL)animated {
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(productPurchased:) name:IAPHelperProductPurchasedNotification object:nil];
} 
```

这是我在完成此产品的 IAP 后收到的错误：

```
2013-04-19 10:08:12.086 SleepLabBeta[43395:c07] -[AlarmSelectViewController productPurchased:]: unrecognized selector sent to instance 0x11444940
2013-04-19 10:08:12.125 SleepLabBeta[43395:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[AlarmSelectViewController productPurchased:]: unrecognized selector sent to instance 0x11444940'
*** First throw call stack:
(0x1bf5012 0x1666e7e 0x1c804bd 0x1be4bbc 0x1be494e 0x11274f9 0x1c4f0c5 0x1ba9efa 0x105bbb2 0x1f57a 0x1f0b3 0x1eeae 0x924b1 0x1b978fd 0x92437 0x930fa 0x93d27 0x922a4 0x227653f 0x2288014 0x22787d5 0x1b9baf5 0x1b9af44 0x1b9ae1b 0x1a3e7e3 0x1a3e668 0x5aaffc 0x297d 0x28a5)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:26:56.823

您可能没有`productPurchased`在`productPurchased`. 还要确保注册通知的 viewController 实现了这个方法。如果方法是在另一个类中定义的，则更改该行以适合您的 className 而不是 self。

```
 [[NSNotificationCenter defaultCenter] addObserver:yourClassObject selector:@selector(productPurchased:) name:IAPHelperProductPurchasedNotification object:nil]; 
```

在`viewDidLoad`方法中添加观察者而不是`viewWillAppear`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:28:09.610

我认为您没有`productPurchased`在`AlarmSelectViewController`.

**注意：**您可以在某处实施。找到并纠正它。

# asp.net - 使用来自 ajax (jquery) 的 ASP.Net 类对象（asp.net 项目是 WCF 服务）

> ID：16106943
> 
> 赞同：0
> 
> 时间：2013-04-19T14:25:37.333
> 
> 标签：asp.net, ajax, json, wcf

我有一个 WCF 服务，它从客户端（jquery 网页）发送字符串列表。当我使用 F5 运行 wcf 项目时，wcf 项目在 Visual Studio 中运行完美，一个窗口正在打开，我在看到下面的列表对象后单击 Invoke调用。我将在 jquery 中使用我的列表数据，所以我使用 ajax 来调用我的 wcf 服务，所有配置设置都是正确的。我正在使用`abc`具有可验证列表的类，并且我有一个函数 data 将一些数据设置到该列表。这是我的服务合同和数据合同表格 WCF(IService1.cs)：

```
namespace kgms
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json)]
        abc data(abc obj);
   }
   [DataContract]
        public class abc {
            [DataMember]
            public List<string> sval { get; set; }
            [DataMember]
            public List<string> kval { get; set; }
        }
} 
```

这是我的数据函数信息（Service1.svc.cs）：

```
namespace kgms
{
   [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class Service1 : IService1
    {
       public abc data(abc obj) {
               obj.sval.Add("asd");
               obj.sval.Add("sdf");
               obj.kval.Add("example");
               obj.kval.Add(":-)");
            return obj;
        }
    }
} 
```

我将从该 ajax 调用访问：

```
$('#buton').click(function () {
Type = "POST";
            Url = "http://compname/sil/Service1.svc/data";
            ContentType = "application/json; charset=utf-8";
            DataType = "json"; var ProcessData = true;
            CallService();

        });
 function CallService() {
            $.ajax({
                type: Type,
                url: Url,
                data: Object,
                contentType: ContentType,
                dataType: DataType,
                processdata: ProcessData,
                success: function (msg) {
                    ServiceSucceeded(msg);
                },
                error: ServiceFailed
            });
        }
        function ServiceFailed(result) {
            alert("basarisiz");
            alert('Service call failed: ' + result.status + '' + result.statusText);
            Type = null; varUrl = null; Data = null; ContentType = null; DataType = null; ProcessData = null;
        }
        function ServiceSucceeded(result) {
            alert("good");
        }
    }); 
```

我必须用 Object 发送什么参数`Data: Object`是样本，必须写什么而不是 Object。因为我的 WCF 函数采用 abc 类对象，我该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:49:04.727

希望这对你有帮助。

```
 var abcCtor = function() {
     this.sval  = [];
     this.kval  = [];
 }

 var mainObj = function() {
    this.abc = new abcCtor();
 }

 var abcObj = new mainObj();
    abcObj.abc.sval.push('name');
    abcObj.abc.sval.push('age');

    abcObj.abc.kval.push('jhonatas');
    abcObj.abc.kval.push('00');

var jsonValue = JSON.stringify(abcObj); 
```

然后，将 jsonValue 传递给 $ajax 的参数 Data。

**编辑：**

简单做：

```
 public abc data() {
               obj.sval.Add("asd");
               obj.sval.Add("sdf");
               obj.kval.Add("example");
               obj.kval.Add(":-)");
            return obj;
        } 
```

并从 $ajax 中省略 Data 参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:48:29.453

嗨，请关注这篇文章，它将帮助您 [使用 Jquery AJAX 的 WCF REST 服务](http://www.codeproject.com/Articles/128478/Consuming-WCF-REST-Services-Using-jQuery-AJAX-Call)

# javascript - 在 80 以外的端口中运行 socket.io 时出现问题

> ID：16106946
> 
> 赞同：0
> 
> 时间：2013-04-19T14:25:53.347
> 
> 标签：javascript, html, node.js, socket.io, port

我在端口 80 上运行 express.js，所以 socket.io 必须在其他端口上运行。问题是，然后，我必须在客户端上加载 socket.io：

```
<script src="http://my_domain:8080/socket.io/socket.io.js"></script> 
```

这太可怕了，因为每次从本地机器切换到主机时，我都必须更改 my_domain。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:27:09.277

> 我在端口 80 上运行 express.js，所以 socket.io 必须在其他端口上运行。

错误的。

你可以在同一个端口上运行 Socket.io 和 Express；只需将相同`http.Server`的实例传递给他们两个。

# php - URL转换（链接和urldecode）

> ID：16106948
> 
> 赞同：1
> 
> 时间：2013-04-19T14:26:07.227
> 
> 标签：php

我想问2个关于php中url转换的问题。

1 个问题：我需要将文本转换为链接。我已经完成了自己的 preg 并且还阅读了许多论坛，但所有解决方案都与 www 连接。或 (ht|f)tp(s)，但我需要 preg 来转换域名，即使文本中没有 www 和 http，例如：

```
I like stackoverflow.com very much 
```

进入

```
I like <a href='http://stackoverflow.com'>stackoverflow.com</a> very much 
```

当然它必须考虑点和逗号等，例如：

```
I like stackoverflow.com. 
```

进入

```
I like <a href='http://stackoverflow.com'>stackoverflow.com</a>. 
```

还有一个问题：wiki 上带有 url 编码符号的链接按原样显示，但在其他网站上，它们显示为 url 编码字符串 (%XX%XX%XX)。维基是如何做到这一点的？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:31:03.950

`auto_link`from函数`CodeIgniter URL helper`可以帮助你：

```
if ( ! function_exists('auto_link'))
{
    function auto_link($str, $type = 'both', $popup = FALSE)
    {
        if ($type != 'email')
        {
            if (preg_match_all("#(^|\s|\()((http(s?)://)|(www\.))(\w+[^\s\)\<]+)#i", $str, $matches))
            {
                $pop = ($popup == TRUE) ? " target=\"_blank\" " : "";

                for ($i = 0; $i < count($matches['0']); $i++)
                {
                    $period = '';
                    if (preg_match("|\.$|", $matches['6'][$i]))
                    {
                        $period = '.';
                        $matches['6'][$i] = substr($matches['6'][$i], 0, -1);
                    }

                    $str = str_replace($matches['0'][$i],
                                        $matches['1'][$i].'<a href="http'.
                                        $matches['4'][$i].'://'.
                                        $matches['5'][$i].
                                        $matches['6'][$i].'"'.$pop.'>http'.
                                        $matches['4'][$i].'://'.
                                        $matches['5'][$i].
                                        $matches['6'][$i].'</a>'.
                                        $period, $str);
                }
            }
        }

        if ($type != 'url')
        {
            if (preg_match_all("/([a-zA-Z0-9_\.\-\+]+)@([a-zA-Z0-9\-]+)\.([a-zA-Z0-9\-\.]*)/i", $str, $matches))
            {
                for ($i = 0; $i < count($matches['0']); $i++)
                {
                    $period = '';
                    if (preg_match("|\.$|", $matches['3'][$i]))
                    {
                        $period = '.';
                        $matches['3'][$i] = substr($matches['3'][$i], 0, -1);
                    }

                    $str = str_replace($matches['0'][$i], safe_mailto($matches['1'][$i].'@'.$matches['2'][$i].'.'.$matches['3'][$i]).$period, $str);
                }
            }
        }

        return $str;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:31:59.740

对于您的第一个问题，我不建议您这样做，很难知道包含点的单词是否是域名，并且人们经常忘记在段落中间的点后放一个空格.

对于您的第二个问题，这很简单，您对 href 中的链接进行 url 编码，但不在打开和关闭标签之间。例如 ：

```
<a href="http://site.na/test.php?t=sqdl%2654%22dfd%C2%B0%3D%2B">http://site.na/test.php?t=sqdl&54"dfd°=+</a> 
```

# javascript - 方法中可能的无限递归？

> ID：16106952
> 
> 赞同：0
> 
> 时间：2013-04-19T14:26:21.150
> 
> 标签：javascript, ajax

在下面的代码中，为什么会造成可能的无限递归，为什么内存使用量不断增加，如何解决？

```
function waitForKeyElements (selectorTxt, actionFunction) {
    if (getElementByXPath(selectorTxt) == null) {
       var timeControl = setInterval (function () {
                    waitForKeyElements (selectorTxt, actionFunction);
                },
                300
            );
    } else {
        clearInterval (timeControl);
        actionFunction();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:28:02.727

该变量对于函数的`timeControl`每次*调用*`waitForKeyElements()`都是本地的- 即`timeControl`您设置的将不是`timeControl`您清除的。换句话说，您开始使用的计时器`setInterval`将永远不会被清除。

将它移到函数之外应该可以解决它。

IE

```
var timeControl = -1;

function waitForKeyElements (selectorTxt, actionFunction) {
    if (getElementByXPath(selectorTxt) == null) {
       timeControl = setInterval (function () {
                    waitForKeyElements (selectorTxt, actionFunction);
                },
                300
            );
    } else {
        if(timeControl !== -1) clearInterval (timeControl);
        actionFunction();
    }
} 
```

此外，正如用户 Prinzhorn 在评论中指出的那样，在每次调用中使用 setInterval 启动计时器肯定会很麻烦。你*真的*应该做一个 setTimeout 来确保事情不会失控。

# javascript - Flot 显示来自 unix 的错误日期

> ID：16106955
> 
> 赞同：0
> 
> 时间：2013-04-19T14:26:30.597
> 
> 标签：javascript, unix, date, flot

我有一个浮动图表，应该在其工具提示中显示两个日期。我有这两个unix时代，

```
 [data] => 2013-04-17
        [unix] => 1366167600 
```

和

```
 [data] => 2013-04-18
        [unix] => 1366254000 
```

如您所见，它们代表日期 2013-04-17 和 2013-04-18。

我的图表绘制得很好，但它的工具提示显示相同的错误日期：1970-01-16

有什么猜测吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:31:55.127

Javascript 日期对象使用毫秒，而不是秒。尝试将您的 unix 时间戳乘以 1000。

# java - 写入 AsynchronousSocketChannel 并以基于事件的方式处理数据

> ID：16106957
> 
> 赞同：0
> 
> 时间：2013-04-19T14:26:42.317
> 
> 标签：java, sockets, events, asynchronous, serversocket

我试图弄清楚如何在 Java 中的套接字之间发送数据（这是一个更大项目的一部分，一旦我能解决这个问题，我会回来回答我之前的两个与此相关的问题..）。我想用Java异步连接一个客户端和一个服务器套接字，然后在它们之间发送消息，并得到一个回调，比如当我从客户端向服务器发送消息时。

我想我已经设法让设置正常工作。这是我的代码：

```
private AsynchronousServerSocketChannel socListener;
private AsycnchrnonousSocketChannel socClient;

//This is the GUI callback for the button that initiates the socket server
private void button_StartSocketServerActionPerformed(ava.awt.event.ActionEvent evt)
{
    try{
        InetAddress ipLocal= InetAddress.getLocalHost(); 
        InetSocketAddress ipSocket=new InetSocketAddress(ipLocal,8221);

        m_socListener= AsynchronousServerSocketChannel.open().bind(ipSocket);

        m_socListener.accept(null, new CompletionHandler<AsynchronousSocketChannel,Void>() 
                                   {
                                       @Override
                                       public void completed(AsynchronousSocketChannel ch, Void att) 
                                       {
                                            // accept the next connection
                                            m_socListener.accept(null, this);
                                            // handle this connection
                                       }
                                       @Override
                                       public void failed(Throwable exc, Void att)  { }
                                   }
                             );
        }
        catch (Exception e){ 
        }
}

//This is the GUI callback for the button that initiates the client socket
private void button_StartClientSocketActionPerformed(java.awt.event.ActionEvent evt) 
{
     try
     {
        socClient=AsynchronousSocketChannel.open();

        InetAddress ipLocal= InetAddress.getLocalHost();
        InetSocketAddress ipSocket=new InetSocketAddress(ipLocal,8221);
        socClient.connect(ipSocket, null, new CompletionHandler<Void,Void>() 
                                   {
                                       @Override
                                       public void completed(Void att1, Void att2) 
                                       {
                                            // handle this connection
                                       }
                                       @Override
                                       public void failed(Throwable exc, Void att) {}
                                   }
                            );
    }
    catch (Exception e){  
    }
} 
```

为了简化测试，我将服务器和客户端包含在同一个文件中。

因此，假设连接已成功建立，并且我有一个正在将数据写入服务器套接字的计时器（例如）进程，我想让客户端套接字“侦听”从服务器发送的这些新数据和然后在发生写入时生成回调（无需执行诸如通过计时器和 while 循环定期检查以检查是否已添加新数据之类的操作）。这可以在 C# 中完成，并且可以在以下位置获得一个很好的教程：http: [//www.developerfusion.com/article/3918/socket-programming-in-c-part-1/2/](http://www.developerfusion.com/article/3918/socket-programming-in-c-part-1/2/)

任何有关如何做到这一点的提示将不胜感激。谢谢！克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:42:58.303

您可以使用 RMI 来完成此操作，可以在此处找到文档： [http ://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html)

有了这个，您的服务器可以根据需要通知您的客户端。

# asp.net-mvc-3 - MVC3中Webgrid行的内联编辑

> ID：16106959
> 
> 赞同：8
> 
> 时间：2013-04-19T14:26:48.103
> 
> 标签：asp.net-mvc-3, save, add, webgrid, inline-editing

```
 public class UserDetailsModel
    {
        public int ID { get; set; }
        public string LoginID { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string IsDeleted { get; set; }
        public DateTime CreatedOn { get; set; }
    } 
```

控制器：

```
public ActionResult Index()
        {
           object  model = obj.getUserList();
            return View(model);
        }

        public ActionResult Delete(int id)
        {
            BAL_obj.deleteUser(id);
            object model = obj.getUserList();
            return View("Index",model);
        } 
```

索引.cshtml：

```
@model IEnumerable<WebGrid1App.Models.UserDetailsModel>

@{
     WebGrid grid = new WebGrid(Model);

}
<h2>People</h2>

@grid.GetHtml(
    headerStyle: "headerStyle",
    tableStyle: "tableStyle",
    alternatingRowStyle: "alternateStyle", 

    fillEmptyRows: true,

    mode: WebGridPagerModes.All,
    firstText: "<< First",
    previousText: "< Prev",
    nextText: "Next >",
    lastText: "Last >>",
    columns: new [] {

        grid.Column("ID",header: "ID"),
        grid.Column("LoginId",header:"LoginID"),

        grid.Column("FirstName", canSort: false),
        grid.Column("LastName"),

        grid.Column("CreatedOn", 
                    header: "CreatedOn",
                    format: p=>p.CreatedOn.ToShortDateString()
        ),

        grid.Column("", 
                    header: "Actions",
                    format: @<text>
                                @Html.ActionLink("Edit",   "Edit",   new { id=item.ID} )
                                |
                                @Html.ActionLink("Delete", "Delete", new { id=item.ID} )
                            </text>
        )
}) 
```

我已经完成了删除操作。如何在同一页面上编辑一行并将更改保存到数据库中？

会有编辑按钮。当您单击它时，行将是可编辑的。同时编辑链接文本更改为保存链接。现在，当您单击保存时，需要更新行。

我想做内联编辑。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T17:07:25.890

你可以使用 AJAX。首先将 webGrid 包装成一个允许编辑记录的 html 表单：

```
@using (Html.BeginForm("Update", null, FormMethod.Post, new { @class = "updateForm" }))
{
    @grid.GetHtml(
        headerStyle: "headerStyle",
        tableStyle: "tableStyle",
        alternatingRowStyle: "alternateStyle",
        fillEmptyRows: true,
        mode: WebGridPagerModes.All,
        firstText: "<< First",
        previousText: "< Prev",
        nextText: "Next >",
        lastText: "Last >>",
        columns: new[] 
        {
            grid.Column("ID",header: "ID"),
            grid.Column("LoginId",header:"LoginID"),
            grid.Column("FirstName", canSort: false),
            grid.Column("LastName"),
            grid.Column("CreatedOn", 
                header: "CreatedOn",
                format: p=>p.CreatedOn.ToShortDateString()
            ),
            grid.Column("", 
                header: "Actions",
                format: @<text>
                    @Html.ActionLink("Edit", "Edit", new { id = item.ID }, new { @class = "edit" })
                    |
                    @Html.ActionLink("Delete", "Delete", new { id = item.ID })
                </text>
            )
        }
    )
} 
```

然后你可以有 2 个部分，一个用于编辑，一个用于显示单个记录。

`EditUserDetailsModel.cshtml`：

```
@model UserDetailsModel

<td>@Html.EditorFor(x => x.ID)</td>
<td>@Html.EditorFor(x => x.LoginID)</td>
<td>@Html.EditorFor(x => x.FirstName)</td>
<td>@Html.EditorFor(x => x.LastName)</td>
<td>@Html.EditorFor(x => x.CreatedOn)</td>
<td> 
    <button type="submit">Update</button>
</td> 
```

`DisplayUserDetailsModel`：

```
@model UserDetailsModel

<td>@Html.DisplayFor(x => x.ID)</td>
<td>@Html.DisplayFor(x => x.LoginID)</td>
<td>@Html.DisplayFor(x => x.FirstName)</td>
<td>@Html.DisplayFor(x => x.LastName)</td>
<td>@Html.DisplayFor(x => x.CreatedOn)</td>
<td> 
    @Html.ActionLink("Edit", "Edit", new { id = Model.ID }, new { @class = "edit" })
    |
    @Html.ActionLink("Delete", "Delete", new { id = Model.ID })
</td> 
```

然后我们可以有相应的控制器动作：

```
public ActionResult Edit(int id)
{
    UserDetailsModel model = repository.Get(id);
    return PartialView("EditUserDetailsModel", model);
}

[HttpPost]
public ActionResult Update(UserDetailsModel model)
{
    repository.Update(model);
    return PartialView("DisplayUserDetailsModel", model);
} 
```

最后是让这个活着的javascript：

```
$('table').on('click', '.edit', function () {
    $.ajax({
        url: this.href,
        type: 'GET',
        cache: false,
        context: $(this).closest('tr'),
        success: function (result) {
            $(this).html(result);
        }
    });
    return false;
});

$('.updateForm').on('submit', function () {
    $.ajax({
        url: this.action,
        type: this.method,
        data: $(this).serialize(),
        context: $('input', this).closest('tr'),
        success: function (result) {
            $(this).html(result);
        }
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T09:57:04.013

[使用 ajax](https://stackoverflow.com/a/16133858/3309474)的答案可以正常工作 - 但您必须注意，此处多行可以同时处于编辑模式。

只允许编辑一行（使用较少的 ajax 请求）的解决方案是： [http ://www.c-sharpcorner.com/UploadFile/cd7c2e/create-an-editable-webgrid-in-mvc4-to-implement-crud-操作/](http://www.c-sharpcorner.com/UploadFile/cd7c2e/create-an-editable-webgrid-in-mvc4-to-implement-crud-operati/)

# ruby-on-rails - 数据库编辑后无法在我的 Heroku 应用程序上查看用户配置文件

> ID：16106960
> 
> 赞同：0
> 
> 时间：2013-04-19T14:26:51.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, authentication, heroku

我刚刚在 Heroku 上为我的应用创建了一个管理员配置文件。为此，我使用 pgAdminIII 进入我的 Heroku 生产数据库，如此处所述[，](https://stackoverflow.com/questions/11769860/connect-to-a-heroku-database-with-pgadmin)在数据库中我只是将我的用户配置文件的管理字段更改为`true`.

到目前为止，它一直有效，我在大多数应用程序中都具有管理员访问权限，但是当我尝试在应用程序上查看我的管理员配置文件时，我收到错误**消息，我们很抱歉，但出了点问题。** 当我使用普通用户配置文件登录时，我仍然可以轻松查看该配置文件。

heroku 日志说有一个`undefined method 'name'`，但我不明白这个错误，因为当我尝试访问我的生产环境或开发环境中的任何地方的其他配置文件时，它没有显示。

我确实有一个`if current_user.try(:admin?)`条件，`users/show.html.erb`但这并没有在我的开发环境中抛出任何错误。

我不确定这里出了什么问题，我是 Web 开发的新手，通过 pgAdmin 编辑生产数据库是不好的做法吗？它似乎在工作中扔了一把扳手。

**管理员配置文件 GET 的 Heroku 日志**

```
2013-04-19T14:06:10.911478+00:00 app[web.1]: => Booting WEBrick
2013-04-19T14:06:10.911478+00:00 app[web.1]: => Rails 3.2.12 application starting in production on http://0.0.0.0:54611
2013-04-19T14:06:10.911478+00:00 app[web.1]: => Call with -d to detach
2013-04-19T14:06:10.911478+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-04-19T14:06:10.911478+00:00 app[web.1]: Started GET "/users/1" for 86.47.2.244 at 2013-04-19 14:06:10 +0000
2013-04-19T14:06:11.037505+00:00 app[web.1]: Processing by UsersController#show as HTML
2013-04-19T14:06:11.037505+00:00 app[web.1]:   Parameters: {"id"=>"1"}
2013-04-19T14:06:11.439430+00:00 app[web.1]: Completed 500 Internal Server Error in 402ms
2013-04-19T14:06:11.441222+00:00 app[web.1]: ActionView::Template::Error (undefined method `name' for nil:NilClass):
2013-04-19T14:06:11.441222+00:00 app[web.1]:     28:           <tr>
2013-04-19T14:06:11.441222+00:00 app[web.1]:     29:           <% @user.photos.each do |photo| %>
2013-04-19T14:06:11.441222+00:00 app[web.1]:     30:             <td class='user_pics'>
2013-04-19T14:06:11.439430+00:00 app[web.1]:   Rendered users/show.html.erb within layouts/application (283.4ms)
2013-04-19T14:06:11.441222+00:00 app[web.1]:     33:               <%= link_to t('.destroy', :default => t("helpers.links.destroy")), photo_path(photo),:method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },:class => 'btn btn-mini btn-danger' %>
2013-04-19T14:06:11.441222+00:00 app[web.1]:     34:             </td>
2013-04-19T14:06:11.441222+00:00 app[web.1]: 
2013-04-19T14:06:11.441222+00:00 app[web.1]:     31:               <h6><%= get_hike_name_by_photo(photo.hikingtrail_id) %></h6>
2013-04-19T14:06:11.441495+00:00 app[web.1]:   app/views/users/show.html.erb:31:in `block in _app_views_users_show_html_erb__1466921769571898123_36255720'
2013-04-19T14:06:11.441222+00:00 app[web.1]:   app/helpers/users_helper.rb:4:in `get_hike_name_by_photo'
2013-04-19T14:06:11.441222+00:00 app[web.1]:     32:               <%= image_tag photo.image_url(:thumb).to_s %> <br />
2013-04-19T14:06:11.441495+00:00 app[web.1]: 
2013-04-19T14:06:11.441495+00:00 app[web.1]:   app/views/users/show.html.erb:29:in `_app_views_users_show_html_erb__1466921769571898123_36255720'
2013-04-19T14:06:11.441495+00:00 app[web.1]: 
2013-04-19T14:06:11.445147+00:00 heroku[router]: at=info method=GET path=/users/1 host=hiking-project.herokuapp.com fwd="86.47.2.244" dyno=web.1 connect=1ms service=548ms status=500 bytes=643 
```

**非管理员配置文件 GET 的 Heroku 日志**

```
2013-04-19T14:07:42.861730+00:00 app[web.1]:   Parameters: {"id"=>"2"}
2013-04-19T14:07:42.857372+00:00 app[web.1]: Started GET "/users/2" for 86.47.2.244 at 2013-04-19 14:07:42 +0000
2013-04-19T14:07:42.861675+00:00 app[web.1]: Processing by UsersController#show as HTML
2013-04-19T14:07:42.889420+00:00 app[web.1]:   Rendered users/show.html.erb within layouts/application (24.2ms)
2013-04-19T14:07:42.900768+00:00 app[web.1]:   Rendered layouts/_navbar.html.erb (2.2ms)
2013-04-19T14:07:42.901987+00:00 app[web.1]: Completed 200 OK in 40ms (Views: 28.3ms | ActiveRecord: 11.0ms)
2013-04-19T14:07:42.901785+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.6ms)
2013-04-19T14:07:42.905317+00:00 heroku[router]: at=info method=GET path=/users/2 host=hiking-project.herokuapp.com fwd="86.47.2.244" dyno=web.1 connect=1ms service=53ms status=200 bytes=6621
2013-04-19T14:07:43.100688+00:00 heroku[router]: at=info method=GET path=/assets/application-5343b16e766707937994ff5eeed67d4a.css host=hiking-project.herokuapp.com fwd="86.47.2.244" dyno=web.1 connect=2ms service=6ms status=304 bytes=0
2013-04-19T14:07:43.209119+00:00 heroku[router]: at=info method=GET path=/assets/application-2f6741be57170d2a4f223dd28b4827c8.js host=hiking-project.herokuapp.com fwd="86.47.2.244" dyno=web.1 connect=0ms service=4ms status=304 bytes=0
2013-04-19T14:07:43.263057+00:00 heroku[router]: at=info method=GET path=/uploads/photo/image/12/thumb_View_from_spink.jpg host=hiking-project.herokuapp.com fwd="86.47.2.244" dyno=web.1 connect=0ms service=25ms status=404 bytes=728
2013-04-19T14:07:43.256301+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/11/thumb_spink_sleepers.jpg"):
2013-04-19T14:07:43.256301+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:32:in `call_app'
2013-04-19T14:07:43.256301+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-04-19T14:07:43.256301+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `block in call'
2013-04-19T14:07:43.256566+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:479:in `call'
2013-04-19T14:07:43.261546+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-04-19T14:07:43.261546+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-04-19T14:07:43.256817+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
2013-04-19T14:07:43.256817+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-04-19T14:07:43.256817+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-04-19T14:07:43.261546+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-04-19T14:07:43.261546+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-04-19T14:07:43.261546+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-04-19T14:07:43.261546+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-04-19T14:07:43.256566+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-04-19T14:07:43.256566+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-04-19T14:07:43.256566+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-04-19T14:07:43.261546+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-04-19T14:07:43.261546+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-04-19T14:07:43.261546+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:479:in `call'
2013-04-19T14:07:43.261295+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-04-19T14:07:43.256301+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2013-04-19T14:07:43.261295+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:32:in `call_app'
2013-04-19T14:07:43.256301+00:00 app[web.1]: 
2013-04-19T14:07:43.261755+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:223:in `call'
2013-04-19T14:07:43.261755+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
2013-04-19T14:07:43.261755+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
2013-04-19T14:07:43.261295+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `call'
2013-04-19T14:07:43.256301+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-04-19T14:07:43.256301+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `call'
2013-04-19T14:07:43.256817+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
2013-04-19T14:07:43.261755+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
2013-04-19T14:07:43.261
755+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-04-19T14:07:43.261295+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `block in call'
2013-04-19T14:07:43.256301+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
2013-04-19T14:07:43.256817+00:00 app[web.1]: 
2013-04-19T14:07:43.261755+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-04-19T14:07:43.261755+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-04-19T14:07:43.256566+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
2013-04-19T14:07:43.248790+00:00 app[web.1]: Started GET "/uploads/photo/image/11/thumb_spink_sleepers.jpg" for 86.47.2.244 at 2013-04-19 14:07:43 +0000
2013-04-19T14:07:43.256817+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
2013-04-19T14:07:43.261295+00:00 app[web.1]: 
2013-04-19T14:07:43.261295+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-04-19T14:07:43.256817+00:00 app[web.1]: 
2013-04-19T14:07:43.258182+00:00 app[web.1]: Started GET "/uploads/photo/image/12/thumb_View_from_spink.jpg" for 86.47.2.244 at 2013-04-19 14:07:43 +0000
2013-04-19T14:07:43.261295+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-04-19T14:07:43.261295+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/12/thumb_View_from_spink.jpg"):
2013-04-19T14:07:43.261295+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2013-04-19T14:07:43.261295+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
2013-04-19T14:07:43.256301+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-04-19T14:07:43.256566+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-04-19T14:07:43.261755+00:00 app[web.1]: 
2013-04-19T14:07:43.261755+00:00 app[web.1]: 
2013-04-19T14:07:43.256566+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-04-19T14:07:43.256817+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:223:in `call'
2013-04-19T14:07:43.256817+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-04-19T14:07:43.261546+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
2013-04-19T14:07:43.256566+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-04-19T14:07:43.256566+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-04-19T14:07:43.256566+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-04-19T14:07:43.257395+00:00 heroku[router]: at=info method=GET path=/uploads/photo/image/11/thumb_spink_sleepers.jpg host=hiking-project.herokuapp.com fwd="86.47.2.244" dyno=web.1 connect=0ms service=12ms status=404 bytes=728 
```

**用户/show.html.erb**

```
<div class="page-header">
  <h1 class='float_left'>Your Profile</h1>
  <%= link_to "Edit your Profile", edit_user_path(current_user), :class => 'btn btn-primary float_right' %>
  <div class='clear_float'></div>
</div>

<p>
  <b>username:</b>
  <%= @user.user_name %>
</p>

<p>
  <b>email:</b>
  <%= @user.email %>
</p>

<div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
        Your Photos
      </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse in">
      <div class="accordion-inner">
        <table>
          <tr>
          <% @user.photos.each do |photo| %>
            <td class='user_pics'>
              <h6><%= get_hike_name_by_photo(photo.hikingtrail_id) %></h6>
              <%= image_tag photo.image_url(:thumb).to_s %> <br />
              <%= link_to t('.destroy', :default => t("helpers.links.destroy")), photo_path(photo),:method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },:class => 'btn btn-mini btn-danger' %>
            </td>
          <% end %>
          </tr>
        </table>
      </div>
    </div>
  </div>

    <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
        Hikes You Created
      </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse">
      <div class="accordion-inner">
       <table class="table table-striped">
          <thead>
            <tr>
              <th>Name</th>
              <th>Brief Description</th>
              <th style="min-width:120px;">Location</th>
              <th>Country</th>
              <th>Looped</th>
              <th style="min-width:100px;">Duration</th>
              <th></th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
        <% @user.hikingtrails.each do |hikingtrail| %><tr>
            <tr>
                <td><%= link_to hikingtrail.name, hikingtrail_path(hikingtrail) %></td>
                <td><%= truncate(hikingtrail.description, :length => 95, :separator => ' ') %></td>
                <!-- <td><%= hikingtrail.description %></td> -->
                <td><%= hikingtrail.addr_2.capitalize %>, <%= hikingtrail.addr_3.capitalize %></td>
                <td><%= hikingtrail.country %></td>
                <td><%= boolean_to_yes_or_no(hikingtrail.looped) %></td>
                <td><%= hikingtrail.duration_hours %>hrs <%= hikingtrail.duration_mins %>mins</td>
                <td>
                  <%= link_to t('.edit', :default => t("helpers.links.edit")),edit_hikingtrail_path(hikingtrail), :class => 'btn btn-mini' %>
                  <% if current_user.try(:admin?) %>
                  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                              hikingtrail_path(hikingtrail),
                              :method => :delete,
                              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                              :class => 'btn btn-mini btn-danger' %>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:06:26.580

每个`hikingtrail`人都有`name`价值吗？当您收到`NilClass`错误时，这意味着您正在尝试调用不存在的东西。在这种情况下`undefined method 'name' for nil:NilClass`，意味着您要求的`name`是不在数据库中的。检查这一行：

```
<td><%= link_to hikingtrail.name, hikingtrail_path(hikingtrail) %></td> 
```

并将其更改为：

```
<td><%= link_to hikingtrail.name, hikingtrail_path(hikingtrail) if hikingtrail.name.present? %></td> 
```

# javascript - Benefits of creating new modules in my application

> ID：16106962
> 
> 赞同：4
> 
> 时间：2013-04-19T14:26:55.797
> 
> 标签：javascript, angularjs

Could anyone explain me what is the pourpuse of create new modules in angularjs application, I have already read the documentation, but we are not quite sure about when is appropiate to create a new module or use our own application module when you create a new service, directive, etc..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T10:43:44.783

I would like to add some thoughts after reading a bit more about the subject:

JAndy, you are right in the general concept, but to be more specific in when do you have to use angularjs modules I think I got a clear answer in this [post](http://cliffmeyers.com/blog/2013/4/21/code-organization-angularjs-javascript)

Basically we have 3 ways of structuring our angularjs projects:

1.  angular-seed
2.  Yeoman
3.  Structure the project in Modules

Depending of how big is your project you can take one aproach or another.

Basically writing new modules in angularjs helps you to pack functionalities that are related, one of the advantages of this approach is if a new developer comes into your team he can get a general overview and find things easier than if you only have one module, another one is to reuse functionality accross other projects.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:33:33.623

I'd like to answer this question in a more general style than being specific.

Why was the ISS not build as *one* gigantic station instead of multiple independent modules ? The reason behind modules is to separate responsibilities, decouple a construction, etc. In terms of programming it means to have logic, spread over multiple small modules. That way, you not only know exactly where to look if anything goes wrong or you need to extend some functionality, it'll also guarantee that your whole ISS( your application ) will not entirely fail if one of your modules fails. This of course, also requires certain aspects of programming styles, most important in this context, to hold module interaction and communication *loosely coupled* (which I just assume).

So whenever you want to implement new stuff, which does not fit in any other existent code or module, you should create a new, independent module, which is specialized to fulfill a certain task.

Even if I'm not using AngularJS on regular bases, I'm sure the same idea of modularization will fit in there.

# arrays - 使用 Perl 在目录中创建文件数组时处理隐藏文件

> ID：16106966
> 
> 赞同：2
> 
> 时间：2013-04-19T14:27:04.590
> 
> 标签：arrays, perl, directory, hidden-files

我正在使用 Perl。我正在目录中制作一组文件。以点开头的隐藏文件位于我的数组的开头。我想实际上忽略并跳过这些，因为我不需要它们在数组中。这些不是我要查找的文件。

问题的解决似乎很容易。只需使用正则表达式来搜索和排除隐藏文件。这是我的代码：

```
opendir(DIR, $ARGV[0]);                             
my @files = (readdir(DIR)); 
closedir(DIR);  

print scalar @files."\n"; # used just to help check on how long the array is

for ( my $i = 0; $i < @files; $i++ )
    {
     # ^ as an anchor, \. for literal . and second . for match any following character

     if ( $files[ $i ] =~ m/^\../ || $files[ $i ] eq '.' ) #
        {
         print "$files[ $i ] is a hidden file\n";

         print scalar @files."\n";  
        }

    else
       {
         print $files[ $i ] . "\n";
       }

    } # end of for loop 
```

这会产生一个数组`@files`，并向我显示目录中的隐藏文件。下一步是从数组中删除隐藏文件`@files`。所以使用这个`shift`函数，像这样：

```
opendir(DIR, $ARGV[0]);                             
my @files = (readdir(DIR)); 
closedir(DIR);  

print scalar @files."\n"; # used to just to help check on how long the array is

for ( my $i = 0; $i < @files; $i++ )
    {
     # ^ as an anchor, \. for literal . and second . for match any following character

     if ( $files[ $i ] =~ m/^\../ || $files[ $i ] eq '.' ) #
        {
         print "$files[ $i ] is a hidden file\n";
         shift @files;
         print scalar @files."\n";  
        }

    else
       {
         print $files[ $i ] . "\n";
       }

    } # end of for loop 
```

我得到了意想不到的结果。我的期望是脚本将：

1.  制作数组`@files`，
2.  扫描该数组以查找以点开头的文件，
3.  找到一个隐藏文件，告诉我它找到了一个，然后立即`shift`将它从数组的前端移开`@files`，
4.  然后向我报告 的大小或长度`@files`，
5.  否则，只需打印我真正感兴趣使用的文件的名称。

第一个脚本工作正常。该脚本的第二个版本，即使用`shift`功能从 中删除隐藏文件的脚本，`@files`确实找到了第一个隐藏文件（. 或当前目录）并将其关闭。它不会向我报告父目录 ..。它也没有找到当前在我的目录中的另一个隐藏文件来测试。该隐藏文件是一个 .DS_store 文件。但另一方面，它确实找到了一个隐藏的 .swp 文件并将其移出。

我无法解释这一点。为什么脚本对当前目录工作正常。但不是父母目录..？而且，为什么脚本对隐藏的 .swp 文件有效，但对隐藏的 .DS_Store 文件无效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T14:31:38.923

移动文件后，您的索引`$i`现在指向以下文件。

您可以使用`grep`删除名称以点开头的文件，无需移位：

```
my @files = grep ! /^\./, readdir DIR; 
```

# php - 为什么必须手动抛出异常？

> ID：16106973
> 
> 赞同：0
> 
> 时间：2013-04-19T14:27:26.780
> 
> 标签：php, c++, exception, divide-by-zero

我已经在 PHP 和 C++ 中尝试过这个，所以我的问题只针对它们。为什么我们必须自己`throw`抛出异常并且当异常问题发生时它们不会自动抛出。

**PHP 代码优先**

```
<?php 
try{ 
$a=1;
$b=0;
echo $a/$b;
} catch (Exception $e) { 
    echo "Error : ".$e->getMessage();
} 
?> 
```

为什么这段代码不会抛出除以零异常？可以通过以下方式完成

```
<?php 
  try{ 
    $a=1;
    $b=0;
    if($b==0)
    {
          throw new Exception("What's the point in an exception if its not automatic and i have to throw it myself");
    }
    echo $a/$b;
    } catch (Exception $e) { 
        echo "Error : ".$e->getMessage();
    } 
?> 
```

但是，如果我必须自己为可能的异常编写代码，那么异常处理的意义何在，那么为什么不使用任何简单的错误报告模式呢？

以下同样适用

**C++ 代码**

```
int main()
{
try{ 
    int a=1;
    int b=0;
    cout<<(a/b);
  }
   catch (string e)
     {
         cout << e << endl;
     }
} 
```

如果没有进行异常处理，这不会产生异常，会产生运行时错误并使应用程序崩溃。以下作品

```
int main()
{
try{ 
    int a=1;
    int b=0;
    if(b==0)
    {
     throw string("What's the point in an exception if its not automatic and i have to throw it myself");
    }
    cout<<(a/b);
  }
  catch (string e)
  {
     cout << e << endl;
  }
} 
```

**问题**

为什么我必须手动检查这些变量才能发现错误？当我已经告诉代码这会发生时，异常真的是异常吗？那为什么优先于基本`if`条件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:34:23.233

至少 C++ 的原因是因为检查零除数然后抛出和处理 expetion 会严重影响某些系统的性能。因此，根据 C++ 标准，除以零是未定义的行为。

## 5.6 乘法运算符

> 4 二元 / 运算符产生商，二元 % 运算符产生第一个表达式除以第二个表达式的余数。如果 / 或 % 的第二个操作数为零，则行为未定义。对于整数操作数，/ 运算符产生代数商，其中任何小数部分被丢弃；81 如果商 a/b 可以用结果类型表示，则 (a/b)*b + a%b 等于 a；否则，a/b 和 a%b 的行为都是未定义的

某些实现确实会引发异常。但是，如果使用不同的编译器编译代码，则可能会导致意想不到的结果。例如查看msvc 中的[SEH](http://msdn.microsoft.com/en-us/library/ms681409%28v=vs.85%29.aspx)

## 5 表达式

> 4 如果在计算表达式期间，结果未在数学上定义或不在其类型的可表示值范围内，则行为未定义。[注意：大多数现有的 C++ 实现忽略整数溢出。**除以零的处理，使用零除数形成余数，所有浮点异常因机器而异，通常可以通过库函数进行调整。**——尾注]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:35:15.507

```
<?php

function exception_error_handler($errno, $errstr, $errfile, $errline ) {
    throw new ErrorException($errstr, $errno, 0, $errfile, $errline);
}
set_error_handler("exception_error_handler");

try{
    $a=1;
    $b=0;
    echo $a/$b;
} catch (Exception $e) {
    echo "Error : ".$e->getMessage();
} 
```

输出：

```
Error : Division by zero 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:32:11.773

无法与 PHP 对话，但在 C++ 中，代码被编译为带有 CPU 指令的本机代码。它没有进行任何高级处理，因此生成的异常对于这样的原始操作没有意义。此外，这种类型的验证会减慢数学运算的速度。异常的缺点是性能。

当然，PHP 的设计者也可能不想在简单的数学运算中检查输入错误对性能造成影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T14:50:10.440

在 POSIX 操作系统上的 C/C++ 中（出于所有实际目的，除了 Windows 之外的所有应用程序），`SIGFPE`只要“执行了非法算术运算”（例如被零除），就会向应用程序发送一个信号。您将使用`signal`系统调用为此安装处理程序。

但是，信号与异常不同，您不能仅仅从信号处理程序中开始抛出异常——信号处理程序在与其余代码不同的帧中执行。

# xcode - 在 MacPorts 中安装 Boost 端口

> ID：16106975
> 
> 赞同：0
> 
> 时间：2013-04-19T14:27:32.687
> 
> 标签：xcode, macos, boost, port, macports

我刚刚安装了 MacPorts 并正在尝试安装 boost 端口。当我输入：

```
sudo port install boost 
```

但是，我收到一条错误消息

```
Unable to open port: invalid command name "compiler.blacklist" 
```

我该如何解决这个问题？当我尝试在 Pallet 中进行安装时，选择安装并按“开始”后没有任何反应。

感谢您提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:07:52.860

您正在运行一个过时版本的 MacPorts。运行`sudo port selfupdate`。如果失败，您可以尝试使用`sudo port -d selfupdate`. 如果这没有帮助，您可以使用 MacPorts 网站上的最新安装程序来更新您的安装。

# c# - Automapper 从 List 映射到 IEnumerable >>

> ID：16106981
> 
> 赞同：0
> 
> 时间：2013-04-19T14:27:45.773
> 
> 标签：c#, automapper

我目前使用代码从匿名类型映射地图属性

```
Mapper.CreateMap<T, CBoxItem>()
   .ForMember(m => m.Prop1, x => x.MapFrom(Prop1Source.Compile()));

 //followed by
 Mapper.Map(src, new List<CBoxItem>)

 //where  Prop1Source= Expression<Func<T, object>> 
```

我想为来自道具源的多个属性执行此操作-以下也可以

```
 Mapper.CreateMap<T, ListCboxItem>()
        .ForMember(m => m.Prop1, x => x.MapFrom(Prop1Source.Compile()));
        .ForMember(m => m.Prop2, x => x.MapFrom(Prop2Source.Compile())); 
```

当我想映射 where`PropXSource = List<Expression<Func<T1, object>>>`并且目标属性是`IEnumerable`. 我有点卡在那里。

我想遍历表达式并将表达式结果的映射添加到 ienumerable 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:38:54.067

不是一个很好的答案，但是对于更复杂的可枚举不使用自动映射器更容易。只需使用每个循环的嵌套手动复制它。

因此，要回答我的问题，据我所知，不建议在这种情况下使用 automapper。我最终使用嵌套循环将属性从 T 手动复制到 ListCboxItem

# vb.net - 使用 Visual Studio 中的 FileUpload 工具上传图像

> ID：16106982
> 
> 赞同：0
> 
> 时间：2013-04-19T14:27:51.983
> 
> 标签：vb.net, image, upload

我正在创建一个内容管理系统（CMS），我被要求包括图片上传，图片的要求如下：

```
Check that the image in JPEG or PNG format. 
Check to see that an image with the same filename isn’t already stored on your site.
Check that the image file is under 150K in size and the image is no greater than 400 X 400 pixels (if not the image must be resized to that specification).
The image must be stored in a folder and not in the database itself
The image must referenced in a relevant database table 
```

到目前为止，我有以下代码：

```
 Protected Sub btnUpload_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnUpload.Click
    Dim filename As String

    Dim img As System.Drawing.Image = System.Drawing.Image.FromFile(Server.MapPath("~/Images/Property/") + filename)
    Dim width As Integer = img.Size.Width
    Dim height As Integer = img.Size.Height
    If PhotoUploadControl.PostedFile.ContentLength < 153600 Then
        If PhotoUploadControl.HasFile Then
            If PhotoUploadControl.PostedFile.ContentType = "image/jpeg" Then
                If PhotoUploadControl.PostedFile.ContentLength < 153600 Then
                    Try
                        filename = Path.GetFileName(PhotoUploadControl.FileName)
                        PhotoUploadControl.SaveAs(Server.MapPath("~/Images/Property/") + filename)
                        StatusLabel.Text = "Upload status: File uploaded!"
                    Catch ex As Exception
                        StatusLabel.Text = "Upload status: The file could not be uploaded. The following error occured: " + ex.Message
                    End Try
                Else
                    StatusLabel.Text = "Please upload an image"
                End If
            Else
                StatusLabel.Text = "Please upload an image less than 150k"
            End If
        End If
    End If

End Sub 
```

有谁知道我会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:53:12.830

150K => 表示 150 KiloByte。内容长度以字节为单位设置，因此将是 (150 * 1024) => 153600

至于图像的尺寸，您可以这样做：

```
Dim img as System.Drawing.Image= System.Drawing.Image.FromFile(Server.MapPath("~/Images/NewAdmin/") + filename)

Dim width as Integer = img.Size.Width
Dim height as Integer = img.Size.Height 
```

之后你检查它的尺寸

# sql - 如何在 LINQ 中编写相当于 SQL LEFT JOIN 的内容？

> ID：16106985
> 
> 赞同：0
> 
> 时间：2013-04-19T14:27:54.327
> 
> 标签：sql, linq

我需要将此 SQL 转换为 LINQ，并且非常感谢一些帮助。

```
SELECT * FROM Adx_eventSet AS es
LEFT JOIN afx_eventsponsor_eventSet AS spon
ON es.Adx_eventId = spon.adx_eventid 
```

我试过这个，但它不是左连接，所以只得到一个结果。

```
from t in Adx_eventSet
join x in adx_eventsponsor_eventSet on t.Adx_eventId equals x.adx_eventid
select t 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:52:23.967

你想用`DefaultIfEmpty()`. 见下文。

```
var leftJoin = from adx_event in Adx_eventSet
               join adx_eventsponsor in adx_eventsponsor_eventSet
               on adx_event.Adx_eventId equals adx_eventsponsor.adx_eventid into j 
               from adx_eventsponsor in j.DefaultIfEmpty()
               select new 
               { 
                   Name = adx_event.Name,
                   Name = adx_eventsponsor != null ? adx_eventsponsor.Name : null  
               }; 
```

假设每个表都有一个`Name`属性。

# c++ - 计算 int 在文件中出现的次数

> ID：16106987
> 
> 赞同：1
> 
> 时间：2013-04-19T14:27:56.873
> 
> 标签：c++, file, file-io, counter

我正在制作一个简单的程序，它读取文件和用户的值，然后计算该值在文件中出现的次数。到目前为止，我已经做到了，它编译得很好，但是当你输入一个数字时，那里什么也没有发生。我难住了。对不起，如果这是非常基本的，但我无法超越这一点。

这就是我到目前为止所拥有的。

```
#include <stdlib.h>
#include <iostream>
#include <fstream>

using namespace std;

int hold,searchnumber, counter=0;

int main()
{ 

cout << "This program reads the contents of a file to discover if a number you enter exists in it, and how many times. \n";
cout << "What number would you like to search for? \n";
cout << "Number : ";
cin  >> searchnumber;

ifstream infile("problem2.txt");
if(!infile)
{
    cout << "Can't open file problem2.txt";
    exit(EXIT_FAILURE);
}
int sum=0,number;
infile >> number;
while (!infile.eof())
{
    if (number == searchnumber); 
    counter = counter += 1;
}
{
    cout << "The number " <<searchnumber << " appears in the file " << counter <<" times! \n";
    cin >> hold;
}

infile.close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:33:49.057

本节包含两个问题：

```
infile >> number;
while (!infile.eof())
{
    if (number == searchnumber); 
    counter = counter += 1;
} 
```

条件是真或假，`while`如果它是真的，它会永远保持下去，这很可能是“什么都没有发生”的原因。循环中没有任何东西可以改变 infile 的状态。

将前两行合并为：

```
while (infile >> number) 
```

然后，您至少运行该文件。

现在，这个：

```
 if (number == searchnumber); 
    counter = counter += 1; 
```

由于 if 语句后有一个分号，因此您基本上是在说“如果它是正确的数字，则不执行任何操作”，然后无论您是否找到该数字都更新计数器。删除分号。

像往常一样，写得太多太慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:31:03.093

您在这一行有一个无限循环：

```
while (!infile.eof())
{
    if (number == searchnumber); 
    counter = counter += 1;
} 
```

您打开文件并读取它上面的行，但是这个循环只会继续直到您点击 eof，但是由于您没有读取任何其他内容，只要您进入循环时它不是 eof，它就永远不会退出.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:31:10.110

```
infile >> number;
while (!infile.eof())
{
  if (number == searchnumber); 
     counter = counter += 1;  
} 
```

应该

```
while (infile >> number)
{
   if (number == searchnumber)
     counter += 1;
} 
```

每次比较之前，您都需要从文件中读取一个数字。不是简单地在文件读取while循环中什么都不做。

顺便说一句：你`sum`的变量似乎没有使用，删除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T14:33:18.887

1.

```
if (number == searchnumber); 
    counter = counter += 1; 
```

应该

```
if (number == searchnumber) 
    counter = counter += 1; 
```

2. `sum`未使用。

# php - 加密与签名，使用 Crypt_RSA 的罕见输出

> ID：16106989
> 
> 赞同：1
> 
> 时间：2013-04-19T14:27:59.297
> 
> 标签：php, xml, encryption, sign, phpseclib

我正在尝试使用以下命令签署一个字符串：

```
$rsa = new Crypt_RSA();
//$rsa->setPassword('*****');
$rsa->loadKey(file_get_contents('i.pem')); // private key
$plaintext = 'f2e140eb-2b09-44ab-8504-87b25d81914c';
$rsa->setSignatureMode(CRYPT_RSA_SIGNATURE_PKCS1);
$ciphertext = $rsa->sign($plaintext);
$reto = base64_encode($ciphertext); 
```

当我在本地验证它时，使用：

```
$pubb_key = openssl_pkey_get_public(file_get_contents('instancia_imta_ope.crt'));      
$keyData = openssl_pkey_get_details($pubb_key);
$pkeyy = $keyData['key'];
$rsa->loadKey($pkeyy); // PUBLIC key
echo $rsa->verify($plaintext, $ciphertext) ? 'verified' : 'unverified'; 
```

它显示验证，当我使用我的经纪人的测试页面时，这个相同的代码不起作用。它不会恢复原始字符串。尝试使用不同的东西，我尝试了以下奇怪的代码：

```
$rsa = new Crypt_RSA();
$rsa->loadKey(file_get_contents('i.pem')); // PRIVATE key, IT SHOULD BE PUBLIC
$plaintext = 'f2e140eb-2b09-44ab-8504-87b25d81914c';
$rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);
$ciphertext = $rsa->encrypt($plaintext);
$reto = base64_encode($ciphertext); 
```

它奇怪或不合逻辑，因为我使用私钥加密，它应该是公钥，目标使用它的私钥来解密消息。奇怪的是，这个weid代码使测试页面发送一个OK，它恢复了字符串。我不知道为什么。所有这些都是更大消息的一部分，它最终使用 xml 签名进行处理，当我处理所有（添加 xml 签名）时，代理的其他测试器页面发送无效签名，我敢打赌这是因为怪异代码。没关系，问题：为什么正确的代码（rsa->sign....）不起作用？你对这一切有什么看法？谢谢马里奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:13:44.980

所以代码可以在一台机器上运行，但不能在另一台机器上运行？似乎在这种情况下，您的 .crt 文件可能会有所不同。也就是说，您不需要使用`openssl_*`来提取公钥 - 您可以使用 phpseclib 来提取公钥。例如。

```
<?php
include('File/X509.php');

$x509 = new File_X509();
$cert = $x509->loadX509('...'); // see google.crt

echo $x509->getPublicKey()->getPublicKey();
?> 
```

我不太确定您对加密问题的要求是什么。虽然通常您会使用公钥进行加密，但您也可以使用私钥进行加密。它们都执行相同的操作 - 模幂运算。我无法在测试页面上发表评论，因为它的来源尚未发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:30:41.283

在处理加密和认证时。您使用私钥进行签名，这保证它来自您（或应安全保存在安全密钥库中的密钥的其他持有者）。

您使用公钥加密，以便只有预期的接收者可以解密（再次或非对称对的私钥的另一个持有者）。

这就是 SSL 在后台大致工作的方式（跳过加密的 AES 对称密钥部分）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:24:42.463

整个文档的示例（为了安全而截断的字段），请参阅 UPPERSOCRE 评论：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<SolicitudRegistro xmlns="http://www.cidge.gob.mx/SCG/Interoperabilidad"     
IdMensaje="f2e140eb-2b09-44ab-8504-87b25d81914c">
<FechaEnvio>2013-04-19T02:09:08</FechaEnvio>
<Registrante EndPoint="https://200.34.175.46:443/InteropOPE    
/MensajeInteroperabilidadService" Nombre="Institnologia del Agua"  
NombreCorto="IMTA" URI="op.mx">
<DatosDeContacto AreaOficina="Inmatica" 
CorreoElectronico="jbloc.imta.mx"     
Nombre="JoChacon" Puesto="Subdireclecomunicaciones">
<Telefonos>
<Telefono Extension=" " NumeroTelefonico="7773293644"/>
</Telefonos>
</DatosDeContacto>
<CertificadoInstancia>MIIFETCCA/mgAwIBAgIUMDAwMDAwM
</Registrante>
<Reto>         //THIS IS THE STRING SIGNED WITH PRIVATE KEY, is part of info
<CadenaCifrada>Ln0BAsnwrNg6IzjW7hk2c/Nxx/x  //I COPY THIS IN FIRST TESTER AND FAILS
</Reto>                              //UNLESS I USE ENCRYPT CODE WITH PRIV KEY (RARE)
<ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:SignedInfo><ds:CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-
c14n-20010315"/>
<ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
<ds:Reference URI=""><ds:Transforms><ds:Transform Algorithm="http://www.w3.org/2000/09 
/xmldsig#enveloped-signatu
<ds:KeyInfo><ds:X509Data>   
<ds:X509Certificate>MIIFETCCA/mgAwIBAgIUMDAwMDAwMDAwMDAwMDAwMDI1MzMwDQY 
```

# python - 回调函数 Python + C DLL 的参数值错误

> ID：16106991
> 
> 赞同：0
> 
> 时间：2013-04-19T14:28:06.203
> 
> 标签：python, callback, ctypes

我有一个导出此函数的 C dll：

```
DECLDIR int runTest (char *historyPath, unsigned int candleNumber, void (*testUpdate)(double percentageOfTestCompleted), void (*testFinished)(void), char **error); 
```

我正在尝试以这种方式在我的 python 脚本中使用该函数：

```
historyFilePath_c = c_char_p(historyFilePath)
candleNumber_c = c_int(1000)
error_c = c_char_p(300);

TEST_UPDATE = CFUNCTYPE(c_int, POINTER(c_double))
testUpdate_c = TEST_UPDATE(testUpdate)

TEST_FINISHED = CFUNCTYPE(c_int)
testFinished_c = TEST_FINISHED(testFinished)

astdll.runTest (historyFilePath_c, candleNumber_c, testUpdate_c, testFinished_c, byref(error_c))

def testUpdate(percentageOfTestCompleted):
  print 'Test running ' , percentageOfTestCompleted[0]
  return True

def testFinished():
  print 'Test finished!!'
  return True 
```

我收到此错误（多次因为回调函数运行多次。我将只留下最后一个错误。它们都是相同的）

```
Test running
Traceback (most recent call last):
  File "_ctypes/callbacks.c", line 314, in 'calling callback function'
  File "ast.py", line 67, in testUpdate
    print 'Test running ' , percentageOfTestCompleted[0]
ValueError: NULL pointer access
Test finished!! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:52:11.893

`testUpdate`回调采用值`double`，而不是指针，并且两个回调都返回`void`，即`None`。

`candleNumber_c`是不必要的，特别是如果您声明`argtypes`. 这同样适用于`historyFilePath_c`。Python 字符串已经包含一个指向以 null 结尾的字符串的指针，这是`c_char_p`构造函数所使用的。

为什么初始化`error_c`到地址300？

这是一个应该有帮助的例子：

**tmp.py：**

```
from ctypes import *
lib = CDLL('./tmp.so')

c_test_update_t = CFUNCTYPE(None, c_double)
c_test_finished_t = CFUNCTYPE(None)

run_test = lib.runTest
run_test.argtypes = [
    c_char_p, c_uint, c_test_update_t, c_test_finished_t, 
    POINTER(c_char_p)]

def test_update(percent_completed):
    print 'percent completed:', percent_completed
test_update_c = c_test_update_t(test_update)

def test_finished():
    print 'test finished'
test_finished_c = c_test_finished_t(test_finished)

error = c_char_p()
result = run_test(
    'path/to/history', 1000, test_update_c, test_finished_c,
    byref(error))

print result
print error.value 
```

* * *

**tmp.c:**

```
#include <stdio.h>

char error_string[] = "error string";

int runTest(
      char *historyPath,
      unsigned int candleNumber,
      void (*testUpdate)(double percentageOfTestCompleted),
      void (*testFinished)(void),
      char **error)
{
    printf("historyPath: %s\n", historyPath);
    printf("candleNumber: %d\n", candleNumber);
    testUpdate(0.0);
    testFinished();
    *error = error_string;
    return 0;
} 
```

*（只是一个简单的测试库，在 Linux 上用 gcc 编译）*

* * *

**输出：**

```
historyPath: path/to/history
candleNumber: 1000
percent completed: 0.0
test finished
0
error string 
```

# c# - 如何诊断 PHP curl POST 和 C# WebClient POST 之间的区别？

> ID：16106993
> 
> 赞同：1
> 
> 时间：2013-04-19T14:28:08.460
> 
> 标签：c#, php, http, curl, webclient

我有如下 PHP 代码：

```
$url = "http://my.parkpay.co.za/includes/api.php"; # URL to WHMCS API file goes here
$postfields["username"] = $username;
$postfields["password"] = md5($password);
$postfields["accesskey"] = "4a588e76-4e1c-4240-baad-4d2d6e3433cf";
$postfields["responsetype"] = "json";
$postfields["action"] = "addbillableitem";
$postfields["clientid"] = "3";
$postfields["description"] = "Test From PHP Code";
$postfields["amount"] = "250.00";
$postfields["invoiceaction"] = "nextinvoice";

foreach ($postfields AS $k=>$v) $query_string .= "$k=".urlencode($v)."&";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 30);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $query_string);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
$jsondata = curl_exec($ch);
if (curl_error($ch)) {
    die("Connection Error: ".curl_errno($ch).' - '.curl_error($ch));
}
curl_close($ch); 
```

和这样的 C# 代码：

```
public string PostTestBillableItem()
{
    const string username = "{username}";
    var passwordHash = Md5Hash({passwordHash});
    var formFields = new[]
                            {
                                new KeyValuePair<string, string>("username", username),
                                new KeyValuePair<string, string>("password", passwordHash),
                                new KeyValuePair<string, string>("accesskey", "4a588e76-4e1c-4240-baad-4d2d6e3433cf"),
                                new KeyValuePair<string, string>("responsetype", "json"),
                                new KeyValuePair<string, string>("action", "addbillableitem"),
                                new KeyValuePair<string, string>("clientid", "3"),
                                new KeyValuePair<string, string>("description", "Payment Towards Web Design Project"),
                                new KeyValuePair<string, string>("amount", "250.00"),
                                new KeyValuePair<string, string>("invoiceaction", "nextinvoice")
                            };
    var postData = formFields.Aggregate("", (current, pair) => current + (pair.Key + "=" + HttpUtility.UrlEncode(pair.Value) + "&"));
    var client = new WebClient();
    var result = client.UploadString("http://my.parkpay.co.za/includes/api.php", postData);
    return result;
} 
```

当我在 IIS 7.5 上执行 PHP 代码时，我得到了成功的响应。当我执行看似相同的 C# 代码时，由于我的 IP 地址而被阻止。我使用“accesskey”值是为了防止 IP 地址检查。它适用于 PHP 代码，而不是 C# 代码。

我可以使用哪些工具来检查离开请求 HTTP？在每种情况下发布的表单数据都是相同的，包括密码哈希，所以我想我正在寻找消息中的标题或编码差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:43:12.123

根据您粘贴的功能，发布数据并不相同。不是由一个长镜头。

您在 C# 代码中有不同的访问键和更多参数，如果您再次使用相同的参数运行它会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:58:05.387

1.  我不是 ac# 用户，但该`Aggregate`函数会返回一个结尾带有“&”的字符串，这可能会导致问题。

2.  你可以检查函数的返回值`urlencode`是否php和c#使用相同的rfc编码

3.  如果不是这种情况，那么您可以使用wireshark 来分析数据包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T16:41:27.373

我想我使用了 Fiddler，而不是 Wireshark，我不记得了，但不同之处在于 cURL 隐式添加了两个`WebClient`没有的标头。以下添加解决了该问题：

```
var client = new WebClient();
client.Headers.Add("Accept", "/");
client.Headers.Add("Content-Type", "application/x-www-form-urlencoded"); 
```

# parsing - 为什么我们把 'A' 作为前瞻符号，当所有都有 `$` 时？

> ID：16106995
> 
> 赞同：1
> 
> 时间：2013-04-19T14:28:15.177
> 
> 标签：parsing, syntax, compiler-construction, lr

我***`canonical LR Method`***用来构造解析表。

考虑语法：

```
s -> D C A
s -> D a B
a -> C
s -> a A 
```

我正在阅读的书中提到了*第一个关闭状态*：

```
I(0) = [s -> .D C A , $]
       [s -> .D a B , $]
       [a -> .C , A]
       [s -> .a A , $] 
```

在该州

```
[a -> .C , A] 
```

从哪里来？`A`_ `item`所有项目都有`$`一个*Look ahead 符号*，第三个项目有`A`。

请解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:39:08.233

项目：

```
[ a -> · C, A ] 
```

项目扩展的结果：

```
[ s -> · a A ] 
```

其中非终结符`a`后面是终结符`A`。这意味着 to 的减少`C`可以`a`发生在上下文为`s -> a · A`;的后续状态中。或者，换句话说，当前瞻是`A`.

您提到的状态中的所有其他项目都来自初始（隐式）项目

```
[ s' -> · s $ ] 
```

其中非终结符`s`后面是伪终结符`$`（即输入结束标记），因此它们的前瞻都是`$`.

# c# - 法语本地化文件似乎不起作用

> ID：16106996
> 
> 赞同：2
> 
> 时间：2013-04-19T14:28:17.057
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, localization

我创建了一个可以正常工作的本地化文件，我将其命名为：

```
Labels.resx 
```

现在在我的 global.asax.cs 中，如果存在特定的查询字符串值，我将语言更改为法语：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("fr-CA"); 
```

我创建了一个新的资源文件：

```
Labels.fr-CA.resx 
```

我只是在新的法语本地文件中放了一个条目来测试它，现在当控制器操作执行时，在调试时我可以在即时窗口中看到文化已正确更改，但我的文本标签不是法语。

可能是什么问题？

我的 Labels.fr-CA.resx 文件的属性与我的 Labels.resx 文件完全相同：

*   嵌入式资源
*   PublicResXFileCodeGenerator
*   （相同的命名空间）

此外，如果未找到给定键，它会自动查找 Strings.resx 键中的值作为后备还是导致异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:03:14.123

尝试将以下行添加到 global.ajax.cs：
`Thread.CurrentThread.CurrentUICulture = new CultureInfo("fr-CA");`