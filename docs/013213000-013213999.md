# StackOverflow 问答 13213000-13213999

# c++ - Qt 自定义插件将无法加载 - “未找到共享库”

> ID：13213003
> 
> 赞同：0
> 
> 时间：2012-11-03T20:05:44.927
> 
> 标签：c++, qt, plugins

我正在尝试构建一个 QtPlugin 架构，但我什至无法使用最简单的插件启动。我使用示例创建了这个插件并阅读了所有网站，但无论如何我都无法加载我的插件。

打电话后`instance()`我得到一个 `0`并且`errorString()`说`could not find shared library.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:13:16.477

该错误通常意味着您向加载程序传递了不正确的路径。

# symfony - symfony2 包自动加载失败

> ID：13213010
> 
> 赞同：2
> 
> 时间：2012-11-03T20:06:19.303
> 
> 标签：symfony, bundle

我碰巧遇到了创作中的所有 symfony 问题......

我想创建一个新项目。

我复制“ *symfony2* ”文件夹，然后重命名：

```
 php app/console generate:bundle 
```

它说：

```
 Generating the bundle code: OK
  Checking that the bundle is autoloaded: FAILED
  Confirm automatic update of your Kernel [yes]? 
  Enabling the bundle inside the Kernel: OK
  Confirm automatic update of the Routing [yes]? 
  Importing the bundle routing resource: FAILED

  The command was not able to configure everything automatically.  
  You must do the following changes manually.                      

  - Edit the composer.json file and register the bundle
  namespace in the "autoload" section:

  Bundle MddevPsavBundle is already imported. 
```

为什么是这样？当我上次没有这个问题时，我做了同样的命令？

我该如何准确解决这个问题？我应该在该`composer.json`文件中添加什么？

我尝试了一些东西，但我得到了：

```
 Fatal error: Class 'Mddev\PsavBundle\MddevPsavBundle' not found in
  /var/www/projetQ/app/AppKernel.php on line 22 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-13T09:50:07.077

如果您遇到问题：

```
The command was not able to configure everything automatically.  
You must do the following changes manually. 
```

然后告诉你：

```
- Edit the composer.json file and register the bundle
namespace in the "autoload" section: 
```

假设您已正确遵循[捆绑名称约定](http://symfony.com/doc/current/cookbook/bundles/best_practices.html#bundle-name)，那么您将需要：

* * *

**将新包添加到 composer.json 文件**

```
"autoload": {
    "psr-0": {
        "currentbundle\\": "src/",
        "YOURNEWBUNDLE\\": "src/",            
    }
} 
```

**然后您需要再次在作曲家上运行安装**

```
composer -n install --dev 
```

然后，您应该自动加载两个捆绑包

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T21:46:33.737

似乎您的捆绑名称空间不遵循约定：[http ://symfony.com/doc/current/cookbook/bundles/best_practices.html#bundle-name](http://symfony.com/doc/current/cookbook/bundles/best_practices.html#bundle-name)

你应该使用`Mddev\Bundle\MddevPsavBundle`or`Mddev\MddevPsavBundle`作为一个包命名空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-25T21:35:04.217

我刚刚遇到了这个确切的问题。app/console generate:bundle 未能通过自动加载检查，并且未创建 src 目录。我习惯于采用默认答案，以至于我没有注意到 src 目录指向缓存目录。

我输入了正确的路径，一切都很好。

我想熟悉确实会滋生蔑视。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-05T12:40:17.430

我收到错误是因为在运行 generate:bundle 之前我没有安装 composer。

安装 Composer 后，再次尝试该命令（在删除捆绑创建的文件和 app/AppKernal.php 中的代码之后）它立即工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-28T12:21:23.083

从命令行生成捆绑包时，生成器不会考虑捆绑包所在的目录，这可能会在向捆绑包中添加供应商前缀时导致问题，您需要确保两件事才能正常工作

1.  检查命名空间`AppKernel.php`>`registerBundles()`
2.  检查包类中的命名空间
3.  运行`composer update`只是为了确保正确创建自动加载器

例如：- `namespace Acme\UserBundle;`在 UserBundle.php

```
|-----|
|    src
|       |
|      Acme
|          |
|        UserBundle
|               .
|               .
|           UserBundle.php 
```

里面`AppKernel.php`有`new Acme\UserBundle\UserBundle(),`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-21T15:11:43.923

要修复此错误，必须在`composer.json`此代码中添加：

```
"autoload": {
        "psr-4": { "": "src/" },
        "classmap": [ "app/AppKernel.php", "app/AppCache.php" ]
    }, 
```

始终所有捆绑包都在`/src` 此更改是我的解决方案`Symfony 3.3.x`

问候

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-12T14:43:26.773

在自动加载中更改 composer.json

```
"autoload": {
            "psr-4": {
                "Composer\\CaBundle\\": "src"
            }
        }, 
```

添加运行命令`composer dumpautoload`

# javascript - Javascript indexof 不适用于 json

> ID：13213018
> 
> 赞同：2
> 
> 时间：2012-11-03T20:07:20.857
> 
> 标签：javascript, jquery, ajax, json

基本上我试图用这部分代码实现的是在 twitter 上搜索一个词，然后查看第二个词是否包含在任何搜索结果中。将它们汇总并使用 Google 图表 API 绘制图表。似乎 indexOf 不起作用，因为当我声明 term 和 term2 都是“测试”时，它仍然只会添加到 notcontains。

```
$.ajax({
    url: 'http://search.twitter.com/search.json?q=' + term2 + '&lang=en&callback=?',
    dataType: "json",
    async: false,
    success: function(data) {
        var data = data.results;
        var addhtml = "<ul>";
        for (var i = 0; i < data.length; i++) {
            addhtml += "<li><a href='http://twitter.com/" + data[i].from_user + "'>@" + data[i].from_user + "</a>: " + data[i].text + "</li>";
            compare = JSON.stringify(data[i].from_user);
            if (compare.indexOf(term) >= 0) contains += 1;
            else notcontains += 1;
        }
        addhtml += "</ul>"
        html += addhtml;
        drawChart()
        $('.content').html(html);
        $('.counts').html(contains + " " + notcontains);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:59:23.377

问题是我在用户名中搜索第二个词而不是文本。

```
compare = data[i].from_user; 
```

应该

```
compare = data[i].text; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-03T20:13:49.320

`indexOf`用于在对象或字符串中查找值的索引...用于测试属性是否存在，如this [SO question](https://stackoverflow.com/questions/135448/how-do-i-check-to-see-if-an-object-has-a-property-in-javascript)`hasOwnProperty`中所示使用

# c++ - 如何使用 C++ 的谷歌测试来运行数据组合

> ID：13213022
> 
> 赞同：15
> 
> 时间：2012-11-03T20:07:36.227
> 
> 标签：c++, googletest

我有一个单元测试，我需要运行 200 种可能的数据组合。（生产实现在配置文件中有要测试的数据。我知道如何模拟这些值）。我更喜欢为每个组合编写单独的测试用例，并使用某种方式循环数据。有没有使用谷歌测试 C++ 的直接方法？

谢谢，卡西克

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-05T21:20:04.457

为此，您可以使用 gtest 的[值参数化测试](https://github.com/google/googletest/blob/master/docs/advanced.md#value-parameterized-tests)。

将它与`Combine(g1, g2, ..., gN)`生成器结合使用听起来是您最好的选择。

以下示例填充 2 `vector`s，其中一个`int`s 和另一个`string`s，然后仅使用一个测试夹具，为 2 `vector`s 中可用值的每个组合创建测试：

```
#include <iostream>
#include <string>
#include <tuple>
#include <vector>
#include "gtest/gtest.h"

std::vector<int> ints;
std::vector<std::string> strings;

class CombinationsTest :
    public ::testing::TestWithParam<std::tuple<int, std::string>> {};

TEST_P(CombinationsTest, Basic) {
  std::cout << "int: "        << std::get<0>(GetParam())
            << "  string: \"" << std::get<1>(GetParam())
            << "\"\n";
}

INSTANTIATE_TEST_CASE_P(AllCombinations,
                        CombinationsTest,
                        ::testing::Combine(::testing::ValuesIn(ints),
                                           ::testing::ValuesIn(strings)));

int main(int argc, char **argv) {
  for (int i = 0; i < 10; ++i) {
    ints.push_back(i * 100);
    strings.push_back(std::string("String ") + static_cast<char>(i + 65));
  }
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T12:23:34.283

使用一个结构数组（例如，称为`Combination`）来保存您的测试数据，并在单个测试中循环遍历每个条目。`EXPECT_EQ`使用代替检查每个组合，`ASSERT_EQ`以便测试不会中止，您可以继续检查其他组合。

重载`operator<<`a`Combination`以便您可以将其输出到 a `ostream`：

```
ostream& operator<<(ostream& os, const Combination& combo)
{
    os << "(" << combo.field1 << ", " << combo.field2 << ")";
    return os;
} 
```

重载`operator==`a`Combination`以便您可以轻松地比较两个组合是否相等：

```
bool operator==(const Combination& c1, const Combination& c2)
{
    return (c1.field1 == c2.field1) && (c1.field2 == c2.field2);
} 
```

单元测试可能看起来像这样：

```
TEST(myTestCase, myTestName)
{
    int failureCount = 0;
    for (each index i in expectedComboTable)
    {
        Combination expected = expectedComboTable[i];
        Combination actual = generateCombination(i);
        EXPECT_EQ(expected, actual);
        failureCount += (expected == actual) ? 0 : 1;
    }
    ASSERT_EQ(0, failureCount) << "some combinations failed";
} 
```

# mysql - SQL Syntax, What am I doing wrong?

> ID：13213025
> 
> 赞同：2
> 
> 时间：2012-11-03T20:07:56.797
> 
> 标签：mysql, sql, syntax, limit

I have the following syntax, and all runs fine except for "LIMIT". All the results of the database display when only 9 results should. I have the "0, 9" coming from variables so they will change on each paginated link (ex. 0, 9; 10, 18; 19, 27; etc.). I checked and rechecked my syntax and I don't understand why all the results would show. Below is the exact query I'm testing.

Also to note, I'm using XAMPP

```
FROM acb_accfitems WHERE itemtype = 'furniture' ORDER BY price DESC LIMIT 0, 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:14:51.757

这样你就可以进行分页：

```
ORDER BY price LIMIT 10       /* first 10 */
ORDER BY price LIMIT 11, 10   /* second 10 */
ORDER BY price LIMIT 21, 10   /* third 10 */ 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:08:55.187

ORDER BY price DESC LIMIT 9

Is what you need.

# asp.net-mvc-3 - MVC3：创建视图同时在对象和属性对象中填充数据

> ID：13213026
> 
> 赞同：1
> 
> 时间：2012-11-03T20:08:00.180
> 
> 标签：asp.net-mvc-3, view, model

我很确定以前已经回答过这个问题，但是我很难找到任何可以帮助我的东西。问题是：

我有一个泛型类及其专业化，例如 PERSON 和 CLIENT（即 PERSON）。所以，我在数据库上有 2 个表，它们是：

```
PESSOA_FISICA
  ID_PESSOA_FISICA  Identity
  TX_NOME           Varchar(120)
  TX_CPF            Char(8)
  DT_NASCIMENTO     DateTime

CLIENTE_VAREJO
  ID_CLIENTE_VAREJO Identity
  ID_PESSOA_FISICA  Int      (FK to PESSOA_FISICA)
  IN_STATUS         Char(1)
  TX_FILIAL         Varchar(20) 
```

对于 C# 类，我得到了这个：

```
[Table("PESSOA_FISICA")]
public class PessoaFisica
{
    [Key]
    [Column("ID_PESSOA_FISICA")]
    public int? IDPessoaFisica { get; set; }

    [Column("TX_NOME")]
    public string Nome { get; set; }

    [Column("TX_CPF")]
    public string CPF { get; set; }

    [Column("DT_NASCIMENTO")]
    public DateTime Nascimento { get; set; }
}

[Table("CLIENTE_VAREJO")]
public class ClienteVarejo
{
    [Key]
    [Column("ID_CLIENTE_VAREJO")]
    public int? IDClienteVarejo {get;set;}

    [Column("ID_PESSOA_FISICA")]
    [ForeignKey("PessoaFisica")]
    public int IDPessoaFisica { get; set; }

    public virtual PessoaFisica PessoaFisica { get; set; }

    [Column("IN_STATUS")]
    public String Status { get; set; }

    [Column("TX_FILIAL")]
    public String Filial { get; set; }
} 
```

问题是......我只是不知道如何创建一个可以将数据接受到 ClienteVarejo 模型的 CREATE 视图，同时也可以接受到 PessoaFisica（因为，每当我为新的 ClienteVarejo 输入数据时，我也必须为新的 PessoaFisica 输入数据）。

我已经意识到，在一个强类型为 ClienteVarejo 的视图中，我可以使用 Razor 语法，例如：

```
@Html.EditorFor(model => model.PessoaFisica.Nome) 
```

但是在我的情况下（即：同时创建两个对象），如何使模型验证发生在两个对象上？

感谢您可以给我的任何帮助... :)

Marcelo Myara 巴西里约热内卢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:18:21.490

不要将域模型用于您的视图。创建一个特定于您的视图的新***POCO***类。我们称之为**ViewModel**。

```
public class CreateClientVM
{
  [Required]
  public string ClientName { set;get;}
  [Required]
  public string ContactPersonName { set;get;}

  //other properties here as needed
} 
```

现在在你的`GET`行动中创建这个类的一个对象并传递给`View`方法。

```
public ActionResult CreateClient()
{
  var vm=new CreateClientVM();
  return View(vm);
} 
```

使您的视图强类型化到 ViewModel 类。

```
@model CreateClientVM
@using(Html.BeginForm())
{
  @Html.LabelFor(x=>x.ClientName)
  @Html.TextBoxFor(x=>x.ClientName)

  @Html.LabelFor(x=>x.ContactPersonName)
  @Html.TextBoxFor(x=>x.ContactPersonName)

  <input type="submit" />
} 
```

当用户提交表单时，从视图模型中读取值并将其分配给您的域模式对象并保存。感谢 MVC 模型绑定。:)

```
[HttpPost]
public ActionResult CreateClient(CreateClientVM model)
{
  if(ModelState.IsValid)
  {
    var domainModelClient=new ClienteVarejo();
    domainModelClient.Name=model.ClientName;
    domainModelClient.ContactPerson=new ContactPerson();
    domainModelClient.ContactPerson.Name=model.ContactPersonName;

    yourRepositary.SaveClient(domainModelClient);  
    //If saved successfully, Redirect to another view (PRG pattern)
    return RedirectToAction("ClientSaved");
  }
  return View(model);    
} 
```

# java - JScrollPane 设置滚动位置

> ID：13213030
> 
> 赞同：2
> 
> 时间：2012-11-03T20:08:18.753
> 
> 标签：java, swing, jscrollpane, jscrollbar, adjustment

我有以下代码片段

```
query_area = new JTextArea("");
query_scroll_pane = new JScrollPane(query_area);
query_scroll_pane.setSize(1000,80);
query_scroll_pane.setLocation(10,10);
query_panel.add(query_scroll_pane); 
```

它将我的文本区域添加到滚动窗格。现在在一种方法中，我将 textarea 的文本动态设置为

```
sf.query_area.setText("Query "+(sf.query_counter)+sf.query_store[sf.query_counter]);
System.out.println("Position: "+sf.query_scroll_pane.getHorizontalScrollBar().getValue()); 
```

现在我的查询是当显示较长的文本时，出现滚动条但 system.out.println 将滚动条的位置打印为 0 而不是一些增加的值。

为什么这样 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T20:13:34.717

我能想到的唯一原因是因为视口位置没有改变。

首先想到的是，视口可能尚未对文本开始设置的位置变化做出反应，因此在设置文本后立即转储结果反映了滚动条的当前状态（尚未开始更新）

你可以试试

```
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        System.out.println("Position: "+sf.query_scroll_pane.getHorizontalScrollBar().getValue());        
    }
}); 
```

相反，看看是否打印出更新的值

或者，您可以`AdjustmentListener`在滚动条中添加一个，当发生更改时通知[JScrollBar#addAdjustmentListener](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollBar.html#addAdjustmentListener%28java.awt.event.AdjustmentListener%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:36:30.953

> 现在我的查询是当显示较长的文本时，出现滚动条但 system.out.println 将滚动条的位置打印为 0 而不是一些增加的值。

采用

```
query_area = new JTextArea();
DefaultCaret caret = (DefaultCaret) query_area.getCaret();
caret.setUpdatePolicy(DefaultCaret.ALWAYS_UPDATE); 
```

# .htaccess - 文件夹 php.ini 覆盖主 php.ini

> ID：13213034
> 
> 赞同：1
> 
> 时间：2012-11-03T20:09:09.880
> 
> 标签：.htaccess, php

> **可能重复：**
> [覆盖全局 php.ini 文件](https://stackoverflow.com/questions/7781927/overriding-global-php-ini-file)

我已经看过但似乎找不到答案。我正在从我的网络根目录加载一个 php.ini 文件，并想知道它是否只包含一行，是否会覆盖主 php.ini 例如：

```
include_path = ".:/usr/lib/php:/usr/local/lib/php:/home/folder_name/include_folder" 
```

是文件中的唯一行。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:10:57.413

是的，它会覆盖主 php.ini，除非您同时加载了两个 php.ini 文件。

# cuda - 为什么我的 CUDA 程序的输出不可靠？

> ID：13213038
> 
> 赞同：0
> 
> 时间：2012-11-03T20:09:18.267
> 
> 标签：cuda

我正在使用 CUDA 提供的编程指南自学 CUDA。为了练习，我制作了一个简单的内核来确定数组的最大值并将其返回给 CPU：

```
 __global__ void getTheMaximum(float* myArrayFromCPU, float* returnedMaximum) {
    // Store my current value in shared memory.
    extern __shared__ float sharedData[];
    sharedData[threadIdx.x] = myArrayFromCPU[threadIdx.x];

    // Iteratively calculate the maximum.
    int halfScan = blockDim.x / 2;
    while (halfScan > 0 && threadIdx.x < halfScan) {
      if (sharedData[threadIdx.x] < sharedData[threadIdx.x + halfScan]) {
        sharedData[threadIdx.x] = sharedData[threadIdx.x + halfScan];
      }
      halfScan = halfScan / 2;
    }

    // Put maximum value in global memory for later return to CPU.
    returnedMaximum[0] = sharedData[0];
  } 
```

`myArrayFromCPU`是一个大小为 1024 的浮点值数组。`returnedMaximum`是一个包含单个项目的普通数组：计算的最大值。

我对这个算法的想法是，它会迭代地确定最大值，因为它会从当前值的一半块大小中减少值。

但是，当我运行此代码时，我得到不可靠的输出。返回的最大值会有所不同。这是为什么？单个算法如何每次都产生不同的值？

更新：

我也只是在一个街区上跑步。我通过设置 X=1024 的一维块大小来保证这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:35:11.763

不能保证整个块的所有线程都在同一时刻执行。这保证您只有一个经线（32 个线程组）。

为了避免块内的并发危险 - 您可以使用`__syncthreads()`内在函数来停止线程到达它直到所有到达点。请注意，您不应该`__syncthreads()`在无法保证所有线程都一致到达该位置的分支代码中添加。

尝试以下循环：

```
__syncthreads();
while (halfScan > 0) {
  if (threadIdx.x < halfScan) {
    if (sharedData[threadIdx.x] < sharedData[threadIdx.x + halfScan]) {
      sharedData[threadIdx.x] = sharedData[threadIdx.x + halfScan];
    }
  }
  __syncthreads();
  halfScan = halfScan / 2;
} 
```

请注意，我`threadIdx.x < halfScan`从 while 循环中删除了条件，因为我希望*所有*线程`__syncthreads()`在同一地点执行相同的次数。

此外，`__syncthreads()`在循环之前可能有助于确保`myArrayFromCPU`在循环开始之前完成加载（对于所有线程）。

# scipy - Reshape a group of Pandas Series into a DataFrame and fillin missing values

> ID：13213039
> 
> 赞同：3
> 
> 时间：2012-11-03T20:09:28.767
> 
> 标签：scipy, pandas

I have several Pandas Series objects that look like this:

```
r = pd.Series({'a': [1,2,3,4]})
s = pd.Series({'b': [2,4,1]})
u = pd.Series({'c': [8,6]})
v = pd.Series({'d': [4,3,1]}) 
```

I'd like to convert these Series objects into a data fram with the dictionay keys as column names and the values as columns. My desired output is:

```
 'r'    's'    'u'    'v'
0     1      2      8      4
1     2      4      6      3
2     3      1     Nan     1
3     4     Nan    Nan    Nan 
```

How can I create a data frame object as depicted above? I'm aware of the `.fillna` method, but I could not get this to work with my data. The missing values should be Nan. Thanks for the help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T22:44:49.790

我认为最简单的方法是[`join`on index](http://pandas.pydata.org/pandas-docs/stable/merging.html#joining-on-index)。我已经将原始变量调整为 DataFrames 以启用此功能*（注意：它们应该是 DataFrames 而不是 Series）*：

```
r = pd.DataFrame({'r': [1,2,3,4]})
s = pd.DataFrame({'s': [2,4,1]})
u = pd.DataFrame({'v': [8,6]})
v = pd.DataFrame({'u': [4,3,1]})

r.join([s, u, v], how='outer')
#    r   s   v   u
# 0  1   2   8   4
# 1  2   4   6   3
# 2  3   1 NaN   1
# 3  4 NaN NaN NaN 
```

# c# - How to show a gif image in Windows RT?

> ID：13213042
> 
> 赞同：1
> 
> 时间：2012-11-03T20:09:41.013
> 
> 标签：c#, image, windows-8, windows-runtime, gif

> **Possible Duplicate:**
> [Display an Animated GIF in a Metro App](https://stackoverflow.com/questions/12756324/display-an-animated-gif-in-a-metro-app)

I am trying to show gif images in my WinRT app. My current solution is to use a server side converter to convert the images to png, and then load them into an Image control. I have limited bandwidth and would prefer to do it in-app. I used .Net Image Tools to do this on Windows Phone, but it does not appear to be available for Windows RT. I cannot show the images in a WebView because I need to show another element over the image.

# apache - Setting up page returned by controller action

> ID：13213043
> 
> 赞同：1
> 
> 时间：2012-11-03T20:09:41.803
> 
> 标签：apache, file, mod-rewrite, redirect, rewrite

My problem is to make the server to recognize the files in my folder, I'm doing my own MVC framework and the problem comes about when I redirect a page from my controller, for example in the first time with an empty url and calling the Home controller like *`/MySite/`* it found all the images and files I need to show the page, for example:

*`/MySite/css/file.css`* or *`/Site/Image/image.jpeg`*,

because the server found the directories in the rewritten url `public/Image/image.jpeg`.

But if I make an url like *`/MySite/index/action`* and define another action to call when the controller finally returns the page, and all the files in the page being loaded, it tries to found that files, but these urls come back to my front controller like *`/MySite/index/css/file.css`*

I don't understand why the url is not overwitten at all, but the call for the file overrides only the last part, so the action, naturally the files found the first time in *`public/Image/image.jpeg`* cannot be found at *`public/index/Image/image.jpeg`*..

Can anyone help with this?

my .httpaccess files is realy simple:

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$   public/    [L]
    RewriteRule    (.*) public/$1    [L]
</IfModule> 
```

and the file inside public:

```
<IfModule mod_rewrite.c>
   Options +FollowSymLinks
   RewriteEngine On

   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule ^(.*)\??(.*)$ index.php?route=$1&query=$2 [L,QSA]
</IfModule> 
```

# python - urllib2 HTTP 错误 429

> ID：13213048
> 
> 赞同：10
> 
> 时间：2012-11-03T20:10:26.887
> 
> 标签：python, urllib2, reddit, http-status-code-429

所以我有一个 sub-reddits 列表，我正在使用 urllib 打开它们。当我浏览它们时，最终 urllib 失败了：

```
urllib2.HTTPError: HTTP Error 429: Unknown 
```

做了一些研究，我发现 reddit 通过 IP 限制了对其服务器的请求数量：

> 每两秒发出不超过一个请求。有一些请求突发的余地，但要保持理智。一般来说，保持在一分钟内不超过 30 个请求。

所以我想我会使用`time.sleep()`将我的请求限制为每 10 秒一页。这最终也会失败。

上面的引用来自[reddit API](https://github.com/reddit/reddit/wiki/API)页面。我没有使用 reddit API。在这一点上，我在想两件事。该限制仅适用于 reddit API，或者 urllib 也有限制。

有谁知道这是这两件事中的哪一件？或者我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-03T22:13:41.820

来自[https://github.com/reddit/reddit/wiki/API](https://github.com/reddit/reddit/wiki/API)：

> 许多默认的用户代理（如“Python/urllib”或“Java”）被严格限制为鼓励独特和描述性的用户代理字符串。

这也适用于常规请求。发出请求时，您需要提供自己的用户代理标头。

```
#TODO: change user agent string
hdr = { 'User-Agent' : 'super happy flair bot by /u/spladug' }
req = urllib2.Request(url, headers=hdr)
html = urllib2.urlopen(req).read() 
```

但是，这将为每个请求创建一个新连接。我建议使用另一个能够重用连接的库，[`httplib`](http://docs.python.org/2/library/httplib.html)例如Request [。](http://docs.python-requests.org/en/latest/)它将减轻服务器的压力并加快请求速度：

```
import httplib
import time

lst = """
science
scifi
"""

hdr= { 'User-Agent' : 'super happy flair bot by /u/spladug' }
conn = httplib.HTTPConnection('www.reddit.com')
for name in lst.split():
    conn.request('GET', '/r/'+name, headers=hdr)
    print conn.getresponse().read()
    time.sleep(2)
conn.close() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-04T07:08:07.967

reddit对 IP 地址和用户代理按请求（不是 Anonymous Coward[建议](https://stackoverflow.com/a/13214012/176978)的连接）执行速率限制。您遇到的问题是，尝试使用 urllib2 访问 reddit 的每个人都将被限制为单个用户。

解决方案是设置一个用户代理，您可以在[这个问题](https://stackoverflow.com/questions/802134/changing-user-agent-on-urllib2-urlopen)中找到答案。

或者，放弃编写自己的代码来爬取 reddit 并改用[PRAW](https://github.com/praw-dev/praw/wiki)。它支持 reddit API 的几乎所有功能，您不必担心遵循任何 API 规则，因为它会为您处理这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-06T06:45:12.290

我遇到了同样的错误。更改代码

```
from urllib.request import urlopen
from bs4 import BeautifulSoup

html = urlopen(url)
bsObj = BeautifulSoup(html) 
```

到

```
from urllib.request import urlopen
from bs4 import BeautifulSoup
import urllib.request

webRequest = urllib.request.Request(url, headers={"User-Agent": <you username in case you are scraping reddit>})
html = urlopen(webRequest)
bsObj = BeautifulSoup(html) 
```

解决了这个问题

# php - Facebook page feed doesn't work with php file_get_contents()

> ID：13213049
> 
> 赞同：5
> 
> 时间：2012-11-03T20:10:27.263
> 
> 标签：php, json, facebook-page

When I go to this url in by browser, it shows me the json feed i expect:

[https://www.facebook.com/feeds/page.php?format=json&id=237173582992285](https://www.facebook.com/feeds/page.php?format=json&id=237173582992285)

When in PHP I do a

```
<?php
print_r(file_get_contents('https://www.facebook.com/feeds/page.php?format=json&id=237173582992285'));
?> 
```

I get an html page saying my browser is not supported by facebook and that I should upgrade. How do I make the file_get_contents return the json feed I'm expecting?

**Additional Notes** I also tried from bash `wget https://www.facebook.com/feeds/page.php?format=json&id=237173582992285` and the file I downloaded also has html content saying browser not supported.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T20:23:39.670

试试这个，它对我有用

```
 $ch = curl_init("https://www.facebook.com/feeds/page.php?format=json&id=237173582992285");
  curl_setopt( $ch, CURLOPT_POST, false );
  curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, true );
  curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.7.12) Gecko/20050915 Firefox/1.0.7");
  curl_setopt( $ch, CURLOPT_HEADER, false );
  curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
  $data = curl_exec( $ch );
  echo $data; 
```

> 正如@Michael Mior 所指出的，它违反了Facebook 条款。但这是您问题的答案，facebook 有一个简单的检查来确保页面应该由浏览器打开，因此我们通过设置`useragent`标题来模仿它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T20:17:27.440

您应该改用 Facebook API。[Graph API Explorer](https://developers.facebook.com/tools/explorer/?method=GET&path=237173582992285%2Ffeed)以及[Pages API](https://developers.facebook.com/docs/reference/api/page/)上的文档应该可以帮助您入门。

提要供 RSS 阅读器使用，而不是供脚本使用。理论上你可以通过更改`User-Agent`标题来解决这个问题，但这违反了 Facebook 的[服务条款](https://www.facebook.com/legal/terms)

> 未经我们事先许可，您不得使用自动化方式（例如收获机器人、机器人、蜘蛛或刮刀）收集用户的内容或信息，或以其他方式访问 Facebook。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T20:25:36.813

要获取页面的公开帖子，您应该使用其相应的连接，即`feed`与任何有效的连接`access_token`。

因此，要获取您提到的页面的公共提要，请使用[`/237173582992285/feed`](https://developers.facebook.com/tools/explorer/?method=GET&path=237173582992285/feed). 此外，您可以选择仅获取您需要的数据，例如[`/237173582992285?fields=feed.fields(message,type,status_type)`](https://developers.facebook.com/tools/explorer/?method=GET&path=237173582992285?fields=feed.fields%28message,type,status_type%29) 会产生如下结果：

```
{
  "id": "237173582992285",
  "feed": {
    "data": [
      {
        "message": "???? ???? ???? :) - ??? <3",
        "type": "photo",
        "status_type": "added_photos",
        "id": "237173582992285_461226513920323",
        "created_time": "2012-11-03T12:46:20+0000"
      },
      {
        "message": "?????? ????? ? ???? ???? ????? ?? ??????? ? ????? ???? ??????? ????? ???? ???????? ????????? :D :D :D - ??? <3",
        "type": "photo",
        "status_type": "added_photos",
        "id": "237173582992285_457876184255356",
        "created_time": "2012-10-26T09:43:01+0000"
      }, 
      ....etc
    ],
    "paging": {
      "previous": "https://graph.facebook.com/237173582992285/feed?fields=message,type,status_type&limit=25&since=1351946780",
      "next": "https://graph.facebook.com/237173582992285/feed?fields=message,type,status_type&limit=25&until=1348763989"
    }
  }
} 
```

[在此处](https://developers.facebook.com/docs/reference/api/page/)阅读有关页面端点的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T20:14:16.960

```
function load_url($url) {
  $ch = curl_init($url);
  curl_setopt( $ch, CURLOPT_POST, false );
  curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, true );
  curl_setopt( $ch, CURLOPT_HEADER, false );
  curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
  curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)');
  $received_data = curl_exec( $ch );
  if($received_data){
  return $received_data;
  } else {
  return false;
 }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-05T17:50:46.287

```
 function get_facebook_id($facebookUrl)
 {
 $ch = curl_init($facebookUrl);
 curl_setopt( $ch, CURLOPT_POST, false );
 curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, true );
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; 
rv:1.7.12) Gecko/20050915 Firefox/1.0.7");
 curl_setopt( $ch, CURLOPT_HEADER, false );
  curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
 $fbResponse = curl_exec( $ch );
if($fbResponse)
{
    $matches = array();
    if (preg_match('/"entity_id":"([0-9])+"/', $fbResponse, $matches))
    {
        $jsonObj = json_decode("{" . $matches[0] . "}");
        if($jsonObj)
        {
            $facebookId = $jsonObj->entity_id;
        }
    }
}
return $facebookId;
} 
```

# asp.net-mvc - How to join ef navigation properties in linq to entities

> ID：13213051
> 
> 赞同：1
> 
> 时间：2012-11-03T20:10:47.110
> 
> 标签：asp.net-mvc, linq-to-entities, navigation-properties

I try to get the following sql written in Linq to Entities:

```
SELECT * FROM SafetySheets AS SS
JOIN UserProfiles AS UP ON SS.CreatedBy = UP.UserId
JOIN SafetyOfficers AS SO ON SS.SafetyOfficer_Id = SO.Id
JOIN Projects AS Pr ON SS.Project_Id = Pr.Id
JOIN ConstructionLocations AS CL ON SS.ConstructionLocation_Id = CL.Id
JOIN ProductionManagers AS PM ON SS.ProductionManager_Id = PM.Id
JOIN ConstructionManagers AS CM ON SS.ConstructionManager_Id = CM.Id 
```

Here is my attempt in Linq:

```
public IQueryable<SafetySheetCollection> GetSafetySheets()
    {
        var query = from vSafety in _db.SafetySheets
                    join vUserProfile in _db.UserProfiles
                    on vSafety.CreatedBy equals vUserProfile.UserId
                    join vProject in _db.Projects
                    on vSafety.Id equals vProject.SafetySheets
                    join vConstructionLocation in _db.ConstructionLocations
                    on vSafety.Id equals vConstructionLocation.SafetySheets
                    join vSafetyOfficer in _db.SafetyOfficers
                    on vSafety.Id equals vSafetyOfficer.SafetySheets
                    join vProductionManager in _db.ProductionManagers
                    on vSafety.Id equals vProductionManager.SafetySheets
                    join vConstructionManager in _db.ConstructionManagers
                    on vSafety.Id equals vConstructionManager.SafetySheets
                    orderby vSafety.Created descending
                    select new SafetySheetCollection
                    {
                        ListAllSafetySheets = vSafety,
                        ListAllUserProfiles = vUserProfile,
                        ListAllProjects = vProject,
                        ListAllConstructionLocations = vConstructionLocation,
                        ListAllSafetyOfficers = vSafetyOfficer,
                        ListAllProductionManagers = vProductionManager,
                        ListAllConstructionManagers = vConstructionManager
                    };
        return query;
    } 
```

The SheetCollection model:

```
 public class SafetySheetCollection
 {
    public SafetySheet ListAllSafetySheets { get; set; }
    public Project ListAllProjects { get; set; }
    public ConstructionLocation ListAllConstructionLocations { get; set; }
    public UserProfile ListAllUserProfiles { get; set; }
    public SafetyOfficer ListAllSafetyOfficers { get; set; }
    public ProductionManager ListAllProductionManagers { get; set; }
    public ConstructionManager ListAllConstructionManagers { get; set; }
 } 
```

My diagram looks like this:

![enter image description here](../Images/16bfb75b35549e58cbebc5c994506975.png)

I understand that it doesn't work out to equal with a navigation property. But how should this be done in a correct way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:38:50.997

[关于linq 中连接](http://msdn.microsoft.com/en-us/library/bb397941.aspx)的文档并不难找到。`equals`应该在标量属性上，通常是与数据库中的 FK 约束相对应的那些。

```
from vSafety in _db.SafetySheets
join vUserProfile in _db.UserProfiles
    on vSafety.CreatedById equals vUserProfile.UserId // CreatedById !
... 
```

如果没有另一种更简洁的加入方式，我本可以在评论中提到这一点，我也想指出（记录在案，但不知何故经常被忽视）：

```
from vUserProfile in _db.UserProfiles
from vSafety in vUserProfile.SafetySheets // not db.SafetySheets
... 
```

您的查询对于我来说有点太大了，无法整理出所有的连接，但这应该可以帮助您完成它。

# jquery - jQuery滑块UI不滑动

> ID：13213054
> 
> 赞同：2
> 
> 时间：2012-11-03T20:11:17.260
> 
> 标签：jquery, jquery-ui

我将 jQuery 滑块 UI 用于音频播放器中的滑块，只有当我为其设置变量时，滑动功能不起作用。

```
$('.body_container .slider').slider({

  value: 0,
  step: 0.01,
  orientation: "horizontal",
  range: "min",
  max: song.duration,
  animate: true,  

  slide: function(event,ui) {             
    manualSeek = true;
  },
  stop:function(event,ui) {
    manualSeek = false;         
    song.currentTime = ui.value;
  }
}); 
```

在萤火虫中，它出现了错误`closestHandle is undefined`。`closestHandle`来自 jQuery UI 文件。

但是，当我在函数中没有设置任何选项而只是离开事件但显然我需要设置选项时，它确实有效；

```
$('.body_container .slider').slider({

  slide: function(event,ui) {             
    manualSeek = true;
  },
  stop:function(event,ui) {
    manualSeek = false;         
    song.currentTime = ui.value;
  }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-30T09:16:40.647

有点晚了，但请确保 song.duration 是一个数字。您可以使用 parseFloat() 来确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T06:06:14.177

我认为 song.duration 没有定义。

尝试删除以下行：

```
max: song.duration, 
```

或者用这个替换它：

```
max: 100, 
```

如果是 song.duration 不起作用，请尝试使用`console.log(song.duration);`with firebug 来调试该变量中的内容。

# sql-server - 更改 CASE 语句以处理 NULL 值？

> ID：13213055
> 
> 赞同：1
> 
> 时间：2012-11-03T20:11:31.510
> 
> 标签：sql-server, tsql, case

我需要帮助修改必须更改以适应空值的可能性的现有 case 语句。

目前，声明如下：

```
CASE WHEN 
  DATEDIFF(dd, table.OpenDate, GetDate()) - table.Days_as_Integer) > 0 THEN 
   DATEDIFF(dd, table.OpenDate, GetDate()) - table.Days_as_Integer 
  ELSE NULL END 
AS Days_Past_Due 
```

我只想更改现有的 CASE 语句以便能够处理空表。OpenDate 字段，返回一个 NULL 作为 Days_Past_Due。是否有捷径可寻？

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T21:56:37.627

你应该简化它，而不是让你的表达式**更**复杂：

```
CASE WHEN 
  DATEDIFF(dd, table.OpenDate, GetDate()) - table.Days_as_Integer) > 0 THEN 
  DATEDIFF(dd, table.OpenDate, GetDate()) - table.Days_as_Integer 
  END 
AS Days_Past_Due 
```

1.  没有 ELSE 的 CASE .. 为 ELSE 分支隐式返回 NULL。
2.  一个或两个日期为 NULL 的 Datediff 返回 NULL。不需要特殊的魔法。检查这个[SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/5682/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:39:49.553

尝试类似：

```
CASE 
  WHEN table.OpenDate IS NULL THEN NULL
  WHEN DATEDIFF(dd, table.OpenDate, GetDate()) - table.Days_as_Integer) > 0 THEN 
   DATEDIFF(dd, table.OpenDate, GetDate()) - table.Days_as_Integer 
  ELSE NULL 
END AS Days_Past_Due 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T20:44:15.137

--在CASE中添加一行来处理一个NULL表。OpenDate并将其呈现为NULL

```
CASE
 WHEN DATEDIFF(dd, table.OpenDate, GetDate()) - table.Days_as_Integer) > 0 THEN DATEDIFF(dd, table.OpenDate, GetDate()) - table.Days_as_Integer 
 WHEN table.OpenDate IS NULL THEN NULL
 ELSE NULL
END 
AS Days_Past_Due 
```

# macos - OSX Cocoa: Error in resetting colors in two drawRect method implementations

> ID：13213057
> 
> 赞同：0
> 
> 时间：2012-11-03T20:11:52.800
> 
> 标签：macos, cocoa, drawrect, nscolor

I have a Table subclass of NSView which contains several blocks of the Block subclass of NSView. This is the code for Table's drawRect: method:

```
- (void)drawRect:(NSRect)dirtyRect
{
    [NSGraphicsContext saveGraphicsState];
    [[[NSColor whiteColor] colorWithAlphaComponent:0.6] set];
    [NSBezierPath fillRect:dirtyRect];
    [NSGraphicsContext restoreGraphicsState];
} 
```

And this the code of Block's drawRect: method:

```
-(void)drawRect:(NSRect)dirtyRect
{
    [NSGraphicsContext saveGraphicsState];
    [color set];
    [NSBezierPath fillRect:dirtyRect];
    [NSGraphicsContext restoreGraphicsState];
} 
```

where "color" is set to [[NSColor whiteColor] colorWithAlphaComponent:0].

But I don't understand why, when I run the application, evenrything's fine, but each time I click on a Block this gets filled with the classic gray initial background on Mac OS X... can anybody help? I would be very greatful, thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:23:07.020

将 Block 的 drawRect 调用更改为 " `colorWithAlphaComponent`" 到 " `1.0`"，我想你会准备好的。

零的 alpha 意味着透明的不透明度。查看[Apple 的“颜色编程主题”文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DrawColor/Tasks/UsingColorSpaces.html)，您会看到他们多次提到“alpha”。

ps 你可能想改变“Block”的类名，因为它可能会让那些想传统Objective C 块的人感到困惑^ { }。

# php - how to convert array to string?

> ID：13213059
> 
> 赞同：-1
> 
> 时间：2012-11-03T20:12:14.443
> 
> 标签：php, jquery, html

I'm getting control text as an array and I want to pass this to $.post as string. I need suggestions on how to convert it to string.

```
var controlText = $("input[name='control_text']").map(function() {
    return this.value;
}).get();
//alert(controlText);      
$.post("dbfile.php", {
    columns_one: columns_one,
    controlText: controlText,
    controlPara: controlPara,
    mandatoryValue: mandatoryValue
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:14:37.987

你可以用逗号加入他们：

```
var controlText = $("input[name='control_text']").map(function() {
    return this.value;
}).get().join( "," ); 
```

或 json 编码：

```
var controlText = JSON.stringify( $("input[name='control_text']").map(function() {
    return this.value;
}).get() ); 
```

# java - GET参数的SpringMVC RequestMapping

> ID：13213061
> 
> 赞同：70
> 
> 时间：2012-11-03T20:12:30.630
> 
> 标签：java, spring, spring-mvc

如何使 RequestMapping 处理 url 中的 GET 参数？例如我有这个网址

```
http://localhost:8080/userGrid?_search=false&nd=1351972571018&rows=10&page=1&sidx=id&sord=desc 
```

（来自 jqGrid）

我的 RequestMapping 应该是什么样子？我想使用 HttpReqest 获取参数

试过这个：

```
@RequestMapping("/userGrid")
    public @ResponseBody GridModel getUsersForGrid(HttpServletRequest request) 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-11-03T20:28:06.083

在方法参数中使用[@RequestParam](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/RequestParam.html)以便 Spring 可以绑定它们，还使用[​​@RequestMapping.params](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html#params%28%29)数组来缩小 spring 将使用的方法。示例代码：

```
@RequestMapping("/userGrid", 
params = {"_search", "nd", "rows", "page", "sidx", "sort"})
public @ResponseBody GridModel getUsersForGrid(
@RequestParam(value = "_search") String search, 
@RequestParam(value = "nd") int nd, 
@RequestParam(value = "rows") int rows, 
@RequestParam(value = "page") int page, 
@RequestParam(value = "sidx") int sidx, 
@RequestParam(value = "sort") Sort sort) {
// Stuff here
} 
```

这样，Spring 将仅在所有参数都存在时才执行此方法，从而使您免于检查空值和相关内容。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-11-03T20:26:01.977

您可以`@RequestMapping`像这样添加：

```
@RequestMapping("/userGrid")
public @ResponseBody GridModel getUsersForGrid(
   @RequestParam("_search") String search,
   @RequestParam String nd,
   @RequestParam int rows,
   @RequestParam int page,
   @RequestParam String sidx) 
   @RequestParam String sord) { 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-06-10T00:48:55.140

这将从请求中获取所有参数。仅用于调试目的：

```
@RequestMapping (value = "/promote", method = {RequestMethod.POST, RequestMethod.GET})
public ModelAndView renderPromotePage (HttpServletRequest request) {
    Map<String, String[]> parameters = request.getParameterMap();

    for(String key : parameters.keySet()) {
        System.out.println(key);
        String[] vals = parameters.get(key);
        for(String val : vals)
            System.out.println(" -> " + val);
    }

    ModelAndView mv = new ModelAndView();
    mv.setViewName("test");
    return mv;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-10-21T08:33:38.987

如果你愿意改变你的 uri，你也可以使用`PathVariable`.

```
@RequestMapping(value="/mapping/foo/{foo}/{bar}", method=RequestMethod.GET)
public String process(@PathVariable String foo,@PathVariable String bar) {
    //Perform logic with foo and bar
} 
```

**注意：**第一个 foo 是路径的一部分，第二个是`PathVariable`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-02T09:06:20.097

这适用于我的情况：

```
@RequestMapping(value = "/savedata",
            params = {"textArea", "localKey", "localFile"})
    @ResponseBody
    public void saveData(@RequestParam(value = "textArea") String textArea,
                         @RequestParam(value = "localKey") String localKey,
                         @RequestParam(value = "localFile") String localFile) {
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-03T20:23:16.650

您应该将一种模板写入`@RequestMapping`：

```
http://localhost:8080/userGrid?_search=${search}&nd=${nd}&rows=${rows}&page=${page}&sidx=${sidx}&sord=${sord} 
```

现在定义您的业务方法，如下所示：

```
@RequestMapping("/userGrid?_search=${search}&nd=${nd}&rows=${rows}&page=${page}&sidx=${sidx}&sord=${sord}")
public @ResponseBody GridModel getUsersForGrid(
@RequestParam(value = "search") String search, 
@RequestParam(value = "nd") int nd, 
@RequestParam(value = "rows") int rows, 
@RequestParam(value = "page") int page, 
@RequestParam(value = "sidx") int sidx, 
@RequestParam(value = "sort") Sort sort) {
...............
} 
```

因此，框架将映射`${foo}`到适当`@RequestParam`的 .

由于 sort 可能是 asc 或 desc 我将其定义为枚举：

```
public enum Sort {
    asc, desc
} 
```

Spring 很好地处理了枚举。

# google-analytics - 谷歌分析记录了来自多个地点的 100 次新访问

> ID：13213068
> 
> 赞同：1
> 
> 时间：2012-11-03T20:13:11.837
> 
> 标签：google-analytics

谷歌分析突然显示来自大量不同国家的新访问量激增，我有一个小型社区网站，所以我确定这是某种攻击，我只是不确定它是如何完成的，我希望有人能够对此有所了解，这样我就可以确保我将来受到它的保护

任何要参考的意见或文件将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:29:40.440

如果这是一次 DDoS 攻击尝试，您将无能为力……这些攻击几乎是不可避免的。但是，我已经看到服务器可以最大限度地减少在重负载时切换到网页的静态版本的影响。

也许这不是 DDoS，或者根本不是攻击……我认为，如果他们不经常请求内容，那么 100 个客户不足以删除一个页面。

# javascript - 这个角度教程中的“中继器”是茉莉花的概念吗？

> ID：13213072
> 
> 赞同：7
> 
> 时间：2012-11-03T20:13:35.003
> 
> 标签：javascript, testing, jasmine, angularjs

浏览 Angular js[教程](http://docs.angularjs.org/tutorial/step_04)，我不明白 jasmine 测试中的中继器（功能？）来自哪里。这是茉莉花还是角结构？

该页面在元素中确实有一个 ng-repeat 属性`<li>`- 但我看不出它如何转化为测试中对“中继器”的引用

```
 it('should be possible to control phone order via the drop down select box',
    function() {
    //let's narrow the dataset to make the test assertions shorter
    input('query').enter('tablet');

    //where does  'repeater' below come from?
    expect(repeater('.phones li', 'Phone List').column('phone.name')).
    toEqual(["Motorola XOOM\u2122 with Wi-Fi",
    "MOTOROLA XOOM\u2122"]);

    select('orderProp').option('Alphabetical');

    expect(repeater('.phones li', 'Phone List').column('phone.name')).
    toEqual(["MOTOROLA XOOM\u2122",
    "Motorola XOOM\u2122 with Wi-Fi"]);
    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T20:35:27.753

这`repeater`不是 Jasmine 构造，它是 AngularJS e2e 场景测试器的概念。

该`repeater`函数在 AngularJS e2e 场景运行器使用的 DSL 中定义，其定义可以在这里看到： https [://github.com/angular/angular.js/blob/master/src/ngScenario/dsl.js#L249](https://github.com/angular/angular.js/blob/master/src/ngScenario/dsl.js#L249)相应的文档位于：[http ://docs.angularjs.org/guide/dev_guide.e2e-testing](http://docs.angularjs.org/guide/dev_guide.e2e-testing)

应该注意的是，即使 AngularJS 使用 Jasmine 语法进行端到端测试，那些 e2e 测试*也不*是Jasmine 测试，它们只是碰巧使用了非常相似的语法。AngularJS 运行`ngScenario`器的目的是在浏览器中执行端到端测试，并使用与浏览器环境（DOM、位置等）紧密相关的匹配器。Jasmine 更专注于单元测试，并为 JavaScript 对象提供匹配器。

The mentioned `repeater` is just a way of counting DOM object given a jQuery selector and it is true that is usually used to count DOM element produced by the `ngRepeat` directive.

# javascript - regular expression to match strings start with a lowercase and continue with mixed cases

> ID：13213077
> 
> 赞同：0
> 
> 时间：2012-11-03T20:13:47.803
> 
> 标签：javascript, regex

I'm trying to write a `regular expression` that says first letter not to be uppercase and the rest 0-19 characters mixed case. This doesn't seem to do it.

```
!/^[A-Z][a-zA-Z]{0,19}$/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:19:05.200

如果你想要第一个字母小写，所有其他小写或大写，你可以这样做：

```
/^[a-z][a-zA-Z]{0,19}$/ 
```

请注意，您**不能**只说`[^A-Z]`，因为这将允许非字母字符通过，例如数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T23:35:33.567

许多解决方案之一是正则表达式模式

```
/^(?![A-Z])[a-zA-Z]{1,20}$/ 
```

...内容为：一到二十个字母，前面没有大写

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T20:19:56.037

更改自：

```
!/^[A-Z][a-zA-Z]{0,19}$/ 
```

至：

```
/^[^A-Z][a-zA-Z]{0,19}$/ 
```

那应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T20:15:34.527

使用`[^A-Z]`代替`[A-Z]`

`[^ ]`是相反的。`[]`它匹配不包含在括号内的字符

所以，应该是

```
/^[^A-Z][a-zA-Z]{0,19}$/ 
```

**或者**

只需使用

```
 /^[a-z][a-zA-Z]{0,19}$/ 
```

# java - 脸书认证安卓

> ID：13213082
> 
> 赞同：1
> 
> 时间：2012-11-03T20:14:30.443
> 
> 标签：java, android, facebook

所以，这是我的登录功能：

```
 public void facebookLogin()
{

    shareAppPreferences = new AppPreferences(getApplicationContext());
     facebook = ((GlobalVars)getApplicationContext()).facebook;

     String access_token = shareAppPreferences.getAccessToken();
     long expires = shareAppPreferences.getAccessExpires();
     Log.d("MyTag","token:" +access_token);
     if(access_token != null) {
         facebook.setAccessToken(access_token);
     }
     if(expires != 0) {
         facebook.setAccessExpires(expires);
     }
     /*
      * Only call authorize if the access_token has expired.
      */
     if(!facebook.isSessionValid()) {
         Log.d("MyTag","In Authorize");
          facebook.authorize(this, new String[] {}, new DialogListener() {
              @Override
              public void onComplete(Bundle values) {
                //  new AccessKeyTask().execute("http://37.49.226.66/allaroundme/requests.php");
                  shareAppPreferences.saveAccessToken(facebook.getAccessToken());
                  Log.d("MyTag","face token: " +facebook.getAccessToken());
                  shareAppPreferences.saveAccessExpires(facebook.getAccessExpires());

              }

              @Override
              public void onFacebookError(FacebookError error) {}

              @Override
              public void onError(DialogError e) {}

              @Override
              public void onCancel() {}
          });
     }
     Intent intent = new Intent(this,MainActivity.class);
     Log.d("MyTag", "starting activity");
     startActivity(intent);

} 
```

我真的不明白为什么这段代码不起作用，我在尝试使用该代码之前通过 facebook 应用程序注销了 facebook。onComplete() 似乎没有发生，并且访问令牌始终为空。但在我第一次登录后，我不必输入信息。有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T00:28:51.197

这是对我有用的代码：

```
 public void loginToFacebook(){
        facebook.authorize(CandyCount.this, new String[]{"publish_stream", "email"}, Facebook.FORCE_DIALOG_AUTH, new DialogListener() {

            public void onFacebookError(FacebookError e) {
                Toast.makeText(getApplicationContext(), "onFacebookError", Toast.LENGTH_SHORT).show();
            }

            public void onError(DialogError e) {
                Toast.makeText(getApplicationContext(), "onError", Toast.LENGTH_SHORT).show();
            }

            public void onComplete(Bundle values) {

                Editor editor = sp.edit();
                editor.putString("access_token", facebook.getAccessToken());
                editor.putLong("access_expires", facebook.getAccessExpires());
                editor.commit();
                updateButtonStatus();

                getName();

            }

            public void onCancel() {
                // TODO Auto-generated method stub

            }

        });
    } 
```

在 onCreate 中：

```
 sp = getPreferences(MODE_PRIVATE);
    access_token = sp.getString("access_token", null);
    expires = sp.getLong("access_expires", 0);
    getName = sp.getString("name", null);

    if (access_token != null){
        facebook.setAccessToken(access_token);
        fbName.setText("Hello, " + getName);
        updateButtonStatus();
    }
    if (expires != 0){
        facebook.setAccessExpires(expires);

    } 
```

在 updateButtonStatus 方法中，我更改了按钮的图像，在按钮的 onClick 中，我根据会话是否有效退出或登录。

查看此[链接](http://www.youtube.com/watch?v=xndi6s9Tn_U)，它在解释 facebook sdk 方面非常好。

您显然需要更改代码以满足您的特定需求。我希望这有帮助！

# html - 对齐复选框和其他两个元素，就好像它们是一条线一样

> ID：13213087
> 
> 赞同：2
> 
> 时间：2012-11-03T20:14:59.563
> 
> 标签：html, css, checkbox, css-float

我有一个现在看起来像这样的表格：

[当前形式](http://jsfiddle.net/ZmfaeE/)

现在，我想添加一个复选框和一个让用户接受网站条款的文本。我希望此复选框和文本位于“发送按钮”的左侧，所以这是我尝试过的：

```
<form action="#" method="post" id="form" class="accept_form" style="display: block; ">
    <fieldset> 
        <div class="mail_from"> 
            <label for="from">Name</label> 
            <input class="mail" type="text" name="from" id="from"> 
        </div> 
        <div class="mail_to"> 
            <label>Last name</label> 
            <input class="mail" type="text" > 
        </div> 
        <div class="message"> 
            <label>Comment</label> 
            <textarea>I love this page, so I sign up</textarea> 
        </div> 
        <div class = "terms_button">
        <input type = "checkbox" name = "agree">
        <label for = "agree"> Accept the terms </label>
        <button type="submit">Send</button>
        </div>
    </fieldset>
</form>​​​​​​​​​​​​​​​​​​​​​​ 
```

所以，基本上我创建了一个新的 div 并在里面尝试对齐这些元素。但是，如您所见，复选框和文本高于发送按钮。我该如何解决这个问题？

演示在这里：[未对齐复选框与发送按钮](http://jsfiddle.net/ag44K/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T00:36:25.440

`float: right`从此选择器中删除：

```
form .terms_button button {
    float:right;
} 
```

工作示例（唯一的变化是删除`float: right;`） [http://jsfiddle.net/ag44K/22/](http://jsfiddle.net/ag44K/22/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:22:07.393

CSS 属性是`vertical-align`您可能正在寻找的，请参阅[W3.org](http://www.w3.org/TR/2011/REC-CSS2-20110607/visudet.html#propdef-vertical-align)上的 CSS2 规范以进行深入讨论。恐怕麻烦开始了，标签文本大小不是 100%（复选框元素的），并且可能还与按钮元素中的边框、填充和字体大小有关——您可能需要进行一些更长时间的调整（特别是如果您希望它在缩放时合理缩放）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:23:29.807

唯一提示：我查看您的网站并概述您的代码，我看到提交按钮具有浮动右侧，我相信添加一个新`li`项目并将项目设置为浮动右侧它可以将项目放在提交的左侧按钮，因为您要在提交按钮之后添加项目。希望这可以帮助你...

# jquery - 为什么 jQuery 没有 :readonly 选择器？

> ID：13213091
> 
> 赞同：1
> 
> 时间：2012-11-03T20:15:25.073
> 
> 标签：jquery, readonly

为什么 jQuery 没有*:readonly*选择器？

输入有*:checked*和*:selected*和*:disabled*选择器。那么，为什么没有*:readonly*选择器呢？我的意思是，作为“编码糖”。

因为所有这些方括号都很难看——“.is('[readonly]')”。为什么没有“.is(':readonly')”？

*也许:readonly*选择器不存在是有原因的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T20:18:10.420

此增强功能在以下位置被拒绝：[http ://bugs.jquery.com/ticket/2497](http://bugs.jquery.com/ticket/2497)

给出的理由：

> 有关解决方案，请参见上文。添加新的伪代码不是一个好主意，因为由于使用 querySelectorAll，它们会在 Firefox / Safari / Chrome 中引发控制台警告

亲眼看看：

```
document.querySelector(":readonly")
//Error: SYNTAX_ERR: DOM Exception 12 
```

您可以使用`:read-only`，但我不确定是否支持：

[http://jsfiddle.net/YGuNG/](http://jsfiddle.net/YGuNG/)

适用于chrome，但不适用于firefox。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-03-11T23:47:03.123

`$(':not([readonly]')`...为我工作。

# java - MouseListener 检测被点击的java

> ID：13213096
> 
> 赞同：-1
> 
> 时间：2012-11-03T20:15:58.087
> 
> 标签：java, user-interface, mouse, mouseevent, mouseclick-event

> **可能重复：**
> [MouseListener 需要与许多对象 Java 交互](https://stackoverflow.com/questions/13212159/mouselistener-needs-to-interact-with-many-object-java)

我有一个程序，在屏幕上绘制了许多图像以及其他内容。我有一个鼠标监听器，但是检测屏幕上点击了什么的最有效方法是什么？因为如果我有一个`100px x 50px`从点开始的图像@ `500, 300`，

对于屏幕上的每个图像，我不能说`if (x > 500 && x < 600)`等等？

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:41:54.143

有效解决此类问题的一种方法是使用[QuadTree](http://en.wikipedia.org/wiki/Quadtree)，它是一种递归细分屏幕的数据结构。这使您可以仅检查大致位于屏幕右侧的图像。

或者更简单的方法是将屏幕简单地细分为四分之一或十六分之一，并将每个图像与其覆盖的屏幕部分“注册”。如果您有任何相对于屏幕尺寸的大图像，这可能不太有效。

这可能仅在您的许多图像是静态的情况下才有效，因为四叉树需要在图像移动时重新计算。

您可能会发现简单地检查每张图像实际上已经足够快了——您没有说您有多少张图像，或者目前检查所有图像需要多长时间......

# django - 如何让 Django ModelForm 只有一个字段？

> ID：13213097
> 
> 赞同：1
> 
> 时间：2012-11-03T20:16:26.640
> 
> 标签：django, forms, field, modelform

我有一堂课，它是modelForm。

```
class UserGoal(models.Model):
    user = models.ForeignKey(User)
    goal = models.ForeignKey(Goal)
    deadline = models.DateTimeField(blank=True, null=True)
    goalETA = models.DateTimeField(blank=True, null=True)
    def __unicode__(self):
        return u'%s, %s, %s ' %(self.user, self.goal, self.deadline)

class partialGoalSetForm(ModelForm):
    class Meta:
        model = UserGoal
        fields = ('deadline', 'goalETA') 
```

此代码适用于只有 2 个字段（deadline 和 goalETA）在表单中。但是，如果我从列表中删除一个：

```
 fields = ('deadline') 
```

然后，我收到以下错误：

django.core.exceptions.FieldError：为 UserGoal 指定的未知字段（a、e、d、i、l、n）

它似乎是按字符标记“截止日期”。很奇怪。

我尝试过的解决方案包括：

```
 fields = ('deadline')

 fields = 'deadline'

 field = ('deadline')

 field = 'deadline' 
```

这些都不起作用。

有什么建议么？感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T20:20:47.253

由于字段只有一项，因此需要将尾随逗号视为元组。否则，它被视为字符串`"deadline"`。

```
fields = ('deadline',) 
```

# html - IE8 中没有字段集填充顶部

> ID：13213099
> 
> 赞同：3
> 
> 时间：2012-11-03T20:16:32.570
> 
> 标签：html, css, forms, padding, fieldset

样品形式：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<style>
fieldset {padding: 50px;}
</style>
</head>
<body>
<form>
 <fieldset>
  <legend>Form</legend>
  <p>
  <label for="name">Name </label><input id="name" type="text">
  </p>
  <p>
  <label for="email">Email </label><input id="email" type="text">
  </p>
 </fieldset>
</form>
</body>
</html> 
```

它适用于所有主流浏览器，但在 IE8 中没有填充顶部。任何跨浏览器解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T21:11:16.803

这似乎是旧版本 IE 中的一个错误，可能是由于`legend`元素周围的一些混淆（嵌套在内部`fieldset`但以特殊方式呈现）引起的，因此填充在表单上方错位。我可以或多或少地在 IE 9 上以 Quirks 模式以及 IE 8 和 IE 7 仿真模式重现该问题。

作为一种解决方法，不要在`fieldset`元素上设置顶部填充。相反，在其中的第一个普通元素上设置一个上边距（不计算`legend`元素）。

# javascript - 如何在 tumblr 中使用标题时忽略源文本/链接

> ID：13213102
> 
> 赞同：1
> 
> 时间：2012-11-03T20:16:51.727
> 
> 标签：javascript, html, tumblr

我想在 tumblr 中使用标题作为我的图片帖子的标题，但正如您所知，tumblr 将 Source 链接放在标题中。

现在，我可以对标题区域进行负边距，但并非每个帖子都应该有来源。

有什么方法可以忽略标题中的源文本/链接（可以用作 javascript 字符串）？

谢谢

这些是实例：
使用`{Caption}`产生

*   “（来源：[sourcelink]，通过 [vialink]）”如果没有可用的标题 - 这就是需要隐藏/不显示的内容
*   “（通过 [vialink]）” 如果没有可用的来源或标题 - 也需要隐藏
*   “[sourcelink]: [caption]”如果有标题 - 不需要隐藏
*   “[caption]”如果你是字幕来源 - 也不应该被隐藏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-20T10:27:31.307

我不是很了解 Tumblr，但至少你可以在你的页面中加载 jQuery，并使用正则表达式来删除你不想要的元素。

另外，您不必为奇怪的值设置任何边距。

jQuery 看起来像这样：

```
$('.caption').each(function() {
  // Get the html() of the .caption div
  var text = $(this).html();

  // Look for (Source...) and remove it
  var regex = /\(Source:.*via(.*)\)+/ig;
  text = text.replace(regex, '');

  // Look for (via...) and remove it
  regex = /\(via(.*)\)+/ig;
  text = text.replace(regex, '');

  // Finally set the html() of the .caption div
  $(this).html(text);
}); 
```

看看这个 JSFiddle 例子：http: [//jsfiddle.net/jpreynat/atd5erbh/2/](http://jsfiddle.net/jpreynat/atd5erbh/2/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-09-30T22:04:24.907

你把这个放进去：

```
{block:ContentSource}
<!-- {SourceURL}{block:SourceLogo}<img src="{BlackLogoURL}"
width="{LogoWidth}" height="{LogoHeight}" alt="{SourceTitle}" />
{/block:SourceLogo}
{block:NoSourceLogo}{SourceLink}{/block:NoSourceLogo} -->
{/block:ContentSource} 
```

# php - MySQL Union 非法混合排序规则

> ID：13213103
> 
> 赞同：5
> 
> 时间：2012-11-03T20:17:04.637
> 
> 标签：php, mysql, sql, collate

我的 PHP 查询中有以下内容：

```
SELECT tags.tag, theValues.* 
FROM ch09.tbl_tags tags 
RIGHT JOIN ((SELECT 'dog' as 'Vals')
UNION (SELECT 'cat' as 'Vals')) theValues on tags.tag = theValues.Vals 
```

在“RIGHT JOIN”之后，括号内的所有内容都是根据用户输入动态创建的。

它在 MySQL 4 中运行良好，但我刚有一台新计算机并安装了 5.5，将 SQL 转储导入为`UTF-8`. 但我得到：

> “用于操作'='的排序规则（latin1_swedish_ci，IMPLICIT）和（utf8_general_ci，COERCIBLE）的非法混合”

可能有一种更好的方法来构建我的查询，我需要的只是用户在一个列中输入的所有内容作为“ `Vals`”，如果其中有匹配的标签，`tbl_tags.tag`那么它应该在一个名为“标签”的列中，否则标签列是空白的。

我曾尝试使用 Collat​​e：[http](http://www.answermysearches.com/mysql-fixing-illegal-mix-of-collations-message/352/) ://www.answermysearches.com/mysql-fixing-illegal-mix-of-collat​​ions-message/352/ ，但我根本无法让它工作。

所以我需要构建一个更好的查询或以某种方式使用 collat​​e 函数，但是如何？

提前致谢。

克雷格

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T20:28:12.437

请看以下问题： [MySQL 编码问题](https://stackoverflow.com/questions/12247120/mysql-illegal-mix-of-collations?rq=1)

我认为问题实际上涉及 Column 和 SQL 文本的编码。要解决此问题，请尝试在 WHERE 子句中使用[CONVERT(aaa USING bbb)](http://dev.mysql.com/doc/refman/5.5/en//cast-functions.html#function_convert)函数，如下所示：

```
SELECT tags.tag, theValues.* 
  FROM ch09.tbl_tags tags 
 RIGHT JOIN ((SELECT 'dog' as 'Vals')
       UNION (SELECT 'cat' as 'Vals')) theValues
   ON CONVERT(tags.tag USING utf8) = theValues.Vals 
```

或者，将表的列编码更改为 UTF8。

希望这可以帮助，

约翰...

# jquery - 使用 jQuery 航点滚动时更改背景颜色

> ID：13213105
> 
> 赞同：1
> 
> 时间：2012-11-03T20:17:16.340
> 
> 标签：jquery, colors, jquery-waypoints

当您向下滚动页面时，我想逐渐循环通过固定 div 的不同背景颜色。我想我可以使用 jQuery 航点来做到这一点，但需要一个手来开始，因为我不知道从哪里开始。

我正在处理的网站在这里：[www.samskirrowdesign.com](http://www.samskirrowdesign.com)我想更改页面顶部 3px 高固定 div 的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:32:47.423

根据您的滚动顶部位置，您可以进行渐变更改，例如

```
 $(window).scroll(function () { 
    $('#test').css('background-color','#BC46'+($(this).scrollTop()/10))
    }); 
```

看看这个小提琴

[**JSFIDDLE**](http://jsfiddle.net/adKRU/)

# javascript - 在 javascript 中处理文件名和预定的函数调用

> ID：13213110
> 
> 赞同：0
> 
> 时间：2012-11-03T20:17:39.490
> 
> 标签：javascript, perl, scheduled-tasks

我有几个关于 javascript 的问题：

1.  javascript 是否能够识别带有时间戳的文件名作为名称？

类似于下面使用 POSIX 模块的 Perl 代码？

```
my $filepath = sprintf("/path/to/file%s.JSON",strftime("%y%m%d",localtime)); 
```

这只是一个例子。我想查找格式的文件`yy/mm/dd/hh/min`

例如，说我想找到一个名为`12_11_03_15:15.json`我如何使用 javascript 执行此操作的文件。

1.  假设我创建了一个函数，我想每 15 分钟触发一次以读取文件，这如何使用 javascript 实现？我看了看，`setInterval()`但这不起作用，因为它取决于浏览器的启动时间。是否可以安排一个函数每隔 hh:00、hh:15、hh:30、hh:45 执行一次？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:23:37.437

您可以使用[Date 类](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)来获取有关当前时间的信息。

调度一个函数在某个时间运行，`setInterval()`确实是最好的选择。看起来你真正想要的是一种找出何时开始第一个间隔的方法，这样它就会落在一刻钟。为此，您应该再次使用 Date 来获取当前时间并从下一刻钟中减去它；您可以将结果值与 setTimeout 一起使用来计算第一个间隔的开始时间。

这是一个例子：http: [//jsfiddle.net/GSF6C/3/](http://jsfiddle.net/GSF6C/3/)

```
var nextQuarterHour = new Date();
nextQuarterHour.setMilliseconds(0);
nextQuarterHour.setSeconds(0);

do {
   nextQuarterHour.setMinutes(nextQuarterHour.getMinutes() + 1);
} while (nextQuarterHour.getMinutes() % 15)

var millisecondsToNextQuarterHour = nextQuarterHour.getTime() - Date.now();

document.write(millisecondsToNextQuarterHour);

setTimeout(function () {
    alert("Ding!");
    setInterval(function () { alert("Dong!"); }, 15 * 60 * 1000);
}, millisecondsToNextQuarterHour); 
```

​ ​</p>

# postgresql - psql 似乎无法正常工作

> ID：13213111
> 
> 赞同：0
> 
> 时间：2012-11-03T20:17:43.943
> 
> 标签：postgresql

> **可能重复：**
> [在psql中，为什么有些命令没有效果？](https://stackoverflow.com/questions/12472026/in-psql-why-do-some-commands-have-no-effect)

我刚刚安装了 Postgres 服务器，但在使用 psql 时遇到了问题。每当我在`psql`shell 中时，所有命令都没有任何效果。例如：

```
postgres=# create database testing
postgres=# create user foo 
```

我的理解是我应该看到这样的东西：

```
postgres=# create database testing
CREATE DATABASE
postgres=# create user foo
CREATE ROLE 
```

奇怪的是我可以使用 shell 命令来创建数据库和角色。我已经从`ppa:pitti/postgresql`Ubuntu 10.04 的香草安装中安装了 postgres（根据 railscast #335）。

我在谷歌上花了很多时间试图找出我的问题是什么，但我似乎无法得到任何答案。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T20:26:42.307

您可能没有看到这一点，因为您没有用分号 (;) 结束该行。你的例子应该写成：

```
postgres=# CREATE DATABASE testing;
postgres=# CREATE ROLE foo; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:31:11.553

你确定你的命令被终止了`;`吗？发出的所有语句`psql`都应以[分号](http://www.postgresql.org/docs/current/interactive/app-psql.html#R2-APP-PSQL-4)终止，除非您`-S`在调用时指定了 switch `psql`。

另一种发送查询缓冲区执行的方法是发出`\g`元命令。

# c++ - 应该 std::atomic ::load 正在做一个比较和交换循环？

> ID：13213113
> 
> 赞同：5
> 
> 时间：2012-11-03T20:17:52.917
> 
> 标签：c++, visual-c++, visual-studio-2012, atomic, compare-and-swap

**摘要**：我曾预计`std::atomic<int*>::load`with`std::memory_order_relaxed`将接近直接加载指针的性能，至少在加载的值很少更改时。我看到原子负载的性能比 Visual Studio C++ 2012 上的正常负载差得多，因此我决定进行调查。事实证明，原子负载是作为[比较和交换](http://en.wikipedia.org/wiki/Compare-and-swap)循环实现的，我怀疑这不是最快的实现。

**问题**：是否有某些原因`std::atomic<int*>::load`需要进行比较和交换循环？

**背景**：我相信 MSVC++ 2012 正在基于此测试程序对指针的原子负载进行比较和交换循环：

```
#include <atomic>
#include <iostream>

template<class T>
__declspec(noinline) T loadRelaxed(const std::atomic<T>& t) {
  return t.load(std::memory_order_relaxed);
}

int main() {
  int i = 42;
  char c = 42;
  std::atomic<int*> ptr(&i);
  std::atomic<int> integer;
  std::atomic<char> character;
  std::cout
    << *loadRelaxed(ptr) << ' '
    << loadRelaxed(integer) << ' '
    << loadRelaxed(character) << std::endl;
  return 0;
} 
```

我正在使用一个`__declspec(noinline)`函数来隔离与原子负载相关的汇编指令。我做了一个新的MSVC++ 2012项目，添加了一个x64平台，选择了发布配置，在调试器中运行程序并查看了反汇编。事实证明，`std::atomic<char>`和`std::atomic<int>`参数最终都给出了相同的调用`loadRelaxed<int>`- 这一定是优化器所做的事情。这是被调用的两个 loadRelaxed 实例的反汇编：

**`loadRelaxed<int * __ptr64>`**

```
000000013F4B1790  prefetchw   [rcx]  
000000013F4B1793  mov         rax,qword ptr [rcx]  
000000013F4B1796  mov         rdx,rax  
000000013F4B1799  lock cmpxchg qword ptr [rcx],rdx  
000000013F4B179E  jne         loadRelaxed<int * __ptr64>+6h (013F4B1796h) 
```

**`loadRelaxed<int>`**

```
000000013F3F1940  prefetchw   [rcx]  
000000013F3F1943  mov         eax,dword ptr [rcx]  
000000013F3F1945  mov         edx,eax  
000000013F3F1947  lock cmpxchg dword ptr [rcx],edx  
000000013F3F194B  jne         loadRelaxed<int>+5h (013F3F1945h) 
```

该指令`lock cmpxchg`是原子[比较和交换](http://en.wikipedia.org/wiki/Compare-and-swap)，我们在这里看到原子加载 a `char`、 an`int`或 an的代码`int*`是一个比较和交换循环。我还为 32 位 x86 构建了这段代码，该实现仍然基于`lock cmpxchg`.

**问题**：是否有某些原因`std::atomic<int*>::load`需要进行比较和交换循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:08:56.060

我不相信宽松的原子负载需要比较和交换。最后，这个 std::atomic 实现不能用于我的目的，但我仍然想拥有接口，所以我使用 MSVC 的屏障内在函数制作了自己的 std::atomic。`std::atomic`这比我的用例的默认性能更好。您可以在[此处](https://github.com/broune/mathicgb/blob/master/src/mathicgb/Atomic.hpp)查看代码。对于加载和存储的所有排序，它应该被实现为 C++11 规范。顺便说一句，GCC 4.6 在这方面并不好。我不知道 GCC 4.7。

# c++ - 扩展枚举类

> ID：13213119
> 
> 赞同：2
> 
> 时间：2012-11-03T20:18:37.570
> 
> 标签：c++, enums, c++11, static-members, enum-class

我有枚举课，说

```
enum class Enum{
   var1, var2;
} 
```

现在我想添加一些取决于参数 ie 的成员`var3(int)`。好的，这不是枚举，所以我想通过普通类来改变它，但我的目标是让旧代码（`Enum::var1`作为类型的值`Enum`）可以编译。

我试图这样做（让我们暂时忘记`var3`，它将是静态函数）：

```
class Enum{
    public:
        const static Enum var1 = Enum(1);
        const static Enum var2 = Enum(2);
    private:
        Enum(int v):v(v){
        }
    int v;
    //operator == using v
}; 
```

但它不会编译，因为 Enum 的类型不完整。
我不能在课后声明它，因为它在标题中，所以它不适用于多个 cpp。此外，在这里有公共构造函数并不是一个好主意。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:24:14.100

**解决方案1：**

对于静态变量问题：在类声明中声明你的静态变量：

```
class Enum
{
    public:
        static const Enum var1;
        static const Enum var2;
        Enum(int v):v(v)
        {
        }
    private:
        int v;
        //operator == using v
}; 
```

然后，为这个类创建一个源文件`Enum.cpp`，包含：

```
#include "Enum.h"
const Enum Enum::var1 = Enum(1);
const Enum Enum::var2 = Enum(2); 
```

**解决方案2：**

如果您希望它仅是标头，则可以使用静态变量而不是类变量：

```
class Enum
{
    public:
        Enum(int v):v(v)
        {
        }
    private:
        int v;
};

namespace Enumeration // It is not possible to name it 'Enum'
{
    // static => local to translation unit. No linking conflict
    static const Enum var1 = Enum(1);
    static const Enum var2 = Enum(2);
} 
```

你可以在这里看到[一个活生生的例子](http://ideone.com/nnxjQo)。唯一的缺点是您不能将类的名称用于命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T00:19:50.787

你可以写一个这样的类：

```
class Enum
{
public
    enum NestedEnum : int
    {
        var1, var2
    };

    static NestedEnum var3;

    Enum(NestedEnum value) : value(value) { }

    operator NestedEnum() const { return value; }
private:
    NestedEnum value;
}; 
```

您可以在其他任何地方声明：

```
Enum::var3 = (Enum::NestedEnum)someIntegerVariable; 
```

# html - 我们应该在标签内使用空格吗？ 或标题？

> ID：13213122
> 
> 赞同：1
> 
> 时间：2012-11-03T20:19:10.020
> 
> 标签：html, css, line-breaks, semantic-markup, progressive-enhancement

我在`<br>`标题中使用了一个标签（例如`h1`），并且作为我的响应式设计的一部分，具有渐进增强功能（这会是一个例外吗？）——我想将它隐藏在更窄的视口上。

当然，CSS 规则是：

```
h1 br {
    display: none;
} 
```

但是在 HTML 中处理这个问题的正确方法是什么？

如果这样说，那么当`br`隐藏时，“heading”和“with”之间没有空格：

```
1) <h1>Example heading<br>with a break right thurr</h1> 
```

那么以下语义是否正确？

```
2) <h1>Example heading <br>with a break right thurr</h1> 
```

或者这个呢？

```
3) <h1>Example heading<br> with a break right thurr</h1> 
```

很挑剔，我知道，但我很想听听。

PS 在这种情况下，绝对必须使用 a `br`，因为“示例标题”比“with a break right thurr”要短——使用流体容器会在不需要的地方强制中断。

此外，正如 David 所指出的，示例 #2 和 #3 都可以工作——但它们在语义上是否正确？虽然 HTML 标签周围的空格是语义性的并且被忽略（这就是我们使标记易于阅读的方式）......但是元素标签内的空格呢？他们应该在那里吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T18:15:19.917

我认为您对[`br`元素](http://www.w3.org/TR/html5/the-br-element.html#the-br-element)的使用不正确。只有在换行符有意义时才必须使用它，而不是出于布局目的：

> `br`元素只能用于实际上是内容一部分的换行符，如诗歌或地址。

您应该改用该`span`元素：

```
<h1>Example heading <span>with a break right thurr</span></h1> 
```

分别

```
<h1><span>Example heading</span> with a break right thurr</h1> 
```

使用 CSS 如下：

```
h1 > span {display:block;} 
```

所以现在也没有问题把空间放在哪里。如果`br`使用，决定在哪里/是否使用空格应该没有问题，因为它必须是一个有意义的中断（不一定是换行符），所以总会有某种分隔符（换行符，定界符字符/图形、口语停顿等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T18:42:00.640

我养成了一个习惯，总是在`<br>`

```
<h1>Example heading<br>
with a break right thurr</h1> 
```

然后你有你的空白。

然而，unor 有一点：如果你不想在某些情况下打破那里，你不应该输入`<br>`if 你关心语义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T22:54:40.540

打破标题感觉有点奇怪 - 尽管我理解你的逻辑。

您是否会考虑将标题放在某个宽度的离散列中？

此外，如果您正在通过较小的屏幕设备阅读此内容，我假设您在`@media only screen`部分或类似内容中拥有此内容。

`<br>`写成`<br />`(self closing tag)会稍微好一些，但`<br>`如果在过渡文档或 html5 文档中也可以。

1.  和 3\. ; 语义正确性并没有真正涉及。该部分的语义是“这是一个顶部标题”；就空格甚至回车而言，如此微小的细节并没有特别重要。任何大于单个空格的空格都会被忽略，元素标签内的空格通常是不可取的。解析器将始终尽力而为（祝福他们......好吧，除了 IE），但如果您在公平的标签内占用空间，仍然会完全感到困惑。`< p >`例如，将被解释为左括号、字母“p”和右括号，而不是段落标记

还可以考虑使用[`<wbr>`](http://www.w3schools.com/tags/tag_wbr.asp)which 为更长的单词提供可选的分词。

# java - 相等运算符，奇怪的结果？

> ID：13213128
> 
> 赞同：1
> 
> 时间：2012-11-03T20:19:50.390
> 
> 标签：java

我对以下代码有疑问：

```
public class Equivalence {
    public static void main(String[] args) {
        Integer n1 = new Integer(47);
        Integer n2 = new Integer(47);
        System.out.println(n1 == n2);
        System.out.println(n1 != n2);
    }
} 
```

结果输出让我感到惊讶：

```
false
true 
```

我已经在线检查了 Javadoc 中的构造函数，没有任何帮助。

提前致谢

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T20:20:52.993

您应该使用[`equals`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#equals%28java.lang.Object%29)来检查值相等。因为 Integer 是包装 int 值的包装类。`==`根据参考检查相等性，因此在这两种情况下您的参考都是不同的。

> 将此对象与指定对象进行比较。当且仅当参数不为 null 并且是包含与此对象相同的 int 值的 Integer 对象时，结果才为真。

```
 n1.equals(n2); 
```

如果你这样做

```
int n1 = new Integer(47);
int n2 = new Integer(47); 
```

你会得到你期望的输出。

因为Java维护整数池，`127`你`-128`也可以这样做

```
 Integer n1 = Integer.valueOf(47);
 Integer n2 = Integer.valueOf(47);<-- will return you the same reference
     n1==n2 >>> True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T20:23:21.463

只有原始类型可以可靠地与 进行比较`==`。对于对象（并且`Integer`是对象类型），`equals()`应该使用方法。

`==`可用于对象，但仅用于检查两个对象是否实际上相同。例如：

```
Integer n1 = new Integer(47);
Integer n2 = n1;
// n1 == n2 will be true 
```

最好将`int`s 视为数字本身，并将`Integer`s 视为写有数字的便利贴。`==`仅当您谈论的是相同的便利贴`equals()`时才会返回 true，但是对于上面具有相同编号的任何两个便笺将返回 true。

使问题复杂化的是，自 1.5 版以来，Java 还具有[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)功能，即`int`s 会在需要时自动转换为`Integer`，反之亦然。如果您不小心，这可能会导致非常令人惊讶的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T20:23:44.473

`n1 == n2`,**比较对象实例**，因此`n1 == n2`将返回并将`false`作为和不同的**对象实例返回。**`n1 != n2``true``n1``n2`

 **如果您使用`equals`方法或获取`int (primitive tpye)`值，然后使用比较，`== or !=`您将得到正确的结果，例如

```
 System.out.println(n1.equals(n2)); //true
    System.out.println(!n1.equals(n2));//false 
```

或者

```
 System.out.println(n1.intValue() == n2.intValue()); //true
    System.out.println(n1.intValue() != n2.intValue()); //false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T20:24:09.453

我相信这是因为您没有比较 n1 和 n2 的值，而是在比较对象引用。而且由于它们是两个不同的对象，它们的引用是不一样的。

因此，您应该使用 equals() 方法来比较它们的值

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-03T20:24:46.550

`java.Lang.Integer``object`在java中是一个。`equals()`您应该使用方法检查两个 Integer 对象是否相等

您正在检查 n1 对 Integer 对象的引用和 n2 对另一个 Integer 对象的引用是否指向同一个 Integer 对象。因为`==`运算符检查两个引用变量是否引用同一个对象。在这种情况下，他们不是。尝试

```
 Integer n1 = New Integer(47);
              Integer n2 = New Integer(47);
              System.out.println(n1.equals(n2));
              System.out.println(n1.equals(n2)); 
```**

# c# - yield return 语句如何不返回任何元素？

> ID：13213130
> 
> 赞同：5
> 
> 时间：2012-11-03T20:20:15.097
> 
> 标签：c#, methods, iterator, enumerator, yield-return

我正在练习删除二叉搜索树上的节点，并使用空模式为空链接（**NullNode**）创建了一个特殊类型，因此我可以为“空”类型添加一些理想的行为。**Node**类型和Nullnode**类型**共享相同的**INode**接口，其中包括递归方法。

INode接口包括用于**PreOrder 、InOrder 和 PostOrder 遍历的****IEnumerable**递归方法，但我不希望 NullNode 返回任何元素（通过 yield return 语句）。

我能做些什么？

我知道我可以使用一个不可能的 if 条件，然后在方法中放置一个 yield return 语句，但我不认为这个解决方案是好的。应该有更好的方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-03T20:31:51.320

使用 yield break 语句：

```
private static IEnumerable<INode> YieldEmpty()
{
    yield break;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T20:29:41.843

您是否尝试过返回这样的内容而不返回任何内容（或空枚举器）：

```
return Enumerable.Empty<T>(); 
```

或者也许 using`yield break;`可以作为退出收益率循环的替代方案。希望这可以帮助你...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T20:30:19.937

```
private static IEnumerable<T> ReturnNoElements()
{
   return Enumerable.Empty<T>();
} 
```

# zend-framework - 从 Zend Framework 1.11 升级到 1.12 导致 WSOD

> ID：13213132
> 
> 赞同：0
> 
> 时间：2012-11-03T20:20:24.967
> 
> 标签：zend-framework, bootstrapping

我正在运行 Centos 6.3。我已经使用 Yum 安装了 php-ZendFramework。我有一个使用默认身份验证适配器运行良好的应用程序。

我执行了“yum 更新”并安装了 php-ZendFramework 1.12.0。现在，当我运行我的应用程序时，我得到一个白屏死机。其他一切都没有改变。

如果我在 Bootstrap 的末尾放置一个 die("foo")，我会看到“Foo”。如果我把它作为我的身份验证控制器操作的第一行，我会得到 WSOD。

从我正在阅读的内容来看，这可能与从 Zend 2 反向移植的新自动加载器有关。有人对如何解决这个问题有任何建议吗？

这是我的引导程序：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{

protected function _initAutoload()
{
    $modelLoader = new Zend_Application_Module_AutoLoader(array(
        'namespace' => '',
        'basePath'  => APPLICATION_PATH));

    /*********************************************************
      These lines force login if not already logged in                           
    *********************************************************/
    $acl = new Model_SystemAcl;
    $auth = Zend_Auth::getInstance();
    $fc = Zend_Controller_Front::getInstance();
    $fc->registerPlugin(new Plugin_AccessCheck($acl,$auth));
    /*********************************************************/

    return $modelLoader;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:06:48.140

显然 Zend 改变了分布。我做了一个 yum install php-ZendFramework* 来获得完整的安装，现在一切正常。

# ruby - 递归查找和删除最旧的AVI文件

> ID：13213135
> 
> 赞同：1
> 
> 时间：2012-11-03T20:20:33.820
> 
> 标签：ruby

我一直在尝试编写一个 Ruby 脚本来查找和删除文件夹中最旧的 AVI 文件。我[在 Python 中找到了一个非常接近的脚本](https://stackoverflow.com/questions/837606/find-the-oldest-file-recursively-in-a-directory/837840#837840)，并且我自己对 Ruby 解决方案有了一个良好的开端：

```
require 'fileutils'
stat = Sys::Filesystem.stat("/")
mb_available = stat.block_size * stat.blocks_available / 1024 / 1024
#if there is less than 130MB free
if mb_available < 130000
    require 'find'
    movie_file_paths = []
    #grab all the files in the folder
    Find.find('/Users/jody/Movies') do |path|
        movie_file_paths << path if /.*\.avi/.match(path) != nil
    end
end 
```

但是，我和其他人相处得很艰难。任何帮助，将不胜感激！

* * *

编辑：

这是解决方案：

```
movie_file_paths = []
Dir.glob("/Users/jody/Movies/**/*.avi").each { |file| movie_file_paths << file if File.file? file }
movie_file_paths.sort_by {|f| File.mtime(f)}
deleteme = movie_file_paths.first 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T01:44:41.473

我看到您已经选择了一个答案，但它可以是单行的：

```
File.delete(Dir.glob("/Users/jody/Movies/**/*.avi").sort_by{|f| File.mtime(f)}.first) 
```

更新：几年后我遇到了这个，心里想，“我可以让它更短！”

```
File.delete(Dir["/Users/jody/Movies/**/*.avi"]).min_by{|f| File.mtime(f)}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T20:50:02.557

[`File`](http://www.ruby-doc.org/core-1.9.3/File.html)有你想要的方法，特别`ctime`是“最后更改”时间（NTFS 上的创建时间），`mtime`如果你想要“最后修改”时间，或者`atime`“最后访问”时间。将其与 结合使用`Dir::glob`，您可以轻松获得按日期时间排序的文件列表：

```
videos = Dir['/Users/jody/Movies/*.avi'].sort_by(&:ctime) 
```

删除最后一个很简单：

```
File.delete videos.last 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T20:42:35.317

用于`File.mtime(filename)`获取文件的最后修改时间。

`movie_file_path.sort_by {|f| File.mtime(f)}`将返回一个排序数组`mtime`。然后，您可以使用`File.delete(filename)`.

编辑：上次访问时间`atime`可能是比`mtime`.

# mamp - php.ini 在 MAMP 服务器重启时重置

> ID：13213141
> 
> 赞同：10
> 
> 时间：2012-11-03T20:21:08.823
> 
> 标签：mamp, php

我正在尝试更改`display_errors = Off`为`display_errors = On`我的 php.ini。我运行了 phpinfo() 并验证了加载的配置文件（它位于此处：/Library/Application Support/appsolute/MAMP PRO/conf/php.ini）。

每次我编辑`display_errors`这个 php.ini 文件的值并重新启动我的 MAMP 服务器时，php.ini 文件似乎都会重置。如果我在重新启动 MAMP 后再次打开 php.ini 文件，它会显示`display_errors = Off`.

为什么 MAMP 可能会重置 php.ini 文件？

注意 - 如果有区别，我正在使用 MAMP Pro。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-17T16:06:08.543

我这样做的方法是更改​​ MAMP Pro 替换您的 php.ini 文件的模板。就我而言，PHP 正在加载的 ini 文件位于

```
/Library/Application Support/appsolute/MAMP PRO/conf/php.ini 
```

但每次我更改它时，MAMP Pro 都会用它自己的版本重写它。要更改我想在 php.ini 文件中更改的内容，我只是找到了模板：

```
/Applications/MAMP PRO/MAMP PRO.app/Contents/Resources/php5.4.4.ini 
```

（PHP 5.4.4 是我正在使用的版本）然后我更改了我需要更改的内容：D 希望这会有所帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-28T14:44:07.953

您可以使用 Mamp Pro 中的模板编辑器设置 php.ini 值。

文件 -> 编辑模板 -> PHP (php.ini)

选择您的实例正在运行的相同版本。

当您保存模板时，Mamp 将覆盖用于您的实例的 php.ini 文件并重新启动 Apache。

[![使用 MAMP 模板编辑器编辑 PHP INI](../Images/a618b70f89381bebc1b8815036120a99.png)](https://i.stack.imgur.com/fMfMO.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T16:14:02.867

我终于弄明白了。MAMP Pro 的工作方式与常规 MAMP 不同。使用常规 MAMP，您可以直接编辑适当的 php.ini 文件。但是，使用 MAMP Pro，您必须使用 MAMP Pro 界面来控制 php.ini 设置。每次服务器启动时，MAMP Pro 都会根据这些设置重新创建 php.ini 文件。

就我而言，要显示服务器错误，我必须打开 MAMP Pro 界面。单击`Server`选项卡。单击`PHP`选项卡。选中`Display startup errors`复选框。选中`All errors and warnings`复选框。选中`Display`复选框。应用更改并重新启动服务器。

# ios - 我们可以直接设置 NSFont 的 font-weight 或 font-style，而不是更改字体名称吗？

> ID：13213142
> 
> 赞同：6
> 
> 时间：2012-11-03T20:21:13.123
> 
> 标签：ios, fonts, styling

**前面的问题：**

我们可以直接访问属性字符串的字体粗细和字体样式信息吗？或者我们可以创建一个可以设置此信息的新字符串吗？

**说明：**

在 iOS 6 中，您可以将选择切换为粗体或斜体。但它的工作方式令人烦恼：它不会更改 Apple 向我们公开的 NSFontAttributeName（例如，将字体名称从“HelveticaNeue”更改为“HelveticaNeue-Bold”）。相反，它将字体系列保留为“Helvetica Neue”，并将样式字符串中的“font-weight”更改为粗体。如果您要向属性文本的实例询问其描述，您会看到类似以下的字体信息：

```
NSFont = "<UICFFont: 0x1fbc53a0> font-family: \"Helvetica Neue\"; font-weight: bold; font-style: normal; font-size: 16px"; 
```

这就产生了一个问题。我们不能在保留粗体和斜体样式信息的同时更改字体。如果您跳过扫描旧属性字符串以获取样式信息，创建具有新字体的新字符串，然后更改字体属性名称（例如，在您想要的任何地方使用“Courier-Bold”）粗体），您会产生一个新问题：如果您尝试将字体切换回正常（非粗体），您将拥有像“Courier-Bold”这样的字体名称*和*“粗体”的字体粗细，因为样式信息尚未设置为粗体。当然，切换不会更改字体名称。因此，您实际上创建了一种字体，当用户切换所选文本时，该字体将无法再更改。用户将按下上下文菜单中的“粗体”按钮，但它不会做任何事情，因为粗体现在已经被硬编码到字体名称中，您可能会说。

如果您走另一条路并尝试在 UITextView 中覆盖“toggleBoldface”和“toggleItalic”，实际上似乎无法阻止样式字符串中的样式信息被更改。在切换事件期间，您似乎无法单独更改字体名称。

那么，问题又来了：我们能否以某种方式直接访问字体粗细和字体样式信息？或者我们可以创建一个可以设置此信息的新字符串吗？这将解决尝试从一种字体切换到另一种字体并保留样式信息的问题。

**双重澄清：**

我们正在谈论iOS。当您为某些字符范围设置属性字符串的字体属性 (NSFontAttributeName) 时，iOS 内部会创建一个带有样式字符串的 NSFont。如果您自己设置了字体属性，样式字符串将显示为“font-weight: normal; font-style: normal”。但是这个样式字符串是存储在 UITextView（通过切换）中设置的粗体和斜体信息的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:02:34.113

看起来您可能可以`CTFontRef`使用您为属性键和/或`CTFontAttributesRef`设置值的地方创建一个新的。这有帮助吗？`kCTFontWeightTrait``kCTFontSymbolicTrait`

参看。[CTFontDescriptorReference](https://developer.apple.com/library/mac/#documentation/Carbon/reference/CTFontDescriptorRef/Reference/reference.html#//apple_ref/doc/c_ref/CTFontDescriptorRef "CTFontDescriptor 参考")和[CTFontReference](https://developer.apple.com/library/mac/#documentation/Carbon/reference/CTFontRef/Reference/reference.html)

**编辑**

猜猜这行不通-我自己进行了更多研究...将其留在这里以防其他人有相同的想法。

# actionscript-3 - AS3 按钮在掩码中移动影片剪辑

> ID：13213144
> 
> 赞同：2
> 
> 时间：2012-11-03T20:21:29.407
> 
> 标签：actionscript-3, button

我是 AS3 脚本的新手。我有一个宽图像（电影剪辑“preform_mc”），我正在掩蔽并希望右键（“right_mc”）动态移动图像。

下面的代码将图像向右移动，但它不是动态移动（想要动画效果），我无法控制图像何时停止移动，基本上是 x 坐标的最大量。

任何帮助是极大的赞赏！

* * *

```
right_mc.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler_2);

function fl_MouseClickHandler_2(event:MouseEvent):void
{
    preform_mc.x += -100;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:32:19.120

看看[Greensock Tweening Library](http://greensock.com)。使用该库，您将能够轻松地制作运动图像的流畅动画。对于 max X 的控制，您应该编写一个`if`语句来检查 preform_mc.x 是否超过您想要的最大数量。

代码将如下所示：

```
var min_x:int = -500;

function fl_MouseClickHandler_2(event:MouseEvent):void
{
   if(min_x < preform_mc.x)
      TweenLite.to(preform_mc, 0.5, {x:preform_mc.x - 100}); // using the library I provided a link to
} 
```

# symfony1 - 如何为多个域配置 Symfony 1.4 项目？

> ID：13213148
> 
> 赞同：0
> 
> 时间：2012-11-03T20:22:16.633
> 
> 标签：symfony1

我们有一个在 symfony 1.4 框架下开发的网站。该网站应该能够拥有多个域。每个域都有其特殊的主页和其他所有内容。实际上域必须是每个动作的这样一个参数，根据它，动作从数据库中获取数据并显示它。

例如，我们有一个关于我们的页面。我们将关于我们的内容保存在 about_us 表中。此表有一个 website_id。我们将网站信息保存在网站表中。假设：

```
website (id, title, domain)
about_us (id, content, website_id) 
```

网站内容：

```
(1, 'foo', 'http://www.foo.com') and (2, 'bar', 'http://www.bar.com') 
```

about_us 内容：

```
(1, 'some foo', 1) and (2, 'some bar', 2) 
```

问题是，我应该如何配置我的 Symfony 项目才能做到这样？获取域作为参数并在 Symfony 操作中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:45:49.803

您可以创建自己的路由类扩展 sfRoute。此路由将为所有请求添加一个“域”参数：

```
//apps/frontend/lib/routing/myroute.class.php

class myRoute extends sfRoute
{

    public function matchesUrl($url, $context = array())
    {
        // first check if it is a valid route:
        if (false === $parameters = parent::matchesUrl($url, $context))
        {
           return false;
         }

        $domain = $context['host'];

        // add the $domain parameter:
        return array_merge(array(
            'domain' => $domain
            ), $parameters);
    }
} 
```

Routing.yml（示例）：

```
default_module:
  class: myRoute
  url:   /:module/:action/:id
  ... 
```

在您的操作中，您将获得以下域名：

```
 $request->getParameter('domain'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:09:06.487

有很多方法可以做到这一点。您可以扩展 sfFrontWebController，并在 dispatch() 方法中添加额外的代码。

```
# app/myapp/config/factories.yml
all:
  controller:
    class: myController

// lib/myController.class.php
class myController extends sfFrontWebController
{
    public function dispatch()
    {
        $selectedSite = SiteTable::retrieveByDomain($_SERVER['HTTP_HOST']); // Example

        if (!$selectedSite) {
            throw new sfException('Website not found');
        }

        // Store any site value in parameter
        $this->context->getRequest()->setParameter('site_id',$selectedSite->getId());

        parent::dispatch();
    }
} 
```

# silverlight - 更改控件周围的边框颜色

> ID：13213153
> 
> 赞同：0
> 
> 时间：2012-11-03T20:23:20.283
> 
> 标签：silverlight, xaml

我想弄清楚如何使用 MouseOver 内部的 StackPanel 更改边框的 BorderColor。我尝试将 TargetName 设置为 StackPanel 的 VSM 内的边框名称。我知道我很遥远，但我宁愿尝试一些东西......

```
<Border x:Name="LinksBorder" >
<StackPanel x:Name="LinksStackPanel" Margin="10" Orientation="Horizontal" FlowDirection="RightToLeft" HorizontalAlignment="Center" Width="311">
     <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="CommonStates">
          <VisualState x:Name="Normal">
          </VisualState>
          <VisualState x:Name="MouseOver">
            <Storyboard>
              <ColorAnimation 
                Duration="0" Storyboard.TargetName="LinksBorder" Storyboard.TargetProperty="(BorderBrush).(SolidBrush)" To="#FF0000" />
            </Storyboard>
          </VisualState>
        </VisualStateGroup>
      </VisualStateManager.VisualStateGroups> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T00:50:42.250

我的解决方法：

```
Private Sub LinksStackPanel_MouseEnter(sender As Object, e As System.Windows.Input.MouseEventArgs) Handles LinksStackPanel.MouseEnter
  LinksBorder.BorderBrush = New Media.SolidColorBrush(Colors.Red)
End Sub

Private Sub LinksStackPanel_MouseLeave(sender As Object, e As System.Windows.Input.MouseEventArgs) Handles LinksStackPanel.MouseLeave
  LinksBorder.BorderBrush = ColorFromHex("#FF00FF2A")
End Sub

Private Function ColorFromHex(hex As String) As Brush
  hex = hex.Replace("#", String.Empty)
  Dim a = (Convert.ToUInt32(hex.Substring(0, 2), 16))
  Dim r = (Convert.ToUInt32(hex.Substring(2, 2), 16))
  Dim g = (Convert.ToUInt32(hex.Substring(4, 2), 16))
  Dim b = (Convert.ToUInt32(hex.Substring(6, 2), 16))
  Return New SolidColorBrush(Color.FromArgb(CByte(a), CByte(r), CByte(g), CByte(b)))
End Function 
```

还是喜欢看另一边……

# php - 如何从生成的 HTML 中删除空格？

> ID：13213159
> 
> 赞同：0
> 
> 时间：2012-11-03T20:23:43.553
> 
> 标签：php, html

**函数.PHP**

```
<?php
    function global_header($page)
    {
        echo "
        <!doctype html>
        <html lang='en'>
        <head>
            <meta charset='utf-8' />
            <title>" . $page . "</title>
            <meta name='description' content='BTI320 Assignment 2' />
        </head>
            <body>
        ";
    }
?>
<?php
    function global_footer()
    {
        echo "
            </body>
        </html>
        ";
    }
?> 
```

当我在 chrome/FF 中查看我的页面源时，我得到以下源：

```
 <!doctype html>
    <html lang='en'>
    <head>
        <meta charset='utf-8' />
        <title>Add</title>
        <meta name='description' content='BTI320 Assignment 2' />
    </head>
        <body>

        </body>
    </html> 
```

它缩进了大约 3 个制表符。是否有 PHP 剥离函数或可以正确对齐它的东西？我不喜欢我的整个页面 HTML 都被弄乱了。

我的预期输出不会缩进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:28:17.970

考虑使用模板引擎。直接输出 HTML 字符串被认为是不好的做法。

如果您不想使用第三方模板引擎，无论如何您都可以从一些简化的模板中受益，如下所示：

**`page.tpl`模板文件**：

```
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset='utf-8' />
    <title>{{title}}</title>
</head>

<body>

{{body}}

</body>
</html> 
```

**PHP：**

```
// Loading HTML code that does not contain any undesired whitespace.
$code = file_get_contents('page.tpl');

// Replacing template variables with their values.
$code = str_replace(
    array(
        '{{title}}',
        '{{body}}'
    ),
    array(
        'Example title',
        'Page body'
    ),
    $code
);

// Outputting resulting HTML code.
echo $code; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T00:26:29.550

您获得缩进输出的原因是您正在像那样回显它们......只需从 echo 语句中删除缩进即可摆脱它们

```
<?php
    function global_header($page)
    {
        echo "
<!doctype html>
<html lang='en'>
<head>
<meta charset='utf-8' />
<title>" . $page . "</title>
<meta name='description' content='BTI320 Assignment 2' />
</head>
<body>";
    }
?>
<?php
    function global_footer()
    {
        echo "
</body>
</html>";
    }
?> 
```

这使您的 php 更难遵循 fut 输出将按照您的要求

# java - 使用对象断言的 Java junit 测试

> ID：13213162
> 
> 赞同：-2
> 
> 时间：2012-11-03T20:23:57.970
> 
> 标签：java, unit-testing

以下代码在TestSegment 类的setUp() 方法中：

```
 this.inputSource11 = new InputCell(1, 1);
    this.activeSynapseObject = new Synapse(this.inputSource11);
    this.inputSource11.setActiveState(true);
    this.segmentObject.addSynapse(this.activeSynapseObject); 
```

以下是TestSegment第95行的错误：

```
public void testGetSynapse()
{
    assertEquals(
        this.activeSynapseObject,
        this.segmentObject.getSynapse(inputSource11));
} 
```

![](../Images/15b7cb7c77525e13b27afd4a1769c110.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:48:51.543

我的猜测是您在断言中放置了两个对象。它们具有相同的值，但它们是不同的对象实例。我建议您在对象中定义一个`equals()` **比较字段值的**方法，因为它`assertEquals()`依赖于 equals 方法，如下所示：

```
 public static void assertEquals(String msg, Object obj1, Object obj2) {
     if (obj1 == null && obj2 == null) {
       return;
     }

     if (obj1 != null && obj1.equals(obj2)) {
       return;
     }

     fail(msg + " expected=" + obj1 + " actual=" + obj2);
 } 
```

# sql-server - Service Broker：如何检测脚本是否在所需机器上执行？

> ID：13213166
> 
> 赞同：0
> 
> 时间：2012-11-03T20:24:21.133
> 
> 标签：sql-server, service-broker

我的 SQL 脚本是从模板生成的。它们包含 IP 地址。它们可能很多，操作员可能会错误地执行不正确的脚本。脚本如何检查它是否在正确的机器上启动？（否则，我想打印消息并退出。）

有可能吗？

谢谢，彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T07:19:48.083

# 更新的答案

这是我从[http://weblogs.sqlteam.com/peterl/archive/2008/07/16/How-to-get-IP-address.aspx](http://weblogs.sqlteam.com/peterl/archive/2008/07/16/How-to-get-IP-address.aspx)找到的脚本，并进行了一些修改以更好地满足您的需求：

```
DECLARE @TargetIpAddress varchar(15);
SET @TargetIpAddress = '127.0.0.1'; --<== The IP address of the server you want.

DECLARE @Interfaces TABLE
(
    RowID int IDENTITY(0, 1)
   ,Interface char(38)
   ,IP varchar(15)
);

INSERT @Interfaces ( Interface )
  EXEC master..xp_regenumkeys N'HKEY_LOCAL_MACHINE',
       N'System\CurrentControlSet\Services\TcpIP\Parameters\Interfaces';

DECLARE @RowID int
       ,@IP varchar(15)
       ,@Key nvarchar(200);

SELECT @RowID = MAX(RowID)
  FROM @Interfaces;

WHILE @RowID >= 0
BEGIN
    SELECT @Key = N'System\CurrentControlSet\Services\TcpIP\Parameters\Interfaces\' + Interface
     FROM @Interfaces
    WHERE RowID = @RowID;

    EXEC master..xp_regread N'HKEY_LOCAL_MACHINE', @Key, N'DhcpIPAddress', @IP OUTPUT;

    IF @IP <> '0.0.0.0'
    UPDATE @Interfaces
       SET IP = @IP
     WHERE RowID = @RowID;

    SET @RowID = @RowID - 1;
END;

IF NOT EXISTS (SELECT IP FROM @Interfaces WHERE IP = @TargetIpAddress)
BEGIN
    DECLARE @ErrorMessage varchar(2000);
    SET @ErrorMessage  = 'This is not the correct server. This server does not have an IP address of %s.';
    SET @TargetIpAddress = ISNULL(@TargetIpAddress, 'NULL');
    RAISERROR(@ErrorMessage, 16, 1, @TargetIpAddress);
END

-- The rest of the script... 
```

* * *

# 原始答案

似乎使用 Server\Instance 名称而不是 IP 地址会更容易使用，并且如果服务器在以后分配了不同的 IP 地址，则不太可能中断。

```
-- You can get the instance name like this:
SELECT @@SERVERNAME +'\'+ @@SERVICENAME AS 'Instance';

-- Although, you might prefer this instead:
SELECT CAST(SERVERPROPERTY('MachineName') AS nvarchar(128))
      +COALESCE('\'+CAST(SERVERPROPERTY('InstanceName') AS nvarchar(128)), '');

-- NetBIOS name of the local computer on which the instance of SQL Server
-- is currently running.
-- If the instance of SQL Server is in a failover cluster and you want to obtain
-- the name of the failover clustered instance, use the MachineName property. 
SELECT SERVERPROPERTY('ComputerNamePhysicalNetBIOS'); 
```

您可以在 MSDN 中找到有关 SERVERPROPERTY 函数的详细信息[：SERVERPROPERTY (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms174396.aspx)。虽然，此函数不提供任何方式来获取服务器/实例的 IP 地址 - 没有提供此信息的内置函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T22:42:55.623

很抱歉重新发布，但对总是错过访问 SQL-Server 内的 systemadata 的机会感到恼火，我决定编写一个扩展存储过程作为 WMI 的桥梁。

下载[http://bummisoft.de/download/XP_WMI.zip](http://bummisoft.de/download/XP_WMI.zip)

电话是：

```
exec xp_wmiv3 'Select * from Win32_NetworkAdapterConfiguration where IPEnabled=TRUE' 
```

该 DLL 可用于 32 位和 64 位 SQLServer，并且可免费用于非商业用途。

安装：

```
EXEC sp_addextendedproc xp_wmiv3, '<Your Path>\XP_WMIV3_DLL.dll' 
```

例如： `EXEC sp_addextendedproc xp_wmiv3, 'C:\DLLs\XP_WMIV3_DLL.dll'`

卸载

```
EXEC sp_dropextendedproc xp_wmiv3 
```

用法

例如

```
exec xp_wmiv3 'SELECT * FROM Win32_Volume'
exec xp_wmiv3 'SELECT * FROM CIM_Userdevice where Name like "%HID%"'

create table #tmp(
    Domain varchar(255),
    Name varchar(255),Sid varchar(255)
)
insert into #tmp 
exec xp_wmiV2 'SELECT Domain, SID, Name FROM Win32_UserAccount where Status = "OK"'
select * from #tmp
drop table #tmp 
```

目前在 SQL-Server 2005 和 SQL-Server 2008 下测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:25:51.417

我可以提供一个 xp_GetIP.dll，但仅使用 SQL-Server 2005 32 位进行测试，您可以通过它注册

EXEC sp_addextendedproc xp_GetIP, 'C:\temp\xpGetIP.dll'

电话将是

```
Declare @IP varchar(100)

exec xp_GetIP @IP output
print @IP 
```

仅输出：192.168.69.69

编辑：使用 SQL-Server 2008 R2 64 位 als 64 位 DLL

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T12:02:59.430

```
Create Procedure P_GetIPAddresses (@IPS varchar(4000) out)
as
begin
Select @IPS=''
Create TABLE #temp (Line varchar(200))
Insert #temp exec master..xp_cmdshell 'ipconfig'
Select @IPS = @IPS + Coalesce(RTRIM(Replace(SubString(Line,1,CharIndex(':',line)-1)  ,'.','')) + SubString(Line,CharIndex(':',line) ,200),'')
from #temp
where upper (Line) like '%ADRESS%'
--SELECT * from #tmp --DEBUG
DROP TABLE #temp

end 
```

如果 xp_cmdshell 被禁用，则解析地址由您决定...

```
EXEC sp_configure 'show advanced options', 1
GO
-- To update the currently configured value for advanced options.
RECONFIGURE
GO
-- To enable the feature.
EXEC sp_configure 'xp_cmdshell', 1
GO
-- To update the currently configured value for this feature.
RECONFIGURE
GO

Declare @IPS Varchar(4000)

exec P_GetIPAddresses @IPS out
Select  @IPS

EXEC sp_configure 'show advanced options', 1
GO
-- To update the currently configured value for advanced options.
RECONFIGURE
GO
-- To enable the feature.
EXEC sp_configure 'xp_cmdshell', 0
GO
-- To update the currently configured value for this feature.
RECONFIGURE
GO 
```

# android - 方法 setImageDrawable(getResources().getDrawable(XX)) 不显示好的图像

> ID：13213167
> 
> 赞同：0
> 
> 时间：2012-11-03T20:24:37.083
> 
> 标签：android, drawable, getresource

我成功地在一个新项目中使用了这个代码，但是，当在我的实际代码中复制它时，显示的图像不是很好，一切都做得很好（图像在可绘制的文件夹中，每个数据都声明得很好，......）图像以“phoXX”开头，其中 XX 是一个整数（介于 0 和 62 之间） R.java ...)

这是我的代码：

```
private Context mContext;
ImageView  imageC=(ImageView)findViewById(R.id.imageView1);
TextView  Tex=(TextView)findViewById(R.id.textView1);       
Drawable drawableX = this.getResources().getDrawable(android.R.drawable.ic_dialog_alert);
Random random_monster = new Random();
int lerand = random_monster.nextInt(62);
int id = mContext.getResources().getIdentifier("drawable/pho"+lerand, "drawable",mContext.getPackageName());
if (id>0)
{
    drawableX = getResources().getDrawable(id);
}
imageC.setImageDrawable(drawableX);
Tex.setText(Integer.toString(lerand)+":"+id); 
```

因此，正如我所说，显示图像，显示数字，但 pho29 例如显示名为 pho48 的图像（如果您询问，pho48 不显示 pho29）ID 为 2130837535，即出现在 R.java 中：公共静态最终 int pho29=0x7f02001f; pho48 是：
公共静态最终 int pho48=0x7f020034；

对于某些数字，显示的图像是好的图像，对于其他数字，图像不是好的图像（并且对于相同的数字始终显示相同的图像....我的意思是对于 pho29，总是显示 pho48，在我的每一项活动中）

我真的不明白我想念什么......谢谢大家的帮助

编辑：在一些匹配的下方（左侧应显示的数字，右侧显示的数字）

```
2->6
17->32
19->34
24->41
43->43
51->51
36->55
37->56
38->57
56->56
59->59
61->61 
```

如您所见，56 显示为 56 AND 37....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:20:18.073

如果相同的代码和一组图像资源在一个项目中运行良好，而在另一个项目中运行良好，则应考虑损坏项目中的编译资源是否实际上正确。我发现在 Eclipse 中使用自动构建功能时，资源不会在我期望的时候重新编译。例如，如果我在部署应用程序之前做的最后一件事是更改资源。保存代码文件更改似乎会使构建系统更加困难。

您应该尝试先进行清洁，然后再进行重建。在 Eclipse 中，在 Project 菜单上选择“Clean...”并选择您的项目（或让它全部清除）。然后 Eclipse 将进行完全重建。或者在命令行上运行“ant clean”，然后运行“ant debug”。

你也在使用这条线：

```
int id = mContext.getResources().getIdentifier("drawable/pho"+lerand, "drawable",mContext.getPackageName()); 
```

这是 API 规范：

```
public int getIdentifier (String name, String defType, String defPackage) 
```

您不需要在 name 字段中指定类型，因为您在 defType 字段中指定了它。我认为它不会解决您的问题，但这至少也应该有效：

```
int id = mContext.getResources().getIdentifier("pho"+lerand, "drawable",mContext.getPackageName()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:15:26.037

尝试将没有源的图像视图放在其定义中，有时我会在图像视图在 xml 中设置源时遇到问题，在运行时更改其可绘制对象不起作用，第一张图像始终可见

# r - 0向量在运行函数后导致R

> ID：13213170
> 
> 赞同：0
> 
> 时间：2012-11-03T20:25:14.187
> 
> 标签：r, scope, statistics, global-variables

在我完成运行我的函数后，我一直得到 0 作为我的答案：

```
 niv_density <- function(returns, mu, delta, alpha, beta, t)
{
    t <- 1/t
    gamma <- sqrt(alpha^2 - beta^2)
    result <- rep(0, (1/t))
    for(i in 1:(1/t))
    {
        term3 <- exp(delta*gamma*t + beta*(returns[i] - mu*t))
        term1 <- alpha*delta*t/pi
        term2_1 <- besselY(alpha*sqrt(delta^2*t^2 + (returns[i] - mu*t)^2), 1)
        term2_2 <- sqrt(delta^2*t^2 + (returns[i] - mu*t)^2)
        term2 <- term2_1/term2_2
        result[i] <- (term1*term2*term3)
    }
}

niv_density(returns, 0, 2, 50, 0, 10)
result 
```

执行最后一部分后，我得到一个 0 的向量。我认为我在全局与本地范围之间存在问题，但我不确定如何解决它。

```
dput(returns)
structure(c(-0.003859212, 0.011873365, -0.004826217, -0.004006846, 
-0.004527209, -0.005597606, -0.001446292, 0.004890173, 0.001260653, 
-0.005469839, 0.001715495, 0.00776223, -6.79514e-05, -0.002405413, 
-0.00344927, 0.013203733, 0.009007395, -0.002918161, -0.000682757, 
0.003600917, -0.001584568, 0.001778635, 0.003881849, -0.003228443, 
0.00809855, -0.003407655, 0.006570117, -0.001629285, -0.001479157, 
-0.000683758, 0.007489741, 0.007807378, 0.001399056, -0.000578823, 
-0.002437511, -0.000593349, -0.004020762, 0.004744014, -0.001815119, 
0.007757796, -0.002401808, -0.00225831, -0.005162853, -0.002256747, 
0.032891919, 0.005882631, -0.011822966, -0.005744899, -0.004359233, 
0.00405189, 0.017035644, 0.001079738, 0.001845759, -0.004758891, 
0.006067706, -0.006027932, -0.00224155, -0.010844493, 0, -0.003861616, 
-0.004698823, 0.000397524, 0.001840917, 0.013599978, -0.008376557, 
1.92494e-05, 0.010797502, -0.004105023, 0.003119424, -0.004797368, 
-0.001962367, 0.002663974, 0.008489008, 0.007827146, -0.000566674, 
-0.003404669, -0.000160508, -0.003953786, -0.000635631, 0.0023086, 
0.008931147, -0.002761431, 0.013046559, -0.009673618, 0.007572105, 
-0.011309217, 0.003777911, -0.004767721, -0.004096769, 0.003915212, 
-0.005571037, 0.008566323, -0.009063831, -0.011191246, -0.000639167, 
0.002834983, -0.009156367, 0.00189252, 0.007166451, -0.001788182, 
-0.002437146, 0.00226261, -0.010459432, -0.001511577, 0.00039628, 
-0.00349739, 0.009561965, 0.063504871, 0.003492974, 0.009233691, 
0.004795333, -0.003995969, -0.002552804, 6.81834e-05, 0.006134657, 
0.006713932, -0.006875273, -0.005108732, 0.006239377, 0.002293386, 
-0.01121192, -0.005666844, 0.000894577, -0.012511724, 0.00351622, 
-0.009671627, -0.004480382, 0.007385228, -0.009143379, 0.005467177, 
0.017094141, 0.005918621, 0.001514995, -0.001356959, 0.015656296, 
0.001101646, 0.001457523, 0.0051402, -0.005516804, 0.002832519, 
-0.002196811, -0.007752963, 0.009050809, 0.006380147, 0.001995102, 
0.002319077, -0.001788715, 0.000845096, -0.009821598, 0.012634302, 
-0.001457121, 0.000582262, -0.004083585, -0.004021717, -0.000571503, 
0.006159289, -0.010822168, -0.015789222, -0.000657867, 0.013935285, 
0.001312777, -0.001172312, 0.003031039, 0.002482838, -0.010634785, 
0.014015267, 0.005435065, -0.034817949, 0.005145224, -0.007217488, 
0.00458109, 0.012581199, 0.001853981, 0.002118571, -0.011151137, 
-0.007933775, 0.011336262, 0.018212375, 0.007815775, 0.006103632, 
-0.007270438, -0.001066825, 0.001892988, -0.009740379, 0.012057142, 
0.00024459, -0.003702988, 0.014628744, -0.001902607, -7.49322e-05, 
-0.005903797, -0.002481339, -0.004266069, 0.01150386, -0.019888508, 
0.007657512, -0.004649027, 0, 0.002523089, -0.00072238, -0.021153782, 
-0.007969763, 0.005775428, -0.010897333, 0.007468107, -0.009508927, 
0.000464995, -0.002430182, 0.010796022, 0.008898853, -0.013079549, 
0.027112561, -0.015413991, -0.007630787, 0.007033724, -0.017738864, 
-0.015961032, -0.015579591, -0.011802317, -0.002187586, 0.003065715, 
0.013389559, -0.000885034, -0.013701533, 0.001976838, 0.001041955, 
-0.003616062, 0.005344799, 0.007148373, -0.002877552, -0.007681476, 
0.021591165, 0.017966863, -0.058771073, -0.019551973, 0.005203616, 
0.002169669, 0.003884158, -0.022568915, 0.002769004, -0.007779571, 
0.018998803, -0.001212088, 0.002446011, 0.007740844, 0.012532807, 
0.006287039, 0.003958813, 0.01407559, 0.001064047, -0.00862106, 
-0.012296938, -0.013967015, 0.010524923, -0.010789529, 0.011953286, 
0.000738662, -0.016492003, -0.00257709, -0.015437029, 0.004315983, 
0.023337948, 0.008138125, 0.005972748, 0.005915635, 0.010493804, 
-0.011895336, -0.005245454, 0.007409717, 0.012596218, -0.005221382, 
-0.005462129, 0.008785043, 0.009134618, 0.015541224, 0.016072839, 
-0.003827797, 0.000403703, 0.03749696, -0.003386946, -0.008627298, 
-0.030790478, -0.003861794, -0.011426323, 0.001393173, 0.008541783, 
0.009361445, -0.023851831, 0.024814864, -0.019724128, 0.002621807, 
-0.017904622, -0.003584294, -0.019299804, -0.00234839, -0.002685042, 
0.002685042, 0.016590137, 0.001401377, -0.006120481, 0.006690448, 
-0.004740457, -0.005027981, 0.013204038, -0.002742491, 0.005110009, 
-0.006393429, 0.00464228, -0.00270551, -0.011552836, 0.003074876, 
0.005139878, 0.002032361, 0.007603533, 0.010491222, 0.000658875, 
0.003909991, 0.00236732, 0.019192366, -0.00361624, 0.005696264, 
-0.005852811, 0.014805765, 0.00313454, 0.006385073, -0.005475311, 
-0.009195918, 0.008472618, -0.000559148, -0.007272851, 0.003748203, 
0.001156269, 0.004328552, -0.006107929, -0.012121056, 0.002812434, 
-0.009577213, 0.005689626, -0.001941957, 0.006145673, -0.002275509, 
-0.006578825, -0.005345298, -0.000327811, 0.003751791, 0.005053343, 
0.005157952, -0.022100394, -0.007461083, 0.003576376, 0.00093598, 
0.006738706, 0.006976768, 0.001078282, -0.006256189, 0.003313743, 
-0.005955287, 0.011771523, 0.001644383, -0.003459295, 0.032863111, 
-0.007369908, -0.001099451, 0.004745151, 0.012094786, 0.001167328, 
-0.00404787, -0.004345022, -0.001121192, 0.004333763, -0.008483142, 
-0.001578184, -0.00046999, 0.005079249, -0.005970832, 0.005543307, 
0.006722626, 0, 0.001715197, 0.011776868, 0.013308783, -0.004160112, 
-0.000304697, 0.014924613, 0.007204855, -0.00509816, 0.007186504, 
0.002287253, -0.009948655, -0.001000861, -0.00431929, -0.00347645, 
0.005015994, -0.007540969, 0.00558486, -0.005661924, -0.006602168, 
-0.002824197, 0.001939661, 0.006563001, -0.009757559, -0.00978824, 
-0.001247868, 0.002622219, -0.009097288, -0.014394158, -0.00292424, 
0.002644891, -0.005572549, -0.003181826, 0.002676673, 0.007032888, 
0.002127581, 0.005281961, 0.016021024, 0.001232531, 0.005515082, 
0.000450254, 0.003568462, 0.006277841, -0.003823264, -0.032527132, 
0.021873831, -0.003231721, -0.000368515, -0.001397511, -0.010973353, 
-0.011563657, -0.010061858, 0.005714484, 0.007472816, 0.003407539, 
-0.000612977, -0.000800283, -0.001900635, -0.000865432, -0.003630001, 
0.00562073, 0.001858425, 0.010064273, -0.006584881, -0.001470899, 
0.005433816, -0.002510864, -0.001071656, -0.005130965, 2.35065e-05, 
0.003445676, 0.01374472, -0.001123534, 0.006067276, 0.004050843, 
-0.000773321, -0.003401186, 0.001908336, -0.003562041, -0.001180884, 
-0.003133416, 0.005819655, -0.002096198, -4.92007e-05, 0.002838133, 
-0.010010669, 0.00557654, -0.000122526, 0.022760252, -0.005618111, 
0.014434193, 0.001716112, 0.01567573, 0.001566116, -0.003071945, 
-0.018146189, -0.012123038, -0.007480614, 0.007735601, -0.00436506, 
0.003091618, 0.004704796, 0.001184206, 0.010066361, 0.005389096, 
-0.007021784, -0.004211278, -0.001740557, -0.00628043, 0.002434464, 
-0.000333944, 0.010815674, 0.016910153, 0, -0.01318228, -0.002858256, 
0.024721185, 0.001006412, -0.003651077, 0.009682259, -0.007093437, 
-0.002005597, 0.002424598, -0.015024047, 0.015051995, 0.004720944
), na.action = structure(504L, class = "omit")) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T20:33:55.807

您的版本不起作用，因为`result`它是函数体的本地版本，并且在您退出函数时它会丢失。我怀疑您`result`的全局环境中有另一个对象（零向量），这就是您*尝试*检查结果时总是得到的。

相反，通过在末尾`result`添加一条语句使您的函数显式返回：`return`

```
niv_density <- function(returns, mu, delta, alpha, beta, n) {
    t <- 1/n
    gamma <- sqrt(alpha^2 - beta^2)
    result <- rep(0, n)
    for(i in seq_len(n)) {
        term3   <- exp(delta*gamma*t + beta*(returns[i] - mu*t))
        term1   <- alpha*delta*t/pi
        term2_1 <- besselY(alpha*sqrt(delta^2*t^2 + (returns[i] - mu*t)^2), 1)
        term2_2 <- sqrt(delta^2*t^2 + (returns[i] - mu*t)^2)
        term2   <- term2_1/term2_2
        result[i] <- (term1*term2*term3)
    }
    return(result)
} 
```

并且在调用函数时，将结果分配如下：

```
result <- niv_density(returns, 0, 2, 50, 0, 10) 
```

（也许您应该避免调用变量*result*，我相信您可以从上下文中找到更具描述性的名称。）

# function - 如何在跟随字符等于字符串时循环？

> ID：13213174
> 
> 赞同：0
> 
> 时间：2012-11-03T20:25:35.353
> 
> 标签：function, loops, emacs

无论模式如何，我都在编写一个取消注释的函数。我想删除行首的所有注释字符。

如何使下面的代码段循环，直到以下字符不等于注释开始？（所以基本上让这个“如果”继续下去，直到`following-char`不再等于`comment-start`）

```
(if (string= (byte-to-string (following-char)) comment-start)
   (progn (delete-forward-char 1) 
          (when (string= (byte-to-string (following-char)) " ") 
               (delete-forward-char 1)))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:38:25.243

while 循环比我想象的要容易：

```
(defun uncomment-mode-specific ()  
  "Uncomment region OR uncomment beginning of line comment OR uncomment end"
  (interactive)
  (if (region-active-p)
      (uncomment-region (region-beginning) (region-end))
    (back-to-indentation))
  (setq scvar 0)
  (setq scskipvar 0)
  (while (= scvar 0) 
     (if (string= (byte-to-string (following-char)) comment-start)
         (progn (delete-forward-char 1) 
            (when (string= (byte-to-string (following-char)) " ") 
                      (delete-forward-char 1))
            (setq scskipvar 1))
       (setq scvar 1)))
  (if (= scskipvar 0)
      (progn (search-forward comment-start nil t)
         (left-char 1)
         (kill-line))
    )
) 
```

# iphone - 4 iPhone4-IPhone5 和 iPad-IPadMini 的故事板？

> ID：13213177
> 
> 赞同：1
> 
> 时间：2012-11-03T20:25:48.690
> 
> 标签：iphone, ios, xcode, ipad, cocoa

> **可能重复：**
> [如何为 iPhone 5 切换到不同的 Storyboard？](https://stackoverflow.com/questions/12696242/how-to-switch-to-different-storyboard-for-iphone-5)

在 XCode 上处理尺寸是一场噩梦，我想知道我是否可以为不同的 iPhone/iPad 设备创建一个故事板，而不是试图在代码中弄清楚

# java - 简化游戏界面的创建？

> ID：13213183
> 
> 赞同：1
> 
> 时间：2012-11-03T20:26:21.290
> 
> 标签：java

我需要用java开发一个小游戏。我想用awt/swings来做。

是否有任何接口或包可以简化或提供 java 中的游戏接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:38:10.513

我推荐[PlayN](http://code.google.com/p/playn/)：

> PlayN 是一个跨平台的游戏抽象库，用于编写可编译为：桌面 Java、HTML5 浏览器、Android、iOS 和 Flash 的游戏。

它带有许多专注于游戏的有用内容，如动画、声音层、游戏循环等。即使您不想使用移动设备或浏览器，这对您也有好处（在我看来，您应该这样做，但这取决于您）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:30:43.530

我为 Java 制作的每个游戏（不是很多）都使用 AWT/Swings 作为界面库。它易于使用且开发速度快，因此我会推荐它。

# matlab - 卷创建

> ID：13213186
> 
> 赞同：3
> 
> 时间：2012-11-03T20:26:32.693
> 
> 标签：matlab, volume

我有一个这样的数据库：

*   `d(:,1)`= 经度
*   `d(:,2)`= 纬度
*   `d(:,3)`= 深度
*   `d(:,4)`= 有毒金属浓度。

数据是不规则分布的，如您所见，所有数据都是矢量数据。你能告诉我如何制作一个`volume`所有金属浓度都被绘制为颜色的地方（以便容易识别它的高低），而经度、纬度和深度将在 x 轴、y 轴和z轴分别？

我知道我必须制作我的`d(:,4)`= 体积数据（必须对应于纬度、经度和深度数据的 3D 矩阵）。但我不确定如何创建那个 3D 数组......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:40:51.340

尝试`scatter3(X,Y,Z,S,C)`（见[文档](http://www.mathworks.se/help/matlab/ref/scatter3.html)）

X,Y,Z 是不言自明的。S是标记的大小，C是颜色；您可以根据您的数据进行更改。

请尝试一下，如果遇到困难，请更新您的问题。

* * *

更新 1：感谢您的评论，我认为您希望**在常规网格上插入数据，并对数据进行切片。**

```
% create a regularly spaced mesh between the exterma of the dataset
xx = linspace(min(d(:,1)),min(d(:,1)),100);
yy = linspace(min(d(:,2)),min(d(:,2)),100);
zz = linspace(min(d(:,3)),min(d(:,3)),100);

[xi,yi,zi] = meshgrid(xx, yy, zz);

% interpolate the data in the regular space
vi = interp3(d(:,1), d(:,2), d(:,3), d(:,4), xi, yi, zi, 'spline');

% choose the slice planes
xslice = [-10 10]; yslice = 0; zslice = [-100, -50, -10];

% display the sliced interpolated data
slice(xi,yi,zi,vi,xslice,yslice,zslice); 
```

在帮助中查找函数（您可能需要调整参数）。

但下一次：自己尝试一些东西并发布你的尝试。提供帮助要容易得多，而且您会学到更多。

# java - org.apache.axis2.AxisFault：org.apache.axis2.databinding.ADBException：Unexpected subelement underTimelyRenewal

> ID：13213187
> 
> 赞同：3
> 
> 时间：2012-11-03T20:26:37.967
> 
> 标签：java, web-services, soap, axis2

在访问轴 2 网络服务之前，我遇到了以下异常。

org.apache.axis2.AxisFault：org.apache.axis2.databinding.ADBException：Unexpected subelement underTimelyRenewal

我无法在 tomcat 或在 Weblogic 中运行的 DEV 环境中本地重现相同的问题。它只发生在 Weblogic 11g 上运行的 1 个环境中。这让人觉得我在那个环境中缺少一些配置，我不确定它是什么。对此的任何帮助都将受到高度赞赏。

这是调用 Web 服务的代码。

```
public  com.ibs.accouting.employeeVerificationResponse getEmployeeVerificationRequest(

                        com.ibs.accounting.EmployeeVerificationRequest employeeVerificationRequest108)

                throws java.rmi.RemoteException

                {
          org.apache.axis2.context.MessageContext _messageContext = null;
          try{
           org.apache.axis2.client.OperationClient _operationClient = _serviceClient.createClient(_operations[5].getName());
          _operationClient.getOptions().setAction("http://ibs.com/accounting/WBLEmployeeVerificationRequest");
          _operationClient.getOptions().setExceptionToBeThrownOnSOAPFault(true);

              addPropertyToOperationClient(_operationClient,org.apache.axis2.description.WSDL2Constants.ATTR_WHTTP_QUERY_PARAMETER_SEPARATOR,"&");

          // create a message context
          _messageContext = new org.apache.axis2.context.MessageContext();

          // create SOAP envelope with that payload
          org.apache.axiom.soap.SOAPEnvelope env = null;

                                                env = toEnvelope(getFactory(_operationClient.getOptions().getSoapVersionURI()),
                                                employeeVerificationRequest108,
                                                optimizeContent(new javax.xml.namespace.QName("http://ibs.com/accounting",
                                                "getEmployeeVerificationRequest")));

    //adding SOAP soap_headers
     _serviceClient.addHeadersToEnvelope(env);
    // set the message context with that soap envelope
    _messageContext.setEnvelope(env);

    // add the message contxt to the operation client
    _operationClient.addMessageContext(_messageContext);

    //execute the operation client
    _operationClient.execute(true);

           org.apache.axis2.context.MessageContext _returnMessageContext = _operationClient.getMessageContext(
                                       org.apache.axis2.wsdl.WSDLConstants.MESSAGE_LABEL_IN_VALUE);
            org.apache.axiom.soap.SOAPEnvelope _returnEnv = _returnMessageContext.getEnvelope();

                            java.lang.Object object = fromOM(
                                         _returnEnv.getBody().getFirstElement() ,
                                         com.ibs.accounting.EmployeeVerificationResponse.class,
                                          getEnvelopeNamespaces(_returnEnv));

                                    return (com.ibs.accounting.EmployeeVerificationResponse)object;

     }catch(org.apache.axis2.AxisFault f){

        org.apache.axiom.om.OMElement faultElt = f.getDetail();
        if (faultElt!=null){
            if (faultExceptionNameMap.containsKey(faultElt.getQName())){
                //make the fault by reflection
                try{
                    java.lang.String exceptionClassName = (java.lang.String)faultExceptionClassNameMap.get(faultElt.getQName());
                    java.lang.Class exceptionClass = java.lang.Class.forName(exceptionClassName);
                    java.lang.Exception ex=
                            (java.lang.Exception) exceptionClass.newInstance();
                    //message class
                    java.lang.String messageClassName = (java.lang.String)faultMessageMap.get(faultElt.getQName());
                    java.lang.Class messageClass = java.lang.Class.forName(messageClassName);
                    java.lang.Object messageObject = fromOM(faultElt,messageClass,null);
                    java.lang.reflect.Method m = exceptionClass.getMethod("setFaultMessage",
                               new java.lang.Class[]{messageClass});
                    m.invoke(ex,new java.lang.Object[]{messageObject});

                    throw new java.rmi.RemoteException(ex.getMessage(), ex);
                }catch(java.lang.ClassCastException e){
                   // we cannot intantiate the class - throw the original Axis fault
                    throw f;
                } catch (java.lang.ClassNotFoundException e) {
                    // we cannot intantiate the class - throw the original Axis fault
                    throw f;
                }catch (java.lang.NoSuchMethodException e) {
                    // we cannot intantiate the class - throw the original Axis fault
                    throw f;
                } catch (java.lang.reflect.InvocationTargetException e) {
                    // we cannot intantiate the class - throw the original Axis fault
                    throw f;
                }  catch (java.lang.IllegalAccessException e) {
                    // we cannot intantiate the class - throw the original Axis fault
                    throw f;
                }   catch (java.lang.InstantiationException e) {
                    // we cannot intantiate the class - throw the original Axis fault
                    throw f;
                }
            }else{
                throw f;
            }
        }else{
            throw f;
        }
        } finally {
            _messageContext.getTransportOut().getSender().cleanup(_messageContext);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-22T07:02:18.470

这个错误可能有点误导。在我修改了 WSDL 并添加了一个新的强制元素之后，我创建了我的客户端。比这个错误出现了。解决方案是，我忘记在我的 Web 服务的一种方法中填充这个元素。如果出现此错误，还要检查您的必填元素是否已在服务器中填写。它在一个环境下工作而不在另一个环境下工作也可能意味着强制项目在一台服务器（开发服务器）上填写，而不是在另一台服务器（生产服务器）下填写。

# php - 在单独的 php 文件中包含表的部分内容

> ID：13213190
> 
> 赞同：1
> 
> 时间：2012-11-03T20:27:24.297
> 
> 标签：php, file, include, extract

我希望能够将 HTML 表的某些部分包含在单独的 php 文件中。因此，例如，我可能有一个像这样的表：

```
<table>
<tr><td>Pos.</td><td>No.</td><td>Driver</td><td>Car</td><td>Points</td></tr>
<tr><td>4.</td><td>77</td><td>Andrew Jordan</td><td>Honda Civic</td><td>346</td></tr>
</table> 
```

我想做的是只提取 pos、driver 和 points 的单元格，以便可以在不同的 php 文件中呈现表格，而不必每次都手动复制和编辑它。

```
<table>
<tr><td>Pos.</td><td>Driver</td><td>Points</td></tr>
<tr><td>4.</td><td>Andrew Jordan</td><td>346</td></tr>
</table> 
```

是否可以使用“类”或 php“包含”来做到这一点？我知道你可以包含整个 php 文件，但是提取文件的特定部分呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:47:57.597

表.php

```
$table = "<table>
<tr><td>Pos.</td><td>Driver</td><td>Points</td></tr>
<tr><td>4.</td><td>Andrew Jordan</td><td>346</td></tr>
</table>"; 
```

表2.php

```
include("table.php");

print $table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:02:13.490

如果你想有一个可重用的代码来生成这样的部分输出，你可以考虑使用输出缓冲。

写一个这样的函数：-

```
function get_output($file_name,$parameters = NULL)
{
include $filename;
ob_start();

//The included file generates the output required using $parameters

return ob_get_clean();
} 
```

然后在你的主文件中使用： -

```
$output = get_output($file_name,$parameters);
echo $output; // gives the output generated inside get_output function 
```

在您的情况下，只需将代码存储在一个文件中，例如“table.php”，然后

```
$output = get_output('table.php',NULL); 
```

[参考](http://www.php.net/manual/en/function.ob-start.php#109088)

# java - GWT：如何与需要 XML 配置的 3rd 方 jar 一起使用？

> ID：13213195
> 
> 赞同：0
> 
> 时间：2012-11-03T20:28:12.867
> 
> 标签：java, xml, gwt, configuration, ehcache

我正在尝试查看是否可以让 GWT 与 Ehcache 一起使用，以获得强大的客户端缓存解决方案。

`ehcache.xml`但是 Ehcache 要求在运行时类路径上有一个名为的文件。在运行时，当缓存管理器/工厂尝试创建缓存（在 Java 代码中）时，它会查找此 XML 描述符的类路径并使用其包含的规范构建缓存。

**但这对 GWT 有何作用**？运行时，Java 代码已经被翻译成 JavaScript！JS 代码如何知道要查找`ehcache.xml`？不仅适用于 Ehcache，而且适用于任何需要某种运行时配置（XML、PROPERTIES 或其他）文件才能工作的第 3 方 JAR？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:56:57.077

您可以尝试使用 REST 和 EhCache 服务器：

[http://sujitpal.blogspot.com/2010_03_01_archive.html](http://sujitpal.blogspot.com/2010_03_01_archive.html)

# html - 是否有用于溢出的 css 伪选择器？

> ID：13213197
> 
> 赞同：38
> 
> 时间：2012-11-03T20:28:22.227
> 
> 标签：html, css, css-selectors, pseudo-class

我正在尝试根据其父 div 是否被溢出来改变某些东西的样式。

```
.pDiv { display: block; width: 300px; height: 100px; border: 1px solid rgb(0,0,0); }
.cDiv { display: block; padding 4px; border-bottom: 1px solid rgb(0,0,0);
.pDiv:overflow .cDiv { border-bottom: none; }

<div class="pDiv"><div class="cDiv">child 1</div><div class="cDiv">child 2</div><div class="cDiv">child 3</div><div class="cDiv">child 4</div><div class="cDiv">child 5</div></div> 
```

有可能做这样的事情吗？我会使用最后一个子伪选择器，但是子元素的数量可能会有所不同，所以我希望它仅在父 div 溢出时才删除最后一个子元素的边框底部。我也想要一个纯 CSS 解决方案，不要 JS！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-03T20:34:00.497

CSS 不能基于任何类型的使用或计算的样式进行选择，所以你不走运。

# php - php会话和cookie值最大长度

> ID：13213199
> 
> 赞同：0
> 
> 时间：2012-11-03T20:28:27.203
> 
> 标签：php, session, cookies

php会话和cookie的最大值是多少？这是最多可以放入多少字节

```
$_SESSION['key'] = "here what maximum bytes are possible";

$_COOKIE['key'] = "here what maximum bytes are possible"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T20:36:08.373

`$_SESSION`您可以保存无限量的数据，没有真正的限制......

`$_COOKIE`我猜是在 4000 字节以下吗...（包括日期、名称、值、到期时间）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:37:42.690

我认为使用会话在其中存储大量信息并不是一个好主意。但是，您可以在会话中存储尽可能多的信息，因为它只是存储在服务器上的一个文件。但是，如果您想存储大量信息，例如文本，我建议您使用数据库。并且永远不要将图像作为 blob 存储在数据库中，因为它只会使其过载。

# php - 用户之间的消息：显示对话

> ID：13213205
> 
> 赞同：1
> 
> 时间：2012-11-03T20:29:07.347
> 
> 标签：php, mysql, sql, group-by

我正在编写一个用于用户通信的消息系统。在收件箱中，我不想向用户显示他/她收到的消息。我只是想展示对话。例如，如果一个用户发送或接收多条消息，那么在收件箱中应该只有与用户的对话（包括最新的消息，无论是书面的还是接收的），当用户点击对话时，他/她可以看到所有过去的消息。

'messages' 的表结构（简化）如下：

```
message_id
user_id_sender
user_id_recipient
message 
```

现在的问题是消息保存在数据库中，其中每一行都是一条消息，所以我必须以某种方式对这些消息进行分组。

我想出的选择语句如下：

```
SELECT * FROM messages
WHERE user_id_sender = 1 OR user_id_recipient = 1
GROUP BY user_id_sender 
```

但是现在我显然收到了两条消息，因为一条是用户“1”写的，一条是他收到的。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:40:46.673

假设 message_id 是递增的（即更高的 id 用于后面的消息）。`@user_id`只是`user_id`您正在查看的收件箱的占位符。我使用了 Andrea 的技巧来获得`other_recipient_id`简洁。

```
Select 
  mm.other_recipient_id,
  m.*
From (
  Select
    user_id_sender + user_id_recipient - @user_id as other_recipient_id,
    Max(message_id) as message_id
  From
    messages
  Where
    user_id_sender = @user_id Or
    user_id_recipient = @user_id
  Group By
    user_id_sender + user_id_recipient - @user_id
  ) mm
    Inner Join
  messages m
    On
  mm.message_id = m.message_id 
```

示例小提琴[http://sqlfiddle.com/#!2/05d191/3/0](http://sqlfiddle.com/#!2/05d191/3/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T21:17:50.617

一个月前我已经解决了这个问题。我想你也有一个`date`领域。此查询为您提供结构良好的结果，其中包含最后一条消息的日期和最后一条消息。

```
$qry = 'SELECT 
CONCAT(GREATEST(user_id_sender,user_id_recipient)," ",LEAST(user_id_sender,user_id_recipient)) AS thread, 
MAX(CONCAT(date,"|",message)) as date_message, 
MAX(date) AS last_message, 
messages.* 
     FROM messages
     WHERE user_id_sender= ? || user_id_recipient=? GROUP BY thread ORDER BY last_message DESC';

$rows = $db->fetchAll($qry, Array($current_user_id,$current_user_id)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T20:36:25.163

只要消息 ( `message_id`) 是唯一的，您只会收到一条消息。当然，如果通信时间较长，您将收到多条消息。

注意：这里不需要`group by`，因为这仅用于聚合列，例如：

```
SELECT user_id_sender, sum(*) FROM messages
GROUP BY user_id_sender; 
```

您可以在其中获得每个用户发送的消息的总和。

因此，如果您想查看两个用户之间的通信：

```
SELECT * FROM messages
WHERE user_id_sender = 1 OR user_id_recipient = 1; 
```

如果您也存储时间戳，您可以进一步限制这一点，`message_time`例如或限制显示的消息数量：

```
select * from ... limit 10; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T20:52:23.617

假设我们想查看具有特定 _ ID _ 的用户的对话，此查询可能很有用：

```
SELECT (user_id_sender + user_id_recipient) - _ID_ AS correspondent, COUNT(*) AS total
FROM messages
WHERE user_id_sender = _ID_ OR user_id_recipient = _ID_
GROUP BY (user_id_sender + user_id_recipient) 
```

结果查询返回对话的另一个用户（“通讯员”）的 ID 和两个用户之间的消息数（“总数”）。

问候

# scala - 如何抽象数据和控制以支持易于扩展？

> ID：13213210
> 
> 赞同：1
> 
> 时间：2012-11-03T20:30:02.600
> 
> 标签：scala, traits

我有一个案例：有`SomeNode`，它由不同的基本部分组成：比如说某些类型的`A,B,C`. 还有一个转换函数可以将 的实例转换`SomeNode`为另一个`SomeNode`。

但是，`SomeNode`除了 之外，还可以添加一些其他部分`A,B,C`，所以说可能是`D`的第四部分`SomeNode`。因此，转换函数的接口可能也需要针对新添加的组件进行相应的更改`SomeNode`，但可能会共享一些相同的逻辑。

然后我一直在想，什么是抽象的好设计`SomeNode`以及它的易于扩展的转换功能？使用特质？如何？一些灵感的例子？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:57:27.940

要管理模块化，请查看 Cake 模式（又名 Bakery of Doom 模式）。关于这个主题有一些有趣的文章：

*   [真实世界的 Scala：依赖注入 (DI)](http://jonasboner.com/2008/10/06/real-world-scala-dependency-injection-di/)
*   [依赖注入与蛋糕模式](http://www.cakesolutions.net/teamblogs/2011/12/15/dependency-injection-vs-cake-pattern/)
*   [存在类型 FTW](http://precog.com/blog-precog-2/entry/existential-types-ftw)
*   [用 Scala 突破 OO 和函数式的极限](http://debasishg.blogspot.com/2011/03/pushing-envelope-on-oo-and-functional.html)

对于管理转换和特征，Scala 编译器是我能想到的最好的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:33:55.077

也许我错过了一些东西，但你不是在寻找**继承**吗？

```
class SomeNode(val a: Int, val b: String, val c: Char)

class SpecialNode(from: SomeNode, val d: List[Int]) extends 
         SomeNode(from.a, from.b, from.c) 
```

`SpecialNode`共享字段`SomeNode`并添加新`d`字段。转换看起来像这样（当然它可以更复杂：

```
def transform(node: SomeNode) = new SpecialNode(node, Nil) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T21:00:55.173

我不愿以牺牲我的菜鸟身份为代价来写这篇文章，但根据问题中使用的关键字，听起来“ **OOP 基础知识**”是所要求的。

**“如何抽象数据和控制以支持易于扩展？”** （概括）

**“有SomeNode，由不同的基本部分组成：”**（聚合）

**“还有一个转换函数可以将 SomeNode 的一个实例转换为另一个 SomeNode。”** （多态性）

**“不过，SomeNode中可能还添加了一些其他的部分，除了A、B、C，……功能的接口可能也需要为新添加的组件SomeNode做相应的改变，但可能会有一些相同的逻辑共享。”**（界面）

**“那我一直在想，为了便于扩展，抽象 SomeNode 及其转换功能有什么好的设计？”** （遗产）

根据我对问题的解释，我建议研究**SOLID 设计原则** [http://www.youtube.com/watch?NR=1&v=05jVWgKZ6MY&feature=endscreen](http://www.youtube.com/watch?NR=1&v=05jVWgKZ6MY&feature=endscreen)[](http://www.youtube.com/watch?NR=1&v=05jVWgKZ6MY&feature=endscreen)

# javascript - 如何设置添加类的顺序延迟？

> ID：13213214
> 
> 赞同：0
> 
> 时间：2012-11-03T20:30:11.620
> 
> 标签：javascript, jquery, animation, coffeescript, underscore.js

我正在使用 jQuery UI 插件和最新的 jQuery。

我想依次添加类，一个一个地添加我的元素数组。现在我有这个：

```
$(@el).addClass("gridBoxComplete", 400, "easeOutBounce").delay(800) 
```

`@el`数组中的当前元素在哪里。但是，这不会在迭代中的下一个项目运行之前延迟此对象。我大致基于这个想法制作了这个动画..

```
$(@).hide().each (index) ->
  $(@)
    .delay(index * 100)
    .fadeIn 500 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T20:35:02.410

`delay()`延迟动画，而不是类名更改或其他代码执行。如果您想要通用执行延迟，请使用`setTimeout`或类似：

```
$.fn.wait = function(ms, callback) {
  return this.each(function() {
    setTimeout(callback.bind(this), ms)
  })
}

$(@el).addClass("gridBoxComplete", 400, "easeOutBounce").wait(800, function() {
    $(this).addClass("something");
}); 
```

# php - 简单的 strpos() 不能与“[”字符一起使用，为什么？

> ID：13213215
> 
> 赞同：0
> 
> 时间：2012-11-03T20:30:15.353
> 
> 标签：php, strpos

如果我这样做，为什么会这样：

```
if(strpos("[","[rgeger]")){ 
echo 'hey'; 
} 
```

它不打印任何东西？

用字符串试试这个：

```
function return_tags($keywords){
 if($keywords){
  $k_array = array();

  foreach($this->check($keywords) as $key=>$value){

    array_push($k_array, $value);
  }

  $last_array = array();
  foreach($k_array as $key=>$value){
    if(strpos("[", $value) && strpos("]", $value) && strlen($value) >= 2){
      $value = '<span class="tag">'.$value.'</span>';

    }
    array_push($last_array, trim($value));

  }
  return $last_array;

 }else{
  return false;
 }
} 
```

字符串示例

```
 $keywords = "freignferi eiejrngirj erjgnrit [llll] [print me as tag]"; 
```

你看到任何`<span>`用 html 打印的元素了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T20:34:52.967

看起来你交换了论点：

```
int strpos ( string $haystack , mixed $needle [, int $offset = 0 ] ) 
```

因此，如果您想知道 a`[`是否在您的字符串中`[rgeger]`：

```
if (strpos("[rgeger]", "[") !== false) { 
  echo 'hey'; 
} 
```

（来源： http: [//php.net/strpos](http://php.net/strpos)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T20:32:05.033

返回的位置是零索引的，因此第一个字符位于位置 0。当将 0 评估为布尔值时，它是错误的 - 所以它不会进入块。

修复这个：

```
if (strpos('[rgeger]', '[') !== false) 
```

**论点也是错误的**。**不要再点赞这个帖子了；去投票 robbi's 而不是发现那个 :) Eagle eyes robbi，EAGLE eyes :P**

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T20:31:45.530

因为您必须检查它的返回值，`strpos()`因为它可能为零，因为`[`它的索引为零，而零的计算结果为 FALSE，这就是它不会进入您的 if 块的原因，因此请检查返回值是否为 FALSE 并输入布尔值，而不仅仅是整数零，像这样：

```
if(strpos("[rgeger]","[") !== false){ 
  echo 'hey'; 
} 
```

**更新：**
参数的顺序也错误，主题字符串先出现，然后是搜索字符串，我更新了上面的代码以反映这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T20:32:13.317

因为错了。[如果条件为假，则Strpos](http://php.net/manual/de/function.strpos.php)给出假。

```
if(strpos("[rgeger]","[") !== false){ 
    echo 'hey'; 
} 
```

编辑：我已经更正了我的答案。您的参数顺序错误。它的：

```
int strpos ( string $haystack , mixed $needle [, int $offset = 0 ] ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T20:34:00.407

因为实际上 strpos 可以返回 0 请参阅[doc](http://php.net/manual/en/function.strpos.php)。

> **警告** 此函数可能返回布尔值 FALSE，但也可能返回计算结果为 FALSE 的非布尔值。请阅读有关布尔值的部分以获取更多信息。使用 === 运算符测试此函数的返回值。

所以你必须直接与`false`价值进行比较。

```
if(strpos("[","[rgeger]") !== false){ 
  echo 'hey'; 
} 
```

**编辑 ：：**

小心..查看参数顺序

```
int strpos ( string $haystack , mixed $needle [, int $offset = 0 ] ) 
```

Haystack 是字符串输入。针是您正在寻找的东西。

```
if(strpos("[regeger]","[") !== false){ 
  echo 'hey'; 
} 
```**

# c# - ViewModel 如何与自己的 View 通信

> ID：13213221
> 
> 赞同：2
> 
> 时间：2012-11-03T20:31:01.533
> 
> 标签：c#, wpf, mvvm, mvvm-light

我正在开发一个 WPF MVVM Light 应用程序，我想显示一些消息框/对话框，或者在其他一些场景中，我希望我的 View 模型与其视图进行通信或在其各自的视图上引发一些事件。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:37:43.873

请参阅 MVVM Light 的 Messenger 类。当你下载 MVVM light 时，它甚至应该默认有样本。它类似于 Messenger.Default.Send(new YourMessageClass()) ，您可以在视图端注册监听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:34:57.963

prism 框架有一个交互请求的概念来解决这个问题。一个很好的例子可以在[这里](http://blogs.southworks.net/aadami/2012/05/09/prism-interactionrequest-and-popupmodalwindowaction-for-wpf-applications/)或[这里](http://www.codeproject.com/Articles/269364/MVVM-PRISM-Modal-Windows-by-using-Interaction-Requ)找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T13:11:36.867

显示弹出窗口的责任不应该是 ViewModel 的责任，而是“为您处理它的服务”。

如果“弹出窗口”是类似于“文件打开对话框”、“文件保存对话框”、消息框“确定/取消”或“是/否”等窗口的模式，那么我相信“服务”将是正确的选择。原因是该服务可以被伪造/模拟以进行单元测试。

此外，您可以根据您的需要对该服务进行不同的实现：例如，在调试（r，当角色是管理员或开发人员类型时）您拥有比发布用户或普通用户更多的“详细”信息。

现在，对于“ViewModel 如何与 View 通信”，我不确定你的意思。只需在 ViewModel 上添加一个属性并将视图绑定到该属性。

# android - 除非完全重新启动应用程序，否则 MediaPlayer 不会播放两次

> ID：13213225
> 
> 赞同：1
> 
> 时间：2012-11-03T20:31:29.467
> 
> 标签：android, audio, media-player, android-activity, android-mediaplayer

我正在开发一个使用 MediaPlayer 播放声音的应用程序。用户按下一个按钮，几秒钟后开始播放声音。我打电话：

```
mp.release();
mp = null;
finish(); 
```

在 onStop() 中，因此应该完全销毁 MediaPlayer 对象。我第一次使用该应用程序时一切正常，但是当我退出屏幕并返回到我之前所在的屏幕（仍在我的应用程序中）然后重新启动我播放声音的活动时，没有声音出现。如果我退出应用程序并将其从多任务处理中删除并重新启动它一切正常。

我在 postDelayed 之后播放声音，但这不会改变任何内容，因为 MediaPlayer 对象已在 onStop() 中删除。

编辑：

我如何启动 MediaPlayer 对象：

```
mp = MediaPlayer.create(this, R.raw.explosion);
mp.start(); 
```

# opengl - gl_PointCoord 的值不正确/未初始化

> ID：13213227
> 
> 赞同：0
> 
> 时间：2012-11-03T20:31:41.897
> 
> 标签：opengl, libgdx

我无法在片段着色器的 gl_PointCoord 变量中获取有效值。我使用 libgdx，它是一个跨平台的 java 框架，它允许在桌面和 android 上运行相同的应用程序。着色器在 android 上与 OpenGL ES 一起工作正常，只有桌面似乎没有提供正确的插值，但总是为零。

这可能是 libgdx 或图形驱动程序的问题吗？

NVidia Quadro 3000M 驱动程序 275.33 Win 7 64 位（服务包 1）

libgdx-0.9.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:46:30.490

仅供参考：还没有做太多研究，但似乎是 lwjgl 中的一个错误或 gl_PointCoord 仅在启用点精灵模式时可用的驱动程序通过

```
Gdx.gl20.glEnable(GL11.GL_POINT_SPRITE_OES); 
```

这在 OpenGL 4.2 或 OpenGL ES 2.0 中不可用，但似乎需要在桌面上显式设置。

# image - 使用标记的挂毯显示 blob

> ID：13213236
> 
> 赞同：1
> 
> 时间：2012-11-03T20:32:31.990
> 
> 标签：image, embed, blob, markup, tapestry

我已将 blob 图像保存在 db 中，使用此[组件](http://tapestry.apache.org/page-and-component-classes-faq.html)我希望将 blob 从 mysql 嵌入到挂毯中。我在网上找到了[这个](http://www.techerator.com/2011/12/how-to-embed-images-directly-into-your-html/)。不明白 writer.element 是如何工作的

我认为这样的事情应该有效

```
 @SupportsInformalParameters
    public class DBImage {

      @Parameter(required = true)
      private Image image;
      @Inject
      private ComponentResources resources;

      boolean beginRender(MarkupWriter writer,byte[] array){
            writer.element("img", "src", "data:image/png;base64,"+array,);

            resources.renderInformalParameters(writer);

            writer.end();

            return false;
      }
    } 
```

而不是在页面类中调用组件

```
@Property 
private DBImage image.beginRedner(entity.getBlobImage); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T21:26:05.727

我没有尝试将[数据 uri 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)与挂毯中的图像一起使用 - 我确信它“可以”工作，但要调用你只需将其包含在你的 tml 中：

```
<t:DBImage image="${entity.BlobImage}" /> 
```

在您的 DBImage 组件中，您需要一种将`image`参数转换为字节数组的方法。

我不想花时间创建这种技术的工作示例，但我将带您了解如何解决此类问题：

就像 html 文档中的任何图像渲染一样，必须有两个单独的请求（除非使用 data uri 方案）：

1.  页面的 html 来呈现图像标签（即`http://host/context/app/mypage`）
2.  图像数据（即`http://host/context/app/myimage`）

所以对于请求一，您要构建图像 url 并将其放在 img 标签中：

```
<html>
...
<img src="/context/app/myimage/params" />
...
</html> 
```

请求二将只返回图像数据的字节流。

让我们从第二个请求开始，因为这样更有意义。

在 Tapestry 中，通过创建页面类和可选的`tml`模板来处理单个请求。要提供字节流，您只需要页面类。要将参数或上下文传递给页面，请使用上下文参数。

```
package myproject.pages;

public class MyImage
{
    public StreamResponse onActivate(String parameter)
    {
        // retrieve your image using the context parameter(s)
        final InputStream imageStream = getImage(parameter);

        return new StreamResponse()
        {
            @Override
            public InputStream getStream() throws IOException
            {
                return imageStream;
            }

            @Override
            String getContentType()
            {
                return "image/png";
            }

            @Override
            void prepareResponse(Response response)
            {}
        };
    }
} 
```

此时，您可以使用 URL“http://host/context/app/myimage/parameter”请求/渲染您的图像。现在你只需要将它包含在你的 img 标签中，即请求 1。

因此，您需要先生成链接，这需要在您的页面类中完成：

包 myproject.pages；

```
public class MyPage
{
    @Inject
    private PageRenderLinkSource pageLink;

    public Link getImageLink()
    {
        return pageLink.createPageRenderLinkWithContext(MyImage.class, parameter);
    }
} 
```

剩下的就是在你的 tml 中使用这个链接：

```
<img src="${imageLink}" /> 
```

显然，您需要连接您的参数和检索。

# php - 在 md5 中加密密码？

> ID：13213237
> 
> 赞同：-2
> 
> 时间：2012-11-03T20:32:34.190
> 
> 标签：php, sql, md5

> **可能重复：**
> [需要帮助...如何将 md5 添加到 php 中的密码字段？](https://stackoverflow.com/questions/2778915/need-help-how-to-add-md5-to-password-field-in-php)

我有这个脚本允许用户更改他们的密码。但我希望使用 md5 将“新密码”加密到数据库中。谁能告诉我如何更改此脚本以加密 md5 中的“新密码”？

```
 <?php
require_once("session.php"); 
require_once("functions.php");
require('_config/connection.php');
?>
<?php 

session_start();

include '_config/connection.php'; 

$email = $_POST['email'];
$password = $_POST['password'];
$newpassword = $_POST['newpassword'];
$confirmnewpassword = $_POST['confirmnewpassword'];

$result = mysql_query("SELECT password FROM ptb_users WHERE email='$email'");

if(!$result) 
{ 
echo "The username you entered does not exist"; 
} 
else 
if($password!= mysql_result($result, 0)) 
{ 
echo "You entered an incorrect password"; 
} 
if($newpassword=$confirmnewpassword) 
    $sql=mysql_query("UPDATE ptb_users SET password='$newpassword' where email='$email'"); 
    if($sql) 
    { 
    echo "Congratulations You have successfully changed your password"; 
    }
else
{ 
echo "The new password and confirm new password fields must be the same"; 
}  
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:38:07.430

您正在根据纯文本字符串检查数据库的 md5 密码，您必须在执行此检查之前将密码转换为 md5。例子

```
 else 
   if(md5($password)!= mysql_result($result, 0)) 
    { 
   echo "You entered an incorrect password"; 
    } 
   if($newpassword=$confirmnewpassword)
              $newpassword = md5($newpassword);
$sql=mysql_query("UPDATE ptb_users SET password='$newpassword' where email='$email'"); 
if($sql) 
{ 
echo "Congratulations You have successfully changed your password"; 
}
  else
{ 
 echo "The new password and confirm new password fields must be the same"; 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:59:49.627

Don't use `MD5` you can use [password_compat](https://github.com/ircmaxell/password_compat) instead due to reliability

```
$password = filter_var($_POST['password'], FILTER_SANITIZE_STRING);
$newpassword = filter_var($_POST['newpassword'], FILTER_SANITIZE_STRING);
$newpassword2 = filter_var($_POST['confirmnewpassword'], FILTER_SANITIZE_STRING);

try {

    if ($newpassword != $newpassword2) {
        throw new Exception("Password Confirmation does not match");
    }

    $mysqli = new mysqli("host", "user", "password", "database");
    $result = $mysqli->query(sprintf("SELECT password FROM ptb_users WHERE email='%s'", $mysqli->escape_string($_POST['email'])));

    if ($result->num_rows < 1) {
        throw new Exception("The username you entered does not exist");
    }

    // Get Old Password
    $dbPassword = reset($result->fetch_assoc());

    // Prepare new hash
    $newHash = password_hash($newpassword, PASSWORD_BCRYPT);

    // Check if (password needs hashing and password is plain ) or Password is
    // hased but still old
    if ((password_needs_rehash($dbPassword, PASSWORD_BCRYPT) && $password == $dbPassword) || password_verify($password, $dbPassword)) {
        $mysqli->query(sprintf("UPDATE ptb_users SET password='%s' where email='%s'", $newHash, $mysqli->escape_string($_POST['email'])));
    } else {
        throw new Exception("Invalid Password");
    }
} catch ( Exception $e ) {
    echo $e->getMessage();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T20:34:15.683

```
 <?php
    require_once("session.php"); 
    require_once("functions.php");
    require('_config/connection.php');
    ?>
    <?php 

    session_start();

    include '_config/connection.php'; 

    $email = $_POST['email'];
    $password = $_POST['password'];
    $newpassword = $_POST['newpassword'];
    $confirmnewpassword = $_POST['confirmnewpassword'];

    $result = mysql_query("SELECT password FROM ptb_users WHERE email='$email'");

    if(!$result) 
    { 
    echo "The username you entered does not exist"; 
    } 
    else 
    if($password!= mysql_result($result, 0)) 
    { 
    echo "You entered an incorrect password"; 
    } 
    if($newpassword=$confirmnewpassword)
{
        $newpassword=md5($newpassword);
        $sql=mysql_query("UPDATE ptb_users SET password='$newpassword' where email='$email'"); 
}
        if($sql) 
        { 
        echo "Congratulations You have successfully changed your password"; 
        }
    else
    { 
    echo "The new password and confirm new password fields must be the same"; 
    }  
    ?> 
```

在更新散列密码变量的数据库之前添加了一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T20:35:20.530

在 PHP 中进行 MD5 哈希的方法是

```
string md5 ( string $str [, bool $raw_output = false ] ) 
```

只需通过此功能输入新密码并使用它即可。

请注意，MD5 是一种单向哈希，因此您不能在后面“解密”它......您必须将字符串与您的数据库进行比较作为 MD5。

# .htaccess - SEO：Google fetch 返回空白页（但呈现的 HTML 似乎正确）

> ID：13213239
> 
> 赞同：3
> 
> 时间：2012-11-03T20:32:40.150
> 
> 标签：.htaccess, fetch

我通常会找到我问题的所有答案，但这次我找不到任何答案。这实际上是我第一次在 stackoverflow 上发帖！这是我的问题。

我的网站的根目录：“www.example.com”在我使用 Google 网站管理员工具获取我的网站时返回一个空白（非空）页面。当我查看呈现的 HTML 时，它正是它应该是的，但页面的预览只是空白。

不过，我网站的所有其他页面（例如“www.example.com/sample_page.html”）似乎都提供了正确的预览。我什至尝试将根域“www.example.com”重定向（htaccess）到“www.example.com/sample_page.html”，但它也提供了空白预览。

我使用缓存的 HTML 文件，因此它与启用的 JS 或其他任何东西没有任何关系。此外，就像我告诉你的那样，呈现的 HTML 看起来还可以，它只是不返回任何内容的预览。

任何提示都非常感谢，因为我几周以来一直在尝试寻找解决方案。

# c++ - 访问冲突写入 2 路队列

> ID：13213242
> 
> 赞同：4
> 
> 时间：2012-11-03T20:33:41.803
> 
> 标签：c++, queue, visual-studio-2012

我正在尝试使用 C++ 创建一个两侧队列。我正在使用 Visual Studio 2012 并不断获得：

`First-chance exception at 0x00D95A29 in Console_Assignment1.exe: 0xC0000005: Access violation writing location 0x00000008.`

我认为我遇到了指针问题（可能试图取消引用我不应该引用的东西）。到目前为止，我发现问题的运气为零，我真的很感激再看一眼。

（代码太长无法粘贴，所以我只复制我认为给我带来问题的函数。）也许只是一个小的概述。我有一个节点类，它包含两个指向节点的指针（下一个和上一个）和一个 int （值）。和一个队列类，它包含两个指向节点（第一个和最后一个）和一个 int（大小）的指针。

```
// enqueueBeg - adds a new node at the beginning of the queue.
void DBL_Queue::enqueueBeg(int insert_val)
{
node* new_node = new node(insert_val);  // Creates the new node.
new_node->setNext( this->getFirst() ); // Connects the new node to the first in the queue
this->getFirst()->setPrev( new_node ); // Connects the first node in the queue to the new one
this->setFirst( new_node );             // Sets the new node as the first in the queue
this->setSize ( this->get_queue_size() + 1 ); // adds 1 to the size of the list

// dequeueBeg - removes the first node of the queue.
int DBL_Queue::dequeueBeg()
{
int ret_value = this->getFirst()->getVal();
node* old_node = this->getFirst();
this->setFirst( this->getFirst()->getNext() ); // Sets the second node in the queue as the first.
this->getFirst()->setPrev( NULL ); // Removes the link between the new first new and the old one.
this->setSize( this->get_queue_size() - 1); // Removes 1 from queue size
delete old_node;  // Deletes the node that use to be first.
return ret_value; // Returns the value of the old node.

// DBL_Queue Destructor
DBL_Queue::~DBL_Queue()
{
if (this->first == NULL)   // if queue is empty do nothing
    return;
else 
{
    while (this->first->getNext() != NULL)  // go through all nodes and delete them one by one
    {
        node* deletion = this->getFirst();
        this->setFirst( this->getFirst()->getNext() );
        delete deletion;
    }
}
} 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:42:10.980

我认为这是你的问题：

```
 while (this->first->getNext() != NULL)  // go through all nodes and delete them one by one
{
    node* deletion = this->getFirst();
    this->setFirst( this->getFirst()->getNext() );
    delete deletion;
} 
```

当您删除最后一个节点时，您将调用

```
this->setFirst( null ); 
```

因为`this->getFirst()->getNext()`将为空，对吗？于是就`while(this->first->getNext()`变成了`null->getNext()`

为什么不只是

```
while(this->first != NULL) 
```

?

编辑：除非你真的关心最小化析构函数的运行时间，为什么不

```
while(this->getFirst() != NULL) {this->dequeueBeg;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:54:31.233

Joachim 的评论：“你试过在调试器中运行吗？它可以帮助你定位崩溃的位置，还可以让你检查变量以帮助你了解可能导致它的原因。但是，你有没有想过当你入队时会发生什么？ “

是解决方案。我的问题是我没有正确处理插入空队列或删除最后一个节点。

谢谢大家！

# magento - 如何在损坏的 magento 部署中修复这些错误的 URL？

> ID：13213252
> 
> 赞同：0
> 
> 时间：2012-11-03T20:34:32.217
> 
> 标签：magento, url, deployment, stylesheet

这是我第一次尝试使用 Magento 开发网站。我不得不承认学习曲线很陡峭，但到目前为止我已经能够应对大部分挑战。然而，在最后的障碍中，我绊倒了。

**眼镜：**

* * *

> *   Magento 1.7.0.2
> *   阿帕奇版本 2.2.22
> *   PHP 版本 5.3.10
> *   MySQL 版本 5.1.65-cll

Magento 位于服务器上名为*magento*的文件夹下一个目录，如*[http://www.mydomain.co.za/magento](http://www.mydomain.co.za/magento)*

**问题：**

* * *

前端或后端均不显示图像。就好像它无法访问样式表一样。查看源代码时，我可以看到路径是错误的。*[它在http://www.mydomain.co.za/](http://www.mydomain.co.za/)*中搜索样式表，而不是在*magento*文件夹中。我可以通过输入*[http://www.mydomain.co.za/magento/index.php/admin](http://www.mydomain.co.za/magento/index.php/admin)*来访问后端，这会在没有任何样式的情况下启动后端。然而，在那之后，每个请求都会导致 404。 URL 看起来像*[http://www.mydomain.co.za/magento/adminindex.php](http://www.mydomain.co.za/magento/adminindex.php)*管理员和索引之间没有斜线。在每 404 之后手动引入该斜线会导致显示正确的页面（仍然没有样式）。很明显问题就在这里，但我似乎无法解决它。是的，我在数据库中的路径后确实有斜线，用于安全和不安全。

**尝试解决：**

* * *

*   更改了数据库[链接中的 url](https://stackoverflow.com/questions/1762090/how-do-i-transfer-a-local-magento-install-onto-my-live-server)
*   更改 app/etc/local.xml 以使用正确的数据库
*   更改 .htaccess 以包含这一行：RewriteBase /magento/（但我再次删除了它）
*   删除了相应的缓存和会话文件夹
*   尝试了这里给出的一些建议[链接](http://www.kudoswebsolutions.com/web-design-blog/magento-deployment-tips)

现在，我被困住了。我已经一次又一次地犯错（不是 Magento 的错，只是学习曲线），我很累…… :-( 如果有人可以给我一些关于下一步尝试的建议，我将不胜感激。

我发现了（看似）类似问题的这些链接。显然这里发生了一些事情。另一个线程从未解决问题，只是找到了解决方法。有没有可能我们遇到了错误？有什么东西正在剥离那条斜线，它不是任何通常的嫌疑人…… *dum dum dum*

[链接](http://www.magentocommerce.com/boards/viewthread/234373/) [链接](https://stackoverflow.com/questions/9220988/missing-slash-between-base-url-and-all-links)

# bash - 执行返回非零值的函数时如何获取原始调用者lineno

> ID：13213254
> 
> 赞同：4
> 
> 时间：2012-11-03T20:34:52.957
> 
> 标签：bash, error-handling, bash-trap

我制作了一个 func.sh 脚本，其中包含：

```
1\. function testfunc ()
2\. {
3\.   echo "--> TESTFUNC CALLED"
4\.   caller 0
5.
6\.   # here I mimic that something went wrong
7\.   echo "now I return a non-zero value"
8\.   return 1
9\. } 
```

然后我做了一个 main.sh 脚本

```
1\. #!/bin/bash
2.
3\. source 'func.sh'
4\. testfunc
5.
6\. exit 0 
```

**我的目标是捕获 lineno 4**（在上面的脚本中），我没有正确管理返回值。

为此，我尝试了：

```
 1\. #!/bin/bash
 2.
 3\. set -o errexit
 4.
 5\. function exit_handler ()
 6\. {
 7\.     echo "--> EXIT HANDLER"
 8\. 
 9\.     echo "BACKTRACE IS:"
10\.     local i=0
11\.     while caller $i > /dev/null
12\.         do
13\.             caller $i
14\.             let "i=i+1"
15\.     done
16.
17\.     echo "PASSED LINENO IS: $1"
18\.     exit 0
19\. }
20\. trap 'exit_handler $LINENO' EXIT 
21.
22\. source 'func.sh'
23\. testfunc
24.
25\. exit 0 
```

在这里，我想赶上**lineno 23**。
输出是：

```
--> TESTFUNC CALLED
23 main import.sh
now I return a non-zero value
--> EXIT HANDLER
BACKTRACE IS:
1 main.sh
PASSED LINENO IS: 1 
```

调用者在函数本身内部检测到正确的 lineno，但不是在陷阱中，其中脚本的名称是正确的（main.sh）但不是 lineno（1????而不是 22）

我也试过

```
 1\. #!/bin/bash
 2.
 3\. function err_handler ()
 4\. {
 5\.     echo "--> ERR HANDLER"
 6\. 
 7\.     echo "BACKTRACE IS:"
 8\.     local i=0
 9\.     while caller $i > /dev/null
10\.         do
11\.             caller $i
12\.             let "i=i+1"
13\.     done
14\.    
15\.     echo "PASSED LINENO IS: $1"
16\.     exit 0
17\. }
18\. trap 'err_handler $LINENO' ERR 
19.
20\. source 'func.sh'
21\. testfunc
22.
23\. exit 0 
```

但输出是：

```
--> TESTFUNC CALLED
21 main import.sh
now I return a non-zero value
--> ERR HANDLER
BACKTRACE IS:
8 main.sh
PASSED LINENO IS: 8 
```

函数本身内部的调用者仍在检测正确的**lineno（**在这种情况下为 21），但陷阱内部的情况更糟糕，因为它得到 lineno 8，这是 func.sh 中的 lineno ，其中有 return 1 ... （而陷阱内的调用者将该行引用到错误的脚本 main.sh）。

在这一点上，我的想法用完了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T23:07:38.903

我是这样解决的：

```
 1\. #!/bin/bash
 2.
 3\. set -o errexit
 4\. 
 5\. function exit_handler ()
 6\. {
 7\.     local p_lineno="$1"
 8.
 9\.     echo "--> ERR HANDLER"
10\. 
11\.     for (( i=${#g_bash_lineno[@]}-1; i>=0; i-- ))
12\.         do
13\.         test ${g_bash_lineno[$i]} -ne 1 && break
14\.     done    
15.
16\.     local g_lineno="${g_bash_lineno[$i]}"
17\. 
18\.     if test ${p_lineno} -eq 1 && test ${g_lineno} -gt 1
19\.         then
20\.         local lineno="${g_lineno}"
21\.         else
22\.         local lineno="${p_lineno}"
23\.      fi
24\. 
25\.      local source="${g_bash_source[-1]}"
26\. 
27\.      echo "LINENO: ${lineno}"   
28\.      echo "FILE: ${source}"
29\. 
30\.      exit
31\. }
32\. trap 'exit_handler $LINENO' EXIT 
33.
34\. function preexec ()
35\. {
36\.     local called=$( caller 0 )
37\.     local lineno=$( echo "$called" | cut -d " " -f1 )
38\.     local source=$( echo "$called" | cut -d " " -f3 )
39\. 
40\.     if ! eval '[[ ${!g_bash_lineno[@]} ]]' # isset
41\.         then
42\.             g_bash_lineno=( "$lineno" )
43\.         else
44\.             g_bash_lineno=( "${g_bash_lineno[@]}" "$lineno" )
45\.     fi
46\.    
47\.     if ! eval '[[ ${!g_bash_source[@]} ]]' # isset
48\.         then
49\.             g_bash_source=( "$source" )
50\.         else
51\.             g_bash_source=( "${g_bash_source[@]}" "$source" )
52\.     fi
53\. }
54\. trap 'preexec' DEBUG
55.
56\. source 'func.sh'
57\. testfunc
58.
59\. exit 0 
```

输出将是

```
--> TESTFUNC CALLED
57 main import.sh
now I return a non-zero value
--> ERR HANDLER
LINENO: 57
FILE: main.sh 
```

我遵循了[这个问题](https://superuser.com/questions/175799/does-bash-have-a-hook-that-is-run-before-executing-a-command)对超级用户的建议。
基本上我在任何命令之前执行一个函数（preexec）并存储调用者的信息。发生错误时，如果我在退出陷阱中收到 1 的 lineno（这总是错误的，因为任何脚本的第一行应该是 #!/bin/bash），我会读取最后一个调用者的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-11T00:22:02.827

I think BASH_LINENO variable might be what you need. Look here for details: [https://www.gnu.org/software/bash/manual/bashref.html#Bash-Variables](https://www.gnu.org/software/bash/manual/bashref.html#Bash-Variables)

# c# - Windows 应用商店应用 StreamSoket DataReader.LoadAsync() ObjectDisposedException

> ID：13213258
> 
> 赞同：5
> 
> 时间：2012-11-03T20:35:06.070
> 
> 标签：c#, sockets, windows-store-apps, datareader

我在使用 Windows 8 UI 应用程序时遇到问题。我正在使用客户端-服务器通信，客户端需要一直检查新消息。所以我使用这样的代码，其中_socket是一个StreamSoket：

```
 private async static void MessageReceiver()
    {
        var dataReader = new DataReader(_socket.InputStream);
        dataReader.InputStreamOptions = InputStreamOptions.Partial;

        var stringHeader = await dataReader.LoadAsync(4);
        if (stringHeader != 0)
        {
            var bytes = new byte[4];
            dataReader.ReadBytes(bytes);
            var length = BitConverter.ToInt32(bytes, 0);

            var count = await dataReader.LoadAsync((uint) length);

            var result = dataReader.ReadString(count);

            ParseRequest(result);
        }

        dataReader.DetachStream();

        MessageReceiver();
    } 
```

但是在第二个 LoadAsync 中，当我尝试读取字符串时，我有 ObjectDisposedException。你能帮我吗？我不知道为什么会抛出这样的异常。我也尝试过使用 DataReader.InputStream.ReadAsync()，但我也遇到了这样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-30T00:02:03.703

我知道这是一篇旧帖子，但由于我遇到了同样的问题并想通了，我想我会为遇到此问题的其他人发布解决方案。虽然我不会声称确切地知道这个问题的原因是什么，但由于我主要是一个 C++ 人，所以解决方案相当简单。

我修复它的方法是将 DataReader 声明为类成员，从而扩展它的范围

```
_socket= new StreamSocket();
_socket.Control.KeepAlive = true;
_socket.Control.NoDelay = true;
_socketReader = new DataReader(_socket.InputStream);
_socketReader.InputStreamOptions = InputStreamOptions.Partial; 
```

我可能对 await 关键字的错误理解是调用基本上放在一个新线程上，并且函数的其余部分将在前一个线程上继续。由于 DataReader 是在本地声明的，一旦函数完成，它将超出范围，让等待线程处理已处理的对象。

如果有人想澄清这一点，将不胜感激。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-10T04:29:51.313

Based of Alex Sorokoletov's last comment, my guess would be that the one of your important objects (probably the stream) would be disposed in the call to `datareader.DetachStream();`

# jsf - JSF 2.0 和 JSR 303 验证之间的严重性映射

> ID：13213261
> 
> 赞同：1
> 
> 时间：2012-11-03T20:35:26.810
> 
> 标签：jsf, primefaces, bean-validation

我想知道如何使用 JSR 303 设置严重性级别并在 JSF 2.0 应用程序中显示该严重性级别。目前，我只收到了两次消息。

支持豆：

```
@NotNull()
@Min(value = 0)
@Max(value = 1000000)
private int kilometres; 
```

但是，在输入文本消息中

```
<p:messages id="kilometresMessages" showDetail="true" closable="true" /> 
```

消息是：

```
Minimum value: 0Minimum value: 0 
```

我想要：FacesMessage.SEVERITY_INFO：最小值：0

那么如何将 FacesMessage.SEVERITY_XXXX 映射到我的 JSR303 注释中的内容？

你能帮我么？

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:20:05.030

在 JSR303 注释中存在一个您可以使用的有效负载属性。

```
public final class Severity {

    public static class Error implements Payload {
    }

    public static class Warning implements Payload {
    }

    public static class Info implements Payload {
    }

    private Severity() {

    }
} 
```

然后你可以定义你的 JSR303 注释，比如

```
@NotNull()
@Min.List({
    @Min(value = 0, payload={Severity.Info.class}),
    @Min(value = -20, payload={Severity.Error.class})
})
@Max(value = 1000000)
private int kilometres; 
```

验证后，相应的 ConstraintViolation 对象包含有效负载。

```
Set<Class<? extends Payload>> payload = ConstraintViolation.getConstraintDescriptor().getPayload(); 
```

之后，您必须将 constraintViolations 转换为您要显示的相应消息。由于我不是 JSF 专家，因此我不得不跳过这部分问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-27T16:55:06.307

可悲的事实是 JSR303 / JSR349（Bean Validation API）消息在 JSF 2.0-2.2 中始终是错误消息。严重性是一个常数——参见[javax.faces.validator.MessageFactory](http://grepcode.com/file/repo1.maven.org/maven2/javax.faces/javax.faces-api/2.2/javax/faces/validator/MessageFactory.java#MessageFactory.getMessage%28java.util.Locale%2Cjava.lang.String%2Cjava.lang.Object%5B%5D%29)的第 214 行。

# mysql - 以复合主键顺序处理记录块

> ID：13213265
> 
> 赞同：3
> 
> 时间：2012-11-03T20:36:04.040
> 
> 标签：mysql, sql

我正在使用 mysql 并希望处理一个非常大的表，其主键由 10,000 个块中的 4 个部分组成（将数据编组到另一个系统）。当我进行处理时，数据库处于脱机状态，因此我不必担心任何修改。假设主键是 ( `A`, `B`, `C`, `D`) ，它们都是整数。我首先尝试使用`LIMIT OFFSET`来实现这一点：

```
SELECT * FROM LargeTable ORDER BY (A, B, C, D) LIMIT 10000 OFFSET 0; 
```

我在每次通话时将偏移量增加了 10000。当它到达表中较高的行时，这似乎变得非常缓慢。难道不能`LIMIT OFFSET`有效地做到这一点吗？

然后我尝试了一种在复合主键上使用比较的不同方法。我可以像这样得到第一个块：

```
SELECT * FROM LargeTable ORDER BY (A, B, C, D) LIMIT 10000; 
```

如果该块的最后一行有`A = a`, `B = b`, `C = c`,`D = d`然后我可以得到下一个块：

```
SELECT * FROM LargeTable
WHERE
    A > a OR
    (A = a AND B > b) OR
    (A = a AND B = b AND C > c) OR
    (A = a AND B = b AND C = c AND D > d)
ORDER BY (A, B, C, D) LIMIT 10000; 
```

然后对每个块重复此操作。当我到达表中较高的行时，这似乎也大大减慢了。有一个更好的方法吗？我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T21:16:18.100

从一开始就使用简单的方法开始处理数据

```
SELECT *
FROM LargeTable
ORDER BY (A, B, C, D) 
```

并在您的客户端代码中一一获取行。如果需要，您可以在 fetch 循环中获取 10000 行，或者添加`LIMIT 10000`子句。当你想停止这个块时，记住最后一个被处理的元组 (A, B, C, D)，让我们调用它`(A1, B1, C1, D1)`。

现在，当您想从最后一点重新开始时，再次一个接一个地获取行，但是这次在 WHERE 子句中使用元组比较：

```
SELECT *
FROM LargeTable
WHERE (A, B, C, D) > (A1, B1, C1, D1)
ORDER BY (A, B, C, D) 
```

`LIMIT 10000`（如果您不想依赖客户端代码过早退出 fetch 循环，也可以添加子句）。这个解决方案的关键是 MySQL 正确地实现了元组比较。

**编辑**：提到`LIMIT 10000`可以添加可选。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T21:11:41.957

您可能正在以某种方式调用表的顺序扫描。

此外，您是有条件的*SELECT*没有按照您的想法进行操作。*它在第一个条件A > a*上短路。

如果您跳过*ORDER BY*和*LIMIT*并使用如下语句，效率会更高：

```
SELECT *
FROM LargeTable
WHERE A = a AND B = b AND C = c; 
```

并且只需遍历*a*、*b*和*c*的集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:10:09.377

很大程度上取决于您进行“编组”操作的上下文，但是您是否有理由不能让不受约束的 SELECT 运行，并让您的代码将其分组为 10,000 个项目的块？

在伪代码中：

```
while (fetch_row succeeds)
{
    add row to marshalled data
    if (10,000 rows marshalled)
    {
        process 10,000 marshalled rows
        set number of marshalled rows to 0
    }
}
if (marshalled rows > 0)
{
    process N marshalled rows
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T21:45:24.513

带偏移量的限制需要丢弃行，直到找到您真正想要的行，这样它就会变慢，因为您有更高的偏移量。

这是一个想法。由于您的数据库在您执行此操作时处于脱机状态，因此数据实际上不必在作业期间出现。为什么在处理它们时不将所有已处理的行移动到另一个表？我不确定它会更快，这取决于表有多少索引，但您应该尝试一下。

```
CREATE TABLE processed AS LargeTable;

SELECT * FROM LargeTable LIMIT 10000;
INSERT INTO processed SELECT * FROM LargeTable LIMIT 10000;
DELETE FROM LargeTable LIMIT 10000;

DELETE TABLE LargeTable;
RENAME TABLE processed TO LargeTable; 
```

# eigen - 特征库 - 最小二乘

> ID：13213268
> 
> 赞同：4
> 
> 时间：2012-11-03T20:36:28.713
> 
> 标签：eigen, least-squares

我想在使用 Eigen 库时使用最小二乘问题。我的选择是2，

*   sysAAA.jacobiSvd(Eigen::ComputeThinU | Eigen::ComputeThinV).solve(sysBBB)
*   sysAAA.colPivHouseholderQr().solve(sysBBB);

我一开始使用的是第一个，但事实证明它非常慢（1）（2）。

所以我去了第二个解决方案（其他方法不适合我的情况，因为它们需要特殊的矩阵 (2) ）

colPivHouseholderQr().solve 是否给出最小二乘解？

我的印象是它没有（3），但我想在寻找“解决方法”之前确定。

1.  [http://forum.kde.org/viewtopic.php?f=74&t=102088](http://forum.kde.org/viewtopic.php?f=74&t=102088)
2.  [http://eigen.tuxfamily.org/dox/TopicLinearAlgebraDecompositions.html](http://eigen.tuxfamily.org/dox/TopicLinearAlgebraDecompositions.html)
3.  [http://eigen.tuxfamily.org/dox/TutorialLinearAlgebra.html#TutorialLinAlgLeastsquares](http://eigen.tuxfamily.org/dox/TutorialLinearAlgebra.html#TutorialLinAlgLeastsquares)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:39:35.030

是的，ColPivHouseholderQr::solve() 计算最小二乘解。

# mpi - MPI_Exscan-如何用于并行文件写入

> ID：13213272
> 
> 赞同：1
> 
> 时间：2012-11-03T20:36:58.117
> 
> 标签：mpi

我正在为并行 IO 编写一些 MPI 代码。假设我有一个数组 [2 ,5,6,9,0,4,3,1,8,7 ] 写在一个文件中，我有 2 个进程。

我定义文件视图来读取这个文件的一部分。进程 0 看到：2 ,5,6,9,0（5 个元素） 进程 1 看到：4,3,1,8,7（5 个元素） 两个进程都调用一个排序函数。作为排序功能的结果，进程 0 有：0,1,2,3（4 个元素） 进程 1 有：4,5,6,7,8,9（6 个元素）

现在我需要将此输出写入新的输出文件。进程 0 会在偏移量 0 处写入时正确写入。但是进程 1 如何知道写入文件的偏移量？我知道我需要定义一个要写入的文件视图，但是新的位移是什么。我有点认为 MPI_Exscan 可以做到。但我不知道怎么做...有人可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T00:23:35.530

当然; 您在本地元素数量上使用`MPI_Exscan`with`MPI_SUM`来获取您“左侧”的总数，并在您的视图中使用它（作为偏移量，或在您创建的类型中定义您的视图）。

这是一个小的 Fortran 程序，其中每个等级生成一个“随机”（嗯，`2*rank+1`）大小的字符数组（等级 0 的“0”等），使用 MPI_Exscan 找出它在写入时应该使用的偏移量，然后写入：

```
program testexscan
    use mpi
    implicit none

    integer :: nelements, nleft, total
    character, allocatable, dimension(:) :: array

    integer :: rank, nprocs, ierr, fh
    integer(kind=MPI_OFFSET_KIND) :: disp

    call MPI_Init(ierr)

    call MPI_Comm_rank(MPI_COMM_WORLD, rank,  ierr)
    call MPI_Comm_rank(MPI_COMM_WORLD, nprocs, ierr)

    call generatedata(rank, array)

    nelements = size(array)
    call  MPI_Exscan   (nelements, nleft,  1, MPI_INTEGER, MPI_SUM, MPI_COMM_WORLD, ierr)

    print *, 'rank = ', rank, ' nelements = ', nelements, ' nleft= ', nleft

    call MPI_File_open(MPI_COMM_WORLD, 'output.txt', ior(MPI_MODE_WRONLY,MPI_MODE_CREATE),  &
                       MPI_INFO_NULL, fh, ierr)

    disp = nleft * 1    ! offset in bytes
    call MPI_File_set_view(fh, disp, MPI_CHARACTER, MPI_CHARACTER, "native", MPI_INFO_NULL, ierr )
    call MPI_File_write_all(fh, array, nelements, MPI_CHARACTER, MPI_STATUS_IGNORE, ierr)
    call MPI_File_close(fh, ierr)

    deallocate(array)

    call MPI_Finalize(ierr)

    contains

        subroutine generatedata(rank, arr)
        character, dimension(:), allocatable, intent(inout) :: arr
        integer, intent(in) :: rank

        nelements = rank * 2 + 1

        allocate(array(nelements))
        array = char(ichar("0")+rank)

        end subroutine generatedata

end program testexscan 
```

运行这个给出：

```
$ mpif90 -o testexscan testexscan.f90 
$ mpirun -np 4 ./testexscan
 rank =            0  nelements =            1  nleft=            0
 rank =            1  nelements =            3  nleft=            1
 rank =            2  nelements =            5  nleft=            4
 rank =            3  nelements =            7  nleft=            9
$ cat output.txt 
0111222223333333 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:15:52.860

您的描述有点含糊，但无论如何，进程 1 可以只向进程 2 发送一条消息，其中包含要使用的偏移量。

# objective-c - 在 UITableView 中呈现 NSDictionary

> ID：13213273
> 
> 赞同：-1
> 
> 时间：2012-11-03T20:37:06.887
> 
> 标签：objective-c, uitableview, nsdictionary

> **可能重复：**
> [NSDictionary 到 UITableView](https://stackoverflow.com/questions/11745233/nsdictionary-to-uitableview)

我有带有键的 NSDictionary，例如 @"first_name"。我想使用 UITableView 显示此键的对象。我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:19:29.570

您可以只设置 ui 表视图委托，然后以某种方式对字典进行排序（选择您希望的顺序，或者从对键排序的字典中创建一个数组）。实现协议是解决方案。

# php - 选中了哪个复选框

> ID：13213275
> 
> 赞同：0
> 
> 时间：2012-11-03T20:37:13.323
> 
> 标签：php, javascript

我每页有四行。直接解析的四行形成mysql表。每行都有一个复选框。我想知道选中了哪个复选框。在下面显示的代码中，它仅保存页面的第一行。因此，如果我选择第三行，它将显示为选择的第一行。我正在使用 onchange 方法来知道选择了某些东西，但我还不知道如何获得它。

有人可以帮忙吗？

```
<?php

    //limit for number of categories displayed per page
    $limit = 4;

    $categoriesNum= mysql_query("SELECT COUNT('categoryTopic') FROM categories");   

    //number of current page
    $page =(isset($_GET['page']))? (int) $_GET['page'] :1;

    //calculate the current page number 
    $begin =($page - 1)* $limit; 

    //number of pages needed. 
    $pagesCount =ceil(mysql_result ($categoriesNum,0)/$limit);

    //Query up all the Categories with setting the Limit 
    $CategoryQuery = mysql_query ("SELECT categoryTopic From categories ORDER BY categoryTopic LIMIT $begin, $limit");

    //Place all categories in an array then loop through it displaying them one by one
    while ($query_rows = mysql_fetch_assoc($CategoryQuery))
    {

        $category =$query_rows['categoryTopic'];  
        //echo $category; 
        //query all the subcategories that the current category has 
        $Sub = mysql_query ("SELECT categoryTopic FROM subcategories WHERE categoryTopic='$category'");             
        $Count = mysql_num_rows ($Sub); 

        echo  '<table width="85%" border="1"  cellpadding="0"; cellspacing="0" align="center">

        <tr>        
            <th width="23%" height="44" scope="col" align="left"> '.$query_rows['categoryTopic'].' <br><br><br></th>
            <th width="24%" scope="col">'.$Count.'</th>
            <th width="25%" scope="col"> 0 </th>
            <th width="28%" scope="col"> <form  name = "choose">
            <label><input type="checkbox" id ="check" value= '.$category.' onchange="handleChange(this);"></label>
        </tr>
    </table>';  
    }
    ?> 

<script type="text/jscript">
//this function will be called when user checks a check box. 

function handleChange(cb) {

//get the selected category 
var category = document.getElementById('check').value; 
document.write(category); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:44:58.653

看起来您的页面上有**重复的 ID**。

如果每一行都有**LABEL id="check"**，因为页面中的 ID 必须是唯一的，它总是会获得具有相应 ID 的第一个元素。

所以它永远是第一行..

而是尝试直接在您的事件中传递 this.value

```
onchange="handleChange(this.value);

function handleChange(cb) {

document.write(cb); 
```

这是一个不好的做法..所以先尝试修复重复 ID 的问题..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:49:28.487

如果我正确理解您的问题，您想知道如何获取用户刚刚单击的复选框的类别（复选框的值）？

```
function handleChange(cb) {
  // get the selected category
  var category = cb.value;
  // ...
} 
```

您通过 -param 将当前单击的复选框提供给`handleChange`-function `cb`。因此，如果您想获取此复选框的属性，只需查找`cb`-object 的属性即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T20:54:17.067

您有多个具有相同 id 的行，这使您的 HTML 无效。为避免这种情况，您应该将 javascript 代码更改为

```
function handleChange(cb) {
//get the selected category 
var category = cb.value; 
document.write(category);
} 
```

# sql-server - Noob 关注：T-SQL 子查询

> ID：13213277
> 
> 赞同：1
> 
> 时间：2012-11-03T20:37:29.970
> 
> 标签：sql-server, tsql

我有一个`bbc`包含以下列的表格：

*   `name`（指世界特定区域内的国家名称）
*   `region`（世界大陆）
*   `population`（名称字段中的国家人口）

我试图回答的问题：

*查找属于所有人口少于 250000000 的地区的每个国家/地区。显示名称、地区和人口。*

我在想答案可能是这样的：

```
SELECT name, region, population 
FROM bbc 
GROUP by region 
HAVING MAX(population) < 250000000 
```

我觉得我的答案偏离了方向......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:44:38.810

它抱怨我的 GROUP BY 中不存在名称和人口。所以我使用子查询来解决这个问题。

```
SELECT name, region, population FROM bbc
WHERE region IN

(SELECT region FROM bbc 
GROUP BY region 
HAVING MAX(population) < 25000000) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:44:54.173

```
select b.name, b.region, b.population
from bbc as b
where
    b.region in
    (
        select t.region
        from bbc as t
        group by t.region
        having max(t.population) < 25000000
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T20:59:42.980

```
Select
  b.name, 
  b.region, 
  b.population
From
  bbc b
Where
  Not Exists (
    Select
      'x'
    From
      bbc b2
    Where
      b.region = b2.region And
      b.population > 250000000
  ) 
```

# ruby-on-rails - 将内联模板更新为 Ember 1.0 pre 2

> ID：13213280
> 
> 赞同：2
> 
> 时间：2012-11-03T20:37:56.947
> 
> 标签：ruby-on-rails, ember.js

我有以下一些代码：[https](https://gist.github.com/c111cf9a240a078c9f6a) ://gist.github.com/c111cf9a240a078c9f6a （在rails中）

我正在使用最新的 ember：

`// Version: v1.0.0-pre.2-2-g1e4bdd5`

`// Last commit: 1e4bdd5 (2012-10-25 14:04:52 -0700)`

[1.0 pre 2 http://emberjs.com/blog/2012/10/25/ember-1-0-pre2/](http://emberjs.com/blog/2012/10/25/ember-1-0-pre2/)上的博客文章说必须始终命名内联模板。

如果我添加`data-template-name="application"`到三个模板中的每一个，它们都不会被执行（据说会被覆盖）。

在不添加路由器或其他激烈的东西的情况下，我如何仍然支持这个用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:42:48.740

答案似乎是制作一个包含整个 index.html.erb 的模板，并将`data-template-name="application"`.

[https://gist.github.com/4008652](https://gist.github.com/4008652)

这是有道理的，因为没有理由在一个 index.html.erb 中包含三个模板。

但是，我仍然可以看到有多个“应用程序”模板的用例。

# c - 如何在 shmat() 共享内存段中提供起始地址以附加到该地址？

> ID：13213283
> 
> 赞同：0
> 
> 时间：2012-11-03T20:38:09.897
> 
> 标签：c, posix, fork, shared-memory

所有标题都根据要求包含在内。下面的这段代码可以正常工作，但问题出在`shmat(seg_id,NULL,0)`. `NULL`在第二个参数中表示操作系统将代表用户处理该位置。但是我们可以给出我们自己的内存位置但是如何呢？我不知道，请帮忙。`(OS - Ubuntu 11.04 ,Compiler gcc 4.5.2)` 我试过`man shmat`但没有完全理解

```
typedef struct {
         int id;
} emp;

int main() {
         emp *e;
         int seg_id;
         const int size=sizeof(emp);
         seg_id=shmget( IPC_PRIVATE, size, S_IRUSR | S_IWUSR); 
         pid_t pid=fork();
         if(pid<0) {
                 printf("Error");
                 return -1;
         }
         else if(pid == 0) {
                e=(emp *)shmat(seg_id,NULL,0);     
                 e->id=123;
                 shmdt(e);                       
         }
         else {
                 wait(NULL);
                 e=(emp *)shmat(seg_id,NULL,0);  
                 printf("\nEmp Id : %d\n\n",e->id);
                 shmdt(e);                          
                 shmctl(seg_id, IPC_RMID, NULL);  
         }
         return 0;
} 
```

我也试过这个来获得我们自己`shmget()`的 4K 页面对齐地址

```
emp *e;
void **p;
posix_memalign(&p,4096,4096); // alignment as of pagesize 4K 
e=p; // get the first address of the aligned memory 
free(p); // free the allocated memory 
```

然后将此用作`shmat(seg_id,e,0);`// 认为 e 将是我想要的地址。但它给出了分段错误

或者，第三个参数也有问题吗？任何帮助或建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:07:24.190

我不确定你想在这里做什么`posix_memalign()`。您正在调用该函数以从堆中分配一块内存，然后尝试使用返回的相同地址`posix_memalign()`作为映射共享内存段的位置。该地址显然不可用，因为它是堆的一部分！

我看到您`posix_memalign()`在调用之前释放了返回的块`shmat()`，但是从堆中释放一块内存（通常）不会导致堆缩小，所以地址实际上仍然是堆的一部分。

如果您必须为 选择自己的地址`shmat()`，则应选择远离地址空间中其他任何地址的地址，以避免与您的堆或任何其他映射冲突，并避免堆在增长时与您的映射发生冲突在您的流程生命周期中。确定这样的地址本质上是不可移植的。

The only reason I can think of for wanting to choose a fixed address for your mapping is to make sure it's mapped as the same address in several different processes (so that internal pointers can work). If that's what you want, you can let the OS choose the location in the first process and call `shmat()` with that same address in the second and all other processes. Even that may not work though, because other processes may happen to already have something mapped at the same address.

# java - 在这种情况下，拥有公共 Java 类成员会是不好的做法吗？

> ID：13213284
> 
> 赞同：5
> 
> 时间：2012-11-03T20:38:23.577
> 
> 标签：java, private, public

我正在编写一个通信软件，它将与我大学控制部门的实验室流程进行通信。这些进程通过串行端口进行通信，并且会有相当多的位检查/操作。我写了一个如下的辅助类：

```
public class Channel {

    public enum Kind {DIGITAL_IN, DIGITAL_OUT, ANALOG_IN, ANALOG_OUT, COUNTER_IN};

    private int resolution;
    private int number;
    private Kind kind;
    public byte[] bits;

    public Channel(Kind kind, int resolution, int number) throws Exception {
        if (resolution % 8 != 0) {
            throw new Exception("Resolution must be divisible by 8");
        }
        this.kind = kind;
        this.resolution = resolution;
        this.number = number;
        this.bits = new byte[resolution/8];
    }

    public int getResolution() {
        return resolution;
    }

    public int getNumber() {
        return number;
    }

    public Kind getKind() {
        return kind;
    }
} 
```

我现在的问题是，在这种情况下，将我的 byte[] 声明为 public 是否被认为是不好的做法？在我的 LabProcessProtocol 类中，我将访问这些通道位并根据我从串行端口上的进程中获得的内容更改它们。

我有一种预感，Java 就是私有的，使用 getter 和 setter，但我不确定。在这种情况下，它似乎很复杂。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T20:46:19.487

好吧，没有绝对禁止公共领域。如果您认为这是最好的解决方案，请不要感到羞耻，继续做吧。

也就是说，停下来想想你想完成什么。将所有内容都私有化本身并不是一个目标——这个想法是建立不变量，使代码更易于理解和使用。

所以考虑一下你想用它做`byte[]`什么——其他人想对它执行什么操作？考虑为这些操作提供方法，这将比公开该领域更容易理解和清洁。另外，请考虑您不想允许的操作*（*这将是建立不变量的部分）。例如，直接字段访问将允许用`byte[]` 另一个不同长度的替换 - 您可能希望阻止这种情况。

或者可能发生了太多事情`byte[]`以至于它应该拥有一个自己的（包装）类？这一切都取决于它是如何使用的。

最后，从一个简单的公共领域开始是没有问题的。一旦找到更合适的解决方案，您总是可以稍后重构它。

*注意：* “您以后可以随时重构它”不适用于作为公共 API 一部分的类（即您正在编写一个库以供其他外部项目使用）。公共 API 的设计（通常称为“API 设计”）比“内部”代码的设计要困难得多，这只是一个例子。这可能不适用于这种情况，我只是想指出这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T20:42:53.867

通常，建议将`byte[]`字段保留为`private`并实现从类外部操作字段的方法。将字段声明为（至少恕我直言）并不是一种*糟糕*的做法，但是当您继续开发/更新项目时，离开它可以避免以后出现问题。我认为[这](https://stackoverflow.com/questions/2954793/the-use-of-private-keyword)很好地描述了我的意思。`public``private`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T20:52:16.853

将其设为私有，但不要只使用 getter 和 setter —— 用户应该如何访问您的`bits`数组？他们总是得到第一个元素，还是总是循环通过它？（`ByteBuffer`可能在这里给您一些有用的想法，或者您应该直接使用`ByteBuffer`。）提供以您希望用户使用它的方式访问它的方法；不要只提供 getter 和 setter。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-03T20:42:43.477

我会公开`bits[]`通过访问器（getter/setter）。通过访问器公开数组，您至少可以将对数组的访问汇集到特定方法。如果您将来需要进行更改，您将不会有一堆依赖于直接访问该字段的代码，这为您提供了更多的灵活性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T20:50:55.267

我关心的是从 API 中分离实现。如果您希望在将来对类的内部进行更改时，使用API 的`Channel`其他代码仍然可以在不修改的情况下工作，那么您将使用 getter 和 setter 并使用字段。在其他情况下，您可以使用字段。但是，请注意，在这些情况下，即使字段的名称和类型也是实现细节。在我看来，内部字段的名称和类型不应影响其他类。`Channel``private``public``bits`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-28T11:46:56.210

通过将字段设为私有并使用访问器和修饰符方法，您将遵循封装规则，该规则可防止字段意外更改，从而开发更容错的应用程序。

# c++ - C++ 编译错误 - “命名空间 std 中没有名为‘函数’的类型”

> ID：13213286
> 
> 赞同：4
> 
> 时间：2012-11-03T20:38:32.927
> 
> 标签：c++

我正在为我的 C++ 编程课程分配一个涉及实现哈希映射的作业。我的导师给了我们一个头文件，我们需要将它与我们的哈希映射类一起使用。提供的头文件包含以下行：

```
typedef std::function<unsigned int(const std::string&)> HashFunction; 
```

根据我对 C++ 的（有限）理解，这会将 HashFunction 类型定义为 std::function。但是，当我编译代码时，我得到了错误：

```
./HashMap.h:46:15: error: no type named 'function' in namespace 'std'
        typedef std::function<unsigned int(const std::string&)> HashFunction;
                ~~~~~^
./HashMap.h:46:23: error: expected member name or ';' after declaration specifiers
        typedef std::function<unsigned int(const std::string&)> HashFunction;
        ~~~~~~~~~~~~~~~~~~~~~^ 
```

HashMap.h 文件有

```
#include <functional> 
```

在顶部，如果重要的话。

有谁知道我为什么会收到这些错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T20:42:07.340

您需要一个具有（至少部分）C++11 支持的编译器。您使用的是哪个编译器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T19:43:34.190

只需添加：

```
配置 +=c++11

```

到 .pro 文件:)

# c++ - 在 std::vector 中使用类对象

> ID：13213290
> 
> 赞同：1
> 
> 时间：2012-11-03T20:39:22.547
> 
> 标签：c++, std

什么是更好的 -

```
std::vector<MyClass*> 
```

或者

```
std::vector<MyClass> 
```

? 我的意思是，第二个选项会在堆中存储对象吗？哪一个更快更干净？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T20:50:24.073

`std::vector<MyClass>`在大多数情况下应该是更可取的。是的，默认情况下它会将对象存储在堆中（动态存储）`std::allocator`。

优点是对象在向量销毁时自动销毁，并分配在单个连续内存块中，从而减少堆碎片。所以这样更干净。

这种方式也更快，因为它可以最小化内存分配操作。Vector 会在构造对象之前预先分配存储空间，因此对于 N 个对象，它将是 M 次分配操作和 N 次构造函数调用，N > M（N 越大 - 差异越大）。如果您手动创建对象并通过指针将它们放置到向量中，则会导致 M 个分配和 N 个构造，M = N + X，其中 X 是向量存储分配。如果您知道存储对象的数量，您总是可以最小化向量内存分配 - 使用`std::vector::reserve()`.

相反，使用`std::vector`指针将需要您手动销毁对象，例如调用`delete`动态分配的对象。不建议这样做。此类容器只能用作**非自有**容器。在这种情况下，对象所有权应在外部维护。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T20:44:24.943

是的，第二个版本也将对象存储在堆上，但是以更紧凑的形式，即`MyClass`.

在第一种形式中，您必须分配*和*解除分配对象，而`std::vector`在第二种形式中将为您执行此操作。

因此，与往常一样，这取决于您的需求和要求。如果可以选择，请采取第二种形式：

```
std::vector<MyClass> 
```

它更容易维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T20:54:18.737

依靠。当然，将类的副本存储在容器中更容易使用，但是每次都需要运行复制构造函数以将实例保存到容器中，这可能会出现问题。此外，您的容器只能存储一个类 - 特别是它不能存储从您的基类专门（继承）的其他类。因此，一般而言，您通常最终不得不存储指向该类的指针。

存在存储指针的障碍。然而，为了两全其美，请考虑使用 boost::ptr_vector 代替，它具有智能指针的优点而没有开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T20:54:25.583

`std::vector<MyClass>`将对象存储在堆上（可能），`std::vector<MyClass*>`将指针存储在堆上（可能），并将对象存储在创建它们的任何位置。如果`std::vector<MyClass>`您需要`std::vector<std::unique_ptr<MyClass>>`在适用时再次支持继承，请在适用时使用。如果您的向量不应该拥有这些对象，那么它`std::vector<MyClass*>`可能会很有用，但这种情况很少见。

# python - 为什么这个 `random()` 只执行一次？

> ID：13213291
> 
> 赞同：1
> 
> 时间：2012-11-03T20:39:30.723
> 
> 标签：python

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

```
from random import random

def printNumber(num=random()):
    print num

for i in range(10):
    printNumber() 
```

我想看十个随机数，但是这十个随机数都是一样的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T20:40:39.683

因为默认参数仅在编译函数时执行一次。

从[文档](http://docs.python.org/2/reference/compound_stmts.html#function)：

> 执行函数定义时评估默认参数值。这意味着表达式在定义函数时被计算一次，并且每次调用都使用相同的“预计算”值。吨

你可以尝试这样的事情：

```
In [10]: def printNumber(num=None):
    return num if num is not None else random()
   ....: 

In [12]: printNumber()
Out[12]: 0.9620725546432438

In [13]: printNumber()
Out[13]: 0.8188258892156928

In [15]: printNumber(10)
Out[15]: 10 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T20:41:09.227

因为它是在函数实例化时执行的......而不是在函数调用时

正确的（呃）方式是

```
def printNumber(num=None):
     if num == None:
         num = random()
         print num 
```

# ruby-on-rails - best_in_place gem，查看不显示更新的编辑而不重新加载页面

> ID：13213293
> 
> 赞同：0
> 
> 时间：2012-11-03T20:39:46.660
> 
> 标签：ruby-on-rails, ajax, controller, best-in-place

我将 best_in_place gem 添加到我的项目中，并且在页面重新加载发生之前更新不会生效。我可以在我的显示视图中看到它闪烁，但它需要重新加载页面。为什么是这样？

我的列表控制器：

```
 respond_to :html, :xml, :js

  def update
    @list = List.find(params[:id])
    @list.update_attributes(params[:list])  
    respond_with(@list, :location => list_url(@list))
  end 
```

我的列表显示视图-

```
 <h2 class="page-header"><%= best_in_place @list, :name %></h2>
  <h2 class="lead"><%= best_in_place @list, :description %></h2> 
```

我的宝石文件-

```
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'best_in_place'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby
  gem 'jquery-ui-rails'
  gem 'uglifier', '>= 1.0.3'
end 
```

我的应用程序 js 清单 -

```
//= require jquery
//= require jquery_ujs
//= require jquery.ui.datepicker
//= require justgage
//= require raphael.min
//= require jquery.purr
//= require best_in_place
//= require_tree . 
```

我的清单咖啡-

```
jQuery ->
  $('#task_due_date').datepicker
    dateFormat: 'mm/dd/yy'

jQuery ->
  $('.best_in_place').best_in_place() 
```

可能是我的清单 js 文件的顺序吗？我在这里忽略了什么以获取更新而无需重新加载页面？感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:24:52.713

我只是忘记`respond_to :json`在列表控制器的顶部添加。感谢那些看过的人。

# facebook - 我可以在我自己网站的子域上使用我授权的 Facebook 应用程序吗？

> ID：13213294
> 
> 赞同：1
> 
> 时间：2012-11-03T20:39:46.967
> 
> 标签：facebook, facebook-javascript-sdk, facebook-authentication

我们的许多用户目前使用 facebook connect 登录我们的网站 www.mysite.com。我们在“subdomain.mysite.com”上托管了一个相关的应用程序。我们希望现有用户能够在子域上使用 facebook connect 登录。有没有办法做到这一点？

我发现[这个相关的 SO 问题](https://stackoverflow.com/questions/11672943/changeable-subdomains-facebook-connecthttps://stackoverflow.com/questions/11672943/changeable-subdomains-facebook-connect)有一个答案声称这是不可能的，我们必须创建一个用户必须单独授权的第二个应用程序。但是，我想 100% 验证在放弃之前不可能从子域登录。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T20:50:58.807

通过设置你`App domains`设置它当然是可能的。

在 Facebook 上的应用设置中，您有一个名为`App Domains`. 在此字段中，您可以添加一个主域`example.com`，这将允许每个子域：`*.example.com`.

引用FB：

> 在域和子域上启用身份验证（例如，“example.com”将启用 *.example.com）

希望这有帮助！

# ios - 更改 UICollectionView 的两个部分之一的框架 - ios

> ID：13213301
> 
> 赞同：0
> 
> 时间：2012-11-03T20:40:16.900
> 
> 标签：ios, layout, view, uicollectionview

我正在尝试将我`CollectionView`的部分配置为与其他部分的大小不同。我有两个部分。下部应同时显示多个单元格，上部应一次仅显示一个单元格，但可滚动以逐个显示更多单元格。

我试着玩 . `frame`的属性，`CollectionView`但显然它不是正确的方法，因为它会改变整个视图的外观。

我还尝试检索该`FlowLayout`对象，看看是否可以从那里获取它。没找到办法。

`Insets`到目前为止，这两个部分都不是答案...

![在此处输入图像描述](../Images/ffa0ff833472e6e071ea339c0ad3f918.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:17:11.037

上下部分使用两个 uicollectionview 很简单，而不是只使用一个。

# eclipse - 将用户库添加到 Web 部署程序集将覆盖 WEB-INF 目录的内容

> ID：13213307
> 
> 赞同：1
> 
> 时间：2012-11-03T20:41:03.147
> 
> 标签：eclipse, tomcat, publish

使用 Eclipse Indigo，我有一些想要部署到 tomcat 的用户库。默认情况下，部署程序集有`WebRoot -> /`，这很好，当然它不会部署我的用户库。如果我此时要发布，它将正确填充 WebRoot/WEB-INF（没有用户库）。

但是，如果我将用户库添加到部署程序集（添加-> java 构建路径条目），那么当我发布时，所有内容都会从 WebRoot/WEB-INF 中删除，并且它包含的唯一内容是 libs/（我的用户库）。

为什么将用户库添加到部署程序集会破坏 WEB-INF 目录？如何同时发布我的用户库和我的 WEB-INF 内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:52:25.280

我只是添加了一个新的汇编指令：`WebRoot/WEB-INF -> /WEB-INF`就完成了这项工作。似乎多余 - 我想知道这是否是一个错误？

# .net - .Net 行动 和功能 用于 Windows 应用商店应用的 C++/CX 中可用的委托泛型

> ID：13213309
> 
> 赞同：0
> 
> 时间：2012-11-03T20:41:22.920
> 
> 标签：.net, windows-runtime, c++-cx

我想将 .Net 中的 Action 和 Func 委托泛型用于 C++/CX Windows Store 应用程序。它们也是 WinRT 的一部分吗？

```
delegate void f( int );

ref class Sample
{
   ...
   event f^ Rendered; // this works
   event Action<int>^ Rendered; // ??? I want something like this using existing lib without creating templates on my own (which Namespace/Header) ???
   ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:07:16.190

没有“用于 Window Store 应用程序的 C++/CLI”之类的东西。只有 C# 和 VB.NET 获得了 Store 处理，并且可以利用 CLR 中内置的 WinRT 语言投影。在 C++/CLI 中使用该语言投影也不是完全不可能的，但是您无法从该工具中获得任何帮助。

您使用一种称为 C++/CX 的语言。这根本不是基于 .NET 的语言。它是非常原生的 C++，直接编译为机器码。它可以帮助您使用带有与 C++/CLI 非常相似的语言语法扩展的 WinRT 类型。就像`ref class`语法一样。但由于它不是 .NET 语言，因此无法利用 .NET 类。

语言的基本介绍在[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh700360.aspx)。

# magento - 查看订单状态何时设置为已完成

> ID：13213326
> 
> 赞同：2
> 
> 时间：2012-11-03T20:43:51.780
> 
> 标签：magento

我在我的商店里销售虚拟产品，我的客户在那里购买某种订阅。此订阅自订单完成之日起 31 天内有效。

如何查看订单状态设置为完成的日期？

我的想法是查找订单的“updated_at”字段，但我不确定这是否是确定订单何时完成的正确方法。

```
$sales_model = Mage::getModel("sales/order");
$all_orders  = $sales_model -> getCollection()
                ->addFieldToFilter('status', 'complete')
                ->addAttributeToFilter('updated_at', array(
                    'from' => $one_month_ago,
                    'to' => date('Y-m-d 24:00:00'),
                    'date' => true,
                    )
                ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:08:46.220

我解决这个问题的方法是创建一个自定义模块，使用观察者跟踪订单状态

查看[Magento 订单状态更改事件](https://stackoverflow.com/questions/3046530/magento-order-status-change-events)

然后记录（在数据库中）订单编号和订单完成和到期的日期。这样您就可以轻松地报告订阅何时到期

[使用事件/观察自定义 Magento](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

# asp.net - 在 IE、Firefox 和 Chrome 中跨域 Json 发布成功，但在 Firefox 和 Chrome 上都报空错误

> ID：13213327
> 
> 赞同：1
> 
> 时间：2012-11-03T20:44:07.393
> 
> 标签：asp.net, json, asp.net-web-api

我正在使用 asp.net web api 做一个跨域的 json 帖子。在我的服务/服务器端，我有以下响应`POST`请求的方法：

```
// POST api/<controller>
public HttpResponseMessage Post(Customer newCustomer)
{
    DataClassesDataContext db = new DataClassesDataContext();
    var response = Request.CreateResponse<Customer>(HttpStatusCode.Created, newCustomer);

    db.Customers.InsertOnSubmit(newCustomer);
    db.SubmitChanges();

    string uri = Url.Link("DefaultApi", new { id = newCustomer.Id });
    response.Headers.Location = new Uri(uri);

    return response;
} 
```

在客户端，它运行在不同的端口号（即跨域）上，我使用以下 jQuery 代码：

```
<body>

<input type="button" value="click me" onclick="hello()" />

<script type="text/javascript">
    function hello() {
        //SEE: http://stackoverflow.com/questions/5241088/jquery-call-to-webservice-returns-no-transport-error
        $.support.cors = true;

        //var jsonObjects = [{ Name: "Name1", CellphoneNum: 1234657911 }];

        $.ajax({
            url: "http://localhost:26037/api/customer",
            type: "POST",
            crossDomain: true,
            data: { Name: "Name321", CellphoneNum: 1234657922 },
            dataType: "json",

            success: function (result) {
                alert("Success");
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Thrown Error: ' + thrownError);
                alert('xhr status: ' + xhr.status);
            }
        });
    }
    </script>
</body> 
```

我的问题是，从客户端，在 IE 上将显示成功警报消息，并且将使用我的 POST 方法中的 LINQ 代码将数据插入到数据库中。但是，使用 Chrome 或 Firefox 时，数据也会插入到数据库中，并且 LINQ 代码将成功执行，但会显示一个带有空字符串错误和 0 xhr 状态的消息框。

为什么在服务器上发布并成功处理数据时，它只在 Firefox 和 Chrome 上报告错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:34:32.947

为了进行跨域调用，我在 IIS 上部署时在 Web 应用程序根文件夹中添加了 crossdomain.xml。与跨域.xml 有以下内容。

```
<?xml version="1.0"?>
<cross-domain-policy>
<allow-access-from domain="*"/>
</cross-domain-policy> 
```

我希望它也适用于您的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T21:15:41.147

看起来浏览器在报告 xhr 错误方面做得不好。下面的教程可能会对您有所帮助。此外，如果您还没有这样做，请确保将服务器端的“Access-Control-Allow-Origin”标头设置为您要允许的客户端域或“*”以允许所有跨域请求。

一般 CORS 教程：[http ://www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)

ASP.net 和 CORS： [http ://encosia.com/using-cors-to-access-asp-net-services-across-domains/](http://encosia.com/using-cors-to-access-asp-net-services-across-domains/)

# jquery - 悬停区域时更改带有地图区域的href链接（jQuery）

> ID：13213338
> 
> 赞同：0
> 
> 时间：2012-11-03T20:45:31.110
> 
> 标签：jquery, map, hyperlink, hover, area

简单来说...... ;-)

我有一个带有商店名称的 href 列表和它的计划。我可以将名称悬停在计划中，相应的商店就会亮起。还悬停在商店亮起的计划中……到目前为止……太好了……

我无法弄清楚：

当将商店悬停在计划上时，我喜欢将列表中的 href 商店名称设置为**粗体。**

一小段代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <link href="style.css" rel="stylesheet" type="text/css" media="screen"/>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.maphilight.js"></script>

    <script>
    $(function() { 

    $('.map').maphilight({ fillColor: 'FF0000', strokeWidth: 2, fillOpacity: 0.7 });

    $('#w147').mouseover(function(e) { $('#m147').mouseover(); }).mouseout(function(e) { $('#m147').mouseout(); }).click(function(e) { e.preventDefault(); });
     $('#w148').mouseover(function(e) { $('#m148').mouseover(); }).mouseout(function(e) { $('#m148').mouseout(); }).click(function(e) { e.preventDefault(); });
    $('#w149').mouseover(function(e) { $('#m149').mouseover(); }).mouseout(function(e) { $('#m149').mouseout(); }).click(function(e) { e.preventDefault(); }); 

    });</script>

</head>

<body>

<map name="WinkelPlattegrond">
    <area  id="m147" shape="rect" alt="Winkel 147" title="" coords="332,376,346,390" href="" target="" />
    <area  id="m148" shape="rect" alt="Winkel 148" title="" coords="348,371,360,391" href="" target="" />
    <area id="m149" shape="poly" alt="Winkel 149" title="" coords="339,375,339,364,361,364,361,369,346,369,347,375,340,375" href="" target="" />
</map>

<div style="float:left;">
<a href="#" id="w147">Winkel 147</a><br>
<a href="#" id="w148">Winkel 148</a><br>
<a href="#" id="w149">Winkel 149</a><br>
</div>

<div style="float:left;">
&nbsp;&nbsp;&nbsp;
</div>

<div style="float:left;">
<img src="plattegrond_werk.jpg" width="733" height="800" class="map" usemap="#WinkelPlattegrond">
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:10:49.757

干得好 ：）

这是一个工作[**小提琴**](http://jsfiddle.net/videsignz/uMN4d/)

**jQuery**

```
$('#m147, #m148, #m149').hover(
function() {$('#' +this.id.replace('m','w')).css({ 'font-weight' : 'bold' });} ,
function() {$('#' +this.id.replace('m','w')).css({ 'font-weight' : '' });} 
```

);

**HTML**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:51:58.027

看起来链接具有相应的 id，但链接以“w”开头。所以只需选择具有相同id的a标签。

```
var s = this.id;
s = s.replace('m','w');
$("#" + s)... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:17:41.467

您可以将悬停事件绑定到`area`标签并解析ID，以选择相应的链接。切换类更改并将类添加到您的 CSS 规则

```
$('area').hover(function(){
    $('#' +this.id.replace('m','w')).toggleClass('boldClass');
}); 
```

# eclipse - 使用eclipse作为颠覆本地复制GUI？

> ID：13213339
> 
> 赞同：3
> 
> 时间：2012-11-03T20:45:34.417
> 
> 标签：eclipse, svn, subversive

我有一个远程 svn 服务器的工作本地副本。我通过 ssh 和 .ssh/config 文件中的 ProxyCommand 访问此服务器，因为它无法直接访问。我想做的是使用 eclipse 浏览我的本地 svn 副本，进行更改并提交它们，而不是使用命令行。这就像使用 eclipse 作为这个 svn 本地副本的 gui。如果不创建我的仓库的另一个本地副本，这是否可能。? 如果是这样，你能告诉我应该采取哪些步骤，因为我在这里有点迷失......

我正在使用 Eclipse 3.8 运行 ubuntu 12.10 弓。我已经安装了颠覆性和 svnKit 连接器。

# regex - 带有反向引用的正则表达式

> ID：13213342
> 
> 赞同：0
> 
> 时间：2012-11-03T20:45:45.810
> 
> 标签：regex, grep, backreference

所以我有这个非常长的文件，其中有这样构建的行：

```
`somecode [ somecode > somecode ] somecode > somecode > somecode` 
```

我必须在括号之间搜索至少 9 个 + 或 - 字符的字符串，并且必须在括号旁边的两个“>”之间找到在这些括号之间匹配的相同内容......到目前为止我想出了这;

```
`cat file | egrep -n '*\[.*([-+]{9,}).*\].*(>).*\1.*(>).*' > out.txt` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:56:28.267

我猜从你的正则表达式，这就是你想做的

```
\[.*?([+-]{9,}).*?\].*?>.*?\1.*?> 
```

如果你想获得完整的线路使用这个

```
^.*?\[.*?([+-]{9,}).*?\].*?>.*?\1.*?>.*?$ 
```

# c# - 测量代码使用的内存

> ID：13213348
> 
> 赞同：2
> 
> 时间：2012-11-03T20:46:39.460
> 
> 标签：c#, c++, c, optimization, performance

我想在 C# 或 C++ 或 C 中改进一些方法。
为了测量时间，我可以使用 Stopwatch 类，但另外我想测量由已删除代码保留的内存。您知道任何与下面代码中使用的 MemoryMeasure 类具有相似属性的类或方法吗？

```
Stopwatch s1 = Stopwatch.StartNew();
MemoryMeasure m1 = MemoryMeasure.Start();
for (int i = 0; i < m; i++)
{
//some compute
//for example
//var x = new LargeObject(new SmallObject(), 45);
//some compute
//some compute
}
m1.Stop();
s1.Stop();

Console.Writeline("Your code was executed in " + s1.ElapsedMilliseconds + "ms");
Console.Writeline("Your code ate " + m1.UsedMemory + "MB of memory"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T20:48:34.733

您将需要使用内存分析器 - 有几种免费和商业工具。

[dotTrace](http://www.jetbrains.com/profiler/)和[Ants 内存分析器](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)是两个流行的商业分析器。

还有[一些免费的](https://stackoverflow.com/questions/308816/any-good-free-net-profiler)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T20:50:44.357

您可以尝试使用 GC.GetTotalMemory 静态方法，但我不确定以这种方式测量内存是否是个好主意。内存分析器是更好的选择

# php - 在类中的 php 中解析 Rss 提要

> ID：13213349
> 
> 赞同：0
> 
> 时间：2012-11-03T20:46:49.487
> 
> 标签：php, class, rss

从 index.php 页面呈现 RSS 提要并没有那么糟糕，我已经看到了很多这样的例子。但是我在上课时遇到问题。这就是我所拥有的，我确信我有很多错误...... PHP不是我的强项，所以如果你能让我知道我哪里出错了，我会感激它......

```
<?php
class RssDisplay {

protected $fromrss;
protected $allitemscollected_feed;

public function __construct($urllink, $total_items){

    $this->fromrss = $urllink;
    $this->allitemscollected_feed = $total_items;

}

public function getItems($allitemscollected_feed){

    $feed = simplexml_load_file($this->fromrss, $this->allitemscollected_feed);

    return $feed;

    $collected_items[] =$feed;

    $this->set('collected_items', $collected_items);

}

foreach('allitemscollected' as $feed){
    $items->title;
    $items->pubDate;
    $items->description;

}

 } 
```

从我的索引来看，这就是我正在做的事情：

```
 $feed = new RssDisplay('http://feeds.feedburner.com/insidethehall?format=xml'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:51:21.420

您的构造需要两个参数，但您将它与单个参数一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:29:12.447

对于初学者，我建议您看一下[Foreach](http://www.php.net/manual/en/control-structures.foreach.php)和 [PHP OPP 基础知识](http://www.php.net/manual/en/language.oop5.basic.php)，因为

*   你`foreach`没有任何方法
*   `foreach('allitemscollected' as $feed){`无效，因为`foreach`第一个参数必须是[array_expression](http://www.php.net/manual/en/control-structures.foreach.php)
*   你的课错了
*   您没有打印或回显任何内容
*   `return $feed;`被提前调用，这将使其他代码不可见
*   `$this->set(`那些不存在但被调用的方法`$this->set('collected_items', $collected_items);`
*   `simplexml_load_file`第二个参数需要是一个有效的扩展类名，`SimpleXMLElement`但传递了一个整数

你的简单类你看起来像这样

```
class RssDisplay {
    protected $maxItems;
    private $xml;

    public function __construct($url, $maxItems = 0) {
        $this->xml = simplexml_load_file($url, "SimpleXMLIterator");
        $this->maxItems = $maxItems;
    }

    public function getItems() {
        return $this->xml->channel->item;
    }

    public function simpleDisplay() {
        $it = ($this->maxItems == 0) ? $this->xml->channel->item : new LimitIterator($this->xml->channel->item, 0, $this->maxItems);
        foreach ( $this->xml->channel->item as $feed ) {
            printf("<div><h2><a href='%s'>%s</a></h2><i>%s</i><p>%s</p></div><br />", $feed->link, $feed->title, $feed->pubDate, $feed->description);
        }
    }
}

$rss = new RssDisplay("http://feeds.feedburner.com/insidethehall?format=xml");
$rss->simpleDisplay(); 
```

输出

## 格兰特兰预览印第安人队

*2012 年 11 月 2 日星期五 19:22:21 +0000*

格兰特兰：大学篮球队前瞻：印第安纳 印第安纳州不乏进攻火力，而汤姆克林的伟大之处在于他从不害怕使用它。印第安纳上个赛季的节奏处于全国前半部分，再加上一年的化学反应，这是一个不错的选择 [...]

## 笔记本：克里克从伤病中得到回报

*2012 年 11 月 2 日星期五 02:57:32 +0000*

在周四晚上对阵印第安纳卫斯理的表演赛上半场比赛还剩 11 分钟时，莫里斯克里克替补出场，走向大会堂的记分台。克里克向官方记分员报到，然后耐心地等待着他 20 多个月以来一直在思考的那一刻 — [...]

```
 ....... So may more 
```

# c++ - C ++查找连接组件的数量（BFS，邻接矩阵）

> ID：13213355
> 
> 赞同：2
> 
> 时间：2012-11-03T20:48:34.557
> 
> 标签：c++, matrix, components

大家好，我正在为我的图（邻接矩阵）制作函数，以使用广度优先搜索算法返回连接组件的数量。

它几乎可以正常工作。如果组件数等于顶点数，则返回正确的值，但如果组件数小于顶点数，则返回（正确值+1）。我不知道如何解决它，所以如果你能看看并告诉我，我会很高兴。这是代码的链接，它看起来比下面的代码更体面[http://wklej.org/id/861341/](http://wklej.org/id/861341/)

```
int Graph::getNumberOfConnectedComponents()
{
    int components=0;
    queue<int> S;
    int n = getVerticesCount();//as name indicates it returns number of vertices in graph
    bool* visited = new bool[n];
    for(int i=1;i<n;i++)
        visited[i]=false;

    visited[0]=true;
    S.push(0);
    while(!S.empty())
    {
        int v = S.front();
        S.pop();
        list<int> x = getNeighbors(v);//as name indicates this function returns list of neighbours of given vertice
        if(!x.empty())
        {
            list<int>::iterator it;
            for (it=x.begin(); it!=x.end(); it++)
            {
                if(visited[*it]==false)
                {
                    S.push(*it);
                    visited[*it]=true;
                }
            }
        }

        if(S.empty())
        {
            components++;
            for(int i=1;i<n;i++)
            {
                if(visited[i]==false)
                {
                    S.push(i);
                    visited[i]=true;
                    break;
                }
            }
        }
    }

    return components;
} 
```

我在评论中解释了这些功能的作用，希望你能帮助我：/。顺便说一句，如果您更改组件的位置++；并将其放入 if(visited[i]==false) 中，它为所有图提供了正确的值，除了那些组件数 = 顶点数的图（对于那些该值为“正确值-1”的图）。

@Edit 1，这里是这个函数 john

```
list<int> AdjacencyMatrixGraph::getNeighbors(int v)
 {
     list<int> x;
     if(v==0||v>=n)
     return x;

     for(int j=0;j<n;j++)
     {
     if(matrix[v][j]!=0)
         x.push_front(j);
     }
     return x;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:21:46.483

```
list<int> AdjacencyMatrixGraph::getNeighbors(int v)
 {
     list<int> x;
     if(v==0||v>=n)
     return x; 
```

应该

```
list<int> AdjacencyMatrixGraph::getNeighbors(int v)
 {
     list<int> x;
     if(v<0||v>=n)
     return x; 
```

据我所知，顶点 0 可以有邻居。

# iphone - 如何在 xCode 中使用 jpeglib

> ID：13213359
> 
> 赞同：1
> 
> 时间：2012-11-03T20:49:35.787
> 
> 标签：iphone, ios, xcode, libjpeg

我正在开发一个 iPhone 应用程序，我对一切都很陌生。我正在开发 Mountain Lion OS X 10.8 并使用 xCode v4.5。我的项目需要 JPEG 处理功能，并且我想使用 libjpeg (http://www.ijg.org/) 库。我尝试了几种不同的方法，但有点天真，我不确定如何开始。下载软件包后，我通常使用 ./configure; 制作并安装。现在我在（/usr/local/include）下有（jconfig.h，jerror.h，jmorecfg.h，jpeglib.h），在（/usr/local/lib）下有（libjpeg.a，libjpeg.la）但是我不知道如何在我的 xCode 项目中链接/使用它。任何人都可以将我链接到教程或向我推动正确的方向吗？如果有人成功安装和使用 jpeg 库，请帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T21:11:18.947

这有点麻烦，因为您需要为两种架构编译 LibJPEG：ARM 用于 iOS，x86 用于模拟器。

1.  最好的选择是使用`NSImage`or `CGImage`。iOS 上已经有一个 JPEG 库，随系统一起提供，因此您不需要使用 LibJPEG。

2.  另一种方法是将 LibJPEG 源直接放入您的项目（包括`*.c`文件）中。这样，它们将针对不同的架构（模拟和部署）正确构建。

3.  您也可以只为 ARM 构建，然后忘记运行模拟器。

4.  或者，您可以通过编译两次并将`libjpeg.a`每次编译的结果库 () 与`libtool`.

    ```
    libtool -static path/to/arm/libjpeg.a path/to/x86/libjpeg.a -o libjpeg.a 
    ```

您可以看到为什么建议使用`NSImage`or `CGImage`。最好使用已经安装的库，而不是尝试构建和安装新库。

## 如何制作一个胖静态库

因为听起来你想以艰难的方式做事，所以这里有一个如何为 i386 和 ppc 架构构建胖静态库的示例。这是在 PowerPC OS X 机器上完成的，如果要为 ARM 和 i386 编译，则必须进行调整。

请注意，您必须指定`--host`和`--build`进行交叉编译。下面的值对于我的计算机是正确的，但我确信它们对于您的计算机是错误的。

```
$ cd jpeg-8d
$ mkdir build-ppc build-i386
$ cd 构建-ppc
$ ../configure CFLAGS='-arch ppc -O2 -g' LDFLAGS='-arch ppc' \
        --enable-static --disable-shared
$使-j2
$ cd ../build-i386
$ ../configure CFLAGS='-arch i386 -O2 -g' LDFLAGS='-arch i386' \
        --启用-静态--禁用-共享\
        --build=powerpc-apple-darwin9.8.0 --host=i386-apple-darwin9.8.0
$使-j2
$ 光盘 ..
$ 文件 build-ppc/.libs/libjpeg.a
build-ppc/.libs/libjpeg.a：当前 ar 存档随机库
$ 文件 build-i386/.libs/libjpeg.a
build-i386/.libs/libjpeg.a：当前 ar 存档随机库
$ libtool -static build-*/.libs/libjpeg.a -o libjpeg.a
$ 文件 libjpeg.a
libjpeg.a：具有 2 个架构的 Mach-O 通用二进制文件
libjpeg.a（用于架构 i386）：当前 ar 存档随机库
libjpeg.a（用于架构 ppc）：当前 ar 存档随机库

```

# php - 从 jQuery AJAX 表单帖子中获取未定义的响应

> ID：13213361
> 
> 赞同：2
> 
> 时间：2012-11-03T20:49:59.253
> 
> 标签：php, javascript, jquery, ajax

```
$(document).ready(function() {
    $('#pricingEngine').change(function() {
         var query = $("#pricingEngine").serialize();
         $('#price').fadeOut(500).addClass('ajax-loading');
         $.ajax({
             type: "POST",
             url: "index.php/welcome/PricingEngine",
             data: query,
             dataType: 'json',
             success: function(data)
             {
               $('#price').removeClass('ajax-loading').html('$' + data.F_PRICE).fadeIn(500);
               $('#sku').attr('value') = (data.businesscards_id);
             }
         });
    return false;
   });
}); 
```

需要将#sku 设置为隐藏表单字段的值（不确定我在上面的 jQuery 代码中是否正确执行此操作。

```
<input type="hidden" name="sku" id="sku" value="*/PUT VAR VALUE HERE/*" /> 
```

还需要传递`F_PRICE`给`#price div`.

Chrome 中的控制台将 JSON 响应显示为：

```
[
 {
  "businesscards_id":"12",
  "X_SIZE":"1.75x3",
  "X_PAPER":"14ptGlossCoatedCoverwithUV(C2S)",
  "X_COLOR":"1002",
  "X_QTY":"250",
  "O_RC":"NO",
  "F_PRICE":"12490",
  "UPS_GROUND":"12000",
  "UPS_TWODAY":"24000",
  "UPS_OVERNIGHT":"36000"
 }
] 
```

然而，我只在价格框中得到“未定义”。这是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:54:01.093

返回为 JSON 的结构是一个数组`[]`，其中包含一个元素，该元素是`{}`您的目标对象。通过其数组索引访问它`[0]`

```
// Access the array-wrapped object via its [0] index:
$('#price').removeClass('ajax-loading').html('$' + data[0].F_PRICE).fadeIn(500);
// Likewise here, and set the value with .val()
$('#sku').val(data[0].businesscards_id); 
```

您也可以`.shift()`从数组中取出第一个元素并使用它：

```
// Pull the first element off the array, into the same variable
// WARNING: Use a different variable if the array has multiple elements you need to loop over later.
// You *don't* want to do it this way if the array contains multiple objects.
data = data.shift();
$('#price').removeClass('ajax-loading').html('$' + data.F_PRICE).fadeIn(500);
$('#sku').val(data.businesscards_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:53:51.947

这是正确的方法（最好的）

```
$('#sku').val(data.businesscards_id); 
```

如果您坚持使用 attr，这应该可以

```
$('#sku').attr('value', data.businesscards_id); 
```

# dojo - DOJO ... dojo/_base/xhr vs dojo/request API

> ID：13213364
> 
> 赞同：1
> 
> 时间：2012-11-03T20:50:09.480
> 
> 标签：dojo, xmlhttprequest, request

我对我们DOJO有一个要求。在进行单元测试时，我使用了一个简单的 *.json 文件，并且我正在制作一个简单的 xhr.get 或 request.get 调用，如代码所示。

但是，当我使用配置选项“handleAs:'json'”时，dojo/request 无法解析它收到的 json

这是“roles.data.json”文件的内容：

```
{roles:["Role - A", "Role - B", "Role - C", "Role - D", "Role - E"]} 
```

这是不起作用的dojo代码

```
 require([
        'dojo/dom',
        'dojo/on',
        'dojo/ready',
        'dojo/parser',
        'dojo/request',
        'dijit/registry',
        'dijit/form/Form',
        'dijit/form/TextBox',
        'dijit/form/ValidationTextBox',
        'dijit/form/ComboBox',
        "dojo/domReady!"
    ], function (dom, on, ready, parser, request, registry) {
        ready(function () {
            console.log("ready");
            request.get("http://localhost/dojofun/data/roles.data.json",     {
                //offending piece of code here, if I remove this, request works as string                   
                handleAs :'json',
                //headers : { 'mime-type': 'application/json' } 
            }).then (function (data) {
                try {
                    console.log(data)
                    //var d = eval(data);
                    console.log(data.roles[0]); 
                }
                catch (err) {
                    console.log(err);
                }

            });

        });
    }); 
```

这是确实有效的dojo代码。

```
 require([
        'dojo/dom',
        'dojo/on',
        'dojo/ready',
        'dojo/parser',
        'dojo/_base/xhr',
        'dijit/registry',
        'dijit/form/Form',
        'dijit/form/TextBox',
        'dijit/form/ValidationTextBox',
        'dijit/form/ComboBox',
        "dojo/domReady!"
    ], function (dom, on, ready, parser, xhr, registry) {
        ready(function () {
            console.log("ready");
            xhr.get({
                url:"http://localhost/dojofun/data/roles.data.json",
                handleAs :'json',
                load:function (data) {
                        try {
                            console.log(data)
                            console.log(data.roles[0]); 
                        }
                        catch (err) {
                            console.log(err);
                        }
                    }    
            });

        });
    }); 
```

我的问题是，当我使用 request.get 时，我错过了什么？我必须做额外的进口吗？

================

好的！发现错误..这很愚蠢，但您的 JSON 必须用双引号引起来....单引号会导致语法错误。正确的 JSON 现在看起来像这样：

```
{"roles":["Role - A", "Role - B", "Role - C", "Role - D", "Role - E"]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:02:43.817

好吧，我有两个猜测：

1.  您的 JSON 格式不正确。从技术上讲，所有 JSON 字段名称和字符串都必须是：“双引号”。
2.  您[没有发送正确的`Content-Type: application/json`标题](https://dojotoolkit.org/documentation/tutorials/1.8/ajax/)：

> 除了在响应中将数据编码为 JSON 之外，将 Content-Type 标头设置为 application/json，使用服务器配置（例如 Apache 的 AddType）或使用服务器端代码将其添加到标头中。

* * *

我猜是#1

# jquery - 如何将其转换为咖啡脚本？

> ID：13213366
> 
> 赞同：-2
> 
> 时间：2012-11-03T20:50:13.227
> 
> 标签：jquery, coffeescript

我使用的是 js2coffee，但它似乎没有翻译，因为我得到了一个`unexpected identifier`.

```
$.fn.wait = function( ms, callback ) {
    return this.each(function() {
        window.setTimeout((function( self ) {
            return function() {
                callback.call( self );
            }
        }( this )), ms );
    });
}; 
```

我的咖啡版：

```
$.fn.wait = (ms, callback) ->
  @each ->
    window.setTimeout ((self) ->
      ->
        callback.call self
    (this)), ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T21:21:06.120

首先清理你的 JavaScript 版本，这样它就不会过于聪明和难以阅读；内联的自执行函数除了让维护和阅读您的代码的人讨厌您之外，实际上并没有为您做任何事情：

```
$.fn.wait = function( ms, callback ) {
    return this.each(function() {
        var _this = this;
        window.setTimeout(function() {
            callback.call(_this);
        }, ms);
    });
}; 
```

这不那么嘈杂，而且更容易一目了然。在 CoffeeScript 中，这个`var _this = this`技巧通常被一个粗[箭头 ( `=>`)](http://coffeescript.org/#fat_arrow)代替，所以我们只剩下这个：

```
$.fn.wait = (ms, callback) ->
    @each(->
        fn = () => callback.call(@)
        setTimeout(fn, ms)
    ) 
```

是的，括号在 CoffeeScript 中通常是可选的，但*optional*和*disabled*是不同的词，所以我倾向于包含括号以使结构更容易看到。你也可以`fn`用这样可怕的东西跳过变量：

```
setTimeout(
    => callback.call(@)
, ms) 
```

或这个：

```
setTimeout (=> callback.call(@)), ms 
```

但是在混合中加入一个额外的变量是，IMO，对眼睛来说更容易。

演示：

*   CoffeeScript：http: [//jsfiddle.net/ambiguous/y44Fp/](http://jsfiddle.net/ambiguous/y44Fp/)
*   JavaScript：http: [//jsfiddle.net/ambiguous/TVkMh/](http://jsfiddle.net/ambiguous/TVkMh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:18:11.870

使用粗箭头 ( `=>`)：

```
$.fn.wait = (ms, callback) ->
  @each ->
    window.setTimeout( =>
      =>
        callback.call( this );
    , ms) 
```

它编译为：

```
$.fn.wait = function(ms, callback) {
  return this.each(function() {
    var _this = this;
    return window.setTimeout(function() {
      return function() {
        return callback.call(_this);
      };
    }, ms);
  });
}; 
```

> 粗箭头 => 既可用于定义函数，也可将其绑定到 this 的当前值，就在现场。这在使用基于回调的库（如 Prototype 或 jQuery）时很有帮助，用于创建迭代器函数以传递给每个函数，或者使用事件处理函数与绑定一起使用。用粗箭头创建的函数能够访问定义它们的 this 的属性。

（来源：[http](http://coffeescript.org/#fat_arrow) ://coffeescript.org/#fat_arrow ）

# sharepoint - Sharepoint 2010 全局导航中的下拉菜单

> ID：13213367
> 
> 赞同：1
> 
> 时间：2012-11-03T20:50:22.700
> 
> 标签：sharepoint, navigation, branding

我在 SP 中创建了一个新的空白站点。在激活发布功能之前，我在顶部链接栏添加了几个链接。但是，我只能通过界面添加一个级别的新链接。所以我删除了我的链接并激活了发布功能。

现在我有全局/当前导航设置页面，它允许我创建项目的标题/子菜单结构，但它们出现在页面上的同一级别 - 而不是成为下拉菜单。我在导航条码中将静态和动态级别设置为 3。

我不知道是否先激活链接栏然后再激活发布会导致此问题。我从 codeplex 的 Starter Master 页面开始——发布版本。这是导航栏。

```
<!-- top navigation publishing data source -->
<PublishingNavigation:PortalSiteMapDataSource
ID="topSiteMap" runat="server" 
SiteMapProvider="GlobalNavigation" 
StartFromCurrentNode="true" 
StartingNodeOffset="0"
ShowStartingNode="false"
TrimNonCurrentTypes="Heading" />

<!-- top navigation menu (set to use the new Simple Rendering) -->

<div id="BigNavBar"class="s4-notdlg">
<SharePoint:AspMenu
ID="TopNavigationMenuV4"
EncodeTitle="false"
Runat="server"
DataSourceID="topSiteMap"
AccessKey="<%$Resources:wss,navigation_accesskey%>"
UseSimpleRendering="true"
UseSeparateCss="false"
Orientation="Horizontal"
StaticDisplayLevels="3"  
MaximumDynamicDisplayLevels="3"
SkipLinkText=""
CssClass="s4-tn" BackColor="Cyan" BorderColor="Black">
</SharePoint:AspMenu>   
</div> 
```

任何帮助，将不胜感激。我可能遗漏了一些明显的东西。这是我完成的第一个“基础”品牌项目。

# c - 从输入文件中读取，检查其中一些信息并将其存储在 C 中的数组中

> ID：13213368
> 
> 赞同：-2
> 
> 时间：2012-11-03T20:50:22.460
> 
> 标签：c, arrays, fopen, fgets

我有这样的输入文件：

```
The Branch PC is e05f56f8

The Branch Type is branch_type_1

The Branch is Taken

The Branch Target is e045ac20

jal__        1141512 
```

```
The Branch PC is e045ac44

The Branch Type is branch_type_1

The Branch is Taken

The Branch Target is e05f57d4

jal__        1562101 
```

```
The Branch PC is e05f57fc

The Branch Type is branch_type_1

The Branch is Taken

The Branch Target is e05f578c

jal__        1562083 
```

我需要从“”行获取分支PC的信息，以及从“ `The Branch PC is ********`”行获取分支是否被Taken for Not Taken `The Branch is Taken/Not Taken`。并将这两个信息存储到所有分支的二维数组中。

我想知道使用后`fopen`，如何检查每一行以获得我想要的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:59:36.673

您可以阅读直到检测到行终止符，如 \r\n 或 \n ，具体取决于 Windows 与 Linux。然后将 n 个字符读入每一行到行终止符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:00:32.053

我猜你想要类似的东西：

```
char hm[20], line[128];
FILE *fd=fopen("lol", "r");
while(fgets(line, 128, fd)) {
    if(strstr(line, "PC")) sscanf(line, "The Branch PC is %s\n", &hm);
    if(strstr(line, "Not Taken")) printf("%s Not taken !\n", hm);
    else if(strstr(line, "Taken")) printf("%s Taken !\n", hm);
}
fclose(fd); 
```

解析后存储到数组中应该不是问题..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:23:01.117

我怀疑如果您使用一些 bash 脚本来执行文本文件的预处理，然后让 C 程序处理脚本的输出，这会容易得多

# elasticsearch - 将带有下划线的单词拆分但也保留完整版本的分词器

> ID：13213371
> 
> 赞同：2
> 
> 时间：2012-11-03T20:50:30.137
> 
> 标签：elasticsearch

我正在为其中包含文件名的内容实施 Elasticsearch 搜索，例如“golf_master_2009.xls”。我想要一个标记器，它至少可以将它分成以下标记：“golf”、“master”、“golf_master_2009.xml”。现在，如果我想在不指定完整文件名的情况下搜索它，我必须使用通配符（例如“ *master ”）。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:37:42.620

您可以使用多字段字段应用不同的分析器。请参阅[http://www.elasticsearch.org/guide/reference/mapping/multi-field-type.html](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type.html)

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:25:29.017

您可以将自己的分析器与[关键字标记](http://www.elasticsearch.org/guide/reference/index-modules/analysis/keyword-tokenizer.html)器和[单词分隔符标记过滤器](http://www.elasticsearch.org/guide/reference/index-modules/analysis/word-delimiter-tokenfilter.html)一起使用（带有选项`generate_word_parts`并`preserve_original`设置为`true`）

# symfony - 是什么导致 Symfony 2.1 和 Twig 中的“最大函数嵌套级别”错误？

> ID：13213378
> 
> 赞同：29
> 
> 时间：2012-11-03T20:51:20.267
> 
> 标签：symfony, twig

我有一个关于 Symfony 2.1 的项目。更新作曲家组件（Gedemo、Symfony 核心、Doctrine、Twig 等）后，出现以下错误：

```
Fatal error: Maximum function nesting level of '100' reached, aborting! in /var/www/{path}/vendor/twig/twig/lib/Twig/Token.php on line 78 
```

我有 PHP 5.4。什么会导致此错误？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-03T20:54:31.480

找到`xdebug.ini`文件：

```
$ locate xdebug.ini
/etc/php5/conf.d/20-xdebug.ini
/etc/php5/mods-available/xdebug.ini 
```

在我的情况下，文件是`/etc/php5/conf.d/20-xdebug.ini`. 打开它并添加这一行：

```
xdebug.max_nesting_level = 1000 
```

不要忘记重新启动 FPM 服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-01T11:37:22.460

这是一个导致无限循环的错误代码，但有时会发生无错误的处理超过 100 次调用嵌套函数。

要更正此问题，请打开 php.ini、xdebug 部分并添加以下行（输入您想要的内容而不是 150）

```
 [xdebug]
xdebug.max_nesting_level = 150 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-06T08:30:03.770

只是向可能有兴趣了解问题的“是什么原因......”部分的新 Twig 开发人员分享一些小技巧。

显然，在原始问题中，最大嵌套级别相当低（100），正如一些评论所提到的，对于正常情况来说它可能太低了。

但是，如果按照上面的建议将级别提高到 256、512 甚至 1000 并且仍然遇到相同的错误，那么可能最有可能看到的是[模板继承](https://twig.symfony.com/doc/2.x/tags/extends.html)。（`extends`模板第一行的关键字）

对于在多个位置有模板的项目尤其如此。

想象一个示例项目结构：

```
── plugins
   ├── your-plugin
   |   ├── views
   |   │   ├── base.twig
   │   │   ├── special-element.twig
   │   │   ├── some-other-element.twig
── theme
   ├── base.twig
   ├── index.twig
   ├── sub-page.twig 
```

该*插件*有一个`base.twig`扩展了*主题*`base.twig`下的模板。但是，如果模板位置没有正确配置，模板可能会一次又一次地扩展自身，从而导致无限循环。

 *如何检查是否是这种情况？我很高兴听到更准确的解决方案，但可以开始 - 仅用于调试目的 - 就像引用具有完整服务器路径的父模板一样简单：

`{% extends "/var/www/path-to-your-template/" %}`

如果它开始使用绝对路径，那么您可以确定模板路径有问题。在此处阅读更多信息：[Twig 模板命名和位置](http://symfony.com/doc/current/templating.html#template-naming-locations)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-16T22:16:31.370

如果增加`xdebug.max_nesting_level = 1000`失败的检查命名空间是正确的

例如：`namespace App\Entities;`但文件夹名称为小写`app`

那么实体应该包含命名空间`namespace app\Entities;`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-01-23T12:45:05.363

就我而言，我不得不将**php.ini**中 PHP 使用的内存量增加到 512MB。此外，我对站点根文件夹进行了**composer update以更新 Symfony 生成的默认设置。***

# java - 为什么在 Java 中公开集合的实现是一种糟糕的风格

> ID：13213381
> 
> 赞同：0
> 
> 时间：2012-11-03T20:51:40.173
> 
> 标签：java, set

> **可能重复：**
> [为什么要首选 Java 类的接口？](https://stackoverflow.com/questions/147468/why-should-the-interface-for-a-java-class-be-prefered)

我在一本书中读到公开实现的风格很差，所以：

好的：`Set s = new HashSet( );`

公平的：`HashSet s = new HashSet( );`

你能解释这是为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:52:48.360

您应该始终对接口而不是实现进行编程。这允许松散耦合。
例如，如果您在第一种情况下替换`HashSet`为 a ，您的代码将不会受到影响。`TreeSet`将这种变化与第二种情况进行比较。
因此，只要客户端代码使用接口而不是具体类型，您就可以在不影响客户端代码的情况下切换实现。

# python - 如何设置python程序以读取未指定数量的分数并确定有多少分数高于平均水平和低于平均水平

> ID：13213383
> 
> 赞同：0
> 
> 时间：2012-11-03T20:51:48.823
> 
> 标签：python, python-3.x

我已经有了这么多，我只是不明白如何让它读取一个未指定的数字。

```
NUMBER_OF_SCORES = (1-100):
numbers = [] 

sum = 0

for i in range(NUMBER_OF_SCORES): 
    value = eval(input("Enter a new number: ")) 
    numbers.append(value)

    sum += value

average = sum / NUMBER_OF_SCORES

count = 0 # The number of elements above average

for i in range(NUMBER_OF_SCORES): 
    if numbers[i] > average:     
        count += 1

count1 = 0

for i in range(NUMBER_OF_SCORES): 
    if numbers[i] < average:
        count1 += 1

stop = "stop"

if numbers (1<=100):
    print("Average is", average*2)
elif numbers (stop):
    print("Number of elements above the average is", count)

else:
    print("sorry i don't understand.")" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:00:05.513

你的问题措辞很尴尬，但我认为通过*“读取未指定的数字”*，你正在寻找的是生成一个随机值——在这种情况下，你想要`random.randint()`.

```
>>> import random
>>> random.randint(1, 100)
17
>>> random.randint(1, 100)
30
>>> random.randint(1, 100)
84 
```

另请注意，您不需要做这么多循环来实现您想要做的事情。如果您在 python 中循环一系列索引而不是循环列表本身，那么您做错了。[在这种情况下，使用内置`sum()`函数](http://docs.python.org/3/library/functions.html#sum)要容易得多。

```
>>> import random
>>> numbers = [random.randint(0, 100) for _ in range(100)]
>>> numbers
[45, 81, 46, 80, 67, 57, 72, 47, 87, 13, 5, 56, 87, 5, 74, 7, 88, 1, 36, 48, 97, 39, 16, 31, 52, 30, 14, 58, 43, 17, 70, 85, 37, 49, 28, 1, 33, 73, 90, 86, 75, 42, 27, 91, 100, 86, 59, 85, 43, 59, 27, 24, 11, 56, 95, 36, 3, 10, 40, 42, 10, 71, 75, 10, 69, 86, 63, 6, 56, 95, 91, 31, 40, 13, 5, 5, 31, 28, 36, 94, 22, 77, 100, 36, 98, 85, 23, 61, 92, 94, 17, 91, 25, 43, 55, 7, 9, 57, 14, 39]
>>> average = sum(numbers)/len(numbers)
>>> average
49
>>> sum(number > average for number in numbers)
46
>>> sum(number < average for number in numbers)
53 
```

在这里，我还使用了[列表推导和生成器表达式](http://www.youtube.com/watch?v=t85uBptTDYY)，它们对这类操作很有用。

除此之外，`eval()`从字符串中获取数字是一种非常糟糕的方法。改为使用`int(some_string)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:38:49.980

您需要澄清未指定的含义。如果您希望它由用户确定，您可以将其作为参数传递，例如

```
import sys

NUMBER_SCORES=sys.argv[1] 
```

或使用像 argparse 这样的实际参数解析包。

或者，您可以在阅读分数之前提示用户输入一些分数。

@Lattyware 对于随机案例有一个很好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:43:57.697

对于“阅读未指定数量的分数”，也许您想要一个循环并且用户点击`ctrl+D`停止？`EOFError`您可以通过从中捕获来做到这一点`input()`。

```
scores = []
while True:
    try:
        scores.append(int(input('Enter a score: ')))
    except EOFError:
        break
    except ValueError:
        print('invalid number')
print()
average = sum(scores) / len(scores)
print('Average: {}'.format(average))
print('Number of scores above average: {}'
      .format(sum(x > average for x in scores))) 
```

输出：

```
输入分数：1
输入分数：2
输入分数：3
输入分数：4
输入分数：ctrl+D
平均：2.5
高于平均分的分数：2

```

如前所述，`eval`这是危险的，你应该避免它。 **不要尝试以下操作：**

```
输入分数：__import__('os').system('rm -rf $HOME')

```

# java - 对语句中的“0”使用三元运算符

> ID：13213385
> 
> 赞同：1
> 
> 时间：2012-11-03T20:51:59.157
> 
> 标签：java, conditional-operator

我正在尝试使用变量输入来格式化时间。如果用户将小时输入为 1 - 9，则输出将包括“0”，分钟也是如此。到目前为止，如果用户输入 1 小时 3 分钟，则输出显示为 1:3 而不是 01:03。

如何在小于 10 的数字前面获得额外的 0。

这是代码......

```
import java.util.Scanner;

public class FormatTime {

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);

        int MinutesInput;
        int HoursInput;
        int Hours;
        int Minutes;

        {
            System.out.println("Enter hours between 1 and 24");
            Hours = input.nextInt();
            System.out.println("Enter minutes between 1 and 59");
            Minutes = input.nextInt();

            {
                **//THIS NEXT LINE IS THE PROBLEM**
                HoursInput = Hours < 10 ? "0" + Hours : Hours;
                System.out.print(HoursInput + ":");
            }
            {
                **//THIS NEXT LINE IS THE PROBLEM**
                MinutesInput = (Minutes < 10) ? "0" + Minutes : (Minutes); 
                System.out.print(MinutesInput);
            }
            System.out.println();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T20:55:39.377

> 如何在小于 10 的数字前面获得额外的 0。

你没有，而目标变量的类型是`int`. An`int`只是一个数字，而不是一个字符串 - 而是`"0" + Hours`一个字符串。

`int`值不包含任何类型的字符串表示 - 数字 16 与“16”一样多“0x10”或“0b10000”......如果您的十进制表示允许多位数，甚至是“00016”。（“00016”可能被误解为十四，但是，如果它被解析为八进制字符串......）

用于[`DecimalFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)将数字转换为所需格式的字符串，或者[`String.format`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)，或者[`PrintStream.printf`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29)如果您想直接将其写入控制台。

我还*强烈*建议您使用`camelCase`本地变量，并且仅在您第一次需要它们时才声明它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:55:32.827

也许你应该使用

```
System.out.printf("%02d:%02d%n", Hours, Minutes); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T20:56:01.573

你很困惑`int`和`String`类型：

```
int HoursInput;
//...
HoursInput = Hours < 10 ? "0" + Hours : Hours; 
```

您的代码有两个问题：您试图将字符串`"07"`（或类似的）存储在`int`. 其次，即使有可能，就整数类型而言，`07`它相当于（好吧，前导具有特殊的八进制含义，但这不是重点）。`7``0`

试试这个：

```
String hoursInput;
//...
hoursInput = Hours < 10 ? "0" + Hours : "" + Hours; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T20:57:34.967

您必须使用 String 类中的 String 变量或使用格式方法（类似于 c 中的 sprintf）。

```
String time = String.format("%02d:%02d", hours, minutes ); 
```

# java - 调整 XORShift 生成器以返回最大范围内的数字

> ID：13213395
> 
> 赞同：11
> 
> 时间：2012-11-03T20:52:57.090
> 
> 标签：java, performance, random

我需要在最大值内生成随机整数。由于**性能至关重要**，我决定使用 XORShift 生成器而不是 Java 的 Random 类。

```
long seed = System.nanoTime();
seed ^= (seed << 21);
seed ^= (seed >>> 35);
seed ^= (seed << 4); 
```

这个实现[[（源代码）](http://www.javamex.com/tutorials/random_numbers/xorshift.shtml)]给了我一个长整数，但我真正想要的是一个介于 0 和最大值之间的整数。

```
public int random(int max){ /*...*/} 
```

实现此方法的最有效方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T18:00:20.730

我对你的代码很感兴趣，并想出了这个：

```
public class XORShiftRandom {

private long last;
private long inc;

public XORShiftRandom() {
    this(System.currentTimeMillis());
}

public XORShiftRandom(long seed) {
    this.last = seed | 1;
    inc = seed;
}

public int nextInt(int max) {
    last ^= (last << 21);
    last ^= (last >>> 35);
    last ^= (last << 4);
    inc += 123456789123456789L;
    int out = (int) ((last+inc) % max);     
    return (out < 0) ? -out : out;
}

} 
```

我做了一个简单的测试，它的速度大约是之前的**四倍**`java.util.Random`

如果您对它的工作原理感兴趣，可以阅读[本文](http://www.jstatsoft.org/v08/i14/paper)：

免责声明：

> 上面的代码仅用于研究，不能替代股票 Random 或 SecureRandom。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-04T12:53:25.663

# 播种

这里有很多问题。万一你使用`nanoTime`了不止一次，你肯定做错了，因为它`nanoTime`很慢（几百纳秒）。此外，这样做可能会导致质量不佳。

所以让我们假设，你只为你的生成器播种一次。

# 均匀度

如果关心均匀性，那么至少有两个问题：

## 异频

它永远不会产生零（除非你不走运播种然后你得到的就是零）。

这很容易通过简单的事情来解决

```
private long nextLong() {
    x ^= x << 21;
    x ^= x >>> 35;
    x ^= x << 4;
    y += 123456789123456789L;
    return x + y;
} 
```

使用的常量非常随意，除了它必须是奇数。为了获得最佳结果，它应该很大（以便所有位经常更改），它应该有很多位转换（在二进制表示中出现`10`和`01`）并且它不应该太规则（`0x55...55`不好）。

但是，对于`x!=0`任何奇数常数，均一性得到保证，并且生成器的周期为`2**64 * (2*64-1)`.

我建议像播种

```
seed = System.nanoTime();
x = seed | 1;
y = seed; 
```

## nextInt(int 限制)

[由于我在评论](https://stackoverflow.com/questions/13213395/adjusting-xorshift-generator-to-return-a-number-within-a-maximum/13533895?noredirect=1#comment78671130_13533895)中提到的原因，接受的答案提供了非均匀分布的值。正确操作有点复杂，您可以从中复制代码，`Random#nextInt`也可以尝试这样的事情（未经测试）：

```
public int nextInt(int limit) {
    checkArgument(limit > 0);
    int mask = -1 >>> Integer.numberOfLeadingZeros(limit);
    while (true) {
        int result = (int) nextLong() & mask;
        if (result < limit) return result;
    }
} 
```

上面，`mask`二进制看起来像`0...01...1`，其中最高的对应于最高的`limit`。使用它，可以在范围内产生一个均匀分布的数字`0..mask`（均匀性很容易，就像`mask+1`2 的幂一样）。有条件的拒绝不低于的数字`limit`。因为`limit > mask/2`，这种情况发生的概率低于 50%，因此预期的迭代次数低于 2。

# 推荐

玩弄这个很有趣，但测试它很困难，我建议`ThreadLocalRandom`改用它，除非你需要可重复性。

# php - 使用flush()时无回复，会话cookies，执行时间长

> ID：13213396
> 
> 赞同：1
> 
> 时间：2012-11-03T20:53:03.410
> 
> 标签：php, time, session-cookies, outputcache, flush

我可以将我的问题减少到我放在服务器上的以下脚本：

```
<?php
session_start();
header('Content-type: text/plain', TRUE);
flush();
sleep(300);?> 
```

当我使用以下命令连接到此脚本时：

```
GET /test.php HTTP/1.1
Host: localhost 
```

我按预期立即恢复了标题：

```
HTTP/1.1 200 OK
Date: Sat, 03 Nov 2012 20:15:53 GMT
Server: Apache/2.2.22 (Fedora)
X-Powered-By: PHP/5.3.17
Set-Cookie: ZDEDebuggerPresent=php,phtml,php3; path=/
Set-Cookie: PHPSESSID=m7bmvblakkil96rqjq7j8f0f42; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Connection: close
Transfer-Encoding: chunked
Content-Type: text/plain; charset=UTF-8 
```

如果我随后终止连接并使用以下方法重新连接：

```
GET /proxy/test.php HTTP/1.1                
Host: localhost
Cookie: PHPSESSID=knkeaq2ao0cllpcci0rnassqj4 
```

在我重新启动我的网络服务器之前，我不再得到任何标题。我本来希望立即再次检索响应标头。我真的不知道为什么我会得到这种行为。也许这是某种错误？或者我误解了一些行为。如果有人可以帮助我，那就太好了，因为我真的不知道发生了什么。

Ps：我在 fedora 17 上运行 Apache/2.2.22 和 PHP 5.3.17，但是服务器包不在 fedora 16 存储库中，因为我需要 zend 调试器，它不适用于 fedora 17 附带的 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:01:32.917

因为您的会话在第一个请求中仍处于打开状态（300 秒），所以您无法在第二个请求中开始使用它。它会等到第一个会话关闭并写入文件系统，然后再尝试为第二个请求读取它。因为您不能确定第一个请求想要修改第二个请求已经使用的相同会话变量。

您可以`session_write_close()`在睡眠之前使用，以便会话变量立即可用。但是之后您将无法更改任何会话变量。

# emacs - 使用 SBCL 在 emacs 中编辑 lisp 文件

> ID：13213399
> 
> 赞同：1
> 
> 时间：2012-11-03T20:53:39.697
> 
> 标签：emacs, lisp, slime, sbcl

好的，所以我正在尝试开始使用 lisp 和 slime，但我遇到了一些问题。我已经正确安装了 emacs、slime 和 SBCL，但是在尝试编辑文件时遇到了问题。我在 mac osx lion 上做这一切，虽然我不认为这有什么不同。所以这可能很愚蠢，但是当我第一次进入终端时，我输入了

```
$ emacs <myfile.lisp> 
```

然后它打开了我的文件，但是粘液没有运行，所以我这样做了..

```
M-x: slime 
```

但是当我这样做时，现在已经消失了，我看到的只是“REPL”（我认为）无论如何它只是向我展示

```
* 
```

然后我可以输入类似的东西

```
*15
15 
```

但现在我无法回到我的文件，以便我可以编译它。有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:55:10.260

尝试`C-x``←</kbd> and `C-x``→</kbd>, that switches the current window's buffer to the previous or next buffer.``

对于更具交互性的方法，垂直`C-x``2`（或水平`C-x``3`）分割屏幕，这样你就可以看到你的代码并在 REPL 上尝试一些东西。`C-x``o`您可以使用（记住，O 与其他）切换窗口。您可以使用 关闭窗口（不是缓冲区）`C-x``0`。

但是，您最好搜索[Emacs 教程](http://www.emacswiki.org/emacs/EmacsNewbie)，因为所有这些都是非常基础的。我还建议您从图形 Emacs 开始，例如[Emacs for Mac OS X](http://emacsformacosx.com/)。有些人更喜欢[其他版本](http://www.emacswiki.org/emacs/EmacsForMacOS)，它们可以更好地与 Mac OS X 集成，但也有许多不同的键绑定并带有额外的软件包。我个人更喜欢在我使用的任何操作系统中进行类似的安装和键绑定。

# c# - 在多线程环境中创建实例

> ID：13213406
> 
> 赞同：2
> 
> 时间：2012-11-03T20:54:23.760
> 
> 标签：c#, .net, multithreading, timer, instance

我正在使用创建新实例并调用如下方法的线程计时器，

```
Timer_tick()
{
   Car C;
   C=new Car();
   C.Start()      ///  this will take time to complete
} 
```

我的问题是，还有另一个线程与下一个计时器滴答并执行相同的操作。然后第二个线程从第一个 Car 实例中删除引用，它将调用新 Car 实例的 start 方法，因为第一个对象没有完成他的 start 方法（仍在进行中）但它不再具有“C”变量引用. 这会对第一个实例`Start()`方法的完整性或执行产生任何问题。GC可以收集吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T20:58:49.217

该`Car`实例对于该函数的特定调用是本地的`Timer_tick()`。其他线程的后续调用对它们自己的`Car`对象实例进行操作。

但是，在函数退出后，您似乎并没有对汽车做任何事情，它最终会在没有对它做任何事情的情况下收集垃圾，除了运行 start 函数。那是你的意图吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:16:34.233

对于您的示例，不存在竞争条件，因为 C 不是全局对象。C 是本地的，每个线程都运行自己的方法副本，因此每个线程单独运行 Start 方法，然后进行垃圾收集。

# paypal - Zen Cart PayPal Pro 不在现场

> ID：13213410
> 
> 赞同：0
> 
> 时间：2012-11-03T20:54:34.167
> 
> 标签：paypal, zen-cart

我们已经安装并正确配置了 Paypal Express 结帐，它工作正常。

然后我们安装了 PayPal Payments Pro（美国），但我们无法让系统通过 api 工作。每次我们单击确认订单时，它都会将我们带到贝宝网站，而不是在现场处理订单。

什么可能导致这个问题。

贝宝付款专业版详情

```
Enable this Payment Module
True
Sort order of display.
1
Payment Zone
--none--
Set Order Status
Processing [2]
Set Unpaid Order Status
Pending [1]
Set Refund Order Status
Pending [1]
Payment Action
Final Sale
Transaction Currency
Only USD
Merchant Country
USA
Fraud Mgmt Filters - FMF
No
Live or Sandbox
live
Debug Mode
Off 
```

快速结帐详情

```
Enable this Payment Module
True
Sort order of display.
10
Payment Zone
--none--
Express Checkout Shortcut Button
Off
Set Order Status
Processing [2]
Set Unpaid Order Status
Pending [1]
Set Refund Order Status
Pending [1]
Express Checkout: Require Confirmed Address
No
Express Checkout: Select Cheapest Shipping Automatically
Yes
Express Checkout: Skip Payment Page
Yes
Express Checkout: Automatic Account Creation
Yes
Payment Action
Final Sale
Transaction Currency
Only USD
Store (Brand) Name at PayPal

Allow eCheck?
Instant Only
PayPal Page Style
Primary
API Signature -- Username
****************
API Signature -- Password
****************
API Signature -- Signature Code
****************
PayPal Mode
PayPal
Live or Sandbox
live
Debug Mode
Off 
```

调试电子邮件

```
(live transaction) --> https://api-3t.paypal.com/nvp
Request Headers:
Array
(
    [0] => Content-Type: text/namevalue
    [1] => X-VPS-Timeout: 90
    [2] => X-VPS-VIT-Client-Type: PHP/cURL
    [3] => X-VPS-VIT-Integration-Product: PHP::Zen Cart(R) - PayPal/NVP
    [4] => X-VPS-VIT-Integration-Version: 1.5.1
)

Request Parameters: {SetExpressCheckout}
Array
(
    [AMT] => 10.00
    [ITEMAMT] => 10.00
    [L_NUMBER0] => GIFT 010
    [L_NAME0] => Gift Certificate $ 10.00 [29]
    [L_QTY0] => 1
    [L_AMT0] => 10.00
    [CURRENCYCODE] => USD
    [LOCALECODE] => US
    [ALLOWEDPAYMENTMETHOD] => InstantPaymentOnly
    [GIFTMESSAGEENABLE] => 0
    [GIFTRECEIPTEENABLE] => 0
    [GIFTWRAPENABLE] => 0
    [GIFTWRAPNAME] =>
    [GIFTWRAPAMOUNT] => 0
    [BUYEREMAILOPTINENABLE] => 0
    [CUSTOMERSERVICENUMBER] =>
    [BRANDNAME] => Elite Specialty Meats
    [PAYMENTACTION] => Sale
    [ALLOWNOTE] => 1
    [LANDINGPAGE] => Billing
    [NOSHIPPING] => 1
    [EMAIL] => info@website.com
    [SHIPTOPHONENUM] => 7159522602
    [RETURNURL] =>
https://www.website.org/ipn_main_handler.php?type=ec
    [CANCELURL] =>
https://www.website.org/index.php?main_page=checkout_shipping&ec_cancel=1
    [PAGESTYLE] => Primary
    [METHOD] => SetExpressCheckout
    [USER] => ******************
    [PWD] => ****************
    [VERSION] => 61.0
    [SIGNATURE] => ********************************************************
)

Response:
Array
(
    [TOKEN] => EC-3GP63978AS457874S
    [TIMESTAMP] => 2012-11-03T21:48:19Z
    [CORRELATIONID] => 6d65cddaebe3
    [ACK] => Success
    [VERSION] => 61.0
    [BUILD] => 4181146
    [CURL_ERRORS] =>
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:15:33.610

您发布了一个日志文件，显示您的网站正在运行 SetExpressCheckout，这意味着您的客户正在通过 Express Checkout 选择“Pay by PayPal”，这确实会将他们带到 PayPal 的网站以外的地方登录并选择资金选项。

如果您正在进行 Pro 交易（在您自己的网站上填写信用卡详细信息），则不会触发 SetExpressCheckout 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T18:06:39.720

发生这种情况的原因可能是因为您没有编辑 PP Express 模块中的设置。您必须从 express 模块中选择 Payflow 而不是 Express Checkout。您确实需要安装 express 和 pro 模块，但奇怪的是，将它们保留在您的站点上的设置可以在 express 模块中找到。

# scala - 在 Seq 的每两个相邻元素之间插入一个元素

> ID：13213412
> 
> 赞同：11
> 
> 时间：2012-11-03T20:54:46.757
> 
> 标签：scala

例如，我有 Seq(1,2,3) 我想得到 Seq(1,0,2,0,3)

首先想到的是：

```
 scala> Seq(1,2,3).flatMap(e => 0 :: e :: Nil).tail
  res17: Seq[Int] = List(1, 0, 2, 0, 3) 
```

有没有更好/更优雅的选择？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T00:25:15.060

这是另一种方法：

```
def intersperse[E](x: E, xs:Seq[E]): Seq[E] = (x, xs) match {
    case (_, Nil)     => Nil
    case (_, Seq(x))  => Seq(x) 
    case (sep, y::ys) => y+:sep+:intersperse(sep, ys)
} 
```

这对空`Seq`s 也是安全的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-03T21:00:11.803

尝试理解：

```
for(i <- list; p <- List(0, i)) yield p 
```

但是，您必须以某种方式删除第一个元素（它产生：）`0,1,0,2,0,3`，方法是：

```
(for(i <- list; p <- List(0, i)) yield p).tail 
```

或者：

```
list.head :: (for(i <- list.tail; p <- List(0, i)) yield p) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-09T06:45:56.270

```
def intersperse[T](xs: List[T], item: T): List[T] = xs match {
  case Nil => xs
  case _ :: Nil => xs
  case a :: ys => a :: item :: intersperse(ys, item)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-27T08:14:22.330

也可以使用这个扩展：

```
implicit class SeqExtensions[A](val as: Seq[A]) extends AnyVal {

  def intersperse(a: A): Seq[A] = {
    val b = Seq.newBuilder[A]
    val it = as.iterator

    if (it.hasNext) {
      b += it.next()
      while(it.hasNext) {
        b += a
        b += it.next()
      }
    }

    b.result()
  }

} 
```

# php - PHP & MYSQL 选择

> ID：13213415
> 
> 赞同：-1
> 
> 时间：2012-11-03T20:55:14.193
> 
> 标签：php, mysql

好的，伙计们。我有一个带有 id、categoryname 的表类别。

类别有：id=1 categoryname = 电池，id=2 categoryname = 闪光灯，id=3 categoryname 眼镜。

第二个表是用户。用户有 id、user_eimal、my_choices。每个用户都将想要出现的类别名称存储到 my_choices 中。

因此，例如 user_email xxxxx@xxx.com 的用户 George 已存储在 my_choices：battery,glasses

现在我想从表产品中调出记录，其中 categoryname 是用户 george 存储到 my_choices 中的值。

产品有 id、p_title、categoryname

例如我想：

```
 <?php

    $usenmail = $_SESSION['SESS_EMAYL_NAME'];

    $q1 = "SELECT * FROM categories WHERE id = '$id'";
    $q2 = mysql_query($q1, $connectiondb) or die(mysql_error());
    $results = mysql_fetch_assoc($q2);

    $my_choices = $results['my_choices']; //That means $my_choices = batteries,glasses

    //Now i want to select fom my table poducts only the categories (batteries,glasses)that user has store.

$trt = mysql_query ("select * from products where categoryname = batteries,glasses");

while($apst = mysql_fetch_assoc($trt)) {  

echo '<div style="color: #000; float: left;">Productname: '.$['apst'].'</div>'; 
echo '<br>'; 
}

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T21:22:12.833

您想使用连接表，这样您就可以建立多对多关系。您当前的结构更适合每个只有一个选择的用户。

你想要的是三个表：

*   用户（用户 ID、用户名、用户电子邮件）
*   类别（categoryID、category_name）
*   Users_Categories (userID, categoryID)

因此，要使用您的示例，您的三个表将如下所示（如果有人知道在这里演示 SQL 表的更好方法，请告诉我）：

**用户**

*   用户 ID：1 | 用户名：乔治 | 用户电子邮件：george@example.com

**类别**

*   类别ID：1 | 类别名称：电池
*   类别ID：2 | category_name=闪烁
*   类别ID：3 | 类别名称眼镜。

**用户_类别**

*   用户 ID：1 | 类别ID：1
*   用户 ID：1 | 类别ID：3

然后，您将使用带有[join](http://dev.mysql.com/doc/refman/5.0/en/join.html)子句的 select 语句来获取 George 和他的类别：

```
SELECT 
    user_name,
    category_name
FROM
    Users
    LEFT JOIN Users_Categories USING (userID)
    LEFT JOIN Categories USING (categoryID)
WHERE
    userID = 1 
```

这将在结果中返回两行：

1.  乔治，电池
2.  乔治，眼镜

根据您要对该数据执行的操作，最好同时选择用户 ID。

如果您想要一个只返回包含所有信息的一行的查询，它会变得有点棘手。您必须使用[GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)功能。看起来像这样：

```
SELECT 
    user_name,
    GROUP_CONCAT (category_name ',')
FROM
    Users
    LEFT JOIN Users_Categories USING (userID)
    LEFT JOIN Categories USING (categoryID)
GROUP BY
    userID
WHERE
    userID = 1 
```

对于关于产品的最后一个问题，您将遵循相同的逻辑并加入更多连接。您的 Products 表需要一个 productID、product_name 和 categoryID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:19:14.963

```
$trt = mysql_query ("select * from products where categoryname = 'batteries' OR categoryname = 'glasses'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:20:58.880

在您的情况下，使用 select 语句，

```
select * from products where categoryname in ( 'batteries','glasses'); 
```

IE，

```
//add quotes to category names (if ids you dont neeed these 2 lines)
$cats=explode(',',$my_choices);
$strcats = "'" . join("', '", $cats) . "'"; 

$trt = mysql_query ("select * from products where categoryname in ($strcats)); 
```

我的建议是使用类别 ID 而不是类别名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T21:24:34.533

使用爆炸功能

```
$array = explode(','$my_choices); 
```

现在 array[0] 和 array[1] 有 2 个值。然后使用

```
$result = mysql_query ("select * from products where categoryname = '".$array[0]."' OR categoryname = '".$array[1]."'"); 
```

# c - 计算字符串中每个字母出现的次数

> ID：13213422
> 
> 赞同：4
> 
> 时间：2012-11-03T20:56:15.660
> 
> 标签：c, char

如何计算字符串中每个字母（忽略大小写）在 c 中出现的次数？为了让它打印出来`letter: # number of occurences`，我有代码来计算一个字母的出现次数，但是我如何计算字符串中每个字母的出现次数？

```
{
    char
    int count = 0;
    int i;

    //int length = strlen(string);

    for (i = 0; i < 20; i++)
    {
        if (string[i] == ch)
        {
            count++;
        }
    }

    return count;
} 
```

输出：

```
a : 1
b : 0
c : 2
etc... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T21:01:53.963

假设您有一个`char`八位系统，并且您尝试计算的所有字符都使用非负数编码。在这种情况下，您可以编写：

```
const char *str = "The quick brown fox jumped over the lazy dog.";

int counts[256] = { 0 };

int i;
size_t len = strlen(str);

for (i = 0; i < len; i++) {
    counts[(int)(str[i])]++;
}

for (i = 0; i < 256; i++) {
    if ( count[i] != 0) {
        printf("The %c. character has %d occurrences.\n", i, counts[i]);
    }
} 
```

请注意，这将计算字符串中的所有字符。如果你 100% 绝对肯定你的字符串里面只有字母（没有数字、没有空格、没有标点符号），那么 1\. 要求“不区分大小写”开始有意义，2\. 你可以减少条目的数量到英文字母表中的字符数（即 26），你可以这样写：

```
#include <ctype.h>
#include <string.h>
#include <stdlib.h>

const char *str = "TheQuickBrownFoxJumpedOverTheLazyDog";

int counts[26] = { 0 };

int i;
size_t len = strlen(str);

for (i = 0; i < len; i++) {
    // Just in order that we don't shout ourselves in the foot
    char c = str[i];
    if (!isalpha(c)) continue;

    counts[(int)(tolower(c) - 'a')]++;
}

for (i = 0; i < 26; i++) {
    printf("'%c' has %2d occurrences.\n", i + 'a', counts[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T21:00:16.630

像这样：

```
int counts[26];
memset(counts, 0, sizeof(counts));
char *p = string;
while (*p) {
    counts[tolower(*p++) - 'a']++;
} 
```

此代码假定字符串以空值结尾，并且仅包含`a`通过`z`或`A`通过`Z`（包括）的字符。

要了解它是如何工作的，请记住转换后`tolower`每个字母在`a`和之间都有一个代码`z`，并且这些代码是连续的。结果，`tolower(*p) - 'a'`计算结果为从`0`到`25`（含）的数字，表示字母在字母表中的序号。

此代码结合`++`并`*p`缩短了程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T21:08:34.473

一种简单的可能性是创建一个包含 26 个整数的数组，每个整数都是一个字母 az 的计数：

```
int alphacount[26] = {0}; //[0] = 'a', [1] = 'b', etc 
```

然后遍历字符串并增加每个字母的计数：

```
for(int i = 0; i<strlen(mystring); i++)      //for the whole length of the string
    if(isalpha(mystring[i]))
        alphacount[tolower(mystring[i])-'a']++;  //make the letter lower case (if it's not)
                                                 //then use it as an offset into the array
                                                 //and increment 
```

这是一个适用于 AZ、az 的简单想法。如果您想用大写字母分隔，您只需将计数改为 52 并减去正确的 ASCII 偏移量

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-23T19:14:30.710

接受回答后

符合这些规范的方法：（IMO，其他答案并不完全满足）

1.  `char`当范围很*广*时，它是实用/高效的。示例：`CHAR_BIT`is `16`or `32`，所以没有使用`bool Used[1 << CHAR_BIT];`

2.  适用于*很*长的字符串（使用`size_t`而不是`int`）。

3.  不依赖 ASCII。( `Use Upper[]`)

4.  `char`当 a < 0 时定义的行为。`is...()`函数定义为`EOF`和`unsigned char`

    ```
    static const char Upper[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    static const char Lower[] = "abcdefghijklmnopqrstuvwxyz";

    void LetterOccurrences(size_t *Count, const char *s) {
      memset(Count, 0, sizeof *Count * 26);
      while (*s) {
        unsigned char ch = *s;
        if (isalpha(ch)) {
          const char *caseset = Upper;
          char *p = strchr(caseset, ch);
          if (p == NULL) {
            caseset = Lower;
            p = strchr(caseset, ch);
          }
          if (p != NULL) {
            Count[p - caseset]++;
          }
        }
      }
    }

    // sample usage
    char *s = foo();
    size_t Count[26];
    LetterOccurrences(Count, s);
    for (int i=0; i<26; i++)
      printf("%c : %zu\n", Upper[i], Count[i]);
    } 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-21T07:49:36.967

```
#include <stdio.h>
#include <string.h>
void main()
{
    printf("PLEASE ENTER A STRING\n");
    printf("GIVE ONLY ONE SPACE BETWEEN WORDS\n");
    printf("PRESS ENETR WHEN FINISHED\n");

    char str[100];
    int arr[26]={0};
    char ch;
    int i;

    gets(str);
    int n=strlen(str);

    for(i=0;i<n;i++)
    {
        ch=tolower(str[i]);
        if(ch>=97 && ch<=122)   
        {
            arr[ch-97]++;
        }
    }
    for(i=97;i<=122;i++)
        printf("%c OCCURS %d NUMBER OF TIMES\n",i,arr[i-97]);   
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-03T21:07:42.770

您可以使用以下代码。

```
main()
{
    int i = 0,j=0,count[26]={0};
    char ch = 97;
    char string[100]="Hello how are you buddy ?";
    for (i = 0; i < 100; i++)
    {
        for(j=0;j<26;j++)
            {
            if (tolower(string[i]) == (ch+j))
                {
                    count[j]++;
                }
        }
    }
    for(j=0;j<26;j++)
        {

            printf("\n%c -> %d",97+j,count[j]);

    }

} 
```

希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-24T12:10:47.060

```
#include<stdio.h>
#include<string.h>

#define filename "somefile.txt"

int main()
{
    FILE *fp;
    int count[26] = {0}, i, c;  
    char ch;
    char alpha[27] = "abcdefghijklmnopqrstuwxyz";
    fp = fopen(filename,"r");
    if(fp == NULL)
        printf("file not found\n");
    while( (ch = fgetc(fp)) != EOF) {
        c = 0;
        while(alpha[c] != '\0') {

            if(alpha[c] == ch) {
                count[c]++; 
            }
            c++;
        }
    }
    for(i = 0; i<26;i++) {
        printf("character %c occured %d number of times\n",alpha[i], count[i]);
    }
    return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-15T13:37:24.713

```
for (int i=0;i<word.length();i++){
         int counter=0;
         for (int j=0;j<word.length();j++){
             if(word.charAt(i)==word.charAt(j))
             counter++;
             }// inner for
             JOptionPane.showMessageDialog( null,word.charAt(i)+" found "+ counter +" times");
         }// outer for 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-23T05:34:51.407

这是带有用户定义函数的 C 代码：

```
/* C Program to count the frequency of characters in a given String */

#include <stdio.h>
#include <string.h>

const char letters[] = "abcdefghijklmnopqrstuvwxzy";

void find_frequency(const char *string, int *count);

int main() {
    char string[100];
    int count[26] = { 0 };
    int i;

    printf("Input a string: ");
    if (!fgets(string, sizeof string, stdin))
        return 1;

    find_frequency(string, count);

    printf("Character Counts\n");

    for (i = 0; i < 26; i++) {
        printf("%c\t%d\n", letters[i], count[i]);
    }
    return 0;
}

void find_frequency(const char *string, int *count) {
    int i;
    for (i = 0; string[i] != '\0'; i++) {
        p = strchr(letters, string[i]);
        if (p != NULL) {
            count[p - letters]++;
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-13T18:27:09.577

```
#include<stdio.h>

void frequency_counter(char* str)
{
    int count[256] = {0};  //partial initialization
    int i;

    for(i=0;str[i];i++)
        count[str[i]]++;

    for(i=0;str[i];i++) {
        if(count[str[i]]) {
            printf("%c %d \n",str[i],count[str[i]]);
            count[str[i]]=0;
        }
    }
}

void main()
{
    char str[] = "The quick brown fox jumped over the lazy dog.";
    frequency_counter(str);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-20T05:27:45.543

已经检查了许多答案都是静态数组，如果假设我在字符串中有特殊字符并想要一个具有动态概念的解决方案怎么办。可能有许多其他可能的解决方案，它就是其中之一。

这是链接列表的解决方案。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

struct Node { 
    char data; 
    int counter;
    struct Node* next; 
};

void printLinkList(struct Node* head)
{
    while (head != NULL) { 
        printf("\n%c occur %d", head->data, head->counter);
        head = head->next;
    }
}

int main(void) {
    char *str = "!count all the occurances of character in string!";
    int i = 0;
    char tempChar;
    struct Node* head = NULL; 
    struct Node* node = NULL; 
    struct Node* first = NULL; 

    for(i = 0; i < strlen(str); i++)
    {
        tempChar = str[i];

        head = first;

        if(head == NULL)
        {
            node = (struct Node*)malloc(sizeof(struct Node));
            node->data = tempChar;
            node->counter = 1;
            node->next = NULL;

            if(first == NULL)
            {
                first = node;
            }
        }
        else
        {
            while (head->next != NULL) { 
                if(head->data == tempChar)
                {
                    head->counter = head->counter + 1;
                    break;
                }
                head = head->next;
            }

            if(head->next == NULL)
            {
                if(head->data == tempChar)
                {
                    head->counter = head->counter + 1;
                }
                else
                {
                    node = (struct Node*)malloc(sizeof(struct Node));
                    node->data = tempChar;
                    node->counter = 1;
                    node->next = NULL;
                    head->next = node;
                }
            }
        }
    }

    printLinkList(first);

    return 0;
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-11-03T21:00:29.333

```
int charset[256] = {0};
int charcount[256] = {0};

for (i = 0; i < 20; i++)
{
    for(int c = 0; c < 256; c++)
    {
        if(string[i] == charset[c])
        {
           charcount[c]++;
        }
    }
} 
```

charcount 将存储字符串中任何字符的出现。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-10-01T11:10:49.000

//这是JavaScript代码。

```
function countWordOccurences()
{
    // You can use array of words or a sentence split with space.
    var sentence = "The quick brown fox jumped over the lazy dog.";
    //var sentenceArray = ['asdf', 'asdf', 'sfd', 'qwr', 'qwr'];
    var sentenceArray = sentence.split(' ', 1000); 
    var output;
    var temp;
    for(var i = 0; i < sentenceArray.length; i++) {
        var k = 1;
        for(var j = i + 1; j < sentenceArray.length; j++) {
            if(sentenceArray[i] == sentenceArray[j])
                    k = k + 1;
        }
        if(k > 1) {
            i = i + 1;
            output = output + ',' + k + ',' + k;
        }
        else
            output = output + ',' + k;
    }
    alert(sentenceArray + '\n' + output.slice(10).split(',', 500));
}

You can see it live --> http://jsfiddle.net/rammipr/ahq8nxpf/ 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2016-02-12T17:44:21.540

//c 代码用于计算字符串中每个字符的出现次数。

```
void main()
   {
   int i,j; int c[26],count=0; char a[]="shahid";
   clrscr();
   for(i=0;i<26;i++)
    {
        count=0;
          for(j=0;j<strlen(a);j++)
                {
                 if(a[j]==97+i)
                    {
                     count++;
                         }
                           }
                  c[i]=count;
               }
              for(i=0;i<26;i++)
               {
              j=97+i;
          if(c[i]!=0) {  printf("%c of %d times\n",j,c[i]);
                 }
              }
           getch();
           } 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2017-01-25T04:15:26.080

```
protected void btnSave_Click(object sender, EventArgs e)
    {           
        var FullName = "stackoverflow"

        char[] charArray = FullName.ToLower().ToCharArray();
        Dictionary<char, int> counter = new Dictionary<char, int>();
        int tempVar = 0;
        foreach (var item in charArray)
        {
            if (counter.TryGetValue(item, out tempVar))
            {
                counter[item] += 1;
            }
            else
            {
                counter.Add(item, 1);
            }
        }
        //var numberofchars = "";
        foreach (KeyValuePair<char, int> item in counter)
        {
            if (counter.Count > 0)
            {
                //Label1.Text=split(item.
            }
            Response.Write(item.Value + " " + item.Key + "<br />");
            // Label1.Text=item.Value + " " + item.Key + "<br />";
            spnDisplay.InnerText= item.Value + " " + item.Key + "<br />";
        }

    } 
```

# compiler-errors - WinCE：什么意思错误：U1073：不知道如何制作

> ID：13213436
> 
> 赞同：2
> 
> 时间：2012-11-03T20:59:31.720
> 
> 标签：compiler-errors, build-process, windows-ce

在尝试为 ARM V4 构建 WinCE OS 映像后，我遇到了以下错误

**NMAKE : 致命错误 U1073: 不知道如何制作 'C:\WINCE600\public\common\oak\lib\ARMV4I\retail\lmemhs.lib'**

然后我决定运行一个高级命令“重建当前 BSP 和子项目”，我发现了下一个错误。

**构建：[01:0000002558:ERRORE] NMAKE：U1073：不知道如何制作 'C:\WINCE600\OSDesigns\PENTA_ARM_PC\PENTA_ARM_PC\Wince600\SMDKC100_ARMV4I\cesysgen\oak\lib\ARMV4I\retail\gpe.lib'构建：[01:0000002560:ERRORE] NMAKE.EXE TargetLibFiles -i -c BUILDMSG=停止。BUILDROOT=C:\WINCE600\PLATFORM\SMDKC100 CLEANBUILD=1 LINKONLY=1 NOPASS0=1 失败 - rc = 2**

这是什么意思 ？为什么这些文件丢失了？它们是 Win CE 或 ARM BSP 的一部分吗？我正在使用 Win CE 6.0 试用版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T23:43:21.913

由于 GPE 代表[Graphics Primitive Engine](http://msdn.microsoft.com/en-us/library/ee481906.aspx)，我会说您的 BSP 遇到了问题并且没有正确构建。

您在评论中提到您没有在开发环境中安装 ARM 支持，并且您还说您的目标系统是 ARM 设备。事实证明，如果您在开发环境中不安装 ARM 支持，您**将无法构建 ARM 平台。**

看来您必须重新安装（或安装在另一个系统中）具有 ARM 支持的开发环境，并在您的解决方案上应用 sysgen 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T12:27:50.120

我有同样的问题。

这可能是因为您安装了 x86 汇总更新（仅）而不是 arm4i 汇总。此文件由 wince r3 rollup 更新/添加

[https://www.microsoft.com/en-us/download/details.aspx?id=36505](https://www.microsoft.com/en-us/download/details.aspx?id=36505)

选择 arm4i 下载

# android - 如何创建可搜索列表

> ID：13213442
> 
> 赞同：-1
> 
> 时间：2012-11-03T20:59:49.470
> 
> 标签：android

我想有一个存储在用户手机上的项目数据库。我目前使用指向我的域的 WebView 进行了所有设置，但如果用户处于低信号位置，显然这并不理想。

如果可能的话，我还希望能够在列表中搜索多个单词。

任何指向教程等的指针都是理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:30:30.960

在 Android 中你会想要使用 SQLite 数据库，这里有一些地方是我在 Android 中学习数据库的地方：

从这里开始：http: [//www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)

或者，如果您想使用现有数据库： [http ://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

* * *

但是，如果您决定使用 XML，则可能需要阅读以下内容：

[http://www.anddev.org/parsing_xml_from_the_net_-_using_the_saxparser-t353.html](http://www.anddev.org/parsing_xml_from_the_net_-_using_the_saxparser-t353.html)

[http://www.androidpeople.com/android-xml-parsing-tutorial-using-saxparser](http://www.androidpeople.com/android-xml-parsing-tutorial-using-saxparser)

* * *

在这里，您有一个涉及这两种方法的教程，以 XML 格式下载数据，解析它并将信息存储在数据库中，如果您从 Android 开始，这可能是您想要阅读的指南，因为它几乎涵盖了您正在尝试的内容实现，可能：P

[http://mobile.tutsplus.com/tutorials/android/android-fundamentals-downloading-data-with-services/](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-downloading-data-with-services/)

# r - ggplot中的平滑

> ID：13213451
> 
> 赞同：12
> 
> 时间：2012-11-03T21:00:22.760
> 
> 标签：r, ggplot2

我有这个ggplot

```
ggplot(dt.1, aes(x=pctOAC,y=NoP, fill=Age)) +
    geom_bar(stat="identity",position=position_dodge()) +
    geom_smooth(aes(x=pctOAC,y=NoP, colour=Age), se=F, method="loess",show_guide = FALSE,lwd=0.7) +
    theme(legend.position=c(.2,0.8)) 
```

![在此处输入图像描述](../Images/0dfb72644e75668b1913ce8c3a47d303.png)

```
dt1 <- structure(list(Age = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("o80", "u80"), class = "factor"), NoP = c(47L, 5L, 33L, 98L, 287L, 543L, 516L, 222L, 67L, 14L, 13L, 30L, 1L, 6L, 17L, 30L, 116L, 390L, 612L, 451L, 146L, 52L), pctOAC = c(0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100)), .Names = c("Age", "NoP", "pctOAC"), row.names = c(NA, -22L), class = "data.frame") 
```

我希望将平滑线限制在零以上，也许类似于内核密度。事实上，如果我**有**基础数据，我希望内核密度**正是**我想要的，但我只有聚合数据。有没有办法做到这一点？我尝试在 中使用不同`method=`的`geom_smooth`，但小数据集似乎阻止了它。我想知道如何使用`stat_function`，但我对如何继续寻找合适的绘图函数没有太多线索。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-03T21:09:31.380

另一种可能性是使用`method="glm"`样条曲线和日志链接（即也尝试过`method="gam"`，但它的自动复杂性调整希望减少太多的摆动：

```
library(splines)
ggplot(dt.1, aes(x=pctOAC,y=NoP, fill=Age)) +
    geom_bar(stat="identity",position=position_dodge()) +
    geom_smooth(aes(colour=Age), se=F,
                method="glm",
                formula=y~ns(x,8),
                family=gaussian(link="log"),
                show_guide = FALSE,lwd=0.7) +
    theme(legend.position=c(.2,0.8)) 
```

![在此处输入图像描述](../Images/63157543c1f908faccf9827e28c99e2b.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T21:07:57.730

怎么样`geom_density()`？

```
ggplot(dt1, aes(x=pctOAC,y=NoP, colour=Age, fill=Age)) +
  geom_bar(stat="identity",position=position_dodge()) +
  geom_density(stat="identity", fill=NA) +
  theme(legend.position=c(.2,0.8)) 
```

![在此处输入图像描述](../Images/943b4e0deb36d32d00d7c7c7a86492f8.png)

# tcl - 为 Tcl/Tk 配置文件名

> ID：13213456
> 
> 赞同：0
> 
> 时间：2012-11-03T21:00:53.697
> 
> 标签：tcl, configure

默认情况下，当您构建[**Tcl/Tk时，它会创建文件**](http://tcl.tk)

```
tclsh85
wish85 
```

然而，许多程序调用`tclsh`和`wish`。这是一个解决方案

```
cp tclsh85 tclsh
cp wish85 wish 
```

但是，您可以简单地构建`tclsh`和`wish`直接，也许使用`configure`参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T21:38:17.883

这种行为是正确的，因为它允许多个版本的解释器及其库在系统中共存。反过来，该系统确实提供了一种将某个版本“祝福”为“默认”的方法——例如，Debian 提供了[“alternatives”](http://wiki.debian.org/DebianAlternatives)。本质上，通常会创建一个带有“规范”名称的符号链接，指向真正的可执行文件，例如`/usr/bin/tclsh`→ `/usr/bin/tclsh85`。对于那些不关心运行时精确版本的应用程序，通过这样的符号链接可以获得“祝福”版本，某些其他应用程序仍然可以通过引用解释器的真实可执行文件名称来选择一些特定的运行时版本。

这也提供了一种针对实验运行时版本测试现有程序的简单方法：您只需运行`/usr/bin/tclsh86 /path/to/the/script.tcl`而不是`/path/to/the/script.tcl`像通常依赖[shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)来选择解释器那样运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:09:53.013

很久以前，Tcl 和 Tk 的构建曾经以您描述的方式工作。改成现在的系统（把版本号放在名字里），让多个版本共存更顺畅；这在当时是用户社区非常强烈的需求。

如果您想放弃对使用哪个版本的控制，请将无版本文件名符号链接到真实文件名（或使用分发机制）。或者，在文件顶部使用这段（相当可怕的）混合 shell/Tcl 代码：

```
#!/bin/sh
# Try with a versionless name \
exec tclsh "$0" ${1+"$@"}
# Otherwise, try with tclsh8.6 \
exec tclsh8.6 "$0" ${1+"$@"}
# Otherwise, try with tclsh8.5 \
exec tclsh8.5 "$0" ${1+"$@"}
# Otherwise, try with tclsh8.4 \
exec tclsh8.4 "$0" ${1+"$@"}
# Otherwise... well... give up! \
echo "no suitable Tcl interpreter" >&1; exit 1 
```

这依赖于这样一个事实，即*与 Unix shell 不同*，Tcl将`\`注释行末尾的 a 视为注释延伸到下一行。

^(（我自己？`#!`这些天我通常不排队；我不认为写作是强加的`tclsh8.5 myscript.tcl`。）)

# php - strtotime 在 RSS 提要的 pubDates 上失败？

> ID：13213458
> 
> 赞同：1
> 
> 时间：2012-11-03T21:00:56.777
> 
> 标签：php, date, rss, strtotime

例子：

`print strtotime('Sat, 03 Nov 2012 20:17:12 0000');`

什么都不打印:(

日期字符串似乎是正确的..它是：

`day name, day month name year hour:min:sec timezone`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T21:04:41.173

有效格式在[日期和时间格式](http://www.php.net/manual/en/datetime.formats.php)中进行了说明。

考虑使用 DateTime 对象和[createFromFormat()](http://www.php.net/manual/en/datetime.createfromformat.php)方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T21:05:57.630

```
print strtotime('03 Nov 2012 20:17:12'); 
```

**输出：** `1351988232`

这完美地工作。您应该删除`0000`和日期`(Sat)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T21:11:33.090

我知道您想添加时区校正。但是时区需要一个标志。

```
print strtotime('Sat, 03 Nov 2012 20:17:12 +0000'); 
```

这将起作用

# php - PHP数组 - 在其他值已知时检索一个值

> ID：13213464
> 
> 赞同：0
> 
> 时间：2012-11-03T21:02:13.007
> 
> 标签：php, arrays

我有以下结构的数组：

```
$some_array = array(
    array(
        'font' => 'Arial',
        'label' => 'Arial'
    ),
    array(
        'font' => 'PT+Sans:400',
        'label' => 'PT Sans'
    )
); 
```

假设我只知道一个项目的“字体”值为“PT+Sans:400”，我需要检索该项目的“标签”值。我怎样才能比遍历子数组更容易呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:07:45.267

您需要遍历子数组。或者，如果您可以控制存储它的数据结构，请考虑使用哈希表（关联数组），然后您可以检查是否设置了特定键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T21:09:58.150

把事情简单化：

```
function findLabel($source, $font) 
{
    foreach ($source as $item) {
        if ($item['font'] == $font) {
            return $label;
        }
    }

    return null;    
} 
```

用法：

```
$label = findLabel($some_array, 'PT+Sans:400'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T21:24:08.720

由于您已经在使用`foreach`您只想要其他替代品，那么您可以考虑这个解决方案

**解决方案 1**

您可以尝试使用过滤您的搜索`array_filter`

```
$search = "PT+Sans:400" ;
$array = array_filter($array,function($v)use($search){ return $v['font'] == $search;});
var_dump($array); // returns all found array 
```

输出

```
array
  1 => 
    array
      'font' => string 'PT+Sans:400' (length=11)
      'label' => string 'PT Sans' (length=7) 
```

如果您只需要标签

```
$find = array_shift($array); // take only the first
print($find['label']);  // output the label 
```

输出

```
PT Sans 
```

**解决方案 2**

如果您对返回数组不感兴趣，而您想要的只是标签，那么您应该考虑`array_reduce`

```
$search = "PT+Sans:400" ;
$results = array_reduce($array,function($a,$b)use($search){ return $b['font'] == $search ? $b['label'] : null ; });
print($results); 
```

输出

```
PT Sans 
```

# python - 递归混合字符串

> ID：13213465
> 
> 赞同：1
> 
> 时间：2012-11-03T21:02:25.713
> 
> 标签：python, recursion

我试图递归地将两个字符串链接在一起，但没有得到预期的结果：

对于两个字符串`"abcd"`和`"xyz"`- 预期的输出应该是`"axbyczd"`：

```
def strr(str1, str2):

    def recstr(str1, str2, prn):
        if str1 == '':
            return str2
        if str2 == '':
            return str1
        else:
            return prn + recstr(str1[:len(str1)-len(prn)],str2[:len(str2)-len(prn)],prn)
    return recstr(str1, str2, '')

print strr("abcdef","12345") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T21:05:31.767

当任一字符串中的字符用完时，您将返回另一个字符串而不将其连接到正在运行的累加器。看看我在空的时候做`s1`什么。`s2`

此外，在您的递归情况下，您有一个非常复杂的`s1`and切片`s2`。你真的应该只需要切片`s1[1:]`和`s2[1:]`

这应该这样做

```
def recstr(s1, s2, answer=''):
    if not s1:
        return answer+s2
    if not s2:
        return answer+s1
    return recstr(s1[1:], s2[1:], answer+s1[0]+s2[0])

In [15]: s1,s2 = 'abcd', 'xyz'

In [16]: print recstr(s1,s2)
axbyczd 
```

当然，更简洁的方法是使用[`itertools.izip_longest`](http://docs.python.org/2/library/itertools.html)and [`itertools.chain.from_iterable`](http://docs.python.org/2/library/itertools.html#itertools.chain.from_iterable)：

```
In [23]: zips = itertools.izip_longest(s1,s2, fillvalue='')

In [24]: ''.join(itertools.chain.from_iterable(zips))
Out[24]: 'axbyczd' 
```

[感谢@AshwiniChaudhary 指出`fillvalue`参数`izip_longest`]

希望这可以帮助

# postgresql - Postgis 使用包含和计数，即使答案为 0

> ID：13213466
> 
> 赞同：1
> 
> 时间：2012-11-03T21:02:27.970
> 
> 标签：postgresql, postgis

我的计数功能有问题...我想隔离位于 G10 多边形旁边的所有多边形，并且我想计算我的多边形（社区）中的点（地铁站）的数量，但我想收到答案，即使那个答案必须为 0。

我使用了以下语句：

```
select a2.name, count(m.geom) 
from arr a1, arr a2, metro m 
where n1.code='G10' 
and ((st_touches(a1.geom, a2.geom)) or
(st_overlaps(a1.geom, a2.geom))) 
and ST_Contains(a2.geom, s.geom)
group by a2.name, m.geom 
```

我知道问题`and ST_Contains(a2.geom, s.geom)`出在 where 子句的部分，但我现在不知道如何解决它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:12:02.093

使用显式`LEFT JOIN`：

```
SELECT  a1.name, COUNT(a2.code)
FROM    arr a1
LEFT JOIN
        arr a2
ON      ST_Intersects(a1.geom, a2.geom)
WHERE   a1.code = 'G10' 
```

我不包括其他表，因为您在原始查询中有明显的拼写错误，并且不清楚它们应该如何连接

# css - 强制表格单元格宽度/高度适合 div

> ID：13213472
> 
> 赞同：2
> 
> 时间：2012-11-03T21:03:41.117
> 
> 标签：css, html-table, size

我有一个图像网格（7x7 表）。我想将该表格/网格自动调整到一个流体大小的 div 中，该 div 可以根据显示器显示大小进行调整。我希望表格不要超过 div 的边界，既不超过宽度也不超过高度，而是占据最大面积，同时保持每个表格单元格与所有其他表格单元格相同的高度和宽度。

我知道这可能很难从我的描述中想象出来。基本上，所有表格单元格都需要被强制为精确的正方形（相同的宽度/高度），但该尺寸可能会根据显示尺寸的大小而增长或缩小。并且所有表格都不应超出该 div 的可见屏幕区域。

很容易强制 width: 100% .. 但是高度可能太大。我想在 css 中执行此操作，但我对任何可行的方法持开放态度。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:45:54.237

因此，您希望在表格网格中有图像，并让它响应窗口大小调整以始终适合。

标记（在此示例中，我的网格是 3x3，但对于 7x7 的工作方式相同，只需添加更多数据单元格和行）。

```
<div id="wrapper">
    <table>
        <tr>
            <td><img src="http://farm7.staticflickr.com/6115/6249486517_884b897248_o.jpg"></td>
            <td><img src="http://farm7.staticflickr.com/6115/6249486517_884b897248_o.jpg"></td>
            <td><img src="http://farm7.staticflickr.com/6115/6249486517_884b897248_o.jpg"></td>
        </tr>
        <tr>
            <td><img src="http://farm7.staticflickr.com/6115/6249486517_884b897248_o.jpg"></td>
            <td><img src="http://farm7.staticflickr.com/6115/6249486517_884b897248_o.jpg"></td>
           <td><img src="http://farm7.staticflickr.com/6115/6249486517_884b897248_o.jpg"></td>
        </tr>
        <tr>
            <td><img src="http://farm7.staticflickr.com/6115/6249486517_884b897248_o.jpg"></td>
            <td><img src="http://farm7.staticflickr.com/6115/6249486517_884b897248_o.jpg"></td>
            <td><img src="http://farm7.staticflickr.com/6115/6249486517_884b897248_o.jpg"></td>
        </tr>
    </table>
</div> 
```

CSS：

```
#wrapper{width: 100%;}

#wrapper table {width: 100%;}

#wrapper table tr td {width: 33%;}

#wrapper table tr td img {width: 100%;} 
```

使用来自 Flickr 的一些随机图像。

希望能帮助到你。

# php - 为什么 php 的 fetch(PDO::FETCH_ASSOC) 只抓取我表的第一列？

> ID：13213473
> 
> 赞同：0
> 
> 时间：2012-11-03T21:03:58.450
> 
> 标签：php, arrays, pdo

以下代码是我的一个类的一部分：

```
 $stmt = $this->dbh->prepare("SELECT t_id FROM checkOut WHERE t_id = :param1");             
        $stmt->bindParam(':param1', $this->numberIn);
        $stmt->execute();
        $result = $stmt->fetch(PDO::FETCH_ASSOC);
        var_dump($result);
        $this->p_id = $result['p_id']; 
```

我最初的问题是 php 声明这`p_id`是一个未定义的索引。为了弄清楚发生了什么，我投入`var_dump`查看阵列中的内容。由于某种原因，它只包含一个值，`4`它对应于第一列的名称，`t_id`. 我的 MySQL 表有四列，我需要所有四列都出现在数组中。为什么我的代码只会获取第一列的值？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:05:40.990

您只获取一个字段：

```
SELECT t_id FROM checkOut ...
       ^^^^ 
```

如果你想要 p_id，那么你也必须获取它：

```
SELECT p_id, t_id FROM checkOut 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T21:05:22.943

你用`SELECT t_id`. 改为使用`SELECT *`。

# php - 从POST发送加载带有扩展数据的文件 - php as3

> ID：13213474
> 
> 赞同：0
> 
> 时间：2012-11-03T21:04:11.480
> 
> 标签：php, actionscript-3, variables, urlloader

我正在尝试从旧的 as2 教程中解决如何为名片修改 as3/php eCard 系统的脚本，但我在任何地方都找不到有关如何执行以下操作的参考：

**AS2**：

```
loadVariablesNum ("http://www.theSite.com/Cards/bCard/"+BcardText+".txt", 0); 
```

**AS3**：

```
// setup URLLoader
var loader:URLLoader = new URLLoader;
loader.dataFormat = URLLoaderDataFormat.VARIABLES;

// event listener for function when loaded
loader.addEventListener(Event.COMPLETE, varsLoaded);

// file URLRequest
loader.load(new URLRequest("http://www.theSite.com/Cards/bCard/"+BcardText+".txt"));

// set the variables from the data.txt file
function varsLoaded (event:Event):void {
    //Load Data
cName.text = loader.data.cName;
cDescription.text = loader.data.cDescription;
} 
```

有了这个，它会弹出以下错误消息：

*   打开 URL 'http://www.theSite.com/Cards/bCard/undefined.txt' 时出错 错误：错误 #2101：传递给 URLVariables.decode() 的字符串必须是包含名称/值对的 URL 编码查询字符串. 在 Flash.net::URLVariables/decode() 的 Error$/throwError() 在 flash.net::URLVariables() 在 flash.net::URLLoader/onComplete()

我无法弄清楚您在哪里或如何定义`+BcardText+`它以将其拉入。

任何帮助将不胜感激。

我不确定如果我什至接近 as2，这似乎是加载它的合乎逻辑的方法，但我之前没有处理过具有参数的外部文件。

如果有人可以提供帮助，请提前致谢！

**新装载机 - 已修复！！！**

```
var loader:URLLoader = new URLLoader();   
var request:URLRequest = new  URLRequest("http://www.theSite.com/Cards/bCard/"+BcardText+".txt");           
loader.load(request);

loader.addEventListener(Event.COMPLETE, completeHandler);
loader.addEventListener(IOErrorEvent.IO_ERROR, loaderIOErrorHandler);
loader.dataFormat = URLLoaderDataFormat.VARIABLES;

function loaderIOErrorHandler(event:IOErrorEvent):void{
trace("ioErrorHandler: " + event);
}

// set the variables from the .txt file
function completeHandler (event:Event):void {

//trace("Content: " + loader.data);

this.Variable1.text = loader.data.Variable1; //Whatever dataField1 you saved as
this.Variable2.text = loader.data.Variable2; //Whatever dataField2 you saved as
} 
```

然后，您只需在提交之前设置 FlashVars 以区分加载程序中的**+BcardText**变量！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:12:29.860

```
var loader:URLLoader = new URLLoader();   
var request:URLRequest = new  URLRequest("http://www.theSite.com/Cards/bCard/"+BcardText+".txt");           
loader.load(request);

loader.addEventListener(Event.COMPLETE, completeHandler);
loader.addEventListener(IOErrorEvent.IO_ERROR, loaderIOErrorHandler);
loader.dataFormat = URLLoaderDataFormat.VARIABLES;

function loaderIOErrorHandler(event:IOErrorEvent):void{
trace("ioErrorHandler: " + event);
}

// set the variables from the .txt file
function completeHandler (event:Event):void {

//trace("Content: " + loader.data);

this.Variable1.text = loader.data.Variable1; //Whatever dataField1 you saved as
this.Variable2.text = loader.data.Variable2; //Whatever dataField2 you saved as
} 
```

然后，您只需在提交之前设置 FlashVars 以区分加载程序中的 +BcardText 变量！

已经在互联网上搜索并半疯了，但最后还是高兴地说我把它弄坏了......！

非常感谢你们帮助我指出正确的方向。@Jason @Eugen

θ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:10:30.220

BcardText 是在 as2 项目中定义的变量。环顾四周（也许在以前的帧上？），你应该找到它被声明的地方。它看起来像一个代表卡的 ID。所以每张卡都有一个唯一的文件 12345.txt、09876.txt 等。

# c++ - 在 C++ 类的方法中避免代码重复？

> ID：13213476
> 
> 赞同：1
> 
> 时间：2012-11-03T21:04:24.427
> 
> 标签：c++, methods, repeat

想象一个正在做以下事情的类

```
class AClass
{
    AClass() : mode(0) {}
    void a()
    {
        if (mode != 0) throw ("Error mode should be 0");
        // we pass the test, so now do something
        ...
        mode = 1;
    }
    void b()
    {
        if (mode != 1) throw("Error mode should be 1");
        // we pass the test, so now do something
        ...
    }
    int mode;
}; 
```

该类包含许多方法（容易超过 20 个），对于这些方法中的每一个，我们都需要检查 mode 的值，这显然是很多代码重复。此外，我们可以识别两类方法，如果 mode !=0 会抛出错误，如果 mode != 1 会抛出错误。是否有可能将这些方法分为两类（类别 A =如果 mode != 0) 抛出错误的方法和如果 mode != 1) 抛出错误的方法的类别 B？

**编辑**：查看当前答案，我意识到我提出问题的方式，问题可能还不够清楚。我要避免的是必须在类的每个方法中调用一个函数。无论我们是在方法的开头写代码还是把这段代码放在一个函数中并调用这个函数都不是问题。问题是我们是否可以一起避免这一切。是否有一种技术可以帮助**根据某些上下文自动检查对类的方法的调用是否有效**。

AClass 实际上是我项目上下文中的一个 API。a()、b() 等是程序员可以调用的一些函数，如果她/他想使用 API，但是其中一些方法只能以某种精确的顺序调用。例如，您可以在代码中看到 a() 设置 mode = 1。因此程序员可以执行以下操作：

```
a(); // mode = 0 so it's good
b(); // mode = 1 so it's good 
```

但是这段代码需要失败（它当然会编译，但在执行时我需要抛出一个错误，指出调用 b() 的上下文是错误的。

```
b(); // mode 0 so it won't work
a(); // it will compile but throw an exception 
```

我试图看看是否有任何模式可以做到这一点，但根本找不到任何东西。这对我来说似乎是不可能的，我相信唯一的选择就是编写必要的代码。有人可以提出一些建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T21:29:57.877

只需添加私有成员函数：

```
void assert_mode_0() {
    assert_mode(0);
}

void assert_mode_1() {
    assert_mode(1);
}

void assert_mode(int m) {
    if (mode != m)
        throw msg[m];
} 
```

当然，有一个合适的定义`msg`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T21:31:54.250

除了在专用方法中实现检查（一个很好的建议），您还可以考虑将行为分解`AClass`为两个不同的类，或者将特定部分委托给一对新的类。`mode`如果实例不变（如示例中所示），这似乎特别合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T11:29:19.493

在进一步研究了这个问题之后，似乎最有帮助的答案是（尼克）：

> 尝试查看面向方面的软件开发 en.wikipedia.org/wiki/Aspect-oriented_software_development – Nick

Wikipedia 页面不易阅读，也没有提供 C++ 示例，因此起初它非常抽象，但如果您搜索 Aspect Oriented Programming and C++，您会找到示例链接。

它背后的想法（它只是一个非常快速的总结）是找到一种将“服务”或“功能”添加到类的方法。这些服务可以通过使用模板在编译时添加。这是我直观地尝试解决我的问题的尝试，我很高兴看到这种技术已经存在了很多年。

这个文档是一个很好的参考：

> 面向方面的编程和 C++，作者 Christopher Diggins，2004 年 8 月 1 日。

我发现这个带有示例的链接有助于理解这个概念：

[Calum Grant 使用生成式编程实现方面。](http://calumgrant.net/aspects/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T21:18:15.667

好吧，我想最简单的解决方案是定义一个宏或一些像这样的内联函数：

```
#define checkErrorMode0(x) \
    if ((x) != 0) throw ("Error mode should be 0");
#define checkErrorMode1(x) \
    if ((x) != 1) throw ("Error mode should be 1");

// or, probably within your class
inline void checkErrorMode0(int x){
    if ( x != 0 ) throw ("Error mode should be 0");
}

inline void checkErrorMode1(int x){
    if ( x != 1 ) throw ("Error mode should be 1");
} 
```

因此，您可以在需要它们的函数中简单地调用其中一种方法。

但很可能有一个更优雅的解决方法来解决您想要做的事情。

# .htaccess - 为子目录配置 .htaccess

> ID：13213478
> 
> 赞同：0
> 
> 时间：2012-11-03T21:04:27.747
> 
> 标签：.htaccess

您好，我对配置了解不多`.htaccess`，但我想限制对我的 Web 服务器上的 php 文件的访问，并且我只想*`index.php`*访问参数。

我的文件位于子文件夹中，例如：*`www.mydomain.com/sub/index.php`*. *`index.php`*我希望能够在子文件夹、css 文件和 js 文件中打开它。

这是我到目前为止的配置：

```
 Order Deny,Allow
  Deny from all
  Allow from 127.0.0.1

  <Files /index.php>
    Order Allow,Deny
    Allow from all
  </Files>
  <FilesMatch "*\.(css|js)$">
    Order Allow,Deny
    Allow from all
  </FilesMatch> 
```

我试图做类似的事情，`<Files sub/index.php>`但每次它限制子文件夹中的所有 php 文件并且*`www.mydomain.com/index.php`*工作正常。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:20:31.597

您可以将除需要通过 http（index.php、css、图像等）访问的文件之外的所有文件从 DocumentRoot 目录移出到上层，因此目录布局如下所示：

```
/lib
/files
/html
   /index.php
   /css/
   /images/ 
```

其中 /html 是您的 DocumentRoot。

在这种情况下，您将不需要 .htaccess 或 VirtualHost 配置中的任何其他限制性规则/

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T21:15:52.953

htaccess 可能不是阻止直接访问某些 PHP 文件的最佳选择。相反，创建一个访问值并将其设置为您希望定向访问的页面中的某个值，否则不要在其他页面中设置它。

```
$access = 'some value';
if(empty($access)) { header("location:index.php"); die();} 
```

这样其他 php 文件只能通过 include 或 require 访问。希望有帮助。

# safari - Safari 6：在 上，当 box-shadow spread 设置为 0 并且设置了 background-color 值时，根本不会渲染 box-shadow

> ID：13213482
> 
> 赞同：0
> 
> 时间：2012-11-03T21:05:02.520
> 
> 标签：safari, css

这看起来像是最近引入的一个在 iOS6 和 Safari 6 上都出现的错误。还有其他人被这个咬过吗？

什么可能是解决办法？如果我们真的需要那个 box shadow 的 spread=0 怎么办？现在我们可以通过将 spread 值设置为`-1px`or来渲染阴影`1px`

小提琴：http : [//jsfiddle.net/uCseS/2/](http://jsfiddle.net/uCseS/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:27:17.457

这似乎确实是一个错误。但是，如果您使用**rgba**表示法作为背景颜色，阴影会重新出现。

```
img{
 background-color: rgba(255,255,0,0);
 box-shadow: #000 2px 2px 10px 0px;
 -webkit-transform: translate3d(2px, 5px, 0px); 
} ​ 
```

[http://jsfiddle.net/willemvb/KuhQp/](http://jsfiddle.net/willemvb/KuhQp/)

# testing - 模拟黑莓电话

> ID：13213491
> 
> 赞同：0
> 
> 时间：2012-11-03T21:06:51.500
> 
> 标签：testing, blackberry, java-me

我正在开发一个黑莓应用程序，其中我有一个电话监听器，可以检查来电、掉线等内容，并根据此执行一些操作。我想测试一切是否正常工作，所以我正在寻找模拟的方法，例如来电或掉线。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T11:22:45.040

I would write unit tests with `junit` and `mockito`:

```
public class CallRegistrator implements PhoneListener {
   private final CallLogPersistence persistence;
   public CallRegistrator (CallLogPersistence persistence) {
      this.persistence= persistence;
   }
   ...
}

public class CallRegistratorTest {
   CallLogPersistence  persistence = mock(CallLogPersistence.class);
   CallRegistrator registrator;

   @Before
   public void setUp() {
      registrator = new CallRegistrator(persistence);
   }

   @Test
   public void whenCallFinishedItIsRecoreded() {
      int id = 1;
      registrator.callDisconnected(1);

      verify(persitence).saveFinishedCall(id); 
   }
} 
```

There are also possibility to have automated acceptance test with simulator. It has possibility to simulate incoming call.

# java - Java 动态集合对象

> ID：13213492
> 
> 赞同：0
> 
> 时间：2012-11-03T21:06:52.373
> 
> 标签：java, arrays

对于我们的编程任务，我们必须向用户询问区域名称和该区域的统计信息（整数），我们必须将整数与区域名称相关联，并且我们必须能够创建多个区域，这就是我到目前为止所得到的不知道下一步该做什么我感到困惑的是我们必须调用用户创建的所有区域区域 A、区域 B、区域 C，然后用户将从列表中选择一个区域假设区域 A 然后我们必须打印与区域 A 关联的整数示例区域 A 包含整数 {12,3,6,8]

```
 ArrayList<String> regions = new ArrayList<String>();

            System.out.print(" Enter Region to Add to List: ");
            regionName = keyb.nextLine();
            keyb.nextLine();
            regions.add(regionName);
            System.out.printf(" Enter Data for %s: " ,regionName);
            regionData = keyb.nextLine();
            String[] reg_Values = regionData.split(" ");
            double[] reg_DoubleValues = new double[reg_Values.length];
            double num;
            for (int i=0; i<reg_Values.length; i++)
            {
                num = Double.parseDouble( reg_Values[i] );
                reg_DoubleValues[i] = num;
                System.out.print(reg_DoubleValues[i]);

            }
            System.out.println(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:09:43.057

您应该考虑创建一个`Region`类来保存每个特定区域的数据。这将使代码*更*易于管理。

```
class Region {
    String name;
    String[] otherInfo;
    double[] otherOtherInfo;

    ...
} 
```

`List`然后，您将拥有一个`Region`实例，您可以在用户输入有关每个区域的信息时创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:09:47.713

听起来您需要一个 Hashmap 或键值对集合。前提是这些地区是独一无二的。

```
HashMap<String, List<Integer>> 
```

**或者**

```
HashMap<Region,List<Integer>> 
```

或者

创建一个`Region`类，并具有`List<Integer>`.

像这样：

```
public class Region
{
  List<Integer> integers;
  String regionName;
  ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:10:18.897

我认为您最好使用`Map/HashMap`以下方式保存区域和统计信息：

```
 Map<String, double[]> regionStatisticsMaps = new HashMap<String, double[]>(); 
```

现在您可以将值设置为：

```
 regionStatisticsMaps(regionName, reg_DoubleValues); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T21:11:31.520

你需要一个**键值对**。在**java API**术语中，您需要一个**Map**。

```
 Map<String, List<Integer>> map = new HashMap<String, Integer>(); 
```

请注意，如果您需要插入顺序，请使用 LinkedHashMap 而不是 HashMap，因为 HashMap 不维护任何顺序。

```
 Map<String, List<Integer>> map = new LinkedHashMap<String,Integer>(); 
```

# http - REST 设计：过滤服务使用什么动词和资源名称

> ID：13213493
> 
> 赞同：4
> 
> 时间：2012-11-03T21:07:02.160
> 
> 标签：http, rest, webserver, restful-architecture

我正在开发一个清理/过滤服务，它有一个方法可以接收在 xml 中序列化的对象列表，并应用一些过滤规则来返回这些对象的子集。

1.  在 REST-ful 服务中，我应该为这种方法使用什么动词？我认为 GET 是一个自然的选择，但我必须将序列化的 XML 放在请求的正文中，这有效但感觉不正确。其他动词似乎不符合语义。

2.  定义该服务接口的好方法是什么？命名资源 /Cleanup 或 /Filter 看起来很奇怪，主要是因为在我在网上看到的示例中，它始终是一个名称，而不是用于资源名称的动词。

3.  我是否认为 REST 服务更适合 CRUD 操作，并且您开始在这种服务的情况下改变规则？如果是，那么我是否做出了错误的架构选择。

4.  为了简单起见，我已经推动以 REST-ful 样式（而不是 SOAP）开发此服务，但这种尴尬的情况经常发生，让我觉得我错过了一些东西。要么选择不应该使用的 REST，要么可能会过度思考一些无关紧要的东西？在那种情况下，真正重要的是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T22:42:06.003

REST 就是按照设计的方式使用 HTTP。要考虑 RESTful（标题是 REST 设计 :)：

*   URL 应该是资源的永久链接（缓存优势、存储/共享端点等......）
*   因为它们是资源的永久链接，所以 URL 中有动词暗示您走错了路径（过滤器是动词）。
*   资源集合可以是端点 /foos。
*   如果要过滤资源集合，请考虑查询字符串参数，例如 ?filter= 或类似 ?ids=1,2,3,4,5 的东西。
*   GET 不应更改资源。请注意，“清理”意味着某些内容将被删除，因此在执行 GET 时要小心更改资源。REST 说 GET 不应该改变资源。想象一下缓存服务器将您的清理请求作为 GET 并返回 OK，因为 t 已缓存。缓存服务器知道不缓存 POST、DELETE 等...（这就是 HTTP 的设计方式）。
*   不要排除多次调用 - 例如，您可能会执行 get 过滤并获取一组要清理的资源，然后可能会跟随许多或一个 DELETE 动词调用来进行清理。
*   有时有一个时间资源，比如事务或“工作”，可以像清理工作一样工作。不要排除对包含要清理的项目的主体的资源的 POST 并返回作业 ID。然后，您可以查询 jobid 以获取清理进度或状态。

很难给出准确的指导，因为问题不明确，但希望上面的 RESTful 原则指导和想法能让您走上正轨。如果您澄清确切的调用，我会尝试并推荐 API。

所以，假设你想清理重复的 foos。

[GET] /foos/duplicates（或 /foos?filter=duplicates）

返回具有重复标识的 foo 的主体。假设返回 1,2,5（可能是名称）。

然后你可以发出：

[DELETE] /foos 的主体是一个包含 1、2、5（或名称，如果唯一）的数组。删除调用是被动的，因此即使根据 REST 原则缓存 GET 调用也没问题。

不走 REST 路由（例如 POX 或 JOSN RPC over http）也是可能且有效的，但此时意识到它不是 REST。这很好，但你没有得到菲尔丁论文中描述的 REST 的好处。

[http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm](http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm)

另外，请阅读：

[http://blog.steveklabnik.com/posts/2011-07-03-nobody-understands-rest-or-http](http://blog.steveklabnik.com/posts/2011-07-03-nobody-understands-rest-or-http)

编辑：

在阅读了您澄清的评论后，您将向服务器发送一组对象（不是持久的服务器端）并返回过滤掉欺骗的子集（如服务器端辅助函数），一些选项是：

1.  如果可能的话，做这个客户端/浏览器端 - 为什么要使用网络往返来过滤掉收集中的欺骗？
2.  如果由于某种原因只有服务器具有特定的知识/数据来确定两个项目在功能上是等效的（即使数据不完全相同），那么请考虑将数据集发布到服务器，并使用包含唯一/过滤集的响应正文。即使服务器没有持久化该集合，它也会落入一个“临时”对象或集合中，并且服务器正在修改它。从概念上讲，它不是服务器资源的 GET，并且缓存在这种情况下没有任何好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T21:26:44.820

最后一个问题：真正重要的是以一种方式完成工作

*   正确的
*   尽可能简单易用
*   由未来的程序员轻松维护（可能包括您自己）

REST 非常适合对资源进行操作，其中每个 URL 都匹配一些可以操作的对象。它不太适合其他用途，但**这些是比实际规则更多的指导方针**。其他人指出了[关于 REST 的原始论文](http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm)，但值得记住的是，很少有实现是纯粹的。

如果您有多个 URL 执行这些转换类型的功能，请考虑将它们放在自己的特殊 URL 空间中，例如`/api/filter`and`/api/transliterate`等。这将帮助用户和维护者知道某些 URL 不是 REST，而是更像远程过程调用。将数据发布到这些 URL 会导致您返回某种数据。

如果你被特定的名字卡住了，你应该列出一个候选人名单，喝几杯啤酒，然后从名单中选择一个。当我陷入细节问题时，我就是这样做的。

SOAP 是一个简洁的协议并且有它的用途，但它往往非常繁重。与使用任何特定技术相比，良好的文档和一致性对于您萌芽的 API 可能更重要。

# python - “取决于四舍五入”到底是什么意思？

> ID：13213496
> 
> 赞同：7
> 
> 时间：2012-11-03T21:07:30.897
> 
> 标签：python, random, floating-point, rounding

关于`random.uniform`，文档字符串说：

> 根据四舍五入，获取 [a, b) 或 [a, b] 范围内的随机数。

但我不知道“取决于四舍五入”到底是什么意思。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T21:10:43.340

当前的[文档为`random.uniform()`](http://docs.python.org/2/library/random.html#random.uniform)：

> 返回一个随机浮点数，`N`例如`a <= N <= b`for`a <= b`和`b <= N <= a`for `b < a`。
> 
> 端点值`b`可能包含在范围内，也可能不包含在范围内，具体取决于等式中的浮点舍入`a + (b-a) * random()`。

计算机上的浮点运算在精度上是有限的，由这种不精度引起的舍入误差可能会导致`b`不包含在用于`uniform()`返回的随机值的全部值范围内。

[`random.random()`](http://docs.python.org/2/library/random.html#random.random)返回一个介于 0.0（包括）和 1.0（不包括）之间的值。有 和 的值`a`，`b`其中总和的浮点计算`a + (b-a) * (1.0 - epsilon/2)`不等于`b`，但会比*小*`b`一点，而对于其他组合，总和*确实*等于`b`。`epsilon`是您平台上浮点数的最小精度（请参阅 参考资料[`sys.float_info`](http://docs.python.org/2/library/sys.html#sys.float_info)），并且可以返回`1.0 - epsilon/2`最大值。`random.random()`

如果您对计算机上的浮点运算不精确的*细节*感兴趣，*我可以推荐以下两篇文章：*

*   [浮点指南](http://floating-point-gui.de/basic/)
*   [每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T21:29:40.310

`rounding`是：如果我向上舍入 3.45，我将得到 4。但如果我向下舍入，我将得到 3。所以在这种情况下，来自 [ 或 ] 的范围值将根据轮次而变化

# ruby - 多个sidekiq实例可以处理同一个队列吗

> ID：13213499
> 
> 赞同：23
> 
> 时间：2012-11-03T21:07:56.210
> 
> 标签：ruby, sidekiq

我不熟悉 Sidekiq 的内部结构，我想知道是否可以启动多个具有相同配置的 Sidekiq 实例（处理相同的队列）。

是否有可能 2 个或更多 Sidekiq 实例将处理来自队列的相同消息？

更新：
在多台机器上运行 Sidekiq 时，我需要知道是否可能存在冲突

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-04T02:35:28.187

是的，sidekiq 绝对可以针对同一个队列运行多个进程。Redis 只会将消息发送给随机进程。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-11T22:51:24.873

不，我已经在不同的机器上运行 Sidekiqs，没有任何问题。

每个 Sidekiq 都从同一个 redis 服务器读取，redis 在多线程、分布式场景下非常健壮。

此外，如果您查看 Sidekiq 的 Web 界面，它将显示所有机器上的所有工作人员，因为所有工作人员都登录到同一个 redis 服务器。

所以不，没有问题。

# android - Android - Phonegap - 发生网络错误

> ID：13213504
> 
> 赞同：3
> 
> 时间：2012-11-03T21:08:25.093
> 
> 标签：android, cordova

**我的环境：**
Eclipse SDK 4.2.1
Cordova 2.2.0 (Phonegap)
目标平台：Android 4.0.3 (API Level 15)

我尝试过搜索许多论坛（包括这个），但似乎无法找到解决此问题的方法。

首先，目录中页面之间的链接*`assets/www`*可以正常工作。但是，在其中一页上，我有：

```
<a href="http://www.google.com">Google</a> 
```

我也尝试过 `rel="external"`作为属性，但结果是一样的。

我已根据说明在 Android 白名单中指定了 google.com，方法是添加：

```
<access origin="http://google.com" subdomains="true" /> 
```

到 res/xml/config.xml 文件。

点击上面链接的结果是：

> 应用程序错误
> 发生网络错误。(http://www.google.com/)

应用程序崩溃。

我在为 API 级别 15 设置的 AVD 管理器（模拟器）和功能设备（带有 Android 4.0.3 的 HTC One X）上都得到了结果。两者都可以通过其他方式访问 Internet。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:23:14.637

> D/Cordova（560）：onPageFinished（文件：///android_asset/www/index.html）D/chromium（560）：未知铬错误：-400 D/DroidGap（560）：onMessage（onPageStarted，http:// www.google.com/) D/Cordova (560): CordovaWebViewClient.onReceivedError: 错误代码=-1 描述=发生网络错误。URL=http://www.google.com/ D/DroidGap(560): onMessage(onReceivedError,{"errorCode":-1,"url":"http://www.google.com/","description ":"发生网络错误。"}) D/DroidGap(560): onMessage(onPageStarted,http://www.google.com/) D/Cordova (560): onPageFinished(http://www.google. com/) D/DroidGap(560): onMessage(onNativeReady,null) D/DroidGap(560): onMessage(onPageFinished,http://www.google.com/) D/SoftKeyboardDetect(560): 忽略此事件 D/科尔多瓦（560）：

我见过的唯一一次 -400 错误是缺少 Internet 权限时：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T09:53:34.510

您需要固定的白名单吗？

我通常会很好：

```
<access origin="*" /> 
```

问题可能是 Google 正在转发到另一个端口 (https/443)，因此子域规范无济于事。

或者您可以在不指定协议的情况下尝试：

```
<access origin="google.com" subdomains="true" /> 
```

或尝试使用[此处描述](https://build.phonegap.com/docs/config-xml)的通配符：

```
<access origin="*google.com*" /> 
```

# c# - 在 ASP.NET MVC 3 中对控制器进行单元测试

> ID：13213507
> 
> 赞同：0
> 
> 时间：2012-11-03T21:08:38.673
> 
> 标签：c#, .net, asp.net-mvc-3, unit-testing, controller

```
public Double Invert(Double? id)
{
    return (Double)(id / id);
} 
```

我已经为这个测试做了这个但是失败了请任何人都可以帮助这个因为刚开始单元测试

```
/* HINT:  Remember that you are passing Invert an *integer* so
 * the value of 1 / input is calculated using integer arithmetic. 
 * */
//Arrange
var controller = new UrlParameterController();
int input = 7;
Double expected = 0.143d;
Double marginOfError = 0.001d;

//Act
var result = controller.Invert(input);

//Assert
Assert.AreEqual(expected, result, marginOfError);

/* NOTE  This time we use a different Assert.AreEqual() method, which
 * checks whether or not two Double values are within a specified
 * distance of one another.  This is a good way to deal with rounding
 * errors from floating point arithmetic.  Without the marginOfError 
 * parameter the assertion fails.
 * */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T22:59:06.573

It seems you want to test your controller to "invert" a value. It probably would help *if you weren't dividing a value by itself.*

The only things that can happen are:

1.  you get a result of "1" (hint, hint)
2.  you get "NaN" ( 0/0 )
3.  you get an cast error by passing in null.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:54:17.317

通过您的代码示例，我认为您正在寻找的是控制器中的逆方法。

```
public Double Invert(Double? id)
{
    //replace id with 1 -- (1/id) gives you an inverse of id.  
    return (Double)(1 / id);
} 
```

# sevenzipsharp - SevenZipSharp：正在中止压缩

> ID：13213511
> 
> 赞同：1
> 
> 时间：2012-11-03T21:09:23.767
> 
> 标签：sevenzipsharp

使用 SevenZipSharp 包装器是否有人成功中止正在进行的压缩？我用了：

```
FileCompressionStarted(ByVal sender As Object, ByVal e As SevenZip.FileNameEventArgs) 
```

查看一些活动并尝试：

```
e.cancel = true 
```

但什么也没发生。压缩继续工作，直到所有文件都被打包。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T08:16:30.773

已在其他论坛解决和解释，请看链接，谢谢大家

[http://www.vbforums.com/showthread.php?697661-RESOLVED-SevenZipSharp-aborting-compression&p=4272389#post4272389](http://www.vbforums.com/showthread.php?697661-RESOLVED-SevenZipSharp-aborting-compression&p=4272389#post4272389)

PS。只是在这里有解决方案，以防万一有人需要

**e.cancel**在库中没有得到很好的处理，因为（如我所料）当我设置**e.cancel = true**一次时，库**可能无法捕获此请求**。我不确定这是sevenzipsharp.dll 问题还是7z.dll，但是在发布的代码中，当多次点击我的Abort 按钮时，最后，库中止了压缩！！！

所以实现需要：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    abort = True
    console.addLine("Abort requested...")
End Sub

Private Sub fFileCompressionStarted(ByVal sender As Object, ByVal e As SevenZip.FileNameEventArgs)

    Dim s As String = ""
    If abort Then
        e.Cancel = True
        s = " aborted"
    End If

    console.addLine("[CompressionStarted event] e.Filename = " + e.FileName + ", e.PercentDone = " + e.PercentDone.ToString + s)

End Sub

Public Sub fCompressionFinished(ByVal sender As Object, ByVal e As System.EventArgs)

    console.addLine("[CompressionFinished event]")
    abort = False
End Sub 
```

最好的问候，爱德华·戈拉，YO3HCV

# java - 建议 - XA、JTA 和 JMS - 使用 XA 从 JMS 读取并在事务中写入 DB

> ID：13213518
> 
> 赞同：1
> 
> 时间：2012-11-03T21:10:10.027
> 
> 标签：java, transactions, jms, jta, xa

在工作中，我被要求从 JMS 队列（实际上是具有类似接口的专有东西）中读取数据，并在同一个事务中写入数据库。例如，如果数据库插入失败，我应该从队列中回滚读取。

我对 Java 的经验不是很丰富，对 XA、JTA 或 JMS 的知识也不多。我正在尝试阅读所有内容，以便我充分了解这些技术以实现我的目标。

无论如何，我对这些事情之间的关系有点困惑。

1.  我相信 XA 驱动程序用于与数据库通信以管理分布式事务 - 但是 XA 驱动程序是否也可以与消息队列一起使用？

2.  我是使用 JTA 接口来管理允许我在数据库和队列之间运行事务的 XA 功能，还是必须直接使用一些 XA API？

3.  有谁知道我可以找到在两个组件之间执行事务的代码示例的位置（不一定是 JMS 队列和数据库，而是使用 XA 管理多个参与者的事务的任何东西）？

抱歉，如果这有点宽泛，我只是在寻找足够的指针，以便我可以指出正确的方向并知道要阅读什么。

# asp.net-mvc - ASP.NET MVC - 使用 WebSecurity 重新发送确认电子邮件？

> ID：13213520
> 
> 赞同：2
> 
> 时间：2012-11-03T21:10:15.477
> 
> 标签：asp.net-mvc

尝试使用 WebSecurity，如果我的用户丢失、需要重新发送或以其他方式更改他们的电子邮件，他们似乎无法通过 WebSecurity 类重置您的确认令牌。

如何在 Asp.NET MVC 中重置 WebSecurity 的确认令牌？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T04:13:55.853

WebSecurity 类型似乎不支持此功能。我被迫直接查询数据库。由于我使用的是 EF，因此我的代码如下所示：

```
 public string GetConfirmationToken(string email)
    {
        using (var db = new DbContext())
        {
            var tsqlQuery = string.Format("SELECT [ConfirmationToken] FROM [webpages_Membership] WHERE [UserId] IN (SELECT [UserId] FROM [UserProfile] WHERE [Email] LIKE '{0}')", email);
            return db.Database.SqlQuery<string>(tsqlQuery).First();
        }
    } 
```

# db2 - 是否可以将多个选择语句导出到一个平面文件中？

> ID：13213522
> 
> 赞同：0
> 
> 时间：2012-11-03T21:10:34.643
> 
> 标签：db2

例子：

EXPORT TO file.del of DEL 'select * from emp', 'select * from emp1'

这是行不通的。请指教。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:53:16.740

不，这是不可能的，因为文件被理解为存储单次选择的结果。

如果您的两个选择具有相同的列集，请尝试进行联合选择：

```
select * from emp union all select * from emp1. 
```

这样，您在导出中只有一个选择，但它将包含两个表。当列具有相同的精度时，如果可以完成联合，则查询将有效。

# python - md5到python中的整数位

> ID：13213538
> 
> 赞同：9
> 
> 时间：2012-11-03T21:12:33.703
> 
> 标签：python, hash

我正在尝试将 MD5 散列值转换为 python 中的位整数。有谁知道我会怎么做？

我目前经历了几个 ngram，对每个 ngram 应用哈希：

```
for sentence in range(0,len(doc)):
        for i in range(len(doc[sentence]) - 4 + 1):
            ngram = doc[sentence][i:i + 4]
            hashWord = hashlib.md5()
            hashWord.update(ngram) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-03T21:27:18.667

如果通过“成位”，例如，您的意思是位字符串，则类似于：

```
import hashlib

a = hashlib.md5('alsdkfjasldfjkasdlf')
b = a.hexdigest()
as_int = int(b, 16)
print bin(as_int)[2:]
# 11110000110010001100111010111001011010101011110001010000011010010010100111100 
```

# c# - 正则表达式：javascript函数中的参数

> ID：13213540
> 
> 赞同：-1
> 
> 时间：2012-11-03T21:12:54.257
> 
> 标签：c#, .net, regex

我对正则表达式不是很好，这就是为什么我需要你的帮助。

我有这种风格的 javascript 函数：

```
javascript:Ouvre('/ade/custom/modules/plannings/eventInfo.jsp',-1,-1,28890,-1,-1,-1,-1,-1,'','yes','no','no','yes','no','1','1','790','480') 
```

或者

```
javascript:Ouvre('/ade/custom/modules/plannings/eventInfo.jsp',-1,-1,28746,-1,-1,-1,-1,-1,'','yes','no','no','yes','no','1','1','790','480') 
```

我需要恢复一个参数（在这些情况下为 28890 或 28746）。如何使用正则表达式获得第四个参数？

如果可能的话，我想给它一个名字，然后在 C# 中轻松使用它。像这样 ：

```
var reg = new Regex("REGEX");
var match = reg.Match((string)value);
if (match.Success)
{
    return match.Groups["FourthArgument"].Value;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T21:15:28.183

我不会用`Regex`这个。

```
var theValue = jsString.split(',')[3]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T21:16:42.910

为什么不使用简单的

```
var number = value.Split(',')[3] 
```

如果您不熟悉正则表达式

# gwt - GWT 单元树 - 叶节点

> ID：13213541
> 
> 赞同：0
> 
> 时间：2012-11-03T21:13:02.543
> 
> 标签：gwt, gwt-rpc

我正在使用单元格树，但遇到了这个问题：
我通过 RPC 调用获取数据。我决定一个节点是否是叶子 - 基于我为其子节点获得的数据。例如——如果一个节点有一个叫做“foo”的儿子——那么这个节点应该是一个叶子。
我不知道如何使这个节点成为叶子而不是在树上显示它的子节点。（相反，我想在其他地方显示它们，单击节点时）
有可能吗？有人有想法吗？
请帮助我，我坚持了 2 天......
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T03:44:37.093

您可以覆盖 isLeaf() 方法以返回 true 或 false。

但是，从 UI 的角度来看，会有一个问题。在用户点击一个节点之前，你不知道它应该是一个节点还是一个叶子。这有点令人困惑，尽管我不止一次看到过这样的实现。如果您的树不是很大，请考虑一次加载所有数据，然后按照您想要的方式构建它 - 根据需要创建节点或叶子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T15:59:16.363

如果每个节点都有一个类型，您能否创建一些类型列表或映射，这些类型在您的 TreeViewModel impl 中不应该有子节点？

在一个 impl 中，我对所有类型都使用了元模型，但这不是必需的。

例如，

```
@Override
public boolean isLeaf(Object value) {
boolean result = true;
if (value == null) {
    result = false;  // assumes all root nodes have children
} else if (value instanceof NavNode) {
    final NavNode currentNode = (NavNode) value;
    final NodeType currentNodeType = NodeType.fromValue(currentNode.getType());
    if (currentNode.hasChildren() || NodeHelper.couldHaveChildren(currentNodeType)) {
        result = false;
    }
}
return result; 
```

}

```
// Create a data provider for root nodes
protected ListDataProvider<NavNode> getDataProvider(Collection<NavNode> rootNodes) {
return new ListDataProvider<NavNode>(new LinkedList<NavNode>(rootNodes)); 
```

}

```
// Create a data provider that contains the    immediate descendants.
protected AsyncDataProvider<NavNode> getDataProvider(final NavNode node) {
return new AsyncDataProvider<NavNode>() {
    @Override
    protected void onRangeChanged(final HasData<NavNode> display) {
        final Set<NavNode> clientNodes = util.getAncestorNodes(node);
        clientNodes.add(node);
        final NavigationInfo clientInfo = new NavigationInfo(clientNodes);
        navigationService.getNavInfo(clientInfo, node, resources, qualifications, new SafeOperationCallback<NavigationInfo>(eventBus, false) {

            @Override
            public void onFailureImpl(Throwable caught) {
                GWT.log("Something went wrong retreiving children for " + node.getName(), caught);
                updateRowCount(0, false);
            }

            @Override
            public void onSuccessImpl(OperationResult<NavigationInfo> or) {
                util.mergeNavInfo(or.getResult());
                final NavNode nodeFromServer = util.getNode(node.getId());
                final Range range = display.getVisibleRange();
                final int start = range.getStart();
                final Set<NavNode> nodes = util.getNodes(nodeFromServer.getChildren());
                updateRowData(display, start, new LinkedList<NavNode>(nodes));
            }

        });

    }
}; 
```

}

```
private static class NodeHelper {

private static final Set<NodeType> PARENTAL_NODE_TYPES;

static {
    PARENTAL_NODE_TYPES = new HashSet<NodeType>();
    PARENTAL_NODE_TYPES.add(NodeType.ASSET_OWNER);
    PARENTAL_NODE_TYPES.add(NodeType.OPERATING_DAY);
    PARENTAL_NODE_TYPES.add(NodeType.RESOURCES);
    PARENTAL_NODE_TYPES.add(NodeType.RESOURCE);
    PARENTAL_NODE_TYPES.add(NodeType.ENERGY);
    PARENTAL_NODE_TYPES.add(NodeType.RESERVE);
    PARENTAL_NODE_TYPES.add(NodeType.DAY_AHEAD_CLEARED_OFFERS);
    PARENTAL_NODE_TYPES.add(NodeType.DRR_LOAD_FORCAST);
    PARENTAL_NODE_TYPES.add(NodeType.RESERVE_DISPATCH);
    PARENTAL_NODE_TYPES.add(NodeType.RESERVE_RAMP_RATE);
}

public static boolean couldHaveChildren(NodeType nodeType) {
    boolean result = false;
    if (PARENTAL_NODE_TYPES.contains(nodeType)) {
        result = true;
    }
    return result;
}
}
} 
```

# iphone - lookbook.nu 应用程序使用哪个组件？

> ID：13213542
> 
> 赞同：0
> 
> 时间：2012-11-03T21:13:02.673
> 
> 标签：iphone, ios, cocoa-touch, uiview, uikit

我正在寻找这样做的方法： ![在此处输入图像描述](../Images/fa113eb8524b143d1989e7bad9f440b6.png)

我该怎么做？它存在于 iPhone 的“lookbook.nu”应用程序中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:42:54.837

也许这可以帮助你...

[http://www.youtube.com/watch?v=1iykxemuxbk](http://www.youtube.com/watch?v=1iykxemuxbk)

你可以简单地在 Iphone 上创建一个 UIPopover，但我认为在 ipad 上它更容易......好吧看看。

# xml - 这种 XML 格式看起来不错吗？

> ID：13213543
> 
> 赞同：0
> 
> 时间：2012-11-03T21:13:04.127
> 
> 标签：xml

我从某人那里收到了一个 xml 文件，但我很难尝试处理它（使用 ETL 工具）。我没有太多处理 xml 文件的经验，所以我想知道这种 xml 格式是否正常，我只需要以某种方式翻译它。我遇到了麻烦，因为每个项目都有多个属性标签。

感谢您提供的任何帮助。

-克里斯

```
<items>
  <item name="itemA">
    <property propertyName="color">
      <value>Red</value>
    </property>
    <property propertyName="shape">
      <value>Circle</value>
    </property>
    <property propertyName="age">
      <value>20</value>
    </property>
  </item>
  <item name="itemB">
  ...
  </item>
</items> 
```

理想情况下，我希望看到这个：

```
<item name="itemA">
  <color>Red</color><shape>Circle</shape><age>20</age>
</item> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:15:59.693

您的两个文件都是正确且可读的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:14:52.577

您的两个 XML 文档都是格式良好的，但它们的内容不同。请注意，换行符在这里不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T09:27:35.803

您可以轻松地将 XML 转换为所需的格式。使用由 (a) 标识模板和 (b) 规则组成的 XSLT 样式表

```
<xsl:template match="property">
  <xsl:element name="{@propertyName}">
   <xsl:value-of select="value"/>
  </xsl:element>
</xsl:template> 
```

# r - R优化函数

> ID：13213544
> 
> 赞同：2
> 
> 时间：2012-11-03T21:13:06.150
> 
> 标签：r, function, statistics

我想使用 optim 函数来获得变量“结果”的最佳值

变量“ `returns`”具有适当的值（503）。我打印了这些值并且它工作正常。但是，我在调用“ `optim`”时遇到错误：

> optim() 中的错误：L-BFGS-B 需要 'fn 的有限值

实际代码：

```
library(VGAM)
ini_val <- c(mean(returns), 1)
la_ret = optim(init_val, fn = function(theta){
-sum(log(dlaplace(returns, theta[1], theta[2])))},
method = "L-BFGS-B", lower = c(-Inf, 0))
la_ret 
```

我不明白为什么我会得到*无限*的 ' `fn`'

# postgresql - 从 Cygwin 在 C 中运行 PostgreSQL 客户端

> ID：13213545
> 
> 赞同：5
> 
> 时间：2012-11-03T21:13:13.727
> 
> 标签：postgresql, cygwin, libpq

我正在尝试在 Cygwin 上用 C 构建一个非常简单的 PostgreSQL 客户端。

这是我到目前为止所做的：

*   我已经下载了 PostgreSQL 源代码版本 9.1.2（与我的服务器上运行的相同版本匹配）
*   我已经从 Cygwin 配置并编译了源代码。编译似乎很顺利。
*   据我所知，头文件位于：
    *   /cygdrive/c/workspace/src/postgresql-9.1.2/src/interfaces/libpq，和
    *   /cygdrive/c/workspace/src/postgresql-9.1.2/src/include
*   图书馆位于：
    *   /cygdrive/c/workspace/src/postgresql-9.1.2/src/interfaces/libpq

从这里开始，我使用下面的 makefile 编译并链接了客户端程序：

```
testlibpq: testlibpq.c
    gcc -o testlibpq -I /cygdrive/c/workspace/src/postgresql-9.1.2/src/interfaces/libpq -I /cygdrive/c/workspace/src/postgresql-9.1.2/src/include -L /cygdrive/c/workspace/src/postgresql-9.1.2/src/interfaces/libpq testlibpq.c -Bstatic -lpq 
```

编译和链接成功，没有错误或警告。

但是，当我尝试运行该程序时，出现以下错误：

```
$ ./testlibpq
/cygdrive/c/Users/dleclair/Dropbox/denis/src/testlibpq/testlibpq.exe: error while loading shared libraries: cygpq.dll: cannot open shared object file: No such file or directory 
```

我还没有想出如何解决这个问题。任何指针将不胜感激。哦，还有一件事，我找到了 cygpq.dll 所在的文件夹并将我的 LD_LIBRARY_PATH 设置为指向它，但它仍然给了我相同的结果。

```
dleclair@dleclair-win7l ~/Dropbox/denis/src/testlibpq
$ ls /cygdrive/c/workspace/src/postgresql-9.1.2/src/interfaces/libpq
bcc32.mak      encnames.o    fe-connect.o  fe-misc.o       fe-protocol3.o   ip.o           libpq-events.c  md5.c                   pgstrcasecmp.c  pqsignal.c       thread.o
blibpqdll.def  exports.txt   fe-exec.c     fe-print.c      fe-secure.c      libpq.a        libpq-events.h  md5.o                   pgstrcasecmp.o  pqsignal.h       wchar.c
chklocale.c    fe-auth.c     fe-exec.o     fe-print.o      fe-secure.o      libpq.rc.in    libpq-events.o  nls.mk                  po              pqsignal.o       wchar.o
chklocale.o    fe-auth.h     fe-lobj.c     fe-protocol2.c  inet_net_ntop.c  libpqddll.def  libpq-fe.h      noblock.c               pqexpbuffer.c   pthread-win32.c  win32.c
cygpq.dll      fe-auth.o     fe-lobj.o     fe-protocol2.o  inet_net_ntop.o  libpq-dist.rc  libpq-int.h     noblock.o               pqexpbuffer.h   README           win32.h
encnames.c     fe-connect.c  fe-misc.c     fe-protocol3.c  ip.c             libpqdll.def   Makefile        pg_service.conf.sample  pqexpbuffer.o   thread.c         win32.mak

dleclair@dleclair-win7l ~/Dropbox/denis/src/testlibpq
$ echo $LD_LIBRARY_PATH
/cygdrive/c/workspace/src/postgresql-9.1.2/src/interfaces/libpq

dleclair@dleclair-win7l ~/Dropbox/denis/src/testlibpq 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:09:11.083

通常在 unix/linux 系统上构建源代码后会进行 make install，它将标头复制到标准位置，例如 /usr/local/include 和 /usr/local/lib。您可能必须在 cygwin 上执行此操作才能在搜索路径中获取 DLL。

或者您可以自己找到 DLL 并将其放在搜索路径或与可执行文件相同的文件夹中。

# python - 用于低 API 调用的 Tweepy 游标与迭代

> ID：13213548
> 
> 赞同：0
> 
> 时间：2012-11-03T21:13:58.593
> 
> 标签：python, twitter, tweepy

我正在编写一个简单的[Tweepy](http://packages.python.org/tweepy/html/)应用程序，但实际上仅限于我有多少 API 调用（介于 150 到 350 之间）。因此，为了解决这个问题，我正在寻找减少通话的方法。Tweepy 有一个内置的光标系统。例如：

```
# Iterate through all of the authenticated user's friends
for follower in tweepy.Cursor(api.followers).items():
    follower.follow() 
```

对于那些熟悉这个库的人。上面的例子会比简单的效率更高还是更低......

```
for follower in api.followers_ids():
    api.follow(follower) 
```

除了简单地使用 Cursor 方法而不是迭代方法之外，还有其他优点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T21:48:32.073

如果我从我的使用中没记错的话`tweepy`，一个`Cursor`对象会自动对许多元素进行分页`n`......例如，如果有 10,000 个结果，而 Twitter 一次返回（比如说）200 个，那么使用`Cursor`将返回全部 10,000 个，但必须拨打电话以继续检索下一个。

OTOH，`api.followers_ids()`只返回结果的第一“页”，所以可能是前 100 个或其他。

# java - java - 如何检查用户在java中的向量中是否定义了条目？

> ID：13213549
> 
> 赞同：1
> 
> 时间：2012-11-03T21:14:00.820
> 
> 标签：java, vector, contains, comparable

我有一个条目向量。每个条目都是此类的一个实例：

```
public class Entry implements Comparable<Entry>{

    private String _key;
    private CustomSet _value;

    [...]

    @Override
    public int compareTo(Entry a) {
        return this._key.compareTo(a._key);
    }
} 
```

向量声明如下：

```
Vector<Entry> entries = new Vector<Entry>(); 
```

之后，向量被填充。然后我想检查某个键是否在向量中的某个位置。所以我这样做：

```
Entry sample = new Entry(key, new CustomSet());
if (entries.contains(sample)) {
    // do something
} 
```

这似乎不起作用。为什么？我怎样才能让它工作？

PS CustomSet 是另一个用户定义的类，在我看来无关紧要

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T21:16:25.650

您必须`equals`在类中重新定义该方法`Entry`，因为这是`contains`确定元素是否属于集合的依据，正如文档所说：

> 如果此向量包含指定元素，则返回 true。更正式地说，当且仅当此向量包含至少一个元素 e 满足 (o==null ? e==null : o.equals(e)) 时才返回 true。

在这种情况下`o`是`contain`的方法参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T21:21:39.643

问题是您没有相同的对象，而是两个具有相同键的不同对象。

这个：

```
Entry sample = new Entry(key, new CustomSet()); 
```

创建一个新对象，如果您现在调用`entries.add(sample)`然后尝试调用`entries.contains(sample)`它将返回 true，因为它确实是同一个对象。但是，如果您有以下内容，则情况并非如此：

```
 Entry sample = new Entry(key, new CustomSet());
 Entry sample1 = new Entry(key, new CustomSet());

 entries.add(sample);

 if(entries.contains(sample1)) // It will still return false. 
```

解决方案涉及重新定义`equals`使用`keys`区分对象的方法。所以在`Entry`课堂上你应该添加以下内容：

```
 public boolean equals(Object o)
 {
       if(o == null || !getClass().equals(o.getClass()))  return false;
       if(o == this)  return true;

       Entry p = (Entry) o;
       return this.key.compareTo(p.key) == 0;
} 
```

# iphone - 如何在对象已设置动画时更改其动画？

> ID：13213550
> 
> 赞同：3
> 
> 时间：2012-11-03T21:14:09.273
> 
> 标签：iphone, xcode, animation, uiimageview

所以，现在我有一个火箭，它在 iphone 5 屏幕的底部左右弹跳。但是，我希望火箭停止左右移动，但一旦用户触摸屏幕就向上移动（因此触摸屏幕会使火箭起飞）。

首先，在 viewDidAppear 中，我告诉编译器在 2 秒后运行 spawnRocket 方法。

在该`spawnRocket`方法中，我建立了火箭图像和框架，然后将其添加到视图中并执行 uiview 动画，将火箭发送到屏幕右侧。在`finished`uiview 动画方法的参数中，我告诉编译器运行 moveRocketLeft 方法。

在 moveRocketLeft 方法中，我做了一个动画，将火箭发送到屏幕左侧，在`finished`参数中我运行了 moveRocketRight 方法。

moveRocketMethod 基本上是 spawnRocket 方法，只是我没有建立火箭图像和框架并将其添加到视图中。

所以在这一切之后，我尝试实现 -touchesBegan:withEvent: 方法。我尝试简单地运行一个 uiview 动画，将火箭 y 更改为向上离开屏幕，并将 x 更改为用户触摸屏幕时 x 当前所处的位置。

但是，我意识到调用火箭框架并没有返回火箭在动画时看起来像的位置。它实际上只是返回完成动画后火箭框架的内容。那么，要获得我想要的框架，我应该打电话`layer`吗？我记得在某处读到该层将在动画期间返回 uiimageview 的实际位置。但是，图层只有属性边界而不是框架，所以我有点困惑。

我也尝试调用`[self.view.layer removeAllAnimations];`然后运行一个新的动画，这会拍摄尴尬，但该`removeAllAnimations`方法从未奏效（无论如何我并不喜欢使用它的想法，因为我听说它滞后）。

所以有人知道我如何实施`touchesBegan:withEvent:`方法以使火箭正确起飞吗？（或者如果您认为我必须更改整个程序，请随时提供帮助）

```
 #import "ViewController.h"
    #import <QuartzCore/QuartzCore.h>
    @interface ViewController ()
    @property UIImageView *rocket;
    @end

    @implementation ViewController

    @synthesize rocket=_rocket;

    - (void)viewDidLoad
    {
        [super viewDidLoad];

    }

    -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
[self.view.layer removeAllAnimations];
     //   [UIView animateWithDuration:3 delay:0 options:UIViewAnimationOptionCurveEaseIn animations:^(){self.rocket.frame=CGRectMake(self.rocket.frame.origin.x, -40, 25, 40);} completion:^(BOOL finished){}];

    // this didn't work :(
    }

    -(void)viewDidAppear:(BOOL)animated{
        [self performSelector:@selector(spawnRocket) withObject:self afterDelay:2];
    }
    -(void)spawnRocket{
        self.rocket=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"default.png"]]; //places imageview right off screen
        self.rocket.frame=CGRectMake(-25, 420, 25, 40);

        [self.view addSubview:self.rocket];
        [UIView animateWithDuration:1.5 delay:0 options:UIViewAnimationOptionCurveLinear animations:^(){self.rocket.frame=CGRectMake(295, 420, 25, 40);}  completion:^(BOOL finished){if (finished)[self moveRocketLeft]; }];

    }

    -(void) moveRocketLeft{
        [UIView animateWithDuration:1.5 delay:0 options:UIViewAnimationOptionCurveLinear animations:^(){self.rocket.frame=CGRectMake(0, 420, 25, 40);} completion:^(BOOL finished){if (finished)[self moveRocketRight];}];
    }

        -(void)moveRocketRight{
          [UIView animateWithDuration:1.5 delay:0 options:UIViewAnimationOptionCurveLinear animations:^(){self.rocket.frame=CGRectMake(295, 420, 25, 40);} completion:^(BOOL finished){if (finished)[self moveRocketLeft];}];
        }
    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:51:32.480

This should do the trick

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    CALayer *rocketPresentationLayer = [self.rocket.layer presentationLayer];
    self.rocket.layer.position = rocketPresentationLayer.position;
    [UIView animateWithDuration:3 delay:0 options:UIViewAnimationOptionCurveEaseIn|UIViewAnimationOptionBeginFromCurrentState animations:^(){self.rocket.frame=CGRectMake(self.rocket.frame.origin.x, -40, 25, 40);} completion:^(BOOL finished){}];
} 
```

**Note 1:** I didn't put logic in here to check whether the user tapped the rocket again, when it is taking off vertically. You might want to add a `BOOL` or something to see if the user successfully hit the rocket or not, and if so, don't perform the vertical animation again.

**Note 2:** If in future you only want this to occur when the rocket is hit, you can use `hitTest` checking to call the animation conditionally.

```
// Get the touch
UITouch *touch = [touches anyObject];
CGPoint touchPoint = [touch locationInView:self.view];

// See if we hit the rocket
CALayer *rocketPresentationLayer = [self.rocket.layer presentationLayer];
CALayer* hitTest = [rocketPresentationLayer hitTest:touchPoint];

// If we did, then stop animation and move upwards
if (hitTest) {
    ....
} 
```

**P.S:** Also as a slight mention, `@property UIImageView *rocket;` should be changed to `@property (nonatomic) UIImageView *rocket;`. This is primarily for performance reasons, as I don't expect your rocket to be accessed by multiple threads (it shouldn't, it's the UI!).

# css - 根据字体设置不同的行高

> ID：13213563
> 
> 赞同：4
> 
> 时间：2012-11-03T21:15:55.103
> 
> 标签：css, fonts, webfonts

我想`line-height`为列表后备字体中的不同字体设置不同的字体。例如：

```
body {
    font-family: "Small x-height font", "Larger x-height font", sans-serif;
} 
```

当使用首选的*Small x-height 字体*时，我想设置`line-height`为 1.3。当由于首选字体不可用而使用*较大的 x 高度字体*时，我想设置`line-height`为 1.5。当两种字体均不可用且使用 sans-serif 后备时，我想设置`line-height`为`normal`.

在不借助 JavaScript 的情况下使用 CSS 2.1 或 CSS 3 是否可行？

**基本原理**问题在于不同的字体有不同的 x 高度（小写字母的高度，例如 x 相对于字体大小）。为了使 x 高度较大的文本看起来更好，必须将其设置为较大的行高。默认字体（上例中的无衬线字体）的 x 高度是未知的，并且可能与我们选择的字体的 x 高度有很大不同。因此，当字体加载失败时，与我们的字体看起来不错的行高可能看起来很难看。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T21:33:18.800

我不相信有办法按照您要求的方式执行此操作。但是，我可以告诉您，如果您使用字体服务（例如 Typekit），您可以根据字体是否已加载来设置备用字体的样式。

在 Typekit 的案例中，它们在字体加载、加载或非活动时向元素添加类。它们还为特定的字体/粗细提供类。

然后，您可以根据情况提供特定的样式。
这是一个粗略的例子：

```
body {
  font: 400 16px/1.5 "typekit-font", "fallback-font";
}
.wf-inactive body {
  font-weight: normal;
  line-height: 1.8;
} 
```

更多信息可以在[他们相应的帮助文章](http://help.typekit.com/customer/portal/articles/6787-font-events)中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T02:41:34.523

CSS3 中有一个`font-size-adjust`属性可以解决这个问题。您可以`font-size-adjust: 0.6`为您的`body`所有字体指定透明缩放，使其 x 高度为 0.6em。这有一个额外的好处，您可以在同一行上组合具有不同原始 x 高度的字体，并且它们将具有大致相同的小写字母大小，而无需手动调整字体大小。

只有[Firefox](https://developer.mozilla.org/en-US/docs/CSS/font-size-adjust)实现`font-size-adjust`（截至 2012 年 11 月）。[WebKit](https://bugs.webkit.org/show_bug.cgi?id=15257)没有。

有关更多信息，请参阅[CSS3 字体](http://www.w3.org/TR/css3-fonts/#font-size-adjust-prop)规范，有关示例，请参阅[David Baron 的帖子](http://dbaron.org/log/20080613-firefox3-css#font-size-adjust)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T22:46:05.227

在 CSS 中，您不能使属性的值取决于字体的选择。基本上，属性是相互独立的，有一些例外在这里不适用。

通常，`font-family`列表中的字体在一般特征上应该或多或少相似。这不仅仅是一个`line-height`问题。字体的选​​择会影响整个页面。

另一种策略是通过`@font-face`. 然后你可以合理地确定你的字体会被使用，你可以根据它来设置行高和其他属性。

# java - 向使用 AWT 绘图的程序添加 Swing 按钮

> ID：13213564
> 
> 赞同：3
> 
> 时间：2012-11-03T21:15:57.040
> 
> 标签：java, swing, awt

我有一个绘制随机三角形的程序。我想添加一个按钮，单击该按钮会擦除并重新生成另一个随机三角形。我测试了是否可以在另一个程序中显示一个按钮`SwingButtonTest.java`，（这是我滚动的方式，我正在学习）并且它成功了。

然后，我基本上将所有我认为必要的代码从那个程序中复制到我的三角形程序中。不幸的是，程序不显示按钮...

再次感谢任何帮助，非常感谢！

```
import javax.swing.*;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

@SuppressWarnings({ "serial" })
public class TriangleApplet extends JApplet implements ActionListener {

   int width, height;
   int[] coords = new int[6];
   JButton refresh;

   public void init() {
      //This stuff was added from SwingButtonTest.java
      Container container = getContentPane();
      container.setLayout(null);

        container.setLayout(null);

        refresh= new JButton("I like trains");
        refresh.setBackground(Color.yellow);
        refresh.setSize(140, 20);
        refresh.addActionListener(this);

        container.add(refresh);
      //End of SwingButtonTest.java stuff

      coords = randomTri();
   }

    public static int[] randomTri() {
        int[] pointArray = new int[6];
        int x;
        for (int i = 0; i < 6; i++) {
            x = ((int)(Math.random()*40)*10);
            pointArray[i] = x;
        }
        return pointArray;
    }

   public void paint( Graphics g ) {
        g.setColor(Color.BLUE);

        g.drawLine(coords[0], coords[1], coords[2], coords[3]);
        g.drawString("A: " + coords[0]/10 + ", " + coords[1]/10, coords[0], coords[1]);
        g.drawLine(coords[2], coords[3], coords[4], coords[5]);
        g.drawString("B: " + coords[2]/10 + ", " + coords[3]/10, coords[2], coords[3]);
        g.drawLine(coords[4], coords[5], coords[0], coords[1]);
        g.drawString("C: " + coords[4]/10 + ", " + coords[5]/10, coords[4], coords[5]);
        //Math for AB
        int abXDif = Math.abs(coords[0]/10 - coords[2]/10);
        int abYDif = Math.abs(coords[1]/10 - coords[3]/10);
        int abLength = (abXDif*abXDif) + (abYDif*abYDif);
        g.drawString("AB: Sqrt of "+ abLength, 0, 10);
        //Math for BC
        int bcXDif = Math.abs(coords[2]/10 - coords[4]/10);
        int bcYDif = Math.abs(coords[3]/10 - coords[5]/10);
        int bcLength = (bcXDif*bcXDif) + (bcYDif*bcYDif);
        g.drawString("BC: Sqrt of "+ bcLength, 0, 20);
        //Math for AC
        int acXDif = Math.abs(coords[4]/10 - coords[0]/10);
        int acYDif = Math.abs(coords[5]/10 - coords[1]/10);
        int acLength = (acXDif*acXDif) + (acYDif*acYDif);
        g.drawString("AC: Sqrt of "+ acLength, 0, 30);

   }

@Override
public void actionPerformed(ActionEvent e) {
    // TODO Auto-generated method stub

}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T21:26:00.107

该按钮未出现的原因是您没有调用：

```
super.paint(g); 
```

在`paint()`方法中。此调用将导致按钮和其他添加的组件被绘制。

[在 Swing 中自定义绘制](http://docs.oracle.com/javase/tutorial/uiswing/painting/)的更好方法是将自定义绘制放置在扩展`JComponent`和覆盖的组件中，`paintComponent`以利用 Swing 的优化绘制模型。

还可以考虑使用[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)来调整和放置组件。避免使用绝对定位（`null`布局）。从[没有布局管理器的情况下](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)：

> 尽管可以不使用布局管理器，但您应该尽可能使用布局管理器。布局管理器可以更轻松地适应依赖外观的组件外观、不同的字体大小、容器的不断变化的大小以及不同的语言环境。

# python - IMAPClient 和 BODY[HEADER.FIELDS (FROM)] 字段

> ID：13213565
> 
> 赞同：1
> 
> 时间：2012-11-03T21:15:57.147
> 
> 标签：python, imap, imaplib, imapclient

我真的开始掌握 IMAPClient 的窍门了。代码：`'BODY[HEADER.FIELDS (FROM)]'`返回

```
From: First Last <first.last@domain.com> 
```

我真的很希望它返回这样的电子邮件地址：

```
first.last@lbox.com 
```

我需要先将它传递给一个变量并修剪它还是`fetch`我可以使用另一个修饰符？

```
response = server.fetch(messages, ['FLAGS', 'RFC822.SIZE', 'BODY[HEADER.FIELDS (FROM)]'])
for msgid, data in response.iteritems():
    print '   ID %d: %d bytes, From: %s flags=%s' % (msgid,
                                            data['RFC822.SIZE'],
                                            data['BODY[HEADER.FIELDS (FROM)]'],
                                            data['FLAGS']) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T21:19:37.623

不 - 你不能用 IMAP 请求来做到这一点，如果你看我的另一篇文章，你会注意到使用 的东西`parseaddr`，但这里又是你的例子：

```
>>> from email.utils import parseaddr
>>> a = 'From: First Last <first.last@domain.com>'
>>> parseaddr(a)
('First Last', 'first.last@domain.com') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:20:29.870

IMAPLIB 不会为您解析很多协议。它按原样从服务器返回线路。

您可以并且应该使用`email`库中的解析器来帮助您。

# html - Twitter Bootstrap 弹出框的 HTML 标记

> ID：13213569
> 
> 赞同：3
> 
> 时间：2012-11-03T21:16:26.727
> 
> 标签：html, css, twitter-bootstrap

我试图弄清楚使用哪些 CSS 类来让[Bootstrap 弹出框](http://twitter.github.com/bootstrap/javascript.html#popovers)像这样：

![](../Images/e30f42cb89750db569726ff4ddb47d82.png)

上面的示例类似于引导文档中的第一个示例。

我怎样才能得到一个像上面那样`div`只使用标记处理元素的弹出框，而不需要 javascript 调用和点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:22:17.680

将呈现弹出框的 HTML 如下所示：

```
<div class="popover right popover-example">
    <div class="arrow"></div>
    <h3 class="popover-title">Popover right</h3>
    <div class="popover-content">
        <p>Sed posuere consectetur est at lobortis. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum.</p>
    </div>
</div> 
```

但是，默认情况下，`.popup`您`display: none`可能想要覆盖；在这种情况下，我添加了一个类`popover-example`并将定义以下附加 CSS：

```
.popover.popover-example {
    display: block
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:22:50.937

```
<div class="popover right">
    <div class="arrow"></div>
    <h3 class="popover-title">Your title here</h3>
    <div class="popover-content">
        <p>Your content here</p>
    </div>
</div> 
```

用您希望它显示的任何方式替换“正确”类。

# php - 处理数据库查询时如何混淆 JSON 响应？

> ID：13213570
> 
> 赞同：1
> 
> 时间：2012-11-03T21:16:25.823
> 
> 标签：php, jquery, json, codeigniter

```
[
 {
  "businesscards_id":"12",
  "X_SIZE":"1.75x3",
  "X_PAPER":"14ptGlossCoatedCoverwithUV(C2S)",
  "X_COLOR":"1002",
  "X_QTY":"250",
  "O_RC":"NO",
  "F_PRICE":"12490",
  "UPS_GROUND":"12000",
  "UPS_TWODAY":"24000",
  "UPS_OVERNIGHT":"36000"
 }
] 
```

此 JSON 编码响应可在 Chrome 的控制台中看到。该数组是从数据库查询返回的。它显示了我的表列名。出于安全原因，我不想显示我的表列名。**如何混淆或散列和/或编码或动态重写此 JSON 对象以保持我的表列名称私有？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T21:18:33.577

不要对你的 JSON 做任何事情。

如果您不希望您的列名可见，请不要使用您的列名。使用新键创建一个新数组以使用 JSON 发送，然后将该数组更改回包含您的列名的数组。

但这真的不应该是人们看到它们的问题。没有人可以访问您的数据库，因此让人们看到列名不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T02:00:50.867

SQL 语句：

```
SELECT `col_name` AS 'something_else' 
```

但是，正如其他人所说，不要为了安全而这样做。这是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T21:22:21.280

这实际上取决于您希望在收到记录后如何使用它。一种策略可能是只返回一个值数组，丢弃键。然后在您的代码中，使用您在处理记录时需要哪个数组值的私人知识。就像是：

```
var result=[];
Object.keys(record).forEach(function(key){result.push(record[key]);}); 
```

然后在您的代码中，使用数组索引来访问这些值。

# c# - Silverlight 检测 Dependency 属性何时具有 Xaml 绑定

> ID：13213575
> 
> 赞同：0
> 
> 时间：2012-11-03T21:17:09.993
> 
> 标签：c#, silverlight, dependency-properties

是否可以检测何时在 Silverlight 中的 DependencyProperty 上设置了 Xaml 绑定？

例如，如果我有一个具有单个依赖属性的自定义用户控件和一个像这样声明的绑定：

```
public class MyControl : UserControl
{ 
   public static readonly DependencyProperty TestProperty = 
           DependencyProperty.Register("Test", 
              typeof(object), typeof(MyControl), 
              new PropertyMetadata(null));

   public object Test
   { 
       get { return GetValue(TestProperty); } 
       set { SetValue(TestProperty, value); } 
   }
}

<MyControl Test="{Binding APropInViewModel}>
</MyControl> 
```

我可以在 MyControl 代码中改成这样吗？

```
// Ctor
public MyControl()
{ 
    TestProperty.BindingChanged += new EventHandler(...)
} 
```

例如，我可以获得绑定通知吗？

**笔记：**

这是为了解决一个[棘手的优先顺序问题，在此处进行了描述，](https://stackoverflow.com/questions/13181788/wpf-dependency-property-precedence-reference-type-default-values/13182553#13182553)因此仅在 DependencyPropertyChanged 处理程序中检查新值是行不通的 - 因为属性更改处理程序不会触发！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:32:46.330

此绑定中的值更改是可能的。您可以使用 propertychanged 回调方法检测更改，该方法对于 Dependency 属性是静态的。

```
public static readonly DependencyProperty TestProperty =
       DependencyProperty.Register("Test",
          typeof(object), typeof(MyControl),
          new PropertyMetadata(null, TestChangedCallbackHandler));

    private static void TestChangedCallbackHandler(DependencyObject sender, DependencyPropertyChangedEventArgs args)
    {
        MyControl obj = sender as MyControl;

        Test = args.NewValue; 
    } 
```

但是，这可能会导致以下事件侦听情况。如果您想收听此依赖属性的更改，请参阅此链接： [Listen DepencenyProperty value changes](http://www.amazedsaint.com/2009/12/silverlight-listening-to-dependency.html)

```
public void RegisterForNotification(string propertyName, FrameworkElement element, PropertyChangedCallback callback)
    {
        Binding b = new Binding(propertyName) { Source = element };
        var prop = System.Windows.DependencyProperty.RegisterAttached(
            "ListenAttached" + propertyName,
            typeof(object),
            typeof(UserControl),
            new System.Windows.PropertyMetadata(callback));

        element.SetBinding(prop, b);
    } 
```

像这样打电话

```
this.RegisterForNotification("Test", this, TestChangedCallback); 
```

# struts2 - 如何在struts2 jquery网格列中显示headerkey选项

> ID：13213578
> 
> 赞同：1
> 
> 时间：2012-11-03T21:17:26.753
> 
> 标签：struts2, struts2-jquery, jquery-select2

我有一个 jsp 页面，我在 strust2 jquery Grid 中显示数据。在网格列中，有基于选择类型（下拉选择）的搜索工具。

```
<sjg:gridColumn name="subjectId" title="Subject Name" editable="true" align="center" search="true" searchtype="select" 
 searchoptions="{dataUrl:'%{selecturl}'}"  edittype="select"     editoptions="{dataUrl:'%{selecturl}'}"  /> 
```

.我的下拉列表在我的课堂上很好，并且正确显示在它的位置。

我想要的是一个类似这样的标题值（----select here--），然后是从我的类中填充的所有值。

例如。我知道如何在 struts2 中执行此操作（下面的代码），但我在 struts2 jquery 网格列中不知道这一点。现在我只能显示没有标题键和标题值的所有列表。

```
<s:select label="What's your favor search engine" 
    headerKey="-1" headerValue="----Select here----"
    list="selecturl" 
    name="name" /> 
```

请帮助我解决这个问题。

# c# - C# at first button click 我的程序没有填充所有数组元素，为什么？

> ID：13213581
> 
> 赞同：0
> 
> 时间：2012-11-03T21:17:48.893
> 
> 标签：c#

我创建了一个“随机密码生成器”应用程序（我是初学者，只是为了练习）并且不知何故在第一次单击按钮时它只会填充我数组的 5-6-7 个元素。

这段代码可能很奇怪（用于生成随机字符），我只是查看了 ASCII 表并搜索了数字、字母并将它们放入随机的最小和最大数字中。

```
 string[] ch = new string [11];
 Random r = new Random();

 private void button1_Click(object sender, EventArgs e)
 {
    for (int i = 0; i <= 9; i++)
    {
        if (Convert.ToInt64(r.Next()) % 3 == 0)
            ch[i] = Convert.ToString(Convert.ToChar(r.Next(49, 57)));
         else if (Convert.ToInt64(r.Next()) % 3 == 1)
             ch[i] = Convert.ToString(Convert.ToChar(r.Next(65, 89)));
         else if (Convert.ToInt64(r.Next()) % 3 == 2)
             ch[i] = Convert.ToString(Convert.ToChar(r.Next(97, 122)));
     }
     pass.Text = (Convert.ToString(ch[0] + "" + ch[1] + "" + ch[2] + "" + ch[3] + "" + ch[4] + "" + ch[5] + "" + ch[6] + "" + ch[7] + "" + ch[8] + "" + ch[9])); 
```

要决定使用数字（ascii 49-57）小写字母（65-89）还是大写字母（97-122），我只是做了一个随机数（截断除以？）除以 3，然后结果是 0,1 或 2为他们做了如果。

可能很愚蠢，但这是我自己的想法。所以当我点击按钮时，第一次它只显示大约 5,6,7 个数组元素。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:20:14.760

```
if (Convert.ToInt64(r.Next()) % 3 == 0)
    ch[i] = Convert.ToString(Convert.ToChar(r.Next(49, 57)));
else if (Convert.ToInt64(r.Next()) % 3 == 1)
    ch[i] = Convert.ToString(Convert.ToChar(r.Next(65, 89)));
else if (Convert.ToInt64(r.Next()) % 3 == 2)
    ch[i] = Convert.ToString(Convert.ToChar(r.Next(97, 122))); 
```

当您拨打 Next 三次时，您会得到三个不同的号码。因此，您可能会使所有三个 if 语句都失败。

改为这样做

```
int i = r.Next(3);
if (i == 1)
    ch[i] = Convert.ToString(Convert.ToChar(r.Next(49, 57)));
else if (i == 2)
    ch[i] = Convert.ToString(Convert.ToChar(r.Next(65, 89)));
else
    ch[i] = Convert.ToString(Convert.ToChar(r.Next(97, 122))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:22:38.170

您需要在 if 语句之前将结果捕获到变量中。每次执行 r.Next() 时，结果都会发生变化。

```
int result = Convert.ToInt64(r.Next());

private void button1_Click(object sender, EventArgs e)
 {
    for (int i = 0; i <= 9; i++)
    {
        if (result % 3 == 0)
            ch[i] = Convert.ToString(Convert.ToChar(r.Next(49, 57)));
         else if (result % 3 == 1)
             ch[i] = Convert.ToString(Convert.ToChar(r.Next(65, 89)));
         else if (result % 3 == 2)
             ch[i] = Convert.ToString(Convert.ToChar(r.Next(97, 122)));
     }
     pass.Text = (Convert.ToString(ch[0] + "" + ch[1] + "" + ch[2] + "" + ch[3] + "" + ch[4] + "" + ch[5] + "" + ch[6] + "" + ch[7] + "" + ch[8] + "" + ch[9]));
} 
```

ETC...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:37:06.980

这不仅是代码第一次未能将值放在所有位置。

你有这个控制结构：

```
if (Convert.ToInt64(r.Next()) % 3 == 0)
  ...
else if (Convert.ToInt64(r.Next()) % 3 == 1)
  ...
else if (Convert.ToInt64(r.Next()) % 3 == 2)
  ... 
```

当您为每个条件选择一个新的随机数时，有 29.63% 的机会它们都不为真。

如果你仔细观察结果，你会发现大多数时候有一些字符没有变化。

您应该选择一个随机数并检查其值：

```
switch (r.Next(3)) {
 case 0:
   ch[i] = Convert.ToString(Convert.ToChar(r.Next(49, 57)));
   break;
 case 1:
   ch[i] = Convert.ToString(Convert.ToChar(r.Next(65, 89)));
   break;
 case 2:
   ch[i] = Convert.ToString(Convert.ToChar(r.Next(97, 122)));
   break;
} 
```

另一种方法是将要使用的所有字符放在一个字符串中，然后从中选择：

```
string chars = "123456789ABCDEFGHIJKLMNOPQRSTUVWXYabcdefghijklmnopqrstuvwxyz";

ch[i] = chars.Substring(r.Next(chars.Length), 1); 
```

如果您想排除一些容易混淆的字符，例如 0、O、o、1 和 l，这将特别有用，然后您只需将它们从字符串中排除：

```
string chars = "23456789ABCDEFGHIJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz"; 
```

# excel - 使用 VBA 将 csv 文件转换为 Excel（将列作为文本）

> ID：13213590
> 
> 赞同：4
> 
> 时间：2012-11-03T21:19:07.780
> 
> 标签：excel, vba

我有一个 csv 文件，例如将数据如下 (a.csv) 转换为 Excel。

在第二列中，前导 0 被截断。

有没有办法在将 csv 导入 Excel 之前将第二列定义为文本？

我不想像许多解决方案中建议的那样将“`”或任何字符附加到第二列。

```
a.csv
--------
123,001232323
456,004567772 
```

我有下面的代码。

```
srccsvfile = "C:\a.csv"
tgtxlsfile = "C:\a.xls"

'Instantiate Excel
Set objExcel = CreateObject("Excel.Application")

'open the CSV file
Set objWorkBook = objExcel.Workbooks.open(srccsvfile)

Set objWorksheet1 = objWorkbook.Worksheets(1)

objWorksheet1.Columns("A:I").AutoFit
objWorksheet1.Columns("B").NumberFormat="@"

'Save the file as excel workbook
objWorkBook.SaveAs tgtxlsfile, 39

'close workbook
objWorkBook.Close False
'quit excel
objExcel.Quit

'clean up
Set objWorkBook = Nothing
Set objExcel = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:23:21.803

将单元格的格式更改为“文本”而不​​是“一般”或“数字”，Excell 将不理会它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T02:51:29.070

我不确定您从哪里尝试执行您的代码。这是您可以从 Excel VBA 执行的操作；从其他地方执行代码需要您的代码中已经提到的一些调整......

```
Sub importCSVFile()
Dim objWorkBook As Workbook
Dim myFile as String
srccsvfile = "C:\temp\a.csv"

Workbooks.OpenText Filename:=myFile, Origin:=-535, StartRow:=1, _
       DataType:=xlDelimited, TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter _
        :=False, Tab:=False, Semicolon:=False, Comma:=False, Space:=False, _
        Other:=True, OtherChar:=",", FieldInfo:=Array(Array(1, 1), Array(2, 2)), _
        TrailingMinusNumbers:=True

Set objWorkBook = ActiveWorkbook

'do something with active WorkBook

End Sub 
```

# php - 如何解析传入 PHP Web 服务的 JSON

> ID：13213591
> 
> 赞同：1
> 
> 时间：2012-11-03T21:19:11.473
> 
> 标签：php, json, curl

我想通过一个 JSON：`{"name":"jason","age":"20}`在 PHP 虽然**POST**

在 RoR 中，我可以使用`params["name"]`&获得这两个值`params["age"]`

但我不知道如何在 PHP 中获取它们。

我知道我可以通过使用将 JSON 字符串“翻译”为关联数组，`json_decode`但我不知道如何获取 JSON 字符串。

在我的**PHP 代码**中，我尝试过这样的事情：

```
<?php
    $json_string = $_POST['params'];

    $json_object= json_decode($json_string);
    print_r($json_object);

    echo $json_object->name;
    echo " ";
    echo $json_object->age;
?> 
```

然后我用终端测试了PHP，我得到了**正确**的结果

```
curl -d 'params={"name":"jason", "age":"20"}' xxxx/test_json_decode.php 
```

它有效，但对我来说似乎很奇怪，因为我没有设置`'Content-Type: application/json'`

它是在 PHP 中解析 JSON 的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:52:06.263

content-type 仅在某些情况下有用，例如 jquery 执行标准 .post ，您没有明确告诉它期待 json 响应。json 字符串只是文本，内容类型只是接收者的线索。但是您仍然可以发送带有 image/jpeg 的 json 字符串，并且仍然可以对其进行解码并再次获得本机结构。

只要你传递给 json_decode() 的是一个有效的 JSON 字符串，不管它是用什么 mime 类型发送的，它都会被解码成一个原生结构。

# java - queryIntentActivities() 数据 Intent extras

> ID：13213592
> 
> 赞同：0
> 
> 时间：2012-11-03T21:19:13.257
> 
> 标签：java, android, text-to-speech

我的目标是获得可用的 TTS 语音引擎及其各自[可用的语言](https://stackoverflow.com/a/9993742/1256219)。我可以使用以下代码成功获取可用引擎：

```
 PackageManager pm = getPackageManager();

    Intent ttsIntent = new Intent();
    ttsIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
    // ttsIntent.getStringArrayListExtra(TextToSpeech.Engine.EXTRA_AVAILABLE_VOICES);

    ArrayList<String> engineInfo = new ArrayList<String>();

    List<ResolveInfo> list = pm.queryIntentActivities(ttsIntent,
            PackageManager.GET_META_DATA);

    for (ResolveInfo appInfo : list) {
        engineInfo.add(appInfo.activityInfo.applicationInfo.packageName);
        engineInfo.add(appInfo.activityInfo.applicationInfo.loadLabel(pm)
                .toString());
    } 
```

上面注释掉的行为意图请求额外的数据。我进行了很多搜索，但找不到`queryIntentActivities()`以这种方式使用“getExtra”或“putExtra”的示例。

因此，我可以假设，这不是一个选项，我需要回去阅读一些基础知识，为什么这是不可能的！？

如果我尝试检索数据，我会得到一个空指针，即使我正在检查它`!=null`是否有点奇怪？

```
appInfo.activityInfo.applicationInfo.metaData.getEtcEtc... 
```

任何帮助将不胜感激，在此先感谢。

`postPutEXTRA:`API 级别为 9，因此我无法使用[getEngines()](http://developer.android.com/reference/android/speech/tts/TextToSpeech.EngineInfo.html)，尽管这将涉及为每个对象初始化一个 tts 对象，因此无论如何都不理想。

`postPutEDIT:`我在循环中尝试了以下方法来提取关联的 uid，但它不适用于我测试的语音引擎之一。

```
 ApplicationInfo ai = null;
    try {
        ai = pm.getApplicationInfo(appInfo.activityInfo.applicationInfo.packageName, 0);
    } catch (NameNotFoundException e) {
        e.printStackTrace();
        return;
    }

    String[] voices = pm.getPackagesForUid(ai.uid); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:27:09.170

我无法解决这个问题的具体标题，但我确实通过以下方式获得了我想要的关于设备上可用语音引擎及其语言的信息，而无需用户交互：

```
private void getEngines() {

    Intent ttsIntent = new Intent();
    ttsIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);

    ArrayList<String> engineInfo = new ArrayList<String>();

    PackageManager pm = getPackageManager();

    List<ResolveInfo> list = pm.queryIntentActivities(ttsIntent,
            PackageManager.GET_META_DATA);

    for (ResolveInfo appInfo : list) {
        engineInfo.add(appInfo.activityInfo.applicationInfo.packageName);

        ttsIntent
                .setPackage(appInfo.activityInfo.applicationInfo.packageName);
        ttsIntent
                .getStringArrayListExtra(TextToSpeech.Engine.EXTRA_AVAILABLE_VOICES);

        startActivityForResult(ttsIntent, 33);

    }

    if (DE.BUG) {
        MyLog.d("engineInfo: " + engineInfo.size() + " : "
                + engineInfo.toString());
    }
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (requestCode == 33 && data != null) {

        ArrayList<String> available = data
                .getStringArrayListExtra("availableVoices");

        if (DE.BUG) {
            MyLog.i("Voices: " + available.toString());
        }
    }
} 
```

我留在了我的自定义日志记录类/方法中，以显示我在哪里捕获数据。您可以重新排列上述内容以将所有数据放入一个或多个全局数组列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:07:05.367

我经历了类似的过程，但如果我没记错的话，你不能简单地触发意图查询来获取可用的语言。这绝对是有道理的，因为可用的语言取决于用户将随 TTS 引擎安装的语音和其他软件包。换句话说：它不是您查询的静态参数，而是需要在运行时解析。

为了获得 TTS 引擎的可用声音（和其他信息），您需要实际启动/初始化它。这意味着您需要执行以下操作：

```
Intent checkIntent = new Intent();
checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
startActivityForResult(checkIntent, MY_DATA_CHECK_CODE); 
```

然后检索数据`onActivityResult(...)`：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode != MY_DATA_CHECK_CODE) return;
    // here you should be able to get the info from 'data', i.e.
    ArrayList<String> voices = getStringArrayListExtra(TextToSpeech.Engine.EXTRA_AVAILABLE_VOICES);
} 
```

请注意，我从Android 开发博客上的[一篇文章中复制粘贴了以上大部分内容。](http://android-developers.blogspot.co.nz/2009/09/introduction-to-text-to-speech-in.html)

自从我上次玩 TTS 以来已经有一段时间了，所以如果上述方法不起作用，请随时发表评论，我将仔细研究我当时所做的实现。

# objective-c - 目标 C：使用“刚好足够”的小数位格式化数字

> ID：13213598
> 
> 赞同：5
> 
> 时间：2012-11-03T21:20:08.623
> 
> 标签：objective-c

有没有一种快速格式化数字的方法（例如，使用 appendFormat 时）以便只显示足够的小数位？例如，4.23100 显示为 4.231，而 5.0000 仅显示为 5。

谢谢阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T22:56:52.743

使用 %g 而不是 %f

双 n = 1234.5678;

NSString str = [NSString stringWithFormat:@"number is %g", n];

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-10T15:28:59.753

以适当的精度使用 %g。

```
double number = 1234.123;

NSLog(@"Number equals: %.8g", number) 
```

如此处所引用[的](https://stackoverflow.com/a/5913115/1202222)，除非指定了最大精度，否则 %g 转换将默认为 6 个有效数字。%.7g 或更大都会给出所需的浮点数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T12:59:00.110

起初我找不到执行此操作的内置方法，因此如果有人感兴趣，我构建了一个快速函数（如下）。也就是说，我相信 %g（感谢 MSgambel，Roger Gilbrat）和 NSNumberFormatter 类（感谢 Inafziger，David Nedrow）更简洁，所以它们可能是更好的选择！

```
+ (NSString *)trimmedFraction:(float)fraction{

    int i=0; 
    float numDiff=0; 

    // Loop through possible decimal values (in this case, maximum of 6)
    for (i=0;i<=6;i++){

        // Calculate difference between fraction and rounded fraction
        numDiff=round(fraction*pow(10,i))/pow(10,i)-fraction;

        // Check if difference is less than half of the smallest possible value
        if (fabsf(numDiff)<(0.5*pow(10,-6))){
            break;
        }
    }

    // Return string of truncated fraction
    NSString *stringPattern=[NSString stringWithFormat:@"%%0.%df",i];
    return [NSString stringWithFormat:stringPattern,fraction];
} 
```

在代码中，您可以指定小数位的最大数量（例如，在这种情况下为 6）。然后你只需发送一个分数，它就会返回一个只有相关小数的字符串。例如，发送 4.231000 并返回 @"4.231"，发送 5.000000 并返回 @"5"。（同样，最好只使用 %g 和 NSNumberWithFormatter）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T05:05:06.330

如果将原始值存储为字符串而不是浮点数，那么这个问题就很有意义了。

我使用以下类别处理此问题`NSString`：

```
+ (NSString *) stringForNotANumber {
    static NSString *singleton;
    if (!singleton) singleton = @"NaN";
    return singleton;
}

- (NSUInteger) numberOfDecimalPlaces {
    NSString *strValue = self;

    // If nil, return -1
    if (!strValue) return -1;

    // If non-numeric, return -1
    NSNumberFormatter *f = [[NSNumberFormatter alloc] init];
    [f setMaximumFractionDigits:128];
    NSNumber *numValue = [f numberFromString:strValue];
    if (!numValue) return -1;

    // Count digits after decimal point in original input
    NSRange range = [strValue rangeOfString:@"."];
    if (NSNotFound == range.location) return 0;

    return [strValue substringFromIndex:range.location+1].length;
}

- (NSString *) plus:(NSString *) addend1 {
    NSString *addend2 = self;

    if (!addend1 || !addend2) return nil;
    if (addend1 == [NSString stringForNotANumber] ||
        addend2 == [NSString stringForNotANumber])
        return [NSString stringForNotANumber];

    NSNumberFormatter *f = [[NSNumberFormatter alloc] init];
    NSNumber *num1 = [f numberFromString:addend1];
    NSNumber *num2 = [f numberFromString:addend2];
    if (!num1 || !num2) return [NSString stringForNotANumber];

    double sum = num1.doubleValue + num2.doubleValue;

    [f setMinimumFractionDigits:MAX(addend1.numberOfDecimalPlaces,
                                    addend2.numberOfDecimalPlaces)];

    return [f stringFromNumber:[NSNumber numberWithDouble:sum]];
} 
```

# asp.net - 提供的票已过期

> ID：13213600
> 
> 赞同：3
> 
> 时间：2012-11-03T21:20:16.170
> 
> 标签：asp.net, .net-4.0, iis-7.5

我相信我已经研究了所有相关的 stackoverflow 问题以及其他 Web 资源，但是在一个 24x7 的 Web 应用程序中每天仍然有十几次或更多次这个问题，一次大约有 20 个用户使用。

```
Event code: 4005 
Event message: Forms authentication failed for the request. Reason: The ticket supplied has expired. 
```

用户说他们在 60 分钟超时之前就被注销了。（应用中的一些表格需要很长时间才能填写。用户正在采访人并写笔记，这可能需要很长时间。所以如果你在慢慢输入笔记20-30分钟后保存表格，它会很沮丧提交表单时将您注销。）

一些细节：

1.  这是运行 IIS 7.5 的单个 Web 服务器，而不是表单（数据库在另一个盒子上）。所有服务器都是虚拟机
2.  IIS 会话状态设置为“进行中”，在 cookie 设置下超时为 60 分钟。
3.  应用程序池的空闲超时设置为 60 分钟，回收间隔设置为 29 小时
4.  在这些指示工作进程失败或应用程序池被回收的“票证过期”消息之前，我没有在事件日志中看到任何错误。

最后是 web.config 的一个片段：

```
<authentication mode="Forms">
<forms loginUrl="~/Account/Login.aspx" timeout="60" protection="All"     slidingExpiration="true" />
</authentication> 
```

任何帮助追踪这些会话超时将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:24:03.587

我使用 jquery 空闲计时器来跟踪用户不活动并在会话超时之前显示警告。还允许用户通过进行 Ajax 调用来更新会话。仅供参考，您可以参考这些链接

[链接 1](http://programmerramblings.blogspot.com/2009/03/aspnet-session-timeout-control-jquery.html)

[链接2](http://code.msdn.microsoft.com/AspNetAlertSessionExpire-c230a148#content)

# common-lisp - LISP“错误非法函数对象...”

> ID：13213605
> 
> 赞同：1
> 
> 时间：2012-11-03T21:20:31.363
> 
> 标签：common-lisp

我刚开始在课堂上学习 lisp。我正在做一个家庭作业，其中我必须使用一些基本操作来编写一些非常基本的函数，例如 car、cdr、cons、append、reverse、atom、eq、equal 和 null。

所以这是我到目前为止的代码：

```
(defun union2 (l1 l2)
  (cond ((null l1) l2)
        ((member((car l1) l2)) (union2((cdr l1) l2)))
        (t (cons (car l1) (union2((cdr l1) l2)))))
  ) 
```

当我尝试运行测试时：

```
(union2 '(5 7 2 3 1) '(3 2 4 6 9)) 
```

我收到“错误：非法函数对象：（汽车 l1）”。我的印象是我正确地编写了代码。我究竟做错了什么？感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T22:50:44.377

不要在参数列表周围加上额外的括号。

*   `(member((car l1) l2))`应该`(member (car l1) l2)`
*   `(union2((cdr l1) l2))`应该`(union2 (cdr l1) l2)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T21:41:36.060

尝试使用编译器，例如 SBCL：

```
* (defun union2 (l1 l2)
  (cond ((null l1) l2)
        ((member((car l1) l2)) (union2((cdr l1) l2)))
        (t (cons (car l1) (union2((cdr l1) l2)))))
  )
; in: DEFUN UNION2
;     ((CAR L1) L2)
; 
; caught ERROR:
;   illegal function call

;     (MEMBER ((CAR L1) L2))
; 
; caught WARNING:
;   The function was called with one argument, but wants at least two.

;     ((CDR L1) L2)
; 
; caught ERROR:
;   illegal function call

;     (UNION2 ((CDR L1) L2))
; 
; caught WARNING:
;   The function was called with one argument, but wants exactly two.

;     ((CDR L1) L2)
; 
; caught ERROR:
;   illegal function call

;     (UNION2 ((CDR L1) L2))
; 
; caught WARNING:
;   The function was called with one argument, but wants exactly two.
; 
; compilation unit finished
;   caught 3 ERROR conditions
;   caught 3 WARNING conditions 
```

# email - 接收电子邮件时是否可以自动执行某些操作？（谷歌应用免费）

> ID：13213610
> 
> 赞同：0
> 
> 时间：2012-11-03T21:21:19.817
> 
> 标签：email, web, google-apps-script, gmail

例如，如果我收到一封发给 subscribe@mydomain.com 的电子邮件，有没有办法触发它对我自己的服务器进行 GET 或 POST 调用？

另一种用途是通过电子邮件发送链接，如果电子邮件符合特定条件，则让我的服务器自动下载链接。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:52:56.310

Google Apps 脚本非常适合实现这一目标。您需要使用 Google Script 中的 GmailApp、Script Triggers 等来自动化它。

最好的祝福

[Apps 脚本教程](https://sites.google.com/site/appsscripttutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:26:40.303

根据您要实现的目标，像[ifttt](http://ifttt.com)这样的服务可能会解决您的问题，而无需您编写任何代码。

# common-lisp - 用 common lisp 编写 lambda 表达式

> ID：13213611
> 
> 赞同：18
> 
> 时间：2012-11-03T21:21:39.260
> 
> 标签：common-lisp, lambda, clisp

我目前正在阅读 Paul Graham 的 ANSI Common Lisp，并且我有一个关于编写 lambda 表达式的问题。

我们是否需要在 lambda 表达式前面加上`#'`?。如果我在 REPL 中写这样的东西，它会正常工作

```
> ((lambda (x) (+ x 1)) 1)
  2 
```

这也会

```
> (mapcar (lambda (x) (+ x x)) '(1 2 3 4))
  (2 4 6 8) 
```

我知道这`#'`表示一个功能。所以我的问题是，这是某种约定还是推荐的做法？如果我不给 lambda 加前缀，会不会出现任何问题`#'`，它是否依赖于实现？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-03T21:38:43.003

**LAMBDA 表达式**

`(lambda ...)`仅在某些地方被视为*lambda 表达式*`function`，例如表单或函数调用的头部。不计算 Lambda 表达式。

```
(function              ; special operator FUNCTION
  (lambda () 'foobar)) ; <- this is a lambda expression

(                    ; a function call
 (lambda (foo) foo)  ; <- this is a lambda expression
 'bar                ; argument
) 
```

但这里`(lambda ...)`是一个宏形式，而不是一个 lambda 表达式：

```
(funcall             ; calling a function via funcall
 (lambda (foo) foo)  ; this is not a lambda expressions, but the macro lambda
                     ;  as all arguments to FUNCALL it will be
                     ;    macro expanded and evaluated
                     ;  it expands to (function (lambda (foo) foo))
 'bar)               ; argument 
```

**The LAMBDA macro**

[LAMBDA](http://www.lispworks.com/documentation/HyperSpec/Body/m_lambda.htm) is a macro. It expands `(lambda ...)` to `(function (lambda ...))`, which is the equivalent of `#'(lambda ...))`.

```
CL-USER > (macroexpand '(lambda (foo) foo))
(FUNCTION (LAMBDA (FOO) FOO)) 
```

The macro saves you a bit of writing/reading, that's all. In the first version of Common Lisp (CLtL1) there was no `LAMBDA` macro. It has been added later and is now a part of *ANSI Common Lisp*,

**The FUNCTION special operator**

[FUNCTION](http://www.lispworks.com/documentation/HyperSpec/Body/s_fn.htm#function) is a special operator. It expects a function name or a *lambda expression*. Thus the name or the *lambda expression* are not evaluated. In fact *lambda expressions* can't be evaluated at all. Inside `FUNCTION`, the *lambda expression* is **not** a macro form and thus will **not** be expanded again. The purpose of `FUNCTION` is to return the corresponding function object which is denoted by the name or by the *lambda expression*. It returns the function object as a value. With this special operator one can access the function object from global functions and lexical functions.

The `FUNCTION` operator is necessary in Common Lisp, because it has separate namespaces for values, functions and a few other things. It as a so-called *Lisp-2* or even *Lisp-n*, with two or more namespaces.

**Lambda expressions in function position in a function form**

`((lambda (foo) foo) 10)` is supported by built-in syntax for Common Lisp. See [Lambda Forms](http://www.lispworks.com/documentation/HyperSpec/Body/03_ababd.htm).

**Confusing**

This is all logical, but confusing. Don't worry you are not alone, but in practice it's not a big deal.

# google-chrome - 将参数传递给 chrome.tabs.executescript()

> ID：13213614
> 
> 赞同：0
> 
> 时间：2012-11-03T21:21:51.717
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools, google-chrome-frame, chrome-web-store

如何将参数传递给`chrome.tabs.executescript()`？我已经在`chrome.tabs.executescript()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T04:48:04.880

我认为您可以将一个字符串组成一个小js代码，首先传递给executescript（），在您要调用的真实js之前将一些参数添加到全局空间（或内容脚本的隔离空间）中。

# c - 微存储器管理器错误

> ID：13213621
> 
> 赞同：0
> 
> 时间：2012-11-03T21:22:28.543
> 
> 标签：c, memory-management, malloc

我正在尝试在我的 C 程序中编写简单的内存管理器（我应该说是内存跟踪器）。

我基本上是在创建分配块的双向链表，在每个块的开头我将指针放在上一个和下一个上。Malloc 过程如下所示：

```
 typedef struct MemUnit TMemUnit;
    struct tMemUnit
    {
        TMemUnit *prev;
        TMemUnit *next;
    }

    TMemUnit *new = malloc(sizeof(TMemUnit) + wantedSize);
    if (new == NULL)
        /* ERROR */
    else
    {
        if (memFirst == NULL) {
            memFirst = new;
            memLast = new;
            new->prev = NULL;
            new->next = NULL;
        } else {
            new->prev = memLast;
            new->next = NULL;
            memLast->next = new;
            memLast = new;
    }
    return (void *)(new + sizeof(TMemUnit)); 
```

问题是在以前没有的地方出现分段错误。

Valgrind 也给出了无效的读/写错误。

```
==22872== Invalid write of size 4
==22872==    at 0x400FF1: main (test-memory.c:40)
==22872==  Address 0x54d51b0 is not stack'd, malloc'd or (recently) free'd 
```

当我为这个错误打印分配块的地址（wantedSize = 20 * sizeof(int)，尝试写入第一个 int）时，它们看起来没问题：

```
new --> 0x54d5030
new + sizeof(TMemUnit) + wantedSize --> 0x54d5430 
```

我不知道我的错误在哪里。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:26:55.420

问题可能出在这里：

```
return (void *)(new + sizeof(TMemUnit)); 
```

您的`new`指针是 type `TMemUnit *`，因此根据 C 指针算法的规则，您将添加`sizeof(TMemUnit) * sizeof(TMemUnit)`字节，这太多了。相反，请尝试：

```
return (void *)((char *)new + sizeof(TMemUnit)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:26:05.280

尝试使用 return (void*)(new + 1) 而不是 return (void*)(new + sizeof(TMemUnit))

指针算术 (p+n) 已经以 sizeof(*p) 为单位进行计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:27:05.103

你可能想要`return (void *)((char *)new + sizeof(TMemUnit));`

# javascript - 不了解如何从数组中加载类属性

> ID：13213622
> 
> 赞同：1
> 
> 时间：2012-11-03T21:22:30.560
> 
> 标签：javascript, class

我会很感激一些帮助。我正在尝试做一个小的 javascript 程序，它执行以下操作：

1）我已经有一些数组，其中包含有关不同汽车的一些信息。例如：

```
var brand = ["Audi", "Ford", "Peugeot", "Nissan"];
var color = ["red", "black", "black", "white"]; 
```

2）然后，我想创建一个类来创建一辆新车并通过一种方法接收属性，该方法从我存储在数组中的那些中检索它们，

这样的事情正确吗？

```
function newcar() {
    this.prototype.loadinfo = function() {
        var cbrand = brand[0];
        var ccolor = color[0];
    }
} 
```

抱歉，如果这是非常错误的，但我问的原因是我在检查的网页上没有找到有关此特定案例的任何信息。由于我只是想通过互联网教程来学习 javascript，所以我试图尽可能地猜测解决方案！

如果它是正确的（有点）或者正确的版本非常相似，我无法理解在制造新车时我应该如何在阵列中前进。例如，如果我运行它一次，创建的第一辆汽车将收到位置 [0] 上的信息，但如果我运行它两次或更多次......我怎么知道我应该在数组的哪个位置找到信息？

我对这个话题很困惑。如果有人能给我一些建议，我将不胜感激。与此同时，我继续阅读它，看看我是否发现了其他东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:29:42.913

如果我理解正确，您想为数组中的多个品牌创建一个新的汽车对象。首先是修复你的构造函数。请注意，构造函数是大写的，并且原型应该在外部声明，但您不需要原型，因为您处理的是唯一属性而不是共享方法。然后您可以传递 2 个将分配给属性的参数。换句话说：

```
function Car( brand, color ) {
  this.brand = brand;
  this.color = color;
} 
```

如果您需要一种方法来读取这些属性，请将其添加到原型中，例如：

```
Car.prototype = {
  loadInfo: function() {
    alert( this.brand +':'+ this.color );
  }
}; 
```

最后，要为数组中的每个项目创建一辆新车，您可以这样做：

```
var cars = [];
for ( var i = 0; i < brand.length; i++ ) {
  cars.push( new Car( brand[i], color[i] ) );
} 
```

现在`cars`阵列中有 4 辆汽车，每辆汽车都有不同的品牌和颜色。

但更好的是，您可以在一个对象和一个对象中组织您的品牌和颜色`for...in`来创建新车：

```
var cars = {
  Audi: 'red',
  Ford: 'black',
  Peugeot: 'black',
  Nissan: 'white'
};

var mycars = [];
for ( var c in cars ) {
  mycars.push( new Car( c, cars[c] ) );
} 
```

# mysql - 如何在 SQL 中查找值的百分比？

> ID：13213624
> 
> 赞同：0
> 
> 时间：2012-11-03T21:22:40.797
> 
> 标签：mysql, sql, database

我使用以下查询来找出英雄在游戏中获胜的百分比：

```
SELECT Hero, (COUNT(*) * g.games) AS p
FROM gamestatistics
JOIN (
SELECT 100/COUNT(*) AS games
FROM gamestatistics
) AS g
WHERE PointEarned>0
GROUP BY Hero
ORDER BY p DESC 
```

但这给了我所有游戏的百分比。我想知道

> `percentage(for Hero)=(Won games by this player)/(Played games by this hero)`

代替

> 百分比（英雄）=（该玩家赢得的游戏）/（所有游戏）
> 谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T21:31:53.500

```
SELECT  hero, AVG(pointEarned > 0) p
FROM    gamestatistics
GROUP BY
        hero
ORDER BY
        p DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T21:29:03.683

试试这个

```
select
   gc.Hero,
   sum(case when gc.PointEarned > 0 then 1 else 0 end) / count(*) as p
from gamestatistics as gc
group by by gc.Hero
order by p desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T21:29:13.617

代替我认为它无法正确执行组的情况`count(HERO)`。`count(*)`

```
 SELECT Hero, (COUNT(HERO) * g.games) AS p
  FROM gamestatistics
  JOIN (
        SELECT 100/COUNT(*) AS games
        FROM gamestatistics
  ) AS g
  WHERE PointEarned>0
  GROUP BY Hero
  ORDER BY p DESC; 
```

编辑：我相信你想`sum of PointsEarned`除以计数。在这种情况下，查询几乎没有变化，如下所示：

```
SELECT Hero, (SUM(case when PointEarned <1 then 0 else 1 end)*100/count(HERO)) AS p
FROM gamestatistics
GROUP BY Hero
ORDER BY p DESC; 
```

# c# - SplashScreen.Close(Timespan.FromMilliseconds(int)) ：Timespan Complete 是否有事件调度？

> ID：13213625
> 
> 赞同：9
> 
> 时间：2012-11-03T21:22:43.177
> 
> 标签：c#, wpf, splash-screen, timespan, event-listener

C# WPF 应用程序

我通过使用在启动时显示[SplashScreen](http://msdn.microsoft.com/en-us/library/system.windows.splashscreen.aspx)的时间最短

```
Thread.Sleep(int); //int = milliseconds to display splash screen 
```

当达到该睡眠时间时，代码将恢复，并且 SplashScreen 通过使用淡出关闭

```
SplashScreen.Close(Timespan.FromMilliseconds(int)); //int = milliseconds fade-out 
```

我想在这一点上暂停，等到 SplashScreen 变得 100% 透明并完全关闭，然后继续其他任务，IE 写入控制台或显示 MainWindow。

(TimeSpan.FromMilliseconds(int)) 完成时是否触发了事件？还有其他建议吗？

```
namespace StartupSplash
{
    public class SplashScreenStartup
    {
        //IMPORTANT:set image property to Resource and NOT Splash Screen
        private SplashScreen Splash = new SplashScreen("Resources/SplashScreen.png");

        public void SplashScreenStartUp()
        {
            Splash.Show(false, true);
            Thread.Sleep(3000); // Pause code, display splash screen 3 seconds
            Splash.Close(TimeSpan.FromMilliseconds(3000)); // 3 second splash fade-out
            // I want to wait until splash screen fadeOut has completed before
            // this next console output is performed.
            Console.WriteLine("Executes before Splash fadeOut completes.");
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T17:16:04.040

也许这段代码可以帮助你。使用 backgroundworker 类：

```
BackgroundWorker worker = new BackgroundWorker();
worker.DoWork += (o, ea) => 
{
   // Dispatcher.Invoke commands the dispatcher to do something
   Dispatcher.Invoke((Action)(() => Splash.Close(TimeSpan.FromMilliseconds(3000)));
   // Sleeps this worker but NOT the UI
   Thread.Sleep(3000);
};
worker.RunWorkerCompleted += (o, ea) =>
{
    // Open your mainwindow sample
    MainWindow w = new MainWindow();
    w.Show();
};

//Runs the worker on its own thread
worker.RunWorkerAsync(); 
```

这应该开始关闭您的启动画面，然后通过它进入睡眠状态，完成后它将打开您的主窗口。我实际上使用与此非常相似的东西来实现我的 WPF 应用程序的登录和获取信息，同时显示一个进度条并将其中的文本更新为“连接到服务器”、“登录”和“获取数据”之类的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:48:53.900

我发现以下代码有效。我不太清楚为什么，我将深入研究以更好地理解这一点。

如有需要请批评指正，我是来学习和分享的。干杯。

```
class Tester
    {
    // Create splash screen instance and reference the image location.
    // IMPORTANT Ensure that the image properties are set to Resource and NOT Splash Screen
    private SplashScreen Splash = new SplashScreen("Resources/SplashScreen.png");

    public void Display()
    {
        Splash.Show(false, true);
        // pause the code, thus, displaying the splash for 3 seconds
        Thread.Sleep(3000); 
        // close the splash
        Close();
    }

    private void Close()
    {
        // sets the fadeout time in milliseconds
        int fadeOutTime = 1500; 

        // wait until the splash screen fadeOut has completed before writing to the console
        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += (o, ea) =>
        {
            // Run background task (fade out and close the splash)
            Splash.Close(TimeSpan.FromMilliseconds(fadeOutTime));
            // Sleep this worker but NOT the UI (for the same time as the fade out time)
            Thread.Sleep(fadeOutTime);
        };
        worker.RunWorkerCompleted += (o, ea) =>
        {
            // Execute task after splash has closed completely
            Console.WriteLine("This is after the splash screen fadeOut completes.");
        };
        // start the background task, on it's own thread
        worker.RunWorkerAsync(); 
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:06:55.177

我最终得出结论，我在之前的评论中叫错了树。在后台显示 SplashScreen 既有问题（无论我尝试什么，它都拒绝自动关闭）和不必要的。这就是我最终得到的……真的很简单！

```
using System;
using System.Net;
using System.Windows;

namespace WpfApplication1
{
  /// <summary>
  /// Interaction logic for Window1.xaml
  /// </summary>
  public partial class Window1 : Window
  {
    public Window1() {
      InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e) {
      // show the splash screen
      // nb: Resources/SplashScreenImage.png file Properties ~ Build Action='Resource'
      var splashScreen = new SplashScreen("Resources/SplashScreenImage.png");
      splashScreen.Show(false); // don't close automatically
      // ... initialise my application ...
      Initialise();
      // close the splash screen.
      splashScreen.Close(TimeSpan.FromMilliseconds(250D));
    }

    private void Initialise() {
      // do my long-running application initialisation on the main thread. 
      // In reality you'd do this download asyncronously, but in this case
      // it serves as a simple proxy for some "heavy" inititalisation work.
      textBox1.Text = new WebClient().DownloadString("http://stackoverflow.com/questions/13213625/splashscreen-closetimespan-frommilliseconds-listen-for-closed-event");
    }
  }

} 
```

我希望这会有所帮助......虽然我完全不相信它会;-)

干杯。基思。

PS：我想知道为什么飞溅拒绝关​​闭？我猜它在内部依赖于仅在 WPF 的 event-dispatch-thread 等效项（无论它被称为什么）上可用（即可订阅）的事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T04:02:02.253

在 TimeSpan 完成后，我从来没有找到要监听的事件。此外，在决定不停止线程后，我选择使用 DispatcherTimers。

（我已将逻辑细化并包含在这一类中以供参考）

```
using System;
using System.Windows;
using System.Windows.Threading;

namespace StartupSplash2
{

public partial class MainWindow : Window
{
    private DispatcherTimer visibleTimer;
    private DispatcherTimer fadeoutTimer;
    private SplashScreen splash;
    private int visibleTime = (4000); //milliseconds of splash visible time
    private int fadeoutTime = (1500); //milliseconds of splash fadeout time

    public MainWindow()
    {   
        //hide this MainWindow window until splash completes
        this.Visibility = Visibility.Hidden; 
        InitializeComponent();
        splashIn(); //start the splash
    }

    private void splashIn()
    {
        splash = new SplashScreen("Resources/SplashScreen.png"); //ensure image property is set to Resource and not screen saver
        visibleTimer = new DispatcherTimer(); //timer controlling how long splash is visible
        visibleTimer.Interval = TimeSpan.FromMilliseconds(visibleTime);
        visibleTimer.Tick += showTimer_Tick; //when timer time is reached, call 'showTimer_Tick" to begin fadeout
        splash.Show(false, true); //display splash
        visibleTimer.Start();
    }

    private void showTimer_Tick(object sender, EventArgs e)
    {
        visibleTimer.Stop();
        visibleTimer = null; //clear the unused timer
        fadeoutTimer = new DispatcherTimer();
        fadeoutTimer.Interval = TimeSpan.FromMilliseconds(fadeoutTime); //a timer that runs while splash fades out and controlls when main window is displayed
        fadeoutTimer.Tick += fadeTimer_Tick; //when fadeout timer is reached, call 'fadeTimer_Tick' to show main window
        splash.Close(TimeSpan.FromMilliseconds(fadeoutTime)); //begin splash fadeout to close
        fadeoutTimer.Start();
    }

    private void fadeTimer_Tick(object sender, EventArgs e)
    {
        fadeoutTimer.Stop();
        fadeoutTimer = null; //clear the unused timer
        splash = null; //clear the splash var
        MainWindowReady(); //call method to display main window
    }

    public void MainWindowReady()
    {
        this.Visibility = Visibility.Visible;
        //Here is the start of the Main Window Code
        this.Content = "Ok, the app is ready to roll";
    }

  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T13:21:10.997

我发现了一个名为 SplashScreen.Dismissed 的事件，它允许您在 SplashScreen 过期后启动应用程序。但是，最低要求的操作系统是 Windows 8，我无法使用它。更多信息可以在这里找到[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.activation.splashscreen.dismissed?cs-save-lang=1&cs-lang=csharp#code-snippet-1)

# javascript - 通过ajax返回的html中的JS代码未执行

> ID：13213629
> 
> 赞同：2
> 
> 时间：2012-11-03T21:23:26.500
> 
> 标签：javascript, jquery, ajax

例如，假设我运行了一个 ajax 调用，返回的数据类似于：

```
<article>
    <h2>Howdy</h2>
    <script type="text/javascript">
        alert('hi');
        posts[23] = 'this wont get added into the posts array';
    </script>
</article> 
```

然后我将这个返回的数据直接插入到页面上已经存在的 div 中。所有的 javascript 都不会执行。我该如何正确地做到这一点并使其发挥作用？我对返回的内容没有太多控制权，因此返回 json 不是一种选择。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:27:10.793

要执行插入到您的 html 中的 JS 代码，您可以使用 eval() 函数。例如：`eval(document.getElementById('myJSDiv').innerHTML);`希望这就是你要找的。

# css - 如何为 Jetbrains PhpStorm 添加 Compass 语法支持？

> ID：13213631
> 
> 赞同：18
> 
> 时间：2012-11-03T21:23:39.437
> 
> 标签：css, compass-sass, phpstorm

我正在使用 JetBrains PhpStorm，这可能是我用过的最史诗般的 IDE。

问题很简单。如何为其添加 Compass 语法支持？我已经安装了它，它渲染和工作，但 PhpStorm 仍然抱怨未定义的导入和混合。

我该如何解决这个问题？Compass 是否可以作为外部库包含在内？

* * *

**编辑**：我只想指出，**[此功能请求](http://youtrack.jetbrains.com/issue/RUBY-8299)**是针对 RubyMine IDE（也由 JetBrains 提出），而不是针对 PhpStorm/WebStorm。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-16T16:01:53.763

这是对马丁答案的解释。sass 文件夹中 compass gem 目录的符号链接效果很好。

说明(Windows)

1.  以管理员权限打开 cmd
2.  更改项目 sass 文件夹的路径，例如`cd projectname\sass`
3.  运行`mklink /d compass $GEM_LOCATION\frameworks\compass\stylesheets\compass`，至于我 $GEM_LOCATION =`C:\dev\Ruby200\lib\ruby\gems\2.0.0\gems\compass-0.12.2`

就是这样，现在 PhpStorm 不会将 compass mixins 突出显示为错误，并将它们添加到自动完成建议中。

**警告**：如果你想删除创建的符号链接不要使用删除，它将删除源目录。以管理员权限打开 cmd `cd $yourProjectSassPath`，然后运行`rmdir compass`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-08T09:50:24.240

正如上述用户所提到的，它还可以将 Compass 样式表的路径添加为项目中的资源目录。

例如，我的指南针样式表位于： `C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.2/frameworks/compass/stylesheets`

1.  转到设置 > 项目设置 > 目录。
2.  添加内容根
3.  添加指南针样式表目录
4.  单击“资源根”（蓝色图标）

当您申请时，您会看到 PhpStorm 可以毫无问题地找到指南针样式表。您甚至可以 ctrl+click (windows) 直接打开它们。

祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-01T13:35:45.493

我通过将`compass`-directory (from `$GEM_LOCATION/frameworks/compass/stylesheets/compass`) 的符号链接放置到我的样式表所在的文件夹中来解决它。这更像是一种解决方法，但它让我和 phpstorm-inspections/-autocompletion 很高兴。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-06T02:56:09.373

我认为最好在目录设置中添加目录：http: [//www.jetbrains.com/phpstorm/webhelp/directories.html](http://www.jetbrains.com/phpstorm/webhelp/directories.html)

在上面的示例中，添加 C:\dev\Ruby200\lib\ruby\gems\2.0.0\gems\compass-0.12.2 的新内容根目录。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-06T13:57:07.817

通过使用更好的可执行文件源可以更轻松地解决此问题。

来自：http: [//youtrack.jetbrains.com/issue/WEB-9139](http://youtrack.jetbrains.com/issue/WEB-9139)

在 Windows 中，使用可执行路径，例如：

```
C:\Ruby200\lib\ruby\gems\2.0.0\gems\compass-0.12.2\bin\compass 
```

在 Mac 上使用类似：

```
/Library/Ruby/Gems/2.0.0/gems/compass-0.12.2/bin/compass 
```

# database - 我应该如何使用关系？怎么画图？

> ID：13213632
> 
> 赞同：0
> 
> 时间：2012-11-03T21:23:46.880
> 
> 标签：database, relational-database, diagram

我有问题，因为我不确定它是否可能，如果它是我应该使用哪种关系，我的问题看起来像：

桌子`Users`

```
Id 
```

桌子`Transaction`

```
Id
IdProducentUser
IdConsumerUser 
```

每列都是必需的。

在这种情况下，两者都`IdProducentUser`应该`IdConsumerUser`是`foreign key`这样，每个用户都可以有很多事务，但我不知道我应该使用哪种关系以及我应该如何在图表上绘制它。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T10:08:46.967

If you have exactly two users in Transaction then you can create two relations one-to-many:

![enter image description here](../Images/d821701e16cd5a91f52749ee3ee42a41.png)

But if your user can take part in multiple Transactions and your Transaction can have multiple Users then it will be a many-to-many relation which in second phase of modeling should be drawn by additional extra entity, which breaks many-to-many relation.

# iphone - 如何制作类似于 iphone/ipads 启动器屏幕的网格？

> ID：13213636
> 
> 赞同：3
> 
> 时间：2012-11-03T21:24:09.317
> 
> 标签：iphone, ios, xcode, ipad, grid

我见过一些用 UITableView 制作的网格，但我真的不喜欢每个单元格与另一个单元格之间的距离。如果有一种方法可以创建像 iphone 上的主屏幕（解锁后的屏幕）这样的网格系统，那就太好了。我不需要一个精确的解决方案，但需要一个正确方向的点，也许一组库可以浏览会很棒。我正在运行 xcode 4.4.1

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:56:30.613

关键是 UIScrollView 具有分页模式（因为按钮可能比视图中的按钮多）。它在 Apple ocs 中有所介绍：

[http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/UIScrollView_pg/ScrollViewPagingMode/ScrollViewPagingMode.html](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/UIScrollView_pg/ScrollViewPagingMode/ScrollViewPagingMode.html)

如果你使用它，每个“页面”都会有 n 个按钮/视图，当点击这些按钮/视图时，它们会调用协议/委托回调，以便消费者使用要处理的数据，并且它会在该页面视图中均匀地布局 UIView/按钮。如果您需要我的样品，请与我联系。

您可能不想将 iOS6 作为最低要求，但如果您这样做，您可以按照评论中建议的 H2CO3 和我们的 UICollectionview 进行操作。这是一个教程： [http ://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

还有一些开源启动器，您可以查看它们的代码。这里有一些（我相信还有更多）。

[http://www.cocoacontrols.com/platforms/ios/controls/sespringboard](http://www.cocoacontrols.com/platforms/ios/controls/sespringboard)

代码位于：[https ://github.com/sarperdag/SESpringBoard](https://github.com/sarperdag/SESpringBoard)

另外： http: [//www.cocoacontrols.com/platforms/ios/controls/openspringboard](http://www.cocoacontrols.com/platforms/ios/controls/openspringboard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:38:34.910

使用`UICollectionView`. 您可以使用它创建网格类型视图。它在 iOS 6 中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T01:26:17.637

如果您可以针对 iOS 6+，请使用 UICollectionView。它是多年来 iOS 中最好的新事物之一，它将与 UITableView 一样重要。

您要求的布局只有几行代码。

NSHipster 对 UICollectionViews 有很好[的解释，](http://nshipster.com/uicollectionview/) Ray Wenderlich 有很好的[教程](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)。

（那里有很多示例代码，但这是我最近为[涉及 UICollectionViews 的另一个问题所做](https://stackoverflow.com/questions/13142124/set-border-in-uicollectionview)[的一个非常简单的示例项目](https://github.com/erikt/ETMultiSelect)）

# java - Spring + session + hibernate = 错误监听器启动和错误创建 bean

> ID：13213643
> 
> 赞同：2
> 
> 时间：2012-11-03T21:24:39.213
> 
> 标签：java, spring, hibernate

我对上面提到的事情有一些问题。

这是我的springconfig：

```
 <context:annotation-config/>
<context:property-placeholder location="jdbc.properties"/>

<bean id="cart" class="cart.ShoppingCart" scope="session">
    <aop:scoped-proxy/>
</bean>
<bean id="shopServlet" class="ShopServlet" scope="request"/>
<bean id="cartServlet" class="cart.ShoppingCartServlet" scope="request"/>
<bean id="productService" class="products.ProductService"/>
<bean id="orderBean" class="order.OrderBean" scope="request"/>
<bean id="orderService" class="order.OrderService"/>

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${jdbc.driverClassName}"/>
    <property name="url" value="${jdbc.url}"/>
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
            <prop key="hibernate.generate_statistics">${hibernate.generate_statistics}</prop>
        </props>
    </property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/>
<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean> 
```

这是代码：

```
@Repository
@Transactional
public class ProductService{

@Autowired
SessionFactory sessionFactory; 
```

和堆栈跟踪：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cart' defined in BeanDefinition defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor#0': Cannot create inner bean '(inner bean)' of type [org.springframework.transaction.interceptor.TransactionInterceptor] while setting bean property 'transactionInterceptor'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class

Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor#0': Cannot create inner bean '(inner bean)' of type [org.springframework.transaction.interceptor.TransactionInterceptor] while setting bean property 'transactionInterceptor'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class

Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class

Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class

Caused by: java.lang.IncompatibleClassChangeError: Implementing class 
```

我尝试使用此示例[链接](http://javaprogrammingtips4u.blogspot.com/2010/04/spring-integration-with-hibernate_23.html)并搜索许多不同的解决方案，但我不知道。某些版本不匹配，或者我不理解某些内容。

依赖项：

```
 <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.9</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib-nodep</artifactId>
        <version>2.2.2</version>
    </dependency>
    <dependency>
        <groupId>com.google.code.gson</groupId>
        <artifactId>gson</artifactId>
        <version>2.2.2</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>20030825.184428</version>
    </dependency>
    <dependency>
        <groupId>commons-pool</groupId>
        <artifactId>commons-pool</artifactId>
        <version>20030825.183949</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.apache.myfaces.core</groupId>
        <artifactId>myfaces-impl</artifactId>
        <version>2.1.3</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-hibernate3</artifactId>
        <version>2.0.8</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>aopalliance</groupId>
        <artifactId>aopalliance</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.5.6-Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.1.7.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-commons-annotations</artifactId>
        <version>3.2.0.Final</version>
    </dependency> 
```

有任何想法吗？

如果有人觉得非常强大 - 这是完整的代码。应用非常小。[关联](https://www.dropbox.com/s/smy50sjlrvsiiyo/shoplab2-test.zip)

# c# - Windows 窗体应用程序和 SQL Server

> ID：13213644
> 
> 赞同：0
> 
> 时间：2012-11-03T21:24:48.630
> 
> 标签：c#, sql-server, visual-studio-2010

**更新 2**

`System.Configuration`我通过添加到参考文件来修复错误。我已经将它添加到我的课程中，并`using System.Configuration;`
在这里找到了答案：[当前上下文中不存在名称“ConfigurationManager”](https://stackoverflow.com/questions/1274852/the-name-configurationmanager-does-not-exist-in-the-current-context/1836938#comment18074599_1836938)

任何进一步的问题将在一个新问题中解决。

**原始（ish）帖子**

我有 Microsoft SQL Server Management Studio。在工作室中，我创建了一个名为的数据库，该数据库`Logbook`存在于我的计算机上。

我还在 VS C# Express 中使用 Windows 窗体应用程序创建了一个用户界面。我想将它连接到我的日志数据库，以便通过 UI 更新、选择、删除和插入条目到数据库中。

但是，我无法弄清楚如何将两者联系起来。我玩过“添加新数据源”向导无济于事。我在 MSDN 或其他在线教程中也找不到任何有用的东西。

**更新**

我创建了一个新的数据库和项目来使用，直到我弄清楚如何正确地做到这一点，这样我就不会意外地破坏我的项目中的任何东西。
架构是：

```
Student(sid: int, fname: char(10), lname: char(10), age:int, major:char(10))
Course(cid:int, desc:char(50), dept:char(10))
Enrolled(sid:int, cid:int, quarter:char(10), grade:char(10)) 
```

这是“添加数据源”向导生成的连接字符串

```
<add name="boathouseLogConnectionString"
        connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=&quot;C:\Program Files\Microsoft SQL Server\MSSQL11.SQLEXPRESS\MSSQL\DATA\boathouseLog.mdf&quot;;Integrated Security=True;Connect Timeout=30;User Instance=True"
        providerName="System.Data.SqlClient" /> 
```

我已经成功地将我的数据库放入项目中。但是，当我尝试运行存储过程时出现此错误`Argument Exception was unhandled. Format of the initialization string does not conform to specification starting at index 0.`

错误发生在第 2 行。

```
 DataTable dt = new DataTable();
        SqlConnection sqlConn = new SqlConnection(selectedConnectionString);
        SqlCommand myCommand = new SqlCommand("proc_getMember", sqlConn);
        myCommand.CommandType = CommandType.StoredProcedure;
        SqlDataAdapter da = new SqlDataAdapter(myCommand); 
```

`selectedConnectionString`变量设置为`boathouseLogConnectionString`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:39:05.867

### 初始提示

如果您想查看连接到数据库的 Windows 表单的一些示例，我可以推荐这些[表单而不是数据视频系列](http://msdn.microsoft.com/en-us/vstudio//bb466226.aspx#formsoverdata)。视频 2 是关于[如何连接到数据库的](http://msdn.microsoft.com/en-us/vstudio/bb643826)。

在 app.config 文件中，您可以放置​​您的连接数据

```
<connectionStrings>
    <add name="OrderManager.My.MySettings.OMSConnectionString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\OMS.mdf;Integrated Security=True;User Instance=True"
        providerName="System.Data.SqlClient" />
</connectionStrings> 
```

为了能够更好地帮助您，我需要更多详细信息。如果您在管理工作室中连接，您可以查看您的连接属性。这里的值是什么等等。

### 更新

还有[一个](https://stackoverflow.com/questions/13215172/database-connection-error-file-in-use)类似问题的问题。可能是您正在[运行用户实例](http://blogs.msdn.com/b/sqlexpress/archive/2006/11/22/connecting-to-sql-express-user-instances-in-management-studio.aspx)。请添加更多详细信息：

*   添加有关您的连接字符串的信息（我假设您正在使用带有[本地数据文件的](http://msdn.microsoft.com/en-us/library/ms246989%28v=vs.80%29.aspx)[文件附加连接](http://msdn.microsoft.com/en-us/library/ms233763%28v=vs.80%29.aspx)）
*   你在哪里点击你的数据库？您是单击 mdf 文件还是使用管理工作室或视觉工作室

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:08:21.443

主要有两种方式，可以使用Entity Framework 或ADO.NET 基础。对于简单的任务，您可以使用 ado.net 功能。首先，您必须创建 SqlConnection 对象并将您的 ConnectionString 传递给构造函数。其次，您必须使用 SqlCommand 对象并为命令设置所需的命令文本。最后你必须执行命令。有几种执行方式：

1.  ExecuteNonQuery 用于更新、删除和插入命令

2.  ExecuteReader 对于 Select 命令，此方法返回一个 SqlDataReader，您可以从中获取结果。

# java - 在 JScrollPane 和 JPanel 中将 JTable 的大小设置为 JFrame 的大小

> ID：13213645
> 
> 赞同：7
> 
> 时间：2012-11-03T21:24:51.807
> 
> 标签：java, swing, jtable, jscrollpane, preferredsize

我想要与框架具有相同宽度的表格，并且当我调整框架大小时，表格也需要调整大小。我认为不能正常工作`setSize()`。`JTable`你能帮助我吗？

```
import java.awt.Color;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;

public class Main extends JFrame {

    public Main() {
        setSize(400, 600);
        String[] columnNames = {"A", "B", "C"};
        Object[][] data = {
            {"Moni", "adsad", 2},
            {"Jhon", "ewrewr", 4},
            {"Max", "zxczxc", 6}
        };

        JTable table = new JTable(data, columnNames);
        JScrollPane tableSP = new JScrollPane(table);

        int A = this.getWidth();
        int B = this.getHeight();

        table.setSize(A, B);
        JPanel tablePanel = new JPanel();
        tablePanel.add(tableSP);
        tablePanel.setBackground(Color.red);

        add(tablePanel);
        setTitle("Marks");

        setLocationRelativeTo(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                Main ex = new Main();
                ex.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-03T22:52:41.417

看看

```
table.setPreferredScrollableViewportSize(table.getPreferredSize());
table.setFillsViewportHeight(true); 
```

对于您在此处发布的代码

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-03T21:30:16.047

摆脱所有的`setSize`电话。然后摆脱`tablePanel`并`tableSP`直接在 的内容窗格中`JFrame`。

a 的内容窗格`JFrame`默认具有 a `BorderLayout`，并且将组件添加到`BorderLayout#CENTER`（当您在没有约束的情况下简单地使用时这是默认设置`add`）将确保该组件采用父容器的大小。

快速调整您的代码

```
public class Main extends JFrame {

    public Main() {
        String[] columnNames = {"A", "B", "C"};
        Object[][] data = {
            {"Moni", "adsad", 2},
            {"Jhon", "ewrewr", 4},
            {"Max", "zxczxc", 6}
        };

        JTable table = new JTable(data, columnNames);
        JScrollPane tableSP = new JScrollPane(table);
        tableSP.setPreferredSize( 400, 600 );

        add(tableSP);
        setTitle("Marks");

        setLocationRelativeTo(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        pack();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                Main ex = new Main();
                ex.setVisible(true);
            }
        });
    }
} 
```

小旁注：没有理由扩展`JFrame`. 只用一个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T21:32:48.280

作为替代方案，`GridLayout`用于您的`tablePanel`和`pack()`封闭的`Window`.

```
import java.awt.Color;
import java.awt.GridLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;

public class Main extends JFrame {

    public Main() {
        String[] columnNames = {"A", "B", "C"};
        Object[][] data = {
            {"Moni", "adsad", 2},
            {"Jhon", "ewrewr", 4},
            {"Max", "zxczxc", 6}
        };

        JTable table = new JTable(data, columnNames);
        JScrollPane tableSP = new JScrollPane(table);

        int A = this.getWidth();
        int B = this.getHeight();

        table.setSize(A, B);
        JPanel tablePanel = new JPanel(new GridLayout());
        tablePanel.add(tableSP);
        tablePanel.setBackground(Color.red);

        add(tablePanel);
        setTitle("Marks");

        setLocationRelativeTo(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        pack();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                Main ex = new Main();
                ex.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T21:36:43.860

这是一个答案：

```
import java.awt.Color;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableModel;

public class Main extends JFrame {
    JTable table = new JTable();
    DefaultTableModel model = new DefaultTableModel(new Object[][]{},new String[]{"A","B","C"});
    public Main() {
        super("Mark");
        table.setModel(model);
        add(new JScrollPane(table));

   }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                Main ex = new Main();
                ex.setDefaultCloseOperation(EXIT_ON_CLOSE);
                ex.setLocationByPlatform(true);
                ex.pack();
                ex.setVisible(true);
            }
        });
    }
} 
```

相当简化，但相同。:)

# scala - Scala解析器组合器，大文件问题

> ID：13213646
> 
> 赞同：13
> 
> 时间：2012-11-03T21:24:52.230
> 
> 标签：scala, parser-combinators

我编写了一个解析器，如下所示：

```
class LogParser extends JavaTokenParsers {

  def invertedIndex: Parser[Array[Array[(Int, Int)]]] = {
    num ~> num ~> num ~> rep(postingsList) ^^ {
      _.toArray
    }
  }

  def postingsList: Parser[Array[(Int, Int)]] = {
    num ~> rep(entry) ^^ {
      _.toArray
    }
  }

  def entry = {
    num ~ "," ~ num ^^ {
      case docID ~ "," ~ count => (docID.toInt, count.toInt)
    }
  }

  def num = wholeNumber ^^ (_.toInt)

} 
```

如果我使用 FileReader 从（270MB）文件中解析如下：

```
val index = parseAll(invertedIndex, new FileReader("path/to/file")).get 
```

我得到一个`Exception in thread "main" java.lang.StackOverflowError`（我也尝试过包装在 a 中`BufferedReader`），但我可以通过首先将文件读入 String 来修复它，如下所示：

```
val input = io.Source.fromFile("path/to/file")
val str = input.mkString
input.close()
val index = parseAll(invertedIndex, str).get 
```

为什么会这样？有什么办法可以避免先将它作为字符串读取，这似乎是一种浪费？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:14:01.607

还有另一个库 [1] 很像支持 Trampolining 的 scala 解析器组合器，这是您停止 stackoverflow 错误所需要的。

[1] [https://github.com/djspiewak/gll-combinators](https://github.com/djspiewak/gll-combinators)

# javascript - 多类jquery

> ID：13213647
> 
> 赞同：1
> 
> 时间：2012-11-03T21:25:14.313
> 
> 标签：javascript, jquery, forms

我有多个具有不同值的类。这些值是从 MySql 生成的。如何获取所有“值”的值，即 1、2、3、4，以便将其发布到我的查询中？每个输入都有自己的按钮和表单。如果我单击第一个按钮，我希望它发布 1，那么下一个按钮和表单将发布 2。

```
<input type="hidden" class="hideID" name="id" value="1">
<input type="hidden" class="hideID" name="id" value="2">
<input type="hidden" class="hideID" name="id" value="3">
<input type="hidden" class="hideID" name="id" value="4"> 
```

我的 jquery 代码目前只获得第一个值 (1)：

```
$('.addToCart').click(function(){

var hideID = $('.hideID').val();

alert(hideID);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:29:28.947

你需要一个循环。`$(".hideID")`正在返回一个包含所有元素的数组，其中包含“hideID”类。所以你需要这样的东西来读取所有值

```
$.each($(".hideID"),function(index,element){
  console.log($(element).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:35:09.680

这应该在警报弹出窗口中返回隐藏字段的所有值，但也许您应该给它们所有不同的名称。`name="id"`可能会在某个地方发生冲突。

```
$('.addToCart').click(function(){
    $.each($('.hideID'),function(index,element){
      alert($(element).val());
    });
}); 
```

您可以在[**jsFiddle**](http://jsfiddle.net/Qmuwt/)上使用它。

# c# - 快速多窗口渲染

> ID：13213648
> 
> 赞同：14
> 
> 时间：2012-11-03T21:25:40.227
> 
> 标签：c#, opengl, directx, gdi+, directx-9

数周以来，我一直在为 C# 天搜索和测试不同类型的渲染库。到目前为止，我还没有找到一个在多窗口渲染设置上运行良好的库。要求是能够在 12 个以上的显示器设置（财务图表）上运行程序，而不会在快速计算机上出现延迟。每个窗口需要每秒更新多次。虽然这样做 CPU 需要执行大量密集且时间紧迫的任务，因此必须将一些负担转移到 GPU 上。这就是硬件渲染介入的地方，换句话说就是 DirectX 或 OpenGL。

我已经尝试过使用 Windows 窗体的 GDI+，并认为它对于我的需求来说太慢了。我已经通过 OpenTK（在 Windows 窗体控件上）尝试了 OpenGL，这似乎相当快（我仍然要在其上运行一些测试），但很难正常工作（很难找到/编写好的文本渲染库）。最近我通过 SharpDX 在 Windows 窗体上尝试了 DirectX9、DirectX10 和 Direct2D。我为每个窗口尝试了一个单独的设备，并尝试了一个设备/多个交换链方法。所有这些都导致在多个窗口上的性能非常差。例如，如果我将目标 FPS 设置为 20 并在不同的显示器上打开 4 个全屏窗口，整个操作系统就会开始严重滞后。渲染只是将屏幕清除为黑色，不渲染图元。这个测试的 CPU 使用率约为 0%，GPU 使用率约为 10%，我不知道 不明白这里的瓶颈是什么？我的开发计算机非常快，i7 2700k，AMD HD7900，16GB 内存，所以测试肯定应该在这台上运行。

相比之下，我在 C++/Win32 API 一个设备/多个交换链上做了一些 DirectX9 测试，我可以打开遍布 4 显示器工作区的 100 个窗口（3D 茶壶在上面旋转），并且仍然拥有完全负责的操作系统（fps 是当然，渲染窗口非常糟糕地下降到大约 5，这是我期望运行 100 个同时渲染的结果）。

有谁知道在 C# 上进行多窗口渲染的任何好方法，还是我被迫用 C++ 重写我的程序以获得该性能（主要痛苦）？我想在我走 C++ 路线之前，我要再给 OpenGL 一个机会。我会在这里报告任何发现。

测试方法供参考：

对于 C# DirectX 单设备多交换链测试，我使用了这个出色答案中的方法： [Display Different images per monitor directX 10](https://stackoverflow.com/questions/10744788/display-different-images-per-monitor-directx-10)

Direct3D10 版本：

我像这样创建了 d3d10device 和 DXGIFactory：

```
D3DDev = new SharpDX.Direct3D10.Device(SharpDX.Direct3D10.DriverType.Hardware,
            SharpDX.Direct3D10.DeviceCreationFlags.None);
DXGIFac = new SharpDX.DXGI.Factory(); 
```

然后像这样初始化渲染窗口：

```
var scd = new SwapChainDescription();
scd.BufferCount = 1;
scd.ModeDescription = new ModeDescription(control.Width, control.Height,
      new Rational(60, 1), Format.R8G8B8A8_UNorm);
scd.IsWindowed = true;
scd.OutputHandle = control.Handle;
scd.SampleDescription = new SampleDescription(1, 0);
scd.SwapEffect = SwapEffect.Discard;
scd.Usage = Usage.RenderTargetOutput;

SC = new SwapChain(Parent.DXGIFac, Parent.D3DDev, scd);

var backBuffer = Texture2D.FromSwapChain<Texture2D>(SC, 0);
_rt = new RenderTargetView(Parent.D3DDev, backBuffer); 
```

每次渲染迭代执行的绘图命令很简单：

```
Parent.D3DDev.ClearRenderTargetView(_rt, new Color4(0, 0, 0, 0));
SC.Present(0, SharpDX.DXGI.PresentFlags.None); 
```

DirectX9 版本非常相似：

设备初始化：

```
PresentParameters par = new PresentParameters();
par.PresentationInterval = PresentInterval.Immediate;
par.Windowed = true;
par.SwapEffect = SharpDX.Direct3D9.SwapEffect.Discard;
par.PresentationInterval = PresentInterval.Immediate;
par.AutoDepthStencilFormat = SharpDX.Direct3D9.Format.D16;
par.EnableAutoDepthStencil = true;
par.BackBufferFormat = SharpDX.Direct3D9.Format.X8R8G8B8;

// firsthandle is the handle of first rendering window
D3DDev = new SharpDX.Direct3D9.Device(new Direct3D(), 0, DeviceType.Hardware, firsthandle,
    CreateFlags.SoftwareVertexProcessing, par); 
```

渲染窗口初始化：

```
if (parent.D3DDev.SwapChainCount == 0)
{
    SC = parent.D3DDev.GetSwapChain(0);
}
else
{
    PresentParameters pp = new PresentParameters();
    pp.Windowed = true;
    pp.SwapEffect = SharpDX.Direct3D9.SwapEffect.Discard;
    pp.BackBufferFormat = SharpDX.Direct3D9.Format.X8R8G8B8;
    pp.EnableAutoDepthStencil = true;
    pp.AutoDepthStencilFormat = SharpDX.Direct3D9.Format.D16;
    pp.PresentationInterval = PresentInterval.Immediate;

    SC = new SharpDX.Direct3D9.SwapChain(parent.D3DDev, pp);
} 
```

绘制循环代码：

```
SharpDX.Direct3D9.Surface bb = SC.GetBackBuffer(0);
Parent.D3DDev.SetRenderTarget(0, bb);

Parent.D3DDev.Clear(ClearFlags.Target, Color.Black, 1f, 0);
SC.Present(Present.None, new SharpDX.Rectangle(), new SharpDX.Rectangle(), HWND);
bb.Dispose(); 
```

具有多个交换链和一个设备代码的 C++ DirectX9/Win32 API 测试如下：

[[C++] DirectX9 多窗口测试 - Pastebin.com](http://pastebin.com/tjnRvATJ)

这是 Kevin Harris 的漂亮示例代码的修改版本。

编辑：

为了清楚起见，我的主要问题不是在进行多窗口渲染时这里的 fps 低，而是对所有操作系统功能（窗口动画、拖放滚动等）造成的一般延迟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T22:18:31.420

这里只说 DirectX，但我记得我们曾经遇到过同样的问题（单台 PC 有 5 个显卡和 9 个屏幕）。

很多时候全屏切换似乎想要在监视器上启用垂直同步，并且由于 Present 无法线程化，具有垂直同步的屏幕越多，每个屏幕的下降幅度就越高（因为您将等待 0 到 16 毫秒）当前通话。

在我们的案例中，我们的解决方案是将窗口创建为最大化并删除边框，这并不理想，但从 10 fps 绘制矩形回到标准速度（60）。

如果您想要代码示例，请告诉我，我会准备一个。

也只是为了测试，我尝试使用 c#/slimdx/dx11 在我的引擎上创建 30 个窗口，渲染一个具有基本着色的球体，仍然远远超过 40 fps。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T22:58:49.793

We have a similar problem (need to render 3D views on 9+ monitors using 3+ graphics cards). We opted to use raw DirectX11 after finding that 3rd party rendering libraries are all very poor at multiple windows across multiple monitors, let alone with multiple adapters too. (It seems most engines are designed for a fullscreen game, and tend to suck at windowed views). Rather than using a 3rd party layer like SlimDX or SharpDX, we decided in the end to write the core renderer directly in C++ and just expose the simple API that our application needs via C++/CLI - this should maximise performance and minimise maintainability issues (relying on 3rd party vendor for bug fixes etc).

However, just like you, we found in testing that if we rendered 9 views from a single process (each rendered on its own thread), we got terrible performance (very low frame rates). However, if we ran 9 separate processes (one per view/monitor), the performance was as expected (excellent).

So having spent days trawling the net fruitlessly for a better solution, we opted for simply running our renderers in separate processes. Not entirely a bad solution for us as our renderers need to support distribution over multiple PCs anyway, so it just means we'll use this facility permanently instead of only when required.

(I don't know if this is helpful to you as an answer, but we'd also be very keen to know if there are any other solutions out there that work across multiple graphics cards, in case we're missing a better trick)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T12:33:06.323

从来没有机会运行这种场景，但我唯一确定的是，使用托管包装器绝对没有问题，C++ 代码会遇到完全相同的问题。

此外，在您的描述中，目前还不清楚您的系统上安装了多少显卡。此外，您应该更密切地关注“ [DirectX 图形基础结构 (DXGI)：最佳实践](http://msdn.microsoft.com/en-us/library/windows/desktop/ee417025%28v=vs.85%29.aspx)”，因为它们描述了您可能遇到的许多问题。在全屏中使用不同的显卡运行正确的全屏交换链设置应该没问题（使用“flip”而不是“blit”，请参阅有关此的 msdn 文档），但如果您在最大化窗口中运行您的应用程序，我不认为这种性能会很好，因为 blit 会干扰并产生一些滞后。

您可以使用多个设备完美地拥有一个多线程应用程序，每个线程一个设备，他们应该能够正确安排事情......但同样，由于我在这种情况下没有经验，可能会有某种 GPU 调度在这种特定情况下的问题。

如果即使在仔细遵循 DXGI 设置后问题仍然存在，我建议您使用[GPUView](http://graphics.stanford.edu/~mdfisher/GPUView.html)调试整个事情，以便更仔细地检查这些问题。它正是针对这种情况而设计的，但是您必须花一些时间来了解如何使用这种工具进行诊断。在上届 GDC 2012 上也有一篇关于 GPUView 的演讲[：使用 GPUView 理解你的 DirectX 11 游戏（乔恩故事）](http://developer.amd.com.php53-23.ord1-1.websitetestlink.com/wordpress/media/2012/10/Using%20GPUView%20to%20Understand%20your%20DirectX%2011%20Game.pps)，这可能值得一读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T23:22:22.863

确保您已禁用对本机代码调用的安全检查（通过`SuppressUnmanagedCodeSecurityAttribute`）。

相关的堆栈遍历是性能杀手。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-23T04:17:42.623

使用双缓冲总是一个好主意，因为这可以防止闪烁 - 至少它对 Windows 窗体起作用。

# javascript - Javascript使特定字母具有不同的颜色？

> ID：13213649
> 
> 赞同：0
> 
> 时间：2012-11-03T21:25:43.353
> 
> 标签：javascript, jquery, javascript-events

我正在尝试制作一个特定的字母：“*”在我正在使用的一行 Javascript 编码中变为红色......以下是我的原件：

```
function init(){
    var inp = document.getElementsByTagName('input');
    for(var i = 0; i < inp.length; i++) {
        if(inp[i].type == 'text','tel','number', 'email') {
            inp[i].setAttribute('rel',inp[i].defaultValue)
            inp[i].setAttribute('style', 'color: grey;')
            inp[i].onfocus = function() {
                if(this.value == this.getAttribute('rel')) {
                    this.value = '';
                    this.setAttribute('style', 'color: black;')
                } else {
                    return false;
                }
            } 
```

为了使特定字母变红，我会将其更改为吗？

```
function init(){
    var inp = document.getElementsByTagName('input');
    for(var i = 0; i < inp.length; i++) {
        if(inp[i].type == 'text','tel','number', 'email') {
            inp[i].setAttribute('rel',inp[i].defaultValue)
            inp[i].setAttribute('style', 'color: grey;')
            inp[i].onfocus = function() {
                if(this.value == this.getAttribute('rel')) {
                    this.value = '';
                    this.setAttribute('style', 'color: black;')

                if(this.value == this.getAttribute('*')) {
                    this.setAttribute('style', 'color: red;')

                } else {
                    return false;
                }
            } 
```

我将如何实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:16:56.980

...因为我真的很无聊，[所以我最终使用 javascript 做了你想做的事](http://jsfiddle.net/eTEvQ/2/)。

它使用 Mootools，但如果您愿意，它应该为您提供足够的灵感来使用 jQuery 重新创建它。

```
function reposition() {
    var position = inputEl.getPosition();
    var occludeLabel = inputEl.value;
    occludeLabel = occludeLabel.replace(/\*/g, '<span class="red">*</span>', 'g');
    occludeEl.setStyles({
        top: position.y + 1,
        left: position.x + 1
    });
    occludeEl.set('html', occludeLabel);
} 
```

基本上，每次模糊输入时，都会在输入框上方放置一个包含输入框值的 div，从而遮挡文本。我运行了一个简单`.replace()`的方法，用一个将其内容变为红色的跨度替换所有星号。

请参阅此 jsfiddle 以获取所有代码：http: [//jsfiddle.net/eTEvQ/2/](http://jsfiddle.net/eTEvQ/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:29:35.827

您只能设置元素的样式，但不能设置属性的样式。

这条线没有任何意义..

```
this.value == this.getAttribute('*') 
```

*****不是有效的属性名称

这也是**问题**中的当前输入元素..

您可以为整个输入元素设置颜色，但不能为其中的特定字符设置颜色

# c# - 在 .NET Speech 中添加另一个声音

> ID：13213652
> 
> 赞同：7
> 
> 时间：2012-11-03T21:26:07.603
> 
> 标签：c#, .net, winforms, speech

如何将另一个声音添加到 .NET Speech 中？我想用捷克语的声音。我找到了一些`*.sis`文件`Eliska22k.sis`，但我不知道如何使用它。

```
SpeechSynthesizer synth = new SpeechSynthesizer();
foreach (var voice in synth.GetInstalledVoices())
    Console.WriteLine(voice.VoiceInfo.Name); 
```

只给我`Microsoft Anna`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T22:14:15.057

嗯，对你来说没有好消息。
1.[语言支持](http://msdn.microsoft.com/en-us/library/hh378476)- MS TTS 不支持捷克语。
2.`sis`是 Symbian 安装程序文件，在 Windows 中无用。
3\. 其他语言可以在这里找到：[从微软官方下载中心下载微软语音平台-运行时语言（版本11）](http://www.microsoft.com/en-us/download/details.aspx?id=27224) -它们只是一些`msi`文件，所以没有安装它们的技巧。

尝试找到另一个支持捷克语的文本转语音库。

# web - 如果用户使用的是旧浏览器，有哪些好的页面可以将用户重定向到？

> ID：13213655
> 
> 赞同：5
> 
> 时间：2012-11-03T21:26:45.340
> 
> 标签：web, browser-support

比如这个：[http](http://www.webstandards.org/upgrade) ://www.webstandards.org/upgrade除了它很糟糕而且已经过时了（使用 Netscape 7？真的吗？）

我将需要 IE9+ 和其他浏览器的最新版本。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T21:43:49.083

[http://browsehappy.com/](http://browsehappy.com/)可能是我的最爱。我可能不会重定向。也许是带有链接的弹出框/模态框？少一点激进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:30:51.147

在使用您的网站时将用户重定向到升级页面可能会让用户**非常沮丧**（此外，从他们最喜欢的“旧”浏览器实际升级的用户数量比我们希望的要少。）

我建议显示一个**[对话框](http://www.browser-update.org/#install)**，敦促他/她升级以使用完整的网站，同时显示一个基本的纯 HTML（或放大的移动）网站。

`http://www.browser-update.org/`帮助您显示不显眼的通知，敦促用户升级。

# salesforce - 如何在每个 Salesforce 页面（用于跟踪/分析）上包含 Javascript 主页组件与自定义按钮与控制器与

> ID：13213659
> 
> 赞同：2
> 
> 时间：2012-11-03T21:27:02.307
> 
> 标签：salesforce, apex-code

要在每个销售人员页面上运行分析 javascript，我想在每个页面中插入 Javascript。

到目前为止，我读到了几种不同的方法：

## [主页组件](http://www.tehnrd.com/show-and-hide-buttons-on-page-layouts/)

*   一个 HTML 主页组件（需要自定义 UI 以在每个页面上显示组件）
*   限制：不适用于 Chatter、报告和设置
*   可能的问题：[这些评论](http://www.tehnrd.com/show-and-hide-buttons-on-page-layouts/comment-page-1/#comment-66702)表明“winter 13”存在问题

## [带有 Javascript 的自定义按钮](http://www.interactiveties.com/b_execute_javascript_button.php)

*   （对此还不太了解）听起来必须为对象类型创建/分配按钮）

## 自定义 APEX 控制器？

这将如何工作？

## [视觉力量页面](http://www.salesforce.com/us/developer/docs/pages/index_Left.htm#CSHID=pages_js_remoting.htm%7CStartTopic=Content/pages_js_remoting.htm%7CSkinName=webhelp)？？

这将如何工作？据我了解，可以用 visualforce 页面替换所有内容，但这显然不是很优雅/可维护。

我很想知道还有哪些其他方法，特别是通过修改控制器？所提出的方法还需要考虑哪些其他事项（缺点、风险）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T22:16:01.410

老实说，侧边栏组件听起来最适合这种情况。

您将添加到对象详细信息页面的任何按钮/链接都需要单击它（！），并且不适用于“选项卡视图”、“新记录”或“编辑”页面。您可以使用 VF 页面覆盖其中的大部分内容，但工作量很大，而且您无法自定义这些特殊位置的 UI：Chatter、控制台选项卡、报告、仪表板。我不确定“修改控制器”是什么意思，您无法访问这样的全局内容。

可以选择将小型 VF 页面嵌入到每个详细信息页面的页面布局中，但它在维护方面同样受到限制，并且不会出现在新/编辑页面上。

Force.com 网站有更好的分析选项（其中最重要的是`<site:googleAnalyticsTracking/>`标签）。您还应该收到一份每月简报（通常会延迟 2-3 个月），总结您的 Salesforce 实例的使用情况、用户采用情况、要探索的领域等。如果您没有 - 请检查您的用户的“接收 Salesforce 简报”等设置。

# java - 如何在 RESTful WebService 调用上执行先前的流程？

> ID：13213661
> 
> 赞同：1
> 
> 时间：2012-11-03T21:27:09.250
> 
> 标签：java, web-services, session, rest, permissions

我正在开发一个基于 RESTful WebServices 的 WebApplication。我使用 NetBeans“新文件管理器”自动生成“来自数据库的实体类”和“来自实体类的 RESTful Web 服务”，所以一切都很好，我得到了类似的东西：

```
@Stateless
@Path("usuario")
public class UsuarioFacadeREST extends AbstractFacade<Usuario> {
@PersistenceContext(unitName = "TSERMEXeCommercePU")
private EntityManager em;

public UsuarioFacadeREST() {
    super(Usuario.class);
}

@POST
@Override
@Consumes({"application/xml", "application/json"})
public void create(Usuario entity) {
    super.create(entity);
}

@PUT
@Override
@Consumes({"application/xml", "application/json"})
public void edit(Usuario entity) {
    super.edit(entity);
}

@DELETE
@Path("{id}")
public void remove(@PathParam("id") Integer id) {
    super.remove(super.find(id));
}

@GET
@Path("{id}")
@Produces({"application/xml", "application/json"})
public Usuario find(@PathParam("id") Integer id) {
    return super.find(id);
}

@GET
@Override
@Produces({"application/xml", "application/json"})
public List<Usuario> findAll() {
    return super.findAll();
} 
```

我的数据库上的每个实体都有 REST 服务。所以到目前为止一切都很顺利。

但是我有一个小问题，我需要每个服务调用来检查用户是否登录以及他是否有权调用该服务，例如：

我将在我的 UsuarioFacadeREST 上有一个名为 logIn() 的额外服务，它接收用户、密码，如果它正确，我将在他的 HTTPSession 中添加一个“logedIn:true”参数，这样我就可以随时知道他是否已经登录，类似：

```
@GET
@Path("login/{user}/{pass}")
@Produces({"application/xml"})
public String logIn(@PathParam("user") String user, @PathParam("pass") String pass, @Context HttpServletRequest request) {
    Usuario userEntity;
    if( (userEntity = getUserFromDB(user, pass)) != null ) {
        HttpSession session = request.getSession();
        session.setAttribute("logedIn", true);
        session.setAttribute("priviledges", loadPrivilegdesList(userEntity));
        return "<logedIn>true</logedIn>";
    } else {
        return "<logedIn>false</logedIn>";
    }
} 
```

因此，一旦他登录，我就会在他的会话中加载他的权限列表。

这些权限是字符串，如“VIEW_CUSTOMER_LIST”、“ADD_CUSTOMER”、“EDIT_CUSTOMER”、“DELETE_CUSTOMER”、“ADD_PRODUCT”、“EDIT_PRODUCT”等。

这是什么意思？这意味着在我的 CustomerFacadeREST 服务上，对于每个 REST 服务（每个函数调用），我都需要检查用户登录状态和他的权限列表。通过这种方式，我将能够知道我是否可以为用户提供这项服务，或者我必须拒绝他。

问题是，如果 HttpSession 具有属性已登录，我认为编辑所有自动生成的 RESTful Web 服务以检查每个函数不是一个好习惯。

所以，我想知道是否有任何方法可以为所有 RESTful Web 服务提供服务调用前功能，该功能在每次服务调用时检查 HttpSession 的 logedIn 属性。我的意思是，我想锁定所有 webServices 调用并将它们重定向到此函数，以便它检查我需要检查的内容，然后调用用户调用的原始函数。

有没有办法解决这个问题？

非常感谢您的阅读。如果我不够清楚，请告诉我。

# java - assertEquals() 失败的原因

> ID：13213668
> 
> 赞同：2
> 
> 时间：2012-11-03T21:28:20.430
> 
> 标签：java, junit

即使两个字符串相同，assertEquals() 也会失败......有人可以帮我找出原因吗？

```
 public void testSet() 
 {
    ByteArrayOutputStream outContent = new ByteArrayOutputStream();

    System.setOut(new PrintStream(outContent));

    instance.get();

    String output = outContent.toString();
    String input="i=1\r\n";
    assertEquals(input,output);
 }

 get()
 {
    int i=1;
    System.out.println("i="+i);
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T21:35:53.097

您在附加在输出缓冲区`newline`中的方法中使用 print 语句。这样，您将获得不等于“i=1”的 `output = "i=1\r\n"。`get()``\r\n`

使用`print without newline i.e. print()`如下：

```
 System.out.print("i="+i); 
```

如果您不想使用`print()`方法，则从输出中截断`\r\n`如下：

```
 String output = outContent.toString();
    output = output.replaceAll("\r\n", "");
    String input="i=1";
    assertEquals(input,output); 
```

# php - 使用php从具有多个条目的数据库中获取名称列表

> ID：13213669
> 
> 赞同：0
> 
> 时间：2012-11-03T21:28:22.317
> 
> 标签：php, mysql

好的，基本上我在寻求一些建议，因为我不知道该怎么做，基本上我有一个充满汽车详细信息的数据库，我想做的是自动填充一个包含制造商列表的页面。我想我可以用组来做到这一点，尽管我并不特别需要对结果进行分组，只需将每个制造商的名称显示一次作为链接。

组是最好的方式吗？还是有其他方式？

任何意见，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:29:18.383

你可以`group by`像你提到的那样做，或者你可以做`distinct`：

```
select distinct manufacturer from cars where 1 
```

在此处阅读更多信息：

[http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html)

# c# - “表已经存在”但它不存在

> ID：13213671
> 
> 赞同：1
> 
> 时间：2012-11-03T21:28:28.417
> 
> 标签：c#, mysql

我`This Table already exists`从 Visual Studio 2012 中得到一个错误。我`MySqlWorkbench`在`Xampp`目录中检查了它，但我没有找到任何东西。我什至尝试过，`DROP TABLE IF EXISTS tablename;`但这也不起作用。

```
public class DBConnect
{
    private MySqlConnection connection;
    private string server;
    private string database;
    private string uid;
    private string password;

        //Constructor
    public DBConnect()
    {
        Initialize();
    }

    //Initialize values
    private void Initialize()
    {
        server = "localhost";
        database = "";
        uid = "root";
        password = "";
        string connectionString;
        connectionString = "SERVER=" + server + ";" + "DATABASE=" +
        database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";

        connection = new MySqlConnection(connectionString);
        connection.Dispose();

        CreateDatabase(" DROP DATABASE IF EXISTS boerswatch; CREATE DATABASE boerswatch;");

        server = "localhost";
        database = "boerswatch";
        uid = "root";
        password = "";
        string connectionString1;
        connectionString1 = "SERVER=" + server + ";" + "DATABASE=" +
        database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";

        connection = new MySqlConnection(connectionString1);
    }

    //open connection to database
    private bool OpenConnection()
    {
        try
        {
            connection.Open();
            return true;
        }
        catch (MySqlException e)
        {
            switch (e.Number)
           {
                case 0:
                    MessageBox.Show("Keine Verbindung zum Server Möglich!");
                    break;
                case 1045:
                    MessageBox.Show("Ungültiger Benutzername oder Passwort!");
                    break;
            }
                return false;
        }
   }

        //Close connection
    private bool CloseConnection()
    {
        try
        {
            connection.Close();
            return true;
        }
        catch (MySqlException e)
        {
            MessageBox.Show(e.Message);
            return false;
         }
    }
   public void CreateDatabase(String query)
   {
        if (OpenConnection())
       {
            try
            {

                MySqlCommand cmd = new MySqlCommand(query, connection);
                cmd.ExecuteNonQuery();
                CloseConnection();
            }
            catch (MySqlException e)
            {
                MessageBox.Show(e.Message);
            }

        }
    }

    public void CreateTable(String query)
    {
        if (OpenConnection())
        {
            try
            {
                MySqlCommand cmd = new MySqlCommand(query, connection);
                cmd.ExecuteNonQuery();
                CloseConnection();
            }
            catch (MySqlException e)
            {
                MessageBox.Show(e.Message);
            }
        }
    }

    public void Insert(String query)
    {
        if (this.OpenConnection())
        {
            MySqlCommand cmd = new MySqlCommand(query, connection);
            cmd.ExecuteNonQuery();
            this.CloseConnection();
        }
    }
}

public partial class Form1 : Form
{    
    static XmlSerializer serializer;
    static FileStream stream;
    public List<Bank> banks;
    public List<Object> pers;
    public DBConnect data;
    public Form1()
    {
        InitializeComponent();
        checkFiles();
    }
    private void checkFiles()
    {
        String user = System.Security.Principal.WindowsIdentity.GetCurrent().Name;
        banks = new List<Bank>(5);
        if (!Directory.Exists(@"C:\xampp\mysql\data\boerswatch") )
        {
            data = new DBConnect();
            createBanks();
        }
        else
        {
            //loadBanks();
            //loadAccounts(pers);
        }
    }
    public void createBanks()
    {
        Bank b1 = new Bank("Raiffeisen");
        Bank b2 = new Bank("Erste Bank");
        Bank b3 = new Bank("BAWAG");
        banks.Add(b1);
        banks.Add(b2);
        banks.Add(b3);
        data.CreateTable("DROP TABLE IF EXISTS Banken; CREATE TABLE Banken( name VARCHAR(20) PRIMARY KEY);");
        data.Insert("INSERT INTO Banken VALUES(" + b1.Name + ");");
        data.Insert("INSERT INTO Banken VALUES(" + b2.Name + ");");
        data.Insert("INSERT INTO Banken VALUES(" + b3.Name + ");");
        listBox1.DataSource = banks;
    } 
} 
```

# operating-system - Log 结构化文件系统中的符号链接

> ID：13213672
> 
> 赞同：1
> 
> 时间：2012-11-03T21:28:31.470
> 
> 标签：operating-system

我正在做一个关于日志结构文件系统的项目，我正在做这个项目的中途，已经为普通文件和目录创建了 inode，现在我想处理符号链接。

这是我的 inode 的结构。

int8_t is_active;

```
/* inode no. of the file */
uint16_t inode_number;

/* the most up-to-date version id */
uint8_t latest_version_id;

/* Details about the direct block */
BlockInfo direct_block[4];

/* Details about the indirect block */
BlockInfo indirect_block;

/* The type, permissions, etc. */
unsigned long inode_mode;

/* The user id */
//unsigned short uid;

/* The group id */
//unsigned short gid;

/* The number of links to the inode */
unsigned short number_of_links;

/* The size of the file, in bytes.
 * If it is a directory file, this will contain the number of
 * immediate children in the directory.
 *
 * If it is a regular file, it will contain the actual file size*/
unsigned long int file_size;

/* The number of blocks used by the inode */
unsigned long number_of_blocks;

/* The creation time of the file */
struct timeval creation_time;

/* The modification time of the file */
struct timeval modification_time;

struct timeval access_time; 
```

任何人都可以帮助我创建符号链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:44:21.130

符号链接是一个常规文件，其中包含指向目标的路径名。使用模式位使文件系统代码读取链接并在打开、创建、取消链接等时进行重定向。

# python - subprocess.Popen execve() arg 3 包含一个非字符串值

> ID：13213676
> 
> 赞同：10
> 
> 时间：2012-11-03T21:28:50.770
> 
> 标签：python, environment-variables, popen, subprocess

我正在尝试通过 shell 运行另一个脚本，该脚本使用一组修改后的环境变量。

```
def cgi_call(script, environ):
    pSCRIPT = subprocess.Popen(script, stdout=subprocess.PIPE, stderr=subprocess.PIPE, 
                        stdin=subprocess.PIPE, env=environ, shell=True)

    pc = pSCRIPT.communicate()

    status = "200 OK"
    headers = [('Content-Type',"text/html")]
    if pc[1] != '':
        raise RuntimeError, pc[1]
    else:
        rval = str(pc[0])

    return status, headers, rval 
```

运行上面的代码后，我收到以下错误：

```
File "server/httpd.py", line 76, in DynamicServer
    status, headers, rval = handler(environ)
File "server/httpd.py", line 43, in handler
    status, headers, rval = cgi_call(srvpath+"../www/public_html"+environ["PATH_INFO"]+'index.py',environ)
File "server/httpd.py", line 21, in cgi_call
    stdin=subprocess.PIPE, env=environ, shell=True)
File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
<type 'exceptions.TypeError'> execve() arg 3 contains a non-string value 
```

传递环境变量时出现错误......我也尝试将它们作为字符串传递 - 它出错并说它需要一个映射对象。然而，实际上，传递的环境是一个映射对象......

问题是什么？

附加信息：我在 Ubuntu 12.04.1 上运行 Python 2.7

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-25T04:47:31.587

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

“...在 Python 2.x 中，键，可能还有值也需要是字节字符串。因此，如果您使用的是 unicode 字符串，请确保将它们编码为`utf-8`。此外，如果您默认使用 unicode 文字，请通过`from __future__ import unicode_literals`确保字典键的字符串文字以`b`字节文字而不是 unicode 文字为前缀。”

〜回答[佩德罗罗马诺](https://stackoverflow.com/users/1642530/pedro-romano)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-20T21:53:17.077

我遇到了类似的问题。就我而言，问题是因为我只是在传递给的字典中传递了 python 本机类型`env`。考虑到这里的信息水平，这实际上可能与 OP 一致。考虑点

```
cgi_call(srvpath+"../www/public_html"+environ["PATH_INFO"]+'index.py',environ) 
```

叫做。如果`environ`看起来像

```
{"variable": True} 
```

那么`True`那里几乎肯定会是错误的原因。您可以在其位置使用字符串（字节字符串，根据其他答案）`"true"`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-12T02:43:23.550

就我而言，环境变量的值是一个数字。将值视为带引号的字符串是我作为错误消息的解决方案， execve() arg 3 包含非字符串值。

从

```
- env:
  - VARIABLES: 1 
```

到

```
- env:
  - VARIABLES: "1" 
```

# php - HTTP请求不工作

> ID：13213682
> 
> 赞同：0
> 
> 时间：2012-11-03T21:29:22.320
> 
> 标签：php, html, ajax, httpwebrequest

我有以下代码，但我`<a onclick="meldaan()">Aanmelden</a>`的不工作。该函数不会被调用。

这是功能：

```
<script type="text/javascript">
function meldaan()
{
    var voornaam = document.getElementById('voornaam').value;
    var achternaam = document.getElementById('achternaam').value;
    var email = document.getElementById('email').value;
    var password = document.getElementById('password').value;

    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("results").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","aanmelden.php?naam=" + encodeURIComponent(voornaam) + "&achternaam=" + encodeURIComponent(achternaam) + "&email=" + encodeURIComponent(email) + "&password=" 
    + encodeURIComponent(password),true);
    xmlhttp.send();
    }

</script> 
```

我将函数放置在我的 header.php 文件中，该文件包含在 footer.php （所在`<a onclick="meldaan()">Aanmelden</a>`的位置。

我究竟做错了什么？

结果已正确传递到我的页面，因为我尝试回显某些内容并且确实显示了，因此它必须在此代码中。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:37:25.687

你错过了一个分号：

```
xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("results").innerHTML=xmlhttp.responseText;
        }
      };
       ^------ HERE 
```

# java - 为什么非连续容器的迭代器更快？

> ID：13213684
> 
> 赞同：1
> 
> 时间：2012-11-03T21:29:33.833
> 
> 标签：java, iterator, implementation

Stack Overflow 上的另一个主题“ [Java 中的传统 for 循环与迭代器](https://stackoverflow.com/questions/1879255/traditional-for-loop-vs-iterator-in-java)”讨论了使用索引和使用迭代器之间的性能差异。最佳答案指出，在处理诸如`LinkedList`.

我希望这与缓存有关。如果是这样，迭代器如何解决这个问题？如果它与缓存未命中无关，那么是什么让非连续容器的迭代器如此之快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:32:42.247

链表的区别不是任何常数因素 - 它是“一步”采用 O(1) 或 O(N) 之间的区别。（所以列表越大，差异越大。）

迭代器保留“采取下一步”所需的任何状态。对于链表，采取下一步意味着只遵循从一个节点到下一个节点的引用......而通过*索引*访问元素意味着从头部开始并多次执行相同的“移动下一步”步骤。

与之`ArrayList`相比，迭代器只需要记住当前索引，然后“随机访问”和“顺序”访问都涉及直接访问数组的正确元素。

所以它并不是真正的*缓存*——它是保留状态。迭代器是否比按索引访问更快取决于按索引访问必须做什么。在 的情况下`ArrayList`，它很便宜。在 的情况下`LinkedList`，它不是。

# javascript - “未定义 Firebase”错误

> ID：13213690
> 
> 赞同：1
> 
> 时间：2012-11-03T21:30:05.380
> 
> 标签：javascript, html, dom, firebase

我通过从我创建的本地 HTML 调用数据库来尝试我的 Firebase 测试版邀请。这是拒绝工作的代码。

```
<html>
    <head>
        <script src="https://static.firebase.com/v0/firebase.js"></script>
        <script type="text/javascript">
            var myDataReference;

            function call_on_click() {
                alert("Done!");

                try {
                    myDataReference = new Firebase('https://sbose78.firebaseio.com/');
                    myDataReference.set('I am now writing data into Firebase!');
                } catch (e) {

                }
            }
        </script>
    </head>
    <body>
        <input type="button" value="push me" onclick="call_on_click()">
    </body>
</html> 
```

我在 Ubuntu 上使用 Firefox 11。

```
[02:40:58.766] Firebase is not defined @ file:///root/Desktop/firebase-app1.html:20
--
[02:43:28.743] file:///root/Desktop/firebase-app1.html
[02:43:28.796] GET https://static.firebase.com/v0/firebase.js [HTTP/1.1 200 OK 1766ms]
[02:43:30.572] uncaught exception: [Exception... "Operation is not supported"  code: "9" nsresult: "0x80530009 (NS_ERROR_DOM_NOT_SUPPORTED_ERR)"  location: "https://static.firebase.com/v0/firebase.js Line: 28"] 
```

我错过了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T00:29:40.567

这是 Firebase JavaScript 客户端中的一个错误，由 Firefox 在从文件加载内容时处理 sessionStorage 引起。它应该在这一点上修复。

再试一次，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:53:26.150

据我所知，这是[同源政策](https://developer.mozilla.org/en-US/docs/Same-origin_policy_for_file:_URIs)的问题。如上述文件所述：

> 从 Gecko 1.9 开始，文件只能读取某些其他文件。具体来说，一个文件只有在源文件的父目录是目标文件的祖先目录时才能读取另一个文件。但是，不能以这种方式加载目录。
> 
> 例如，如果您有一个访问另一个文件 bar.html 的文件 foo.html，并且您已经从文件 index.html 导航到该文件，则只有当 bar.html 与 index.html 位于同一目录中时，加载才会成功或包含在与 index.html 相同的目录中的目录中。

# sql - 菜鸟关注：子查询计算

> ID：13213691
> 
> 赞同：1
> 
> 时间：2012-11-03T21:30:09.787
> 
> 标签：sql, tsql

我有一个带有以下列的**bbc表：**

**名称**（指世界特定区域内的国家名称）

**地区**（世界大陆）

**人口**（名称字段中的国家人口）我要回答的问题：

**问题**如下： “一些国家的
人口是任何邻国（在同一地区）的三倍以上。给国家和地区。”

我在想答案可能是这样的：

```
SELECT a.name, a.region FROM bbc AS a
WHERE a.region IN
     (
        SELECT b.region FROM bbc AS b 
        GROUP By b.region 
        HAVING MIN(b.population) < 3*b.population) 
```

但老实说，我在最后一行失去了它......我不知道如何找到在同一地区的任何邻居的三倍以上的柜台！相当艰难。o_o

任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:33:14.710

```
select
   a.name, a.region
from bbc as a
where 
    a.population >
    (
        select 3*max(b.population)
        from bbc as b
        where b.region = a.region and b.name <> a.name
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:41:24.457

```
Select
  a.name,
  a.region
From
  bbc as a
Where
  Not Exists (
    Select
      'x'
    From
      bbc as b
    Where
      a.region = b.region And
      a.name != b.name And
      a.population < 3 * b.population
  ) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-23T13:54:26.707

```
SELECT name, continent from world x
WHERE (SELECT population from world y
          where y.name = x.name 
           and y.continent = x.continent
           and population > 0) > ALL 
(SELECT 3*population from world z 
          where z.continent = x.continent 
             and z.name != x.name
          and population > 0); 
```

# node.js - 更新时 AppFog 错误

> ID：13213692
> 
> 赞同：2
> 
> 时间：2012-11-03T21:30:09.433
> 
> 标签：node.js, npm, cloud-foundry, appfog

当我在我的 appfog 云托管中更新我的文件时，我总是会收到这个错误。

```
Uploading Application:
  Checking for available resources: OK
  Packing application: OK
  Uploading (7K): OK   
Push Status: OK
Stopping Application 'volkova': OK
Staging Application 'volkova': OK                                               
Starting Application 'volkova': .
Error: Application [volkova] failed to start, logs information below.

====> /logs/stderr.log <====

./startup: line 3: /opt/cloudfoundry/runtimes/nodejs-v0.6.17/bin/node: Permission denied 
```

这是什么原因，我该如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T09:23:56.543

大约 3 天前我遇到了同样的错误。问题出在 AppFog 中。他们第二天就修好了。我还注意到其他数据中心没有发生此错误。

# android-fragments - getFragmentManager() 返回 null，带有 android.support.v4.app.DialogFragment 支持库

> ID：13213693
> 
> 赞同：1
> 
> 时间：2012-11-03T21:30:09.793
> 
> 标签：android-fragments, mapactivity

这是片段对话框：

```
import android.support.v4.app.DialogFragment;  
public static class SensorMeasurmentsDialogFragment extends DialogFragment {

    public static SensorMeasurmentsDialogFragment newInstance(int title) {

        SensorMeasurmentsDialogFragment frag = new SensorMeasurmentsDialogFragment();
        Bundle args = new Bundle();
        args.putInt("title", title);
        frag.setArguments(args);
        return frag;

        @Override public Dialog onCreateDialog(Bundle savedInstanceState) {
            .....
        }
    }
} 
```

对它的调用是从常规活动而不是从 fragmentActivity 完成的，因为我的活动已经扩展了 mapActivity。

```
m_measurmentDlg=SensorMeasurmentsDialogFragment.newInstance(R.string.app_name);
m_measurmentDlg.show(m_measurmentDlg.getFragmentManager(),"measurments"); 
```

知道为什么它是空的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:04:05.920

在我的一个片段中，我正在使用它，`replace`所以当我使用`add`它时效果很好！可能会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T06:40:12.063

该活动必须从 FragmentActivity 扩展，您才能使用 Fragments。在 Google 更新他们的地图库之前，您目前可能不得不使用一种解决方法。

您可能必须使用修改后的兼容性库，例如：

[https://github.com/petedoyle/android-support-v4-googlemaps](https://github.com/petedoyle/android-support-v4-googlemaps)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:47:40.083

我也遇到了这个问题。问题仅发生在 setRetainInstance(true) 上。我的解决方法是使用父活动的 FragmentManager 对象而不是 DialogFragment 的 FragmentManager。

# c# - 如何使用 PushSharp 获取 GCM 错误消息“未注册”

> ID：13213695
> 
> 赞同：1
> 
> 时间：2012-11-03T21:30:20.943
> 
> 标签：c#, android, xamarin.android

我试图弄清楚如何获得 Google GCM 响应（即 NotRegistered 错误），以便我可以从用户帐户中删除 GCM 信息。

从[GCM 架构概述](http://developer.android.com/guide/google/gcm/gcm.html)（关于从 GCM 注销设备）中，他们声明“只有当 GCM 服务器尝试向设备发送消息并且设备回答应用程序已卸载或没有广播时，它才会被注销接收器配置为接收 com.google.android.c2dm.intent.RECEIVE 意图。此时，您的服务器应将设备标记为未注册（服务器将收到 NotRegistered 错误）。

在 PushSharp for Mono for Android 中；当您尝试向用户发送消息时如何获得 Google 响应，而您却收到来自 Google 的“未注册错误”？要发送消息，我有以下代码：

```
 var push = new PushService();

    // setup channel settings: sender id, access key, registration package name
    var settings = new GcmPushChannelSettings(<>, <>, <PACKAGE>);
    push.StartGoogleCloudMessagingPushService(settings);
    var android = NotificationFactory.AndroidGcm();
    android = android.ForDeviceRegistrationId(GCM_Id); 
        push.QueueNotification(android.WithJson("{\"alert\":\"" + message + "\",\"URL\":\"" + URL + "\"}")); 
```

如何从 Google 获得响应以了解 1\. 消息通过 2\. 应用程序已卸载或 3\. 收到 NotRegistered 错误，以便我可以从用户帐户中删除 GCM Id？

期待我能得到任何帮助。上面的代码使用 PushSharp for Mono for Android (MonoDroid)，它可以完美地向用户发送消息。[PushSharp](https://github.com/Redth/PushSharp/)非常棒，我强烈推荐它通过 GCM 向您的用户发送消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:03:45.867

您需要订阅附加`Events`到`PushService`.

然后，您将能够在事件处理程序中接收响应。

```
 //Create our service    
        PushService push = new PushService();

        //Wire up the events
        push.Events.OnDeviceSubscriptionExpired += new Common.ChannelEvents.DeviceSubscriptionExpired(Events_OnDeviceSubscriptionExpired);
        push.Events.OnDeviceSubscriptionIdChanged += new Common.ChannelEvents.DeviceSubscriptionIdChanged(Events_OnDeviceSubscriptionIdChanged);
        push.Events.OnChannelException += new Common.ChannelEvents.ChannelExceptionDelegate(Events_OnChannelException);
        push.Events.OnNotificationSendFailure += new Common.ChannelEvents.NotificationSendFailureDelegate(Events_OnNotificationSendFailure);
        push.Events.OnNotificationSent += new Common.ChannelEvents.NotificationSentDelegate(Events_OnNotificationSent);
        push.Events.OnChannelCreated += new Common.ChannelEvents.ChannelCreatedDelegate(Events_OnChannelCreated);
        push.Events.OnChannelDestroyed += new Common.ChannelEvents.ChannelDestroyedDelegate(Events_OnChannelDestroyed); 
```

然后，在您的事件处理程序中，您可以检查异常并确定是否应该从用户帐户中删除设备 ID。

```
 static void Events_OnNotificationSendFailure(Common.Notification notification, Exception notificationFailureException)
        {
            // Remove device id 
            Console.WriteLine("Failure: " + notification.Platform.ToString() + " -> " + notificationFailureException.Message + " -> " + notification.ToString());
        } 
```

# javascript - Javascript 执行 - Google Api

> ID：13213698
> 
> 赞同：0
> 
> 时间：2012-11-03T21:30:45.903
> 
> 标签：javascript, google-api

这是我正在使用的代码：

[http://jsfiddle.net/njDvn/36/](http://jsfiddle.net/njDvn/36/)

奇怪的是，在我点击地理编码按钮后，自动建议似乎只在最后一个输入框上激活。这是我工作的代码：

```
<html>
<head>
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
<script>
function getLatLng() {
    var geocoder = new google.maps.Geocoder();
    var address = document.getElementById('address').value;

    var input = document.getElementById('searchTextField');
    var options = {
    types: [],
    };

var autocomplete = new google.maps.places.Autocomplete(input, options);

    geocoder.geocode({
        'address': address
    }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var latLng = results[0].geometry.location;
            $('#lat').val(results[0].geometry.location.lat());
            $('#lng').val(results[0].geometry.location.lng());
        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
}
</script>
</head>
    <body>
        <div>
            <input id="address" type="textbox" value="Sydney, NSW">
            <input type="button" value="Geocode" onclick="getLatLng()">
            <input id="lat" type="textbox" value="lat">
            <input id="lng" type="textbox" value="lng">
            <input id="searchTextField" type="text" size="50" value="">

           </div>
      </body>
</html> 
```

什么给了？我以前从未有过这种情况，但这是我尝试编写的第一个脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:36:39.290

这是由于以下行：

```
var autocomplete = new google.maps.places.Autocomplete(input, options); 
```

`input`将其链接到：

```
var input = document.getElementById('searchTextField'); 
```

这是最后一个输入框。

此外，您必须`geocode`在 Google 自动完成链接之前单击该按钮，因为您已将`getLatLng()`调用绑定到单击 Geocode 按钮：

```
<input type="button" value="Geocode" onclick="getLatLng()"> 
```

由于 Google 自动完成功能在此功能中激活，因此您无法在不按下按钮的情况下对其进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:41:32.970

您正在函数中初始化自动完成`getLatLng`功能，因此它不可用；直到单击按钮并调用函数后才可用

# bash - 在 Haxe 中获取 shell 命令的输出

> ID：13213701
> 
> 赞同：2
> 
> 时间：2012-11-03T21:31:19.337
> 
> 标签：bash, haxe

在 Haxe 中，Sys 类（或其他类）中是否有一个方法可以返回 shell 命令的输出（例如，命令“ls”），还是我需要自己为每种目标语言实现这个方法？我想找到一种调用适用于每种 Haxe 目标语言的 shell 命令的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T00:00:14.090

是的，您自己的评论包含答案，即：

```
var output = new sys.io.Process("ls", []).stdout.readAll().toString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T06:45:22.720

或者跨平台方式：`sys.FileSystem.readDirectory('')`

它也可能更快，因为它不会调用额外的进程。

# android - Samsung Galaxy2 , Android , 网页不可用 192.168.1.xx

> ID：13213702
> 
> 赞同：0
> 
> 时间：2012-11-03T21:31:19.467
> 
> 标签：android, localhost, galaxy

我正在几个移动设备和 ipad、iphone nokia 等上测试本地网站，wamp 设置为让网络上的任何人进入

我可以通过 192.168.1.101/folder 看到我的网站

但不是在 Galaxy 上，我检查并确保我通过 Wi-fi 连接到我的本地主机。

试过 10.0.2.2/文件夹

还有其他建议吗？

# java - 在实例化它们之前检查子类的相关性？

> ID：13213705
> 
> 赞同：0
> 
> 时间：2012-11-03T21:31:36.320
> 
> 标签：java, static, superclass

Java新手在这里。这是我想做的：

1.  枚举一个类列表，每个类都扩展同一个超类。
2.  询问班级是否对某个活动感兴趣。
3.  如果该类感兴趣，则实例化该类并调用对象的事件处理程序。

这个想法是步骤 2 和 3 将阻止不感兴趣的类的实例化。但是，因为我在实例化之前调用了一个方法，所以必须静态地进行检查。Java（正确地）不允许覆盖静态方法，所以看来我必须在步骤 2 中实例化类，使序列看起来像这样：

1.  枚举一个类列表，每个类都扩展同一个超类。
2.  实例化每个类并询问对象是否对事件感兴趣。
3.  如果对象感兴趣，请调用其事件处理程序。如果它不感兴趣，就扔掉它。

我是否错过了完成第一组步骤的一般方法？

请注意，这个问题主要是理论上的。对象创建开销可能低到足以使其毫无意义。不过，我对可能性很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:50:09.957

既然我们在谈论理论，我指的是一些事实并从设计的角度来说话。

静态方法不与类的特定实例相关联，因此重写不是一种选择，因为它依赖于实例。我说的是 Java，因为我记得其他一些允许类方法覆盖的语言。

解决方法是在每个子类中定义一个静态方法来返回它感兴趣的事件，这样您就可以在实例化之前知道这些数据。

另一种选择是让一个特定的类负责这些对象的实例化，并使该类保留一个表，将事件与感兴趣的类列表（您可以初始化和配置的表）相关联。这种方法似乎更易于维护，因为如果您想从事件中取消订阅类，则不必更改代码。

最后，您只需实例化与某个事件关联的所有类：

```
public class EventClassCreator {
    private Map<String, List<String>> subscriptions;

    public EventClassCreator() {
        subscriptions = new HashMap<String,Set<String>>();
    }

    public void addSubscription(String event, String class) {
        if(subscriptions.containsKey(event))
            subscriptions.get(event).add(class);
        else {
            Set<String> subscriptionsForEvent = new HashSet<String>();
            subscriptionsForEvent.add(class);
            subscriptions.put(event, subscriptionsForEvent);
        }
    }

    //You just need to make an event that loops over the list of classes, 
    //checks a subscription and instantiates a class if it is in the 
    //proper list.
} 
```

# sql - 到 SQL 数据库的现成 Web 查询接口

> ID：13213706
> 
> 赞同：9
> 
> 时间：2012-11-03T21:31:35.613
> 
> 标签：sql, database, web-applications, rdbms

你知道任何可以构成基于**Web 的 SQL 数据库通用查询接口的**免费工具吗，包括：

*   （主要）允许输入 SQL 查询并以某种不错的方式显示结果
*   接口应该允许一些基本的安全性——只允许`SELECT`查询
*   非常需要支持 MS SQL Server，但 Oracle 支持会很有用
*   应该针对现有的数据库实例运行而无需任何重新配置
*   可能很简单，无需浏览表、分析数据库列或您在 SQLDeveloper 或 SQL Server Management Studio 中会遇到的任何其他事情

平台/语言/等是次要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T22:27:31.247

StackExchange [Data Explorer](https://data.stackexchange.com/)具有此功能（[示例](https://data.stackexchange.com/stackoverflow/query/466/most-controversial-posts-on-the-site)）并且它是[开源](https://github.com/StackExchange/StackExchange.DataExplorer)的，因此您可以安装和使用它，甚至可以提取相关代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T22:31:33.600

也许像[SQL Fiddle](http://sqlfiddle.com/)之类的东西？

显然，这主要用于演示目的 - 如果您想将它安装在您自己的数据库之上，它对您没有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-03T12:25:22.093

[Re:dash (Redash)](http://redash.io/)是市场上一个很有前途的新开源玩家。从他们自己的网站：

> re:dash 是我们以更适合我们的文化和使用模式的方式释放公司内部数据的方式。
> 
> 在 re:dash 之前，我们尝试使用传统的 BI 套件并发现了一组臃肿、技术挑战和缓慢的工具/流程。我们正在寻找的是一种更类似于黑客的方式来查看数据，因此我们构建了一个。

# mysql - MySQL 列数据类型接受时间或单词列表

> ID：13213710
> 
> 赞同：1
> 
> 时间：2012-11-03T21:31:56.287
> 
> 标签：mysql, sqldatatypes, custom-data-type

今天是个好日子。我花了一整天的时间寻找我的问题的答案，但不幸的是我没有找到我想要的答案。

我正在尝试通过在 PHP 和 MySQL 数据库中创建 Web 应用程序来自动化我们当前使用的一些流程。

我想在 excel 中准备员工时间表，然后使用 php 将其上传到 MySQL。大多数数据库字段都是直截了当的：员工 ID 为 INT，日期为 DATE 格式。

我面临的问题是时间。当员工工作时，我想在 TIME 中上传他们的班次开始时间和结束时间，但是，如果他们不工作，我希望数据库以字母形式存储他们的状态：OFF 表示休息日，AL 表示年度请假，ML 病假，EL 紧急病假等等。

我不知道什么数据类型会支持这个。即：接受时间或特定结果代码列表中的条目。

任何帮助将不胜感激。

穆罕默德。

**旁注：** 我在开始学习如何编码时提出了这个问题，我学会避免的错误之一是混合业务逻辑和应用程序逻辑。这个问题将来*可能*对某人有用，我对任何新开发人员的建议是确保业务模型逻辑可能不会与您的应用程序逻辑齐头并进，但总有一种方法可以使这行得通。

穆罕默德。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:56:31.043

Here is an idea, put another column for status, one of the status will be working status and every other status will be as described. Only working status will have data in the "start time" and "end time" columns. In my opinion this is the best solution and allows for better search capabilities, cleaner database and more comprehensive readability.

However, if you absolutely want to, and/or have any reason on why you can't have an additional column, you can always store your time as text.

PS: Another tip for your database is to drop the date column and store both times in DATETIME format, it may range from unlikely to nearly impossible depending on what job shifts you are storing in the database, but it is possible to start a shift on one day and end it the next day, and even if you think you won't ever need it, it is good practice and makes the database more resilient. If you had to change it in the future it would be a pain to do so.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T21:39:47.553

MySQL 中没有这样的数据类型。

一个`VARCHAR`字段将接受日期和您的自定义代码，但如果编写查询会很痛苦：您将始终必须在转换为报告时间之前检查数据等。

我只会创建三个可为空的字段：`startTime`和`endTime`并且当且仅当两个时间都是 时才`absenceReason`填充。`absenceReason``NULL`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T21:40:43.630

您可以使用 VarChar 或 Char 字段来存储时间或文本值。但是，我建议对不同的事物使用不同的字段。比如数据类型time的开始时间和结束时间。以及 VarChar 或 Char 类型的休假类型等的单独字段。

# php - 通过带有动态 url 的 php 发送邮件不起作用

> ID：13213711
> 
> 赞同：0
> 
> 时间：2012-11-03T21:32:05.230
> 
> 标签：php, echo, href, sendmail

我有一个大问题！我需要跟踪用户在我的网站上所做的事情。作为解决它的一种方法，我创建了一个 sendmail 功能，以便在用户每次单击按钮时向我发送一封电子邮件。代码是这样的：

```
<div class="buy">
<a onclick="target='_blank'" href="<?php echo $this->product['from'];?>">

<?php
// The message
$message = "A new buy";
$link = $this->product['from'];

// Send
mail('xxx@mail.com', '@buy PRODUCT', $message, $link);
?> 

<img src="http://xxx.com/data/images/xxx.jpg" alt="Comprar"       />                            
</a>
</div> 
```

我收到的消息是

```
"A new buy

" 
```

它应该看起来像：

```
"A new buy

http://www.xxxx.com" 
```

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:34:44.803

您需要 2 只传递一个消息参数。

```
$message = $message.$this->product['from'];
mail('xxx@mail.com', '@buy PRODUCT', $message); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:37:34.177

mail('xxx@mail.com', '@buy PRODUCT', $message.$link);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:37:42.880

尝试这个

```
mail('xxx@mail.com', '@buy PRODUCT', $message.$link); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T21:38:18.303

只需将与您的消息相关的任何数据连接到您的 $message 变量，然后将该 $message 变量传递给邮件函数。例如：`$message = $message." Link: ".$link`然后`mail('xxx@mail.com', $message)`

# haskell - 使用 Emacs 编辑源文件时在 ghci 中评估 haskell 的函数

> ID：13213717
> 
> 赞同：5
> 
> 时间：2012-11-03T21:32:55.903
> 
> 标签：haskell, emacs, ghci

我正在编辑一个 haskell 源文件。我想在我的 subior-haskell 缓冲区（已经在不同的框架中打开）中运行我的 main 函数并继续编辑我的源文件。为此，我做

`C-c C-l`, 换帧, `main<ret>`, 变回原帧

这似乎效率很低。我想要一个一次性完成的emacs功能/键。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T21:50:38.597

实际上已经在`inf-haskell.el`:中定义了一个函数来执行此操作`inferior-haskell-load-and-run`。这将加载您当前的文件并运行`:main`.

您可以通过添加挂钩将其绑定到 Haskell 模式中的键：

```
(defun my-haskell-mode-hook ()
  (local-set-key (kbd "C-x C-r") 'inferior-haskell-load-and-run))
(add-hook 'haskell-mode-hook 'my-haskell-mode-hook) 
```

但是，玩了一会儿，我的电脑上似乎有一个奇怪的问题：有时，当它弹出到`*haskell*`缓冲区时，它并没有将点移动到最后。我觉得这很烦人。您可以通过自己将点移到末尾来轻松修复它：

```
(defun my-haskell-load-and-run ()
  "Loads and runs the current Haskell file."
  (interactive)
  (inferior-haskell-load-and-run inferior-haskell-run-command)
  (sleep-for 0 100)
  (end-of-buffer)) 
```

我相信这`sleep-for`是必要的，因为 Haskell 命令是异步运行的，需要一点时间才能返回。这整件事有点像黑客，但它似乎有效。

此外，您可能想要准确地自定义它是什么`inferior-haskell-run-command`。默认情况下，它是`:main`. 但是，对我来说，我认为`main`会更好，因为`main`受`:set args ...`where `:main`is not 的影响。

如果你想留在你当前的 Haskell 缓冲区中，你可以这样做：

```
(defun my-haskell-load-and-run ()
  "Loads and runs the current Haskell file."
  (interactive)
  (let ((start-buffer (current-buffer)))
    (inferior-haskell-load-and-run inferior-haskell-run-command)
    (sleep-for 0 100)
    (end-of-buffer)
    (pop-to-buffer start-buffer))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-21T19:58:40.613

要使用interactive-haskell-mode，我发现了与其他答案类似的设置：

```
(defun my-haskell-load-and-run ()
  "Loads and runs the current Haskell file main function."
  (interactive)
  (haskell-process-load-file)
  (haskell-interactive-mode-run-expr "main"))
(defun my-haskell-mode-hook ()
  (local-set-key (kbd "C-x C-r") 'my-haskell-load-and-run))
(add-hook 'haskell-mode-hook 'my-haskell-mode-hook) 
```

但我有一个小问题，它总是跳到源缓冲区的末尾......这可能很烦人。

# networking - 如何获得 Network Emulator for Windows Toolkit 以增加 ping 127.0.0.1 的延迟？

> ID：13213721
> 
> 赞同：1
> 
> 时间：2012-11-03T21:33:33.947
> 
> 标签：networking, multiplayer, latency

我正在制作一个多人游戏，我需要在模拟环境中对其进行测试，包括丢包、高延迟、数据包重新排序等。为此，我正在使用 Network Emulator for Windows Toolkit。但是我不能让它为环回数据包工作。例如，当我执行“ping google.com”时，延迟会增加，但是当我执行“ping 127.0.0.1”时 - 延迟低于 1 毫秒，所以我认为 NEWT 不会拦截这些数据包。你知道我怎样才能让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:05:18.857

如果您安装 VMWare 播放器，您可以创建一个具有自己网络接口的“远程”服务器。您可能无法在 Windows 上可靠地拦截回送地址，但更重要的是，您尝试做的并不是一个好的测试：它不会告诉您游戏将如何在现实环境中运行，两台计算机和两个操作系统交互。使用虚拟机和网络模拟器，您可以获得更接近现实的东西。

# java - 如何将文件或文件夹从 Windows 资源管理器拖到 java？

> ID：13213724
> 
> 赞同：-2
> 
> 时间：2012-11-03T21:33:51.933
> 
> 标签：java, user-interface, drag-and-drop, jpanel, jcomponent

如何将文件或文件夹从 Windows 资源管理器拖到 Jpanel 或文本失败...
以及如何调用桌面并使用它？

```
import java.awt.datatransfer.*;
import java.awt.event.*;
import java.awt.*;
import java.io.*;
import javax.swing.*;
import javax.swing.UIManager.LookAndFeelInfo;
import javax.swing.border.TitledBorder;
import javax.swing.filechooser.FileNameExtensionFilter;
import javax.swing.text.*;

public class test extends JPanel implements ActionListener {
private static final long serialVersionUID = -4487732343062917781L;
JFileChooser fc;
JButton clear;
JTextArea dropZone, console;
JSplitPane childSplitPane, parentSplitPane;
PrintStream ps;

  public test() {
super(new BorderLayout());

fc = new JFileChooser();;
fc.setMultiSelectionEnabled(true);
fc.setDragEnabled(true);
fc.setControlButtonsAreShown(false);
fc.setFileSelectionMode(JFileChooser.FILES_ONLY);               

JPanel fcPanel = new JPanel(new BorderLayout());
fcPanel.add(fc, BorderLayout.CENTER);

clear = new JButton("Clear All");
clear.addActionListener(this);
JPanel buttonPanel = new JPanel(new BorderLayout());
buttonPanel.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
buttonPanel.add(clear, BorderLayout.LINE_END);

JPanel leftUpperPanel = new JPanel(new BorderLayout());
leftUpperPanel.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
leftUpperPanel.add(fcPanel, BorderLayout.CENTER);
leftUpperPanel.add(buttonPanel, BorderLayout.PAGE_END);

JScrollPane leftLowerPanel = new javax.swing.JScrollPane();
leftLowerPanel.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
dropZone = new JTextArea();
dropZone.setColumns(20);
dropZone.setLineWrap(true);
dropZone.setRows(5);
dropZone.setDragEnabled(true);
dropZone.setDropMode(javax.swing.DropMode.INSERT);
dropZone.setBorder(new TitledBorder("Selected files/folders"));
leftLowerPanel.setViewportView(dropZone);

childSplitPane = new JSplitPane(JSplitPane.VERTICAL_SPLIT,
        leftUpperPanel, leftLowerPanel);
childSplitPane.setDividerLocation(400);
childSplitPane.setPreferredSize(new Dimension(480, 650));

console = new JTextArea();
console.setColumns(40);
console.setLineWrap(true);
console.setBorder(new TitledBorder("Console"));

parentSplitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,
                childSplitPane, console);
parentSplitPane.setDividerLocation(480);
parentSplitPane.setPreferredSize(new Dimension(800, 650));

add(parentSplitPane, BorderLayout.CENTER); 
```

}

```
public void setDefaultButton() {
getRootPane().setDefaultButton(clear); 
```

}

```
public void actionPerformed(ActionEvent e) {
if (e.getSource() == clear) {
    dropZone.setText("");

}
}

/**
 * Create the GUI and show it. For thread safety,
 * this method should be invoked from the
 * event-dispatching thread.
 */
private static void createAndShowGUI() {
//Make sure we have nice window decorations.
JFrame.setDefaultLookAndFeelDecorated(true);
try {
  //UIManager.setLookAndFeel("de.javasoft.plaf.synthetica.SyntheticaBlackStarLookAndFeel");
    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
        if ("Nimbus".equals(info.getName())) {
            UIManager.setLookAndFeel(info.getClassName());
            break;
        }
    }
}catch (Exception e){
  e.printStackTrace();
}

//Create and set up the window.
JFrame frame = new JFrame("Consolidator!");
frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

//Create and set up the menu bar and content pane.
test demo = new test();
demo.setOpaque(true); //content panes must be opaque
frame.setContentPane(demo);

//Display the window.
frame.pack();
frame.setVisible(true);
demo.setDefaultButton();
}

public static void main(String[] args) {
//Schedule a job for the event-dispatching thread:
//creating and showing this application's GUI.
javax.swing.SwingUtilities.invokeLater(new Runnable() {
    public void run() {
            createAndShowGUI();
        }
    });
}} 
```

我需要让这段代码接受来自 Windows 的文件和文件夹，而不仅仅是来自文件选择器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:39:31.457

我想你可以试试这个页面，[here](http://iharder.sourceforge.net/current/java/filedrop/)，然后打开 FileInputStream 并将文件输出到 JPanel。

# php - array_merge & strtr() 不起作用

> ID：13213727
> 
> 赞同：2
> 
> 时间：2012-11-03T21:34:35.117
> 
> 标签：php, arrays, array-merge, strtr

嗨，我有一个问题[`strtr()`](http://php.net/manual/en/function.strtr.php)。

我正在创建一个网站，用户可以在其中添加表情符号，并通过输入表情符号的特殊代码在帖子中调用它们。

这就是我所做的，它在某种程度上有效：

```
//FETCH FROM THE DB

while ( $row = mysql_fetch_array($fetch)) {
$table[] = array(
$row['shortcuttag1'] => "<img class='x' src='" . $row['tag1smilo'] . "' />",
$row['shortcuttag2'] => "<img class='x' src='" . $row['tag2smilo'] . "' />",
$row['shortcuttag3'] => "<img class='x' src='" . $row['tag3smilo'] . "' />",
$row['shortcuttag4'] => "<img class='x' src='" . $row['tag4smilo'] . "' />",
$row['shortcuttag5'] => "<img class='x' src='" . $row['tag5smilo'] . "' />"
); 
```

这将创建一个多维数组，其中包含一个用户上传的表情符号。

当我使用`strtr($txt,$table[0])`时，它适用于数组 [0] 和其他数组，但我想将特殊代码更改为位于所有子数组及其周围的表情符号。

因此，我所做的是像这样合并数组：

```
$oneDim = call_user_func_array('array_merge',$table); 
```

我得到了所有 SpecialCode => Image 字段的一维数组。

但是`strtr($txt,$oneDim)`停止使用它；它没有显示任何东西。

我很担心，因为我尝试了几种不同的方法来合并数组，而不是`call_user_func_array()`它给出了相同的结果。

也许有人可以帮助我。我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T14:42:33.117

你这样做是错的。

假设你有一个聊天框

```
+--------------------------------------+
|Tom: Welcome!                         |
|Terry: Hello! :)                      |
+--------------------------------------+-------+
|                                      | SEND  |
---------------------------------------+-------+ 
```

您需要在将输出放入文本框之前解析他的字符串，如下所示：

```
<?php
   if(strpos($str, ":)")){
         $str = str_replace(':)',"<img src='smiley.png'/>",$str);
   }
?> 
```

当您使用 AJAX 输出 $str var 时，您会将他的数据读回为 HTML。

不需要您开始进行的所有不必要的处理。

如果您需要更多帮助，我将在今天晚些时候下班后在我的网站@http [://www.code-genius.com/上发布教程。](http://www.code-genius.com/)

# python - 在python中，如果我将一个变量分配给一个方法，这意味着什么？

> ID：13213736
> 
> 赞同：3
> 
> 时间：2012-11-03T21:35:29.417
> 
> 标签：python, cherrypy, metaobject

阅读 CherryPy 教程我遇到了这个

```
class HelloWorld(object):
    def index(self):
        return "Hello World!"
    index.exposed = True 
```

那是什么意思？在方法索引的局部范围内暴露了一个变量？如果是这样，我可以改变暴露的价值吗？我认为这与 python 的 MetaObject 协议将类定义公开为对象本身有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T21:37:10.663

函数是 Python 中的一等对象。函数定义创建一个函数对象并将其绑定到函数的名称。函数对象可以具有属性，这就是您在此处看到的。函数属性的生命周期与函数对象的生命周期绑定，而函数内部的局部变量的生命周期与函数的单次执行绑定。它们是完全分开的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T21:37:38.423

不，它不是函数索引的局部变量，而是该函数的属性。是的，您也可以在函数之外对其进行修改。

阅读有关函数属性的[PEP 232 。](http://www.python.org/dev/peps/pep-0232/)

例子：

```
In [2]: def foo():pass
   ...: 

In [3]: foo.bar="text"

In [4]: foo.bar
Out[4]: 'text' 
```

# typescript - 为什么未声明的对象属性未标记为错误？

> ID：13213739
> 
> 赞同：2
> 
> 时间：2012-11-03T21:35:52.640
> 
> 标签：typescript

```
var opts: {n?: number; s?: string;};
opts = {n: 2};     // Ok
opts = {s: 'x'};   // Ok
opts = {};         // Ok
opts = {z: 3};     // Ok, but shouldn't this be an error? 
```

我希望`opts`对象不接受或接受任何声明的可选属性（但不接受其他属性），但它接受其他未定义的属性，即声明等同于`opts: {};`，这是一个错误吗？

如果它不是一个错误，你怎么能构造这样的声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T22:35:51.050

TypeScript 的部分优点在于它非常聪明地决定了一个对象是否可以被强制转换为另一种类型。

您的声明`opts`实际上没有任何要求，因为这两个属性都是可选的，因此任何任何对象都与此类型兼容。为了兼容，一个对象必须包含所有必需的属性——在这种情况下，没有必需的属性。

如果我们看一个需要属性的调整示例，这会更清楚：

```
var opts: {a: bool; n?: number; s?: string;};

opts = {a: true, n: 2};     // Ok
opts = {a: true, s: 'x'};   // Ok
opts = {a: true};         // Ok
opts = {a: true,z: 3};     // Ok
opts = {}; // not ok
opts = {z: 3}; // not ok 
```

*所以这意味着如果一个对象至少*支持所需的属性，它就会被认为是另一个对象的子类型。

这涉及设置对象。现在，如果您考虑使用该对象，您将看到力量所在。因为类型只承诺`n`和`s`（`a`在我的示例中），所以调用属性的代码`n`只能请求这些属性。无法访问其他属性：

```
var opts: {a: bool; n?: number; s?: string;};

opts = {a: true, n: 1, s: 'Hi', z: 3};

var x - opts.z; // not ok 
```

所以我们仍然有类型安全，因为我们只能*使用*类型声明中的属性——而不是附加属性。

# php - 原生 PHP 传输操作到 CPU

> ID：13213743
> 
> 赞同：-2
> 
> 时间：2012-11-03T21:36:01.583
> 
> 标签：php, cpu, transfer, operation

有没有办法让 cpu 处理 PHP 中的一些操作（很像 openCL），但在原生 php 中可用（没有实现 PHP-openCL）？

/E：

我的意思是说：

我正在编写一些 php cli 脚本

您在 php 中所做的一切（变量等）都将缓存在 ram 中。但是您仍然可以直接访问 RAM（shmop - [Link](http://www.php.net/manual/en/function.shmop-open.php)），这使得访问速度更快。（这是一个访问深层系统资源的例子，我只是想知道是否有办法访问其他深层系统资源）

我想直接访问 CPU 以加速某些操作。（在多线程的上下文中（pcntl_fork 并在 php cli 脚本中的无限循环中运行）。有没有办法跳过 c 处理程序（如果这是正确的表达式，不知道）。

OpenCL 只是一个例子 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:33:11.940

`shmop`不是“*直接*访问内存”（它是*共享*内存），“绕过C层”不是“更直接地访问CPU”。

唯一可能有意义的是您希望直接在[ASM](http://en.wikipedia.org/wiki/Assembly_language)中编写代码，而不是使用最终编译为机器代码的高级语言编写代码。如果您认为自己比 C/PHP 编译器更了解 CPU 并且可以为它编写更高效的代码（在您的情况下，老实说，我对此表示怀疑），这将很有用。如果是这样，您将不得不用所述低级语言编写一个外部应用程序并从 PHP 调用它。在 C 和其他一些语言中，您可以编写 inline-ASM，但 PHP 不支持。

# html - css navbar 如何在不增加导航栏高度的情况下使导航栏中的文本从顶部填充

> ID：13213744
> 
> 赞同：0
> 
> 时间：2012-11-03T21:36:01.657
> 
> 标签：html, css, twitter-bootstrap, navbar

我尝试进行以下操作，但它增加了导航栏中文本与顶部的距离，但也增加了导航栏的高度。
我只希望导航栏中的文本从顶部有一些填充。有人知道该怎么做吗？

```
.navbar-inner { 
  padding-top: 16px;
} 
```

![我想从顶部增加那些文本的高度，我该怎么做？](../Images/0b1cc06f3b4446a6f3cc14ee46c5cfc8.png)

我想增加“登录，注册等”的距离。从顶部 。

此代码不起作用

```
 .navbar-inner {     
   heigth:20px; 
   padding-top:20px; 
 } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-03T21:43:38.447

您必须从元素的高度中扣除填充量。

例如。如果你的元素是 30px 高并且你有 'padding-top: 10px;' 那么你必须从元素高度中减去 10px。所以你现在有：

```
height: 20px;
padding-top: 10px; 
```

欲了解更多信息，请阅读[此处](http://www.w3schools.com/css/css_boxmodel.asp)

# apache - 从 glassfish 迁移到 apache

> ID：13213746
> 
> 赞同：0
> 
> 时间：2012-11-03T21:36:19.437
> 
> 标签：apache, jakarta-ee, tomcat6, glassfish-3

我使用 Netbeans 创建了一个项目并选择 Glassfish 3.1 作为服务器，它还使用 Derby 数据库。现在我想迁移到 Apache Tomcat 7，我只是做了以下事情：

*   停止了玻璃鱼
*   将 Netbeans 项目的属性更改为使用 Apache 7 而不是 Glassfish
*   将 Apache 添加到 Netbeans 并启动它

当我尝试构建项目时，出现几条错误消息，如下所示：

> 错误：找不到符号导入 javax.persistence.Basic；

尽管我确保在 Netbeans 的 Apache 服务器属性中正确设置了 Java 的 /bin 路径，并且还设置了 src.zip 路径。

我认为必须遵循一些步骤才能成功迁移，有人可以指导我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:08:05.750

Apache Tomcat 不附带 JPA 规范。它只是一个 Servlet 容器。

您必须将 JPA 规范和 Hibernate（实现）添加到您的项目中，并确保它将部署在您的 WEB-INF/lib 上。

然后，确保您的 Persistence Unit 是 transaction-type="RESOURCE_LOCAL"，并配置所有必要的属性以创建连接。

**例子：**

```
 <persistence-unit name="bookmark-ds" transaction-type="RESOURCE_LOCAL">
      <class>com.sample.domain.YourEntity</class>
      <properties>
         <property name="javax.persistence.jdbc.driver" value="org.hsqldb.jdbcDriver" />
         <property name="javax.persistence.jdbc.user" value="sa" />
         <property name="javax.persistence.jdbc.password" value="" />
         <property name="javax.persistence.jdbc.url" value="jdbc:hsqldb:mem:." />

         <property name="hibernate.show_sql" value="true" />
         <property name="hibernate.format_sql" value="false" />
         <property name="hibernate.hbm2ddl.auto" value="create-drop" />
    </properties>
 </persistence-unit> 
```

Obs：这是一个 HSQLDB 示例。调整德比。;-)

更新：这里有一个很棒的 Tomcat+JPA+EclipseLink[教程](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Tomcat_Web_Tutorial)。

# command-line - 如何捕获命令行输出

> ID：13213751
> 
> 赞同：0
> 
> 时间：2012-11-03T21:36:53.670
> 
> 标签：command-line, capture, output

我想跑

```
"runas /user:xxxx "aspnet_regiis /i" 
```

在我的 Windows 2008 服务器中，它失败了，一个快速弹出窗口立即消失。

如何捕获输出？或者让弹出窗口在我关闭之前不会立即消失。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:42:41.487

问题已解决，我只需要查看包含一些错误消息的输出。我以 cmd 运行并获得正确的权限，一切都很好。

感谢回复。

# java - Java 套接字读取超时异常

> ID：13213757
> 
> 赞同：0
> 
> 时间：2012-11-03T21:37:31.450
> 
> 标签：java, sockets, client-server, inputstream

我尝试使用读取超时来克服服务器端的用户断开连接检测。这是我的代码的一部分：

```
try {
        socket.setSoTimeout(3000);
        in = new DataInputStream(socket.getInputStream());
        out = new DataOutputStream(socket.getOutputStream());
        usr = new User(in.readUTF());
        usr.connectUser();
        int i=0;
        while(true){
            try{
                i = in.readInt();
            }
            catch(SocketTimeoutException e){
                System.Out.Println("Timeout");
                // user connected, no data received
            }
            catch(EOFException e){
                System.Out.Println("Disconnected");
                // user disconnected
            }
        }
    }
    catch(Exception  e){
        // other exceptions
    } 
```

该代码工作正常，除了“用户断开连接”问题。我想捕获超时异常并继续等待数据，但前提是客户端仍然连接。为什么除了 SocketTimeoutException 我从来没有遇到过其他异常？我不应该在 in.readInt() 因为客户端断开连接而无法使用套接字时得到 IOException 吗？

有没有其他简单的方法来检测用户断开连接？我的意思是不必要的断开连接，例如用户突然关闭wifi等...

谢谢，利奥兹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:54:14.750

If the client didn't write anything within the timeout period, you get a SocketTimeoutException. If he disconnected instead of writing anything, you get an EOFException. Catch them separately. If you didn't get an EOFException, he didn't disconnect.

# c++ - 指向同一类（C++）中的成员函数的指针？

> ID：13213760
> 
> 赞同：2
> 
> 时间：2012-11-03T21:37:38.103
> 
> 标签：c++, class, pointers

我正在编写一个程序来控制 Arduino Mega 微控制器（用 C/C++ 编写）上的自动家庭酿造系统。简而言之，该程序正在做的是有一个 C# 应用程序，它定期通过 USB 向微控制器发送消息。然后有一个我编写的消息接口，它读取消息，并将其转发到消息所针对的任何组件。每条消息有 16 个字节长，前 4 个是事务代码，后 12 个是数据。现在，我阅读了消息并将其转发给我的 StateController 类。它来自 InboundMessage 函数。我想要做的是我有一个结构（在 StateController.h 中定义），其中包含事务代码和指向 StateController 中成员函数的指针。我定义了一个 QueueList（只是一个简单的链表库），并将一堆这些结构推入其中。我想做的是，当一条消息进入 inboundMessage 函数时，我想遍历链表，直到找到匹配的事务代码，然后调用该消息的成员函数，将其传递给消息中的数据。

我想我已经正确初始化了一切，但问题就在这里。当我尝试编译时，我收到一条错误消息，提示“此范围内不存在 func”。我已经到处寻找解决方案，但找不到。我的代码如下

```
StateController.cpp

StateController::StateController(){
  currentState = Idle;
  prevState = Idle;
  lastRunState = Idle;

  txnTable.push((txnRow){MSG_BURN, &StateController::BURNprocessor});
  txnTable.push((txnRow){MSG_MANE, &StateController::MANEprocessor});
  txnTable.push((txnRow){MSG_MAND, &StateController::MANDprocessor});
  txnTable.push((txnRow){MSG_PUMP, &StateController::PUMPprocessor});
  txnTable.push((txnRow){MSG_STAT, &StateController::STATprocessor});  
  txnTable.push((txnRow){MSG_SYNC, &StateController::SYNCprocessor});
  txnTable.push((txnRow){MSG_VALV, &StateController::VALVprocessor});
}

void StateController::inboundMessage(GenericMessage msg){
  // Read transaction code and do what needs to be done for it

  for (int x = 0; x < txnTable.count(); x++)
  {
    if (compareCharArr(msg.code, txnTable[x].code, TXN_CODE_LEN) == true)
    {
      (txnTable[x].*func)(msg.data);
      break;
    }
  }
} 
```

状态控制器.h

```
class StateController{
  // Public functions
  public:

    // Constructor
    StateController();

    // State Controller message handeler
    void inboundMessage(GenericMessage msg);

    // Main state machine
    void doWork();

  // Private Members
  private:  

    // Hardware interface
    HardwareInterface hardwareIntf;

    // Current state holder
    StateControllerStates currentState;

    // Preveous State
    StateControllerStates prevState;

    // Last run state
    StateControllerStates lastRunState;

    // BURN Message Processor
    void BURNprocessor(char data[]);

    // MANE Message Processor
    void MANEprocessor(char data[]);

    // MAND Message Processor
    void MANDprocessor(char data[]);

    // PUMP Message Processor
    void PUMPprocessor(char data[]);

    //STAT Message Processor
    void STATprocessor(char data[]);

    // SYNC Message Processor
    void SYNCprocessor(char data[]);

    // VALV Message Processor
    void VALVprocessor(char data[]);

    void primePumps();

    // Check the value of two sensors given the window
    int checkSensorWindow(int newSensor, int prevSensor, int window);

    struct txnRow{
    char code[TXN_CODE_LEN + 1];
    void (StateController::*func)(char[]);
    };

    QueueList<txnRow> txnTable;

}; 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:44:09.323

`func`只是一个普通成员，`txnRow`因此您可以使用`.`，而不是`.*`，例如`txnTable[x].func`.

要在 上调用此成员函数`this`，您可以执行以下操作：

```
(this->*(txnTable[x].func))(msg.data); 
```

# arraylist - ArrayList 和 LinkedList 堆栈实现

> ID：13213761
> 
> 赞同：1
> 
> 时间：2012-11-03T21:37:41.723
> 
> 标签：arraylist, linked-list, stack, containers

我已经基于下面的接口编写了 Stack 的两个实现

```
public interface Stack<T>{
   public void push(T t);
   public T pop();
   public boolean isEmpty();
} 
```

第一个实现使用 ArrayList 作为元素的容器，而第二个实现使用 LinkedList。是为每个底层容器分别实现还是只有一个独立于容器的堆栈实现更好？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:32:49.730

在回答您的问题之前，当您使用接口时，请在您的接口名称前添加“I”，例如：IStack

当你为每个类使用interface的时候，你要注意哪些实现，当然你必须为每个类重写interface的方法。因为，接口没有实现那里的方法，直到接口被某些类继承，更不用说容器的实现有不同的 .

例子：

```
class YourStackOne<T>: IStack<T>
{
//Container
LinkedLink<T> ContainElement;

public void push(T t){//implementation for YourStackOne..}
public T pop(){//implementation for YourStackOne..}
public boolean isEmpty{//implementation for YourStackOne..}
}

class YourStackTwo: IStack<int>
{
//Container
ArrayList ContainElement;

public void push(int t){//implementation for YourStackTwo..}
public int pop(){//implementation for YourStackTwo..}
public boolean isEmpty{//implementation for YourStackTwo..}
} 
```

顺便说一句，如果您使用 .NET 编写代码，为什么不使用 Stack 类呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:26:04.947

如果一种实现在不同情况下比另一种更好，那么您应该同时拥有两种实现。

但是，在堆栈的情况下，如果您只有 push()、pop() 和 isEmpty()，则 LinkedList 或 ArrayList 在时间复杂度方面不会优于另一个。因此，您可以只选择一种实现方式。

push()、pop() 和 isEmpty() 的恒定时间复杂度：

使用 ArrayList：总是添加到列表的底部，并从底部删除。

使用 LinkedList：始终添加到列表的前面并从前面删除。

# emacs - Emacs Lisp 中的递归函数在评估自身时存在 void-variable 错误

> ID：13213762
> 
> 赞同：0
> 
> 时间：2012-11-03T21:37:41.283
> 
> 标签：emacs, recursion, elisp

我正在尝试定义一个递归函数`balanced`，该函数接受一个字符串并仅在字符串中的括号平衡时才返回 true。

我编写的 elisp 代码是基于我为 Odersky 为 Coursera 类编写的一些 Scala 代码，它是音译。

```
 ;; check if expr (list of chars of some expression) is balanced
  (defun balanced (expr)
    (defvar lparen (string-to-char "("))
    (defvar rparen (string-to-char ")"))

    (defun is-open (c) (eq lparen c))
    (defun is-close (c) (eq rparen c))
    (defun is-empty (ls) (eq ls nil))
    (defun is-matching (l r) (and (is-open l) (is-close r)))

    (defun is-balanced (list stack)
      (cond ((is-empty list) (is-empty stack))

      ((is-open (car list))
       (is-balanced (cdr list) ;; 'push' open-paren onto stack
        (cons (car list) stack)))

      ((is-close (car list))

       (if (is-empty stack) nil
         (and 
          (is-balanced (cdr list) (cdr stack))
          (is-matching (car stack) (car list)))))

      (is-balanced (cdr list) (cdr stack))))
  is-balanced 
```

我处于 lisp-interaction-mode，所以我使用 Ctrl-J 来评估上述`defun`语句。

然后，当我尝试对此进行评估时：

```
 (balanced "(balanced nil nil)") 
```

我收到一个无效变量错误：

```
Debugger entered--Lisp error: (void-variable is-balanced)
    balanced("(balanced nil nil)")
    (progn (balanced "(balanced nil nil)"))
    eval((progn (balanced "(balanced nil nil)")) t)
    eval-last-sexp-1(t)
    eval-last-sexp(t)
    eval-print-last-sexp()
    call-interactively(eval-print-last-sexp nil nil)
    recursive-edit()
    debug(error (void-variable is-balanced))
    balanced("(balanced nil nil)")
    (progn (balanced "(balanced nil nil)"))
    eval((progn (balanced "(balanced nil nil)")) t)
    eval-last-sexp-1(t)
    eval-last-sexp(t)
    eval-print-last-sexp()
    call-interactively(eval-print-last-sexp nil nil)
    recursive-edit() 
```

该功能似乎无法识别自己，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T03:47:07.047

当你执行你的函数`(balanced ...)`时，它的作用是：

1.  它首先定义了两个全局变量
2.  它定义了其他五个函数
3.  它访问变量`is-balanced`。

步骤 3\. 发生在 结束之后`(defun is-balanced (list stack) ... ))))`。

```
(defun balanced (expr)
    ...

    (defun is-balanced (list stack)
      ...
      (is-balanced (cdr list) (cdr stack))))
  is-balanced ;; <= here! 
```

但是您还没有定义这样的变量。您已经定义了一个同名的*函数*，但是您不能像访问 Emacs Lisp 中的变量一样访问函数对象。另请参见[此处](https://stackoverflow.com/a/2657371/261142)。由于没有命名变量`is-balanced`，您会收到一条错误消息。

（也就是说，对于您的代码的其余部分有很多需要批评的地方。对于初学者，请注意，通过将`defun`s 包含在s 中，您*每次*调用`defun`s 时都在重新定义您的`is-*`函数。那肯定不是您的想要。类似地，您可能希望将 defvar 移到函数体之外，因为它们定义了*全局*变量。或者您的意思是要改用？如果您真的想要全局值，那么可能更合适。）*`(balanced ...)`*`(let ...)``(defconst...)`**

 *** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T23:42:20.093

问题是`cond`表达式的最后一个元素没有包含在`(t`...中`)`：

不正确：

```
 (is-balanced (cdr list) (cdr stack)) 
```

正确的

```
 (t (is-balanced (cdr list) (cdr stack))) 
```

需要这样做的原因是最后一个表达式应该是这种`else`情况。**

# magento - 在 Magento Checkout 中添加自定义字段以查看订单步骤

> ID：13213769
> 
> 赞同：2
> 
> 时间：2012-11-03T21:38:26.217
> 
> 标签：magento, checkout, custom-fields

我在这里遵循演练：[http](http://www.excellencemagentoblog.com/magento-add-custom-fields-checkout-page) ://www.excellencemagentoblog.com/magento-add-custom-fields-checkout-page 。

我最初要求打开一个关于自定义字段未保存到表中的问题，当该字段被移动到审查订单步骤而不是文章引用的计费步骤时。所以我重新表述我的问题，因为我尽可能地缩小了这个范围。这是我的观察者课

```
class Excellence_Custom_Model_Observer{
public function saveQuoteBefore($evt){
    $quote = $evt->getQuote();
    $post = Mage::app()->getFrontController()->getRequest()->getPost();
    if(isset($post['custom']['sales_person'])){
        $var = $post['custom']['sales_person'];
        $quote->setSalesPerson($var); 
    }
}
public function saveQuoteAfter($evt){
    $quote = $evt->getQuote();
    if($quote->getSalesPerson()){
        $var = $quote->getSalesPerson();
        if(!empty($var)){
            $model = Mage::getModel('custom/custom_quote');
            $model->deteleByQuote($quote->getId(),'sales_person');
            $model->setQuoteId($quote->getId());
            $model->setKey('sales_person');
            $model->setValue($var);
            $model->save();
        }
    }
}
public function loadQuoteAfter($evt){
    $quote = $evt->getQuote();
    $model = Mage::getModel('custom/custom_quote');
    $data = $model->getByQuote($quote->getId());
    foreach($data as $key => $value){
        $quote->setData($key,$value);
    }
}
public function saveOrderAfter($evt){
    $order = $evt->getOrder();
    $quote = $evt->getQuote();
    if($quote->getSalesPerson()){
        $var = $quote->getSalesPerson();
        if(!empty($var)){
            $model = Mage::getModel('custom/custom_order');
            $model->deleteByOrder($order->getId(),'sales_person');
            $model->setOrderId($order->getId());
            $model->setKey('sales_person');
            $model->setValue($var);
            $order->setSalesPerson($var);
            $model->save();
        }
    }
}
public function loadOrderAfter($evt){
    $order = $evt->getOrder();
    $model = Mage::getModel('custom/custom_order');
    $data = $model->getByOrder($order->getId());
    foreach($data as $key => $value){
        $order->setData($key,$value);
    }
} 
```

}

通过 Mage::log() 我能够看到 saveQuoteBefore() 仅在计费步骤中被调用。这就是为什么当我移动场地时，它从未记录过。

是否有另一个钩子需要我保存在审查订单步骤中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:55:27.613

在这篇文章中找到了我的答案。很抱歉浪费了一个问题，但希望有人能从中受益。

[如何从 Magento 的 Onepage Checkout 获取发布数据？](https://stackoverflow.com/questions/7461569/how-to-get-post-data-from-magentos-onepage-checkout)

基本上一个 js 文件正在序列化输入字段。我不得不将它与字段名称的协议数组一起放入。

# jquery - 使用 jQuery $.post 和 Android 的 Phonegap (Cordova)

> ID：13213770
> 
> 赞同：1
> 
> 时间：2012-11-03T21:38:25.807
> 
> 标签：jquery, cordova

我有一个 Phonegap 应用程序，需要将数据发布到远程服务器。但是，当我尝试使用 jQuery 的 $.post 时，它永远不会进入回调。

这是我的Javascript：

```
$(document).ready(function() {
    $('form').submit(function() {
        console.log('about to post');
        $.post('http://mysubdomain.mydomain.com/index.php', function(data) {
            console.log('In callback');
            console.log(data);
        });
    });
}); 
```

当我运行它并查看 Eclipse LogCat 时，我看到“即将发布”，但从未看到“回调中”。我将它转储到服务器上我的 PHP 文件中的脚本标记中，以确保它是正确的并且确实足够，当我刷新页面时，我看到 HTML 显示在 Javascript 控制台中。我已经在 res/xml 中的 config.xml 文件中将所有域列入白名单，所以我不明白为什么这不起作用。如果有人有任何见解，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:09:57.203

我猜你从来没有进入成功回调的原因是某种错误正在发生。尝试相同的请求，例如：

```
$(document).ready(function() {
    $('form').submit(function() {
        console.log('about to post');
        $.ajax({
            url: 'http://mysubdomain.mydomain.com/index.php',
            data: {}, // your data (if any) should go here
            dataType: 'application/json' // or whatever you expect back
            success: function(data) {
                console.log('In callback');
                console.log(data);
            },
            error: function(error) {
                console.log(error);
            }
        });
    });
}); 
```

那至少应该向您显示错误...

# jquery - 原始复选框 - 为什么在 jquery 1.8.0 中代码不起作用（不为 span 创建背景图像）？

> ID：13213776
> 
> 赞同：1
> 
> 时间：2012-11-03T21:39:11.000
> 
> 标签：jquery, checkbox

下一个代码在 Jquery 1.5.1 中工作，但在 Jquery 1.8.0 中这个代码不起作用，为什么？css的问题**添加跨度后。如何解决这个滞后？**

 **[**原始文件在这里**](http://testwork.ru/1/Checkbox.rar)

如果包含在 index.html jquery.1.5.1 代码中有效，但如果包含 jquery 1.8.1，则代码并非全部有效...

CSS：

```
#checkbox .CheckBox{
    background:url('checkbox_33.png') no-repeat right bottom;
    display:inline-block;
    min-width:110px;
    /* height:33px; */
    height:33px;
    white-space:nowrap;
    position:relative;
    cursor:pointer;
    margin-left:14px;
} 
```

jQuery代码

```
(function($){
    $.fn.Checkbox = function(options){

        // Default On / Off labels:

        options = $.extend({
            labels : ['ON','OFF']
        },options);

        return this.each(function(){
            var originalCheckBox = $(this),
                labels = [];

            // Checking for the data-on / data-off HTML5 data attributes:
            if(originalCheckBox.data('on')){
                labels[0] = originalCheckBox.data('on');
                labels[1] = originalCheckBox.data('off');
            }
            else labels = options.labels;

            // Creating the new checkbox markup:
            var checkBox = $('<span>',{
                className   : 'CheckBox '+(this.checked?'checked':''),
                html:   '<span class="CBContent">'+labels[this.checked?0:1]+
                        '</span><span class="CBPart"></span>'
            });

            // Inserting the new checkbox, and hiding the original:
            checkBox.insertAfter(originalCheckBox.hide());

            checkBox.click(function(){
                checkBox.toggleClass('checked');

                var isChecked = checkBox.hasClass('checked');

                // Synchronizing the original checkbox:
                originalCheckBox.attr('checked',isChecked);
                checkBox.find('.CBContent').html(labels[isChecked?0:1]);
            });

            // Listening for changes on the original and affecting the new one:
            originalCheckBox.bind('change',function(){
                checkBox.click();
            });
        });
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T14:17:57.777

创建`span`元素时，尝试更改`className`为`class`：

```
// Creating the new checkbox markup:
var checkBox = $('<span>',{
    class   : 'CheckBox '+(this.checked?'checked':''),
    html:   '<span class="CBContent">'+labels[this.checked?0:1]+'</span><span class="CBPart"></span>'
}); 
```**

# java - 查找字符串的所有不同子字符串

> ID：13213783
> 
> 赞同：2
> 
> 时间：2012-11-03T21:39:59.393
> 
> 标签：java, string, substring

大家好，我遇到了家庭作业问题，它要求我找到字符串的所有不同子字符串。我已经实现了一种方法，它会告诉你字符串的所有子字符串，但我需要帮助弄清楚如何不计算一个已经被计算为子字符串的子字符串，因为分配是要找到不同的子字符串。

```
public int printSubstrings1(int length)
{ 
    for(int i=0; i<text.length()-length+1;i++)
    {
        String sub = text.substring(i,length+i);

        counter++;
    }
    return counter;

} 
```

在这里，我从给定的字符串中传递我想要的子字符串的长度。我正在通过另一种方法做到这一点。

所以给出的示例字符串是“fred”，而不是不同的子字符串将是 10。我的方法将输出正确答案，因为字符串不包含任何重复的字母。我被困在我确实得到重复子字符串的部分。

如果我输入弗雷德。这是我的方法将输出的

长度 1
f
r
e
d
长度 2
fr
ed 长度 3
fre 红色 长度 4 fred

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-23T17:51:40.903

```
public ArrayList<String> getAllUniqueSubset(String str) {
        ArrayList<String> set = new ArrayList<String>();
        for (int i = 0; i < str.length(); i++) {
            for (int j = 0; j < str.length() - i; j++) {
                String elem = str.substring(j, j + (i+1));
                if (!set.contains(elem)) {
                    set.add(elem);
                }
            }
        }
        return set;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T21:46:42.530

Here the example with a [Set](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)

```
public int printSubstrings1(int length) {
    Set<String> set = new HashSet<String>();
    for(int i=0; i < text.length() - length + 1; i++) {
        String sub = text.substring(i,length+i);
        set.add(sub);
    }
    for (String str : set) {
        System.out.println(str);
    }
    return set.size();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:46:33.710

Insert any new sub string into an array and check if it is already available available there don't add it to the array else do. When done loop through the array and print out the distinct sub strings.

To check if an element exists in an array create a function that takes an array and a value as parameters. It would loop through the array looking for the value if found return true. Out of the loop return false.

e.g.

```
public static boolean(String target, String[] arr)
{
  for(int i = 0; i < arr.length; i++){
      if(arr[i].equals(target))
         return true;
  }
   return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-10T17:12:12.673

我点击了这个[链接](https://www.quora.com/Given-a-string-how-do-I-find-the-number-of-distinct-substrings-of-the-string/answer/Siddharth-Subramanian)。承认来自quora中类似答案的内容

该解决方案包括构建后缀数组，然后根据最长公共前缀查找不同子字符串的数量。

这里的一个关键观察是：

如果您查看字符串的每个后缀的前缀，您已经涵盖了该字符串的所有子字符串。

举个例子：香蕉

后缀为： 0) BANANA 1) ANANA 2) NANA 3) ANA 4) NA 5) A

如果我们对上述后缀集进行排序，则通过前缀会容易得多，因为我们可以轻松跳过重复的前缀。

排序后缀集：5) A 3) ANA 1) ANANA 0) BANANA 4) NA 2) NANA

从现在开始，

LCP = 2 个字符串的最长公共前缀。

初始化

ans = 长度（第一个后缀）= 长度（“A”）= 1。

现在考虑来自上述排序后缀集合的连续后缀对，即[A, ANA]、[ANA, ANANA]、[ANANA, BANANA]等。

我们可以看到，LCP("A", "ANA") = "A"。

不属于公共前缀的所有字符都构成不同的子字符串。在上述情况下，它们是“N”和“A”。所以应该将它们添加到ans中。

所以我们有 1 2 ans += length("ANA") - LCP("A", "ANA") ans = ans + 3 - 1 = ans + 2 = 3

对下一对连续的后缀执行相同的操作：["ANA", "ANANA"]

1 2 3 4 LCP("ANA", "ANANA") = "ANA"。ans += length("ANANA") - length(LCP) => ans = ans + 5 - 3 => ans = 3 + 2 = 5。

同样，我们有：

1 2 LCP("ANANA", "BANANA") = 0 ans = ans + length("BANANA") - 0 = 11

1 2 LCP("香蕉", "NA") = 0 ans = ans + 长度("NA") - 0 = 13

1 2 LCP("NA", "NANA") = 2 ans = ans + length("NANA") - 2 = 15

因此，字符串“BANANA”的不同子字符串的数量 = 15。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-01T19:10:46.847

有两种方法可以做到这一点，不确定你的老师是否允许，但我将使用 HashSet 来实现唯一性。

不使用'substring()'：

```
void uniqueSubStrings(String test) {
HashSet < String > substrings = new LinkedHashSet();
char[] a = test.toCharArray();
for (int i = 0; i < test.length(); i++) {
    substrings.add(a[i] + "");
    for (int j = i + 1; j < test.length(); j++) {
        StringBuilder sb = new StringBuilder();
        for (int k = i; k <= j; k++) {
            sb.append(a[k]);
        }
        substrings.add(sb.toString());
    }
}
System.out.println(substrings); 
```

}

使用“子字符串”：

```
 void uniqueSubStringsWithBuiltIn(String test) {
    HashSet<String> substrings = new LinkedHashSet();

    for(int i=0; i<test.length();i++) {
        for(int j=i+1;j<test.length()+1;j++) {
            substrings.add(test.substring(i, j));
        }
    }
        System.out.println(substrings);} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-17T02:04:20.830

该算法仅使用 Z 函数 / Z 算法。

对于单词的每个前缀 i，将其反转并对其执行 z_function 。以 结尾的新的不同子字符串的`i`数量`(the length of the prefix) — (maximum value in the z_function array)`。伪代码如下所示：

```
string s; cin >> s;
int sol = 0
foreach i to s.size()-1
    string x = s.substr( 0 , i+1 );
    reverse( x.begin() , x.end() );
    vector<int> z = z_function( x );
    //this works too
    //vector<int> z = prefix_functionx(x); 
    int mx = 0;
    foreach j to x.size()-1
        mx = max( mx , z[j] );
    sol += (i+1) - mx; 

cout << sol; 
```

该算法的时间复杂度为 O(n^2)。最大值也可以从 z_function 返回。

[资源。](http://codeforces.com/blog/entry/19144?#comment-333206)

这不是我原来的答案。我只是链接到它并粘贴它以防链接断开。

# php - 以编程方式监控一个 URL 的每个 IP

> ID：13213784
> 
> 赞同：1
> 
> 时间：2012-11-03T21:40:00.153
> 
> 标签：php, dns

目前我在他们的 IPv4 和 IPv6 地址上监控我的网站

但我的下一个网站将使用多个 IP 地址托管。我想***监视所有这些***。

这是我当前用于双栈监控的代码（仅监控一个 IP 地址）

```
<?php
$resultat4 = file_get_contents_curl( 'http://www.mydomain.com/?cjg_monitoring=1', 4);
$resultat6 = file_get_contents_curl( 'http://www.mydomain.com/?cjg_monitoring=1', 6);

if (substr($resultat4,0,2) == "OK"){ echo 'IPv4 stack OK' }
if (substr($resultat6,0,2) == "OK"){ echo 'IPv6 stack OK' }

function file_get_contents_curl($url,$ip_version=0) {
    $ch = curl_init();

    if($ip_version == 4)
        curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4 );
    elseif($ip_version == 6)
        curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V6 );

    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); //Set curl to return the data instead of printing it to the browser.
    curl_setopt($ch, CURLOPT_URL, $url);

    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
}
?> 
```

如何获得所有使用 Curl PHP 测试的 IP 地址？

我想做的类似于这个更简单的版本：

```
<?php
$ip_adds = get_all_ip_addresses( $url );

$problem_encountered = false;
foreach( $ip_adds as $ip_add ){
    $content = get_content_url_on_ip( 'http://www.mydomain.com/?cjg_monitoring=1', $ip_add );
    if ( $content != "OK") $problem_encountered = true;
}

if ( !$problem_encountered ) echo "All IPv4 and IPv6 Addresses OK";
?> 
```

在我的情况下 www.mydomain.com 有每个版本的许多 IP 地址：

```
$host www.mydomain.com
www.mydomain.com has address 173.194.35.180
www.mydomain.com has address 173.194.35.176
www.mydomain.com has address 173.194.35.177
www.mydomain.com has IPv6 address 2001:db8:4016:801::1008
www.mydomain.com has IPv6 address 2001:db8:4016:801::1009
www.mydomain.com has IPv6 address 2001:db8:4016:801::1010 
```

这就是我使用它的原因：

```
 //return array[0][ip] or array[0][ipv6]
function get_all_ip_addresses( $url ){

    $url_tab = parse_url($url);
    $host = $url_tab['host']

    $ip4s = dns_get_record($host, DNS_A);
    $ip6s = dns_get_record($host, DNS_AAAA);

    return array_merge($ip4s, $ip6s);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T23:44:56.790

您可以使用 awk 处理`host`命令的输出，并在 PHP 中使用`exec()`. 结果将是一个 IP 地址数组，包括 IPv4 和 IPv6 - 如果需要，您可以使用正则表达式来确定哪个是。

```
function get_all_ip_addresses($host){
    exec('host ' . $host . ' | awk \'/has (IPv6 )?address/ { if ($3 == "IPv6") print $5; else print $4; }\'', $ips);
    return $ips;
} 
```

数组的转储：

```
Array
(
    [0] => 173.194.35.180
    [1] => 173.194.35.176
    [2] => 173.194.35.177
    [3] => 2001:db8:4016:801::1008
    [4] => 2001:db8:4016:801::1009
    [5] => 2001:db8:4016:801::1010
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T14:47:26.327

好的，所以诀窍在于用 URL 中的 IP 替换主机名，同时添加带有主机名的标头

NB:`http://192.168.0.1/?var=1`变成`http://[2001:db8::1]/?var=1`ipv6

```
function file_get_contents_url_ip($url,$host_ip=null,$ip_version=0,$ignore_certificate=false) {
    $ch = curl_init();

    if (!is_null($host_ip)){
        $urldata = parse_url($url); 

        //  Ensure we have the query too, if there is any... 
        if (!empty($urldata['query'])) 
          $urldata['path'] .= "?".$urldata['query']; 

        //  Specify the host (name) we want to fetch...
        $headers = array("Host: ".$urldata['host']); 
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers); 

        //  create the connecting url (with the hostname replaced by IP) 
        if( $ip_version == 6 )
            $url = $urldata['scheme']."://[".$host_ip.']'.$urldata['path']; 
        else
            $url = $urldata['scheme']."://".$host_ip.$urldata['path'];

        //ssl certificate would fail because https://192.168.0.1 is used instead of hostname
        $ignore_certificate = 1;
    }

    if( $ip_version == 4 )
        curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4 );
    elseif( $ip_version == 6 )
        curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V6 );

    if( $ignore_certificate )
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false );
    else
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true );

    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); //Set curl to return the data instead of printing it to the browser.
    curl_setopt($ch, CURLOPT_URL, $url);

    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
} 
```

# mime-types - TypeScript 的 MIME 类型是什么？

> ID：13213787
> 
> 赞同：28
> 
> 时间：2012-11-03T21:40:48.727
> 
> 标签：mime-types, typescript

我希望我的 IIS 正确显示 .ts 文件，TypeScript 是否有任何 MIME 类型？text/javascript 或类似的也可以工作，但有规范吗？

我已经查阅了[语言规范](http://www.typescriptlang.org/Content/TypeScript%20Language%20Specification.pdf)，但没有找到任何线索。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-03T22:15:53.183

最好知道*为什么*要提供 TypeScript 文件。

据我了解，TypeScript 用于编译为 Javascript，然后在浏览器中执行。目前，没有对 TypeScript 的原生支持（如果我错了，请纠正我）。

如果您仍想通过 IIS 提供 .ts 文件，您仍然可以在 IIS Admin 中添加与 .ts 关联的[自定义 mime-type 。](http://restpatterns.org/Glossary/MIME_Type)该标准定义了前缀`x.`,`vnd.`和`prs.`, 和 vnd。前缀也列在标准化的 mime 类型[text/](http://www.iana.org/assignments/media-types/text/index.html)和[application/](http://www.iana.org/assignments/media-types/application/index.html)中。

因此，根据您的使用情况，您可以选择`text/x.typescript`或`text/prs.typescript`。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-04-13T19:03:57.847

将其粘贴在您的 web.config 中；

```
<configuration>
    ...
    <system.webServer>
        <staticContent>
            <mimeMap fileExtension=".ts" mimeType="application/x-typescript" />
        </staticContent>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-01T05:08:44.097

[Deno](https://deno.land/)用于`application/typescript`提供 TypeScript 文件，允许您通过以下方式运行它们：

```
deno run "https://example.com/file.ts" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-28T23:14:24.310

您可能还需要注释掉`TypeScriptAssetHandler`哪些将 .ts 文件转换为 javascript。

```
 <handlers>
    <!--<add name="TypeScriptAssetHandler" path="*.ts" verb="GET" type="BundleTransformer.TypeScript.HttpHandlers.TypeScriptAssetHandler, BundleTransformer.TypeScript" resourceType="File" preCondition="" />-->
  </handlers> 
```

如果您定义了此处理程序，您最终可能会遇到这样的错误

```
[HttpException (0x80004005): During the output text content of processed asset an unknown error has occurred.
See more details:
Exception has been thrown by the target of an invocation.] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-03T03:33:10.273

使用 Apache 2，我只需将 MIME 类型设置为 text/plain。这解决了我得到奇怪结果的问题，因为报告的 MIME 类型是某种视频格式。

您可以在 Apache 2 配置中通过以下方式实现此目的：

```
<filesMatch "\.(html|htm|js|css|ts|ts!transpiled)$">
  FileETag None
  <ifModule mod_headers.c>
    Header unset ETag
    Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
  </ifModule>
</filesMatch>
AddType text/plain ts 
```

# javascript - Zend 框架 - 包含 JS 不适用于新系统

> ID：13213798
> 
> 赞同：1
> 
> 时间：2012-11-03T21:42:58.570
> 
> 标签：javascript, zend-framework, include, appendfile

在 JS 文件包含期间，我的新服务器上的 ZF 出现问题。包括外部JS（google api）没问题。看来，zf 想要加载不相关的 JS 文件。

FireBug 在 html 控制台的 Srcipt 标签中显示的错误消息：

```
<script src="/javascript/helper.js" type="text/javascript">

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>404 Not Found</title>
</head><body>
<h1>Not Found</h1>
<p>The requested URL http://project/javascript/helper.js was not found on this server.    </p>
<hr>
<address>Apache/2.2.16 (Debian) Server at domain.squeeze Port 80</address>
</body></html>
</script> 
```

该页面不加载脚本，因为它试图通过完整的 url 获取文件。由于重写规则，这不起作用。在我尝试了数百次之后，我在同一个地方得到了这些错误：

```
<p>The requested URL /javascript/helper.js was not found on this server.</p> 
```

但这是正确的相对链接。

我的结构：

```
/var/www/project/
           -->application
           -->...
           -->public
              -->javascript
                 helper.js
                 <other JS Files>
             index.php
             .htaccess 
```

当我搜索这个错误时，我发现了这些可能的原因：

1.  错误或缺少 baseURL
2.  未启用 Mod 重写
3.  公开的 .htaccess 文件丢失或损坏
4.  虚拟主机中缺少“允许覆盖 = 全部”
5.  文件的相对路径中没有前导“/”斜杠

它们都不适合我的问题。

1.  我没有更深的“baseURL”，所以我的默认路径是“”，直接在我的 /project/public 文件夹中定向虚拟主机
2.  Mod重写已启用，我可以浏览任何页面，控制器，动作
3.  .htaccess 是默认的并且存在
4.  允许覆盖设置为全部，我的重写规则适用于项目的其余部分
5.  我在开始时尝试不使用“/”。没有效果

我的布局有这个 JS 的包含方法： --> layout.phtml

```
$this->headScript()->appendFile('/javascript/jquery_1.6.2/jquery.js','text/javascript');
      $this->headScript()->appendFile('/javascript/jqueryui_1.8.16/jquery-ui.min.js','text/javascript');
    $this->headScript()->appendFile('/javascript/jquery.metadata.js','text/javascript');
    $this->headScript()->appendFile('/javascript/jquery.validate.js','text/javascript');
    $this->headScript()->appendFile('/javascript/jquery.fileupload.js','text/javascript');
    $this->headScript()->appendFile('/javascript/jquery.fileupload-ui.js','text/javascript');

    $this->headScript()->appendFile('/javascript/methods_de.js','text/javascript'); 
    $this->headScript()->appendFile('/javascript/helper.js','text/javascript');*/
    echo $this->headScript(); 
```

令人困惑的是，样式表包含工作。这是相同的技术

我包括他们

```
$this->headLink()->appendStylesheet('/css/layout.css');
echo $this->headLink(); 
```

我的.htaccess：

```
SetEnv APPLICATION_ENV development
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我有几个在 debian lenny 上运行的 ZF 项目，它们运行起来没有任何问题。现在我设置了两个 debian 挤压，在两个系统上我都遇到了这些问题。

如果我将项目文件夹复制到 lenny 系统（相同的虚拟主机配置），它工作正常。

可能有人知道我该如何解决这个问题......

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:19:33.367

通过重命名javascript文件夹解决。有关更多详细信息，请参阅我上面的评论

# php - 开始使用 Memcache

> ID：13213799
> 
> 赞同：0
> 
> 时间：2012-11-03T21:43:13.097
> 
> 标签：php, memcached

我刚刚在我的服务器上安装了 memcache。我已经启动了服务器，现在我正在尝试通过 php 连接到它

服务器主机安装了 memcached 扩展而不是 memcache 扩展。

所以我找到了 memcache 的例子，并认为这两个扩展是相似的，但事实并非如此。

所以我想要得到的是一个简单的例子，让 memcache 与 memcached 扩展一起工作。

例如，我想连接到 memcache，连接它的代码是什么？

内存缓存将是：

```
$memcache = new Memcache;
$memcache->connect('localhost', 11211); 
```

但这不起作用，因为没有“连接”，所以我如何告诉 php 连接到 memcache？

我已经看到了“addServer”功能，我是否需要运行一次才能让 memcache 知道它的存在？

是不是一旦添加了服务器，memcached 就知道它在那里，因此不需要“连接”调用？还是我必须在每次通话时使用 addServer 功能？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:07:20.960

[memcached 扩展](http://no.php.net/memcached)的文档很有用。特别是，memcached 将在需要时创建连接，并使用您通过调用 addServer 或 addServers 添加的服务器。

从[Memcached::set 的手册页](http://no.php.net/manual/en/memcached.set.php)：

```
$m = new Memcached();
$m->addServer('localhost', 11211);

$m->set('int', 99); 
```

当您调用 set 时，连接将由 memcached 库在内部处理。

# c++ - 数组中的素数

> ID：13213801
> 
> 赞同：-3
> 
> 时间：2012-11-03T21:43:32.690
> 
> 标签：c++, math

我正在尝试遍历一个数组并计算其中的素数数量......很简单，但我错过了一些东西......

```
count = 0;
for(i =0; i<5; i++)
{
    flag = true;    // is prime
    for (j=2;j<a[i];j++)
    {
        if(a[i] % j == 0)
        {
            flag = false;
        }

    }

    count ++;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T21:45:27.400

您之前缺少一个条件`count++`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T21:45:50.177

即使标志为假，您也会增加计数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T21:47:35.297

将您的代码更改为此

```
flag = true;    // is prime
for (j=2;j<a[i];j++)
{
    if(a[i] % j == 0)
    {
        flag = false;
        break;
    }

}
if (flag) {
   count++;
} 
```

一旦你计算了一个非质数，你不妨跳出循环——它不会再通过重复测试变成非质数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T21:51:53.840

`(flag == true)`Blah 用count ++ 之前的条件修复它；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T22:12:59.720

您忘记了“count++;”行中的“if”

```
count = 0;
for (var i = 0; i < 5; i++)
{
    var flag = true;    // is prime
    for (var j = 2; j < a[i]; j++)
    {
        if (a[i] % j == 0)
        {
            flag = false;
            break; //this break will avoid useless process
        }

    }

    // only when the flag is false that the current number is prime.
    if(!flag) count++;
} 
```

但更好的方法是：

```
count = 0;
for (var i = 0; i < 5; i++)
{
    for (var j = 2; j < a[i]; j++)
    {
        if (a[i] % j == 0)
        {
            count++; // don't need a variable flag, put increment here.
            break;
        }
    }
} 
```

# jquery - 用半透明 PNG覆盖

> ID：13213802
> 
> 赞同：0
> 
> 时间：2012-11-03T21:43:35.343
> 
> 标签：jquery, css

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T21:48:43.250

就我个人而言，我只有：

```
<a href="..." class="movie_poster_item" id="movie_poster_item_6">
    <div class="overlay"></div>
    <img src="..." height="267">
</a> 
```

然后对于js：

```
$('.movie_poster_item').hover(function() {
  $(this).find('.overlay').show();
},
function() {
  $(this).find('.overlay').hide();
}; 
```

只需确保覆盖的 z-index 高于 img，例如：

```
.movie_poster_item .overlay { position: absolute; z-index: 2; }
.movie_poster_item img { position: relative/absolute; z-index: 1; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:50:25.817

您可以将半透明图像作为 a 标签的背景，如下所示：

```
$(this).css('background','url(poster-info-overlay.png) 0px 0px no-repeat'); 
```

# c++ - 使用 AES-256-CBC 模式 openssl 的数据加密，不返回不需要填充的相同大小的数据？

> ID：13213809
> 
> 赞同：1
> 
> 时间：2012-11-03T21:44:26.380
> 
> 标签：c++, encryption, openssl, aes

我正在尝试使用 openssl AES 加密我的数据我在此链接中找到了一个非常好的示例。[http://saju.net.in/code/misc/openssl_aes.c.txt](http://saju.net.in/code/misc/openssl_aes.c.txt) 但我仍然可以找到答案的问题尽管它执行多个 key size ，但它填充数据。例如，它需要 16 字节作为输入来加密或 16 的任何倍数我给了 1024 包括 null 。它仍然给我一个大小为 1040 的输出，但据我所知，AES 输入大小 = 输出大小，如果输入是 128 位/16 字节的倍数。任何人在我之前尝试过这个例子或者可以给我任何想法？提前致谢 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T22:21:04.127

大多数填充方案要求*始终*添加一些最小量的填充。这是（至少主要是）这样在接收端，您可以查看最后一个字节（或最后的一些少量数据）并知道最后有多少数据是填充的，有多少是真实的数据。

例如，典型的填充方案在数据之后放置零字节，最后一个字节包含填充的字节数。例如，如果您添加了 4 个字节的填充，则填充字节（十六进制）将类似于`00 00 00 04`. 另一种常见的可能性是将相同的值放在*所有*填充字节中，所以它看起来像`04 04 04 04`.

在接收端，算法必须准备好剥离填充字节。为此，它查看最后一个字节，告诉它要从末尾删除多少字节的数据并忽略。如果不存在填充，它将包含一些值（无论消息中的最后一个字节碰巧是什么）。由于它无法知道没有添加填充，因此它会查看该值，并删除那么多字节的数据——仅在这种情况下，它会删除实际数据而不是填充。

虽然可以设计一种填充方案，当输入恰好是块大小的整数倍时避免添加额外数据，但只需为每条消息添加至少一个字节的填充就简单多了，所以接收者可以依靠总是读取最后一个字节并找出它接收到的有多少是填充的。

# django - Django 图像调整器

> ID：13213811
> 
> 赞同：0
> 
> 时间：2012-11-03T21:45:07.977
> 
> 标签：django, python-2.7

目前我正在做一个项目，让用户上传图片，他们应该缩小到 210 的宽度。

做这个的最好方式是什么？

```
 from django.db import models
    from django.contrib.auth.models import User
    from imagekit.models import ImageSpecField
    from imagekit.processors import ResizeToFill, Adjust

    class Photo(models.Model):
        photo_title = models.CharField(max_length=255, null=True, blank=True)
        original = models.ImageField(upload_to='photos/%Y/%m/%d')
        main_page = ImageSpecField([ResizeToFill(210)], image_field='original', format='JPEG', options={'quality': 100})

        def __unicode__(self):
            return self.photo_title 
```

这不会生成 main_page 图像，因此 photo.main_page 不会进入模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:46:23.267

If what you need is only getting the resized photo to be displayed in a template, you'll be better off using [easy-thumbnails](https://github.com/SmileyChris/easy-thumbnails).

With it, your model can simply be:

```
class Photo(models.Model):
    photo_title = models.CharField(max_length=255, null=True, blank=True)
    original = models.ImageField(upload_to='photos/%Y/%m/%d') 
```

And in the template:

```
{% load thumbnail %}
<img src="{% thumbnail photo.original 210 crop quality=100 %}" alt=""> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T00:36:43.753

好吧，这就是没有任何额外功能的工作。

[https://github.com/un1t/django-resized](https://github.com/un1t/django-resized)

一样容易：

```
from django_resized import ResizedImageField

class Photo(models.Model):
    photo_title = models.CharField(max_length=255, null=True, blank=True)
    original = ResizedImageField(max_width=210, upload_to='photos/%Y/%m/%d') 
```

我将创建一个新模型，该模型将包含各种尺寸的原始图片和我的图片。

# expressionengine - 在 ExpressionEngine 2 中获取尾部斜线？

> ID：13213812
> 
> 赞同：5
> 
> 时间：2012-11-03T21:45:16.093
> 
> 标签：expressionengine

我刚刚从 EE 1 升级到 EE 2，我正在努力应对一些变化。例如，EE 不再在其 url 上输出尾部斜杠这一事实使我的许多链接变得一团糟，我依赖于诸如 EE 生成的 url + 附加段之类的结构。考虑到我网站的大小和设置，查找和编辑所有我做过的地方将是一场小小的噩梦。有没有办法破解 EE 以恢复旧行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T22:40:39.807

对于某些提到的尾部斜杠添加可能会导致与某些形式发生冲突。添加以下内容以检查请求是否为 GET 可能更安全。

```
# Add a trailing slash to paths without an extension
RewriteCond %{THE_REQUEST} ^GET
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule ^(.*)$ $1/ [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:09:33.810

有一个 .htaccess 解决方案，正是因为这个问题，我在我的旧 EE 站点中使用了它。

**添加尾部斜杠**

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule ^(.*)$ $1/ [L,R=301] 
```

来源：[http ://devot-ee.com/articles/item/simple-htaccess-for-expressionengine-sites](http://devot-ee.com/articles/item/simple-htaccess-for-expressionengine-sites)

但是，由于它在 EE2 中默认存在，您可能希望通过 .htaccess 执行相反的操作并*删除*尾部斜杠，这样您就不必手动添加/删除/任何内容。如果您决定这样做，这是代码：

**删除尾部斜杠**

```
RewriteCond %{HTTP_HOST} !^\.yoursite\.com$ [NC]
RewriteRule ^(.+)/$ http://%{HTTP_HOST}/$1 [R=301,L] 
```

来源：[http ://ee-spotlight.com/tips/a_standard_htaccess_file_with_expressionengine](http://ee-spotlight.com/tips/a_standard_htaccess_file_with_expressionengine)

# php - 使用隐藏输入编辑表单

> ID：13213814
> 
> 赞同：-2
> 
> 时间：2012-11-03T21:45:24.453
> 
> 标签：php, forms, edit

我有这个简单的表格。

**一个.php**

```
<html>
<head>
</head>
<body>
    <?

    echo "
        <form action = 'a2.php' method = 'post'>
            <input type = 'text' name = 'name'>
            <input type = 'submit' value = 'SEND' name = 'send'>
        </form>
    ";

    ?>
</body>
</html> 
```

**a2.php**

```
<?

$name = $_REQUEST ['name'];
echo $name;

    echo "
    <form action = 'a2.php' method = 'post'>
        <input type = 'submit' value = 'EDIT' name = 'edit'>
     </form>
    ";

?> 
```

当我单击 EDIT 并返回第一个表单时，如何保持引入的值？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:49:12.717

**编辑 2**：在 a2.php 上使用隐藏输入只需`<input type="hidden" name="hidden_name" value="{$_POST['name']}" />`在您点击 a2.php 提交后放置另一个（顺便说一句，它要返回到 a.php，您需要更改`action="a.php"`a2.php 上的表单），a.php 将有a `$_POST['hidden_name']`，它将包含第一次迭代的值。

**编辑**：在开始处理`$_SESSION`变量之前，首先在任何带有`session_start()`函数的 html 输出之前启动会话。

在你的情况下使用这样的超全局`$_SESSION`，你需要在 a2.php 中获取传入`$_SESSION['name'] = $_POST['name']`并引用`$_SESSION['name']`你的`a.php`. 请记住，`$_SESSION['name']`将保留最后分配的值，直到会话终止，即浏览器窗口关闭。

[您可以在http://www.php.net/manual/en/reserved.variables.session.php](http://www.php.net/manual/en/reserved.variables.session.php)阅读更多 内容还有关于`session_start`：[http ://www.php.net/manual/en/function.session-start.php](http://www.php.net/manual/en/function.session-start.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T21:20:11.640

1.使用 type="hidden" 在表单中创建隐藏输入

# c - #if defined 用于函数定义的用法

> ID：13213822
> 
> 赞同：1
> 
> 时间：2012-11-03T21:46:23.420
> 
> 标签：c, conditional-compilation

我需要知道#if defined 的用法是否正确，并知道以这种方式使用它的可能缺点。

```
#if defined TEST
int foo()
{
   return 0;
}
int foo1()
{
   return 0;
}
#else
int foo()
{
   return 1;
}
int foo1()
{
   return 1;
}
#endif 
```

编辑：我正在尝试将此代码用于我正在开发的两个不同平台。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T21:53:47.577

它在语法上是正确的。

这种组织方式的主要缺点是您重复测试和非测试用例的函数定义。从一个仔细最小化的例子中无法看出这将是一个多大的问题。另一种组织它的方法，假设当前的 return 语句是一个更重要的代码块的代理（至少在这两种情况下）将是：

```
int foo(void)
{
#if defined TEST
   return 0;
#else
   return 1;
#endif /* TEST */
}

int foo1(void)
{
#if defined TEST
   return 0;
#else
   return 1;
#endif /* TEST */
} 
```

对于这些确切的功能，您可以执行以下操作：

```
#ifdef TEST
#define RETVAL 0
#else
#define RETVAL 1
#endif /* TEST */

int foo(void)
{
   return RETVAL;
}
int foo1(void)
{
   return RETVAL;
} 
```

但是，您的实际功能不太可能如此简单，因此翻译效果不佳。

总体目标是避免重复，并避免在函数中显示条件编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:55:59.650

我能想到的唯一问题是冗余，对于一个严肃的项目来说，这是一个非常严重的问题。您应该尽可能减少代码重复，这是另一种减少代码重复的方法：

```
int foo()
{
#if defined TEST
   return 0;
#else
   return 1;
#endif
}
int foo1()
{
#if defined TEST
   return 0;
#else
   return 1;
#endif
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T22:05:46.293

您可以创建一个多平台库，将特定平台代码放在另一个特定平台库中。这样，您的多平台库可以使用`#if`指令使用正确的特定库。换句话说，您将隔离特定平台代码。

# css - 使用 CSS3 或 Javascript 将 » 添加到悬停链接

> ID：13213826
> 
> 赞同：0
> 
> 时间：2012-11-03T21:46:47.950
> 
> 标签：css, rollover

对于我的网站菜单，我想在 a:hover 上添加文本装饰作为 » 符号/符号。

我试过这样：

```
.navbar .nav > li:before > a:hover {
    content: "&raquo;";
    padding-right: 10px;
    color: #fff;
} 
```

就像建议的另一个问题一样，但显示的是文本而不是符号并且处于活动状态。是我的 CSS 错误还是有办法通过 Javascript 进行翻转？

这是我的 HTML：

```
<div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="brand" href="#">Rapid Newsletter Plus</a>
                    <div class="nav-collapse collapse">
                        <ul class="nav">
                            <li class="active"><a href="#">Home</a></li>
                            <li><a href="#features">Features</a></li>
                            <li><a href="#packages">Packages</a></li>
                            <li><a href="#contact">Contact</a></li>
                        </ul>
                        <ul class="nav pull-right">
                            <li><a href="http://plus.rapidnewsletter.com">&raquo; my Account</a></li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div> 
```

更新：我稍微调整了我的 CSS，现在 >> 以文本形式显示，但它没有转换为符号 >>。有什么想法吗？

```
.navbar .nav > li > a:hover:before {
    content: "&raquo;";
    color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T22:00:46.767

它需要使用 Unicode。

```
.navbar .nav > li > a:hover:before {
    content: "\00BB";
    color: #fff;
} 
```

[https://r12a.github.io/apps/conversion/](https://r12a.github.io/apps/conversion/) - 以供将来参考将 HTML 转换为各种不同的代码，包括此处的 Unicode。右下角的框，称为 CSS 转义，是用于此目的的正确框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:56:48.367

在 CSS 中，您不能使用 HTML 命名实体（或 HTML 数字实体），因此`&raquo;`，`&#187;`也`&#xbb;`不会被理解，它们是用于 HTML，而不是 CSS。

在 CSS 中，您可以使用转义序列指定该字符`\BB`，即该字符的十六进制 unicode 编码。

# c++ - Accessing/filling a vector from a different class?

> ID：13213829
> 
> 赞同：0
> 
> 时间：2012-11-03T21:47:58.683
> 
> 标签：c++, vector

I am confused on how to fill a vector with values from a different class.

Can anyone give me a coded example how this is done. :)

```
Class A
{
   //vector is here
}
Class B
{
   //add values to the vector here
}
 main()
{
  //access the vector here, and print out the values
} 
```

I appreciate the help <3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:55:03.833

It seems like a quick lesson in [access levels](http://www.learncpp.com/cpp-tutorial/83-public-vs-private-access-specifiers/) and [encapsulation](http://www.learncpp.com/cpp-tutorial/84-access-functions-and-encapsulation/) is in order.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:53:06.027

你应该**让你的问题更具体**，编辑它并**发布你试图做的事情**。如果你的意思是做一些尊重 oop-rules 的事情，那么这出戏是这样的：

```
#include<iostream>
#include<vector>
class A{
public:
  void fill_up_the_vector() { v=std::vector<int>(3); v[0]=0; v[1]=1; v[2]=4; }
  void add( a.add(i); ) { v.push_back(i); }
  void display_last() const { std::cout<<v[v.size()-1]; }
private:
  std::vector<int> v;
};

class B{
public:
  B(){ a.fill_up_the_vector(); }  // B just *instructs* A to fill up its vector.
  void add_value(int i) { a.add(i); }
  void display() const { a.display_last(); }
private:
  A a;
};

int main()
{
  B b;
  b.add_value(9);
  b.display(); // reads v through A.
} 
```

请注意，**上面的这个例子与你所问的有点不同**。我发布它是因为我认为您应该记住，根据 OOP 规则

*   您不想直接访问 A 中的值，
*   如果您打算访问 A 中的值，B 应该有一个类型为 A 的成员，
*   如果您从 B 填写了值，则应该通过 B 访问 A 中的值。

另一种方法**不是**OOP：

```
struct A{
  std::vector<int> v;
};

struct B{
  static void fill_A(A& a) const { a.v = std::vector<int>(3); a.v[0]=0; a.v[1]=1; a.v[2]=4; }
};

int main()
{
  A a;
  B::fill_A(a);
  a.v.push_back(9);
  std::cout << a.v[a.v.size()-1];
} 
```

但是这段代码很可怕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T22:12:45.650

我的猜测是，根据所触摸的问题，您正在寻找以下代码。

```
int main()
{
  ClassA[] as = {new ClassA(), new ClassA(), ... }
  ClassB[] bs = {new ClassB(), new ClassB(), ... }
} 
```

但我在黑暗中拍摄，有点。:)

# jquery - jQuery Keybindings Not Working When Clicking Inside of iframe

> ID：13213830
> 
> 赞同：0
> 
> 时间：2012-11-03T21:48:08.913
> 
> 标签：jquery, iframe, key-bindings

I have a few keyboard events bound the the arrow keys in jQuery. These function correctly until a user clicks inside of an iframe (which is a live video feed from ustream). At this point, none of the events fire until the user clicks on an element out of the iframe. Is there a way to force the events to fire no matter where the user clicks?

I tried putting a 100% width and height div over the top of the frame and setting it to .01 opacity, but this disallowed users to close ads on the video, which is an undesirable effect.

Link is here: [http://josephndenton.com/robotdraw/](http://josephndenton.com/robotdraw/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:05:50.240

不要忘记，为了在 iframe 中执行任何 jquery 内容，您需要使用 contents 方法。

例如：

```
<iframe id="iframe1"><div id="div1"></div></iframe>

$("#iframe1").contents().find("#div1").keyup(function(e)
{ //do your stuff }); 
```

# python - MathTextParser: Fit output to figsize

> ID：13213832
> 
> 赞同：3
> 
> 时间：2012-11-03T21:48:36.103
> 
> 标签：python, qt, matplotlib, figure

I am using `MathTextParser` to depict some equations in Qt. Therefore i get the required tex string out of a dict, parse it using the to_rgba method of the parser i created (handing over a general fontsize and dpi) and finally hand this to my `FigureCanvas` of the `QWidget` by `figimage`.
Have a look:

```
class MathWidget(QWidget):
    def __init__(self, parent = None):
            QWidget.__init__(self, parent)
            ...
            self.canvas = MathCanvas() # The FigureCanvas to display the teximage
            ...
            self.parser = mathtext.MathTextParser("Bitmap")

    def render(self,metric):
            equation = self.equations[metric]
            rgb, d = self.parser.to_rgba(equation, color='black', fontsize=8, dpi=200)
            self.canvas.fig.figimage(rgb.astype(float)/255., 0, 0)
            self.canvas.draw() 
```

My problem now is, that the equations to be parsed are of varying length whereas the `FigureCanvas` has a fixed size (as it needs to have) so that it happens, that some equations result in an image, which exceeds the figure in its size so that some part of the equation is cut off/not visible, like in this example:
[Cut off equation](http://wwwpub.zih.tu-dresden.de/~s4901563/exceed.png)
What i wouldn't like to do is to somehow predefine a fontsize for every tex string depeding on its length, for the reason that even user defined equations (of unpredictable length) need to be parsed and displayed.
So is there by any chance a way to make the parser fit the e.g. fontsize, so that the output is a rasterized tex of a fixed size independently of the equation size/length?

Besides: In comparison to e.g. numpy/scipy the docs of matplotlib seem inscrutable to me for some reason, thus if somebody could comment on how `to_rgba` and `figimage` exactly work i'd be grateful, too.. e.g. concerning to_rgba: what means the following quote elucidating depth?:

> *   depth is the offset of the baseline from the bottom of the image in pixels

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T13:18:09.220

显示 TeX 代码的另一种可能的解决方案：调用`latex`获取 dvi 文件，然后调用`dvisvgm --no-fonts`将 dvi 文件转换为 SVG，然后使用 QSvgRenderer 加载和渲染 SVG 文件： [在 python 中将乳胶代码转换为 mathml 或 svg 代码](https://stackoverflow.com/questions/9588261/converting-a-latex-code-to-mathml-or-svg-code-in-python/16893390#16893390)

# mysql - MySQL 查询 - 我需要一些帮助来完善它

> ID：13213835
> 
> 赞同：0
> 
> 时间：2012-11-03T21:49:10.040
> 
> 标签：mysql

我有一个包含两个表的数据库。第一个（“日历”）仅包含未来的一系列日期，例如“2012-12-25”。这是由程序生成的。第二个（'new_allocations'）包含一系列库存分配。示例内容如下所示：

```
+----+-------------+------------+----------+------------+
| id | delivery_ID | date       | quantity | product_ID |
+----+-------------+------------+----------+------------+
|  1 |           1 | 2012-11-09 |        5 |          2 |
|  2 |           1 | 2012-11-08 |        5 |          2 |
|  3 |           2 | 2012-11-07 |        5 |          2 |
|  4 |           3 | 2012-11-06 |        5 |          2 |
|  5 |           4 | 2012-11-03 |        2 |          2 |
|  6 |           4 | 2012-11-02 |        5 |          2 |
|  7 |           5 | 2012-11-03 |        3 |          2 |
|  8 |           6 | 2012-11-05 |        5 |          2 |
|  9 |           7 | 2012-11-07 |       55 |          5 |
| 10 |           7 | 2012-11-06 |       34 |          5 |
| 11 |           7 | 2012-11-05 |       40 |          5 |
+----+-------------+------------+----------+------------+ 
```

以下查询（基本上意味着“向我显示提供的日期范围内的天列表，不包括星期日，以及当天的总库存分配”）几乎是我想要的，除了它适用于所有产品（表示为'product_ID'）。

```
select datefield as Date, sum(ifnull(quantity,0)) as Qty from calendar left join new_allocations on (new_allocations.date=calendar.datefield) where (calendar.datefield>='2012-10-29' and calendar.datefield<='2012-11-10') and dayname(calendar.datefield) != 'Sunday' group by datefield;

+------------+------+
| Date       | Qty  |
+------------+------+
| 2012-10-29 |    0 |
| 2012-10-30 |    0 |
| 2012-10-31 |    0 |
| 2012-11-01 |    0 |
| 2012-11-02 |    5 |
| 2012-11-03 |    5 |
| 2012-11-05 |   45 |
| 2012-11-06 |   39 |
| 2012-11-07 |   60 |
| 2012-11-08 |    5 |
| 2012-11-09 |    5 |
| 2012-11-10 |    0 |
+------------+------+ 
```

所以我的问题是，只要我添加“and product_ID='2'”，查询就会停止返回该范围内的所有日期：

新查询：

```
select datefield as Date, sum(ifnull(quantity,0)) as Qty from calendar left join new_allocations on (new_allocations.date=calendar.datefield) where (calendar.datefield>='2012-10-29' and calendar.datefield<='2012-11-10') and dayname(calendar.datefield) != 'Sunday' and product_ID='2' group by datefield; 
```

新结果：

```
+------------+------+
| Date       | Qty  |
+------------+------+
| 2012-11-02 |    5 |
| 2012-11-03 |    5 |
| 2012-11-05 |    5 |
| 2012-11-06 |    5 |
| 2012-11-07 |    5 |
| 2012-11-08 |    5 |
| 2012-11-09 |    5 |
+------------+------+ 
```

实际上我想要的看起来像这样：

```
+------------+------+
| Date       | Qty  |
+------------+------+
| 2012-10-29 |    0 |
| 2012-10-30 |    0 |
| 2012-10-31 |    0 |
| 2012-11-01 |    0 |
| 2012-11-02 |    5 |
| 2012-11-03 |    5 |
| 2012-11-05 |    5 |
| 2012-11-06 |    5 |
| 2012-11-07 |    5 |
| 2012-11-08 |    5 |
| 2012-11-09 |    5 |
| 2012-11-10 |    0 |
+------------+------+ 
```

我一直在通过这个来回前进，并且无法正确地表达查询 - 我错过了什么？

提前谢谢了。

```
CREATE TABLE `new_allocations` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `delivery_ID` int(11) DEFAULT NULL,
  `date` date DEFAULT NULL,
  `quantity` int(11) DEFAULT NULL,
  `product_ID` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
)

INSERT INTO `new_allocations` (`id`, `delivery_ID`, `date`, `quantity`, `product_ID`)
VALUES
    (1,1,'2012-11-09',5,2),
    (2,1,'2012-11-08',5,2),
    (3,2,'2012-11-07',5,2),
    (4,3,'2012-11-06',5,2),
    (5,4,'2012-11-03',2,2),
    (6,4,'2012-11-02',5,2),
    (7,5,'2012-11-03',3,2),
    (8,6,'2012-11-05',5,2),
    (9,7,'2012-11-07',55,5),
    (10,7,'2012-11-06',34,5),
    (11,7,'2012-11-05',40,5); 
```

对于日历：

```
DROP TABLE IF EXISTS `calendar`;
CREATE TABLE `calendar` (
  `datefield` date DEFAULT NULL
) 
```

填写日历的步骤：

```
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `fill_calendar`(start_date DATE, end_date DATE)
BEGIN
  DECLARE crt_date DATE;
  SET crt_date=start_date;
  WHILE crt_date < end_date DO
    INSERT INTO calendar VALUES(crt_date);
    SET crt_date = ADDDATE(crt_date, INTERVAL 1 DAY);
  END WHILE;
END;;
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:52:01.760

将您的条件添加到`ON`子句中，而不是`WHERE`子句中：

```
SELECT  datefield AS Date, COALESCE(SUM(quantity), 0) AS Qty
FROM    calendar
LEFT JOIN
        new_allocations
ON      new_allocations.date = calendar.datefield
        AND product_ID = '2'
WHERE   calendar.datefield BETWEEN '2012-10-29' AND '2012-11-10'
        AND dayname(calendar.datefield) != 'Sunday'
GROUP BY
        datefield 
```

`WHERE`过滤连接的结果。如果给定日期没有分配，左连接将产生一个日期记录，所有`new_allocations`字段（包括`productId`）都设置为`NULL`。

# java - 如何将 JLabel 的背景和边框设置为与表头相同？

> ID：13213838
> 
> 赞同：2
> 
> 时间：2012-11-03T21:49:41.210
> 
> 标签：java, swing, jtable, jlabel, jtableheader

我想使用`JLabel`. 需求的外观和感觉与系统指定的`JLabel`完全一样。`JTableHeader`

这是我到目前为止所尝试的：

```
JLabel header = new JLabel("Title");
header.setOpaque(true);
header.setBackground(UIManager.getColor(new JTableHeader().getBackground()));
header.setBorder(UIManager.getBorder(new JTableHeader().getBorder())); 
```

但是，颜色和边框的`UIManager`回报`null`。

有任何想法吗？

这就是我设置外观的方式：

```
javax.swing.UIManager.setLookAndFeel(javax.swing.UIManager.getSystemLookAndFeelClassName()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T04:36:57.237

除了获取表格标题的颜色和边框之外，还涉及更多问题。`TableCellRenderer`每个单元格/列都由一个含义呈现，即`UIManager`可以忽略返回的值...

例如，以下基于Window 的 Look and Feel 下返回的值呈现`JTableHeader`并应用边框/背景...`JLabel``UIManager`

![在此处输入图像描述](../Images/c73ae0f3a6339ae4e8aa4c86ca2a19b2.png)

如您所见，它们之间存在很大差异

但是，如果您感兴趣的只是在滚动窗格上的另一个组件的顶部显示某种“组标题”，您可以直接将 a 添加`JTableHeader`到滚动窗格的列视图中......

![在此处输入图像描述](../Images/56dcfabaa5aac9145895c3bb9a30def5.png)

```
public class TestHeader {

    public static void main(String[] args) {
        new TestHeader();
    }

    public TestHeader() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                TableColumnModel model = new DefaultTableColumnModel();
                final TableColumn column = new TableColumn(0, 250);
                column.setHeaderValue("Test");
                model.addColumn(column);

                JTableHeader header = new JTableHeader();
                header.setColumnModel(model);

                final JTextArea textArea = new JTextArea();

                JScrollPane scrollPane = new JScrollPane(textArea);
                scrollPane.setColumnHeaderView(header);

                textArea.addComponentListener(new ComponentAdapter() {
                    @Override
                    public void componentResized(ComponentEvent e) {
                        column.setWidth(textArea.getWidth());
                    }
                });

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(scrollPane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

**更新**

![在此处输入图像描述](../Images/caa514df02ca032d0030ff637db5d2eb.png)

```
public class TestHeader {

    public static void main(String[] args) {
        new TestHeader();
    }

    public TestHeader() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                TableColumnModel model = new DefaultTableColumnModel();
                final TableColumn column = new TableColumn(0, 250);
                column.setHeaderValue("I don't see the problem");
                model.addColumn(column);

                final JTableHeader header = new JTableHeader();
                header.setColumnModel(model);

                DefaultTableModel tm = new DefaultTableModel(new Object[]{"A", "B", "C"}, 0);
                tm.addRow(new Object[]{"1", "2", "3", "4"});
                tm.addRow(new Object[]{"5", "6", "7", "8"});
                tm.addRow(new Object[]{"9", "10", "11", "12"});
                tm.addRow(new Object[]{"13", "14", "15", "16"});
                final JTable table = new JTable(tm);

                final JScrollPane scrollPane = new JScrollPane(table);
                /**
                 * For some reason, the header isn't being applied as soon as the
                 * table is added to the scroll pane, so we need to jump our next
                 * request to the end of the of event queue so that it will
                 * occur some time in the future
                 */
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        scrollPane.setColumnHeaderView(header);
                    }

                });

                table.addComponentListener(new ComponentAdapter() {
                    @Override
                    public void componentResized(ComponentEvent e) {
                        column.setWidth(table.getWidth());
                    }

                });

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(scrollPane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T22:13:32.840

在尝试之前，您需要为应用程序设置外观：

```
header.setBackground(UIManager.getColor(new JTableHeader().getBackground()));
header.setBorder(UIManager.getBorder(new JTableHeader().getBorder())); 
```

您应该首先设置外观，如下所示：

```
 try {
    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
        if ("Nimbus".equals(info.getName())) {
            UIManager.setLookAndFeel(info.getClassName());
            break;
        }
    }
} catch (Exception e) {
    // If Nimbus is not available, you can set the GUI to another look and feel.
} 
```

这是一个例子：

![在此处输入图像描述](../Images/1ee2a051574e711224820908f937176e.png)

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.JTableHeader;

public class Test {

    public Test() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    //set nimbus look and feel
                    for (UIManager.LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                        if ("Nimbus".equals(info.getName())) {
                            UIManager.setLookAndFeel(info.getClassName());
                            break;
                        }
                    }
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException e) {
                    e.printStackTrace();
                }

                new Test();
            }
        });
    }

    private void initComponents() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JLabel header = new JLabel("Title");
        header.setBackground(UIManager.getColor(new JTableHeader().getBackground()));
        header.setBorder(UIManager.getBorder(new JTableHeader().getBorder()));

        frame.add(header);

        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T22:14:58.430

尝试从以下位置获取默认值`UIManager`：

```
Color color = UIManager.getColor("TableHeader.background");
Border border = UIManager.getBorder("TableHeader.CellBorder"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T23:36:14.437

我想我会创建一个`JTable`没有任何行的，并`JTextPane`在下面放置一个。它就像魅力一样。

```
JTextPane textPane = new JTextPane();
JPanel panel = new JPanel(new BorderLayout());

JTable table = new JTable(0, 1);
table.setPreferredScrollableViewportSize(new Dimension(600, 0));
JScrollPane js = new JScrollPane(table)

panel.add(js, BorderLayout.NORTH);
panel.add(new JScrollPane(textPane),BorderLayout.CENTER); 
```

# ios - UIImageView initWithImage:self.image shows up as null

> ID：13213841
> 
> 赞同：0
> 
> 时间：2012-11-03T21:50:01.900
> 
> 标签：ios, uiscrollview, uiimageview

I'm stumped on this one. I'm using an image file that was transferred over and is in the classes public properties. The log file shows me that self.image and newImage are still pointing to the UIImage file. However, no matter how I setup initWithImage the value of self.imageView.image ends up being (null).

Note : imageView is a private class property that is synthesized.

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view.frame = (CGRect){.origin=CGPointMake(0.0f, 0.0f), .size=self.image.size};
    UIImage *newImage = self.image;
    self.imageView = [[UIImageView alloc] initWithImage:newImage];

    [self.imageView setFrame: (CGRect){.origin=CGPointMake(0.0f, 0.0f), .size=self.image.size}];
    [self.scrollView addSubview:self.imageView];

self.scrollView.contentSize = self.image.size;

NSLog(@"Image in self.image : %@ Image for imageView %@ and new Image is : %@", self.image, self.imageView.image, newImage); 
```

Where the self.image comes from from the first view controller:

```
-(void)imagePickerController:
(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
NSString *mediaType =
[info objectForKey:UIImagePickerControllerMediaType];

if ([mediaType isEqualToString:(NSString *)kUTTypeImage])
{
    self.imageToBePassed = [info objectForKey:UIImagePickerControllerOriginalImage];
    [picker dismissViewControllerAnimated:NO completion:^(){
        AngleMeasureViewController *angleMeasureViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"AngleMeasureViewController"];
        angleMeasureViewController.delegate = (id)self;
        angleMeasureViewController.image = self.imageToBePassed;

        NSLog(@"image passed to Angle Measure View Controller : %@", angleMeasureViewController.image);

        [self.navigationController pushViewController:angleMeasureViewController animated:YES];
    }];

} 
```

how it's declared synthesized in the next view controller:

in the header file

```
@property (nonatomic,retain) UIImage *image; 
```

in the .m

```
@implementation AngleMeasureViewController

@synthesize delegate = _delegate;
@synthesize image = _image; 
```

# r - for循环中的变量赋值

> ID：13213845
> 
> 赞同：2
> 
> 时间：2012-11-03T21:50:29.147
> 
> 标签：r, variable-assignment

> **可能重复：**
> [R：如何将字符串转换为变量名？](https://stackoverflow.com/questions/6034655/r-how-to-convert-string-to-variable-name)

在 R 中，我正在编写一个 for 循环，它将迭代地创建变量名，然后为每个变量赋值。

这是一个简化版本。目的是根据迭代变量 i 的值创建变量的名称，然后用 NA 值填充新变量。

（我只在下面进行 1:1 迭代，因为问题的发生与循环本身无关，而是与创建和分配变量的方式有关。）

```
for (i in 1:1) {

    #name variable i "Variablei"
    varName = paste("Variable", as.character(i), sep="")

    #fill variable with NA values
    varName = rep(NA, 12)

    print(varName)
    print(Variable1)
} 
```

现在， varName 打印为

```
 [1] NA NA NA NA NA NA NA NA NA NA NA NA 
```

并且未找到变量 1。

我在某种程度上理解为什么这是错误的。在第一行中，varName 变成了一个向量，其唯一的条目是字符串“Variable1”。然后 varName 被重新分配以保存 NA 值。因此，当我尝试打印 Variable1 时，它不存在。

我认为更普遍的问题是分配与平等。在第一行中，我希望 varName*等于*新创建的字符串，但在下一行中，我希望*将 varName 分配给*NA 值向量。

创造这种区别的最简单方法是什么？我也愿意接受完全不同的、更好的方法来解决这个问题。

*编辑：更改标题是因为我错误地描述了这个问题。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T21:56:31.283

分配工作是这样的：

```
<varname> = <expression> 
```

或更传统的

```
<varname> <- <expression> 
```

因此，在您的代码中，您只分配了`varName`. 这不是关于分配与平等，只是分配。你可能想看看`assign`：

```
for (i in 1:5) {
  assign(paste0("Variable", i), 10*i)
} 
```

作为一个玩具的例子。

此外，如评论中所述，您的应用程序可能有更好的方法。例如，为什么不只使用向量，而不是使用名为,等`myvector`的变量，您可以参考,等等。`Variable1``Variable2``myvector[1]``myvector[2]`

例如，假设您计划与

```
Variable1 <- 'foo'
Variable2 <- 'bar'
Variable3 <- 'baz' 
```

然后，你可以改变你的方法，并设置

```
mydata <- c('foo', 'bar', 'baz') 
```

并且您以前使用过的地方`Variable2`（其中包含`'bar'`）改为使用`mydata[2]`（其中也包含`'bar'`）。这里的要点是，在 R 中使用向量和数据框比使用一长串变量要容易得多。

您可以进一步命名条目：

```
names(mydata) <- paste0("V", 1:3) 
```

然后允许您编写`mydata["V2"]`来检索`bar`.

# java - BouncyCastle Java - 解码 DER 编码的 OCTET 字符串

> ID：13213846
> 
> 赞同：2
> 
> 时间：2012-11-03T21:50:36.077
> 
> 标签：java, bouncycastle, der

我正在阅读一个 CER 证书文件，它给了我一个 X.509 证书对象。

有几个扩展包含 DER 编码的 OCTET 字符串。例如：

```
Certificate Extensions: 9
[1]: ObjectId: 1.3.6.1.4.1.311.21.10 Criticality=false
Extension unknown: DER encoded OCTET string =
0000: 04 1C 30 1A 30 0A 06 0B   2B 06 01 04 01 82 37 2F  ..0.0...+.....7/
0010: 01 01 30 0E 06 08 2B 06   01 05 05 07 03 02        ..0...+....... 
```

如何使用 BouncyCastle 解码这些字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T10:28:01.110

[谷歌](http://www.google.com)告诉我看课程：`JcaX509ExtensionUtils`

现在由你决定。

# google-maps - 强制信息窗口而不是放大点击并更改图标

> ID：13213849
> 
> 赞同：3
> 
> 时间：2012-11-03T21:51:13.627
> 
> 标签：google-maps, markerclusterer

我正在使用[MarkerClusterer](http://code.google.com/p/google-maps-utility-library-v3/)对标记进行分组，我有 2 个问题：

1.  我应该怎么做才能防止单击放大并显示信息窗口，例如单击标记时？
2.  有什么方法可以更改标记的集群图标吗？我不想将类似地震的图标用作标记的组图标。

提前致谢。

**编辑**

```
var marker;
var gm_map;
var markerArray = [];
var address = 'Sweden';
var geocoder = new google.maps.Geocoder();

geocoder.geocode({ 'address': address }, function(results, status) {
    if(status == google.maps.GeocoderStatus.OK) {
        gm_map.setCenter(results[0].geometry.location);
        gm_map.fitBounds(results[0].geometry.bounds);
    } else {
        alert("Kunde inte genomföra den geologiska inställningen på grund av följande fel:\n\n" + status);
    }
});

function initialize() {
    var marker, i;

    var locations = [["content", 59.328626, 13.485686, 1]];

    var options_googlemaps = {
        minZoom: 4,
        maxZoom: 18,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        streetViewControl: false
    }

    gm_map = new google.maps.Map(document.getElementById('google-maps'), options_googlemaps);

    var options_markerclusterer = {
        gridSize: 20,
        maxZoom: 18
    };

    var markerCluster = new MarkerClusterer(gm_map, [], options_markerclusterer, {zoomOnClick: false});
    google.maps.event.addListener(markerCluster, 'clusterclick', function(cluster) {
        alert('center of cluster: '+cluster.getCenter());
    });

    for(i = 0; i < locations.length; i++) {
        marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][1], locations[i][2]),
            map: gm_map
        });

        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
                $('#toggle-photolist').fadeIn();
                $('#close-overlay').fadeIn();
                $('#list-photos').html(locations[i][0]);
            }
        })(marker, i));

        markerArray.push(marker);
        markerCluster.addMarkers(markerArray, true);
    }
}

$(document).ready(function() {

    // INITIERA GOOGLE MAPS
    initialize();

}); 
```

**在职的`zoomOnClick`**

```
var options_markerclusterer = {
    gridSize: 20,
    maxZoom: 18,
    zoomOnClick: false
};

var markerCluster = new MarkerClusterer(gm_map, [], options_markerclusterer); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T08:31:50.530

回复 1：

```
var markerCluster = new MarkerClusterer(map, markers ,{zoomOnClick: false});
google.maps.event.addListener(markerCluster,'clusterclick', 
    function(cluster){
      alert('center of cluster: '+cluster.getCenter())
    }); 
```

可以在此处找到集群的详细信息（您可以从中获得什么信息）： [https ://code.google.com/p/google-maps-utility-library-v3/source/browse/trunk/markerclusterer/ src/markerclusterer.js#801](https://code.google.com/p/google-maps-utility-library-v3/source/browse/trunk/markerclusterer/src/markerclusterer.js#801)

您可以简单地在回调中显示一个中心设置为 cluster.getCenter() 的 infoWidow，您将全部设置好。

re2：查看更改图标的示例：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/advanced_example.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/advanced_example.html)

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T16:27:53.913

你可以试试这个信息窗口，它对我来说非常好用！:)

```
 //MarkerCluster!!!
    var markerCluster = new MarkerClusterer(map, my_markers ,{zoomOnClick: false});
    google.maps.event.addListener(markerCluster, 'clusterclick', function(cluster) {
        var content = '';
        // Convert lat/long from cluster object to a usable MVCObject
        var info = new google.maps.MVCObject;
        info.set('position', cluster.center_);
        iw.close();
        iw.setContent('<h1>Hi this is my Info Window</h1>');
        iw.open(map, info);
    }); 
```

此处的工作示例：请参阅[http://krisarnold.com/2010/10/15/adding-info-windows-to-map-clusters-with-google-maps-api-v3/](http://krisarnold.com/2010/10/15/adding-info-windows-to-map-clusters-with-google-maps-api-v3/)

# java - Android 和 Java：叫“R”的奇怪对象是什么？

> ID：13213854
> 
> 赞同：5
> 
> 时间：2012-11-03T21:51:58.533
> 
> 标签：java, android, eclipse

我正在尝试了解 Android TCP 客户端和服务器通信，这里有说明，[这里](http://i.stack.imgur.com/Z828L.png)[有](http://www.roman10.net/android-tcp-client-and-server-communication-programmingillustrated-with-example/comment-page-2/#comment-1822)错误。我一直都在使用它，如下所示。这个具有 和 等方法的 R 对象是什么？`"R cannot be resolved to a variable"``layout``id`

```
setContentView(R.layout.main);
textDisplay = (TextView) this.findViewById(R.id.text1); 
```

*Ps 你可以在 GitHub`tcpcommclient`和`tcpcommserver` [这里](https://github.com/roman10/roman10-android-tutorial)找到代码。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T21:53:08.597

R 是一个静态类，它列出了所有资源（通常在 XML 中定义，但在 res 文件夹中都可用）。

欲了解更多信息：[了解 Android 中的 R 类](https://stackoverflow.com/questions/6804053/understand-the-r-class-in-android)

编辑：根据这里：[Android java 类无法识别](https://stackoverflow.com/questions/7144475/the-android-java-class-cannot-recognize-the-r-file) 您的类之一的 R 文件实际上可能正在导入 R.java 类。永远不要那样做。如果有该类的导入，请删除它们。

此外，您可能会清理项目（项目 - 清理 - 清理项目）

# windows - Aptana Studio 3 在启动时在控制台中显示许多错误

> ID：13213858
> 
> 赞同：1
> 
> 时间：2012-11-03T21:52:30.610
> 
> 标签：windows, bundle, aptana

（对于一些英语语法错误，在 1-st 抱歉；p）

我的 Aptana 3 以控制台中的许多错误开始。我不知道，他们是否有任何问题，但我不会有任何问题。控制台有一个内容：

```
[2012-11-03 22:30:15] Attempted to define a bundle in a file other than the bundle's bundle.rb file: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\bundle.rb
[2012-11-03 22:30:15] Attempted to define a bundle in a file other than the bundle's bundle.rb file: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\bundle.rb
[2012-11-03 22:30:15] No bundle found for command Clean Up Old Releases: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\commands\clean_up_old_releases.rb
[2012-11-03 22:30:15] No bundle found for command Show Active Commands in Scope: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\commands\active_scope_commands.rb
[2012-11-03 22:30:15] No bundle found for command Show Active Snippets in Scope: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\commands\active_scope_snippets.rb
[2012-11-03 22:30:15] No bundle found for command Deploy: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\commands\deploy.rb
[2012-11-03 22:30:15] No bundle found for command Deploy With Migrations: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\commands\deploy_with_migrations.rb
[2012-11-03 22:30:15] No bundle found for command Disable Application: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\commands\disable_application.rb
[2012-11-03 22:30:15] No bundle found for command Display Pending Commits: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\commands\display_pending_commits.rb
[2012-11-03 22:30:15] No bundle found for command Show Command Bindings: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\commands\command_bindings.rb
[2012-11-03 22:30:15] No bundle found for command Copy Scope: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\commands\copy_scope.rb
[2012-11-03 22:30:15] No bundle found for command Display Pending Diffs: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\commands\display_pending_diffs.rb
[2012-11-03 22:30:15] No bundle found for command Enable Application: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\commands\enable_application.rb
[2012-11-03 22:30:15] No bundle found for command Migrate Database: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\commands\migrate_database.rb
[2012-11-03 22:30:15] No bundle found for command Show ENV: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\commands\env.rb
[2012-11-03 22:30:15] No bundle found for command Flush Bundle Caches: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\commands\flush_cache.rb
[2012-11-03 22:30:16] No bundle found for command Install Bundle: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\commands\install_bundle.rb
[2012-11-03 22:30:16] No bundle found for command Open Capistrano Documentation: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\commands\open_capistrano_documentation.rb
[2012-11-03 22:30:16] No bundle found for command Restart App Servers: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\commands\restart_app_servers.rb
[2012-11-03 22:30:16] No bundle found for command Rollback: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\commands\rollback.rb
[2012-11-03 22:30:16] No bundle found for command Start App Servers: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\commands\start_app_servers.rb
[2012-11-03 22:30:16] No bundle found for command Show Scope: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\commands\show_scope.rb
[2012-11-03 22:30:16] No bundle found for command Show Scope and Matching Theme Rule: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\commands\show_theme.rb
[2012-11-03 22:30:16] No bundle found for command Stop App Servers: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\capistrano.ruble\commands\stop_app_servers.rb
[2012-11-03 22:30:16] Attempted to define a bundle in a file other than the bundle's bundle.rb file: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\css.ruble\bundle.rb
[2012-11-03 22:30:16] No bundle found for env Ruble::Env: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\css.ruble\bundle.rb
[2012-11-03 22:30:16] No bundle found for smart_typing_pairs Ruble::SmartTypingPairs: C:\Users\Krystuś\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\css.ruble\bundle.rb
[2012-11-03 22:30:16] No bundle found for command Documentation for Property: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\css.ruble\commands\docs_for_property.rb
[2012-11-03 22:30:16] No bundle found for command Update User Bundles: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\commands\update.rb
[2012-11-03 22:30:16] No bundle found for command Validate Snippets: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\commands\validate_snippets.rb
[2012-11-03 22:30:16] No bundle found for command Format CSS Single-line: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\css.ruble\commands\format_css_singleline.rb
[2012-11-03 22:30:16] No bundle found for command Insert Color...: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\css.ruble\commands\insert_color.rb
[2012-11-03 22:30:16] No bundle found for command Preview: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\css.ruble\commands\preview.rb
[2012-11-03 22:30:16] Attempted to define a bundle in a file other than the bundle's bundle.rb file: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\snippets\snippets.rb
[2012-11-03 22:30:16] No bundle found for project template Ruble Template: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\bundle-development.ruble\templates\template.rb
[2012-11-03 22:30:16] No bundle found for command Validate Selected CSS: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\css.ruble\commands\validate_selected_css.rb
[2012-11-03 22:30:16] Attempted to define a bundle in a file other than the bundle's bundle.rb file: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\css.ruble\snippets\snippets.rb
[2012-11-03 22:30:16] Attempted to define a bundle in a file other than the bundle's bundle.rb file: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\coffeescript.ruble\bundle.rb
[2012-11-03 22:30:16] No bundle found for env Ruble::Env: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\coffeescript.ruble\bundle.rb
[2012-11-03 22:30:16] No bundle found for smart_typing_pairs Ruble::SmartTypingPairs: C:\Users\Krystuś\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\coffeescript.ruble\bundle.rb
[2012-11-03 22:30:16] No bundle found for template CSS Template: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\css.ruble\templates\templates.rb
[2012-11-03 22:30:16] No bundle found for command Align Assignments: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\coffeescript.ruble\commands\align_assignments.rb
[2012-11-03 22:30:16] No bundle found for command Compile and Display JS: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\coffeescript.ruble\commands\compile_and_display_js.rb
[2012-11-03 22:30:16] No bundle found for command Insert Heredoc """ comment: C:\Users\Krystu�\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\91\1\.cp\bundles\coffeescript.ruble\commands\insert_heredoc_comment.rb
...and more more more... 
```

我在想，这可能是因为 win 中的用户名带有“Ś”符号，而 aptana 无法使用它。但是我可以在任何选项中更改它吗？我没找到，也不会因为很多其他的应用程序而更改帐户名.. ;/

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T16:53:09.527

不要在您的用户名中使用特殊字符。

“克里斯图……”那个？标志表示您的用户名有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T23:20:48.953

**解决方案：使用****Run as administrator**选项执行 Aptana Studio 3 。

我在 Windows 8.1 下遇到了同样的问题。我的用户名是`Iván`，但我发现问题不在于名称。如果您以管理员身份运行该应用程序，则不会有任何问题。

另外，我尝试[更改用户捆绑目录](https://wiki.appcelerator.org/display/guides2/Changing+the+User+Bundle+Directory)但没有运气。

# java - Import cookies from firefox to htmlunit

> ID：13213862
> 
> 赞同：1
> 
> 时间：2012-11-03T21:54:15.887
> 
> 标签：java, htmlunit

I want to import cookies from FireFox to HtmlUnit and do some analysis. I've located the firefox cookies file which is called "cookies.sqlite". I've tried to open it with text edit but no luck.

My questions are:

1.  Does HtmlUnit support loading cookies from local files?
2.  Do FireFox cookies need to be transformed in some way so that HtmlUnit could recognize them?

# android - Don't be disturbed by call or message during 5 minutes : Android

> ID：13213863
> 
> 赞同：4
> 
> 时间：2012-11-03T21:54:23.937
> 
> 标签：android, phone-call, forwarding

I made a sort of mp3 player but I wanted to add a functionality. I don't want to be disturbed by a call or a message while the music is playing. I already thought about 3 options, but they all have issues:

*   Enable and disable airplane mode: My first idea, but when I switch to airplane mode and switch back to normal, the phone will ask me to enter my pin code... That's not an option for me.

*   Enable silent mode: that was a good idea but when I get a call, even if the phone is in silent mode, the music is stopped...

*   Enable call forwarding: I couldn't find a simple way to do that...

**So here are my questions:**

Can I enable call forwarding easily (programmatically)?
Do you see another way to be peaceful when I'm playing an mp3?

# c - Multiprocessing and Pipes in C

> ID：13213864
> 
> 赞同：3
> 
> 时间：2012-11-03T21:54:26.340
> 
> 标签：c, fork, pipe

I'm trying to learn how to work with `fork()` to create new processes and `pipes` to communicate with each process. Let's say I have a list that contains 20 words, and I create 3 processes. Now, I need to distribute the words between the processes using pipes, and the each process will sort the list of words it receives. The way I want to achieve this is like this:

```
Word1 => Process1
Word2 => Process2
Word3 => Process3
Word4 => Process1
Word5 => Process2
Word6 => Process3
.
.
. 
```

So each process will have a list of words to sort, and eventually I'll use MergeSort to merge all the sorted lists returned by each process. I'm not sure how to use pipes to communicate with each process (e.g. feed each process with a word). Any help that would put me on the right track would be appreciated.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T03:02:59.427

试试这个代码的大小。它使用固定数量的子进程，但您可以通过调整枚举来更改该数字`MAX_KIDS`（它主要是在设置为 3 的情况下进行测试；我后来将其更改为 5 只是为了确保）。

```
#include <signal.h>
#include <stdarg.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/wait.h>
#include <unistd.h>

typedef struct Child
{
    FILE *fp_to;
    FILE *fp_from;
    pid_t pid;
} Child;

enum { P_READ, P_WRITE };   /* Read, write descriptor of a pipe */
enum { MAX_LINE = 4096 };

static void be_childish(void);
static void distribute(size_t nkids, Child *kids);
static void err_exit(const char *fmt, ...);
static void merge(size_t nkids, Child *kids);
static void wait_for_kids(size_t nkids, Child *kids);

static int make_kid(Child *kid)
{
    int pipe1[2];   /* From parent to child */
    int pipe2[2];   /* From child to parent */
    if (pipe(pipe1) != 0)
        return -1;
    if (pipe(pipe2) != 0)
    {
        close(pipe1[P_READ]);
        close(pipe1[P_WRITE]);
        return -1;
    }
    if ((kid->pid = fork()) < 0)
    {
        close(pipe1[P_READ]);
        close(pipe1[P_WRITE]);
        close(pipe2[P_READ]);
        close(pipe2[P_WRITE]);
        return -1;
    }
    else if (kid->pid == 0)
    {
        dup2(pipe1[P_READ], STDIN_FILENO);
        dup2(pipe2[P_WRITE], STDOUT_FILENO);
        close(pipe1[P_READ]);
        close(pipe1[P_WRITE]);
        close(pipe2[P_READ]);
        close(pipe2[P_WRITE]);
        /* Reads standard input from parent; writes standard output to parent */
        be_childish();
        exit(0);
    }
    else
    {
        kid->fp_to   = fdopen(pipe1[P_WRITE], "w");
        kid->fp_from = fdopen(pipe2[P_READ], "r");
        close(pipe1[P_READ]);
        close(pipe2[P_WRITE]);
        return 0;
    }
}

int main(void)
{
    enum { NUM_KIDS = 5 };
    Child kids[NUM_KIDS];
    struct sigaction act;

    sigfillset(&act.sa_mask);
    act.sa_flags   = 0;
    act.sa_handler = SIG_DFL;
    sigaction(SIGCHLD, &act, 0);

    for (int i = 0; i < NUM_KIDS; i++)
    {
        if (make_kid(&kids[i]) != 0)
            err_exit("Fault starting child %d\n", i);
    }

    distribute(NUM_KIDS, kids);
    merge(NUM_KIDS, kids);

    wait_for_kids(NUM_KIDS, kids);
    return(0);
}

static void err_exit(const char *fmt, ...)
{
    va_list args;
    va_start(args, fmt);
    vfprintf(stderr, fmt, args);
    va_end(args);
    exit(1);
}

static int qs_compare(const void *v1, const void *v2)
{
    const char *s1 = *(char **)v1;
    const char *s2 = *(char **)v2;
    return(strcmp(s1, s2));
}

static char *estrdup(const char *str)
{
    size_t len = strlen(str) + 1;
    char *out = malloc(len);
    if (out == 0)
        err_exit("Out of memory!\n");
    memmove(out, str, len);
    return(out);
}

static void be_childish(void)
{
    char **lines = 0;
    size_t num_lines = 0;
    size_t max_lines = 0;
    char input[MAX_LINE];

    while (fgets(input, sizeof(input), stdin) != 0)
    {
        if (num_lines >= max_lines)
        {
            size_t n = (2 * max_lines + 2);
            void *space = realloc(lines, n * sizeof(char *));
            if (space == 0)
                err_exit("Out of memory!\n");
            lines = space;
            max_lines = n;
        }
        lines[num_lines++] = estrdup(input);
    }

    qsort(lines, num_lines, sizeof(char *), qs_compare);

    for (size_t i = 0; i < num_lines; i++)
    {
        if (fputs(lines[i], stdout) == EOF)
            err_exit("Short write to parent from %d\n", (int)getpid());
    }

    exit(0);
}

static void distribute(size_t nkids, Child *kids)
{
    char   input[MAX_LINE];
    size_t n = 0;

    while (fgets(input, sizeof(input), stdin) != 0)
    {
        if (fputs(input, kids[n].fp_to) == EOF)
            err_exit("Short write to child %d\n", (int)kids[n].pid);
        if (++n >= nkids)
            n = 0;
    }

    /* Close pipes to children - let's them get on with sorting */
    for (size_t i = 0; i < nkids; i++)
    {
        fclose(kids[i].fp_to);
        kids[i].fp_to = 0;
    }
}

static void read_line(Child *kid, char *buffer, size_t maxlen, int *length)
{
    if (fgets(buffer, maxlen, kid->fp_from) != 0)
    {
        *length = strlen(buffer);
        buffer[*length] = '\0';
    }
    else
    {
        buffer[0] = '\0';
        *length = -1;
        fclose(kid->fp_from);
        kid->fp_from = 0;
    }
}

static int not_all_done(size_t nkids, int *lengths)
{
    for (size_t i = 0; i < nkids; i++)
    {
        if (lengths[i] > 0)
            return 1;
    }
    return 0;
}

static void min_line(size_t nkids, int *len, char **lines, size_t maxlen,
                     Child *kids, char *output)
{
    size_t  min_kid = 0;
    char   *min_str = 0;
    for (size_t i = 0; i < nkids; i++)
    {
        if (len[i] <= 0)
            continue;
        if (min_str == 0 || strcmp(min_str, lines[i]) > 0)
        {
            min_str = lines[i];
            min_kid = i;
        }
    }
    strcpy(output, min_str);
    read_line(&kids[min_kid], lines[min_kid], maxlen, &len[min_kid]);
}

static void merge(size_t nkids, Child *kids)
{
    char line_data[nkids][MAX_LINE];
    char *lines[nkids];
    int  len[nkids];
    char output[MAX_LINE];

    for (size_t i = 0; i < nkids; i++)
        lines[i] = line_data[i];

    /* Preload first line from each kid */
    for (size_t i = 0; i < nkids; i++)
        read_line(&kids[i], lines[i], MAX_LINE, &len[i]);

    while (not_all_done(nkids, len))
    {
        min_line(nkids, len, lines, MAX_LINE, kids, output);
        fputs(output, stdout);
    }
}

static void wait_for_kids(size_t nkids, Child *kids)
{
    int pid;
    int status;

    while ((pid = waitpid(-1, &status, 0)) != -1)
    {
        for (size_t i = 0; i < nkids; i++)
        {
            if (pid == kids[i].pid)
                kids[i].pid = -1;
        }
    }

    /* This check loop is not really necessary */
    for (size_t i = 0; i < nkids; i++)
    {
        if (kids[i].pid != -1)
            err_exit("Child %d died without being tracked\n", (int)kids[i].pid);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T22:15:55.867

整体画面通常是：

```
pid_t pids[3];
int fd[3][2];

int i;
for (i = 0; i < 3; ++i) {
    /* create the pipe */
    if (pipe(fd[i]) < 0) {
            perror("pipe error");
            exit(1);
    }

   /* fork the child */
   pid[i] = fork();
   if (pid[i] < 0) {
       perror("fork error");
   } else if (pid[i] > 0) {
       /* in parent process */
       /* close reading end */
       close(fd[i][0]);
   } else {
       /* in child process */
       /* close writing end */
       close(fd[i][1]);
       /* read from parent */
       read(fd[i][0], line, max);
       ...
    }
}

/* in parent process */
char words[100][10] = {...};
int j, child = 0;
/* for all words */
for (j = 0; j < 100; ++j) {
    /* write to child */
    write(fd[child][1], words[j], strlen(words[j]));
    ...
    ++child;
    if (child >= 3)
        child = 0;
} 
```

复制管道部件，以便从子级与父级进行通信。当父母和孩子试图同时在两个方向进行交流时，请注意不要陷入僵局。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T22:12:26.220

管道没有什么神奇之处——它们只是一个有两个端点的通信媒介。逻辑大致如下：

创建 3 个管道并保持一个端点。叉三下，让每个叉子抓住管子的另一端。然后孩子进入一个读取循环，等待输入并写回输出。父级可以循环所有输出，然后循环读取输入。这不是最好的策略，但它是迄今为止最简单的。IE，

```
while there is work left to do:
   for i in 1..3
       write current work unit to pipe[i]

   for i in 1..3
       read back response from pipe[i] 
```

给定的孩子看起来像这样：

```
while(input = read from pipe)
    result = do work on input
    write result to pipe 
```

下一步将以异步、非阻塞方式（可能使用`select`，或只是忙等待轮询循环）在父进程中进行回读。这要求孩子们报告他们正在为哪个任务返回结果，因为排序可能会变得混乱（即，您不能再依赖您发送的第一个工作单元作为您得到的第一个响应）。欢迎来到并发错误的有趣世界。

鉴于您的问题的性质有些不明确，我希望这在某种程度上有用。

# python - Python unicode字符代码？

> ID：13213866
> 
> 赞同：9
> 
> 时间：2012-11-03T21:54:47.473
> 
> 标签：python, unicode

有没有办法将 Unicode 字符“插入”到 python 中的字符串中？例如，

```
>>>import unicode
>>>string = u'This is a full block: %s' % (unicode.charcode(U+2588))
>>>print string
This is a full block: █ 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-03T21:57:06.053

是的，使用[unicode 字符转义](http://docs.python.org/2/howto/unicode.html#unicode-literals-in-python-source-code)：

```
print u'This is a full block: \u2588' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:57:19.563

您可以使用`\udddd`替换`dddd`为字符代码的位置。

```
print u"Foo\u0020bar" 
```

印刷

```
Foo bar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:58:28.627

您可以使用 \u 转义 Unicode 字符代码：

```
s = u'\u0020' 
```

它定义了一个包含空格字符的字符串。

# html - bootstrap Responsive navbar hidden parts not going into button

> ID：13213868
> 
> 赞同：0
> 
> 时间：2012-11-03T21:55:09.250
> 
> 标签：html, css, twitter-bootstrap

Here is the code for navbar

```
<div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">

          <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>

          <!-- Be sure to leave the brand out there if you want it shown -->
          <a class="brand" href="index.html">EasyUniv</a>

          <!-- Everything you want hidden at 940px or less, place within here -->
          <div class="nav-collapse collapse">
              <ul class="nav">
                <li class="active">
                    <a href="index.html">Home</a>
                </li>
                <li><a href="services.html">Services</a></li>
                <li><a href="campus.html">Campus</a></li>
                <li><a href="advertise.html">Advertise</a></li>
              </ul>
          </div>

        </div>
      </div>
    </div> 
```

The example is at: www.easyuniv.com/staging

when you make the screen smaller it hides the nav buttons correctly but they do not go into the little drop down like it should. also at certain widths there is weird padding.. been trying different things and can't get these to work.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:05:32.913

您需要在引导之前包含 jQuery。

# android - communication between an activity and a service

> ID：13213869
> 
> 赞同：1
> 
> 时间：2012-11-03T21:55:11.783
> 
> 标签：android, commonsware

On page 550 of the commonsware 4.0 book, the [Messenger](http://developer.android.com/reference/android/os/Messenger.html) is discussed and it is explained how the Activity can attach extra data when starting the service that allows the service to send messages back to activity anytime it wants.

It then explains how the service can send data back to the Activity anytime it wants.

I have this implemented and currently working in my app.

However I have a need for the activity to talk to the service on other occasions - many times during the life of the activity. What tool or conduit allows the service to send messages to the Activity any time it wants?

Thanks, Gary

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:58:00.890

> 什么工具或管道允许服务随时向 Activity 发送消息？

由您自己承认：

> 然后它解释了服务如何随时将数据发送回活动。

因此，您的答案是`Messenger`。或该章中概述的任何其他技术。

# python - Python中的行顺序和对笛卡尔平面的抽象

> ID：13213872
> 
> 赞同：0
> 
> 时间：2012-11-03T21:56:03.343
> 
> 标签：python, numpy, row, iteration

如何将二维笛卡尔平面 (x,y) 的坐标系转换为索引为 a[i,j] 的矩阵？

假设您必须使用有限差分法模拟二维平面中的热传导。系统的边界是左下角的`pos_inf`一个点， 和右上角的一个点，`pos_sup`。

结果形成一个表面图，其中索引 a[i,j] 存储该点的温度值，并且必须存储在索引为`i`、`j`、 as的矩阵中`a[i,j]`。在两个方向的间距 h 相同的情况下，应该如何进行离散化，以及 Python 遵循的行排序如何干扰它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:19:09.323

经过一段时间的摇头后，我终于掌握了 Python 使用的行顺序的差异和笛卡尔平面中坐标的定义。这很简单，但我把它放在这里是因为它可能会让新手或阅读障碍者感到困惑。

正如已经指出的那样，这与[np.meshgrid](http://docs.scipy.org/doc/numpy/reference/generated/numpy.meshgrid.html)的行为非常相似。这个问题的原因是为了用简单的语言解释笛卡尔平面转换为矩阵形式的想法。

给定一个平面，其左下角有一个点 pos_inf，坐标为 pos_inf = (x_inf, y_inf)，右上角有一个点 pos_sup (x_sup, y_sup)，间距 h（我假设对于x 和 y 方向），每个方向的离散点数等于

```
points_x = int((x_sup - x_inf) / h)
points_y = int((y_sup - y_inf) / h) 
```

假设我想在这个网格的每个点中存储一个函数的值。我生成一个大小的矩阵

```
a = np.zeros((points_y, points_x)) 
```

请注意，Python 中最右边的索引，即 a[i,j] 中的 j，会遍历*同一*行中的元素， points_x 次。i，最左边的索引，将遍历列数，points_y。for 循环由下式给出

```
for i in xrange(points_y):
  for j in xrange(points_x):
    a[i,j] = i 
```

这样 x 方向的点对应于 j 索引，y 方向的点对应于 i 索引。因此，例如，如果 points_x = 5 和 points_y = 6，则用 h = 1 离散化的笛卡尔空间，从 x_inf=0 到 x_sup=5 和 y_inf = 0 到 y_sup = 6，将是

```
a = np.zeros((5,6))
for i in xrange(5):
  for j in xrange(6):
    a[i,j] = i

array([[ 0.,  0.,  0.,  0.,  0.,  0.],
   [ 1.,  1.,  1.,  1.,  1.,  1.],
   [ 2.,  2.,  2.,  2.,  2.,  2.],
   [ 3.,  3.,  3.,  3.,  3.,  3.],
   [ 4.,  4.,  4.,  4.,  4.,  4.]]) 
```

该图显示了方向：![在此处输入图像描述](../Images/b6dd469e0d289b6fa2c0cd1fdf7fbb92.png)

# c++ - 如何将成员声明为指向外部“C”函数的指针？

> ID：13213874
> 
> 赞同：7
> 
> 时间：2012-11-03T21:56:18.890
> 
> 标签：c++, linkage

我正在寻找声明外部“C”函数指针的类型。它是一个成员变量。[这个问题](https://stackoverflow.com/questions/1289191/how-do-declare-an-extern-c-function-pointer)中的语法我无法编译。

```
template<typename Sig> struct extern_c_fp {
    extern "C" typedef typename std::add_pointer<Sig>::type func_ptr_type;
}; 
```

我已经尝试将 放置`extern "C"`在两端，以及介于`typedef`and`typename`和之间`type`，`func_ptr_type`但编译器拒绝了所有。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T23:17:34.377

```
extern "C" {
    template<typename R, typename... Args>
    using extern_c_fp = R(*)(Args...);
}

using my_function_ptr = extern_c_fp<void, int, double>;
// returns void, takes int and double 
```

这与您使用的接口不同，但可能有一种方法可以提取`Sig`.

这适用于clang 3.1。Xeo 指出[它在 GCC 中不起作用](https://chat.stackoverflow.com/transcript/message/6080989#6080989)。我不确定这是否是任一编译器中的错误，因此在使用时要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:42:11.023

您不能像这样声明 typedef（从 7.5p4 开始）：

> 链接规范应仅出现在命名空间范围 (3.3) 中。

# html - application executer, desktop icons

> ID：13213880
> 
> 赞同：0
> 
> 时间：2012-11-03T21:56:39.610
> 
> 标签：html

i would like to run .exe files on my computer from my website,
example:

```

```
 <script type="text/javascript" language="javascript">  
    function RunFile() {  
    WshShell = new ActiveXObject("WScript.Shell");  
    WshShell.Run("c:/windows/system32/notepad.exe", 1, false);  
    }  
</script>  

<input type="button" value="Run Notepad" onclick="RunFile();"/> 
```

I googled this and its seems its only possible in IE so i wonder if its possible to do this in all browsers with some sort of application like BF3 or something, a handler of some sort .dll or whatever they use.
I will not abuse this, i can assure you i will only use it for my personal usage and with some friends. I want a html file that can open desktop icons.

            回答 #1

赞同：1

时间：2012-11-04T03:50:50.820

无法从网页启动本地应用程序。正如您毫无疑问地推测的那样，滥用它太容易了。

            回答 #2

赞同：1

时间：2012-11-04T03:39:22.340

它既`ActiveXObject`不是 HTML DOM 也不是 JavaScript/ECMAScript 标准的一部分。它仅适用于 Microsoft Internet Explorer (MSIE)。MSIE for Mac 也可能缺乏对 ActiveX 的支持，`ActiveXObject`因为 ActiveX 起源于 Window 平台。

```

# mailto - 电子邮件链接在正文中打开带有问卷调查的电子邮件客户端

> ID：13213882
> 
> 赞同：0
> 
> 时间：2012-11-03T21:56:57.093
> 
> 标签：mailto

我有一个问题，我似乎找不到答案。也可能是我无法弄清楚如何简洁地用词来最有效地寻找它。

这就是我想要发生的事情。

当有人点击我的“给我发电子邮件”链接时（mailto：（我使用 .js 从屏幕上隐藏真实的电子邮件地址以过滤垃圾邮件）它会像往常一样打开他们的电子邮件客户端，但电子邮件已经有一个主题行并且电子邮件的正文中已经包含文本（供他们填写的问卷。）

任何正确方向的帮助将不胜感激！

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T21:59:35.277

mailto 支持主题和正文作为参数

```
mailto:you@yourdomain.com?subject=Your Subject&body=Message for the body 
```

# php - 我的带有 Count/Group By 的 MySQL 查询无法正常工作

> ID：13213883
> 
> 赞同：1
> 
> 时间：2012-11-03T21:56:57.023
> 
> 标签：php, mysql, database

我正在为我的一个项目用 PHP 编写一个 PM（私人消息）系统，但我坚持使用（或应该使用）Count 的单个 MySQL 查询。查询将在一个函数中进行，该函数应该为`$id`用户返回未读消息的值。

我的表格布局如下所示：

```
___________________________________________________________________________________
+-message_id--||--from_user--||--to_user--||--content--||--date_sent--||--is_read-+ 
```

我写了一个这样的查询：

```
$count = mysql_query("
    SELECT Count(from_user) 
    FROM messages 
    WHERE to_user='$id' 
    AND is_read=0 
    GROUP BY to_user
",$connection); 
```

我不太熟悉这个 Count/Group By 的东西，所以我不确定我做错了什么。我做了一些谷歌搜索，但没有找到任何对我有用的东西。

如果你能帮我解决这个小问题，那就太棒了。

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:59:36.077

删除`GROUP BY`子句：

```
SELECT  COUNT(*)
FROM    messages
WHERE   to_user = '$id'
        AND is_read = 0 
```

# sql-server-2005 - 为什么我在脚本任务连接器上收到对象引用未设置错误？

> ID：13213884
> 
> 赞同：2
> 
> 时间：2012-11-03T21:57:01.570
> 
> 标签：sql-server-2005, ssis

我有一个 SSIS 包（SQL Server 2005），它遍历文件夹中的一堆平面文件。我需要等到源应用程序完成文件的写入，然后才能在我的平面文件导入任务中打开它。

我有一个 For Each 循环容器，其中有一个要在数据流任务之前执行的脚本任务。

当我尝试在脚本任务和数据流任务之间创建成功连接器时，我收到此错误：

> *无法创建连接器。你调用的对象是空的。*

我知道某些东西被设置为空，但我看不到它。我`DelayValidation`在脚本任务和数据流任务上都设置为 true。我还缺少什么？

我是一个 C# 人，所以也许我在 VB 中遗漏了一些明显的东西。这是我从互联网上偷来的脚本：

```
Public Sub Main()
    Dim strFileName As String = CType(Dts.Variables("FileName").Value, String)
    Dim objFS As System.IO.FileStream
    Dim bolFinished As Boolean = False

    Do
        Try
            objFS = System.IO.File.Open(strFileName, FileMode.Open, FileAccess.ReadWrite, FileShare.None)
            bolFinished = True
            objFS.Close()
        Catch ex As Exception
            System.Threading.Thread.Sleep(1000)
        End Try
    Loop

    If bolFinished Then
        Dts.TaskResult = Dts.Results.Success
    Else
        Dts.TaskResult = Dts.Results.Failure
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:25:18.180

Milen k 是非常正确的。看起来你有一个无限循环，它会多次打开一个文件，直到它崩溃。

您可以使用以下建议的代码更改您的代码。这将帮助您摆脱无限循环。

### 您当前的代码：

```
Do
    Try
        objFS = System.IO.File.Open(strFileName, FileMode.Open, FileAccess.ReadWrite, FileShare.None)
        bolFinished = True
        objFS.Close()
    Catch ex As Exception
        System.Threading.Thread.Sleep(1000)
    End Try
Loop 
```

### 建议代码：

```
Do While(true)
    Try
        objFS = System.IO.File.Open(strFileName, FileMode.Open, FileAccess.ReadWrite, FileShare.None)
        bolFinished = True
        objFS.Close()
        Exit Do
    Catch ex As Exception
        System.Threading.Thread.Sleep(1000)
    End Try
Loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T23:17:09.650

确保您已为数据流任务创建了平面文件源。如果您没有现有的，请创建一个临时的，作为您通过 For Each 循环提供的文件路径的占位符。

据我了解，您应该将要导入平面文件连接的每个文件的路径传递给您。这可以通过将 For Each 循环中生成的变量添加为平面文件连接的 Expression 属性中的表达式来轻松完成。

* * *

### 更新：

您需要在 Do ... Loop 中设置条件。例如：`Loop While Not bolFinished`。查看[此文档](http://www.homeandlearn.co.uk/net/nets3p3.html)以获取更多信息。

# php - 每天跟踪用户登录

> ID：13213886
> 
> 赞同：0
> 
> 时间：2012-11-03T21:57:15.630
> 
> 标签：php

嘿伙计们，我正在我的网站上运行一个脚本：当用户登录我的网站时，我将这一天的日期写入一个文本文件，这样我就可以知道用户在我的网站上处于活跃状态。问题是，如果用户说没有从网站注销 2 天或更长时间，我如何检查他在那几天是否在网站上？有人可以给我一个好的建议吗？

这是我作为登录的一部分运行的代码，就在我注册会话之前：（顺便说一句，我很高兴听到是否有更好的方法来做到这一点？）

```
 $log_file_name = "logfile.txt";
      $log_file_path = "log_files/$id/$log_file_name";

      if(file_exists($log_file_path)){
      $not = "";
      $todaydate = date('d,m,Y');
      $today = "$todaydate;";
      $strlength = strlen($today);
      $file_contents = file_get_contents($log_file_path);
      $file_contents_arry = explode(";",$file_contents);
      if(!in_array($todaydate,$file_contents_arry)){
      $append = fopen($log_file_path, 'a');
      $write = fwrite($append,$today); //writes our string to our file.
      $close = fclose($append); //closes our file    
      }
      else if(in_array($todaytodaydate,$file_contents_arry)){}

      }
      else{
      mkdir("log_files/$id", 0700);
      $todaydate = date('d,m,Y');
      $today = "$todaydate;";
      $strlength = strlen($today);
      $create = fopen($log_file_path, "w");
      $write = fwrite($create, $today, $strlength); //writes our string to our file.
      $close = fclose($create); //closes our file
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:59:17.933

这不是**文本文件**要处理的东西（因为您最终会得到数百个文本文件），这应该使用数据库和一组**更新**查询来处理。

# security - AWS 安全组不允许入站流量

> ID：13213897
> 
> 赞同：1
> 
> 时间：2012-11-03T21:59:34.703
> 
> 标签：security, networking, amazon-web-services

我想允许组中的节点与`app-server`组中的 mysql 和 redis 机器对话`database`。但是，我只能使显式 IP 用于入口规则。当我尝试定义组时，为了使自动缩放更容易，流量被阻止。

*这是我的设置*：

当我跑

`ec2-describe-group database`

我明白了

```
PERMISSION      890752071609    database        ALLOWS  tcp     3306    3306    FROM    USER    890752071609    NAME default    ID sg-5ce3766c  ingress
PERMISSION      890752071609    database        ALLOWS  tcp     3306    3306    FROM    USER    890752071609    NAME app-server ID sg-b81b8088  ingress
PERMISSION      890752071609    database        ALLOWS  tcp     6379    6379    FROM    USER    890752071609    NAME default    ID sg-5ce3766c  ingress
PERMISSION      890752071609    database        ALLOWS  tcp     6379    6379    FROM    USER    890752071609    NAME app-server ID sg-b81b8088  ingress
PERMISSION      890752071609    database        ALLOWS  tcp     0       65535   FROM    USER    890752071609    NAME database   ID sg-d262f1e2  ingress
PERMISSION      890752071609    database        ALLOWS  tcp     22      22      FROM    CIDR    0.0.0.0/0       ingress 
```

但是，当我尝试从`app-server`组中的一台机器上使用 redis-cli 连接到端口 6379 时，我收到了 redis 超时错误。

如果我明确添加要连接的服务器的弹性 IP，就像这样

```
PERMISSION      890752071609    database        ALLOWS  tcp     3306    3306    FROM    CIDR    111.snip.25/32        ingress
PERMISSION      890752071609    database        ALLOWS  tcp     6379    6379    FROM    CIDR    222.snip.25/32        ingress 
```

redis-cli 调用有效。但是，我想更加灵活，而是添加整个安全组。

亚马逊[文档](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-network-security.html#security-group-examples)状态

> 通过将安全组指定为源，您允许来自属于源安全组的所有实例的传入流量。您允许的传入流量基于源安全组中实例的私有 IP 地址。如果您正在创建三层 Web 服务，您可以在您的帐户中指定另一个安全组（请参阅创建三层 Web 服务）。

这应该有效，不是吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T14:48:13.353

检查/尝试的一些建议：

1.  AWS sec 组*不允许*跨区域规则。不知道你们的redis机器是不是在同一个区域。
2.  尝试从 AWS Web Interface 或 Dome9 控制台 (www.dome9.com) 创建此设置，以确保没有未显示的隐藏设置。

不要失去希望 - 这种设置*应该*有效 - AWS sec 组是为这个用例设计的。

# neo4j - 为什么我会得到 No such property error: T for class: groovysh_evaluate in gremlin neo4j dbpeida？

> ID：13213903
> 
> 赞同：1
> 
> 时间：2012-11-03T22:00:20.393
> 
> 标签：neo4j, dbpedia, gremlin

```
gremlin> g
==> neo4jgraph[EmbeddedGraphDatabase [/Users/0x90/Downloads/dbpedia4neo]]
gremlin> g.v(123214).map()
==> value=U http://dbpedia.org/resource/Huey_Lewis_and_the_News
gremlin> g.v(123214).map()
==> value=U http://dbpedia.org/resource/Huey_Lewis_and_the_News
gremlin> v = g.idx(T.v)[[uri:'http://dbpedia.org/resource/Huey_Lewis_and_the_News']].next() 
==> No such property: T for class: groovysh_evaluate
gremlin> 
```

我 `No such property: T for class: groovysh_evaluate`在关注[http://markorodriguez.com/](http://markorodriguez.com/)时会得到什么：

```
gremlin> v = g.idx(T.v)[[uri:'http://dbpedia.org/resource/Graph_theory']].next()
==>v[26634]
gremlin> v.map()
==>name=graph theory
==>uri=http://dbpedia.org/resource/Graph_theory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T23:40:21.397

博客文章中的语法适用于旧版本的 Gremlin [[1]](https://groups.google.com/forum/?fromgroups=#!topic/gremlin-users/M-yBPuaZ_Xo)。

你可以使用类似的东西：

```
g.idx("your_index_name")[[uri:"http://dbpedia.org/resource/Graph_theory"]] 
```

[这](http://gremlindocs.com/#methods/index-map-entry)是新语法的文档

# c# - 如何在 Windows Store App 中获取正在执行的程序集版本信息？

> ID：13213906
> 
> 赞同：13
> 
> 时间：2012-11-03T22:00:27.517
> 
> 标签：c#, reflection, windows-8, windows-store-apps

在将应用程序移植到 Windows 应用商店时，我注意到 .NETCore 框架不包括：

`System.Reflection.Assembly.GetExecutingAssembly()`

我用它来获取版本信息以显示在菜单屏幕上。是否有替代品，或者我是否被迫将信息存储在其他地方以供检索？

编辑：

我还发现我可以从中提取版本号，`typeof(MyType).AssemblyQualifiedName`但这似乎很糟糕。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-03T22:31:39.480

我正在使用这个：

```
public string GetApplicationVersion()
{
  var ver = Windows.ApplicationModel.Package.Current.Id.Version;
  return ver.Major.ToString() + "." + ver.Minor.ToString() + "." + ver.Build.ToString() + "." + ver.Revision.ToString();
} 
```

如果你想要汇编版本，你可以从 Version 属性中获取它：

```
public string GetAssemblyVersion(Assembly asm)
{
  var attr = CustomAttributeExtensions.GetCustomAttribute<AssemblyFileVersionAttribute>(asm);
  if (attr != null)
    return attr.Version;
  else
    return "";
} 
```

例如使用主应用程序的程序集：

```
Assembly appAsm = typeof(App).GetTypeInfo().Assembly;
string assemblyVersion = GetAssemblyVersion(appAsm); 
```

# emacs - 覆盖emacs中的键盘输入

> ID：13213907
> 
> 赞同：1
> 
> 时间：2012-11-03T22:00:36.417
> 
> 标签：emacs, elisp

是否可以在次要模式下覆盖/捕获所有 keydown 和 keyup 事件？

我想做这样的事情有几个原因，但主要是尝试另一种输入法，我还没有找到任何合理的方法，其中组合键会产生输入，但重新按下会很麻烦键（如果它们连续用于多个组合，则按住它们会更简单）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:00:22.153

如果您的次要模式位于所有活动次要模式列表的顶部，则将在查询所有其他模式之前查询其键盘映射（除非出现一些更高优先级的情况，参见Emacs Lisp 中的[“搜索键盘映射”](http://www.gnu.org/software/emacs/manual/html_node/elisp/Searching-Keymaps.html#Searching-Keymaps)文档）。

这意味着您至少可以在其他模式之前处理所有键事件，方法是将它们绑定到模式的键映射中。您还可以定义一个“catch all”键绑定，以匹配未在地图中以其他方式绑定的每个键事件：

```
(define-key my-minor-mode-map [t] 'my-catch-all-command) 
```

但是，这不会帮助您获取有关密钥版本的信息。也许您会发现值得为此检查[键和弦模式](http://emacswiki.org/emacs/key-chord.el)。

# emacs - 在 Emacs 中重新排列 Windows？

> ID：13213910
> 
> 赞同：0
> 
> 时间：2012-11-03T22:00:48.083
> 
> 标签：emacs

Emacs 倾向于打开两个水平分隔的窗口，一个在另一个之上（我认为 windows 是正确的 emacs 术语）。由于我使用的是宽屏幕，我发现使用两个垂直分离的窗口更容易更好，它们并排排列在 emacs 框架内。

我知道如何使用打开一个新的垂直分隔窗口，`C-x 3`但是如何将emacs打开的窗口（例如，当`M-x compile`调用打开编译/调试窗口时）从水平重新排列到垂直？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T23:07:22.187

我有同样的问题，这是我目前使用的。只需将其放入您的 Emacs 初始化文件中：

```
;; The default behaviour of `display-buffer' is to always create a new
;; window. As I normally use a large display sporting a number of
;; side-by-side windows, this is a bit obnoxious.
;;
;; The code below will make Emacs reuse existing windows, with the
;; exception that if have a single window open in a large display, it
;; will be split horisontally.

(setq pop-up-windows nil)

(defun my-display-buffer-function (buf not-this-window)
  (if (and (not pop-up-frames)
           (one-window-p)
           (or not-this-window
               (not (eq (window-buffer (selected-window)) buf)))
           (> (frame-width) 162))
      (split-window-horizontally))
  ;; Note: Some modules sets `pop-up-windows' to t before calling
  ;; `display-buffer' -- Why, oh, why!
  (let ((display-buffer-function nil)
        (pop-up-windows nil))
    (display-buffer buf not-this-window)))

(setq display-buffer-function 'my-display-buffer-function) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T23:42:19.653

看看`split-height-threshold`和`split-height-threshold`变量，两者都是可定制的。

有关他们采用什么值的更多信息，`C-h` `f` `split-window-sensibly` `RET`. [这个 Emacs Lisp](http://www.gnu.org/software/emacs/manual/html_mono/elisp.html#index-split_002dwindow_002dsensibly-2293)肤浅地触及了这个话题。

这会影响`display-buffer`工作方式，这可能`compile`和许多其他命令都使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T02:51:24.233

这是我的解决方案：

```
(defun split-window-prefer-side-by-side (&optional window)
  (let ((split-height-threshold (and (< (window-width window)
                                        split-width-threshold)
                                     split-height-threshold)))
    (split-window-sensibly window)))

(setq split-window-preferred-function 'split-window-prefer-side-by-side) 
```

这仍然参考`split-*-threshold`变量值，只是在两个拆分方向都可接受时更喜欢并排窗口。

# ruby-on-rails - Manifest.yml 为空

> ID：13213911
> 
> 赞同：0
> 
> 时间：2012-11-03T22:00:49.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, asset-pipeline

每当我运行`rake assets:precompile`时，我都会得到一个`manifest.yml`如下所示的文件：

```
--- {} 
```

一定是出了什么问题。这是我的输出`rake assets:precompile --trace`：

```
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/Users/user/.rvm/rubies/ruby-1.9.3-p194/bin/ruby /Users/user/.rvm/gems/ruby-1.9.3-p194@global/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
** Invoke assets:precompile:nondigest (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:nondigest 
```

有人可以帮忙吗？？谢谢！

## 更新：

随意查看我的代码[www.github.com/sambaek/novulty](http://www.github.com/sambaek/novulty)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:14:11.900

当我`rake assets:precompile`为您的应用程序运行时，我得到以下输出

```
➜  novulty git:(master) ✗ rake assets:precompile                     
/Users/deefour/.rbenv/versions/1.9.3-p125/bin/ruby /Users/deefour/.rbenv/versions/1.9.3-p125/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
rake aborted!
Undefined variable: "$baseLineHeight".
  (in /Users/deefour/.rbenv/versions/1.9.3-p125/gemsets/novulty/gems/bootstrap-sass-2.1.0.1/vendor/assets/stylesheets/bootstrap/_accordion.scss)

Tasks: TOP => assets:precompile:primary
(See full trace by running task with --trace)
rake aborted!
Command failed with status (1): [/Users/deefour/.rbenv/versions/1.9.3-p125/...]

Tasks: TOP => assets:precompile
(See full trace by running task with --trace)
rake assets:precompile  12.50s user 1.21s system 99% cpu 13.744 total 
```

我不确定你的意图是什么，但你有

*   `app/asssets/bootstrap.min.css`被包含在`app/assets/application.css`
*   `gem 'bootstrap-sass'`在你的`Gemfile`which 似乎导致`bootstrap-sass-2.1.0.1/vendor/assets/stylesheets/bootstrap/_accordion.scss` *（在其他文件中）*被添加到你的管道中，即使它们不包含在 require 行中`app/assets/application.css`

似乎您包含了引导 gem 以使用它的 Javascript 插件，但是试图省略 SASS 文件以支持硬编码的缩小 CSS 文件？

无论如何，我得到的错误表明`$baseLineHeight`SASS 变量没有为该 gem 文件资产中的一行定义 - 否则您似乎会忽略的资产*（据我所知）*。

然后我做了以下

1.  注释掉`bootstrap-sass`你的宝石`Gemfile`

    ```
    #gem 'bootstrap-sass' 
    ```

2.  冉`bundle`

3.  冉`rake assets:clean`
4.  从您删除了以下要求行，`app/assets/application.js`因为它们来自我在**1.**中`bootstrap-sass`删除的 gem

     **```
    //= require bootstrap-transition
    //= require bootstrap-button
    //= require bootstrap-carousel
    //= require bootstrap-collapse
    //= require bootstrap-tab 
    ```** 
***   冉`rake assets:precompile`** 

 **这导致以下结果`public/assets/manifest.yml`。

*   [https://gist.github.com/d29f70b047c7b0606263](https://gist.github.com/d29f70b047c7b0606263)

我认为您需要以下任何一项

*   按预期使用`bootstrap-sass`宝石。在您的中包含 SASS 文件`app/assets/application.css` *（这样做有点超出了这个问题的范围）*
*   `bootstrap-sass`像我上面那样摆脱gem，并将必要的 Javascript 文件作为资产包含在您的`vendor/assets/javascripts`目录中*（这也是`app/assets/stylesheets/bootstrap.min.css`属于的地方 - `vendor/assets/stylesheets`）***

# c++ - 在 C++ 中返回对象或指针

> ID：13213912
> 
> 赞同：15
> 
> 时间：2012-11-03T22:00:50.310
> 
> 标签：c++, object, pointers, return-value

在 C++ 中，我的方法应该返回对象还是指向对象的指针？如何决定？如果是运营商呢？我该如何定义？

还有一件事 - 如果指针变成一个向量，我如何在返回后找出它的大小？如果不可能，正如我认为的那样，我应该如何在没有这个限制的情况下正确返回一个数组？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T22:04:29.247

> 在 C++ 中，我的方法应该返回对象还是指向对象的指针？如何决定？

从 C++11 开始，我们在 C++ 中有了移动语义，这意味着它像以前一样简单，现在也可以快速按值返回。这应该是默认值。

> 如果是运营商呢？我该如何定义？

许多运算符，例如`operator=`通常返回*对*`*this`

```
X& X::operator=(X rhs); 
```

如果您想遵守通常的模式（并且应该），您需要为每个操作员查找它。从这里开始：[运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)

正如 Ed S 所指出的，返回值优化也适用（甚至在 C++11 之前），这意味着您返回的对象通常不需要被复制或移动。

所以，这是现在返回东西的方式：

```
std::string getstring(){ 
   std::string foo("hello");
   foo+=" world";
   return foo;
} 
```

我在这里创建了一个 foo 对象的事实不是我的意思，即使你只是这样做`return "hello world";`也是要走的路。

> 还有一件事 - 如果指针变成一个向量，我如何在返回后找出它的大小？如果不可能，正如我认为的那样，我应该如何在没有这个限制的情况下正确返回一个数组？

标准中的所有可复制或可移动类型也是如此（这些几乎是所有类型，例如`vectors`,`sets`等等），除了少数例外。例如 std::arrays 不会从移动中获益。它们花费的时间与元素的数量成正比。在那里，您可以将其退回`unique_ptr`以避免复制。

```
typedef std::array<int,15> MyArray;
std::unique_ptr<MyArray> getArray(){ 
  std::unique_ptr<MyArray> someArrayObj(new MyArray());
  someArrayObj->at(3)=5;
  return someArrayObj;
}

int main(){
  auto x=getArray();
  std::cout << x->at(3) <<std::endl; // or since we know the index is right: (*x)[3]
} 
```

**现在，为了避免再写`new`（除了极少数情况下的专家），您应该使用一个名为`make_unique`. 这将极大地帮助异常安全，并且同样方便：**

```
std::unique_ptr<MyArray> getArray(){ 
  auto someArrayObj=make_unique<MyArray>();
  someArrayObj->at(3)=5;
  return someArrayObj;
} 
```

要获得更多动力和（非常短的）实现`make_unique`，请看这里： [make_unique and perfect forwarding](https://stackoverflow.com/questions/7038357/make-unique-and-perfect-forwarding)

## 更新

现在`make_unique`是 C++14 标准的一部分。如果你没有，你可以从[STL 的提案中找到并使用整个实现：](https://isocpp.org/files/papers/n3588.txt)

[关于如何做到这一点的 Ideone 示例](http://ideone.com/dNxCJf)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T22:10:45.910

> 在 C++ 中，我的方法应该返回对象还是指向对象的指针？

您应该默认返回一个对象。通常的例外是返回给定类的子类的函数，并且当不返回任何内容时是函数¹的合法选项。

> 如果是运营商呢？

运算符返回引用或对象；尽管从重载运算符返回指针在技术上是可行的，但通常不会这样做。

> 还有一件事 - 如果指针变成一个向量，我如何在返回后找出它的大小？

我认为您的意思是*array*而不是*vector*，因为`std::vector`有一个`size()`返回向量大小的成员函数。确实不可能找到变长数组的大小。

> 如果不可能，正如我认为的那样，我应该如何在没有这个限制的情况下正确返回一个数组？

您应该使用`std::vector`，它不会限制您进入其中的元素的大小或类型。

* * *

¹在这种情况下，您返回`NULL`或`nullptr`在 C++11 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T22:10:49.437

除非有特定的理由使用普通指针，否则总是返回一些内存安全的东西。在大约 95% 的情况下，简单地返回对象就可以了，然后按值返回绝对是规范的做法（简单、高效、好！）。

剩下的 5% 主要是返回的对象是运行时多态的；这样的对象不能在 C++ 中按值返回，因为这会发生在堆栈上。在这种情况下，您应该返回一个指向新对象的*智能指针*`std::unique_ptr`，在 C++11 中，标准选择是. 还有一种情况是您希望有*选择地*返回某些东西，但这是 IMO 特定容器的情况，而不是指针`boost::optional`或[类似的情况](https://github.com/leftaroundabout/cxx-lambdalike/blob/master/include/maybe.hpp)。

# jquery - 如何销毁/删除/取消绑定 Flexslider

> ID：13213913
> 
> 赞同：10
> 
> 时间：2012-11-03T22:01:00.127
> 
> 标签：jquery, slideshow, destroy, flexslider

github页面上有一些关于destroy方法的讨论，还有一些关于堆栈的问题，但还没有一个简单的答案或解决方案，我经过大量搜索后能够找到。

当前版本的 flexslider [http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)没有销毁方法。在注释中它说以前的版本 1.8 可以，但是使用该方法不起作用。

我需要取消绑定一个 flexslider 元素，然后在另一个元素上调用 .flexslider()，因为我不希望多个滑块同时运行。

我怎样才能做到这一点？注意：删除导航元素、删除类、解包 UL 和删除 ".clone"`li`是不够的！我想将滑块元素完全恢复到原始状态！

现在我在初始化 flexslider 之前`.after()`克隆滑块，然后在滑块之后插入克隆，然后删除滑块。但这对我来说似乎是一种非常严厉的方法。

```
$projCur.addClass('flexslider').flexslider({
    animation: "slide",
    animationSpeed: 500,
    slideshow: false,
    manualControls: '.dot-nav li a'             
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-11T06:12:44.097

Github 用户提交了一个拉取请求，为插件添加销毁方法。 [https://github.com/woothemes/FlexSlider/pull/771](https://github.com/woothemes/FlexSlider/pull/771)

我使用他的 destroy 方法使用了这个用户版本的插件，它对我很有用。我从[https://github.com/bradgreens/FlexSlider/tree/release-2-2-0得到它](https://github.com/bradgreens/FlexSlider/tree/release-2-2-0)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-21T16:05:16.527

您是否尝试过分离和附加？这将使任何事物的状态甚至事件保持分离。

```
var flex = $('.flexslider').detach(); //detach
$('body').append(flex); //reattach 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-11T14:50:36.890

destroy 方法对我不起作用。

我找到的唯一可靠的解决方案（从当前版本 2.2.2 开始）是从 DOM 中完全删除 flexslider 元素，然后恢复它。

就像是：

```
$('.flexslider').remove();
// re-insert clean mark-up so flexslider can reset itself properly
$('.flexslider-container').append('<div class="flexslider"><ul class="slides"></ul></div>'); 
```

然后我从头开始重新初始化 flexslider：

```
var imglist = '<li><img ...></li><li><img ...></li>...';
$('.flexslider ul.slides').html(imglist);
$('.flexslider').flexslider({ 
    ...
}); 
```

我还发现这种方法比添加和删除幻灯片更可靠，以便让滑块自行更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-15T14:31:38.820

对我来说，我找到了这个解决方案：

```
$('.logo-carousel').flexslider({
   move : 0
}); 
```

# c++ - 只允许传递指向新对象的指针

> ID：13213914
> 
> 赞同：0
> 
> 时间：2012-11-03T22:01:20.190
> 
> 标签：c++, c++11

我有抽象类 Managee 和辅助类 Wrapper。指向用于构造 Wrapper 的 Managee 的指针，然后 Wrapper 将接管 Managee。我想确保用户将始终分配新的 Managee。右值引用是否适合这个目标？

包装器定义：

```
...
Wrapper(Managee * && tmpptr);
Managee & GetManagee();
... 
```

包装器用法：

```
Wrapper a(new ManageeA()); // ok;
Wrapper b(&a.GetManagee()); // error?    <----- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T22:15:53.080

右值引用没有帮助，因为`&a.GetManagee()`它是一个右值。为什么不拿一个`std::unique_ptr`？

```
Wrapper(std::unique_ptr<Managee> ptr)
  : member_ptr(std::move(ptr)) {}

Managee& GetManagee(); 
```

用法：

```
Wrapper a(make_unique<Managee>(/*args*/)); 
```

对于`make_unique`，见[这里](https://stackoverflow.com/q/7038357/500104)。

然而，最好的解决方案甚至不允许用户`Managee`在堆栈上创建 a 的派生类型——这可以通过工厂函数（当然使用`std::unique_ptr`）来完成，并使构造函数私有：

```
class SomeClass : public Managee{
public:
  static std::unique_ptr<SomeClass> create(){
    return make_unique<SomeClass>();
  }
private:
  SomeClass(){}
  // other ctors
}; 
```

# c++ - TurtleBot ROS 使用 Twist 移动

> ID：13213917
> 
> 赞同：2
> 
> 时间：2012-11-03T22:01:37.580
> 
> 标签：c++, ros

我正在尝试为 TurtleBot 编程，但机器人教程严重缺乏，我无法编写自己的 C++ 工作。我正在尝试使用另一个机器人的教程，只是为了让机器人在按下键时移动。

源教程在[这里](http://www.ros.org/wiki/pr2_controllers/Tutorials/Using%20the%20robot%20base%20controllers%20to%20drive%20the%20robot#CA-1426c28b03091e68ce47656633f2c51ad6982d68_67)找到：，我只是将发布主题修改为“/cmd_vel”

```
#include <iostream>

#include <ros/ros.h>
#include <geometry_msgs/Twist.h>

class RobotDriver
{
private:
  //! The node handle we'll be using
  ros::NodeHandle nh_;
  //! We will be publishing to the "/base_controller/command" topic to issue commands
  ros::Publisher cmd_vel_pub_;

public:
  //! ROS node initialization
  RobotDriver(ros::NodeHandle &nh)
  {
    nh_ = nh;
    //set up the publisher for the cmd_vel topic
    cmd_vel_pub_ = nh_.advertise<geometry_msgs::Twist>("/cmd_vel", 1);
  }

  //! Loop forever while sending drive commands based on keyboard input
  bool driveKeyboard()
  {
    std::cout << "Type a command and then press enter.  "
      "Use '+' to move forward, 'l' to turn left, "
      "'r' to turn right, '.' to exit.\n";

    //we will be sending commands of type "twist"
    geometry_msgs::Twist base_cmd;

    char cmd[50];
    while(nh_.ok()){

      std::cin.getline(cmd, 50);
      if(cmd[0]!='+' && cmd[0]!='l' && cmd[0]!='r' && cmd[0]!='.')
      {
        std::cout << "unknown command:" << cmd << "\n";
        continue;
      }

      base_cmd.linear.x = base_cmd.linear.y = base_cmd.angular.z = 0;   
      //move forward
      if(cmd[0]=='+'){
        base_cmd.linear.x = 0.25;
      } 
      //turn left (yaw) and drive forward at the same time
      else if(cmd[0]=='l'){
        base_cmd.angular.z = 0.75;
        base_cmd.linear.x = 0.25;
      } 
      //turn right (yaw) and drive forward at the same time
      else if(cmd[0]=='r'){
        base_cmd.angular.z = -0.75;
        base_cmd.linear.x = 0.25;
      } 
      //quit
      else if(cmd[0]=='.'){
        break;
      }

      //publish the assembled command
      cmd_vel_pub_.publish(base_cmd);
    }
    return true;
  }

};

int main(int argc, char** argv)
{
  //init the ROS node
  ros::init(argc, argv, "robot_driver");
  ros::NodeHandle nh;

  RobotDriver driver(nh);
  driver.driveKeyboard();
} 
```

代码可以正确编译和运行，但是发出命令时，turtlebot 不会移动。任何想法为什么？

**附加信息：**

当我使用 Turtlebot 随附的笔记本电脑时，消息似乎没有被发送（或没有被传递）。在单独的终端中，我有：

```
turtlebot@turtlebot-0516:~$ sudo service turtlebot start
[sudo] password for turtlebot:
turtlebot start/running, process 1470
turtlebot@turtlebot-0516:~$ rostopic echo /cmd_vel 
```

和

```
turtlebot@turtlebot-0516:~$ rostopic pub /cmd_vel geometry_msgs/Twist '[1.0, 0.0, 0.0]' '[0.0, 0.0, 0.0]'
publishing and latching message. Press ctrl-C to terminate 
```

有信息：

```
turtlebot@turtlebot-0516:~$ rostopic info /cmd_vel
Type: geometry_msgs/Twist

Publishers:
 * /rosttopic_2547_1352476947372 (http://turtlebot-0516:40275/)

Subscribers:
 * /turtlebot_node (http://10.143.7.81:58649/)
 * /rostopic_2278_1352476884936 (http://turtlebot-0516:39291/) 
```

根本没有回声的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-12T18:01:05.730

我知道这篇文章现在已经有一千年的历史了，但我让这段代码运行没有问题。我必须使用 ncurses 库让它运行，而不必在输入每个字符后按回车键。

只是想我会让每个人都知道这确实有效。:PI 推动了 iRobot 使用它进行创作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T22:35:53.187

[为刚入门的人写了一篇关于TurtleBot 的 Hello World](http://marksilliman.com/2014/10/06/turtlebots-missing-hello-world-program/)教程。

对于其他任何为了让这个工作而努力工作的人。

更改`/cmd_vel`为`cmd_vel_mux/input/teleop`

我在用着：

*   靛青
*   海龟机器人2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T15:14:30.627

您可以尝试`sudo service turtlebot stop`停止自动初始设置，然后`roslaunch turtlebot bringup minimal.launch`只运行您需要的最小设置。然后，您可以尝试`roslaunch turtlebot_teleop keyboard_teleop.launch`使用带键盘的遥控操作。

# php - 正则表达式从字符串中去除 Minecraft 颜色代码

> ID：13213919
> 
> 赞同：1
> 
> 时间：2012-11-03T22:02:01.713
> 
> 标签：php, regex

Minecraft 客户端使用以下格式为消息着色：§6金色文本

其中 § 表示颜色代码的开头和后面的字符 ([0-9A-FK-OR])。有没有办法可以使用 preg_replace 从字符串中删除所有这些？

```
(?i)§[0-9A-FK-OR] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T22:37:24.327

Use

```
$s = preg_replace('/\xA7[0-9A-FK-OR]+/i', '', $s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:48:35.093

对某些词不起作用。它剥离很多。尝试这个...

```
$s = preg_replace('/\xA7[0-9A-FK-OR]/i', '', $s); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T10:07:33.703

这会去除颜色代码：

```
$motd = preg_replace('/\xa7./','',$motd); 
```

您可能还想去除 0xc2 字符：

```
$motd = preg_replace('/\xc2|\xa7./','',$motd) 
```

但是由于服务器可以发送任何东西，包括恶意字符串，这会更好：

```
$motd = preg_replace('/\xa7./','',$motd);
$motd = filter_var($motd,FILTER_SANITIZE_SPECIAL_CHARS,FILTER_FLAG_STRIP_LOW|FILTER_FLAG_STRIP_HIGH); 
```

# cordova - Windows 8 App 中的 PhoneGap 访问文件系统

> ID：13213922
> 
> 赞同：1
> 
> 时间：2012-11-03T22:02:29.467
> 
> 标签：cordova, windows-8

我一直在为 IOS 和 Android 开发 PhoneGap 应用程序。我现在将其迁移到 Windows 8 并且在创建和访问目录时遇到问题，并出现以下错误：`Error getting Download/MyNewDirectory directory: ,File Quota Exceeded Error`.

文件系统被毫无问题地检索并且运行`FileSystem.root.fullPath`给了我：`"C:\Users\me\AppData\Local\Packages\84d4fe3a-8719-4d22-9bfd-a0ae9d5c624d_0rbfcm4j9s1vw\LocalState"`. 我尝试手动将“下载/MyNewDirectory”添加到该`\LocalState`目录，但尝试在代码中访问它们时仍然出现相同的错误，`fileSystem.root.getDirectory("Download/MyNewDirectory", { create: true, exclusive: false }, function (directory) {...`

PhoneGap 的文件 API 是否适用于 Windows 8？我宁愿不必重写或填充应用程序的文件访问部分。

编辑：Windows 8 未列为文件支持的平台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T00:37:35.360

查看文章系列“适用于 PhoneGap 开发人员的 Windows 8 应用程序”。这篇特定的文章涵盖了文件访问。

[http://css.dzone.com/articles/windows-8-apps-phonegap-0](http://css.dzone.com/articles/windows-8-apps-phonegap-0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T08:21:28.983

如果您在解决方案资源管理器中双击项目主文件夹中的 App-Manifest 文件，您将看到一个功能选项卡。您需要勾选 Documents，在该选项卡旁边还有另一个选项卡（忘记名称）来设置扩展名 - 您需要配置文件扩展名和标准 mime 类型。如果您没有尝试过，我相信这可能是您问题的根源。文档女士说，需要允许您的应用程序读取文件并将文件写入文档文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T08:14:46.450

对于像我这样正在为此苦苦挣扎的其他人，请添加 weesle 提到的功能，然后尝试使用：

```
Windows.Storage.StorageFile.getFileFromApplicationUriAsync(new Windows.Foundation.Uri(cordova.file.applicationDirectory + 'www/assets/pages/navigation.html')).done(gotControls, fail); 
```

使用该代码是我可以让它与 html 文件一起使用的唯一方法，因为每次使用以下代码时它都会失败（适用于 iOS 和 Android）：

```
window.resolveLocalFileSystemURL(cordova.file.applicationDirectory + "www/assets/pages/en/navigation.html", gotControls, fail); 
```

希望有帮助。

# sql - 如何在行中的列中创建 SQL 查询结果？

> ID：13213923
> 
> 赞同：3
> 
> 时间：2012-11-03T22:02:46.153
> 
> 标签：sql, database, oracle

从下表：

*   store(store_id, ...) {1 ..., 2 ...} 两个商店
*   电影（电影 ID，...）
*   库存（inventory_id，film_id，store_id）
*   租金（rental_id，rental_date，inventory_id，return_date，...）
*   类别（category_id，名称）
*   电影类别（电影 ID，类别 ID）
*   电影（film_id，rental_duration，rental_rate，...）
*   客户（客户 ID，商店 ID，...）

我可以在表上获得如下查询结果吗？

```
CategoryName | "Store 1: avaliable items" | "Store 1: unavaliable items" | "Store 2: avaliable items" | "Store 2: unavaliable items" 
```

请注意，结果表中的存储文件位于不同的列中，而不是位于相同的列中。

我不是在寻找结果查询，而是在寻找如何让它们并排存储 1、存储 2。

案例 SQL 语句可以在这里提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:38:49.797

以以下形式获取您的数据（可能您必须联合多项选择）

```
category item             count
-------- ---------        -----
cat 1    store1-avail     a1
cat 1    store1-unavail   b1
cat 1    store2-avail     c1
cat 1    store2-unavail   d1
cat 2    store1-avail     a2
cat 2    store1-unavail   b2 
```

然后使用[pivot 函数](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)将其转换为您想要的布局

```
category  store1-avail store1-unavail store2-avail ...
--------- ------------ -------------- ------------
cat 1     a1           b1             c1
cat 2     a2           b2             c2
... 
```

# java - Android java如何让它从预定的字符串列表中选择一个随机字符串

> ID：13213924
> 
> 赞同：-1
> 
> 时间：2012-11-03T22:02:58.150
> 
> 标签：java, android

> **可能重复：**
> [字符串数组列表中的随机字符串](https://stackoverflow.com/questions/6726963/random-string-from-string-array-list)

我怎样才能让它在我可以按下一个按钮的地方，它从我已经设置的一长串其他字符串中随机显示一个刺（单词）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T22:05:14.983

```
List<String> list = new ArrayList<String>();
list.add(...);
list.add(...);
list.add(...);
Random rand = new Random();
String random = list.get(rand.nextInt(list.size())); 
```

或者：

```
Collections.shuffle(list);
String random = list.get(0); 
```

# php - 无法使用 tmhOAuth php 库从 Yelp API 获得评论。我没有错误

> ID：13213925
> 
> 赞同：2
> 
> 时间：2012-11-03T22:03:06.143
> 
> 标签：php, authentication, oauth, yelp

我正在使用 Matt Harris 的 tmhOAuth 库向 Yelp 的 API 生成经过身份验证的请求。我已经在使用同一个库来访问 Twitter API，它运行良好。

我已经注册了 Yelp Developer API 凭证并正在使用它们。

我设置了 tmhOAuth 来发出如下请求：

[http://api.yelp.com/v2/search?limit=20&location=Atlanta&term=food](http://api.yelp.com/v2/search?limit=20&location=Atlanta&term=food)

我的预感不知何故我的身份验证凭据没有正确输出，即使你会认为我会从 Yelp 那里得到某种错误。例如，我将我的使用者密钥和秘密以及我的用户令牌和秘密更改为随机字符，但是当我使用这些伪造的密钥发出请求时，我得到与下面相同的响应并且仍然没有身份验证错误消息。根本不值一提！

我确信其他人在第一次设置对 Yelp API 的调用时可能会遇到类似的响应并告诉我一些明显我做错了的事情。任何帮助是极大的赞赏。

我从 Yelp 得到的回复是：

```
Array ( 
   [headers] => Array ( 
     [date] => Sat, 03 Nov 2012 21:36:15 GMT 
     [server] => Apache
     [x_node] => wsgi, web31,  api_com 
     [content_length] => 0 
     [cache_control] => max-age=0, must-revalidate, no-cache, no-store, private 
     [expires] =>  Sat, 03 Nov 2012 21:36:15 GMT
     [pragma] => no-cache [set_cookie] => bse=0aff211810c8d90f05c4e8438a3e0b7b; Domain=.yelp.com; Path=/; HttpOnly 
     [location] => http://api.yelp.com/v2/search?limit=20&location=Atlanta&term=food  
     [vary] => User-Agent 
     [connection] => close 
     [content_type] => text/html; charset=UTF-8 
     [x_mode] => rw 
     [x_proxied] =>  lb2 
   ) 
   [code] => 301 
   [response] => 
   [info] => Array ( 
     [url] => https://api.yelp.com/v2/search?limit=20&location=Atlanta&term=food 
     [content_type] => text/html; charset=UTF-8 
     [http_code] => 301 
     [header_size] => 534 
     [request_size] => 439 
     [filetime] => -1 
     [ssl_verify_result] => 0 
     [redirect_count] => 0 
     [total_time] => 0.653941 
     [namelookup_time] => 0.000981 
     [connect_time] => 0.073796 
     [pretransfer_time] => 0.297663 
     [size_upload] => 0 
     [size_download] => 0 
     [speed_download] => 0 
     [speed_upload] => 0  
     [download_content_length] => 0 
     [upload_content_length] => 0 
     [starttransfer_time] => 0.653791 
     [redirect_time] => 0 
     [certinfo] => Array ( ) 
     [request_header] => GET 

       /v2/search?limit=20&location=Atlanta&term=food 
       HTTP/1.1 User-Agent: themattharris' HTTP 
       Client Host: api.yelp.com Accept: */* Authorization: OAuth 
       oauth_consumer_key="****************", 
       oauth_nonce="*******************", 
       oauth_signature="***************************", 
       oauth_signature_method="HMAC-SHA1", 
       oauth_timestamp="1351978544", 
       oauth_token="******************", 
       oauth_version="1.0" 
     ) 
   ) 
```

对于这篇文章，我显然混淆了上面的实际密钥、随机数和签名字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:23:43.843

伟大的。在使用 StackOverflow 多年后，我通过简单地阅读其他人的问题的答案，在这里发布了第一个真正的真正问题，我不得不吃不起的馅饼并自己回答这个问题：

首先，我上面列出的大部分响应数组都是由 oAuth 库本身构建的。来自 Yelp 的实际“响应”存储在 [response] 数组项中，它是空的。

我问自己，“网站什么时候没有回应？” 如果通过响应我们的意思是没有页面内容，那么只有当它在 http 标头中向浏览器发送一些指令时。

当然，Yelp HAD 做出了回应。它想将我从 https:// url 重定向到 http:// url，因此它以响应代码 301 进行响应，它告诉*浏览器*在不同的 url 处重试，但我使用的是 cUrl 并且 curl 没有重定向自动地。它只是将初始服务器响应传递给 oAuth 库，该库尽职地报告 301。

我之前尝试过 http:// url，但这样做的方法是将参数作为数组项'use_https'=> false 传递给 oAuth 库。我错误地将 'false' 作为字符串，所以它评估为 TRUE 并继续使用 https:// 并且 301 重定向仍然被发送。

当我开始使用'use_https' => false 的那一刻，我心爱的 Yelp 评论就像来自天堂的甘露一样充满了屏幕。

但我希望，也许我可笑的痛苦会帮助其他一些可怜的人。

# database - 如何确定数据库中的索引类型？

> ID：13213927
> 
> 赞同：2
> 
> 时间：2012-11-03T22:03:18.707
> 
> 标签：database, postgresql

我现在正在摆弄 PostgreSQL。

我可以看到用户索引使用`SELECT * FROM pg_stat_user_indexes`

但是，结果似乎没有提供有关每个索引类型的任何信息，例如“B-tree”、“R-tree”、“Hash”和“GiST”。

任何人都知道如何找出每个索引的类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T22:34:05.373

`pg_stat_user_indexes`存储统计信息，而不是一般的索引数据。

用这个：

```
SELECT  i.indexname, a.amname
FROM    pg_indexes i
JOIN    pg_class c
ON      c.relname = i.indexname
JOIN    pg_am a
ON      a.oid = c.relam 
WHERE   i.schemaname = 'public' -- or whatever your schema is 
```

# javascript - 如何在 JavaScript 中创建一个类？

> ID：13213928
> 
> 赞同：2
> 
> 时间：2012-11-03T22:03:33.080
> 
> 标签：javascript, json

在 JavaScript 中有很多方法可以做同样的事情。然而，我已经掌握了一些方法，坦率地说，有些方法我不明白。谁能帮我澄清一些事情？（我首先在 PHP 中学习了 OOP。）

所以可以像这样制作一个类：

```
var object = new class(constructparams) {
    var private_members; // Can be accessed from within the code inside this definition only.
    this.public_members; // Can be accessed from everywhere.

    var private_functions = function() {}
    this.public_functions = function() {}
}

object.prototype.semi_public_members = function() {
    // Will be public, but can only access public members and methods.
    // E. g. private_members; is not available here.
} 
```

到目前为止，这一切都正确吗？

然后有人喜欢自执行匿名函数的方法来创建命名空间。当你在上面做同样的事情时，这有什么意义，提供一个命名空间？

最后你有我不明白的对象文字符号。

```
var object = { // Something strange in here } 
```

里面发生了什么？是 JSON 吗？它是如何使用的，我该如何使用它。使用这种方式而不是使用我描述的方法有什么好处？为什么你要原型而不是第一次正确地制作课程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T23:31:06.430

通过示例解释*构造对象*中不同事物的行为：

```
// Defined as a variable from an anonymous function
// so that there is scope closure over variables
// shared across all instances and the prototype.
// If this isn't important, you don't need to close
// scope around it, so define directly
var ConstructedObject = (function constructorCreator () {
    // Define any variables/methods to be shared across
    // all instances but not polluting the namespace
    var sharedVariable = 'foo';

    // Next the actual constructor
    function ConstructedObject () {
        // Variables here are normally used to help
        // each instance and will be kept in memory as
        // long as the instance exists
        var instanceVariable = 'bar';
        // instance-specific properties get defined
        // using the "this" keyword, these are the
        // properties expected to be changed across
        // each different instance
        this.instanceProperty = true;
        this.instanceMethod = function () { return instanceVariable; };
        this.changeInstanceVar = function () { instanceVariable = 'foo'; };
            // you do have access to the shared
            // variables here if you need them.
    }
    // After the constructor, you set up the
    // prototype, if any. This is an object of shared
    // properties and methods to be inherited by every
    // instance made by the constructor, and it also
    // inherits the prototype's prototype, too.
    // Lets use a literal object for simplicity.
    ConstructedObject.prototype = {
        // Accessing the instance to which a method
        // applies is done using the "this" keyword,
        // similar to in the constructor
        sharedMethod : function () { return [sharedVariable, this.instanceMethod(),this.instanceProperty]; },
        changeSharedVar : function () { sharedVariable = 'bar'; }
        // properties may also be defined
    };
    // Finally, the constructor is returned so it
    // can be kept alive outside of the anonymous
    // function used to create it
    return ConstructedObject;
// and the anonymous function is called to execute
// what we've done so far
})(); 
```

执行上述代码后，您将拥有一个构造函数，该构造函数创建具有实例特定变量和共享变量的对象。现在让我们通过创建两个实例并在一些更改前后比较它们来看看它们的行为。

```
// First create the two instances
var myObjA = new ConstructedObject(),
    myObjB = new ConstructedObject();
// Now compare them, the sharedMethod method we
// used in the prototype offers an easy way to
// do this
console.log( myObjA.sharedMethod(), myObjB.sharedMethod() );
// ["foo", "bar", true] ["foo", "bar", true]
// Next lets change the different variables in
// myObjB so we can see what happens, again the
// change* methods defined before let us do this
// easily
myObjB.changeInstanceVar();
myObjB.changeSharedVar();
// For completeness, lets also change the property
// on myObjB.
myObjB.instanceProperty = false;
// Now when we compare them again, we see that our
// changes to the myObjB instance have only changed
// the shared variables of myObjA
console.log( myObjA.sharedMethod(), myObjB.sharedMethod() );
// ["bar", "bar", true] ["bar", "foo", false] 
```

这是两个记录的语句一起，以便于查看

```
//     myObjA               myObjB
["foo", "bar", true] ["foo", "bar", true]
["bar", "bar", true] ["bar", "foo", false] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T22:21:03.997

我认为有些概念似乎丢失了，但我会尽可能多地回答。

> 所以可以像这样制作一个课程......到目前为止这一切都正确吗？

它很接近，但并不完全正确。您不需要`new`创建构造函数，仅在创建“类”的新实例时才需要它。

```
function Klass() { ... } // capitalized name as convention for constructors
var myKlass = new Klass(); //<-- Need "new" here 
```

公共方法可以附加到实例或原型。当您将它附加到原型时，该方法将在所有实例之间共享，从而节省一些内存。

```
Klass.prototype = {
  publicSharedMethod: function() {
    var self = this;
  }
} 
```

> 然后有人喜欢自动执行的匿名函数……那有什么意义……

模块模式（或自执行功能）方法有点不同，因为您通常不会处理原型，尽管您可以。它只是一个返回带有属性和方法的文字对象的函数，但是当您不需要该对象的实例时，我主要将它用于单例：

```
var Singleton = (function() {
  var private = 'foo';
  var public = 'baz';
  var publicMethod = function() { ... }
  // Expose public methods and properties
  return {
    public: public
    publicMethod: publicMethod
  }
}()); 
```

> 最后你有我不明白的对象文字符号。

这只是 JavaScript 中的一个常规对象，类似于 PHP 所称的“关联数组”。文字对象语法是 JSON 的基础，但 JSON 在格式方面有更多限制；JavaScript 更宽容，例如，您可以使用不带引号的属性和方法。

> 为什么你要原型而不是第一次正确地制作课程？

这里的重点是要理解 JavaScript*不是*传统的面向对象语言，所以没有类，你不应该考虑类。但是原型非常强大，我会说比类更强大。网上有很多关于如何使用原型复制类的示例，但反之则不然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T22:12:11.020

不，这是不正确的。构造函数应该与对象的创建分开：

```
function myClass(constructparam1) {
  this.public_member = constructparam1; // Can be accessed from everywhere.
} 
```

这些方法应该在构造函数的原型中，而不是实例中：

```
myClass.prototype.semi_public_members = function() {
  // Will be public
} 
```

使用关键字调用构造函数`new`来创建实例：

```
var obj = new myClass(1337); 
```

构造函数内部的局部变量只能在该函数内部访问。如果你的类中没有局部变量，你需要一个围绕它的函数来创建一个闭包，以便原型中的方法可以访问变量：

```
var myClass = (function(){

  var local_variable;

  function constructor(constructparam1) {
    this.public_member = constructparam1; // Can be accessed from everywhere.
  }

  constructor.prototype.semi_public_members = function() {
    // Will be public
    alert(local_variable); // can access private variables
  }

  return constructor;
})(); 
```

对象文字只是一次性创建对象的一种简单但有限的方法。它们没有原型，因此如果您希望它们具有方法，则必须将它们分配给属性：

```
var obj = {

  public_member: 1337,

  semi_public_members: function(){
    alert(this.public_member);
  }

}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T22:13:21.527

```
var object = new function () {
    //
}

var myObject = new object(); 
```

# javascript - jquery 多功能计时和重复

> ID：13213937
> 
> 赞同：0
> 
> 时间：2012-11-03T22:04:47.973
> 
> 标签：javascript, jquery, function, timing

我用 jquery 创建了一些电影；它由代表电影每个场景的多个函数组成。有些场景必须比其他场景运行更长的时间。我无法创建整个电影的循环。我尝试了几种设置 setInterval 的方法，但它们似乎都失败了。使事情复杂化（至少对我而言）这是在幻灯片放映中，理想情况下它会在完成时触发“下一步”按钮。

随意敲击我使用的策略，因为每个场景的 setTimeout 是我能弄清楚如何让每个函数在下一个运行足够长的时间后运行的唯一方法。我无法弄清楚如何调用每个函数以及场景应该运行的时间与我当前在前一个函数完成后调用下一个函数的策略。

谢谢指导

我想我需要 javascript 来计算总时间并在 setTimeout 中调用 atrAnime() 的值，但我似乎无法让它计算并传回。

这就是我所拥有的：

```
$(document).ready(function(){

    atrAnime(2000);

});
function atrAnime(dur){
    first();
    setTimeout(second, dur);
    setTimeout(third, dur += 2000);
    setTimeout(forth, dur += 2000);
    setTimeout(fifth, dur += 2000);
    setTimeout(sixth, dur += 6000);
    setTimeout(seventh, dur += 2000);
    setTimeout(eighth, dur += 2000);
    setTimeout(ninth, dur += 2000);
    setTimeout(tenth, dur += 2000);
    setTimeout(end, dur += 3000);

}; 
```

一些场景示例：

```
function first(dur){

    $('.pcba')
        .css({
            left: '150px'
            })
        .show();
    $('.pcb_cad')
        .css({
            left: '275px',
            top: '50px'
            })
        .show();
}
function second(dur){
        $('.pcba').fadeOut();
        $('.arrows')
        .css({
            left: '275px',
            top: '50px'
            })
        .fadeIn();
        $('.heatGenComps')
            .css({
                left: '325px',
                top: '20px'
                })
        .fadeIn();

} 
```

**编辑** 我的新贫民区解决方案在 atrAnime() 调用中的最后一个函数为：

```
setTimeout(caller, dur += 2000);

}; 
```

然后是另一个功能

```
function caller(){
    atrAnime(2000);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:12:16.377

您在动画中使用了一些函数，这些函数在它们的动作完成后实际上提供了一个回调方法。例如，当元素完全显示/隐藏时， `fadeIn`/函数有一个“onComplete”回调 -`fadeOut`

```
$("#elem").fadeOut(function(){
  alert('element has faded out!');
}); 
```

您可以利用这些回调函数，让它们都调用一个管理执行顺序的中心函数。每个回调都会触发下一个序列。`show()`和函数都`fadeIn()`提供此回调，如文档中所述。

*   [`show()`](http://api.jquery.com/show/)
*   [`fadeIn()`](http://api.jquery.com/fadeIn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:15:38.697

将所有动画嵌套在回调中不是更好吗？依靠 setTimeout 感觉不对:)。我的意思是使用相关动画的回调，因此下一阶段的动画只会在前一阶段完成后触发。类似于以下内容：

```
$("firstElement").slideDown(500, function () { 
    $("secondElement").slideDown(500, function () { 
        $("thirdElement").slideDown(500, function () { 
            //etc
        });         
    });  
}); 
```

# ruby - 用户定义的类 Ruby 错误

> ID：13213939
> 
> 赞同：0
> 
> 时间：2012-11-03T22:04:56.907
> 
> 标签：ruby, class

在我的 ruby​​ 类中，我必须创建一个包含许多变量的用户定义类。到目前为止，我已经创建了一个与吉他相关的课程，并且我自己查看了一段时间的代码，但无法弄清楚为什么我在第 52 行/当我尝试打印出示例来测试课程时出现错误

```
# Guitar
# Source code in /classes/person.rb

# Guitar class with instance variables @name, @brand, @type @strings and
# method take_strings.

class Guitar

  # initialize method is called when user invokes Guitar.new.
  def initialize(the_name, the_brand, the_type, the_strings)
    @name = the_name
    @brand = the_brand
    @type = the_type
    @strings = the_strings
  end

  # Define getters.
  def name
    return @name
  end

  def brand
    return @brand
  end

  def type
    return @type

  def strings
    return @strings
  end
.
  def strings=(value)
    @strings = value
  end

  def to_s
    return "#{name}; #{brand}; #{type}; #{strings}."
  end

end

guitars = [ ]

guitars << Guitar.new("Stratocaster", "Fender", "Solid Body", 6)
guitars << Guitar.new("Les Paul", "Gibson", "Solid Body", 6)
guitars << Guitar.new("White Falcon", "Gretsch", "Semi-Hollow, 6)

# Print all guitars
guitars.each do |g|
  print g, "\n"
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T22:12:13.280

这里有几件事：

*   在第 26 行，您`end`的`def type`方法没有
*   在第 32 行，您在源文件中有一个句点；这不会解析，并且会导致问题。
*   在第 49 行，您在后面省略了结束引号`Semi-Hollow`

# ruby-on-rails - Rails 路由：将路由上的请求限制为仅一种格式

> ID：13213940
> 
> 赞同：1
> 
> 时间：2012-11-03T22:05:04.220
> 
> 标签：ruby-on-rails, routing

我有以下路线：

```
resources :tags do
  collection do
    get 'autocomplete', :constraints => { :format => 'js' }
  end
end 
```

我希望这仅响应 JS 请求（仅用于 jQuery 自动完成），对于常规 HTML 请求，我认为它应该是 404 响应，或者至少是重定向。

相反，所有请求都通过路由转换为 JS 格式，因此一个 HTML 请求得到一个 json 哈希。

这不是绝对重要的，但如果我能明确地限制这条路线以便不允许对它的 HTML 请求，我会更高兴。那应该怎么处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T22:12:40.210

在`TagsController#autocomplete`中，执行以下操作：

```
respond_to do |format|
  # format.html { redirect_to some_path } # enable if you want to handle html requests as well
  format.js
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T22:44:33.610

你可以试试这个（未测试）：

```
get 'autocomplete', :constraints => { :format => 'js' }, :defaults => {:format => nil} 
```

但是，@prusswan 的回答是合乎逻辑的方式，而且更明确。保持控制器精简是一件好事，但保持它们的可读性更好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-17T07:50:25.637

你可以试试这个

`scope format: true, constraints: { format: 'html' } do get '/home' => 'home#index' end`

# ios - iOS：如何在同一张地图上添加不同颜色的地图叠加层？

> ID：13213945
> 
> 赞同：0
> 
> 时间：2012-11-03T22:05:35.490
> 
> 标签：ios, android-mapview, polygon

我有一个基于地图的应用程序，它目前在 MKOverlayView 中使用 MKPolygon 对象来显示各种建筑物 - 效果很好。

现在我希望为不同的建筑类型添加不同的颜色，那么如何区分多边形呢？我应该将 MKPolygon 子类化，然后在自定义类中添加我自己的属性吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:40:42.973

这可能对您检查有用。[Hazard Maps](http://developer.apple.com/library/ios/#samplecode/HazardMap/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010049-Intro-DontLinkElementID_2)是 Apple 示例代码，它使用不同的颜色`MKOverlayView`来制作热图。它仅使用正方形，但我相信您可以将其修改为使用`MKPolygon`.

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:36:33.303

所以我发现 MKPolygon 类有一个 NSString 类型的 title 属性。将此设置为任何值，然后您可以使用各种 if 语句来将不同的颜色应用于不同的多边形。

# mysql - 连接具有不同行和多个选择语句的两个表

> ID：13213948
> 
> 赞同：0
> 
> 时间：2012-11-03T22:05:49.537
> 
> 标签：mysql, sql, database, join

我有一个结果

```
select D.name as username, E.maxViews AS EmaxViews from (select A.video_id, A.uploaded_by AS username,max(B.numViews) AS maxViews,count(*) AS C from Videos A, (select video,count(*) AS numViews from Views GROUP BY video) B where A.video_id=B.video GROUP BY A.uploaded_by) E, Users D where D.username=E.username 
```

这给了我列`username,EmaxViews`并给了我 93 行

我有另一个表，`Users (username,date_registered,name)`其中有 100 个查询

我想将上述两个查询作为一个表加入

```
username, date_registered, EmaxViews 
```

我试过这样

```
select name, date_registered,G.EmaxViews from Users F LEFT OUTER JOIN (select D.name as username, E.maxViews AS EmaxViews from (select A.video_id, A.uploaded_by AS username,max(B.numViews) AS maxViews,count(*) AS C from Videos A, (select video,count(*) AS numViews from Views GROUP BY video) B where A.video_id=B.video GROUP BY A.uploaded_by) E, Users D where D.username=E.username) G ON F.username=G.username ORDER BY F.date_registered; 
```

现在我得到了 100 行以及 name 和 date_registered 的正确值，但我得到了所有行的 EmaxViews NULL ..

我的查询有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:21:26.847

```
SELECT  u.name AS username,
        u.date_registered,
        COALESCE
                (
                (
                SELECT  COUNT(*) cnt
                FROM    video v
                JOIN    views vw
                ON      vw.video = v.video_id
                WHERE   v.uploaded_by = u.name
                GROUP BY
                        v.video_id
                ORDER BY
                        cnt DESC
                LIMIT 1
                ),
                0
                ) AS EmaxViews
FROM    users u 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:39:12.003

不..对不起..我在第二个查询中给出了错误的列名..我解决了..谢谢

# objective-c - 在 UIBezier 路径的 addLineToPoint 之后运行动画

> ID：13213949
> 
> 赞同：1
> 
> 时间：2012-11-03T22:05:56.603
> 
> 标签：objective-c, ios, xcode

我试图强迫一个动画等待另一个，但没有运气。

```
UIBezierPath *path = [UIBezierPath bezierPath]; 
```

这就是我想要做的：

```
[path addLineToPoint: point1]; 
```

完成后调用：

```
imageview1.transform = CGAffineTransformMakeScale(1.5f, 1.5f); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:20:57.060

虽然我仍然不清楚您的需求，但您可以在第一个动画完成***后调用一个动画：***

```
[UIView animateWithDuration:1.0f
                        delay:0.0f
                      options:UIViewAnimationOptionCurveLinear
                   animations:^(void){
                     // Add in your first chunk of animated code.
                   }
                   completion:^(BOOL finished) {
                     [UIView animateWithDuration:1.0f
                                           delay:0.0f
                                         options:UIViewAnimationOptionCurveLinear
                                      animations:^(void){
                                        // Add in your second chunk of animated code.
                                      }
                                      completion:^(BOOL finished) {

                                      }];
                   }]; 
```

希望有帮助！

# matplotlib - 可视化大型数据系列

> ID：13213951
> 
> 赞同：0
> 
> 时间：2012-11-03T22:06:21.707
> 
> 标签：matplotlib, visualization, matlab-figure

我有一个看似简单的问题，但一个简单的解决方案正在暗示我。我有一个非常大的系列（数万或数十万个点），我只需要以不同的缩放级别对其进行可视化，但通常会很好地缩小。基本上，我想在 Matlab 或 Pyplot 之类的工具中绘制它，但知道每个像素不能代表映射到它的潜在数百个点，我想同时查看所有像素的最小值和最大值映射到像素的数组条目，这样我就可以大致了解发生了什么。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T18:59:17.743

试试[hexbin](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.hexbin)。通过设置`reduce_C_function`我认为你可以得到你想要的。前任：

```
import matplotlib.pyplot as plt
import numpy as np
plt.hexbin(x,y,C=C, reduce_C_function=np.max) # C = f(x,y) 
```

会给你一个六边形热图，其中像素中的颜色是 bin 中的最大值。

如果您只想在一个方向上装箱，请参阅[此](https://stackoverflow.com/a/13197330/380231)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T22:43:54.580

您可能想尝试的第一个选项是 Gephi- [https://gephi.org/](https://gephi.org/)

这是另一种选择，尽管我不太确定它会起作用。不看数据很难说。

尝试访问此链接 - [http://bl.ocks.org/3887118](http://bl.ocks.org/3887118)。您是否看到带有所有值的 data.tsv 页面底部？*如果*您可以将数据保存为类似于此，那么上面的 HTML 代码应该能够在该链接中显示的散点图示例中构建您的数据。否则，请尝试访问[此](https://github.com/mbostock/d3/wiki/Gallery)链接以将您的数据塑造成更合适的网页。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T18:43:29.463

有一组名为[TimeSearcher 1--3](http://www.cs.umd.edu/hcil/timesearcher/)的研究工具提供了一些如何处理大型时间序列数据集的示例。下面是来自 TimeSearcher 2 和 3 的一些示例图像。

![时间搜索者 2](../Images/2f42d79806db3a401f279d025cd1b012.png)

![时间搜索者 3](../Images/0f216ff1cd1a896c5189c6432f2cbeb6.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T19:36:26.650

我意识到`plot()`MATLAB 中的简单实际上或多或少地给了我想要的东西。缩小时，它将映射到像素列的所有数据点呈现为集合内从最小值到最大值的垂直线段，以免模糊函数的实际行为。我曾经`area()`增加对比度。

# sql - SqlDataReader 不会读取所有记录

> ID：13213956
> 
> 赞同：1
> 
> 时间：2012-11-03T22:06:43.373
> 
> 标签：sql, vb.net, stored-procedures, sqldatareader, datareader

我在最简单的一段 VB.NET 代码中有一个非常奇怪的问题：

```
Public Sub ReadIDs(i_oDataReader As Data.SqlClient.SqlDataReader)

    m_aFullIDList = New Generic.List(Of Integer)

    While i_oDataReader.Read
        If i_oDataReader.IsDBNull(0) = False Then
            m_aFullIDList.Add(i_oDataReader.GetInt32(0))
        End If
    End While

    m_iTotalNumberOfRecords = m_aFullIDList.Count

End Sub 
```

基本上，该过程接受 DataReader 作为参数，遍历阅读器中的所有记录，将它们添加到整数的通用列表中。

当阅读器后面的 SQL 存储过程返回相对少量的记录（低于 100K）时，阅读器读取所有记录并且最终计数与结果集匹配。但是当记录数超过 100 万条时，结果变得不可预测。

例如，当我知道 SP 返回 150 万条记录时 - 通用列表中的最终记录数可能是 200K、500K 等。

知道是什么原因造成的以及如何解决吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:26:39.650

使用允许您指定 a的[`ExecuteReader`重载](http://msdn.microsoft.com/en-us/library/y6wy5a0f.aspx)并按照此 MSDN 主题中的建议`CommandBehavior`传递可能会有所帮助：`CommandBehavior.SequentialAccess`

[检索大数据 (ADO.NET)](http://msdn.microsoft.com/en-us/library/87z0hy49.aspx)。

# c - C 适当使用全局变量

> ID：13213958
> 
> 赞同：2
> 
> 时间：2012-11-03T22:06:50.960
> 
> 标签：c, shell, arguments, global-variables, main

我正在用 C 语言构建一个 minishell，并且遇到了一个障碍，似乎可以通过使用全局变量（准确地说是 3 个）来轻松修复它。我认为全局变量是必要的原因是，替代方法是将这些变量传递给我程序中的几乎每个函数。

变量是 mainargc、mainargv 和 shiftMArgV。前两个分别是参数的数量和传递给 main 的参数列表。变量shiftedMArgV 是参数列表，但它可能已被移位。我正在尝试创建内置函数 shift 和 unshift，并使 shiftMArgV 指向不同的参数。

那么，让这些全球性的东西是愚蠢的吗？否则我将不得不修改大量的代码，而且我不确定通过使它们全球化我会失去任何东西。

如果我确实将它们设为全局，那么从主头文件中这样做会很愚蠢吗？

感谢大家的帮助，如果您需要任何澄清，请询问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T22:29:24.190

作为全局变量的替代方案，请考虑“全局函数”：

```
extern int    msh_mainArgC(void);
extern char **msh_mainArgV(void);
extern char **msh_shiftedArgV(void); 
```

这些函数的实现是微不足道的，但它允许您控制对内存的访问。如果你需要做一些花哨的事情，你可以改变函数的实现。（我选择将 C 和 V 大写以使差异更加明显；当 8-12 字母名称的最后一个字符不同时，很难发现差异。）

会有一个定义这些函数的实现文件。在该文件中，将有存储相关信息的静态变量，以及用于设置和以其他方式操作变量的函数。原则上，如果您使用足够多的`const`限定符，您可以确保调用代码不能修改数据，除非通过设计用于这样做的函数（或使用强制转换来删除 const-ness）。

这对你来说是否值得值得商榷。但它可能是。它是一种更接近“面向对象”的操作方式。这是一种考虑然后丢弃的替代方案，而不是不考虑的事情。

请注意，使用这些函数的子系统可能有一个函数来收集全局值，然后将这些值传递给它的从属函数。这使下属不必知道值的来源；只需正确操作即可。如果有全局变量，您必须担心别名 - 是一个函数传递值（全局变量的副本），但它是否也访问全局变量。使用这些功能，您不必以同样的方式担心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T22:18:42.330

我想说这并不愚蠢，但你应该谨慎行事。

通常避免使用全局变量的原因不是它们永远不应该被使用，而是它们的使用导致人们经常导致程序员崩溃和烧毁。通过经验，人们可以了解何时是正确的时间和何时是错误的时间之间的区别。

*如果您对您要解决的问题*进行了深入思考，并考虑了您为解决此问题而编写的代码，并且还考虑了该代码的未来（即您是否会损害可维护性）并认为全局是不可避免的或更好的表示编码解决方案，那么您应该使用全局。

稍后，您可能会崩溃和燃烧，但这种经历将帮助您以后辨别可能是更好的选择。相反，如果您觉得不使用全局变量可能会导致崩溃和烧毁，那么您之前的经验就是说您应该使用它们。你应该相信这种直觉。

Dijkstra 有[一篇论文](http://www.u.arizona.edu/~rubinson/copyright_violations/Go_To_Considered_Harmful.html)讨论了该`goto`声明可能造成的危害，但在我看来，他的讨论也解释了我们在使用全局变量时遇到的一些困难。它可能值得一读。

[这个答案](https://stackoverflow.com/questions/176118/when-is-it-ok-to-use-a-global-variable-in-c?rq=1)和[这个答案](https://stackoverflow.com/questions/2774468/please-describe-your-struggles-with-minimizing-use-of-global-variables?rq=1)也可能有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T00:51:54.243

对于 shell，你有比这更多的状态。您拥有重新映射的文件描述符的状态（出于各种原因需要对其进行跟踪）、`trap`配置、`set`选项、环境和 shell 变量，...

一般来说，全局变量是错误的解决方案。相反，所有状态都应该保存在某种上下文结构中，一个指向它的指针到处传递。这是一个很好的程序设计，通常它允许您在同一个进程中运行相同代码的多个实例（例如多个解释器、多个视频解码器等）。

话虽如此，shell是一个非常特殊的情况，因为它也处理**了很多**您无法将全局状态保存在一个结构中：信号处置、文件描述符和映射、子进程、进程组、控制终端等。可以使用额外的层来抽象其中的很多内容，以便您可以模拟所需的行为，同时保持可能存在于单个进程中的多个干净的上下文，但这比编写传统的 shell 要困难得多。因此，我可能会给自己一些余地来使用全局变量“懒惰地”编写你的 shell。但是，如果这是一个学习练习，请尝试在每次引入全局变量或状态时仔细识别，为什么要这样做，以及如何在没有全局状态的情况下以不同的方式实现程序。这对您将来非常有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T22:12:49.463

全局变量是可以的，只要它们在逻辑上是真正的全局变量，而不仅仅是让你的生活更轻松的手段。例如，全局变量可以描述程序执行的环境，或者换句话说，与应用程序的系统级别相关的属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-03T22:15:23.280

我曾经使用过的几乎所有复杂软件都有一组明确定义的全局变量。这没什么不好。它们的范围从少数到大约十几个。在后一种情况下，它们通常按逻辑分组在结构中。

全局变量通常作为外部变量在头文件中公开，然后在源文件中定义。请记住，全局变量在线程之间共享，因此必须受到保护，除非使用线程本地存储声明它们更有意义。

# windows - 获取本地“我的文档”文件夹路径

> ID：13213959
> 
> 赞同：1
> 
> 时间：2012-11-03T22:06:54.477
> 
> 标签：windows, winapi

在我的 C++/WinAPI 应用程序中，我使用以下代码获取 My Documents 文件夹路径：

```
wchar_t path[MAX_PATH];
SHGetFolderPathW(NULL,CSIDL_PERSONAL,NULL,SHGFP_TYPE_CURRENT,path); 
```

其中一位用户在连接到他公司网络的个人电脑上运行我的程序。他在网络上有我的文档文件夹。所以我的代码返回类似 \\paq\user.name$\My Documents 虽然他说他有我的文档的本地副本。问题是，当他“交换 VPN”时，在线“我的文档”不可用，我的程序崩溃，系统错误代码 64“指定的网络名称不再可用”（它尝试写入在我的在线打开的文件中）文档文件夹）。

如何始终使用 C++/WinAPI 获取本地“我的文档”文件夹路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T22:57:34.630

`CSIDL_PERSONAL` is the only official "My Documents" folder. If he redirected that to a network folder, then even Windows would not be able to access "My Documents" when off the VPN. Unlike the various AppData folders (`CSIDL_APPDATA`, `CSIDL_COMMON_APPDATA`, and `CSIDL_LOCAL_APPDATA`), Windows has no concept of separate local and remote "My Documents" folders, so whatever local folder he has would have had to been created manually as a normal folder, and thus the Shell API would not know about it. The only way your app will find it is to ask him where it is.

# c++ - 将两个变体与 boost static_visitor 进行比较

> ID：13213963
> 
> 赞同：3
> 
> 时间：2012-11-03T22:07:21.697
> 
> 标签：c++, boost, boost-variant

几天前我开始使用 boost 库，所以我的问题可能是微不足道的。我想将两个相同类型的变体与 static_visitor 进行比较。我尝试了以下，但它不想编译。

```
struct compare:public boost::static_visitor<bool>
{
    bool operator()(int& a, int& b) const
    {
        return a<b;
    }

    bool operator()(double& a, double& b) const
    {
        return a<b;
    }
};
int main()
{
    boost::variant<double, int > v1, v2;
    v1 = 3.14;
    v2 = 5.25;
    compare vis;
    bool b = boost::apply_visitor(vis, v1,v2);
    cout<<b;
    return 0;
} 
```

感谢您的任何帮助或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:15:19.110

llonesmiz 在评论中告诉我答案，但它消失了。如果有人有类似的问题，它可能会有所帮助：我必须在不同的运算符中处理 int 和 double 的每种组合。实现它的最简单方法是使用模板，如下所示：

```
struct my_less : boost::static_visitor<bool>
{
   template<typename T, typename U>
   bool operator()(T a, U b) const
   {
       return a<b;
   }   

}; 
```

# java - 我无法以我的方式对矩阵进行排序

> ID：13213964
> 
> 赞同：1
> 
> 时间：2012-11-03T22:07:26.417
> 
> 标签：java, sorting, matrix

我想对矩阵“例如 6 行 x 6 列”进行排序，就像这样：

```
0 | 15 | 0 | 06 | 0 | 04
1 | 19 | 1 | 99 | 1 | 86
2 | 55 | 2 | 54 | 2 | 12
3 | 82 | 3 | 73 | 3 | 23
4 | 66 | 4 | 95 | 4 | 11
5 | 43 | 5 | 93 | 5 | 13 
```

我们看到第 1 列和第 3 列和第 5 列是相同的。这就是我需要的。我试图以*降序方式*对第 2 列和第 4 列和第 6 列进行排序以获得此结果：

```
3 | 82 | 1 | 99 | 1 | 86
4 | 66 | 4 | 95 | 3 | 23
2 | 55 | 5 | 93 | 5 | 13
5 | 43 | 3 | 73 | 2 | 12
1 | 19 | 2 | 54 | 4 | 11
0 | 15 | 0 | 06 | 0 | 04 
```

当我移动第二列的最大值时，我也将他的号码*或他的名字移动到第一列*，例如，我们移动`(3:82)`到第一位然后`(4:66)`等等`(2:55)`，同样的工作到其他列。

我正在尝试解决这个问题，我发现*点击表格标题的排序矩阵，*但在这种情况下，我们只对一列进行排序。我想排序 3。除此之外，我不想要的第二件事是*使用表头单击进行排序（您必须单击表头才能对值进行排序）*。我想在不点击的情况下自动完成。

这就是我在我的小代码中使用的：

```
 Table2.setPreferredScrollableViewportSize(Table2.getPreferredSize());
    Table2.setAutoCreateRowSorter(true);
    DefaultRowSorter sorter = ((DefaultRowSorter)Table2.getRowSorter());
    ArrayList list = new ArrayList();
    list.add( new RowSorter.SortKey(2, SortOrder.DESCENDING) );
    sorter.setSortKeys(list);
    sorter.sort();

    JScrollPane scrollPane = new JScrollPane( Table2 );
    getContentPane().add( scrollPane );
    frame.add(scrollPane, BorderLayout.CENTER);
    frame.setSize(300, 300);
    frame.setVisible(true); 
```

因此，我试图在不使用`JTable`and`getRowSorter`选项的情况下考虑其他方法来做到这一点。

# c# - C#将字节数组保存为xml文件

> ID：13213965
> 
> 赞同：0
> 
> 时间：2012-11-03T22:07:32.367
> 
> 标签：c#, xml, c#-4.0, bytearray, byte

我正在`.zip`从服务器接收文件。
该`.zip`文件是经过`64Base`编码发送的，它包含一个 XML 文件。

使用 将数据解码为二进制后`Convert.FromBase64String`，我可以将字节数组转换为 XML 吗？

我不想处理解压缩。

我尝试了以下代码：（导致乱码没有任何意义，而且看起来根本不像 XML）

```
XmlDocument doc = new XmlDocument();
string xml = Encoding.UTF8.GetString(buffer);
doc.LoadXml(xml); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T22:20:36.627

你说你不想解压，但你真的是说你不想解压到光盘吗？大多数 zip 库都允许您将文件直接解压缩到字节数组或解压缩到可以将 MemoryStream 传递给它的流。

不必解压缩。除非您可以控制服务器端，否则您可以将格式更改为未压缩文件（如 tar 文件）。然后你就不必解压缩了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T22:15:06.440

你说：

> 我正在从服务器接收一个 .zip 文件。

和：

> 我不想处理解压缩。

好。你必须。如果数据在`zip`存档中，您需要先提取它。你不能忽视这个事实。

有很多`zip`库[——sharpziplib](http://www.icsharpcode.net/opensource/sharpziplib/)是免费且易于使用的。

# c++ - c++ struct数组定义

> ID：13213968
> 
> 赞同：0
> 
> 时间：2012-11-03T22:08:16.453
> 
> 标签：c++, arrays, struct

我想知道是否有更好的方法来简单地创建一个包含具有 SIZE 的数组的结构：

```
...
#define SIZE 100;
...

struct foo {
    foo();
    bar * bars;
}

foo::foo() {
bars = new bar[SIZE];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T22:09:59.727

只要`SIZE`是编译时常量，您就可以简单地

```
struct foo {
    bar bars[SIZE];
} 
```

# c++ - 为什么要堆叠 不在 g++ 中编译？

> ID：13213978
> 
> 赞同：16
> 
> 时间：2012-11-03T22:09:42.007
> 
> 标签：c++, templates, stl, g++

我在为大型（相对于我们团队的规模）项目维护端口时遇到了这个问题，但是创建一个小示例很简单。堆栈溢出.cpp：

```
#include<iostream>
#include<string>
#include<stack>

using namespace std;

int main (int argc, char *argv[]) {
  stack<const string> strstack;
  string str("Hello, world");
  strstack.push(str);
  cout << strstack.top() << endl;
  return 0;
} 
```

看起来是正确的，对吧？MSVS 也这么认为。然而：

```
g++ stackoverflow.cpp
In file included from /usr/include/c++/4.7/x86_64-linux-gnu/bits/c++allocator.h:34:0,
                 from /usr/include/c++/4.7/bits/allocator.h:48,
                 from /usr/include/c++/4.7/string:43,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from stackoverflow.cpp:1:
/usr/include/c++/4.7/ext/new_allocator.h: In instantiation of ‘class __gnu_cxx::new_allocator<const std::basic_string<char> >’:
/usr/include/c++/4.7/bits/allocator.h:89:11:   required from ‘class std::allocator<const std::basic_string<char> >’
/usr/include/c++/4.7/bits/stl_deque.h:489:61:   required from ‘class std::_Deque_base<const std::basic_string<char>, std::allocator<const std::basic_string<char> > >’
/usr/include/c++/4.7/bits/stl_deque.h:728:11:   required from ‘class std::deque<const std::basic_string<char>, std::allocator<const std::basic_string<char> > >’
/usr/include/c++/4.7/bits/stl_stack.h:98:46:   required from ‘class std::stack<const std::basic_string<char> >’
stackoverflow.cpp:9:23:   required from here
/usr/include/c++/4.7/ext/new_allocator.h:83:7: error: ‘const _Tp* __gnu_cxx::new_allocator<_Tp>::address(__gnu_cxx::new_allocator<_Tp>::const_reference) const [with _Tp = const std::basic_string<char>; __gnu_cxx::new_allocator<_Tp>::const_pointer = const std::basic_string<char>*; __gnu_cxx::new_allocator<_Tp>::const_reference = const std::basic_string<char>&]’ cannot be overloaded
/usr/include/c++/4.7/ext/new_allocator.h:79:7: error: with ‘_Tp* __gnu_cxx::new_allocator<_Tp>::address(__gnu_cxx::new_allocator<_Tp>::reference) const [with _Tp = const std::basic_string<char>; __gnu_cxx::new_allocator<_Tp>::pointer = const std::basic_string<char>*; __gnu_cxx::new_allocator<_Tp>::reference = const std::basic_string<char>&]’
/usr/include/c++/4.7/ext/new_allocator.h: In instantiation of ‘void __gnu_cxx::new_allocator<_Tp>::deallocate(__gnu_cxx::new_allocator<_Tp>::pointer, __gnu_cxx::new_allocator<_Tp>::size_type) [with _Tp = const std::basic_string<char>; __gnu_cxx::new_allocator<_Tp>::pointer = const std::basic_string<char>*; __gnu_cxx::new_allocator<_Tp>::size_type = long unsigned int]’:
/usr/include/c++/4.7/bits/stl_deque.h:540:2:   required from ‘void std::_Deque_base<_Tp, _Alloc>::_M_deallocate_node(_Tp*) [with _Tp = const std::basic_string<char>; _Alloc = std::allocator<const std::basic_string<char> >]’
/usr/include/c++/4.7/bits/stl_deque.h:643:2:   required from ‘void std::_Deque_base<_Tp, _Alloc>::_M_destroy_nodes(_Tp**, _Tp**) [with _Tp = const std::basic_string<char>; _Alloc = std::allocator<const std::basic_string<char> >]’
/usr/include/c++/4.7/bits/stl_deque.h:566:4:   required from ‘std::_Deque_base<_Tp, _Alloc>::~_Deque_base() [with _Tp = const std::basic_string<char>; _Alloc = std::allocator<const std::basic_string<char> >]’
/usr/include/c++/4.7/bits/stl_deque.h:781:15:   required from ‘std::deque<_Tp, _Alloc>::deque() [with _Tp = const std::basic_string<char>; _Alloc = std::allocator<const std::basic_string<char> >]’
stackoverflow.cpp:9:23:   required from here
/usr/include/c++/4.7/ext/new_allocator.h:100:9: error: invalid conversion from ‘const void*’ to ‘void*’ [-fpermissive]
In file included from /usr/include/c++/4.7/ext/new_allocator.h:34:0,
                 from /usr/include/c++/4.7/x86_64-linux-gnu/bits/c++allocator.h:34,
                 from /usr/include/c++/4.7/bits/allocator.h:48,
                 from /usr/include/c++/4.7/string:43,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from stackoverflow.cpp:1:
/usr/include/c++/4.7/new:97:6: error:   initializing argument 1 of ‘void operator delete(void*)’ [-fpermissive]
In file included from /usr/include/c++/4.7/deque:63:0,
                 from /usr/include/c++/4.7/stack:61,
                 from stackoverflow.cpp:3:
/usr/include/c++/4.7/bits/stl_construct.h: In instantiation of ‘void std::_Construct(_T1*, const _T2&) [with _T1 = const std::basic_string<char>; _T2 = std::basic_string<char>]’:
/usr/include/c++/4.7/bits/stl_uninitialized.h:77:3:   required from ‘static _ForwardIterator std::__uninitialized_copy<_TrivialValueTypes>::__uninit_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = std::_Deque_iterator<const std::basic_string<char>, const std::basic_string<char>&, const std::basic_string<char>*>; _ForwardIterator = std::_Deque_iterator<const std::basic_string<char>, const std::basic_string<char>&, const std::basic_string<char>*>; bool _TrivialValueTypes = false]’
/usr/include/c++/4.7/bits/stl_uninitialized.h:119:41:   required from ‘_ForwardIterator std::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = std::_Deque_iterator<const std::basic_string<char>, const std::basic_string<char>&, const std::basic_string<char>*>; _ForwardIterator = std::_Deque_iterator<const std::basic_string<char>, const std::basic_string<char>&, const std::basic_string<char>*>]’
/usr/include/c++/4.7/bits/stl_uninitialized.h:260:63:   required from ‘_ForwardIterator std::__uninitialized_copy_a(_InputIterator, _InputIterator, _ForwardIterator, std::allocator<_Tp>&) [with _InputIterator = std::_Deque_iterator<const std::basic_string<char>, const std::basic_string<char>&, const std::basic_string<char>*>; _ForwardIterator = std::_Deque_iterator<const std::basic_string<char>, const std::basic_string<char>&, const std::basic_string<char>*>; _Tp = const std::basic_string<char>]’
/usr/include/c++/4.7/bits/stl_deque.h:841:9:   required from ‘std::deque<_Tp, _Alloc>::deque(const std::deque<_Tp, _Alloc>&) [with _Tp = const std::basic_string<char>; _Alloc = std::allocator<const std::basic_string<char> >; std::deque<_Tp, _Alloc> = std::deque<const std::basic_string<char>, std::allocator<const std::basic_string<char> > >]’
/usr/include/c++/4.7/bits/stl_stack.h:130:14:   required from ‘std::stack<_Tp, _Sequence>::stack(const _Sequence&) [with _Tp = const std::basic_string<char>; _Sequence = std::deque<const std::basic_string<char>, std::allocator<const std::basic_string<char> > >]’
stackoverflow.cpp:9:23:   required from here
/usr/include/c++/4.7/bits/stl_construct.h:85:7: error: invalid static_cast from type ‘const std::basic_string<char>*’ to type ‘void*’ 
```

有了`stack<string> strstack;`这一切都干净了。这是一个 g++ 错误吗？有没有一种解决方法，这样我们就不必`const`在错误修复之前放弃？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-03T22:15:50.493

标准容器的成员必须是可复制或可移动的 (C++11)。如果类型是`const`它不符合要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T21:34:19.630

容器可以保存指向常量的指针（或者最好是智能指针）。这保持了所需的 const 语义，尽管语法可能有点笨拙。

例如：

```
stack<shared_ptr<string const>> s;
s.push(make_shared<string>("foo"));
cout << *s.top() << endl; 
```

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/16035250/)。

# android - 打开手电筒

> ID：13213979
> 
> 赞同：1
> 
> 时间：2012-11-03T22:09:49.717
> 
> 标签：android, camera, toggle, flashlight

我很抱歉在所有其他类似的问题中发布另一个问题，但我尝试过的问题都没有奏效。我正在尝试打开手电筒。这是我的清单：

```
<uses-permission android:name="android.permission.CAMERA" />

<uses-permission android:name="android.permission.FLASHLIGHT"/>

<uses-feature android:name="android.hardware.camera"
    android:required="false" />

<uses-feature android:name="android.hardware.camera.autofocus"
    android:required="false" />

<uses-feature android:name="android.hardware.camera.flash"
    android:required="false" /> 
```

这是我打开手电筒的代码：

```
 Camera cam = Camera.open();     
    Parameters p = cam.getParameters();
    p.setFlashMode(Parameters.FLASH_MODE_TORCH);
    cam.setParameters(p);
    cam.startPreview(); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:18:47.357

您确定您的设备可以处理 FLASH_MODE_TORCH 吗？camera.getParameters().getSupportedFlashModes(); 检查 FLASH_MODE_TORCH 是否在此调用返回的列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T17:38:56.267

May be this [link](http://coderzworld.blogspot.in/2015/01/how-to-create-flash-light-on-android.html) will help you . I found this working for me.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T15:12:17.610

我使用了以下清单：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.FLASHLIGHT"/>
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />
<uses-feature android:name="android.hardware.camera.flash" />
<uses-sdk android:minSdkVersion="14"/> 
```

请注意将其添加到清单的右侧！看看这里的模型：http: [//developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

我打开闪光灯的代码如下所示：

```
public void myFlash (View view) {

    Context context = this;

    context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH);

    Camera cam = Camera.open();
    Camera.Parameters p = cam.getParameters();
    p.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
    cam.setParameters(p);
    cam.startPreview();

    //cam.stopPreview();
    //cam.release();

} 
```

# web-config - EF 迁移的 Web.config 配置

> ID：13213981
> 
> 赞同：5
> 
> 时间：2012-11-03T22:09:53.627
> 
> 标签：web-config, entity-framework-5, entity-framework-migrations

我正在我的项目中实施 Code-First Migrations，并且不想一直在 Package Manager Console 中使用 Add-Migration 和 Update-Database。我希望数据库的更新自动发生。

出于这个原因，我更新了我的 web.config 文件来执行此操作。我删除了我的数据库，但由于某种原因，当我启动应用程序时，它没有创建数据库。难道我做错了什么？

这是我的 web.config

```
<entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
    <contexts>
      <context type="AuctionService.DataAccess.AuctionContext, AuctionService.DataAccess">
        <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[[AuctionService.DataAccess.AuctionContext, AuctionService.DataAccess], [AuctionService.DataAccess.Migrations.Configuration, AuctionService.DataAccess]], EntityFramework">
        </databaseInitializer>
      </context>
    </contexts>
  </entityFramework> 
```

**编辑**

我的代码在 WCF 服务中，当我调试此服务时，我得到了这个

> 服务器在处理请求时遇到错误。异常消息是“无法更新数据库以匹配当前模型，因为存在待处理的更改并且禁用了自动迁移。将挂起的模型更改写入基于代码的迁移或启用自动迁移。将 DbMigrationsConfiguration.AutomaticMigrationsEnabled 设置为 true 以启用自动迁移。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T06:09:15.403

尝试确保已在类的构造函数中将[AutomaticMigrationsEnabled](http://msdn.microsoft.com/en-us/library/system.data.entity.migrations.dbmigrationsconfiguration.automaticmigrationsenabled%28v=vs.103%29.aspx)属性设置为。`true``AuctionService.DataAccess.Migrations.Configuration`

一旦发生这种情况，如果存在潜在的数据丢失，您也可能会遇到异常；[您可以通过将AutomaticMigrationDataLossAllowed](http://msdn.microsoft.com/en-us/library/system.data.entity.migrations.dbmigrationsconfiguration.automaticmigrationdatalossallowed%28v=vs.103%29.aspx)属性设置为 来忽略这一点`true`。

例如：

```
internal sealed class Configuration : DbMigrationsConfiguration<AuctionContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;
        // AutomaticMigrationDataLossAllowed = true; // You may want this also, but be careful.
    }
} 
```

我不确定您是否可以在 .config 文件中设置它（找不到关于此的文档）。

我相信，当您最初设置迁移时，您可以通过运行命令获取生成的配置类来为您设置该属性`Enable-Migrations –EnableAutomaticMigrations`

# expressionengine - 在 ExpressionEngine 中保留标题的大小写？

> ID：13213985
> 
> 赞同：6
> 
> 时间：2012-11-03T22:10:12.837
> 
> 标签：expressionengine

在 EE 1 下，我能够破解源代码以允许我保留标题的确切大小写的 url 标题。也就是说，我能够阻止它强制所有 url 标题为小写。

我需要在 EE 2 上复制相同的行为，但到目前为止我还没有完全管理。

到目前为止我所做的是：

```
In <system>/expressionengine/modules/channel/mod.channel_standalone.php:

commented out this line: NewText = NewText.toLowerCase();

added “A-Z” to this line: NewText = NewText.replace(/[^a-z0-9-_]/g,’‘);

In <system>/expressionengine/helpers/EE_url_helper.php:

removed strtolower() from this section:

  if ($lowercase === TRUE)
  {
  $str = strtolower($str);
  }

added “A-Z” to this line: [^a-z0-9\-\._] 
```

我不确定是否真的需要所有这些更改，但我认为是的。从外观上看，mod.channel_standalone.php 的更改应该处理通过独立输入表单提交的任何提交，而对 EE_url_helper.php 的更改应该处理常规发布。

它几乎可以，除了实时 URL。我键入标题时生成的 URL 以小写形式生成。但是，如果我在保存帖子之前将其删除，它会在 url 标题中以与标题相同的大小写保存帖子。至少，它在大多数情况下都是这样做的。有时，它确实会使用小写 url 保存。

如果有人能告诉我如何让实时 URL 标题也能合作，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T03:32:35.993

这发生在`themes/javascript/compressed/jquery/plugins/ee_url_title.js`.

由于 Javascript 是压缩的，因此可能有点难以找到，但您要编辑的表达式是：`a = (k + a).toLowerCase().replace(d, c);`

# c - 指针在函数外部获取垃圾值，但在函数内部获取常规值

> ID：13213992
> 
> 赞同：0
> 
> 时间：2012-11-03T22:11:42.577
> 
> 标签：c, pointers, realloc

全面披露：这是我第一次在 C 中进行任何重要的编程，也是我在 Stack Overflow 上的第一篇文章。

我正在编写最终将与 Bison 一起使用的代码，以实现 Scheme/Racket 语言的一小部分。所有这些代码都在一个 C 文件中。我有三个结构：`Binding`、`Lambda`和`SymbolEntry`。我还没有使用该`Lambda`结构，它只是为了完整性。我还有一个包含符号条目的符号表。`printSymbolTable()`完全符合名称的含义：

```
typedef struct
{
    char* name;
    char* value;
} Binding;

typedef struct
{
    int numBindings;
    Binding** bindings;
    char* functionBody; 
} Lambda;

typedef struct
{
    Binding* binding;
    Lambda* function;
} SymbolEntry;

SymbolEntry* symbolTable = NULL;
int numSymbols = 0;

void printSymbolTable()
{
    if (symbolTable)
    {
        int i = 0;
        for (i; i < numSymbols; i++)
        {
            printf("\tsymbolTable[%i]: %s = %s\n", i, symbolTable[i].binding->name, symbolTable[i].binding->value);
        }
    }
} 
```

我目前正在尝试制定定义和查找变量的逻辑。2个相关功能：

```
// Takes a name and an exprssion and stores the result in the symbol table
void defineVar(char* name, char* expr)
{
    printf("\nSetting %s = %s\n", name, expr);
    printf("Previous number of symbols: %i\n", numSymbols);
    Binding props;
    props.name = name;
    props.value = expr;

    SymbolEntry entry;
    entry.binding = &props;
    entry.function = NULL;

    symbolTable = realloc(symbolTable, sizeof(SymbolEntry) * ++numSymbols);
    if (!symbolTable)
    {
        printf("Memory allocation failed. Exiting.\n");
        exit(1);
    }
    symbolTable[numSymbols - 1] = entry;
    printf("New number of symbols: %i\n", numSymbols);
    printf("defineVar result:\n");
    printSymbolTable();
}

// Test storing and looking up at least 4 variables, including one that is undefined
void testVars()
{
    printf("Variable tests\n");

    defineVar("foo", "0");
    printf("After returning from defineVar:\n");
    printSymbolTable();

    defineVar("bar", "20");
    printf("After returning from defineVar:\n");
    printSymbolTable();
} 
```

`main()`来电`testVars()`。编译时我没有收到任何警告或错误，并且程序成功执行。然而，结果如下：

```
Variable tests

Setting foo = 0
Previous number of symbols: 0
New number of symbols: 1
defineVar result:
    symbolTable[0]: foo = 0
After returning from defineVar:
    symbolTable[0]: 1�I��^H��H���PTI��@ = �E

Setting bar = 20
Previous number of symbols: 1
New number of symbols: 2
defineVar result:
    symbolTable[0]: bar = 20
    symbolTable[1]: bar = 20
After returning from defineVar:
    symbolTable[0]: 1�I��^H��H���PTI��@ = �E
    symbolTable[1]: 1�I��^H��H���PTI��@ = �E��� 
```

我不仅在`defineVar()`函数之外得到垃圾值，而且对定义的调用也`bar`显示了不正确的非垃圾值。我不确定我做错了什么，但我认为它可能与`realloc()`. 但是，在将字符串解析为单个标记时，类似的策略会起作用，所以这就是我试图模仿的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T22:15:20.993

因为它指向函数本地的变量（或变量 - 至少`props`，还没有进一步阅读），并且堆栈帧在您返回后被丢弃（并很快被覆盖）。

# java - 扩展泛型

> ID：13213994
> 
> 赞同：1
> 
> 时间：2012-11-03T22:12:04.623
> 
> 标签：java, generics, inheritance, polymorphism

我有一个抽象类

```
public abstract class Integrator {
    public abstract Point integrate();
    public abstract Point function(Double x, Point y);
} 
```

由

```
public abstract class Euler extends Integrator {
    public Point integrate() {
        ... // this calls function(x, y)
    }
}

public abstract class Central extends Integrator {
    public Point integrate() {
        ... // this calls function(x, y)
    }
} 
```

两者的实现`integrate()`方式不同。现在，我实例化的具体类是这样定义的

```
public class EulerIVP extends Euler {
    public EulerIVP(...) { ... }

    public Point function(Double x, Point y) {
        ...
    }
}

public class CentralIVP extends Central {
    public CentralIVP(...) { ... }

    public Point function(Double x, Point y) {
        ...
    }
} 
```

它们都以`function()`完全相同的方式实现，但将使用其父级的`integrate()`. 因为它们都扩展一个`Euler`类是没有意义的。所以我希望我能做这样的事情`Central``abstract``IVP`

```
public class IVP<T extends Integrator> extends T {
    public IVP(...) { ... }
    public Point function(Double x, Point y) { ... }
}

Integrator eulerIntegrator = new IVP<Euler>(...);
Integrator centralIntegrator = new IVP<Central>(...); 
```

但我不能，因为我相信，`T`这里将是一个类型而不是一个类。我可以做类似的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T22:23:22.623

您可以使用组合而不是继承。就像是：

```
public class IVP {
    private Integrator integrator;

    public IVP(Integrator integrator) {
        this.integrator = integrator;
    }

    public Point function(Double x, Point y) {
        // Calculate using integrator.integrate();
    }
} 
```

然后使 euler 成为非抽象类：

```
IVP eulerIVP = new IVP(new Euler()); 
```

# c - 从 double 到指针的转换

> ID：13213995
> 
> 赞同：2
> 
> 时间：2012-11-03T22:12:05.973
> 
> 标签：c, linked-list, generic-list

我是 C 的新手，现在我正在尝试用 3 个元素实现基本的通用链表，每个元素将包含不同的数据类型值-`int`和.`char``double`

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

struct node
{
    void* data;
    struct node* next;
};

struct node* BuildOneTwoThree()
{
    struct node* head   = NULL;
    struct node* second = NULL;
    struct node* third  = NULL;

    head    = (struct node*)malloc(sizeof(struct node));
    second  = (struct node*)malloc(sizeof(struct node));
    third   = (struct node*)malloc(sizeof(struct node));

    head->data = (int*)malloc(sizeof(int));
    (int*)(head->data) = 2;
    head->next = second;

    second->data = (char*)malloc(sizeof(char));
    (char*)second->data = 'b';
    second->next = third;

    third->data = (double*)malloc(sizeof(double));
    (double*)third->data = 5.6;
    third->next = NULL;

    return head;
}

int main(void)
{
    struct node* lst = BuildOneTwoThree();

    printf("%d\n", lst->data);
    printf("%c\n", lst->next->data);
    printf("%.2f\n", lst->next->next->data);

    return 0;
} 
```

我对前两个元素没有问题，但是当我尝试将 double 类型的值分配给第三个元素时，我得到一个错误：« **can not convert from `double`to`double *`** »。

这个错误的原因是什么？为什么在`int`or的情况下我不会得到相同的错误`char`？还有最重要的问题：如何解决这个问题，如何为`double`第三个元素的数据字段赋值？

问题字符串是« `(double*)third->data = 5.6;`»。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T22:18:16.450

在您的“工作”示例中，您调用`malloc`以获取指向某个新分配空间的指针，然后立即将该指针丢弃并用您的整数或字符值替换*指针值。*这或多或少是偶然的，因为在大多数 C 实现中，指针单元格可以保存整数或字符值，尽管您应该收到警告。如果您真的尝试在这些分配之后取消引用数据指针，您可能会遇到崩溃和核心转储。

您希望将值放在指针指向的位置*，*而不是指针本身。这意味着您需要额外的`*`：

```
 *((double *)third->data) = 5.6; 
```

`*`类型转换中的`(double *)`是类型名称的一部分 - “指向双精度的指针”。演员表说“取值`third->data`并将其解释为指向双精度的指针”。结果仍然是一个指针，因此当您分配给它时，您正在更改指针指向的位置（并且可能使其指向某个毫无意义的地方）。相反，您想为它已经指向的位置分配一个值，这就是外部`*`所做的。

但是，如果您只存储基本类型，如`int`、`char`和`double`，则不需要通过指针（并担心随之而来的内存管理）。你可以只使用一个联合：

```
struct node 
{
    struct node *next;
    union {
        char c;
        int  i;
        double d;
    } data;
 } 
```

然后你会做例如

```
head->data.i = 2;
second->data.c = 'b';
third->data.d = 5.6; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T22:22:14.857

您正在转换指针，但您需要取消对分配的引用，该分配适用于前两个，因为`int`and`char`被转换为指针，它应该是：

```
*((int*)(head->data)) = 2;
*((char*)(second->data)) = 'b';
*((double*)(third->data)) = 5.6; 
```

无论如何，首先应该对这样的演员发出警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T22:21:42.130

您不能将值分配给*指针*，您必须将其分配给指向的*对象*（在最后一种情况下，双精度 - 您只有一个双精度的空间）。

所以：

```
 ...
    head->data = (int*)malloc(sizeof(int));
    ((int*)(head->data))[0] = 2;
    head->next = second;

    second->data = (char*)malloc(sizeof(char));
    ((char*)second->data)[0] = 'b';
    second->next = third;

    third->data = (double*)malloc(2 * sizeof(double));
    ((double*)third->data)[0] = 5.6;
    ((double*)third->data)[1] = 3.1415;
    // We only allocated space for 2 doubles, so this line here would cause a crash
    // (or anyway, a data corruption)
    // ((double*)third->data)[2] = 666;
    third->next = NULL;

    return head;
}

int main(void)
{
    struct node* lst = BuildOneTwoThree();

    printf("%d\n", ((int *)lst->data)[0]);
    printf("%c\n", ((char *)lst->next->data)[0]);
    printf("%.2f\n", ((double *)lst->next->next->data)[0]);
    printf("%.2f\n", ((double *)lst->next->next->data)[1]);
    ... 
```

返回：

```
2
b
5.60
3.14 
```

顺便说一句：启用完整警告后，编译器应该警告您前两个分配是有风险的（GCC 认为它们是错误的），第三个是不允许的（不能从双精度转换为指针）

还有一件事：当您以这种方式使用结构负载时，您必须考虑实际存储在负载本身中的数据类型**会丢失**。因此，您不能通过检查链表的实例来确定它是 char、integer 还是 double。更糟糕的是，甚至可能不允许*检查该值并导致程序崩溃（假设您存储了一个字节，但尝试读取四个或八个）。*

因此，您还应该在结构中存储一个额外的字段，`enum`其中包含原始数据类型的指标（可能）：

```
typedef enum
{
    TYPE_IS_CHAR,
    TYPE_IS_INT,
    TYPE_IS_FLOAT,
    TYPE_IS_DOUBLE,
    ...
} mytype_t;

struct node
{
    mytype_t type;
    void     *data;
    struct node *next;
} 
```